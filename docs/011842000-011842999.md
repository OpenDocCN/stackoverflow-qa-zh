# StackOverflow 问答 11842000-11842999

# java - 在 Java 的编译时检查具有继承约束的组合

> ID：11842001
> 
> 赞同：1
> 
> 时间：2012-08-07T08:30:04.827
> 
> 标签：java, inheritance, composition

我有一个关于 Java 继承和组合的最佳实践的问题：

> 假设你有一个水果，它被苹果和柠檬扩展。
> 
> 在这些旁边，您还有一个由 AppleBasket 和 LemonBasket 扩展的篮子。
> 
> Fruits 与其各自的篮子具有双向的一对多关系，因此 Fruits 有一个篮子，而篮子有一个水果列表。

现在我想做的事情是强制 AppleBasket 在编译时只包含 Apples，对于 LemonBaskets 也是如此。同样，Apple 应该只有一个 AppleBasket 作为财产，Lemons 也是如此。

我尝试过使用泛型、抽象方法和受保护的变量，但我总是找到不采用某种方法的理由。重要的是我们不要违反 SOLID 原则，因此例如超类应该包含 has-a 和 has-many 属性以避免代码重复等。

当有人试图将 Lemon 放入 AppleBasket 时，产生编译器错误是关键，反之亦然。

干杯，安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:51:57.893

通过谷歌搜索协变和逆变，您可能会找到一些有关更复杂类型的有用信息。

如果你不介意使用 Scala，它可以编译成字节码，你可以在 Java 程序中使用，Scala 为你提供了一些很好的语法来做这种事情（Java 稍后）：

```
水果类
类篮子[T <：水果] {
    def addToBasket(水果:T) = {}
}

苹果类扩展水果
柠檬类扩展水果

类 AppleBasket 扩展了 Basket[Apple]

val applebasket = 新的 AppleBasket

applebasket.addToBasket（新苹果）

applebasket.addToBasket（新柠檬）

```

此代码片段的最后一行给出了编译时错误：

```
$ scala 测试.scala
C:\cygwin\home\user\Test.scala:18: 错误：类型不匹配；
 发现：this.Lemon
 必需：this.Apple
applebasket.addToBasket（新柠檬）
                        ^
发现一个错误

```

我最近一直在玩 Scala，我在 Java 中思考这个问题时遇到了麻烦，但在 Java 中我可能会做更多这样的事情：

```
类水果{}
Apple 类扩展 Fruit{}
柠檬类扩展水果{}
类篮子<T扩展水果>{
    公共无效 addToBasket(T foo) {}
}
类废话{
    无效 doIt() {
        苹果 a = 新苹果（）；
        篮子 b = 新篮子<苹果>();
        b.addToBasket(a);
        柠檬 l = 新柠檬（）；
        b.addToBasket(l);
    }
}

```

b.addToBasket(l) 行给出以下编译时类型错误：

```
Basket<Apple> 类型中的方法 addToBasket(Apple) 不适用于参数 (Lemon)

```

给出相同编译错误的另一个选项（从注释中复制以使其更清晰）：

```
//水果、苹果和篮子的定义相同，但有：
类 AppleBasket 扩展 Basket<Apple> {}
类废话{
    无效 doIt() {
        苹果 a = 新苹果（）；
        篮子<Apple> b = new AppleBasket();
        b.addToBasket(a);
        柠檬 l = 新柠檬（）；
        b.addToBasket(l);
    }
}

```

# sql - 如果第一个结果为空，则查询不同的表

> ID：11842005
> 
> 赞同：0
> 
> 时间：2012-08-07T08:30:25.263
> 
> 标签：sql

我正在编写一个存储过程来查看两个表 PersonTbl、UserTbl。首先在 PersonTbl 中搜索用户 ID，如果用户 ID 存在，则从 UserTbl 获取电子邮件地址并返回两者。但是，如果 ID 不存在，则在另外两个表（PersonsPendingTbl、UsersPendingTbl）中搜索 ID 和电子邮件。如果再次找不到 ID，则返回 null/nulls。到目前为止，这是我想出的，但不确定它是否是最好的编写方式。让我知道您是否建议进行任何更改；

```
create PROCEDURE [dbo].[MyNewSP]
@ID VARCHAR(MAX)
AS 
    DECLARE @userID VARCHAR(50)
    DECLARE @Email VARCHAR(100)
    DECLARE @currentlyActive CHAR
    BEGIN

    SELECT
        @userID = userTbl.ID ,
        @Email = personTbl.EMAIL,
        @currentlyActive = 'Y'
    FROM
        personTbl
        INNER JOIN userTbl ON personTbl.person_id = userTbl.person_id
    WHERE
        ( userTbl.ID = @ID )

    IF ( @userID != @ID ) --Check to see if null
        BEGIN
            SELECT @currentlyActive = 'N'

            SELECT
                upt.ID ,
                ppt.EMAIL,
                @currentlyActive
            FROM
                PersonsPendingTbl ppt
                INNER JOIN dbo.UsersPendingTbl upt ON ppt.person_id = upt.person_id
            WHERE
                ( upt.ID = @ID )
        END
    ELSE 
        BEGIN
            SELECT
                @userID ,
                @Email ,
                @currentlyActive
        END

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:19:49.450

我不确定您的待处理表和非待处理表之间值的唯一性，但这应该足够接近让您继续前进。

```
select 
case 
    when p.PersonId is null and pp.personPendingId is null then null 
    else userid
end as userid,
case 
    when p.PersonId is not null  then p.email
    when p.PersonId is null and pp.PersonPendingID is not null then pp.email
    else null
end as email,
case 
    when p.PersonId is not null  then 'Y' 
    when p.PersonId is null and pp.PersonPendingID is not null then 'N' 
    else null
end as CurrentlyActive
from userTbl u 
left join PersonTbl p on u.Person_id = p.PersonId 
left join userPendingTbl up on u.UserId = up.UserPendingId 
left join PersonPendingTbl pp on up.personPendingId = pp.PersonPendingID 
where u.UserId = @ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:32:38.840

合并两个结果，但始终选择第一行。如果用户注册为 Active AND Inactive，它将返回 Active 一个：

```
Select * 
  from (
    SELECT userTbl.ID AS UID, personTbl.EMAIL as email, 'Y' as active
      FROM personTbl
        JOIN userTbl ON personTbl.person_id = userTbl.person_id
        WHERE (userTbl.ID = @ID)
    union all
    SELECT upt.ID AS UID, ppt.EMAIL as email, 'N' as active
      FROM PersonsPendingTbl ppt
        INNER JOIN dbo.UsersPendingTbl upt ON ppt.person_id = upt.person_id
      WHERE (upt.ID = @ID)) user
  limit 0,1 
```

# python - Django 抽象模型导入

> ID：11842011
> 
> 赞同：0
> 
> 时间：2012-08-07T08:30:51.363
> 
> 标签：python, django, django-models

我有一些抽象模型：

```
class MyModel(models.Model):
    #some filelds...
    class Meta:
        abstract = True 
```

当我像这样导入这个模型时：`from project.application.models import MyModel`我导入了这个类：`<class 'project.application.models.MyModel'>`但是当我像这样导入时：我导入`from application.models import MyModel`了这个类，没有`project`前缀：`<class 'application.models.MyModel'>`

如果模型不是抽象的，它总是带`project`前缀导入：`<class 'project.application.models.MyModel'>`

所以当我尝试使用 issubclass 函数时，它会导致奇怪的行为。

问题是为什么以这种方式导入 django 抽象模型以及如何避免这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:01:38.010

## 说明

我不确定这与 Django 或抽象类有关，但与路径的构建方式有关。

举个例子：

```
dir0/
    dir1/
        __init__.py 
        dir2/
            __init__.py containing class A 
```

现在假设两者`dir0`都`dir1`在你的路上，你会得到：

```
>>> from dir2 import B
>>> B
<class 'dir2.B'>
>>> from dir1.dir2 import B
>>> B
<class 'dir1.dir2.B'> 
```

## 解决方案

幸运的是，从 django 1.4 开始，您不再需要路径技巧，这种情况应该不会再出现了。只有包含你的 manage.py 的目录，以及你的项目文件夹和应用程序文件夹应该在你的路径上。

您应该*始终*使用`import myapp...`or `from myapp...`，不要在导入中使用该项目，这会使您的应用程序不可重用。

您可以查看[1.4 的 django 文档](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)，该文档将旧项目布局与新项目布局进行了比较。

# ruby-on-rails-3 - 在 Rails 中自动执行动作

> ID：11842013
> 
> 赞同：0
> 
> 时间：2012-08-07T08:31:00.850
> 
> 标签：ruby-on-rails-3, timeout

我想在某个时间在其他控制器中自动执行操作。我在这个网站上阅读了更多类似的帖子，所有这些帖子都讲述了何时或延迟工作。但我不明白它是如何工作的=（这是我想要的一个例子。

```
def create
@user = User.find(params[:user_id])
@client = @user.clients.create(params[:client])
if @client.save
 redirect_to user_clients_path(@user)
      else
 render :action => 'new'
      end
Timeout(@client.event_time) 
    redirect_to :controller => :some_controller, action => some_action
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:57:23.413

有点难以理解你想要什么效果：

如果您想要的是在用户在一定时间内没有响应的情况下发生超时操作，那么最干净的方法是在客户端编写一些 javascript - 设置一个触发操作的计时器如果计时器到期，则在用户按下按钮时清除计时器。

如果您想要在创建客户端后显示页面几秒钟然后切换到新页面，您可以在显示的第一页中放置元刷新，并在 @client 之后自动重定向到所需的页面.event_time 秒。

# .net - DataTemplate 中的 XamlReader 动态事件

> ID：11842014
> 
> 赞同：1
> 
> 时间：2012-08-07T08:31:00.943
> 
> 标签：.net, wpf, xaml

想要在数据模板中的按钮上添加点击事件。有一些代码：

```
 var temp = (DataTemplate)XamlReader.Load(
                   new MemoryStream(Encoding.Default.GetBytes(
                       @"<DataTemplate xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'><Button><TextBlock Text='1' TextAlignment='Center'/></Button></DataTemplate>"
                   )));
 var button = temp.LoadContent() as Button;
 button.Click += (sender, args) =>
                    {
                        MessageBox.Show("123");
                    };
 return temp; 
```

所以，当我点击按钮时，什么也没有发生。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:08:55.813

看看[这个](https://stackoverflow.com/questions/2381740/changing-datatemplate-textblock-property-at-runtime)问题，很相似。要获得您需要的东西，您可以像这样使用框架元素工厂：

```
private DataTemplate CreateTemplate()
    {
        FrameworkElementFactory fef = new FrameworkElementFactory(typeof(Button));//new FrameworkElementFactory("<Button Name='ButtonName'><TextBlock Text='1' TextAlignment='Center'/></Button>");
        fef.AddHandler(Button.ClickEvent, new RoutedEventHandler(b_Click));
        fef.SetValue(Button.ContentProperty, "1");

        return new DataTemplate() { VisualTree = fef };
    }

    private void b_Click(object sender, RoutedEventArgs e)
    {
        MessageBox.Show("123");
    } 
```

# python - 寻找使用 Python 进行面向对象编程的良好介绍

> ID：11842016
> 
> 赞同：-4
> 
> 时间：2012-08-07T08:31:12.407
> 
> 标签：python

我是 python 新手。我正在寻找使用 Python 进行面向对象编程的良好介绍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:33:53.467

[Python 教程](http://docs.python.org/tutorial/classes.html)应该解释你所需要的一切。如果您想要更多资源，请查看Python 邮件列表上的[这个最近的线程。](http://mail.python.org/pipermail/python-list/2012-August/627895.html)

# android - 在 Android 中使用 JPEG 模拟相机

> ID：11842022
> 
> 赞同：0
> 
> 时间：2012-08-07T08:31:26.200
> 
> 标签：android, caching, storage, diskspace, android-assets

我有一个应用程序，我们希望用户能够使用手机上的摄像头运行它（并将摄像头字节输入我们的库），或者使用 jpeg 序列并输入这些图像。我们计划发布一些不同的图像序列，它们将被打包到设备上的资产文件夹中。我们的 API 支持将图像加载为文件路径或图像的实际字节。

输入 jpeg 图像的最佳方法是什么？

在我看来，我有两个选择：

1.  直接从 AssetManager 中加载 jpeg 的字节，并将它们作为字节传递给我的 API。这意味着我不断地提取 AssetManager 的每个文件的字节。（我打算对这样做的成本进行一些分析，但也许有人已经知道成本太高了。）
2.  将所有图像复制到缓存文件夹中，然后按文件名加载它们。在我看来，在性能方面，这种方法更好，但它需要更多的前期开销，并且显然会占用用户设备上的更多空间。（现在我们有一个限制，每个图像序列将少于 30 秒，因此 30fps*30seconds = 900 张图像。）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:31:40.890

最终使用方法＃2，最终似乎没问题。

# dns - 本地网络内的名称服务器不起作用

> ID：11842027
> 
> 赞同：0
> 
> 时间：2012-08-07T08:31:43.653
> 
> 标签：dns, bind

当我想在本地网络中托管我的名称服务器时遇到问题。

我有一个注册域 (example.com)。

我想在我的本地网络中托管“local.example.com”的名称服务器。

我希望本地网络中的名称服务器定义“local.example.com”的记录。

我将“local.example.com”的 NS 记录设置为“ns-local.example.com”。

“ns-local.example.com”的 IP 是“192.168.1.243”。

我在域“example.com”的公共 DNS 中定义了 local.example.com 的 NS 记录，如下所示：

本地 IN NS ns-local.example.com。

ns-local IN A 192.168.1.243

我们的局域网中有一个单独的递归 DNS 服务器，我们不能将其用于任何权威的 DNS 服务器。

我将“ns-local.example.com”中local.example.com的A记录设置为“192.168.1.10”。

当我 ping local.example.com 时，它解析为 67.215.66.132 (servfail.guide.opendns.com)！！！！

当我在本地网络中运行命令“dig local.example.com +trace”时，我得到了正确的结果（A 记录为“192.168.1.10”）。

所有名称服务器都使用 BIND。

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:39:56.323

因此，执行`dig local.example.com +trace`完全绕过了您的内部递归 DNS 服务器。

刚运行时会得到什么响应`dig local.example.com`（这将使用您的内部 DNS 服务器）？

# java - 如何和杰克逊一起做鸭子打字？

> ID：11842029
> 
> 赞同：1
> 
> 时间：2012-08-07T08:31:43.560
> 
> 标签：java, jackson

我想用杰克逊实现某种鸭子打字。我已经在这里看到了示例 6 [http://programmerbruce.blogspot.de/2011/05/deserialize-json-with-jackson-into.html](http://programmerbruce.blogspot.de/2011/05/deserialize-json-with-jackson-into.html)。但是这个不起作用，如果基类本身不是抽象的（导致无限循环）。所以我的问题是：有没有办法实现某种回调，我可以在其中进行鸭子输入（检查 JSON 字符串中的相关属性），然后返回杰克逊应该用来像往常一样进行反序列化的类型？

这是一些示例代码。它适用于子类*ExtendedOptions*但不适用于基类*Options* ...

```
public class Options {

    private int size;

    public int getSize() {
        return size;
    }

    public void setSize(int size) {
        this.size = size;
    }

    @Override
    public String toString() {
        return "Options";
    }
}

public class ExtendedOptions extends Options {

    private String feature;

    public String getFeature() {
        return feature;
    }
    public void setFeature(String feature) {
        this.feature = feature;
    }

    @Override
    public String toString() {
        return "ExtendedOptions";
    }

}

public class OptionsDeserializer extends
        StdDeserializer<Options> {

    OptionsDeserializer() {
        super(Options.class);
    }

    @Override
    public Options deserialize(JsonParser jp,
            DeserializationContext ctxt) throws IOException,
            JsonProcessingException {
        ObjectMapper mapper = (ObjectMapper) jp.getCodec();
        ObjectNode root = (ObjectNode) mapper.readTree(jp);
        Iterator<Entry<String, JsonNode>> elementsIterator = root.fields();
        while (elementsIterator.hasNext()) {
            Entry<String, JsonNode> element = elementsIterator.next();
            String name = element.getKey();
            // has "feature"? => It's an ExtendedOptions object
            if ("feature".equals(name)) {
                return mapper.treeToValue(root, ExtendedOptions.class);
            }
        }
        // otherwise it's just an Options object
        return mapper.treeToValue(root, Options.class);
    }

}

public class JacksonTest {

    public static void main(String[] args) throws JsonParseException,
            JsonMappingException, Exception {
        String optionsString = "{ \"size\": 5 }";
        String extendedOptionsString = "{ \"size\": 5, \"feature\" : \"theFeature\" }";

        OptionsDeserializer deserializer = new OptionsDeserializer();
        @SuppressWarnings("deprecation")
        SimpleModule module = new SimpleModule(
                "PolymorphicDeserializerModule", new Version(1, 0, 0,
                        null));
        module.addDeserializer(Options.class, deserializer);

        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(module);

        // works
        ExtendedOptions extendedOptions = (ExtendedOptions) mapper.readValue(extendedOptionsString, Options.class);
        System.out.println(extendedOptions);

        // results in infinite loop!!!
        Options options = mapper.readValue(optionsString, Options.class);
        System.out.println(options);
    }

} 
```

**编辑：**

我已经尝试根据 StaxMan 的提示实现 BeanDeserializerModifier。这是 modifyDeserializer 方法：

```
@Override
public JsonDeserializer<?> modifyDeserializer(DeserializationConfig config,
        BeanDescription beanDesc, JsonDeserializer<?> deserializer) {       
    List<BeanPropertyDefinition> properties = beanDesc.findProperties();
    for(BeanPropertyDefinition property: properties) {
        String name = property.getName();
        // has "feature"? => It's an ExtendedOptions object
        System.out.println(name);
        if("feature".equals(name)) {
            System.out.println("It's an extended object!");
            // should return special deserializer here...
            return deserializer;
        }
    }
    System.out.println("It's not an extended object!");
    return deserializer;
} 
```

那不起作用，因为*beanDesc 仅*包含有关*Option*类的信息。这意味着您无法获得有关当前 json 流的任何信息，因此您无法决定必须返回哪个 Deserializer。但是我找到了一个可行的解决方案，但它不是 100% 完美的：

```
@Override
public Options deserialize(JsonParser jp,
        DeserializationContext ctxt) throws IOException,
        JsonProcessingException {

    ObjectMapper mapper = (ObjectMapper) jp.getCodec();
    ObjectNode root = (ObjectNode) mapper.readTree(jp);

    Iterator<Entry<String, JsonNode>> elementsIterator = root.fields();
    while (elementsIterator.hasNext()) {
        Entry<String, JsonNode> element = elementsIterator.next();
        String name = element.getKey();
        // has "feature"? => It's an ExtendedOptions object
        if ("feature".equals(name)) {
            return mapper.treeToValue(root, ExtendedOptions.class);
        }
    }
    // otherwise it's just an Options object
    ObjectMapper origMapper = new ObjectMapper();       
    return origMapper.treeToValue(root, Options.class);
} 
```

在这里，我只是创建了一个 ObjectMapper 的新实例来反序列化基本类型*Options*。正如我所说，它有效。但：

1）创建一个新的 ObjectMapper 实例可能很昂贵（使用静态属性？）。

2) 此解决方案不适用于嵌套的多态对象。例如，如果 Options 将包含一个本身是多态的属性。

所以这里有另一个问题：有没有办法取消注册反序列化器？如果是这样，我可以用以下内容替换最后两行：

```
mapper.unregister(this);
Options result = mapper.treeToValue(root, Options.class);
mapper.register(this);
return result; 
```

**编辑 2**

好吧，你是对的。注销不是一个好的解决方案。我没有想到多线程 ;-) 无论如何，我尝试了这个：

```
@Override
public JsonDeserializer<?> modifyDeserializer(DeserializationConfig config,
        BeanDescription beanDesc, JsonDeserializer<?> deserializer) {       
    return new OptionsDeserializer();
} 
```

但这导致我进入同样的无限循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:50:25.670

没有自动支持，尽管已请求此类（隐式类型），请参阅 Jira 问题[JACKSON-500](http://jira.codehaus.org/browse/JACKSON-500)。

一种可能可行的现有可能性是`BeanDeserializerModifier`：您可以访问`JsonDeserializer`已构建的标准，但随后可以在其周围添加您的包装器。这将通过定义来完成`modifyDeserializer()`，否则会给出完整的（默认）`JsonDeserializer`；然后你可以构建你自己的实例，传递那个反序列化器。

# django - django 按索引访问过滤器结果不会将其保存到模型中

> ID：11842036
> 
> 赞同：3
> 
> 时间：2012-08-07T08:32:08.760
> 
> 标签：django, django-models

模型：

```
class faqs(models.Model):
 id = models.AutoField(primary_key=True)
 question=models.TextField()
 answer=models.TextField()
 category=models.CharField(max_length=200,null=True)
 frequency=models.IntegerField(max_length=10, blank = True, null = True)
 class Meta:
    db_table='faqs' 
```

以下不会将其保存到数据库中，

```
s=faqs.objects.filter(id=1)
s[0].id=111
s[0].save() 
```

但这会将更新后的值保存到 DB，

```
s=faqs.objects.filter(id=1)[0]
s.id=111
s.save() 
```

为什么 django 不允许通过第一种方法保存值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:30:12.390

问题是每次你对查询集进行切片时，Django 都会访问数据库并创建一个*新*实例。因此，您设置`id`on 的实例与您调用`save()`的实例不同 - 请记住，Django 实例没有标识，并且引用同一数据库行的单独对象不共享任何内容。

如果您检查数据库查询，您可以看到发生了什么：您会看到第一行（过滤器）没有执行任何查询。为第二行执行 SELECT - 但它只获得一个实例，使用 LIMIT 1。并且为第三行执行相同的 SELECT，为您提供一个全新的实例。

您已经看到了一种解决方法。另一种方法是强制整个查询集在 之后执行`filter`，但调用`list`结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T08:53:11.807

可能是因为[QuerySet 是惰性的](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy "QuerySet 是惰性的")。这意味着当您从查询集中访问项目而不启动它时，它不会更新查询集，因为它`queryset item` 不是模型的真实实例。

使固定：

```
s = faqs.objects.filter(id=1)
obj = s[0]
obj.id=111
obj.save() 
```

# php - 一次在特定位置插入多个字符串

> ID：11842038
> 
> 赞同：0
> 
> 时间：2012-08-07T08:32:22.677
> 
> 标签：php, substr

通过`substr_replace`，我可以在特定索引中插入一个字符串：

```
$a = 'abcdefg';
echo substr_replace($a, '1', 2, 0); // ab1cdefg 
```

但是，是否可以仅使用 1 在特定位置插入 2-3 个字符串`substr_replace`？（或其他内置函数）例如：

```
$a = 'abcdefg';
$b = array('1', '2', '3');
$c = array(1, 2, 4);
echo substr_replace($a, $b, $c, 0); // a1b2cd3efg 
```

我尝试了该代码，但它返回了一个错误：

> **警告：** substr_replace() [function.substr-replace]: 'from' 和 'len' 应该是同一类型 - 数值或数组

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:10:17.773

现在，首先，让我说，通过阅读手册，我会认为你的代码应该可以工作，你似乎正确地遵循了规则。

更可笑的是，如果您尝试通过将`0`s 数组传递给`$len`（根据该错误消息听起来很合理，不是吗？）来修复它，[您会得到](http://codepad.org/nzL5bIOX)：

> **警告**：substr_replace()：'from' 和 'len' 作为数组的功能未实现

正确的。因此，不仅手册错误，甚至错误消息也自相矛盾。上帝我爱 PHP。

但是，够了，解决方案...

* * *

因为它没有按预期工作，所以你必须循环才能做你想做的事。不太难，对吧？好吧，这里主要的绊倒危险是*字符串的长度和偏移位置会在每次迭代时发生变化*。为了阻止这引起问题，您需要*反向执行替换，*以便索引位于您期望的位置。

像这样的东西：

```
<?php

  $a = 'abcdefg';
  $b = array('1', '2', '3');
  $c = array(1, 2, 4);

  for ($i = count($c) - 1; $i >= 0; $i--) {
    $a = substr_replace($a, $b[$i], $c[$i], 0);
  }
  echo $a; // a1b2cd3efg 
```

[看到它工作](http://codepad.org/pwQN4NAk)

# java - 如何验证应用程序是否刚刚启动？

> ID：11842039
> 
> 赞同：-2
> 
> 时间：2012-08-07T08:32:24.887
> 
> 标签：java, android

如何验证应用程序是否刚刚启动？这是正确的方法吗？

```
if(getIntent().getAction() != null && getIntent().getAction().equals("android.intent.action.MAIN")) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:50:56.053

因为我发现我上面描述的方法不能正常工作。

```
MyApp app = (MyApp)getApplication();
if(app.isJustStarted) { 
```

和

```
public class MyApp extends Application {
public boolean isJustStarted = true; } 
```

是问题的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:12:49.233

您可以随时了解它[`onCreate()`](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)。如果用户更改设备的方向，通常您的活动将被系统关闭并重新创建。如果您不希望这样，请考虑添加`android:configChanges`到您的活动 (in `AndroidManifest.xml`)，如下所示：

```
<activity
    android:name="..."
    android:configChanges="keyboardHidden|orientation"
    android:label="..." > 
```

# php - Wordpress 插件获取默认服务器时区

> ID：11842044
> 
> 赞同：0
> 
> 时间：2012-08-07T08:32:38.770
> 
> 标签：php, wordpress

所以基本上 wordpress 将 date_default_timezone 硬编码为 UTC，唯一再次获得服务器时区的机会就是从设置文件中删除该行。但也许还有其他方法可以将时区设置回服务器时区？我需要它，因为我正在开发一个 wordpress 插件，它需要服务器时间才能正常工作。

由于此插件将被许多用户使用，因此插件自动将默认的 wordpress 时区（UTC）再次覆盖到服务器时区将是非常棒的。

所以基本上，如果我能够添加 date_default_timezone_set(SERVER_TIMEZONE_HERE); 它会自动获取服务器时区。

希望你明白我的意思。那甚至可用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:38:55.087

通过使用[http://codex.wordpress.org/Function_Reference/current_time](http://codex.wordpress.org/Function_Reference/current_time)而不是 time() 来修复它。

# ruby-on-rails - 使用 cloudinary 直接上传 - “没有这样的文件或目录”错误，可能是我的 ruby on rails 代码中某处的错误

> ID：11842045
> 
> 赞同：0
> 
> 时间：2012-08-07T08:32:46.793
> 
> 标签：ruby-on-rails, image-uploading, cloudinary

我正在尝试将表单上上传的图像直接上传到我的 cloudinary 云。

它在我的代码上为用户编辑表单：

```
<%= form_for(@user) do |f| %>

<% if @user.name == nil %>
  <div>  
    <label for="user_username">Username or Email</label>
    <input id="user_username" name="user[username]" size="30" type="text"  />
  </div> 
<% else %>
    <div>
      <%= f.label :username_or_Email %>
      <%= f.text_field :username %> 
    </div>
<% end %> 

    <div>
      <%= f.label :name %>
      <%= f.text_field :name %> 
    </div>

    <div>
      <%= f.label :password %>
      <%= f.password_field :password %>
    </div>

    <div>
      <%= f.label :password_confirmation %>
      <%= f.password_field :password_confirmation %>
    </div>

    <div>
      <%= file_field_tag 'image' %>
    </div>
  <div><%= f.submit "Update", :class => 'btn' %></div>  
<% end %> 
```

我的用户控制器提交到的地方有一行叫做：

```
Cloudinary::Uploader.upload(params[:image], :public_id => @user.username) 
```

Cloudinary 文档中提供了这一行，我得到的错误是：

> 没有这样的文件或目录 - 屏幕截图 2012-07-26 at 3.26.05 PM.png

```
Request

Parameters:

{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"ueS/aqqCtsIH7ikVA1pq4LfWn044xltFnPQ6Dc0yQXE=",
 "user"=>{"username"=>"asuri@yahoo.com",
 "name"=>"Ankit Suri",
 "password"=>"[FILTERED]",
 "password_confirmation"=>"[FILTERED]"},
 "image"=>"Screen Shot 2012-07-26 at 3.26.05 PM.png",
 "commit"=>"Update",
 "id"=>"P9q5l9gmea"} 
```

有人可以找出错误在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:31:10.513

为了在 Rails 表单中上传文件，您需要确保它使用`Multipart`.

`form_for`只需按如下方式更改您的呼叫：

```
<%= form_for(@user, :html => {:multipart => true}) do |f| %> 
```

此外，您还应该考虑使用[CarrierWave](http://cloudinary.com/blog/ruby_on_rails_image_uploads_with_carrierwave_and_cloudinary)或[Attachinary](https://github.com/assembler/attachinary)来管理图像上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:01:38.097

你的**cloudinary.yml**文件呢？您可以使用此链接下载它：[http](http://cloudinary.com/console/cloudinary.yml) ://cloudinary.com/console/cloudinary.yml并将其放在您的`config/`目录下

# html - 当浏览器变小时，将 li 水平更改为垂直

> ID：11842046
> 
> 赞同：1
> 
> 时间：2012-08-07T08:32:47.350
> 
> 标签：html, html-lists

我有一个`<ul>`列表，所有`<li>`项目都水平显示。我想要做的是`<li>`当浏览器变得太小而无法保持水平时，使最后两个项目垂直堆叠，而不是下降到下一行。

我创建了一个 jsfiddle[示例](http://jsfiddle.net/Xss5Q/)

因此，您可以看到所有项目水平对齐，但是当您缩小显示窗口时，我希望将项目 5 和 6 放到下一行，然后水平堆叠并保持在同一行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:34:57.677

```
text-align: right; 
```

将此添加到包含`<ul>`，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:49:57.567

`text-align property`在你的使用`<ul>`它可能会帮助你。

像这样使用：

```
ul {
    display: inline-block;
    text-align: right;
} 
```

工作[演示](http://jsfiddle.net/touchwithran/bnxPu/)

# php - 选择具有非空值的最新日期，在 PHP 中给定周末和无工作日

> ID：11842047
> 
> 赞同：1
> 
> 时间：2012-08-07T08:32:51.443
> 
> 标签：php, mysql, algorithm, date

所以，我的 MySQL 数据是这样组织的：

```
>   id_nom  simbol  data              val             close           min       
>   3        BET    2010-02-26  5328.4502          5328.4502    5317.2400 
```

还有一个表格，根据选择来选择开始和结束日期：第一个选择是日期，第二个选择是月份，第三个选择是年份。

问题在于周末和节假日的日期，这些天的值是工作日的最后报告值。因此，例如，BET 的 friday 是 5328.4502，而 sunday 的值将与 friday 相同，尽管 DB 中没有周日或周六或任何其他假期的日期。

我的解决方案如下：

我已经做了一个函数来选择给定日期的开始和结束日期。这里是：

```
function x_week_range($date) {
  $ts = strtotime($date);
  $start = (date('N', $ts) == 1) ? $ts : strtotime('Last Monday', $ts);
  return array(date('Y-m-d', $start),
    date('Y-m-d', strtotime('Next Sunday', $start)));
} 
```

以及一个使用数组切片从一周中提取日期的函数。这里是：

```
function array_slice_assoc ($array, $key, $length, $preserve_keys = true)
{
    $offset = array_search($key, array_keys($array));

    if (is_string($length))
        $length = array_search($length, array_keys($array)) - $offset;

    return array_slice($array, $offset, $length, $preserve_keys);
} 
```

并像这样使用它们：

```
list($start_day_week,$end_day_week)=x_week_range($data_start);
list($start_day_week2,$end_day_week2)=x_week_range($data_end);

$strSql="SELECT * FROM ind_cotatii WHERE id_nom=3 AND `data` >= '".$data_start."' AND `data` <= '".$data_end."' ";

$objDbResult = $objDatabase->Query($strSql);

while($mixRow = $objDbResult->FetchArray())
    {
        $datInd[$mixRow['data']]=$mixRow['val'];
    }
    if(isset($datInd[$data_start]))
    {
        $first_value=$datInd[$data_start];
    }
    if(isset($datInd[$data_end]))
    {
        $last_value=$datInd[$data_end];
    }

    if(!isset($first_value))
    {
        $arr=array_slice_assoc($datInd,$start_day_week,6,true);
        $first_value=end(array_filter($arr));
        var_dump('calc_we1',$arr,$start_day_week,$first_value);
    }

    if(!isset($last_value))
    {
        $arr2=array_slice_assoc($datInd,$start_day_week2,6,true);
        $last_value=end(array_filter($arr2));
        var_dump('calc_we2',$arr2,$start_day_week2,$last_value);                
    } 
```

具体`$arr`将`$arr2`包含一个数组，如下所示：

```
Array(6) {
  ["2010-12-13"]=>
  string(9) "5155.9800"
  ["2010-12-14"]=>
  string(9) "5154.6802"
  ["2010-12-15"]=>
  string(9) "5146.3398"
  ["2010-12-16"]=>
  string(9) "5138.5098"
  ["2010-12-17"]=>
  string(9) "5149.9800"
  ["2010-12-20"]=>
  string(9) "5133.9302"
} 
```

`end`所以基本上，我使用and选择一周中不为空的最后一天`array_filter`。

我的问题，更具体地说，如下：

如果我选择开始日期：12-12-2010 星期日，`$arr`将包含从星期一 13 开始的一周的日期，而我需要从最后一个星期一开始的日期，即 6。

任何想法为什么会发生这种情况，你是否认为我有点过于复杂了？你有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:37:24.933

我修改了我的查询如下：

```
SELECT * FROM ind_cotatii WHERE id_nom=3 AND `data` >= 'DATE_SUB('".$data_start."',INTERVAL 1 WEEK)' AND `data` <= '".$data_end."' "; 
```

它之所以有效，是因为它考虑了前一周，因此是该周的最后一个值，逻辑很明显。就像原来的形式一样，如果我输入 sunday，由于查询，它会选择 13 并且那是下星期一，完全错误。

# c# - windows phone xml解析

> ID：11842049
> 
> 赞同：2
> 
> 时间：2012-08-07T08:32:59.160
> 
> 标签：c#, windows, windows-phone-7, windows-7, xml-parsing

我一直在使用 Windows Phone 7 应用程序，在从 Web 服务获取数据时遇到了问题。我从服务器以这样一种模式得到响应，以至于我无法弄清楚如何获取它。请帮我。下面是来自服务器的响应。

此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。

```
<response xmlns="uri:abc.com" status="Ok" op="DelegateList" msg="Get Delegate List Successful">
<list count="19">
<delegateinfo photoid="" id="12936">
<prop value="A" name="fname" label="First Name"/>
<prop value="A" name="lname" label="Last Name"/>
<prop value="Karachi, PK" name="ccountry" label="Country / City"/>
<prop value="Airlines & Aviation" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12938">
<prop value="aaa" name="fname" label="First Name"/>
<prop value="aaaa" name="lname" label="Last Name"/>
<prop value="aa" name="ptitle" label="Professional Title"/>
<prop value="aaaa" name="company" label="Company"/>
<prop value="aa,aa" name="ccountry" label="Country / City"/>
<prop value="Airlines & Aviation" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12949">
<prop value="ad" name="fname" label="First Name"/>
<prop value="ad" name="lname" label="Last Name"/>
<prop value="a,b" name="ccountry" label="Country / City"/>
<prop value="Airlines & Aviation" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12956">
<prop value="Asdsad" name="fname" label="First Name"/>
<prop value="Asdasd" name="lname" label="Last Name"/>
<prop value="Cubix Labs" name="company" label="Company"/>
<prop value="Dehli, India" name="ccountry" label="Country / City"/>
<prop value="Architecture" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12955">
<prop value="asd" name="fname" label="First Name"/>
<prop value="Asdd" name="lname" label="Last Name"/>
<prop value="Cubix Labs" name="company" label="Company"/>
<prop value="Dehli, India" name="ccountry" label="Country / City"/>
<prop value="Architecture" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12963">
<prop value="A" name="fname" label="First Name"/>
<prop value="B" name="lname" label="Last Name"/>
<prop value="Cubix Labs" name="company" label="Company"/>
<prop value="Dehli, India" name="ccountry" label="Country / City"/>
<prop value="Architecture" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12964">
<prop value="a" name="fname" label="First Name"/>
<prop value="B" name="lname" label="Last Name"/>
<prop value="Cubix Labs" name="company" label="Company"/>
<prop value="Dehli, India" name="ccountry" label="Country / City"/>
<prop value="Architecture" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12929">
<prop value="G" name="fname" label="First Name"/>
<prop value="F" name="lname" label="Last Name"/>
<prop value="Karachi, PK" name="ccountry" label="Country / City"/>
<prop value="Arts & Music" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="1292620120724105446.jpg" id="12926">
<prop value="faraz" name="fname" label="First Name"/>
<prop value="haider" name="lname" label="Last Name"/>
<prop value="Team Leader Iphone at Cubix Labs Inc" name="ptitle" label="Professional Title"/>
<prop value="Cubix Labs Inc." name="company" label="Company"/>
<prop value="Karachi, Pakistan" name="ccountry" label="Country / City"/>
<prop value="Airlines & Aviation" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="1292120120723075111.jpg" id="12921">
<prop value="cubix" name="fname" label="First Name"/>
<prop value="labs" name="lname" label="Last Name"/>
<prop value="iphone developer at Social Cubix" name="ptitle" label="Professional Title"/>
<prop value="Social Cubix" name="company" label="Company"/>
<prop value="test,test" name="ccountry" label="Country / City"/>
<prop value="Airlines & Aviation" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12939">
<prop value="New" name="fname" label="First Name"/>
<prop value="One" name="lname" label="Last Name"/>
<prop value="Karachi, PK" name="ccountry" label="Country / City"/>
<prop value="Airlines & Aviation" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12961">
<prop value="E" name="fname" label="First Name"/>
<prop value="Qwe" name="lname" label="Last Name"/>
<prop value="Cubix Labs" name="company" label="Company"/>
<prop value="Dehli, India" name="ccountry" label="Country / City"/>
<prop value="Architecture" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12957">
<prop value="s" name="fname" label="First Name"/>
<prop value="S" name="lname" label="Last Name"/>
<prop value="Cubix Labs" name="company" label="Company"/>
<prop value="Dehli, India" name="ccountry" label="Country / City"/>
<prop value="Architecture" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12965">
<prop value="dassd" name="fname" label="First Name"/>
<prop value="Sadds" name="lname" label="Last Name"/>
<prop value="Cubix Labs" name="company" label="Company"/>
<prop value="Dehli, India" name="ccountry" label="Country / City"/>
<prop value="Architecture" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12960">
<prop value="Asfdcasscf" name="fname" label="First Name"/>
<prop value="Sff" name="lname" label="Last Name"/>
<prop value="Cubix Labs" name="company" label="Company"/>
<prop value="Dehli, India" name="ccountry" label="Country / City"/>
<prop value="Architecture" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12922">
<prop value="Michael" name="fname" label="First Name"/>
<prop value="Tabour" name="lname" label="Last Name"/>
<prop value="Software Engineer" name="ptitle" label="Professional Title"/>
<prop value="Cubix Labs" name="company" label="Company"/>
<prop value="Maryland, United States" name="ccountry" label="Country / City"/>
<prop value="IT Services, Internet & Telecommunications" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="1292020120723075408.jpg" id="12920">
<prop value="test" name="fname" label="First Name"/>
<prop value="test" name="lname" label="Last Name"/>
<prop value="test" name="ptitle" label="Professional Title"/>
<prop value="test" name="company" label="Company"/>
<prop value="test, test" name="ccountry" label="Country / City"/>
<prop value="Airlines & Aviation" name="industry" label="Industry"/>
</delegateinfo>
<delegateinfo photoid="" id="12933">
<prop value="Test" name="fname" label="First Name"/>
<prop value="Test1" name="lname" label="Last Name"/>
<prop value="Coderu" name="ptitle" label="Professional Title"/>
<prop value="Xyz pvt ltd" name="company" label="Company"/>
<prop value="Karachi, PK" name="ccountry" label="Country / City"/>
<prop value="Airlines & Aviation" name="industry" label="Industry"/>
</delegateinfo>
</list>
</response> 
```

我用来填充它的代码并没有给我任何想要的结果：

```
XDocument ListArray= XDocument.Parse(e.Result);
 var quotes = from quote in ListArray.Descendants("response").Descendants("list").Descendants("delegateinfo").Descendants("prop")
                select new delegateinfo
     {

       lastName = quote.Attribute("value").Value
     };
                foreach (delegateinfo stockQuote in quotes)
                {
                    MessageBox.Show (stockQuote.lastName);
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:17:29.743

```
 List<delegateinfo> propList = new List<delegateinfo>();
            var list = document.Descendants().ElementAt(1);

            foreach (var tempVar in list.Descendants())
            {
                delegateinfo obj = new delegateinfo();
                foreach (var delegateinfo_ in tempVar.Descendants())
                {
                    MessageBox.Show(delegateinfo_.Attribute("value").Value);
                    if (delegateinfo_.Attribute("label").Value.CompareTo("fname") == 1)
                        obj.firstName = delegateinfo_.Attribute("value").Value;
                    else
                        if (delegateinfo_.Attribute("label").Value.CompareTo("lname") == 1)
                            obj.lastName = delegateinfo_.Attribute("value").Value;
                    else
                            if (delegateinfo_.Attribute("label").Value.CompareTo("ccountry") == 1)
                                obj.country = delegateinfo_.Attribute("value").Value;
                    else
                                if (delegateinfo_.Attribute("label").Value.CompareTo("industry") == 1)
                                    obj.industry = delegateinfo_.Attribute("value").Value;

                    propList.Add(obj);

                }

            } 
```

# android - 完成活动时避免再次加载数据

> ID：11842051
> 
> 赞同：0
> 
> 时间：2012-08-07T08:32:59.347
> 
> 标签：android, android-intent, android-activity, start-activity

在应用程序的主要活动中，我在`onStart()`. 当我打开设置并点击`Back`按钮时，我完成`Settings Activity`并返回主活动。问题是正在重新下载数据。

那么，怎样才能避免数据的重新下载呢？

我虽然有，`startActivityForResult`但我不知道如何使用它，我不明白它是如何工作的。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:52:38.893

在主活动类中定义一个静态变量，如下所示：

```
public static bool download = true; 
```

当您从设置返回时，将其值更改为 false，例如：

```
MainActivity.download = false; 
```

并将您的下载方法放在这样的 if 语句中：

```
if (download) {
yourdownloadcode();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:49:58.987

这是Android的通常行为。当您启动“设置活动”时，您的“主要活动：调用 onStop 并停止活动。现在，当您单击“设置活动”中的后退按钮时，“主要活动”会出现在最前面并再次调用 onStart 方法. 既然你说你是在onStart方法中下载数据，那么数据会再次被下载。

您可以通过下载 onCreate 方法中的数据来避免这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:54:07.323

如果您只想加载数据，您可以使用 Activity `onCreate`。这是活动生命周期信息：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

```
startActivityForResult 
```

您可以像回调一样使用设置屏幕 - 如果您在更改设置屏幕上的配置后需要更改主活动布局。你可以在这里找到一个例子[http://saigeethamn.blogspot.com/2009/08/android-developer-tutorial-for_31.html](http://saigeethamn.blogspot.com/2009/08/android-developer-tutorial-for_31.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T08:48:16.083

当您按下`Back`设置活动上的按钮后，您的主要活动变得可见时，`onStart`将再次调用方法（请参阅[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)）。这就是您再次开始重新下载数据的原因。因此，请保留一些标志，表明您已经开始下载任务。但请记住，您的主要活动可以在其`onPause`方法被调用后的任何时候被终止。

# asp.net-mvc-3 - 如何在 MVC3 中选中至少一个复选框？

> ID：11842057
> 
> 赞同：0
> 
> 时间：2012-08-07T08:33:10.983
> 
> 标签：asp.net-mvc-3, validation, checkbox

大家好，我必须为用户选中至少一个复选框，这是我想要做的

```
 <% foreach (var item in Model)
         { %>  
             <br />
              <%:Html.CheckBox("EmployeId", new { value = item.EmployeeID })%>
              <%:Html.LabelForModel(item.EmployeeName)%>

      <%} %> 
```

脚本

```
 <script type="text/javascript">
$('#Sbmit').on('click', function () {
    if ($('.require-one:checked').size() > 0) {
        $('.error').text('You must select atleast one!').show();
    } else {
        $('.error').hide();
    }
}); 
```

谁能告诉我我该怎么做……在一个按钮上单击我必须验证至少一个复选框的复选框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:38:44.120

我使用 jQuery Validate 插件来做到这一点：[**DEMO**](http://jquery.bassistance.de/validate/demo/)

jQuery是：

```
$("#request-form").validate({
    rules: {
        checkbox: { 
        required: 'input[type="checkbox"]:checked',
        minlength: $('input[type="checkbox"]').length();
        }
    },
    messages: {
        checkbox: "Please check at least one.",
    }
}); 
```

希望对您有所帮助！

# c# - 使用 C# 创建可重用对象（如字体）的最佳方法

> ID：11842066
> 
> 赞同：0
> 
> 时间：2012-08-07T08:33:53.667
> 
> 标签：c#

我有一个创建用户控件的应用程序，为此我定义了一个类来重用一些看起来像这样的字体：

```
public sealed class MyFonts
{       
    private static Font Tahoma7Regular = new Font("Tahoma", 7, FontStyle.Regular);
    private static Font Tahoma9Regular = new Font("Tahoma", 9, FontStyle.Regular);
    private static Font Tahoma9Bold = new Font("Tahoma", 9, FontStyle.Bold);       

    public static Font ChannelText = new Font("Tahoma", 12, FontStyle.Bold);       
    public static Font ClockText = Tahoma7Regular;
    public static Font HelpText = Tahoma9Regular;       
    public static Font RollFieldText = Tahoma9Bold;      

} 
```

有什么方法可以改进它，我`Brushes`在反编译器工具中看到了类，他们使用了`ThreadData`我不知道的东西，但为了简单起见，我也可以改进这段代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:00:59.623

如果您正在构建用户控件，则不应使用静态字段。用户控件的主要目标是可重用，因此您不希望对字体等属性使用固定值；这些属性将由 usercontrol 父级设置。

所以你可能想要写的是属性（使用属性比如`Description`也很有用）：

```
[Category("Appearance"), Description("Gets or sets the text channel font.")]
[Browsable(true)]
public Font ChannelFont { get; set; }

[Category("Appearance"), Description("Gets or sets the text clock font.")]
[Browsable(true)]
public Font ClockFont { get; set; }
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:41:36.423

在创建这么多对象之前，先分析一下你是否真的需要它？大多数控件都有一个 Font 属性（具有默认值）。您只需要在那里设置值而不是创建新对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:41:45.043

ThreadData 听起来像是某种形式的在线程之间共享数据的机制。

看一下 Brushes 类：

```
public static Brush MediumAquamarine { get; } 
```

也许稍微调整一下你的班级，让它变得更像上面那样。在我看来，看起来更干净。

# php - 我需要从来自查询的值创建一个 href 到多个表

> ID：11842067
> 
> 赞同：-1
> 
> 时间：2012-08-07T08:33:59.460
> 
> 标签：php, mysql

是的，您看到我有一个标题来自对多个表的查询的 var，现在我需要在单独的页面中打开该行的其余内容。这是一个例子：

```
<?php
    $query="SELECT columns FROM table1
        UNION
        SELECT columns FROM table2 etc(like 6 times)";
    MySQLi etc. etc.
    WHILE( the fetch array thing ){
        $link_id=$row['id'];
        $title=$row['title'];
        echo '<a href="page.php?var='.$tableame.'&var2='.$title.'">'.$link.'</a>';
    }
?> 
```

现在，如何确定表名即`$tablename`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:48:59.033

我想您需要结合使用[多查询](http://php.net/manual/en/mysqli.multi-query.php)和一些代码来获取[元数据](http://www.tutorialspoint.com/mysql/mysql-database-info.htm)。

这样在运行时您就可以解析元数据并动态填充信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:14:04.807

我通过在每个表中创建一个列并在其中使用表名的缩写并使用`str_replace()`PHP 中的函数调用重命名缩写来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:45:08.317

你可以这样做：

```
SELECT 'table1' AS tablename, columns from table1
UNION
SELECT 'table2' AS tablename, columns.. 
```

所以每个结果都会告诉你它来自哪个表

# alfresco - Alfresco 迁移服务器

> ID：11842070
> 
> 赞同：1
> 
> 时间：2012-08-07T08:34:06.030
> 
> 标签：alfresco, ecm

我正在将 Alfresco Community 4.0.b 从服务器 1 迁移到服务器 2。两者都是 Ubuntu Server 10.04。我已按照[wiki 的说明](http://wiki.alfresco.com/wiki/System_Migration)进行操作，并使用二进制安装文件在两台服务器上安装 Alfresco。

数据库备份和恢复代码：

```
pg_dump -U postgres -h localhost -p 5432 -F c -v -f alfresco_db alfresco

pg_restore -U postgres -h localhost -p 5432 -C -d postgres -v alfresco_db 
```

在服务器 2 上启动 Alfresco 时，出现以下错误：

```
2012-08-07 07:50:15,623  ERROR [web.context.ContextLoader] [main] Context initialization failed
java.lang.NullPointerException
   at org.alfresco.repo.web.scripts.RepoStore.findNodeRef(RepoStore.java:315)
   at org.alfresco.repo.web.scripts.RepoStore$7$1.execute(RepoStore.java:685)
   at org.alfresco.repo.web.scripts.RepoStore$7$1.execute(RepoStore.java:682)
   at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:388)
   at org.alfresco.repo.web.scripts.RepoStore$7.doWork(RepoStore.java:681)
   at org.alfresco.repo.web.scripts.RepoStore$7.doWork(RepoStore.java:678)
   at org.alfresco.repo.security.authentication.AuthenticationUtil.runAs(AuthenticationUtil.java:519)
   at org.alfresco.repo.web.scripts.RepoStore.getDocument(RepoStore.java:677)
   at org.springframework.extensions.webscripts.DeclarativeRegistry.initWebScripts(DeclarativeRegistry.java:367)
   at org.springframework.extensions.webscripts.DeclarativeRegistry.reset(DeclarativeRegistry.java:178)
   at org.springframework.extensions.webscripts.AbstractRuntimeContainer.reset(AbstractRuntimeContainer.java:259)
   at org.alfresco.repo.web.scripts.RepositoryContainer.init(RepositoryContainer.java:633)
   at org.alfresco.repo.web.scripts.RepositoryContainer$5.execute(RepositoryContainer.java:603)
   at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:388)
   at org.alfresco.repo.web.scripts.RepositoryContainer.reset(RepositoryContainer.java:598)
   at org.alfresco.repo.web.scripts.RepositoryContainer$4.doWork(RepositoryContainer.java:553)
   at org.alfresco.repo.security.authentication.AuthenticationUtil.runAs(AuthenticationUtil.java:519)
   at org.alfresco.repo.web.scripts.RepositoryContainer.onApplicationEvent(RepositoryContainer.java:557)
   at org.alfresco.repo.management.SafeApplicationEventMulticaster.multicastEventInternal(SafeApplicationEventMulticaster.java:209)
   at org.alfresco.repo.management.SafeApplicationEventMulticaster.multicastEvent(SafeApplicationEventMulticaster.java:180)
   at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:303)
   at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:911)
   at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:428)
   at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
   at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
   at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
   at org.alfresco.web.app.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:63)
   at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3972)
   at org.apache.catalina.core.StandardContext.start(StandardContext.java:4467)
   at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
   at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
   at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:546)
   at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:905)
   at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:740)
   at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:500)
   at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277)
   at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321)
   at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
   at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
   at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
   at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
   at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
   at org.apache.catalina.core.StandardService.start(StandardService.java:519)
   at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
   at org.apache.catalina.startup.Catalina.start(Catalina.java:581)
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
   at java.lang.reflect.Method.invoke(Method.java:597)
   at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
   at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Aug 7, 2012 7:50:15 AM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized
INFO: WSSERVLET12: JAX-WS context listener initializing
Aug 7, 2012 7:50:24 AM com.sun.xml.ws.transport.http.servlet.WSServletDelegate <init>
INFO: WSSERVLET14: JAX-WS servlet initializing
Aug 7, 2012 7:50:24 AM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Aug 7, 2012 7:50:24 AM org.apache.catalina.core.StandardContext start
SEVERE: Context [/alfresco] startup failed due to previous errors 
```

少了什么东西？

已编辑。

[完整的启动日志](https://dl.dropbox.com/u/25145012/catalina.out)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:10:04.393

我找到了解决方案！

将 alf_data 复制到服务器 2 后，我需要删除 SOLR 索引数据并开始 SOLR 重建索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T09:10:47.377

每次我进行迁移时，我都会这样做：

*   pgDump 和恢复
*   复制 contentStore & contentStore.deleted
*   完全重新索引

当我在谈论 postgres 时，有`2 ways how to dump and restore`.

**压缩转储：**

```
pg_dump -Fc -U <DBUSER> <DBSCHEMA> > <fileName>.sql.Fc
pg_restore -U <DBUSER> -d <DBSCHEMA> <fileName>.sql.Fc 
```

**纯文本/sql：**

```
pg_dump dbname > outfile
psql dbname < infile 
```

对于复制文件，无需评论：o）

对于重新索引 SOLR- [有效](http://docs.alfresco.com/4.1/tasks/solr-reindex.html)

# python - Fabric：用一个用户连接到机器，然后用另一个用户做事

> ID：11842076
> 
> 赞同：3
> 
> 时间：2012-08-07T08:34:31.673
> 
> 标签：python, fabric

我目前正在尝试使用 Fabric 执行以下操作：

1.  在主机上以用户“user1”的身份启动命令“whoami”
2.  在主机上以用户“user2”的身份启动命令“whoami”

相应的巴赫命令是：

```
$ ssh user1@host
  [...enter password...]
$ whoami
$ su - user2
  [...enter password...]
$ whoami 
```

**请注意，唯一允许连接到主机的用户是“user1”。我无法使用 user2 连接到我的主机。**

我试过这个面料代码：

```
def mytask():
    with settings(user='user1', password='p1'):
        run('whoami')
        with settings(user='user2', password='p2'):
            run('whoami') 
```

但它一直问我user2的密码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:16:00.443

Fabric 可以`sudo`对用户（root 用户除外）：

```
def mytask():
with settings(user='user1', password='p1'):
    run('whoami')
    sudo('whoami', user="user2") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:40:24.090

```
def mytask():
    with settings(user='user1', password='p1'):
        run('whoami')
        run('sudo -u user2 -S p2 whoami') 
```

# java - 正确的 cookie 管理

> ID：11842078
> 
> 赞同：8
> 
> 时间：2012-08-07T08:34:39.517
> 
> 标签：java, authentication, mongodb, cookies

我不确定是否应该将其发布在安全性或/stackoverflow 上，因为我担心安全性和性能。

我正在尝试寻找可靠的 cookie 管理来源。我读过OWASP，所以我大致知道什么是危险的。

但我需要使用 cookie 对我的用户进行身份验证。有完整的分步指南吗？

我做了什么：

*   生成一个随机且唯一的字符串。

*   将随机字符串与我的缓存 rndstring -> 用户中的用户相关联

*   创建一个安全且签名的 cookie。值=哈希（rndstring+秘密）|rndstring

*   如果用户回来，我检查哈希是否匹配，以及 rndstring 是否在我的缓存中。

*   如果是，请获取用户。

我认为我的方法有缺陷，因为我是自己做的。

另一个问题是我从缓存中的数据库中保护了用户对象。如果用户更新他的个人资料，我还必须更新缓存。

我正在将 java 与 play2 框架 + mongoDB 一起使用。

有什么资源可以推荐给我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:52:46.363

我认为这是[Security StackExchange](http://security.stackexchange.com)的一个问题，我注意到您在那里提出了类似的问题，最近[DW 给出了很好的回答](https://security.stackexchange.com/questions/17073/is-this-approach-of-securing-cookie-secure)。security.stackexchange.com 论坛上有很多人会批评您的方法。

我个人不建议开发自己的会话管理，事实上我不建议这样做。“播放框架”会话管理已被许多人审查过，而您的则没有并且很容易出现您忽略的漏洞。我将使用您选择的编程框架提供的内置会话管理。你读过播放[文档吗？](http://www.playframework.org/documentation/1.1.1/security)

在资源方面，您应该查看 David Rook 的安全开发原则 -[此处](https://resourcecentre.realexpayments.com/documents/pdf.html?id=46)和[此处](http://www.slideshare.net/securityninja/the-principles-of-secure-development)。

如果您使用 cookie 改变主意，您可以查看[网络密钥，](http://w2spconf.com/2008/papers/s4p2.pdf)这是一种将不可猜测的令牌插入 URL 的方法。

When reading Owasp, did you read the latest [Session Management cheatsheet](https://www.owasp.org/index.php/Session_Management_Cheat_Sheet)? I think that a lot of your questions are answered there.

One final resource is the [SANS Top 25 Software Errors](http://cwe.mitre.org/top25/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:50:11.167

我建议您每次检查哈希值并且它们匹配时还生成一个新的唯一字符串并更新您的 cookie 值。这将提高系统的安全性。由于在 cookie 被盗的情况下黑客攻击的可能性会降低。

# mobile - 公钥加密短信 J2ME

> ID：11842079
> 
> 赞同：-4
> 
> 时间：2012-08-07T08:34:42.983
> 
> 标签：mobile, java-me, cryptography, sms, bouncycastle

我需要制作一个 SMS 应用程序来加密通过它的消息。我打算将这些功能添加到应用程序中，

```
1)Generate key-pairs.
2)Send the public key to other party as a SMS.
3)Encrypt the message using a given publickey.
4)Decrypt the received message using a privatekey.
5)Manage more than one key. 
```

如果有任何图书馆（首选开源）可能有助于做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:17:43.043

从[这里](http://www.bouncycastle.org/latest_releases.html)下载 lcrypto-j2me-147.tar.gz（今天的最新版本）后，我们可以使用 zips 文件夹中的编译二进制文件：cldc_bccore_classes.zip 为**1.7MB**，cldc_bcpg_classes.zip 为**260.5KB**，cldc_bcpkix_classes.zip 为**370.5知识库**_

这里有一个很好的例子来说明如何使用 bccore [，但你应该尝试只使用 bcpg（它是最小的），如此](http://www.java-tips.org/java-me-tips/midp/encrypting-decrypting-text-messages-with-bouncy-castle-crypt.html)[处](http://sloanseaman.com/wordpress/2012/05/13/revisited-pgp-encryptiondecryption-in-java/)所示。

# android - 如何更新数据库？

> ID：11842081
> 
> 赞同：0
> 
> 时间：2012-08-07T08:34:45.277
> 
> 标签：android, database

在我的应用程序中，我有一个数据库。虽然我可以成功插入表格，但更新字段时遇到问题。

此代码创建我的表：

```
public final static String[] TABLES_NAME = {"general", "toprecipes", "favorites", "shoppinglist"};
//-- Columns of table: shopping list
    public final static String[] CLM_SHOPPINGLIST = {COLUMN_ID, "resepiId", "resepiName", "ingredient", "status"};
    private final String CRT_TBL_SHOPPINGLIST = "CREATE TABLE " + TABLES_NAME[3] + " (" + 
        CLM_SHOPPINGLIST[0] + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
        CLM_SHOPPINGLIST[1] + " TEXT," + 
        CLM_SHOPPINGLIST[2] + " TEXT," + 
        CLM_SHOPPINGLIST[3] + " TEXT," + 
        CLM_SHOPPINGLIST[4] + " TEXT"  + 
        ");"; 
```

我需要基于事件，将项目的状态从“T”设置为“F”，反之亦然。

为了更新数据库，我有以下代码：

```
public void updateRecordStatus(String resepiName, String ingredientName, String status) {
        ContentValues cv = new ContentValues();
        cv.put(DatabaseHelper.CLM_SHOPPINGLIST[4], status);

        database.update(DatabaseHelper.TABLES_NAME[3], cv, DatabaseHelper.CLM_SHOPPINGLIST[2] + "=" + resepiName + " AND " + DatabaseHelper.CLM_SHOPPINGLIST[3] + "=" + ingredientName, null);

        Log.i(TAG, "Status of ingredient '" + ingredientName + "' updated to '" + status + "' in table.");
    } 
```

似乎一切正常，但我不知道为什么——当我运行应用程序并想要更新时，它崩溃了。Logcat 显示这些消息并指向`database.update(...)`：

```
08-07 08:08:03.289: I/Database(460): sqlite returned: error code = 1, msg = near "Bakar": syntax error
08-07 08:08:03.289: E/Database(460): Error updating status=T using UPDATE shoppinglist SET status=? WHERE resepiName=Terung Bakar Mediterrinean AND ingredient=2 biji lemon
08-07 08:08:03.289: W/dalvikvm(460): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-07 08:08:03.323: E/AndroidRuntime(460): FATAL EXCEPTION: main
08-07 08:08:03.323: E/AndroidRuntime(460): android.database.sqlite.SQLiteException: near "Bakar": syntax error: , while compiling: UPDATE shoppinglist SET status=? WHERE resepiName=Terung Bakar Mediterrinean AND ingredient=2 biji lemon
08-07 08:08:03.323: E/AndroidRuntime(460):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
08-07 08:08:03.323: E/AndroidRuntime(460):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
08-07 08:08:03.323: E/AndroidRuntime(460):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
08-07 08:08:03.323: E/AndroidRuntime(460):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
08-07 08:08:03.323: E/AndroidRuntime(460):  at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:36)
08-07 08:08:03.323: E/AndroidRuntime(460):  at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1145)
08-07 08:08:03.323: E/AndroidRuntime(460):  at android.database.sqlite.SQLiteDatabase.updateWithOnConflict(SQLiteDatabase.java:1671)
08-07 08:08:03.323: E/AndroidRuntime(460):  at android.database.sqlite.SQLiteDatabase.update(SQLiteDatabase.java:1622)
08-07 08:08:03.323: E/AndroidRuntime(460):  at com.astro.recipe.database.DBShoppingListHandler.updateRecordStatus(DBShoppingListHandler.java:107)
08-07 08:08:03.323: E/AndroidRuntime(460):  at com.astro.recipe.activities.ShoppingList$2.OnCheckChangedListener(ShoppingList.java:90) 
```

任何意见或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:38:04.497

字符串文字必须用单引号括起来。

例如：

```
Where you='jox' AND authenticated='1' 
```

请记住，您和身份验证是列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:39:13.247

代替

```
 database.update(DatabaseHelper.TABLES_NAME[3], cv, DatabaseHelper.CLM_SHOPPINGLIST[2] + "=" + resepiName + " AND " + DatabaseHelper.CLM_SHOPPINGLIST[3] + "=" + ingredientName, null); 
```

和

```
 database.update(DatabaseHelper.TABLES_NAME[3], cv, DatabaseHelper.CLM_SHOPPINGLIST[2] + "= '" + resepiName + "' AND " + DatabaseHelper.CLM_SHOPPINGLIST[3] + "='" + ingredientName + "'", null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:39:23.560

```
database.update(DatabaseHelper.TABLES_NAME[3], cv, DatabaseHelper.CLM_SHOPPINGLIST[2] + "='" + resepiName + "' AND " + DatabaseHelper.CLM_SHOPPINGLIST[3] + "='" + ingredientName+"'", null); 
```

试试上面

为字符串加上单引号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T08:43:42.257

改变：

```
database.update(DatabaseHelper.TABLES_NAME[3], cv,
    DatabaseHelper.CLM_SHOPPINGLIST[2] + "=" + resepiName + " AND " +
    DatabaseHelper.CLM_SHOPPINGLIST[3] + "=" + ingredientName, null); 
```

到：

```
database.update(DatabaseHelper.TABLES_NAME[3], cv,
   DatabaseHelper.CLM_SHOPPINGLIST[2] + " = ?" +
   " AND " + DatabaseHelper.CLM_SHOPPINGLIST[3] + " = ?",
   new String[]{resepiName, ingredientName}); 
```

这是使用带参数的 sql 语句的推荐方式（使用`?`）

# c++ - 共享内存中的映射

> ID：11842082
> 
> 赞同：7
> 
> 时间：2012-08-07T08:34:54.837
> 
> 标签：c++, shared-memory

我正在尝试在共享内存中创建一个 unordered_map。我正在使用分配器来达到目的。

编码

```
void *addr;
void *pool;
int shmid;

template<class T>
class MyPoolAlloc {
private:
public:
    typedef size_t     size_type;
    typedef ptrdiff_t  difference_type;
    typedef T*         pointer;
    typedef const T*   const_pointer;
    typedef T&         reference;
    typedef const T&   const_reference;
    typedef T          value_type;

   template<class X>
   struct rebind
   { typedef MyPoolAlloc<X> other; };

   MyPoolAlloc() throw() {
   }
   MyPoolAlloc(const MyPoolAlloc&) throw()  {
   }

   template<class X>
   MyPoolAlloc(const MyPoolAlloc<X>&) throw() {
   }

   ~MyPoolAlloc() throw() {
   }

  pointer address(reference __x) const { return &__x; }

  const_pointer address(const_reference __x) const { return &__x; }

  pointer allocate(size_type __n, const void * hint = 0) {
      pointer tmp = static_cast<T*>(addr);
      addr = (void*)((char*)addr + __n);
      return tmp;
  }

  void deallocate(pointer __p, size_type __n) {
      // pMyPool->Free(reinterpret_cast<void *>(__p));
  }

 size_type max_size() const throw() {
    //return size_t(-1) / sizeof(T);
  }

 void construct(pointer __p, const T& __val) {
     ::new(__p) T(__val);
  }

 void destroy(pointer __p) {
    //__p->~T();
  }
};

typedef std::unordered_map<int, int, std::hash<int>, std::equal_to<int>,  MyPoolAlloc<std::pair<const int,int>> > Map;

int main ()
{
    shmid = shmget(shm_key, 1000, IPC_CREAT | IPC_EXCL | 644);
    if(shmid == -1){
            std::cerr << "Failed to create the shared segment." << strerror(errno)<< std::endl;
            exit(-1);
    }

    addr = shmat(shmid, NULL, 0);
    pool = addr;
    if(addr == (void*)-1){
            std::cerr << "Failed to attach the segment to the process." << std::endl;
            shmctl(shmid, IPC_RMID, 0);
            exit(-1);
    }

    Map *m = new(pool) Map;

    m->insert(std::pair<int, int>(2,4));

    shmdt(addr);
    shmctl(shmid, IPC_RMID, 0);

    return 0;
} 
```

我正在为共享内存地址上的映射分配内存。我想对于元素，将使用分配器类的 allocate() 函数。但我无法弄清楚如何使用 allocate 函数为地图元素分配内存。我在尝试插入地图的行处遇到算术异常。

有人可以帮助了解内存布局应该如何吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T08:59:17.327

正如我[上次你问到这个问题时](https://stackoverflow.com/a/11761665/204847)所说的，你不能将指针存储在共享内存中并期望它们在多个进程中可用。和以前一样，我建议[`boost::unordered_map`与`boost::interprocess::allocator`](http://www.boost.org/doc/libs/1_50_0/doc/html/interprocess/allocators_containers.html#interprocess.allocators_containers.additional_containers.unordered).

如果您真的想编写自己的分配器，则需要某种自定义指针，将偏移量存储到共享内存块中，并能够从中重建正确的地址。我不建议您自己尝试这样做：除了非常繁琐之外，您可能会发现某些实现`std::unordered_map`不能与非常规指针类型一起正常工作。事实上，我怀疑为共享内存创建一个符合标准的分配器可能是不可能的。否则，Boost 分配器肯定可以被所有标准容器使用，而不仅仅是特殊的 Boost 版本。

顺便说一句，您不应该`__p`在自己的代码中使用保留名称，例如（包含双下划线）；它们只能由标准库实现使用。

# java - 将csv文件数据加载到oracle数据库中

> ID：11842086
> 
> 赞同：4
> 
> 时间：2012-08-07T08:35:02.560
> 
> 标签：java, sql-loader

我正在尝试通过java程序使用sql loader在oracle数据库中加载一个csv文件。我已经通过运行命令成功执行了它，但是我想通过 java 程序将 csv 文件数据加载到数据库中。我的程序是：

1.  加载CSV.csv：

    ```
    ID,firstName,LastName,Address
    1,aditya,kumar,gaya
    2,abhijeet,chanda,kol
    3,Rahul,Jordar,kol 
    ```

2.  试用.ctl：

    ```
    LOAD DATA
    INFILE loadCsv.csv
    BADFILE trial.bad
    DISCARDFILE trial.dsc
    APPEND 
    INTO TABLE load1
    FIELDS TERMINATED BY "," OPTIONALLY ENCLOSED BY "”"
    (x,y,z,t) 
    ```

3.  SqlLoaderTest.java：

    ```
    public class SqlLoaderTest
    {
        public static void main(String[] args) {
            try {
                String sqlldrCmd = "sqlldr control=E:\\load_data\\trial.ctl"+
                   "LOG=trial.log "+
                   "DATA=E:\\load_data\\loadCsv.csv USERID=vehere/adi"+
                   "BAD=E:\\load_data\\trial.bad";
                System.out.println("SQLLDR Started ....... ");
                Runtime rt = Runtime.getRuntime();
                Process proc = rt.exec(sqlldrCmd);
                System.out.println("SQLLDR Ended ........  ");
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    } 
    ```

它已编译并成功运行，但未在数据库中插入任何数据。非常感谢您的建议。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:48:14.260

恐怕，它没有运行成功，你只是不知道错误是什么。

请注意，如果`sqlldr`已执行，但将文件加载到 DB 中失败，您将不会获得任何 Java 字幕。相反，`Process`将[返回一个非零的 exitValue](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#exitValue%28%29)，并且进程的控制台上可能会有一些输出。

您需要做的是[获取`InputStream`您的`Process`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#getInputStream%28%29)，并以某种方式记录它（例如，将其转储到控制台中），这样您就可以看到`sqlldr`输出是什么。或者，将输出重定向到字符串`sqlldr`中的文件。`sqlldrCmd`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:25:57.030

我得到了我的错误。正确的代码是：

```
 public class SqlLoaderTest
  {
  public static void main(String[] args) {
    try {
        String sqlldrCmd = "sqlldr username/pwd, control=trial.ctl";

        System.out.println("SQLLDR Started ....... ");
        Runtime rt = Runtime.getRuntime();
        Process proc = rt.exec(sqlldrCmd);
        System.out.println("SQLLDR Ended ........  ");
      } catch (Exception e) {
        e.printStackTrace();
    }
   }
  } 
```

# jquery - jQuery AjaxSubmit 总是触发错误（但仍然提交）

> ID：11842087
> 
> 赞同：1
> 
> 时间：2012-08-07T08:35:05.777
> 
> 标签：jquery, jqueryform

我使用 jQueryForm 插件来提交我的表单。我在 CodeIgniter 中有它，所以当我提交表单时，它会运行回调以检查是否重复。如果有，它会加载一个带有标题 401 的视图，如果没有 - 加载普通视图。

我将此代码用于JS：

```
 function submitDeveloper() {
        $('form#addDeveloper').submit(function() {

            function getDevelopers() {
                $('li.gameDeveloper select').load(window.location + ' li.gameDeveloper select > *', function() {
                    $('.black, .addContent').fadeOut('fast');
                })
            }

            $(this).ajaxSubmit({
                error: function() {
                    alert('Developer już jest w bazie!')
                },
                success: getDevelopers
            })

            return false;
        })
    } 
```

现在一直触发`error`，但是数据还在提交中。有趣的是，我还有其他功能，几乎相同，并且有效。唯一的区别是，我在`beforeSubmit`那里使用，但在这里我看不到任何意义。

这会是什么？

# objective-c - 如何在Objective c中将float转换为Char *

> ID：11842088
> 
> 赞同：0
> 
> 时间：2012-08-07T08:35:06.930
> 
> 标签：objective-c, floating-point, char, type-conversion

我正在尝试将 float 转换为 int

```
float flot=2.1456;
char*  c [] = {(char *)flot};
ObjLen = sizeof(c)/sizeof(*c);
NSLog(@"ObjLen %d",ObjLen); 
```

但它显示错误**“浮点”类型的操作数无法转换为指针类型**

并将**Char* 再次转换为浮动**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:40:52.593

首先将 float 转换为 NSString

```
float flot=2.1456;
NSString *str = [NSString stringWithFormat@"%f",flot]; 
```

使用 -[NSString UTF8String]: 转换为 char *

```
const char *c = [str UTF8String] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:08:24.957

我认为更好的方法是使用`sprintf`or`snprintf`方法`stdio.h`。`sprintf/snprintf`比 @Prince 方法快 2 倍。

# php - 如何将颜色选择器添加到我的文本字段

> ID：11842089
> 
> 赞同：3
> 
> 时间：2012-08-07T08:35:07.163
> 
> 标签：php, jquery, html

任何人都可以为我的 CMS 推荐一个最佳颜色选择器吗？它应该是文本框，当它获得焦点选择器时应该显示并且颜色的颜色代码应该显示在文本框中

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:45:43.980

你可以在这里找到一些演示和插件。

[http://jqueryui.pbworks.com/ColorPicker](http://jqueryui.pbworks.com/ColorPicker)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:40:15.090

试试这个：[**http ://www.eyecon.ro/colorpicker/**](http://www.eyecon.ro/colorpicker/)

# node.js - 页面加载时的主干获取集合

> ID：11842090
> 
> 赞同：4
> 
> 时间：2012-08-07T08:35:22.700
> 
> 标签：node.js, backbone.js, fetch

我知道主干文档说 **fetch 不应该用于在页面加载时填充集合**，我有点明白为什么：

```
var appCollection = Backbone.Collection.extend({
    model:appModel,
    url:'api/app',
    initialize:function(){
        this.fetch();
    },

});

var homeView = Backbone.View.extend({
    el:'#content',
    initialize:function(){
        this.collection = new appCollection(appModel)
        this.render()   

    },
    render: function () {
        var that = this;
        alert(1);
        _.each(this.collection.models, function (item) {
            that.renderApp(item);
         }, this);

    },

    renderApp: function (item) {
        var appview = new appView({
            model: item
        });

        this.$el.append(appview.render().el);
    }
})
 var home = new homeView(); 
```

homeview.render 函数实际上在获取集合之前被调用，所以当我删除警报（1）时；我的应用程序不会被渲染，并且我收到一些错误，说“appname”（模板）未定义。

知道怎么做吗？

fetch 方法非常方便，我不介意等待几秒钟，实际上我打算显示一个进度条指示页面正在初始化，因为我还有很多其他东西要下载，所以可以使用 fetch 和当集合被实际提取时，代码继续运行？？？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T09:09:52.493

让我们从头开始：

```
var appCollection = Backbone.Collection.extend({
    model:appModel,
    url:'api/app',
    initialize:function(){
        this.fetch();
    },

}); 
```

我会避免在里面取`initialize`。创建 appCollection 的实例不需要获取。所以使用：

```
var appCollection = Backbone.Collection.extend({
    model:appModel,
    url:'api/app',    
}); 
```

然后，

```
var homeView = Backbone.View.extend({
    el:'#content',
    initialize:function(){
        this.collection = new appCollection(appModel)
        this.render()   

    },
    render: function () {
        var that = this, p;
        console.log('fetching...');
        p = this.collection.fetch();
        p.done(function () {
            console.log('fetched!');
            _.each(that.collection.models, function (item) {
                that.renderApp(item);
            }, that);
        });
    },

    renderApp: function (item) {
        var appview = new appView({
            model: item
        });

        this.$el.append(appview.render().el);
    }
})
var home = new homeView(); 
```

这允许你渲染你的 homeView，当集合被获取时，它会渲染它的模型。如果你不明白是做什么`p.done`的，看看[jQuery 的 Deferred](http://api.jquery.com/category/deferred-object/)。简而言之，ajax 请求返回一个承诺。当promise 完成时（即你的集合被获取），deferred 触发并且你指定的任何函数都`.done()`将执行。使用我`console.log`对进度提供反馈的要点。

# java - 逐行读取输入

> ID：11842091
> 
> 赞同：21
> 
> 时间：2012-08-07T08:35:32.440
> 
> 标签：java, java.util.scanner

如何在 Java 中逐行读取输入？我搜索了，到目前为止我有这个：

```
import java.util.Scanner;

public class MatrixReader {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        while (input.hasNext()) {
            System.out.print(input.nextLine());
        }
    } 
```

问题在于它没有读取最后一行。所以如果我输入

```
 10 5 4 20
 11 6 55 3
 9 33 27 16 
```

它的输出只会是

```
10 5 4 20 11 6 55 3 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T08:41:26.190

理想情况下，您应该添加最终的 println()，因为默认情况下 System.out 使用仅在发送换行符时刷新的 PrintStream。请参阅[何时/为什么在 Java 中调用 System.out.flush()](https://stackoverflow.com/questions/7166328/when-why-to-call-system-out-flush-in-java)

```
while (input.hasNext()) {
    System.out.print(input.nextLine());
}
System.out.println(); 
```

尽管您的问题可能还有其他原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-16T03:05:51.490

之前发布的建议存在拼写错误（hasNextLine 拼写）和换行打印（println 需要每一行）问题。以下是修正版——

```
import java.util.Scanner;

public class XXXX {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        while (input.hasNextLine()){
            System.out.println(input.nextLine());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:57:54.710

尝试使用`hasnextLine()`方法。

```
while (input.hasnextLine()){

    System.out.print(input.nextLine());

 } 
```

# c# - 是否可以执行 Parallel.For 循环开始最大值，然后递减

> ID：11842097
> 
> 赞同：1
> 
> 时间：2012-08-07T08:36:04.480
> 
> 标签：c#, for-loop, parallel-processing

是否可以并行化一个 for 循环，从最大值开始，然后递减？在 Parallel.For 签名中，似乎只有“i”递增时才会出现这种情况

```
for (int i = Int32.MaxValue; i >= 0; --i)
{
    // do something...
} 
```

问候，

弗洛里安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:43:05.377

如果您正在编写并行代码，则无关紧要：

[MSFT](http://msdn.microsoft.com/en-us/library/ff963552.aspx)不保证循环将从低到高运行，或以任何特定顺序运行。

> 注意：Parallel.For 方法不保证任何特定的执行顺序。与顺序循环不同，一些较高值的索引可以在一些较低值的索引之前处理。

在实践中，Parallel.For 绝对**不会**按顺序运行。

考虑 Jeppe Stig Nielsen 的示例（来自评论）：

```
System.Threading.Tasks.Parallel.For(0, 25, i => { Console.WriteLine(i); }); 
```

在我的 4 核机器上，我得到以下输出：

> 0
> 1
> 2
> 4
> 5
> 7
> 8
> 10
> 11
> 12
> 13
> 14
> 15
> 16
> 17
> 18
> 19
> 20
> 21
> 22
> 23
> 24
> 3
> 9
> 6

显然循环不正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:41:01.853

不，但您当然可以从循环计数器创建派生索引

```
Parallel.For(0, Int32.MaxValue, (i) => 
{ 
    int derivedIndex = Int32.MaxValue - i;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-23T11:51:02.690

```
....
int nTot = aRwRemove.Count - 1;
Parallel.For( 0, nTot, i =>
    {
        aRwRemove[nTot - i].Delete();
    }
);
---- 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-07T08:41:30.827

通过计算for循环内的递减值很容易实现。

```
for (int j = 0; j < Int32.MaxValue; j++)
{
    var i = Int32.MaxValue - j;
    // do something...
} 
```

# php - htaccess 变量 变量

> ID：11842098
> 
> 赞同：1
> 
> 时间：2012-08-07T08:36:08.350
> 
> 标签：php, .htaccess

我制作了一个构建图像的 php 脚本，我想使用 htaccess 获取一个不错的 url

该脚本根据一些变量构建图像：

例如：

```
All options given
php url:  image.php?width=300&height=400&color=red&var1=something&var2=somethingelse
nice url: image-w300-h400-cred-v1something-v2something.png

Few options given
php url:  image.php?var1=something&color=black
nice url: image-v1something-cblack.png 
```

我知道如何为每个组合构建一个 rewriteRule，但没有办法自动化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:40:13.857

可能是最简单的解决方案：

```
RewriteRule ^image-(.+)\.png$ image.php?params=$1 
```

然后用 PHP 解析`$_GET['params']`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:51:49.353

如果你总是把你的参数放在相同的顺序，你可以使用这种规则：

```
RewriteRule 
    ^image(-w[0-9]+)?(-h[0-9]+)?(-c[a-z]+)?(-v1[A-Za-z0-9-]+)?(-v2[A-Za-z0-9-]+)?\.png$ 
    image.php?width=$1&height=$2&color=$3&var1=$4&var2=$5 [L] 
```

编辑 ：

```
RewriteRule 
    ^image(-w([0-9]+))?(-h([0-9]+))?(-c([a-z]+))?(-v1([A-Za-z0-9-]+))?(-v2([A-Za-z0-9-]+))?\.png$ 
    image.php?width=$2&height=$4&color=$6&var1=$8&var2=$10 [L] 
```

编辑 2 以防止 $10 问题：

```
RewriteRule 
    ^image(?:-w([0-9]+))?(?:-h([0-9]+))?(?:-c([a-z]+))?(?:-v1([A-Za-z0-9-]+))?(?:-v2([A-Za-z0-9-]+))?\.png$ 
    image.php?width=$1&height=$2&color=$3&var1=$4&var2=$5 [L] 
```

# dojo - 约束 Dojo 中的可移动对象

> ID：11842106
> 
> 赞同：0
> 
> 时间：2012-08-07T08:36:44.743
> 
> 标签：dojo

首先已经有一个问题/答案： [Constrain position of Dojo FloatingPane](https://stackoverflow.com/questions/9445868/constrain-position-of-dojo-floatingpane) [http://jsfiddle.net/phusick/3vTXW/](http://jsfiddle.net/phusick/3vTXW/)

我用上面的方法创建了可移动的窗格，它首先工作。然后我用对象创建了一个模块，约束不再起作用，我可以将对象移出窗口。

我将以下代码放在一个单独的模块中：

```
define(["dojo/_base/declare", "dojo/dnd/move", "dojox/layout/FloatingPane"],     function(declare, move, FloatingPane){
return declare("dashboardFloatingPane", FloatingPane, {

constructor: function() {
        this.inherited(arguments);
        this.moveable = new dojo.dnd.move.boxConstrainedMoveable(
            this.domNode, {
                handle: this.focusNode,
                constraints: {
                        l: 0,
                        t: 20,
                        w: 500,
                        h: 500                            
                    },
                within: true
            }
        );                            
    } 
});
}); 
```

然后我在这里创建对象：

```
 require(["dojo/dnd/move", "dojox/layout/FloatingPane", "dashboardFloatingPane", "dojo/domReady!"],
        function(move, FloatingPane, dashboardFloatingPane) {

            var widgetNode1 = dojo.byId("widget1");

            var floatingPane = new dashboardFloatingPane({
                title: "A floating pane",
                resizable: true,
                dockable: false,
                style: "position:absolute;top:40px;left:40px;width:160px;height:100px;"       
                }, widgetNode1);

            floatingPane.startup();
        }); 
```

但同样，我可以将窗格移动到任何我想要的地方，甚至在设置的框之外。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:39:29.577

您需要覆盖`postCreate`方法，而不是类`contructor`中的`dojox/layout/FloatingPane`。

原因是原始类设置`this.moveable`为它自己的可移动类型，因此要覆盖它，您必须在之后将其重新分配给您的约束可移动。

试试这个：

```
define(["dojo/_base/declare", "dojo/dnd/move", "dojox/layout/FloatingPane"], function(declare, move, FloatingPane){
  return declare("dashboardFloatingPane", FloatingPane, {

    postCreate: function() {
      this.inherited(arguments);
      this.moveable = new dojo.dnd.move.boxConstrainedMoveable(
        // snip...
      );
    } 
  });
}); 
```

# python - 我需要一些方法来检查 IPv6 地址是否在 python 的网络范围内

> ID：11842109
> 
> 赞同：0
> 
> 时间：2012-08-07T08:37:01.467
> 
> 标签：python, ipv6

作为验证的一部分，我需要这样做，我有 IPv4 的解决方案。但由于 IPv6 可以有多种格式，我无法找到确切的解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:39:54.383

有很多方法可以解决你的问题。您可以从类似任务的解决方案开始：

*   [检查 IP 地址](https://stackoverflow.com/questions/11827961/checking-for-ip-addresses/11828000#11828000)

这个想法是使用`socket`Python 中的模块：

```
socket.inet_pton(socket.AF_INET6, address) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-08T15:52:00.877

从 Python 3.3 开始，您可以使用

```
import ipaddress
ipaddress.ip_address(ip) in ipaddress.IPv6Network(network) 
```

例如，

```
import ipaddress
ip = "2001:db8:85a3::8a2e:370:7334"
network = "2001:db8:85a3::/64"
test = ipaddress.ip_address(ip) in ipaddress.IPv6Network(network)
print(test)   # True 
```

[Python 2.6+](https://pypi.python.org/pypi/py2-ipaddress)还有一个反向移植。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:18:08.630

查看[IPy](https://github.com/haypo/python-ipy/)。在 Python 中处理 IP 地址和子网时，它非常有用。

# ios - IOS CGContextDrawImage 缩放图片，效率很低

> ID：11842110
> 
> 赞同：0
> 
> 时间：2012-08-07T08:37:02.670
> 
> 标签：ios, opengl-es, bitmap, draw

我使用CGContextDrawImage缩放图像，但是当我Shrink它时效率很低，有什么办法或改变提高效率。

```
//bitmap is 1000X1000 when i Shrink it use CGContextDrawImage
CGContextDrawImage(context, CGRectMake(cbx, cby, image.size.width-X, iamge.size.height-Y),[image CGImage]);
//X and Y increased gradually 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:43:17.677

如果您查看 CGContextRef，有一个选项可以设置插值质量 - 您希望它降低速度：CGContextSetInterpolationQuality(...); 您也可以尝试使用 Accelerate 函数（具体查看 vImage 相关函数），但不清楚这是否有助于使其更快（这里有一个学习曲线）。

如果您可以将其缩小 2 的幂，您可以通过每隔一行获取每个其他像素来调整自己的大小 - 这将非常非常快。

此外，每次缩小图像时，缓存该图像，如果您必须调整为较小的图像，请使用先前缩小的图像而不是大图像作为起点。

# security - 在将它们添加到数据库之前转义值是否是一个好习惯？

> ID：11842111
> 
> 赞同：0
> 
> 时间：2012-08-07T08:37:08.317
> 
> 标签：security, zend-framework, escaping

我有一个 Zend 项目，经过一段时间的研究，我遇到了这个想法。当然，这是与安全相关的，目的是避免 xss 攻击。

其他解决方案是在显示它们之前将它们转义，但这将包括许多特殊情况，有时因为 Zend 没有实现类似的东西。

这些是在 phtml [http://codeutopia.net/blog/2007/11/10/how-to-automatically-escape-template-variables-in-zend_view/](http://codeutopia.net/blog/2007/11/10/how-to-automatically-escape-template-variables-in-zend_view/) 和[https://codeutopia.net/blog/2007/11/10/how-to-automatically-escape-template-variables-in-zend_view/ /github.com/chikaram/gnix-view](https://github.com/chikaram/gnix-view)

这些有点太老了，也许有人已经遇到了这个问题，并且已经提供了更好的解决方案，以及 Zend 必须提供的我还没有找到的新功能。

那么，当我确实希望在我的值中包含 javascript 代码时，在将它们添加到 db 并为罕见的特殊情况创建排除数组之前转义值是否是一个好习惯？

如果您有更好的解决方案，链接和示例将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T08:42:03.247

不，它不会，因为数据库是用于存储**数据**，而不是“数据已经转义以在特定介质上呈现”。

考虑例如。您将来需要将其导出为 PDF，而不是在 HTML 中显示。通过使用您的方法，这将非常困难，因为数据库中的数据已经被破坏了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:39:01.110

当您拥有所有转义的 HTML 然后需要在 JSON API 中使用它时会发生什么？人们会想知道为什么他们的信用卡账单显示为`Smith &amp; associates`.

逃跑是最后一分钟完成的，这是有原因的。转义是上下文相关的。您只能在 HTML 内部转义 HTML，就像您以不同的方式为 SQL 转义字符串一样。通过在最后一分钟转义，您可以保持实际数据可用于以不同方式进行合理搜索和转义。

此外，如果你在 ZF 中使用 MVC 的东西，你应该只能`$this->escape()`在视图中使用。

像：

```
Username: <?php echo $this->escape($this->username)); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T17:45:50.460

**验证输入，转义输出。**

你不能打败这个。如果您希望用户提供不是 HTML 的内容，您**首先要验证**他是否这样做（并过滤掉其他任何内容）。接下来，**将它保存在 DB 中**（您需要将其**转义以供 DB**使用（Zend_Db_Adapter::quote() 或 mysql_real_escape_string）。最后**从 DB 加载**并**输出它**（*使用适当的转义*- Zend_View->escape()）。事情如果将其回显到 JavaScript 代码中会有所不同。比您需要使用 javascript 转义函数对其进行转义（对于任何其他格式也是如此）。

# asp.net - 带有 ASP.NET 多行文本框问题的跨浏览器

> ID：11842114
> 
> 赞同：0
> 
> 时间：2012-08-07T08:37:11.233
> 
> 标签：asp.net, textbox, cross-browser

在一个事件中，我的文本框字段是从 SQL 数据库填充的。文本框没什么好看的，只有一个 ID、TextMode 和一些 CSS。

这是背景代码：

```
Protected Sub LocationControl_SelectedIndexChanged(sender As Object, e As EventArgs) Handles LocationControl.SelectedIndexChanged
    If LocationControl.SelectedValue = "(New Location)" Then
        Clear()
    Else
        Dim filter As String = "locationID = '" + LocationControl.SelectedValue.ToString() + "'"
        Dim dv As DataView = CType(SqlDataSource1.Select(DataSourceSelectArguments.Empty), DataView)
        dv.RowFilter = filter
        For Each drv As DataRowView In dv
            LocName.Text = drv("locationName").ToString()
            LocAddress.Text = drv("locationAddress").ToString()
            LocDirections.Text = drv("drivingdirections").ToString()
            LocURL.Text = drv("URL").ToString()
            statusDDL.SelectedValue = drv("statusID").ToString()
        Next
    End If

End Sub 
```

该代码有效，但是当我在任何浏览器下运行它时，但 IE 会在所有多行文本框之上创建任何额外的行。

有任何想法吗？

# maven - WAR 文件中的多个时间戳快照重复 - 为什么？

> ID：11842120
> 
> 赞同：2
> 
> 时间：2012-08-07T08:37:47.503
> 
> 标签：maven, jenkins, maven-3, war

我有一个多模块项目书店（其中一个模块是 WAR）。一些模块依赖于 projectX（并且一些依赖项也依赖于该 projectX）。我在模块中使用了 maven 属性和依赖管理，以确保它们的一切都依赖于相同的版本（0.0.7-SNAPSHOT）。参见 [1] 中的依赖分析

在 projectX 和其他一些项目中执行了很多更改后，我的存储库有很多 projectX 的时间戳快照。

当我运行 CI 服务器的部署作业（golas“部署站点：站点”后跟“站点：部署”）时，我得到一个 WAR 文件，其中包含 projectX 的 SNAPSHOT 的多个时间戳版本（每个模块的 3 个时间戳 - api、core、mail -确切地说，总共 9 个）。

在本地运行目标包不会产生同样的问题——正如预期的那样，每个模块只有一个快照被打包在战争中。

有谁知道为什么 Maven 打包了多个快照。既然他们都是

干杯，

米格尔·阿尔梅达

[1]

```
[INFO] --- maven-dependency-plugin:2.1:analyze (default-cli) @ bookstore-persist ---
[WARNING] Used undeclared dependencies found:
[WARNING]    org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.0.Final:compile
[WARNING]    org.company.clinicalmanagement:clinicaltrial-api:jar:1.0.2-SNAPSHOT:compile
[WARNING]    org.springframework:spring-tx:jar:3.1.0.RELEASE:compile
[WARNING]    org.company.security:security-api:jar:0.0.7-SNAPSHOT:compile
[WARNING]    commons-logging:commons-logging:jar:1.1.1:compile
[WARNING]    org.apache.struts.xwork:xwork-core:jar:2.3.4:compile
[WARNING]    org.company.audit:audit-core:jar:0.1.0-SNAPSHOT:compile
[WARNING]    org.company.security:security-core:jar:0.0.7-SNAPSHOT:compile
[WARNING]    org.company.security:security-mail:jar:0.0.7-SNAPSHOT:compile
[WARNING]    joda-time:joda-time:jar:2.0:compile
[WARNING] Unused declared dependencies found:
[WARNING]    org.company:projectX-shared:pom:1.1.0-SNAPSHOT:compile
[WARNING]    org.company:projectX-model:jar:1.1.0-SNAPSHOT:compile
[WARNING]    org.company:projectX-configuration:jar:1.1.0-SNAPSHOT:test
[WARNING]    org.springframework:spring-core:jar:3.1.0.RELEASE:compile
[WARNING]    org.slf4j:jcl-over-slf4j:jar:1.5.8:runtime
[WARNING]    org.slf4j:slf4j-api:jar:1.5.8:runtime
[WARNING]    org.slf4j:slf4j-log4j12:jar:1.5.8:runtime
[WARNING]    log4j:log4j:jar:1.2.14:runtime
[WARNING]    org.springframework:spring-orm:jar:3.1.0.RELEASE:compile
[WARNING]    c3p0:c3p0:jar:0.9.1.2:provided
[WARNING]    postgresql:postgresql:jar:9.0-801.jdbc4:provided
[WARNING]    javassist:javassist:jar:3.4.GA:compile
[WARNING]    javax.servlet:servlet-api:jar:2.4:provided
[WARNING]    cglib:cglib:jar:2.2:compile
[WARNING]    org.company.security:security:pom:0.0.7-SNAPSHOT:compile
[WARNING]    org.company.audit:audit:pom:0.1.0-SNAPSHOT:compile
[INFO]                                                                        
[INFO] ------------------------------------------------------------------------
[INFO] Building Bookstore Web 1.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> maven-dependency-plugin:2.1:analyze (default-cli) @ projectX-web >>>
[INFO]
[INFO] --- buildnumber-maven-plugin:1.0:create (default) @ projectX-web ---
[INFO]
[INFO] --- maven-dependency-plugin:2.1:analyze (default-cli) @ projectX-web ---
[WARNING] Used undeclared dependencies found:
[WARNING]    org.company.clinicalmanagement:clinicaltrial-api:jar:1.0.2-SNAPSHOT:compile
[WARNING]    org.company.security:security-api:jar:0.0.7-SNAPSHOT:compile
[WARNING]    org.hibernate:hibernate-core:jar:3.6.3.Final:compile
[WARNING]    org.apache.struts.xwork:xwork-core:jar:2.3.4:compile
[WARNING]    org.company.security:security-core:jar:0.0.7-SNAPSHOT:compile
[WARNING]    commons-logging:commons-logging-api:jar:1.1:compile
[WARNING]    org.company.audit:audit-struts:jar:0.1.0-SNAPSHOT:compile
[WARNING]    org.springframework:spring-tx:jar:3.1.0.RELEASE:compile
[WARNING]    org.company.audit:audit-core:jar:0.1.0-SNAPSHOT:compile
[WARNING]    org.company.security:security-mail:jar:0.0.7-SNAPSHOT:compile
[WARNING]    org.springframework:spring-web:jar:3.0.5.RELEASE:compile
[WARNING] Unused declared dependencies found:
[WARNING]    org.apache.commons:commons-jci-fam:jar:1.0:compile
[WARNING]    postgresql:postgresql:jar:9.0-801.jdbc4:test
[WARNING]    org.apache.struts:struts2-sitemesh-plugin:jar:2.3.4:compile
[WARNING]    org.apache.struts:struts2-config-browser-plugin:jar:2.3.4:compile
[WARNING]    org.apache.struts:struts2-spring-plugin:jar:2.3.4:compile
[WARNING]    commons-fileupload:commons-fileupload:jar:1.1.1:compile
[WARNING]    org.company:projectX-model:jar:1.1.0-SNAPSHOT:compile
[WARNING]    org.company:projectX-persist:jar:1.1.0-SNAPSHOT:compile
[WARNING]    org.company.audit:audit:pom:0.1.0-SNAPSHOT:compile
[WARNING]    org.springframework:spring-core:jar:3.1.0.RELEASE:compile
[WARNING]    org.springframework:spring-context-support:jar:3.1.0.RELEASE:compile
[WARNING]    org.slf4j:jcl-over-slf4j:jar:1.5.8:runtime
[WARNING]    org.slf4j:slf4j-api:jar:1.5.8:runtime
[WARNING]    org.slf4j:slf4j-log4j12:jar:1.5.8:runtime
[WARNING]    log4j:log4j:jar:1.2.14:runtime
[WARNING]    c3p0:c3p0:jar:0.9.1.2:test
[WARNING]    org.company:projectX-configuration:jar:1.1.0-SNAPSHOT:compile
[WARNING]    org.company:projectX-configuration:test-jar:tests:1.1.0-SNAPSHOT:compile
[WARNING]    org.company.security:security:pom:0.0.7-SNAPSHOT:compile
[WARNING]    org.xhtmlrenderer:core-renderer:jar:R8-final:compile
[WARNING]    com.lowagie:itext:jar:2.1.7:compile
[WARNING]    org.apache.poi:poi:jar:3.7:compile
[WARNING]    com.jgeppert.struts2.jquery:struts2-jquery-plugin:jar:3.0.1:compile
[WARNING]    org.company.application.version:application-version:jar:0.0.2:compile
[INFO]                                                                        
[INFO] ------------------------------------------------------------------------
[INFO] Building bookstore-acceptance 1.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------

[INFO] <<< maven-dependency-plugin:2.1:analyze (default-cli) @ bookstore-acceptance <<<
[INFO]
[INFO] --- maven-dependency-plugin:2.1:analyze (default-cli) @ bookstore-acceptance ---
[WARNING] Used undeclared dependencies found:
[WARNING]    org.springframework:spring-beans:jar:3.1.0.RELEASE:compile
[WARNING]    org.company.clinicalmanagement:clinicaltrial-api:jar:1.0.2-SNAPSHOT:compile
[WARNING]    org.company.audit:audit-struts:jar:0.1.0-SNAPSHOT:compile
[WARNING]    org.apache.struts:struts2-junit-plugin:jar:2.3.4:test
[WARNING]    org.hibernate:hibernate-core:jar:3.6.3.Final:compile
[WARNING]    org.company.security:security-api:jar:0.0.7-SNAPSHOT:compile
[WARNING]    org.easymock:easymock:jar:3.0:compile
[WARNING]    org.company.systemDate:systemDate:jar:0.0.2:compile
[WARNING]    com.lowagie:itext:jar:2.1.7:compile
[WARNING]    junit:junit:jar:4.8.2:test
[WARNING]    org.springframework:spring-context-support:jar:3.1.0.RELEASE:compile
[WARNING]    org.apache.struts.xwork:xwork-core:jar:2.3.4:compile
[WARNING]    org.company.clinicalmanagement:clinicaltrial-core:jar:1.0.2-SNAPSHOT:compile
[WARNING]    org.company.audit:audit-core:jar:0.1.0-SNAPSHOT:compile
[WARNING]    info.cukes:cucumber-core:jar:1.0.9:test
[WARNING]    org.company.security:security-core:jar:0.0.7-SNAPSHOT:compile
[WARNING]    org.springframework:spring-web:jar:3.0.5.RELEASE:compile
[WARNING]    org.company.security:security-mail:jar:0.0.7-SNAPSHOT:compile
[WARNING]    info.cukes:cucumber-java:jar:1.0.9:test
[WARNING] Unused declared dependencies found:
[WARNING]    info.cukes:cucumber-spring:jar:1.0.9:test
[WARNING]    postgresql:postgresql:jar:9.0-801.jdbc4:provided
[WARNING]    org.company:projectX-persist:jar:1.1.0-SNAPSHOT:compile
[WARNING]    org.company:projectX-persist:test-jar:tests:1.1.0-SNAPSHOT:test
[WARNING]    org.company:projectX-configuration:jar:1.1.0-SNAPSHOT:compile
[WARNING]    org.company:projectX-configuration:test-jar:tests:1.1.0-SNAPSHOT:compile
[WARNING]    c3p0:c3p0:jar:0.9.1.2:test
[WARNING]    org.company:projectX-web:jar:classes:1.1.0-SNAPSHOT:test
[WARNING]    org.company:projectX-web:test-jar:tests:1.1.0-SNAPSHOT:test
[WARNING]    org.apache.struts:struts2-spring-plugin:jar:2.3.4:compile
[WARNING]    javax.servlet:servlet-api:jar:2.4:provided
[WARNING]    javax.servlet:jsp-api:jar:2.0:provided 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T13:47:50.113

这是 maven-war-plugin 的一个错误。我能够通过升级到插件的 2.4 版来解决这个问题。这是相关的jira：[https ://jira.codehaus.org/browse/MWAR-296?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=318472#comment-318472](https://jira.codehaus.org/browse/MWAR-296?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=318472#comment-318472)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:05:06.987

您可能需要这样做`clean deploy site:site`，否则之前的快照仍将保留在构建的目标目录中。

# c# - 隐藏来自 SQL 查询的 .aspx 页面中的列

> ID：11842121
> 
> 赞同：0
> 
> 时间：2012-08-07T08:37:49.257
> 
> 标签：c#, asp.net, sql

我已经写了 SQL 存储过程选择代码 [代码] From ---- Where ---

现在对于某些情况，我想要那个代码列，但对于某些我不想要那个。我怎么能做到这一点？

代码 ：-

```
DataTable dtOutput= /Some function which return Datatable (accpet parameters as well for selection)

Table tOutput = / Some Function Which Converts Datatable to Table (For displaying it in HTML)

if (sTicketStatus == "0")
{
// Normal Statement which select all column coming from sql stored procedure
}
else
{
 foreach (TableRow trOutput in tOutput.Rows)
 {
 // What to write Here ?
 }
}
Page.Controls.Add(tOutput); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:45:05.220

```
dtOutput.Columns.Remove(dtOutput.Columns["ColumnName"]); 
```

请尝试此代码，这是用于删除列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:53:38.847

采用

```
DataTable.DefaultView.ToTable(false, string_array_of_desire_columns[]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:50:27.483

您可以使用 View 来选择特定的列...

```
dt.DefaultView.ToTable(false, "Column1", "Column2"); 
```

如果您想要不同的记录，请将第一个参数发送为 True...请参阅此[http://msdn.microsoft.com/en-us/library/wec2b2e6.aspx](http://msdn.microsoft.com/en-us/library/wec2b2e6.aspx)

# php - CSV 格式的回车

> ID：11842124
> 
> 赞同：1
> 
> 时间：2012-08-07T08:37:58.333
> 
> 标签：php, csv, carriage-return

[fgetcsv](http://www.php.net/manual/en/function.fgetcsv.php)函数不将 (CR) 理解为`\r`有效的行分隔符。有没有办法解决这个问题，或者我应该编写自己的解析器？

编辑：这解决了它：

[逐行读取文本文件php - 未检测到换行符](https://stackoverflow.com/questions/817783/read-in-text-file-line-by-line-php-newline-not-being-detected)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:40:18.380

如果在读取 Macintosh 计算机上或由 Macintosh 计算机创建的文件时 PHP 不能正确识别行尾，启用[auto_detect_line_endings](http://www.php.net/manual/en/filesystem.configuration.php#ini.auto-detect-line-endings)运行时配置选项可能有助于解决问题。

# android - 如何使用 AIDE 查找一个地方的经纬度？

> ID：11842125
> 
> 赞同：2
> 
> 时间：2012-08-07T08:38:00.250
> 
> 标签：android

有人知道如何在 AIDE 工作吗？如果是这样，请告诉我如何找到一个地方的当前纬度和经度。在 Eclipse 中，我们可以使用 DDMS 来做到这一点，但我不知道如何在 AIDE 中做到这一点。请帮忙..

# php - 在 php 应用程序中包含 zend 模块

> ID：11842127
> 
> 赞同：0
> 
> 时间：2012-08-07T08:38:06.350
> 
> 标签：php, zend-framework, codeigniter

我正在使用 Zend 在我的 php 应用程序中包含 Google 议程（我使用 CodeIgniter 作为框架）。但是我有很多警告，例如：

```
Message: include_once(Zend/Gdata.php): failed to open stream: No such file or directory. 
```

有我的目录列表：

```
--dir1
       -- Zend
           -- Loader.php

/var/www/my_app
  --controllers
     -- calendar.php 
```

在 calendar.php 中，这是我的路径配置

```
 require_once '../Zend/Loader.php'; 
```

执行这些行时会发生错误：

```
require_once '.../Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata'); 
```

特别是它来自加载 Loader.php 文件的函数：

```
 public static function loadFile($filename, $dirs = null, $once = false)
        { ........    
include_once $filename;  } 
```

我尝试删除 Zend，以便它可以与该问题的许多答案中建议的控制器位于同一目录中，但它仍然无法正常工作。有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:45:48.873

要在 PHP 中包含文件，您有 2 个选项：

1）定义完整的服务器路径，如下所示：

```
/home/project/dir1/Zend/Gdata.php 
```

2）从由 apache/其他东西执行的文件中定义路径，就像这样使用 dir1 ：

```
dir1/Zend/Gdata.php 
```

在 Zend 项目中，您可以这样做以确保它可以工作：

```
include_once(APPLICATION_PATH."/../dir1/Zend/Gdata.php") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:23:57.823

我终于找到了解决方案。打开 php.ini 文件并找到 include_path 行。. 将您放置 ZendGdata 目录的目录添加到 include_path 中。 /your/directory/ZendGdata/library 。保存并重启Apache 希望对遇到同样问题的朋友有所帮助

# geolocation - 这个“地址”末尾的代码是什么

> ID：11842140
> 
> 赞同：3
> 
> 时间：2012-08-07T08:38:46.927
> 
> 标签：geolocation, maps, latitude-longitude, census

我正在尝试从伦敦的位置列表中获取经度和纬度坐标。所述列表中的每个项目都有区名称和最后一个四个字母的十六进制代码，这些似乎没有在任何地方记录。

```
City of London 001C
City of London 001D
City of London 001E
Barking and Dagenham 016A
Barking and Dagenham 015A
Barking and Dagenham 015B 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:44:43.863

这些可以是 LSOA（下层超级输出区）代码或 MSOA（中间层超级输出区）代码。我相信您粘贴的所有代码都是合法的 LSOA 和 MSOA 代码。（许多较大的 LSOA 是它们自己的 MSOA。）

LSOA 是一组基于邮政编码的连续输出区域 (OA)。英格兰和威尔士有 34,378 个 LOSA。一个 MSOA 是一个或多个 LSOA。英格兰和威尔士有 7,193 个 MSOA。

信息截至 2001 年人口普查。

[您可以在国家统计局](http://www.ons.gov.uk/ons/guide-method/geography/beginner-s-guide/census/super-output-areas--soas-/index.html)的网站上找到更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T17:21:24.120

[David在对](https://stackoverflow.com/users/721269/david-schwartz)[上述答案](https://stackoverflow.com/a/11842247/575530)的评论中建议的同一站点上有一个 N-Triple 文件。在[OPEN DATA COMMUNITIES 的下层超级输出区域 (LSOA) 页面上](http://opendatacommunities.org/data/lower-layer-super-output-areas)，单击[此数据集中所有三元组的转储作为压缩的 n-triples 文件](http://opendatacommunities.org/data/lower-layer-super-output-areas/dump)。

该文件包含类似的条目

```
<http://opendatacommunities.org/id/geography/lsoa/E01000006> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://opendatacommunities.org/def/geography#LSOA> .
<http://opendatacommunities.org/id/geography/lsoa/E01000006> <http://www.w3.org/2000/01/rdf-schema#label> "Barking and Dagenham 016A" .
<http://opendatacommunities.org/id/geography/lsoa/E01000006> <http://data.ordnancesurvey.co.uk/ontology/spatialrelations/easting> "544933"^^<http://www.w3.org/2001/XMLSchema#integer> .
<http://opendatacommunities.org/id/geography/lsoa/E01000006> <http://data.ordnancesurvey.co.uk/ontology/spatialrelations/northing> "184296"^^<http://www.w3.org/2001/XMLSchema#integer> .
<http://opendatacommunities.org/id/geography/lsoa/E01000006> <http://opendatacommunities.org/def/geography#boundaryAsJSON> <http://opendatacommunities.org/files/lsoa_boundaries/E01000006.json> .
<http://opendatacommunities.org/id/geography/lsoa/E01000006> <http://statistics.data.gov.uk/def/administrative-geography/district> <http://statistics.data.gov.uk/id/local-authority-district/00AB> .
<http://opendatacommunities.org/id/geography/lsoa/E01000006> <http://www.w3.org/2002/07/owl#sameAs> <http://statistics.data.gov.uk/id/statistical-geography/E01000006> .
<http://opendatacommunities.org/id/geography/lsoa/E01000006> <http://www.w3.org/2003/01/geo/wgs84_pos#lat> "51.53895"^^<http://www.w3.org/2001/XMLSchema#decimal> .
<http://opendatacommunities.org/id/geography/lsoa/E01000006> <http://www.w3.org/2003/01/geo/wgs84_pos#long> "0.08841"^^<http://www.w3.org/2001/XMLSchema#decimal> .
<http://opendatacommunities.org/id/geography/lsoa/E01000006> <http://www.w3.org/2004/02/skos/core#notation> "E01000006" . 
```

这将为您提供标有“Barking and Dagenham 016A”的 LSOA 的纬度 (51.53895) 和经度 (0.08841)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:44:17.617

看起来好像您已经获得了带有名称的 LSOA 数据。LSOA是下层超级输出区，它只是在人口普查和其他统计数据中识别不同区域的另一种方法。您可以[在此处](http://en.wikipedia.org/wiki/ONS_coding_system)了解更多信息，但在经纬度和其他坐标工作中不需要它 - 它比任何东西都更具统计意义。

# macos - -OS X 中的daystart？

> ID：11842160
> 
> 赞同：1
> 
> 时间：2012-08-07T08:39:55.333
> 
> 标签：macos, bash, osx-snow-leopard

我目前正在运行 Snow Leopard，并且在我的 bash 脚本中遇到了障碍。其中一部分是使用“查找”命令，但显然 OS X 不支持“-daystart”标志。

有谁知道解决方法或替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:25:00.583

`-daystart`是 BSD find 不支持的 GNU 扩展。希望您也可以安装 GNU 版本。

我建议您安装[Homebrew](https://brew.sh/)或[MacPorts](https://www.macports.org/)。然后，您可以使用`brew install findutils`或安装 GNU find `port install findutils`。

它将添加`gfind`，它支持`-daystart`.

# html - 如何设置标签的文本在图像的中心？

> ID：11842169
> 
> 赞同：1
> 
> 时间：2012-08-07T08:40:13.670
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:45:06.683

您应该使用以下代码来实现您想要的。

**HTML：**

```
<li>  
    <a href="@Url.Action( "Start", "Home" )" class="btnImg">
        Start
    </a>
</li> 
```

**CSS：**

```
.btnImg{
     background: url(/url/of/image.png);
     width: 70px;
     height: 23px;
     text-align:center;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:47:41.967

为什么不使用按钮输入标签？

`<input id="myButton" type="button" value="Start" onclick="location.href='~/Content/images/buttonimage.png'" />`

在CSS中

```
input[type="button"]:active, input[type="submit"]:active
{
     background: url(/url/of/image.png);
     width: 70px;
     height: 23px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T09:52:34.367

一种使用 CSS 背景图像的方法。

上面的 Unline 示例也进行**垂直居中**。

IE7+兼容方法：

```
/* http://www.vanseodesign.com/css/vertical-centering/ CSS Table Method explained */
.imagePortlet .image-wrapper {
    display: table;
}

/* Text-over-image using relative + absolute positioning trick */
.imagePortlet .text {
    text-align: center;
    vertical-align: middle;
    display: table-cell;
} 
```

相关的 HTML 代码。图像是在服务器端动态插入的，但如果它是静态图像，您可以简单地将宽度和高度放入`.image-wrapper`类中：

```
 <a title="" href="http://localhost" class="outer-wrapper">
        <div style="background: url(http://localhost/yourimage.png) no-repeat top left; width: 232px; height: 93px" class="image-wrapper">
            <div class="text">Text on the image here</div>
        </div>
    </a> 
```

请注意，内联样式必须根据实际图像尺寸生成。我通过读取服务器端的图像属性来做到这一点。使用现代浏览器时，您可能会避免知道确切的图像尺寸，但随后您会失去 IE 兼容性。

# asp.net - Adobe Presenter CMI 数据模型

> ID：11842173
> 
> 赞同：2
> 
> 时间：2012-08-07T08:40:18.753
> 
> 标签：asp.net, adobe, scorm2004, scorm1.2

我想构建一个使用`Adobe Presenter 7`内容创作工具的电子学习 LMS。我最近阅读了 SCORM 2004 用户指南。它说我们必须访问 CMI 数据模型来跟踪用户性能。但是，我在 Adob​​e Presenter 7 创建的 zip 文件中找不到任何名称包含**cmi的文件。**
知道我在哪里可以找到它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:19:07.130

您可以阅读 RTE 书籍以了解 CMI 数据模型。CMI 数据模型不是内容包中的文件。它是 LMS 提供的数据模型。事实上，SCO 可以通过使用这个数据模型元素与 LMS 进行通信。例如，SCO 可以使用以下 JavaScript 代码获取学习者的姓名：

var learnerName = GetValue("cmi.learner_name");

或者，SCO 可以使用以下 JavaScript 代码将活动的成功状态设置为通过：

SetValue("cmi.success_status", "通过");

您可以通过以下链接下载 RTE 书籍：

[http://www.adlnet.gov/wp-content/uploads/2011/07/SCORM_2004_4ED_v1_1_Doc_Suite.zip](http://www.adlnet.gov/wp-content/uploads/2011/07/SCORM_2004_4ED_v1_1_Doc_Suite.zip)

# python - 将关系转换为查询对象

> ID：11842174
> 
> 赞同：0
> 
> 时间：2012-08-07T08:40:23.357
> 
> 标签：python, mysql, sqlalchemy, flask, flask-sqlalchemy

假设我在表 User 和 Car 之间有多对多的关系。

我使用时效果很好

```
User.query.filter_by(name='somename').all().cars

Car.query.filter_by(vin='xxxxxx').all().users 
```

我创建了将 BaseQuery 转换为 xml 对象的函数，因此我需要从`Car.query.filter_by(vin='xxxxxx').all().users`.

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T11:08:47.920

老实说，我看不到您提供的代码示例实际上是如何工作的，因为[`Query.all()`](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.all)返回了一个列表。所以`[].users`应该会产生错误。

无论如何，以下是几个选项：

```
# 1: this should be fine
qry1 = Car.query.join(User, Car.users).filter(User.name=='you')

# 1: this will probably not work for you, as this is not one query, although the result is a Query instance
usr1 = User.query.filter_by(name='you').one()
qry2 = Car.query.with_parent(usr1)

# 3: you might define the relationship to be lazy='dynamic', in which case the query object instance will be returned
from sqlalchemy.orm.query import Query
class Car(Base):
    __tablename__ = 'cars'
    id = Column(Integer, primary_key=True)
    vin = Column(String(50), unique=True, nullable=False)

    users = relationship(User, secondary=user_cars, 
            #backref='cars',
            backref=backref('cars', lazy="dynamic"),
            lazy="dynamic",
            )
qry3 = Car.query.filter_by(name="you").one().cars
assert isinstance(qry3, Query) 
```

在此处查看有关选项 3 的更多信息：[orm.relationship(...)](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#sqlalchemy.orm.relationship)

# iphone - 在 MPMoviePlayerController 中检测下一个和上一个按钮事件

> ID：11842177
> 
> 赞同：0
> 
> 时间：2012-08-07T08:40:31.323
> 
> 标签：iphone, objective-c, mpmovieplayercontroller

对于我正在使用的应用程序`MPMoviePlayerController`。问题是我应该如何检测下一个和上一个按钮事件。因为在`MPMoviePlayerController`我们可以检测到各种事件，但我找不到任何方法来检测下一个和上一个按钮事件。我用于检测其他事件的代码是

```
- (void)moviePlayerPlaybackStateChanged:(NSNotification *)notification {
MPMoviePlayerController *moviePlayer = notification.object;
MPMoviePlaybackState playbackState = moviePlayer.playbackState;
switch (playbackState) {
    case MPMoviePlaybackStateStopped:
        NSLog(@"stop");
        break;
    case MPMoviePlaybackStatePlaying:
        NSLog(@"playing");
        break;
    case MPMoviePlaybackStatePaused:
        NSLog(@"paused");
        break;
    case MPMoviePlaybackStateInterrupted:
        NSLog(@"Interrupted");
        break;
    case MPMoviePlaybackStateSeekingForward:
        NSLog(@"forward");
        break;
    case MPMoviePlaybackStateSeekingBackward:
        NSLog(@"backword");
        break;
    default:
        break;
} 
```

}

我需要这个，因为我想在播放列表中播放上一首和下一首曲目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:05:32.510

MPMoviePlayerPlaybackStateDidChangeNotification 没有 userInfo 字典。

# actionscript-3 - 全屏使用 flash builder Actionscript Mobile 项目

> ID：11842186
> 
> 赞同：1
> 
> 时间：2012-08-07T08:41:05.393
> 
> 标签：actionscript-3, mobile, flash-builder, fullscreen

1.  我使用 Flash builder 4.6创建了一个非常简单的**Action-script Mobile 项目，并选择了自动重定向和****全屏**模式
2.  我正在使用外部 SWC 文件导入一些图形

这是在 android 设备上测试我的应用程序时的结果： ![在此处输入图像描述](../Images/5827b643bf7c213986fa66c5e8dd4d44.png)

问题：**为什么我的应用不能全屏？**. 正如您在图像中看到的，我有一个很大的白色区域，而我的应用程序位于左上角并且太小了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T21:07:38.513

我知道这是一个老问题，但我找到了一个可以帮助的链接， [如何根据屏幕尺寸设置 AS3 应用程序尺寸（对于移动设备）？](https://stackoverflow.com/questions/7824452/how-to-set-an-as3-application-size-according-to-the-screen-size-for-mobile-devi)

我`stage.scaleMode = "noScale";`在主`AS`文件的主要功能中添加了有助于解决问题的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T08:51:56.447

这个应该可以帮助你：[LINK](http://active.tutsplus.com/tutorials/workflow/quick-guide-to-creating-and-using-swcs/)

# python - 在plone中将python从2.4升级到2.6

> ID：11842202
> 
> 赞同：0
> 
> 时间：2012-08-07T08:41:51.237
> 
> 标签：python, plone

我正在尝试将我的克隆版本从 3.3.5 升级到 4.0。为此，我去了这个网站：[更新 plone](http://plone.org/documentation/manual/upgrade-guide/version/upgrading-plone-3-x-to-4.0/buildout-3-4)。但我卡在了第一点。在 plone 3 中，我有 2.4 的 python 版本。但是对于 plone 4.x，我需要 python 2.6。如何升级我的 python 版本？在我的 buildout.cfg 我有：

```
$extra-paths = ${instance:zope2-location}/lib/py 
```

在我的versions.cfg中，我有外部依赖项，在那个部分我有`python-openid = 2.2.4`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:09:41.400

要升级python，它实际上取决于底层操作系统（操作系统）。如果特定于操作系统的升级失败，请从[http://www.python.org/download/](http://www.python.org/download/)下载 python并从源代码安装。

您可能需要升级 buildout.cfg 中的一些路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T11:59:05.940

您无需升级 Python，而是并行安装新版本。

# c# - WCF 服务可以使用它自己的服务吗？

> ID：11842203
> 
> 赞同：2
> 
> 时间：2012-08-07T08:41:57.577
> 
> 标签：c#, wcf

我想知道这是否可能：我想创建一组相互通信的服务器。服务器将彼此相似（不是主从场景）。是否可以使用 WCF 做到这一点？如果这是可能的，我将不胜感激朝着正确的方向轻推。（一个很好的例子或在谷歌搜索的正确关键字）

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T08:44:36.713

是的，它可以。只需获取 WSDL，然后生成类。它没有检测到它是“相同的服务”。

不过要小心无限递归。IE 一个调用自身的方法，从而创建一个循环并且永远不会终止它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T08:59:20.553

是的，这是一种可能的情况。

但是，我建议不要直接调用服务 API，而是考虑在服务之间发送消息，例如 Microsoft 消息队列 (MSMQ)。

这将几个服务实例彼此分离，并减少了对服务引用的依赖关系（例如）。这些服务不需要彼此了解太多。

消息一到达，就由指定的处理程序方法处理。由于您总是以这种方式处理不同的服务实例，因此您无需担心 Oskar 提到的任何递归调用。

WCF 可以很容易地配置为使用 MSMQ 作为底层传输介质并**支持它开箱即用。**

一些帮助您入门的文章/教程：

*   MSDN：[MSMQ 和 WCF：入门](http://blogs.msdn.com/b/motleyqueue/archive/2009/05/31/msmq-and-wcf-getting-started.aspx)
*   [Windows Communication Foundation 的消息队列](http://msdn.microsoft.com/en-us/library/ms751490)
*   具有安全通信的更完整方案：[使用 MSMQ 通信和证书安全创建 WCF 服务](http://www.codeproject.com/Articles/326909/Creating-a-WCF-Service-with-MSMQ-Communication-and)（代码项目）
*   [在 ASP.NET 应用程序中利用 MSMQ](http://www.codeguru.com/csharp/.net/net_general/internet/article.php/c19563/Leveraging-MSMQ-in-ASPNET-Applications.htm)

# vb.net - 尝试在 SerialPort_DataReceived 事件下调用多个函数

> ID：11842204
> 
> 赞同：0
> 
> 时间：2012-08-07T08:42:00.373
> 
> 标签：vb.net, function, serial-port

**我正在尝试做的事情：（**大墙的文字，所以我标记了每个部分以使其更易于阅读）

您好，我正在 VS 2010 中申请一个 RFID 控制的磁门锁电路，它通过串行端口接收 RFID 标签 ID，从数据库（SQL server 2005）对其进行身份验证，通过串口，并将当前时间和ID保存到数据库中。

我设计的微控制器电路的工作原理如下：从 RFID 模块读取标签 ID > 按下电路上的按钮后通过串口将标签 ID 发送到 PC > 接收一串数据，“接受”或“拒绝” > 打开红色 LED 或根据接收到的数据串停用磁力锁。

**我做了什么：**

我将上述任务划分为函数 - CheckValidate() 用于从 DB 验证 ID，SendData() 用于将数据字符串发送到我的电路，Intermediate() 用于从 DB 中获取 ID 的相应名称，SaveData() 用于保存 ID、名称和当前时间进入数据库。

**问题：**

当我单独执行它们时，它们每个都可以完美地工作，但是我需要它们在一个事件下一个接一个地执行，即 SerialPort_DataReceived 事件。我尝试在 DataReceived 事件的子项下一个接一个地调用所有函数。我尝试在 DataReceived 事件下调用第一个函数，然后将其他函数相互嵌套。两者都不起作用，第一个函数执行并且我的应用程序停止响应。

**我的完整代码：**

```
Imports System.Data.Sql
Imports System.Data.SqlClient
Imports System.IO.Ports

Public Class Form1
    Dim sqlcon As New SqlConnection
    Dim Chars(11) As Char
    Dim CharsCnt As Integer
    Dim currtime As String
    Dim savename As String

Private Sub SerialPort1_DataReceived(ByVal sender As Object, ByVal e As SerialDataReceivedEventArgs) Handles SerialPort1.DataReceived
        CharsCnt += SerialPort1.Read(Chars, CharsCnt, Chars.Length - CharsCnt)
        If CharsCnt = Chars.Length Then
            Me.Invoke(New SetReceivedText(AddressOf SetText))
            CharsCnt = 0
        End If
End Sub

Delegate Sub SetReceivedText()

Private Sub SetText()
        CheckValidate()
End Sub

Private Sub CheckValidate()
        Dim cmd As New SqlCommand
        cmd.Connection = sqlcon

        If (sqlcon.State = ConnectionState.Closed) Then
            sqlcon.Open()
        End If

        cmd.CommandText = "select Name from masterdata where ID = '" & Chars & "'"

        Dim da As New SqlDataAdapter
        Dim dt As New DataTable

        da.SelectCommand = cmd
        da.Fill(dt)

        If (dt.Rows.Count = 0) Then
            TextBox2.Text = "REJECTED"
            dt.Dispose()
        Else
            TextBox2.Text = "ACCEPTED"
        End If

        sqlcon.Close()

        SendData()
End Sub

Private Sub SendData()

        If SerialPort1.IsOpen Then
            SerialPort1.Close()
        End If

        Using com1 As IO.Ports.SerialPort = My.Computer.Ports.OpenSerialPort("COM2")
            com1.WriteLine(TextBox2.Text)
        End Using

        If TextBox2.Text = "ACCEPTED" Then
            Intermediate()
        End If
End Sub

Private Sub Intermediate()
        TextBox1.Text = Chars

        Dim cmd As New SqlCommand
        cmd.Connection = sqlcon

        cmd.CommandText = "select Name from masterdata where ID = '" & Chars & "'"

        If (sqlcon.State = ConnectionState.Closed) Then
            sqlcon.Open()
        End If

        Dim ds As New DataSet
        Dim da As New SqlDataAdapter
        Dim dt As New DataTable

        da.SelectCommand = cmd
        da.Fill(ds)
        da.Fill(dt)

        DataGridView1.DataSource = ds.Tables(0)

        sqlcon.Close()

        SaveData()
End Sub

Private Sub SaveData()
        currtime = DateTime.Now.ToString("MM/dd/yyyy hh:mm:ss tt")
        savename = DataGridView1.CurrentRow.Cells(0).Value.ToString

        Dim cmd As New SqlCommand
        If (sqlcon.State = ConnectionState.Closed) Then
            sqlcon.Open()
        End If
        cmd.Connection = sqlcon

        cmd.CommandText = "insert into logdata values('" & Chars & "','" & savename & "','" & currtime & "')"

        Dim ds As New DataSet
        Dim da As New SqlDataAdapter

        da.SelectCommand = cmd
        da.Fill(ds)

        sqlcon.Close()
End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        For Each s In System.IO.Ports.SerialPort.GetPortNames()
            ListBox1.Items.Add(s)
        Next s
        Label1.Text = "All COM ports are closed."

        sqlcon.ConnectionString = "Data Source=localhost;User ID=TAS; password = TAS123; database=secure"
        sqlcon.Open()
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Try
            If SerialPort1.IsOpen Then
                SerialPort1.Close()
            End If

            If ListBox1.SelectedIndex = -1 Then
                MessageBox.Show("Please Select a Port.", "", MessageBoxButtons.OK, MessageBoxIcon.Error)
                Exit Sub
            Else
                SerialPort1.BaudRate = 9600
                SerialPort1.DataBits = 8
                SerialPort1.Parity = IO.Ports.Parity.None
                SerialPort1.StopBits = IO.Ports.StopBits.One
                SerialPort1.PortName = ListBox1.SelectedItem.ToString
                SerialPort1.Open()
                Label1.Text = "'" & ListBox1.SelectedItem.ToString & "' COM port is Open"
            End If
        Catch
            MessageBox.Show("Could not open Port, please try again!", "", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End Try
End Sub
End Class 
```

**当我想做的工作时：（**使用按钮单独执行每个功能）

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        SendData()
End Sub

Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
        If TextBox2.Text = "ACCEPTED" Then
            Intermediate()
        End If
End Sub

Private Sub Button4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button4.Click
        SaveData()
End Sub 
```

任何有关如何在一个 DataRecieved 事件下执行所有功能的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:25:30.720

找到了解决办法，问题出在这里：

```
Using com1 As IO.Ports.SerialPort = My.Computer.Ports.OpenSerialPort("COM2")
     com1.WriteLine(TextBox2.Text)
End Using 
```

删除了*Using*语句并保持端口打开。刚用过：

```
SerialPort1.WriteLine(TextBox2.Text) 
```

# sql - 自动在数据库中添加和持久化当前日期

> ID：11842206
> 
> 赞同：0
> 
> 时间：2012-08-07T08:42:05.430
> 
> 标签：sql, sql-server-2008

我想创建一个数据库，它有一个需要自动填充当前日期的日期列。我在 Sql Management Studio 中尝试了以下设计： ![在此处输入图像描述](../Images/5069ffe70b18463c09766550bb7ade30.png)

这种设计的问题是，每次我向表中插入一条新记录时，所有 DateEffective 行都会更改为当前日期，而我只需要更改最后一行。这个问题有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:45:33.517

尝试为此创建触发器：

[扳机](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

# javascript - OKFN气泡树中的数据输入

> ID：11842207
> 
> 赞同：2
> 
> 时间：2012-08-07T08:42:12.107
> 
> 标签：javascript, data-visualization, bubble-chart

我想设置OKFN制作的泡泡树。[https://github.com/okfn/bubbletree/wiki/Bubble-Tree-Documentation](https://github.com/okfn/bubbletree/wiki/Bubble-Tree-Documentation)

现在我想在这里输入一些数据。我想深入三层。但由于某种原因它不起作用。这是html文件中的代码

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title>Mijn financien</title>
    <script type="text/javascript" src="../../lib/jquery-1.5.2.min.js"></script>
    <script type="text/javascript" src="../../lib/jquery.history.js"></script>
    <script type="text/javascript" src="../../lib/raphael.js"></script>
    <script type="text/javascript" src="../../lib/vis4.js"></script>
    <script type="text/javascript" src="../../lib/Tween.js"></script>
    <script type="text/javascript" src="../../build/bubbletree.js"></script>
    <script type="text/javascript" src="http://assets.openspending.org/openspendingjs/master/lib/aggregator.js"></script>   
    <link rel="stylesheet" type="text/css" href="../../build/bubbletree.css" />
    <script type="text/javascript" src="../../styles/cofog.js"></script>

    <script type="text/javascript">

        $(function() {

            var data = {
                label: 'Totaal',
                amount: 100,
                children: [
                    { label: 'Een hele lange zin om te testen hoe dat eruit komt te zien', amount: 10, color: '#D95F02',
                        children: [
                        { label: 'Dingen', amount: 5, color: '#66C2A4' },
                        { label: 'Stuff', amount: 5, color: '#B2E2E2' }
                    ] },
                    { label: 'Dingen en stuff', amount: 80, color: '#1B9E77',
                        children: [
                        { label: 'Dingen', amount: 30, color: '#66C2A4' },
                        { label: 'Stuff', amount: 50, color: '#B2E2E2' }
                    ]
                    },
                    { label: 'Bananen in pyjamas', amount: 10, color: '#7570B3',
                        children: [
                        { label: 'Bananen', amount: 5, color: '#7570B3' },
                        { label: 'Pyjamas', amount: 5, color: '#7570B3',
                        children: [
                        { label: 'Dingen', amount: 3, color: '#66C2A4' },
                        { label: 'Stuff', amount: 2, color: '#B2E2E2' }
                    ] }
                    ]
                    }
                ]
            };

            new BubbleTree({
                data: data,
                bubbleType: 'icon',
                container: '.bubbletree'
            });

        });

    </script>
</head>
<body>
    <div class="bubbletree-wrapper">
        <div class="bubbletree"></div>
    </div>
</body>
</html> 
```

当我移除最深层时它会起作用，但这还不够。我怎样才能使这项工作？

我知道还有一种方法可以使这种可视化与 JSON 一起工作，但我真的不明白这个逻辑。如果那是 B 计划并且有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T19:12:46.190

您可能需要设置一个小提琴，以便确定您遇到的问题。开箱即用，在 BubbleTree GitHub 存储库中找到的演示绝对有效。根据您提供的信息，听起来您在原始库中遇到了一个已知问题，即带有一个（或只有两个）孩子的气泡无法正常工作。

这是有关原始问题的文档： [https ://github.com/okfn/bubbletree/issues/15](https://github.com/okfn/bubbletree/issues/15)

您需要用一些更好的代码替换损坏的代码。在原始文件中，它位于第 521 行。替换此...

```
rad2 = 0 - Math.max(
  //hw *0.8 - tgtScale * (a2rad(node.parent.amount)+a2rad(node.amount)), // maximum visible part
  hw * 0.8 - tgtScale * (a2rad(node.parent.amount) + a2rad(Math.max(node.amount*1.15 +      node.maxChildAmount*1.15, node.left.amount * 0.85, node.right.amount * 0.85))),
  tgtScale*a2rad(node.parent.amount)*-1 + hw*0.15 // minimum visible part
  ) + hw; 
```

... 有了这个...

```
rad2 = 0 - Math.max(
  hw * 0.8 - tgtScale * (a2rad(node.parent.amount) + a2rad(Math.max(node.amount*1.15 + node.maxChildAmount*1.15, (node.left ? node.left.amount : 0) * 0.85, (node.right ? node.right.amount : 0)  * 0.85))),
  tgtScale*a2rad(node.parent.amount)*-1 + hw*0.15 // minimum visible part
) + hw; 
```

这肯定会让你更近一步。您的代码可能还有其他问题，但我可以根据个人经验告诉您，我对开箱即用的实现没有任何其他问题（目前）。

我强烈推荐以下关于 BubbleTree.JS 库的两个教程：

*   [http://fedossov.de/bubbltree-js-tutorial-simple-working-example/](http://fedossov.de/bubbltree-js-tutorial-simple-working-example/)
*   [http://vis4.net/blog/posts/tutorial-bubble-tree/](http://vis4.net/blog/posts/tutorial-bubble-tree/)

祝你好运！

# javascript - 区分jquery和javascript

> ID：11842210
> 
> 赞同：-4
> 
> 时间：2012-08-07T08:42:23.903
> 
> 标签：javascript, jquery

我们如何区分`jquery`和`javascript`.？
我们可以在哪里使用`jquery`not `javascript`，反之亦然。？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T08:43:03.793

jQuery 只是一个 JavaScript 库。所以 jQuery*就是*javascript。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T08:44:26.040

jQuery 是一个 JavaScript 库，因此它是 JavaScript - 只需将 jQuery 视为一种编写更少代码来执行某些 JavaScript 功能和操作的方法。

您是否查看过下载并添加到项目或应用程序中的 jQuery 文件？你在里面发现的是……大量的 JavaScript！

您是在问什么时候使用 jQuery 而不是 JavaScript，反之亦然？如果是这样，您会在网络上甚至在 stackoverflow 上找到很多文章：

[何时使用 Vanilla JavaScript 与 jQuery？](https://stackoverflow.com/questions/4651923/when-to-use-vanilla-javascript-vs-jquery)

[Javascript还是jQuery？](https://stackoverflow.com/questions/6586868/javascript-or-jquery)

[jQuery 与 javascript？](https://stackoverflow.com/questions/2340412/jquery-vs-javascript)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T08:53:20.463

Javascript 是一种编程语言，它是网络上的主导语言 - 每个浏览器都本机支持它。

jQUery 是一个用 Javascript 编写的库。所以基本上 Jquery 是 Javascript，但 Javascript 不是 jQuery。

Jquery 旨在使编程任务更容易，否则在使用本机 javascipt 编写它时需要相当多的努力。它也是一个附加层，可以消除几种浏览器之间的一些不一致和差异（尤其是 Internet Explorer ......）

虽然 javascript 在每个浏览器中都可以使用，但您必须包含 jQuery 脚本才能使用它的功能。

```
<head>                
   <script type="text/javascript" src="/path/to/jquery.js"></script> 
</head> 
```

说明 jQuery 有用性的一个示例是进行 AJAX 调用。在 Javascript 中创建 AJAX-Request 对象如下所示：

```
if (window.XMLHttpRequest) {
    request = new XMLHttpRequest(); // Mozilla, Safari, Opera
} else if (window.ActiveXObject) {
    try {
        request = new ActiveXObject('Msxml2.XMLHTTP'); // IE 5
    } catch (e) {
        try {
            request = new ActiveXObject('Microsoft.XMLHTTP'); // IE 6
        } catch (e) {}
    } 
```

jQuery 代码看起来像这样：

```
$.ajax(/*...some options here...*/); 
```

Jquery 提供了一些简单的功能来让程序员远离烦人的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T08:49:19.237

对于初学者来说，您需要在您的网页中包含 JQuery 文件以便您能够使用它。除此之外，请参阅其他评论（JQuery 是 javascript 的包装器）

它旨在简化 JavaScript 编码的某些方面 取自[JQuery](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)站点的示例

```
 <html>                                                                  
 <head>                                                                  
 <script type="text/javascript" src="jquery.js"></script>          
 <script type="text/javascript">                                         
   // we will add our javascript code here                                     
 </script>                                                               
 </head>                                                                 
 <body>                                                                  
   <!-- we will add our HTML content here -->                                        
 </body>                                                                 
 </html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T08:54:03.550

`JavaScript`是一种语言。`jQuery`是一个框架，`JavaScript`用于帮助`JavaScript`正在执行常见 Web 任务的程序员。
请访问[jquery.com](http://jquery.com)阅读一些内容并阅读“关于”

更多信息：

*   [http://en.wikipedia.org/wiki/Javascript](http://en.wikipedia.org/wiki/Javascript)
*   [http://en.wikipedia.org/wiki/Jquery](http://en.wikipedia.org/wiki/Jquery)

# xml - 用于测试的 XML 数据

> ID：11842212
> 
> 赞同：2
> 
> 时间：2012-08-07T08:42:35.020
> 
> 标签：xml, xpath, dataset

我在 Google 和各种论坛中搜索了大型 XML 文件，但除了 1.0 GB 且对我的需求来说太大的 DBLP 之外，没有找到任何东西。我需要 30-50 MB、100-300 MB 和 500 MB 之类的设置。有人知道吗？

ps 不要提出数据生成器，因为我需要真实数据才能用于有意义的查询测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:00:27.547

最后我找到了好的数据集。它们位于： [http](http://dumps.wikimedia.org/mirrors.html) ://dumps.wikimedia.org/mirrors.html 这些是来自各种 wiki 的数据集，包括 wikipedia。人们可能会发现从 10MB 到 500-600MB 的各种大小的数据集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T08:52:45.057

您可以将整个[openstreetmap 数据库](http://wiki.openstreetmap.org/wiki/Planet.osm)下载为 250GB 的 xml。这应该足够大以进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:21:06.073

您始终可以使用 XSLT 生成任意大小的 XML 文档。

这是一个著名的 XML 文档实例（44GB，3.8GB 压缩）—— **[CityGml 文件](ftp://ftp.fpk.tu-berlin.de/pub/Kolbe/22x22xTestEttenheim_inkl_4xLod4Buildings.zip)**。

# java - 在jsp页面中显示特殊字符

> ID：11842215
> 
> 赞同：4
> 
> 时间：2012-08-07T08:42:56.423
> 
> 标签：java, javascript, jsp, jakarta-ee

如何在 jsp 页面上显示正确的内容或需要在 tomcat 服务器中完成的任何配置...？

在 jsp 处显示：`Hello G�nter`

原创内容： `Hello Günter`

我们执行以下操作，但它不起作用。

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-15"   
     pageEncoding="UTF-8"%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:32:13.167

正如大多数其他人所说，您可能应该检查*文件系统上*实际文件的编码。即使服务器被指示提供 UTF-8，如果文件被损坏，您也会得到错误的输出。

在最常用的工具中，您可以使用 Notepad++ 或 Eclipse 来检查文件的编码。在 Notepad++ 中，打开文件并单击“**编码**”选项卡。确保选中“编码为 UTF-8”。

![Notepad++ 编码选择](../Images/8ae2d9635aca9bbb868cc58cdd4116be.png)

在 Eclipse 中，您需要在项目资源管理器中右键单击该文件。在“**资源**”选项卡中，底部属性是“文本文件编码”。确保在此处选择了 UTF-8。

![在此处输入图像描述](../Images/e4b20a33319a741f305a1ed85515e3da.png)

* * *

仅供参考，我不久前在 Weblogic 上遇到过类似的编码问题。属性中参数的顺序会影响页面的行为方式。[您可以在此处](http://improve.ro/2010/08/weblogic-encoding-issue/)找到更多信息，尽管我认为它不适用于您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:35:59.807

你的jsp页面没问题。因此，请确保您的浏览器的字符编码是 UTF-8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:56:16.343

1.  如果在 Windows 上，请安装其他语言包。
2.  保存以 UTF-8 编码的 JSP 文件。
3.  使 charset 和 pageEncoding 保持一致。
4.  检查浏览器的编码。也将其设置为 UTF-8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:30:49.697

Eclipse 在保存文件时默认使用您的平台编码。如果您在 Windows 上，这很可能不是 UTF-8。要更改此设置，请在 Eclipse 中右键单击文件 (jsp)，单击属性，然后在底部设置保存文件的编码。

要更改 Eclipse 中的默认内容类型，您可以转到 Windows->Preferences 并在 General / Content Types 下设置默认编码以保存为不同的文件类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T09:06:17.433

*   如果是硬编码的 HTML，请使用 HTML 转义序列。
*   如果该值是从 ResourceBundle 中获取的，请使用 unicode 等效项。

# android - 无法在 AndEngine 中捕获屏幕截图

> ID：11842219
> 
> 赞同：0
> 
> 时间：2012-08-07T08:43:10.370
> 
> 标签：android, screenshot, andengine

嗨，这是我的代码。

```
public static void TakeScreenShot(String FileName)
{ 
         Log.d("Screen"," Path "+ FileName);

        scr.capture(CAMERA_WIDTH, CAMERA_HEIGHT, FileName, new IScreenCaptureCallback() {
            @Override
            public void onScreenCaptured(final String pFilePath) { 
                Log.d("Screen","Yes "+ pFilePath);

            }

            @Override
            public void onScreenCaptureFailed(final String pFilePath, final Exception pException) { 
                Log.d("Screen","NO "+ pFilePath+"    "+pException);

            }
        });
    } 
```

第一个日志工作正常。但是没有其他日志正在工作。它没有完成也没有失败。谁能给我一个解决方案？

我保存的路径是“/mnt/sdcard/cmtdd.png”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:28:00.453

以下可能有效..我添加了 scene.attachChild(screenCapture); 到你的代码。它应该在正确的地方使用。

```
public static void TakeScreenShot(String FileName)
{ 
         Log.d("Screen"," Path "+ FileName);

        scene.attachChild(screenCapture); // Attaching screen capture after all rendered.

        scr.capture(CAMERA_WIDTH, CAMERA_HEIGHT, FileName, new IScreenCaptureCallback() {
            @Override
            public void onScreenCaptured(final String pFilePath) { 
                Log.d("Screen","Yes "+ pFilePath);

            }

            @Override
            public void onScreenCaptureFailed(final String pFilePath, final Exception pException) { 
                Log.d("Screen","NO "+ pFilePath+"    "+pException);

            }
        });
    } 
```

# xslt - 孙节点的存在和迭代它们的值

> ID：11842221
> 
> 赞同：1
> 
> 时间：2012-08-07T08:43:10.063
> 
> 标签：xslt, xslt-1.0

我有以下结构：

```
League

----Clubs

---------Club

-------------Players

--------------------Player

--------------------------FirstName

--------------------------Surname etc

--------------------Player

--------------------------FirstName

--------------------------Surname etc

---------Club

-------------Players

--------------------Player

--------------------------FirstName

--------------------------Surname etc

--------------------Player

--------------------------FirstName

--------------------------Surname etc 
```

无论如何 - 我想在我的 xslt 转换中获取所有玩家的姓名（我使用的是 Biztalk Mapper，所以必须坚持使用 XSLT1 - 我更喜欢使用内联 XSLT 而不是映射器工具，因为我正在转换为期望在俱乐部没有球员的情况下为 nil 属性（在这种情况下只有一个俱乐部，但我也保持这种状态以备将来验证）

这是我尝试过的粗略示例：

```
 <xsl:template name="PlayerNames">
    <xsl:element name="ns0:PlayersInLeague">
<xsl:element name="ns0:Team>
    <xsl:choose>
    <xsl:when test="current()/*[local-name()='Players']/*[local-name()='Player']">
    <xsl:for-each select="current()/*[local-name()='Players']/*[local-name()='Player']">
        <xsl:element name="ns0:Player"><xsl:value-of select="current()/*[local-name()='FirstName']"/></xsl:element>
    </xsl:for-each>
    </xsl:when>
    <xsl:otherwise>
        <xsl:attribute name="xsi:nil">true</xsl:attribute>
    </xsl:otherwise>
    </xsl:choose>
    </xsl:element>
    </xsl:element>
    </xsl:template> 
```

我想要这样的输出：

PlayersInLeague

- - 团队

------弗雷德

- - - 大卫

----团队 xsi:nil=true

- - 团队

------亚历克斯

------汤姆

从输入

```
<league>
<clubs>
<club name="London">
<players>
<player>
<firstname>fred</firstname>
</player>
<player>
<firstname>david</firstname>
</player>
</players>
</club>
<club name="Madrid">
<players/>
</club>
<club name="Amsterdam">
<players>
<player>
<firstname>Alex</firstname>
</player>
<player>
<firstname>Tom</firstname>
</player>
</players>
</club>
</clubs>
</league> 
```

我不完全确定 current() 命令在做什么，而且我已经改变了很多次，我现在不知道如何更正它 - 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:16:02.427

在 XSLT 中，您通常希望使用模式匹配来区分不同的情况。在这里，您可以制作两个模板 - 一个用于空俱乐部，另一个用于常规俱乐部。

它很冗长，但一旦你忘记了 for 循环，它实际上就很清楚了。

**编辑：**现在，我认为如果我反向组织模板会更有意义。所以，请从下到上阅读样式表。对不起。;-)

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
    <xsl:template match="player"> <!-- only display firstname contents -->
        <xsl:copy>
            <xsl:apply-templates select="firstname"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="club"> <!-- default club template -->
        <team>
            <xsl:apply-templates/>
        </team>
    </xsl:template>
    <xsl:template match="club[not(players/player)]"> <!-- empty club template -->
        <team>
            <xsl:attribute name="nil" namespace="http://www.w3.org/2001/XMLSchema-instance">true</xsl:attribute>
        </team>
    </xsl:template>
    <xsl:template match="/"> <!-- entry template -->
        <PlayersInLeague>
            <xsl:apply-templates/>
        </PlayersInLeague>
    </xsl:template>
</xsl:stylesheet> 
```

# java - 如何在 UDDI 中测试我们的 java web 服务

> ID：11842222
> 
> 赞同：1
> 
> 时间：2012-08-07T08:43:24.103
> 
> 标签：java, eclipse, web-services

现在我有一个使用 eclipse 在 java 中创建的 web 服务，该 web 服务将连接我们服务器上的一个 sql 数据库。创建 web 服务后，当我尝试使用 UDDI 注册这个 web 服务时，我我把它作为身体部分的输出

“IWAB0135E 发生意外错误。UDDIException 未找到操作的端点引用 (EPR) 是“http://localhost:8080/ResourceA/services/Myservice?wsdl”且 WSA 操作 = 。如果此 EPR 以前可访问，请联系服务器管理员。”

**注意：-** ***任何人都可以发给我在 UDDI 中使用 Web 服务的正确步骤*。** 我的编码方式是正确的吗？如果没有，请让我知道正确的方法。

请找到我的参考资料

```
package pkg;

import java.util.List;
import javax.jws.WebService;
import javax.jws.WebMethod;
import javax.jws.WebParam;
import java.sql.*;
import java.util.ArrayList;

public class Myservice 
{

public List getCustomerId(@WebParam(name = "ID") String ID){
    String user = ...;
    String password = ...;
    String url = ...;
    String OracleDriver = "oracle.jdbc.OracleDriver";
    Connection conn = null;
    PreparedStatement pstmt = null;
    ResultSet rs = null;
    List value = new ArrayList();
    try{

        conn = DriverManager.getConnection(url, user, password);
        pstmt = conn.prepareStatement("select EmployeeCode from SampleTable where ID = '" + ID + " '");
        pstmt.setString(1, ID);
        rs = pstmt.executeQuery();
        while(rs.next())
 {
            value.add(rs.getString("EmployeeCode"));
        }
    }

    catch(SQLException e)
    {
        e.printStackTrace();
    }

    return value;
    }    } 
```

提前致谢！...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:01:10.637

你有任何防火墙问题吗？当 Web 服务部署在 UDDI 中时，它的行为不应该改变。您确定您的 Web 服务已正确部署在 UDDI 中吗？此外，您的数据库是否可以通过 UDDI 的防火墙访问？

# html - 虚线样式叠加效果

> ID：11842224
> 
> 赞同：5
> 
> 时间：2012-08-07T08:43:38.927
> 
> 标签：html, css

我最近偶然发现了这个网站[GrandPixels](http://demo.grandpixels.com/?theme=linguini) 并发现了一个有趣的效果。在幻灯片部分中，您可以看到图像有点点，通过放大我发现这些点不是图像的一部分，而是一种覆盖，我假设是用 CSS 实现的。谁能解释一下这种效果是如何实现的，最好是用css？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:52:14.570

它是用 2x2 叠加透明 PNG 图像完成的，可以从这里提取：
[背景叠加图案](http://grandpixels.com/linguini/wp-content/themes/linguini1.5/images/bg-overlay-pattern.png)

然后将类`slideshow-overlay`应用于元素以使其工作：

```
.slideshow-overlay {
    display: block;
    position: fixed;
    left: 0;
    top: 0;
    overflow: hidden;
    z-index: -99;
    height: 100%;
    width: 100%;
    background: url("images/bg-overlay-pattern.png") left top repeat
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:53:41.863

调用 css 类`.slideshow-overlay`，它使用在图像上方的虚线图像`images/bg-overlay-pattern.png`(2x2)，`background-repeated`带有`posititon:fixed`. 如果您像我在评论中告诉您的那样使用 firebug，您将看到所使用的**CSS**！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:48:29.297

他们使用 div 中的 2x2 像素图像作为背景来实现这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T09:44:31.690

[它是带有图像](http://grandpixels.com/linguini/wp-content/themes/linguini1.5/images/bg-overlay-pattern.png)的 div ，它覆盖幻灯片图像。如果你想做类似的事情，你需要在使用这个 css 滑动之前添加 div：

```
display: block;
position: fixed;
left: 0;
top: 0;
overflow: hidden;
z-index: -99;
height: 100%;
width: 100%;
background: url('../images/bg-overlay-pattern.png') left top repeat; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-09T11:27:30.710

这可以解决问题：

```
.slides .img
{
     background: url(images/slide1.png) no-repeat;
}

.slides .img:after {
                content: "";
                background: url(images/pattern.png) repeat scroll left top transparent;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                position: absolute;
                z-index: -1;
            } 
```

# sql - 如何复制没有记录的表？

> ID：11842228
> 
> 赞同：4
> 
> 时间：2012-08-07T08:43:51.747
> 
> 标签：sql, h2

我正在使用 H2 数据库。我尝试了以下SQL，但记录也被复制：

```
"CREATE TABLE test_tmp AS SELECT * FROM test" 
```

我也试过这个sql：

```
"CREATE TABLE test_tmp AS SELECT * FROM test WITH NO DATA", 
```

但是我遇到了语法错误异常。那么你知道如何复制没有记录的表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:47:19.990

```
Create table testtmp as select * from test where 1=0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:15:11.493

```
 SELECT * INTO test_tmp FROM test WHERE 1=2 
```

# jquery - 为什么当我用 jquery 删除一行时，apex:pageblocktable 会自动刷新？

> ID：11842229
> 
> 赞同：0
> 
> 时间：2012-08-07T08:43:56.037
> 
> 标签：jquery, row, apex-code, visualforce

我的问题是：我有一个带有一些记录的简单 pageblocktable，当我从表中删除一个特定行时......这暂时很好，然后我的页面会自动重新加载完整的 pageblocktable 和所有行。

我的愿望不是删除一条记录，而是让一行的视图成为不可能。

这是我的控制器的代码：

```
public List<E2C_Email__c> emailsmod;

public List<E2C_Email__c> getEmailsmod (){

String id='500T0000004QpWr';

this.emailsmod=[Select id,subject__c,FromName__c,Read__c,CreatedDate,CcAddress__c from E2C_Email__c where Case__c=:id ORDER BY CreatedDate DESC];

return this.emailsmod;

} 
```

这是我的脚本代码（在页面中）：

```
 <script type="text/javascript">            
     $j = jQuery.noConflict();                   
     function hiderows(){    
        var prova= $j('#subject'+ 'a0TT0000003BMmGMAW').parent();     
        var prova2=$j('#subject'+ 'a0TT0000003BMmGMAW').closest("tr");          
        prova2.remove();     
     }                   
</script> 
```

这是页面

```
<apex:form >

    <apex:outputpanel >

        <apex:commandbutton value="prova" onclick="hiderows()" />

    </apex:outputpanel>

</apex:form>
<apex:outputpanel layout="block" style="overflow:auto;height:200px">
    <apex:pageBlock id="pb" mode="maindetail">
        <apex:pageBlockTable value="{!Emailsmod}" var="e" columns="5"
            cellspacing="5" onRowClick="show(this)">

            <apex:column headerValue="From" width="22%">
                <span id="from{!e.id}"> {!e.FromName__c} </span>
            </apex:column>
            <apex:column headerValue="Subject">
                <span id="subject{!e.id}"> {!e.Subject__c} </span>
            </apex:column>
            <apex:column headerValue="Date" width="7%">
                <span id="date{!e.id}"> <apex:outputText value="{0,date,dd/MM/yy hh:mm}">
                    <apex:param value="{!e.CreatedDate}" />
                </apex:outputText> </span>
            </apex:column>

        </apex:pageBlockTable>
    </apex:pageBlock>

</apex:outputpanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:40:42.430

试试这个技巧 - 在执行 JavaScript 函数后添加 return false ：

```
<apex:commandButton value="prova" onclick="hiderows(); return false;"/> 
```

避免页面重新加载的其他方法是添加一个虚拟的 reRender 标记：

```
<apex:commandButton value="prova" onclick="hiderows()" reRender="none" /> 
```

您必须重新渲染“某物”以避免页面重新加载。否则命令按钮将重新加载整个页面。在我们的例子中，我们将重新渲染“nothing”。

# jaxb - 关于在解组过程中包含 Collection 的 JAXB 查询

> ID：11842235
> 
> 赞同：1
> 
> 时间：2012-08-07T08:44:10.130
> 
> 标签：jaxb, jaxb2

**我正在使用 JAXB，这是我的 XML 请求，下面是 Biding 类**

```
<request user="123" Katha="456" />

@XmlRootElement(name = "request")
@XmlAccessorType(XmlAccessType.FIELD)
public class Postdata {

    @XmlAttribute
    private String user;

    @XmlAttribute
    private String Katha;

    // Getters and Setters 

} 
```

以上工作正常。

现在我们在请求 XML 中进行了更改，它将位于

```
<request user="123" Katha="456"> 
    <Specifier name = "One"/>
    <Specifier name = "Two" />
    <Specifier name = "Three" />
</request> 
```

所以请在解组过程中告诉我是否可以将说明符作为一个集合包含到我的 Jaxb 类中？

```
@XmlRootElement(name = "request")
@XmlAccessorType(XmlAccessType.FIELD)
public class Postdata {

    @XmlAttribute
    private String user;

    @XmlAttribute
    private String Katha;

    // Getters and Setters 

@XmlElemet
    private List<Specifier> 
```

我可以按照上面的方法吗？？

请告诉我 ？？

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:43:54.340

您可以按如下方式映射您的用例：

**发布数据**

```
@XmlRootElement(name = "request")
@XmlAccessorType(XmlAccessType.FIELD)
public class Postdata {

    @XmlAttribute
    private String user;

    @XmlAttribute(name="Katha")
    private String Katha;

    @XmlElement(name="Specifier")
    private List<Specifier> specifiers;

    // Getters and Setters 

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)

# svn - TFS 与 SVN 命令

> ID：11842238
> 
> 赞同：8
> 
> 时间：2012-08-07T08:44:23.903
> 
> 标签：svn, tfs, tortoisesvn

我是一名开发人员，在过去 2 年中使用 TFS 2010 处理从源代码控制到工作项、合并、分支、搁置集、门控签入、离场签入和签出的所有事情。我对所有这些都非常熟悉和舒适。

现在我必须在 Tortoise SVN 上进行项目。我之前没有使用 SVN 的经验。我已经搜索了所有 SVN 和 TFS-2010 的类似命令，但除了成本和特性比较以在两者之间进行选择外，没有找到合适的文章。

任何人都可以分享类似于 TFS 的 SVN 技术术语/命令吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-07T09:29:56.117

以下是一些 TFS 术语及其在 SVN 中的类似物。重要的是要注意 SVN 只是一个源控件 - 没有错误跟踪或工作跟踪功能（没有工作项，没有项目集合等）。

下面的列表绝不是 TFS 或 SVN 术语的完整列表。我刚刚命名了出现在 Tortoise SVN 上下文菜单中的大多数项目，并在 TFS 中搜索了相应的术语。

```
 TFS               |            SVN
--------------------------------------------------------
Version                    | Revision
Get Latest Version         | Update
Check In (Pending Changes) | Commit
View History               | Show log
Source Control Explorer    | Repo browser
Compare*                   | Check for modifications
View History               | Revision graph
Resolve conflicts*         | Resolve
Get Specific Version       | Update to revision
Rename                     | Rename
Delete                     | Delete
Undo Pending Changes       | Revert
Undo Pending Changes*      | Clean up
Lock                       | Get Lock
Unlock                     | Release Lock
Branch                     | Branch/Tag
Move                       | Switch
Merge                      | Merge
Move                       | Relocate
Shelve*                    | Patch 
```

`*`意味着它不是一个直接的类比，只是一个类似的概念。当然，在文档中更详细地检查所有这些命令可能是个好主意：对于[Subversion](http://svnbook.red-bean.com/)和对于[Tortoise SVN](http://tortoisesvn.net/docs/release/TortoiseSVN_en/index.html)。

# ruby - 从 Rails 运行 Ruby 进程抱怨 Gemfile

> ID：11842241
> 
> 赞同：0
> 
> 时间：2012-08-07T08:44:30.703
> 
> 标签：ruby, ruby-on-rails-3

我正在使用系统命令从我的 rails 应用程序运行一个 ruby​​ 进程（gem 的二进制文件）。

这是它的样子：

```
system('someprocess') 
```

其中 someprocess 是一个 ruby​​ bash 脚本。someprocess 是 somegem Gem 的一部分。

**问题**：为什么我会得到以下信息？

> somegem 不是捆绑包的一部分。将其添加到 Gemfile。（宝石::加载错误）

当进程在我的 Rails 应用程序之外运行并且不需要了解 Gem 时。就 Rails 应用程序而言，它只是一个外部进程，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:14:08.780

您可以尝试告诉 Bundler 使用干净的环境：

```
Bundler.with_clean_env do
  system 'someprocess'
end 
```

# c - 为什么 dup2 可以在这里工作？

> ID：11842242
> 
> 赞同：0
> 
> 时间：2012-08-07T08:44:35.430
> 
> 标签：c, linux, kernel, dup2

我从 APUE 得到了这个代码片段，

```
if (dup2(clfd, STDOUT_FILENO) != STDOUT_FILENO ||
          dup2(clfd, STDERR_FILENO) != STDERR_FILENO) {
            syslog(LOG_ERR, "ruptimed: unexpected error");
            exit(1);
        } 
```

这会将所有输出、stderr 和 stdout 重定向到远程套接字，该套接字可通过 clfd 写入。

但那怎么行呢？您将两个 FD 重定向到一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:48:26.980

> 但那怎么行呢？您将两个 FD 重定向到一个

这没有问题。[标准](http://pubs.opengroup.org/onlinepubs/9699919799/functions/dup.html)说：

> ```
> int dup2(int fildes, int fildes2); 
> ```
> 
> 该`dup2()`函数应使文件描述符`fildes2`引用与文件描述符相同的打开文件描述`fildes`。如果 fildes2 已经是一个有效的打开文件描述符，它应该首先被关闭。

它从来没有提到任何关于引用同一目的地的多个描述符是非法的。

内核只需将进程中的多个文件描述符指向系统范围打开文件表中的同一条目。

# java - 从 gwt 返回值到 javascript-jsni

> ID：11842244
> 
> 赞同：0
> 
> 时间：2012-08-07T08:44:36.130
> 
> 标签：java, gwt, jsni

我正在尝试通过 JSNI 从 GWT 中的 java 函数返回一个值到 javascript

```
 static public int call() { return 20; }

    public static native int jstest() /*-{
        try{
            val=@com.xxxx.package::call()();
            window.alert("Val:"+val);
            return $wnd.val;
        } catch(e) {
            console.error(e.message);
        }
    }-*/; 
```

在 javascript 中`alert(document.val);`，我最终得到了 Exception **JSNI 方法返回的不是 int 的东西**。我想我在将值返回给 javascript 时搞砸了。请让我知道我哪里出错了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:35:06.620

通过将 val 声明为全局，它确实被分配到了 window 对象（注意：不是 $wnd 对象）。有时使用 GWT，这两个是相同的，有时它们不是（这取决于您使用的链接器）。

这就是为什么你需要改变你的代码来阅读

```
$wnd.val = @com.xxxx.package::call()(); 
```

或删除全局变量：

```
var val = @com.xxxx.package::call()();
return val; 
```

# cakephp-2.0 - Cakephp 2.0：Google Weather API + Xml 的错误

> ID：11842250
> 
> 赞同：0
> 
> 时间：2012-08-07T08:45:00.987
> 
> 标签：cakephp-2.0, google-weather-api

我为我的项目创建了一个加载 Google Weather API 的元素。在本地它工作得很好。当我上传它并把它交给我的朋友尝试时，问题就出现了。

元素的代码如下

```
<?php
Configure::write('debug', 2);

$xml = simplexml_load_file('http://www.google.com/ig/api?weather=name_city');
$information = $xml->xpath("/xml_api_reply/weather/forecast_information");
$current = $xml->xpath("/xml_api_reply/weather/current_conditions");
$forecast_list = $xml->xpath("/xml_api_reply/weather/forecast_conditions");

?>
<html>
<head>
<title>Google Weather API</title>
</head>
<body>
<h1><?= print $information[0]->city['data']; ?></h1>
<h2>Today's weather</h2>
<div class="weather">
<?php $icon_today = (string) $current[0]->condition['data'];?>

<?php echo $this->Html->image('tick/'.$icon_today.'.png');?>
        <span class="condition">
        <?= $current[0]->temp_c['data'] ?>&deg; C,

        </span>
 </div>
<h2>Forecast</h2>
    <? foreach ($forecast_list as $forecast) : ?>
    <div class="weather">
    <?php $icon = (string) $forecast->condition['data'];?>
      <?php echo $this->Html->image('tick/'.$icon.'.png',array('width' => '45'));?>

        <div><?= $forecast->day_of_week['data']; ?></div>
        <span class="condition">
        <?php
        $low = (int) $forecast->low['data'];
        $high = (int) $forecast->high['data'];
        $low_celsius = (int) (($low - 32) * (5/9));
        $high_celsius = (int)(($high - 32) * (5/9));
        ?>
            <?= $low_celsius ?>&deg; C - <?= $high_celsius ?>&deg; C,
            <?= $forecast->condition['data'] ?>
        </span>
 </div>
<? endforeach ?>
</body>
</html> 
```

当我上传它时，我收到了这些消息

```
Warning (2): simplexml_load_file() [function.simplexml-load-file]:     
http://www.google.com/ig/api?weather=name_city: parser error : Document is empty     
[APP/View/Elements/weather.ctp, line 5]
Warning (2): simplexml_load_file() [function.simplexml-load-file]:   
[APP/View/Elements/weather.ctp, line 5]
Warning (2): simplexml_load_file() [function.simplexml-load-file]: ^ 
[APP/View/Elements/weather.ctp, line 5]
Warning (2): simplexml_load_file() [function.simplexml-load-file]: 
http://www.google.com/ig/api?weather=name_city:1: parser error : Start tag 
expected, '<' not found [APP/View/Elements/weather.ctp, line 5]
Warning (2): simplexml_load_file() [function.simplexml-load-file]:  
[APP/View/Elements/weather.ctp, line 5]
Warning (2): simplexml_load_file() [function.simplexml-load-file]: ^ 
[APP/View/Elements/weather.ctp, line 5]
Fatal error: Call to a member function xpath() on a non-object in 
/home/wwwsite/public_html/testing/app/View/Elements/weather.ctp on line 6 
```

**name_city**具有实际价值。当我在另一台计算机上尝试时，其他类型的错误（例如**$forecast->day_of_week['data']**未被识别为有效变量）。似乎在线版本无法从 Google Weather 接收数据，因此结果为空。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T18:22:02.927

Google 计划关闭 iGoogle 和相关 API。从 8 月 27 日起已[停止响应天气 API](http://status-dashboard.com/32226/47728)。您可以使用[wunderground.com](http://api.wunderground.com/weather/api/d/docs?d=resources/code-samples)的 api

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:54:15.953

当前对您正在使用的 Google Weather API 有间歇性的 403 Forbidden 响应。请参阅[Google Weather API 403 错误](https://stackoverflow.com/questions/11878143/google-weather-api-403-error/)

403 响应可能导致您在结果的第一行中看到空文档。现在在本地和服务器上再次重新运行代码，看看问题是否是间歇性的。

间歇性 403 响应的原因未知，但自 2012 年 8 月 7 日以来一直存在问题，这是您发布此问题的时间。

# objective-c - CGRect制作替代品

> ID：11842257
> 
> 赞同：6
> 
> 时间：2012-08-07T08:45:25.903
> 
> 标签：objective-c, c, struct, cgrect, cgrectmake

`CGRectMake()`我已经看到了这种用于初始化`CGRect`变量的替代方法：

> CGRect 框架 = (CGRect){0,0,10,10};

我的问题是，如何`CGRect frame = (CGRect){0,0,10,10};`工作？幕后发生了什么？看起来一个 c 风格的数组正在被初始化（`{x,y,w,h}`），然后被转换为一个`CGRect`结构 - 这是正确的吗？如果是这样，如何将 ac 样式数组转换为结构？

注意我不是在问是否适合使用上述替代方法`CGRectMake()`，我只是想了解它为什么/如何工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T09:03:48.480

这就是所谓的复合字面量。您可以在 Mike Ash 的这篇文章中阅读更多关于它们的信息：[Friday Q&A 2011-02-18: Compound Literals](http://www.mikeash.com/pyblog/friday-qa-2011-02-18-compound-literals.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:01:04.067

你可以这样使用：

```
CGRect rect = CGRectFromString(@"{{0, 0}, {612, 892}}"); // it contents { CGPoint origin;CGSize size;};
NSLog(@"rect : %@",NSStringFromCGRect(rect)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-09T09:17:27.047

检查这个：

```
CGPoint origin = {10, 20};
CGSize size = {100, 200};
CGRect rect = {origin, size}; 
```

# xcode - Xcode/Interface Builder 崩溃

> ID：11842258
> 
> 赞同：2
> 
> 时间：2012-08-07T08:45:26.760
> 
> 标签：xcode, crash

我在 Mountain Lion 上使用 Xcode 4.4，无法执行任何 IB 相关任务。将控件拖到 xib 文件，将 IBoutlet 连接到代码，无论我做什么，Xcode 崩溃任何线索将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:47:59.400

你的情况听起来和我昨天发生的事情非常相似：

[编辑情节提要时 Xcode Interface Builder 崩溃](https://stackoverflow.com/questions/12580881/xcode-interface-builder-crashes-when-i-edit-storyboard)

值得查看控制台日志以查看报告是否相同。如果是，请尝试使用“使用自动布局”复选框。

# php - 从 php 函数返回 html 的最佳方法？

> ID：11842265
> 
> 赞同：5
> 
> 时间：2012-08-07T08:45:45.637
> 
> 标签：php, html

所以我之前问了一个类似的问题，现在我更困惑了，所以我会用不同的方式问它......

我要做的是抽象我的 php 并将我的验证器中用作错误消息的 html 位放入函数中，这些函数将 html 返回到页面中需要它们的位置。

我现在拥有的是：

```
<section>
<?php 
if($errMsg)
{
    errMsg();
}
?>
</section>

<?php
function errMsg()
{
       ?>
       <section>
           <p>O crap!  There was an error</p>
       </section>
       <?php
}
?> 
```

但是在我之前提到的问题中，有人告诉我这样做是“肮脏的黑客”，在这种情况下最好使用 return 。但是要使用 return 我需要将所有返回的 html 分配给一个 var 并且为此我需要将 html 放在一个字符串中。我宁愿避免在一个字符串中放置两行以上的 html，因为这样做需要大量的引号。

所以我想我要么使用heredoc语法，要么使用ob_start/ob_get_clean函数。我想知道的是。

1 我什至需要像这样抽象我的代码吗？
2 如果是这样，哪种方式是最佳实践方式？和/或
3 我是否应该放弃 Web 开发并返回披萨外卖？:-\

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T08:51:57.403

1：你不需要，但如果做得好，你可以。

2：要做到这一点，我建议你`EOF`在你的 PHP 错误函数中使用，它看起来像这样：

```
function errMsg()
{
       $error = <<<EOF 
<section>
<p>O crap!  There was an error</p>
</section>
EOF;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T08:51:01.920

我不会返回任何 HTML。只需从函数返回错误消息，然后在更合适的位置构建 html。例如模板内部。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T08:51:24.970

1.  是的，当然，你的工作方式没有灵活性。
2.  理想情况下，您应该将所有 HTML 与 PHP 分开，至少是函数 - 唯一可以远程接受的地方是在使用 PHP 来显示函数输出的视图中。
3.  比萨！开个玩笑，但披萨永远都不够！？

看看 Zend 框架[http://framework.zend.com/manual/en/zend.application.quick-start.html](http://framework.zend.com/manual/en/zend.application.quick-start.html)他们将没有被捕获的错误消息转发给错误处理程序，然后使用它自己的视图呈现错误。

或 w/oa 框架：

```
try{
     //do work here and throw exception on error
}
catch (Exception $e)
{
     //do error logging/display error
     //or preferably load another class which handles your error and produces output
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T08:52:23.600

你可以这样做：

```
<?php if($errMgs){ ?>
<section>
    <p><?php echo errMsg(); ?></p>
</section>
<?php } ?> 
```

一般来说，我尽量不要通过 PHP 回显 HTML。为什么？因为如果设计师需要处理我的代码，我不希望他/她担心我的函数会吐出什么 HTML。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-07T08:57:07.950

将 html 代码移动到单独的文件 error.php 中。之后，您只需捕获输出：

```
function errMsg()
{
    ob_start();
    include '/path/to/error.php';
    return ob_get_clean();
}

// ...

echo errMsg(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-07T09:02:59.090

首先，我同意上面的帖子。不要格式化，只需让函数返回裸露的错误消息，如果您需要在要显示它的位置适当地格式化它。

其次，我总是发现能够快速打开和关闭错误和测试消息很有用。由于我的大部分代码都是面向对象的，而且我可能只想一次从一个对象中弹出消息，所以我的类中通常有这样的东西：

```
class userObject
{
    public $history;// = historyObject;
    public $userName;
    public $userRelation;
    public $userCode;
    private $mySQLAccessData;
    private $isDebug=false;

    public function makeHistoryObject($KPI, $KPIType)
    {
        if($this->isDebug){echo "Having a go at creating ".$this->userName.".<br>";}
        $this->history = new historyObject($this->userCode, $KPI, $KPIType);
    }
} 
```

我滑动了一个`private`元素，`false`默认情况下我将其保留在其中。如果我需要调试或进行更改，我将其设置为，我的`true`所有错误/日志消息都会整齐地显示在屏幕上。我知道这并不能直接回答您的问题，但我确实发现它*非常*方便，在您开始时可能值得。它肯定胜过注释掉然后取消注释可能数十条消息。您可以将这些输出留在对象中而无需担心，并让它们显示您需要的所有细节。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T09:09:18.957

如果您在某些时候可能有很多错误，那么就这样做

```
<?php
$errors = array();

if (!$item = getItem($id)) {
    addError("No item $id");
}

if (!updateUser($user, $id)) {
    addError("Can not update user");
}

if (!updateItemPicture($id, $picture)) {
    addError("Can not add picture to $id");
}

function addError($error) {
    global $errors; $errors []= $error;
}

function hasErrors() {
   global $errors; return count($errors);
}

function printErrors() {
   if (!hasErrors()) return;

   print "<ul class='errors'><li>" . join("</li><li>", $errors) . "</li></ul";
}

printErrors();
?> 
```

这是以防您不使用面向对象的方式。并假设所有错误都不是致命的并且被`try {} catch () {}` 块捕获。

# java - 如何从 JSP 页面返回到 index.html（登录页面）？

> ID：11842267
> 
> 赞同：1
> 
> 时间：2012-08-07T08:45:49.350
> 
> 标签：java, html, jsp, web-applications, servlets

我从这里开始：

![在此处输入图像描述](../Images/c9fd6ea3f6076b3cedaaa32ff2722b01.png)

使用该代码：

```
<!DOCTYPE html>
<html>
<head><title>Bank application</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>
<table class="title">
  <tr><th>Web Bank application</th></tr>
</table>

<br/>
<fieldset>
  <legend>Login Page - please enter your Username and Password</legend>
  <form action="loginPage"> 
    Username: <input type="text" name="username"><br>
    Password : <input type="text" name="password"><br>
    <input type="submit" value="Login">
  </form>
</fieldset>

<br/>
<br/>
<br/>

<fieldset>
  <legend>Registration</legend>
  <form action="register"> 
    First name: <input type="text" name="firstName"><br>
    Last name : <input type="text" name="lastName"><br>
    Address   : <input type="text" name="address"><br>
    ID-number : <input type="text" name="idnumber"><br>
    User-Name : <input type="text" name="userName"><br>
    Password  : <input type="text" name="password"><br>
    <input type="submit" value="Register">
  </form>
</fieldset>

<br/>
<br/><br/><br/><br/><br/><br/>
</body></html> 
```

当我从一页移动到另一页时，我到达了这里：

![在此处输入图像描述](../Images/91ef6b6817f177e1b46cb95a8fee326f.png)

使用该代码：

```
<!DOCTYPE html>
<html>
<head><title>Authentication failed - a problem has occurred!</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>
<h1>Sorry , but you are not registered to our bank!</h1>

<fieldset>
  <legend>Please press here to continue</legend>
  <form action="goingBack"> 
    <input type="submit" value="Press here">
  </form>
</fieldset>

</body></html> 
```

我想回到`index.html` - 程序启动时看到的第一页（上面的第一张图片）。

我怎样才能做到这一点 ？我怎样才能转发回来`index.html`？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:51:19.507

只需在最后一个 HTML 中添加上一页的链接：

```
<!DOCTYPE html>
<html>
<head><title>Authentication failed - a problem has occurred!</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>
<h1>Sorry , but you are not registered to our bank!</h1>

<fieldset>
  <legend>Please press here to continue</legend>
  <form action="goingBack"> 
    <input type="submit" value="Press here">
  </form>
</fieldset>

 <a href="index.jsp">Go Back</a> <!-- add this -->

</body></html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:48:08.460

你只需要javascript。`/index.html`5秒后重定向到：

```
setTimeout('window.location='index.html';', 5000); 
```

`setTimeout()`是一个javascript函数，它设置一个定时器以在给定的时间段后触发somehting。`window.location`是一个变量，允许您更改当前页面的 URL（从而重定向）。

# wxpython - 发出 URL 请求时应用程序冻结

> ID：11842269
> 
> 赞同：0
> 
> 时间：2012-08-07T08:45:51.780
> 
> 标签：wxpython

我正在制作一个小型应用程序，我在其中使用 urllib2 将一些参数发布到 8 个不同的站点，使用命令行界面，它工作正常，但是当我与 wxPython 一起使用时，应用程序冻结并显示没有响应。当我曾经读取一些文件时也发生了同样的事情，但是我克服了它来使用 wx.Yield() 读取文件，但似乎 wx.Yield() 不适用于 URL 请求。

我正在使用 BOA 构造函数来构建框架。

大致程序是这样的：

```
def buildURL(url, params):
    #url built here 
    return url

def url1(self, value):
    #self.buildURL(url, params)
    #makes the request
    #searches if there was a valid response
    #if yes, show it to txtCtrl2

#same for url2 to url8

def onClickCheck(self, event):
    #get the value from txtCtrl1
    #Do the required things
    AppUrlLibrary = [self.url1(value)...self.url8(value)]
    for i in AppUrlLibrary:
        if self.abort:
            break
        else:
            wx.Yield() #this seems not working
            i 
```

我需要一些帮助，我坚信，我的编码结构是错误的！我需要一些指导。

所有显示和响应都发送到 txtCtrl2。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:38:13.603

问题是你正在做的是阻塞 GUI 的主循环。换句话说，这是一项长期运行的任务。这意味着您可能需要使用线程、队列或类似的东西来解决这个问题。有 3 种线程安全方法：wx.CallAfter、wx.CallLater 和 wx.PostEvent。如果您尝试在不使用线程中的其中一个的情况下与您的 GUI 对话，那么您将遇到问题。[wxPython wiki](http://wiki.wxpython.org/LongRunningTasks)上有几个示例，或者您可以阅读我的[教程](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)。

# sql - cakephp sql 日志正确，不返回数据

> ID：11842272
> 
> 赞同：0
> 
> 时间：2012-08-07T08:46:19.297
> 
> 标签：sql, database, cakephp

我正在创建一个简单的视图函数，在检查我的 sql 日志是否正确之后，但是我的视图没有打印信息。

```
SELECT `AccountsUser`.`id`, `AccountsUser`.`account_id`
  FROM `pra`.`accounts_users` AS `AccountsUser`
 WHERE `user_id` = 14   

SELECT `Template`.`id`, `Template`.`name`, `Template`.`description`,
       `Template`.`account_id`
  FROM `pra`.`templates` AS `Template`
 WHERE `Template`.`account_id` = (10) 
```

但`account_id=10`它没有打印出与`account.id`

```
function view(){
    $this->set('title_for_layout', 'View Templates');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.jpg');
    $this->layout='home_layout';

     $this->Template->unbindModel(array('belongsTo'=>array('Account')));
    $templates = $this->Auth->user('name');
    $accounts=$this->User->AccountsUser->find('list', array('fields'=>array('id', 'account_id'),'conditions' =>  array('user_id' => $this->Auth->user('id'))));       
    $templates=$this->Template->find('all', array('conditions' => array('Template.account_id' => $accounts)));

    $this->set('template', $templates);
    $this->set('account'. $accounts);} 
```

这是视图

```
<table width="100%" border="1">

            <table width="100%" border="1">
                <tr>
                    <th>Template Name</th>
                    <th>Template Description</th>

                </tr>

                <?php foreach($template as $templates): ?>
                    <tr>
                        <td align='center'><?php echo $templates['templates']['id']; ?> </td>
                        <td align='center'><?php echo $templates['templates']['name']; ?> </td>

                    </tr>
                 <?php endforeach; ?>

            </table> 
```

id 喜欢打印与`account.id`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:54:50.593

您应该尝试以下方法：

```
 <table width="100%" border="1">
            <tr>
                <th>Template Name</th>
                <th>Template Description</th>

            </tr>

            <?php if(!empty($template))
                  {
                    foreach($template as $templates)
                    {?>
                        <tr>
                           <td align='center'><?php echo $templates['Template']['id']; ?> </td>
                           <td align='center'><?php echo $templates['Template']['name']; ?> </td>
                        </tr>
                 <?php 
                    }// end of foreach
                  }
                  else
                  {?>

                        <tr> <td>No Templates Found.</td></tr>

                  <?php
                  }?>
        </table> 
```

# ruby-on-rails - 在覆盖控制器时设计可验证的令牌

> ID：11842273
> 
> 赞同：2
> 
> 时间：2012-08-07T08:46:20.623
> 
> 标签：ruby-on-rails, authentication, devise

我试图通过将控制器放在命名空间路由（“API”）中来覆盖设计，并且我需要使用令牌可验证功能。我有2个问题，

首先，如何设置默认设置来理解 params[:user] 和 params[:api_user]。目前我可以使用 :api_user 键在数组中发送参数。如果我尝试使用 :user 进行操作，则设计无法识别参数，这似乎是合乎逻辑的。

其次，当我像这样覆盖 sessionController 时：

```
class Api::SessionsController < ::Devise::SessionsController    
     def create
         super
     end
end 
```

如何取回对创建的会话或用户的引用，以使我能够操作创建的可验证令牌。

我已经搜索了很多关于设计定制的主题，发现了类似的问题，但不是这个问题。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:33:40.473

关于你的第一个问题，你可以使用这样的东西

```
 namespace :api, :defaults => { :format => 'json' } do
    devise_for :users, :singular => "user", :controllers => { 
      :sessions => 'devise/sessions',
      :registrations => 'devise/registrations'
    }
  end 
```

# ios - 修改 viewWithTag

> ID：11842274
> 
> 赞同：0
> 
> 时间：2012-08-07T08:46:21.317
> 
> 标签：ios, uiview, subviews

在我的 iPad 应用程序中，我有一个`UIView`带有多个子视图，每个子视图都有不同的标签值。我想搜索具有特定标签值的子视图。目前我正在使用 for() 循环来循环查找`UIView`具有所需标记的特定对象。

```
 for (int i=0; i<[[myView subviews] count]; i++) {

    if ([[[myView subviews] objectAtIndex:1] tag]==1) {

        //assign that view

    }
} 
```

我只是想知道，是否`[myView viewWithTag:1]`也使用相同的方式来查找特定的标记视图以及哪种方式更快

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:04:56.423

不完全相同，`viewWithTag`使用深度优先搜索来查找子视图。换句话说，它递归地扫描所有子视图，直到找到`UIView`一个标签等于参数的。

另请参阅[Apple 官方文档](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaViewsGuide/WorkingWithAViewHierarchy/WorkingWithAViewHierarchy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:02:51.600

这取决于您的代码。假设您动态创建更多数量的子视图（例如超过 10 个），您可以使用您现在编写的内容。假设您知道子视图是什么，或者您创建的子视图数量较少（例如少于 10 个），那么您可以使用`[myView viewWithTag:1]`.

# ruby-on-rails-3 - haml 中的 Ruby 块代码

> ID：11842275
> 
> 赞同：7
> 
> 时间：2012-08-07T08:46:25.267
> 
> 标签：ruby-on-rails-3, haml

下面的代码正在工作

```
-@items.each do |item|
 %tr
  %td
   =item.quantity
   times
  %td= item.product.title
 end 
```

但是我想使用`{ }`而不是`do ... end`. 可能吗？

```
-@items.each { |item|
 %tr
  %td
   =item.quantity
   times
  %td= item.product.title
 } 
```

由于某种原因，它会引发异常。我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T21:45:13.280

在您的工作示例中，该`end`行被视为原始文本，并将包含在您的输出中。这是有效的，因为您实际上没有`end`关键字。如果您将此行更改为`- end`- 即添加连字符（并确保您的缩进正确） - 您将看到如下错误：

```
Syntax error on line 9: You don't need to use "- end" in Haml. Un-indent to close a block:
- if foo?
  %strong Foo!
- else
  Not foo.
%p This line is un-indented, so it isn't part of the "if" block 
```

请注意，Haml 并不总是不允许`end`关键字，只有`end`它自己。您可以将它们与语句修饰符一起使用，例如：

```
- @things.each do |thing|
  %p= thing.to_s
-end unless @dont_show_things 
```

或者如果你想利用块的结果：

```
= @things.map do |thing|
  - do_something_with(thing)
-end.join(",") 
```

至于使用`{}`，你不能。当 Haml 将模板编译为 Ruby 时，会添加[硬编码字符串`end`以根据需要关闭任何块](https://github.com/haml/haml/blob/3.1.6/lib/haml/compiler.rb#L74)。可以修改 Haml 以使用`do..end`or `{}`，但额外的复杂性可能不值得。这种方式更适合`do...end`用于多行块和`{}`单行块的常见 Ruby 习惯用法。

如果`{}`由于运算符优先级的某些问题而需要使用它可能是创建辅助方法的标志。您的 Haml 模板（或任何语言的模板）不是复杂逻辑的最佳位置，最好将其移动到真正的 Ruby 文件中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T08:49:49.217

你不要把任何`end`东西放在 HAML 中。缩进是语义的。因此，您的代码应为：

```
- @items.each do |item|
  %tr
    %td
      = item.quantity
      times
    %td= item.product.title 
```

编辑：使用`{`将引发语法错误。

# asp.net-mvc - zWeatherFeed 选项？

> ID：11842280
> 
> 赞同：1
> 
> 时间：2012-08-07T08:46:58.937
> 
> 标签：asp.net-mvc, weather, yahoo-weather-api

我使用 zWeatherFeed 来显示天气，但我找不到任何示例来更改选项。

```
<style>
    .weatherItem{padding-left:200px;}
    .odd{height:130px;}
    .weatherCity{font-weight:bold;}
    .weatherFeed{height: 130px; width: 100%;}
</style>
<script type="text/javascript">
    $(document).ready(function () {
        $('#test').weatherfeed(['TUXX0015']);
    });
</script>
<div id="test">
</div> 
```

例如，我也想在第二天展示。有没有关于这个天气插件或任何替代天气插件的例子？我更喜欢使用 zWeatherFeed，因为这个插件有很好的可视化。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:15:51.187

zWeatherFeed 插件目前无法显示第二天的预报（尽管提供了完整预报的链接）。可用的选项有：

*   unit - 指定要返回的单位：'c' - 摄氏度，'f' - 华氏度
*   image - 如果为 true，则在背景中显示天气状况的图像。
*   highlow - 如果为 true，则包括每个项目中的高值和低值。
*   wind - 如果为 true，则在每个项目中包括风向和强度。
*   链接 - 如果为真，包括指向 Yahoo! 上的完整预测的链接 网站。
*   showerror - 如果为 true，则在提要不可用或位置无效时显示消息。
*   linktarget - 指定预测链接的目标（'_blank'、'_self'、'_top'、framename）。
*   woeid - 如果为真，则使用 Yahoo! 位置的 WOEID 标识符

[http://www.zazar.net/developers/jquery/zweatherfeed/](http://www.zazar.net/developers/jquery/zweatherfeed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T13:03:54.690

`<script type="text/javascript"> $(document).ready(function () { $('#weatherDiv').weatherfeed(['EIXX0048'], { forecast: true }); }); </script>`

如果您将选项 forecast:true 添加到该功能的选项中，它将显示未来 5 天的预测。可以在以下位置查看完整示例： [http ://www.zazar.net/developers/jquery/zweatherfeed/example_forecast.html](http://www.zazar.net/developers/jquery/zweatherfeed/example_forecast.html)

# java - 托管 H2 数据库并接受连接

> ID：11842284
> 
> 赞同：0
> 
> 时间：2012-08-07T08:47:07.337
> 
> 标签：java, h2

我已经为此寻找了很长一段时间，所以我只想在这里问一下；

如何在服务器模式下设置 H2 db，以便我可以通过互联网从另一台机器连接到它？如何在服务器模式下启动引擎并让它在机器上运行以接受连接？我可以转发端口，一切都很好，只是让引擎处于我很愚蠢的“接收”模式。

对不起，我真的到处找了。我希望能够连接到数据库并从移动应用程序添加数据。所有应用程序和传输数据都运行良好，我只需要能够运行带有数据库的服务器并接收数据。任何比 H2 服务器模式文档更清晰的教程或文档将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:02:01.617

出于安全原因，默认情况下 H2 服务器（包括 TCP 服务器）[受到远程访问保护](http://h2database.com/html/advanced.html#remote_access)。您在客户端上收到的错误消息应该清楚这一点。您必须使用`-tcpAllowOthers`（对于 TCP 服务器）显式启用远程访问：

```
java -cp h2.jar org.h2.tools.Server -tcp -tcpAllowOthers 
```

这只会启动 TCP 服务器 - 有关详细信息，请参阅文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:53:27.393

```
$ java -cp h2.jar -Dh2.binAddress=0.0.0.0 org.h2.tools.Server 
```

请参阅[http://h2database.com/html/advanced.html#server_bind_address](http://h2database.com/html/advanced.html#server_bind_address)

# web-services - Sharepoint 2010 Web 服务：UserProfileService：访问被拒绝

> ID：11842291
> 
> 赞同：1
> 
> 时间：2012-08-07T08:47:23.823
> 
> 标签：web-services, sharepoint, sharepoint-2010

我正在尝试通过 UserProfileService Web 服务（Sharepoint Server 2010）获取用户配置文件的计数，但对于所有用户（除了 sharepoint 系统帐户）返回

> 操作失败 ---> 拒绝访问：只有管理员可以检索所有用户的计数。

使用 sharepoint 系统帐户（例如 'domain\megauser'），它可以按预期工作。

我尝试将其他用户添加到场管理员组、网站集管理员组，但没有帮助 - 同样的错误。

我可以为用户（比农场管理员更多）赋予更多权限吗？还是 UserProfileService 需要一些特殊权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:24:19.223

您必须将其他用户添加到 UserProfileService 应用程序：

1.  转到中央应用程序 - 管理服务应用程序
2.  单击 User Profile Service 应用程序（突出显示它）
3.  打开服务应用程序选项卡并单击权限
4.  添加具有给定权限的用户（即完全控制）

# ckeditor - 如果我在表单中有输入 type='file'，CKEditor 不会发布数据

> ID：11842293
> 
> 赞同：1
> 
> 时间：2012-08-07T08:47:24.610
> 
> 标签：ckeditor, text-editor, rich-text-editor

我正在尝试使用 CKeditor 插件作为 HTML 文本编辑器。但问题是如果我有一个`input type="file"`then 当我提交 ckeditor 插件时不会发布我在其中写的文本。但如果我`input type="file"`从我的表单中删除它，它就可以正常工作。

我需要在我的表格中同时拥有两者。你能告诉我如何让两者都能正常工作吗？

谢谢

```
<script language="JavaScript" src="<?php echo base_url();?>support_admin/plugins/ckeditor/ckeditor.js" type="text/javascript"></script> 
<form action="something">  
<label>Details</label>
<textarea class="ckeditor" name="article" ><?php echo $articles; ?></textarea><br>

<label>Image 1</label>
<input type="file" name="imagefile1"  /><br>
<button class="button" style="margin-left: 200px;">Submit</button>      
</form> 
```

# c# - C# - 驱动器未就绪 (DriveInfo)

> ID：11842299
> 
> 赞同：1
> 
> 时间：2012-08-07T08:48:00.513
> 
> 标签：c#, sql, driveinfo

我对 DriveInfo 类有这个小问题。我知道该错误特定于“IsReady”属性，但我只是不知道如何定义它..

```
namespace Csp.Test.ConsoleApp
{
    public class Program
    {
        public static void Main()
        {
            //Create the server object - You will need create a list of the server objects.
            Server server = new Server();

            //Get all drives information
            List<DriveInfo> driveList = DriveInfo.GetDrives().ToList<DriveInfo>();

            //Insert information of one server - You will need get information of all servers
            server.ServerID = 0; //Here is necessery put PK key. I recommend doing the SQL server will automatically generate the PK.
            server.ServerName = string.Concat("Server ", driveList.Count);

            //Inserts information in the newServers object
            for (int i = 0; i < driveList.Count; i++)
            {
                ServerDrive serverDrives = new ServerDrive();

                //Put here all the information to obeject Server                
                serverDrives.DriveLabel = driveList[i].Name;
                serverDrives.TotalSpace = driveList[i].TotalSize;
                serverDrives.DriveLetter = driveList[i].VolumeLabel;
                serverDrives.FreeSpace = driveList[i].TotalFreeSpace;

                //      server.ListServerDrives.Add(serverDrives);
                server.ServerDrives.Add(serverDrives);
            }

            //Add the information to an SQL Database using Linq.
            DataClasses1DataContext db = new DataClasses1DataContext(@"sqlserver");
            //   db.Servers.InsertAllOnSubmit(server);
            db.Servers.InsertOnSubmit(server);
            db.SubmitChanges();
        } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:52:35.030

更改以下行：

```
List<DriveInfo> driveList = DriveInfo.GetDrives().Where(x=>x.IsReady).ToList(); 
```

请注意，如果在获取驱动器列表和查询 DriveInfo 之间驱动器状态发生变化，您仍然可以获得 IOException，因此最好在访问 DriveInfo 时使用 try-catch。

# php - 使用 PHP SDK 登录后删除 Facebook 会话

> ID：11842301
> 
> 赞同：2
> 
> 时间：2012-08-07T08:48:08.477
> 
> 标签：php, facebook, facebook-php-sdk

我正在使用 facebook php sdk 进行一键登录和注册。用户通过身份验证后，我将用户添加到我自己的数据库和会话中，然后我想立即删除 facebook 会话。

我找不到任何关于如何在不删除我自己的会话的情况下删除 facebook 会话的文档。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:57:36.357

这似乎有效：

```
if (isset($_SESSION['fb_' . FB_APP_ID . '_code'])) {
    unset ($_SESSION['fb_' . FB_APP_ID . '_code']);
}
if (isset($_SESSION['fb_' . FB_APP_ID . '_access_token'])) {
    unset ($_SESSION['fb_' . FB_APP_ID . '_access_token']);
}
if (isset($_SESSION['fb_' . FB_APP_ID . '_user_id'])) {
    unset ($_SESSION['fb_' . FB_APP_ID . '_user_id']);
} 
```

不确定 sdk 中是否已经有一种方法可以为您执行此操作？

# java - Json - JSONArray 无法转换为 JSONObject

> ID：11842307
> 
> 赞同：0
> 
> 时间：2012-08-07T08:48:16.683
> 
> 标签：java, json

我是 JSON 新手。我正在尝试读取 JSON 中的字符串，但它给我一个错误。

```
String strResponse = "{"IndustryList" : [{"industryId" : "1","industryName" : "Bird Nest","industryStatus" : "0","industryDescription" : "Bird nest industry","industryIconFilepath" : "","industryIconFilename" : ""},{"industryId" : "2","industryName" : "Medicine","industryStatus" : "0","industryDescription" : "Medicine Products","industryIconFilepath" : "","industryIconFilename" : ""}]}"

JSONObject json_data = new JSONObject(strResponse);
JSONArray nameArray = json_data.names(); 
JSONArray valArray = json_data.toJSONArray(nameArray);
Log.i(MainActivity.class.getName(),
             "Number of entries " + valArray.length());
for (int i = 0; i < valArray.length(); i++) {
    JSONObject jsonObject = valArray.getJSONObject(i);
    Log.i(MainActivity.class.getName(), jsonObject.getString("text"));
} 
```

错误：

```
at 0 of type org.json.JSONArray cannot be converted to JSONObject 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:55:05.707

问题是`toJSONArray`返回值数组。而且它只有 1 个元素 -`industryList`值。这是数组本身。所以你需要迭代 throw `valArray.getJSONArray(0)`not through`valArray`

# ios - 为 iOS 应用程序创建图标

> ID：11842312
> 
> 赞同：2
> 
> 时间：2012-08-07T08:48:47.400
> 
> 标签：ios, xcode

我确定我以前使用过苹果程序来创建图标，但我一生都记不住名字吗？我也认为它没有包含在最新的 ML 中的 Xcode 中。如果是这样，你能推荐一个好的免费应用程序来创建图标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:00:00.730

您可能正在寻找曾经作为 Xcode 一部分捆绑的**Icon Composer工具。**当 Xcode 移至 App Store 时，许多实用程序和工具已从下载包中删除。

但是，这些工具仍然可供下载。

在 Xcode 中，打开菜单：`Xcode -> Open Developer Tools -> More Developer Tools`. 这将带您到 Apple Developer 网站，您可以在其中下载许多软件包。

## Xcode 8

对于 Xcode 8，您将在**Additional Tools for Xcode**包中找到**Icon Composer**（以及许多其他工具） 。

 **## 在 Xcode 8 之前

在 Xcode 8 之前，**Icon Composer**包含在Xcode包的**图形工具中。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:52:07.197

GIMP（GNU Image Manipulation Program）是一种图像修饰和编辑工具，在 GPLv3（或更高版本）许可下作为免费和开源软件发布。有针对大多数操作系统（包括 Microsoft Windows、Mac OS X 和 Linux）量身定制的 GIMP 版本。

GIMP 提供您所需要的一切，也许不止这些！祝你好运 ：）**

# agile - 敏捷与迭代和增量开发之间的区别

> ID：11842318
> 
> 赞同：45
> 
> 时间：2012-08-07T08:49:08.840
> 
> 标签：agile, methodology, iteration

敏捷与迭代和增量开发有什么区别？敏捷是否被认为是迭代和增量的？一些信息显示敏捷是最新的迭代和增量。我需要对此作出明确澄清。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-07T08:57:08.343

*   **迭代**- 你不会一次完成一个功能。您处于代码 >> 获取反馈 >> 代码 >> ... 循环中。你不断迭代直到完成。
*   **增量**- 您现在可以根据需要构建尽可能多的内容。除非需要被证明，否则您不会过度设计或增加灵活性。当需要出现时，您可以在已经存在的任何基础上进行构建。（注意：与迭代的不同之处在于您正在添加新事物......而不是精炼某些事物）。
*   **敏捷**——如果您重视[敏捷宣言](http://agilemanifesto.org/)中列出的相同事物，那么您就是敏捷的。这也意味着没有标准的模板或清单或程序来“做敏捷”。它并没有过度指定..它只是说明您可以使用“敏捷”所需的任何实践。Scrum、XP、看板是一些更具规范性的“敏捷”方法，因为它们共享相同的价值观。持续和早期的反馈、频繁的发布/演示、进化设计等。因此它们可以是迭代和增量的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-07T09:17:09.890

增量开发意味着软件项目的不同部分不断地集成到整体中，而不是一种将所有不同部分组装在项目的一个或几个里程碑中的单一方法。

迭代意味着一旦组件的第一个版本完成，就会对其进行测试、审查，并且结果几乎立即转换为该组件的新版本（迭代）。

因此，作为第一个结果：迭代开发不需要是增量的，反之亦然，但这些方法非常适合。

敏捷开发旨在减少软件项目中的大量计划开销，以允许快速反应以改变例如客户的意愿。增量和迭代开发几乎总是敏捷开发策略的一部分。有几种敏捷开发方法（例如 scrum）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:00:06.467

迭代开发意味着在产品生命周期中重新审视通常的瀑布模型步骤。这些阶段甚至可以重叠，即在进行端到端测试时，您可能已经开始准备新的需求。

增量开发意味着您为功能制定路线图并逐步实现它们。

敏捷的目标是在每个 sprint 之后创造“潜在的可交付产品”。你如何实现它是一个不同的故事。敏捷尝试采用来自各个领域的“最佳”技术（例如极限编程）。敏捷不排除运行增量或迭代开发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-14T08:47:40.863

一些重要且成功执行的软件项目，例如 Google Chrome 和 Mozilla Firefox，是迭代和增量软件开发的典范。

我将引用描述这种方法的精美 ars technica 文章：http: [//arstechnica.com/information-technology/2010/07/chrome-team-sets-six-week-cadence-for-new-major-versions/](http://arstechnica.com/information-technology/2010/07/chrome-team-sets-six-week-cadence-for-new-major-versions/)

> > 根据 Chrome 项目经理 Anthony Laforge 的说法，加快步伐旨在解决三个主要目标。一是更快地向用户推出新功能。第二个是使发布计划可预测，因此更容易计划将包含哪些功能以及哪些功能将针对以后的发布。第三，也是最违反直觉的，是减轻 Chrome 开发者的压力。Laforge 解释说，发布之间的较短、可预测的时间段更像是“离开中央车站的火车”。准备好的新功能不必等待其他需要更长时间才能完成的功能——他们可以直接跳上当前版本的“火车”。这反过来可以减轻开发人员急于完成其他功能的压力，因为另一个发布火车将在六周内到来。他们可以高枕无忧，因为他们知道他们的工作不会阻止火车离开车站。<<

* * *

## 回答 #5

> 赞同：-10
> 
> 时间：2017-03-21T10:31:44.347

敏捷主要用于项目开发中的技术。在敏捷技术中，人们从一种技术切换到另一种技术。主要目的是消除依赖性。就像人们从生产转向开发，从开发转向测试。这就是为什么依赖将消除对单个团队或个人的依赖..

# android - 在 Android 应用程序中使用 Garmin GLO GPS 接收器

> ID：11842320
> 
> 赞同：4
> 
> 时间：2012-08-07T08:49:22.563
> 
> 标签：android

有人用过新的 Garmin GLO GPS 接收器吗？有没有人成功地将它与他们的移动应用程序集成？我有兴趣使用它来在我的 Android 应用程序中获得更准确的 GPS 坐标，但我想在购买之前从其他人那里获得一些反馈。

Garmin 网站没有提及是否有 API 可用于检索 GPS 坐标，它只是说：“使用蓝牙技术，GLO 与您的移动设备进行无线配对。只需将 GLO 设置在您的移动设备范围内，您很快就会正在接收 GLO 的位置​​数据。”

您如何检索此位置数据？设备上的应用程序（例如 Google 地图）会自动获取这些数据吗？任何有关该设备的信息或反馈将不胜感激。

有关该设备的更多信息，请访问以下链接：

[https://buy.garmin.com/shop/shop.do?pID=109827&ra=true](https://buy.garmin.com/shop/shop.do?pID=109827&ra=true)

托德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T21:13:23.130

这个问题似乎获得了相当多的流量，并且可以使用更彻底的答案。

Garmin 可能觉得这样说是有道理的：

> 只需将 GLO 设置在您的移动设备范围内，您就会立即收到 GLO 的位置​​数据

因为在 iOS 上，您可以连接到 GLO，而 iOS 使用来自 GLO 的位置​​信息为使用 iOS 位置 API 的任何设备提供更准确的信息。Android 没有这样的功能。因此，选项一是使用将通过 BT 读取 NMEA 数据并使用它在您的 Android 设备上设置模拟位置的应用程序（如 Rodrigo 所说）。选项二是我在我的应用程序中所做的：直接在应用程序中连接到 GLO 或其他 BT GPS。然后我自己解析 NMEA 行并在应用程序中使用它。这样做的缺点是每个使用位置的应用程序都必须自己实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:07:31.433

这个应用程序对我有用：https: [//play.google.com/store/apps/details?](https://play.google.com/store/apps/details?id=googoo.android.btgps) id=googoo.android.btgps 它使用模拟 GPS 位置来注入 GLO 的位置​​。

# perl - 如何将行号分配给文件中存在的每个字符串

> ID：11842321
> 
> 赞同：2
> 
> 时间：2012-08-07T08:49:26.230
> 
> 标签：perl, line-numbers

**F1.txt**

```
tom a b c d e boy

bob a b c sun

harry a c d e girl 
```

***结果***

**F2.txt**

```
tom1 a1 b1 c1 d1 e1 boy1

tom2 a2 b2 c2 sun2

tom3 a3 c3 d3 e3 girl3 
```

大家好，我对 Perl 还是很陌生，你能帮我解决我的这个新问题吗？我有一个文件`F1.txt`，我的工作是根据文件的行号在文件中的每个字符串之后分配数字，如上面的示例所示。到目前为止，我只是设法用这个 Perl 单线为每一行分配一个数字

```
perl -pe '$_= ++$a." $_" if /./' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:56:51.153

也许如下：

```
perl -pe 's/(?<=\w)\b/$./g;' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:58:24.697

特殊变量`$.`保存当前行号。

正则表达式`/(?<=\w)\b/g`匹配单词（或数字或下划线）的每个结尾。或者，更准确地说，是一个单词边界，前面有一个我们不包含在匹配中的“单词”字符。断言的`\b`宽度为零。使用正则表达式`s/(?<=\S)(?=\s|$)/$./g`在每个非空格序列之后放置一个行号。

我们可以使用替换运算符`s///g`以这种方式附加行号：

```
echo -e "a b\nc d" | perl -ne 's/(?<=\w)\b/$./g; print' 
```

印刷

```
a1 b1
c2 d2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:56:46.263

单线：

```
perl -pe 's/(?<=\w)\b/$./g' F1.txt >F2.txt 
```

# javascript - jquery addclass 好像添加了类但是没有视觉效果

> ID：11842324
> 
> 赞同：0
> 
> 时间：2012-08-07T08:49:30.790
> 
> 标签：javascript, jquery, css

首先这里是我的问题的 jsFiddle 示例：http: [//jsfiddle.net/xJtAr/](http://jsfiddle.net/xJtAr/)

我的网站上有很多 div 元素，其中一些有一个“数字”类，其中只有一个有“active_question”类，这应该将它们的灰色边框从数字类更改为黑色边框。当用户单击其中一个元素时，该元素将获得类“active_question”，并且应从具有此类的旧 div 中删除此类。

我在 jQuery 中编写的脚本似乎工作正常，但没有应有的视觉效果。

如果有人可以帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:51:14.977

您包含`.`在各种 jQuery 类方法中。这只是 CSS 选择器而不是类。

所以不是`$(this).addClass('.active_question')`你想要`$(this).addClass('active_question')`

编辑了你的小提琴：

[http://jsfiddle.net/xJtAr/1/](http://jsfiddle.net/xJtAr/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:54:24.453

只需删除`.`from`addClass()`和`removeClass()`

从：`.addClass('.yourClass');`到：`.addClass('yourClass');`

# java - Android Emulator 4.0 是否支持网络摄像头

> ID：11842325
> 
> 赞同：0
> 
> 时间：2012-08-07T08:49:33.370
> 
> 标签：java, android, eclipse, android-emulator

我在 API-8 (Froyo) 上学习 android，但问题是模拟器也适用于 Froyo，它不包括从应用程序发送电子邮件或从网络摄像头捕获图片的功能。

我想知道如果我下载 ICS 4.0 的模拟器以运行我的 Froyo 应用程序，这个模拟器是否提供以下功能：

*   发送电子邮件
*   支持电脑摄像头拍照

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:05:04.153

好的，首先：

*   对于给定的 SDK 版本，Android 模拟器始终相同。
*   不同的是在其上运行的系统。

[安卓模拟器文档](http://developer.android.com/tools/help/emulator.html)

然后，要从模拟器发送电子邮件，请参考[如何在 Android 模拟器中配置 gmail？](https://stackoverflow.com/questions/6978877/how-can-i-configure-gmail-in-android-emulator)

最后要捕获网络摄像头的视频，请检查：

*   [如何在安卓模拟器中使用网络摄像头捕捉实时图像？](https://stackoverflow.com/questions/1276450/how-to-use-web-camera-in-android-emulator-to-capture-a-live-image)
*   [http://www.inter-fuser.com/2009/09/live-camera-preview-in-android-emulator.html](http://www.inter-fuser.com/2009/09/live-camera-preview-in-android-emulator.html)

# iphone - 如何使用 cocos2d 淡入/淡出 UIKit 元素（UItextField）

> ID：11842326
> 
> 赞同：1
> 
> 时间：2012-08-07T08:49:35.133
> 
> 标签：iphone, ios, cocos2d-iphone, uitextfield

我有一个 CCLayer，上面有东西（精灵、标签等）。此 CCLayer 通常使用以下命令调用：

```
[[CCDirector sharedDirector] pushScene:[CCTransitionFade transitionWithDuration:1.0 scene:[AdventureLayer sceneWithLevel:[itemPassedIn tag]] withColor:ccWHITE]]; 
```

它带有某种 1 秒的白色褪色。

然而，在这一层，我也有一个 UITextField 添加到 CCDirector

```
[[[CCDirector sharedDirector] view] addSubview:textField]; 
```

问题是：当图层显示出来时，除了已经显示的 UITextField 之外，一切都随着褪色效果而变化。

这太“野蛮”了，我想对它做一些褪色的效果。

我应该如何进行？（我正在使用 cocos2d v2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:43:52.243

您可以在 UITextfield 上使用附加动画。一个非常简单的普通 UIView 动画。或者也许在 Cocos2d 中找到一个 UITextField 的等价物，这是来自 clarus 的一个可能的解决方案：http: [//www.cocos2d-iphone.org/forum/topic/20993](http://www.cocos2d-iphone.org/forum/topic/20993)

**编辑：**

[这](http://www.raywenderlich.com/2010/12/09/how-to-use-uiview-animation-tutorial/)是 UIView 动画的教程。代码将如下所示：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1];
uitextField.alpha = 1.0;
[UIView commitAnimations]; 
```

# c++ - 全局变量初始化

> ID：11842327
> 
> 赞同：1
> 
> 时间：2012-08-07T08:49:41.530
> 
> 标签：c++

原则上，定义在任何函数之外的变量（即全局变量、命名空间变量和类静态变量）会在调用 main() 之前初始化。翻译单元中的此类非局部变量按其声明顺序初始化

以上是我的讲师课堂笔记中的台词。

```
#include <iostream>

using namespace std;
int a=99;
int b;
int main(int argc, char *argv[]) 
{
  cout<<a<<endl;
  cout<<b<<endl;
  return 0;
}
b=100; 
```

运行此程序时出现错误。在调用 main() 之前将 'b' 分配给 100 不是真的吗？错误是`C++ requires a type specifier for all declarations`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T08:56:18.980

这里的问题不是初始化顺序：`b`确实是在`main`开始运行之前初始化的。

问题在于`b`. 在`main`编译时*，*没有`b`.

您可以通过将定义/初始化移动`b`到 before来修复它`main`：

```
#include <iostream>

using namespace std;
int a = 99;
int b = 100;
int main (int argc, char *argv[]) {
    cout << a << '\n';
    cout << b << '\n';
    return 0;
} 
```

或简单地表明`b`存在：

```
#include <iostream>

using namespace std;
int a = 99;
extern int b;
int main (int argc, char *argv[]) {
    cout << a << '\n';
    cout << b << '\n';
    return 0;
}
int b = 100; 
```

这两种解决方案`b`在运行时创建或初始化时都不会改变，它们只是`b`在`main`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T08:56:40.047

你的讲师错了；*全局变量按定义*的顺序初始化，而不是*声明*。

例如，

```
#include <iostream>
struct S { S(const char *s) { std::cout << s << '\n'; } };
extern S a;    // declaration
extern S b;    // declaration
int main() { }
S b("b");      // definition
S a("a");      // definition 
```

将打印

```
b
a 
```

您发布的代码不起作用，因为`b`甚至没有在使用时*声明*。声明（例如`extern int b`）是必需的，因为 C++（与 C 类似）最初设计为[一次性编译器](http://en.wikipedia.org/wiki/One-pass_compiler)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T08:52:49.583

仔细阅读。

在调用 main （未编译）之前初始化在任何函数 (B) 之外定义的变量。

要正确编译 B 应该在第一次使用之前定义（和声明）（这是你的错误：在任何地方声明之前使用 B ）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T08:50:45.217

问题在这里：`cout<<b<<endl;`

在声明之前，您无法访问该变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-13T11:47:29.210

问题在于语句`b=100;`：您不能将语句放在全局范围内（变量初始化除外）。

`b`如果此行保持原样，则无论声明/定义或使用`b`inside或任何地方，代码都不会编译`main`。

如果没有这一行，代码是正确的并且可以使用`b`value equals `0`，因为未初始化的全局变量被初始化为 0 （或者该行`b=100;`可以移动到任何函数范围内）。

# c# - 分页 LDap 搜索失败并显示“请求的属性不存在”

> ID：11842329
> 
> 赞同：2
> 
> 时间：2012-08-07T08:49:44.287
> 
> 标签：c#, ldap

我需要使用使用 .NET/C# 实现的 Ldap 搜索来获取“epersonstatus=REMOVE”的所有员工的“员工编号”，例如：

```
var connection = new LdapConnection("foo.bar.com:389");

connection.AuthType = AuthType.Anonymous;
connection.SessionOptions.ProtocolVersion = 3;
connection.Bind();

var request = new SearchRequest(
                 "dc=root,dc=com",
                 "(epersonstatus=REMOVE)", 
                 SearchScope.Subtree,
                 new string[] { "employeenumber" }); 
```

由于有成千上万的条目，我正在使用此处建议的分页请求：http: [//dunnry.com/blog/PagingInSystemDirectoryServicesProtocols.aspx](http://dunnry.com/blog/PagingInSystemDirectoryServicesProtocols.aspx)

我还检查了服务器是否支持此处建议的分页请求： [iPlanet LDAP and C# PageResultRequestControl](https://stackoverflow.com/questions/1646518/iplanet-ldap-and-c-sharp-pageresultrequestcontrol)

一旦流量达到：

```
SearchResponse response = connection.SendRequest(request) as SearchResponse; 
```

我收到带有消息“请求的属性不存在”的 DirectoryOperationException。

通过在像 softerra 这样的 LDap 客户端上运行相同的查询，我得到了条目（一千）和错误。

一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:13:10.530

我有一个类似的问题。

使用分页搜索时，我得到了异常`"The server does not support the control. The control is critical."`，当使用非分页搜索时，我收到了结果（至少只要过滤器限制了最大数量）。

但是我发现该错误消息具有误导性 - 问题隐藏在身份验证中。

使用`AuthType.Basic`（或`AuthType.Anonymous`）我收到了错误。我一切换到`AuthType.Ntlm`它就工作的公共汽车。

希望这可以帮助...

# google-analytics - Google Analytics（分析）内容实验：可以一次设置多个页面的变体吗？

> ID：11842332
> 
> 赞同：23
> 
> 时间：2012-08-07T08:49:58.523
> 
> 标签：google-analytics, ab-testing, google-experiments

我最近了解了看起来很有趣的新 Google Analytics（分析）内容实验。（[http://analytics.blogspot.nl/2012/06/helping-to-create-better-websites.html](http://analytics.blogspot.nl/2012/06/helping-to-create-better-websites.html)）

标准用例似乎是对于某个页面，例如产品详细信息页面，您提供变体（不同的 url）并选择包含在测试中的用户百分比。将向此类用户呈现产品详细信息页面的变体（并且出于继续/用户体验的原因，可能基于 cookie，将继续一遍又一遍地呈现相同的变体）。

一切都很好。

但是，假设我的网站上有 100 种产品。仅测试其中一种产品的变体具有以下缺点：

*   由于访客人数较少，测试进展缓慢。
*   测试不是孤立的。即：由于其他产品详细信息页面未包含在测试中，因此显示 1 个产品详细信息页面的变体页面，而所有其他产品详细信息页面显示原始可能（将）导致令人困惑的体验（并因此扭曲转换统计数据）用于浏览多个产品的用户，他们中的大多数人都会这样做。

对我来说，能够将某种类型的所有产品动态地包含在同一个测试中（例如：所有电视）似乎要好得多，例如通过启用在 url 上设置一些正则表达式或其他过滤器以包含在测试中。

目前这样的事情是可能的、预定的、有用的还是完全没有重点？

**编辑**

部分解决方案似乎是“相对网址” [https://support.google.com/analytics/bin/answer.py?hl=en&answer=2664470](https://support.google.com/analytics/bin/answer.py?hl=en&answer=2664470)

> 更进一步，我们可以看到相对 URL 的使用如何让您轻松地在一组不同的原始页面上运行实验，并在该组页面上测试视觉替代方案（例如，电子产品中的产品页面）商业网站）。

剩下的问题：如何动态标记哪些页面属于实验（例如：基于正则表达式）

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-22T17:57:47.080

解决方案是对变体页面使用相对 url。

例如，您有许多产品页面：

```
www.mysite.com/products/eggs.html
www.mysite.com/products/cheese.html
www.mysite.com/products/bread.html
etc. 
```

对于每个页面，您都有一个匹配的变体页面：

```
www.mysite.com/products/eggs.html?var=bigpicture
www.mysite.com/products/cheese.html?var=bigpicture
www.mysite.com/products/bread.html?var=bigpicture
etc. 
```

您想在 1 个实验中使用所有产品页面。

转到谷歌分析内容实验：对于原始页面，选择众多产品页面之一（例如 www.mysite.com/products/eggs.html）（这只是为了获取实验代码并为 GA 提供示例页面）

对于变体页面，选择相对 url 并输入 ?var=bigpicture

然后将实验所需的javascript放置在实验中您想要的所有原始产品页面上

![Google 内容实验动态 URL 产品页面](../Images/dafbd5d7c6477360f6669f3050d68d0a.png)

有关详细信息，请参阅： http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer=2664470&topic=1745208&ctx=topic](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2664470&topic=1745208&ctx=topic)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T21:51:20.110

使用此处描述的 Javascript API：

[https://developers.google.com/analytics/devguides/collection/gajs/experiments#pro-server](https://developers.google.com/analytics/devguides/collection/gajs/experiments#pro-server)

您可以在代码中以编程方式在每个页面上设置实验 ID。当然，您首先需要在 GA 中创建实验，这样做时为每个变体提供 GA 假网址，丢弃 GA 生成的代码，忽略验证错误。并且只需使用上面链接中描述的experimentid。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T17:23:37.160

好的，所以解决方案是：

1.  创建实验。
    为您的原始网址选择一个占位符网址。像 www.example.com/products/eggs 这样的东西。将变体设置为相对 url，例如 ?var=large_heading, ?var=small_price

2.  在服务器端有一些机制来确定当前用户是否是实验的一部分。一个简单的饼干就足够了。如果此 cookie 存在，则显示页面的变体。

3.  如果用户访问产品页面但未参与实验，则显示您创建实验时提供的 javascript。

4.  向您的产品页面添加一些内容以检查查询字符串 var=[something]。当检测到显示适当的变化以及设置 cookie 时，该 cookie 将用户标记为处于实验中。

您可以破解 Google 为您提供的 JavaScript 以使这更容易一些。就像是：

```
var variation = utmx('variation_code', 'A/B');
if (variation) { set_a_cookie(variation); }
utmx('url', 'A/B'); 
```

这主要来自 GWO 技术指南。[http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//websiteoptimizer/techieguide.pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//websiteoptimizer/techieguide.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T21:52:28.990

我最近实施了一项 GA 实验，以测试跨多个页面的导航栏上的不同文本。这对我有用：

*   在 GA 中为单个页面设置实验。例如 index.html 和 index.html?var=menu2。
*   跨多个页面实施解决方案。具体来说，在您要运行测试的所有页面中插入 GA 实验代码。然后确保您的页面可以根据传递的参数呈现页面变体。我的 php 代码是这样的：如果 var=menu2，则显示带有 menu2 的页面；否则，显示原始菜单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-13T21:24:37.933

如果您真的想保持简单，还有一种方法可以在没有实验 API 的情况下使用 GA 进行 A/B 测试。它背后的想法是创建您自己的拆分参数，然后您可以将其作为自定义变量传递给 GA。因此，您可以使用自己的开发工具来区分组中的内容，而不必使用重定向。这是一个简单的教程如何做到这一点：[链接](http://goo.gl/UP4lUU)。

# c++ - VC++ 10.0 express gdi+ GdiPlusPen.h 头文件

> ID：11842335
> 
> 赞同：0
> 
> 时间：2012-08-07T08:50:03.370
> 
> 标签：c++, visual-c++, gdi+

当我包含 GdiPlus.h 时，**Pen**类是未定义的。

但是 GdiPlus.h 包括 GdiPlusPen.h

```
...
#include "GdiplusImageAttributes.h"
#include "GdiplusMatrix.h"
#include "GdiplusBrush.h"
#include "GdiplusPen.h" 
#include "GdiplusStringFormat.h"
#include "GdiplusPath.h"
... 
```

当我自己包含 GdiPlusPen.h 时，它可以工作。我可以安全使用它吗？

**问题：**这是因为我的 VC++ 正在快速安装吗？

距离激活提示还有 8 天 :( 有人遇到同样的问题吗？

Windows XP sp-3，奔腾-m centrino。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:23:40.287

不，#include GdiplusPen.h 直接是不正确的。gdiplus 类位于名为“Gdiplus”的命名空间中。要么显式使用该命名空间（如 Gdiplus::Pen），要么在 .cpp 文件中使其看起来像这样：

```
#include <gdiplus.h>
using namespace Gdiplus; 
```

# php - 我想用 PHP 做一个简单的验证码，我做错了什么？

> ID：11842337
> 
> 赞同：-3
> 
> 时间：2012-08-07T08:50:11.067
> 
> 标签：php, captcha

我正在尝试在 PHP 中制作一个简单的验证码，只是为了学习目的，到目前为止还没有将字符串转换为图像，我不知道我做错了什么？我什至无法验证代码，它给出的字符串每次都不匹配

这是代码

```
 <?php

    $var = 'abcdefghijklmnopqrstuywxyz1234567890';

    $random = str_shuffle($var);

    $captcha = substr($random,0,10);
    echo $captcha;

    if(isset($_POST['captcha'])){

    $check = $_POST['captcha'];
    if ($captcha==$check){
    echo 'Verified.';

    }else{echo 'string didn\'t match';}

    }

    ?>
    <form action="random.php" method="POST">
    <input type="text" name="captcha"><br>
    <input type="submit" value="Submit">
    </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:03:52.567

我不建议将此用于验证码。

但我只为您的`learning purpose`.

```
<?php

session_start();

if(isset($_POST['captcha'])){

$check = $_POST['captcha'];
if ($_SESSION['captcha']==$check){
echo 'Verified.';

}else{echo 'string didn\'t match';}

}

$var = 'abcdefghijklmnopqrstuywxyz1234567890';

$random = str_shuffle($var);

$captcha = substr($random,0,10);
echo $captcha;
$_SESSION['captcha'] = $captcha;

?>
<form action="random.php" method="POST">
<input type="text" name="captcha"><br>
<input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:35:26.247

要创建一个简单的验证码表单，那么这里有一个小指南：

===== 1 STEP ====== 在您的 FTP 文件夹（您需要的位置）中，放置一个字体文件（例如：yourfont.ttf）。然后创建一个文件（称为 captcha.php）并将以下代码粘贴到其中（然后将该 captcha.php 放在同一个 ftp 文件夹中）：

```
<?php session_start();

// generate random number and store in session
$randomnr = rand(1000, 9999);
$_SESSION['randomnr2'] = md5($randomnr);
//generate image
$im = imagecreatetruecolor(100, 38);
//colors:
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 200, 35, $black);

// -------------      your fontname    -------------
//  example font http://www.webpagepublicity.com/free-fonts/a/Anklepants.ttf
$font = 'yourfont.ttf';

//draw text:
imagettftext($im, 35, 0, 22, 24, $grey, $font, $randomnr);

imagettftext($im, 35, 0, 15, 26, $white, $font, $randomnr);

// prevent client side  caching
header("Expires: Wed, 1 Jan 1997 00:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revаlidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

//send image to browser
header ("Content-type: image/gif");
imagegif($im);
imagedestroy($im);
?> 
```

===== 2 步 ======

然后在任何页面（您要实现验证码的地方）将此代码放在该页面内的某个位置（当然，在此代码的最后一部分，如果代码输入正确，则有一个示例 PHP 函数可以执行示例操作。因此，当验证码正确时，您应该了解更多 PHP 编程来执行您想要的功能）：

```
<form method="post" action=""> <img src="captcha.php" />
<input class="input" type="text" name="codee" />
<input type="submit" value="Submit" />
</form>

<?php
session_start();
if (md5($_POST['codee']) == $_SESSION['randomnr2']) { 
// here you  place code to be executed if the captcha test passes
  echo "YES. Do Something function1";
} 

else {  
 // here you  place code to be executed if the captcha test fails
  echo "No.  Do Something function2";
}
?> 
```

# c# - 查看xml文件c#中的所有相关数据

> ID：11842338
> 
> 赞同：1
> 
> 时间：2012-08-07T08:50:15.683
> 
> 标签：c#, xml

我想要做的是显示来自所选 xml 文件的所有相关数据。我已经声明要搜索的节点路径是`XmlNodeList xnList = xml.SelectNodes("/Patient/Patient/Name");`. 但是，我的输出仅显示最后一个数据，而不是所需路径的整体数据。

这是我的 xml 文件。

```
 <Patient> 
  <Patient>
    <LevelPriority>0</LevelPriority>
    <Name>w</Name>
    <Id>1</Id> 
  </Patient>      
  <Patient>
    <LevelPriority>0</LevelPriority>
    <Name>asf</Name>
    <Id>2</Id> 
  </Patient> 
  <Patient>
    <LevelPriority>0</LevelPriority>
    <Name>add</Name>
    <Id>3</Id>        
</Patient> 
```

这是我的输出。

![在此处输入图像描述](../Images/57ab42be00431bc723b7933d64b4d10e.png)

我希望它出现的是：

> 加入

而不仅仅是最后的数据`add`。

这是我在 viewForm 中的代码。

```
namespace SliceLink
{
    public partial class ViewForm : Form
    {           
        public Form3()
        {
            InitializeComponent();
            XmlDocument xml = new XmlDocument();            
            xml.Load("C:\\Users\\HDAdmin\\Documents\\SliceEngine\\SliceEngine\\bin\\Debug\\saya.xml");
            XmlNodeList xnList = xml.SelectNodes("/Patient/Patient/Name");            
            foreach (XmlNode xn in xnList)
            {
                string name = xn.InnerText;                   
                textBox1.Text = name;
            }

        }

    }
} 
```

如何使其查看所需的所有数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:53:07.643

您必须将新文本 ( `name`) 附加到已经存在的文本中：

```
foreach (XmlNode xn in xnList)
{
    string name = xn.InnerText;
    textBox1.Text = textBox1.Text + name;
} 
```

此外，您可能需要插入一些分隔符（此处：空格字符）：

```
foreach (XmlNode xn in xnList)
{
    string name = xn.InnerText;
    textBox1.Text = textBox1.Text + " " + name;
} 
```

`textBox1.Text.Length`如果您不想在第一项之前插入空格，请检查为零。

# glassfish - Glassfish 在领域身份验证中创建多个 http 会话

> ID：11842343
> 
> 赞同：0
> 
> 时间：2012-08-07T08:50:32.557
> 
> 标签：glassfish, httpsession, realm

我有一个关于领域身份验证的问题，其中 glassfish 创建了多个 http 会话。这是一个例子

Web.xml：

```
<security-constraint>
    <web-resource-collection>
      <web-resource-name>AllPages</web-resource-name>
      <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>user</role-name>
    </auth-constraint>
  </security-constraint>
  <login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>FileRealm</realm-name>
  </login-config>
<security-constraint> 
```

glassfish-web.xml：

```
 <security-role-mapping>
    <role-name>user</role-name>
    <group-name>users</group-name>
  </security-role-mapping> 
```

登录.jsp：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Welcome Page</title>
</head>
<body>
<p>You have successfully logged into the application.</p>
<a href="./home.jsp">go to home</a>
</body>
</html> 
```

会话监听器：

> @WebListener 公共类 SessionListener 实现 HttpSessionListener {
> 
> 公共无效会话创建（HttpSessionEvent arg0）{
> 
> System.out.println("会话创建id:"+arg0.getSession().getId());
> }
> 
> 公共无效会话销毁（HttpSessionEvent arg0）{
> 
> ```
>  System.out.println("Session destroyed id:"+arg0.getSession().getId()); 
> ```
> 
> }
> 
> }

当我进行身份验证时，glassfish 创建一个新会话：

信息：会话创建 ID：29c5d904db0e40b9cfbdac40aa5e

当我点击“回家”链接或刷新页面时，glassfish 会创建另一个 http 会话：

信息：会话创建 ID：2a67270137e38c150bf3690e2e46

而且我还注意到 glassfish 永远不会破坏第一个创建的会话。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:11:22.947

这可能是 Glassfish Bug。尝试使用此选项将*context.xml*添加到您的*META-INF*目录：

```
<?xml version='1.0' encoding='utf-8'?>
<Context>
<Valve className="org.apache.catalina.authenticator.BasicAuthenticator"
changeSessionIdOnAuthentication="false" />
</Context> 
```

或（如果是 Web 表单身份验证）：

```
<?xml version='1.0' encoding='utf-8'?>
<Context>
<Valve className="org.apache.catalina.authenticator.FormAuthenticator"
changeSessionIdOnAuthentication="false" />
</Context> 
```

这应该（临时）解决您的问题！

# android - 如何知道一个线程已经完成

> ID：11842345
> 
> 赞同：4
> 
> 时间：2012-08-07T08:50:47.093
> 
> 标签：android

我有一个活动，我正在运行一个线程来访问 Web 服务。我只想在线程完成后完成活动。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T09:06:12.413

为了让您的生活更轻松，请使用 Android [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)对象。这提供了与线程相同的后台进程，但会为您处理一切。这包括 AsyncTask 不同阶段的回调。这包括一旦它通过 onPostExecute() 函数在后台完成了您对它的要求。

从文档中：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
 protected Long doInBackground(URL... urls) {
     int count = urls.length;
     long totalSize = 0;
     for (int i = 0; i < count; i++) {
         totalSize += Downloader.downloadFile(urls[i]);
         publishProgress((int) ((i / (float) count) * 100));
         // Escape early if cancel() is called
         if (isCancelled()) break;
     }
     return totalSize;
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
 }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T08:53:49.207

您可以使用[Thread.join()](http://developer.android.com/reference/java/lang/Thread.html#join%28%29)，它适用于所有 Java 程序（不仅仅是 Android）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:58:14.063

您可以调用[`isAlive()`](http://developer.android.com/reference/java/lang/Thread.html#isAlive%28%29)Thread 的方法，或者[`getStatus()`](http://developer.android.com/reference/android/os/AsyncTask.Status.html)如果您使用 AsyncTask

# c# - wp7 listpicker，从json绑定

> ID：11842356
> 
> 赞同：0
> 
> 时间：2012-08-07T08:51:17.127
> 
> 标签：c#, json, windows-phone-7

大家好，我有一个小问题，我希望有人可以帮助我我有一个 json url，它给我这样的数据：

```
[
  {
    "nom": "fofo",
    "appGuid": "79fa058b-395a-438d-b66f-d751faea82e0"
  },
  {
    "nom": "fifi",
    "appGuid": "8b6bfcdb-d286-46e2-889e-0168a782323f"
  },
  {
    "nom": "toto",
    "appGuid": "65DE39E7-0130-4836-BBD3-7051574018B6"
  },
  {
    "nom": "titi",
    "appGuid": "66DE39E7-0130-4836-BBD3-7051574018B6"
  }
] 
```

我的课 ：

```
public class ListApplication
    {

            public string nom { get; set; }
            public string appGuid { get; set; }

    } 
```

我有一个列表选择器：

我只想在列表选择器中绑定元素“nom”，我尝试过这种方法，但没有任何效果：第一种方法：

```
WebClient visio = new WebClient();
            visio.DownloadStringCompleted += new DownloadStringCompletedEventHandler(vision_DownloadStringCompleted);
            visio.DownloadStringAsync(new Uri("https://......... "));

void vision_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
            if (e.Error != null)
                return;
            JArray jArray = JArray.Parse(e.Result);
            List<ListApplication> apps = new List<ListApplication>();

            for (int i = 0; i < jArray.Count; i++)
            {
                JObject app = (JObject)jArray[i];
                apps.Add(new ListApplication { nom = (string)app["nom"], appGuid = (string)app["appGuid"] });
                this.Application.ItemsSource = apps;
                //
            } 
```

第二种方法：

```
 public Appli()
        {
            InitializeComponent();
            this.Type_info.ItemsSource = Action;
            this.Periode.ItemsSource = Per;
            var w = new WebClient();
            Observable.FromEvent<DownloadStringCompletedEventArgs>(w, "DownloadStringCompleted").Subscribe(r =>
              {
                  var deserialized =
                    JsonConvert.DeserializeObject<List<ListApplication>>(r.EventArgs.Result);
                  Application.ItemsSource = deserialized;
              });
            w.DownloadStringAsync(
              new Uri("https://........"));
        } 
```

然后我在 XAML 的 listpicker 中添加了 Itemsource= {Binding nom}

任何帮助我都会非常感激，对我的英语感到抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:01:28.777

我相信你问的是绑定没有生效。也就是说，您看不到列表中的数据。

如果是这种情况，您是否将列表选择器的 DataContext 设置为列表？此外，当您收到更多 JSON 数据时，您似乎希望列表选择器的内容发生变化。因此，如果是这种情况，我建议您使用 ObservableCollection 而不是 List。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:11:16.480

没关系，我找到了答案，我已将其与第二种方法一起使用

```
<toolkit:ListPicker x:Name="listPicker" Header="Application" >
                <toolkit:ListPicker.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding nom}" />
                        </StackPanel>
                    </DataTemplate>
                </toolkit:ListPicker.ItemTemplate>
            </toolkit:ListPicker> 
```

# c++ - c ++，指向函数向量的指针的stl映射

> ID：11842360
> 
> 赞同：0
> 
> 时间：2012-08-07T08:51:36.277
> 
> 标签：c++, stl, map, vector, function-pointers

我似乎在创建定义为主题的结构时遇到了一些问题。

我的目标是创建一种事件处理程序，（无论是编程的好坏，还是不是多线程：目前只是为了练习）。

然后我的想法是创建一个指向函数的指针向量，并将这个向量放在一个映射中，其中键是一个字符串。

我一定是在做一些概念上的错误，因为我遇到了一些奇怪的错误：我的代码如下（错误在最后）：

```
.h file
//ptr to function
typedef int (*pt2Function)(void*);
typedef std::vector<pt2Function> fPtrVector;

class eventDispatcher
{

public:
    //stuff 
    void addListener(std::string,pt2Function);

protected:
    //stuff
     std::map<std::string,fPtrVector> _listeners;
}; 
```

这是cpp：

```
.cpp file

void eventDispatcher::addListener(std::string eventName ,pt2Function function)
{
  std::map<std::string,fPtrVector>::iterator it;

  it=this->_listeners.find(eventName);
  if(it != this->_listeners.end())
  {
//do something
  }
  else 
  {
    std::vector<pt2Function> tmp;
    tmp.insert(function);  // here occurs error 1

    this->_listeners.insert(eventName,tmp);  // here occurs error 2
    std::cout<<"cnt: "<< this->_listeners.count(); 
  } 
```

}

我得到的错误是：

```
1)  no matching function for call to 'std::vector <int (*)(void*), std::allocator<int (*)(void*)> >::insert(int (*&)(void*))'

2)  no matching function for call to 'std::map<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::vector<int (*)(void*), std::allocator<int (*)(void*)> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::vector<int (*)(void*), std::allocator<int (*)(void*)> > > > >::insert(std::string&, std::vector<int (*)(void*), std::allocator<int (*)(void*)> >&)' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:55:53.740

没有变体[`std::vector::insert()`](http://en.cppreference.com/w/cpp/container/vector/insert)采用单个参数：都采用一个迭代器，指示新元素必须插入的位置。用于[`std::vector::push_back()`](http://en.cppreference.com/w/cpp/container/vector/push_back)添加`function`。

[`std::map::insert()`](http://en.cppreference.com/w/cpp/container/map/insert)有几种变体，但您尝试使用的变体采用[`value_type`](http://en.cppreference.com/w/cpp/container/map)的`map`，其定义为：

```
value_type  std::pair<const Key, T> 
```

在你的情况下`value_type`是`std::pair<std::string, fPtrVector>`：

```
this->_listeners.insert(std::pair(eventName,tmp)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T09:04:57.357

如果你检查一个对你的引用，[`insert`](http://en.cppreference.com/w/cpp/container/vector/insert)你会发现它有两个参数，一个迭代器和值。要添加一个值，请使用 eg[`push_back`](http://en.cppreference.com/w/cpp/container/vector/push_back)代替。

对于地图，您可以`_listeners[eventName] = tmp;`改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:55:39.253

1)通过使用迭代器指定位置`insert()`的工作方法。`std::vector`对于您的情况，您可以使用`push_back()`.

2) 使用`insert(std::make_pair(eventName, tmp))`and 将创建地图所​​需的值类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T08:56:03.507

1.  您正在寻找`std::vector::push_back`（[请参阅`std::vector`此处](http://www.cplusplus.com/reference/stl/vector/)的文档）。

2.  您正在寻找`std::map::operator []`（[请参阅`std::map`此处](http://www.cplusplus.com/reference/stl/map/)的文档）。

# javascript - 从另一个选择框填充选择框并使用数据库连接

> ID：11842361
> 
> 赞同：1
> 
> 时间：2012-08-07T08:51:38.803
> 
> 标签：javascript, jquery, python, django

我有两个选择框：一个是国家，另一个是城市。当用户选择一个国家时，该国家的适当城市应填充在数据库中的“城市”中。

我是 jquery 和 javascript 的新手，我不知道如何实现这一点。如果有人给我一个执行此功能的示例代码，我们将不胜感激。我不知道，因为我是脚本语言的新手，所以我几乎被困住了。

我在用python实现的django框架中的一种形式中使用它。

先感谢您

```
<!DOCTYPE html>
<html>
<head>
  <style>
  div { color:red; }
  </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <select name="country" id="country">
    <option value = "india">india</option>
    <option value = "USA">USA</option>
    <option value = "UK">UK</option>
    <option value = "China">China</option>
    <option value = "Sweden">Sweden</option>
    <option value = "Germany">Germany</option>
  </select>

  <select name="cities" id="cities">
  <option value = ""></option>
  </select>  
  <div></div>  

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:15:11.263

试试这个：

在您的模板中

```
 $('#country').change(function() { 
    var value = $(this).attr('value'); 
    var request = $.ajax({
        url: "/getcities/",
        type: "GET",
        data: {country : value},
        dataType: "json",

        success: function(data) {
         //Popluate combo here by unpacking the json
        }
    });

}); 
```

在您看来：

```
def getcities(request)
    if request.method == "GET":
        country = request.GET["country"]
        cities = Cities.objects.filter(country=country)
        results = [{'city': str(city.name), 'id':city.id} for city in cities]
        json = simplejson.dumps(results)
        return HttpResponse(json, mimetype='application/json') 
```

您必须将 url /getcities/ 映射到 urls.py 中的视图。

# tinymce - tinyMCE 编辑器删除 div 元素中的自定义标签

> ID：11842362
> 
> 赞同：1
> 
> 时间：2012-08-07T08:51:43.497
> 
> 标签：tinymce, custom-tag

我需要在 tinyMCE 中添加一些自定义标签。如果它们单独在 body 标签中也没关系，但是如果我将它们放入 div 标签中，那么编辑器会将其删除。这是示例：

我需要添加“unsubthis”标签，所以我有这个配置文件

```
 <script type="text/javascript">
  tinyMCE.init({
  mode: "textareas",
  verify_html : false,
  skin: "o2k7",
  theme: "advanced",
  entity_encoding: "raw",
  plugins: "fullpage,safari,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
  theme_advanced_buttons1: "newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
  theme_advanced_buttons2: "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
  theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
  theme_advanced_buttons4: "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
  theme_advanced_toolbar_location: "top",
  theme_advanced_statusbar_location: "bottom",
  theme_advanced_toolbar_align: "left",      
  custom_elements: "unsubthis",
  valid_children: "+div[unsubthis]",
  extended_valid_elements: "unsubthis"
}); 
```

如果我打开编辑器并将其放入 HTML

```
<html>
<head>
<title>Document Title 1</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
   <unsubthis></unsubthis>
</body>
</html> 
```

然后更新一切都很好，如果我查看 HTML，代码看起来一样。如果我尝试将其放入 HTML 中，就会出现问题：

```
<html>
<head>
<title>Document Title 1</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
    <div>
      <unsubthis></unsubthis>
    </div>
</body>
</html> 
```

然后 unsubthis 将在更新后被删除，我会得到这个代码

```
<html>
<head>
<title>Document Title 1</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
    <div></div>
</body>
</html> 
```

仅当 unsubthis 标签为空时才会出现问题，我该如何解决？

我目前使用的是 3.5.6 版本。

# php - 我的 php 正则表达式对吗？

> ID：11842368
> 
> 赞同：0
> 
> 时间：2012-08-07T08:51:56.517
> 
> 标签：php, regex

我不擅长正则表达式。如何做一个php正则表达式，判断一个字符串第一个词是`(a-h)`，第二个词是`@`，第三部分是数字（长度范围从4-15）？

我的 php 正则表达式对吗？

```
$title  =  'c@356920'; //h@907659042423
if (preg_match ("/^[a-h]{1}\@[0-9]{4,15}/i", $title)) {
    echo 'ok';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:55:09.610

如果这就是您需要匹配的全部内容，则需要添加后锚符号 ( `$`)。因此，您需要将代码从该更改为：

```
$title  =  'c@356920'; //h@907659042423
if (preg_match ("/^[a-h]{1}@[0-9]{4,15}$/i", $title)) {
    echo 'ok';
} 
```

您也不需要转义`@`符号。按原样，您的正则表达式将匹配以该序列开头的任何字符串，但允许随后跟随任何其他数量的数据（从问题中我无法判断这是否是您所追求的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:55:56.780

到目前为止看起来不错，但有两个小改动

```
/^[a-h]{1}@[0-9]{4,15}$/i 
```

*   不要逃避`@`
*   `$`最后，因为否则之后您允许任意数量的任意字符（它是“行尾”-锚点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:15:17.413

如果我们在这里打高尔夫球，我建议：

```
/^[a-h]@\d{4,15}$/i 
```

（删除 {1} 并将 [0-9] 替换为 \d）

# c# - 从单独的后台工作人员更改表单

> ID：11842373
> 
> 赞同：1
> 
> 时间：2012-08-07T08:52:09.167
> 
> 标签：c#, multithreading, serial-port

我有一个表单，加载时会启动一个循环后台工作程序，该工作程序每半秒从 USB 设备获取数据。
一旦程序从 USB 设备接收到一条新数据，它就会运行一个函数。
该`_Dowork`功能有

```
while (true)
{
    portConnection.Write("?");
    Thread.Sleep(50);
} 
```

然后我有一个单独的例程，在收到数据时运行

```
private void portConnection_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
} 
```

这是无法在原始表单上设置值的例程，因为该函数显然位于单独的线程上。
我怎样才能使这个例程能够影响原始形式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:03:48.310

尝试这样的事情：

```
private void InvokeIfRequired(Control target, Delegate methodToInvoke)
{
    if (target.InvokeRequired)
        target.Invoke(methodToInvoke);
    else
        methodToInvoke.DynamicInvoke();
} 
```

调用你的方法`ProcessStatsReceived`和`methodToInvoke`做你的东西......

您可以在 ProccessStatusReceived 中像这样使用它：

```
InvokeIfRequired(this, new MethodInvoker(delegate() { this.lblStatus.Text = (string)e.Data; })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:55:29.263

BackgroundWorker 的报告进度部分就是为此而生的。

这将使 DoWork 方法能够调用 GUI 线程上的方法。

有关详细信息，请参阅此[msdn](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)文章。

简而言之，需要的部分是：

绑定进度更改处理程序：

```
bw.ProgressChanged += bw_ProgressChanged; 
```

设置 BW 以允许进度报告：

```
bw.WorkerReportsProgress = true; 
```

实现进度变化方法：

```
private void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
  //your logic to be executed on the GUI thread here
} 
```

然后像这样从 DoWork 调用它：

```
bw.ReportProgress( progressPercentage, userState ) 
```

`progressPercentage`并且`userState`可以让用户将数据从后台线程传输到`ProgressChanged`GUI 线程上的方法。

# sql-server - 当我将某些记录插入我的 DbContext 时，为它们指定主键

> ID：11842378
> 
> 赞同：-1
> 
> 时间：2012-08-07T08:52:24.973
> 
> 标签：sql-server, entity-framework, ef-code-first, identity

有时，我需要插入特定 ID 作为要添加到数据中的实体的主键。在经典的 MS SQL 中，您可以通过在调用语句`SET IDENTITY_INSERT tablename ON`之前调用来执行此操作。`INSERT INTO`我似乎无法找到使用 EF 4.1 Code First 的方法来做同样的事情。

```
Dim specificIdRecord As New Record() With {
    .RecordID = 25,
    'other settings here
}

myDbContext.Records.Add(specificIdRecord)
myDbContext.SaveChanges()

specificIdRecord.RecordID '<== this does not always equal 25! 
```

也没有抛出错误告诉我它忽略了我的 RecordID 并自动生成一个。

注意：我不想[修改我的模型](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/648f9f5f-b844-48cb-85c3-74c8f2ee87cc)或[修改我的上下文](https://stackoverflow.com/questions/5275306/does-entity-framework-4-code-first-have-support-for-identity-generators-like-nhi)，因为这仅适用于偶尔的插入操作。此外，我确实看到了一种[可能的解决方案](http://blog.kongnir.com/2012/06/22/c-net-entity-framework-how-to-insert-record-into-database-table-with-auto-increment-primary-id/)，`ExecuteStoreCommand`用于手动设置`IDENTITY_INSERT`插入运行之前和之后，但这将需要三个事务 AFAIK，我希望 EF 将这一切打包成一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:29:39.190

EF 不支持这个。如果您`IDENTITY`在数据库中使用列，则您的映射包含此信息，并且您永远不能将键值发送到数据库（EF 将自动跳过它）。

在这种情况下，最好的选择是`ExecuteStoreCommand`同时用于设置`IDENTITY_INSERT`和`INSERT`SQL 命令。

任何基于 EF 的解决方法都需要两种不同的 EF 映射：一种将密钥集作为数据库生成，另一种没有此设置。当您想要插入显式键值时，您将使用第一个映射进行公共处理和第二个映射。使用两个映射意味着使用两个不同的 EDMX 文件或两个不同的`DbModelBuilder`实例（两种上下文类型）。

一旦你有两个映射，你仍然需要解决打开`IDENTITY_INSERT`和关闭的问题。这将要求您创建自定义提供程序包装器以将这些 SQL 命令附加到每个生成的`INSERT`命令。

# ios - 使用 UIWebView 创建样式文本（视网膜屏幕上模糊）

> ID：11842383
> 
> 赞同：0
> 
> 时间：2012-08-07T08:52:38.970
> 
> 标签：ios, cocoa-touch, uiwebview, retina-display

我对 iOS 开发非常陌生，并且继承了一些代码。我遇到过这个：

```
htmlString = [NSString stringWithFormat:@"<html><head></head><style type=\"text/css\">body h1{font-family:Helvetica Neue;font-weight:bold;font-size: 25px;background-image: -webkit-gradient(linear,left top, left bottom,from(white),to(CCFF00));-webkit-background-clip:text;-webkit-text-fill-color: transparent;}h1:after{ text-shadow:5px 2px 2px #000; content:\"%@\"; color:#000; position:absolute; left:-2px;z-index:-1 }</style><body><h1 style=\"\">%@</h1></body></html>",[loginValueClass sharedloginValueClass].userName,[loginValueClass sharedloginValueClass].userName];
web1.opaque = NO;
web1.backgroundColor=[UIColor clearColor];
web1.userInteractionEnabled = FALSE;
[web1 loadHTMLString:htmlString baseURL:nil]; 
```

其中 web1 是 UIWebView 类型。

它会生成一些带有渐变的样式文本。但是，它在视网膜屏幕上显得模糊。加载屏幕时也有明显的延迟。

我的问题是，这真的是创建此类样式文本的最佳方式吗？如果是，我该如何解决视网膜屏幕上的模糊问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:33:38.430

它在 Retina 显示器上很模糊，因为`-webkit-background-clip:text`似乎没有考虑显示器的分辨率，所以剪辑是在较低的分辨率下完成的。

`UIWebViews`仅当您有几种不同样式的文本时才有意义，例如红色的几个单词，较大字体大小的几个单词等。

对于简单的文本， a`UILabel`效率更高，并且可以很好地设置样式（阴影等）。您可以在此处找到示例：

*   [StyleLabel：带有样式的 UILabel](http://dev.doukasd.com/2011/05/stylelabel-a-uilabel-with-style/) ( [StyleLabel.h](https://github.com/doukasd/iOS-Components/blob/master/Views/StyleLabel.h) , [StyleLabel.m](https://github.com/doukasd/iOS-Components/blob/master/Views/StyleLabel.m) )
*   [FX标签](https://github.com/nicklockwood/FXLabel)

# php - GD图像拼接

> ID：11842387
> 
> 赞同：0
> 
> 时间：2012-08-07T08:52:59.160
> 
> 标签：php, html, gd

我使用 php 中的 GD 库为一个长行中的一系列字母创建了一个大图像（它最初需要在一个长行中）。我想将创建的图像拼接成多个指定宽度的图像，并将所有图像放入一个图像中，在另一个图像下显示一个图像。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:02:26.000

您应该可以通过 1) 创建新的空图像

```
imagecreate($width,$height);  (or imagecreatetruecolor($w,$h) ) 
```

2）打开原始图像（oneliner）

```
imagecreatefromjpeg($path) 
```

（显然假设它是 jpg） 3）循环原始图像“当它没有完成时”并使用函数复制片段

```
imagecopy($destination_img , $source_img , $dst_x , $dst_y , $src_x , $src_y , $src_w ,  $src_h) 
```

在每个周期，您应该更改 dst/src 坐标，以匹配您选择复制的新“窗口”

您可以在此处找到有关如何使用 GD 的更多信息：http: [//php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)

# batch-file - FOR /F 中的变量

> ID：11842388
> 
> 赞同：1
> 
> 时间：2012-08-07T08:52:59.920
> 
> 标签：batch-file, dos

我是编写批处理文件的新手，我有一个 simple.txt 及其内容：

```
aaa 1
bbb 2
ccc 3
bbb 4
aaaa 5
aaccdd 7 
```

并运行批处理文件：

```
@echo off
FOR /F "tokens=2 delims= " %%a in ('FindStr "aa" ^"simple.txt^"') DO (
    SET TEMP_VAR=%%a
    echo %TEMP_VAR%
) 
```

结果是

```
7
7
7 
```

但我期望的是

```
1
5
7 
```

为什么会这样？我认为它是类似 C 或类似 Java 的 for 循环。真的和他们不一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:07:18.340

一个人学习批次的经典问题:-)

整个 FOR 循环，包括括号的内容，在循环执行之前被解析。正常`%TEMP_VAR%`扩展作为解析的一部分进行，因此您看到的值是循环执行*之前存在的值。*

解决方案很简单：`setlocal enableDelayedExpansion`在顶部添加，然后使用`!TEMP_VAR!`。

```
@echo off
setlocal enableDelayedExpansion
FOR /F "tokens=2 delims= " %%a in ('FindStr "aa" ^"simple.txt^"') DO (
    SET TEMP_VAR=%%a
    echo !TEMP_VAR!
) 
```

HELP 文档提供了问题的描述。从命令行键入`HELP SET`或。`SET /?`正常与延迟扩展的描述从顶部向下大约 2/3。

# linux - 使用 gnuplot 绘制图形

> ID：11842389
> 
> 赞同：0
> 
> 时间：2012-08-07T08:53:00.303
> 
> 标签：linux, gnuplot

```
htmlResponseBytes 39842 397888
cssResponseBytes 109265 108988
imageResponseBytes 205179 206662
javascriptResponseBytes 468573 476888
otherResponseBytes 4326 4378 
```

我想使用`gnuplot`. 第 1 列应出现在 x 轴上，第 2 列和第 3 列应使用条形图绘制。今天第二列应该有图例，昨天第三列应该有图例。此外，这些值应该出现在每个条形图的顶部。

我试过这个

```
 reset
   dx=5.
   n=2
   total_box_width_relative=0.75
   gap_width_relative=0.1
   d_width=(gap_width_relative+total_box_width_relative)*dx/2.
   reset
   set term png truecolor
   set output "profit.png"
   set xlabel "Year"
   set ylabel "Profit(Million Dollars)"
   set grid
   set boxwidth total_box_width_relative/n relative
   set style fill transparent solid 0.5 noborder
   plot "profit.dat" u 1:2 w boxes lc rgb"green" notitle,\
   "profit.dat" u ($1+d_width):3 w boxes lc rgb"red" notitle 
```

[从此处复制此代码，适用于他的数据文件，但不适用于粘贴在顶部的我的数据文件](http://gnuplot-surprising.blogspot.in/2011/09/plot-histograms-using-boxes.html?showComment=1344329138033#c5515227792059446213)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:19:21.880

这个怎么样：

```
set style data histogram 
set style histogram cluster gap 1
set xtics rotate by 90
set style fill solid
plot 'test.dat' using 2:xtic(1) lc rgb "blue", \
     '' using 3 
```

# eclipse - 即使 Eclipse Juno 中只有一个选项，键绑定也会弹出快捷方式列表

> ID：11842390
> 
> 赞同：3
> 
> 时间：2012-08-07T08:53:00.710
> 
> 标签：eclipse, key-bindings, eclipse-juno

我安装了 Eclipse Juno 并且键绑定似乎不能正常工作。我的意思是，我确实添加了几个键绑定。

```
Ctrl+B Build in Windows
Shift+Ctrl+B Build All in Windows
Shift+Alt+B Toggle Breakpoint in Debugging 
```

但是当我按下`Ctrl`+`B`时，两者都会出现典型的弹出窗口`Build All`并`Build`出现。

当交换`Build`并`Build All`按下`Ctrl`+时，确实会显示只有一个选项 ( )`B`的弹出窗口。`Build All`

这些绑定存储在哪里，所以我可以直接覆盖它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:05:34.117

[Eclipse 在哪里存储键盘绑定？](https://stackoverflow.com/questions/3471234/where-does-eclipse-store-keyboard-bindings)

您可以在上面的链接中找到绑定的存储位置。如果您浏览指示的文件，您应该识别您的键绑定。我发现的是一堆重复的条目。备份你的文件，这样你就不会搞砸了，并仔细编辑出重复的文件——观察工作键绑定的模式。在此之后，我发现从 Eclipse 中的键编辑器中它仍然显示不应该存在的绑定（可能是某种类型的缓存机制）。我通过编辑器删除了这些绑定，重新启动，问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T01:41:39.120

我已经解决了创建新工作区并重新导入项目的问题。

*不是一个很好的解决方案，但有效。最后。*

# sql - 无 SSIS 的数据传输

> ID：11842391
> 
> 赞同：0
> 
> 时间：2012-08-07T08:53:01.567
> 
> 标签：sql, sql-server, sql-server-2008

我需要将一些数据从 3 个电子表格（我从另一个数据库中获得）传输到数据库表中。这三个电子表格包含反馈数据、客户数据和个人数据。移动时，我需要映射数据之间的外键关系。有什么方法可以在不使用 SSIS 的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:55:25.647

利用`openrowset`

我们可以使用 OPENROWSET 传输数据。但我不认为我们可以在传输数据时标记 FK 关系。你必须在转移后做。

请参阅此处的 MSDN 链接

[开放集](http://msdn.microsoft.com/en-us/library/aa276850%28v=sql.80%29.aspx)

# repository - DDD 聚合根/存储库结构

> ID：11842392
> 
> 赞同：6
> 
> 时间：2012-08-07T08:53:02.050
> 
> 标签：repository, domain-driven-design

我是新手，所以我的理解仍然不稳定。

我的项目中有一个 Person 模型和一个 AccountType 模型。每个人都引用一个帐户类型。

现在，如果我的理解是正确的，那么 Person 肯定是聚合根，而 AccountType 可能不是，因为帐户类型表中的条目几乎是静态的，并且在 Person 之外肯定没有任何意义。

但是，当我创建一个新人时，我需要设置帐户类型，因此我似乎需要一个存储库来访问分配给用户的帐户类型，但是我拥有的存储库代码只允许访问聚合根。

构建这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T12:11:02.740

我认为`AccountType`这是从聚合根引用的另一个聚合`Person`根。有许多简单的聚合根是绝对正常的，请参阅[Vaughn Vernon 的文章](http://domaindrivendesign.org/library/vernon_2011)，请参阅[第 1 部分，第 1 页。5](http://dddcommunity.org/sites/default/files/pdf_articles/Vernon_2011_1.pdf)：

> 在一个使用 [Qi4j] 的金融衍生品行业项目中，Niclas [Hedhman] 报告说，他的团队能够设计大约 70% 的聚合，其中仅包含一些值类型属性的根实体。剩下的 30% 总共只有两到三个实体。这并不表示所有域模型都会有 70/30 的拆分。它确实表明高百分比的聚合可以限制为单个实体，即根。

在您的问题中，还不太清楚，访问存储库以初始化聚合根的属性有什么问题：

> 但是，当我创建一个新人时，我需要设置帐户类型，因此似乎我需要一个存储库来访问要分配给用户的帐户类型，但是我拥有的存储库代码只允许访问聚合根。

类的初始化`Person`应该由`PersonFactory`.

这`PersonFactory`是一个服务，所以它可以引用来`AccountTypeRepository`找到合适的`AccountType`实例并返回该类型的完全构造的 Person 实例。

*更新*：我还想补充一点，[通过 id 引用您的 AccountType](https://stackoverflow.com/questions/4919687/aggregate-root-references-other-aggregate-roots/4922100#4922100)也同样有效。这一切都是为了方便，有时如果您使用具有丰富数据绑定功能（如 WPF 或 Spring MVC）的 GUI 框架，则直接访问引用更方便（当然，仅用于显示，而不是用于修改），因此您可以直接访问此属性以显示在视图中。如果您使用 id 方法，这可能会迫使您创建 ViewModels (FormBeans)，即使是简单的实体也是如此。

* * *

关于[基于查找的解决方案](https://stackoverflow.com/a/4931457/241986)，它适用于非常简单的类似枚举的字段，我认为这`AccountType`比这更复杂，属于知识级别（参见问题的讨论）。

回到聚合和值对象之间的选择（另见此[）](https://stackoverflow.com/questions/75446/value-vs-entity-objects-domain-driven-design)，这取决于您的信息系统的抽象级别和配置能力。从类的角度来看，`Account`它可能看起来像一个值对象，您可以将一个替换`AccountType`为另一个：这就像在颜色值对象之间切换一样，但从知识水平的角度来看，您的用户可能希望自定义行为选择 AccountType 的系统，例如更改特定“Premium”帐户的折扣。因此，如果您有一定的知识水平，那么`AccountType`将是具有身份的东西，它会引导您创建一个单独的存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:45:31.837

最重要的是（假设 AccountType 有一个带有 ID 的实体，而不是一个简单的枚举）......

**Account Type 和 Person 只能通过 ID 相互引用。**

# asp.net-mvc - mvc剃须刀性能

> ID：11842398
> 
> 赞同：-3
> 
> 时间：2012-08-07T08:53:16.020
> 
> 标签：asp.net-mvc, performance, razor

这些示例在性能方面是否存在差异

## 第一的

这之间的区别

```
@foreach (...)
{
    @Html.DisplayFor(...)
} 
```

然后

```
@foreach (...)
{
    Html.DisplayFor(...);
} 
```

## 第二

这之间的区别

```
@{
    foreach (...)
    {
    }

    if(...)
    {
    }
} 
```

然后

```
@foreach (...)
{
}

@if(...)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:54:52.057

不，在前两个示例中，@ 被简单地忽略了。在第二个示例中，不同之处在于您有两个代码块而不是一个。这不会显着影响性能。

# c# - 调整大数组的大小

> ID：11842405
> 
> 赞同：2
> 
> 时间：2012-08-07T08:53:52.870
> 
> 标签：c#, arrays

我有一个大小为 2 GB 的数组（填充了音频样本）。现在我想为该数组应用一个过滤器。这个过滤器生成的样本比输入源多 50%。所以现在我需要创建大小为 3 GB 的新数组。现在我给了 5 GB 的内存使用。但是如果这个过滤器只能在那个源数组上运行，并且只需要这个数组中的一些空间。问题：我可以在 C# 中分配一个内存，它可以在不创建第二个内存块的情况下调整大小，然后删除第一个内存块？我只是想，如果 PC 中的内存被划分为 4 kB 页面（或更多），那么为什么 C# 不能（？）使用那个好的特性呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:58:49.727

> 问题：我可以在 C# 中分配一个内存，它可以在不创建第二个内存块的情况下调整大小，然后删除第一个内存块？

不，您不能在 .NET 中调整数组的大小。如果要增加数组的大小，则必须创建一个更大的新数组并将现有数组中的所有数据复制到新数组中。

为了解决这个问题，您可以提供自己的“数组”实现，基于分配较小的内存块，但将其呈现为一个大的数据缓冲区。这方面的一个例子`StringBuilder`是基于字符块的实现，每个块都是一个单独的`Char[]`数组。

另一种选择是使用 P/Invoke 来访问低级内存管理功能，例如[VirtualAlloc](http://msdn.microsoft.com/en-us/library/aa366887%28v=vs.85%29)，它允许您提前保留内存页面。您需要在 64 位进程中执行此操作，因为 32 位进程的虚拟地址空间只有 4 GB。您可能还需要使用[不安全的代码和指针](http://msdn.microsoft.com/en-us/library/t2yzs44b.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T09:06:32.590

如果您的过滤器可以就地工作，只需在开始时多分配 50% 的空间。您只需要知道原始样本的实际长度。

如果该代码并不总是有效并且您不想事先消耗更多内存，您可以分配一半的原始数组（扩展数组）并检查您的访问与哪个部分相关：

```
byte[] myOriginalArray = new byte[2GB]; // previously allocated 

byte[] myExtensionArray = new byte[1GB]; // 50% of the original
for(... my processing code of the array ...)
{
  byte value = read(index);
  ... process the index and the value here
  store(index, value);
}

byte read(int index)
{
  if(index < 2GB) return myOriginalArray[index];
  return myExtensionArray[index - 2GB];
}

void store(int index, byte value)
{
   if(index < 2GB) myOriginalArray[index] = value;
   myExtensionArray[index - 2GB] = value;
} 
```

您为对数组的每次访问添加索引检查和减法开销。对于某些情况，这也可以变得更聪明。例如，对于不需要访问扩展的部分，您可以使用更快的循环，对于需要写入扩展部分的部分，您可以使用较慢的版本（两个连续循环）。

# excel - Excel 2010 - 仅超链接文本而不是整个单元格

> ID：11842407
> 
> 赞同：14
> 
> 时间：2012-08-07T08:53:57.147
> 
> 标签：excel, hyperlink

有没有办法在 Excel 2010 中仅添加文本而不是整个单元格的超链接？

我只能插入一个影响整个单元格的超链接（甚至是文本后的空白），但我希望拥有它，以便用户可以单击单元格的非超链接部分以选择没有超链接的单元格激活超链接。

这可能吗（最好没有VB）？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T09:04:42.800

我不确定..我刚刚写了这个，但它的作用与添加超引用相同（尽管您仍然可以选择单元格的空白（在文本完成后）并且它不会跟随链接）

```
=CONCATENATE("This is your ", HYPERLINK("http://www.google.com","Google"), " link") 
```

仅供参考，您可以按住 ALT 键并单击单元格而不打开 URI

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-15T09:16:57.933

我通过关闭单元格格式中的“换行文本”来解决这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-13T12:57:39.630

真的，如果您打开了自动换行，整个单元格将充当超链接。如果您关闭了自动换行，则只有文本将充当超链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-02T22:47:18.607

缩进（主页→对齐→缩进：1）使整个单元格成为超链接。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-01-21T17:07:41.877

这是一件非常奇怪的事情。如果我链接到 .doc 或 docx 文档，则仅链接文本。如果我链接到 .txt 文档，则整个单元格就是一个链接。我认为这只是一个奇怪的excel故障。

# jsf-2 - 将静态 HTML（无效 XHTML）文件包含到 JSF Facelets

> ID：11842408
> 
> 赞同：3
> 
> 时间：2012-08-07T08:53:57.723
> 
> 标签：jsf-2, facelets

我有以下问题，我们在远程主机上运行 Web 内容管理器 (WCM)，它负责生成页眉和页脚 HTML 文件。即`header.html`，`footer.html`。HTML 文件的语法格式不正确，WCM 生成的文件有

1.  空格字符 ( `&nbsp;`)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T09:11:11.440

我想这与这个问题有关：[Include non-Facelet content in a Facelet template](https://stackoverflow.com/questions/1489937/include-non-facelet-content-in-a-facelet-template)

我不建议将 XHTML 与 HTML 混合，但很可能浏览器不会对提到的字符有任何问题，因此您可以尝试直接渲染文件内容，例如通过

```
<h:outputText value="#{yourBean.headerCode}" escape="false" /> 
```

而 YourBean.getHeaderCode() 会读出头文件的内容并将其作为字符串返回。YourBean 应该是 ApplicationScoped。

更快更好的是让 WCM 生成有效的 XHTML。

# c - 在 GCC 中以编程方式调用调试器

> ID：11842409
> 
> 赞同：0
> 
> 时间：2012-08-07T08:54:02.043
> 
> 标签：c, gcc, gdb, arm

是否可以从 GCC 以编程方式闯入调试器？

例如，我想要这样的东西： `#define STOP_EXECUTION_HERE ???` 当放在一些代码行上时会强制调试器停在那里。有可能吗？我找到[了一些解决方案](http://www.linuxquestions.org/questions/programming-9/how-to-programmatically-break-into-gdb-from-gcc-c-source-230854/)，但我无法使用它，因为在我的嵌入式 ARM 系统上我没有`signal.h`。

（但是我可以使用内联汇编）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:05:37.870

What you are trying to do is called [software breakpoint](http://en.wikipedia.org/wiki/Breakpoint#Software)

It is very hard to say precisely without knowing how you actually debug. I assume your embedded system runs gdbstub. There are various possibilities how this can be supported:

**Use dedicated [BKPT](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0068b/CIHBIGGI.html) instruction**

This could be a standard way on your system and debugger to support software breakpoints

**Feed invalid instruction to CPU**

gdbstub could have placed own `UNDEF` ARM mode handler placed. If you go this route you must be aware of current CPU mode (ARM or THUMB), because instruction size will be different. Examples of undefined instructions:

```
ARM: 0xE7F123F4
THUMB: 0xDE56 
```

In runtime CPU mode could be found from the lowest bit of PC register. But the easier way is to know how you compiled object file, where you placed software breakpoint

**Use SWI instruction**

We did so when used RealView ICE. Most likely this does not apply to you, if you run some OS on your embedded system. SWI is usually used by OS to implement system calls

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:01:59.293

通常，最好的方法是通过设备工具链提供的库函数。

我无法对其进行测试，但一般的解决方案可能是插入 ARM[`BKPT`指令](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0068b/CIHBIGGI.html)。它需要一个直接的参数，你的调试器可能会解释它，可能会产生奇怪的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:58:37.970

您可以从 GDB 运行您的应用程序，并在代码调用中，例如[`abort`](http://linux.die.net/man/3/abort). 这将在此时停止您的应用程序。我不确定在那之后是否可以继续。

# c++ - 函数不会更改传递的指针 C++

> ID：11842416
> 
> 赞同：48
> 
> 时间：2012-08-07T08:54:26.457
> 
> 标签：c++, function, pointers

我有我的函数，我正在`targetBubble`那里填充，但是在调用这个函数后它没有被填充，但我知道它被填充在这个函数中，因为我有输出代码。

```
bool clickOnBubble(sf::Vector2i & mousePos, std::vector<Bubble *> bubbles, Bubble * targetBubble) {
    targetBubble = bubbles[i];
} 
```

我正在传递这样的指针

```
Bubble * targetBubble = NULL;
clickOnBubble(mousePos, bubbles, targetBubble); 
```

为什么它不工作？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-08-07T08:55:57.380

因为您正在传递指针的副本。要更改指针，您需要以下内容：

```
void foo(int **ptr) //pointer to pointer
{
    *ptr = new int[10]; //just for example, use RAII in a real world
} 
```

或者

```
void bar(int *& ptr) //reference to pointer (a bit confusing look)
{
    ptr = new int[10];
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-08-07T08:56:49.580

您正在按值传递指针。

如果要更新指针，请传递**对指针的引用。**

```
bool clickOnBubble(sf::Vector2i& mousePos, std::vector<Bubble *> bubbles, Bubble *& t) 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-08-07T09:02:33.250

如果你写

```
int b = 0;
foo(b);

int foo(int a)
{
  a = 1;
} 
```

您不会更改“b”，因为 a 是 b 的副本

如果你想改变 b 你需要传递 b 的地址

```
int b = 0;
foo(&b);

int foo(int *a)
{
  *a = 1;
} 
```

指针也是如此：

```
int* b = 0;
foo(b);

int foo(int* a)
{
  a = malloc(10);  // here you are just changing 
                   // what the copy of b is pointing to, 
                   // not what b is pointing to
} 
```

所以要改变 b 指向传递地址的位置：

```
int* b = 0;
foo(&b);

int foo(int** a)
{
  *a = 1;  // here you changing what b is pointing to
} 
```

hth

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-07T08:56:18.177

除非您通过（非 const）引用或作为双指针传递指针，否则您无法更改指针。按值传递会生成对象的副本，并且对对象的任何更改都是针对副本而不是对象进行的。如果按值传递，则可以更改指针指向的对象，但不能更改指针本身。

阅读此问题以帮助更详细地了解差异[在 C++ 中何时通过引用传递和何时通过指针传递？](https://stackoverflow.com/questions/3613065/when-to-pass-by-reference-and-when-to-pass-by-pointer-in-c)

# xcode - 单元测试总是“成功的”

> ID：11842417
> 
> 赞同：0
> 
> 时间：2012-08-07T08:54:30.397
> 
> 标签：xcode, cocoa, unit-testing

我最近在我的项目的测试目标中添加了一个新的单元测试，当我点击*Product > Test*时，Xcode 说“测试成功”。我相当肯定测试应该会失败，因为测试中的方法还没有实现。我在测试中添加了一个断点，但它永远无法到达；测试仍然“成功”而没有中断。越来越怀疑，我添加`STFail`了一个不同的测试 - 仍然是“测试成功”。

我确信单元测试在过去确实有效。从那以后，我没有对我所知道的项目结构进行任何更改；只是我已将 Xcode 更新到 4.4。

我发现[这篇文章](https://stackoverflow.com/questions/5574366/xcode-debugging-a-unit-test-target)解释了如何检查方案的测试设置，它们对我来说看起来是正确的：测试目标列在“测试”下，并且它和它的所有测试都被检查了。

我该怎么做才能找到测试总是成功的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:41:25.297

该问题是由我添加到项目中的框架引起的，该框架导致执行错误。

我决定暂时忽略单元测试并继续进行实际项目。当我运行它时，它产生了一个错误：

> dyld：库未加载：<框架名称>

看到这一点后，我删除了新引用的框架，单元测试按预期运行。然后，我在测试结果页面的最右侧发现了弹出测试控制台输出的小按钮。Xcode 一直隐藏错误消息，声称测试成功运行。

# android - 在 Android 中使用 ActionBarSherlock 时如何在 ActionBar 选项卡上绘图？

> ID：11842418
> 
> 赞同：3
> 
> 时间：2012-08-07T08:54:34.610
> 
> 标签：android, android-actionbar, actionbarsherlock, android-ui

我正在使用[ActionBarSherlock](http://actionbarsherlock.com/)为预 HoneyComb 设备提供 ActionBar。

我的活动有四个片段，即 1\. 用户 2\. 聊天 3\. 视频 4\. 额外，见图

![在此处输入图像描述](../Images/7046e23057e8e6a77e4a4a379089ec83.png)

我使用以下代码创建了 actionBar：-

```
 actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        actionBar.setTitle("Meeting");
        actionBar.setDisplayShowHomeEnabled(false);
        actionBar.setDisplayShowCustomEnabled(false);
        actionBar.setDisplayShowTitleEnabled(false);

        /* Set Custom view */

        ActionBar.Tab tab = actionBar.newTab();
        // tab.setText("Meeting Users");
        tab.setIcon(R.drawable.users);
        tab.setTabListener(this);
        actionBar.addTab(tab);

        tab = actionBar.newTab();
        // tab.setText("Chat");
        tab.setIcon(R.drawable.chat);
        tab.setTabListener(this);
        actionBar.addTab(tab);

        tab = actionBar.newTab();
        // tab.setText("Video");
        tab.setIcon(R.drawable.video_call);
        tab.setTabListener(this);
        tab.select();
        actionBar.addTab(tab);

        tab = actionBar.newTab();
        // tab.setText("Extra");
        tab.setIcon(R.drawable.extra);
        tab.setTabListener(this);
        actionBar.addTab(tab); 
```

**我想在这些选项卡上绘制一些东西，例如在聊天选项卡上绘制和/或闪烁，每当聊天消息到达并且用户在其他选项卡上时。**

我怎样才能做到这一点 ？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:38:52.067

为您的标签使用自定义视图

```
 ActionBar.Tab tab = getSupportActionBar().newTab();
  tab.setCustomView(R.layout.custom_tab_view); 
```

然后您可以查看自定义布局并进行闪烁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:26:14.467

这就是我解决问题的方法，希望它对其他人也有用......

首先我通过扩展 ImageView 创建了一个 CutomImageView

```
package com.myexample.newsessionwindowsrbrdemo;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.renderscript.Font.Style;
import android.widget.ImageView;

public class CustomImageView extends ImageView {
    private int notificationCount;

    /**
     * @param context
     */
    public CustomImageView(Context context) {
        super(context);
        notificationCount = 0;
    }

    public synchronized void incrementNotification() {
        notificationCount--;
        this.invalidate();
    }

    public synchronized void decrementNotification() {
        notificationCount++;
        this.invalidate();
    }

    /**
     * @return the notificationCount
     */
    public synchronized int getNotificationCount() {
        return notificationCount;
    }

    /**
     * @param notificationCount
     *            the notificationCount to set
     */
    public synchronized void setNotificationCount(int notificationCount) {
        this.notificationCount = notificationCount;
        this.invalidate();
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.widget.ImageView#onDraw(android.graphics.Canvas)
     */
    @Override
    protected void onDraw(Canvas canvas) {
        System.out.println("OnDraw is called");
        super.onDraw(canvas);
        Paint paint = new Paint();
        paint.setColor(Color.RED);
        paint.setStyle(Paint.Style.FILL);
        paint.setFakeBoldText(true);
        paint.setTextSize(15);
        canvas.drawText(String.valueOf(notificationCount), 15, 20, paint);
    }

} 
```

然后在创建选项卡时，我将此图像用作

/* 设置自定义视图 */

```
 mView = new CustomImageView(this);
    mView.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT));

    mView.setBackgroundResource(R.drawable.users);
    ActionBar.Tab tab = actionBar.newTab();
    tab.setCustomView(mView);
    tab.setTabListener(this);
    actionBar.addTab(tab); 
```

现在，每当通知更改时，我都会调用 CustomImageView 的增量/减量或 setter 方法，并且新通知会显示在图像上。

![在此处输入图像描述](../Images/bb40939d2629a597fab31acfce9a0976.png)

非常欢迎提出改进此解决方案的建议...

# javascript - .tableSorterPager 不是函数

> ID：11842425
> 
> 赞同：4
> 
> 时间：2012-08-07T08:55:04.550
> 
> 标签：javascript, function

我收到以下错误：

```
.tableSorterPager is not a function. 
```

我在以下代码中找不到我的错误：

```
 <script type="text/javascript">
$(function() {
    $("table")
        .tableSorter({widthFixed: true, widgets: ['zebra']})
        .tableSorterPager({container: $("#pager")});
});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:05:15.700

该错误意味着 tableSorterPager 插件在您调用它之前未初始化。

可能的原因：

1.  您忘记在页面 ( `<script type="text/javascript" src="/path/to/jquery.tablesorter.pager.js"></script>`) 中包含 tableSorter.pager.js 文件。tableSorter pager 是*tableSorter*的独立插件。
2.  在调用tableSorter.js*后，*您将其包含在内。不要忘记，javascript 是按照它在页面上出现的顺序进行评估的
3.  两个插件之间存在命名空间冲突

# asp.net-mvc-3 - ASMX Web 服务、存储过程和 MVC 模型

> ID：11842429
> 
> 赞同：0
> 
> 时间：2012-08-07T08:55:13.507
> 
> 标签：asp.net-mvc-3, web-services, stored-procedures, model, asmx

我正在使用 MVC 3 开发一个 Web 应用程序。此应用程序通过 ASMX Web 服务连接到 SQL Server 数据库。每个 Web 方法调用一个存储过程并返回一个 DataTable。

这是我用来调用存储过程的代码：

```
public static DataTable ExecSP(string StoredProcedureName, List<string> ParameterNames, List<Object> ParameterValues)
    {
        SqlConnection Connection = new SqlConnection(ConfigurationManager.ConnectionStrings["SQLServer"].ConnectionString);
        SqlDataReader Reader = null;
        DataTable SPResult = null;

        try
        {
            Connection.Open();
            SqlCommand Command = new SqlCommand("dbo." + StoredProcedureName, Connection);
            Command.CommandType = CommandType.StoredProcedure;

            if (ParameterNames != null)
            {
                for (int i = 0; i < ParameterNames.Count; i++)
                {
                    SqlParameter Parameter = new SqlParameter(ParameterNames[i], ParameterValues[i]);
                    if (Parameter.SqlDbType.Equals(SqlDbType.NVarChar))
                    {
                        Parameter.SqlDbType = SqlDbType.VarChar;
                    }

                    if (Parameter.SqlValue == null)
                    {
                        Parameter.SqlValue = DBNull.Value;
                    }

                    Command.Parameters.Add(Parameter);
                }
            }
            Reader = Command.ExecuteReader();
            SPResult = new DataTable();
            SPResult.Load(Reader);

        }
        catch (Exception ex)
        {
            throw;
        }
        finally
        {
            Connection.Close();

            if (Reader != null)
            {
                Reader.Close();
            }
        }
        return SPResult;
    } 
```

我想知道是否有一种直接的方法可以将此 DataTable 转换为模型，然后可以将其传递给视图（例如，在 AJAX 帖子中发生的模型绑定），如果没有t，有什么选择。我知道使用 LINQ 可能会解决这个问题，但我不能使用它。

提前致谢。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:20:23.577

找到了解决方案。

我构建了一个通用方法，可以将任何 DataTable 转换为我指定的任何类的 List：

```
public static List<T> Translate<T>(DataTable SPResult, Func<object[],T> del)
    {
        List<T> GenericList = new List<T>();

        foreach (DataRow Row in SPResult.Rows)
        {
            GenericList.Add(del(Row.ItemArray));
        }

        return GenericList;
    } 
```

代表在哪里`del`。调用该方法时，`del`应该是指定类的构造函数。然后，在所有模型类中，我构建了一个构造函数，它接收一个`object[] RowFromTable`

```
public class MyClass
{
    public int ID { get; set; }
    public string Description { get; set; }

    public FormaProcesso(object[] RowFromTable)
    {
        this.ID = (int)RowFromTable[0];
        this.Description = RowFromTable[1].ToString();
    }
} 
```

最后，总而言之，这就是我调用 Web 方法时发生的情况：

```
public List<MyClass> GetAll()
    {

        DataTable SPResult = MyWebService.GetAll().Table;

        return Translate<MyClass>(SPResult, l => new MyClass(l));

    } 
```

[从这里](https://stackoverflow.com/questions/840261/passing-arguments-to-c-sharp-generic-new-of-templated-type)得到想法

# c# - 显示读取为链接的数据库字段

> ID：11842430
> 
> 赞同：-1
> 
> 时间：2012-08-07T08:55:21.920
> 
> 标签：c#, sql

我正在将数据库中的数据添加到项目符号列表中，如下所示

```
<asp:BulletedList ID="BulletedList1" runat="server" 
            DataSourceID="SqlDataSource1" DataTextField="description" 
            DataValueField="id">
        </asp:BulletedList>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:chaaapaConnectionString4 %>" 
            SelectCommand="SELECT * FROM [quiz]"></asp:SqlDataSource> 
```

我希望这显示为链接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:58:14.037

你可以试试 DisplayMode="HyperLink"

```
<asp:BulletedList 
ID="BulletedList1" 
runat="server"  
DisplayMode="HyperLink"
DataSourceID="SqlDataSource1" 
DataTextField="description" 
DataValueField="id">
</asp:BulletedList> 
```

# php - 适用于 PHP 5.3.8 的 APC

> ID：11842439
> 
> 赞同：-2
> 
> 时间：2012-08-07T08:55:42.387
> 
> 标签：php, apc, acceleration

我一直在尝试安装 apc 。我已将 .dll 文件添加到扩展目录（到目前为止，我正在 xamppm、apache 上运行应用程序）。我也更新了 php.ini。当我重新启动 apache 时出现问题，然后出现下一个警告：

```
php startup : unable to load dynamic library c:/xampp/php/ext/php_apc.dll 
```

我认为问题可能是我使用的 php 版本是 5.3.8 。我一直在寻找 php 5.3.8 的 apc 下载，但没有找到，

我能做些什么来解决这个问题？

任何建议都会有所帮助，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T11:07:11.540

我遇到了同样的问题，这是因为我使用的是 x64 版本的 WAMP 服务器，所以我下载了 x64 版本的 php_apc.dll 文件并且它工作正常。这是一个[链接](http://www.mediafire.com/php-win64-extensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:50:49.137

在以下站点中，您将能够找到为 Windows 编译的各种“风味”的扩展，可供下载：

[http://dev.freshsite.pl/php-accelerators/apc.html](http://dev.freshsite.pl/php-accelerators/apc.html)

提示：您提到您使用 XAMPP，据我所知，它是用 VC9 编译的捆绑 PHP 和线程安全的，所以如果您使用 Windows 7 或[其他](http://dev.freshsite.pl/php-accelerators/apc/file/details/apc-319-for-php-53-vc9.html)Windows 版本，您可能正在寻找[这个。](http://dev.freshsite.pl/php-accelerators/apc/file/details/apc-319-for-php-53-vc9-win72008.html)

旁注：作为一个在 win 下大量使用 Apache 和 PHP 的人，我只能建议尽快切换到 Linux：PHP 扩展（以及许多其他事情）在那里并不那么令人头疼。

# django - pip：对javascript库的依赖

> ID：11842444
> 
> 赞同：1
> 
> 时间：2012-08-07T08:56:03.853
> 
> 标签：django, pip, dependency-management

可以通过 pip 声明对其他 python 库的依赖关系`requirements.txt`。

但是可以声明对纯 js 库的依赖吗？

该库可从 github 获得。这些文件应该被下载并用于 django 静态文件处理。

背景：设置自定义 django 应用程序的新开发环境应该很容易。

你如何在你的开发环境中处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T18:14:04.140

[正如@guettli](https://stackoverflow.com/users/633961/guettli)所指出的，您可以使用[fanstatic packages](https://stackoverflow.com/questions/11842444/pip-dependency-on-javascript-library)。

例如`requirements.txt`

```
django
js.jquery
js.bootstrap
js.underscore
# ... 
```

# 没有 django-fanstatic：

然后在你的`settings.py`你可以有：

```
import js
STATICFILES_DIRS = (
    ('js', js.__path__[0]),
) 
```

这就是我在基本模板中的内容：

```
<script src="{{ STATIC_URL }}js/jquery/resources/jquery.min.js"></script>
<script src="{{ STATIC_URL }}js/underscore/resources/underscore-min.js"></script>
<script src="{{ STATIC_URL }}js/bootstrap/resources/js/bootstrap.min.js"></script> 
```

# 使用 django-fanstatic：

[`django-fanstatic`](https://bitbucket.org/fanstatic/django-fanstatic) 提供了一个中间件来改变 WSGI 响应。[此博客文章](http://reinout.vanrees.org/weblog/2011/04/13/django-lightning-talks.html#django-fanstatic-jan-jaap-driessen-boaz-leskes)中的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:39:59.290

pip install only python packages，所以如果你想安装一个Javascript库，你应该创建一个只包含javascript库的包（声明为[附加文件](http://docs.python.org/distutils/setupscript#installing-additional-files)）。

不确定这是否真的很强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T14:51:29.407

Fanstatic 已经创建了很多 javascript 包（jquery，bootstrap，...）

您可以在不使用 fanstatic 的情况下使用这些软件包...

[http://www.fanstatic.org/en/latest/libraries.html](http://www.fanstatic.org/en/latest/libraries.html)

# objective-c - 如何按字节读取音频队列服务缓冲区？

> ID：11842445
> 
> 赞同：1
> 
> 时间：2012-08-07T08:56:07.093
> 
> 标签：objective-c, ios, audioqueueservices

我正在使用音频队列服务从麦克风输入录制声音。

```
-(void)startRecording{

    [self setupAudioFormat:&recordState.dataFormat];

    recordState.currentPacket = 0;

    OSStatus status;
    status = AudioQueueNewInput(&recordState.dataFormat,
                                AudioInputCallback,
                                &recordState,
                                CFRunLoopGetCurrent(),
                                kCFRunLoopCommonModes,
                                0,
                                &recordState.queue);
    if (status == 0)
    {
        // Prime recording buffers with empty data
        for (int i = 0; i < NUM_BUFFERS; i++)
        {
            NSLog(@"buf in");
            AudioQueueAllocateBuffer(recordState.queue, 16000, &recordState.buffers[i]);
            AudioQueueEnqueueBuffer (recordState.queue, recordState.buffers[i], 0, NULL);
        }

        status = AudioFileCreateWithURL(fileURL,
                                        kAudioFileAIFFType,
                                        &recordState.dataFormat,
                                        kAudioFileFlags_EraseFile,
                                        &recordState.audioFile);

        if (status == 0)
        {
            recordState.recording = true;
            status = AudioQueueStart(recordState.queue, NULL);
            if (status == 0)
            {

                NSLog(@"Recording");

            }
        }
    }

    if (status != 0)
    {
        //[self stopRecording];
        NSLog(@"recording failed");
    }

} 
```

回调：

```
void AudioInputCallback(void * inUserData,
                        AudioQueueRef inAQ,
                        AudioQueueBufferRef inBuffer,
                        const AudioTimeStamp * inStartTime,
                        UInt32 inNumberPacketDescriptions,
                        const AudioStreamPacketDescription * inPacketDescs)
{
    RecordState * recordState = (RecordState*)inUserData;
    if (!recordState->recording)
    {
        printf("Not recording, returning\n");
    }

    // if (inNumberPacketDescriptions == 0 && recordState->dataFormat.mBytesPerPacket != 0)
    // {
    //     inNumberPacketDescriptions = inBuffer->mAudioDataByteSize / recordState->dataFormat.mBytesPerPacket;
    // }
    /*
    int sampleCount = recordState->buffers[0]->mAudioDataBytesCapacity / sizeof (AUDIO_DATA_TYPE_FORMAT);
    NSLog(@"sample count = %i",sampleCount);
    AUDIO_DATA_TYPE_FORMAT *p = (AUDIO_DATA_TYPE_FORMAT*)recordState->buffers[0]->mAudioData;
    for (int i = 0; i < sampleCount; i++) {

        if (p[i] > 1000) {
            NSLog(@"%hd",p[i]);
        }

    }*/

    printf("Writing buffer %lld\n", recordState->currentPacket);
    OSStatus status = AudioFileWritePackets(recordState->audioFile,
                                            false,
                                            inBuffer->mAudioDataByteSize,
                                            inPacketDescs,
                                            recordState->currentPacket,
                                            &inNumberPacketDescriptions,
                                            inBuffer->mAudioData);
    if (status == 0)
    {
        recordState->buffers[0] = nil;
        recordState->currentPacket += inNumberPacketDescriptions;
    }

    AudioQueueEnqueueBuffer(recordState->queue, inBuffer, 0, NULL);
} 
```

在这里我想读取记录的缓冲区。是否有可能得到这样的东西：

short[] buffer = ?;//这里应该将音频缓冲区转换为某种结构（仅以short[]为例）

然后我想阅读这个结构的每个元素：

```
 for (int i = 0; i < sizeOfBuffer; i++) {

            bufferVal = buffer[i];
} 
```

简而言之，录制时如何处理缓冲区？

谢谢。

# php - 使用 jquery 访问 smarty 多维数组值

> ID：11842446
> 
> 赞同：0
> 
> 时间：2012-08-07T08:56:11.770
> 
> 标签：php, jquery, smarty

我有一个从 php 传递的数组，如下所示：
`$resultsArr[123]['A']='q';`
`$resultsArr[123]['B']='d';`
`$resultsArr[113]['C']='s';`
`$resultsArr[113]['A']='ss';`
`$resultsArr[113]['B']='sd';`
`$resultsArr[111]['C']='sds';`
`$resultsArr[111]['A']='vv';`
`$resultsArr[111]['B']='vv';`

我需要使用 jquery 访问这个数组的某些值。

我正在尝试像
`keyVal = 123; //dynamically generated`
var pri = '~$results['keyVal']['B']`'

但我在变量“pri”中得到一个空白值如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:07:52.220

你能不能把它转换成 JSON 数组，然后直接在 Javascript 中使用，而不是挑选出数组的单个元素？

```
<script>

    var myArray = <?php echo json_encode($resultsArr); ?>;

</script> 
```

然后使用[jQuery each](http://api.jquery.com/jQuery.each/)读取数组。

从长远来看，这将为您提供更大的灵活性，以便 javascript 可用于读取和操作。

**编辑**

您可以像这样读取特定元素，这将是`alert`“vv”：

```
<script>
    var myVar = myArray[111].A;
    alert(myVar);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:52:39.407

**在 php 中使用：**

$ResultsArr = json_encode($resultsArr);

$this->jsonResultsArr = $ResultsArr; //它似乎你在使用 smarty。

**在 JavaScript 中**

jsonResultsArr = "~$jsonResultsArr`";

要求值 = jsonResultsArr[111].A;

# xcode - XCODE：如何在函数中获取标签值？

> ID：11842453
> 
> 赞同：1
> 
> 时间：2012-08-07T08:56:18.010
> 
> 标签：xcode

我使用了一个标签并拆分了“ **HELLO** ”这个词。现在我需要在另一个函数中匹配单词`-(void)matchWords`，但问题只是最后一个标签正在匹配。我无法匹配其他标签。

例如“ **HELLO** ”这个词就在那里，当我点击**“H”**时，字母**“H”**应该以任何颜色突出显示，但问题是对于输入中的任何可匹配字母，只有**“o”**得到突出显示......我用**iTag**为包含**unicharacters**的拆分标签设置标签值。

这是我的功能：

```
- (IBAction)onClick1:(id)sender {

NSString *title = [(UIButton *)sender currentTitle];
for(i=0;i<vCount;i++) {
    Str = [NSString stringWithFormat:@"%c",[StrName characterAtIndex:i]];
            if([title isEqualToString:Str]){
   MyLable1.backgroundColor = [UIColor greenColor];
 }}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:21:05.040

你不能只使用类似的东西：

```
NSString *searchWord = @"Hello";    //The word to search against
NSString *searchChar = (UIButton *)sender.title;    //The character being searched
if ([searchWord rangeOfString:searchChar].location != NSNotFound)    //If found, highlight label
{
MyLable1.backgroundColor = [UIColor greenColor];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:30:24.787

```
- (IBAction)onClick1:(id)sender {

    NSString *title = [(UIButton *)sender currentTitle];
    for(i=0;i<vCount;i++) {
    for (NSString* key in Name){
    NSLog(@"Name");
    UILabel *Selected = (UILabel*)[self.view viewWithTag:[key intValue]];
    if ([title isEqualToString:Selected.text]) { 
    pStr = [NSString stringWithFormat:@"%c",[pStrName characterAtIndex:i]];
    Selected.backgroundColor = [UIColor greenColor];

      }
   }
} 
```

我使用它并成功运行输出。

# c - 使用 C 中的控制指令进行练习要解决的问题

> ID：11842459
> 
> 赞同：0
> 
> 时间：2012-08-07T08:56:45.577
> 
> 标签：c, loops, logic

需要一些学生能想到的好问题，并应用他们自己的逻辑，仅使用**控制指令**来解决这些问题。到目前为止所涵盖的主题都是基本的，甚至还没有完成数组。但是，我希望学生在继续学习更高的主题之前做到完美。

我尝试搜索一些示例问题，但没有一个像我预期的那样/它们是我已经知道的那些。

其中一些我知道：

1.  编写一个程序，在不使用内置函数的情况下找出 a^b 的值。
2.  编写一个程序来找出一个范围内的 Armstrong 数。
3.  编写一个程序以相反的顺序打印一个数字的二进制等价物（因为数组还没有完成，只是简单的逻辑来打印余数并进一步除数）
4.  计算用户输入的所有 -ve、+ve 和 0 数字，直到用户希望终止程序。
5.  编写一个程序来显示给定数的所有除数。
6.  编写一个程序来判断给定的数是否是素数。
7.  检查给定的数字是奇数还是偶数。

需要更多好的逻辑上有趣的问题，这将有助于学生建立他们解决问题的能力。

谢谢。

PS：如果这个问题含糊不清，请原谅我，因为这个问题有很多答案，我猜我不能接受一个答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:26:07.330

*   检查数字是否为回文 (1234554321)
*   使用 write() 重写函数以在控制台中打印一个数字（类似于`printf("%d", ...)`）
*   写入从 12 到 89 开始的 2 位数字的所有组合的函数，不允许两次相同的数字，也不允许不同的顺序（`12, 13, ..., 19, 23, 24...`：跳过 21，因为它是用 12 完成的）
*   使用相同规则（不使用数组）写入所有 n 位组合（n 作为参数从 1 到 9 给出）的函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:02:40.103

```
Print first 33 terms of Fibonacci-Series

Write factorial of n being input from keyboard on console.

Find hours,minutes,seconds from given seconds.(305 s = 5m + 5s ....)

Calculate dot-product and cross-product of two 2D vectors.

Find the intersecting point of two lines(m=slope, (x0,y0)=a point for each line)

Calculate sin(pi/4) with using series expansion

Print the minimum of values given from keyboard on screen.

Simulate **and** , **or** and **xor** gates.

Find projection of a vector(3D) on another vector. 

Find area of a polygon(2D)

Calculate the integral of x-square between x=0 and x=3 using integration by trapezoidal rule

Find roots of: (x-square) plus (two times x) plus (one) equals (zero) 
```

# iphone - 启用 ARC lite 的应用程序仅在发布配置中在第二代 iPod 上崩溃

> ID：11842465
> 
> 赞同：4
> 
> 时间：2012-08-07T08:57:03.480
> 
> 标签：iphone, ios, ipad

我有一个启用了 ARC 的应用程序（启用了 ARC 而没有将弱引用归零，Apple LLVM 4.0）。部署目标设置为 iOS 4.0。它已经在 iOS 4.0 到 5.1.1 上进行了测试。当我使用调试构建并通过 Xcode 安装时，它总是可以正常工作，但是当我使用发布配置创建临时构建时，它总是在使用 iOS 4.2.1 的第二代 iPod 上启动时崩溃，但在其他设备上运行良好（甚至是第三代装有 iOS 4.3 的 iPod）。

崩溃日志显示未找到符号：_objc_retainAutoreleasedReturnValue 并且在调用 main 方法时崩溃（然后是 dyld_stub_binder，dyld::fastBindLazySymbol）

我做了一些搜索，当一个启用弧的库包含在没有弧的项目中时，通常会发生这种崩溃。但在我的情况下，整个项目都启用了弧。

有什么线索吗？

非常感谢。

[编辑] 更新：我可以使用 NSLog 来调试临时构建。

main.m 是这样的：

```
int main(int argc, char *argv[]) {
    NSLog(@"ok before entering autorelease pool");
    @autoreleasepool {
        NSLog(@"ok after entering autorelease pool");
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([XXX class]));
    }
} 
```

NSLog(@"ok after into autorelease pool") 被成功调用，但 application:didFinishLaunchingWithOptions: 从未进入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:04:48.147

它似乎与命令行构建工具有关。我曾经使用 xcodebuild 命令来归档临时构建：xcodebuild -scheme myscheme clean build archive

并得到了这次崩溃。

然后我尝试从 Xcode 归档，即席构建实际上在所有设备上都可以正常工作。太奇怪了（请记住，临时构建的命令行适用于比 iPod 第二代更新的设备）。

现在我将只使用 Xcode 中的存档按钮。但我在 Apple 开发论坛上发布了这个问题： [https ://devforums.apple.com/message/711334](https://devforums.apple.com/message/711334)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:41:04.657

我的回答：**我是如何摆脱同样的问题的。**

**脚步：**

1.首先在代码符号列中进行所有更改，并确保所有设置都与项目选项卡和目标选项卡中的所有设置相同。

2.只需在第一步中进行所有设置，例如选择正确的配置并指定准确的捆绑标识符，然后现在让 xcode 退出。

3.在 2 步之后，只需重新启动计算机，然后为您在第一步中选择的配置文件进行构建。

现在它工作正常，希望这个答案也可以帮助你。无论如何它是我对上述问题的解决方案.....:)

# android - 如何在搜索栏中设置双倍值

> ID：11842475
> 
> 赞同：2
> 
> 时间：2012-08-07T08:57:54.117
> 
> 标签：android, integer, double, seekbar

我想在我的应用程序中使用搜索栏，但我应该在搜索栏中设置双倍值。但是整数是默认值。我可以解析它，但我会因此丢失数据如何将默认值从整数更改为双精度值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:12:07.130

如果不编写自己的 SeekBar 代码，则无法实现。如果您的值范围从 0.0 到 1.0，请将 SeekBar 的最大值设置为 10，然后将您的值乘以 10，将 0.00 到 1.00 乘以 100，依此类推。

# jquery - jquery fancybox 关闭错误

> ID：11842476
> 
> 赞同：0
> 
> 时间：2012-08-07T08:57:56.250
> 
> 标签：jquery, fancybox

在fancybox ajax 调用中有以下内容

```
 $.ajax({
                    type: 'POST',
                    url: 'sendmesse.php',
                    data: $("#messform").serialize(),
                    success: function(data) {
                        if(data == "true") {
                            $("#messform").fadeOut("fast", function(){
                                $(this).before("<strong>Success! Your feedback has been sent, thanks :)</strong>");
                                setTimeout($.fancybox.close(), 1000);
                                // $('.fancybox').close();
                                // $.fancybox.close();

                            });
                        }
                    }
                }); 
```

从收盘开始，一切都很好，尝试了各种变化而没有成功。上面的超时给了我 `Error: useless setTimeout call (missing quotes around argument?)`

所以我都尝试了 `setTimeout('$.fancybox.close()', 1000);` ， `setTimeout("$.fancybox.close()", 1000);` 但我得到了以下错误`TypeError: $ is undefined`

...帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:03:41.907

试试如下图：

```
setTimeout(function(){ $.fancybox.close();}, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:04:25.797

`setTimeout`期望一个函数引用或一个字符串来评估。在您的情况下，尝试调用`setTimeout`如下：

```
setTimeout(function() { $.fancybox.close(); }, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:04:52.893

尝试创建一个名为“closeMyFancyBox”的简单函数，例如

```
function closeMyFancyBox() {
$.fancybox.close();
} 
```

然后将该函数称为`setTimeout('closeMyFancyBox', 1000);`

# asp.net-mvc - 如何使用 asp.net mvc 将表单保存为 pdf？

> ID：11842479
> 
> 赞同：0
> 
> 时间：2012-08-07T08:58:08.640
> 
> 标签：asp.net-mvc, visual-studio-2008, pdf, view

我是股票！

我有一个表格，用户可以在其中填写一些信息。它只是其中的一部分。

```
 <td style="width: 400px;">
        <%= 
Html.TextBoxFor(econtract => econtract.Name, new { style = "width: 300px" })
        %>
        <p style="margin-top: -3px;">
            Name
        </p>
    </td> 
```

填写后，用户应通过电子邮件将其以 pdf 格式发送。我的问题是，我不知道如何将视图另存为 Pdf。在阅读了一些不同的帖子后，我越来越困惑。请给我一些从A到Z清楚的信息如何做到这一点。

# facebook - 如果在 Facebook 墙上删除评论，则从 Facebook 插件中删除评论

> ID：11842480
> 
> 赞同：0
> 
> 时间：2012-08-07T08:58:09.260
> 
> 标签：facebook, web, facebook-comments

fb wall 和某些网页上的评论是否同步？我想成为：

1.  有人在网站上发表评论并选中“发布到我的墙上”选项；
2.  评论出现在他/她的墙上；
3.  然后他/她从墙上删除评论；
4.  评论不会在网站上被删除。

我做错了什么吗？这个功能已经由 fb 实现了，所以我不正确地使用了 facebook 评论插件？一般来说，这是一个正确的方法吗？我的意思是 - 如果我做的一切都很好，那么如果从墙上删除评论，则不会从网页中删除评论是有原因的。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:32:08.830

插件中的评论和用户墙没有链接。评论帖和墙帖具有不同的对象 ID，墙帖只是原始评论的副本。从理论上讲，这些应该是同步的，但 Facebook 并没有以这种方式构建它。

如果您希望它们同步，您将必须使用 API 来检测已删除的评论并从评论插件中删除它们。但实际上，用户应该负责删除他们的评论，因为他们一定是出于某种原因删除了评论。

# vb.net - 对 ssdeep 的 blur.dll 使用 PInvoke 时遇到问题（堆栈不平衡）

> ID：11842486
> 
> 赞同：1
> 
> 时间：2012-08-07T08:58:39.720
> 
> 标签：vb.net, interop, pinvoke

我正在尝试调用 ssdeep blur.dll 上的方法

`.h`文件在这里[，](http://ssdeep.sourceforge.net/api/html/fuzzy_8h_source.html)友好的参考在[这里](http://ssdeep.sourceforge.net/api/html/fuzzy_8h.html#a137a76507c72a195455009b62e28c671)

具体来说，我正在尝试调用此方法....

```
int fuzzy_hash_filename (
        const char * filename,
        char * result 
) 
```

我有以下...

```
<DllImport("C:\SSDeep\Fuzzy.dll", EntryPoint:="fuzzy_hash_filename")>
Private Shared Function fuzzy_hash_filename(
                                           <InAttribute(),
                                           MarshalAsAttribute(UnmanagedType.LPStr)>
                                           ByVal Filename As String, ByVal Result As StringBuilder) As Integer
End Function

Public Shared Function FuzzyHash(Filename As String) As String
    Dim Ret As New StringBuilder
    Ret.Capacity = NativeConstants.FUZZY_MAX_RESULT
    Dim Success = fuzzy_hash_filename(Filename, Ret)
    If Success <> 0 Then
        Throw New Exception("SSDeep fuzzy hashing failed")
    End If
    Return Ret.ToString
End Function 
```

如果我运行这段代码，VS 会给我一个模态对话

> 调用 PInvoke 函数 '(Blah)::fuzzy_hash_filename' 使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

（FWIW 如果我忽略警告，呼叫*似乎*成功，所以我必须关闭）

我需要对我的定义进行哪些更改才能实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:20:02.897

[我在MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/e03c925e-c094-40f1-9fb0-20ac8dc5972d/)上发现了一个有同样问题的人：

> 1.  关于 PInvokeStackImbalance。
> 
> 1.1 这通常是由于 API 使用的调用约定与 C# 代码中为 API 声明的调用约定不匹配。
> 
> 1.2 默认情况下，如果未设置 DllImportAttribute 的 CallingConvention 参数，则默认使用 StdCall。
> 
> 1.3 如果 DoSomething() API 要使用 __cdecl（在 C++ 项目中是默认的），那么您应该在 C# 代码中为 DoSomething() 使用以下声明： [DllImport(@"dll.dll", CallingConvention=CallingConvention .Cdecl)]
> 
> 1.4 另外，我建议您将 API 声明为 extern "C"，否则它将受到 C++ 编译器的名称修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:21:24.677

接受的答案似乎已经解决了原始提问者的问题，但是 c# 中的等效代码对我不起作用。在尝试了越来越复杂的注释之后，回归基础最终确实奏效了。供大家参考，我包括三个接口函数和工作代码的声明（针对[ssdeep 版本 2.9](http://ssdeep.sourceforge.net/#download)构建）。

```
 //Note: StringBuilder here is the standard way to do it, but is a perf hit because unicode stringbuilder can't be pinned when martialling char*.
    //See http://msdn.microsoft.com/en-us/magazine/cc164193.aspx#S4

    //int fuzzy_hash_buf(const unsigned char *buf, uint32_t buf_len, char *result)
    [DllImport("fuzzy.dll")]
    public static extern int fuzzy_hash_buf(StringBuilder buf, int buf_len, StringBuilder result);

    //int fuzzy_hash_filename(const char* filename, char* result)   
    [DllImport("fuzzy.dll")]
    static extern int fuzzy_hash_filename(string filename, StringBuilder result); 

    //int fuzzy_compare (const char *sig1, const char *sig2)
    [DllImport("fuzzy.dll")]
    static extern int fuzzy_compare(string sig1, string sig2); 

    static void Main(string[] args)
    {
        StringBuilder buf = new StringBuilder("test");
        StringBuilder result0 = new StringBuilder(150);
        fuzzy_hash_buf(buf, 4, result0);
        Console.WriteLine(result0);

        string filename = "test.txt";
        StringBuilder result1 = new StringBuilder(150);
        fuzzy_hash_filename(filename, result1);
        Console.WriteLine(result1);

        int matchScore = fuzzy_compare(result0.ToString(), result1.ToString());
        Console.WriteLine("MatchScore: " + matchScore);
    } 
```

输出：

> > ssdeeptest.exe 3:Hn:Hn 24:gRnIM7stweRp+fEWU1XRk+/M98D6Dv3JrEeEnD/MGQbnEWqv3JW:gRIMwtrMU1Bk2I3Jrg53JW MatchScore: 0

# python - urllib2.urlopen 在部署的应用程序中失败

> ID：11842490
> 
> 赞同：1
> 
> 时间：2012-08-07T08:58:56.333
> 
> 标签：python, google-app-engine, igoogle

我想知道为今天刚刚更改的 url 获取请求提供服务的应用引擎代理是否存在限制。例如，这个网址[http://www.google.com/ig/calculator?q=1eur=?usd](http://www.google.com/ig/calculator?q=1eur=?usd)直到几个小时前才顺利运行。这是我现在遇到的错误

**http://www.google.com/ig/calculator?q=1eur=?usd 返回错误：HTTP 错误 503：服务不可用**

请注意，在 SDK（使用我的本地 Internet 连接）中，以下代码有效。'curl [http://www.google.com/ig/calculator?q=1eur=?usd](http://www.google.com/ig/calculator?q=1eur=?usd) ' 也有效，所以我不认为谷歌限制请求不来自最终用户浏览器（即. 没有虚幻的用户代理）。这可能是几个小时前在应用引擎基础架构中发生的变化。

```
 url = 'http://www.google.com/ig/calculator?q=1eur=?usd'
    request = urllib2.Request(url = url, data = None)

    try:
        response = urllib2.urlopen(request)
    except urllib2.URLError, e:
        raise Exception("%s returned an error: %s" % (url, e)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:53:08.003

如评论中所述，您很可能会看到受到限制。iGoogle 托管了许多私有（但不是秘密）API，供在页面上运行的 Google 创作的小工具使用（天气 API 是另一个广泛使用的示例）。但是，它们并不是真正供非 Google 小工具或应用程序使用的，它们的实现可以（并且确实）更改，恕不另行通知。

此外，[iGoogle 是一个已弃用的产品](http://googleblog.blogspot.com/2012/07/spring-cleaning-in-summer.html)。我预计这些实用程序 API 将与 iGoogle 关闭（2013 年 11 月 1 日）同时消失。如果您不希望您的应用程序在 iGoogle 消失时中断，我建议您为该信息寻找其他来源。

# iphone - 如何检查 iPhone 中的 datepicker 值？

> ID：11842491
> 
> 赞同：1
> 
> 时间：2012-08-07T08:58:57.107
> 
> 标签：iphone, objective-c, uidatepicker

我想添加**startdate**和**enddate**，所以我为 startdate 和 enddate 创建了两个**不同**的**datecontroller****类**。

 ****当我第一次进入时，我的状况良好，并且也以良好的方式保存在数据库中。但是**，如果我更新然后单击保存消息，那么我会在我的代码中收到警报消息块**。我希望开始日期必须小于或等于结束日期值。

这是我的代码，它仅在我第一次在数据库表中插入值时才起作用。**如果我更新并单击保存按钮，那么它的检查条件和在该值中获取数据库旧值开始日期和结束日期如何解决这个问题？**

当我回来时，我穿上这个`NSLog`

```
message 2012-08-07 14:21:08.047 People[17111:207] *****:2012-08-06 18:30:00 +0000
2012-08-07 14:22:54.752 People[17111:207] *****:2012-08-06 18:30:00 +0000 
```

我的代码：-

```
-(IBAction)plusSignTapped:(id)sender
{

    NSComparisonResult result = [firstobj.StartDate compare: firstobj.EndDate]; 
    NSLog(@"*****:%@", firstobj.StartDate);
    NSLog(@"*****:%@", firstobj.EndDate);
    if( result == NSOrderedDescending || result==NSOrderedSame) 
    { 
        UIAlertView* alert=[[UIAlertView alloc] initWithTitle:@"test" message:@"End date should be greater than or equal to start date " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [alert release];

      return;   
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:16:13.337

让我们想象一下我们有两个日期和两个日期选择器：

**第一日期**，**第二日期**；

**第一个日期选择器**，**第二个日期选择器**；

在负责值更改事件的**firstDatePicker函数中，您必须设置 secondDatePicker 的****minimumDate**（以及**日期**值，如果它小于最小日期）

```
- (void)firstDatePickerDateChanged
{
    firstDate = firstDatePicker.date
    secondDatePicker.minimumDate = firstDate;
    if ([secondDatePicker.date firstDate] == NSOrderedAscending) {
        secondDatePicker.date = [firstDate dateByAddingTimeInterval:24 * 3600];
        // we add a day to second date, but you can add any value
        [secondDatePicker sendActionsForControlEvents:UIControlEventValueChanged];
        // you need send value changed message to update your secondDate var            
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:31:05.353

这样做是因为这是检查日期小于或等于日期的替代方法：

```
NSTimeInterval timeStartDate = [firstobj.StartDate timeIntervalSince1970]; //StartDate convert into time
NSTimeInterval timeEndDate = [firstobj.EndDate timeIntervalSince1970]; //EndDate convert into time
if (timeStartDate <= timeEndDate) //Compare StartDatetime with EndDatetime
{
    NSLog(@" timeStartDate less thanORequal to %f timeEndDate :%f", timeStartDate,timeEndDate);
}
else
{
    NSLog(@" Date is greater");
} 
```****

# objective-c - 如何正确构建 iOS 5 应用程序？

> ID：11842493
> 
> 赞同：0
> 
> 时间：2012-08-07T08:58:59.867
> 
> 标签：objective-c, ios, ios5, storyboard

我最近开始学习 Obj-C，并尝试编写我的第一个“更大”的应用程序。我想要一个结构类似于 Facebook 的应用程序，例如：

1.  用户首先看到的是登录/注册屏幕，
2.  如果他正确登录，他会看到主应用程序屏幕，它可以做许多不那么直接相关的事情。

我不知道如何构建该应用程序 TheRightWay。

想到的第一件事是将子类设置`UINavigationController`为初始视图控制器，其中一个是“登录”流程，第二个是“登录”流程。

但这会产生不同的问题：因为（至少根据我的理解），我不应该使用模态序列在应用程序的不同部分之间进行转换，我是否需要`UINaviationController`一遍又一遍地使用链？这似乎是“简单的方法”，但我很确定这是错误的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:23:35.693

这个问题与您的开发工作流程和结构一样重要。

iOS 应用程序的结构与用户界面紧密耦合——所以这应该是您的起点。

由于您使用的是 iOS 5，因此您首先要做的是创建一个故事板——它通过一系列视图捕捉用户交互。

与每个视图相关联的是一个 ViewController - 它由框架根据需要进行实例化。在大多数情况下，您的应用程序的结构将挂在此之下。

# java - 不同类的 Log4J 记录器

> ID：11842494
> 
> 赞同：1
> 
> 时间：2012-08-07T08:59:01.243
> 
> 标签：java, eclipse, class, log4j

我想使用 Log4J 来记录我的 java 项目。我在 src 目录中创建了一个 log4j.properties 文件，内容如下：

```
# Root logger option
log4j.rootLogger=INFO, file, stdout
log4j.logger.DEFAULT_LOGGER=INFO,file2

# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.file.File=file.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d [%t] %-5p %c - %m%n

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

log4j.appender.file2=org.apache.log4j.FileAppender
log4j.appender.file2.File=file2.log
log4j.appender.file2.layout=org.apache.log4j.PatternLayout
log4j.appender.file2.layout.ConversionPattern=%d [%t] %-5p %c - %m%n 
```

例如，我只想在我的主要方法中使用“DEFAULT_LOGGER”。所以我写道：

```
static Logger log = Logger.getLogger("DEFAULT_LOGGER");
log.fatal("Process Logger"); 
```

但是当我执行 main 方法时，我将消息“Process Logger”打印到所有 Appender（stdout、file 和 file2）但我只想将它打印到 file2。我该怎么做或者更好的说我做错了什么？

第二点是，当我第二次执行main方法时，它并没有覆盖file和file2，它只是在文本文件中添加了一行。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:06:24.537

Log4j 有一个叫做`additivity`. 默认情况下，它设置为 true，这意味着您编写的每个日志不仅会被特定的记录器记录，还会被其祖先（在本例中为根记录器）记录。

要将其设置为 false，请尝试以下操作：

```
log4j.additivity.DEFAULT_LOGGER = false 
```

[在此处](http://logging.apache.org/log4j/1.2/manual.html)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:07:13.467

尝试：

`log4j.additivity.DEFAULT_LOGGER = false`

# xml - XML 到纯文本（目前使用 YAML，虽然达到了极限，需要更好的 API）

> ID：11842499
> 
> 赞同：0
> 
> 时间：2012-08-07T08:59:08.530
> 
> 标签：xml, performance, api, yaml

我有 1000 多个具有复杂嵌套结构的 XML 文件。

我需要将 XML 文件视为纯文本*并*能够从 TXT 中读取数据。

到目前为止，XML-to-YAML 已经完美地达到了目的。

YAML 对我的内容进行了足够整齐的格式化，并且*可以回读*。

到目前为止一切都很好。

不过，最近 XML 模式变得更加复杂，YAML 也达到了自己的极限，具体请参见 Google 上“反对”YAML 的许多文章。

我本人并不反对 YAML，实际上我是赞成的。它对我很有帮助。到现在。

**这是一个简单的问题：YAML 是否已被更好的“在纯文本中看起来不错并且适合人类阅读”的系统所取代？YAML 的继任者是什么？**

如果您需要更改为回答此问题的 XML 模式的详细信息，那很好……我可以添加它们。它是带有重复的可选部分，带有嵌套项，带有 3 个节点的图表列表，以及对前面定义的对象的 ID 的引用（想想：社会保障 # 来指代一个人）等。

编程语言是Java。

注意：我可以使用 XSLT 将 XML 转换为 TXT，但是如果不定义自己的解析器/语法，我将如何读取数据呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:01:27.223

以下是一些替代方案：

*   [蜡烛对象表示法](http://www.candlescript.org/doc/candle-markup-reference.htm)

*   [JavaFX 对象表示法](http://docs.oracle.com/cd/E17802_01/javafx/javafx/1/docs/api/javafx.util/javafx.util.StringLocalizer.html)

*   [一个儿子](http://www.americanteeth.org/libason/ason_spec.pdf)

*   [BSON](http://bsonspec.org/)

*   [PSON](https://github.com/dcodeIO/PSON/blob/master/PSONspec.txt)

*   [搪瓷](http://intertwingly.net/wiki/pie/Enamel)

*   [ASN.1](https://msdn.microsoft.com/en-us/library/windows/desktop/bb648643)

*   [RSS 3.0](http://www.aaronsw.com/2002/rss30)

*   [SPARQL S-表达式(SSE)](https://jena.apache.org/documentation/notes/sse.html)

# python - % 10 是什么意思？

> ID：11842506
> 
> 赞同：0
> 
> 时间：2012-08-07T08:59:45.350
> 
> 标签：python, python-2.7

简单的问题，简单的答案。我主要要求这样的代码：

```
def getSumOfLastDigits(numList):
    return sum (num % 10 for num in numList) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T09:01:29.513

计算余数：

```
21 % 10 == 1
 4 % 10 == 4 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T09:01:29.197

这是对模数的列表理解`num`（`10`获取余数或最低有效位），然后将计算值相加。

函数 ( `getSumOfLastDigits()`) 的名称是自记录的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T09:03:18.217

`%`是模（余数）运算符，例如`12 % 7 == 5`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T16:37:13.230

它是求余数的模运算符，在许多算法中非常有用

# iphone - 运行时获取 CPU 使用率 | iOS

> ID：11842513
> 
> 赞同：2
> 
> 时间：2012-08-07T09:00:14.343
> 
> 标签：iphone, ios, xcode, cpu-usage

有什么办法可以让我获得 iPhone 的整体 CPU 使用率。我见过一些应用程序，例如用于 iPhone 的 Battery Doctor 和 System Activity Monitor，它们显示整体 CPU 使用情况。

我找到了一个解决方案（[指向答案的链接](https://stackoverflow.com/a/8382889/718387)），但它只给出了我的应用程序的 CPU 使用率，而不是所有整体应用程序的 CPU 使用率。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T09:20:19.923

拜托，试试这个，这对你来说可能是一个好的开始。**它仅在真实设备上进行了测试。**

```
processor_info_array_t _cpuInfo, _prevCPUInfo = nil;
mach_msg_type_number_t _numCPUInfo, _numPrevCPUInfo = 0;
unsigned _numCPUs;
NSLock *_cpuUsageLock;

int _mib[2U] = { CTL_HW, HW_NCPU };
size_t _sizeOfNumCPUs = sizeof(_numCPUs);
int _status = sysctl(_mib, 2U, &_numCPUs, &_sizeOfNumCPUs, NULL, 0U);
if(_status)
    _numCPUs = 1;

_cpuUsageLock = [[NSLock alloc] init];

natural_t _numCPUsU = 0U;
kern_return_t err = host_processor_info(mach_host_self(), PROCESSOR_CPU_LOAD_INFO, &_numCPUsU, &_cpuInfo, &_numCPUInfo);
if(err == KERN_SUCCESS) {
    [_cpuUsageLock lock];

    for(unsigned i = 0U; i < _numCPUs; ++i) {
        Float32 _inUse, _total;
        if(_prevCPUInfo) {
            _inUse = (
                     (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_USER]   - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_USER])
                     + (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_SYSTEM] - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_SYSTEM])
                     + (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_NICE]   - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_NICE])
                     );
            _total = _inUse + (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_IDLE] - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_IDLE]);
        } else {
            _inUse = _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_USER] + _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_SYSTEM] + _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_NICE];
            _total = _inUse + _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_IDLE];
        }

        NSLog(@"Core : %u, Usage: %.2f%%", i, _inUse / _total * 100.f);
    }

    [_cpuUsageLock unlock];

    if(_prevCPUInfo) {
        size_t prevCpuInfoSize = sizeof(integer_t) * _numPrevCPUInfo;
        vm_deallocate(mach_task_self(), (vm_address_t)_prevCPUInfo, prevCpuInfoSize);
    }

    _prevCPUInfo = _cpuInfo;
    _numPrevCPUInfo = _numCPUInfo;

    _cpuInfo = nil;
    _numCPUInfo = 0U;
} else {
    NSLog(@"Error!");
} 
```

您还需要以下标题：

```
#import <sys/sysctl.h>
#import <sys/types.h>
#import <sys/param.h>
#import <sys/mount.h>
#import <mach/mach.h>
#import <mach/processor_info.h>
#import <mach/mach_host.h> 
```

# powershell - 如何在 Exchange 2010 数据库中获取邮箱大小

> ID：11842514
> 
> 赞同：3
> 
> 时间：2012-08-07T09:00:17.390
> 
> 标签：powershell

我正在尝试自定义我的查询，以便结果仅显示 5mb 或更少的邮箱

Get-MailboxStatistics -database ""| 排序 totalitemsize -desc | 选择显示名称，totalitemsize

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:21:54.710

```
Get-MailboxStatistics -Database 'Mailbox Database 123' |
Where-Object {$_.TotalItemSize.Value.ToMB() -le 5} | 
Sort-Object TotalItemSize -Descending | 
Select-Object DisplayName,TotalItemSize 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T14:01:25.767

问题是，Get-MailboxStatistics 输出只是一个显示名称 - 不是唯一的，不能真正这样使用。您需要的另一半信息在 Get-Mailbox 中：- 在以下链接中找到答案。一旦你在所有邮箱上都有数据，并且可以将输出导入到 excel 中，你可以进行所有排序等并删除你不想要的任何内容

如果这是您要查找的内容，请单击此链接并给该人一些信任..我没有想出这个，我只是找到了

```
#REM http://www.experts-exchange.com/Software/Server_Software/Email_Servers/Exchange/Q_27828458.html

$Mailboxes = Get-Mailbox -ResultSize Unlimited
foreach ($Mailbox in $Mailboxes)
{
 $Mailbox | Add-Member -MemberType "NoteProperty" -Name "MailboxSizeMB" -Value ((Get-MailboxStatistics $Mailbox).TotalItemSize.Value.ToMb())
}
$Mailboxes | Sort-Object MailboxSizeMB -Desc | Select PrimarySMTPAddress, MailboxSizeMB

#REM - to export this out -- do the following ;) enjoy (see the part where it says "Select" you can add additional fields like ALIAS etc to this)

$Mailboxes = Get-Mailbox -ResultSize Unlimited
foreach ($Mailbox in $Mailboxes)
{
 $Mailbox | Add-Member -MemberType "NoteProperty" -Name "MailboxSizeMB" -Value ((Get-MailboxStatistics $Mailbox).TotalItemSize.Value.ToMb())
}
$Mailboxes | Sort-Object MailboxSizeMB -Desc | Select PrimarySMTPAddress, MailboxSizeMB | Export-Csv -NoType "C:\temp\Mailboxessize.csv" 
```

转到 AD 并拉动所有用户 *查看高级功能 | 添加列交换邮箱存储，电子邮件地址在 excel 中结合这两个列表，享受微笑和可乐...您刚刚在 20 分钟内完成了 1 周的工作

# android - 动态创建多行按钮列表

> ID：11842519
> 
> 赞同：1
> 
> 时间：2012-08-07T09:00:32.023
> 
> 标签：android, list, android-layout, button

我想创建一个多行按钮列表。像这样的东西：
![在此处输入图像描述](../Images/9c37a1e92aa7d6134fd8716e9b91a938.png)
但我想动态地做（在代码中）。有没有办法告诉布局自动执行此操作？或者我必须自己使用`RelativeLayout.LayoutParams`. 我可以通过代码做到这一点，但我应该控制很多事情，我想知道是否有另一种更简单的方法来做到这一点。例如，当当前行已满时，告诉布局在下一行中添加元素！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:03:25.017

您也可以使用 LinearLayout 执行此操作，并使用权重使所有按钮的大小相同。

至于你的问题：

> 我可以通过代码做到这一点，但我应该控制这么多事情，我想知道是否有另一种更简单的方法来做到这一点。例如，当当前行已满时，告诉布局在下一行中添加元素！

如果您测量屏幕宽度和高度并使用 View 类中的函数来确定该特定视图及其子视图的细节，这可能是可能的。

## 选择

但正如评论中提到的，还有其他视图可以用来解决您的问题，例如 GridView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:34:18.873

您还可以使用表格布局，

像这样在xml中创建第一行tabllayout

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        >

        <Button
            android:id="@+id/goBack"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="6dp"
            android:layout_marginTop="12dp"
            />
    </LinearLayout>
<FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="fill"
        android:layout_weight="0.80">

    <HorizontalScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <FrameLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="fill"
                    android:layout_weight="0.80"
                    android:background="#f0ffff" >
        <ScrollView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TableLayout
                android:id="@+id/data_table"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="2dp"
                android:background="#006400"
                android:orientation="vertical" >

                <TableRow
                    android:id="@+id/second"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent" >

                    <TextView
                        android:layout_width="105dp"
                        android:layout_height="fill_parent"
                        android:layout_margin="1dp"
                        android:background="@drawable/textbg"
                        android:gravity="center"
                        android:text="Number1"
                        android:textColor="#006400" >
                    </TextView>

                    <Button
                        android:layout_width="105dp"
                        android:layout_height="fill_parent"
                        android:layout_margin="1dp"
                        android:background="@drawable/textbg"
                        android:gravity="center"
                        android:text="Number2"
                        android:textColor="#006400" />

                    <TextView
                        android:layout_width="105dp"
                        android:layout_height="fill_parent"
                        android:layout_margin="1dp"
                        android:background="@drawable/textbg"
                        android:gravity="center"
                        android:paddingBottom="2dp"
                        android:paddingTop="2dp"
                        android:text="Distance"
                        android:textColor="#006400" >
                    </TextView>

                    <TextView
                        android:layout_width="105dp"
                        android:layout_height="fill_parent"
                        android:layout_margin="1dp"
                        android:gravity="center"
                        android:paddingBottom="8dp"
                        android:paddingLeft="8dp"
                        android:paddingRight="5dp"
                        android:paddingTop="8dp"
                        android:text="F/G/H/S"
                        android:textColor="#006400" >
                    </TextView>
                </TableRow>
            </TableLayout>
        </ScrollView>
        </FrameLayout>
    </HorizontalScrollView>
 </FrameLayout>
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="bottom"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="60dp"
            android:layout_marginTop="4dp"
            android:gravity="center"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/savescore"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                 />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

我为四个三个文本创建了这个 xml，并且单行中的按钮参考 onCreate 中的表

```
TableLayout extendeedTable = (TableLayout)findViewById(R.id.data_table); 
```

添加行

```
while (extendeedTable.getChildCount() > 1)
        {
            // while there are at least two rows in the table widget, delete
            // the second row.

            extendeedTable.removeViewAt(1);
        }

        // collect the current row information from the database and
        // store it in a two dimensional ArrayList

        // iterate the ArrayList, create new rows each time and add them
        // to the table widget. 
```

// 这里的值是你想要的表中的行数

```
 for (int position=0; position < value ; position++)
        {
            TableRow tableRow= new TableRow(this);

            tableRow.setBackgroundDrawable(null);
//          ArrayList<Object> row = data.get(position);

            TextView idText = new TextView(this);
            idText.setText(Integer.toString(position + 1));
            idText.setGravity(Gravity.CENTER);
            idText.setTextColor(Color.BLACK);
            idText.setWidth(10);
            idText.setHeight(45);
            idText.setBackgroundResource(R.drawable.text2);

             tableRow.addView(idText);

             textOne = new Button(this);
            textOne.setText("CLUB");
            textOne.setBackgroundResource(R.drawable.text2);
            textOne.setGravity(Gravity.CENTER);
            textOne.setTextColor(Color.BLACK);//left top right bottom

            textOne.setWidth(10);
            textOne.setHeight(45);

            textOne.setId(1+position);
            tableRow.addView(textOne);

              allbtns.add(textOne);
//          textOne.setOnClickListener(this);

             textOne.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                  // do something when the button is clicked

                    final Button button = (Button) arg0;

                    System.out.println("value  of button is      "+
                            button.getId());

                    dialog1.setTitle(" SELECT CLUB ");         

             textTwo = new EditText(this);
            textTwo.setText("");
            textTwo.setBackgroundResource(R.drawable.text2);
            textTwo.setGravity(Gravity.CENTER);
            textTwo.setTextColor(Color.BLACK);
            textTwo.setWidth(10);
            textTwo.setHeight(45);
            textTwo.setInputType(InputType.TYPE_CLASS_NUMBER);
           tableRow.addView(textTwo);
            allEds1.add(textTwo);
            textTwo.setId(position +1);

            textThree = new EditText(this);
            textThree.setText("");
            textThree.setWidth(10);
            textThree.setHeight(45);
            textThree.setTextColor(Color.BLACK);
            textThree.setBackgroundResource(R.drawable.text2);
            textThree.setGravity(Gravity.CENTER);
            textThree.setInputType(InputType.TYPE_CLASS_TEXT);
            tableRow.addView(textThree);
            allEds2.add(textThree);
            textThree.setId(position +1);

            extendeedTable.addView(tableRow);

        } 
```

为此，我从这里得到了帮助

[http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/7/](http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/7/)

和

它的xml

[http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/6/](http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:37:00.803

经过更多的谷歌搜索，我终于找到了最好的方法。它是如此干净和简单，使用适配器和网格。感谢所有的答案

这是一个教程：[为 Gridview(ButtonAdapter) 创建自定义适配器](http://www.stealthcopter.com/blog/2010/09/android-creating-a-custom-adapter-for-gridview-buttonadapter/)

# php - 将行划分为维度数组

> ID：11842524
> 
> 赞同：0
> 
> 时间：2012-08-07T09:00:54.827
> 
> 标签：php, arrays

我想将数据库中的食物列表按类别排列成数组，以便我可以将每个条目分成类别。

像这样..

```
$menu = array(
    'Appetizers' => array(
        'Chicken Tenders' => '$2.99',
        'Twisted Chips' => '$1.99'
    ),
    'Seafood' => array(
        'Bayou Tilapia' => '$4',
        'Grill Atlantic Salmon' => '$3.99'
    ),
    'Steaks & Combos' => array(
        'Cowboy Grande Sirloin' => '$7.99'
    )
        ) 
```

这就是我所做的。

```
$db->Query("SELECT menuTitle,menuCategory,menuPrice FROM menu");
$menu = array();
while ($row = $db->Row()) {
    $a = array($row->menuCategory => array($row->menuTitle=>$row->menuPrice));
    array_push($menu,$a);
    } 
```

它似乎不起作用。您能否告知如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:06:21.177

代替：

```
$a = array($row->menuCategory => array($row->menuTitle=>$row->menuPrice));
array_push($menu,$a); 
```

和：

```
$menu[$row->menuCategory][$row->menuTitle]=$row->menuPrice; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:08:12.857

块中的代码`while`看起来并不完全正确，因为您总是在迭代时**重新定义数组。**`$a`

```
while ($row = $db->Row()) {
    $a[ $row->menuCategory ][ $row->menuTitle] = $row->menuPrice;
    array_push($menu,$a);
} 
```

这样，您只会将新键附加到数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:14:27.050

```
$db->Query("SELECT menuTitle,menuCategory,menuPrice FROM menu");
$menu = array(); $a = array();

while ($row = $db->Row()) {
    $a[$row->menuCategory ][$row->menuTitle] = $row->menuPrice;
}
array_push($menu,$a);

echo "<pre>";print_r($menu);echo "</pre>"; 
```

# python - 有一个单列文本文件，如何通过 python 脚本将其拆分为多列？

> ID：11842526
> 
> 赞同：-2
> 
> 时间：2012-08-07T09:00:55.543
> 
> 标签：python

我有一个文本文件，其中只有一列。我需要的是将唯一的列拆分为几列。例如，假设我的文件包括：

10

20

30

40

50

e

1467

1608

1733

1767

1878年

e

1787

1353

1024

693

423

我需要它变成如下：

10 1467 1787

20 1608 1353

30 1733 1024

40 1767 693

50 1878 423

只是想知道您是否帮助我使用 Python 脚本来完成。另外，如果我可以通过在 OS X 终端中编写一些命令来做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:26:36.523

这是一个使用列表推导和 itertools 模块可以做什么的示例。

```
>>> from itertools import dropwhile, izip, takewhile
>>> l = ['1', '2', 'X', '3', '4', 'X', '5', '6']
>>> splitter = 'X'
>>> fun = lambda e: e != 'X'
>>> begin = [e for e in takewhile(fun, l)]
>>> end = [e for e in dropwhile(fun, l)][1:]
>>> begin, end
(['1', '2'], ['3', '4', 'X', '5', '6'])
>>> # OUT: (['1', '2'], ['3', '4', 'X', '5', '6'])
>>> mid = [e for e in takewhile(fun, end)]
>>> end = [e for e in dropwhile(fun, end)][1:]
>>> begin, mid, end
(['1', '2'], ['3', '4'], ['5', '6'])
>>> # OUT: (['1', '2'], ['3', '4'], ['5', '6'])
>>> [e for e in izip(begin, mid, end)]
[('1', '3', '5'), ('2', '4', '6')]
>>> # OUT: [('1', '3', '5'), ('2', '4', '6')] 
```

当然，如果原始列表是可变长度的，则需要在循环中完成这项工作。

[我建议您在BPython 解释器](http://bpython-interpreter.org/)中测试这种语句，以便您可以轻松地测试交互式示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:26:48.397

*注意：已修​​改以反映更改的数据格式*

基于您的（新）样本数据，使用“e”作为组分隔符。基本思想是遍历文件分组中的行，并在看到分隔符时开始一个新组。

```
# testdata contains:
10
20
30
40
50
e
1467
1608
1733
1767
1878
e
1787
1353
1024
693
423 
```

_

```
DELIMITER = 'e'
groups = []
this_group = []
for l in open('testdata', 'r'):
    l = l.strip()
    if l == DELIMITER and this_group:
        groups.append(this_group)
        this_group = []
    else:
        this_group.append(l)
if this_group:
    groups.append(this_group)

for t in zip(*groups):
    print ' '.join(t)

10 1467 1787
20 1608 1353
30 1733 1024
40 1767 693
50 1878 423 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:07:29.577

您可以使用以下方法将整个文件的内容拆分为列表：

```
def read_data(filename):
    with open(filename) as f:
        return f.read().split() 
```

`data = read_data('test.txt')`使用`text.txt`包含以下内容的运行：

```
10
20
30
e
11
21
31
e
12
22
32 
```

将导致：

```
data = ['10', '20', '30', 'e', '11', '21', '31', 'e', '12', '22', '32'] 
```

注意：`test.txt`可以以任何方式格式化空格、制表符和换行符，以`split()`正确处理它们！

数据实际上应该位于不包含“e”条目的二维数组中。这可以使用以下方法完成：

```
def list_to_grid(data):
    ret  = []
    line = []
    for entry in data:
        if entry == 'e':
            if len(line) != 0:
                ret.append(line)
                line = []
            else:
                line.append(int(entry))
    if len(line) != 0:
        ret.append(line)
    return ret 
```

注意：我确信有一种更 Pythonic 的方法可以做到这一点，但它确实有效。

`data = list_to_grid(read_data('test.txt'))`在文件上运行`text.txt`将导致：

```
data = [[10, 20, 30], [11, 21, 31], [12, 22, 32]] 
```

你正在做的是转置二维数组。也就是说，给定`data[i][j]`，它有新的位置`data[j][i]`。现在可以转置这些数据以获得所需的序列：

```
def transpose(data):
    ret = []
    for i in range(0, len(data)):
        ret.append([data[j][i] for j in range(0, len(data[i]))])
    return ret 
```

哪个`tdata = transpose(data)`给出：

```
 data = [[10, 20, 30], [11, 21, 31], [12, 22, 32]]
tdata = [[10, 11, 12], [20, 21, 22], [30, 31, 32]] 
```

现在打印出来：

```
def print_data(data):
    for line in data:
        print ' '.join([str(x) for x in line]) 
```

使用`print_data(tdata)`结果：

```
10 11 12
20 21 22
30 31 32 
```

这就是你想要的。

# java - 使用 DataNucleus 3.0.0-release 的 JDOPersistenceManager.getObjectById() 中的 NullPointerException

> ID：11842527
> 
> 赞同：1
> 
> 时间：2012-08-07T09:00:56.653
> 
> 标签：java, mongodb, jdo, datanucleus

我正在使用 DataNucleus 3.0.0-release JDO 实现将我的 Java 应用程序连接到 MongoDB。

我的 CLASSPATH 中的相关 JAR 如下：

*   datanucleus-api-jdo-3.0.0-release.jar
*   datanucleus-core-3.0.0-release.jar
*   datanucleus-jdo-query-3.0.0-release.jar
*   datanucleus-mongodb-3.0.0-release.jar
*   mongo-java-driver-2.5.2.jar

我坚持的课程如下：

```
@PersistenceCapable(detachable = "true")
public class Record implements Serializable, Cacheable<String> {

    private static final long serialVersionUID = 9022509306966814904L;

    @PrimaryKey
    @Persistent(defaultFetchGroup = "true", valueStrategy = IdGeneratorStrategy.IDENTITY)
    private String id;

    @Name
    @Persistent(defaultFetchGroup = "true")
    private String name;

    @Name
    @Persistent(defaultFetchGroup = "true")
    private String surname;

    @Persistent(defaultFetchGroup = "true")
    private Date dateOfBirth;

    @Persistent(defaultFetchGroup = "true")
    private Date dateRecorded;

    @Persistent(defaultFetchGroup = "true")
    private String locationId;

    @Persistent(embedded = "true", defaultFetchGroup = "true")
    private CustomLocation customLocation;

    @Persistent(defaultFetchGroup = "true")
    private Category category;

    @Persistent(embedded = "true", defaultFetchGroup = "true")
    private CustomCategory customCategory;

    @Persistent(defaultFetchGroup = "true")
    private String description;

    @Persistent(embeddedElement = "true", defaultFetchGroup = "true")
    private List<StoredImageInfo> images;

    @Persistent(embeddedElement = "true", defaultFetchGroup = "true")
    private List<StoredAudioInfo> audio;

    @Persistent(embeddedElement = "true", defaultFetchGroup = "true")
    private List<StoredFileInfo> files;

    @Persistent(defaultFetchGroup = "true")
    private ModerationMode moderationMode;

    @Persistent(defaultFetchGroup = "true")
    private VisibilityMode visibilityMode;

    @Persistent(embedded = "true", defaultFetchGroup = "true")
    private UserProfileSummary owner;

    @Persistent(embeddedElement = "true", defaultFetchGroup = "true")
    private Map<String, UserProfileSummary> editors;

    @Persistent(embeddedElement = "true", defaultFetchGroup = "true")
    private Map<String, UserProfileSummary> connections;

    @Persistent(embeddedElement = "true", defaultFetchGroup = "true")
    private Map<String, RecordSummary> recordConnections;

    @Persistent(defaultFetchGroup = "true")
    private RecordType type;

    @Persistent(defaultFetchGroup = "true")
    private Date expiry;

    public Record() {
    }

    public Record(Record copy) {
    deepCopy(copy);
    }

    ...
} 
```

和`CustomLocation`班级：

```
@PersistenceCapable(embeddedOnly="true")
public class CustomLocation implements Serializable {

    private static final long serialVersionUID = -7754029273366194129L;

    @PrimaryKey
    @Persistent(defaultFetchGroup = "true", valueStrategy = IdGeneratorStrategy.IDENTITY)
    private String id;

    @Persistent(defaultFetchGroup = "true")
    private String city;

    @Persistent(defaultFetchGroup = "true")
    private String countryKey;

    @Persistent(defaultFetchGroup = "true")
    private String locale;

    @SuppressWarnings("unused")
    private CustomLocation() {
        // for serialization
    }
    ...
} 
```

尝试从数据库中获取对象的代码如下：

```
PersistenceManager pm = MyPersistenceManagerFactory.get().getPersistenceManager();

Record record = null;
try {
    record = pm.getObjectById(Record.class, recordId);
}
catch (JDOObjectNotFoundException onfe) {
    // handle
}
catch (Exception e) {
    // handle
} 
```

以下是产生的错误：

```
java.lang.NullPointerException
    at org.datanucleus.store.mongodb.fieldmanager.FetchFieldManager.fetchStringField(FetchFieldManager.java:243)
    at org.datanucleus.state.AbstractStateManager.replacingStringField(AbstractStateManager.java:2165)
    at com.myproject.location.domain.CustomLocation.jdoReplaceField(CustomLocation.java)
    at com.myproject.location.domain.CustomLocation.jdoReplaceFields(CustomLocation.java)
    at org.datanucleus.state.JDOStateManagerImpl.replaceFields(JDOStateManagerImpl.java:1989)
    at org.datanucleus.state.JDOStateManagerImpl.replaceFields(JDOStateManagerImpl.java:2009)
    at org.datanucleus.store.mongodb.fieldmanager.FetchFieldManager.fetchObjectField(FetchFieldManager.java:353)
    at org.datanucleus.state.AbstractStateManager.replacingObjectField(AbstractStateManager.java:2182)
    at com.myproject.domain.Record.jdoReplaceField(Record.java)
    at com.myproject.domain.Record.jdoReplaceFields(Record.java)
    at org.datanucleus.state.JDOStateManagerImpl.replaceFields(JDOStateManagerImpl.java:1989)
    at org.datanucleus.state.JDOStateManagerImpl.replaceFields(JDOStateManagerImpl.java:2009)
    at org.datanucleus.store.mongodb.MongoDBPersistenceHandler.fetchObject(MongoDBPersistenceHandler.java:600)
    at org.datanucleus.state.JDOStateManagerImpl.loadFieldsFromDatastore(JDOStateManagerImpl.java:1696)
    at org.datanucleus.state.JDOStateManagerImpl.validate(JDOStateManagerImpl.java:3576)
    at org.datanucleus.ObjectManagerImpl.findObject(ObjectManagerImpl.java:3246)
    at org.datanucleus.api.jdo.JDOPersistenceManager.getObjectById(JDOPersistenceManager.java:1731)
    at org.datanucleus.api.jdo.JDOPersistenceManager.getObjectById(JDOPersistenceManager.java:1749)
    at com.myproject.server.GetRecordHandler.execute(GetRecordHandler.java:37) 
```

谁能发现问题所在？

*注意：我知道 DataNucleus 3.1.0-release 可用，但我不能使用它，因为[它的增强器有问题](https://stackoverflow.com/questions/11823840/nullpointerexception-running-datanucleus-enhancer-3-1-0-release)。*

**更新：**我对这个问题做了一些进一步的测试，结果发现 DataNucleus`NullPointerException`为那些`embedded`也被标记为在 中`defaultFetchGroup`并且值为`null`.

# javascript - 生成随机唯一数据耗时太长，占用 100% CPU

> ID：11842533
> 
> 赞同：2
> 
> 时间：2012-08-07T09:01:11.700
> 
> 标签：javascript, random, unique

警告：CPU 使用率达到 100%，请小心。

[链接到 jsFiddle](http://jsfiddle.net/Rogues/BGxLP/ "jsFiddle")

编写此脚本是为了设计一个动态的蛇和梯形板。每次刷新页面时都会创建一个新版块。大多数情况下，所有背景图像都不会出现，CPU 使用率会上升到 100%。但有时它们都会出现并且CPU使用率正常。

Opera 显示一些背景图像，Firefox 滞后并询问我是否希望停止脚本。

我认为问题在于这些代码行：

```
 for(var key in origin)      // Need to implement check to ensure that two keys do not have the same VALUES!
        {
            if(origin[key] == random_1 || origin[key] == random_2 || key == random_2)   // End points cannot be the same AND starting and end points cannot be the same.
            {
                valFlag = 1;
            }
            console.log(key);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:59:46.160

你的算法非常无效。当数组几乎填满时，您实际上会进行数百万次无用的迭代，直到您运气好并且 RNG 不小心选择了丢失的数字。将其重写为：

1.  生成一个包含所有可能数字的数组 - 从 1 到 99。
2.  当您需要随机数时，在此数组、拼接元素和此随机位置的当前边界中生成一个随机索引，将其从数组中删除并将其值用作您想要的随机数。
3.  如果生成的数字不符合您的某些条件（minDiff？）将它们返回到数组。请注意，如果数组中留下的所有内容都无法满足您的条件，您仍然可以永远停滞在循环中。

以这种方式从数组中提取的每个值都保证是唯一的，因为您最初用唯一的数字填充它并在使用时将其删除。

我已经剥离了绘图并将生成的数字放入可以在控制台中检查的数组中。把你的画放回去，它应该可以工作了——现在会立即生成数字：

```
var snakes = ['./Images/Snakes/snake1.png','./Images/Snakes/snake2.jpg','./Images/Snakes/snake3.gif','./Images/Snakes/snake4.gif','./Images/Snakes/snake5.gif','./Images/Snakes/snake6.jpg'];
var ladders = ['./Images/Ladders/ladder1.jpg','./Images/Ladders/ladder2.jpg','./Images/Ladders/ladder3.png','./Images/Ladders/ladder4.jpg','./Images/Ladders/ladder5.png'];

function drawTable()
{
    // Now generating snakes.
    generateRand(snakes,0);
    generateRand(ladders,1);

}

var uniqNumbers = []
for(var idx = 1; idx < 100; idx++){ uniqNumbers.push(idx) }

var results = []

function generateRand(arr,flag)
{
    var valFlag = 0;
    var minDiff = 8;        // Minimum difference between start of snake/ladder to its end.
    var temp;

    for(var i = 0; i< arr.length; ++i) {

        var valid = false

        // This is the single place it still can hang, through with current size of arrays it is highly unlikely
        do {
            var random_1 = uniqNumbers.splice(Math.random() * uniqNumbers.length, 1)[0]
            var random_2 = uniqNumbers.splice(Math.random() * uniqNumbers.length, 1)[0]
            if (Math.abs(random_1 - random_2) < minDiff) {
                // return numbers
                uniqNumbers.push(random_1)
                uniqNumbers.push(random_2)
            } else {
                valid = true
            }
        } while (!valid);

        if(flag == 0)     // Snake
        {
            if(random_1 < random_2)        // Swapping them if the first number is smaller than the second number.
            {
                var temp = random_1; random_1 = random_2; random_2 = temp
            }
        }
        else         // Ladders
        {
            if(random_1>random_2)        // Swapping them if the first number is greater than the second number.
            {
                var temp = random_1; random_1 = random_2; random_2 = temp
            }
        }
        // Just for debug - look results up on console
        results.push([random_1, random_2])
    }
}

drawTable() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:39:17.543

我在for循环中使用“HighCharts”时遇到了这样的问题-“浏览器”具有检测死脚本或无限循环的内置功能。所以浏览器停止或弹出一条消息说没有响应。不知道你有没有这个症状！

这是由具有大量数据的“循环”造成的。我在 CodeProject 上写了一篇关于它的教程，你可以试试，它可能就是你的答案。

[http://www.codeproject.com/Tips/406739/Preventing-Stop-running-this-script-in-Browsers](http://www.codeproject.com/Tips/406739/Preventing-Stop-running-this-script-in-Browsers)

# java - Java：如何监视普通套接字连接（并将结果转发到内部记录器）

> ID：11842540
> 
> 赞同：0
> 
> 时间：2012-08-07T09:01:49.060
> 
> 标签：java, sockets, monitoring, inputstream, outputstream

我被 Netty 宠坏了，但现在是清算的日子……

我在这里得到了一个普通的 java.net.Socket（更具体地说，一个自定义的 SocketPoolFactory，其中创建了套接字以及相应的 OutputStreamWriter 和 InputStreamWriter，它们包装了套接字的 IO-Streams），我需要监视发送和接收的内容（在以便将其写入日志文件以进行调试）。似乎我很难弄清楚在哪里挂钩并拦截发送/接收的内容。

有人可以帮忙吗？最好的方法是什么？它仅用于调试（因此不需要一流的效率）（如果它以某种方式有帮助：我正在使用 Groovy）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:17:17.777

编写您自己的 FilterInputStream 派生类并将其插入到附加到套接字的流堆栈中，

# iphone - 关于 viewWillAppear 的一般说明？

> ID：11842541
> 
> 赞同：0
> 
> 时间：2012-08-07T09:01:50.250
> 
> 标签：iphone, objective-c, ios, xcode

我有一个关于 viewWillAppear 的一般性问题，我新推送了一个视图，考虑 view1，如果 view1 推送了另一个视图（view2），现在该方法调用 viewWillAppear。现在如果 view2 被弹出 view1 的 viewWillAppear 被再次调用，我怎么知道在哪种情况下它被称为 ie （是因为新推送或弹出其他视图）。

希望我的问题可以理解:)

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:18:49.903

根据您的上下文，您想使用...

对于 viewWillAppear/viewDidAppear

```
isBeingPresented
isMovingToParentViewController 
```

对于 viewWillDisappear/viewDidDisappear

```
isBeingDismissed
isMovingFromParentViewController 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:11:40.983

坦率地说，我不知道如何适当地确定这种情况。您当然可以在 view2 的 viewWillDisappear 方法中设置 view1 的某些属性，然后在 view1 的 viewWillAppear 中重新设置它。比如：

视图1.m：

```
- (void) viewWillAppear ... {
... 

if (self.wasPopped) {...}

self.wasPopped = NO;
...
} 
```

视图2.m：

```
- (void) viewWillDisappear {

view1.wasPopped = YES; //you would have to have a reference to view1 or fetch it from the navigation controller stack. 

} 
```

但是，我坚信这不是你应该走的路。考虑将您的代码移动到 viewDidLoad 方法。viewDidLoad 仅在第一次调用 viewWillAppear 之前创建视图（控制器）时调用一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:13:59.530

您可以使用`BOOL`value 并将其初始化为`FALSE`.In`viewWillAppear`制作该 bool 值`TRUE`并`viewWillAppear`仅检查该 bool 值是否为真，`TRUE`或者`FALSE`如果它为真，则表示该视图第二次出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T09:06:11.980

只需记住，只要您的视图出现在屏幕上（它将是可见的）`viewWillAppear`方法就会被调用。

在您的情况下，当再次弹出 view2 时，您的 view1 将出现在屏幕上，这`viewWillAppear`就是再次调用它的原因。同样，当您推送新的视图控制器时，新的视图控制器将显示在屏幕上。在显示该视图之前，`viewWillAppear`将调用该新视图控制器。

我希望这是有道理的。

# xpath - 如何编写下面的正则表达式以在 Webdriver 中使用？

> ID：11842542
> 
> 赞同：3
> 
> 时间：2012-08-07T09:01:50.150
> 
> 标签：xpath, webdriver

我需要 webdriver 使用正则表达式来使用 xpath。我有一个具有不同值的 id 列表。如何为以下类型的值编写表达式。

```
//*[@id="js_1"]   
//*[@id="js_2"]    
//*[@id="js_3"]      
//*[@id="js_4"]   
//*[@id="js_5"]    
//*[@id="js_6"] 
```

我必须使用 webdriver 为上述 xpath 格式编写正则表达式吗？我已经尝试过以下

Listnames=box.findElements(By.xpath("//div[contains(@id, 'js_*')]"));

但这对我不起作用。我该如何写一个表达式。请帮助我。

谢谢和问候， 湿婆奥莱蒂

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T10:14:35.580

如果您使用`js_*`标准正则表达式，它匹配`js, js_, js__, js___`...

正确的正则表达式是`js_\d+`

但是，XPath contains 函数不使用正则表达式，因此您可以直接使用`js_`（尽管它不会检查数字）。

或更好

```
`//div[starts-with(@id, 'js_')]` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:49:23.283

AFAIK，Webdriver 支持 XQuery（例如使用 XQUIB），因此支持完整的 XPath 2.0。

**使用**：

```
//*[matches(@id, '^js_\d+$')] 
```

**基于 XSLT-2.0 的验证**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:sequence select="//*[matches(@id, '^js_\d+$')]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>
 <x id="js_1"/>
 <y id="a1"/>
 <z id="js_2008"/>
</t> 
```

**对上面的 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
<x id="js_1"/>
<z id="js_2008"/> 
```

**说明**：

正确使用 XPath 2.0 函数**[`matches()`](http://www.w3.org/TR/xquery-operators/#func-matches)**和**[RegEx](http://www.w3.org/TR/xquery-operators/#regex-syntax)**。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T12:13:28.960

否则，您可以使用循环将元素添加到列表中...

```
List <WebElement> ls = null;
i=1;
while(i<5)
{
ls.add(we.findElement(By.xpath("html/body/div[1]/div/div[2]/section/nav/div[2]/ul/li["+i+
 "]")));
 i++;
 } 
```

# performance - ASP.NET 返回 FileResult 操作和网站变慢

> ID：11842544
> 
> 赞同：0
> 
> 时间：2012-08-07T09:01:59.777
> 
> 标签：performance

我的网站显然变得非常缓慢，目前只有大约 20 人从我的网站下载。我的网站提供了大约 100MB 的大文件供下载，所以这 20 个人目前正在从中下载。

当足够多的人在下载时，网站变得无法访问，基本上当我尝试浏览页面时，它加载了很长时间才出现。我在下面做

```
FileLocation fl = _store.GetFileLocation(id);
if (fl == null) return;
if (System.IO.File.Exists(fl.Location) == false) return;
RangeDownloader rd = new RangeDownloader(fl.Location, new FileInfo(fl.Location));
rd.ProcessRequest(System.Web.HttpContext.Current); 
```

RangeDownloader 类基本上是一个允许范围下载（多部分/多部分）的类。

我在这里做错什么了吗？我必须使用单独的线程来提供下载，这意味着我使用 ThreadStart 吗？对网站的每个请求不是一个单独的过程吗？我真的需要使用线程吗？从我的共享主机计划中下载 20 个人是否被视为繁重？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T14:08:42.207

我找到了答案，FIleContent 不会减慢 ASP.NET 池的速度，但是它会消耗进程，当太多用户点击同一个文件时，服务器可能会变慢，这也发生在其他 Web 服务器中。

# javascript - 在多页 $.mobile.changePage("#test") 中不起作用

> ID：11842545
> 
> 赞同：0
> 
> 时间：2012-08-07T09:02:01.873
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, cordova

大家好，我有 html 文件，其中 div 中有各种不同的页面。现在我想从一个页面导航到另一个我正在使用`$.mobile.changePage("#test")` 的页面，但是没有导航到 test.html。如果我对 test.html 使用不同的 html 文件并调用它，`$.mobile.changePage(("test.html"));` 那么导航就会发生。

我也尝试使用 loadPage，但它也没有解决我的问题。任何建议将不胜感激，在此先感谢。

这是我的代码：

```
<body> 
<div data-role="page" id="firstPage" onclick=callSecondPage() class="type-home">

        <div data-role="button">
            <input type="submit" data-role="button" value="firstPage" id="firstPage">
        </div>

        <script type="text/javascript">
            function callSecondPage()
            {
                alert ("Inside callPage");

                $.mobile.changePage('#secondPage');

            }
        </script>

</div>

<div data-role="page" id="secondPage"  onclick=callThirdPage() class="type-home">

        <div data-role="button">
            <input type="submit" data-role="button" value="secondPage" id="secondPage">
        </div>

        <script type="text/javascript">
            function callThirdPage()
            {
                alert ("Inside callPage");

                $.mobile.changePage('#thirdPage');

            }
        </script>

</div>

<div data-role="page" id="thirdPage"  onclick=callFourthPage() class="type-home">

        <div data-role="button">
            <input type="submit" data-role="button" value="thirdPage" id="thirdPage">
        </div>

        <script type="text/javascript">
            function callFourthPage()
            {
                alert ("Inside callPage");

                $.mobile.changePage('#fourthPage');

            }
        </script>

</div>

<div data-role="page" id="fourthPage" class="type-home">

        <div data-role="button">
            <input type="submit" data-role="button" value="fourthPage" id="fourthPage">
        </div>

</div>

<div data-role="page" id="fifthPage" class="type-home">

        <div data-role="button">
            <input type="submit" data-role="button" value="fifthPage" id="fifthPage">
        </div>

</div>

<div data-role="page" id="sixthPage" class="type-home">

        <div data-role="button">
            <input type="submit" data-role="button" value="sixthPage" id="sixthPage">
        </div>

</div> 
```

之前来到上面的 html 文件导航到其他页面，现在`$.mobile.changePage('#secondPage');`secondPage 不是从 firstPage 导航的。但是，如果我在 index.html 中放置了相同的代码（即应用程序的入口点，那么就会发生正确的导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:21:55.063

你应该写

```
$.mobile.changePage($("#test")) 
```

对 $.mobile.changePage 的调用是否在等待页面加载？你需要让我们在这里看到一些代码......

# asp.net-mvc-3 - ASP.Net MVC 3 Razor 视图接受空对象

> ID：11842546
> 
> 赞同：0
> 
> 时间：2012-08-07T09:02:05.127
> 
> 标签：asp.net-mvc-3, razor, viewmodel, partial-views

我正在开发一个 ASP.Net MVC 3 Web 应用程序。我有一个视图模型

```
public class ViewModelFormPreview
{
    public FormPersonal PersonDetails { get; set; }
    public IList<FormEmployment> Employment { get; set; }
    public FormMembership Membership { get; set; }
} 
```

还有一个接受这个 ViewModel 的 Razor View

```
@model Locum.UI.ViewModels.ViewModelFormPreview

<h1 class="sepH_b">Application Preview</h1>

  @Html.Partial("FormPreviewApplication/PersonalDetails", Model.PersonDetails)

  @Html.Partial("FormPreviewApplication/Employment", Model.Employment)

  @Html.Partial("FormPreviewApplication/MembershipDetails", Model.Membership) 
```

视图的最后一部分是我的问题发生的地方。

如果**Model.Memebership != null**则接受**FormMembership**类型的 Object 的 Partial View工作得很好。但是，如果**Model.Memebership**为 NULL，我会收到如下错误

> 传入字典的模型项的类型为“Locum.UI.ViewModels.ViewModelFormPreview”，但此字典需要类型为“Locum.POCO.FormMembership”的模型项

这是一个奇怪的错误，因为即使**Model.Memebership**为 NULL，它仍然是**FormMembership**类型。那么，为什么当 Object 为 NULL 时错误指出我试图传入**ViewModelFormPreview ？**

有人能帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:31:49.450

正如消息所说，它是 NULL 而不是 EMPTY。如果您尝试使用 Membership.MyFiels，并且成员资格为 null，您总是会收到错误消息。

要解决您的问题，只需初始化您的类，在 NULL 的情况下使用默认值，或使用 IF 检查它是否为 NULL

像这样的东西。

```
@if (Model,Membership!=null) {
  @Html.Partial("FormPreviewApplication/MembershipDetails", Model.Membership) 
}
else
{
  @Html.Partial("FormPreviewApplication/MembershipDetails", new FormMembership())     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:18:19.840

您能否创建一个新的空 Membership 类实例并传递给 partial 以避免此错误

# python - 区分python中的命令行和CGI

> ID：11842547
> 
> 赞同：0
> 
> 时间：2012-08-07T09:02:09.240
> 
> 标签：python, cgi

是否可以区分我的 Python 脚本是从 Web 服务器（作为 CGI 脚本）还是从命令行执行的？

我只看到了一些针对 PHP 和 Perl 的回复：
[确定 PHP 脚本的命令行与 http 执行的规范方法是什么？](https://stackoverflow.com/questions/173851/what-is-the-canonical-way-to-determine-commandline-vs-http-execution-of-a-php-s)
[如何确定脚本是从命令行调用还是作为 cgi 脚本调用的？](https://stackoverflow.com/questions/1914966/how-can-i-determine-if-a-script-was-called-from-the-command-line-or-as-a-cgi-scr)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:11:10.767

Perl的[答案](https://stackoverflow.com/a/1915017/35070)也适用于 Python；检查[环境变量](http://docs.python.org/library/os#os.environ)：[`GATEWAY_INTERFACE`](https://www.rfc-editor.org/rfc/rfc3875#section-4.1.4)

```
import os
if 'GATEWAY_INTERFACE' in os.environ:
    print ('CGI')
else:
    print ('Not CGI. CLI?') 
```

# python - 如何使用 Python 计算特定目录中文本文件的唯一单词？

> ID：11842548
> 
> 赞同：-2
> 
> 时间：2012-08-07T09:02:10.430
> 
> 标签：python, list, directory, readfile, word-count

我正在写一份报告，我需要计算文本文件的唯一单词。

我的文本在 D:\shakeall 中，它们总共有 42 个文件...

我对 Python 有所了解，但我现在不知道该怎么办。

这就是我所知道的它是如何工作的。

1.  读取目录中的文件

2.  从文本中组成一个单词列表

3.  计算总数/唯一词

我所知道的就是这个。还有一些关于 for、while、列表和索引、变量、列表...

我想做的是制作自己的函数库并使用它来获得结果。

我非常感谢任何关于我的问题的建议。

------ps

我对 Python 几乎一无所知。我只能做一个简单的数学运算或在列表中打印单词……给定的主题对我来说太难了。对不起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:15:12.387

```
textfile=open('somefile.txt','r')
text_list=[line.split(' ') for line in textfile]
unique_words=[word for word in text_list if word not in unique_words]
print(len(unique_words)) 
```

这是它的一般要点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T09:15:35.163

```
import os
uniquewords = set([])

for root, dirs, files in os.walk("D:\\shakeall"):
    for name in files:
        [uniquewords.add(x) for x in open(os.path.join(root,name)).read().split()]

print list(uniquewords)
print len(uniquewords) 
```

# json - 数据表服务器端代码

> ID：11842551
> 
> 赞同：0
> 
> 时间：2012-08-07T09:02:20.010
> 
> 标签：json, datatables

我的表格代码是这个

```
<table class="table responsive-table" id="sorting-advanced">
                <thead>
                    <tr>
                        <th scope="col">Estado</th>      
                        <th scope="col" width="5%" class="align-center hide-on-mobile">Registo</th>
                        <th scope="col" width="5%">Expiração</th>
                        <th scope="col" width="5%" class="align-center hide-on-mobile">Inserção</th>
                        <th scope="col" width="10%">Dominio</th>
                        <th scope="col" width="10%" class="align-center hide-on-mobile">Titular</th>
                        <th scope="col" width="15%" class="align-center hide-on-mobile">Morada Tit.</th>
                        <th scope="col" width="10%">Email Tit.</th>
                        <th scope="col" width="15%" class="align-center hide-on-mobile">Localidade Tit.</th>
                        <th scope="col" width="15%" class="align-center hide-on-mobile">Cód. Postal</th>
                        <th scope="col" class="align-center hide-on-mobile">Nome Ent.</th>
                        <th scope="col" class="align-center hide-on-mobile">Email Ent.</th>
                        <th scope="col" class="align-center hide-on-mobile">Nome Tec.</th>
                        <th scope="col" class="align-center hide-on-mobile">Email Tec.</th>
                        <th scope="col" width="10px" >IP</th>
                        <?php if ($_SESSION['update'] == '1'){echo '<th scope="col" width=20px>Black</th>';} ?>

                    </tr>
                </thead>
                <tbody>

                </tbody>

                <tfoot>

                </tfoot>
            </table> 
```

我的数据代码...

```
<script>

        // Call template init (optional, but faster if called manually)
        $.template.init();

        // Table sort - DataTables
        var table = $('#sorting-advanced'),
            tableStyled = false;

        table.dataTable({
            "iCookieDuration": 60*60*2 , 
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": "http://pgcc.datasource.pt/beta/listas/whois.php",
            "sScrollX": "100%",
            "bScrollCollapse": true,
            'sPaginationType': 'full_numbers',
            'oLanguage': {
                    "sProcessing":   "A processar...",
                    "sLengthMenu":   "Mostrar _MENU_ domínios",
                    "sZeroRecords":  "Não foram encontrados resultados",
                    "sInfo":         "Lista de domínios | <button class=\"button compact green-gradient\" onClick=\"javascript: openModal();\">Adicionar</button>",     
                    "sInfoEmpty":    "Não foram encontrados resultados",
                    "sInfoFiltered": "",
                    "sInfoPostFix":  "",
                    "sSearch":       "Procurar:",
                    "sUrl":          "",
                    "oPaginate": {
                        "sFirst":    "Primeiro",
                        "sPrevious": "Anterior",
                        "sNext":     "Seguinte",
                        "sLast":     "Último"
            }
            },
            'sPaginationType': 'full_numbers',
            'fnDrawCallback': function( oSettings )
            {
                // Only run once
                if (!tableStyled)
                {
                    table.closest('.dataTables_wrapper').find('.dataTables_length select').addClass('select blue-gradient glossy').styleSelect();
                    tableStyled = true;
                }
            },

        });
            oTable = $('#sorting-advanced').dataTable();

            function fnShowHide( iCol )
            {
                /* Get the DataTables object again - this is not a recreation, just a get of the object */

                var bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
                oTable.fnSetColumnVis( iCol, bVis ? false : true );

            }
            $(document).ready(function(e) {
                fnShowHide(1); 
                fnShowHide(3); 
                fnShowHide(5); 
                fnShowHide(6); 
                fnShowHide(8); 
                fnShowHide(9); 
                fnShowHide(10); 
                fnShowHide(11); 
                fnShowHide(12); 
                fnShowHide(13);
            });

    </script>

    <script>

        $('#mudar').change(function(){
            var valor = $(this).val(); 
            $.post('pesquisar.php',{valor: valor}, function(data){
            $('#pesquisa').html(data)
            });
        });

    </script> 
```

而我得到的 JSON...

```
{"sEcho":0,"iTotalRecords":"2","iTotalDisplayRecords":"2","aaData":[["1","2012-08-06 17:49:05","2012-08-07","2012-08-06","nuno.pt","Nuno Almeida","Rua dos Frades","nuno_ng21@hotmail.com","Seia","1231","Gonçalo Cabral","g.cabral@datasource.pt","Datasource","teste@hotmail.com","192.168.1.0","1"],["1","2012-08-06 17:49:05","2012-08-07","2012-08-06","rumonet.pt","Nuno Almeida","Rua dos Frades","nuno_ng21@hotmail.com","Seia","1231","Gonçalo Cabral","g.cabral@datasource.pt","Datasource","teste@hotmail.com","192.168.1.0","2"]]} 
```

但是当我加载时，表格并没有做任何事情......它只在中间出现一个白色方块，并且没有加载......

如果我将 sAjaxsource 更改为 allraedy 工作的文件，它会显示结果，但输出 JSON 格式是相等的......

Any1知道为什么会这样吗？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:35:53.463

我能想到的唯一一件事是，您是否将表创建的相同 sEcho 发回？来自文档

> 字符串 sEcho 从客户端发送的 sEcho 的未更改副本。这个参数会随着每次抽奖而改变（它基本上是一个抽奖次数）——所以实现这一点很重要。请注意，出于安全原因，强烈建议您将此参数“强制转换”为整数，以防止跨站点脚本 (XSS) 攻击。

如果你总是用相同的 json 响应，你应该省略 sEcho （并且知道省略它的危险）

# java - MongoDB 的 Java 堆空间

> ID：11842556
> 
> 赞同：3
> 
> 时间：2012-08-07T09:02:33.723
> 
> 标签：java, eclipse, jakarta-ee, tomcat, mongodb

我使用 Tomcat、Eclipse、Java EE、MongoDB。

当我运行要连接到 mongoDB 数据库并保存一些数据的 java 程序时，我收到此错误：

```
Exception in thread "http-bio-8080-exec-19"
java.lang.OutOfMemoryError: Java heap space
        at java.nio.HeapCharBuffer.<init>(HeapCharBuffer.java:57)
        at java.nio.CharBuffer.allocate(CharBuffer.java:331)
        at com.mongodb.ByteEncoder.<init>(ByteEncoder.java:546)
        at com.mongodb.ByteEncoder.<init>(ByteEncoder.java:48)
        at com.mongodb.ByteEncoder$1.createNew(ByteEncoder.java:79)
        at com.mongodb.ByteEncoder$1.createNew(ByteEncoder.java:76)
        at com.mongodb.util.SimplePool._get(SimplePool.java:140)
        at com.mongodb.util.SimplePool.get(SimplePool.java:106)
        at com.mongodb.util.SimplePool.get(SimplePool.java:95)
        at com.mongodb.ByteEncoder.get(ByteEncoder.java:66)
        at com.mongodb.DBMessage.<init>(DBMessage.java:52)
        at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:166)
        at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:132)
        at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:127)
        at web.ApplicationInterface.doGet(ApplicationInterface.java:125)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.tomee.catalina.OpenEJBValve.invoke(OpenEJBValve.java:45)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110), 
```

`EDIT`

我已经更改了 Eclipse 允许的内存，但我仍然有同样的问题。

这是导致问题的代码。

```
db.requestStart();
try 
{
    coll.insert(doc);
    DBObject err = db.getLastError();
} 
finally 
{
    db.requestDone();
} 
```

`PROBLEM SOLVED`

MongoDB的版本老了，bug很多，我现在用的是2.8版本，现在可以用了，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:07:42.413

尝试增加堆大小

```
JVM -- keys
 -Xms<size>        set initial Java heap size
 -Xmx<size>        set maximum Java heap size 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T09:06:08.427

尝试使用`-Xmx1024m`选项（例如）为您的 JVM 允许更多内存：[如何处理“java.lang.OutOfMemoryError：Java 堆空间”错误（64MB 堆大小）](https://stackoverflow.com/questions/37335)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:10:42.603

您要保存多少数据？我认为您正在尝试将大量数据一次性存储到 MongoDB。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:47:14.877

在运行配置中编辑这些运行配置右键单击您的项目根目录->运行方式->运行配置

![在 VM 参数中添加 -Xms<size> 和 -Xmx<size>](../Images/a31e673b41f0668e74069250da0d4c5c.png)

# android - 如何在android的微调器列表底部显示指示？

> ID：11842558
> 
> 赞同：0
> 
> 时间：2012-08-07T09:02:45.187
> 
> 标签：android, android-layout, android-spinner

我想在微调器列表的底部显示指示。假设我在数组列表中有 10 个值，当我单击微调器时，它会显示滚动列表后显示的前 5 个其余值。我想在底部显示指示以滚动列表以获取更多值。

# vba - VBA - 在另一个表单上禁用控制

> ID：11842559
> 
> 赞同：1
> 
> 时间：2012-08-07T09:02:46.580
> 
> 标签：vba, ms-access

很简单，我想用 VBA 禁用另一个表单上的文本框。

我知道我可以像这样打开我的表单：

```
DoCmd.OpenForm "frmMyForm" 
```

我可以像这样访问表单上文本框中包含的值

```
Dim myValue As String
myValue = [Forms]![frmMyForm]![txtMyControl] 
```

我可以像这样更新值：

```
[Forms]![frmMyForm]![txtMyControl] = "FooBar" 
```

如何禁用文本框（如将`Enabled`属性设置为 false）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:13:08.083

我是个白痴，事实证明你所做的只是：

```
[Forms]![frmMyForm]![txtMyControl].Enabled = False 
```

# ruby-on-rails-3 - 想在现有的 Rails 项目中添加博客

> ID：11842560
> 
> 赞同：0
> 
> 时间：2012-08-07T09:02:50.853
> 
> 标签：ruby-on-rails-3

我在 rails3 做一个会计项目，它也有一些工资单的功能。现在我想在我现有的项目中创建一个博客。博客流程是这样的“在博客中的帖子只能由超级管理员创建，每个人都可以阅读。这里的超级管理员是项目的所有者/创建者。我注册了很多公司，超级管理员不属于任何公司。”

一种解决方案是我可以为博客管理单独的数据库，以便超级管理员单独登录并创建帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:37:36.827

您可能会发现以下问题和答案很有用
[一个干净的最小 gem 可以将一个简单的博客添加到现有的应用程序？](https://stackoverflow.com/questions/9276145/a-clean-minimal-gem-to-add-a-simple-blog-to-existing-app)
[简单的 Rails 3 博客](https://stackoverflow.com/questions/7427412/simple-rails-3-blog)

# java - 错误时自动恢复的 HTTP 异步下载器

> ID：11842563
> 
> 赞同：7
> 
> 时间：2012-08-07T09:02:59.820
> 
> 标签：java, android, download

我的应用程序中有一个异步下载器，但有时连接会丢失，尤其是当我使用移动连接并且文件很大（> 10 MB）时。有没有办法在下载停止时捕捉到，然后在完成下载的结果下强制它恢复？

这是异步任务`doInBackground`：

```
protected String doInBackground(String... aurl) {
    int count;

    try {

        URL url = new URL(aurl[0]);
        URLConnection conexion = url.openConnection();
        // conexion.setRequestProperty("Range", "bytes=" + downloaded + "-");
        conexion.connect();

        int lenghtOfFile = conexion.getContentLength();
        pesoVideo = lenghtOfFile / 1048576;
        output = "/sdcard/" + folderString + "/" + nomeFile + ".mp3";
        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream(
        VideoDownloaderBrowserActivity.this.output);

        byte data[] = new byte[1024];
        long total = 0;

        while ((count = input.read(data)) != -1) {
            total += count;
            publishProgress("" + (int) ((total * 100) / lenghtOfFile));
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();

    } catch (Exception e) {
    }

    return null;
} 
```

这是`onProgressUpdate`：

```
protected void onProgressUpdate(String... progress) {
    if (Integer.parseInt(progress[0]) > progresso) {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:41:48.147

这是一个讨论 API 9 以下 Android 中可恢复下载的线程。否则[对于](https://stackoverflow.com/questions/6237079/resume-http-file-download-in-java)[`DownloadManager`](http://developer.android.com/reference/android/app/DownloadManager.html)较新版本也是一个不错的选择。

基本上，您需要在服务器上启用字节服务以允许可恢复下载。

# mime - 在 javax.mail api 中为 mime 多部分/相关消息的内容类型设置“开始”属性

> ID：11842564
> 
> 赞同：2
> 
> 时间：2012-08-07T09:03:05.070
> 
> 标签：mime, jakarta-mail

如何`start`在 mime 多部分/相关消息的内容类型中设置属性？更准确地说，我想知道如何`start`在以下示例中设置根附件的属性，该示例取自[https://www.rfc-editor.org/rfc/rfc6362](https://www.rfc-editor.org/rfc/rfc6362)：

```
--OUTER-BOUNDARY
Content-type: multipart/related; boundary="INNER-BOUNDARY";
   start="<root.attachment>"; type="application/xml"

--INNER-BOUNDARY
Content-type: application/xml
Content-ID: <root.attachment>

[XML DOCUMENT]

--INNER-BOUNDARY
Content-type: application/pdf
Content-ID: <2nd.attachment>

[PDF DOCUMENT]

--INNER-BOUNDARY--

--OUTER-BOUNDARY 
```

我无法在`javax.mail`api 中找到它。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:13:57.610

我最近一直在努力解决这个问题，下面的代码是我能想到的最好的代码（实际上没有其他东西对我有用）：

```
 public class MultipartGenerator {

      //Let's assume the static members below 
      //hold our message parts content 
      //an the instances of arrays of byte

      private static final byte [] ROOT_BYTES = new byte[]{/* ... bytes ... */};

      private static final byte [] ATTCH_1_BYTES = new byte[]{/* ... bytes ... */};

      private static final byte [] ATTCH_2_BYTES = new byte[]{/* ... bytes ... */};

      /**
       * Generate multipart with headers
       *
       * @return javax.mail.Multipart instance
       */
       public static Multipart generateMultipart() {

         //This is our root MimeBodyPart, 
         //content-id equals 'rootcid'
         //content-type equals 'roottype/rootsubtype'

         InternetHeaders ih0 = new InternetHeaders();
         ih0.addHeader("Content-Type", "roottype/rootsubtype");
         ih0.addHeader("Content-Transfer-Encoding", "binary");
         ih0.addHeader("Content-ID", "rootcid");
         MimeBodyPart rootBodyPart = new MimeBodyPart(ih0, ROOT_BYTES);

         //This is a body part wrapping first message attachment
         InternetHeaders ih1 = new InternetHeaders();
         ih1.addHeader("Content-Type", "text/plain; name=attachment1.txt");
         ih1.addHeader("Content-Transfer-Encoding", "binary");
         ih1.addHeader("Content-Location", "attachment1.txt");
         ih1.addHeader("Content-ID", "a00");
         MimeBodyPart attch1BodyPart = new MimeBodyPart(ih1, ATTCH_1_BYTES);

         //This is a body part wrapping second message attachment
         InternetHeaders ih2 = new InternetHeaders();
         ih2.addHeader("Content-Type", "text/plain; name=attachment2.txt");
         ih2.addHeader("Content-Transfer-Encoding", "binary");
         ih2.addHeader("Content-Location", "attachment2.txt");
         ih2.addHeader("Content-ID", "a01");        
         MimeBodyPart attch2BodyPart = new MimeBodyPart(ih2, ATTCH_2_BYTES);

         //This is our desired multipart, this is where things turn a bit dirty
         //No success with setting the parameters in a different way

         Multipart multipart = new MimeMultipart("related;start=\"<rootcid>\";type=\"roottype/rootsubtype\"");

         multipart.addBodyPart(rootBodyPart,0);
         multipart.addBodyPart(attch1BodyPart);
         multipart.addBodyPart(attch2BodyPart);

         return multipart;
       }
    } 
```

处理此任务可能有更好的方法，但是我找不到。

# android - Android 中日期显示不正确

> ID：11842566
> 
> 赞同：-2
> 
> 时间：2012-08-07T09:03:07.717
> 
> 标签：android, date, format

我正在开发一个应用程序，当时间为 11:26 时，它显示为 11:07。我用日历实例来做。

```
Calendar currentDate=Calendar.getInstance();
        SimpleDateFormat ddMMyyyy=new SimpleDateFormat("dd/MM/yyyy");
        datenow=ddMMyyyy.format(currentDate.getTime());

        if(currentDate.get(Calendar.AM_PM)==Calendar.PM){
            timenow=currentDate.get(Calendar.HOUR)+":"+currentDate.get(Calendar.MONTH)+":PM";
        }else{
            timenow=currentDate.get(Calendar.HOUR)+":"+currentDate.get(Calendar.MONTH)+":AM";
        }
        new MyToast(this, "Date = "+datenow+" time = "+timenow); 
```

输出错了怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:10:05.590

您正在显示`month`. `minute`将您的代码更改为我的代码

```
Calendar currentDate=Calendar.getInstance();
SimpleDateFormat ddMMyyyy=new SimpleDateFormat("dd/MM/yyyy");
String datenow = ddMMyyyy.format(currentDate.getTime());

String timenow;
if(currentDate.get(Calendar.AM_PM)==Calendar.PM){
    timenow=currentDate.get(Calendar.HOUR)+":"+currentDate.get(Calendar.MINUTE)+":PM";
}else{
    timenow=currentDate.get(Calendar.HOUR)+":"+currentDate.get(Calendar.MINUTE)+":AM";
}
Toast.makeText(MainActivity.this, "Date = "+datenow+" time = "+timenow,Toast.LENGTH_SHORT).show(); 
```

显示 11:07 是因为 07 ==> 一年中的月份数。月份将从 0 -> 11 计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:11:51.497

你看错了这里`Calendar.HOUR`++ 。应该如下，`:`**`Calendar.MONTH`**

```
Calendar currentDate=Calendar.getInstance();
        SimpleDateFormat ddMMyyyy=new SimpleDateFormat("dd/MM/yyyy");
        datenow=ddMMyyyy.format(currentDate.getTime());

        if(currentDate.get(Calendar.AM_PM)==Calendar.PM){
            timenow=currentDate.get(Calendar.HOUR)+":"+currentDate.get(Calendar.MINUTE)+":PM";
        }else{
            timenow=currentDate.get(Calendar.HOUR)+":"+currentDate.get(Calendar.MINUTE)+":AM";
        }
        new MyToast(this, "Date = "+datenow+" time = "+timenow); 
```

您访问的不是**MINUTE ，而是 Calendar 类的****MONTH**对象。

# java - 如何使用 JsonPath 进行 OR 查询和正则表达式查询

> ID：11842571
> 
> 赞同：1
> 
> 时间：2012-08-07T09:03:19.730
> 
> 标签：java, json

我刚刚尝试了`JsonPath`一些应用程序级别的过滤，发现我不能做一个`OR`查询，`RegeX`查询。

是否可以使用 进行此类查询`JsonPath`？如果不能，你可以建议其他一些图书馆做同样的事情。

# android-emulator - android中的主机条目

> ID：11842582
> 
> 赞同：5
> 
> 时间：2012-08-07T09:04:02.767
> 
> 标签：android-emulator, dns, hosts, uat

将主机条目放入android主机文件的程序是什么？我们做了以下事情。使用 cmd ( File Explorer -> System -> etc ->hosts ) 在 Android 的 hosts 文件中创建了 URL 条目。

```
127.0.0.1               localhost
xx.xx.xx.xx             www.example.com 
```

如需参考，请访问 [http://www.bradcurtis.com/2011/02/13/hosts-file-google-android-emulator/](http://www.bradcurtis.com/2011/02/13/hosts-file-google-android-emulator/)

但是当我们执行程序时，android 不会读取主机条目。DNS 将获取我们已经在 hosts 文件中创建条目的 ip。

任何人都可以建议如何在Android的主机文件中添加一个条目，以便在程序执行时可以读取该条目。

# java - 简单的基于 java 的工作流管理器/数据工作流，能够启动 ext。应用程序，调用网络服务等

> ID：11842587
> 
> 赞同：4
> 
> 时间：2012-08-07T09:04:33.693
> 
> 标签：java, workflow, dataflow, data-processing

首先，如果stackoverflow上已经有像我这样的问题，很抱歉，但我还没有找到它。实际上我不知道我可以使用哪些标签来搜索我需要的解决方案。

基本上，我需要一个工具/软件，它可以在整个过程中使用多个工具/操作来管理数据（对象）流。当然，现有的 BPM/工作流平台工具之一可能可以做到这一点，但它们似乎对我的要求来说太复杂了。

我有一个用 JPA/Hibernate 构建的“静态”数据模型。然后我需要更改该静态模型以便对其使用不同的处理功能。该函数可以是一些 java 类、Web 服务或外部应用程序（支持批处理模式）。之后我需要捕获这些函数的输出并进行一些可视化，绘制一些图表等。我可以假设所有这些处理函数都可以访问静态模型，并且他们可以将其更改为特定的模型，因此无需将输入传递给他们。另一方面，它们的输出应该由主要的“工作流管理器”捕获。

还有一件事，整个过程应该在没有任何用户交互的情况下自动运行（也许将来会改变，但现在看看并呈现）。在流程开始之前，管理员应该定义使用哪个“处理功能”，仅此而已。还有一件事……最好是在更改数据库状态时触发整个过程，但这并不重要，例如，我可以通过调用 Web 服务来启动它。

问题是：我应该使用现有的 BPM/Workflow 工具之一，例如 jBPM 或 Activiti，自己编写一个简单的“工作流管理器”还是使用比 jBPM/Activiti 简单得多的现有工具（有吗？） . 当然我更喜欢最简单的方法......

非常感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T09:40:08.023

Apache Camel 是一个开源集成框架，它将在这方面为您提供帮助。

您可以使用[Apache Camel](http://camel.apache.org/)构建自己的简单工作流管理器，其中每个流程都实现[Processor](http://camel.apache.org/processor.html)。您的数据可以通过使用 camel [Exchange](http://camel.apache.org/exchange.html)的处理器传递。查看骆驼[示例](http://camel.apache.org/examples.html)以获取更多信息。

有关如何编写自定义处理器的信息，请阅读[此处](http://camel.apache.org/how-do-i-write-a-custom-processor-which-sends-multiple-messages.html)。

您可以动态地将处理器添加到 Camel RouteBuilder，使用[Quartz Scheduler](http://camel.apache.org/quartz.html)等进行调度，这或多或少会满足您的所有需求。

**这是对骆驼的很好的介绍**：[http ://www.kai-waehner.de/blog/2012/05/04/apache-camel-tutorial-introduction/](http://www.kai-waehner.de/blog/2012/05/04/apache-camel-tutorial-introduction/)

使用 Camel 的 Workflow Manager 的简单实现：

**工作流管理器.java**

```
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.impl.DefaultCamelContext;

public class WorkflowManager {

    DefaultCamelContext camelContext;

    public WorkflowManager() {
        camelContext = new DefaultCamelContext();
        RouteBuilder routeBuilder = new RouteBuilder() {

            @Override
            public void configure() throws Exception {
                from("timer:schedule?period=1s&daemon=true").process(new ProcessOne()).process(new ProcessTwo());
            }
        };
        try {
            camelContext.addRoutes(routeBuilder);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void start() throws Exception {
        camelContext.start();
    }

    public void stop() throws Exception {
        camelContext.stop();
    }

    public static void main(String[] args) {
        WorkflowManager workflowManager = new WorkflowManager();
        try {
            workflowManager.start();
            while(true) {

            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

**ProcessOne.java**

```
import org.apache.camel.Exchange;
import org.apache.camel.Processor;

public class ProcessOne implements Processor {
    @Override
    public void process(Exchange exchange) throws Exception {
        System.out.println("In ProcessOne");
    }
} 
```

**ProcessTwo.java**

```
import org.apache.camel.Exchange;
import org.apache.camel.Processor;

public class ProcessTwo implements Processor {
    @Override
    public void process(Exchange exchange) throws Exception {
        System.out.println("In ProcessTwo");
    }
} 
```

我使用 Camel 2.9.0 版来编译这段代码。请注意，我在 main 方法中使用了无限循环来保持主线程处于活动状态。

*此代码将运行具有 ProcessOne 和 ProcessTwo 的路由，周期为 1 秒。您可以在 from(...) 方法中看到我将处理器添加到路由构建器的时间段。因此，这条路线将重复运行。另外，我也不想传输任何数据。您可以在每个处理器的处理方法中使用交换来传输数据。*

输出将是：

```
In ProcessOne

In ProcessTwo

In ProcessOne

In ProcessTwo 
```

您可以使用骆驼组件来使您的 WorkflowManager 健壮。

# python - 像 nm -D 或 readelf -s 一样，使用 python ctypes 列出动态符号？

> ID：11842588
> 
> 赞同：3
> 
> 时间：2012-08-07T09:04:34.220
> 
> 标签：python, dll, ctypes, symbols, dynamic-library

是否可以实现`nm -D`或`readelf -s`使用 python ctypes？

我想列出`.so`文件的所有动态符号。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:49:09.653

我的回答是：**不**，它极不可能`ctypes`为您提供库中所有可用符号的枚举。

原因主要在于`ctypes`作为 Python 模块的范围，以及动态库 API 的范围：POSIX [`dlopen`](http://pubs.opengroup.org/onlinepubs/009695399/functions/dlopen.html)+[`dlsym`](http://pubs.opengroup.org/onlinepubs/009695399/functions/dlsym.html)或 Win32 [`LoadLibrary`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)+ [`GetProcAddress`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)。这些 API 的主要任务是加载 DLL 并通过符号名称/序号获取可调用地址。它们**不是**为符号枚举而设计的。您不能使用它们列出符号；当然， CPython[依赖它们](http://hg.python.org/cpython/file/tip/Modules/_ctypes/_ctypes.c)来实现其功能。

还需要说明的是，您提到的工具`nm`和工具**自己解析**可执行文件以获取符号列表。这与将库作为可执行模块加载到内存中非常相切。因此，您将需要一个不同的 Python 模块来执行此操作，例如。`readelf`**[`python-elf`](http://sourceforge.net/projects/python-elf/)**

# javascript - JavaScript - 滚动到 div 时显示一条消息

> ID：11842591
> 
> 赞同：0
> 
> 时间：2012-08-07T09:04:38.840
> 
> 标签：javascript, html, scroll, alert

我的网站是水平的。如果我在 div“联系人”上向右移动一个滚动条，我想函数返回一个值，它可以是警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:18:57.833

jQuery：

```
$("#contact-container").scroll(function(){
    alert($(this).scrollLeft());
}); 
```

纯JS：

```
var box = document.getElementById('box');
box.onscroll = function () {
    alert(this.scrollLeft);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:14:09.733

使用 jQuery 框架做这样的事情

var var oldScrollLeft = $(window).scrollLeft();

$（窗口）。滚动（函数（）{

```
 if(oldScrollLeft!= $(window).scrollLeft()){

       //function here

     }

 });​ 
```

# winapi - 挂钩 ExtTextOutW 不会为文本提供正确的信息

> ID：11842605
> 
> 赞同：1
> 
> 时间：2012-08-07T09:05:20.263
> 
> 标签：winapi, hook

我正在创建一个应用程序，它可以从任何窗口上的选定矩形中获取文本。所以我通过挂钩 ExtTextOut(A/W)、TextOut(A/W)、DrawText(A/W) api 来做到这一点。我能够从 Windows 中检索文本，但在某些特殊情况下，我无法正确获取文本。当我尝试调试它时，我看到 ExtTextOutW 的 HDC 参数不能用于获取 HWND，因为当我尝试调用 WindowFromDC(hdc) 时，它返回 NULL HWND。

我试图找出原因，然后我发现这个 HDC 是 memoryDC 那么有没有办法从那个 memory DC 获取 HWND。

所以请有人帮我从 HDC 获得实际的 HWND。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:12:00.707

我认为您必须*遵循*这一点，`HDC`因为它很可能是`BitBlt()`或类似于`HDC`与实际相关联的 a `HWND`：

*   缓存写入内存`HDC`的文本
*   hook`BitBlt()`等，并检查 s 的来源`HDC`是否是已写入文本`BitBlt()`的 memory 之一。`HDC`如果是，检查目的地`HDC`是否有一个，如果没有，那么它是一个必须再次遵循`HWND`的记忆`HDC`

# python - 定义 PyParsing 字段名称的简写

> ID：11842607
> 
> 赞同：3
> 
> 时间：2012-08-07T09:05:27.853
> 
> 标签：python, pyparsing

我有一些 pyparsing 标记定义如下：

```
field = Word(alphas + "_").setName("field") 
```

这真的没有速记吗？

此外，这似乎不起作用，返回的字典`expression.parseString()` 总是一个空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:19:10.093

`field = Word(alphas + "_")("field")`

似乎工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T12:09:36.660

你很困惑`setName`和`setResultsName`。`setName`为表达式分配一个名称，以便异常消息更有意义。比较：

```
>>> integer1 = Word(nums)
>>> integer1.parseString('x')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "c:\python26\lib\site-packages\pyparsing-1.5.6-py2.6.egg\pyparsing.py", line 1032, in parseString
    raise exc
pyparsing.ParseException: Expected W:(0123...) (at char 0), (line:1, col:1) 
```

和：

```
>>> integer2 = Word(nums).setName("integer")
>>> integer2.parseString('x')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "c:\python26\lib\site-packages\pyparsing-1.5.6-py2.6.egg\pyparsing.py", line 1032, in parseString
    raise exc
pyparsing.ParseException: Expected integer (at char 0), (line:1, col:1) 
```

`setName`为表达式本身命名。

`setResultsName`另一方面，为返回的解析数据命名，如正则表达式中的命名字段。

```
>>> expr = integer.setResultsName('age') + integer.setResultsName('credits')
>>> data = expr.parseString('20 110')
>>> print data.dump()
['20', '110']
- age: 20
- credits: 110 
```

正如@Kimvais 所提到的，有*一个*快捷方式`setResultsName`：

```
>>> expr = integer('age') + integer('credits') 
```

另请注意，它`setResultsName`返回表达式的副本 - 这是多次使用不同名称的相同表达式的唯一方法。

# sql-server - 无法使用 IIS 管理器管理数据库

> ID：11842609
> 
> 赞同：3
> 
> 时间：2012-08-07T09:05:35.873
> 
> 标签：sql-server, iis-manager

我正在尝试管理存储在 MDF 文件中的本地数据库。我可以使用 Visual Studio 2010 做到这一点，但现在我正试图为此目的使用 ISS 管理器。我想使用连接字符串添加数据库，但在主页上看不到这个选项。实际上，缺少整个“ASP.NET”类别。这是一个屏幕截图：

![IIS 管理器](../Images/4173a71e572eb754d6acf6e92e0e62a2.png)

如果我尝试使用数据库管理器选项手动添加我的数据库，我会收到一个错误：

> 执行此操作时出错。细节：
> 
> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

所有组件均使用 Web 平台安装程序安装。那么我如何使用 IIS 管理器管理我的数据库呢？

*   Windows 7 x64 终极版
*   微软 SQL Server 2008 x64
*   Visual Studio 2010 专业版 SP1
*   IIS 管理器 x64

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:09:23.127

看起来您实际上并未安装 ASP.net。

转到控制面板/程序/Windows 功能并安装它（在 Internet 信息服务/WWW 服务/应用程序开发功能下）

# javascript - 使用 Jquery 预加载精灵表

> ID：11842611
> 
> 赞同：0
> 
> 时间：2012-08-07T09:05:55.220
> 
> 标签：javascript, jquery

我现在有一个 spritesheet 我想做的是预加载 spritesheet 图像我如何使用 javascript 来完成它。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:09:32.250

这与 HTML5 无关，也与 jQuery 无关。精灵表只是一个图像，所以像任何其他图像一样预加载。也就是说，“jQuery 方式”将是：

```
var $mySprite = $("<img>").attr("src", "myURL"); 
```

瞧。

# qt - 带对话框的 QT 应用程序

> ID：11842614
> 
> 赞同：1
> 
> 时间：2012-08-07T09:05:59.680
> 
> 标签：qt

我正在用 qt 编写应用程序。此应用程序将有许多对话框。我的问题是：对话处理的策略是什么？我应该在主窗口的构造函数中创建它们还是应该在用户单击按钮时创建它们（即用户需要它时）。它们应该被销毁还是自动销毁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:18:14.630

这没有硬性规定。 *通常*对话框小而轻，因此在打开时创建并在关闭时销毁（*通常*自动）。但是，如果您有一个包含非常重的小部件和/或需要从慢速源获取数据的自定义对话框，那么您可以创建一个对话框并仅在需要时显示。

> 它们应该被销毁还是自动销毁？

这完全取决于您如何创建它。我能做的最好的事情就是为您指出信息最丰富的[来源](https://qt-project.org/doc/qt-4.8/qdialog.html#details)。

# jsf - 在 primefaces 的向导中上传文件 - 上传的文件不显示？

> ID：11842622
> 
> 赞同：4
> 
> 时间：2012-08-07T09:06:23.533
> 
> 标签：jsf, netbeans, primefaces, nested-forms

我使用 Primefaces 手册示例作为向导，并用一个简单的文件上传表单替换其中一个选项卡。我拥有所有必要的库并在 web-inf 中进行过滤，以使文件上传正常工作。使用 Netbeans 运行项目不会显示任何错误（显示向导并且 UI 响应），但是文件没有上传，并且我的 fileBean 类没有收到系统消息。任何线索我在哪里犯了错误？我在 index.html 中的嵌套表单有问题吗？谢谢！

索引.xhtml：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>The rings of scholarship</title>
    </h:head>
    <h:body>
        <h:form>

            <p:growl id="growl" sticky="true" showDetail="true"/>

            <p:wizard widgetVar="wiz"
                      flowListener="#{userWizard.onFlowProcess}">

                <p:tab id="personal" title="Personal">

                    <p:panel header="Personal Details">

                        <h:messages errorClass="error"/>

                        <h:panelGrid columns="2" columnClasses="label, value" styleClass="grid">
                            <h:outputText value="Firstname: *" />
                            <p:inputText required="true" label="Firstname"
                                         value="#{userWizard.user.firstname}" />

                            <h:outputText value="Lastname: *" />
                            <p:inputText required="true" label="Lastname"
                                         value="#{userWizard.user.lastname}" />

                            <h:outputText value="Age: " />
                            <p:inputText value="#{userWizard.user.age}" />

                            <h:outputText value="Skip to last: " />
                            <h:selectBooleanCheckbox value="#{userWizard.skip}" />
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="upload" title="File upload">
                    <p:panel header="File upload">

                        <h:messages errorClass="error"/>

                        <h:panelGrid columns="2" columnClasses="label, value">
                            <h:form enctype="multipart/form-data">
                                <p:fileUpload value="#{fileBean.file}" mode="simple" />
                                <p:commandButton value="Submit" action="#{fileBean.save}" ajax="false"/>
                            </h:form>
                        </h:panelGrid>
                        <h:outputText value="Skip to last: " />
                        <h:selectBooleanCheckbox value="#{userWizard.skip}" />
                    </p:panel>
                </p:tab>

                <p:tab id="contact" title="Contact">
                    <p:panel header="Contact Information">

                        <h:messages errorClass="error"/>

                        <h:panelGrid columns="2" columnClasses="label, value">
                            <h:outputText value="Email: *" />
                            <p:inputText required="true" label="Email"
                                         value="#{userWizard.user.email}" />

                            <h:outputText value="Phone: " />
                            <p:inputText value="#{userWizard.user.phone}"/>

                            <h:outputText value="Additional Info: " />
                            <p:inputText value="#{userWizard.user.info}"/>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="confirm" title="Confirmation">
                    <p:panel header="Confirmation">

                        <h:panelGrid id="confirmation" columns="6">
                            <h:outputText value="Firstname: " />
                            <h:outputText styleClass="outputLabel"
                                          value="#{userWizard.user.firstname}" />

                            <h:outputText value="Lastname: " />
                            <h:outputText  styleClass="outputLabel"
                                           value="#{userWizard.user.lastname}"/>

                            <h:outputText value="Age: " />
                            <h:outputText styleClass="outputLabel"
                                          value="#{userWizard.user.age}" />>

                            <h:outputText value="Email: " />
                            <h:outputText styleClass="outputLabel"
                                          value="#{userWizard.user.email}" />

                            <h:outputText value="Phone " />
                            <h:outputText styleClass="outputLabel"
                                          value="#{userWizard.user.phone}"/>

                            <h:outputText value="Info: " />
                            <h:outputText styleClass="outputLabel"
                                          value="#{userWizard.user.info}" />

                            <h:outputText />
                            <h:outputText />
                        </h:panelGrid>

                        <p:commandButton value="Submit" update="growl" 
                                         actionListener="#{userWizard.save}"/>

                    </p:panel>
                </p:tab>

            </p:wizard>

        </h:form>

    </h:body>
</html> 
```

文件豆：

```
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.Serializable;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.bean.ViewScoped;
import org.apache.commons.io.IOUtils;
import org.primefaces.model.UploadedFile;

@ManagedBean
@ViewScoped
public class FileBean implements Serializable{

    private UploadedFile file;
/**
 * Creates a new instance of FileBean
 */
public FileBean() {
}

public UploadedFile getFile() {
    System.out.println("we get file");
    return file;
}

public void setFile(UploadedFile file) throws FileNotFoundException, IOException {
    System.out.println("we set file");
    this.file = file;

}

public void save() throws IOException {
    System.out.println("we save file");
    IOUtils.copy(file.getInputstream(), new FileOutputStream("D:\\" + file.getFileName()));
    BufferedReader br = new BufferedReader(new InputStreamReader(file.getInputstream()));
    String currLine = br.readLine();
    Integer counterLines = 0;
    while (currLine != null && counterLines < 5) {
        System.out.println("currLine is: " + currLine);
        counterLines++;
    }

} 
```

}

用户向导：

```
import java.io.Serializable;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import org.primefaces.event.FlowEvent;

@ManagedBean
@ViewScoped
public class UserWizard implements Serializable{

    private User user = new User();
    private boolean skip;
    private static final Logger logger = Logger.getLogger(UserWizard.class.getName());

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public void save(ActionEvent actionEvent) {
        //Persist user

        FacesMessage msg = new FacesMessage("Successful", "Welcome :" + user.getFirstname());
        FacesContext.getCurrentInstance().addMessage(null, msg);
    }

    public boolean isSkip() {
        return skip;
    }

    public void setSkip(boolean skip) {
        this.skip = skip;
    }

    public String onFlowProcess(FlowEvent event) {
        logger.log(Level.INFO, "Current wizard step:{0}", event.getOldStep());
        logger.log(Level.INFO, "Next step:{0}", event.getNewStep());

        if (skip) {
            skip = false;   //reset in case user goes back
            return "confirm";
        } else {
            return event.getNewStep();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:19:35.270

从摆脱嵌套形式开始......你有一个围绕向导，一个在里面`<p:tab id="upload" title="File upload">`

尝试从选项卡中删除内部表单并使用`<h:form enctype="multipart/form-data">`

# android - 如何检查在 jquery 中提供图像路径的图像大小？

> ID：11842627
> 
> 赞同：0
> 
> 时间：2012-08-07T09:06:51.973
> 
> 标签：android, jquery, image, cordova, image-size

海我有一个图像路径位置，当我附加图像时我需要附加图像我想检查图像大小。它不大于 1 Mb。我正在搜索这个[http://jsfiddle.net/jquerybyexample/PKLQn/1 /light/](http://jsfiddle.net/jquerybyexample/PKLQn/1/light/)，但它的输入类型是文件 .am 使用图像路径位置。如何做到这一点？

图片路径= `content://media/external/images/media/503`。我需要检查图像大小

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:21:07.063

![在此处输入图像描述](../Images/ec210cec529ca9312648cfc795446118.png)

如果您使用的是 chrome 浏览器，请右键单击“

> < input type="file" id="flUpload" />

' 检查文件 dom 的属性

（您可以先选择一个文件）

打开开发者工具后，在右栏 -> 属性 -> HTMLInputElement(first one) -> files -> 0: File -> size

你可以得到文件大小

# jquery - 获取关联 ViewModel (KnockoutJS) 的 DOMElement 的简单方法

> ID：11842628
> 
> 赞同：2
> 
> 时间：2012-08-07T09:06:56.040
> 
> 标签：jquery, knockout.js, knockout-2.0

## 描述

我有一个包含数组的 viewModel。

现在我想为我的数组中的一项获取关联的 dom 元素。

### 问题：如何获取数组中一项的 DOM 元素？

## 样本

```
<script src="~/Scripts/knockout-2.0.0.js" type="text/javascript"></script>
<script src="~/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script> 
```

### 简单的用户界面

```
<span data-bind="text: name"></span>
<ul data-bind="foreach: items">
    <li><span data-bind="text: id"></span></li>
</ul>

<button>click me</button> 
```

### JavaScript

```
<script type="text/javascript">
    // define demo viewModel
    var ViewModel = function (name) {
        self = this;
        self.name = ko.observable(name);
        self.items = ko.observableArray();
    };

    // define demo itemsModel
    var ItemsModel = function (id) {
        self = this;
        self.id = ko.observable(id);
    };

    // create viewModel
    var viewModel = new ViewModel("Hello World!");

    // push some items
    viewModel.items.push(new ItemsModel(1));
    viewModel.items.push(new ItemsModel(2));
    viewModel.items.push(new ItemsModel(3));

    ko.applyBindings(viewModel);

    $(function () {
        $("button").click(function () {
            var itemsModel = viewModel.items()[1];
            var id = itemsModel.id();

            // how can i get the <li> element ?
            var domElement = ???;
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:00:32.663

你真的需要这样到达特定的项目吗？如果你不这样做，你可以为此目的使用点击绑定：

```
<ul data-bind="foreach: items">
    <li>
        <span data-bind="text: id"></span>
        <a href="#" data-bind="click:function(event,data){ itemClick(this,event) }">Click Item</a>
    </li>
</ul>

var ViewModel = function (name) {
        ...

        this.itemClick(item,event) {      

          // You can reach the clicked item like this $(event.currentTarget)  
          console.log($(event.currentTarget));

        };

        ...
} 
```

**编辑 ：**

或者您可以使用 attr 绑定并通过 jquery 到达特定元素：

```
<ul data-bind="foreach: items">
    <li data-bind="attr: {'liId': id}">
        <span data-bind="text: id"></span>         
    </li>
</ul> 
```

然后在按钮点击功能内到达 li 与项目的 id 属性：

$("li[liId=1]");

查看此[链接了解更多信息](http://knockoutjs.com/documentation/click-binding.html)

# ios - iOS 使用一系列 JPEG（即 MJPEG）更新 UIView 的更快方法。（仪器显示 50% CPU）

> ID：11842632
> 
> 赞同：3
> 
> 时间：2012-08-07T09:07:13.307
> 
> 标签：ios, uiview, jpeg, instruments

我正在通过网络从相机 (MJPEG) 接收一系列 JPEG。我在 UIView 中收到图像时显示它们。我看到的是我的应用程序在我看来是 UIView 更新中花费了 50% 的 CPU（设备和模拟器测试）。

是否有一种 CPU 密集度较低的方式来进行此屏幕更新？在将 JPEG 交给 UIView 之前，我应该以某种方式处理它吗？接收方式：

```
UIImage *image = [UIImage imageWithData:data];
dispatch_async(dispatch_get_main_queue(),^{
    [cameraView updateVideoImage:image];
}); 
```

更新方法：

```
- (void) updateVideoImage:(UIImage*)image {
    myUIView.image = image;
    ... 
```

![在此处输入图像描述](../Images/04c0b405ba7e7b423dabda06fd481daa.png)

更新：添加了更好的屏幕截图

update2：OpenGL 是否会为 JPEG 提供更快的渲染表面？我不清楚 Instruments 的时间花在哪里，渲染或解码。我将按照建议整理一个测试用例并从那里开始工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:45:19.633

iOS 针对 PNG 图像进行了优化。虽然 JPEG 大大减小了传输图像的大小，但它是一种复杂得多的格式，因此这种渲染花费大量时间并不让我感到惊讶。人们说设备上有 jpeg 硬件辅助，但我不确定，即使它在那里，它也可能针对某些图像类型进行了调整。

所以 - 一些建议。设计一个测试，在其中获取您现在拥有的一个 jpeg，并将其渲染到上下文中，这次是基线。拍摄相同的图像并在预览中打开它，然后将其以稍微不同的质量值保存到另一个文件中，然后尝试（预览将从图像中去除不必要的“垃圾”，甚至先将其转换为 png 然后再转换回一个 jpeg。这里的想法是使用预览中的图像输出，这将是一个干净的图像，你将获得。图像更好吗？

您也可以尝试使用 libjpegturbo，看看它是否可以更快地渲染您的图像。您可以在 github 项目 PhotoScrollerNetwork 中看到该库的运行情况。您可能会发现使用该项目，因为它在接收到 jpeg（使用该库）时实时解码它们，然后使用 CATiledLayers 支持可缩放查看。

# apache - Solr，选择在哪里选择

> ID：11842633
> 
> 赞同：2
> 
> 时间：2012-08-07T09:07:16.963
> 
> 标签：apache, select, solr

我正在尝试使用另一个中的选择进行查询。

我想做类似的事情：

```
select?q=*:* AND id_user=5&fl=id_other    
select?q=test AND -id(the result of the other select)&fl=id 
```

所以：

```
select?q=test AND -id(select?q=* AND id_user=5&fl=id_other)&fl=id 
```

可能吗？或者我必须做两个单独的选择？

```
$ids = select?q=*:* AND id_user=5&fl=id_other
$result = select?q=test AND -id(implode(' AND ', $ids))&fl=id 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:19:00.263

Solr 中有嵌套查询支持。您可以`_query_`参数以将查询嵌入到另一个中。查看[本](http://www.lucidimagination.com/blog/2009/03/31/nested-queries-in-solr/)教程以获取更多信息。

# objective-c - 直线中点

> ID：11842635
> 
> 赞同：0
> 
> 时间：2012-08-07T09:07:18.950
> 
> 标签：objective-c, opengl, mouseevent

## 介绍：

我注册鼠标事件（mouseDragged、mouseDown）并在一些更正后将它们的位置转换为 NSValue。之后它们被添加到 NSMutableArray 中，稍后它们被取回，转换回 CGPoint，添加到 GLFloat（顶点数组）并通过 OpenGL 绘制。但是当鼠标拖动完成的速度比objective-c 注册事件的速度快时，点之间会出现很大的间距。我需要纠正这一点。

## 更多关于我的代码：

鼠标事件位置点注册后正在编辑中，从他那里得到4个点，稍后绘制glQuad。它看起来像这样：

```
locationPoint = [self convertPoint: [event locationInWindow] fromView:self];

//Top left corner of quad
quadTopLeftCorner.x = locationPoint.x - someFloatValue;
quadTopLeftCorner.y = locationPoint.y + someFloatValue;
//Top right corner of quad
quadTopRightCorner.x = locationPoint.x + someFloatValue;
quadTopRightCorner.y = locationPoint.y + someFloatValue;
//Bottom left corner of quad
quadBottomLeftCorner.x = locationPoint.x - someFloatValue;
quadBottomLeftCorner.y = locationPoint.y - someFloatValue;
//Bottom right corner of quad
quadBottomRightCorner.x = locationPoint.x + someFloatValue;
quadBottomRightCorner.y = locationPoint.y - someFloatValue; 
```

他们正在被转换为 NSValue 并移动到 NSMutableArray

```
someNSValueTopLeft = [NSValue valueWithPoint:quadTopLeftCorner];
someNSValueTopRight = [NSValue valueWithPoint:quadTopRightCorner];
someNSValueBottomLeft = [NSValue valueWithPoint:quadBottomLeftCorner];
someNSValueBottomRight = [NSValue valueWithPoint:quadBottomRightCorner];

[someNSMutableArray addObject:someNSValueTopLeft];
[someNSMutableArray addObject:someNSValueTopRight];
[someNSMutableArray addObject:someNSValueBottomLeft];
[someNSMutableArray addObject:someNSValueBottomRight]; 
```

我想检查最后两点之间的距离是否大于*某物*。如果是的话，我想在它们之间添加一些要点。所以我试着这样做：

```
 NSValue *someNSValueForLastNSValueTopLeft = [someNSMutableArray objectAtIndex:([someNSMutableArray count]-4)];
    CGPoint lastTopLeftQuadPoint = someNSValueForLastNSValueTopLeft.pointValue;
    int distx = (quadTopLeftCorner.x - lastTopLeftQuadPoint.x) * (quadTopLeftCorner.x - lastTopLeftQuadPoint.x);
    int disty = (quadTopLeftCorner.y - lastTopLeftQuadPoint.y) * (quadTopLeftCorner.y - lastTopLeftQuadPoint.y);
    int dist = sqrtf(distx + disty);

    if (dist > someFloatValue) {

        someNewPointForTopLeft.x = ((quadTopLeftCorner.x + lastTopLeftQuadPoint.x)/2);
        someNewPointForTopLeft.y = ((quadTopLeftCorner.y + lastTopLeftQuadPoint.y)/2);
        someNewPointForTopRight.x = someNewPointForTopLeft.x + someFloatValue;
        someNewPointForTopRight.y = someNewPointForTopLeft.y;
        someNewPointForBottomRight.x = someNewPointForTopLeft.x + someFloatValue;
        someNewPointForBottomRight.y = someNewPointForTopLeft.y - someFloatValue;
        someNewPointForBottomLeft.x = someNewPointForTopLeft.x;
        someNewPointForBottomLeft.y = someNewPointForTopLeft.y - someFloatValue;

        someNSValueTopLeft = [NSValue valueWithPoint:someNewPointForTopLeft];
        [vertices addObject:someNSValueTopLeft];
        someNSValueTopRight = [NSValue valueWithPoint:someNewPointForTopRight];
        [vertices addObject:someNSValueTopRight];
        someNSValueBottomLeft = [NSValue valueWithPoint:someNewPointForBottomRight];
        [vertices addObject:someNSValueBottomLeft];
        someNSValueBottomRight = [NSValue valueWithPoint:someNewPointForBottomLeft];
        [vertices addObject:someNSValueBottomRight];
    } 
```

但它不起作用。任何人都可以建议我一些不同的方式？

* * *

结果：

![在此处输入图像描述](../Images/67d0ad0fe0ab8c7bbecd9dbc4ee132f6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:45:16.060

效果如何？

我只是注意到有两个错误：

*   计算距离
*   四边形的尺寸

距离代码有一些错误，试试这个：

```
int distx = (quadTopLeftCorner.x - lastTopLeftQuadPoint.x) * (quadTopLeftCorner.x -lastTopLeftQuadPoint.x);        
int disty = (quadTopLeftCorner.y- lastTopLeftQuadPoint.y) * (quadTopLeftCorner.y - lastTopLeftQuadPoint.y);        
int dist = sqrtf(distx + disty); 
```

如果您从左上角组成四边形，您还需要将 someFloatValue 乘以两倍：

```
someNewPointForTopLeft.x = ((quadTopLeftCorner.x + lastTopLeftQuadPoint.x)/2);         
someNewPointForTopLeft.y = ((quadTopLeftCorner.y + lastTopLeftQuadPoint.y)/2); 

someNewPointForTopRight.x = someNewPointForTopLeft.x + someFloatValue*2;         
someNewPointForTopRight.y = someNewPointForTopLeft.y;         

someNewPointForBottomRight.x = someNewPointForTopLeft.x + someFloatValue*2;         
someNewPointForBottomRight.y = someNewPointForTopLeft.y - someFloatValue*2;  

someNewPointForBottomLeft.x = someNewPointForTopLeft.x;         
someNewPointForBottomLeft.y = someNewPointForTopLeft.y - someFloatValue*2; 
```

无论如何，为了改进代码和未来的管理，我建议您更改代码以引入 Vector 库并编写如下代码：

```
Vector a = lastPoint;
Vector b = currentPoint;
Vector newPointForQuad=lastPoint;

if ( (lastPoint-currentPoint).dist()> someDistanceValue) newPointForQuad = (lastPoint + currentPoint)/2;

Quad quad = makeQuadAroundPoint(newPointForQuad, someQuadSize); 
```

希望这有帮助。

# asterisk - 在 mp3 上记录/监控星号来电/去电

> ID：11842636
> 
> 赞同：0
> 
> 时间：2012-08-07T09:07:19.237
> 
> 标签：asterisk, recording

我正在使用基于 vicidial 的星号服务器 1.2 版本。我希望我的星号服务器以**mp3**格式而不是默认格式**wav****记录**来电和去电。

 ****请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:05:42.203

在 Debian/Ubuntu 中安装 sox 和 libsox-fmt-mp3：

```
apt-get install sox libsox-fmt-mp3 
```

将以下命令放入您的 crontab 中：

```
nice find /tmp -iname "*.wav" -type f -exec bash \ 
          -c 'WAV={}; MP3=${WAV/%wav/mp3}; sox -r 8000 -c 1 $WAV $MP3' \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-14T11:13:34.670

我的 FreeBSD 解决方案，一次性运行脚本，然后在 crontab 上设置它的定期启动：

```
#!/bin/sh

find /usr/asterisk/recording -name '*.wav' -type f -mmin +180 | while read filename; do
        nice -19 lame -h -v -b 32 "$filename" "${filename%.wav}.mp3" && touch -r "$filename" "${filename%.wav}.mp3" && rm "$filename"
done 
```****

# jquery - 加载网页上的动态选择框

> ID：11842642
> 
> 赞同：0
> 
> 时间：2012-08-07T09:07:54.463
> 
> 标签：jquery, select, dynamic

现在我有一个静态选择框，如下所示：

```
<label>Select name: </label>
<select id="option" onchange="optionSelected();">
    <option value="-1">=== Select name ===</option>
    <option value="1">Name 1</option>
    <option value="2">Name 2</option>  
    <option value="0">All names</option>  
</select> 
```

但我希望可以更改选项的数量。我有一个包含数据的文件，网页在加载过程中加载它。所以我现在要显示的信息和选项的数量。此信息不会改变。如果它被更改，则更改将在下次加载网页时显示。我有一个数组中的信息，所以我可以制作一个 for 来获取所有名称并使用长度属性，知道大小。

我查看了一些关于 ajax 的教程，但我不太了解它们。我在我的网页中使用 jquery。

我该怎么做？英语不是我的第一语言，我不知道在谷歌搜索的正确单词，我总是找到很多教程，但不是关于我需要什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:16:35.257

嗨[，这](http://www.9lessons.info/2010/08/dynamic-dependent-select-box-using.html)是使用 ajax 从数据库创建动态选择框的基本示例。它可能对你有用

# php - 有没有办法从 GET 请求中删除提交按钮？

> ID：11842644
> 
> 赞同：3
> 
> 时间：2012-08-07T09:08:02.683
> 
> 标签：php, forms

我有一个查看的页面`photos`，每个页面`photo`都在一个`album`.

在页面顶部，我有一个分别带有和的`albums`选择框。`album_id``album_name`

```
<form action="change-album.php" method="get">
    <table>
        <tr>
            <td><label>Select Album</label></td>
            <td><select name="album_id"><?=$albums_str?></select></td>
            <td><input type="submit" name="change-album" value="Select Album" /></td>
        </tr>
    </table>
</form> 
```

默认是`uncategorised photos`在页面加载时，然后用户可以选择他们的相册并按`submit`，这会返回该相册中的照片。

最初这种形式使用 POST。

但是，如果用户选择`album`，然后单击`photo`。他们将看到照片的大版本。但是，如果用户在浏览器上按 BACK，它会显示`FORM MUST BE RE-SENT`. 这是因为该页面上的最后一个请求发布了`album_id`获取照片。

我决定使用GET。因此，当用户转到`BACK`该页面时，`album_id`查询字符串中的就是！没有表格重新发送！耶！

但是，显然使用 GET 也会在查询字符串中发送提交按钮！

所以我最终得到：

```
localhost/admin/view-photos?album_id=1&change-album=Select+Album 
```

无论如何我可以从查询字符串中删除它吗？

或者有人能想出更好的方法来实现这一目标吗？

我想从查询字符串中删除它，因为它并不真的需要在那里。没用的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T09:10:20.267

如果您删除按钮的`name`属性，您可以从请求数组中删除提交按钮`<input>`。

因此，在您的情况下，您将不得不修改以下内容：

```
<input type="submit" name="change-album" value="Select Album" /> 
```

改为下面的那个：

```
<input type="submit" value="Select Album" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:10:12.533

删除名称属性：

```
<input type="submit" value="Select Album" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T09:11:17.110

提交表单时，会将其转换为键值对，因此如果没有名称或没有值，则不会发送元素：

```
<form action="change-album.php" method="get">
    <table>
        <tr>
            <td><label>Select Album</label></td>
            <td><select name="album_id"><?=$albums_str?></select></td>
            <td><input type="submit" value="Select Album" /></td>
        </tr>
    </table>
</form> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T09:13:31.123

如果您在脚本中的任何地方都不需要按钮的名称，那么就不要给提交按钮一个名称属性。

```
<input type="submit" value="Select Album" /> 
```

如果您的脚本的某些部分确实需要它，但想丢弃它，以便在完成后它不会存储在数据库中，那么只需取消设置即可。

```
unset ($_GET ['change-album']); 
```

# java - 如何动态创建 FloatBuffer

> ID：11842645
> 
> 赞同：5
> 
> 时间：2012-08-07T09:08:04.087
> 
> 标签：java, nio

我需要从一组动态的浮点数中创建 FloatBuffer（也就是说，我不知道提前的长度）。我发现这样做的唯一方法是相当不雅（下）。我假设我遗漏了一些东西，并且必须有一个更清洁/更简单的方法。

我的解决方案：

```
Vector<Float> temp = new Vector<Float>();
//add stuff to temp
ByteBuffer bb = ByteBuffer.allocateDirect( work.size() * 4/*sizeof(float)*/ );
bb.order( ByteOrder.nativeOrder() );
FloatBuffer floatBuf = bb.asFloatBuffer();
for( Float f : work )
    floatBuf.put( f );
floatBuf.position(0); 
```

我将缓冲区用于 OpenGL 命令，因此我需要保留它们（也就是说，生成的 FloatBuffer 不仅仅是一个临时空间）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T20:33:37.860

如果您通过 Java 使用 OpenGL API，我假设您使用 LWJGL 作为中间人。如果是这样，有一个简单的解决方案，即使用`BufferUtils`org.lwjgl 包中的类。该方法`BufferUtils.createFloatBuffer()`允许您从 a 中放入`float`s `array`，如果您使用的是 a `Vector`，则这是一个简单的转换。虽然它并不比你的方法好多少，但它确实节省了对字节缓冲区的需要，这已经够讨厌了，并且允许进行一些快速转换。[此处](http://lwjgl.org/wiki/index.php?title=The_Quad_with_DrawArrays)的 OpenGL 3.2+ 新 LWJGL 教程中存在此代码。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:29:16.030

我会使用一个普通的 ByteBuffer，当缓冲区填满时我会写出数据。（或者做你打算用它做的事情）

例如

```
SocketChannel sc = ...
ByteBuffer bb = ByteBuffer.allocateDirect(32 * 1024).order(ByteOrder.LITTLE_ENDIAN);
for(int i = 0 ; i < 100000000; i++) {
   float f = i;
   // move to a checkFree(4) method.
   if (bb.remaining() < 4) {
       bb.flip();
       while(bb.remaining() > 0)
           sc.write(bb);
   }
   // end of method
   bb.putFloat(f); 
```

}

创建非常大的缓冲区实际上可能比在生成数据时处理数据要慢。

注意：这几乎不会产生垃圾。只有一个对象是 ByteBuffer。

# html - HTML/CSS：嵌套列表需要在其他地方显示/使用母 div 而不是母元素来定位

> ID：11842648
> 
> 赞同：0
> 
> 时间：2012-08-07T09:08:13.607
> 
> 标签：html, css, positioning, css-position

我有一个用于导航的嵌套列表

```
<ul>
  <li>item 1</li>
  <li>item 2
    <ul>
      <li>item 2.1</li>
      <li>item 2.2</li>
      <li>item 2.3</li>
    </ul>
  <li>item 3</li>
</ul> 
```

现在我想在页面右上角的水平线上显示顶层（item1、2 和 3）。子菜单应显示为页面左侧的列表。我无法更改 HTML。

那么我如何从那里取出子层呢？使用 position:absolute 它将使用上层作为方向，这将根据主层的宽度而变化。我需要它来使用母 div 进行定位，这样我就可以将它放在页面的右侧。这甚至可能吗？

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:28:10.500

你在找这个吗？

## [看演示](http://jsfiddle.net/akhurshid/J7phH/)

**CSS：**

```
ul { float: right; }
ul li { float: left; padding: 0 20px;  }
ul li ul { position: absolute; left: 0px; top: 0px; display:none; }
ul li ul li { float: none; }
ul li:hover ul { display: block; } 
```

# ios - 将按钮添加到左侧 UINavigatorcontroller iOS4

> ID：11842649
> 
> 赞同：1
> 
> 时间：2012-08-07T09:08:15.280
> 
> 标签：ios, xcode

我知道有这样的问题（http://stackoverflow.com/questions/6561366/add-another-button-next-to-the-back-button-on-the-left-of-a-uinavigationbar）我可以在返回按钮（左侧导航栏）旁边添加更多按钮，但只有 iOS 5，是否有 iOS 4 和 Apple 原生控件的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:09:48.943

您可以使用 leftItemsSupplementBackButton

# linq - 将 dataReader 转换为 Dictionary

> ID：11842651
> 
> 赞同：5
> 
> 时间：2012-08-07T09:08:32.807
> 
> 标签：linq, dictionary, datareader

我尝试使用 LINQ 将一行转换为 Dictionary (fieldName -> fieldValue)

```
return Enumerable.Range(0, reader.FieldCount)
                 .ToDictionary<string, object>(reader.GetName, reader.GetValue); 
```

但我收到错误消息：

实例参数：无法转换`'System.Collections.Generic.IEnumerable<int>'`为`'System.Collections.Generic.IEnumerable<string>'`

如何纠正这个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T09:10:15.310

```
return Enumerable.Range(0, reader.FieldCount)
                 .ToDictionary(
                     i => reader.GetName(i),
                     i => reader.GetValue(i)); 
```

# facebook - 使用应用程序共享照片

> ID：11842653
> 
> 赞同：0
> 
> 时间：2012-08-07T09:08:39.880
> 
> 标签：facebook, image, web, share

我正在制作一个网络作品集，我想添加一个按钮来在用户墙上分享照片，所以当 X 用户点击“分享图片”时，它应该分享选择的图片。

我使用 Dialogs 获得它，但该图像以非常小的尺寸发布，如果其他人想以全尺寸查看它，他们必须进入我的网站。

难道你不知道如何制作一个脚本，所以当用户点击“分享图片”时，它的工作原理至少与你在 facebook 中分享照片时相似（比如当你分享你的一张图片或类似的东西时）？

PS：对不起我的英语，我不是英语母语，我知道我说得不太好。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:40:31.253

您不能使用对话框将照片上传到用户的个人资料。为此，您必须使用 PHP（或类似的 SDK）和`POST`API 数据。这篇[博文](http://developers.facebook.com/blog/post/498/)会有所帮助。

# android - 时区列表。如何为特定设备获取它？

> ID：11842655
> 
> 赞同：2
> 
> 时间：2012-08-07T09:08:45.987
> 
> 标签：android, timezone

我需要完全像在设置-> 日期和时间-> 选择时区菜单中填写的那样用时区填充我的微调器。如果我只使用

```
TimeZone.getAvailableIDs(); 
```

我得到完全不同的看法。即在设置菜单中它看起来像：

```
Midway Island
Hawaii
Alaska
... 
```

在我的微调器中，我得到

```
Africa/Abidjan
Africa/Accra
Africa/Addis_Ababa
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:22:41.417

在 Android 中，设置应用程序从 id 转换为常用名称。你可以在这里找到用于翻译的 xml

[http://grepcode.com/file/repository.grepcode.com](http://grepcode.com/file/repository.grepcode.com) $java$ext@com.google.android$android-apps@4.0.4_r1.2@packages$apps$Settings$res$xml$timezones.xml

. 因此，您还必须以编程方式将其翻译为常用名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:37:58.737

获得 ID 后，您需要使用`TimeZone.getTimeZone(id).getDisplayName()`才能以 Android 设置中使用的格式查看名称。请注意，尽管某些 id 会产生相同的显示名称，因此您需要过滤具有相同显示名称的项目。

# javascript - 什么是 facebox 的“钩子”

> ID：11842657
> 
> 赞同：1
> 
> 时间：2012-08-07T09:09:02.633
> 
> 标签：javascript, jquery, facebox

```
/*
* 
*  Facebox also has a bunch of other hooks:
*
*    loading.facebox
*    beforeReveal.facebox
*    reveal.facebox (aliased as 'afterReveal.facebox')
*    init.facebox
*    afterClose.facebox
*
*/ 
```

我正在使用[Facebox](http://defunkt.io/facebox/)。在源代码中我发现了一些钩子，但我只能找到使用 "beforeReveal": 的一行`$(document).trigger('beforeReveal.facebox')`。我找不到它的定义位置。所以我想知道它是如何工作的。希望能得到一些帮助。多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:12:10.703

这些只是`click`您可以订阅的自定义事件（例如是预定义事件）：

```
$(document).on('beforeReveal.facebox', function() {
    // This code here is now executed every time before the facebox is revealed,
    // because Facebox triggers this event.
}); 
```

在文档中阅读更多内容：http: [//api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T20:23:19.673

为了澄清这些触发器实际上并不是调用 facebox.js 源代码中定义的函数。它们只是触发事件的触发器，无论是否有东西可以处理它。但是，如果您在 javascript 中定义这些函数，它们将在 facebox 事件发生时被调用。

例如，如果您想响应 afterReveal.facebox（或 beforeReveal），只需在您的 javascript 就绪函数中添加以下行，该函数应该在您的文档头部部分中。

```
$(document).ready (function() {
     //initialize facebox
     $('a[rel*=facebox]').facebox(); 

     //create a response to the 'close.facebox' event
     $(document).bind('close.facebox', function() {
          //some function on close if you desire          
     });

     //Create a response to the the 'afterReveal.facebox' event
     $(document).bind('afterReveal.facebox', function() { 
            //Add your functionality here
            $('textarea').autogrow();
            return true;
      });
}); 
```

# c# - 多次读取 IDataReader 时出错

> ID：11842660
> 
> 赞同：1
> 
> 时间：2012-08-07T09:09:20.700
> 
> 标签：c#, .net, sql, ado.net, idatareader

我正在尝试将 SQL 数据库中的数据（1 个表中的 4 列）加载到列表中，并且到目前为止

```
List<string> FNameList = (from IDataRecord r in myReader
                          select (string)r["FirstName"]).ToList();

List<string> LNameList = (from IDataRecord r in myReader
                          select (string)r["LastName"]).ToList();

List<string> EmailList = (from IDataRecord r in myReader
                          select (string)r["Email"]).ToList();

List<string> PhoneList = (from IDataRecord r in myReader
                          select (string)r["PhoneNumber"]).ToList(); 
```

现在我使用的数据库有三行数据，所以每行的长度应该是 3。但是只有第一个返回长度为 3；其他的长度为0。更奇怪的是，如果我注释掉第一个，第二个会起作用，但其他的不起作用。第三个和第四个也是如此。

很难解释，因为我无法提供用于测试的数据库，所以我想知道上面是否有任何明显的内容，或者这是否是将列数据加载到数组/列表格式的错误方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:21:55.193

我假设你有一个`Select`类似的扩展方法：

```
public static IEnumerable<T> Select<T>(this IDataReader reader, Func<IDataRecord, T> selector)
{
    while(reader.Read())
        yield return selector(reader);
} 
```

所以当reader被枚举完后，就到了可用数据的末尾，再次读取数据的唯一方法就是重新发起查询。因此，您需要一次获取所有字段：

```
var records = (from IDataRecord r in myReader
               select new
               {
                   FirstName = (string)r["FirstName"],
                   LastName = (string)r["LastName"],
                   Email = (string)r["Email"],
                   PhoneNumber = (string)r["PhoneNumber"]
               }).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T09:15:02.120

您的读者在第一次查询后前进到最后一条记录。您需要提取所有行，然后构建您的列表：

```
var records = (from IDataRecord r in myReader select r).ToArray();

List<string> LNameList = (from IDataRecord r in records
                       select (string)r["LastName"]).ToList();
// Keep the last row for all fields 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T09:16:17.517

myReader 是一个 SqlDataReader。SqlDataReader `provides a way of reading a forward-only stream of rows from a SQL Server database`。第一次使用后无法再次重新启动。

您需要在一个循环中读取所有数据，然后，如果需要，构建您的列表
但是，我不明白您为什么以这种方式划分信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T09:16:41.920

首先声明一个 poco 来保存属性：

```
class Person
{
    ...
} 
```

然后是一个辅助方法：

```
private static IEnumerable<Person> ReadReader(IDataReader reader)
{
    using (reader)
    {
        while (reader.Read())
        {
            yield return new Person
            {
                FirstName = (string)reader["FirstName"],
                LastName = (string)reader["LastName"],
                Email = (string)reader["Email"],
                PhoneNumber = (string)reader["PhoneNumber"]
            }
        }
    }
} 
```

用法：

```
List<Person> list = RaderReader(command.ExecuteReader()).ToList(); 
```

# django - 在 django 的模型中使用 User.set_password 方法

> ID：11842666
> 
> 赞同：1
> 
> 时间：2012-08-07T09:09:34.163
> 
> 标签：django, django-authentication

是否可以将模型`set_password`方法`User`用于其他模型？一般来说，如果我想对密码进行哈希处理，我可以使用 auth 包的任何方法还是我应该编写自己的方法？（我正在使用 Django 1.4，Python 2.7）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:24:17.277

```
django.contrib.auth.hashers.make_password 
```

# php - PHPUnit 0% 的代码覆盖率

> ID：11842667
> 
> 赞同：1
> 
> 时间：2012-08-07T09:09:37.937
> 
> 标签：php, testing, phpunit, code-coverage, xdebug

我正在使用 PHPUnit 运行模块测试，并希望获得有关测试的覆盖率报告。我过去已经成功地做到了这一点，但不知何故我无法让它再次工作，我不知道为什么它不再工作了。唯一的区别是我现在运行 PHP 5.4 而不是 5.3。

测试使用 exec 命令在 Ant 构建文件中运行：

```
<exec dir="${basedir}" executable="phpunit.bat" failonerror="${test.failonerror}">
    <arg value="--log-junit" />
    <arg value="${test.phpunit.log}" />
    <arg value="--coverage-clover" />
    <arg value="${test.phpunit.coverage.log}" />
    <arg value="--bootstrap" />
    <arg value="${test.phpunit.bootstrap}" />
    <arg value="${test.phpunit.testdir}" />
</exec> 
```

这是我运行测试时的 Ant 日志片段：

```
module-test-php:
     [exec] PHPUnit 3.6.12 by Sebastian Bergmann.
     [exec] .............
     [exec] Time: 5 seconds, Memory: 8.75Mb
     [exec] OK (13 tests, 113 assertions)
     [exec] Generating code coverage report in Clover XML format ... done 
```

从日志看来，覆盖率报告应该可以工作，但是当我打开报告时，我得到的只是这个

```
<?xml version="1.0" encoding="UTF-8"?>
<coverage generated="1344329670">
  <project timestamp="1344329670">
    <metrics files="0" loc="0" ncloc="0" classes="0" methods="0" coveredmethods="0" conditionals="0" coveredconditionals="0" statements="0" coveredstatements="0" elements="0" coveredelements="0"/>
  </project>
</coverage> 
```

是否有一些我在这里遗漏的设置，或者为什么我得到零覆盖？

**更新**

我做了一些更多的测试，发现了与 phar 档案有关的错误。该问题已报告。

[https://github.com/sebastianbergmann/php-code-coverage/issues/107](https://github.com/sebastianbergmann/php-code-coverage/issues/107)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:12:40.353

代码覆盖是关于源代码形式的。源代码形式是您对其进行更改的软件的变体。

Phar 文件是一个档案。与 Zend Encoder 或 Ioncube Encoder 甚至 APC 编码的 PHP 代码类似，代码覆盖率不适用于这些文件，更重要的是：代码覆盖率作为衡量标准对这些文件没有任何意义。

所以你可能只是想知道，但想知道两次，想想为什么会这样。试着用你自己的话来解释为什么报告 phar 文件的代码覆盖率是没有用的。

# python - 如何使用 PyQt 加载图片资源？

> ID：11842668
> 
> 赞同：1
> 
> 时间：2012-08-07T09:09:39.720
> 
> 标签：python, image, pyqt, resources, pyside

我的应用程序中有这个结构：

```
|-App
|
|-functions
|
|-ui
|--ui.py
|    
|images
|
|main.py 
```

我有一个带有一些脚本的函数文件夹和一个带有 PyQt 在 ui.py 文件上生成的代码的 ui 文件夹。

和一个 main.py 文件，它加载 ui.py 以显示界面，ui.py 从根目录的“images”文件夹中加载一些图像。

如果我直接在 python 上执行我的脚本（在 main.py 文件上双击），图像将不会显示..

但是，如果我使用带有“python main.py”的终端，图像会正确显示。

ui.py 上的引用如下：

```
icon.addPixmap(QtGui.QPixmap(_fromUtf8("images/flags/MXN.png")) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T18:44:47.897

使用[Qt Designer 资源系统](https://doc.qt.io/qt-5/resources.html)为图像创建资源文件。

然后使用[PyQt 的 pyrcc 工具](https://www.riverbankcomputing.com/static/Docs/PyQt5/resources.html#pyrcc5)将 Qt 资源文件转换为 python 模块。

注意：python 资源模块应该与您的 ui 文件位于同一目录中。所以如果你`App/resources.qrc`在 Qt Designer 中创建了资源文件，你应该像这样转换它：

```
pyrcc5 -o App/ui/resources_rc.py App/resources.qrc 
```

PySide (Qt4) 的等效工具是`pyside-rcc`. 对于 PySide2/PySide6，Qt`rcc`工具本身具有生成 python 输出的选项：

```
rcc -g python -o App/ui/resources_rc.py App/resources.qrc 
```

**更新**：

PyQt6 现在已经移除了 pyrcc 工具（请参阅：[如何在 PyQt6（没有 pyrcc）中提供资源？](https://stackoverflow.com/q/66099225/984421)）。

# objective-c - 使用动画从点调整 UIView 的大小

> ID：11842669
> 
> 赞同：1
> 
> 时间：2012-08-07T09:09:48.257
> 
> 标签：objective-c, xcode

我有 UIButton 视图，当我点击这个按钮时，我想创建新视图并将其显示在 iPad 屏幕上，我如何查看这个视图，就像从按钮到全屏一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:15:31.277

下次在寻求帮助时，实际表现出一些你已经尝试过的努力等

```
- (void)buttonTapped:(UIButton *)button;
{
    UIView *expandingView = [[UIView alloc] initWithFrame:button.frame];
    expandingView.backgroundColor = [UIColor redColor];
    [self.view addSubview:expandingView];

    [UIView animateWithDuration:.25f
                     animations:^{
                         expandingView.frame = self.view.bounds;
                     }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:19:21.157

在按钮单击事件上。

1.  使用大小为零的框架创建视图，并将原点作为按钮的中心

    2.添加到主视图

    3.然后使用动画块将帧更改为原始帧

[iPhone OS 4.0 中有哪些基于块的动画方法？](https://stackoverflow.com/questions/3126833/what-are-block-based-animation-methods-in-iphone-os-4-0)

使用此 qn 查找如何添加动画

# mysql - Rails 与具有两列主键的查找表的关联

> ID：11842671
> 
> 赞同：0
> 
> 时间：2012-08-07T09:09:49.177
> 
> 标签：mysql, ruby-on-rails-3.1, associations

CD 表看起来像这样：

```
cd.dogtag (primary key)
... 
```

`cd_tracks`有`id`和`tracks`（曲目名称），例如：

```
1   Turd On The Run 
```

`cd_tracks2title`是一个查找表，用于连接 CD 表和表中的多对多`cd_tracks`。但它也包含我想获得的信息：

```
cd_tracks2title.dogTag
cd_tracks2title.trackId
cd_tracks2title.duration
cd_tracks2title.position 
```

的主键`cd_tracks2title`实际上是 2 列：

```
PRIMARY KEY (`dogTag`,`trackId`) 
```

里面的数据`cd_tracks2title`可能是这样的：

```
1   4   NULL    NULL    3:24    11 
```

问题是我正在尝试使用这两个主要列建立从 CD 表到 cd_tracks2title 的 Rails 关联，但似乎没有办法。

如果我这样做：

```
# cd_track.rb
has_and_belongs_to_many :cd, :join_table => 'cd_tracks2title', :foreign_key => 'trackId', :association_foreign_key => 'dogTag'

#cd.rb
has_and_belongs_to_many :cd_track, :join_table => 'cd_tracks2title', :foreign_key => 'dogTag', :association_foreign_key => 'trackId' 
```

没关系，我可以用类似的东西获取曲目名称`Cd.first.cd_track`，但我没有办法获取`cd_tracks2title.duration`和`cd_tracks2title.position`信息，因为它是一个简单的查找表。

理想情况下，我会保留这个关联，这样我仍然可以获取曲目名称，但需要从 CD 表到`cd_tracks2title`表的另一个关联，通过`cd_tracks`使用`cd.dogTag`和`cd_tracks.id`值的表来获取正确的信息。

当然，我曾经通过在查询中显式写出 Mysql JOIN 来完成所有这些操作，但我想创建 Rails 关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:05:24.080

最后，我选择重新设计数据库并包含一个单独的 ID 字段作为单个主键。虽然使用复合键作为主键不会违反任何数据库设计约定，但 ActiveRecord 期望每个表都有一个唯一的主键，它确实使事情变得更容易，所以我已经这样做了。

尽管如此，我很惊讶在 AR 中没有办法在本地处理这个问题，因为这并不少见。

# java - ImageIO write() 是阻塞方法吗？

> ID：11842674
> 
> 赞同：3
> 
> 时间：2012-08-07T09:09:55.773
> 
> 标签：java, asynchronous, javax.imageio

在我用 java 开发的应用程序中，我使用 ImageIO API 来缩放图像，然后将它们写入目录，然后通知 Web 服务器图像已准备好使用。向 Web 服务器发送信号之前的最后一次调用是 ImageIO.write() 方法，但此时 Web 服务器无法找到生成的图像。（几毫秒后，Web 服务器能够看到它们。）。

我怀疑 ImageIO.write() 是异步运行的。我进行了很多搜索，但找不到 ImageIO.write() 是同步操作还是异步操作。如果 ImageIO.write() 没有阻塞程序的流程，是否有一种非黑客方式让它等到图像被写入目标目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:16:25.007

我无法想象这`ImageIO.write`不是阻塞。

我的“假设”是基于 ImageIO.write 可以抛出异常的事实，这表明，即使它在后台写入，它也需要阻塞直到写入完成才能抛出异常。

可能是缓冲问题？

尝试做一个`while (!file.exits()) Thread.sleep(25)`或某事有止损

# javascript - 需要将变量设置为特定范围的数字

> ID：11842684
> 
> 赞同：0
> 
> 时间：2012-08-07T09:10:30.613
> 
> 标签：javascript, jquery, xml, dom

我有一个页面，我必须检测一个 div，然后单击该 div，我需要更改页面的 url。div id 取自 XML 文件中名为 . id 是 1 到 999 之间的数字范围，将被点击的 div 具有以下结构：

```
<div id="1"> 
```

我还有 URL 更改功能，即：

```
$('yyy').live('click',function(){window.location = 'list.html?' + xxx + '';}); 
```

where `var yyy = "#" + xxx;` 以便将哈希添加到 id 变量中，从而可以在 jquery 函数中使用。

我的问题是我需要定义`xxx`为 1 到 999 之间的数字范围，我还尝试通过执行将 xxx 设置为我的 XML 文件中的任何 id 标签

```
var xxx = xmlDoc.getElementsByTagName("ID"); 
```

但到目前为止还没有运气。

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:21:29.930

我不知道我是否理解，但 xxx 变量应该等于被点击元素的 id 吗？如果是这样，您可以访问 click 事件，从而访问 even.target

```
$('yyy').live('click',function(event){window.location = 'list.html?' + $(event.target).attr('id') + '';}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:29:32.807

好吧，最后在 pkurek 和一些阅读的帮助下，我设法通过以下代码做到了：

```
$('.all the divs on the page class').live('click', function() {window.location = 'list.html?' +  $(this).attr('id') + '';}); 
```

这将自动检测点击的 div！:)

# javascript - Javascript在回调函数中打破for循环

> ID：11842686
> 
> 赞同：13
> 
> 时间：2012-08-07T09:10:40.920
> 
> 标签：javascript, for-loop, callback, break

我有如下代码：

```
function test(obj) {

    if(//some conditon) {
        obj.onload();
    }else{
        obj.onerror();
    }
}

for(var i=0;i<4;i++){   

    test({
        onload:function(e){          
            //some code to run
        },
        onerror:function(e){
            break;
        }

    });
} 
```

要点是 test() 函数是一个发出 XHR 请求的函数（它实际上是 Appcelerator Titanium 平台的一个 API，所以我无法控制它），我正在循环一些东西来调用测试函数。我需要在 onerror 函数上中断循环，但我收到一条错误消息，指出中断不在循环或 switch 语句内。我该如何重写这个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T09:19:38.420

如果您的代码示例确实代表了一些实际代码（即所有处理都在同一个事件循环滴答中完成），您可以执行以下操作：

```
function test(obj) {

    if (some_condition) {
        return obj.onload();
    } else {
        return obj.onerror();
    }
}

var result;
for(var i=0; i<4; i++){   

    result = test({
        onload:function(e){          
            //some code to run
            return true;
        },
        onerror:function(e){
            return false;
        }

    });

    if (!result) {
        break;
    }
} 
```

否则，如果有异步操作，您必须`test`按顺序调用，而不是并行调用。例如，

```
function test(obj) {
    doSomeAjaxRequest(arguments, function (err, result) {
        if (some_condition) {
            obj.onload();
        } else {
            obj.onerror();
        }
    });
}

var f = function (i) {
    if (i >= 4) return;
    test({
        onload:function(e){          
            //some code to run
            f(i+1);
        },
        onerror:function(e){
            break;
        }
    });
}

f(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T09:16:17.830

不可能。for 循环是一个*同步*过程，而 Ajax 请求则不是。这意味着当 onerror 回调发生时，for 循环已经执行*完毕*。

作为替代方案，您可以在 onsuccess 处理程序中引入检查，以确认尚未发生错误。

```
var errorOccured = false;
for(var i=0;i<4;i++){   

test({
    onload:function(e){   
        if(errorOccured) return;
        //some code to run
    },
    onerror:function(e){
        errorOccured = true;
    }

});
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T12:11:21.737

可能有点老套，但可以用处理函数做这样的事情。

```
var handler = function(array, callback){
    for(var i=0, l=array.length, e=array[i]; i<l; ++i){
        if(true === handler.exit){
            handler.exit = false; //restore
            return;
        }
        callback.call(null, e);
    }
};
handler.exit = false; 

handler([1,2,3], function(e){
   console.log(e);
   if(2 === e){
       arguments.callee.caller.exit = true; // :-)
   }
}); 
```

没有对此进行测试，但也许您甚至可以将函数绑定到调用范围？

```
var handler = function(a, f){
    this.exit = false;
    for(var i=0, l=a.length, e=a[i]; i<l; ++i){
        if(true === this.exit){
            this.exit = false; //restore
            return;
        }
        callback.call(this, e);
    }
};
handler([1,2,3], function(e){
   console.log(e);
   if(2 === e){
       this.exit = true;
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T09:16:17.440

您不能打破 test() 函数内的循环。我认为在这种情况下最好的解决方案是在 test() 函数中抛出一个异常，然后在循环中捕获它并中断。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T09:24:26.807

也许您可以使“onload”回调递归？

这意味着，您只需在“onload”处理程序中调用“test”方法，这也意味着您按顺序触发所有请求，而不是同时触发所有请求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-28T22:00:16.697

我接受 penartur 的回答，但我修改时没有“中断”：

```
function test(obj) {
    doSomeAjaxRequest(arguments, function (err, result) {
        if (some_condition) {
            obj.onload();
        } else {
            obj.onerror();
        }
    });
}

var f = function (i) {
    if (i >= 4) return;
    test({
        onload:function(e){          
            //some code to run
            f(i+1);
        },
        onerror:function(e){
            console.log('stop');
        }
    });
}

f(0); 
```

# javascript - 内联元素的宽度

> ID：11842688
> 
> 赞同：0
> 
> 时间：2012-08-07T09:10:55.590
> 
> 标签：javascript, html, dom

如何在不添加到文档的情况下知道内联元素的宽度？

随着添加

```
var span = document.createElement('span');
span.innerHTML = 'Hello, world!';
span.offsetWidth; //0
document.body.appendChild(span);
span.offsetWidth; //70 
```

不添加到文档怎么办？

对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:17:22.790

元素的宽度显然取决于所使用的样式（例如字体大小），因此在不知道元素在 DOM 中的位置的情况下，不可能计算元素的宽度。

如果您不希望它显示在屏幕上，您可以将它添加到一些不可见的元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:17:06.413

如果元素本身不是 DOM 的一部分，则无法获取元素的宽度。

您需要附加它，但您也可以将其放置在可见区域之外（使用 position: absolute 和负左/顶属性）并在获得宽度后将其删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:17:59.717

在添加元素之前，无法确定它的宽度，因为它取决于样式上下文。

jQuery 的`width()`方法有一个用于`display: none`元素的技巧，我不知道它是否适用于尚未添加到 DOM 的元素（它通过临时显示元素，获取宽度，然后再次隐藏它来工作）。

# google-bigquery - 将本地文件加载到 BigQuery 表时出错

> ID：11842698
> 
> 赞同：1
> 
> 时间：2012-08-07T09:11:32.077
> 
> 标签：google-bigquery

我正在尝试通过 API 将本地文件加载到[BigQuery](https://en.wikipedia.org/wiki/BigQuery)中，但它失败了。文件大小为 98 MB，超过 500 万行。请注意，我在过去加载了具有相同行数和稍大文件大小的表而没有问题。

我使用的代码与 API 文档中的代码完全相同，我已成功使用该代码上传了其他几个表。我得到的错误如下：

```
Errors:
Line:2243530, Too few columns: expected 5 column(s) but got 3 column(s)
Too many errors encountered. Limit is: 0.
Job ID: job_6464fc24a4414ae285d1334de924f12d
Start Time: 9:38am, 7 Aug 2012
End Time: 9:38am, 7 Aug 2012
Destination Table: 387047224813:pos_dw_api.test
Source URI: uploaded file
Schema:
  tbId: INTEGER
  hdId: INTEGER
  vtId: STRING
  prId: INTEGER
  pff: INTEGER 
```

请注意，相同的文件从 CloudStorage (dw_tests/TestCSV/test.csv) 加载得很好，因此问题不能是报告的关于一行较少列的问题，因为它也会从 CloudStorage 失败，我还检查了所有这些行具有正确的格式。

下面的作业也有同样的问题，唯一的区别就是表名和schema中的字段名不同（但都是同一个数据文件、字段和类型）。在这些尝试中，它声称另一行陷入困境：

```
Line:4288253, Too few columns: expected 5 column(s) but got 4 column(s) 
```

职位如下：

```
job_cbe54015b5304785b874baafd9c7e82e   load       FAILURE   07 Aug 08:45:23   0:00:34
job_f634cbb0a26f4404b6d7b442b9fca39c   load       FAILURE   06 Aug 16:35:28   0:00:30
job_346fdf250ae44b618633ad505d793fd1   load       FAILURE   06 Aug 16:30:13   0:00:34 
```

Python 脚本返回的错误如下：

```
{'status': '503', 'content-length': '177', 'expires': 'Fri, 01 Jan 1990 00:00:00 GMT', 'server': 'HTTP Upload Server Built on Jul 27 2012 15:58:36 (1343429916)', 'pragma': 'no-cache', 'cache-control': 'no-cache, no-store, must-revalidate', 'date': 'Tue, 07 Aug 2012 08:36:40 GMT', 'content-type': 'application/json'}

{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "backendError",
    "message": "Backend Error"
   }
  ],
  "code": 503,
  "message": "Backend Error"
 }
} 
```

看起来 BigQuery 可能存在问题。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:32:56.300

这次导入的临时文件仍然存在，所以我能够检查我们尝试导入的文件。对于 job `job_6464fc24a4414ae285d1334de924f12d`，最后几行是：

```
222,320828,bot,2,0
222,320829,bot,4,3
222,320829, 
```

看起来我们在某个时候删除了部分输入文件......输入规范说[MD5](http://en.wikipedia.org/wiki/MD5)哈希应该是 58eb7c2954ddfa96d109fa1c60663293 但我们的数据哈希是 297f958bcf94959eae49bee32cc3ac​​dc，文件大小应该是 98921024，但我们只有 83886080 字节。

我会调查为什么会发生这种情况。[同时，通过Google Storage](https://en.wikipedia.org/wiki/Google_Storage)导入使用更简单的路径，应该没问题。

# android - javamail 获取邮件pop3 android

> ID：11842701
> 
> 赞同：0
> 
> 时间：2012-08-07T09:11:43.803
> 
> 标签：android, imap, jakarta-mail, pop3

我想通过使用 javamail 在 android 中获取电子邮件。但我遇到了一些问题。

在 POP3 中，如果我想获取某个邮件的内容，javamail 会下载邮件的所有内容，包括附件。如果附件足够大，android程序会抛出oom异常。但我在 IMAP 协议中尝试过，它只先获取内容的骨架，即使有一些大附件，它也能正常工作。

那么，当电子邮件中有大附件时，如何使用 pop3 协议获取某封电子邮件的内容？

以下代码适用于 imap，但不适用于 pop3。

```
public void getContent(Part part) throws Exception {
    String contentType = part.getContentType();
    int nameindex = contentType.indexOf("name");
    boolean conname = false;
    if (nameindex != -1)
        conname = true;
    if (part.isMimeType("text/plain") && !conname) {
        bodytext.append((String) part.getContent());
    } else if (part.isMimeType("text/html") && !conname) {
        String html = (String) part.getContent();
        Spanned plainText = Html.fromHtml(html);
        bodytext.append(plainText);
    } else if (part.isMimeType("multipart/*")) {
        Multipart multipart = (Multipart) part.getContent();
        int counts = multipart.getCount();
        for (int i = 0; i < counts; i++) {
            BodyPart mpart = multipart.getBodyPart(i);
            Log.d("type,"," "+ i+mpart.getContentType());

            String disposition = mpart.getDisposition();
            if ((disposition != null)
                    && ((disposition.equals(Part.ATTACHMENT)) || (disposition
                            .equals(Part.INLINE))))
                continue;
            String contype = mpart.getContentType();
            if(contype.toLowerCase().indexOf("application")!=-1||contype.toLowerCase().indexOf("name")!=-1)
                continue;

            getContent(multipart.getBodyPart(i));
        }
    } else if (part.isMimeType("message/rfc822")) {
        getContent((Part) part.getContent());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:02:07.960

但是，我不知道 JavaMail 的细节：

IMAP 在其协议中提供了用于下载消息的 MIME 部分的方法，允许在服务器上将消息分开并分段下载。

POP3s 基本协议只支持下载整个消息。使用可选的 TOP 扩展，它将允许您下载`n`消息的第一行。

如果 JavaMail 具有将消息下载流式传输到磁盘（而不是全部在内存中）的特定扩展，那应该可以让您绕过 Out Of Memory 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:26:41.263

JavaMail 1.4.4 及更高版本可以将 POP3 消息缓存在磁盘上的 tmp 文件中，从而使用更少的内存。有关要设置的属性，请参阅[com.sun.mail.pop3 包的 javadocs 。](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/pop3/package-summary.html)您仍然需要小心处理邮件内容的方式，例如，使用 getInputStream 而不是 getContent 来处理大型附件。

# performance - 加快消除白色像素的matlab代码

> ID：11842705
> 
> 赞同：0
> 
> 时间：2012-08-07T09:12:07.033
> 
> 标签：performance, matlab

我有来自包含白色像素的相机的 rgb 图像。我编写了以下代码来消除它们。它有效，但需要永远。

```
% elliminate white pixel    
while 1
    maxValue = max(imageRGB(:));        
    [maxY maxX] = maxPosition(squeeze(imageRGB(:,:,c)));
    surr = 2;
    x_l = maxX - surr; if x_l < 1, x_l = 1; end
    x_r = maxX + surr; if x_r > size(imageRGB,2), x_r = size(imageRGB,2); end
    y_u = maxY - surr; if y_u < 1, y_u = 1; end
    y_b = maxY + surr; if y_b > size(imageRGB,1), y_b = size(imageRGB,1); end
    meanArea = ((y_b-y_u)+1) * ((x_r-x_l)+1) - 1;
    mean = (sum(sum(imageRGB(y_u:y_b, x_l:x_r,c))) - maxValue)/meanArea;        
    if (maxValue/mean > 1.5)
        imageRGB(maxY,maxX,c) = mean;
    else
        break;
    end
end 
```

有什么想法可以加快此代码的速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:28:34.383

如果我错了，请纠正我，或者完全忽略这个“答案”，但发布的代码似乎是：

1.  找到图像中最白的像素（我在这里猜，`imageRGB`不是 Matlab 内置的）。
2.  找到图像中最白像素的位置（另一个猜测，另一个未知函数`maxPosition`）。
3.  进行某种平均，以用其邻近区域的平均值替换最白的像素。
4.  重复这个过程，直到满足停止条件。

[如果您有图像处理工具箱，您会发现它具有调整像素强度](http://www.mathworks.co.uk/help/toolbox/images/f11-14011.html)的各种功能，我认为这是您正在尝试做的事情，因此您现在可以停止阅读此答案。如果您没有工具箱，请继续阅读。

如果可以，您应该修改整个方法，并从一次读取图像中决定平均阈值应该是多少。这将取消`maxValue`循环的计算，可能用`thresholdValue`. 然后你也可以取消`[maxY maxX]`循环之外的计算。

如果您不能这样做，仍然有一些选项可以提高您的操作速度。您可以：

*   在开始操作之前，用 2 像素的*光环填充图像。*然后将您的操作应用于原始图像中的所有白色像素。显然，您必须将光晕像素设置为正确的值才能使您的操作保持不变。

或者

*   仅对图像中不在边缘 2 像素范围内的像素进行操作。这将产生一个在每个维度上小 4 个像素的输出图像，但在大图像上这通常不是问题。

这些中的任何一个都消除了一大堆`if`语句和重复计算`meanArea`（因为它变成了一个常数）。

如果您可以在处理开始时计算一次阈值，而不是迭代地重新计算它，您可能会发现您可以编写一个函数来实现可以应用于图像中所有像素的平均，并且无需查找白色像素。当然，该功能必须使非白色像素保持不变。对每个像素应用一个操作，确保它是不应更改的像素的空操作（或这些像素的恒等操作）有时比首先找到需要更改的像素然后应用操作更快只对那些像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:54:31.097

*   据我所知`if`表现不佳。

你可以替换

```
 x_l = maxX - surr; if x_l < 1, x_l = 1; end 
```

和

```
 x_l = max(maxX - surr,1); 
```

和其他类似的。

您也可以将`(maxValue/mean > 1.5)`while 循环置于条件中。

* * *

*   在行中

    maxValue = max(imageRGB(:));
    [maxY maxX] = maxPosition(squeeze(imageRGB(:,:,c)));

您搜索 max 两次。我想你可以节省一些时间，如果你这样写：

```
[maxY maxX] = maxPosition(squeeze(imageRGB(:,:,c)));
 maxValue = imageRGB(maxY,maxX,c); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:11:39.597

另一种可能性是删除排序并仅计算整个图像的平均值。这很容易完成，`conv2`这是一个内置的，因此与我们任何人都可以做的任何事情相比**非常**快。

假设您正在使用双灰度图像：

```
% generate an averageing filter
filterMat=ones(2*filterSize+1);
filterMat=filterMat/sum(filterMat(:));

% convolve with image
meanComplete=conv2(picture,filterMat,'same');

% calculate the decision criterion
changeIndices=picture./meanComplete>relThreshold & picture>absThreshold;

% use logical indexing to replace white pixels with the mean
newPicture=picture;
newPicture(changeIndices)=mean(changeIndices); 
```

一张全高清图像需要 50 毫秒。

# knockout.js - Knockout.js ko.applyBindings() 将视图模型的一部分绑定到单独的 div

> ID：11842707
> 
> 赞同：0
> 
> 时间：2012-08-07T09:12:12.170
> 
> 标签：knockout.js

我有一个视图模型，我使用敲除映射器对其进行映射，以从中创建可观察的属性。

```
var viewModel= {
    "Name": "Josh",
    "Position": "Developer",
    "PersonalInfo": [{
         "CashierMail": "Test@testin.com",
          "Phone": "1234",

    }]    
  }

var myViewModel = ko.mapping.fromJS(viewModel); 
```

我有以下html：

```
<div>
The name is <span data-bind="text: Name"></span>
    <div id="info">
        Mail is <span data-bind="text: CashierMail"></span>
        <br>
        Position is <span data-bind="text: Position"></span>
        <br>
        Phone is <span data-bind="text: Phone"></span>
    </div>
</div> 
```

这是我的原始代码，仅使用来自 myViewModel 的一个绑定，它可以工作：

[http://jsfiddle.net/KHFn8/837/](http://jsfiddle.net/KHFn8/837/)

我想要完成的是 id 为“info”的 div 中的字段，这些字段将使用来自 Personal Info 可观察数组的数据进行填充。换句话说，如果`<div id="info">`是一个组件 - 用它自己的数据源填充。

所以我尝试这样的事情：

```
ko.applyBindings(myViewModel);
ko.applyBindings(myViewModel.PersonalInfo[0], document.getElementById("info")); 
```

但它不起作用。

但我想做我上面描述的事情。这是不起作用的代码：

[http://jsfiddle.net/KHFn8/833/](http://jsfiddle.net/KHFn8/833/)

我阅读了这个与我的案例类似的主题，但仍然无法使其工作：

[Knockout.js ko.applyBindings() 层次结构绑定](https://stackoverflow.com/questions/9256938/knockout-js-ko-applybindings-hierarchy-binding)

我对 javascript 和淘汰赛相当陌生，任何有关工作代码的帮助将不胜感激。感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:45:06.757

当您尝试访问 observableArray 中的项目时，您需要访问底层数组，例如：

`myViewModel.PersonalInfo()[0]`

[http://jsfiddle.net/rniemeyer/KHFn8/844/](http://jsfiddle.net/rniemeyer/KHFn8/844/)

# javascript - 骨干网中的智能轮询

> ID：11842708
> 
> 赞同：1
> 
> 时间：2012-08-07T09:12:18.960
> 
> 标签：javascript, backbone.js, long-polling, marionette

为了不断更新 Marionette.CompositeView (2)，我实现了一个长轮询模块，如下所示 (1)。

我想让这个投票更智能。
详细地说，我希望这个轮询不应该获取集合，而只检查新元素以避免再次呈现所有视图。
有任何想法吗？

* * *

(1)

```
define([
    'underscore'
], function (_) {
    "use strict";

    return {

        executePolling: function () {
            this.fetch({success : this.onFetch});
        },

        startPolling: function () {
            _.bindAll(this, 'onFetch', 'executePolling');
            this.minutes = 1;
            this.polling = true;
            this.executePolling();
        },

        stopPolling: function () {
            this.polling = false;
        },

        onFetch: function () {
            if (this.polling) {
                setTimeout(this.executePolling, 1000 * 60 * this.minutes);
            }
        }
    };

}); 
```

* * *

(2)

```
define([
    'underscore'
], function (_) {
    "use strict";

    return Marionette.CompositeView.extend({
        initialize: function () {
            this.collection.startPolling();
        }
        // some code.
    });
}); 
```

# mysql - MySQL 更改 SUM 值

> ID：11842710
> 
> 赞同：1
> 
> 时间：2012-08-07T09:12:22.417
> 
> 标签：mysql, sum

我正在尝试创建一个查询，其中我`SUM`是一列，但如果一列包含某个值，则`SUM`必须在该点重置该值以获取该值。

IE：

```
SUM(i.units * op.add_or_subtract)   // This would translate to: '50 * -1' or '50 * 1' 
```

这个想法是，如果`op.op_code = 9`，该`SUM`值应该重置为当前值，`i.units`因为已经进行了手动调整。

```
op_code | units | add_or_subtract | SUM value |
--------|-------|-----------------|------------
   1    |   50  |       1         |     50
   1    |   50  |       1         |    100
   4    |   30  |      -1         |     70
   9    |  225  |       0         |    225 
```

等等等等

任何人都可以帮助我如何（如果可以的话）在 MySQL 中实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:16:30.497

尝试

```
select *, case when op_code = 9
               then @s := units
               else (@s := @s + (units * add_or_subtract)) 
          end as sum
from your_table, (select @s := 0) st 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:15:42.483

尝试这个：

```
SELECT SUM(IF(op_code = 9, (@var_sum := units), 
                           ((@var_sum := @var_sum + units) * add_or_subtract) 
          ) as sum_value
FROM table_name, (SELECT @var_sum := 0) a; 
```

# c++ - C++/Win32 查找所有键盘输入语言？

> ID：11842711
> 
> 赞同：2
> 
> 时间：2012-08-07T09:12:32.527
> 
> 标签：c++, winapi, input, localization, locale

我想找到键盘的所有输入语言，您可以使用 LEFT ALT + SHIFT 在它们之间切换。

我可以使用 win API 获取默认语言环境和已安装/支持的语言环境，但我无法在任何地方找到有关键盘输入语言环境的任何信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T10:15:27.957

您必须使用[GetKeyboardLayoutList](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646297%28v=vs.85%29.aspx)函数。

例如，要在控制台中输出所有键盘输入语言，您可以使用以下代码：

```
UINT uLayouts;
HKL  *lpList = NULL;
wchar_t szBuf[512];

uLayouts = GetKeyboardLayoutList(0, NULL);
lpList   = (HKL*)LocalAlloc(LPTR, (uLayouts * sizeof(HKL)));
uLayouts = GetKeyboardLayoutList(uLayouts, lpList);

for(int i = 0; i < uLayouts; ++i)
{
    GetLocaleInfo(MAKELCID(((UINT)lpList[i] & 0xffffffff), 
    SORT_DEFAULT), LOCALE_SLANGUAGE, szBuf, 512);
    wprintf(L"%s\n", szBuf);
    memset(szBuf, 0, 512);
}

if(lpList)
    LocalFree(lpList); 
```

# java - JUNIT：从 Junit 测试生成可导出的报告

> ID：11842716
> 
> 赞同：0
> 
> 时间：2012-08-07T09:12:58.487
> 
> 标签：java, unit-testing, junit4

我有一个巨大的 Java 项目，里面有几个单元测试。什么是可用于创建可导出报告的最佳工具，该报告提供项目中单元 (JUnit) 测试的统计信息（例如覆盖率、测试功能列表）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:17:35.050

我使用[cobertura](http://cobertura.sourceforge.net/)作为 maven 插件，但我认为您也可以独立使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:21:28.533

您可以使用 maven 运行测试用例并生成报告。

请参阅此链接： http: [//kirankanumuri.blogspot.in/2010/09/generating-junit-html-reports-using.html](http://kirankanumuri.blogspot.in/2010/09/generating-junit-html-reports-using.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:20:15.000

我为此使用[三叶草。](http://www.atlassian.com/software/clover/overview)但它花费了几美分。

# java - Jython：阻止访问 java 类和更改输出流

> ID：11842719
> 
> 赞同：1
> 
> 时间：2012-08-07T09:13:09.907
> 
> 标签：java, jython

我希望在我正在处理的 Java 项目中使用 Jython。我想知道两件事。

1.  我可以禁止从 Python 脚本访问 Java 类吗？IE。阻止脚本能够执行以下操作`from java.util import Date`？

2.  我可以更改`print "Hello"`等写入的输出流，以便我可以为我的实现重定向脚本输出吗？

还是我必须编辑实际的 Jython 类来禁用和更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:39:15.927

为了限制对特定 Java 类的访问，您可以实现自定义类加载器并将其注册到 Jython：

```
this.pyInterpreter.getSystemState().setClassLoader(this.userCodeClassLoader); 
```

如果您因为安全问题而这样做（不允许在运行用户代码的服务器上执行某些操作），您必须注意 Jython 还提供了不会被您的类加载器捕获的内置函数实现：

[内置 Python 函数实现](http://www.jython.org/docs/library/functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T06:00:40.543

另一种方法是分析 Python 解析树中的所有导入。我认为最好有不止一种安全措施：

```
 String code = "import sys\n"+"from java.io import File\n"+"sys.exit()";
   AnalyzingParser anPar = new  AnalyzingParser(new ANTLRStringStream(code), "", "ascii");

   mod tree=anPar.parseModule();
   Visitor vis = new Visitor() {
       @Override
       public Object visitImport(Import node) throws Exception {
          System.out.println(node);
                       return node;
       }

       @Override
       public Object visitImportFrom(ImportFrom node) throws Exception {
          System.out.println(node);
                       return node;
       }
         };
   List<PythonTree> children=tree.getChildren();
   for (PythonTree c : children){
         vis.visit(c);
   } 
```

# php - 无法将远程文件名获取到 file_get_contents() 然后存储文件

> ID：11842721
> 
> 赞同：7
> 
> 时间：2012-08-07T09:13:14.647
> 
> 标签：php, file, header, file-get-contents, remote-server

我想下载一个远程文件并将其放在我的服务器目录中，并与原始文件具有相同的名称。我尝试使用`file_get_contents($url)`.

问题是文件名不包含在 中`$url`，就像：`www.domain.com?download=1726`. 这个 URL 给我，例如：`myfile.exe`，所以我想使用`file_put_contents('mydir/myfile.exe');`.

我怎样才能检索文件名？下载前试过`get_headers()`了，但是我只有文件大小，修改日期等信息，文件名不见了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T22:19:18.417

我用另一种方式解决了。我发现如果 url 标头中没有**content-disposition**，则 URL 中存在文件名。因此，此代码适用于任何类型的 URL（不需要 cURL）：

```
$url = "http://www.example.com/download.php?id=123";
// $url = "http://www.example.com/myfile.exe?par1=xxx";
$content = get_headers($url,1);
$content = array_change_key_case($content, CASE_LOWER);

    // by header
if ($content['content-disposition']) {
    $tmp_name = explode('=', $content['content-disposition']);
    if ($tmp_name[1]) $realfilename = trim($tmp_name[1],'";\'');
} else  

// by URL Basename
{
    $stripped_url = preg_replace('/\\?.*/', '', $url);
    $realfilename = basename($stripped_url);

} 
```

有用！:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T21:55:29.117

基于 Peter222 的代码，我编写了一个函数来获取文件名。您可以使用 $http_response_header 变量：

```
function get_real_filename($headers,$url)
{
    foreach($headers as $header)
    {
        if (strpos(strtolower($header),'content-disposition') !== false)
        {
            $tmp_name = explode('=', $header);
            if ($tmp_name[1]) return trim($tmp_name[1],'";\'');
        }
    }

    $stripped_url = preg_replace('/\\?.*/', '', $url);
    return basename($stripped_url);
} 
```

用法：（$http_response_header 将由 file_get_contents() 填充）

```
$url = 'http://example.com/test.zip';
$myfile = file_get_contents($url);
$filename = get_real_filename($http_response_header,$url) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:21:56.283

[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)如果文件已被网络服务器预先解析，则通过 HTTP 包装器不会直接下载文件。

*举*个例子：如果你调用一个删除网页`file_get_contents()`（因此，您将只能检索生成的 HTML 输出。`example.com/foobar.php`*`foobar.php``example.com`*

 *如果 URL 中不存在文件名，并且您无法从任何地方获取它，那么您就陷入了死胡同。数据不能只是从数据的先验领域中*召唤出来。*

对于替代解决方案，我只能建议使用[`cURL`](http://php.net/manual/en/book.curl.php)库（它用于处理从您的服务器（因为它是客户端）到使用 URL 的其他服务器的查询，因此名称为*cient URL*）或[文件套接字](http://php.net/manual/en/function.fsockopen.php)。这是[Stack Overflow 上的另一个问题的答案，](https://stackoverflow.com/a/2072920/1428773)它描述了如何使用`cURL`.

此外，您可以尝试与 的管理员/维护者/网站管理员团队取得联系`domain.com`，询问他们是否有公开可用的 API 来获取文件名和其他元数据。*

# linux - ldconfig 只链接以 lib* 开头的文件？

> ID：11842729
> 
> 赞同：4
> 
> 时间：2012-08-07T09:13:45.837
> 
> 标签：linux, shared-libraries, ubuntu-12.04

我正在努力让 MVTec Halcon 11 在 Ubuntu 上运行。一切都在正确的位置，但程序看不到图像采集所需的动态库（仅相机工作正常，驱动程序已安装）

我将带有库的路径添加到`/etc/ld.so.conf`并运行`ldconfig -v`，但在目录中存在的 28 个文件（所有“共享库”类型和 .so 扩展名）中，只有“lib*.so”文件被链接。事实上，ldconfig 输出中的所有库都称为 lib*something。

奇怪的是，如果我在文件名前添加“lib”，它们就会被链接（当然软件不会这样）

这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:59:12.760

来自 ld.so 和 ld-linux.so 的人

部分文件：

> lib*.so* 共享库

从 glibc (./elf/ldconfig.c) ：

```
 712       /* Does this file look like a shared library or is it a hwcap
 713          subdirectory?  The dynamic linker is also considered as
 714          shared library.  */
 715       if (((strncmp (direntry->d_name, "lib", 3) != 0
 716             && strncmp (direntry->d_name, "ld-", 3) != 0)
 717            || strstr (direntry->d_name, ".so") == NULL)
 718           && (
 719 #ifdef _DIRENT_HAVE_D_TYPE
 720               direntry->d_type == DT_REG ||
 721 #endif
 722               !is_hwcap_platform (direntry->d_name)))
 723         continue; 
```

看起来您必须选择一个以 lib 开头的名称... libc 使用它来确定文件是否可能是共享库。

# ruby-on-rails - 在 railstutorial.com 第 3 章编辑 Guardfile 错误

> ID：11842731
> 
> 赞同：0
> 
> 时间：2012-08-07T09:13:49.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 3.6.2 使用 Guard 进行自动化测试

教程是..

```
require 'active_support/core_ext'

guard 'rspec', :version => 2, :all_after_pass => false do   .   .   .  watch(%r{^app/controllers/(.+)_(controller)\.rb$})  do |m|
    ["spec/routing/#{m[1]}_routing_spec.rb",
     "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb",
     "spec/acceptance/#{m[1]}_spec.rb",
     (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : 
                       "spec/requests/#{m[1].singularize}_pages_spec.rb")]   end   watch(%r{^app/views/(.+)/}) do |m|
    (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : 
                       "spec/requests/#{m[1].singularize}_pages_spec.rb")   end   .   .   . end 
```

但我不知道如何编辑我的 Guardfile

```
# A sample Guardfile
# More info at https://github.com/guard/guard#readme

guard 'rspec', :version => 2 do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }

  # Rails example 
```

...

```
guard 'rspec', :version => 2 do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }

  # Rails example
  watch(%r{^app/(.+)\.rb$})                           { |m| "spec/#{m[1]}_spec.rb" }
  watch(%r{^app/(.*)(\.erb|\.haml)$})                 { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
  watch(%r{^app/controllers/(.+)_(controller)\.rb$})  { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] }
  watch(%r{^spec/support/(.+)\.rb$})                  { "spec" }
  watch('config/routes.rb')                           { "spec/routing" }
  watch('app/controllers/application_controller.rb')  { "spec/controllers" } 
```

...

请帮我。只是插入吗？但同样的错误..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T16:14:21.530

[清单 3.3.4](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#code%3aguardfile)只是告诉您应该对默认**Guardfile**进行哪些更改和添加。所以：

换行

```
guard 'rspec', :version => 2 do 
```

到

```
guard 'rspec', :version => 2, :all_after_pass => false do 
```

并添加其余代码

```
watch(%r{^app/controllers/(.+)_(controller)\.rb$})  do |m|
  ["spec/routing/#{m[1]}_routing_spec.rb",
   "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb",
   "spec/acceptance/#{m[1]}_spec.rb",
   (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : 
                     "spec/requests/#{m[1].singularize}_pages_spec.rb")]
end
watch(%r{^app/views/(.+)/}) do |m|
  (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : 
                    "spec/requests/#{m[1].singularize}_pages_spec.rb")
end 
```

到**Guardfile**的末尾。

或者，您可以直接从[sample_app Github repo 的**Guardfile**](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/Guardfile)复制和粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:11:42.977

守卫 'rspec', :version => 2, :all_after_pass => false 做

并添加代码

```
watch(%r{^app/controllers/(.+)_(controller)\.rb$})  do |m|
  ["spec/routing/#{m[1]}_routing_spec.rb",
   "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb",
   "spec/acceptance/#{m[1]}_spec.rb",
   (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : 
                     "spec/requests/#{m[1].singularize}_pages_spec.rb")]
end
watch(%r{^app/views/(.+)/}) do |m|
  (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : 
                    "spec/requests/#{m[1].singularize}_pages_spec.rb")
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T01:12:28.857

如果您正在执行本教程的最新版本，它应该是这样的

> 需要'active_support/inflector'
> 
> guard 'rspec', all_after_pass: false, cli: '--drb' do
> watch('config/routes.rb') # 自定义 Rails 教程规范
> watch(%r{^app/controllers/(.+)_(controller) .rb$}) 做 |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb", (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : "spec/requests/ #{m[1].singularize}_pages_spec.rb")] end
> watch(%r{^app/views/(.+)/}) 做 |m| (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : "spec/requests/#{m[1].singularize}_pages_spec.rb") 结束
> 观察( %r{^app/controllers/sessions_controller.rb$}) 做 |m| "
> 
> 结尾
> 
> 守卫 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' } 看('config/application.rb') 看('config/ environment.rb') watch('config/environments/test.rb') watch(%r{^config/initializers/.+.rb$}) watch('Gemfile')
> watch('Gemfile.lock') watch( 'spec/spec_helper.rb') { :rspec }
> watch('test/test_helper.rb') { :test_unit }
> watch(%r{features/support/}) { :cucumber }
> watch(%r{^spec/support /.+.rb$}) 结束
> 
> 守卫 'rspec' 做 watch(%r{^spec/.+_spec.rb$})
> watch(%r{^lib/(.+).rb$}) { |m| "spec/lib/#{m[1]}_spec.rb" }
> watch('spec/spec_helper.rb') { "spec" }
> 
> # Rails 示例 watch(%r{^app/(.+).rb$})
> { |m| "spec/#{m[1]}_spec.rb" } watch(%r{^app/(.*)(.erb|.haml)$})
> { |m| "spec/#{m[1]}#{m[2]} *spec.rb" }
> watch(%r{^app/controllers/(.+)* (controller).rb$}) { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] }
> watch(%r{^spec/support/(.+).rb$}) { "spec" }
> watch('config/routes.rb ') { "spec/routing" } watch('app/controllers/application_controller.rb') { "spec/controllers" }
> 
> # Capybara 功能规格
> watch(%r{^app/views/(.+)/.*.(erb|haml)$}) { |m| “规格/功能/#{m[1]}_spec.rb”}
> 
> # 萝卜特征和步骤
> watch(%r{^spec/acceptance/(.+).feature$})
> watch(%r{^spec/acceptance/steps/(.+)_steps.rb$}) { |m| 目录[File.join("**/#{m[1]}.feature")][0] || '规范/接受' } 结束

# php - 数组值没有超出 foreach 循环

> ID：11842733
> 
> 赞同：0
> 
> 时间：2012-08-07T09:13:52.547
> 
> 标签：php, arrays, foreach

我必须从 db 中获取主要类别、子类别、子类别等。获得了主要类别和子类别，但没有在 foreach 循环之外获得子类别。在循环内部获得了正确的值。我正在为此使用以下代码...我已经在 $children_data = array() 之后声明了 $sub_childs = array() 但后来我在浏览器中得到了空白页.. 请大家帮忙。感谢你

```
 $this->load->model('catalog/category');
        $this->load->model('catalog/product');

        $this->data['categories'] = array();

        $categories = $this->model_catalog_category->getCategories(0);

        foreach ($categories as $category) {
            if ($category['top']) {$sub_childs = array();
                $children_data = array();

                $children = $this->model_catalog_category->getCategories($category['category_id']);

                foreach ($children as $child) {

                    $sub_childs = array();
                    $sub_child = $this->model_catalog_category->getCategories($child['category_id']);
                    // echo '<pre>'; print_r($children_child);// got the correct values in here
                    foreach ($sub_child as $c_child) {
                        $data = array(
                            'filter_category_id' => $c_child['category_id'],
                            'filter_sub_category' => true
                        );

                        if ($this->config->get('config_product_count')) {
                            $product_total = $this->model_catalog_product->getTotalProducts($data);
                            $c_child['name'] .= ' (' . $product_total . ')';
                        }

                        $sub_childs[] = array(
                            'name' => $c_child['name'],
                            'href' => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id'] . '_' . $c_child['category_id'])
                        );
                    }
                    //echo '<pre>'; print_r($sub_childs);// here also got it
                    $data = array(
                        'filter_category_id' => $child['category_id'],
                        'filter_sub_category' => true
                    );

                    if ($this->config->get('config_product_count')) {
                        $product_total = $this->model_catalog_product->getTotalProducts($data);
                        $child['name'] .= ' (' . $product_total . ')';
                    }

                    $children_data[] = array(
                        'name' => $child['name'],
                        'href' => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id'])
                    );
                    echo '<pre>'; print_r($sub_childs);
                }
                //echo '<pre>'; print_r($sub_childs);
                // Level 1
                $this->data['categories'][] = array(
                    'name' => $category['name'],
                    'children' => $children_data,
                    'child' => $sub_childs,                  // didn't get here 
                    'column' => $category['column'] ? $category['column'] : 1,
                    'href' => $this->url->link('product/category', 'path=' . $category['category_id'])
                );
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:13:32.167

似乎是范围问题，请先尝试在 foreach 之外初始化变量：

```
$sub_childs = array();

foreach ($children as $child) { 
```

可能只是`$sub_childs;`会工作

# python - 从文本中提取维基百科条目

> ID：11842735
> 
> 赞同：0
> 
> 时间：2012-08-07T09:14:03.947
> 
> 标签：python, regex, wikipedia, named-entity-recognition

我有一个大文本，我想解析这个文本并识别（例如，这个文本中存在的维基百科条目）。

我想过使用正则表达式，例如：

```
pattern='New York|Barak Obama|Russian Federation|Olympic Games'
re.findall(pattern,text) 
```

...等等，但这将是数百万个字符，并且 re 不接受...

我想到的另一种方法是标记我的文本并搜索每个标记的维基百科条目，但这看起来效率不高，特别是如果我的文本太大......

任何想法如何在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:25:06.090

另一种方法是获取所有 Wikipedia 文章和页面，然后使用 NLTK 的 Sentence tagger。将创建的句子逐句放入 Lucene Index 中，这样每个句子在 Lucene Index 中代表一个自己的“文档”。

例如，您可以查找所有带有“Barak Obama”的句子，以查找句子中的模式。

对 Lucene 的访问非常快，我自己使用了一个 Lucene 索引，其中包含来自 Wikipedia 的超过 42000000 个句子。

要获取氏族 wikipedia txt 文件，您可以从此处下载 wikipedia 作为 xml 文件：[http ://en.wikipedia.org/wiki/Wikipedia:Database_download](http://en.wikipedia.org/wiki/Wikipedia:Database_download)

然后使用 Università di Pisa 的 WikipediaExtractor。 [http://medialab.di.unipi.it/wiki/Wikipedia_Extractor](http://medialab.di.unipi.it/wiki/Wikipedia_Extractor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:22:34.180

你必须用 Python 做这个吗？`grep --fixed-strings`非常适合您想做的事情，并且应该相当有效地做到这一点：[http ://www.gnu.org/savannah-checkouts/gnu/grep/manual/grep.html#index-g_t_0040command_007bgrep_007d-programs-175](http://www.gnu.org/savannah-checkouts/gnu/grep/manual/grep.html#index-g_t_0040command_007bgrep_007d-programs-175)

如果你想用纯 Python 来做，你可能会很难获得比以下更快的速度：

```
for name in articles:
    if name in text:
        print 'found name' 
```

使用的算法`fgrep`称为[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)，但纯 Python 实现可能很慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:18:36.940

我会使用[NLTK](http://nltk.org/)对文本进行[标记](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.tokenize-module.html)，并在标记中查找有效的维基百科条目。如果您不想将整个文本存储在内存中，您可以逐行或按大小的文本块工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-31T17:13:51.367

Gensim 库有一个用于~13GB 维基百科转储的线程迭代器。因此，如果您使用特定术语（n-gram），那么您可以编写自定义正则表达式并处理[每篇文章 text](http://textminingonline.com/training-word2vec-model-on-english-wikipedia-by-gensim)。进行搜索可能需要一天的 CPU 功率。

如果您追求 uri 源，您可能需要调整库。

# javascript - 如何使用javascript跳转到页面底部？

> ID：11842740
> 
> 赞同：0
> 
> 时间：2012-08-07T09:14:09.327
> 
> 标签：javascript, scrollto

单击按钮后，我需要跳转到页面底部。单击后，一些隐藏的信息变得可见并展开页面。我试过这个：

```
onclick='if(event.pageY > (document.body.parentNode.scrollHeight - 250)) {window.scrollBy(0, (document.body.parentNode.scrollHeight));} 
```

**在哪里：**

> *event.pageY* - 点击鼠标位置
> 
> *（document.body.parentNode.scrollHeight - 250）* - 我需要在单击最后几个按钮后执行此操作（底部上方 250 像素）

但这只会跳转到带有隐藏线的上一个（未展开）页面的底部。然后我需要滚动查看变得可见的信息。我需要跳转到扩展页面的底部，显示隐藏的信息。

* * *

第二个问题是它在 chrome 和 firefox 中的工作方式不同。Chrome 仅适用于整个页面的底部 - 250px，而 firefox 适用于页面的可见部分 - 250px。

* * *

有什么建议吗？
提前致谢

# php - 在 ELGG 1.8 上搜索小部件的标题

> ID：11842741
> 
> 赞同：1
> 
> 时间：2012-08-07T09:14:11.203
> 
> 标签：php, search, widget, customization, elgg

我正在使用 ELGG 1.8 开发一个社交门户网站，但我在使用 ELGG 的默认搜索引擎时遇到了一些问题。

我想要做什么：我需要将小部件的标题包含在搜索引擎进程/结果列表中，并且默认情况下它们不是。我不知道如何启用它。

我的成就：现在在搜索结果中列出了小部件的描述，但还没有标题。

有人可以建议我如何解决这个问题吗？[我已经从http://docs.elgg.org](http://docs.elgg.org)阅读了 ELGG 文档，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:08:08.900

小部件是 Elgg 中的实体。但是它们的不同之处在于它们缺少标题和描述。您的解决方案是为小部件创建事件创建一个挂钩，并添加标题和描述，并将小部件实体添加到搜索功能。（它需要一些主要的编码）

我不明白你是如何根据描述搜索小部件的？提出这些类型问题的更好的地方是 Elgg 社区本身。

# c++ - 带有嵌套文件夹的 Eclipse C++ 项目

> ID：11842742
> 
> 赞同：4
> 
> 时间：2012-08-07T09:14:12.870
> 
> 标签：c++, eclipse, include, directory, eclipse-cdt

我对 C++ 比较陌生；我知道语法和东西，但对编译部分知之甚少。我使用 Eclipse 做了一个项目，它变得比较大。所以在继续之前，我想将相关文件放在一个子文件夹中。目前我所有的文件（源文件和标题）都在`src/`（如`src/Foo1.h`，`src/Foo1.cpp`等），我想对它进行排序：

```
src/
 -> Foos
     -> Foo1.h
     -> Foo1.cpp
     -> Foo2.h
     ...
 -> Bars
     -> Bar1.h
     ...
 -> main.cpp
 ... 
```

但是，我还希望包含相对于 src 文件夹（以及当前文件夹，如果可能的话）。例如，我希望`Foos/Foo1.cpp`能够包括以下内容：

```
#include "Foos/Foo1.h"
#include "Bars/Bar1.h" 
```

或者，

```
#include "Foo1.h"
#include "Bars/Bar1.h" 
```

我觉得这应该是可能的，但恐怕我对 C++ 编译或 Eclipse CDT 的了解还不够，无法弄清楚如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:03:04.333

将路径 /src 和 /src/Foos 等添加到包含路径和预处理器符号列表中

对我来说，它位于 Project Properties -> C/C++ Include Paths and Symbols 下

# batch-file - 如何在另一个文件之间插入几行

> ID：11842746
> 
> 赞同：0
> 
> 时间：2012-08-07T09:14:35.947
> 
> 标签：batch-file

我有一个输入文件，我将使用它作为参考文件（或作为模板）。

***模板.txt***

```
blah blah blah - line 1
blah blah blah - line 2
blah blah blah - line n
# Begin Source Files
FILE = <Enter The path of all the source files mentioned in TEMP.txt file>
# End Source Files 
```

又多了很多行

***温度.txt***

```
// This file only contains path of src files
D:\Myproject\src\a.cpp
D:\Myproject\src\b.cpp
D:\Myproject\src\c.cpp
D:\Myproject\src\d.cpp 
```

现在，我需要使用这个`template.txt`文件并且需要生成类似这样的输出文件（`output.txt`）：

```
blah blah blah - line 1
blah blah blah - line 2
blah blah blah - line n
# Begin Source Files
FILE = D:\Myproject\src\a.cpp
FILE = D:\Myproject\src\b.cpp
FILE = D:\Myproject\src\c.cpp
FILE = D:\Myproject\src\d.cpp
# End Source Files 
```

又多了很多行

我不知道如何插入源文件路径（存在于`temp.txt`中间`output.txt`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:24:26.747

您可以使用`FOR`命令来执行此操作...

```
FOR /F %%i IN (Temp.txt) ECHO FILE  = %i > dest 
```

您可能需要处理语法......我在 Mac 机器上输入这个纯粹是为了我的记忆

```
FOR /F loops through individual lines in a text file 
```

# java - 在调试中找到类

> ID：11842752
> 
> 赞同：2
> 
> 时间：2012-08-07T09:15:04.477
> 
> 标签：java, debugging, class, screen

我在 Eclipse 中编写 Java，我只是想知道在调试应用程序时是否有快捷方式或方法可以打开您正在查看的屏幕类。

所以，我正在调试一个非常大的应用程序，有时我在应用程序中打开一个对话框，我想知道 Java 项目中的哪个类包含负责该对话框的代码。是否有在eclipse中打开此类的快捷方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:19:17.500

1.  如果你只是想去一个具体的方法或类的实现，ctrl+click会带你去代码（如果不是第三方代码，你就能看到）
2.  如果您询问如何查看在调试模式下执行的代码，请使用 F6 键而不是 F8。

# php - 如何使用具有名称空间的 PHP 解析 XML 响应？

> ID：11842755
> 
> 赞同：0
> 
> 时间：2012-08-07T09:15:24.570
> 
> 标签：php, xml

我正在尝试使用 PHP 中的 simplexml_load_string 解析其中包含名称空间的 XML 文件。xml 响应的示例在这里： http: [//pastie.org/4404714](http://pastie.org/4404714)

通常我会使用 simplexml_load_string 命令解析它，然后将结果转储出来以获得一个易于阅读的树，以便我可以访问对象。但是，在这种情况下，当我这样做时，所有数据甚至都没有显示出来。AttributeSets 下面的段根本不显示。我必须输出原始 xml 才能看到它们。

我读过其他类似的stackoverflow答案，我可以忽略标签中的命名空间部分，但我也无法让它工作。有人可以帮忙吗。例如，我将如何从该响应中打印出作者、高度或版本。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:22:12.707

也许[这个关于SO的问题](https://stackoverflow.com/questions/595946/parse-xml-with-namespace-using-simplexml)会对你有所帮助。

基本上答案表明您必须为您使用的每个 simpleXMLElement 对象注册名称空间。

来自链接问题的示例：

```
$xml = new SimpleXMLElement($r);
$xml->registerXPathNamespace('e', 'http://www.webex.com/schemas/2002/06/service/event');

foreach($xml->xpath('//e:event') as $event) {
    $event->registerXPathNamespace('e', 'http://www.webex.com/schemas/2002/06/service/event');
    var_export($event->xpath('//e:sessionKey'));
} 
```

或者正如另一个解决方案所解释的那样：它确实可以在没有 registerXPathNamespace 和 xpath 查询中的完整命名空间前缀的情况下工作：

```
$xml = new SimpleXMLElement($r);

foreach($xml->xpath('//event:event') as $event) {
    var_export($event->xpath('event:sessionKey'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:57:59.473

经过大量研究，我找到了两种解决方法。一种是正确的方法，另一种是快速而肮脏的。 [这是](http://blog.sherifmansour.com/?p=302)解释如何以正确方式进行操作的网站。我能够使用`simple_xml_load_string`PHP 解析字符串，然后获取包含不同命名空间的对象的子对象，就像该页面上的示例一样。这是一个痛苦但可行的。

最后，因为我只需要一个简单、快速的解决方案，所以我获取了原始 XML 数据并做了一个`str_replace('ns2:','',$rawxml)`，然后用它解析它，`simple_xml_load_string`它就像一个魅力。我只是`$call->it->like->this`。

有些人不喜欢这个解决方案，但命名空间用于避免重复字段，并且由于我解析和使用数据的方式的性质，这对我来说不是问题。

# optimization - 纠正对 Google 的 Speech2Text 服务的误解

> ID：11842760
> 
> 赞同：1
> 
> 时间：2012-08-07T09:15:49.780
> 
> 标签：optimization, google-api, search-engine, speech-to-text

我正在使用 Google 的 Speech2Text API，并希望优化我得到的结果，通过执行 Google 搜索来纠正误解的单词，以在所选主题中查找可能的短语。有没有我可以使用的服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T10:15:27.627

不，我认为目前还没有这样的服务。但是写一个也不会太辛苦。

您已经在使用 Google 的 API 来执行语音识别，所以大概您会很乐意使用它来执行“选择的主题”的搜索。

完成后，您可以获取所有答案页面并将它们连接在一起以制作与所选主题匹配的短语语料库。从那些你可以实现一个算法来找到最接近的子字符串（[试试这些](http://www.google.co.uk/webhp?q=closest%20substring%20algorithm)）。您正在寻找与您从 Google 获得的语音识别结果最接近的整个语料库的子字符串。那应该会给你答案。

# android - 如何在android中绘制球体

> ID：11842767
> 
> 赞同：2
> 
> 时间：2012-08-07T09:16:16.660
> 
> 标签：android, opengl-es

如何使用 OpenGL ES 在 Android 中绘制球体？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T09:28:30.990

您的问题可能与以下问题重复：

[在 OPENGL ES 中绘制球体的问题](https://stackoverflow.com/questions/6072308/problem-drawing-a-sphere-in-opengl-es)

[在 OpenGL ES 中绘制一个球体](https://stackoverflow.com/questions/10488086/drawing-a-sphere-in-opengl-es)

我会建议你在问这个问题之前做一些研究，因为有很多相同的教程：

[http://www.learnopengles.com/android-lesson-one-getting-started/](http://www.learnopengles.com/android-lesson-one-getting-started/)

如果您在尝试时遇到任何问题或问题，那么应该用真正的问题提出问题。

谢谢。

# java - 如何在 JFace 向导对话框中更改后退和下一个按钮的位置？

> ID：11842770
> 
> 赞同：2
> 
> 时间：2012-08-07T09:16:20.297
> 
> 标签：java, eclipse, swt, jface, wizard

我创建了一个自定义 JFace 向导对话框来添加按钮。我找到了一种方法来更改它们在布局中的位置（例如将它们放在取消和完成按钮之间），但是当我尝试将它们放在上一个和下一个按钮之间时它不起作用。

这是代码：

```
@Override
protected void createButtonsForButtonBar(Composite parent) {
    super.createButtonsForButtonBar(parent);

    Button nextButton = getButton(IDialogConstants.NEXT_ID);
    nextButton.setText(NEXT_LABEL);
    Button backButton = getButton(IDialogConstants.BACK_ID);
    backButton.setText(BACK_LABEL);
    Button cancelButton = getButton(IDialogConstants.CANCEL_ID);
    cancelButton.setText(CANCEL_LABEL);
    Button finishButton = getButton(IDialogConstants.FINISH_ID);
    finishButton.setText(FINISH_LABEL);

    rejectButton = super.createButton(parent, REJECT_ID, REJECT_LABEL, false);
    rejectButton.moveAbove(nextButton);
    setButtonLayoutData(rejectButton);

    acceptButton = super.createButton(parent, ACCEPT_ID, ACCEPT_LABEL, false);
    acceptButton.moveBelow(rejectButton);
    setButtonLayoutData(acceptButton);

} 
```

当我查看向导时，我发现“上一个”和“下一个”按钮之间的空间比其他按钮更薄。看起来他们被绑定在一起或类似的东西......

是否有另一种解决方案来改变他们的立场？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:32:07.393

毕竟，解决方案非常简单 =)

Back 和 Next 按钮在主组合内有自己的父组合：

```
private Composite createPreviousAndNextButtons(Composite parent) {
    // increment the number of columns in the button bar
    ((GridLayout) parent.getLayout()).numColumns++;
    Composite composite = new Composite(parent, SWT.NONE);
    // create a layout with spacing and margins appropriate for the font
    // size.
    GridLayout layout = new GridLayout();
    layout.numColumns = 0; // will be incremented by createButton
    layout.marginWidth = 0;
    layout.marginHeight = 0;
    layout.horizontalSpacing = 0;
    layout.verticalSpacing = 0;
    composite.setLayout(layout);
    GridData data = new GridData(GridData.HORIZONTAL_ALIGN_CENTER
            | GridData.VERTICAL_ALIGN_CENTER);
    composite.setLayoutData(data);
    composite.setFont(parent.getFont());
    backButton = createButton(composite, IDialogConstants.BACK_ID,
            IDialogConstants.BACK_LABEL, false);
    nextButton = createButton(composite, IDialogConstants.NEXT_ID,
            IDialogConstants.NEXT_LABEL, false);
    return composite; 
```

因此，我将重写方法的代码更改为：

```
@Override
protected void createButtonsForButtonBar(Composite parent) {
    super.createButtonsForButtonBar(parent);

    Button cancelButton = getButton(IDialogConstants.CANCEL_ID);
    cancelButton.setText(CANCEL_LABEL);
    Button finishButton = getButton(IDialogConstants.FINISH_ID);
    finishButton.setText(FINISH_LABEL);

    rejectButton = super.createButton(parent, REJECT_ID, REJECT_LABEL, false);
    setButtonLayoutData(rejectButton);

    acceptButton = super.createButton(parent, ACCEPT_ID, ACCEPT_LABEL, false);
    acceptButton.moveBelow(rejectButton);
    setButtonLayoutData(acceptButton);

    if (super.getWizard().needsPreviousAndNextButtons()) {
        Button nextButton = getButton(IDialogConstants.NEXT_ID);
        nextButton.setText(NEXT_LABEL);
        Button backButton = getButton(IDialogConstants.BACK_ID);
        backButton.setText(BACK_LABEL);

        // change composite parent of back and next buttons.
        nextButton.setParent(parent);
        backButton.setParent(parent);
        ((GridLayout) parent.getLayout()).numColumns = ((GridLayout) parent.getLayout()).numColumns + 2;

        // defines buttons'order
        finishButton.moveBelow(null);
        cancelButton.moveAbove(finishButton);
        nextButton.moveAbove(cancelButton);
        acceptButton.moveAbove(nextButton);
        rejectButton.moveAbove(acceptButton);
        backButton.moveAbove(rejectButton);
    }   
} 
```

=)

# android - Android：在setSelecton上突出显示列表中的项目

> ID：11842772
> 
> 赞同：3
> 
> 时间：2012-08-07T09:16:24.273
> 
> 标签：android, android-listview, css-selectors

我有一个 ListView 和 listselector.xml。最初我使用 setSeletion(position) 设置项目。但是使用此代码，该项目不会突出显示。只有当我点击一个项目时它才会突出显示。

```
 ArrayAdapter<String> ad = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listItems);
    timeListView = (ListView) findViewById(R.id.listList);
    timeListView.setAdapter(ad);
    timeListView.setOnItemClickListener(this);      
    timeListView.setSelector(R.drawable.listselector);
    timeListView.setSelection(toSelectPos);

     ============================= 
     XML      
     <ListView android:id="@+id/listList" android:layout_width="match_parent"    android:layout_height="wrap_content"  android:dividerHeight="1dp" > 
```

listselector.xml 代码

```
 <?xml version="1.0" encoding="UTF-8"?>
     <!-- listselector.xml  -->
     <selector xmlns:android="http://schemas.android.com/apk/res/android">  
<!-- Selected -->
<item android:state_focused="true" android:state_selected="false"
        android:drawable="@drawable/focused"/>

<!-- Pressed -->
<item android:state_selected="true" android:state_focused="false"
        android:drawable="@drawable/selected" />     
      </selector> 
```

上面的代码突出显示了完整的列表视图，我只想突出显示（更改背景颜色）项目。为此，我相信我将不得不为该项目创建另一个 xml 并为该项目设置选择器属性，而不是如上所述的列表。如果我错了，请纠正我。

关键是，无论如何，只有单击和 setSelection 上的选定项目应该更改。使用上面的代码，它不会改变 setSelection，如何实现。

我查看了其他 Q，但找不到我正在寻找的点，所以请不要将其标记为其他 Q 的重复项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:37:12.350

我不确定这是否正确，但我从 support-v4 示例的片段演示中找到了以下解决方案。

制作可检查的自定义布局并将此布局用于列表行

```
public class CheckableLayout extends LinearLayout implements Checkable {
    private boolean mChecked;

    public CheckableLayout (Context context) {
        super(context);
    }

    public CheckableLayout (Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setChecked(boolean checked) {
        mChecked = checked;
        // set the custom background image/color
        setBackgroundResource(checked ? R.drawable.category_item_row_selected
                : R.drawable.custom_category_item_row);
    }

    public boolean isChecked() {
        return mChecked;
    }

    public void toggle() {
        setChecked(!mChecked);
    }

} 
```

将您的列表视图定义为单选模式，例如`YOUR_LISTVIEW.setChoiceMode(ListView.CHOICE_MODE_SINGLE);`

单击行（**`inside OnItemClickListener`**）时，您必须将该行设置为已选中 `YOUR_LISTVIEW.setItemChecked(index, true);`

就是这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:30:12.713

正如您可能已经在 stack-overflow 上的一些答案中看到的那样，您不能选择视图，因为它已实现，因此用户界面必须始终处于触摸模式，如您[在此处](http://android-developers.blogspot.pt/2008/12/touch-mode.html)看到的那样 但是，有一些解决方法你可以做。

您可以使用以下侦听器设置 ListView onItemClick：

```
 OnItemClickListener itemClickListener = new OnItemClickListener() {

public void onItemClick(AdapterView<?> arg0, View v, int pos, long id) {

    if (v == lastSelectedView) {

    v.setBackgroundResource(0);
    lastSelectedView = null;

    } else if (v != lastSelectedView) {

    if (lastSelectedView != null)

        lastSelectedView
            .setBackgroundColor(android.R.color.transparent);

    lastSelectedView = v;

    v.setBackgroundDrawable(v.getContext().getResources()
        .getDrawable(R.drawable.some_row_background));
    }
}

}; 
```

在此您将根据需要为 lisview 项目着色。但是有一个问题。**如果您向下或向上滚动，视图的回收将标记另一个视图**。您可以在滚动时“取消选择”视图，或者您可以找到一种方法来标记视图。

最好的祝福

# google-maps - 在谷歌地图中绘制 svg:s 时椭圆弧曲线是否损坏？

> ID：11842776
> 
> 赞同：0
> 
> 时间：2012-08-07T09:16:36.957
> 
> 标签：google-maps, svg

我正在尝试使用 svg 形状在谷歌地图上绘制一个椭圆。

以下路径（星号）工作正常：

```
var goldStar = {
    path: 'M 125,5 155,90 245,90 175,145 200,230 125,180 50,230 75,145 5,90 95,90 z',
    fillColor: "yellow",
    fillOpacity: 0.8,
    scale: 1,
    strokeColor: "gold",
    strokeWeight: 14
}; 
```

但是这个（椭圆弧）根本没有显示。

```
var elipticalarc = {
    path: 'M 0,0 a20,10 0 1,1 100,100',
    fillColor: "yellow",
    fillOpacity: 0.8,
    scale: 1,
    strokeColor: "gold",
    strokeWeight: 14
}; 
```

您可以通过将路径替换为以下链接中的 d 属性来设置两个路径：

[http://www.w3schools.com/svg/tryit.asp?filename=trysvg_path](http://www.w3schools.com/svg/tryit.asp?filename=trysvg_path)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:01:47.923

It turned out it was just really tiny.

# ios - 更改视图 - (void)applicationWillEnterForeground:(UIApplication *)application

> ID：11842781
> 
> 赞同：0
> 
> 时间：2012-08-07T09:16:53.883
> 
> 标签：ios, xcode, delegates, segue

再次打开应用程序时如何更改为另一个视图。

我正在考虑在我的应用程序委托中使用方法' - (void)applicationWillEnterForeground:(UIApplication *)application '并执行一个 segue 可能吗？我将如何正确地做到这一点？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:06:35.673

您可以使用[NSUserDeafult](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)在应用程序进入前台时添加应用程序的状态，并且当应用程序再次打开时意味着在“应用程序 didFinishLaunchingWithOptions”中只需检查 NSUserDeafult 的值并更改您的视图。

```
 NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

  // saving an NSString
  [prefs setObject:@"first" forKey:@"state"];
  [prefs synchronize]; 
```

当应用程序进入前台时使用此代码

当它回来的时候

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// getting an NSString
NSString *state = [prefs stringForKey:@"state"]; 
```

现在根据状态做任何你想做的事

# jquery - 多选插件

> ID：11842782
> 
> 赞同：1
> 
> 时间：2012-08-07T09:17:03.477
> 
> 标签：jquery

我想知道是否有任何类型的 jQuery 插件可以使多选看起来类似于附加图像？我的意思是点击选项和按钮保存/取消。 ![在此处输入图像描述](../Images/9fe3f07274962852b1e49321d2784f41.png) 提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T19:38:46.233

我用过的最好的 MultiSelect 在这里： http: [//loudev.com/](http://loudev.com/)。我在许多不同的站点和应用程序中使用过它。Lou 实际上让他的 GitHub 保持最新状态并响应问题。也有一些很好的支持问答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T21:17:08.063

看看这个[http://www.erichynds.com/blog/jquery-ui-multiselect-widget](http://www.erichynds.com/blog/jquery-ui-multiselect-widget)或这个[http://quasipartikel.at/multiselect_next/](http://quasipartikel.at/multiselect_next/)希望它对你有帮助

# java - 不需要安装的视频编码的 xuggler 替代方案？

> ID：11842799
> 
> 赞同：3
> 
> 时间：2012-08-07T09:17:57.763
> 
> 标签：java, applet, java-web-start, screen-capture, xuggle

我正在创建一个截屏视频 Java Web Start 应用程序。

使用 xuggler 编码视频需要：

1.  **在客户端系统上安装 xuggler** - 这很乏味。

（或者）

1.  **使用大小约为 35 MB 以上的 xuggle-xuggler.jar 版本 5.2 或更高版本。**- 这会增加应用程序加载所需的时间。

**有没有其他不需要安装的替代方案，而且罐子不是那么大。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:00:04.580

我没有使用 Xuggler 进行视频编码/解码，只有音频。但是，我记得还看到“必须安装 Xuggler”等警告。我发现情况并非如此。您可以轻松地将 JAR 和本机库复制到您的应用程序中，并将它们设置在您的类路径/库路径中，因此 Xuggler 无需安装即可正常工作。

也就是说，我使用的是“标准”安装程序。使用 Java Web Start 可能会有所不同，因为沙盒更加严格。例如，加载本机库。

包的大小是难以摆脱的东西...... CDN 上的主机？

# spring - Spring - 事务管理 - 即使没有事务到位，连接也绑定到线程

> ID：11842801
> 
> 赞同：1
> 
> 时间：2012-08-07T09:18:02.967
> 
> 标签：spring, transactionmanager

我正在使用带有spring的tomcat jdbc池（removeAbandonTimeout = 12mins）。在事务边界内，Spring Tran Manager 将连接绑定到线程。这反过来意味着在边界开始时从池中获得的连接直到事务边界结束（提交/回滚）才返回池。对于定义 tran 管理器的数据源上的 conn 来说，这听起来不错。

在 tran 边界内（在数据源 1 上）以非事务方式查询的其他数据源上创建的连接也绑定到线程，因此在 tran 边界结束之前不会返回到池中。

问题：鉴于在事务管理器中未尝试对来自其他数据源的连接进行回滚，为什么要将连接绑定到线程并剥夺其他线程重用连接？

# php - 使用 Uploadify 获取选定值 jquery 的单选按钮

> ID：11842803
> 
> 赞同：0
> 
> 时间：2012-08-07T09:18:09.220
> 
> 标签：php, jquery, mysql

这是我的代码。即使我选择“是”，我得到的总是“不”这是我的 html 代码。在 firebug 控制台中进行测试时，它工作正常。我也尝试过 .each 函数，但它仍然没有任何价值。有时它需要正确的复选框值，但它会继续取该值几次

```
 <form  >
            <table width="900" cellpadding="5" border="0" >

              <tr>
                 <td width="30"><input type="radio"  class="radio_bg" name="profile_rpt_bg"    value="yes"></td>
                 <td>Repeat Background</td>
           </tr>

       <tr class="graybackgroundlight">
        <td><input   type="radio" name="profile_rpt_bg" class="radio_bg"   checked="checked"   value="no"></td>
         <td>Do not Repeat Background</td>
       </tr>
         </table>

       </form> 
```

这是我的 JavaScript 代码

```
 $(document).ready(function(){

    $('#file_upload_bg').uploadify({
     'formData'      : {

         'artist_id' : '<?php echo $artist_details['id']; ?>',
      'username' : '<?php echo $artist_details['username'];?>',
      'rpt': $("input[name='profile_rpt_bg']:checked").val(),
      'column' : 'profile_bg'

      },
     'auto'          : false,
     'multi'         : false,   
     'fileTypeDesc'  : 'Image Files',
     'fileTypeExts'  : '*.jpg; *.png',
     'swf'           : 'uploadify.swf',
     'uploader'      : 'artist_uploadify.php' ,

      'onUploadSuccess' : function(file, data, response) 

      {
          alert(data);

        $("#container").notify("create", {
        title: 'Success',
        text: file.name+' Uploaded with success'
         });      

      }
      // Your options here

    }); //uploadify ends

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:53:20.593

解决了......

```
 'onUploadStart' : function(file) 
              {
                     $('#file_upload_bg').uploadify("settings", "formData", {"rpt":    $("input[name='profile_rpt_bg']:checked").val()});
              }, 
```

在uploadify中添加这个

实际上是uploadify插件问题而不是jquery ..

无论如何谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:21:18.753

检查它在这个小提琴中的工作正常......

```
$('input[name=profile_rpt_bg]').on('click', function() {
    alert( $('input[name=profile_rpt_bg]:checked').val() );
});​ 
```

**[小提琴链接](http://jsfiddle.net/Pvbzj/1/)**

# php - 样式化 wordpress “静态博客页面”

> ID：11842815
> 
> 赞同：0
> 
> 时间：2012-08-07T09:19:00.920
> 
> 标签：php, wordpress

我在使用 Wordpress 时遇到了一些问题，我希望我的博客文章显示在新闻页面上，所以我在设置选项卡中选择了该页面。

博客文章显示但我想更改页面模板，我创建了一个适用于所有其他页面的新模板，但是当我从“新闻”页面的页面模板列表中选择它时，它不会改变，而是保持不变相同的。

没有 blog.php 文件，我什至尝试更改标准 page.php 并期望它会回到那个位置，但事实并非如此！我也尝试过更改档案页面，但似乎没有任何改变！

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:17:12.457

它不会是显示单个页面视图的 page.php，您是对的，没有 blog.php。Wordpress 使用模板层次结构来显示博客文章列表。

从这张图中可以看出 - [Wordpress 模板层次结构](http://codex.wordpress.org/Template_Hierarchy)

对于像您的新闻博客页面这样的档案，您正在查看 category.php、archive.php，然后是 index.php（取决于您的主题和您拥有的模板文件）。

相当方便的是，您的问题与我在上面给出的 Codex 链接中用作演示的工作示例完全相同，因此这应该有助于更多地解释事情。

# python - RegEx/Python：n - 在其他匹配之前出现匹配

> ID：11842816
> 
> 赞同：0
> 
> 时间：2012-08-07T09:19:02.727
> 
> 标签：python, regex

我有一个这样的 XML 文件结构：

```
 <word id="15" pos="SS">
          <token>infarto</token>
          <lemmas>infarto</lemmas>
         </word>
         <word id="16" pos="AS">
          <token>miocardico</token>
          <lemmas>miocardico</lemmas>
         </word>
         <word id="17" pos="AS" annotated="head">
          <token>acuto</token>
          <lemmas>acuto</lemmas>
         </word>
         <word id="18" pos="E">
          <token>in</token>
          <lemmas>in</lemmas>
         </word>
         <word id="19" pos="SS">
          <token>corso</token>
          <lemmas>corso</lemmas>
         </word> 
```

我正在尝试做的是获取围绕具有单词 id 17 的单词的“pos”和“token”的值（annotated = “head” one）。

这对于单词 17 之后的所有匹配都没有问题。

```
(pos=")(.+)(")(\s\S+?)("head")([\s\S]+?)(>)(\w+?)(<+)([\S\s]+?)(pos=")(.+)(")([\s\S]+?)    (token>)(.+)(<)([\s\S]+?) 
```

这为我提供了我想要的所有信息，如果我想扩展，我可以添加

```
(pos=")(.+)(")([\s\S]+?)(token>)(.+)(<)([\s\S]+?) 
```

到最后。它不漂亮，但它有效。

现在当我想去另一个方向时，我完全被难住了

```
(pos=")(.+)(")([\s\S]+?)(token>)(.+)(<)([\s\S]+?)(pos=")(.+)(")(\s\S+?)("head") 
```

它不是只匹配第 16 个单词的信息（“注释头”前面的第一个），而是匹配之前的所有信息（第 15 个单词、第 14 个单词、第 13 个单词等）。

我错过了什么？

PS 遗憾的是，使用 XML 解析器不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:25:02.013

如果您确定您的数据是格式正确的 XML。我认为有可能，请尝试以下步骤：

step1: `<word[^>]*>([^<]*(?:(?!<\/?word)<[^<]*)*)<\/word>`(ref [http://regexr.com?31org](http://regexr.com?31org) )
step2: 从 step 1(group 1) 获取字符串，并匹配`<token[^>]*>([^<]*(?:(?!<\/?token)<[^<]*)*)<\/token>`(ref [http://regexr.com?31ora](http://regexr.com?31ora) ) 或`<lemmas[^>]*>([^<]*(?:(?!<\/?lemmas)<[^<]*)*)<\/lemmas>`(ref [http://regexr. com?31ord](http://regexr.com?31ord) )

您可以尝试根据您的要求修改这些模式:)

参考：精通正则表达式3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:04:11.990

我认为应该是这样的：

```
(?s)(<word(?:(?!<word).)*)<word[^>]*?annotated="head".*?(<word[^>](?:(?<!</word>).)*) 
```

结果，组#1 将包含节点“word”，id = 16，组#2 将包含节点“word”，id = 18。

然后，您可以使用正则表达式分别解析每个节点，如下所示：

```
(?s)<word[^>]*?pos="(?P<pos>[^"]+).*?<token>(?P<token>[^<]+) 
```

你会得到两组“pos”和“token”。

当然可以使用单个正则表达式，但它会非常难看。

# php - 使用 php 和 mysql 进行 Ajax 分页

> ID：11842817
> 
> 赞同：0
> 
> 时间：2012-08-07T09:19:06.117
> 
> 标签：php, jquery, mysql, ajax, paging

我正在尝试使用 Ajax 在我的网站上设置分页，我继承了一个脚本并在以下链接中将其付诸实践 - [http://www.testing.arrivaldesign.co.uk/properties](http://www.testing.arrivaldesign.co.uk/properties)。

我已经让它在一定程度上工作，但它设置为显示前 9 条记录，然后从那里继续，但它只在第一页上显示前 9 条，但是当你点击下一页时它只是重复4 现有记录。

据我所知，这与我的查询限制有关，但我不知道如何让它工作？

这是 ajax 方面的代码。

```
<?php 
include('Connections/connection.php');

include 'functions.php';

// Pagination params
$basePath       = 'http://' . $_SERVER['SERVER_NAME'] . $_SERVER['PHP_SELF'];
$qString        = $_REQUEST['qString'];
$items          = $_REQUEST['items'];
$loadPage       = $_REQUEST['p'];
$current        = $_REQUEST['current'];

$limit = $loadPage*$items;
$min = ($max-$items)+1;

mysql_select_db($database, $conn);
$query_RSproperty = "SELECT properties.*, type.* FROM (properties LEFT JOIN type ON properties.propType=type.typeID) WHERE offline = 'N' ORDER BY propID ASC LIMIT 0, $limit";
$RSproperty = mysql_query($query_RSproperty, $conn) or die(mysql_error());
$row_RSproperty = mysql_fetch_assoc($RSproperty);
$totalRows_RSproperty = mysql_num_rows($RSproperty);

$maxItems       = $totalRows_RSproperty;

// New pagination
$pagination = paginator($basePath . $qString, $loadPage, $maxItems, $items);

// Direction is important for the script to determine which way to animate, left or right. 
$direction = 'left';
if ($current < $loadPage) {
    $direction = 'right';
}
$paginatedStyle = 'style="left:'.($direction == 'left' ? '0' : '-960px').';"';

// The paginated content HTML slide
$page = '<div class="paginated" id="" '.$paginatedStyle.'>';

ob_start();
do {
?>
<div class="grid-1third res-block">
<div class="prop-brief-desc">
            <div class="grid-140"><a href="/properties/<?php echo $row_RSproperty['propSEO'] . '/' . $row_RSproperty['propID']; ?>" id="new<?php echo $no; ?>" class="thumb"><img src="/prop-images/thumbs/<?php echo $row_RSproperty['propImage1']; ?>" width="140" height="105" alt=""></a></div>
            <div class="grid-140 fr">
              <h2><?php echo $row_RSproperty['propBeds']; ?> Bed <?php echo $row_RSproperty['typeName']; ?></h2>
              <?php
              $fulladdress = $row_RSproperty['propAddress1'] . '<br />' . $row_RSproperty['propCity'] . ', ' . $row_RSproperty['propCounty'] . '<br />' . $row_RSproperty['propPostcode'];
              ?>
              <p><?php echo $fulladdress; ?></p>
            </div>
          </div>
          <div class="prop-brief-options<?php echo $no == 2 || $no == 3 ? " hide" : ""; ?>" id="newopt<?php echo $no; ?>">
            <div class="grid-140"> <a href="/properties/<?php echo $row_RSproperty['propSEO'] . '/' . $row_RSproperty['propID']; ?>" class="green_button">Details</a> <a href="#" class="green_button">Arrange Viewing</a> <a href="#" class="green_button">Place Bid</a> <a href="#" class="green_button">Buy it Now</a> </div>
            <div class="grid-140 fr">
              <dl>
                <dt>Auction Ending:</dt>
                <dd><?php
                if(!function_exists('countdown'))  {            
                    function countdown($year, $month, $day, $hour, $minute) {

                        $the_countdown_date = mktime($hour, $minute, 0, $month, $day, $year, -1);
                        $current = time();

                        $difference = $the_countdown_date - $current;
                        if ($difference < 0) $difference = 0;

                        $days = floor($difference/60/60/24);
                        $hours = floor(($difference - $days*60*60*24)/60/60);
                        $minutes = floor(($difference - $days*60*60*24 - $hours*60*60)/60);

                        echo $days."d ".$hours."h ".$minutes."m";
                    }
                }

                $theyear = date("Y",strtotime($row_RSproperty['propEndDate']));
                $themonth = date("n",strtotime($row_RSproperty['propEndDate']));
                $theday = date("d",strtotime($row_RSproperty['propEndDate']));
                $thehour = date("H",strtotime($row_RSproperty['propEndDate']));
                $theminute = date("i",strtotime($row_RSproperty['propEndDate']));

                countdown($theyear,$themonth,$theday,$thehour,$theminute);
                ?></dd>
                <?php if ($row_RSproperty['propCurrBid'] > 0) { ?>
                <dt>Current bid:</dt>
                <dd>£<?php echo number_format($row_RSproperty['propCurrBid']); ?></dd>
                <?php } else { ?>
                <dt>Starting Price:</dt>
                <dd>£<?php echo number_format($row_RSproperty['propStartPrice']); ?></dd>
                <?php } ?>
                <dt>Buy it now:</dt>
                <dd><span class="green">£<?php echo number_format($row_RSproperty['propBinPrice']); ?></span></dd>
              </dl>
            </div>
          </div>
          </div>
<?php       
    } while ($row_RSproperty = mysql_fetch_array($RSproperty));
    /*while ($min <= $max) {
        $page .= '<li>'.$min.'</li>';
        $min++;
    }*/
    $page .= ob_get_contents();
    ob_end_clean();

$page .= '</div>';

// return the JSON
echo json_encode(array( 'pagination' => $pagination, 'page' => $page, 'current' => $loadPage ));
exit;

?> 
```

非常感谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:24:16.060

那是因为您在查询中将 LIMIT 硬编码为 0

```
$query_RSproperty = "SELECT properties.*, type.* FROM (properties LEFT JOIN type ON properties.propType=type.typeID) WHERE offline = 'N' ORDER BY propID ASC LIMIT 0, $limit"; 
```

因此，当您移动到第二页时，查询必须像下面一样生成

```
$query_RSproperty = "SELECT properties.*, type.* FROM (properties LEFT JOIN type ON properties.propType=type.typeID) WHERE offline = 'N' ORDER BY propID ASC LIMIT 0, 4"; 
```

因此，您将获得前 4 条记录。如果要在后续页面上检索下一组记录，则必须在`LIMIT 0, $limit`动态中设置 0，例如：

```
$query_RSproperty = "SELECT properties.*, type.* FROM (properties LEFT JOIN type ON properties.propType=type.typeID) WHERE offline = 'N' ORDER BY propID ASC LIMIT $offset, $limit"; 
```

您必须根据每页显示的结果来计算 $offset。在第一页上，偏移量将始终为 0。如果每页显示 10 条记录，那么在第二页上，偏移量将为 11，第三页上的偏移量将为 21，依此类推。

# javascript - HTML5 Canvas - 停止工作

> ID：11842824
> 
> 赞同：1
> 
> 时间：2012-08-07T09:19:33.803
> 
> 标签：javascript, html, html5-canvas

我正在使用 HTML 画布做一些工作。不幸的是，我遇到了一个非常奇怪的问题。在代码开发过程中的某个时刻，网页开始挂起浏览器。除了`requestAnimFrame`垫片之外没有紧密的环，所以我把它带回了基础，发现了一个非常奇怪的东西。

下面的代码将在屏幕上显示一个圆圈。这工作得很好。如果我注释掉绘制圆圈的代码（在代码中标记），它就会使浏览器停止运行。怎么了？

```
 window.requestAnimFrame = (function(callback) {
    return window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.oRequestAnimationFrame ||
    window.msRequestAnimationFrame ||
    function(callback) {
      window.setTimeout(callback, 1000 / 60);
    };
  })();

  function animate(lastTime, myCircle) {
  //return;
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");

    // update
    var date = new Date();
    var time = date.getTime();
    var timeDiff = time - lastTime;
    var linearSpeed = 100;
    // pixels / second
    var linearDistEachFrame = linearSpeed * timeDiff / 1000;
    var currentX = myCircle.x;

    if(currentX < canvas.width - myCircle.width - myCircle.borderWidth / 2) {
      var newX = currentX + linearDistEachFrame;
      myCircle.x = newX;
    }
    lastTime = time;

    // clear
    drawGrid();

    //draw a circle
    context.beginPath();
    context.fillStyle = "#8ED6FF";
    context.arc(myCircle.x, myCircle.y, myCircle.width, 0, Math.PI*2, true);
    context.closePath();
    context.fill();
    context.lineWidth = myCircle.borderWidth;
    context.strokeStyle = "black";
    context.stroke();

    // request new frame
    requestAnimFrame(function() {
      animate(lastTime, myCircle);
    });
  }

  $(document).ready(function() {
    var myCircle = {
      x: 50,
      y: 50,
      width: 30,
      height: 50,
      borderWidth: 2
    };

    //drawGrid();

    var date = new Date();
    var time = date.getTime();
    animate(time, myCircle);
  });

function drawGrid(){
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");
    context.clearRect(0, 0, canvas.width, canvas.height);
    context.lineWidth = 1;

    for (var x = 0; x <= canvas.width; x += 40) {
        context.moveTo(0 + x, 0);
        context.lineTo(0 + x, canvas.height);
    }

    for (var x = 0; x <= canvas.height; x += 40) {
        context.moveTo(0, 0 + x);
        context.lineTo(canvas.width, 0 + x);
    }

    context.strokeStyle = "#ddd";
    context.stroke();
} 
```

我的画布是这样声明的：

```
<canvas id="myCanvas" width="700" height="400"></canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:48:51.663

事实证明，当我画圆圈时它起作用的原因是因为该代码包含一个`closePath`函数。将其添加到下面的`drawGrid`函数中可以解决此问题。

```
function drawGrid(){
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");
    context.clearRect(0, 0, canvas.width, canvas.height);
    context.lineWidth = 1;

    context.beginPath();

    for (var x = 0; x <= canvas.width; x += 40) {
        context.moveTo(0 + x, 0);
        context.lineTo(0 + x, canvas.height);
    }

    for (var x = 0; x <= canvas.height; x += 40) {
        context.moveTo(0, 0 + x);
        context.lineTo(canvas.width, 0 + x);
    }

    context.closePath();

    context.strokeStyle = "#ddd";
    context.stroke();
} 
```

# wpf - 使用数据触发器为线性画笔设置动画

> ID：11842825
> 
> 赞同：4
> 
> 时间：2012-08-07T09:19:33.383
> 
> 标签：wpf, animation, storyboard, datatrigger, lineargradientbrush

我正在尝试使用数据触发器为边框上的线性画笔设置动画，但遇到了无法使用 TargetName 的问题

我的代码如下，任何人都可以提出解决这个问题的方法吗？

```
<Border Grid.Row="2" BorderThickness="10" Height="100" Width="100" >
    <Border.BorderBrush>
        <LinearGradientBrush>
            <GradientStop Color="Yellow" Offset="0.0" />
            <GradientStop x:Name="gradient" Color="Orange"  Offset="0.5" />
            <GradientStop Color="Yellow" Offset="1.0" />
        </LinearGradientBrush>
    </Border.BorderBrush>
    <Border.Resources>
        <Style TargetType="Border">
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=testBrdrWin, Path=Pulse}" Value="true">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation
                                    Storyboard.TargetName="gradient"
                                    Storyboard.TargetProperty="Offset"
                                    From="0" To="1" Duration="0:0:1"
                                    AutoReverse="True" RepeatBehavior="Forever"
                                    />
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
                <DataTrigger Binding="{Binding ElementName=testBrdrWin, Path=Pulse}" Value="true">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation
                                    Storyboard.TargetName="gradient"
                                    Storyboard.TargetProperty="Offset"
                                    To="0.5" Duration="0:0:01"
                                    AutoReverse="False"
                                    />
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Border.Resources>
</Border> 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T10:17:22.660

1.  你不能`Storyboard.TargetName`在这里使用。您必须使用完整的[`PropertyPath Syntax`](https://msdn.microsoft.com/en-us/library/ms742451(v=vs.100).aspx).
2.  `LinearGradientBrush`必须在`Style`其自身。

在此示例代码中，我删除了所有特殊内容，因此如果您`MouseOver`使用`Border`. 再次根据您的需要进行调整。

```
<Border BorderThickness="10" Height="100" Width="100" >
    <Border.Resources>
        <Style TargetType="Border">
            <Setter Property="BorderBrush">
                <Setter.Value>
                    <LinearGradientBrush>
                        <GradientStop Color="Yellow" Offset="0.0" />
                        <GradientStop Color="Red" Offset="0.5" />
                        <GradientStop Color="Yellow" Offset="1.0" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="true">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation
                                Storyboard.TargetProperty="BorderBrush.(GradientBrush.GradientStops)[1].(GradientStop.Offset)"
                                From="0" To="1" Duration="0:0:1"
                                AutoReverse="True" RepeatBehavior="Forever"
                                />
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Border.Resources>
</Border> 
```

# php - 我们如何跟踪 getHash 函数的类型请求？

> ID：11842832
> 
> 赞同：0
> 
> 时间：2012-08-07T09:19:59.013
> 
> 标签：php, magento

我创建了一个模块，它正确地覆盖了 magento 哈希函数。但问题是，我想检查一些条件。

if admin login, else if soap api user login , else if customer, else if migration customer

**我的问题是，我们如何跟踪getHash**函数的类型请求？

```
<?php
class Namespace_ShaModule_Model_Encryption extends Mage_Core_Model_Encryption
{

    public function hashSHA($password){
        return sha1($password);

    }
    public function hashMD5($password){
        return md5($password);

    }
    public function noHash($password){
        return $password;

    }

    public function validateHash($password, $hash) {

        return $this->hash($password) === $hash;

        }

    public function getHash($password, $salt = false)
    {

          return $this->hash($password);
    }
    public function hash($data){

        if(admin_login_handling_and_api_user_accounts){

            return $this->hashMD5($password);

        } else if(Magento_customer_handling){

            return $this->hashSHA($password);

        }else if(soap_Api_customer_handling){

            return $this->noHash($password);

        }

    }

}
?> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-07T09:41:07.340

从我的角度来看，此操作可能不在 Encryption 类的范围内。Encryption 类应将密码作为参数并作为散列密码返回。因此，为了实现您的要求，您可以向函数 getHash 添加一个附加参数，例如

```
function getHash($password, $salt = false, $type = 'md5') {
  switch($type) {
    case 'md5':
      return $this->hashMD5($password, $salt);
    case 'sha1':
      ...
  }
} 
```

然后可能会进行一些调查以插入核心代码或编写额外的模块来执行此操作。例如，您可以将 $type 变量添加到客户登录和注册过程中，以对散列函数进行更改。像这样挖掘核心文件可能会很累。此外，最好有一个加密工厂来管理这个或其他设计模式问题。

另一种方法非常棘手，我只是在这里写作为参考，但不推荐这样做。就是使用函数debug_backtrace()来检查谁调用了getHash()函数，判断getHash()函数内部的类型。我不知道使用此类功能时的系统要求和资源使用情况。解决这个问题可能会有所帮助，但会出现很多缺陷。

希望这对你有帮助:)

# websphere - websphere startNode 作为 Linux 服务

> ID：11842837
> 
> 赞同：0
> 
> 时间：2012-08-07T09:20:15.127
> 
> 标签：websphere, init

我有以下配置
2 个配置文件

第一个：ClusterManager 它在启动时自动启动正确，因为当我创建它时，我被问到是否要作为服务启动

第二：Node1 它不会自动启动，因为在配置文件创建向导期间我没有被问到（高级模式）

我尝试了以下命令：

```
./wasservice.sh -add was8-rd-dev1NodeCustom01 -serverName Node1 -profilePath /opt/IBM/WebSphere/AppServer/profiles/Custom01/ -wasHome /opt/IBM/WebSphere/AppServer 
```

但是当我在 etc/init.d 中运行脚本时，出现以下错误：

com.ibm.ws.exception.RuntimeError: com.ibm.ejs.EJSException: 无法注册位置服务守护进程，它只能驻留在 NodeAgent 中。确保此节点的 NodeAgent 已启动并正在运行。

这是因为 init 脚本尝试启动 startServer.sh 而不是 startNode.sh 我试图在 init 脚本内部进行更改，但它在命令行上引发参数无效错误。

关于如何使其自动启动的任何线索？

# geolocation - 经度和纬度会随高度变化吗？

> ID：11842839
> 
> 赞同：1
> 
> 时间：2012-08-07T09:20:29.993
> 
> 标签：geolocation

我正在为“电话”开发一个应用程序，我想知道经度和纬度是否随高度而变化？例如，如果我们搬到每层楼的东北角房间，在建筑物内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:24:39.393

不，你有另一个 height 值：[altitude](http://en.wikipedia.org/wiki/Altitude)。

当您在建筑物中时，借助 GPS，您可以准确地知道自己的位置。

例如，在电梯中，您的纬度和经度不会改变，您的高度会改变。通过这第三个值，您可以知道您在哪一层。

通常，您还有其他两个值：

*   水平精度：经度/纬度精度。
*   垂直精度：高度精度。

有关更多详细信息，您可以查看[这篇文章](http://www.cienciaviva.pt/latlong/anterior/gps.asp?accao=changelang&lang=en)，解释所有 GPS 术语

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T09:25:41.693

经度和纬度可以假设为我们所站立的球体上的网格。如果你开始在你的位置上跳跃，那么相对于网格会改变的是高度而不是坐标。

所以经度和纬度与高度无关。

# doctrine-1.2 - 无法保存 Doctrine_Collection

> ID：11842840
> 
> 赞同：0
> 
> 时间：2012-08-07T09:20:32.777
> 
> 标签：doctrine-1.2, doctrine-collection

我正在使用带有 Zend 框架的 Docrine 1.2 并试图保存一个 Doctrine 集合。

我正在使用以下代码从我的表类中检索我的集合。

```
public function getAll()
{
   return $this->createQuery('e')
    ->orderBy('e.order ASC, e.eventType ASC')
    ->execute();
} 
```

我也有以下类来重新排序上述事件记录。

```
class Admin_Model_Event_Sort extends Model_Abstract
{
    /**
     * Events collection
     * @var Doctrine_Collection
     */
    protected $_collection = null;

    public function __construct()
    {
        $this->_collection = Model_Doctrine_EventTypesTable::getInstance()->getAll();
    }

    public function save($eventIds)
    {
        if ($this->_collection instanceof Doctrine_Collection) {
            foreach ($this->_collection as $record)
            {
                $key = array_search($record->eventTypeId, $eventIds);
                if ($key !== false) {
                    $record->order = (string)$key;
                }
            }
            return $this->_saveCollection($this->_collection);
        } else {
            return false;
        }
    }

} 
```

上面的_saveCollection方法如下

```
/**
 * Attempts to save a Doctrine Collection
 * Sets the error message property on error
 * @param Doctrine_Collection $collection
 * @return boolean
 */
protected function _saveCollection(Doctrine_Collection $collection)
{
    try {
        $collection->save();
        return true;
    } catch (Exception $e) {
        $this->_errorMessage = $e->getMessage();
        OpenMeetings_Logger_ErrorLogger::write('Unable to save Doctrine Collection');
        OpenMeetings_Logger_ErrorLogger::vardump($this->_errorMessage);
        return false;
    }
} 
```

上述保存方法中的事件 id 只是一个事件 id 的枚举数组，我使用数组的键来使用 order 字段设置事件的排序顺序。如果我将集合的 var_dump 到数组 ($this->_collection->toArray()) 我得到正确的数据。但是，当我尝试保存集合时，出现以下错误。

“SQLSTATE [42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，了解在 'order = '0' WHERE eventtypeid = '3 附近使用的正确语法''在第 1 行"

无论如何我可以让 Doctrine 扩展这个错误，完整的 SQL 语句将是一个开始，如果有人知道为什么会发生这个错误，那将非常有帮助。

提前谢谢了

加里

编辑

我已经修改了上面的代码以尝试一次处理一条记录，但我仍然遇到同样的问题。

```
public function save($eventIds)
    {
        foreach ($eventIds as $key => $eventId) {
            $event = Model_Doctrine_EventTypesTable::getInstance()->getOne($eventId);
            $event->order = (string)$key;
            $event->save();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:18:20.260

好的，我发现了问题。我使用 MYSQL 保留字 order 作为字段名，因此出现错误，将其更改为 sortOrder，问题就消失了。

希望这可以帮助有类似问题的人。

加里

# javascript - 选择要显示的没有属性 JS/XML 的 XML 数据

> ID：11842841
> 
> 赞同：0
> 
> 时间：2012-08-07T09:20:32.527
> 
> 标签：javascript, xml

所以我想使用 Javascript 选择要显示的 XML 数据（不使用属性）。以下是关于我想要做什么的细节：

XML

```
<channel>

  <item>
     <title>3.jpg</title>
     <link>images/clean/3-dirty.jpg</link>
  </item>

  <item>
     <title>4.jpg</title>
     <link>images/clean/4-dirty.jpg</link>
  </item>

<item>
     <title>5.jpg</title>
     <link>images/clean/4-clean.jpg</link>
  </item>

  <item>
     <title>6.jpg</title>
     <link>images/clean/4-dirty.jpg</link>
  </item>

... and the list goes on for ages.

</channel> 
```

Javascript

```
<script type="text/javascript">
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET","xml/drc.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

var x=xmlDoc.getElementsByTagName("item");
for (i=0;i<x.length;i++)
{ 
document.write("<img src='");
document.write(x[i].getElementsByTagName("link")[0].childNodes[0].nodeValue);
document.write("' alt='image' height='220px' width='260px' />");
}

</script> 
```

如何在 url 中显示仅包含“dirty”或“clean”字样的图像？我试过使用 IndexOf() 方法，但无法让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:26:22.003

尝试这个：

```
for (i=0;i<x.length;i++) {
    var src = x[i].getElementsByTagName("link")[0].childNodes[0].nodeValue;
    if( src.indexOf("dirty") != -1 ) {
       document.write("<img src='");
       document.write(src);
       document.write("' alt='image' height='220px' width='260px' />");
    }
} 
```

如果它不起作用，也试试这个：

```
for (i=0;i<x.length;i++) {
    var src = x[i].getElementsByTagName("link")[0].childNodes[0].nodeValue;
    var srcLower = src.toLowerCase();
    if( srcLower.indexOf("dirty") != -1 ) {
       document.write("<img src='");
       document.write(src);
       document.write("' alt='image' height='220px' width='260px' />");
    }
} 
```

# twitter-bootstrap - Twitter Bootstrap Popup 忽略延迟

> ID：11842851
> 
> 赞同：7
> 
> 时间：2012-08-07T09:21:36.280
> 
> 标签：twitter-bootstrap, delay, popover

在stackoverflow上关注[这个问题](https://stackoverflow.com/questions/8130069/load-bootstrap-js-popover-content-with-ajax)后，我创建了一个在悬停时加载的twitter bootstrap popover。但是，没有使用延迟，弹出框立即显示。这是我的代码：

```
$('body').delegate('.withajaxpopover', 'hover', function(event) {
   if (event.type === 'mouseenter') {
      var el=$(this);
      $.get(el.attr('data-load'), function(d) {
      el.popover({delay: { 
                     show: 750, 
                     hide: 100
                  },
                  title: "MyTitle", 
                  content: d}).popover('show', 
                                       {delay: { show: 750, hide: 100 }});
                    });
   } else {
                    $(this).popover('hide');
   }
});
$('body').delegate('.withajaxpopover', 'click', function(event) {
   $(this).popover('hide');
}); 
```

延迟被忽略。我能做些什么？

感谢您的帮助或提示！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T16:38:02.987

有一个类似的问题，通过聚焦 obj. 会看起来像这样...

```
$('#yourobj').popover({
    trigger: 'focus',
    delay: 1000
 }).focus(); 
```

如果您想要手动触发，超时会更好。

```
setTimeout(function() {
  $('#yourobj').popover('show');
}, 500); 
```

希望是帮助别人...

# video - 使用 EMGU 或 DirectShow C# 从 DVR 录制视频

> ID：11842852
> 
> 赞同：0
> 
> 时间：2012-08-07T09:21:46.460
> 
> 标签：video, opencv, directshow, emgucv

我需要从 .net C# 的 4 通道 DVR 录制视频。我查看了 EMGU 一个 Opencv .net 包装器以及 DirectShow .net 库来执行此操作。我决定试一试 EMGU，并且在使用网络摄像头时非常满意。现在我想使用 4 通道 H.264 Usb DVR 用于相同目的，但我不知道如何在 DVR 上选择视频通道。运行 EMGU 的示例捕获应用程序时，我只得到一个黑屏。我对 DirectShow 有同样的问题。它将 DVR 作为 DR 3101_3104 视频捕获设备拾取，但也显示黑屏。请注意，当我使用“SuperDVR”（DVR 随附的软件）时，相机工作正常。

我认为必须有一种方法可以在这两个库中指定您想要的相机的通道，但我不知道。有人可以阐明我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:28:54.350

在 DirectShow 设备上切换输入通道的标准 DrietShow 方式是[`IAMCrossbar`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd389171%28v=vs.85%29.aspx)接口。不过，一些供应商将其设为非标准方式。

您可以使用`AMCap`Windows SDK 中的示例/工具（它带有 C++ 源代码，并且 DirectShow.NET 也有相应的定义）来查看您的设备是否有可用的交叉开关，如果有 - 您将能够切换输入方法。否则，您需要就这个问题联系硬件供应商。

![在此处输入图像描述](../Images/824166f9de366ee7e88f87665fee83b4.png)

# java - 在 App Engine (Java) 中处理 HTML 表单

> ID：11842858
> 
> 赞同：0
> 
> 时间：2012-08-07T09:21:57.927
> 
> 标签：java, html, google-app-engine

我一般是使用 Java 进行 Web 开发的新手，但我有一些 Java 编程背景，所以我选择了 Java 版本的 App Engine。在此之前，我只有涉及 PHP 的 Web 项目。

App Engine 中是否有任何优雅的方式来处理发送到我的 servlet 的 HTML 表单并正确转义它们？App Engine 文档中的示例仅涉及在向用户显示信息的 jsp 中转义 XML，但我希望在我的 DataStore 中有没有 XML 的干净文本，以尽量减少意外错误。

我目前正在使用 Apache Commons 包中的 StringEscapeUtils，但我更喜欢 App Engine 中包含的解决方案，因为我必须在我的应用程序中部署 commons-jars。用正则表达式自己解析字符串是唯一的其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:37:55.170

您不应该逃避用户发送的内容。保持原样，并将其存储在数据库中。这些数据可能是 XML 有充分的理由，并且这些数据可能被其他东西使用，而不是 web 应用程序，它不关心 HTML 转义。甚至在 webapp 中，它也可以作为 JSON 对象的一部分发送，不需要 HTML 转义。

生成包含此数据的 HTML 页面时，您必须转义 HTML 特殊字符以确保正确显示所有内容。StringEscapeUtils 很好，将 jar 与您的应用程序捆绑在一起是完全正常的。如果您使用 JSP 生成 HTML 标记，请使用 JSTL`<c:out>`标记或 JSTL`fn:escapeXml()`函数。

如果您想在不嵌入 commons-lang 库的情况下用 Java 制作，请自己实现过滤。您只需要将`<`、`>`、`'`和替换`"`为`&`相应的 HTML 实体。应该不会太难。

# android - （未终止的实体参考）Android绘制路径功能出错

> ID：11842859
> 
> 赞同：1
> 
> 时间：2012-08-07T09:21:57.957
> 
> 标签：android, map

我认为这个错误在这里很常见，但不幸的是没有人给出正确的答案。我的绘制路径功能运行良好，但一周后它停止了！我收到此错误：

`unterminated entity ref (position:ENTITY_REF @1:811 in java.io.InputStreamReader@41e8b990).`

这是我的代码：

```
private void DrawPath(GeoPoint src,GeoPoint dest, int color, MapView mMapView01) 
    { 
            // connect to map web service 
            StringBuilder urlString = new StringBuilder(); 
            urlString.append("http://maps.google.com/maps?f=d&hl=en"); 
                urlString.append("&saddr=");//from 
            urlString.append( Double.toString((double)src.getLatitudeE6()/1.0E6 )); 
            urlString.append(","); 
            urlString.append( Double.toString((double)src.getLongitudeE6()/1.0E6 )); 
            urlString.append("&daddr=");//to 
            urlString.append( Double.toString((double)dest.getLatitudeE6()/1.0E6 )); 
            urlString.append(","); 
            urlString.append( Double.toString((double)dest.getLongitudeE6()/1.0E6 )); 
            urlString.append("&ie=UTF8&0&om=0&output=kml"); 
            Log.d("xxx","URL="+urlString.toString()); 
            // get the kml (XML) doc. And parse it to get the coordinates(direction route). 
            Document doc = null; 
            HttpURLConnection urlConnection= null; 
            URL url = null; 
            try 
            { 
            url = new URL(urlString.toString()); 
            urlConnection=(HttpURLConnection)url.openConnection(); 
            urlConnection.setRequestMethod("GET"); 
            urlConnection.setDoOutput(true); 
            urlConnection.setDoInput(true); 
            urlConnection.connect(); 

            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); 
            DocumentBuilder db = dbf.newDocumentBuilder(); 
            doc = db.parse(urlConnection.getInputStream()); 
          //  doc = db.parse(url.openStream());
            if(doc.getElementsByTagName("GeometryCollection").getLength()>0) 
            { 
            //String path = doc.getElementsByTagName("GeometryCollection").item(0).getFirstChild().getFirstChild().getNodeName(); 
            String path = doc.getElementsByTagName("GeometryCollection").item(0).getFirstChild().getFirstChild().getFirstChild().getNodeValue() ; 
            Log.d("xxx","path="+ path); 
            String [] pairs = path.split(" "); 
            String[] lngLat = pairs[0].split(","); // lngLat[0]=longitude lngLat[1]=latitude lngLat[2]=height 
            // src 
            GeoPoint startGP = new GeoPoint((int)(Double.parseDouble(lngLat[1])*1E6),(int)(Double.parseDouble(lngLat[0])*1E6)); 
            mMapView01.getOverlays().add(new MyOverLay(startGP,startGP,1)); 
            GeoPoint gp1; 
            GeoPoint gp2 = startGP; 
            for(int i=1;i<pairs.length;i++) // the last one would be crash 
            { 
            lngLat = pairs[i].split(","); 
            gp1 = gp2; 
            // watch out! For GeoPoint, first:latitude, second:longitude 
            gp2 = new GeoPoint((int)(Double.parseDouble(lngLat[1])*1E6),(int)(Double.parseDouble(lngLat[0])*1E6)); 
            mMapView01.getOverlays().add(new MyOverLay(gp1,gp2,2,color)); 
            Log.d("xxx","pair:" + pairs[i]); 
            } 
            mMapView01.getOverlays().add(new MyOverLay(dest,dest, 3)); // use the default color 
            } 
            } 
            catch (MalformedURLException e) 
            { 
            e.printStackTrace(); 
            } 
            catch (IOException e) 
            { 
            e.printStackTrace(); 
            } 
            catch (ParserConfigurationException e) 
            { 
            e.printStackTrace(); 
            } 
            catch (SAXException e) 
            { 
            e.printStackTrace(); 
            } 
    } 
```

# c# - 如何在C#中使用确认框的输入

> ID：11842862
> 
> 赞同：-2
> 
> 时间：2012-08-07T09:22:17.940
> 
> 标签：c#, javascript

在这里，我使用 javascript 询问是否在 javascript 中替换文件......现在我如何使用 c# 代码中的输入来替换文件或取消它。

```
Response.Write("<script type='text/javascript'>confirm('FiileAlready existing Rplace it?')</script>");
Response.Flush(); 
```

我应该将输出传达给 c# 是否是来自 javscript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:27:21.077

您无法在代码隐藏中传达确认的输出。一种方法是在确认后发出 ajax 请求，以便您可以在代码隐藏中进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:31:54.160

您采取的方法意味着响应被丢弃。

除了需要在 JavaScript 变量中捕获响应之外，您还需要将其传送到 C# - 有多种方法可以做到这一点（带有自动提交的隐藏输入的表单、更改为 URL、使用 AJAX 调用 web方法等）。

本质上，您需要编写更多的 JavaScript 来支持您选择的任何方法，以便将数据传输到服务器端。

# java - Jersey 未调用 JsonParseExceptionMapper

> ID：11842863
> 
> 赞同：1
> 
> 时间：2012-08-07T09:22:21.043
> 
> 标签：java, json, jersey, jackson

我使用 Jersey 和 Jackson 来实现我的服务器提供的 RESTful 服务。数据在客户端和服务器之间交换为 JSON 文档。Jackson 在 JSON 文档和 POJO 之间进行映射。这很好用。

但是我遇到了一个问题。使用格式错误的 JSON 文档调用服务时，服务器返回 500 错误。我预计会出现 400 BAD-Request 错误。在 Jersey 文档中的一些搜索向我展示了 ExceptionMappers 可用于存档此行为。我还发现 Jackson 已经有一个实现 JsonParseExceptionMapper 但它永远不会被调用。

我是否必须注册映射器，如果是，我该如何在源代码之外执行此操作。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:56:11.320

好的，我发现了如何注册映射器类。

在注册 Jersery ServletContainer 的 web.xml 中，您必须在包名称`org.codehaus.jackson.jaxrs`旁边传递 Jackson 包名称，例如`com.example.myapp.api;`。然后服务器在启动时扫描这些包并注册它找到的侦听器。

```
<servlet>
        <servlet-name>Jersey</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.example.myapp.api;org.codehaus.jackson.jaxrs</param-value>
        </init-param>
</servlet> 
```

# iphone - 苹果市场接受带有 nsTimer 的定位跟踪应用程序

> ID：11842866
> 
> 赞同：0
> 
> 时间：2012-08-07T09:22:33.517
> 
> 标签：iphone, background, geolocation, nstimer

我创建了这个位置跟踪应用程序，它在后台使用 nstimer 每 4 分钟获取一次位置。我想知道在市场上提交应用程序是否会有任何问题。如果您对此有所了解，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:27:52.327

我已经通过了一个应用程序。您必须确保用户准确了解正在发生的事情。所以对话必须非常具体，并有适当的隐私政策。

如果这是您的应用程序的永久状态，则 4 分钟有点极端。如果他们在应用程序审查期间发现它，我认为 Apple 不会允许这样做。仅仅根据运动进行更新还不够吗？IE。重要的位置更改API？

我这样做的应用程序使用显着位置更改 api 进行后台位置跟踪，然后如果应用程序实际打开，则将其提升到更高频率的跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:35:09.243

如果它与您的应用程序正在做什么相关，我认为这不会是一个问题。
这是来自 Apple 的[App Store 审查指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)：

> 4.1 收集、传输或使用位置数据前未通知并征得用户同意的应用将被拒绝
> 
> 4.2 使用基于位置的 API 对车辆、飞机或其他设备进行自动或自主控制的应用程序将被拒绝
> 
> 4.3 使用基于位置的 API 进行调度、车队管理或紧急服务的应用程序将被拒绝
> 
> 4.4 位置数据只能在与应用程序向用户提供的功能和服务直接相关或支持批准的广告用途时使用

但请注意，如果您希望您的应用即使在后台也能继续获取位置更新，则需要在您的 plist 文件中声明这一点，否则当应用进入后台时，您将无法获取位置更新。

> **声明应用支持的后台任务**
> 
> 对某些类型的后台执行的支持必须由使用它们的应用程序提前声明。应用程序使用其 Info.plist 文件声明对服务的支持。将 UIBackgroundModes 键添加到 Info.plist 文件中，并将其值设置为包含一个或
> 
> **位置**——该应用程序让用户随时了解他们的位置，即使它在后台运行时也是如此。

# javascript - 使用 html 和 javascript 的谷歌地图设置标记

> ID：11842869
> 
> 赞同：0
> 
> 时间：2012-08-07T09:22:35.627
> 
> 标签：javascript, html, google-maps-api-3, doctype

我最近开始在谷歌地图上工作。到目前为止我所做的是在谷歌地图上获取当前位置（位置）。它工作正常并成功显示当前位置。但是当我将“！DOCTYPE html”标签放在我的 html 代码的第一行时，地图不会显示。

另外，当我在文档中使用“！DOCTYPE html”标签时，我用“px”（像素）替换了 div 标签“style”属性中的“%”，但它没有用。

我同时使用 Google Chrome（版本 21.0.1180.41）和 Firefox（版本 14.0b12）网络浏览器来显示地图，但对它们中的任何一个都不起作用。可能的原因是什么？请回答。谢谢！

# eclipse - 带有内容属性的 Eclipse 介绍/欢迎页面定义找不到文件

> ID：11842871
> 
> 赞同：1
> 
> 时间：2012-08-07T09:22:46.050
> 
> 标签：eclipse, eclipse-rcp, rcp, eclipse-pde

在我的插件/RCP 中，我用顶层 xml 中的页面定义定义了我自己对 Eclipse 通用介绍的贡献（由 org.eclipse.ui.intro.configExtension 的“configExtension”元素的“config”属性指向的那个）扩展点），这是有效的。

但是，我想将页面定义拆分为单独的文件，以便于编辑和管理。

所以我从（在我的 intro/introcontent.xml 中）开始：

```
<page id="myfirststeps" style="$theme$/html/firststeps.css" style-id="page">
    <!-- Page content here -->
</page> 
```

这有效。简介正确显示页面内容。然后我将页面内容移动到 firststeps.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<introContent>
    <page id="myfirststeps" style="$theme$/html/firststeps.css" style-id="page">
        <!-- Page content here -->
    </page>
</introcontent> 
```

并将顶层 xml 更改为：

```
<page id="myfirststeps" content="intro/firststeps.xml" /> 
```

不起作用。运行它会创建一个“找不到文件”异常，并且指示的文件指向 Eclipse 安装（如“C:\Program Files\Eclipse”），而不是我对插件的预期。果然，如果我在那里复制我的 xml 文件，它就会找到它。

任何指针？关于内容属性以及它如何解析文件路径是否有一些技巧？

或者有没有办法在内容属性中指定插件目录的路径？

我正在使用 Eclipse 3.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:55:55.313

原来解决方案很简单。content 属性中的文件引用是相对于引用的 xml 文件，*而不是*相对于插件根目录。

所以我所要做的就是删除路径的“介绍”部分。从

```
<page id="myfirststeps" content="intro/firststeps.xml" /> 
```

到

```
<page id="myfirststeps" content="firststeps.xml" /> 
```

一切都很好。

# php - Joomla2.5 - 在 Google Map v2 中无法使用 GClientGeocoder

> ID：11842874
> 
> 赞同：0
> 
> 时间：2012-08-07T09:22:55.940
> 
> 标签：php, javascript, google-maps, joomla2.5

我在 joomla 2.5 中工作，我必须为*Google map*创建一个模块并使用*Google map api v2*。

我正在使用 `geocoder = new GClientGeocoder();`，但它现在正在工作

输出图像：-![在此处输入图像描述](../Images/92683e93c0fb6f379eeb37c760722a32.png)

我的html`<div>`标签

```
<div id="map_canvas" style="width: 800px; height:800px;"></div> 
```

我的剧本

```
<script>

    //<![CDATA[
    var map = null;
    var geocoder = null;

    function initialize() {

        if (GBrowserIsCompatible()) {

        //calls map to appear inside <div> with id, "map_canvas"
        map = new GMap2(document.getElementById("map_canvas"));

        //adds zoom and arrow controls to map

        geocoder = new GClientGeocoder();

        map.setMapType(G_SATELLITE_MAP);

        var allAddress = "Dubai~Abu Dhabi";
        var addresses = new Array();
        addresses = allAddress.split("~");  

        var curIndex = 0;

        function showAddress() {

          var _cur = addresses[curIndex];

          geocoder.getLatLng(
            _cur,
            function(point) {
            alert(_cur);
              if (!point) {
            alert(_cur + " not found");
              } else {
            alert(_cur+":"+point);

              }
              //do next after done
              curIndex++;
              if(curIndex<addresses.length)
            showAddress();
            }
          );
        }

        showAddress();
         }  
}
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:54:02.610

请参阅下面的代码并尝试一下。

我正在使用 php 静态数组，您可以连接数据库并根据您的要求创建数组。请参阅下面的数组。

```
<?php  $item = array('jaipur, rajasthan,india', 'udaipur, rajasthan,india'); ?> 
```

在我的代码下面看看。

```
<html>
    <head>
        <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=AIzaSyDwFjOazEAe1MI7nHV6vUwkWytOp8LH2Zk" type="text/javascript"></script>
    </head>
    <body onload="initialize();">
    <?php  $item = array('jaipur, rajasthan,india', 'udaipur, rajasthan,india'); ?>
    <script>
    var map = null;
    var geocoder = null;

    function initialize() {
            if (GBrowserIsCompatible()) {

                    map = new GMap2(document.getElementById("map_canvas"));
                    var addresses = ["<?php echo implode ('","', $item); ?>"]

                    var geocoder = new GClientGeocoder();
                    //var addresses = ["A II Z, Ibn Battuta Mall, Sheikh Zayed Road, 5th Interchange, Jebel Ali Village, Dubai","A. Testoni,Dubai Festival City Mall, Ground Floor, Dubai", "Abdulla Hussain Khunji, The Dubai Mall,Downtown, Abu Dhabi"];
                    var curIndex = 0;

                    function showAddress() {
                      var _cur = addresses[curIndex];
                      geocoder.getLatLng(
                        _cur,
                        function(point) {
                          if (!point) {
                            //alert(_cur + " not found");
                            //map.setCenter(new GLatLng(0, 0), 6);
                            //map.setUIToDefault();
                          } else {
                            //console.log(_cur+":"+point);
                            //alert(_cur);
                                    var cafeIcon = new GIcon(G_DEFAULT_ICON);

                                    // Set up our GMarkerOptions object
                                    markerOptions = { icon:cafeIcon };

                                    map.setCenter(point, 6);
                                    var marker = new GMarker(point, markerOptions);
                                    map.addOverlay(marker);

                                    var sales = new Array();
                                    sales = _cur.split("|");

                                    //Add click event on push pin to open info window on click of the icon
                                    GEvent.addListener(marker, "click", function() {
                                            marker.openInfoWindowHtml("<p class='para1bold' style=\"font-weight: bold;\">Address <br /><span class='para1' style='font-weight:normal;'>" + sales[1] + "</span></p>");
                                    });
                                    //Provides map,satellite,hybrid and terrain views in the map along with zoom control

                                    map.setUIToDefault();
                          }
                          //do next after done

                          curIndex++;

                          if(curIndex<addresses.length)
                            showAddress();
                        }
                      );
                    }
                    showAddress();
       }  
    }
    </script>
    <div id="map_canvas" style="width:100%; height:750px;"></div>
  </body> 
</html> 
```

# android - 在 Android 上可靠的顺序音频播放

> ID：11842876
> 
> 赞同：0
> 
> 时间：2012-08-07T09:23:09.820
> 
> 标签：android, audio, media-player, playback, sequential

我正在写一个教孩子数数的安卓游戏。指令是通过声音片段向玩家朗读的，这些声音片段组合在一起形成句子（例如“Place”、“one”、“cow”、“in the”、“barn”。这需要一定的可靠性。涉及延迟，因此指令流听起来很自然。

目前我正在使用 MediaPlayer，在 OnCompletionListener 中播放每个声音。每个声音都有它自己的 MediaPlayer，它是在任何声音开始播放之前创建和准备的（以减少延迟） - 但在第一次播放每个声音之前我仍然会出现明显的延迟（第二次似乎某种缓存有发生并且工作正常）。

声音不是很多而且很短，它可能与 SoundPool 一起工作得更好，但 SoundPool 无法知道音频何时完成，因此不是一个选项。

有没有人有类似问题的经验和可行的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:50:56.613

我已经使用`handler`过，`OnCompletionListener`并且它可以很好地在两个声音之间提供延迟。

这边走，

```
CommonMethod.player.setOnCompletionListener(new OnCompletionListener() {

                            @Override
                            public void onCompletion(MediaPlayer mp) {
                                // /will use count and loop as per number of
                                // repetition chosen.
                                handler.postDelayed(new Runnable() {

                                    public void run() {
                                        if (counter >= limit) {
                                            CommonMethod.player.stop();
                                        } else {
                                            CommonMethod.player.start();
                                        }
                                        counter++;
                                    }
                                }, 3000);
                            }
                        }); 
```

# php - 使用 Ajax 设置会话变量

> ID：11842877
> 
> 赞同：0
> 
> 时间：2012-08-07T09:23:17.467
> 
> 标签：php, ajax, codeigniter, jquery

我有一个弹出表单，用户在其中提供访问页面的密钥。一旦用户提供了正确的密钥，我想将密钥放入会话变量中，并且只要会话处于活动状态，如果用户刷新页面，弹出窗口就不会出现增益。我试过的是

我的 jQuery

```
<script>
$(document).ready(function() {
    $('#submit').click(function(e) {
        var key = $('#downloadkey').val();
        var box_id = $('#box_id').val();
        var dataString = {KEY:key, BID:box_id};
        $.ajax({
            url: "/mediabox/home/validate_key",
            type: 'POST',
            data: dataString,
            success: function(msg) {
                if(msg=="false"){
                   alert("Your download key is either wrong or you didn't provide it");
                }
                else{
                    $('#popupContact').hide();
                    $('#backgroundPopup').hide();
                }
            }
        });
    e.preventDefault();      
    });
});
</script> 
```

我的家庭控制器 validate_key 功能

```
function validate_key(){
    $key = strtolower($this->input->post('KEY'));
    $id = $this->input->post('BID');
    $query = $this->db->get_where('mc_boxes', array('idmc_boxes' => $id));
    $row = $query->row();
    $download_key = strtolower($row->downloadkey);
    if($download_key == $key){
       $_SESSION['download_key'] = $key;
       $_SESSION['timeout'] = time();
    }
    else{
        echo 'false';
    }
} 
```

在 validate_key 函数中，如果用户提供的密钥与数据库中的密钥匹配，我在会话变量中设置了密钥。

我加载弹出窗口的脚本

```
if($download_key != null && !isset($_SESSION['download_key'])){?>
        <script type="text/javascript">
            $(document).ready(function(){  
                loadPopup();    
            });  
        </script>
} 
```

loadpopup JS函数是

```
 var popupStatus = 0; 
 //loading popup with jQuery magic!
 function loadPopup(){
 //loads popup only if it is disabled
   if(popupStatus==0){
      $("#backgroundPopup").css({
      "opacity": "0.7"
   });
   $("#backgroundPopup").fadeIn(1000);
   $("#popupContact").fadeIn(1000);
   popupStatus = 1;
 }
} 
```

问题是一旦我提供了正确的密钥，然后我刷新页面它再次加载弹出窗口如何在提供正确的密钥后阻止它一次又一次地加载？

提前致谢

# android - 在android os中可以同时处理多少个手指触摸？

> ID：11842879
> 
> 赞同：0
> 
> 时间：2012-08-07T09:23:21.030
> 
> 标签：android, operating-system, touch

我想在安卓平板电脑上同时处理五个手指的触摸事件。我能怎么做？感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:27:11.267

这因设备而异。您必须使用可用的触控 API 来测试此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:28:45.880

通常 - 10，取决于设备和驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:32:01.327

您可以使用[MotionEvent.getPointerId()](http://developer.android.com/reference/android/view/MotionEvent.html#getPointerId(int))和[MotionEvent.getPointerCount()](http://developer.android.com/reference/android/view/MotionEvent.html#getPointerCount())来处理多点触控事件。

# c# - Mono 分析器以意想不到的方式改变程序的执行

> ID：11842883
> 
> 赞同：2
> 
> 时间：2012-08-07T09:23:31.670
> 
> 标签：c#, f#, mono, profiling

我用 C# 编写了一个程序。它使用 F# 映射。

该程序运行良好，没有错误。但是，当我尝试使用以下内容对其进行分析时：

```
mono --profile=log:report Program.exe 
```

我收到以下错误：

```
[ERROR] FATAL UNHANDLED EXCEPTION: System.ArgumentException: Object is not a Bar 
 at Test.Bar.CompareTo (System.Object obj) [0x00000] in <filename unknown>:0 
 at 
 Microsoft.FSharp.Core.LanguagePrimitives+HashCompare.GenericCompare$cont@923-1       
(Microsoft.FSharp.Core.GenericComparer comp, System.Object yobj, System.Object xobj,   
IComparable x, Microsoft.FSharp.Core.Unit unitVar) [0x00000] in <filename unknown>:0 
at Microsoft.FSharp.Core.LanguagePrimitives+HashCompare.GenericCompare 
(Microsoft.FSharp.Core.GenericComparer comp, System.Object xobj, System.Object yobj)
[0x00000] in <filename unknown>:0 
at 
Microsoft.FSharp.Core.LanguagePrimitives
+HashCompare.GenericComparisonWithComparerIntrinsic[Bar] 
(IComparer comp, Test.Bar x, Test.Bar y) [0x00000] in <filename unknown>:0
at   
Microsoft.FSharp.Core.LanguagePrimitives+HashCompare.GenericComparisonIntrinsic[Bar]
(Test.Bar x, Test.Bar y) [0x00000] in <filename unknown>:0 
at Microsoft.FSharp.Core.LanguagePrimitives+-cctor@2099-1[Test.Bar].Compare 
(Test.Bar   x, Test.Bar y) [0x00000] in <filename unknown>:0 
at Microsoft.FSharp.Collections.MapTreeModule.add[Bar,Foo] (IComparer`1
comparer, Test.Bar k, Test.Foo v, Microsoft.FSharp.Collections.MapTree`2
m) [0x00000] in <filename unknown>:0 
at Microsoft.FSharp.Collections.MapTreeModule.mkFromEnumerator[Bar,Foo] 
(IComparer`1 comparer, Microsoft.FSharp.Collections.MapTree`2 acc, IEnumerator`1 e)
[0x00000] in <filename unknown>:0 
at Microsoft.FSharp.Collections.MapTreeModule.ofSeq[Bar,Foo] (IComparer`1   
comparer, IEnumerable`1 c) [0x00000] in <filename unknown>:0 
at Microsoft.FSharp.Collections.FSharpMap`2[Test.Bar,Test.Foo]..ctor 
(IEnumerable`1 elements) [0x00000] in <filename unknown>:0 
```

似乎只有当我使用探查器运行程序时，才会调用类 Bar 的方法 CompareTo(object obj)，而某些东西似乎不是 Bar。

该方法通过以下方式实现：

```
public int CompareTo(object obj) 
{
    if (obj == null) return 1;

    Bar otherBar = obj as Bar;
    if (otherBar != null) 
        return this.CompareTo(otherBar);
    else
        throw new ArgumentException("Object is not a Bar!");
} 
```

如上所述，如果没有分析，则不会发生此错误。

mono --version 给出：

```
Mono JIT compiler version 2.10.5 (Debian 2.10.5-1)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
       TLS:           __thread
       SIGSEGV:       altstack
       Notifications: epoll
       Architecture:  x86
       Disabled:      none
       Misc:          softdebug 
       LLVM:          supported, not enabled.
       GC:            Included Boehm (with typed GC and Parallel Mark) 
```

更新：

```
mono --profile=log:sample Program.exe
mono --profile=log:nocalls Program.exe 
```

两者都有效。但是，我也想让标准分析器工作。

这是 Mono 中的错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:00:50.663

根据[跨平台包的 F# 官方页面，](http://fsxplat.codeplex.com/wikipage?title=FSharpLinux&referringTitle=Home)您应该使用 Mono 2.10.9 或更高版本。

所以先尝试升级单声道。

# python - 在python中使用正则表达式忽略列表中的字符串

> ID：11842885
> 
> 赞同：0
> 
> 时间：2012-08-07T09:23:40.033
> 
> 标签：python, list

我正在从网站获取一些信息，例如我正在获取一些客户的地址

```
address = ['Mr Thomas',
 '+(91)-9849633132, 9959455935',
 '+(91)-9849633132',
 '9196358485',
 '8846853128',
 '8-4-236/2'] 
```

从上面的列表中，我想忽略`+(91) and 9 and 8`以电话号码开头的字符串，所以我使用了如下的正则表达式

```
import re

result = [i for i in address if not re.match(r"[98]\B", i)] 
```

**结果**

```
['Mr Thomas','+(91)-9849633132, 9959455935','+(91)-9849633132','8-4-236/2'] 
```

那就是以开头的字符串`9 and 8`被忽略，但我也想忽略以开头的字符串`+(91)`，谁能告诉我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:31:34.023

只需添加另一个检查 +(91)，使用 | （或）运算符。像这样：

```
>>> [i for i in address if not re.match(r"[98]\B|\+\(91\)\B", i)]
['Mr Thomas', '8-4-236/2'] 
```

请注意，您必须转义 +、( 和 )，因为它们是特殊字符。

顺便说一句，使用过滤器可能更有效，而不是列表推导：

```
>>> filter(lambda x: not re.match(r"[98]\B|\+\(91\)\B", x), address)
['Mr Thomas', '8-4-236/2'] 
```

虽然我不能确定。

编辑：看起来效率不高。但是，我发现它更像是自我记录，但您可以随意使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:27:24.613

```
result = [i for i in address if not re.match(r"\+[98]\B", i)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:28:11.700

这确实有效：

```
 result = [i for i in s if not re.match(r'[+89][-()+0-9/\s]+',i)] 
```

为什么？'\B' 开关在这里是有害的，因为匹配不能出现在字符串的开头。此外，建议的搜索模式允许数字内有空格。

# autocomplete - 谷歌自定义搜索引擎不会在自动完成中显示所有关键字

> ID：11842890
> 
> 赞同：0
> 
> 时间：2012-08-07T09:23:54.660
> 
> 标签：autocomplete, search-engine

我的网站上有一个问题。我将 google 搜索引擎设置为自动完成，所以当用户键入任何键时，相关关键字会显示，但我的 google 搜索框不会显示所有关键字，而只显示几个关键字。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:43:34.920

1.  可能是因为互联网连接速度慢
2.  当然，谷歌网站自动完成的结果与谷歌自定义自动完成的结果不同

# shell - 全局替换 shell 脚本不起作用

> ID：11842893
> 
> 赞同：2
> 
> 时间：2012-08-07T09:24:11.197
> 
> 标签：shell, ubuntu, sed

我有一个shell脚本，如：

```
for fl in /home/dr/*.txt; do
mv $fl $fl.old
sed 's#$1#$2#g' $fl.old > $fl
rm -f $fl.old
done 
```

我运行它`./script.sh find replace`，但没有任何反应，也没有输出。为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:07:30.023

这可能对您有用（GNU sed）：

```
sed -i "s#$1#$2#g" /home/dr*.txt 
```

您遇到的问题是 sed 命令周围的单引号不允许插值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T09:32:05.690

问题是您使用的是单引号而不是双引号。使用单引号，`sed`按字面意思解释字符串（即它将搜索字符串`$1`，而不是第一个参数）。

以下是您尝试执行的操作的功能版本。请注意，我已经用 sed 的“就地”编辑替换了临时文件使用。

```
for fl in /home/dr/*.txt
do
  sed -i "s#$1#$2#g" $fl
done 
```

但是，**你可以单线一切**！

```
sed -i "s#$1#$2#g" /home/dr/*.txt 
```

# extjs - 使用 extjs 4.1 在多个网格和下拉列表上使用单个商店

> ID：11842900
> 
> 赞同：1
> 
> 时间：2012-08-07T09:24:31.853
> 
> 标签：extjs, extjs4.1

我有一个商店“联系人”。在我的应用程序中，我在 2 个网格和 1 个组合框中使用它。在这些组件中的每一个都有不同的屏幕空间，所以我需要定义 pageSize。这种情况的最佳实践是什么。创建 3 个不同的商店是否更好。（我正在使用 MVC）。如果是这样，是否有命名约定。

**编辑**

目前我在控制器的 onLaunch 方法中加载商店

```
 var partsStore = this.getPartsStore();
        partsStore.pageSize = 15;
        partsStore.load({
            scope: this
        }); 
```

并在我看来引用这家商店

```
Ext.define('Mis.view.JobPartList', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.jobpartlist',
    store: 'Parts', 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:08:44.867

是的，您应该创建多个商店实例。不确定您对命名约定的含义，无论您有 1 个还是多个实例，商店名称都应该保持不变。

根据您在上面发布的代码，它不会起作用，因为通过将其添加到类定义中，您会告诉它显式共享商店。

```
Ext.define('Foo', {
    // ...
    initComponent: function(){
        this.store = new MyStoreType();
        // ...
        this.callParent();
    }
}); 
```

# image - 使用 HTML5 的客户端图像裁剪和旋转解决方案

> ID：11842902
> 
> 赞同：1
> 
> 时间：2012-08-07T09:24:44.233
> 
> 标签：image, html, canvas, html5-canvas

是否有任何基于 HTML5 画布 API 的图像裁剪器。我想要的是旋转和裁剪。其实我也写过一篇，但不是很喜欢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:27:23.533

Pixastic 有[裁剪功能](http://www.pixastic.com/lib/docs/actions/crop/)，这对你有用吗？

# javascript - 如何使用 jqplot 更改饼图的圆圈大小？

> ID：11842905
> 
> 赞同：2
> 
> 时间：2012-08-07T09:24:51.317
> 
> 标签：javascript, jquery, jquery-mobile, jqplot

我不知道如何更改圆圈大小。

在我的图表中，圆圈非常小。

我想要一个比现在更大的圈子。

**代码前：**

```
 plot2 = jQuery.jqplot('PieChart',[ ticks ,rs_money], 
{
     grid: {
            drawBorder: false, 
            drawGridlines: false,
            background: 'transparent',

            shadow:false
        },
        axesDefaults: {

        },
        seriesDefaults:{
            renderer:$.jqplot.PieRenderer,
            rendererOptions: {
                showDataLabels: true,
                startAngle: 180, 
                sliceMargin: 2

            }
        },

  legend: {  fontSize:'11px',show:true,location: 's', labels:ticks}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:21:32.840

我通过 CSS 更改圆圈的大小。馅饼本身设置为随着 div 缩小或增长，只要它不太小。尝试使用宽度和高度设置 div 的样式，看看这是否是您想要的。

```
<div id="pieChart" style="width:50%;height:50%;"></div> 
```

您也可以进入 jqplot.pieRenderer.js 并查找

```
this.diameter=null;this.padding=20; 
```

可以将空值更改为您喜欢的任何数字以使圆圈变大。如果你让它比你的 div 大，它就会超出 div 的范围。您还可以更改填充以使圆圈在 div 中占据更多空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-22T08:56:05.207

查看他们的文档：

[http://www.jqplot.com/docs/files/jqPlotOptions-txt.html](http://www.jqplot.com/docs/files/jqPlotOptions-txt.html)

```
seriesDefaults: {
        rendererOptions: {
            diameter: <your value>, // diameter of pie, auto computed by default. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T22:13:15.640

```
 table.jqplot-table-legend {
    table-layout: fixed;
}

td.jqplot-table-legend-label
{
   max-width:100px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T05:18:58.543

```
 seriesDefaults: {
            renderer: jQuery.jqplot.PieRenderer,
            rendererOptions: {
              padding: 10
            }
    } 
```

您可以使用填充选项来减少空间。通过更改填充可以更改饼图的大小。

# c++ - C++，数组中的错误

> ID：11842908
> 
> 赞同：-2
> 
> 时间：2012-08-07T09:25:04.820
> 
> 标签：c++, arrays, string

我分配了数组

```
char words[100][100]; 
```

现在我想在行中保存一个单词及其位置。说行有“嗨，我是程序员”。现在我想保存

```
string word;

while(line){
//called a function to get the word and position.
words[word]["pos"] = pos;
} 
```

我已经拆分`words`并保存在字符串`word`中，但是当我尝试保存时出现错误。

```
"No viable overloaded operator[] for type 'char[100][100]" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:30:01.703

您正在尝试`array`用作`map`. 您不能将字符串用作数组索引。你需要的结构是`std::map<std::string, std::map<std::string, int> >`

```
std::map<std::string, std::map<std::string, int> > m;
m["foo"]["bar"] = 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:31:08.110

`char[100][100]`是单个字符的多维数组，可用于存储固定长度的字符串。它可以使用*整数*变量而不是字符串来索引。

看起来你想使用`std::map<std::string, std::map<std::string, int> >`或类似的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:31:30.187

您不能将字符串用作 C++ 数组中的索引。你需要的是一张地图：

```
std::map< std::string, std::map<string, int> > words; 
```

然后你必须：

```
words[word]["pos"] = pos; 
```

但是，除了 之外，您还会保存哪些其他数据`pos`？如果不是，那你为什么要把它做成二维数据结构呢？难道你不能：

```
positions[word] = pos; 
```

`positions`类型在哪里`std::map<std::string, int>`。

**编辑：正如***Mike*所指出的，不再使用指针。

# css - 图像顶部的图像 css

> ID：11842911
> 
> 赞同：0
> 
> 时间：2012-08-07T09:25:14.920
> 
> 标签：css, image

我设计了一个网站。如您所见，learnmore 图像并没有出现在幻灯片图像之上。

你有以下php代码

```
<?php
$directory = 'uploads'; 
 $learnmore_img_path='learnmore';
echo'<div style="position: relative; ">';
 try {    
// Styling for images

 echo "<div id=\"myslides\" style='position: relative; z-index:99999;'>";

foreach ( new DirectoryIterator("../" . $directory) as $item )       {          
    if ($item->isFile()) {
        $path = "/" . $directory . "/" . $item;

        echo "<img src=\"" . $path . "\" width=861 height=443  href='#' style='position: relative;'/>";

            $learnmore_img_path='learnmore';
        $path1="/" . $learnmore_img_path . "/" . 'learnmore.jpg';       

    }       
}
 echo "</div>";
    $path1="/" . $learnmore_img_path . "/" . 'learnmore.jpg';   

  echo '<a href="#" id="examplelink">';
  echo "<img src=\"" . $path1 . "\" width=160 height=30   style='z-index:32111;;    p  osition: absolute; top: -75; left: 370;'/>";
 echo '</a>';
  echo "</div >";

  }
  catch(Exception $e) {
echo 'No images found for this player.<br />';
  }

  ?> 
```

我不知道为什么？是因为z-index吗？任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:42:01.550

您是否尝试过增加“了解更多”链接的 z-index ？

给包含幻灯片的 div 更少的 z-index 并给链接“了解更多”更大的 z-index 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:15:18.347

添加`position: relative`两个元素。`z-index`然后您可以使用（CSS）调整级别

# solr - apache nutch 不抓取网站

> ID：11842913
> 
> 赞同：1
> 
> 时间：2012-08-07T09:25:24.697
> 
> 标签：solr, web-crawler, nutch

我已经安装了用于网络爬取的 apache nutch。我想抓取具有以下内容的网站`robots.txt`：

```
User-Agent: *
Disallow: / 
```

有没有办法用 apache nutch 抓取这个网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:31:16.010

您可以在 nutch-site.xml 中将属性“Protocol.CHECK_ROBOTS”设置为 false 以忽略 robots.txt。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T06:14:31.187

在 nutch-site.xml 中，将 protocol.plugin.check.robots 设置为 false

或者

您可以注释掉机器人检查完成的代码。在 Fetcher.java 中，第 605-614 行正在进行检查。评论整个区块

```
 if (!rules.isAllowed(fit.u)) {
        // unblock
        fetchQueues.finishFetchItem(fit, true);
        if (LOG.isDebugEnabled()) {
          LOG.debug("Denied by robots.txt: " + fit.url);
        }
        output(fit.url, fit.datum, null, ProtocolStatus.STATUS_ROBOTS_DENIED, CrawlDatum.STATUS_FETCH_GONE);
        reporter.incrCounter("FetcherStatus", "robots_denied", 1);
        continue;
      } 
```

# hibernate - 精简 Liferay：删除 Hibernate 和其他未使用的应用程序

> ID：11842915
> 
> 赞同：3
> 
> 时间：2012-08-07T09:25:30.223
> 
> 标签：hibernate, liferay

我有一些关于 Liferay 与休眠的交互的问题。由于某些原因，我们希望从应用程序中消除这一层。因此有以下问题：

我知道 Liferay 与 Hibernate 打包在一起，并且使用 Hibernate API 简化了对 Liferay 数据库中数据的访问。

1.  它在多大程度上依赖它？
2.  可以拔掉吗？
3.  它需要多少开发工作？
4.  Liferay 使用其内部数据库的目的是什么？

首先，我们基本上想要删除几乎所有我们不需要的东西。

PS：我找不到合适的链接来回答上述问题，因此在这里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T11:05:01.870

> 它在多大程度上依赖它？

尽最大可能。因为，liferay 中的所有 portlet 在内部都使用 hibernate 来与数据库通信。

> 可以拔掉吗？

没有。不可能。

> 它需要多少开发工作？

见上面的答案。:-)。但是，如果您仍然认为可以通过从源代码自己构建门户来以某种方式做到这一点，那将是一个令人头疼的维护问题，您将如何处理升级......？

> Liferay 使用其内部数据库的目的是什么？

该数据库存储有关门户及其 OOTB portlet 的所有信息：如用户、角色、权限、PortletPreferences 和 PortalPreferences 等等......

我建议特别注意@fvu 的评论（第一个）。

# c - 未定义符号：在 C 中嵌入 Python 时出现 PyExc_ImportError

> ID：11842920
> 
> 赞同：6
> 
> 时间：2012-08-07T09:25:41.807
> 
> 标签：c, module, makefile, python-2.7, importerror

我正在开发一个调用 python 脚本的 C 共享库。当我运行应用程序时，我收到此错误：

```
Traceback (most recent call last):
  File "/home/ubuntu/galaxy-es/lib/galaxy/earthsystem/gridftp_security/gridftp_acl_plugin.py", line 2, in <module>
    import galaxy.eggs
  File "/home/ubuntu/galaxy-es/lib/galaxy/eggs/__init__.py", line 5, in <module>
    import os, sys, shutil, glob, urllib, urllib2, ConfigParser, HTMLParser, zipimport, zipfile
  File "/usr/lib/python2.7/zipfile.py", line 6, in <module>
    import io
  File "/usr/lib/python2.7/io.py", line 60, in <module>
    import _io
ImportError: /usr/lib/python2.7/lib-dynload/_io.so: undefined symbol: PyExc_ImportError 
```

如果我尝试从控制台导入模块 io 可以正常工作：

```
Python 2.7.1+ (r271:86832, Apr 11 2011, 18:13:53) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import galaxy.eggs
>>> 
```

在编译库期间，我使用了这里建议的编译器选项： [Embedding python in C, undefined symbol: PyExc_ImportError](https://stackoverflow.com/questions/4767057/embedding-python-in-c-undefined-symbol-pyexc-importerror) 此外，我还添加了从 python-config --includes|--libs|-- 获得的编译器选项cflags|--ldflags

在这里您可以找到库[http://pastebin.com/348rhBjM的 makefile 的日志](http://pastebin.com/348rhBjM)

非常感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-05-23T13:32:42.417

[@user1515248 解决方案](https://stackoverflow.com/a/11847653/52074)是[不鼓励](https://meta.stackexchange.com/a/8259/147407)使用的仅链接解决方案。我正在写这个答案以扩展他提供的链接并提供更充实的答案（这也支持他提供的链接）。

链接[https://mail.python.org/pipermail/new-bugs-announce/2008-November/003322.html](https://mail.python.org/pipermail/new-bugs-announce/2008-November/003322.html)说：

> 我得到了以下解决方法：在 mylib.c 中，在 `PyInitialize()`我可以调用之前`dlopen("libpython2.5.so", RTLD_LAZY | RTLD_GLOBAL)`；
> 
> 这行得通，但我相信 lib-dynload/*.so 应该依赖于 libpython2.5.so.1，所以这个 hack 应该是不必要的。
> 
> 我正在使用带有 Python 版本 2.5.2-2ubuntu4.1 的 Ubuntu 8.04。

我所要做的就是添加一行代码：

```
// new line of code
void*const libpython_handle = dlopen("libpython2.6.so", RTLD_LAZY | RTLD_GLOBAL);

PyInitialize(); 
```

ps 我在 CentOS-6 上。

pps My`PyInitialize()`被包装在一个类中，因此`dlopen()`/`PyInitialize()`在构造函数中完成，`dlclose()`/`PyFinalize()`在析构函数中完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:58:54.133

我找到了解决方案。也许对其他人有用。这是这里写的 python 的错误[http://mail.python.org/pipermail/new-bugs-announce/2008-November/003322.html](http://mail.python.org/pipermail/new-bugs-announce/2008-November/003322.html) 我使用了这里发布的解决方案[http://www.cilogon.org /gsi-c-authz](http://www.cilogon.org/gsi-c-authz)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:13:54.250

我使用这样的解决方法：从 lib-dynload 目录显式链接插件（很简单，然后在代码中显式 dlopen）。datetime.so 示例：

制作：

```
SET ( CMAKE_SHARED_LINKER_FLAGS "/usr/lib/python2.7/lib-dynload/datetime.so" ) 
```

或者只是在命令行中将 /usr/lib/python2.7/lib-dynload/datetime.so 作为链接器参数添加到 gcc：

```
g++ -shared -o libfoo.so foo.o -lbar -lzab /usr/lib/python2.7/lib-dynload/datetime.so 
```

# objective-c - https 上的 GET 错误？？无法设置 NSLocalizedRecoverySuggestion

> ID：11842921
> 
> 赞同：3
> 
> 时间：2012-08-07T09:25:45.547
> 
> 标签：objective-c, cocoa-touch, ipad, ios4

```
 NSURL *url = [NSURL URLWithString:@"https://myUrlString.com"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url]; 

    NSURLResponse *responseurl;
    NSError *err;
    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&responseurl error:&err]; 
    NSLog(@"data length:%u", data.length);
    NSLog(@"response:%@ , error:%@", responseurl, err); 
```

我得到的回应是：-

```
data length:0
response:(null) , 
```

错误：错误域=NSURLErrorDomain 代码=-1202 “此服务器的证书无效。您可能正在连接到伪装成“myUrlString.com”的服务器，这可能会使您的机密信息面临风险。” UserInfo=0x8742d70 {NSErrorFailingURLStringKey=https:https://myUrlString.com,

NSLocalizedRecoverySuggestion=你还是要连接到服务器吗？,

NSErrorFailingURLKey=https://myUrlString.com,

NSLocalizedDescription=此服务器的证书无效。您可能正在连接到伪装成“myUrlString.com”的服务器，这可能会使您的机密信息面临风险。NSUnderlyingError=0x8745bf0 " `The certificate for this server is invalid. You might be connecting to a server that is pretending to be “myUrlString.com” which could put your confidential information at risk.`", NSURLErrorFailingURLPeerTrustErrorKey=}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:15:58.393

您正在使用 Https 请求，因此您应该使用 ASIHTTPRequest 或者您可以尝试此代码

```
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];

[request setURL:[NSURL URLWithString:@"https:yoururl"]];
[request setHTTPMethod:@"GET"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:getData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T16:54:06.790

请参阅[技术说明 TN2232](https://developer.apple.com/library/ios/technotes/tn2232/_index.html)，了解如何正确解决 HTTPS 服务器信任问题，更重要的是，不该做什么。底线是他们鼓励您修复服务器以解决信任问题，而不是解决它。

如果您想暂时解决它（例如，您只是在使用诸如 Charles 之类的工具进行一些测试，您暂时拦截请求以执行诊断），您可以使用[私有方法关闭此验证](https://stackoverflow.com/a/3766796/1271826)（请注意，如果此代码在应用程序中提交到 App Store，他们可能会因为使用私有 API 而拒绝它）或者您可以[响应`NSURLConnection`委托方法](https://stackoverflow.com/a/2033823/1271826)。

同样，要非常小心地发送绕过此重要警告的代码，但如果在测试应用程序期间必须这样做，那么上述方法之一可能会很有用。

# javascript - 组织javascript代码

> ID：11842923
> 
> 赞同：13
> 
> 时间：2012-08-07T09:25:54.207
> 
> 标签：javascript, jquery

我正在制作一个 javascript 应用程序。通常我所做的是制作不同的模块并获取用户输入或`$(document).ready();`功能中的点击事件。这适用于小型应用程序。但是当我遵循相同的模式时，我的意思是让点击事件`$(document).ready();`变得混乱。

**那么如何为一个巨大的应用程序组织这个文件呢？**

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T09:39:24.153

我在这个主题上找到的最好的资源是 Addy Osmani 的知识共享书，[大型 JavaScript 应用程序架构模式](http://addyosmani.com/largescalejavascript/)。它基于 Nicholas Zakas 的[Scalable JavaScript Application Architecture](http://www.slideshare.net/nzakas/scalable-javascript-application-architecture)的一部分，使其适应经典设计模式和现代工作流程。

一旦您达到即使是中等程度的复杂性，您将受益于使用使用 MVC 架构模式的变体构建的框架。[Backbone.js](http://backbonejs.org/)是领先者，并且是一个微型框架，这意味着它比其他人更少牵手。其他流行的选择是[Ember.js](http://emberjs.com/)、[KnockoutJS](http://knockoutjs.com/)。

扩展和样板也建立在这些框架上，以处理重复性任务，例如数据/模型绑定和脚手架。[对于Backbone](https://github.com/derickbailey/backbone.marionette)，请查看来自 Derick Bailey 和[Backbone Aura](https://github.com/addyosmani/backbone-aura/)的 Backbone.Marionette ，这是对 Osmani/Zakas 架构模型的尚未完全投入生产的改编，使用 Backbone 作为其......好吧，主干。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T05:57:56.987

作为 JavaScript 一种脚本语言，结构是大型 Javascript 项目中最重要的问题之一。重要的是您的应用程序的各个部分都很好地解耦并且“自包含”。例如，您可以创建自己的 UI 组件，在单个文件夹中拥有自己的模板、逻辑、样式、本地化等。这种自包含将使您以可管理的方式组织复杂的前端代码。

一旦您组织好代码并自包含，您还需要解决其他问题。

*   这些松耦合的组件应该如何与非紧耦合交互
*   我应该如何优化这些单独的部分以在我的生产环境中快速加载

我是大型应用程序的 BoilerplateJS 参考架构的作者。

[http://boilerplatejs.org](http://boilerplatejs.org)

它包含了 Nicholas Zakas 演讲中讨论的大部分最佳实践。您还将在代码中找到模块化产品套件的示例实现。看一看，你就会明白在用 JavaScript 做大规模应用程序时需要注意的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-13T15:37:07.960

假设我们制作如下所示的跨平台应用程序 [![在此处输入图像描述](../Images/bd6be090d99de0e13ce51da01ef9830b.png)](https://i.stack.imgur.com/YiYkI.png)

很抱歉删除了脏内容。

我们希望它跨平台，所以我们用 JavaScript 编写它。我们希望我们的语法聪明、优雅和简洁，所以我们使用 jQuery。

我们的源码结构会是这样的

[![在此处输入图像描述](../Images/7bbac07e59492fc2e75ab3cfe718535f.png)](https://i.stack.imgur.com/zhtUe.png)

在`js`文件夹中，我们有三个文件夹：`controller`, `model`, `view`. 我们将应用程序分为三个（可以更多）部分：*main*、*menu*和*navbar*。

对于这些部分中的每一个，我们都有`...Ctrl.js`和`...View.js`。我们只有一个模型`mainModel.js`（以防万一）。

Ctrl.js 是您的处理程序以及将它们附加到控件的位置。例如`mainCtrl.js`：

```
app.mainCtrl = {
   model: app.mainModel,
  init: function(){

     $('#addButton').click(function(){
         this.model.addToFavorites();
     });
     $('#removeButton').click(function(){
         this.model.removeFromFavorites();
     });
  }
}; 
```

（上面截图右边的小星星其实是添加/删除按钮）

控制器可以同时保存对视图和模型的引用，也可以只保存对模型的引用（如上例所示）。

Model.js 是我们更新后端和视图的地方。例如`mainModel.js`：

```
app.mainModel = {

  view: app.mainView,
  all: {},
  favorites: {},
  init: function(){
   /* for example
   this.all = $.parseJSON ($.load('url'));
   this.favorites = $.parseJSON ($.load('url')); 
    */
      this.showAll();

  },
  showAll: function(){
       this.view.show(this.all);
  },
  showFavorites: function(){
       this.view.show(this.favorites);
  },
  addToFavorites: function(item){
      //add item to favorites
  },
  removeFromFavorites: function(item){
      //remove item from favorites
  }
}; 
```

`View.js`是我们实际更新视图的地方（通过直接操作 DOM）。**视图**的方法可以被相关的**控制器**和/或**模型**调用。例如`mainView.js`：

```
app.mainView = {
   show: function (items){
       //create new element for each item
   }
}; 
```

最后我们有了`app.js`初始化应用程序的文件：

```
var app = {
  init: function(){
      this.mainCtrl.init();
      this.menuCtrl.init();
      this.navbarCtrl.init();
      this.mainModel.init();
      this.navbarView.init();
  }  
}; 
```

我们的应用程序中只有一个全局变量`app`。**在应用**命名空间内创建的所有视图、控制器和模型。

最后，最后是导入的顺序。您应该首先导入`app.js`，因为它定义了`app`变量。

```
 <script src="vendor/js/jquery.min.js"/></script>
    <script src="js/app.js"/></script>
    <script src="js/controller/mainCtrl.js"></script>
    <script src="js/controller/menuCtrl.js"></script>
    <script src="js/controller/navbarCtrl.js"></script>
    <script src="js/view/mainView.js"></script>
    <script src="js/view/menuView.js"></script>
    <script src="js/view/navbarView.js"></script>
    <script src="js/model/mainModel.js"></script>

    <script>
        $(function(){
            app.init();
        });

    </script>    
   </body>
</html> 
```

# android - 在android应用程序中设置自定义字体

> ID：11842924
> 
> 赞同：3
> 
> 时间：2012-08-07T09:26:00.580
> 
> 标签：android, custom-font

是否可以一次性为整个 android 应用程序设置自定义字体。我的意思是我不想`setTypeFace`在每个活动中都使用每个文本视图。不仅是文本视图，还有所有可能的文本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T09:32:20.597

只需制作自己的 TextView：

```
public class CustomFontTextView extends TextView {

// make every constructor call init();

  private void init() {
   setTypeFace(...);
  }

} 
```

在 xml 中：

```
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent">
    <com.yourcompany.yourproject.views.CustomFontTextView
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:text="Test"/>
</LinearLayout> 
```

# java - java.lang.IllegalStateException。WebClassLoader 可能出现的错误

> ID：11842927
> 
> 赞同：2
> 
> 时间：2012-08-07T09:26:07.547
> 
> 标签：java, spring, exception, soap

我正在使用 Spring 开发一个 Web 应用程序，但我遇到了这个奇怪的错误。我不知道它来自哪里，我一直在用谷歌搜索，到目前为止一无所获。

在我正在使用的项目中：MongoDB、Spring、WSS4J（soap 的 X.509 安全标头）、Apache CXF。我一直在尝试发现是否有导致此错误的原因，任何特定的动作，行为，条件，但到目前为止我什么也没发现，有时会在运行 3 分钟后发生，有时会在 3 小时后发生，或者根本没有，任何线索和提示赞赏。

```
INFO: Illegal access: this web application instance has been stopped already.  Could not load net.sf.ehcache.store.disk.Segment$1\.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1597)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at net.sf.ehcache.store.disk.Segment$HashIterator.<init>(Segment.java:988)
    at net.sf.ehcache.store.disk.Segment.hashIterator(Segment.java:936)
    at net.sf.ehcache.store.disk.DiskStore$HashIterator.<init>(DiskStore.java:1038)
    at net.sf.ehcache.store.disk.DiskStore$KeyIterator.<init>(DiskStore.java:1111)
    at net.sf.ehcache.store.disk.DiskStore$KeyIterator.<init>(DiskStore.java:1111)
    at net.sf.ehcache.store.disk.DiskStore$KeySet.iterator(DiskStore.java:949)
    at net.sf.ehcache.store.disk.DiskStorageFactory$DiskExpiryTask.run(DiskStorageFactory.java:838)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:26:38.127

这意味着 ehcache 线程在应用程序停止或重新部署后尝试与应用程序交互。仅当 ehcache 达到您在 ehcache.xml 中的限制并试图溢出到磁盘时才会发生这种情况。

停止应用程序时查看 tomcat 日志以获取警告：

> 严重：Web 应用程序 [/APP] 似乎已经启动了一个名为 [Ehcache_Worker-1] 的线程，但未能停止它。这很可能造成内存泄漏

如果发现这样的东西，你应该在你的 ServletContextListener 中正确地停止 ecache：

```
public void contextDestroyed(ServletContextEvent servletContextEvent){
      CacheManager.getInstance().shutdown();
} 
```

之后可能会休眠 1 秒，以确保停止 ehcache。

如[http://ehcache.org/documentation/faq中所述](http://ehcache.org/documentation/faq)

> 如果停止使用 Ehcache 后 JVM 继续运行，则应调用 CacheManager.getInstance().shutdown() 以便停止线程并将缓存内存释放回 JVM。调用 shutdown 还可以确保您的永久磁盘存储以一致的状态写入磁盘，并且在下次使用时可用。如果 CacheManager 没有关闭，那应该不是问题。有一个关闭钩子，它在 JVM 退出时调用关闭。

或者您可以`overflowToDisk="false"`在 ehcache.xml 中设置属性或在每次部署应用程序时重新启动 tomcat。

# php - 无法使用命令行运行包含文件 PhP 脚本？

> ID：11842928
> 
> 赞同：2
> 
> 时间：2012-08-07T09:26:07.297
> 
> 标签：php

我有一个我想在 CLI（命令行界面）上运行的 php 脚本。我在 a 类的构造函数中使用了一些 echo 语句，并从那里调用它的父构造函数，我正在使用另一个 echo 语句。我看不到父类的回声语句，但是如果我用浏览器运行相同的脚本，我可以看到所有的回声。这是我的代码的一部分。

```
class CImportEmployeeScript extends CScripts {
function __construct() {
    echo "Child File Constructor";
    parent::__construct();
}
    ----
    ----
}

class CScripts {
function __construct() {
    echo "In Parrent File";
    }
    ----
    ----
} 
```

如果我的 php 文件（Child 和 Parrent）不使用相同的路径是他们上述问题的任何可能性..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:30:57.797

class **class CScripts**没有扩展任何东西，所以删除**parent::__construct();**

# iphone - 如何在 iPhone 应用程序中播放来自 htp url 的视频

> ID：11842929
> 
> 赞同：0
> 
> 时间：2012-08-07T09:26:12.907
> 
> 标签：iphone, xcode, video, mpmovieplayercontroller

我想在 iphone 应用程序中播放来自 url 的视频，但它不能在我使用以下代码的应用程序中播放

```
-(IBAction)play
{
     NSString*videoFilepath=@"http://myserver.com.pk/Specticle_Revision_v1.mov";
     NSLog(@"Filepath is: %@", videoFilepath);
     NSURL *videoURL = [NSURL fileURLWithPath:videoFilepath];   
     MPMoviePlayerController *movie = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];
     [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playbackFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:movie];
     [movie play];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:35:31.690

Looks like this:

```
NSURL *videoURL = [NSURL fileURLWithPath:videoFilepath]; 
```

Is your problem. Your "http://" - style URL is not a file URL. File URL's (on the local device / file system) begin with "`file:///`".

Try:

```
NSURL * videoURL = [NSURL URLWithString: videoFilepath]; 
```

and see if that works better.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:41:05.527

做这个：

```
NSURL *url = [NSURL URLWithString:@"http://myserver.com.pk/Specticle_Revision_v1.mov"];
MPMoviePlayerViewController *mp = [[MPMoviePlayerViewController alloc] initWithContentURL:url];

[[NSNotificationCenter defaultCenter] addObserver:self
                                 selector:@selector(moviePlaybackDidFinish:)
                                     name:MPMoviePlayerPlaybackDidFinishNotification
                                   object:mp];    

mp.moviePlayer.movieSourceType = MPMovieSourceTypeStreaming;

[self presentMoviePlayerViewControllerAnimated:mp];
[mp release]; 
```

# php - 如何将样式应用于 FOSUserBundle 中的注册表单

> ID：11842930
> 
> 赞同：3
> 
> 时间：2012-08-07T09:26:15.523
> 
> 标签：php, symfony, fosuserbundle

我正在使用 Symfony2 和 FOSUserBundle。

这个问题可以扩展到 FOSUserBundle 中的任何其他捆绑形式。

由于它就在捆绑包中，因此很容易使用 FOSUserBundle 中的**登录表单**。在这种情况下，您会看到完整的表格，您只需“复制”或在其他任何地方使用它并应用您想要的样式。这是它的样子：

```
<form action="{{ path("fos_user_security_check") }}" method="post">
<input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />
<label for="username">{{ 'security.login.username'|trans({}, 'FOSUserBundle') }}</label>
<input type="text" id="username" name="_username" value="{{ last_username }}" />
<label for="password">{{ 'security.login.password'|trans({}, 'FOSUserBundle') }}</label>
<input type="password" id="password" name="_password" />
<input type="checkbox" id="remember_me" name="_remember_me" value="on" />
<label for="remember_me">{{ 'security.login.remember_me'|trans({}, 'FOSUserBundle') }}</label>
<input type="submit" id="_submit" name="_submit" value="{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}" /> 
```

但是，例如，**注册表**如何？在这种情况下，这就是我们在捆绑包中得到的全部内容：

```
<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST" class="fos_user_registration_register"> 
```

{{ form_widget(form) }}

```
<input type="submit" value="{{ 'registration.submit'|trans({}, 'FOSUserBundle') }}" />

</div></form> 
```

[请注意，stackoverflow 没有正确解析最后一段代码，也没有正确地对其进行美化]

如您所见，所有表单都来自标签 {{ form_widget(form) }}，这就是我们渲染表单所需要的全部内容。

问题：如何以及在哪里可以更改该表单以适合我的样式、宽度、颜色等......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:32:40.910

RegistrationForm 是用 Symfony2 表单组件构建的，所以所有的定制都应该用它来完成。

这是关于这个主题的一个非常好的[食谱条目。](http://symfony.com/doc/current/cookbook/form/form_customization.html)

一个非常简单的例子：

```
<div class="pull-left input">
    {{ form_label(form.username) }}
    {{ form_widget(form.username) }}
</div> 

{{ form_rest(form) }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T02:58:46.557

您应该覆盖捆绑包模板（在这种情况下为 FOSUser）并在新模板中进行所有自定义，包括按照@Inorry 的建议处理表单组件呈现选项。可以在[此处](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_templates.md)的 FOS 文档中找到解释。

一般来说，以下内容就足够了：

1.  通过`layout.html.twig`在`app/Resources/FOSUserBundle/views/`.
2.  使用相同的模式覆盖您要自定义的任何其他模板：`foo.html.twig`by `app/Resources/FOSUserBundle/views/foo.html.twig`。
3.  例如，如果您想使用 Bootstrap 自定义登录表单，那么您可以创建`app/Resources/FOSUserBundle/views/Security/login.html.twig`：

    ```
    {% extends "FOSUserBundle::layout.html.twig" %}

    {% trans_default_domain 'FOSUserBundle' %}

    {% block title %}Login{% endblock %}

    {% block fos_user_content %}
    {% if error %}
        <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
    {% endif %}

    <form action="{{ path("fos_user_security_check") }}" method="post">
        <input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />
        <div class="form-group">
            <label for="username">{{ 'security.login.username'|trans }}</label>
            <input class="form-control" type="text" id="username" name="_username" value="{{ last_username }}" required="required" />
        </div>
        <div class="form-group">
            <label for="password">{{ 'security.login.password'|trans }}</label>
            <input class="form-control" type="password" id="password" name="_password" required="required" />
        </div>
        <div class="form-group">
            <input type="checkbox" id="remember_me" name="_remember_me" value="on" />
            <label for="remember_me">{{ 'security.login.remember_me'|trans }}</label>
        </div>

        <div class="form-group">
            <input class="btn btn-default" type="submit" id="_submit" name="_submit" value="{{ 'security.login.submit'|trans }}" />
        </div>
    </form>
    {% endblock fos_user_content %} 
    ```

4.  请注意将视图的结构保留在捆绑包下。`Security`这就是在文件夹下创建登录模板的原因。请记住：**必须**为每个自定义模板保留包中的结构。

5.  还要小心使用`{% extends "FOSUserBundle::layout.html.twig" %}`，因为原始模板被您的自定义模板所掩盖（如果基本假设失败，我会在较新版本的 Symfony 中检查这一点）。

# prolog - 错误：处理 Prolog 对列表时“超出全局堆栈”

> ID：11842933
> 
> 赞同：1
> 
> 时间：2012-08-07T09:26:21.617
> 
> 标签：prolog

在 SWI-Prolog 中，我有一个列表，其元素是 Key-ValuesList 形式的对。例如，一个这样的列表可能如下所示：

```
[1-[a,b],2-[],3-[c]] 
```

我想将此列表转换为 Key-[Value] 形式的嵌套对列表，其中 Value 是 ValuesList 中的一个元素。上面的示例将转换为：

```
[[1-[a],2-[],3-[c]], [1-[b],2-[],3-[c]]] 
```

我目前的解决方案如下：

```
% all_pairs_lists(+InputList, -OutputLists).
all_pairs_lists([], [[]]).
all_pairs_lists([Key-[]|Values], CP) :-
  !,
  findall([Key-[]|R], (all_pairs_lists(Values,RCP), member(R,RCP)), CP).
all_pairs_lists([Key-Value|Values], CP) :-
  findall([Key-[V]|R], (all_pairs_lists(Values,RCP), member(V,Value), member(R,RCP)), CP). 
```

使用这个谓词，调用形式

```
all_pairs_lists([1-[a,b],2-[],3-[c]],OutputLists). 
```

将变量 OutputLists 绑定到上面提到的所需结果。虽然看起来是正确的，但当 InputList 有很长的列表作为值时，此实现会导致“全局堆栈外”错误。

有没有更少的堆栈消耗方法来做到这一点？对于这种类型的数据结构，这似乎是一种非常常见的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:38:54.640

好吧，总结一下，你做错了。

在 Prolog 中，当我们想表达关系而不是函数时（可能有几个结果而不是一个），我们不直接使用`findall/3`and `member/2`。我们宁愿陈述关系是什么，然后如果我们需要一个我们使用的结果列表，也许一旦它完成`findall/3`。

这里的意思是我们要表达以下关系：

> 获取列表`Key-Values`并返回列表成员`Key-[Value]`在哪里`Value`的`Values`列表。

我们可以这样做：

```
% The base case: handle the empty list
a_pair_list([], []).

% The case where the Values list is empty, then the resulting [Value] is []
a_pair_list([Key-[]|List], [Key-[]|Result]) :-
    a_pair_list(List, Result).
% The case where the Values list is not empty, then Value is a member of Values.
a_pair_list([Key-[Not|Empty]|List], [Key-[Value]|Result]) :-
    member(Value, [Not|Empty]),
    a_pair_list(List, Result). 
```

一旦表达了这种关系，我们就可以获得我们想要的所有信息：

```
?- a_pair_list([1-[a, b], 2-[], 3-[c]], Result).
Result = [1-[a], 2-[], 3-[c]] ;
Result = [1-[b], 2-[], 3-[c]] ;
false. 
```

所需的列表现在只是一个相当直接的`findall/3`调用：

```
all_pairs_lists(Input, Output) :-
    findall(Result, a_pair_list(Input, Result), Output). 
```

要记住的重要一点是，最好远离额外的逻辑内容：`!/0`，`findall/3`，等等......因为它通常会导致不太通用的程序和/或不太正确的程序。既然我们可以用一种纯粹而干净的方式来表达上述关系，我们就应该这样做。通过这种方式，我们可以将烦人的使用限制`findall/3`在严格的最低限度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:03:08.840

正如@Mog 已经清楚地解释了问题可能是什么，这里有一个版本（ab）使用基本的“功能”内置列表处理：

```
all_pairs_lists(I, O) :-
    findall(U, maplist(pairs_lists, I, U), O).

pairs_lists(K-[], K-[]) :- !.
pairs_lists(K-L, K-[R]) :- member(R, L). 
```

测试：

```
?- all_pairs_lists([1-[a,b],2-[],3-[c]],OutputLists).
OutputLists = [[1-[a], 2-[], 3-[c]], [1-[b], 2-[], 3-[c]]]. 
```

# facebook - Facebook 画布中的 Flash 电影位置

> ID：11842936
> 
> 赞同：1
> 
> 时间：2012-08-07T09:26:29.973
> 
> 标签：facebook, actionscript-3, flash, facebook-canvas

关于在 Facebook 画布中定位 Flash 电影的问题，我遇到了一些麻烦。

Flash 影片的大小为 760x600 像素。所以我已经将画布宽度的 facebook 应用程序高级设置设置为固定（760 像素），高度设置为固定（800 像素）。

问题是，我得到了一个水平滚动条，并且只显示了 750 像素的 flash 电影，因为 flash 电影似乎在 canvas.x = 10 px 处对齐，而不是在 x = 0 px 处对齐。

有没有办法设置闪光电影的位置？最好在 Flash-As3 中？

提前致谢！

**更新**

感谢您输入尼拉吉！不幸的是，我从未对 CSS 做过任何事情。这是我的“index.html”，您能告诉我如何将您的示例集成到 html 代码中吗？

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <!-- Include support librarys first -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
    <script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script> 
</head>
<body>
    <div id="fb-root"></div><!-- required div -->
    <div id="flashContent">
        <h1>You need at least Flash Player 10.2 to view this page.</h1>
        <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>
    </div>
    <script type="text/javascript">
        //This example uses dynamic publishing with swfObject. Login is handled in the swf

        //Note we are passing in attribute object with a 'name' property that is same value as the 'id'. This is REQUIRED for Chrome/Mozilla browsers           
        swfobject.embedSWF("example.swf", "flashContent", "760", "600", "10.1", null, null, null, {name:"flashContent"});

        // redirect
        function redirect(id,perms,uri)
        {
            var params =
            window.location.toString().slice(window.location.toString().indexOf('?'));
            top.location = 'https://graph.facebook.com/oauth/authorize?client_id='+id+'&scope='+perms+'&redirect_uri='+uri+params;
        }       
    </script>
</body>
</html> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:32:29.543

您的问题在于您的 Flash 页面。您应该从嵌入 Flash 的 HTML 页面中删除边距，并使用 Javacript SDK 使用`setAutoGrow()`函数调整页面大小。这`overflow: hidden`也将删除滚动条。

示例 CSS：

```
body {
  margin: 0;
  overflow: hidden;
} 
```

* * *

**编辑：**

在`<head>`页面的标签中，添加：

```
<style type="text/css">
    html, body {
      margin: 0;
      overflow: hidden;
    }
</style> 
```

# javascript - 如何在鼠标悬停时显示/隐藏 div？

> ID：11842941
> 
> 赞同：2
> 
> 时间：2012-08-07T09:26:45.453
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何使用 jquery 在鼠标悬停时显示/隐藏 div？](https://stackoverflow.com/questions/9564481/how-to-show-hide-a-div-on-mouseover-using-jquery)

我有一个这样的div：

```
<div id="parent">
     foo
      <div id="child" style="display:none;">
         hidden
       </div>
</div> 
```

我希望`child`每当有人将鼠标移到`parent`div 上时显示 div，当他将鼠标移开时，隐藏父 div。

但是，如果我这样做：

```
$("#parent").mouseover(toggle);
$("#parent").mouseout(toggle);
function toggle()
{
   console.log('here');
   $("#child").toggle();
} 
```

然后，每次我将鼠标移到#parent div 上时，这两个事件似乎都会被调用两次。我怎样才能达到我想要的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T09:29:33.830

```
$("#parent").hover(
   function(){
      $("#child").show();

   },
   function(){
      $("#child").hide();
   }
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T09:30:56.403

添加css怎么样？

#parent #child{显示：无；}

#parent:hover #child{display:block;}

和

```
 <div id="parent">
         foo
          <div id="child" >
             hidden
           </div>
    </div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T09:29:43.207

在这种情况下，您不应该使用切换。如果您总是想在鼠标悬停时隐藏并在鼠标悬停时显示，那么将它们定义为:)

```
$("#parent").mouseover(function() {
    $("#child").fadeIn(); // or .show() for no fading
});

$("#parent").mouseout(function() {
    $("#child").fadeOut(); // or .hide() for no fading
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T09:31:56.913

不要使用切换功能！！

尝试这样的事情：

```
$("#parent").hover(function(){
  $("#child").show();
}, function(){
  $("#child").hide(); 
```

})

这应该可以工作！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T09:33:43.890

更短：

```
$("#parent").hover(function () {
   $("#child").toggle(); 
});​ 
```

[**演示。**](http://jsfiddle.net/karim79/QJDqQ/)

注意：您可以[`toggle`](http://api.jquery.com/toggle/)用[`fadeToggle`](http://api.jquery.com/fadetoggle/)或代替[`slideToggle`](http://api.jquery.com/slidetoggle/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T09:31:27.060

您可以像这样尝试 .hover() ，

```
$('#divid').hover(
function(){
 //mouseenter function
},
function(){
 //mouseleave function
}
); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T09:33:47.663

你应该使用这样的东西：

```
$("#parent").mouseover(function(){
    $('#child').show();
});
$("#parent").mouseout(function(){
    $('#child').hide();
});​ 
```

jsFiddle 示例：http: [//jsfiddle.net/phcwW/](http://jsfiddle.net/phcwW/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-07T09:52:25.070

```
<div id="parent" onmouseover="callMouseOver()" onmouseout="callMouseOut()">
     foo
      <div id="child" style="display:none;">
         hidden
       </div>
</div> 
```

JS方法：

```
function callMouseOver(){
    document.getElementById("child").style.display = "inline";
}

function callMouseOut(){    
    document.getElementById("child").style.display = "none";    
} 
```

# css - 颜色变量值较少的错误

> ID：11842943
> 
> 赞同：0
> 
> 时间：2012-08-07T09:27:09.770
> 
> 标签：css, html, less

我只是学[得少](http://lesscss.org/)了。我有这样的`html`文件

```
<!DOCTYPE HTML>
<html lang="en-IN">
<head>
  <meta charset="UTF-8">
  <title>.::LESS::.</title>
  <link rel="stylesheet" type=text/css"" href="style.less" />
  <script type="text/javascript" src="less.js"></script>
</head>
<body>
  <div class="box1">This is box1</div>
  <div class="box2">This is box2</div>
  <div class="box3">This is box3</div>
</body>
</html> 
```

我的`style.less`文件是这样的

```
@blue : #00c;
@light-blue: @blue + #333;
@deep-blue: @blue - #333;
.box1 {
  background-color: @blue;
}
.box2 {
  background-color: @light-blue;
}
.box3 {
  background-color: @deep-blue;
} 
```

但是毕竟这当我要检查`html page from the browser`它时没有显示任何东西。如果我`changing the values of background-color`要检查，`any color values`那么背景颜色可以在那里看到。有人可以告诉我错误的部分在哪里吗？欢迎任何帮助和建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:39:08.467

您缺少 # 表示浅蓝色。这是[它](http://codepen.io/anon/pen/wrAcH)应该看起来的样子吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:03:53.237

您的代码正确编译为

```
.box1 {
  background-color: #00c;
}
.box2 {
  background-color: #3333ff;
}
.box3 {
  background-color: #000099;
} 
```

但是，您编写的以下行：

```
<link rel="stylesheet" type=text/css"" href="style.less" /> 
```

应该：

```
<link rel="stylesheet/less" type="text/css" href="style.less" /> 
```

试试这个并再次检查它是否有效。

# c#-4.0 - Dispatcher.BeginInvoke 并行。For 不工作

> ID：11842944
> 
> 赞同：-1
> 
> 时间：2012-08-07T09:27:10.323
> 
> 标签：c#-4.0, mono, monodevelop

我是 Monodevelop 和 UBUNTU 的新手，现在我正在尝试使用 c# 开发一个桌面应用程序来研究 .Net 并行性。当我使用 Parallel.For 循环时，我遇到了一个问题。正如我在网上看到的，Dispatcher.beginInvoke 会将工作线程完成的工作委托给 UI 线程。

该文章还说，如果您不使用调度程序，它将通过桌面应用程序的错误。但它对我来说仍然很好。我不明白这里发生了什么。（这是我正在使用的链接——http: [//blogs.msdn.com/b/csharpfaq/archive/2010/06/01/parallel-programming-in-net-framework-4-getting-started.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/01/parallel-programming-in-net-framework-4-getting-started.aspx)）

这是代码：

```
Parallel.For(2, 20, (i) =>
{
   var result = SumRootN(i);
   this.Dispatcher.BeginInvoke(new Action(() =>
   textBlock1.Text += "root " + i.ToString() + " " +
   result.ToString() + Environment.NewLine)
   , null);
}); 
```

如果我取出 "this.Dispatcher.BeginInvoke(new Action(() =>" 语句仍然按预期工作，但根据我上面提到的链接它不应该工作。

细节：

Monodevelop 版本 - monodevelop 2.8.6.3+dfsg-2
Ubuntu 版本 - 12.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:04:58.327

也可能`Parallel.For`是只给你一个线程（你有一个单核 CPU 吗？） - 然后它将在创建它的同一线程中运行，并且在没有 Invoke 的情况下不会失败。此外，在某些情况下，您*可以*从后台线程更新 UI，但您不能指望它 - 它可能会在以后中断。

# drupal-7 - 图像未显示在 Drupal 7 的视图中

> ID：11842946
> 
> 赞同：0
> 
> 时间：2012-08-07T09:27:15.230
> 
> 标签：drupal-7, drupal-views

我安装了视图模块，我试图在内容类型中显示图片（带有标题和图片的菜单项），但是当我将名为“菜单项”的内容类型中的图像字段添加到视图时，它没有显示出来？我不明白为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:27:15.230

我通过在视图 ui 的最右侧添加“关系”解决了这个问题。您必须选择具有相同机器可读名称的图像并将其链接到您尝试显示的图像，并希望它会起作用。这让我难过了 3 或 4 个小时。呸呸呸！

# ruby - Ruby中未定义的变量是否等于nil？

> ID：11842947
> 
> 赞同：9
> 
> 时间：2012-08-07T09:27:16.740
> 
> 标签：ruby

我得到错误`undefined variable`，我知道如果用作布尔值`nil`，则评估为：`false`

```
if y
  puts "Something"
end 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-07T09:30:15.860

未定义的变量不等于 nil。

未定义的**实例**变量返回 nil（同样，如果它未定义）。

`y`引发异常

`@y`返回零

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-07T09:30:03.930

不，你会得到一个错误`undefined local variable or method`。但是如果你想检查是否定义了某些东西，你可以使用`defined?`这样的方法

```
if defined?(my_var)
  print 'defined'
else
  print 'not defined'
end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-12T15:58:12.893

这有一点点皱纹。试试这个：

```
if 5 == 0
   y = 'hi'
end

puts "hello" if y 
```

`y`已在`if`块中“定义”。删除该块，这会产生错误。

# android - 将带有单选按钮的自定义视图添加到单选组

> ID：11842952
> 
> 赞同：4
> 
> 时间：2012-08-07T09:27:30.423
> 
> 标签：android, radio-button, radio-group

我有一个自定义视图，其中包含一个 RadioButton。

SingleRadioItem：

```
public class SingleRadioItem extends LinearLayout {
    private TextView mTextKey;
    private RadioButton mRadioButton;
    private ImageView mImageSeparator;

    public SingleRadioItem(Context context, AttributeSet attrs) {
        super(context, attrs);
        View view = LayoutInflater.from(context).inflate(R.layout.rtl_single_radio_item, this, true);

        mTextKey = (TextView)view.findViewById(R.id.single_radio_item_text_key);
        mRadioButton = (RadioButton)view.findViewById(R.id.single_radio_item_button);
        mImageSeparator = (ImageView)view.findViewById(R.id.single_image_separator);
    }

    public void setKey(String key) {
        mTextKey.setText(key);
    }

    public boolean getSelectedState() {
        return mRadioButton.isSelected();
    }

    public void setSelectedState(boolean selected) {
        mRadioButton.setSelected(selected);
    }
} 
```

我想创建此视图的实例，将它们添加到 RadioGroup 并将 RadioGroup 添加到 LinearLayout。当我这样做时，它允许我将所有单选按钮设置为选中状态，这意味着 RadioGroup 运行不正常（可能是因为我是如何做到的......）

```
RadioGroup radioGroup = new RadioGroup(this);
        radioGroup.setOrientation(RadioGroup.VERTICAL);

        SingleRadioItem radio1 = new SingleRadioItem(this, null);
        SingleRadioItem radio2 = new SingleRadioItem(this, null);

        radioGroup.addView(radio1);
        radioGroup.addView(radio2);

        updateDetailsView.addView(radioGroup); 
```

显然，当我添加`RadioButton radio1 = new RadioButton(this);`RadioGroup 时效果很好。

甚至可以将包含单选按钮的视图添加到无线电组，而我只是缺少某些东西或根本不可能？

谢谢！

**解决方案：** 扩展@cosmincalistru 回答并帮助他人：

对于我添加到 LinearLayout 的每个 SingleRadioItem，我都附加了一个如下监听器：

```
radio1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                if (lastRadioChecked != null) {
                    lastRadioChecked.setCheckedState(false);
                }

                lastRadioChecked = (SingleRadioItem)v;
                lastRadioChecked.setCheckedState(true);
            }
        }); 
```

您还需要将 SingleRadioItem XML 中的 RadioButton View 设置为可点击：false。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:32:55.620

RadioButton 必须直接从属于 RadioGroup，否则您的按钮将被视为来自不同的组。最好的主意是在您的情况下在每个 RadioButton 上使用侦听器。

编辑：每当我想将一组 RadioButtons 作为组的一部分但不能使用 RadioGroup 时，我会执行以下操作：

```
RadioButton r1,r2,....;
// Instantiate all your buttons;
...
// Set listener on each
for(each RadioButton) {
    rx.setOnCheckedChangeListener(OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (isChecked) {
                //set all buttons to false;
                for(each RadioButton) {
                    rx.setChecked(false);
                }
                //set new selected button to true;
                buttonView.setChecked(true);
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:32:52.660

当您将视图添加到 RadioGroup 时，只有当视图是 RadioButton 的实例时，该组才能正常工作。在您的情况下，您正在添加一个 LinearLayout。所以 SingleRadioItem 应该扩展 RadioButton。

# wpf - ScrollViewer 不显示“栏”

> ID：11842953
> 
> 赞同：0
> 
> 时间：2012-08-07T09:27:34.417
> 
> 标签：wpf, itemscontrol, scrollviewer

我有一个包裹在 ScrollViewer 中的 ItemsControl。ScrollViewer 行为正确但无法正确显示：

![滚动查看器问题](../Images/cf025f8b55b538000c769a16ecc09323.png)

我的应用程序中的任何地方都没有 ScrollViewer 的样式。

条形尺寸看起来像 0px，所以箭头最终会接触。

在我的应用程序中包含 ItemsControl 的每个 ScrollViewer 都会发生这种情况。

我测试了一个简单的 ItemsControl 以消除其他样式信息影响它的可能性：

```
<ScrollViewer VerticalScrollBarVisibility="Visible">
    <ItemsControl>
        <TextBlock Text="test"/>
        <TextBlock Text="test"/>
        <TextBlock Text="test"/>
    </ItemsControl>
</ScrollViewer> 
```

结果是一样的。我还将 ItemsControl 包装在 WrapPanel 中，并在 ScrollViewer 和 WrapPanel 上设置了最小/最大高度，但没有任何变化。

有谁知道为什么会发生这种情况以及我该如何解决？

编辑：我用 snoop 查看了 ScrollViewer，奇怪的 Snoop 的 ScrollViewers 也显示不正确（没有轨迹栏）：

![窥探滚动查看器](../Images/e1cf6d09686fea5d6f4ea300d2473ee4.png)

谢谢

# javascript - 在 Chrome 扩展程序中获取 JSON

> ID：11842954
> 
> 赞同：9
> 
> 时间：2012-08-07T09:27:37.507
> 
> 标签：javascript, ajax, json, google-chrome-extension, content-security-policy

我的 chrome 扩展的小问题。

我只是想从另一台服务器获取一个 JSON 数组。但是清单 2 不允许我这样做。我试过指定`content_security_policy`，但 JSON 数组存储在没有 SSL 证书的服务器上。

那么，如果不使用清单 1，我该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T12:07:49.307

[CSP](https://developer.chrome.com/extensions/contentSecurityPolicy)不会导致您描述的问题。您很可能使用的是 JSONP 而不是纯 JSON。JSONP 在 Chrome 中不起作用，因为 JSONP 通过`<script>`在文档中插入一个标签来工​​作，该标签的`src`属性设置为 web 服务的 URL。[CSP 不允许这样做](https://developer.chrome.com/extensions/contentSecurityPolicy#resourceLoading)。

前提是您在清单文件中设置了正确的权限（例如`"permissions": ["http://domain/getjson*"]`，您将始终能够获取和解析 JSON：

```
var xhr = new XMLHttpRequest();
xhr.onload = function() {
    var json = xhr.responseText;                         // Response
    json = json.replace(/^[^(]*\(([\S\s]+)\);?$/, '$1'); // Turn JSONP in JSON
    json = JSON.parse(json);                             // Parse JSON
    // ... enjoy your parsed json...
};
// Example:
data = 'Example: appended to the query string..';
xhr.open('GET', 'http://domain/getjson?data=' + encodeURIComponent(data));
xhr.send(); 
```

将 jQuery 用于 ajax 时，请确保未使用以下命令请求 JSONP `jsonp: false`：

```
$.ajax({url:'...',
        jsonp: false ... }); 
```

或者，使用时[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)：

```
$.getJSON('URL which does NOT contain callback=?', ...); 
```

# apache - mod_spdy 不能在 Apache 上工作

> ID：11842955
> 
> 赞同：1
> 
> 时间：2012-08-07T09:27:38.220
> 
> 标签：apache, spdy

我使用 mod_spdy 在 apache 上实现 SPDY。但是我遇到了一些问题。我根据谷歌安装mod_spdy的文档在ubuntu上做了每一步。我在Apache上实现了https。当我检查 mod_spdy 是否有效时，我向服务器发送了 https 请求，但我没有看到“SPDY 会话”表中列出的服务器域，这意味着 mod_spdy 不起作用。我还检查了 Apache 服务器日志，但没有发现来自 mod_spdy 的任何错误消息。我希望有人可以帮助我解决这个问题。

# scala - Scala 列表包含 vs 数组包含

> ID：11842956
> 
> 赞同：6
> 
> 时间：2012-08-07T09:27:38.687
> 
> 标签：scala

出于兴趣，为什么这在 Scala 中有效：

```
val exceptions = List[Char]('+')    
assertTrue(exceptions.contains('+')) 
```

但这不是

```
val exceptions = new Array[Char]('+')    
assertTrue(exceptions.contains('+')) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T09:33:44.047

因为你写了**新的**ArrayChar。这样做，参数是数组的大小，而不幸的是，'+' 被转换为 int 以给出大小。并且返回的数组充满了 Char(0)。

您应该这样做`Array[Char]('+')`，`'+'`然后将是数组中的单个元素。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T09:34:42.853

在 REPL 中尝试，这使得答案显而易见：

```
scala> val exceptions = new Array[Char]('+')
exceptions: Array[Char] = Array( ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ,  ) 
```

`+`有 char-to-int 提升。

```
scala> val exceptions = Array[Char]('+')
exceptions: Array[Char] = Array(+)

scala> exceptions.contains('+')
res3: Boolean = true 
```

是等价的`List`情况。

# .net - 从字符串“FalseTrue”到类型“Boolean”的转换无效 - 异常

> ID：11842961
> 
> 赞同：1
> 
> 时间：2012-08-07T09:28:00.033
> 
> 标签：.net, vb.net

这是我的 VB 网络代码：

```
Public Class Form1

   Dim hue As Single

  Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles      Button1.Click
   Dim hueMin As Single = 205
     Dim hueMax As Single = 259

            If (hue > hueMin) & (hue < hueMax) Then

                 bmp.SetPixel(Xcor, Ycor, Color.Black)

             End If
   End Sub

End Class 
```

我进入这一行：

```
 If (hue > hueMin) & (hue < hueMax) Then 
```

这个例外：

**{"从字符串 "FalseTrue" 到类型 'Boolean' 的转换无效。"}**

知道如何修复代码吗？先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T09:30:11.083

正确的测试应该是

```
If (hue > hueMin) AndAlso (hue < hueMax) Then 
                   ^^^^ 
```

在`&`VB.Net 中是字符串连接运算符。

# java - 我如何制作 32 位或 64 位应用程序？

> ID：11842965
> 
> 赞同：0
> 
> 时间：2012-08-07T09:28:12.530
> 
> 标签：java, 32bit-64bit, bytecode

在制作程序时，我如何确保特定应用程序是 64 位应用程序或 32 位应用程序。

是否可以对应用程序分别为 64 位或 32 位进行硬编码，如果可能的话，64 位应用程序是否需要比通常的 32 位应用程序占用更多内存？

我知道 32 位应用程序/硬件的内存限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:59:15.597

Java 是独立于平台的。因此，您不应该为此烦恼。32 和 64 之间的唯一区别在于使用的 jdk。

如果您使用 64 位 jdk，则您的应用程序是 64 位兼容的

如果您使用 32 位 jdk，则您的应用程序是 32 位兼容的

> 如果我在 32 位 JDK 上编译一个程序并在 64 位 JVM 上运行它会工作吗？

是的，因为你实际上并没有编译它，你只是在创建一个字节码。

当 JVM 将加载您的类时，它会检查 jdk 是 64 位还是 32 位，并分别使您的 jvm 成为 64 位或 32 位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:17:56.227

无论是用于 32 位还是 64 位，都有一个字节码。

这意味着您可以在 64 位 JVM 上使用在 64 位 JVM 之前在 32 位机器上编译的库。

64 位 JVM 可以使用更多内存，但不像现代 64 位 JVM 使用 Compressed Oops 那样多，因此您可以将 32 位引用用于高达 32 GB 的堆。（你也可以使用更多的堆外内存）

32 位操作系统上的许多 32 位 JVM 被限制为 1.2 到 1.5 GB 的内存。在 64 位操作系统上，此限制可能为 2.5 到 3.5 GB，具体取决于操作系统。64 位操作系统上的 64 位 JVM 实际上被限制为大约 1 TB 的内存，但这个限制将来可能会取消（并且取决于操作系统）

唯一的区别是您是否使用 JNI。JNI 共享库依赖于 32 位或 64 位库，并且您可能只有一个（在这种情况下，您只能将它加载到相同位数的 JVM 上）或者它的行为可能不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T09:58:13.317

Java 字节码与平台无关。除非您开始调用 JNI 或类似的东西，否则您不必担心。

您可以告诉 JVM 是以 32 位还是 64 位模式运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T09:58:47.627

没有 32 位 / 64 位 Java 程序之类的东西。

就是JVM本身是在不同的架构上开发的，但是Java规范是不变的，不会随着底层硬件而改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-23T11:56:39.823

创建`java`应用程序后，构建并获取最终`.jar`文件（如果该应用程序包含 3rd 方 jar，`jar`也获取该文件）。

*   > 然后使用应用程序，您可以使用或**`exe4j`**轻松创建自己的 `.exe`文件`x64``x32`

*   > [您可以从此](https://www.ej-technologies.com/download/exe4j/files)链接下载 exe4j 。

# mysql - 带有where子句的M ysql数据透视表

> ID：11842967
> 
> 赞同：0
> 
> 时间：2012-08-07T09:28:31.297
> 
> 标签：mysql

```
select student_id, class_id, section_id, exam_date, exam_id, 
       sum(number*(1-abs(sign(subject-1)))) as sub1, 
       sum(number*(1-abs(sign(subject-2)))) as sub2, 
       sum(number*(1-abs(sign(subject-3)))) as sub3, 
       sum(number*(1-abs(sign(subject-4)))) as sub4, 
       sum(number*(1-abs(sign(subject-5)))) as sub5, 
       sum(number*(1-abs(sign(subject-6)))) as sub6 
from result 
where class_id = '7' and section id = '3' and YEAR(exam_date) = '2012' and exam_id = '3'
GROUP BY student_id 
```

我有一个问题，当我使用 where 子句过滤时，所有数值都为 0，如果我在没有 where 子句的情况下运行查询，结果会很好，但来自所有数据库。如何使用 where 子句过滤查询？谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:32:33.067

您也需要按 class_id 分组

```
SELECT * FROM ( 
select student_id, class_id,  
       sum(number*(1-abs(sign(subject-1)))) as sub1,  
       sum(number*(1-abs(sign(subject-2)))) as sub2,  
       sum(number*(1-abs(sign(subject-3)))) as sub3,  
       sum(number*(1-abs(sign(subject-4)))) as sub4,  
       sum(number*(1-abs(sign(subject-5)))) as sub5,  
       sum(number*(1-abs(sign(subject-6)))) as sub6  
from result GROUP BY student_id,class_id) m 
where class_id = '7' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:31:02.810

在 where 之前包装查询。

```
SELECT * FROM (
select student_id, class_id, 
       sum(number*(1-abs(sign(subject-1)))) as sub1, 
       sum(number*(1-abs(sign(subject-2)))) as sub2, 
       sum(number*(1-abs(sign(subject-3)))) as sub3, 
       sum(number*(1-abs(sign(subject-4)))) as sub4, 
       sum(number*(1-abs(sign(subject-5)))) as sub5, 
       sum(number*(1-abs(sign(subject-6)))) as sub6 
from result GROUP BY student_id) m
where class_id = '7' 
```

# grails - 如何从 Spring Security UI 获得正确的错误消息？

> ID：11842969
> 
> 赞同：0
> 
> 时间：2012-08-07T09:28:33.083
> 
> 标签：grails, spring-security, grails-plugin

我一直在使用 spring security UI 和 spring security 插件。我们的 register.gsp 页面按预期工作。我们正在将我们的 css 移动到 twitter 引导程序，因此我们更改了 register.gsp 文件，以匹配我们的要求。

所以我们改变了：

```
<s2ui:textFieldRow name='username' labelCode='user.username.label' bean="${command}"
                         size='40' labelCodeDefault='Username' value="${command.username}"/> 
```

到 ：

```
<g:textField class="input-large" bean="${command}" name="username"  
                               value = "${command.username}" required = "" /> 
```

现在的问题是我如何呈现错误消息？我现在只收到默认错误消息：

```
 Property {0} ... doesn't pass custom validation. 
```

实际上，我需要获取 Spring Security UI 提供的错误消息。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:29:55.833

您可以使用：

```
<g:textField class="input-large" bean="${command}" name="username"  
                           value = "${command.username}" required = "" />
<g:eachError bean="${command}">
    <span>${it}</span>
</g:eachError> 
```

# sql-server-2008 - 请求查询

> ID：11842972
> 
> 赞同：-1
> 
> 时间：2012-08-07T09:28:40.017
> 
> 标签：sql-server-2008

```
Create table #job(id int,start_time datetime,end_time datetime)

insert into #job values(1,'2012-08-06 11:30:00.000','2012-08-06 15:30:00.000')
insert into #job values(1,'2012-08-06 15:30:00.000','2012-08-06 16:30:00.000')
insert into #job values(2,'2012-08-06 16:30:00.000','2012-08-06 17:30:00.000')
insert into #job values(1,'2012-08-06 17:30:00.000','2012-08-06 18:30:00.000') 
```

我需要如下数据，我只需要**id = 1**

答案应该如下所示。

```
1 '2012-08-06 11:30:00.000' '2012-08-06 16:30:00.000'
1 '2012-08-06 17:30:00.000'  '2012-08-06 18:30:00.000' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:19:41.533

尝试这个：

```
select j1.id,min(j1.start_time) start_time,max(j2.end_time) end_time  from #job j1 inner join #job j2
on j1.id=j2.id and j1.end_time = j2.start_time 
group by j1.id

union

select * from #job where start_time not in(

select start_time  from #job where start_time in(
select j1.start_time from #job j1 inner join #job j2
on j1.id=j2.id and j1.end_time = j2.start_time and j1.id=1)

union all

select start_time from #job where start_time in(
select j1.end_time from #job j1 inner join #job j2
on j1.id=j2.id and j1.end_time = j2.start_time and j1.id=1)
) 

and id=1 
```

# c++ - 在 C++ 项目中使用 libjson

> ID：11842976
> 
> 赞同：2
> 
> 时间：2012-08-07T09:28:53.753
> 
> 标签：c++, g++, libjson

我正在尝试在 C++ 项目中使用 libjson，文档告诉我只需“将 libjson 的源代码添加到您的项目中，在 JSONOptions.h 文件中注释 JSON_LIBRARY，任何 C++ 编译器都应该编译它。”

作为 C++ 的新手，我应该怎么做（不使用任何 IDE）？我应该只是`#include`libjson.h 文件就这样吗？在编译我的项目时，我不应该在调用 g++ 时以某种方式引用 libjson 吗？

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:17:22.017

如果您进入`libjson`库文件夹，您将看到一个`makefile`. 在终端中导航到该目录并键入：

```
make 
```

然后

```
make install 
```

然后，在您的代码中

```
#include <libjson.h> 
```

或者，取决于您的包含路径：

```
#include <libjson/libjson.h> 
```

这应该是您需要做的所有事情。

如果需要额外帮助，可以在sourceforge的帮助论坛发帖（我是libjson的作者）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T09:37:37.017

你必须：

一，

```
#include <libjson.h> 
```

为了访问库提供的函数和数据类型，然后

二、链接libjsonz库：

```
g++ -o myprogram myprogram.c -ljson 
```

（该`-ljson`标志必须放在最后，否则您将在没有 GCC 版本的情况下出现链接器错误。）

编辑：如果您需要构建库，您通常有一个配置脚本或 Makefile。[看看如何使用它们](http://tldp.org/LDP/LG/current/smith.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T06:49:29.270

如果你安装 json 你应该在 /usr/local/include 找到包含文件，所以

```
#include <json/json.h> 
```

gcc exasmple.c -ljson

# ruby-on-rails - 如何将变量从 AJAX 表单传递到控制器？

> ID：11842978
> 
> 赞同：1
> 
> 时间：2012-08-07T09:28:53.383
> 
> 标签：ruby-on-rails, jquery

我有报告表（金额，日期）。我希望用户使用日期选择器选择日期并显示在用户选择的日期之间创建的报告。

所以我需要从 AJAX 表单中传递这些变量。

我添加了 AJAX 表单。这是我的**_form.html.erb**：

```
<%= form_tag(:controller => "financial_reports", :action => 'report', :remote => true) do%>
  <span id="pickers">From</span> 
  <%= datepicker_input "report","start_date", :dateFormat => "dd/mm/yy" %>
  <span id="pickers2">To</span>
  <%= datepicker_input "report", "end_date", :dateFormat => "dd/mm/yy"%>
<%=  submit_tag "Run Report", :class => "btn super", :id => "btn "%> 
```

我有部分，正在显示报告。|

**_financial_report.erb.html**

```
 <table class="table" id="performance_report">
  <thead>
  <th>Date</th>
<th>Amount</th>
<th>Currency</th>
  </thead>
 <% @financial_reports.each do |financial_report| %>
  <tr>
   <td> <%= financial_report.created_at.strftime("%d/%m/%Y")%></td> </td>
<td><%= financial_report.amount %></td>
<td><%= financial_report.currency %></td>
  </tr>
  <% end %>
    <tr>
  <td>Total</td>
  <td><%= current_user.financial_reports.sum(:amount)%></td>
  </tr>
     </table> 
```

我正在我的**index.erb.html上渲染这个部分**

```
 <div id="report_form"><%= render 'form' %></div>
             <%= render 'financial_report' %> 
```

在我的**report.js.erb**中，我想返回适当的报告：

```
 $('.report').apppend('<%= escape_javascript(render(@financial_report)) %>'); 
```

这是我的控制器（**我不知道我应该在哪里调用“where”条件**

```
 def index
          @financial_reports = current_user.financial_reports#.where(:created_at => the_start.to_date..the_end.to_date)
       ...
     end 
```

或在这里

```
 def report
    @financial_reports = current_user.financial_reports#.where(:created_at => the_start.to_date..the_end.to_date)//here
     respond_to do |format|
    format.js
   end
  end 
```

这是我的报告表单的 HTML：

```
 <form accept-charset="UTF-8" action="/financial_reports/report?remote=true" method="post">
     <input id="report_start_date" name="report[start_date]" size="30" type="text" class="hasDatepicker">
      <input id="report_end_date" name="report[end_date]" size="30" type="text" class="hasDatepicker"> 
```

在我的路线中：

```
 match 'financial_reports/report' => 'financial_reports#report' 
```

我可以使用 AJAX 获取变量：

```
 $.ajax({ 
  type: 'POST', 
  url: 'financial_reports/report', 
  data: {'start_date' : $("input[name='report[start_date]']").val(), 
    'end_date' : $("input[name='report[end_date]']").val() }, 
  success: function(data){
 //data is whatever you RETURN from your controller. 

    } 
 }); 
```

我应该如何解决这个问题？也许，我误解了 AJAX 的东西？

PS 当我调用报告操作时，它会显示空白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:06:09.047

你说你能从 ajax 得到响应。但是你有没有从行动中返回任何东西？如果明确触发的 ajax 请求工作正常，这意味着您的路线很好。但是 ajax 请求应该触发你在`report.js.erb`. 如果这没有发生，我怀疑参数格式错误。我可以在您传递的 ajax 请求中看到：

```
 data: {'start_date' : $("input[name='report[start_date]']").val(), 
    'end_date' : $("input[name='report[end_date]']").val() } 
```

如果操作需要 params[:start_date] 和 params[:end_date] ，这很好。但是表单不会以那种格式发送参数。

我的建议：使用 firebug 或其他一些调试工具，确保它是一个 POST 请求，并且参数应该是预期的格式。检查请求的响应以查看返回值。这应该是一个“成功”的回应。还要检查控制器中的方法“report”是否是公共方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:25:08.650

在您的 report.js.erb 中，您有错字，应该**追加****apppend**

 **我不确定您是否还有其他问题，我没有进一步查看，因为那已经停止了它的工作。**

# python - 我可以为 Django 上的模型使用多个 slug 字段吗？

> ID：11842979
> 
> 赞同：0
> 
> 时间：2012-08-07T09:28:54.493
> 
> 标签：python, django, url, web-applications, slug

我想使用 slug 来引用 url。尽管如此，我想使用的模型是为中文词汇测验设计的，我想使用 3 种不同的 slug 来引用 url。

然后，我有一个模型

**模型.py**

```
from django.db import models
from django.db.models import permalink
from django.template.defaultfilters import slugify
from unidecode import unidecode

class Vocabulary( models.Model ):

title = models.CharField(" Title ",  max_length = 100 )
vocabularyCharacter = models.CharField("Character",  max_length = 100, blank = True, null = True )
vocabularyTranslation = models.CharField("Translation",  max_length = 100, blank = True, null = True )
vocabularyPinyin = models.CharField("Pinyin",  max_length = 100, blank = True, null = True )
vocabularyCharacterSlug = models.SlugField( "Character Slug (optional)",  max_length = 100, blank = True, null = True )
vocabularyTranslationSlug = models.SlugField("Translation Slug (optional)",  max_length = 100, blank = True, null = True )
vocabularyPinyinSlug = models.SlugField("Pinyin Slug (optional)",  max_length = 100, blank = True, null = True )
audio_file = models.FileField("Audio file (optional)", upload_to = u'resources/mp3/', max_length=200, blank = True, null=True)
description = models.TextField("Description ",  blank = True, null = True )

class Meta:
    verbose_name = 'vocabulary'
    verbose_name_plural = 'vocabularies'

def __unicode__( self ):
    return u"%s" % self.title

def save( self, force_insert = False, force_update = False ):
    self.vocabularyCharacterSlug = slugify(unidecode(self.vocabularyCharacter))
    self.vocabularyTranslationSlug = slugify(unidecode(self.vocabularyTranslation))
    self.vocabularyPinyinSlug = slugify(unidecode(self.vocabularyPinyin))
    super( Vocabulary, self ).save( force_insert, force_update )

@permalink
def get_absolute_vocabulary_character_url( self ):
    return ( 'vocabulary_character_detail', None, {
        'vocabularyCharacterSlug':    self.vocabularyCharacterSlug,
    } )

@permalink
def get_absolute_vocabulary_traslation_url( self ):
    return ( 'vocabulary_traslation_detail', None, {
        'vocabularyTranslationSlug':    self.vocabularyTranslationSlug,
    } )

@permalink
def get_absolute_vocabulary_pinyin_url( self ):
    return ( 'vocabulary_pinyin_detail', None, {
        'vocabularyPinyinSlug':    self.vocabularyPinyinSlug,
    } ) 
```

然后，我对这个模型有一个看法

**视图.py**

```
from django.shortcuts import get_object_or_404, render_to_response
from core.vocabulary.models import Vocabulary

def vocabulary_character_detail( request, vocabularyCharacterSlug ):

    vocabulary = get_object_or_404( Vocabulary, vocabularyCharacterSlug = vocabularyCharacterSlug )
    return render_to_response( 'vocabulary/vocabulary_character_detail.html',
                              {'vocabulary': vocabulary} )

def vocabulary_translation_detail( request, vocabularyTranslationSlug ):

    vocabulary = get_object_or_404( Vocabulary, vocabularyTranslationSlug = vocabularyTranslationSlug )
    return render_to_response( 'vocabulary/vocabulary_translation_detail.html',
                              {'vocabulary': vocabulary} )

def vocabulary_pinyin_detail( request, vocabularyPinyinSlug ):

    vocabulary = get_object_or_404( Vocabulary, vocabularyPinyinSlug = vocabularyPinyinSlug )
    return render_to_response( 'vocabulary/vocabulary_pinyin_detail.html',
                              {'vocabulary': vocabulary} ) 
```

另外，我有这个 url 文件

**网址.py**

```
from django.conf.urls import patterns, url
from core.vocabulary.views.vocabulary import vocabulary_character_detail
from core.vocabulary.views.vocabulary import vocabulary_translation_detail, vocabulary_pinyin_detail

urlpatterns = patterns( '',     
        url( r'^(?P<vocabularyCharacterSlug>[-\w]+)/$',
            vocabulary_character_detail,
            name = 'vocabulary_character' ),

        url( r'^(?P<vocabularyTranslationSlug>[-\w]+)/$',
            vocabulary_translation_detail,
            name = 'vocabulary_translation' ),

        url( r'^(?P<vocabularyPinyinSlug>[-\w]+)/$',
            vocabulary_pinyin_detail,
            name = 'vocabulary_pinyin' ),
 ) 
```

我创建了相应的模板，我可以访问 url

```
url( r'^(?P<vocabularyCharacterSlug>[-\w]+)/$',
            vocabulary_character_detail,
            name = 'vocabulary_character' ), 
```

而另外2个，我收到一条错误消息

没有词汇与给定的查询匹配。

Django 是否只支持模型的一个 slug 字段？

如果 Django 支持多个 slug 字段，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:03:43.273

为什么不将您的视图指向不同的目录？

```
urlpatterns = patterns( '',     
    url( r'^character/(?P<vocabularyCharacterSlug>[-\w]+)/$',
        vocabulary_character_detail,
        name = 'vocabulary_character' ),

    url( r'^translation/(?P<vocabularyTranslationSlug>[-\w]+)/$',
        vocabulary_translation_detail,
        name = 'vocabulary_translation' ),

    url( r'^pinyin/(?P<vocabularyPinyinSlug>[-\w]+)/$',
        vocabulary_pinyin_detail,
        name = 'vocabulary_pinyin' ), 
```

)

模型：

```
def vocabulary_character_detail( request, vocabularyCharacterSlug ):

   vocabulary = get_object_or_404( Vocabulary, vocabularyCharacterSlug = vocabularyCharacterSlug )
   return render_to_response( 'vocabulary/character/vocabulary_character_detail.html',
                          {'vocabulary': vocabulary} )

def vocabulary_translation_detail( request, vocabularyTranslationSlug ):

   vocabulary = get_object_or_404( Vocabulary, vocabularyTranslationSlug = vocabularyTranslationSlug )
   return render_to_response( 'vocabulary/translation/vocabulary_translation_detail.html',
                          {'vocabulary': vocabulary} )

def vocabulary_pinyin_detail( request, vocabularyPinyinSlug ):

   vocabulary = get_object_or_404( Vocabulary, vocabularyPinyinSlug = vocabularyPinyinSlug )
   return render_to_response( 'vocabulary/pinyin/vocabulary_pinyin_detail.html',
                          {'vocabulary': vocabulary} 
```

# php - 将值从 PHP 粘贴到 JavaScript

> ID：11842980
> 
> 赞同：1
> 
> 时间：2012-08-07T09:28:57.133
> 
> 标签：php, javascript, html

我尝试将 PHP 粘贴`$value`到 JavaScript 以显示它，但它无法获取值。

```
<script language="JavaScript">
    function here(elemento){
        alert (elemento);
    }
</script>

<body>
    <?php $value= 1?>
    <!--Al hace llamado a la función solo tienes que idicar el nombre del DIV entre parentesis -->
    <p><a href="#" onclick="here('.$value.')" title="">Mostrar / Ocultar</a></p>

    <div id="contenido_a_mostrar">
        <p>Este contenido tiene que mostrarse con el link</p>
    </div>
</body> 
```

我试试这个`<p><a href="#" onclick="here('<? php echo $value; ?>')" title="">Mostrar / Ocultar</a></p>`

但是警报告诉我这个`<?php echo $value?>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:30:57.713

```
<script language="JavaScript">

function here(elemento){
    alert (elemento);
}

</script>
<a href="#" onclick="here('<?php echo $value?>')" title="">Mostrar / Ocultar</a> 
```

您必须将`echo`值放入 HTML

[文档](http://php.net/manual/en/function.echo.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:31:09.897

```
onclick="here('<?php echo $value;?>')" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:32:38.510

要使用 PHP 代码，您需要再次调用文件的 PHP 部分`<?php`。在您的情况下，代码的主体应如下所示：

```
<body>
<?php $value = 1; ?>
<p><a href="#" onclick="here('<?php $value; ?>')" title="">Mostrar / Ocultar</a></p> 
```

这样，它将是在准备好 HTML 时执行的 PHP 代码，`$value`并将正确地连接到 HTML 中。

# python - wxGTK 无法运行

> ID：11842982
> 
> 赞同：0
> 
> 时间：2012-08-07T09:29:14.890
> 
> 标签：python, wxwidgets, interpreter

```
import wx
import wx.lib.buttons
import wx.lib.agw.customtreectrl as CT

from PLCControler import ITEMS_VARIABLE, ITEM_CONFIGURATION, ITEM_RESOURCE, ITEM_POU
from utils.BitmapLibrary import GetBitmap

class PouInstanceVariablesPanel(wx.Panel):

   def __init__(self, parent, window, controller, debug):   
       self.VariablesList = CT.CustomTreeCtrl(self,
             style=wx.SUNKEN_BORDER,
             agwStyle=CT.TR_NO_BUTTONS|
                     CT.TR_SINGLE|
                     CT.TR_HAS_VARIABLE_ROW_HEIGHT|
                     CT.TR_HIDE_ROOT|
                     CT.TR_NO_LINES|
                     getattr(CT, "TR_ALIGN_WINDOWS", CT.TR_ALIGN_WINDOWS)) 
```

此代码没有具体错误。但是执行这个文件，python解释器说

```
getattr(CT, "TR_ALIGN_WINDOWS", CT.TR_ALIGN_WINDOWS))
<type 'exceptions.TypeError'>: __init__() got an unexpected keyword argument 'agwStyle' 
```

这段代码有什么问题。我完全处于恐慌之中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:06:34.987

由 wxGTK 版本过低引起。(2.8.10 -> 2.8.12 )

更新 wxGTK 版本和上层代码工作正常。

# java - 根据出现次数升序对数组进行排序

> ID：11842984
> 
> 赞同：10
> 
> 时间：2012-08-07T09:29:16.310
> 
> 标签：java, arrays, sorting

如何根据java中该值的出现次数以升序排列数组中的元素。

这是我尝试过的：

```
int a[]={0,0,0,1,3,3,2,1,3,5,6,0};
int b=a.length;
for(int i=0;i<b;i++) {
    for(int j=0;j<i;j++) {
        int temp;
        if( a[j]>a[i]) {
            temp=a[i];
            a[i]=a[j];
            a[j]=temp;
        }
    }
}

for(int r=0;r<a.length;r++) {
    System.out.println(a[r]);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-04-18T13:01:43.610

这是使用 TreeMap 的一种有效方法。

```
import java.util.Comparator;
import java.util.HashMap;
import java.util.Map;
import java.util.TreeMap;

public class FrequencySort {
    public static void main(String[] args) {
        int[] ar = new int[] {5,2,8,8,5,5,8,1,9,0,1,1,0,1};

        Map<Integer,Integer> numbers = new HashMap<>();

        for(int number : ar) {
            if(numbers.containsKey(number)) {
                Integer  count = numbers.get(number);
                numbers.put(number, ++count);
            } else {
                numbers.put(number,1);
            }
        }

        final class FrequencyComparator implements Comparator<Integer> {
            Map<Integer,Integer> refMap;
            public FrequencyComparator(Map<Integer,Integer> base) {
                this.refMap = base;
            }

            @Override
            public int compare(Integer k1, Integer k2) {
                Integer val1 = refMap.get(k1);
                Integer val2 = refMap.get(k2);

                int num = val1.compareTo(val2)  ;
                // if frequencies are same then compare number itself
                return  num == 0 ? k1.compareTo(k2)   : num;
            }
        }

        FrequencyComparator comp = new FrequencyComparator(numbers);
        TreeMap<Integer,Integer> sortedMap = new TreeMap<Integer,Integer>(comp);
        sortedMap.putAll(numbers);
        for(Integer i : sortedMap.keySet()) {
            int frequencey = sortedMap.get(i);
            for(int count  = 1 ; count <= frequencey ; count++) {
                System.out.print(i + " " );
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T10:29:14.290

这是一种让你开始的方法，它可能是基于计算初始数组中每个整数在地图中出现的次数的想法。计算完所有数字后，按升序对地图进行排序，然后打印地图的输出：

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.TreeMap;

public class SortCount {
    public static void main(String[] args) {
        int nums[] = {0,0,0,1,3,3,2,1,3,5,6,0};
        HashMap<Integer,Integer> counts = new HashMap<Integer,Integer>();

        for(int i = 0; i < nums.length; i++) {
            if(counts.containsKey(nums[
                Integer c = counts.get(nums[i]) + 1;
                counts.put(nums[i], c);
            }
            else {
                counts.put(nums[i],1);
            }
        }

        ValueComparator<Integer,Integer> bvc = new ValueComparator<Integer,Integer>(counts);
        TreeMap<Integer,Integer> sortedMap = new TreeMap<Integer,Integer>(bvc);
        sortedMap.putAll(counts);

        ArrayList<Integer> output = new ArrayList<Integer>();
        for(Integer i : sortedMap.keySet()) {
            for(int c = 0; c < sortedMap.get(i); c++) {
                output.add(i);
            }
        }

        System.out.println(output.toString());
    }
} 
```

它使用一个`Comparator`类来比较 a 中的值`Map`：

```
import java.util.Comparator;
import java.util.Map;

public class ValueComparator<T1,T2 extends Comparable<T2>> implements Comparator<T1> {
    Map<T1,T2> base;
    public ValueComparator(Map<T1,T2> base) {
        this.base = base;
    }

    @Override
    public int compare(T1 k1, T1 k2) {
        T2 val1 = base.get(k1);
        T2 val2 = base.get(k2);

        return val1.compareTo(val2);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T09:33:19.937

如果您只想对数组进行[排序](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)，请使用以下命令：

```
Arrays.sort(a); 
```

如果您想手动对其进行排序，我建议您阅读[此](http://en.wikipedia.org/wiki/Sorting_algorithm)页面，您可以在其中找到各种排序算法的伪代码。

但是，如果您正在寻找一种基于数字**频率**对数组进行排序的方法，我会推荐[这个](http://www.geeksforgeeks.org/archives/1488)页面。您必须颠倒排序顺序，因为您希望它们按升序排列。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-05T10:20:43.767

使用 TreeMap 将元素存储为键，出现次数作为值，然后根据值对其进行排序。Java 8 流使以下代码简洁易懂

```
int[] a = {1,1,2,2,3,3,3,4,4,5,5,5,5,6,6,6,8};   

// new element ? store its count as 1 , else increment its count
    TreeMap<Integer,Integer> m1 = new TreeMap<>();
    for(int i : a)
    { 
    if(m1.containsKey(i))
    {m1.put(i,m1.get(i)+1);} 
    else  {m1.put(i,1);}
    };

// sort and then if element i occurs n times, simply loop to add so in arraylist    
    ArrayList<Integer> b = new ArrayList<>();
    m1.entrySet().stream()
    .sorted((k1, k2) -> -k1.getValue().compareTo(k2.getValue())).forEach(e -> {
    for(int i=0;i<e.getValue();i++)
    b.add(e.getKey());
    });

    Arrays.stream(a).forEach(i -> System.out.print(i+ " "));
    System.out.println();
    b.stream().forEach(i -> System.out.print(i+ " "));

    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T09:34:51.227

```
public static void main(String[] args) {
         int unsortedArray[] = {0,0,0,1,3,3,2,1,3,5,6,0};

         System.out.println("After sorting, the list elements are: "); //Just to show you it worked. :)
         bubbleSoprt(unsortedArray,unsortedArray.length);
         for(int i =0;i<unsortedArray.length;i++){
             System.out.print( unsortedArray[i] + " "); 
         }
     }

 private static void bubbleSoprt(int []unsortedarray,int lenght){
         int temp;
         for(int counter= 0 ;counter<lenght-1;counter++){
             for(int index = 0;index<lenght-1-counter;index++){
                 if(unsortedarray[index] > unsortedarray[index+1]){
                     temp = unsortedarray[index];
                     unsortedarray[index] = unsortedarray[index+1];
                     unsortedarray[index+1] = temp;
                 }
             }

         }

     } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T09:33:43.537

怎么样[`Arrays.sort(int[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28int%5b%5d%29)？从它的JavaDoc：

> 将指定的数组按数字升序排序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-09T00:45:10.377

## 使用 Java 8

根据频率对数组元素进行排序

**假设 -**
1\. 根据数组的自然出现按升序对数组进行排序
2\. 如果两个数字具有相同的频率，则根据自然数优先级对它们进行排序

**示例**：-`[ 1, 1, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 5]`
**输出**：-    `[ 5, 4, 4, 2, 2, 2, 3, 3, 3, 1, 1, 1, 1, 1]`

**解决方案**： -
**1**。创建一个存储数组元素及其出现的 HashMap
**2**。
**将 hashmap 放入 List 中，我们可以使用自定义比较器3**根据其频率应用排序。对象比较是Java：-
  如果`Obj1`小于则`Obj2`返回`-1`
  如果`Obj1`等于`Obj2`则返回`0`
  如果`Obj1`大于Obj2则返回`+1`
**4**。在我们的例子中，如果两个数字具有相同的频率，那么我们应该将具有自然优先级的数字放在输出中，
  例如： - 如果上面的例子，数字`2`和`3`发生的`3`时间`2`应该排在第一位

```
public static void sortTheArrayByFrequency(int[] array){
    Map<Integer, Integer> map = new HashMap<>();

    //put array elements based on its frequncies
    for(int i : array){
        map.put(i, map.getOrDefault(i,0)+1);  
    }

    //Put the hashmap into a list where we use customized comparator
    List<Map.Entry<Integer, Integer>> list = new ArrayList<>();
    for(Map.Entry<Integer, Integer> e : map.entrySet()){
        list.add(e);
    }

    // list looks like [1=5, 2=3, 3=3, 4=2, 5=1]

    Collections.sort(list, (a, b) -> {
        // if its ouccrances are same then sort natually
        //else sort based on freqncies
        if(a.getValue() == b.getValue())
            return a.getKey() - b.getKey();
        else
            return a.getValue() - b.getValue();
    });

    // list looks like [5=1, 4=2, 2=3, 3=3, 1=5]

    for(Map.Entry<Integer, Integer> e : list){
        int num = e.getValue();
        while(num!=0){
            System.out.print(e.getKey()+ " ");
            num--;
        }
    }
} 
```

**输出**：-
`5 4 4 2 2 2 3 3 3 1 1 1 1 1`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-29T11:08:46.267

**简单和优化。**

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

  public class Frequency {
    public static void main(String[] args) {
     int array[] = {5,2,8,8,5,5,8,1,1,2};
     HashMap<Integer, Integer> data = new HashMap<Integer, Integer>();

     for (int i = 0; i < array.length; i++) {
        if (data.containsKey(array[i])) {
            Integer count = data.get(array[i]) + 1;
            data.put(array[i], count);
        } else {
            data.put(array[i], 1);
        }
    }

    Set<Entry<Integer, Integer>> set = data.entrySet();
    ArrayList<Entry<Integer, Integer>> list = new ArrayList<Entry<Integer, Integer>>(set);
    Collections.sort(list, new Comparator<Map.Entry<Integer, Integer>>() {
        public int compare(Map.Entry<Integer, Integer> o1, Map.Entry<Integer, Integer> o2) {
            return (o2.getValue()).compareTo(o1.getValue());
        }
    });
    for (Entry<Integer, Integer> entry : list) {
        System.out.println(entry.getKey() + " <-> " + entry.getValue());
    }

 }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-07T21:34:30.853

从 Java 8 开始，您可以使用单行来实现这一点（分成几行以获得更好的可读性；-）

```
 int[] numbers = {0, 0, 0, 1, 3, 3, 2, 1, 3, 5, 6, 0};

    List<Integer> result = IntStream.of(numbers)
        .boxed()
        .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))
        .entrySet()
        .stream()
        .sorted(Comparator.comparing(Map.Entry::getValue))
        .map(e -> Stream.generate(e::getKey).limit(e.getValue()))
        .flatMap(Function.identity())
        .collect(Collectors.toList()); 
```

或者，如果您因此更喜欢数组

```
 int[] result = IntStream.of(numbers)
        .boxed()
        .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))
        .entrySet()
        .stream()
        .sorted(Comparator.comparing(Map.Entry::getValue))
        .map(e -> Stream.generate(e::getKey).limit(e.getValue()))
        .flatMap(Function.identity())
        .mapToInt(Integer::intValue)
        .toArray(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-25T12:21:43.153

```
package problems;

import java.util.ArrayList;
import java.util.Comparator;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

public class SortByFrequency {

    public static void main(String args[]) {
        int arr[] = { 2, 5, 2, 6, -1, 9999999, 5, 8, 8, 8 };
        Map<Integer, Integer> map = new HashMap<Integer, Integer>();
        int len = arr.length;
        for (int j = 0; j < len; j++) {
            if (map.get(arr[j]) == null) {
                map.put(arr[j], 1);
            } else {
                map.put(arr[j], (Integer) map.get(arr[j]) + 1);
            }
        }

        Set<Entry<Integer, Integer>> set = map.entrySet();
        ArrayList<Entry<Integer, Integer>> list = new ArrayList<Entry<Integer, Integer>>(set);
        list.sort(new Comparator<Entry<Integer, Integer>>() {
            @Override
            public int compare(Entry<Integer, Integer> o1, Entry<Integer, Integer> o2) {
                if (o1.getValue() < o2.getValue()) {
                    return 1;
                } else if (o1.getValue() > o2.getValue()) {
                    return -1;
                } else if (o1.getValue() == o2.getValue()) {
                    if (o1.getKey() < o2.getKey()) {
                        return 1;
                    } else {
                        return -1;
                    }
                }
                return 0;
            }
        });
        for (Map.Entry<Integer, Integer> en : list) {
            int val = en.getValue();
            while(val!=0){
            System.out.println(en.getKey());
            val--;          
            }
        }
    }

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-11T12:14:11.870

使用 Map、ArrayList 和 Comparator

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.Map.Entry;
import java.util.Set;
import java.util.concurrent.ConcurrentHashMap;

public class OrderArrayFrequency {

public static void main(String[] args) {
    int nums[] = {0,0,0,1,3,3,2,1,3,5,6,0};
    ConcurrentHashMap<Integer, Integer> counts = new ConcurrentHashMap<Integer, Integer>();
    for (int i = 0; i < nums.length; i++) {
        if (counts.containsKey(nums[i])) {
            Integer c = counts.get(nums[i]) + 1;
            counts.put(nums[i], c);
        } else {
            counts.put(nums[i], 1);
        }
    }

    ArrayList<Integer> list = new ArrayList<>();

    for (Integer i : counts.keySet()) {
        list.add(counts.get(i));
    }

    Collections.sort(list, new Comparator<Integer>() {

        @Override
        public int compare(Integer o1, Integer o2) {

            if (o1 < o2)
                return -1;
            return 0;
        }
    });

    Set<Entry<Integer, Integer>> set = counts.entrySet();
    for (Integer i : list) {
        for (Entry<Integer, Integer> entry : set) {
            if (entry.getValue().equals(i)) {
                System.out.print(entry.getKey()+":"+entry.getValue()+ " ");
                counts.remove(entry.getKey());
            }
        }
    }
}
} 
```

输出：2:1 5:1 6:1 1:2 3:3 0:4

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-13T04:22:35.773

已经回答了，但是代码没有很好的解释。所以我会在这里尝试。设要排序的数组为：`int[] array = {4,4,2,2,2,2,3,3,1,1,6,7,5}`

首先让我们计算每个数字的频率：

为此，我们将创建一个 HashMap 数据结构，它将数组元素作为键，将它们的频率作为值。为了存储我们的输出，我们将有一个输出列表。

`HashMap<Integer,Integer> freqMap = new HashMap<>();`

`ArrayList<Integer> output = new ArrayList<>();`

`getOrDefault(key,defaultValue)`：这是一种方便的方法来处理我们想要返回的值而不是 null 的情况，只要找不到键，get 方法就会返回该值。

来到代码：

```
 for(int current : array)
{
    int count = freqMap.getOrDefault(current,0); // if arrayelement is encountered first time it returns 0 otherwise it returns the actual count
    freqMap.put(current,count++); // we increase the count by one and put it in the map
    output.add(current); // we also add the element in the list.
} 
```

现在我们已经在 HashMap 中用它们的频率映射了元素。

```
- 2 comes four times
- 3 comes two times
- 4 comes two times
- 5,6 and 7 comes one time. 
```

现在我们需要根据频率对输出列表进行排序。为此，我们实现了`comparator interface`. 在这个接口中我们有一个方法

```
public int compare(Object obj1, Object obj2) //It compares the first object with the second object. 
```

所以我们创建一个类`SortComparator`来实现这个接口并创建一个`comp`类的对象`SortComparator`。

```
SortComparator comp = new SortComparator(freqMap);
Collections.sort(output,comp);
for(Integer i : output)
{
    System.out.print(i + " ");
} 
```

这是 Comparator 接口的实现：

```
class SortComparator implements Comparator<Integer>
{
    private final Map<Integer,Integer> freqMap;
    SortComparator(Map<Integer,Integer>freqMap)
    {
        this.freqMap = freqMap;
    }
    public int compare(Integer k1,Integer k2)
    {
    //Comparing by frequency
        int freqCompare = freqMap.get(k2).compareTo(freqMap.get(k1));
    //Comparing by value
        int valueCompare = k2.compareTo(k1);

        if(freqCompare == 0)//frequency of both k1 and k2 is same then
        {
            return valueCompare;
        }
        else 
        {
            return freqCompare;
        }
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-30T18:31:56.520

> 简单地使用数组。

```
import java.util.*;
public class SortAccordingToFrequency {
    public static void main(String[] args) {
         int r;
          int b[]={1,1,1,2,1,2,3,6,6,5};int i;int n=b.length;int k=0;
          Arrays.sort(b);
          int[] a=new int[n+1];
          for(r=0;r<n;r++){
              a[r]=b[r];}

          a[r]=1882737378;   //Any arbitrary value.  
        int c=1;int in[]=new int[10];
        int[] e=new int[10];
          for(i=0;i<n;i++){
              if(a[i]==a[i+1])
                  c++;
              else{
                  e[k]=a[i];
                  in[k]=c;k++;
                  c=1;
              }
           }
              for (int f = 0; f < k; f++) {
                    for (int g = 0; g < k-f-1; g++) {
                        if (in[g] > in[g+1]){
                            int[] ans = swap(in[g], in[g+1]);
                            in[g]=ans[0];
                            in[g+1]=ans[1];
                            int[] an = swap(e[g], e[g+1]);
                            e[g]=an[0];
                            e[g+1]=an[1];
                                            }
                                                   }
                                         }
          int d=0;
          for(int x=0;x<k;x++){
              for(int y=0;y<in[x];y++){
                  System.out.print(e[d]);
                   }d++;
          }

    }
    static int[] swap(int n1,int n2)
    {
        int temp;
        temp=n1;
        n1=n2;
        n2=temp;
        int ans[]=new int[2];
        ans[0]=n1;
        ans[1]=n2;
        return ans;
    }

} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-12T07:52:07.187

用python回答：

```
 n=input()
 arr=[int(i) for i in n.split(' ')]
 dict={}
 for i in arr:
     if(i in dict.keys()):
         dict[i]+=1
     else:
         dict[i]=1
 ans=[]
 while len(ans)<=len(arr) and dict!={}:
        maxval=min(list(dict.values()))
        keys=[]
        for key in dict.keys():
              if(dict[key]==maxval):
                   keys+=[key]
        keys=sorted(keys)
        for i in keys:
            ans+=[i]*dict[i]
            del dict[i] 
 print(ans) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-08-04T04:06:37.050

下面的程序有点冗长，但很容易理解。希望这是你所期待的。

```
import java.util.ArrayList;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.TreeMap;

public class Test {

    public static void main(String[] args) {

        int[] arra = {-2,-2,-2,-1,-1,-1,2,2,1,3,1,9,9,1,1,9,9};

        for(int i:sortedArrary(arra)){
            System.out.print(i+" ");
        }
    }

    static int[] sortedArrary(int[] inputArray)
    {
        TreeMap<Integer,Integer> repetitiveElements = null;

        if(inputArray==null || inputArray.length<=0)
            return null;

        repetitiveElements = new TreeMap<Integer,Integer>();
        for(int i=0;i<inputArray.length;i++)
        {
            if(repetitiveElements.containsKey(inputArray[i]))
            {
                repetitiveElements.put(inputArray[i], repetitiveElements.get(inputArray[i])+1);
            }else{
                repetitiveElements.put(inputArray[i],1);
            }
        }

        //System.out.println("repetitive "+repetitiveElements);

        ArrayList<Integer> keysArray = new ArrayList<Integer>(repetitiveElements.size());
        ArrayList<Integer> valuesArray = new ArrayList<Integer>(repetitiveElements.size());
        int key;
        Iterator<Integer> itr = repetitiveElements.keySet().iterator();
        while(itr.hasNext())
        {
            key = itr.next();
            keysArray.add(key);
            valuesArray.add(repetitiveElements.get(key));
        }

        /*
        System.out.println("keys "+keysArray);
        System.out.println("values "+valuesArray);
        */
        LinkedHashMap<Integer,Integer> map = new LinkedHashMap<Integer,Integer>();
        int maxValue=-1;
        int maxKey = -1;
        int pos = -1;

        for(int i=0;i<repetitiveElements.size();i++)
        {
            if(keysArray.get(i)==null)
                continue;

            maxKey = keysArray.get(i);
            maxValue = valuesArray.get(i);
            pos=i;
            for(int j=0;j<repetitiveElements.size();j++)
            {
                if(valuesArray.get(j)!=null && maxValue>valuesArray.get(j))
                {
                    maxValue = valuesArray.get(j);
                    maxKey = keysArray.get(j);
                    pos = j;
                }else if(valuesArray.get(j)!=null && maxValue==valuesArray.get(j)){
                    if(keysArray.get(j)!=null && maxKey>keysArray.get(j))
                    {
                        maxKey = keysArray.get(j);
                        pos = j;
                    }
                }
            }

            map.put(maxKey, maxValue);
            valuesArray.set(pos, null);
            keysArray.set(pos, null);

        }

        for(int i=0;i<keysArray.size();i++)
        {
            if(keysArray.get(i)!=null)
            {
                map.put(keysArray.get(i), valuesArray.get(i));
            }
        }
        itr = map.keySet().iterator();
        int count=0,value;
        while(itr.hasNext())
        {
            key = itr.next();
            value = map.get(key);

            for(int i=0;i<value;i++)
            {
                inputArray[count++] = key;
            }

        }
        return inputArray;
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-11-07T19:18:29.740

// 根据频率按降序对数组进行排序。

```
import java.util.*;

class sorting {

static int x = 0;

public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    int n = sc.nextInt();

    int a[] = new int[n];

    for(int i=0; i<n; i++){
        a[i] = sc.nextInt();
    }

    Arrays.sort(a);
    // l is number of distinct elements in array a.
    int l=1;
    for(int i=0; i<n-1; i++){
        if(a[i]!=a[i+1]){
            l++;
        }
    }

    // creating a 2d array from a 1d array having elements and their frequencies.
    int b[][] = new int[l][2];
    b[x][0] = a[0];
    int c=1;
    for(int i=1; i<n; i++){
        if(a[i]!=a[i-1]){
            b[x][1]=c;
            x++;
            c=1;
            b[x][0] = a[i];
        }
        else{
            c++;
        }

        if(i==n-1){
            b[x][1]=c;
        }
    }

    // sorting 2d array according their frequencies.
    for(int i=0; i<b.length; i++){
        for(int j=i; j<b.length; j++){
            if(b[i][1]<b[j][1]){
                int t = b[i][1];
                b[i][1] = b[j][1];
                b[j][1] = t;
                t = b[i][0];
                b[i][0] = b[j][0];
                b[j][0] = t;
            }
        }
    }

    for(int i=0; i<b.length; i++){
        int k=b[i][1];
        for(int j=0; j<k; j++){
            System.out.print(b[i][0]+" ");
        }
    }

}

// bubble sort.
public static void sort(int a[]) {
    int n = a.length;
    for(int i=0; i<n; i++){
        for(int j=i; j<n; j++){
            if(a[i]>a[j]){
                int t = a[i];
                a[i] = a[j];
                a[j] = t;
            }
        }
    }
}

} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-08-05T12:58:46.277

我不喜欢上面的答案，所以我添加了我所做的。总体思路非常简单——只需按照`Comparator`哈希映射作为参数对列表进行排序。

```
import java.util.*;

public class Main {
    public static void main(String[] args) {
        int[] ar = new int[] {0,0,0,1,3,3,2,1,3,5,6,0};

        Map<Integer,Integer> map = new HashMap<>();
        List<Integer> output = new ArrayList<>();
        for(int current : ar) {
            int count = map.getOrDefault(current, 0);
            map.put(current, count + 1);
            output.add(current);
        }

        FrequencyComparator comp = new FrequencyComparator(map);
        Collections.sort(output, comp);
        for(Integer i : output){
            System.out.print(i + " ");
        }
    }
} 
```

和`FrequencyComparator`：

```
import java.util.Comparator;
import java.util.Map;

public class FrequencyComparator implements Comparator<Integer> {
    private final Map<Integer,Integer> freqMap;
    FrequencyComparator(Map<Integer,Integer> i_freqMap) { this.freqMap = i_freqMap; }

    @Override
    public int compare(Integer k1, Integer k2) {
        int freqCompare = freqMap.get(k1).compareTo(freqMap.get(k2));
        int valueCompare = k1.compareTo(k2);

        // If frequency is equal, then just compare by value, otherwise - compare by the frequency.
        if(freqCompare == 0)
            return valueCompare;
        else
            return freqCompare;
    }
} 
```

输出：

```
2 5 6 1 1 3 3 3 0 0 0 0 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-01-30T10:18:18.997

```
public class SortBasedOnFrequency {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        String[] arr = new String[] { "abc", "def", "qas", "abc", "abc", "def" };

        new SortBasedOnFrequency().sort(arr);
    }

    void sort(String[] a) {
        Map<String, Integer> map = new HashMap<>();
        for (String s : a) {
//convert array to map putting key as the array element and value as the 
//number of occurence.
            map.put(s, map.get(s) == null ? 1 : map.get(s) + 1);
        }

    List<Map.Entry<String, Integer>> mapEntryList = new ArrayList<>map.entrySet());//  sort mapEntry list based on value
        Collections.sort(mapEntryList, new Comparator<Map.Entry<String, Integer>>() {

            @Override
            public int compare(Entry<String, Integer> o1, Entry<String, Integer> o2) {
                // TODO Auto-generated method stub
                return o1.getValue().compareTo(o2.getValue());
            }
        });
//print the object in sorting order of the occurrence.
        for (Entry<String, Integer> m : mapEntryList) {
            System.out.println(m.getKey() + " " + m.getValue());
        }
    }

} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-01-11T11:30:20.127

我是编码新手，我通过使用“for循环”进行了尝试。这是我的代码 -

```
//Driver Program
public static void main(String args[])
{
    int[] array = { 2, 2, 3, 4, 5, 12, 2, 3, 3, 3, 12 };
    sortByCount(array);
}

//Array element's count
static int elementsCount(int ar[], int n)
{
    int count = 0;
    for(int i : ar)
    {
        int max = n;
        if(i == max)
        {
            count++;
        }
        max = i;
    }
    return count;
}

//Ascending order sort by count 
static void sortByCount(int ar[])
{
    int temp = 0;
    for(int i = 0; i < ar.length; i++)
    {
        for(int j = i + 1; j < ar.length; j++)
        {
            if(elementsCount(ar, ar[i]) > elementsCount(ar, ar[j]))
            {
                temp = ar[i];
                 ar[i] = ar[j];
                 ar[j] = temp;
            }
        }   
    }
    printArray(ar);
}

//Print Array
static void printArray(int[] ar)
{
    for(int i : ar)
    {
        System.out.println(i);
    }
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-12-02T18:03:57.887

```
import java.io.*;
import java.lang.*;
import java.util.*;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.Map.Entry;

class SortingFrequency
{
    public static void main(String args[]) throws Exception{
        int i,j,temp,temp1,count;
        int []a=new int[10];
        int []freq=new int[10];
        Scanner s=new Scanner(System.in);
        for(i=0;i<5;i++){
           a[i]=s.nextInt();
           freq[i]=-1;
        }
        for(i=0;i<5;i++)
        {
            count=1;
            for(j=i+1;j<5;j++)
            {
                if(a[i]==a[j])
                {
                    count++;
                    freq[j]=0;
                }
            }
            if(freq[i]!=0)
            {
                freq[i]=count;
            }
        }
        Map map=new HashMap();
        for(i=0;i<5;i++){
            if(freq[i]!=0){
                map.put(a[i],freq[i]);
                System.out.println("map elt"+map);
                System.out.println("a"+a[i]+"fr"+freq[i]);
            }
        }
        Set<Entry<Integer,Integer>> set=map.entrySet();
        List<Entry<Integer, Integer>> list = new ArrayList<Entry<Integer, Integer>>(set);
        Collections.sort( list, new Comparator<Map.Entry<Integer, Integer>>()
        {
            public int compare( Map.Entry<Integer, Integer> o1, Map.Entry<Integer, Integer> o2 )
            {
                return (o2.getValue()).compareTo( o1.getValue() );
            }
        });
        for(Map.Entry<Integer, Integer> entry:list){
            System.out.println(entry.getKey()+" ==== "+entry.getValue());
        }
    }
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-11-15T18:33:07.720

```
 public class Frequency {
        static int key;

        public static void main(String[] args) {
            Integer[] nums = { 7, 3, 4, 3, 4, 3, 4, 3, 6, 5, 7 };

            Map<Integer, Integer> m1;

//Convert the integer array into an Array List.
            ArrayList<Integer> numbers = new ArrayList<Integer>(Arrays.asList(nums));
    //ArrayList to store the number of occurences of numbers.
            List<Integer> values = new ArrayList<Integer>();
//ArrayList to show the array in requested order.
            List<Integer> output = new ArrayList<Integer>();

            m1 = new LinkedHashMap<Integer, Integer>();

            for (int a : numbers) {
    //Add data in Hash map where key is number and value is the total occurences of that number.
                if (m1.containsKey(a)) {
                    int value = m1.get(a);
                    m1.put(a, ++value);
                } else {
                    m1.put(a, 1);
                }
            }
            System.out.println(m1);
            for (Map.Entry<Integer, Integer> entry : m1.entrySet()) {
                values.add(entry.getValue());
            }

            Collections.sort(values, Collections.reverseOrder());
            System.out.println(values.toString());
            for (int m = 0; m < values.size(); m++) {
                for (Map.Entry<Integer, Integer> entry : m1.entrySet()) {
                    if (entry.getValue().equals(values.get(m))) {
                        key = entry.getKey();
                        System.out.println("Key is" + key);
                        for (int k = values.get(m); k > 0; k--) {
                            output.add(key);
                        }
                        break;
                    }

                }
                m1.remove(key);
            }
            System.out.println(output.toString());

        }
    } 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-01-24T17:16:13.357

```
import java.util.*;
class SortArrayByFrequency 
{

    public static void main(String[] args) 
    {
        int a[]={2,2,2,2,4,4,4,4,4,4,5,6,6,6,6,6,1,1,1};
        int count=0;
        int k[]=new int[10];// for elements
        int v[]=new int[10];//store the frquency of corresponding element

        Map<Integer,Integer> map=new HashMap<>();

        for(int i=0;i<a.length;i++)
        {

            if(map.containsKey(a[i]))
            {
                map.put(a[i],map.get(a[i])+1);
            }
            else
            {
                map.put(a[i],1);
            }
        }
        Set<Integer> keys=map.keySet();
        int i=0,j=0;
        for(int key:keys){
            //System.out.println(key+" : "+map.get(key));
            v[i++]=map.get(key);
            k[j++]=key;
        }
        System.out.println("--------------------");

        //Sort the array which contains the frquency of elements
        for(int f=0;f<i-1;f++){
            //System.out.println(k[f]+" "+v[f]);
            int min=f;
            for(int g=f+1;g<i;g++)
            {
                if(v[min]>v[g])
                {
                    min=g;
                }
            }
            int temp=v[min];
            v[min]=v[f];
            v[f]=temp;
            //here we swap the element according to sorting ------------
            int temp1=k[min];
            k[min]=k[f];
            k[f]=temp1;
        }
        System.out.println("-----Array sort by frequency in ascending order------------");
        for(int l=0;l<i;l++){
            //System.out.println(v[l]+"    :: "+k[l]);
            for(int p=0;p<v[l];p++)
            System.out.print(k[l]+" ");
        }

    }
} 
```

升序
//输出：5 1 1 1 2 2 2 2 6 6 6 6 6 4 4 4 4 4 4

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2018-11-27T10:21:06.300

根据频率排序数组：

```
public static void main(String[] args) {
    int arr[] = { 2, 5, 2, 6, -1, 9999999, 5, 8, 8, 8 };
    Map<Integer, Integer> mp = new LinkedHashMap<>();
    List<Integer> res = new ArrayList<>();
    int count = 1;
    for (int i = 0; i < arr.length; i++) {
        if (!mp.containsKey(arr[i])) {
            mp.put(arr[i], count);
        } else {
            mp.put(arr[i], mp.get(arr[i]) + 1);
        }
    }
    if (!mp.containsValue(2)) {
        for (Integer ab : arr)
            res.add(ab);
        Collections.sort(res);
        Collections.reverse(res);
        System.out.println(res);
    } else {
        Set<Entry<Integer, Integer>> set = mp.entrySet();
        List<Entry<Integer, Integer>> list = new ArrayList<>(set);
        Collections.sort(list, new Comparator<Entry<Integer, Integer>>() {
            @Override
            public int compare(Entry<Integer, Integer> obj1, Entry<Integer, Integer> obj2) {
                if (obj2.getValue() > obj1.getValue())
                    return 1;
                if (obj2.getValue() < obj1.getValue())
                    return -1;
                else
                    return 0;
            }
        });
        for (Map.Entry<Integer, Integer> e : list) {
            for (int i = 1; i <= e.getValue(); i++)
                res.add(e.getKey());
        }
        System.out.println(res);

    }
} 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2018-08-15T16:08:37.690

```
import java.util.Arrays;
import java.util.Comparator;

public class TestString {
    public static void main(String[] args) {

        int arrTemp[] = { 2, 2, 2, 1, 1, 4, 5, 6, 6, 7, 7, 7, 7 };
        Arrays.sort(arrTemp);
        Integer[][] sortedArray = new Integer[6][2];
        int count = 0;
        sortedArray[count][0] = arrTemp[0];
        sortedArray[count][1] = 1;
        for (int i = 0; i < arrTemp.length - 1; i++) {
            for (int j = 1; j < arrTemp.length; j++) {
                if (arrTemp[i] == arrTemp[j]) {
                    sortedArray[count][1] = sortedArray[count][1] + 1;
                    i = j;
                } else {
                    ++count;
                    sortedArray[count][0] = arrTemp[j];
                    sortedArray[count][1] = 1;
                    i = j;
                }
            }
        }

        Arrays.sort(sortedArray, new Comparator<Integer[]>() {

            @Override
            public int compare(Integer[] o1, Integer[] o2) {
                return o1[1].compareTo(o2[1]);
            }
        });

        for (int row = 0; row < 6; row++) {
            for (int col = 0; col < sortedArray[row][1]; col++) {
                System.out.print(sortedArray[row][0] + " ");
            }
        }
    }
} 
```

# c# - kinect色框内的按钮

> ID：11842985
> 
> 赞同：3
> 
> 时间：2012-08-07T09:29:17.110
> 
> 标签：c#, wpf, kinect

如何将按钮带入 kinect 应用程序的视频帧中。我想将 WPF 控件带入 colorframe 对象如何做到这一点.. 任何想法

以下链接中提供的源代码不起作用..

[http://dotnet.dzone.com/news/kinecting-dots-adding-buttons](http://dotnet.dzone.com/news/kinecting-dots-adding-buttons)

如果您有关于在颜色框架内添加动画列表框的想法，我们也很感激 :)

我正在开发 kinect SDK 1.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:53:06.307

从您的评论中，听起来您犯了一个严重的错误，您将按钮***插入***框架中，而不是框架***上***。然后按钮是图像的一部分，而不是表单上的控件，这意味着它是无用的。希望这可以帮助！

# c++ - 未定义符号“PDEContentGetNumElemsSELPROTO”

> ID：11842986
> 
> 赞同：1
> 
> 时间：2012-08-07T09:29:17.923
> 
> 标签：c++, plugins, adobe

我在做adobe acrobat 插件开发时遇到了一个问题。

我的开发环境：

```
windows 7 64-bit
visual studio 2008 
```

并安装了adobe acrobat插件开发支持工具AcroXPIWizInstaller。我成功创建了这个插件项目，当我使用“PDEContentGetNumElems”时出现问题。错误信息：

> “错误 C2065：‘PDEContentGetNumElemensSELPROTO’：未声明的标识符”

在这种方法中，我右键单击->“转到定义”我找到文件“PERCalls.h”和“PDEContentGetNumElemensSELPROTO”我无法转到定义。获取错误信息：

> “未定义符号‘PDEContentGetNumElemsSELPROTO’。”

# html - 如何在浏览器上调整图片大小

> ID：11842987
> 
> 赞同：1
> 
> 时间：2012-08-07T09:29:19.817
> 
> 标签：html

我需要将我网站的背景图片设置为这张图片。

![在此处输入图像描述](../Images/5df0dce03743874e15a44119234912e9.png)

但是，当我查看该页面时，我会在该页面上看到如下所示的空白：

![在此处输入图像描述](../Images/6355c3adb4857ff456b0174d89c1f82e.png)

我希望图片覆盖整个空间，并且当我在任何计算机上打开该站点时，它必须显示相同。最后我无法在图像中心的中间部分写文字。不是在顶部，而是在图片的中间。这是我到目前为止所拥有的

![在此处输入图像描述](../Images/2da029a2a69c7e21c5a85944a6ecd18a.png)

我需要在中间部分的页面上有这个文本。不是在页面的高处，而是在中间。这是我到目前为止的一小段代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ka-ge" lang="ka-ge" >
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<style>
#links { 
  postiton:absolute;
    margin: 0 auto; 
    width: 4800px; 
    font-size:50px;
    clear: both; 
    display: block;
    z-index:-90;
}
#test a {
    float: right;
}
a, a:active, a:visited {
    color: light-blue;
    a {text-decoration:none;}
}
</style>
<style>

a {text-decoration:none;}
</style>

<body    >

<a href="eng/index.html"><img src ='english.gif' style="float:right"  width="90" height="90"> </a>
<a href="russ/index.html"><img src ='russian.gif' alt="Russian flag" style="float:right"  width="90" height="90"/></a>
<a href="index.html"> <img src="georgian.jpg"  style="float:right" width="90" height="90"/></a>
<img src="11.gif" width="100%" height="100%"/>
<div id="links">

<a href=" index.html " >მთავარი </a>
&nbsp;
<a href=" ბაკურიანი.html ">ბაკურიანი </a>
&nbsp;
<a href=" გუდაური.html ">გუდაური </a>
&nbsp;
<a href=" ზღვა.html ">ზღვა </a>
&nbsp;
<a href=" კახეთი.html ">კახეთი </a>
&nbsp;
<a href=" სვანეთი.html ">სვანეთი </a>
&nbsp;
<a href=" ვარძია.html ">ვარძია </a>
&nbsp;
<a href=" ქართლი.html ">ქართლი </a>
&nbsp;
<a href=" ძველი_თბილისი.html ">ძველი_თბილისი </a>
&nbsp;
<a href=" დაკავშირება.html ">კონტაქტი </a>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:16:39.373

我对您的代码做了一些修改，如下所示：

```
</head>
< style>
#links { 

position:absolute;
margin: 0 auto; 
top: 50%;       //centers vertically
left: 50%;     //centers horizontally
width: 4800px; 
font-size:50px;
clear: both; 
display: block;
z-index:-90;
} 
```

...

在 body 标签中：

```
<body background="11.gif"> 
```

上面的身体标签将您的图像设置在背景中。您可以调整图像的大小，即使用 <img> 标签中的“height”和“width”属性来拉伸或压缩它们来设置它们的大小。现在您可以在背景图像上放置任何文本、链接或其他图像。

试试看！

# c# - MVC Razor，包含来自另一个项目的 JS/CSS 文件

> ID：11842988
> 
> 赞同：18
> 
> 时间：2012-08-07T09:29:29.287
> 
> 标签：c#, javascript, asp.net-mvc, razor

我有一个使用 Razor 语法的 C# MVC 项目。
为了能够重用一些代码，我想将我的一些 JavaScript 和 CSS 文件放在不同的项目中，并以某种方式包含它们。
这就是我的脚本目前包含的方式：

```
<script src="@Url.Content("~/Scripts/bootstrap-typeahead.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/bootstrap-dropdown.js")" type="text/javascript"></script> 
```

目前，脚本与 cshtml 文件在同一个项目中，但它们应该放在 Common.Web 项目中......
我想要做的是这个（虽然不起作用）：

```
<script src="@Url.Content("Common.Web/Scripts/bootstrap-typeahead.js")" type="text/javascript"></script>
<script src="@Url.Content("Common.Web/Scripts/bootstrap-dropdown.js")" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T14:44:41.810

我就是这样做的。但是，我将 Javascript 文件和其他内容嵌入到另一个 DLL 中，然后像这样从我的剃刀语法中调用它们。这是我使用的代码。在视图中：脚本示例：

```
 <script src=@Url.Action("GetEmbeddedResource", "Shared", new { resourceName = "Namespace.Scripts.jquery.qtip.min.js", pluginAssemblyName = @Url.Content("~/bin/Namespace.dll") }) type="text/javascript" ></script> 
```

图片示例：

```
@Html.EmbeddedImage("corporate.gif", new { width = 150, height = 50}) 
```

这是我的辅助方法：

```
 public static MvcHtmlString EmbeddedImage(this HtmlHelper htmlHelper, string imageName, dynamic htmlAttributes)
    {
        UrlHelper url = new UrlHelper(HttpContext.Current.Request.RequestContext);
        var anchor = new TagBuilder("img");
        anchor.Attributes["src"] = url.Action("GetEmbeddedResource", "Shared",
                                              new
                                                  {
                                                      resourceName = "Namespace.Content.Images." + imageName,
                                                      pluginAssemblyName = url.Content("~/bin/Namespace.dll")
                                                  });

        if (htmlAttributes != null)
        {
            string width = "";
            string height = "";
            PropertyInfo pi = htmlAttributes.GetType().GetProperty("width");
            if (pi != null)
                width = pi.GetValue(htmlAttributes, null).ToString();

            pi = htmlAttributes.GetType().GetProperty("height");
            if (pi != null)
                height = pi.GetValue(htmlAttributes, null).ToString();

            if (!string.IsNullOrEmpty(height))
                anchor.Attributes["height"] = height;

            if (!string.IsNullOrEmpty(width))
                anchor.Attributes["width"] = width;
        }
        return MvcHtmlString.Create(anchor.ToString());
    } 
```

最后是我的共享控制器：

```
 [HttpGet]
    public FileStreamResult GetEmbeddedResource(string pluginAssemblyName, string resourceName)
    {
        try
        {
            string physicalPath = Server.MapPath(pluginAssemblyName);
            Stream stream = ResourceHelper.GetEmbeddedResource(physicalPath, resourceName);
            return new FileStreamResult(stream, GetMediaType(resourceName));
            //return new FileStreamResult(stream, GetMediaType(tempResourceName));
        }
        catch (Exception)
        {
            return new FileStreamResult(new MemoryStream(), GetMediaType(resourceName));
        }
    }

    private string GetMediaType(string fileId)
    {
        if (fileId.EndsWith(".js"))
        {
            return "text/javascript";
        }
        else if (fileId.EndsWith(".css"))
        {
            return "text/css";
        }
        else if (fileId.EndsWith(".jpg"))
        {
            return "image/jpeg";
        }
        else if (fileId.EndsWith(".gif"))
        {
            return "image/gif";
        }
        else if (fileId.EndsWith(".png"))
        {
            return "image/png";
        }
        return "text";
    } 
```

资源助手：

```
 public static class ResourceHelper
{
    public static Stream GetEmbeddedResource(string physicalPath, string resourceName)
    {
        try
        {
            Assembly assembly = PluginHelper.LoadPluginByPathName<Assembly>(physicalPath);

            if (assembly != null)
            {
                string tempResourceName = assembly.GetManifestResourceNames().ToList().FirstOrDefault(f => f.EndsWith(resourceName));
                if (tempResourceName == null)
                    return null;
                return assembly.GetManifestResourceStream(tempResourceName);
            }
        }
        catch (Exception)
        {

        }

        return null;
    }
} 
```

插件助手

```
public static T LoadPluginByPathName<T>(string pathName)
{
    string viewType = typeof(T).GUID.ToString();

    if (HttpRuntime.Cache[viewType] != null)
        return HttpRuntime.Cache[viewType] is T ? (T)HttpRuntime.Cache[viewType] : default(T);

    object plugin = Assembly.LoadFrom(pathName);
    if (plugin != null)
    {
        //Cache this object as we want to only load this assembly into memory once.
        HttpRuntime.Cache.Insert(viewType, plugin);
        return (T)plugin;
    }

    return default(T);
} 
```

请记住，我将这些用作嵌入内容！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T12:17:50.023

据我所知，您不能这样做，因为路径将位于网站之外。

但是，您可以执行以下操作：

1) 将您想要共享的所有脚本放在 Common.Web\Scripts
2) 对于您的 Web 应用程序中的每个脚本文件[“添加为链接”](http://msdn.microsoft.com/en-us/library/9f4t9t92.aspx)到您的 Common.Web 脚本（*您甚至不需要执行此步骤；它但是很高兴看到您的 Web 应用程序在 VS 中使用了哪些脚本*）
3）向您的 Web 应用程序添加一个构建后事件，该事件将脚本从 Common.Web\Scripts 复制到您的 WebApp\Scripts 文件夹：

> 复制 $(ProjectDir)..\Common.Web\Scripts* $(ProjectDir)\Scripts

因此，从您在 Visual Studio 的角度来看，您将只有一个位置来更新可供多个项目使用的 .js 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T14:26:02.493

而不是使用`Url`助手使用相对寻址。您尝试做的事情毫无意义，因为帮助程序用于解析与其项目相关的路径。

由于您正在尝试使用另一个项目的资源，因此可以假设您预先知道将在哪里部署每个项目。尽管我不喜欢这种做法，但我可以为此想出一个务实的解决方案。

* * *

如果您的两个应用程序位于 url：

```
http://www.mysite.com/app1
http://www.mysite.com/Common.Web 
```

你可以这样处理：

```
<script src="@Url.Content("~")/../Common.Web/Scripts/bootstrap-typeahead.js")" type="text/javascript"></script> 
```

意思是，解决我的应用程序根文件夹，上一层，然后下路径的其余部分。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-14T11:41:28.337

我只是在寻找相同答案时发现了这个问题。感谢之前的发帖人，他们明确指出，仅使用 Visual Studio 无法做到这一点：您最终**会**得到原始文件的副本，或不完整的交付文件集。

每当我拥有简单的通用功能时，我都不想重新发明轮子，所以我的硬盘上有一个用于存放通用脚本的文件夹：/Common/Javascript

我的网络项目位于：/ProjectName

所以我的常用脚本位于我的网络项目之外。

我通过源代码管理解决了这个问题。大多数源代码控制存储库都具有在另一个目录中显示文件的功能。我的步骤是：

1.  在我的 VS 项目下创建空文件夹：/ProjectName/Scripts/Common
2.  将空文件夹提交到源代码管理
3.  使用 Subversion（我的源代码控制），我设置了一个“extern”，以便我的公共文件链接到新文件夹。其他源代码控制软件可能将此称为“链接”或其他类似的东西。
4.  更新了新文件夹，我的常用 Javascript 文件进来了，现在可以添加到我在 Visual Studio 中的 Web 项目中。

显然，我通过更改 Visual Studio 中的文件并提交它们来测试这一点。更改确实反映在位于 /Common/Javascript 中的原始文件中。

我现在可以简单地向需要使用相同功能的任何其他 Web 项目添加一个外部：当然，现在更改这些文件会带来额外的风险，因为我可能会意外地破坏使用它们的其他项目。虽然我可以配置一个 extern 来使用文件的特定版本，但这不是我现在想要做的；我将等待这种复杂性何时发生。

# css - Facebook登录按钮位置

> ID：11842989
> 
> 赞同：0
> 
> 时间：2012-08-07T09:29:31.857
> 
> 标签：css, button, position, facebook-login

我的页面中有一个 facebook 登录按钮。我输入了一个 div ：

```
<div id="signin">               
    <div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1" registration-url="index.php?reg=1"></div>                
</div> 
```

![在此处输入图像描述](../Images/4298f8c8ec714f9c5e6e7288e126c646.png)

当用户已经登录 facebook 并在我的应用程序中注册时，此应用程序出现：

![在此处输入图像描述](../Images/1044e4bff5b262a86700bf2599e3a65d.png)

我有两个问题：

*   当页面加载时，登录按钮首先出现在我页面的一个极端角落。然后它回到正确的位置。

*   如果用户未注册/登录（第一个按钮），我希望它看起来低一点，这可能吗？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:38:31.817

`signin`尝试将DIV的 CSS 设置`overflow: hidden`为不显示任何未对齐的内容。这将修复出现在页面角落的登录按钮。

没有降低按钮的解决方案，但您可以尝试这种方法：

1.  设置`data-show-faces="false"`为隐藏面。
2.  用户登录后，使用人脸桩插件实现和登录按钮一样的效果。

上述步骤将让您正确配置每个元素，以便您可以使用 CSS 将登录按钮向下移动，同时保持与以前一样的面孔。

# mysql - LEFT JOIN 没有结果

> ID：11842993
> 
> 赞同：1
> 
> 时间：2012-08-07T09:29:36.680
> 
> 标签：mysql

```
So basically I have two tables: 
```

u_contracts

```
+--------+---------+------------------------------+
| id     | user_id | reschedule_wait_confirm_till |
+--------+---------+------------------------------+
| 107742 |   19982 | 2012-08-08 17:10:41          |
|  38548 |    4622 | 2012-08-08 10:24:42          |
|  98483 |   36707 | 2012-08-08 21:39:08          |
|  45165 |   17632 | 2012-08-08 23:13:57          |
| 131285 |   47527 | 2012-08-08 08:33:58          |
| 131686 |   40194 | 2012-08-08 12:18:09          |
|  91749 |   11021 | 2012-08-08 12:22:05          |
+--------+---------+------------------------------+ 
```

restruct_mail_history

```
+----+---------+---------------------+
| id | user_id | _date               |
+----+---------+---------------------+
|  1 |   47527 | 2012-08-07 12:16:51 |
+----+---------+---------------------+ 
```

现在我需要从`u_contracts`具有`reschedule_wait_confirm_till`明天日期并且在`restruct_mail_history`.

到目前为止，我有一个这样的工作查询：

```
SELECT
  uc.user_id
FROM
  u_contracts uc
WHERE
  uc._status = 6
  AND DATE( uc.reschedule_wait_confirm_till ) = DATE( ADDDATE( now(), 1 ) )
  AND uc.user_id NOT IN ( SELECT rmh.user_id FROM restruct_mail_history rmh WHERE DATE( rmh._date ) = DATE( now() )); 
```

输出：

```
19982
4622
36707
17632
40194
11021 
```

现在我不喜欢 WHERE 中的 SELECT 语句，所以我打算像这样进行 LEFT JOIN：

```
SELECT
  uc.user_id
FROM
  u_contracts uc
LEFT JOIN
  restruct_mail_history rmh
ON
  uc.user_id = rmh.user_id
WHERE
  uc._status = 6
  AND DATE( uc.reschedule_wait_confirm_till ) = DATE( ADDDATE( now(), 1 ) ); 
```

输出：

```
19982
4622
36707
17632
47527
40194
11021 
```

现在这给了我所有`u_contracts`的结果，但是当我添加必要的参数`AND DATE( rmh._date ) != DATE( now() )`时，它绝对没有结果。

知道我做错了什么吗？

*编辑*如果我将最后一行更改为`AND DATE( rmh._date ) = DATE( now() )`，它只给我**不**应该在列表中的结果，女巫 id 正确。为什么它不能以相反的方式工作？

已经谢谢你了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:32:44.597

试试这个：

```
SELECT uc.user_id
FROM u_contracts uc
     LEFT JOIN restruct_mail_history rmh
        ON uc.user_id = rmh.user_id
WHERE uc._status = 6 AND
      DATE( uc.reschedule_wait_confirm_till ) = DATE( ADDDATE( now(), 1) ) AND
      (rmh.user_id IS NULL OR DATE( rmh._date ) != DATE( now() )); 
```

请参见此处：[联接的视觉解释。](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:34:07.967

试试这个

```
SELECT 
  uc.user_id 
FROM 
  u_contracts uc 
LEFT JOIN 
  restruct_mail_history rmh 
ON 
  uc.user_id = rmh.user_id and   uc._status = 6 
  AND DATE( uc.reschedule_wait_confirm_till ) = DATE( ADDDATE( now(), -147 ) ); 
```