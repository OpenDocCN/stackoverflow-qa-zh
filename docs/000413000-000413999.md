# StackOverflow 问答 000413000-000413999

# visual-studio - 我在哪里可以获得 VS 的 Windows 6.0 引导程序文件？

> ID：413005
> 
> 赞同：3
> 
> 时间：2009-01-05T12:46:10.643
> 
> 标签：visual-studio, build-error, vs-error

我已经**删除**了 Windows 6 SDK 文件夹，现在我的 VS 拒绝构建我的部署项目。我需要取回文件才能重新开始工作。

> **在“C:\Program Files\Microsoft SDKs\ **Windows\v6.0A** \Bootstrapper\Engine”中**找不到所需的文件“setup.bin”****

 **我在互联网上搜索过，我能找到的所有帖子都提到了他们的防病毒程序[错误地删除了特定文件，但没有人真正提供这些文件！](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/34f41417-89b2-48a1-af64-4904c5710e30/)

我可以从哪里获得这些**Windows\v6.0A** SDK 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-05T14:46:27.280

有人建议：

> 好的，我进行了[VS](http://msdn2.microsoft.com/en-us/vstudio/products/default.aspx)的修复安装并添加了文件夹。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T12:55:03.917

这篇[MSDN 博客文章](http://blogs.msdn.com/windowssdk/archive/2007/11/30/released-visual-studio-2008-with-embedded-windows-sdk-components.aspx)让我[下载了 Windows SDK。](http://www.microsoft.com/downloads/details.aspx?familyid=4377F86D-C913-4B5C-B87E-EF72E5B4E065&displaylang=en) *（平台 SDK 和 .NET Framework SDK 的组合）*

那应该重新创建这些文件夹。

# c# - Linq2Sql, OOP, DependencyInjection 问题

> ID：413013
> 
> 赞同：1
> 
> 时间：2009-01-05T12:50:15.377
> 
> 标签：c#, oop, dependency-injection

我还在为 OOP 概念和依赖注入而苦苦挣扎，所以请耐心等待。

我已经使用 User 表生成了我的 Linq2Sql 模型，现在我希望能够向该用户发送确认电子邮件，因此我为我的 User 对象创建了一个部分类文件，我觉得添加一个 SendConfirmationEmail() 方法是很自然的到用户类。此方法将使用 MailService 发送实际的电子邮件，我想使用依赖注入来传递服务，所以我在 User 对象上创建了一个构造函数重载，如下所示

```
public User(IMailService service) : this()
{
    _service = service;
} 
```

SendConfirmationEmail 方法看起来像这样

```
public void SendConfirmationEmail()
{
    _service.SendMail(params...);
} 
```

我意识到这是一种糟糕的依赖注入，我希望稍后切换到依赖注入框架，因为我对此有了更多的了解。

对我来说，问题是我需要从我的模型 dll 到我的服务 dll 的引用，这看起来不正确，因为我不确定我的 linq2sql 生成的实体与依赖注入框架和 OOP 概念的关系如何（我认为 ninject 看起来最有希望）。

我希望比我有更多经验的人能告诉我我是否朝着正确的方向前进。我知道我可以让它发挥作用，但我想教育自己在同一步骤中以正确的方式做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-05T13:56:31.140

我个人会更改您架构中的一些内容：

*   我不认为 SendConfirmationEmail 应该是您的 User 对象的方法。但应该是另一个以用户为参数的对象上的方法。（这也更好地将您的 Dal 与其他逻辑分开。
*   第二个在这个方法中使用这样的东西：

    Services.Get<IMailService>().SendMail(params ...);

您可以将服务实现为 folowin（只是一个示例）：

```
public class Services
{
    protected static Dictionary<Type, object> services = new Dictionary<Type, object>();

    private Services() 
    {
    }

    static Services()
    {
        // hard coded implementations...
        services.Add(typeof(IMailService), new DefaultMailServiceImplementation());
    }

    public static T Get<T>() where T : class
    {
        Type requestedType = typeof(T);
        return services[requestedType] as T;
    }
} 
```

通过使用“服务”类（或您喜欢的名称），您可以在 IOC 框架和您的代码之间添加一个额外的层，这使得更改 IOC 框架变得容易。只需将 Get 方法中的实现更改为使用一个。您还可以在静态构造函数中使用硬编码的临时解决方案（直到您使用 IOC 框架）（就像我在上面的示例中所做的那样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T12:56:58.920

这种方法的问题是实体大部分时间来自 LINQ-to-SQL 后端，因此不会使用您的构造函数（LINQ-to-SQL 以自己的方式创建对象; 您不能强制 LINQ-to-SQL 使用*您的*构造函数） - 所以这只对您自己创建的（少数）对象有用。默认情况下，数据绑定（等）通常也会使用无参数构造函数。

我想知道这作为接受服务或通过工厂/单例获取服务本身的实用方法是否不会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T13:53:10.617

我认为你可以这样做，但你可能想做两件事来保护自己免受未来的跨层依赖问题：

1.  为您的用户对象创建一个接口。您应该这样做，因为不这样做将意味着使用此业务对象的所有内容都必须引用 LINQ dll。
2.  将依赖注入从构造函数移到属性中。您这样做是因为构造函数注入往往会限制您动态创建对象的能力。这样做虽然会带来问题，因为您必须为`_service`. 您可以通过创建 IMailService 的“空”实现并将其设置为 _service 的默认值来解决此问题。

# bash - 在 vim 中折叠 bash 函数的问题

> ID：413015
> 
> 赞同：4
> 
> 时间：2009-01-05T12:50:27.267
> 
> 标签：bash, vim, folding

我有一个以函数定义开头的 bash 脚本文件，如下所示：

```
#!/bin/bash
# .....
# .....
function test {
...
...
}
...
... 
```

我使用 vim 7.2，并且我已经设置`g:sh_fold_enabled=1`为使用 bash 启用折叠。问题是功能测试的折叠没有正确结束，即它一直持续到文件末尾。它看起来像这样：

```
#!/bin/bash
# .....
# .....
+-- 550 lines: function test {----------------------------------------
~
~ 
```

函数本身只有大约 40 行，我想要一些看起来像这样的东西（“图像”说的不仅仅是一千个词，他们说......）：

```
#!/bin/bash
# .....
# .....
+-- 40 lines: function test {----------------------------------------
...
...
...
~
~ 
```

有谁知道解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-15T17:43:06.787

I have done some research, and found a way to fix the problem: To stop vim from folding functions until the end of file, I had to add a skip-statement to the syntax region for `shExpr` (in the file `sh.vim`, usually placed somewhere like `/usr/share/vim/vim70/syntax/`):

```
syn region shExpr ... start="{" skip="^function.*\_s\={" end="}" ... 
```

This change stops the syntax file from thinking that the `{` and `}` belongs to the shExpr group, when they actually belong to the function group. Or that is how I have understood it, anyway.

Note: This fix only works for the following syntax:

```
function test
{
....
} 
```

and not for this:

```
function test {
....
} 
```

A quick and dirty fix for the last bug is to remove shExpr from the @shFunctionList cluster.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T21:27:27.033

It should just work, but there seems to be a bug in the syntax file. The fold region actually starts at the word 'function' and tries to continue to the closing '}', but the highlighting for the '{...}' region takes over the closing '}' and the fold continues on searching for another one. If you add another '}' you can see this in action:

```
function test {
    ...
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-13T15:30:20.990

There seems to be a simpler solution on [Reddit](https://www.reddit.com/r/vim/comments/1rvcqe/bash_folding_not_working/).

To quote the author in the post:

> The options I use are:
> 
> ```
> syntax=enable
> 
> filetype=sh
> 
> foldmethod=syntax
> 
> let g:sh_fold_enabled=3
> 
> g:is_sh=1 
> ```
> 
> EDIT: Workaround
> 
> vim -u NONE -c 'let g:sh_fold_enabled=7' -c ':set fdm=syntax' -c 'sy on' file.sh

g:sh_fold_enabled=4 seemed to be the agreed upon fold-level in the discussion. This solution is working perfectly for me. I did not have to edit the syntax file.

Edit: g:sh_fold_enabled=5 is actually the right one. Not 4. Also, as the poster showed on Reddit, those commands must go before any other setting in vimrc, except the plugins.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-03T17:38:03.377

with vim 8.2+ the following worked for me:

```
 syntax enable
    let g:sh_fold_enabled=5
    let g:is_sh=1
    set filetype=on
    set foldmethod=syntax
    " :filteype plugin indent on
    foldnestmax=3 "i use 3, change it to whatever you like. 
```

it did not matter where i put it in my vimrc.

and this turns on syntax folding and the file type plugin for all installed file types.

# html - 为什么不是我的"font-family" 属性继承自 ? 我的代码：body { font-family:"Verdana",Arial,Helvetica,sans-serif; } .myfont { font-family:"Verdana",Arial,Helvetica,sans-serif; } <body> Hello <select> <option> Hello </option> </select> <s

> ID：413017
> 
> 赞同：7
> 
> 时间：2009-01-05T12:51:21.320
> 
> 标签：html, css, inheritance, font-family

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-05T12:56:15.663

如果您使用：

```
select {
  font-family: inherit;
} 
```

它会正常工作的。当涉及到表单控件时，CSS 有点古怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-06T04:45:49.817

是的 font-family: inherit 似乎是最好的。
然而在其他方面：

```
 body, .myfont
  {
    font-family:Verdana,Arial,Helvetica,sans-serif;
  } 
```

如果您希望所有选择元素都使用它，您也可以将 '.myfont' 替换为 'select'。

热点提示。不要在字体系列名称周围使用引号，并非所有浏览器都能理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-06T04:41:49.310

> 如果我必须更改“选择”的字体，为什么我必须复制样式？

只是让您知道，即使您确实必须“复制样式”，您也不必像上面那样*复制样式。*

您只需将 samy 样式应用于`body`并`.myfont`执行以下操作：

```
 .myfont, body 
      {
        font-family:"Verdana",Arial,Helvetica,sans-serif;
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-06T04:46:26.023

詹姆斯的回答对我来说似乎是最优雅和正确的，但我想我只是添加另一种方法来做到这一点：

```
.myfont option {
     font-family: "Verdana"; /* etc */
} 
```

# sharepoint - 如果我想使用 MOSS 2007 单点登录，我的用户必须是 Active Directory 用户吗？

> ID：413028
> 
> 赞同：2
> 
> 时间：2009-01-05T12:57:17.657
> 
> 标签：sharepoint, single-sign-on

我想使用 MOSS 2007 的单点登录功能，但读到服务器需要位于 Active Directory 环境中。我理解，但这是否意味着我的所有用户都必须是 Active Directory 用户？如果我的用户使用表单身份验证（使用自定义成员资格提供程序？）进行身份验证，我是否可以不使用 MOSS2007 单点登录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-05T13:00:21.397

可以，但您必须编写自己的[SSO 提供程序](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.portal.singlesignon.issoprovider.aspx)。默认值仅适用于 Windows 身份。

编辑：如果你想这样做，MSDN 上有一个用于创建它们的[演练。](http://msdn.microsoft.com/en-us/library/ms566925.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-15T17:27:38.390

当我使用 SSO 将 SP 服务器与 CS 服务器连接时，SP 用户的角色和用户权限是否与用户一起转移，所以如果我创建了具有读取角色的新 sp 用户，然后我访问了 cs 服务器，我会发现为CS中的那个用户具有读取权限？

# c# - 如何在 C# 中调用“CreateFile”？

> ID：413047
> 
> 赞同：9
> 
> 时间：2009-01-05T13:10:54.307
> 
> 标签：c#, pinvoke

在得到了这么多关于[从存储设备中检索 .MBR](https://stackoverflow.com/questions/412634/how-to-create-file-with-help-of-p-invoke-to-read-boot-sector-and-display-mbr)的信息之后，结论是使用 P/Invoke 来调用`CreateFile`.

但是如何在 C# 中做到这一点？请举例说明！对你的帮助表示感谢！！！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-05T13:14:09.447

```
[DllImport("kernel32.dll", CharSet = CharSet.Auto, 
    CallingConvention = CallingConvention.StdCall, 
    SetLastError = true)]
public static extern SafeFileHandle CreateFile(
    string lpFileName,
    uint dwDesiredAccess,
    uint dwShareMode,
    IntPtr SecurityAttributes,
    uint dwCreationDisposition,
    uint dwFlagsAndAttributes,
    IntPtr hTemplateFile
); 
```

[http://pinvoke.net/default.aspx/kernel32/CreateFile.html](http://pinvoke.net/default.aspx/kernel32/CreateFile.html)

# php - 在 Drupal 中写入位置数据

> ID：413049
> 
> 赞同：1
> 
> 时间：2009-01-05T13:12:44.053
> 
> 标签：php, drupal

我有一些在 Drupal 中创建新节点的代码，但我想将一些数据写入 Location 字段。我该怎么做？是否可以使用 $node 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-05T14:21:45.270

位置字段是您要添加到自定义节点的新字段吗？

你将不得不处理几个钩子。 [插入](http://api.drupal.org/api/function/hook_insert/5)、 [更新](http://api.drupal.org/api/function/hook_update/5)、 [删除](http://api.drupal.org/api/function/hook_delete/5)、 [加载](http://api.drupal.org/api/function/hook_load/5)、 [表单](http://api.drupal.org/api/function/hook_form/5)、 [查看](http://api.drupal.org/api/function/hook_view/5)。

因此，您需要将该字段添加到您的表中。显示表单中的字段。插入新节点时保存。编辑节点时更新节点。将该字段重新加载到节点中。删除节点时删除行。并在查看节点时显示该字段（预告片或完整）。[节点参考](http://api.drupal.org/api/file/developer/hooks/node.php/5)。

在每个挂钩页面的底部都有一个使用 {mytable} 的示例和一个名为“extra”的字段。

[编辑]*附加信息。*

[location 模块](http://drupal.org/project/location)添加了 $node->location 和 $node->locations 字段。所以我想回答你的问题。是的。您可以通过 $node 对象修改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-06T09:12:58.873

$node->location->{field_name} 如果节点有一个位置，或者 $node->locations[{num}]->{field_name} 应该工作。

# c# - C#：如何从 XML 元素中删除命名空间信息

> ID：413050
> 
> 赞同：10
> 
> 时间：2009-01-05T13:13:37.763
> 
> 标签：c#, .net, xml, namespaces

如何从 C# 中的每个 XML 元素中删除“xmlns:...”命名空间信息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-05T13:27:56.380

尽管 Zombiesheep 给出了警示性的回答，但我的解决方案是使用 xslt 转换来清洗 xml 以执行此操作。

**洗.xsl：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="no" encoding="UTF-8"/>

  <xsl:template match="/|comment()|processing-instruction()">
    <xsl:copy>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*">
    <xsl:element name="{local-name()}">
      <xsl:apply-templates select="@*|node()"/>
    </xsl:element>
  </xsl:template>

  <xsl:template match="@*">
    <xsl:attribute name="{local-name()}">
      <xsl:value-of select="."/>
    </xsl:attribute>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-10-09T00:00:09.827

从这里[http://simoncropp.com/working-around-xml-namespaces](http://simoncropp.com/working-around-xml-namespaces)

```
var xDocument = XDocument.Parse(
@"<root>
    <f:table xmlns:f=""http://www.w3schools.com/furniture"">
        <f:name>African Coffee Table</f:name>
        <f:width>80</f:width>
        <f:length>120</f:length>
    </f:table>
  </root>");

xDocument.StripNamespace();
var tables = xDocument.Descendants("table");

public static class XmlExtensions
{
    public static void StripNamespace(this XDocument document)
    {
        if (document.Root == null)
        {
            return;
        }
        foreach (var element in document.Root.DescendantsAndSelf())
        {
            element.Name = element.Name.LocalName;
            element.ReplaceAttributes(GetAttributes(element));
        }
    }

    static IEnumerable GetAttributes(XElement xElement)
    {
        return xElement.Attributes()
            .Where(x => !x.IsNamespaceDeclaration)
            .Select(x => new XAttribute(x.Name.LocalName, x.Value));
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-06-10T09:09:17.383

我有一个类似的问题（需要从特定元素中删除命名空间属性，然后将 XML 作为`XmlDocument`BizTalk 返回），但是一个奇怪的解决方案。

在将 XML 字符串加载到`XmlDocument`对象中之前，我进行了文本替换以删除有问题的命名空间属性。起初它似乎是错误的，因为我最终得到了无法被 Visual Studio 中的“XML Visualizer”解析的 XML。这就是最初让我放弃这种方法的原因。

但是，文本仍然可以加载到`XmlDocument`，我可以将其输出到 BizTalk。

还要注意，早些时候，我在尝试使用删除命名空间属性时遇到了一个死胡同`childNode.Attributes.RemoveAll()`——它又回来了！

# java - 不使用 JEditorPane 在 Applet 中查看 HTML

> ID：413053
> 
> 赞同：1
> 
> 时间：2009-01-05T13:14:21.773
> 
> 标签：java, applet

我有一个小的（500kb）swing 小程序，它使用 JEditorPane 在其中显示非常简单/有限的一组小 HTML 页面，但是这似乎不能 100% 流畅地工作，一些客户得到一个显示没有任何 java 异常的空白页面. 该页面在我的机器上运行正常。我需要一种更可靠的方式向所有用户显示 HTML 页面。

如果有一个小的 + 免费类来代替 JEditorPane 的任何想法，或者是否有一个简单的修复方法可以使它更可靠（非空白）

```
private JEditorPane m_editorPane = new JTextPane();

    m_editorPane.setEditable( false);

    m_editorPane.setBackground(new Color(239  ,255, 215));
    m_editorPane.setBounds(30,42,520,478 );
    m_editorPane.setDoubleBuffered(true);
    m_editorPane.setBorder(null);

    m_editorPane.registerEditorKitForContentType("text/html", "com.xxxxx.SynchronousHTMLEditorKit");

m_editorPane.setPage(ResourceLoader.getURLforDataFile(param.trim())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-05T13:35:44.350

虽然我以前没有使用过，但[Lobo](http://lobobrowser.org/java-browser.jsp)是一个开源的 Java 网络浏览器，支持 HTML 4、Javascript 和 CSS 2。

与[`JEditorPane`](http://java.sun.com/javase/6/docs/api/javax/swing/JEditorPane.html)仅支持 HTML 3.2 相比，Lobo 似乎是加载现代网页的更好选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T13:24:29.520

AFAIK，JEditorPane 是一个非常原始的 HTML 组件：它被 CSS 混淆了，对 JS 一无所知。
我怀疑您会发现“小型+免费”类做得更好，HTML 解析和显示不是一项简单的业务，今天更是如此。

也许最好让业务中的大人物来处理这项任务，即。使用 Internet Explorer 或 Mozilla 组件（取决于可用的组件等）：[JDIC：在 Java 中嵌入 Web 浏览器](http://workshop.evolutionzone.com/2007/08/30/jdic-embedding-a-web-browser-in-java/ "JDIC：在 Java 中嵌入 Web 浏览器")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-02T00:58:46.433

我最近 POC 编辑了几个 java HTML 渲染解决方案。我们决定使用 JEditorPane 是因为我们确实需要最小化 jar 的大小，并且它内置在 Swing 中。但是，我遇到的最好的图书馆是[Flying Saucer](http://code.google.com/p/flying-saucer/)。它没有任何 js 支持，但它的渲染质量和 api 是一流的，它是“免费的”（LGLP），100% Java，只有大约 1mb（对我们来说仍然太大，但与其他选项相比很小）。但是，它只呈现严格的 XHTML（所有属性值都必须被引用，所有标签格式正确），但这可能取决于您的需要（并且[HtmlCleaner](http://htmlcleaner.sourceforge.net/)或其他一些此类实用程序可能有助于实现这一目标）。

# visual-studio-2008 - VS2008 在代码视图而不是设计视图中打开 .cs 文件

> ID：413054
> 
> 赞同：5
> 
> 时间：2009-01-05T13:15:18.353
> 
> 标签：visual-studio-2008, configuration

我正在用 VS2008 - c# 编写一个 Windows 服务。当我在解决方案资源管理器中双击 .cs 文件时，默认情况下它会在设计视图中打开（Win​​dows 窗体设计器）。有没有办法将其配置为默认在代码视图（文本编辑器）中打开，因为这让我发疯。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-05T13:18:41.327

右键单击 .cs 文件并选择“打开方式”。当对话框打开时，选择“CSharp Editor”，然后单击“Set as Default”按钮。所有表单文件现在将在源代码编辑器中打开。当您想返回时，您可以随时返回并选择“CSharp 表单编辑器”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T13:18:28.393

非默认方法 -> 右键单击​​并选择“查看代码”...

对于默认方法， Jon Skeet在 Google 上[进行](https://stackoverflow.com/questions/399768?sort=votes)了快速搜索。

# ios - 在 UITableView 中设置滚动位置

> ID：413055
> 
> 赞同：27
> 
> 时间：2009-01-05T13:15:27.853
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我有一个应用程序，它的工作方式与 iPhone 的联系人应用程序的工作方式有些相似。当我们添加一个新的联系人时，用户将被定向到一个包含联系人信息的仅查看屏幕。如果我们从导航栏中选择“所有联系人”，用户将导航到最近添加的联系人所在的所有联系人列表。

我们可以使用以下命令将视图移动到特定行：

```
 [itemsTableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionBottom]; 
```

...但它不起作用。我打电话后马上打电话：

```
 [tableView reloadData]; 
```

我想我不应该`selectRowAtIndexPath:animated:scrollPosition`在这里调用方法。但如果不在这里，那么在哪里？

在以下方法之后是否有任何委托方法被调用？

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2009-01-20T04:07:59.790

我想我有一个类似的应用程序：项目列表，点击“+”-> 新屏幕，返回并查看更新的列表，滚动以在底部显示添加的项目。

总而言之，我输入`reloadData`了`viewWillAppear:animated:`和`scrollToRowAtIndexPath:...`。`viewDidAppear:animated:`

```
// Note: Member variables dataHasChanged and scrollToLast have been
// set to YES somewhere else, e.g. when tapping 'Save' in the new-item view.

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    if (dataHasChanged) {
        self.dataHasChanged = NO;
        [[self tableView] reloadData];
    } else {
        self.scrollToLast = NO; // No reload -> no need to scroll!
    }
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    if (scrollToLast) {
        NSIndexPath *scrollIndexPath = [NSIndexPath indexPathForRow:([dataController count] - 1) inSection:0];
        [[self tableView] scrollToRowAtIndexPath:scrollIndexPath atScrollPosition:UITableViewScrollPositionBottom animated:YES];
    }
} 
```

我希望这有帮助。如果您在列表中间添加一些内容，则可以轻松滚动到该位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T07:56:39.523

你可以试试这个，当我点击 uitableview 的按钮滚动时，我的应用程序类似于你。

```
[tableviewname setContentOffset:CGPointMake(0, ([arrayofcontact count]-10)*cellheight) animated:YES]; 
```

10 表示您要向上滚动多少个单元格

希望对你有帮助：-）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-19T09:42:38.823

当从 设置偏移量时，滚动动画是不可避免的`viewDidAppear(_:)`。设置初始滚动偏移的更好位置是`viewWillAppear(_:)`. 您需要强制表格视图的布局，因为此时未定义它的内容大小。

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)

    tableView.setNeedsLayout()
    tableView.layoutIfNeeded()

    if let selectedIndexPath = selectedIndexPath, tableView.numberOfRows(inSection: selectedIndexPath.section) > 0 {
        tableView.scrollToRow(at: selectedIndexPath, at: .top, animated: false)
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T15:22:16.367

您是否添加了足够的虚拟联系人来测试滚动？似乎只有当您的 tableView 具有一定大小时，iPhone才会找到要滚动的输入。

这是在我的项目中对我有用的代码。我使用上一个按钮，因此我将 tableview 向下滚动一点，它通常会与 UITABLEVIEWSCROLLPOSITION 一起使用。（如果不能“看到”上一个单元格，我的上一个按钮将不起作用。

忽略一些自定义方法调用。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {

    //Show the navButtons
    [self navButtonAnimation];

    DetailsStandardCell *cell = (DetailsStandardCell *)textField.superview.superview.superview;

    self.parentController.lastCell = cell;

    //Code to scroll the tableview to the previous indexpath so the previous button will work. NOTE previous button only works if its target table cell is visible.
    NSUInteger row = cell.cellPath.row;
    NSUInteger section = cell.cellPath.section;

    NSIndexPath *previousIndexPath = nil;

    if (cell.cellPath.row == 0 && cell.cellPath.section != 0) //take selection back to last row of previous section
    {
    NSUInteger previousIndex[] = {section -1, ([[self.sections objectForKey:[NSNumber numberWithInt:section - 1]]count] -1)};
    previousIndexPath = [[NSIndexPath alloc] initWithIndexes:previousIndex length:2];   
    }
    else if (cell.cellPath.row != 0 && cell.cellPath.section != 0)
    {
        NSUInteger previousIndex[] = {section, row - 1};
        previousIndexPath = [[NSIndexPath alloc] initWithIndexes:previousIndex length:2];       

    }

    [self.theTableView scrollToRowAtIndexPath: cell.cellPath.section == 0 ? cell.cellPath : previousIndexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];

} 
```

# user-interface - 创建浏览器内 UI 编辑器的最佳选择是什么？

> ID：413056
> 
> 赞同：2
> 
> 时间：2009-01-05T13:16:20.600
> 
> 标签：user-interface, modeling, rich-internet-application

我想创建一个可以在浏览器中使用的简单 UI 编辑器。它基本上应该有一个 UI 控件调色板和一个用于布局和修改控件的画布。生成的用户创建的 UI 模型应该存储在某种后端并符合（抽象）UI 描述语言（例如 XForms）。UI 模型应该可以作为文件下载（例如 XForms 文档）。一个可视化的浏览器内 XForms 设计器可能是我想要实现的一个很好的例子。UI 编辑器应该可以跨浏览器使用。

请记住，我提到 XForms 只是作为示例。我不想依赖浏览器的功能。我的目标模型。目标模型（例如 XForms）只能用作存储格式。工具包/框架应确保编辑器中设计时 UI 的跨浏览器呈现。

可能的候选人可能是：

*   GWT
*   Adobe Flex 3
*   日食说唱

UI 编辑器不会在生产中使用。我的重点在于编辑器的快速发展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-05T15:00:58.813

The [extjs](http://extjs.com/) JavaScript library is good for implementing GUIs in JavaScript. It can also be used with Adobe AIR or Google Gears for creating offline applications, and works well with different browsers.

Here is an example of a GUI editor for extjs: [http://tof2k.com/ext/formbuilder/](http://tof2k.com/ext/formbuilder/)

# javascript - 正则表达式获取花括号之间的字符串

> ID：413071
> 
> 赞同：137
> 
> 时间：2009-01-05T13:21:34.003
> 
> 标签：javascript, regex

不幸的是，尽管在我记忆中，我每年至少学习一次正则表达式，但我总是忘记，因为我很少使用它们。今年我的新年决心是不再尝试学习正则表达式 -*所以今年为了让我免于流泪，我将把它交给 Stack Overflow*。（去年圣诞节混音）。

我想以这种格式传入一个字符串`{getThis}`，并返回该字符串`getThis`。任何人都可以帮助我坚持我的新年决心吗？

* * *

堆栈溢出的相关问题：

*   [如何将常规引号（即'、"）转换为 LaTeX/TeX 引号（即`'、`''）](https://stackoverflow.com/questions/346567/how-can-one-turn-regular-quotes-i-e-into-latex-tex-quotes-i-e)
*   [正则表达式：提取字符串中两个标签之间的子字符串](https://stackoverflow.com/questions/1237/regex-to-pull-out-a-section-a-substing-from-a-string-between-two-tags)
*   [正则表达式替换字符串中的所有 \n，但没有 [code] [/code] 标记内的那些](https://stackoverflow.com/questions/328387/regex-to-replace-all-n-in-a-string-but-no-those-inside-code-code-tag)

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2009-01-05T13:24:12.830

尝试

```
/{(.*?)}/ 
```

这意味着，匹配 { 和 } 之间的任何字符，但不要贪心 - 匹配以 } 结尾的最短字符串（? 停止 * 贪心）。括号可让您提取匹配的部分。

另一种方法是

```
/{([^}]*)}/ 
```

这匹配除 } 字符之外的任何字符（另一种不贪婪的方式）

* * *

## 回答 #2

> 赞同：157
> 
> 时间：2009-01-05T13:59:43.867

```
/\{([^}]+)\}/

/        - delimiter
\{       - opening literal brace escaped because it is a special character used for quantifiers eg {2,3}
(        - start capturing
[^}]     - character class consisting of
    ^    - not
    }    - a closing brace (no escaping necessary because special characters in a character class are different)
+        - one or more of the character class
)        - end capturing
\}       - the closing literal brace
/        - delimiter 
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2009-01-05T13:25:55.540

如果您的字符串将始终采用该格式，则正则表达式是多余的：

```
>>> var g='{getThis}';
>>> g.substring(1,g.length-1)
"getThis" 
```

`substring(1``{`表示从（刚刚超过第一个）开始一个字符，并且`,g.length-1)`表示将字符取到（但不包括）字符串长度减去一的字符。这是有效的，因为该位置是从零开始的，即`g.length-1`最后一个位置。

For readers other than the original poster: If it *has* to be a regex, use `/{([^}]*)}/` if you want to allow empty strings, or `/{([^}]+)}/` if you want to only match when there is at least one character between the curly braces. Breakdown:

*   `/`: start the regex pattern
    *   `{`: a literal curly brace
        *   `(`: start capturing
            *   `[`: start defining a class of characters to capture
                *   `^}`: "anything other than `}`"
            *   `]`: OK, that's our whole class definition
            *   `*`: any number of characters matching that class we just defined
        *   `)`: done capturing
    *   `}`: a literal curly brace must immediately follow what we captured
*   `/`: end the regex pattern

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2017-05-30T08:52:56.723

Try this:

```
/[^{\}]+(?=})/g 
```

For example

```
Welcome to RegExr v2.1 by #{gskinner.com},  #{ssd.sd} hosted by Media Temple! 
```

will return `gskinner.com`, `ssd.sd`.

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2011-08-09T10:53:30.090

Here's a simple solution using javascript replace

```
var st = '{getThis}';

st = st.replace(/\{|\}/gi,''); // "getThis" 
```

As the accepted answer above points out the original problem is easily solved with substring, but using replace can solve the more complicated use cases

If you have a string like "randomstring999[fieldname]" You use a slightly different pattern to get fieldname

```
var nameAttr = "randomstring999[fieldname]";

var justName = nameAttr.replace(/.*\[|\]/gi,''); // "fieldname" 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2018-08-09T09:54:03.910

Try this

```
let path = "/{id}/{name}/{age}";
const paramsPattern = /[^{\}]+(?=})/g;
let extractParams = path.match(paramsPattern);
console.log("extractParams", extractParams) // prints all the names between {} = ["id", "name", "age"] 
```

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2009-12-15T17:58:56.773

This one works in Textmate and it matches everything in a CSS file between the curly brackets.

```
\{(\s*?.*?)*?\} 
```

`selector {. . matches here including white space. . .}`

If you want to further be able to return the content, then wrap it all in one more set of parentheses like so:

```
\{((\s*?.*?)*?)\} 
```

and you can access the contents via $1.

This also works for functions, but I haven't tested it with nested curly brackets.

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2010-11-11T12:26:38.583

You want to use regex lookahead and lookbehind. This will give you only what is inside the curly braces:

```
(?<=\{)(.*?)(?=\}) 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-06-22T20:30:57.340

i have looked into the other answers, and a vital logic seems to be missing from them . ie, select everything between two CONSECUTIVE brackets,but NOT the brackets

so, here is my answer

```
\{([^{}]+)\} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-08-23T09:13:56.833

Regex for getting arrays of string with curly braces enclosed occurs in string, rather than just finding first occurrence.

```
 /\{([^}]+)\}/gm 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-11-02T19:30:48.260

```
var re = /{(.*)}/;
var m = "{helloworld}".match(re);
if (m != null)
    console.log(m[0].replace(re, '$1')); 
```

The simpler `.replace(/.*{(.*)}.*/, '$1')` unfortunately returns the entire string if the regex does not match. The above code snippet can more easily detect a match.

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-09-23T12:17:00.547

Try this one, according to [http://www.regextester.com](http://www.regextester.com) it works for **js** normaly.

`([^{]*?)(?=\})`

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2021-01-29T23:50:10.417

This one matches everything even if it finds multiple closing curly braces in the middle:

`\{([\s\S]*)\}`

Example:

```
{
  "foo": {
    "bar": 1,
    "baz": 1,
  }
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-11-06T15:25:00.703

You can use this regex recursion to match everythin between, even another `{}` (like a JSON text) :

```
\{([^()]|())*\} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-05-30T12:20:08.923

Even this helps me while trying to solve someone's problem,

> Split the contents inside curly braces (`{}`) having a pattern like, `{'day': 1, 'count': 100}`.

For example:

```
#include <iostream> 
#include <regex> 
#include<string> 
using namespace std; 

int main() 
{ 
    //string to be searched
    string s = "{'day': 1, 'count': 100}, {'day': 2, 'count': 100}";

    // regex expression for pattern to be searched 
    regex e ("\\{[a-z':, 0-9]+\\}");
    regex_token_iterator<string::iterator> rend;

    regex_token_iterator<string::iterator> a ( s.begin(), s.end(), e );
    while (a!=rend) cout << " [" << *a++ << "]";
    cout << endl;

    return 0; 
} 
```

Output:

```
[{'day': 1, 'count': 100}] [{'day': 2, 'count': 100}] 
```

# asp.net-mvc - 在 mvc 视图中注册自定义 web 控件？

> ID：413072
> 
> 赞同：0
> 
> 时间：2009-01-05T13:23:02.050
> 
> 标签：asp.net-mvc, webforms, migration

我正在进行一个项目，我正在将网站的一些代码从 WebForms 迁移到 MVC - 不幸的是，没有足够的时间一次完成所有工作，所以我将不得不做一些......不太漂亮的解决方案。

尽管我编写的继承自标准 GridView 控件的自定义控件存在问题

```
namespace Controls {
    public class MyGridView : GridView { ... }
} 
```

我像往常一样添加到 web.config 文件中：

```
<configuration>
...
   <system.web>
   ...
      <pages>
      ...
         <controls>
         ...
         <add tagPrefix="Xui" namespace="Controls"/>
         </controls>
      </pages>
   </system.web>
</configuration> 
```

然后在 MVC 视图上：

```
<Xui:MyGridView ID="GridView1" runat="server" ...>...</Xui:MyGgridView> 
```

但是，我收到一个解析器错误，指出无法找到控件。我怀疑这与 MVC 和 WebForms 的混合有关，但是我/曾经认为这种混合应该是可能的，对此有什么调整吗？我意识到这个解决方案远非理想，但是没有时间“做正确的事”。

谢谢

* * *

**编辑：**
我忘了补充一点，我也已经尝试过使用它，结果相同。

此外，不幸的是，我需要在多个页面上使用它，因此将其添加到 web.config 将是理想的解决方案，但是如果有一个仅适用于单个页面的解决方案，那么这也是可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-05T13:29:19.403

不能直接在视图中使用 <%@ Register %> 指令吗？如果它不会在整个应用程序中使用，为什么要在 web.config 中使用它？我不确定它是否会起作用，因为我没有花太多时间使用 ASP.NET MVC，但你可以试试。

# proxy - 广告支持基于免费 WIFI 的互联网接入点

> ID：413076
> 
> 赞同：-1
> 
> 时间：2009-01-05T13:24:03.453
> 
> 标签：proxy, wifi, access-point

我们想设置一个小型 Wifi 接入点，在我们的商店内外提供免费互联网，商店横幅弹出窗口添加到他们使用此网络连接浏览的任何 Web 内容中。我们需要做什么？我期待某种 C# 解决方案，但我也可以使用 Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-05T13:42:45.180

你可以试试[CoovaAP](http://coova.org/CoovaAP)。它提供对 dd-wrt ​​路由器的支持，并且相当容易使用和配置。我在家里成功使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T13:45:38.900

大多数 Wifi 接入点允许通过后端的 Radius 服务器控制访问。要添加一些额外的内容，您可以考虑将[deloradius](http://daloradius.wiki.sourceforge.net/)与[CoovaChilli](http://coova.org/CoovaChilli)结合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T13:28:37.600

你可以试试 Socifi——免费的公共 WiFi 广告和货币化平台。

[www.Socifi.com](https://www.socifi.com)

# django - 如何在 django 中自动填充字段？

> ID：413080
> 
> 赞同：14
> 
> 时间：2009-01-05T13:24:41.503
> 
> 标签：django, forms, integration-testing

我有一个模型 Question 带有一个名为**userid**的字段，在提出问题之前，需要登录，我希望在保存时捕获当前登录用户的用户 ID 并将其分配给 Question 模型的用户 ID。

请注意，我没有在我的表单上显示用户 ID，即在 Question 模型中我声明了用户 ID，如下所示；

类问题(models.Model): ... userid=models.ForeignKey(User, editable=false) ...

如何将登录用户 ID 分配给 Question 模型**userid**？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-05T14:17:11.567

您的代码可能如下所示：

```
from django.contrib.auth.decorators import login_required

class QuestionForm(forms.ModelForm):
    class Meta:
         model = Question

@login_required
def ask(request):
    form = QuestionForm(request.POST)

    if form.is_valid():
        question = form.save(False)
        question.userid = request.user
        question.save()

    #... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-19T04:55:22.430

[这篇博](http://www.b-list.org/weblog/2008/dec/24/admin/)文（由 James Bennett 撰写）可能对您也很有用……它提供了一种几乎完全符合您要求的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-26T03:04:48.507

对于更新的 - 并且可能会更新 - 资源，我推荐官方 Django 文档。这个例子已经进入了[`ModelAdmin`](https://docs.djangoproject.com/en/stable/ref/contrib/admin/#modeladmin-methods)文档的 ModelAdmin 方法部分。

如果你像我一样，你会很想抓住那个例子并运行，但你可能会从放慢速度，花几分钟阅读，然后实施 - 我当然会......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T18:57:34.810

要记住的一件事是，如果不绕过 django 的设计约束，您将无法从模型访问请求对象（以及当前用户）。

因此，诸如自动填充 created_by 和 updated_by 等字段的巧妙技巧在 Django 中不起作用。如@Daevaorn 所示，您必须在视图中手动设置此类字段。

# c# - LINQ 中的 SQL ISNULL 等价物？

> ID：413084
> 
> 赞同：51
> 
> 时间：2009-01-05T13:25:50.517
> 
> 标签：c#, sql, linq, isnull

在 SQL 中，您可以运行 ISNULL(null,'') 您将如何在 linq 查询中执行此操作？

我在这个查询中有一个联接：

```
var hht = from x in db.HandheldAssets
        join a in db.HandheldDevInfos on x.AssetID equals a.DevName into DevInfo
        from aa in DevInfo.DefaultIfEmpty()
        select new
        {
        AssetID = x.AssetID,
        Status = xx.Online
        }; 
```

但是我有一列的位类型不可为空（xx.online），如果它为空，如何将其设置为假？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-01-05T14:34:59.927

既然`aa`集合/对象可能为空，你能检查一下`aa == null`吗？

（`aa`/`xx`可能可以互换（问题中的拼写错误）；原始问题谈论`xx`但仅定义`aa`）

IE

```
select new {
    AssetID = x.AssetID,
    Status = aa == null ? (bool?)null : aa.Online; // a Nullable<bool>
} 
```

或者，如果您希望默认为`false`(not `null`)：

```
select new {
    AssetID = x.AssetID,
    Status = aa == null ? false : aa.Online;
} 
```

* * *

更新; 为了回应反对票，我进行了更多调查……事实是，这是正确的方法！以下是关于 Northwind 的示例：

```
 using(var ctx = new DataClasses1DataContext())
        {
            ctx.Log = Console.Out;
            var qry = from boss in ctx.Employees
                      join grunt in ctx.Employees
                          on boss.EmployeeID equals grunt.ReportsTo into tree
                      from tmp in tree.DefaultIfEmpty()
                      select new
                             {
                                 ID = boss.EmployeeID,
                                 Name = tmp == null ? "" : tmp.FirstName
                        };
            foreach(var row in qry)
            {
                Console.WriteLine("{0}: {1}", row.ID, row.Name);
            }
        } 
```

这是 TSQL - 几乎是我们想要的（它不是`ISNULL`，但它足够接近）：

```
SELECT [t0].[EmployeeID] AS [ID],
    (CASE
        WHEN [t2].[test] IS NULL THEN CONVERT(NVarChar(10),@p0)
        ELSE [t2].[FirstName]
     END) AS [Name]
FROM [dbo].[Employees] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[FirstName], [t1].[ReportsTo]
    FROM [dbo].[Employees] AS [t1]
    ) AS [t2] ON ([t0].[EmployeeID]) = [t2].[ReportsTo]
-- @p0: Input NVarChar (Size = 0; Prec = 0; Scale = 0) []
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 3.5.30729.1 
```

QED？

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-01-05T14:21:44.023

您可以使用`??`操作符设置默认值，但首先您必须在**dbml**文件中的必填字段 ( )中将`Nullable`属性设置为`true`**`xx.Online`**

 **```
var hht = from x in db.HandheldAssets
        join a in db.HandheldDevInfos on x.AssetID equals a.DevName into DevInfo
        from aa in DevInfo.DefaultIfEmpty()
        select new
        {
        AssetID = x.AssetID,
        Status = xx.Online ?? false
        }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-08-28T17:27:28.800

我经常遇到序列问题（与离散值相反）。如果我有一个整数序列，并且我想对它们求和，当列表为空时，我将收到错误“InvalidOperationException：无法将空值分配给类型为 System.Int32 的成员，这是一个不可为空的值类型。”。

我发现我可以通过将序列转换为可空类型来解决这个问题。如果可空类型序列为空，SUM 和其他聚合运算符不会引发此错误。

所以例如像这样的东西

```
MySum = MyTable.Where(x => x.SomeCondtion).Sum(x => x.AnIntegerValue); 
```

变成

```
MySum = MyTable.Where(x => x.SomeCondtion).Sum(x => (int?) x.AnIntegerValue); 
```

当没有行匹配 where 子句时，第二个将返回 0。（当没有行匹配时，第一个抛出异常）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T13:41:32.170

看起来类型是布尔值，因此永远不能为空，默认情况下应该为假。

# client-server - 客户端-服务器同步模式/算法？

> ID：413086
> 
> 赞同：245
> 
> 时间：2009-01-05T13:26:03.620
> 
> 标签：client-server, data-synchronization

我有一种感觉，必须有客户端-服务器同步模式。但我完全没能用谷歌搜索一个。

情况很简单——服务器是中心节点，多个客户端连接并操作相同的数据。数据可以被拆分为原子，如果发生冲突，服务器上的任何内容都具有优先级（以避免让用户解决冲突）。由于潜在的大量数据，部分同步是首选。

对于这种情况，是否有任何模式/良好做法，或者如果您不知道 - 您的方法是什么？

以下是我现在认为解决它的方法：与数据并行，将保存一个修改日志，所有事务都带有时间戳。当客户端连接时，它以合并的形式接收自上次检查以来的所有更改（服务器检查列表并删除添加的内容，然后删除，合并每个原子的更新等）。瞧，我们是最新的。

另一种方法是保留每条记录的修改日期，而不是执行数据删除，只需将它们标记为已删除。

有什么想法吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2009-01-05T13:47:02.237

您应该了解分布式变更管理的工作原理。查看 SVN、CVS 和其他管理增量工作的存储库。

您有几个用例。

*   同步更改。您的更改日志（或增量历史）方法看起来很适合这个。客户端将他们的增量发送到服务器；服务器将增量合并并分发给客户端。这是典型的案例。数据库将此称为“事务复制”。

*   客户端已失去同步。通过备份/恢复或由于错误。在这种情况下，客户端需要从服务器获取当前状态而不通过增量。这是从大师到细节的副本，该死的增量和性能。这是一次性的事情；客户端坏了；不要试图优化这一点，只需实现一个可靠的副本。

*   客户怀疑。在这种情况下，您需要将客户端与服务器进行比较，以确定客户端是否是最新的并且需要任何增量。

您应该遵循按顺序编号每个更改的数据库（和 SVN）设计模式。这样，客户端可以在尝试同步之前提出一个简单的请求（“我应该有什么修订？”）。即便如此，查询（“自 2149 年以来的所有增量”）对于客户端和服务器来说处理起来非常简单。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-03-16T06:22:00.467

作为团队的一员，我做了很多涉及数据同步的项目，所以我应该有能力回答这个问题。

数据同步是一个相当广泛的概念，有太多要讨论的地方。它涵盖了一系列不同的方法及其优缺点。这是基于两个视角的可能分类之一：同步/异步、客户端/服务器/点对点。同步实施严重依赖于这些因素、数据模型复杂性、传输和存储的数据量以及其他要求。因此，在每种特定情况下，选择应该支持满足应用程序要求的最简单的实现。

基于对现有现成解决方案的回顾，我们可以描述几个主要的同步类别，同步对象的粒度不同：

*   整个文档或数据库的同步用于基于云的应用程序，例如 Dropbox、Google Drive 或 Yandex.Disk。当用户编辑和保存文件时，新的文件版本会完全上传到云端，覆盖之前的副本。如果发生冲突，两个文件版本都会被保存，以便用户可以选择哪个版本更相关。
*   键值对的同步可用于具有简单数据结构的应用程序，其中变量被认为是原子的，即不分为逻辑组件。此选项类似于同步整个文档，因为值和文档都可以完全覆盖。但是，从用户的角度来看，文档是一个由许多部分组成的复杂对象，而键值对只是一个短字符串或一个数字。因此，在这种情况下，我们可以使用更简单的冲突解决策略，考虑更相关的值，如果它是最后更改的。
*   结构为树或图的数据同步用于更复杂的应用程序，其中数据量大到足以在每次更新时发送整个数据库。在这种情况下，必须在单个对象、字段或关系级别解决冲突。我们主要关注这个选项。

因此，我们将我们的知识融入到这篇文章中，我认为这可能对每个对该主题感兴趣的人都非常有用 => 基于核心数据的 iOS 应用程序中的数据同步 ( [http://blog.denivip.ru/index.php/2014/04 /data-syncing-in-core-data-based-ios-apps/?lang=en](http://blog.denivip.ru/index.php/2014/04/data-syncing-in-core-data-based-ios-apps/?lang=en) )

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-01-05T13:50:49.763

您真正需要的是[运营转型](http://en.wikipedia.org/wiki/Operational_transformation)(OT)。这甚至可以在许多情况下迎合冲突。

这仍然是一个活跃的研究领域，但周围有各种 OT 算法的实现。我已经参与此类研究多年了，如果您对这条路线感兴趣，请告诉我，我很乐意为您提供相关资源。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-01-05T13:32:22.437

这个问题不是很清楚，但如果我是你，我会研究[乐观锁定。](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)它可以用服务器为每条记录返回的序列号来实现。当客户端尝试保存记录时，它将包括它从服务器接收到的序列号。如果序列号与接收更新时数据库中的内容匹配，则允许更新并且序列号递增。如果序列号不匹配，则不允许更新。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-01-23T01:37:35.860

大约 8 年前，我为一个应用程序构建了一个这样的系统，我可以分享它随着应用程序使用量的增长而演变的几种方式。

我首先将来自任何设备的每个更改（插入、更新或删除）记录到“历史”表中。因此，例如，如果有人更改了“联系人”表中的电话号码，系统将编辑 contact.phone 字段，并添加一条历史记录 action=update, table=contact, field=phone, record=[联系人 ID]，值 = [新电话号码]。然后，每当设备同步时，它都会下载自上次同步以来的历史记录项并将它们应用到其本地数据库。这听起来像上面描述的“事务复制”模式。

一个问题是当项目可以在不同的设备上创建时保持 ID 的唯一性。当我开始这个时我不知道 UUID，所以我使用自动递增 ID 并编写了一些在中央服务器上运行的复杂代码来检查从设备上传的新 ID，如果有冲突，将它们更改为唯一 ID，并且告诉源设备更改其本地数据库中的 ID。只是更改新记录的 ID 并没有那么糟糕，但是如果我在联系人表中创建一个新项目，然后在事件表中创建一个新的相关项目，现在我有我还需要的外键检查和更新。

最终我了解到 UUID 可以避免这种情况，但是到那时我的数据库变得非常大，我担心完整的 UUID 实现会产生性能问题。因此，我没有使用完整的 UUID，而是开始使用随机生成的 8 个字符的字母数字键作为 ID，并保留现有代码以处理冲突。在我当前的 8 个字符键和 UUID 的 36 个字符之间的某个地方，一定有一个最佳点可以消除冲突而不会产生不必要的膨胀，但由于我已经有了冲突解决代码，所以没有优先尝试这个.

下一个问题是历史表大约是数据库其余部分的 10 倍。这使得存储变得昂贵，并且对历史表的​​任何维护都可能很痛苦。保留整个表允许用户回滚之前的任何更改，但这开始感觉像是矫枉过正。所以我在同步过程中添加了一个例程，如果设备上次下载的历史项目不再存在于历史表中，服务器不会给它最近的历史项目，而是给它一个包含所有数据的文件那个帐户。然后我添加了一个 cronjob 来删除超过 90 天的历史记录项。这意味着用户仍然可以回滚不到 90 天的更改，如果他们至少每 90 天同步一次，更新将像以前一样是增量的。但如果他们等待的时间超过 90 天，

这一更改将历史记录表的大小减少了近 90%，因此现在维护历史记录表只会使数据库大两倍而不是十倍。这个系统的另一个好处是，如果需要，同步仍然可以在没有历史记录表的情况下工作——就像我需要做一些暂时离线的维护一样。或者我可以为不同价位的账户提供不同的回滚时间段。而且如果要下载超过 90 天的更改，完整的文件通常比增量格式更有效。

如果我今天重新开始，我会跳过 ID 冲突检查，只针对一个足以消除冲突的密钥长度，并进行某种错误检查以防万一。（看起来 YouTube 使用 11 个字符的随机 ID。）历史记录表以及最近更新的增量下载或需要时的完整下载的组合运行良好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-16T22:17:17.760

对于增量（更改）同步，您可以使用 pubsub 模式将更改发布回所有订阅的客户端，像[pusher](http://www.pusher.com)这样的服务可以做到这一点。

对于数据库镜像，一些 Web 框架使用本地迷你数据库将服务器端数据库同步到浏览器数据库中的本地，支持部分同步。检查[仪表](https://www.meteor.com/)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-10-06T22:53:31.410

本页使用模式和示例代码清楚地描述了大多数数据同步场景：[数据同步：模式、工具和技术](https://www.datasyncbook.com/)

这是我找到的最全面的资源，考虑到整个增量同步、如何处理删除以及服务器到客户端和客户端到服务器同步的策略。这是一个很好的起点，值得一看。

# c# - c# 1.2版本引入了什么框架

> ID：413095
> 
> 赞同：2
> 
> 时间：2009-01-05T13:30:25.327
> 
> 标签：c#

我有一份 Word 文档“C# Language Specification Version 1.2”的副本，想知道这是在哪个框架中引入的。我不记得有类似 .NET Framework 1.2 的东西

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-05T13:32:38.257

C# 1.2 是在 .NET v1.1 中引入的。老实说，我几乎不知道为什么，而且我从未见过 C# 1.1 规范。它可能与 ECMA 规范修订有关，尽管无论如何它都有一些单独的版本号。

与 1.0 相比，1.2 的变化并不多。一个重要的问题是，从 v1.2`foreach`开始`Dispose`，如果迭代器实现`IDisposable`.

另请参阅[“C# 的正确版本号是什么？”](https://stackoverflow.com/questions/247621/what-are-the-correct-version-numbers-for-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T13:32:19.723

它在 .net 1.1 中，我不知道他们为什么称它为 1.2

# windows - Windows 并发 tcp/ip 连接的最大数量是多少？

> ID：413110
> 
> 赞同：9
> 
> 时间：2009-01-05T13:34:28.317
> 
> 标签：windows, tcp

在 .NET 中，我已经成功尝试了以下配置：

```
 <system.net>
    <connectionManagement>
      <add address="*" maxconnection="100"/>
    </connectionManagement>
  </system.net> 
```

使用 100 个并发 HttpWebRequest 他们几乎同时回答（不到一秒）。

我想知道为什么有些人在一些论坛上写道，Windows XP 和 Windows Server 2008 将这个数字限制为 15 或 20。他们是对的吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-30T15:43:54.000

Windows 的客户端版本在半开连接数方面受到限制。

**XP**的`10`限制是众所周知的，**Vista**根据版本有其他限制（例如**Home Basic**的限制为，**Ultimate**有）。 您可以通过 Google 搜索“事件 ID 4226 补丁”来缓解这些限制。在 Vista **SP2 之后**，该行为[可通过注册表项进行配置](http://support.microsoft.com/kb/969710)。******`2`**`25`******** 

 ********如果有足够的资源， Windows Server**可以处理数万个并发入站连接。

根据您的服务器版本，您必须更改一些默认参数以允许这些许多连接查看[本指南](https://docs.microsoft.com/en-za/archive/blogs/david.wang/howto-maximize-the-number-of-concurrent-connections-to-iis6)。

作者报告说看到了与RAM的`50.000+`并发连接。`IIS6``WS03SP1 x64``4GB`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-05T13:39:42.983

这可能是因为人们混淆了入站 SMB 连接数和 TCP/IP 连接数。SMB 用于文件共享和其他各种用途，在 Windows 客户端操作系统中限制为 10 个连接。

[http://support.microsoft.com/kb/328459](http://support.microsoft.com/kb/328459)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-05T13:41:10.017

未完成的（新）连接存在连接限制。IIRC，这在几年前被纳入更新，作为减少某些类型恶意软件传播的实验。您可以安全地删除此限制：

[http://technet.microsoft.com/en-us/magazine/2007.12.network.aspx](http://technet.microsoft.com/en-us/magazine/2007.12.network.aspx)

# html - HTML 与 XHTML 仍然重要吗？

> ID：413114
> 
> 赞同：19
> 
> 时间：2009-01-05T13:39:09.320
> 
> 标签：html, xhtml

我想知道我是否应该为标记语言而烦恼，只要我产生有效的标记。

我读过一些文章，指出 HTML 是最好的选择，它们直接来自马的嘴（浏览器实现者！）：

*   [http://webkit.org/blog/68/understanding-html-xml-and-xhtml/](http://webkit.org/blog/68/understanding-html-xml-and-xhtml/)
*   [https://developer.mozilla.org/en/Mozilla_Web_Developer_FAQ](https://developer.mozilla.org/en/Mozilla_Web_Developer_FAQ)

James Bennet 的其他文章指出，如果您不将 XHTML 作为 XML 提供，那么您不需要 XHTML 而需要 HTML。

*   [http://www.b-list.org/weblog/2008/jun/18/html/](http://www.b-list.org/weblog/2008/jun/18/html/)
*   [http://www.b-list.org/weblog/2008/jun/21/xhtml/](http://www.b-list.org/weblog/2008/jun/21/xhtml/)

所以我认为如果我想触发标准兼容模式，我应该只使用 HTML 严格验证。但至少在最现代的浏览器（也就是除了 IE6 之外的所有浏览器）中，情况不再如此：如果你有有效的 XHTML Strict，你仍然会触发标准兼容模式，因此，只要我生成有效的标记，为什么还要麻烦？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-01-05T16:15:40.127

暂时我总是使用 HTML 4.01 strict。HTML 5 还没有定论。我曾经是一个顽固的 XHTML 用户，但我的理由已经消失了，我变得更快乐、更有效率。

XHTML 的论点通常倾向于“更清晰的标记”或谈论格式良好的标记。这似乎更像是一个稻草人的论点，并且在彻底的殴打下站不住脚。

如果 XHTML 保证被 XML 解析器解析，它通常看起来不会比 HTML 4.01 strict 干净（只是比较严格的文档类型）。

一方面，必须将 URL 写成`http://example.com/?foo=bar&amp;baz=qux`看起来很尴尬。声明实体类型变老了。

另一件事是标记通常不能像 XML 树那样翻译得非常好，但是 Dom 树就可以了。

HTML 4.01 strict 更易于使用和创建有效站点。您不必在 <img>、<br> 或 <link> 等元素上放置无意义的结束标记。只需加上反斜杠并不会改变任何特定含义。

雅虎和一切标记的道格拉斯克罗克福德说，最好将标记视为一种应用程序交付格式。

因此，什么将是最容易交付、更强大和更可靠的。这就是最终为我做出决定的原因。所有的 Web 浏览器都以不同的方式处理 XHTML，并且需要修改 Content-type 标头。如果你使用“text/xhtml”或“text/xml”你会得到不同的结果。

此外，“text/xml”不能很好地与 REST 配合使用，因为这应该意味着数据的 XML 序列化，而**不是**格式化的标记页面（在我看来，Safari 通过在 text/html 之前请求 text/xml 作为所需的内容类型！）

因此，请使用 HTML 4.01，因为：

1.  它在所有浏览器中的工作方式更加相似
2.  不需要基于内容类型的处理（text/html 全面解决问题）
3.  不像 XHTML 那样脆弱
4.  HTML 5 没有提供任何比 HTML 4.01 更重要的东西

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-05T13:53:18.777

选择一个并坚持下去，并在面对其他约束时尽可能地顺从。但是，不要认为 HTML 与 XHTML 是比完成工作和网站启动和运行更重要的问题，因为这将带来收入。用户不会对 XHTML 折腾。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-05T14:06:54.100

如果您使用 xhtml，请选择 xhtml 1.0，而*不是*xhtml 1.1，除非您打算使用正确的 xml 或 xhtml mimetype 来提供它。实际上，再想一想，也不要这样做。使用正确的 mimetype 提供 xhtml 1.0 或 1.1 存在巨大的严重缺点。最轻微的错误，你会得到黄屏死机！

w3c 规范说可以将 xhtml 1.0 作为 text/html 提供服务，只要您遵循某些向后兼容性规则（主要是在自闭合标签中，在 / 正斜杠之前包含一个空格。

除此之外，还有其他支持/反对的论点。我倾向于使用 xhtml，因为可以使用各种工具和库来解析有效的 xml，从而使 xslt 与 xhtml 之间的转换成为可能。（有用？）。

另一件事是它可以在 flash 中解析有效的 xml，因此您可以选择 xhtml 以用 flash 电影进行动态内容替换，或者以其他方式将 xhtml 内容动态加载到 flash 电影中。或者真的，任何可以读取 xml 的东西都可以读取 xhtml。这是很多事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-05T15:34:44.640

My advice is to use HTML4 Strict or HTML5\. Valid, in standards mode, with CSS for layout. You'll get all the benefits that are commonly associated with XHTML, but without any of the problems.

Remember: **XHTML DOCTYPE does not enable parsing of document as XHTML**. It only enables standards mode, the same which is available to HTML 4 Strict and HTML 5\.

*   XHTML/1.0 has identical semantics and practically identical CSS support as HTML 4.01.
*   Valid HTML 4.01 is parsed unambiguously just like valid and well-formed XHTML/1.0.
*   XML DOM gives you namespaces support, but takes away support for `document.write` and `innerHTML`.

Without proper XML MIME type set in HTTP headers (not document itself) all you get is parsing of everything as HTML and HTML DOM.

XHTML is still not supported in Internet Explorer *at all* (including IE8). The best you can get in IE (and Googlebot) is XHTML *misinterpreted* as HTML *with syntax errors* (whether that's 70% or 30% of your audience, it's still something to think about).

[Try forcing "XHTML" websites to use actual XML mode](http://schneegans.de/xp/), and you'll quickly notice that almost nobody uses XHTML. They just slap wrong DOCTYPE on their HTML:

*   [http://schneegans.de/xp/?url=http://www.wired.com/](http://schneegans.de/xp/?url=http://www.wired.com/)
*   [http://schneegans.de/xp/?url=http://script.aculo.us/](http://schneegans.de/xp/?url=http://script.aculo.us/)

These "XHTML" pages work only because they're usually interpreted as HTML.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-05T13:42:51.230

我会选择 xHTML，主要是因为代码更干净且更易于维护。

但是这里有一些关于为什么不使用 xhtml 的有趣点[http://meiert.com/en/blog/20081219/html-vs-xhtml/](http://meiert.com/en/blog/20081219/html-vs-xhtml/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T13:57:58.190

如果您真的不关心粗略的支持，请尝试 HTML 5。我的后备将是 HTML 4.01 Strict，除非我需要像内联 SVG 或类似的东西，在这种情况下它一直是 XHTML（作为 XML 服务）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-02-11T13:36:51.947

在大多数情况下，这无关紧要。事实上，使用 XHTML 更让人头疼。但是，有一些情况需要 XHTML。我能想到两个。

首先，如果你想使用嵌入式 SVG，你需要 XHTML。

其次，如果你想使用 HTML 标记为 XML。有时（出于未知原因），我发现我的 AJAX 请求会验证代码，即使我将其标记为 html 或文本。为了快速避免这种情况，我将其更改为 XHTML。

就这些。

# wpf - WPF调试数据触发器？

> ID：413117
> 
> 赞同：15
> 
> 时间：2009-01-05T13:40:01.033
> 
> 标签：wpf, triggers, datatemplate

我正在尝试做一些非常简单的事情。我有一个绑定到布尔的 ToggleButton.IsChecked 属性。我希望背景在红色（假）和绿色（真）之间切换。但由于某种原因，它似乎在红色和无背景之间切换。我使用了一个转换器来检查我是否从源获得了正确的通知并且我是，所以不确定为什么一个触发器（假/红色）有效而另一个（真/绿色）没有。也想听听人们如何调试这些问题。谢谢！

这是代码。

```
<DataTemplate x:Name"Flipper">
    <StackPanel>
    ...
    <ToggleButton IsChecked="{Binding Path=BoolValue,
                                      Converter={StaticResource converter}}" 
                  Name="onoff" >
    </ToggleButton>
    ...
    <StackPanel>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding ElementName=onoff,Path=IsChecked}"
                     Value="True">
            <Setter TargetName="onoff" Property="Background" Value="Green"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding ElementName=onoff,Path=IsChecked}" 
                     Value="False">
            <Setter TargetName="onoff" Property="Background" Value="Red"/>
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

**更新**：我将切换按钮更改为复选框，它可以工作。不知道为什么...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-05-03T21:32:03.027

尝试使用 WPF 检查器：

[https://wpfinspector.codeplex.com/](https://wpfinspector.codeplex.com/)

附加到正在运行的 WPF 应用程序后，按住 ctrl 并单击它，突出显示有问题的元素。然后，在可视化树中选择包含触发器的元素（可能是父元素）。单击触发器选项卡，您可以看到当前评估（例如 True == True）。如果满足数据触发条件，小图标将变为橙色（亮起）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T14:12:09.270

对我来说看起来不错，您可以尝试更改转换器以返回“红色”或“绿色”而不是 True/False（并相应地更改触发器）。在使用 NULL 或布尔值时，我已经看到 WPF 触发器的一些奇怪行为，因为如果它与您的触发器值相反，它会“取消设置”该属性，而不是使用另一个触发器值。

至于调试它们.. 我很想知道是否有比我通常用于 XAML 调试的 hack 和希望方法更好的方法：D

# java - Hibernate 或 TopLink 的替代方案？

> ID：413131
> 
> 赞同：6
> 
> 时间：2009-01-05T13:44:56.267
> 
> 标签：java, hibernate, jpa, jakarta-ee, eclipselink

Hibernate 是否有可行的替代方案？最好是不基于 JPA 的东西。

我们的问题是我们正在构建一个复杂的（例如，许多对象相互引用）有状态的 RIA 系统。似乎 Hibernate 被设计为主要用于一次性应用程序 - JSF 等。

问题主要是延迟加载。由于在初始化和实际加载惰性集合之间可能有多个 HTTP 请求，因此每个事务的会话是不可能的。一个长期存在的会话（每个应用程序一个）也不能很好地工作，因为一旦事务遇到障碍并引发异常，整个会话就会失效，因此延迟加载的对象会中断。然后有各种各样的东西对我们不起作用（比如隐式数据持久化来自初始化事务之外的数据）。

撇开我拙劣的解释不谈，最重要的是 Hibernate 做了我们不喜欢的魔法。似乎 TopLink 也好不到哪里去，它也是在 EJB 之上编写的。

因此，无状态持久层（甚至是足够亮的面向对象的数据库抽象层）是我们最需要的。

有什么想法，还是我在要求一些不存在的东西？

**编辑：**我为我模棱两可的术语感到抱歉，感谢大家的更正和有见地的回答。那些纠正我的人，你们都是正确的，我的意思是JPA，而不是EJB。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-05T13:54:06.107

如果您正在寻找另一个 JPA 提供者（Hibernate 就是其中之一），那么请查看[EclipseLink](http://www.eclipse.org/eclipselink/)。它比 TopLink Essentials 的 JPA 1.0 参考实现功能更全面。事实上，EclipseLink 将是 Glassfish V3 Final 附带的 JPA 2.0 参考实现。

JPA 很好，因为您可以在容器内部和外部使用它。我编写了使用 JPA 的 Swing 客户端，效果很好。它没有 EJB 2.0/2.1 带来的相同的污名和 XML 包袱。

如果您追求更轻量级的解决方案，那么[ibatis](http://ibatis.apache.org/)就是您的最佳选择，我认为它是我为 Java 平台选择的持久性技术。它是轻量级的，依赖于 SQL（ORM 用户花费了多少时间试图让他们的 ORM 产生好的 SQL）并且完成了 JPA 所做工作的 90-95%（如果需要，还包括延迟加载相关实体）。

只是为了纠正几点：

*   JPA是EJB的持久层，不是建立在EJB之上的；
*   任何体面的 JPA 提供程序都有大量的缓存，而且很难全部弄清楚（这将是“为什么简单性如此复杂？”的一个很好的例子）。除非您正在做一些您没有指出的事情，否则异常不应该成为您的托管对象的问题。运行时异常通常会回滚事务（如果您使用 Spring 的事务管理并且谁不这样做？）。提供者将维护已加载或持久对象的缓存副本。如果您想在实体管理器之外进行更新（需要显式缓存刷新或使用`EntityManager.refresh()`），这可能会出现问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-05T15:32:05.643

如前所述，JPA <> EJB，它们甚至不相关。EJB 3 恰好利用了 JPA，但仅此而已。我们有很多使用 JPA 的东西，它们甚至无法运行 EJB。

你的问题不是技术，而是你的设计。

或者，我应该说，您的设计几乎不适合任何现代框架。

具体来说，您正试图通过多个 HTTP 请求保持事务处于活动状态。

自然，大多数常见的习惯用法是每个请求本身就是一个或多个事务，而不是每个请求都是更大事务的一部分。

当您在同一讨论中使用术语“无状态”和“事务”时，也会出现明显的混淆，因为事务本质上是有状态的。

您的大问题只是手动管理您的交易。

如果您的事务发生在多个 HTTP 请求上，并且这些 HTTP 请求恰好一个接一个地“非常快”地运行，那么您应该不会遇到任何真正的问题，除非您必须确保您的 HTTP请求使用相同的数据库连接以利用数据库事务工具。

也就是说，简单来说，您获得了与数据库的连接，将其填充到会话中，并确保在事务期间，您的所有 HTTP 请求不仅通过同一个会话，而且以这样的方式实际连接仍然有效。具体来说，我不相信有现成的 JDBC 连接实际上可以在故障转移或从一台机器到另一台机器的负载平衡中幸存下来。

所以，简单地说，如果你想使用数据库事务，你需要确保你使用相同的数据库连接。

现在，如果您的长时间运行的事务中包含“用户交互”，即您启动数据库事务并等待用户“做某事”，那么，很简单，这种设计都是错误的。您不想这样做，因为长期事务，尤其是在交互式环境中，简直就是坏事。就像“过河”一样糟糕。不要这样做。批量事务是不同的，但交互式长寿命事务是不好的。

您希望使您的交互式交易尽可能地短命。

现在，如果您不能确保您将能够为您的事务使用相同的数据库连接，那么恭喜您，您可以实现自己的事务。这意味着您可以设计您的系统和数据流，就好像您在后端没有事务能力一样。

这实质上意味着您将需要提出自己的机制来“提交”您的数据。

做到这一点的一个好方法是您将数据增量构建到单个“事务”文档中，然后将该文档提供给执行大部分实际工作的“保存”例程。就像，您可以在数据库中存储一行，并将其标记为“未保存”。您对所有行执行此操作，最后调用一个例程来遍历您刚刚存储的所有数据，并在单个事务小批处理过程中将其全部标记为“已保存”。

同时，您的所有其他 SQL 都会“忽略”未“保存”的数据。加入一些时间戳并进行收割进程清理（如果你真的想打扰 - 将死行留在数据库中实际上可能更便宜，具体取决于数量），这些死的“未保存”行，因为这些是“未提交的”交易。

它并不像听起来那么糟糕。如果你真的想要一个无状态的环境，这对我来说就是这样，那么你需要做这样的事情。

请注意，在所有这些中，持久性技术确实与它无关。问题是你如何使用你的交易，而不是技术。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-05T15:00:30.717

我认为你应该看看[apache cayenne](http://cayenne.apache.org/)，它是“大”框架的一个很好的替代品。凭借其出色的建模器，良好的文档可以缩短学习曲线。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-05T13:58:46.877

去年我看过[SimpleORM ，它的轻量级无魔法设计给我留下了深刻的印象。](http://www.simpleorm.org/)现在似乎有一个版本 3，但我没有任何经验。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-11-11T11:00:37.513

Ebean ORM ( [http://www.avaje.org](http://www.avaje.org) )

这是一个更简单更直观的 ORM 使用。

*   使用 JPA 注释进行映射（@Entity、@OneToMany 等）
*   无会话 API - 无休眠会话或 JPA 实体管理器
*   延迟加载有效
*   部分对象支持以提高性能
*   通过“Autofetch”自动调整查询
*   弹簧集成
*   大型查询支持
*   对批处理的大力支持
*   后台抓取
*   DDL 生成
*   如果你愿意，你可以使用原始 SQL（和 Ibatis 一样好）
*   LGPL 许可证

*   抢。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-05T18:51:56.553

BEA Kodo（以前的 Solarmetric Kodo）是另一种选择。它支持 JPA、JDO 和 EJ3。它是高度可配置的，可以支持主动预取、对象的分离/附加等。

不过，根据您的描述，Toplink 应该能够处理您的问题。大多数情况下，听起来您需要能够在请求开始和结束时从持久层附加/分离对象。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-27T08:46:51.290

仅供参考，为什么 OP 的设计是他最大的问题：跨越多个用户请求的事务意味着您可以在给定时间拥有与连接到您的应用程序的用户一样多的打开事务 - 事务使连接保持忙碌，直到它被提交/回滚。有数千个同时连接的用户，这可能意味着数千个连接。大多数数据库不支持这一点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-05T14:37:31.650

Hibernate 和 Toplink (EclipseLink) 都不是基于 EJB，它们都是 POJO 持久性框架 (ORM)。

我同意前面的回答：iBatis 是 ORM 框架的一个很好的替代方案：完全控制 sql，具有良好的缓存机制。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-05T14:59:03.357

另一个选项是 Torque，我并不是说它比上面提到的任何选项都好，只是说它是另一种选择。它现在已经很老了，但可能符合您的一些要求。

[扭矩](http://db.apache.org/torque/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-05T23:01:43.273

当我自己在寻找 Hibernate 的替代品时，我偶然发现了[DataNucleus Access Platform](http://www.datanucleus.org/products/accessplatform.html)，它是一个 Apache2 许可的 ORM。它不仅仅是 ORM，因为它还在 RDBMS 以外的其他数据源（如 LDAP、DB4O 和 XML）中提供数据的持久性和检索。我没有任何使用经验，但看起来很有趣。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-05T23:07:43.650

[考虑使用类似tox](http://tox.sourceforge.net/)的东西完全打破你的范式。如果您需要 Java 类，您可以将 XML 结果加载到[JDOM](http://jdom.org/)中。

# php - 将两个字符串混合成一个较长的字符串 PHP

> ID：413137
> 
> 赞同：0
> 
> 时间：2009-01-05T13:47:38.257
> 
> 标签：php, security, string

我有两个字符串，我想将每个字符串中的字符混合成一个更大的字符串，我该如何在 PHP 中做到这一点？我可以交换字符，但我想要更**复杂**的东西，因为它可以被猜到。

并且请不要说 md5() 足够且不可逆转。:)

```
$string1 = '9cb5jplgvsiedji9mi9o6a8qq1';//session_id()
$string2 = '5d41402abc4b2a76b9719d911017c592';//md5() 
```

感谢您的任何帮助。

编辑：啊对不起罗布。如果有一个解决方案，它只是一个我可以传递两个字符串的函数，并且它返回一个字符串，那就太好了。

返回的字符串必须包含前面的两个字符串。不仅仅是一个连接，而是每个字符串的字符都混合成一个更大的字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-05T13:53:46.530

如果您想制作一个人类可读的防篡改字符串，请为其添加一个安全哈希。MD5 确实失宠了，所以试试[sha1](http://php.net/sha1)。例如

```
$salt="secret";
$hash=sha1($string1.$string2.$salt);
$separator="_";
$str=$string1.$separator.$string2.$separator.$hash; 
```

如果您想要一个人类无法读取的字符串，请将其加密 - 查看提供多种选项的[mcrypt扩展。](http://www.php.net/manual/en/ref.mcrypt.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-05T13:54:46.153

使用[hash()](http://www.php.net/hash)函数的一种[SHA](http://en.wikipedia.org/wiki/SHA_hash_functions)变体。Sha2 或 sha256 应该足够了，而且肯定比你能想到的任何东西都要好得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-05T13:54:08.260

如果您想将这些值组合成一个唯一值，除非我遗漏了什么，否则为什么不做 sha1(string1, string2);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T14:00:12.133

I'm guessing you want something reversible, so you can get these values back out. A quick-and-dirty technique for obscuring these two strings further would be to base64-encode them:

```
base64_encode($string1 . $string2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T14:01:10.773

Thank you everyone. I completely forgot about the SHA1 - got too into solving a problem that I forgot what else was out there. :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T14:13:46.770

Well, if not md5(), then sha1(). :)

Anyway,the possibilities to mangle are endless, pick your poison.

What I would do, if I really wanted to do something like that (which can be useful occasionally), I would add another element, chosen on random and shuffle the md5 string by it. and write down the random element in it, too.

For example, let us add to each md5 character a random 2 digit number, which we then split by digits and add 1st digit to resulting string, and 2nd digit - prepend to it.

I stumbled upon someplace where something of that kind was done today. I was trying to find some reference to a particular phone number - whether it appears anywhere on the country-local inet or not.

I visited a popular classified ads site, which gives phone numbers of advertisers and you have the option, when you are looking at a particular ad, to find all ads with the same phone number. Now, what they did, however, was that they encoded search string, so you are not searching for ?phone=123123, but something like ?phone==FFYx23=.

If they hadn't done that, I would be able to find out for my own purposes, rather than checking on ads, IF user with phone 123123 has posted any ads on the site.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-05T16:56:40.827

If you are looking to verify message integrity and authenticity with hashing - you might want to look at HMAC - there are plenty of implementations in PHP using both SHA1 and MD5:

[http://en.wikipedia.org/wiki/HMAC](http://en.wikipedia.org/wiki/HMAC)

EDIT: In fact, PHP now has a function for this:

[http://us3.php.net/manual/en/function.hash-hmac.php](http://us3.php.net/manual/en/function.hash-hmac.php)

# delphi - JSON 解析器的要求

> ID：413139
> 
> 赞同：5
> 
> 时间：2009-01-05T13:48:25.010
> 
> 标签：delphi, json, delphi-2009

我正在考虑为 Delphi 实现 JSON 解析器。一个好的 JSON 解析器应该做什么？有关要求的任何想法？我相信它至少应该输出和处理 JSON……看看 XML 解析器，它应该更像 DOM 还是更像 SAX？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T21:28:17.977

我认为[Json.NET](http://james.newtonking.com/projects/json-net.aspx)做得很好。

*   JsonReader 和 JsonWriter 用于解析和输出 JSON 的低级工作
*   用于将对象与 JSON 相互转换的 JsonSerializer
*   用于在对象模型中处理 JSON 的 JObject、JArray 和 JValue 类

请注意，因为我写了它，所以我可能有点偏见:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-05T14:02:51.377

以下 3 个（取自[JSON.org](http://www.json.org/)）提供的所有功能最好是：[uJson](http://sourceforge.net/projects/is-webstart/)、[JSON Toolkit](http://www.progdigy.com/?page_id=6)和[lkjson](http://sourceforge.net/projects/lkjson)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-06T03:35:03.547

我在几个项目中使用了 JSON 工具包，并取得了巨大的成功。我在某些时候唯一修改的是它格式化结果 JSON 的方式，但这是个人喜好问题。

它是免费的，相当干净且易于使用。无需安装包；只需在路径中的某处有一个 .pas 文件。只需检查下面的**test_usage.dpr**以获取有关如何使用它的一些简单示例。没有比这更容易的了。

我不会浪费时间尝试实现另一个 JSON 解析器，除非您出于教育目的而这样做，在这种情况下，无论如何您都应该仔细研究现有的实现。

JSON 工具包主页： [http ://www.progdigy.com/?page_id=6](http://www.progdigy.com/?page_id=6)

```
program test_usage;
{$IFDEF FPC}
  {$MODE OBJFPC}{$H+}
{$ELSE}
  {$APPTYPE CONSOLE}
{$ENDIF}

uses
  SysUtils,
  superobject;

var
  my_string, my_int, my_object, my_array: ISuperObject;
  new_obj: ISuperObject;
  j: integer;
  ite: TSuperObjectIter;

begin
  try
    my_string := TSuperObject.Create(#9);
    writeln('my_string=', my_string.AsString);
    writeln('my_string.AsJSon=', my_string.AsJSon);

    my_string := TSuperObject.Create('foo');
    writeln('my_string=', my_string.AsString);
    writeln('my_string.AsJson=', my_string.AsJson);

    my_int := TSuperObject.Create(9);
    writeln('my_int=', my_int.AsInteger);
    writeln('my_int.AsJson=', my_int.AsJson);

    my_array := TSuperObject.Create(stArray);
    my_array.I[''] := 1; // append
    my_array.I[''] := 2; // append
    my_array.I[''] := 3; // append
    my_array.I['4'] := 5;
    writeln('my_array=');
    with my_array.AsArray do
    for j := 0 to Length - 1 do
      if O[j] = nil then
        writeln(#9'[', j,']=', 'null') else
        writeln(#9'[', j,']=', O[j].AsJson);
    writeln('my_array.AsJson=', my_array.AsJson);

    my_object := TSuperObject.Create(stObject);
    my_object.I['abc'] := 12;
   // my_object.S['path.to.foo[5]'] := 'bar';
    my_object.B['bool0'] := false;
    my_object.B['bool1'] := true;
    my_object.S['baz'] := 'bang';
    my_object.S['baz'] := 'fark';
    my_object.AsObject.Delete('baz');
    my_object['arr'] := my_array;
    writeln('my_object=');
    if ObjectFindFirst(my_object, ite) then
    repeat
      writeln(#9,ite.key,': ', ite.val.AsJson);
    until not ObjectFindNext(ite);
    ObjectFindClose(ite);
    writeln('my_object.AsJson=', my_object.AsJson);

    new_obj := TSuperObject.Parse('"003"');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('/* hello */"foo"');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('// hello'#10'"foo"');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('"\u0041\u0042\u0043"');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('null');
    if new_obj = nil then
      writeln('new_obj.AsJson=', 'null');

    new_obj := TSuperObject.Parse('true');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('12');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('12.3');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('["\n"]');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('["\nabc\n"]');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('[null]');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('[]');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('["abc",null,"def",12]');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('{}');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('{ "foo": "bar" }');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('{ "foo": "bar", "baz": null, "bool0": true }');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('{ "foo": [null, "foo"] }');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('{ "abc": 12, "foo": "bar", "bool0": false, "bool1": true, "arr": [ 1, 2, 3, null, 5 ] }');
    writeln('new_obj.AsJson=', new_obj.AsJson);

    new_obj := TSuperObject.Parse('{ foo }');
    if (new_obj = nil) then
      writeln('got error as expected');

    my_string := nil;
    my_int := nil;
    my_object := nil;
    my_array := nil;
    new_obj := nil;

    writeln(#10'press enter ...');
    readln;
  except
    on E: Exception do
      writeln(E.Message)
  end;
end. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-16T07:25:25.457

我在 Java 中实现了一个拉式解析器，我觉得它非常好用。它解析严格符合的 JSON，并接受一些放宽（主要用于我的特定目的）。它[在我的网站上](http://www.softwaremonkey.org/Code/)发布并详细说明。还发布了一种附加方法，该方法说明了使用解析器加载文档 - 因此您可以使用它面向流或面向文档。

我强烈推荐拉式解析（我也有一个拉式 XML 解析器）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-06-05T06:29:53.783

当它处理解析一些（文本）内容时，通常设想两个方向。在 XML 世界中，您通常必须在以下选项中做出选择：

*   一个 DOM 解析器，它创建映射 XML 节点的对象的内存树结构；
*   一个 SAX 解析器，它读取 XML 内容，然后为每个 XML 内容元素调用预定义的事件。

事实上，DOM 解析器在内部使用 SAX 解析器来读取 XML 内容。因此，由于对象创建及其属性初始化的开销，DOM 解析器通常比 SAX 慢三到五倍。但是，DOM 解析器在处理数据方面要强大得多：一旦它被映射到本地对象中，代码就可以立即访问任何给定节点，而基于 SAX 的访问将不得不再次读取整个 XML 内容。

Delphi 中可用的大多数 JSON 解析器都使用类似 DOM 的方法。例如，自 Delphi 2010 起包含的[DBXJSON单元或](http://docwiki.embarcadero.com/VCL/en/DBXJSON)[SuperObject](http://www.progdigy.com/?page_id=6)或[DWS](http://delphitools.info/?s=json)库创建映射每个 JSON 节点的类实例。

在像我们这样[的基于 JSON 的客户端-服务器 ORM](http://blog.synopse.info/category/Open-Source-Projects/SQLite3-Framework)中，分析表明在客户端和服务器端（在服务器端，我们将 JSON 内容动态转换为 SQL）都花费了大量时间进行 JSON 解析。因此，我们尝试优化这部分库。

为了达到最佳速度，我们尝试使用混合方法：

*   所有必要的转换（例如非转义文本）都在内存中、从 JSON 缓冲区中进行，以避免内存分配；
*   解析器返回指向转换后元素的指针（就像[vtd-xml 库](http://vtd-xml.sf.net/)一样）。

对于小型和非常大的 JSON 内容缓冲区，生成的速度是惊人的。

为了生成 JSON，我们还从任何对象内容编写了一些[快速的 JSON 序列化函数。](http://blog.synopse.info/post/2011/02/23/Fast-JSON-%28un%29serialization)

有关详细信息和代码源，请参阅[此博客的条目](http://blog.synopse.info/post/2011/06/02/Fast-JSON-parsing)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-15T06:13:33.763

我同意詹姆斯的观点；使用 Json 有 3 种明智的方法：作为事件/令牌流；作为树（如 XML DOM），或通过绑定到/来自“本机”对象。我熟悉的包是 Jackson（[http://jackson.codehaus.org](http://jackson.codehaus.org)），它也支持这 3 种方法，类似于（我假设）Json.NET 所做的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-05T19:54:14.803

嗯，JSON 的好处在于它使用了相当简单的语法，并且为它编写解析器也相当简单。“忘记”所有其他实现，但使用 Delphi，我将从类单元中的 TParser 类开始快速启动。创建单独的方法来处理每个元素（有些已经在 TParser 中完成，这就是我建议从那里开始的原因）。

现在，如何处理您已解析的内容。这就是有趣的地方。如果您模仿 TXmlDocument 的接口和实现，那么与 XML/JSON 的转换就有点简单了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-06-06T10:31:09.963

Jettison (http://jettison.codehaus.org/) 是一种流行的 JSON [StAX](http://en.wikipedia.org/wiki/StAX)（XML 流 API）实现，用 Java 编写。

> Jettison 是读取和写入 JSON 的 Java API（如 STaX 和 DOM）的集合。这允许在服务框架（如 CXF）或 XML 序列化框架（如 XStream）中几乎透明地启用基于 JSON 的 Web 服务。

# ruby-on-rails - 当我运行 rake:db migrate 命令时，出现错误“未初始化的常量 CreateArticles”

> ID：413150
> 
> 赞同：55
> 
> 时间：2009-01-05T13:53:34.347
> 
> 标签：ruby-on-rails, rake, rails-migrations

我创建了一个模型 ruby​​ 脚本/生成模型文章（简单的 enuff）

这是迁移文件 create_articles.rb：

```
def self.up
  create_table :articles do |t|
    t.column :user_id, :integer
    t.column :title, :string
    t.column :synopsis, :text, :limit => 1000
    t.column :body, :text, :limit => 20000
    t.column :published, :boolean, :default => false
    t.column :created_at, :datetime
    t.column :updated_at, :datetime
    t.column :published_at, :datetime
    t.column :category_id, :integer
  end

def self.down
  drop_table :articles
 end
end 
```

当我运行 rake:db migrate 命令时，我收到一个错误 rake aborted！“未初始化的常量 CreateArticles。”

有谁知道为什么这个错误不断发生？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2009-01-05T14:33:44.640

确保你的文件名和类名是一样的（除了类名是驼峰式的）。你的迁移文件的内容应该是这样的，也简化了一点：

```
#20090106022023_create_articles.rb
class CreateArticles < ActiveRecord::Migration   
  def self.up
    create_table :articles do |t|
      t.belongs_to :user, :category
      t.string :title
      t.text :synopsis, :limit => 1000
      t.text :body, :limit => 20000
      t.boolean :published, :default => false
      t.datetime :published_at
      t.timestamps
    end
  end

  def self.down
    drop_table :articles
  end
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-05-05T22:58:33.880

如果您的类名与`config/initializers/inflections.rb`.

例如，如果您的变形包括：

```
ActiveSupport::Inflector.inflections(:en) do |inflect|
  inflect.acronym 'DOG'
end 
```

那么您可能需要确保迁移中的类是：

`class CreateDOGHouses < ActiveRecord::Migration[5.0]`

而不是：

`class CreateDogHouses < ActiveRecord::Migration[5.0]`

不是很常见，但是如果您生成迁移或模型或其他东西，然后将其中的一部分添加到变形中，则可能会发生。（这里的示例将导致`NameError: uninitialized constant CreateDOGHouses`如果您的类名是`CreateDogHouses`，至少在 Rails 5 中是这样。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-10T19:55:33.073

如果您收到此错误并且不是因为迁移文件名，那么还有另一种可能的解决方案。像这样在迁移中直接打开类：

```
class SomeClass < ActiveRecord::Base; end 
```

现在应该可以`SomeClass`在迁移中使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-13T11:17:31.713

最佳答案为我解决了。把它留在这里以防万一。

### 例子

如果您的迁移文件被调用

```
20210213040840_add_first_initial_only_to_users.rb 
```

那么迁移文件中的类名应该是

```
AddFirstInitialOnlyToUsers 
```

注意：如果类名不匹配，即使差异只是小写`t`而不是“To”中的大写“T”也会出错 - 所以要小心！

# visual-studio-2008 - 在 Visual Studio 2008 中自定义主菜单

> ID：413157
> 
> 赞同：0
> 
> 时间：2009-01-05T13:55:12.767
> 
> 标签：visual-studio-2008, devtools

这听起来很简单，但在过去的几个小时里，我对完成这项工作感到很沮丧。我无法在 Visual Studio 2008 的“工具”菜单下看到“宏”子菜单。

我去工具->自定义->命令。选择类别下的工具，然后单击重新排列命令。它没有向我显示工具菜单，而是向我显示文件。

难道我做错了什么？还是 VS 2008 中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-05T14:24:24.097

在“重新排列命令”对话框中，单击顶部显示“文件”的下拉框，然后向下滚动到“工具”菜单。你应该可以在那里添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-06T12:51:12.537

我想出了答案。选择命令后，我们必须选择适当的工具，然后将项目拖放到菜单栏上。

# moodle - moodle file.php 返回一个空白的 0 字节文件

> ID：413160
> 
> 赞同：1
> 
> 时间：2009-01-05T13:56:59.160
> 
> 标签：moodle

由于某种原因，Moodle 1.9.3+ 的一个安装存在一个问题，即 file.php 有时会返回一个空白的 0 字节文件，甚至 apache 日志也显示返回了 0 字节。另一个moodle安装可以使用相同的htm文件。

这可能是什么原因造成的？有问题的文件只是通常的 htm 文件 - 像这样的链接会出现错误：

[http://server/file.php/164/moddata/scorm/4/data/msg.htm](http://server/file.php/164/moddata/scorm/4/data/msg.htm)

（有问题的moodle是之前1.8版本升级的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-05T13:59:40.107

完全空白的响应可能表示 PHP 错误；检查 PHP 错误日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T14:09:13.660

我在最近的 XAMP 安装中遇到了这个问题，只要将文件保存为 UTF8（我的 Visual Studio 自动执行此操作），它就会执行此操作。除了我的测试 XAMP 框之外，每次安装都工作过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T17:56:21.757

我在使用 file.php 加载二进制文件时遇到了一些问题，我认为它错误地显示为 0 字节（但我不确定）。原来是jpg文件开头多了一个换行符，原因是整理后config.php文件多了一个换行符？>

我不是 PHP 程序员，但我已经看到了删除 ?> 在 php-only 文件中以尽量减少此类问题的建议。

希望能帮助到你。约翰·卡尔森

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T08:46:00.257

停用你的moodle系统的所有过滤器并再次测试。

# vb.net - 这个 for 循环中是否有隐藏的迭代计数器？

> ID：413171
> 
> 赞同：2
> 
> 时间：2009-01-05T14:02:46.027
> 
> 标签：vb.net, for-loop

如果您有一个 for 循环，例如：

```
For Each s As String In stringList
    ..do stuff..
Next 
```

是否有某种（隐藏的）迭代器或者我必须添加一个外部整数来保持计数：

```
Dim i As Integer
For Each s As String In stringList
    ..do stuff..
    i += 1
Next 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-05T14:08:27.857

没有隐藏的迭代器，您必须使用第二个示例中的代码或恢复到常规`for`循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T14:07:24.443

foreach 不需要另一个计数器。它遍历列表中的每个字符串（假设您的示例中的 stringList 就是它听起来的样子:)）。除非出于某种原因您想停止对列表中的每个字符串执行某些操作（即仅处理前 3 个字符串）。这将是在你的 foreach 循环中有一个计数器的唯一原因。我只是重读了OP。另一个原因是要知道你处理了多少个字符串。

希望这可以帮助！有个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T14:09:26.920

for-each 循环将为您跟踪枚举数。

```
ForEach s As String In new string[] {"one","two","three"}
    Console.WriteLine(s);
Next 
```

（对于 VB 和 C# 的混蛋，我很抱歉，我是一个花括号类型的人 - 可能最好将其视为伪代码）

上面的代码将输出

> 一
> 
> 二
> 
> 三

如果它会编译。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T14:10:50.100

没有隐藏的迭代器。

您示例中的变量`i`是多余的。

PS：如果您*确实*需要`i`跟踪某些内容，我会在依赖它之前对其进行初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T14:11:07.960

您绝对不需要提供自己的外部整数。

即便如此，也没有隐藏的*柜台*。有一个隐藏的*枚举*器。不同之处在于并非所有可以迭代的东西都可以通过索引访问。有时，在计算前一项之前，您无法获得序列中的下一项。因此，枚举器可以使用状态机来跟踪您的当前位置并为循环的每次迭代返回下一项，而不是使用计数器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T14:13:21.777

foreach 循环是使用一个跟踪计数的 Enumerator 实现的。如果你想知道你经历了多少循环，你需要使用 for 循环或自己跟踪计数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-05T14:30:57.030

“For Each”的部分魔力在于您不需要自己跟踪循环增量器。它已经为你完成了。您可以阅读文档，参考接口“IEnumerable”并说它必须实现“GetEnumerator()”，这是真的。GetEnumerator() 函数提供了这种魔力。

我认为这是正确的。如果不是这样，我相信有人会纠正我。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-05T16:24:19.657

从优雅的代码视图来看，如果枚举器可用于 .First() 和 .Last() 方法，那就太好了。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2010-05-31T01:41:52.360

Django 1.0.2 版最终...

枚举：

```
{% for item in items %}
    <li>{{ forloop.counter }}) {{ item }}</li>
{% endfor %} 
```

试试这个以将“规则”应用于循环中的第一项：

```
 {% if forloop.first %}Starting the loop{% endif %} 
```

试试这个排除最后一项：

```
 {% if not forloop.last %}, {% endif %} 
```

...最后一个示例非常适合逗号分隔的列表。

# .net - 在 .NET 中何时在 Generic.Lists 上使用 Array()

> ID：413174
> 
> 赞同：6
> 
> 时间：2009-01-05T14:03:24.997
> 
> 标签：.net

什么时候适合在 .NET 中的通用列表（T）上使用数组

我一直在努力看到数组比通用列表提供的任何好处，但感觉我可能遗漏了一些东西。性能是让我印象深刻的潜在瓶颈之一？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-05T14:13:49.717

我现在将无耻地复制我编辑的答案，以[解决今天在这里提出的一个非常相似的问题](https://stackoverflow.com/questions/412813/when-to-use-arraylist-over-array)：

> 我想指出，虽然数组具有协方差，但通用列表没有。例如，类型数组`MyChildClass[]`可以很容易地转换为`MyParentClass[]`，而 `List<MyChildClass>`不能转换为`List<MyParentClass>`，至少不能直接转换为 。
> 
> 如果您需要协方差，请使用数组、使用 LINQ 的 Cast() 方法或其他方法来单独转换每个项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-05T14:07:01.103

当您使用固定数量的给定类型的对象时，与 List 类相关的小性能损失是没有意义的，因为您不会使用它的任何功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-05T14:22:54.503

使用常规数组的另一个原因是，当您使用平台调用（执行非托管 c/c++ 代码）时，但这仅限于极少数应用程序

另外，请注意：如果数组的大小已知但您仍想使用通用列表，请不要忘记将大小传递给构造函数的容量参数。

例如：

```
List<int> lst = new List<int> (100); 
```

否则，列表将以非常小的容量开始，并且需要多次分配新的内存块，而不是一次分配所需的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T15:37:31.547

Many of the higher level data structures (including List) use arrays internally, it's the only way to store a raw sequence in memory - so array have to exist in the programing language, otherwise you wouldn't have higher level data structures.

My opinion is that unless you have to (for example because you are using a component that requires it) you should never use arrays - especially don't write code that returns arrays are accept arrays as parameters, so you don't force others to use arrays too.

The only exception (in my opinion) is the rare case you need a collection of a known fixed size as a local variable than it's just seems wasteful to use something else.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T16:18:40.637

如果要缓存固定数量的数据，请使用数组。否则，请使用通用列表...它们更易于使用，提供更大的灵活性，并且是类型化的（无需装箱/拆箱）...就这么简单。此外，数组是固定长度的，而列表可以是可变的，并且可以随时更改。原因可以继续，以及为什么要使用通用列表与数组。数组只是让人头疼。老实说，使用列表和数组对性能的影响可能会被争论到第 n 级

# php - URL 映射的 Zend Framework 问题

> ID：413198
> 
> 赞同：1
> 
> 时间：2009-01-05T14:11:48.177
> 
> 标签：php, zend-framework

我正在尝试将操作映射到基本 URL 和默认控制器。

发誓这应该是直截了当的，甚至是“开箱即用”的功能，但是如何使用 Zend 框架将默认控制器中的操作映射到基本 url？我对框架相当陌生，所以我希望我只是错过了一些明显的东西。

尝试映射：

domain.com/index/my-page 到 domain.com/my-page

默认情况下不会破坏任何其他路由设置。

我可以使用 Zend_Router 破解它，但它违反了其他规则，例如 /:controller/:action /:module/:controller/:action

*注意：/index/my-page 是一个示例 url - 我需要它动态地为所有 indexController 操作工作。*

**'tharkun'** indexController 请求的 URL 映射示例具有方法 indexAction 和 contactAction 需要 url

```
/index
/index/contact
/
/contact 
```

第二个控制器 testController 有方法 indexAction 和 monkeyAction 需要 url

```
/test
/test/index
/test/monkey 
```

**基本上 - 如果系统找不到 VAR 的控制器，那么它会在默认控制器中查找 VAR 的操作**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-05T14:59:34.807

The default controller is IndexController.

The (default) mapping works like this:

```
/ => IndexController::indexAction
/index => IndexController::indexAction
/index/foo => indexController::fooAction
/foo => FooController::indexAction 
```

So, add a user defined route like this (will have lower priority than the default)

```
$frontController = Zend_Controller_Front::getInstance();
$router = $frontController->getRouter();
$route = new Zend_Controller_Router_Route(
    '/:action',
    array(
        'controller' => 'index'
    )
);
$router->addRoute('user', $route); 
```

This did not break my use of the default routes.

Edit: As coffeerings said in the comment, this will break the indexAction of non-default controllers.

# winapi - 如何在 Windows 上的 Vim 编辑器中缩进代码？

> ID：413208
> 
> 赞同：1
> 
> 时间：2009-01-05T14:13:59.563
> 
> 标签：winapi, vim, indentation

### 复制：

> [如何缩进gvim（win32）中的选择？](https://stackoverflow.com/questions/318923/how-to-indent-a-selection-in-gvim-win32)
> 
> [如何在vi中快速缩进多行？](https://stackoverflow.com/questions/235839/how-do-i-indent-multiple-lines-quickly-in-vi)

在 linux 下使用 vim 我可以使用 VISUAL 模式并按“>”来缩进一段代码。在 Windows 下的 vim 中不会发生这种情况。

这就是发生的事情：

*   按V，VIM进入VISUAL模式
*   按'Down'，VIM 退出VISUAL 模式。我无法在 VISUAL 模式下选择任何内容。

或者，如果我使用 SELECT 模式来选择代码，“>”不会缩进它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-05T17:19:08.783

你没有保留 mswin.vim 吗？如果您希望在两个操作系统上具有相同的行为，请删除此文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-05T14:18:17.493

好，我知道了。在 Windows 中，我应该按 Shift+Down 保持在 VISUAL 模式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-05T14:21:23.790

如果您使用 V（大写），您将进入 VISUAL LINE 模式。对于 VISUAL 模式，您应该使用 v（小写）。

如果您使用标准移动键 (hjkl)，一切正常。

如果您不喜欢默认的移动键，请使用以下映射：

```
:map <Up> k
:map <Down> j
:map <Left> h
:map <Right> l 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T15:31:09.967

奇怪，我在 Win XP 上的 Vim 7.1 上没有遇到这种行为。也许设置 nocompatible 会帮助你？

# java - 是否可以在 Eclipse 中从多个包运行 JUnit 测试？

> ID：413214
> 
> 赞同：52
> 
> 时间：2009-01-05T14:16:04.377
> 
> 标签：java, eclipse, testing, junit

是否可以同时为多个包运行 JUnit 测试而无需手动创建测试套件。

例如，如果我有层次结构：

code.branchone
code.branchone.aaa
code.branchone.bbb
code.branchtwo
code.branchtwo.aaa
code.branchtwo.bbb

是否有可能：

1.  在 code.branchone 和后代包中运行所有测试
2.  在说 code.branchone.aaa 和 code.branchtwo.bbb 中运行所有测试

我看到手动创建测试套件的问题是，当新测试出现时，您可能会忘记添加它们。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-17T16:12:31.440

对的，这是可能的。至少对我来说最简单的方法是添加一个测试套件类。它看起来像这样：

```
package tests;

import org.junit.runner.RunWith;
import org.junit.runners.Suite;
import org.junit.runners.Suite.SuiteClasses;

import tests.message.ATest;
import tests.validator.BTest;
import tests.validator.CTest;
import tests.validator.DTest;

@RunWith(Suite.class)
@SuiteClasses({ ATest.class, 
        BTest.class, 
        CTest.class, 
        DTest.class })
public class AllTests {

} 
```

这将允许您测试您导入的任何类，无论它在哪个包中。要在 eclipse 中运行它，您只需右键单击 AllTests 类并将其作为 JUnit 测试运行。然后它将运行您在 中定义的所有测试`@SuiteClasses`。

这也适用于链接源，我一直使用它。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-22T20:22:28.903

另一种方式：

单击下图中由红色矩形表示的黑色三角形（在您的 Eclipse 中，不在此处 :)。）

![在此处输入图像描述](https://i.stack.imgur.com/8NDHB.png)

然后打开运行配置，创建一个新配置，然后设置“运行所有测试...”，如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/rslD8.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-07-03T14:36:08.387

可能不完全是最初的问题，但是您可以轻松地运行**整个项目**的所有测试，只需右键单击项目 -> 运行为 JUnitTest。不用担心带注释的类在哪里，它会被扫描。

如果应用于 test-src-folder 或带有子包的包，这将不起作用。其实挺可惜的-.-

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-05T14:51:08.287

我相信你可以稍微调整一下。创建一个 CLASSES_DIR 属性的集合并在 findClasses 方法中循环它。(junit4)

[http://burtbeckwith.com/blog/?p=52](http://burtbeckwith.com/blog/?p=52)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-05T14:35:54.183

我相信您可以将所有测试包添加到一个目录中。如果您右键单击此目录，那么您应该会找到可用的“运行方式 -> JUnit 测试”选项。这将运行目录中包含的所有测试，并将捕获您添加的任何内容。任何新的测试都会与其他测试一起放在那里，无论您使用什么包名都没有关系。希望有帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-05T14:36:18.207

当然，右键单击所需的包，然后选择 Run As... JUnit Test

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-05T14:38:15.223

在 Eclipse 中，在您的调试/运行配置中，您有以下选项：

1.  运行单个测试
2.  在选定的项目、包或源文件夹中运行所有测试

在这种情况下，我认为第二种选择是您的朋友。

# .net - 自动将 CLR 数据库项目部署到数据库

> ID：413216
> 
> 赞同：2
> 
> 时间：2009-01-05T14:16:24.097
> 
> 标签：.net, database, deployment, clr

我们在 VS08 中有一个 CLR 数据库项目。现在，每次我们进行构建时，都必须执行多个手动步骤才能将该项目部署为我们构建过程的一部分。我最终编写了一个实用程序来自动化这个过程的一部分。我想知道是否有更好的工具（甚至我缺少的 devenv 开关）来自动将 CLR 对象部署到数据库？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-05T15:22:07.990

我不知道有任何自动开关可以做到这一点，但如果有的话会很棒（也许在 VS2010 中？听，微软？）。如果我必须这样做，我要么编写一个自定义实用程序并将其作为构建后步骤引用，要么编写一个使用 OSQL 执行导入 DLL 并标记它所需的 SQL 的脚本。

我很想知道是否有更综合的方法，但我不会让你抱有希望，而且由于你的方法似乎有效，我会坚持下去。

# c# - 在 C# 中使用“out”关键字的最佳实践

> ID：413218
> 
> 赞同：22
> 
> 时间：2009-01-05T14:16:56.747
> 
> 标签：c#, .net

我正在尝试将 c# 中“out”关键字的使用形式化为我正在进行的项目，特别是对于任何公共方法。我似乎找不到任何最佳实践，并且想知道什么是好的或坏的。

有时我会看到一些看起来像这样的方法签名：

```
public decimal CalcSomething(Date start, Date end, out int someOtherNumber){} 
```

在这一点上，这只是一种感觉，这不适合我。出于某种原因，我更愿意看到：

```
public Result CalcSomething(Date start, Date end){} 
```

其中结果是包含小数和 someOtherNumber 的类型。我认为这使阅读更容易。它允许在不破坏代码的情况下扩展 Result 或添加属性。这也意味着此方法的调用者不必在调用之前声明一个本地范围的“someOtherNumber”。从使用预期来看，并非所有调用者都会对“someOtherNumber”感兴趣。

相比之下，我现在能想到的在 .Net 框架中“out”参数有意义的唯一实例是在 TryParse() 之类的方法中。这些实际上使调用者编写更简单的代码，从而调用者主要对 out 参数感兴趣。

```
int i;
if(int.TryParse("1", i)){
  DoSomething(i);
} 
```

我认为只有在返回类型为 bool 并且预期用途是调用者始终对“out”参数感兴趣的情况下才应使用“out”，这是设计的。

想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-01-05T14:22:41.853

`out`当您使用参数时，其中一个静态代码分析 (=FxCop) 规则指向您是有原因的。我想说：仅`out`在互操作类型场景中真正需要时使用。在所有其他情况下，根本不要使用`out`. 但也许这只是我？

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-01-05T14:51:10.283

This is what the [.NET Framework Developer's Guide](http://msdn.microsoft.com/en-us/library/ms229053(VS.80).aspx) has to say about out parameters:

> **Avoid using out or reference parameters.**
> 
> Working with members that define out or reference parameters requires that the developer understand pointers, subtle differences between value types and reference types, and initialization differences between out and reference parameters.

But if you do use [them](http://msdn.microsoft.com/en-us/library/ms229015.aspx):

> **Do place all out parameters after all of the pass-by-value and ref parameters (excluding parameter arrays), even if this results in an inconsistency in parameter ordering between overloads**.
> 
> This convention makes the method signature easier to understand.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-05T14:29:05.523

您的方法比 out 更好，因为您可以通过这种方式“链接”调用：

```
DoSomethingElse(DoThing(a,b).Result); 
```

与

```
DoThing(a, out b);
DoSomethingElse(b); 
```

用“out”实现的 TryParse 方法是一个错误，IMO。那些在链中会非常方便。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-05T14:31:44.830

There are only very few cases where I would use `out`. One of them is if your method returns two variables that from an OO point of view do not belong into an object together.

If for example, you want to get the most common word in a text string, and the 42nd word in the text, you could compute both in the same method (having to parse the text only once). But for your application, these informations have no relation to each other: You need the most common word for statistical purposes, but you only need the 42nd word because your customer is a geeky Douglas Adams fan.

Yes, that example is *very* contrived, but I haven't got a better one...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-25T07:01:28.603

I just had to add that starting from C# 7, the use of the [out keyword](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/out-parameter-modifier) makes for very readable code in certain instances, when combined with inline variable declaration. While in general you should rather return a [(named) tuple](https://docs.microsoft.com/en-us/dotnet/csharp/tuples), control flow becomes very concise when a method has a boolean outcome, like:

```
if (int.TryParse(mightBeCount, out var count)
{
    // Successfully parsed count
} 
```

I should also mention, that defining a specific class for those cases where a tuple makes sense, more often than not, is more appropriate. It depends on how many return values there are and what you use them for. I'd say, when more than 3, stick them in a class anyway.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-05T14:23:24.830

远离`out`。它是一种低级的便利。但在高层次上，它是一种反技术。

```
int? i = Util.TryParseInt32("1");
if(i == null)
    return;
DoSomething(i); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-05T14:29:05.880

One advantage of `out` is that the compiler will verify that `CalcSomething` does in fact assign a value to `someOtherNumber`. It will not verify that the someOtherNumber field of Result has a value.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-28T12:34:39.967

If you have even seen and worked with MS namespace System.Web.Security

```
MembershipProvider 
   public abstract MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out MembershipCreateStatus status); 
```

You will need a bucket. This is an example of a class breaking many design paradigms. Awful!

Just because the language has out parameters doesn't mean they should be used. eg goto

The use of out Looks more like the Dev was either Lazy to create a type or wanted to try a language feature. Even the completely contrived `MostCommonAnd42ndWord` example above I would use List or a new type contrivedresult with 2 properties.

The only good reasons i've seen in the explanations above was in interop scenarios when forced to. Assuming that is valid statement.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-05T14:37:20.340

You could create a generic tuple class for the purpose of returning multiple values. This seems to be a decent solution but I can't help but feel that you lose a bit of readability by returning such a generic type (`Result` is no better in that regard).

One important point, though, that james curran also pointed out, is that the compiler enforces an assignment of the value. This is a general pattern I see in C#, that you must state certain things explicitly, for more readable code. Another example of this is the override keyword which you don't have in Java.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-05T15:44:53.653

If your result is more complex than a single value, you should, if possible, create a result object. The reasons I have to say this?

1.  The entire result is encapsulated. That is, you have a single package that informs the code of the complete result of CalcSomething. Instead of having external code interpret what the decimal return value means, you can name the properties for your previous return value, Your someOtherNumber value, etc.

2.  You can include more complex success indicators. The function call you wrote might throw an exception if end comes before start, but exception throwing is the only way to report errors. Using a result object, you can include a boolean or enumerated "Success" value, with appropriate error reporting.

3.  You can delay the execution of the result until you actually examine the "result" field. That is, the execution of any computing needn't be done until you use the values.

# asp.net - 预编译的 ASP.NET Web 应用程序：错误“System.Web.HttpException 文件 filename.aspx 尚未预编译，无法请求。”

> ID：413221
> 
> 赞同：5
> 
> 时间：2009-01-05T14:17:26.293
> 
> 标签：asp.net, deployment, precompiled

我使用 Visual Studio 2008 模板为 ASP.NET 3.5 Web 应用程序（不是网站）创建了一个 Web 部署项目。

我编译了创建部署所需文件的项目。我将生成的文件夹（bin、静态文件和所有带有 aspx 占位符的文件夹等）复制到我想要测试应用程序的登台服务器。

如果我**没有**标记**“允许此预编译站点可更新”**选项，我在浏览器中加载的每个页面上都会收到以下错误消息：

```
System.Web.HttpException 文件 PAGENAME.aspx 尚未预编译，
并且不能被请求。

```

堆栈跟踪中的最后一行：

```
System.Web.Compilation.BuildManager.GetVPathBuildResultInternal（
  VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp,
  布尔值 allowBuildInPrecompile) +8756366

```

如果我选中该选项，一切都很好（我猜是因为实际的 aspx/ascx 仍然以其原始形式存在）。

知道我在这里缺少什么吗？是否有一些我忘记复制的设置或特殊文件？

*谢谢！*

笔记：

*   我有一些对第三方程序集的引用
*   我已经检查了登台服务器上的 bin 文件夹。它包含包含所有类的预编译程序集（我使用反射器分析程序集）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-05T14:27:48.927

所有的 ASPX 文件应该只包含

> 这是预编译工具生成的标记文件，请勿删除！

删除 bin 文件夹中的所有内容并再次发布网络。确保从进行发布的目录中获取文件。

确保也复制`.compiled`bin 文件夹中包含的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T14:55:28.933

作为记录，我忘了复制这些“.compiled”文件（[MSDN 文档：ASP.NET 预编译期间的文件处理](http://msdn.microsoft.com/en-us/library/e22s60h9(VS.85).aspx)）：

> 对于 ASP.NET Web 应用程序中的可执行文件，编译器程序集和具有 .compiled 文件扩展名的文件。程序集名称由编译器生成。.compiled 文件不包含可执行代码。相反，它只包含 ASP.NET 查找适当程序集所需的信息。
> 
> After the precompiled application is deployed, ASP.NET uses the assemblies in the Bin folder to process requests. The precompilation output includes .aspx or .asmx files as placeholders for pages. The placeholder files contain no code. They exist only to provide a way to invoke ASP.NET for a specific page request and so that file permissions can be set to restrict access to the pages.

# java - Log4j API 中 addAppender() 方法的问题

> ID：413226
> 
> 赞同：2
> 
> 时间：2009-01-05T14:20:22.730
> 
> 标签：java, log4j

嗨，我正在使用 log4j api 进行日志记录。当我使用以下代码附加到 appender 时，它显示“addAppender() is undefined for the type Logger”错误

```
FileAppender myAppender = new FileAppender(new PatternLayout(),"output.log");
Logger.getLogger(ConfigFileReader.class.getName()).addAppender(myAppender); 
```

谁能告诉我应该怎么做才能调试这个错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-05T14:23:08.403

您确定要导入正确的 Logger 类吗？一个常见的错误是从 log4j 包中导入 java.util.Logger 而不是 Logger。

# vb.net - 如何在 VB.NET 中为网站创建简单的折线图

> ID：413227
> 
> 赞同：0
> 
> 时间：2009-01-05T14:20:23.603
> 
> 标签：vb.net, graph, web-applications

有没有人对我如何为 Web 应用程序创建一个非常简单的图表有任何建议？它是一次显示一年内每月的能源消耗水平。

所以基本上我希望它看起来像（假设我的 ASCII 有效）

> -- \ --

是的，它没有，所以我已将我的打开 id 图像更改为示例

[http://mrbrutal.myopenid.com/](http://mrbrutal.myopenid.com/)

对于冗长的方法感到抱歉 - 另一个问题 - openid 提供的免费图像托管（可能还有另一个站点）

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-05T14:22:55.847

你应该试试[Google Charts API](http://code.google.com/apis/chart/)。有一些很好的[用法示例](http://code.google.com/apis/chart/styles.html#chart_margins)似乎可以创建您想要的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T14:22:24.380

如果我是你，我会看看[Google 的 Chart API——](http://code.google.com/apis/chart/)它会以最少的麻烦做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T15:00:11.200

还有新的[ASP.NET 图表控件](http://weblogs.asp.net/scottgu/archive/2008/11/24/new-asp-net-charting-control-lt-asp-chart-runat-quot-server-quot-gt.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T14:55:57.980

您还可以使用 Microsoft 提供的新 Silverlight 图表组件。免费，他们将呈现简单的图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T16:07:23.653

如果您不介意 JavaScript 依赖项，那么[Google Visualization API](http://code.google.com/apis/visualization/)非常棒。

它是许多可视化的标准界面，包括[折线](http://code.google.com/apis/visualization/documentation/gallery/linechart.html)图、[基于图像的折线图](http://code.google.com/apis/visualization/documentation/gallery/imagelinechart.html)（使用 Google Charts API）以及[许多其他](http://code.google.com/apis/visualization/documentation/gallery.html)可能更好地满足您需求的工具。

# python - PyGreSQL 与 psycopg2

> ID：413228
> 
> 赞同：13
> 
> 时间：2009-01-05T14:21:02.497
> 
> 标签：python, postgresql

这两个api有什么区别？哪一个使用 Python DB API 更快、更可靠？

**更新：** 我看到了 Django 的两个 psql 驱动程序。第一个是 psycopg2。第二个是什么？pygresql？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-05T14:28:46.770

对于它的价值，django 使用 psycopg2。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-26T23:04:41.223

“PyGreSQL 仅用 Python 编写，易于部署但速度较慢。”

PyGreSQL 也包含一个 C 编码的模块。我没有做过速度测试，但它们不太可能有太大不同，因为真正的工作将发生在数据库服务器内部。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-05T15:52:32.000

许可对您来说可能是个问题。PyGreSQL 是 MIT 许可证。Psycopg2 是 GPL 许可证。

（只要您以正常方式从 Python 访问 psycopg2，没有内部 API，也没有直接的 C 调用，这不应该让您头疼，您可以根据您喜欢的任何许可证发布您的代码 - 但我不是律师）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-11-09T18:42:48.560

Psycopg2 没有太多文档，但示例目录中的代码非常有用。
它也是线程安全级别 2，这意味着多个线程可以共享模块和连接，但不能共享游标。
[python dbi pep](http://www.python.org/dev/peps/pep-0249/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T15:47:06.893

psycopg2 部分是用 C 编写的，因此您可以期待性能提升，但另一方面，安装起来有点困难。PyGreSQL 仅用 Python 编写，易于部署但速度较慢。

# e-commerce - 使用第三方在线销售软件

> ID：413235
> 
> 赞同：2
> 
> 时间：2009-01-05T14:22:31.650
> 
> 标签：e-commerce

**[https://stackoverflow.com/questions/409026/software-marketplace](https://stackoverflow.com/questions/409026/software-marketplace)的副本**

我对在线销售软件（主要是企业库）感兴趣，但我对处理金钱/购物车/等不感兴趣，所以我正在寻找可以处理我所有付款/下载的第三方收费（有点像 Google Ads，但用于软件而不是广告）。

理想的情况是我只需将文件上传到他们的服务器，为每个文件设置价格并链接到我自己网站的地址。

有人对这些事情有任何经验吗？有没有可以推荐的供应商？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-05T14:33:05.513

我从未使用过它们，但我相信[ComponentSource](http://www.componentsource.com)是一家软件经销商。这是他们的发布商计划信息页面： http:
[//www.componentsource.com/services/publisher/software-reseller.html](http://www.componentsource.com/services/publisher/software-reseller.html)

# c# - 在 NHibernate 中获取正确类型的代理

> ID：413237
> 
> 赞同：19
> 
> 时间：2009-01-05T14:22:44.270
> 
> 标签：c#, .net, nhibernate, proxy

我在 nhibernate 中遇到了未初始化代理的问题

**领域模型**

假设我有两个平行的类层次结构：Animal、Dog、Cat 和 AnimalOwner、DogOwner、CatOwner，其中 Dog 和 Cat 都继承自 Animal，而 DogOwner 和 CatOwner 都继承自 AnimalOwner。AnimalOwner 有一个 Animal 类型的引用，称为 OwnedAnimal。

以下是示例中的类：

```
public abstract class Animal
{
   // some properties
}

public class Dog : Animal
{
   // some more properties
}

public class Cat : Animal
{
   // some more properties
}

public class AnimalOwner 
{
   public virtual Animal OwnedAnimal {get;set;}
   // more properties...
}

public class DogOwner : AnimalOwner
{
   // even more properties
}

public class CatOwner : AnimalOwner
{
   // even more properties
} 
```

这些类具有适当的休眠映射，所有属性都是持久的，并且可以延迟加载的所有内容都是延迟加载的。

应用程序业务逻辑只允许您在 DogOwner 中设置 Dog，在 CatOwner 中设置 Cat。

**问题**

我有这样的代码：

```
public void ProcessDogOwner(DogOwner owner)
{
   Dog dog = (Dog)owner.OwnedAnimal;
   ....
} 
```

此方法可以由许多不同的方法调用，在大多数情况下，狗已经在内存中并且一切正常，但很少有狗不在内存中 - 在这种情况下，我得到一个休眠的“未初始化代理”，但演员抛出一个例外，因为 nhibernate 为 Animal 而不是 Dog 生成代理。

我知道这就是 nhibernate 的工作方式，但我需要知道类型而不加载对象 - 或者，更准确地说，我需要未初始化的代理作为 Cat 或 Dog 的代理，而不是 Animal 的代理。

**约束**

*   我无法更改领域模型，模型是由另一个部门交给我的，我试图让他们更改模型，但失败了。
*   实际模型比示例复杂得多，类之间有很多引用，出于性能原因，使用预加载或向查询添加连接是不可能的。
*   我可以完全控制源代码、hbm 映射和数据库模式，并且可以以任何我想要的方式更改它们（只要我不更改模型类之间的关系）。
*   我有很多方法，例如示例中的方法，我不想修改所有方法。

谢谢，
尼尔

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-16T12:28:54.097

关闭动物类的延迟加载是最简单的。你说它主要是在内存中。

```
<class name="Animal" lazy="false">
<!-- ... -->
</class> 
```

作为一种变体，您还可以使用`no-proxy`，请参阅[这篇文章](http://ayende.com/blog/4378/nhibernate-new-feature-no-proxy-associations)：

```
<property name="OwnedAnimal" lazy="no-proxy"/> 
```

据我所知，它仅在`AnimalOwner`实际是代理时才有效。

**或者**

您可以在动物所有者上使用泛型来使引用成为具体类。

```
class AnimalOwner<TAnimal>
{
  virtual TAnimal OwnedAnimal {get;set;}
}

class CatOwner : AnimalOwner<Cat>
{
}

class DogOwner : AnimalOwner<Dog>
{
} 
```

**或者**

您可以将`DogOwners`和映射到`CatOwners`单独的表中，并在映射中定义具体的动物类型。

```
<class name="CatOwner">
  <!-- ... -->
  <property name="OwnedAninal" class="Cat"/>
</class>
<class name="DogOwner">
  <!-- ... -->
  <property name="OwnedAninal" class="Dog"/>
</class> 
```

**或者**

[正如本博客](http://guildsocial.web703.discountasp.net/dasblogce/2009/07/24/NHibernateProxyCastingWithSubclasses.aspx)中所建议的那样，您对 NHibernate 有点混乱。NH 实际上能够返回代理背后的真实对象。这里提出了一个更简单的实现：

```
 public static T CastEntity<T>(this object entity) where T: class
    {
        var proxy = entity as INHibernateProxy;
        if (proxy != null)
        {
            return proxy.HibernateLazyInitializer.GetImplementation() as T;
        }
        else
        {
            return entity as T;
        }
    } 
```

可以这样使用：

```
Dog dog = dogOwner.OwnedAnimal.CastEntity<Dog>(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-20T18:20:14.130

我认为我们最近遇到了类似的问题，AFAIR 的解决方案是给“动物”一个自我——“方法/属性”：

```
public Animal Self { get { return this; } } 
```

然后可以将其转换为纠正“动物”。发生的情况是您的原始对象具有对 nhibernate 代理对象的引用（当它被延迟加载时），它充当通过 Animal 类公开的所有方法的 Animal（它将所有调用传递给加载的对象）。但是，它不能被转换为您的任何其他动物，因为它不是这些，它只是模仿 Animal 类。但是，AnimalProxy 封装的类可以转换为子类动物，因为它是正确类的真实实例，您只需要获取它的`this`引用即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-31T18:51:28.413

您可以尝试将此方法放在您的基础实体上：

```
public virtual T As<T>() where T : Entity {
      return this as T;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-18T00:52:40.973

您可能想试试这个来查看代理类型（假设 NH 2.0+）：

```
((INHibernateProxy)proxy).HibernateLazyInitializer.PersistentClass 
```

但无论如何，这种铸造或“类型偷看”是非常糟糕的做法......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-21T14:46:16.503

如果我们一直在处理同样的问题，那么问题是生成的代理是 Animal 的代理而不是 Dog 的代理。

我们使用的解决方案是重新加载对象：

```
Dog dog = this.CurrentSession.Load<Dog>(owner.OwnedAnimal.AnimalID); 
```

这将返回到您的会话并使用正确的类型重新加载对象。

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-16T18:32:07.473

如果您使用 Fluent NHibernate，您可以使用自动映射覆盖来关闭该属性的延迟加载：

```
public class DogOwnerMapOverride : IAutoMappingOverride<DogOwner>
{
    public void Override( AutoMapping<DogOwner> mapping )
    {
        mapping.References( x => x.OwnedAnimal ).Not.LazyLoad();
    }
} 
```

# ios - 如何检测 iOS 应用程序正在越狱手机上运行？

> ID：413242
> 
> 赞同：178
> 
> 时间：2009-01-05T14:23:11.587
> 
> 标签：ios, iphone, jailbreak

如果我希望我的应用程序在越狱的 iPhone 上表现不同，我将如何确定这一点？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2009-01-05T18:00:49.790

这取决于您所说的越狱是什么意思。在简单的情况下，您应该能够查看是否安装了 Cydia 并通过它 - 比如

```
NSString *filePath = @"/Applications/Cydia.app";
if ([[NSFileManager defaultManager] fileExistsAtPath:filePath])
{
   // do something useful
} 
```

对于被黑的内核，它涉及更多一点（很多）。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-11-03T10:36:08.170

这是一个结合了我为这个需求找到的一些答案的代码，并且会给你更高的成功率：

```
BOOL isJailbroken()
{
#if !(TARGET_IPHONE_SIMULATOR)

   if ([[NSFileManager defaultManager] fileExistsAtPath:@"/Applications/Cydia.app"] ||
       [[NSFileManager defaultManager] fileExistsAtPath:@"/Library/MobileSubstrate/MobileSubstrate.dylib"] ||
       [[NSFileManager defaultManager] fileExistsAtPath:@"/bin/bash"] ||
       [[NSFileManager defaultManager] fileExistsAtPath:@"/usr/sbin/sshd"] ||
       [[NSFileManager defaultManager] fileExistsAtPath:@"/etc/apt"] ||
       [[NSFileManager defaultManager] fileExistsAtPath:@"/private/var/lib/apt/"] ||
       [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"cydia://package/com.example.package"]])  {
         return YES;
   }

   FILE *f = NULL ;
   if ((f = fopen("/bin/bash", "r")) ||
      (f = fopen("/Applications/Cydia.app", "r")) ||
      (f = fopen("/Library/MobileSubstrate/MobileSubstrate.dylib", "r")) ||
      (f = fopen("/usr/sbin/sshd", "r")) ||
      (f = fopen("/etc/apt", "r")))  {
         fclose(f);
         return YES;
   }
   fclose(f);

   NSError *error;
   NSString *stringToBeWritten = @"This is a test.";
   [stringToBeWritten writeToFile:@"/private/jailbreak.txt" atomically:YES encoding:NSUTF8StringEncoding error:&error];
   [[NSFileManager defaultManager] removeItemAtPath:@"/private/jailbreak.txt" error:nil];
   if(error == nil)
   {
      return YES;
   }

#endif

   return NO;
} 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-08-28T16:50:55.853

```
+(BOOL)isJailbroken {
    NSURL* url = [NSURL URLWithString:@"cydia://package/com.example.package"];
    return [[UIApplication sharedApplication] canOpenURL:url];
} 
```

`/Applications/Cydia.app`普通手机不允许查看文件路径？我从未听说过 Apple 检测到这一点并拒绝为此应用程序，但 Apple 是不可预测的。Cydia 有[一个 URL 方案 cydia://](http://handleopenurl.com/scheme/cydia) 可以合法地使用 UIApplication 检查`canOpenURL:`

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2009-08-18T07:50:07.300

检查内核是否损坏并不涉及更多。

越狱使内核对签名代码的签名检查始终报告代码签名正确，完整的手机无法运行签名错误的代码。

因此，请在应用程序中包含一个带有错误签名的单独可执行文件。它可能只是一个具有 main() 和返回值的 3 行程序。在没有代码签名的情况下编译可执行文件（在项目设置->构建中将其关闭）并使用“codedesign”命令行实用程序使用不同的密钥对其进行签名。

让您的应用程序执行单独的可执行文件。如果您的程序在运行带有错误 sig 的单独可执行文件时无法获得返回值，那么它肯定会被监禁。如果单独的可执行文件返回 A-OK，则手机肯定是越狱了。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2012-03-05T14:17:04.043

```
BOOL isJailbroken()
{
#if TARGET_IPHONE_SIMULATOR
    return NO;
#else
    FILE *f = fopen("/bin/bash", "r");

    if (errno == ENOENT)
    {
        // device is NOT jailbroken
        fclose(f);
        return NO;
    }
    else {
        // device IS jailbroken
        fclose(f);
        return YES;
    }
#endif
} 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2016-12-05T08:13:06.713

我在 Swift 2.3 中重新设计了@Yossi 提供的解决方案

```
public static func jailbroken(application: UIApplication) -> Bool {
    guard let cydiaUrlScheme = NSURL(string: "cydia://package/com.example.package") else { return isJailbroken() }
    return application.canOpenURL(cydiaUrlScheme) || isJailbroken()
}

static func isJailbroken() -> Bool {

    if isSimulator {
        return false
    }

    let fileManager = NSFileManager.defaultManager()
    if fileManager.fileExistsAtPath("/Applications/Cydia.app") ||
        fileManager.fileExistsAtPath("/Library/MobileSubstrate/MobileSubstrate.dylib") ||
        fileManager.fileExistsAtPath("/bin/bash") ||
        fileManager.fileExistsAtPath("/usr/sbin/sshd") ||
        fileManager.fileExistsAtPath("/etc/apt") ||
        fileManager.fileExistsAtPath("/usr/bin/ssh") {
        return true
    }

    if canOpen("/Applications/Cydia.app") ||
        canOpen("/Library/MobileSubstrate/MobileSubstrate.dylib") ||
        canOpen("/bin/bash") ||
        canOpen("/usr/sbin/sshd") ||
        canOpen("/etc/apt") ||
        canOpen("/usr/bin/ssh") {
        return true
    }

    let path = "/private/" + NSUUID().UUIDString
    do {
        try "anyString".writeToFile(path, atomically: true, encoding: NSUTF8StringEncoding)
        try fileManager.removeItemAtPath(path)
        return true
    } catch {
        return false
    }
}

static func canOpen(path: String) -> Bool {
    let file = fopen(path, "r")
    guard file != nil else { return false }
    fclose(file)
    return true
} 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2013-12-10T21:27:04.150

您可以通过检查以下内容来检测设备是否越狱：

*   安装了 Cydia
*   验证一些系统路径
*   执行沙盒完整性检查
*   执行符号链接验证
*   验证您是否在沙盒之外创建和写入文件

我根据各种文章和书籍创建了一个开源库。[在 GitHub 上试试吧](https://github.com/sat2eesh/ios-jailBroken)！

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-10-22T04:47:28.977

我知道的最复杂的方法是使用`objc_copyImageNames()`函数。它返回当前加载的库列表，并且由于大多数人在越狱设备上都有 MobileSubstrate 并且大多数 iAP 破解工具都依赖它，因此至少会显示一些 MobileSubstrate 库。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-04-11T16:57:54.723

我不知道为此存在任何“API”。如果有，那么越狱掩蔽产品会很快掩盖它们。

正如很多人指出的那样，这是一场猫捉老鼠的游戏。在两位玩家都成为专家之后，这一切都归结为谁先出手。（手持设备的人。）

我在 Zdziarski 的新书《Hacking and Securing iOS Apps》中找到了很多检测越狱的好建议。（就个人而言，我为 O'Reilly 电子书支付了更多费用，因为它们允许复制和粘贴。）

不，我不隶属于出版商。但我确实发现这是一本好书。我不喜欢仅仅发布黑客的错误以便他们修复它们，所以我想我会指向这本书。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-05-26T12:11:19.217

尝试通过您的应用程序执行未签名的代码。

越狱设备通常具有以下特点：

*   运行未签名的代码
*   安装了 Cydia
*   有越狱文件
*   对整个文件系统的完全读写访问
*   一些系统文件将被修改（内容等 sha1 与原始文件不匹配）
*   坚持特定版本（越狱版本）

只检查文件是否存在以进行越狱检测注定会失败。这些检查很容易绕过。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-01-22T12:48:05.930

要检查的一些常见文件： `/Library/MobileSubstrate/MobileSubstrate.dylib`

`/Applications/Cydia.app`

`/var/cache/apt`

`/var/lib/apt`

`/var/lib/cydia`

`/var/log/syslog`

`/var/tmp/cydia.log`

`/bin/bash`

`/bin/sh`

`/usr/sbin/sshd`

`/usr/libexec/ssh-keysign`

`/etc/ssh/sshd_config`

`/etc/apt`

大多数检查 Cydia 相关文件。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-09-06T12:02:29.053

请为 Swift 4 及更高版本使用以下代码：在 appdelegate 中添加以下代码：

```
private func getJailbrokenStatus() -> Bool {
    if TARGET_IPHONE_SIMULATOR != 1 {
        // Check 1 : existence of files that are common for jailbroken devices
        if FileManager.default.fileExists(atPath: "/Applications/Cydia.app")
            || FileManager.default.fileExists(atPath: "/Library/MobileSubstrate/MobileSubstrate.dylib")
            || FileManager.default.fileExists(atPath: "/bin/bash")
            || FileManager.default.fileExists(atPath: "/usr/sbin/sshd")
            || FileManager.default.fileExists(atPath: "/etc/apt")
            || FileManager.default.fileExists(atPath: "/private/var/lib/apt/")
            || UIApplication.shared.canOpenURL(URL(string:"cydia://package/com.example.package")!) {
            return true
        }
        // Check 2 : Reading and writing in system directories (sandbox violation)
        let stringToWrite = "Jailbreak Test"
        do {
            try stringToWrite.write(toFile:"/private/JailbreakTest.txt", atomically:true, encoding:String.Encoding.utf8)
            //Device is jailbroken
            return true
        } catch {
            return false
        }
    }
    else {
        return false
    }
} 
```

在 Appdelegate 方法中，编写如下代码

```
func applicationDidBecomeActive (_ application: UIApplication) {

    if getJailbrokenStatus() {
        let alert = UIAlertController(title: LocalizedKeys.Errors.jailbreakError, message: LocalizedKeys.Errors.jailbreakErrorMessage, preferredStyle: UIAlertController.Style.alert)
        let jailBrokenView = UIViewController()

        jailBrokenView.view.frame = UIScreen.main.bounds
        jailBrokenView.view.backgroundColor = .white
        self.window?.rootViewController = jailBrokenView
        jailBrokenView.present(alert, animated: true, completion: nil)
    }

    if #available(iOS 11.0, *) {
        if !UIScreen.main.isCaptured {
            DispatchQueue.main.async {
                self.blockImageView.removeFromSuperview()
            }
        }
    }
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-01-05T17:54:10.490

我建议寻找“香草”iPhone 上不存在的文件。我见过的所有越狱工具包都安装了 ssh。这可能是越狱手机的一个很好的指标。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2012-09-13T09:27:13.923

我们所做的是，我们已经有一个 RSS 提要来与我们的用户交流（[Stocks Live](http://itunes.apple.com/us/app/stocks-live-portfolio-manager/id473206441?mt=8)），我们放了一个新闻项目，内容如下：

> 一些越狱设备有问题 bla bla bla，我们进行了破解来解决这些问题，但我们需要知道这是否是越狱设备，请按此处以便应用程序解决问题。如果您恢复正常，即删除越狱，请按此处。

然后你处理用户交互并做适当的事情，比如表现不同等......

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2013-05-14T08:14:17.670

尝试查找 cydia 或越狱设备创建的文件。或者尝试在应用程序黑盒之外的文件中写入。如果您成功执行此操作，则该设备已被盗用/越狱 :)

```
- (BOOL)jailbroken
{
    NSFileManager * fileManager = [NSFileManager defaultManager];
    return [fileManager fileExistsAtPath:@"/private/var/lib/apt/"];
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-06-01T13:04:14.607

这是我的解决方案： 第 1 步

```
extension UIDevice {
    func isJailBroken() -> Bool {
        let cydiaPath = "/Applications/Cydia.app"
        let aptPath = "/private/var/lib/apt/"
        if FileManager.default.fileExists(atPath: cydiaPath) || FileManager.default.fileExists(atPath: aptPath) {
            return true
        }
        return false
    }
} 
```

第 2 步：`viewDidLoad()`在您的启动屏幕视图控制器（或您第一次调用的任何 VC）内部调用它：

```
 // show a blank screen or some other view controller
       let viewController = UIDevice.current.isJailBroken() ? JailBrokenViewController() : NextViewController()
       self.navigationController?.present(viewController, animated: true, completion:nil) 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-12-02T21:41:56.177

在 iOS 14 中有一个服务**App Attest**。检查这篇[文章](https://medium.com/better-programming/new-in-ios-14-app-attest-d080508797c3)。

我也使用了这个 repo [https://github.com/fiber-inc/SecurityDetector](https://github.com/fiber-inc/SecurityDetector)，但是有些用户告诉他们，当检测器触发时，他们没有越狱。

所以我决定测试这个 repo [https://github.com/wearebeatcode/SwiftJailbreakDetection/blob/master/Sources/SwiftJailbreakDetection/JailbreakDetection.swift](https://github.com/wearebeatcode/SwiftJailbreakDetection/blob/master/Sources/SwiftJailbreakDetection/JailbreakDetection.swift)。算法仍然不好，并给出越狱活动在未越狱手机中的结果。进一步搜索..

现在我正在尝试这个：[https ://github.com/securing/IOSSecuritySuite](https://github.com/securing/IOSSecuritySuite)

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2012-06-09T10:28:42.220

尝试访问 /Application/Preferences.app/General.plist 你应该可以在越狱的 iPhone 上这样做 在非 Jb 手机上你将无法访问它

# vb6 - 表单大小以填充屏幕尺寸减去任务栏

> ID：413243
> 
> 赞同：6
> 
> 时间：2009-01-05T14:23:20.667
> 
> 标签：vb6

您如何在 vb6 中调整表单的大小，以便表单下边框位于任务栏的顶部

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-05T14:28:10.640

您是否有理由不能最大化表格？那将是我的第一印象。

如果那不是跑步者，您可以尝试通过以下方式获取任务栏高度：

```
Private Const ABM_GETTASKBARPOS = &H5

Private Type RECT
    Left As Long
    Top As Long
    Right As Long
    Bottom As Long
End Type

Private Type APPBARDATA
    cbSize As Long
    hwnd As Long
    uCallbackMessage As Long
    uEdge As Long
    rc As RECT
    lParam As Long
End Type

Private Declare Function SHAppBarMessage Lib "shell32.dll" (ByVal dwMessage As Long, pData As APPBARDATA) As Long

Function GetTaskBarSize()
    Dim ABD As APPBARDATA

    SHAppBarMessage ABM_GETTASKBARPOS, ABD

    MsgBox "Width:" & ABD.rc.Right - ABD.rc.Left 
    MsgBox " Height:" & ABD.rc.Bottom -    ABD.rc.Top

End Sub 
```

然后将表单的高度设置为屏幕的高度减去任务栏的高度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-05T15:01:06.660

*只*减去任务栏？那可能不是你真正想要的。屏幕边缘可以有其他窗口，用于“划分”桌面区域。另外，请注意有时任务栏的*高度*是无关紧要的，例如当它停靠在屏幕的左侧或右侧时。

Galwegian 已经展示了如何获取任务栏的高度，但如果您真的在寻找桌面的可用区域，请使用[`SystemParametersInfo`](http://msdn.microsoft.com/en-us/library/ms724947.aspx)带有`spi_GetWorkArea`标志的函数。它会告诉您桌面的区域，不包括所有桌面工具栏。MSDN 建议，如果您对主显示器以外的可用空间感兴趣，则应[`GetMonitorInfo`](http://msdn.microsoft.com/en-us/library/ms534599.aspx)改为致电；它填写了一条记录，其中一个字段用于监视器的工作区。

我将支持您可能真的只想最大化您的窗口的想法。如果你已经这样做了，并且你想知道你占用了多少空间，那么得到你的窗口的当前大小，然后减去你的窗口框架的尺寸（它被“塞在边缘”窗口最大化时的桌面）。您可以为此使用[`GetSystemMetrics`](http://msdn.microsoft.com/en-us/library/ms724385.aspx)and`sm_CXFrame`标志`sm_CYFrame`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-05T17:30:27.637

我同意你可能想要最大化你的窗口。

但是，如果您确实想知道除所有桌面工具栏（任务栏、Microsoft Office 工具栏等）之外的桌面区域，这里有一些用于 SystemParametersInfo 调用的 VB6 声明和一个在屏幕上居中表单的示例函数，允许使用工具栏. 这是从旧的 Visual Basic Programmers Journal 的[101 个技术技巧 (PDF)](http://vb.mvps.org/articles/techtips/techtip6.pdf)中借来的。

```
Private Const SPI_GETWORKAREA = 48
Private Declare Function SystemParametersInfo& Lib "User32" Alias "SystemParametersInfoA" ( _
ByVal uAction As Long, _
ByVal uParam As Long, lpvParam As Any, _
ByVal fuWinIni As Long)

Private Type RECT
  Left As Long
  Top As Long
  Right As Long
  Bottom As Long
End Type

Public Function CenterForm32 (frm As Form)
  Dim ScreenWidth&, ScreenHeight&, ScreenLeft&, ScreenTop&
  Dim DesktopArea As RECT
  Call SystemParametersInfo (SPI_GETWORKAREA, 0, DesktopArea, 0)

  ScreenHeight = (DesktopArea.Bottom - DesktopArea.Top) * Screen.TwipsPerPixelY
  ScreenWidth = (DesktopArea.Right - DesktopArea.Left) * Screen.TwipsPerPixelX
  ScreenLeft = DesktopArea.Left * Screen.TwipsPerPixelX
  ScreenTop = DesktopArea.Top * Screen.TwipsPerPixelY

  frm.Move (ScreenWidth - frm.Width) / 2 + ScreenLeft, _
    (ScreenHeight - frm.Height) / 2 + ScreenTop
End Function 
```

# asp.net - 保护 ASP.NET 源代码

> ID：413246
> 
> 赞同：0
> 
> 时间：2009-01-05T14:23:51.040
> 
> 标签：asp.net, deployment, obfuscation

我目前正在研究如何最好地保护我的源代码，以便没有外部各方可以查看和使用我的代码。

通过浏览网页，我想到了一些想法，即

1) 将网站发布到 DLL 中

2) 代码混淆器

3) 第三方

但是我发现没有一个得到很好的解释或详细说明如何实现这一点。这里的任何人都可以对这个话题有所了解吗？

提前致谢

# api - 如果您想创建具有模块化的应用程序，最好的资源是什么？

> ID：413247
> 
> 赞同：4
> 
> 时间：2009-01-05T14:23:54.800
> 
> 标签：api, components, modularity

在我对较新的 Web 平台/应用程序（例如 Drupal、Wordpress 和 Salesforce）的分析中，他们中的许多人基于模块化的概念来创建他们的软件：开发人员可以创建新的扩展和应用程序，而无需更改“核心”中的代码。 " 由主要开发人员维护的系统。特别是，我知道 Drupal 使用“钩子”系统，但我对实现它的引擎或设计知之甚少。

如果您要走上创建应用程序的道路，并且想要一个允许模块化的系统，您从哪里开始？这是每个人都知道的特定**设计模式**吗？有没有这种范式倾向于订阅的**手册？**他们是否有任何**网站**从头开始讨论这种类型的开发？

我知道有些人直接指向 OOP，但这似乎完全不是一回事。

我计划的这个特定系统更倾向于 Salesforce，但它不是 CRM 系统。

*为了这个问题，请**忽略 Buy vs. Build 论点**，因为这种考虑已经在进行中。现在，我正在研究构建方面。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-05T14:48:21.443

有两种方法可以绕过这里，选择哪一种取决于您的软件的行为方式。

一种方法是[插件](http://www.martinfowler.com/eaaCatalog/plugin.html) [路径](http://www.google.com/search?q=creating+an+API+plugin)，人们可以在其中**将新代码安装**到应用程序中，修改相关方面。这条路线要求您的应用程序是可安装的，而不仅仅是作为服务提供（或者您安装和审查第三方发送的代码，这是一场噩梦）。

另一种方法是提供一个[API](http://www.google.com/search?q=creating+web+API)，它可以**由相关方调用，**并使应用程序将控制权转移到位于其他地方的代码（例如 Facebook 应用程序），或者使应用程序按照 API 命令使开发人员能够执行的操作（例如 Google地图）。

即使机制不同并且如何实际实现它们也不同，无论如何，您必须定义

*   我会让用户有什么自由？
*   我将为程序员提供哪些服务来定制应用程序？

最重要的是：

*   如何在我的代码中启用此功能，同时保持安全和健壮。这通常是通过对代码进行沙箱处理、验证输入并可能为用户提供有限的功能来完成的。

在这种情况下，钩子是代码中调用所有已注册插件的钩子函数的预定义位置，如果已定义，则会修改应用程序的标准行为。例如，如果你有一个渲染背景的函数，你可以拥有

```
function renderBackground() {
    foreach (Plugin p in getRegisteredPlugins()) {
        if (p.rendersBackground) p.renderBackground();
    }
    //Standard background code if nothing got executed (or it still runs, 
    //according to needs)
} 
```

在这种情况下，您拥有插件可以实现以更改背景的“renderBackground”挂钩。

以 API 方式，用户应用程序将调用您的服务来渲染背景

```
//other code
Background b = Salesforce2.AjaxRequest('getBackground',RGB(255,10,0));
//the app now has the result of calling you 
```

这也都与[好莱坞原则](http://en.wikipedia.org/wiki/Hollywood_Principle)有关，适用是好事，但有时就是不切实际。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T14:41:37.383

[EAA P](https://rads.stackoverflow.com/amzn/click/com/0321127420)的[插件模式](http://www.martinfowler.com/eaaCatalog/plugin.html)可能就是您所追求的。为您的服务创建一个公共接口，插件（模块）可以在运行时将其集成到 ad-hoc 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T14:47:31.273

这称为组件架构。这确实是一个很大的领域，但这里的一些关键的重要事情是：

*   组件的组成（容器组件可以包含任何其他组件）
    *   例如，网格应该能够包含其他网格或任何其他组件
*   通过接口编程（组件通过已知接口进行交互）
    *   例如一个视图系统，它可能要求一个组件呈现自己（比如在 HTML 中，或者它可能被传递一个呈现区域并要求视图直接在其中绘制
*   广泛使用动态注册表（加载插件时，它会在适当的注册表中注册自己）
*   将事件传递给组件的系统（例如鼠标点击、光标输入等）
*   通知
*   用户管理

还有更多！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T14:28:03.247

如果您要托管应用程序，请发布（和 dogfood）一个 RESTful API。

如果您正在分发软件，请查看[OSGi](http://www.osgi.org/Main/HomePage)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-10T17:03:03.057

这是一个小视频，至少会给你一些提示；[乐高过程](http://ra-ajax.org/LegoProcess.aspx)[少于 2 分钟]

还有一个完整的秘诀，介绍如何广泛基于模块化创建自己的框架......

制作模块化软件最重要的关键要素是要记住，这纯粹是 [主要] 一个问题，即您可以创建系统的松散耦合程度。耦合越松散，模块化就越容易......

# wpf - Dispatcher.DisableProcessing 的实际用途？

> ID：413262
> 
> 赞同：9
> 
> 时间：2009-01-05T14:29:49.873
> 
> 标签：wpf, multithreading, dispatcher

WPF中[Dispatcher.DisableProcessing](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.disableprocessing.aspx)在现实生活中的常见用途是什么？当我在代码中构建复杂的 UI 时，我可以使用它来暂停渲染和布局吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-05T15:28:36.603

As per MSDN:

> Disabling dispatcher processing is an advanced method that is intended to eliminate the chance of unrelated reentrancy.

So you're doing some work on the same thread the `Dispatcher` is executing on, but you don't want it processing events whilst you do that work. I think the really pertinent point is:

> The effects of disabling processing are as follows:
> 
> ```
> * CLR locks will not pump messages internally. 
> ```

If I understand this correctly, it means that you can safely lock and not have the dispatcher pump events as a result (which might cause undesired reentrancy).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T20:44:16.747

我可以分享我们最近遇到的一个案例。它来自`PropertyChangedEventManager`WPF 内部用于`PropertyChanged`事件处理程序管理。当 GUI 死机时，我们已经捕获了堆栈：

```
0:000> !mk
Thread 0:
           SP               IP
00:U 00000000002b7ef8 0000000076efc3ea ntdll!ZwWaitForMultipleObjects+0xa
01:U 00000000002b7f00 000007fefcfc1420 KERNELBASE!WaitForMultipleObjectsEx+0xe8
02:U 00000000002b8000 0000000076db1743 kernel32!WaitForMultipleObjectsExImplementation+0xb3
03:U 00000000002b8090 0000000076c28f7d user32!RealMsgWaitForMultipleObjectsEx+0x12a
04:U 00000000002b8130 0000000076c262b2 user32!MsgWaitForMultipleObjectsEx+0x46
05:U 00000000002b8170 000007fefeaeacd6 ole32!CCliModalLoop::BlockFn+0xc2 [d:\w7rtm\com\ole32\com\dcomrem\callctrl.cxx @ 1222]
06:U 00000000002b81c0 000007fefec0a422 ole32!CoWaitForMultipleHandles+0x102 [d:\w7rtm\com\ole32\com\dcomrem\sync.cxx @ 109]
07:U 00000000002b82d0 000007feec2865f2 clr!MsgWaitHelper+0x8e
08:U 00000000002b8340 000007feec286559 clr!Thread::DoAppropriateWaitWorker+0x29b
09:U 00000000002b8440 000007feec2b8591 clr!Thread::DoAppropriateWait+0x7d
0a:U 00000000002b84c0 000007feec286eb1 clr!SynchronizationContextNative::WaitHelper+0x181
0b:M 00000000002b88a0 000007feee7c9c39 System.Windows.Threading.DispatcherSynchronizationContext.Wait(IntPtr[], Boolean, Int32)(+0x29 Native)
0c:U 00000000002b88e0 000007feec19a7f3 clr!CallDescrWorkerInternal+0x83
0d:U 00000000002b8920 000007feec19a6de clr!CallDescrWorkerWithHandler+0x4a
0e:U 00000000002b8960 000007feec19ae76 clr!MethodDescCallSite::CallTargetWorker+0x251
0f:U 00000000002b8b10 000007feec300d01 clr!Thread::DoSyncContextWait+0xc2
10:U 00000000002b8c70 000007feec300c32 clr!Thread::DoAppropriateWaitWorker+0x4867e
11:U 00000000002b8d70 000007feec2b8591 clr!Thread::DoAppropriateWait+0x7d
12:U 00000000002b8df0 000007feec2b883d clr!CLREventBase::WaitEx+0xc0
13:U 00000000002b8e80 000007feec64046d clr!CRWLock::RWWaitForSingleObject+0x4d
14:U 00000000002b8f20 000007feec5b15b7 clr!CRWLock::StaticAcquireReaderLock+0x3b99af
15:U 00000000002b8f80 000007feec1f7ba7 clr!CRWLock::StaticAcquireReaderLockPublic+0xa7
16:M 00000000002b90f0 000007feee7f2a9c System.ComponentModel.PropertyChangedEventManager.OnPropertyChanged(System.Object, System.ComponentModel.PropertyChangedEventArgs)(+0x6 IL,+0xfc Native)
17:M 00000000002b9250 000007fe91bf5243 Telerik.Windows.Controls.GridView.GridViewDataControl.set_CurrentCellInfo(Telerik.Windows.Controls.GridViewCellInfo)(+0x0 IL,+0x313 Native) [c:\projects\Stride\Telerik_UI_for_WPF_Source_2015_1_0401\Controls\GridView\GridView\GridView\GridViewDataControl.cs @ 1019,5]
18:M 00000000002b92c0 000007fe9219b3f7 Telerik.Windows.Controls.GridView.GridViewCell.OnGotFocus(System.Windows.RoutedEventArgs)(+0x37 IL,+0xa7 Native) [c:\projects\Stride\Telerik_UI_for_WPF_Source_2015_1_0401\Controls\GridView\GridView\GridView\Cells\GridViewCell.cs @ 1176,6]
19:M 00000000002b9340 000007feedb8a36f System.Windows.UIElement.IsFocused_Changed(System.Windows.DependencyObject, System.Windows.DependencyPropertyChangedEventArgs)(+0x26 IL,+0xaf Native)
1a:M 00000000002b9380 000007feee7d6a0d System.Windows.DependencyObject.OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs)(+0x52 IL,+0xdd Native)
1b:M 00000000002b9410 000007fee366e285 System.Windows.FrameworkElement.OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs)(+0xa IL,+0x275 Native)
1c:M 00000000002b97f0 000007feee7d668a System.Windows.DependencyObject.NotifyPropertyChange(System.Windows.DependencyPropertyChangedEventArgs)(+0x2 IL,+0xfa Native)
1d:M 00000000002b9960 000007feee7d359c System.Windows.DependencyObject.UpdateEffectiveValue(System.Windows.EntryIndex, System.Windows.DependencyProperty, System.Windows.PropertyMetadata, System.Windows.EffectiveValueEntry, System.Windows.EffectiveValueEntry ByRef, Boolean, Boolean, System.Wind(+0x3f8 IL,+0x54c Native)
1e:M 00000000002b9c90 000007feee7d25be System.Windows.DependencyObject.SetValueCommon(System.Windows.DependencyProperty, System.Object, System.Windows.PropertyMetadata, Boolean, Boolean, System.Windows.OperationType, Boolean)(+0x2bb IL,+0x31e Native)
1f:M 00000000002b9e10 000007feee7d90c1 System.Windows.DependencyObject.SetValue(System.Windows.DependencyPropertyKey, System.Object)(+0xb1 Native)
20:M 00000000002b9e90 000007feedbf3d9e System.Windows.Input.FocusManager.OnFocusedElementChanged(System.Windows.DependencyObject, System.Windows.DependencyPropertyChangedEventArgs)(+0x4f IL,+0xee Native)
21:M 00000000002b9ee0 000007feee7d6a0d System.Windows.DependencyObject.OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs)(+0x52 IL,+0xdd Native)
22:M 00000000002b9f70 000007fee366e285 System.Windows.FrameworkElement.OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs)(+0xa IL,+0x275 Native)
23:M 00000000002ba350 000007feee7d668a System.Windows.DependencyObject.NotifyPropertyChange(System.Windows.DependencyPropertyChangedEventArgs)(+0x2 IL,+0xfa Native)
24:M 00000000002ba4c0 000007feee7d359c System.Windows.DependencyObject.UpdateEffectiveValue(System.Windows.EntryIndex, System.Windows.DependencyProperty, System.Windows.PropertyMetadata, System.Windows.EffectiveValueEntry, System.Windows.EffectiveValueEntry ByRef, Boolean, Boolean, System.Wind(+0x3f8 IL,+0x54c Native)
25:M 00000000002ba7f0 000007feee7d25be System.Windows.DependencyObject.SetValueCommon(System.Windows.DependencyProperty, System.Object, System.Windows.PropertyMetadata, Boolean, Boolean, System.Windows.OperationType, Boolean)(+0x2bb IL,+0x31e Native)
26:M 00000000002ba970 000007feee7d6fd1 System.Windows.DependencyObject.SetValue(System.Windows.DependencyProperty, System.Object)(+0xa1 Native)
27:M 00000000002ba9e0 000007fee36d5d0f System.Windows.FrameworkElement.OnGotKeyboardFocus(System.Object, System.Windows.Input.KeyboardFocusChangedEventArgs)(+0x10 IL,+0x7f Native)
28:M 00000000002baa40 000007feedb9a8a6 System.Windows.RoutedEventArgs.InvokeHandler(System.Delegate, System.Object)(+0xa IL,+0x56 Native)
29:M 00000000002baaa0 000007feedb9a090 System.Windows.EventRoute.InvokeHandlersImpl(System.Object, System.Windows.RoutedEventArgs, Boolean)(+0xf0 IL,+0x270 Native)
2a:M 00000000002bacd0 000007feedb8744e System.Windows.UIElement.RaiseEventImpl(System.Windows.DependencyObject, System.Windows.RoutedEventArgs)(+0x61 IL,+0x14e Native)
2b:M 00000000002bad60 000007feedb838a4 System.Windows.UIElement.RaiseTrustedEvent(System.Windows.RoutedEventArgs)(+0x16 IL,+0x64 Native)
2c:M 00000000002badc0 000007feedbaedaa System.Windows.Input.InputManager.ProcessStagingArea()(+0x1f1 IL,+0x42a Native)
2d:M 00000000002bae60 000007feedbb389e System.Windows.Input.KeyboardDevice.ChangeFocus(System.Windows.DependencyObject, Int32)(+0x284 IL,+0x63e Native)
2e:M 00000000002baef0 000007feedbb2624 System.Windows.Input.KeyboardDevice.Focus(System.Windows.DependencyObject, Boolean, Boolean, Boolean)(+0x4e IL,+0x94 Native)
2f:M 00000000002baf60 000007feedbb2491 System.Windows.Input.KeyboardDevice.Focus(System.Windows.IInputElement)(+0x5f IL,+0x31 Native)
30:M 00000000002bafc0 000007feedb79bcf System.Windows.Interop.HwndKeyboardInputProvider.OnSetFocus(IntPtr)(+0xaf IL,+0x10f Native)
31:M 00000000002bb0e0 000007feedb9423b System.Windows.Interop.HwndKeyboardInputProvider.FilterMessage(IntPtr, MS.Internal.Interop.WindowMessage, IntPtr, IntPtr, Boolean ByRef)(+0x1e1 IL,+0x54b Native)
32:M 00000000002bb2a0 000007feedb932f1 System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)(+0x8e IL,+0x141 Native)
33:M 00000000002bb310 000007feee7cb45a MS.Win32.HwndWrapper.WndProc(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)(+0x39 IL,+0x14a Native)
34:M 00000000002bb3c0 000007feee7cb2e0 MS.Win32.HwndSubclass.DispatcherCallbackOperation(System.Object)(+0x5b IL,+0x80 Native)
35:M 00000000002bb410 000007feee7cb15a System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)(+0x7e IL,+0x5a Native)
36:M 00000000002bb470 000007feee7cb0e7 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)(+0x11 IL,+0x47 Native)
37:M 00000000002bb4d0 000007feee7c846c System.Windows.Threading.Dispatcher.LegacyInvokeImpl(System.Windows.Threading.DispatcherPriority, System.TimeSpan, System.Delegate, System.Object, Int32)(+0xce IL,+0x2bc Native)
38:M 00000000002bb570 000007feee7ca9d0 MS.Win32.HwndSubclass.SubclassWndProc(IntPtr, Int32, IntPtr, IntPtr)(+0x129 IL,+0x140 Native)
39:M 00000000002bb670 000007feee9759d7 DomainBoundILStubClass.IL_STUB_ReversePInvoke(Int64, Int32, Int64, Int64)
3a:U 00000000002bb700 000007feec1fb42e clr!UMThunkStub+0x6e
3b:U 00000000002bb790 0000000076c29bd1 user32!UserCallWinProcCheckWow+0x1ad
3c:U 00000000002bb850 0000000076c272cb user32!DispatchClientMessage+0xc3
3d:U 00000000002bb8b0 0000000076c26829 user32!_fnDWORD+0x2d
3e:U 00000000002bb910 0000000076efbd75 ntdll!KiUserCallbackDispatcherContinue
3f:U 00000000002bb998 0000000076c2685a user32!ZwUserMessageCall+0xa
40:U 00000000002bb9a0 0000000076c268a2 user32!RealDefWindowProcWorker+0xa4
41:U 00000000002bba70 0000000076c2760e user32!RealDefWindowProcW+0x5a
42:U 00000000002bbab0 0000000076c275a4 user32!DefWindowProcW+0xfc
43:U 00000000002bbb00 0000000076c29bd1 user32!UserCallWinProcCheckWow+0x1ad
44:U 00000000002bbbc0 0000000076c23bfc user32!CallWindowProcAorW+0xdc
45:U 00000000002bbc10 0000000076c23b78 user32!CallWindowProcW+0x18
46:M 00000000002bbc50 000007feee7cb599 MS.Win32.HwndSubclass.DefWndProcWrapper(IntPtr, Int32, IntPtr, IntPtr)(+0x9 IL,+0xb9 Native)
47:M 00000000002bbd40 000007feee9759d7 DomainBoundILStubClass.IL_STUB_ReversePInvoke(Int64, Int32, Int64, Int64)
48:U 00000000002bbdd0 000007feec1fb42e clr!UMThunkStub+0x6e
49:U 00000000002bbe60 0000000076c29bd1 user32!UserCallWinProcCheckWow+0x1ad
4a:U 00000000002bbf20 0000000076c23bfc user32!CallWindowProcAorW+0xdc
4b:U 00000000002bbf70 0000000076c23b78 user32!CallWindowProcW+0x18
4c:M 00000000002bbfb0 000007feee7caa86 MS.Win32.HwndSubclass.SubclassWndProc(IntPtr, Int32, IntPtr, IntPtr)(+0x154 IL,+0x1f6 Native)
4d:M 00000000002bc0b0 000007feee9759d7 DomainBoundILStubClass.IL_STUB_ReversePInvoke(Int64, Int32, Int64, Int64)
4e:U 00000000002bc140 000007feec1fb42e clr!UMThunkStub+0x6e
4f:U 00000000002bc1d0 0000000076c29bd1 user32!UserCallWinProcCheckWow+0x1ad
50:U 00000000002bc290 0000000076c272cb user32!DispatchClientMessage+0xc3
51:U 00000000002bc2f0 0000000076c26829 user32!_fnDWORD+0x2d
52:U 00000000002bc350 0000000076efbd75 ntdll!KiUserCallbackDispatcherContinue
53:U 00000000002bc3d8 0000000076c2908a user32!NtUserPeekMessage+0xa
54:U 00000000002bc3e0 0000000076c29055 user32!PeekMessageW+0x105
55:U 00000000002bc430 000007fefebaff92 ole32!CCliModalLoop::MyPeekMessage+0x52 [d:\w7rtm\com\ole32\com\dcomrem\callctrl.cxx @ 1733]
56:U 00000000002bc4a0 000007fefebb0109 ole32!CCliModalLoop::PeekRPCAndDDEMessage+0x49 [d:\w7rtm\com\ole32\com\dcomrem\callctrl.cxx @ 1500]
57:U 00000000002bc510 000007fefeb3e153 ole32!CCliModalLoop::BlockFn+0x5353f
58:U 00000000002bc560 000007fefec0a422 ole32!CoWaitForMultipleHandles+0x102 [d:\w7rtm\com\ole32\com\dcomrem\sync.cxx @ 109]
59:U 00000000002bc670 000007feec2865f2 clr!MsgWaitHelper+0x8e
5a:U 00000000002bc6e0 000007feec286559 clr!Thread::DoAppropriateWaitWorker+0x29b
5b:U 00000000002bc7e0 000007feec2b8591 clr!Thread::DoAppropriateWait+0x7d
5c:U 00000000002bc860 000007feec286eb1 clr!SynchronizationContextNative::WaitHelper+0x181
5d:M 00000000002bcc40 000007feee7c9c39 System.Windows.Threading.DispatcherSynchronizationContext.Wait(IntPtr[], Boolean, Int32)(+0x29 Native)
5e:U 00000000002bcc80 000007feec19a7f3 clr!CallDescrWorkerInternal+0x83
5f:U 00000000002bccc0 000007feec19a6de clr!CallDescrWorkerWithHandler+0x4a
60:U 00000000002bcd00 000007feec19ae76 clr!MethodDescCallSite::CallTargetWorker+0x251
61:U 00000000002bceb0 000007feec300d01 clr!Thread::DoSyncContextWait+0xc2
62:U 00000000002bd010 000007feec300c32 clr!Thread::DoAppropriateWaitWorker+0x4867e
63:U 00000000002bd110 000007feec2b8591 clr!Thread::DoAppropriateWait+0x7d
64:U 00000000002bd190 000007feec2b883d clr!CLREventBase::WaitEx+0xc0
65:U 00000000002bd220 000007feec64046d clr!CRWLock::RWWaitForSingleObject+0x4d
66:U 00000000002bd2c0 000007feec5b0e98 clr!CRWLock::StaticAcquireWriterLock+0x3b98e8
67:U 00000000002bd310 000007feec1f77d7 clr!CRWLock::StaticAcquireWriterLockPublic+0xa7
68:M 00000000002bd480 000007feee7dca9a System.ComponentModel.PropertyChangedEventManager.AddListener(System.ComponentModel.INotifyPropertyChanged, System.String, System.Windows.IWeakEventListener, System.EventHandler`1<System.ComponentModel.PropertyChangedEventArgs>)(+0x4a Native)
69:M 00000000002bd500 000007feee7dc8d7 System.ComponentModel.PropertyChangedEventManager.AddHandler(System.ComponentModel.INotifyPropertyChanged, System.EventHandler`1<System.ComponentModel.PropertyChangedEventArgs>, System.String)(+0x37 Native)
6a:M 00000000002bd550 000007fee36bc902 MS.Internal.Data.PropertyPathWorker.ReplaceItem(Int32, System.Object, System.Object)(+0x584 IL,+0x702 Native)
6b:M 00000000002bd690 000007fee36bbcbc MS.Internal.Data.PropertyPathWorker.UpdateSourceValueState(Int32, System.ComponentModel.ICollectionView, System.Object, Boolean)(+0xa7 IL,+0x13c Native)
6c:M 00000000002bd710 000007fee412602d MS.Internal.Data.PropertyPathWorker.UpdateSourceValueState(Int32, System.ComponentModel.ICollectionView)(+0x0 IL,+0x3d Native)
6d:M 00000000002bd760 000007fee36f3a2e MS.Internal.Data.ClrBindingWorker.OnSourcePropertyChanged(System.Object, System.String)(+0x1b IL,+0x5e Native)
6e:M 00000000002bd7a0 000007feee7dcf19 System.Windows.WeakEventManager+ListenerList`1[[System.__Canon, mscorlib]].DeliverEvent(System.Object, System.EventArgs, System.Type)(+0x54 IL,+0xa9 Native)
6f:M 00000000002bd850 000007feee7b7863 System.Windows.WeakEventManager.DeliverEventToList(System.Object, System.EventArgs, ListenerList)(+0xf IL,+0x33 Native)
70:M 00000000002bd8a0 000007feee7f300d System.ComponentModel.PropertyChangedEventManager.OnPropertyChanged(System.Object, System.ComponentModel.PropertyChangedEventArgs)(+0x1de IL,+0x66d Native)
71:U 00000000002bda00 000007fe8cce0111 CLRStub[StubLinkStub]@7fe8cce0111
72:M 00000000002bdac0 000007fe8f6f38c2 *** WARNING: Unable to verify checksum for MyCompany.Core.dll
*** ERROR: Module load completed but symbols could not be loaded for MyCompany.Core.dll
MyCompany.Core.ComponentModel.PropertyChangedNotifiableExtension.SetValue[[System.__Canon, mscorlib]](MyCompany.Core.ComponentModel.IPropertyChangedNotifiableEx, System.ComponentModel.PropertyChangedEventArgs, System.__Canon ByRef, System.__Canon, S(+0x5c IL,+0x1a2 Native)
73:M 00000000002bdb20 000007fe8f6f36f2 MyCompany.Core.ComponentModel.NotifyPropertyChangedBase.SetValue[[System.__Canon, mscorlib]](System.ComponentModel.PropertyChangedEventArgs, System.__Canon ByRef, System.__Canon)(+0x0 IL,+0xd2 Native)
74:U 00000000002bdb80 000007feec29f0b7 clr!InstantiatingMethodStubWorker+0xc7
75:M 00000000002bdc40 000007fe923d56f1 *** WARNING: Unable to verify checksum for MyCompany.Modules.dll
*** ERROR: Module load completed but symbols could not be loaded for MyCompany.Modules.dll
MyCompany.Modules.Blotters.ViewModels.MyViewModel.SetOrders(MyCompany.Modules.Models.MyModel[], MyCompany.Modules.Models.MyModel[])(+0xd IL,+0x31 Native)
76:M 00000000002bdc80 000007feee7cb228 System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)(+0x3f IL,+0x128 Native)
77:M 00000000002bdce0 000007feee7cb0e7 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)(+0x11 IL,+0x47 Native)
78:M 00000000002bdd40 000007feee7ce9f1 System.Windows.Threading.DispatcherOperation.InvokeImpl()(+0x9e IL,+0x281 Native)
79:M 00000000002bde00 000007feeb0839a5 System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)(+0x72 IL,+0x285 Native)
7a:M 00000000002bdf60 000007feeb083719 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)(+0x0 IL,+0x9 Native)
7b:M 00000000002bdf90 000007feeb0836f7 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)(+0x57 Native)
7c:M 00000000002bdfe0 000007feee7ce621 System.Windows.Threading.DispatcherOperation.Invoke()(+0x20 IL,+0x71 Native)
7d:M 00000000002be060 000007feee7c9063 System.Windows.Threading.Dispatcher.ProcessQueue()(+0xf0 IL,+0x2e3 Native)
7e:M 00000000002be130 000007feee7c93c3 System.Windows.Threading.Dispatcher.WndProcHook(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)(+0x45 IL,+0xb3 Native)
7f:M 00000000002be1f0 000007feee7cb45a MS.Win32.HwndWrapper.WndProc(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)(+0x39 IL,+0x14a Native)
80:M 00000000002be2a0 000007feee7cb2e0 MS.Win32.HwndSubclass.DispatcherCallbackOperation(System.Object)(+0x5b IL,+0x80 Native)
81:M 00000000002be2f0 000007feee7cb15a System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)(+0x7e IL,+0x5a Native)
82:M 00000000002be350 000007feee7cb0e7 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)(+0x11 IL,+0x47 Native)
83:M 00000000002be3b0 000007feee7c846c System.Windows.Threading.Dispatcher.LegacyInvokeImpl(System.Windows.Threading.DispatcherPriority, System.TimeSpan, System.Delegate, System.Object, Int32)(+0xce IL,+0x2bc Native)
84:M 00000000002be450 000007feee7ca9d0 MS.Win32.HwndSubclass.SubclassWndProc(IntPtr, Int32, IntPtr, IntPtr)(+0x129 IL,+0x140 Native)
85:M 00000000002be550 000007feee9759d7 DomainBoundILStubClass.IL_STUB_ReversePInvoke(Int64, Int32, Int64, Int64)
86:U 00000000002be5e0 000007feec1fb42e clr!UMThunkStub+0x6e
87:U 00000000002be670 0000000076c29bd1 user32!UserCallWinProcCheckWow+0x1ad
88:U 00000000002be730 0000000076c298da user32!DispatchMessageWorker+0x3b5
89:M 00000000002be7b0 000007feee7f5900 DomainBoundILStubClass.IL_STUB_PInvoke(System.Windows.Interop.MSG ByRef)
8a:M 00000000002be880 000007feee7c7332 System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame)(+0x48 IL,+0x112 Native)
8b:M 00000000002be920 000007fee361f2ea System.Windows.Application.RunInternal(System.Windows.Window)(+0xf0 IL,+0x17a Native)
8c:M 00000000002be9c0 000007fee361ebf7 System.Windows.Application.Run()(+0x67 Native)
8d:M 00000000002bea00 000007fe8cc80100 *** WARNING: Unable to verify checksum for exe
*** ERROR: Module load completed but symbols could not be loaded for exe
XamlGeneratedNamespace.GeneratedApplication.Main()(+0x0 IL,+0x70 Native)
8e:U 00000000002bea40 000007feec19a7f3 clr!CallDescrWorkerInternal+0x83
8f:U 00000000002bea80 000007feec19a6de clr!CallDescrWorkerWithHandler+0x4a
90:U 00000000002beac0 000007feec19ae76 clr!MethodDescCallSite::CallTargetWorker+0x251
91:U 00000000002bec70 000007feec327749 clr!RunMain+0x1e7
92:U 00000000002bee50 000007feec327a8e clr!Assembly::ExecuteMainMethod+0xb6
93:U 00000000002bf140 000007feec327987 clr!SystemDomain::ExecuteMainMethod+0x506
94:U 00000000002bf750 000007feec32790a clr!ExecuteEXE+0x3f
95:U 00000000002bf7c0 000007feec327862 clr!_CorExeMainInternal+0xae
96:U 00000000002bf850 000007feec324174 clr!CorExeMain+0x14
97:U 00000000002bf890 000007fef78a72fd mscoreei!CorExeMain+0xe0
98:U 00000000002bf8e0 000007fef7a25b21 mscoree!CorExeMain_Exported+0x57
99:U 00000000002bf910 0000000076da59dd kernel32!BaseThreadInitThunk+0xd
9a:U 00000000002bf940 0000000076eda631 ntdll!RtlUserThreadStart+0x1d 
```

这里的堆栈模式显示它是一个重入：

```
4f:U 00000000002bc1d0 0000000076c29bd1 user32!UserCallWinProcCheckWow+0x1ad
50:U 00000000002bc290 0000000076c272cb user32!DispatchClientMessage+0xc3
51:U 00000000002bc2f0 0000000076c26829 user32!_fnDWORD+0x2d
52:U 00000000002bc350 0000000076efbd75 ntdll!KiUserCallbackDispatcherContinue
53:U 00000000002bc3d8 0000000076c2908a user32!NtUserPeekMessage+0xa
54:U 00000000002bc3e0 0000000076c29055 user32!PeekMessageW+0x105
55:U 00000000002bc430 000007fefebaff92 ole32!CCliModalLoop::MyPeekMessage+0x52 [d:\w7rtm\com\ole32\com\dcomrem\callctrl.cxx @ 1733]
56:U 00000000002bc4a0 000007fefebb0109 ole32!CCliModalLoop::PeekRPCAndDDEMessage+0x49 [d:\w7rtm\com\ole32\com\dcomrem\callctrl.cxx @ 1500]
57:U 00000000002bc510 000007fefeb3e153 ole32!CCliModalLoop::BlockFn+0x5353f
58:U 00000000002bc560 000007fefec0a422 ole32!CoWaitForMultipleHandles+0x102 [d:\w7rtm\com\ole32\com\dcomrem\sync.cxx @ 109] 
```

绑定时的`PropertyChangedEventManager`用途`ReaderWriterLock`发生了变化，因此我们必须`DisableProcessing`在更改视图模型中的属性时避免该问题。

# c# - 适用于 WindowsCE 5.0 和 .NET2.0 的蓝牙与 C#

> ID：413269
> 
> 赞同：2
> 
> 时间：2009-01-05T14:31:26.140
> 
> 标签：c#, windows-mobile, .net-2.0

我正在寻找图书馆，以在我的设备和其他设备之间创建蓝牙连接。我想使用：

1.  适用于 Windows Mobile 的 .NET2.0
2.  视窗CE 5.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-05T14:49:29.757

如果您使用的是特定设备，大多数公司都有一个有用的 SDK，可用于蓝牙功能/例程。

但是，如果您正在寻找跨多个设备的通用功能，您可以查看[32Feet.net](http://32feet.net/)或[OpenNetCF](http://community.opennetcf.com/)。

但请注意，如果您使用的是 CE 5.0，则默认情况下不再包含 bthutil.dll，因此 32Feet.net (In the Hand) 中的许多功能实际上将无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T14:43:22.840

我自己（还）没有做太多，但我读过*[Mobile in the Hand](http://32feet.net/)*有很好的托管库，其中包括蓝牙支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T14:44:15.320

您可能需要更进一步了解您想要做什么。

根据您的项目状态有许多不同的解决方案，您是否已经与手持和PC配对？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T14:44:37.317

我曾经能够获得安装了 .NET Compact Framework 2.0 的 Windows Mobile 设备，以便使用[32feet.NET 库](http://inthehand.com/files/)与 PC 进行通信。你可能想看看。

# .net - .NET 3.5 安全问题

> ID：413279
> 
> 赞同：2
> 
> 时间：2009-01-05T14:35:43.607
> 
> 标签：.net, windows, security

我在 Windows 2003 系统上安装了 .net 3.5。我注意到除了最新的 .net 3.5 级别之外，还会自动安装以前级别的 .net，例如 1.0 和 2.0。这些旧版本存在安全问题，我认为这些问题已在 .net 3.5 中得到纠正。这是正确的还是必须安装这些旧 .net 版本的相关安全补丁来强化系统？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-05T14:37:22.433

.Net 3.5 SP1 包含自为 .Net 2.0、3.0 和 3.5 打包之日起的所有汇总安全补丁。

.Net 3.5 与 3.0 一样，是 .Net 2.0 的超集。这意味着它基本上是 .Net 2.0 的附加组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T15:04:16.310

Unless the patches break your application, you should always install the latest security patches for all softwre installed on your system. This should be part of a regular and, preferably, automated process. Since .NET 3.5 is completely separate from .NET 1.x, you will need to address the .NET 1.x security patches as well as .NET 3.5 SP1 (and any later patches that may come along).

# java - 检测 Java 项目 Cruft

> ID：413292
> 
> 赞同：9
> 
> 时间：2009-01-05T14:39:37.013
> 
> 标签：java, netbeans, refactoring

我是 NetBeans 6.5 用户，正在寻找一种方法来生成一组项目组中未使用的方法/类列表。

我知道我可以右键单击每种方法并选择“查找用法”，但我正在寻找该过程的自动化。

我愿意看看在 netbeans 之外运行的东西，只要它生成一个杂乱无章的方法/类列表。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-05T16:53:31.690

[像proguard](http://proguard.sourceforge.net/)这样的混淆器可以通过删除未使用的方法/类来缩小你的 jar。也许可以获得包含已删除（因此未使用）的类/方法列表的详细输出。

[在这里](http://proguard.sourceforge.net/manual/examples.html#deadcode)，您可以找到有关使用 proguard 查找死代码的更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-05T14:49:11.503

您可以在 PMD（有一个 NetBeans 插件）中打开[未使用的代码规则，然后在整个项目上运行 PMD。](http://pmd.sourceforge.net/rules/unusedcode.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-05T19:32:23.913

使用测试覆盖工具来检测您的代码库，然后运行应用程序本身，而不是测试。

[Emma](http://emma.sourceforge.net/)和[Eclemma](http://www.eclemma.org/)将为您提供关于在任何给定的代码运行中运行的类的百分比的很好的报告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T19:07:54.600

您可以使用多种工具来帮助查找这些问题和其他问题：

*   [PMD](http://pmd.sourceforge.net/)（上面的蜥蜴比尔提到）
*   [格纹风格](http://checkstyle.sourceforge.net/)
*   [查找错误](http://findbugs.sourceforge.net/)

# mysql - MySQL 5.0 语法的最佳参考在哪里？

> ID：413297
> 
> 赞同：0
> 
> 时间：2009-01-05T14:42:38.117
> 
> 标签：mysql

我在哪里可以找到 MySQL 5.0 语法的手册？我需要的是与我的 MySQL 服务器版本（MySQL 5.0）相对应的手册？

考虑到这一点：我使用 MySQL 5.0 和 NaviCat 作为 GUI。如果我运行此查询：

```
CREATE TABLE `genres` (
`id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
`genre_name` VARCHAR( 25 ) NOT NULL
`description` VARCHAR( 100 ) NOT NULL
) ENGINE = innodb; 
```

-> Navicat 让我检查你的语法错误，sql 提示也是如此。

我在哪里可以找到有关 SQL 5.0 语法的信息？我已经尝试过 SQL 站点并在 Google 上搜索过，但没有运气。也许我真的是个白痴；-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-05T14:44:28.033

[http://dev.mysql.com/doc/refman/5.0/en/](http://dev.mysql.com/doc/refman/5.0/en/)

更具体地说，对于 CREATE TABLE 语句：

[http://dev.mysql.com/doc/refman/5.0/en/create-table.html](http://dev.mysql.com/doc/refman/5.0/en/create-table.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-05T14:48:29.010

[http://dev.mysql.com/doc/refman/5.0/en/sql-syntax.html](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax.html)怎么样？

您的查询中的第 3 行和第 4 行之间似乎缺少逗号 (,)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-05T14:45:42.697

[MySQL](http://dev.mysql.com/doc/refman/5.0/en/index.html)官方文档是最好的地方。它有所有的教程和参考资料

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T14:46:31.353

这应该为您指明正确的方向：[MySQL 语句语法](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-05T14:47:45.343

看起来您在此行末尾缺少逗号（添加了逗号）：

```
`genre_name` VARCHAR( 25 ) NOT NULL, 
```

除了 create table 语句的最后一行之外，每一行后面都需要一个逗号。

# c# - Visual Studio Web 用户控件事件仅在设计模式下显示？

> ID：413300
> 
> 赞同：5
> 
> 时间：2009-01-05T14:43:33.200
> 
> 标签：c#, visual-studio, events

调用所有 Visual Studio 大师 — 当我在 ac# web 项目中处理 .ascx 或 .aspx 文件时，除非我从代码视图切换到设计视图，否则**事件**不会显示在属性面板中。这是 Visual Studio 的有意功能吗？VS2005 和 VS2008 似乎都以这种方式工作。

有没有办法让事件一直显示在属性面板中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-05T15:02:26.860

I don't know if that's the way VS is 'intended to work, but yes that's a limitation. In case you've noticed sometimes clicking on the control and pressing F4 (or clicking on the properties tab) fails to load the properties for the correct control, and then you gotta select it from the list.

*Sigh*

That apart, if you make a usercontrol of your own, and give it an event, that event will not show up in the properties tab when you put it on a page. You'll have to capture it manually in the Page_Init event (like demonstrated by fallen888).

These days I don't bother with going to the properties tab to see an event. You can just as well type the event's name in the mark-up and then write it in the code-behind file.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T14:47:45.967

是的，这就是 Visual Studio 的工作方式。这并不能帮助您在属性面板中查看它们，但您可以通过在代码隐藏中键入以下内容来获取事件列表（除其他外）：

" `this.`" 和智能感知应该向您显示一个列表。

我通常做的是覆盖 OnInit 方法并将所有事件处理程序映射放在那里。所以它看起来像这样：

```
override protected void OnInit(EventArgs e)
{
  this.Load += new System.EventHandler(this.Page_Load);
  this.myButton.Click += new System.EventHandler(this.myButton_Click);

  base.OnInit(e);
} 
```

如果您使用智能感知来执行此操作，则只要您输入“+=”，您就可以选择自动完成该行以及事件处理程序方法的签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T14:49:35.807

是的，我希望我们有与 WPF 类似的事件自动完成级别，您可以在 IntelliSense 中看到事件名称并让它在后面的代码中自动为您创建一个新的存根事件:(

# c# - 方法名称会编译到 EXE 中吗？

> ID：413311
> 
> 赞同：6
> 
> 时间：2009-01-05T14:47:12.600
> 
> 标签：c#, methods, performance, obfuscation, cil

将 Windows 应用程序项目编译为 EXE 后，类、方法和变量**名称是否包含在 MSIL 中？**

*   对于**混淆**- 更少的名称，更难逆向工程。
*   并且为了**性能**- 更短的名称，更快的访问。

*例如*，如果方法是通过名称调用的：

*   保持名称**简短**，命名查找的性能更好。
*   保持名称**神秘**，更难反编译。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-05T14:50:46.103

是的，它们在 IL - 启动[Reflector](http://www.red-gate.com/products/reflector/)，你会看到它们。如果它们最终没有出现在 IL 中，那么您就无法将它们作为库来构建。（是的，您可以像引用类库一样引用 .exe 文件。）

但是，这一切都在 JIT 中解决了一次。

保持名称**可读**，以便您将来能够维护代码。性能问题不太可能产生*任何*可衡量的差异，如果您想混淆您的代码，请不要在源代码级别（*您是*阅读代码的人）这样做 - 使用专门构建的混淆器。

编辑：至于包含的内容 - 为什么不启动 Reflector 或 ildasm 并找出答案？从内存中，您会丢失局部变量名称（如果您构建它，则在 pdb 文件中）但仅此而已。私有方法名称和私有变量名称仍然存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-05T14:48:34.563

是的，他们有。我认为使用较短的名称不会有显着的性能提升。增益无法克服可读性的损失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T14:52:56.177

局部变量不包含在 MSIL 中。字段，方法，类等。变量是基于索引的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T14:58:37.083

成员名称确实包含在 IL 中，无论它们是私有的还是公共的。事实上，您的所有代码也都包含在内，如果您使用 Reflector，您实际上可以阅读应用程序的所有源代码。剩下的是调试应用程序，我认为可能有工具可以解决这个问题。

如果您正在制作具有大量客户和竞争的打包应用程序，您必须绝对（我不能再强调）混淆您的代码。幸运的是，有许多混淆器可用。

这是我对 .Net 的主要抱怨。既然 MS 在这方面做了很多艰苦的工作，为什么不开发（或获得）一个专业的混淆器并将其作为 VS 的一部分。Dotfuscator 只是没有削减它，而不是他们为社区提供的版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-05T14:59:17.863

> *   保持名称简短，命名查找的性能更好。

这怎么能有什么不同呢？我不确定 VM 是如何查找标识符的，但我很确定它没有进行直接的字符串比较查找。这将是最糟糕的方法。

> *   保持名称神秘，更难反编译。

老实说，我不认为代码混淆有多大帮助。大多数有能力的开发人员已经开发出一种“第六感”来快速解决问题，即使像方法名称这样的标识符完全没有帮助，因为他们需要维护或改进的源代码通常已经存在这些问题（我说的是方法名称像“DoAllStuff（）”）。

无论如何，**通过默默无闻的安全通常是一个坏主意**。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-05T14:59:28.957

如果您担心混淆，请查看 .NET Reactor。我测试了 8 种不同的混淆器，Reactor 不仅是最便宜的商业混淆器，而且是同类产品中第二好的（最好的是最昂贵的，Dotfuscator Gold）。

[编辑]

实际上，现在我想起来了，如果您关心的只是混淆方法名称，那么 VS.NET 附带的 Dotfuscator 社区版应该可以正常工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-05T14:55:19.727

我认为它们已添加，但名称的长度不会影响任何事情，因为查找函数名称的方式。至于混淆，我认为有一些工具（Dotfuscator 或类似的东西）基本上可以完全按照你的意思做。

# macos - 在 TextMate 中“跳回”文件的最快方法是什么？

> ID：413330
> 
> 赞同：3
> 
> 时间：2009-01-05T14:51:06.490
> 
> 标签：macos, editor, textmate

通常，当我阅读代码或调试时，我希望能够快速跳转文件。我特别想“回到”我原来的地方。我知道“Command+T”、“Command+Shift+T”和书签。但是，我想不出一种快速跳转文件的方法。

更新：从给出的两个答案来看，我认为我的问题不够清楚。具体来说，我正在寻找一种方法来“跳回”到我在文件中的位置。我知道如何在 TextMate 中导航（通常）。我想知道 TextMate 是否有“跳回”键绑定。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-12-04T08:16:43.397

这是微妙的。

command-T 的文件以最近使用的顺序列出。因此，您可以使用 command-T return 快速返回上一个文件。一开始我也找不到。

我不认为有最后一个编辑位置，比如 IDEA/RubyMine。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-05T14:54:40.183

由[MacroMates.com](http://manual.macromates.com/en/working_with_multiple_files.html)提供 2.3 在文件之间移动（优雅）

处理项目时，有几种方法可以在打开的文件之间移动。

最直接的方法是单击您需要的文件选项卡。这也可以通过按 ⌘1-9 从键盘完成，这将切换到文件选项卡 1-9。

您也可以使用 ⌥⌘← 和 ⌥⌘→ 选择当前文件左侧或右侧的文件选项卡。

可以通过使用鼠标对它们进行拖动排序来重新排列文件选项卡（在选项卡上单击并按住鼠标按钮，然后将其拖动到新位置）。这应该可以安排它们，使键盘切换更自然。

另一个键是⌥⌘↑，它循环浏览与当前文件具有相同基本名称的文本文件。这主要在使用具有接口文件（头文件）和实现文件（源代码）的语言时很有用。

当您想要移动到未打开的文件时，您可以使用导航菜单中的转到文件... 操作（绑定到 ⌘T）。这将打开一个如下所示的窗口。

转到文件

此窗口列出了项目中按上次使用排序的所有文本文件，这意味着按回车键将打开（或转到）您处理的最后一个文件。因此，以这种方式使用它可以轻松切换到最近使用的文件。

您可以输入过滤字符串来缩小显示的文件数量。此过滤器字符串与作为缩写的文件名匹配，并且文件根据它们与给定缩写的匹配程度进行排序。例如，在上图中，过滤器字符串是 otv，TextMate 确定 OakTextView.h 是最匹配的（通过将其放在顶部）。

我想要的文件是 OakTextView.mm，排名为 #2。但是由于我过去已经纠正了它，TextMate 了解到这是应该与 otv 过滤器字符串一起使用的匹配项，即它是自适应的并且可以从您的使用模式中学习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T14:54:51.803

如果您打开了项目窗口，可以将经常访问的文件保持打开状态（在选项卡中），然后使用 ⌘+1-9 跳转到打开的选项卡。

# internet-explorer - 如何从我的程序中列出 Internet Explorer 使用的插件 (BHO)？

> ID：413333
> 
> 赞同：5
> 
> 时间：2009-01-05T14:52:21.373
> 
> 标签：internet-explorer, plugins, bho

我需要在我的 Win32 独立程序中检索**当前安装的 Internet Explorer 加载项**（浏览器帮助程序对象）的列表，以及 - 如果可能的话 - 它们的启用/禁用状态。

由于反间谍软件程序（或例如[Autoruns ）可以从某个地方获取此列表，是否有一种简单的方法来以](https://technet.microsoft.com/cs-cz/sysinternals/bb963902)**编程**方式请求此列表？

**编辑**：感谢[@Stefan](https://stackoverflow.com/users/48003/stefan)，他向我指出了正确的注册表项（**所有 HKLM**）：

```
// BHOs
HKLM\Software\Microsoft\Windows\CurrentVersion\explorer\Browser Helper Objects 
// IE toolbars
HKLM\Software\Microsoft\Internet Explorer\Toolbar
// IE extensions
HKLM\Software\Microsoft\Internet Explorer\Extensions 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-05T17:18:24.743

BHO注册于

```
HKLM\Software\Microsoft\Windows\CurrentVersion\explorer\Browser Helper Objects 
```

IE工具栏注册在

```
HKLM\Software\Microsoft\Internet Explorer\Toolbar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T15:18:28.603

我使用 HijackThis。

[ [http://www.trendsecure.com/portal/en-US/tools/security_tools/hijackthis/overview]](http://www.trendsecure.com/portal/en-US/tools/security_tools/hijackthis/overview])

它显示了 BHO 列表（以及许多其他有用的信息），但不幸的是，它没有显示启用/禁用状态。

# .net - .Net 服务器集群技术

> ID：413345
> 
> 赞同：1
> 
> 时间：2009-01-05T14:56:50.927
> 
> 标签：.net, wcf, sockets, cluster-computing

我想开发一个多服务器集群框架，其工作方式与以下消息流步骤类似。

**来自客户**

*   网关服务器收到消息
*   网关服务器发送 ACK 消息 (UDP)
*   消息通过工厂自定义从二进制反序列化为对象
*   然后将消息路由到集群中的辅助服务器（基于配置）并通过 WCF 将对象发送到辅助服务器
*   消息在辅助服务器上处理。

**从服务器**

*   辅助服务器构建消息并发送到网关服务器
*   网关服务器二进制序列化消息
*   网关服务器将二进制文件发送到客户端并等待 ACK 消息 (UDP)

服务器将通过 .config 文件配置为指向服务，可以在本地同一应用程序（WCF 将被初始化）或其他系统中。

有没有人致力于创建任何类型的这样的架构，如果是这样，你遇到了哪些问题？

* * *

**编辑**
系统将成为已经存在的协议的服务器端，因此任何客户端到服务器协议本质上都是不可触及的，但它确实包括状态管理（客户端在每次调用时发送会话）、加密、服务器路由、和数据包保护。

* * *

**编辑**
甚至可以提供一个链接到使用.Net 中的集群的开源项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-05T15:13:02.220

跨长时间运行的事务维护会话状态可能成为主要障碍。您需要确保您的负载平衡解决方案能够考虑或适应在一台服务器上开始并在另一台服务器上完成的会话。这可以通过通过外部源共享状态来实现，例如浏览器/客户端上的 cookie 或公共数据库服务器上的条目。或者，许多硬件负载平衡解决方案将使用“粘性会话”来确保客户端始终返回到同一服务器（例如基于 IP 地址）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-29T17:16:19.980

> 编辑甚至可以提供一个链接到使用.Net 中的集群的开源项目吗？

检查[此示例应用程序](http://msdn.microsoft.com/en-us/netframework/bb499684.aspx)。根据网站...

> 使用 ASP.NET 和 WCF 演示面向服务的 n 层设计
> 
> *   UI、业务服务和数据库访问的清晰分离
> *   性能设计和调优
> *   *通过动态集群进行水平扩展*
> *   集群服务节点集中配置管理

# .net - 你能控制DataContractSerializer反序列化的深度吗？

> ID：413349
> 
> 赞同：2
> 
> 时间：2009-01-05T14:57:15.793
> 
> 标签：.net, serialization, xml-serialization, datacontractserializer

我有一个相当大的对象图，我已通过 DataContractSerializer 将其序列化为一个文件。我现在想向用户展示这些文件的列表以供选择。在此列表中，我想显示有关文件的一些详细信息，它们是根对象的属性。我不想将整个图形加载到内存中，因为我只对显示根节点的属性感兴趣。

有谁知道控制反序列化“深度”的方法，这样我就可以从文件中提取根对象并跳过子对象？我宁愿避免将文件视为原始 XML，因为我没有在其他任何地方进行任何原始 XML 操作，这将是我必须保持同步的另一个代码分支。

我现在唯一的想法是创建一个兼容的“摘要”对象，其中只包含我感兴趣的属性，而不包含任何子对象，并将文件反序列化为该对象。这应该跳过孩子，因为它们与摘要对象无关。

有没有更好的方法来实现这一点？

**更新/澄清**：属性不是我正在寻找的答案。一方面，当对象第一次序列化时，它们会阻止“额外”属性出现在文件中。

其次，它们比我想要做的更持久。最终，我确实想反序列化整个文件，但不是在这一点上。我正在尝试显示用户将从中选择导入的文件的摘要列表。在导入期间，我将需要所有的子孙。在第 1 步中这只是矫枉过正。这些文件可能是大文件，因此完全反序列化其中的几个以便我可以显示它们的标题信息是行不通的。

希望这可以消除对原始问题的任何困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-05T15:56:44.143

这几乎就是您想要的方式。DataContractSerializer 旨在处理这种情况，在这种情况下，您必须使用概念上相同的类型，但从 CLR 的角度来看，您希望将它们序列化为不同的类型。

鉴于此，只需创建具有您想要序列化的类似属性子集的对象，并将该类型传递给 DataContractSerializer。

确保在您设置 DataContract 属性（以及您公开的子项上的任何 DataMember 属性或 DataContract 属性）的属性的“摘要”类型上，特别是 Name 和 Namespace 属性以反映非摘要类型（因为这些必须匹配）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T16:54:39.177

如果您只想从根节点中提取一些细节，我的第一个建议是进行 XML 操作。尽管我不知道性能影响，但另一种可能性是使用 DataContractSerializer 的版本控制功能来解决这个问题。在您的数据合同上，将除摘要中需要的字段之外的每个字段标记为可选。然后，将数据协定复制为另一个类，省略可选字段。反序列化为新的、更小的数据合约。

```
class Program
{
    static void Main(string[] args)
    {
        Person a = new Person();
        Person b = new Person();
        a.Name = "Mike";
        b.Name = "Joe";
        b.Parent = a;

        DataContractSerializer dtc = new DataContractSerializer(typeof(Person));

        StringBuilder sb = new StringBuilder();
        using (XmlWriter xr = XmlWriter.Create(sb))
        {
            dtc.WriteObject(xr, b);
        }

        object n;

        DataContractSerializer dtc2 = new DataContractSerializer(typeof(TinyPerson));

        using (XmlReader xr = XmlReader.Create(new StringReader(sb.ToString())))
        {
            n = dtc2.ReadObject(xr);
        }

    }
}

[DataContract(Name="Person")]
public class Person
{
    [DataMember]
    public string Name;

    [DataMember(IsRequired=false)]
    public Person Parent; 
}

[DataContract(Name = "Person")]
public class TinyPerson
{
    [DataMember]
    public string Name;

} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-01-05T15:18:15.220

您可以通过使用属性来控制序列化。[在这里](http://msdn.microsoft.com/en-us/library/83y7df3e(VS.71).aspx)阅读更多

# javascript - 灯箱关闭链接在 IE7 中不起作用

> ID：413355
> 
> 赞同：1
> 
> 时间：2009-01-05T14:59:05.307
> 
> 标签：javascript, internet-explorer-7, lightbox

虽然[灯箱示例页面](http://www.huddletogether.com/projects/lightbox2/)在 IE7 中对我来说很好，但我似乎在我的实现中破坏了它。

我为[Mango Blog](http://mangoblog.org/)编写了一个 Lightbox 插件，在 Firefox 中一切正常。但是，在 IE7 中，“关闭”按钮不起作用。如果我足够快将光标移到关闭按钮滑入到位之前将放置的位置，则 IE 状态栏会显示“#”链接，但单击或移动光标会使状态栏变为空白 - - 当然没有任何反应。

并不是说它是必要的，但我对[IE7 中的行为进行了快速截屏](http://screencast.com/t/BxNpNoA9z)。请注意光标没有切换到关闭按钮上的手。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-05T15:10:48.933

也许您应该尝试使用实际的 2.0.4 版本的 Lightbox 作为基础，DOM 代码似乎有几处更改，尽管更改日志中没有提到您描述的错误。

# c# - C#/Visual Studio 调试示例

> ID：413363
> 
> 赞同：1
> 
> 时间：2009-01-05T15:00:38.033
> 
> 标签：c#, visual-studio, debugging

我正在尝试编写一个代码示例来演示 Visual Studio 2008 中使用 C# 的调试功能。我正在尝试构建一个代码示例，其中会有一个“不太明显”的错误，这会导致意外的输出。

一个不工作的例子是：

```
static void Main(string[] args) {
    int a, b;

    a = args[0];
    b = args[1];

    if (a = b) Console.WriteLine("They are equal!");
    else if (a < b) Console.WriteLine("Number 1 is smaller!");
    else Console.WriteLine("Number 1 is larger!");
} 
```

仅阅读代码时，这样的事情不会太明显，但可以通过调试轻松检测到。

我正在寻找这样一个可以在 Visual Studio 2008 中使用 C# 的示例。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-05T15:03:14.843

这是您可以输入的片段...

```
string a = "foo";
a.Replace("foo", "bar");
Console.WriteLine(a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T15:08:18.063

您可以使用常见的编程错误，例如：

*   [围栏错误](http://en.wikipedia.org/wiki/Off-by-one_error)
*   忘记[不可变对象](http://codebetter.com/blogs/patricksmacchia/archive/2008/01/13/immutable-types-understand-them-and-use-them.aspx)
*   使用[== 而不是 Equals()](http://dotnetguts.blogspot.com/2007/07/difference-between-and-equals-method.html)

我认为栅栏错误可能最适合调试示例。该代码似乎在整个数组/集合/任何内容上通过 for 循环运行，但它可能使用 obj.length 而不是 obj.length-1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T15:12:43.797

像这样的东西：

```
if (a != b)
  Method1();
  Method2(); // will always be called, even if a == b 
```

...如果您省略花括号，就会发生这种情况，例如，意图是这样的：

```
if (a != b)
{
  Method1();
  Method2();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-15T05:58:51.327

我遇到的其他一些简单错误：

1 - 在使用 foreach 对其进行迭代时从集合中删除项目（尽管这会引发异常，因此如果未捕获，那么您可能会在不需要调试器的情况下注意到它）：

```
foreach (LayoutVersion lv in this.LayoutVersions)
{
    if (lv.EndDate <= endDate && lv.StartDate >= endDate)
    { //subsume this lv
        this.LayoutVersions.Remove(lv);
    }
} 
```

2 - DateTime.AddMinutes 或 AddHours 而不分配结果：

```
 public Report Create(Area area, DateTime date, Shift shift)
    {
    DateTime startDate = new DateTime(date.Year, date.Month, date.Day);
    startDate.AddHours(shift.Time.Hour);
    startDate.AddMinutes(shift.Time.Minute);
    return Persistence.DataManager.CreateReport(area, startDate);
    } 
```

# asp-classic - 在 VBScript 中输出 GUID 会忽略其后的所有文本

> ID：413367
> 
> 赞同：13
> 
> 时间：2009-01-05T15:01:51.493
> 
> 标签：asp-classic, vbscript, guid

我正在使用 TypeLib 创建一个用于经典 ASP 应用程序的 GUID。然而，即使是一个简单的测试，例如将 GUID 写到屏幕上，也会给我带来问题——它会打印 GUID，但会忽略它之后的所有内容（例如 HTML 标记、附加词、任何内容）。

这是测试它的基本代码：

```
Set typeLib = Server.CreateObject("Scriptlet.TypeLib")
myGuid = typeLib.Guid
Response.Write myGuid & " is the new GUID"
Set typeLib = Nothing 
```

这将显示类似*{9DDB27D1-F034-41D7-BB88-D0D811DB91CE}*的内容，仅此而已；文本的其余部分被忽略并且没有写出。但是，如果我对该 GUID 值进行硬编码并从变量中引用它，则文本的其余部分看起来就很好。我已经尝试在显示之前显式转换为字符串值，但它仍然会发生。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-05T15:31:19.280

我似乎已经解决了我自己的问题.. 它在文本中添加了一些额外的东西，所以我必须这样做：

```
myGuid = Left(myGuid, Len(myGuid)-2) 
```

现在输出正常。奇怪的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-10-08T20:16:19.850

我用这样的东西

```
Function GetGuid() 
        Set TypeLib = CreateObject("Scriptlet.TypeLib") 
        GetGuid = Left(CStr(TypeLib.Guid), 38) 
        Set TypeLib = Nothing 
End Function 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-15T11:38:41.010

它在 GUID 的末尾添加一个 vbNullChar 或 Chr(0)。Replace(myGuid, Chr(0), "") 将修复它。比使用 Left 或 Mid 函数更好。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-01-05T15:12:31.830

GUID 是一个结构而不是字符串，您需要添加一个 ToString() 方法以将其输出为字符串。

[https://msdn.microsoft.com/fr-fr/library/97af8hh4(v=vs.110).aspx](https://msdn.microsoft.com/fr-fr/library/97af8hh4(v=vs.110).aspx)

```
Response.Write myGuid.ToString("D") 
```

# sql - 稀疏数据：RDBMS 中的高效存储和检索

> ID：413377
> 
> 赞同：5
> 
> 时间：2009-01-05T15:04:21.957
> 
> 标签：sql, mysql, hibernate, postgresql, sparse-matrix

我有一个表，表示跨项目修订的源文件指标的值，如下所示：

```
Revision FileA FileB FileC FileD FileE ...
1           45     3    12   123   124
2           45     3    12   123   124
3           45     3    12   123   124
4           48     3    12   123   124
5           48     3    12   123   124
6           48     3    12   123   124
7           48    15    12   123   124 
```

（上述数据的关系视图不同。每行包含以下列：Revision、FileId、Value。计算数据的文件及其修订版存储在 Subversion 存储库中，因此我们试图表示存储库的关系模式中的结构。）

在 10000 个修订版中最多可以有 23750 个文件（[ImageMagick](http://en.wikipedia.org/wiki/ImageMagick)绘图程序就是这种情况）。如您所见，连续修订之间的大多数值是相同的，因此该表的有用数据非常稀疏。我正在寻找一种存储数据的方法

*   避免复制并有效地使用空间（目前非稀疏表示需要 260 GB（数据+索引）来存储不到 10% 的数据）
*   允许我使用 SQL 查询有效地检索特定修订的值（无需显式循环通过修订或文件）
*   允许我有效地检索特定指标值的修订。

理想情况下，该解决方案不应该依赖于特定的[RDBMS](http://en.wikipedia.org/wiki/Relational_database_management_system)，并且应该与[Hibernate](http://en.wikipedia.org/wiki/Hibernate_%28Java%29)兼容。如果这不可能，我可以使用 Hibernate、MySQL 或 PostgreSQL 特定的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-05T15:51:30.643

这就是我可以建模的方式。我省略了 Revisions 表和 Files 表，因为它们应该是不言自明的。

```
CREATE TABLE Revision_Files
(
    start_revision_number   INT NOT NULL,
    end_revision_number     INT NOT NULL,
    file_number             INT NOT NULL,
    value                   INT NOT NULL,
    CONSTRAINT PK_Revision_Files PRIMARY KEY CLUSTERED (start_revision_number, file_number),
    CONSTRAINT CHK_Revision_Files_start_before_end CHECK (start_revision_number <= end_revision_number)
)
GO 
```

要获取特定版本的文件的所有值，您可以使用以下查询。使用外部连接连接到文件表将让您获得那些没有为该修订定义值的文件。

```
SELECT
    REV.revision_number,
    RF.file_number,
    RF.value
FROM
    Revisions REV
INNER JOIN Revision_Files RF ON
    RF.start_revision_number <= REV.revision_number AND
    RF.end_revision_number >= REV.revision_number
GO 
```

假设我正确理解了您在第三点中想要的内容，这将使您获得特定文件具有特定价值的所有修订：

```
SELECT
    REV.revision_number
FROM
    Revision_Files RF
INNER JOIN Revisions REV ON
    REV.revision_number BETWEEN RF.start_revision_number AND RF.end_revision_number
WHERE
    RF.file_number = @file_number AND
    RF.value = @value
GO 
```

# c# - 将 Enum 指定为 uint 的原因是什么？

> ID：413397
> 
> 赞同：18
> 
> 时间：2009-01-05T15:09:23.570
> 
> 标签：c#

我遇到了一些继承了`uint`. 我想不通为什么有人会这样做。

例子：

```
Enum myEnum : uint
{
   ...
} 
```

有人会这样做有什么好处或具体原因吗？为什么不将其保留为 defaultint？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-01-05T15:13:24.963

如果枚举值大于 2,147,483,647 且非负数。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-01-05T15:18:46.497

我能想到的一个原因是范围检查更容易。鉴于大多数枚举从 0 开始，您只需检查上限。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-05T15:15:12.840

我猜这样做是为了允许它自动转换为 uint（在 C 中，枚举被类型系统视为整数）。很可能允许对枚举的标志值进行按位或运算。见[http://www.velocityreviews.com/forums/t286596-enums-in-c-and-c.html](http://www.velocityreviews.com/forums/t286596-enums-in-c-and-c.html)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-01-05T15:20:23.500

在使用 .NET 中的 COM Interop/P/Invoke 时，在某些情况下它是方便且绝对必要的。例如，您肯定会在[pinvoke.net](http://pinvoke.net)上找到一些以这种方式定义的。在某些情况下，它只是映射到更接近底层 API 定义，但不是必需的，但在某些情况下，底层 API 可能会使用其中一些高位作为标志，并且它需要是 UINT。在 Interop 之外，您也可以在纯 C#/VB.NET 中使用一些非常高的位作为标志，这可能还需要 uint。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-03-07T11:51:38.597

我正在将一些最初用 C 编写的消息传递代码转换为 C#。

C 代码中的某些字段具有一组有限的可能值，这些值被定义为一组关联的#defines。换句话说，一个枚举。

在转换其中一些枚举时，某些值对于整数来说太大了，例如

#define NONE 0x00000000

#define VAL1 0x00000001

...

#define VALX 0x80000000

在这里，C# 中的默认枚举不能接受 VALX，因此必须将枚举转换为*uint*，这也是记录结构中存储变量的类型。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-05T16:08:06.150

我正在谈论的示例在此处的代码中：http: [//www.codeplex.com/FacebookNET](http://www.codeplex.com/FacebookNET)

看看 FacebookResponseStatus.cs 类

我可以给作者发电子邮件，但我不想打扰，只是根据其他经验看看人们在一般社区中的想法。

我不会在 CodePlex 上使用这个框架，但正在审查它以了解其他人如何在 .NET 中实现 Facebook。我只是觉得这很有趣，并想知道为什么 : uint 用于那里的枚举。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-05T16:15:19.613

看起来他们只是为了这个错误而这样做，这意味着该类中可能还有更多错误未实现。

```
 /// <summary>
    /// There was an HTTP error in issuing the request.
    /// </summary>
    HttpError = 0xFFFF0000 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-10-29T12:48:51.313

我知道另一个原因，因为是同事在这里做的。

为了避免[这里](https://stackoverflow.com/questions/194484/whats-the-strangest-corner-case-youve-seen-in-c-or-net/311831#311831)解释的问题（第 2 项），在生成枚举列表时，他根据字符串给它一个唯一值（我现在不记得确切的方式了，它不可能是哈希码 'cos 不是唯一的）。

唯一的问题是数字有点大，所以他将枚举设为 uint。

# c# - 是否有任何库可以查询 whois 数据库以获取域信息？

> ID：413413
> 
> 赞同：-1
> 
> 时间：2009-01-05T15:16:10.140
> 
> 标签：c#, dns

我想用 C# 编写我自己的脚本，以针对万维网域的 whois 数据库来测试我自己的过多手动操作单词词典。

是否有任何免费库/脚本可以让我的应用程序针对免费域测试单词并快速获得结果？

有诸如 whoix.com 之类的 Internet 应用程序允许我测试 25 个域，但是我需要更多。

如果您有可能的解决方案，请告诉我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-05T15:55:12.713

[这](http://www.mentalis.org/soft/class.qpx?id=10)可能会满足您的需求，它只是按域进行的基本查询，但我认为这足以满足您的需求。

# c# - 源代码级别的混淆比混淆器更有效？

> ID：413415
> 
> 赞同：4
> 
> 时间：2009-01-05T15:16:57.813
> 
> 标签：c#, obfuscation

从我的[最后一个问题](https://stackoverflow.com/questions/413311/c-do-method-names-get-compiled-into-the-exe)中学习，大多数**成员名称**似乎都包含在项目输出中。

看看一些反编译器，如[9rays](http://www.9rays.net/products/Spices.Decompiler/)、[Salamander](http://www.remotesoft.com/salamander/)、[Jungle](http://www.junglecreatures.com/DesktopDefault.aspx)，许多混淆技术似乎已经被打败了，有一个特别可怕的说法：

> 自动删除混淆器注入的字符串加密 ~ [Salamander](http://www.remotesoft.com/salamander/)

那么手动的**源代码级别的混淆**是否比众所周知的（容易被击败的？？）混淆程序进行的编译后/中间编译起泡的“表面”混淆更有效？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-01-05T15:26:27.653

混淆源代码在维护方面会弄巧成拙。

如果您的项目如此“秘密”，我想您有两个选择：

*   将“秘密”专有代码放在您控制的服务器上的服务后面

*   用一种不容易反编译的语言进行编码，例如 C/C++

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-05T15:24:05.833

也许，有争议，但这样做会破坏可维护性。

这真的值得吗？

**实际上，这只是通过默默无闻**归结为安全性，即根本不是安全性，这只是一种不便。你应该假设任何足够感兴趣的*人都会*反编译你的代码，如果他们可以访问它。不值得你给自己造成的痛苦让邪恶的haxxors花费更多的时间。处理真正的访问安全问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-05T15:57:02.333

正如人们所说，混淆是为了提高标准。如果你混淆你的程序集，你会阻止一个只是好奇但你不会阻止一个稍微有动力的人进行逆向工程的临时开发人员。

如果您想进一步提高标准，许多混淆工具允许您使用不可打印的字符作为成员名称。使用反射器本身来看看。这会阻止更多的人，我可能会查看混淆代码来理解它，但如果我看不懂它，我不会经历将其转储到 IL 并手动重命名所有成员的痛苦，没有动力让我浪费那么多时间。

但是，对于某些人来说，这是有动机的，因此如果您的业务需求需要它，您需要再走一步。但不管你做什么，只要电脑能读懂，总会有人能读懂。目标是减少可以阅读或愿意阅读的人数。

您还可以使用一些技巧来破坏反射器（PreEmptive 的混淆器在某些情况下会破坏反射器，但当然您仍然可以阅读 IL）。我曾经与一个混淆工具的开发人员进行了一次有趣的对话，我无法做到公正，但他有办法通过让代码动态跳转来使反射器完全中断。例如，在你的函数 a 中的某个时刻，你会跳到函数 b 的中间。这样做会导致 PEVerify 引发错误，因此他们从未真正实现它，而是一种巧妙的想法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-05T15:43:57.040

安娜卡塔是正确的。实际上，您所能做的就是让人们对软件进行逆向工程变得更加困难（并且成本更高）。

我的公司确定了几个我们希望使逆向工程尽可能困难的领域。例如，我们的文件是二进制格式，层次结构中的每个对象都负责保存自己并读回正确的版本。这意味着如果一个人阅读我们的文件，他们将在他们创建的代码中复制我们的整个层次结构来阅读我们的文件。此外，作业文件中的许多信息在车间标准文件中没有相应位时很有用。所以他们必须做两次工作才能理解工作文件在说什么。

几个关键领域（加密狗保护、与我们的金属切割机的通信）驻留在 Win32DLL 中。这意味着他们必须知道汇编以及如何制作复制其他 DLL 签名的 DLL 才能对我们的软件进行逆向工程。此外，我们的 CAM 软件设计与切割机高度交互（信息一直在交换）

从我们很少听说竞争对手试图单独处理我们的机器开始，他们最终用自己的电子设备替换了电子设备以完成工作。大笔钱来做到这一点。

我们采取的部分步骤是基于我们自己在尝试处理竞争对手的机器和软件方面的经验。我们吸取了这些经验，并学会了如何调整我们的设置。当然，我们有局限性，因为我们不会仅仅为了击败逆向工程而牺牲可靠性或维护。

对于您的情况，您将不得不问自己软件的哪一部分会引起竞争对手的兴趣，然后从那里着手。如果您是垂直市场开发人员（机器控制、专业会计等），我建议您使用 USB 加密狗进行软件控制。

否则，使用序列号系统并接受人们将盗版您的软件并将其构建到您的业务模型中。序列号方案的目的是相对不打扰，并阻碍因果复制，并且让您有机会追踪副本的来源。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-05T15:22:35.570

问题是你会牺牲可读性来做到这一点。如果你的项目是神圣的保护，我相信假设两件事是安全的：

1.  该项目足够大，以至于可读性的打击会回来咬你的屁股。
2.  无论如何，想要对其进行逆向工程的人都会这样做。只需要稍微大一点的智能来确定事情的作用（而不是仅仅阅读成员的名字）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-05T16:18:19.013

我很震惊你甚至在考虑代码级混淆。你不会也为自己混淆代码吗？你打算如何再次工作？为了可维护性，不应该这样做。

但是考虑一下：-

假设您可以运行一个脚本/应用程序，它会打开您的项目并巧妙地混淆项目中的每个字符串/变量名称，然后您编译它，而您的原始代码在单独的位置安全地保持不变。

现在这是一些想法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-18T03:18:33.970

实际上，代码级别的混淆*不如*现有的混淆器可以做的安全。这主要是因为混淆器可以利用语言编译器不允许的严格 CLI 实现细节。例如，私有字段都具有相同的名称是完全合法的——但是没有一个编译器可以让你这样做。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-01-04T15:06:44.330

您可以使用这样的技术：http: [//g.palem.in/SecureAssembly.html](http://g.palem.in/SecureAssembly.html)使用您在.net 中编写但您将.net 可执行文件嵌入到c++ 可执行文件中，

# c++ - 初始化/激活控件后，如何获取 ActiveX 控件的 HWND？

> ID：413425
> 
> 赞同：2
> 
> 时间：2009-01-05T15:19:14.453
> 
> 标签：c++, activex, atl

我正在使用 Visual Studio 2008 在 C++ 中创建一个基于 ATL 8.0 的 ActiveX 控件。我需要创建一个子窗口并将其附加到 ActiveX 控件。

如何访问 ActiveX 控件拥有的 HWND？

在创建控件的窗口后，我可以重写哪个 ATL 函数以使用 HWND？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-06T08:32:54.883

ActiveX 将允许您在自己的接口上定义自己的方法（以解决 Brians 的假设），但这在这里可能无济于事。ActiveX 控件很可能是由另一个组件创建的。ATL 也无关紧要——它是一个包装 COM 接口的 C++ 模板库。

这里需要的函数是 IOleWindow::GetWindow。我不确定“覆盖 ATL 函数以使用 HWMD”是什么意思。检索到 HWND 后，您可以将其传递给任何使用 HWND 的函数。例如，作为 SetParent(child, parent) 中的父级

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-07T14:40:05.157

经过反复试验，我找到了我想要的答案。

在 ATL ActiveX 控件的构造函数中，添加以下代码行：

```
m_bWindowOnly = true; 
```

这会导致创建控件的窗口（而不仅仅是重用父窗口的 HWND）。此后，控件类的 m_hWnd 成员可用于访问控件窗口的 HWND。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-01-05T21:58:00.700

[完全披露]：我对 ActiveX 或 ATL 不太熟悉，但我希望这至少有点帮助。

如果 ActiveX 允许您在对象上定义任意方法，请尝试公开一个您可以调用的函数，该函数将简单地将 HWND 的值返回给您（控件几乎肯定知道它自己的 HWND）。这样您就可以调用`GetActiveXHwnd()`以获取必要的句柄，然后将其用于进一步操作。

# c# - 在 MVC 中显示数据库数据表

> ID：413426
> 
> 赞同：0
> 
> 时间：2009-01-05T15:19:29.600
> 
> 标签：c#, asp.net-mvc, model-view-controller

进行了解决方案更改：我正在尝试显示一个 html 数据表。在我的控制器中，我将一个对象作为 null 开始，然后将对象作为引用传递，以根据数据库中的信息更新对象，如“用户控件命名(索引控制.ascx)":

```
 List<dataob> data = null;
        dataManager target = new dataManager();
        //pass the parameter to a stored procedure and update it
        target.LoadFromDatabase(ref data);
        this.ViewData.Model =data;
        return View("Index"); 
```

我正在尝试使用类似的路线查看信息在数据对象中后如何显示表格，所有这些都在用户控件中

```
 <tbody >

<% foreach (businesslayer.dataob m in  ViewData.Model) 
{ %>
<tr>
 <td><%= m.ID%></td>
 <td><%= m.Date %></td>
 <td><%= m.Description %></td>
 </tr>
 <% } %>

</tbody> 
```

我发现了问题....因为我将表属性设置为 runat=server 这就是给我错误的原因..不知道为什么但确实如此

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-05T15:40:55.190

我不确定您为什么要避免使用 ViewData.Model。在这种情况下，我没有理由看到为什么：

```
 ViewData["data"] = data; 
```

最好是

```
 ViewData.Model = data; 
```

如果您使用强类型的视图页面，那么您也可以避免转换模型的需要。然后你可以简单地做：

```
 <% foreach (dataob m in ViewData.Model) { %>
    <tr> 
        <td><%= m.Id %></td>
        <td><%= m.user %></td>
        <td><%= m.Date %></td>
    </tr>
 <% } %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T15:34:27.340

尝试：

```
<% foreach (dataob m in (IEnumerable<dataob>) ViewData["data"]) { %> 
```

# javascript - 如何动态更改网页的标题？

> ID：413439
> 
> 赞同：604
> 
> 时间：2009-01-05T15:25:13.333
> 
> 标签：javascript, html

我有一个网页，它实现了一组选项卡，每个选项卡都显示不同的内容。选项卡单击不会刷新页面，而是在客户端隐藏/取消隐藏内容。

现在需要根据页面上选择的选项卡更改页面标题（出于 SEO 原因）。这可能吗？有人可以提出一个解决方案，通过 javascript 动态更改页面标题而不重新加载页面吗？

* * *

## 回答 #1

> 赞同：824
> 
> 时间：2009-01-05T15:29:48.613

**更新**：根据[SearchEngineLand](https://searchengineland.com/tested-googlebot-crawls-javascript-heres-learned-220157)上的评论和参考， 大多数网络爬虫都会索引更新的标题。以下答案已过时，但代码仍然适用。

> 你可以只做类似的事情`document.title = "This is the new page title.";`，但这会完全违背 SEO 的目的。大多数爬虫首先不会支持 javascript，因此它们会将元素中的任何内容作为页面标题。
> 
> 如果您希望它与大多数重要的爬虫兼容，您将需要实际更改标题标签本身，这将涉及重新加载页面（PHP 等）。如果您想以爬虫可以看到的方式更改页面标题，您将无法解决这个问题。

* * *

## 回答 #2

> 赞同：197
> 
> 时间：2016-02-04T08:26:32.170

我想和未来打个招呼 :) 最近发生的事情：

1.  Google 现在运行您网站上的 javascript ^([1](http://searchengineland.com/tested-googlebot-crawls-javascript-heres-learned-220157))
2.  人们现在使用 React.js、Ember 和 Angular 之类的东西在页面上运行复杂的 javascript 任务，并且它仍然被 Google ^([1索引](http://searchengineland.com/tested-googlebot-crawls-javascript-heres-learned-220157))
3.  您可以使用 html5 历史 API（pushState、react-router、ember、angular），它允许您为要打开的每个选项卡设置单独的 url，Google 将索引该^([1](http://searchengineland.com/tested-googlebot-crawls-javascript-heres-learned-220157))

因此，要回答您的问题，您可以安全地从 javascript 更改标题和其他元标记（如果您想支持非 Google 搜索引擎，也可以添加类似[https://prerender.io](https://prerender.io)的内容），只需将它们作为单独的 url 访问（否则谷歌怎么会知道这些是在搜索结果中显示的不同页面？）。更改与 SEO 相关的标签（在用户通过单击某物更改页面后）很简单：

```
if (document.title != newTitle) {
    document.title = newTitle;
}
$('meta[name="description"]').attr("content", newDescription); 
```

只要确保在 robots.txt 中没有阻止 css 和 javascript，您就可以在 Google 站长工具中使用**Fetch 作为 Google服务。**

1：[http ://searchengineland.com/tested-googlebot-crawls-javascript-heres-learned-220157](http://searchengineland.com/tested-googlebot-crawls-javascript-heres-learned-220157)

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2009-01-05T15:27:46.793

使用`document.title`.

请参阅[此页面](https://web.archive.org/web/20160508051657/http://homepage.ntlworld.com/kayseycarvey/document2.html)以获取基本教程。

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2009-01-05T15:29:06.010

我看不出通过 Javascript 更改页面标题将如何帮助 SEO。大多数（或所有）搜索机器人不运行 Javascript，只会读取最初加载的标题，即标记。

如果您想帮助 SEO，那么您将需要在后端更改页面标题并提供不同版本的页面。

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2009-01-05T15:27:08.667

代码是
`document.title = 'test'`

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2012-03-26T18:41:56.443

有很多方法可以更改标题，主要的两种，如下所示：

## 可疑的方法

在 HTML 中放置一个标题标签（例如`<title>Hello</title>`），然后在 javascript 中：

```
let title_el = document.querySelector("title");

if(title_el)
    title_el.innerHTML = "World"; 
```

## 明显正确的方法

最简单的就是实际使用文档对象模型（DOM）提供的方法

```
document.title = "Hello World"; 
```

* * *

前一种方法通常用于更改文档*正文中的标签。*使用这种方法来修改像在 head 中找到的那些元数据标签（如`title`）充其量是有问题的做法，不是惯用的，一开始就不是很好的风格，甚至可能不具备可移植性。不过，您可以肯定的一件事是，如果其他开发人员`title.innerHTML = ...`在他们维护的代码中看到，这会惹恼他们。

您*要*使用的是后一种方法。该属性[在 DOM 规范中提供](https://developer.mozilla.org/en-US/docs/Web/API/Document/title)，顾名思义，专门用于更改标题。

另请注意，如果您正在使用 XUL，您可能需要在尝试设置或获取标题之前检查文档是否已加载，否则您正在调用`undefined behavior`（这里是龙），这本身就是一个可怕的概念。这可能会也可能不会通过 JavaScript 发生，因为 DOM 上的文档不一定与 JavaScript 相关。但是 XUL 完全是另一种野兽，所以我离题了。

## 说起`.innerHTML`

要记住的一些好建议是，使用`.innerHTML`通常是草率的。改为使用[`appendChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild)。

虽然我仍然觉得有用的两种情况`.innerHTML`包括将纯文本插入到一个小元素中......

```
label.innerHTML = "Hello World";
// as opposed to... 
label.appendChild(document.createTextNode("Hello World"));
// example:
el.appendChild(function(){
    let el = document.createElement("span");
    el.className = "label";
    el.innerHTML = label_text;
    return el;
}()); 
```

...并清理一个容器...

```
container.innerHTML = "";
// as opposed to... umm... okay, I guess I'm rolling my own
[...container.childNodes].forEach(function(child){
    container.removeChild(child);
}); 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2009-01-05T15:30:18.347

使用 document.title 是您在 JavaScript 中完成它的方式，但这应该如何帮助 SEO？漫游器在遍历页面时通常不会执行 javascript 代码。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-06-04T19:18:40.723

现代爬虫[能够解析](http://searchengineland.com/tested-googlebot-crawls-javascript-heres-learned-220157)DOM 中动态生成的内容，因此使用起来`document.title = ...`非常好。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-01-05T16:04:28.170

您必须使用新标题重新提供页面，以便任何爬虫注意到更改。通过 javascript 执行此操作只会使人类读者受益，爬虫不会执行该代码。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2011-11-18T22:26:36.517

也许您可以在标题上加载一个字符串中的所有选项卡标题，然后在加载其中一个选项卡后通过 javascript 更改标题

例如：首先将您的标题设置为

```
my app | description | contact | about us | 
```

加载其中一个选项卡后，运行：

```
document.title = "my app | tab title"; 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-01-03T09:27:17.890

对于那些寻找它的 npm 版本的人，有一个完整的库：

```
npm install --save react-document-meta 
```

```
import React from 'react';
import DocumentMeta from 'react-document-meta';

class Example extends React.Component {
  render() {
    const meta = {
      title: 'Some Meta Title',
      description: 'I am a description, and I can create multiple tags',
      canonical: 'http://example.com/path/to/page',
      meta: {
        charset: 'utf-8',
        name: {
          keywords: 'react,meta,document,html,tags'
        }
      }
    };

    return (
      <div>
        <DocumentMeta {...meta} />
        <h1>Hello World!</h1>
      </div>
    );
  }
}

React.render(<Example />, document.getElementById('root')); 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-04-15T08:23:24.950

使用`document.title`. 它对大多数事情都有用，但它会破坏您网站上的 SEO。

例子：

```
document.write("title - " + document.title + "<br>");
document.title = "New title here!";
// Notice: this will defeat purpose of SEO. Not useful for SEO-friendly sites.
document.write("title - " + document.title + "<br>");
```

```
body {
  font-family: Consolas, 'Courier New', monospace;
}
```

```
<!DOCTYPE html>
<html>
  <head><title>Old title</title></head>
  <body><p>
    Lorem ipsum dolor sit amet, at movet detraxit mediocritatem eam, nam iusto abhorreant ne. Ei pro          debet adolescens voluptaria, eu minim scaevola conceptam vel. Vim ea torquatos constituto                complectitur, usu eu civibus insolens eleifend. Ex ubique quaerendum his.

  </p></body>
</html>
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-01-05T17:28:55.317

想到的一种可能对 SEO 有所帮助并且仍然保留标签页的方法是使用与每个标签对应的命名锚点，如下所示：

`http://www.example.com/mypage#tab1, http://www.example.com/mypage#tab2, etc.`

您需要进行服务器端处理来解析 url 并在浏览器呈现页面时设置初始页面标题。我还将继续将该选项卡设为“活动”选项卡。加载页面并且实际用户正在切换选项卡后，您将使用 javascript 进行更改`document.title`，如其他用户所述。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-12-14T15:33:22.927

由于搜索引擎会忽略大多数 javascript，因此您需要这样做，以便搜索引擎可以在不使用 Ajax 的情况下使用选项卡进行爬网。使每个选项卡成为一个带有 href 的链接，该链接会加载选择该选项卡的整个页面。然后页面可以在标签中包含该标题。

onclick 事件处理程序仍然可以通过 ajax 为人类查看者加载页面。

要查看大多数搜索引擎看到的页面，请关闭浏览器中的 Javascript，并尝试使其单击选项卡将加载已选择该选项卡和正确标题的页面。

如果您通过 ajax 加载并且您想仅使用 Javascript 动态更改页面标题，请执行以下操作：

```
document.title = 'Put the new title here'; 
```

但是，搜索引擎不会看到在 javascript 中所做的这种更改。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-11-25T21:21:34.030

您可以使用 JavaScript。一些机器人，包括谷歌，会为了 SEO 执行 JavaScript（在 SERP 中显示正确的标题）。

```
document.title = "Google will run this JS and show the title in the search results!"; 
```

但是，这更复杂，因为您在不刷新页面或更改 URL 的情况下显示和隐藏选项卡。正如其他人所说，添加锚点可能会有所帮助。我可能需要撤回我的答案。

显示积极结果的文章： [http ://www.aukseo.co.uk/use-javascript-to-generate-seo-friendly-title-tags-1275/](http://www.aukseo.co.uk/use-javascript-to-generate-seo-friendly-title-tags-1275/) [http://www.ifinity.com.au/2012/10 /04/Changing_a_Page_Title_with_Javascript_to_update_a_Google_SERP_Entry](http://www.ifinity.com.au/2012/10/04/Changing_a_Page_Title_with_Javascript_to_update_a_Google_SERP_Entry)

不要总是假设机器人不会执行 JavaScript。 [http://searchengineland.com/tested-googlebot-crawls-javascript-heres-learned-220157](http://searchengineland.com/tested-googlebot-crawls-javascript-heres-learned-220157) Google 和其他搜索引擎都知道，要索引的最佳结果是实际最终用户将在其浏览器中看到的结果，包括 JavaScript。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-01-05T15:36:56.977

但是为了获得 SEO 的好处

当页面更改时，您需要重新加载页面，以便搜索引擎看到不同的标题等。

因此，请确保页面重新加载首先工作，然后添加 document.title 更改

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-12-14T10:28:04.887

我只想在此处添加一些内容：如果您通过 AJAX 更新数据库，则通过 JavaScript 更改标题实际上很有用，因此无需刷新页面即可更改标题。标题实际上是通过你的服务器端脚本语言改变的，但是通过 JavaScript 改变它只是一个可用性和 UI 的东西，它使用户体验更加愉快和流畅。

现在，如果你只是为了它而通过 JavaScript 更改标题，那么你不应该这样做。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-15T13:13:53.700

谷歌提到所有的 js 文件都被渲染了，但实际上，我已经失去了我的标题和另一个由 Reactjs 在[这个网站](https://www.mokaab.com)上提供的元标记，实际上我失去了我在谷歌的位置！我进行了很多搜索，但似乎所有页面都必须预先渲染或使用 SSR（服务器端渲染）才能拥有对 SEO 友好的协议！
它扩展到 Reactjs、Angularjs 等。简而言之，在浏览器上具有**查看页面源**
的 每个页面都被所有机器人索引，如果它可能不是谷歌可以索引但其他人跳过索引！

 *** * *

## 回答 #19

> 赞同：-2
> 
> 时间：2013-06-03T16:42:20.300

`<title>`最简单的方法是从 index.html中删除标签，并包含

```
<head>
<title> Website - The page </title></head> 
```

在网络的每个页面中。蜘蛛会找到这个并将显示在搜索结果中:)

* * *

## 回答 #20

> 赞同：-4
> 
> 时间：2021-02-27T03:06:06.337

我使用单独的标头并使用 php 将其包含在我使用的标头中：

```
<?php
if (!isset($title)){
    $title = "Your Title";
  }
  else {
    $title = $title;
  }
 ?>
<head>
<title><?php echo $title; ?></title> 
```

然后在我使用的每个页面中：

```
<?php
  $title = "Your Title - Page";
  include( "./header.php" );
?> 
```

# visual-c++ - 在 MFC 中隐藏菜单项

> ID：413443
> 
> 赞同：10
> 
> 时间：2009-01-05T15:26:44.313
> 
> 标签：visual-c++, mfc, menu

如何在 MFC 中的某些条件下隐藏菜单项？
我对只是将其变灰不感兴趣。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-05T16:09:26.973

为您的菜单项添加更新处理程序（使用 ON_UPDATE_COMMAND_UI）。

此行应出现在您的消息映射中：

```
 ON_UPDATE_COMMAND_UI(ID_MYMENUITEM, OnUpdateMyMenuItem) 
```

在处理程序中，使用以下代码：

```
void CMainFrame::OnUpdateMyMenuItem(CCmdUI *pCmdUI)
{
  if (pCmdUI->m_pMenu!=NULL)
    pCmdUI->m_pMenu->DeleteMenu(pCmdUI->m_nID, MF_BYCOMMAND);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-05T16:12:30.757

或者，如果您要删除单个菜单项，请使用 CMenu:: [RemoveMenu](http://msdn.microsoft.com/en-us/library/ms647994%28VS.85%29.aspx)

# python - Django 和单位转换

> ID：413446
> 
> 赞同：1
> 
> 时间：2009-01-05T15:27:37.667
> 
> 标签：python, django

我需要在数据库中存储一些值、距离、重量等。
在我的模型中，我有一个包含某物数量和`IntegerField`选择选项的字段，它决定了这个数量的含义（长度、持续时间等）。

我应该为单位和物理量创建一个模型，还是应该使用`IntegerField`包含单位类型的模型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-05T16:07:26.883

“`field(enum)`你的意思是你在一个字段上 使用[选择选项吗？](http://docs.djangoproject.com/en/dev/ref/models/fields/#choices)

一组简单的选择对于少量转换列表来说效果很好。它允许您做出简化的假设，帮助您的用户（和您）获得有效的东西。

只有在以下情况下才能为单元创建正式模型：(a) 涉及大量单元，(b) 需要扩展它，并且 (c) 有一些合理的预期，即数据库查找将具有一定的价值。

单位不会经常变化。似乎没有理由为此使用数据库。对选项列表进行硬编码似乎要简单得多。

**选择**

例如，您可以使用类似的方法来跟踪转化。

```
UNIT_CHOICES = ( ('m', 'meters'), ('f', 'feet' ), ('i', 'inches'), ('pt', 'points') )

unit_conversions = {
    ('m','f'): 3.xyz,
    ('m','i'): 39.xyz,
    ('m','pt'): 29.xyz*72,
    ('f','m'): 1/3.xyz,
    ('f','i'): 12.0,
    ('f','pt'): 12.0*72,
    etc.
} 
```

鉴于此映射，您可以在转换方法函数中获取转换因子，进行数学运算并返回转换后的单位。

```
class WithUnit( Model ):
    ...
    def toUnit( self, someUnit ):
        if someUnit == self.unit: return self.value
        elif (someUnit,self.unit) in unit_conversions:
            return self.value * unit_conversions[(someUnit,self.unit)]
        else:
            raise Exception( "Can't convert" ) 
```

**型号**。

如果要创建单位的正式模型，则必须携带尺寸类型（长度、体积、质量、重量/力、压力、温度等）和各种单位转换因子。这适用于除温度之外的所有事物，除了一个因素外，您还有一个常数项。

您必须选择一组“基线”单位（例如[MKS](http://www.unc.edu/~rowlett/units/cgsmks.html)）并在各个单位之间携带所有乘数。

您还必须选择将多少英制单位装入您的桌子（液量盎司、茶匙、汤匙、杯子、品脱、夸脱等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T15:55:33.833

这取决于你想如何使用它。假设您有长度值和两个可能的单位，厘米和毫米。如果您以后只想打印该值，则始终可以将其打印为`[value]&nbsp;[unit]`.

但是，如果要对值进行一些计算，例如计算面积，则需要将值转换为相同的单位。所以无论如何你必须定义单位换算表。

*在将这些单位存储到数据库之前*，我会将它们转换为相同的内部单位，而不是每次使用它们时都进行转换。

只有当单位和物理量太多并且转换非常棘手时，我才会添加单位和物理量的模型。这样的模型可以用作转换器。但是对于简单的情况，例如 mm⇒cm 或 inch⇒cm，静态转换表就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T16:10:17.830

使用指示度量类型（重量、长度等）的字段，并将值存储在另一个字段中。这应该足够了。计量单位应该是隐含的。我假设您对每种度量类型使用相同的度量单位，例如长度总是米。

一个具体的例子：假设你有两个实体，“ **Car** ”和“ **CarMeasures** ”。我会这样写模型：

```
class Car(models.Model):
    type=models.CharField(max_length=256);

class CarMeasures(models.Model):
    carId=models.ForeignKey(Car);
    measureValue=models.DecimalField(..., max_digits=10, decimal_places=2);
    measureType=models.CharField(max_length=32); 
```

# c# - Consuming WebService From CompactFramework Client

> ID：413449
> 
> 赞同：0
> 
> 时间：2009-01-05T15:28:47.117
> 
> 标签：c#, web-services, compact-framework

I'm trying to call a webservice method like this:

```
myService.Register("mystring"); 
```

The webmethod definition is just:

```
[WebMethod]
public void Register(string s)
{
} 
```

But I receive the following System.InvalidOperationException:

"The type System.String was not expected. Use the XmlInclude or SoapInclude attribute to specify types that are not known statically."

* * *

```
 at System.Xml.Serialization.AccessorCollection.findAccessor(Type t)
   at System.Xml.Serialization.XmlSerializationWriter.EnqueueMember(MemberValueCollection members, LogicalMemberValue member, SerializationQueue attributes, SerializationQueue elements, Object fetcherTarget, String parentElementNamespace)
   at System.Xml.Serialization.XmlSerializationWriter.EnqueueMembers(MemberValueCollection members, SerializationQueue attributes, SerializationQueue elements, Object fetcherTarget, String parentElementNamespace)
   at System.Xml.Serialization.XmlSerializationWriter.SerializeComplexAsElement(LogicalType serializeAs, Accessor accessor, Object value, SerializationQueue delayedWork, Boolean recursiveCall, Boolean requiresTypeAttr, XmlSerializerNamespaces serializerNs)
   at System.Web.Services.Protocols.SoapMessageFormatter.SerializeComplexAsElement(LogicalType serializeAs, Accessor accessor, Object value, SerializationQueue delayedWork, Boolean recursiveCall, Boolean requiresTypeAttr, XmlSerializerNamespaces ns)
   at System.Xml.Serialization.XmlSerializationWriter.SerializeAsElement(Accessor accessor, Object value, Object fetcherTarget, SerializationQueue delayedWork, Boolean recursiveCall, Boolean schemaReqTypeAttr, XmlSerializerNamespaces serializerNs)
   at System.Xml.Serialization.XmlSerializationWriter.serializeMembers(SerializationQueue queue, SerializationQueue delayedWork, Boolean recursiveCall, Boolean schemaReqTypeAttr, XmlSerializerNamespaces serializeNs)
   at System.Web.Services.Protocols.SoapMessageFormatter.execute(String targetNamespace)
   at System.Web.Services.Protocols.SoapMessageSerializer.Serialize(XmlWriter writer, SoapHttpClientProtocol client, Object[] parameters, LogicalSoapMethod soapMethod, Boolean soap12)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.doInvoke(String methodName, Object[] parameters, WebClientAsyncResult asyncResult)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) 
```

* * *

Google isn't turning up anything useful and I'm at a dead-end so suggestions would be welcome. My only thought so far is that it's some kind of mismatch because CF uses a different version of the System.dll to the webservice project.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-05T18:02:30.927

这是因为我使用了网络参考的子类，并且还使用了一个接口，即：

```
public class MyWebServiceReference : RawWebServiceReference, IService {} 
```

该接口位于 RawWebServiceReference 和 MyWebServiceReference 的单独项目中，这在某些方面导致了错误。

# silverlight - 良好的 Silverlight-MVVM 实践示例

> ID：413451
> 
> 赞同：48
> 
> 时间：2009-01-05T15:28:59.380
> 
> 标签：silverlight, mvvm

我已经阅读了许多关于 Model-View-ViewModel 模式的好文章，我的团队打算在我们的应用程序的最新版本中实现这种模式。我仍然没有完全了解所有这些可以一起完成这项工作的部分。我想找到一个可以解决的这种模式的好例子。小规模的事情，就像 Jason Dolinger 在他的视频中所做的那样[，](http://blog.lab49.com/archives/2650)但我想要一些我可以自己以较慢的速度完成的事情。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-01-06T13:41:23.357

基本上 ViewModel 是模型的包装器。现在这可能还不是很有帮助:-) 将模型视为您的应用程序使用的数据，比如说一个人。现在一个人有一个生日，您可能希望有一个表格来输入这个人的生日。假设我们只是使用一个简单的 TextBox，日期显示为 01-02-2009 12:00:00AM。对于初学者，我们不想要时间部分，我们也可能对 01-02-2009 部分不满意，因为这取决于您的语言环境设置。

所以这里 ViewModel 来了。它包装了 Person 类并将日期公开为三个整数值，年、月和日。在属性集中，它尝试从不同的值构建日期并显示可能发生的任何错误。

简单地说，ViewModel 是专门针对特定视图（显示）的模型包装器。它同时消除了大多数 IValueConvertor。

Josh Smith 在这里有一个很好的解释：http: [//joshsmithonwpf.wordpress.com/2008/11/14/using-a-viewmodel-to-provide-meaningful-validation-error-messages](http://joshsmithonwpf.wordpress.com/2008/11/14/using-a-viewmodel-to-provide-meaningful-validation-error-messages)和一个大讨论：[http:// /groups.google.com/group/wpf-disciples/browse_thread/thread/3fe270cd107f184f?pli=1](http://groups.google.com/group/wpf-disciples/browse_thread/thread/3fe270cd107f184f?pli=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-07-07T15:40:38.460

Prism 4.0 现在包括用于创建 MVVM 应用程序的文档。这是针对使用 Prism 库的，但这些概念通常适用于 MVVM 模式。

[http://compositewpf.codeplex.com/releases](http://compositewpf.codeplex.com/releases)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-01-01T14:26:56.550

这里还有一个要添加到列表中的内容：Tony Sneed 的 Simple MVVM Toolkit（您的真正的）：[http](http://simplemvvmtoolkit.codeplex.com) ://simplemvvmtoolkit.codeplex.com 。

该工具包由帮助类、Visual Studio 项模板和代码片段组成。除了实际的工具包之外，还有一个示例应用程序，其中包含有关如何使用 MVVM 模式构建基本 Silverlight 应用程序的分步说明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-12T05:50:53.577

Nikhil Kothari 有一篇关于如何在他的 Silverlight.FX 库中使用该模式的帖子。在这里查看：http: [//www.nikhilk.net/ViewModel-Pattern-DLR.aspx](http://www.nikhilk.net/ViewModel-Pattern-DLR.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-04-30T20:35:54.217

还有：

[Silverlight MVVM：一个（过度）简化的解释](http://openlightgroup.net/Blog/tabid/58/EntryId/89/Silverlight-MVVM-An-Overly-Simplified-Explanation.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-09-22T07:39:30.953

我最近经历了很多，其中两个突出的是：

丹·瓦林 (LIDNUG)：

[http://www.lidnug.org/Archives.aspx](http://www.lidnug.org/Archives.aspx)

约翰爸爸的（PDC 2010）：

[http://player.microsoftpdc.com/Session/76864d75-b4da-4858-aac7-786c5f28e344](http://player.microsoftpdc.com/Session/76864d75-b4da-4858-aac7-786c5f28e344)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-04-17T18:36:36.327

Scott Hanselman 在欧洲的 MVC 演讲中给出了对 ViewModel 的最佳解释。

单线响应是——它是一个模型（类），创建的唯一目的是发送特定视图所需的所有必要数据，以及在双向绑定的情况下从视图接收修改后的数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-03-05T18:51:58.127

看看我关于 Silverlight 中真实 MVVM 的文章。虽然它不适合新手，并且主要针对从事现实生活项目的专家开发人员。

[http://alexburtsev.wordpress.com/2011/03/05/mvvm-pattern-in-silverlight-and-wpf/](http://alexburtsev.wordpress.com/2011/03/05/mvvm-pattern-in-silverlight-and-wpf/)

# sql-server - 如何在 MS SQL 中找到奇数门牌号码？

> ID：413453
> 
> 赞同：0
> 
> 时间：2009-01-05T15:29:16.743
> 
> 标签：sql-server

问题是我需要忽略数字中的杂散字母：例如 19A 或 B417

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-05T15:41:07.420

看看这里： [使用 SQL Server 提取数字](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/extracting-numbers-with-sql-server)

有几个隐藏的“陷阱”在文章中得到了很好的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T15:34:17.183

这取决于您要处理的数据量，但在 SQL 中这样做可能会很慢。不是每个人都会同意我的观点，但我认为所有数据处理都应该在应用程序代码中完成。

我只会获取您想要的行，并在您正在处理的应用程序中对其进行过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T15:36:22.733

这里最简单的做法是创建一个获取地址的 CLR 函数。在 CLR 函数中，您将获取地址的第一部分（假设它是门牌号），它应该由空格分隔。

然后，用空字符串替换任何非数字字符。

此时您应该有一个表示整数的字符串，您可以将其传递给 Int32 类的 Parse 方法以生成一个整数，然后您可以检查它是否为奇数。

我在这里推荐一个 CLR 函数（假设您使用的是 SQL Server 2005 及更高版本，并且可以设置数据库的兼容级别），因为在 .NET 中执行字符串操作比在 T-SQL 中更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T15:54:47.347

假设 [Address] 是其中包含地址的列...

```
 Select Case Cast(Substring(Reverse(Address), PatIndex('%[0-9]%',
             Reverse(Address)), 1) as Integer) % 2 
        When 0 Then 'Even' 
        When 1 Then 'Odd' End
  From Table 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T16:01:52.777

我以前经历过这个练习。最好的替代方法是向表或辅助可连接表添加一列，以存储推断的数值。然后使用迭代查询重复设置列，直到获得足够的准确性和覆盖率。您最终会遇到诸如“第一，第三”，“451a”，“1200 South 19th Blvd East”之类的东西，甚至更糟。

然后在出现新记录和已编辑记录时对其进行过滤。

像往常一样，应避免使用 UDF，因为它速度慢且（相对）不易调试。

# asp.net - 了解 ASP.NET 中的回发

> ID：413463
> 
> 赞同：3
> 
> 时间：2009-01-05T15:33:18.327
> 
> 标签：asp.net

例如，

如果我在页面上有一个带有 runat=server 的文本框，该值将被发送回服务器，以便我可以访问代码隐藏中的属性。

但是，在以下情况下，它仍然成立吗？

*   带有 runat=server 但未出现在回发到的函数中的文本框。例如，一个按钮也在页面上，当点击一个回发时，在引发的方法中，这个文本框没有被使用。
*   在 MasterPage 中，是否会回发位于 Masterpage 本身上的文本框？

因为只是想一想，这个机制是不是天生就臃肿？

如果所有输入控件及其值在每次单击按钮时都返回（即使不需要输入控件），这不会降低性能吗？

页面上只有一个表单标签真的限制了我们使用这种机制吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-05T16:01:36.023

[真正了解 ViewState](http://infinitiesloop.blogspot.com/2006/03/truly-understanding-viewstate.html)是关于 ASP.NET ViewState 主题的必读文章

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T15:51:28.587

有几个选项可以减少臃肿（是的，在处理大量控件时有很多）：

1.  使用 AJAX 仅发布所需的项目 - 尽管要小心允许未启用 JavaScript 的客户端仍然使用页面/站点。
2.  [MVC](http://www.asp.net/mvc)框架允许使用多个表单标签，因此您可以根据需要对部分进行分组。
3.  在页面/控件上将[EnableViewState](http://msdn.microsoft.com/en-us/library/system.web.ui.control.enableviewstate.aspx)设置为 false。
4.  把你的页面分成更小的页面。

此外，请查看[ASP.NET 中页面生命周期的](http://www.eggheadcafe.com/articles/o_aspNet_Page_LifeCycle.jpg)精彩图形表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T15:35:30.287

除非您使用 ajax，否则页面上的每个输入都会完全回发，因为只有一个表单标签。欢迎来到asp.net...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T15:35:40.240

只要您在服务器端点击的方法是页面类的非静态成员，它就可以访问文本框和页面上的所有其他控件。

是的，呈现给浏览器的所有控件（无论是在 MasterPage、用户控件等中）都将在回发时可用。

您可能需要查看[了解 ASP.NET 视图状态](http://msdn.microsoft.com/en-us/library/ms972976.aspx)。

这种架构肯定会影响性能，但是（取决于页面的复杂性）从服务器负载的角度来看，这通常不是问题，因为硬件升级通常比花费在优化应用程序性能上的额外编程时间便宜。

话虽如此，（正如其他人指出的那样）如果您想避免整个页面级回发到服务器，请考虑使用[AJAX 。](http://www.w3schools.com/Ajax/Default.Asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T15:35:48.243

是的，这一切都被发回了，是的，它可能会导致臃肿。我敢肯定，如果您搜索 ViewState，您会发现很多人都在抱怨它以及如何最小化它 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T15:38:44.383

是的，您的文本框在这两种情况下都可用，是的，它很臃肿。这就是 AJAX 发挥作用的地方。使用 AJAX，您可以只发送您需要的数据。

如果您想发送最少量的数据，您可以使用页面方法（页面上的静态方法，以便脚本管理器构建 javascript 来调用它，或者您可以使用 jquery 或其他方法调用它），或者启用脚本的 Web 服务也很好用。

你也有可以变得非常大的视图状态。ASP.Net MVC 是一种新的范例，而不是使用没有视图状态或回发的 WebForms。它包含 HTTP 而不是隐藏它，从而为开发人员提供更多控制权。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-05T15:55:49.280

文本框数据将按说明发回。除了使用 Ajax 之外，禁用视图状态会极大地提高页面的性能，尽管对控件功能（控制状态）至关重要的属性中的数据仍然会被回发。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-05T16:10:57.750

如果您没有对表单上的每个控件进行回发，您将无法在代码隐藏中访问它。即，如果在您的按钮按下时您想修改文本控件的属性，您不能这样做，因为 ASP.Net 对文本控件一无所知。

由于服务器和客户端之间的通信是无状态的，并且每次页面是服务器时，服务器都会忘记它的所有内容，如果您想再次使用同一页面，回发很重要。无论您使用哪种编程语言，都存在这种或类似的机制来处理服务器端代码。

如果您希望最小化回发（视图状态大小），请执行此操作。

*   在您不想回发的所有控​​件上设置 enableviewstate=false。
*   尽可能使用 AJAX 和 Web 服务（不要使用 UpdatePanel）。
*   尽可能使用 HTML 控件而不是 ASP.Net 控件。

嗯..在其他答案和良好链接中也有一些很好的建议。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-01-05T15:38:22.090

你已经用普通的 ASP.NET 击中了头部——它不是很好！在您描述的两种情况下，答案都是肯定的 - 文本框将与表单一起发送。

整个回发/ViewState 问题有点让人头疼，任何有能力的 ASP.NET 开发人员学会做的第一件事就是避免它们！

# php - Where do you put validation logic when using Zend Framework?

> ID：413464
> 
> 赞同：2
> 
> 时间：2009-01-05T15:33:20.573
> 
> 标签：php, zend-framework

I'm seeking some examples of how people implement validation logic in the Zend Framework.

My ideal implementation would keep the validation outside the controller and allow validating "Confirm password" fields and file uploads.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-05T15:41:43.113

你在使用`Zend_Form`你的表格吗？我倾向于在表单中为每个`Zend_Form_Element`. 我就是这样做的：

```
class Form_Login extends Zend_Form
{
    public function init() {
        $this->setMethod('post');

        $validator = new Zend_Validate_Regex('([A-Za-z0-9]+)');
        $validator->setMessage(
        'Your username can only contain letters, numbers and underscores (_).');

        $username = new Zend_Form_Element_Text('username');
        $username->setLabel('Your Username');
        $username->setDescription('The username you use to login');
        $username->setAllowEmpty(false);
        $username->setRequired(true);
        $username->addValidator($validator);

        $submit = new Zend_Form_Submit('login');
        $submit->setLabel('Login');

        $this->addElements(array($username, $submit));
    }
} 
```

（[自定义错误消息](http://framework.zend.com/manual/en/zend.validate.html#zend.validate.introduction.messages)）

然后在你的控制器中：

```
// $form is an instance of the extended Zend_Form
if (!$form->isValid()) {
    $validator->getMessages()
    // flashMessenger helpers or just simple view appends
} 
```

> 我理想的实现方式是将验证保持在控制器之外，并允许验证**“确认密码”**字段和**文件上传**。

我在参考指南中看到了确认密码验证器的提及（但现在找不到它们，典型的），但在 Google 上应该很容易找到。

文件上传肯定需要您[编写自定义验证器](http://framework.zend.com/manual/en/zend.validate.writing_validators.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T20:51:58.230

也许你应该[看看](http://weierophinney.net/matthew/archives/200-Using-Zend_Form-in-Your-Models.html)。Matthew Weier O'Phinney（Zend Fraework 核心开发人员之一）展示了一种需要习惯的方法 - 但值得一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T16:08:42.700

是的，这是进行数据验证的推荐方法。谢谢！我想看到更多的例子。

谈到 HTML，我有点控制狂，所以我尽量远离 Zend_Form。我知道它可以进行大量定制，但我记得在某些时候遇到了障碍，所以我决定坚持使用纯 html 表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-06T00:48:32.730

特别是对于“确认密码”类型的验证，请查看 Zym 框架（Zend 框架扩展）。它有一个用于这个确切目的的内置验证器。试试[Zym_Validate_Confirm](http://www.zym-project.com/docs/reference/zym.validate.set.html#zym.validate.set.confirm)类。

# c++ - dlopen 在具有静态成员的库上在构造函数中引发异常 - 导致中止

> ID：413473
> 
> 赞同：5
> 
> 时间：2009-01-05T15:36:00.427
> 
> 标签：c++, unix, exception, shared-libraries, dlopen

我正在尝试使用 dlopen 函数加载动态库。该库包含一个静态对象，该对象在其构造函数中引发异常。我在 dlopen 调用周围有一个“try-catch(...)”块，但它没有捕获异常，我只看到打印了“Abort”。

我怎样才能捕捉到这个异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-05T15:48:56.640

简短的回答：你不能

又想了想。
原始语句成立，但您还必须记住 dlopen() 是一个 C 库函数。C 不支持异常。因此，抛出从 C++ 代码到 C（您的全局对象备份到 dlopen() ）代码的异常也会导致应用程序终止。

见这里：[为什么在异常时不调用析构函数？](https://stackoverflow.com/questions/222175/why-destructor-is-not-called-on-exception#222358)

在这些情况下，抛出异常将终止应用程序。您的具体情况包括：

异常转义非本地静态（即全局）的构造函数/析构函数

# c - 有没有很好的 Valgrind 替代 Windows？

> ID：413477
> 
> 赞同：210
> 
> 时间：2009-01-05T15:37:39.080
> 
> 标签：c, windows, debugging, memory-leaks, valgrind

当我发现 Valgrind 仅适用于 Linux 时，我正在研究 Valgrind 以帮助改进我的 C 编码/调试——我没有其他需要或兴趣将我的操作系统迁移到 Linux，所以我想知道是否有适用于 Windows 的同样好的程序。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2011-07-05T09:13:11.137

正如 jakobengblom2 所指出的，valgrind 有一套工具。根据您所谈论的，有不同的 Windows 柜台部件。我这里只提OSS或者免费工具。

**1\. 内存检查：**

记忆博士。这是一个相对较新的工具，在 Windows 7 上运行良好。我最喜欢的功能是它在报告中将相同的泄漏分配堆栈分组。

[http://code.google.com/p/drmemory/](http://code.google.com/p/drmemory/)

我也使用过 UMDH（[http://support.microsoft.com/kb/268343](http://support.microsoft.com/kb/268343)），发现它非常有用且易于设置。它适用于Win2000到Win7。

AppVerifier 是 Windows 本机代码开发人员必备的瑞士刀，它的“内存”检查器做类似的工作 [http://msdn.microsoft.com/en-us/library/dd371695%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd371695%28v=vs.85%29.aspx)

**2.呼叫研磨：**

我最喜欢的是verysleepy（[http://www.codersnotes.com/sleepy](http://www.codersnotes.com/sleepy)）它很小但非常有用且易于使用。

如果您需要更多功能，AMD CodeAnalyst™ 性能分析器是免费的：http: [//developer.amd.com/documentation/videos/pages/introductiontoamdcodeanalystperformanceanalyzer.aspx](http://developer.amd.com/documentation/videos/pages/introductiontoamdcodeanalystperformanceanalyzer.aspx)

Windows 性能分析工具是微软免费提供的，不是很容易使用，但如果你愿意花时间，可以完成工作。[http://blogs.microsoft.co.il/blogs/sasha/archive/2008/03/15/xperf-windows-performance-toolkit.aspx](http://blogs.microsoft.co.il/blogs/sasha/archive/2008/03/15/xperf-windows-performance-toolkit.aspx) 下载：http: [//msdn.microsoft.com/en-us/performance /cc752957](http://msdn.microsoft.com/en-us/performance/cc752957)

**3.地块：**

Windows 上类似（不完全匹配）的免费工具有：

来自 sysinternals 的 VMMap：[http ://technet.microsoft.com/en-us/sysinternals/dd535533](http://technet.microsoft.com/en-us/sysinternals/dd535533)

windbg 中的 !heap 命令：http: [//hacksoflife.blogspot.com/2009/06/heap-debugging-memoryresource-leak-with.html](http://hacksoflife.blogspot.com/2009/06/heap-debugging-memoryresource-leak-with.html)

**4.缓存研磨：**

上面提到的 Windows 性能工具具有一定水平的 L2 缓存未命中分析能力，但不如 Cachegrind 好和易于使用。

**5.DRD：**

还没有在 Windows 上找到任何免费且功能强大的东西，我能找到的唯一一个稍微接近的免费 Windows 工具是 AppVerifier 中的“锁定”检查器：http: [//msdn.microsoft.com/en-us/library /dd371695%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd371695%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2010-01-31T19:41:39.677

为什么不使用 Valgrind + Wine 来调试您的 Windows 应用程序？见 [http://wiki.winehq.org/Wine_and_Valgrind](http://wiki.winehq.org/Wine_and_Valgrind)

（Chromium 使用它来检查 Windows 版本的内存错误；请参阅 build.chromium.org 并查看实验或内存瀑布，并搜索 wine。）

还有 Dr. Memory，见 dynamorio.org/drmemory.html

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-01-05T17:19:23.620

一些更好的商业工具：

*   [净化](http://www-01.ibm.com/software/awdtools/purify/)
*   [保险++](http://www.parasoft.com/jsp/products/home.jsp?product=Insure)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-08-30T13:16:23.587

对于 Visual C++，请尝试**Visual Leak Detector**。当我使用它时，它检测到来自调用的内存泄漏`new`并返回泄漏源代码中的实际行。最新版本可以在[http://vld.codeplex.com/](http://vld.codeplex.com/)找到。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2009-01-05T16:40:50.653

您使用的 Windows 开发环境可能包含它自己的工具。例如，Visual Studio 可让您[检测和隔离](http://msdn.microsoft.com/en-us/library/x98tx3cf%28VS.80%29.aspx)程序中的内存泄漏

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2009-10-01T13:59:54.220

我想列出一些工具，希望会有用

阅读[本文](http://www.linuxjournal.com/article/6556)了解更多详情

1.  净化
2.  边界检查器
3.  Coverity（基本上它是一个代码分析器，但它会在 static 中捕获内存泄漏）
4.  发光代码
5.  dmalloc
6.  ccmalloc
7.  NJAMD
8.  YAMD
9.  瓦尔格林德
10.  巡逻队
11.  保险++

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2009-08-28T01:16:54.100

试试[杜马](http://duma.sourceforge.net/)

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2009-04-09T05:37:22.680

Windows 调试工具中有 Pageheap.exe 部分。它是免费的，基本上是一个自定义内存分配器/释放器。

请参阅[http://support.microsoft.com/kb/286470](http://support.microsoft.com/kb/286470)

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2009-10-01T09:45:17.773

结合 Visual Studio，我通常使用[Visual Leak Detector](http://vld.codeplex.com)或简单的 _CrtDumpMemoryLeaks() 这是一个 win32 api 调用。两者都没有什么花哨的，但他们完成了工作。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2009-01-05T15:50:44.610

过去我有机会使用[Compuware DevPartner Studio](http://www.compuware.com/products/devpartner/studio.htm)，这非常好，但价格相当昂贵。一个更便宜的解决方案可能是[GlowCode](http://www.glowcode.com/summary.htm)，我刚刚使用 5.x 版本，尽管在附加到我需要调试的进程时存在一些问题，但它运行得很好。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2009-01-05T15:58:22.440

我一直很喜欢[Memory Validator](http://www.softwareverify.com/cpp/memory/index.html)，来自一家名为 Software Verification 的公司。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2009-10-01T09:16:32.323

Visual Studio 可以帮助自己检测内存泄漏。请参阅[Microsoft Visual C++ 提示和技巧](http://www.highprogrammer.com/alan/windev/visualstudio.html)-> “内存泄漏”部分。[另见SO中的](https://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows/413709#413709)这篇文章

尽管只有 Visual Studio 的 Team Edtion 才能进行真正的跟踪。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2009-01-05T15:53:58.300

有关类似工具的列表，请参阅软件 QA 测试和测试工具资源页面上的“[源测试工具”链接。](http://www.aptest.com/resources.html#app-source)

我过去曾使用过 BoundsChecker、DevPartner Studio 和 Intel V-Tune 进行分析。我最喜欢 V-Tune；您可以模拟各种英特尔芯片组，它会为您提供有关如何针对该平台进行优化的提示。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2009-10-01T09:04:56.123

[净化器](http://www-01.ibm.com/software/awdtools/purify/win/)怎么样？

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2010-03-03T09:42:00.487

[Jochen Kalmbach 的内存泄漏检测器](http://www.codeproject.com/KB/applications/leakfinder.aspx)是否符合条件？

PS：最新版本的网址隐藏在文章的评论线程中。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2010-04-19T11:38:00.263

LeakDiag、UMDH、App Verifier、DebugDiag，都是提高代码健壮性和发现内存泄漏的有用工具。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2010-07-02T07:08:59.647

Boost Test 库可以检测内存泄漏。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2012-02-21T19:57:46.840

试试英特尔的 Inspector XE 产品，它可以帮助您检测内存和线程问题： http: [//software.intel.com/en-us/articles/intel-inspector-xe/](http://software.intel.com/en-us/articles/intel-inspector-xe/)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2009-01-05T15:56:00.823

也许 CodeSnitch 会是你追求的东西？[http://www.entrek.com/codesnitch.html](http://www.entrek.com/codesnitch.html)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2009-07-15T22:04:30.377

如果您使用 Borland/CodeGear/Embarcadero C++ Builder 进行开发，您可以使用 CodeGuard。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2009-10-01T09:32:17.237

所有 Profiler 或多或少都包括检查内存泄漏并在分配内存时向您显示堆栈。

我可以推荐[Intels Parallel Inspector](http://software.intel.com/en-us/intel-parallel-inspector/)。使用简单，无需重新编译。试用版运行 30 天。

[GlowCode](http://www.glowcode.com/)和[AtromatedQA](http://www.automatedqa.com)也包括此类功能。他们都提供免费试用。

对比中的 Compuware DevPartner（又名 BoundsChecker）需要减慢“仪器”重新编译速度，并且在检查错误时应用程序运行速度也会变慢。并且 BoundsChecker 根本无法与 64 位 evsrions 一起使用。我们放弃了那个工具。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2009-10-01T10:23:01.440

我用过的最好的工具是[DevPartner BoundsChecker——](http://microfocus.com/products/DevPartner/BoundsCheckerSuite.asp)它不是免费的，但它有一个评估期。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2010-04-02T13:57:19.343

您列表的另一个记忆工具：[Memory Validator](http://www.softwareverify.com/cpp/memory/index.html)。

不是免费的，但远没有 Purify 或 Boundschecker 贵。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2010-08-09T14:15:51.977

如果您不怕 mingw，这里有一些链接（有些可能适用于 MSVC）... [http://betterlogic.com/roger/?p=1140](http://betterlogic.com/roger/?p=1140)

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2011-04-06T10:56:02.153

我们刚刚完成了一个用于 Windows 的[内存安全检查工具](http://www.semanticdesigns.com/Products/MemorySafety)，它可以处理 GCC 和 Micrsoft Visual C（还不是 C++），并且正在寻找 Beta 测试人员。

编辑 2011 年 6 月 12 日：不再是 Beta，现在为 GCC 和 Microsoft Visual Studio C 生产。

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2012-06-05T09:17:48.843

我今天发现了这个 SF 项目：

[http://sourceforge.net/p/valgrind4win/wiki/Home/](http://sourceforge.net/p/valgrind4win/wiki/Home/)

他们正在将 valgrind 移植到 Windows。可能在几年后，我们将在 windows 上拥有一个可靠的 valgrind。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2009-10-01T09:07:03.777

看看这个问题：[Windows 有没有好的 Valgrind 替代品？](https://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows). 虽然有人询问了 valgrind 的一般替代品，但它主要讨论的是内存泄漏检测器，而不是竞争条件检测。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2009-10-01T09:11:09.827

绝对净化！我用它来分析一些庞大的代码库（> 3,000 kSLOC）并发现它非常出色。

您可能想在 Wikipedia上查看[此列表。](http://en.wikipedia.org/wiki/Memory_debugger)

顺便说一句，我发现[memwatch](http://www.linkdata.se/sourcecode.html)很有用。谢谢约翰！

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2009-10-01T09:42:05.690

我使用了 Insure++，它在查找 c++ 内存泄漏/损坏和许多其他错误（如未初始化的变量、指针错误、字符串等）方面做得非常出色，它还可以进行可视化“代码覆盖”和运行时内存使用等。您的代码..您可以尝试试用版..

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2009-10-01T11:41:28.650

您可能想阅读 Mozilla关于内存泄漏[的做法。](https://developer.mozilla.org/En/Debugging_memory_leaks)他们工具箱中的一个工具是用作[内存泄漏检测器的 Hans Boehm 垃圾收集器。](http://www.hpl.hp.com/personal/Hans_Boehm/gc/leak.html)

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2009-10-01T12:15:56.893

您可以尝试[RuntimeChecker](http://www.runtimechecker.com/)试用版或[IBM Purify](http://www-01.ibm.com/software/awdtools/purify/)试用版。

一个免费的解决方案是在 Visual Studio 中使用以下代码：

```
#ifdef _DEBUG
#define new DEBUG_NEW
#endif 
```

只需将其写在所有 cpp 文件的顶部即可。这将在停止调试运行并在输出窗口中列出它们时检测应用程序的内存泄漏。双击内存泄漏行将突出显示分配内存且从未释放的行。这可能会对您有所帮助： http: [//www.flipcode.com/archives/How_To_Find_Memory_Leaks.shtml](http://www.flipcode.com/archives/How_To_Find_Memory_Leaks.shtml)

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2009-10-01T18:20:57.937

[用户模式转储堆 (UMDH) 实用程序](http://msdn.microsoft.com/en-us/library/cc267868.aspx)与操作系统一起分析特定进程的 Windows 堆分配。这是微软免费提供的一个非常好的工具。[这](http://support.microsoft.com/kb/268343)是一个迷你教程“如何使用 Umdh.exe 查找内存泄漏”。

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2010-03-15T10:36:48.907

免费工具 DebugDiag 将帮助查找内存和处理泄漏。

您无需为 DebugDiag 工作而增强您的程序。

[http://www.microsoft.com/downloads/details.aspx?FamilyID=28BD5941-C458-46F1-B24D-F60151D875A3&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=28BD5941-C458-46F1-B24D-F60151D875A3&displaylang=en)

虽然它不是最简单或最直观的程序！确保您在谷歌上搜索有关如何使用它的教程和说明。

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2011-07-21T03:33:00.890

你可以看看《Game Programming Gems 8》一书中的文章[Design and Implementation of an In-Game Memory Profiler 。](http://my.safaribooksonline.com/9781584507024/ch37)

它展示了如何实现一个低开销的半侵入式实时内存分析器，源代码在 CD-ROM 中提供。

![在此处输入图像描述](https://i.stack.imgur.com/5mY7n.png)

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2012-09-24T00:32:15.073

Clang 支持 Address Sanitizer 插件（-faddress-sanitizer 选项），它几乎可以检测到 Valgrind 可以找到的大多数错误（虽然不支持检测未初始化的内存读取和内存泄漏）。有关与 Valgrind 和其他类似工具的比较，请参阅[此页面。](http://code.google.com/p/address-sanitizer/wiki/ComparisonOfMemoryTools)官方 Windows 端口目前正在进行中，请参阅[Windows ASan 端口](http://code.google.com/p/address-sanitizer/wiki/WindowsPort)。

几个月前，我尝试自己在 Windows 上构建它并放弃了，请参阅我的相关[问题](https://stackoverflow.com/questions/11806469/clang-with-faddress-sanitizer-on-windows)。如果您想再试一次，现在情况可能会变得更好。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2011-02-06T16:58:12.167

只是一个想法，您还可以实现内存分配器并跟踪对 malloc 和 free 的所有调用。然而，这对于某些项目来说可能太多了。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2011-04-05T20:31:38.443

Parasoft Insure++ 一直很可靠：

[http://www.parasoft.com/jsp/products/insure.jsp?itemId=63](http://www.parasoft.com/jsp/products/insure.jsp?itemId=63)

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2012-08-09T11:25:29.310

[在 Windows 上的 C++ 应用程序中查找内存泄漏](http://avdongre.wordpress.com/2012/08/09/finding-memory-leak-in-c-application-on-windows/)

# algorithm - 是否有合适的算法来解决边缘去除问题？

> ID：413483
> 
> 赞同：5
> 
> 时间：2009-01-05T15:38:57.330
> 
> 标签：algorithm, graph-theory

有一个有向图（不一定连接），其中一个或多个节点被区分为源。从任何一个来源可访问的任何节点都被视为“点亮”。现在假设其中一条边被删除。问题是要确定以前点亮和不再点亮的节点。

我想可以考虑像城市电力系统这样的类比。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-05T16:12:43.300

这是一个“动态图可达性”问题。以下论文应该有用：

[*一种具有几乎线性更新时间的有向图的完全动态可达性算法。*](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.5.9059)利亚姆·罗迪蒂，乌里·兹维克。*计算理论*，2002。

这给出了一种算法，在可能的循环图上具有 O(m * sqrt(n)) 时间更新 ( *amortized* ) 和 O(sqrt(n)) 时间查询（其中 m 是边数，n 是节点）。如果图是非循环的，这可以改进为 O(m) 时间更新（*amortized*）和 O(n/log n) 时间查询。

考虑到问题的具体结构，或者以空间换时间，你总是有可能做得比这更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T15:48:06.547

如果不只是“点亮”或“未点亮”，您将保留一组节点，节点从中通电或点亮，并将具有空集的节点视为“未点亮”，将具有非空集的节点视为“ lit”，那么删除一条边只需要从目标节点的集合中删除源节点。

编辑：忘记了这一点：如果您删除集合中的最后一个 lit-from-node，遍历边缘并从他们的集合中删除您刚刚“未点亮”的节点（也可能从那里遍历，依此类推）

EDIT2（对 tafa 的改写）：首先：我误读了原始问题，并认为它指出对于每个节点，它已经知道是点亮或未点亮的，正如我现在重新阅读的那样，没有提及。

但是，如果您为网络中的每个节点存储一个包含它被照亮的节点的集合，您可以轻松地从移除的边缘遍历图形并修复任何照亮/未照亮的引用。因此，例如，如果我们有这样的节点 A、B、C、D：（ascii 艺术的蹩脚尝试）

```
A -> B >- D
 \-> C >-/ 
```

然后在节点 A 存储它是一个源（因此它自己被点亮），在 B 和 C 中你会存储它们被 A 点亮，在 D 中你会存储它被 A 和 C 点亮.

然后说我们从 B 到 D 删除边：在 D 中，我们从 lit-source-list 中删除 B，但它仍然亮着，因为它仍然被 A 点亮。接下来说我们从 A 到 C 删除边之后：A从 C 的集合中移除，因此 C 不再被点亮。然后我们继续遍历起源于 C 的边，并从 D 的集合中移除 C，该集合现在也是未点亮的。在这种情况下，我们完成了，但如果集合更大，我们就从 D 继续。

该算法只会访问直接受到删除或添加边影响的节点，因此（除了每个节点所需的额外存储）应该接近最优。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T15:53:58.800

这是你的作业吗？

最简单的解决方案是在原始图上执行 DFS ( [http://en.wikipedia.org/wiki/Depth-first_search](http://en.wikipedia.org/wiki/Depth-first_search) ) 或 BFS ( [http://en.wikipedia.org/wiki/Breadth-first_search](http://en.wikipedia.org/wiki/Breadth-first_search) )从源节点。这将为您提供所有原始点亮的节点。

现在删除有问题的边缘。再次执行 DFS。您可以选择仍然亮着的节点。

输出出现在第一组而不是第二组的节点。

这是一种渐近最优算法，因为您执行两个 DFS（或 BFS），它们占用 O(n + m) 时间和空间（其中 n = 节点数，m = 边数），这决定了复杂性。您至少需要 o(n + m) 时间和空间来读取输入，因此该算法是最优的。

现在，如果您想删除*多个*边缘，那会很有趣。在这种情况下，我们将讨论动态数据结构。这是你想要的吗？

编辑：考虑到评论：

*   未连接不是问题，因为在搜索期间将无法到达无法访问的连接组件中的节点
*   有一种聪明的方法可以同时从所有节点执行 DFS 或 BFS（我将描述 BFS）。您只需将它们全部放在堆栈/队列的开头即可。

BFS 的伪代码，用于搜索从任何起始节点可到达的所有节点：

```
队列 q = [所有起始节点]
while (q 不为空)
{
   x = q.pop()
   forall（x 的 y 邻居）{
      if (y 没有被访问) {
         访问[y] = true
         q.push(y)
      }
   }
}

```

将队列替换为堆栈，您将获得一种 DFS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T15:45:57.490

图表有多大和连接程度如何？您可以存储从源节点到所有其他节点的所有路径，并查找到该节点的所有路径都包含删除边之一的节点。

编辑：稍微扩展一下这个描述

从每个源节点执行 DFS。跟踪生成到每个节点的所有路径（作为边，​​而不是顶点，所以我们只需要知道所涉及的边，而不是它们的顺序，因此我们可以使用位图）。为每个节点记录从源到节点的路径数。

现在迭代路径。删除包含已删除边的任何路径并减少该节点的计数器。如果一个节点计数器减到零，它就亮了，现在不亮了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T16:13:21.410

在构建图形时，我会保留边上连接的源节点的信息。（例如，如果边与源 S1 和 S2 有连接，则其源列表包含 S1 和 S2 ）并使用输入边的信息创建节点和输出边缘。当一条边被删除时，通过考虑该节点的输入边来更新该边的目标节点的输出边。并使用 DFS 或 BFS 遍历更新边的所有目标节点。（如果是循环图，请考虑标记）。在更新图表时，也可以找到没有任何边的节点，但有源连接（点亮->未点亮节点）。但是，如果您想同时删除多个边，这可能不是一个好的解决方案，因为这可能会导致一次又一次地遍历相同的边。

# url - 网址中的 www 有什么意义？

> ID：413490
> 
> 赞同：34
> 
> 时间：2009-01-05T15:43:19.913
> 
> 标签：url, web

我一直在尝试为我的网站收集分析数据，并意识到 Google 分析没有设置为为 www.example.com 的访问者捕获数据（它只是为 example.com 设置的）。我注意到当我只输入 example.com 时，许多网站会将我重定向到 www.example.com。然而，stackoverflow 恰恰相反（将 www.stackoverflow.com 重定向到 stackoverflow.com）。

所以，我决定为了获得准确的分析，我应该让我的网络服务器将所有用户重定向到 www.example.com 或 example.com。有理由做其中一个吗？纯粹是个人喜好吗？和www有什么关系？当我在浏览器中输入域时，我从不输入它。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-01-05T15:51:14.390

历史课。

曾经有一段时间，Web 并未主宰互联网。具有域的组织（例如，我的大学，aston.ac.uk）通常会为各种服务设置多个主机名：gopher.aston.ac.uk（Gopher 是万维网的前身）、news.aston .ac.uk（用于 NNTP Usenet）、ftp.aston.ac.uk（FTP - 包括匿名 FTP 档案）。它们只是访问这些服务的明显名称。

当 HTTP 出现时，约定变成为 Web 服务器提供主机名“www”。该约定是如此普遍，以至于有些人开始相信“www”部分实际上告诉客户使用什么协议。

这种约定在今天仍然很流行，并且确实有一定的意义。但是，这在技术上不是必需的。

我认为 Slashdot 是最早决定使用无 www 网址的网站之一。他们的负责人 Rob Malda 指的是“TCWWW”——“被诅咒的 WWW”——当新闻文章在他的 URL 中包含“www”时。我想对于像 Slashdot 这样的网站，它在很大程度上主要是一个网站，URL 中的“www”是多余的。

您可以选择任何您喜欢的作为规范地址。但一定要保持一致。从其他形式重定向到规范形式是一种很好的做法。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-01-05T15:46:58.750

另外，跳过“www”。在每个请求上为您节省四个字节。:)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-04-28T23:17:12.197

重要的是要知道，如果您不使用 www（或其他子域），那么所有 cookie 都将提交到每个子域，并且您将无法使用无 cookie 的子域来提供静态内容，从而减少在浏览器和服务器之间来回发送的数据量。你以后可能会后悔的事情。

（另一方面，跨子域对用户进行身份验证变得更加困难。）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-01-05T15:44:46.493

它只是一个基于传统的子域，真的。如果你不喜欢它就没有意义，而且它也浪费打字时间。我`http://somedomain.com`更喜欢`http://www.somedomain.com`我的网站。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-05T15:48:32.460

这主要是为主机名建立间接性的问题。如果您希望能够更改 www.example.com 指向的位置而不影响 example.com 指向的位置，这很重要。当网络年轻时，这更有可能有用，并且“www”有助于明确为什么存在该框。如今，存在许多主要用于提供 Web 内容的域，并且 example.com 记录几乎都必须指向 HTTP 服务器，因为人们会盲目地忽略 www。（就在这周，当我尝试访问某人提到的网站时，我感到震惊，结果发现当我省略 www 时它不起作用，或者当我不小心在 TLD 后添加了一个尾随点时。）

省略“www”非常符合 Web 2.0 Adoptr Gamma... 但有充分的理由。如果人们只访问您的网站以获取 Web 内容，为什么还要不断重新添加 www？我一般，我会放弃它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-05T15:48:33.053

[http://no-www.org/](http://no-www.org/)

不过，无论有没有 www 子域，谷歌分析都应该可以正常工作。许多网站成功地使用了 GA，但不强制非此即彼。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-05T17:31:35.340

它是三级域（见[域名](http://en.wikipedia.org/wiki/Domain_name "域名 - 维基百科，免费的百科全书")。有一段时间它指定了一个物理服务器：一些站点使用 URL，如 www1.foo.com、www3.foo.com 等。

现在，它更加虚拟（不同的 3 级域指向同一个服务器，不同的服务器处理相同的 URL），但它通常用于处理子域，并且通过一些技巧，您甚至可以处理无限数量的子域-domains：确切地说，维基百科使用此级别的语言（en.wikipedia.org、fr.wikipedia.org 等）或其他站点为用户提供友好的 URL（例如我的页面[http:// PhiLho.deviantART.com](http://PhiLho.deviantART.com)）。

所以万维网。不仅仅是为了装饰，它是有目的的，即使绝大多数网站只是坚持这个默认值，如果没有提供，自动提供它。我知道有些网站忘记重定向，如果你忽略它就会出错，而他们在无 www 的 URL 上进行通信：他们希望用户自动提供它！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-05T16:09:07.973

更不用说 URL 已经指定了要使用的协议，所以“www”。实在是没用。

据我记得，以前像 www 和 ftp 这样的服务位于不同的机器上，因此在这个时候（或多或少）使用自然 DNS 功能（子域）是必要的。

# linux - 在 Linux 中选择多个同名的可执行文件

> ID：413493
> 
> 赞同：38
> 
> 时间：2009-01-05T15:44:02.733
> 
> 标签：linux, path

我正在使用的系统已`gnuplot`安装在`/usr/bin`. 我没有root，但我需要更新的版本`gnuplot`，所以我将它安装到`$HOME/usr/bin`.

我添加到我的路径中，但如果我只使用 gnuplot 命令`$HOME/usr/bin`，它仍然会执行其中的路径。`/usr/bin`我宁愿不必`$HOME/usr/bin/gnuplot`每次必须使用它时都指定。

如何告诉 Linux 使用我的主目录中的那个，而不是 中的那个`/usr/bin`？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-01-05T15:45:26.007

可执行文件按 PATH 顺序查找。您需要`${HOME}/usr/bin`在路径前添加，如下所示：

```
export PATH="${HOME}/usr/bin:$PATH" 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-01-05T15:45:38.923

可执行文件按 PATH 顺序查找。`/usr/bin`您的PATH显然是这样设置的`~/usr/bin/`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-05T15:48:57.793

除了如前所述修改 PATH 外，您还可以使用这样的别名（在 BASH 中）

```
alias gn=$HOME/usr/bin/gnuplot 
```

然后你只需运行它

```
gn 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-05T15:48:40.213

Bombe 说的没问题。我要补充一点，您应该在用户的 bashrc ( `$HOME/.bashrc`) 中声明用户特定的 PATH 条目，因此您的 PATH 设置仅适用于您的用户。

# unit-testing - 获取/保存参数到预期的 JMock 方法调用？

> ID：413505
> 
> 赞同：0
> 
> 时间：2009-01-05T15:46:56.347
> 
> 标签：unit-testing, jmock

我想测试一个“适配器”对象，当它接收到 xml 消息时，它会将其消化为 Message 对象，将消息 ID + CorrelationID 与时间戳一起放入并将其转发到 Client 对象。=20 消息可以关联到前一个（例如 m2.correlationID =3D m1.ID）。

我模拟客户端，并检查适配器是否成功调用“client.forwardMessage(m)”两次，第一条消息具有空的correlationID，第二条消息具有非空的correlationID。

但是，我想通过抓取 ID（例如 m1.ID）来精确测试correlationID 是否设置正确。

但我无论如何都找不到这样做。

有一个关于添加该功能的[jira](http://jira.codehaus.org/browse/JMOCK-163)，但没有人评论并且未分配。

这真的没有实现吗？

我读到了重新设计适配器以使用 IdGenerator 对象的替代方法，我可以存根，但我认为会有太多对象。=20 你不认为将对象拆分到如此精细的粒度会增加不必要的复杂性吗？

谢谢，我很感激任何评论:-)

塔耶布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-10T07:20:18.453

您可以使用匹配器 ( [http://code.google.com/p/hamcrest](http://code.google.com/p/hamcrest) ) 来检查您是否将正确的参数传递给您的方法。请注意，您需要静态导入匹配器（在我的示例中为 HasCorrelationId）。

下面的示例断言 client.forwardMessage(m) 被调用一次，带有空相关 ID 的消息和一次带有相关 ID =“abc”的消息。

```
import org.hamcrest.Description;
import org.hamcrest.TypeSafeMatcher;

public class HasCorrelationId extends TypeSafeMatcher<Message> {
    private final Object expectedCorrelationId;
    public HasCorrelationId(Object expectedCorrelationId) {
        this.expectedCorrelationId = expectedCorrelationId;
    }
    @Override
    public boolean matchesSafely(Message message) {
        if (expectedCorrelationId==message.getCorrelationId()) return true;
        return expectedCorrelationId==null? false: expectedCorrelationId.equals(message.getCorrelationId());

    }

    public void describeTo(Description description) {
        description.appendText("hasCorrelationId("+expectedCorrelationId+")");

    }

    public static HasCorrelationId hasCorrelationId(Object correlationId) {    
    return new HasCorrelationId(correlationId);
    }
} 
```

...现在进行测试：

```
public class MyTest {
    private Mockery context = new Mockery();

  @Test
  public void testCorrelationId() {
    final Client client = context.mock(Client.class);
    final Message message1 = context.mock(Message.class,"message1");
    final Message message2 = context.mock(Message.class,"message2");

    context.checking(new Expectations(){{
        allowing(message1).getCorrelationId();will(returnValue(null));
        allowing(message2).getCorrelationId();will(returnValue("abc"));

        one(client).forwardMessage(with(hasCorrelationId(null)));
        one(client).forwardMessage(with(hasCorrelationId("abc")));
    }});

    client.forwardMessage(message1);
    client.forwardMessage(message2);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T12:32:53.240

我们已经做出一些努力来简化 Hamcrest 1.2 中的匹配器的编写。有一个新的 FeatureMatcher 需要更少的工作。

# ios - NSNumber 存储浮点数。请不要科学记数法？

> ID：413535
> 
> 赞同：1
> 
> 时间：2009-01-05T15:52:17.600
> 
> 标签：ios, objective-c, cocoa-touch, string-formatting, phone-number

我的代码看起来像这样

```
NSNumber *inputToNumber = [NSNumber numberWithFloat:[textField.text floatValue]]; 
```

文本字段中的值实际上是一个电话号码。它作为烦人的 (2.0)78966e+08 存储在 NSNumber 中

我怎样才能让 NSNumber 将其存储为 0207896608？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-01-05T16:33:23.853

我认为将电话号码存储到 NSNumber 的基本想法是有缺陷的：

*   你如何区分带或不带前导 0 的数字？
*   您如何存储来自国外的电话号码？

我会使用 NSString 代替 NSNumber。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-05T17:39:56.667

仅仅因为它被称为数字并不意味着“电话号码”是与“5”或“pi”相同的数字。

您应该将电话号码视为字符串，或者您应该创建一个 TelephoneNumber 模型类来表示每一个。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-05T22:58:11.657

考虑到世界上有些地方的数字没有前导 0，并且带有前导 0 的数字与没有前导 0 的相同数字不同。

```
05843924 != 5843924 
```

所以不要再懒惰了，`NSNumber`建立你自己的电话号码类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-05T16:27:41.040

科学记数法在许多计算机语言中用作非常大（或非常小）数字的默认输出。如果希望数字输出为十进制，则需要指定输出格式（实现因语言而异。）

此外，julesjacobs 是正确的。您不应将 FLOAT 用于电话号码，因为它会出现二进制舍入错误。使用 INT 或 STRING 将为您省去很多麻烦。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-01-05T16:53:29.707

如果您需要能够将其作为数字处理，也许您应该将其分解为多个部分，并将每个部分存储为一个整数。

```
01112223333
country code 0
area code 111
prefix 222
number 3333 
```

或者，如果您不需要操作它，您可以将整个内容存储为字符串。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2009-01-05T16:13:50.723

您是否将电话号码存储在浮点数中？您应该考虑使用整数或字符串。也许：

```
NSNumber *inputToNumber = [NSNumber numberWithInt:[textField.text intValue]]; 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2009-01-05T17:11:55.413

嘿伙计们，您对此有何看法，这似乎完全满足了我的目的。目前只有英国，所以当我有机会时会担心本地化。

我用它来存储号码

```
NSNumber *inputToNumber = [NSNumber numberWithLongLong:(long long)[[textField.text stringByReplacingOccurrencesOfString:@" " withString:@""] longLongValue]]; 
```

此方法格式化我的电话号码并处理前面提到的 0。

```
-(NSString *)phoneNumberString:(NSNumber *)phoneNumber {
    //Add a zero because NSNumber won't save a preceeding zero
    NSString *telephoneString = [[NSString alloc] initWithFormat:@"0%@", [phoneNumber stringValue]];

    if (telephoneString.length >= 4) {
        NSString *firstPart = [[NSString alloc] initWithString: [telephoneString substringToIndex:4]];
        NSString *secondPart = [[NSString alloc] initWithString: [telephoneString substringFromIndex:4]];

        //Add the two parts together with a space inbetween
        NSString *formattedTelephoneString = [NSString stringWithFormat:@"%@ %@", firstPart, secondPart];

        //send it back to the cellForRow TableCell Method
        [firstPart release];
        [secondPart release];
        [telephoneString release];

        return formattedTelephoneString;    
    }
    else {
        return telephoneString; 
    }
} 
```

感谢所有的评论。我会将答案标记为建议 NSString 的人，因为我担心我会恢复使用 NSString 而不是我上面的解决方法。

# project-management - Scrum：太多还是不够？

> ID：413553
> 
> 赞同：16
> 
> 时间：2009-01-05T15:55:59.933
> 
> 标签：project-management, process, agile, scrum

我的公司最近开始使用 Scrum；我们已经完成了 2 次冲刺。我们仍在学习，但我们肯定已经暴露并修复了我们开发过程中的一些问题。所以总的来说，我认为这对我们有好处。

在阅读了许多来自布道者、愤世嫉俗者和介于两者之间的人的关于 Scrum 的互联网思考时，三个常见但有些矛盾的主题对我来说很突出：

1.  Scrum 实施失败的原因是 Scrum 的流程没有得到足够密切的关注。
2.  Scrum 实施失败是因为组织没有使 Scrum 适应自己的环境/文化/实践。
3.  Scrum 的过程并不重要；只有敏捷宣言中的价值观很重要。

这些示例可以在对这些 SO 问题的回答中看到：

*   [你在 Scrum 或 Sprinting 方面有过糟糕的经历吗？](https://stackoverflow.com/questions/272253/have-you-had-a-bad-experience-with-scrum-or-sprinting)
*   [Scrum 是邪恶的吗？](https://stackoverflow.com/questions/343162/is-scrum-evil)
*   [敏捷开发死了吗？](https://stackoverflow.com/questions/301993/is-agile-development-dead)

我不得不承认，我们还没有遵循 Scrum 的所有指导方针：我们还没有在 sprint 结束时发布，我们的 Scrum Master 不希望我们在接近结束时将任务从 sprint backlog 中移出冲刺，以便他可以看到我们的计划偏离了多少（这意味着燃尽图永远不会变为 0），并且紧急的客户支持问题仍然具有破坏每个人计划的不可思议的力量，举几个例子。

**我的问题是：**在尝试解决这些和其他问题时，是尝试更接近官方 Scrum 流程，更好地接近我们的一些前 Scrum 流程，还是更好地思考 Scrum 的原则尝试想出一个完全不同的过程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-05T16:04:45.110

我想说，如果你不及早且经常发布，你真的错过了敏捷性的关键组成部分之一。如果您不这样做，您的流程就不是敏捷的，并且必然会遇到与传统的、计划驱动的流程相同的问题。这可能是暂时的情况，因为您刚刚习惯了一些事情，但您需要尽快（并定期）开始发布。

你总是会遇到阻碍表演的问题，但你可以通过缩短冲刺长度来解决这个问题。客户可能无法等待一个月，但他们可能会等待 2 周来处理某些事情。那么，较短的 sprint 长度可能会帮助您将一些请求推迟到下一个 sprint，从而减少它们的破坏性。您还需要提前告知客户，中断实际上正在导致您的步伐受到影响。如果他们知道他们选择的功能被某些请求延迟，他们可能会自愿选择等待。

我要提出的另一个观察结果是，与几乎任何事情一样，最好在学习时尽可能地遵循该模式。一旦你很好地掌握了基本原则，你就可以更清楚地看到一些原则可以在哪里弯曲、破坏或替换，以改进流程。在你真正明白之前，你改变的东西可能会伤害或帮助——你真的不知道，因为你没有经验告诉你事情应该如何运作。除非您的 Scrum master 真的很有经验，否则您可能希望更接近已定义的实践，直到您获得更多的 sprint。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-05T16:35:22.117

我在 Scrum 上读到的几乎所有内容都表明，关键之一是调整流程以适应您自己的情况。没有两个开发团队是相同的，不同的事情适用于不同的人。

Scrum 背后的主要思想是：

*从需求到开发再回到利益相关者，有一个紧密的反馈循环。*

这允许开发团队不断地验证他们正在构建的东西是真正想要的，并且允许随着需求和期望的变化而轻松地调整开发。利益相关者可以随时添加或删除功能，并且可以根据需求的变化调整功能的优先级。

*将软件保持在可以在任何给定 sprint 结束时发布的状态。*

这并不是说您在每个 sprint 中都发布了版本，而是说如果客户决定他们想要拥有最新的东西，您就可以发布。这也有助于开发团队避免由于人们一次次地在一个项目上工作几个月而孤立地工作而导致的集成地狱的情况。

*对开发中发生的事情完全透明，每个人都需要愿意做出权衡。*

这是大多数项目失败的地方，如果每个人都参与其中，Scrum 才能真正成功。如此多的开发项目被设置为一个版本必须在 Y 日期发布 X 功能，并且无法灵活地更改它。这导致了半成品的功能和漏洞百出的软件，因为开发人员在他们的清单上争先恐后地获取所有必需的功能。

现实情况是，软件开发中会发生意想不到的事情。通过开放式沟通和 Scrum 流程的自愿参与者，客户和开发人员可以持续评估项目的当前状态，并就项目剩余工作的优先级做出明智的决定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-05T16:07:12.173

Scrum*确实*有效。并非在所有情况下都适用于所有团队，但它已被证明是有效的。

我建议在您的业务环境允许的范围内尽可能多地采用教科书 Scrum，看看效果如何，*然后对其进行调整*。

为什么您的 Scrum master 不想将任务移出 sprint backlog？他不是 100% 接受 Scrum 的原则吗？（我认为这在 Scrum master 中令人担忧）

实施 Scrum 的大多数问题实际上只是 Scrum 流程暴露的团队或业务中的问题，例如 - 如果您的 sprint 被不可预见的支持问题抛出，这表明您没有分配足够的资源来支持

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T16:05:54.657

每个公司都不一样，每个项目都不一样，每个客户都不一样。

我认为在不适合该方法论的环境中过于密切地遵循 scrum（或任何其他方法论）很容易失败，因为在一个适合的项目中过于松散地遵循 scrum 也会失败。

最后，QA 站点中的一些通用答案无法替代对您自己的项目、公司、团队和客户的认真分析——没有神奇的公式，您必须自己做出决定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-10-31T13:16:39.713

**答：**您需要同时采用 Scrum 和 XP 才能获得 Scrum 的全部好处。

**原因：**

原因是基于多年从事 XP 和 scrum 的工作，特别是我从 Jeff Sutherland 的演讲中学到的东西（2009 年 5 月在伦敦的 ACCU）

*   **Scrum 是一种管理技术**——不一定是软件生产方法。有些人在其他领域使用 scrum，例如准备博物馆展览和经营宗教机构……因此它具有您需要的机制，可以让一个多学科团队以小增量适应性地交付工作。
*   **Scrum，最初包含了所有极限编程实践**。Jeff Sutherland 实际上说，*他从未见过一个 scrum 项目在不使用极端编程实践的情况下实现了对 scrum 衡量的更高级别的生产力。*
*   **Scrum 和 XP 都来自相同的背景**——面向对象的编程，特别是 Smalltalk。程序员开始开发 XP，而管理人员则创建了 scrum。您需要这两个方面 - 开发实践和管理实践。
*   **XP 实践被有意从 Scrum 中删除，以使其更易于采用。**- 实施 XP 实践很困难，而且很难让它们快速采用。Jeff 实际上说 Ken Schwaber 删除了 XP 实践以帮助人们开始使用 scrum。现在的危险是，这种最小的 scrum 已经成为人们所看到和期望的一切。
*   **许多非技术项目经理现在教 Scrum - 但他们没有教授 XP 的技能**
*   **并非所有开发人员都认为 XP 实践很容易采用**——它们可能很难推销，而且需要几个月而不是 2 天的时间来建立基本的 scrum。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-01-17T23:09:19.550

**Scrum 并不试图解决**软件开发中的技术问题。这只是一个小的管理过程。

*   Scrum的**优势在于它不会**因规定大量不必要或不相关的技术工作而妨碍工作。
*   Scrum的**弱点是它没有告诉你应该做哪些好的技术实践。**

**极限编程确实解决了软件开发中涉及的技术问题**，并且非常适合 scrum。Scrum 人没有强迫每个人都做 XP 技术实践的原因是，**实现这些技术实践需要大约 6 个月，而不是实现最基本的 scrum 需要 2 天。**

无论 scrum 是否“邪恶”——它肯定有缺点。**我们在 XP Days，伦敦，2009 年详细讨论了 XP 和 Scrum 之间的不安关系：http:** [//xpday-london.editme.com/WhereHasXpGone](http://xpday-london.editme.com/WhereHasXpGone)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-05T16:15:40.923

Scrum 并不是你所展示的真正问题。大多数开发方法都有效，即使是我们喜欢抨击它的瀑布，也有效。Scrum 确实让你更专注于重要的事情，但它不会阻止人们做出错误的决定，比如不真正遵循流程。

该系统的核心非常简单。

看到问题。定义做了什么。创建一系列可以帮助您完成的任务。估计这些任务。从中选择足够多的内容，以便您可以在短时间内完成某件事。完成任务。冲洗并重复。

好的，诚然，这些步骤被简化了，而且我还没有加入 scrum master 和客户。但关键是该框架只是一个基本的时间管理策略。如果您系统中的人员混乱且不善于完成工作，那么 Scrum 真的帮不了他们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-05T16:29:28.697

最好从书本上开始应用 Scrum，真正理解[敏捷宣言](http://agilemanifesto.org/)**的基本原则和价值观**，然后再进行定制，这样过程才不会变性。确保在每次迭代（Sprint）结束时进行[回顾，以“](http://www.pragprog.com/titles/dlret/agile-retrospectives)*检查和调整*”您的流程并*消除浪费*。

 **对于您的 Scrum Master，他可以跟踪从当前 Sprint 中删除的内容。此外，Sprint 的计划是基于之前的 Sprint 成就，而不是之前的计划。我不明白它的意思。

# asp.net - ASP.net ViewState - 即使禁用，某些视图状态仍然存在。为什么？

> ID：413558
> 
> 赞同：8
> 
> 时间：2009-01-05T15:57:46.483
> 
> 标签：asp.net, viewstate

即使在页面上，EnableViewState 属性被禁用，我仍然看到页面上存在一些视图状态：

```
"<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="VkBAB3n5LZYtY+nTzk1vEu1P/6QLf4qzFIKzpFRJe3DMf8UseUA/1RsO409HJX4QhkROSP0umoJvatjK/q+jXA==" />" 
```

我的问题是为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-05T16:12:32.707

是控制状态。

如果您真的想摆脱 viewstate 和 controlstate，您可以在页面的代码隐藏中或在代码隐藏派生自的任何类中使用此代码

```
class MyPage : Page {
    private class DummyPageStatePersister : PageStatePersister {
        public DummyPageStatePersister(Page p) : base(p) {}
        public override void Load() {}
        public override void Save() {}
    }
    private DummyPageStatePersister _PageStatePersister;
    protected override PageStatePersister PageStatePersister {
        get {
            if (_PageStatePersister == null)
                _PageStatePersister = new DummyPageStatePersister(this);
            return _PageStatePersister;
        }
    }

    // other stuff comes here
} 
```

但是，这样做时要非常小心，因为您违反了与控件的合同。MSDN 明确声明控制状态始终可用。然而，在实践中，它对我有用。

**编辑：** 由于我被否决了，我想再次指出：除非您确切知道自己在做什么，否则不要这样做。在我的例子中，几乎整个应用程序都是用客户端 javascript 编写的，并且在少数发生回发的情况下，我总是使用 Request.Form 集合来检索值。**如果您这样做，请不要将服务器端控件用于简单渲染之外的任何内容。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-05T15:59:41.393

这可能是使用 ControlState 的控件。任何具有控件状态的控件都将忽略您的 ViewState 设置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-05T16:06:54.560

这篇文章有点旧，但据我了解，大部分观点仍然有效：

1.  如果您想使用 ViewState，您的 ASPX 页面中必须有一个服务器端表单标记 ()。需要一个表单字段，以便包含 ViewState 信息的隐藏字段可以回发到服务器。而且，它必须是服务器端的表单，以便 ASP.NET 页面框架可以在服务器上执行页面时添加隐藏字段。
2.  **页面本身将 20 字节左右的信息保存到 ViewState 中，用于在回发时将 PostBack 数据和 ViewState 值分发到正确的控件。因此，即使为页面或应用程序禁用了 ViewState，您也可能会在 ViewState 中看到一些剩余字节。**
3.  如果页面没有回发，您可以通过省略服务器端标记从页面中消除 ViewState。

[http://msdn.microsoft.com/en-us/library/ms972427.aspx](http://msdn.microsoft.com/en-us/library/ms972427.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-05T19:32:14.053

如果您使用 ASP.NET 进行开发，这绝对是一篇关于[ViewState](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx)的精彩文章，请阅读它！

[ASP.NET ViewState Helper](http://www.binaryfortress.com/aspnet-viewstate-helper/)也是查看 ViewState 中正在发生的事情的好工具

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T19:22:00.923

控制状态可能是原因。控制状态不能被禁用。在 ASP.NET 2.0 中，控制工作所需的数据 (controlstate) 和其他数据 (viewstate) 之间存在区别

是的，如果没有 controlstate，某些控件将无法工作。如果您想知道是哪一个导致它或视图状态包含什么，请查看[视图状态查看器](http://www.codeproject.com/KB/viewstate/viewstate_viewer.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-30T07:23:48.183

实现**IPostBackEventHandler**的控件，如*Textbox、Checkbox 等*。即使在禁用视图状态后仍将保留状态。原因是在 Load Postback Data 阶段，这些控件将从 Posted back 表单中获取状态信息。

但是像*label*这样没有实现**IPostBackEventHandler**的控件将不会从回发的数据中获取任何状态信息，因此完全依赖于 viewstate 来维护状态。

# wpf - PrintWindow WPF / DirectX

> ID：413568
> 
> 赞同：5
> 
> 时间：2009-01-05T16:00:26.197
> 
> 标签：wpf, winapi, directx

任何人都知道一种可靠地拍摄 WPF 窗口快照的方法吗？PrintWindow api 适用于“标准”win32 窗口，但由于 WPF 使用 DirectX，PrintWindow 无法捕获图像[。](http://msdn.microsoft.com/en-us/library/ms535695.aspx)我认为需要获取与窗口关联的 DirectX 对象的前端缓冲区，但我不知道该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-05T16:03:33.380

我不确定这是否是您的意思，也不确定是否允许链接到我的博客，但这有[什么](http://www.grumpydev.com/2009/01/03/taking-wpf-screenshots/)用吗？它基本上使用 RenderTargetBitmap 来生成 JPG。您可以使用它来“截屏”整个窗口，然后打印。

如果这是违反规则的，请随时删除:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-19T06:37:14.373

此方法应该可以帮助您打印整个 WPF / XAML 窗口

```
private void PrintWindow(PrintDialog pdPrint, 
                         System.Windows.Window wWin, 
                         string sTitle, 
                         System.Windows.Thickness? thMargin)
    {
        Grid drawing_area = new Grid();
        drawing_area.Width = pdPrint.PrintableAreaWidth;
        drawing_area.Height = pdPrint.PrintableAreaHeight;

        Viewbox view_box = new Viewbox();
        drawing_area.Children.Add(view_box);
        view_box.HorizontalAlignment = System.Windows.HorizontalAlignment.Center;
        view_box.VerticalAlignment = System.Windows.VerticalAlignment.Center;

        if (thMargin == null)
        {
            view_box.Stretch = System.Windows.Media.Stretch.None;
        }
        else
        {

            view_box.Margin = thMargin.Value;
            view_box.Stretch = System.Windows.Media.Stretch.Uniform;
        }

        VisualBrush vis_br = new VisualBrush(wWin);

        System.Windows.Shapes.Rectangle win_rect = new System.Windows.Shapes.Rectangle();
        view_box.Child = win_rect;
        win_rect.Width = wWin.Width;
        win_rect.Height = wWin.Height;
        win_rect.Fill = vis_br;
        win_rect.Stroke = System.Windows.Media.Brushes.Black;
        win_rect.BitmapEffect = new System.Windows.Media.Effects.DropShadowBitmapEffect();

        // Arrange to produce output.
        Rect rect = new Rect(0, 0, pdPrint.PrintableAreaWidth, pdPrint.PrintableAreaHeight);
        drawing_area.Arrange(rect);

        // Print it.
        pdPrint.PrintVisual(drawing_area, sTitle);

    } 
```

问候肖恩坎贝尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T23:25:26.273

您可以使用 PrintDialog.PrintVisual() 方法。

MSDN 链接：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.printdialog.printvisual.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.printdialog.printvisual.aspx)

示例：[http ://www.thejoyofcode.com/Reason_9._Printing.aspx](http://www.thejoyofcode.com/Reason_9._Printing.aspx)

# html - 如何完全删除 HTML/css 中文本框的边距

> ID：413573
> 
> 赞同：2
> 
> 时间：2009-01-05T16:01:04.743
> 
> 标签：html, css, textbox, margins

我有以下 HTML

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
    <style>
    .box
    {
        border:solid black 1px;
        padding:0px;
        margin:0px;
    }
    </style>
</head>
<body>
    <form id="form1" runat="server">
        <input class="box" style="width:300px;" /><br />
        <input class="box" style="width:150px;" />
        <input class="box" style="width:150px;" /><br />
        <input class="box" style="width:100px;" />
        <input class="box" style="width:100px;" />
        <input class="box" style="width:100px;" />
    </form>
</body>
</html> 
```

这个想法是文本框应该在右侧完成像素完美。

我最终将在第 2 行和第 3 行添加间距以扩大宽度以进行补偿，但目前我想让这个简单的示例进行渲染。

那么**如何删除这些文本框的边距以便正确对齐？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-05T16:08:42.513

由于它们之间的空白，它们没有排队。

如果您要删除`<input>`元素之间的所有换行符和制表符，它将按您的意愿显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T16:04:16.437

我发现添加`float: left;`到 .box 可以满足您的要求。

```
.box {
    padding:0px;
    margin:0px;
    float: left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T16:03:36.657

您是在谈论正确证明所有文本框吗？

如果是这样，那不是边际问题。这只是将文本框放在包含元素中。也许 a 然后设置 text-align: right; div 上的 css 样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-31T09:16:30.537

边框不包含在宽度中，因此边框为 1px 且宽度为 150px 的框实际上将是 152 px 宽。

# javascript - 在 Opera 或 Firefox 中加载网站后，如何在网站上修补客户端 javascript？

> ID：413577
> 
> 赞同：4
> 
> 时间：2009-01-05T16:02:29.267
> 
> 标签：javascript, firefox, opera

我必须使用一个特定的网站来工作，这绝对是令人发指的，并且被所有必须使用它的人所鄙视。特别是，该站点的 Javascript 从根本上被破坏并且只能在 IE 中运行，这几乎使它成为我必须在首选浏览器之外使用的唯一站点。

所以，对于这个问题。如果我可以在加载网站后以“*做正确的事”的方式“****修补***”javascript ，那么我可以在没有 IE 的情况下使用该网站。

 *（*只是为了删除一些多余的答案：我已经尝试将两个浏览器都屏蔽为 IE，这没有效果，因为问题在于 javascript，而不是服务器上的浏览器检测。*）

我更喜欢适用于 Opera 的解决方案，尽管我不反对 Firefox 的答案。此外，我宁愿不必通过代理查看该网站，尽管我会接受这样的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-05T16:07:35.167

对于 Opera，您需要[User JavaScript](http://www.opera.com/browser/tutorials/userjs/)。类似于 Greasemonkey，但内置于 Opera。专为您所处的那种情况而设计：修复在 Opera 中损坏的网站...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-05T16:04:48.263

对于 Firefox，您可以使用[Greasemonkey](https://addons.mozilla.org/en-US/firefox/addon/748)插件来执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-05T16:06:18.337

您可能可以使用 Firefox 的[Greasemonkey](https://addons.mozilla.org/en-US/firefox/addon/748)插件来执行此操作。它可以让你编写 javascript 在他们的页面中运行，并且可能使用它在运行时做一个“补丁”。我以前从未编写过greasemonkey 脚本，所以我不知道让某些东西工作起来有多容易，但它可能值得一看。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-05T16:07:39.537

[Greasemonkey](https://addons.mozilla.org/en-US/firefox/addon/748)正是你想要的。[我已经广泛使用它入侵了一些网站，并且在www.greasespot.net](http://www.greasespot.net/)上有很多很好的例子。虽然这个页面是关于 Opera 的，但它有一些很好的例子也适用于 Firefox中的[Greasemonkey 。](http://www.opera.com/docs/userjs/examples/#greasemonkey)我还注意到[Greasemonkey 维基百科文章](http://en.wikipedia.org/wiki/Greasemonkey#Greasemonkey_compatibility_and_equivalents_for_other_browsers)也包含有关在其他浏览器中使用 Greasemonkey 或等效项的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-05T17:16:23.047

您还可以使用代理（我很久以前使用 Proxomitron，有更现代的等价物），它在页面到达浏览器之前动态更改页面......因此您可以删除所有原始 JavaScript，并添加自己的，通过这种方式，或使用 Greasemonkey 或用户脚本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T16:39:50.093

我不确定 GreaseMonkey 是否适合修补。GM 脚本在页面加载后运行，并且所有本机脚本都已运行，因此任何要破坏的东西都已经破坏了。

# java - 什么是最好的 Java OXM 库？

> ID：413597
> 
> 赞同：6
> 
> 时间：2009-01-05T16:07:17.163
> 
> 标签：java, oxm

尽管我已经做了一段时间的开发人员，但我很幸运能够避免使用 XML 做很多工作。所以现在我有一个项目，我必须与一些 Web 服务进行交互，并且想使用某种对象到 XML 映射解决方案。

我唯一知道的是JAXB。那是最好的搭配吗？还有其他建议吗？

一个问题 - 我被困在使用 Java 1.4 中，所以我无法对注释做任何事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2010-07-08T14:15:18.153

**JAXB 是最佳选择：**

*   [Java SE 6 中包含的公共 API](http://download.oracle.com/javase/6/docs/api/javax/xml/bind/package-summary.html)
*   JAX-WS（Web 服务）的绑定层
*   JAX-RS (Rest) 的绑定层
*   [可以保留 XML Infoset](http://bdoughan.blogspot.com/2010/09/jaxb-xml-infoset-preservation.html)
*   多种实现： [Metro](http://jaxb.java.net/)、[MOXy](http://www.eclipse.org/eclipselink/moxy.php)、[JaxMe](http://ws.apache.org/jaxme/)等

**[EclipseLink JAXB (MOXy)](http://www.eclipse.org/eclipselink/moxy.php)是最好的实现：**

MOXy 是一个带有扩展的 JAXB 实现

MOXy 有一个外部配置文件（基于带有扩展名的 JAXB 注释）：

*   [http://bdoughan.blogspot.com/2010/12/extending-jaxb-representing-annotations.html](http://bdoughan.blogspot.com/2010/12/extending-jaxb-representing-annotations.html)
*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/EclipseLink-OXM.XML](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/EclipseLink-OXM.XML)

具有基于 XPath 的映射，用于深度映射：

*   [http://bdoughan.blogspot.com/2010/07/xpath-based-mapping.html](http://bdoughan.blogspot.com/2010/07/xpath-based-mapping.html)
*   [http://bdoughan.blogspot.com/2011/03/map-to-element-based-on-attribute-value.html](http://bdoughan.blogspot.com/2011/03/map-to-element-based-on-attribute-value.html)
*   [http://bdoughan.blogspot.com/2010/09/xpath-based-mapping-geocode-example.html](http://bdoughan.blogspot.com/2010/09/xpath-based-mapping-geocode-example.html)

旨在处理 ORM 映射对象，包括对双向关系的支持：

*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/JPA](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/JPA)
*   [http://bdoughan.blogspot.com/2010/07/jpa-entities-to-xml-bidirectional.html](http://bdoughan.blogspot.com/2010/07/jpa-entities-to-xml-bidirectional.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-05T16:42:18.263

如果您使用 WSDL 调用 Web 服务，那么 JAXB 绝对是最佳选择。看看 wsimport，您将在 10 分钟内启动并运行。

我认为JAXB 2.0 不可能在Java 1.4 上出现。您可能需要改用 Axis：

```
java -cp axis-1.4.jar;commons-logging-1.1.jar;commons-discovery-0.2.jar;jaxrpc-1.1.jar;saaj-1.1.jar;wsdl4j-1.4.jar;activation-1.1.jar;mail-1.4.jar org.apache.axis.wsdl.WSDL2Java http://someurl?WSDL 
```

这将生成与 JAXB 类似的存根。

如果您没有 WSDL 或 XSD，您始终可以[生成一个](http://bitkickers.blogspot.com/2008/12/using-jaxb-without-schema.html).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-05T16:12:58.247

有[XStream](http://xstream.codehaus.org/)。我似乎记得我很久以前就用过它，而且很好。不能说我有足够的经验来推荐或反对它，但值得一试。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-11-19T10:32:32.033

JIBX - 以性能着称

JAXB2 - 易于使用

脚轮 - 易于使用

其他 - XMLBean、Xstream

# c# - SSIS 包线程安全吗？IE。可以并行调用吗？

> ID：413601
> 
> 赞同：-1
> 
> 时间：2009-01-05T16:07:34.950
> 
> 标签：c#, .net, ssis

默认情况下，SSIS 包是线程安全的吗？

它们可以并行调用吗？（一般来说）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-05T16:13:46.823

如果您将它们视为与数据库的连接，则它们尽可能地是线程安全的。我认为更关键的问题是当包裹碰到桌子时桌子会被锁定。

SSIS 包只能做它被告知要做的事情。如果您正在转换一个表，它可能会在操作生效时被锁定。如果它们不首先超时，这将迫使作业或多或少地串行。如果您正在处理数据，您可能会摆脱并行运行的东西。

所以你的问题的答案是“是的，但是”。底层数据访问将决定事情是否可以并行运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T16:20:11.647

是的，SSIS 包是线程安全的。您还可以通过多种方式控制并发：

*   可以将单个包设置为运行有限数量的线程。包属性“MaxConcurrentExecutables”控制它。

*   可以使用依赖项设置顺序运行的包。您可以在包内或从调用子包的主包中执行此操作。

*   MaxConcurrentThreads 属性可以在 DTExec.exe 的命令行上被覆盖

如果您需要减少锁定和争用问题，您可以设置事务隔离属性或编写带有 nolock 提示的数据库查询。显然，您需要密切关注任何潜在的并发或脏读问题。

您可以在运行包的数据库上使用分析器或 perfmon 来查找锁定问题的迹象。无需对数据库调优问题进行冗长的讨论，这本身就是一个相当大的话题，在闩锁和锁定等待统计数据中寻找大数字作为可能的瓶颈的迹象。

# django - 如何在 Django 序列化程序响应中包含额外数据？

> ID：413603
> 
> 赞同：5
> 
> 时间：2009-01-05T16:07:36.150
> 
> 标签：django, json, serialization

我正在尝试使用 Django 和 jQuery 进行实时搜索。我所做的是让 javascript 使用 getJSON 函数请求一些数据，然后我在 Django 中设置了一个视图，该视图返回由 Django 序列化程序自动生成的 JSON 响应。

这很好用，它返回一个带有 text/javascript 内容类型的 json 响应。为了避免发送所有数据，（很多我不需要）我这样做了：

`response.write(serializers.serialize("json", soknad_list, fields=('name', 'image', 'genre')))`

但是例如，'genre' 字段是一个 manyToMany 字段，那么是否可以从genre.all.0 中获取值而不仅仅是流派ID？

并且模型有一个功能`get_absolute _url`，是否可以将其包含在 JSON 响应中，如果可以，如何？

所以我想我的问题是，是否可以在 JSON 响应中包含原始字段数据以外的内容，如果没有，您将如何解决我的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-07T16:44:36.213

Django 的 JSON 序列化是基于 simplejson 的，你可以直接使用并随意扩展来处理任何类型的对象。所以你在这里主要有两个选择：要么手动构建一个包含相关数据的 dicts 列表并将其传递给 simplejson.dumps() （默认情况下支持字符串、列表、dicts 和数字），或者编写你自己的知道如何的 json 编码器序列化您的特定数据集。FWIW，这是一个（没有经过充分测试但到目前为止工作）Django模型感知json编码器：

```
from django.utils import simplejson
from django.utils import datetime_safe
from django.utils.functional import Promise
from django.utils.translation import force_unicode
from django.utils.encoding import smart_unicode
from django.core.serializers.json import DjangoJSONEncoder

class ModelJSONEncoder(DjangoJSONEncoder):
    """
    (simplejson) DjangoJSONEncoder subclass that knows how to encode fields.

    (adated from django.serializers, which, strangely, didn't
     factor out this part of the algorithm)
    """
    def handle_field(self, obj, field):
        return smart_unicode(getattr(obj, field.name), strings_only=True)

    def handle_fk_field(self, obj, field):
        related = getattr(obj, field.name)
        if related is not None:
            if field.rel.field_name == related._meta.pk.name:
                # Related to remote object via primary key
                related = related._get_pk_val()
            else:
                # Related to remote object via other field
                related = getattr(related, field.rel.field_name)
        return smart_unicode(related, strings_only=True)

    def handle_m2m_field(self, obj, field):
        if field.creates_table:
            return [
                smart_unicode(related._get_pk_val(), strings_only=True)
                for related
                in getattr(obj, field.name).iterator()
                ]

    def handle_model(self, obj):
        dic = {}
        for field in obj._meta.local_fields:
            if field.serialize:
                if field.rel is None:
                    dic[field.name] = self.handle_field(obj, field)
                else:
                    dic[field.name] = self.handle_fk_field(obj, field)
        for field in obj._meta.many_to_many:
            if field.serialize:
                dic[field.name] = self.handle_m2m_field(obj, field)
        return dic

    def default(self, obj):
        if isinstance(o, Promise):
            return force_unicode(o)

        if isinstance(obj, Model):
            return self.handle_model(obj)

        return super(ModelJSONEncoder, self).default(obj) 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T13:51:49.890

有一个方便的 django 第三方应用程序/序列化程序，可以让您包含额外的数据。它还允许您包含模型关系并排除字段列表。

可在 [http://code.google.com/p/wadofstuff/wiki/DjangoFullSerializers 获得](http://code.google.com/p/wadofstuff/wiki/DjangoFullSerializers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T01:02:34.873

我发现最简单的事情是根本不使用序列化程序。我不知道为什么我之前没有想到这一点，但我只是使用了一个通用的对象列表视图并将 mimetype 更改为 text/javascript 并制作了一个包含 html 模板的 JSON 模板。

非常简单，这样我就设法将我想要的所有数据放入 JSON 响应中。通过这种方式，您可以将可以添加到 html 模板的所有内容添加到 JSON 响应中，甚至可以分页。

我创建的视图的示例提取：

```
return object_list(request, queryset = object_list, 
  template_name = 'search/results.js', template_object_name = 'result',
  paginate_by = 12, mimetype = 'text/javascript') 
```

# c# - 回发后我看不到动态生成的 RadioButtonList 或 CheckBoxList 项目

> ID：413614
> 
> 赞同：1
> 
> 时间：2009-01-05T16:09:54.523
> 
> 标签：c#, .net, asp.net

**大家好，**

很明显，我更改了任何控件，然后回发 SaveViewState 方法保存更改并在回发后再次应用它们，请参阅以下代码通知，服务器端代码在我的代码中放入了一个脚本，就像这个 <% %>

```
switch (myQuestion.QuestionType)
{
        case 0:
        {
             rdlistAnswers.Items.Clear();
             foreach (sting item in myCollection)
             {
                  ListItem i = new ListItem();
                  i.Value = item;
                  i.Text = item;
                  rdlistAnswers.Items.Add(i);
             }
     **//the folowing line of code is not a comment, it's a tag for asp control
     //but I commeted it due to editing requirements**

     //<asp:RadioButtonList ID="rdlistAnswers" runat="server"</asp:RadioButtonList>

            break;
        }
        case 1:
        {
            cblistAnswers.Items.Clear();
            foreach (sting item in myCollection)
            {
                 ListItem i = new ListItem();
                 i.Value = item;
                 i.Text = item;
                 cblistAnswers.Items.Add(i);
            }

        <asp:CheckBoxList ID="cblistAnswers" runat="server" </asp:CheckBoxList>
        }
    } 
```

**现在**我可以看到我的列表已归档，但是当我选择一个项目并按下下一个按钮时，列表的 SelectedItem 属性仍然为空，**这是什么原因？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-05T16:17:38.533

尝试在 foreach 之后执行 rdlistAnswers.Databind() 和 cblistAnswers.Databind() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-06T09:25:56.350

尝试将该开关放在 if(!isPostback){...}

如果您不这样做，则可能是 myCollection 在回发时未正确填写，这将解释您丢失物品的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-14T07:53:34.747

**谢谢大家**

I found the reason, the code script placed in .aspx file is called "code render block", its executed during the render phase and after save view state phase so the changes done by this kind of code **just renderd but not saved**, as simple as that.

# c# - 可以快速调整大小的数组

> ID：413618
> 
> 赞同：15
> 
> 时间：2009-01-05T16:12:29.557
> 
> 标签：c#, arrays, resize, performance, arraylist

我正在寻找一种可以轻松添加项目而不会影响性能的数组数据类型。

*   系统。**数组**-`Redim Preserve`将整个 RAM 从旧的复制到新的，与现有元素的数量一样慢
*   System.Collections。**ArrayList** - 够好吗？
*   System.Collections。**IList** - 够好吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-05T16:28:20.023

简单总结一下数据结构：

**System.Collections.ArrayList**：无类型数据结构已过时。请改用 List(of t)。

**System.Collections.Generic.List(of t)**：这表示一个可调整大小的数组。这个数据结构在幕后使用了一个内部数组。只要底层数组没有被填充，将项目添加到 List 是 O(1)，否则它是 O(n+1) 来调整内部数组的大小并复制元素。

```
List<int> nums = new List<int>(3); // creates a resizable array
                                   // which can hold 3 elements

nums.Add(1);
// adds item in O(1). nums.Capacity = 3, nums.Count = 1

nums.Add(2);
// adds item in O(1). nums.Capacity = 3, nums.Count = 3

nums.Add(3);
// adds item in O(1). nums.Capacity = 3, nums.Count = 3

nums.Add(4);
// adds item in O(n). Lists doubles the size of our internal array, so
// nums.Capacity = 6, nums.count = 4 
```

添加项目仅在添加到列表末尾时才有效。在中间插入会强制数组将所有项目向前移动，这是一个 O(n) 操作。删除项目也是 O(n)，因为数组需要向后移动项目。

**System.Collections.Generic.LinkedList(of t)**：如果您不需要对列表中的项目进行随机或索引访问，例如您只计划添加项目并从头到尾迭代，那么 LinkedList 就是您的朋友。插入和删除是 O(1)，查找是 O(n)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-01-05T16:19:48.747

您应该为此使用 Generic List<> ( [System.Collections.Generic.List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx) )。[它以固定的摊销时间](https://stackoverflow.com/questions/200384/constant-amortized-time)运作。

它还与 Arrays 共享以下功能。

*   快速随机访问（您可以在 O(1) 中访问列表中的任何元素）
*   快速循环
*   在开头或中间插入和删除对象很慢（因为它必须复制整个列表相信）

如果您需要在开头或结尾快速插入和删除，请使用链表或队列

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-05T16:20:43.767

LinkedList< T> 结构对你有用吗？它（在某些情况下）不像直接数组那样直观，但非常快。

*   AddLast 追加到末尾
*   AddBefore/AddAfter 插入到列表中
*   AddFirst 追加到开头

但是，随机访问并不是那么快，因为您必须遍历结构才能访问您的项目......但是，它具有 .ToList() 和 .ToArray() 方法来获取列表/数组形式的结构副本所以对于读取访问，你可以在紧要关头做到这一点。插入的性能提高可能超过随机访问需求的性能降低，也可能不会。这将完全取决于您的情况。

还有这个参考资料可以帮助您确定正确的方法：

[何时在数组/数组列表上使用链表？](https://stackoverflow.com/questions/393556/when-to-use-a-linked-list-over-an-array-array-list)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T16:32:44.603

什么对你来说“足够好”？你到底想用那个数据结构做什么？

没有数组结构（即 O(n) 访问）允许在没有 O(n) 运行时的情况下插入中间；最后插入是 O(n) 最坏的情况，O(1) 摊销用于像 ArrayList 这样的自调整大小数组。

也许哈希表（在任何地方进行分摊的 O(1) 访问和插入，但对于插入来说是 O(n) 最坏的情况）或树（O(log(n)) 用于在任何地方进行访问和插入，保证）更适合。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-05T17:30:50.727

如果速度是您的问题，我看不出所选答案比使用原始数组有什么好处，尽管它会自行调整大小，但它使用与调整数组大小完全相同的机制（并且应该只需要一点时间) 除非你总是添加到最后，在这种情况下它应该做的事情更聪明一些，因为它一次分配一个块而不是一个元素。

如果您经常在集合的开头/中间添加附近并且不经常索引到中间/结尾，您可能需要链接列表。这将具有最快的插入时间并且将具有很长的迭代时间，它只是在索引方面很糟糕（例如从末尾查看第 3 个元素或第 72 个元素）。

# .net - 是否可以从 Thread.CurrentThread.CurrentCulture 获取 CSV 分隔符？（。网）

> ID：413623
> 
> 赞同：18
> 
> 时间：2009-01-05T16:12:54.080
> 
> 标签：.net, csv, culture

在小数点分隔符为 ,（逗号）的语言中，CSV（逗号分隔值文件格式）分隔符为 ; （分号）。我知道在 Windows 控制面板中的何处可以找到此配置，但我不知道如何在 .NET 应用程序中以编程方式找到它。

我猜 Thread.CurrentThread.CurrentCulture 有这些信息，但我在里面找不到。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-01-05T16:15:16.603

System.Globalization.CultureInfo.CurrentCulture.TextInfo.ListSeparator

是我知道的唯一方法。

# django - 有没有一种简单的方法可以使用 Django 在开发服务器中测试受 SSL 保护的网页？

> ID：413626
> 
> 赞同：5
> 
> 时间：2009-01-05T16:13:25.420
> 
> 标签：django, testing, ssl, security

我将 Django 用于我的网站，我想知道是否有解决方法来测试开发服务器中的安全页面。作为临时解决方法，我不会使用 HTTP 来检查开发服务器中的网页，我认为这不是正确的方法吗？你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-06T08:01:06.380

您可能会考虑`mod_wsgi`，因为它可用于开发、测试和部署。 `mod_wsgi`可以配置为检测您对 Python 代码所做的任何更改并自动重新启动，与开发服务器相同。

我倾向于在本地机器上进行大部分开发，但使用实际的参考实现服务器进行测试。它在 apache 下运行 mod_wsgi，带有自签名证书。**Graham Dumpleton**最近的详细文章可在此处获得：

[http://blog.dscpl.com.au/2008/12/using-modwsgi-when-developing-django.html](http://blog.dscpl.com.au/2008/12/using-modwsgi-when-developing-django.html "在开发 Django 站点时使用 mod_wsgi。")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T17:24:35.403

Django 开发服务器非常基础，仅用于本地测试。它不支持 ssl/https。您必须使用 Apache、NGINX 或其他支持 SSL 的 Web 服务器运行它才能进行测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-07-08T18:48:17.800

[这](http://www.ianlewis.org/en/testing-https-djangos-development-server)看起来很有帮助——使用 stunnel 将 HTTPS 请求路由到 django 开发服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-05T22:56:20.563

您现在可以使用[FakeSSLMiddleware](http://www.djangosnippets.org/snippets/2009/)

# java - Swing 大文件性能

> ID：413629
> 
> 赞同：9
> 
> 时间：2009-01-05T16:14:09.180
> 
> 标签：java, performance, swing

我们需要使用 swing 加载和显示大文件（富文本），大约 50mb。问题是渲染文件的性能非常差。我们尝试了 JTextPane 和 JEditorPane 都没有运气。

有人有这方面的经验，可以给我一些建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-05T16:54:46.350

我在这方面没有任何经验，但如果您真的需要加载大文件，我建议您使用 JTextPane/JEditorPane 进行某种延迟加载。

定义 JTextPane/JEditorPane 可以很好处理的限制（如 500KB 或 1MB）。您只需要将文件的一部分加载到具有此大小的控件中。

首先加载文件的第一个分区。

然后你需要与滚动容器交互，看看它是否已经到达文件当前块的结尾/开头。如果是这样，显示一个漂亮的等待光标并将上一个/下一个块加载到内存和文本控件中。

加载块是根据您在文件中的当前光标位置（偏移量）计算的。

加载块 = 偏移量 - 限制/2 到偏移量 + 限制/2

JTextPane/JEditorPane 上的文本在加载块时不得更改，否则用户感觉就像在文件的另一个位置。

这不是一个简单的解决方案，但如果您没有找到任何其他 3rd 方控件来执行此操作，我会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T21:20:09.157

您可以使用内存映射文件 I/O 在文件中创建一个“窗口”并让操作系统处理文件的读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T17:23:52.330

编写一个可以处理大型文档的高效 WYSIWYG 文本编辑器是一个相当困难的问题——当您进入大型书籍时，即使是 Word 也会出现问题。

Swing 是通用的，但您必须围绕它构建一个工具集，包括分别管理文档和分页。

您可能会查看 Open Office，您可以将 OO 文档编辑器屏幕直接嵌入到您的应用程序中。我相信它被称为OOBean ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T00:37:41.020

JTextPane/JEditorPane 甚至不能很好地处理 1mb 的文本（尤其是长行文本）。

您可以尝试 JEdit ( [StandaloneTextArea](http://www.jedit.org/api/org/gjt/sp/jedit/textarea/StandaloneTextArea.html) ) - 它比 Swing 文本组件快得多，但我怀疑它能否处理这么多文本。我尝试使用 45m 文件，当它被加载（约 25 秒）并且我可以向下滚动时，我开始在 1700m 堆中出现“内存不足”。

为了构建一个真正可扩展的解决方案，有两个明显的选择：

1.  使用分页。通过在页面中显示文本，您可以很好地使用标准 Swing。

2.  构建自定义文本渲染器。它可以像可滚动窗格一样简单，其中仅使用[BufferedReader](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)绘制可见部分以跳到文件中所需的行并读取有限数量的行来显示。我以前做过，这是一个可行的解决方案。当然，如果您需要“文本选择”功能，则需要做更多的工作。

对于非常大的文件，您可以构建一个索引文件，其中包含每行字符的偏移量，因此获取“偏移量”是按行号快速“[随机](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)访问”查找，读取文本是具有此偏移量的“[跳过”。](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#skip%28long%29)使用这种技术可以查看非常大的文件。

# sql-server - 为什么 SQL Server 2005 会随机截断空格？

> ID：413631
> 
> 赞同：1
> 
> 时间：2009-01-05T16:14:26.947
> 
> 标签：sql-server, tsql

以下 T/SQL：-

```
create table #temp(foo varchar(10))

insert into #temp select ''
insert into #temp select 'abc'
insert into #temp select ' '

select len(foo) from #temp where foo = '  '

drop table #temp 
```

返回两个 0，尽管标准意味着它不应该返回任何内容。此外，它返回两个空白行的长度，其中一个确实长度为 0，但另一个长度为 1，都报​​告为长度 0。

有人知道这里发生了什么吗？！

**更新：这似乎与 Microsoft 在**[此知识库文章](http://support.microsoft.com/kb/316626)中介绍的 ANSI_PADDING 数据库选项有关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-05T16:23:59.720

根据文档：

返回指定字符串表达式的字符数，不包括尾随空格。

您应该熟悉一个名为 DataLength 的类似函数。

```
create table #temp(foo varchar(10))

insert into #temp select ''
insert into #temp select 'abc'
insert into #temp select ' '

select len(foo), DataLength(foo) from #temp where foo = '  '

drop table #temp 
```

出于比较目的，也删除了尾随空格。您可以通过将数据转换为 varbinary 并以这种方式进行比较来适应这一点。如果您这样做，我将不理会原始比较（出于可分析性的原因）。

```
create table #temp(foo varchar(10))

insert into #temp select ''
insert into #temp select 'abc'
insert into #temp select ' '

select len(foo), DataLength(foo) 
from    #temp 
where   foo = ' '
        and Convert(varbinary(8), foo) = Convert(VarBinary(8), ' ')

drop table #temp 
```

# windows-vista - 如何使用 UAC 在 Vista 中获取文件的实际路径？

> ID：413643
> 
> 赞同：1
> 
> 时间：2009-01-05T16:18:13.197
> 
> 标签：windows-vista, path, uac, createfile

我正在调用 CreateFile() 在 Program Data 目录中创建一个文件。我正在使用 SHGetSpecialFolderPath() 来获取目录名称。

我有一个 Vista 用户，其 CreateFile() 返回错误 5（拒绝访问）。如果我知道 CreateFile() 实际尝试创建文件的位置会有所帮助，这样我们就可以检查他的文件夹权限。Vista (UAC) 的问题是，它没有尝试在我传入的目录中创建文件。它也可能在 VirtualStore 目录中。另一个令人困惑的原因是该用户是德国人，尽管 SHGetSpecialFolderPath() 返回“C:\Program Data\blah blah”作为路径，但我认为这实际上不是路径所在的位置。我认为 German Vista 使用德语单词来表示“程序数据”。我希望能够告诉用户“这是我们尝试创建文件的确切路径。检查您对此文件夹的权限。”

我知道您可以从打开的文件句柄中获取路径，但在这种情况下 CreateFile() 失败，所以我没有打开的句柄。如何让 Vista 告诉我它试图创建文件的实际路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-05T17:52:24.020

启动进程监视器并观察它的作用： [http ://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T17:13:07.627

如果使用 UAC，使用的路径不是您想要的，那么重定向是有效的。为确保不会发生重定向，请向您的应用程序添加一个[清单](http://channel9.msdn.com/posts/jmazner/How-To-Tell-Vistas-UAC-What-Privelege-Level-Your-App-Requires/)，该清单向 Vista 表明您的应用程序已正确编码并了解访问限制（即，如果您的应用程序不写入，则不要写入 HKLM 或程序文件夹） '不需要管理员权限即可运行）。

但是您的应用程序应该能够写入 APPDATA 文件夹（如果那是您真正使用的）。

确保您使用的是 CSIDL_APPDATA 而不是 CSIDL_COMMON_APPDATA（后者只能通过管理员权限访问）。

要找到真正的路径（您期望的路径），请告诉用户在资源管理器栏中键入 %APPDATA%（或按 Windows+R，然后键入 %APPDATA%，回车）。这将打开该文件夹上的资源管理器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T17:40:02.843

我的理解是，Vista 使用 ProgramData 来编写试图写入 C:\Program Files 中但失败的文件，因为除非您以管理员身份运行应用程序，否则您无法在程序文件中写入。也许您应该尝试将文件保存到当前用户下的 AppData 文件夹中。

# .net - 如何区分/合并对部署项目文件的更改

> ID：413649
> 
> 赞同：1
> 
> 时间：2009-01-05T16:20:08.543
> 
> 标签：.net, version-control, deployment, merge, projects-and-solutions

我目前正在使用 CVS（不是我的选择）并且有几个分支。我正在尝试合并两个分支，但是部署项目文件存在冲突，如果不花费大量时间就无法解决。对项目文件的微小更改会导致对该项目文件的巨大更改-我猜是由于 GUID 更改（更改项目文件，获取干净的副本并进行相同的更改似乎会产生两个完全不同的项目文件）

所以我需要确定所做的所有实际更改，以便我可以手动复制它们（因为更改日志不够详细）。

是否有任何项目文件差异工具可以考虑更改的 GUID/位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-06T20:20:58.230

您可以先使用外部差异工具解决差异，然后报告真正的差异（并忽略不同位置的相同 GUID）。

例如，[**WinMerge**](http://winmerge.org/)能够检测两个文件之间不同位置的相似行。

[位置窗格](http://winmerge.org/docs/manual/CompareFiles.html#Compare_files_window)可以指示移动的不同块。
移动的块是位于不同位置的差异的两侧。移动的块由 Moved 和 Selected Moved 不同的颜色（可在 WinMerge 选项中配置）以及连接它们在左右位置栏中的位置的线表示。

[![替代文字](https://i.stack.imgur.com/Rz1KQ.png)](https://i.stack.imgur.com/Rz1KQ.png)
[（来源：[winmerge.org](http://winmerge.org/docs/manual/screenshots/locpane_moved_diffs.png)）]

如果您忽略那些移动的块（这是默认设置），您可以专注于实际差异并报告您想要的修改。

* * *

如果这些 GUID 不断变化，您可以定义一个正则表达式模式，帮助 WinMerge 忽略这些 GUID（就像默认情况下它可以忽略所有空白一样），帮助它专注于文档的其余部分。

# html - 为什么浏览器中的 150 + 150 不等于 300？

> ID：413653
> 
> 赞同：2
> 
> 时间：2009-01-05T16:21:29.087
> 
> 标签：html, css, math, textbox

我有以下 HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <style>
    .box {
        border: solid black 1px;
        padding: 0px;
        margin: 0px;
    }
    </style>
</head>
<body>
    <form id="form1" runat="server">
        <input class="box" style="width:300px;" /><br /><!--CRLF for clarity only-->
        <input class="box" style="width:150px;" /><!--CRLF for clarity only-->
        <input class="box" style="width:150px;" /><!--CRLF for clarity only-->
    </form>
</body>
</html> 
```

渲染时，第二行文本框似乎累计长于第一行上的 1。尽管通过样式属性明确设置了宽度

**为什么会发生这种情况，我可以避免吗？**

注意：这似乎在 FF3 和 IE7 中的工作方式相同

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-01-05T16:23:49.130

文本框上有一个不包含在宽度中的边框。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-05T16:36:06.607

jhunter 是正确的，我要补充一点，您需要 Firebug for FireFox（它是免费的）。安装后，您本可以自己快速解决这个问题。检查您感兴趣的元素并查看“布局”选项卡。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-05T16:29:27.167

事实上，你的盒子的宽度都是+2作为左右边框（1px）意味着每个盒子有2个额外的像素。所以总的来说你是+6。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-05T16:33:30.373

我建议阅读 CSS Mastery，它解释了不同浏览器框模型的许多差异以及它们如何影响不同浏览器中的布局和宽度。

[精通 CSS](https://rads.stackoverflow.com/amzn/click/com/1590596145)

# emacs - 从 Emacs 生成代码

> ID：413655
> 
> 赞同：4
> 
> 时间：2009-01-05T16:21:35.670
> 
> 标签：emacs, code-generation

如何在emacs中快速编写以下代码？

```
\newcommand{\cA}{\mathcal A}
\newcommand{\cB}{\mathcal B}
\newcommand{\cC}{\mathcal C}
...
...
\newcommand{\cY}{\mathcal Y}
\newcommand{\cZ}{\mathcal Z} 
```

有没有比写作更快的方法

```
A
B
C
D
.
.
.
Y
Z 
```

然后在每一行做宏？（将 A 更改为 \newcommand{\cA}{\mathcal A}）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-05T17:03:43.870

我同意键盘宏将最快获得结果。

更有趣的是程序化方法：

```
(loop 
      for n from (string-to-char "A") to (string-to-char "Z")
      for c = (char-to-string n)
      do (insert (concat "\\newcommand{\\c" c "}{\\mathcal " c "}\n"))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-05T17:20:18.063

一般来说，当你第一次遇到这种问题时，你会使用键盘宏，正如 JB 已经说过的那样。

第二次，查看 Steve Yegge 的这篇非常有趣的文章：http://steve-yegge.blogspot.com/2006/06/shiny-and-new-emacs-22.html [，](http://steve-yegge.blogspot.com/2006/06/shiny-and-new-emacs-22.html)其中包含的问题解决方案与你的。

为了您的方便和我自己的照明，我实际上继续进行了测试：

我会从

```
一种
...
一种

```

26次

并做一个

Mx 替换正则表达式

```
一种
\\newcommand{\\c\,(string (+ ?A \#))}{\\mathcal \,(string (+ ?A \#))}

```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-05T16:38:39.333

A到Z只有26行。恕我直言，与自然使用键盘宏相比，您会浪费更多时间自动生成。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-05T17:35:15.490

这取决于你的背景。我只需输入`M-!`：

```
perl -e"print map {q(\newcommand{\c).$_.q(}{\mathcal ).qq($_}\n)} A..Z 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-06T12:01:51.810

你知道[矩形选择](https://stackoverflow.com/questions/58872/rectangle-functions-in-emacs)吗？

还有`string-rectangle`：

*   将点（光标）放在文本的开头，标记 ( `C-SPC`)
*   将点放在最后一行的开头
*   类型`M-x string-rectangle`
*   输入一个字符串 (\newcommand{\c)

这将在标记后的每一行之前插入该字符串。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-09T07:16:50.027

我没有足够的业力或任何评论，但我想稍微改进一下HD的风格。

这是原文：

```
(loop 
  for n from (string-to-char "A") to (string-to-char "Z")
  for c = (char-to-string n)
  do (insert (concat "\\newcommand{\\c" c "}{\\mathcal " c "}\n"))) 
```

首先，Emacs Lisp 有字符的阅读器语法。而不是`(string-to-char "X")`，你可以只写`?X`。然后，您可以使用 printf 样式`format`代替`char-to-string`and`concat`来生成最终结果：

```
(loop for n from ?A to ?Z
      do (insert (format "\\newcommand{\\c%s}{\\mathcal %s}\n" n n))) 
```

现在它已经足够简洁了，无需考虑`M-:`提示即可输入。

我还要指出 TeX 也有宏，如果这确实是 TeX。

编辑：Joe Casadonte 的另一个风格建议；`(incf foo)`比打字容易得多`(setq foo (+ foo 1))`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-05T17:17:58.100

或者如果你想一次做一个互动的方式

```
(defun somefun(inputval)
  (interactive "sInputVal: ")
  (insert ( format "\\newcommand{\\c%s}{\\mathcal %s}" inputval inputval) )
) 
```

每次需要文本时，只需 eval 和 Mx somefun

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-25T19:03:46.007

不完全是答案。

对于不使用 emacs 或 vim 的人，我想补充一点，您可以打开 Excel 并使用其自动填充功能和文本连接功能来生成此类代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-05T17:11:18.517

我比我的更喜欢 HD 的循环，但这里有另一种更通用的方法：

```
(defun my-append (str)
  "Substitute A-Z in STR and insert into current buffer.

Looks for '--HERE--' (without quotes) in string STR, substitutes the
letters A-Z in the string and then inserts the resulting string into
the current buffer."
  (interactive "sInput String: ")
  (let ((lcv 0)
        letter newstr)
    (while (< lcv 26)
      (setq letter (+ ?A lcv))

      (insert (replace-regexp-in-string "--HERE--" (char-to-string letter) str t t) "\n")

      (setq lcv (+ lcv 1))))) 
```

将两者结合起来应该不会太难。

# c# - 创建像 Windows Messenger 或 AVG 这样的弹出式气球

> ID：413656
> 
> 赞同：10
> 
> 时间：2009-01-05T16:21:41.520
> 
> 标签：c#, .net, popup-balloons

如何创建一个弹出气球，就像您从 Windows Messenger 或 AVG 或 Norton 或其他人看到的那样？

我希望它显示信息，然后在几秒钟后滑开。

**编辑：它需要像 Form.ShowDialog() 一样阻塞，**因为程序在显示通知后退出

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-01-05T16:37:17.947

您可以使用属于 .NET 2.0 System.Windows.Forms 的 notifyIcon 控件。这允许您在系统托盘中放置应用程序的图标。然后，您可以对其调用 ShowBalloonTip(int timeOut) 方法。但是请务必先在 notifyIcon 上设置文本和图标属性以使其正常工作。小代码示例：

```
private void button1_Click(object sender, EventArgs e)
        {
            this.notifyIcon1.BalloonTipText = "Whatever";
            this.notifyIcon1.BalloonTipTitle = "Title";
            this.notifyIcon1.Icon = new Icon("icon.ico");
            this.notifyIcon1.Visible = true;
            this.notifyIcon1.ShowBalloonTip(3);
        } 
```

编辑：好的，所以 notifyIcon 不适合你。我的第二个建议是为此创建自己的控件。实际上，我会使用表格。一个简单的表单，没有边框，没有控制框，只运行一个计时器，因此您可以设置淡入/淡出的不透明度。然后，您可以使用 Rectangle Screen.PrimaryScreen.WorkingArea 轻松获取屏幕的右下角。然后只需在该位置显示您的表格。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-05T17:23:18.667

不要创建模态（阻塞）气球。请。这些 UI 设计的很大一部分是它们*不是*对话框：它们是临时的、潜在*的非交互*元素，旨在向用户提供附带信息，*而*不必中断他们的工作流程。一个窃取焦点并阻止用户输入的气球充其量只会令人恼火——如果你*需要*一个对话框，那么就使用一个对话框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T16:46:07.210

.NET 1.1 [Visual Basic Power Pack](http://msdn.microsoft.com/en-us/library/aa289491.aspx)有一个烤面包机控件。

# sharepoint - SharePoint 工作流的简单批准/拒绝表单？

> ID：413657
> 
> 赞同：0
> 
> 时间：2009-01-05T16:22:23.483
> 
> 标签：sharepoint, workflow

我目前正在（在 Visual Studio 中）在 SharePoint 中创建一个简单的审批工作流，以便在用户批准项目后我可以执行一些自定义代码。但是，似乎当我没有指定要使用的批准表单时，SharePoint 只是选择了一个带有“完成任务”按钮但没有“拒绝”按钮的默认表单。

我可以在我的代码中引用某种默认的批准/拒绝表单来为用户提供两种选择，而不是编写我自己的页面或从网络复制/粘贴？

PS 我想远离 InfoPath。这是一个非常简单的工作流程，不应该花费太多时间，而且我觉得走 InfoPath 路线所花费的时间比它的价值要多得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-06T15:33:12.473

据我所知，没有这样的内置形式。您自己的批准表单的选择是 InfoPath 或自定义 ASPX。从个人经验来看，使用任何一种方法都需要比实际需要更多的精力来开发，但如果 InfoPath 可用，请使用它，因为在我看来它要快得多，而且我相信它还有一个额外的优势，即可以在 Outlook 中编辑任务（ 2007）。

# ruby-on-rails - 数据库配置未指定适配器

> ID：413659
> 
> 赞同：62
> 
> 时间：2009-01-05T16:22:56.963
> 
> 标签：ruby-on-rails, ruby

当我尝试连接到 mysql 数据库时出现此错误。问题是该应用程序工作了数周，然后我随机收到此消息。当我收到此错误消息时，应用程序无法重新连接到数据库，直到我重新启动它。

我正在使用配置文件连接数据库，并且指定了适配器...数据库配置不是在运行时生成的。

你知道发生了什么吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-08T00:50:26.227

当我尝试运行命令行脚本（我们在这里说“my_script”）时，发生了同样的错误。原因是：

1.  那里只有生产环境。
2.  我错过了为命令行设置 RAILS_ENV 。

因此，以下是我的解决方案：

> $ RAILS_ENV=生产 my_script

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-11-20T01:07:58.700

我刚遇到这个问题，它是由我的 configration.yml 中的拼写错误引起的。

我最初有这个：

```
production:
  adapter:mysql 
```

当我打算拥有这个时：

```
production:
  adapter: mysql 
```

adapter: 和 mysql 之间的那一点空间会有所不同。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-26T22:32:42.780

另一个可能的原因：

在 Rails 3.2.x 中，`establish_connection`从环境中设置了一个默认参数：

从[connection_specification.rb](https://github.com/rails/rails/blob/v3.2.8/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb#L127)：

```
def self.establish_connection(spec = ENV["DATABASE_URL"])
  resolver = ConnectionSpecification::Resolver.new spec, configurations
  spec = resolver.spec 
```

工作方式`ConnectionSpecification::Resolver`取决于`ENV['DATABASE_URL']`给出一个`nil`if not set 。（通常，它会类似于`'postgres://...'`）。

所以，如果你碰巧错误配置`DATABASE_URL`了这样`ENV['DATABASE_URL'] == ''`，那会给你`database configuration does not specify adapter`。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-12T03:27:16.607

I had this error when I mistakenly started rails server with

> sudo rails s -e "Production" -p 80

and I should have started rails with

> sudo rails s -e "production" -p 80

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-06-17T19:01:41.687

我发现了另一件事可能导致此问题：使用`&`and来“混合”另一个 YAML 节点`*`。

我最初是在做类似以下的事情来促进本地的、每个开发的、Git 忽略的配置文件：

[http://blog.lathi.net/articles/2006/03/02/config-database-yml-goodness-for-teams](http://blog.lathi.net/articles/2006/03/02/config-database-yml-goodness-for-teams)

但是，经过一些调试，我发现`establish_connection`由于某种原因，它只使用混合的键值对而不是主要的键值对来调用。即`adapter`,`host`和`database`并没有被传入。我不知道为什么，这曾经对我有用。

无论如何，我现在没有在另一个 YAML 节点中混合，而是将整个`development`和`test`散列放在本地配置文件中，并且`establish_connection`再次被正确调用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-03-17T01:40:36.480

对我来说，这个命令解决了这个问题。

rake db:migrate RAILS_ENV=production

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-20T14:13:03.923

通过输入以下命令，我得到了同样的错误：

```
db:migrate RAILS_ENV=product 
```

应该是：

```
db:migrate RAILS_ENV=production 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-01-05T17:36:12.133

我发现了一些线索，这可能与旧库 (ActiveRecord) 或 gem 版本有关。例如，[即使应用程序的其余部分看起来没问题](http://wrath.rubyonrails.org/pipermail/rails/2006-January/009470.html)（升级后），fixture 也会出现问题，或者[这个 trac ticket](http://dev.rubyonrails.org/browser/trunk/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb?rev=7771)，它“阻止 gems 需要来自旧 Active Record gem 的适配器”。不过，这两个都是旧的，但可能值得确保您的宝石是最新的（如果可能的话）。

您是否有机会使用本机 Rails MySQL 适配器？现在这在rails 下已被弃用，但可以想象它仍在蹒跚前行。

我也快速浏览了一下`connection_specification.rb`，这就是这个错误的来源，我最好的猜测是重新连接失败......但是为什么（因为当你第一次启动应用程序时它显然没问题）？您是否正在做一些疯狂的事情，例如调用`ActiveRecord::Base.establish_connection`您的应用程序控制器（或其他地方）？

或者可能是这样的：当连接断开时，在深夜从 cron 调用脚本运行程序。不幸的是，运行器被调用时使用了不正确的`RAILS_ENV`. 因此，从 中读取了错误的节`database.yml`，并且该节包含无效的`adapter:`?

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-02-04T07:29:23.450

如果您在使用 Capistrano 进行部署时遇到此错误。确保您通过设置正确的 RAILS_ENV

```
set :rails_env, 'production' 
```

例如，我没有为 Capistrano 分段部署配置显式设置 Rails 环境。因此 Capistrano 使用 'staging' 作为 RAILS_ENV，导致上述错误。在 staging.rb 文件中将其设置为如上所述的生产解决了该问题。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-02-24T05:19:05.713

请记住，RAILS_ENV=staging 将在您的 database.yml 中查找暂存规范，就像设置 RAILS_ENV=production 将在 database.yml 文件中查找生产规范一样。

为您使用的每个 Rails 环境提供数据库配置，如下所示，例如

```
bundle exec cap staging deploy

production:
  adapter: mysql2
  encoding: utf8
  database: rails
  username: rails
  password: pass
  host: 127.0.0.1
  port: 3306
  pool: 5
  timeout: 5000

staging:
  adapter: mysql2
  encoding: utf8
  database: rails
  username: rails
  password: pass
  host: 127.0.0.1
  port: 3306
  pool: 5
  timeout: 5000 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-01-05T17:35:54.023

请记住为 mysql 使用基于 C 的 ruby​​ gem。基于红宝石的生产不稳定。

尝试安装 gem

```
gem install mysql 
```

请记住将**libmySQL.dll**复制到 ruby​​ bin 目录中。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-03-14T19:36:20.020

我们的一个较旧的应用程序遇到了这个问题。有人创建了一个精品命名环境，即使将 RAIL_ENV 设置为生产环境，它也在寻找名为 的数据库配置`legacy_<RAIL_ENV>`，因此我必须创建一个名为的数据库环境才能使`legacy_production`该应用程序正常工作。

如果您正在维护其他人的应用程序，我会寻找该应用程序的`database.yml`工作副本，也许它有一些奇怪的命名配置。你可以搜索你的代码库，`establish_connection`看看它是否定义了一些奇怪的变体。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-08-10T15:40:02.547

我在另一个问题上遇到了这个错误；我已经两次指定了“开发”，而根本没有指定“测试”。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-08-31T04:22:31.580

互联网上有很多糟糕的教程显示 yaml 文件，如下所示：

```
development:
encoding: utf
database: dbname
...etc 
```

YAML 文件区分大小写，每个给定 db-type 属性的内部内容需要两个空格。像这样：

```
development:
  encoding: utf
  database: dbname
  ...etc 
```

* * *

更新：我今天***再次***收到此错误。当我的应用程序运行 Rails 3.2.6 时，我的 VPS 服务器已经安装了 Rails 3.2.8。

一定要检查你的 Gemfile 和你的 database.yml 文件（当然）。这里的问题很清楚——Rails 没有与您的数据库通信，具体是由于适配器（又名 gem）

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-08-03T05:22:30.733

由于“多数据库支持问题”，我遇到了这个问题。在我`app/model`的文件夹中，有一个文件定义了冗余数据库连接：

```
class CacheCleanerActiveRecord < ActiveRecord::Base
  establish_connection "cache_cleaner_#{Rails.env}"
  self.abstract_class = true
end 
```

但是在我的 database.yml 中找不到这个数据库（因为它根本没有使用）。

所以解决方案很简单：删除这个文件，一切都很好！

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-06-03T04:55:31.050

您可能会遇到如下错误：

```
RAILS_ENV= test 
```

等号后面不允许有空格，改为：

```
RAILS_ENV=test 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-07-20T02:55:54.527

这发生在我身上，最后我发现它`RAILS_ENV`是区分大小写的，在我的环境中我设置 `RAILS_ENV=DEVELOPMENT`了，这是错误的，的值`RAILS_ENV`必须是**小写**的。

```
$ RAILS_ENV=DEVELOPMENT rails server webrick
=> Booting WEBrick
=> Rails 4.2.5 application starting in DEVELOPMENT on http://localhost:3000
=> Run `rails server -h` for more startup options
=> Ctrl-C to shutdown server
config.eager_load is set to nil. Please update your config/environments/*.rb files accordingly:

  * development - set it to false
  * test - set it to false (unless you use a tool that preloads your test environment)
  * production - set it to true

Exiting
/home/fangxing/.rvm/gems/ruby-2.3.0/gems/activerecord-4.2.5/lib/active_record/connection_adapters/connection_specification.rb:248:in `resolve_symbol_c
onnection': 'DEVELOPMENT' database is not configured. Available: ["default", "development", "test", "production"] (ActiveRecord::AdapterNotSpecified)
        from /home/fangxing/.rvm/gems/ruby-2.3.0/gems/activerecord-4.2.5/lib/active_record/connection_adapters/connection_specification.rb:211:in `res
olve_connection'

$ RAILS_ENV=development rails server webrick
RubyDep: WARNING: Your Ruby is outdated/buggy. (To disable warnings, set RUBY_DEP_GEM_SILENCE_WARNINGS=1)
RubyDep: WARNING: Your Ruby is: 2.3.0 (buggy). Recommendation: install 2.3.1.
=> Booting WEBrick
=> Rails 4.2.5 application starting in development on http://localhost:3000
=> Run `rails server -h` for more startup options
=> Ctrl-C to shutdown server
[2016-07-20 16:41:09] INFO  WEBrick 1.3.1
[2016-07-20 16:41:09] INFO  ruby 2.3.0 (2015-12-25) [x86_64-linux]
[2016-07-20 16:41:09] INFO  WEBrick::HTTPServer#start: pid=19881 port=3000 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-05-07T14:35:13.417

您需要在运行服务器或命令时指定环境，因为您的 database.yml 文件可能只有生产适配器，而简单地运行 rake db:migrate 例如将环境变量作为开发。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-10-17T17:13:38.807

称呼`rake assets:precompile:all`

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-09-22T15:30:09.770

`rails -e "production"`没关系

只`rails -e production`返回错误

```
database configuration does not specify adapter (ActiveRecord::AdapterNotSpecified) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-10-18T00:55:38.997

这可能不是最有可能导致此错误的问题，但这里只是以防万一。

我的问题是我正在`Hash`使用符号作为键来构建数据库设置，然后使用`#to_yaml`to对其进行序列化`database.yaml`。ActiveRecord 期望环境名称为`Strings`，而不是`Symbols`，因此在读取生成的文件时它没有获取数据库设置。我通过在哈希中使用字符串键来修复它。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-12-08T04:09:20.307

对于 Rails4，注释该行`fetch(:default_env).merge!(rails_env: 'production')`并`production.rb`添加`set :rails_env, :production`修复它。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-12-01T12:08:03.490

为了完整起见，我刚刚收到此错误，因为我本机创建了一个参数化的 Rails 运行程序脚本，该脚本接受一个电子邮件地址，并命名了命令行选项`-e`——这当然是 Rails 运行程序用于环境的选项。所以它试图找到一个与电子邮件地址匹配的环境配置！

幸运的是，就在`ActiveRecord`标题中提到的错误之前，它给了我一条错误消息，帮助我了解了问题的实质：

```
You did not specify how you would like Rails to report deprecation notices for your test@example.com environment, please set config.active_support.deprecation to :log, :notify or :stderr at config/environments/test@example.com.rb 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-11-12T12:34:35.073

从 Rails 4 升级到 5 时出现此错误消息。我在打电话

```
establish_connection "myconnection" 
```

`"myconnection"`我的`database.yml`. 但是，显然不再支持将此参数作为字符串传递。使用符号代替了这个问题。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-08-02T15:19:52.163

检查`adapter`我的拼写`adaptor`并得到这个错误。

# svn - 日食 3.2；Subversion 1.5：兼容 Subclipse 还是 Subversive 版本？

> ID：413664
> 
> 赞同：1
> 
> 时间：2009-01-05T16:26:15.410
> 
> 标签：svn, subclipse, subversive, eclipse-3.2

我正在尝试使用 Eclipse 3.2.2 中的集成插件访问 Subversion 存储库。

（好的，所以我使用的是[EasyEclipse](http://www.easyeclipse.org/site/distributions/server-java.html) Server Java，它比每次我必须设置新的开发环境时都设置所有这些插件更容易......）

如果没有解决方案，我会尽快从头开始设置环境。（我猜答案是否定的……）

所以我的问题是，是否有任何版本的 Subclipse 或 Subversive 可以与 Eclipse 3.2 和 Subversion 1.5 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-05T17:01:39.397

根据 Subclipse[网站](http://subclipse.tigris.org/)，Subclipse 1.4.7（最新）用于 SVN 1.5 和 Eclipse 3.2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T16:39:01.297

我在 eclipse 3.2 中的 1.5 SVN 存储库上使用 Subclipse 1.4.6 没有任何问题。*

希望这有助于 1.4 客户端和 1.5 存储库存在一些问题，我实际上已经看到人们由于 Subclipse 混淆而破坏了工作空间，所以要小心:)

# c# - 如何将 TextBox 控件绑定到 StringBuilder 实例？

> ID：413675
> 
> 赞同：8
> 
> 时间：2009-01-05T16:30:34.373
> 
> 标签：c#, .net, string, textbox, stringbuilder

我想要几个文本框来响应底层字符串的变化。因此，如果我要更改字符串的内容，所有这些文本框也会更改其内容。

现在，我不能使用 String 类型，因为它是不可变的。所以我选择了 StringBuilder。但是 TextBox 对象的 Text 属性只接受 String。

有没有一种简单的方法可以将 StringBuilder 对象“绑定”到 TextBox 的 Text 属性？

非常感谢！

PS：TextBox 目前是 WPF。但是我可能会因为 Mono 而切换到 Windows 窗体。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-05T16:33:03.883

您总是可以公开一个 getter 返回 Stringbuilder 的 ToString() 的属性。然后表单可以绑定到这个属性。

```
private StringBuilder _myStringBuilder;

public string MyText
{
  get { return _myStringBuilder.ToString(); }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-09T16:37:16.400

这是我用来在 WPF 中将 StringBuilder 绑定到 TextBox 的内容：

```
public class BindableStringBuilder : INotifyPropertyChanged
{
    private readonly StringBuilder _builder = new StringBuilder();

    private EventHandler<EventArgs> TextChanged;

    public string Text
    {
        get { return _builder.ToString(); }
    }

    public int Count
    {
        get { return _builder.Length; }
    }

    public void Append(string text)
    {
        _builder.Append(text);
        if (TextChanged != null)
            TextChanged(this, null);
        RaisePropertyChanged(() => Text);
    }

    public void AppendLine(string text)
    {
        _builder.AppendLine(text);
        if (TextChanged != null)
            TextChanged(this, null);
        RaisePropertyChanged(() => Text);
    }

    public void Clear()
    {
        _builder.Clear();
        if (TextChanged != null)
            TextChanged(this, null);
        RaisePropertyChanged(() => Text);
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    public void RaisePropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }

    public void RaisePropertyChanged<T>(Expression<Func<T>> propertyExpression)
    {
        if (propertyExpression == null)
        {
            return;
        }

        var handler = PropertyChanged;

        if (handler != null)
        {
            var body = propertyExpression.Body as MemberExpression;
            if (body != null)
                handler(this, new PropertyChangedEventArgs(body.Member.Name));
        }
    }

    #endregion

} 
```

在视图模型中：

```
public BindableStringBuilder ErrorMessages { get; set; }
ErrorMessages.AppendLine("Missing Image: " + imagePath); 
```

在 Xaml 中：

```
<TextBox Text="{Binding ErrorMessages.Text, Mode=OneWay}"/> 
```

当然，如果需要，您可以公开其他 StringBuilder 方法。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-06T10:12:45.553

看来我之前的回答措辞不是很好，因为很多人误解了我的观点，所以我会考虑人们的评论再次尝试。

仅仅因为 String 对象是不可变的，并不意味着 String 类型的变量不能更改。如果一个对象具有 String 类型的属性，那么为该属性分配一个新的 String 对象会导致该属性发生变化（在我原来的答案中，我将此称为变量变异，显然有些人不同意使用术语“变异”在这种情况下）。

WPF 数据绑定系统可以绑定到此属性。如果通过 INotifyPropertyChanged 通知属性更改，那么它将更新绑定的目标，从而允许许多文本框绑定到同一个属性，并在属性更新时全部更改，而无需任何额外的代码。

因此，不需要使用 StringBuilder 作为属性的后备存储。相反，您可以使用标准字符串属性并实现 INotifyPropertyChanged。

```
public class MyClass : INotifyPropertyChanged
{
    private string myString;

    public string MyString
    {
        get
        { return myString; }
        set
        {
            myString = value;
            OnPropertyChanged("MyString");
        }
    }

    protected void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
        { handler(this, new PropertyChangedEventArgs(propertyName)); }
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
} 
```

WPF 可以绑定到这个并且会自动拾取和更改*属性*的值。不，String 对象没有发生变异，但 String 属性*发生了*变异（或更改，如果您愿意）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T16:32:10.453

您可以继承文本框并覆盖 Text 属性以检索和写入字符串生成器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-05T16:34:36.423

简单地说，没有。Text 属性只接受一个字符串。因此，无论来源如何，您都必须将其转换为字符串。

为了使您能够轻松地为许多文本框设置一次，您可以拥有一个始终设置所有文本框值的类属性...

```
public string MyString
{
  get
  {
   ///... 
  }
  set 
  {
    textbox1.Text = value;
    textbox2.Text = value;
    //...
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T22:21:37.597

我会用方法、方法和事件将其包装`StringBuilder`在自定义类中。`Add``Text``OnChanged`

连接该`Add`方法，以便在调用它时将文本添加到`StringBuilder`实例并触发事件。然后当事件触发时，使用该`Text`方法`ToString`对`StringBuilder`.

```
public class StringBuilderWrapper
{
   private StringBuilder _builder = new StringBuilder();
   private EventHandler<EventArgs> TextChanged;
   public void Add(string text)
   {
     _builder.Append(text);
     if (TextChanged != null)
       TextChanged(this, null);
   }
   public string Text
   {
     get { return _builder.ToString(); }
   }
} 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2009-01-05T16:33:39.843

您可以将 TextBox 的 Text 属性绑定到字符串属性... String 对象是不可变的，但 String 类型的变量是完全可变的...

```
string mutable = "I can be changed";
mutable = "see?"; 
```

但是，您需要将其包装在实现 INotifyPropertyChanged 的​​对象中。

# security - SPContext.Current.Web.CurrentUser 返回误导值

> ID：413677
> 
> 赞同：5
> 
> 时间：2009-01-05T16:30:45.230
> 
> 标签：security, sharepoint

我正在尝试找出我的 sharepoint 应用程序的当前用户名。还有更多方法可以做到这一点。然而，sharepoint 方式返回了误导性的值。

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name // returns MY_COMPUTER\\my_user

HttpContext.Current.User.Identity.Name // returns MY_COMPUTER\\my_user

HttpContext.Current.Request.ServerVariables["AUTH_USER"] // returns MY_COMPUTER\\my_user

Microsoft.SharePoint.SPContext.Current.Web.CurrentUser.LoginName // returns SHAREPOINT\\system 
```

这种行为的原因是什么？如果我使用非共享点方式，我会遇到问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-05T17:18:16.350

您是否以安装系统时使用的管理员帐户浏览？SharePoint 将“有用地”重命名该 SHAREPOINT\System。使用不同的帐户，所有方法都将返回相同的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-05T20:01:52.590

如果用户是运行当前 Web 应用程序的应用程序池帐户，则这是预期的。
顺便说一句，它应该与欢迎控件（左上角控件）中显示的名称相同

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-08-26T18:20:30.683

问题是因为您可能从 RunWithElevatedPrivileges 代码中的提升 SPWeb 获取当前用户。您可以使用下面的代码片段来获取真实用户

```
SPWeb site = SPContext.Current.Web;
SPSecurity.RunWithElevatedPrivileges(delegate()
{
    using (SPSite ElevatedsiteColl = new SPSite(siteColl.ID))
   {
       using (SPWeb ElevatedSite = ElevatedsiteColl.OpenWeb(site.ID))
       {
            string currUser = site.CurrentUser; //not the ElevatedSite.CurrentUser
       }
   }
}); 
```

这将显示真实用户名而不是 SHAREPOINT\System 用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-30T23:07:42.157

我认为您可能已在 SPSecurity.RunWithElevatedPriviliges 下包含此代码。检查一次。我不确定

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-12T17:29:19.827

SPWeb.CurrentUser 可以返回 SHAREPOINT\system 的另一种方式是如果 web 被提升，但我不确定为什么 SPContext.Current 会被提升。您在哪种页面上看到了这种行为？

# .net - Windows Workflow Foundation 或 IoC 容器 + 依赖注入？

> ID：413697
> 
> 赞同：2
> 
> 时间：2009-01-05T16:36:33.003
> 
> 标签：.net, dependency-injection, inversion-of-control, workflow-foundation

我正在尝试找出 Windows 工作流基础的内部结构。因此，我们有一些软件组件，我们以工作流的形式将它们交织在一起，无论是基于条件的顺序工作流还是状态机工作流。现在，我在想（我在这里可能错了）这并不同样适用于 IoC + 依赖注入（通过 Unity 或 Spring.net）。什么时候用什么？？我想对了吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-06T13:48:09.207

不太确定我是否理解这个问题，但无论如何我都会尝试一下。

WF 不使用 IOC 容器。它使用 ServiceLocator 模式，您可以在其中将依赖项添加到工作流运行时、服务定位器和工作流活动，并从工作流运行时检索这些服务。

ServiceLocator 和 IOC 模式相似，并且在解耦依赖方面具有相同的目的。虽然在 IOC 容器中将依赖项推入，而 ServiceLocator 用于将依赖项拉出，但方法有所不同。

希望这能回答您的问题，如果没有，我会尝试重新表述原始问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T22:17:19.223

我也在努力解决如何使用工作流中由我的 IOC 容器提供和服务的组件。正如另一个答案所述，工作流实例希望使用服务定位器从运行时中提取服务，而不是注入依赖项。

弥补差距的一种简单方法是在设置 WF 运行时时将依赖项从 IOC 容器中取出，然后使用 AddService 将它们放入运行时。您的工作流可以覆盖 OnActivityExecutionContextLoad，并使用服务提供者上的 GetService 方法将它们从运行时中取出，并将它们放入工作流的 [NonSerialized] 公共属性中。然后，您可以通过代码活动等访问服务。

您还可以构建一个运行时服务，在激活工作流实例时注入依赖项。

# sql-server-2005 - 将 SQL Server 2008 DB *还原到* SQL Server 2005

> ID：413699
> 
> 赞同：21
> 
> 时间：2009-01-05T16:36:40.583
> 
> 标签：sql-server-2005, sql-server-2008

让自己在这里有点麻烦......在 CMS 项目上工作，假设 sql server 2008 被批准为首选数据库。事实并非如此，我们现在必须将所有内容从 SQL Server 2008 反向移植到 SQL Server 2005。

一个简单的备份/恢复过程会产生：“RESTORE HEADERONLY 异常终止。（Microsoft SQL Server，错误：3241）”。

不幸的是，将数据导出到 Excel 电子表格会产生多个 OLE 错误，我认为这实际上是 cms 数据库中的一个问题。

有没有人愿意为这项任务推荐其他方法？提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-05T17:07:41.787

使用[红门](http://www.red-gate.com/products/sql_data_compare/index.htm)：

> 用于比较和部署 SQL Server 数据库内容的工具。
> 
> 您可以在源代码控制中使用实时数据库、备份或 SQL 脚本。损坏或丢失的数据可以恢复到单行，而不需要完整的数据库恢复。
> 
> SQL 数据比较可帮助您快速、简单且零错误地比较和部署更改...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-13T08:41:27.540

默认情况下没有办法做到这一点。您可以在 2008 服务器上为 2008 数据库生成脚本，然后在 2005 版本上执行这些脚本。请注意，您必须手动查看脚本并删除 2008 版本独有的所有部分。

另一种方法是使用第三方工具，例如 Red Gate 或[ApexSQL Diff](http://www.apexsql.com/sql_tools_diff.aspx)（移动模式）和[ApexSQL Data Diff](http://www.apexsql.com/sql_tools_datadiff.aspx)（移动数据）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-26T12:29:42.000

使用 Generate SCripts 创建数据库和架构，并确保您以 SQL Server 2005 和脚本数据为目标。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-05T16:53:32.640

您可以尝试使用 SQL 2005 的导入/导出数据向导，而不是进行备份和恢复。

[http://support.microsoft.com/default.aspx?scid=kb;en-us;314546](http://support.microsoft.com/default.aspx?scid=kb;en-us;314546)

[http://msdn.microsoft.com/en-us/library/ms140052(SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms140052(SQL.90).aspx)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-13T17:45:41.467

我刚刚遇到了同样的问题，这就是我解决它的方法。

问题是将数据库从可运行的 SQL Server 2008 数据库复制到新的 SQL Server 2005 数据库。

我在 2008 服务器上使用 Management Studio 编写了数据库脚本。我只编写了数据库设计脚本，而不是数据。我还应该补充一点，数据库只有表和索引，所以我没有尝试过任何更聪明的对象，尽管我想不出它们为什么不起作用。

在 2005 服务器上，我手动创建了一个新数据库，然后运行脚本来设置所有表和索引。

在 2008 服务器上的 Management Studio 中，我使用导出数据向导将数据从 2008 服务器导出到 2005 服务器。它目前正在运行，并且似乎很高兴移动数据。

一旦所有数据都通过了，我还有几件小事要做——创建用户并在 2005 数据库中设置安全性，但总而言之，这看起来不是一个坏方法它。它不是很简单，但也不是很费劲。

因此，复制数据库向导似乎不起作用（我认为因为该程序包最终在 2005 服务器上运行，而 2005 Management Studio 无法与 2008 通信）但导出数据向导很高兴移动数据......只要因为数据库已经存在于目标服务器上。

希望这很有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-05T16:54:41.483

在 SQL Server 中无法恢复到以前的版本

周围没有 SQL 2005 备份吗？否则你真的只能在 2008 年导出整个数据库，然后重新导入到 2005 年，或者 2008 年的导入/导出向导

或者依靠 3rd 方工具。例如，Red Gate 数据比较能够同步。2个服务器/数据库之间的数据

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-05T16:48:34.977

我只用mysql但是你能不能把你的数据导出成sql语句，然后再导入sql2005？只是一个想法..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-05T16:54:45.277

我遇到了类似的问题（sql 2005 to sql 2000），发现我在旧版本中碰巧有一个空白数据库。我使用 bcp.exe 复制所有数据。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-29T10:03:36.800

检查此链接[单击此处](http://community.spiceworks.com/how_to/show/1547-copy-a-mssql-2008-database-to-2005) 您可以在 sql server 2008 中创建数据库脚本，并且可以在 sql server 2005 及更低版本中使用它....

# c# - 在 C# 2.0 中初始化非空静态集合的正确方法是什么？

> ID：413700
> 
> 赞同：21
> 
> 时间：2009-01-05T16:37:02.317
> 
> 标签：c#, collections

我想在我的 C# 类中初始化一个静态集合 - 像这样：

```
public class Foo {
  private static readonly ICollection<string> g_collection = ???
} 
```

我不确定这样做的正确方法；在Java中我可能会做类似的事情：

```
private static final Collection<String> g_collection = Arrays.asList("A", "B"); 
```

C# 2.0 中是否有类似的构造？

我知道在 C#/.NET 的更高版本中，您可以执行集合初始化程序 ( [http://msdn.microsoft.com/en-us/library/bb384062.aspx](http://msdn.microsoft.com/en-us/library/bb384062.aspx) )，但目前我们的系统不能选择迁移.

为了澄清我最初的问题 - 我正在寻找一种简洁地声明一个简单静态集合的方法，例如一个简单的字符串常量集合。对于更复杂的对象的集合，静态初始化器风格的方式也非常好。

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-01-05T16:54:58.643

如果我完全理解您的问题，似乎其他人没有抓住重点，您希望以与 Java 类似的方式创建一个静态集合，因为您可以在一行代码中声明和填充，而无需创建专用的方法来做到这一点（根据其他一些建议）。这可以使用数组文字来完成（写成两行以防止滚动）：

```
private static readonly ICollection<string> Strings = 
  new string[] { "Hello", "World" }; 
```

这会一次性声明并使用项目列表填充新的只读集合。在 2.0 和 3.5 中工作，我测试它只是为了更加确定。

在 3.5 中，虽然您可以使用类型推断，但您不再需要使用删除更多击键的 string[] 数组：

```
private static readonly ICollection<string> Strings = 
  new[] { "Hello", "World" }; 
```

请注意第二行中缺少的“字符串”类型。字符串是从数组初始值设定项的内容自动推断出来的。

如果要将其填充为列表，只需将 new string[] 更改为 new List a la：

```
private static readonly ICollection<string> Strings = 
  new List<string>() { "Hello", "World" }; 
```

当然，因为你的类型是 IEnumerable 而不是特定的实现，所以如果你想访问特定于 List<string> 的方法，例如 .ForEach()，你需要将其转换为 List：

```
((List<string>)Strings).ForEach(Console.WriteLine); 
```

但为可迁移性付出的代价很小[这是一个词吗？]。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-05T16:43:47.030

静态结构：

```
public class Foo
{
    private static readonly ICollection<string> _collection;

    static Foo()
    {
        _collection = new List<string>();
        _collection.Add("One");
        _collection.Add("Two");
    }
} 
```

但请注意，在这种情况下，您可以内联初始化集合（出于[性能原因](http://blogs.msdn.com/brada/archive/2004/04/17/115300.aspx)推荐）：

```
private static readonly ICollection<string> _collection = new List<string>(new string[] { "One", "Two" }); 
```

这实际上取决于您的初始化代码有多复杂。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-05T16:41:43.897

也许你可以调用一个静态方法：

```
public class Foo
{
    private static readonly ICollection<string> g_collection = initializeCollection();

    private static ICollection<string> initializeCollection()
    {
        ... TODO allocate and return something here ...
    }
} 
```

或者，拥有一个静态构造函数（正如其他人所建议的那样）可能是等效的，甚至更惯用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T16:50:09.277

除了静态构造函数之外，这也可以工作

```
 public class Foo
    {
        private static readonly ICollection<string> _collection = 
              new List<string>(new string[] { "elem1", "elem2", "...", "elemn" });
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T16:42:50.917

我能想到的唯一方法是拥有一个静态构造函数。所以首先你在类级别新建一个新集合，然后在你的静态构造函数中，将所有值添加到它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T16:43:31.773

您可以声明一个自定义集合类并向其中添加您自己的 ctor...

```
 public class MyFooCollection: Collection<string>
   {
      public MyFooCollection(string[] values)
      {
          foreach (string s in values)  base.Add(s); 
      }
   } 
```

然后在您的客户端代码中您可以编写

```
 private static final MyFooCollection g_collection = 
         new MyFooCollection(new string[] {"A", "B"}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-05T16:46:19.410

我喜欢使用`IEnumerable<T>.ToList()`.
此外，如果您的收藏应该是只读的，您可以使用`System.Collections.ObjectModel.ReadOnlyCollection`.

```
private readonly ICollection<string> collection = new string[] { "a", "b", "c" }.ToList();

private readonly ReadOnlyCollection<string> collection2 = new ReadOnlyCollection<string>(new string[] { "a", "b", "c" }); 
```

编辑：
再一次，如果您将它用作 ICollection，您可以简单地使用数组构造函数（因为`T[]`是 an`IList<T>`和 an `ICollection<T>`）。请记住，在这种情况下，许多更改方法（例如 Add）会失败：

```
private readonly ICollection<string> = new string[] { "a", "b", "c" }; 
```

编辑#2：我刚刚意识到 ToList 是一个扩展函数，只能在 C# 3.0 中使用。您仍然可以使用 List 构造函数：

```
private readonly IList<string> = new List<string>(new string[] { "a", "b", "c" }); 
```

不过，我更喜欢`ReadOnlyCollection`只读列表。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-05T16:47:56.897

使用静态构造函数，如下所示：

```
public class Foo
{
    static readonly ICollection<string> g_collection;

    // Static constructor
    static Foo()
    {
        g_collection = new List<string>();
        g_collection.Add("Hello");
        g_collection.Add("World!");
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-05T17:02:10.160

你有两个选择：

1.  使用静态方法的返回值来初始化集合。

2.  使用静态构造函数创建集合，填充它并将其初始化为静态变量。

从性能的角度来看，选项 1 更好，因为在静态构造函数的情况下，运行时必须在每次访问类之前检查是否调用了静态构造函数。

# java - 如何让我的开发工作流程更加“企业化”？

> ID：413713
> 
> 赞同：9
> 
> 时间：2009-01-05T16:42:36.470
> 
> 标签：java, workflow, development-environment

我是一个学术联盟的唯一开发者，该联盟的总部设在东北的一所大学。我所有的开发工作都涉及内部工具，主要是 Java，所以没有向公众发布。现在，我觉得我的开发工作流程非常“业余”，与您在经验丰富的软件开发公司看到的完全不同。我倾向于说这并不重要，因为无论如何我是唯一的开发人员，但如果没有其他原因，只是为了让我的工作更轻松一些，做一些改变并没有什么坏处我的简历上有更多技术。现在我的工作流程是这样的：

*   我的大部分开发工作都是在笔记本电脑上的 Eclipse 中完成的。一切都保存在我的笔记本电脑本地，我不使用 VCS，也没有真正备份我的代码（除了偶尔通过电子邮件发送给自己，以便我可以在另一台计算机上查看它 - 是的，我告诉过你我的开发环境需要工作）。

*   当我完成一个项目并想要部署它或者我只是想测试它时，我使用 Eclipse 中的内置 Jar 工具来制作我的项目的可执行 .jar。如果我使用外部 .jar 库，我会使用 Fat-Jar 插件将这些 .jar 包含在我的可执行 .jar 中。

*   创建 .jar 后，我通过 SFTP 手动将其上传到服务器并使用 .jar 之类的内容对其进行测试`java -jar MyProject.jar`。

哦，是的，我有没有提到我不进行单元测试？

我想首先解决的最明显的问题是我缺乏源代码控制。我喜欢 git，因为它是分布式的，但它似乎不能很好地与 Eclipse 集成，而且我听说它在我的主要开发操作系统 Windows 上不能很好地工作。所以，我倾向于SVN，我确实有一些经验。我确实有自己的个人服务器，我想我会用它来控制我的源代码，因为我宁愿自己做管理员也不愿与大学官僚作风。我之前在设置 SVN 时遇到了一些麻烦，但我会再试一次。也许我还会安装诸如 Trac 或 Redmine 之类的东西来进行错误跟踪、待办事项列表等？

构建和部署呢？必须有比使用 Fat-Jar 并手动将我的 jar 上传到服务器更好的方法。我听说过 Ant 和 Maven 之类的工具——这些工具是否适用于我想做的事情？我怎样才能开始使用这些？

我想我最终也想将单元测试与 JUnit 集成。尽管它可能应该是，但这不是我现在主要关心的问题，因为到目前为止我的应用程序并不是非常复杂。我现在真的很想简化和简化我的工作流程，然后我将轻松进行单元测试。

对不起，很长的问题。我想我的问题归结为，对于一个单独的开发人员来说，我可以/应该使用哪些工具和方法，不仅可以让我的工作更轻松，而且还可以让自己接触到一些技术，这些技术在专门的开发中是必需的知识屋？

* * *

编辑：感谢到目前为止的精彩回答。我并不是说我想让我的工作流程“企业化”只是为了这样做，而是为了让我的工作更简单，并掌握一些通常在企业开发环境中使用的技术。这就是我的意思。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-05T16:54:55.710

在我看来，你实际上对你需要做什么有一个很好的想法。

必须使用 Subversion（或其他 VCS）。尽管为您的工作相关代码设置一个单独的 SVN 存储库而不是使用个人存储库可能是明智的。

您可以使用像 Subclipse 这样的插件将 Subversion 与 Eclipse 集成，我发现它工作得很好。

我肯定会使用 Ant 或 Maven - 我更喜欢 Ant，因为它更灵活，而且我认为它比 Maven 更适合您的开发风格。但是您可能还想研究处理依赖管理的[Apache Ivy 。](http://ant.apache.org/ivy/)

基本上，您设置了一个运行编译、构建和部署步骤的 ant 任务 - 这样当您创建最终的 JAR 包时，您可以确定它已经过单元测试，因为它是您的 ant 脚本的一部分。开始使用 ant 的最佳方法是查看一些示例，并通读[手册](http://ant.apache.org/manual/index.html)。

至于单元测试 - 您可以逐步建立单元测试。我建议将 JUnit 与[Cobertura](http://cobertura.sourceforge.net/)之类的代码覆盖工具（易于设置）结合使用——它将帮助您了解测试覆盖了多少代码，并且是您的测试有效程度的指标。

设置诸如 Trac 之类的东西也可能是值得的 - 能够跟踪错误很重要，并且 wiki 对文档非常有用。

换句话说，所有这些听起来你都在正确的路线上，你只需要开始使用其中一些工具！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T16:54:46.803

如果你真的很喜欢分布式源代码控制，我建议你看看[Bazaar](http://bazaar-vcs.org/)。它的类似 GIT 的分布式源代码控制是围绕执行非常高质量的合并而设计的。开箱即用，它适用于包括 Windows 在内的所有平台，并且它们有一个[TortoiseBZR](http://bazaar-vcs.org/TortoiseBzr)客户端。

但实际上，任何源代码控制总比没有好。如果您是唯一的开发人员，那么不需要比 SVN 更复杂的东西。大公司和项目一直在使用 SVN，几乎没有问题。

就单元测试而言，您应该熟悉[JUnit](http://www.junit.org/)。您了解单元测试并知道您应该这样做这一事实仍然比大多数临时开发人员领先了几步。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-05T16:55:43.353

使用版本控制。时期。SVN与 Eclipse 和 Windows有*很好的集成。*获取适用于 windows 的 TourtisSVN 客户端并在 Eclipse 中使用 subclipse 插件。

我建议使用外部 HD 或使用您公司的一台服务器来放置您的存储库并经常进行备份。Subversion 也适用于部署和升级。只要学习如何去做，你就永远不会回头:)

至于单元测试，有些人会说这是要走的路，但我还没有找到足够的证据来自己开始实践。如果有人在这个问题上可以说服我，那么请这样做！

此外，不要指望“企业化”您的工作流程 - 让它变得更好。适合大型团队和公司的做法可能不适合您。我自己几乎是唯一的开发人员，并且知道您所处的情况。只需尝试一切，然后只在一段时间后保持自然的感觉。

但请务必尝试 SVN！如果您的公司有一个带有 apache 的 LINUX 服务器，请查看您是否可以使用 DAV-SVN 在那里设置您的服务器。

:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-05T16:57:15.880

我想你回答了你自己的大部分问题。

*   源代码控制：选择 SVN - 易于安装，与 Eclipse (subclipse) 完美集成。
*   使用 Ant 构建您的项目并进行部署（SCP/SFTP 任务）
*   将所有设置（Eclipse 项目设置、构建 xmls 等）保存在 SVN 中。
*   使用 Bugzilla 跟踪您的错误/问题/请求/想法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-05T16:54:16.400

开始使用版本控制将是非常有益的。现在开始，事不宜迟！Git 的发展速度非常快，而且已经有一个 TortoiseGit 正在开发中。SVN 仍然是一个很好的标准。而且我没有与 Mercurial 合作过，但这是另一个值得研究的 VCS。

除此之外，我不明白为什么您的工作流程必须是企业化的。它只需要高效和舒适。也就是说，我认为您应该尝试使用简单的文本编辑器并从命令行编译。大多数世界上最优秀的程序员仍然使用它而不是 IDE，它将帮助您了解您最喜欢的 IDE 下的流程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-05T17:05:09.153

查看 Pragmatic Programmers 的[Pragmatic Starter Kit](http://www.pragprog.com/starter_kit)。

它向您介绍大学等软件开发的重要基础知识。似乎放弃了，如版本控制、单元测试和项目自动化（按此顺序），并且以非常平易近人的方式进行。

它会给你一个坚实的基础，让你继续前进。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-05T16:57:28.670

看看@Matt Raible 的 Appfuse。

它结合了 Maven 和单元测试。

[http://raibledesigns.com/rd/tags/appfuse](http://raibledesigns.com/rd/tags/appfuse)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-05T17:18:53.510

一旦你设置了版本控制和一些单元测试，我会考虑一个持续集成服务器（你想成为企业，对吧？）。

即使您是并且仍然是唯一的开发人员，这也可能会帮助您发现一些错误。您忘记签入或喜欢的东西。CI 服务器会定期检查您的所有源代码，进行干净的构建并运行您的所有测试。如果出现错误，它还会与您联系。

这可以保证您（或任何其他人）能够检查您的代码并构建/运行您的项目。

我建议看看[哈德森](http://hudson.dev.java.net/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-05T17:19:52.400

虽然你把它作为最后一件事，但我认为你应该立即开始使用 jUnit。

原因是，它可能是您确定的*最简单的目标，而且这些工具几乎肯定已经内置到您的 Eclipse 构建中。*

在您的项目中创建一个名为“jUnit”的新文件夹。

假设您有一个 Employee 类，具有 setAnnualSalary() 和 getMonthlySalary() 方法。

右键单击jUunit文件夹，新建->“jUnit测试用例”。这将创建一个新类。称之为TestEmployee。Eclipse 像往常一样为您生成样板文件。

添加一个名称以“test”开头的 void 方法：

```
public void testSalaryCalc() {
    Employee emp = new Employee("John Doe");
    emp.setAnnualSalary(12000);
    assertEquals(1000,emp.getMonthlySalary());
} 
```

右键单击，“运行方式”->“jUnit 测试”。（第一次 Eclipse 可能会提示您为项目做一些设置。按照它说的去做。）

如果 Employee 工作正常，您会看到一个绿色条。破坏 Employee 类，再次运行测试，您将看到一个红色条，以及告诉您失败原因的输出。

恭喜：你是单元测试！

右键单击父目录并选择“Run as jUnit test”将运行目录中的每个 Testcase 类。稍后您可以将 jUnit 合并到您的构建过程中，但现在不要担心。

自动完成将向您显示`assert()`您可以使用的所有变体。您可以阅读它，并针对在通过测试用例的实现之前编写测试用例的实践。但是只要做上面简单的事情就会给你带来很大的好处。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-05T19:53:21.547

正如其他人所说，你已经清楚地知道你需要做什么。VCS 是必须的，CI 或错误跟踪可能是多余的（对于单个开发人员来说，电子表格可能足以进行错误跟踪）。

可能使您受益匪浅的一件事是保持井井有条的产品积压。在单独开发中，我发现保持专注于高优先级功能并避免功能蔓延是我最大的挑战之一。保留积压工作非常有帮助。它不必是一个优先的功能列表，其中包含一些关于每个功能范围的注释。在我的工作场所，我们将这些信息保存在 Trac 中，但在这里，您可能只需要一个电子表格。

我想为单元测试添加一个插件，特别是测试驱动开发（TDD）。 [肯特贝克的书](https://rads.stackoverflow.com/amzn/click/com/0321146530)是一个很好的起点。我发现 TDD 帮助我保持诚实并专注于我真正需要做的事情，特别是在没有 QA 的单一开发人员项目上。有时，代码似乎是自己编写的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-05T19:57:44.687

你得到了一些非常可靠的答案，所以简短的帖子添加了一篇关于测试驱动开发的文章的链接，这是一种敏捷实践，在你的简历上看起来不错。 [TDD](http://www.agiledata.org/essays/tdd.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-05T20:13:02.333

如果您正在运行要放置 SVN 服务器的 Windows Server，请使用[Visual SVN](http://www.visualsvn.com/server/)作为服务器。它非常易于设置和使用，它同时支持基本身份验证和 Windows 身份验证。它也是免费使用的。

Eclipse 有很多模块可以与 SVN 服务器集成，因此请使用其中之一，或者已经建议的 Tortoise SVN。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-07-16T00:29:36.827

之前的所有评论几乎涵盖了您可能需要的所有内容:-)

我想添加另一种关于如何开发的方法（开发工作流程）。

我建议您阅读以下文章，尽管它是一个 git 工作流程，但您可以将相同的想法用于您可能正在使用的任何其他工具。

[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

# c# - 非程序员学习 C#、.NET Framework 和 SQL 需要多长时间？

> ID：413731
> 
> 赞同：18
> 
> 时间：2009-01-05T16:49:14.477
> 
> 标签：c#, .net, sql

我不擅长编程。我完成了电子学硕士学位。我想学习 C#、.NET Framework 和 SQL。你认为这需要多长时间（如果我每天有 5 个小时的时间来做）？另外，我按什么顺序学习它们？我有 Visual Web Developer 2008，这足以开始吗？

**从同一用户的一个新问题中复制：**
我应该指定我希望以 .NET 开发为职业。我想给自己 2 个月的时间来了解“基础”。作为一名开发人员，您对 IT 公司的期望是什么？他们需要什么技能，作为初级或中级开发人员的职责是什么？我没有任何行业经验，我能在家里感受一下工作职责吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-01-05T16:58:51.943

这就像问学习法语需要多长时间：

*   1天了解它是什么
*   1 周学习到婴儿/初级水平
*   1年被专业人士视为初学者
*   几年才能被视为经验丰富的专业人士
*   另外，对于那些像你或我这样的凡人永远不会学习的科目还有“深入”的知识

再说一次，很多人（大多数普通人，非程序员）**从不**学习这些科目，所以如果你像“大多数”人一样，那么答案将是“这将永远需要”或“它永远不会发生”。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-01-05T17:56:19.160

潜水吧，让它成为一种爱好，玩得开心:)

我自己来自电子背景，我可以告诉你，你应该很快学会。拥有电子背景将使您对底层硬件有更深入的了解。

恕我直言，信息技术的根源是电子产品。

例如..

将对象视为组件。

.NET 框架本质上是装满标准组件的抽屉。

例如，您知道 7400（与非门）能够做什么。您有一个数据表，其中显示了引脚输出和示例配置。你通常不关心里面的电路。软件对象也是如此。我们有输入，我们有方法可以对输入做一些事情以产生可预测的输出。作为开发人员，我们通常不关心对象是如何编写的……只是它按照它所说的去做。

您还知道可以通过使用两个或更多与非门来构建额外的逻辑电路。这就是实例化。

您还知道，您可以使用 NAND 门并将其放置在电路中，您可以在其中修改输入信号，以便输出具有不同的行为。这是一个粗略的示例，但您可以将其视为继承。

我还了解到，有一个项目可以进行是有帮助的。它可以是业余爱好者项目或工作项目。从小处着手，做一些非常基本的工作，然后从那里开始工作。

回答您关于“我应该首先学习什么”的具体问题。

1）把你的项目记在心里，把它分成几个步骤。例如......从用户那里获取一个数字，将数字加一，显示结果。将此视为您的设计。

2) 学习基本的 C#。编写一个简单的控制台应用程序来做一些事情。学习什么是 if 语句（这都是布尔逻辑，所以应该有点熟悉），学习循环，学习数学运算，学习函数（子程序）。玩简单的文件 i/o（读取和写入文本文件）。基本的 C# 可以被认为是您的芯片（对象）的接线和分立元件（电阻器、电容、晶体管等）。

3) 学习如何实例化和使用框架中的对象。您已经这样做了，但现在是时候进一步研究了。例如...玩 System.Console 更多...尝试让扬声器发出哔哔声。同时开始寻找您可能想要用于数据库工作的对象。

4）学习基本的SQL。网上有很多帮助和例子。选择您要使用的数据库。我个人认为 MS Access 是一个很棒的初学者数据库。我不会将它用于多用户或跨平台桌面应用程序……但对于 Windows 用户来说，它是一个很棒的单用户数据库……它是学习 SQL 基础知识的好方法。如果您不想为 Access 支付 $ 费用，还可以使用其他简单的免费数据库（例如 Open Office 就有一个）。

5）扩展您的应用程序以使用数据库执行某些操作。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-05T17:01:50.160

去做就对了！不要担心细节。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-01-05T17:00:33.703

好吧，它会带你永远。编程有很多东西要学，10 年还不够。

[http://norvig.com/21-days.html](http://norvig.com/21-days.html)

不要误会我的意思，你会很快学会基础知识，但要精通它需要更长的时间。

你应该专注于一个领域并尝试做一些例子，如果你选择 web 开发，从一个 hello world 网页开始，然后添加一些代码。了解回发、视图状态和会话。试着掌握ifs、cycles和functions，你真的有很多东西要讲，说“这是最好的学习方法”并不容易。

我想你最终会在需要做的基础上学习。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-01-06T22:37:25.550

C# 最好的一点是它非常吸引人。很容易上手，而且你也会玩得开心。

但是 .Net 框架是一个非常大的库，其中充满了许多值得探索的东西，而且由于 .Net 的性质，您也可以在学习它时获得乐趣。它是一个连贯的、面向对象的、有据可查的库，而 C# 使得使用它变得如此简单，以至于您可以在编码时轻松地发现自己的方式。

绝大多数关于 .Net 和 C# 的文章、书籍或资源只专注于解释功能和框架，而不是关于如何避免怪癖、变通方法或例外情况，就像我不想命名的其他语言一样（ *cough C++*) 所以最终学习 C# 和 .Net 的经历从头到尾都是非常愉快的，而你可以使用 .Net 完成的事情也让它非常有成就感。

在我看来，您选择了一种很好的语言开始，最后回答您的问题，它将带您了解：

*   2到3个月学习基础知识
*   1到2年成为精通开发者
*   5 年或更长时间成为专家，或者，取决于你的奉献精神，成为“大师”。

但话又说回来，击败数字和打破极限是人性的本质。你能比这更快吗？;-)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-01-05T17:03:17.643

一段绳子有多长？我认为这是主观的。我认识的程序员根据他们所接触的经验在很短的时间内学到了很多东西。

基本上，弄脏你的手，你一定会学到更多。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-01-05T16:56:06.257

这真的取决于你所说的“学习”是什么意思。您可能会花一周时间在 Web 上建立几个页面，这些页面具有一些最低程度的交互性，以将用户输入的信息保存在某个数据库中，然后有一些其他页面用于查询和显示信息。然后，您可以在接下来的 10 年中学习 .Net 框架、SQL 的所有复杂性，并掌握使用 IDE。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-01-05T16:58:12.210

你能学多长时间，取决于你掌握编程背后逻辑的能力，而从哪里学习，取决于你的学习方式。

如果你是一个按书学习的人，只需跳转到 Amazon.com 并进行快速搜索，拿起评论最好的书或等待这里的人推荐一本书（我不是书人编程）

如果您更喜欢截屏视频（演示如何操作的视频源）或教程，请直接访问源：[http](http://www.asp.net/learn/) ://www.asp.net/learn/ 。有大量视频和教程解释了您入门所需的一切。

Visual Web Developer 2008 Express 应该是您入门所需的一切。基本上，速成版是 Visual Studio 被切割成一组精确的功能来完成一件事。他们没有大规模开发所需的一些花里胡哨，但你应该需要的一切。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-01-05T17:02:44.137

无法确定需要多长时间，这实际上取决于您现有的知识。我设法在大约 2 个月内学习了 C#/.NET 2.0*核心基础知识。*我对您的建议：尝试为考试而学习，他们确保您的学习涵盖所有重要部分，并指导您完成这项新技术。请参阅[Microsoft 学习](http://www.microsoft.com/learning/mcp/mcpd/default.mspx)。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-01-05T16:57:57.610

如果您有任何编程经验，您可能会在几个小时内学会 C# 语法，并在一周左右的时间内熟悉它。但是，除非您使用它编写大量代码，否则您不会编写复杂的结构。这真的和学习任何语言一样：你可以很快地学习所有的单词和语法，但是要流利需要一段时间。

**编辑**

您可能想为学习 C# 挑选一本书是[C# in a Nutshell (3.0)](http://www.amazon.ca/3-0-Nutshell-Desktop-Quick-Reference/dp/0596527578/ref=pd_bbs_sr_1?ie=UTF8&s=books&qid=1231174796&sr=8-1)，我发现它非常有用，并且已经被这里的几个人推荐。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-01-07T14:50:03.887

您将很快学会 c#（语言语法并不复杂）。*真正*学习 .NET 框架需要很长时间，但您会很快掌握框架中大量使用的部分，并且您应该开始看到框架中的模式。

我给你的建议：**不要**只从书本或网站上学习。他们会教你语言和框架，但不会教你如何编写任何有用的东西。

编写小代码片段会教你如何完成非常具体的任务，但不会教你如何编写应用程序。我的建议是你考虑一个可能有趣的应用程序（并且可行......例如，不要认为你会在一两个月内编写操作系统或孤岛或其他东西）。就我个人而言，在我学习的时候，我编写了自己的全功能 IRC 应用程序，包括富文本、个人消息等。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-01-05T18:24:19.883

如果你想学习，真的想学习，那么时间并不重要。每天都往前走。让你对这些东西的热情推动你前进。有一天你会发现你擅长 C#/.NET。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-01-05T17:04:14.523

在我看来，答案与您是否有切实的问题要解决，或者您是否只是想学习例如为可能的新工作做好准备有关。如果你有问题，那么你的状态会更好。你可以先环顾四周，看看其他人是如何解决这个问题的。一般来说，您应该能够很快地掌握语言（毕竟您拥有 EE 的 MS，IMO 的壮举可不小）。

您需要注意的是良好的编程实践。你可能会看到自己在问“为什么这个方法这么小”，“为什么这个方法是空的，这个抽象词在这里做什么”。这将使您超越语法对良好写作的看法。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-01-05T20:31:03.107

当我从金融业转行时，我休了 9 个月的假，从 Ivor Horton 的一本书中全日制学习 C++。我从我最好的朋友那里得到了很多支持，他是一位大师，我从高中开始就将编程作为一种爱好（当时我 36 岁）。

这不仅仅是语法问题。诸如指针、引用传递、多层架构、结构与类等的想法，这些都需要时间来理解和学习使用。并且您正在向其中添加庞大且不断发展的 .Net 框架，以及与 C# 完全不同的技能组合 SQL。您也没有提到框架的各种子集，这些子集使用越来越广泛，如 WPF、WCF、WF 等。

你是一名学者，所以你绝对可以做到，但这需要很长时间的认真努力，而且你肯定需要一些项目来工作和学习。祝你好运。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-01-06T22:11:01.097

抛开所有“相对论”，并不快。基于你说你以前从未编程过的事实......成为一名基本的程序员，几年。

要成为一名优秀的程序员（使用设计模式和与 ISO/IEC 9126 标准定义的通用标准相关的行业公认标准，例如可测试性、可维护性等）程序员，通常需要多年的经验和编码......不要成为“Sr”。或一夜之间成为“架构师”，对于不写代码的中级开发人员也是如此。

它总是一个你改进的过程。所以学习是相对的。但是在开始设计类和接口之前，学习基础知识似乎很简单。甚至潜在客户也会偶然发现基础知识……做错事。每个人都这样做。有很多事情需要注意。

如果您只是要添加功能（使用您的主管或架构师为团队保留的类）而不是真正添加新类等，那会更容易......但是您应该注意使用标准进行编码，并且您仍然必须了解 OOP 的复杂领域。但这并不是真正的 OOP。当您开始创建类、接口并了解继承、堆、引用等时，yada yada ......并且真正理解无论您多么聪明或认为您可能多么聪明，都需要时间。

所以，对于一个新的程序员。不容易。准备好编写大量代码。如果你不是，在你所在的地方找一份工作。这一切都是为了尽可能地编码，这样你才能变得更好。

首先阅读这些书。不要深入研究任何其他人，因为他们不适合以一种你可以快速上手的方式教你语言：

[http://www.amazon.com/Head-First-Object-Oriented-Analysis-Design/dp/0596008678/ref=pd_bbs_sr_4?ie=UTF8&s=books&qid=1231280335&sr=8-4](https://rads.stackoverflow.com/amzn/click/com/0596008678)

[http://www.amazon.com/Head-First-SQL-Brain-Learners/dp/0596526849/ref=pd_bbs_sr_7?ie=UTF8&s=books&qid=1231280335&sr=8-7](https://rads.stackoverflow.com/amzn/click/com/0596526849)

[http://www.amazon.com/Head-First-C-Brain-Friendly-Guides/dp/0596514824/ref=pd_bbs_sr_1?ie=UTF8&s=books&qid=1231280393&sr=8-1](https://rads.stackoverflow.com/amzn/click/com/0596514824)

[http://www.amazon.com/First-Design-Patterns-Elisabeth-Freeman/dp/0596007124/ref=pd_bbs_sr_3?ie=UTF8&s=books&qid=1231280393&sr=8-3](https://rads.stackoverflow.com/amzn/click/com/0596007124)

它们会让你快速开始理解，比那里的任何书籍都好。

同样对于这些蹩脚类型的响应，请忽略它们：

“话又说回来，很多人（大多数普通人，非程序员）从不学习这些科目，所以如果你像“大多数”人一样，那么答案将是“这将需要永远”或“它永远不会发生”。 "

那些来自有一些不希望你学习的自我之旅的开发人员（通常是领导）。每个人的学习速度不同，学习速度也不同，最终你会变得“快”。我已经厌倦了听到高级开发人员说这样的声明，因为他们的 sh** 也臭了很多次，不管他们有多好。相反，他们应该帮助团队取得成功和学习，只要他们的团队努力跟上并做他们自己能做的事情（而不是偷偷摸摸）。

确保您首先尝试获得初级开发人员职位......

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-01-07T14:24:54.470

2-3个月学习基础知识……没办法。除非你肯定会编码意大利面条。1-2年也是如此。意大利面是然后..

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-01-05T21:07:10.803

简单的答案：比两个月长得多。无论如何，学习熟练的编程将需要更长的时间。我花了很多年才学会成为一个称职的面向对象程序员，而且我很擅长这些东西。

更详细的答案：首先学习 C# 还是 SQL 并不重要，因为它们非常不同。我可能会建议使用 SQL，因为它更容易学习并且更独立有用。

你将很难适应家里的工作现实，就像你正在学习管道或量化金融一样。

如果没有一个或多个您尝试做的项目，您将很难将所有信息放在一起。你需要让其他人告诉你什么时候你是愚蠢的，什么时候你过于聪明并且会在以后为它付出代价，什么时候你真的得到它。

试着找一个你觉得有点意思的开源项目。研究他们的代码。弄清楚他们为什么要这么做。查看错误列表，并尝试找到尽可能微不足道的内容来修复。从那里工作。学习贡献会教给你一些对工作世界有用的东西，它会给你一些可以指出的东西。如果您有一些经验可以指出，那么获得第一份工作会容易得多。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-01-05T19:30:04.167

根据 Malcolm Gladwell 的说法，你需要 10,000 小时才能变得真正好。所以开裂吧。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2010-06-29T11:16:43.393

建立在你已经知道的基础上，看看很多招聘广告。例如，我看到工作要求使用 WinForms/WPF 和电子设备来编写 UI 以控制自定义硬件。

您可能会发现“机器人”.net 工具包很有趣。

.Net 现在太大了，任何人都无法同时学习 WEB 和桌面，因此您必须决定要走的路。网络有更多的工作，但很少有人拥有好的桌面剧照。

# javascript - 从网页写入本地磁盘

> ID：413733
> 
> 赞同：3
> 
> 时间：2009-01-05T16:49:45.240
> 
> 标签：javascript, silverlight, browser

我正在开发一个允许多文件下载的 Silverlight 控件。目前我正试图让我的想法围绕浏览器的权限模型。

假设，在网页上，用户在文本框中输入本地文件夹 (c:\temp)。然后用户点击一个按钮。

是否可以在 JavaScript 或 Silverlight 中将一组文件（存储在服务器上）写入用户驱动器上的该文件夹？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-05T16:53:58.817

来自 Javascript - 没有。如果可能的话，从一些卑鄙的人那里很容易在您的 PC 上安装病毒。

Silverlight 我不知道，但我认为写入用户硬盘驱动器将非常有限且受到严格控制。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-05T16:55:23.323

仅当浏览器存在您可以利用的安全漏洞时。

由于您描述的功能将允许任何网页为访问者的系统做任何它该死的事情，所以在这个时代，任何人都不会故意实现对本地磁盘的任意访问。

下一个最好的办法是让用户下载一个 ZIP 存档并告诉他在任何他喜欢的地方解压缩。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-05T16:55:37.893

您不能来自 Silverlight。您唯一可以访问的是独立存储。

[http://blog.paranoidferret.com/index.php/2007/10/12/silverlight-tutorial-using-isolated-storage/](http://blog.paranoidferret.com/index.php/2007/10/12/silverlight-tutorial-using-isolated-storage/)

[http://msdn.microsoft.com/en-us/library/bdts8hk0.aspx](http://msdn.microsoft.com/en-us/library/bdts8hk0.aspx)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-06T12:45:13.860

**警告：这些答案中的大多数都是不正确的。**

您*可以*在 MSIE（使用 ActiveX FileSystemObject）和 Firefox（使用 nsIFileOutputStream）中通过 Javascript 写入文件。在这两种情况下，用户都会看到一个安全对话，可以允许或拒绝读取或写入。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-05T18:00:48.700

我已经使用 Scripting.FileSystemObject 来执行此操作。只能在 IE 中工作，并且只能在非常宽松和不安全的安全设置下工作，但它可能适用于企业的 Intranet 站点，至少它对我有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-05T19:02:26.267

Google Gears 有一种方法来进行客户端存储。

[http://gears.google.com/](http://gears.google.com/)

也就是说，我怀疑它会做你正在尝试的事情。我认为您最好让服务器端的东西下载文件并将它们放入客户端的 .zip 文件中，然后再将其传递给它们。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-05T18:06:26.910

正如之前回答的那样，这必须通过服务器端完成，Silverlight 和 JavaScript 被沙盒化以禁用这种类型的安全漏洞。我建议将文件打包到服务器上的 zip 存档中，然后下载 zip 存档。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-05T18:28:35.290

您可以通过 ActiveX 控件或 Java 小程序执行此操作。无论采用哪种方式，项目都必须使用代码签名证书进行签名。您可以使用自签名证书，但警告对话框会越来越响亮。

然后，您可以使用 Javascript 调用签名控件并保存文件。在创建这样的小程序时要非常小心。您不想允许任何其他网站使用此控件，因此该控件必须实现以下某些功能：

1.  只在某个网站上工作。
2.  仅将文件保存在特定位置。
3.  提示用户将文件保存在哪里，以便他们知道正在发生这种情况，并且不会在后台静默发生。

您可能可以在某个地方找到可以用 Javascript 控制的控件或小程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-05T16:56:05.723

我不相信这是可能的，因为它会产生无数的安全问题。我认为这是安全的唯一方法是混合用户权限和某种方式（在客户端）验证网站的真实性以及他们想要下载到我的计算机的文件。

您可以做的一种方法是触发“FileSaveDialog”，但我认为这不是您想要的。也许先打包文件集合然后触发是实现目标的方法。Silverlight 仅允许每个域 1mb 的隔离存储，并且绝对不会让站点访问客户端硬盘驱动器。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-05-28T07:13:37.407

这并不能直接回答这个问题，但 Adob​​e Flex 4 允许使用[FileReference](http://sherifabdou.com/2008/09/flex-4-gumbo-using-filereference-to-upload-download-without-a-server/)类来做这件事。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-09-29T23:20:33.520

Silverlight 4 OOB 允许访问用户的文档目录。

# erlang - Erlang中的命名节点

> ID：413736
> 
> 赞同：8
> 
> 时间：2009-01-05T16:52:46.560
> 
> 标签：erlang

我正在使用 5.4 文档中的[分布式编程教程](http://www.erlang.org/doc/getting_started/conc_prog.html#3.4)，并且遇到了节点名称的问题。

由于破折号，我的 MacBook 的默认名称 ( `jamess-macbook`) 不能很好地与 Erlang 的节点命名方案配合使用：

```
(salt@jamess-macbook)4> {my_process, pepper@jamess-macbook} ! start
** exception error: bad argument in an arithmetic expression
     in operator  -/2
        called as pepper@jamess - macbook 
```

我确信有一种简单的方法可以解决这个问题，除了重命名我想在其上运行 Erlang 的所有机器，但我在文档中看不到它。

有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-05T18:30:42.447

你只需要正确引用原子。`'pepper@jamess-macbook'`（带单引号）是节点的名称。

> 如果原子不是以小写字母开头或包含除字母数字字符、下划线 (_) 或 @ 之外的其他字符，则应将原子括在单引号 (') 中。-- [Erlang 参考手册](http://erlang.org/doc/reference_manual/data_types.html#2.3)

使用短节点名称 ( `-sname`) 会产生各种其他后果（与长节点名称节点的互操作性有限，不会将 dns 信息加载到 inet_db 等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-05T16:59:14.330

启动 Erlang 解释器：

```
$ erl -sname node_name 
```

`node_name`您要用来指代机器的名称在哪里。

您甚至可以通过启动多个解释器实例来模拟单台机器上的分布式系统，每个实例都有不同的节点名称。

# c# - 通过重新排序优化 if 语句

> ID：413740
> 
> 赞同：2
> 
> 时间：2009-01-05T16:53:57.227
> 
> 标签：c#, optimization

我记得曾经读过一次，评估成员的顺序很重要。如

```
if (null == myClass) 
```

那么更好（更快？）

```
if (myClass == null) 
```

是这样吗？如果是这样，有人可以解释如何以及为什么？如果答案需要一种语言，那么就瞄准 c#。
谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-01-05T16:56:37.923

不，它并不快。这是旧 C 时代的遗物，它避免了像这样的错误

```
if(myClass = null) /* accident, sets myClass to null instead of comparing */ 
```

所以你总是在左边有常数：

```
if(null = myClass) /* throws an error at compile time */ 
```

但是，我相信在 C# 中这样做是没有意义的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-05T16:59:40.587

它并不快，因为 == 符号的两边都需要评估。如果您有多个条件，则适用[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)规则。
条件一个接一个地被评估，直到得到一个明确的答案，直到那时。
所以如果你有

```
if ((a != null) && (someLongCheck()) ... 
```

a 为 null 则`someLongCheck()`不会被调用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-05T17:04:58.687

好吧，这完全取决于语言和编译器。使用框架自带的C#编译器，没关系，因为IL输出是一样的。这是一个示例例程：

```
static void Main(string[] args)
{
    // Create the instance.
    MyClass instance = new MyClass();

    if (null == instance)
    {
    }

    if (instance == null)
    {
    }
} 
```

第一次比较的IL如下：

```
L_0007: ldnull 
L_0008: ldloc.0 
L_0009: ceq 
L_000b: ldc.i4.0 
L_000c: ceq 
L_000e: stloc.1 
L_000f: ldloc.1 
L_0010: brtrue.s L_0014
L_0012: nop 
L_0013: nop 
```

第二个：

```
L_0014: ldloc.0 
L_0015: ldnull 
L_0016: ceq 
L_0018: ldc.i4.0 
L_0019: ceq 
L_001b: stloc.1 
L_001c: ldloc.1 
L_001d: brtrue.s L_0021
L_001f: nop 
L_0020: nop 
```

如您所见，除了堆栈中项目的顺序外，输出几乎相同。操作是一样的。

如前所述，它是旧 C 时代的遗物，其中任何值为 0 的东西都被评估为 false，如果你错过了一个等号，则赋值被评估为条件。

在 .NET 中您不必担心这一点，因为条件仅接受布尔值，但如果您与真/假进行比较，将文字值放在首位可能仍然是更好的编码实践，以免意外评估作业。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-05T17:08:54.810

> 我记得曾经读过一次，评估成员的顺序很重要。

除了其他人所说的之外，我想您还记得阅读 if 语句中的语句顺序会影响其评估。

由于`&&`and`||`运算符重载，您可以使用以下指南调整 yoru 代码以获得更好的性能：

*   使用 时`&&`，将条件排序，以便最有可能失败的条件首先出现。
*   使用 时`||`，将条件排序，以便最有可能成功的条件排在第一位。

假设您的业务要求您每周一生成 TPS 报告，您可能会编写如下代码：

样品 #1：

```
if (DateTime.Today.DayOfWeek == DayOfWeek.Monday
    && !Database.TpsReportsExist())
{
    // create TpsReports
} 
```

示例 #2：

```
if (!Database.TpsReportsExist()
    && DateTime.Today.DayOfWeek == DayOfWeek.Monday)
{
    // create TpsReports
} 
```

Samples 1 and 2 are equivalent, but Sample #2 executes a query against the database no matter what day of week it is. Sample #1 avoids the unnecessary database hit, so we save a few CPU cycles and runtime.

The sample above is trivial, but it can make a huge difference in performance if you were executing this kind of code in a tight loop.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-05T16:57:03.523

除非你的编译器真的很笨，否则它不会更快。

这确实意味着如果你不小心输入 = 而不是 == 你会得到一个编译错误，我相信这就是成语的来源。

就个人而言，我会说不要在条件中使用赋值，并打开编译器警告，告诉你什么时候这样做 - 然后你可以使用 - 对我来说 - 更自然

```
 if (myClass ==  null) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-05T16:57:31.527

不，这没什么区别。将文字放在左侧是一个古老的 C/C++ 编程技巧，可以避免意外键入 = 而不是 == 时的痛苦。由于文字不是左值，因此当您弄错时会出现编译错误。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-05T16:58:41.070

据我所知，第一种表示法比第二种表示更好，不是出于性能目的，而是为了避免 C 和 C 儿童语言中的常见错误：

如果你把常量放在 == 的左边，把变量放在右边，编译器会检测你是否输入了 = 来代替 ==。

当然，当您比较两个变量时，这不起作用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-05T17:00:52.050

个人评估中的项目顺序，如您所要求的，是无关紧要的。代码仍然必须解析语句的两边以确定相等或不相等。

我听到的唯一有任何意义的赞成它的意见是为了可读性，因为眼睛首先看到了预期值。我个人觉得这种风格难以理解。

# sharepoint - 根据不断变化的数据模型检查报告

> ID：413742
> 
> 赞同：0
> 
> 时间：2009-01-05T16:54:15.977
> 
> 标签：sharepoint, reporting-services, rdl

我正在开发一个 SharePoint 应用程序，其中数据保存在列表中。为了便于报告，我们在 SQL Server 2005 中创建将列表链接在一起的视图，我们的 Reporting Services 模型基于这些视图。

随着用户添加/修改/删除字段，我们的视图变得陈旧。当我们重新创建视图时，一些报告不再有效。允许用户修改字段并自动更新现有报告（或通过更改字段通知管理员报告已损坏）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-18T08:07:43.167

您是否考虑过直接从列表中报告，也许使用像[http://www.enesyssoftware.com/](http://www.enesyssoftware.com/)这样的产品，这是一个报告服务数据扩展。当您的用户添加/删除列时，这仍然无助于您的报告过时。

# sql-server - SQL Server 引用计算列

> ID：413764
> 
> 赞同：27
> 
> 时间：2009-01-05T16:57:21.260
> 
> 标签：sql-server, tsql, calculated-columns

我有一个带有计算列的 select 语句，我想在另一个计算列中使用一个计算列的值。这可能吗？这是一个人为的例子来展示我想要做什么。

```
SELECT [calcval1] = CASE Statement, [calcval2] = [calcval1] * .25 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-01-05T17:01:58.863

不。

选择中单行的所有结果都是原子的。也就是说，您可以将它们全部视为并行发生并且不能相互依赖。

如果您指的是计算列，那么您需要更新公式的输入，以便在选择期间更改结果。

将计算列视为宏或迷你视图，在调用它们时会注入一些计算。

例如，这些列总是相同的：

```
-- assume that 'Calc' is a computed column equal to Salaray*.25
SELECT Calc, Salary*.25 Calc2 FROM YourTable 
```

另请记住，该`persisted`选项不会改变任何这些。它保留了适合索引的值，但原子性不会改变。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-05T17:54:34.703

不幸的是，并非如此，但有时值得的解决方法是

```
SELECT [calcval1], [calcval1] * .25 AS [calcval2]
FROM (SELECT [calcval1] = CASE Statement FROM whatever WHERE whatever) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-22T09:15:59.597

是的，这是可能的。

使用[WITH 语句](https://msdn.microsoft.com/en-us/library/ms175972.aspx)进行嵌套选择：

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-05T17:05:37.157

我能想到两种方法来做到这一点。首先要了解，就 SQL Server 而言，在语句运行之前，calval1 列不存在，因此不能直接使用它，如您的示例所示。因此，您可以将计算放在那里两次，一次用于 calval1，一次用于替换 calval2 计算中的 calcval1。另一种方法是创建一个包含 calval1 的派生表，然后在派生表之外计算 calval2，如下所示：

```
select calcval1*.25 as calval2, calval1, field1, field2
from (select casestament as cavlval1, field1, field2 from my table) a 
```

您需要测试两者的性能。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-20T15:39:37.977

您应该使用外部应用而不是子选择：

```
select V.calc,V.calc*0.25 from FOO outer apply (select case Statement as calc) V 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T17:02:29.317

您不能在 Select 子句中“重置”计算列的值，如果这是您要尝试做的事情...计算列的值基于计算列公式。哪个可以包含另一个计算列的值....但是您不能重置 Select 子句中的公式...如果您要做的只是“输出”基于两个计算列的值，（如您的语法中的问题读取”然后“[calcval2]”
在

```
SELECT [calcval1] = CASE Statement, [calcval2] = [calcval1] * .25 
```

只会成为 Select 子句输出中的列别名。

还是您在问如何定义一个计算列的公式以基于另一个计算列？

# svn - 如何在单个 xml 文件中为分支中的所有非二进制文件获取递归 svn blame 报告？

> ID：413777
> 
> 赞同：2
> 
> 时间：2009-01-05T17:00:29.680
> 
> 标签：svn, annotations, nant, nantcontrib

如何获得分支中所有非二进制文件的完全递归 svn blame 报告，其中输出位于 xml 格式的单个文件中，包括修订、日期、作者、文件名和路径以及行的文本文件本身？整个输出需要在一个文件中。它将通过 CCNet 实例作为构建的一部分执行。

可用的工具是 nant 和 nantcontrib 的最新稳定版本、msbuild 和最新的命令行 svn。

以下是我遇到的一些问题： 命令行 svn blame 命令不支持目录递归。Blame 的 --xml 选项不包括每一行的实际文本，尽管它确实包含其他所有内容。默认情况下，nantcontrib 正在传递 --quiet 参数（与任务引用相反），这在 blame 命令上不受支持。Nantcontrib svn 任务可能不接受 --xml 参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-05T21:13:43.553

简单的答案是没有任何简单的方法可以做到这一点。最好、最正确的方法是编写自己的 svn 客户端（或扩展现有的客户端），使其具有您需要的功能。一点都不琐碎。

还有一个错误的方法，这也涉及编写代码。**不要这样做**：

```
寻找 。-类型 f | grep -v .svn | xargs svn 责备 > line_data

```

```
寻找 。-类型 f | grep -v .svn | xargs svn --xml 责备 > xml_data

```

`svn`您可以将这两个命令一起编写脚本以避免运行`find`两次，但这仍然会非常缓慢。雪上加霜，您必须自己解析这两个文件，以将实际的源代码行添加到 xml 数据中。

可悲的是，我认为这是标准 svn 客户端对您想要的支持的程度，我找不到任何其他做得更好的客户端（有些甚至不支持`blame`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-15T09:07:39.713

我不知道您使用的是什么操作系统。但是您可以尝试使用简单的 FOR 循环和命令“svn ls -R”递归地列出分支（工作区/url）中的所有文件，然后将其通过管道传输到“svn blame --xml”。

我已经在我的 SVN 命令行提示符中进行了尝试，它工作正常（Windows XP、SVN 1.4.4）。我使用的命令如下：

FOR /F "usebackq delims==" %i IN ( `svn ls -R http://myurl/mybranch`) DO @svn blame --xml %i

注意：如果您在工作区（反映您的分支根）中键入此命令并使用“svn ls -R”而不是上述命令中的 url，则可以避免一些“找不到 url”类型的错误。

希望这可以帮助。

# asp.net - HttpContext 并为 WebForms 和 MVC 编写组件

> ID：413796
> 
> 赞同：1
> 
> 时间：2009-01-05T17:05:02.227
> 
> 标签：asp.net, asp.net-mvc, webforms, httpcontext, ihttphandler

我正在编写一个我希望能够在 MVC 和 WebForms Web 应用程序中使用的组件，但我不确定如何处理 HttpContext 处理方式之间的差异。

我的组件涉及自定义 IHttpHandler（用于 WebForms）或自定义 ActionResult（用于 MVC）。

所以我有几个问题：

*   有没有办法在不破坏模型的情况下将 IHttpHandler 与 MVC 一起使用？
*   在尝试编写适用于两者的代码时使用 HttpContext.Current 是否可以接受？对我来说这似乎有点暴力（不知道为什么），但替代方案是编写和实现一个相当冗长的接口来处理 HttpContext 和 ControllerContext 之间的抽象。
*   我会完全错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-05T17:58:08.453

1.  是的，您可以只使用`routes.IgnoreRoute("MyHandler.ashx")`. 它将回退到原始的 ASP.NET 处理，而不会破坏模型。
2.  不，我认为使用`HttpContext.Current`. 我认为当您编写自己的处理程序时，MVC 不是很适用。您正在为**ASP.NET**而不是 ASP.NET MVC 或 ASP.NET Web 窗体编写代码。很容易让它在这两种模型上工作（使用 Web 表单的 OOTB，在 MVC 中使用 IgnoreRoute）。你可能会让事情变得比他们应该做的更复杂！请记住，设计模式（例如 MVC）的唯一目的是简单。不要把事情复杂化！
3.  `goto 2;`只需编写一个简单的处理程序！

# java - 如何知道在 Spring 2.0 Controller 方法中当前 servlet 上下文中映射了哪些 URL？

> ID：413799
> 
> 赞同：3
> 
> 时间：2009-01-05T17:06:01.167
> 
> 标签：java, spring, servlets

在 Spring 2.0 中，是否有一种快速的方法可以从 Controller 方法中获取当前 servlet 上下文的映射 URL 列表？

我正在编写一个名为 的方法`getMappedUrls()`，该方法的目的是显示在当前 servlet 上下文中映射了哪些 url。

此方法用于生成可用服务的小型在线文档。

谢谢！

[编辑]

Kent Lai 的回答对我有用：

```
final Map<Object, AbstractUrlHandlerMapping> beans =
    getApplicationContext().getBeansOfType(AbstractUrlHandlerMapping.class);
for (final AbstractUrlHandlerMapping bean : beans.values())
{
    final Map<String, Object> mapping = bean.getHandlerMap();
    for(final String url : mapping.keySet())
        urls.add(url);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-06T04:18:44.427

这听起来是个有趣的想法，因此我深入研究了*Spring Web MVC*源代码以了解是否有办法。

*首先，我为我的 spring 框架日志记录（ log4j* ）打开了调试，我注意到映射是在我的`org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping`类中完成的（因为我正在使用它）。

进一步挖掘，我注意到所有处理程序映射都添加到处理程序映射中，您可以从 `org.springframework.web.servlet.handler.AbstractUrlHandlerMapping#getHandlerMap`

假设您正在使用派生自它的处理程序。

接下来，我发现`DispatcherServlet`正在使用`HandlerMapping`（`AbstractUrlHandlerMapping`和`AbstractHandlerMapping`）实现的 来解析 url（显然他们必须使用它）。事实证明，它`DispatcherServlet`包含另一个 handlerMappings 列表

`org.springframework.web.servlet.DispatcherServlet#handlerMappings`

这里的坏消息是，它是一个受保护的类实例变量。

所以我最好的建议（如果这可以被认为是最好的）你可以找出所有映射的网址是

1.  获取`ApplicationContext`.
2.  找出至少类型的所有bean `AbstractUrlHandlerMapping`（因为任何进一步的东西都不会告诉你任何映射的url）。
3.  迭代列表并调用`getHandlerMap`并获取所有keySet，即映射的url。

请注意，这是我从`@RequestMapping`注释的使用中挖掘出来的。如果您在 spring 配置文件中映射 url，我不确定它有什么不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T17:35:11.310

servlet 规范从 servlet 代码中隐藏了这些信息。您只能获取用于当前请求的上下文路径。如果您可以访问 web.xml，您就可以从那里推断出映射，但这有点麻烦。您还可以让每个 servlet 在启动时自行注册。

# html - 网络安全，隐藏字段（无敏感数据）是否存在问题？

> ID：413802
> 
> 赞同：17
> 
> 时间：2009-01-05T17:08:05.373
> 
> 标签：html, security, hidden-fields

我正在和同事讨论。我们必须实施一些安全标准。我们知道不要将“敏感、地址、出生日期”信息存储在隐藏字段中，但通常可以为您的应用程序使用隐藏字段。

例如：

```
action=goback 
```

与将其添加到查询字符串中相比，对此类信息使用隐藏字段似乎更安全。它是黑客可以用来攻击您的应用程序的少了一条信息。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-01-05T17:15:42.440

黑客可以通过使用拦截代理（或任意数量的工具）访问隐藏字段，就像查询字符串值一样容易。

我不认为使用隐藏字段有什么问题，只要它们不用于任何敏感的内容，并且您可以像验证来自客户端的任何其他值一样验证它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-05T17:10:58.223

使字段“隐藏”与安全性几乎无关，应该被视为 UI 决定。无论如何，任何“黑客”都会阅读您的 HTML 源代码。

最好是根本不显示敏感信息，或者，如果必须，使用 SSL（以防止网络中介拦截数据）和登录挑战的某种组合（以防止未经授权的访问）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-05T17:15:53.143

如果您要公开最终用户无法获得的信息和/或在返回时未对其进行验证，那么这只是一个安全漏洞。

我会改为将所述信息存储在服务器端会话变量中......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-05T17:17:40.720

从安全的角度来看，将数据存储在隐藏字段中与将数据存储在查询字符串中完全相同。事实上，如果您的表单使用 GET 操作，无论如何它都会以查询字符串结束。

隐藏字段与安全性完全无关；它们只是一种可以将数据存储在表单中而无需*强迫*用户查看的方法。它们没有提供*阻止*用户看到它的方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-05T17:34:11.717

隐藏字段并不总是一个问题，但它们应该始终敲响警钟，因为它们有两个潜在问题：

1）如果数据是敏感的，它将它暴露给客户端（例如使用代理，或者只是查看源 - 尝试以编程方式阻止这种情况是没有意义的）

2) 如果数据被服务器解释，有知识的用户可以改变它。举一个愚蠢的例子，如果隐藏字段包含用户的银行余额，他们可以使用代理或一些非标准客户端让服务器认为他们的银行余额是他们选择的任何东西。

第二个是 webapps 漏洞的一大来源。与会话关联的数据应保存在服务器端，除非您有一种在服务器上对其进行验证的方法（例如，如果该字段由服务器签名或加密）。

只要您确定自己没有落入这些陷阱中的任何一个，就可以使用它们。根据经验，我不会使用隐藏字段，除非您很乐意在查询字符串中看到数据，或者如果 javascript 需要它们进行处理。在后一种情况下，您仍然需要确保服务器正在验证，不要假设客户端会运行您的 javascript。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-05T17:27:20.920

正如其他人所提到的，查询字符串和隐藏字段本质上都是公共数据，用户可以查看。

如果您将数据放在查询字符串上，要记住的一件事是人们会传递 url，因此不应包含任何特定于当前用户的信息。

如果不能直接输入该状态，那么在 url 中不包含状态信息可能也是一个好主意。或者至少您需要处理查询字符串中的无效状态信息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-04-08T18:36:53.877

考虑加密隐藏字段的名称和值以进行篡改检查，因为黑客仍然可以控制您的隐藏字段并以他们想要的方式操纵它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-05T17:15:06.280

我会说这并不比将项目放在查询字符串中更安全。毕竟，人们总是可以在网站上查看源代码（并且没有任何方法可以防止这种情况发生，因为人们总是可以以编程方式下载源代码）。

这里更好的解决方案是使用在服务器上生成的密钥加密字段的名称和值，并且只加密服务器。除非服务器被黑客入侵，否则客户端不会知道值的名称是什么，或者它的值是什么。

当然，由于这是来自客户端，您仍然需要检查返回的数据的有效性，不要只是想当然地认为它没有以您没有指定的方式进行更改。

为此，您将需要使用散列来确保该值未被篡改。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-05T17:17:37.443

一般来说，不要对敏感数据使用隐藏的表单字段。仅适用于您意识到处理“收到的”不安全的静态非敏感 POST 数据。我唯一一次使用它们是存储会话令牌，因为它们在收到 POST 时被渲染和检查。为了防止 CSRF 攻击或至少使它们变得更加困难。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-05T17:48:21.003

除了其他发帖人提供的所有其他有用建议之外，我还要补充一点，隐藏字段使您的应用程序不会像 url 查询字符串值那样容易受到 SQL 注入攻击。与往常一样，清理您的输入。

# linux - 有没有办法让非 root 进程绑定到 Linux 上的“特权”端口？

> ID：413807
> 
> 赞同：443
> 
> 时间：2009-01-05T17:09:37.210
> 
> 标签：linux, root, ipv6, iptables, linux-capabilities

对我的开发框有这个限制是非常烦人的，因为除了我之外永远不会有任何用户。

我知道[标准的解决方法](http://www.debian-administration.org/articles/386)，但没有一个完全符合我的要求：

1.  [authbind](http://en.wikipedia.org/wiki/Authbind)（Debian 测试中的版本，1.0，仅支持 IPv4）
2.  [使用 iptables REDIRECT 目标将低端口重定向到高端口](http://www.frozentux.net/iptables-tutorial/iptables-tutorial.html#REDIRECTTARGET)（ip6tables 的“nat”表尚未实现，iptables 的 IPv6 版本）
3.  sudo（以root身份运行是我要避免的）
4.  SELinux（或类似的）。（这只是我的开发箱，我不想引入很多额外的复杂性。）

是否有一些简单`sysctl`的变量允许非 root 进程绑定到 Linux 上的“特权”端口（端口小于 1024），或者我只是运气不好？

编辑：在某些情况下，您可以[使用功能](https://stackoverflow.com/questions/413807/is-there-a-way-for-non-root-processes-to-bind-to-privileged-ports-1024-on-linux#414258)来执行此操作。

* * *

## 回答 #1

> 赞同：445
> 
> 时间：2009-01-05T19:46:44.693

好的，感谢指出能力系统和`CAP_NET_BIND_SERVICE`能力的人。如果你有一个最近的内核，确实可以使用它来以非 root 身份启动服务，但绑定低端口。简短的回答是你这样做：

```
setcap 'cap_net_bind_service=+ep' /path/to/program 
```

然后任何时候`program`执行，之后它就会有`CAP_NET_BIND_SERVICE`能力。`setcap`在 debian 包`libcap2-bin`中。

现在注意事项：

1.  您至少需要一个 2.6.24 内核
2.  如果您的文件是脚本，这将不起作用。（即，使用 #! 行来启动解释器）。在这种情况下，据我所知，您必须将该功能应用于解释器可执行文件本身，这当然是一场安全噩梦，因为任何使用该解释器的程序都将具有该功能。我找不到任何干净、简单的方法来解决这个问题。
3.  Linux 将禁用 LD_LIBRARY_PATH 在任何`program`具有提升权限（如`setcap`或`suid`. 因此，如果您`program`使用它自己的`.../lib/`，您可能需要考虑其他选项，例如端口转发。

资源：

*   [能力（7）手册页](http://www.kernel.org/doc/man-pages/online/pages/man7/capabilities.7.html)。如果您要在生产环境中使用功能，请仔细阅读这篇文章。这里有一些关于如何跨 exec() 调用继承功能的非常棘手的细节。
*   [setcap 手册页](http://man7.org/linux/man-pages/man8/setcap.8.html)
*   [“在 GNU/Linux 上绑定 1024 以下的端口，无需 root”](http://www.wensley.org.uk/info#setpcaps)：第一次将我指向`setcap`.

注意：[RHEL 首先在 v6 中添加了这个](http://www.redhat.com/promo/summit/2010/presentations/summit/whats-next/wed/sgrubb-2-rhel6-security/RHEL6-Security-Overview-2010-Final.pdf)。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2009-11-19T11:57:18.030

您可以进行端口重定向。这就是我为在 Linux 机器上运行的 Silverlight 策略服务器所做的

```
iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 943 -j REDIRECT --to-port 1300 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2009-01-05T17:29:56.763

标准的方法是让它们成为“setuid”，以便它们以 root 身份启动，然后在它们绑定到端口但开始接受到它的连接之前丢弃该 root 特权。您可以在 Apache 和 INN 的源代码中看到很好的示例。我听说 Lighttpd 是另一个很好的例子。

另一个例子是 Postfix，它使用多个通过管道进行通信的守护进程，其中只有一个或两个（除了接受或发出字节之外几乎不做任何事情）以 root 身份运行，其余的以较低权限运行。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2015-01-16T17:25:11.633

**2017 年更新：**

# 使用 [authbind][1]

*免责声明（每 2021 年更新）：请注意，authbind 通过 LD_PRELOAD 工作，仅在您的程序使用 LIBC 时使用，如果您的程序使用 GO 或任何其他避免 C 的编译器编译，则（或可能）不是这种情况。如果您使用 go，请为受保护的端口范围设置内核参数，请参阅帖子底部。</EndUpdate>

Authbind 比 CAP_NET_BIND_SERVICE 或自定义内核要好得多。

*   CAP_NET_BIND_SERVICE 授予对二进制文件的信任，但不提供对每个端口访问的控制。

*   Authbind 授予用户/组信任并提供对每个端口访问的控制，并支持 IPv4 和 IPv6（最近添加了 IPv6 支持）。

1.  安装：`apt-get install authbind`

2.  为所有用户和组配置对相关端口的访问，例如 80 和 443：

    > sudo touch /etc/authbind/byport/80
    > sudo touch /etc/authbind/byport/443
    > sudo chmod 777 /etc/authbind/byport/80
    > sudo chmod 777 /etc/authbind/byport/443

3.  `authbind`
    通过（可选地指定`--deep`或其他参数，请参阅手册页）执行您的命令：

    ```
     authbind --deep /path/to/binary command line args

     e.g.  

         authbind --deep java -jar SomeServer.jar 
    ```

* * *

作为 Joshua 关于破解内核的绝妙（=除非您知道自己在做什么，否则不推荐）建议的后续行动：

我先把它贴在[这里](https://serverfault.com/questions/112795/how-can-i-run-a-server-on-linux-on-port-80-as-a-normal-user/660121#660121)。

简单的。使用普通或旧内核，您不需要。
正如其他人指出的那样，iptables 可以转发端口。
正如其他人所指出的， CAP_NET_BIND_SERVICE 也可以完成这项工作。
当然，如果您从脚本启动程序，CAP_NET_BIND_SERVICE 将失败，除非您在 shell 解释器上设置上限，这是没有意义的，您也可以以 root 身份运行您的服务......
例如对于 Java，您必须应用它到 JAVA JVM

```
sudo /sbin/setcap 'cap_net_bind_service=ep' /usr/lib/jvm/java-8-openjdk/jre/bin/java 
```

显然，这意味着任何 Java 程序都可以绑定系统端口。
用于单声道/.NET 的 Dito。

我也很确定 xinetd 不是最好的想法。
但是既然这两种方法都是hack，为什么不通过解除限制来解除限制呢？
没有人说你必须运行一个普通的内核，所以你可以运行你自己的。

您只需下载最新内核（或您当前拥有的内核）的源代码。之后，你去：

```
/usr/src/linux-<version_number>/include/net/sock.h: 
```

你在那里寻找这条线

```
/* Sockets 0-1023 can't be bound to unless you are superuser */
#define PROT_SOCK       1024 
```

并将其更改为

```
#define PROT_SOCK 0 
```

如果您不想遇到不安全的 ssh 情况，请将其更改为：#define PROT_SOCK 24

通常，我会使用您需要的最低设置，例如 79 用于 http，或 24 在端口 25 上使用 SMTP 时。

这已经是全部了。
编译内核并安装它。
重启。
完成了——那个愚蠢的限制已经消失了，这也适用于脚本。

以下是编译内核的方法：

[https://help.ubuntu.com/community/Kernel/Compile](https://help.ubuntu.com/community/Kernel/Compile)

```
# You can get the kernel-source via package linux-source, no manual download required
apt-get install linux-source fakeroot

mkdir ~/src
cd ~/src
tar xjvf /usr/src/linux-source-<version>.tar.bz2
cd linux-source-<version>

# Apply the changes to PROT_SOCK define in /include/net/sock.h

# Copy the kernel config file you are currently using
cp -vi /boot/config-`uname -r` .config

# Install ncurses libary, if you want to run menuconfig
apt-get install libncurses5 libncurses5-dev

# Run menuconfig (optional)
make menuconfig

# Define the number of threads you wanna use when compiling (should be <number CPU cores> - 1), e.g. for quad-core
export CONCURRENCY_LEVEL=3
# Now compile the custom kernel
fakeroot make-kpkg --initrd --append-to-version=custom kernel-image kernel-headers

# And wait a long long time

cd .. 
```

简而言之，如果您想保持安全，请使用 iptables，如果您想确保此限制不再困扰您，请编译内核。

注意：最近，不再需要更新内核。
您现在可以设置

```
sysctl net.ipv4.ip_unprivileged_port_start=80 
```

或者坚持

```
sysctl -w net.ipv4.ip_unprivileged_port_start=80. 
```

如果这产生错误，只需使用 nano 编辑 /etc/sysctl.conf 并在此处设置参数以在重新启动后保持持久性。

或通过 procfs

```
echo 80 | sudo tee /proc/sys/net/ipv4/ip_unprivileged_port_start 
```

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2009-01-05T17:32:13.313

或修补您的内核并删除检查。

（最后的选择，不推荐）。

在`net/ipv4/af_inet.c`中，删除读取的两行

```
 if (snum && snum < PROT_SOCK && !capable(CAP_NET_BIND_SERVICE))
              goto out; 
```

并且内核将不再检查特权端口。

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2018-07-20T09:33:07.827

由于某种原因，没有人提到将 sysctl net.ipv4.ip_unprivileged_port_start 降低到您需要的值。示例：我们需要将我们的应用绑定到 443 端口。

```
sysctl net.ipv4.ip_unprivileged_port_start=443 
```

有人可能会说，存在潜在的安全问题：非特权用户现在可能会绑定到其他特权端口（444-1024）。但是你可以用 iptables 轻松解决这个问题，通过阻塞其他端口：

```
iptables -I INPUT -p tcp --dport 444:1024 -j DROP
iptables -I INPUT -p udp --dport 444:1024 -j DROP 
```

与其他方法的比较。这种方法：

*   从某些方面来看，（IMO）甚至比设置 CAP_NET_BIND_SERVICE/setuid 更安全，因为应用程序根本没有 setuid，甚至部分（实际上是功能）。例如，要捕获启用功能的应用程序的核心转储，您需要更改 sysctl fs.suid_dumpable（这会导致另一个潜在的安全问题）此外，当设置 CAP/suid 时，/proc/PID 目录归 root 所有，所以您的非 root 用户将无法获得运行进程的完整信息/控制权，例如，用户将无法（在常见情况下）通过 /proc/PID/fd/ 确定哪些连接属于应用程序（netstat -aptn | grep PID）。
*   存在安全缺陷：当您的应用程序（或任何使用端口 443-1024 的应用程序）由于某种原因关闭时，另一个应用程序可能会占用该端口。但是这个问题也可以应用于 CAP/suid（如果你在解释器上设置它，例如 java/nodejs）和 iptables-redirect。使用 systemd-socket 方法排除此问题。使用 authbind 方法只允许特殊用户绑定。
*   不需要在每次部署新版本的应用程序时设置 CAP/suid。
*   不需要应用程序支持/修改，如 systemd-socket 方法。
*   不需要内核重建（如果运行版本支持此 sysctl 设置）
*   不像 authbind/privbind 方法那样执行 LD_PRELOAD，这可能会影响性能、安全性、行为（是吗？尚未测试）。其余的 authbind 是非常灵活和安全的方法。
*   优于 iptables REDIRECT/DNAT 方法，因为它不需要地址转换、连接状态跟踪等。这仅在高负载系统上很明显。

根据具体情况，我会在 sysctl、CAP、authbind 和 iptables-redirect 之间进行选择。我们有这么多选择真是太好了。

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2013-08-03T16:06:13.947

您可以设置本地 SSH 隧道，例如，如果您希望端口 80 访问绑定到 3000 的应用程序：

```
sudo ssh $USERNAME@localhost -L 80:localhost:3000 -N 
```

这具有使用脚本服务器的优点，并且非常简单。

* * *

## 回答 #8

> 赞同：24
> 
> 时间：2019-07-15T20:43:31.483

现代 Linux 支持`/sbin/sysctl -w net.ipv4.ip_unprivileged_port_start=0`.

* * *

## 回答 #9

> 赞同：20
> 
> 时间：2016-05-27T15:17:55.433

我知道这是一个老问题，但现在有了最近的（> = 4.3）内核，终于有了一个很好的答案——环境功能。

[快速的答案是从 git](https://git.kernel.org/cgit/linux/kernel/git/morgan/libcap.git/)获取最新（尚未发布）版本的 libcap 的副本并编译它。将生成的`progs/capsh`二进制文件复制到某处（`/usr/local/bin`是一个不错的选择）。然后，以 root 身份启动您的程序

```
/usr/local/bin/capsh --keep=1 --user='your-service-user-name' \
    --inh='cap_net_bind_service' --addamb='cap_net_bind_service' \ 
    -- -c 'your-program' 
```

按顺序，我们是

*   声明当我们切换用户时，我们希望保留我们当前的能力集
*   将用户和组切换到“您的服务用户名”
*   将`cap_net_bind_service`功能添加到继承和环境集
*   分叉`bash -c 'your-command'`（因为`capsh`使用 after 的参数自动启动 bash `--`）

这里有很多事情要做。

首先，我们以 root 身份运行，因此默认情况下，我们获得了全套功能。`setuid`其中包括使用和`setgid`系统调用切换 uid 和 gid 的能力。然而，通常当一个程序这样做时，它会失去它的一组功能——这使得删除 root 的旧方法`setuid`仍然有效。该`--keep=1`标志告诉`capsh`发出`prctl(PR_SET_KEEPCAPS)`系统调用，这会在更改用户时禁用功能的删除。用户的实际更改`capsh`发生在`--user`运行`setuid`and的标志上`setgid`。

我们需要解决的下一个问题是如何以一种在`exec`我们孩子之后进行的方式设置能力。能力系统一直有一个“继承”的能力集，即“在 execve(2) 中保留的一组能力”[[能力(7)](http://man7.org/linux/man-pages/man7/capabilities.7.html) ]。虽然这听起来像是解决了我们的问题（只是将`cap_net_bind_service`功能设置为继承，对吗？），但这实际上只适用于特权进程 - 我们的进程不再具有特权，因为我们已经更改了用户（使用`--user`标志）。

新的环境能力集解决了这个问题——它是“在非特权程序的 execve(2) 中保留的一组能力”。通过放入`cap_net_bind_service`环境集，当`capsh`exec 是我们的服务器程序时，我们的程序将继承此功能并能够将侦听器绑定到低端口。

如果您有兴趣了解更多信息，功能[手册页](http://man7.org/linux/man-pages/man7/capabilities.7.html)对此进行了详细说明。跑`capsh`通`strace`也很有信息量！

* * *

## 回答 #10

> 赞同：19
> 
> 时间：2011-10-09T06:19:33.040

文件功能并不理想，因为它们可能会在包更新后中断。

恕我直言，理想的解决方案应该是能够创建具有可继承`CAP_NET_BIND_SERVICE`集的外壳。

这是一种有点复杂的方法：

```
sg $DAEMONUSER "capsh --keep=1 --uid=`id -u $DAEMONUSER` \
     --caps='cap_net_bind_service+pei' -- \
     YOUR_COMMAND_GOES_HERE" 
```

`capsh`实用程序可以在 Debian/Ubuntu 发行版的 libcap2-bin 包中找到。这是发生的事情：

*   `sg`将有效组 ID 更改为守护程序用户的 ID。这是必要的，因为`capsh`GID 保持不变，我们绝对不想要它。
*   设置位“保持 UID 更改的功能”。
*   将 UID 更改为`$DAEMONUSER`
*   删除所有大写字母（此时所有大写字母仍然存在，因为`--keep=1`），除了可继承`cap_net_bind_service`
*   执行您的命令（'--' 是分隔符）

结果是具有指定用户和组以及`cap_net_bind_service`特权的进程。

例如，`ejabberd`启动脚本中的一行：

```
sg $EJABBERDUSER "capsh --keep=1 --uid=`id -u $EJABBERDUSER` --caps='cap_net_bind_service+pei' -- $EJABBERD --noshell -detached" 
```

* * *

## 回答 #11

> 赞同：16
> 
> 时间：2009-01-06T02:07:23.320

另外两个简单的可能性：

对于“绑定在低端口并将控制权交给您的守护程序的守护程序”，有一个旧的（过时的）解决方案。它被称为inetd（或xinetd）。缺点是：

*   你的守护进程需要在标准输入/标准输出上进行对话（如果你不控制守护进程——如果你没有源——那么这可能是一个阻碍，尽管某些服务可能有一个 inetd 兼容性标志）
*   为每个连接派生一个新的守护进程
*   这是链条中的一个额外环节

优点：

*   可在任何旧 UNIX 上使用
*   一旦你的系统管理员设置了配置，你就可以开始你的开发了（当你重新构建你的守护进程时，你可能会失去 setcap 功能吗？然后你将不得不回到你的管理员那里“请先生.. .")
*   daemon 不必担心那些网络问题，只需要在 stdin/stdout 上进行讨论
*   可以配置为根据要求以非 root 用户身份执行您的守护进程

另一种选择：从特权端口到可以运行目标守护程序的任意高编号端口的黑客代理（netcat 甚至*更强大的东西）。*（Netcat 显然不是生产解决方案，而是“只是我的开发箱”，对吧？）。这样，您可以继续使用支持网络的服务器版本，只需要 root/sudo 来启动代理（在启动时），不会依赖复杂/可能脆弱的功能。

* * *

## 回答 #12

> 赞同：15
> 
> 时间：2009-06-15T14:08:34.780

我的“标准解决方法”使用 socat 作为用户空间重定向器：

```
socat tcp6-listen:80,fork tcp6:8080 
```

请注意，这不会扩展，分叉很昂贵，但这是 socat 的工作方式。

* * *

## 回答 #13

> 赞同：14
> 
> 时间：2009-01-05T17:49:12.247

Linux 支持支持更细粒度权限的功能，而不仅仅是“此应用程序以 root 身份运行” [。](http://www.securityfocus.com/infocus/1400)其中一项功能是`CAP_NET_BIND_SERVICE`绑定到特权端口 (<1024)。

不幸的是，我不知道如何利用它来以非 root 身份运行应用程序，同时仍然提供它`CAP_NET_BIND_SERVICE`（可能使用[`setcap`](http://man7.org/linux/man-pages/man8/setcap.8.html)，但肯定会有一个现有的解决方案）。

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2012-02-03T12:55:13.027

[systemd](http://www.freedesktop.org/wiki/Software/systemd)是 sysvinit 的替代品，它可以选择启动具有特定功能的守护程序。选项 Capabilities=, CapabilityBoundingSet= 在[systemd.exec(5) 手册](http://0pointer.de/public/systemd-man/systemd.exec.html)页中。

* * *

## 回答 #15

> 赞同：12
> 
> 时间：2014-02-08T23:29:21.850

***TLDR：对于“答案”（如我所见），请跳至此答案中的 >>TLDR<< 部分。***

好的，我已经想通了（这次是真的），这个问题的答案，我的这个答案也是为推广[另一个](https://stackoverflow.com/a/9128979/1781435)我认为是“最好的答案”的答案（在这里和推特上）道歉的一种方式”，但在尝试之后，发现我错了。孩子们从我的错误中吸取教训：在您自己实际尝试之前，不要宣传某些东西！

再次，我在这里查看了所有答案。我已经尝试了其中的*一些*（并选择不尝试其他的，因为我根本不喜欢这些解决方案）。我认为解决方案是使用`systemd`它的`Capabilities=`和`CapabilitiesBindingSet=`设置。经过一段时间的努力，我发现这不是解决方案***，因为：***

**功能旨在限制根进程！**

正如 OP 明智地指出的那样，最好避免这种情况（如果可能的话，对于所有的守护进程！）*。*

您不能在单元文件中`User=`和单元文件中使用与功能相关的选项，因为在调用（或任何函数）时*总是*会重置功能。换句话说，当分叉并删除它的权限时，这些功能会被重置。没有办法解决这个问题，内核中的所有绑定逻辑都是围绕 uid=0 的，而不是功能。这意味着能力不太可能成为这个问题的正确答案（至少在短期内）。顺便说一句，正如其他人所提到的，这不是一个解决方案。它对我不起作用，它不能很好地与脚本一起使用，而且只要文件更改，它们就会被重置。`Group=``systemd`*`execev``systemd``setcap`*

 *在我微薄的辩护中，我确实声明（在我现在已删除的评论中）詹姆斯的[iptables](https://stackoverflow.com/a/15232454/1781435)建议（OP 也提到）是“第二好的解决方案”。:-P

***>>TLDR<<***

解决方案是结合动态命令，如下所示（[取自 DNSChain](https://github.com/okTurtles/dnschain/blob/master/scripts/dnschain.service)`systemd`）：`iptables`

```
[Unit]
Description=dnschain
After=network.target
Wants=namecoin.service

[Service]
ExecStart=/usr/local/bin/dnschain
Environment=DNSCHAIN_SYSD_VER=0.0.1
PermissionsStartOnly=true
ExecStartPre=/sbin/sysctl -w net.ipv4.ip_forward=1
ExecStartPre=-/sbin/iptables -D INPUT -p udp --dport 5333 -j ACCEPT
ExecStartPre=-/sbin/iptables -t nat -D PREROUTING -p udp --dport 53 -j REDIRECT --to-ports 5333
ExecStartPre=/sbin/iptables -A INPUT -p udp --dport 5333 -j ACCEPT
ExecStartPre=/sbin/iptables -t nat -A PREROUTING -p udp --dport 53 -j REDIRECT --to-ports 5333
ExecStopPost=/sbin/iptables -D INPUT -p udp --dport 5333 -j ACCEPT
ExecStopPost=/sbin/iptables -t nat -D PREROUTING -p udp --dport 53 -j REDIRECT --to-ports 5333
User=dns
Group=dns
Restart=always
RestartSec=5
WorkingDirectory=/home/dns
PrivateTmp=true
NoNewPrivileges=true
ReadOnlyDirectories=/etc

# Unfortunately, capabilities are basically worthless because they're designed to restrict root daemons. Instead, we use iptables to listen on privileged ports.
# Capabilities=cap_net_bind_service+pei
# SecureBits=keep-caps

[Install]
WantedBy=multi-user.target 
```

在这里，我们完成以下工作：

*   守护进程在 5333 上侦听，但在 53 上成功接受了连接，这要归功于`iptables`
*   我们可以将命令包含在单元文件本身中，因此我们可以省去人们的麻烦。`systemd`为我们清理防火墙规则，确保在守护进程未运行时将其删除。
*   我们从不以 root 身份运行，并且我们使特权升级成为不可能（至少`systemd`声称如此），即使守护进程被破坏并设置`uid=0`.

`iptables`不幸的是，它仍然是一个丑陋且难以使用的实用程序。例如，如果守护程序正在侦听`eth0:0`而不是`eth0`，则命令会[略有不同](http://forums.debian.net/viewtopic.php?f=5&t=102913#p529157)。

* * *

## 回答 #16

> 赞同：11
> 
> 时间：2017-01-27T09:37:41.970

使用 systemd，您只需稍微修改您的服务以接受预激活的套接字。

您可以稍后使用[systemd socket activate](https://www.freedesktop.org/software/systemd/man/systemd.socket.html)。

不需要任何功能、iptables 或其他技巧。

这是此简单[python http 服务器示例中相关 systemd 文件的内容](https://github.com/Spindel/systemd-socketactivation)

文件`httpd-true.service`

```
[Unit]
Description=Httpd true 

[Service]
ExecStart=/usr/local/bin/httpd-true
User=subsonic

PrivateTmp=yes 
```

文件`httpd-true.socket`

```
[Unit]
Description=HTTPD true

[Socket]
ListenStream=80

[Install]
WantedBy=default.target 
```

* * *

## 回答 #17

> 赞同：10
> 
> 时间：2015-08-03T19:49:47.680

端口重定向对我们来说最有意义，但是我们遇到了一个问题，即我们的应用程序会在本地解析一个也需要重新路由的 url；（这意味着你[shindig](http://comments.gmane.org/gmane.comp.web.shindig.devel/9087)）。

这也将允许您在访问本地计算机上的 url 时被重定向。

```
iptables -A PREROUTING -t nat -p tcp --dport 80 -j REDIRECT --to-port 8080
iptables -A OUTPUT -t nat -p tcp --dport 80 -j REDIRECT --to-port 8080 
```

* * *

## 回答 #18

> 赞同：7
> 
> 时间：2013-03-05T19:28:18.263

启动时：

```
iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8080 
```

然后您可以绑定到您转发到的端口。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2013-08-03T17:25:29.367

还有“djb 方式”。您可以使用此方法在 tcpserver 下的任何端口上以 root 身份启动您的进程，然后它将在进程启动后立即将进程控制权交给您指定的用户。

```
#!/bin/sh

UID=$(id -u username)
GID=$(id -g username)
exec tcpserver -u "${UID}" -g "${GID}" -RHl0 0 port /path/to/binary & 
```

有关详细信息，请参阅：[http ://thedjbway.b0llix.net/daemontools/uidgid.html](http://thedjbway.b0llix.net/daemontools/uidgid.html)

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2014-09-19T07:51:49.100

使用[privbind](http://manpages.ubuntu.com/manpages/lucid/man1/privbind.1.html "手册页")实用程序：它允许非特权应用程序绑定到保留端口。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2020-10-05T16:43:42.553

将 8080 端口绑定到 80 并打开 80 端口：

```
sudo iptables -t nat -A OUTPUT -o lo -p tcp --dport 80 -j REDIRECT --to-port 8080
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT 
```

然后以普通用户身份在 8080 端口上运行程序。

然后您将能够访问`http://127.0.0.1`端口`80`

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2014-02-19T23:46:23.530

由于 OP 只是开发/测试，因此不太时尚的解决方案可能会有所帮助：

setcap 可用于脚本的解释器以授予脚本功能。如果全局解释器二进制文件上的 setcaps 不可接受，请制作二进制文件的本地副本（任何用户都可以）并让 root 访问此副本上的 setcap。Python2（至少）与脚本开发树中解释器的本地副本一起正常工作。不需要 suid，因此 root 用户可以控制用户可以访问的功能。

如果您需要跟踪解释器的系统范围更新，请使用如下所示的 shell 脚本来运行您的脚本：

```
#!/bin/sh
#
#  Watch for updates to the Python2 interpreter

PRG=python_net_raw
PRG_ORIG=/usr/bin/python2.7

cmp $PRG_ORIG $PRG || {
    echo ""
    echo "***** $PRG_ORIG has been updated *****"
    echo "Run the following commands to refresh $PRG:"
    echo ""
    echo "    $ cp $PRG_ORIG $PRG"
    echo "    # setcap cap_net_raw+ep $PRG"
    echo ""
    exit
}

./$PRG $* 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2015-09-04T03:17:32.963

我尝试了 iptables PREROUTING REDIRECT 方法。在较旧的内核中，似乎[IPv6 不支持](http://stackoverflow.com/a/4911503/60075)这种类型的规则。但显然它现在在 ip6tables v1.4.18 和 Linux 内核 v3.8 中得到支持。

我还发现 PREROUTING REDIRECT 不适用于机器内启动的连接。要处理来自本地机器的连接，还需要添加一个 OUTPUT 规则 - 请参阅[iptables port redirect not working for localhost](https://serverfault.com/a/211544/10513)。例如：

```
iptables -t nat -I OUTPUT -o lo -p tcp --dport 80 -j REDIRECT --to-port 8080 
```

我还发现 PREROUTING REDIRECT[也会影响转发的数据包](https://serverfault.com/q/720005/10513)。也就是说，如果机器也在接口之间转发数据包（例如，如果它充当连接到以太网的 Wi-Fi 接入点），那么 iptables 规则也会捕获连接的客户端到 Internet 目的地的连接，并将它们重定向到机器。这不是我想要的——我只想重定向指向机器本身的连接。我发现我可以让它只影响发往盒子的数据包，方法是添加`-m addrtype --dst-type LOCAL`. 例如：

```
iptables -A PREROUTING -t nat -p tcp --dport 80 -m addrtype --dst-type LOCAL -j REDIRECT --to-port 8080 
```

另一种可能性是使用 TCP 端口转发。例如使用`socat`：

```
socat TCP4-LISTEN:www,reuseaddr,fork TCP4:localhost:8080 
```

然而，该方法的一个缺点是，侦听端口 8080 的应用程序不知道传入连接的源地址（例如，用于记录或其他识别目的）。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2015-09-04T09:10:26.733

2015 年 9 月的回答：

ip6tables 现在支持 IPV6 NAT： http: [//www.netfilter.org/projects/iptables/files/changes-iptables-1.4.17.txt](http://www.netfilter.org/projects/iptables/files/changes-iptables-1.4.17.txt)

您将需要内核 3.7+

证明：

```
[09:09:23] root@X:~ ip6tables -t nat -vnL
Chain PREROUTING (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination
    0     0 REDIRECT   tcp      eth0   *       ::/0                 ::/0                 tcp dpt:80 redir ports 8080
    0     0 REDIRECT   tcp      eth0   *       ::/0                 ::/0                 tcp dpt:443 redir ports 1443

Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination

Chain OUTPUT (policy ACCEPT 6148 packets, 534K bytes)
 pkts bytes target     prot opt in     out     source               destination

Chain POSTROUTING (policy ACCEPT 6148 packets, 534K bytes)
 pkts bytes target     prot opt in     out     source               destination 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-11-11T15:09:20.350

[在libcap](https://sites.google.com/site/fullycapable)网站上有一个使用[文件共享库](https://sites.google.com/site/fullycapable/capable-shared-objects)链接到非特权应用程序的工作示例。最近在回答[有关向共享库添加功能](https://stackoverflow.com/a/69924486/5739452)的问题时提到了这一点。

# sql-server - 为什么全文索引选项是灰色的？

> ID：413809
> 
> 赞同：21
> 
> 时间：2009-01-05T17:10:56.193
> 
> 标签：sql-server, sql-server-2008, full-text-search

我安装了带有高级服务的 SQL Server 2008 Express，但是当我尝试创建一个新数据库时，全文索引选项是灰色的，我相信全文索引已经安装，因为我做了如下查询：

```
use [mydbname]
select fulltextserviceproperty('isfulltextinstalled') 
```

这个查询返回1，所以我认为它已经安装成功了。

我安装的带有高级服务版本的 MSSQL Express 支持全文索引。参考页面： http:
[//www.microsoft.com/downloads/details.aspx?familyid=B5D1B8C3-FDA5-4508-B0D0-1311D670E336 &displaylang=en](http://www.microsoft.com/downloads/details.aspx?familyid=B5D1B8C3-FDA5-4508-B0D0-1311D670E336&displaylang=en)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-02-09T14:13:14.933

Make sure NAMED PIPES is enabled in the protocols in configuration manager as full text service needs this!

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-05T17:25:30.173

服务是否启动？我认为 2008 Express 的默认安装已停止 FTS。

在 2005 Express (IIRC) 中，您必须手动制作目录，而不是通过管理工作室；你可以试试看是否有错误：

```
use MyDatabaseName
go
EXEC sp_fulltext_database 'enable'
go
CREATE FULLTEXT CATALOG MyFullTextCatalog 
```

如果您需要手动创建索引，您可以执行以下操作：

```
CREATE FULLTEXT INDEX ON MyDatabaseName.dbo.MyTableToSearch
(
MySearchColumn
Language 1033
)
KEY INDEX MyCurrentIndex; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-03-04T20:10:49.857

您可以使用以下代码查看每个数据库的所有启用全文的值：

```
select name, DATABASEPROPERTY(name,'IsFulltextEnabled')
from master..sysdatabases where dbid > 4 
```

波利斯

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-07T15:58:14.873

巧合的是，我刚刚阅读了 SQL 2008 中 FTS 的性能指南，并遇到了这个问题：

> Management Studio 中的“新建数据库”对话框有一个灰色的选项。在名称和所有者下方有一个灰色的复选框。在 SQL Server 2008 的已发布版本中，全文选项默认启用。以防任何客户在脚本中引用它。

所以看起来它是故意变灰的:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-05T17:34:35.787

[此处](http://msdn.microsoft.com/en-us/library/ms143793.aspx)的页面提供了有关如何确认您已安装 SQL Server 安装的全文以及事后安装它的步骤的信息。

[这个页面](http://www.intraspin.com/webstrategyblog/sql-server-2005-express-full-text-search-greyed-out)有一个很好的设置它的演练。

此外，请确保该服务正在运行。

希望他们中的一个会为您指明正确的方向。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T17:15:21.317

以下列表突出显示了 SQL Server Express 中不支持的主要 SQL Server 组件：

*   报告服务
*   通知服务
*   集成服务
*   分析服务
*   **全文搜索**
*   OLAP 服务/数据挖掘

来自：http: [//msdn.microsoft.com/en-us/library/ms165636.aspx](http://msdn.microsoft.com/en-us/library/ms165636.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-13T11:19:40.053

**配置 SQL Server 全文时，请注意数据库中设置的当前兼容性级别**

如果它可能对遇到我发现的相同问题的人有所帮助，我将其发布在这里，因为它与问题有关。

我有一个外部公司安装的 SQL Server 数据库。我们要求对其软件进行一些修改，需要在数据库中添加全文搜索功能。

我在该公司数据库旁边有一个从头开始创建的测试数据库，用于测试这些服务的配置。

当我尝试在 SQL Server 2008 中创建全文目录时，所有选项对于公司的数据库都是灰色的，而在从头开始创建的数据库中一切正常，屏幕没有变灰，例如我可以声明我想要重音被忽略。

绝望之下，我开始对比两个数据库的每个参数，发现公司的数据库兼容级别设置为'Sql Server 2000（80）'。一旦我将其更改为“SQL Server 2008 (100)”，一切都开始正常工作，全文目录创建屏幕不再灰显。

我在这篇文章中发现了一条与此兼容性问题有关的注释： [https ://msdn.microsoft.com/en-us/library/ms142583.aspx#OV_ft_predicates](https://msdn.microsoft.com/en-us/library/ms142583.aspx#OV_ft_predicates)

# sql - 选择 * 除了

> ID：413819
> 
> 赞同：61
> 
> 时间：2009-01-05T17:15:08.930
> 
> 标签：sql, sql-except

是否有任何 RDBMS 实现类似的东西`SELECT * EXCEPT`？我所追求的是获取除特定 TEXT/BLOB 字段之外的所有字段，我只想选择其他所有字段。

几乎每天我都会向我的同事抱怨有人应该实现这个......它不存在真是太烦人了。

**编辑：**我理解大家对`SELECT *`. 我知道与`SELECT *`. 但是，至少在我的情况下，这不会用于任何生产级代码，甚至是开发级代码；严格用于调试，当我需要轻松查看所有值时。

正如我在一些评论中所说，我工作的地方严格来说是一个命令行商店，通过 ssh 做所有事情。这使得很难使用任何 gui 工具（不允许与数据库的外部连接）等等。

不过感谢您的建议。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-01-05T17:39:08.663

正如其他人所说，在查询中这样做不是一个好主意，因为将来有人更改表结构时很容易出现问题。但是，有一种方法可以做到这一点......我不敢相信我实际上是在暗示这个，但是本着回答实际问题的精神......

使用动态 SQL 执行此操作...这会执行除“说明”列之外的所有列。您可以轻松地将其转换为函数或存储过程。

```
declare @sql varchar(8000),
    @table_id int,
    @col_id int

set @sql = 'select '

select @table_id = id from sysobjects where name = 'MY_Table'

select @col_id = min(colid) from syscolumns where id = @table_id and name <> 'description'
while (@col_id is not null) begin
    select @sql = @sql + name from syscolumns where id = @table_id and colid = @col_id

    select @col_id = min(colid) from syscolumns where id = @table_id and colid > @col_id and name <> 'description'
    if (@col_id is not null) set @sql = @sql + ','
    print @sql
end

set @sql = @sql + ' from MY_table'

exec @sql 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-01-05T17:22:16.500

在不包含 blob 列的表上创建视图

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-04-10T17:52:44.943

> 是否有任何 RDBMS 实现了 SELECT * EXCEPT 之类的功能？

是的，Google Big Query 实现了[SELECT * EXCEPT](https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax#select_except)：

> **SELECT * EXCEPT 语句指定要从结果中排除的一列或多列的名称。输出中省略了所有匹配的列名。**

```
WITH orders AS(
  SELECT 5 as order_id,
  "sprocket" as item_name,
  200 as quantity
)
SELECT * EXCEPT (order_id)
FROM orders; 
```

输出：

```
+-----------+----------+
| item_name | quantity |
+-----------+----------+
| sprocket  | 200      |
+-----------+----------+ 
```

* * *

**编辑：**

H2 数据库也支持`SELECT * EXCEPT (col1, col2, ...)`语法。

> [通配符表达式](https://h2database.com/html/grammar.html#wildcard_expression)

> SELECT 语句中的通配符表达式。通配符表达式表示所有可见列。**可以使用可选的 EXCEPT 子句排除某些列。**

* * *

**编辑2：**

Hive 支持：[REGEX 列规范](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Select)

> 如果配置属性 hive.support.quoted.identifiers 设置为 none，则 SELECT 语句可以在 0.13.0 之前的 Hive 版本或 0.13.0 及更高版本中采用基于正则表达式的列规范。

> **以下查询选择除 ds 和 hr 之外的所有列。**

```
SELECT `(ds|hr)?+.+` FROM sales 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-08-09T21:58:38.567

DB2 允许这样做。列的属性/说明符为`Hidden`.

来自[syscolumns 文档](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.sqlref/src/tpc/db2z_sysibmsyscolumnstable.htm)

> HIDDEN
> CHAR(1) NOT NULL WITH DEFAULT 'N'
> 指示列是否被隐式隐藏：
> 
> P 部分隐藏。该列从 SELECT * 中隐式隐藏。
> 
> N 不隐藏。该列对所有 SQL 语句可见。

[创建表文档](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0000927.html)作为创建列的一部分，您将指定`IMPLICITLY HIDDEN`修饰符

下面是来自[隐式隐藏列](http://db2portal.blogspot.com/2007/05/implicitly-hidden-columns-db2-9-for-zos.html)的示例 DDL

```
CREATE TABLE T1
(C1 SMALLINT NOT NULL,
C2 CHAR(10) IMPLICITLY HIDDEN,
C3 TIMESTAMP)
IN DB.TS; 
```

这种能力是否能够促成 DB2 的采用，留给未来的读者练习。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-02-15T13:02:17.553

> 是否有任何 RDBMS 实现类似 SELECT * EXCEPT

是的！真正的关系语言[Tutorial D](http://en.wikipedia.org/wiki/D_%28data_language_specification%29#Tutorial_D)允许根据要删除的属性而不是要保留的属性来表达投影，例如

```
my_relvar { ALL BUT description } 
```

事实上，它相当于 SQL`SELECT *`的`{ ALL BUT }`.

您对 SQL 的建议很有价值，但我听说它已经被用户组提交给 SQL 标准委员会，并被供应商组拒绝:(

SQL Server也已[明确请求](https://connect.microsoft.com/SQLServer/feedback/details/615886/allow-all-columns-except-for-in-select-update-insert)它，但该请求因“无法修复”而关闭。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-02-27T18:25:29.193

是的，终于有了 :) SQL 标准 2016 定义了**[多态表函数](https://modern-sql.com/blog/2017-06/whats-new-in-sql-2016)**

> SQL:2016 引入了不需要预先指定结果类型的多态表函数 (PTF)。相反，它们可以提供在运行时确定返回类型的描述组件过程。PTF 的作者和 PTF 的用户都不需要提前声明返回的列。
> 
> SQL:2016 所描述的 PTF 尚未在任何测试数据库中可用。10 有兴趣的读者可以参考 ISO 发布的免费技术报告“SQL 中的多态表函数”。以下是报告中讨论的一些示例：
> 
> *   CSVreader，读取 CVS 文件的标题行以确定返回列的数量和名称
>     
>     
> *   Pivot（实际上是 unpivot），它将列组转换为行（例如：phonetype、phonenumber）——我：没有更多的硬编码字符串 :)
>     
>     
> *   TopNplus，每个分区通过 N 行和额外的一行以及剩余行的总数

* * *

`Oracle 18c`实现了这个机制。[18c Skip_col 多态表函数示例 Oracle Live SQL](https://livesql.oracle.com/apex/livesql/file/content_GA5YI13SCZDGFRUTZYVGS8GO8.html)和[Skip_col 多态表函数示例](https://docs.oracle.com/en/database/oracle/oracle-database/18/lnpls/plsql-optimization-and-tuning.html#GUID-F8E13DDD-710D-4626-824E-B344849C5AFE)

此示例显示如何根据名称/特定数据类型跳过数据：

```
CREATE PACKAGE skip_col_pkg AS  
  -- OVERLOAD 1: Skip by name 
  FUNCTION skip_col(tab TABLE,  col columns)  
           RETURN TABLE PIPELINED ROW POLYMORPHIC USING skip_col_pkg;  

  FUNCTION describe(tab IN OUT dbms_tf.table_t,   
                    col        dbms_tf.columns_t)  
           RETURN dbms_tf.describe_t;  

  -- OVERLOAD 2: Skip by type --  
  FUNCTION skip_col(tab       TABLE,   
                    type_name VARCHAR2,  
                    flip      VARCHAR2 DEFAULT 'False')   
           RETURN TABLE PIPELINED ROW POLYMORPHIC USING skip_col_pkg;  

  FUNCTION describe(tab       IN OUT dbms_tf.table_t,   
                    type_name        VARCHAR2,   
                    flip             VARCHAR2 DEFAULT 'False')   
           RETURN dbms_tf.describe_t;  
END skip_col_pkg; 
```

与身体：

```
CREATE PACKAGE BODY skip_col_pkg AS  

/* OVERLOAD 1: Skip by name   
 * NAME:  skip_col_pkg.skip_col   
 * ALIAS: skip_col_by_name  
 *  
 * PARAMETERS:  
 * tab - The input table  
 * col - The name of the columns to drop from the output  
 *  
 * DESCRIPTION:  
 *   This PTF removes all the input columns listed in col from the output  
 *   of the PTF.  
*/   
  FUNCTION  describe(tab IN OUT dbms_tf.table_t,   
                     col        dbms_tf.columns_t)  
            RETURN dbms_tf.describe_t  
  AS   
    new_cols dbms_tf.columns_new_t;  
    col_id   PLS_INTEGER := 1;  
  BEGIN   
    FOR i IN 1 .. tab.column.count() LOOP  
      FOR j IN 1 .. col.count() LOOP  
      tab.column(i).pass_through := tab.column(i).description.name != col(j);  
        EXIT WHEN NOT tab.column(i).pass_through;  
      END LOOP;  
    END LOOP;  

    RETURN NULL;  
  END;  

 /* OVERLOAD 2: Skip by type  
 * NAME:  skip_col_pkg.skip_col   
 * ALIAS: skip_col_by_type  
 *  
 * PARAMETERS:  
 *   tab       - Input table  
 *   type_name - A string representing the type of columns to skip  
 *   flip      - 'False' [default] => Match columns with given type_name  
 *               otherwise         => Ignore columns with given type_name  
 *  
 * DESCRIPTION:  
 *   This PTF removes the given type of columns from the given table.   
*/   

  FUNCTION describe(tab       IN OUT dbms_tf.table_t,   
                    type_name        VARCHAR2,   
                    flip             VARCHAR2 DEFAULT 'False')   
           RETURN dbms_tf.describe_t   
  AS   
    typ CONSTANT VARCHAR2(1024) := upper(trim(type_name));  
  BEGIN   
    FOR i IN 1 .. tab.column.count() LOOP  
       tab.column(i).pass_through :=   
         CASE upper(substr(flip,1,1))  
           WHEN 'F' THEN dbms_tf.column_type_name(tab.column(i).description)
     !=typ  
           ELSE          dbms_tf.column_type_name(tab.column(i).description) 
     =typ  
         END /* case */;  
    END LOOP;  

    RETURN NULL;  
  END;  

END skip_col_pkg; 
```

和示例用法：

```
-- skip number cols
SELECT * FROM skip_col_pkg.skip_col(scott.dept, 'number'); 

-- only number cols
SELECT * FROM skip_col_pkg.skip_col(scott.dept, 'number', flip => 'True') 

-- skip defined columns
SELECT *   
FROM skip_col_pkg.skip_col(scott.emp, columns(comm, hiredate, mgr))  
WHERE deptno = 20; 
```

我强烈建议阅读整个示例（创建独立函数而不是包调用）。

您可以轻松地重载跳过方法，例如：跳过不以特定前缀/后缀开始/结束的列。

**[db<>fidde 演示](https://dbfiddle.uk/?rdbms=oracle_18&fiddle=2a52baf82bb5a842947d14d3086d5dc4)**

相关：**[如何动态更改 SQL 查询中的列 作者：Chris Saxon](https://blogs.oracle.com/oraclemagazine/how-to-dynamically-change-the-columns-in-a-sql-query)**

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-05T17:17:49.627

远离 SELECT *，你会给自己找麻烦。*始终*准确指定您想要的列。事实上，您所要求的“功能”并不存在，这令人耳目一新。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-01-05T17:19:10.420

我相信它不存在的理由是查询的作者应该（为了性能起见）只请求他们将要查看/需要的内容（因此知道要指定哪些列）——如果有人添加了更多未来的blob，您将撤回您不需要的潜在大字段。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-05T17:21:26.673

正如其他人所说： SELECT * 是一个坏主意。

一些原因：

1.  只得到你需要的（再多的都是浪费）
2.  索引（索引你需要的东西，你可以更快地得到它。如果你也要求一堆非索引列，你的查询计划也会受到影响。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-07-08T03:45:44.400

```
declare @sql nvarchar(max)
        @table char(10)
set @sql = 'select '
set @table = 'table_name'

SELECT @sql = @sql + '[' + COLUMN_NAME + '],'
FROM   INFORMATION_SCHEMA.Columns
WHERE  TABLE_NAME = @table
   and COLUMN_NAME <> 'omitted_column_name'
SET    @sql = substring(@sql,1,len(@sql)-1) + ' from ' + @table

EXEC (@sql); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-12T20:27:09.890

这是一个老问题，但我希望这个答案仍然对其他人有所帮助。也可以修改为添加[多个除了字段](https://stackoverflow.com/a/38925096/4271117)。如果您想取消透视具有许多列[的表，这将非常方便。](https://stackoverflow.com/a/56031632/4271117)

```
DECLARE @SQL NVARCHAR(MAX)
SELECT @SQL = COALESCE(@SQL + ', ', ' ' ) + name FROM sys.columns WHERE name <> 'colName' AND object_id = (SELECT id FROM sysobjects WHERE name = 'tblName')
SELECT @SQL = 'SELECT ' + @SQL + ' FROM ' + 'tblName'
EXEC sp_executesql  @SQL 
```

存储过程：

usp_SelectAllExcept 'tblname', 'colname'

```
ALTER PROCEDURE [dbo].[usp_SelectAllExcept]
(
  @tblName SYSNAME
 ,@exception VARCHAR(500)
)
AS

DECLARE @SQL NVARCHAR(MAX)

SELECT @SQL = COALESCE(@SQL + ', ', ' ' ) + name from sys.columns where name <> @exception and object_id = (Select id from sysobjects where name = @tblName)
SELECT @SQL = 'SELECT ' + @SQL + ' FROM ' + @tblName

EXEC sp_executesql @SQL 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-24T17:41:08.947

我需要像@Glen 所要求的那样用 HASHBYTES() 来缓解我的生活。

我的灵感来自@Jasmine 和@Zerubbabel 的答案。在我的例子中，我有不同的模式，所以同一个表名在 sys.objects 中出现了不止一次。因为这可能会帮助遇到相同情况的人，所以这里是：

```
ALTER PROCEDURE [dbo].[_getLineExceptCol]

@table SYSNAME,
@schema SYSNAME,
@LineId int,
@exception VARCHAR(500)

AS

DECLARE @SQL NVARCHAR(MAX)

BEGIN

SET NOCOUNT ON;

SELECT @SQL = COALESCE(@SQL + ', ', ' ' ) + name 
FROM sys.columns 
WHERE name <> @exception 
AND object_id = (SELECT object_id FROM sys.objects 
                 WHERE name LIKE @table 
                 AND schema_id = (SELECT schema_id FROM sys.schemas WHERE name LIKE @schema))   

SELECT @SQL = 'SELECT ' + @SQL + ' FROM ' + @schema + '.' + @table + ' WHERE Id = ' + CAST(@LineId AS nvarchar(50))

EXEC(@SQL)
END
GO 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-18T15:02:23.130

此处的临时表选项，只需删除不需要的列并从更改的临时表中选择 *。

```
/* Get the data into a temp table */
    SELECT * INTO #TempTable
    FROM 
    table

/* Drop the columns that are not needed */
    ALTER TABLE #TempTable
    DROP COLUMN [columnname]

SELECT * from #TempTable 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-08-04T18:18:44.987

为了完整起见，这在 DremelSQL 方言中是可能的，执行以下操作：

`WITH orders AS (SELECT 5 as order_id, "foobar12" as item_name, 800 as quantity) SELECT * EXCEPT (order_id) FROM orders;`

`+-----------+----------+ | item_name | quantity | +-----------+----------+ | foobar12 | 800 | +-----------+----------+`

在没有 Dremel 的情况下，[这里](https://www.techonthenet.com/sql/except.php)似乎还有另一种方法可以做到这一点。

# c# - 您如何优化获取/设置属性装饰属性的性能？

> ID：413825
> 
> 赞同：3
> 
> 时间：2009-01-05T17:16:22.253
> 
> 标签：c#, reflection

在 C# 中，我用属性标记了一些类的属性，并使用反射来查找这些属性，以便对它们执行获取和设置。但是，我发现以这种方式获取/设置反射的速度大约是 POCO 获取/设置的 10 倍。除了放弃上述基本场景以使用替代技术之外，是否有任何记录在案的技巧可以使这一点显着提高性能，例如某种缓存技术？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-05T17:28:48.280

超越 casperOne 所说的（包括关于检查这是瓶颈的一点），您可能会发现使用[Delegate.CreateDelegate](http://msdn.microsoft.com/en-us/library/system.delegate.createdelegate.aspx)将 getter/setter 转换为委托（a和 an分别用于 getter 和 setter）*非常*有帮助。这可以产生巨大的影响，而且并不难。如果您已经要缓存 PropertyInfo，只需缓存委托对。`Func<T>``Action<T>`

我有[一篇关于 Delegate.CreateDelegate 的博客文章](http://blogs.msmvps.com/jonskeet/2008/08/09/making-reflection-fly-and-exploring-delegates/)——我在移植协议缓冲区时第一次使用它时很生气（有时反射很重）。在那种情况下，它有很大帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-05T17:20:44.443

好吧，一旦获得属性，您总是可以存储该属性的 PropertyInfo 实例并将其映射到适合您的任何键。由于类型是静态的，PropertyInfo 不会改变，存储本地引用不会杀死你。

假设您没有做任何愚蠢的事情来缓存该值（例如将所有 PropertyInfo 实例放在一个长列表中并每次迭代该列表以找到它），您应该没问题。

当然，在你走这条路之前，请确保你没有患上过早的优化疾病。在进行更改之前，确定在您的 Type 实例上不断调用 GetProperty/GetProperties 是应用程序的瓶颈。

# ruby-on-rails - 将 Oulook/Exchange 任务与基于 Linux 的 Rails 集成

> ID：413848
> 
> 赞同：2
> 
> 时间：2009-01-05T17:21:27.327
> 
> 标签：ruby-on-rails, ruby, linux, outlook, exchange-server

是否可以将 MS Outlook/Exchange 任务与 Rails 集成？我知道如何使用 Rails 发送电子邮件，但这并没有使用任何关于交换的“特殊”内容，只是将其指向服务器。

Outlook 任务有什么“特别”之处，以及如何从 Rails 中创建/读取/更新/删除它们。（即使是 CRUD 的一个子集也会很棒。）

PS。我在一个基于 linux 的 rails 系统上，所以依赖于纯 windows 功能的解决方案对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-05T17:50:27.830

如果您正在运行 Exchange 2007，您还应该查看[Exchange Web 服务](http://msdn.microsoft.com/en-us/library/bb204119.aspx)来操作事物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-22T14:53:45.180

我正在用 Ruby 构建一个使用 MS Exchange Web 服务的 MS Exchange 客户端访问库。该代码是 GPL 的，所以有它。请让我知道您有什么样的问题以及您希望看到的其他功能。在这一点上，它的开发非常繁重。

[http://github.com/zenchild/Viewpoint](http://github.com/zenchild/Viewpoint)

干杯，

丹·瓦内克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T17:23:53.983

假设任务存储在 Exchange 中，您应该能够通过 WebDAV 访问任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T18:21:28.843

如果您想在 Ruby 中进行，WebDAV 可能是您的最佳选择。有一个 ruby​​ gem call rexchange 可以解决问题。但是，MSFT 正在逐步淘汰 WebDAV，并用 Zoredache 建议的 Exchange Web 服务取而代之。不幸的是，MSFT 仅在 C# 中提供 API（从技术上讲，它是与语言无关的 SOAP 东西，一些 Java 开发人员似乎成功地使用 EWS 构建了一些东西，但我还知道有人在 Ruby 中做过。）

# c# - 如何为在联网机器上运行的客户端配置 WCF 服务？

> ID：413856
> 
> 赞同：0
> 
> 时间：2009-01-05T17:24:40.440
> 
> 标签：c#, c#-3.0, wcf, wcf-binding

我刚刚创建了一个 WCF 服务/客户端，并且在同一台机器上运行时一切正常。但无法弄清楚如何配置它以在不同的机器上运行。你知不知道怎么？

目前 URI 设置为[http://localHost:8000](http://localHost:8000) ......

但我想我想要类似 net.tcp://MyServer:8000 ......

任何想法都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-05T18:05:12.217

听起来，您将服务和客户端都放在同一个可执行文件中。虽然可以这样做，但当您希望它们在不同的机器上时，您需要有一个服务的可执行文件/主机（自托管或在 IIS 中）和客户端的可执行文件。每个都需要在适当的配置部分中正确配置地址、绑定和合同。所以在服务器上你会有这样的东西：

```
<configuration>
    <system.serviceModel>
        <services>
            <service name="YourService">
                <endpoint address="http://MyServer:8000/..."
                          binding="BasicHttpBinding"
                          contract="Your.IContract" />
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

在客户端上，您将拥有以下内容：

```
<configuration>
    <system.serviceModel>
        <client>
            <endpoint address="http://MyServer:8000/..."
                      binding="BasicHttpBinding"
                      contract="Your.IContract"
                      name="ClientEndpoint" />
        </client>
    </system.serviceModel>
</configuration> 
```

主要是确保客户端和服务器可以通过指定的端口和协议相互通信（主要是确保防火墙不会阻止通信）。要注意的另一件事是更改绑定协议可能会影响服务的其他方面（安全性是一个大问题，也是您可以对服务做什么和不能做什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T17:27:23.807

这里没有足够的信息来回答你的问题。

假设您没有通过代码在 ServiceHost 和代理中设置地址/绑定/合同信息，您需要发布配置文件的部分。

如果您在代码中执行此操作，那么您需要显示您正在使用的代码。

据我所知，您似乎与传输绑定不匹配。服务和客户端必须在同一传输（http、tcp、命名管道等）上。

# c++ - 在 OS X 上跨 C 堆栈帧传播 C++ 异常

> ID：413863
> 
> 赞同：1
> 
> 时间：2009-01-05T17:28:36.113
> 
> 标签：c++, c, macos, exception

我正在开发的应用程序（实际上是一个游戏）使用 XML 进行一些配置。因为我使用 CEGUI 作为 GUI，并且它有自己的 XML 解析对象，所以我将我的代码转换为使用它而不是我自己的手动解析器类。如果文档缺少某些标签上的属性，则会引发异常，这正是我想要的。但是，异常不会通过堆栈上的 C 调用传播；相反，调用了 terminate()。

对于那些不熟悉 CEGUI 的人，它使用基于插件的系统进行 XML 解析。目前有 tinyxml、expat、libxml 和 xerces 的插件。不保证特定的插件存在于 CEGUI 的特定二进制发行版中；唯一的要求是至少有一个可用。所以我的问题不能通过要求使用 C++ 解析器（tinyxml 或 xerces）来解决。

有谁知道解决这个问题的好方法，不需要我将 CEGUI 的源及其 XML 解析器插件依赖项与我的游戏源一起分发？

我还应该注意，这个问题只发生在 OS X 上；它在 GNU/Linux 上运行良好。

下面是一些演示该问题的简单示例代码：

编辑：小代码更正 [http://pastebin.com/m23ba5577](http://pastebin.com/m23ba5577)

谢谢，罗伯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-06T21:50:18.737

参考您发布的源代码，如果您使用 C++ 编译器编译 test.c，事情将按预期工作（您需要将函数设为 extern“C”，我知道您无法在示例之外执行此操作）。

生成的符号差异揭示了正在发生的事情：

C++ 编译器：`g++ -c test.c`

```
00000040 s EH_frame1
         U ___gxx_personality_v0
0000001a T _callIt
0000005c S _callIt.eh
00000088 b _callback
00000000 T _setCallback
00000000 A _setCallback.eh

```

C编译器：`gcc -c test.c`

```
00000019 T _callIt
0000003c b _callback
00000000 T _setCallback

```

如您所见，每个以“.eh”结尾的函数都有一个附加符号和一个 EH_frame1 - 它们包含对发生异常时必须展开的调用帧的描述。如果它们丢失了……除了调用 terminate() 之外别无他法。

鉴于 C 不支持异常，C 编译器不会将这些符号写入目标文件。

因此，如果您不控制这些库的编译方式，最好的办法是在解析之前安装 SIGABRT 处理程序，并将其调用视为“发生异常”。您仍然会丢失实际的错误信息，但您会知道发生了错误信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T22:17:49.243

I'm definitely not an expert but from what I can determine; how the C/C++ run-time will behave with respect to C++ exceptions raised in the presence of C functions on the stack is implementation defined.

I'm curious as to your use of C++ exceptions as the mechanism to handle missing attributes. Do the C XML libraries support the use of C++ exceptions in this fashion? In other words, are the C run-time resources correctly released in the presence of an exception, given that the libraries are designed for the C language?

I would recommend on narrowing down your use of XML libraries to one that supports either C or C++ rather than both so that you can implement one error mechanism.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T17:54:20.473

在示例代码中，没有任何东西可以捕获异常。在这种情况下（抛出的异常没有匹配的 catch 块），c++ 运行时调用 std::terminate。

但我不明白这与你的问题有什么关系......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T18:20:02.653

没错，我确实在 Apple 开发论坛上得到了这个问题的答案。然而，这并不意味着它是唯一的答案。我实际上已经得出了四个答案，所有这些都是次优的：

*   使用我的应用程序分发 Expat、libxml 和 CEGUI，并确保在 OS X 上构建时，Expat 和 libxml 使用 -fexceptions。
*   将我的应用程序可以在 OS X 上使用的解析器插件限制为 tinyxml 和 xerces 插件。
*   将我的 XML 读取代码包装在 setjmp/longjmp 构造中，如果 setjmp 返回真值，则抛出异常。
*   在我的应用程序中完全摆脱 XML 和 CEGUI。

虽然这些答案中的每一个都解决了我的问题，但它们都有缺点。我只是想尽我所能获得所有答案，以做出明智的决定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T17:58:30.373

对于那个很抱歉; 我只是添加了一个更正。如果您在 OS X 上编译并运行该代码，您会注意到它仍然是 terminate()s。

它与我的评论有关的是，它只是对问题的简单演示，而无需发布我的整个应用程序的代码。=D

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T18:03:38.990

我觉得你已经回答了你自己的问题

[http://discussions.apple.com/thread.jspa?threadID=1852579&tstart=0](http://discussions.apple.com/thread.jspa?threadID=1852579&tstart=0)

# iphone - 读取 UISegmentedControl 的身份

> ID：413867
> 
> 赞同：0
> 
> 时间：2009-01-05T17:29:54.080
> 
> 标签：iphone

我有一个`UITableView`大约 30 个自定义单元格，每个单元格都包含一个`UISegmentedControl`. 我已将`UIControlEventValueChanged`活动联系起来以获取`selectedIndex`.

我也想弄个`UISegmentedControl`身份，在这30人中辨认一下`UISegmentedControls`。

`UISegmentedControl`那么，我怎样才能获得触发事件的电流的身份呢？我还没有找到`UISegmentedControl`.

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-05T17:48:09.457

尝试使用 UISegmentedControl 的 tag 属性。您可以将其设置为一个整数（在您的情况下，可能是 1-30），并从 UIControlEventValueChanged 操作访问它。

# c# - BeCubed 6 的许可错误消息

> ID：413876
> 
> 赞同：0
> 
> 时间：2009-01-05T17:32:12.923
> 
> 标签：c#, licensing, versioning

### 无聊介绍：

在我的工作场所，我们有一个非常古老的 WinForms 产品（自 1994 年以来一直在市场上，并且仍在 VB3 上运行）。它有三个非常不同的版本，每个版本都发给一个客户。客户将其传递给他们的用户，其中一些是共享的。这些版本可以并排存在。

五年前，我们用 C#.Net 重写了其中一个版本。两年后，另一个版本（我们称之为版本 M）被重写，两年后，是时候转换最后一个剩余的版本（我们称之为版本 C）了。我们已经工作了一年，本周将投入生产。

在转换期间，已决定不转换任何作为外部模块出售的东西；这些是用 VB6 构建的，它们使用了[BeCubed](http://www.becubed.com/index.htm)和[FarPoint](http://www.fpoint.com/)的几个控件。版本 M 中有两个这样的模块，版本 C 中有三个模块。每个模块都有自己的 MSI 安装程序，由主产品的安装程序安静地运行。

### 错误

在生产过程中，我们发现了一个错误：当在新计算机上安装版本 C，然后安装版本 M，在版本 C 中打开外部模块时，我们会收到一条消息：

![BeCubed 错误](https://lh3.ggpht.com/_L2AGN2rr3tM/SWJBoWNPcVI/AAAAAAAACaA/pPNTMywh4Gw/BeCubed.PNG)

单击确定后，模块工作。此外，当它们以任何其他顺序安装并且版本 M 中的两个模块都可以正常工作时，不会发生这种情况。

### 其他详情

*   所有 OCX 和 DLL 文件都已通过所有模块设置进行了比较；这些文件是相同的。
*   当仅安装一个版本 M 或 C 或首先安装 M 时，所有模块都可以工作。
*   我们拥有我们使用的所有软件的许可证，包括 BeCubed。

* * *

有谁知道什么可能导致这样的错误，可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-07T21:15:01.927

好吧，由于文件没有任何更改，因此注册表中可能发生了某些更改。

但这似乎是您应该联系 BeCubed 的问题，询问他们如何打开扩展日志记录或寻求支持。

目前还没有足够的信息来了解真正发生的事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-08T01:19:43.943

显然，其中一个模块将 OCX 安装到系统目录（默认`C:\Windows\System`），而其他模块将它们安装到程序文件目录（`C:\Program Files\CompanyName\Shared Files`）。这可能会导致双重注册 OCX 或类似的东西时发生冲突。我不知道那里出了什么问题，但是当我们`Shared Files`像其他人一样将一个模块更改为安装在文件夹中时，问题就解决了。我在这里写这个，所以如果有人有类似的问题，他可以检查以确保所有文件都安装在同一位置。

# timezone - 在 Windows CE .NET 4.2 中，为什么 SetTimeZoneInfo 会挂起？

> ID：413878
> 
> 赞同：2
> 
> 时间：2009-01-05T17:32:43.217
> 
> 标签：timezone, pinvoke, windows-ce, opennetcf

我们的产品包含一个任务管理器系统，允许应用程序在预定的时间间隔内运行 DLL 中的代码，指定有关任务失败是否应禁用相关应用程序的规则等。主要用于数据上传、数据下载，本地数据库维护等。使用的功能之一是通过NTP同步设备时间并设置操作系统的时区信息。为此，我们使用 OpenNetCF 的 DateTimeHelper 类，它似乎充当了 Win32 P/Invokes 的包装器。

任务管理器的其他功能之一是，如果任务运行时间超过其分配的时间窗口，任务管理器将 Thread.Abort() 它以允许其他任务运行。我们看到了惊人数量的线程中止，其中堆栈中最高的函数是 OpenNetCF.WindowsCE.NativeMethods.SetTimeZoneInformation()。为什么底层 P/Invoke (SetTimeZoneInfo) 会挂这么长时间？

我们的代码在 Windows CE 4.2 上运行，用户群更小，在 Windows CE 5.0 上运行——这里的代码在两个版本之间是相同的。到目前为止，我已经看到这种情况发生在 4.2 设备上，但从未在 5.0 上发生过，即使 5.0 上的用户数量较少，我想如果它出现在那里我也会看到它。

下面的函数是产生问题的函数。它将时区缩写转换为其全名，然后使用该名称查找正确的时区并尝试将设备的当前时区设置为该时区。

```
        public static bool SetTimeZone(string timeZoneAbbreviation)
        {
            字符串 TimeZoneInfo = string.Empty;
            bool timeZoneChanged = false;

            开关（时区缩写）
            {
                阿拉斯加案例：
                    TimeZoneInfo = ALASKA_TZN；
                    休息;
                案例 ALASKA_ALT：
                    TimeZoneInfo = ALASKA_TZN；
                    休息;
                大西洋案例：
                    时区信息=大西洋_TZN；
                    休息;
                案例大西洋_ALT：
                    时区信息=大西洋_TZN；
                    休息;
                案例中心：
                    时区信息 = CENTRAL_TZN；
                    休息;
                案例 CENTRAL_ALT：
                    时区信息 = CENTRAL_TZN；
                    休息;
                东部案例：
                    TimeZoneInfo = EASTERN_TZN;
                    休息;
                印第安纳州案例：
                    时区信息 = 印第安纳州 TZN；
                    休息;
                夏威夷案例：
                    时区信息 = HAWAII_TZN;
                    休息;
                案例山：
                    时区信息 = MOUNTAIN_TZN；
                    休息;
                亚利桑那案例：
                    时区信息 = ARIZONA_TZN；
                    休息;
                太平洋案例：
                    时区信息 = PACIFIC_TZN；
                    休息;
                案例 PACIFIC_ALT：
                    时区信息 = PACIFIC_TZN；
                    休息;

                默认：                    
                    休息;
            }

            时区信息 += "\0";

            TimeZoneCollection tzc = new TimeZoneCollection();
            tzc.Initialize();

            foreach（时区信息 tzc 中的 tzi）
            {
                字符串 tzDisplayName = tzi.DisplayName.TrimEnd(new char[]{'\\','0'});

                if (tzDisplayName.ToUpper(CultureInfo.CurrentCulture).Equals(TimeZoneInfo.ToUpper(CultureInfo.CurrentCulture)))
                {
                    DateTimeHelper.SetTimeZoneInformation(tzi);
                    System.Globalization.CultureInfo.CurrentCulture.ClearCachedData();
                    timeZoneChanged = true;
                    休息;
                }
            }

            返回时区改变；
        }

```

一如既往地感谢您的帮助。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-05T18:04:16.990

[DateTimeHelper.SetTimeZoneInformation 调用是对SetTimezoneInformation API](http://msdn.microsoft.com/en-us/library/aa450893.aspx)的 P/Invoke 的一个非常薄的包装器（我刚刚在源代码中验证了这一点）。它基本上进行调用并检查返回码——仅此而已，因此几乎可以排除 SDF 本身是根本原因。

接下来，查看[SetTimezoneInformation 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/aa450893.aspx)，这是一个非常简单的同步调用，它返回 TRUE 或 FALSE。这告诉我 API 也可能不是根本原因。

在 CE 中要记住的一件事是，您*永远不能*假设该平台是完美的，因为它是由 OEM 完成的，因此可能会有变化。您在 4.2 而不是 5.0 中看到失败的事实将导致我检查以下内容：

1.  确保 4.2 设备映像已应用所有 QFE
2.  查看 4.2 和 5.0 之间是否存在时区内容的操作系统代码差异（我对此表示怀疑，但我不再安装 PB 4.2）。
3.  检查 OEM 实施以设置时间。更改区域会隐式调用来设置时间，并且 4.2 BSP 中可能存在一个错误，该错误可能会导致您遇到锁定或竞争。

# c# - 如何以编程方式选择 WPF TreeView 中的项目？

> ID：413890
> 
> 赞同：59
> 
> 时间：2009-01-05T17:38:45.607
> 
> 标签：c#, .net, wpf, treeview, itemscontrol

如何以编程方式选择 WPF 中的项目`TreeView`？该`ItemsControl`模型似乎阻止了它。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2010-11-02T17:46:13.643

对于那些仍在寻找此问题的正确解决方案的人来说，下面是一个。我在DaWanderer的代码项目文章“WPF TreeView Selection” [http://www.codeproject.com/KB/WPF/TreeView_SelectionWPF.aspx的评论中找到了这个。](http://www.codeproject.com/KB/WPF/TreeView_SelectionWPF.aspx)它由 Kenrae 于 2008 年 11 月 25 日发布。这对我来说非常有用。谢谢肯雷！

## 这是他的帖子：

让您自己的数据对象拥有 IsSelected 属性，而不是遍历树（我也推荐 IsExpanded 属性）。使用 TreeView 上的 ItemContainerStyle 属性定义树的 TreeViewItems 的样式，该属性将 TreeViewItem 中的这些属性绑定到您的数据对象。像这样的东西：

```
<Style x:Key="LibraryTreeViewItemStyle"
               TargetType="{x:Type TreeViewItem}">
            <Setter Property="IsExpanded"
                        Value="{Binding IsExpanded, Mode=TwoWay}" />
            <Setter Property="IsSelected"
                        Value="{Binding IsSelected, Mode=TwoWay}" />
            <Setter Property="FontWeight"
                        Value="Normal" />
            <Style.Triggers>
                  <Trigger Property="IsSelected"
                              Value="True">
                        <Setter Property="FontWeight"
                                    Value="Bold" />
                  </Trigger>
            </Style.Triggers>
      </Style>

<TreeView ItemsSource="{Binding Path=YourCollection}"
               ItemContainerStyle="{StaticResource LibraryTreeViewItemStyle}"
               ItemTemplate={StaticResource YourHierarchicalDataTemplate}/> 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-01-05T17:44:00.183

由于某种奇怪的原因，这真的很痛苦，您必须使用 ContainerFromItem 来获取容器，然后调用 select 方法。

```
//  selectedItemObject is not a TreeViewItem, but an item from the collection that 
//  populated the TreeView.

var tvi = treeView.ItemContainerGenerator.ContainerFromItem(selectedItemObject) 
          as TreeViewItem;

if (tvi != null)
{
    tvi.IsSelected = true;
} 
```

曾经有一篇关于如何在[此处](http://askernest.com/archive/2008/01/23/how-to-programmatically-change-the-selecteditem-in-a-wpf-treeview.aspx)进行操作的博客条目，但现在链接已失效。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-01-05T17:44:28.390

您需要获取`TreeViewItem`然后设置`IsSelected`为`true`.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-09-17T10:51:49.400

我已经成功使用了这段代码：

```
public static TreeViewItem FindTviFromObjectRecursive(ItemsControl ic, object o) {
  //Search for the object model in first level children (recursively)
  TreeViewItem tvi = ic.ItemContainerGenerator.ContainerFromItem(o) as TreeViewItem;
  if (tvi != null) return tvi;
  //Loop through user object models
  foreach (object i in ic.Items) {
    //Get the TreeViewItem associated with the iterated object model
    TreeViewItem tvi2 = ic.ItemContainerGenerator.ContainerFromItem(i) as TreeViewItem;
    tvi = FindTviFromObjectRecursive(tvi2, o);
    if (tvi != null) return tvi;
  }
  return null;
} 
```

用法：

```
var tvi = FindTviFromObjectRecursive(TheTreeView, TheModel);
if (tvi != null) tvi.IsSelected = true; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2010-08-09T09:15:15.217

这并不像看起来那么简单，Steven 提供的链接在 2008 年发布了一个解决方案，它可能仍然有效，但不能处理虚拟化 TreeViews。此外，该文章的评论中还提到了许多其他问题。没有冒犯，但我也遇到了同样的问题，找不到完美的解决方案。以下是一些对我有很大帮助的文章/帖子的链接-

如何在 TreeView 中展开项目？– 第三部分： [http ://bea.stollnitz.com/blog/?p=59](http://bea.stollnitz.com/blog/?p=59)

以编程方式在 TreeView 中选择项目：http: [//blog.quantumbitdesigns.com/2008/07/22/programmatically-selecting-an-item-in-a-treeview/#respond](http://blog.quantumbitdesigns.com/2008/07/22/programmatically-selecting-an-item-in-a-treeview/#respond)

TreeView、TreeViewItem 和 IsSelected： [http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7e368b93-f509-4cd6-88e7-561e8d3246ae/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7e368b93-f509-4cd6-88e7-561e8d3246ae/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-07T22:09:31.787

我写了一个扩展方法：

```
using System.Windows.Controls;

namespace Extensions
{
    public static class TreeViewEx
    {
        /// <summary>
        /// Select specified item in a TreeView
        /// </summary>
        public static void SelectItem(this TreeView treeView, object item)
        {
            var tvItem = treeView.ItemContainerGenerator.ContainerFromItem(item) as TreeViewItem;
            if (tvItem != null)
            {
                tvItem.IsSelected = true;
            }
        }
    }
} 
```

我可以这样使用：

```
if (_items.Count > 0)
    _treeView.SelectItem(_items[0]); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-06T12:19:10.260

如果您想选择位于孩子的孩子的项目，您可以使用递归来做到这一点。

```
public bool Select(TreeViewItem item, object select) // recursive function to set item selection in treeview
{
    if (item == null)
        return false;
    TreeViewItem child = item.ItemContainerGenerator.ContainerFromItem(select) as TreeViewItem;
    if (child != null)
    {
        child.IsSelected = true;
        return true;
    }
    foreach (object c in item.Items)
    {
        bool result = Select(item.ItemContainerGenerator.ContainerFromItem(c) as TreeViewItem, select);
        if (result == true)
            return true;
    }
    return false;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-06-01T16:50:40.470

试试这个

```
 /// <summary>
    /// Selects the tree view item.
    /// </summary>
    /// <param name="Collection">The collection.</param>
    /// <param name="Value">The value.</param>
    /// <returns></returns>
    private TreeViewItem SelectTreeViewItem(ItemCollection Collection, String Value)
    {
        if (Collection == null) return null;
        foreach(TreeViewItem Item in Collection)
        {
            /// Find in current
            if (Item.Header.Equals(Value))
            {
                Item.IsSelected = true;
                return Item;
            }
            /// Find in Childs
            if (Item.Items != null)
            {
                TreeViewItem childItem = this.SelectTreeViewItem(Item.Items, Value);
                if (childItem != null)
                {
                    Item.IsExpanded = true;
                    return childItem;
                }
            }
        }
        return null;
    } 
```

参考：[http ://amastaneh.blogspot.com/2011/06/wpf-selectedvalue-for-treeview.html](http://amastaneh.blogspot.com/2011/06/wpf-selectedvalue-for-treeview.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-08T13:55:32.117

只是想我会加入我所采用的解决方案，以防万一这可以帮助任何人。请注意，按照 kuninl 的回答，最好的方法是使用像“IsSelected”这样的绑定属性，但在我的情况下，它是一个不遵循 MVVM 的遗留应用程序，所以我最终得到了以下结果。

```
private void ChangeSessionSelection()
{
    foreach (SessionContainer item in this.treeActiveSessions.Items)
    {
        var treeviewItem = this.treeActiveSessions.ItemContainerGenerator.ContainerFromItem(item) as TreeViewItem;

        if (item.Session == this.selectedSession.Session)
        {
            treeviewItem.IsSelected = true;
            treeviewItem.IsExpanded = true;
        }
        else
        {
            treeviewItem.IsSelected = false;
            treeviewItem.IsExpanded = false;
        }
    }            
} 
```

这样做是在 UI 中选择并展开树视图项，该项表示后面代码中选定的数据项。这样做的目的是当用户在同一窗口中的项目控件中选择更改时，在树视图中更改选择。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-14T14:34:38.523

我创建了一个方法，该方法`VisualTreeExt.GetDescendants<T>`返回与指定类型匹配的可枚举元素集合：

```
public static class VisualTreeExt
{
  public static IEnumerable<T> GetDescendants<T>(DependencyObject parent) where T : DependencyObject
  {
    var count = VisualTreeHelper.GetChildrenCount(parent);
    for (var i = 0; i < count; ++i)
    {
       // Obtain the child
       var child = VisualTreeHelper.GetChild(parent, i);
       if (child is T)
         yield return (T)child;

       // Return all the descendant children
       foreach (var subItem in GetDescendants<T>(child))
         yield return subItem;
    }
  }
} 
```

当你要求时，`VisualTreeHelperExt.GetDescendants<TreeViewItem>(MyAmazingTreeView)`你会得到所有的`TreeViewItem`孩子。您可以使用以下代码选择特定值：

```
var treeViewItem = VisualTreeExt.GetDescendants<TreeViewItem>(MyTreeView).FirstOrDefault(tvi => tvi.DataContext == newValue);
if (treeViewItem != null)
  treeViewItem.IsSelected = true; 
```

这是一个有点肮脏的解决方案（可能不是最有效的），如果您使用虚拟化 TreeView，它将无法工作，因为它取决于实际视觉元素的存在。但它适用于我的情况......

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-15T00:17:33.207

是的..我知道这个问题已经过去很多年了，但是..仍然没有快速解决这个问题..所以：

以下将执行 OP 要求的操作。

我基本上所做的是阅读此页面中的所有答案并按照所有相关链接创建一个**一劳永逸的**解决方案来解决这个恼人的问题。

好处：

*   它也支持虚拟化 TreeView。
*   它使用行为技术，所以 XAML 很简单。
*   添加一个依赖属性以允许绑定到选定的 TreeView 项。

*这部分是您需要复制的唯一代码，其他部分只是帮助完成一个示例。*

```
public static class TreeViewSelectedItemExBehavior
{
    private static List<TreeView> isRegisteredToSelectionChanged = new List<TreeView>();

    public static readonly DependencyProperty SelectedItemExProperty =
        DependencyProperty.RegisterAttached("SelectedItemEx",
            typeof(object),
            typeof(TreeViewSelectedItemExBehavior),
            new FrameworkPropertyMetadata(new object(), FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, OnSelectedItemExChanged, null));

    #region SelectedItemEx

    public static object GetSelectedItemEx(TreeView target)
    {
        return target.GetValue(SelectedItemExProperty);
    }

    public static void SetSelectedItemEx(TreeView target, object value)
    {
        target.SetValue(SelectedItemExProperty, value);
        var treeViewItemToSelect = GetTreeViewItem(target, value);
        if (treeViewItemToSelect == null)
        {
            if (target.SelectedItem == null)
                return;
            var treeViewItemToUnSelect = GetTreeViewItem(target, target.SelectedItem);
            treeViewItemToUnSelect.IsSelected = false;
        }
        else
            treeViewItemToSelect.IsSelected = true;
    }

    public static void OnSelectedItemExChanged(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        var treeView = depObj as TreeView;
        if (treeView == null)
            return;
        if (!isRegisteredToSelectionChanged.Contains(treeView))
        {
            treeView.SelectedItemChanged += TreeView_SelectedItemChanged;
            isRegisteredToSelectionChanged.Add(treeView);
        }
    }

    #endregion

    private static void TreeView_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        var treeView = (TreeView)sender;
        SetSelectedItemEx(treeView, e.NewValue);
    }

    #region Helper Structures & Methods

    public class MyVirtualizingStackPanel : VirtualizingStackPanel
    {
        /// <summary>
        /// Publically expose BringIndexIntoView.
        /// </summary>
        public void BringIntoView(int index)
        {
            BringIndexIntoView(index);
        }
    }

    /// <summary>Recursively search for an item in this subtree.</summary>
    /// <param name="container">The parent ItemsControl. This can be a TreeView or a TreeViewItem.</param>
    /// <param name="item">The item to search for.</param>
    /// <returns>The TreeViewItem that contains the specified item.</returns>
    private static TreeViewItem GetTreeViewItem(ItemsControl container, object item)
    {
        if (container != null)
        {
            if (container.DataContext == item)
            {
                return container as TreeViewItem;
            }

            // Expand the current container
            if (container is TreeViewItem && !((TreeViewItem)container).IsExpanded)
            {
                container.SetValue(TreeViewItem.IsExpandedProperty, true);
            }

            // Try to generate the ItemsPresenter and the ItemsPanel.
            // by calling ApplyTemplate.  Note that in the 
            // virtualizing case even if the item is marked 
            // expanded we still need to do this step in order to 
            // regenerate the visuals because they may have been virtualized away.

            container.ApplyTemplate();
            ItemsPresenter itemsPresenter =
                (ItemsPresenter)container.Template.FindName("ItemsHost", container);
            if (itemsPresenter != null)
            {
                itemsPresenter.ApplyTemplate();
            }
            else
            {
                // The Tree template has not named the ItemsPresenter, 
                // so walk the descendents and find the child.
                itemsPresenter = FindVisualChild<ItemsPresenter>(container);
                if (itemsPresenter == null)
                {
                    container.UpdateLayout();

                    itemsPresenter = FindVisualChild<ItemsPresenter>(container);
                }
            }

            Panel itemsHostPanel = (Panel)VisualTreeHelper.GetChild(itemsPresenter, 0);

            // Ensure that the generator for this panel has been created.
            UIElementCollection children = itemsHostPanel.Children;

            MyVirtualizingStackPanel virtualizingPanel =
                itemsHostPanel as MyVirtualizingStackPanel;

            for (int i = 0, count = container.Items.Count; i < count; i++)
            {
                TreeViewItem subContainer;
                if (virtualizingPanel != null)
                {
                    // Bring the item into view so 
                    // that the container will be generated.
                    virtualizingPanel.BringIntoView(i);

                    subContainer =
                        (TreeViewItem)container.ItemContainerGenerator.
                        ContainerFromIndex(i);
                }
                else
                {
                    subContainer =
                        (TreeViewItem)container.ItemContainerGenerator.
                        ContainerFromIndex(i);

                    // Bring the item into view to maintain the 
                    // same behavior as with a virtualizing panel.
                    subContainer.BringIntoView();
                }

                if (subContainer != null)
                {
                    // Search the next level for the object.
                    TreeViewItem resultContainer = GetTreeViewItem(subContainer, item);
                    if (resultContainer != null)
                    {
                        return resultContainer;
                    }
                    else
                    {
                        // The object is not under this TreeViewItem
                        // so collapse it.
                        subContainer.IsExpanded = false;
                    }
                }
            }
        }

        return null;
    }

    /// <summary>Search for an element of a certain type in the visual tree.</summary>
    /// <typeparam name="T">The type of element to find.</typeparam>
    /// <param name="visual">The parent element.</param>
    /// <returns></returns>
    private static T FindVisualChild<T>(Visual visual) where T : Visual
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(visual); i++)
        {
            Visual child = (Visual)VisualTreeHelper.GetChild(visual, i);
            if (child != null)
            {
                T correctlyTyped = child as T;
                if (correctlyTyped != null)
                {
                    return correctlyTyped;
                }

                T descendent = FindVisualChild<T>(child);
                if (descendent != null)
                {
                    return descendent;
                }
            }
        }
        return null;
    }

    #endregion
} 
```

这是 XAML 中 TreeView 行的示例：

```
<TreeView x:Name="trvwSs"
    Grid.Column="2" Grid.Row="1" Margin="4" ItemsSource="{Binding ItemsTreeViewSs}"
    behaviors:TreeViewSelectedItemExBehavior.SelectedItemEx="{Binding SelectedItemTreeViewSs}" /> 
```

唯一需要担心的是确保要绑定到 SelectedItemEx 的视图模型属性不为空。但这不是特例。只是提到它以防人们感到困惑。

```
public class VmMainContainer : INotifyPropertyChanged
{
    private object selectedItemTreeViewSs = new object();
    private ObservableCollection<object> selectedItemsTreeViewSs = new ObservableCollection<object>();
    private ObservableCollection<VmItem> itemsTreeViewSs = new ObservableCollection<VmItem>();

    public object SelectedItemTreeViewSs
    {
        get
        {
            return selectedItemTreeViewSs;
        }
        set
        {
            selectedItemTreeViewSs = value;
            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(nameof(SelectedItemTreeViewSs)));
        }
    }

    public ObservableCollection<object> SelectedItemsTreeViewSs
    {
        get
        {
            return selectedItemsTreeViewSs;
        }
        set
        {
            selectedItemsTreeViewSs = value;
            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(nameof(SelectedItemsTreeViewSs)));
        }
    }

    public ObservableCollection<VmItem> ItemsTreeViewSs
    {
        get { return itemsTreeViewSs; }
        set
        {
            itemsTreeViewSs = value;
            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(nameof(ItemsTreeViewSs)));
        }
    }
} 
```

最后一件事.. 以编程方式选择的示例：我在 MainWindow.xaml 及其处理程序中创建了一个按钮..

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    TreeViewSelectedItemExBehavior.SetSelectedItemEx(trvwSs, trvwSs.Items[3]);
    //TreeViewSelectedItemExBehavior.SetSelectedItemEx(trvwSs, null);
} 
```

希望这可以帮助某人:)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-27T14:45:13.860

你可以通过后面的代码来做到这一点

```
if (TreeView1.Items.Count > 0)
        (TreeView1.Items[0] as TreeViewItem).IsSelected = true; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-11-19T00:32:49.130

建议的答案不起作用。@fandisusanto 的答案可能确实有效，但可以变得更简单。这是我能想到的最简单的答案：

```
 private static void DeselectTreeViewItem(IEnumerable<TreeViewItem> treeViewItems)
    {
        foreach (var treeViewItem in treeViewItems)
        {
            if (treeViewItem.IsSelected)
            {
                treeViewItem.IsSelected = false;
                return;
            }

            DeselectTreeViewItem(treeViewItem.Items.Cast<TreeViewItem>());
        }
    } 
```

用法：

```
 private void ClearSelectedItem()
    {
        if (AssetTreeView.SelectedItem != null)
        {
            DeselectTreeViewItem(AssetTreeView.Items.Cast<TreeViewItem>());
        }
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-03T19:14:07.530

这是我的解决方案。其他人以各种方式对我来说失败了。您需要从上到下遍历树，在每个级别查找树项，沿途扩展和更新布局。

此函数获取一个节点堆栈，其中第一个出堆栈的节点是最顶部的节点，堆栈上的每个后续节点都是前一个父节点的子节点。第二个参数是 TreeView。

当找到每个项目时，该项目被展开，并返回最后一个项目，调用者可以在其中选择它。

```
 TreeViewItem FindTreeViewItem( Stack<object> nodeStack, TreeView treeView )
    {
        ItemsControl itemsControl = treeView;

        while (nodeStack.Count > 0) {
            object node = nodeStack.Pop();
            bool found = false;

            foreach (object item in itemsControl.Items) {
                if (item == node) {
                    found = true;

                    if (itemsControl.ItemContainerGenerator.ContainerFromItem( item ) is TreeViewItem treeViewItem) {
                        if (nodeStack.Count == 0) {
                            return treeViewItem;
                        }

                        itemsControl = treeViewItem;
                        treeViewItem.IsExpanded = true;
                        treeViewItem.UpdateLayout();
                        break;
                    }
                }
            }

            if (!found) {
                return null;
            }
        }

        return null;
    } 
```

如何调用它的示例：

```
 // Build nodeStack here from your data

    TreeViewItem treeViewItem = FindTreeViewItem( nodeStack, treeView );

    if (treeViewItem != null) {
        treeViewItem.IsSelected = true;
        treeViewItem.BringIntoView();
    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-07-22T07:23:58.190

我为此编写了一个 Helper 类，它支持 MVVM 和延迟加载项。

```
public class TreeViewHelper<TModel>
{
    public TreeViewHelper(TreeView treeView, Func<TModel, TModel> getParent, Func<TModel, IList<TModel>> getSubItems)
    {
        TreeView = treeView;
        GetParent = getParent;
        GetSubItems = getSubItems;
    }

    public TreeView TreeView { get; }
    public Func<TModel, TModel> GetParent { get; }
    public Func<TModel, IList<TModel>> GetSubItems { get; }

    public void SelectItemWhileLoaded(TModel node, IList<TModel> rootNodes)
    {
        if (TreeView.IsLoaded)
        {
            SelectItem(node, rootNodes);
        }
        else
        {
            TreeView.Loaded += TreeView_Loaded;
            void TreeView_Loaded(object sender, System.Windows.RoutedEventArgs e)
            {
                TreeView.Loaded -= TreeView_Loaded;
                SelectItem(node, rootNodes);
            }
        }
    }

    public void SelectItem(TModel node, IList<TModel> rootNodes)
    {
        Stack<TModel> nodes = new Stack<TModel>();
        //push into stack
        while (!rootNodes.Contains(node))
        {
            nodes.Push(node);
            node = GetParent(node);
        }
        TreeViewItem treeViewItem = TreeView.ItemContainerGenerator
            .ContainerFromItem(node) as TreeViewItem;
        if (nodes.Count == 0)
        {
            //Top level
            treeViewItem.IsSelected = true;
            treeViewItem.BringIntoView();
            return;
        }
        Expanded(true);
        void Expanded(bool top)
        {
            if (!top)
            {
                treeViewItem = treeViewItem.ItemContainerGenerator
                    .ContainerFromItem(node) as TreeViewItem;
                if (nodes.Count == 0)
                {
                    treeViewItem.IsSelected = true;
                    treeViewItem.BringIntoView();
                    return;
                }
            }
            node = nodes.Pop();
            treeViewItem.IsExpanded = true;
            if (treeViewItem.ItemContainerGenerator.Status == GeneratorStatus.ContainersGenerated)
            {
                Expanded(true);
            }
            else
            {
                //Lazy
                treeViewItem.ItemContainerGenerator.StatusChanged += ItemContainerGenerator_StatusChanged;
            }
        }
        void ItemContainerGenerator_StatusChanged(object sender, EventArgs e)
        {
            if (treeViewItem.ItemContainerGenerator.Status == GeneratorStatus.ContainersGenerated)
            {
                treeViewItem.ItemContainerGenerator.StatusChanged -= ItemContainerGenerator_StatusChanged;
                Expanded(false);
            }
        }
    }
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-09-24T08:57:41.407

我认为这是最简单的解决方案：

```
private void MouseDownEventProcessing(TreeNodeMouseClickEventArgs e)
{
    tvEmployeeDirectory.SelectedNode = e.Node;
} 
```

# java - 类中的“静态”关键字有什么作用？

> ID：413898
> 
> 赞同：458
> 
> 时间：2009-01-05T17:41:38.457
> 
> 标签：java, static, oop, language-features, restriction

具体来说，我正在尝试以下代码：

```
package hello;

public class Hello {

    Clock clock = new Clock();

    public static void main(String args[]) {
        clock.sayTime();
    }
} 
```

但它给出了错误

> 无法访问静态方法 main 中的非静态字段

所以我将声明更改为`clock`：

```
static Clock clock = new Clock(); 
```

它奏效了。将关键字放在声明之前是什么意思？就可以对该对象执行的操作而言，它究竟会做什么和/或限制什么？

* * *

## 回答 #1

> 赞同：647
> 
> 时间：2009-01-05T17:44:31.243

`static`成员属于类而不是特定实例。

这意味着**只有一个`static`字段的实例存在**^([1])，即使您创建了一百万个该类的实例或者您没有创建任何实例。它将由所有实例共享。

由于`static`方法也不属于特定实例，因此它们不能引用实例成员。在给出的示例中，`main`不知道应该引用`Hello`哪个类的实例（因此也不知道该类的哪个实例`Clock`）。`static`会员只能指`static`会员。实例成员当然可以访问`static`成员。

*旁注：*当然，`static`成员可以**通过对象引用**访问实例成员。

例子：

```
public class Example {
    private static boolean staticField;
    private boolean instanceField;
    public static void main(String[] args) {
        // a static method can access static fields
        staticField = true;

        // a static method can access instance fields through an object reference
        Example instance = new Example();
        instance.instanceField = true;
    } 
```

[1]：根据运行时特性，它可以是每个 ClassLoader 或 AppDomain 或线程一个，但这不是重点。

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2009-01-05T17:45:56.123

这意味着 Hello 中只有一个“时钟”实例，而不是每个单独的“Hello”类实例一个，或者更多，这意味着在所有实例之间将有一个共同共享的“时钟”引用“你好”类。

因此，如果您要在代码中的任何位置执行“新 Hello”： A- 在第一个场景中（在更改之前，不使用“静态”），每次调用“新 Hello”时都会生成一个新时钟，但是 B- 在第二种情况下（更改后，使用“静态”），每个“新 Hello”实例仍将共享并使用最初创建的相同“时钟”引用。

除非您在 main 之外的某个地方需要“时钟”，否则这也可以：

```
package hello;
public class Hello
{
    public static void main(String args[])
    {
      Clock clock=new Clock();
      clock.sayTime();    
    }
} 
```

* * *

## 回答 #3

> 赞同：97
> 
> 时间：2009-07-04T06:35:47.447

`static`关键字意味着某些东西（字段、方法或嵌套类）与类型相关，而不是与该类型*的*任何特定*实例*相关。例如，一个调用`Math.sin(...)`没有任何`Math`类的实例，实际上你*不能*创建`Math`类的实例。

有关更多信息，请参阅[Oracle 的 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)的相关部分。

* * *

**边注**

不幸的是，Java*允许*您像访问实例成员一样访问静态成员，例如

```
// Bad code!
Thread.currentThread().sleep(5000);
someOtherThread.sleep(5000); 
```

这使它*看起来*好像`sleep`是一个实例方法，但它实际上是一个静态方法——它*总是*让当前线程休眠。最好在调用代码中明确这一点：

```
// Clearer
Thread.sleep(5000); 
```

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2009-07-04T06:26:07.993

Java 中的`static`关键字意味着变量或函数在该类的所有实例之间共享，因为它属于*type*，而不是实际对象本身。

因此，如果您有一个变量：`private static int i = 0;`并且您在一个实例中递增它 ( `i++`)，则该更改将反映在所有实例中。`i`现在在所有情况下都是 1。

无需实例化对象即可使用静态方法。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2014-03-13T18:26:41.230

静态成员的基本用法...

```
public class Hello
{
    // value / method
    public static String staticValue;
    public String nonStaticValue;
}

class A
{
    Hello hello = new Hello();
    hello.staticValue = "abc";
    hello.nonStaticValue = "xyz";
}

class B
{
    Hello hello2 = new Hello(); // here staticValue = "abc"
    hello2.staticValue; // will have value of "abc"
    hello2.nonStaticValue; // will have value of null
} 
```

这就是您可以在所有类成员中共享值的方式，而无需将类实例 Hello 发送到其他类。而且你不需要创建类实例。

```
Hello hello = new Hello();
hello.staticValue = "abc"; 
```

您可以通过类名调用静态值或方法：

```
Hello.staticValue = "abc"; 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2009-01-05T17:45:52.037

静态意味着您不必创建类的实例即可使用与类关联的方法或变量。在您的示例中，您可以调用：

```
Hello.main(new String[]()) //main(...) is declared as a static function in the Hello class 
```

直接，而不是：

```
Hello h = new Hello();
h.main(new String[]()); //main(...) is a non-static function linked with the "h" variable 
```

从静态方法（属于类）内部，您无法访问任何非静态成员，因为它们的值取决于您对类的实例化。作为实例成员的非静态时钟对象对于 Hello 类的每个实例都有不同的值/引用，因此您无法从类的静态部分访问它。

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2016-08-14T13:03:23.113

**Java中的静态：**

静态是非访问修饰符。static 关键字属于类而不是类的实例。可用于将变量或方法附加到类。

**静态关键字可用于：**

方法

多变的

嵌套在另一个类中的类

初始化块

**不能用于：**

类（未嵌套）

构造函数

接口

方法局部内部类（差异然后嵌套类）

内部类方法

实例变量

局部变量

**例子：**

想象一下下面的例子，它有一个**名为 count 的实例变量**，它在构造函数中递增：

```
package pkg;

class StaticExample {
    int count = 0;// will get memory when instance is created

    StaticExample() {
        count++;
        System.out.println(count);
    }

    public static void main(String args[]) {

        StaticExample c1 = new StaticExample();
        StaticExample c2 = new StaticExample();
        StaticExample c3 = new StaticExample();

    }
} 
```

**输出：**

> 1 1 1

由于实例变量在对象创建时就获得了内存，所以每个对象都会有实例变量的副本，如果递增，就不会反映到其他对象。

现在，如果我们**将实例变量 count 更改为静态变量，**那么程序将产生不同的输出：

```
package pkg;

class StaticExample {
    static int count = 0;// will get memory when instance is created

    StaticExample() {
        count++;
        System.out.println(count);
    }

    public static void main(String args[]) {

        StaticExample c1 = new StaticExample();
        StaticExample c2 = new StaticExample();
        StaticExample c3 = new StaticExample();

    }
} 
```

**输出：**

> 1 2 3

在这种情况下，静态变量只会获得一次内存，如果任何对象更改了静态变量的值，它将保留其值。

**静态与最终：**

声明为**final 和 static**的全局变量在整个执行过程中保持不变。因为，静态成员存储在类内存中，并且在整个执行过程中只加载一次。它们对类的所有对象都是通用的。如果将静态变量声明为 final，则任何对象都无法更改其值，因为它是 final。因此，声明为 final 和 static 的变量有时称为常量。接口的所有字段都称为常量，因为默认情况下它们是最终的和静态的。

[![在此处输入图像描述](https://i.stack.imgur.com/g7Hng.png)](https://i.stack.imgur.com/g7Hng.png)

图片资源：[最终静态](http://javaconceptoftheday.com/final-keyword-in-java/)

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2016-07-18T07:32:54.627

要添加到现有答案，让我尝试使用图片：

2% 的利率适用于所有储蓄账户。因此它是**静态**的。

平衡应该是**个体**的，所以它**不是**静态的。

[![在此处输入图像描述](https://i.stack.imgur.com/zMvZr.png)](https://i.stack.imgur.com/zMvZr.png)

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2009-01-05T18:14:03.477

到目前为止，这个讨论忽略了类加载器的考虑。**严格来说，Java 静态字段在给定类加载器**的类的所有实例之间共享。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2009-01-05T17:48:41.860

可以将字段分配给类或类的实例。默认情况下，字段是实例变量。通过使用`static`该字段成为一个类变量，因此只有一个`clock`。如果您在一个地方进行更改，它在任何地方都可见。实例变量彼此独立地更改。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2014-11-12T19:50:25.173

关键字`static`用于表示属于类本身而不是实例的字段或方法。使用您的代码，如果对象`Clock`是静态的，则该类的所有实例都`Hello`将共享此`Clock`数据成员（字段）。如果将其设为非静态，则每个单独的实例都`Hello`可以有一个唯一的`Clock`字段。

您向您的类添加了一个*main*方法，`Hello`以便您可以运行代码。问题在于*main*方法是静态的，因此它不能引用其中的非静态字段或方法。您可以通过两种方式解决此问题：

1.  将类的所有字段和方法设为`Hello`静态，以便可以在*主*方法中引用它们。这真的不是一件好事（或者使字段和/或方法静态的错误原因）
2.  在 main 方法中创建类的一个实例，`Hello`并按照最初的预期方式访问它的所有字段和方法。

对您而言，这意味着对您的代码进行以下更改：

```
package hello;

public class Hello {

    private Clock clock = new Clock();

    public Clock getClock() {
        return clock;
    }

    public static void main(String args[]) {
        Hello hello = new Hello();
        hello.getClock().sayTime();
    }
} 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2015-10-03T16:15:32.460

在 Java 中，`static`关键字可以简单地认为表示以下内容：

> “不考虑或与任何特定实例有关”

如果您`static`以这种方式思考，则更容易理解它在遇到的各种上下文中的使用：

*   `static`字段是属于类而不是任何特定实例的字段

*   方法`static`是没有 ; 概念的方法`this`。它是在类上定义的，并且不知道该类的任何特定实例，除非将引用传递给它

*   成员类是一个`static`嵌套类，对其封闭类的实例没有任何概念或知识（除非将对封闭类实例的引用传递给它）

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2009-01-05T17:45:58.323

静态使时钟成员成为类成员而不是实例成员。如果没有 static 关键字，您将需要创建 Hello 类的实例（它有一个时钟成员变量） - 例如

```
Hello hello = new Hello();
hello.clock.sayTime(); 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2009-01-05T17:45:58.947

静态方法不使用定义它们的类的任何实例变量。可以在[此页面上找到对差异的很好解释](http://leepoint.net/notes-java/flow/methods/50static-methods.html)

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2012-12-17T20:34:04.750

我已经对“助手”类中的静态方法（仅在可能的情况下）产生了兴趣。

调用类不需要创建帮助类的另一个成员（实例）变量。您只需调用助手类的方法。辅助类也得到了改进，因为您不再需要构造函数，并且不需要成员（实例）变量。

可能还有其他优点。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2018-09-18T12:59:33.830

```
//Here is an example 

public class StaticClass 
{
    static int version;
    public void printVersion() {
         System.out.println(version);
    }
}

public class MainClass 
{
    public static void main(String args[]) {  
        StaticClass staticVar1 = new StaticClass();
        staticVar1.version = 10;
        staticVar1.printVersion() // Output 10

        StaticClass staticVar2 = new StaticClass();
        staticVar2.printVersion() // Output 10
        staticVar2.version = 20;
        staticVar2.printVersion() // Output 20
        staticVar1.printVersion() // Output 20
    }
} 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2009-01-05T19:36:22.890

还可以考虑没有“this”指针的静态成员。它们在所有实例之间共享。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2017-04-04T05:48:02.163

**了解静态概念**

```
public class StaticPractise1 {
    public static void main(String[] args) {
        StaticPractise2 staticPractise2 = new StaticPractise2();
        staticPractise2.printUddhav(); //true
        StaticPractise2.printUddhav(); /* false, because printUddhav() is although inside StaticPractise2, but it is where exactly depends on PC program counter on runtime. */

        StaticPractise2.printUddhavsStatic1(); //true
        staticPractise2.printUddhavsStatic1(); /*false, because, when staticPractise2 is blueprinted, it tracks everything other than static  things and it organizes in its own heap. So, class static methods, object can't reference */

    }
} 
```

二等舱

```
public class StaticPractise2 {
    public static void printUddhavsStatic1() {
        System.out.println("Uddhav");
    }

    public void printUddhav() {
        System.out.println("Uddhav");
    }
} 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2015-05-13T13:36:36.073

`main()`是一种静态方法，有两个基本限制：

1.  静态方法不能使用非静态数据成员或直接调用非静态方法。
2.  `this()`并且`super()`不能在静态上下文中使用。

    ```
    class A {  
        int a = 40; //non static
        public static void main(String args[]) {  
            System.out.println(a);  
        }  
    } 
    ```

> 输出：编译时错误

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2020-03-21T14:18:02.413

[这里](https://stackoverflow.com/questions/60788631/whats-the-etymology-of-static-method)提出了一个关于为这个概念选择“静态”这个词的问题。这是对这个问题的欺骗，但我认为词源没有得到明确解决。所以...

* * *

这是由于关键字重用，从 C 开始。

考虑 C 中的数据声明（在函数体内）：

```
 void f() {
        int foo = 1;
        static int bar = 2;
         :
    } 
```

变量 foo 在进入函数时在堆栈上创建（并在函数终止时销毁）。相比之下， bar 总是在那里，所以它在普通英语的意义上是“静态的”——它不会去任何地方。

Java 和类似的语言对数据有相同的概念。可以为每个类的实例（每个对象）分配数据，也可以为整个类分配一次。由于 Java 旨在为 C/C++ 程序员提供熟悉的语法，因此“静态”关键字在这里是合适的。

```
 class C {
        int foo = 1;
        static int bar = 2;
         :
    } 
```

最后，我们来谈谈方法。

```
 class C {
        int foo() { ... }
        static int bar() { ... }
         :
    } 
```

从概念上讲，类 C 的每个实例都有一个 foo() 实例。整个 C 类只有一个 bar() 实例。这与我们讨论的数据情况类似，因此使用 'static ' 又是一个明智的选择，特别是如果您不想在您的语言中添加更多保留关键字。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-06-24T16:47:22.107

静态变量只能在静态方法中访问，所以当我们声明静态变量时，getter和setter方法将是静态方法

静态方法是我们可以使用类名访问的类级别

以下是静态变量 Getter 和 Setter 的示例：

```
public class Static 
{

    private static String owner;
    private static int rent;
    private String car;
    public String getCar() {
        return car;
    }
    public void setCar(String car) {
        this.car = car;
    }
    public static int getRent() {
        return rent;
    }
    public static void setRent(int rent) {
        Static.rent = rent;
    }
    public static String getOwner() {
        return owner;
    }

    public static void setOwner(String owner) {
        Static.owner = owner;
    }

} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-10-09T14:43:01.220

Java 程序中的成员可以使用其声明/定义之前的关键字“static”声明为静态的。当一个成员被声明为静态时，它本质上意味着该成员由一个类的所有实例共享，而无需为每个实例制作副本。

**因此 static 是 Java 中使用的非类修饰符，可以应用于以下成员：**

*   变量
*   方法
*   块
*   类（更具体地说，嵌套类）

当一个成员被声明为静态的，那么它就可以在不使用对象的情况下被访问。这意味着在类被实例化之前，静态成员是活动的并且是可访问的。与当类的对象超出范围时不再存在的其他非静态类成员不同，静态成员显然仍然是活动的。

**Java中的静态变量**

声明为静态的类的成员变量称为静态变量。它也被称为“类变量”。一旦变量被声明为静态，内存只分配一次，而不是每次实例化类时。因此，您可以在不引用对象的情况下访问静态变量。

**以下 Java 程序描述了静态变量的用法：**

```
class Main
{
// static variables a and b
static int a = 10;
static int b;

static void printStatic()
{
    a = a /2;
    b = a;

    System.out.println("printStatic::Value of a : "+a + " Value of b : 
 "+b);
}  

public static void main(String[] args)
{
   printStatic();
   b = a*5;
   a++;

System.out.println("main::Value of a : "+a + " Value of b : "+b);
   }
 } 
```

**输出：：**

```
printStatic::Value of a : Value of b : 5
main::Value of a : 6 Value of b : 25 
```

在上面的程序中，我们有两个静态变量，即 a 和 b。我们在函数“printStatic”和“main”中修改这些变量。请注意，即使函数范围结束，这些静态变量的值也会在函数中保留。输出显示两个函数中的变量值。

**静态方法**

当 Java 中的方法前面带有关键字“static”时，它就是静态的。

**关于静态方法，您需要记住的一些要点包括：**

*   与使用类的实例调用的其他非静态方法相比，静态方法属于该类。
*   要调用静态方法，您不需要类对象。
*   静态方法可以访问类的静态数据成员。静态方法甚至可以更改静态数据成员的值。
*   静态方法不能引用“this”或“super”成员。即使静态方法尝试引用它们，也会出现编译器错误。
*   就像静态数据一样，静态方法也可以调用其他静态方法。静态方法不能引用非静态数据成员或变量，也不能调用非静态方法。

**以下程序显示了 Java 中静态方法的实现：**

```
class Main
{
  // static method
  static void static_method()
{
    System.out.println("Static method in Java...called without any 
object");
}

public static void main(String[] args)
{
    static_method();
   }
 } 
```

**输出：**

```
Static method in Java...called without any object 
```

**Java中的静态块**

就像您在 Java 中的 C++、C# 等编程语言中具有功能块一样，也有一个称为“静态”块的特殊块，它通常包含与静态数据相关的代码块。

此静态块在创建类的第一个对象时（准确地说是在类加载时）或使用块内的静态成员时执行。

**以下程序显示了静态块的用法。**

```
class Main
{
  static int sum = 0;
  static int val1 = 5;
  static int val2;

// static block
 static {
    sum = val1 + val2;
    System.out.println("In static block, val1: " + val1  + " val2: "+ 
val2 + " sum:" + sum);
    val2 = val1 * 3;
    sum = val1 + val2;
}

 public static void main(String[] args)
{
    System.out.println("In main function, val1: " + val1  + " val2: "+ val2 + " sum:" + sum);
  }
} 
```

**输出：**

```
In static block, val1: 5 val2: 0 sum:5
In main function, val1: val2: 15 sum:20 
```

**静态类**

在 Java 中，您有静态块、静态方法，甚至是静态变量。因此很明显，您也可以拥有静态类。在 Java 中，可以在另一个类中包含一个类，这称为嵌套类。包含嵌套类的类称为 Outer 类。

在 Java 中，虽然可以将嵌套类声明为静态，但不能将外部类声明为静态。

现在让我们探索 Java 中的静态嵌套类。

**静态嵌套类**

如前所述，您可以在 Java 中将嵌套类声明为静态。静态嵌套类在某些方面不同于非静态嵌套类（内部类），如下所示。

与非静态嵌套类不同，嵌套静态类不需要外部类引用。

静态嵌套类只能访问外部类的静态成员，而非静态类可以访问外部类的静态成员和非静态成员。

下面给出了一个静态嵌套类的示例。

* * *

```
class Main{
  private static String str = "SoftwareTestingHelp";

     //Static nested class
     static class NestedClass{
        //non-static method
            public void display() {

            System.out.println("Static string in OuterClass: " + str);
            }

    }
   public static void main(String args[])
   {
            Main.NestedClassobj = new Main.NestedClass();
            obj.display();
   }
} 
```

**输出**

```
Static string in OuterClass: SoftwareTestingHelp 
```

**我认为这就是 static 关键字在 java 中的工作方式。**

# windows - 在 Windows 上混合 OpenGL 和 GDI

> ID：413899
> 
> 赞同：3
> 
> 时间：2009-01-05T17:42:58.890
> 
> 标签：windows, opengl, gdi

我正在尝试找出一种在 Windows 中混合 OpenGL 渲染和 GDI 的方法。以前我一直将我的 OpenGL 内容渲染到一个帧缓冲区对象中，将其提取出来，然后将其放入 windows GDI 图形上下文中，然后在顶部绘制我的 GDI 内容。这真的会削弱帧率。

我想做与我现在正在做的相反的事情，所以我的 OpenGL 渲染直接在窗口上完成，然后我将 GDI 的东西渲染到一个位图，该位图被上传到纹理，然后使用四边形覆盖。GDI 的东西并没有太大的变化，所以我不需要每帧都重新绘制它，我可以缓存纹理。

我几乎可以让它工作，问题是我似乎无法从 GDI 位图中获得正确的 alpha 值，因此文本和线条会出现可怕的锯齿。

有没有人有任何有用的资源来做到这一点？甚至可以让 GDI 或 GDI+ 以我需要的方式写入 alpha 通道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T00:25:04.000

我认为如果您只使用原始 OpenGL 而不是 GDI 进行渲染会更容易。只需创建一些包装函数并调用它们而不是 GDI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T00:45:46.063

这一切真的有必要吗？您应该能够只使用 GDI 函数来绘制与 OpenGL 相同的设备上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-13T23:35:03.897

如何使用模板。在模板缓冲区中复制您的纹理。使用 GL_NOTEQUAL 作为测试函数，其参考值等于纹理的背景值。首先渲染 OpenGL 的东西，然后启用模板，然后渲染你的纹理矩形。

您没有指定这是 2D 还是 3D 问题。锯齿可能是 3D 世界中的一个深度问题，在这个世界中，几乎所有东西都在同一个平面上。如果您在 3D 中工作，请确保纹理矩形位于其他所有内容的前面或修改 z 缓冲区。

# php - 在多个站点上为 PHP 配置 IIS7

> ID：413905
> 
> 赞同：2
> 
> 时间：2009-01-05T17:44:34.817
> 
> 标签：php, configuration, iis-7

我在 IIS7 上安装了 PHP5.2.8，它适用于我的默认站点（位于 C:\Inetpub\wwwroot）。

现在，我需要在我的机器上运行我公司站点的本地副本，每个副本都是 wwwroot 中的目录。我已经在一个单独的端口上设置了每个端口，所以我可以访问[http://localhost:[portnum]](http://localhost:[portnum])来访问每个端口。

如果我尝试访问文件，请说：[http://localhost:5002/test.php](http://localhost:5002/test.php) - 我得到一个

> “没有指定输入文件。

" 错误。如果我通过[http://localhost/Mysite.com/test.php](http://localhost/Mysite.com/test.php)尝试它工作正常。我认为这可能与 php.ini 中的 doc_root 设置有关？我将其设置为 C： \Inetpub\wwwroot. 我将 PHP 作为 FastCGI 模块运行。

有谁知道一个全面的教程或在 IIS 上设置 PHP 以进行这样的配置？或者有什么建议？

我还想知道在 ISAPI 模式下安装它是否会得到不同的结果。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T20:38:53.660

我认为你的做法是错误的。如果您要运行一个站点或不同站点的本地副本，您应该将它们建立在不同的目录中。这是设置 IIS 7 或 7.5 的一个非常简单直接的过程。只要您安装了 PHP，它将适用于所有站点。

# 第1部分

1.  在管理模式下打开notepad.exe
2.  找到您的主机文件 (C:\Windows\System32\drivers\etc) -[注意：主机上没有扩展名]
3.  添加另一个站点 IP / 名称，如下所示：

例子

```
#102.54.94.97    rhino.acme.com
127.0.0.1   localhost
127.0.0.2   testsite
127.0.0.3   testsite_etc 
```

注意：如果你正在做开发测试，你可以去掉 .com 并组成一个名称以供使用，就像“localhost”一样。“POUND”符号将注释掉任何行。

# 第2部分

1.  现在在 IIS 中添加一个新站点（网站）
2.  将网站命名为您想要的任何名称
3.  选择您的网站文件所在的文件夹。（这是根文件夹）
4.  指定您添加到主机文件的 IP 地址（示例 127.0.0.2）
5.  对于主机名，指定您在主机文件 (testsite) 中使用的名称
6.  将端口保留为 80，并根据您的站点的需要使用 http 或 https
7.  确保网站计划默认启动。

注意上面的第 3 项：这允许您在自己的目录中拥有站点，这是一个常见的误解，您需要将所有站点发布在 inetpub/wwwroot/...

# 第 3 部分

只需在浏览器地址栏中输入：testsite/ 或 127.0.0.2/ 即可加载您的网站。如果目录发现关闭，您还需要输入默认页面...（EG testsite/index.php）

我有一台运行 30 个独立站点的机器，它们都使用 PHP 从单个安装中处理它们。上面的例子是用于开发测试的，你可以在IIS机器上线需要DNS转发到实际IP地址时搜索差异。

# winforms - WinForms 的功能区 UI 控件

> ID：413910
> 
> 赞同：14
> 
> 时间：2009-01-05T17:46:09.790
> 
> 标签：winforms, ribbon

VS 2008 中是否有可用的功能区 UI 控件？如果我在开发和部署机器上安装了 Office 2007，它是否可用？

编辑：我想微软会在 VS 2008 中包含 Ribbon UI 控件，因为这是办公室 UI 将向前发展的方式，也是为了 Windows 应用程序的一致性

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-05T17:51:43.397

是的——它包含在 Visual Studio 2008 Service Pack 1 中——至少对于 C++/MFC 的支持是这样的。

有关更多信息，请参阅此[类似问题](https://stackoverflow.com/questions/33909/ribbon-toolbar-and-visual-studio-2008-service-pack-1)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-05T19:13:09.567

关于许可，您需要查看[Microsoft Office UI 许可信息](http://msdn.microsoft.com/en-gb/office/aa973809.aspx)，并获得免版税许可。您必须遵守特定的规定，以及许可证的推荐/最佳实践部分。

[Jensen Harris](http://blogs.msdn.com/jensenh/archive/2006/11/21/licensing-the-2007-microsoft-office-user-interface.aspx)指出，如果您编写的应用程序与使用功能区的 Microsoft 生产力应用程序（例如 Word、PowerPoint 等）直接竞争，您将无法获得免版税许可。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-10-20T08:46:28.370

如果您使用 Windows 7/Vista，Microsoft 提供了 Windows Ribbon Framework - 操作系统附带的免费功能区控件（在 vista 中，请检查平台更新）。

使用 Windows Ribbon Framework 的主要原因：它是由 Microsoft 开发的。

这表示：

*   由于它是原始的，它包含所有功能，而不是其他始终具有那些“未实现”部分的免费/商业功能区控件。

*   它具有完整的支持并与 Windows 7 UI 和辅助功能集成。只需考虑触摸屏支持或高 DPI 屏幕兼容性。

此外，还有一个名为 [Windows Ribbon for WinForms](http://windowsribbon.codeplex.com/)的托管包装库，它允许您在 .NET WinForms 应用程序中使用功能区。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-05T19:03:47.853

请注意，如果您想使用功能区控件，您需要获得微软的特别许可才能这样做。大多数情况下，除非您的名字是开放式办公室，否则这将是一种形式。

该信息显示在： http: [//msdn.microsoft.com/nl-nl/office/aa973809](http://msdn.microsoft.com/nl-nl/office/aa973809(en-us).aspx) (en-us).aspx 。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-03-13T14:23:12.377

您可以尝试[Codeplex](http://ribbon.codeplex.com/)上的功能区控件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-02-07T20:26:36.093

没有人提到的另一种可能性：您可以使用[WPF 功能区控件](https://stackoverflow.com/questions/474104/what-is-the-best-wpf-ribbon-control-suite)并将其托管在 Winforms WPF 容器中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-05T17:50:19.157

我发现 Telerik RadRibbon 控件非常好，虽然有点不灵活。它也是（这是我建议它的主要原因）VS2008 Express 注册优势（请参阅[MS Connect](http://connect.microsoft.com)），但[Telerik](http://telerik.com)网站除外。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-02-07T20:05:10.177

有[这个项目](http://windowsribbon.codeplex.com/)。与迄今为止的所有其他答案不同，它非常易于使用，是本机 Winforms，并支持 Windows XP。不幸的是，它有很多错误，似乎被遗弃了。

它是由另一个开发人员[在这里获得的](http://www.staffinder.net/carbisoft/ribbon.aspx) *（出于某种愚蠢的原因，他拒绝将其上传到在线存储库）*。它在设计器中有点错误，但在运行时似乎运行良好。 **如果您必须支持 XP 并且不想使用 WPF，我认为这是您的最佳选择。**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-07-09T14:02:15.877

我想说 DevComponent 的 DotNetBar 是最好的 Office 2007/2010 功能区。唯一的问题是您必须购买它（单许可证 264 美元，单许可证加源代码 299 美元，单站点许可证 2995 美元）。试用该演示，它为您提供 28 天的试驾（购买的软件中的所有内容只能使用 28 天）。他们当前的版本是 8.8。

[参考](http://www.devcomponents.com/dotnetbar)

# html - 为什么我的 iframe 内容周围有一个空白区域？

> ID：413912
> 
> 赞同：3
> 
> 时间：2009-01-05T17:47:26.027
> 
> 标签：html, css, iframe

我创建了一个 iframe 代码，希望人们将其用作其网站上的小部件。此 iframe 将加载一个具有按钮和计数器的网页。在访问的页面中，我有一个图形。

但是 iframe 在浏览器中呈现，周围有一个白色的空白区域。为什么会这样？这是我的代码： -

在客户端：

```
<script type="text/javascript">
    window.onload = function() {
        document.all.myframe.src = "blogup.aspx?url=" + window.location.href;
    }
</script>

<iframe id="myframe" height="75" width="235" scrolling="no" frameborder="0">
</iframe> 
```

应该显示的页面

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="blogup.aspx.cs" Inherits="blogup" %>

<html xmlns="http://www.w3.org/1999/xhtml">
<body>
    <form id="form1" runat="server">
        <img style="float: left" src="images/blogup1.jpg" alt="Blogvani.com - Indian blogs aggregator" />
        <div style="font-family: Verdana; font-size: 16px; margin:0;padding:0;font-weight: bold; background: url('images/blogup2.jpg') no-repeat;
            height: 50; width: 44; padding: 22px 5px 5px 5px; text-align: center">
            <a href="javascript:voteup('<%= PostURL %>')" id="votecount" style="text-decoration: none;
                color: #026A88">115</a></div>
    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    <asp:ScriptManager ID="ScriptManager1" EnablePageMethods="true" runat="server">
        <Services>
            <asp:ServiceReference Path="~/Services.asmx"             
        </Services>
    </asp:ScriptManager>

    </form>
</body>
</html> 
```

注意：我使用的是内联 CSS。边距和内边距设置为 0，但显示的图像与顶部和左侧有一点偏移。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-05T17:49:17.537

您可能需要从`<body>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-08-17T13:12:40.673

我有一个类似的问题。空白区域是 iframe 本身中的页面。我通过`margin-left:-10px; margin-top:-10px`在 iframe 中包含的页面的样式表中删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-26T15:08:48.770

试试这种风格的代码，它将删除围绕空白空间的 iframe

```
<style>
    iframe { display:block; }
    html, body {
        border: 0px;
        margin: 0px;
        padding: 0px;
    }
    </style> 
```

# iphone - 想要在 iPhone 上显示 3D 模型：如何开始？

> ID：413919
> 
> 赞同：52
> 
> 时间：2009-01-05T17:49:25.227
> 
> 标签：iphone, ios, opengl-es

我想在 iPhone 上显示和旋转单个 3D 模型，最好是纹理模型。不必放大和缩小，或有背景，或任何东西。

我有以下内容：

*   一部 iPhone
*   一台MacBook
*   iPhone SDK
*   搅拌机

我的知识库：

*   我可以在各种 3D 程序中制作 3D 模型（我最喜欢 3D Studio Max，我曾经上过一门课程，但我用过其他的）
*   多年前程序编程的一般知识（QuickBasic - 我老了！）
*   初学者通过简单的 Java 和 C# 教程了解面向对象编程的知识（Head Start C# 书和我妻子的使用 Java 的 OOP 课程介绍）
*   我已经设法显示了一个 3D 纹理模型并使用 C# 中的教程旋转它我从网上下了（我不只是复制和粘贴，我基本上了解它是如何工作的）和 XNA 游戏开发库，使用 Visual Studio视窗。

我不知道的是：

*   关于 Objective C
*   iPhone 显然使用的关于 OpenGL 或 OpenGL ES 的任何信息
*   关于 XCode 的一切

我的主要问题是我不知道从哪里开始！我发现的所有 iPhone 书籍似乎都是关于创建 GUI 应用程序，而不是 OpenGL 应用程序。我找到了一本 OpenGL 书，但我不知道有多少（如果有的话）适用于 iPhone 开发。而且我发现 Objective C 的语法有些混乱，有奇怪的嵌套方法命名、没有意义的“id”之类的东西，以及我必须进行手动内存管理的可怕想法。

最好的起点在哪里？我找不到任何此类事情的教程，但也许我的 Google-Fu 很弱。或者我应该从学习Objective C开始？我知道像 Aaron Hillgrass 之类的书，但我也读到它们已经过时，并且大部分示例代码在 iPhone SDK 上不起作用，而且它似乎面向模型-视图-控制器范式，而后者并不适用似乎适合 3D 应用程序。

基本上我对我的第一步应该是什么感到困惑。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-01-06T16:10:06.347

再一次，如果我可以插入我自己的工作，我已经[写了一篇](http://www.sunsetlakesoftware.com/2008/08/05/lessons-molecules-opengl-es)关于我在 iPhone 上开发 OpenGL ES 应用程序中学到的东西的帖子。该应用程序[Molecules](http://www.sunsetlakesoftware.com/molecules)（由 frankodwyer 引用）是开源的，我有[一篇](http://www.sunsetlakesoftware.com/2008/10/02/molecules-source-code-now-available)关于我在开发它时遇到的其他一些棘手问题的文章。该应用程序生成 3-D 模型，并允许您用手指旋转和缩放它们，这听起来很符合您的需求。您可以在几分钟内下载代码、编译并在桌面上运行它。如果您加入 iPhone 开发者计划，您可以将它安装在您的设备上。

在对象加载方面，[Bill Dudney](http://bill.dudney.net/roller/objc/)正在[为 iPhone 开发 Wavefront OBJ 加载器](http://bill.dudney.net/roller/objc/entry/wave_front_obj_textures_working)，如果它们可以以该格式导出，它可能能够接收您的 Blender 文件。我还没有在 iPhone 上做太多的纹理工作，但听起来他的例子现在可以工作了。

总的来说，我发现通过示例学习并开始开发一些小型的、有针对性的应用程序（您可能永远不会发布）对我有用。尝试调整上面列出的示例，看看会发生什么。您应该能够通读这些示例中的 Objective-C 代码并开始了解它们在做什么。

尽管 Hillegass 的书（第三版刚刚出版并且是最新的）专注于 Mac，但他教授的 Cocoa 基础知识仍然与 iPhone 相关。MVC 设计模式在 iPhone 上和 Mac 上一样为您服务。实际上，我在 Molecules 中的一些地方偏离了这种模式，我对这个决定感到遗憾，因为应用程序的这些部分变得一团糟。这本书很容易阅读，非常值得您花时间阅读。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-05T17:58:19.733

您可能应该从一些更简单的 iphone 应用程序/教程开始，只是为了让您在 obj-c 和 xcode 等方面站稳脚跟。

为此，我推荐实用程序员的 iphone 书，它有足够的信息可以入门（我从不了解 xcode、obj-c、iphone 或 mac 的情况下开始工作，并且相当快地获得了一个工作应用程序，主要使用这个）。但是我应该补充一点，我来自 C/C++ 和 Java 方面的良好背景。

对于您的特定项目，也许看看[这个](https://stackoverflow.com/questions/373202/iphone-apps-for-fun-and-profit#375038)答案，它指的是一个开源 3D 应用程序，您可以查看并从中获取提示。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-05T08:20:16.650

这是一条古老的线索，我来得太晚了。但我仍然要在这里张贴我的 2 便士。

## 先睹为快

在我进入野兽之前，这是我的设置。

我用

1.  [Blender](http://www.blender.org/)创建 3D 模型。（您可以使用 Maya 或 3D Max，我将告诉您如何为 Blender 导出模型，同样适用于 3D Max 和 Maya）。
2.  [Cocos3D](http://brenwill.com/cocos3d/)游戏引擎。
3.  [来自 Imagination Technology 的PVRGeoPOD 搅拌机扩展](http://www.imgtec.com/powervr/insider/sdkdownloads/index.asp)，用于将搅拌机模型转换为 Cocos3D 可以理解的格式。您可以看到该链接下载了一个安装程序文件，该文件又下载了整个 SDK。我看不到单独下载搅拌机扩展的简单方法。

所以如果你**不打算使用 Cocos3D**，你可以**跳过这个答案**并为你的钱跑。

## 初始设置

1.  **安装** [**搅拌机**](http://www.blender.org/download)。

    我不会因为详述细节而让你难堪。

2.  **下载** [**Cocos3D。**](http://brenwill.com/downloads/19).

    当我输入这个时，当前版本是 0.7.2。

3.  **下载** [**Cocos2D。**](http://www.cocos2d-iphone.org/download/)

    Cocos3D 是在流行的 2D 游戏框架 Cocos2D 之上编写的。这里需要注意的重要一点是，Cocos2D 2.x 版本已经存在并且稳定。但是 Cocos3D 只适用于 Cocos2d 1.x 版本。

    当你解压缩你下载的源代码时，你会在里面找到一个 README 文件，它特别说，

    > 请注意**cocos3d 0.7.2 与 cocos2d 2.x 不兼容**。**请务必下载 cocos2d 1.x 以便与 cocos3d 一起使用**。（强调我的）

    自述文件清楚地说明了安装过程。安装后，您将在 XCode 中获得一个漂亮的 Cocos3D 项目模板。

4.  **将 PVRGeoPOD 扩展添加到 Blender。**

    这需要一些解释。当您运行 PVRGeoPOD 安装程序时，屏幕会显示需要安装的内容和功能。我只选择了

    *   **PVRGeoPOD** - 将我的 .blend 文件中的模型转换为 Cocos3D 可以理解的 .POD 格式

    *   **PVRShaman** - 您可以使用此工具查看 .POD 中的模型。

    ![在此处输入图像描述](https://i.stack.imgur.com/SctmF.png)

    您可以安装列表中的其他工具，但我只使用了这两个。

    现在在安装过程之后（可能需要一些时间），您需要将 PVRGeoPOD AddOn 添加到搅拌机。您可以在刚刚安装的文件夹中找到 **PVRGeoPOD.UserManual.PDF**文件，其中还包含以下信息。

    *   找到 Blender Add-On 文件夹，你可以打开 blender python 控制台并运行命令`bpy.utils.script_paths("addons")`来查看这个文件夹的路径。
    *   在您的安装路径中的 PVRGeoPOD 文件夹中找到搅拌机附加文件。当您看到 *libPVRGeoPOD.dylib*和 *PVRGeoPODScript.py*等文件以及 2 个 QTfiles 时，请停在那里，因为这是位置。复制这 4 个文件并将它们粘贴到搅拌机添加文件夹中。
    *   现在打开搅拌机，选择**Preferences**，找到**Add-On**选项卡，搜索并找到 PVRGeoPOD 扩展并通过单击右侧的复选框启用它。
    *   现在退出并重新启动搅拌机，如果需要，然后选择文件->导出，看看是否有一个名为*PVRGeoPOD(.pod/.h/.cpp)*的选项，如果有，你就成功了。

    现在您可以在 Blender 中创建模型，并将这些模型导出为 Cocos3D 可以理解的 .POD 文件。

    如果您正在使用其他 3D 设计工具，例如 Maya、3D Max，也可以将这个 PVRGeoPOD 扩展添加到其中。只需查看我上面提到的 PDF。

## 在项目中使用

1.  下面给出了一步一步的过程。

    在搅拌机 (.blend) 中创建模型并将其导出为 .POD 文件。当您导出时，我通常选择以下选项

    *   原始类型 - 索引三角形列表
    *   材料选项卡 - 检查导出材料选项

    休息一下，我将其保留为默认值。

2.  在 XCode 中新建一个项目，选择 Cocos3D 模板。
3.  将 .POD 文件添加到您的项目中。如果您的模型是纹理模型，请将该纹理也添加到您的项目中。
4.  模板项目本身包含一个*HelloWorld.POD*文件，您可以将该行替换为您的 .POD 文件，以便您的模型可见。

    ```
    [self addContentFromPODFile: @"YourPODFileName.pod"]; 
    ```

现在您的第一个 3D 模型在 iOS 设备中可见。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-07T11:20:53.700

我正在玩 iPhone 开发以获得一点乐趣，并购买了 Dave Mark 和 Jeff LaMarche 的《Beginning iPhone Development》（ISBN13：978-1-4302-1626-1），并且很享受阅读这些章节。我有一点 .NET 的 Win32 Delphi 背景，所以 Objective C 对我来说很新。

其中一章是关于 OpenGL 和 Quartz 的，您可能会感兴趣。我还没有那么远，所以我不能真正评论它对你自己有多大用处，但写作风格非常容易理解，而且节奏很好（无论如何对我来说）。

最初的章节通过对 Xcode 和 InterfaceBuilder 的良好介绍准确地解释了如何开始运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-15T16:05:56.970

对于 iOS 8 或更高版本的任何内容，答案都是 SceneKit。SceneKit 将渲染 Collada (DAE) 文件。任何体面的建模包（例如 Cheetah、Blender）都应该导出 DAE 文件——它是 XML 中记录的可移植格式（尽管 xCode 将它们编译成二进制格式以节省空间）。

# git-svn - 不完整的“git svn dcommit”后提交丢失

> ID：413924
> 
> 赞同：4
> 
> 时间：2009-01-05T17:51:56.940
> 
> 标签：git-svn, commit

在我的计算机在“git svn dcommit”操作过程中断电后，我错过了一些重要的提交，我不确定如何让它们恢复。“git log”不显示提交，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-05T18:28:01.093

[Git 会在reflog](http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)中跟踪您对存储库所做的一切。您可以使用`git reflog`查看最近的提交，并从那里恢复它们。

我发现一个名为[git reflog: no commits left behind](http://gitfu.wordpress.com/2008/04/06/git-reflog-no-commits-left-behind/)的博客条目描述了如何恢复这些提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T20:47:59.877

在执行任何可能更改分支的操作​​之前执行“git log”和/或“git branch -v”是个好主意，例如“git svn dcommit”。您可以随时向后滚动控制台并复制/粘贴提交 ID，以防它们搞砸。

# asp.net - ASP.NET 单元测试问题（奇怪的异常错误）

> ID：413927
> 
> 赞同：0
> 
> 时间：2009-01-05T17:52:37.420
> 
> 标签：asp.net, unit-testing

我用最少的代码创建了一个新的解决方案，它代表了我遇到的问题。这是我能理解的最简单的。

```
namespace EntServ.BusinessObjects
{
    /// <summary>
    /// Summary description for EntServSession
    /// </summary>
    public class EntServSession
    {
        public EntServSession()
        {

        }

        public static EntServSession Login(string username, string password)
        {
            EntServSession ret = null;

            if (username == "test"  && password == "pass")
                ret = new EntServSession();

            return ret;
        }

    }
} 
```

我从一个新的解决方案开始，并在 App_Code 文件夹中创建了一个类，其中一个静态方法类似于我遇到问题的方法之一。我右键单击类名，然后单击“创建单元测试...”。它提议为我创建一个新的测试项目，我接受了默认设置并单击了确定。它生成了以下文件：

```
using EntServ.BusinessObjects;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Microsoft.VisualStudio.TestTools.UnitTesting.Web;
using System.Data;

namespace EntServObjectTests
{

    /// <summary>
    ///This is a test class for EntServSessionTest and is intended
    ///to contain all EntServSessionTest Unit Tests
    ///</summary>
    [TestClass()]
    public class EntServSessionTest
    {

        private TestContext testContextInstance;

        /// <summary>
        ///Gets or sets the test context which provides
        ///information about and functionality for the current test run.
        ///</summary>
        public TestContext TestContext
        {
            get
            {
                return testContextInstance;
            }
            set
            {
                testContextInstance = value;
            }
        }

        #region Additional test attributes
        // 
        //You can use the following additional attributes as you write your tests:
        //
        //Use ClassInitialize to run code before running the first test in the class
        //[ClassInitialize()]
        //public static void MyClassInitialize(TestContext testContext)
        //{
        //}
        //
        //Use ClassCleanup to run code after all tests in a class have run
        //[ClassCleanup()]
        //public static void MyClassCleanup()
        //{
        //}
        //
        //Use TestInitialize to run code before running each test
        //[TestInitialize()]
        //public void MyTestInitialize()
        //{
        //}
        //
        //Use TestCleanup to run code after each test has run
        //[TestCleanup()]
        //public void MyTestCleanup()
        //{
        //}
        //
        #endregion

        /// <summary>
        ///A test for Login
        ///</summary>
        // TODO: Ensure that the UrlToTest attribute specifies a URL to an ASP.NET page (for example,
        // http://.../Default.aspx). This is necessary for the unit test to be executed on the web server,
        // whether you are testing a page, web service, or a WCF service.
        [TestMethod()]
        [HostType("ASP.NET")]
        [AspNetDevelopmentServerHost("%PathToWebRoot%\\EntServ2-ASP.NET\\trunk\\WWW", "/WWW")]
        [UrlToTest("http://localhost/WWW")]
        public void LoginTest()
        {
            string username = string.Empty; // TODO: Initialize to an appropriate value
            string password = string.Empty; // TODO: Initialize to an appropriate value
            EntServSession expected = null;
            EntServSession actual = EntServSession_Accessor.Login(username, password);
            Assert.AreEqual(expected, actual);
            Assert.Inconclusive("Verify the correctness of this test method.");
        }

    }
} 
```

我尝试运行测试并尝试编译，但出现构建错误：

```
Error   1   
The type or namespace name 'EntServSession' could not be found 
(are you missing a using directive or an assembly reference?)   C:\Projects\EntServ-ASP.NET\trunk\Tests\EntServObjectTests\EntServSessionTest.cs
82
13
EntServObjectTests 
```

我发布了网站并在测试项目中引用了 App_code.dll，我不再收到构建错误。相反，我收到以下异常错误。我在类的每一行都设置了断点，调试器不会停在任何一行。

```
Error Message
Test method EntServObjectTests.EntServSessionTest.LoginTest threw exception:  System.InvalidCastException: Unable to cast object of type 'EntServ2.BusinessObjects.EntServSession' to type 'EntServ2.BusinessObjects.EntServSession'..

Stack Trace
EntServ2.BusinessObjects.EntServSession_Accessor.Login(String username, String password)
EntServObjectTests.EntServSessionTest.LoginTest() in C:\Projects\EntServ2-ASP.NET\trunk\Tests\EntServObjectTests\EntServSessionTest.cs: line 83 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-05T18:57:36.680

重新编辑：

我无法真正解决您的 InvalidCastException 问题，因为这可能是您需要花费数天时间才能解决的那些红鲱鱼/兔子洞问题之一，并且会拔掉很多头发。我敢肯定，当您发布它们时，它与程序集版本不同有关？

我通常不这样做，您可以否决我的错误建议，但我可以建议您将您的 asp.net 网站转换为 Web 应用程序吗？（要么这样做，要么将有问题的代码移到类库中）。我知道这不是你要找的答案，但我能说什么是艰难的爱。从长远来看，您会发现它会容易得多，而且我不会详细介绍所有好处，因为我相信您会听说过它们或可以用谷歌搜索它们。

我相信这将是解决您的问题的一个更快的解决方案......毕竟，谁真的想在每次运行他们的单元测试时发布他们的网站？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T22:14:34.990

在我看来，这个类与 ASP.NET 没有任何关系，或者它根本不需要任何服务器主机或部署模拟。你有这些行：

```
[TestMethod()]
[HostType("ASP.NET")]
[AspNetDevelopmentServerHost("%PathToWebRoot%\\EntServ2-ASP.NET\\trunk\\WWW", "/WWW")]
[UrlToTest("http://localhost/WWW")]
public void LoginTest()
{
    string username = string.Empty; // TODO: Initialize to an appropriate value
    string password = string.Empty; // TODO: Initialize to an appropriate value
    EntServSession expected = null;
    EntServSession actual = EntServSession_Accessor.Login(username, password);
    Assert.AreEqual(expected, actual);
    Assert.Inconclusive("Verify the correctness of this test method.");
} 
```

尝试删除不必要的组件，使其如下所示：

```
[TestMethod()]
public void LoginTest()
{
    string username = string.Empty; // TODO: Initialize to an appropriate value
    string password = string.Empty; // TODO: Initialize to an appropriate value
    EntServSession expected = null;
    EntServSession actual = EntServSession_Accessor.Login(username, password);
    Assert.AreEqual(expected, actual);
    Assert.Inconclusive("Verify the correctness of this test method.");
} 
```

此外，您根本没有使用测试上下文，现在删除它们可能是一个想法。IE 你可以删除这些：

```
private TestContext testContextInstance;

/// <summary>
///Gets or sets the test context which provides
///information about and functionality for the current test run.
///</summary>
public TestContext TestContext
{
    get
    {
        return testContextInstance;
    }
    set
    {
        testContextInstance = value;
    }
} 
```

这可能无法解决您的问题，但至少它删除了不必要的代码并可以简化它。如果这不起作用，您可以在进行更改后对测试的任何行进行断点吗？

此外，您可以尝试初始化字符串变量，以防问题出在断点而不是测试本身。

最后，为什么要使用 Accessor 进行测试？您的测试代码似乎不需要访问任何私有成员，那么为什么不直接使用类本身的实例呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-16T21:39:17.383

调试器不适用于 ASP.Net 测试。

使用 System.Diagnostics.Debugger.Break 作为解决方法

# php - 这些 PHP 条件是相同的还是有一个优势

> ID：413928
> 
> 赞同：2
> 
> 时间：2009-01-05T17:52:53.067
> 
> 标签：php, variables, conditional

编写这样的 PHP 条件有什么好处：

```
if ($variable != NULL) { 
```

相对

```
if (!empty($variable)) { 
```

相对

```
if ($variable) { 
```

他们不都是一样的吗？如果您只是想判断变量是否存在，似乎最后一个总是最简单的。感谢您帮助我了解这里的区别。我错过了 PHP 101 的第一天。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-05T18:12:38.660

查看[此表](http://de3.php.net/types.comparisons)以了解 PHP 比较运算符。false、0、""、NULL 和未定义的变量之间存在许多细微差别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T18:29:50.077

我同意肖恩的观点，但我会用简单的英语概述每个人的作用：

```
if ($variable != NULL) { 
```

`$variable``NULL`如果尚未设置，将是。这实际上与`isset`未定义的变量相同且相同。

```
if (!empty($variable)) { 
```

通常，这会检查`$variable`字符串 ( `(string) $variable`) 的 a是否为`strlen`0。但是`true`会使其返回`false`，非 0 的整数和空数组也是如此。出于某种原因（我认为这是错误的）`$variable = '0';`将返回`true`.

```
if ($variable) { 
```

这种真/假检查的作用类似于`(boolean) $variable`- 基本上变量在转换为布尔值时是否返回真。

考虑它的一种方法是它的行为与空相同，只是返回相反的值。

有关我所说的`(boolean) $variable`（类型转换/杂耍）的更多信息，请参阅本[手册页](http://de3.php.net/manual/en/language.types.type-juggling.php)。

（PHP开发人员：这主要是凭记忆，如果我在这里错了，请纠正我！）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-05T21:39:07.167

在严格错误模式 (E_STRICT) 下运行时，子句

```
if ($variable) {} 
```

和

```
if ($variable != null) {} 
```

当这些变量未初始化时，会抛出通知。

```
Notice: Undefined variable: variable 
```

这些通知是代码缺陷的指标，因为使用未初始化是一个可能的安全漏洞。（关键字：register_globals）。

我最喜欢检查变量是否存在的是

```
if (isset($variable)) {} 
```

这将检查该变量是否曾被使用过（读取：使用值初始化！= null）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T18:34:09.473

相关问题：[PHP 中的弱类型化：为什么要使用 isset？](https://stackoverflow.com/questions/413929/weak-typing-in-php-why-use-isset-at-all)

基本上，它们在处理空值、空值、零和布尔值时是不一样的。

# php - PHP 中的弱输入：为什么要使用 isset？

> ID：413929
> 
> 赞同：17
> 
> 时间：2009-01-05T17:53:29.853
> 
> 标签：php, syntax

如果我这样做，我的代码似乎可以检查 null

```
if ($tx) 
```

或者

```
if (isset($tx)) 
```

当它更难写时，我为什么要写第二个？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-05T18:03:31.940

```
if ($tx) 
```

**对于以下任何**条件，此代码将评估为 false ：

```
unset($tx); // not set, will also produce E_WARNING
$tx = null;
$tx = 0;
$tx = '0';
$tx = false;
$tx = array(); 
```

下面的代码只会在以下条件下评估为 false：

```
if (isset($tx))

// False under following conditions:
unset($tx); // not set, no warning produced
$tx = null; 
```

对于某些人来说，打字非常重要。但是，PHP 在设计上对变量类型非常灵活。这就是创建[变量处理函数](http://us.php.net/manual/en/ref.var.php)的原因。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-06T07:11:24.983

**isset() 与 TYPE 或 VALUE 无关——仅与 EXISTENCE 相关。**

if ($condition)... 将评估**变量**的值作为布尔值。

if ( isset($condition) )... 将评估**变量值**的存在作为布尔值。

isset() 可能为假有两个原因。

首先，因为变量没有设置，所以没有值。

其次，因为一个变量是 NULL，这意味着“未知值”并且不能被认为是设置，因为它包含“无值”，而且因为很多人使用 $v = null 来表示与 unset($v) 相同的东西。

（请记住，如果您特别想检查 null，请使用 is_null()。）

isset() 通常用于检查可能存在或不存在的外部变量。

例如，如果您有一个名为 page.php 的页面，其中包含：

```
ini_set('display_errors', 1);
error_reporting(E_ALL);

if ( $_GET["val"] ) {
    // Do Something
} else {
    // Do Nothing
} 
```

它适用于以下任何 URL：

```
http://www.example.com/page.php?val=true // Something will be done.
http://www.example.com/page.php?val=monkey // Something will be done.

http://www.example.com/page.php?val=false  // Nothing will be done.
http://www.example.com/page.php?val=0// Nothing will be done. 
```

但是，您将收到此 URL 的错误：

```
http://www.example.com/page.php 
```

因为 URL 中没有 'val' 参数，所以 $_GET 数组中没有 'val' 索引。

正确的方法是这样的：

```
if ( isset($_GET["val"]) ) {
    if ( $_GET["val"] ) {
        // Do Something
    } else {
        // Do Nothing
    }
} else {
    // $_GET["value"] variable doesn't exist.  It is neither true, nor false, nor null (unknown value), but would cause an error if evaluated as boolean.
} 
```

虽然这有捷径。

您可以使用 empty() 检查存在和某些布尔条件的组合，

```
if ( !empty($_GET["val"]) ) {
    // Do someting if the val is both set and not empty
    // See http://php.net/empty for details on what is considered empty
    // Note that null is considered empty.
} 
```

或者

```
if ( isset($_GET["val"]) and $_GET["val"] ) {
    // Do something if $_GET is set and evaluates to true.
    // See php.net logical operators page for precedence details,
    // but the second conditional will never be checked (and therefor
    // cause no error) if the isset returns false.
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-06T20:37:36.340

我想指出，我在这里读到的每个人的回复都应该添加一个警告：

**“如果测试已设置为 NULL 的变量，isset() 将返回 FALSE”**（[php.net/isset](http://php.net/isset)）。

这意味着在*某些*情况下，例如检查 GET 或 POST 参数，使用 isset() 足以判断变量是否已设置（因为它要么是字符串，要么不会被设置）。但是，在 NULL 是变量的可能值的情况下，这在您进入对象和更复杂的应用程序时相当常见，isset() 会让您感到兴奋和干燥。

例如（使用 PHP 5.2.6 和 Suhosin-Patch 0.9.6.2 (cli) 测试（构建时间：2008 年 8 月 17 日 09:05:31））：

```
<?php
$a = '';
$b = NULL;
var_dump(isset($a));
var_dump(isset($b));
var_dump(isset($c)); 
```

输出：

```
bool(true)
bool(false)
bool(false) 
```

谢谢，PHP！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-05T17:55:25.870

第一个仅根据您的服务器配置方式起作用。在许多生产服务器上，它会中断。

使用`isset()`并快乐。

或者，在 PHP 源代码顶部尝试使用以下代码并观察它的中断：

```
ini_set('display_errors', 1);
error_reporting(E_ALL); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-05T17:59:37.377

简而言之，这些比较是不一样的。第一个会将变量转换为布尔值，这将无法检查空数组、非数字字符串和其他检查，其中明确设置了变量。第二个检查 (isset()) 测试变量是否存在。

如果不检查变量的类型，我永远不会执行第一次检查（布尔转换）。

更不用说，第一次检查会抛出 E_NOTICE，我总是以最大错误报告级别运行。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-05T17:55:40.347

因为前者还可以检查真/假，您可能想要也可能不想要。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-05T17:57:54.150

因为第一个会产生警告，如果$tx === false也会返回true，和未定义不一样

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-06T20:01:39.470

**正如每个答案都指出的那样，这两者完全不同。如果你不使用 isset，很多东西都会被评估为假，尤其是数组、假值、数值 0（和其他）等。确实如此。**

在我看来，每个人都如此迅速地捍卫PHP 中的**正确**编程对我来说似乎很奇怪。如果我想做正确的编程，我有大量的静态类型、强类型语言可以使用。在我看来，PHP 的一个优点是我不必过多考虑类型。当然，在某些情况下

```
if ($tx) 
```

当它实际上确实有一个值时，它的评估结果为 false，但是如果你想检查**它是否是一个 Transaction Object**，它要么工作要么不工作。事实证明，使用 Doctrine 框架，这段代码

```
if (isset($tx)) 
```

获取查询的第一个对象后总是评估为真。我不得不说

```
if ($tx instanceof PurchaseRecord) 
```

所以我的观点是，在 PHP 中，你知道你在测试什么！例如，如果它是来自 GET 请求的参数，那么它将为 null、空或有值。你必须处理这三种情况。或者两个案例，或者您在特定代码中拥有的任何数量的案例。**一旦你有了，如果它在你的开发服务器上工作并且在你的生产服务器上工作，也许你可以说它工作并继续你的生活？**

（在 Java 或 C# 中，它必须编译然后运行而不会抛出异常。Java 中的大多数 NullPointer 异常实际上都会被抛出而不会引起任何问题：Java API 不可能检查代码中的所有空值，因为这是不可能的，也因为它不是问题。如果它在预期的时候编译和工作，你知道你的代码是好的。然后你可以担心抛出更多正确的异常。）

**如果在任何时候您都必须知道 PHP 中代码的底层类型，为什么不首先使用类型进行编码呢？或者更重要的是，为什么不利用 PHP 的松散性和运行代码的代码。**

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2009-01-05T18:01:04.643

同样重要的是要注意 PHP 中的字符串可以设置但为空。因此，即使字符串中没有任何内容，isset 也会返回 true，为了防止这种情况，我使用类似这样的函数来替换 isset：

```
<?php
    function exists($var) {
        if (isset($var) && $var != "") {
            return true;
        } else {
            return false;
        }
    }
?> 
```

# function - 如何用任意数量的函数组成`not`？

> ID：413930
> 
> 赞同：31
> 
> 时间：2009-01-05T17:54:03.940
> 
> 标签：function, haskell, functional-programming, composition

当我有一些类型的功能时

```
f :: (Ord a) => a -> a -> Bool
f a b = a > b 
```

我想要用 not 包装这个函数的 make 函数。

例如制作这样的功能

```
g :: (Ord a) => a -> a -> Bool
g a b = not $ f a b 
```

我可以使组合器像

```
n f = (\a -> \b -> not $ f a b) 
```

但我不知道怎么做。

```
*Main> let n f = (\a -> \b -> not $ f a b)
n :: (t -> t1 -> Bool) -> t -> t1 -> Bool
Main> :t n f
n f :: (Ord t) => t -> t -> Bool
*Main> let g = n f
g :: () -> () -> Bool 
```

我究竟做错了什么？

还有一个额外的问题，我如何为具有更多和更少参数的函数做到这一点，例如

```
t -> Bool
t -> t1 -> Bool
t -> t1 -> t2 -> Bool
t -> t1 -> t2 -> t3 -> Bool 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-01-08T00:52:22.423

实际上，用类型类做任意的 arity 被证明是非常容易的：

```
module Pred where

class Predicate a where
  complement :: a -> a

instance Predicate Bool where
  complement = not

instance (Predicate b) => Predicate (a -> b) where
  complement f = \a -> complement (f a)  
  -- if you want to be mysterious, then
  -- complement = (complement .)
  -- also works

ge :: Ord a => a -> a -> Bool
ge = complement (<) 
```

感谢您指出这个很酷的问题。我爱哈斯克尔。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2009-01-06T01:54:17.697

除非你想对类型类进行修改，最好留给思想实验和概念证明，否则你不要泛化到多个参数。不要尝试。

至于你的主要问题，这是用 Conal Elliott 的*语义编辑器组合器*最优雅地解决的。语义编辑器组合器是一个具有如下类型的函数：

```
(a -> b) -> F(a) -> F(b) 
```

哪里`F(x)`是一些涉及的表达式`x`。还有一些“逆变”编辑器组合器`(b -> a)`取而代之。直观地说，编辑器组合器选择某个较大值的一部分进行操作。您需要的称为`result`：

```
result = (.) 
```

查看您尝试操作的表达式的类型：

```
a -> a -> Bool 
```

这种类型的结果（codomain）是 ，该类型*的*`a -> Bool`结果是，这就是您要应用的内容。因此，要应用于函数结果的结果，请编写：*`Bool``not``not``f`*

 *```
(result.result) not f 
```

这很好地概括了。这里还有一些组合器：

```
argument = flip (.)     -- contravariant

first f (a,b) = (f a, b)
second f (a,b) = (a, f b)

left f (Left x) = Left (f x)
left f (Right x) = Right x
... 
```

所以如果你有一个`x`类型的值：

```
Int -> Either (String -> (Int, Bool)) [Int] 
```

而你想申请`not`布尔，你只需拼出到达那里的路径：

```
(result.left.result.second) not x 
```

哦，如果你已经接触过 Functors，你会注意到它`fmap`是一个编辑器组合器。其实上面可以写成：

```
(fmap.left.fmap.fmap) not x 
```

但我认为使用扩展名称更清楚。

享受。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-01-05T18:33:56.713

你的 n 组合器可以写成：

```
n = ((not .) .) 
```

至于您的奖金问题，典型的方法是创建其中几个：

```
lift2 = (.).(.)
lift3 = (.).(.).(.)
lift4 = (.).(.).(.).(.)
lift5 = (.).(.).(.).(.).(.) 
```

等等

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-01-05T19:09:04.927

回复：*我做错了什么？*：

我认为您的组合器很好，但是当您让绑定它在顶层时，Haskell 令人讨厌的“默认规则”之一开始发挥作用，并且绑定没有被推广：

```
Prelude> :ty (n f)
(n f) :: (Ord t) => t -> t -> Bool
Prelude> let g = n f
Prelude> :ty g
g :: () -> () -> Bool 
```

我认为您可能会受到“单态限制”的打击，因为它适用于类型类。在任何情况下，如果您退出顶级循环并将内容放入具有显式类型签名的单独文件中，则一切正常：

```
module X where

n f = (\a -> \b -> not $ f a b)
f a b = a > b

g :: Ord a => a -> a -> Bool
g = n f 
```

**额外的问题**：要使用越来越多的类型参数来做到这一点，您可以尝试使用类型类系统玩坏血病技巧。需要参考的两篇论文是 Hughes 和 Claessen 的[关于](http://www.cs.chalmers.se/~rjmh/QuickCheck/)QuickCheck 的论文和 Ralf Hinze 的论文[Generics for the Masses](http://www.informatik.uni-bonn.de/~ralf/publications/Masses.pdf)。

# sql - 如何防止/检测使用 EXP() 的 Postgresql 计算中的下溢

> ID：413940
> 
> 赞同：4
> 
> 时间：2009-01-05T17:56:44.683
> 
> 标签：sql, postgresql, underflow

我在使用 EXP(x) 函数的查询中收到一个超出范围的值：来自 pgsql 的下溢错误。x 的什么值触发了这个？如何预防或检测它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-29T15:18:30.993

函数 exp 称为指数函数，它的逆是自然对数，或以 e 为底的对数。数字 e 通常也被定义为自然对数的底

换句话说，exp(x) 和 e^x 是同一个函数。然而，由于 e 是一个超越数，因此是无理数，它的值不能准确给出。

e 截断到小数点后 10 位的数值是 2.71828 1828

因此，函数 exp(x) 在技术上对 x 的所有值都有效，但实际上，您可以限制它们。例如，如果您将它们限制为 +/- 700，您应该涵盖涵盖该范围的所有情况

```
exp(700) = 1.01423205 × 10^304
exp(-700) = 9.85967654 × 10^-305 
```

不仅如此，还取决于您的应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T18:37:59.880

我正在使用的一种解决方法是使用“CASE”来检查我的参数的范围，而不是在超出合理范围时回退到默认值：

```
SELECT CASE WHEN p > 100 THEN 0
       ELSE .1 ^ p
       END; 
```

# pdf - pdfLaTeX 中的首字下沉

> ID：413954
> 
> 赞同：12
> 
> 时间：2009-01-05T18:01:37.637
> 
> 标签：pdf, latex, pdf-generation, typography

我想找到一种在 pdfLaTeX 中生成首字母大写（几行高的大首字母）的方法。我知道有一个包在与+`dropping`一起使用时效果很好。然而，当与结果一起使用时看起来很难看。`latex``dvips``pdflatex`

我的源文件是：

```
\documentclass[12pt]{article}

% for pdflatex file.tex # dropping is ugly
% \usepackage[pdftex]{graphicx}
% \usepackage[pdftex]{dropping}

% for latex file.tex ; dvips -T 12cm,8cm file.dvi # dropping is OK
\usepackage[dvips]{graphicx}
\usepackage{dropping}

\usepackage[papersize={12cm,8cm},
    left=0.5cm,right=0.5cm,
    top=0.5cm,bottom=0.5cm]{geometry}

\begin{document}
\dropping[-3pt]{3}{W}ith a drop cap, the initial sits within the margins and
runs several lines deep into the paragraph, pushing some normal-sized text off
these lines. This keeps the left and top margins of the paragraph flush.
In~modern browsers, this can be done with a combination of HTML and CSS
by~using the float: left; setting.
\end{document} 
```

当我将其编译为

```
latex drop.tex && dvips -T 12cm,8cm drop.dvi 
```

结果没问题：

[![滴胶-dvips](https://i.stack.imgur.com/oSIvg.png)](https://i.stack.imgur.com/oSIvg.png)

当我取消注释`[pdftex]`行并将其编译为

```
pdflatex drop.tex 
```

结果是：

[![滴-pdflatex](https://i.stack.imgur.com/kZsKc.png)](https://i.stack.imgur.com/kZsKc.png)

谁能建议一种更好的方法来制作首字下沉`pdflatex`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-05T18:51:28.097

非常感谢您的快速响应！实际上，hop 和 Charlie Martin 的评论都很有用。`lettrine.sty`是一个很棒的包，*如果*使用可缩放字体，它就可以工作。

因此，解决方案是强制使用 Type 1 CM 字体而不是默认 CM*并*使用`lettrine.sty`. `lettrine.sty`文档建议`\usepackage{type1cm}`.

这有效：

```
\documentclass[12pt]{article}

% works with pdfLaTeX
\usepackage{type1cm} % scalable fonts
\usepackage{lettrine}

\usepackage[papersize={12cm,4cm},
    left=0.5cm,right=0.5cm,
    top=0.5cm,bottom=0.5cm]{geometry}

\begin{document}
\lettrine[lines=3,slope=-4pt,nindent=-4pt]{W}{ith} a drop cap, the initial sits
within the margins and runs several lines deep into the paragraph, pushing some
normal-sized text off these lines. This keeps the left and top margins of the
paragraph flush.  In~modern browsers, this can be done with a combination of
HTML and CSS by~using the float: left; setting.
\end{document} 
```

这是结果：

[![pdflatex-type1cm-lettrine](https://i.stack.imgur.com/hS71N.png)](https://i.stack.imgur.com/hS71N.png)

谢谢！

PS。`dropping`即使使用 也无法正常工作`type1cm`。

**UPD。**此示例也适用于`xelatex`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-05T18:13:04.883

尝试另一种字体，一种带有缩放比例的字体；这看起来像 PDF 没有为 cap-W 找到足够大的字体并且正在替换。另一种选择是使用 dvi 到 PDF 的翻译。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-05T18:12:21.640

[信笺](http://www.ctan.org/tex-archive/macros/latex/contrib/lettrine/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-18T16:05:55.193

正如[jetxee](https://stackoverflow.com/questions/413954/drop-caps-in-pdflatex#414091)所提到的，有必要使用可缩放的字体来获得正确的初始大小。如果您更改默认字体，则无需您执行任何操作即可发生这种情况。

由于历史原因，默认的 CM 字体被加载以“对齐”到特定大小，而不是在任何缩放大小下都可以加载。这是从使用原始 Metafont 源时开始的，当时不同的字体大小改变了字形的实际形状（好奇的谷歌*光学尺寸*）。

使用 CM 字体解决此问题的规范解决方案是加载`fix-cm`包。该软件包`type1cm`是一个较旧的软件包，基本上做同样的事情。

# linux - 如何编写 Linux 驱动模块调用/使用另一个驱动模块？

> ID：413955
> 
> 赞同：16
> 
> 时间：2009-01-05T18:02:14.017
> 
> 标签：linux, module, kernel, driver, device

我正在开发一个 Linux 驱动程序可加载模块，我必须在我的驱动程序中使用另一个设备。（一种堆叠在另一个驱动程序上的驱动程序）

如何在我的驱动程序中调用/使用另一个驱动程序？我认为它们都在内核中，因此可能有一种方法可以直接使用另一个驱动程序。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-05T19:02:06.283

您将需要`EXPORT_SYMBOL`（或`EXPORT_SYMBOL_GPL`）宏。例如：

```
/* mod1.c */
#include <linux/module.h>
#include <linux/kernel.h>
#include "mod1.h"
....
void mod1_foo(void)
{
    printk(KERN_ALERT "mod1_foo\n");
}
EXPORT_SYMBOL(mod1_foo);

/* mod2.h */
....
extern void mod1_foo(void);
....

/* mod2.c */
#include <linux/module.h>
#include <linux/kernel.h>
#include "mod1.h"
#include "mod2.h"
int init_module(void)
{
    mod1_foo();
    ... 
```

这应该是一帆风顺的，但您当然必须小心命名空间 - 踩在别人的内核模块符号上会很不幸。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-12T10:34:57.933

你忘了说你还应该研究try_module_get/module_put/symbol_get/symbol_put/symbol_request，以确保加载另一个模块，以及在使用过程中不卸载它的事实。我不记得确切的细节；我认为 modprobe 将确保加载其他模块，但我不确定是否会添加用于卸载的运行时依赖项。我猜在其他情况下可能需要这些 API，但需要了解它们才能检查。

顺便说一句，免费书籍 Linux 设备驱动程序可在此处获得，它将回答这个问题等等： http: [//lwn.net/Kernel/LDD3/](http://lwn.net/Kernel/LDD3/)

# bash - 为什么这个 shell 脚本中的 'cp' 失败了？

> ID：413962
> 
> 赞同：2
> 
> 时间：2009-01-05T18:04:16.617
> 
> 标签：bash, shell, scripting

这是我编写的 shell 脚本中的一段代码：

```
for src in $(find . -type f -maxdepth 1 \! -name ${deploy} \! -name gvimrc)
do
    src=$(basename ${src})
    dest="~/.${src}"
    copy="${src} -> ${dest}"
    cp $src $dest && echo -e "${ok} ${copy}" || echo -e "${fail} ${copy}"
done 
```

由于某种原因，`cp`无法执行。例如，在这种情况下`$src='bashrc'`，我收到此错误：

```
cp: ~/.bashrc: No such file or directory 
```

不过，我不明白为什么会发生这种情况，因为显然，`~/.bashrc`是*目标*，而不是源，所以`cp`不应该关心它是否存在。到底出了什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-05T18:07:46.627

尝试使用`$HOME`而不是`~/`您的主目录。

```
dest="$HOME/.$src" 
```

**此外，如果您的任何**文件名中有空格，您可能希望在您的`$src`和`$dest`变量周围加上引号。

 **```
cp "$src" "$dest" && echo -e "${ok} ${copy}" || echo -e "${fail} ${copy}" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-05T18:08:23.287

当出现在这样的双引号中时，“~”不会扩展到您的主目录。改为使用`"${HOME}/.${src}"`。还可以考虑使用另一种在文件名包含空格时有效的方法（哦，我只需要考虑我所有的愚蠢的 mp3 文件，其中包含空格！）。而不是做

```
for src in $(find . -type f -maxdepth 1 \! -name ${deploy} \! -name gvimrc)
do
    # ...
done 
```

更喜欢

```
find . -type f -maxdepth 1 \! -name ${deploy} \! -name gvimrc | while read src
do
    # ...
done 
```

因此，通过结合@sirlancelots 和我的空间修复，我们得到：

```
find . -type f -maxdepth 1 \! -name ${deploy} \! -name gvimrc | while read src
do
    src=$(basename "${src}")
    dest="${HOME}/.${src}"
    copy="${src} -> ${dest}"
    cp "$src" "$dest" && echo -e "${ok} ${copy}" || echo -e "${fail} ${copy}"
done 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-05T18:07:22.850

您已经逃脱了 ~ ，因此它不会被扩展，并且 cp 不知道该怎么做。

和

```
dest=~/".${src}" 
```

bash 应该这样做。

# pixelsense - 桌面的多点触控界面有真正的价值吗？

> ID：413977
> 
> 赞同：3
> 
> 时间：2009-01-05T18:08:38.433
> 
> 标签：pixelsense, multi-touch

我最近很幸运参与了微软的 Surface 项目，为即将举行的“贸易展”编写了一款教育游戏。我真的可以看到 Surface 的协作性质和自然交互在教育领域的巨大潜力，我真的无法对“普通”机器上的触摸或多点触控感到兴奋。

我可以看到多点触控在 iPhone 这样的移动设备中是多么有用，但我只是不明白我想如何或为什么要将我的粘手指放在我的台式机或笔记本电脑上，或者什么软件会真正利用其中（特别是如果它仅限于“仅”2个输入。我想我用鼠标调整图片大小比从鼠标到达屏幕并在那里进行操作要快:)

我只是不明白吗？是否有人在开发可能会改变我想法的令人兴奋的多点触控应用程序？:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-05T21:31:26.793

Apple 购买了一家名为[FingerWorks](http://www.fingerworks.com/ "手指工厂")的公司的专利组合，以便将多点触控构建到自己的设备中。FingerWorks 制作了一个名为 TouchStream 的键盘替代品，这是我拥有过的最好的输入设备。

![替代文字](https://i.stack.imgur.com/CpEi3.jpg)

作为一个键盘，它让我可以全速触摸打字，而按键“按下”注册所需的力为零。键盘的右半部分还充当鼠标垫，包括左键、右键和中键单击、双击等。它包括用于剪切、复制、粘贴、放大、缩小、向上翻页、向下翻页、切换应用程序以及您通常使用组合键、特殊键或菜单的其他许多常见操作。它允许我将宏附加到对应用程序敏感的手势上——我的左手抽动一下，我就可以编译我正在用 Visual C++ 开发的应用程序；同样的抽搐在其他应用程序中做了其他事情。可以将不同的 twitch 绑定到另一个宏，或插入 HTML 模板等。

这款设备极大地提高了我的工作效率——我无需将手从主行移开即可使用鼠标或执行手势，如果需要，我仍然可以使用常规的旧 Ctrl-Alt-Shift-foo 组合键到（在emacs中当然可以）。

我非常想念 TouchStream，但不幸的是，它的机械设计很脆弱，在公司消失后，我选择出售键盘（比我支付的价格要高得多——TouchStream 爱好者社区仍然存在）而不是意外损坏。

所有这些都是说：那些对多点触控作为主要界面的想法嗤之以鼻的人——*尤其是*对程序员来说——根本没有看到它做得很好。我有。我已经准备好让它回来了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-03-26T02:37:44.193

查看[10/GUI](http://vimeo.com/6712657)的概念视频，了解多点触控桌面的工作原理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T18:12:34.680

我认为这里的核心概念是多点触控在某些领域表现出色（例如 iPhone 和 Surface），而对于您每天使用计算机执行的日常任务，它可能会失败。

我的 Macbook Air 具有多点触控功能（在一定程度上），但除了两指滚动之外，我似乎从未真正使用过它。有兴趣了解多点触控界面（如 Macbook Air）背后的可用性统计数据，因为它不是输入/使用的主要来源。

课程用马。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T19:17:51.867

你得把我的键盘从我冰冷、死气沉沉的手中撬开。

IT 专业人员、生产力工作者和软件开发人员使用真正的键盘比其他任何东西都更加高效。我对所有这些“悬而未决”的概念也有疑问，类似少数派报告的界面 - 没有人有上臂力量让他们的手整天保持在那个位置。与传统鼠标或轨迹球相比，我进一步质疑它们所暴露的精度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-05T18:15:32.553

好吧，也许我可以在笔记本电脑和平板电脑上看到多点触控。如果屏幕没有变脏。但我确实看到了非接触式 SDK ( [http://www.codeplex.com/touchless/Release/ProjectReleases.aspx?ReleaseId=17986](http://www.codeplex.com/touchless/Release/ProjectReleases.aspx?ReleaseId=17986) ) 使多点触控更适合家庭使用。您可以在网络摄像头前在空中做手势以向计算机发出命令或控制图片大小和方向。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T19:09:53.817

我认为唯一真正的优势是更换鼠标。

我发现 Apple 的多点触控触控板如今比 PC 触控板更自然。我从没想过我会习惯只有一个按钮，现在当两根手指放在触摸板上（你已经在触摸它）并点击时，两个按钮只是烦人的事情。

我认为它必须与您的计算机显示器相同。想象其中三个嵌入在非程序员桌面中，例如 30 度角，没有外部输入设备。

使用起来非常自然，而且比必须处理键盘和鼠标更“轻量级”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-24T19:43:31.210

我同意Sarat的观点，多点触控会有自己擅长的领域。我还认为，一旦多点触控变得更加主流，人们就会习惯它，应用程序也会随之而来。与计算机交互可以产生深刻的变化（多点触控也意味着多用户）并且可以使其更具社交性。我一直在关注这项技术，因为它在未来可能会成为一件大事。

# c# - 评论 try catch 语句

> ID：413985
> 
> 赞同：4
> 
> 时间：2009-01-05T18:10:29.973
> 
> 标签：c#, error-handling, comments

在 try-catch 语句中解释错误处理的正确位置是什么？似乎您可以在 try 块或 catch 块的开头添加解释性注释。

```
// Possible comment location 1
try
{   
    // real code
}
// Possible comment location 2
catch
{
    // Possible comment location 3

    // Error handling code

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-05T18:15:24.973

我通常会执行以下操作。如果只处理一个异常，我通常不会打扰，因为它应该是自记录的。

```
try
{   
    real code // throws SomeException
    real code // throws SomeOtherException
}
catch(SomeException se)
{
    // explain your error handling choice if it's not obvious
}
catch(SomeOtherException soe)
{
    // explain your error handling choice if it's not obvious
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-05T18:17:23.003

**“评论是谎言”**。处理这些变量名和一般逻辑，这样你就可以避免它。如果您真的需要撒谎，请在 catch 块内进行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-05T18:12:53.293

我认为这根本不重要。

我认为在评论中要记住的重要一点是首先要解决**为什么**代码是这样的，而不是代码在做**什么**。这并不是说您不应该在简明的评论中解释复杂的逻辑，而是说为什么要重要得多。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-05T18:16:18.323

仅仅设置代码以便不需要额外的注释呢？

```
try
{ 
   performDifficultAct( parameter );
}
catch (ArgumentOutOfRangeException couldNotFindArgument)
{
   // handle exception
}
catch (Exception otherUnknownException )
{
   // handle exception
} 
```

如果您可以使用变量和方法命名来显示正在发生的事情，则无需记录。如果您必须记录或引发异常，则无需记录 - 源代码中的记录消息无论如何都应该是不言自明的。唯一需要在代码中添加额外文档的情况是，当代码在做什么完全不明显时，或者您必须添加一个容易错过的陷阱或模棱两可的步骤，这将需要任何查看将来的代码。

编辑：为了澄清一点，这里有更多关于我如何使用这些“catch”语句来为维护程序员和用户/支持/质量保证/使用该软件的任何其他人提供有用的信息。还说明了我绝对想在代码中添加额外注释的情况：

```
public void PerformSomeActionOrOther(string parameter)
{
  try
  { 
     // For some reason an eleven character string causes a bluescreen from Kernel32
     if (parameter.Length==11) parameter+=" ";

     performDifficultAct( parameter );
  }
  catch (ArgumentOutOfRangeException couldNotFindArgument)
  {
     this.Log.WriteLn("Argument out of range exception in ArbitraryClass.PerformSomeActionOrOther");
     this.Log.WriteLn(String.Format("Probable cause is that {0} is not in the array", parameter));
     this.Log.WriteLn(String.Format("Exception: {0}", couldNotFindArgument.Message));
  }
  catch (Exception otherUnknownException )
  {
     this.Log.WriteLn("Unexpected exception in ArbitraryClass.PerformSomeActionOrOther");
     this.Log.WriteLn(String.Format("Exception: {0}", otherUnknownException.Message));
     throw( otherUnknownException );
  }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-05T18:19:16.540

绝对不要评论它的顶部，因为除了“在此处启动异常处理块”之外，您还能说什么有用的？对 catch 语句的评论更好，但总的来说，你要说什么？“处理 NullPointerException”？

如果你需要说你正在做一些令人兴奋的事情，我会去发表评论，比如链接到应用程序域异常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-05T18:16:10.930

我认为写得好的 try/catch 应该简洁而具体。我同意@Jason 的观点，即**为什么**更重要，但同样重要的是，让 catch 中的代码尽可能简洁。

如果您使用特定的异常来捕获它也会有所帮助。例如，如果您使用 Java，请尝试捕获 NullPointerException 而不是通用异常。这应该解释为什么存在 try catch 以及您正在做什么来解决它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-05T18:17:48.727

只要您保持一致，位置就无关紧要。我个人的偏好如下：

```
//comment 1: code does XYZ, can cause exceptions A, B, C
try {
    //do something
}
//comment 2: exception A occurs when foo != bar
catch (ExceptionA a) {
    //do something
}
//comment 3: exception B occurs when bar is null
catch (ExceptionB b) {
    //do something
}
//comment 4: exception B occurs when foo is null
catch (ExceptionC c) {
    //do something
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-19T18:36:11.503

我知道这不是您要寻找的答案，但根本不要发表评论。如果你的代码不够清晰，无法在没有注释的情况下独立存在，那么你应该重构它直到它清晰为止。[Jeffrey Palerm](http://jeffreypalermo.com/)刚刚写了[一篇博](http://jeffreypalermo.com/blog/limiting-code-comments-increases-maintainability/)文，说明了这一点。

通常，评论倾向于记录：

*   代码太紧凑了。看起来像这样的事情：`++i?--g:h-i;`
*   需要总结的长代码块
*   一次性的或没有明确存在理由的代码

请参阅下面的关于异常块的一些简单注释的简化示例，以及无需注释的版本。

```
bool retries = 0;
while (retries < MAX_RETRIES)
{
    try
    {
        ... database access code
        break;
    }
    // If under max retries, log and increment, otherwise rethrow
    catch (SqlException e)
    {
        logger.LogWarning(e);
        if (++retries >= MAX_RETRIES)
        {
            throw new MaxRetriesException(MAX_RETRIES, e);
        }
    }
    // Can't retry.  Log error and rethrow.
    catch (ApplicationException e)
    {
        logger.LogError(e);
        throw;
    }
} 
```

虽然上述注释促进了可重用性，但您基本上必须同时维护代码和注释。可以（并且更可取）对此进行重构，以便在没有注释的情况下更清晰。

```
bool retries = 0;
while (canRetry(retries))
{
    try
    {
        ... database access code
        break;
    }
    catch (SqlException e)
    {
        logger.LogWarning(e);
        retries = incrementRetriesOrThrowIfMaxReached(retries, e);
    }
    catch (ApplicationException e)
    {
        logger.LogError(e);
        throw;
    }
}

...

private void incrementRetriesOrThrowIfMaxReached(int retries, Exception e)
{
    if (++retries >= MAX_RETRIES)
        throw new MaxRetriesException(MAX_RETRIES, e);

    return retries;
}

private bool canRetry(int retries)
{
    return retries < MAX_RETRIES;
} 
```

后一个示例可能看起来像更多的代码以获得非常微妙的好处，但收益不能被夸大。代码同样易于理解，但您的好处是不需要单独的一组元数据（注释）来解释代码。代码解释了自己。如果您的 catch 代码块太长并且需要注释来总结，请考虑将其重构为单独的方法以提高可读性。

# jquery - 利用 JQuery find 或 inArray 方法在数组中查找项目

> ID：413987
> 
> 赞同：7
> 
> 时间：2009-01-05T18:11:00.003
> 
> 标签：jquery

我想知道是否有人知道使用 JQuery find 方法或 inArray 方法在数组中查找项目的方法。我似乎在文档中找不到任何东西。

例如：

```
var items = [{id:1, name:'bob'}, {id:2, name:'joe'}, {id:3, name:'ben'}];
var found = $(items).find("[name='ben']"); 
```

或者

```
var items = [{id:1, name:'bob'}, {id:2, name:'joe'}, {id:3, name:'ben'}];
var found = $.inArray("[name='ben']", items); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-05T18:18:46.620

我认为您正在寻找的是 RichArray 插件，更具体地说

```
$.RichArray.filter() 
```

您可以在[RichArray获取它](http://plugins.jquery.com/project/rich-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T18:19:52.513

jQuery find 方法在 DOM 上运行。如果您尝试搜索一个数组，您可能会遇到以下代码：

```
// check to make sure context is a DOM element or a document
if ( context && context.nodeType != 1 && context.nodeType != 9)
    return [ ]; 
```

这可以在 find 方法的 jQuery 源代码中找到。如果您不使用 DOM 元素或文档作为上下文，它总是返回一个空数组。

# apache-flex - Flex：对象上的数据绑定

> ID：413989
> 
> 赞同：0
> 
> 时间：2009-01-05T18:11:33.343
> 
> 标签：apache-flex, actionscript

可以说我有以下内容：

```
public class MyObject
{

[Bindable]
public var foo:int = 3;

}

...

[Bindable]
var _obj:MyObject = null; 
```

绑定 foo 以便在 _obj 设置为新实例时更新此绑定的最佳方法是什么？

我试过了：

```
<mx:Label text="{_obj&amp;&amp;_obj.foo}"/> 
```

但这并不漂亮。我可以用某种方式表达这个吗

SO::Flex 社区是怎么想的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-05T20:13:34.267

绑定不依赖于属性；您可以获得与字段或属性绑定的好处。

看起来你可能遗漏了一些东西，也许吧？例如，一旦将类及其实例标记为可绑定，则以下 MXML 和 AS 可用于绑定字段和属性：

```
package
{
    [Bindable]
    public class MyFoo
    {
        public var myPublicField:int;
        private var _myPrivateField:int;

        public function MyFoo()
        {
            myPublicField = 0;
            myPublicProperty = 0;
        }

        public function get myPublicProperty():int
        {
            return _myPrivateField;
        }

        public function set myPublicProperty(value:int):void
        {
            _myPrivateField = value;
        }
    }
}

<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">

    <mx:Script>
        <![CDATA[

            [Bindable]
            private var myFoo:MyFoo;

            private function increment():void
            {
                if (!myFoo)
                    myFoo = new MyFoo();

                myFoo.myPublicField += 1;
                myFoo.myPublicProperty += 1;
            }

            private function replace():void
            {
                myFoo = new MyFoo();
            }

        ]]>
    </mx:Script>

    <mx:VBox>
        <mx:HBox>
            <mx:Label text="Field:" />
            <mx:Text text="{myFoo.myPublicField}" />
        </mx:HBox>
        <mx:HBox>
            <mx:Label text="Property:" />
            <mx:Text text="{myFoo.myPublicProperty}" /> 
        </mx:HBox>
        <mx:Button label="Increment Both Counts" click="increment()" />
        <mx:Button label="Replace with New Foo" click="replace()" />
    </mx:VBox>

</mx:Application> 
```

顺便说一句，如果您分别标记字段和属性 Bindable，而不是标记类，效果将是相同的，这只是同一事物的简写。另请注意，myFoo 默认以 null 开头，就像在您的示例代码中一样（即，“= null”分配是多余的）。

这个例子有帮助吗？如果没有，请发表评论，我会回来查看。希望是的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T18:52:45.583

使类可绑定：

```
[Bindable]
public class MyObject
{
    [Bindable]
    public var foo:int = 3;
} 
```

那么，这行得通吗？

```
<mx:Label text="{_obj.foo}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T19:10:07.373

**使用属性而不是公共变量。**

```
// Object

package MyObject
{
    public class MyObject
    {
        private var message:String;

        public function set Message(messagein:String):void
        {
            message = messagein;
            return;
        }

        [Bindable]
        public function get Message():String
        {
            return message;
        }

        public function MyObject()
        {
        }

    }
}

// Flex that calls it

<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="281" height="156">
<mx:Script>
    <![CDATA[
        import MyObject.MyObject;
        [Bindable]
        private var o:MyObject = new MyObject();

        private function UpdateMessage():void
        {
            o.Message = TextIn.text;
            return;
        }
    ]]>
</mx:Script>
    <mx:Label x="31" y="29" text="{o.Message}" width="201" id="TextOut"/>
    <mx:TextInput x="31" y="55" id="TextIn"/>
    <mx:Button x="31" y="85" label="Button" click="UpdateMessage()"/>

</mx:Application> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-06T23:18:31.770

我会看看 mx.binding.utils.BindingUtils 类。您可能会在那里找到一些东西，但是（正如 Christian Nunciato 上面所说的）数据绑定实际上是为更改对象的*属性*而不是对象本身而构建的。

干杯

# ios - 从 Nib 加载可重用的 UITableViewCell

> ID：413993
> 
> 赞同：89
> 
> 时间：2009-01-05T18:12:52.513
> 
> 标签：ios, iphone, uitableview, cocoa-touch, interface-builder

我能够设计自定义 UITableViewCells 并使用[http://forums.macrumors.com/showthread.php?t=545061](http://forums.macrumors.com/showthread.php?t=545061)中的线程中描述的技术很好地加载它们。但是，使用该方法不再允许您使用重用标识符初始化单元格，这意味着您必须在每次调用时创建每个单元格的全新实例。有没有人想出一个好方法来缓存特定的单元格类型以供重用，但仍然能够在 Interface Builder 中设计它们？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2009-04-18T23:08:45.933

实际上，由于您是在 Interface Builder 中构建单元格，因此只需在此处设置重用标识符：

[![IB_reuse_identifier](https://farm4.static.flickr.com/3537/3453319855_e275484e09.jpg)](http://www.flickr.com/photos/63309029@N00/3453319855/ "Flickr 上 lordbrutish 的 IB_reuse_identifier")

或者，如果您正在运行 Xcode 4，请检查属性检查器选项卡：

![在此处输入图像描述](https://i.stack.imgur.com/far91.png)

（编辑：你的 XIB 由 XCode 生成后，它包含一个空的 UIView，但我们需要一个 UITableViewCell；所以你必须手动删除 UIView 并插入一个 Table View Cell。当然，IB 不会显示任何 UITableViewCell 参数界面视图。）

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2009-01-05T18:21:49.780

只需使用适当的方法签名实现一个方法：

```
- (NSString *) reuseIdentifier {
  return @"myIdentifier";
} 
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2012-04-10T11:45:52.383

现在，在 iOS 5 中有一个合适的 UITableView 方法：

```
- (void)registerNib:(UINib *)nib forCellReuseIdentifier:(NSString *)identifier 
```

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2009-07-19T02:05:27.033

我不记得我最初是在哪里找到这段代码的，但到目前为止它对我来说一直很好。

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CustomTableCell";
    static NSString *CellNib = @"CustomTableCellView";

    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:CellNib owner:self options:nil];
        cell = (UITableViewCell *)[nib objectAtIndex:0];
    }

    // perform additional custom work...

    return cell;
} 
```

* * *

示例界面生成器设置...

[![替代文字](https://i.stack.imgur.com/AtqHZ.jpg)](https://i.stack.imgur.com/AtqHZ.jpg)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-01-05T20:42:28.233

看看我对这个问题的回答：

[是否可以在 Interface Builder 中设计 NSCell 子类？](https://stackoverflow.com/questions/202471/is-it-possible-to-design-nscell-subclasses-in-interface-builder)

在 IB 中设计 UITableViewCell 不仅是可能的，而且是可取的，因为否则所有手动连接和放置多个元素都非常繁琐。只要您尽可能小心地使所有元素不透明，性能就很好。在 IB 中为 UITableViewCell 的属性设置了重用 ID，然后在尝试出队时在代码中使用匹配的重用 ID。

去年，我还从 WWDC 的一些演讲者那里听说，您不应该在 IB 中制作表格视图单元格，但这是一大堆废话。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2011-01-17T21:31:21.210

从 iOS 大约 4.0 开始，iOS 文档中有特定说明可以使这项工作超快：

[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7)

向下滚动到它谈论子类化 UITableViewCell 的地方。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2011-12-09T00:47:08.933

这是另一种选择：

```
NSString * cellId = @"reuseCell";  
//...
NSArray * nibObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomTableCell" owner:nil options:nil];

for (id obj in nibObjects)
{
    if ([obj isKindOfClass:[CustomTableCell class]])
    {
        cell = obj;
        [cell setValue:cellId forKey:@"reuseIdentifier"];
        break;
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-10T12:51:23.760

路易斯方法对我有用。这是我用来从笔尖创建 UITableViewCell 的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{   
    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"CustomCellId"];

    if (cell == nil) 
    {
        UIViewController *c = [[UIViewController alloc] initWithNibName:@"CustomCell" bundle:nil];
        cell = (PostCell *)c.view;
        [c release];
    }

    return cell;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-01-22T11:31:42.900

我以类似的方式创建自定义视图单元 - 除了我通过 IBOutlet 连接单元。

该`[nib objectAt...]`方法容易受到数组中项目位置的变化的影响。

这种`UIViewController`方法很好——刚刚尝试过，效果很好。

但...

在所有情况下`initWithStyle`都不会调用构造函数，因此不会进行默认初始化。

我已经阅读了有关使用`initWithCoder`or的各种地方`awakeFromNib`，但没有确凿的证据表明其中任何一个都是正确的方法。

除了在方法中显式调用一些初始化方法外，`cellForRowAtIndexPath`我还没有找到答案。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-05-27T00:18:53.393

[不久前，我在blog.atebits.com](http://blog.atebits.com/2008/12/fast-scrolling-in-tweetie-with-uitableview/)上发现了一篇关于此主题的精彩博文，并从那时起开始使用 Loren Brichter ABTableViewCell 类来完成我所有的 UITableViewCells。

您最终会得到一个简单的容器 UIView 来放置所有小部件，并且滚动速度非常快。

希望这是有用的。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2010-09-29T00:30:36.570

这种技术也有效，并且不需要在视图控制器中使用时髦的 ivar 来进行内存管理。在这里，自定义表格视图单元位于名为“CustomCell.xib”的 xib 中。

```
 static NSData *sLoadedCustomCell = nil;

 cell = [tableView dequeueReusableCellWithIdentifier:@"CustomCell"];
 if (cell == nil) 
 {
   if (sLoadedCustomCell == nil) 
   {        
      // Load the custom table cell xib
      // and extract a reference to the cell object returned
      // and cache it in a static to avoid reloading the nib again.

      for (id loadedObject in [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:nil options:nil]) 
      {
        if ([loadedObject isKindOfClass:[UITableViewCell class]]) 
        {
          sLoadedCustomCell = [[NSKeyedArchiver archivedDataWithRootObject: loadedObject] retain];
          break;
        }
    }
    cell = (UITableViewCell *)[NSKeyedUnarchiver unarchiveObjectWithData: sLoadedCustomCell];
  } 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-03-01T05:29:41.337

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *simpleTableIdentifier = @"CustomCell";

CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
if (cell == nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];

    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
}         

return cell;
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-07-08T09:59:58.020

gustavogb 解决方案对我不起作用，我尝试的是：

```
ChainesController *c = [[ChainesController alloc] initWithNibName:@"ChainesController" bundle:nil];
[[NSBundle mainBundle] loadNibNamed:@"ChaineArticleCell" owner:c options:nil];
cell = [c.blogTableViewCell retain];
[c release]; 
```

它似乎工作。blogTableViewCell 是单元格的 IBOutlet，ChainesController 是文件的所有者。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2011-11-04T09:24:44.503

从 UITableView 文档中关于`dequeueWithReuseIdentifier`：“标识要重用的单元格对象的字符串。默认情况下，可重用单元格的标识符是它的类名，但您可以将其更改为任意值。”

自己覆盖 -reuseIdentifer 是有风险的。如果您的单元格子类有两个子类，并在一个表格视图中使用这两个子类，会发生什么情况？如果他们将重用标识符调用发送到 super 您将出列错误类型的单元格........我认为您需要覆盖重用标识符方法，但让它返回一个被替换的标识符细绳。或者，如果没有指定，让它以字符串形式返回类。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-01-05T20:27:41.447

对于它的价值，我在一次 iPhone 技术讲座上向一位 iPhone 工程师询问了这个问题。他的回答是，“是的，可以使用 IB 来创建单元格。但不要。拜托，不要。”

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-08-22T21:02:50.733

我按照 Ben Mosher 链接的 Apple 说明进行操作（谢谢！），但发现 Apple 忽略了一个重要点。他们在 IB 中设计的对象只是一个 UITableViewCell，他们从中加载的变量也是如此。但如果你真的将它设置为 UITableViewCell 的自定义子类，并为子类编写代码文件，你可以在代码中编写 IBOutlet 声明和 IBAction 方法，并将它们连接到 IB 中的自定义元素。那么就不需要使用视图标签来访问这些元素，你可以创建任何你想要的疯狂单元格。这是可可触摸的天堂。

# tfs - 无法使用 TeamExplorer 登录到 TFS，而它直接使用 IE 中的 Web 服务工作

> ID：413996
> 
> 赞同：1
> 
> 时间：2009-01-05T18:13:01.107
> 
> 标签：tfs

我在 Windows 2008 服务器上安装了 TFS 2008 sp1 完整版。

我可以使用团队资源管理器或 IE 在本地连接

从远程计算机：

如果我在以下地址提供良好的凭据，TFS 网络服务可以正常工作：

[http://192.168.1.239:8080/services/v1.0/ServerStatus.asmx?op=CheckAuthentication](http://192.168.1.239:8080/services/v1.0/ServerStatus.asmx?op=CheckAuthentication)

但是，Team Explorer 不断报告 TF31002 错误，并表示：

*   Team Foundation Server 名称、端口号或协议不正确：不是这种情况，因为 WS 工作

*   Team Foundation Server 处于脱机状态：出于同样的原因，情况并非如此

*   密码已过期或不正确。：Visual Studio 甚至不要求我提供凭据

对可能发生的事情有任何想法吗？我想到了一个潜在的版本问题，我为visual studio 2008安装了sp1。它没有解决任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-13T17:50:55.727

您是否可以将 VS 中的服务器配置为使用 HTTPS 连接？如果您的服务器上未配置 SSL，这将解释为什么上面的 URL 有效，但 Visual Studio 使用的 URL（相同但使用 HTTPS）不起作用。

如果没有，你能在你的工作站上安装[fiddler](http://www.fiddlertool.com/fiddler/version.asp)（它是一个 HTTP 流量监控工具）并观察 VS 和 TFS 之间的网络流量吗？这将准确地告诉您 VS 试图访问的网址，并可能让您更深入地了解正在发生的事情，因此您可以使用结果修改您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:54:06.907

我想描述一下我的经历：我们有可以通过 VPN + SSL 访问的 TFS2010，并且遇到了相同的 TF31002 错误。

经过长时间的斗争，我们发现了问题：SSL使用了不受信任的证书，这就是错误的原因！！

要解决此问题，应使用例如 IE 将 SSL 证书添加到本地证书存储：'Internet 选项 -> 内容 -> 证书 -> '根据证书选择选项卡' -> 导入'。欢呼！它的工作！*******************