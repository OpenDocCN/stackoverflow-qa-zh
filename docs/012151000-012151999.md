# StackOverflow 问答 12151000-12151999

# knockout.js - 淘汰赛模板绑定中的动态值

> ID：12151009
> 
> 赞同：0
> 
> 时间：2012-08-27T23:40:42.333
> 
> 标签：knockout.js, knockout-2.0

例如我有这样的模板，我想根据当前 $index 动态计算一些值

```
 <div class="cond" title="Click to flip">
        <div class="condFlip" data-bind="attr: {id: Id }, click: viewModel.setClick">               
            <div class="piece-all piece" data-bind="attr: {style: background-position: viewModel.getValue($index)  viewModel.getValue($index) }"></div>
        </div>
    </div>      
</script>

<script type="text/javascript">
    viewModel = {
        flips: ko.observableArray([]),      

        setClick: function (data, e) {
            e.preventDefault();
            //doing things
        },

        getValue: function (data, e) {
            return //get my value
        }        
    };    

ko.applyBindings(viewModel); 
```

那么如何在模型绑定中使用函数 viewModel.getValue 呢？有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:28:08.283

您可以按照您正在执行的方式调用返回字符串的函数，但您的格式略有不同。这里有一些提示：

*   您可以使用`style`绑定而不是`attr`绑定，因为它将添加/删除单个样式而不是替换整个样式属性（对于您的情况可能并不重要）。

*   在绑定字符串中，`background-position`是您为指定绑定而创建的对象文字中的无效属性名称。您需要使用`"background-position"`引号或可以在 JavaScript 中使用的名称`backgroundPosition`

*   您可能希望您的`getValue`函数返回完整的字符串，`15px 30px`或者在绑定中构建它，例如： `getValue($index) + ' ' + getValue($index)`

*   `$index`是一个可观察的，所以当你在你的函数中处理它时，你需要将它作为一个函数调用来获取它的值。

因此，您的绑定可能如下所示：

```
<i class="icon-blah" data-bind="style: { backgroundPosition: viewModel.getValue($index) + ' ' + viewModel.getValue($index) }"></i> 
```

示例：http: [//jsfiddle.net/rniemeyer/BAVZa/](http://jsfiddle.net/rniemeyer/BAVZa/)

# java - 在 Java 中拖放 JLabel

> ID：12151020
> 
> 赞同：2
> 
> 时间：2012-08-27T23:42:42.290
> 
> 标签：java, jpanel, jlabel

我正在尝试使用 JLabels 实现拖放类型的东西。基本上，一个 JPanel 使用位于屏幕周围指定框中的 JLabel 启动（所有 JLabels 和 Boxes 大小相同）。然后，我希望用户能够将 JLabel 拖入一个盒子并让它“卡入”盒子；这意味着，当他们的鼠标接近盒子时，程序知道将 JLabel 捕捉到该盒子中。

我可以通过鼠标侦听器和鼠标拖动来完成这项繁琐的工作并进行大量渲染（我已经开始这样做了，而且它不太漂亮）。但是我想知道网络上是否有任何人都知道的东西，或者 java 中内置的任何东西，这会对我有所帮助。

注意：这不是关于拖放的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:13:47.940

Drag'n'Drop 就是这样一个特殊的需求领域。

看看组件`TransferHandler`API的实现`Swing`。对于内置组件非常有效，需要一些工作才能在自定义组件中工作，但否则无法扩展（我正在查看您的自定义光标和拖动图形）。

问题是，任何工具包/API/框架都只能在其目标设计的约束下工作。

通过分离 DnD API 的各种元素、注册侦听器、事件处理等，您可以让生活“稍微”轻松一点，这样您就可以更好地专注于解决方案的需求，但目前，这大约是尽你所能。

例如，我编写的 API 可能无法满足您的需求，因为我编写的目的是解决我正在处理的一系列特定问题。

只是MHO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:03:58.323

查看拖放包：[http ://docs.oracle.com/javase/7/docs/api/java/awt/dnd/package-summary.html](http://docs.oracle.com/javase/7/docs/api/java/awt/dnd/package-summary.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T01:57:54.823

尝试搜索 java“snap-to-grid”示例，然后进行相应修改以配对 gui 组件？

# encryption - 如何在非 Windows 操作系统上检测位锁加密拇指驱动器？

> ID：12151021
> 
> 赞同：0
> 
> 时间：2012-08-27T23:42:45.660
> 
> 标签：encryption, filesystems

我有一个在 Win7 中被 Bitlock 加密的拇指驱动器。
当拇指驱动器插入非 Windows 机器（例如 Linux）时，磁盘似乎已满：没有可用空间。
有没有办法判断拇指驱动器或硬盘是否被 Bitlock 加密？

我的猜测是文件系统中有一个标头或标志，我们可以使用它检查存储介质是否已被 Bitlock 加密。

任何想法/指针将不胜感激。

亲切的问候，
贾斯汀

* * *

通过一些调查，我似乎明白了：Bitlock 通过将所有内容打包到几个数据文件中来加密磁盘，包括现有文件和磁盘的空白空间。它还将 autorun.inf 放到磁盘上，这将调用 BitLockerToGo.exe 提示用户输入密码/密钥。在那之后，我的猜测是 Bitlocker 会解密数据文件，以便我们可以正常访问它，但不确定。无论如何，一个不太好的解决方案是检查您是否可以在磁盘上找到autorun.inf、Bitlocker.exe 和其他相关文件，如果可以，您将能够判断该磁盘已被加密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:43:56.053

加密卷的想法是它们被整体加密并占用介质上的所有可用空间。此外，此类卷的可用空间量也是一个秘密，因此除非您可以解密该卷，否则您应该无法确定有关加密磁盘的*任何*信息，包括它被加密的事实。

# java - UTF-8 适用于 Eclipse，但无法使用导出的 jar

> ID：12151027
> 
> 赞同：5
> 
> 时间：2012-08-27T23:43:17.643
> 
> 标签：java, mysql, jdbc, utf-8, jar

我正在开发一个桌面应用程序，`Java` `Swing`并`MySQL`使用`UTF-8`.

当我从`Eclipse`一切正常运行应用程序时，但是当我完成并将我的工作导出到`runnable jar`using`Eclipse` `export`时，与数据库相关的任何内容都不起作用。

*   登录不起作用
*   当我尝试将日期保存到我的数据库中时，`Arabic`我进入`??????`了数据库

但是，正如我之前提到的，当我从`Eclipse`. 谁能帮帮我，我必须交付我的工作

这是我的工作样本：

这就是我连接数据库的方式：

```
static Connection conn = null;
static String url      = "jdbc:mysql://localhost:3306/";
static String dbName   = "gestiondestock";
static String driver   = "com.mysql.jdbc.Driver";
static String userName = "root"; 
static String password = "";
static String unicode= "?useUnicode=yes&characterEncoding=UTF-8"; 
```

这是代码`buttonLogin` `ActionPerformed`：

```
private void buttonLogin_ActionPerformed(ActionEvent e) {
    if(textField.getText().equals("") || passwordField.getText().equals(""))
    {
       jd =new JDialog();
        jd.applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        jd.setTitle("الرجاء ملء الفراغ");
        jd.setVisible(true);
        jd.setLocationRelativeTo(null);
        jd.setSize(400,200);
        jd.setContentPane(buildpp());   
    }
    else{
        if(textField.getText().equals("Adel91") || passwordField.getText().equals("Adel91"))
        {
            CardLayout cardLayout = (CardLayout) contentPane.getLayout();
            cardLayout.show(contentPane, "Panel_Home");
        }
        else{
            try{
                String usernamena = new String(textField.getText());
                String passwordlogin = new String(passwordField.getText());

                MessageDigest mdEnc4 = MessageDigest.getInstance("MD5");

                mdEnc4.update(passwordlogin.getBytes(), 0, passwordlogin.length());
                String passwordlogindmd5 = new BigInteger(1, mdEnc4.digest()).toString(16); // Encrypted 

                try{
                    Class.forName(driver).newInstance();
                    conn = DriverManager.getConnection(url+dbName+unicode,userName,password);
                    Statement st = conn.createStatement();

                    ResultSet res = st.executeQuery("SELECT username,password FROM client ");

                    String user = null;
                    String pass = null;

                    if(res.next()) {
                        user = new String( res.getBytes(1), "UTF-8");
                        pass =  new String( res.getBytes(2), "UTF-8");
                    }

                    if(usernamena.equals(user)&&passwordlogindmd5.equals(pass)){
                        CardLayout cardLayout = (CardLayout) contentPane.getLayout();
                        cardLayout.show(contentPane, "Panel_Home");
                    }
                    else{
                        jd =new JDialog();
                        jd.applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
                        jd.setTitle("كلمة المرور والإسم غير مناسبان");
                        jd.setVisible(true);
                        jd.setLocationRelativeTo(null);
                        jd.setSize(430,200);
                        jd.setContentPane(buildwronglogin());
                    }
                } catch (Exception ee) {
                    ee.printStackTrace();
                }
            } catch (NoSuchAlgorithmException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } 
        }
    }   
} 
```

使用此 cmd 生成 MySQL 变量：SHOW VARIABLES LIKE 'c%'; abd 每件事都是 uts8

![在此处输入图像描述](../Images/4165efaf8ffde3782e63e90284e1b433.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T01:19:56.227

首先，您永远不应该使用未指定的字符集将字符串转换为字节（这里您使用的是平台默认值，可能会更改）：

```
passwordlogin.getBytes() 
```

因为这是针对您要散列的字节，所以只要它是一致的，您使用的字符集并不重要。类似的东西`passwordlogin.getBytes("UTF-8")`似乎是合理的。

此外，这肯定是一段有问题的代码：

```
 if(res.next()) {
                    user = new String( res.getBytes(1), "UTF-8");
                    pass =  new String( res.getBytes(2), "UTF-8");
                } 
```

这似乎暗示您在某处有字符集故障。

最后，你是如何运行你的 jar 的？您是否在命令行上指定字符集（例如`java -Dfile.encoding="UTF-8" ...`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-20T10:13:48.220

启动它`java -Dfile.encoding="UTF-8" -jar JarFile.jar`

# perl - Perl 错误子字符串

> ID：12151039
> 
> 赞同：0
> 
> 时间：2012-08-27T23:44:34.953
> 
> 标签：perl, file, substr

在工作中，我们会收到一个大型文本文件，该文件的宽度由第三方分隔。我想使用 perl 脚本只获取我们关心的文件的片段，因为这些片段最终将被放入数据库中。我对perl很陌生，今天才开始。

提供给我们的文件包含客户信息，我需要选择其中的某些部分并最终将它们加载到数据库中，即名称、日期、信息。我正在尝试使用此脚本，但出现错误“在使用“严格引用”时无法使用字符串（第二个）作为符号引用”

如果我取消严格限制，我猜这不是一个好习惯，那么我会收到错误“print<> on unopened filehandle (Second)”

test.txt 的内容是“第一第二第三第四”，所以我看到 substr 得到了我想要的。我做错了什么，我是否朝着正确的方向前进？

```
use strict;
use warnings;

open FILE, "<", "test.txt" or die $!;

#get the contents of the file
#my @a_Lines = <FILE>;
my $entireFile = <FILE>;

#close it I don't need it any more
close FILE or die "Cannot close the file because - $!";

#print @a_Lines ;
print $entireFile;
print "\n";

my $firstName = substr $entireFile, 6, 6;
print $firstName

print "\n"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T23:49:50.603

你少了一个分号；改变这个：

```
print $firstName 
```

对此：

```
print $firstName; 
```

（错误消息如此奇怪的原因是，由于缺少分号，Perl 误解了您希望如何`$firstName`解释。它认为您希望将 的内容`$firstName`视为文件句柄的名称。）

# java - 动态创建对象时找不到类 - Java

> ID：12151041
> 
> 赞同：0
> 
> 时间：2012-08-27T23:44:39.863
> 
> 标签：java

我创建了一个`Java`程序，它读取文件，使用 Java 中的反射 API 确定要执行的操作（创建对象，调用类的方法）。例如：

```
2234:org.powertac.common.Rate::9::new
2234:org.powertac.common.Rate::9::withValue::-0.5 
```

如果我找到`new`关键字，那么我会尝试创建该类的新对象。否则，我将使用参数调用方法（在示例中为`withValue()`）`-0.5`。源代码如下图所示：

```
//
// program created a map between int and string
//
import java.util.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.io.*;
import java.lang.reflect.*;
import org.powertac.common.*;
import org.powertac.util.*;

public class Parser {

    private String filename;
    private Map< Integer, Object > map;
    //
    // just the default constructor is needed for now
    //
    public Parser(){
        this.map = new HashMap< Integer, Object >();
        this.filename = "/home/phillipe/powertac/powertac-server/" +
                        "server-distribution/log/powertac-boot.state";
    }
    //
    // override the default constructor
    //
    public Parser( String filename ){
        this.filename = filename;
    }

    public void parse() throws ClassNotFoundException{
        try{
            //
            // assure file exists before parsing
            //
            FileReader fr = new FileReader( this.filename );
            BufferedReader textReader = new BufferedReader( fr );
            String line;
            Integer id = 1;
            while(( line = textReader.readLine()) != null ){
                Pattern p = Pattern.compile("([^:]+):([^:]+)::([\\d]+)::([^:]+)::(.+)");
                Matcher m = p.matcher( line );
                if (m.find()) {
                  //String id = m.group(1);
                  String className = m.group(2);
                  int orderOfExecution = Integer.valueOf( m.group( 3 ));
                  String methodNameOrNew = m.group(4);
                  Object[] arguments = m.group(5).split("::");

                  if( methodNameOrNew.compareTo( "new" ) == 0 ){
                      System.out.println("Loading class: " + className);
                      Competition cc = null;

                      if( className.contains("Competition")){
                          this.map.put(id, cc);
                      }
                      else if( className.contains( "LocalBroker" )){
                          continue;
                      }
                      else {
                          Class<?> cl = Class.forName( className );
                          Constructor<?> cons = cl.getConstructor(String.class);
                          Object obj = cons.newInstance( arguments );
                          this.map.put( id , obj );
                      }

                  }
                  else{
                      Class<?> cl = Class.forName( className );
                      Method method = cl.getMethod( methodNameOrNew, String.class );
                      this.map.put(id, method);
                  }
                  id++;
                  System.out.printf("%s %s %d %s %d\n", id, className, orderOfExecution, methodNameOrNew, arguments.length);
                }
            }
            textReader.close();
        }
        catch( IOException ex ){
            ex.printStackTrace();
        }
        catch( ArrayIndexOutOfBoundsException ex){
            ex.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NoSuchMethodException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public void print(){
        Iterator<?> iterator = this.map.keySet().iterator();  

        while (iterator.hasNext()) {  
           String key = iterator.next().toString();  
           String value = this.map.get(key).toString();  

           System.out.println(key + " " + value);  
        }  
    }
    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Parser parse = new Parser();
        try {
            parse.parse();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.exit( 0 );

    }

} 
```

但是，我收到以下错误：

```
Loading class: org.powertac.common.Competition
2 org.powertac.common.Competition 0 new 1
Exception in thread "main" java.lang.NoClassDefFoundError: org/aspectj/lang/Signature
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at Parser.parse(Parser.java:71)
    at Parser.main(Parser.java:123)
Caused by: java.lang.ClassNotFoundException: org.aspectj.lang.Signature
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356) 
```

我加载了`.jar`包含类二进制文件的文件。这是我第一次做这种任务`Java`，所以我不是很熟悉....有人可以帮帮我吗？它是缺少图书馆还是类似的东西？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:53:33.577

您需要在类路径中为要调用的类以及这些类的所有依赖项设置所有库。因此，在这种情况下，似乎 org.powertac.common.Competition 依赖于 org.aspectj.lang.Signature。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T00:05:20.770

此类`org.aspectj.lang.Signature`是 Aspectj 运行时库的一部分。如果您使用的是 Maven，您可以添加：

```
<dependency>
    <groupId>aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>1.5.4</version>
</dependency> 
```

到您的 POM.xml 以检索丢失的 JAR 文件。

或直接：

[aspectjrt- 1.5.4.jar](http://mirrors.ibiblio.org/pub/mirrors/maven2/org/aspectj/aspectjrt/1.5.4/aspectjrt-1.5.4.jar)以及 [aspectjweaver-1.5.4.jar](http://mirrors.ibiblio.org/pub/mirrors/maven2/org/aspectj/aspectjweaver/1.5.4/aspectjweaver-1.5.4.jar)和[log4j](http://www.us.apache.org/dist/logging/log4j/1.2.17/log4j-1.2.17.zip)

# javascript - 在不同进程之间共享 Node.js 环境？

> ID：12151043
> 
> 赞同：2
> 
> 时间：2012-08-27T23:45:00.153
> 
> 标签：javascript, ruby-on-rails, node.js, unix, v8

与 ruby​​gem [Spork](https://github.com/sporkrb/spork)一样，你可以分叉一个节点进程并让它基本上是当前环境的完整克隆吗？

“完全克隆”是指这个克隆的/子环境/进程可以重用现有`require.cache`的 . 例如，`require('lib-a')`加载需要 2 秒。当你调用子进程时，你是如何做到`require('lib-a')`的，它是即时的（又名 using`require.cache`或类似的东西）？

一个用例是加快节点 express/connect HTTP 服务器的启动时间。在更复杂的应用程序中，您可能会`require`预先安装大量模块，有时需要一两秒钟才能完成`require`所有模块（不是在寻找有关如何延迟加载模块的信息，我也在进行优化，但它有其局限性）。

相关的 Spork 代码是这样的：

[https://github.com/sporkrb/spork/blob/master/lib/spork/forker.rb](https://github.com/sporkrb/spork/blob/master/lib/spork/forker.rb)

我不确定它到底对 and 之类的代码做了什么`Marshal.dump(yield, @child_io)`，`Marshal.load(@child_io)`但看起来它以某种方式将整个环境复制到子进程中。通过这样做，Spork 使您可以运行 1 个“主”Rails 服务器，并“分叉”它来运行测试，因此您不必等待（有时 10 秒）您的 Rails 服务器启动。你怎么能在节点中做到这一点？可能吗？

**更新**

这被认为是一个[unix套接字对](https://unix.stackexchange.com/questions/16300/whos-got-the-other-end-of-this-unix-socketpair)吗？这将有助于搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:06:46.907

节点进程旨在长期存在，所以我不认为启动时间是特别优先考虑的。这是节点哲学的核心。话虽如此，您可能想看看[集群模块](http://nodejs.org/api/cluster.html)。它允许您启动子工作进程。它主要是为多核场景下的负载均衡而设计的，但可能对你有一些帮助。

# html - 使内容（div/images）限制包含 div 的最小宽度

> ID：12151047
> 
> 赞同：1
> 
> 时间：2012-08-27T23:45:49.060
> 
> 标签：html, css

我有一个容器 div，它具有基于页面宽度的可变大小。这是我插入内容的地方，但有时我插入的 iframe 或图像在页面全宽时看起来不错，但如果浏览器缩小，内容要么溢出，要么被隐藏。后者是我可能要做的，但无论如何要告诉容器 div 不要变得小于所包含内容的宽度？

见：http: [//jsfiddle.net/K5RXR/](http://jsfiddle.net/K5RXR/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:51:04.923

你可以使用`min-width:500px;`

[有关最小宽度的](https://developer.mozilla.org/en-US/docs/CSS/min-width)更多信息

# c# - 如何使值在 Controller MVC3 中持续存在

> ID：12151049
> 
> 赞同：0
> 
> 时间：2012-08-27T23:45:59.650
> 
> 标签：c#, asp.net-mvc-3

我在控制器中有以下代码：

```
public ActionResult Index(string date)
        {
            var topsong = db.TopSongs;
            var topDate = db.TopDates;

            var latestDate = topDate.OrderByDescending(d => d.Date).FirstOrDefault();

           if (date == "PreviousDate")
            {
                latestDate = topDate.Where(d => d.Date < latestDate.Date).OrderByDescending(d => d.Date).FirstOrDefault();                
            }

            if (date == "NextDate")
            {
                latestDate = topDate.Where(d => d.Date > latestDate.Date).OrderBy(d => d.Date).FirstOrDefault();
            }           
.... 
return View();

} 
```

这是视图中的代码：

```
@Html.ActionLink("Previous Week's Songs", "Index", new { date = "PreviousDate" }) <br />
@Html.ActionLink("Next Week's Songs", "Index", new { date = "NextDate" }) 
```

如果用户单击 PreviousDate，它将被发送回控制器并选择上一个日期。第一次它工作正常。问题第二次出现。由于 latestDate 再次计算，但它基本上应该使用 PreviousDate 作为 latestDate 而不是再次计算 latestDate。有没有办法坚持 PreviousDate？还是从视图传回？

这是一个示例：如果 latestDate 是 08/27/2012 第一次加载，当我按 previousDate 时它会加载日期 08/25/2012 但是当我再次按 PreviousDate 而不是使用 08/25/2012 作为 latestDate 它再次使用 08 /27/2012 为最新日期。

TopDate 类：

```
public class Top10Date
    {
        [Key]
        public int DateId { get; set; }
        public DateTime Date { get; set; }        
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:49:04.117

你可能想做：

```
return View(latestDate); 
```

所以模型活页夹把它捡起来

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T00:03:42.963

您需要将显示的当前日期以及 PreviousDate 和 NextDate 的“子操作”传递回控制器。

在控制器中：

```
 public ActionResult Index(string date, DateTime? latestDate)
    {
        var topsong = db.TopSongs;
        var topDate = db.TopDates;

        if (!latestDate.HasValue)
            latestDate = (DateTime?)(topDate.OrderByDescending(d => d.Date).FirstOrDefault());

       if (date.Value == "PreviousDate")
        {
            latestDate = (DateTime?)(topDate.Where(d => d.Date < latestDate.Date).OrderByDescending(d => d.Date).FirstOrDefault());                
        }

        if (date.Value == "NextDate")
        {
            latestDate = (DateTime?)(topDate.Where(d => d.Date > latestDate.Date).OrderBy(d => d.Date).FirstOrDefault());
        }

        .... 

        ViewBag.latestDate = latestDate

        return View();
    } 
```

进而

```
@Html.ActionLink("Previous Week's Songs", "Index", new { date = "PreviousDate", ViewBag.latestDate }) <br />
@Html.ActionLink("Next Week's Songs", "Index", new { date = "NextDate", ViewBag.latestDate }) 
```

# jquery - 带有 MetroUI 主题和滚动区域的 JQuery

> ID：12151055
> 
> 赞同：1
> 
> 时间：2012-08-27T23:47:18.793
> 
> 标签：jquery, cordova, scroll, microsoft-metro, area

我正在玩 JQuery 和 PhoneGap，为我的 WP7.5 手机使用 MetroUI 主题。我注意到应用程序和设置栏在上下滑动时会随着内容滚动，然后在滚动停止后重新绘制。这使它像廉价的 Metro UI 仿制品一样脱颖而出……那么我该怎么做呢？基本上我想把屏幕分成 3 个区域，其中只有一个是可滚动的。

我玩弄了 CSS 文件并得到了一些工作，查看 [http://jsfiddle.net/mcsmarte/dNLA7/](http://jsfiddle.net/mcsmarte/dNLA7/) 但是在使用它时，我不想移动的区域被正确放置，但是整个屏幕仍然滚动。任何提示或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:44:01.253

就像将一个 div css 更改为这样：

```
.context{
    width:100%;
    height:350px;
    margin-top:40;
    margin-bottom:40;
    overflow: auto;
    } 
```

[http://jsfiddle.net/webwarrior/dNLA7/6/](http://jsfiddle.net/webwarrior/dNLA7/6/)

如果我理解正确...

# javascript - 如何在网页之间存储数据？

> ID：12151056
> 
> 赞同：2
> 
> 时间：2012-08-27T23:47:23.690
> 
> 标签：javascript, session, web-applications, session-state

如何使用 JS 在页面之间存储一些信息？

我的 webapp 使用 sql 查询来填充几个页面，这些查询通常返回相同的结果。有没有办法将此结果存储在 JS 变量中，并仅在某些事件中使用 sql 查询强制刷新？

这与 SQL 查询相比效率如何？与饼干相比？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T23:49:21.863

你可以试试[本地存储。](http://diveintohtml5.info/storage.html)

```
function supportsLocalStorage() {
  try {
    return 'localStorage' in window && window['localStorage'] !== null;
  } catch (e) {
    return false;
  }
}

function saveGameState() {
    if (!supportsLocalStorage()) { return false; }
    localStorage["halma.game.in.progress"] = gGameInProgress;
    for (var i = 0; i < kNumPieces; i++) {
    localStorage["halma.piece." + i + ".row"] = gPieces[i].row;
    localStorage["halma.piece." + i + ".column"] = gPieces[i].column;
    }
    localStorage["halma.selectedpiece"] = gSelectedPieceIndex;
    localStorage["halma.selectedpiecehasmoved"] = gSelectedPieceHasMoved;
    localStorage["halma.movecount"] = gMoveCount;
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:55:04.820

您还可以遵循[单页 Web 应用程序](http://en.wikipedia.org/wiki/Single-page_application)模式并使用 Ajax，查看[bone.js](http://backbonejs.org/)了解更多信息

如果您走得更远，您可以查找诸如[Meteor](http://meteor.com/)之类的框架，这些框架可以设置为仅在发生更改时才将更新推送到客户端（还有其他方法，但我喜欢流星的方式）

# c++-cli - 使用 C++/CLI 的看似不恰当的编译警告

> ID：12151060
> 
> 赞同：2
> 
> 时间：2012-08-27T23:47:42.583
> 
> 标签：c++-cli, command-line-interface

我正在玩一个与我的 Isis2 (C# .NET) 库对话的 C++/CLI 应用程序。在下面的代码中，我收到错误“警告 3 C4538：'cli::array ^'：不支持此类型的 const/volatile 限定符”。我突出显示了引发此问题的行。我很困惑：这没有数组，也没有使用 const 或 volatile！有什么建议么？

```
// CPlusPlus.cpp : main project file.

#include "stdafx.h"
#using <IsisLib.dll>
using namespace Isis;
using namespace System;

void GotNewView(View^ v)
{
   Console::WriteLine("Got a new view: " + v->ToString());
}

public delegate void GotAnInt_T (int i);
void GotAnInt(int i)
{
   Console::WriteLine("Got an int: {0}", i);
}

public delegate void GotTwo_T (String ^s, double d);
void GotTwo(String^ s, double d)
{
   Console::WriteLine("Got a string: <{0}> and a double: {1}", s, d);
}

public delegate void SendsReply_T(int i);
void SendsReply(int i)
{
   thisGroup()->Reply(-i);
}

int main(array<System::String ^> ^args)
{ 
   IsisSystem::Start();
   Group ^g = gcnew Group("test");       <============= THIS LINE
   g->RegisterViewHandler(gcnew ViewHandler(GotNewView));
   g->Handlers[0] += gcnew GotAnInt_T(GotAnInt);
   g->Handlers[0] += gcnew GotTwo_T(GotTwo);
   g->Handlers[1] += gcnew SendsReply_T(SendsReply);
   g->Join();
   g->Send((int^)0, 12345);
   g->Send((int^)0, "Aardvarks are animals", 78.91);
   Console::WriteLine("After Send, testing Query");
   Collections::Generic::List<int>^ results = gcnew Collections::Generic::List<int>();
   int nr = g->Query(Group::ALL, 1, 6543, gcnew EOLMarker(), results);
   IsisSystem::WaitForever();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:08:03.277

这是一个已知的编译器错误：它警告`Group`. 它不应该那样做。

推荐的解决方法是禁用警告：

```
#pragma warning (disable: 4538) 
```

可能只对有问题的代码行禁用警告，尽管我不是 100% 确定，因为 C++/CLI 代码中没有任何东西会导致这个问题。你可以试试：

```
#pragma warning (push)
#pragma warning (disable: 4538)
Group^ g = gcnew Group("test");
#pragma warning (pop) 
```

# php - 如何使用 Cake 的数据库会话处理跨两个域共享会话？

> ID：12151061
> 
> 赞同：0
> 
> 时间：2012-08-27T23:47:46.650
> 
> 标签：php, session, cakephp, cakephp-2.0, single-sign-on

我非常接近一个优雅的跨域会话共享解决方案（我很乐意将它发布到 CakePHP 社区），但我需要最后一次轻推才能完成它。

Cake 的本地 DB 支持的会话处理似乎相当缺乏，但我讨厌在它之上进行破解。它似乎不支持从服务器 A（存在于数据库中）传递活动会话 ID (sid)，然后在服务器 B 上使用该 ID（和完整的数据）启动一个新会话。

这是我得到的地方：

我设置 Security = Low，并测试单服务器登录等以确保会话正常运行。查看。

我成功地将 sid 字符串从服务器 A 传递到服务器 B。现在在服务器 B 上...

我运行 CakeSession::id($sid_from_server_a)。

我解析出会话数据库表中的数据字段，并通过 $this->Session->write('blah','value') 将它们存入活动会话。

我重新阅读了会议以确保它“接受”了。

但是当我导航到一个新页面时，活动 sid 只是快速回到一个完全不同的 sid，该 sid 与其他页面加载保持相同（即使我刷新从服务器 A 重新建立 sid 的页面）。

这是一个cookie问题吗？

我不确定要做什么，但绕过整个 Cake 范例。似乎 Cake 开发人员没有设计会话处理来帮助围绕多个域重新建立现有会话。我认为这是 DB 会话处理程序的主要优点之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:36:23.617

这听起来像是一个 cookie 问题，您需要一个 cookie 来存储您想要返回的会话信息。据我所知，没有其他方法可以回忆那种类型的会话信息。我不确定你的项目需要你保存什么，但是如果没有一些信息，服务器别无选择，只能在跨域时创建一个新会话。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:06:00.270

我在服务器 B 上要做的就是正确地重新初始化会话。很基本：

```
session_write_close(); // close any session that has already initialized
CakeSession::id($sid_from_server_a); // or: session_id($sid_from_server_a);
session_start(); 
```

在此之前我假设我需要的只是第二行，在 CakeSession 包装器中设置新的 sid 会提示会话开始。但它更类似于以旧的 PHP 方式运行 session_id($some_sid) ......您可以这样做以在实际启动之前设置会话。

一般来说，我有一些模糊的概念，即 CakePHP 会在我想要的时候自动启动会话，但真正扫描 CakeSession 类表明它并没有做太多事情——它是一个用于原生 PHP 会话处理的隐蔽方便的包装器。

我什至不必解析会话数据库表中的伪序列化会话数据和所有爵士乐——完全没有必要。上面的代码可以解决问题：跨域会话共享。

# javascript - Jasmine 与 Jasminerice：将错误输出到控制台

> ID：12151062
> 
> 赞同：0
> 
> 时间：2012-08-27T23:48:10.173
> 
> 标签：javascript, ruby-on-rails-3, backbone.js, coffeescript, jasmine

我正在使用 Jasmine 和[Jasminerice](https://github.com/bradphelan/jasminerice)测试我的 Backbone.js（在 Rails 3.2 上）应用程序。效果很好，但是任何 JS 错误都被困在 Jasmine 中并显示在 HTML 中。这有点不方便，因为我必须复制每个跟踪的行号，转到文件（使用 Chrome 开发人员工具），然后使用“转到行”工具到达该行。

有没有办法在控制台中输出 JS 错误，就像我正常运行应用程序一样？

感谢您的任何帮助。

编辑：

[在ConsoleReporter](https://github.com/pivotal/jasmine/blob/master/src/console/ConsoleReporter.js)中找到了解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:27:13.940

I have the same setup, and I use the [guard-jasmine](https://github.com/netzpirat/guard-jasmine) gem for getting output to the console. Works beautifully. I was initially hesitant because I associated guard with autotest-type functionality, but you can use it just to run all your js tests.

# r - R、htmlTreeParse 和 xpathSApply

> ID：12151072
> 
> 赞同：1
> 
> 时间：2012-08-27T23:49:32.013
> 
> 标签：r, html-parsing

我正在尝试解析 html 网站，但不知何故我的代码不起作用。

> testrun=htmlTreeParse("网站地址", useInternalNodes = T)

然后我得到...

<div class="md" > < p >我被误导了..< p > ...

我想抓住句子（我被误导了），所以我所做的是

> xpathSApply(testrun,""//div[@class = 'md']//p", xmlGetAttr, "href")

但这会吐出 NULL 值。谁能告诉我我什么时候做错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T20:12:46.600

使用`xmlValue`. `xmlGetAttr`调用`xmlAttrs`并用于返回节点的属性。

```
xpathSApply(testrun,"//div[@class = 'md']/p", xmlValue) 
```

# python - 如何将字典对象传递给 jinja2，其中 dict.keys 是标记，字典值是我想要显示的内容？

> ID：12151074
> 
> 赞同：1
> 
> 时间：2012-08-27T23:49:44.387
> 
> 标签：python, google-app-engine, jinja2

我是 GAE/Python 新手。我正在尝试呈现模板值位于字典对象中的 jinja2 模板。我想做这样的事情：

```
some markup {{ dict['token001'] }} some more markup {{ dict['token002'] }} etc. 
```

其中 token001 和 token002 是 Dictionary 中键的值。

我想这个电话看起来像：

```
template = jinja_environment.get_template(fileName.html)     
outputblob = template.render(dict) 
```

谁能告诉我如何做到这一点？我有超过一千个标记化文件，每个文件最多有几十个标记。数据库中有相同标记的多组值，逻辑提取一组标记和值并将它们放入字典中，这就是我想要传递给 jinja2 进行渲染的内容。

谁能告诉我如何将字典对象传递给 jinja2，其中字典键是模板标记？

感谢您提供任何解决方案的建议或指示。

+++++编辑的问题++++++ 我尝试了以下方法，它似乎正在发挥作用。

模板文件中的标记现在看起来像 {{tokenvals.tkn001}}

```
 tokenvals = q.fetch(999)
    tokendict = {}
    for tokenval in tokenvals:
        tokendict[tokenval.tknID] = tokenval.tknValue

    template = jinja_environment.get_template('khan-exercise.html')     
    bloboutput = template.render(tokenvals = tokendict) 
```

至少到目前为止我没有收到错误消息。但是，当我尝试将结果保存在以下代码中时，出现错误：

```
 f = GeneratedFiles(
        TemplateName = TemplateName
        , FileTxt = bloboutput
        , Status = 'Published'
        )
    f.put() 
```

这会导致错误 BadValueError: Expected str, got u'

数据模型为：

```
class GeneratedFiles(ndb.Model):
  TemplateName = ndb.StringProperty()
  FileTxt = ndb.BlobProperty()
  Status = ndb.StringProperty(default="Pending Translation") 
```

我注意到的一件事是，呈现的字符串在任何有回车的地方都包含 \n 。但是，整个呈现的文本是撇号之间的字符串（单引号 - '）。模板文件本身包含很多双引号 - ")。我认为这与它没有任何关系。

我经常看到错误消息：Expected str, got u' 后跟文本，但我从未弄清楚是什么原因造成的。

任何进一步的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T01:25:03.430

你也可以让我们知道什么不适合你。您是否按照您认为的那样尝试调用？什么破了？

我认为这应该工作..

```
some markup {{ tokens.token001 }} some more markup {{ tokens.token002 }} etc.

tokens = get_tokens_dict()
template = jinja_environment.get_template(fileName.html)     
outputblob = template.render(tokens=tokens) 
```

或者可能..

```
data = { 'tokens': tokens }
outputblob = template.render(**data) 
```

# dynamics-crm-2011 - CRM 2011 ONLINE - 克隆现有实例

> ID：12151078
> 
> 赞同：2
> 
> 时间：2012-08-27T23:49:56.473
> 
> 标签：dynamics-crm-2011, dynamics-crm-online

是否可以将现有的在线实例（数据+模式）克隆到新的在线实例中？客户希望保持这两个实例继续运行。

请记住，这是一个 CRM 2011 在线实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T01:56:55.760

移动架构很简单：从现有组织（实例）导出解决方案，然后将其导入新组织。在新组织中发布后，您的自定义实体、表单、视图等都将可见。（顺便说一句：这也是一种随时备份更改的好方法）

但是，数据不同：Microsoft 没有提供自动执行此操作的工具。

您*可能*可以直接从 Microsoft（或您的 Microsoft 合作伙伴）获得帮助，但我的直觉是他们不会急于帮助您。如果您没有大量数据，或者如果它很简单，内置的导出/导入工具可能会有所帮助，但您需要对导入排序保持聪明，以确保关系等保持不变。

# c#-4.0 - ParallelQuery.ForAll 方法中的增量 ID

> ID：12151088
> 
> 赞同：2
> 
> 时间：2012-08-27T23:51:03.707
> 
> 标签：c#-4.0, parallel-processing, forall

我有一个需要同时处理的文件列表。我尝试使用 ParallelQuery 类的 ForAll 扩展方法。我没有按顺序处理文件，所以我使用了 ForAll。

这是我的示例代码：

```
List<FileInfo> files = GetFilesToProcess();

files.AsParallel().ForAll(f => { // Process file here }); 
```

它工作得很好，但现在我需要为每个文件生成一个唯一的整数 ID，我不确定如何在不将 AsParallel.ForAll 更改为 ForEach 的情况下执行此操作。

我在某个地方读到了我需要作为联锁的地方，但仍然会有问题。

希望你能在这里给我一个想法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T00:12:26.737

您可以使用`Interlocked.Increment`生成ID，也可以直接使用索引：

```
List<FileInfo> files = GetFilesToProcess();

files.AsParallel().Select((f, i) => new {File=f, ID=i})
     .ForAll(fp => 
           {
              FileInfo file = fp.File;
              int id = fp.ID; // ID is the index in the list

              // Process file here
           }); 
```

如果你想使用`Interlocked.Increment`，你可以这样做：

```
List<FileInfo> files = GetFilesToProcess();
int globalId = -1;

files.AsParallel().ForAll(f => 
                         { 
                              // Process file here 
                              int id = Interlocked.Increment(ref globalId);
                              // use ID
                         }); 
```

话虽如此，如果您的整个目标是对集合进行“工作”，我建议将其编写为 Parallel.For 或 Parallel.ForEach 。这更清楚了，因为您没有使用 LINQ 样式语法来生成副作用：

```
List<FileInfo> files = GetFilesToProcess();
Parallel.For(0, files.Count, i =>
{
    var file = files[i];
    // Use i and file as needed
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:14:36.003

如果你真的必须，那么你可以`int`通过`Interlocked.Increment`.

使用源索引是一个更好的选择，因为这是分区器已经提供的信息，即使是`Interlocked`给定的光共享，仍然是共享的。

或者，您可以跳过它并使用某种 UUID。在这种情况下，这可能是值得的（获得索引既好又轻）。我之所以提到它，是因为“我可以在并行任务之间零共享的情况下做到这一点吗？” 应始终考虑，即使以后被解雇。

# php - php可以处理视频文件吗？如果不是，哪种语言最好？

> ID：12151093
> 
> 赞同：-2
> 
> 时间：2012-08-27T23:51:40.747
> 
> 标签：php, video

有没有像 php-plugin 这样的 Imagemagik 可以处理视频文件（特别是 flv）？我想做一些事情，比如保存、调整大小，并希望能合并视频。

如果 php 不是最实用的方法，那会是什么语言？它需要与网络兼容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T23:54:35.397

你看过[phpvideotoolkit](http://code.google.com/p/phpvideotoolkit/)吗？我相信这将是您正在寻找的。它不是插件，而是用于[FFmpeg](http://ffmpeg.org/)、[FLVTools2](http://www.inlet-media.de/flvtool2/)和[Mencoder](http://mplayerhq.hu)等视频编辑工具的 PHP Wrapper 。

编辑：根据上面的评论，这些工具主要是 C / C++，它比 PHP 快得多。phpvideotoolkit 包装器基本上会从您的 PHP 站点执行它们，这比手动使用 PHP 打开文件并解析所有二进制数据要快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:56:03.437

我过去使用`ffmpeg`过，通常我认为它也推荐用于任何视频处理。我不确定它在高级视频编辑方面能做多少，但它用于基本处理。

它是一个命令行程序，您通常通过`exec`.

据我所知，PHP 没有内置的视频功能，但它可以很容易地调用其他擅长于此的工具。

# c# - 需要 Grid Column 的大小达到 Width="Auto" 并停止

> ID：12151095
> 
> 赞同：1
> 
> 时间：2012-08-27T23:52:20.303
> 
> 标签：c#, wpf, xaml

我要做的是在布局网格中管理文本块和组合框。组合框需要调整大小以适合其选择（宽度=自动）。如有必要，文本块需要用椭圆修剪，或者当它没有被修剪时，列应该停止扩展超过文本块的宽度 - 而空白应该增长到组合的右侧。所以，我有点想在修剪文本块时寻找 Width="*" 和未修剪时 Width="Auto" 的混合。如果 MaxWidth 支持“自动”那就太好了。

我不想设置 textblock 列的特定 MaxWidth ，因为它会随着全球化值而改变。如果有一个仅限 xaml 的解决方案，我也更喜欢它，但如果没有，哦，好吧。此外，也许网格不是正确的容器。

这是一个例子。左列有 Width="*" 和 MaxWidth="150"。这可以正常工作，但是像这样指定 MaxWidth 不适用于文本块中的全球化文本。我需要一些更有活力的东西。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" MaxWidth="150"/>
        <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>
    <TextBlock HorizontalAlignment="Left" Text="Input control one" VerticalAlignment="Center" TextTrimming="CharacterEllipsis" Margin="2"/>
    <TextBlock HorizontalAlignment="Left" Text="Input control two" VerticalAlignment="Center" Grid.Row="1" TextTrimming="CharacterEllipsis" Margin="2"/>
    <TextBlock HorizontalAlignment="Left" Text="Input control number three" VerticalAlignment="Center" Grid.Row="2" TextTrimming="CharacterEllipsis" Margin="2"/>
    <ComboBox HorizontalAlignment="Left" d:LayoutOverrides="Height" VerticalAlignment="Center" Grid.Column="1" Margin="2">
        <ComboBoxItem Content="Item One" IsSelected="True"/>
    </ComboBox>
    <ComboBox HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Column="1" Grid.Row="1" Margin="2">
        <ComboBoxItem Content="Item One" />
        <ComboBoxItem Content="Item Number Two" IsSelected="True"/>
    </ComboBox>
</Grid> 
```

解决方案...

感谢 Leo 让我找到解决方案。我只需要弄清楚如何从附加属性计算 MaxWidth。关键是要获得列中所有元素的最大期望宽度。还需要使用无穷大重新测量元素以获得所需的完整宽度。否则，您可以获得修剪后的所需宽度。

```
 /// <summary>
    /// AutoMaxWidth Dependency Property allows a ColumnDefinition to automatically default
    /// it's MaxWidth to the correct width on the Load event of the ColumnDefinition. 
    /// </summary>
    public static readonly DependencyProperty AutoMaxWidthAttachedProperty =
            DependencyProperty.RegisterAttached ("AutoMaxWidth", 
                                                 typeof (bool), 
                                                 typeof (ColumnBehavior),
                                                 new UIPropertyMetadata (false, OnAutoMaxWidthAttachedPropertyChanged));

    /// <summary>
    /// Called when the AutoMaxWidth property has changed values
    /// </summary>
    /// <param name="o">The object this behavior is attached to.</param>
    /// <param name="e">The <see cref="System.Windows.DependencyPropertyChangedEventArgs"/> instance containing the event data.</param>
    static void OnAutoMaxWidthAttachedPropertyChanged (DependencyObject o, DependencyPropertyChangedEventArgs e)
    {
        ColumnDefinition col = (o as ColumnDefinition);
        if (col == null) return;

        if ((bool)e.NewValue)
            col.Loaded += col_Loaded;
        else
            col.Loaded -= col_Loaded;
    }

    static void col_Loaded (object sender, RoutedEventArgs e)
    {
        ColumnDefinition col = sender as ColumnDefinition;
        if (col == null) return;

        Grid g = col.Parent as Grid;
        if (g == null) return;

        int index = g.ColumnDefinitions.IndexOf (col);
        foreach (UIElement el in g.Children)
            if (Grid.GetColumn (el) == index)
            {
                el.Measure (new Size (Double.PositiveInfinity, el.DesiredSize.Height));
                if (col.MaxWidth == Double.PositiveInfinity)
                    col.MaxWidth = el.DesiredSize.Width;
                else
                    col.MaxWidth = Math.Max (col.MaxWidth, el.DesiredSize.Width);
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:52:07.340

您要么要**显式**设置 ColumnDefinition 的 MaxWidth，要么要**创建**自己的逻辑以在 TextBox/ComboBox 宽度更新时设置 MaxWidth。您可以使用附加属性来实现这一点，并将其附加到 Grid.ColumnDefinitions。WPF 功能强大，只要你知道如何使用它，你就可以为所欲为。

如果您不介意，您能否提供一个您现在拥有的示例代码。

# ruby-on-rails - 在我的 Rails 商店中，我如何发送订单确认电子邮件以及一封给自己的电子邮件

> ID：12151101
> 
> 赞同：0
> 
> 时间：2012-08-27T23:53:59.330
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我买了一家 Rails 商店（我正在慢慢学习），当有人下订单时，我知道他们会收到一封电子邮件，因为`order_mailer.rb`文件中有以下代码：

```
class OrderMailer < ActionMailer::Base
  default from: 'xxxxx@xxxxxxxxx.com'

  def receipt(order)
    @order = order
    mail(to: order.user.email, subject: 'Your Order with Flagstuff.com')
  end
end 
```

有没有一种简单的方法可以将自己添加为这封电子邮件的抄送人，以便我知道订单何时收到？

据我所知，鉴于我对 Rails 的了解非常有限，当有人下订单时会`orders_controllers.rb`调用。`order_mailer.rb`如果我可以找到该代码并插入另一个`admin_email.rb`看起来几乎相同但使用我的电子邮件地址而不是 .rb 文件 () `order.user.email`，我认为这可能会起作用。

我正在寻找一个简单的答案和学习经验 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:06:36.497

作为大卫的回答，如果您将默认行更改为以下内容，您还可以将自己添加为密件抄送：

```
default from: 'xxxxx@xxxxxxxxx.com', 
        bcc: 'receiving_address@xxxxxxxx.com' 
```

查看文档以获取更多示例：[http ://api.rubyonrails.org/classes/ActionMailer/Base.html](http://api.rubyonrails.org/classes/ActionMailer/Base.html)

此外，这个 railscast 可能很有趣：[http ://railscasts.com/episodes/206-action-mailer-in-rails-3](http://railscasts.com/episodes/206-action-mailer-in-rails-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:01:53.050

改变

```
mail(to: order.user.email, subject: 'Your Order with Flagstuff.com') 
```

对此：

```
mail(to: order.user.email, bcc: "you@example.com", subject: 'Your Order with Flagstuff.com') 
```

# language-agnostic - 根据每行中的条件信息将数据框中的字符替换为数字

> ID：12151103
> 
> 赞同：1
> 
> 时间：2012-08-27T23:54:02.710
> 
> 标签：language-agnostic

对于以下数据，我想使用等位基因变量重新编码其余数据，如下所示：如果特定行的变量等位基因中的第一个字母以 A 开头，则仅将该行的所有 A 替换为 1。如果该行在特定行的可变等位基因中以 G 开头，则仅将该行的所有 G 替换为 1。如果在特定行的变量等位基因中以 C 开头的行以 T 开头，则仅将该行的所有 T 替换为 1 。然后将 H 替换为 0 （在所有数据帧中），其余字母（ AGCT ）用 -1 替换所有数据帧。

```
 alleles x1  x2  x3  x4
1   A/G G   G   G   G
2   A/G G   G   G   G
3   A/C C   N   N   C
4   C/T T   N   N   T
5   C/G N   C   C   H
6   C/G C   N   N   C
7   C/T C   C   T   C
8   A/G G   G   A   G
9   A/G N   N   A   A
10  A/G G   G   N   G
11  C/T N   C   C   C
12  A/G N   A   A   A 
```

# android - Android模拟器无法在Linux中运行

> ID：12151105
> 
> 赞同：2
> 
> 时间：2012-08-27T23:54:25.350
> 
> 标签：android, eclipse, android-emulator

一段时间以来，我一直在我的 gentoo amd64 linux 上开发一个 android 游戏，并成功地使用带有 android 设备的 eclipse IDE。但是，我需要用不同的屏幕尺寸测试我的游戏，以确保它仍能正确显示。结果，我决定尝试模拟器。

在我设置一个并在终端中键入 ./emulator -avd SamsungGalaxy 后，什么也没有发生，它就退出了。adb logcat 只是继续记录-等待设备-。

这是我尝试过的。

等待 - 我知道模拟器可能需要相当长的时间才能启动。

重新安装 ADT 和 Android SDK

重启日食

重新启动我的机器

在谷歌和这个网站上进行了大量搜索之后，我现在仍然很难过。非常感谢任何想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:01:09.067

尝试杀死正在运行 adb 的进程，然后重新启动 Eclipse 并创建一个新的 avd 可能会有所帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:00:42.750

尝试将这些选项添加到命令行

```
-no-audio                   disable audio support
-gpu off                    disable hardware OpenGLES emulation mode 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T03:06:07.263

Android SDK 是 32 位的，因此在 64 位 Linux 系统上，您需要安装包 ia32-libs。对于 Ubuntu，您可以通过以下命令执行此操作。

```
apt-get install ia32-libs 
```

从[一篇文章中得到](http://www.vogella.com/articles/Android/article.html#installation_linux64)

# sql-server - TSQL - 从自身更新表

> ID：12151107
> 
> 赞同：8
> 
> 时间：2012-08-27T23:54:46.543
> 
> 标签：sql-server, tsql

表**项**（4 列，为清楚起见进行了简化）

```
记录 | 项目 | 价格 | 区
```

**数据**

```
1 | 100 | 10.00 | 一种
2 | 100 | 空 | 乙
3 | 100 | 空 | C
4 | 200 | 25.00 | 一种
5 | 200 | 空 | 乙
```

尝试使用基于`NULL`的非 s 中的相应值来更新 s 。因此，所有项目 100 的读数均为 10.00，两个项目 200 的读数均为 25.00。`NULL``Item`

我觉得这应该非常容易，但无法弄清楚自我参考。

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-28T00:01:59.830

给你

```
UPDATE a
SET a.Price=b.Price
FROM  Item AS a
INNER JOIN Item AS b
ON a.item=b.item
WHERE a.Price is NULL AND b.price is NOT NULL 
```

或者如果有多个非空价格并且您想选择最高价格。

```
 UPDATE a
 SET a.Price=(SELECT MAX(b.PRICE) FROM ITEM AS b WHERE b.Item=a.Item and b.Price is not null )
 FROM  Item AS a
 WHERE a.Price is NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:09:13.750

如果您对一个项目有多个价格，则需要选择一个。`item`此示例选择最小的一个（列名与表名相同，这有点令人困惑）：

```
UPDATE item i
  SET price = (SELECT MIN(price)
                FROM item
                WHERE item = i.item
                GROUP BY item) 
```

# compare - EMFCompare 结果为 XML

> ID：12151116
> 
> 赞同：0
> 
> 时间：2012-08-27T23:55:52.607
> 
> 标签：compare, eclipse-emf, eclipse-emf-ecore

[EMFCompare](http://www.eclipse.org/emf/compare/)中是否有一个预先构建的方法可以输出 XML 中两个模型之间的差异？

如果没有，最好的地方在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:57:33.413

[您可以使用EMFCompare](http://www.eclipse.org/emf/compare/)视图右上角的“导出 DiffModel”按钮将 diff 导出为 XML 格式。

# javascript - 用 JSON 序列化图论树的解决方法？

> ID：12151118
> 
> 赞同：2
> 
> 时间：2012-08-27T23:56:05.797
> 
> 标签：javascript, json

我有一个节点数组。每个节点都有一个子节点数组和一个指向其父节点的指针。我想使用 JSON.stringify 对其进行序列化，但是对于父指针，我显然最终会得到循环引用，并且 JSON 会引发异常。我可以做些什么来解决循环引用并使用 JSON 进行序列化？

相关问题：[Chrome sendrequest 错误：TypeError: Converting circular structure to JSON](https://stackoverflow.com/questions/4816099/chrome-sendrequest-error-typeerror-converting-circular-structure-to-json)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:11:47.007

您应该在具有父对象的对象中创建自定义的 toJson 函数。

从[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

> 如果要字符串化的对象具有名为 toJSON 的属性，其值为函数，则 toJSON 方法自定义 JSON 字符串化行为

```
var x = {
  foo: 'foo',
  toJSON: function () {
    return 'bar';
  }
};
var json = JSON.stringify({x: x}); 
```

因此，您可以在具有父引用的对象中创建该函数，可能是这样的？

```
MyObj = function(){
    this.xxx = 'foobar';
    this.zzz = 'foooobar';
    this.name = 'foo';
    this.parent = ...;
    toJSON = function(){
        tmp = '{'
        for(prop in MyObj){
            if(prop == 'parent'){
                tmp += 'parent: "'+ this['parent'].name +'"'; //maybe?? optional!
            }else{
                tmp += prop + ':' + this[prop].stringify + ','; //you will still use the browser function
            }
            tmp += '}            
        }
        return tmp;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:42:10.660

试一试——使用信息和演示数据在底部：

```
// class
var Decircularizer = function() {};
// class contents
Decircularizer.prototype = {
    curId: 0x01,
    idField: '{`id´}',
    _getNewId: function() {
        return this.curId++;
    },
    _getVisited: function(obj) {
        return obj[''+this.idField];
    },
    _setVisited: function(obj) {
        return (obj[''+this.idField] = this._getNewId());
    },
    _removeVisited: function(obj){
        delete obj['' + this.idField];
    },
    decycle: function(obj, depth) {
        var $this = this;
        depth = depth || 0;
        var key = this._getVisited(obj);
        if (key > 0x00) return this.idField + key;

        if(!jQuery.isPlainObject(obj))
            return obj;

        key = this._setVisited(obj);
        jQuery.each(obj, function(prop, val){
            if (prop == $this.idField) return;
            if (jQuery.isFunction(obj[prop])) delete obj[prop];
            else obj[prop] = $this.decycle(val, depth + 1);
        });
        return obj;
    },
    recycle: function(obj){
        var $this = this;
        var ids = {};
        this._searchIds(obj, ids);
        return this._recycle(obj, ids);
    },
    _recycle: function(obj, ids){
        var $this = this;
        if(!jQuery.isPlainObject(obj))
            return obj;
        jQuery.each(obj, function(prop, val){
            var xval = ids[val];
            if(xval)
                obj[prop] = xval;
            else
                obj[prop] = $this._recycle(val, ids);
        });
        return obj;
    },
    _searchIds: function(obj, ids){
        var $this = this
        var ids = ids || {};
        var key = this._getVisited(obj);

        if(key > 0x00) {
            ids[this.idField + key] = obj;
            $this._removeVisited(obj);
        }

        if(!jQuery.isPlainObject(obj))
            return ids;

        jQuery.each(obj, function(prop, val){
            $this._searchIds(val, ids);
        });
        return ids;
    }
};

// EXAMPLE DATA
var a = {};
var a2 = {}
a.b = a;
a.c = "hallo";
a.e = 123;
a.f = a2;
a2.x = a;

// USAGE
// new class
var ser = new Decircularizer();

// uncycle
var cleanObjectWithOutCirculars = ser.decycle(a);
console.debug(cleanObjectWithOutCirculars);

/* object looks like
Object {c: "hallo", e: 123, b: "{`id´}1", {`id´}: 1, f: Object}
    b: "{`id´}1"
    c: "hallo"
    e: 123
    f: Object
        x: "{`id´}1"
        {`id´}: 2
        __proto__: Object
    {`id´}: 1
    __proto__: Object 
*/

// recycle 
var aNew = ser.recycle(cleanObjectWithOutCirculars);
console.debug(aNew)

/*
Object {c: "hallo", e: 123, b: Object, f: Object}
    b: Object
        b: Object
        c: "hallo"
        e: 123
    f: Object
        x: Object
        __proto__: Object
    __proto__: Object
    c: "hallo"
    e: 123
    f: Object
        x: Object
            b: Object
            c: "hallo"
            e: 123
            f: Object
            __proto__: Object
        __proto__: Object
    __proto__: Object
*/

// correct (Y) 
```

# javascript - 尝试在自身之前插入元素的结果

> ID：12151121
> 
> 赞同：4
> 
> 时间：2012-08-27T23:56:58.567
> 
> 标签：javascript, jquery, dom

当我有 HTML 时：

```
<div>
    <p id="first">First paragraph!</p>
    <p id="second">Second paragraph!</p>
</div> 
```

我运行脚本：

```
var second = $('#second');
$('#second').insertBefore(second); 
```

结果是：

```
<div>
    <p id="first">First paragraph!</p>
</div> 
```

我知道代码是荒谬的，但我正在编写代码，其中我插入的项目可能等于我之前插入的项目。

有人可以帮我理解为什么我得到上述结果吗？怎么了`#second`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T00:00:14.407

根据[W3C DOM 3 规范](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-952280727)：

> 注意：在自身之前插入一个节点是依赖于实现的。

插入节点时，如果它已经在 DOM 中，则首先将其删除。因此，您尝试将其插入到不再位于 DOM 中的节点（本身）之前。您应该测试两个节点是否相同，如果它们相同，则不要进行插入。

### 编辑

执行上述操作的普通 js 函数是：

```
function doInsert(insertNode, beforeNode) {
  if (insertNode != beforeNode) {
    beforeNode.parentNode.insertBefore(insertNode, beforeNode);
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T00:01:25.790

虽然规范不清楚*应该*发生什么，但我的猜测是：

1.  `#second`首先从 DOM 中删除，以便可以将其插入其他地方。
2.  现在我们尝试在之前插入它`#second`，但是，由于`#second`它不再在 DOM 中，所以它无处可去。

# security - 没有客户端以纯文本形式存储密码的基本身份验证 API？

> ID：12151122
> 
> 赞同：2
> 
> 时间：2012-08-27T23:56:58.773
> 
> 标签：security, api, http, authentication, basic-authentication

我想构建一个使用 HTTP Basic Auth 的 API，但要做到这一点，我需要客户端以纯文本形式存储用户的密码，然后将其与每个请求一起发送。我真的不想这样做。

我不能为此 API 使用 OAuth，或者让客户注册他们的应用程序以使用 API。

关于授权的替代方法有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:35:17.333

你的威胁模型是什么？换句话说，您试图解决的风险是什么？如果您担心以明文形式发送凭证，您可以将 SSL 与 HTTP Basic Auth 结合使用。此外，您可以查看 -

1) 使用摘要认证

2）SSL客户端证书身份验证（这可能不起作用，因为您说您无法注册应用程序ID ..并且要使证书身份验证起作用，您至少需要要进行身份验证的证书的公钥

3）如果是内部应用，可以使用kerberos（Windows）认证

# c - 与 clang 链接时出错

> ID：12151124
> 
> 赞同：3
> 
> 时间：2012-08-27T23:57:06.267
> 
> 标签：c, linker, clang, linker-errors

我觉得我在这里遗漏了一些非常简单的东西。我想玩一下 clang，所以作为起点，我[在 3:40 左右遵循了这个视频](http://devimages.apple.com/llvm/videos/Libclang.mov)中的代码示例。代码如下：

```
#include "clang-c/Index.h" // Note: These two lines were 
#include <stdio.h>         // omitted from the video slides
int main(int argc, char *argv[])
{
    CXIndex Index = clang_createIndex(0, 0);
    CXTranslationUnit TU = clang_parseTranslationUnit(Index, 0, argv, argc, 0, 0, CXTranslationUnit_None);
    for (unsigned I = 0, N = clang_getNumDiagnostics(TU); I != N; ++I)
    {
        CXDiagnostic Diag = clang_getDiagnostic(TU, I);
        CXString String = clang_formatDiagnostic(Diag, clang_defaultDiagnosticDisplayOptions());
        fprintf(stderr, "%s\n", clang_getCString(String));
        clang_disposeString(String);
    }
    clang_disposeTranslationUnit(TU);
    clang_disposeIndex(Index);
    return 0;
} 
```

在视频中，他没有说他省略了这两个`#include`指令。我认为我在上面的示例中正确填写了这些内容。他还省略了文件的编译和链接方式，这是我遇到问题的部分。按照[此处](http://clang.llvm.org/get_started.html)的说明，我检查并编译了 clang 和 llvm。这些文件被签出`~/src/llvm`然后编译`~/src/build`（就像说明所说的那样），现在我正在尝试在`~/src/test`. 下面是我如何调用 gcc 和输出。

```
gcc -I../llvm/tools/clang/include/ -L../build/Debug+Asserts/lib/ -lclang main.cpp -o test
/tmp/ccrpABsq.o: In function `main':
main.cpp:(.text+0x24): undefined reference to `clang_createIndex'
main.cpp:(.text+0x5f): undefined reference to `clang_parseTranslationUnit'
main.cpp:(.text+0x74): undefined reference to `clang_getNumDiagnostics'
main.cpp:(.text+0x8b): undefined reference to `clang_getDiagnostic'
main.cpp:(.text+0x93): undefined reference to `clang_defaultDiagnosticDisplayOptions'
main.cpp:(.text+0xab): undefined reference to `clang_formatDiagnostic'
main.cpp:(.text+0xc0): undefined reference to `clang_getCString'
main.cpp:(.text+0xed): undefined reference to `clang_disposeString'
main.cpp:(.text+0x10d): undefined reference to `clang_disposeTranslationUnit'
main.cpp:(.text+0x118): undefined reference to `clang_disposeIndex'
collect2: ld returned 1 exit status
make: *** [all] Error 1 
```

我查了一下，那个目录`~/build/Debut+Asserts/lib`里有`libclang.a`and `libclang.so`。我不确定我做错了什么。我试过谷歌搜索，但没有找到任何提示或关于我应该链接什么的说明。无论如何，我尝试了一些不同的东西，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T00:01:38.317

放在`-lclang`后面`main.cpp`。参数的顺序对 很重要`gcc`，因为它按顺序解析静态库中的符号。另请参阅[为什么链接库的顺序有时会导致 GCC 中的错误？](https://stackoverflow.com/questions/45135/linker-order-gcc).

# android - 创建 Android 平板电脑应用程序的最佳 ide 是什么？

> ID：12151126
> 
> 赞同：1
> 
> 时间：2012-08-27T23:57:27.950
> 
> 标签：android

> **可能重复：**
> [开发 Android 应用程序的最佳 IDE 是什么？](https://stackoverflow.com/questions/1715697/what-is-the-best-ide-to-develop-android-apps-in)

我需要在 android 中创建一个应用程序，将我的客户端连接到它的桌面数据库。

他使用 Xoom 平板电脑，它的大屏幕应该完全用于显示有关他的客户和他的日常出席日程的信息。

可视化创建此应用程序的最佳 IDE 是什么？

*我不想全部用记事本！*

# c++ - 类内部和外部的静态关键字

> ID：12151127
> 
> 赞同：6
> 
> 时间：2012-08-27T23:57:48.270
> 
> 标签：c++, static

static关键字一般与内部链接有关，但是类内部使用的static关键字有外部链接对吗？下面的变量 m、n 可以在类文件之外访问。

```
class c {
    int i;
    int j;
    static int m;
    static int n;

    public:
    void zap();
    static void clear();
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T00:09:21.083

正确的。

该关键字`static`严重超载，具有太多不同的含义：

*   在命名空间范围内的变量或函数上，它给出了名称内部链接。
*   在类成员上，它使其成为静态成员，这不会影响链接。
*   在函数范围内的变量上，它为变量提供“静态存储持续时间”，而不是“自动”或“动态”存储持续时间（即变量的生命周期延伸到程序的末尾，就像全局变量一样。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T00:14:23.003

正如我在[评论](https://stackoverflow.com/questions/12151127/static-keyword-inside-a-class-and-outside-it/12151153#comment16258104_12151127)中所说，`static`成员是仅与*类*相关联的成员，而不是与单个对象相关联的成员。

> `static`成员属于*该类*；对于变量，它们可以在没有对象的情况下访问并在实例之间共享，例如
> 
> ```
> struct Foo {
>   static void *bar;
>   static void *fu();
> } 
> ```
> 
> 所以`Foo::bar`并且`Foo::fu`是合法的。

它们在 C++03 标准的 §9.4 中介绍；

> 1.  类的数据或函数成员可以`static`在类定义中声明，在这种情况下，它是类的*静态成员*。
>     
>     
> 2.  *可以使用qualified-id*表达式来引用类的`static`成员；不必使用类成员访问语法 (5.2.5) 来引用成员。可以使用类成员访问语法来引用成员，在这种情况下，*对象表达式*被评估`s``X`*`X::s``static``static`*
>     
>      **```
>     class process {
>     public:
>         static void reschedule();
>     };
>     process& g();
>     
>     void f()
>     {
>         process::reschedule(); // OK: no object necessary
>         g().reschedule(); // g() is called
>     } 
>     ```
>     
>     
>     
>     成员可以在`static`其类的范围内或在从其类派生的类的范围内（第 10 条）直接引用；在这种情况下，`static`成员被引用就好像使用了*限定 ID*表达式，限定 ID 的*嵌套**名称说明符*命名了引用该成员的类范围。*`static`*
>     
>      *```
>     int g();
>     struct X {
>         static int g();
>     };
>     struct Y : X {
>         static int i;
>     };
>     int Y::i = g(); // equivalent to Y::g(); 
>     ```
>     
>     
>     
>     ...***

 **** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T00:02:35.187

您可以说静态成员是类的成员，而不是任何特定的对象实例。也就是说，它们对于所有对象实例具有相同的值。

静态成员函数虽然没有值，但在其他方面是相同的。它们不是对每个对象实例都是唯一的，而是可以看作是类的一部分。这意味着它们没有`this`指针并且不能访问非静态成员变量。***

# freebase - Freebase 共同类型搜索超时

> ID：12151129
> 
> 赞同：1
> 
> 时间：2012-08-27T23:58:04.153
> 
> 标签：freebase, mql, disjoint-sets

我正在尝试查找 freebase co-types，也就是说，给定一个您找到“兼容”类型的类型：

假设以 /people/person 开头，可能是音乐家 (/music/group_member)，但不是音乐专辑 (/music/album)，我不知道在 freebase 中是否有类似 owl 'disjointWith' 的东西类型，无论如何在他们建议使用[这个](http://wiki.freebase.com/wiki/MQL_Cookbook#Find_distinct_co-types)技巧的 MQL 食谱中。

示例中的查询获取给定类型的所有实例，然后获取所有实例的所有类型并让它们唯一......这很聪明，但是查询超时......还有其他方法吗？对我来说，即使是静态列表/结果也可以，我不需要实时查询……我认为结果是一样的……

编辑： [不兼容的类型](http://www.freebase.com/view/dataworld/incompatible_types)类型似乎很有用，类似于 disjointWith，也可以与建议一起使用...

谢谢！卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:51:47.917

Freebase 在图或模式级别没有 disjointWith 的概念。您发现的不兼容类型基础是手动策划的版本，可能会在未来版本的 UI 中使用，但现在不是。

如果您想找到所有共同类型，因为它们现在存在于图表中，您可以使用您提到的查询来做到这一点，但您最好使用数据转储。我还考虑建立一个频率阈值来消除低频共同类型，以便您过滤掉错误和其他噪音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:17:28.107

正如 Tom 所提到的，您可能需要考虑一些阈值来过滤掉用户在 Freebase 中创建的一些不太显着或实验性的类型。

为了让您了解数据的样子，我对 /people/person 的所有共同类型运行了查询。

1.  /common/topic (100.00%)
2.  /书/作者 (23.88%)
3.  /people/deated_person (18.68%)
4.  /sports/pro_athlete (12.49%)
5.  /电影/演员 (9.72%)
6.  /音乐/艺术家 (7.60%)
7.  /音乐/group_member (4.98%)
8.  /soccer/football_player (4.53%)
9.  /政府/政客 (3.92%)
10.  /olympics/olympic_athlete (2.91%)

[在此处](https://docs.google.com/spreadsheet/ccc?key=0ApV_3YYf9JnIdDFMeFVFTUlGd1V1WXczZk5hUVpGZkE)查看完整列表。

您还可以使用我构建的[这个应用程序](http://co-types.freebaseapps.com/?types=/people/person%20/government/politician)来试验 Freebase Co-Types （尽管它很容易出现与您遇到的相同的超时）。

# maps - 检索国家/地区的地方 lang/lat 列表

> ID：12151137
> 
> 赞同：0
> 
> 时间：2012-08-27T23:58:59.393
> 
> 标签：maps, gis

我想从谷歌地图等地图服务中检索包含医院名称、长/纬度的列表。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:11:33.610

The google geocode API is the way to do this:

```
https://developers.google.com/maps/documentation/geocoding/ 
```

to get a list i.e. for all hospitals in Oregon, USA you can use the following request:

```
http://maps.googleapis.com/maps/api/geocode/json?address=hospital,oregon,usa&sensor=false 
```

This results in a long response with all information about a dozen hospitals.

There a various ways to modify the results.

# string - 是否有不添加引号的多态`toString` 函数？

> ID：12151139
> 
> 赞同：8
> 
> 时间：2012-08-27T23:59:18.860
> 
> 标签：string, haskell, polymorphism

在我熟悉的大多数 OO 语言中，`toString`a 的方法`String`实际上只是恒等函数。但是在 Haskell 中`show`添加了双引号。

所以如果我写一个像这样的函数

```
f :: Show a => [a] -> String
f = concat . map show 
```

它对数字按预期工作

```
f [0,1,2,3]  -- "0123" 
```

但是字符串以额外的引号结尾

```
f ["one", "two", "three"] -- "\"one\"\"two\"\"three\"" 
```

当我真的想要`"onetwothree"`。

如果我想`f`多态地编写，有没有办法只用一个`Show`约束来完成它，而不用覆盖 String 的 Show 实例（如果这甚至可能的话）。

我能想到的最好的方法是创建自己的类型类：

```
class (Show a) => ToString a where
   toString = show 
```

并为所有内容添加一个实例？

```
instance ToString String where toString = id
instance ToString Char where toString = pure
instance ToString Int
instance ToString Maybe
...etc 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T02:39:05.690

我认为你的问题的根本原因`show`是不是真的`renderToText`。它应该生成可以粘贴到 Haskell 代码中以获得相同值的文本，或者使用`read`.

为此目的，`show "foo" = "foo"`将不起作用，因为`show "1" = "1"`and`show 1 = "1"`会丢失信息。

您希望能够应用 to `"foo"`get`"foo"`和 to `1`to get`"1"`的操作不是`show`. `show`只是不是 Java 风格的`toString`。

当我以前需要这个时，我确实创建了自己的新类型类并创建了一堆它的实例，然后使用它而不是`Show`. 大多数实例都是用 实现的`show`，但`String`不是我想要自定义的唯一一个，因此单独的类型类并没有完全浪费。在实践中，我发现我实际上需要实例的类型很少，而且当我遇到编译错误时添加它们非常简单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T00:45:18.003

该类[`Pretty`](http://hackage.haskell.org/packages/archive/wl-pprint/1.1/doc/html/Text-PrettyPrint-Leijen.html#g:10)及其对应的类型[`Doc`](http://hackage.haskell.org/packages/archive/wl-pprint/1.1/doc/html/Text-PrettyPrint-Leijen.html#t:Doc)具有 Show 所需的行为。但是，您的链接显示了不同的用例；也许您可以编辑问题？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T00:21:44.187

你可以这样做：

```
{-# LANGUAGE FlexibleInstances, UndecidableInstances, OverlappingInstances #-}

class Show a => ToString a where 
    toString :: a -> String

instance Show a => ToString a where 
    toString = show

instance ToString String where 
    toString = id

Prelude> toString "hello"
"hello"
Prelude> toString 3
"3" 
```

请注意，这可能是一个糟糕的主意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T00:31:52.687

您可以`newtype`使用`OverloadedStrings`：

```
{-# LANGUAGE OverloadedStrings #-}

import           Data.ByteString.Char8      (ByteString)
import qualified Data.ByteString.Char8 as B

newtype LiteralString = LS ByteString
instance IsString LiteralString where fromString  = LS . B.pack
instance Show     LiteralString where show (LS x) = B.unpack x
instance Read     LiteralString where readsPrec p s = map (\(!s, !r) -> (LS s,r)) $! readsPrec p s

hello :: LiteralString
hello = "hello world"

main :: IO ()
main = putStrLn . show $! hello 
```

* * *

输出：

```
hello world 
```

* * *

正常情况下的双引号在较大表达式的上下文中读回显示的字符串时实际上很有用，因为它们清楚地将显示的字符串值与其他显示类型的值分开：

```
x :: (ByteString, Int)
x =     read . show $!  ("go", 10)
--  string value starts --^^-- ends

y :: (LiteralString, Int)
y =     read . show $!  ("go", 10) 
-- string value starts --^       ^ consumes all characters; read fails 
```

# scala - 识别模式匹配器中的错误

> ID：12151140
> 
> 赞同：-1
> 
> 时间：2012-08-27T23:59:43.253
> 
> 标签：scala, pattern-matching

我刚刚遇到另一个模式匹配错误。

谷歌找到了很多。并且这个 google 请求应该首先在任何 akka 文档中链接，以向用户提供有关 scala 中基于消息的编程困难的公平信息。

有些错误已解决，有些则没有。它们是通用的，不同的代码可以应用于一个错误。

我有一件在 2.9.2 中仍然停止工作，我想知道错误状态。所以我需要熟悉 scala 错误数据库的人的帮助，他们可以指出与我的代码对应的错误。

示例代码：

```
object Test {
  sealed trait Pattern[T] {
    val data : T
  }
  object Pattern {
    def apply[T](data : T) : Pattern[T] = Primary(data)
    def apply[T](data : T, f : Float) : Pattern[T] = Full(data,f)
    def unapply[T](pat : Pattern[T]) : Option[T] = Some(pat.data)
  }
  final case class Primary[T](data : T) extends Pattern[T]
  final case class Full[T](data : T, f: Float) extends Pattern[T]

  val recognize1 : PartialFunction[Pattern[Any],Unit] = {
    case pat@Pattern(d) => println("pattern recognized: " + pat)
    case _ => println("simple failed")
  }
  val recognize2 : PartialFunction[Pattern[Any],Unit] = {
    case pat@Full(x : Int, f) => println("full@Int detected: " + pat)
    case pat@Pattern(c : Float) => println("pat@Float detected: " + pat)
    case _ => println("full-pattern detection failed")
  }
  val recognize3 : PartialFunction[Pattern[Any],Unit] = {
    case pat@Pattern(x : Int) => println("pat@Int detected: " + pat)
    case pat@Pattern(c : Float) => println("pat@Float detected: " + pat)
    case _ => println("pattern-pattern detection failed")
  }
  val recognize4 : PartialFunction[Pattern[Any],Unit] = {
    case pat@Full(x : Int, f) => println("full@Int detected: " + pat)
    case pat@Full(c : Float, f) => println("full@Float detected: " + pat)
    case _ => println("full-full detection failed")
  }
  val allRecognize : List[PartialFunction[Pattern[Any],Unit]] =
    List( recognize1, recognize2, recognize3, recognize4)

  val tests : List[Any] = List(3) ++ List(5.0f)

  def testAll() = for (t <- tests) {
    println("test: " + t)
    val primary = Pattern(t)
    for (r <- allRecognize) r(primary)
    val full = Pattern(t,1.0f)
    for (r <- allRecognize) r(full)
    println("")
  }
} 
```

和相应的输出：

```
scala> Test.testAll()
test: 3
pattern recognized: Primary(3)
full-pattern detection failed
pat@Int detected: Primary(3)
full-full detection failed
pattern recognized: Full(3,1.0)
full@Int detected: Full(3,1.0)
pat@Int detected: Full(3,1.0)
full@Int detected: Full(3,1.0)

test: 5.0
pattern recognized: Primary(5.0)
pat@Float detected: Primary(5.0)
pat@Float detected: Primary(5.0)
full-full detection failed
pattern recognized: Full(5.0,1.0)
full-pattern detection failed
pat@Float detected: Full(5.0,1.0)
full@Float detected: Full(5.0,1.0) 
```

测试 Int 效果很好，因为首先匹配 Int。

匹配浮点数会出现问题。当我对 Int 和 Float（模式或完整）使用相同的提取器时，一切正常。但是当我混合提取器并尝试将 Int 与 Full 提取并尝试 Float 与 Pattern 时，一切都出错了。

主要问题：它是什么错误（你真的应该知道 scala 内部来解决它）？

较小的问题：对此最优雅的解决方法是什么？

模式特征被写成 (U,Option[V])

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:59:16.413

在 Scala-2.10.0-M6 上，您的代码会打印以下内容：

```
scala> testAll()
test: 3
pattern recognized: Primary(3)
full-pattern detection failed
pat@Int detected: Primary(3)
full-full detection failed
pattern recognized: Full(3,1.0)
full@Int detected: Full(3,1.0)
pat@Int detected: Full(3,1.0)
full@Int detected: Full(3,1.0)

test: 5.0
pattern recognized: Primary(5.0)
pat@Float detected: Primary(5.0)
pat@Float detected: Primary(5.0)
full-full detection failed
pattern recognized: Full(5.0,1.0)
pat@Float detected: Full(5.0,1.0)
pat@Float detected: Full(5.0,1.0)
full@Float detected: Full(5.0,1.0) 
```

`Full(5.0f, 1.0f)`现在匹配`Pattern(c: Float)`，其他测试似乎可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:41:33.123

现在在模式匹配器上搜索错误是非常没用的，除非你在 2.10.x 或 master 上测试你的代码。有两个原因：

*   模式匹配器中有很多错误，要找到正确的错误非常困难。
*   2.10.x 上的代码是全新的，所以旧模式匹配器上的错误与新模式匹配器无关（它修复了大部分，如果不是全部的话）。

# ruby-on-rails - Rails 在虚拟属性上形成错误消息

> ID：12151145
> 
> 赞同：2
> 
> 时间：2012-08-28T00:00:52.753
> 
> 标签：ruby-on-rails

我的`car`模型`belongs_to :policy`。

但是，我没有`policy`直接设置：我通过一个名为`new_policy`. 所以在我的表格中，我有：

```
= f.simple_fields_for :new_policy, @new_policy do |policy_form|
    = policy_form.error_notification 
```

但是`error_notification`对于表单的该部分不起作用，并且内联错误不会出现，即使`@new_policy`数据在提交尝试失败后仍然存在。（虽然`car`模型会`error_notification`提醒用户存在错误，但不会显示错误。）有没有办法让`error_notification`助手使用`@new_policy`对象？如何让错误内联显示？

另外，我的`car`模型没有，`accepts_nested_attributes_for :policy`因为我`policy`通过虚拟属性设置。当一切都正确填写时，一切都按预期工作。

# ios - 如果页面滚动，则放大 Google 地图 api 在移动 Safari（iOS）中损坏

> ID：12151155
> 
> 赞同：0
> 
> 时间：2012-08-28T00:02:38.667
> 
> 标签：ios, google-maps-api-3, mobile-safari

在 iOS 的移动 safari 中使用谷歌地图 API V3 时，如果页面没有滚动到最顶部，则缩放缩放会被破坏。

我已经在装有 iOS 5.1.1 和最新稳定 API V 3.9 的 iPad 2 上对此进行了测试。

页面缩放已被禁用`<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no" />`

有没有人解决这个问题？

使用 iFrame*不是*解决方案。它会破坏与地图进行大量交互的整个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:37:19.030

看起来这是谷歌地图 API 3.9 中的一个错误。谷歌将在 3.10 中解决这个问题，正如变更日志所揭示的那样： [http ://code.google.com/p/gmaps-api-issues/wiki/JavascriptMapsAPIv3Changelog](http://code.google.com/p/gmaps-api-issues/wiki/JavascriptMapsAPIv3Changelog)

不幸的是，V3.10 仍然是“实验性的”。

编辑：它现在也已在 3.9 中修复。

# php - base64_decode 添加奇怪的字符

> ID：12151156
> 
> 赞同：1
> 
> 时间：2012-08-28T00:03:01.733
> 
> 标签：php, base64, decode, encode

我正在使用 base64_encode 用于返回 URL 字符串，但是当我到达页面对其进行解码（使用 base64_decode）时，它会将其添加到字符串的末尾：

-zh��

这是对字符串进行编码的代码：

```
$sess_refer = 'http://www.mysite.com/create-report.html?view=report&layout=reports&data=selection'

<input type="text" name="referrer" id="referrer" value="<?php echo base64_encode($sess_refer); ?>" /> 
```

这是解码字符串的代码：

```
$referrer = JRequest::getVar('referrer');
$sess_refer = base64_decode($referrer); 
```

哪个输出：

```
http://www.mysite.com/create-report.html?view=report&layout=reports&data=selection-zh�� 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:13:50.720

这对于评论来说有点太长了，但如果它没有帮助，我会删除这个答案。

您可以`base64_encode()`通过应用以下技巧使数据网络安全。没有它，`+`就会变成一个空格，并且可能会弄乱编码。

```
strtr(base64_encode($s), '+/', '-_'); 
```

解码：

```
base64_decode(strtr($s, '-_', '+/')); 
```

**更新**

此外，它`HTTP_REFERER`是由浏览器发送的，因此它应该被视为用户输入，因此应该在您之前将`base64_encode()`其作为有效的 URL 进行清理。

# java - 如何将 JLabel 添加到 JEditorPane？

> ID：12151158
> 
> 赞同：5
> 
> 时间：2012-08-28T00:03:13.497
> 
> 标签：java, swing, layout, jlabel, jeditorpane

我正在尝试在 Swing 中扩展 StyledEditorKit 以便能够在编辑器中包含 JLabel。我能够做到这一点，这就是我到目前为止所得到的。在下图中，突出显示的文本*按钮*是 JLabel 类型，而其余文本是普通文本。

![在此处输入图像描述](../Images/bb35219bb0db0968d35c19383d4cdd6b.png)

如您所见，标签呈现的内容比普通文本略低。如何将其顶部与剩余文本的顶部对齐？

以下是用于创建此标签元素的视图代码：

```
class ComponentView(Element elem) {
      @Override
      protected Component createComponent() {
        JLabel lbl = new JLabel("");
        lbl.setOpaque(true);
        lbl.setBackground(Color.red);
        try {
               int start = getElement().getStartOffset();
               int end = getElement().getEndOffset();
               String text = getElement().getDocument().getText(start, end - start);
               lbl.setText(text);
         } catch (BadLocationException e) {}
         return lbl;
       }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T02:59:04.007

尝试按照[ComponentView](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/ComponentView.html)`Component.getAlignmentY`中的建议调整控制组件相对于文本基线的定位。

您也可以尝试使用`JTextPane`它为嵌入式组件提供更简单的支持。可以使用[insertComponent()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextPane.html#insertComponent%28java.awt.Component%29)方法添加组件。这是一个例子，它也演示`setAlignmentY`：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;

public class TextPaneDemo {
    private static void createAndShowGUI() {
        final JTextPane pane = new JTextPane();
        pane.setText("Some text");

        JButton buttonButton = new JButton("Insert label");
        buttonButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                JLabel label = new JLabel("label");
                label.setAlignmentY(0.85f);
                pane.insertComponent(label);
            }
        });

        JPanel panel = new JPanel(new BorderLayout());
        panel.add(buttonButton, BorderLayout.SOUTH);
        panel.add(pane, BorderLayout.CENTER);

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(panel);
        frame.setSize(400, 200);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# php - PHP 和 XML 有什么关系？

> ID：12151161
> 
> 赞同：1
> 
> 时间：2012-08-28T00:03:46.617
> 
> 标签：php, xml

我正在学习 PHP 和网络编码。
具体来说，我正在使用的涵盖 PHP 5.3 的 PHP 书（由 Matt Doyle 撰写并由 Wrox 出版）说：

> XML ... 允许您创建可以以结构化方式保存数据的文本文档...
> XML 并不是真正的语言，而是创建您自己的标记语言的规范...

维基百科谈到 XML：

> 截至 2009 年，已经开发了数百种基于 XML 的语言，[8] 包括 RSS、Atom、SOAP 和 XHTML。基于 XML 的格式已成为许多办公生产力工具的默认格式，包括 Microsoft Office (Office Open XML)、OpenOffice.org 和 LibreOffice (OpenDocument)，以及 Apple 的 iWork。 [9] XML 也被用作 XMPP 等通信协议的基础语言。

听起来 XML 更像是一种协议，一种允许计算机通信和共享信息的标准。

所以 XML 就像我可以用来创建标记语言的语法，但我创建的语言只是格式化数据？

我需要帮助定义 PHP 和 XML 之间的关系。在 PHP 和 HTML 的处理过程中，XML 何时被解析？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T00:05:25.697

XML 不是语法（这完全是另一回事）。XML（顾名思义）是一种标记语言，它本质上定义了一组描述某事物的规则。“某物”可以是协议、文档结构或任何类型的数据。XML 被设计为机器可读和人类可读（尽管在我看来，对前者有偏见；））。

XML 文档使用一种称为模式的东西来描述 XML 本身的结构，因此您可以根据模式验证 XML 文档以确保其格式正确。

PHP 和 XML 之间没有关系。XML 是 PHP 可以使用和生成的东西。在处理过程中，PHP 不会使用或生成 XML，除非您明确告诉 PHP 这样做。

XML is sometimes used as sort a of "glue" that allows dissimilar or disparate systems to communicate with each other, but even that is just one of its functions. For example, PHP can consume XML produced by a program written in another language entirely, or XML produced by some website. PHP can also produce XML which can then be consumed by a program written in another language, or by some other source. As you found from the Wikipedia article, SOAP uses XML and this allows clients written in different languages to consume data exposed by a SOAP service.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:09:47.427

XML gives a starting point for a lot of technologies, particularly web technologies.

While PHP can be used for other things, its origins are in the web and it is still most heavily used there. As such, it would be sorely lacking if it couldn't deal with such a core web technology as XML. Likewise, it has support for other key web technologies like URIs, and those heavily used with the web like streams and database connections.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T00:10:43.993

XML is only a data format specification. It was once very hipped but has somewhat faded in favor of JSON - it is still VERY popular because there are many protocols using it as the data interchange format.

PHP is generic enough (as a programming language) to generate XML as well as any other data format.

Since XML is such an important data format, every respectable programming language is expected to easily consume XML as well, and PHP is no exception.

# java - 在Eclipse中处理一个插件的弹窗

> ID：12151164
> 
> 赞同：0
> 
> 时间：2012-08-28T00:04:03.137
> 
> 标签：java, eclipse-plugin, popup

我在 Eclipse 中使用插件。这个插件为 Eclipse 菜单提供了一个特性（当我右键单击时）。我想捕获用户选择的值。由于这个添加的功能不是由我的项目添加的，而是由插件添加的，Java 中是否有这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:08:57.223

您可以使用 eclispe 中的调试器功能..设置切换点并在调试器模式下运行应用程序..这样您可以跟踪每个语句执行后传入的值..

检查此图像 [Eclipse 调试器 http://s19.postimage.org/6x3yy8a43/eclipseimage.png](http://s19.postimage.org/6x3yy8a43/eclipseimage.png)

蓝点表示切换断点。使用鼠标左键单击将其放置在您喜欢的语句上...并在调试器模式下运行项目，请参见图像顶部。

按 F6 在调试器模式下执行下一条语句

希望这可以帮助

干杯

# ios - 本地化 3rd 方框架，UIView 等

> ID：12151166
> 
> 赞同：0
> 
> 时间：2012-08-28T00:04:28.677
> 
> 标签：ios, localization, nsbundle

如何为 3rd 方框架进行本地化，特别是自定义`UIView's`.
为项目进行本地化非常简单，您只需要添加 Localization.strings，但是如何`UIView`在单独的文件中进行自定义本地化。当您将自定义添加`UIView`到项目时，您无需复制/粘贴本地化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:41:01.063

[为您自己的框架或自定义 UI 进行本地化的最佳方式](http://www.cocoanetics.com/2012/05/resource-bundles/)

[http://www.galloway.me.uk/tutorials/ios-library-with-resources/](http://www.galloway.me.uk/tutorials/ios-library-with-resources/)

# c - ANSI-C 不知道 inline 关键字吗？

> ID：12151168
> 
> 赞同：15
> 
> 时间：2012-08-28T00:04:45.810
> 
> 标签：c, inline, c89

当编译一些简单的东西时

```
inline int test() { return 3; }

int main()
{
 test();
 return 0;
} 
```

，`gcc -c test.c`一切顺利。如果`-ansi`添加了关键字, `gcc -ansi -c test.c`, 则会收到错误消息

```
test.c:1:8: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘int’ 
```

即使明确选择了 C99 标准也是如此，`gcc -std=c99 -ansi -c test.c`.

这是什么原因，是否有推荐的修复方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T00:07:54.163

你需要使用：

```
gcc -std=c99 -c test.c 
```

该[`-ansi`标志指定 c90](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options)：

> -ansi 选项等效于 -std=c90。

ANSI C 实际上是 C 的 1990 版本，它不包含`inline`关键字。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-28T00:07:37.723

不，ANSI C 没有`inline`.

您的第二个命令实际上覆盖`-std=c99`（`-ansi`它们都影响`-std=`），因此您实际上是使用 ANSI C（非 C99）进行编译。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-28T00:09:14.807

> inline 关键字不是原始 ANSI C 标准 (C89) 的一部分，因此默认情况下库不导出任何内联函数定义。内联函数是在较新的 C99 标准中正式引入的，但长期以来大多数 C89 编译器也将内联作为扩展包含在内。

引用自[Gnu 网站](http://www.gnu.org/software/gsl/manual/html_node/Inline-functions.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-28T15:51:28.543

完全没有 ansi 选项它工作正常的原因是因为 gcc 默认为 '-std=gnu90'，这是 ANSI/C89 加上扩展（其中之一，毫不奇怪，是对内联函数的支持）。如果您只想要 ANSI C 支持，则不需要任何选项，除非您想要严格遵守标准（如果您的代码要在其他编译器上编译，这显然可能很有用）。

# javascript - html5视频将黑框（空）绘制到画布

> ID：12151169
> 
> 赞同：1
> 
> 时间：2012-08-28T00:04:54.417
> 
> 标签：javascript, html, html5-video

我正在动态加载第一帧小视频元素并将其绘制到更大的画布上。（当您将鼠标悬停时它会播放它们）它通常可以工作（90％的时间），但有时一个或其他视频会随机绘制一个黑框，表示从视频中采样的图像数据是空的。

我这样做是`canplaythrough`在每个视频上使用事件来确定视频是否已准备好进行采样，但我想知道是否应该使用更好的事件？

例如：

```
myvid.addEventListener("canplaythrough",function()
        {
            //do the sampling now
        }); 
```

但上面偶尔，看似随意地画了一个空白？

有任何想法吗？我也试过：`onloadeddata`但`canplay`这些更不可靠

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:35:42.330

我觉得空白帧的原因是，即使是一秒钟的视频也包含很多帧。所以它之间可能包含一个空白帧。我觉得事件canplaythrough是合适的。您可以修改采样逻辑。

```
 myvid.addEventListener("canplaythrough",function()
        {
           //check the intensity of some pixels of sample if they are blank. If blank then raise canplaythrough event
//else do the sampling now
        }); 
```

# java - Java - 与服务器的程序同步

> ID：12151171
> 
> 赞同：2
> 
> 时间：2012-08-28T00:05:12.140
> 
> 标签：java, synchronization, client-server

在学习 Java 时，我遇到了很多关于如何以“最佳方式”进行编程的问题。一个例子是聊天程序。

当 a 更改其状态、显示名称、显示图片或个人消息时，它会向服务器发送请求，服务器将所有服务器数据保存在内存中。我的问题是：避免数据库 I/O 并将所有内容同步到内存中是否是一种好习惯。因此，如果用户更改了他们的显示名称，我应该更新服务器内存中的用户状态并在数据库中更新它吗？还是等到用户断开连接，然后将他们的信息写入数据库？

我希望我很清楚。这适用于所有不同类型的程序，同步设置等。

我问这个是因为如果服务器崩溃，那么内存中的所有数据都不会保存在数据库中，并且用户信息将被回滚。

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:15:13.267

对于这个问题，没有单一的“最佳实践”。充其量，可能有一些“最佳实践”涵盖了各种更具体的用例。正如对 OP 的评论中已经指出的那样，出现了各种问题，例如：

*   数据修改频率
*   应用速度要求
*   有效内存
*   数据大小
*   陈旧数据的可接受性
*   丢失数据的可接受性

在你开始回答这些问题之前，没有人可以开始给出具体的建议。

# javascript - Chrome 扩展创建新标签循环

> ID：12151172
> 
> 赞同：2
> 
> 时间：2012-08-28T00:05:16.997
> 
> 标签：javascript, google-chrome, google-chrome-extension

我制作了一个 Chrome 扩展程序，它遍历 URL 并打开新标签（大约 12 个）。这不是通过 Web 商店分发的，只有少数用户需要此特定功能。最近，它已停止打开所有选项卡，仅打开 3 或 4 个（这似乎不一致 - 有时会打开 3 个，有时会打开 4 个）。相关代码如下：

```
for (key in mySites.open){
    if (motorclearSites.open[key]==false){
        chrome.tabs.create({'url': mySites.loginPages[key]});
    } else {
        chrome.tabs.update(mySites.open[key], {url: mySites.loginPages[key]});
    }
} 
```

作为解释，mySites.open[key] 是布尔值并告诉我该选项卡是否已经打开（例如 mySites.open['google'] = false）。如果不是，那我打开它。如果是，那么我更新它。mySites.loginPages[key] 是我希望在新标签页中打开的页面的 URL（例如 mySites.loginPages['google'] = 'http://www.google.com'）；

无论如何，如果我删除 chrome.tabs.create 并只给它一个 console.log，它会一直循环并显示我想要打开的所有 URL。但是，如果我按原样运行它，它会通过前三个或前四个，并且不会打开任何其他选项卡。

关于我可以做些什么来解决这个问题的任何想法？

# c++ - C++ AES 加密类

> ID：12151178
> 
> 赞同：17
> 
> 时间：2012-08-28T00:05:40.230
> 
> 标签：c++, encryption, cryptography, aes

我的 C++ 项目需要 AES 加密。但是我没有时间研究更流行和更复杂的 C++ 密码库。你知道任何现成的、实现 AES(Rijndael) 的开源 C++ 类吗？

提供类似的东西

```
void makekey(....);
string encrypt(string data); //takes plain text, returns encrypted text
string decrypt(string data); //takes encrypted text, returns plain text 
```

我已经看到了 AES 的[这种](http://www.codeproject.com/Articles/1380/A-C-Implementation-of-the-Rijndael-Encryption-Decr)实现，并且正在尝试根据我的需要对其进行调整，但我不想重新发明轮子（而且我遇到了问题）。所以如果你知道这样的课程，请告诉我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-28T00:09:09.680

我推荐[Crypto++](http://www.cryptopp.com/)，一个非常容易使用的 C++ 库。它适用于不同的操作系统，如 Windows 和 Linux。不要重新发明轮子！

使用示例可以在[这里](http://www.cryptopp.com/wiki/Advanced_Encryption_Standard)找到。

# knockout.js - 淘汰 observableArray push - 不推送到数组

> ID：12151179
> 
> 赞同：3
> 
> 时间：2012-08-28T00:05:42.230
> 
> 标签：knockout.js, observable, ko.observablearray

尝试玩 Knockout，但我在推送到可观察数组时遇到问题。我下面的代码通过单击按钮从服务器获取一些 json 数据，它返回一个对象数组。第一个 console.log 控制台很好，我的对象数组很好而且花花公子。

但是，我似乎无法将每个对象都推送到我的可观察数组上。控制台向我显示空数组。我已经尝试了几种变体，但感觉我只是错过了一些简单的东西，但我很难找到它。

我想要做的是从服务器加载一些数据，把它放在一个可观察的数组中，我可以绑定到模板并执行类似 foreach 的操作来输出数组的内容。

```
$(function() {
    $('#load').click(function() {
        $.getJSON('/PreferredDrugList/service/preferredDrugs/y', function(data) {
            $(data.preferredDrugs).each(function(index, obj) {
                console.log(obj);
                $('#result').append('<p>' + (++index) + ') ' + obj.drugName + ' : ' + obj.dosageFormDesc + '</p>');

                myViewModel.drugList.push(obj);
                console.log(myViewModel.drugList);
            });
        });//end getJSON
    });//end load

});//end ondomready

var myViewModel = {
    drugList: ko.observableArray()  //list of drug names
};

ko.applyBindings(myViewModel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:21:18.443

看看以下内容：http: [//jsfiddle.net/qszZD/](http://jsfiddle.net/qszZD/)

你在上面的评论中提到你需要让你的 foreach 工作。希望这对您来说是一个好的开始。我正在使用一些东西，你可能想也可能不想照顾：

[淘汰赛JS.mapping](http://knockoutjs.com/documentation/plugins-mapping.html "Knockout.js 映射")

我使用可选的 mappingOptions 根据映射库返回的数据定义计算的 observables。通过使用 KO 映射，避免需要手动将元素推送到可观察数组中，映射库将自动为您处理，并且还使您能够通过提供映射选项来创建额外的计算字段来进一步扩展模型。

如果您有任何问题，请告诉我。

# python - 成员函数的 Python @precondition / @postcondition - 如何？

> ID：12151182
> 
> 赞同：6
> 
> 时间：2012-08-28T00:06:29.340
> 
> 标签：python, decorator

我正在尝试对类的成员函数返回的值使用 @postcondition 装饰器，如下所示：

```
def out_gt0(retval, inval):
    assert retval > 0, "Return value < 0"

class foo(object):
    def __init__(self, w, h):
        self.width = w
        self.height = h
    @postcondition(out_gt0)
    def bar(self):
        return -1 
```

当我尝试调用成员函数“bar”（并因此引发@postcondition 提供警告）时，我得到了这个：

```
>>> f = foo(2,3)
>>> f.bar()
Traceback (most recent call last):
  File "<pyshell#22>", line 1, in <module>
    f.bar()
  File "<pyshell#8>", line 106, in __call__
    result = self._func(*args, **kwargs)
TypeError: bar() takes exactly 1 argument (0 given)
>>> 
```

我对@postcondition 的定义是在这里看到的[http://wiki.python.org/moin/PythonDecoratorLibrary#Pre-.2FPost-Conditions](http://wiki.python.org/moin/PythonDecoratorLibrary#Pre-.2FPost-Conditions)。

我认为出现错误是因为 @postcondition 的基础函数不希望处理成员函数（当然我见过的所有示例都只是使用普通的旧函数）但我不确定如何修复它所以我可以这样做吗？

将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T01:07:21.343

你不需要做任何特别的事情：

```
import functools

def condition(pre_condition=None, post_condition=None):
    def decorator(func):
        @functools.wraps(func) # presever name, docstring, etc
        def wrapper(*args, **kwargs): #NOTE: no self
            if pre_condition is not None:
               assert pre_condition(*args, **kwargs)
            retval = func(*args, **kwargs) # call original function or method
            if post_condition is not None:
               assert post_condition(retval)
            return retval
        return wrapper
    return decorator

def pre_condition(check):
    return condition(pre_condition=check)

def post_condition(check):
    return condition(post_condition=check) 
```

用法：

```
@pre_condition(lambda arg: arg > 0)
def function(arg): # ordinary function
    pass

class C(object):
    @post_condition(lambda ret: ret > 0)
    def method_fail(self):
        return 0
    @post_condition(lambda ret: ret > 0)
    def method_success(self):
        return 1 
```

测试：

```
function(1)
try: function(0)
except AssertionError: pass
else: assert 0, "never happens"

c = C()
c.method_success()
try: c.method_fail()
except AssertionError: pass
else: assert 0, "never happens" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:38:13.043

下面的例子有效：

```
def out_gt0(retval):
    assert retval > 0, "Return value < 0"

def mypostfunc(callback):
    def mydecorator(func):
        def retFunc(self, *args, **kwargs):
            retval = func(self, *args, **kwargs)
            callback(retval)
            return retval
        return retFunc
    return mydecorator

class foo(object):
    def __init__(self, w, h):
        self.width = w
        self.height = h
    @mypostfunc(out_gt0)
    def bar1(self):
        return -1
    @mypostfunc(out_gt0)
    def bar2(self):
        return 1

f=foo(1,2)
print "bar2:", f.bar2()
print "bar1:", f.bar1() 
```

输出是：

```
bar2: 1
bar1:
Traceback (most recent call last):
  File "s.py", line 27, in <module>
    print "bar1:", f.bar1()
  File "s.py", line 9, in retFunc
    callback(retval)
  File "s.py", line 3, in out_gt0
    assert retval > 0, "Return value < 0"
AssertionError: Return value < 0 
```

# android - 如何使用 weightSum 垂直和水平缩放（我的不起作用）android

> ID：12151188
> 
> 赞同：0
> 
> 时间：2012-08-28T00:07:24.360
> 
> 标签：android, android-linearlayout

所以我有一堆图像（ImageViews），我试图根据用户的设备适当地缩放。

我已经使用 weightSum 成功地对它们进行了水平缩放（4 个图像根据用户的屏幕得到同样的缩放）。

我现在正在尝试垂直缩放每一列，以便在此示例中占据屏幕的 50%，但我没有任何运气。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ScrollView 
    android:layout_width="fill_parent"
    android:layout_height="500dp"
    android:scrollbars="none"
    >
    <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" 
            android:weightSum="2"
    > 

        <!--  -->
        <!--  -->
        <!-- A new column -->
        <!--  -->
        <!--  -->
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:orientation="horizontal" 
            android:weightSum="4"
            >  
            <ImageView 
                android:layout_width="0dp"
                android:layout_height="90dp" 
                android:layout_weight="1"
                android:src="@drawable/wallpaper_1"
                android:contentDescription="@string/app_name"
                android:scaleType="fitXY"
                android:layout_margin="3dp"
                android:id="@+id/wallpaper_id_1"
             />
            <ImageView 
                android:layout_width="0dp"
                android:layout_height="90dp" 
                android:layout_weight="1"
                android:src="@drawable/wallpaper_1"
                android:contentDescription="@string/app_name"
                android:scaleType="fitXY"
                android:layout_margin="3dp"
                android:id="@+id/wallpaper_id_2"
             />
            <ImageView 
                android:layout_width="0dp"
                android:layout_height="90dp" 
                android:layout_weight="1"
                android:src="@drawable/wallpaper_1"
                android:contentDescription="@string/app_name"
                android:scaleType="fitXY"
                android:layout_margin="3dp"
                android:id="@+id/wallpaper_id_3"
             />
            <ImageView 
                android:layout_width="0dp"
                android:layout_height="90dp" 
                android:layout_weight="1"
                android:src="@drawable/wallpaper_1"
                android:contentDescription="@string/app_name"
                android:scaleType="fitXY"
                android:layout_margin="3dp"
                android:id="@+id/wallpaper_id_4"
             />
        </LinearLayout>

        <!--  -->
        <!--  -->
        <!-- A new column -->
        <!--  -->
        <!--  -->
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:orientation="horizontal" 
            android:weightSum="4"
            >  
            <ImageView 
                android:layout_width="0dp"
                android:layout_height="90dp" 
                android:layout_weight="1"
                android:src="@drawable/wallpaper_1"
                android:contentDescription="@string/app_name"
                android:scaleType="fitXY"
                android:layout_margin="3dp"
                android:id="@+id/wallpaper_id_1"
             />
            <ImageView 
                android:layout_width="0dp"
                android:layout_height="90dp" 
                android:layout_weight="1"
                android:src="@drawable/wallpaper_1"
                android:contentDescription="@string/app_name"
                android:scaleType="fitXY"
                android:layout_margin="3dp"
                android:id="@+id/wallpaper_id_2"
             />
            <ImageView 
                android:layout_width="0dp"
                android:layout_height="90dp" 
                android:layout_weight="1"
                android:src="@drawable/wallpaper_1"
                android:contentDescription="@string/app_name"
                android:scaleType="fitXY"
                android:layout_margin="3dp"
                android:id="@+id/wallpaper_id_3"
             />
            <ImageView 
                android:layout_width="0dp"
                android:layout_height="90dp" 
                android:layout_weight="1"
                android:src="@drawable/wallpaper_1"
                android:contentDescription="@string/app_name"
                android:scaleType="fitXY"
                android:layout_margin="3dp"
                android:id="@+id/wallpaper_id_4"
             />
        </LinearLayout>

    </LinearLayout>
</ScrollView>

</LinearLayout> 
```

以前有人处理过这个吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T00:26:17.587

For the first LinearLayout inside your ScrollView, height of `wrap_content` doesn't make sense if you're using weights. Use `fill_parent` or `match_parent` instead. That said, it doesn't exactly make sense to have a ScrollView around something like that and additionally nested weights tend to yield poor performance. You might want to consider using [GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html) instead.

# azure - 在 azure worker 角色之间传输对象

> ID：12151190
> 
> 赞同：2
> 
> 时间：2012-08-28T00:07:35.697
> 
> 标签：azure, azure-worker-roles

我试图找到一种在两个不同天蓝色应用程序的工作角色之间发送对象的好方法。它们是非常简单的对象（每个对象只有大约 20 个属性），一次可以传输多达 10,000 个这样的对象。我认为天蓝色的表存储可以完成这项工作，但我不确定是否还有其他可以做得更好的东西。我考虑过将它们序列化并使用 blob 存储，但我想知道正确的方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:22:59.833

我认为 Azure 表存储是一个很好的系统。如果您需要管理哪个工作角色处理单个项目，您可以考虑使用队列在工作角色之间进行通信。Microsoft 模式和实践创建了“ [CQRS Journey](http://aka.ms/pnpcqrs) ”文档集，以正式确定如何通过具有多个角色的 Azure 服务管理数据流。

# android - Android：尝试缩放 ImageView，因此图像填充宽度并缩放到高度

> ID：12151202
> 
> 赞同：2
> 
> 时间：2012-08-28T00:08:33.917
> 
> 标签：android

我正在尝试编写一个简单的幻灯片放映程序。我希望它显示不同尺寸的图片，然后缩放，这样宽度就会填满屏幕。我可以更改图像视图的大小，并在调试器中将其设置为新宽度，但它不会缩放位图，这是一种方法吗？？？？？？

代码：

```
ImageView picImage = (ImageView) findViewById(0);// R.id.viewpic);
try {
    String FileName = "canon20.png";
    AssetManager assetManager = getAssets();
    InputStream inputStream;
    inputStream = assetManager.open(FileName);
    Bitmap icon = BitmapFactory.decodeStream(inputStream);

    int screenWidth = getWindowManager().getDefaultDisplay().getWidth();
    int screenHeight = getWindowManager().getDefaultDisplay().getHeight();
    int bw = icon.getWidth();
    float t = (float) screenWidth / (float) bw;

    picImage.setImageBitmap(icon);
    picImage.getLayoutParams().width = screenWidth;
    picImage.getLayoutParams().height = (int) (icon.getHeight() * t);
} catch (IOException e) {
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:53:30.213

是的，有一个非常简单的方法可以做到这一点：

只需使用以下代码重新缩放您的位图：

```
ImageView picImage = (ImageView) findViewById(0);// R.id.viewpic);
try {
String FileName = "canon20.png";
AssetManager assetManager = getAssets();
InputStream inputStream;
inputStream = assetManager.open(FileName);
Bitmap icon = BitmapFactory.decodeStream(inputStream);

int screenWidth = getWindowManager().getDefaultDisplay().getWidth();
int screenHeight = getWindowManager().getDefaultDisplay().getHeight();
int bw = icon.getWidth();
float t = (float) screenWidth / (float) bw;

picImage.setImageBitmap(icon);
picImage.getLayoutParams().width = screenWidth;
picImage.getLayoutParams().height = (int) (icon.getHeight() * t);
// The following line is the one that scales your bitmap.
Bitmap scaledIcon = Bitmap.createScaledBitmap(icon, screenWidth, (int) icon.getHeight() * t, false);
} catch (IOException e) {
} 
```

# shell - 重定向输出不起作用

> ID：12151203
> 
> 赞同：0
> 
> 时间：2012-08-28T00:08:40.170
> 
> 标签：shell, scripting

我正在尝试将最新的更改列表编号从我们的源代码控制软件输出到日志文件。我知道脚本可以正常工作，直到获得更改列表编号。下面的脚本在我手动运行时有效，但在从 crontab 触发时似乎无效。我不知道为什么它不起作用。我正在使用 Mac OS X 10.7 的机器上运行此脚本，并且权限设置为 555。

```
changelist=${changelist_ouput}

output_file="../../output_dir/result_log.txt"

if [[ -e ${output_file} ]];
then
    # Delete previous changelist information
    sed -i.bak '/changelist/d' "${output_file}"
    rm "${output_file}.bak"

    # Add current changelist information
    echo "changelist=${changelist}" >> "${output_file}"
else
    echo "WARNING: Failed to update changelist information"
fi 
```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:11:18.520

`cron`可能没有使用与您使用的相同的当前目录。由于您使用相对路径`output_file`，这会将输出转储到相对于`cron`当前目录的某个路径（并且由于`../../output_dir`可能不存在，它只会失败）。

您必须为 使用绝对路径`output_dir`，或创建相对于脚本目录 ( `dirname $0`) 的路径。另请参阅[Crontab - 在目录中运行](https://stackoverflow.com/questions/8899737/crontab-run-in-directory)。

# c# - 使用 C# 和 SQL Server 发送 NULL 值的参数化查询

> ID：12151204
> 
> 赞同：0
> 
> 时间：2012-08-28T00:08:42.823
> 
> 标签：c#, sql

我试图将一些变量传递给参数化查询，但是当值为 NULL 时，它会引发一个异常，指出未提供该值。

如果没有 if 或类似的东西，我该如何解决这个问题？

我的代码是这个

```
var cmdPersona_Log = new SqlCommand();
cmdPersona_Log.Parameters.Clear();
cmdPersona_Log.Connection = mySqlConnection;
cmdPersona_Log.CommandType = CommandType.Text;
cmdPersona_Log.CommandText = @"INSERT INTO [Tomin].[TominRH].[Persona_Log] "
+ "([Id_Action],[Id_User],[Id_Date],[Id_Entidad],[Nombre],[Paterno],[Materno],[Sexo],[Id_Nacionalidad])"
+ " Values (1, 'Admin', @fecha, @id_entidad, @nombre, @paterno, @materno, 1, 52)";

cmdPersona_Log.Parameters.Add("@fecha", DateTime.Now);
cmdPersona_Log.Parameters.Add("@id_entidad", dbRow["CUENTA"]);
cmdPersona_Log.Parameters.Add("@nombre", nombre);
cmdPersona_Log.Parameters.Add("@paterno", paterno);
cmdPersona_Log.Parameters.Add("@materno", materno);

cmdPersona_Log.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T00:24:39.613

I will assume that your problem is that the underlying field doesn't support nulls. If this is the case, you could do something like this

```
cmdPersona_Log.Parameters.Add("@nombre", nombre ?? string.Empty);
cmdPersona_Log.Parameters.Add("@paterno", paterno ?? string.Empty); 
cmdPersona_Log.Parameters.Add("@materno", materno ?? string.Empty); 
```

You'll be inserting an empty string in case you have a null using the [null-coalescing operator](http://msdn.microsoft.com/en-us/library/ms173224.aspx).

# c# - .Net 会员资格和其他选项……

> ID：12151206
> 
> 赞同：0
> 
> 时间：2012-08-28T00:08:50.710
> 
> 标签：c#, .net

对于基于 .net 的 Web 应用程序，有哪些可用于授权的选项？

我可以使用 .NET Membership Provider 或 Windows Identity Framework。微软还有其他解决方案吗？第三方的任何其他解决方案？

谢谢你，史密斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:18:20.957

您可能会考虑使用“ [Windows Azure 访问控制服务](http://msdn.microsoft.com/en-us/library/windowsazure/gg429786.aspx)”（ACS）之类的东西。ACS 代理对各种提供商（如 Live ID、Google、Yahoo 等）的身份验证，并允许您的用户使用他们现有的身份对您的站点进行身份验证。

# python - 有没有一种简单的方法可以将带有值的参数添加到 python3 cmd.Cmd？

> ID：12151212
> 
> 赞同：-2
> 
> 时间：2012-08-28T00:09:26.177
> 
> 标签：python, python-3.x

**有没有一种简单的方法可以将带有值的参数添加到`python3`'s [`cmd.Cmd`](http://docs.python.org/dev/library/cmd.html)？**

例如，使用简单的参数很容易实现命令：

```
> action1 param1 param2 
```

通过添加`do_action1()`and`complete_action1()`来完成，我可以搜索现有参数的列表。

但是您将如何使用值实现参数，例如：

```
> action1 param1=234 param2=SomeTextValue 
```

或者

```
> action1 param1 234 param2 SomeTextValue 
```

where`param1`将设置为`234`和。`param2``SomeTextValue`

这可以解析`cmd.Cmd`吗？

我只能考虑获取整个参数列表，`do_action1( self, params = None )`然后自己解析它。

如果我使用`optparse`参数必须以破折号为前缀`-p`or`--param1`和`--param2`，所以要完成，`cmd.Cmd`我必须先输入 2 个破折号...

```
> action1 --param1=234 --param2=SomeTextValue 
```

如果我必须手动解析参数，是否有任何类似的 python3 模块`optparse`不希望参数具有 2 个破折号前缀？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:30:19.287

Well, `cmd.Cmd` doesn't actually do a whole lot of parsing for you, anyway. So, yes, you can handle parameters with arguments simply by completing parameters with a trailing `=`, and parsing the commands yourself:

```
import cmd

def parse(arg):
    return tuple(k.partition('=') for k in arg.split())

class MyShell(cmd.Cmd):
    def do_foo(self, arg):
        for x, _, y in parse(arg):
            print(x, y)

    def complete_foo(self, text, line, begidx, endidx):
        # Cmd treats = as the end of params; we don't want that.
        if line.endswith('='):
            return ()

        opts = ['param1=', 'param2', 'param3=']
        return [opt for opt in opts if opt.startswith(text)]

MyShell().cmdloop() 
```

Example usage:

```
(Cmd) foo param<TAB>
param1=  param2   param3=  
(Cmd) foo param1=a param
param1=  param2   param3=  
(Cmd) foo param1=a param2 param3=ah
param1 a
param2 
param3 ah 
```

Note that our completions contain a trailing `=` as a hint to the user, to let them know a parameter can be passed.

# spring - 由于未初始化的托管 Bean 属性，JSF 2 ProcessValidationPhase 失败

> ID：12151215
> 
> 赞同：1
> 
> 时间：2012-08-28T00:09:58.533
> 
> 标签：spring, jsf-2

我正在寻找有关如何实施以下内容的最佳实践指南。我正在使用 JSF2、Spring 3、PrimeFaces 3.3、MyBatis。

## 要求：

我有一个数据输入屏幕，其中的输入字段链接到 VO 对象，VO 对象是托管 bean 上的一个属性。用户可以创建新记录，也可以搜索现有记录进行编辑。

选择现有的记录选项时，将出现一个对话框，在该对话框中，用户可以在其中搜索和检索可从中选择的潜在记录列表。

他们一次只能选择一条记录进行编辑。一旦他们做出选择，对话框就会关闭，VO 对象会填充所选数据，供用户编辑。

## 问题：

当提交搜索表单以检索用于编辑的潜在记录列表时，VO 对象尚未初始化，并导致 ProcessValidationPhase 以“目标无法访问”使该过程失败。

实现此方案的最佳方法是什么？VO 对象是否应该在托管 bean 中使用空白值初始化？或者是否应该在托管 bean 的初始化期间调用 VO 对象的初始化方法？

**数据条目.XHTML**

主要数据输入字段：

```
 <p:panelGrid id="dataEntry">
                <p:row>
                    <p:column style="width:200px;">
                        <h:outputLabel value="Field 1:"/></p:column>
                    <p:column>
                        <p:inputText value="#{managedBean.dataEntryVo.field1}"
                                     style="width:50px;"
                                     disabled="true"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel value="Field 2:"/>
                    </p:column>
                    <p:column>
                        <p:inputText value="#{managedBean.dataEntryVo.field2}"
                                     style="width:50px;"
                                     disabled="true"/>
                    </p:column>
                </p:row>

            </p:panelGrid> 
```

对话框上的命令按钮用于检索可能的记录列表以供选择进行编辑：

```
 <p:commandButton id="retrieveDataCb"
                            value="Retrieve"
                            actionListener="#{managedBean.retrieveDataEntryList}"
                            update=":dataEntryForm:retrievedList">
            </p:commandButton> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:38:42.297

将搜索标准初始化为虚拟对象肯定会起作用。不是很整洁，但它有效。另一方面，您可以尝试使用数据容器组件，例如 a`<p:dataGrid/>`或 `<p:dataTable/>`。有一个`var`属性可以让您摆脱空引用，例如您尝试实现的情况。该`var`属性补偿空数据集。话虽如此，您现在可以 `List<DataEntryVo>`在您的 backing bean 中添加一个，然后在您的视图中添加：

```
<p:dataGrid id="dataEntry" value="#{managedBean.theVoList}"  var="vo">
            <p:panel>
               <p:panelGrid>
                <p:column style="width:200px;">
                    <h:outputLabel value="Field 1:"/>
                </p:column>
                <p:column>
                    <p:inputText value="#{vo.field1}" style="width:50px;" disabled"true"/>
                </p:column>
                  <p:row>
                <p:column>
                    <h:outputLabel value="Field 2:"/>
                </p:column>
                <p:column>
                    <p:inputText value="#{vo.field2}" style="width:50px;" disabled="true"/>
                </p:column>
                </p:row>
                </p:panelGrid>
            </p:panel> 
           </p:dataGrid> 
```

另一种选择是，您可以完全避免将输入字段绑定到托管 bean 中的对象，而是将输入字段直接绑定到托管 bean，就像`<p:inputText binding="#{vo.field1Input}" style="width:50px;" disabled="true"/>`您将拥有的支持 bean 中一样`UIcomponent field1Input = new HtmlInputText();`（或任何用于 primefaces 的类，然后调用`field1Input.getValue()`或`field1Input.setValue()`根据您的需要。将 bean 设为 ViewScoped bean 也是一个好主意，以避免让此解决方案正常工作的不必要麻烦。

# javascript - 处理 iOS 强制网络支持

> ID：12151218
> 
> 赞同：10
> 
> 时间：2012-08-28T00:10:47.807
> 
> 标签：javascript, ios

因此，我正在为酒店的公共热点构建访客 Internet 门户。这意味着门户通过网络访问网关（Nomadix）提供服务，该网关将所有传出流量重定向到门户页面。门户需要能够在浏览器上设置 cookie，以便访客在空闲超时后可以自动重新登录。

**问题：**
iOS4+ 和 OS X (10.7+) 设备具有称为 Captive Network Support 的功能。此功能会持续扫描 Wifi SSID，连接到它们，然后 curl [http://www.apple.com/library/test/success.html](http://www.apple.com/library/test/success.html)以查看设备是否已连接到互联网。如果它没有得到成功响应，这些设备会弹出打开所谓的强制网络门户。此门户不是 Safari Mobile 的真实版本，您无法在此浏览器上保存 cookie。

我想对以下问题有权威的回答：

我可以使用客户端 javascript/markup 吗？

A) 在 Captive Network（弹出）浏览器中保存 cookie

B) 在没有将 apple.com 列入白名单的情况下，首先防止 Captive Network 浏览器弹出

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T04:57:35.713

在 StackExchange 网络中，对于 sysadmin 的东西来说，这是一个错误的站点；你不妨试试[ServerFault](https://serverfault.com/questions/tagged/captive-portal)。根据我作为用户的经验，有一些 WiFi 门户可以在没有 cookie 的情况下管理重新身份验证；也许 ServerFault 可以帮助您找到此类。

也就是说，在 iOS 客户端开发方面有一种可能的解决方案：有一些[`CaptiveNetwork`API](https://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html)允许第三方应用程序通知系统它承担了对特定 SSID 进行身份验证的责任，从而抑制 Web 工作表。这可能不是一个理想的解决方案，因为它需要您的用户安装应用程序，但它就在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:38:00.880

当检测到 iOS 设备时，您可以尝试在本地提供“ [http://www.apple.com/library/test/success.html ”。](http://www.apple.com/library/test/success.html)这将使 CNA 不会弹出，然后用户可以通过移动 safari 登录，您可以在其中保存 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-13T17:16:39.227

[iOS 14](https://developer.apple.com/news/?id=q78sq5rv)有一个新的[API](https://datatracker.ietf.org/doc/html/draft-ietf-capport-api-08)可用于强制门户。顺便说一句，[Android也支持它](https://developer.android.com/about/versions/11/features/captive-portal)

# java - 从逗号分隔的文本文件中读取

> ID：12151221
> 
> 赞同：0
> 
> 时间：2012-08-28T00:11:17.457
> 
> 标签：java, csv

我正在尝试编写一个模拟唱片店购物车的 Java 程序。第一步是打开`inventory.txt`文件并读取基本上是“*商店必须提供*”的内容。然后我需要单独读取每一行并处理 id 记录和价格。

当前方法输出的结果非常接近我需要的结果，但是，它会在下一行的项目 id 上获取，如下所示。

我想知道是否有人可以帮助我弄清楚如何单独处理文本文档中的每一行并将每条数据存储在自己的变量中而无需`id`获取下一项？

```
public void openFile(){
    try{
        x = new Scanner(new File("inventory.txt"));
        x.useDelimiter(",");
    }
    catch(Exception e){
        System.out.println("Could not find file");
    }
}

public void readFile(){
    while(x.hasNext()){
        String id = x.next();
        String record = x.next();
        String price = x.next();            
        System.out.println(id + " " + record + " " + price);
        break;
    }
} 
```

**.txt 文件：**

```
11111, "Hush Hush... - Pussycat Dolls", 12.95
22222, "Animal - Ke$ha", 9.95
33333, "Hanging By A Moment - Lifehouse - Single, 4.95
44444, "Have A Nice Day - Bon Jovi", 9.99
55555, "Day & Age - Killers", 10.99
66666, "She Wolf - Shakira", 15.99
77777, "Dark Horse - Nickelback", 12.99
88888, "The E.N.D. - Black Eyed Peas", 10.95 
```

**实际输出**

```
11111  "Hush Hush... - Pussycat Dolls"  12.95
22222 
```

**预期结果**

```
11111  "Hush Hush... - Pussycat Dolls"  12.95 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T00:14:51.940

所以这里的问题特别是你在逗号上打断，你应该在逗号和换行符上打断。但是还有很多其他极端情况（例如，如果您的列是“abc,,,abc”，那么您不应该在这些逗号上打断）。Apache Commons 带有一个处理所有这些极端情况的 CSVParser，你应该使用它：

[http://commons.apache.org/csv/apidocs/org/apache/commons/csv/CSVParser.html](http://commons.apache.org/csv/apidocs/org/apache/commons/csv/CSVParser.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T00:18:40.943

您可以使用 a`Pattern`作为 的参数[`Scanner.useDelimiter`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#useDelimiter%28java.util.regex.Pattern%29)。使用它为分隔符提供alernates：逗号或行分隔符。

```
x.useDelimiter(",|" + System.getProperty("line.separator")); 
```

根据您的输入文件用作行分隔符的内容，您可能需要更改第二个选项。

使用现有 CSV 库的其他答案中的建议很好：解析 CSV*并不*像分解逗号周围的输入那么简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T00:15:12.330

有多种方法可以实现这一点，但按照您自己的方式，您可以使用 Scanner 首先读取行（使用 Java 的“line.separator”作为分隔符），然后再次使用 Scanner 类并使用逗号作为分隔符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T00:19:20.620

您将面临的问题是 CSV 不仅仅是将 a 拆分`String`为逗号。使用“转义”逗号（您不想区分逗号）需要考虑一些注意事项。

我建议您节省大量时间和头痛，并使用现有的 API。

Apache Commons 已经被提及。我最近使用[了 OpenCSV](http://opencsv.sourceforge.net/)，发现它非常简单易用且功能强大

恕我直言

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T01:27:07.837

一种将整个文件读入字符串（行）列表的简单方法......

```
public class Scanner {
public static List<String> readLines(String filename) throws IOException {
    FileReader fileReader = new FileReader(filename);
    BufferedReader bufferedReader = new BufferedReader(fileReader);
    List<String> lines = new ArrayList<String>();
    String line = null;
    while ((line = bufferedReader.readLine()) != null) {
        lines.add(line);
    }
    bufferedReader.close();
    return lines;
  }
} 
```

然后您可以像以前一样处理各个行，因为每一行都是它自己的 String 对象。也就是说，如果您不使用 CSVParser。

# javascript - IIFE 中的“这个”| 与本地范围相同吗？

> ID：12151226
> 
> 赞同：3
> 
> 时间：2012-08-28T00:13:15.937
> 
> 标签：javascript, iife

如果我有 IIFE，这是否指的是本地范围？

```
(function(){

    var $a;   
    $a = Su.$a

    // this.$a = Su.$a; // can I replace with this

})(); 
```

我问是因为我需要`Su.$a`在我的 IIFE 中随处可用。

但我不想打电话`Su.$a`，我想打电话`$a`。

和当 var 它是顶级作用域时说`this.$a`的一样吗？`var $a`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T06:16:23.583

不。

`this`由[MDN / `this`Operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)描述的一些东西设置，但简而言之：

*   全局对象，在顶级范围内
*   `obj`, 执行时`obj.func(...)`
*   `obj`, 当执行`func.apply(obj, [...])`or`func.call(obj, ...)`
    或全局对象时, if `obj`is `null`or`undefined`
*   `func.prototype`调用时带有原型的新对象`new func(...)`
*   事件目标，如果`elem.addEventListener('event', func, ...)`和`event`被触发`elem`

较新的 JavaScript 中存在一些差异和添加，但仅此而已。 `this`与范围无关`function`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T03:17:50.933

不，它们是不同的。

`var $a`，则`$a`是函数范围内的局部变量。

但是如果你使用`this.$a`，因为这是一个自执行函数，`this`在`window`这种情况下，`this.$a`与 相同`window.$a`，所以你使用的是全局变量`$a`。

# git - 如何在 mac 上更新 git（它是预装的？）

> ID：12151227
> 
> 赞同：-1
> 
> 时间：2012-08-28T00:13:21.400
> 
> 标签：git

我有一个mac，它安装了git。如何获取最新信息？（我目前正在运行 1.7.3.1）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:21:01.753

它很可能没有预装 Git，但如果/当您安装了开发人员工具时，您可能会得到它。

Felix 的评论很到位，[Homebrew](https://brew.sh/)是 git 和 OS X 上许多其他 Unix 软件包的方式。

# iphone - 更改 Bundle ID 会导致应用中断

> ID：12151240
> 
> 赞同：2
> 
> 时间：2012-08-28T00:15:49.897
> 
> 标签：iphone, ios, xcode

我正在尝试将我的 Bundle ID 从默认的 ID 更改为我在 Apple 开发人员中心创建的 ID。但是当我更改 plist 中的 Bundle ID，然后删除手机上的应用程序并尝试从 XCode 运行它时，我收到以下错误：

```
Could not launch "MyApp"
No such file or directory (then it lists a path to the app's DerivedData folder) 
```

当我更改应用程序的 Bundle ID 时，我应该做一些特别的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:24:16.190

尝试清理项目。我更喜欢简单地删除整个`~/Library/Developer/Xcode/DerivedData`文件夹，因为 Xcode 有时会搞砸并且不能正确清理。

考虑为此编写一个简单的 bash 脚本。在`~/.bash_profile`（您可能必须先创建此文件）中添加以下内容：

```
clean(){
rm -rf ~/Library/Developer/Xcode/DerivedData
echo "Removed all derived data."
} 
```

保存并运行`source ~/.bash_profile`（或重新启动终端）。

现在您可以简单地输入`clean`任何终端窗口，它会清理您的所有项目。

# c# - 实例化扩展方法？C＃

> ID：12151241
> 
> 赞同：2
> 
> 时间：2012-08-28T00:16:06.917
> 
> 标签：c#, extension-methods

所以我想为 API 已经密封的类型创建一个扩展方法。

如果您了解扩展方法，以下内容应该看起来很熟悉。

```
private static List<Member> memberList = new List<Member>();

public static List<Member> GetMemberList(this GameObject go)
{
    return memberList;
} 
```

注意，要声明一个扩展方法，它需要是静态的，因为它需要是静态的，所以我通过 GameObject 类型访问的 List 必须是静态的。我希望每个游戏对象都有自己的成员列表。但是我很确定，因为这是一个静态字段，每个实例化的 GameObject 都将指向同一个静态成员列表。

那么我的假设是否正确？如果是这样，什么可能是替代方案？我想避免将 GameObject 放在也包含 memberList 的包装类中，因为 api 只允许在运行时检测和操作 GameObject。有一些方法可以通过 gameObject 反向引用包装类，但这会增加我想要避免的代码的复杂性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T00:24:30.350

是的，如果你想在游戏对象之外保留一些东西并通过扩展方法访问它，它必须是静态的。

您可以使用字典将一个成员列表映射到每个游戏对象：

```
private static Dictionary<GameObject, List<Member>> memberLists = new Dictionary<GameObject, List<Member>>();

public static List<Member> GetMemberList(this GameObject go) {
  return memberLists[go];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T00:36:37.170

看来您正在使用 Unity3。UnityAnswers 网站上的相关答案可能会有所帮助：[http ://answers.unity3d.com/questions/22493/unity-3-sealed-class-gameobject-.html](http://answers.unity3d.com/questions/22493/unity-3-sealed-class-gameobject-.html)

似乎应该有办法使用内置脚本系统在 Unity 框架中附加您想要的固有行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T00:29:21.137

是的你是对的。如果您有静态方法，则该类的所有实例共享相同的数据。通话`return memberList;`是非法的。它与静态方法相同`return this.memberList;`且不`this`可用。相反，您必须调用该类：`return GameObject.memberList;`。但我知道你不是在寻找这个解决方案。

扩展方法旨在创建额外的**行为**。如果你想创建额外的**数据**，使用继承扩展 GameObject 类是正确的选择。

或者，您可以使用表单的字典附加 memberList `Dictionary<GameObject, List<Member>>`。但就我个人而言，我更喜欢如下所示的构图：

```
public class myGameObject
{
    public List<Member> memberList { get; set; }
    public GameObject go { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T00:40:51.457

```
private static ConditionalWeakTable<GameObject, List<Member>> dict = new ConditionalWeakTable<GameObject, List<Member>>();

public static List<Member> GetMemberList(this GameObject go)
{
  return dict.GetOrCreateValue(go);
} 
```

`ConditionalWeakTable`管理对象生命周期，因为它使用弱引用。`GameObject`因此，如果没有其他对它的实时引用，它不会阻止 GC 收集，这也将允许`List<Member>`收集 。

它是线程安全的，但这假设您希望起点是一个空列表（`GetOrCreateValue`如果没有当前值，则调用默认构造函数）。如果你想要一个不同的起点，你的线程问题会变得更加复杂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T00:25:48.990

扩展方法只是“看起来”看起来像实例方法的静态方法。

但是，它们不会添加静态方法没有的任何附加功能，它只是为了易于使用、维护和可读性。扩展方法也不能访问受保护/私有成员。

如果`GameObject`实际上没有密封（即它没有`sealed`关键字），那么您可以编写一个继承的类`GameObject`以访问其受保护的方法/字段/属性。仅当您自己是构建这些对象的人时，这才有效。

# android - as3 air for android 下载文件夹和内容

> ID：12151245
> 
> 赞同：0
> 
> 时间：2012-08-28T00:16:23.757
> 
> 标签：android, actionscript-3, air, download, directory

是否可以使用 air for android 下载文件夹及其内容？我也想在 iPhone 上使用相同的代码。

我需要将它存储在应用程序存储中，以便我们可以在下载后引用内容。

我知道可以下载此问题中引用的内容：[使用 Air For Android 下载内容](https://stackoverflow.com/questions/12033442/as3-android-saving-remote-sounds-on-sdcard-accessing-later)

但是一个人可以下载整个文件夹并再次将其存储在应用程序目录中吗？

谢谢

@lukevain？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:52:40.057

你是从网络服务器下载的吗？如果是这样，这将不起作用，我建议使用 php 脚本列出远程目录中的所有文件。

如果这是本地的，您可以使用它：

```
//using the application storage dir. This will work on iOS and Android
var f:File = File.applicationStorageDirectory.resolvePath("yourFolder/"); 
//you can also use getDirectoryListingAsync to have this run in the background
var filesList:Array = f.getDirectoryListing();
for (var i:int = 0; i < filesList.length; i++) {
    trace(filesList[i].nativePath);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:34:54.010

这不是如何从服务器获取文件夹内容的答案，而是一种在本地计算机上搜索您选择的文件夹的方法。它只有 3 层深，它可能不是查找文件夹的最佳方法，因为它会检查它们的扩展名是否为空，并且我假设它是一个文件夹。然后我在那个文件夹中搜索。无论如何它是。

您需要创建一个文本字段并给它一个实例名称“daText”；

这是代码：

```
import flash.filesystem.*;
import flash.media.*;
var myFolder:String = "images/"; /// change this to the folder of your choice :)

var desktop:File = File.applicationDirectory.resolvePath(myFolder);
var files:Array = desktop.getDirectoryListing();
for (var i:uint = 0; i < files.length; i++)
{

    if (files[i].extension == null)
    {

        daText.text +=  files[i].name + "\n";
        var anotherArray:File = File.applicationDirectory.resolvePath(myFolder+files[i].name);
        var h:Array = anotherArray.getDirectoryListing();
        for (var a:uint = 0; a < h.length; a++)
        {
            daText.text +=  "----" + h[a].name + "\n";
            if (h[a].extension == null)
            {

                var oneMoreArray:File = File.applicationDirectory.resolvePath(myFolder+files[i].name+"/"+h[a].name+"/");
                var C:Array = oneMoreArray.getDirectoryListing();
                for (var B:uint = 0; B < C.length; B++)
                {
                    daText.text +=  "*******"+C[B].name + "\n";
                }
            }
        }
    }

} 
```

# c# - 如何通过 HTTP 与 MSMQ 通信？

> ID：12151247
> 
> 赞同：1
> 
> 时间：2012-08-28T00:16:25.637
> 
> 标签：c#, java, wcf, msmq

经过 2 小时的广泛谷歌搜索后，我没有找到以下问题的明确答案。

是否可以通过 HTTP 与 MSMQ 通信？如果我理解正确，则可以从 MSMQ 3.0 开始，它使用 SOAP。

是否有通过 HTTP 向 MSMQ 发送消息的**简单MSMQ 客户端示例？**C# 中的示例就足够了。

我已经看到人们创建 WCF**服务**的博客文章，该服务通过 HTTP 接受消息并将其重新路由到 MSMQ，但这不是我想要的。

PS。我的最终目标是从 Linux 机器上的 Jetty 下运行的 Java 代码向 MSMQ 发送消息。因此 MSMQ/JNI 桥对我不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-28T00:23:09.537

问：是否可以通过 HTTP 与 MSMQ 通信？

答：当然。很多方法;)

问题：

问）你的环境是什么？COM/ActiveX? 或者您可以使用“更现代”的消息队列吗？你的 Windows 版本是多少？它是 Windows 客户端，还是更多的服务器配置？

问）假设 HTTP 混合在一起，您的 Web 服务器在哪里？在 MSMQ 主机上？它是 IIS Web 服务器吗？或者 Jetty 是等式中唯一的 HTTP 部分？

建议：

如果您在双方都有网络服务器的奢侈；我只是在两个环境之间来回发布 Json 消息（即发明我自己的小型 REST-ful 协议）。

恕我直言...

# hadoop - 分布式缓存 Hadoop - FileNotFound

> ID：12151249
> 
> 赞同：1
> 
> 时间：2012-08-28T00:16:39.857
> 
> 标签：hadoop, filenotfoundexception, distributed-caching, distributed-cache

我正在尝试将文件放在分布式缓存中。为了做到这一点，我使用 -files 选项调用我的驱动程序类，例如：

```
 hadoop jar job.jar my.driver.class -files MYFILE input output 
```

`getCacheFiles()`和包含 MYFILE 的 URI/路径的返回`getLocalCacheFiles()`数组。（例如：hdfs://localhost/tmp/hadoopuser/mapred/staging/knappy/.staging/job_201208262359_0005/files/histfile#histfile）

不幸的是，当尝试在 map 任务中检索 MYFILE 时，它会抛出一个`FileNotFoundException`.

我在独立（本地）模式和伪分布式模式下都试过了。

你知道可能是什么原因吗？

**更新：**

以下三行：

```
System.out.println("cache files:"+ctx.getConfiguration().get("mapred.cache.files"));
uris = DistributedCache.getLocalCacheFiles(ctx.getConfiguration());
for(Path uri: uris){

      System.out.println(uri.toString());
      System.out.println(uri.getName());
      if(uri.getName().contains(Constants.PATH_TO_HISTFILE)){
       histfileName = uri.getName();
      }
} 
```

打印出来：

```
cache files:file:/home/knappy/histfile#histfile

/tmp/hadoop-knappy/mapred/local/archive/-7231_-1351_105/file/home/knappy/histfile

histfile 
```

因此，该文件似乎列在 job.xml`mapred.cache.files`属性中，并且似乎存在本地文件。尽管如此，还是会抛出 FileNotFoundException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:35:15.223

首先检查`mapred.cache.files`作业的 xml 以查看文件是否在缓存中。您可以在映射器中检索它：

```
...
Path[] files = DistributedCache.getLocalCacheFiles(context.getConfiguration());
File myFile = new File(files[0].getName());
//read your file content
... 
```

# macos - 反引号返回带有空格的文件名并且周围的命令失败

> ID：12151255
> 
> 赞同：0
> 
> 时间：2012-08-28T00:17:18.637
> 
> 标签：macos, shell, backticks

我正在尝试执行“复制目录中的最新文件”之类的操作。我使用反引号提出了以下命令简单命令，它适用于没有嵌入空格的文件名：

```
cp -rp `ls -1d searchstring | head -1` destination 
```

如您所见，当返回的文件中没有空间时，这应该可以正常工作。但是，当有这样的空间时，这显然行不通。

我需要一种方法来处理反引号的输出，或者一些替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:34:50.587

您可以通过在其周围添加双引号将命令替换的结果视为单个单词：

```
cp -rp "`ls -t searchstring | head -n 1`" destination 
```

分配给变量时不需要双引号。`a=`uptime``相当于`a="`uptime`"`。

# ruby - 如何不在 y 结构上打印科学记数法

> ID：12151265
> 
> 赞同：0
> 
> 时间：2012-08-28T00:18:53.560
> 
> 标签：ruby

我使用 ay 表示法打印出结构。它以科学记数法打印浮点数。我该如何修复它，以便我可以看到它的十进制值。例如

```
TradeObjects.each{|trade|

y trade

} 
```

输出：请用科学计数法查看 :currentPnL。

```
--- !ruby/object:OpenStruct 
table: 
  :gains: time stop
  :exit: 
  :breakoutprice: 1.24634003639221
  :currentPnL: -5.00000000001055e-005
  :symbol: EUR/USD
  :mfe: 0.0
  :mae: 0.0
  :entry: 1.24638
  :exitTime: 
  :entryTime: 2012-08-22 02:59:18 -04:00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:02:57.257

您可以使用这样的格式化字符串：

```
"%f" % -5.00000000001055e-005 => "-0.000050" 
```

# regex - 如何根据当前行的第一个字符从上一行中删除换行符？

> ID：12151267
> 
> 赞同：0
> 
> 时间：2012-08-28T00:19:13.203
> 
> 标签：regex, notepad++

我以 CSV 格式导出了一些数据，这些数据在文本字段中有一些换行符。我无法让 Excel 正确处理此问题。我只想编辑文件以删除这些换行符。

有效记录以数字开头。我尝试放入`\n^([^\d])`Notepad++ 的查找/替换的“查找内容”框，以匹配以非数字开头的任何行和前面的换行符。它匹配正确。在“替换为”框中，我放了一个空格，然后用空格`\1`替换换行符并留下匹配的字符。但是，替换根本不起作用，没有任何改变。

我究竟做错了什么？

示例文本：

```
123,0,1,"This is a single line comment","bob","jim"
124,0,1,"This is a multi line comment w/ newline.
This is the second line of the comment","ted","alfred"
125,0,1,"This is another single line comment","jim","bob" 
```

我想用空格替换“这是第二个...”之前的换行符，以便文件如下所示：

```
123,0,1,"This is a single line comment","bob","jim"
124,0,1,"This is a multi line comment w/ newline. This is the second line of the comment","ted","alfred"
125,0,1,"This is another single line comment","jim","bob" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:32:12.887

我想到了。我曾经`(\n)^(?!\d+,\d+)`匹配任何换行符，然后是一行的开头，该行的开头没有后跟至少一个数字、一个逗号和至少一个数字。在“替换为”中，我只是放了一个空格。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-07-26T22:07:05.187

`\n`如果您将换行设置为 .，则可以在 Notepad++ 中使用`Unix (LF)`。如果它在 中`Windows (CR LF)`，那么`\r\n`应该可以工作，或者将返回值转换为 Unix（从底部栏中）。

# javascript - jQuery 中带有行号的 Console.log 开发条件

> ID：12151271
> 
> 赞同：0
> 
> 时间：2012-08-28T00:20:34.297
> 
> 标签：javascript, jquery, console

我使用 console.log 在我的网络应用程序上进行调试，我有一个标志变量：

var is_dev = true;

我希望 console.log 仅在 is_dev == true 时运行；

这是我使用的代码：

```
 jQuery.extend({
  log : function() {
    if (is_dev) {
      if (console) {
        console.log.apply(console, arguments);
      }
    }
  }
}); 
```

现在我使用 $log('some text', someValue);

它工作正常，问题是它总是显示 $log 函数的控制台行号。我还想显示它发生的记录文本的行号..

我不想去每一行检查那里的 is_dev ，这是不切实际的，我那里有数百个。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:33:49.590

您可以使用此处的答案[How to get JavaScript caller function line number? 如何获取 JavaScript 调用者源 URL？](https://stackoverflow.com/questions/1340872/how-to-get-javascript-caller-function-line-number-how-to-get-javascript-caller)

Nathan Landis 的答案就是您要找的。

# jquery - 为什么我不能在这个动画上调用回调

> ID：12151272
> 
> 赞同：0
> 
> 时间：2012-08-28T00:20:36.123
> 
> 标签：jquery, jquery-animate

我可能正在做一些愚蠢的事情，但由于某种原因我今天无法思考。

我有三个 div，它们都有一个“staff_member”类。当您单击一个 div 时，它的宽度应该会扩大，而其他两个 div 会缩小。如果您单击不同的 div，则该 div 现在应该展开，而其他 div 会缩小。这一切都很好。但是，我想要一个回调函数，所以如果您再次单击展开的 div，它应该将所有三个 div 返回到正常大小（缩小先前展开的 div 并增加缩小的 div。）

如果我添加一个回调它什么都不做，如果我尝试将它作为一个单独的函数运行，扩展的 div 会缩小然后再次扩展。

这是我的代码：

```
jQuery(document).ready(function() {

    var regionWidth = jQuery(".region-panels").width();
    jQuery(".staff_wrapper").css("width",regionWidth*0.84);

    var halfRegion = regionWidth/2;
    var howMany = jQuery(".staff_member").length;
    var makeMeThin = halfRegion/howMany;

    jQuery(".staff_member").css("width",makeMeThin);
    jQuery(".staff_member img").css("cursor", "pointer");

    jQuery(".staff_member").click(function () {
        jQuery(".expanded").removeClass("expanded");
        jQuery(this).addClass("expanded");
        jQuery(".staff_member").not(this).animate({"width":"5%"}, function(){
            jQuery(".expanded").stop().animate({"width":"84%"});
        });
    }, function(){
        jQuery(".staff_member").animate({"width":makeMeThin});
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:02:24.853

要点击展开的部分，做一些不同的事情，你只需要在点击处理程序中检查点击的项目是否已经展开：

```
jQuery(".staff_member").click(function () {
    if (jQuery(this).hasClass("expanded")) {
        // clicked item already expanded, set all back to normal width
        jQuery(".expanded").removeClass("expanded");
        jQuery(".staff_member").animate({"width": "50%"});   // you add right code for setting to normal width
    } else {
        // clicked on item was not already expanded
        jQuery(".expanded").removeClass("expanded");
        jQuery(this).addClass("expanded");
        jQuery(".staff_member").not(this).animate({"width":"5%"}, function(){
            jQuery(".expanded").stop().animate({"width":"84%"});
        });
    }
}); 
```

您没有在代码中显示正常宽度是多少，所以我将其留给您填写。

# php - PHP PDO 等效于 INSERT INTO ... SELECT

> ID：12151273
> 
> 赞同：0
> 
> 时间：2012-08-28T00:20:48.057
> 
> 标签：php, mysql, select, insert, pdo

> **可能重复：**
> [从带有 PDO 的 SELECT 中插入 MySQL](https://stackoverflow.com/questions/6423384/mysql-insert-from-a-select-with-pdo)

我过去一直使用`mysql_*`通过 php 连接到 mysql 的方式，最后我开始跋涉到 PDO。过去我喜欢使用 mysql`INSERT INTO...` `SELECT...` 来插入数据。好处是我可以稍后将列添加到表中，而无需完全占用与该表交互的所有其他表单。我的问题很简单。. . 是否有与此等效的 PDO？

我在准备好的语句中使用旧语法运气不佳，也没有看到任何使用这种格式的示例。任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:28:40.207

查询不会改变。您可以使用以下内容：

```
$postUser = $_POST["user_name"];
$stmt = $dbh->prepare("SELECT * FROM user WHERE userName = :postUser");
$stmt->bindParam(':postUser', $postUser);
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T00:30:15.380

至`INSERT`：

```
$sql = "INSERT INTO table (whatever) VALUES (:whatever)";

$q = $conn->prepare($sql);

$q->execute(array(':whatever'=>'whatever')); 
```

并`SELECT`：

```
$sql = "SELECT whatever FROM table WHERE whatever = :whatever";

$q = $conn->prepare($sql);

$q->execute(array(':whatever'=>'whatever'));

$row = $q->fetch(); 
```

有关准备好的语句的更多信息，请访问[此处](http://www.php.net/manual/en/pdo.prepare.php)。

# c# - 同时调用 ASP.NET 托管的 WCF 服务时出现实体框架错误

> ID：12151274
> 
> 赞同：4
> 
> 时间：2012-08-28T00:21:28.487
> 
> 标签：c#, asp.net, multithreading, entity-framework, exception

我有一个简单的 ASP.NET 托管 WCF 服务，它有几种方法，在使用实体框架时都有相同的模式......

```
public void Operation1(string username)
{
    using(MyEFContext context = new MyEFContext())
    {
        UserInfo info = (from ui in context.UserInfos
                         where ui.User.Equals(username)
                         select ui).FirstOrDefault<UserInfo >();

        info.LastAccess = DateTime.Now;

        // Operation specific code, such as getting information using the EF context

        context.SaveChanges();
    }
} 
```

这是一个简化版本以保持示例简单，但即使是这个简单版本也与我的生产代码集存在相同的错误。该代码首先使用实体​​框架获取用户信息，更新用户 LastAccess 字段，然后执行特定于操作的代码。特定于操作的代码只是查询信息。最后它调用 SaveChanges 以便将 LastAccess 保存回数据库。现在这一切都很好，直到我的客户同时拨打两个电话。

客户端进行两次调用，每次调用不同的操作，但它们都具有与上面所见相同的代码模式。有时两个电话都成功完成。但有时其中一个会产生错误，它可能是以下三个中的任何一个......

```
System.Data.EntityException: The underlying provider failed on Open. ---> 
System.InvalidOperationException: The connection was not closed. The connection^s current 
state is connecting.

System.Data.EntityCommandExecutionException: An error occurred while executing the command
definition. See the inner exception for details. ---> System.InvalidOperationException: 
ExecuteReader requires an open and available Connection. The connection^s current state is 
closed.

System.InvalidOperationException: Invalid attempt to read when no data is present. 
```

显然，我对 EF 和 ASP.NET 的理解是有缺陷的，因为我希望这两个操作甚至可以并行工作。我是否需要锁定每种方法，以便它们一次只发生一个？肯定不是。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:08:54.903

在这里找到答案[管理 EntityConnection 生命周期](https://stackoverflow.com/questions/2575485/managing-entityconnection-lifetime)。事实证明，为我的所有上下文重用相同的 EntityConnection 实例是问题所在。所以现在我每次都创建一个新的。

# c# - DataSource 和 DataSourceID 都在“CuisineList”上定义。删除一个定义

> ID：12151281
> 
> 赞同：0
> 
> 时间：2012-08-28T00:21:49.273
> 
> 标签：c#, asp.net, linq-to-entities, datasource

我尝试了一些在 Google 和 Stack Overflow 上找到的建议，但它们不起作用。

这是我的数据绑定到的下拉列表控件 - 请注意，它没有 DataSouce 或 DataSourceID 的值

```
<asp:DropDownList ID="CuisineList" runat="server" Width="100" 
     onselectedindexchanged="CuisineList_SelectedIndexChanged">
</asp:DropDownList> 
```

这是将数据绑定到下拉列表控件的代码：

```
BLgetMasterData obj = new BLgetMasterData();
var cusineList = obj.getCuisines();
CuisineList.DataSourceID = null; 
CuisineList.DataSource = cusineList;
CuisineList.DataBind();
CuisineList.Items.Insert(0, "Any");
CuisineList.SelectedValue = "Any"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T08:30:07.283

即使我检查了没有使用 DataSourceID 的页面后面的属性和代码，我也面临同样的问题。由于数据库身份验证，我发现它给出错误。请检查您的数据库。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:27:59.203

`CuisineList.DataBind();`将使用数据源的数据填充您的列表。
就像您在列表中插入了额外的项目一样，您也可以删除它们。

```
CuisineList.Items.Remove("Item");
CuisineList.Items.RemoveAt(1);
CuisineList.Items.Remove(someOtherList.SelectedItem); 
```

参考：[下拉列表项删除方法](http://msdn.microsoft.com/en-us/library/yhez99sc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T10:59:52.790

这个错误是因为你给的两个数据源可能在不同的位置。转到您的 aspx 设计文件并从 DropDownList 字段中删除 DataSourceId 属性。

# java - 500,000 个街道名称 - 使用什么数据结构来实现快速搜索？

> ID：12151282
> 
> 赞同：7
> 
> 时间：2012-08-28T00:22:06.637
> 
> 标签：java, algorithm, search, data-structures, autocomplete

So we have many street names. They come in a file. Id probably cache them when booting the server up in production. The search should be auto complete like - e.g. you type 'lang ' and you would get maybe 8 hits : langstr, langestr. Etc

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T00:23:19.403

您正在寻找的是某种压缩的特里树表示。您可能希望以[简洁的尝试](http://stevehanov.ca/blog/index.php?id=120)或[DAWG](http://en.wikipedia.org/wiki/Directed_acyclic_word_graph)作为起点，因为它们提供了出色的效率和非常好的空间使用率。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T14:50:33.760

自动完成通常使用以下方法之一实现：

*   **树木**。通过在树结构（前缀树、后缀树、dawg 等）中对可搜索文本进行索引，可以执行非常快速的搜索，但会占用内存存储空间。树遍历可以适应近似匹配。
*   **模式分区**。通过将文本划分为标记（ngram），可以使用简单的散列方案执行模式出现的搜索。
*   **过滤**。找到一组潜在的匹配，然后应用顺序算法来检查每个候选。

看一下[完全](https://github.com/fmmfonseca/completely)，一个实现后面一些概念的 Java 自动完成库。

# bluetooth - Arduino 蓝牙连接

> ID：12151284
> 
> 赞同：0
> 
> 时间：2012-08-28T00:22:38.757
> 
> 标签：bluetooth, arduino, wireless, bluesmirf

我正在尝试从我的 arduino 向串行监视器发送一个字符串。我正在使用带有 arduino UNO 的 sparkfun bluesmirf 芯片。

我的代码很简单：

```
void setup() {
    Serial.begin(115200); // begin serial communication at 115200 baud rate
}
void loop() {
    Serial.println("hello world"); // write hello world
    delay(1000); // delay one second
} 
```

当我打开显示器时，我收到了乱码。当我用 USB 电缆连接到 arduino 时，一切正常。

谁能把我引向正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:55:01.330

根据 bluesmirf 的版本，默认波特率是 9600 或 115k。这是[另一个项目，其中提到](http://www.lynxmotion.com/images/html/build125.htm)了如何为不同版本设置波特率。

或者，只需将 arudiono 代码和串行监视器设置为 9600 进行测试。

# java - 无法解决错误 - java.sql.SQLException: ORA-01000: 超出最大打开游标

> ID：12151288
> 
> 赞同：0
> 
> 时间：2012-08-28T00:23:03.407
> 
> 标签：java, jdbc, oracle11g, ora-01000

我做了一个java方法来向数据库添加一行。出于测试目的，我调用此方法大约 1000 多次。我在准备好的语句上调用了 close() 方法，但每当调用此方法插入行时，我仍然会收到 oracle 错误。

错误

```
ORA-01000: maximum open cursors exceeded 
```

源代码

```
public void insertARow(ArrayList<String> row)
{
    try
    {
        //Proper SQL statement here, checked by running on DB  
        String insert = "INSERT INTO user.info(cola,colb) values(?,?)";

        //Add a row 
        PreparedStatement ps = con.prepareStatement(insert);//con is a connection object 
        //'row' is an arraylist of strings
        for(int i = 0; i < row.size(); i++ )
        {

            int j = 1 +  i ; 
            String temp = row.get(i);
            ps.setString(j , temp);
        }

        ps.executeUpdate();//The reason for problems !!!
        ps.close();

    }catch(SQLException e)
    {
        System.out.println("Cannot add row !");
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:29:19.147

如果您尝试执行相同的操作 1000 次，我会建议`re-using`相同的操作`PreparedStatement`或使用[`addBatch()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html#addBatch%28%29)和[`executeBatch()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#executeBatch%28%29)组合。

*如果您打算重新使用 PreparedStatement，您可以执行以下操作：*

```
public void insertARow(PreparedStatement ps, ArrayList<String> row){
 //your code
}

public void calledMethod(){
 String insert = "INSERT INTO user.info(cola,colb) values(?,?)";
 PreparedStatement ps = null;

 try{
   ps = con.prepareStatement(insert);
   /**
    * Here you make the call to insertARow passing it the preparedstatement that you
    * have created. This in your case will be called multiple times.
    */
   insertARow(ps, row);
 }finally{
   if(ps != null){
     //close ps
   }
 }
} 
```

# jakarta-ee - Kerberos 身份验证密钥表 KVNO

> ID：12151289
> 
> 赞同：2
> 
> 时间：2012-08-28T00:23:06.867
> 
> 标签：jakarta-ee, spring-security, security, kerberos, application-security

我有一个以企业标准设置 kerberos 身份验证的网络环境（即用户的密码只能使用 30 天）。我已经在这个系统上安装了我的 java web 应用程序，它使用由 KDC 生成的 keytab 文件。一切正常，直到客户用户在 30 天后更改他的网络密码。Goggling 发现这是由于 KVNO 不同步造成的。因此，据我了解，客户端浏览器发送的 KVNO 问题与 keytab 的 KVNO 不同步。我对这个网络协商步骤知之甚少（我使用弹簧安全），所以我正在等待你们的专业知识来解决这个问题。提前致谢。

```
java.security.PrivilegedActionException: GSSException: Failure unspecified at GSS-API level (Mechanism level: Specified version of key is not available (44)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:33:06.307

每次更改帐户密码时，其KVNO都会增加。这会使该帐户的所有密钥表无效。据我了解您的问题，这就是您为其创建密钥表的服务主体发生的情况，对吗？在这种情况下，您需要重新创建密钥表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:25:28.627

经过一番研究，我发现 Java 1.6 更新 23 到 26 存在与此相关的问题。更新到最新的 Java 为我解决了这个问题。感谢您的输入。

# java - jar 中的类加载和方法执行

> ID：12151291
> 
> 赞同：0
> 
> 时间：2012-08-28T00:23:16.850
> 
> 标签：java, classloader

我对类加载有一些小问题。我有一个罐子说 abc.jar，在那个罐子下面还有另一个罐子叫做 libs/cde.jar。我在那个使用 cde.jar 的 jar 中编写了一个类。我正确打包了 abc.jar 并检查了依赖 jar 是否正确打包在 /libs/cde.jar 下。

但是，当我尝试加载 jar (abc.jar) 并执行依赖于 cde.jar 的类时，它找不到依赖的 cde.jar。关于我该怎么做的任何指针？我不能使用其他 jar 加载器，如 OneJar 等。如果可能的话，我必须使用纯 java 类加载。我尝试使用“file:////C:/abc.jar!/libs/cde.jar”将它放在类路径中，但没有成功

谢谢马斯蒂

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T00:27:28.600

Java can't, by default, deal with embedded Jars (ie Jars within Jars)

If you really want this type of behavior, you should take a look at [OneJar](http://one-jar.sourceforge.net/)

Otherwise you will need to leave dependent Jars externally and specify there dependency via the parent Jar's `Class-Path` attribute in its `Manifest` file

# azure - Azure 服务总线和消息会话

> ID：12151293
> 
> 赞同：12
> 
> 时间：2012-08-28T00:23:21.800
> 
> 标签：azure, azure-queues, azureservicebus

我一直在研究 Azure 服务总线队列（**不是**Azure 存储队列）。我读过的所有细节都表明它支持[FIFO 语义](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)，但仅在“消息传递会话”的上下文中。问题是我似乎找不到任何关于这在 Azure 上下文中到底是什么的信息。这是 WCF 构造，还是 Azure 服务总线特有的构造？我假设它与本地交易无关，但我不是 100% 确定。

任何指针都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T04:48:51.580

具体来说，它指的是[MessageSession](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.messagesession.aspx)，它是[AcceptMessageSession](http://msdn.microsoft.com/en-us/library/windowsazure/hh293162)方法，它通过仅返回给定会话 id 的消息来保存密钥，这可能是暗示某种排序的序列。Brokered Messaging : [Session Messages](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-Session-41c43fb4)示例应该有助于澄清，[Best Practices](https://azure.microsoft.com/en-us/documentation/articles/service-bus-dotnet-how-to-use-queues/)文档是另一个很好的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T22:03:17.043

取自[MSDN：](http://msdn.microsoft.com/en-us/library/dn520246.aspx)

> **SessionId：**如果消息 `Microsoft.ServiceBus.Messaging.BrokeredMessage.SessionId`设置了属性，则服务总线使用该`SessionId`属性作为分区键。这样，属于同一会话的所有消息都由同一消息代理处理。这使服务总线能够保证消息排序以及会话状态的一致性。

有关使用的编码示例`SessionId`，`AcceptSessionReceiver` [请参阅。](https://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-Session-41c43fb4)

# c++ - 为什么 CopyFile2 替换 CopyFile 和 CopyFileEx？

> ID：12151294
> 
> 赞同：3
> 
> 时间：2012-08-28T00:24:00.863
> 
> 标签：c++, api, microsoft-metro, file-copying

我最近和一位朋友交谈，他告诉我[CopyFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363851%28v=vs.85%29.aspx)和[CopyFileEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363852%28v=vs.85%29.aspx)在 C++ Metro 应用程序中是不允许的（这似乎是正确的）。为什么是这样？以及为什么他们提出了一个名为[CopyFile2的奇怪替代品](http://msdn.microsoft.com/en-us/library/windows/desktop/hh449404%28v=vs.85%29.aspx)

都是复制一个文件，那为什么要禁止部分已建立的API提出新的功能来搞清楚呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T00:35:45.537

1.  Metro API 的一般立场是“如果有一个 Ex 函数或替代它的东西，你必须调用新的函数。” 8 位字符串（由于历史原因误命名为“ANSI 编码”）版本的函数也是如此。除了其他好处之外，这还可以减少 Windows RT 的代码大小。

2.  让我们分析一下`CopyFile2`......首先，options 参数现在是一个结构，其大小作为第一个成员。我认为这比`CopyFileEx`. 这允许 Microsoft 添加新选项，同时保持与旧调用者的二进制兼容性。（Microsoft 可以扩展结构的长度，然后检查`dwSize`以确定您拥有的结构的版本，并相应地调整其行为。）仅此一项就使其比需要更改函数签名的方式更具未来`CopyFileEx`性（因此是一个全新的函数) 添加一个选项。（我没有仔细阅读，也许他们*也*已经添加了一个选项`CopyFile2`......）

# javascript - 如何为通过 Infinite Scroll 加载的内容发送 AJAX 请求？

> ID：12151300
> 
> 赞同：0
> 
> 时间：2012-08-28T00:24:38.977
> 
> 标签：javascript, ajax, jquery, infinite-scroll

我正在构建一个简单的项目，例如 Twitter，但非常简单:) 用户主页（时间轴）上有很多推文。所以每条推文都有*收藏*按钮。当用户点击收藏按钮时，它会向服务器发送 AJAX 请求以存储收藏的推文。所以最喜欢的按钮是这样的：

```
<a href="#" id="1"><i class="icon-star-empty"></i></a>
<a href="#" id="2"><i class="icon-star"></i></a>
<a href="#" id="3"><i class="icon-star-empty"></i></a>
...
... 
```

我使用以下 JavaScript 发送 AJAX 请求：

```
$("i").on("click", function() {

    if ( $(this).hasClass("icon-star-empty") ){
        ajaxURL = "/setFavorite"
    } else{
        ajaxURL = "/removeFavorite"
    }

    var linkID = $(this).parent().prop("id");
    var obj    = $(this);

    $.ajax({
        url: ajaxURL,
        type: "POST",
        data: {quoteID : linkID},
        success: function() {
            obj.hasClass("icon-star") ? obj.removeClass("icon-star").addClass("icon-star-empty") : obj.removeClass("icon-star-empty").addClass("icon-star");
        }
    });
}) 
```

由于推文很多，我设置了[Infinite Scroll Plugin](http://www.infinite-scroll.com/)。当我没有设置无限滚动时，AJAX 请求运行良好。但是当我设置时，这些 AJAX 请求不适用于通过无限滚动加载的推文。我的意思是，当我单击通过无限滚动加载的推文的收藏按钮时，它们不会向服务器发送 AJAX 请求。但是 AJAX 请求适用于通过默认 HTML 而不是无限滚动加载的推文。

所以我的问题是我该如何解决这个问题？如何为通过 Infinite Scroll 加载的推文发送 AJAX 请求？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:16:57.100

`$('selector').on('event', callback)`只为处理选择器时存在的元素绑定事件。但是，无限滚动代码稍后会加载新元素，因此不会为它们绑定任何事件。

解决方案是使用委托：

```
$('selector').on('click', 'i', function() {
    // do stuff
}); 
```

`selector`需要是包含所有（动态添加的）元素的父`i`元素。

# javascript - 为什么这个对象没有被正确解析？

> ID：12151301
> 
> 赞同：1
> 
> 时间：2012-08-28T00:25:00.020
> 
> 标签：javascript, algorithm, iterator

尝试使用 JavaScript 在 Python 中复制隐式迭代器，尽管我是男性，但我的代码不会返回“Dylan”。

Python：

```
names = [person.name for person in roster if person.male] 
```

JavaScript 算法测试：

```
roster = {
    person: [
        {
            name: "Katie",
            male: false
        },
        {
            name: "Dylan",
            male: true
        },
        {
            name: "Alex",
            male: true
        },
        {
            name: "John",
            male: true
        }
    ]
}

var names = []
var number = -1

for(var loop = 0; loop < roster.person.length; loop++) {
    if(roster.person[loop].male == true) {
        names[number++] = roster.person[loop].name
    }
}

console.info(names) 
```

*>>> [code] 返回 --> ["Alex", "John"]*

为什么是这样？我的循环遍历所有值，并且我的 if then 语句有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:27:49.783

那是因为您试图`-1`在数组的位置插入一个元素。请参阅[*递增和递减运算符*](http://en.wikipedia.org/wiki/Increment_and_decrement_operators)。

使用`++number`而不是`number++`：

```
for(var loop = 0; loop < roster.person.length; loop++) {
    if(roster.person[loop].male == true) {
        names[++number] = roster.person[loop].name
    }
} 
```

或者将变量初始化为，而不是使用变量来保存当前索引值，只需使用`number`，它会向数组中添加一个新元素。`0``-1``.push`

此外，您不需要显式比较 with `true`，表达式计算为 就足够了`true`：

```
for (var loop = 0; loop < roster.person.length; loop++) {
    if (roster.person[loop].male) {
        names.push(roster.person[loop].name);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T00:29:32.250

您将 Dylan 分配给索引 -1。`number`应该从 0 开始。另外，为什么要手动执行？只需使用`Array.push`：

```
var names = []

for(var loop = 0; loop < roster.person.length; loop++) {
    if(roster.person[loop].male == true) {
        names.push(roster.person[loop].name);
    }
} 
```

# clojure - 不同类型的异常没有被捕获？

> ID：12151302
> 
> 赞同：2
> 
> 时间：2012-08-28T00:25:00.597
> 
> 标签：clojure

```
; common/math.clj
(defn nths
  "Returns a collection of values for each idx in idxs. Throws an error if any one idx is out of bounds."
  [coll idxs]
  (map #(nth coll %) idxs))

; nrepl
common.math> (try (/ 1 0)
     (catch Exception e (prn "in catch"))
     (finally (prn "in finally")))
"in catch"
"in finally"
nil
common.math> (try (nths '(5 6 7 8 9) '(0 5))
     (catch Exception e (prn "in catch"))
     (finally (prn "in finally")))
"in finally"
IndexOutOfBoundsException   clojure.lang.RT.nthFrom (RT.java:784)
common.math> (nths '(5 6 7 8 9) '(0 1 3))
(5 6 8)
common.math> *clojure-version*
{:major 1, :minor 5, :incremental 0, :qualifier "alpha4"} 
```

我无法弄清楚第二个 expr 出了什么问题。我期待它会再次打印：

```
"in catch"
"in finally" 
```

运行单元测试时也会发生同样的事情：

```
lein test unittest.common.math

FAIL in (test-nths) (math.clj:87)
expected: (thrown? IndexOutOfBoundsException (nths (quote (5 6 7 8 9)) (quote (0 5))))
  actual: nil 
```

这应该通过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T00:49:30.323

Nths 是惰性的，因此当您的 repl 尝试打印结果时，该函数实际上会运行：

```
core> (def result (try (nths '(5 6 7 8 9) '(0 5))
                        (catch Exception e (prn "in catch"))
                        (finally (prn "in finally"))))
"in finally"
#'core/result
core> result
; Evaluation aborted. 
```

您可以在其中捕获异常，`nths`或者在使用它时捕获它更有意义

```
rsadl.core> (def result (try (nths '(5 6 7 8 9) '(0 5))
                        (catch Exception e (prn "in catch"))
                        (finally (prn "in finally"))))
"in finally"
#'core/result
core> (try (println result) (catch Exception e (prn "in catch")))
("in catch"
nil 
```

或者正如 number23_cn 指出的那样，只要您不需要它因为其他原因而变得懒惰，您就可以在创建它时实现结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T00:32:58.110

```
(try (doall (nths '(5 6 7 8 9) '(0 5)))
     (catch Exception e (prn "in catch"))
     (finally (prn "in finally")))
"in catch"
"in finally"
nil
user=> 
```

因为地图返回惰性序列？

# perl - 在 Perl 中查找嵌套在哈希中的数组的最大索引

> ID：12151304
> 
> 赞同：0
> 
> 时间：2012-08-28T00:25:01.627
> 
> 标签：perl

我有一个带有两个键的散列，值在一个数组中。所以，

```
%graph;
@{$graph{$root}{"children"} = ('apple', 'banana', 'orange'); 
```

我试图获得索引的最大大小为 2，通常我会这样做

```
$#array 
```

但是，当我这样做时

```
$#{$graph{$root}{"children"} 
```

它被注释掉了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T00:44:10.190

下面的代码对我有用，给出输出：

```
$ perl x.pl
List: apple banana orange
Size: 2
$ 
```

代码——注意正确闭合的大括号集（问题中的代码存在阻止其编译的问题）：

```
#!/usr/bin/env perl
use strict;
use warnings;
use English qw( -no_match_vars );

my $root = "root";

$OFS = " ";
my %graph;
@{$graph{$root}{"children"}} = ('apple', 'banana', 'orange');

print  "List:", @{$graph{$root}{"children"}}, "\n";
printf "Size: %d\n", $#{$graph{$root}{"children"}}; 
```

（适用于 x86/64 的 RHEL 5 上的 Perl 5.12.1）

# python - Argparse：在“--help”中包含默认值的方法？

> ID：12151306
> 
> 赞同：389
> 
> 时间：2012-08-28T00:25:11.050
> 
> 标签：python, argparse

假设我有以下 argparse 片段：

```
diags.cmdln_parser.add_argument( '--scan-time',
                     action  = 'store',
                     nargs   = '?',
                     type    = int,
                     default = 5,
                     help    = "Wait SCAN-TIME seconds between status checks.") 
```

目前，`--help`返回：

```
usage: connection_check.py [-h]
                             [--version] [--scan-time [SCAN_TIME]]

          Test the reliability/uptime of a connection.

optional arguments:
-h, --help            show this help message and exit
--version             show program's version number and exit
--scan-time [SCAN_TIME]
                    Wait SCAN-TIME seconds between status checks. 
```

我更喜欢这样的东西：

```
--scan-time [SCAN_TIME]
                    Wait SCAN-TIME seconds between status checks.
                    (Default = 5) 
```

查看帮助格式化程序代码会发现有限的选项。有没有一种聪明的方法可以以类似`argparse`的方式打印默认值，或者我应该只对格式化程序进行子类化？`--scan-time``help`

* * *

## 回答 #1

> 赞同：562
> 
> 时间：2012-08-28T00:27:58.853

使用[`argparse.ArgumentDefaultsHelpFormatter`格式化程序](http://docs.python.org/library/argparse.html#formatter-class)：

```
parser = argparse.ArgumentParser(
    # ... other options ...
    formatter_class=argparse.ArgumentDefaultsHelpFormatter) 
```

引用[文档](http://docs.python.org/library/argparse.html#formatter-class)：

> 另一个可用的格式化程序类`ArgumentDefaultsHelpFormatter`，将添加有关每个参数的默认值的信息。

请注意，**这只适用于定义了帮助文本的参数**；如果参数没有`help`值，则没有帮助消息将有关默认值的信息添加*到*.

然后，您的扫描时间选项的确切输出变为：

```
 --scan-time [SCAN_TIME]
                        Wait SCAN-TIME seconds between status checks.
                        (default: 5) 
```

* * *

## 回答 #2

> 赞同：247
> 
> 时间：2013-08-29T10:01:22.850

添加`'%(default)s'`到帮助参数以控制显示的内容。

```
parser.add_argument("--type", default="toto", choices=["toto","titi"],
                              help = "type (default: %(default)s)") 
```

**备注**：

*   它是+ 括号中的默认值 + 格式字符（不要与我们在或 f-string中找到的`%`大括号混淆）`{default}``format`
*   不要忘记在末尾添加类型表示的“说明符字符”（即`s`字符串、`d`整数、`f`浮点数等）
*   您还可以添加通常的“printf”格式说明符（如浮点数、前导零等）

您可以参考[printf 文档](https://www.cplusplus.com/reference/cstdio/printf/)了解更多详细信息。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-08-26T10:40:38.027

**包装类**

这是迄今为止我发现的最可靠和最干燥的方法，既可以显示默认值，又可以同时使用另一种格式化程序`argparse.RawTextHelpFormatter`：

```
#!/usr/bin/env python3

import argparse

class ArgumentParserWithDefaults(argparse.ArgumentParser):
    def add_argument(self, *args, help=None, default=None, **kwargs):
        if help is not None:
            kwargs['help'] = help
        if default is not None and args[0] != '-h':
            kwargs['default'] = default
            if help is not None:
                kwargs['help'] += ' Default: {}'.format(default)
        super().add_argument(*args, **kwargs)

parser = ArgumentParserWithDefaults(
    formatter_class=argparse.RawTextHelpFormatter
)
parser.add_argument('-a', default=13, help='''my help
for a''')
parser.add_argument('-b', default=42, help='''my help
for b''')
parser.add_argument('--no-default', help='''my help
for no-default''')
parser.add_argument('--no-help', default=101)

parser.print_help()
print()
print(parser.parse_args()) 
```

输出：

```
usage: main.py [-h] [-a A] [-b B] [--no-default NO_DEFAULT]
               [--no-help NO_HELP]

optional arguments:
  -h, --help            show this help message and exit
  -a A                  my help
                        for a Default: 13
  -b B                  my help
                        for b Default: 42
  --no-default NO_DEFAULT
                        my help
                        for no-default
  --no-help NO_HELP

Namespace(a=13, b=42, no_default=None, no_help=101) 
```

**`ArgumentDefaultsHelpFormatter`+`RawTextHelpFormatter`多重继承**

多重继承只是工作，但它似乎不是公共API：

```
#!/usr/bin/env python3

import argparse

class RawTextArgumentDefaultsHelpFormatter(
        argparse.ArgumentDefaultsHelpFormatter,
        argparse.RawTextHelpFormatter
    ):
        pass

parser = argparse.ArgumentParser(
    formatter_class=RawTextArgumentDefaultsHelpFormatter
)
parser.add_argument('-a', default=13, help='''my help
for a''')
parser.add_argument('-b', default=42, help='''my help
for b''')
parser.print_help() 
```

输出：

```
usage: a.py [-h] [-a A] [-b B]

optional arguments:
  -h, --help  show this help message and exit
  -a A        my help
              for a (default: 13)
  -b B        my help
              for b (default: 42) 
```

它之所以有效，是因为我们可以从源代码[https://github.com/python/cpython/blob/v3.6.5/Lib/argparse.py#L648](https://github.com/python/cpython/blob/v3.6.5/Lib/argparse.py#L648)中看到：

*   `RawTextHelpFormatter`工具`_split_lines`
*   `ArgumentDefaultsHelpFormatter`工具`_get_help_string`

所以我们可以猜测它们会很好地协同工作。

但是，这似乎不是公共 API， 的方法也不是`formatter_class`，所以我认为目前没有公共 API 方法可以做到这一点。`argparse`文档字符串 说：

> 此模块中的所有其他类都被视为实现细节。（另请注意，HelpFormatter 和 RawDescriptionHelpFormatter 仅被视为作为对象名称公开——格式化程序对象的 API 仍被视为实现细节。）

另请参阅：[自定义 argparse 帮助消息](https://stackoverflow.com/questions/35847084/customize-argparse-help-message/35848313)

在 Python 3.6.5 上测试。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-04-22T06:43:52.017

能够在帮助输出中*自动*包含`default`值通常很有用，但仅限于那些*明确*指定的值（使用`default=..`）。已经提到的方法在这方面存在一些缺点：

*   该`ArgumentDefaultsHelpFormatter` [方法](https://stackoverflow.com/a/12151325)`(default: None)`会为每个未明确指定默认值的参数以及`(default: False)`“标志”( `action='store_true'`)打印输出。这会使帮助输出变得混乱。为避免这种情况，`default=argparse.SUPPRESS`需要为每个此类参数手动添加。

*   该`'%(default)s'` [方法](https://stackoverflow.com/a/18507871)需要手动将其添加到我们*确实*希望在帮助中打印的所有参数`help`字符串中。

 *这两种方法最终都需要手动干预才能仅打印出“正确”的默认值。自动执行此操作的一种方法是增加`ArgumentDefaultsHelpFormatter`忽略`None`s 和`False`s 默认值：

```
class ExplicitDefaultsHelpFormatter(argparse.ArgumentDefaultsHelpFormatter):
    def _get_help_string(self, action):
        if action.default in (None, False):
            return action.help
        return super()._get_help_string(action) 
```

用它代替`ArgumentDefaultsHelpFormatter`：

```
parser = argparse.ArgumentParser(
        formatter_class=ExplicitDefaultsHelpFormatter
                ) 
```

这将仅打印`default`帮助输出中明确设置的值。

注意：如果参数的默认值显式设置为`None`or `False`，则不会在此类的帮助中显示；如果您希望在帮助输出中添加该参数的`%(default)s`字符串。`help`*

# c# - 混淆器 .NET 混淆器。安全吗？

> ID：12151308
> 
> 赞同：9
> 
> 时间：2012-08-28T00:25:22.847
> 
> 标签：c#, .net, obfuscation, decompiling

我目前正在开发一个应用程序，在该应用程序中，防止用户反编译代码非常重要。现在，我知道如果由经验丰富的程序员执行，大多数 .exe 文件都是可反编译的。然而，我的目标只是保护它不受具有基本编程知识的“普通”用户的影响。

我遇到了几个混淆器，我现在使用的一个是 Codeplex Confuser，你可以在[这里](http://confuser.codeplex.com/)找到它。由于我不是混淆专家，或者在任何高级编程方面都有经验，所以我问你是否知道这个混淆器的安全性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T00:34:47.930

根据我的经验，Confuser 是目前最难逆转的（免费）混淆器之一。至少通过一键式工具。

就我个人而言，我遇到了一些问题，即使用最大设置时出现一些误报，以及一些导致我的 .exe 无法运行的情况。

请记住，无论它是否比其他免费替代品更难逆转，如果有人花一点时间，他仍然很有可能这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T00:47:01.983

使用混淆器会使反编译代码变得更加困难，但它仍然不安全。

保证你的代码安全的唯一方法是让它不落入用户手中。您可以将关键代码放在 Web 服务中，并让应用程序调用它。除非用户实际上可以破解服务器并获取代码，否则反编译是完全安全的。

# wordpress - Redirecting from Desktop to Mobile site

> ID：12151311
> 
> 赞同：0
> 
> 时间：2012-08-28T00:25:49.740
> 
> 标签：wordpress, redirect, mobile

I'm running a very simple, brochure website on Wordpress and my client needs a mobile website.

I want to redirect mobile visitors from the desktop website to the mobile website. I do not have the technical knowlegde to re-design and re-develop my CMS, so I am planning on making a new subdirectory with mobile-optimized HTML pages and working from there.

Any thoughts on how to make a device-sensitive redirect?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:29:41.160

Have you considered [**Media Queries**](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/) ?

In that case you just editing the existing CSS file and don't need to bother with subfolders, mobile detection, redirects etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T00:31:06.603

From a simple web search, I turned up this result: [http://css-tricks.com/snippets/javascript/redirect-mobile-devices/](http://css-tricks.com/snippets/javascript/redirect-mobile-devices/) for a JavaScript implementation. It sets `document.location` to a different url if the width of the screen is less than 699.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T00:33:52.067

我使用这个 PHP 语句来检查移动浏览器。我怀疑我所有的浏览器都有这个功能，但这是一个开始。您似乎拥有制作基本主题的专业知识，所以这可能是您想要采取的路线。

```
if (preg_match("/(mobile|webos|opera mini)/i", $_SERVER['HTTP_USER_AGENT'])) {
    // Load mobile skin
} else {
    // Load desktop skin
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T00:43:03.550

我正在为 php 站点使用 mobileesp，它工作得恰到好处，看来现在也可以使用 javascript 来做同样的事情。显然该网站有样品。希望这可以帮助：

[http://blog.mobileesp.com/?cat=8](http://blog.mobileesp.com/?cat=8)

# ios - Open a file without extension with QLPreviewController or UIDocumentInteractionController

> ID：12151314
> 
> 赞同：4
> 
> 时间：2012-08-28T00:26:32.987
> 
> 标签：ios, uidocumentinteraction, qlpreviewcontroller

Is there a way to open a file with QLPreviewController or UIDocumentInteractionController, knowing its UTI, but without a file extension in the NSURL? Thanks for your help!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T13:27:17.317

我刚刚找到了另一种处理它的方法。实现具有以下属性的项目：

```
@interface QuickLookPreviewItem : NSObject <QLPreviewItem>
@property (nonatomic, strong) NSURL *url;
@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) NSString *uti;
@end

@implementation QuickLookPreviewItem
- (NSString *)previewItemTitle { return self.title; }
- (NSURL *)previewItemURL { return self.url; }
- (NSString *)previewItemContentType { return self.uti; }
@end 
```

尽管尚不清楚它在文档中是否以这种方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:23:59.787

在快速查看的同时将文件扩展名添加到路径:) 推送之前 => 在 pop 之后添加扩展名 => 再次删除它

# ruby-on-rails-3 - Mongoid code not working in production

> ID：12151316
> 
> 赞同：0
> 
> 时间：2012-08-28T00:26:58.260
> 
> 标签：ruby-on-rails-3, mongodb, mongoid

The following code works in development like a charm, but in production no update is ever issued to the database. Basically I am trying to update a collection element that is nested 3 levels deep ..

```
def set_collection_value                                                                                                                                                                          
    @article = Article.find(params[:id])                                                                                                                                                            
    @article.highlights.items.find(params[:item_id])                                                                                                                                                              
    item.update_attributes(params[:values])                                                                                                                                                         

    render :json => item                                                                                                                                                                            
  end 
```

The model Article in question looks like this:

```
class Article
  include Mongoid::Document

  embeds_one :highlight, class_name: 'Highlight'
end 
```

`highlight.rb`

```
class Highlight
  includes Mongoid::Document
  embedded_in :article

  embeds_many :items, class_name: 'HighlightElement'
end 
```

`highlight_item.rb`

```
class HighlightElement                                                                                                                                                                              
  include Mongoid::Document                                                                                                                                                                         

  embedded_in :highlight                                                                                                                                                                            

  field :title, type: String                                                                                                                                                                        
  field :teaser, type: String                                                                                                                                                                       
  field :image, type: String                                                                                                                                                                        
  field :body, type: String                                                                                                                                                                         

  attr_accessible :title, :teaser, :image, :body                                                                                                                                                    
end 
```

The funny thing here is that even when I run webrick locally in production mode it works like a charm. Only once I deploy to my ubuntu server running mongodb v1.2.2 the above code silently does nothing.

I even went as far as to copy my `environments/development.rb` onto my `environments/production.rb` hoping to fix the issue.. but to no avail..

Any ideas? I am running rails 3.2.7 with mongoid 3.0.3

It would also be helpful if someone could point out how to make the moped/mongoid debug log messages show up in production.log. I configured Debugging [as described in the logs](http://mongoid.org/en/mongoid/docs/installation.html#logging) - but these debug messages are only visible when running rails s - not in `production.log`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:31:07.063

自己解决了。。

原来来自官方 Ubuntu 存储库源的 Mongodb 1.2.2 是问题所在。更新到 2.0.5 后一切正常。

# events - Facebook graph api Events and Venue Information，有时它只返回在已知地点创建事件时的地点ID

> ID：12151317
> 
> 赞同：1
> 
> 时间：2012-08-28T00:27:01.020
> 
> 标签：events, facebook-graph-api, appcelerator

我在 Titanium 中创建了一个应用程序，它使用 Facebook Graph API 来获取所有用户事件，但是，场地信息，它只给我带来了，在我对这个领域非常具体之后，有时，很多有时，当事件在已知位置创建时，它只带来场地 ID，当我查询场地时（通过[http://graph.facebook.com](http://graph.facebook.com)），它会给我场地位置详细信息，更重要的是，事物的经纬度。

是否可以在同一个响应中带上场地的信息？

另外，它只带来用户正在参加的活动，有没有办法将推荐给他的活动也显示出来？

```
Ti.Facebook.requestWithGraphPath('me/events?limit=5000&fields=id,owner,name,description,start_time,end_time,location,venue,privacy,updated_time', {}, 'GET', function(e) {
obj = JSON.parse(e.result);
Ti.API.info('Events: '+JSON.stringify(obj));
}}); // Facebook Events 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:16:50.420

> 另外，它只带来用户正在参加的活动，有没有办法将推荐给他的活动也显示出来？

不确定您所说的“推荐”究竟是什么意思……如果您的意思是用户被*邀请参加*的活动，那么您可以使用用户 ID查询[FQL`event_member`表。](https://developers.facebook.com/docs/reference/fql/event_member/)

您可以通过使用从上面的[`event`表格](https://developers.facebook.com/docs/reference/fql/event/)中选择信息来“加入”表格中的信息`WHERE eid IN (SELECT … FROM event_member WHERE …)`

> 是否可以在同一个响应中带上场地的信息？

使用多查询可以做到这一点，类似于这里描述的：[FQL：查询事件表返回场地.name 而不是场地.id](http://facebook.stackoverflow.com/questions/11858973/fql-query-for-event-table-returns-venue-name-instead-of-venue-id/11860360)

# bash - 如何使用 cat 和 awk 将文件中列出的所有文件排入 vlc 播放列表

> ID：12151318
> 
> 赞同：3
> 
> 时间：2012-08-28T00:27:03.127
> 
> 标签：bash, awk, vlc, playlist, cat

我正在尝试将文本文件中列出的所有文件排入 VLC 播放列表。每行都包含一个电影文件的绝对路径。

只需将一个文件添加到播放列表即可完美运行：

```
vlc --playlist-enqueue someMediaFile 
```

我还可以使用 cat 和 awk 为文本文件中列出的每一行执行命令（例如打印），如下所示：

```
cat avis.txt | awk '{print $0}' 
```

...

但结合起来，它不起作用：

```
cat avis.txt | awk '{vlc --playlist-enqueue $0}' 
```

上面的行将文件 avis.txt 的内容逐行打印到标准输出，而 awk 使用管道逐行从那里读取数据。awk 还将用文件中的“n”行替换 $0。因此，由 awk 执行的每个命令都将如下所示，我想：

```
vlc --playlist-enqueue firstLineFromAvis.txt
vlc --playlist-enqueue secondLineFromAvis.txt
...
vlc --playlist-enqueue nLineFromAvis.txt 
```

但这并没有发生。有人可以告诉我我做错了什么吗？我不能像这样使用 awk 执行带有参数的程序吗？

谢谢阅读。

约翰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T00:34:15.507

```
xargs -a avis.txt -I {} vlc --playlist-enqueue {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:30:56.917

```
cat avis.txt | awk '{print "vlc --playlist-enqueue "$0}' > updatedFile.txt 
```

# html - 带有文本移动其他元素的 Div

> ID：12151326
> 
> 赞同：0
> 
> 时间：2012-08-28T00:28:28.057
> 
> 标签：html, css

我的网页上有一组图像。我在图像之前附加了一个 div，它将显示有关照片的一些信息。我移动了 div 以适应我的规格，但问题是图像也向右移动以适应我的文本中的字符数。还应该注意的是，估计每个图像的宽度和高度都涉及 PHP 代码。添加或删除任何标签或类/ID 会弄乱代码。我不知道现在该做什么。

HTML 部分

```
<div id="tube">
  <div class="part_1">
    <div class="text">wed  dfasdfasd  sda asd  sa asd </div>
        <img class="image_section_1"  src="https://encrypted-tbn3.google.com

        /images?q=tbn:ANd9GcRGr-DN5J2NpvVMVBcu-MgRFkN3S5CCpZ-H6OGxDLoNwNrYM9k3HQ" />

    <div class="text">wed  dfasdfasd  sda asd  sa asd </div>
        <img class="image_section_2"  src="https://encrypted-tbn3.google.com

        /images?q=tbn:ANd9GcRGr-DN5J2NpvVMVBcu-MgRFkN3S5CCpZ-H6OGxDLoNwNrYM9k3HQ" />
  </div>
</div> 
```

这是CSS

```
*{border:1px solid grey; padding: 0; margin: 0;}

html { background-color: whitesmoke; height: 100%; width:500%;}

#tube {  height: 100%; margin-top: 50px; padding-left: 10px;}

.part_1 {height: 44%; width: 100%;  }

#tube img {border-radius:5px; padding: 7px; background-color: white; padding-bottom: 

35px; border:1px solid grey; margin: 5px; box-shadow: 1px 1px 3px black;}

.image_section_1 {width: 5.4%; height: 67%;margin-right: 25px;}

.image_section_2 {width: 5.4%; height: 67%;margin-right: 25px;}

.text {display: inline; width: 100px; position: relative; left: 250px; bottom: 25px; 

overflow: hidden;  }*{border:1px solid grey; padding: 0; margin: 0;} 
```

我还创建了一个 jfiddle 示例。如您所见，我希望图像彼此相邻对齐，并且左图像距离左边框只有几个像素。[http://jsfiddle.net/7xxxw/4/](http://jsfiddle.net/7xxxw/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:40:58.447

将图像和文本都放在同一个`<div>`中，并将位置应用到那个`<div>`。在图片后添加文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:10:49.270

这是你要找的吗？

### 演示

[JSFiddle](http://jsfiddle.net/eRLqJ/)

### HTML

```
<div id="tube">
    <div class="part_1">
        <div class="image">
            <img src="https://encrypted-tbn3.google.com/images?q=tbn:ANd9GcRGr-DN5J2NpvVMVBcu-MgRFkN3S5CCpZ-H6OGxDLoNwNrYM9k3HQ">
            <p class="legend">wed  dfasdfasd  sda asd  sa asd</p>
        </div>
    </div>
</div> 
```

### CSS

```
html { background-color: whitesmoke; height: 100%; width:500%;}

#tube {height: 100%; margin-top: 50px; padding-left: 10px;}

.part_1 {height: 44%; width: 100%;  }

.image {
    display: inline-block;
    margin: 5px;
    padding: 7px 7px 35px;
    background-color: white;
    border: 1px solid grey;
    border-radius: 5px;
    box-shadow: 1px 1px 3px black;
    overflow: auto;
    text-align: center;
}

.legend {
    padding: 0;
    margin: 0;
} 
```

# matlab - 可变数量的稀疏矩阵

> ID：12151332
> 
> 赞同：0
> 
> 时间：2012-08-28T00:29:36.853
> 
> 标签：matlab, sparse-matrix

我正在尝试创建可变数量的稀疏矩阵。起初，最好的解决方案似乎是创建一个元胞数组并迭代地向其中添加矩阵，例如以下代码；

```
arr = {};
for i = 1:10
   arr = [arr sparse([],[],[],1000,1000)];
end 
```

给出：

使用 ==> horzcat 尝试转换为未实现的稀疏类型时出错

错误。你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:33:36.787

对您的循环进行少量修改。由于您创建了单元格，因此在每次迭代中在单元格元素中分配一个矩阵：

```
arr = cell(1,10);
for i = 1:10
   arr{i} = sparse([], [], [], 1000, 1000);
end 
```

# java - Determine the size of caption using java AWT

> ID：12151342
> 
> 赞同：0
> 
> 时间：2012-08-28T00:31:04.607
> 
> 标签：java, awt

I am wondering if there is a platform independent way of finding the height of caption of Desktop. As per post [Determine the size of caption windows 7 using java AWT](https://stackoverflow.com/questions/12148683/determine-the-size-of-caption-windows-7-using-java-awt) their exists a platform dependent way for windows. Is there any generic API that can be used to fetch the caption height (which works for MAC, windows, Linux etc).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:40:55.780

您可以尝试使用该`JFame.getInsets()`方法。

它并不完全准确（因为它给出了整个标题栏的高度，而不是标题高度），需要框架可见，但可能是您在不需要`JNI`解决方案的情况下最接近的。

例如，在 Windows 上，`getInsets`给了我`top`30，但`win.frame.captionHeight`给了我 21

[您可以在此处查看](https://stackoverflow.com/questions/222940/how-do-you-get-the-height-of-the-titlebar-using-java-swing)顶部的进一步讨论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:38:04.057

作为解决此用例的方法，我实施了以下步骤：

1.  创建一个大小为 800 x 600 的框架，然后
2.  使用 getInsets() 方法获取标题高度，然后重新调整框架大小。

# css - Bootstrap 中的固定宽度列和流体内容区域

> ID：12151346
> 
> 赞同：13
> 
> 时间：2012-08-28T00:32:22.730
> 
> 标签：css, twitter-bootstrap

我想使用 Twitter Bootstrap 来混合固定宽度和流动宽度的列，[就像这样](http://jsfiddle.net/JANJB/1/)。

如您所见，使用 HTML 和 CSS 非常容易。有没有办法只使用引导程序来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T08:12:44.467

Bootstrap 没有办法阻止流畅的风格。您必须编写新类并在同一个 div 中使用它。

```
<div class="span4 newclass">

.newclass{width:200px!important} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T22:29:11.907

您必须创建一个跨度，其中包含一个绝对位于左侧或右侧的固定宽度列，然后添加另一列，其边距足够宽以适合固定列。

# c++ - C++11 文件系统 (VS2012)

> ID：12151351
> 
> 赞同：10
> 
> 时间：2012-08-28T00:33:35.350
> 
> 标签：c++, visual-c++, c++11, visual-c++-2012, c++-tr2

我在查找 vs2012 附带的标头上的任何文档时遇到了很多麻烦。我看到[这里](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)提到了它，但他们没有提供如何使用它的链接。我真正要寻找的是有关如何使用它的文档，最好使用 Visual Studio 实现。谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-28T00:36:18.200

标`<filesystem>`头不是 C++11 的一部分；它是基于[Boost.Filesystem](http://www.boost.org/libs/filesystem/)库的 C++ TR2 提案。Visual C++ 2012 包括所提议库的实现。

请参阅[MSDN 文档以获取`<filesystem>`标头](http://msdn.microsoft.com/en-us/library/hh874694)和[实现所基于的 C++ TR2 提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n1975.html)（最新的 TR2 提案是1 月的[N3335](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3335.html)，但我不知道发生了什么变化，也不知道 Visual C++ 2012 实现是否包括任何最新的变化）。

# iphone - 可以修改 iPhone 的来电窗口吗？

> ID：12151356
> 
> 赞同：0
> 
> 时间：2012-08-28T00:34:16.993
> 
> 标签：iphone, objective-c, ios5, ios4

我有一个应用程序可以在 sqlite 数据库中存储一些数据，例如电话号码、联系人姓名和其他额外数据，当我接到电话时，可以拦截该事件并在数据库中搜索该电话号码是否存在？如果我在数据库中找到电话号码在传入窗口中显示一些额外的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T00:35:07.017

没有越狱是不可能的。即使有，也可能是一个非常糟糕的主意。

# macos - 修改 NSTextStorage 导致插入点移动到行尾

> ID：12151360
> 
> 赞同：12
> 
> 时间：2012-08-28T00:35:02.447
> 
> 标签：macos, cocoa, nstextview, nstextstorage

我有一个`NSTextView`子类作为它的`NSTextStorage`代表。我正在尝试做两件事：

1.  以某些方式突出显示文本
2.  评估文本，然后将答案附加到文本视图。

我在两种不同的方法中执行此操作，均由`- (void)textStorageWillProcessEditing:(NSNotification *)notification`委托回调调用。

我可以很好地突出显示语法，但是在附加我的答案时，**插入点会跳到行尾**，我真的不知道为什么。我的评估方法如下所示：

```
NSString *result = ..;
NSRange lineRange = [[textStorage string] lineRangeForRange:[self selectedRange]];
NSString *line = [[textStorage string] substringWithRange:lineRange];
line = [self appendResult:result toLine:line]; // appends the answer

[textStorage replaceCharactersInRange:lineRange withString:line]; 
```

这样做会很好地附加我的结果，但问题是，如前所述，插入点会跳到末尾。

我试过了：

1.  将上述调用包装在`[textStorage beginEditing]`和中`-endEditing`。
2.  在更改文本存储之前保存选择范围（即插入点），以便之后我可以重置它，但没有骰子。

我这样做对吗？我正在尝试以最简单的方式做到这一点，而且我也不确定这是否是进行解析/突出显示的理想场所。文档让我相信这一点，但也许这是错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-11-30T08:56:14.987

# 插入点移动的原因

令人惊讶的是，我从来没有找到解释为什么这些建议有效（或无效）的实际解释。

深入研究，插入点移动的**原因**是：（`.editedCharacters`在`NSTextStorageEditedCharacters`ObjC中）影响插入点的位置`NSLayoutManager.processEditing(from:editedMask:...)`。

如果只发送`.editedAttributes`/ `NSTextStorageEditedAttributes`，则不会触摸插入点。这是您在突出显示时想要实现的目标：仅更改属性。

# 为什么突出显示会影响插入点

此处**突出显示**的问题在于，它在单个处理运行期间`NSTextStorage`收集所有调用并组合范围，从用户编辑的更改（例如，键入时的插入）开始，然后形成这个和所有报告的范围的联合。这将导致一个调用 -两个调用中的一个。`edited``addAttributes(_:range:)``NSLayoutManager.processEditing(from:editedMask:...)``editedMask``[.editedCharacters, .editedAttributes]`

因此，您*想*发送`.editedAttributes`突出显示的范围，但最终形成了一个联合`.editedCharacters`。该联合将插入点 waaaaaaaay 移动到它应该去的位置之外。

更改顺序`processEditing`以调用 super first 有效，因为将通知布局管理器完成编辑。但是这种方法仍然会在某些极端情况下中断，导致在您输入非常大的段落时布局无效或滚动视图抖动。

[顺便说一句，这对于挂钩也是如此`NSTextStorageDelegate`](https://stackoverflow.com/questions/45126948/nstextstoragedelegates-textstorage-willprocessediting-range-changeinlength)。

# 在布局真正完成后挂钩回调以触发突出显示而不是`processEditing`

基于 Cocoa 框架固有的原因，唯一能够稳健工作的解决方案是仅执行突出显示`textDidChange(_:)`，即在布局处理真正完成之后。订阅`NSTextDidChangeNotification`工作也一样。

缺点：您必须触发高亮传递以对底层字符串进行编程更改，因为这些不会调用`textDidChange(_:)`回调。

* * *

如果您想更多地了解问题的根源，我将更多我的研究、不同的方法和解决方案的细节放在更长的博客文章中以供参考。这篇文章本身仍然是一个独立的解决方案：http: [//christiantietze.de/posts/2017/11/syntax-highlight-nstextstorage-insertion-point-change/](http://christiantietze.de/posts/2017/11/syntax-highlight-nstextstorage-insertion-point-change/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-23T20:16:21.810

我知道这个问题早已得到回答，但是我遇到了*完全相同*的问题。在我的`NSTextStorage`子类中，我正在执行以下操作：

```
- (void)processEditing {
    //Process self.editedRange and apply styles first
    [super processEditing];
} 
```

但是，正确的做法是：

```
- (void)processEditing {
    [super processEditing];
    //Process self.editedRange and apply styles after calling superclass method
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:45:51.090

这很简单！我最终把这个问题分成两部分。由于`textStorage`委托回调，我仍然会突出显示语法，但现在我会进行评估并附加到其他地方。

我最终都覆盖了`-insertText:`and `-deleteBackwards:`（我可能也想对 做同样的`-deleteForwards:`事情）。两个覆盖都如下所示：

```
- (void)insertText:(id)insertString {
    [super insertText:insertString];
    NSRange selectedRange = [self selectedRange];
    [self doEvaluationAndAppendResult];
    [self setSelectedRange:selectedRange];
} 
```

我最终不得不在这里手动重置插入点。我仍然很想弄清楚为什么这是必要的，但至少这感觉不像是黑客攻击。

# jquery - 使用 jQuery 切换 CSS 旋转

> ID：12151366
> 
> 赞同：1
> 
> 时间：2012-08-28T00:36:33.943
> 
> 标签：jquery, css, toggle

我已经在使用插件来处理 CSS3 属性。单击它时它可以工作，并旋转 45 度，但是当再次单击它以隐藏内容时，它不会向后旋转。关于如何使它工作的任何想法？

```
$("#faq dt").click(function() {
    $(this).next('dd').slideToggle('fast');
if ($(this).next('dd').is(':visible')) {
 $(this).children('span').transition({ rotate: '45deg' });
 }
else {
 $(this).children('span').transition({ rotate: '-45deg' });
 }
}); 
```

您可以在此处查看现场直播：[http ://www.revival.tv/lastdays/](http://www.revival.tv/lastdays/)

工作片段：

```
$("#faq dt").click(function() {
$(this).next('dd').slideToggle('fast', function() {
    if ($(this).is(':visible')) {
         $(this).prev('dt').children('span').transition({ rotate: '45deg' });
    } else {
         $(this).prev('dt').children('span').transition({ rotate: '0deg' });
    }
 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:56:22.227

就像这样。我所知道的是，当您触发`slideToggle`时`dd`，`dd`在切换动画结束之前仍然可见。`dd`因此，您应该在动画之后作为回调函数判断是否可见。

文档在[这里](http://api.jquery.com/slideToggle/)

```
$("#faq dt").click(function() {
    $(this).next('dd').slideToggle('fast', function() {
        if ($(this).is(':visible')) {
             alert('1');
        } else {
             alert('2');
        }
    });
}); 
```

**编辑**

有时，元素选择是一个问题。我只是将它们替换为`alert('1') and alert('2')`. 我希望你能抓住重点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:51:02.053

你为什么不把旋转放在一个类上，然后用javascript添加和删除这个类，让它来回滑动？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T01:11:12.663

这是一个快速修复：

```
$("#faq dt").click(function() {
    $(this).next('dd').slideToggle('fast');

    if (!$(this).next('dd').hasClass('collapsed')) {
        $(this).children('span').transition({
            rotate: '45deg'
        });
        $(this).next('dd').addClass('collapsed');
    }
    else {
        $(this).children('span').transition({
            rotate: '0deg'
        });
        $(this).next('dd').removeClass('collapsed');
    }
});​ 
```

你可以看到它在这里工作：http: [//jsfiddle.net/crisboot/6Aj9e/](http://jsfiddle.net/crisboot/6Aj9e/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-28T00:42:01.783

这是基本旋转功能的[快速操作。](http://jsfiddle.net/fAXn7/)实施我留给你:)

# ocaml - 升级ocsigen错误

> ID：12151368
> 
> 赞同：1
> 
> 时间：2012-08-28T00:36:48.930
> 
> 标签：ocaml, ocsigen

我想在我的 freebsd 盒子中将 ocsigen 升级到 2.1。

```
$pkg_info | grep -i ocsigen
ocsigen-1.1.0_1     Web programming framework for OCaml

$cat /usr/ports/www/ocsigen/Makefile | grep -i version
POPORTVERSION=    2.1

$sudo pormaster ocsigen
...
===>  Building for ocaml-tyxml-2.1
gmagmake: *** no rule to create “files/META.in” needed by “files/META”。 Stop
StoStop in /usr/ports/textproc/ocaml-tyxml.
...
===>>> You can restart from the point of failure with this command line
porportmaster <flags> www/ocsigen textproc/ocaml-tyxml 
```

也许这是一个简单的错误，但我无法自己修复它。

真挚地！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:44:35.290

您现在应该使用 OPAM，这是用于管理 OCaml 包的源代码分发的“标准”工具。OPAM 可在此处获得：

[http://opam.ocamlpro.com/](http://opam.ocamlpro.com/)

# java - 代理。思考过程。我怎么能杀了他们？

> ID：12151370
> 
> 赞同：0
> 
> 时间：2012-08-28T00:37:15.960
> 
> 标签：java, exception, proxy, bufferedreader

有时会通过代理服务器和读取我的程序的舞会缓冲区内容来思考更多时间......直到我关闭它们。如果服务器没有任何答案，如何设置程序代码从几秒钟开始获取另一台服务器？

```
URL url = new URL(linkCar);
String your_proxy_host = new String(proxys.getValueAt(xProxy, 1).toString());
int your_proxy_port = Integer.parseInt(proxys.getValueAt(xProxy, 2).toString());
Proxy proxy = null;
//  System.out.println(proxys.getValueAt(xProxy, 3).toString());
//  if (proxys.getValueAt(xProxy, 3).toString().indexOf("HTTP") > 0)
//  {
proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(your_proxy_host, your_proxy_port));
//  } else {
//  proxy = new Proxy(Proxy.Type.SOCKS, new InetSocketAddress(your_proxy_host, your_proxy_port));
//  }

HttpURLConnection connection = (HttpURLConnection)url.openConnection(proxy);
connection.setConnectTimeout(1000);
connection.connect();

String line = null;
StringBuffer buffer_page = new StringBuffer();
BufferedReader buffer_input = new BufferedReader(new InputStreamReader(connection.getInputStream(),"cp1251")); 
int cc = 0;

//this is thinking place!!!
while ((line = buffer_input.readLine()) != null && cc < 7000) {
   buffer_page.append(line);
   cc++;
}

doc = Jsoup.parse(String.valueOf(buffer_page));
connection.disconnect(); 
```

我尝试使用计数器，但它不起作用......我可以使用什么异常来通过我的控制来捕捉这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:17:25.133

你需要使用[`URLConnection.setReadTimeout`](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#setReadTimeout%28int%29). 从规范来看，

> 将读取超时设置为指定的超时，以毫秒为单位。当与资源建立连接时，非零值指定从输入流读取时的超时。如果在有数据可供读取之前超时到期，则会引发 java.net.SocketTimeoutException。超时为零被解释为无限超时。

如您所见，读取超时将抛出[`SocketTimeoutException`](http://docs.oracle.com/javase/7/docs/api/java/net/SocketTimeoutException.html)，您可以适当地捕捉它，例如

```
try (BufferedReader buffer_input = new BufferedReader(
         new InputStreamReader(connection.getInputStream(), "cp1251"))) {
  String line;
  while ((line = buffer_input.readLine()) != null) {
    buffer_page.append(line);
  }
} catch (SocketTimeoutException ex) {
  /* handle time-out */
} 
```

`readLine`请注意，在使用上述方法时需要小心——这`\r`会`\n`从输入中删除所有内容。

# c# - 以编程方式创建 SQL Server CE 4.0 数据库并在 C# 中添加架构？

> ID：12151372
> 
> 赞同：1
> 
> 时间：2012-08-28T00:37:31.883
> 
> 标签：c#, schema, sql-server-ce, database-schema

我正在学习使用 SQL Server CE 数据库作为我的应用程序的存储介质。我目前一直在将数据存储在文本和 xml 文件中，但我认为我应该转向更适合我的项目的东西，因为文本文件变得有点混乱。

我现在已经学会了如何在 C# 中以编程方式创建 SQL Server CE 4.0 数据库文件，但是有没有办法以编程方式将已经构建的模式添加到 C# 中新创建的数据库文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:41:49.203

我想，这取决于您使用什么方法来处理数据库。如果 Linq to Sql 可用（例如，您没有使用 .Net Compact Framework），您可以通过以下代码创建数据库：

```
using (MyDataContext dc = new MyDataContext("Data Source=\"test.sdf\""))
{
    dc.CreateDatabase();
} 
```

代替

```
SqlCeEngine en = new SqlCeEngine("Data Source=\"test.sdf\"");
en.CreateDatabase(); 
```

Linq DataContext 自动创建数据库模式。

# javascript - 延迟加载：如何使用 jquery 创建延迟加载 html 页面

> ID：12151373
> 
> 赞同：1
> 
> 时间：2012-08-28T00:37:48.450
> 
> 标签：javascript, jquery, html, lazy-loading

我希望有一个页面，只有当它通过滚动到达该部分时才加载内容，就像 pinterest 网站正在做的那样。

实现它的设计是什么，或者是否有插件可以做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T01:41:37.123

```
$(window).on( "scroll" , function() {

     var $document = $(document);
     var $window = $(this);

     if( $document.scrollTop() >= $document.height() - $window.height() - 400 ) {
         // do something
     }

 }); 
```

其中 400 是您从页面底部的偏移量。有插件可以做到这一点，但这是一些简单的代码。我推荐使用 underscorejs 来限制这个函数，因为这个函数会在每次滚动顶部改变时触发。因此，对于每个像素，它都会触发。通常我将其限制为每秒仅运行 60 帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:08:11.700

如果你想尝试一下，有一个用于 jQuery 的延迟加载插件：

[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

# mysql - mysql 复合 if 列来自复合值？

> ID：12151375
> 
> 赞同：0
> 
> 时间：2012-08-28T00:38:01.117
> 
> 标签：mysql, if-statement, composite

我需要在查询结果中添加一个额外的列，

该列需要称为百分比，如果`col1 == 0`则应`percent`包含`NIS`else`percent`应包含`ceil(col2 / col1 * 100)`

所以我相信以下应该有效：

`IF(col1 = 0, 'NIS', ceil(col2 / col1 * 100)) as percent`

但是我遇到了一个问题，因为 col1 和 col2 也是复合的。

```
COUNT(distinct i.id) as col1
COUNT(distinct q.id) as col2 
```

所以我受到打击

> “字段列表”中的未知列“col1”

我可以解决这个问题
`IF(COUNT(distinct i.id) = 0, 'NIS', ceil(COUNT(distinct q.id) / COUNT(distinct i.id) * 100)) as percent`

但这对我来说似乎是一堆额外的处理，肯定有更好的方法吗？

## 完整查询

```
SELECT 
  `t`.*,
  `r`.`name` AS region_name,
  GROUP_CONCAT(DISTINCT p.ptype_id SEPARATOR "|") AS ptype_ids,
  COUNT(DISTINCT q.id) AS quoted,
  COUNT(DISTINCT i.id) AS intended,
  COUNT(DISTINCT qa.id) AS awarded,
  IF(
    intended = 0,
    `"NIS"`,
    CEIL(quoted / intended * 100)
  ) AS percent 
FROM
  (`tradesmen` t) 
  LEFT JOIN `regions` r 
    ON `r`.`id` = `t`.`region_id` 
  LEFT JOIN `quotes` q 
    ON `t`.`id` = `q`.`tradesman_id` 
  LEFT JOIN `quote_intentions` i 
    ON `t`.`id` = `i`.`tradesman_id` 
  LEFT JOIN `quotes` qa 
    ON `q`.`tradesman_id` = `qa`.`tradesman_id` 
    AND qa.accepted = 1 
  LEFT JOIN `ptypes_tradesmen` p 
    ON `p`.`tradesman_id` = `t`.`id` 
GROUP BY `t`.`id` 
LIMIT 20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:56:22.083

# node.js - MongoDB：mongos 进程、node-mongodb-native、connect-session-mongo

> ID：12151376
> 
> 赞同：1
> 
> 时间：2012-08-28T00:38:03.503
> 
> 标签：node.js, mongodb, connect, sharding

我将*node-mongodb-native*驱动程序与[connect-session-mongo](https://github.com/bartt/connect-session-mongo)一起使用。当我将 connect-session-mongo 与 Mongos 一起使用时，它会在 connect-session-mongo 的 set 方法中引发错误：

```
[Error: no open connections] 
```

如果我注释掉 connect-session-mongo 代码，它似乎工作得很好。还有其他人将这两者与[分片](http://mongodb.github.com/node-mongodb-native/driver-articles/anintroductionto1_1and2_2.html#mongos)一起使用吗？

仅使用副本集就可以了，但是当我们在测试实例上设置分片时，这简直就是一场噩梦。

任何想法如何让他们玩得很好？我应该为每个运行第二个 mongos 进程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:10:42.540

你在哪里调用 db.open？我有一种感觉，在启动您的应用程序之前，您不会等待 db.open 解决。您可以通过在 db.open 回调中调用 app.listen 来解决此问题。以下内容对我有用：

```
var app = require('express').createServer(),
    mongo = require('mongodb'),
    db = new mongo.Db('dbname', new mongo.Server('localhost', 27017, { autoreconnect: true })),
    MongoSessionStore = require('connect-mongodb');

app.configure(function() {
    // ...
    app.use(express.session({ secret: "supersecret", store: new MongoSessionStore({url: 'localhost'}) }));
    // ...
});

app.get('/', route.index);
// etc...

db.open(function(err){
    if(err) throw err;

    app.listen(3000);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T22:23:43.743

在 Node.JS Mongo 驱动程序更新 1.1.5 中修复。

# mingw - Eclipse 不会编译 HelloWorld

> ID：12151380
> 
> 赞同：0
> 
> 时间：2012-08-28T00:39:00.343
> 
> 标签：mingw, eclipse-cdt

在我手动将 C:\MinGW\bin 添加到路径之前，hello world 项目示例不会编译。现在它可以找到 gcc 但现在它给了我这个相当神秘的信息：

```
sh -c "autoreconf -i" 
```

如果我可以编译 HelloWorld，我对这些工具的看法可能会有所改善。这并不是一个大问题。

该`sh -c "autoreconf -i"`消息由 Eclipse 显示为错误。在我看来，它更像是一段脚本，令人费解。不，等等，这是一条两行消息，Eclipse 隐藏了实际的错误消息，即

```
Cannot run program "sh": Launching failed 
```

这至少看起来像一条错误消息。大概“sh”是一个shell。我想这意味着我必须猜测它是什么以及它在哪里，并将其添加到路径中。

* * *

如果您有这样的经历，[请阅读此链接，一切都会变得清晰，包括如何应对](http://www.eclipse.org/forums/index.php/mv/msg/367218/895233/#msg_895233)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:50:32.680

Juno Eclipse UI 中的一个故障会导致新手误入歧途。如果您有像我这样的经历，[请阅读本文](http://www.eclipse.org/forums/index.php/mv/msg/367218/895233/#msg_895233)。

* * *

十年后，VS Code 成为 Eclipse 试图成为的一切，入门门槛低得多。我认为它还具有更好的用户体验，它的迅速普及表明这并不完全是主观的。

诸如构建环境之类的事情仍然很麻烦，因为与 CLI 及其所需*的先验*知识有关的原因比其他任何事情都多。在上面的示例中，Eclipse 通过隐藏一半的消息使情况变得更糟，但是您仍然必须知道消息的含义以及如何解决它。Eclipse 设计者可能会说他们没想到 CLI 工具链消息会嵌入换行符，但这很可能我对这种疏忽并不同情。

# node.js - Heroku，node.js：停止在每次部署时下载 node_modules

> ID：12151384
> 
> 赞同：1
> 
> 时间：2012-08-28T00:40:06.027
> 
> 标签：node.js, heroku, node-modules

目前，每次我部署我的应用程序时，Heroku 都会重新安装所有依赖项。如果新版本的依赖项有错误或与我当前的设置不兼容，它可能会破坏某些东西。有没有办法告诉 heroku 只有在我更改 package.js 中的版本时才下载依赖项（就像他们在 dotCloud 上做的那样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:44:07.537

除非 Heroku 中存在错误，否则阻止包的方法是在`package.json`. 看看[node.js 页面](https://devcenter.heroku.com/articles/nodejs#declare-dependencies-with-npm)。

样品`package.json`：

```
{
  "name": "appname",
  "version": "0.0.1",
  "dependencies": {
    "express": "2.5.8"
  },
  "engines": {
    "node": "0.8.x",
    "npm": "1.1.x"
  }
} 
```

# r - 删除数据框中的特定行

> ID：12151386
> 
> 赞同：4
> 
> 时间：2012-08-28T00:40:19.773
> 
> 标签：r, dataframe

我有一个看起来像这样的数据框：

```
 type   created_at repository_name
1        IssuesEvent 3/11/12 6:48       bootstrap
2        IssuesEvent 3/11/12 6:48       bootstrap
3        IssuesEvent 3/11/12 6:48       bootstrap
4        IssuesEvent 3/11/12 6:52       bootstrap
5        IssuesEvent 3/11/12 6:52       bootstrap
6        IssuesEvent 3/11/12 6:52       bootstrap
7  IssueCommentEvent 3/11/12 7:03       bootstrap
8  IssueCommentEvent 3/11/12 7:03       bootstrap
9  IssueCommentEvent 3/11/12 7:03       bootstrap
10       IssuesEvent 3/11/12 7:03       bootstrap
11       IssuesEvent 3/11/12 7:03       bootstrap
12       IssuesEvent 3/11/12 7:03       bootstrap
13        WatchEvent 3/11/12 7:15       bootstrap
14        WatchEvent 3/11/12 7:15       bootstrap
15        WatchEvent 3/11/12 7:15       bootstrap
16        WatchEvent 3/11/12 7:18        hogan.js
17        WatchEvent 3/11/12 7:18        hogan.js
18        WatchEvent 3/11/12 7:18        hogan.js
19        WatchEvent 3/11/12 7:19       bootstrap 
```

这是一个 dput()：

```
structure(list(type = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 1L, 
1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("IssueCommentEvent", 
"IssuesEvent", "WatchEvent"), class = "factor"), created_at = structure(c(1L, 
1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 5L, 5L, 
5L, 6L), .Label = c("3/11/12 6:48", "3/11/12 6:52", "3/11/12 7:03", 
"3/11/12 7:15", "3/11/12 7:18", "3/11/12 7:19"), class = "factor"), 
    repository_name = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 1L), .Label = c("bootstrap", 
    "hogan.js"), class = "factor")), .Names = c("type", "created_at", 
"repository_name"), class = "data.frame", row.names = c(NA, -19L
)) 
```

我想删除“类型”列中包含字符串“WatchEvent”的每一行。如何在 R 中完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T00:45:42.043

```
df <- structure(list(type = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 1L, 
1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("IssueCommentEvent", 
"IssuesEvent", "WatchEvent"), class = "factor"), created_at = structure(c(1L, 
1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 5L, 5L, 
5L, 6L), .Label = c("3/11/12 6:48", "3/11/12 6:52", "3/11/12 7:03", 
"3/11/12 7:15", "3/11/12 7:18", "3/11/12 7:19"), class = "factor"), 
    repository_name = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 1L), .Label = c("bootstrap", 
    "hogan.js"), class = "factor")), .Names = c("type", "created_at", 
"repository_name"), class = "data.frame", row.names = c(NA, -19L
))

df_a <- df[df$type!="WatchEvent",]

#                 type   created_at repository_name
# 1        IssuesEvent 3/11/12 6:48       bootstrap
# 2        IssuesEvent 3/11/12 6:48       bootstrap
# 3        IssuesEvent 3/11/12 6:48       bootstrap
# 4        IssuesEvent 3/11/12 6:52       bootstrap
# 5        IssuesEvent 3/11/12 6:52       bootstrap
# 6        IssuesEvent 3/11/12 6:52       bootstrap
# 7  IssueCommentEvent 3/11/12 7:03       bootstrap
# 8  IssueCommentEvent 3/11/12 7:03       bootstrap
# 9  IssueCommentEvent 3/11/12 7:03       bootstrap
# 10       IssuesEvent 3/11/12 7:03       bootstrap
# 11       IssuesEvent 3/11/12 7:03       bootstrap
# 12       IssuesEvent 3/11/12 7:03       bootstrap 
```

删除行是与任何 csv 相关的单独过程：

```
write.csv(df_a, "no_WatchEvent.csv", row.names=FALSE) 
```

# javascript - Javascript 正则表达式搜索日历事件

> ID：12151387
> 
> 赞同：2
> 
> 时间：2012-08-28T00:40:35.340
> 
> 标签：javascript, regex

我有一种情况，我需要造句并选中某些框和/或在文本输入中输入数字。

盒子就像..

*   每天
*   每周
*   每个月

所以我不确定使用不同的正则表达式对象来搜索不同的情况是否会更好，或者我是否应该尝试制作 1 个大的正则表达式对象然后切换/大小写结果。

以下是字符串可以是什么的一些示例：

*   每天
*   每个工作日
*   每周日、周一、周三
*   每 3 周的星期日、星期五
*   每个月的第一个星期日
*   每 2 个月的第 1 天
*   每年 1 月 1 日

当涉及到正则表达式时，我可以做得很好，但这不合时宜，我不确定我是否应该使用不同的正则表达式对象或尝试做一个大对象。谢谢你的帮助

看起来 /\w+\s?(\d+?)?\s(\w+)/ 负责“每周”、“每天”、“每月”、“每年”、“每 10 天” ， ETC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T01:03:22.920

我认为正则表达式在这里不会对您有太大帮助。他们可能能够进行一些非常简单的匹配，但是您在这里真正看到的是语法解析问题。您可能想阅读旨在表达抽象语法的语言，例如[扩展巴科斯-瑙尔形式](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)(EBNF)。这听起来很吓人，但实际上并不难掌握。一旦你能够用一种正式的语言来描述你的语法，解析它就会变得容易得多（至少，你有一个关于什么样的输入是有效的规范）。例如，您的问题可能有以下 EBNF：

```
expression = "every" time-unit|time-unit-list|composite-time-unit
time-unit = { ordinal } "day" | "weekday"
ordinal = "first" | "second" | "third" | ... 
```

等等。这不是一项微不足道的工作；解析一个英语句子，即使是这样一个相当严格的句子也可能涉及很多。然而，这是一种成熟而严格的方法。

一旦你定义了你的语法，你就可以为它构建一个解析器。这是寻找*终端*（如“每个”）然后将它们与规则匹配的问题。例如，您可能有如下内容（伪代码）：

```
words = split(/\s*/,lowercase(input))
if( words[0] == "every" ) {
  switch( words[1] ) {
    case "first":
    case "second":
    case "third":
    ...
      parseTimeUnit(words);
      break;
    case "day":
      everyDay = true;
      break; 
    ...
  }
} 
```

根据语法的复杂性，您可能会考虑使用[Yacc](http://en.wikipedia.org/wiki/Yacc)之类的东西自动生成解析器。

您已经解决了一大堆问题，但解决问题是有益的，祝您好运！

**更新**：我只建议使用 Yacc，因为它是我所知道的最古老的解析器生成器之一。但是，其中有一百万个，其中很多会为您发出 Javascript。您可以查看[Wikipedia 对解析器生成器的比较](http://en.wikipedia.org/wiki/Comparison_of_parser_generators)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:54:14.020

似乎您要做[的是将字符串解析](http://en.wikipedia.org/wiki/Parsing)为某种数据结构，并且我认为这不是正则表达式的工作（尽管它可能是解决方案的一部分）。

# sql - 计算跨越多个日期范围的记录

> ID：12151389
> 
> 赞同：1
> 
> 时间：2012-08-28T00:40:54.483
> 
> 标签：sql, sql-server, database

```
ACCOUNT   Amount     DATE
1     50        01-2010
1     100       03-2010
1     100       02-2011
2     100       01-2011
2     50        05-2011
2     50        09-2011
3     100       03-2012
3     100       03-2013 
```

是否有一个查询结构可以让我计算跨越当前和过去一年的不同帐户？例如，账户 1 有 2011 年和 2010 年的金额，因此应在 2011 年以下计算一次。账户 2 只有 2011 年的金额，因此不计算在内，而账户 3 有 2013 年和 2012 年的金额，因此计为 1 2013年以下：

```
 2010   2011    2012    2013                
 0      1       0       1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:46:30.543

首先，您需要知道您拥有帐户数据的年份：

```
select account, year(date) as yr
from t
group by account, year(date) 
```

接下来，您需要查看两年是否按顺序排列。您可以在 2012 年以滞后/领先的方式做到这一点。相反，我们将只使用自联接：

```
with ay as (
     select account, year(date) as yr
     from t
     group by account, year(date)
    )
select ay.account, ay.yr
from ay join
     ay ayprev
     on ay.account = ayprev.account and
        ay.yr = ayprev.yr + 1 
```

接下来，如果您想按年份计算帐户数量，只需将其放入聚合中：

```
with ay as (
     select account, year(date) as yr
     from t
     group by account, year(date)
    )
select yr, count(*) as numaccounts
from (select ay.account, ay.yr
      from ay join
           ay ayprev
           on ay.account = ayprev.account and
              ay.yr = ayprev.yr + 1
     ) ayy
group by yr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T00:49:05.897

假设您有一个记录 ID（称为此 ID）

```
SELECT COUNT(*),Year FROM Table t3
INNER JOIN (
   SELECT record_id, Year(t1.Date) as Year FROM Table t1
   INNER JOIN Table t2
   WHERE Year(t1.Date)-1=Year(t2.Date) AND t1.Account == t2.Account
) x ON x.record_id = t3.record_id
GROUP BY Year 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T04:03:57.557

使用下面的查询：

```
SELECT YEAR(T1.Date) AS D, COUNT(*) AS C
FROM YourTable AS T1
INNER JOIN YourTable T2 ON T2.Account = T1.Account AND YEAR(T2)=YEAR(T1)+1
GROUP BY T1.Account, YEAR(T1.Date) 
```

# mysql - 存储和搜索相似的短语

> ID：12151392
> 
> 赞同：2
> 
> 时间：2012-08-28T00:41:12.343
> 
> 标签：mysql, database, database-normalization

假设我想在我的数据库中存储一个项目，例如“访问西班牙”。但是，我将允许用户提交，并且我想跟踪所有希望访问西班牙的用户，但是我希望他们能够输入“访问西班牙”以及“前往西班牙”、“见西班牙”或“游览西班牙”。我正在寻找一种有效的方法来做到这一点。目前我的想法让我沿着这些路线走（简化）：

*   名词
    1.  唯一身份
    2.  名词
    3.  动词 [fk]
*   动词
    1.  唯一身份
    2.  动词
*   同义词
    1.  唯一身份
    2.  动词 [fk]
    3.  代名词

我是不在基地，还是这是最好的方法？我正在寻找性能和易于维护...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:39:56.190

您应该研究一些简单的自然语言处理 (NLP)。

理想情况下，您需要对输入进行规范化，以便您可以搜索具有相同规范化值的用户。

1.  首先标记输入，分离单词。“访问西班牙”将变为（“访问”，“西班牙”）和“
2.  寻找具有等价性的单个词。例如，您可以忽略许多事情的大小写。
3.  使用查表查找更高级的单词等价词，例如“Visit”=>“Tour”、“See”=>“Tour”。使用这个 ("Visit", "Spain") 和 ("See", "Spain") 都会被翻译成 ("Tour", "Spain")
4.  寻找短语等价物。例如“去”=>“访问”。这将使 ("Go", "to", "Spain") 变成 ("Tour", "Spain")。
5.  应用模式匹配。例如 ("Tour" X "and" Y) => ("Tour" X), ("Tour" Y) 可以成为两个单独的项目， ("Tour", "Spain") 和 ("Tour", "France ”）。
6.  应用所有转换后，存储生成的标准化项。

您的工作是定义翻译类别，查找这些翻译的许多实例，然后将它们应用于您的输入。

拥有标准化项目后，您可以搜索具有相同标准化项目的其他用户。

# java - 从 Eclipse 运行 Java Spring 应用程序

> ID：12151395
> 
> 赞同：1
> 
> 时间：2012-08-28T00:42:00.380
> 
> 标签：java, spring

我正在开发一个在 spring 框架上运行的项目，并且需要始终连接到 oracle 数据库。当我想测试一种新方法时，我必须停止我的服务器，重建，启动服务器，然后启动我的应用程序。

我的问题是有什么方法可以运行我的应用程序而不必每次都启动它？我可以不必重新启动服务器，但我试图消除每次启动应用程序。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:02:20.797

您寻求的是集成测试。您需要将您的应用程序分解成单独的部分，并针对 oracle 数据库一点一点地测试它们的功能。这些小部件可以通过某些测试技术进行测试，例如流行的 JUnit。

您需要的所有部分只应取决于数据源和所需的任何其他协作 bean。将您的 bean 定义分开，使它们很小并且仅依赖于很少的 bean，并追溯到数据源 bean。然后，您可以使用 JUnit（或您喜欢的任何测试技术）和 Spring 的测试注释来创建小型应用程序上下文

有关更多信息，请参阅 Spring 参考手册的这一部分：

[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html)

当你有测试时，你实际上并没有运行应用程序——你运行它的一部分来单独验证它的行为。然后，您可以添加测试以一起测试各个部分，最终您对应用程序的信心将会提高。

# c++ - GCC arm-none-eabi (Codesourcery) 和 C++ 异常

> ID：12151397
> 
> 赞同：6
> 
> 时间：2012-08-28T00:42:19.940
> 
> 标签：c++, exception, gcc, arm, codesourcery

我正在使用 Raisonance 的 Ride7/Codesourcery（又名 Sourcery CodeBench Lite）和 STM32F4 板来开发裸机 HMI 平台。

我将在这个系统中使用 C++ 异常，但是我抛出的任何异常都以写入 stderr 的“递归调用终止”错误结束。

重现问题的代码：（main.cpp）

```
int main(void)
{
    try {
        throw 1;
    }
    catch (...) {
        printf("caught");
    }
} 
```

我已经尝试过 Raisonance 和其他来源的解决方案，但没有收到任何可行的帮助。

**潜在问题/解决方案 1：**

我在其他论坛上问过，他们提到我需要在我的启动程序集文件中调用静态结构来初始化展开表（至少我认为他们在谈论），但我不知道如何做到这一点。

**潜在问题/解决方案 2**

我还在 binutils/gas 中发现了一个错误，这可能是我的问题的根源（[http://sourceware.org/bugzilla/show_bug.cgi?id=13449](http://sourceware.org/bugzilla/show_bug.cgi?id=13449)）。我一直在尝试使用此补丁构建我自己的工具链版本，但这正在变成一个自己的项目，并且尚未成功。

***问题***

我是否需要在代码中做一些事情来利用 C++ 异常，或者这可能是工具链中的错误？如果是前者，请详细说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T01:29:41.350

经过一些不必要的说服后，Raisonance 最终通过修改他们的默认链接器脚本解决了问题。发布整个链接器脚本对我来说可能是不合法的，但这是人们需要知道的知识

将此添加到 .text 部分

```
*(.eh_frame) 
```

添加这些部分（根据您在链接描述文件中设置的内存块命名*YourMemory 。我的是**Flash*）

```
.ARM.extab :
{
    *(.ARM.extab* .gnu.linkonce.armextab.*)
} >YourMemory

.ARM :
{
    __exidx_start = .;
    *(.ARM.exidx*)
    __exidx_end = .;
} >YourMemory 
```

确保此行出现在 bss 部分

```
*(.bss*) 
```

在这个任务中，我遇到了以下有用的资源

*   [http://wiki.osdev.org/C%2B%2B_Exception_Support](http://wiki.osdev.org/C++_Exception_Support)
*   [https://docs.blackfin.uclinux.org/doku.php?id=toolchain:bare_metal:link](https://docs.blackfin.uclinux.org/doku.php?id=toolchain%3abare_metal%3alink)
*   [http://gcc.gnu.org/ml/gcc-help/2011-07/msg00112.html](http://gcc.gnu.org/ml/gcc-help/2011-07/msg00112.html)
*   [http://www.airs.com/blog/archives/460](http://www.airs.com/blog/archives/460)

# java - 刽子手图片没有改变

> ID：12151399
> 
> 赞同：2
> 
> 时间：2012-08-28T00:42:35.840
> 
> 标签：java, swing

我正忙于编写一个hangman 应用程序，目前正在检查某些代码是否有效……现在我还没有隐藏单词部分，所以我使用 if 语句作为补充代码来代替该代码：

```
 if(original.indexOf(button.getText())!=-1){
                 JOptionPane.showMessageDialog(null, "Your word does contain" + text );
             }
             else{
                 JOptionPane.showMessageDialog(null, "There is no" + text );
                 error++;
             }
             } 
```

无论如何，当我按下不在单词中的按钮时，它会根据以下内容添加到我的错误中

```
error++; 
```

它只找到单词中的第一个字母。我的一个词是恐龙，当我按 D 时它说“是的，有一个 D”但是当我按 A 时它说“不，没有我”，显然是

有人可以帮忙吗

这是我的完整代码

```
import java.awt.*;
import java.awt.event.*;
import java.util.Arrays;
import javax.swing.*;
import java.io.*;
import java.util.ArrayList;
import java.util.Random;
import java.util.List;

public final class Hangman extends JFrame implements ActionListener{
String original = readWord();
int error = 0;
String imageName;

JButton btnAddWord = new JButton("Add New Word");
JButton btnRestart = new JButton("Restart");
JButton btnHelp = new JButton("Help");
JButton btnExit = new JButton("Exit");

JLabel word = new JLabel(original);

static JPanel panel1 = new JPanel();
static JPanel panel2 = new JPanel();
static JPanel panel3 = new JPanel();
static JPanel panel4 = new JPanel();

public Hangman(){
    Container content =getContentPane();
    content.setLayout(new GridLayout(0,1));

   if(error >= 0) imageName = "hangman1.jpg";
   if(error >= 1) imageName = "hangman2.jpg";
   if(error >= 2) imageName = "hangman3.jpg";
   if(error == 3) imageName = "hangman4.jpg";
   if(error == 4) imageName = "hangman5.jpg";
   if(error == 5) imageName = "hangman6.jpg";
   if(error == 7) imageName = "hangman7.jpg";
    ImageIcon icon = null;
    if(imageName != null){
        icon = new ImageIcon(imageName);
    }
   JLabel image = new JLabel();
   image.setIcon(icon);

   btnAddWord.addActionListener(this);
   btnRestart.addActionListener(this);
   btnHelp.addActionListener(this);
   btnExit.addActionListener(this);

   panel2.add(image);
   panel3.add(word);
   panel4.add(btnAddWord);
   panel4.add(btnRestart);
   panel4.add(btnHelp);
   panel4.add(btnExit);

    for(char i = 'A'; i <= 'Z'; i++){
        String buttonText = new Character(i).toString();
        JButton button = getButton(buttonText);
        panel1.add(button);
    }
}

public JButton getButton(final String text){
   final JButton button = new JButton(text);
    button.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             if(original.indexOf(button.getText())!=-1){
                 JOptionPane.showMessageDialog(null, "Your word does contain " + text );
             }
             else{
                 JOptionPane.showMessageDialog(null, "There is no " + text );
                 error++;
             }
             }
             });
             return button;
}
public String readWord(){
    try{
        BufferedReader reader = new BufferedReader(new FileReader("Words.txt"));
        String line = reader.readLine();
        List<String> words = new ArrayList<String>();
        while(line != null){
            String[] wordsLine = line.split(" ");
            boolean addAll = words.addAll(Arrays.asList(wordsLine));
            line = reader.readLine();
        }
        Random rand = new Random(System.currentTimeMillis());
        String randomWord = words.get(rand.nextInt(words.size()));
        return randomWord;

}catch (Exception e){
    return null;
}
}
public void actionPerformed(ActionEvent e){
    if(e.getSource() == btnAddWord){
        try{
            FileWriter fw = new FileWriter("Words.txt", true);
            PrintWriter pw = new PrintWriter(fw, true);

            String word = JOptionPane.showInputDialog("Please enter a word: ");

            pw.println(word);
            pw.close();
        }
        catch(IOException ie){
            System.out.println("Error Thrown" + ie.getMessage());
        }
    }
    if(e.getSource() == btnRestart){

    }
    if(e.getSource() == btnHelp){
        String message = "The word to guess is represented by a row of dashes, giving the number of letters and category of the word."
               + "\nIf the guessing player suggests a letter which occurs in the word, the other player writes it in all its correct positions."
               + "\nIf the suggested letter does not occur in the word, the other player draws one element of the hangman diagram as a tally mark."
               + "\n"
               + "\nThe game is over when:"
               + "\nThe guessing player completes the word, or guesses the whole word correctly"
               + "\nThe other player completes the diagram";
       JOptionPane.showMessageDialog(null,message, "Help",JOptionPane.INFORMATION_MESSAGE);
    }
    if(e.getSource() == btnExit){
        System.exit(0);
    }
}

public static void main (String [] args){
    Hangman frame = new Hangman();
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400, 600);
    frame.add(panel1, BorderLayout.NORTH);
    frame.add(panel2, BorderLayout.CENTER);
    frame.add(panel3, BorderLayout.SOUTH);
    frame.add(panel4, BorderLayout.SOUTH);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T00:45:45.267

我的第一个猜测是您的文本比较区分大小写。

`"Dinosaur".indexOf("A")`不一样`"Dinosaur".indexOf("a")`

我建议您在比较时将文本转换为普通大小写。

```
original.toLowerCase().indexOf(button.getText().toLowerCase())!=-1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T00:59:54.620

这是因为您没有正确检查从文件中读取的单词是否与`JButton`. 有几种方法可以解决这个问题：

1.  正如@MadProgrammer 所建议的那样。进行几项检查以涵盖小写和大写字符。

2.  `Standardizing``List<String> words`当您从文件中读取时，您的 ie 将所有内容保存在一个案例中。这样您就不必担心检查它是小写还是大写。因此，在这种情况下，您可能需要更改：`String[] wordsLine = line.split(" ");`改为`String[] wordsLine = line.toLowerCase().split(" ");`或`String[] wordsLine = line.toUpperCase().split(" ");`（*取决于您对哪一个感到满意*）。然后你的一次`indexOf()`操作检查看起来很好。

# scala - 如何理解scala中的类参数

> ID：12151402
> 
> 赞同：2
> 
> 时间：2012-08-28T00:43:20.113
> 
> 标签：scala

你如何理解scala中的类参数。编译器是否会将隐式字段添加到类参数的类中。喜欢

```
 class Rational(n:Int, d:Int){
        val num = n
        val den = d
        override def toString = n + "/" + d
    } 
```

Rational 类中是否有 4 个字段（n、d、num、den）？如果不是，我们如何访问 toString 方法中的 n 和 d。这背后的机制是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T01:14:34.907

`n`并且`d`将成为`private`字段，除非它们仅在构造函数中使用，在这种情况下它们会被优化掉。`num`也`den`将是`private`字段，但它们也有`public`访问器。

尝试这个：

```
class Test(a: String) {
  println(a)
} 
```

然后编译运行`javap -private Test`，显示所有类和类成员：

```
public class Test extends java.lang.Object{
    public Test(java.lang.String);
} 
```

然后尝试使用该参数的方法：

```
class Test(a: String) {
  println(a)
  def printa { println(a) }
}

public class Test extends java.lang.Object{
    private final java.lang.String a;        // <- private field
    public void printa();
    public Test(java.lang.String);
} 
```

# wolfram-mathematica - 如何从许多列的较大列表中创建包含较少列的 Mathematica 列表

> ID：12151403
> 
> 赞同：2
> 
> 时间：2012-08-28T00:43:24.253
> 
> 标签：wolfram-mathematica

我有一个列表“data1”：

`{{1, 6, 4.5, 1, 141.793, 2.31634, 27.907}, {2, 7, 4.5, 1, 133.702, 2.28725, 26.7442}, {3, 5, 5, 1, 136.546, 2.33522, 25.5814}, {4, 8, 5, 1, 104.694, 2.27871, 24.4186}}`

我想做的是创建一个只有每个元素的前两列的新表。所以我的新表是：

```
{{1,6},{2,7},{3,5},{4,8}} 
```

我试过了 `data1[[All, 1][All, 2]]`

和其他变体，但我不明白如何捕获所需的字段。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T00:47:36.977

只需将您想要的索引范围或列表作为第二个参数，如下所示：

```
In[71]:= data[[All, {1, 2}]]
Out[71]= {{1, 6}, {2, 7}, {3, 5}, {4, 8}} 
```

# qt - 如何为 QGraphicsScene 设置可访问的名称？

> ID：12151405
> 
> 赞同：0
> 
> 时间：2012-08-28T00:43:54.450
> 
> 标签：qt, mouseclick-event, qgraphicsscene

我正在使用QT。我想为 QGraphicsScene 设置可访问的名称，因为在鼠标单击时我想检查是否已单击女巫图形场景？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:48:43.890

从 QObject（包括 QGraphicsScene）派生的每个类都有以下函数为其设置名称：

```
void setObjectName ( const QString & name ) 
```

您可以使用此函数检索此名称：

```
QString objectName () const 
```

# html-email - 向应用程序成员发送批量电子邮件

> ID：12151411
> 
> 赞同：3
> 
> 时间：2012-08-28T00:44:35.767
> 
> 标签：html-email, bulk, php

我一直在阅读有关向用户群发送大量电子邮件的信息，但我对使用 PHP`mail`函数感到不舒服。它往往过于简单、垃圾邮件和不可靠。

但这引出了我的问题……对于自定义应用程序，我应该使用什么来向潜在的数百人发送电子邮件？...或者`mail`可以使用吗？

我很感激帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T00:46:30.700

我会使用第三方服务。其中有几个。他们确保电子邮件是从列入白名单的 IP 发送的，并且在法律准备条款、隐私政策等方面花费了大量资金，以确保 ISP 能够很好地处理收到的邮件。

如果您只向潜在的*数百*人发送邮件，而不是*数十*万人，那么 PHP`sendmail`可以很好地处理负载。您应该更担心时事通讯的内容和选择退出的难易程度，而不是 PHP 发送电子邮件的能力。对于数百人的小型活动，请查看[MyEmma.com](http://www.myemma.com)作为小型列表解决方案的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T23:34:44.197

您可能正在寻找一个 API 来卸载您的电子邮件调用并让服务为您处理交付。从 PHP 发送大量电子邮件可能会很棘手，因为如果发送速度不够快，您会面临超时的风险，如果您想重新尝试一大批，跟踪已发送的邮件总是很麻烦。

毫不奇怪，有几家公司提供电子邮件 API 服务，使这种事情比自己做要容易得多：

*   [SendGrid](http://sendgrid.com/)（[PHP 示例](http://docs.sendgrid.com/documentation/api/smtp-api/php-example/)）
*   来自[MailChimp的](http://mailchimp.com)[Mandrill](http://mandrill.com/)（[PHP 包）](http://packagist.org/packages/mandrill/mandrill)
*   [邮戳](http://postmarkapp.com/)（[PHP 库](http://developer.postmarkapp.com/developer-libs.html#php-5)）
*   [PostageApp](http://postageapp.com/)（[PHP 示例](http://help.postageapp.com/kb/quick-start-guides/php)）
*   [MailGun](http://mailgun.com/)（[PHP 示例](https://github.com/aysark/mailgun.php)）

虽然我是[PostageApp](http://postageapp.com/)的开发人员，但我鼓励您尝试其中的许多，看看哪种方法最适合您。

在大多数情况下，您需要重写应用程序的一小部分以使用用于访问 API 的特定 API 或库，一旦完成，您可以通过一次快速调用发送大量消息。这些消息的传递成为您的提供商的责任。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T02:46:20.683

事实是，您愿意花在电子邮件发送上的钱越少，您自己要做的事情就越多，例如：

*   白名单您的发件人 IP 地址（特别是如果您在共享主机上，这可能是 PITA，因为其他用户可能会为您搞砸）。
*   设置[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework)和[DKIM](http://www.dkim.org/)以增加对邮件主机（Hotmail、GMail 等）的信任
*   检查退回电子邮件
*   处理 ISP 投诉

这也是第三方提供商向您收取的费用之一；如果您不想为上述任何事情烦恼，请随意使用 Mailchimp、Bluehornet 等提供商。确保他们在您掏钱包之前提供您需要的东西，有些可能会有令人惊讶的隐藏成本（例如收费）额外的 API 使用、交易电子邮件的使用、生命周期电子邮件等）

如果您不介意执行上述一些操作（例如检查退回邮件/投诉电子邮件并进行一些简单的 DNS 更改），您可以注册[Amazon SES](http://aws.amazon.com/ses/)；它有一个适当的 API，他们的电子邮件费用是我迄今为止见过的最低的，最近他们引入了 DKIM（签名电子邮件）支持。您还可以配置您的 sendmail（假设专用主机）直接与 SES 对话，因此很容易连接任何`mail()`基于解决方案并运行它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T20:21:19.007

首先，感谢迄今为止帮助我的所有人。

我正在寻找的答案是[http://mandrillapp.com/](http://mandrillapp.com/)

这是 MailChimp 背后的服务，它在各个方面都有规则！

# ruby - 在应用程序 Ruby-Datamapper 中指定表名

> ID：12151412
> 
> 赞同：0
> 
> 时间：2012-08-28T00:44:48.607
> 
> 标签：ruby, ruby-datamapper

我想使用 Datamapper 动态创建和查询表。

虽然 Datamapper 允许您使用旧表和模式，并以这种方式设置使用的表名，但这仅在初始化期间，而不是在应用程序内。

有没有一种简单的方法可以告诉 Datamapper 在应用程序中迁移/升级具有分配表名的模型，然后告诉它查询该表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:53:34.307

这应该不是问题。

所有 Ruby 类都可以在运行时创建和重新定义。甚至初始化也在运行时。初始化恰好在执行其他代码之前首先执行。

这就是猴子补丁如此容易工作的原因。它只是初始化时的附加代码，只是重新定义类以添加额外的方法、变量等。

没有 Ruby 代码是“特殊的”，因为它只在编译时运行。Ruby 是一种**解释型**语言。

* * *

要动态创建类，请参阅[在 Ruby 中动态创建类](https://stackoverflow.com/questions/576827/dynamically-creating-class-in-ruby/576909#576909)。

假设您不需要从字符串数组动态创建类，您可以使用 定义其他方法`define_method`，或者在运行时调用 Datamapper 方法来添加属性。

在类中定义新方法：

```
Post.send :define_method, :new_method_name do
end 
```

要使用 Datamapper 属性定义新属性：

```
class Post
  include DataMapper::Resource
  property :title, String # the static way
end

Post.send :property, :title, String # add property the dynamic way (at run-time) 
```

**请注意，如果您重新启动服务器，您在运行时定义的任何表或属性都将不可用，除非重新执行动态生成它们的代码。**

* * *

要在运行时更新表，您只需像往常一样做同样的事情，即调用：

```
DataMapper.auto_upgrade! 
```

要仅升级单个表，您还可以执行以下操作：

```
Post.auto_upgrade! 
```

* * *

**第二个警告：如果您有多个进程，则需要在每个进程中运行动态代码，否则附加表 Models 和 Properties 将不可用。**

如果您有多个工作进程，这将是一个问题，就像生产中可能发生的那样（例如，Nginx 具有多个 Unicorn 工作人员，或者 Ha_proxy 后面有多个 Mongrel 工作人员）。

如果您有一个单进程服务器，那么这不是问题。但是，如果您有多个工作进程，则必须运行动​​态代码以在每个进程中生成这些额外的类和属性以使其可用。

这实际上与初始化相同，因为每个进程都经过初始化（或者如果分叉，则继承任何初始化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:50:22.513

无需更改任何内容的最简单方法是使用单独的数据库而不是表（假设任何关系也将存储在单独的数据库中）并打开与块中其他存储库的连接。

```
DataMapper.setup(:external, "adapter://username:password@hostname/dbname")
DataMapper.repository(:external) do...end 
```

# c - 数组限制不起作用

> ID：12151414
> 
> 赞同：2
> 
> 时间：2012-08-28T00:45:07.790
> 
> 标签：c, arrays

我写了这个小程序来练习数组，它应该最多包含 10 个字符，结尾是 \0。它有效，但效果太好了，即使我输入了 50 个字符的名称，它也会输出正确的输入。是什么赋予了？

```
#include <stdio.h>

int main(int argc, char const *argv[])
{
char name[11];

printf("Enter your name: ");
scanf("%s", name);

printf("Hi, %s\n", name);   
return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T00:47:45.533

您正在覆盖您分配的数组的末尾 - 您需要在 scanf 中指定要读取的字符串的长度以确保它适合。

```
scanf("%10s", name); 
```

对代码的改进是生成格式字符串，使其始终具有正确的大小。

```
#include <stdio.h>

int main(int argc, char const *argv[])
{
char name[11];
char formatstr[50];

snprintf(formatstr, sizeof(formatstr), "%%%ds", sizeof(name)-1);

printf("Enter your name: ");
scanf(formatstr, name);

printf("Hi, %s\n", name);
return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T01:03:44.580

**当你在C**中分配一个数组时，你只是得到一块内存的起始内存地址，保证可以免费使用，仅此而已。此保证是基于您不会使用此数组来读取/写入其边界之外的任何内存位置的假设，而您只是这样做了！

当您尝试访问数组边界之外的内存位置时，**Java**或**C#**等高级语言将引发异常（错误），不幸的是，在**C**中您只能靠自己。

尽管您的示例似乎无害，但这种[访问冲突](http://en.wikipedia.org/wiki/Segmentation_fault)是软件开发中的常见错误，可能会导致简单的故障到意外的[堆栈溢出](http://en.wikipedia.org/wiki/Stack_overflow)！

# c# - MVC 3 - 在服务器端获取下拉列表中的值在 javascript 上更改

> ID：12151416
> 
> 赞同：2
> 
> 时间：2012-08-28T00:45:20.570
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3, razor

我有一个 javascript 可以更改下拉列表中的值，当我保存表单时，无法在服务器端捕获该值。

按照下面的一些代码：

```
 <div class="editor-field">
    @Html.DropDownListFor(model => model.CategoriaId,
        Model.Categorias
            .Where(c => c.Id != Model.ContentId)
            .Select(c => new SelectListItem {
                Selected = c.Id == Model.CategoriaId,
                Text = c.Type + " - " +c.Name,
                Value = c.Id.ToString()
            } ),
            "Selecione uma Categoria")

         @Html.Hidden("hdnValue", Model.hndCategoriaId) // my hidden value
  </div> 
```

更改下拉列表和隐藏值的 Javascript

```
function change(item) {

var valueArtigo;
var ddl = document.getElementById('Categoria_CategoriaId');         
for (i = 0; i < ddl.options.length; i++) {
   if (ddl.options[i].text.toUpperCase().indexOf("ARTIGOS") != -1)
   valueArtigo = ddl.options[i].value;
}
document.getElementById("Categoria_CategoriaId").value = valueArtigo;
document.getElementById("Categoria_hdnValue").value = valueArtigo;
} 
```

回到服务器端，我正在尝试将值保存在数据库中。

```
public void UpdateCategoriaForContentItem(ContentItem item, EditCategoriaViewModel model)
{
    if ((model.CategoriaId != null)||(model.hndCategoriaId != null)) // both are null
    {...}
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T05:09:09.487

您需要将隐藏值绑定到模型

```
@Html.HiddenFor(m=>m.hdnCategoriaId)
or
@Html.Hidden("hdnCategoriaId",Model.hdnCategoriaId,Model) 
```

要在下拉更改事件中设置隐藏字段的值，您可以简单地执行

```
$('#hdnCategoriaId').val(valueArtigo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:37:51.917

最有可能的是，您的问题不在 javascript 中，而是在绑定中。尝试在没有 javascript 的情况下选择和提交以进行测试，并查看将在请求中发布到服务器的内容以及如何将其映射到操作参数上。

# objective-c - 使用 Xcode Product > Profile 构建时未找到 RestKit.h

> ID：12151418
> 
> 赞同：1
> 
> 时间：2012-08-28T00:45:37.647
> 
> 标签：objective-c, ios, xcode, restkit

我有一个使用 RestKit 0.10.2 的应用程序，我可以在使用 iOS 5.1.1 的 Xcode 4.4.1 模拟器中构建和运行该应用程序。我也可以毫无问题地运行分析。但是，当我尝试分析应用程序时，构建失败并出现词汇或预处理器问题 RestKit/Reskit.h 文件未找到。

这是我在目标上的标头搜索路径 > 调试中的内容：

```
$(BUILT_PRODUCTS_DIR)/../three20
$(BUILT_PRODUCTS_DIR)/../../three20
"$(BUILT_PRODUCTS_DIR)/../../Headers" 
```

我会错过什么？当我从 0.94 升级到 0.10.2 时，我从我的项目中完全删除了 Restkit 并重新导入它，因为我在尝试解决这个完全相同的问题以正常运行时遇到了很多问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T03:02:38.553

默认情况下，Profile 使用 Release 构建，而不是 Debug（因为对 debug 构建进行概要分析没有意义）。确保还填写了 Header Search Path -> Release。

# javascript - 触发事件不起作用或怀疑传递索引

> ID：12151431
> 
> 赞同：0
> 
> 时间：2012-08-28T00:47:33.577
> 
> 标签：javascript, jquery, events

`.full-arrow`是选择下一页的箭头。`.full-navigation`是一个导航栏，很简单，当您选择它们​​时，它们会改变颜色。该功能的其余部分不在此处，但您大致了解。

当我为第一个函数下方的函数创建触发事件时，它可以正常运行，但我不确定它是否没有启动`index()`或者它是否根本不起作用。奇怪的是，它第一次起作用，但我认为这是因为`same_page`变量是`0`在开头声明的。

我也怀疑它是否`index()`没有被传递的原因是因为`alert("foo");`它没有出现。

```
$(".full-arrow").click(function() {
  $(".full-navigation li:eq(" + same_page+1 + ")").trigger("click");
});

$(".full-navigation li").click(function(event) {
  //alert("foo");
  //alert(same_page);
  same_page = $(this).index();
  if(same_page == $(this).index()) { return false; }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:02:02.030

你从哪里得到`same_page`变量？尝试使用`parseInt( same_page, 10 )`-- 我有预感它实际上是一个字符串。

# php - 将 git 版本控制功能集成到网站中

> ID：12151435
> 
> 赞同：0
> 
> 时间：2012-08-28T00:48:04.473
> 
> 标签：php, html, git, version-control, file-upload

我正在建立一个网站，目前有一个用于上传图片的页面。图像将上传到存储库，并根据上传的输入字段自动重命名。

该 repo 目前通过 git 进行版本控制，我正在做的是让非技术 PM 的整个过程变得更容易。所以我需要能够通过我创建的 Web 界面来拉取、添加、提交和推送所有内容。有什么方法可以在 HTML5 网站上完成吗？我在后端使用 PHP 和一堆 JQuery 脚本来上传文件（尽管我仍在研究那部分，但似乎还不能完全弄清楚）。

该网站应：

*   git 推送
*   git 拉
*   混帐添加
*   git 提交
*   git checkout 重置所有上传的文件
*   ^^^^^那些应该以图形方式完成（通过html按钮）
*   输出 git 控制台输出
*   每当按下“git pull”时从仓库加载图像
*   在当前用户更新他的文件集时检测其他用户是否进行了推送

有没有办法向服务器发送信号以在 repo 上运行 git 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:50:52.820

PHP 的[shell_exec](http://php.net/manual/en/function.shell-exec.php)将允许您对 shell 执行任意命令，尽管[http://pear.php.net/package/VersionControl_Git](http://pear.php.net/package/VersionControl_Git)之类的东西会提供更好/更安全的界面。

# ios - 如何从情节提要重新加载视图（或以其他方式管理内存不足的情况）？

> ID：12151436
> 
> 赞同：1
> 
> 时间：2012-08-28T00:48:07.580
> 
> 标签：ios

在开发我当前的应用程序时，我遇到了一些问题，最终追溯到内存不足警告。部分低内存来自我（自由）使用 UIWebViews，这显然消耗了大量内存。

我不认为这会是一个问题，因为当抛出低内存警告时，当前不可见的视图应该会消失，不幸的是，连接到 UITabBarController 的任何东西都保留在层次结构中并且不会释放. 通过手动释放（然后在 viewWillAppear 中重新创建）视图，我可以让事情正常进行。但这并不能完全解决内存警告问题。

所以我需要做的是手动释放视图——以及最终连接到它的大量内存——然后恢复它。由于我不想以编程方式构建它（这就是 IB 的用途！），我需要以某种方式从情节提要中重新加载它。

或者，或者，我是个白痴，有一些非常明显的东西可以让我的生活变得轻松。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:29:06.867

经过更多的实验，事实证明，一方面，我对视图生命周期的理解略有缺陷，另一方面我的实验因不小心让僵尸对象打开而受到污染。

事实上，视图会在内存不足的情况下卸载它们的内容并在以后重新加载它们——这就是“viewDidLoad”和“viewDidUnload”的设计目的的一部分！正如我阅读的一些教程所做的那样，将初始化代码放入其中是一个重大错误。该初始化代码应该放在指定的初始化程序中——即使找出指定的初始化程序可能很烦人。

# python - Python 批量重命名器可以工作，但不能同时工作？

> ID：12151437
> 
> 赞同：1
> 
> 时间：2012-08-28T00:48:09.260
> 
> 标签：python, python-2.7

当我从命令行运行程序时，我没有收到任何错误，它似乎可以执行，但没有任何反应！我已经准备好从盯着代码看这么久了。我只是想让它起作用，这样我就可以把它上交并完成这项任务。

该程序应该按如下方式运行。

python bulk.py（目录名）（文件名）

```
import os
import sys
import random

def filterByExtension(root, allfiles, extensions):
  matching = []
  ext = []
  for i in allfiles:
    name = i
    dot = name.rfind('.')
    ext = name[dot+1:].lower()
    if ext not in extensions:
      continue
    path = os.path.join(root, name)
    if not os.path.isfile(path):
      print "Warning: File type not expected"
      continue
      if os.path.isfile(path):
        matching.append(name)
  return matching    

def sortByMTime(path, matching):
  presort = []
  for file in matching:
    path = os.path.join(path, file)
    mtime = os.path.getmtime(path)
    presort.append((mtime, file))
    presort.sort()
  return presort
  print "Here is the presorted shtuff",presort

def assignNames(prefix, inorder):
  count = ''
  digits = 0
  count = str(len(inorder))
  digits = len(count)
  template = '%%0%dd' % digits
  newnames = {}
  count = 0
  for i in inorder:
    count += 1
    s = template % count
    newnames[i[1]] = prefix+s+'.'+i[1].split('.')[1]
  return newnames
  print "Here are the new names that will be used",newnames

def makeTempName(allfiles):
  n = random.randint(1, 1000000000)
  t = '__temp' + str(n) + '__'
  while t in allfiles:
    n += 1
    t = '__temp' + str(n) + '__'
  return t

def makeScript(inorder, newnames, tempname):
  script = []
  print
  print "a" 
  print
  for elt in inorder:
    print 
    print "b"
    print
    chain = []
    inthechain = {}
    if elt not in newnames:
      continue
    if newnames[elt] == elt:
      del newnames[elt]
      continue
    if newnames[elt] not in newnames:
      print "This is the script output inside the if statement:"
      print script
      script.append( (elt,newnames[elt]) )
      del newnames[elt]
      continue
    else:
      link = elt
      while True:
        target = newnames[elt]
        chain.append( (link,target) )
        inthechain[link] = True
        link = target
        if link not in newnames:
          break 

        chain.reverse()
        print "this is the chain output before loop:"
    print chain
    for ( a, b ) in chain:
          print "This is the output of chain:"
          print chain
          script.append( a, b )
          del newnames[a]

          print 'here is the inthechain output in function'
          print inthechain
          print '=========================================='

          print 'here is the inorder output in function'
          print inorder
          print '=========================================='

          print 'here is the newnames output in function'
          print newnames
          print '=========================================='

          print 'here is the tempname output in function'
          print tempname
          print '=========================================='

          print 'here is the script output in function'
          print script
          print '=========================================='
  return script

def doRenames(pathfull, script):
  for entry in script:
    print entry[0], '->', entry[1]
    oldpath = os.path.join(path, entry[0])
    newpath = os.path.join(path, entry[1])
    if os.path.exists(newpath):
      print 'Error: file name already exists.'
      os.exit(1)
    else:
      os.rename(oldpath, newpath)

def main():
  directory = []
  prefix = []
  path = []
  tempname = []
  if len(sys.argv) <= 1 or len(sys.argv) > 3:
    print "You have messed up, please check your arguments again"
    sys.exit(1)

  elif len(sys.argv) == 3:    
    directory = sys.argv[1]
    path = os.path.abspath(directory)
    dirname = os.path.basename(path)
    print "Directory: ", sys.argv[1:-1]
    print "Prefix: ", sys.argv[-1]
    allfiles = []
    allfiles = os.listdir(sys.argv[1])
    print allfiles
    extensions = []
    extensions = ['jpeg','jpg','png','gif']
    matching = filterByExtension(path, allfiles, extensions)
    inorder = sortByMTime(path, matching)
    newnames = assignNames(prefix, inorder)
    tempname = makeTempName(allfiles)
    script = makeScript(inorder, newnames, tempname)
    renamed = doRenames(path, script)

  else:
    directory = sys.argv[1]
    path = os.path.abspath(directory)
    dirname = os.path.basename(path)    
    print "Directory: ", path
    print "Prefix: ", dirname

main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T00:57:57.457

这里永远不会添加任何文件名`matching`：

```
if not os.path.isfile(path):
  print "Warning: File type not expected"
  continue
  if os.path.isfile(path):
    matching.append(name) 
```

可能您希望将第二个`if`放在外部块中，而不是在第一个下缩进`if`：

```
if not os.path.isfile(path):
  print "Warning: File type not expected"
  continue
if os.path.isfile(path):
  matching.append(name) 
```

或者，更简单：

```
if not os.path.isfile(path):
  print "Warning: File type not expected"
else:
  matching.append(name) 
```

# c++ - 调试 C++ AES 加密包装类

> ID：12151441
> 
> 赞同：1
> 
> 时间：2012-08-28T00:48:30.540
> 
> 标签：c++, encryption, cryptography, aes

我需要将 AES 加密功能添加到我的 C++ 项目中。到目前为止，我正在尝试为[代码项目编写一个包装类：AES++ 的 C++ 实现，](http://www.codeproject.com/Articles/1380/A-C-Implementation-of-the-Rijndael-Encryption-Decr)它具有以下功能：

*   `char* Encrypt(string& InputData); //takes plain text and returns encrypted data`
*   `char* Decrypt(string& InputData); //takes encrypted data and returns plain text`

但是当我测试我的代码时，只有前 32 个字节的数据被加密和解密。

输出的最后一行是：-

> 这是加密测试我的名字

是什么让它错过了字符串的其余部分？我错过了什么？

```
#include "Rijndael.h"
#include <iostream>
#include <string>

using namespace std;

string LenMod(string Input);

char* Encrypt(string& InputData)
{
    try
    {
        InputData = LenMod(InputData);
        char* OutputData = (char*)malloc(InputData.size() + 1); 
        memset(OutputData, 0, sizeof(OutputData));

        CRijndael AESEncrypter;

        AESEncrypter.MakeKey("HiLCoE School of Computer Science and Technology",CRijndael::sm_chain0, 16 , 16);

        AESEncrypter.Encrypt(InputData.c_str(), OutputData, sizeof(InputData), CRijndael::ECB);

        return OutputData;
    }
    catch(exception e)
    {
        cout<<e.what();
        return NULL;
    }
}

char* Decrypt(string& Input)
{
    try
    {
        Input = LenMod(Input);
        char* Output = (char*)malloc(Input.size() + 1); 
        memset(Output, 0, sizeof(Output));

        CRijndael AESDecrypter;

        AESDecrypter.MakeKey("HiLCoE School of Computer Science and Technology",CRijndael::sm_chain0, 16, 16);

        AESDecrypter.Decrypt(Input.c_str(), Output, sizeof(Input), CRijndael::ECB); 

        return Output;
    }
    catch(exception e)
    {
        cout<<e.what();
        return NULL;
    }
}

string LenMod(string Input)
{
    while(Input.length() % 16 != 0)
        Input += '\0';

    return Input;
}

int main()
{

    string s = "This is Encryption Test My name is yohannes tamru i am a computer science student";

    //cout<<LengthMod(s)<<endl;
    string temp1(Encrypt(s));
    string temp2(Decrypt(temp1));

    cout<<temp1<<endl<<endl<<temp2<<endl;

    system("pause");
return 0;
} 
```

# jersey - ContainerRequest .getEntity 在 ContainerResponseFilter 的过滤方法中为空

> ID：12151444
> 
> 赞同：2
> 
> 时间：2012-08-28T00:49:38.070
> 
> 标签：jersey

我正在创建自己的日志过滤器实现`ContainerRequestFilter`和`ContainerResponseFilter`. 我只想在响应失败时打印请求实体，例如。响应状态码为 404、500。

但是当我在 ContainerResponseFilter(); 的过滤器方法中执行 request.getEntity() 或 request.getEntityInputStream() 时得到空字符串；

看起来球衣在资源级别阅读后删除了内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:11:19.537

它需要从输入流中读取实体，该实体不可重置（所涉及的基础设施不会保留它的副本）。`request.getEntityInputStream()`因此，由于之前已读取输入流，因此当您调用实现的类时，它应该什么都没有`ContainerResponseFilter`。[LoggingFilter](http://jersey.java.net/nonav/apidocs/1.12/jersey/com/sun/jersey/api/container/filter/LoggingFilter.html)为您完成工作。但是正如您所提到的，如果您想自定义它，那么您需要编写一个与该实现类似的实现，当然还需要添加代码来自定义日志记录。

# php - hmac 功能提示，用于登录

> ID：12151447
> 
> 赞同：0
> 
> 时间：2012-08-28T00:50:16.157
> 
> 标签：php, mysql, security, login, hmac

大家好，我正在为我的数据库建立一个新的登录系统，希望它比我的旧 md5 密码加密页面更安全。我只是想知道我是否可以得到一些关于我将要使用的代码的提示打算使用它...主要是如果我可以或应该做些什么来提高这部分的安全性...非常感谢...

```
$sql="SELECT * FROM `users` WHERE username='$user'";
$result=mysql_query($sql);

while($rows=mysql_fetch_array($result)){
$salt=$rows['salt'];
$site_key=$rows['site_key'];
}

      function hash_password($salt,$pass,$site_key) {
  global $site_key;
  return hash_hmac('sha512',$pass . $salt, $site_key);
}
$password=hash_password();
$hashed= mysql_real_escape_string($password); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:53:56.440

我希望`$user`已经逃脱了？无论如何，切换到 PDO 或 MySQLi 而不是使用`mysql_`.

至于散列密码，不要只使用 SHA-512 或类似的东西；这些可能计算得太快。我会推荐bcrypt：

```
function hash_password($password, $salt) {
    return crypt($password, '$2y$11$' . $salt);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:54:09.353

`$sql="SELECT * FROM`users`WHERE username='$user'";`这部分对 SQL 注入开放。使用 PDO 或 MySQLi 之类的东西

# android - 打开多个活动时如何回到第一个活动

> ID：12151450
> 
> 赞同：0
> 
> 时间：2012-08-28T00:51:01.133
> 
> 标签：android, android-activity

我有一个具有 HomeActivity 和 4 个活动 A、B、C、D 的应用程序。我想在单击`start_activity_A_btn`HomeActivity 中的按钮时为活动 A 加注星标，A 启动 B，B 启动 C，C 启动 D，然后`done`按钮将我带到 HomeActivity。
注意：在每个活动（A、B、C、D）中，我都有一些`data`要保存并在按下`done`按钮后返回 HomeActivity。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:16:25.823

您需要在您的意图中使用以下标志（请检查链接，它解释了与您面临的情况类似的情况）：[FLAG_ACTIVITY_REORDER_TO_FRONT](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)。因此，在您的活动 D 中，在完成按钮的 onClickListener 中，您必须使用以下代码：

```
Intent intent = new Intent(this, ActivityAname.class);
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
intent.putExtra("data", dataYouReceiveFromABCD);
startActivity(intent); 
```

这将使您的 A 活动恢复。

现在，关于“数据”，如果可能的话，你只需要使用一些分隔符继续在字符串中累积这些数据（因为你没有告诉我们这些数据到底是什么），所以如果它是用户名和密码，你可以使用可能永远不会出现的字符的随机组合（“246@$^”）将两者分开，然后继续创建一个字符串，你在 A、B、C 和 D 中不断构建，最后在 D 中放入意图中的额外字符串（检查我在上面发布的代码）。如果它是其他类型的数据，那么如果有帮助，您也许可以对其进行序列化。但是，如果您确实使用带有预定分隔符的字符串，那么您所要做的就是在 Activity A 中，您必须在 Activity A 的 onResume() 方法中使用以下代码。

```
if(this.getIntent().getExtras().getString("data") != null)
{
  String data = this.getIntent().getExtras().getString("data");
  //do some stuff here with that data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:57:20.087

如果你需要返回一个Activity的数据，你应该使用[startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)来启动ABCD。这很像您的 HomeActivity 正在打开一些对话框，一旦 Activity 完成（按完成或取消，取决于），您会在 HomeActivity 中获得[onActivityResult 。](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)

# ruby-on-rails - 覆盖模块方法并引用它

> ID：12151452
> 
> 赞同：0
> 
> 时间：2012-08-28T00:52:16.947
> 
> 标签：ruby-on-rails, ruby

我的一个模型中包含一个模块。包含在我的用户模型 database_authenticable 中。

```
devise  :database_authenticatable 
```

该模块有一个方法valid_password？（密码）我想覆盖该方法如下

```
def valid_password?(password)
  if my_condition_is_true
    do_something_new()
  else
    # do  what valid_password(password) always does
  end
end 
```

在我的 else 中，我正在考虑复制 database_authenticable.rb 模块中 valid_password() 中定义的任何内容，但我想知道是否有办法告诉它这样做？就像在继承中我可以做的超级？

我也没有意识到，在调用我的 valid_password 方法后，它调用了模块 valid_password 方法，知道如何避免这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:15:03.520

您可以将您的修改编写为一个模块并将其包含在内，这样它的加载方式与使用先前方法的模块的加载方式类似。如果你能做到这一点，你应该能够`super`正确调用。

看看这个线程的一些想法（当然，这取决于你的代码的其余部分如何）：[Rails 3: alias_method_chain 还在使用？](https://stackoverflow.com/questions/3689736/rails-3-alias-method-chain-still-used)

# css - 鼠标单击元素的奇怪行为

> ID：12151456
> 
> 赞同：1
> 
> 时间：2012-08-28T00:53:09.213
> 
> 标签：css, click, position, opacity, css-position

我正在制作一个有菜单的网站，但问题是即使不包含该选项，菜单也总是不透明，**当我将鼠标悬停在其中的一个选项上时，我注意到鼠标可以点击下面的某个元素菜单**，我不希望这种情况发生，那么如何防止这种情况发生？

如您所见，即使菜单打开，仍然可以单击这两个圆形复选标记。

![在此处输入图像描述](../Images/927295b45646297e6d6dd6f94277f657.png)

**编辑：** 原来是`position:absolute;`导致这个问题，我不知道为什么会这样。其实我什至不确定。仍在等待答案。

事实证明，页面中的任何元素都`position:absolute;`表现相同！

```
<div class="mainTaskWrapper clearfix">
    <!-- All ID names are to be changed later on -->
    <div class="mainMarker"></div>
    <label for="task1">This is task1</label>
    <!-- holder, checkButton and optTrigger are the underneath elements -->
    <div class="holder"></div>
    <div class="subTrigger"></div>                            
    <div class="checkButton"></div>
    <div class="optTrigger"></div>
    <!-- the following is for the drop-down menu -->
    <div class="mainOptions">
        <ul>
            <li id="mainInfo">Details</li>
            <li id="mainDivide">Divide</li>
            <li id="mainEdit">Edit</li>
            <li id="mainDelete">Delete</li>
        </ul>                               
    </div>
</div> 
```

这就是它的样式：

```
//This is for the tick buttons underneath the drop-down menu    
div.holder , div.checkButton, div.optTrigger {
    display: inline-block;
    opacity: 0.2;
    height: 20px;
    width: 20px;
    float:right;
    margin-top: 0px;
    margin-left:5px;
    cursor: pointer;
}

div.checkButton {
    background: url('../img/check_checked.png') no-repeat center;
}

div.checkButton:hover {
    opacity: 1.0;
}

div.optTrigger {
    background: url('../img/toggle_down_light.png') no-repeat center;
}

div.optTrigger:hover{
    opacity: 1.0;
}

div.optTrigger.active{  
    opacity: 0.9;
    border-radius: 5px 5px 0px 0px;
    background: url('../img/toggle_down_light_opened.png') no-repeat center darkslategray;
}

div.holder {
    opacity: 1.0;
    background: url('../img/holder.png') no-repeat center;
    cursor: move;
}

//The following is for the drop-down menu
.mainOptions {
    display:inline-block;
    position:absolute;
    background : darkslategrey;
    opacity: 1.0;
    left : 626px;
    top:25px;
    border-radius: 5px 0px 5px 5px;
}

.mainOptions li {
    color : lightgrey;
    border-bottom: 1px solid grey;
    padding:5px 15px;
    font-size : 12px;  
    cursor:pointer;
}

.mainOptions li:hover {
    background : grey;
}

.mainOptions li:last-of-type:hover{
    border-radius: 0px 0px 5px 5px;
}

.mainOptions li:first-of-type:hover{
    border-radius: 5px 0px 0px 0px;
}

.mainOptions li:last-of-type{
    border:none;
} 
```

# android - 是否可以在 SQLite 表中设置列宽？

> ID：12151464
> 
> 赞同：0
> 
> 时间：2012-08-28T00:54:18.467
> 
> 标签：android, database, string, sqlite

我正在尝试在视图中显示 SQLite 表。我希望我的第一列的宽度为 20 个字符。我试图通过使用 substring 方法来实现此效果，但我得到 stringindexoutofboundsexceptions 字符串少于 20 个字符。任何帮助是极大的赞赏。这是我的代码：

在视图中显示表格的方法：

```
public String getData() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_VALUE };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iQuantity = c.getColumnIndex(KEY_QUANTITY);
    int iValue = c.getColumnIndex(KEY_VALUE);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + /*c.getString(iRow) + " " +*/ c.getString(iName).substring(0, 20) + " " + c.getString(iQuantity) + " " + c.getString(iValue) + "\n";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:57:16.110

只需使用`c.getString(iName).substring(0, Math.min(20, c.getString(iName).length())`（可能使用临时 for `c.getString(iName)`）而不是您现在拥有的子字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:55:24.843

如果您不想要它们，那么为什么选择。你可以做

```
String[] columns = new String[]{ KEY_ROWID, "substr(" + KEY_NAME + ",1,20)", KEY_QUANTITY, KEY_VALUE };
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null); 
```

并从列中获取最多 20 个字符。

# javascript - URL 中的哈希值不完整

> ID：12151467
> 
> 赞同：0
> 
> 时间：2012-08-28T00:55:10.613
> 
> 标签：javascript, jquery, url, hash, responsive-design

我在 Jquery Elastislide 有一个画廊。

```
 var imageIndex = 0; 
if (window.location.hash) {
    var imageIndexStr = window.location.hash.replace('#',''); // remove #
    imageIndex = parseInt(imageIndexStr, 0); // convert to int
} 
```

感谢上面的代码，画廊得到了带有相应哈希的图片。 **www.example.com/gallery.html#1_TITLE_OF_THE_PICTURE**

当我将代码用画廊的箭头导航时，我进入以下 URL： **www.example.com/gallery.html#1**

```
_navigate       = function( dir ) {

                // navigate through the large images

                if( anim ) return false;
                anim    = true;

                if( dir === 'right' ) {
                    if( current + 1 >= itemsCount )
                        current = 0;
                    else
                        ++current;
                }
                else if( dir === 'left' ) {
                    if( current - 1 < 0 )
                        current = itemsCount - 1;
                    else
                        --current;
                }

                _showImage( $items.eq( window.location.hash = current) ); 
```

所以，我需要一些帮助才能在 URL 中获取完整的哈希。

**www.example.com/gallery.html#1_TITLE_OF_THE_PICTURE**

HTML 代码：

```
<head>
<style>
                .es-carousel ul{
                    display:block;
                }
            </style>

            <script id="img-wrapper-tmpl" type="text/x-jquery-tmpl">    
            <div class="rg-image-wrapper">
                {{if itemsCount > 1}}
                    <div class="rg-image-nav">
                        <a href="#"  class="rg-image-nav-prev">Previous Image</a>
                        <a href="#"  class="rg-image-nav-next">Next Image</a>
                    </div>
                {{/if}}
                <div class="rg-image"></div>
                <div class="rg-loading"></div>
                <div class="rg-caption-wrapper">
                    <div class="rg-caption" style="display:none;">
                        <p></p>
                    </div>
                </div>
            </div>
        </script>
</head>

<body>

<div class="container_gallery">

<div id="rg-gallery" class="rg-gallery">
                    <div class="rg-thumbs">
                        <!-- Elastislide Carousel Thumbnail Viewer -->

                        <div class="es-carousel-wrapper">
                            <div class="es-nav">
                                <span class="es-nav-prev">Previous</span>
                                <span class="es-nav-next">Next</span>
                            </div>
                            <div class="es-carousel">
                                <ul>
                                    <li> <a href="#0_Title_1"><img src="picture_thumb.jpg" data-large="picture.jpg" alt="Title_1" data-description="Title_1"  /></a></li>

href="#0_Title_2"><img src="picture2_thumb.jpg" data-large="picture2.jpg" alt="Title_2" data-description="Title_2"  /></a></li>

href="#0_Title_3"><img src="picture3_thumb.jpg" data-large="picture3.jpg" alt="Title_3" data-description="Title_3"  /></a></li>

</ul>
                            </div>
                        </div>
                        <!-- End Elastislide Carousel Thumbnail Viewer -->
                    </div><!-- rg-thumbs -->
                </div><!-- rg-gallery -->

</div> 
```

事件导航：

```
$('#img-wrapper-tmpl').tmpl( {itemsCount : itemsCount} ).prependTo( $rgGallery );

            if( itemsCount > 1) {
                // addNavigation
                var $navPrev        = $rgGallery.find('a.rg-image-nav-prev'),
                    $navNext        = $rgGallery.find('a.rg-image-nav-next'),
                    $imgWrapper     = $rgGallery.find('div.rg-image');

                $navPrev.on('click.rgGallery', function( event ) {
                    _navigate( 'left' );
                    return false;
                }); 

                $navNext.on('click.rgGallery', function( event ) {
                    _navigate( 'right' );
                    return false;
                });

                // add touchwipe events on the large image wrapper
                $imgWrapper.touchwipe({
                    wipeLeft            : function() {
                        _navigate( 'right' );
                    },
                    wipeRight           : function() {
                        _navigate( 'left' );
                    },
                    preventDefaultEvents: false
                });

                $(document).on('keyup.rgGallery', function( event ) {
                    if (event.keyCode == 39)
                        _navigate( 'right' );
                    else if (event.keyCode == 37)
                        _navigate( 'left' );    
                });

            }

        }, 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:57:30.537

这行代码将散列值设置为一个数字，这将导致它变成类似：`www.example.com/gallery.html#1`。

```
_showImage( $items.eq( window.location.hash = current) ); 
```

在我看来，当您更改图片时，您的导航功能并未将标题放在新的哈希值上。我想你想要这样的东西：

```
window.location.hash = current + "_" + newPictureTitle;
_showImage( $items.eq(current) ); 
```

显然需要填写 newPictureTitle 的值的地方

* * *

根据您显示的 HTML 和其他 javascript，您的`_navigate()`函数可以像这样工作：

```
_navigate  = function( dir ) {
    // navigate through the large images
    if( anim ) return false;
    anim    = true;

    if( dir === 'right' ) {
        if( ++current >= itemsCount )
            current = 0;
    } else if( dir === 'left' ) {
        if( --current < 0 )
            current = itemsCount - 1;
    }

    // show the right image
    _showImage( $items.eq(current) );

    // now get the right image title so it can go in the hash value
    // we assume here that current is a zero based index
    var links = $("#rg-gallery .es-carousel li a");
    // use getAttribute here to get the raw href that's in the 
    // HTML source file (not a fully qualified URL)
    window.location.hash = links.get(current).getAttribute("href");
} 
```

# php - 对列进行分组

> ID：12151468
> 
> 赞同：1
> 
> 时间：2012-08-28T00:55:12.750
> 
> 标签：php, mysql, sql, group-by

我正在尝试在我的 MYSQL 表中对名为“set”的列进行分组，并尝试检索该集合的最低 page_id。

```
SELECT * FROM pages WHERE project_id ='$project_id' GROUP BY `set` ORDER BY page_id ASC 
```

我将如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T00:58:43.423

使用[`MIN()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_min)聚合函数：

```
SELECT MIN(page_id) AS lowest_page_id
FROM pages 
WHERE project_id ='$project_id' 
GROUP BY `set` 
```

# html - 使用 html 按钮更改数据状态

> ID：12151469
> 
> 赞同：0
> 
> 时间：2012-08-28T00:55:26.383
> 
> 标签：html, django, forms

我正在用 django 构建一个电子商务网站，我想创建一个按钮来表示订单已经交付。

![在此处输入图像描述](../Images/f764b7af769cd0d77d22d97593faa825.png)

我很确定您可以使用复选框来实现这一点，但我想使用一个按钮，因为使用平板电脑时单击它会更容易。

我希望该按钮也“不可点击”，以防有人不小心点击了错误订单的按钮。

我需要在html中制作表格吗？或者有没有更简单的方法来做到这一点。

这是我的html：

```
Order page

<table>
    <tr>
        <td>#</td>
        <td>Name</td>
        <td>Email</td>
        <td>Phone</td>
        <td>Order</td>
        <td>Order Quantity</td>
        <td>Delivered</td>
    </tr>

    {% for ord in orders %}
        {% for food in ord.orderitem_set.all %}

        <tr>
            {% if forloop.counter == 1 %}
                <td>{{ord.pk}}</td>
                <td>{{ord.user.first_name}}</td>
                <td>{{ord.user.email}}</td>
                <td>{{ord.user.get_profile.phone}}</td>

            {% else %}
                <td colspan="4"></td>
            {% endif %}

                <td>{{food.name}}</td>
                <td>{{food.quantity}}</td>

            <td>{% if forloop.counter == 1 %} <button type="button">Delivered</button> {% endif %}</td>
        </tr>
        {% endfor %}
    {% endfor %}

</table>  

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:57:55.040

嗯，我认为在按钮周围放一个表格是“更简单的方法”^^

稍后，如果您愿意，您可以使用下面几乎相同的视图代码使其成为一个漂亮的 javascript 切换

例如在你的按钮周围......

```
<form action="{% url show_orders %}" method="post">
    <input type="hidden" name="order-id" value="{{ ord.pk }}"/>
    <input type="hidden" name="action=" value="toggledelivery"/>
    <button type="button">{% if not ord.is_delivered %}Not {% endif %}Delivered</button>
</form> 
```

那么在你看来，类似...

```
def show_orders(request):

     if request.method == "POST": 
         order_id = request.POST.get('order-id', None)

         # TODO toggle the order here

         return HttpResponseRedirect(back_to_the_order_admin_page)
     else:
         # ...show the admin page 
```

# wcf - 由于新的 WCF DataMember，反序列化失败

> ID：12151472
> 
> 赞同：1
> 
> 时间：2012-08-28T00:56:05.953
> 
> 标签：wcf, datamember

我有一个 WCF Web 服务，我的 C++ 客户端使用 svcutil + wsutil 生成的代理与之交谈。我添加了一个新的 DataMember，现在我得到：

读取具有 WS_READ_OPTION '2'、名称 'GetMachineRequestDetailsResponse' 和命名空间 'M.NativeOM' 的元素时发生序列化失败。读取具有 WS_TYPE '26 (0x1A)'、WS_FIELD_MAPPING '2'、名称 'GetMachineRequestDetailsResult' 和命名空间 'M.NativeOM' 的字段时发生序列化失败。当 XML 阅读器处理输入源时，第 1 行第 796 列 (0x31C) 发生错误。预期有一个结束元素。**找到了一个名为“UseForRun_SnapshotID** ”和命名空间“M.NativeOM”的开始元素，但不是预期的。

我在数据合同中的数据成员是使用 Order 属性定义的：

```
[DataMember(Order = 4)]
        public int MachineID { get; set; }
        [DataMember(Order = 5)]
        public string MachineName { get; set; }

        [DataMember(Order = 3)]
        public bool IsReserved { get; set; }

        [DataMember(Order = 13)]
        public string ReservedBy { get; set; }

        [DataMember(Order = 12)]
        public MdMachineRequestType RequestType { get; set; }

        [DataMember(Order = 0)]
        public bool CommandIsAdmin { get; set; }
        [DataMember(Order = 1)]
        public string CommandLine { get; set; }
        [DataMember(Order = 2)]
        public int CommandTimeout { get; set; }

        [DataMember(Order = 7)]
        public string MoveToDb_ServerName { get; set; }
        [DataMember(Order = 6)]
        public string MoveToDb_DatabaseName { get; set; }

        [DataMember(Order = 11)]
        public int Reimage_OsID { get; set; }
        [DataMember(Order = 8)]
        public int Reimage_ImageID { get; set; }
        [DataMember(Order = 9)]
        public int Reimage_OptionTimeout { get; set; }
        [DataMember(Order = 10)]
        public string Reimage_OptionUserName { get; set; }

        [DataMember(Order = 15)]
        public int UseForRun_RunID { get; set; }
        [DataMember(Order = 14)]
        public bool UseForRun_DoCleanInstall { get; set; }

        [DataMember(Order = 16)]
        public int UseForRun_SnapshotID { get; set; } 
```

此外，生成的 xsd 文件以正确的顺序显示它们

```
 <xs:complexType name="MdMachineRequest">
    <xs:sequence>
      <xs:element minOccurs="0" name="CommandIsAdmin" type="xs:boolean" />
      <xs:element minOccurs="0" name="CommandLine" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="CommandTimeout" type="xs:int" />
      <xs:element minOccurs="0" name="IsReserved" type="xs:boolean" />
      <xs:element minOccurs="0" name="MachineID" type="xs:int" />
      <xs:element minOccurs="0" name="MachineName" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="MoveToDb_DatabaseName" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="MoveToDb_ServerName" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="Reimage_ImageID" type="xs:int" />
      <xs:element minOccurs="0" name="Reimage_OptionTimeout" type="xs:int" />
      <xs:element minOccurs="0" name="Reimage_OptionUserName" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="Reimage_OsID" type="xs:int" />
      <xs:element minOccurs="0" name="RequestType" type="tns:MdMachineRequestType" />
      <xs:element minOccurs="0" name="ReservedBy" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="UseForRun_DoCleanInstall" type="xs:boolean" />
      <xs:element minOccurs="0" name="UseForRun_RunID" type="xs:int" />
      <xs:element minOccurs="0" name="UseForRun_SnapshotID" type="xs:int" />
    </xs:sequence>
  </xs:complexType> 
```

因此，使用 Order 属性确实将 DataMember 置于正确的顺序中，但我的客户不仅忽略了新的 DataMember 而是给出了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T22:17:34.110

问题是当我使用 wsutil 创建代理时，我缺少 /ignoreTrailingContent 选项

# css - 仅显示 CSS 的下拉菜单项

> ID：12151477
> 
> 赞同：0
> 
> 时间：2012-08-28T00:56:50.317
> 
> 标签：css

我正在尝试使仅 CSS 的下拉菜单正常工作。它在很大程度上确实有效，除了其他内容似乎正在显示而且我无法弄清楚为什么。

[http://jsfiddle.net/uQveP/4/](http://jsfiddle.net/uQveP/4/)

有人可以告诉我我做错了什么吗？CSS 不是我的强项。

![在此处输入图像描述](../Images/8fb2b1cfa87c65810cac8e339fb39979.png)

下拉列表出现在正确的位置，但您可以看到其他“测试”链接显示出来。在图像中，底部的两个“测试”链接应该被下拉菜单隐藏。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:40:22.993

（第二次尝试）

好的，如果我理解正确，您需要做的就是[将 z-index 移动到 ULs](http://jsfiddle.net/uQveP/12/)：

```
.drop-menu-header ul, .drop-menu-content ul {
  margin: 0;
  padding: 0;
  list-style-type: none;
  float: right;
  text-align: right;
}

.drop-menu-header ul li, .drop-menu-content ul li {
  display: block;
  position: relative;
  /*POOF*/
}

.drop-menu-header ul li ul, .drop-menu-content ul li ul {
  display: none;
  right: 0;
  /*SHAZAAM!*/
  z-index: 5;
}

.drop-menu-header ul li a {
  display: block;
  white-space: nowrap;
  color: #fff;
}

.drop-menu-content ul li a {
  display: block;
  white-space: nowrap;
}

.drop-menu-header ul li a img.fake-button, .drop-menu-content ul li a img.fake-button {
  padding: 0;
}

.drop-menu-header ul ul li a, .drop-menu-content ul ul li a {
  padding: 5px 15px;
}

.drop-menu-header span {
  padding: 5px 15px;
  display: block;
  white-space: nowrap;
  color: #fff;
}

.drop-menu-content span {
  padding: 5px 15px;
  display: block;
  white-space: nowrap;
}

.drop-menu-header ul li span a, .drop-menu-content ul li span a {
  padding: 0;
  display: inline;
  white-space: nowrap;
}

.drop-menu-header li:hover ul, .drop-menu-content li:hover ul {
  display: block;
  position: absolute;
  border: 1px solid #999999;
}

.drop-menu-header li:hover li {
  float: none;
  background-color: #5c87b2;
}

.drop-menu-content li:hover li {
  float: none;
  background-color: #fff;
} 
```

# python - 使用python计算csv中的重复行

> ID：12151485
> 
> 赞同：3
> 
> 时间：2012-08-28T00:58:01.533
> 
> 标签：python, csv

我想这对于一个体面的 Python 开发人员来说是一件容易的事——我还在学习！给定一个包含重复电子邮件的 csv，我想迭代并写出重复电子邮件的数量，例如：

**文件.csv**

```
COLUMN 0
some@email.com
some@email.com
another@address.com
example@email.com 
```

**输出文件.csv**

```
COLUMN 0                 COLUMN 1
some@email.com           2
another@address.com      1
example@email.com        1 
```

到目前为止，我可以删除重复项

```
import csv

f = csv.reader(open('infile.csv','rb'))
writer = csv.writer(open('outfile.csv','wb'))
emails = set()

for row in f:
    if row[0] not in emails:
        writer.writerow(row)
        emails.add( row[0] ) 
```

但我无法将计数写入新列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T02:07:47.480

在 Python2.6*中*使用`defaultdict`which

 *```
from collections import defaultdict

# count all the emails before we write anything out
emails = defaultdict(int)
for row in f:
    emails[row[0]] += 1

# now write the file
for row in email.items():
    writer.writerow(row) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T01:24:43.993

试试[柜台](http://docs.python.org/library/collections.html#collections.Counter)。它专为以下用途而设计：

```
from collections import Counter

emails=Counter()
for row in f:
    emails+=Counter([row[0]]) 
```

印刷：

```
Counter({'some@email.com': 2, 'another@address.com': 1, 'example@email.com': 1, 'COLUMN 0': 1}) 
```

从计数器获取任何其他数据结构很容易：

```
print set(emails.elements())
# set(['another@address.com', 'COLUMN 0', 'example@email.com', 'some@email.com']) 
```

请注意，我没有跳过标题或写出 csv - 这很容易做到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T02:08:06.137

对于 Python 2.6，您可以尝试类似鸽巢排序的方法：http: [//en.m.wikipedia.org/wiki/Pigeonhole_sort](http://en.m.wikipedia.org/wiki/Pigeonhole_sort)

它实际上是为这种确切的问题而设计的。

For actual setup, use a dictionary to hold the data and then iterate over it instead of trying to write the info out as you go.*

# python - 如何检查日期是否在日期字符串列表中？

> ID：12151488
> 
> 赞同：2
> 
> 时间：2012-08-28T00:58:33.077
> 
> 标签：python, list, date

这将始终打印错误。如何检查日期是否在数组中并打印正确的内容？

```
dates = [ "2012-09-03",
"2012-10-08",
"2012-10-09",
"2012-11-12",
# .. more values snipped for brevity
"2013-04-19",
"2013-05-27", ]

if date.today() in dates:
    print "true"
elif date.today() not in dates:
    print "false" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T01:01:14.973

您正在将字符串与 python`datetime.date`对象进行比较；您需要使用以下[`.strftime()`方法](http://docs.python.org/library/datetime.html#datetime.date.strftime)将日期对象转换为字符串以进行比较：

```
today = date.today().strftime('%Y-%m-%d')
print today in dates # Will print "True" or "False" 
```

为了进一步说明这一点：

```
>>> from datetime import date
>>> date.today()
datetime.date(2012, 8, 28)
>>> date.today() == '2012-08-28'
False
>>> date.today().strftime('%Y-%m-%d') == '2012-08-28'
True 
```

或者，您可以使用使用完全相同的输出格式的[`.isoformat()`方法：](http://docs.python.org/library/datetime.html#datetime.date.isoformat)

```
>>> date.today().isoformat()
'2012-08-28' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T01:31:11.833

您始终可以使用 index() 函数和 try/except 函数来测试日期是否在您的列表中，如下所示：

```
list = [1,2,3,4,5,6,7,8,9]
try:
  location = list.index(5)
  print("5 was found in the list.")  # if program manages to get
                                     # here you know 5 is in
                                     # the list.
except:
  print("5 was no found in the list.") # if it doesn't find 5 this
                                       # line is displayed 
```

# excel - 将不同单元格中的多个文本提取到一个单元格中

> ID：12151493
> 
> 赞同：0
> 
> 时间：2012-08-28T00:59:21.980
> 
> 标签：excel

我需要帮助来查看以下 excel 困境是否有公式：（注意 - 虚线用作表示不同列的分隔符）

目前我有一个包含以下数据的电子表格：2列（A--B）

Abby -- 苹果
Abby -- 橙
Abby -- 青柠
Bob -- 橙
Bob -- 苹果
Carol-- 青柠
Carol-- 橙David --
苹果

是否有一个公式告诉 Excel 在 A 列中提取相同的文本并将相应的 B 列项目合并到 C 列中的一个单元格中？：请在下面找到我所追求的最终结果：

艾比——苹果——苹果橙酸橙
艾比——橙
艾比——酸橙
鲍勃——橙——橙苹果
鲍勃——苹果
卡罗尔——酸橙——酸橙
卡罗尔——橙
大卫——苹果----苹果

先感谢您。

问候， 套件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:43:11.273

您可以修改[此问题](https://stackoverflow.com/questions/12096573/excel-return-values-from-multiple-matching-rows/12119206#12119206)的答案以满足您的需要。它比您需要的更复杂，因为您只匹配单个列而不是两个或更多列，但基本概念实际上是相同的。

# javascript - Javascript 图表插件，允许选择区域图的一部分

> ID：12151497
> 
> 赞同：1
> 
> 时间：2012-08-28T01:00:23.157
> 
> 标签：javascript, charts, raphael, highcharts, graphael

我正在寻找一个 javascript 图表库，它允许我构建一个能够悬停图形曲线上两个相邻点之间的部分的面积图。基本上是这样的：

![图表插图](../Images/e6f17ce0c0f9e836a0134b91609e6a86.png)

同样如在此示例中所见，平滑点之间的线会非常好（使用贝塞尔曲线而不是常规直线）。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:08:24.317

就像[@Duniyandn](https://stackoverflow.com/users/293291/duniyadnd) [建议](https://stackoverflow.com/questions/12151497/javascript-charting-plugin-which-allows-to-select-a-portion-of-an-area-graph#comment16269709_12151497)的那样，您可以创建两个系列并创建有关在鼠标交互时如何处理它们的规则。

如果你想要一个红色的静态部分，你可以这样做。例如[http://jsfiddle.net/qXbsu/](http://jsfiddle.net/qXbsu/)

但是，如果您尝试使用鼠标移动突出显示的部分，您可以执行以下操作：http: [//jsfiddle.net/VuePw/2/#run](http://jsfiddle.net/VuePw/2/#run)虽然无法匹配平滑曲线。

我使用 tooltip formatter 函数来完成这两个，因为它是 mousemove 回调的简单代理，而不是因为它是最好的方法。

# html - 获取全面的浏览器 CSS 属性的任何资源？

> ID：12151498
> 
> 赞同：3
> 
> 时间：2012-08-28T01:00:42.033
> 
> 标签：html, internet-explorer, css, browser

我希望能够看到给定浏览器支持的每个 CSS 属性的简单列表（我需要特别阅读的浏览器 IE8..）。关于在哪里可以找到此类列表的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:02:19.347

在我看来，Mozilla 开发者网络拥有最好的 CSS 文档：

[https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference](https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T01:09:21.547

[“我可以使用”（caniuse.com）](http://caniuse.com/)是一个好的开始，但它是按属性组织的，而不是按浏览器组织的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T01:17:12.620

下面是 CSS 属性的完整列表：[http://www.w3schools.com/cssref/default.asp](http://www.w3schools.com/cssref/default.asp)如果您想要查找特定属性的兼容性，只需单击它并阅读“浏览器支持”部分。

对于 CSS3 和 HTML5 功能列表，我也喜欢这个网站：[http](http://www.findmebyip.com/litmus/) ://www.findmebyip.com/litmus/ ，因为它可以让您快速识别特定功能。虽然它不如 w3 学校参考的全面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T01:18:55.727

quirksmode.org 中的[CSS 内容和浏览器兼容性](http://www.quirksmode.org/css/contents.html)页面对浏览器进行了很好的细分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T06:56:24.857

Microsoft有[CSS 参考信息](http://msdn.microsoft.com/library/ie/ms531209.aspx)，描述了各种版本的 IE 识别的 CSS。

还有一个[CSS Compatibility 和 Internet Explorer](http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx)，它侧重于描述 CSS3 的哪些功能已经在 IE 中实现。所以它没有描述供应商特定的功能。

# ruby - 使用 Ruby Mechanize 提交“aspnetForm”未按预期工作

> ID：12151510
> 
> 赞同：3
> 
> 时间：2012-08-28T01:02:35.340
> 
> 标签：ruby, webforms, mechanize, scrape

我正在使用 ruby​​ mechanize gem 来自动提交表单并抓取结果。我有以下代码：

```
require 'mechanize'
require 'logger'

url = "http://www.cebupacificair.com/Pages/default.aspx"
agent = Mechanize.new do |agent| 
  agent.log = Logger.new(STDOUT)
  agent.follow_meta_refresh = true 
end
page = agent.get(url)

search_results = page.form_with(:name => 'aspnetForm') do |form|
  form['__EVENTARGUMENT'] = ''
  form['__EVENTTARGET'] = 'ControlGroupSearchView$AvailabilitySearchInputSearchView$LinkButtonNewSearch'
  form.radiobutton_with(:value => "RoundTrip").check
  form.field_with(:name => "ddOrigin").options_with(:value => "MNL").select
  form.field_with(:name => "ddDestination").options_with(:value => "SGN").select
  form.field_with(:name => "_depmonthyear").options_with(:value => "2013-02").select
  form.field_with(:name => "_depday").options_with(:value => "9").select
  form.field_with(:name => "_retmonthyear").options_with(:value => "2013-02").select
  form.field_with(:name => "_retday").options_with(:value => "11").select
  form.field_with(:name => "_adults").options_with(:value => "1").select
  form.field_with(:name => "_children").options_with(:value => "0").select
  form.field_with(:name => "_infants").options_with(:value => "0").select
end.click_button

puts search_results.body 
```

当我运行上面的代码时，它会提交表单，但它不会重定向到我手动提交时被重定向的页面。这是日志：

```
Starting run ...
I, [2012-08-27T08:37:08.010661 #4] INFO -- : Net::HTTP::Get: /Pages/default.aspx
D, [2012-08-27T08:37:08.010794 #4] DEBUG -- : request-header: accept => */*
D, [2012-08-27T08:37:08.010825 #4] DEBUG -- : request-header: user-agent => Mechanize/2.3 Ruby/1.9.2...more
D, [2012-08-27T08:37:08.010849 #4] DEBUG -- : request-header: accept-encoding => gzip,deflate,identity
D, [2012-08-27T08:37:08.010873 #4] DEBUG -- : request-header: accept-charset => ISO-8859-1,utf-8;q=0.7,*;q=0.7
D, [2012-08-27T08:37:08.010898 #4] DEBUG -- : request-header: accept-language => en-us,en;q=0.5
D, [2012-08-27T08:37:08.010922 #4] DEBUG -- : request-header: host => www.cebupacificair.com
I, [2012-08-27T08:37:11.354481 #4] INFO -- : status: Net::HTTPOK 1.1 200 OK
D, [2012-08-27T08:37:11.354778 #4] DEBUG -- : response-header: cache-control => private, max-age=0
D, [2012-08-27T08:37:11.354869 #4] DEBUG -- : response-header: content-type => text/html; charset=utf-8
D, [2012-08-27T08:37:11.354945 #4] DEBUG -- : response-header: content-encoding => gzip
D, [2012-08-27T08:37:11.355017 #4] DEBUG -- : response-header: expires => Sun, 12 Aug 2012 08:37:09 GMT
D, [2012-08-27T08:37:11.355089 #4] DEBUG -- : response-header: last-modified => Mon, 27 Aug 2012 08:37:09 GMT
D, [2012-08-27T08:37:11.355161 #4] DEBUG -- : response-header: vary => Accept-Encoding
D, [2012-08-27T08:37:11.355232 #4] DEBUG -- : response-header: server => Microsoft-IIS/7.0
D, [2012-08-27T08:37:11.355313 #4] DEBUG -- : response-header: x-aspnet-version => 2.0.50727
D, [2012-08-27T08:37:11.355386 #4] DEBUG -- : response-header: x-powered-by => ASP.NET
D, [2012-08-27T08:37:11.355457 #4] DEBUG -- : response-header: microsoftsharepointteamservices => 12.0.0.6420
D, [2012-08-27T08:37:11.355528 #4] DEBUG -- : response-header: date => Mon, 27 Aug 2012 08:37:09 GMT
D, [2012-08-27T08:37:11.355599 #4] DEBUG -- : response-header: content-length => 19031
D, [2012-08-27T08:37:11.355668 #4] DEBUG -- : response-header: connection => close
D, [2012-08-27T08:37:11.355739 #4] DEBUG -- : response-header: set-cookie => MyCookie=8npRAWS5i10kju...more
D, [2012-08-27T08:37:11.356068 #4] DEBUG -- : Read 6698 bytes (6698 total)
D, [2012-08-27T08:37:11.356328 #4] DEBUG -- : Read 12333 bytes (19031 total)
D, [2012-08-27T08:37:11.356890 #4] DEBUG -- : gzip response
D, [2012-08-27T08:37:11.375285 #4] DEBUG -- : saved cookie: MyCookie=8npRAWS5i10kjuDl8xX/01gRq0obDLa...more
I, [2012-08-27T08:37:11.385797 #4] INFO -- : form encoding: utf-8
D, [2012-08-27T08:37:11.388509 #4] DEBUG -- : query: "MSOWebPartPage_PostbackSource=&MSOTlPn_Selecte...more
I, [2012-08-27T08:37:11.390797 #4] INFO -- : Net::HTTP::Post: /Pages/default.aspx
D, [2012-08-27T08:37:11.390897 #4] DEBUG -- : request-header: accept => */*
D, [2012-08-27T08:37:11.390927 #4] DEBUG -- : request-header: user-agent => Mechanize/2.3 Ruby/1.9.2...more
D, [2012-08-27T08:37:11.390966 #4] DEBUG -- : request-header: accept-encoding => gzip,deflate,identity
D, [2012-08-27T08:37:11.390991 #4] DEBUG -- : request-header: accept-charset => ISO-8859-1,utf-8;q=0.7,*;q=0.7
D, [2012-08-27T08:37:11.391015 #4] DEBUG -- : request-header: accept-language => en-us,en;q=0.5
D, [2012-08-27T08:37:11.391039 #4] DEBUG -- : request-header: cookie => MyCookie=8npRAWS5i10kjuDl8xX...more
D, [2012-08-27T08:37:11.391063 #4] DEBUG -- : request-header: host => www.cebupacificair.com
D, [2012-08-27T08:37:11.391095 #4] DEBUG -- : request-header: referer => http://www.cebupacificair.c...more
D, [2012-08-27T08:37:11.391123 #4] DEBUG -- : request-header: content-type => application/x-www-form...more
D, [2012-08-27T08:37:11.391146 #4] DEBUG -- : request-header: content-length => 13733
D, [2012-08-27T08:37:11.391170 #4] DEBUG -- : request-header: if-modified-since => Mon, 27 Aug 2012 ...more
I, [2012-08-27T08:37:19.039011 #4] INFO -- : status: Net::HTTPOK 1.1 200 OK
D, [2012-08-27T08:37:19.039252 #4] DEBUG -- : response-header: cache-control => private
D, [2012-08-27T08:37:19.039348 #4] DEBUG -- : response-header: content-type => text/html; charset=utf-8
D, [2012-08-27T08:37:19.039428 #4] DEBUG -- : response-header: content-encoding => gzip
D, [2012-08-27T08:37:19.039501 #4] DEBUG -- : response-header: vary => Accept-Encoding
D, [2012-08-27T08:37:19.039580 #4] DEBUG -- : response-header: server => Microsoft-IIS/7.0
D, [2012-08-27T08:37:19.039652 #4] DEBUG -- : response-header: x-aspnet-version => 2.0.50727
D, [2012-08-27T08:37:19.039725 #4] DEBUG -- : response-header: x-powered-by => ASP.NET
D, [2012-08-27T08:37:19.039798 #4] DEBUG -- : response-header: microsoftsharepointteamservices => 12.0.0.6420
D, [2012-08-27T08:37:19.039895 #4] DEBUG -- : response-header: date => Mon, 27 Aug 2012 08:37:17 GMT
D, [2012-08-27T08:37:19.040003 #4] DEBUG -- : response-header: content-length => 20962
D, [2012-08-27T08:37:19.040074 #4] DEBUG -- : response-header: connection => close
D, [2012-08-27T08:37:19.040338 #4] DEBUG -- : Read 6906 bytes (6906 total)
D, [2012-08-27T08:37:19.040605 #4] DEBUG -- : Read 14056 bytes (20962 total)
D, [2012-08-27T08:37:19.041137 #4] DEBUG -- : gzip response
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> <html __...more
Finished: 12.393 seconds elapsed
runfinished 
```

有人知道我在这里想念什么吗？我是否需要为 mechanize 设置不同的设置来处理 asp 表单？

想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T14:33:21.403

尝试不同的方法。

如果它是它发出的发布请求。尝试手动发出该请求，而不是使用 Mechanizes 表单处理程序：

它提交的参数是：

```
__EVENTTARGET=ControlGroupSearchView%24AvailabilitySearchInputSearchView%24LinkButtonNewSearch
__EVENTARGUMENT=
__VIEWSTATE=
ControlGroupSearchView%24AvailabilitySearchInputSearchView%24RadioButtonMarketStructure=RoundTrip
ControlGroupSearchView%24AvailabilitySearchInputSearchView%24TextBoxMarketOrigin1=BWN
ControlGroupSearchView%24AvailabilitySearchInputSearchView%24TextBoxMarketDestination1=PEK
ControlGroupSearchView%24AvailabilitySearchInputSearchView%24DropDownListMarketDay1=11
ControlGroupSearchView%24AvailabilitySearchInputSearchView%24DropDownListMarketMonth1=2013-06
ControlGroupSearchView%24AvailabilitySearchInputSearchView%24DropDownListMarketDay2=11
ControlGroupSearchView%24AvailabilitySearchInputSearchView%24DropDownListMarketMonth2=2013-06
ControlGroupSearchView%24AvailabilitySearchInputSearchView%24DropDownListPassengerType_ADT=1
ControlGroupSearchView%24AvailabilitySearchInputSearchView%24DropDownListPassengerType_CHD=0
ControlGroupSearchView%24AvailabilitySearchInputSearchView%24DropDownListPassengerType_INFANT=0
ControlGroupSearchView%24AvailabilitySearchInputSearchView%24promoCodeID= 
```

所以你可以做的是：

```
# 1\. Get the frontpage to get the cookie set:
agent = Mechanize.new
page = agent.get(url)
# 2\. The use .search helper to extract the inputs you might need
# 3\. Submit the form by sending the postparams manually
result_page = agent.post("http://book.cebupacificair.com/Search.aspx?culture=en-us", {'__EVENTTARGET' => 'ControlGroupSearchView%24AvailabilitySearchInputSearchView%24LinkButtonNewSearch'}) # And of cause add the remaining params... 
```

我相信这种方法对你有用......

# php - PHP 文件上传器导致“找不到页面”

> ID：12151512
> 
> 赞同：0
> 
> 时间：2012-08-28T01:03:08.440
> 
> 标签：php, file-upload, forms

我已经为 PHP 文件上传器整理了一个 HTML 表单，但是当我使用该表单并尝试上传文件时，我会被发送到“未找到页面”，并且该文件永远不会在我的服务器上应该出现的位置结束。

这是表格：

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
<p><font size="2">*=Required</font></p>
  <b>Mod Name:*</b><br /><input type="text" name="modname" size="30"><br />
  <b>Author:*</b><br /><input type="text" name="author" size="30"><br />
  <b>Version:*</b><br /><input type="text" name="version" size="30"><br /><br />
  <b>Game:</b><select>
    <option value="morrowind">Morrowind</option>
    <option value="oblivion">Oblivion</option>
    <option value="skyrim">Skyrim</option>
    </select><br /><br />
 <p><b><font size="3">Dependencies:</font></b></p>
  <p>Morrowind</p>
   <input type="checkbox" value="expansion" name="tribunal" />Tribunal <br />
   <input type="checkbox" value="expansion" name="bloodmoon" />Bloodmoon <br />
   <input type="checkbox" value="mod" name="mge" />MGE <br />
   <input type="checkbox" value="mod" name="mwe" />MWE <br />
   <input type="checkbox" value="mod" name="mwse" />MWSE <br />
  <p>Oblivion</p>
   <input type="checkbox" value="expansion" name="knights" />Knights of the Nine <br />
   <input type="checkbox" value="expansion" name="isle" />Shivering Isles <br />
  <p>Skyrim</p>
   <input type="checkbox" value="expansion" name="dawnguard" />Dawnguard <br /><br />
<label for="description"><b>Description:</b></label><br />
 <textarea id="description" rows="4" cols="50"></textarea><br /><br />
<b>Uploader Name:</b><br /><input type="text" name="upname" size="30"><br /><br />
<label><b>Uploader Comments</b></label><br />
 <textarea id="uploader" rows="4" cols="50"></textarea><br /><br />
<b>Mirror Links:</b><br /><input type="text" name="mirror" size="50"><br /><br />
<label for="file"><b>Upload Mod:</b></label>
 <input type="file" name="file" id="file" /> 
 <br />
<input type="submit" name="submit" value="Submit" />
<p><font size="2">Maximum File Size: 400MB; Only Compressed Files Accepted (.zip, .rar, .7z)</font></p>
</form> 
```

这是上传的php文件：

```
 <?php
$allowedExts = array("zip, rar, 7z");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "application/zip")
|| ($_FILES["file"]["type"] == "application/x-rar-compressed")
|| ($_FILES["file"]["type"] == "application/x-7z-compressed"))
&& ($_FILES["file"]["size"] < 419430401)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Error: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 400) . " Mb<br />";
    echo "Stored in: " . $_FILES["file"]["tmp_name"];

 if (file_exists("uploads/mods/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "uploads/mods/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "uploads/mods/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

我哪里搞砸了？

我需要将 .php 文件放在上传目录中吗？表单信息去哪了？另外，我如何要求表单中的一些文本框？

谢谢，我有点迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:18:43.293

您可以检查 Web 服务器日志（如之前建议的那样），看看他们是否给您一个想法（通常他们会这样做）。在不知道您的文件/目录结构的情况下，这几乎是猜测。我注意到表单引用`upload_file.php`，然后您调用第二个代码上传 php。只是名字有误吗？

此外，请确保它与您的表单的 HTML 文件位于同一目录中。

如果您希望`upload_file.php`文件位于子目录中，您可以通过更改：

```
<form action="upload_file.php" method="post" enctype="multipart/form-data"> 
```

到：

```
<form action="subdirectory/upload_file.php" method="post" enctype="multipart/form-data"> 
```

# javascript - jQuery 事件构造函数

> ID：12151515
> 
> 赞同：5
> 
> 时间：2012-08-28T01:03:40.983
> 
> 标签：javascript, jquery, events

我使用了一些[jquery 工具](http://jquerytools.org/)，并开始浏览[twitter bootstrap src](https://github.com/twitter/bootstrap)。

我注意到的一件事是使用`$.Event`构造函数来触发事件。

在许多情况下，（例如引导模式）您会发现事件触发如下：

```
var e = $.Event('show');

this.$element.trigger(e); 
```

我不明白为什么这比直接调用要好：

```
this.$element.trigger('show'); 
```

所以我很想知道使用 jQuery Event 构造函数有什么好处。我在文档中读到您可以将任意属性附加到事件，这对我来说完全有意义。然而，我不明白的是，如果您根本不向事件添加任何属性，为什么使用构造函数*可能是有利的。*

有人可以向我解释为什么`$.Event`构造函数比使用事件字符串调用触发器更有优势吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:26:14.897

如果您想稍后向事件添加属性，它会更*灵活一些；*它可以帮助您了解事件触发后的*状态*，例如，如果有人调用[`stopPropagation()`](http://api.jquery.com/event.isPropagationStopped/)或[`preventDefault()`](http://api.jquery.com/event.isDefaultPrevented/).

除此之外，jQuery 将简单地获取事件类型 ( `string`)，将其包装在一个`$.Event`对象中并对其进行规范化。这是发生这种情况的jQuery的相关源代码：

```
event = typeof event === "object" ?
     // jQuery.Event object
     event[ jQuery.expando ] ? event :
     // Object literal
     jQuery.extend( jQuery.Event(type), event ) :
     // Just the event type (string)
     jQuery.Event(type); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:30:07.437

看了bootstrap源码后，相信你一定指的是这个：

```
var that = this
    , e = $.Event('show')

this.$element.trigger(e)

if (this.isShown || e.isDefaultPrevented()) return 
```

他正在定义`e`，以便他以后可以检查默认操作是否已被阻止`e.isDefaultPrevented()`。

# php - 谷歌地图信息窗口的 PHP XML

> ID：12151520
> 
> 赞同：0
> 
> 时间：2012-08-28T01:04:57.443
> 
> 标签：php, ajax, wordpress, google-maps-api-3

我想做的是从我的谷歌地图中获取以下信息。我知道 JavaScript 是客户端，而不是像 PHP 那样的服务器端，所以它甚至在 JS 运行之前就被加载了。问题是如果我要严格通过 PHP -> XML -> JS 将列 post_id 调用到 PHP 中，它不会加载链接。有没有办法只用 PHP 来做到这一点，并让它从标记表中为地图上的每个位置标记提取位置 post_id？我也读过 AJAX 是可能的，但我对 AJAX 了解不多。

```
boxText.innerHTML = "<div class='mapname'>" + '<a href="<?php echo get_permalink( $post_id ); ?>">' + name + '</a>' + "</div><i>" + listtype + "</i> <br/>" + address + "<br/>" + phone; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:56:02.370

这是一个完整的 PHP-Javascript AJAX 示例。只需保存名为“myServerScript.php”的文件并将浏览器指向它。PHP 打印通过 AJAX 调用相同 PHP 脚本的 javascript，PHP 响应并且 javascript 处理响应。

确保您的 PHP 安装配置为接受短分隔符`<?...?>`

```
<?

if(isset($_GET['msg'])){
    print "alert('AJAX response from PHP - Javascript said:". $_GET['msg']."')";
}
else{
    print <<<qq
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>AJAX Example: (by Marcelo)</title>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script>
// Sorry, I can't be bothered typing "google.maps." every time. ;-)
var G = google.maps;

var zoom = 4;
var centerPoint = new G.LatLng(40.178873, -96.767578);
var container;
var map;

function ajaxLoad(url,callback,plain) {
    var http_request = false;

    if (window.XMLHttpRequest) { // Mozilla, Safari, ...
        http_request = new XMLHttpRequest();
        if (http_request.overrideMimeType && plain) {
            http_request.overrideMimeType('text/plain');
        }
    } else if (window.ActiveXObject) { // IE
        try {
            http_request = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                http_request = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {}
        }
    }
    if (!http_request) {
        alert('Giving up :( Cannot create an XMLHTTP instance');
        return false;
    }
    http_request.onreadystatechange =  function() {
        if (http_request.readyState == 4) {
            if (http_request.status == 200) {
                eval(callback(http_request));
            }
            else {
                alert('Request Failed: ' + http_request.status);
            }
        }
    };
    http_request.open('GET', url, true);
    http_request.send(null);
}
var url = "myServerScript.php?msg=hello from javascrpt";
ajaxLoad(url, parseResults, true);

function parseResults(req){
    var text = req.responseText;
    eval(text);
}

function load() {
    container = document.getElementById('mapDiv');

    var myOptions = {
        zoom: zoom,
        center: centerPoint,
        mapTypeId: G.MapTypeId.ROADMAP,
        rotateControl: true,
        keyboardShortcuts:false
    }
    map = new G.Map(container, myOptions);
 google.maps.event.addListener(map,'click',function(mev){
var url = "myServerScript.php?msg="+mev.latLng;
ajaxLoad(url, parseResults, true);    
  });
}

window.onload = load;

</script>
</head>
<body>
Hello from PHP.
<h2>Click on the map to send the lat/lon to PHP</h2>
<div id="mapDiv" style="width: 800px; height: 450px;"></div>
</body>
</html>

qq;

}

?> 
```

[**现场版在这里**](http://maps.forum.nu/myServerScript.php)

# css - 单选按钮在 Chrome 中显示不需要的白色背景。火狐没问题

> ID：12151523
> 
> 赞同：15
> 
> 时间：2012-08-28T01:05:39.297
> 
> 标签：css, google-chrome, radio-button

在 Google Chrome 中，单选按钮在圆圈周围显示不需要的白色背景。这未按预期在 Firefox 中显示。

请检查这些图像。 ![在此处输入图像描述](../Images/5c79c6ed2c3a440745283b1b8b11477c.png)

她是有问题的页面的直接链接（检查 Firefox 和 Chrome） [https://my.infocaptor.com/dash/mt.php?pa=hr_dashboard3_503c135bce6f4](https://my.infocaptor.com/dash/mt.php?pa=hr_dashboard3_503c135bce6f4)

我可以为 Chrome 应用任何 CSS 技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:50:36.880

这是 Chrome 中的一个[已知](http://code.google.com/p/chromium/issues/detail?id=119698)错误，没有真正的解决方法。

我此时看到和使用的唯一选项是使用带有复选框图像的精灵表。我做了一个小提琴，用我在互联网上找到的一些随机精灵展示给你看：

[解决方法](http://jsfiddle.net/hannesmolsen/pSfeP/1/)

HTML：

```
<div id="show">
    <input type="radio" id="r1" name="rr" />
    <label for="r1"><span></span>Radio Button 1</label>
<p />
    <input type="radio" id="r2" name="rr" />
    <label for="r2"><span></span>Radio Button 2</label>
</div> 
```

CSS：

```
div#show {
    width:100%;
    height: 100%;
    background:black;
    margin: 10px;
    padding: 10px;
}

input[type="radio"] {
    /* Uncomment this to only see the working radio button */
    /* display:none; */
}

input[type="radio"] + label {
    color:#f2f2f2;
    font-family:Arial, sans-serif;
    font-size:14px;
}

input[type="radio"] + label span {
    display:inline-block;
    width:19px;
    height:19px;
    margin:-1px 4px 0 0;
    vertical-align:middle;
    background:url(http://d3pr5r64n04s3o.cloudfront.net/tuts/391_checkboxes/check_radio_sheet.png) -38px top no-repeat;
    cursor:pointer;
}

input[type="radio"]:checked + label span {
    background:url(http://d3pr5r64n04s3o.cloudfront.net/tuts/391_checkboxes/check_radio_sheet.png) -57px top no-repeat;
} 
```

![带有精灵的单选按钮](../Images/ffc91aea0e74f0f8037e2b09ada267b4.png)

您可以在所需的设计中使用单选按钮创建自己的精灵...

希望对您有所帮助，如果您还有其他问题，请告诉我。

-汉内斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T09:38:47.300

我知道这是一个旧线程，但我遇到了同样的问题，我花了一段时间才弄清楚，所以如果其他人有同样的问题，我会发布这个。我真的很意外地想通了。我正在查看其他内容并使用 ctrl 和滚动放大页面，并看到该单选按钮不再具有白色背景（并且看起来更好）。所以我只是说：

```
zoom: 0.999; 
```

在正确的 CSS 类中，这为我修复了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T17:11:40.930

将 radio 元素包裹在一个 div 中，并将该 div 的溢出设置为隐藏，并将边框半径设置为 100px。然后将单选输入设置为显示块，并且没有边距。这对我有用：

标记：

```
<div class="radio_contain">
    <input type="radio" id="r1" name="r1">
</div> 
```

CSS：

```
.radio_contain {
  display: inline-block;
  border-radius: 100px;
  overflow: hidden;
  padding: 0;
}
.radio_contain input[type="radio"] {
  display: block;
  margin: 0;
} 
```

# visual-studio-2012 - 如何使 Visual Studio 2012 颜色看起来像 Visual Studio 2010？

> ID：12151524
> 
> 赞同：55
> 
> 时间：2012-08-28T01:06:00.393
> 
> 标签：visual-studio-2012

我不喜欢 Visual Studio 2012 中提供的深色和浅色主题。

如何更改标题栏、菜单栏、工具栏等的颜色，使它们看起来像 Visual Studio 2010 中的颜色？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-05T18:08:26.897

蓝色主题已重新添加到 Visual Studio 2012 Update 2 中，无需扩展。

[http://support.microsoft.com/kb/2797912](http://support.microsoft.com/kb/2797912)

![在此处输入图像描述](../Images/8394450b24dd85bb26b7789f80ab087e.png)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-05T15:07:50.210

下载并安装适用于 VS2012的[Color Theme Editor Extension 2012 。](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)

（它允许您应用预定义的主题或为自己自定义主题 - 但您可以为 VS2010 样式选择“蓝色”主题）

（编辑：或使用自更新 2 起现在内置于 VS2012 中的“蓝色”主题）

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-03-11T19:18:03.767

我写[了一篇博文，详细解释了如何让 VS 2012 尽可能地像 VS 2010](http://www.not-implemented.com/make-visual-studio-2012-look-like-vs2010/)。我会在这里总结一下。

*   **用旧的替换新的单色图标**并将**菜单图标设为小写**。

    为此，您需要安装 2010*和*2012 版本以及[Visual Studio Icon Patcher](http://vsip.codeplex.com/)工具。启动工具（它是一个命令行应用程序）并输入`extract`，然后`inject`最后输入`menus`。

*   **将颜色主题更改为 blue**。

    下载[Visual Studio 2012 颜色主题编辑器](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)，转到“工具 - 自定义颜色”并选择蓝色主题。

*   **最终结果**：

    ![在此处输入图像描述](../Images/2c645c5c9b83d62d55ce0a65c72de499.png)

    它不完全像 VS2010，但它非常接近。

# visual-studio-2010 - 启动 CUDA 调试调用问题 - 值不能为空

> ID：12151530
> 
> 赞同：1
> 
> 时间：2012-08-28T01:06:53.623
> 
> 标签：visual-studio-2010, debugging, cuda, visual-studio-debugging

我想开始：

*   平台 - Win7 x64
*   框架 - 使用 VS 2010 的 CUDA 5.0 RC
*   调试器 - Nsight VS 版本 2.2

在每个调试会话之后，我无法立即再次调试（如果需要），因为我看到一个 Visual Studio 错误弹出窗口，指出“值不能为空。参数名称：pSrcNativeVariant”。如果我重建，我可以很好地调用调试*会话。*

重建并没有完全摆脱我这个问题。在调试会话中，如果我尝试打开 CUDA Warp Watch 窗口，我会看到相同的内容。我以前从未见过此错误，并且在找到解决方案方面没有取得太大成功。我假设它与我配置某些东西的方式有关，因为错误中没有任何指示 CUDA（而且我没有明确使用 pSrcNativeVariant）。如果有人能给我一些启发或指出正确的方向，我将不胜感激。

ps 抱歉，我无法附上图片（没有足够的代表）

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:00:42.883

Nsight 2.2 仅支持 CUDA 4.2 和 4.1。如需 CUDA 5.0 支持，请等待 10 月下旬推出的 Nsight 3.0。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:06:54.420

这听起来很奇怪。我会尝试卸载并重新安装。卸载所有CUDA的东西然后VS。然后重新安装 VS 和 Nsight（按此顺序）。我会下载捆绑了 CUDA 工具包的 Nsight 版本。

# php - 找不到codeIgniter 404

> ID：12151534
> 
> 赞同：-1
> 
> 时间：2012-08-28T01:07:57.380
> 
> 标签：php, codeigniter

在我的本地计算机上，我正在使用 xampp 并且 codeigniter 正在运行，但是在我将 codeigniter 应用程序移动到服务器后，我收到 404 错误 Not found。

```
The requested URL /app/index.php/Welcome was not found on this server.

Apache/2.2.9 (Debian) PHP/5.2.6-1+lenny16 with Suhosin-Patch Server at XXXXXXXXX.com.au Port 81 
```

我试过改变配置

```
$config['base_url']= 'http://XXXXXXXXX.com.au/';
$config['uri_protocol'] = 'REQUEST_URI'; 
```

但它并没有解决问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:32:48.310

答案就在这里——大写的“W”。

```
The requested URL /app/index.php/Welcome was not found on this server. 
```

您从 Windows WAMP 设置转移到我敢打赌 Linux Apache/PHP 服务器。

Windows 不区分大小写。Linux 区分大小写。

因此，请确保您所有的大小写都是正确的。将“欢迎”更改为“欢迎”

**编辑 - 澄清它应该是这样的：**

**文件名：** “welcome.php”<-小写“w”

**类名：**欢迎类扩展 CI_Controller {} <- 大写“W”

**调用路由：** redirect ('welcome') <- 小写“w”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:30:16.520

CodeIgniter 文档说通常最好将 base_url 字段留空，这样它就可以自己确定正确的 URL。尤其强调 CI2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T01:19:48.337

如果您的应用程序安装在 中`/app`，那么您需要将 base_url 更新为：

```
$config['base_url']= 'http://XXXXXXXXX.com.au/app/'; 
```

# bash - 当没有“return”语句时，bash 函数返回什么？

> ID：12151539
> 
> 赞同：4
> 
> 时间：2012-08-28T01:09:41.637
> 
> 标签：bash, shell, return-value

bash 函数的返回值是最后执行命令的状态吗？

我写了这个测试，看起来就是这样。我只是想验证一下。显然之前没有人问过这个问题，教程也没有提到这一点。

测试程序：

```
funa() {
  echo "in funa";
  true;
};

funb() {
  echo "in funb"
  false;
};

funa && echo "funa is true";    
funb && echo "funb is true"; 
```

运行程序时的输出：

```
in funa
funa is true
in funb 
```

有人知道答案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T01:14:24.073

是的。每`man bash`：

> Shell 函数定义
> 
> 执行时，函数的退出状态是在主体中执行的最后一个命令的退出状态。（见下面的功能。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T01:14:54.890

您是否尝试阅读手册页？它在里面。

> 执行时，函数的退出状态是在主体中执行的最后一个命令的退出状态。（见下面的功能。）

# bash - 用于运行动态命令集的 Bash 脚本提示

> ID：12151540
> 
> 赞同：1
> 
> 时间：2012-08-28T01:09:52.077
> 
> 标签：bash

我正在尝试编写一个包含多个命令的脚本，用户将被提示预先运行这些命令，并根据用户输入运行这些命令的动态集

因此，例如，我为需要运行的命令设置函数

```
 command1 () { some_command; }
    command2 () { some_command; }
    command3 () { some_command; }
    command4 () { some_command; } 
```

紧接着是一连串的提示

```
Do you want to run command1?
Do you want to run command2?
Do you want to run command3?
Do you want to run command4? 
```

对于这个例子，假设 Y、N、Y、Y，所以我需要运行 command1、command3、command4，我希望能够理解这一点。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:36:27.783

您可能（或可能不）想要考虑`select`内置：

> `select`
> 
> select 构造允许轻松生成菜单。它的语法与 for 命令几乎相同：
> 
> ```
> select name [in words ...]; do commands; done 
> ```
> 
> in 之后的单词列表被扩展，生成项目列表。扩展的单词集打印在标准错误输出流上，每个单词前面都有一个数字。如果 'in words' 被省略，则打印位置参数，就好像 'in "$@"' 已被指定。然后显示 PS3 提示并从标准输入中读取一行。如果该行包含与显示的单词之一相对应的数字，则将 name 的值设置为该单词。如果该行为空，则再次显示单词和提示。如果读取 EOF，则选择命令完成。读取的任何其他值都会导致 name 设置为 null。读取的行保存在变量 REPLY 中。
> 
> 在每次选择之后执行命令，直到执行中断命令，此时选择命令完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T01:27:39.087

```
read -p "Do you want to run command1? " c1  
read -p "Do you want to run command2? " c2  
read -p "Do you want to run command3? " c3  
read -p "Do you want to run command4? " c4

if [ "$c1" = "Y" ]; then  
    command1  
fi  

if [ "$c2" = "Y" ]; then  
    command2  
fi

if [ "$c3" = "Y" ]; then  
    command3  
fi

if [ "$c4" = "Y" ]; then  
    command4  
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T01:15:29.513

读取命令正是您所需要的[http://www.vias.org/linux-knowhow/bbg_sect_08_02_01.html](http://www.vias.org/linux-knowhow/bbg_sect_08_02_01.html)

简短的例子

将用户输入应用于变量“foo”

```
# Just showing a nice message along with it.
echo -n "Would you like to run command1? (Y/N) "
read foo 
```

然后你可以测试 foo 变量的值

```
if [ "$foo" == "Y" ]; then
  command1
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T01:15:41.930

如果您将用户输入输入到一系列变量中（使用[另一个答案](https://stackoverflow.com/a/12151570/920798)中详述的读取命令），每个命令一个（调用它们，例如 C1、C2、C3），那么在您接受用户输入后，您可以编写一系列查看这些变量值的 if 语句

```
if [ $C1 == "Y" ]; then
    command1
fi

if [ $C2 == "Y" ]; then
    command2
fi

if [ $Cn == "Y" ]; then
    commandN
fi 
```

这些帮助有用？

# parsing - ANTLR 3 RewriteEmptyStreamException 上的 ID/NAME 区别

> ID：12151543
> 
> 赞同：1
> 
> 时间：2012-08-28T01:10:25.977
> 
> 标签：parsing, antlr, antlr3

给定词法分析器

```
fragment
FRAGID : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')* ;
ID  : FRAGID;
NAME: FRAGID ('.' FRAGID)*; 
```

鉴于语法

```
var_def: type=ID vname=ID ASSIGN expr       
   -> ^(VARDEF $type $vname expr) 
   ; 
```

有选项

```
options
{
  language=CSharp3; 
  output=AST;
} 
```

并给出代码

```
int i = 0 
```

一切正常。

但是，当我想允许在赋值中使用 NAME 时（引用另一个对象）

```
var_def
  : type=(NAME|ID) vname=ID ASSIGN expr 
  -> ^(VARDEF $type $vname expr) 
  ; 
```

我在运行时遇到*RewriteEmptyStreamException*

Antlr.Runtime.Tree.RewriteEmptyStreamException ：令牌类型

在 c:\dev\stringtemplate_main\antlr\antlr3-main\runtime\CSharp3\Sources\Antlr3.Runtime\Tree\RewriteRuleElementStream.cs 中的 Antlr.Runtime.Tree.RewriteRuleElementStream.NextCore()：第 200 行

在 c:\dev\stringtemplate_main\antlr\antlr3-main\runtime\CSharp3\Sources\Antlr3.Runtime\Tree\RewriteRuleTokenStream.cs 中的 Antlr.Runtime.Tree.RewriteRuleTokenStream.NextNode()：第 62 行

用语法做更多的调查

```
var_def
  : type=NAME vname=ID ASSIGN expr 
  -> ^(VARDEF $type $vname expr) 
  ; 
```

我得到一个

Antlr.Runtime.Tree.RewriteEarlyExitException ：引发了“Antlr.Runtime.Tree.RewriteEarlyExitException”类型的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:11:30.990

The `'i'` in:

```
int i = 0 
```

will always become an `ID` token. Because both `ID` and `NAME` match a single `FRAGID`, and since `ID` is defined before `NAME`, there will never be a `NAME` token (in case of a single `FRAGID`). It will always become an `ID` token.

That is why this won't work:

```
var_def
  : type=NAME vname=ID ASSIGN expr 
  -> ^(VARDEF $type $vname expr) 
  ; 
```

You must realize that the lexer does *not* create tokens depending on what token the parser is trying to match at a specific time. The lexer works independently from the parser.

Try avoiding the assignment of a label to a parenthesized group of tokens/rules. Instead of:

```
var_def
  : type=(NAME|ID) vname=ID ASSIGN expr -> ^(VARDEF $type $vname expr) 
  ; 
```

do this:

```
var_def
 : type ID ASSIGN expr -> ^(VARDEF type ID expr) 
 ;

type
 : NAME
 | ID
 ; 
```

# http - POST 请求应该呈现 HTML 还是重定向？

> ID：12151551
> 
> 赞同：7
> 
> 时间：2012-08-28T01:12:24.333
> 
> 标签：http, post

POST 请求应该呈现 HTML 还是重定向？

当您在页面上刷新并让浏览器告诉您，您将再次发布数据时，我讨厌它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T01:18:25.310

是的，最好[在 POST 之后重定向](http://en.wikipedia.org/wiki/Post/Redirect/Get)以避免这种情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T01:23:11.013

是的。它应该发送一个实体或重定向！

（对不起，旧的编程笑话有时不得不出来）。

这真的取决于你是否可以有意义地给 GET 一些东西，这很有意义。

示例：我买了东西，我得到一个页面，上面写着“谢谢，yadda yadda 订单号，收据，yadda”。

那应该是 303 See Other 重定向，以便我获取包含该信息的页面。我可以为它添加书签以备后用，刷新只会刷新 GET。快乐的时光。

但是有时，仅呈现立即响应才有意义，并且如果它们刷新，则重复实际操作，并且书签毫无意义。那不应该是重定向。

在大多数情况下，无论如何，尽量减少后者。如果您因为某些事情失败而必须将它们返回到表单中，这虽然最有用 - 没有人想要失败表单的书签，他们想要修复需要修复的内容并继续使用它。

请注意，当您从 POST 重定向时，许多服务器端系统（ASP 等）使用 302，这严格意味着它应该再次 POST，但几乎没有浏览器这样做。相反，要更清楚：

1.  如果你想再次重定向 POST，那么 POST 会转到不同的 URI - 好吧，那还有其他问题 - 但如果你真的必须这样做，那么 307
2.  如果您想在 POST 之后使用 GET 来解释结果，即 303。它明确表示“现在执行 GET”。

# windows - 使用 curl 在启动时更新主机文件的批处理脚本

> ID：12151553
> 
> 赞同：0
> 
> 时间：2012-08-28T01:12:48.130
> 
> 标签：windows, curl, batch-file, hosts

我正在尝试让 .bat 脚本在启动时运行并用新的清除主机文件。

我有这个在 Windows Server 2008 Standard X86 上工作，它已经持续工作了一年多。我安装了“curl”，将其硬链接到 System32 并使用本地组策略安排以下 .bat 脚本：

```
curl x.x.x.x/latest/hosts > C:\Windows\System32\drivers\etc\hosts 
```

现在我想让相同的脚本在 windows server 2008 R2 上运行。我有同样的设置，如果我双击 .bat 文件，它就可以工作。但是，当脚本通过 GPO 在启动时运行时，它只是完全擦除主机文件，我必须手动登录并双击 .bat 脚本。

知道是什么原因造成的吗？Server 2008 R2 和 Server 2008 STD 有区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:40:30.410

尝试

```
curl.exe x.x.x.x/latest/hosts > C:\Windows\System32\drivers\etc\hosts.tmp
move C:\Windows\System32\drivers\etc\hosts.tmp C:\Windows\System32\drivers\etc\hosts 
```

# android - 不支持添加视图

> ID：12151556
> 
> 赞同：2
> 
> 时间：2012-08-28T01:13:14.863
> 
> 标签：android, button

我是 android 编程新手，我遇到了一个问题。这是代码片段

```
nums = (GridView) findViewById(R.id.nums);
for(int i=0; i < 10; i++) {
    Button b = new Button(this);
    b.setText(i+"");
    b.setTextSize(15);
    b.setTextColor(Color.CYAN);
    b.setOnClickListener(numsClickHandler);
    nums.addView(b, 20, 20);
} 
```

当它到达时出现问题`nums.addView(b, 20, 20);`

```
caused by: java.lang.unsupportedoperationexception: addView(View, int, layoutparams) is    
not supported in adapterview 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T01:18:29.953

错误消息很清楚，`GridView`它是一个不允许直接向其添加视图的 AdapterView，而是像 ListView 一样工作，您需要为其提供适配器，并在您的适配器中提供视图。[GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html)教程可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:36:22.000

首先，让我们创建一个布局调用 grid_item.xml：

```
<Button
    android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="numberClick"
    android:textColor="@color/cyan"
    android:textSize="15sp" /> 
```

（以及您想要的任何其他属性）

接下来，要使用此布局在网格中添加新项目，Adapter.add()：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.grid_item, new ArrayList<String>());
for(int i = 0; i < 10; i++)
    adapter.add(String.valueOf(i));
grid.setAdapter(adapter); 
```

当然，您还需要一个`numberClick`从 XML`onClick`属性调用的方法：

```
public void onClick(View v) {
    // add your numClickHandler code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:22:45.007

试试这个....

```
nums = (GridView) findViewById(R.id.nums);
for(int i=0; i < 10; i++) {
    Button b = new Button(this);
   -->** b.setLayoutParams(new GridView.LayoutParams(100, 100));**
    b.setText(i+"");
    b.setTextSize(15);
    b.setTextColor(Color.CYAN);
    b.setOnClickListener(numsClickHandler);
    nums.addView(b);
} 
```

# android - 动作栏 - 动作项的定位

> ID：12151569
> 
> 赞同：4
> 
> 时间：2012-08-28T01:15:19.920
> 
> 标签：android, android-layout, android-actionbar

我正在为一个通过 wifi/蓝牙远程控制另一个设备的应用程序做一个 android 4+ 布局。而且我正在尝试尽可能地使用操作栏。

在这个应用程序的情况下，我想要一个选择器来选择远程设备的基本系统操作模式。在它的右边，我想要一个“编辑设置”按钮。所以用户既可以选择一种操作模式，也可以编辑选择的操作模式。我想要选择器旁边的编辑按钮，因为将它们分组是有意义的。这两个操作显示了人们通常会在应用程序中使用的大多数功能。

我正在使用android活动的默认示例代码，正如向导“new>other>android activity”在我的项目中插入的那样，它有一个选择器已经设置并工作。

问题是，选择器被放置在操作栏的最左侧，而所有其他操作项都从右侧开始并移动到左侧。我似乎无法将“编辑”操作项的位置立即锁定在插入的选择器的右侧。

菜单 XML 中的项目如下所示：

```
<item android:id="@+id/edit_configuration"
    android:title="Edit"
    android:orderInCategory="2"
    android:layout_gravity="left"
    android:showAsAction="always" />
<item android:id="@+id/menu_settings"
    android:title="@string/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never" /> 
```

需要使用活动类的 onCreate 中的代码插入选择器。

```
 // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

    // Set up the dropdown list navigation in the action bar.
    actionBar.setListNavigationCallbacks(
            // Specify a SpinnerAdapter to populate the dropdown list.
            new ArrayAdapter(
                    actionBar.getThemedContext(),
                    android.R.layout.simple_list_item_1,
                    android.R.id.text1,
                    new String[]{
                            getString(R.string.title_section1),
                            getString(R.string.title_section2),
                            getString(R.string.title_section3),
                    }),
            this); 
```

我已经在菜单 XML 中尝试了标准 layoutGravity 属性，但是虽然它不会导致错误，但它也没有做任何我能看到的事情。

![截屏](../Images/848e25db9c0e51a4f233fe800892613c.png)

如果有人知道如何将我的编辑按钮附加到我的选择器的右侧，我会很高兴听到它是如何完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:24:29.483

系统控制操作项的位置，以在所有应用程序中提供通用的外观和感觉；换句话说，没有办法实现这一点（除非其他人不知道）。您也许可以扩展操作栏，或者以某种方式重写它以允许重新定位操作项，但这超出了我的技能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T15:20:12.037

从 oncreateoptionsmenu 中的两个菜单 xml 文件膨胀。最后膨胀的文件将在最右边的位置。

```
 public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
     inflater.inflate(R.menu.menu_one, menu);
     inflater.inflate(R.menu.menu_two, menu); 
```

menu_two 的项目将位于最右侧。

# jasper-reports - Jasper Reports - 如何创建交叉表派生度量？

> ID：12151573
> 
> 赞同：2
> 
> 时间：2012-08-28T01:16:02.097
> 
> 标签：jasper-reports, ireport, crosstab, measure

我需要在 jasperreport 交叉表中创建一个派生列，例如

```
Region   | Type 01 | Type 02 | Derived Measure
zone 1   | Sum     | Sum     | Type 01 / Type 02 ( only in zone 1)
zone 2   | Sum     | Sum     | Type 01 / Type 02 ( only in zone 2) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T13:13:09.097

交叉表在报表执行时填充数据。因此，不可能在已计算的填充值上找到更多计算，而是需要在 SQL 查询中定义 Type01/Type02 以便您可以进行另一个度量。

谢谢，萨达卡

# wolfram-mathematica - 如何绘制 2 行并指定列表中的第一列是 x 轴？

> ID：12151575
> 
> 赞同：0
> 
> 时间：2012-08-28T01:16:16.570
> 
> 标签：wolfram-mathematica

我有一个包含 5 个元素的列表；

```
{{1, 6, 4.5}, {2, 7, 4.5}, {3, 5, 5}, {4, 8, 5}, {5, 9, 5}, {6, 10, 5}} 
```

我想绘制它，以便第一列是 x 轴，而其他 2 列将被绘制为线。像这样：

第 1 行将具有这些值 6、7、5、8、9、10，第 2 行将以相同的方式构建。

我累了：

```
ListPlot[data3, Joined -> True, Frame -> True,
  FrameLabel -> {"Test Number", "TS Index"}, PlotRange -> All] 
```

结果图表不是我想要的。

如何将其绘制为 2 线图？另外，每个元素内的数字的技术名称是什么？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:47:46.727

```
lst = {{1,6,4.5},{2,7,4.5},{3,5,5},{4,8,5},{5,9,5},{6,10,5}}
line1 = lst[[All,{1,2}]]
line2 = lst[[All,{1,3}]]
ListPlot[{line1,line2},Joined->True,Mesh->All,AxesOrigin->{0,0}] 
```

![在此处输入图像描述](../Images/d352a645bc88219c5812c0fab80bf6b1.png)

# python - 我制作了一个自动更换壁纸的脚本，它可以在一台计算机上运行， 但不能在另一台计算机上运行， 不知道为什么

> ID：12151579
> 
> 赞同：1
> 
> 时间：2012-08-28T01:16:30.987
> 
> 标签：python, shell, gnome-3

我的标题可能有点误导，因为我实际上没有访问工作计算机的权限，因此我无法验证它是否真的在另一台计算机上工作，但有人通过 IM 告诉我它可以在他们的计算机上工作，但它对我不起作用。

这是脚本，它仅使用 python 2.7.3 并使用 bash wget 并设置背景。

```
#!/usr/bin/env python
import urllib2
import os
from gi.repository import Gio

response = urllib2.urlopen("http://wallbase.cc/random/12/eqeq/1366x768/0.000/100/32")
page_source = response.read()
thlink_pos = page_source.find("ico-X")
address_start = (page_source.find("href=\"", thlink_pos) + 6)
address_end = page_source.find("\"", address_start + 1)

response = urllib2.urlopen(page_source[address_start:address_end])
page_source = response.read()

bigwall_pos = page_source.find("bigwall")
address_start = (page_source.find("src=\"", bigwall_pos) + 5)
address_end = page_source.find("\"", address_start + 1)

address = page_source[address_start:address_end]

slash_pos = address.rfind("/") + 1

pic_name = address[slash_pos:]

bashCommand = "wget " + page_source[address_start:address_end]
os.system(bashCommand)

print "Does my new image exists?", os.path.exists(os.getcwd() + "/" + pic_name)

settings = Gio.Settings.new("org.gnome.desktop.background")
settings.set_string("picture-uri", "file://" + os.getcwd() + "/" + pic_name) 
```

对我来说，一切正常，解析 HTML，正确下载图像，验证图像路径，但没有图像更改。我使用双显示器，这是我唯一能想到的。我不使用任何特殊配置。我也在使用最新的 beta 版 nvidia 驱动程序，我认为这无关紧要。我也使用compiz。Ubuntu 12.04 x86。

```
gsettings get org.gnome.desktop.background picture-uri 
```

该行也正确返回正确的壁纸图像。

# java - 巨大的 LinkedList 导致 GC 开销限制，还有其他解决方案吗？

> ID：12151580
> 
> 赞同：3
> 
> 时间：2012-08-28T01:16:33.220
> 
> 标签：java, memory, linked-list, hashmap

这是我的代码：

```
 public void mapTrace(String Path) throws FileNotFoundException, IOException {
    FileReader arq = new FileReader(new File(Path));
    BufferedReader leitor = new BufferedReader(arq, 41943040);
    Integer page;
    String std;
    Integer position = 0;

    while ((std = leitor.readLine()) != null) {
        position++;
        page = Integer.parseInt(std, 16);
        LinkedList<Integer> values = map.get(page);
        if (values == null) {
            values = new LinkedList<>();
            map.put(page, values);
        }
        values.add(position);
    }

    for (LinkedList<Integer> referenceList : map.values()) { 
        Collections.reverse(referenceList); 
    }

} 
```

这是HashMap结构

```
 Map<Integer, LinkedList<Integer>> map = new HashMap<>(); 
```

对于 50mb - 100mb 的跟踪文件，我没有任何问题，但对于更大的文件，我有：

```
Exception in thread "AWT-EventQueue-0" java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

我不知道反向方法是否会增加内存使用量，LinkedList 是否比其他 List 结构使用更多空间，或者我将列表添加到地图的方式是否占用了更多空间。有谁可以告诉我是什么占用了这么多空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T02:12:30.793

> 有谁可以告诉我是什么占用了这么多空间？

简短的回答是，使用空间的可能是您选择的数据结构的空间开销。

1.  据我估计，`LinkedList<Integer>`64 位 JVM 上的 a 使用列表中每个整数大约 48 字节的存储空间，包括整数本身。

2.  据我估计，`Map<?, ?>`在 64 位机器上，每个条目将使用 48 字节的存储区域，*不包括*表示键和值对象所需的空间。

现在，您的跟踪大小估计对我来说太模糊了，无法插入数字，但我预计 1.5Gb 的跟踪文件需要超过 2Gb 的堆。

* * *

鉴于您提供的数字，一个合理的经验法则是跟踪文件将在堆内存中占用大约其文件大小的 10 倍......使用您当前使用的数据结构。

您不希望将 JVM 配置为尝试使用比可用物理 RAM 更多的内存。否则，您很可能将机器推入颠簸状态......并且操作系统可能会开始杀死进程。因此，对于 8Gb 机器，我不建议使用 -Xmx8g。

综上所述，使用 8Gb 的机器，您应该能够处理 600Mb 的跟踪文件（假设我的估计是正确的），但 1.5Gb 的跟踪文件是不可行的。如果您真的需要处理那么大的跟踪文件，我的建议是：

*   为您的特定用例设计和实现自定义集合类型，以更有效地使用内存，

*   重新考虑你的算法，这样你就不需要将整个跟踪文件保存在内存中，或者

*   买一台更大的机器。

* * *

> 在阅读您的评论之前，我做了一些测试，我输入了 -Xmx14g 并处理了 600mb 文件，花了几分钟（大约 10 分钟），但效果很好。

该`-Xmx14g`选项设置最大堆大小。根据观察到的行为，我希望 JVM 不需要那么多内存......并且没有从操作系统请求它。如果您在任务管理器中查看了内存使用情况，我希望您会看到与此一致的数字。

> 然后我把 -Xmx18g 并尝试处理 1,5gb 文件，它已经运行了大约 20 分钟。我在任务管理器中的记忆是从 7,80 到 7,90。我想知道这是否会完成，我怎么能使用比我拥有的更多的内存？它使用HD作为虚拟内存吗？

是的，它就是这样做的。

是的，您的进程虚拟地址空间的每一页对应于硬盘上的一个页。

如果您拥有的虚拟页面多于物理内存页面，那么在任何给定时间，其中一些虚拟内存页面将仅存在于磁盘上。当您的应用程序尝试使用其中一个非常驻页面时，VM 硬件会生成一个中断，并且操作系统会找到一个未使用的页面并从磁盘副本中填充它，然后将控制权交还给您的程序。但是，如果您的应用程序很忙，那么它将不得不通过逐出另一个页面来*创建*该物理内存页面。这可能涉及将被驱逐页面的内容写入磁盘。

最终结果是，当您尝试使用比物理内存多得多的虚拟地址页时，应用程序会生成大量中断，从而导致大量磁盘读取和写入。这被称为颠簸。如果您的系统抖动得太厉害，系统将花费大部分时间等待磁盘读取和写入完成，并且性能将急剧下降。在某些操作系统上，操作系统会尝试通过终止进程来“修复”问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:25:43.280

除了斯蒂芬相当合理的回答之外，一切都有其限制，您的代码根本不可[扩展](http://en.wikipedia.org/wiki/Scalability)。

如果输入“大”（如您的情况），唯一合理的方法是基于流的方法，虽然（通常）编写起来更复杂，但使用的内存/资源非常少。本质上，您只在内存中保存处理*当前*任务所需的内容，然后尽快释放它。

您可能会发现 unix 命令行工具是您最好的武器，也许使用 , 等的组合`awk`将`sed`您`grep`的原始数据处理成一个可用的“最终格式”。

我曾经阻止一位同事编写 java 程序来读取和解析 XML 并向数据库发出插入语句：我向他展示了如何使用一系列管道命令生成可执行 SQL，然后将其直接管道传递到数据库命令行工具. 花了大约 30 分钟才把它弄好，但工作完成了。而且文件很大，所以在 java 中它需要一个 SAC 解析器和 JDBC，这并不好玩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:07:24.560

为了构建这个结构，我会将这些数据放在一个键/值数据存储中，比如[berkeleydb](http://www.oracle.com/technetwork/database/berkeleydb/overview/index-093405.html) for java。

伪代码

```
putData(db,page,value)
 {
 Entry key=new Entry();
 Entry data=new Entry();
 List<Integer> L=new LinkedList<Integer>();;
 IntegerBinding.intToEntry(page,key);
 if(db.get(key,data)==OperationStatus.SUCCESS)
    {
    TupleInput t=new TupleInput(data);
    int n=t.readInt();

    for(i=0;i< n;++n) L.add(n);
    }

  L.add(value);
  TupleOutput out=new TupleOutput();
  out.writeInt(L.size());

  for(int v: L)  out.writeInt(v);
  data=new Entry(out.toByteArray());
  db.put(key,data);
 } 
```

# c# - C# - 使用 BackgroundWorker 与多个 FtpWebRequest 错过的文件传输

> ID：12151585
> 
> 赞同：0
> 
> 时间：2012-08-28T01:17:30.907
> 
> 标签：c#, multithreading, ftp, backgroundworker, ftpwebrequest

我有一堆文件，我正在使用 C# 将 FtpWebRequest 对象与 BackgroundWorker 一起传输到单个 FTP 服务器。这是一对一的关系。因此，对于每个 FtpWebRequest，都有一个 BackgroundWorker 来完成这项工作。我解雇了其中几个 BackgroundWorker 来发送我想要的所有文件。

问题是它被击中或错过。有时所有文件都被传输，有时有些文件丢失。

目前我正在使用一种解决方法，我检查文件是否存在于服务器上，如果不存在，我尝试再次发送。这行得通，但我觉得这是对真正问题的绷带。

Stackoverflow ...您认为这里有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:29:01.633

我通常不使用 BackgroundWorker，而是倾向于使用 Threads、Tasks 或 ThreadPool，所以我不太清楚，但我的想法是，您是否尝试过附加到 RunWorkerCompleted 事件并验证 A）所有工作人员都已完成并且B) 他们没有失败？您可能会遇到这样的情况，即 FTP 让它们全部快速运行并拒绝某些作为垃圾邮件节流技术，或者当您一次快速触发多个网络请求时可能会发生其他此类问题。我也不熟悉 FtpWebRequest，但是可以绑定多个请求以使用一个连接吗？

# java - 从 Swing 中使用 JOptionPane 类的两种方法

> ID：12151588
> 
> 赞同：2
> 
> 时间：2012-08-28T01:17:45.170
> 
> 标签：java, swing, user-interface, object, joptionpane

尝试使用 Swing，我了解到有两种使用 JOptionPane 和 Swing 中的其他类的方法：

1) 声明

```
private JOptionPane info1 = new JOptionPane(); 
```

在类构造函数之前，然后`info1.showMessageDialog()`在相关方法中使用（在这种情况下，我得到`showMessageDialog`应该以静态方式访问的消息），或者

2）在相关方法中使用

```
JOptionPane.showMessageDialog() 
```

根本没有声明 JOPtionPane 类的对象。

我的问题是，这两种方法有什么区别、缺点和好处？它是否扩展到其他 Swing 类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T01:21:40.657

`JOptionPane`第二个选项将是首选，因为当您尝试仅将 a 投影`MessageDialog`给用户时，您实际上不需要创建对象。

事实上，如果你打开教程：[“How to Make Dialogs”](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)，这个选项恰好是处理对话框的建议机制`Swing`

# c# - 为什么 OnRowDataBound 只为我的标题而不是我的数据行触发？

> ID：12151589
> 
> 赞同：0
> 
> 时间：2012-08-28T01:17:51.007
> 
> 标签：c#, asp.net, gridview

我有一个看起来像这样的 GridView：

```
<asp:GridView ID="MyGridView" 
              runat="server" 
              AutoGenerateColumns="False" 
              OnRowDataBound="MyGridView_RowDataBound" >
   <asp:HyperLinkField . . . . . bla bla/>
   <asp:BoundField . . . . . . . bla bla/>
</asp:GridView> 
```

我的事件处理程序 (MyGridView_RowDataBound) 实际上如下所示：

```
protected void MyGridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
   if (e.Row.RowType != DataControlRowType.DataRow)
     return;

   // do stuff here
} 
```

出于某种原因，我的代码永远不会到达“//在这里做事”这一行。它没有通过数据行检查，因为`OnRowDataBound`只为我的标题行触发。

我已经验证了数据行是通过使用`MyGridView_RowCreated`处理程序创建的。绑定也很明显，因为当我运行网站时，我可以看到我的数据库中的行出现了。最重要的是，我已经验证了该`MyGridView.DataBind()`语句正在运行。

我忽略了什么导致我的事件处理程序不为数据行触发？

**编辑：**经过进一步检查，看起来`GridView.DataBound`事件根本没有触发，所以我不能使用`DataBound`然后循环遍历行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:38:58.600

在绑定过程中捕获的代码深处发生了异常。因为绑定没有完全完成，所以`OnRowDataBound`从来没有为任何数据行调用过。似乎绑定成功完成的原因是因为我期望有结果的所有单元格都有它们（因为绑定是部分完成的），而有问题的单元格没有达到预期的结果。修复此异常后，`OnRowDataBound`按预期为每个数据行触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:00:43.050

让它**==** 现在这将为数据行触发

`if (e.Row.RowType == DataControlRowType.DataRow)`

在gridview行上循环的替代方式

```
foreach (GridViewRow oItem in GridView1.Rows)
 {
    // do stuff here
    string value = oItem.Cells[0].Text;

 } 
```

# asp.net-mvc - Asp.Net Mvc - onactionexecuted 在 ActionResult.Execute 之前还是之后被调用？

> ID：12151594
> 
> 赞同：8
> 
> 时间：2012-08-28T01:19:14.957
> 
> 标签：asp.net-mvc

是`Controller.OnActionExecuted`在之前还是之后被调用？`ActionResult.Execute`

是否有事件发生顺序的时间线？我无法单独使用 google-fu 找到任何东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T01:26:45.270

Controller.OnActionExecuted 首先被调用。

请参阅MSDN 上的[这篇文章](http://msdn.microsoft.com/en-us/library/dd381612%28v=vs.98%29)，它涵盖了 MVC 的控制器管道。

> 1.  收到申请的第一个请求
> 2.  执行路由
> 3.  创建 MVC 请求处理程序
> 4.  创建控制器
> 5.  执行控制器
> 6.  调用动作
> 7.  执行结果

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-02T13:18:14.787

[![下面的快照显示了执行是如何发生的](../Images/0935bdb9dce1ade8713ea349b9cd6f54.png)](https://i.stack.imgur.com/Zg67v.gif)

[http://www.asp.net/mvc/overview/older-versions-1/controllers-and-routing/understanding-action-filters-cs](http://www.asp.net/mvc/overview/older-versions-1/controllers-and-routing/understanding-action-filters-cs)

动作过滤器包含在控制器动作执行之前和之后执行的逻辑。例如，您可以使用操作过滤器来修改控制器操作返回的视图数据。

结果过滤器包含在执行视图结果之前和之后执行的逻辑。例如，您可能想在视图呈现给浏览器之前修改视图结果。

[![MVC 生命周期](../Images/1a9dd6eee9e4407cd3a21b109e94db13.png)](https://i.stack.imgur.com/q4REl.jpg)

图片提供：- [http://www.dotnetinterviewquestions.in/article_explain-mvc-application-life-cycle_210.html](http://www.dotnetinterviewquestions.in/article_explain-mvc-application-life-cycle_210.html)

文章详情：- [https://www.codeproject.com/Articles/556995/ASP-NET-MVC-interview-questions-with-answers](https://www.codeproject.com/Articles/556995/ASP-NET-MVC-interview-questions-with-answers)

任何 Web 应用程序都有两个主要的执行步骤，首先是了解请求，然后根据请求的类型发出适当的响应。MVC 应用程序生命周期没有什么不同，它有两个主要阶段，首先创建请求对象，然后将我们的响应发送到浏览器。

创建请求对象： -创建请求对象有四个主要步骤。以下是相同的详细说明。

步骤 1 填充路由： - MVC 请求被映射到路由表，路由表又指定要调用的控制器和操作。因此，如果请求是第一个请求，那么第一件事就是用路由集合填充路由表。这种路由表的填充发生在 global.asax 文件中。

步骤 2 获取路由： - 根据发送的 URL，“UrlRoutingModule”搜索路由表以创建“RouteData”对象，该对象包含要调用的控制器和操作的详细信息。

步骤 3 创建请求上下文： - “RouteData”对象用于创建“RequestContext”对象。

步骤 4 创建控制器实例： - 该请求对象被发送到“MvcHandler”实例以创建控制器类实例。一旦创建了控制器类对象，它就会调用控制器类的“Execute”方法。

创建响应对象： - 此阶段有两个步骤执行操作，最后将响应作为结果发送到视图。

# azure - Windows Azure 网站 - 它们是如何配置的？

> ID：12151595
> 
> 赞同：-1
> 
> 时间：2012-08-28T01:19:15.653
> 
> 标签：azure, azure-web-app-service

使用新的 WAWS 服务，您可以创建 Wordpress 和 DotNetNuke 等应用程序的默认安装。这些应用程序通常使用 Web 应用程序目录中的本地存储来保存上传的内容文件（图像等），但 WAWS 允许您轻松扩展到多个实例。这些内容目录是如何管理的？有没有这方面的公开信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:31:08.310

在 TechEd 北美和欧洲举办了一场关于[Windows Azure 网站如何](http://channel9.msdn.com/Events/TechEd/Europe/2012/AZR305)在后台工作的会议。

简单总结一下：

存储通过 Windows Azure Drive（又名 XDrive；位于 Page Blob 中的 Windows Azure Storage 的一个组件）提供

实例通过 Windows Azure 网站团队专有的一些“秘密武器”共享此资源。

# android - 以书为背景主题的技术

> ID：12151598
> 
> 赞同：1
> 
> 时间：2012-08-28T01:19:49.163
> 
> 标签：android, user-interface

我可以知道使用什么技术来实现书籍作为背景主题吗？当我尝试仅将图像添加到活动背景时。但是，我无法获得如此逼真的效果。

![在此处输入图像描述](../Images/40871571c51bbc6bf62f79853a01472a.png)

# javascript - 用于更改视频标签源的 setAttribute 和 video.src 在 IE9 中不起作用

> ID：12151606
> 
> 赞同：11
> 
> 时间：2012-08-28T01:22:01.920
> 
> 标签：javascript, internet-explorer, html5-video, setattribute

我从字面上阅读了有关通过 IE9 中的 javascript 动态更改视频标签源的每个 stackoverflow 线程，包括有用但未同意的帖子[here](https://stackoverflow.com/questions/7878367/video-tag-not-working-in-ie-9/7905151#7905151)和[here](https://stackoverflow.com/questions/6080433/unable-to-change-source-of-video-tag-via-javascript-on-ie9)，但确实感觉还有另一种解决方案。这是我正在尝试做的非常基本的示例：

```
 var video = document.getElementById('video');
    //now, use either of the lines of code below to change source dynamically

    video.src = "nameOfVideo";
    //or use...
    video.setAttribute("src", "nameOfVideo"); 
```

这两行代码都被 Internet Explorer 彻底讨厌，特别是因为在使用简单的 video.getAttribute 检查后，src 肯定会被更改，即使 IE 实际上并没有做任何事情来切换视频。

是的，有人声称使用 IE，您必须将 src 与 HTML 一起列出，以便在页面加载后更改它们，但我肯定在 stackoverflow 上找到了一个线程，该线程通过简单的 JavaScript 提出了一个解决方案。（令我失望的是，我再也找不到这样做的线程了……而且我到处搜索，相信我）。

话虽如此，如果有人可以提供解决方案，而不使用将所有视频 src 放置在 HTML 中，而是使用 JavaScript 动态设置/创建 src，如上所示，我将非常感激。

（或者，如果您可以指出我的“缺失”溢出线程的方向，该线程测试该属性是否存在于 IE 中，然后以某种方式通过 javascript 设置 src，那也将不胜感激）。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-16T15:11:18.843

好消息，我找到了一个真正的解决方案，可以通过 JavaScript 切换/更改 HTML5 视频标签中的视频，而无需使用我试图解释的烦人的 hack！它简单得令人难以置信，而且只需要对 IE 进行大量试验。下面是在 IE 中工作的最简单形式的代码：

```
<html>
  <body>
    <video id='videoPlayer' width="320" height="240" controls="controls">
       <source id='mp4Source' src="movie.mp4" type="video/mp4" />
       <source id='oggSource' src="movie.ogg" type="video/ogg" />
    </video>

<!-- You MUST give your sources tags individual ID's for the solution to work. -->

    <script>
      var player = document.getElementById('videoPlayer');

      var mp4Vid = document.getElementById('mp4Source');

      player.pause();

      // Now simply set the 'src' property of the mp4Vid variable!!!!

      mp4Vid.src = "/pathTo/newVideo.mp4";

      player.load();
      player.play();
    </script>
  </body>
</html> 
```

你有它。难以置信的简单——在 IE8 和 IE9 中测试和工作...如果您有任何问题，请告诉我。

# scala - 如何将 Java TreeMap 转换为 Scala SortedMap？

> ID：12151607
> 
> 赞同：3
> 
> 时间：2012-08-28T01:22:03.573
> 
> 标签：scala

在“不耐烦的 Scala”中的章节和示例之后，有一个与将 Java`TreeMap`用作 Scala相关的练习`SortedMap`。在 scala shell 中，我尝试了这个：

```
var t: scala.collection.SortedMap[String,Int] = new java.util.TreeMap[String,Int]() 
```

但我收到有关类型不匹配的错误消息。有没有一种简单的方法可以做到这一点？

注意：我做了一个导入`scala.collection.JavaConversions._`然后做了这个：

```
var t: SortedMap[String,Int] = TreeMap[String,Int]() 
```

这可行，但变量`t`的类型`java.util.SortedMap`是 ，而不是`scala.collection.SortedMap`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:55:48.193

我没看过那本书，但你需要下定决心。是`t`Scala`SortedMap`还是 Java `TreeMap`？

A`TreeMap`不是 a `SortedMap`，因此您不能在不转换变量的情况下将其分配给`SortedMap`变量。`JavaConversions`将为您进行一些转换，包括：

```
implicit def mapAsScalaMap [A, B] (m: Map[A, B]): Map[A, B]
   Implicitly converts a Java Map to a Scala mutable Map. 
```

但是，没有什么可以转换为`SortedMap`.

如果这种转换对您来说似乎很神秘，库设计者会同意，因此`JavaConversions`在 Scala 2.10 中已弃用，而支持`JavaConverters`，它需要特定的`.asScala`方法来进行转换。

不幸的是`JavaConverters`，没有任何东西可以产生一个`SortedMap`（`.asScala`给你一个`mutable.Map`）。因此，您需要使用其元素重建集合。

```
import collection.JavaConverters._
import collection.SortedMap
var t: SortedMap[String, Int] =
    SortedMap[String, Int]() ++ new java.util.TreeMap[String,Int].asScala 
```

在上面的代码中生成一个新的 TreeMap 显然有点毫无意义，因为它是空的，但是您应该了解如何处理现有的 TreeMap。如果您没有现有的，只需`SortedMap`在 Scala 中生成一个新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:00:14.627

```
import collection._
import JavaConverters._

var t: scala.collection.SortedMap[String,Int] = 
    new java.util.TreeMap[String,Int]().asScala.map(identity)(breakOut) 
```

# sqlite - 如果调用 setRelation，QSqlRelationalTableModel insertRecord 不起作用

> ID：12151608
> 
> 赞同：3
> 
> 时间：2012-08-28T01:22:07.530
> 
> 标签：sqlite, qt

editlistofcustomers.h

```
QSqlRelationalTableModel *RelationalModel;
TreeModel *CategoriesModel;
QSqlRecord Record; 
```

editlistofcustomers.cpp EditListOfCustomers::EditListOfCustomers // 构造函数

```
RelationalModel = new QSqlRelationalTableModel(this, *SupportObj->GetDataBase());
RelationalModel->setTable(SupportObj->GetCustomersTableName());
RelationalModel->setEditStrategy(QSqlTableModel::OnManualSubmit);
RelationalModel->select();
RelationalModel->setHeaderData(1, Qt::Horizontal, QObject::tr("Название/имя покупателя"));
Record = RelationalModel->record();
RelationalModel->setRelation(2, QSqlRelation(SupportObj->GetCategoriesOfCustomersTableName(),
                         SupportObj->GetCategoriesOfCustomersPattern()[0].GetName(), // ID.
                         SupportObj->GetCategoriesOfCustomersPattern()[2].GetName())); // Name.
CategoriesModel = new TreeModel(QObject::tr("Категории"),
                SupportObj->GetCategoriesOfCustomersTableName(),
                SupportObj, this);

//Setup model view delegate.
ui->TV_ListOfCustomers->setModel(RelationalModel);
ui->TV_ListOfCustomers->setItemDelegate(new QSqlRelationalDelegate(ui->TV_ListOfCustomers));
ui->TV_ListOfCustomers->setSelectionBehavior(QAbstractItemView::SelectRows);
ui->TV_ListOfCustomers->setSortingEnabled(true);

ui->TV_CategoryOfCustomer->setModel(CategoriesModel);
SupportObj->GetDataBase()->transaction() 
```

EditListOfCustomers::AddCustomer

```
QString customerName = ui->LE_CustomerName->text();
if(!customerName.isEmpty())
{
    Record.setValue(SupportObj->GetCustomersPattern()[1].GetName(), QVariant(customerName)); // Name.
    int categoryID = CategoriesModel->GetItemID(ui->TV_CategoryOfCustomer->currentIndex());
    Record.setValue(SupportObj->GetCustomersPattern()[2].GetName(), QVariant(categoryID)); // Category ID.
    Record.setValue(SupportObj->GetCustomersPattern()[3].GetName(), QVariant(ui->LE_CustomerTelephoneNumbers->text())); // Telephone numbers.
    Record.setValue(SupportObj->GetCustomersPattern()[4].GetName(), QVariant(ui->LE_CustomerAddress->text())); // Address.
    Record.setValue(SupportObj->GetCustomersPattern()[5].GetName(), QVariant(ui->TE_CustomerComment->toPlainText())); // Comment.
    RelationalModel->insertRecord(-1, Record);
    if(!RelationalModel->submitAll())
    {
        QMessageBox::warning(this, "CategoriesEditor::CategoriesEditor", SupportObj->GetDataBase()->lastError().text());
    }

    // Clear fields
    ui->LE_CustomerName->clear();
    ui->TV_CategoryOfCustomer->setCurrentIndex(QModelIndex());
    ui->LE_CustomerTelephoneNumbers->clear();
    ui->LE_CustomerAddress->clear();
    ui->TE_CustomerComment->clear();

    ui->LE_CustomerName->setFocus();
    ui->TV_ListOfCustomers->sortByColumn(0, Qt::AscendingOrder);
} 
```

如果注释“RelationalModel->setRelation(...)”一切正常：事务、添加、删除、提交或回滚。如果取消注释不起作用，但显示一切正确（ID 替换为类别名称），但我无法使用“insertRecord”插入新行。我尝试[了这个](http://blog.oh-mypixel.com/qt-qsqlrelationaltablemodel-and-insertrecord-foreign-key-cannot-be-null/) 建议，但没有成功。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:47:48.543

问题出在列名中。`setRelation`将列名更改`category_of_customer_id`为`category_of_customers_name_2`.

解决方案使用[`void setValue(int index, const QVariant &val)`](http://doc.qt.nokia.com/4.7-snapshot/qsqlrecord.html#setValue)而不是[`void setValue(const QString & name, const QVariant &val)`](http://doc.qt.nokia.com/4.7-snapshot/qsqlrecord.html#setValue-2).

```
QSqlRecord record = RelationalModel->record();
record.setValue(1, QVariant(customerName)); // Name.
int categoryID = CategoriesModel->GetItemID(ui->TV_CategoryOfCustomer->currentIndex());
record.setValue(2, QVariant(categoryID)); // Category ID.
record.setValue(3, QVariant(ui->LE_CustomerTelephoneNumbers->text())); // Telephone numbers.
record.setValue(4, QVariant(ui->LE_CustomerAddress->text())); // Address.
record.setValue(5, QVariant(ui->TE_CustomerComment->toPlainText())); // Comment.
RelationalModel->insertRecord(-1, record);
if(!RelationalModel->submitAll())
{
    QMessageBox::warning(this, "CategoriesEditor::CategoriesEditor", SupportObj->GetDataBase()->lastError().text());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-10T08:03:35.673

有同样的问题。这只需要发生在具有 setRelation 的字段上。这是 PyQt 的解决方案：

```
def insertRow(self):      
    rec = self.record()
    rec.setValue("id", "new id")
    rec.setValue("type", 1)
    rec.setValue("title", "new title")
    return self.insertRecord(-1, rec)
    self.submit() 
```

道歉。想发表评论，但还没有 50+ 的声誉。

# forms - 在 mvc4 上找不到 jquery validate 方法错误

> ID：12151609
> 
> 赞同：2
> 
> 时间：2012-08-28T01:22:27.413
> 
> 标签：forms, html, jquery-validate, asp.net-mvc-4

我正在使用示例 MVC4 模板构建向导表单，我从[http://afana.me/post/create-wizard-in-aspnet-mvc-3.aspx获取源代码](http://afana.me/post/create-wizard-in-aspnet-mvc-3.aspx)

当我触发制作“下一步”按钮的java脚本时，我得到以下错误

var 验证器 = $('form').validate(); // 获取验证器 Uncaught TypeError: Object [object Object] has no method 'validate'

下面是带有下一步按钮的完整 JS 部分触发器。

```
 $("#next-step").click(function () {
        var $step = $(".wizard-step:visible"); // get current step
        var validator = $('form').validate(); // obtain validator
        var anyError = false;
        $step.find("input").each(function () {
            if (!validator.element(this)) { // validate every input element inside this step
                anyError = true;
            }
        });

        if (anyError)
            return false; // exit if any error found 
```

我已经在 mvc4 包中包含了库源。我能够使用不显眼的 js 成功获得客户端验证。但是在下一个按钮上调用验证失败。

有关如何解决此问题的任何帮助将非常有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T04:40:18.703

我能够找出问题所在。
MVC4 模板在 body 标记的末尾有一个 js 引用。

```
@Scripts.Render("~/bundles/jquery")
@RenderSection("scripts", required: false) 
```

这**会覆盖所有其他 jquery 库**，因此找不到方法 x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T15:46:54.783

***一年后更新***

详细来说，VS 2013 使用 MVC4 添加到 _Layout 部分视图

`@Scripts.Render("~/bundles/jquery")`

之后的第二次**冗余**

`@Scripts.Render("~/bundles/jqueryval")`已宣布

因此，`@Scripts.Render("~/bundles/jquery")`底部的重新声明将禁用`.valid()`jqueryval 包中的有用方法。

删除它进行修复。

# javascript - 我有一个字段正在计算，如果结果低于 60，则需要显示最小值

> ID：12151611
> 
> 赞同：0
> 
> 时间：2012-08-28T01:22:42.803
> 
> 标签：javascript, html

抱歉，这显然是我第一次来这里，我只是在学习如何使用 javascript。我的问题是：我有一些基本的计算来确定我们非营利组织的服务价格。t 是房间数 * 0.81。但我们每月最低限额为 60 美元。所以我需要知道如何将其纳入定价功能。我知道“如果 x < 60，则 60”，只是不确定该语言将如何编写。我将包括完整的js。

```
var listenerFieldIDs = {"roomCountID":"item4_text_1"}; //Currently the only form we are using for room count has this value set as its ID attribute.

var impactFields = ["item12_text_1","item1_text_1","item16_text_1","item18_text_1","item20_text_1"]; //Field IDs for the form that will be changed constantly.
var estimatedBottleSize = 1.5, occupancyRate = (60 / 100), collectionDuration = 365, soapOuncesRecoverable = 0.63, bottleOuncesRecoverable = 0.47,lbConversion = 0.0626, rate = 0.81;

var $ = function(id){ //Shortcut to save some typing. Instead of having to write out document.getElementById(elementID) every time I need to access an element, I can put $(elementID).property or $(elementID).method() I need more easily.
    return document.getElementById(id);
}

var updateFormField = function(id,amount){ //Updates a form field when gives the element ID and the amount.
    $(id).value = amount;
}

var updateForm = function(roomCount){ 

    // This is called when all form data needs to be updated. This is generally invoked each time a keystroke in the room count field.
    updateFormField(impactFields[0],calculateLbsOfSoap(roomCount).toFixed(2)); //Updating the first form field after calculating the total weight of soap in lbs.
    updateFormField(impactFields[1],calculateLbsOfBottles(roomCount).toFixed(2)); //Same thing as above, but bottles/amenities.
    updateFormField(impactFields[2],calculateBarsOfSoap(roomCount).toFixed(0)); //Updating the third form field after calculating the total number of distributed units.
    updateFormField(impactFields[3],calculateBottles(roomCount).toFixed(0)); //Same as above, but bottles/amenities.
    updateFormField(impactFields[4],("$" + calculatePrice(roomCount).toFixed(2))); //Updating price.
}

var listenForNumbers = function(event){ //This function is acting as a handler for when anything is entered into the field.
    updateForm($(listenerFieldIDs["roomCountID"]).value);
}

var calculateLbsOfSoap = function (rmCnt){ // Calculate the weight of soap and return the amount.
    return checkCount(rmCnt) ? 0 : ((soapOuncesRecoverable * lbConversion) * (rmCnt * occupancyRate) * collectionDuration); 
}

var calculateLbsOfBottles = function (rmCnt){ // Calculate the weight of bottled amenities and return the amount.
    return checkCount(rmCnt) ? 0 : ((bottleOuncesRecoverable * lbConversion) * (rmCnt * occupancyRate) * collectionDuration);
}

var calculateBarsOfSoap = function(rmCnt){ // Calculate how many bars are distributed if the room count is not 0.
    return checkCount(rmCnt) ? 0 : ((calculateLbsOfSoap(rmCnt) * 16) / 3);
}

var calculateBottles = function(rmCnt){ // Calculate how many bottles are distributed if the room count is not 0.
    return checkCount(rmCnt) ? 0 : (((calculateLbsOfBottles(rmCnt) * 16) / estimatedBottleSize) * (2 / 3)); 
}

var calculatePrice = function(rmCnt){

    return checkCount(rmCnt) ? 0 : (rmCnt * rate);
    }

var checkCount = function(count){ //If the count is 0  or less than 0, the number is useless so just return 0 to prevent odd results.
    return (count < 0 || count == 0) ? true : false; 
}

var initializeRealTimeCalcToForm = function(){ 

    if(window.attachEvent){
        $(listenerFieldIDs["roomCountID"]).attachEvent("onkeydown",listenForNumbers,false);
        $(listenerFieldIDs["roomCountID"]).attachEvent("onkeyup",listenForNumbers,false);
        $(listenerFieldIDs["roomCountID"]).attachEvent("onkeypress",listenForNumbers,false);
        $(listenerFieldIDs["roomCountID"]).attachEvent("onchange",listenForNumbers,false);
    } else{
    //But if NOT IE... :-D
        $(listenerFieldIDs["roomCountID"]).addEventListener("keydown",listenForNumbers,false);
        $(listenerFieldIDs["roomCountID"]).addEventListener("keyup",listenForNumbers,false);
        $(listenerFieldIDs["roomCountID"]).addEventListener("keypress",listenForNumbers,false);
        $(listenerFieldIDs["roomCountID"]).addEventListener("change",listenForNumbers,false);
    }

}

window.onload = function(){  

    initializeRealTimeCalcToForm();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:21:03.540

如果您只想为变量设置最小值 60 `myvar`，您可以这样做

```
myvar=Math.max(60,myvar); 
```

**编辑：**

然后，如果您希望返回的值`calculatePrice`至少为 60，请使用：

```
var calculatePrice=function(rmCnt){
    return Math.max(60,checkCount(rmCnt) ? 0 : (rmCnt * rate));
} 
```

**注1：**

你知道你可以这样声明函数吗？

```
function calculatePrice(rmCnt){
    return Math.max(60,checkCount(rmCnt) ? 0 : (rmCnt * rate));
} 
```

它更短，这样您就可以在声明之前调用该函数！

**笔记2：**

如果您希望该值至少为 60，我不明白以下代码：

```
checkCount(rmCnt) ? 0 
```

为什么是0？

# php - 为什么这段代码会失败？

> ID：12151613
> 
> 赞同：-1
> 
> 时间：2012-08-28T01:22:53.010
> 
> 标签：php

所以我有这个代码：

```
<?php

    if (!isset($_GET['email']) && !isset($_GET['key'])) {

        echo 'NOT ALLOWED TO ACCESS PAGE';

    }

    if (isset($_GET['email']) && isset($_GET['key'])) {

        $email      = $_GET['email'];
        $regKey     = $_GET['key'];

        $query      = mysql_query("SELECT * FROM `users` WHERE `email`='$email' AND `regRandom`='$regKey'");

        if ($query == $regKey) {

            mysql_query("UPDATE `users` SET `activated`=1 WHERE `email`='$email'");

            if (mysql_query("SELECT activated FROM users WHERE activated='1'")) {

                echo file_get_contents("http://TheMegaHouse.com/pageContent/head.php");

                echo file_get_contents("http://TheMegaHouse.com/pageContent/notLoggedIn/topNavBar.php");

                echo file_get_contents("http://TheMegaHouse.com/pageContent/header.php");

                echo 'PASSED';

                footer();

            } else {

                activationFail();
            }

        } else if ($regKey !== $query) {

            echo 'FAIL';
        }

    }

?> 
```

问题是在我的数据库中，`regRandom`列中的值实际上等于`key`url 中变量中的值，但由于某种原因，它回显的是“FAIL”而不是“PASSED”。

关于我做错了什么的任何建议，做我想做的更好的方法或任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T01:30:26.330

始终先阅读手册：

*   [http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

这行代码：

```
mysql_query("SELECT * FROM `users` WHERE `email`='$email' AND `regRandom`='$regKey'"); 
```

正在返回您的资源，而不是您正在寻找的变量。

给你的小修复：

```
list($regRandom) = mysql_fetch_row(mysql_query("SELECT regRandom  FROM `users` WHERE `email`='$email' AND `regRandom`='$regKey'"));
if ($regRandom == $regKey) {
  // magic 
```

还有两件事：

*   `mysql_*`功能已弃用
*   我强烈建议您阅读有关 SQL 注入的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T01:30:01.350

您不应该使用已弃用的`mysql_*`函数，而是切换到 PDO 或 mysqli 和准备好的语句。

但是，您遇到的问题是您正在将资源与传入的变量进行比较。

我的猜测是这`$regKey`是一个整数，`$query`是 mysql 查询的结果。您需要从结果集中获取一行并将该行中的特定值与您的`$regKey`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T01:31:08.070

如果我错了，请纠正我，但 $query results 是一种资源？你没有对它做任何事情。

我建议只做一个简单的 mysql_num_rows() 检查，如下所示：

```
$query      = mysql_query("SELECT * FROM `users` WHERE `email`='$email' AND `regRandom`='$regKey'");

if (mysql_num_rows($query) == 1) { 
```

再次检查毫无意义，因为您已经在检查 SQL 查询:) 所以只需检查返回的行数。0 = 未找到，1+ = 结果 :)

# ruby-on-rails - 在 SASS 文件中未使用 Rails CDN URL

> ID：12151614
> 
> 赞同：1
> 
> 时间：2012-08-28T01:22:55.430
> 
> 标签：ruby-on-rails, ruby, sass, asset-pipeline

如何确保`sass-rails`gem 中的 SASS 帮助程序针对我的 CDN 生成 URL？

我有这个`application.rb`：

```
config.asset_host = 'https://cdn.host.com/' 
```

这使得文件的头部有：

```
<link href="https://cdn.host.com/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
<link href="https://cdn.host.com/assets/application.css" rel="stylesheet" type="text/css" /> 
```

但是我的 CSS 文件看起来像这样：

```
.splash { background: url('/assets/hero.png'); } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T02:56:21.483

您是否在 SCSS 文件中使用**image_url辅助方法？**

```
.splash { background: image_url('assets/hero.png'); } 
```

[本文](http://cloudinary.com/blog/how_to_deliver_your_static_images_through_a_cdn_in_ruby_on_rails)可能会对您有所帮助，而且，如果您使用的是 SASS（而不是 SCSS），那么您可能需要使用 image-url 而不是 image_url，不过我不确定

**更新：**

```
.splash { background: image_url('/assets/hero.png'); }  // will still fetch from the localhost...
 .splash { background: image_url('assets/hero.png'); }  // work perfectly fine.. 
```

# ruby-on-rails - 制作指向左侧同一页面的反向链接（Ruby On Rails）

> ID：12151616
> 
> 赞同：0
> 
> 时间：2012-08-28T01:22:56.070
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, pagination

我在网站上使用 Kaminari 分页，当用户离开页面并单击返回链接时，它会返回到第一页。

我想要的是让反向链接转到左侧的同一页面。我知道我应该为此使用会话变量，但我对 Ruby On Rails 还是很陌生，所以我对这里的语法不是 100% 肯定的。

希望得到一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:55:39.077

```
<%= link_to_function "Back", "history.go(-1);return true;" %> 
```

我应该补充一点，最好将页面链接编码为`<a>`标签，而不是为此目的在 HTML 中创建表单。

如果您需要将链接样式设置为看起来像一个按钮，请在 CSS 中执行此操作。

# wpf - 创建 ContextBinding XAML

> ID：12151618
> 
> 赞同：0
> 
> 时间：2012-08-28T01:23:14.380
> 
> 标签：wpf, xaml

我在为 stackPanel 内的所有字段设置 DataContext 时遇到问题。我想做的是将数据上下文设置为 vm:ViewModel。但它不起作用，当我向 VS 寻求 DataBinding 的帮助时，它会在 TextBox 内显示 TextBox.DataContext。有没有办法只设置一次或者我必须为每个控件设置它？

```
 <StackPanel DataContext="vm:ViewModel">
    <TextBox Text="{Binding FirstNumber}" HorizontalAlignment="Left" Height="23" Margin="206,45,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120">
            <TextBox.DataContext>
                <vm:ViewModel/>
            </TextBox.DataContext>
        </TextBox>
    </StackPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:56:49.393

你需要让你的 DataContext 引用你的 ViewModel 的一个实例。

`DataContext="vm:ViewModel"`没有创建 ViewModel 的实例......它只是设置一个字符串。

改用 Property Element 语法：

```
 <StackPanel>
    <StackPanel.DataContext>
        <vm:ViewModel/>
    </StackPanel.DataContext>
    <TextBox Text="{Binding FirstNumber}" HorizontalAlignment="Left" Height="23" Margin="206,45,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120"/>
    </StackPanel> 
```

如果你这样做了，那么就没有必要/事实上在你的 TextBox.DataContext 中创建另一个可能是错误的......你只想继承 StackPanel 的 DataContext。

我将向您展示另一种创建 ViewModel 并引用它的实例的方法，以便您有一个更大的图景......那就是在资源中创建它，然后在绑定中引用该资源...... .这是一个例子：

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:WpfApplication8"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <vm:ViewModel x:Key="myviewmodel"/>
    </Window.Resources>
        <StackPanel x:Name="stackp" DataContext="vm:ViewModel">
        <TextBox Text="{Binding Source={StaticResource myviewmodel}, Path=FirstNumber}" HorizontalAlignment="Left" Height="23" Margin="206,45,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120"/>
    </StackPanel>
</Window> 
```

另一个将 DataContext 设置在树中更高级别的示例：

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:WpfApplication8"
        Title="MainWindow" Height="350" Width="525">
    <Window.DataContext>
        <vm:ViewModel/>
    </Window.DataContext>
    <StackPanel>
        <TextBox Text="{Binding FirstNumber}" HorizontalAlignment="Left" Height="23" Margin="206,45,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120"/>
    </StackPanel>
</Window> 
```

# html - 小对齐问题

> ID：12151619
> 
> 赞同：0
> 
> 时间：2012-08-28T01:23:43.463
> 
> 标签：html, css

对代码和所有这一切都非常陌生，我正在尝试使用 html 和 css 制作一个简单的页面。基本上问题是图片div和菜单div之间有一个空格，你可以看看你是否查看我的代码，如果有什么我真的不需要，指出它真的很有帮助。我也在 Chrome 中制作这个。干杯:)

PS。我只显示一页html，所以链接不起作用。

[这里](http://jsfiddle.net/GZ8ZT/)是 jsFiddle 的链接。

HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 

<head>
<title>Cristiano Ronaldo</title>
<link rel="stylesheet" type="text/css" href="../realstyle.css" />
</head>

<body>

<div id="contentwrap">

<div id="languagebar">
<ul id="languagelist">
<li id="Ronaldo">CRISTIANO RONALDO</li>
<li><a href="../Portuguese/Home.html">Português</a></li>
<li>English</li>
</ul>

</div> <!--languagebar-->

<div id="bigpic">

<a href="http://www.realmadrid.com/cs/Satellite/en/Home.htm">
<img id="Madrid" border="0" src="../GalleryI/Madrid.jpg" width="100" height="100px" />
</a>
<a href="http://www.manutd.com/Splash-Page.aspx">
<img id="United" border="0" src="../GalleryI/United.jpg" width="120" height="100px" />
</a>

</div> <!--bigpic-->

<div id="menubar">
<ul id="menubarlist">
<li>Home</li>
<li><a href="Early Life.html">Early Life</a></li>
<li><a href="Clubs.html">Clubs</a></li>
<li><a href="Records.html">Records/medals</a></li>
<li><a href="Personal Life.html">Personal Life</a></li>
</ul>

</div> <!--menubar-->

<div id="content">

</div> <!--Content-->

</div> <!--contentwrap-->

</body>

</html> 
```

CSS

```
body {
background-image: url("GalleryI/Background.jpg");    
width:100%;
margin:0;
padding:0;
}

A:hover {text-decoration: none; color:#CD2626;}

a:link {color: White; text-decoration: none;}

a:visited {color: White; text-decoration: none;}

#contentwrap {
text-align:center;
white-space: nowrap;
width: 50%;
margin-left: auto;
margin-right: auto;
background-color: red;
}

#languagebar {
width:800px;
height:30px;
background-image: url("GalleryI/languagebaricon.jpg");
background-repeat: no-repeat;
border-left: #FFF 1px solid;
border-right: #FFF 1px solid;
margin:0 auto;
}

#languagelist li {
display:inline;
list-style:none;
position: relative;
line-height:25px;
padding: 2px 10px 0px 10px;
color:#CD2626;
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
float: right;
}

#languagelist li a:hover{
color:#CD2626;
}

#bigpic {
width:800px;
height:100px;
background: #fff;
background-image: url("GalleryI/Jersey1.jpg");
background-repeat: no-repeat;
background-position: 190px -155px;
border-left: #FFF 1px solid;
border-right: #FFF 1px solid;
margin:0 auto;
}

#menubar {
width:800px;
height:40px;
background-image: url("GalleryI/menuicon.jpg");
background-repeat: no-repeat;
padding:0;
white-space: nowrap;
list-style:none;
font-family: Impact, Arial, sans-serif;
text-transform:uppercase !important;
font-size: 16px;
margin:0 auto;
border-left: #FFF 1px solid;
border-right: #FFF 1px solid;
}

#Madrid {
float: left;
}

#United {
float: left;
}

#content {
width: 800px;
height: 726px;
background-color: #FFF;
color: white;
font-size: 18px;
text-align:center;
font-family: arial,sans-serif;
color: white;
margin:0 auto;
border-left: #FFF 1px solid;
border-right: #FFF 1px solid;
}

li#Ronaldo {
line-height:25px;
padding: 2px 25px 2px 25px;
font-family: Arial, Helvetica, sans-serif;
font-size: 22px;
color: white;
float: left;
font-weight: bold;
}

ul#menubarlist li {
display:inline;
position: relative;
letter-spacing:2px;
line-height:35px;
padding: 0px 25px 0px 25px;
color:#CD2626;
}

ul#menubarlist li a:hover{
color:#CD2626;
}

ul#list-nav li a {
text-decoration:none;
color:#ffffff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:15:45.743

只需删除这个：

```
#languagebar{
   border-left:1px solid #FFFFFF;
} 
```

有一个空白，因为你有一个边框！

**编辑：**

如果您指的是图像之间的差距，请参阅[http://jsfiddle.net/GZ8ZT/5/](http://jsfiddle.net/GZ8ZT/5/)

只需添加

```
#bigpic{font-size:0} 
```

如果你想在里面添加文字`bicpic`，你还需要

```
#bicpic>*{font-size:16px}​ /* Or your default font-size value */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:00:07.257

删除这个

```
border-left:1px solid #FFFFFF; 
```

来自 * *css #语言栏 **

# google-chrome-extension - 无法调用未定义 chrome 扩展的方法“创建”

> ID：12151621
> 
> 赞同：3
> 
> 时间：2012-08-28T01:24:14.277
> 
> 标签：google-chrome-extension

当我完成我的 chrome 扩展时，我发现一个错误是：

```
 Uncaught TypeError: Cannot call method 'create' of undefined chrome-extension://dpfgkakomehcgdcnigflmkcfngeaamlc/js/background.js:46 
```

injectScript startLiveReload 初始化

我用的是这个

> mainfest.json“背景”：{“脚本”：[“js/background.js”]}

和 background.js 一样

```
var readMenuItemId = chrome.contextMenus.create({
  "title" : "阅读模式",
  "type" : "normal",
  contexts : [ "selection" ],
  documentUrlPatterns: ["http://*/*", "https://*/*"],
  "onclick" : genericOnClick
}); 
```

我不知道哪里错了

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T03:15:31.583

您需要`contextMenus`在清单文件中添加权限才能使用此对象：

```
"permissions": [
    "contextMenus"
], 
```

# php - 单击特定按钮时执行特定代码

> ID：12151623
> 
> 赞同：0
> 
> 时间：2012-08-28T01:24:18.467
> 
> 标签：php, javascript, shell, button

单击其中一个按钮时，我无法一次只执行一个脚本。单击按钮时，代码将一起执行 2 个脚本。我怎样才能一次只执行一个脚本，而特定的按钮执行特定的脚本。谢谢您的帮助。下面是我的代码。

```
<html>
<head>
<script language="javascript" type="text/javascript">
    function popup(){
        window.location = 'testing.php?run=shell';
    }
    function popdown(){
        window.location = 'testing.php?run=shell';
    }
</script>
</head>
<body>
<input type="button" onclick="popup()" value="popup">
<?php
if(isset($_GET['run']) && ($_GET['run'] == 'shell')){
    echo shell_exec('sh bash_test.sh');
}
?>
<input type="button" onclick="popdown()" value="popdown">
<?php
if(isset($_GET['run']) && ($_GET['run'] == 'shell')){
    echo shell_exec('sh bash_run.sh');
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:28:11.090

只需单独标记脚本

```
<html>
<head>
<script language="javascript" type="text/javascript">
    function popup(){
        window.location = 'testing.php?run=shell1';
    }
    function popdown(){
        window.location = 'testing.php?run=shell2';
    }
</script>
</head>
<body>
<input type="button" onclick="popup()" value="popup">
<?php
if(isset($_GET['run']) && ($_GET['run'] == 'shell1')){
    echo shell_exec('sh bash_test.sh');
}
?>
<input type="button" onclick="popdown()" value="popdown">
<?php
if(isset($_GET['run']) && ($_GET['run'] == 'shell2')){
    echo shell_exec('sh bash_run.sh');
}
?>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:28:21.997

试试这个：

```
<html>
<head>
<script language="javascript" type="text/javascript">
    function popup(){
        window.location = 'testing.php?run=test';
    }
    function popdown(){
        window.location = 'testing.php?run=run';
    }
</script>
</head>
<body>
<input type="button" onclick="popup()" value="popup">
<?php
if(isset($_GET['run']) && ($_GET['run'] == 'test')){
    echo shell_exec('sh bash_test.sh');
}
?>
<input type="button" onclick="popdown()" value="popdown">
<?php
if(isset($_GET['run']) && ($_GET['run'] == 'run')){
    echo shell_exec('sh bash_run.sh');
}
?>
</body>
</html> 
```

# ruby-on-rails - 在 Rails 查找函数中使用非数字标识符

> ID：12151628
> 
> 赞同：0
> 
> 时间：2012-08-28T01:24:49.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

在我看到的许多 Rails 示例中

`ModelName.find(:id)`正在使用，假设每个模型都有一个名为 的唯一字符串属性`:symbol`，我该如何设置模型`find(:symbol)`才能工作？我必须自己实施搜索算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:30:02.020

你可以使用

```
 ModelName.find_by_symbol("uniquestring") 
```

[有关Rails 动态](http://guides.rubyonrails.org/active_record_querying.html#dynamic-finders)查找器的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T01:33:22.313

您可能想尝试“find_by_yoursymbol”

```
ModelName.find_by_yoursymbol("symbol value") 
```

我只是用它来检查记录是否存在，如果不存在则创建它。

```
Spree::MailMethod.create(:environment => "test") unless Spree::MailMethod.find_by_environment("test").present? 
```

# xcode - 计算动态 UITableView 部分的公式

> ID：12151630
> 
> 赞同：0
> 
> 时间：2012-08-28T01:25:08.177
> 
> 标签：xcode, uitableview, dynamic, formula

问候 StackOverflow。

我有一个场景，其中我有一个 UITableView 具有*动态*数量的部分。这意味着该表可能有 1 个部分、5 个部分、100 个部分，等等。

问题是，**每个部分都以不同的方式处理和显示**。

例如，第 0 节包含紫色单元格列表，而第 1 节包含黄色单元格。
**因此，我需要能够计算每个部分类型最终将作为**.

我的意思是，假设部分的优先级如下：
洋红色，黄色，绿色，白色
然后当所有部分被填充时，它们将按顺序排列，M = 0，Y = 1，G = 2，W =3。
但是，当缺少一个部分时，比如 Yellow，结果如下：
M=0, Y=-1, G=1, W=3
从而从列表中删除黄色，并降低该部分的索引。

我已经构建了一些东西，通过使用第三条语句来完成小部分的大小，但是由于它手动定义了每个部分类型，它很快就变得不成比例了：

```
// Here be some dragons.
// Each macro identifies a section 
#define SectionMagenta  (([self  shouldDisplaySection:0])?0:-1) // 1 tertiary statements
#define SectionYellow   (([self  shouldDisplaySection:1])?((SectionMagenta==-1)?0:1):-1) // 3 tertiary statements
#define SectionGreen    (([self  shouldDisplaySection:2])?((SectionMagenta==-1)?((SectionYellow==-1)?0:1):((SectionYellow==-1)?1:2)):-1) // 11 tertiary statements
#define SectionWhite    (([self  shouldDisplaySection:3])?((SectionMagenta==-1)?((SectionYellow==-1)?((SectionGreen==-1)?0:1):((SectionGreen==-1)?1:2)):((SectionYellow==-1)?((SectionGreen==-1)?1:2):((SectionGreen==-1)?2:3))):-1) // 63 tertiary statements 
```

这里有一个模式。一个非常复杂的，是的，但仍然是一个模式。

我对你们所有人的问题**是，您是否可以将此模式简单地转换为一个小的，可能是递归函数，我传入该部分的优先级，并计算目标索引**。
或者
**，如果您可以创建一个更简单的方法来实现我所需要的**。
对于后者，仅将显示的行数设置为 0 是不够的，因为该部分的填充仍然存在。

我提供了一个辅助函数——如上面的 copypasta 代码所示——来检查是否应该显示一个部分：`[self shouldDisplaySection:n]` 这很可能满足你的所有需要​​。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:00:56.507

听起来您实际上想要使用有序字典，只需将您想要的值推到它上面，然后按照数字索引作为您的部分顺序读取它们。

在 Obj-C 中实现的有序字典的一个相当好的例子是[http://cocoawithlove.com/2008/12/ordereddictionary-subclassing-cocoa.html](http://cocoawithlove.com/2008/12/ordereddictionary-subclassing-cocoa.html)

# jquery - 为什么我可以使用 ajax 来获取 YouTube API 作为 XML 结果？

> ID：12151633
> 
> 赞同：0
> 
> 时间：2012-08-28T01:26:27.607
> 
> 标签：jquery, ajax, youtube-api

根据我对javascript ajax限制的了解有限，我们不能使用ajax来获取除脚本或jsonp数据类型之外的跨域数据

所以，当我遇到这个线程[Search results in XML put into array with jQuery](https://stackoverflow.com/questions/12145893/search-results-in-xml-put-into-array-with-jquery)我认为这会由于相同的域限制而失败......但令人惊讶的是，这有效！

所以我尝试通过谷歌搜索，看看是否有人知道原因，但似乎我找不到一个线程谈论这个（我只得到关于 ajax 失败的结果，因为跨域限制，或者 PHP 代理解决方法)

这可能吗？它与标题有关吗？

我认为如果我们更深入地挖掘，这可能会引导我们找到解决 ajax 限制的解决方案

# javascript - jsRender ，带空格的json列名

> ID：12151637
> 
> 赞同：1
> 
> 时间：2012-08-28T01:27:26.047
> 
> 标签：javascript, json, jsrender

如何使用包含空格字符的键名“字段 ID”引用列/字段名称？“dtTime”也显示为 NaN。

```
<script id="jsRendTmp" type="text/x-jquery-tmpl">
    <li>{{:#Field ID}}</li>
    <li>{{:#dtTime}}</li> 
```

**//这是正确的做法（感谢鲍里斯）**

```
<li>{{:#data['Field ID']}}</li>
<li>{{:#data['dtTime']}}</li>

</script> 
```

这是数据：

> 测试数据：[{“字段 ID”：“22”，dtTime：“2021 年 8 月 1 日”}，{“字段 ID”：“33”，dtTime：“2021 年 8 月 2 日”}]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:53:08.333

你可以得到这样的值：

`{{:#data['Field ID']}}`

如果您还想检测键名并呈现它，请查看此示例： [03_iterating-through-fields-scenario](http://borismoore.github.com/jsrender/demos/scenarios/03_iterating-through-fields-scenario.html) - code [here](https://github.com/BorisMoore/jsrender/blob/master/demos/scenarios/03_iterating-through-fields-scenario.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:19:18.877

你可以用一个助手来做到这一点：http: [//jsfiddle.net/imsky/B8ks2/](http://jsfiddle.net/imsky/B8ks2/)

```
<script id="jsRendTmp" type="text/x-jquery-tmpl">
    <div style="margin:10px 0">Title</div>
    {{for ~getFields()}}
    <li>{{>key}}: {{>value}}</li>
    {{/for}}
</script> 
```

⁠

```
var data = [ { "Field ID": "22", dtTime: "8/1/2021" }, { "Field ID": "33", dtTime: "8/2/2021" } ];

    $.views.helpers({
        getFields: function( object) {
            var object = this.data;
            var key, value,
                fieldsArray = [];
            for ( key in object ) {
                if ( object.hasOwnProperty( key )) {
                    value = object[ key ];
                    // For each property/field add an object to the array, with key and value
                    fieldsArray.push({
                        key: key,
                        value: value
                    });
                }
            }
            // Return the array, to be rendered using {{for ~fields(object)}}
            return fieldsArray;
        }
    });

$("#content").html($("#jsRendTmp").render(data)); 
```

# javascript - 自我调整 Javascript 倒计时

> ID：12151640
> 
> 赞同：1
> 
> 时间：2012-08-28T01:28:03.680
> 
> 标签：javascript, countdown

有没有办法使用javascript创建一个倒计时计时器，一旦它达到0，它会自动调整到不同的倒计时？（例如：从当前时间到 2012 年新年的倒计时，一旦达到 0，它将更改为 3 月生日的倒计时）（这可以用作事件时间表的倒计时。你可以有一个时间表和时间表的下一部分倒计时，一旦它完成倒计时到第一部分）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T22:12:56.590

当然，在许多倒计时中，您可以尝试[jCounter](http://devingredients.com/jcounter)并将其设置为以另一个日期启动插件的另一个实例。

这就是你在 jCounter 中的做法：

```
$('.counterClass').jCounter({
  date: '31 december 2012 23:59:59', 
  format: 'dd:hh:mm:ss', // display days, hours, minutes and seconds, you can choose here what to display
  fallback: function() { $('.counterClass').jCounter({ // fallback for the next countdown
    date: '31 march 2013 00:00:00', 
    format: 'dd:hh:mm:ss', // format
    fallback : function() { alert("Happy Birthday!") } // second fallback
  }); }
}); 
```

请注意，jCounter 依赖于服务器端时区，默认值为“欧洲/伦敦”，您可以通过添加（在其他设置中）、时区：“欧洲/奥斯陆”或任何您喜欢的方式来更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:45:45.960

```
var timeForNextFunction = false;

function firstFunction(){
    //set timeForNextFunction = true when its time for the next function.
};
function nextFunction(){};

var tick = 100; //milliseconds
document.setInterval(function(){
      if (timeForNextFunction)
          nextFunction();
      else
          firstFucntion();
}, tick); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T01:56:29.917

你可以有一个数组`Date`，例如：

```
function newDate(seconds){
    var d=new Date();
    d.setTime(new Date().getTime()+1000*seconds);
    return d;
}
var events=[newDate(10),newDate(40)]; 
```

接着

```
var currentEvent=0,
    cntdwn=document.getElementById('seconds');
    refreshEvent();
var timer=setInterval(display,1000);

function display(){
    var seconds=Math.ceil((events[currentEvent].getTime()-new Date().getTime())/1000);
    if(seconds>=0){
        cntdwn.innerHTML=seconds;
    }else{
        if(currentEvent<events.length-1){
            currentEvent++;
            refreshEvent();
        }else{
            clearTimeout(timer);
            // Finished
        }
    }
}
function refreshEvent(){
    document.getElementById('currentDate').innerHTML=events[currentEvent];
} 
```

在这里看到它：http: [//jsfiddle.net/epUG4/](http://jsfiddle.net/epUG4/)

# .net - KeyedCollection 字符串不区分大小写

> ID：12151642
> 
> 赞同：9
> 
> 时间：2012-08-28T01:28:09.180
> 
> 标签：.net, string-comparison, iequalitycomparer

尝试按照文档进行操作，但我无法使其工作。有一个带有密钥字符串的 KeyedCollection。

如何在 KeyedCollection 中使字符串键不区分大小写？

在 Dictionary 上，可以只在 ctor 中传递 StringComparer.OrdinalIgnoreCase。

```
private static WordDefKeyed wordDefKeyed = new WordDefKeyed(StringComparer.OrdinalIgnoreCase);   // this fails

public class WordDefKeyed : KeyedCollection<string, WordDef>
{
        // The parameterless constructor of the base class creates a 
        // KeyedCollection with an internal dictionary. For this code 
        // example, no other constructors are exposed.
        //
        public WordDefKeyed() : base() { }

        public WordDefKeyed(IEqualityComparer<string> comparer)
            : base(comparer)
        {
            // what do I do here???????
        }

        // This is the only method that absolutely must be overridden,
        // because without it the KeyedCollection cannot extract the
        // keys from the items. The input parameter type is the 
        // second generic type argument, in this case OrderItem, and 
        // the return value type is the first generic type argument,
        // in this case int.
        //
        protected override string GetKeyForItem(WordDef item)
        {
            // In this example, the key is the part number.
            return item.Word;
        }
}

private static Dictionary<string, int> stemDef = new Dictionary<string, int(StringComparer.OrdinalIgnoreCase);   // this works this is what I want for KeyedCollection 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T03:27:37.623

如果您希望您的类型`WordDefKeyed`默认不区分大小写，那么您的默认无参数构造函数应该将一个[`IEqualityComparer<string>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)实例传递给它，如下所示：

```
public WordDefKeyed() : base(StringComparer.OrdinalIgnoreCase) { } 
```

该类具有一些常用的默认实现，具体取决于您存储的数据[`StringComparer`类型](http://msdn.microsoft.com/en-us/library/system.stringcomparer.aspx)：`IEqualityComparer<T>`

*   [`StringComparer.Ordinal`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.ordinal)和[`StringComparer.OrdinalIgnoreCase`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.ordinalignorecase.aspx)- 当您使用机器可读的字符串时使用，而不是输入或显示给用户的字符串。

*   [`StringComparer.InvariantCulture`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.invariantculture)和[`StringComparer.CultureInvariantIgnoreCase`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.invariantcultureignorecase)- 当您使用不会向 UI 显示但对文化敏感且跨文化可能相同的字符串时使用。

*   [`StringComparer.CurrentCulture`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.currentculture)和[`StringComparer.CurrentCultureIgnoreCase`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.currentcultureignorecase)- 用于特定于当前文化的字符串，例如当您收集用户输入时。

如果您需要一种`StringComparer`文化*而*不是当前文化，那么您可以调用静态[`Create`方法](http://msdn.microsoft.com/en-us/library/system.stringcomparer.create.aspx)来`StringComparer`为特定的[`CultureInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx).

# php - 使用 MongoDB 进行批准/待处理

> ID：12151645
> 
> 赞同：0
> 
> 时间：2012-08-28T01:28:35.740
> 
> 标签：php, mongodb

我有一个客户想要收集合作伙伴的报价，但他们需要批准更改。向合作伙伴保留变更历史的最佳方式是什么？

所以这是它的工作原理

```
{
partner_id: {here}
offer1:
offer2:
offer3:
date:
status:
} 
```

我需要一种方法来检查是否有任何报价更改（但只有 1 个返回）以及是否更改插入并将过去的报价设置为状态：历史

应该只有以下状态：

历史
待批
_

但如果他们正在插入一个新的报价但有一个已批准的报价，那么它需要保持批准，直到我们批准它。

我怎样才能做到这一点？我是这样想的：

```
 <?php

    function checkoffers($data)
    {
    $this->data = $data;

    $collection = $this->db->partner_offers;
    if($this->data["_id"] != null)
    {
      $cursor = $collection->insert(RUN INSERT ARRAY)
    }
    else
    {
      $cursor = $collection->find(array("_id"=>new MongoId($this->data["_id"])));

      if ($cursor->count() > 0)
        {
            $test = array();
            while( $cursor->hasNext() ) {   
                $test[] = ($cursor->getNext());
            }

                     foreach($test as $offers)
                     {
                      check to see if offer matches the past offer. if not then run new function and insert.
}

                 }

    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:02:07.433

一种方法是使用每个报价的文档来组织您的架构：

```
{
    partner_id: 123,
    offer: 'Even better than the last one',
    date: ISODate("2012-08-28T10:00"),
    status: 'pending'
}
{
    partner_id: 123,
    offer: 'The best of the best',
    date: ISODate("2012-08-28T09:00"),
    status: 'approved'
}
{
    partner_id: 123,
    offer: 'An offer you cannot refuse',
    date: ISODate("2012-08-28T08:00"),
    status: 'approved'
} 
```

然后，您可以轻松找到按状态和日期排序的最新批准或待处理的报价：

```
> db.partner.find({partner_id:123, status:'approved'}).sort({date:-1}).limit(1)

{
    "_id" : ObjectId("503c6c8be16d4a06b6f0da17"),
    "partner_id" : 123,
    "offer" : "The best of the best",
    "date" : ISODate("2012-08-28T09:00:00Z"),
    "status" : "approved"
} 
```

# php - 需要帮助从 uri 中提取 spotify id

> ID：12151647
> 
> 赞同：2
> 
> 时间：2012-08-28T01:29:04.677
> 
> 标签：php, regex

我正在尝试从 spotify uri 中提取 spotify id（例如，spotify:track:5xioIP2HexKl3QsI8JDlG8）我知道这应该很容易，但我似乎无法在[http://regexpal.com/](http://regexpal.com/)上验证任何内容。

到目前为止，我所拥有的是：

```
spotify:track:[a-zA-Z0-9]{22} 
```

但是它会拉整个字符串，我怎样才能让它只在冒号之后拉？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T01:38:24.557

正则表达式很好，但是你需要将 id 部分（用`()`）分组，以便可以捕获它：

```
$str = "spotify:track:5xioIP2HexKl3QsI8JDlG8";
if (preg_match('/spotify:track:([a-zA-Z0-9]{22})/', $str, $re)) {
  $spotifyId = $re[1];
} 
```

**[演示](http://ideone.com/uTvss)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:42:53.730

除了使用捕获组之外，您还可以使用[积极的后视](http://www.regular-expressions.info/lookaround.html#lookbehind)，例如

```
if (preg_match('/(?<=spotify:track:)[a-zA-Z0-9]{22}/', $str, $matches)) {
    $id = $matches[0];
} 
```

演示在这里 - [http://codepad.viper-7.com/ESKgCD](http://codepad.viper-7.com/ESKgCD)

# json - 带有 Web 服务的 ASP.net MVC 3

> ID：12151649
> 
> 赞同：0
> 
> 时间：2012-08-28T01:29:23.567
> 
> 标签：json, asp.net-mvc-3, web-services

我是使用 ASP.net MVC 3.0 的 Web 服务的新人。现在我的团队中有另一个成员，他们开发 Web 服务，然后他们将 URL 传递给我`http://localhost:55274/iServices/Generics/Setting.svc/GetSetting/`，然后我收到了 JSON 数据

```
{"ID":1,"MailAccount":"blahbla.com","MailPassword":"password","SMTP":"smtp.test.com","SMTPPort":500,"SSL":false} 
```

现在我正在尝试让该 JSON 在我的 ASP.net MVC 3 类中使用，以提供邮件系统设置。我创建了两个类：

```
public class iceEmailObject
{
    public int ID { set; get; }
    public String SMTP { set; get; }
    public int SMTPPort { set; get; }
    public String MailAccount { set; get; }
    public String MailPassword { set; get; }
    public bool SSL { set; get; }
} 
```

第二类是处理发送邮件：

```
public class EASEmail : ItemEntityDataContext
{
public bool SendMail(string ReplyTo, string SendTo, string Title, string Body, string From, string AttachmentPath, bool isHtml = false)
{
    try
    {
        SmtpMail oMail = new SmtpMail("blah blah blah");
        SmtpClient oSmtp = new EASendMail.SmtpClient();

        String fff = From;
        if (From == "") fff = ReplyTo;

        MailAddress ma = new EASendMail.MailAddress(fff, "");

        if (From == "")
        {
            oMail.ReplyTo = ReplyTo;
            oMail.Headers.Add("Reply-To", ReplyTo);
        }
        oMail.From = ma;

        oMail.To = SendTo;
        oMail.Subject = Title;
        oMail.Priority = MailPriority.High;

        if (!isHtml)
            oMail.TextBody = Body;
        else
            oMail.HtmlBody = Body;

            iceEmailObject mail = new iceEmailObject();
            mail.ID = blahblah;      //data from web service here
            mail.MailAccount = ""; //data from web service here
        return true;
    }
    catch (Exception ex)
    {
        return false;
    }
}
} 
```

我想让 JSON 初始化第一类的对象，例如`mail.ID = ...`.

谁能告诉我我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:34:09.010

尝试这个

```
JavaScriptSerializer js = new System.Web.Script.Serialization.JavaScriptSerializer();

iceEmailObject mail = js.Deserialize<iceEmailObject>(json); 
```

其中 json 是您的 JSON 字符串，而 mail 是结果对象

# entity-framework - 将项目从 ef4.3 升级到 ef5

> ID：12151653
> 
> 赞同：0
> 
> 时间：2012-08-28T01:29:53.863
> 
> 标签：entity-framework

我有一个使用 EF4.3 的项目，是否可以将其升级到 EF5？这是，所以我可以使用新功能。我的 IDE 是 VS2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:36:56.737

您可以 nuget 新包，它应该替换您现有的 .dll。请参阅[实体框架 nuget 包站点](http://nuget.org/packages/entityframework)。

在包管理器控制台中输入：

```
Install-Package EntityFramework 
```

# eclipse - 如何在没有eclipse本身的情况下安装eclipse颜色主题插件

> ID：12151664
> 
> 赞同：2
> 
> 时间：2012-08-28T01:30:52.597
> 
> 标签：eclipse, eclipse-plugin

我在工作中使用 eclipse。我们的互联网有限，所以我无法通过 eclipse 本身下载插件。有人知道我可以在家里下载它，然后从闪存驱动器或类似的东西安装它吗？我只能找到 github 上的信息，我不知道如何使用它。还是菜鸟

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T15:52:24.610

这应该有效。

[从这里](https://github.com/eclipse-color-theme/eclipse-color-theme.github.com/zipball/master)下载 github zip 文件

dropins 目录应该用于手动安装插件。典型的过程是您下载一个插件并将该存档解压缩到 dropins 目录。

另一方面，plugins 目录是为 Eclipse 的更新程序保留的。你不应该手动弄乱它。Eclipse 将存储您使用`"Help"`->`"Software Updates"`或`"Help"`->安装的所有插件`"Install new software"`（取决于您的 Eclipse 版本）。

请让我知道这是否适合您。

[查看stackoverflow问题：](https://stackoverflow.com/questions/2763843/eclipse-plugins-vs-features-vs-dropins)

# node.js - 在 EC2 上：没有 sudo 的 node.js

> ID：12151668
> 
> 赞同：2
> 
> 时间：2012-08-28T01:31:40.443
> 
> 标签：node.js, ubuntu, amazon-ec2

我无法在我的 EC2 Ubuntu 12.04 LTS 服务器上运行“node myApp.js”。

它回复错误：

```
events.js:66
throw arguments[1]; // Unhandled 'error' event
                   ^
Error: listen EACCES
    at errnoException (net.js:768:11)
    at HTTPServer.Server._listen2 (net.js:891:19)
    at listen (net.js:935:10)
    at HTTPServer.Server.listen (net.js:984:5) 
```

我用谷歌搜索，但似乎没有合适的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T06:50:21.787

在 Linux 上，只允许 root 使用端口<=1024。如果您希望您的 Web 服务器在端口 80 上侦听，让您的应用程序侦听端口>1024（即 8080）并使用 iptables 重新路由到该端口，如下所示：

```
# sudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080 
```

# android - 如何在android中在一分钟内显示两个数字

> ID：12151673
> 
> 赞同：4
> 
> 时间：2012-08-28T01:32:19.353
> 
> 标签：android, timepicker

我正在尝试使用 Android TimePicker 在我的代码中显示分钟的“两个数字”。但是我还没有得到它...时间仅以这种格式显示 X:X。例如 9:05 将在我的应用程序中显示 9:5。

任何人都可以帮助我吗？

这是我的代码...

```
idtime.setText(new StringBuilder()
         .append(String.valueOf(mHour)).append(":")
         .append(String.valueOf(mMinute)).toString()); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T01:38:38.897

使用[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)。

例子：

假设您正在显示当前时间：

```
Date date = Calendar.getInstance().getTime();

SimpleDateFormat sdf = new SimpleDateFormat("HH:MM");
String output = sf.format(date).toString();

idtime.setText(output); 
```

另一种更简单的零填充方法，您可以使用`String.format`：

```
String output = String.format("%02d:%02d", mHour, mMinute);
idtime.setText(output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T19:06:45.230

你可以这样做...

```
if (minute < 10) {
     hour.setText(hour + ":0" + minute);
} else {
     hour.setText(hour + ":" + minute);
} 
```

在时间选择器里面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T11:23:05.970

```
public static String getDuration(long milliseconds) {
        long sec = (milliseconds / 1000) % 60;
        long min = (milliseconds / (60 * 1000))%60;
        long hour = milliseconds / (60 * 60 * 1000);

        String s = (sec < 10) ? "0" + sec : "" + sec;
        String m = (min < 10) ? "0" + min : "" + min;
        String h = "" + hour;

        String time = "";
        if(hour > 0) {
            time = h + ":" + m + ":" + s;
        } else {
            time = m + ":" + s;
        }
        return time;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-18T07:14:37.710

您可以使用简单的格式化程序格式化日期，它将返回两位数的值

```
 val formatter = SimpleDateFormat("yyyy-MM-dd HH:mm:ss")
            val date = formatter.parse(start)
            var output = ""
            val formatter1 = SimpleDateFormat("hh:mm")
            output = formatter1.format(date) 
```

# python - 如何获取从 Python 中的函数返回的元素数量

> ID：12151674
> 
> 赞同：2
> 
> 时间：2012-08-28T01:32:27.050
> 
> 标签：python, function

如何在不执行函数的情况下获取从函数返回的元素数量？并且可能还知道这些元素的类型？

我知道我可以做类似的事情：

```
def foo ():
    return 'a', 2

handle = foo()
print len(handle)
>> 2 
```

但在这里我需要执行我的功能......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T01:34:22.750

你不能——一个函数可以根据输入或其他因素返回不同数量的参数（存储在单个元组中）和该元组中不同类型的变量。考虑（愚蠢的）功能：

```
def foo(arg):
    if arg:
       return 1,2
    else
       return "foo","bar","baz" 
```

现在调用它：

```
foo(1) # (1,2)
foo(0) # ("foo","bar","baz") 
```

知道函数将返回什么的唯一方法是 1）阅读源代码或 2）（如果你是一个信任的人）阅读函数的文档:-)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T01:35:43.717

不。一般来说，你只能说一个函数只返回*一个*对象。该对象可以是一个元组，并且该元组可以包含任意数量的对象。在您的示例中，您将返回一个包含 2 个对象的元组

考虑这个函数

```
import random
def foo():
    choice = random.choice("abcd")
    if choice == "a":
        return 1,2,3       # Returns a tuple
    if choice == "b":
        return 4           # Returns an int
    if choice == "c":
        return "C"         # Returns a str
    if choice == "d":
        return None        # Returns None 
```

显然你无法知道返回值的类型

# json - 如何将 Squeryl 查询对象转换为 JSON - Play Framework

> ID：12151676
> 
> 赞同：0
> 
> 时间：2012-08-28T01:32:47.530
> 
> 标签：json, scala, playframework, playframework-2.0, squeryl

# 案子

本案例使用 Scala、Play Framework、Jerkson 和 Squeryl。我正在尝试将查询结果集转换为 JSON，但结果仅显示“持久”字段。

## 问题

为什么 Json.generate() 不打印所有实体字段？

### 控制器

```
package controllers.api

import play.api.mvc._
import play.Logger
import play.api.data.Form
import play.api.data.Forms.{mapping, text, optional}
import com.codahale.jerkson.Json
import org.squeryl.PrimitiveTypeMode._
import models.{ApplicationDatabase, Category}

object Categories extends Controller { 

  def findAll = Action {
    val json = inTransaction {
      val list = from(ApplicationDatabase.categories)(categories =>
        select(categories)
        orderBy(categories.title)
      )      
      Logger.info(list.toString)
      Json.generate(list)
    }

    Ok(json).as(JSON)
  }

  def findById(id: Long) = Action {
    val category = inTransaction { 
      ApplicationDatabase.categories.lookup(id)
    }

    Ok(Json.generate(category)).as(JSON)
  }

} 
```

### 类别实体

```
package models

import org.squeryl.PrimitiveTypeMode._    
import org.squeryl.annotations.Column

class Category(var uid: String, var title: String) extends FlashcardsDbObject {

} 
```

### 基础实体

```
package models;

import java.sql.Timestamp    
import org.squeryl._
import org.squeryl.annotations.{Column}
import org.squeryl.PrimitiveTypeMode._

class FlashcardsDbObject extends KeyedEntity[Long] {

  val id: Long = 0

  @Column("created_at")
  var createdAt = new Timestamp(System.currentTimeMillis)

  @Column("updated_at")
  var updatedAt = new Timestamp(System.currentTimeMillis)

} 
```

# 问题

## 结果

```
{
  persisted: true
},
{
  persisted: true
}, 
```

## 预期的

```
{
  id: 1,
  uid: 'chemistry',
  title: 'Chemistry'
  persisted: true
},
{
  id: 2,
  uid: 'biology',
  title: 'Biology'
  persisted: true
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:14:00.500

可能这不是最好的解决方案，但是当我将**JsonProperty**导入并声明到对我有用的字段时：

```
package models

import org.squeryl.KeyedEntity
import org.squeryl.annotations._
import org.squeryl.PrimitiveTypeMode._
import org.codehaus.jackson.annotate.JsonProperty

case class Category(val id: Int = 0,
                    @JsonProperty("uid")
                    val uid: String,
                    @JsonProperty("title")
                    val title: String) extends KeyedEntity[Int] {

} 
```

**结果**

```
[
  {
    id: 3,
    uid: "biology",
    title: "Biology"
  },
  {
    id: 1,
    uid: "general-chemistry",
    title: "General Chemistry"
  },
  {
    id: 4,
    uid: "organic-chemistry",
    title: "Organic Chemistry"
  },
  {
    id: 2,
    uid: "physics",
    title: "Physics"
  }
] 
```

# ios - iOS显示数组中的注释

> ID：12151678
> 
> 赞同：0
> 
> 时间：2012-08-28T01:32:54.043
> 
> 标签：ios, xml, arrays, annotations, xml-parsing

我正在尝试从数组中在我的 mapView 上显示多个注释。注释坐标从 XML 文件中解析出来，并以 [currentCall longitude] 和 [currentCall latitude] 的形式存储在数组中。我的问题是，“调用”数组的语法是什么？（我不知道你是不是这么说的）。在我的应用程序的另一部分，我在表格中显示解析的 XML 结果并使用“JointCAD *currentCall = [[xmlParser calls] objectAtIndex:indexPath.row];” “调用”数组。如何显示我的注释？除了那一小部分，其他一切都很好。

这是实现文件：

```
@implementation SecondViewController
@synthesize mapView;

XMLParser *xmlParser;

-(IBAction)getlocation {

mapView.showsUserLocation = YES;
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1];
[UIView commitAnimations];

}

-(IBAction)changeSeg:(id)sender {

if (segment.selectedSegmentIndex == 0) {
    mapView.mapType = MKMapTypeStandard;
}
if (segment.selectedSegmentIndex == 1) {
    mapView.mapType = MKMapTypeSatellite;
}
if (segment.selectedSegmentIndex == 2) {
    mapView.mapType = MKMapTypeHybrid;
}
}

 -(void)viewDidLoad {

JointCAD *currentCall = [[xmlParser calls] objectAtIndex:indexPath.row];

mapView = [[MKMapView alloc] initWithFrame:self.view.bounds];
[self.view insertSubview:mapView atIndex:0];

[super viewDidLoad];
[mapView setMapType:MKMapTypeStandard];
[mapView setZoomEnabled:YES];
[mapView setScrollEnabled:YES];
[mapView setDelegate:self];

MKCoordinateRegion WCCCA = { {0.0, 0.0} , {0.0, 0.0} };
WCCCA.center.latitude = 45.53540820864449;
WCCCA.center.longitude = -122.86178648471832;
WCCCA.span.longitudeDelta = 0.02f;
WCCCA.span.latitudeDelta = 0.02f;
[mapView setRegion:WCCCA animated:YES];

Annotation *ann1 = [[Annotation alloc] init];
ann1.title = @"WCCCA";
ann1.subtitle = @"Washington County Consolidated Communications Agency";
ann1.coordinate = WCCCA.center;
[mapView addAnnotation: ann1];

MKCoordinateRegion CALL = { {0.0, 0.0} , {0.0, 0.0} };
CALL.center.latitude = [currentCall.latitude doubleValue];
CALL.center.longitude = [currentCall.longitude doubleValue];
CALL.span.longitudeDelta = 0.02f;
CALL.span.latitudeDelta = 0.02f;
[mapView setRegion:WCCCA animated:YES];

Annotation *ann2 = [[Annotation alloc] init];
ann2.title = [currentCall currentCallType];
ann2.subtitle = [currentCall location];
ann2.coordinate = CALL.center;
[mapView addAnnotation: ann1];

}

-(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {
MKPinAnnotationView *MyPin=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"current"];
MyPin.pinColor = MKPinAnnotationColorRed;

UIButton *advertButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[advertButton addTarget:self action:@selector(button:) forControlEvents:UIControlEventTouchUpInside];

MyPin.rightCalloutAccessoryView = advertButton;
MyPin.draggable = NO;
MyPin.highlighted = YES;
MyPin.animatesDrop=TRUE;
MyPin.canShowCallout = YES;

return MyPin;
}

 @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:00:38.133

如果我正确理解了您的代码，您应该能够遍历解析的 XML（看起来 xmlParser 对象的输出是 NSArray）并将注释添加到循环内的 mapView 中。

您可以使用 C 函数`CLLocationCoordinate2DMake()`为注释创建坐标数据结构。

```
NSArray *callsArray = [xmlParser calls];

for (JointCAD *call in callsArray) {
    Annotation *ann = [[Annotation alloc] init];
    ann.title = [call currentCallType];
    ann.subtitle = [call location];
    ann.coordinate = CLLocationCoordinate2DMake([call latitude], [call longitude]);
    [mapView addAnnotation:ann];
} 
```

# wpf - 如何处理删除相关的一组 WPF UI 元素

> ID：12151680
> 
> 赞同：0
> 
> 时间：2012-08-28T01:33:14.030
> 
> 标签：wpf, listbox, stackpanel, gridsplitter

我对实现删除相关 UI 元素集的最佳方法很感兴趣。

这就是我正在做的事情：我有一个嵌入在垂直滚动查看器中的网格。用户可以在运行时通过单击按钮将多个列表框添加到此网格。添加每个 ListBox 时，还会添加正确数量的 Grid Rowdefinitions 和 Gridsplitter 以允许调整每个 Listbox 的大小。这部分工作正常。

诀窍是——用户还可以选择关闭列表框。当他们这样做时，我将需要删除“属于”关闭列表框的相应 Rowdefinitions 和 Gridsplitter。

通过 Grid.Children 和 Grid.Rowdefinitions 的迭代，我可以很容易地找出要删除的 Rowdefinitions 和 Gridsplitters。但我想知道是否有更好的方法来处理这个问题。也许通过将这些元素组合在一个集合中，然后一举移除这个集合？不过，不知道该怎么做。

非常感谢任何想法或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:51:38.227

我不知道将它们关联到可视/逻辑树中的明显或简单方法，但您当然可以使用关联数组`Dictionary<T, U>`(即将被删除。

我认为这基本上就是你所描述的。

我认为，任何更聪明的东西都不值得额外的复杂性，除非你有特定的需要。:)

# random - 如何随机移动精灵并保持碰撞工作 - Cocos2d？

> ID：12151685
> 
> 赞同：1
> 
> 时间：2012-08-28T01:34:06.323
> 
> 标签：random, cocos2d-iphone, sprite

我想要一个随机的精灵生成并在屏幕上移动。

我`CGRectIntersectsRect`用来检测玩家和随机生成的精灵之间的碰撞。

我已经这样做了，代码工作正常 - 当我有一个设定的时间间隔时。

但是，当我为精灵的生成时间添加随机性时，碰撞不会一直起作用。大多数碰撞根本不起作用。

我不确定我做错了什么，并且非常感谢朝着正确方向提供的任何帮助。

我认为这与计划间隔以及精灵在屏幕上移动实际需要多长时间有关。

不过不确定。

另外，如果可以的话，我还想知道`enemySprite`在屏幕关闭后从场景中移除的最佳方法？

这是我的代码：

```
-(void)targetTimer {
[self schedule: @selector(enemySprite:) interval: 3.0f];
}

-(void)enemySprite:(id)sender {

CGSize winSize = [[CCDirector sharedDirector] winSize];

//SPAWN ENEYMY
enemySprite = [CCSprite spriteWithFile:@"eneymySprite.png"];
enemySprite.position = ccp (winSize.width/16, winSize.height/5);
[self addChild:enemySprite z:300];

CCAction *moveEnemyRight = [CCMoveTo actionWithDuration:3 position:ccp (winSize.width/1, winSize.height/5) ];
[enemySprite moveEnemyRight];

if ( enemySprite.position.y >= winSize.width ) {

    //Best Way to Remove enemySprite from Scene?

}

NSLog(@"Collision");

[self unschedule:@selector(enemySprite:)];
unsigned int t = arc4random()%4 + 1;
[self schedule:@selector(enemySprite:) interval: t];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:28:22.717

您必须创建一系列敌人才能检查他们是否离开游戏区域（在您的情况下为屏幕）。在你的代码这部分

```
if ( enemySprite.position.y >= winSize.width ) {

    //Best Way to Remove enemySprite from Scene?

} 
```

永远不会被调用。因为`enemySprite.position.y >= winSize.width`将始终`NO`像您刚刚创建此精灵并将其放置到带有坐标的游戏区域一样

```
ccp(winSize.width/16, winSize.height/5) 
```

# ruby - 如何使 shell 命令在 ruby 中同步执行

> ID：12151690
> 
> 赞同：1
> 
> 时间：2012-08-28T01:35:04.197
> 
> 标签：ruby, shell, zip, command, unzip

我想提取 zip 文件并在提取时将其删除。谷歌搜索告诉我，在 Ruby 中解压缩文件的最简单方法是使用`unzip filename.zip`. 我的下一步是删除 zip 文件。

第二步发生得如此之快，以至于 shell 命令 unzip 在删除之前甚至没有机会看到文件。它错误地说

```
"unzip:  cannot find either filename.zip or filename.zip.zip." 
```

我只想`unzip...`在继续执行 ruby​​ 脚本之前完成命令。我希望它同步阻塞。有没有办法做到这一点？我不能使用睡眠，因为我无法估计需要多长时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T03:05:59.780

在 ruby​​ 中运行外部程序的常用方法是同步的，所以应该没有问题。

尝试

```
`unzip` 
```

或者

```
system("unzip") 
```

或者

```
system("unzip x && rm x") 
```

# c# - 使用具有 POCO 实体的实体框架在关联实体中重复行

> ID：12151693
> 
> 赞同：2
> 
> 时间：2012-08-28T01:35:20.790
> 
> 标签：c#, entity-framework, poco, entity-relationship

`Entity-Frameworks`我在使用`POCO`实体时遇到问题。我在产品和类别之间有关系，我有以下代码要保存在数据库中：

```
 public virtual void Add(T entity)
    {
        ContextEntity.AddObject(entity);
        Context.SaveChanges();
    } 
```

我正在尝试使用已经存在的类别创建一个新产品，但是当我查询数据库时，新产品与一个新类别的关系与我尝试关联的前一个类别具有相同的值。我一直在寻找答案，但这些示例不适用于我，因为我没有他们在示例中使用的相同方法。也许是因为我正在使用`POCO`实体，我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:33:55.543

I've made a few assumptions about your code but maybe one of these methods will help.

1.  When creating the new Product instance you can set the foreign key value like CategoryId to the existing Category Id

2.  If you want to set the navigation property "Product.Category" you must make sure of the following:

The referenced Category instance must be owned by the context by either using the `Context.Categories.Attach` or by first fetching it through the context with e.g. `Context.Categories.FirstOrDefault(c => c.id == 1)`

If you set `Product.Category` equal to a disconnected instance of Category the context will automatically try and add the referenced instance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:38:13.603

```
 [HttpPost]
    public ActionResult Create(CategoriaView collection)
    {
        try
        {
            UnidadDeMedida unidadDeMedida= 
                unidadDeMedidaService.GetByCriteria(i => i.IdUnidadDeMedida == collection.UnidadDeMedida.IdUnidadDeMedida)
                .FirstOrDefault();
            Mapper.CreateMap<UnidadDeMedida,UnidadDeMedidaView>();
            Mapper.CreateMap<UnidadDeMedidaView,UnidadDeMedida>();
            UnidadDeMedidaView unidadDeMedidaView =
                Mapper.Map<UnidadDeMedida,UnidadDeMedidaView>(unidadDeMedida);
            collection.UnidadDeMedida = unidadDeMedidaView;
            Mapper.CreateMap<CategoriaView, Categoria>();

            Categoria categoria =
                Mapper.Map<CategoriaView, Categoria>(collection);
            categoria.UnidadDeMedida = unidadDeMedida;
            service.Add(categoria);

            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    } 
```

# linux - 我在哪里可以找到 Linux 内核源代码树的版本？

> ID：12151694
> 
> 赞同：75
> 
> 时间：2012-08-28T01:35:30.473
> 
> 标签：linux

我从硬件供应商那里下载了他们的 Linux 源代码树的压缩包（没有 Git 存储库元数据），有没有办法找出内核的版本号？

版本号通常存储在源代码树的某个文件中吗？

我希望能够在不编译和运行内核的情况下做到这一点。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-08-28T01:42:36.237

您可以通过运行找到版本

```
make kernelversion 
```

在源代码树中

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2012-08-28T01:48:39.963

检查顶层，[这里](http://fxr.watson.org/fxr/source/Makefile?v=linux-2.6)`Makefile`有一个例子。在顶部，您应该会看到如下内容：

```
VERSION = 3
PATCHLEVEL = 1
SUBLEVEL = 0
EXTRAVERSION = -pax
NAME = Custom Pax Version 
```

此方法的（不可否认的次要）优点是您只需要能够查看文件本身，而不必运行构建过程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-25T14:03:12.320

另一个解决方案：在旧时代`include/linux/version.h`，目前`include/generated/uapi/linux/version.h`，但只有在至少部分成功编译之后。

# jquery - 用图像替换数字

> ID：12151699
> 
> 赞同：0
> 
> 时间：2012-08-28T01:35:53.457
> 
> 标签：jquery, html, web

所以基本上我想做的是使用 jQuery 用图像替换数字。

我想用图像替换 5hr 53min，所以如果有 5，那么它将显示 5.jpg，并且用 3 替换它并显示 3.jpg。

这是我想做的一个例子：http: [//pastehtml.com/view/c9of5gm15.html](http://pastehtml.com/view/c9of5gm15.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T01:39:32.513

```
$('time').html(function(i, v){
    return v.replace(/(\d)/g, '<img src=$1.jpg />');
}); 
```

这是小提琴：http: [//jsfiddle.net/FtfkK/](http://jsfiddle.net/FtfkK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T01:39:17.643

```
var number = 5;
$('#myImage').attr('src', 'my_image_path/' + number + '.jpg'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T01:39:29.550

您需要使用 HTML 画布绘制数字，然后创建数据 URL

请参阅[将 HTML 画布捕获为 gif/jpg/png/pdf？](https://stackoverflow.com/questions/923885/capture-html-canvas-as-gif-jpg-png-pdf)

# java - 创建未标记实例时出现 weka.core.UnassignedDatasetException

> ID：12151702
> 
> 赞同：13
> 
> 时间：2012-08-28T01:36:40.850
> 
> 标签：java, machine-learning, classification, weka

我使用手动创建的一些训练数据训练了一个 IBK 分类器，如下所示：

```
ArrayList<Attribute> atts = new ArrayList<Attribute>();
ArrayList<String> classVal = new ArrayList<String>();
classVal.add("C1");
classVal.add("C2");
atts.add(new Attribute("a"));
atts.add(new Attribute("b"));
atts.add(new Attribute("c"));
atts.add(new Attribute("d"));
atts.add(new Attribute("@@class@@", classVal));

Instances dataRaw = new Instances("TestInstances", atts, 0);
dataRaw.setClassIndex(dataRaw.numAttributes() - 1);
double[] instanceValue1 = new double[]{3,0,1,0,0};
dataRaw.add(new DenseInstance(1.0, instanceValue1));

double[] instanceValue2 = new double[]{2,1,1,0,0};
dataRaw.add(new DenseInstance(1.0, instanceValue2));

double[] instanceValue3 = new double[]{2,0,2,0,0};
dataRaw.add(new DenseInstance(1.0, instanceValue3));

double[] instanceValue4 = new double[]{1,3,0,0,1};
dataRaw.add(new DenseInstance(1.0, instanceValue4));

double[] instanceValue5 = new double[]{0,3,1,0,1};
dataRaw.add(new DenseInstance(1.0, instanceValue5));

double[] instanceValue6 = new double[]{0,2,1,1,1};
dataRaw.add(new DenseInstance(1.0, instanceValue6)); 
```

然后我建立分类器：

```
IBk ibk = new IBk();
try {
    ibk.buildClassifier(dataRaw);

} catch (Exception e) {
    e.printStackTrace();
} 
```

我想用未标记的类创建一个新实例并对这个实例进行分类，我尝试了以下方法，但没有成功。

```
IBk ibk = new IBk();
try {
    ibk.buildClassifier(dataRaw);
    double[] values = new double[]{3,1,0,0,-1};
    DenseInstance newInst = new DenseInstance(1.0,values);
    double classif = ibk.classifyInstance(newInst);
    System.out.println(classif);
} catch (Exception e) {
    e.printStackTrace();
} 
```

我只是收到以下错误

```
weka.core.UnassignedDatasetException: DenseInstance doesn't have access to a dataset!
at weka.core.AbstractInstance.classAttribute(AbstractInstance.java:98)
at weka.classifiers.AbstractClassifier.classifyInstance(AbstractClassifier.java:74)
at TextCategorizationTest.instancesWithDoubleValues(TextCategorizationTest.java:136)
at TextCategorizationTest.main(TextCategorizationTest.java:33) 
```

看起来我在创建新实例时做错了什么。我怎样才能准确地创建一个未标记的实例？

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-01-25T19:46:15.117

当您对未与数据集关联的新实例进行分类时，您将看到此错误。您必须使用 . 将您创建的每个新实例关联到一个[`Instances`](http://www.cs.tufts.edu/~ablumer/weka/doc/weka.core.Instances.html#_top_)对象[`setDataset`](http://www.cs.tufts.edu/~ablumer/weka/doc/weka.core.Instance.html#setDataset%28weka.core.Instances%29)。

```
//Make a place holder Instances
//If you already have access to one, you can skip this step
Instances dataset = new Instances("testdata", attr, 1);
dataset.setClassIndex(classIdx);

DenseInstance newInst = new DenseInstance(1.0,values);

//To associate your instance with Instances object, in this case dataset
newInst.setDataset(dataset); 
```

在此之后，您可以对新创建的实例进行分类。

```
double classif = ibk.classifyInstance(newInst); 
```

[http://www.cs.tufts.edu/~ablumer/weka/doc/weka.core.Instance.html](http://www.cs.tufts.edu/~ablumer/weka/doc/weka.core.Instance.html)

[详细实现链接](https://taimoorchangaizpucitian.wordpress.com/2015/12/03/weka-create-instance-and-training-data-using-arff/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-29T19:11:42.673

问题在于这一行：

```
double classif = ibk.classifyInstance(newInst); 
```

当您尝试进行分类`newInst`时，Weka 会抛出异常，因为`newInst`没有与之关联的 Instances 对象（即数据集） - 因此它不知道有关其类属性的任何信息。

您应该首先创建一个类似于 dataRaw 的新 Instances 对象，将未标记的实例添加到其中，设置类索引，然后才尝试对其进行分类，例如：

```
Instances dataUnlabeled = new Instances("TestInstances", atts, 0);
dataUnlabeled.add(newInst);
dataUnlabeled.setClassIndex(dataUnlabeled.numAttributes() - 1);        
double classif = ibk.classifyInstance(dataUnlabeled.firstInstance()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T23:59:09.823

请参阅 WEKA 文档的第 203 - 204 页。这对我帮助很大！（Weka 手册是一个 pdf 文件，位于您的 weka 安装文件夹中。只需打开 doucmentation.html，它将指向您的 pdf 手册。）

复制粘贴第 17 章（使用 WEKA API / 在内存中创建数据集）的代码清单的一些片段应该可以帮助您解决任务。

# java - 同质化集合

> ID：12151703
> 
> 赞同：4
> 
> 时间：2012-08-28T01:36:46.417
> 
> 标签：java, generics, subclass

假设我有一个非泛型`List`或 a `List<Foo>`，你知道它的所有元素都是 type `Bar`，这是一个子类`Foo`（总是如此）。假设您无法更改获取原始列表的代码，以便您可以`List<Bar>`直接获取。是否有一些图书馆或其他东西可以帮助“同质化”这个列表？

也就是说，在

```
public static <T, U extends T> List<U> homogenize(List<T> list, Class<U> subclass); 
```

我可以在某处使用吗？(`homogenize()`返回输入列表的视图，其中的函数在适当的情况下`U`而不是`T`或`Object`在适当的情况下接收。它不返回列表的副本。如果输入列表不能同质化 - 也就是说，如果不是所有元素的类型都可分配给U，然后`homogenize()`返回 null。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T04:32:08.897

如果您正在寻找图书馆，我的第一个想法是使用[Google Guava Libraries](http://guava-libraries.googlecode.com/)，如下所示：

```
public <T, U extends T> List<U> homogenize(List<T> list, final Class<U> subclass) {
    Predicate<T> pred = new Predicate<T>() {
        @Override
        public boolean apply(T input) {
            return input.getClass().isAssignableFrom(subclass);
        }
    };
    return Iterables.all(list, pred) ? (List<U>)list : null;
} 
```

我还没有尝试过，以确保扭结已经消失。然而，我看着它，并认为它非常丑陋。稍微好一点的番石榴方法是：

```
public <T, U extends T> List<U> homogenize(List<T> list, Class<U> subclass) {
    Iterable<U> ret = Iterables.filter(list, subclass);
    if (list.size() != Lists.newArrayList(ret).size()) return null;
    return (List<U>)list;
} 
```

但是，它仍然有点难看。它使用集合的内部副本。它仍然返回原始的演员视图。毕竟，最干净的方法似乎是使用常规 Java：

```
public <T, U extends T> List<U> homogenize(List<T> list, Class<U> subclass) {
    for( T t : list) {
        if (!t.getClass().isAssignableFrom(subclass)) return null;
    }
    return (List<U>)list;
} 
```

根据您对类型转换警告的反感，您甚至可以在所有三个选项中删除转换运算符。

**根据评论进行编辑评论** 中提出了以下更改/改进。

选项一改进：

```
public <T, U extends T> List<U> homogenize(List<T> list, final Class<U> subclass) {
    return Iterables.all(list, Predicates.instanceOf(subclass)) ? (List<U>)list : null;
} 
```

选项二改进：

```
public <T, U extends T> List<U> homogenize(List<T> list, Class<U> subclass) {
    Iterable<U> ret = Iterables.filter(list, subclass);
    return (list.size() != Iterables.size(ret)) ? null : (List<U>)list;
} 
```

选项三改进：

```
public <T, U extends T> List<U> homogenize(List<T> list, Class<U> subclass) {
    for( T t : list) {
        if (!subclass.isInstance(t.getClass())) return null;
    }
    return (List<U>)list;
} 
```

通过这些改进，第一个番石榴示例大放异彩。如果您不介意静态导入，则两个 Guava 示例都变得非常易读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:40:06.103

为什么不能直接投呢？

```
public static <U> List<U> homogenize(List<? super U> list){
    return (List<U>)list;
} 
```

请注意，泛型是纯粹的编译时检查。如果类型不是您所期望的，那么当您尝试将不是 a 的对象强制转换为 a 时，您将得到一个`bar`异常`bar`。

编辑：我没有注意到您希望它实际检查内容的类型并在失败时返回 null 。如果您不确定这些项目是正确的类型并且想要故障快速行为，那么您最好使用其他方法之一。

# asp.net-mvc-3 - 附加 .mdf 文件时，数据库“无法打开，因为它是 661 版”

> ID：12151705
> 
> 赞同：4
> 
> 时间：2012-08-28T01:37:11.137
> 
> 标签：asp.net-mvc-3, sql-server-2008-r2

我正在尝试将 MvcMusicStore.mdf 附加到 sql server 2008 R2 管理工作室中的 .\SQLEXPRESS 实例（sql server 版本 10.0.2531）。我从这个项目中得到了数据库：http: [//mvcsitemap.codeplex.com/releases/view/67151](http://mvcsitemap.codeplex.com/releases/view/67151)

当我尝试附加时出现错误？：

```
The database 'C:\PROJECTS\CODEPLEX\TFS10\MVCSITEMAP\BRANCHES\3.1.0\SRC\MVCSITEMAPPROVIDER\MVCMUSICSTORE\APP_DATA\MVCMUSICSTORE.MDF' cannot be opened because it is version 661\. This server supports version 655 and earlier. A downgrade path is not supported. 
```

我需要升级我的 sql server 还是其他什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T01:40:15.443

您的 SQL Server Express 实例是 2008 版，数据库来自 2008 R2。您必须升级到 SQL Server Express 2008 R2 才能恢复数据库。使用 2008 R2 版本的 Management Studio 并不重要 - 数据库实例也需要更新。

请参阅[SQL Server：附加不正确的版本 661](https://stackoverflow.com/questions/4257684/sql-server-attach-incorrect-version-661)

# javascript - 单独的文件（HTML5、CSS 和 JS）

> ID：12151708
> 
> 赞同：3
> 
> 时间：2012-08-28T01:37:48.287
> 
> 标签：javascript, html, web-applications, css, mobile

我最近使用 HTML5、CSS3、JavaScript 和一些 jQuery 开发了我的第一个移动 Web 应用程序。在这个阶段，我想在 3 个不同的文件中分离 HTML、CSS 和 JS 的代码，并使用 Web 服务器在这些文件之间建立连接。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T01:58:55.977

只需在 HTML 中声明对 CSS 和 JS 的引用。出于性能原因，最好将 CSS 引用放在文件头部，将 JS 引用放在文件末尾，然后再关闭标记。这样，您的页面将立即加载并且看起来正确，并且不会被阻止下载 JavaScript。JS 将是最后加载的内容。这是 HTML 标记的示例：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="mystyles.css" />
</head>

<body>
...

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="myscript.js"></script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:01:02.777

我建议研究像这样的建筑商

*   阿帕奇蚂蚁
*   HTML5 样板构建脚本
*   Grunt（基于 node.js）
*   Make 或 Rake 文件

这允许您分离所有文件，然后对文件进行 lint。这也允许您随后合并和缩小文件。至于不同的css、html和javascript。这些都应该保留在单独的文件中。但是缩小文件并将它们组合成单个文件肯定会减少页面加载时间。

一个很好的阅读和浏览将是 HTML5 Boilerplate。他们在性能和开发流程上花费了大量时间。

# meteor - 部署后流星读取 CSV 文件以填充数据库不起作用

> ID：12151709
> 
> 赞同：6
> 
> 时间：2012-08-28T01:37:50.007
> 
> 标签：meteor

所以我有一堆数据要从 CSV 加载到数据库中。我已经组合了一个在本地开发中有效的解决方案，但是当我部署到meteor.com 时，它不再有效。

我正在将 csv 文件加载到文件夹 /server/data/ 中：

```
function readData(name){
    var fs = __meteor_bootstrap__.require('fs');   
    var path = __meteor_bootstrap__.require('path');   
    var base = path.resolve('.');
    var data = fs.readFileSync(path.join(base, '/server/data/', name));
    return CSVToArray(data);
} 
```

在我部署到meteor.com 之后，我得到了：

```
INFO Error: ENOENT, no such file or directory '/meteor/containers/98eb1286-120b-ee84-8e98-ce673fa2eab7/public/data/categories.csv'
    at Object.openSync (fs.js:240:18)
    at Object.readFileSync (fs.js:128:15)
    at readData (app/server/models.js:10:16)
    at app/server/categories.js:6:7
    at /meteor/containers/98eb1286-120b-ee84-8e98-ce673fa2eab7/bundle/server/server.js:132:63
    at Array.forEach (native)
    at Function.<anonymous> (/meteor/containers/98eb1286-120b-ee84-8e98-ce673fa2eab7/bundle/server/underscore.js:76:11)
    at /meteor/containers/98eb1286-120b-ee84-8e98-ce673fa2eab7/bundle/server/server.js:132:7 
```

知道如何在部署后让流星查看 csv 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-27T16:47:32.973

我意识到这个问题很老了，但它在某些关键字搜索中仍然排名很高。所以，如果你使用**Meteor 0.6.5+**，你可以使用新的[Assets API](http://docs.meteor.com/#assets)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T07:37:20.100

感谢 SamuelDavis 和 Tom Coleman 的提示。我最终弄清楚了问题所在。原来捆绑的应用程序不再格式化为客户端、公共和服务器。我最终通过运行流星包来创建一个压缩包来调试它。提取 tarball 并查看内部以找到数据文件夹的位置。汤姆也是对的，数据文件夹需要在公用文件夹中才能被捆绑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T06:52:08.530

问题是，meteor 在部署时只捆绑它知道的文件（即 JS/CSS/HTML/+more，取决于您使用的包）。

试着把你需要的文件放到`public`目录下（这个目录不受上述规则的约束）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T04:34:00.160

似乎基本目录不在包含文件“/server/data/xxx.csv”的同一位置。

在您尝试其他任何操作之前，请在调用“var base = path.resolve('.') 之后记录基本路径。如果该值是您所期望的，请记录该目录中出现的文件。再次，如果文件是您所期望的，导航到 /server 文件夹并打印出这些目录等等。

这应该指出您缺少哪个文件夹和/或目录，并且应该指出您将来应该将 CSV 文件放在哪里。

# java - 限制/删除字符串中的额外字符 (>40)。

> ID：12151710
> 
> 赞同：-1
> 
> 时间：2012-08-28T01:37:51.593
> 
> 标签：java, string, trim

> **可能重复：**
> [最多前 N 个字符](https://stackoverflow.com/questions/1583940/up-to-first-n-characters)
> [我需要将名为“TITLE”的变量“修剪”为仅 40 个字符](https://stackoverflow.com/questions/12533692/i-need-to-trim-my-variable-called-title-to-only-40-characters)

Java：限制/修剪/从字符串中删除多余的字符。我想在字符串变量的 40 个字符之后删除任何多余的字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:39:29.183

```
String shortString = longString.substring(0, Math.min(longString.length(), 40)); 
```

您可能想仔细看看[String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int%29)类

# c# - 用所有子实体水合对象的更好方法。

> ID：12151711
> 
> 赞同：1
> 
> 时间：2012-08-28T01:38:14.697
> 
> 标签：c#, asp.net, repository, domain-driven-design

在存储库级别水合对象的子实体的最佳方法是什么。例如：我需要系统中所有人的列表。每个人可以有多个电话号码。我将如何在我的存储库中填充所有这些数据？

```
public class Person
{
    public int? Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string MiddleName { get; set; }
    public List<Phone> PhoneNumbers { get; set; } 
}

    public IEnumerable<Person> GetPeople()
    {
        var persons = new List<Person>();
        const string sql = "SELECT FirstName, LastName, MiddleName FROM Person.Person";

        while (reader.Read())
        {
            var p = PersonFactory.GetPerson(reader);
            p.PhoneNumbers = this.GetPhoneByPersonId(p.Id);
            persons.Add(p);
        }

        return persons;
    }

    public IEnumerable<Phone> GetPhoneByPersonId(int? id)
    {
        while (reader.Read())
        {
            numbers.Add(PersonFactory.GetPhone(reader));
        }
    } 
```

我对这种方法的问题是我正在执行一堆命中数据库的 sql 语句。这似乎不是最好的方法。我不能使用任何框架，必须使用 DataReader。

我可以采取什么更好的方法？这也是一个简单的例子。我的 Person 对象将会有更多列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:03:55.493

实现该`GetPeople`方法的一种方法是执行包含多个结果集的单个 SQL 语句。如果使用启用了[MAR](http://msdn.microsoft.com/en-us/library/ms131686.aspx) S 的 SQL Server，这将来自服务器作为对单个查询的响应。否则，您可以执行两个查询，一个用于检索人员，另一个用于检索与这些人关联的所有电话号码。

您的查询可能类似于：

```
SELECT FirstName, LastName, MiddleName FROM Person.Person WHERE -- omitted

SELECT PhoneNumber,Name FROM Person.PhoneNumbers WHERE -- restrict to same set as above 
```

同样，如果服务器支持，您可以在一个命令中发送两个查询，或者发出两个单独的查询。无论哪种方式，这只是两个查询，这没什么大不了的。请确保您不会一次返回太多结果。

在内存中拥有两个结果集后，您可以通过人员 ID 将它们连接起来，并将所有人员实例与其对应的电话号码相关联。总体而言，您正在执行一个或两个数据库查询。

IDataReader 提供方法[NextResult](http://msdn.microsoft.com/en-us/library/system.data.idatareader.nextresult.aspx)来枚举查询返回的多个结果集。

# google-app-engine - 从 Google App Engine 发送的电子邮件进入 Gmail 中的垃圾邮件

> ID：12151714
> 
> 赞同：1
> 
> 时间：2012-08-28T01:38:26.203
> 
> 标签：google-app-engine

我们正在使用 Google App Engine Java Mail API 向通过电视节目网站订阅的用户发送简报。

我们使用的 FROM 地址是*name@example.com*，但*name@[appid].appspotmail.com*也会出现问题。

我们已经设置了 SPF 和 DKIM 记录，我们在 SpamAssassin 上的得分很低（大约 0.7）。

所有其他电子邮件提供商正常接收电子邮件（hotmail、yahoo、aol 等），但在 Gmail 中，所有邮件都直接发送到垃圾邮件文件夹。每一个。

有人对此有任何线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:09:22.373

如果所有其他邮件提供商都在工作，您可能需要查看 gmail 的垃圾邮件政策：[https](https://support.google.com/mail/bin/answer.py?hl=en&answer=81126) ://support.google.com/mail/bin/answer.py?hl=en&answer=81126它可能会对问题有所了解你有。

# ios - UIImagePickerController 委托方法不重新保存/覆盖拍摄的新照片

> ID：12151716
> 
> 赞同：0
> 
> 时间：2012-08-28T01:38:30.207
> 
> 标签：ios, save, uiimagepickercontroller

我正在使用 UIImagePickerController 的简单实现来拍照并将其保存到我的应用程序目录中。我遇到了 didFinishPickingMediaWithInfo 的问题，我从信息中检索图像，使用 UIImageJPEGRepresentation 将其转换为 NSData，然后将其保存到文件中。问题是，NSData 对象似乎永远不会被覆盖，所以我第一次拍照它可以很好地保存图片，但不会保存任何后续图片，因为当我重新显示位于要保存到的 filePath 的图像时，它始终是我拍摄的第一张图片。

我现在有 NSLog 语句打印出 UIImage 和我保存图像的 NSData 对象的哈希值。UIImage 哈希每次都会改变，但 NSData 哈希始终是完全相同的……那不应该也改变吗？

我的代码如下。请注意，下面委托方法中未声明的所有内容都是全局变量，不会给我带来任何麻烦（至少它们似乎没有）。

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    documentsDirectory = [paths objectAtIndex:0];          
    filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectory, fileNameString];

    NSData *imageData = UIImageJPEGRepresentation(image, 0.5f);
    //    imageData = [NSData dataWithData:UIImageJPEGRepresentation(image, 0.5f)];

    [imageData writeToFile:filePath atomically:YES];

    [self dismissModalViewControllerAnimated:YES];
} 
```

当我完全摆脱 NSData 对象并替换所有实例时

```
imageData 
```

和

```
UIImageJPEGRepresentation(image, 0.5f) 
```

我仍然有同样的问题，即 UIImageJPEGRepresentation(image, 0.5f) 的哈希总是相同的，即使它作为参数的 UIImage 的哈希总是改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:52:41.603

尝试这个：

```
 NSData *imageData = UIImageJPEGRepresentation(image, 0.5f);
 imageData = [NSKeyedArchiver archivedDataWithRootObject:imageData];
//imageData = [NSData dataWithData:UIImageJPEGRepresentation(image, 0.5f)];

NSError *error= nil;
[imageData writeToFile:filePath options:NSDataWritingAtomic error:&error]; 
```

也看看这个[链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)

你在创建目录吗？使用此代码创建目录：

```
NSArray* dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
                                                        NSUserDomainMask, YES);
NSString* docsDir = [dirPaths objectAtIndex:0];

pathString = [docsDir stringByAppendingPathComponent:@"%@",filePath];

NSFileManager* filemgr = [NSFileManager defaultManager];

//Creates  Directory
if ([filemgr createDirectoryAtPath:pathString
       withIntermediateDirectories:YES 
                        attributes:nil 
                             error: NULL] == YES){ 
```

# php - 我想使用 php 更新数据库（mysql）中单选按钮的值

> ID：12151718
> 
> 赞同：1
> 
> 时间：2012-08-28T01:38:51.687
> 
> 标签：php, mysql, html

我是 php 和 mysql 的新手。我已经使用单选按钮来保存我的帐户记录的类型，我可以成功插入数据，但是当我尝试从 sql 获取该数据（无论选择 S 类型还是选择 T 类型）以进一步更新它时，我不能这样做. 我不知道如何从我的 sql 中获取单选按钮的数据。请帮忙

```
<form method="post" action="users-edit-action.php">
    <input type="hidden" value="<?php echo $accountid; ?>" name="id" />
    <label>Email/Username:</label><input type="text" name="email" value="<?php echo $email; ?>" /><br /><br />
    <label>Password:</label><input type="password" name="password" value="<?php echo $password;?>" /><br /><br />
    <label>First Name:</label><input type="text" name="firstname" value="<?php echo $firstname; ?>" /><br /><br />
    <label>Last Name:</label><input type="text" name="lastname" value="<?php echo $lastname; ?>" /><br /><br />
    <label>Type:</label><br />
    <input type="radio" name="type" value="<?php echo $type; ?>" /> Student<br />
    <input type="radio" name="type" value="<?php echo $type; ?>" /> Teacher<br />

        <input type="submit" value="Edit" />
    </form> 
```

这就是我从数据库中获取值的方式..我确定我做错了，请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T01:47:20.200

您必须检查从数据库中获得的类型，并根据该类型将此属性添加到输入元素：`checked="checked"`。所以整个选定的标签看起来像这样：

`<input name="type" type="radio" checked="checked" value="the one PHP returned" />`

另一个输入标签也会在那里，但没有`checked`属性。您只需要对放置属性的元素进行 PHP 检查。

整个部分：

```
<input type="radio" name="type" value="S" <?php if ($type == 'S') echo 'checked="checked"'; ?>" /> Student<br />
<input type="radio" name="type" value="T" <?php if ($type == 'T') echo 'checked="checked"'; ?>" /> Teacher<br /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:47:49.110

您的单选按钮的值是固定的，不取决于数据库中的值，仅取决于是否选中。

它应该是这样的：

```
<input type="radio" name="type" value="S" <?php echo ($type == 'S') ? 'checked' : ''; ?> /> Student<br />
<input type="radio" name="type" value="T" <?php echo ($type == 'T') ? 'checked' : ''; ?> /> Teacher<br /> 
```

# java - ArrayList 数据未正确传输到 Java 中的 Array

> ID：12151719
> 
> 赞同：0
> 
> 时间：2012-08-28T01:38:52.917
> 
> 标签：java, android, arrays, arraylist

当我注销 sectionList 时，有 20 个项目；出于某种原因，除了最后一项之外的所有内容都被输入到 Array 部分。有人可以看到这里有什么问题吗？

更新：我发布了有问题的整个班级；它相对较短。它来自一个安卓应用程序。

```
public class ItemAdapter extends ArrayAdapter<ItemObject> implements
        SectionIndexer {

    private HashMap<String, Integer> alphaIndexer;
    private String[] sections;
    private LayoutInflater inflater;

    public ItemAdapter(Context context, ItemObject[] objects) {
        super(context, R.layout.item_row_layout, objects);

        inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        alphaIndexer = new HashMap<String, Integer>();
        int size = objects.length;

        for (int i = 0; i < size; i++) {

            ItemObject it = objects[i];
            String name = it.name;
            String s = name.substring(0, 1);
            s = s.toUpperCase();

            if (!alphaIndexer.containsKey(s)) {
                alphaIndexer.put(s, i);
            }
        }

        Set<String> sectionLetters = alphaIndexer.keySet();
        ArrayList<String> sectionList = new ArrayList<String>(sectionLetters);
        Collections.sort(sectionList);
        sections = new String[sectionList.size()];

        sections = sectionList.toArray(new String[sectionList.size()]);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T01:53:44.023

```
 for (int i = 0; i < sectionList.size(); i++) {
        sections[i] = sectionList.get(i);
    }

    for (int i = 0; i < sections.length - 1; i++) {
        sections[i] = sectionList.get(i);
    } 
```

你为什么在这里复制数组两次？另外，为什么不使用`Iterator`? 实际上，您**真正**应该使用的是[`ArrayList.toArray`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#toArray%28T%5b%5d%29)转换为`String[]`，例如

```
sections = sectionList.toArray(new String[sectionList.size()]); 
```

此外，您可以使用 a`TreeMap`而不是 a对密钥进行排序`HashMap`，只需执行[`TreeMap.keySet`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#keySet%28%29)...

> 集合的迭代器按升序返回键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T01:57:42.057

我认为这背后的原因是 for 循环中的条件`i < sections.length - 1;`。您可能`sections[i]`只在 for 循环中登录。

# hdf5 - 不支持的 HDF5 版本

> ID：12151720
> 
> 赞同：3
> 
> 时间：2012-08-28T01:38:55.647
> 
> 标签：hdf5, pytables

尝试安装 Pytables，并且我已经安装了几乎所有依赖项：但是，当我尝试安装 pytables 时：

```
* Found numpy 1.7.0b1 package installed.
* Found numexpr 2.0.1 package installed.
* Found Cython 0.16 package installed.
* Found HDF5 headers at ``/home/xug/pytables/hdf5/include``, library at ``/home/xug/pytables/hdf5/lib``.
.. ERROR:: Unsupported HDF5 version! 
```

“不支持的 HDF5 版本”是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T01:06:46.440

尽管问题的作者已经在评论中回答了这个问题，但我认为在这里也有（也许更冗长的）答案是合适的。

如前所述，问题是由错误（或缺少）系统范围的 HDF5 库版本引起的。就我而言，我通过编译一个较新的版本并在本地安装它来解决它：

```
$ wget http://www.hdfgroup.org/ftp/HDF5/current/src/hdf5-1.8.11.tar.bz2
$ tar xjvf hdf5-1.8.11.tar.bz2
$ cd hdf5-1.8.11
$ configure --prefix=~/localroot
$ make -j 8
$ make install 
```

然后有必要在编译包之前指定此本地安装的路径：

```
$ export HDF5_DIR=~/localroot
$ pip install tables 
```

最后，`~/localroot/lib`必须在`LD_LIBRARY_PATH`PyTables 中才能工作，所以我添加了这一行

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:~/localroot/lib 
```

至`~/.bashrc`

# android - 无方向加力

> ID：12151721
> 
> 赞同：1
> 
> 时间：2012-08-28T01:38:55.523
> 
> 标签：android, unity3d

有没有一种方法可以在不声明方向的情况下向对象添加力。我想扔球，但我只需要在触球时增加力量。我使用了这段代码`rigidbody.velocity = transform.forward * 20;`，但是球改变了它的方向并在球按照用户在屏幕上预期的方向后向前移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:40:30.707

尝试[Rigidbody.AddForce](http://docs.unity3d.com/Documentation/ScriptReference/Rigidbody.AddForce.html)并使用不同的[ForceModes](http://docs.unity3d.com/Documentation/ScriptReference/ForceMode.html)。如果我理解正确，Impulse 或 VelocityChange 将满足您的需求。

```
Vector3 forceDirection = transform.forward * 20;
currentGameObject.rigidbody.AddForce(forceDirection, ForceMode.Force); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:28:34.323

如果我理解的话，你想在球的运动方向上施加力（或者可能是冲动？），即在它的速度方向上：

```
Vector3 forceDirection = transform.velocity * 20;
currentGameObject.rigidbody.AddForce(forceDirection, ForceMode.Impulse); // or ForceMode.Force 
```

我不是很明白，我的意思是，力量必须有一个方向，对吧？我假设你希望它去它已经去的地方。

# android - 在图像上创建 alpha 渐变以创建淡入淡出效果

> ID：12151727
> 
> 赞同：2
> 
> 时间：2012-08-28T01:39:29.017
> 
> 标签：android, android-canvas, live-wallpaper

如何在图像上应用 alpha 渐变，使其线性淡化？现在，我正在创建单位宽度的矩形，并使用它来绘制位图，其中包含一个在循环中更改 alpha 值的绘制对象。我只是这样做，因为我想不出其他任何事情。所以更整洁的方式会更好。

```
Bitmap bitmap = BitmapFactory.decodeStream(is);
Bitmap bmp = Bitmap.createScaledBitmap(bitmap, 100, 151, true));
bitmap.recycle();

Rect Rect1 = new Rect(0, 0, 100, 100);
Rect Rect2 = new Rect(100, 0, 101, 100);

Paint paint = new Paint();

canvas.drawBitmap(bmp, Rect1, Rect1, null);
while (paint.getAlpha() != 0) {
    paint.setAlpha(paint.getAlpha() - 5);
    canvas.drawBitmap(bmp, Rect2, Rect2, paint);
    Rect2.set(Rect2.left + 1, Rect2.top, Rect2.right + 1, Rect2.bottom);
} 
```

像这样的东西

![图片 Alpha 渐变](../Images/62c96c196e4c7785feae487d00abd90e.png)

PS我正在尝试为动态壁纸执行此操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T13:29:17.437

可能，仅通过视图操作即可满足所需的行为。为此，您应该：

*   准备可绘制的形状

**res/drawable/gradient_shape.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
            android:startColor="#00FFFFFF"
            android:endColor="#FFFFFFFF"
            android:type="linear" />
</shape> 
```

*   定义布局：**activity_main.xml**：

    ```
    <ImageView
        android:id="@+id/photo"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/photo"
        android:src="@drawable/gradient_shape" /> 
    ```

    这里 drawable/photo 只是 drawables 文件夹中的 jpeg；

*   有人建议将以下代码添加到活动中（实际上，它取决于设备本机配置，对于现在 > 3.0 的设备似乎是多余的）：

    ```
    public void onAttachedToWindow() {
         super.onAttachedToWindow();
         Window window = getWindow();
         window.setFormat(PixelFormat.RGBA_8888);
     } 
    ```

之后，我在 4.1 设备上观察到以下内容： ![示例图像](../Images/5ffd0750a81ce91db84617c92f5bc674.png)

它看起来像渐变。我仍然不确定它是否是您正在寻找的东西。

# ios - 异步 FB 请求与分离线程问题中的块

> ID：12151729
> 
> 赞同：6
> 
> 时间：2012-08-28T01:39:36.523
> 
> 标签：ios, facebook, multithreading, asynchronous, objective-c-blocks

我正在使用 IOS Facebook SDK 3，并且正在尝试以更有效的方法使用它。所以我想在单独的线程中管理一些请求。

**例如这个请求（完美运行）：**

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);
dispatch_async(queue, ^{

    [self generateShareContentFor:ShareServiceTypeFacebook 
                         callback:^(NSMutableDictionary* obj)
     {
         FBRequest * rq = [FBRequest requestWithGraphPath:@"me/feed" 
                                               parameters:obj 
                                               HTTPMethod:@"POST"];
         [rq startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) { 

              dispatch_async(dispatch_get_main_queue(), ^{
                 // TREATING RESULT
                 [[UFBManager defaultManager] errorHandlerFromError:error 
                                                         fromRqType:UFBManagerRqTypePost];
              });

          }];
     }];  

}); 
```

*   我正在使用这个在我的提要上发布一些东西，我调用一个方法来自动加载这个请求的内容，然后这个块将在方法中被调用来启动请求。这个效果很好。

*   问题是如果我不把这个请求放在一个块中，那是行不通的。

**此请求无效**

```
 dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);
     dispatch_async(queue, ^{

          FBRequest * rq = [FBRequest requestForMe];
          [rq startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

                  dispatch_async(dispatch_get_main_queue(), ^{

                    // TREATING RESULT
                    [[UFBManager defaultManager] errorHandlerFromError:error 
                                                          fromRqType:UFBManagerRqTypeGet];

                  });

          }];
     }); 
```

我试图弄清楚，但我不明白是什么问题。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-13T11:00:55.613

I had this problem for a bit.

Make sure you dispatch the code on the main thread.

```
dispatch_async(dispatch_get_main_queue, ^{

           FBRequest * rq = [FBRequest requestForMe];
           [rq startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                   //The docs say this will be the main queue here anyway
                   //Feel free to go on a background thread at this point
                   }];

        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T04:17:05.257

我不确定为什么它在一种情况下起作用而不是另一种情况，但我认为这与后台队列在`startWithCompletionHandler:`返回后未运行的运行循环有关。

但我想知道你为什么要把它放在后台队列中，因为它是一个异步调用。为什么不从主线程执行此操作：

```
FBRequest * rq = [FBRequest requestForMe];
[rq startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
      dispatch_async(dispatch_get_main_queue(), ^{
        [[UFBManager defaultManager] errorHandlerFromError:error 
                                              fromRqType:UFBManagerRqTypeGet];
      });
}]; 
```

# php - 使用 mod_rewrite 更改 URL

> ID：12151730
> 
> 赞同：0
> 
> 时间：2012-08-28T01:39:43.083
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

当访问者访问我的网站并以以下形式输入网址 myWebsiteName/userName 时，他们会被转发到一个脚本，该脚本会查找与 userName 关联的成员 ID，然后转发到个人资料页面。

问题是 url 更改为 myWebsite/member-profile?member_id 形式，但我希望它在输入 url 时保留。我相信这与 mod_rewrite 有关，但不知道适用哪些条件或规则。

下面是我的 .htaccess 文件和查找成员资料的脚本代码。请问有什么建议吗？

```
SuPHP_ConfigPath /home/helcupor/public_html
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

#for files, append .php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

#for vanity urls redirect to url2id.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^\.]+)$ url2id.php?vanityName=$1 [L]

AuthUserFile "/home/helcupor/.htpasswds/public_html/passwd"

ErrorDocument 404 /routing.php
#AuthName "/admin/" 
```

* * *

url2id.php

```
<?php
include("includes/functions-and-vars.inc");
$connection = mysql_connect('localhost','','');
$vanityName = explode("/",$_SERVER['REQUEST_URI']);

if(strlen($vanityName['1'])>0)  {
    $vanityName = mysql_real_escape_string($vanityName['1'],$connection);
    $validSpecialChars = array('-', '_'); 
    if(ctype_alnum(str_replace($validSpecialChars, '', $vanityName)))   {
        $user = db_connect("SELECT mem_id FROM users WHERE vanity_url = '$vanityName' LIMIT 1");
        if(mysql_num_rows($user)==1)    {
            $newArray = mysql_fetch_array($user);
            $memID = $newArray['mem_id'];
            header('location:member-profile.php?mem_id='.$memID.'&token=1');
            exit;
        }
        else {
            header('location:advanced-search.php?error=user_not_found');
            exit;
        }
    }
    else    {
        header('location:advanced-search.php?error=user_not_found');
        exit;
    }
}
else    {
    header('location:index.php');
    exit;
}

    //echo '<br>' . $vanityName;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:44:08.597

在你的 .htaccess 文件中使用它。

```
RewriteRule ^([a-zA-Z0-9_-]+)$ member_profile.php?member_id=$1 
```

创建 member_profile.php 并以用户名而不是 userid 的形式获取 member_id。现在使用用户名到用户 ID 转换并验证您的用户名。并显示特定用户名的个人资料。

# php - Opencart 注册错误

> ID：12151736
> 
> 赞同：0
> 
> 时间：2012-08-28T01:40:50.760
> 
> 标签：php, registration, opencart, notice

有一个非常有趣的错误，我不知道如何解决。在我注册为新用户并单击提交按钮后，出现以下错误：

**注意：在第 153 行的 public_html/mystore/system/library/mail.php 中遇到格式不正确的数值注意：在第 153 行的 public_html/mystore/system/library/mail.php 中遇到格式不正确的数值警告：无法修改标头信息 - 第 28 行的 public_html/mystore/vqmod/vqcache/vq2-system_engine_controller.php 中的标头已由（输出开始于 public_html/mystore/index.php:104）警告：无法修改标头信息 - 标头已由（输出开始于 public_html/mystore/index.php:104) 在第 29 行的 public_html/mystore/vqmod/vqcache/vq2-system_engine_controller.php**

有趣的是，在出现此错误并刷新页面后，我回到了我的网站并成为注册用户？？？？（即已经登录）。

这与我的 vqmod 有关吗？有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:31:50.757

从错误中您对传递给邮件类的变量有问题，我会查看邮件类的第 153 行，从中您可以跟踪您的变量。

您的柬埔寨页面上的错误有点像红鲱鱼，因为它是一个标头发送问题，这只是由于您的邮件类中的错误输出所致。

该错误仍应允许用户注册，但无法发送注册电子邮件。

# javascript - node.js - 如何“emitter.setMaxListeners()”？

> ID：12151737
> 
> 赞同：1
> 
> 时间：2012-08-28T01:40:58.327
> 
> 标签：javascript, node.js

我遇到了与此问题类似的问题：

[node.js - 请求 - 如何“emitter.setMaxListeners()”？](https://stackoverflow.com/questions/8313628/node-js-request-how-to-emitter-setmaxlisteners/8327952#comment12431414_8327952)

用户似乎已经解决了他们的问题，但我不确定他们是如何做到的。（“process.setMaxListeners(0)”？？？）什么是“进程”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:25:52.847

我认为该问题上下文中的“过程”仅指某些 EventEmitter 类。事实上，如果你有一些 EventEmitter 对象并得到相同的错误，你应该在你的代码中添加类似这样的内容（在添加侦听器之前）：

```
request.setMaxListeners(0); 
```

这里可以是请求、进程或任何其他导致问题的对象。然而，有时这样的错误表明设计错误。如果您显示您的代码，将有可能给出更精确的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:49:34.637

进程是全局进程。它是一个事件发射器。node.js api 文档是这样说的：

进程对象是一个全局对象，可以从任何地方访问。它是 EventEmitter 的一个实例。( [http://nodejs.org/api/process.html](http://nodejs.org/api/process.html) )

你可以做一些事情，比如设置全局事件监听器，移除全局事件监听器，发出全局事件，几乎所有你可以用 EventEmitter 做的事情。

```
process.on("GlobalEvent", GlobalEventHandler);
process.emit("GlobalEvent");
do something. . .  .
process.removeListener("GlobalEvent", GlobalEventHandler); 
```

我用它来将事件从一个模块发送到另一个我在同一整体进程下运行的模块。这让我可以将它们保存在漂亮的小功能模块中，但仍然能够相互发送事件。

# jquery - 通过单独元素上的单击事件删除通过 .append 添加的列表项

> ID：12151738
> 
> 赞同：2
> 
> 时间：2012-08-28T01:40:59.627
> 
> 标签：jquery, ios, click, append, cordova

我有以下html：

```
<div id="info">
    <div class="toolbar">
        <h1 class="popup-title"></h1>
        <a href="#map" class="back">Map</a>

    </div>

    <div class="categories rounded">
        <div class="column-one list-title">
            <h3>Categories</h3>

        </div>

        <div class="column-two list-items cats">
            <ul>

            </ul>

        </div>

    </div>
</div> 
```

用这个 jquery 来填充 UL：

```
google.maps.event.addListener( marker, 'click', function () {
    for ( var i = 0; i < places.length; i++ ) {
        for ( var a = 0; a < places[i].categories.length; a++ ) {
            $( '#info .cats ul' ).append( '<li>' + places[i].categories[a] + '</li>' );
        }
    }
}); 
```

单击带有类的`a`标签时，`.back`我希望删除附加的列表项。

```
$( '.back' ).on( 'click', function () {
     $( '#info .cats ul' ).html( '' );
} ); 
```

不幸的是，列表项没有被删除，新的列表项只是不断地添加到旧的列表项中。我也试过：

```
$('#info .cats ul li').remove(); 
```

编辑：有关其他信息 - 既然我已经检查过了，它在浏览器中运行良好。该代码不会使用 jqtouch 在 ios 上清除 phonegap/cordova 中的“li”项目。这可能是平台交互的更深层次的问题。对于我要完成的工作，是否有一些替代代码解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:06:17.700

您的代码很好，但 jQuery append 的最佳实践是使用字符串。

例如

```
var ulList = '';
    google.maps.event.addListener( marker, 'click', function () {
        for ( var i = 0; i < places.length; i++ ) {
           for ( var a = 0; a < places[i].categories.length; a++ ) {
              ulList += '<li>' + places[i].categories[a] + '</li>';
//$list.append( '<li>' + places[i].categories[a] + '</li>' );
           }
       }
$list.append(ulList);
ulList = null;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:48:49.157

```
<div id="info">
    <div class="toolbar">
        <h1 class="popup-title"></h1>
        <a href="#map" class="back">Map</a>
    </div>

    <div class="categories rounded">
        <div class="column-one list-title">
            <h3>Categories</h3>
        </div>

        <div class="column-two list-items cats"><ul></ul></div>

    </div>
</div> 
```

Javascript

```
var $list = $( '#info .cats ul' );

google.maps.event.addListener( marker, 'click', function () {
    for ( var i = 0; i < places.length; i++ ) {
       for ( var a = 0; a < places[i].categories.length; a++ ) {
          $list.append( '<li>' + places[i].categories[a] + '</li>' );
       }
   }
});

$('.back').on( 'click' , function ( event ) {
     $list.empty();
     return false; //prevent the default anchor link action
}); 
```

您需要防止锚链接的默认操作。还要缓存选择器，这样您就不必每次都查询 DOM。

# lucene.net - FluentNhibernate、Nhibernate.Search 和 Lucene.Net 版本

> ID：12151751
> 
> 赞同：1
> 
> 时间：2012-08-28T01:42:51.310
> 
> 标签：lucene.net, nuget, nhibernate-search

我创建了一个项目，并使用 NuGet 安装 Nhibernate.Search。在安装过程中，NuGet 还会为我下载 Lucene.Net。

使用 NuGet，我下载并安装了以下软件包

*   FluentNHibernate.dll：1.3.0733
*   NHibernate.dll：3.3.1.4000
*   NHibernate.Search.dll：2.0.2.4000
*   Lucene.Net.dll：2.9.4.1

所有依赖项都由 NuGet 管理。但是当我运行以下代码时

```
using FluentNHibernate.Cfg;
using FluentNHibernate.Cfg.Db;
using NHibernate;
using NHibernate.Search.Event;
using NHibernate.Search.Store;

namespace Test {
    public class NHibernateSearchSessionProvider {
        private static ISessionFactory sessionFactory;
        private static object syncRoot = new object();

        public static ISessionFactory SessionFactory {
            get {
                lock (syncRoot) {
                    if (sessionFactory == null) {
                        sessionFactory = createSessionFactory();
                    }

                    return sessionFactory;
                }
            }
        }

        private static ISessionFactory createSessionFactory() {
            var config = Fluently.Configure()
                .Database(MsSqlConfiguration.MsSql2008
                    .ConnectionString(c => c.FromConnectionStringWithKey("HomeDB"))
                )
                .Mappings(m => m.FluentMappings.AddFromAssemblyOf<UserAccountMap>())
                .BuildConfiguration();

            // Add NHibernate.Search listeners
            config.SetListener(NHibernate.Event.ListenerType.PostUpdate, new FullTextIndexEventListener());
            config.SetProperty("hibernate.search.default.indexBase", "~/LuceneIndex");
            return config.BuildSessionFactory();
        }
    }
} 
```

异常消息`Could not load file or assembly 'Lucene.Net, Version=2.9.2.2, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)`

看起来这个版本的 NHibernate.Search 仍在使用 Lucene.Net 2.9.2.2 而不是新版本。我总是可以手动修复所有依赖项，但我更喜欢使用 NuGet。

任何人都有经验我该怎么做才能使代码工作？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:46:32.450

这看起来像是[NHibernate.Search nuget 包](http://nuget.org/packages/NHibernate.Search)的配置错误，它声明它支持 Lucene.Net 2.9.2.2*及更高*版本。尝试修改您的`packages.config`文件以使用 Lucene 的 2.9.2.2 版本（而不是 2.9.4.1），并且 nuget 将在包恢复期间使用指定的版本。

您可能需要清理 bin 文件夹以删除“旧”2.9.4.1 程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T13:35:35.020

使用 Install-Package NHibernate.Search.MB 我试图修复它但它没有。已经 Nhibernate.Search 很老了

# javascript - CSS 值可以有多大？

> ID：12151754
> 
> 赞同：3
> 
> 时间：2012-08-28T01:43:38.190
> 
> 标签：javascript, html, css, browser

我在 Opera 中遇到大于 2¹⁵ 的 CSS 值的问题，例如`width:32999px`.
我想知道 CSS 或 HTML 中的值可以有多大，具体取决于浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T01:58:24.423

Opera 有一个错误，将 CSS 值限制为 32766。它们使用有符号的 16 位整数，这会导致限制。这是一个已知问题，希望他们能尽快解决。其他浏览器没有相同的限制，我在其他浏览器的限制上找不到太多，但它们至少是 65535，可能更多。在[http://dev.opera.com/forums/topic/242545?t=1269270866&page=1的 Opera 论坛中有一个主题](http://dev.opera.com/forums/topic/242545?t=1269270866&page=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T02:02:12.853

我猜你这样做是为了隐藏一些东西。因此，可能有更好的方法来实现您想要实现的目标。

如果您希望在视觉和语义上都从页面中删除某些内容，请使用`display: none`. 如果您希望某些内容在视觉上从页面中消失但仍占用空间并且在语义上仍然存在（对非视觉用户代理可见），请使用`visibility: hidden`. 如果您希望某些内容在视觉上从页面中消失，但在语义上仍然存在，但不占用任何空间，您可以尝试添加 a`position:absolute`或 a`height: 0`或除`visibility: hidden`.

要回答您最初的问题，您要达到的限制可能是 2^15 - 1 或 32767（如果您考虑四舍五入，请再减少一些）。这是 16 位有符号整数的最大允许数。但是，没有标准说这应该是一个限制；您可能只是遇到了特定于浏览器的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:06:31.823

对此有两个答案：官方的 CSSWG 一个，这将是即将到来的 CSS3 值的要求（应该很快达到 CR）和实际的一个，什么浏览器，不需要符合 CSS3 值实现。

在 CSS3 值之前，它们不是 的最小最大值，因此不同的浏览器有不同的限制：Opera 为 32767 (2^15-1)，IE9 为 2^20-1，其他浏览器更多……</p>

这意味着暂时可以使用的实际最大值是 32767。数字较大的值可能被认为是“无效”或被限制，我不知道。

在 CSS3 Values 的规范工作中，讨论了放置一个合理的最小值的想法。在 2012 年 3 月的草案中，设置了 2^30-1 [3]，然后第一次讨论将其降低到 2^24-1，并且完成了另一个将其降低到 IE9 限制 (2^20-1) 的提议 [2 ]，最后工作组设置为... 2^27-1。[1]

所以正式地说这是符合 CSS3 的值的当前值。但是……当前的编辑草案 [4]（应该是 CR 的 WIP）没有更多的值集。也许这个决定被推到了 CSS4 上。

所以实际限制 (2^15-1) 是当前使用的限制。这是一个最小限制，这意味着浏览器可以自由使用更高的值（不要将更高的值视为无效），并且很可能在几年后会更高（在 2^20-1 和 2 之间） ^31-1，其中 2^24-1 和 2^27-1 是另外两个可能的值）。

与未来限制保持同步的最佳页面是：[https](https://developer.mozilla.org/en-US/docs/CSS/integer) ://developer.mozilla.org/en-US/docs/CSS/integer ，它经常更新，或关注邮件列表CSSWG（详细）。

资料来源：[1] 最新决定： http: [//lists.w3.org/Archives/Public/www-style/2012Apr/0633.html](http://lists.w3.org/Archives/Public/www-style/2012Apr/0633.html) [2] 先前决定和反提案： http: [//lists.w3.org/ Archives/Public/www-style/2012Apr/0530.html](http://lists.w3.org/Archives/Public/www-style/2012Apr/0530.html) [3] 2012 年 3 月工作草案 (2^30)：[http](http://www.w3.org/TR/2012/WD-css3-values-20120308/#integers) ://www.w3.org/TR/2012/WD-css3-values-20120308/#integers [4] 最新的编辑草稿（内容可能会在未来被编辑，但在这个答案的时候它不再包含限制）：[http ://dev.w3.org/csswg/css3-values/#integers](http://dev.w3.org/csswg/css3-values/#integers)

# scala - Scala 用于理解与 foreach

> ID：12151757
> 
> 赞同：4
> 
> 时间：2012-08-28T01:44:16.457
> 
> 标签：scala

在 Scala shell 中，我这样做了：

```
import java.util._
import scala.collection.JavaConversions._

val t: SortedMap[String,Int] = new TreeMap[String,Int] () // produces an empty java.util.SortedMap

t("a") = 1; t("b") = 2; t("A") = 3; t("0") = 4

t // prints: res35: java.util.SortedMap[String,Int] = {0=4, A=3, a=1, b=2}, as expected

t foreach println // also prints the (k,v) pairs in the same TreeMap sorted order 
```

但是，以下语句并未按排序顺序打印对，而是按哈希桶顺序 (0,4) (b,2) (A,3) (a,1) 打印它们：

```
for ((k,v) <- t) printf("(%s,%d)%n", k, v) 
```

在与 for 和 foreach 相关的其他答案中，似乎 for 理解应该转化为 foreach 的使用，如下所示：

> “(p <- e) e0 的 for-comprehension 被转换为 e.foreach { case p => e0 }”

但这似乎不是这里发生的事情。

请注意，如果我从一个*scala TreeMap 创建一个**scala* SortedMap ，那么 foreach 和 for 都按我预期的排序顺序生成 (k,v) 对。Java TreeMap 被转换为 scala 的方式似乎有所不同。

 *关于为什么会出现这种差异的任何意见或想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T03:04:30.453

嗯，`p`和`(k,v)`不一样的东西。你的理解被翻译成这样：

```
t.filter{
  case (k, v) => true
  case _      => false
}.map {
  case (k, v) => printf("(%s,%d)$n")
} 
```

一旦`filter`把它放在java集合上，它就变成了一个Scala集合，不再排序。

附带说明一下，在 Scala 2.10 上，上述内容不再适用，因为它在编译时检测到静态类型中没有不是 (k,v) 的元素，并且不生成过滤器。这里：

```
scala> for ((k,v) <- t) printf("(%s,%d)%n", k, v)
<console>:15: warning: dead code following this construct
              for ((k,v) <- t) printf("(%s,%d)%n", k, v)
                         ^
(0,4)
(A,3)
(a,1)
(b,2)

scala> import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala> reify{for ((k,v) <- t) printf("(%s,%d)%n", k, v)}
res4: reflect.runtime.universe.Expr[Unit] =
Expr[Unit](scala.collection.JavaConversions.mapAsScalaMap(t).foreach(((x$1) => x$1: @unchecked match {
  case scala.Tuple2((k @ _), (v @ _)) => scala.this.Predef.printf("(%s,%d)%n", k, v)
}))) 
```

PS：更`JavaConverters`喜欢`JavaConversions`.*

# jquery - 隐藏@media 打印的表格行

> ID：12151758
> 
> 赞同：0
> 
> 时间：2012-08-28T01:44:29.157
> 
> 标签：jquery, css, printing, html-table, media

我有一个数据表，每一行都有一个复选框，选中时表示用户希望该行包含在打印的表中。检查行时，jQuery将打印类添加到：

```
$("td .checkbox").click(function(e){
    if (this.checked) {
        $("#tr-"+this.id).addClass("print");
    } else {
        $("#tr-"+this.id).removeClass("print");
    }
}); 
```

编辑：添加 HTML 以显示下面的答案的 id 和类...

```
<tr id="tr-print-0" class="search-line-item-0 print">
    <td>data</td>
    <td>data...</td>
    <td><input type="checkbox" id="print-0" name="print-0"></td>
</tr>
<tr id="tr-print-1" class="search-line-item-1">...
<tr id="tr-print-2" class="search-line-item-0">... 
```

然后在我的 CSS 文件中，我有 @media print{} 将行的显示设置为无或阻止。

```
tr.search-line-item-0, tr.search-line-item-1 {
    display: none;
}

tr.search-line-item-0.print, tr.search-line-item-1.print {
    display: block;
} 
```

问题是当您打印页面时只显示带有 display:block 的行，这是预期的行为，但看起来每一行都在第一列内呈现（第一列`<th>`跨越`<tr>`然后所有其他`<th>`s 有他们下面什么都没有）。到目前为止，仅在 Chrome 和 Firefox 中进行了测试，两种浏览器的问题都是相同的。

目标是在不打开其他窗口或使用 iframe 的情况下快速检查行并打印它们。因此，如果有人知道也可以使用的替代解决方案:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:53:42.287

您的选择器在您的 CSS 和 Javascript 之间完成匹配。在您的 javascript 中，您通过 id 调用行，而在 CSS 中，您正在查看带有类的行。

```
$("td .checkbox").click(function(e){
   var $row = $("tr.search-line-item-"+this.id);
   if (this.checked) {
      $row.addClass("print");
   } else {
      $row.removeClass("print");
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:30:29.397

而不是设置`display: block`，设置`display: table-row`为将正常呈现为表格的一行。

# sql - 在 PostgreSQL 中将多对多关系转换为一对多

> ID：12151761
> 
> 赞同：7
> 
> 时间：2012-08-28T01:45:18.593
> 
> 标签：sql, postgresql, database-design, many-to-many, one-to-many

我有一个多对多之间的模型，并用`foo`和`bar`建模为一个表。`foo_bar``foo_id``bar_id`

我现在想将其建模为一对多（我的数据允许）。

我已经添加了一`foo_id`列，`bar`但现在我想迁移我的数据。所以，我想

```
UPDATE bar SET foo_id = f where id = b; 
```

每个`f`和`b`对来自哪里

```
SELECT foo_id AS f, bar_id AS b FROM foo_bar; 
```

是否可以在 SQL（特别是 PostgreSQL 9.0）中执行此操作？

当只有一个值时，我知道如何在 UPDATE 中进行子选择，但在这种情况下很难做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T01:51:06.393

```
UPDATE bar b
SET    foo_id = fb.foo_id
FROM   foo_bar fb
WHERE  fb.bar_id = b.bar_id; 
```

如果您应该有多行`bar`（根据您的描述，您不应该这样做），那么一行将被更新多次，结果是任意的。

这种形式的查询通常比相关子查询执行得更好。

请注意，`bar`应该真正命名的主键`bar_id`- 我在查询中使用该名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T01:52:31.440

您仍然可以在`UPDATE`语句中加入表，尝试

```
UPDATE  bar a
SET     foo_id = c.foo_id
FROM    (
            SELECT foo_id, bar_id
            FROM foo_bar
        ) c
WHERE   a.id = c.bar_id 
```

或者简单地说

```
UPDATE  bar a
SET     foo_id = c.foo_id
FROM    foo_bar c
WHERE   a.id = c.bar_id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T01:50:30.403

如果你真的有一个一对多的关系，那么对于给定的 bar 取哪个值 foo 并不重要——只有一个或者它们都是一样的。

您可以执行以下操作：

```
update bar
    set foo_id = (select max(foo_id) from foo_bar where foo_bar.bar_id = bar.id) 
```

子查询将结果限制为单个值。

# iphone - 将 png 文件添加到 Xcode 文件夹的正确方法是什么？

> ID：12151762
> 
> 赞同：0
> 
> 时间：2012-08-28T01:45:27.907
> 
> 标签：iphone

很长一段时间以来，一直在向 Xcode 添加文件，并且一直在“组”中组织它们。一切似乎都按预期工作。但最近我添加了一个文件夹来测试一个带有 2 个 png 图像的 html 文件。html 文件可以引用第二个 png 图像，但第一个 png 图像只是拒绝被识别。

我认为 Xcode 文件夹一定有一些我错过的东西。

希望有懂行的能帮忙...

```
<center><img src="first_button.png" ></center>    

<left><H4>The button is located at the bottom of the screen.         
</H4>

<BR>

<center><H3>

    Another button description

</H3>
</center>

<center><img src="A_icon_11_red.png" width="45" height="45"></center>

<BR> 
```

如果输入 Safari，上述运行完全正常。但是 UIWebView 会错过第一个 png 图像。另一个有趣的点是，当我将两个 png 文件名都更改为 A_icon_11_red.png 时，一切都会按预期出现。所以我认为这与将 first_button.png 添加到项目中的方式有​​关。

关于捆绑目录，我有以下...

```
if ((f_path = [bundle pathForResource : @"about_screen" 
                               ofType : @"html" 
                          inDirectory : @"about_html"]) != nil)

{         

// additional lines ...    

} 
```

# regex - 正则表达式内容类型

> ID：12151763
> 
> 赞同：0
> 
> 时间：2012-08-28T01:45:41.463
> 
> 标签：regex, asp.net-mvc

我在我的应用程序中使用 asp.net 女士，我想根据请求的内容类型检查切换到基本身份验证。但是添加鉴别器的唯一方法是通过正则表达式，我的正则表达式很差，谁能帮我写一个正则表达式来检查字符串在正则表达式中是“application/json”还是“application/xml”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-29T10:24:38.597

有一个简单的正则表达式可以匹配它：

```
^application/(json|xml)$ 
```

如果您不清楚字符串位于行首和行尾，只需：

```
application/(json|xml) 
```

如果您需要转义 / 栏：

```
application\/(json|xml) 
```

您甚至可能不需要捕获 json|xml 表达式，因此您可以这样做：

```
application\/(?:json|xml) 
```

# php - 使用 php 和正则表达式将 @import 更改为 php 包含？

> ID：12151766
> 
> 赞同：0
> 
> 时间：2012-08-28T01:45:58.373
> 
> 标签：php, regex, str-replace

长话短说，我基本上是在尝试使用正则表达式（甚至可能是字符串替换）来改变

```
@import url('narf.css'); 
```

至

```
<?php include('narf.css'); ?> 
```

到目前为止，我已经想出了这个，但它并没有关闭 PHP 标记....

```
$var =  str_replace('@import url', '<?php include', $var); 
```

除此之外，我有点卡住了。我在正则表达式语法方面很糟糕，我尝试或尝试查找的所有内容都让我走上了一条死胡同。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:48:58.937

```
$var = preg_replace('/@import url\(([^)]+)\);/', '<?php include $1; ?>', $var); 
```

分解它：

1.  `@import url\(`- 字面上匹配**@import url(**。
2.  `([^)]+)`- 将括号内的所有内容捕获到第一个反向引用中。
3.  `\);`- 字面上匹配**）；**.

如果你在那里的某个地方有一些空白，你也必须考虑到这一点......

# opencl - 内存传输和内核执行能否在 OpenCL 上同时运行

> ID：12151767
> 
> 赞同：2
> 
> 时间：2012-08-28T01:46:04.007
> 
> 标签：opencl

据我所知，CUDA 具有流功能。它使内存传输和内核执行 **在同一个中运行**成为可能。当然，内存传输和内核执行中的数据是**不同**的。我可以用 OpenCL 做这些事情吗？因为有时当您对视频进行一些处理时。瓶颈是内存传输。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:57:28.103

是的，您可以在 OpenCL 中重叠内存操作和内核执行。只需将函数的`blocking_read`参数设置为. 但是在对数据进行操作之前，您需要确保传输已经完成。为此使用事件。`clEnqueueReadBUffer``CL_FALSE`

# jquery - jQuery 拖拽鼠标

> ID：12151768
> 
> 赞同：3
> 
> 时间：2012-08-28T01:46:06.177
> 
> 标签：jquery, drag-and-drop

我正在尝试在中心创建一个带有拖动条的两列可滑动区域，请参阅此小提琴：http: [//jsfiddle.net/W7tGj/2/](http://jsfiddle.net/W7tGj/2/)

我试图避免将 jQ-UI 添加到组合中，因此将不胜感激。我觉得我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:02:09.607

首先： - 添加容器 div 以检查 mousemove

```
<div id="content-div">
  <div id="left-panel">f</div>

  <div id="drag-bar">f</div>

  <div id="right-panel">f</div>
</div> 
```

第二： - 将 mousemove 事件添加到 div 容器中

```
var movebar = false; 

$('#drag-bar').mousedown(function(e){
    movebar = true;
});

$('#drag-bar').mouseup(function(e){
    movebar = false;
});

$('#content-div').mousemove(function(e){
    if(movebar)
    {
        var x = e.pageX;
        $('#left-panel').css({'width': x+'px'});
        $('#right-panel').css({'margin-left': (x+5)+'px'});
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:50:44.210

尝试这种方式，[http://jsfiddle.net/W7tGj/6/](http://jsfiddle.net/W7tGj/6/)，虽然它仍然不支持拖动，但当鼠标按下时它确实做了正确的事情

# php - 如何在mysql php中进行分页

> ID：12151769
> 
> 赞同：-3
> 
> 时间：2012-08-28T01:46:16.237
> 
> 标签：php, mysql, pagination

我有一个分页脚本。当我运行时，它显示以下错误：

```
Warning: mysql_result() expects parameter 1 to be resource, boolean given in C:\wamp\www\folder\index.php on line 6

Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in C:\wamp\www\folder\index.php on line 12 
```

这是我的脚本：

```
<?php
include 'db.inc.php';
$per_page = 2;

$pages_query = mysql_query("SELECT COUNT 'id' FROM 'names'");
$pages = ceil(mysql_result($pages_query,0) /$per_page);

$page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;
$start = ($page - 1) * $per_page;

$query = mysql_query("SELECT 'name' FROM 'names' LIMIT $start, $per_page");
while ($query_row = mysql_fetch_assoc($query)) {
echo '<p>', $query_row['name'],'</p>';
}
if($pages >=1 && $page <= $pages){
for ($x=1; $x<=$pages; $x++){
echo  ($x == $page) ? '<strong> <a href="?page='.$X.'">'.$x.'</a></strong> ' : '<a href="?page='.$X.'">'.$x.'</a> ';
}
}
?> 
```

最后我发现了我的问题。这是 X 美元。正确的是：

```
echo  ($number == $page) ? '<strong> <a href="?page='.$number.'">'.$number.'</a></strong> ' : '<a href="?page='.$number.'">'.$number.'</a> '; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:52:55.863

首先，您需要调试脚本并使用`mysql_error()`. 然后修复你的sql错误。

然后很明显，示例`count 'id'`应该是`count(id)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:55:21.090

该错误`mysql_* expects parameter 1 to be resource, boolean given`通常表明您的 MySQL 查询包含一些错误。

一个明显的语法错误是，在您的查询中，您应该在列名和表名周围使用重音而不是引号。（重音是这些：`。在大多数英语键盘的左上角找到）

# ruby-on-rails - 使用 delay_job 时 ActionMailer::Base.deliveries 为空

> ID：12151772
> 
> 赞同：2
> 
> 时间：2012-08-28T01:47:25.207
> 
> 标签：ruby-on-rails, actionmailer, delayed-job

我正在使用delayed_job 在Rails 应用程序中发送电子邮件，我想测试本地发送的电子邮件。通常我所做的只是将邮件配置设置为 :test 然后查看 ActionMailer::Base.deliveries，但问题是当我调用 MyMailer.delay.some_email 而不是 MyMailer.some_email.deliver 时，电子邮件永远不会收到添加到交货。我认为这是因为我不再调用“deliver”，但在使用delayed_job 时您不应该调用“deliver”。

我所有的生产电子邮件都可以正常工作。只有测试版没有。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:39:55.817

这些工作没有在测试环境中完成，因为没有工作运行程序在工作。您需要检查该作业是否已添加到队列中。

```
# Call the function
assert_not_equal Delayed::Job.count, 0, "Jobs have been added to the queue" 
```

然后，您可以通过工作来测试工作是否有效，如下所示：

```
Delayed::Worker.new.work_off 1
# Check the job has been done as expected 
```

# php - 从 Drupal 中的内容类型引用字段

> ID：12151777
> 
> 赞同：1
> 
> 时间：2012-08-28T01:47:53.410
> 
> 标签：php, drupal

好的，所以我想编写一个自定义 PHP 脚本，将其插入 Drupal 内容类型。

我希望这个 PHP 脚本能够从内容类型的其他字段中提取信息。

基本上，这些字段将包含 PHP 脚本将用于进行数据库调用并最终显示给最终用户的数据。

是否可以在内容类型内引用 PHP 中当前内容类型的字段？（显然需要启用 PHP 代码模块）。

请注意，这是在 Drupal 7 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:03:26.250

我强烈建议***不要***使用 PHP 过滤器模块（它会引入安全漏洞，并且无法对代码进行版本控制）。也就是说，您可以在如下代码中获取节点对象（因此它是字段）：

```
if ($node = menu_get_object()) {
  $some_field_items = field_get_items('node', $node, 'field_some_field');
  // etc...
} 
```

请记住，该方法仅在您位于完整节点页面时才有效。

# google-maps - Google Maps API：获取默认位置并将其放入变量中

> ID：12151778
> 
> 赞同：0
> 
> 时间：2012-08-28T01:48:11.290
> 
> 标签：google-maps, google-maps-api-3

加载时，我正在设置地图：

```
map = new google.maps.Map(document.getElementById("map_canvas"), {
        center: new google.maps.LatLng(40, -100),
        zoom: 5,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}
    }); 
```

我有一个名为的变量`current_location`，我需要填充本质上是……或我上面声明`40, -100`的默认值。`LatLng`

得到这个的方法是什么？`google.maps.getLatLng`或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:15:34.007

```
var current_location = map.getCenter(); 
```

或者你可以说：

```
var current_location = new google.maps.LatLng(40, -100);
map = new google.maps.Map(document.getElementById("map_canvas"), {
    center: current_location,
    zoom: 5,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}
}); 
```

# java - 检查服务器中的文件是否更改

> ID：12151779
> 
> 赞同：0
> 
> 时间：2012-08-28T01:48:15.410
> 
> 标签：java, android

我正在尝试制作一个连接到服务器的应用程序。该应用程序被某些设备使用。如果其中一台设备将某些内容上传到服务器，我希望其他设备收到有关服务器有新内容的通知。我的问题是，如何检查服务器是否更改？我们必须多久检查一次服务器？我想知道在线消息是如何工作的，因为有人发送了一些东西，我们会尽快收到消息这个概念可以与我的应用程序一起使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:50:07.783

听起来您想利用 Google 可以消息传递或简称 GCM。

[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

> 这可能是一条轻量级消息，告诉 Android 应用程序有新数据要从服务器获取（例如，朋友上传的电影），也可能是一条包含高达 4kb 有效负载数据的消息（因此应用程序如即时通讯可以直接消费消息）。

GCM 是您的应用程序如何与服务器“对话”的标准。要么是完整的消息，要么只是要检查服务器的消息，因为它已更新。

# uninstallation - redhat6：从源代码安装时如何卸载包

> ID：12151780
> 
> 赞同：1
> 
> 时间：2012-08-28T01:48:25.317
> 
> 标签：uninstallation, redhat

我使用“make install”从它的源文件安装了一个包，如果我想删除这个包，我应该怎么做？我查看了 Makefile，但没有太多选择。

提前致谢

杨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:51:43.150

通常在你使用的时候`make install`，没有什么好的卸载方法。这就是为什么通常建议使用脚本`--prefix`选项为`configure`以这种方式安装的每个应用程序指定一个特殊目录的原因。

另一个不错的选择是花费额外的精力打包一个 RPM，然后您可以使用它`rpm`来安装和卸载。但是在你已经完成安装之后再做这件事为时已晚。

因此，我认为您将不得不尝试查找已安装的文件并单独删除它们。希望 makefile 安装到`/usr/local`而不是`/usr`.

您可以尝试按时间范围搜索，这样您就可以找到同时安装的所有文件。

# android - 带有“未知铬错误：-324”的 Android 4.0 ICS Webview

> ID：12151784
> 
> 赞同：7
> 
> 时间：2012-08-28T01:49:08.890
> 
> 标签：android, webview, webkit

我在 Android 4.0 ICS 中编写浏览器使用 WebView。但是当我访问某个网站时，出现了错误。

我重写了`onReceivedError`WebViewClient 中的方法，并打印了 logcat。

```
08-28 09:22:00.549: D/chromium(22081): Unknown chromium error: -324

08-28 09:22:32.658: E/sky-mobi(22081): errorCode:-1 description:A network error occurred。failingUrl:https://172.16.28.5/portal/logon.htm

08-28 09:22:32.705: W/Web Console(22081): The page at “https://172.16.28.5/portal/logon.htm” displayed insecure content from file:///android_asset/webkit/android-weberror.png.

08-28 09:22:32.705: W/Web Console(22081):  at null:1 
```

我用 Android 2.3.3 测试了这个 URL，它完全可以正常工作。</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T18:46:11.873

我们已经多次遇到这个问题，而且每次似乎都是完全随机的。Webview 没有变化，html/css/js 内容没有变化，什么都没有。我们找到的唯一解决方案是重置遇到问题的设备，然后就像变魔术一样，问题在重新启动时消失了。我们最好的猜测是，在设备上重复构建和调试可能会导致这些类型的损坏安装，因为我们已经注意到与这些类型的错误相一致的其他幻像调试问题。

希望这可以帮助遇到类似问题的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:12:31.110

也许您可以尝试使用 http 而不是 https

# java - 使用错误计数器更改刽子手的图像

> ID：12151786
> 
> 赞同：0
> 
> 时间：2012-08-28T01:49:36.530
> 
> 标签：java, imageicon

我目前正在测试我的刽子手应用程序，但还没有正确的代码来隐藏原始单词（这应该是猜到的）所以我使用 if 语句来告诉我字母是否在单词中

```
if(original.toUpperCase().indexOf(button.getText())!=-1){
                 JOptionPane.showMessageDialog(null, "Your word does contain " + text );
             }
             else{
                 JOptionPane.showMessageDialog(null, "There is no " + text );
                 error++;
             }
             }
             }); 
```

现在据我了解，如果字母不在单词中，则错误必须根据以下值加上 1 个整数

```
error++; 
```

现在对于我使用的图像代码

```
 imageName = null;
    error =0;
   if(error >= 0) imageName = "hangman1.jpg";
   if(error >= 1) imageName = "hangman2.jpg";
   if(error >= 2) imageName = "hangman3.jpg";
   if(error >= 3) imageName = "hangman4.jpg";
   if(error >= 4) imageName = "hangman5.jpg";
   if(error >= 5) imageName = "hangman6.jpg";
   if(error >= 7) imageName = "hangman7.jpg";
    ImageIcon icon = null;
    if(imageName != null){
        icon = new ImageIcon(imageName);
    }
   JLabel image = new JLabel();
   image.setIcon(icon); 
```

根据其中一个帖子，这是正确的，但是当我故意选择错误的字母（出于测试目的）时，图像保持不变

并且图像“hangman1.jpg”是一个占位符，（只是结构）

谁能告诉我我哪里出错了

完整代码见 [刽子手图片没有改变](https://stackoverflow.com/questions/12151399/hangman-picture-isnt-changing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:51:19.637

您`0`在进行检查之前将错误设置为。

删除这一行：

```
error =0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:53:32.870

从您的代码片段中，不清楚您是否将 添加`JLabel` `image`到父容器中。

重新创建`JLabel`是不必要的。

只需创建一个实例并调用`image.setIcon(...);`

# opengl - 如何在OpenGL中获得变换坐标？

> ID：12151787
> 
> 赞同：1
> 
> 时间：2012-08-28T01:49:39.727
> 
> 标签：opengl

我画了一个像下面这样的实心球体：

```
glPushMatrix();
    glScalef(0.015, 0.015, 0.015);
    glRotatef(90, 1.0, 0.0, 0.0);
    glTranslatef(0.0, 200, 0.0);
    glRotatef(-20, 0.0, 0.0, 1.0);
    glRotatef(-20, 1.0, 0.0, 0.0);
    glTranslatef(78.75, -110.74, -13.53);
    glutSolidSphere(4.0f,15,15);
glPopMatrix(); 
```

我怎样才能得到这个实心球体的变换坐标？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-28T03:19:37.407

`GL_MODELVIEW_MATRIX`您可以通过函数获取状态变量`glget`。

`ModelView`它从堆栈返回当前矩阵。我认为这就是你所需要的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T19:01:36.907

将转换后的坐标放入变量中，然后您就不必检索形状的转换坐标。

```
float solidSphereX = whatever;
float solidSphereY = whatever;
float solidSphereZ = whatever;
float solidSphereRotationX = whatever in radians;
float solidSphereRotationY = whatever in radians;
float solidSphereRotationZ = whatever in radians;
...
glPushMatrix();
glRotatef(solidSphereRotationX, solidSphereRotationY, solidSphereRotationZ);
glTranslatef(solidSphereX, solidSphereY, solidSphereZ);
glPopMatrix(); 
```

# html - 离线缓存不加载更新的文件

> ID：12151789
> 
> 赞同：1
> 
> 时间：2012-08-28T01:49:54.910
> 
> 标签：html, offline, offline-caching

我创建了一个可以离线访问的网络应用程序。但是我遇到的问题是让浏览器显示页面的新版本。

我可以看到文件正在再次下载：

```
Application Cache Downloading event
Application Cache Progress event (0 of 3) pad/jquery.min.js
Application Cache Progress event (1 of 3) pad/index.html
Application Cache Progress event (2 of 3) pad/
Application Cache Progress event (3 of 3) 
Application Cache UpdateReady event 
```

但是，刷新页面后，旧的 index.html 文件仍在显示中。

我已经正确设置了我的 offline.manifest 文件并在 html 标记中引用了它。我不确定这里可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T08:41:12.673

在某些情况下，您可能必须使用 javascript 手动交换新缓存。这是我在页面上处理该问题的内容：

```
<script>window.addEventListener('load', function(e) {window.applicationCache.addEventListener('updateready', function(e) {if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {window.applicationCache.swapCache();window.location.reload();} else {}}, false);}, false);</script> 
```

这将自动换入新的缓存并在页面可用时重新加载页面。您可以[在 html5rocks 获得更多关于在 appcache 中使用 javascript 的信息](http://www.html5rocks.com/en/tutorials/appcache/beginner/#toc-updating-cache)

# facebook - 判断 Facebook 页面是否重定向

> ID：12151794
> 
> 赞同：1
> 
> 时间：2012-08-28T01:50:34.190
> 
> 标签：facebook, facebook-graph-api, redirect, facebook-page

我注意到一些 facebook 页面重定向。例如，NOFX 乐队页面（[http://www.facebook.com/pages/NOFX/104336479603261](http://www.facebook.com/pages/NOFX/104336479603261)只允许两个链接，因此一个未设置为链接）重定向到他们的官方页面（[https://www.facebook. com/pages/NOFX-Official-Page/180985116576?rf=104336479603261](https://www.facebook.com/pages/NOFX-Official-Page/180985116576?rf=104336479603261)）。我很好奇是否在 api 中我们可以告诉页面这样做。 [https://graph.facebook.com/104336479603261](https://graph.facebook.com/104336479603261)似乎没有显示任何有关重定向的信息，但也许还有另一种方法可以找到它。

编辑：不使用 api 的解决方案很好。

Edit2：如果有人感兴趣，这里解决的是我使用的代码：

代码大部分是从[我如何确定一个 URL 是否在 PHP 中重定向？](https://stackoverflow.com/questions/427203/how-can-i-determine-if-a-url-redirects-in-php).

```
function getURL($URL)
{
        $ch = curl_init($URL);
        curl_setopt($ch,CURLOPT_FOLLOWLOCATION,true);
        curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
        curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.3) Gecko/20100401 Firefox/3.6.3'); 
        curl_exec($ch);
        $code = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);

        curl_close($ch);
        return $code;
} 
```

唯一真正值得注意的是我必须添加用户代理，这样我就不会被发送到不受支持的浏览器页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:02:16.047

> 编辑：不使用 api 的解决方案很好。

然后只需对页面 URL 发出 HTTP HEAD 请求，并查看是否获得`301 Moved Permanently`带有标头的状态代码作为`Location`响应。（实际上只检查状态码就足够了，如果你只想*知道*页面是否被重定向；如果你还想知道它被重定向到*哪里*，那么还要检查位置标题。）

# c++ - 为什么重载运算符不将主对象设置为值集

> ID：12151796
> 
> 赞同：0
> 
> 时间：2012-08-28T01:50:52.510
> 
> 标签：c++, operator-overloading

在下面的示例中，为什么`other.age`输出 88 而不是 0？

```
#include <atlstr.h>//CString for non-MFC
class A
{
public:
    A() : name("Nobody"), age(0) {}
    ~A(){};

    A( CString name, unsigned age ) : name( name ), age( age ) {}
    A& operator=( const A& ref )
    {
        name = ref.name;
        age = 0;
    }

    CString name;
    unsigned int age;
};

int _tmain( int argc, _TCHAR* argv[] )
{

    A person( CString("Michael"), 88 );
    A other = person;

    std::cout << other.name << std::endl << other.age;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T01:53:41.880

```
A other = person; 
```

调用`copy c-tor`，由编译器隐式定义，而不是`operator =`.

12.8/4

> 如果类定义没有显式声明复制构造函数，则隐式声明。因此，对于类定义
> 
> ```
> struct X {
> X(const X&, int);
> }; 
> ```
> 
> 复制构造函数是隐式声明的。

12.8/8

> 类 X 的隐式定义的复制构造函数执行其子对象的成员复制。复制的顺序与用户定义的构造函数中基和成员的初始化顺序相同（见 12.6.2）。每个子对象都以适合其类型的方式复制：
> 
> — 如果子对象是类类型，则使用该类的复制构造函数；
> 
> — 如果子对象是一个数组，则以适合元素类型的方式复制每个元素；
> 
> — 如果子对象是标量类型，则使用内置赋值运算符。

引用来自 C++03 标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T01:54:24.310

因为您没有使用赋值运算符，所以您使用的是复制构造。

```
A other = person; 
```

相当于†：

```
A other(A(person)); 
```

并且因为您没有明确指定您的复制构造函数，所以使用默认的。这是一个按成员的副本，将 88 作为 的值`age`。这使用您的运营商：

```
A other;
other = person; 
```

* * *

†是的，那是副本的副本。请注意，在打开优化的情况下，您的编译器会将其转换为：

```
A other(person); 
```

通过复制-elison。一般来说，这是：

```
T x = y; 
```

相当于：

```
T x(T(y)); 
```

这将变成这样（优化后）：

```
T x(y); 
```

只要`T`是可复制或可移动的。

# ios - UITableView的实现，遵循MVC模式

> ID：12151797
> 
> 赞同：1
> 
> 时间：2012-08-28T01:50:53.207
> 
> 标签：ios, cocoa-touch, model-view-controller, uitableview

根据 Cocoa Touch 中大量应用的 Model-View-Controller 模式，UIViewControllers 应该始终处理场景中具体 UIView 行为背后的逻辑。

我很好奇 Apple 如何在符合这一理念的同时实现它的 UITableView 类。特别是因为 UITableView 依次继承自 UIScrollView 和 UIView 。

当您向其中一个类添加 UITableView 时，它是否有 UIViewController 处理它在后台的行为方式？我知道 UITableViewDelegate 负责告诉表格它应该有多少行等等。但是它的内部工作原理呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:01:02.917

我要在这里狂拍一下，因为我不确定我是否真的听懂了你的问题。当你添加一个`UITableView`时，你必须有一个与之关联的控制器来控制它如何处理和渲染。实现and的 a`UITableViewController`或 a 。如果你不这样做，你就无法控制它的作用。`UIViewController``UITableViewDelegate``UITableViewDatasource`

# jquery-plugins - jQuery即兴4

> ID：12151798
> 
> 赞同：1
> 
> 时间：2012-08-28T01:50:54.117
> 
> 标签：jquery-plugins, impromptu

我在即兴（jquery 插件）中遇到了困难，我不断得到一个未定义的值。这是一个例子：

```
<img id=dispatch title='Click to dispatch(COMING SOON)' onclick=Dispatch(0) src='../images/icons/truck_green.png' width=16 height=16/>
<img id=dispatch title='Click to dispatch(COMING SOON)' onclick=Dispatch(1) src='../images/icons/truck_green.png' width=16 height=16/>
<img id=dispatch title='Click to dispatch(COMING SOON)' onclick=Dispatch(2) src='../images/icons/truck_green.png' width=16 height=16/>
<img id=dispatch title='Click to dispatch(COMING SOON)' onclick=Dispatch(3) src='../images/icons/truck_green.png' width=16 height=16/>

function Dispatch(id){
           var driver = 'Enter the drivers name:<br><input type="text" id="alertName" name=myname value="" />';

           $.prompt(driver,{   
                    submit: myfunc,
                    buttons: { Ok:true }                         
            });
        }  

function myfunc(e,v,m,f){                
            var an = m.children('#alertName');

            if(f.alertName == ""){
                    an.css("border","solid #ff0000 1px");
                    return false;
            }
            return true;
        } 
```

最终，我想获取输入的 id 和名称并执行一些 AJAX。但我无法得到 css 的变化。我提醒 f.alertName 并得到未定义，我不知道为什么。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:02:02.340

相信你想要`f.myName`。学习使用调试器逐步完成并检查对象。答案很快变得显而易见。

[http://jsfiddle.net/ULeQz/1/](http://jsfiddle.net/ULeQz/1/)

```
var driver = 'Enter the drivers name:<br><input type="text" id="alertName" name="myname" value="" />';

$.prompt(driver, {
    submit: myfunc,
    buttons: {
        Ok: true
    }
});

function myfunc(e, v, m, f) {
    debugger;
    var an = m.children('#alertName');

    if (f.myname == "") {
        an.css("border", "solid #ff0000 1px");
        return false;
    }
    return true;
}​ 
```

# android - Android 密钥库问题：“密钥库被篡改，或密码不正确”

> ID：12151804
> 
> 赞同：0
> 
> 时间：2012-08-28T01:51:48.157
> 
> 标签：android, macos, passwords, migration, keystore

当我尝试使用 eclipse 导出向导（我是 Mac 用户）对我的 apk 进行签名时，出现错误“密钥库被篡改，或密码不正确”。

我现在正在运行“AndroidKeystoreBrute”。但还没有结果。

我认为我的密码是正确的。但是，我最近在我的 Mac 上所做的是将操作系统升级到 Mountain Lion 并使用迁移助手到我的新 SSD。

是否有可能破坏密钥库文件？我认为没有其他可能影响我的密钥库文件。

你怎么看这个问题？？请帮忙..

**更新：我通过恢复我以前使用过的硬盘解决了我的问题。我确定迁移助手破坏了密钥库文件。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:29:17.637

在升级过程中实际文件不太可能损坏，但如果您有一个备份来排除这种情况，请使用备份。这会留下错误的密码，因此您可能想尝试并准确记住在创建密钥库时输入密码的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T01:58:10.410

尝试在 build.gradle 中使用最新的构建工具

```
dependencies {
    classpath 'com.android.tools.build:gradle:1.5.0'
} 
```

# mysql - mysql for ref 中的两个 const 不应该是 const 类型吗？

> ID：12151805
> 
> 赞同：1
> 
> 时间：2012-08-28T01:52:04.593
> 
> 标签：mysql, indexing, constants, ref, explain

我有以下 MySQL 查询

```
explain select item_id from items use index(user_item_id) where user_id=9 and item_id=10000 
```

以下是返回

```
id  select_type table   type    possible_keys   key             key_len   ref           rows    Extra
1   SIMPLE      items   ref     user_item_id    user_item_id    8         const,const   1       Using index 
```

为什么类型是 ref 而不是 const？

user_item_id 是 user_id 和 item_id 的复合索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:18:47.790

高性能 MySql 将 ref 类型查找描述为“这是一个返回匹配单个值的行的索引访问”

添加单词时，`const`它被描述为“优化查询的部分并将其变成常量”

所以似乎MySQL首先需要能够从索引中找到行

ref 列中的 const 意味着 mysql 可以使用以前的值来查找索引中的内容。

# c# - 使用 asp.net 验证登录名和登录类型

> ID：12151806
> 
> 赞同：0
> 
> 时间：2012-08-28T01:52:06.517
> 
> 标签：c#, asp.net

我还是 asp.net 的新手。。我被分配了一个任务来验证使用 C# ASP.NET 的登录，其中有两个登录按钮，即会员登录和管理员登录 ..你能帮我了解如何连接我的 dbo数据库中的 .users 表字段具有以下登录代码，并给出登录状态为活动或非活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:39:27.007

Asp.net 提供了各种身份验证方法。通常最好选择一种现有的身份验证机制。

在您的情况下，表单身份验证效果最好。
Asp.net 为此提供了登录控件。
它有一些事件，您可以使用自己的表进行自定义检查。

这里有一些链接可以帮助您入门。

[表单身份验证概述](http://msdn.microsoft.com/en-us/library/7t6b43z4%28v=vs.100%29.aspx)

[登录控件](http://msdn.microsoft.com/en-us/library/ms178329%28v=vs.100%29.aspx)

[Asp.net 会员资格](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:52:33.060

我还想@nunespascal 的回答是，如果您使用表单身份验证，您不需要用户和管理员两次登录，因为您可以简单地检查用户在身份验证后所处的角色。然后在此基础上采取任何必要的行动。

# svn - Tortoise SVN 1.6 外部单个文件

> ID：12151819
> 
> 赞同：0
> 
> 时间：2012-08-28T01:54:13.697
> 
> 标签：svn, tortoisesvn, externals

我有一个场景，我想从 SVN 的 Documentation 文件夹中获取文档文件，并且只有 pdf 版本。当前文档文件夹有 .doc 和 .pdf 文件

目标文件夹是 Portal/Docs

我将 Portal/docs 上的 svn:externals 属性设置为 svn:externals /svn/codebase/Documentation/Release Notes.pdf

在 /svn/codebase/Portal/Docs C:\Portal\Docs 的当前结帐目录上

我收到一条错误消息，指出版本 X 中的“http://codebase/Documentation/Release”不存在

我试过 %20、""、+ 和 ? 但不起作用...

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:59:32.807

您应该使用`file://`协议来访问外部，这将允许您使用`%20`：

```
svn:externals file:///svn/codebase/Documentation/Release%20Notes.pdf "Release Notes.pdf" 
```

您还可以使用存储库绝对路径：

```
svn:externals ^/Documentation/Release%20Notes.pdf "Release Notes.pdf" 
```

假设您的存储库位于 /svn/codebase 中。

顺便说一句，您应该始终对外部使用版本固定（附加`@<revision-number>`到外部 URL），因为文件/文件夹属性是版本化的。版本固定可确保源代码树的旧签出为您提供当时出现的外部文件，而不是外部文件的最新副本。

# plone - 在 Plone WYSIWYG 编辑器中编辑页面时标签被剥离

> ID：12151822
> 
> 赞同：2
> 
> 时间：2012-08-28T01:54:50.997
> 
> 标签：plone

尽管在我尝试添加时在 /portal_transforms/safe_html 下的 valid_tags 中列出了值为“1”，`<input>`但它被从我的页面的已保存版本中删除。

我尝试在自定义下将“输入”添加到 HTML 过滤器设置，但更改未保存。

“输入”未列在讨厌的或剥离的标签下。

为什么会被移除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:07:16.980

首先尝试完全禁用 safe_html：

[http://collective-docs.readthedocs.org/en/latest/forms/wysiwyg.html#disabling-safe-html-transformation](http://collective-docs.readthedocs.org/en/latest/forms/wysiwyg.html#disabling-safe-html-transformation)

如果这没有帮助，那么您的 TinyMCE 编辑器有问题。通常这意味着你运气不好，只有使用文本区域下方的“不使用可视化编辑器编辑”链接才能输入 HTML 代码。

# c# - Farseer 惯性或速度上限

> ID：12151827
> 
> 赞同：1
> 
> 时间：2012-08-28T01:55:25.630
> 
> 标签：c#, box2d, farseer

不确定这是否与惯性有关，或者是否是我的代码，但我已经将代码简化了很多，但我找不到它。

场景：我有一个身体，质量为 10（我假设公斤）。我使用 ApplyLinearImpulse 并使用像 (1,0) 这样的向量和像 5 这样的常量将对象向右移动。

问题：它确实向右移动，但似乎被限制了。当我增加馈送到 ApplyLinearImpulse 的值时，LinearVelocity 属性确实会上升，但 Position 的实际变化不会。一旦我调用 world.step(msDelta)，LinearVelocity 就会回落到某个微小的值。

我做错了吗，或者是否有基于我的质量的内部上限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T18:43:15.727

每个时间步的最大移动限制为 2.0 个单位，在 Box2D 源代码的文件 b2Settings.h 中设置。如果需要，您可以更改此值 (b2_maxTranslation)，只需注意此文件中的值已调整为可以很好地协同工作，因此如果更改太多可能会出现其他问题。

请注意，这是一个在整个 Box2D 中使用的#define 常量，因此您需要重新编译库本身以使更改完全生效。我对 Farseer 的了解还不够，无法告诉您这是否容易:)

通常，如果您觉得需要更改此值，您可能希望首先考虑缩小所有物理尺寸，这样您的身体每个时间步长的移动速度就不会超过 2 个物理单位。

您可能对这里的一些其他常见“陷阱”感兴趣：[http ://www.iforce2d.net/b2dtut/gotchas](http://www.iforce2d.net/b2dtut/gotchas)

# jquery - parseJSON 丢弃以下划线开头的变量

> ID：12151828
> 
> 赞同：0
> 
> 时间：2012-08-28T01:55:34.217
> 
> 标签：jquery, json

我正在将cherrypy 和mongo 用于小型Web 应用程序。在某些时候，我想要一个将对象 id 返回到模板的方法，如果可以的话，'_id'，但 parseJSON 完全消除了它。我可以重写我的文档和方法，但我想知道是否有其他方法可以解决这个问题。在 python 中，我返回一个像这样的字典：

```
@cherrypy.expose
@cherrypy.tools.auth(level='mortal')
def add(self, **params):
    if cherrypy.request.method == 'POST':
        # do stuff
        return json.dumps(article) 
```

在 jquery 中我尝试解析它（包括 _id 变量）：

```
$.ajax({
    url: '/org/add',
    type: 'POST',
    data: data,
    dataType:'json',
    success: function(data) {
        alert(data._id);
    error: function() {
        alert('error');
    }
}); 
```

除了_id :( 你能帮我解决这个问题吗？

我正在使用 python 2.7.5 和 jquery 1.8 顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:12:05.010

我用这个小提琴[http://jsfiddle.net/arhea/GME9S/](http://jsfiddle.net/arhea/GME9S/)进行了测试，它不会删除下划线属性。一定是您的后端代码没有发送它。但它不应该是javascript。

# azure - Azure 数据同步的外键引用错误

> ID：12151832
> 
> 赞同：1
> 
> 时间：2012-08-28T01:55:59.700
> 
> 标签：azure, azure-sql-database, azure-data-sync

在我的数据同步组中有 2 个表。假设**A**和**B**。**A 的**某些列对**B**表的引用。**B**是主表。

当同步发生时，表**A**在表**B**之前进行处理。所以我得到了外键引用错误。

Azure 数据同步处理是否按字母顺序进行？有什么解决方案吗？

提前太赫兹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:51:17.060

正如@JuneT 建议的那样，您可能想在“ [SQL Azure 论坛](http://aka.ms/sqlazureforum)”(http://aka.ms/sqlazureforum) 中发布这个问题。当您这样做时，他们特别要求您在询问数据同步相关问题时包含以下信息：

**服务器 id**：您的服务器 id

**地区**：您的数据同步服务器所在/创建的位置

**时间/日期**：遇到问题的日期和时间

**Tracing Id**：您在 UI 中的消息中看到的跟踪 ID

# php - 无法显示联合选择语句的结果

> ID：12151836
> 
> 赞同：0
> 
> 时间：2012-08-28T01:57:11.763
> 
> 标签：php, mysql, union

以下查询有效，但由于某种原因，第一个 select 语句是唯一显示的 URL。显示其他表中的项目，但其 URL 错误。

```
$sql = "(SELECT postsID as postsID, postsSubject AS postsSubject, postsTimestamp AS timestamp
                FROM   posts
                WHERE  postsCategory = '$id')
            UNION 
                (SELECT eventID as eventID, eventTitle as eventTitle, eventsTimestamp as timestamp
                FROM   events
                WHERE  eventLocation = '$id')
            ORDER BY timestamp DESC"; 
```

事件和帖子表中的信息都正确显示，但结果似乎仅来自帖子表。

例如，假设我有以下信息

```
postsID |  postsSubject |  postsTimestamp
  1            post             123

eventID |  eventTitle   | eventsTimestamp
  2           event            456 
```

我有以下显示我的结果

```
 while($row = mysql_fetch_assoc($result)){
    ?>
        <tr><td><? echo '<a href="viewevent.php?eventID=' . $row['eventID'] . '">' . $row['eventTitle'] . '</a>' ; ?></td>
        <tr><td><? echo '<a href="viewpost.php?postID=' . $row['postsID'] . '">' . $row['postsSubject'] . '</a>' ; ?></td>
    <?  
        if(preg_match('/[0-9]/',$row['timestamp'])){        
            list($yyyy,$dd,$mm) = explode('-',$row['timestamp']);
                    $newDate = $dd."-".$mm."-".$yyyy;
            }
        ?>
            <td><center><? echo $newDate; ?></center></td></tr>
        <?
        }
        echo '</table>';
} 
```

输出似乎是正确的

```
post   123
event  456 
```

但是，这两个结果都链接到以下内容（分别）

```
viewpost.php?id = 1
viewpost.php?id = 2  //this should be viewevent.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:20:59.560

sql如下：

```
$sql = "(SELECT postsID as ids, postsSubject AS description, postsTimestamp AS timestamp,'p' as status
                FROM   posts
                WHERE  postsCategory = '$id')
            UNION 
                (SELECT eventID as ids, eventTitle as description, eventsTimestamp as timestamp, 'e' as status
                FROM   events
                WHERE  eventLocation = '$id')
            ORDER BY timestamp DESC"; 
```

检索数据时，

```
while($row = mysql_fetch_assoc($result)){
     if ($row['status']=="e"){
    ?>
        <tr><td><? echo '<a href="viewevent.php?eventID=' . $row['ids'] . '">' . $row['description'] . '</a>' ; ?></td>
<? }else{?>
        <tr><td><? echo '<a href="viewpost.php?postID=' . $row['ids'] . '">' . $row['description'] . '</a>' ; ?></td>
<? } ?>
    <?  
        if(preg_match('/[0-9]/',$row['timestamp'])){        
            list($yyyy,$dd,$mm) = explode('-',$row['timestamp']);
                    $newDate = $dd."-".$mm."-".$yyyy;
            }
        ?>
            <td><center><? echo $newDate; ?></center></td></tr>
        <?
        }
        echo '</table>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:09:33.530

联合/联合都使用第一个表中的列将行放在一个表中。因此，结果集有 PostsId，但没有 EventsId。

也许您想要一个连接，它将列并排放置。也许您想将其作为两个单独的查询运行。

这是示例：

```
$sql = "select *
        from (SELECT postsID as postsID, postsSubject AS postsSubject, postsTimestamp AS timestamp
                FROM   posts
                WHERE  postsCategory = '$id') p
            cross join
                (SELECT eventID as eventID, eventTitle as eventTitle, eventsTimestamp as timestamp
                FROM   events
                WHERE  eventLocation = '$id') e
            ORDER BY postsTimeStamp DESC" 
```

请注意，这是产生笛卡尔积。因此，如果其中一个表中有更多行，那么您将获得大量行。

# android - RelativeLayout 中的 Android 按钮

> ID：12151837
> 
> 赞同：0
> 
> 时间：2012-08-28T01:57:16.507
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/5e2880c730cdb8bbcdd8021ae8dbecaf.png)

嗨，开发者

如上图所示，我正在尝试将脸部图标向左移动一点，以便可以看到整个脸部。但是，在RelativelyLayout中，我还没有找到如何。谁能让我知道该怎么做？谢谢。

以下是我的xml布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mainCtrlLayout" 
android:background="@drawable/photo_bg" 
android:layout_width="1280px" 
android:layout_height="800px">

<ImageView
android:layout_width="wrap_content"
android:layout_height="47px" 
android:id="@+id/topBarLayout"    
/>

<Button
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/topBarLayout"
android:layout_marginLeft="17px" 
android:id="@+id/searchBtn"
android:background="@drawable/adv_search_btn" 
android:visibility="invisible"/>

<TextView 
android:layout_height="wrap_content" 
android:text="@string/strFrom" 
android:id="@+id/txtFrom" 
android:layout_width="wrap_content" 
android:textColor="#FF00FFFF" 
android:layout_marginLeft="20px" 
android:textSize="20px" 
android:layout_marginTop="10px">
</TextView>

<TextView 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"
android:text="My Teblate"
android:id="@+id/txtSourcePath" 
android:textColor="#FF00FFFF" 
android:layout_toRightOf="@+id/txtFrom" 
android:layout_marginLeft="20px" 
android:textSize="20px" 
android:layout_marginTop="10px"/>

<Button 
android:id="@+id/refreshBtn" 
android:background="@drawable/adv_refresh_btn" 
android:layout_below="@+id/topBarLayout"
android:layout_alignParentRight="true"
android:layout_height="wrap_content" 
android:layout_width="wrap_content"

>
</Button>

<ScrollView
android:id="@+id/layout_a1_vsview"
android:layout_alignParentLeft="true" 
android:layout_below="@+id/refreshBtn" 
android:scrollbars="vertical" 
android:layout_height="625px" 
android:layout_width="wrap_content">

    <com.iid.dlna.activity.DMRList
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:id="@+id/a2"
    android:layout_centerInParent="true" />      
</ScrollView>

<TextView
android:textColor="@color/TextCtlScreenBlue"
android:gravity="center"
android:textSize="24px"
android:id="@+id/a3"
android:layout_below="@+id/topBarLayout"
android:layout_height="51px" 
android:layout_marginLeft="545px" 
android:layout_width="246px">
</TextView>    

<TextView
android:textColor="@color/TextCtlScreenBlue"
android:gravity="center"
android:textSize="24px"
android:id="@+id/sortDateBtn"
android:layout_toRightOf="@id/sortPhotoBtn"
android:layout_below="@+id/topBarLayout"
android:layout_height="51px" 
android:layout_marginLeft="30px" 
android:layout_width="246px">
</TextView>

<TextView 
android:textColor="@color/TextCtlScreenBlue"
android:gravity="center"
android:textSize="24px"
android:id="@+id/sortAlbumBtn" 
android:layout_toRightOf="@id/sortDateBtn" 
android:layout_below="@+id/topBarLayout" 
android:layout_height="51px" 
android:layout_marginLeft="30px" 
android:layout_width="246px">
</TextView>

<Button
android:layout_width="120px" 
android:layout_height="50px" 
android:id="@+id/photoBackBtn"
android:background="@drawable/photo_back_default"
android:textColor="@drawable/text_color_b2w"
android:textSize="24px"
android:paddingLeft="16px"
android:text="@string/ctlscreen_txt_back"
android:layout_marginLeft="500px"
android:layout_marginTop="117px" 
android:visibility="visible"/>

<Button 
android:id="@+id/selectAllBtn"
android:text="@string/ctlscreen_txt_selectall"
android:paddingLeft="32px"
android:textSize="24px"
android:background="@drawable/photo_selectall_default"
android:textColor="@drawable/text_color_b2w"
android:layout_toRightOf="@+id/photoBackBtn"    
android:layout_marginTop="117px"
android:layout_marginLeft="170px"      
android:layout_width="175px"
android:layout_height="50px"/>

<Button 
android:id="@+id/unselectAllBtn"
android:text="@string/ctlscreen_txt_unselectall"
android:paddingLeft="32px"
android:textSize="24px"
android:background="@drawable/photo_unselectall_default"
android:textColor="@drawable/text_color_b2w"
android:layout_toRightOf="@+id/selectAllBtn"    
android:layout_marginLeft="20px" 
android:layout_marginTop="117px" 
android:layout_width="205px"
android:layout_height="50px"/>

<Button
android:text="@string/strPrevPage"
android:id="@+id/prevBtn"
android:textColor="#FFFFFFFF"
android:background="@drawable/adv_page_btn"  
android:layout_toRightOf="@+id/unselectAllBtn" 
android:textSize="26px"
android:layout_marginLeft="30px"      
android:layout_marginTop="117px" 
android:layout_height="43px" 
android:layout_width="43px"/>

<TextView
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:id="@+id/txtPage"
android:textColor="#FFFFFFFF"
android:text="00" 
android:layout_toRightOf="@+id/prevBtn"
android:textSize="26px" 
android:layout_marginLeft="10px" 
android:layout_marginTop="117px"/>

<Button
android:text="@string/strNextPage"
android:id="@+id/nextBtn"
android:textColor="#FFFFFFFF"
android:background="@drawable/adv_page_btn"
android:layout_toRightOf="@+id/txtPage" 
android:textSize="26px" 
android:layout_marginLeft="10px" 
android:layout_marginTop="117px" 
android:layout_height="43px" 
android:layout_width="43px"/>

<RelativeLayout
android:layout_width="fill_parent" 
android:id="@+id/contentListLayout"
android:layout_marginTop="189px" 
android:layout_height="544px" 
android:layout_marginLeft="507px">

    <ScrollView
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:id="@+id/layout_contentlist_vsview" 
    android:scrollbars="vertical">

        <com.iid.dlna.activity.ContentList
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:id="@+id/layout_hsview_Ver_scrolla"
        android:layout_centerInParent="true" />
    </ScrollView>
</RelativeLayout>

<RelativeLayout 
android:layout_height="wrap_content" 
android:id="@+id/progress" 
android:layout_width="wrap_content" 
android:layout_centerInParent="true">
    <ImageView 
    android:scaleType="fitXY" 
    android:layout_height="15px" 
    android:src="@drawable/loadbar_bg" 
    android:id="@+id/iv_pro_bg" 
    android:layout_width="361px">
    </ImageView>

    <ImageView 
    android:scaleType="fitXY" 
    android:layout_height="15px" 
    android:src="@drawable/loadbar_fg" 
    android:id="@+id/iv_pro_fg" 
    android:layout_width="0px">
    </ImageView>
</RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:01:20.547

你需要做的是设置`android:layout_alignParentRight`在`true``refreshButton`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T02:10:36.650

这就是你需要的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainCtrlLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/photo_bg" >

<Button
    android:id="@+id/refreshBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/topBarLayout"
    android:background="@drawable/refreshBtn" >

</Button>
</RelativeLayout> 
```

# java - 我部署的 servlet 在哪里？（点云，Java）

> ID：12151842
> 
> 赞同：0
> 
> 时间：2012-08-28T01:57:58.170
> 
> 标签：java, dotcloud

我刚刚尝试过 dotcloud，我想在它上面运行一个 java servlet，所以我已经将 servlet 导出到 war，并部署在 dotcloud 上……欢迎的 html 是可访问的，但 servlet 本身不是。我已经尝试了每种路径组合，但总是出现 404 错误。

首先我在 web.xml 中没有任何东西，除了欢迎 html 的链接，与 tomcat 一样，servlet 类中的 @WebServlet 注释有效，所以我可以通过“http://serveraddress/Projectname/annotatedpath 访问 servlet " 但是在 dotcloud 上我不能，所以我也在 web.xml 中进行了 servlet 映射，但没有帮助。同时我可以在“http://serveraddress/Projectname/”访问欢迎 html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:08:48.617

我根据 dotCloud 上的一些教程创建了一个示例应用程序。这个工作示例不使用 @webservlet 注释，但您可以分叉并修改它以使用它们。

要让它运行，请尝试以下操作：

1）安装dotcloud cli（我假设你已经完成了）

2）克隆示例（-b java 使用 java 分支）

```
$ git clone https://github.com/johncosta/ramen-on-dotcloud -b java 
```

3）创建并推送helloworld应用

```
$ dotcloud create helloworldapp
$ dotcloud push helloworldapp -b java   # use the java branch 
```

4) 通过以下 url 访问 servlet（由 cli 输出给出）：

```
http://helloworldapp-<username>.dotcloud.com/helloworld/hello 
```

# php - 上传codeigniter htaccess只是不工作

> ID：12151844
> 
> 赞同：0
> 
> 时间：2012-08-28T01:58:41.867
> 
> 标签：php, .htaccess, codeigniter, upload

[我创建了与CI 用户指南](http://codeigniter.com/user_guide/libraries/file_uploading.html)完全相同的副本，我什至更改了
`$this->upload->do_upload("name_of_file_input");` 我都尝试了

```
./data/
./application/data/ 
```

作为我要上传的文件夹，CHMOD 0777，仍然无法上传。
我启动了 FF 和 FireBug 来查看我从本地主机发送/获取的标头，我认为问题可能出在 .htaccess 文件中，但不太确定……
我在子文件夹上工作，`localhost/something/ (or http://192.168.0.101/sms/)`
我的 routes.php 应该没问题，没有 404 或除了上传脚本之外的任何其他问题

另外奇怪的是我必须制作这样的表格

```
<?=form_open_multipart("/sms/upload/do_upload")?> 
```

这创造了这个

```
<form action="http://localhost/sms/sms/upload/do_upload" method="post" accept-charset="utf-8" enctype="multipart/form-data"> 
```

注意**double sms/sms/**这显然是错误的，但是我的 htaccess 它正确重定向，如您在此处看到的

```
HTTP/1.1 301 Moved Permanently
Date: Tue, 28 Aug 2012 01:49:47 GMT
Server: Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4
Location: http://192.168.0.101/sms/upload
Content-Length: 337
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/html; charset=iso-8859-1 
```

如果我创建这样的表格

```
<?=form_open_multipart("/upload/do_upload")?> 
```

它当然会很好地给我一个错误

```
HTTP/1.1 301 Moved Permanently
Date: Tue, 28 Aug 2012 01:52:43 GMT
Server: Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4
Location: http://192.168.0.101/upload/do_upload 
```

显然我的本地主机上不存在**http://192.168.0.101/upload我的整个安装在子文件夹****/sms/**

我的 .htaccess下

```
<IfModule mod_rewrite.c>
# mod_rewrite rules
RewriteEngine on

# The RewriteBase of the system (if you are using this sytem in a sub-folder).
 RewriteBase /sms/

# This will make the site only accessible without the "www."
# (which will keep the subdomain-sensive config file happy)
# If you want the site to be accessed WITH the "www."
# comment-out the following two lines.
 RewriteCond %{HTTP_HOST} !^192.168.0.101$ [NC]
 RewriteRule ^(.*)$ http://192.168.0.101/$1 [L,R=301]

# If a controler can't be found - then issue a 404 error from PHP
# Error messages (via the "error" plugin)
# ErrorDocument 403 /index.php/403/
# ErrorDocument 404 /index.php/404/
# ErrorDocument 500 /index.php/500/

# Deny any people (or bots) from the following sites: (to stop spam comments)
# RewriteCond %{HTTP_REFERER} nienschanz\.ru [NC,OR]
# RewriteCond %{HTTP_REFERER} porn\.com
# RewriteRule .* - [F]
# Note: if you are having trouble from a certain URL just
# add it above to forbide all visitors from that site.

# You can also uncomment this if you know the IP:
# Deny from 192.168.1.1

# If the file is NOT the index.php file
RewriteCond %{REQUEST_FILENAME} !index.php
# Hide all PHP files so none can be accessed by HTTP
RewriteRule (.*)\.php$ index.php/$1

# If the file/dir is NOT real go to index
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [QSA,L]

</IfModule>

# If Mod_ewrite is NOT installed go to index.php
<IfModule !mod_rewrite.c>
ErrorDocument 404 index.php
</IfModule>

#<ifModule mod_expires.c>
#  <filesmatch "\.(ico|flv|jpg|jpeg|png|gif|js|css|swf)$">
#       ExpiresActive on
#       ExpiresDefault "access plus 1 year"
#   </filesmatch>
#</ifModule>

<IfModule mod_deflate.c>
AddOutputFilterByType DEFLATE text/xhtml text/html text/plain text/xml
text/javascript application/x-javascript text/css
</IfModule>
FileTag none 
```

## 新信息：

似乎在点击“上传”按钮后，它被重定向到“某处”（带有“附加”数据），并从“某处”重定向到我的实际上传脚本，该脚本完成所有工作（没有“附加”数据）因此我认为这是.htaccess的问题。CI 抛出此错误

> 您没有选择要上传的文件。

```
<?php

class Upload extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->load->helper(array('form', 'url'));
}

function index()
{
    $this->load->view('upload_form', array('error' => ' ' ));
}

function do_upload()
{
    $config['upload_path'] = './data/';
    //$config['allowed_types'] = 'gif|jpg|png';
    //$config['max_size']   = '100';
    //$config['max_width']  = '1024';
    //$config['max_height']  = '768';
    //$config['file_name'] = $_FILES['userfile']['name'];
    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload("userfile"))
    {
        $error = array('error' => $this->upload->display_errors());

        $this->load->view('upload_form', $error);
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());

        $this->load->view('upload_success', $data);
    }
   }
  }
 ?> 
```

这是我在上面链接的 CI 指南的副本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:01:53.393

最后 :) 问题出在相对/绝对路径或实际上是我的 CodeIgniter 设置中，我的 config.php 中有这一行

```
$config['base_url'] = 'http://localhost/sms/'; 
```

这一切都很好，但是在我的 .htaccess 文件中没有提到 localhost （有**IP**）。

通过在配置文件和 .htaccess 文件中放置相同的“路径”来解决整个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:59:35.070

为什么不使用相对链接？（删除初始斜线'/'）

您为上传文件创建了目标文件夹并更改了权限？

尝试删除 RewriteBase /sms/

如果您希望 url 相同，请更改 apache 配置文件中的 documentRoot

希望这可以帮到你。如果没有，请从您的代码中添加更多内容。

# java - Eclipse 快速修复无法正常工作

> ID：12151845
> 
> 赞同：0
> 
> 时间：2012-08-28T01:58:49.440
> 
> 标签：java, eclipse

我对 Eclipse、java 编程以及所有“编程”都很陌生，而且我最近一直在学习如何使用 Eclipse。我已经使用它大约一个星期了，到目前为止它运行良好。除了一些错误（主要是我的错误）之外，这些错误已经通过重新启动程序本身来修复。

但是，当我今天开始使用它时，我再也看不到 Quick Fix 命令提出的建议，例如，如果我键入 findVi 然后按 CTRL+1，它会显示“没有可用的建议”而不是“findViewById()”或其他内容相似的。

我知道这是正确的绑定，我什至将键重置为默认值以确保。如果我手动输入它，它仍然可以找到 ID，但我希望能够以这种方式更快地完成单词。

如果你们有任何可以帮助我的建议，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:21:05.910

**-**首先，如果您是**Java 新手**，并且想练习 Java，则**永远不要使用任何 IDE**，这样您可以学习正确的语法，并且有助于您查找错误的技能。

**-**但是正如你所写`"findViewById()"`的，你似乎在做 Android，现在有时会发生这种情况，**Eclipse 对 Android 的行为很奇怪**。这就是在使用 Android 时对 Eclipse GUI 进行任何更改的原因，最好查看这些更改是否已生效。

**-**此问题通常在关闭并重新打开 Eclipse 一次或两次后消失。

**-**好吧试试这个....

键入`findVie`然后按`Ctrl + Space-Bar`查看是否弹出建议...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:05:45.360

您可以从*Window > Preferences > Java > Editor > Content Assist*访问 Content Assist 首选项......也许有些事情搞砸了。

# jquery - jquery图像闪烁

> ID：12151847
> 
> 赞同：0
> 
> 时间：2012-08-28T01:59:03.557
> 
> 标签：jquery, image, jquery-animate, flicker

我有一个页面，其中包含几个图像缩略图，它们的不透明度设置为 0.6，直到鼠标悬停在它上面：然后，我将不透明度设置为 1.0，并且还显示了一个带有视频标题的小浮动 div。像这样...

**CSS：**

```
#theFloater { background-color: #444; color: #FFF; position: absolute; display: none; font-family: Arial, Helvetica, sans-serif; font-size: .85em; z-index:25;}
#reelList img { height: 20px; display: inline-block; margin: 0; z-index: 1} 
```

**jQuery：**

```
$('#reelList li').hover(function(){
    $(this).find('img').animate({opacity: 1.0}, 200, function(){});
    $('#theFloater').html(theTitles[$(this).index()]);
    $('#theFloater').show();
}, function(){
    $(this).find('img').animate({opacity: 0.6}, 200, function(){});     
    $('#theFloater').hide();                            
});

var mouseX;
var mouseY;

$("a img").mousemove(function(e){
    mouseX = e.pageX;
    mouseY = e.pageY;
});

frameRate =  30;
timeInterval = Math.round( 1000 / frameRate );

atime = setInterval(function(){ 
    w = $('#theFloater').width() / 2;
    $('#theFloater').css('left', mouseX - w).css('top', mouseY - 35);
}, timeInterval); 
```

这很好用，除非当光标退出缩略图时，*有时*，图像会连续几次上下动画不透明度，通常是两次或三次。如果我不显示浮动 div，它会完美运行。出于某种原因，浮动 div 与古怪有关。

任何人都知道为什么浮动 div 会导致缩略图多次动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:30:54.847

我能够让它多次动画的唯一方法是打开鼠标然后关闭，然后非常快速地重新打开几次然后停止 - 动画继续进行我进行切换的次数（准确影响）。

我相信您正在寻找的是 jQuery`stop()`停止当前动画的功能（因此它们不会不断增加数量 - 每个新的动画调用都会在运行之前停止以前的动画）。

简而言之，`$('#reelList li').hover`用这个 jQuery 交换函数

```
$('#reelList li').hover(function(){
    $(this).find('img').stop().animate({opacity: 1.0}, 200, function(){});
    $('#theFloater').html(theTitles[$(this).index()]);
    $('#theFloater').show();
}, function(){
    $(this).find('img').stop().animate({opacity: 0.6}, 200, function(){});     
    $('#theFloater').hide();                            
}); 
```

`stop()`有关[jquery.com api 参考部分](http://api.jquery.com/stop/)的更多信息。

# php - 使用一个会话是否足够安全？

> ID：12151848
> 
> 赞同：0
> 
> 时间：2012-08-28T01:59:05.893
> 
> 标签：php, session

目前，我和我的一个朋友正在一个网站上工作。我们的登录系统已关闭，但正在使用会话。我本人一直使用 cookie 进行登录，尽管我的朋友更喜欢会话。我一直告诉他我们应该有两个或更多会话可以与数据库进行比较，以确保它是准确的用户，而不是以某种方式骗取 ID 的人。

例如：

```
$_SESSION['id'] = $YourId;
$_SESSION['salt'] = $SomethingElseTheDatabaseHas; 
```

这使其更加安全，而不仅仅是数据库可以比较的一个会话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T02:08:09.367

由于会话数据存储在服务器端，因此使用多个会话变量来存储信息对安全没有任何帮助。客户端唯一知道会话的是它存储在 cookie 中的会话 ID。服务器使用会话 ID 为用户查找数据。如果您使用存储在 cookie 中的哈希来识别用户，那么您不妨使用会话，因为这基本上做同样的事情，但使处理用户数据变得更加容易。

我不确定您使用 cookie 存储数据的确切含义，但如果您的意思是客户端会有一个带有服务器用于身份验证的用户 ID 的 cookie，您应该立即重写它，因为它基本上允许用户成为他们想要的任何人。

# sql-server - 来自 3 个具有共同主键的表的数据

> ID：12151849
> 
> 赞同：0
> 
> 时间：2012-08-28T01:59:07.707
> 
> 标签：sql-server, tsql

我有三张桌子`Invoice`，`Account`并且`Visits`

每个都有一个共同的主键 ( `AccountID`)。我需要为 7 月份没有访问过并且有一个有效帐户以允许该月访问的帐户提取数据（从`Invoice`-`scheduletype`和`Account`-中提取`startdate`）

我曾尝试使用多个连接，但无法根据需要获取数据，并且对 SQL 来说还很陌生。有人能帮我指点一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:08:34.970

```
select A.*
from Accounts A
where A.AccountID NOT IN
    (Select V.AcocountID
     From Visits V
     Where V.date like '%July%'   //replace by appropriate condition
    ) AND
     A.AccountID IN
    (Select I.AccountID
     From Invoice I
     Where I.type = Invoice        //replace by appropriate condition
    ) AND
    A.startDate< July              //replace by appropriate condition 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:01:52.663

借用上一个答案，您也可以这样做（我更喜欢使用 EXISTS 来查看 AccountID 是否在其中 - 如果有，它会立即停止查找）。

```
SELECT A.* FROM Accounts A WHERE A.AccountID NOT IN
    (SELECT V.AccountID
        FROM Visits V
        WHERE CONVERT(date, V.date) BETWEEN '2012-07-01' AND '2012-07-31'
        -- assuming V.date is a 'datetime'. if V.date is already a 'date' then:
        -- WHERE V.date BETWEEN '2012-07-01' AND '2012-07-31'
        -- or you could say
        -- WHERE NOT(DATEPART(month, V.date) = '7' AND DATEPART(year, V.date) = '2012')
    )
    AND EXISTS (SELECT *
        FROM Invoice I
        WHERE I.type = Invoice        //or whatever
    ) AND
    A.startDate < '2012-07-01'        //or whatever 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T03:15:59.773

猜测访问日期，

```
SELECT  a.AccountID
FROM    Account a
WHERE   NOT EXISTS  (
                    SELECT 1 
                    FROM Invoice i 
                    WHERE i.AccountID = a.AccountID 
                    AND i.ScheduleType = 'hold'
                    AND i.StartDate < '8/1/2012'
                    AND i.EndDate >= '7/1/2012'
                    )
AND     NOT EXISTS  (
                    SELECT 1
                    FROM Visits v
                    WHERE v.AccountID = a.AccountID
                    AND v.SessionDate >= '7/1/2012'
                    AND v.SessionDate < '8/1/2012'                  
                    )
AND     a.StartDate < '8/1/2012'
AND     a.EndDate >= '7/1/2012'
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T03:51:29.237

使用以下查询：

```
Select A.*
From Accounts A
left join visits v on v.AccountID = A.AccountID 
                  AND v.SessionDate >= '2012-07-01'
                  AND v.SessionDate < '2012-08-01'
left join Invoice I ON I.AccountID = A.AccountID
                   AND I.ScheduleType = 'hold'
Where V.AccountID IS NULL
   and I.AccountID IS NULL
   and A.startDate < '2012-07-01' 
```

# php - 哪个解析IP更快？

> ID：12151855
> 
> 赞同：0
> 
> 时间：2012-08-28T02:00:31.713
> 
> 标签：php, dns, exec, resolve, gethostbyaddr

有没有人做过任何测试，看看哪个更快/更有效/更好地解析 PHP 脚本中的 IP 地址？

这个

```
exec('host '. $_SERVER['REMOTE_ADDR']); 
```

或这个

```
gethostbyaddr($_SERVER['REMOTE_ADDR']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:05:18.267

如果有本机功能，那么您应该使用它而不是使用外部命令。

使用外部命令使您的程序依赖于操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:05:44.300

您应该自己尝试一下，但我认为启动一个全新进程的成本不仅仅是调用`gethostbyaddr`函数。走外部可执行路径还会让你依赖很多其他的东西，比如操作系统、正确设置的路径、输出`host`可能改变的可能性等等。

优化口头禅 1 是*衡量，不要猜测！**只有当你确定它是一个瓶颈时，*第二个才是优化的，所以在你浪费时间试图修复不相关的东西之前，请确保它确实导致了问题。

# .net - 快速 .NET 应用程序开发的技巧

> ID：12151856
> 
> 赞同：0
> 
> 时间：2012-08-28T02:00:42.207
> 
> 标签：.net, visual-studio-2010

使用 VS2010 在 .NET 中快速开发的最佳技巧是什么？为了不让这个太宽泛，我正在寻找类似的东西：

*   使用“Ctrl K + D”快捷键组合自动格式化当前代码页
*   选择多行代码并使用“Ctrl K + C”一次将它们全部注释掉
*   创建“代码片段”以允许快速插入自定义代码并使用“Ctrl K + Ctrl X”在代码编辑器中快速访问它们

例如，我不是在询问用于自动代码生成的工具或正在使用的最佳实践（例如使用业务和数据层），而是特别是关于我们可以在 VS2010 的日常开发中使用的快速“提示”，以加快编码速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T03:44:08.913

如果您还不知道如何找到 VS 2010 快捷键备忘单，[这里是](http://weblogs.asp.net/scottgu/archive/2010/07/29/visual-studio-2010-keyboard-shortcuts.aspx)

这些是我最常用的几个。

## 导航

我最喜欢导航和在代码之间来回跳转的是 Ctrl + '-' 和 Ctrl + Shift + '-'。这些分别跳转到您编辑或关注的代码的不同部分。这也适用于文件，如果您正在执行跨类分布的工作，这会有所帮助。

Ctrl + ',' 也适用于跳转到您知道名称的类、方法或属性。这提供了所有解决方案的自动过滤页面。

Ctrl + Tab 和 Ctrl + Shift + Tab 按预期在打开的代码文件之间交替工作。这些键适用于许多 Windows 应用程序。

## 自动完成

我最喜欢的一些自动完成功能是“ctor”和“prop”。例如，如果您在 C# 上下文中键入这些内容并点击两次“Tab”，例如“ctor”将生成一个默认构造函数，“prop”将生成一个属性。这也适用于“switch”、“for”、“foreach”等。试试吧！

对于网络工作，这种使用双“Tab”键也适用于许多 html 元素。例如，键入“div”并点击“Tab”两次将创建一个 div 元素。'ul' 将创建一个包含单个 'li' 的列表。大多数 html 元素都会为您生成一些有效的 html，只需元素名称 + 'Tab' + 'Tab'。

# macos - 如何确定我的慢速（家庭）互联网的瓶颈在哪里？

> ID：12151858
> 
> 赞同：0
> 
> 时间：2012-08-28T02:00:55.727
> 
> 标签：macos, performance, modem

我最近从我的 ISP 那里得到了一个新的电缆调制解调器（加拿大的 Rogers；旧调制解调器是“Webstar”，新调制解调器是“SMC D3GN-RRR”）。自从我有了新的调制解调器，感觉我的互联网访问速度变慢了。

我感觉到有时当我输入一个 URL 并按回车键时，在网页加载之前会有一个延迟 - 有点延迟，但会持续半秒到两三秒。一旦网页开始加载，它就会快速加载，但是在它查找它的过程中会有延迟。

我有一台 MacBook Pro、一台 Apple Airport Extreme 无线路由器和新的电缆调制解调器。

是否有某种工具，或者很酷的 UNIX 命令（traceroute 之类的？）我可以运行看看从一个设备跳转到另一个设备需要多少时间，所以我可以“证明”延迟在哪里？

仅供参考，这是一个“traceroute www.google.com”，以防它有用。我不知道这是什么意思。:)

```
traceroute www.google.com
traceroute: Warning: www.google.com has multiple addresses; using 173.194.75.105
traceroute to www.l.google.com (173.194.75.105), 64 hops max, 52 byte packets
 1  10.0.1.1 (10.0.1.1)  4.455 ms  1.204 ms  1.263 ms
 2  * * *
 3  * 69.63.255.237 (69.63.255.237)  36.694 ms  30.209 ms
 4  69.63.250.210 (69.63.250.210)  44.503 ms  41.303 ms  46.039 ms
 5  gw01.mtmc.phub.net.cable.rogers.com (66.185.81.137)  40.504 ms  34.937 ms  44.493 ms
 6  * * *
 7  * 216.239.47.114 (216.239.47.114)  58.605 ms  37.710 ms
 8  216.239.46.170 (216.239.46.170)  56.073 ms  57.250 ms  64.373 ms
 9  72.14.239.93 (72.14.239.93)  70.879 ms
    209.85.249.11 (209.85.249.11)  114.399 ms  59.781 ms
10  209.85.243.114 (209.85.243.114)  72.877 ms  80.151 ms
    209.85.241.222 (209.85.241.222)  82.524 ms
11  216.239.48.159 (216.239.48.159)  82.227 ms
    216.239.48.183 (216.239.48.183)  80.065 ms
    216.239.48.157 (216.239.48.157)  79.660 ms
12  * * *
13  ve-in-f105.1e100.net (173.194.75.105)  76.967 ms  71.142 ms  80.519 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:04:00.370

对我来说同样的问题。下载和上传号码对我来说很棒。就我而言，看起来 DNS 的响应非常缓慢（不是由于 RTT 或线路速度较慢，而是 DNS 服务器本身过载，或者该区域的 DNS 过载或受到某种形式的攻击）。如果我是对的，不幸的是，我们作为“客户”证明这是解释或修复它并非易事。

# api - 如何使用 Instagram API 获取照片的原始点击日期

> ID：12151865
> 
> 赞同：2
> 
> 时间：2012-08-28T02:01:54.900
> 
> 标签：api, date, photo, instagram

我正在使用 Instagram API，我需要获取照片的原始点击日期。目前 Instagram API 给我照片上传到 Instagram 的日期，但不是原始点击日期。这是一个问题，因为它改变了照片实际上下文的含义。

有什么方法可以获取照片的原始拍摄日期吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:47:50.487

从应用程序内部点击照片时，原始点击日期和上传日期不一样吗？如果您允许从图库中添加照片的功能，则没有原始照片，只有其 instagramed 版本存在。即：原始照片存储在图库位置，编辑后的新照片存储在Instagram文件夹或应用程序文件夹中。原始照片和编辑照片之间没有关系。所以从另一个不相关的文件中获取一个文件的创建日期是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T11:55:27.453

You can not get the date date the photo was taken :-(

Instagram does not expose it via their api.

In my opinion this is short sited from instagram.

The date taken is stored in the image.

It can not be that difficult the save the correct date from the image, all the info is there.

# emacs - 我不知道lisp宏是如何构造它的扩展的？确切的步骤是什么？

> ID：12151869
> 
> 赞同：3
> 
> 时间：2012-08-28T02:02:20.553
> 
> 标签：emacs, macros, lisp, expansion

我尝试编写一个宏并按如下方式执行它。但它未能执行。

```
(defmacro times_two (var) (* 2 var))
(times_two '(+ 1 2)) 
```

在我的想象中，我认为扩展将是 (* 2 (+ 1 2))。执行后，结果为6。但是失败了。

我不知道为什么。我阅读了 Emacs lisp 手册，但我仍然无法理解它们。我想知道构建扩展的确切步骤是什么。口译员做了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T02:35:33.993

当我在 Emacs 中评估这些表单时，我在评估第二个表单时收到以下错误消息：

```
Debugger entered--Lisp error: (wrong-type-argument number-or-marker-p (quote (+ 1 2)))
  *(2 (quote (+ 1 2)))
  (lambda (var) (* 2 var))((quote (+ 1 2)))
  (times_two (quote (+ 1 2)))
  eval((times_two (quote (+ 1 2))))
  eval-last-sexp-1(nil)
  eval-last-sexp(nil)
  call-interactively(eval-last-sexp nil nil) 
```

这向您展示了它是如何扩展宏的，它应该告诉您出了什么问题。（最后的扩展在顶部。）

带引号的表达式`'(+ 1 2)`被传递给 times_two 宏，但带引号的列表不是`*`函数的有效参数。

你真正想要的是：

```
(defmacro times_two (var) `(* 2 ,var))
(times_two (+ 1 2)) 
```

请记住，通常宏的结果将是新的 Lisp 代码，而不是最终值。您编写宏的目标是构建能够为您提供所需结果的表单。因此，大多数情况下，您的宏最终会使用准引号 (`) 语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T18:48:44.727

我怀疑您混淆了编译时和运行时。宏在编译时运行，生成要在运行时执行的代码。一般来说，很难保持这些直截了当，这使得编写宏变得困难。

无论如何，当我将它放入 ielm 时，我得到：

```
 ELISP> (defmacro times_two (var) 
       (* 2 var))
    times_two
    ELISP> (times_two '(+ 1 2))
    *** Eval error ***  Wrong type argument: number-or-marker-p, (quote (+ 1 2))
    ELISP> 
```

至少部分问题是'（+ 1 2），但是当我删除引号时，以下内容并没有更好：

```
 ELISP> (times_two (+ 1 2))
    *** Eval error ***  Wrong type argument: number-or-marker-p, (+ 1 2)
    ELISP> 
```

似乎 elisp 正在我们放置 '(+ 1 2) 和 (+ 1 2) 的地方寻找数字或标记。让我们尝试使用一个数字：

```
 ELISP> (times_two 3)
    6 
```

这样可行。

有趣的是，它的宏观扩展给出了：

```
 ELISP> (macroexpand '(times_two 3))
    6 
```

这可能不是我们真正想要的。

当我们编写宏时，我们希望返回要在运行时评估的表达式。所以我们可以试试这个，而不是返回一个数字：

```
 ELISP> (defmacro times_two (var) 
           `(* 2 ,var)) 
```

反引号（准引号）是一种创建列表的方式，但也允许使用逗号进行插值。以这种方式定义 times_two 给出：

```
 ELISP> (times_two (+ 1 2))
    6 
```

并扩展：

```
 ELISP> (macroexpand '(times_two (+ 1 2)))
    (* 2
       (+ 1 2)) 
```

这正是你想象的那样。

# c# - 尝试在 C# 中构造泛型类型失败并出现 MissingMethodException

> ID：12151872
> 
> 赞同：2
> 
> 时间：2012-08-28T02:03:03.367
> 
> 标签：c#, .net, generics, asp.net-mvc-4

我有以下类定义：

```
public abstract class ControllerBase<T, V> : Controller where T : EntityBase<T> where V : GenericRepository<T> 
```

然后稍后在课堂上我有以下代码：

```
private V _repo;
...
_repo = (V)Activator.CreateInstance(typeof(V), _dbC, _c); 
```

这编译得很好。然后我有一个具有以下定义的类：

```
public class SecurityRoleController : ControllerBase<SecurityRole, GenericRepository<SecurityRole>> 
```

这也编译得很好。但是，当我尝试在浏览器中点击 /SecurityRole 时，我得到一个异常，即`Constructor on type GenericRepository'1 not found`. （请注意，它实际上是异常中的反引号，但会破坏 SO 格式。）尽管事实上`GenericRepository<T>`当我尝试直接创建类的实例时，有一个公共构造函数可以正常工作。

任何人都知道我如何正确构造该类的通用实例？

TIA，
本杰

编辑：

的构造函数`GenericRepository`：

```
public GenericRepository(DbContext dbContext, Context c, string[] includes = null)
{
    _dbContext = dbContext;
    _c = c;
    if (includes != null)
    {
        _includes = includes;
    }
    return;
} 
```

并且， and 的类型是and ，`_dbC`它们的构造函数中需要的类型- 是的，我从. 有什么想法吗？`_c``DbContext``Context``GenericRepository``.GetType().FullName`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T02:04:20.903

您的构造函数声明了三个参数。但是你的调用`Activator.CreateInstance`只传递了两个参数——它没有传递最后一个参数的值（它拥有一个默认值—— `string[] includes = null`）：

```
_repo = (V)Activator.CreateInstance(typeof(V), _dbC, _c); 
```

`CreateInstance`要求指定所有参数——它的方法重载解析算法基于您传递的参数，并且不考虑默认参数的可能性。因此，要修复，只需传入`null`（默认值）作为最后一个参数：

```
_repo = (V)Activator.CreateInstance(typeof(V), _dbC, _c, null); 
```

# java - 在运行时绑定到正确的构造函数 - Java

> ID：12151874
> 
> 赞同：3
> 
> 时间：2012-08-28T02:03:15.707
> 
> 标签：java, reflection

我今天想出了一个解决方案，涉及在运行时创建类，在解析文件后，使用 Java 中的[反射](http://docs.oracle.com/javase/tutorial/reflect/)API。

```
 while ((line = textReader.readLine()) != null)
    {
        Pattern p = Pattern
            .compile("([^:]+):([^:]+)::([\\d]+)::([^:]+)::(.+)");
        Matcher m = p.matcher(line);
        if (m.find())
        {
            String id = m.group(1);
            String className = m.group(2);
            int orderOfExecution = Integer.valueOf(m.group(3));
            String methodNameOrNew = m.group(4);
            Object[] arguments = m.group(5).split("::");
            if (methodNameOrNew.compareTo("new") == 0)
            {
                System.out.println("Loading class: " + className);
                if (className.contains("Competition"))
                {
                    continue;
                }
                else if (className.contains("$"))
                {
                    continue;
                }
                else
                {
                    Class<?> cl = Class.forName(className);
                    printMembers(cl.getConstructors(), "Constructor");
                    Constructor<?>[] cons = cl.getConstructors();
                    Object obj = cons[0].newInstance(arguments);
                    this.map.put(id, obj);
                }
            }
        }
    } 
```

和`printMembers()`：

```
private static void printMembers(Member[] mbrs, String s)
{
    out.format("%s:%n", s);
    for (Member mbr : mbrs)
    {
        if (mbr instanceof Field)
            out.format("  %s%n", ((Field) mbr).toGenericString());
        else if (mbr instanceof Constructor)
            out.format("  %s%n", ((Constructor) mbr).toGenericString());
        else if (mbr instanceof Method)
            out.format("  %s%n", ((Method) mbr).toGenericString());
    }
    if (mbrs.length == 0)
        out.format("  -- No %s --%n", s);
    out.format("%n");
} 
```

但是，我收到以下错误：

```
Loading class: org.powertac.common.TariffSpecification
Constructor:
  public org.powertac.common.TariffSpecification(org.powertac.common.Broker,org.powertac.common.enumerations.PowerType)

java.lang.IllegalArgumentException: argument type mismatch
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at Parser.parse(Parser.java:64)
    at Parser.main(Parser.java:137) 
```

`arguments[]`是：`1 : CONSUMPTION`。我怎样才能创建正确的构造函数，并给它正确的参数（类型）？例如，在我使用的示例解析器中，我有：

```
2233:org.powertac.common.Tariff::6::new::6 
```

然后我必须创建一个`class`类型的`org.powertac.common.Tariff`(`new`告诉我需要创建一个新对象，并且`double rate`在这种情况下它需要 a 作为参数`6`。但是，我不知道它需要 a `double`，只有参数是`String`( `6`)。如何我可以创建/转换/转换为正确的类型，然后将其分配给构造函数吗？我的第一个想法是创建一个符号表，但我想知道一个更简单的解决方案......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T02:31:56.107

您需要使用[`Class.getConstructor(Class...)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29)选择适合您希望传递给的参数的构造函数`Constructor.newInstance(Object...)`

在您的示例中，我将假设一个数组`1 : CONSUMPTION`意味着您有一个等效于的数组

```
Object[] arguments = new Object[]{Integer.valueOf(1), "CONSUMPTION"}; 
```

所以你打电话给以下

```
Class clazz = ... //Whatever class reference you have
Constructor c = clazz.getConstructor(Integer.class, String.class);
Object obj = c.newInstance(arguments); 
```

如果您不知道参数的类型，则必须针对返回的`Constructor.getParameterTypes()`每个构造函数返回的 Class 数组测试参数集，`Class.getConstructors()`直到找到与参数数组匹配的构造函数。更具体地说，参数数组和类数组的长度相同，并且类数组中的每个类都传递`Class.isAssignableFrom(Class)`给参数数组中相同位置的值的类。

上面代码的实现

```
 public boolean canConstruct(Object[] args, Constructor<?> c){
        Class<?>[] paramTypes = c.getParameterTypes(); 
        if(args.length != paramTypes.length){
            return false;
        }

        int i = 0;
        for(Object arg: args){
            if(!paramTypes[i].isAssignableFrom(arg.getClass())){
                return false;
            }
                    i++;
        }

        return true;
    } 
```

为了使用它，您必须将参数数组传递给构造函数。您可以尝试编辑您的输入，使其包含类型信息（这类似于 java 序列化的工作方式），以便您可以使用自己的类型构造函数通过反射构造构造函数参数数组的参数

# css - 100% 宽度 缩小窗口大小时不会拉伸

> ID：12151876
> 
> 赞同：1
> 
> 时间：2012-08-28T02:03:17.510
> 
> 标签：css, html

我有一个`<div>`100% 宽度的页眉/页脚。如果我让寡妇足够小，以便出现水平滚动条，然后滚动到页面的最右侧，我可以看到页脚在某个点中断并留下一个空白区域，就好像它的宽度是固定的一样。

[http://jsfiddle.net/enxRw/](http://jsfiddle.net/enxRw/)

我是否缺少任何 CSS 属性？我需要一个额外的包装`<div>`吗？我是否需要 JavaScript 来检查窗口宽度并进行相应调整？

编辑：

`width:1024px`for main是故意的`<div>`，因为它的内容是并排的 2 X 500px 图像，我不希望它们在窗口缩小时换行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T02:08:36.230

不要在`.main`div 上设置宽度，而是将其设置在`body`：

```
body {
    min-width: 1024px;
} 
```

这是你的小提琴：http: [//jsfiddle.net/enxRw/1/](http://jsfiddle.net/enxRw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:09:51.963

是的，您可以使用包装器 div。或者您可以在 body 元素上指定最小宽度。

百分比宽度计算为父节点的百分比。在这种情况下，这是主体节点。

由于您没有在 body 节点上设置宽度，因此它被计算为视口的宽度。（您可以通过查看检查器中的主体节点来检查）

# .net - 如何在 Linux 上使用 Mono Develop 创建 Excel 文件

> ID：12151883
> 
> 赞同：6
> 
> 时间：2012-08-28T02:05:32.590
> 
> 标签：.net, linux, excel

我目前正在开发一个与 Excel 互操作一起使用的 C#.net 项目（在 VS2010 中）。不过，在某些时候，我将不得不通过 Mono Develop 将该项目放到我们的 Linux 服务器上。

我听说 Excel 互操作在 Mono 中不起作用。无论如何，我可以使用 Mono 通过代码创建和操作 Excel 文件吗？

非常感谢！

**编辑：理想情况下，我想要一种免费的方法，并且仍然能够支持格式化。我真的不需要读权限，只需要写。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:21:21.457

你真的需要使用 Excel 本身吗？这里的问题不是 Excel 不能与 Mono 一起使用，而是 Excel 不能与 Linux 一起使用。为了在 Linux 上运行 Excel 和相关的 COM 互操作，您可能可以使用[Wine](http://www.winehq.org/)做一些 hacky ，但如果您要使用 Linux，我可能会建议完全放弃 Excel。有几个库可用于以更跨平台的方式处理 .xls 和 .xlsx 文件：[整个 StackOverflow 问题](https://stackoverflow.com/q/151005/960195)都致力于在不使用 Excel 互操作的情况下处理 Excel 文件。

现在，如果您要做的不仅仅是创建文件——例如，如果你想使用 Excel 的计算引擎——那么你可能不得不使用 Excel 本身。在这种情况下，我看到三个明确的选项：（a）在 Wine 下运行 Excel（可能还有您的应用程序），并希望它能正常工作，（b）使用 Excel for Mac 并在 OS X 上运行您的服务器，或者（c ) 使用 Windows。我不知道选项 (a) 和 (b) 是否允许正确的 COM 互操作，尽管我希望 Wine 尝试复制所有 COM 并且 Office for Mac 具有某种 API 来代替 COM 互操作。第三种选择可能有两种形式：您可以使用 Windows Server 来运行您的网站，或者您可以将一台机器或 VM 用于 Excel 计算引擎，并从您的 Web 服务器代码的其他部分联系它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T03:38:55.273

我用 MOMA 检查了 excelpackage.dll，它没有报告任何警告和错误。不过，这可能适用于未经测试的单声道。它也是免费的 GPL。 [http://excelpackage.codeplex.com/](http://excelpackage.codeplex.com/)

# ruby - 通过 FasterCSV JSON 到 CSV

> ID：12151885
> 
> 赞同：0
> 
> 时间：2012-08-28T02:05:44.707
> 
> 标签：ruby, json, fastercsv

我是 Ruby 新手，有一个问题。我正在尝试创建一个将 JSON 转换为 CSV 的 .rb 文件。

我遇到了一些不同的来源让我做出：

```
require "rubygems"
require 'fastercsv'
require 'json'

csv_string = FasterCSV.generate({}) do |csv|
   JSON.parse(File.open("small.json").read).each do |hash|
    csv << hash
  end
end

puts csv_string 
```

现在，它实际上确实输出了文本，但它们都被压缩在一起，没有空格、逗号等。我如何使它更加定制化，更清晰的 CSV 文件，以便我可以导出该文件？

JSON 看起来像：

```
 {
            "results": [
                {
                    "reportingId": "s", 
                    "listingType": "Business", 
                    "hasExposureProducts": false, 
                    "name": "Medeco Medical Centre World Square", 
                    "primaryAddress": {
                        "geoCodeGranularity": "PROPERTY", 
                        "addressLine": "Shop 9.01 World Sq Shopng Cntr 644 George St", 
                        "longitude": "151.206172", 
                        "suburb": "Sydney", 
                        "state": "NSW", 
                        "postcode": "2000", 
                        "latitude": "-33.876416", 
                        "type": "VANITY"
                    }, 

                    "primaryContacts": [
                        {
                            "type": "PHONE", 
                            "value": "(02) 9264 8500"
                        }
                    ]
                },xxx
        } 
```

CSV 仅具有以下内容：

```
 reportingId, s, listingType, Business, name, Medeco Medical...., addressLine, xxxxx, longitude, xxxx, latitude, xxxx, state, NSW, postcode, 2000, type, phone, value, (02) 92648544 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:48:18.653

由于您的 JSON 结构是散列和列表的混合，并且还具有不同高度的级别，因此它不像您显示的代码那么简单。但是（假设您的输入文件总是看起来相同）编写适当的转换器应该不难。在最低级别，您可以通过以下方式将哈希转换为 CSV

```
hash.to_a.flatten 
```

例如

```
input = JSON.parse(File.open("small_file.json").read)
writer = FasterCSV.open("out.csv", "w")
writer << input["results"][0]["primaryAddress"].to_a.flatten 
```

会给你

```
type,VANITY,latitude,-33.876416,postcode,2000,state,NSW,suburb,Sydney,longitude,151.206172,addressLine,Shop 9.01 World Sq Shopng Cntr 644 George St,geoCodeGranularity,PROPERTY 
```

希望能指引你的方向。

顺便说一句，您的 JSON 看起来无效。您应该将该`},xxx`行更改为`}]`.

# wpf - 如何将日历的显示模式用作 DataTrigger 的值

> ID：12151887
> 
> 赞同：0
> 
> 时间：2012-08-28T02:05:50.610
> 
> 标签：wpf, data-binding, enums, datatrigger

所以我需要知道如何设置一个 xmlns 让我在触发器的值中使用 CalendarMode。

我尝试过使用 xmlns:cal="clr-namespace:System.Windows.Controls", xmlns:cal="clr-namespace:System.Windows.Controls.Calendar" 并且我每次都构建了项目，但我得到了错误告诉我 CLR 命名空间未定义且无法找到。

这是我使用它的地方

```
<DataTrigger Binding="{Binding Source=_Calendar, Path=Calendar.DisplayMode}">
  <DataTrigger.Value>
    <cal:CalendarMode>Month</cal:CalendarMode>
  </DataTrigger.Value>
  <Setter Property="Grid.Opacity" Value="1" />
</DataTrigger> 
```

我想我可以只听日历上的 DisplayModeChanged 事件，但由于我整天都在网上搜索这个解决方案，我真的很想知道如何以这种方式解决这个问题。

任何输入将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:22:07.637

实际上我不明白你需要什么。但我会尽力提供帮助。

我们看到的定义：

![在此处输入图像描述](../Images/2f6f4f1e5762a2dab1654a9300adfd01.png)

然后能够使用我们必须做的xaml：

> xmlns:presentation="clr-命名空间:System.Windows.Controls;assembly=PresentationFramework"

现在，如果您希望自己控件的依赖属性发生某些事情，您应该使用 Triggers 而不是 DataTriggers

样本：

```
 <Calendar Height="170" HorizontalAlignment="Left"  Margin="83,112,0,0" Name="calendar1" VerticalAlignment="Top" Width="180">
        <Calendar.Style>
            <Style TargetType="Calendar">
                <Setter Property="Opacity" Value="0.4"/>
                <Style.Triggers>
                    <Trigger Property="SelectionMode" Value="{x:Static presentation:CalendarMode.Month}">
                        <Setter Property="Opacity" Value="1.0"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Calendar.Style>
    </Calendar> 
```

通常，DataTriggers 用于您创建的对象，实现 INotifyPropertyChanged。别胡闹。

现在，如果您想更改另一个控件（当 CalendarMode 更改时），您应该这样做：

```
 <Calendar Height="170" HorizontalAlignment="Left"  Margin="83,112,0,0"
 Name="calendar1" VerticalAlignment="Top" Width="180"/>

    <Grid>
        <Grid.Style>
            <Style TargetType="Grid">
                <Setter Property="Opacity" Value="0.5"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=calendar1, Path=CalendarMode}">
                        <DataTrigger.Value>
                            <presentation:CalendarMode>Month</presentation:CalendarMode>
                        </DataTrigger.Value>
                        <Setter Property="Opacity" Value="1.0"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Grid.Style>
    </Grid> 
```

我建议您阅读有关触发器、数据触发器和绑定的更多信息。

# php - 结合两个表不同的标准

> ID：12151889
> 
> 赞同：0
> 
> 时间：2012-08-28T02:06:12.163
> 
> 标签：php, mysql, sql

基本上我只是想完成一个我正在进行的项目，在找到用于此 SQL 语句的正确语法时遇到了一些麻烦。

基本上我有两个不同的表：

```
Customer:
companyid
companyname
etc etc.

Machine:
machineid
model
serial
companyid 
```

现在通常这很容易，因为我只是加入 companyid，但是，这次我需要做的稍微不同。我需要返回使用客户 ID 搜索的客户表中的特定数据，以及使用机器 ID 搜索的机器表中的特定数据。

我很累，所以如果答案直盯着我，我会道歉，但这是我正在做的事情，我再次知道它很可能是错误的，所以我很抱歉我尝试搜索但无济于事：

```
$customerquery = mysql_query("
            SELECT customer.companyid, customer.companyname, 
                   customer.companyaddress, customer.postcode, 
                   customer.telephone, customer.mobile, 
                   machine.machineid, machine.model, 
                   machine.serial 
            FROM customer, machine 
            WHERE customer.companyid=$customerid AND 
                  machine.machineid=$machineid
            "); 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:09:08.540

您当前的查询会产生笛卡尔积，因为您错过了应该在哪里连接表的条件。这是 join ( `SQL-89`)的旧语法

```
SELECT customer.companyid, customer.companyname, 
       customer.companyaddress, customer.postcode, 
       customer.telephone, customer.mobile, 
       machine.machineid, machine.model, 
       machine.serial 
FROM   customer, machine 
WHERE  customer.companyid = $customerid AND 
       machine.machineid = $machineid AND
       customer.companyid = machine.companyid -- you missed this one producing
                                              -- cartesian product 
```

join ( `SQL-92`)的新语法

```
SELECT customer.companyid, customer.companyname, 
       customer.companyaddress, customer.postcode, 
       customer.telephone, customer.mobile, 
       machine.machineid, machine.model, 
       machine.serial 
FROM   customer INNER JOIN machine 
          ON customer.companyid = machine.companyid 
WHERE  customer.companyid = $customerid AND 
       machine.machineid = $machineid 
```

# php - 使用正则表达式将单词包装在句子中

> ID：12151891
> 
> 赞同：1
> 
> 时间：2012-08-28T02:06:27.033
> 
> 标签：php, regex

我正在转换如下句子：

```
Phasellus turpis, elit. Tempor et lobortis? Venenatis: sed enim! 
```

到：

```
_________ ______, ____. ______ __ ________? _________: ___ ____! 
```

使用：

```
utf8_encode(preg_replace("/[^.,:;!?¿¡ ]/", "_", utf8_decode($ss->phrase) )) 
```

但我面临一个问题：谷歌正在将所有这些空词作为关键字进行索引。我想将原始字符串转换为 Google 不可见的内容，例如：

```
<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span>&nbsp;&nbsp;&nbsp;&nbsp</span>, .... 
```

使用：

```
.parent span { text-decoration:underline; } 
```

也就是说，将单词包装在 span 标签内，用   替换单词的字符；并且保留特殊字符 .,:;!?¿¡ 和空格。

这可以使用正则表达式解决吗？实际上，我通过使用扫描字符串的每个字符的效率不高的循环来解决这个问题，但是我必须每页扫描很多句子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:23:30.913

使用 preg_replace_callback 并让回调创建适当的替换。类似于（未经测试）的东西

```
function replacer($match) {
    return "<span>".str_repeat("&nbsp;",strlen($match[1]))."</span>";
}

// Note the addition of the () and the + near the end of the regex
utf8_encode(preg_replace_callback("/([^.,:;!?¿¡ ]+)/", "replacer", utf8_decode($ss->phrase) )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:04:59.673

```
$yourphrase = preg_replace('/([^\W]+)/si', '<span>$1</span>', $yourphrase); 
```

这将用跨度包装所有“ **_ ”字...**

恕我直言，您在这里需要一个两步过程，首先您必须将字母转换为下划线（这已经很明显了？），其次您必须将“ *_* ”-words 包裹在一个跨度中（使用我的正则表达式）。

# java - Gwtp NullpointerException-注解

> ID：12151892
> 
> 赞同：1
> 
> 时间：2012-08-28T02:06:40.570
> 
> 标签：java, gwt, annotations, gwtp

我正在尝试使用 Gwtp 实现一个移动网络应用程序。**我的桌面和平板电脑视图正常工作，但移动视图出现错误。**我正在为桌面、移动和平板电脑视图绑定 3 个不同的演示者。所以这将是不同设备上的不同登录页面。我需要在不同设备上使用不同的登录页面功能。平板电脑上的第一个演示者将是任务列表，但在移动设备上，用户必须先登录才能看到任务列表。此外，一些演示者将通过平板电脑和移动视图共享。

**移动模块**-

```
bindConstant().annotatedWith(DefaultPlace.class).to(NameTokens.login);

bindPresenter(LoginPresenter.class, LoginPresenter.MyView.class,
                LoginView.class, LoginPresenter.MyProxy.class);

bindPresenter(MainListTabletPresenter.class,
    MainListTabletPresenter.MyView.class, MainListMobileView.class,
            MainListTabletPresenter.MyProxy.class); 
```

**平板电脑模块**-

```
bindConstant().annotatedWith(DefaultPlace.class).to(NameTokens.mainList);

bindPresenter(MainListTabletPresenter.class,
            MainListTabletPresenter.MyView.class, MainListTabletView.class,
            MainListTabletPresenter.MyProxy.class);

bindPresenter(LoginPresenter.class, LoginPresenter.MyView.class,
        LoginView.class, LoginPresenter.MyProxy.class); 
```

当我运行应用程序时，有什么想法为什么我会得到以下信息（`NullpointerException`关于注释）？我想我有正确的注释`LoginPresenter`。

```
(MainPageEntryPoint.java:83) 2012-08-27 18:43:54,360 [ERROR] e: com.google.gwt.event.shared.UmbrellaException: One or more exceptions caught, see full set in UmbrellaException#getCauses
com.google.gwt.event.shared.UmbrellaException: One or more exceptions caught, see full set in UmbrellaException#getCauses
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:129)
    at com.google.gwt.user.client.impl.HistoryImpl.fireEvent(HistoryImpl.java:75)
    at com.google.gwt.event.logical.shared.ValueChangeEvent.fire(ValueChangeEvent.java:43)
    at com.google.gwt.user.client.impl.HistoryImpl.fireHistoryChangedImpl(HistoryImpl.java:82)
    at com.google.gwt.user.client.History.fireCurrentHistoryState(History.java:121)
    at com.gwtplatform.mvp.client.proxy.PlaceManagerImpl.revealCurrentPlace(PlaceManagerImpl.java:310)
    at com.happs.curveapp.client.MainPageEntryPoint.revealCurrentPlace(MainPageEntryPoint.java:114)
    at com.happs.curveapp.client.MainPageEntryPoint.onModuleLoad2(MainPageEntryPoint.java:68)
    at com.happs.curveapp.client.MainPageEntryPoint$1.execute(MainPageEntryPoint.java:40)
    at com.google.gwt.core.client.impl.SchedulerImpl$Task$.executeScheduled$(SchedulerImpl.java:50)
    at com.google.gwt.core.client.impl.SchedulerImpl.runScheduledTasks(SchedulerImpl.java:228)
    at com.google.gwt.core.client.impl.SchedulerImpl.flushPostEventPumpCommands(SchedulerImpl.java:388)
    at com.google.gwt.core.client.impl.SchedulerImpl$Flusher.execute(SchedulerImpl.java:78)
    at com.google.gwt.core.client.impl.SchedulerImpl.execute(SchedulerImpl.java:138)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:619)
Caused by: com.google.web.bindery.event.shared.UmbrellaException: One or more exceptions caught, see full set in UmbrellaException#getCauses
    at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:203)
    at com.google.web.bindery.event.shared.SimpleEventBus.fireEventFromSource(SimpleEventBus.java:96)
    at com.gwtplatform.mvp.client.proxy.PlaceManagerImpl.fireEvent(PlaceManagerImpl.java:146)
    at com.gwtplatform.mvp.client.proxy.PlaceManagerImpl.doRevealPlace(PlaceManagerImpl.java:121)
    at com.gwtplatform.mvp.client.proxy.PlaceManagerImpl.revealPlace(PlaceManagerImpl.java:339)
    at com.happs.curveapp.client.place.ClientPlaceManager.revealDefaultPlace(ClientPlaceManager.java:27)
    at com.gwtplatform.mvp.client.proxy.PlaceManagerImpl.onValueChange(PlaceManagerImpl.java:264)
    at com.google.gwt.event.logical.shared.ValueChangeEvent.dispatch(ValueChangeEvent.java:128)
    at com.google.gwt.event.logical.shared.ValueChangeEvent.dispatch(ValueChangeEvent.java:1)
    at com.google.gwt.event.shared.GwtEvent.dispatch(GwtEvent.java:1)
    at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
    at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
    at com.google.web.bindery.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:88)
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:127)
    ... 39 more

Caused by: java.lang.NullPointerException
    at com.happs.curveapp.client.view.mobile.LoginView.<init>(LoginView.java:54)
    at com.happs.curveapp.client.gin.MobileGinjectorImpl.com$happs$curveapp$client$view$mobile$LoginView_LoginView_methodInjection(MobileGinjectorImpl.java:1749)
    at com.happs.curveapp.client.gin.MobileGinjectorImpl.create_Key$type$com$happs$curveapp$client$view$mobile$LoginView$_annotation$$none$$(MobileGinjectorImpl.java:1753)
    at com.happs.curveapp.client.gin.MobileGinjectorImpl.get_Key$type$com$happs$curveapp$client$view$mobile$LoginView$_annotation$$none$$(MobileGinjectorImpl.java:1767)
    at com.happs.curveapp.client.gin.MobileGinjectorImpl.create_Key$type$com$happs$curveapp$client$presenter$LoginPresenter$MyView$_annotation$$none$$(MobileGinjectorImpl.java:231)
    at com.happs.curveapp.client.gin.MobileGinjectorImpl.get_Key$type$com$happs$curveapp$client$presenter$LoginPresenter$MyView$_annotation$$none$$(MobileGinjectorImpl.java:240)
    at com.happs.curveapp.client.gin.MobileGinjectorImpl.create_Key$type$com$happs$curveapp$client$presenter$LoginPresenter$_annotation$$none$$(MobileGinjectorImpl.java:299)
    at com.happs.curveapp.client.gin.MobileGinjectorImpl.get_Key$type$com$happs$curveapp$client$presenter$LoginPresenter$_annotation$$none$$(MobileGinjectorImpl.java:313)
    at com.happs.curveapp.client.gin.MobileGinjectorImpl.access$0(MobileGinjectorImpl.java:311)
    at com.happs.curveapp.client.gin.MobileGinjectorImpl$1$1.onSuccess(MobileGinjectorImpl.java:254)

    at com.google.gwt.core.client.GWT.runAsync(GWT.java:255)
    at com.happs.curveapp.client.gin.MobileGinjectorImpl$1.get(MobileGinjectorImpl.java:252)
    at com.gwtplatform.common.client.CodeSplitProvider.get(CodeSplitProvider.java:48)
    at com.gwtplatform.mvp.client.proxy.ProxyImpl.getPresenter(ProxyImpl.java:46)
    at com.gwtplatform.mvp.client.proxy.ProxyPlaceAbstract.handleRequest(ProxyPlaceAbstract.java:193)
    at com.gwtplatform.mvp.client.proxy.ProxyPlaceAbstract.access$0(ProxyPlaceAbstract.java:192)
    at com.gwtplatform.mvp.client.proxy.ProxyPlaceAbstract$1.onPlaceRequest(ProxyPlaceAbstract.java:143)
at com.gwtplatform.mvp.client.proxy.PlaceRequestInternalEvent.dispatch(PlaceRequestInternalEvent.java:134)
    at com.gwtplatform.mvp.client.proxy.PlaceRequestInternalEvent.dispatch(PlaceRequestInternalEvent.java:1)
    at com.google.gwt.event.shared.GwtEvent.dispatch(GwtEvent.java:1)
    at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
    at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
    ... 52 more 
```

# javascript - Backbone.js 会话实现流程

> ID：12151894
> 
> 赞同：0
> 
> 时间：2012-08-28T02:07:00.207
> 
> 标签：javascript, backbone.js

我使用 Backbone 设置了一个简单的 OAuth 验证，并且运行良好。我的问题有点挑剔（虽然......我也是Backbone的新手），但我希望找到可能知道如何解决这个问题的人。

我有一个 Session 模型，它在初始化时根据 localStorage 中值的存在设置一个 @authenticated 值。这里还有一个方法，authenticate()，它检查@authenticated 值是否通过/失败。如果值检查失败，它会使用我的路由器导航到登录路由。如果值检查通过，则运行用户传入的可选回调。

在我的主 AppView（应用程序启动时运行的第一个视图）中，我运行 Session.authenticate()，如果它通过，则路由到“#home”（我的路由器处理加载其他视图）。

我的问题是：作为未经身份验证的用户，如果我在浏览器中输入[http://url.com/#home](http://url.com/#home)，我会成功路由到“#login”，但是如果我打开我的 DevTools，我可以看到在我的“HomeView”视图中请求图像。我对 Backbone 如何通过这个过程有什么不明白的地方？“#home”的路由不应该在应用程序初始化之后才运行，因此甚至不应该尝试加载“HomeView”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:06:54.507

你使用什么样的模板引擎？例如，如果您的模板是内联的，在您的主干应用程序所在的 HTML 模板中，那么我相信其中的任何图像都会在页面加载时呈现。我可能错了。此外，通过在视图的初始化方法中将某些内容记录到控制台来确保您的 HomeView 没有运行。

# php - 存储当前日期/时间

> ID：12151895
> 
> 赞同：1
> 
> 时间：2012-08-28T02:07:19.403
> 
> 标签：php, mysql

我有一个网站，用户可以在其中更新他们的状态。了解他们发布状态的日期/时间非常重要。我在表中创建了一个字段并为其指定了日期时间类型。我不熟悉日期/时间。我知道日期时间字段的结构是这样的：

```
YYYY-MM-DD HH:MM:SS 
```

我认为在我的 INSERT 查询中这样做会起作用，但它没有。

```
 $query= "INSERT INTO posts (user_id, story, date, view) VALUES ('$user_id', '$story', 
'date()', '1')"; 
```

当我检查数据库表时，发布成功，但日期时间读取

```
0000-00-00 00:00:00 
```

我能做些什么来达到我的最终结果。这整个 unix 时间戳和日期/时间的东西真的让我感到困惑。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T02:08:47.437

不要引用 mysql 函数，你应该使用`NOW()`而不是`DATE()`.

```
$query= "INSERT INTO posts (user_id, story, date, view) VALUES ('$user_id', '$story', NOW(), '1')"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T02:09:46.390

试一试，这将以您发布的格式将具有当前日期和时间的记录添加到数据库中：

```
$query= "INSERT INTO posts (user_id, story, date, view) VALUES ('$user_id', '$story', now(), '1')"; 
```

编辑：发布时间与上面相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:38:15.113

让我们来看看：

```
$date_time = NOW(); 
```

然后

```
$query= "INSERT INTO posts (user_id, story, date, view) VALUES ('$user_id', '$story',$date_time, 'My_View')"; 
```

# java - 从自定义适配器访问 ArrayList

> ID：12151901
> 
> 赞同：0
> 
> 时间：2012-08-28T02:07:59.300
> 
> 标签：java, android, arraylist

我想要做的是从客户适配器访问我主要活动中的 ArrayList 以获取列表视图。

我有一个可以点击的列表视图，这是我在客户适配器（onclick 所在的位置）中完成的。当用户单击它时，他们将输入一个标题（文本），它将更新主活动中的一个数组列表（字符串）。

我已经阅读了有关该主题的其他一些问题，但我对如何使这项工作迷失了方向。

我没有看到需要发布代码片段，因为它只是一个基本的数组列表（字符串）和一个列表视图的自定义适配器。如果需要代码，我可以发布。谢谢！

这里是适配器代码的一部分：

```
public class PhotoAdapter extends ArrayAdapter<Photo> {

    private final ArrayList<Photo> objects;

    public PhotoAdapter(Context context, int textViewResourceId,
            ArrayList<Photo> objects) {
        super(context, textViewResourceId, objects);
        this.objects = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final Photo i = objects.get(position);
        View v = convertView;

        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.listview_row, null);
                v.setClickable(true);
                v.setFocusable(true);
        } 
```

这是来自主要活动的代码

```
public ArrayList<Photo> m_photos = new ArrayList<Photo>();
public ArrayList<String> m_photo_captions = new ArrayList<String>();
private PhotoAdapter m_adapter;

this.list1 = (ListView) findViewById(R.id.lstPhotos);
        m_adapter = new PhotoAdapter(this, R.layout.listview_row, m_photos);
        LayoutInflater infalter = getLayoutInflater();
list1.setAdapter(m_adapter);

if (Intent.ACTION_SEND_MULTIPLE.equals(action)
                && intentGallery.hasExtra(Intent.EXTRA_STREAM)) {
            ArrayList<Parcelable> list = intentGallery
                    .getParcelableArrayListExtra(Intent.EXTRA_STREAM);
            for (Parcelable p : list) {
                Uri uri = (Uri) p;
                imagePath = getPath(uri);
                m_photos.add(new Photo(imagePath, ""));
                m_photo_locations.add(imagePath);
                m_photo_captions.add("");
                m_adapter.notifyDataSetChanged();
            }
        } 
```

onclick 监听器

```
 list1.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
            // Do whatever you want with m_photo_captions here
            Log.v("listview", "listview item clicked");
            appErrorAlert("test", "test");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T02:13:17.147

您可以将要访问的 ArrayList 定义为全局实例变量，这样您就可以从自定义适配器内部访问它。

如果您为您的问题提供了代码片段，这也会很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T03:53:47.010

既然您已经发布了代码，我建议您采用与 Mohamed A. Karim 不同的方法。

* * *

您正在尝试`OnClickListener`在您的整个行上设置一个简单的`Adapter`但可以访问您的 Activity 的成员。为什么不在`OnItemClickListener`你`ListView`已经可以访问你想要的列表的地方设置一个呢？

```
list1.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        // Do whatever you want with m_photo_captions here
    }
}); 
```

* * *

接下来删除所有会在触摸事件到达您的`ListView`. 您还可以使您`getView()`的设备更小更快，如下所示：

```
public class PhotoAdapter extends ArrayAdapter<Photo> {
    LayoutInflater mInflater;

    public PhotoAdapter(Context context, int textViewResourceId,
            ArrayList<Photo> objects) {
        super(context, textViewResourceId, objects);
        mInflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final Photo i = get(position);
        View v = convertView;

        if (v == null) {
            v = mInflater.inflate(R.layout.listview_row, null);
            // Initialize your ViewHolder here!
        }

        // Update your TextViews, ImageViews, etc here
        ...
    }
} 
```

希望有帮助！

# android - Android - 如何使用广播接收器读取短信？

> ID：12151904
> 
> 赞同：0
> 
> 时间：2012-08-28T02:08:20.963
> 
> 标签：android, sms, broadcastreceiver

在我的 android 项目中，我需要在 SMS 文本进入时检测和读取它们，然后从另一个类调用一个函数。

如何将以下代码放在一个类中并在清单中正确定义它。如果我把它放在另一个 Java 文件上，那么我不知道如何从另一个 Java 文件调用函数。我尝试将此代码放在我的主类中，但在我的应用程序中，它就崩溃了。

```
public class SMSReceiverActivity extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        // Parse the SMS.
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null)
        {
            // Retrieve the SMS.
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i=0; i<msgs.length; i++)
            {
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                // In case of a particular App / Service.
                //if(msgs[i].getOriginatingAddress().equals("+91XXX"))
                //{
                //str += "SMS from " + msgs[i].getOriginatingAddress();
                //str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";
                //}
            }
            if (str != "") { // remove the last \n
                str = str.substring(0, str.length()-1);
            }

            Reusable_CodeActivity.alert(my_ViewActivity.this, "AAAAAAAAAAA");
            try {
                //my_ViewActivity.this.handle_incoming_message(str);
            } catch(Exception e) {

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:28:06.560

您接收短信的代码是正确的。但是当您`BroadCastReceiver`在 Activity 类中使​​用时，您需要在 onStop() 方法中按如下方式取消注册它。我认为这就是您的活动令人沮丧的原因。

```
@Override
protected void onStop()
{
    unregisterReceiver(mReceiver);
    super.onStop();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:02:02.403

如果我正确理解您的问题，您希望在显示活动时接收广播（当短信到达时*）*。

如果是这样，我不久前找到了一个很好的模式来做到这一点（不记得我从哪里得到它，很高兴感谢原作者）。

首先，创建一个接口：

```
public interface Receiver {
    public void onReceive(Context context, Intent intent);
} 
```

现在创建一个 BroadcastReceiver 的子类，我们可以在运行时动态注册它：

```
public class PortableReceiver extends BroadcastReceiver {
    private Receiver mReceiver;

    public void setReceiver(Receiver receiver) {
        mReceiver = receiver;
    }

    public Receiver getReceiver() {
        return mReceiver;
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        if (mReceiver != null)
            mReceiver.onReceive(context, intent);
        else
            Log.w("PortableReceiver", "Dropping received Result");
    }
} 
```

现在我们可以在活动类中使用 PortableReceiver：

```
public class MyActivity implements Receiver {
    private PortableReceiver mReceiver;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mReceiver = new PortableReceiver();
        mReceiver.setReceiver(this);
    }

    @Override
    public void onResume() {
        super.onResume();

        // Register the receiver
        IntentFilter filter = new IntentFilter();
        filter.addAction("_my_intent_action"); //TODO: add actions to filter just as you would in your AndroidManifest
        registerReceiver(mReceiver, filter, null, null);
    }

    @Override
    public void onPause() {
        super.onPause();
        unregisterReceiver(mReceiver);
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        //TODO: Your code goes here!
    }
} 
```

现在您的 Activity 类直接处理广播，因此您可以访问它所有可用的功能。

请注意，如果您想从 BroadcastReceiver*开始*一个活动，那就有点不同了。如果是这样，我建议您查看[http://www.vogella.com/articles/AndroidServices/article.html#pre_broadcastreceiver](http://www.vogella.com/articles/AndroidServices/article.html#pre_broadcastreceiver)

# javascript - Dotcloud nodejs supervisord.conf 不工作

> ID：12151908
> 
> 赞同：0
> 
> 时间：2012-08-28T02:08:46.297
> 
> 标签：javascript, node.js, deployment, dotcloud, supervisord

我一直在尝试让主管监视我的 nodejs 服务器进程，但是我在让 supervisord.conf 工作时遇到了问题。部署时，我收到以下错误：

```
WARNING: The service crashed at startup or is listening to the wrong port. It failed to respond on port "node" (42801) within 30 seconds. Please check the application logs. 
```

但是，当我 ssh 进入 dotcloud 服务器并手动启动 nodejs 进程时，它运行得很好，表明主管无法启动节点实例。

我的 supervisord.conf 看起来像这样：

```
[program:node]
command = node /home/dotcloud/current/app/server.js
autostart=true
autorestart=true 
```

我的目录结构如下：

```
.dotcloudignore
dotcloud.yml
.gitignore
app/
app/package.json
app/server.js
app/supervisord.conf 
```

在这一点上，我看不出我做错了什么，因为这似乎与[此处](http://docs.dotcloud.com/0.4/services/nodejs/)概述的目录结构相同，所以我对解决方案是什么感到茫然。有任何想法吗？

编辑：

尝试后`supervisorctl status`我得到以下信息：

```
node                             FATAL      Exited too quickly (process log may have details) 
```

我发现在 /var/log/supervisor 中，我收到以下错误消息：

```
module.js:337
    throw new Error("Cannot find module '" + request + "'");
          ^
Error: Cannot find module '/home/dotcloud/current/app/server.js'
    at Function._resolveFilename (module.js:337:11)
    at Function._load (module.js:279:25)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38) 
```

我不确定是什么原因造成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:07:05.397

在调查了这个问题之后，看起来这个问题来自于`dotcloud.yml`指定的事实`approot: app`。在这种情况下，需要注意的是：

*   `/home/dotcloud/code`将指向整个代码库；
*   `/home/dotcloud/current`将指向 approot（更具体地说，`/home/dotcloud/current`将是指向 approot 的符号链接，即`code/app`在这种情况下）。

因此，`supervisord.conf`不应包含：

```
command = node /home/dotcloud/current/app/server.js 
```

但反而：

```
command = node /home/dotcloud/current/server.js 
```

关键在于 Node.js 日志本身，因为 Node.js 抱怨无法找到`/home/dotcloud/current/app/server.js`.

# javascript - Facebook 如何验证 Facebook Connect 请求？

> ID：12151912
> 
> 赞同：1
> 
> 时间：2012-08-28T02:09:21.337
> 
> 标签：javascript, facebook, api, sdk

所以我正在为我的网站开发我自己的 API——我在模仿 Facebook JS SDK 来了解我的系统是如何工作的。API客户端显示一个按钮，弹出窗口，用户可以登录。登录弹出窗口向打开窗口发出一个事件，父窗口现在知道用户已登录。一切正常。

我无法理解的是他们如何验证刷新请求是否有效。如果 API 客户端需要向服务器发送请求，询问用户是否登录并且都是 JS 中的，那么一切都是透明的。API 客户端说：“您好，我是应用程序 4jhkk2l3bnm389，登录 Facebook 的用户是否也通过了我的身份验证？如果是，您可以给我发送一个新令牌，以便我可以进行 API 调用吗？” Facebook 说：“哦，你是应用程序 4jhkk2l3bnm389？是的，用户已登录并允许你访问他们的信息，这是一个访问令牌。”

但是 Facebook 如何防止不是真实应用程序的外部应用程序说：“嘿，*我*实际上是应用程序 4jhkk2l3bnm389，我保证我没有撒谎。我可以有一个访问令牌吗？”

我不知道他们如何确定差异。显然，如果这一切都是通过现代浏览器中的 AJAX 调用完成的，那么您只需提供一个 Access-Control-Allow-Origin 标头即可。但如果恶意客户端使用 cURL，那么我认为我永远无法区分。脸书是如何做到的？非常感谢一个很好的解释！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:09:56.823

所有访问令牌都属于应用程序/用户对，为了让 Facebook 将此类访问令牌返回给应用程序，必须验证这些访问令牌。

应用程序或 client_id 会根据 redirect_uri 中指定的域进行验证 - 如果页面尝试使用它不拥有的 client_id/redirect_uri 对，那么它将不会收到访问令牌，因为这将传递给有效的 redirect_uri ( JS SDK 使用的机制遵循相同的规则）。

用户或 uid 在您登录时使用 Facebook 设置的 cookie 进行验证。

虽然您可以使用 curl 轻松欺骗 client_id/redirect_uri 对，但这不适用于 uid，因为您必须拥有用户 cookie。如果是这种情况，那么您可以简单地授予您自己的应用程序访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:31:49.667

Facebook 使用[OAuth 2.0](http://oauth.net/2/)进行身份验证。您可以在此处找到 Facebook 如何处理 OAuth 的详细信息：[https](https://developers.facebook.com/docs/authentication/) ://developers.facebook.com/docs/authentication/ 。可以使用多种不同的方式来使用 OAuth，具体取决于您是在移动设备上、facebook.com 本身上的页面，还是在您的情况下，只是 facebook.com 之外的网页。可以在此处找到最终流程的详细信息：[https](https://developers.facebook.com/docs/authentication/client-side/) ://developers.facebook.com/docs/authentication/client-side/ 。

基本上，Facebook 知道您允许哪些应用程序查看您的信息。当您运行其中一个应用程序时，他们首先确保您登录到 Facebook，然后他们从 Facebook 请求用户访问令牌，基本上是说，“嘿 Facebook，我不认识这个人，我也不应该。我可以获取他们的信息？”。然后 Facebook 在内部查看，如果它决定这个特定的应用程序应该有权访问这个用户的信息，它会发送一个用户令牌。

这是描述它的简单方法。身份验证流程可以通过多种不同的方式发生，这取决于我之前所说的请求来自哪种设备，这是否是 facebook.com 上的页面等，主要取决于您的安全限制。最好阅读前面提到的 Facebook 身份验证文档以获取详细信息，因为它可能会变得非常棘手。

# javascript - 通过 jQuery tiny PubSub 传递数组

> ID：12151913
> 
> 赞同：0
> 
> 时间：2012-08-28T02:09:23.287
> 
> 标签：javascript, jquery, publish-subscribe

[jQuery tiny PubSub](https://gist.github.com/661855)在传递原始值或对象时非常有用，但在处理数组时会遇到一些问题。所以我必须将数组包装成一个对象。

```
(function($) {
  var o = $({});
  $.subscribe = function() {
    o.on.apply(o, arguments);
  };
  $.unsubscribe = function() {
    o.off.apply(o, arguments);
  };
  $.publish = function() {
    o.trigger.apply(o, arguments);
  };
}(jQuery));
$.subscribe('test',function(e,data){
    console.log(data);
})
$.publish('test',1);       //1
$.publish('test',{a:1});   //{a:1}
$.publish('test',[2,3,4]); //2
$.publish('test',{arr:[2,3,4]})  //{arr:[2,3,4]} 
```

我见过它的一些改进版本，主要侧重于缓存订阅者，但它们都不能传递数组。所以，两个问题：

*   通过 PubSub 传递数组是个好主意吗？
*   怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:55:20.387

您不能在数组上使用 apply 函数。您只能使用应用和调用对象实例。

数组可以在其每个索引中包含对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:25:42.037

好吧，反正我想通了。

即使认为这对其他人来说可能不是问题，但是无法通过数组传递`PubSub`对我来说非常混乱和不便。所以我决定自己写`PubSub`，而不是使用 jQuery 的自定义事件。

```
(function (Global) {
    var cache = {};
    Global.PubSub = Global.PubSub || {
        on: function (e, fn) {
            if (!cache[e]) {
                cache[e] = [];
            }
            cache[e].push(fn);
        },
        off: function (e, fn) {
            if (!cache[e]) {
                return;
            }
            var fns = cache[e];
            if (!fn) {
                fns.length = 0;
            }
            var index = fns.indexOf(fn);
            if (index !== 0) {
                fns.splice(index, 1);
            }
        },
        trigger: function (e, data) {
            if (!cache[e]) {
                return;
            }
            var fns = cache[e];
            for (var i = 0; i < fns.length; ++i) {
                fns[i](e, data);
            }
        }
    };
})(typeof window !== 'undefined' ? window : this);
PubSub.on('test', function (e, data) {
    console.log(data);
});
PubSub.trigger('test', 1);
PubSub.trigger('test', {
    a: 1
}); //{a:1}
PubSub.trigger('test', [2, 3, 4]); //[2,3,4]
PubSub.trigger('test', {
    arr: [2, 3, 4]
}); //{arr:[2,3,4]} 
```

# php - 你会在这里使用策略模式吗？

> ID：12151922
> 
> 赞同：0
> 
> 时间：2012-08-28T02:10:56.667
> 
> 标签：php, design-patterns

这段代码是否适合策略模式？

```
public function isValidEmail($email, $organization)
{   
    switch ($organization) {
        case 'USAF':
        case 'Army':
        case 'USMC':
        case 'Navy':
        case 'SOCOM':
            return (preg_match('/[.]mil$/i', $email) === 1);
            break;

        case 'Federal Gov.':
            return (preg_match('/[.]gov$/i', $email) === 1);
            break;

        case 'State/Local Gov.':
            $regionCollection = Mage::getModel('directory/region')
                ->getResourceCollection()
                ->addCountryFilter(array('US'))
                ->load();

            $stateAbbr = array();

            // Cycle through state abbreviations for match
            foreach ($regionCollection as $region) {
                $stateAbbr[] = strtolower($region->getCode());
            }
            $states = implode('|', $stateAbbr);

            return (preg_match("/[\.|@]{1}($states){1}\.us$/i", $email) ===
            break;

        case 'USCG':
        case 'DOD':
        case 'Defense Industry':
            return true;
            break;

        default:
            return false;
            break;
    }
    // It got past somehow?
    return false;
} 
```

我假设您可以有一个简单的接口来定义验证方法，但我对如何处理 switch 语句中返回 true/false w/没有电子邮件逻辑的两个奇怪的球情况有点困惑。

```
interface ValidInterface
{
    public function isValid($email);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:33:47.820

您的验证器界面正走在正确的轨道上（我将其命名为更有意义的名称，例如`EmailValidator`）。然后，您可以创建组织到验证器的映射，并在执行验证时进行查找：

```
private $validators = array(
  'USAF' => new MilitaryEmailValidator(),
  'Army' => new MilitaryEmailValidator(),
  ...
  'Defense Industry' => new TrueEmailValidator()
);

public function isValidEmail($email, $organization) {
  if (isset($this->validators[$organization]))
    return $this->validators[$organization])->isValid($email);

  // default return
  return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:08:57.913

我认为这里的相关设计模式是责任链。它本质上是 switch 语句的面向对象版本。您有一个对象列表（或树）。他们每个人都有能力确定他们是否应该处理这个问题（相当于“案例”陈述）。如果他们不这样做，则将决定传递给继任者（下一个“案例”声明）。你可能有也可能没有一个包罗万象的东西，相当于“默认：”语句。

为什么然后使用责任链而不是 switch 语句或建议的字符串到对象的映射？

我认为它们是实现相同目标的特定实现。更通用的实现可能会给您更多的自由度或类型安全性。switch 解决方案对您可以在每个案例中放置的代码数量/您可以可靠地处理和维护的案例数量施加了非常实际的限制。恰当的例子：在您的代码中，state/gov 的分支非常复杂，将其放在对象或方法中会相当大地清理代码。

# c++ - C++/Qt、OpenGL 纹理映射

> ID：12151923
> 
> 赞同：0
> 
> 时间：2012-08-28T02:11:13.640
> 
> 标签：c++, qt, opengl, mapping, textures

我正在尝试渲染已映射到图形视频内存的纹理。我已经使用 qDebug 来测试我的图像的输入，实际上它拥有一个 512x512 的图像，它是 2 的幂。但是当我尝试渲染时，结果只是一个白色的四边形，而不是纹理。

注意：GLuint m_textureIdents[1]; 在 GLWidget.h 中正确定义

```
#include "GLWidget.h"

GLWidget::GLWidget(QWidget *parent) : QGLWidget(parent)
{
    setMouseTracking(true);
    m_sceneIndex = SinQuest::SplashScreen;
}

void GLWidget::setApplicationPath(QString strAppPath)
{
    m_strAppPath = strAppPath;
}

#include <QDebug>
void GLWidget::loadResources(void)
{
    m_imageHandler.addImage(QString(m_strAppPath).append(QDir().toNativeSeparators("\\resources\\images\\")).append("splash_logo.png"), "splash-logo");
    QImage glImageData = QGLWidget::convertToGLFormat(*m_imageHandler.getImage("splash-logo"));

    qDebug() << glImageData.width() << ":" << glImageData.height();

    m_textureIdents[0] = 0;
    glGenTextures(1, &m_textureIdents[0]);
    glBindTexture(GL_TEXTURE_2D, m_textureIdents[0]);
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, glImageData.width(), glImageData.height(), 0, GL_RGB, GL_UNSIGNED_BYTE, glImageData.bits());
}

void GLWidget::initializeGL()
{
    glEnable(GL_TEXTURE_2D);
    glDisable(GL_DEPTH_TEST);
    glDisable(GL_COLOR_MATERIAL);
    glEnable(GL_BLEND);
    glEnable(GL_POLYGON_SMOOTH);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glClearColor(0, 0, 0, 0);
}

void GLWidget::resizeGL(int w, int h)
{
    glViewport(0, 0, w, h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, w, 0, h, -1.0l, 1.0l); // set up origin
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}

void GLWidget::paintGL()
{
    glClearColor( 0.0f, 0.0f, 0.0f, 0.0f);
    glClear( GL_COLOR_BUFFER_BIT );
    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glColor3f(1.0f, 1.0f, 1.0f);
    glShadeModel( GL_FLAT );
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, m_textureIdents[0]);

    glBegin(GL_QUADS);

    glTexCoord2f(0.0f, 0.0f);
    glVertex2i(0, 0);

    glTexCoord2f(1.0f, 0.0f);
    glVertex2i(512, 0);

    glTexCoord2f(1.0f, 1.0f);
    glVertex2i(512, 512);

    glTexCoord2f(0.0f, 1.0f);
    glVertex2i(0, 512);

    glEnd();
}

void GLWidget::mousePressEvent(QMouseEvent *event) {

}
void GLWidget::mouseMoveEvent(QMouseEvent *event) {
    printf("%d, %d\n", event->x(), event->y());
}

void GLWidget::keyPressEvent(QKeyEvent* event) {
    switch(event->key()) {
    case Qt::Key_Escape:
        close();
        break;
    default:
        event->ignore();
        break;
    }
} 
```

...

```
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QDesktopWidget *pDeskWidget = app.desktop();

    // available geometry to obtain resolution for primary screen
    QRect avGeometry = pDeskWidget->availableGeometry(pDeskWidget->primaryScreen());

    // create window, set resolution and invoke fullscreen window state
    GLWidget window;
    window.setApplicationPath(QCoreApplication::applicationDirPath());
    window.loadResources();
    window.resize(avGeometry.width(), avGeometry.height());
    window.setWindowState(Qt::WindowFullScreen);
    window.show();

    return app.exec();
} 
```

# python - Python 中的局部、全局和对象

> ID：12151924
> 
> 赞同：0
> 
> 时间：2012-08-28T02:11:13.360
> 
> 标签：python

我对 Python 中的局部变量和全局变量以及全局对象有疑问。看看这段代码：

```
var = 0

class Test():
    var = 0

test = Test()

def sum():
    Test.var += 1
    test.var += 1
    var += 1

sum() 
```

如果我运行该代码，则仅在“var += 1”行中触发异常。前两行有效。我从 Python FAQ 中读到[了这个问题。](http://docs.python.org/faq/programming.html#what-are-the-rules-for-local-and-global-variables-in-python)我认为函数的前两行也不例外，因为引用了“Test”和“test”。分配了成员“var”，但“Test”和“test”是全局的，因为被引用以获取成员。常见问题解答说：“在 Python 中，仅在函数内部引用的变量是隐式全局的。如果一个变量在函数体中的任何位置被分配了一个新值，它就被假定为一个局部变量。”

所以，问题是……我的假设是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:29:09.850

看看这些函数：

```
def f():
    var += 1

def g():
    var = var.__iadd__(1) 
```

`g`是`f`函数所做的文字版本（当然 Python`INPLACE_ADD`在第一个版本中使用操作码并且不查找`__iadd__`属性）。

但是，如您所见，名称`var`在这两个函数中加载一次并存储一次。因此，如果您分配一个变量，如常见问题解答所述，它是本地的，除非您首先将其声明为全局。

那么，如何加载一个尚不存在的局部变量进行求和`1`，然后以相同的名称再次存储？

类属性之所以起作用，是因为您正在执行以下操作：

```
Test.var = Test.var.__iadd__(1) 
```

并且`var`确实存在于`Test`范围内（因此可以查找和重新分配）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:48:16.557

> 我认为函数的前两行也不例外，因为引用了“Test”和“test”。

正确的。它们指的是 class 属性`var`，而不是您定义的全局属性。

> 分配了成员“var”，但“Test”和“test”是全局的，因为被引用以获取成员。

或者换一种说法，`Test`并且`test`可以在全局命名空间中`Test.var`使用`test.var`。

如果 中的值`var`未更改`sum()`，您将得到 0，因为它上面的行更改了`Test`类属性而不是全局属性。`print`在 sum 中添加一些s 并删除`var += 1`

```
def sum():
    Test.var += 1
    print Test.var
    test.var += 1
    print test.var
    print var

sum() 
```

...给出：

```
1
2
0 
```

但是，当我尝试在 sum 函数中为 var 赋值时，我什至在该行之前就收到了错误：

```
>>> def sum():
...     Test.var += 1
...     print Test.var
...     test.var += 1
...     print test.var
...     print var
...     var += 1
...     print var
... 
>>> sum()
1
2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 6, in sum
UnboundLocalError: local variable 'var' referenced before assignment 
```

因为`var`现在在 sum() 中分配了一个值，所以它被认为是本地的，但在该行之前没有定义。（这意味着 python 正在做一些“向前看”或检查`variable scope`sum()，因为它在重新评估`print var`之前引发了第一个错误。放置而不是引发相同的错误。）`var``var = 50``var += 1`

使用全局变量：

```
def sum():
    Test.var += 1
    print Test.var
    test.var += 1
    print test.var
    global var #added the global keyword
    print var
    var += 1
    print var 
```

输出：

```
1
2
0    # notice that global var is still 0 because the above var+=1 are for Test.var
1 
```

* * *

编辑：关于我提到的“向前看”行为。本来要发布一个关于它的问题，但在这个答案中已经很好地解释了：[https](https://stackoverflow.com/a/370380/1431750) ://stackoverflow.com/a/370380/1431750 （到[Python 变量范围错误](https://stackoverflow.com/q/370357/1431750)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T02:40:10.213

本质上，规则是为了避免歧义：

```
var = 0 # a variable in the global namespace

class Test():
    var = 0 # this is a attribute of the Test class

test = Test()

def sum():
    Test.var += 1
    test.var += 1 # these explicity mention on which object the name 
                  # should be stored

    blah = var    # reads from a outer scope, but assigns to a local variable
    var = Test    # new local variable which shadows the outer name
                  # not great but understandable

    var += 1 # this looks like it assigns to a local variable
             # but since a name from a outer scope is read first,
             # Python is not sure what the programmer really want to do
             # (maybe assign to the outer scope, or first read it then shadow?)
             # instead of guessing Python raises an exception, 
             # forcing the programmer to use `global` or a different name 
```

# jquery - jQuery：仅在调整窗口大小时触发事件

> ID：12151925
> 
> 赞同：0
> 
> 时间：2012-08-28T02:11:18.810
> 
> 标签：jquery

如果正在调整窗口大小，我想更改属性。调整大小后如何返回原始属性？

```
$(document).ready(function() {
    $('div').css('do 1');
});

$(window).resize(function(){
    $('div').css('do 2 and when resize is finished go back to 1');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T02:14:40.097

`.resize()`是一个事件，而不是布尔属性。

因此，您可以分配一个在调整窗口大小时触发的处理程序。

**IE**

```
$(window).resize(function() {
    $('body').prepend('<div>' + $(window).width() + '</div>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:56:05.430

尝试将您的调整大小功能修改为这样的东西

[http://jsfiddle.net/Varinder/U3MKP/](http://jsfiddle.net/Varinder/U3MKP/)

下面是代码（以防万一小提琴链接不起作用）

```
$(document).ready(function() { $('div').css('do 1'); });

var t;
$(window).resize(function() {
   clearTimeout(t);
   $('div').css('do 2');
   t = setTimeout(function() {
     //resize end (sort-of-hacky) event fires here.
     $('div').css('do 1');
   }, 100);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T02:23:30.693

看起来您正在尝试执行以下操作：

```
$(window).resize(function() {
  var n = $(window).width;
  var trigger_num = 1000;

  if (n > trigger_num) {
    $('div').css('do something');
  } 
  else {
    $('div').css('do something else');
  }
}); 
```

触发数基本上是您定义的一个数字，用于在窗口超过一定大小时触发 CSS。这当然可以用 <、== 等进行修改。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-28T02:16:25.003

```
$(window).on( "resize" , function(){
 // do something
}); 
```

我建议限制此功能，因为每次更改像素大小时都会触发它。所以使用像 underscorejs 这样的东西。这将仅每 60 帧/秒触发一次代码。

```
$(window).on( "resize" , _.throttle( function(){ 
    // do something 
} , 1000/60 ) ); 
```

# asp.net-mvc-3 - MVC3 错误信息全球化

> ID：12151932
> 
> 赞同：0
> 
> 时间：2012-08-28T02:12:17.213
> 
> 标签：asp.net-mvc-3, validation, globalization, global-asax

我真的很迷失为我的 MVC3 应用程序创建自定义通用验证消息。

我阅读了许多教程，其中大部分都建议了以下选项之一：

1.  创建一个 App_GlobalResources 文件夹并在其中放置我的自定义资源，我更改 global.asax，将我的资源的字符串名称传递给`DefaultModelBinder.ResourceClassKey`属性。将资源的构建操作更改为“嵌入式资源”。

2.  右键单击项目，然后转到属性，单击“资源”选项卡并创建您的自定义资源。将其访问修饰符设置为“公共”。

第**一个**对我不起作用，我的资源中有以下键： **DefaultModelBinder_ValueRequired、InvalidPropertyValue、PropertyValueInvalid、PropertyValueRequired** ，当我尝试在模型的必需属性中提交和形成空值时，没有使用它们. 我已将此代码放在 global.asax Application_Start 方法中：

```
DefaultModelBinder.ResourceClassKey = "My_Resource_Name"; 
```

使用**第二种**方法，我创建了一个与第一种方法具有相同键的资源。当属性无效或为空时，默认情况下不使用它们（我也更改了 global.asax 中的 ResourceClassKey，但没有成功）。但是当我在模型中向数据注释添加一些参数时：

```
[Required(ErrorMessageResourceType = typeof(MyResourceFile), ErrorMessageResourceName = "MyCustomKey")] 
```

当该数据注释的属性为空时，使用我用*“MyCustomKey”*定义的消息！

但我真的不想手动将其设置为我的所有属性，我想替换默认错误消息，例如：*“{0} 字段是必需的。”*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:01:57.020

该消息是`DataAnnotations`. 默认消息被编译到`DataAnnotations assembly`资源文件中，`System.ComponentModel.DataAnnotations.Resources.DataAnnotationsResources.resources`并且是`RequiredAttribute_ValidationError=The {0} field is required`. 您可以尝试下载源代码，更改该部分并重建它。

似乎没有一种简单的全局方式来改变它。你可以试试[这个](https://stackoverflow.com/a/7673457/985284)，否则看起来你被困在将你的属性添加到每个字段中。或者使用这样的东西：

```
public class SomeModel
{
    [Required(ErrorMessage = "The article is required")]
    public string Article { get; set; }

    [StringLength(512, ErrorMessage = "Must be less than 512 characters.")]
    public string URL { get; set; }
} 
```

# android - 如何制作我的应用程序的捐赠版本？

> ID：12151933
> 
> 赞同：-3
> 
> 时间：2012-08-28T02:12:20.307
> 
> 标签：android

> **可能重复：**
> [从相同的代码创建应用程序的免费/付费版本](https://stackoverflow.com/questions/5590203/create-free-paid-versions-of-application-from-same-code)

我试图在 Google Play 上制作我的应用程序的捐赠版本，但是当我上传它时，它给了我一个错误，即已经有一个具有包名称的应用程序。有没有一种简单的方法可以复制应用程序并使用不同的包名称？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:42:28.937

另一种处理这个问题的方法，我已经看到越来越多，只需创建一个简单的应用程序，无论您的捐赠金额是多少，然后将您的用户链接到它。这将是一些简单的事情，比如一张感谢卡，甚至根本没有任何活动。只需提醒您的用户保留 20 分钟以上再删除即可，否则将被退款。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:17:23.240

Google Play 使用包名称来识别不同的应用程序，因此您需要更改包名称。如果您使用 Eclipse，重构包名非常简单（例如，如果您的包名是 com.example.test，则将其更改为 com.example.test.donate），然后重新构建。

# grails - 如何在 grails 中运行 spock 功能测试的子集？

> ID：12151935
> 
> 赞同：4
> 
> 时间：2012-08-28T02:12:31.750
> 
> 标签：grails, tags, functional-testing, spock, geb

在其他一些测试框架中，我习惯于标记测试，例如@really_slow、@front_end

然后运行不同批次的测试，比如我可能想要设置一个构建从属来运行所有的 real_slow 测试，并且可能想要运行所有标记为前端但没有标记为非常慢的测试。

目前，要在 grails 中运行我的 spock+geb 测试，我只需运行 grails test-app functional：

我如何告诉它运行一个子集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:45:05.077

您可以将 JUnit 套件与`@Category`. 或者您可以使用`SpockConfig.groovy`具有以下内容的 a：

```
runner {
    include foo.bar.FrontEnd, foo.bar.BackEnd
    exclude foo.bar.Slow
} 
```

这里，`foo.bar.FrontEnd`，`foo.bar.BackEnd`， 和`foo.bar.Slow`是您自己的注释。要激活配置文件，您必须设置`spock.configuration`指向它的系统属性。

# java - 将文件夹复制到名称相同的目的地

> ID：12151940
> 
> 赞同：0
> 
> 时间：2012-08-28T02:14:12.170
> 
> 标签：java, file, io, copy, backup

我正在尝试获取一个备份程序来获取用户使用的文件夹`JFileChooser`并将其复制到也使用相同方法选择的目的地。

唯一的问题是它没有将所选文件夹的所有内容放入目的地中命名相同的文件夹中，我真的不知道为什么。我做了一些谷歌搜索，我没有发现任何有用的东西。

这是代码：

```
package main;

import java.io.File;
import java.util.ArrayList;

public class test {

BackgroundWorker bw;
static ArrayList bgWorker = new ArrayList();
ArrayList al = new ArrayList(); // this is the list of files selected to
                                // back up
String dir = ""; // this is the path to back everything up to selected by
                    static // the user
boolean bwInitiallized = false;

public void startBackup() throws Exception {
    Panel.txtArea.append("Starting Backup...\n");

    for (int i = 0; i < al.size(); i++) {
        /**
         * THIS IS WHERE I NEED TO CREATE THE FOLDER THAT EACH BACKUP FILE
         * WILL GO INTO EX: SC2 GOES INTO A FOLDER CALLED SC2 AND RIOT GOES
         * TO RIOT, ALL WITHIN THE DIRECTORY CHOSEN
         */
        File file = new File((String) al.get(i));
        File directory = new File(dir);

        // File dirFile = new File(dir + "\\" + file.getName());
        // if (!dirFile.exists())
        // dirFile.mkdir();

        bw = new BackgroundWorker(Panel.txtArea, file, directory);
        bgWorker.add(bw);
        bwInitiallized = true;
        bw.execute();

        /**
         * follows to the bottom of the txtarea
         */
        int x;
        Panel.txtArea.selectAll();
        x = Panel.txtArea.getSelectionEnd();
        Panel.txtArea.select(1, x);

    }
    clearList(); // method not included in this example that deletes all the
                    // contents of the al array list.
}

public static void cancel() {
    BackgroundWorker bg;
    if (bwInitiallized) {
        bwInitiallized = false;
        Panel.txtArea.append("Cancelling...\n");
        for (int i = 0; i < bgWorker.size(); i++) {
            // BackgroundWorker bg = (BackgroundWorker) bgWorker.get(i);
            bg = (BackgroundWorker) bgWorker.get(i);
            bg.cancel(true);
        }
        Panel.txtArea.append("Canceled backUp!\n");
    } else {
        Panel.txtArea.append("Cannot Cancel! Not Initiallized!\n");
    }
}
} 
```

我认为问题是：我相信无论出于何种原因，目标文件路径都必须包含所包含文件夹的名称，但我试过了，但没有帮助。

有谁知道我做错了什么？

这是使`JFileChooser`：

```
public void fileChooserToDestination() {
    LookAndFeel previousLF = UIManager.getLookAndFeel();
    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (Exception e) {
    }
    JFileChooser jfc = new JFileChooser();
    try {
        UIManager.setLookAndFeel(previousLF);
    } catch (UnsupportedLookAndFeelException e) {
    }

    jfc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);

    if (jfc.showDialog(null, "Select Directory") == JFileChooser.APPROVE_OPTION) {
        File file = jfc.getSelectedFile();
        dir = file.getPath();
        Panel.txtArea.append("User selected " + file.getPath()
                + " for the destination...\n");
        try {
            startBackup();
        } catch (Exception e) {
        }

    } else {
        Dialogs.msg("You canceled selecting a destination folder! Returning to main screen...");
        al.clear();
        Panel.txtArea.append("User cancelled the destination selection..."
                + "\n");
    }

    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:36:19.807

我需要的部分代码丢失了。我看不出你在哪里做出关于如何将源文件附加到目标路径的决定，所以我写了这个简单的例子来说明这一点......

```
File sourcePath = new File("/path/to/be/backed/up");
File destPath = new File("X:/BackupHere");

// Get all the files from sourcePath
List<File> listFiles = getFilesFrom(sourcePath);

for (File toBackup : listFiles) {

    // Now we need to strip off the sourcePath
    // Get the name of the file
    String fileName = toBackup.getName();
    // Get parent folder's path
    String path = toBackup.getParent();
    // Remove the source path from file path
    path = path.substring(sourcePath.getPath().length());

    // Append the file name to the path
    path = path + File.separator + fileName;

    // Now we have the name of the back up file
    String backupFile = destPath + path;

    System.out.println("Backup to " + backupFile);

} 
```

基本上，您需要删除“源路径”（您要复制的目录）。然后，您使用结果值附加到“备份路径”值，然后您应该有一个合适的路径。

# audio - 我的目标设备上的 alsa 说“找不到卡'0'”

> ID：12151942
> 
> 赞同：0
> 
> 时间：2012-08-28T02:14:14.197
> 
> 标签：audio, pcm, alsa

我正在尝试使目标的声卡能够通过 ALSA 工作，它是 Qualcomm MSM8660 Snapdragon，这意味着没有 pci 设备并运行一种嵌入式 linux。

因为这个设备最初是一款商业安卓手机，所以我确信它的内核上有适当的内置音频驱动程序，但 ALSA 根本不识别声卡。

我相信这是因为我没有编写任何 alsa 配置文件，例如 /etc/asound.conf 和 /usr/share/alsa/alsa.conf （我尝试了其构建源附带的默认 alsa.conf 但没有运气)

它用以下命令说的是：

```
/dev # ls pcm*
pcmC0D0c  pcmC0D0p  pcmC0D1c  pcmC0D1p

/dev # cat /proc/asound/cards
 0 [msmaudio       ]:  - msm-audio
                      msm-audio

/dev # cat /proc/asound/devices 
  0: [ 0]   : control
 16: [ 0- 0]: digital audio playback
 17: [ 0- 1]: digital audio playback
 24: [ 0- 0]: digital audio capture
 25: [ 0- 1]: digital audio capture
 33:        : timer

/dev # cat /proc/asound/pcm
00-00: DSP 1 msm-codec-dai-0 :  : playback 2 : capture 1
00-01: MVS mvs-codec-dai-1 :  : playback 1 : capture 1

/dev # cat /proc/asound/timers 
G0: system timer : 10000.000us (10000000 ticks)
P0-0-0: PCM playback 0-0-0 : SLAVE
P0-0-1: PCM capture 0-0-1 : SLAVE
P0-0-2: PCM playback 0-0-2 : SLAVE
P0-1-0: PCM playback 0-1-0 : SLAVE
P0-1-1: PCM capture 0-1-1 : SLAVE

/dev # cat /proc/asound/card0/pcm0p/info 
card: 0
device: 0
subdevice: 0
stream: PLAYBACK
id: DSP 1 msm-codec-dai-0
name: 
subname: subdevice #0
class: 0
subclass: 0
subdevices_count: 2
subdevices_avail: 2

/dev # cat /proc/asound/card0/pcm1p/info 
card: 0
device: 1
subdevice: 0
stream: PLAYBACK
id: MVS mvs-codec-dai-1
name: 
subname: subdevice #0
class: 0
subclass: 0
subdevices_count: 1
subdevices_avail: 1 
```

请让我知道我应该怎么做才能让它发挥作用。

我提前感谢。

祝你有美好的一天。

* * *

我将官方 alsa-lib 源的默认 alsa.conf 添加到 /usr/share/also 并在 /etc 处写了一个非常简单的 asound.conf

```
pcm.!default {
        type hw
        card 0
}

ctl.!default {
        type hw
        card 0
} 
```

结果是，

```
/temp # aplay- l
**** List of PLAYBACK Hardware Devices ****
card 0: msmaudio [msm-audio], device 0: DSP 1 msm-codec-dai-0 []
  Subdevices: 2/2
  Subdevice #0: subdevice #0
  Subdevice #1: subdevice #1
card 0: msmaudio [msm-audio], device 1: MVS mvs-codec-dai-1 []
  Subdevices: 1/1
  Subdevice #0: subdevice #0 
```

所以问题是配置文件，我遇到了另一个问题，aplay 卡在

```
/temp # aplay -i ./gbb.mp3
...
...
access("//.asoundrc", R_OK)             = -1 ENOENT (No such file or directory)
open("/dev/snd/controlC0", O_RDWR|O_CLOEXEC) = 3
fcntl64(3, F_SETFD, FD_CLOEXEC)         = 0
ioctl(3, SNDRV_CTL_IOCTL_PVERSION or USBDEVFS_CONTROL or USBDEVFS_CONTROL32, 0xbedb085c) = 0
ioctl(3, SNDRV_CTL_IOCTL_PCM_PREFER_SUBDEVICE, 0xbedb0880) = 0
open("/dev/snd/pcmC0D0p", O_RDWR|O_NONBLOCK|O_CLOEXEC
...
... 
```

但我想这不再是关于配置了。

# ruby-on-rails - 安装 Hobo 时，它在我的系统中安装了以前版本的 rails，它会搞砸吗？

> ID：12151947
> 
> 赞同：0
> 
> 时间：2012-08-28T02:15:07.053
> 
> 标签：ruby-on-rails, ruby, gem, rvm, hobo

我（*是？*）使用 rvm 与 ruby​​ 1.9.3 和 rails 3.2.8。

我决定尝试一下 Hobo rails 插件，所以我按照 Hobo 网站上的说明进行操作，上面说你只需要输入：

宝石安装流浪汉

输出：

成功安装**activesupport-3.0.17**

成功安装builder-2.1.2

成功安装i18n-0.5.0

成功安装**activemodel-3.0.17**

成功安装 rack-1.2.5

成功安装 rack-test-0.5.7

成功安装 rack-mount-0.6.14

成功安装 abstract-1.0.0

成功安装erubis-2.6.6

成功安装**actionpack-3.0.17**

安装成功arel-2.0.10

成功安装**activerecord-3.0.17**

成功安装**activeresource-3.0.17**

成功安装mail-2.2.19

成功安装**actionmailer-3.0.17**

成功安装**railties-3.0.17**

成功安装**rails-3.0.17**

成功安装hobo_support-1.3.0

成功安装hobo_fields-1.3.0

成功安装dryml-1.3.0

成功安装 will_paginate-3.0.3

成功安装hobo-1.3.0

如您所见，它安装了 rails 3.0.17 和许多与 rails 3.0.17 配合使用的旧版本 gem

我输入 rails -v 它仍然显示 3.2.8 （也是在从 shell 注销并重新登录之后）

我现在对此感到很困惑。我的导轨安装搞砸了吗？rvm 是否会同时自动管理更多的 rails 版本？这些 gem 二进制文件（例如 rails 命令本身）如何不覆盖自己？如果我输入 rails -v 因为我刚刚安装它，我不应该得到 rails 3.0.17 吗？这不应该发生在它附带的其他宝石上吗？

我希望有人能向我澄清..我厌倦了重新安装 ruby​​ 和 rails..有时感觉它是一种过于微妙的生态系统（年轻/不成熟），突然之间可能会崩溃......：\抱歉快速咆哮;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:04:22.393

这就是 Bundler 和应用程序的 Gemfile 应该发挥作用的地方。`rails -v`将显示您安装的最新版本；但是，您的 Gemfile 可以指定旧版本。只要您的 Gemfile 指定您的应用程序使用的版本，所有这些版本都可以愉快地并存。所以只要你的 Rails 应用程序的 gemfile 有这行

```
gem 'rails', '3.2.8' 
```

即使安装了多个版本的 Rails，你也应该没问题。用于`gem list`查看已安装 gem 的所有版本。

如果您愿意，可以使用 RVM gemsets 添加到 gem 隔离中。不过，您可能会发现它增加了复杂性。有关更多信息，请参阅[https://rvm.io/gemsets/](https://rvm.io/gemsets/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:48:18.660

正如农村城市所指出的，是您的 gemfile 和 gemfile.lock 指示加载了哪些 gem。Rvm gemsets 是 rails 2 的天赐之物，但它们不值得为 rails 3 带来麻烦。

如果您想使用 hobo 1.3，您将不得不将您的应用程序降级到 rails 3.0。或者，您可以使用来自 github 的 hobo 版本，该版本适用于 rails 3.2。我推荐后者。Hobo 1.4 非常稳定并且非常接近发布。

另一个需要注意的是，虽然 rails 会自动使用 gemfile.lock，但其他命令行应用程序可能不会。养成输入 ‛bundle exec rake‛ 而不仅仅是 rake 的习惯。

# java - 如何传递命令行参数？

> ID：12151949
> 
> 赞同：1
> 
> 时间：2012-08-28T02:15:26.527
> 
> 标签：java, command-line

当我尝试编译这个简单的程序时出现上述错误：

```
/* @author 
 * This program expects two command-line arguments
 * -- a person's first name and last name.
 * For example:
 * C:\Mywork> java Greetin Annabel Lee
 */
public class Greetin
{
    public static void main(String[] args)
    {
        String firstName = args[0];
        String lastName = args[1];
        System.out.println("Hello, " + firstName + " " + lastName);
        System.out.println("Congratulations on your second program!");
    }
} 
```

通过查看其他问题，我了解错误与数字有关`args == 0`并且`0`大于数字，但我不知道如何解决这种情况下的问题。有什么方法可以将错误也识别为由`void`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:44:06.260

我的猜测是您的程序没有提供任何参数。好的约定是确保用户输入预期的 args 数量，否则死亡。在你的情况下：

```
if( args.length != 2 ){
    System.out.println("usage: Greetin <firstName> <lastName>");
}
else{
    String firstName = args[0];
    String lastName = args[1];
    System.out.println("Hello, " + firstName + " " + lastName);
    System.out.println("Congratulations on your second program!");
} 
```

此外，请确保您`java Greetin Annabel Lee`在编译以正确设置参数后键入：。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:43:45.713

您可能没有将两个命令行参数传递给您的程序。该错误告诉您该数组`args`没有任何元素，因为索引`0`超出了有效范围。确保在运行程序时传递参数。

```
java Greetin Annabel Lee 
```

# windows - 现代版的WinDiff？

> ID：12151953
> 
> 赞同：6
> 
> 时间：2012-08-28T02:16:33.823
> 
> 标签：windows, vb6, diff

VB6 附带`WinDiff`.

是否有免费的现代版 WinDiff 可以忽略大小写？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T01:50:12.443

除了最新 SDK 中的 WinMerge 和 WinDiff，我还拥有 SourceGear 的免费 DiffMerge。

我使用 WinMerge（它也有一段时间没有改变——不要忽略空行；这会产生错误），尤其是它能够打开两个空白的可编辑页面并且您可以粘贴任何内容，例如从远程桌面到一台没有安装任何视觉差异的机器，并且差异会自动（或如果您愿意，可以手动）更新。

我喜欢 DiffMerge 的功能是它的差异显示，这似乎更好地迎合了虚假的不同换行符。

而且，为了回答您的问题，最新 SDK（或至少包含在 Visual Studio 2010 中的 SDK）中的 WinDiff、WinMerge 和 DiffMerge 都可以忽略大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T02:38:50.780

WinDiff 是 Windows SDK 的一部分，它仍然附带它。但是不，SDK 面向使用区分大小写的语言（C 和 C++）编写代码的程序员。

WinDiff 的源代码曾经是 SDK 示例的一部分。你仍然可以从[这个网页](http://www.grigsoft.com/download-windiff.htm)获得它，假设你正在破解 C 代码并且有一个旧的编译器。您需要调整 line.c、line_gethashcode() 和 line_compare() 函数。小写的线是最简单的。

嗯，这就是程序员的答案。海里还有很多其他的鱼，Beyond Compare 通常会得到很多点头。

# django - 在 Django 中，当我不知道在哪里设置跟踪时，如何触发 pdb 找出导致 404 的原因？

> ID：12151954
> 
> 赞同：1
> 
> 时间：2012-08-28T02:16:44.107
> 
> 标签：django, debugging

在我的 Django 应用程序中，我收到一个 404 Page Not Found 响应，看起来它是由我的一个自定义模板标签中的某些逻辑引起的——但我不知道是哪一个。

使用 Django Debug Toolbar 的 Request Vars 面板，我可以看到导致 404 的视图`go_back.utils._register_wrapped_view`- 这就是我知道它来自我的`go_back.utils`模板标签之一的方式。

不幸的是，因为模板标签需要被修饰并因此显示为`_registered_wrapped_view`，所以我不知道它是哪个标签，更不用说问题发生在标签代码的哪个位置了。（标签代码是一个特殊的实用程序，它可以`resolve`在几个地方处理 url 和调用，所以它并不明显。）

因此我不能使用正常的`import pdb; pdb.set_trace()`方法，因为我不知道在哪里设置跟踪。

那么，当 404 发生时，如何让 pdb 中断，以便我可以看到导致该点的堆栈跟踪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:51:41.560

尝试使用[Django Debug Toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)，它可以拦截重定向，适用于找不到添加断点的位置时。

在设置中确保你有

```
DEBUG_TOOLBAR_CONFIG = {'INTERCEPT_REDIRECTS': True} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T14:36:16.587

老问题，但是[django-pdb](https://github.com/tomchristie/django-pdb)有一个用于运行服务器的事后标志。它看起来维护得不好（2 年前是最后一次提交），但它是简单的中间件，更新它应该不会太难。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T04:06:28.223

我不确定你是否知道这一点：

您可以尝试放入`import pdb; pdb.set_trace()`您想要调试和开发服务器的功能。当该函数触发时，它将进入`pdb`shell，您可以调试代码。

# selenium - 使用 selenium webdriver 登录弹出窗口？

> ID：12151958
> 
> 赞同：12
> 
> 时间：2012-08-28T02:17:53.257
> 
> 标签：selenium, webdriver, selenium-webdriver

只有当我使用 Fire Fox 浏览器时才会出现弹出窗口，有没有办法解决这个问题？每次我使用 FF 作为浏览器时，我都必须输入用户名/密码。

目前，我每次运行测试时都会进入，这非常痛苦，但希望使其更加自动化......

我已经护目镜，在[这里](https://stackoverflow.com/questions/11522434/how-to-handle-login-popup-window-using-selenium-webdriver)和[这里](http://code.google.com/p/selenium/issues/detail?id=34)找到了两个链接，但无济于事

![在此处输入图像描述](../Images/603d12da3a8dde5c717f9b69f658223c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T10:03:35.080

```
http://username:password@xyz.com 
```

这对我有用（xyz.com 是网站名称）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T17:26:32.227

花了几个小时阅读后，我终于找到了效果很好的解决方案，我希望这对其他人也有帮助。- 享受！！

首先 - 请按照以下步骤操作：

```
1) Open the FireFox browser
2) Type the following `about:config`
3) Look for `network.http.phishy-userpass-length` if you don't find then create a new Integer key 
Create a new Integer key (right-click->New->Integer): `network.http.phishy-userpass-length` with value `255` 
```

第二：您需要使用以下内容创建一个Firefox驱动程序：

```
FirefoxProfile profile = new FirefoxProfile();
profile.SetPreference("network.http.phishy-userpass-length", 255);
profile.SetPreference("network.automatic-ntlm-auth.trusted-uris", "YOUR HOST ADDRESS HERE");
_driver = new FirefoxDriver(profile); 
```

如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-09T22:14:43.543

如果这是一个 windows 用户帐户和密码，那么您需要通过设置[启用集成 windows 登录](http://blogs.specopssoft.com/2014/06/configuring-chrome-and-firefox-for.html)

```
network.negotiate-auth.delegation-uris: MyIISServer.domain.com
network.automatic-ntlm-auth.trusted-uris: MyIISServer.domain.com
network.automatic-ntlm-auth.allow-proxies: True
network.negotiate-auth.allow-proxies: True 
```

在 WebDriver 启动的 Firefox 配置文件中。一旦您创建并保存了配置文件（当没有其他实例正在运行以选择配置文件时运行“Firefox -P”），您可以在代码中执行此操作：

```
File profileDir = new File("C:/wherever/SeleniumFirefoxProfile");
FirefoxProfile profile = new FirefoxProfile(profileDir);
profile.setEnableNativeEvents(true);
driver = new FirefoxDriver(profile); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T16:38:43.653

我不得不处理这些几次，但我的方法是使用 Selenium 之外的脚本。你在 Windows 上工作吗？

基本上你要做的是：

1）在加载页面之前，单击导致该对话框出现的 URL 等：

```
-- Launch an asynchronous script to handle the login 
```

2）然后加载页面，点击链接等

```
-- Selenium will block until your asynch script completes 
```

异步脚本：

```
-- Sleep for a few seconds
-- Activate the dialog
-- Send the username
-- Send a TAB
-- Send the password
-- Send a TAB
-- Send the Enter Key 
```

如果您在 Windows 上工作，我可以发布示例脚本来处理这个问题。我已经使用 Java 和 C# 完成了它，但我猜想无论您如何编写测试，基本上相同的事情都会起作用（除非您严格使用 FF 插件，在这种情况下这将不起作用）。

如果您想了解更多详情，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-15T06:06:45.927

您可以使用 FF 插件“autoauth”。下载此插件并通过以下方式创建 Firefox 实例：

```
FirefoxProfile firefoxProfile = new ProfilesIni().getProfile("default");
File pluginAutoAuth = new File("D:\\autoauth-2.1-fx+fn.xpi");
firefoxProfile.addExtension(pluginAutoAuth);
driver = new FirefoxDriver(firefoxProfile); 
```

我使用“autoauth-2.1-fx+fn.xpi”

# bash - 如何将 postgres 查询从远程计算机保存到文件

> ID：12151960
> 
> 赞同：3
> 
> 时间：2012-08-28T02:18:25.400
> 
> 标签：bash, postgresql

我有一个从 postgres 数据库输出一些数据的脚本：

```
#!/bin/bash

dbname="inventory"
username="postgres"
NOW=$(date +"%d-%m-%Y-%H%M%S")
OUTPUT="output.$NOW"

psql $dbname $username << EOF
\o | cat >> $OUTPUT
select count(*) from component;
select * from product where procode='AAA';
\q
\o
EOF 
```

如果我在本地机器上运行它，这很高兴将我需要的数据导出到一个文本文件中。

现在我想为 10 台远程计算机做同样的事情，并将输出存储在我运行脚本的机器上的一个文件中。我有以下代码将从远程机器上获取一些信息，但我还需要将上面的 postgres 数据添加到下面的 $FILE_OUT 中：

```
#!/bin/bash

NOW=$(date +"%d-%m-%Y-%H%M%S")
dbname="inventory"
username="postgres"

echo "Enter the file name"
read FILE_IN
FILE_OUT="invcheck.$NOW"

for i in $(cat $FILE_IN); do
echo $i >> $FILE_OUT

ssh user@$i "ps -efw | grep TRADINGTIMEPLUS /opt/jrms/jrms.ini" >> $FILE_OUT 
```

我试图将 postgres 代码放在一行中：

```
ssh rmsasi@hj$i "psql $dbname $username << EOF \o | cat >> $FILE_OUT select * from component where code='1000';\q;\o; EOF" 
```

但我收到错误，并且 $FILE_OUT 中不包含 postgres 数据

```
psql: warning: extra option o ignored
cat: from: No such file or directory
cat: component: No such file or directory
cat: where: No such file or directory
cat: code=1000: No such file or directory
bash: line 1: q: command not found
bash: line 1: o: command not found
bash: line 1: EOF: command not found 
```

我只是脚本新手，所以希望我只是缺少一些简单的东西。

在此先感谢您，如果有更好的方法来做我想要实现的目标，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:41:30.707

`psql`的`\`命令以换行符结束，而不是分号。有点疣IMO。

因此，您的命令中需要换行符。在 shell 的带引号的文字中允许使用文字换行符，因此您可以将它们插入命令中，但最好将您的 here-document 放在本地并`psql`通过 's stdin 将其发送到 ' `ssh`s stdin。不过，这仍会将输出留在远程机器上：

```
ssh rmsasi@hj$i "psql $dbname $username" << __EOF__
 \o | cat >> $FILE_OUT
SELECT * from component where code='1000';
\q
\o
__EOF__ 
```

最好从`psql`'s stdout 读取或重定向它，而不是使用`\o`命令；这样输出就会回到`ssh`会话中，您可以在本地重定向它：

```
echo "SELECT * from component where code='1000';" |\
ssh rmsasi@hj$i >> $FILE_OUT \
  "psql --quiet --no-align --no-readline --tuples-only -P footer=off --no-password $dbname $username" 
```

或者，您可以`psql`通过网络从其他机器进行连接。

由于您是`psql`从 bash 开车，您可能想知道您可以使用[co-process](https://stackoverflow.com/a/8305578/398670)交互式地这样做。您也不需要将输出重定向到这样的临时文件；只需禁止打印提示和标题（请参阅链接的答案），您就可以简单地从的标准输出中`psql`读取结果。`psql`

# math - 快速按位比较

> ID：12151963
> 
> 赞同：5
> 
> 时间：2012-08-28T02:18:43.167
> 
> 标签：math, language-agnostic, bitwise-operators

我有两个字节，它们由两个 4 位数字打包在一起组成。我需要知道第一个字节中的两个数字中的任何一个是否与第二个字节中的任何一个数字匹配。零被认为是空的，不应该匹配自己。

显然，我可以通过拆开数字并一一比较来做到这一点：

```
a = 0b10100101;
b = 0b01011111; // should have a match because 0101 is in both

a1 = a>>4; a2 = a&15;
b1 = b>>4; b2 = b&15;

return (a1 != 0 && (a1 == b1 || a1 == b2)) || (a2 != 0 && (a2 == b1 || a2 == b2));

//     ( true   && (  false  ||   false )) || ( true   && (  true   ||   false ))
//     ( true   &&         false         ) || ( true   &&         true          )
//            false                        ||         true
//                                        TRUE 
```

但是我只是想知道是否有人知道更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:46:50.213

预先计算答案并将其存储在查找表中。表的关键是 16 位`((a<<8)+b)`。它只需要 1 位输出（使用 8K），但为简单起见，您可以使用 8 位（使用 64K）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:44:47.433

一种更简洁的方法是摆脱那个难以解析的表达式并使代码更具可读性。

```
def sameNybble (a, b):
    # Get high and low nybbles.

    ahi = (a >> 4) & 15 ; alo = a & 15;
    bhi = (b >> 4) & 15 ; blo = b & 15;

    # Only check ahi if non-zero, then check against bhi/blo

    if ahi != 0:
        if ahi == bhi or ahi == blo:
            return true

    # Only check alo if non-zero, then check against bhi/blo

    if alo != 0:
        if alo == bhi or alo == blo:
            return true

    # No match

    return false 
```

任何体面的优化编译器基本上都会为您提供相同的底层代码，因此有时优化可读性会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:37:15.797

这是 C++ 中的一个解决方案，它更简洁，速度提高了 1.6 倍。它生成的代码对具有深管道和复杂分支预测逻辑的高端微处理器更友好。它生成真/假，没有比较/分支，也没有表查找（没有数据缓存未命中）。

一个半字节有 4 位，因此保存 16 个值之一，我将每个输入中的两个半字节映射到一个无符号值（至少有 16 位），位设置在相应的位位置，指示两个半字节值都存在于输入。然后我`AND`两个位集，从而计算集合的交集。最后一个`AND`丢弃与 nibble 的任何匹配项`0`。

```
inline unsigned set( unsigned char X ) {
    return (1 << (X & 15)) | (1 << (X >> 4));
}

// Return true if a nibble in 'A' matches a non-null nibble in 'B'
inline bool match( unsigned char A, unsigned char B ) {
    return set( A ) & set( B ) & ~set( 0 );
} 
```

我已经在 Intel Xeon X5570 @ 2.93GHz 上对其进行了计时，它比问题中的原始速度快 1.6 倍。这是我用来计时的代码：

```
#include <time.h>
#include <iostream>

bool original( unsigned char A, unsigned char B ) {
    unsigned char a1 = A >> 4;
    unsigned char a2 = A & 15;
    unsigned char b1 = B >> 4;
    unsigned char b2 = B & 15;

    return (a1 != 0 && (a1 == b1 || a1 == b2)) || (a2 != 0 && (a2 == b1 || a2 == b2));
}

static inline unsigned set( unsigned char X ) {
    return (1 << (X & 15)) | (1 << ((X >> 4)&15));
}

bool faster( unsigned char A, unsigned char B ) {
    return set( A ) & set( B ) & ~set( 0 );
}

class Timer {
    size_t _time;
    size_t & _elapsed;
    size_t nsec() {
        timespec ts;
        clock_gettime( CLOCK_REALTIME, &ts );
        return ts.tv_sec * 1000 * 1000 * 1000 + ts.tv_nsec;
    }
public:
    Timer(size_t & elapsed) : _time(nsec()), _elapsed(elapsed) {}
    ~Timer() { _elapsed = nsec() - _time; }
};

int main()
{
    size_t original_nsec, faster_nsec;
    const size_t iterations = 200000000ULL;
    size_t count = 0;

    { Timer t(original_nsec);
        for(size_t i=0; i < iterations; ++i) {
            count += original( 0xA5 , i & 0xFF );
        }
    }

    { Timer t(faster_nsec);
        for(size_t i=0; i < iterations; ++i) {
            count += faster( 0xA5 , i & 0xFF );
        }
    }

    std::cout << double(original_nsec) / double(faster_nsec)
              << "x faster" << std::endl;

    return count > 0 ? 0 : 1;
} 
```

这是输出：

```
$ g++ -o match -O3 match.cpp -lrt && ./match
1.61564x faster
$ 
```

# php - PHP Swift Mailer 附加 FPDF 问题

> ID：12151967
> 
> 赞同：1
> 
> 时间：2012-08-28T02:19:36.583
> 
> 标签：php, email, attachment, fpdf, swiftmailer

我在尝试让 SwiftMailer 附加我用 FPDF 创建的文件时遇到了一些问题。基本上我有一个名为 createPDF.php 的页面，它是根据 URL 中的 ID 号动态生成的。此页面设置为使用 $pdf->Output("filename.pdf",I); 内联输出 PDF。我想要做的是能够通过调用我的 createPDF.php?id=xxx 链接从另一个页面使用 SwiftMailer 将此文件附加到电子邮件中。

从我要从中发送电子邮件的 PHP 页面，一切正常，除了附件。它附加了一些东西，但不是我想要的，并且在我本地机器上的 PDF 查看器中无法查看。附加文件的特定行是：

->attach(Swift_Attachment::fromPath('createPDF.php?id=xxxx'))

这不起作用，但可以肯定的是，如果不通过 FPDF 将文件保存在我的 Web 服务器上，它肯定是可能的。

这可能吗？如果是这样，怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:24:34.063

这里的问题是 Swiftmailer 获取文件内容，它不执行您的 php 文件。因此，您的 PDF 内容将是 createPDF.php 中的代码。

为什么你不能先保护文件？您应该能够保护它并在发送电子邮件时将其删除。

```
 <?php 
 $id = "xxx";
 $fileName = "tmp/".sha1(time()+mt_rand(0,99999999));
 include "createPDF.php"; //saves it to $fileName
 ->attach(Swift_Attachment::fromFile( $fileName )->setFilename('blaha.pdf'));
 unlink($fileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:51:17.803

好的，所以我刚刚想通了。

基本上，我用我的大部分 createPDF.php 文件作为函数创建了一个新的 PHP 文件，并简单地将两个变量作为我的 $id 和一个 $output 变量传递给函数。$output 只是 FPDF 输出文件的方式 - 内联等...然后我将函数设置为返回 FPDF 的输出。在我的 createPDF.php 文件中，我只需调用传入 $id 和“I”作为变量的函数，以便它在浏览器中显示正确的 PDF 内联。

在我的 sendEmail 函数中，我只需传入 $id 和 'S' 并将其设置为变量 $content，我将其作为附件传递给 SwiftMailer。

效果很好。

谢谢你的帮助！

# c# - Log4net 外部配置 (C#)

> ID：12151968
> 
> 赞同：0
> 
> 时间：2012-08-28T02:19:38.077
> 
> 标签：c#, log4net

我不知道是否可以使用 log4net 执行以下操作。

我有一个服务，它在启动时从数据库中读取其所有配置。在配置中有日志配置，如“日志级别”和“日志文件位置”。

要求是写所有的日志，包括从服务启动到从数据库读取的日志文件位置的日志（当然是连接数据库有问题的时候）。

一位同事编写了一个非常简单的日志类来满足这个要求，但我真的很想使用 log4net 来使用 log4net 已经提供的几个功能。

你知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:28:59.587

最简单的 hack 是在启动时从数据库中读取现有配置，然后生成与 log4net 格式匹配的外部配置文件。

然后你可以让 log4net 直接读取这个文件，按照本文中的“直接读取文件”部分，

[http://logging.apache.org/log4net/release/manual/configuration.html](http://logging.apache.org/log4net/release/manual/configuration.html)

# node.js - NodeJS：将通道添加到 Socket.IO 服务器而不重新启动

> ID：12151969
> 
> 赞同：1
> 
> 时间：2012-08-28T02:19:47.027
> 
> 标签：node.js, websocket, socket.io

**编辑：**这个问题是由于对`EventMachine`.

使用 Socket.IO 接口，我可以使用“通道”进行多路连接。如何启动 Socket.IO 服务器，但无需停止/启动服务器即可添加频道？

```
var io = require('socket.io').listen(80);

var chat = io
  .of('/chat')
  .on('connection', function (socket) {
    socket.emit('a message', {
        that: 'only'
      , '/chat': 'will get'
    });
    chat.emit('a message', {
        everyone: 'in'
      , '/chat': 'will get'
    });
  });

var news = io
  .of('/news')
  .on('connection', function (socket) {
    socket.emit('item', { news: 'item' });
  }); 
```

这个来自 Socket.IO 的代码示例显示了启动服务器，然后创建两个名为`chat`和的通道`news`。如果我用 启动服务器`chat`，但想在`news`没有任何中断的情况下添加，我该`chat`怎么办？我将如何添加频道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:52:08.193

您无需重新启动服务器即可添加命名空间。刚开始使用新的命名空间。在您的示例中，两个命名空间 (`chat`和`news`) 在服务器启动后创建。

# php - 帖子和评论的数据库设计

> ID：12151970
> 
> 赞同：6
> 
> 时间：2012-08-28T02:19:58.400
> 
> 标签：php, mysql, redbean

如果一个帖子有很多评论，并且评论与帖子基本相同（例如，它们有标题、图片和音频等），我应该创建两个表格还是只创建一个？

例如，如果我只使用一个表，我可以有一个 parent_id 列，所以如果它不是对任何内容的回复，它将为空，否则，它将具有父帖子的 id。另一方面，我可以创建一个帖子表和一个评论表。评论也可以回复其他评论，因此这可能会很快变得混乱。

```
 *Post*
    id
    title
    content
    image
    audio
    parent_id 
```

或者，

```
*Post*                        *Comments*
id                             id
title                          title
content                        content
image                          author_id 
audio                          post_id
author_id                      image
                               audio 
```

第二个选项将允许创建索引。事实上，我什至不必添加 author_id 或 post_id 如果我从一开始就使用索引，我会吗？

你对这个 SO 有什么看法？哪个效率更高？我正在考虑为此使用redbeanphp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:24:06.283

第二种选择会更好。显示留言板时，您不关心评论，并且通过索引的父帖子 ID 列查找它们很快。帖子和评论可能会有不同的字段，因此将它们分开是正确的。第一个选项的父 id 索引可以正常工作，但从概念上讲，它很混乱，您基本上是在创建一个索引以用于一半或与帖子相关的许多评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T04:34:42.483

作为[数据库设计](/questions/tagged/database-design "显示标记为“数据库设计”的问题")中的规则：表称为实体，因此应用程序中的每个**[实体](http://en.wikipedia.org/wiki/Entity)**都应通过表分隔和演示。在这里，虽然您认为帖子和评论每个都有相同类型的数据，但最终它们每个都是一个单独的实体，因此它们应该分开在两个表中。此行为不是个人意见。这是导致更顺利的应用程序开发的基本规则。

# authentication - SAP Business Objects 自定义身份验证

> ID：12151974
> 
> 赞同：2
> 
> 时间：2012-08-28T02:20:20.810
> 
> 标签：authentication, sap, business-objects

我们目前正在评估 SAP Business Objects XI 3 的前端报告解决方案，但我不高兴我们需要创建一组新的登录名，这些登录名将独立于我们现有的网站进行管理。我们有一个身份验证 API，我们的各种应用程序都连接到该 API，因此我们有效地获得了单点登录和单帐户管理。

有没有办法为 SAP BOE 3 编写自定义身份验证插件？我在谷歌上搜索信息，却空手而归。文档链接也很方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:27:45.490

我们针对这个问题使用的解决方案是在 HR 空间中内置一个单独的密码管理页面，它将所有用户的密码更改为相同的内容。因此，有一个用户名输入并通过更改用户的全局密码，然后运行并更改所需的所有不同 SAP 密码。

不是您正在寻找的答案，但它在某种程度上是一种解决方案。

# javascript - FF Firefox 识别错误。但是怎么做？

> ID：12151978
> 
> 赞同：0
> 
> 时间：2012-08-28T02:21:09.153
> 
> 标签：javascript, html, firefox, firebug

我在[http://www.scriptiny.com/qa/2637/why-is-tinybox2-so-slow-at-my-website?show=2639#a2639](http://www.scriptiny.com/qa/2637/why-is-tinybox2-so-slow-at-my-website?show=2639#a2639)发帖，问为什么 TinyBox2 在[http://这么慢chesstao.com/about.php](http://chesstao.com/about.php)

作者写道：...话虽如此，如果您在单击项目时查看 Firebug 中的 net 选项卡，您会注意到每次加载的几个请求永远不会完成，并且在相对较慢的页面顶部有四个元素 404 ，所有这些都会减慢操作速度。我将首先清理该页面并解决我提到的问题。如果您仍有问题，请告诉我。

好吧，我是游戏。我启动 FF 并转到 Tools / Web Developer / Firebug 并选择 Net 选项卡。而且是空白！作者是否告诉我 HTML 有 404 错误（不太可能）？或者 javascripts 有 404 错误？

我想“注意到每次加载的几个请求永远不会完成”识别并修复它们。如何识别这些请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:23:06.113

您必须在 firebug 中打开请求选项卡的情况下重新加载页面，才能看到进来的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:24:29.170

你在加载过程的哪个阶段打开了firebug？如果您在页面加载后打开它，您将不会在“网络”选项卡中看到任何内容。

尝试刷新浏览器页面，看看这是否为您提供了所需的输出。

# php - 在 SQL 字段中有一个数组。如何系统地展示它？

> ID：12151979
> 
> 赞同：1
> 
> 时间：2012-08-28T02:21:15.283
> 
> 标签：php, mysql, sql, codeigniter

我在数据馈送中有一个字段，其中包含一些用逗号分隔的值。对于一条记录，值为：

```
A06,C05,C06,C15,C18,C19,C21,C22,E05,E22,G11,J02,J07,L04,L07,M01,M05,N03,N07,N10,N11,N12,N18,N19,N20,N24,O02,O03,O04,O06,O09,O14,O15,O16,O20,O21,O31,Q01,Q04,Q08,R07,S08,T08,T12,T23,T32,U01,U03,U04,U06,U13,W09,W11,W16,W19,W30,W45,X02,X03,X12,Z07 
```

我有一个单独的表格，其中包含有关每个代码含义的一些描述。当我查询主表并获取此字段名称作为值时，我可以使用explode 将其放入数组并使用foreach 循环输出每个值。

问题是，我想显示存储在另一个表中的描述。遍历此以在列表中显示这些值的正确方法是什么？

例如，C21 的意思是“封闭社区”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:24:57.553

您可以为此使用**[FIND_IN_SET()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)**函数。

例如你有这样的记录

```
Orders Table
------------------------------------
OrderID     |     attachedCompanyIDs
------------------------------------
   1                     1,2,3               -- comma separated values
   2                     2,4 
```

和

```
Company Table
--------------------------------------
CompanyID      |        name
--------------------------------------
    1                 Company 1
    2                 Another Company
    3                 StackOverflow
    4                 Nothing 
```

使用功能

```
SELECT name 
FROM orders, company
WHERE orderID = 1 AND FIND_IN_SET(companyID, attachedCompanyIDs) 
```

将导致

```
name
---------------
Company 1
Another Company
StackOverflow 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T02:33:02.750

由于您已标记 codeigniter，您可以使用内置`Active Record's`方法`$this->db->where_in();`来获取描述。例如考虑下面的代码

```
$codes = array('A06', 'C05', 'C06');
$this->db->where_in('description', $codes);
// 产生：WHERE 代码 IN ('A06', 'C05', 'C06')

```

有关参考[Active Record 类](http://codeigniter.com/user_guide/database/active_record.html#select)`Active Records`的更多信息`Codeigniter`

有关如何`mysql` `WHERE IN`工作的更多信息，请参阅[教程](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T04:18:39.767

只是为了遵循书籍，在 SQL 语言中执行此操作的最佳方法是使用关系。

为了理解这一点，我建议您阅读这篇简单的论文[http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/](http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/) 或许还有这个[http://www.informit.com /articles/article.aspx?p=30875&seqNum=5](http://www.informit.com/articles/article.aspx?p=30875&seqNum=5)选择数据，或者自己在网上搜索，我建议你自己试试例子。出于安全性和许多其他原因，SQL 关系是好的和必要的。

# c++ - 如果 char 是空格，则在 C++ 中将其替换为“+”

> ID：12151981
> 
> 赞同：1
> 
> 时间：2012-08-28T02:21:40.557
> 
> 标签：c++, char

我不知道我的代码有什么问题：

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
    string test;
    cin>>test;
    if (test[4] == ' ')
    {
        test[4] = '+';
    }
    cout<<test<<endl;
    system("PAUSE"); 
    return 0;
} 
```

我基本上是在要求用户给我一个字符串（字符串将是“星际迷航”），然后，我希望将字符串替换为“+”。出于某种原因，我每次尝试都会得到这个。但是，当我运行它时，我会弹出一个对话框并显示“调试断言失败”和“表达式：字符串下标超出范围”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T03:11:32.143

我通常会避免自己编写循环，而是尽可能使用算法：

```
std::getline(std::cin, test);

std::replace(test.begin(), test.end(), ' ', '+'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T02:24:13.443

使用`getline(cin,test)`它不会跳过空格。另外，请使用 cin.get() 而不是`System("Pause")`.

像这样的东西会更好。

```
for(int i = 0; i < test.length(); i++) {
    if(test[i] == ' ')
        test[i] = '+';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T02:25:34.330

`<<`将读取一个字符串，在空格处停止，因此它会在第一个空格处切断您的示例字符串。在您的示例中，`test`将仅包含`"star"`，而不包含`"star trek"`。因此索引*4*无效。

用于`getline`读取整个输入行。

您还应该检查输入长度：

```
getline(cin, test);

if (test.length() > 4)
    test[4] = '+'; 
```

# sql-server - 删除 SQL Server 数据库：处理并发连接

> ID：12151983
> 
> 赞同：0
> 
> 时间：2012-08-28T02:21:53.803
> 
> 标签：sql-server, database, connection

在我的集成测试期间，我尝试使用以下方法删除数据库：

```
USE master
ALTER DATABASE TestXyz SET SINGLE_USER WITH ROLLBACK IMMEDIATE
DROP DATABASE TestXyz 
```

然而，很多时候（考虑到测试的数量）应用程序后台进程之一设法在`SET SINGLE_USER`和之间`DROP DATABASE`，这使得它成为数据库的单一用户并打破`DROP`.

我不能使用`RESTRICTED_USER`，因为应用程序当前有`db_owner`权限（由于大量遗留代码，其中一些需要它，所以它不会仅仅为了测试而改变）。

我不能使用`OFFLINE`，因为它不会从磁盘中删除数据库文件。

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:17:58.007

好的计划 b... 迭代一滴连接并重命名数据库以使其远离应用程序域。然后放下它。为了处理通过连接的迭代，重命名上的 try catch 将有望允许它运行，直到它能够断开连接。下面的示例代码创建了一个 DB TestDB；在 while 循环中将其重命名为 testdb2，然后在循环成功后将其删除。

```
-- Setup a scratch Db for testing
create database testdb
go
use testdb

while exists (select name from sys.databases where name = 'testdb')
Begin
  DECLARE @DbName nvarchar(50) SET @DbName = N'testdb'

    DECLARE @EXECSQL varchar(max) SET @EXECSQL = ''

    SELECT @EXECSQL = @EXECSQL + 'Kill ' + Convert(varchar, SPId) + ';' 
    FROM MASTER..SysProcesses 
    WHERE DBId = DB_ID(@DbName) AND SPId <> @@SPId

    EXEC(@EXECSQL)

    Begin try
        EXEC sp_renamedb 'testdb', 'testdb2'
    end try
    Begin Catch
    print 'failed to rename'
    End Catch
end

drop database testdb2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:06:05.903

我终于使用以下方法解决了它：

```
ALTER LOGIN MyAppUser DISABLE
ALTER DATABASE TestXyz SET SINGLE_USER WITH ROLLBACK IMMEDIATE
DROP DATABASE TestXyz
ALTER LOGIN MyAppUser ENABLE 
```

由于我可以使用不同的登录来测试数据库管理过程，这允许我阻止应用程序访问数据库。（这里的原因`SINGLE_USER`只是为了踢已经连接的用户。我没有检查是否`ALTER LOGIN`已经这样做了，但我认为它没有）。

另一种选择是在删除`MyAppUser`之前从数据库中删除它，但是我现在才想到它并且没有代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:33:15.147

Try this once:

1.  Stop application services and run your query.
2.  Stop application services and restart `SQL Server Services` and then run your query.

# python - Django 测试：DatabaseError：ManyToManyField 没有这样的表

> ID：12151988
> 
> 赞同：6
> 
> 时间：2012-08-28T02:23:01.177
> 
> 标签：python, django, unit-testing, manytomanyfield

我已经为非常简单的博客应用程序编写了几个测试，但是当我运行测试时，多对多关系失败了：`./manage.py test myblog`

```
DatabaseError: no such table: myblog_post_tag 
```

然而，当我这样做时`./manage.py sql myblog`：

```
BEGIN;
CREATE TABLE "myblog_tag" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(50) NOT NULL
)
;
CREATE TABLE "myblog_post_tag" (
    "id" integer NOT NULL PRIMARY KEY,
    "post_id" integer NOT NULL,
    "tag_id" integer NOT NULL REFERENCES "myblog_tag" ("id"),
    UNIQUE ("post_id", "tag_id")
)
;
CREATE TABLE "myblog_post" (
    "id" integer NOT NULL PRIMARY KEY,
    "title" varchar(200) NOT NULL,
    "pub_date" datetime NOT NULL,
    "content" text NOT NULL
)
;
COMMIT; 
```

它确实创建了一个表，但在测试时却没有这样做？任何帮助表示赞赏。这是我的测试：

```
class TagModelTest(TestCase):

    def test_create_tags_for_posts(self):
        # tests tagging posts, postodd will have tags 1 & 3, posteven will be 2 & 4
        postodd = Post(
            title="testing odd tags",
            pub_date=timezone.now(),
            content='''hello everybody, we are testing some tagging
                functionality here. This post should have odd tags.''',
        )
        posteven = Post(
            title="test even tags",
            pub_date=timezone.now(),
            content ='''hello everybody, we are testing some tagging
                functionality here. This post should have even tags.''',
        )
        #save them to db
        postodd.save()
        posteven.save()

        # create the  tags
        tag1 = Tag(name="1")
        tag2 = Tag(name="2")
        tag3 = Tag(name="3")
        tag4 = Tag(name="4")

        # save all tags to db
        tag1.save()
        tag2.save()
        tag3.save()
        tag4.save()

        # create the many2many relationship
        postodd.tag.add(tag1) 
```

如果需要，还有我的 models.py：

```
from django.db import models

class Tag(models.Model):
    name = models.CharField(max_length=50)

    def __unicode__(self):
        return self.name

class Post(models.Model):
    tag = models.ManyToManyField(Tag)
    title = models.CharField(max_length=200)
    pub_date = models.DateTimeField(verbose_name="Date published")
    content = models.TextField()

    def __unicode__(self):
        return self.title 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:50:51.497

`./manage.py sql myblog`不执行 SQL，它只是输出如果你运行它*会*`syncdb`执行的内容。

在这种情况下，您的数据库中似乎缺少该表。

如果这是对现有应用程序进行修改的结果；例如，您刚刚在模型中添加了一个新字段；然后运行`syncdb`不会影响对数据库的更改。`syncdb`不执行任何破坏性操作（如添加或删除表或列）。

在这种情况下，您可以手动运行查询以添加列；或删除并重新创建您的表`syncdb`。

由于这是一个常见问题，因此大多数人使用数据迁移工具[`south`](http://south.readthedocs.org/en/0.7.6/index.html)来为您处理这些更改。South 将智能地管理这些小变化。

# php - PHP & MySQL：在不使用 MySQLi 和/或 PDO 的情况下创建自己的 Prepared 语句

> ID：12151993
> 
> 赞同：2
> 
> 时间：2012-08-28T02:23:49.247
> 
> 标签：php, mysql, pdo, mysqli, prepared-statement

就像我的标题一样，我想知道如何在不使用 MySQLi 或 PDO 的情况下创建准备好的语句。重点是学习创造的过程和它的安全性。我在这方面几乎有“零知识”。尝试用谷歌搜索这个话题，但似乎我的谷歌搜索技能让我失望了。我从某些网站上盲目地了解到准备好的声明非常安全，但我看不出它安全的实际意义。你们中的一些人可以澄清为什么会这样吗？那将是一个很大的帮助。我有自己的假设，即创建一个准备好的语句只是创建一个接收字符串并用 str_replace 替换所有特殊字符的函数，例如：

```
$org_sql = 'SELECT * FROM `my_table` WHERE `table_id`=?';
$prepared_sql = replaceQueryString($org_sql, 10);

function replaceQueryString($str, $replace) {
    // Do the replace where ? will be replaced by $replace here.
    return $str;
} 
```

但我想知道这是否会提高安全级别，这对我来说看起来很简单。

如果您不想浪费时间回答这个问题，只需向我指出资源可用的地方。所以总结一下。

1.  如何创建 MySQL 准备好的语句？
2.  为什么它是安全的？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T02:35:32.820

准备好的语句是由数据库而不是您的代码创建和执行的。要自己实现它们，您必须实现 MySQL 协议并直接与数据库通信。

以下是准备好的语句的工作原理：

*   您将带有占位符的查询发送到 RDBMS
*   RDBMS 存储查询并预先计算执行计划
*   您分别告诉数据库执行语句，并传递值以绑定到其参数
*   RDBMS 使用这些值执行其存储的计划

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T02:35:33.700

有两种类型的预准备语句，模拟预准备语句和本机预准备语句。您正在做的是模拟准备好的语句。

* * *

> 1.如何创建MySQL准备好的语句？

在 php 级别，您只能通过将占位符替换为安全值来模拟准备好的语句。（例如：引用字符串，转义特殊字符，等等......）

> 2.为什么安全？

因为准备好的语句阻止了 sql 注入。

* * *

***PS：*** PDO 有[PDO::ATTR_EMULATE_PREPARES](http://www.php.net/manual/en/pdo.setattribute.php)选项，它启用或禁用准备语句的模拟。

# c - 子类化控件时如何处理控件的通知？比如EN_CHANGE？

> ID：12151994
> 
> 赞同：3
> 
> 时间：2012-08-28T02:23:51.413
> 
> 标签：c, winapi, user-interface

通知由控件发送到其父级。当我使用 子类化控件时`SetWindowSubclass`，如何处理通知？我不想在父窗口进程中处理它们。我可以在子类 proc 中做些什么吗？

如果我将编辑控件子类化，如何处理`EN_CHANGE`子类中的通知？

**更新**

这是子类过程：

```
LRESULT CALLBACK MyEditWindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam, UINT_PTR uIdSubclass, DWORD_PTR dwRefData)
{
  switch (uMsg)
  {
  default:
    return DefSubclassProc(hWnd, uMsg, wParam, lParam);
  }
} 
```

我用

```
SetWindowSubclass(GetDlgItem(hWnd, ID_MYEDIT), MyEditWindowProc, 0, 0); 
```

子类化编辑控件。

但是我应该处理哪条消息？当然不是`WM_NOTIFY`因为它是由父母处理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T03:01:11.137

> 如果我将编辑控件子类化，如何处理子类中的 EN_CHANGE 通知？

简短的回答：你不能。如果将编辑子类化，则只能看到发送*给*它的消息；您无法收听或拦截它已经发送的消息*（*尽管您可以添加其他传出消息）。

但是，如果您确实需要这样做，另一种技术可能是创建一个包含编辑的中间窗口*，*以便原始父对话框将您的包装器作为子级，而您的包装器将编辑作为子级。现在，您的包装器可以拦截和过滤任何方向的消息。

它必须小心手动转发所有相关消息，并处理调整大小和其他内务处理问题；您可以通过子类化获得一堆“免费”的东西，但是在包装时必须明确处理它。此外，由于鼠标/键盘输入仍将转到内部控件；如果您需要对此进行监听，那么*除了*包装之外，还需要进行子类化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T02:58:46.457

据我所知，仅使用 Win32 API 没有直接的解决方案。子类化允许您处理**发送到**控件的消息，而不是**由**控件发送的消息。Win32 通知由控件直接发送给父级，我认为您无法更改此行为。

[MFC 通过一个称为消息反射](http://msdn.microsoft.com/en-us/library/eeah46xd%28v=VS.80%29.aspx)的功能执行类似于您想要的操作——消息仍被发送到父窗口，但父窗口在子窗口中查找“反射”处理程序并手动调用这些处理程序。

您可以自己编写类似于 MFC 反射的东西，但这需要一些努力，所以如果有更简单的替代方案，您应该使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T03:00:31.853

EN_CHANGE 等总是发送到父窗口。您无法在子类控件中处理它们，因为它们没有发送到控件，而是发送到父控件。

如果您正在寻找一种方法来创建一个独立的编辑控件子类，而不必向父窗口过程添加代码，并且您想要处理这些通知消息，那么唯一的方法就是子类父窗口也是如此。

# java - Tomcat 线程池已满，但全部 RUNNABLE

> ID：12151995
> 
> 赞同：1
> 
> 时间：2012-08-28T02:23:56.423
> 
> 标签：java, multithreading, tomcat, ajp

我有一组工作线程，我在其中为长时间运行的作业运行匿名类可运行文件。这些线程在响应返回后持续很长时间，但似乎创建这些 Runnables 的线程仍然存在，并且考虑在使用中。

为了实现的缘故，这里是代码......用更少的词。

```
@Path("/myawesomeApp")
public class TheThing {
    static final TheWorkerPool pool = new TheWorkerPool();
    static final HashMap<Integer,String> map = new ConcurrentHashMap<Integer,String>();
    static int mapIdx = 0;

    @Context
    HttpServletContext context;

    @POST
    Integer doStuff() {
        Integer thisVariable = mapIdx++;     
        pool.enqueue(new Runnable() {
            public void run() {
                map.put(thisVariable, OtherStuff.dothings());
            }
        });
    }
} 
```

他们每个人都坚持以下几点：

```
 java.lang.Thread.State: RUNNABLE
    at org.apache.tomcat.jni.Socket.recvbb(Native Method)
    at org.apache.coyote.ajp.AjpAprProcessor.readt(AjpAprProcessor.java:1049)
    at org.apache.coyote.ajp.AjpAprProcessor.readMessage(AjpAprProcessor.java:1140)
    at org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:368)
    at org.apache.coyote.ajp.AjpAprProtocol$AjpConnectionHandler.process(AjpAprProtocol.java:378)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1509)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:08:14.333

我猜在这种情况下根本不会调用 TheThing 的代码。请参阅[AjpAprProcessor 的源代码](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.tomcat/tomcat-coyote/7.0.0/org/apache/coyote/ajp/AjpAprProcessor.java#364)。它停留在读取一些必需的 http 请求的标头上。

因此检查 ajp 配置并确保客户端正确发送 http 请求。

尝试在 apache 端启用日志记录。

# php - 为什么 1234 == '1234 test' 评估为真？

> ID：12151997
> 
> 赞同：80
> 
> 时间：2012-08-28T02:24:09.433
> 
> 标签：php, equals, equality

> **可能重复：**
> [php == vs === 运算符](https://stackoverflow.com/questions/589549/php-vs-operator)

对于我确定的人来说，这是一个简单的答案。有人可以解释为什么这个表达式的计算结果为真吗？

```
(1234 == '1234 test') 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-08-28T02:26:10.277

因为您使用的是 == （相似性）运算符，而 PHP 将字符串强制转换为 int。

要解决它，请使用 ===（相等）运算符，它不仅检查值是否相同，还检查数据类型是否相同，因此“123”字符串和 123 int 将不被视为相等。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-08-28T02:59:02.353

在 PHP（和 JavaScript——行为略有不同）中，比较运算符的`==`工作方式与在 C 或 Java 等强类型语言中的工作方式不同。`===`运算符具有您最可能期望的行为。下面是应用于 PHP 的两个比较运算符的细分。

## ==

该运算符被正式称为“平等”运算符，尽管这并不真正符合“平等”一词的正常定义。它执行所谓的*类型杂耍比较*。如果两个操作数的类型不匹配（在您的示例中，`1234`是整数和`1234 test`字符串），PHP 将*隐式地*将操作数转换为彼此的类型并测试新类型值的相等性，如下所示：

```
<?php
var_dump( (int) 'hi' ); // int(0)
var_dump( (string) 0 ); //string("0")
var_dump( 'hi' ==  0 ); // bool(true)

var_dump( (int) '1hi' ); // int(1)
var_dump( 1 == '1hi' ); // bool(true) 
```

它有一个对应的（类型杂耍）不等式运算符，`!=`.

## ===

该`===`运算符称为“相同”运算符，对两个操作数的值*和*类型进行严格检查，并且不执行任何隐式强制转换。因此，`"0"`不`=== 0`和`"1234 test"`不`=== 1234`。

```
<?php
var_dump( '1234 test' === 1234 ); // bool(false) 
```

它有一个对应的（严格的）不等式运算符，`!==`。

### 怪癖

请注意，`===`操作员对某些人认为奇怪的对象有行为。假设我们有`class A`和 变量`$a`，`$b`定义如下：

```
<?php
class A { 
  public $property = 'default value';
}
$a = new A();
$b = new A(); 
```

您可能期望`var_dump($a === $b);`输出`bool(true)`. 它实际上会返回 false。在对象上使用时，运算符实际上检查两个操作数是否是对*同一对象*的引用。在这种`==`情况下，运算符通过检查对象的属性来工作，因此`$a == $b`.

### PHP 手册链接

*   [比较运算符](http://www.php.net/manual/en/language.operators.comparison.php)
*   [类型杂耍](http://www.php.net/manual/en/language.types.type-juggling.php)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-08-28T02:26:31.417

将字符串转换为整数时，直到第一个非数字字符的任何数字字符都将成为数字。这样`'1234 test'`就变成`1234`了，因为空格不是数字字符。

因此`1234 == '1234 test'`

如果要强制进行字符串比较，则应强制转换为字符串：

```
''.(1234) == '1234 test' // implicit
(string) 1234 == '1234 test' // explicit
strval(1234) == '1234 test' // procedural 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-28T04:50:02.490

您正在松散地比较两种不同类型的数据（整数和字符串）。PHP 有一个非常详细的图表，说明了在使用松散比较二元运算符 (==) 时比较在其系统中的工作方式：

[http://php.net/manual/en/types.comparisons.php](http://php.net/manual/en/types.comparisons.php)

如果要确保类型也同步，即它们都是整数或字符串，请使用强类型比较运算符 (===)。

请注意，当使用此运算符时，这也将返回 false：

```
1234 === '1234' 
```

如果在比较时不确定自己的类型，可以将强类型比较与 PHP 类型转换结合使用：

```
$a = 1234;
$b = '1234';

if ($a === $b) { }            // Will not fire, as it is false
if ((int)$a === (int)$b) { }  // Will fire, as it is true 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-28T02:26:41.507

双等号将告诉 php 从字符串中解析一个 int。该字符串将计算为整数 1234。使用三等号“===”进行精确比较。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-28T02:29:14.827

如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较

```
var_dump(0 == "a"); // 0 == 0 -> true 
```