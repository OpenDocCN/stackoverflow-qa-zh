# StackOverflow 问答 11575000-11575999

# google-drive-api - Google Drive 访问经过身份验证的用户数据

> ID：11575003
> 
> 赞同：0
> 
> 时间：2012-07-20T07:44:12.500
> 
> 标签：google-drive-api

我有一个场景，我需要从经过身份验证的用户的驱动器访问数据。在我的网站中，一旦用户单击该链接，我就有一个**连接到 Google Drive**的链接，我们将对用户进行身份验证并从用户驱动器访问数据。

> 我能够对用户进行身份验证，并且我有一个重定向 url，当它重定向时它会产生 url，即

```
http://apps.example.com/demo/?code=4/ujkisZloix6a9HbXUsHvNj-Z8a0cw.4152lkoh0Jzz0RgrKXntQAax3ancbdI 
```

现在如何访问用户数据？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:13:33.223

您可能会使用`OAuth2`来访问用户的驱动器数据。
这还取决于您如何访问 Google API（Javascript、Java 等）。
在最近的 Google I/O 会议上，有 2 场演讲解释了如何做到这一点。

*   [OAuth2](https://developers.google.com/events/io/sessions/gooio2012/604/)
*   [通过 Javascript 使用 Google API](https://developers.google.com/events/io/sessions/gooio2012/600/)

# beagleboard - 在 beaglebone ubuntu 上使用 cloud9

> ID：11575005
> 
> 赞同：0
> 
> 时间：2012-07-20T07:44:20.923
> 
> 标签：beagleboard, cloud9-ide

我热情地着手尝试在运行 Ubuntu 的 BeagleBone 上安装 cloud9 ide。我按照此博客中的步骤操作：http://ubuntuforums.org/showthread.php?t=1813076。但是，当安装 o3 时，我的构建一直失败

```
Build failed:  -> task failed (err #1):
        {task: cxx sh_node.cc -> sh_node_1.o}
  File "/home/ubuntu/local/bin/node-waf", line 16, in <module>
        Scripting.prepare(t, os.getcwd(), VERSION, wafdir)
  File "/home/ubuntu/local/bin/../lib/node/wafadmin/Scripting.py", line 147, in prepare
        error(str(e)) 
```

所以我想知道是否有人在运行 ubuntu 的 beaglebone 上启动并运行 cloud9？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:12:02.637

你在 Ubuntu 下安装了 node.js 0.6.19 吗？

由于 libxml 不存在，它可能会失败。尝试运行`sudo apt-get install libxml2-dev`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T20:19:07.573

确保迷你 SD 卡在 bBone *（骨骼随附的那个）中 - 它已经安装了 Cloud9。通过集线器连接以太网电缆后，您只需将网络浏览器定向到

```
 beaglebone.local:3000 
```

# android - 如何从不同的活动暂停/停止媒体播放器？

> ID：11575009
> 
> 赞同：0
> 
> 时间：2012-07-20T07:44:25.793
> 
> 标签：android

我在 MediaPActivity 活动中声明了一个媒体播放器变量，然后想在第二个活动中暂停或停止它。我已经在第二类中声明了意图，但是当我尝试点击 MediaPActivity 中的 btn1 时媒体播放器，第二个活动中的媒体播放器没有暂停/停止。下面给出的代码有什么问题？

```
 public class MediaPActivity extends Activity {
Button btn, btn1;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    btn = (Button) findViewById(R.id.btn);
    btn1 = (Button) findViewById(R.id.btn1);
    btn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent i = new Intent(MediaPActivity.this, Second.class);
            startActivity(i);
        }
    });
    btn1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent i = new Intent(MediaPActivity.this, Second.class);
            i.setAction(Second.ACTION_PAUSE);
            }
    });
} 
```

}

第二个活动：

```
 public class Second extends Activity {
Button btnplay, btnpause;
MediaPlayer player;
public static final String ACTION_PLAY = "com.synapse.test.PLAY";
public static final String ACTION_PAUSE = "com.synapse.test.PAUSE";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);

    btnplay = (Button) findViewById(R.id.button1);
    btnpause = (Button) findViewById(R.id.button2);
    player = new MediaPlayer();
    player = MediaPlayer.create(Second.this, R.raw.testsong_20_sec);
    btnplay.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            player.start();
        }
    });
    btnpause.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            player.pause();
        }
    });
}
@Override
protected void onNewIntent(Intent intent) {
    if(intent.getAction().equals(ACTION_PLAY)){
                player.start();
        }
    else if(intent.getAction().equals(ACTION_PAUSE)){
                player.pause();
            }
        } 
```

}

```
Manifest File:

  <activity
        android:name=".MediaPActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
       </activity>
        <activity android:name=".Second" android:launchMode="singleTop" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:51:57.313

使 MediaPlayer 对象为[静态](http://www.javatutorialhub.com/java-static-variable-methods.html)。静态变量可以从不同的类访问，并且只初始化一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:52:22.393

您不会`startActivity()`在 btn1.ClickListener 内部调用。由于您的 Activity 是 SingleTop 它应该触发`onNewIntent`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-20T15:27:56.190

您所要做的就是将这段代码添加到您的意图方法中：

`yourMediaPlayer.pause()`

所以整个代码是：

```
yourMediaPlayer.pause();
Intent i ...
startActivity(i); 
```

# jasper-reports - iReport：如何在 iReport 中设计具有多维和计算度量的 OLAP 多维数据集的报表？

> ID：11575010
> 
> 赞同：0
> 
> 时间：2012-07-20T07:44:27.117
> 
> 标签：jasper-reports, ireport, mdx, olap, olap-cube

我在*Jaspersoft OLAP Designer*中设计了 OLAP 多维数据集。现在我通过建立 OLAP 连接在*iReport中导入了这个 Cube。*

我使用以下 MDX 查询测试了我的结果集

```
select  HealthCheckStatusD.Members ON AXIS(0),
{ChannelD.Members} ON AXIS(1), {HealthCheckDateD.Members } ON AXIS(2) from  CubeReport2 where Measures.[Patient] 
```

***还修改了上述查询的版本：***

```
select  HealthCheckStatusD.Members ON Columns,
CrossJoin(ChannelD.Members,HealthCheckDateD.Members) ON Rows from  CubeReport2 
```

据我所知，这两个查询在逻辑上是相同的。

逻辑立方体结构如下：

```
--Cube
----HealthCheckDateDimension
----ChannelDimension
----HealthCheckStatusDimension
---------PatientMeasure 
```

现在我想以从 MDX 查询中获取结果的方式在*iReport中准备报告。*

如何用*iReport*做到这一点？我尝试在*iReports*中使用交叉表，但是当我在上面指定 MDX 查询时，我没有任何方法可以在交叉表中指定度量。

*iReport*中是否有其他方法可以为 OLAP 视图设计报告？好心的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:59:48.070

MDX 的结果和报告结构是两个不同的东西。我假设您想从 MDX 结果构建一个带有一些水平和垂直分组的交叉表报告（您也可以有基于图表和基于平面表的报告），

1.  您需要在报告中加载该字段。这样做的方法是选择查询编辑器窗口并在那里指定您的查询（在缩放图标旁边）。

2.  为简单起见，请将您的交叉表放在页面的摘要部分（详细部分的交叉表需要特殊处理 - 解决方法）。它将允许您选择水平和垂直分组。

3.  然后它允许您选择交叉表的度量。您还可以选择按行和按列显示总计。
4.  如果您使用的是内置 Mondrian Olap 引擎，那么您应该能够在预览窗格中看到您的报告。

让我知道事情的后续。

高拉夫

# java - JAVA读取excel文件

> ID：11575014
> 
> 赞同：2
> 
> 时间：2012-07-20T07:44:49.277
> 
> 标签：java, excel, jboss

我有一个从 excel 文件中读取参数的程序（部署到 JBOSS 5）。

用户可以从 excel 文件中添加/删除参数。但是，在 jboss 重新启动之前，代码无法识别修改后的 excel 文件。

我应该做一个conf吗？更改还是我应该更改代码中的某些内容以获取代码中的参数更改？

```
File file = new File(configurationFileName);
Workbook workbook;
try {
    workbook = Workbook.getWorkbook(file);

    Sheet sheet =
        workbook.getSheet(Constants.CONFIGURATION_SHEET_TAX_RATES);
    if (sheet != null) {
        for (int columnIndex = 0; columnIndex < sheet.getColumns();
             columnIndex++) {
            String headerValue =
                getCellContents(sheet, columnIndex, 0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:40:03.607

检查这个答案：[File changed listener in Java](https://stackoverflow.com/questions/494869/file-changed-listener-in-java)

一个好方法是使用来自 Apache Commons VFS 的 DefaultFileMonitor： http: [//commons.apache.org/vfs/apidocs/org/apache/commons/vfs2/impl/DefaultFileMonitor.html](http://commons.apache.org/vfs/apidocs/org/apache/commons/vfs2/impl/DefaultFileMonitor.html)

还有一个使用它的例子：http: [//tunatore.wordpress.com/category/apache-commons-vfs/](http://tunatore.wordpress.com/category/apache-commons-vfs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:48:33.627

我认为您可以使用 FileWatchDog

# sql-server-profiler - 合理的走线长度？

> ID：11575016
> 
> 赞同：0
> 
> 时间：2012-07-20T07:44:54.933
> 
> 标签：sql-server-profiler

运行长 SQL Server Profiler 跟踪的开销是多少？在生产服务器上运行 24 小时跟踪有什么注意事项？我想获得一个很好的样本，了解实际用户使用系统时发生的情况，而不是运行模拟会话来试图模仿用户活动的全部范围。

# ruby-on-rails - 导轨和 sql 服务器

> ID：11575020
> 
> 赞同：0
> 
> 时间：2012-07-20T07:45:18.323
> 
> 标签：ruby-on-rails, ruby, sql-server, database, odbc

我正在尝试从 rails 连接 sql server

我添加了宝石

```
gem 'ruby-odbc'
gem 'activerecord-sqlserver-adapter' 
```

现在我正在尝试配置**database.yml**但我做错了

请粘贴配置文件的示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:12:32.053

看看这个问题：

[设置 Rails 以使用 sqlserver](https://stackoverflow.com/questions/130547/setting-up-rails-to-work-with-sqlserver)

您的 database.yml 应如下所示：

```
development:
  adapter: sqlserver
  database: database_name
  host: server_name
  username: user_name
  password: your_pw_here 
```

# java - 在 Android webview 中显示 Unicode 字符

> ID：11575021
> 
> 赞同：3
> 
> 时间：2012-07-20T07:45:40.317
> 
> 标签：java, android, fonts

我做了一个在 webview 中显示马拉雅拉姆语 ascii 编码字体的 android 应用程序。现在我必须显示 unicode 字符集（如 സ ; ൂ ; പ ; ് ; പ ;）但它没有在 webview 上正确显示。文本变得难以阅读且毫无意义。

1.  在旧的 impl 我有这样的文字**Y¢j¤lcÉd¤j«: Jt´Tl¡l¤ a¢c·**
2.  在当前的 impl 中，它类似于**സ ; ൂ ; പ ; ് ; പ ;**

所以我想知道是否可以在android中将Unicode（即从2）格式转换为ASCII（即从1）？

使用的字体是 thoolika.ttf。

在此先感谢@nish

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:45:26.547

看看这个： http: [//software.clapper.org/javautil/api/org/clapper/util/html/HTMLUtil.html](http://software.clapper.org/javautil/api/org/clapper/util/html/HTMLUtil.html)

# wordpress - 手风琴编辑 wordpress

> ID：11575023
> 
> 赞同：0
> 
> 时间：2012-07-20T07:45:53.113
> 
> 标签：wordpress, accordion

我正在开发一个 WP 网站

我在页面中使用了手风琴。使用了图像菜单小部件插件

如下所示：

![在此处输入图像描述](../Images/f4e1b2b3e805714b3dc44a43d6328b1a.png)

我想删除手风琴中的三角形。

谁能告诉我同样的事情？

**编辑1**

在这里它显示了三角形元素，但是否可以直接从那里删除它......？

![在此处输入图像描述](../Images/4990d02ebd985aaaa43ceac1dde71c28.png)

![在此处输入图像描述](../Images/f4b060aaa97d3909c506ff89e0a1c962.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:49:05.103

检查您的`ul` `li`元素属性`css`，使用`firebug`它或提供一些 css/链接以获得更多说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:02:25.857

如果您无法找到 css，最简单的方法是隐藏此类的内容。

```
<span class="triangle"></span>

span.triangle
{
display:none;
} 
```

triangle 是当前与 span 关联的类。

# mysql - 休眠映射mysql

> ID：11575034
> 
> 赞同：1
> 
> 时间：2012-07-20T07:46:38.307
> 
> 标签：mysql, hibernate, pojo

我用hibernate写了映射到mysql表的pojo，但我不想将pojo属性绑定到mysql表字段。该代码是打击：

```
public class User{

    private long id;
    private String name;
    private String donotBindAttribute;
    set get......
} 
```

如何不将属性“donotBindAttribute”绑定到 mysql 字段谁能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:54:20.987

使这个变量瞬态。

如果您使用 JPA 注释，那么[@Transient](http://docs.oracle.com/javaee/6/api/javax/persistence/Transient.html)是可行的。如果您使用 hbm.xml，则根本不映射字段，它不会被视为持久属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:55:45.593

```
@Transient
private String donotBindAttribute; 
```

使其瞬态。

*假设您使用的是 JPA。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:56:35.810

使用如下 -

```
@Transient
private String donotBindAttribute; 
```

# sql - 一种在 t-SQL 中选择两个日期之间日期的方法

> ID：11575040
> 
> 赞同：1
> 
> 时间：2012-07-20T07:46:57.620
> 
> 标签：sql, sql-server, tsql, datetime

说，我有两个 DATETIME2 列，我需要在两者之间选择日期。示例：1/1/2012 08:00 和 1/1/2012 09:00 应生成 1/1/2012 08:30。

我正在尝试这个：

```
SELECT CAST((CAST(dtOut AS float(53)) + 
       CAST(dtIn AS float(53))) / 2 AS DATETIME2) FROM t; 
```

但是我收到一个错误，即不允许从 DATETIME2 进行显式转换。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:49:27.650

DateDiff 将找到两个日期之间的差异。

```
 select Dateadd(n, DATEDIFF(n, dtIn, dtOut)/2, dtIn) FROM t 
```

顺便说一句，如果字段是日期时间而不是日期时间2，您的方法将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:53:20.210

试试这个。

```
 select Dateadd(n, DATEDIFF(n, '1/1/2012 08:00', '1/1/2012 09:00')/2, '1/1/2012 08:00'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:55:55.947

```
declare @d1 datetime2, @d2 datetime2
select @d1='1/1/2012 08:00',@d2='1/1/2012 09:00'
 select dateadd(minute,datediff(minute ,@d1,@d2)/2.0,@d1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:26:33.450

选择 dateadd(SECOND,datediff(SECOND ,dtIn,dtOut)/2.0,dtIn)

# dotnetnuke - DNN 论坛模块自定义到一个 ID

> ID：11575043
> 
> 赞同：0
> 
> 时间：2012-07-20T07:47:07.773
> 
> 标签：dotnetnuke, dotnetnuke-module

我想让 DNN 论坛模块特定于一个 ID。示例我想发送一个 ProductID，当该产品的详细信息出现时，基于产品的论坛也应该出现。所以我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:31:37.503

我不认为你想用 DNN 论坛做什么。您可以尝试使用 Reports 模块或 3rd 方模块来查询实际数据库并显示一些线程或其他内容。

但是，你最好只使用这样的东西：

[http://www.disqus.com](http://www.disqus.com)

# facebook - 我可以使用 Facebook 发送按钮发送动态消息吗？

> ID：11575049
> 
> 赞同：1
> 
> 时间：2012-07-20T07:47:26.820
> 
> 标签：facebook, facebook-graph-api, facebook-social-plugins

我想让我的用户通过 Facebook 私信邀请他们的朋友来获得一些奖励。我想知道是否可以使用 facebook 发送按钮来做到这一点。可惜我发现发送按钮只能发送一个静态的url（比如www.website.com）。但是，我想在 url 上附加不同的参数（例如 www.website.com/invite.php?token=tk12345）。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:23:06.567

使用 jQuery：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<fb:send id="mysendbtn" href="www.website.com"></fb:send>
<script>
    $("#mysendbtn").attr("href", "www.website.com/invite.php?token=tk12345");
</script> 
```

# scala - 从可变列表中删除元素

> ID：11575050
> 
> 赞同：1
> 
> 时间：2012-07-20T07:47:37.973
> 
> 标签：scala

我想选择一个元素，然后在 O(1) 时间内将其从可变列表中删除。在 C++ 中我可以做

```
std::list<Foo> lst;
std::list<Foo>::iterator it = //some choice
//And then, possibly in another function,
lst.erase(it); 
```

我可以在 Scala 中有等效的代码，还是必须进行过滤或区分？

编辑：澄清一下，我想分开选择和删除。我想标记一个元素，以便以后可以快速访问、修改和删除它。如果我也可以在选定的元素之后插入另一个元素，那就太好了。这就是 C++ 迭代器提供的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:06:14.307

举个例子（当然还有其他的，但你`scala.collection.mutable.ArrayBuffer`没有说你对什么收藏感兴趣，所以我只挑了一个）：

```
val a = ArrayBuffer(1, 2, 3, 4)
a -= 3 
```

这与您的 C++ 版本的语义相同（但它仍然是 O(n)，就像 C++ 版本一样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T09:20:01.430

如果您想进行 O(1) 删除，我认为您唯一的选择是搜索相应的内部链接列表（使用`next`）并保留参考。

如果你使用一个`mutable.DoubleLinkedList`东西会变得容易一点：

```
val li = DoubleLinkedList(1,2,3,4,5,6)
val elem = li.next.next.next // O(< n) until you find what you want
elem.remove() // O(1)

li == DoubleLinkedList(1,2,3,5,6) 
```

但即便如此，您也不会拥有 C++ 可变迭代器接口的完整镜像。

我不确定是否有一个合适的 Scala 列表可以支持类似的东西。另一种建议是使用[拉链](http://scalaz.github.com/scalaz/scalaz-2.9.1-6.0.4/doc.sxr/scalaz/Zipper.scala.html)，它也为拉链位置的操作提供 O(1)。

# jquery - 抓取 jQuery 设置 CSS 类

> ID：11575055
> 
> 赞同：0
> 
> 时间：2012-07-20T07:48:00.177
> 
> 标签：jquery, css

我的情况是这样的：

我正在运行联系表格 7 (contactform7.com)。当用户没有设置必填字段并按下发送（表单是使用 jQuery 发送的，因此不会启动页面重新加载）时，Contact Form 7 脚本会向用户错过的输入字段输出“错误类”填写。

这个课程 - 联系表格 7 已经设置 - 我想抓住。但似乎 hasClass() 对此不起作用。它只适用于预定义的类。

我的结论是，当整个页面没有重新加载时，hasClass() 试图抓取的类在某些方面不可用。

我该如何解决这个问题并且能够抢到课？

编辑：我有这个代码

```
$('input:text, textarea').click(function() {
        $(this).css({'background' : '#fff'});
    }); 
```

如果您错过了填写所需的输入/文本区域并按下“发送”，该字段会出现红色背景（这是正确的）。上面的代码使它们在点击时变为白色（这是正确的）。但是，如果您第二次忘记填写所需的输入/文本区域并按下“发送”，则您忘记输入内容的字段会显示为白色（背景）而不是红色（这是错误的）。

我的想法是上面的代码覆盖了其他 CSS 类。我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:18:28.623

正如评论中解释的那样，如果出现错误，它将为输入字段添加一个类。所以再写一个正常的类。

```
$('input:text, textarea').click(function() {
    $(this).removeClass('yourErrorClass').addClass('yourNormalClass');
});

.yourNormalClass{
    background : #fff
} 
```

编辑：当给出错误时，您正在更改类并使其正常（背景：#fff），您正在更改元素的样式。元素的内联样式总是比类更受欢迎。这就是为什么第二次它将是白色的，因为 (background:#fff) 将被首选为元素的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:24:02.440

正如您所说，您使用的是联系表格 7（我希望在 wordpress 中），您可以直接编辑联系表格 7 的 javascript。因此，要使 hasClass() 正常工作，您应该通过将其与某些事件（例如单击提交按钮）绑定来将其写入该文件。

对于错误样式，您不应添加新的内联样式，因为下次验证表单时，它将删除应用的错误类（如果不存在验证错误）并添加错误类（如果存在验证错误）但您的样式将保留在那里并覆盖应用的类。因此，不要在 textarea 或文本框的单击上添加新样式，而是删除为其应用的错误类

例如：-

```
$('input:text, textarea').click(function() {
        $(this).removeClass('your error class');
    }); 
```

# esb - apache突触自定义调解器

> ID：11575059
> 
> 赞同：4
> 
> 时间：2012-07-20T07:48:39.630
> 
> 标签：esb, wso2, wso2esb, synapse

我有一个想要通过 wso2 ESB 使用的 REST 服务。该服务返回一个 JSON 对象。但是，我希望在 JSON进入 ESB 并得到处理**之前对其进行修改。**

我已经设法部署了一个自定义类中介，但我不知道如何用它处理消息正文（JSON 对象）。这是正确的方法吗？

我的服务配置目前如下所示：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="ListRm" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <outSequence>
         <class name="org.mediator.MyMediator" />
         <send />
         <drop />
      </outSequence>
      <endpoint>
         <address uri="http://xx.xx.xxx.xx:8080/alfresco/s/slingshot/datalists/lists/site/rm/documentLibrary" />
      </endpoint>
   </target>
</proxy> 
```

还有其他方法可以在消息正文进入 ESB 之前对其进行修改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:30:28.830

在突触中介引擎级别，您无法访问 json 消息。在 JSON 构建器级别，它将 json 消息转换为 xml 消息。因此，您需要访问 xml 元素并在那里进行修改。

messageContext.getEnvelope().getBody().getFirstElement();

您可以获得上面给出的 xml 元素。

# knockout.js - 淘汰赛教程在 JsFiddle 中不起作用

> ID：11575069
> 
> 赞同：0
> 
> 时间：2012-07-20T07:49:17.033
> 
> 标签：knockout.js, jsfiddle

我正在尝试获取在 JsFiddle 中工作的 Knockout 示例。

[JsFiddle在这里：](http://jsfiddle.net/DavyCassidy/ETpPz/)

这一切都在 Knockout 网站上运行，并且此代码直接从那里获取。

除了 REMOVE 函数外，JSFiddle 中的一切都按预期工作。

有谁知道为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:53:51.403

是的，您需要告诉 KnockoutJS 您要将当前数据传递给`removeSeat`. 使用 JavaScript 的`bind`函数执行此操作，如下所示：

```
<a href="#" data-bind="click: $root.removeSeat.bind($root, $data)">Remove</a> 
```

的第一个参数`bind`是上下文，即`this`函数内部将访问的内容。其他参数通常传递给函数。[在文档](http://knockoutjs.com/documentation/click-binding.html#note_2_accessing_the_event_object_or_passing_more_parameters)中阅读有关此内容的更多信息。

# android - 从 sdcard 中删除零字节文件

> ID：11575074
> 
> 赞同：0
> 
> 时间：2012-07-20T07:49:31.407
> 
> 标签：android, file, android-sdcard, delete-file

我的 sdcard 内的 app 文件夹中有一些零字节文件，我无法删除这些文件。

```
final String path = Environment.getExternalStorageDirectory().getAbsolutePath()+"/"+"AppFolder"+"/"+"Music";
         File file=new File(path,filee);
         if(file.exists())
         {
          boolean delete=file.delete();
          Log.d("TAG",""+delete);
         } 
```

这里的“filee”是文件的名称（.mp3）。此代码不起作用，因为从技术上讲该文件不存在。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:57:32.067

这是您的错误`"AppFolder"+"/"+"Music" ;` 尝试： `"AppFolder"+"/"+"Music" + "/";`

还要确保你也在`filee`变量中给出扩展名。

例如：`filee="song.mp3"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:59:20.527

代码应该没问题：

```
 File file = new File(path);
 boolean isDeleted = file.delete(); 
```

首先，请检查权限并确保您拥有此权限：

```
android.permission.WRITE_EXTERNAL_STORAGE 
```

你的路径应该是这样的：

```
/sdcard/YourDirectory/filee.mp3 
```

# c# - 使用正则表达式捕获两个单词之间的文本

> ID：11575075
> 
> 赞同：4
> 
> 时间：2012-07-20T07:49:34.937
> 
> 标签：c#, .net, regex

我正在尝试使用 CSharp 中的正则表达式在两个关键字之间获取文本。虽然我已经找到了一个标题相同的主题，但那个主题是关于在方括号之间查找文本，这相当容易，因为您可以使用它`\[(?<blah>[^\]]+?)\]`来执行此操作。

我想做的是`Matched text 123./!`在`UnMatched text 123./!team`. 所以我的分隔符是`Un`and `team`。如果我要按照我习惯的方式构建我的 RegEx，我将需要再次执行三个部分：`Un`开头的起始分隔符、`team`结尾的结束分隔符和一个`(?<blah>...+?)`显示“除了字符串之外的任何内容`team`”的组。但我不知道如何用正则表达式表达*这一点*。

有没有办法说“不是这个字符串”而不是“不是那些字符之一”？此外，由于我不知道正则表达式的实现之间的差异：我正在使用`System.Text.RegularExpressions.RegEx`.NET-Framework 来解析它们，因此示例当然应该与此实现一起使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T07:56:52.020

**您可以使用此语法**

```
(?s)(?<=start_delim).+?(?=end_delim) 
```

**只需更换`start_delim`并`end_delim`根据需要。访问[此处](http://www.regular-expressions.info/lookaround.html)了解有关这方面的更多信息。**

# java - 缓存 Java Applet 加载的资源

> ID：11575076
> 
> 赞同：0
> 
> 时间：2012-07-20T07:49:51.997
> 
> 标签：java, caching, applet

如何控制小程序缓存的内容和不缓存*的*内容？此外，任何有关高速缓存如何在小程序中工作的见解都将非常感激。

我正在一个小程序中发出一个简单的请求，以尝试测试在运行时加载的资源是否缓存在任何地方。

这是发出请求的代码。我连续多次调用它，都在同一个小程序生命周期内：

```
URL url = new URL("http", "localhost", 8343, "/spring-social-test/testSession.html");
            URLConnection connection = url.openConnection();
            connection.setDefaultUseCaches(true);
            connection.connect(); 
```

但这是 Java 小程序插件控制台中的输出：

```
network: Cache entry not found [url: http://localhost:8343/spring-social-test/index.html, version: null]
network: Connecting http://localhost:8343/spring-social-test/index.html with proxy=DIRECT 
```

**更新**

为了清楚起见 - 我需要知道在什么情况下事物（图像）会被缓存，因为我正在开发基于浏览器的游戏原型，其中我的主要成本将是带宽。我需要确切地知道我将使用多少带宽来探索商业模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:59:50.663

传统上，applet 资源被急切地缓存（在其他任何事情发生之前）。解决这个问题的唯一方法是将一些罐子排除在`archive`属性之外，并（在受信任的小程序中）建立一个`URLClassLoader`以根据需要加载其他资源。

但事情发生了变化。[使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署小程序，您可以完全控制逐个 Jar 的下载行为。

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）桌面应用程序。它为支持 Java 的平台提供“一键式”安装。
> 
> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、文件关联、自动更新（包括**延迟下载**和**更新的编程控制）、**按平台、架构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。
> 
> ..
> 
> JWS 在 Java 1.2 发布两年后于 2001 年 3 月 14 日首次作为单独下载提供，并且可以**作为自由浮动实体启动应用程序和小程序。**该功能与 J2SE 1.4.2 捆绑在一起。从 1.6.0_10（下一代 Java 插件）开始，JWS 也可用于配置**仍然嵌入在网页中的小程序。**

[在这个小型动画 GIF 制作器](http://pscode.org/gifanim/applet.html)中查看 JWS 部署的示例小程序。该小程序使用 JWS 部署，以便使用随附的 JNLP API 服务，这允许沙盒小程序访问本地文件系统。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T07:59:07.727

做一件事去控制面板>程序>JAVA>常规>设置>删除文件

删除缓存的应用程序和小程序。这对我有用。

# iphone - 触摸时临时增加 UIButton 大小

> ID：11575077
> 
> 赞同：0
> 
> 时间：2012-07-20T07:49:53.167
> 
> 标签：iphone, xcode, uibutton, uigesturerecognizer, uitouch

我正在创建一个有 10 个按钮的应用程序，每个按钮都有一个`IBAction`可以进入下一个视图。我想要的是在触摸时按钮的大小会增加，直到用户没有将手指移开。同样在双击时`IBAction`调用。现在的问题是我应该为此使用手势吗？

一种解决方案是将按钮更改为图像视图，然后在手势中使用它们的方法。但我也想保留按钮....任何解决方案都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:44:05.450

您还可以使用`myButton.transform = CGAffineTransformMakeScale(1.2, 1.2)`然后用户将手指放在按钮上以避免在您的应用程序中重复图像（如果重要的话）。然后将其恢复为 (1.0, 1.0) 然后将其删除。一切都可以使用`addTarget:action:forControlEvents:`. [在这里](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/instm/UIControl/addTarget%3aaction%3aforControlEvents%3a)阅读

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:36:35.580

更改触摸按钮的图像。

```
[myButton setImage:[UIImage imageNamed:@"enter.png"] forState:UIControlStateNormal];

[myButton setImage:[UIImage imageNamed:@"enter-hover.png"] forState:U UIControlStateSelected]; 
```

# c++ - 根据触摸位置确定移动方向

> ID：11575081
> 
> 赞同：0
> 
> 时间：2012-07-20T07:50:31.207
> 
> 标签：c++, ios

我试图找出根据用户在屏幕上的触摸来确定移动方向的最佳方法。所以说我得到一个 2d 位置 23x 和 320y，然后我需要返回以下 LEFT、RIGHT、UP、DOWN 之一。

目前我使用的代码不是很可靠，我想知道是否有人可以建议我更好的方法。

谢谢

```
if (at_position.x <= width*2/3 && at_position.x >= width*1/3 && at_position.y <= this->screenHeight*2/3)
{
    return UP;

}
else if (at_position.x <= width*2/3 && at_position.x >= width*1/3 && at_position.y >= this->screenHeight*1/3)
{
    return DOWN;      
}
else if (at_position.x <= this->screenWidth*2/3 && at_position.y >= this->screenHeight*1/3 && at_position.y <= this->screenHeight*2/3)
{
   return LEFT;         
}
else if (at_position.x <= this->screenWidth*1/3 && at_position.y >= this->screenHeight*1/3 && at_position.y <= this->screenHeight*2/3)
{
   return RIGHT;        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:58:57.033

您可以根据旧位置和新位置计算矢量：newX - oldX, newY - oldY，这可以用作角度，用于确定方向只需将范围 0-360（角度）转换为 0-3（枚举值）。对于更精确的方法，在根据新位置确定方向之前进行短暂的延迟（0.1 秒）

用于将矢量转换为 [0 到 2*PI] 范围内的角度，请使用

```
C#:
float angle = Math.Atan2(newY - oldY, newX - oldX) + Math.PI; 
```

将其转换为度数

```
C#:
angle = angle * (180 / Math.PI); 
```

将此转换为枚举值

```
C#:
int e = (int)angle / 90; //will give 0 for 0-90, 1 for 90-180, 2 for 180-270... 
```

那么你的枚举可能看起来像这样

```
C#:
enum dir {
    R = 0, D = 1, L = 2, U = 3 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:53:10.557

我建议计算方向矢量的角度并根据它提出建议

```
vec2 dir = ...
float angle = atan2f(dir.y, dir.x) + M_PI; //angle is in range [0, 2*PI] now
if (angle > 7 * M_PI / 4 && angle <= M_PI / 4) {//right}
else if (angle > M_PI / 4 && angle <= 3 * M_PI / 4) {//top}
//and so on 
```

要计算`dir`你需要点。一个是 - 您当前的触摸位置。第二个可以是`prev touch position`位置或某个固定点（例如屏幕的中心）

如果您有以下几点：

```
vec2 dir = currentTouchPoint - prevPoint; //or origin 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:05:55.350

我不会像其他人建议的那样为复杂的解决方案而烦恼（比如计算一个向量到用户点击的点）。你不是在解决一个困难的数学问题，你只需要检查点是否在某个区域内。所以不要把事情过度复杂化。

```
//lets you check if point a is between the boundaies, which in your case are either 
//X or Y coordinates. 
bool isBetween( int a, int firstBoundary, int secondBoundary)
{
   return (a >= firstBoundary && a <= secondBoundary);
}

if (isBetween(at_position.x, width*1/3, width*2/3))
{
    if(at_position.y <= this->screenHeight*2/3)
        return UP;
    else if(at_position.y >= this->screenHeight*1/3)
        return DOWN;      
}
else if (isBetween(at_position.y, this->screenHeight*1/3, this->screenHeight*2/3))
{
    if(at_position.x <= this->screenWidth*2/3)
       return LEFT;         
    else if(at_position.y <= this->screenHeight*2/3)
       return RIGHT;
} 
```

当然，这仍然不是最好看的代码，但考虑到它需要做的事情，我想这还不是最差的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T08:14:35.620

最简单的方法：

声明这个结构。

```
typedef enum {
    kDirecLeft = 1,
    kDirecRight,
    kDirecUp,
    kDirecDown,
}SwipDirection; 
```

使用这两个成员变量：

```
CGPoint             mSwipTouch1;
CGPoint             mSwipTouch2; 
```

在 TouchesBegan 中初始化 mSwipTouch1，在 TouchesEnded 中初始化 mSwipTouch2。

```
-(void)checkForDirection
{
    SwipDirection direction;

    bool isValidSwip = false;

    float swipXLength = ABS(mSwipTouch1.x-mSwipTouch2.x) ;
    float swipYLength = ABS(mSwipTouch1.y-mSwipTouch2.y) ;

    float swipDistance ; 

    if(swipXLength > swipYLength)  // Left/Right swip
    {
        swipDistance = swipXLength;

        if(swipXLength > MIN_SWIP_LENGHT)
        {
            if(mSwipTouch1.x > mSwipTouch2.x) //Left swip
            {
                DEBUG_LOG("Left swip\n") ;
                direction = kDirecLeft ; 
                isValidSwip = true;
            }
            else
            {
                DEBUG_LOG("Right swip\n") ;
                direction = kDirecRight ;
                isValidSwip = true;
            }
        }
    }
    else  // Up/Down Swip
    {
        swipDistance = swipYLength;

        if(swipYLength > MIN_SWIP_LENGHT)
        {
            if(mSwipTouch1.y > mSwipTouch2.y) //Left swip
            {
                DEBUG_LOG("Down swip\n") ;
                direction = kDirecDown ;
                isValidSwip = true;
            }
            else
            {
                DEBUG_LOG("Up swip\n") ;
                direction = kDirecUp ;
                isValidSwip = true;
            }
        }
    }

    if(isValidSwip)
        [self process:direction];
}

-(void)process:(SwipDirection)direc
{
    switch(direc)
    {
      case kDirecLeft:
           [self moveLeft];
            break;
        case kDirecRight:
            [self moveRight];
            break;

        case kDirecDown:
            [self moveDown];
            break;

        case kDirecUp:
            [self moveUp];
            break;
        default:
            break;    
    }
} 
```

# c# - 使用 slsvcutil.exe 工具以编程方式为服务自动生成客户端代理代码

> ID：11575084
> 
> 赞同：0
> 
> 时间：2012-07-20T07:50:51.800
> 
> 标签：c#, silverlight-4.0, slsvcutil

我们将打开 Visual stdio 命令提示符 2010 (svcutil.exe) 工具来创建客户端代理，自动生成的代码将由该工具创建。

```
svcutil.exe /language:cs /out:generatedProxy.cs /config:app.config localhost:8000/... 
```

相同的过程将使用`System.CodeDom.Compiler.CodeGenerator`命名空间以编程方式创建自动生成代理代码，而无需在新窗口中打开 svcutil.exe 工具。

我需要，如何以编程方式使用 Silverlight 4.0 应用程序的 slsvcutil.exe 工具来做到这一点？如何使用 slsvcutil.exe 工具的 C# 源代码创建自动生成代理代码，而无需在 new 中打开 VS 命令提示符？我需要这个 C# 源代码。

我们可以使用 System.Diagnostics.Process 命名空间将此工具作为进程执行，但这是我们只能应用于 Windows 身份验证或设置用户名和密码。这不是客户设置凭据的便捷方式。

是否有任何替代解决方案可以使用 slsvcutil 工具以编程方式创建客户端代理？是否可以将 svcutil 代理代码更改为 silverlight slsvcutil 代理代码？silverlight 4.0 中有什么命名空间来下载服务元文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:31:31.383

svcutil 生成代理的关键是使用生成的代码来创建服务合约和强类型检查。当您在运行时创建代理时，这当然不需要。

要在运行时创建代理，您需要事先了解合约。然后，您可以使用标准 WCF 功能来创建具有此合同的代理类。

# android - Open pdf file on any android device

> ID：11575099
> 
> 赞同：0
> 
> 时间：2012-07-20T07:52:19.290
> 
> 标签：android, pdf

I am developing an app that downloads `PDF` files from the internet and opens them. I observed that if I have an app that is capable of opening `PDF`s, it works fine (I send an intent to the OS with `Intent.ACTION_VIEW`). On the emulator for example, I have no such app installed. **But** I want to show the user that `PDF` somehow, on any device. I need a general solution that works on any Android device, preferably without any external apps. Is it possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:02:53.833

Yes, you can create one simple PDFViewr application and you can load your downloaded pdf into that app. I've similarly [answered to this question](https://stackoverflow.com/a/10352422/940096)

[Have a look at here also.](http://code.google.com/p/apv/) Don't forget to import the required library for this PDF application.

Hope this helps you.

# web-services - Design patterns for sending updates to external system

> ID：11575101
> 
> 赞同：1
> 
> 时间：2012-07-20T07:52:34.893
> 
> 标签：web-services, design-patterns, integration

I'm currently working on refactoring one application. It is an application for a leasing company. The application comminicates with external systems via web services. Some changes in the state or some events require to call external system. We have two types of calls:

*   synchronous - for example, when I add an object to a leasing application the number of the object is taken from the external system (I wait for the response).
*   asynchronous - when I change the data on the application the changes are also send to external system (the message is stored in our custom queue, and I don't need to have the response from the external system)

The design of the application was not prepared for the growing number of the external system (in every release we add at least one system). We have one layer (Logic) which handles all the bussiness logic and also communicating with external systems (which consists of building request, validating request, sending message, validating response, handling response).

I would like to separate the communication part from the bussinness logic part. What design patterns are good in this situation? I have read the [Design patterns @ sourcemaking.com](http://sourcemaking.com/design_patterns), and also [Catalog of Patterns of Enterprise Application Architecture @ Martin Fowler's](http://martinfowler.com/eaaCatalog/) but either there is nothing I can use or I don't see the way I can use it (most likely it is the later :-) ).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:08:05.000

Hexagonal architecture all the way! :) - [http://alistair.cockburn.us/Hexagonal+architecture](http://alistair.cockburn.us/Hexagonal+architecture)

It's a great way to separate your business logic from the way your application receives and sends events to the external world.

The Hexagonal Architectural pattern might be a bit too high level, so I usually suggest to read the [Dependency Inversion Principle](http://en.wikipedia.org/wiki/Dependency_inversion_principle) before, to understand how the model should expose interfaces that are later implemented by the adapters.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:52:16.263

I would suggest try using the mediator pattern ...i took this from your reference urls. [http://sourcemaking.com/design_patterns/mediator](http://sourcemaking.com/design_patterns/mediator) I think this can easily solve the problem of spaghetti code, since too much communication logic is intermixed with biz logic.

Please let me know if this helps :)

# c - 在'printf'之后使用'fgets'在C语言中出现问题，因为'fgets'在'printf'之前运行

> ID：11575102
> 
> 赞同：5
> 
> 时间：2012-07-20T07:52:37.087
> 
> 标签：c, printf, fgets

> **可能重复：**
> [为什么 printf 在调用后不刷新，除非换行符在格式字符串中？（在 C 中）](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)

我在使用时遇到问题`printf`，`fgets`因为我的代码`printf`是在 fget 之前编写的，但它没有运行，它在运行后`fgets`运行。

```
enum { max_string = 127 };
static char string[max_string+1] = "";

int main( int argc, char ** argv ) {    
      printf("Type a String: ");
      fgets(string, max_string, stdin);
      printf("The String is %s\n", string);
      return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T07:58:38.577

冲洗一下`stdout`

```
fflush(stdout); 
```

前`fgets(...)`

```
printf("Type a String: ");  
fflush(stdout);
fgets(string, max_string, stdin); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:01:01.047

关键不是`printf`在 之后运行`fgets`，而是在它之后显示*它的输出*。

发生这种情况是因为**标准输出**（您使用 编写的文件描述符）是行缓冲的，即标准库在收到`printf`换行符 ( ) 进行打印后推迟打印。`\n`

来自`man stdout`：

> 当流标准输出指向终端时，它是行缓冲的。在调用 fflush(3) 或 exit(3) 或打印换行符之前，部分行不会出现。

要研究不同的结果，请编辑您的示例以使用`fflush`，或使用 打印标准错误`fprintf(stderr, ...`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:00:15.410

尼尔是对的。如果您只想写下某些内容而不必输入“\n”，则可以使用函数 write();

```
#include <stdio.h>
#include <unistd.h>
#include <string.h>

enum { max_string = 127 };
static char string[max_string+1] = "";

my_putstr(char *str)
{
     write(1, str, strlen(str));
}

int main( int argc, char ** argv ) {    
    my_putstr("Type a String: ");  
    fgets(string, max_string, stdin); 
    printf("The String is %s\n", string);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T07:55:14.183

发表声明`\n`。`printf`这可能是问题，因为`C`缓冲区是行终止的。

# android - 安卓谷歌API平台4.0下载？

> ID：11575111
> 
> 赞同：0
> 
> 时间：2012-07-20T07:53:22.263
> 
> 标签：android, android-emulator, avd

我已经搜索了很多 Android Google API 4.0 以上的可下载 zip。我也没有在 developer.android.com 网站上找到它。

我在一些外部链接[http://www.hariadi.org/android/manual-download-of-android-sdk-components/](http://www.hariadi.org/android/manual-download-of-android-sdk-components/)上找到了上面的 sdk 平台 4.0 。但是在尝试创建 AVD 时会出现一些问题。

无论如何，我正在寻找 Google API。我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:58:16.110

您可以从官方 google SDK 管理器下载和管理所有可用版本的 AVD 和其他工具：http: [//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

![在此处输入图像描述](../Images/cdd90beb4b1fb1c9afa1affe75c845e9.png)

![在此处输入图像描述](../Images/12e80f219a9e86b5eb8a6cc70d793be3.png)

![在此处输入图像描述](../Images/60fcc9cdef0f9e855763417b8493e1e4.png)

# asp.net - Web 应用程序抛出奇怪的 sql 错误

> ID：11575122
> 
> 赞同：0
> 
> 时间：2012-07-20T07:54:12.807
> 
> 标签：asp.net, sql-server-2005

如果这不是发布此内容的好地方，我们深表歉意，但是我们在 SQL 2005 实例上运行的 Web 应用程序遇到了一些非常奇怪的事情。

该应用程序是一个 .net 网络应用程序，并且会按照您所期望的全天进行大量查询。

但我们会间歇性地收到诸如异常消息之类的错误：*DataBinding: 'System.Data.DataRowView' 不包含名为 'column_name'* 的属性。当它在查询中显然确实有该列时-如果手动运行则可以正常工作..这是SQL实例的症状可能是内存不足还是通常很差？

当然，我们无法跟踪代码中的任何问题！

不幸的是，Web 应用程序和 SQL 实例都在同一个盒子上，这是一个具有 4GB 内存的 Xeon，所以绝不是超级强大..

附言。它不仅像上面那样的查询似乎失败了，而且还有一些 linq-to-sql 的东西，实际上它经历了根本不喜欢数据库的阶段.. 任何帮助/建议都会很高兴收到

谢谢

纳特

一些代码..看不出下面有什么问题..但上面的例外基本上是说找不到列a或b或c...

```
Dim conn As New SqlConnection(sitedb)
    Dim cmd As New SqlCommand
    cmd.CommandText = "SELECT a,b,c FROM Table"
    Dim da As New SqlDataAdapter(cmd)
    Dim dt As New DataTable

    Try
        conn.Open()

        da.Fill(dt)

    Catch ex As Exception
        Throw ex
    Finally
        conn.Close()
    End Try

    if dt.Rows.Count > 0 then
       Grid.DataSource = dt **<- dies here....**
       Grid.DataBind()
    end if 
```

**它如何从一个明显有效的查询中返回行，然后在它刚刚抓取的列上抛出一个 indexoutofrange ？** 我认为真正的问题是我们遇到的所有问题都与代码无关.. db 似乎经历了一段时间的不稳定，我们遇到了一些似乎没有意义的奇怪异常。这可能与资源有关，例如盒子动力不足，还是..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:29:11.180

您正在发出 Conn.Close 所以我认为记录集已断开连接。但是，db 库的游标位置决定了是在执行时还是在获取时提取行，这可以是 db-session-level 或 connection-level 设置。

由于隐式处于服务器端分页模式，连接池或其他一些并行行为是否有可能导致您的记录集无法获取？

尝试在使用数据集时保持连接打开，如果解决了问题，那么你就知道要继续吠叫这棵树。

# android - Sqlite 删除所有功能

> ID：11575130
> 
> 赞同：0
> 
> 时间：2012-07-20T07:54:35.933
> 
> 标签：android, sqlite

我对 deleteAll() 函数有疑问。我正在为我的数据库使用具有自动增量属性的键。当我从数据库中删除所有行时，它会删除所有内容。但是当我插入一个新行时，键不是从 1 开始的，例如在删除键为 15 之前，删除后新键变为 16 而不是 1。我怎样才能解决这个问题？有什么建议么？

这是我的代码

```
 public int deleteAll(){

 return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);

 }

   public void onCreate(SQLiteDatabase db) {

  db.execSQL(SCRIPT_CREATE_DATABASE);

 } 
```

还有我的数据库脚本

```
private static final String SCRIPT_CREATE_DATABASE =

     "create table "
                + MYDATABASE_TABLE + "("
                + KEY_ID + " integer primary key autoincrement, " 
                + COLUMN_NAME + " text not null, " 
                + COLUMN_EMAIL + " text not null, "
                + COLUMN_PHONE + " text not null, "
                + COLUMN_ADDRESS + " text not null"
                + ");"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:01:04.537

您的代码不应依赖于自动递增键的值。

为了向用户显示，请在迭代数据库游标时使用单独的计数器。用户一般不需要知道密钥，只需要知道序列号即可。两者都可以不同。

但是，如果您确实坚持要重新启动键值，请尝试删除表并重新创建它。但要注意在其他表中用作外键的旧键值。使用触发器来处理此类情况。

# ruby-on-rails - rails_admin：浏览未知结构的集合

> ID：11575131
> 
> 赞同：2
> 
> 时间：2012-07-20T07:54:44.020
> 
> 标签：ruby-on-rails, mongodb, mongoid, rails-admin

我正在尝试使用 rails_admin w/mongoid 来显示 mongo 集合的表格视图。问题是我事先不知道集合中对象的结构。rails_admin，AFAIK，基于模型定义。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:23:46.303

Rails_admin 依赖于启动时运行的 config/initializers/rails_admin.rb。该文件可能是从您的模式生成的，因此如果您在启动后更改对象结构，它不会动态更新。您也许可以扩展 rails_admin 代码以动态更改配置。

# javascript - 如何突出显示列表中的随机单词

> ID：11575132
> 
> 赞同：2
> 
> 时间：2012-07-20T07:54:46.010
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

我正在创建一个**拖放**文字游戏。这部分脚本从**listOfWords中提取的****12 个随机单词动态创建一个表。**我需要用给定的 CSS 突出显示表格中的一个单词，直到它完成以向用户显示要拼写的单词。然后它会随机选择表格中的另一个单词进行拼写，依此类推，直到所有单词都完成......

 **我尝试了各种不同的方法，但无法使其正常工作，请帮助

```
var listOfWords = ["mat", "cat", "dog", "pit", "pot", "fog", "log", "pan", "can", "man", "pin", "gag", "sat", "pat", "tap", "sap", "tag", "gig", "gap", "nag", "sag", "gas", "pig", "dig", "got", "not", "top", "pop", "god", "mog", "cot", "cop", "cap", "cod", "kid", "kit", "get", "pet", "ten", "net", "pen", "peg", "met", "men", "mum", "run", "mug", "cup", "sun", "mud", "rim", "ram", "rat", "rip", "rag", "rug", "rot", "dad", "sad", "dim", "dip", "did", "mam", "map", "nip", "tin", "tan", "nap", "sit", "tip", "pip", "sip", "had", "him", "his", "hot", "hut", "hop", "hum", "hit", "hat", "has", "hug", "but", "big", "bet", "bad", "bad", "bed", "bud", "beg", "bug", "bun", "bus", "bat", "bit", "fit", "fin", "fun", "fig", "fan", "fat", "lap", "lot", "let", "leg", "lit"];

var guesses = {};

var shuffledWords = listOfWords.slice(0).sort(function() {
return 0.5 - Math.random();
}).slice(0, 12);

var tbl = document.createElement('table');
tbl.className = 'tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < shuffledWords.length; i += wordsPerRow) {
var row = document.createElement('tr');

for (var j = i; j < i + wordsPerRow; ++j) {
    var word = shuffledWords[j];
    guesses[word] = [];

    for (var k = 0; k < word.length; ++k) {
        var cell = document.createElement('td');

        $(cell).addClass('drop').attr('data-word', word);
        cell.textContent = word[k];
        // IF FIREFOX USE cell.textContent = word[j]; INSTEAD
        row.appendChild(cell);
        }
   }
    tbl.appendChild(row);
}

document.body.appendChild(tbl); 
```

这是我想应用于拼写所需单词的**CSS ...**

```
.spellword {

    -webkit-box-shadow: inset 0px 0px 10px 5px #176BC9;
    box-shadow: inset 0px 0px 10px 5px #176BC9;

} 
```

我认为这将是沿着这些方向......

```
var wordToSpell = shuffledWords.slice(0).sort(function() {
return Math.round(Math.random())-0.5
$("wordToSpell").addClass("spellword");
  }).slice(0,1); 
```

我也试过这个，但没有快乐......

```
$(document).ready(function() {
 var wordToSpell = [
     <c:forEach var="word" items="${listOfWords}">'${word}', </c:forEach> // JSP : server-side
 ];  
 for (var i = 0; i < wordToSpell.length; i++) {
     $('td').highlight(wordToSpell[i]);
 }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:30:07.280

一个 jquery 解决方案可能如下：

```
$('#pickNext').click(function(){
    // remove the class from all td's
    $('td').removeClass('spellword');
    // pick a random word
    var rndWord = shuffledWords.sort(function() {  return 0.5 - Math.random(); })[0];
    // apply class to all cells containing a letter from that word
    $('td[data-word="' + rndWord + '"]').addClass('spellword');
}); 
```

现场示例：http: [//jsfiddle.net/zWfm3/1/](http://jsfiddle.net/zWfm3/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:05:10.300

因此，当您创建树时，您可以为每个单词添加一个类：

```
$(cell).addClass(word) 
```

然后突出它只是做：

```
$(word).addClass("spellword"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T14:05:04.443

是的，您可以更改按钮的名称并使用 .mousedown，这样会更好

```
$('.minibutton').mousedown(function() {
    $('td').removeClass('spellword'); 
    var randomWord = shuffledWords.sort(
        function() {
            return 0.8 - Math.random(); 
         }
     )[0]; 

     $('td[data-word="' + randomWord + '"]').addClass('spellword'); 
}); 
```**

# php - Apache杀死mysql？mysql_fetch_object()：提供的参数不是有效的 MySQL 结果资源

> ID：11575133
> 
> 赞同：0
> 
> 时间：2012-07-20T07:54:51.200
> 
> 标签：php, mysql, apache, mysql-num-rows

所以我有一个直接从浏览器运行的 php 脚本，我得到 2 个错误：

> 警告：mysql_fetch_object()：提供的参数不是有效的 MySQL 结果资源...
> 警告：mysql_num_rows() 期望参数 1 是资源，在...中给出布尔值

在此脚本中，我进行查询以从我的博客表中选择所有博客：

```
$result = $this->query("
     SELECT *
     FROM blogs
"); 
```

我得到他们的饲料！所以这个脚本需要一点时间来执行，比如 40 秒。在我的表中，我有 100 个博客，每当我运行脚本时，我都会遇到这 2 个错误。

重要提示：如果我像这样更改查询，我不会收到这些错误：

```
$result = $this->query("
     SELECT *
     FROM blogs
     LIMIT 0,70
"); 
```

所以我很确定它与一些系统管理员设置有关。我使用共享主机。因此，当我对所有 100 个博客进行操作时，我会遇到错误，而当我只使用 70 个博客时，我不会。

就像我失去了 mysql conexion 什么的。查询没有错，我将它们打印在屏幕上并在 phpmyadmin 中检查它们并且它们可以工作。

错误之一来自这里：

```
$result = $this->query("
    SELECT *
    FROM blogs_settings
");

$settings = $this->fetch_object($result);

return $settings->max_feeds; 
```

此函数用于获取最大提要/页面，我得到了该错误，并且该函数没有任何问题。我已将 max_execution_time 设置为 120，但我不知道我还能做什么。

我很确定很多人都遇到了这个错误，如果有人知道，或者猜出问题出在哪里，我相信不仅我会理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:00:55.500

鉴于`$result = $this->query(" SELECT * FROM blogs ");`不起作用但`$result = $this->query(" SELECT * FROM blogs LIMIT 0,70 ");`运行良好的事实以及您的其他评论，您是否也查看了允许的最大内存？

想到的另一件事（可能是真的首先想到的）是，`select * from blogs`如果您有几百条记录，则 a 不应该花 40 秒才能返回。您拥有的这些博客有多大？

编辑：

现在我认为根据您的评论我们正在取得进展

*我没有收到初始查询的错误。在我获得所有提要后，我将它们与对象一起保存在一个数组中。之后，我进行另一个查询以获取将显示在主页中的提要数量。我保存在表 blogs_settings 中的那个数字。在那个查询中我得到了错误*

在进行所有数据库连接的对象中，您是在重复使用该连接还是每次都打开一个新连接？如果是这样，您是否正确释放与数据库的连接？

# c# - 调试 EntityDataSource

> ID：11575136
> 
> 赞同：0
> 
> 时间：2012-07-20T07:55:32.917
> 
> 标签：c#, asp.net, sql, sql-server

```
this.EntityDataSource1.Where = "it.Name like '%@Name%'"; 
```

这个 where 子句有问题，因为它似乎变得相等而不像。问题是我想查看正在调用数据库的 SQL 以查看问题所在。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:58:50.687

如果要查看 SQL，请使用 SQL 分析器 ( [http://msdn.microsoft.com/en-us/library/ms187929(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms187929(v=sql.100).aspx) )

# android - Android停止向后导航

> ID：11575138
> 
> 赞同：1
> 
> 时间：2012-07-20T07:55:41.183
> 
> 标签：android, callback

我正在为android平台实现一个游戏。游戏快准备好了，但我遇到了一个奇怪的问题：

当玩家完成游戏时，会显示“恭喜你赢了”页面。该视图中的按钮正在重定向到主页。当玩家单击返回按钮时会出现问题，因为游戏会再次显示。

有没有办法控制应该出现的后退按钮行为？喜欢总是重定向到主页

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:59:41.837

这就是你要找的。

```
Intent a = new Intent(DisplayPage.this,MainPage.class);
a.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(a); 
```

这肯定会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:15:11.643

我找到了一个更好的解决方案：

```
@Override
public void onBackPressed() {
} 
```

只需在没有实现的情况下覆盖该功能，然后，后退按钮功能将根据需要消失。

# wpf - WPF 应用程序为某些用户占用过多的 CPU

> ID：11575142
> 
> 赞同：2
> 
> 时间：2012-07-20T07:55:48.363
> 
> 标签：wpf, performance

我有一个用 VS2010 Express 为 .Net 4 编写的 WPF 应用程序。一些测试人员报告说，只要应用程序窗口可见，应用程序就会占用大量 CPU（~80%-100%），而不可见时则占用 0%。在我的电脑上不是这样，在我测试过的其他电脑上也不是这样。我看到的是，在打开窗口后的前几秒钟它需要一堆 CPU，但随后下降到百分之几。

我怀疑这是 WPF 窗口渲染的问题。但我不明白为什么它只发生在某些用户身上。

我知道这没什么好做的，但是如果有人知道从哪里开始寻找导致此性能问题的原因，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:59:20.170

使用[WPF Performance Toolkit](http://msdn.microsoft.com/en-us/library/aa969767.aspx)，您可以比较详细地观察应用程序的呈现过程。Perforator（工具包的）在过去帮助我找到了性能瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:01:42.947

这个问题使我找到了正确的解决方案：

[https://stackoverflow.com/questions/308816/any-good-free-net-profiler](https://stackoverflow.com/questions/308816/any-good-free-net-profiler)

我分析了应用程序并消除了分析器检测到的瓶颈。这减少了所有机器上的 CPU 负载。

# visual-studio-2010 - 将 Web 应用程序移植到 Azure 的策略

> ID：11575144
> 
> 赞同：1
> 
> 时间：2012-07-20T07:55:51.130
> 
> 标签：visual-studio-2010, azure, azure-configuration

我们正在将一个 Web 应用程序迁移到 Azure，并希望对我们的策略提供一些反馈。Azure 对我们来说是新事物，因此我们希望确保我们走在正确的道路上。请注意，我们使用的是 VS 2010。

我们当前的应用程序有两个部分：1）用于用户界面的标准 Web 应用程序和 2）在服务器上运行的 Windows 应用程序。Windows 应用程序每 2 分钟唤醒一次，在 SQL 表中查找任何新记录，处理它们然后休眠。Windows 应用程序还告诉我们处理的记录数、处理时间等，以便我们了解系统的总体运行状况。两个应用程序都读取/写入存储在服务器上的文件。（是的，这可能应该是一个服务，但我们想要这个接口，以便我们可以快速查看整体运行状况。我们有一个服务可以检查以确保接口正在运行并在出现故障时重新启动它。）

将 Web 应用程序移植到 Azure 很简单，我们已经在 VS 中对其进行了一些测试，没有任何问题。我们需要一些关于 Windows 应用程序和设置/访问文件的建议。

这是我们的策略。感谢所有建议。

1 - 为 Windows 应用程序创建一个辅助角色。2 - 将此工作人员角色设置为启动项目。3 - 辅助角色将创建 Azure 云驱动器（用于文件访问）并将驱动器号传递给 Web 应用程序。我们将在 onstart 中建立连接。4 - 确保工作者角色是持久的，这样我们就不会丢失云驱动器。

另外两个问题：

1 - 工人角色似乎可以有一个用户界面，但也许我们误读了一些东西。如果我们尝试将 Windows 应用程序添加到解决方案中，我们会收到许多错误。我们还尝试创建一个工作角色并将其设置为 Windows 窗体应用程序，但这立即产生了一个错误，即它们不是“主要”方法，这是对我们的警告标志，我们不应该这样做。我们在这里缺少什么？

2 - 如果工作角色被设置为启动项目，它是否需要启动网络应用程序，或者工作角色完成启动处理后是否会自动启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:29:12.080

Web 和 Worker 角色基本上是 Windows Server 2008 SP2 / R2 VM，其中 Web 角色配置并运行了 IIS。您拥有的实际 webrole.cs 和 workerrole.cs 代码只是在启动 Web 角色/工作者角色实例时运行的脚手架。您还拥有可以处理提升权限任务（例如修改注册表和安装软件）的启动脚本。

关于您的策略：您不必*为*您的 Windows 服务创建辅助角色，但如果您认为存在性能问题，您应该考虑它。您可以选择在您的网络角色中运行它 - 只需从您的 OnStart() 或 Run() 启动线程。您需要确保只有一个调度程序正在运行。有许多关于在 Windows Azure 中运行调度程序的 SO 问题，例如[这个](https://stackoverflow.com/questions/10897404/how-to-shedule-a-task-in-windows-azure-worker-role/10897631#10897631)，还有一些讨论了quartz.net 的使用，就像[这个](https://stackoverflow.com/questions/6249071/quartz-net-jobs-in-azure-webrole)一样。

关于共享的云驱动器：一个角色不能与另一个角色共享驱动器号。而使用云驱动器，只能有一个作家。事实上，每个角色实例都需要自己的云驱动器。这是您可能需要考虑将 Blob 存储用于公共文件存储的领域。

根据您提到的没有 UI 的辅助角色：虽然 Visual Studio 不利于将 Web 应用程序添加到辅助角色，但您*可以*这样做。更重要的是：由于工作角色只是一个 Windows Server VM，因此没有什么可以阻止您运行任意数量的替代 Web 服务器（例如 tomcat、jetty 和 jboss）。您只需要从启动脚本或通过启动进程从 OnStart() 运行这些。您还需要根据需要创建输入端点（例如 http 端口 80、https 443）。您可以轻松地以 Web 角色运行这些服务器（并运行支持 tcp、udp、http 或 https 的任何其他类型的端口服务器）。

关于启动项目：您的云项目将是启动项目。Web 和辅助角色实例并行启动。

# javascript - 如何仅在用户使用 IE 浏览时隐藏按钮

> ID：11575146
> 
> 赞同：0
> 
> 时间：2012-07-20T07:55:59.830
> 
> 标签：javascript, html, css

我想知道当用户使用 IE 浏览时，我是否可以使按钮或 div 标签仅可见/不可见。我想实现这一点，因为我有 Microsoft JScript 运行时错误：访问被拒绝。在 IE 中，当用户单击触发隐藏的 asp.net 文件上传控件的按钮时。

编辑：我有 asp 按钮：

```
<asp:LinkButton ID="btnSavePhoto" runat="server"></asp:LinkButton> 
```

和带有 class="hidden" 的文件上传控制（dysplay: none;）：

```
<asp:FileUpload ID="uploadPhotoDialog" class="hidden" runat="server"/> 
```

这个想法是：当用户使用 IE 浏览时 - 使文件上传可见并隐藏链接按钮。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T07:58:35.133

使用条件注释：

```
<!--[if IE]>
<div></div> // this is IE
<![endif]--> 
```

或者如果不是 IE

```
<!--[if !IE]> -->
<div></div> // this is NOT IE
<!-- <![endif]--> 
```

[文档在这里](http://www.quirksmode.org/css/condcom.html)

## 更新

使用您的 ASP 标记执行以下操作：

```
<!--[if !IE]> -->
    <asp:LinkButton ID="btnSavePhoto" runat="server"></asp:LinkButton>
<!-- <![endif]-->
<!--[if IE]>
    <asp:FileUpload ID="uploadPhotoDialog" runat="server"/>
<!-- <![endif]--> 
```

然后不需要`class`属性

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T07:58:26.540

瞄准一切，除了ie..

```
<!--[if !IE]><!-->
    Your button goes here
 <!--<![endif]--> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T08:02:53.253

`<html>`您可以使用条件注释为您的元素添加一个类：

```
<!--[if IE]><html class="ie"><![endif]-->
<!--[if !IE]><!--><html><!--<![endif]--> 
```

然后，假设这个按钮有一个 class `.mybutton`，你可以像这样定位它

```
.ie .mybutton {display: none;} 
```

然后，如果您需要在 IE 中设置不同的样式，则可以使用相同类型的定位。

# c++ - 定义 []= 运算符

> ID：11575151
> 
> 赞同：4
> 
> 时间：2012-07-20T07:56:22.390
> 
> 标签：c++, arrays, operator-overloading

我正在编写一个类 Grid ，其元素是 Points - 一个（int）网格，每个正方形都有一个（双）点。我已经定义了这个（高度值存储在其他地方）：

```
Point &operator[](Point p) { return floor(get_x(p)) + height * floor(get_y(p)); } 
```

我想定义赋值运算符。怎么办？它是根据`[]`运算符自动定义的吗？

到目前为止我有

```
Point &operator[]=(Point p, Point q) { data[floor(get_y(p)) * height + floor(get_x(p))] = q; } 
```

但这似乎是一个循环定义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T07:57:49.010

这不是它的工作原理，`[]`运算符应该返回该索引处元素的引用，并且该*元素*（类型）应该支持`operator=`（即`Point::operator=`）

# php - Symfony2 将数组传递给 FormBuilder

> ID：11575152
> 
> 赞同：0
> 
> 时间：2012-07-20T07:56:26.827
> 
> 标签：php, arrays, forms, symfony

我想创建一个表单，它有多个对应于数组元素的输入字段。在 ASP.Net MVC 3 中，我有一个模型构建器，它在输入 HTML 标记中编码有关底层模型的信息，并在 POST 上自动重建模型，但我没有设法在 Symfony2 中找到类似的东西。
谁能告诉我在 Symfony2 中是否有办法告诉 FormBuilder 它通过调用 add 方法接收的字段实际上是一个数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:40:40.083

这可以使用表单“[集合](http://symfony.com/doc/master/reference/forms/types/collection.html)”字段类型来完成。请参阅[Symfony Cookbook](http://symfony.com/doc/master/cookbook/index.html)中关于“[如何嵌入表单集合”的](http://symfony.com/doc/master/cookbook/form/form_collections.html)条目

# asp.net - 如何将 ASP.NET 登录名与我的表连接起来？

> ID：11575155
> 
> 赞同：0
> 
> 时间：2012-07-20T07:56:34.203
> 
> 标签：asp.net, login

如何将 ASP.NET 登录名与我的表连接起来？

我有这张桌子：

```
CREATE TABLE [T_USERS](
    [ID]            INT IDENTITY(1,1) NOT NULL,
    [NICKNAME]              VARCHAR(300) NULL,
    [PASSWORD]              VARCHAR(300) NULL,
    [FIRSTNAME]             VARCHAR(250) NULL,
    [LASTNAME]          VARCHAR(250) NULL,
    [EMAIL]             VARCHAR(250) NULL,
    [IP]                VARCHAR(250) NULL,
    [CREATED]           DATETIME DEFAULT(GETDATE())

    PRIMARY KEY ([ID])
    ) 
```

我需要将登录和注册连接到我的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:04:40.837

请参阅这篇文章，它最能描述您问题的注册部分

[http://geekswithblogs.net/dotNETvinz/archive/2009/04/30/creating-a-simple-registration-form-in-asp.net.aspx](http://geekswithblogs.net/dotNETvinz/archive/2009/04/30/creating-a-simple-registration-form-in-asp.net.aspx)

并参考这篇文章来处理登录部分

[http://www.mikesdotnetting.com/Article/75/Simple-Login-and-Redirect-for-ASP.NET-and-Access](http://www.mikesdotnetting.com/Article/75/Simple-Login-and-Redirect-for-ASP.NET-and-Access)

以及 [http://www.dotnetfunda.com/articles/article808-how-to-write-a-simple-login-page-in-aspnet.aspx](http://www.dotnetfunda.com/articles/article808-how-to-write-a-simple-login-page-in-aspnet.aspx) [3](http://www.dotnetfunda.com/articles/article808-how-to-write-a-simple-login-page-in-aspnet.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:00:58.187

您将需要 asp.net 登录视图控件，请参阅链接如何做[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginview.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginview.aspx)

这是一个非常好的示例，显示数据绑定[http://asp-net-example.blogspot.co.uk/2008/10/getallusers-method-example-how-to-get.html](http://asp-net-example.blogspot.co.uk/2008/10/getallusers-method-example-how-to-get.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T10:44:58.797

这是一个帮助的解决方案：

**自定义会员提供者：**

**登录.aspx**

```
<asp:Login ID="Login1" runat="server" BackColor="#F7F7DE" BorderColor="#CCCC99" BorderStyle="Solid"
                        BorderWidth="1px" Font-Names="Verdana" Font-Size="10pt">
                        <TitleTextStyle BackColor="#6B696B" Font-Bold="True" ForeColor="#FFFFFF" />
                    </asp:Login> 
```

**CustomMembershipProvider.cs**

```
public class CustomMembershipProvider : MembershipProvider
{

    public override bool ValidateUser(string username, string password)
    {
        User user = new User();
        UserObj userObj = user.GetUserObjByUserName(username, sha1Pswd);
        if (userObj != null)
            return true;
        return false;
    }

} 
```

**网页配置**

```
<connectionStrings>
    <add name="ApplicationServices" 
      connectionString="Server=your_server;Database=your_db;
                         Uid=your_user_name;Pwd=your_password;"
      providerName="System.Data.SqlClient" />
</connectionStrings>

<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication>

<membership defaultProvider="CustomMembershipProvider">
  <providers>
    <clear/>
    <add name="CustomMembershipProvider" 
        type="CustomMembership.Models.CustomMembershipProvider"
        connectionStringName="AppDb"
        enablePasswordRetrieval="false"
        enablePasswordReset="true"
        requiresQuestionAndAnswer="false"
        requiresUniqueEmail="false"
        maxInvalidPasswordAttempts="5"
        minRequiredPasswordLength="6"
        minRequiredNonalphanumericCharacters="0"
        passwordAttemptWindow="10"
        applicationName="/" />
  </providers> 
```

**更多信息：http:** [//www.codeproject.com/Articles/165159/Custom-Membership-Providers](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)

# javascript - 防止在提交时发送特定输入

> ID：11575157
> 
> 赞同：0
> 
> 时间：2012-07-20T07:56:35.463
> 
> 标签：javascript, jquery, forms

我有一个广播组选择用户要搜索的内容。用户不搜索的输入被 JavaScript 隐藏。如何防止它们被提交？例如，如果选择了 radio1，我不希望输入带有`"search-by-date"`要提交的名称。除了删除 name 属性外，有什么办法可以做到吗？如果删除 name 属性是唯一/最好的方法，那么在哪里做呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:24:59.830

我曾经为不发送空值而制作的脚本，它可能会有所帮助，如果没有填写任何内容，它也会禁用表单：

```
$("form").submit(function() {
  var count = $(this).find(':input').filter(function() {
    return $(this).val() != "";
  }).length;
  if (count > 0) {
    $(this).find(':input[value=""]').attr("disabled", "disabled");
    return true;
  } else {
    return false;
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:35:50.923

以 Gijs 代码示例并使其更小：

```
$("form").submit(function() {
    var inputs = $(this).find(':input'),
        emptyInputs = inputs.filter('[value=""]');
    return inputs.length > emptyInputs.length && emptyInputs.prop("disabled", true).length > 0;
}); 
```

它检查所有输入是否为空然后返回 false 但如果有输入有值并且有输入为空，则返回 true 并将空输入设置为禁用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:38:31.387

禁用该字段。

```
$('#your_form_id').submit(function(){
    if($("input:radio[name=radio1]").prop('checked')){
        $("input:radio[name=search-by-date]").prop('disabled',true);
    }
}); 
```

# javascript - 正则表达式替换为插入符号

> ID：11575159
> 
> 赞同：0
> 
> 时间：2012-07-20T07:56:39.360
> 
> 标签：javascript, regex

为什么

```
var a = "1ab";
a = a.replace(/[^\d][a-z]/g, ""); 
```

删除“a”和“b”？我认为它应该只删除“b”，因为“a”前面有一个我被 [^\d] 排除的数字。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:58:02.360

它会删除它们，因为您的字符类`[^\d]`意味着“任何不是数字的东西”。`^`意思是“不是”，意思`\d`是“数字”。所以你的表达的意思是“匹配任何不是数字后跟任何小写字母的东西”，它匹配`"ab"`.

要仅删除前面没有数字的小写字母，使用捕获组可能最简单：

```
a = a.replace(/([\d][a-z])[a-z]/g, "$1"); 
```

这就是说：匹配一个数字后跟一个小写字母（作为一个组）后跟一个小写字母（组外），并将其替换为组的内容。如果要从中删除`"c"`，请在最后一个 之后`"1abc"`添加一个，例如：。`+``[a-z]``/([\d][a-z])[a-z]+/g`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:59:28.530

您的正则表达式说要替换一个不是数字的字符，然后是一个没有任何内容的 az 字符，并替换它找到的所有匹配项。

在您的字符串 1ab 中，它将首先匹配`a`as NOT 数字，然后匹配`b`as az，因此您的字符串中将留下“1”。

如果你想找到一个数字后跟一个字母并提取它，我建议这样做：

```
var match = a.match(/\d[a-z]/);
if (match) {
    var result = match[0];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:01:45.667

你的正则表达式正在做它所说的：

```
var a = "1ab";
a = a.replace(/[^\d][a-z]/g, "");
...............a....b 
```

它正在用“”替换ab

如果您只想替换前面没有数字的字母，您可以执行以下操作：

```
a.replace(/([^\d])[a-z]/g, "$1");
............a.....b   ......a 
```

它用第一个匹配“a”替换ab

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:01:29.073

你想要的可能是一个[消极的lookbehind](http://www.regular-expressions.info/lookaround.html)，换句话说，正则表达式应该是`/(?!<\d)[a-z]/g`。这会发现任何前面没有数字的（小写）字符（我猜这是你想要的，因为你只希望 b 被删除）。

# mysql - distinct(count(ColumnName)) 上是否需要索引，where 子句上有索引？

> ID：11575166
> 
> 赞同：0
> 
> 时间：2012-07-20T07:57:04.090
> 
> 标签：mysql, indexing, sql, query-performance

我有一张这样的桌子

```
Subscribers
  Id (PK, int)
  OwnedBy (FK, int)
  EmailAddress (varchar 50) 
```

如果我这样查询：

```
SELECT COUNT(DISTINCT(EmailAddress))
FROM Subscribers
WHERE Subscribers.OwnedBy = 67; 
```

列上有一个索引`OwnedBy`。假设表很大，我也应该索引`EmailAddress`吗？我不担心写性能下降。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:02:09.767

您应该创建覆盖索引以使其更快。

```
ALTER TABLE Subscribers ADD KET ix1(OwnedBy, EmailAddress); 
```

检查状态为 Using where Using Index with this query：

```
EXPLAIN SELECT COUNT(DISTINCT(EmailAddress))
FROM Subscribers
WHERE Subscribers.OwnedBy = 67; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:12:16.580

是的你应该。

由于您的查询可以这样重写：

```
SELECT COUNT(*)
FROM Subscribers
WHERE Subscribers.OwnedBy = 67
GROUP BY EmailAddress 
```

你应该看看 MySQL`GROUP BY`性能优化页面：

[http://dev.mysql.com/doc/refman/5.0/en/group-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-optimization.html)

在那里，声明如下：

```
The most efficient way to process GROUP BY is when an index is used to 
directly retrieve the grouping columns 
```

因此，如果您不关心插入/更新性能和表的大小，您绝对应该使用索引`EmailAddress`

# mysql - 加入 2 个表的查询问题

> ID：11575168
> 
> 赞同：0
> 
> 时间：2012-07-20T07:57:05.770
> 
> 标签：mysql

此查询未运行..请解决此问题..

```
select q.id,q.name,qq.text 
from quiz q,quiz_question qq 
where qq.quiz_id='1' 
```

桌子：

```
quiz
   id,name
quiz_question
   id,quiz_id,text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:02:35.457

您的查询没有问题。我打赌它会运行但结果错误。您正在`cross` *加入*表格。我想你想要：

```
select q.id, q.name, qq.text 
from   quiz q,quiz_question qq 
where qq.quiz_id = '1' AND
      q.id=qq.quiz_id 
```

但**最好**这样做

```
select q.id, q.name, qq.text 
from   quiz q INNER JOIN quiz_question qq 
           on q.id=qq.quiz_id
where  qq.quiz_id = '1' 
```

还有一件事，如果你的**id**是，`number`那么你**不应该**用单引号括起来。

```
select q.id, q.name, qq.text 
from   quiz q INNER JOIN quiz_question qq 
           on q.id=qq.quiz_id
where  qq.quiz_id = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:06:33.380

```
select q.id,q.name,qq.text 
from quiz q inner join quiz_question qq on q.id = qq.quiz_id
where q.quiz_id='1'; 
```

或者

```
select q.id,q.name,qq.text 
from quiz q inner join quiz_question qq on q.id = qq.quiz_id and q.quiz_id='1'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:04:25.533

不要使用旧的 SQL 语法。如果要连接表，请使用显式`join`

```
select q.id, q.name, qq.text 
from quiz q
inner join quiz_question qq on q.id = qq.quiz_id
where q.id = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:07:08.233

您需要做的是在`quiz_id`.

这可以这样做：

```
 SELECT
  q.id,q.name,
  qq.text
 FROM
  quiz q
  INNER JOIN quiz_question qq ON ( q.id = qq.quiz_id )
 WHERE
  q.id = 1 
```

# android - Android：onStartCommand 完成后，未创建 onDestroy

> ID：11575169
> 
> 赞同：0
> 
> 时间：2012-07-20T07:57:08.443
> 
> 标签：android, android-intent, android-service

任何人都可以帮忙。我已经构建了一个以 BOOT_COMPLETED 意图执行的服务，因此我的服务在设备启动时启动。n 在我的 onStartCommand 中，我正在向 AlarmManger 注册服务，以每 15 分钟执行一次。

这可行，但我注意到我的服务永远不会停止，因此当 onStartCommand 完成时 - 它永远不会停止，永远不会调用 onDestroy。

我需要从 onStartCommand 返回一个整数，我相信它控制着生命周期..

我应该返回什么整数？

我究竟做错了什么？

预先感谢

**编辑**

目前服务返回 super.onStartCommand(......

默认情况下。那么这里返回的是什么？

如果我删除它，我不应该在课堂上我的 onStartCommand 的第一行调用（而不是返回）super.onStartCommand 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:08:39.560

当您调用`onStartCommand()`时，它只会将**意图**传递给您已经创建的服务。它不应该在方法执行后自杀。

要杀死您的服务，请使用`stopSelf()`然后它将调用`onDestroy()`您的服务的方法。

根据您在 onStartCommand 中的要求，您可以返回以下任何值：

*   START_CONTINUATION_MASK
*   START_FLAG_REDELIVERY
*   START_FLAG_RETRY
*   START_NOT_STICKY
*   START_REDELIVER_INTENT
*   START_STICKY
*   START_STICKY_COMPATIBILITY

有关详细信息，请仔细阅读 Android[服务。](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:07:05.617

[服务生命周期](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)的SDK文档说

> 此时服务将继续运行，直到调用 Context.stopService() 或 stopSelf()

对于 的返回值`onStartCommand (Intent intent, int flags, int startId)`，文档说

> 返回值指示系统应该为服务的当前启动状态使用什么语义。它可能是与 START_CONTINUATION_MASK 位相关的常量之一。

和

> public static final int START_CONTINUATION_MASK 自：API 级别 5
> 
> onStartCommand(Intent, int, int) 返回的位描述如何在服务被终止时继续服务。可能是 START_STICKY、START_NOT_STICKY、START_REDELIVER_INTENT 或 START_STICKY_COMPATIBILITY。

所以，如果你想停止你的服务，你应该调用`Context.stopService()`or `Service.stopSelf()`。

# java - JAVA客户端-服务器软件，多台机器

> ID：11575170
> 
> 赞同：0
> 
> 时间：2012-07-20T07:57:12.780
> 
> 标签：java, client-server

我在 java 中开发了一个客户端-服务器游戏（称为“SET”）。

在调试过程中，我遇到了一个非常尴尬的问题：
如果我在同一台机器上同时运行客户端和服务器（客户端连接到本地主机），游戏运行得非常好（如果我同时运行服务器和很多客户端）。

但是，如果我在两台不同的机器上运行客户端和服务器，那么客户端和服务器都会挂在 Inputstream readLine 方法中。

我会提到我正在使用 writeBytes 方法来写入数据，但我总是用 \n 完成一个数据行（如前所述，系统在一台机器上完美运行！）

系统架构如下：

```
public SetServer(){
        this.deck = initCardsList();
        Collections.shuffle(this.deck);

        shownCards = new Card[12];
        for(int i = 0; i<12; i++){
            Card c = this.deck.removeFirst();
            shownCards[i]=c;
        }
        while(!isSetOnTable()){
            Card c = this.deck.removeFirst();
            this.deck.addLast(shownCards[0]);
            shownCards[0]=c;
        }

        playersQueue = new LinkedList<String>();

        clients = new LinkedList<ServerOperation>();
        try{
            ServerSocket welcomeSocket = new ServerSocket(6789);
            while(true)
            {
                if(currNumOfPlayers<5){
                    System.out.println("Waiting for connection...");
                   Socket connectionSocket = welcomeSocket.accept();
                   String line = (new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()))).readLine();
                   currNumOfPlayers++;
                   playersQueue.addLast(line);

                   ServerOperation client = new ServerOperation(connectionSocket,this, line);
                   clients.add(client);
                   Thread t = new Thread(client);
                   t.start();  //<--- This thread listens to client's request
                   notifyPlayersAdded(line,new DataOutputStream(connectionSocket.getOutputStream())); //<-----This method sends 3 lines of data
                }

            }
        }
        catch(Exception e){
                System.out.println(e.getMessage());
            }
    } 
```

* * *

ServerOperation 的运行方法：

```
public void run(){
        if(socket==null){
            return;
        }
        else{
            try{

        //      this.out.writeBytes("NewConnection:" + this.parent.STATUS+"\n");
            //  this.parent.notifyCards();
                while(true){
                    String line = this.br.readLine();
                    String command = line.split(":")[0];
                    if(command.equals("SetRequest")){                       
                        String[] cards = line.substring(line.indexOf(':')+1).split(" ");
                        Card c1,c2,c3;
                        c1 =  new Card(
                                CardShape.values()[(int)(cards[0].charAt(3)-'0')],
                                CardNumber.values()[(int)(cards[0].charAt(2)-'0')],
                                CardFill.values()[(int)(cards[0].charAt(1)-'0')],
                                CardColor.values()[(int)(cards[0].charAt(0)-'0')]);
                        c2 =  new Card(
                                CardShape.values()[(int)(cards[1].charAt(3)-'0')],
                                CardNumber.values()[(int)(cards[1].charAt(2)-'0')],
                                CardFill.values()[(int)(cards[1].charAt(1)-'0')],
                                CardColor.values()[(int)(cards[1].charAt(0)-'0')]);
                        c3 =  new Card(
                                CardShape.values()[(int)(cards[2].charAt(3)-'0')],
                                CardNumber.values()[(int)(cards[2].charAt(2)-'0')],
                                CardFill.values()[(int)(cards[2].charAt(1)-'0')],
                                CardColor.values()[(int)(cards[2].charAt(0)-'0')]);
                        this.parent.checkIfSetAndNotify(c1,c2,c3,this.playerId);
                    }

                }
            }

            catch(Exception e){
                System.out.println(e.getMessage());
            }
        } 
```

* * *

客户代码：

```
 public SetClient()
    {
        String sentence;
        this.myCards = new LinkedList<Card>();
        try{
          String modifiedSentence;
          BufferedReader inFromUser = new BufferedReader( new InputStreamReader(System.in));
          clientSocket = new Socket("10.0.0.3", 6789);
          DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
          BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
          outToServer.flush();
          String name = sayHelloAndGetUserName();
          outToServer.writeBytes(name);
          outToServer.flush();

          sentence = inFromServer.readLine();
          sayWelcome(sentence);
          ClientOperation clnOper = new ClientOperation(clientSocket,this);
          Thread t = new Thread(clnOper);
          t.start(); //<---this thread listens to the server for messages (suppose
//to catch the first 3 lines. In practice, catches only the first one.

          while(!GameOver)
          {
              try{
                    BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); //<-----listens to the user's input
                    String line = br.readLine();
                    String[] choices = line.split(" ");
                    int c1 = Integer.parseInt(choices[0]);
                    int c2 = Integer.parseInt(choices[1]);
                    int c3 = Integer.parseInt(choices[2]);
                    sendSetMessage(outToServer,c1,c2,c3);
                }
                catch(Exception ex){
                    System.out.println("Error listening to system.in...");
                }
          }

        }
        catch(Exception e){
            System.out.println(e.getMessage());
        }
    } 
```

* * *

ClientOperation 的代码：

```
public void run()
    {
        if(socket==null){
            return;
        }
        else{
            try{
                this.br = new BufferedReader(new InputStreamReader(socket.getInputStream()));

                while(true){
                    String line = this.br.readLine();
                    String command = line.split(":")[0];
                    String value = line.split(":")[1];
                    if (command.equalsIgnoreCase("Deck"))
                    {
                        ConvertStringToCards(value);
                        this.parent.PopulateCards(shownCards);
                    }

                    else if (command.equalsIgnoreCase("Points"))
                    {
                        System.out.println("Points: " + value);
                    }

                    else if(command.equalsIgnoreCase("NewPlayer")){
                        System.out.println(value + " has joined the game !\n");
                    }

                    else if(command.equalsIgnoreCase("Hint")){
                        this.parent.printHint(ConvertStringToHint(value));
                    }
                }
            }
            catch(Exception e){
                System.out.println(e.getMessage());
            }
        }
    } 
```

* * *

一般来说，客户端服务器项目将在 1 台机器上完美运行，但会挂在 2 台不同的机器上的原因可能是什么？
PS当我在不同的机器上逐步调试客户端和服务器时，它也可以完美运行。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:02:53.700

如果这不是本地主机的问题，那么很可能如果检查防火墙是否存在，则禁用并再次检查，然后运行 ​​netstat 以检查您的服务器是否正在侦听所有接口，而不仅仅是在环回上。

在linux上，您可以尝试：

```
netstat -nat | grep 6789 
```

它可能也适用于 windows power shell。如果服务器正在您的外部 IP 上运行/侦听并且客户端仍然无法连接并且防火墙被禁用，请安装 wireshark 并查看网络上发生了什么。

# c - 如何将数组存储在数组中并进行比较

> ID：11575174
> 
> 赞同：0
> 
> 时间：2012-07-20T07:57:22.027
> 
> 标签：c

```
#include<stdio.h>
int main()
{
 unsigned char a[3];
 unsigned char b[3];
 int *l[3]=NULL;
 int i = 0;

 a[0]=0;
 a[1]=1;
 a[2]=2;
 b[0]=3;
 b[1]=4;
 b[2]=5;

 l[0]=&a;
 l[1]=&b;
 if(strcmp(l[0],l[1])==0) {
   printf("Compared not same");
 }
 return 0;
} 
```

我想将数组存储在数组“l”中。并对存储在索引 0 和索引 1 处的数组进行比较。我遇到了错误。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:28:46.087

```
#include<stdio.h>
int main()
{
  unsigned char a[3];
  unsigned char b[3];
  unsigned char *l[2];

  a[0] = '3'; a[1] = '4'; a[2] = '\0';
  b[0] = '3'; b[1] = '4'; b[2] = '\0';

  l[0] = a; l[1] = b;
  if(strcmp(l[0], l[1]) != 0) {
    printf("Compared not same");
  } else {
    printf("Compared same");
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:06:28.217

```
#include<stdio.h>
int main()
{
 unsigned char a[3];
 unsigned char b[3];
 unsigned char *l[2];

 a[0] = 0; a[1] = 1; a[2] = 2;
 b[0] = 3; b[1] = 4; b[2] = 5;

 l[0] = a; l[1] = b;
 if(strncmp(l[0], l[1], 3) != 0) {
   printf("Compared not same");
 }
 return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:35:38.890

不确定是否*将数组存储在数组中*，但您应该使用`memcmp`而不是`strcmp`比较数组（因为`strcmp`比较字符串，而您的数组不是字符串）。

```
 unsigned char a[3];
 unsigned char b[3];
 unsigned char *l[2]; // note: corrected a few errors in this line
 int i = 0;

 a[0]=0;
 a[1]=1;
 a[2]=2;
 b[0]=3;
 b[1]=4;
 b[2]=5;

 l[0]=a;
 l[1]=b;
 if(memcmp(l[0],l[1], sizeof(a))==0) { // note: have to specify the length
   printf("Compared same"); // note: reveresed the logic
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:26:07.737

```
int main()
{
    char a[3] = {1, 1, 2};
    char b[3] = {1, 4, 5};
    char *l[2]= {a, b};

    printf( (strncmp(l[0], l[1], 3)==0) ? "Compared are equal" : "Compared are not equal");

 return 0;
} 
```

请注意，0 是行尾，因此字符数组 [0, 1, 2] 和 [0, 5, 5] 相等。此外，如果您在此类数组中没有 0，则可能会导致错误，因为它将是无穷无尽的数组，并且会尝试从内存中获取不适合该数组的值。你真的应该从任何关于语言基础的优秀 c/c++ 书籍开始。

# iphone - 在 UITabViewController 的选项卡之间传递字符串时标签未更新

> ID：11575187
> 
> 赞同：0
> 
> 时间：2012-07-20T07:58:04.267
> 
> 标签：iphone, ios, uiviewcontroller, uitabbarcontroller

我是 iOS 的初学者，我正在编写一些练习代码，其中我试图将字符串从一个选项卡传递到另一个选项卡，`UITabViewController`并使用标签在下一个选项卡中显示它。现在我传递消息的代码是：

```
-(IBAction)sendMessage:(id)sender
{
    MessageRecepientViewController * contoller = [self.tabBarController.viewControllers objectAtIndex:1];
    [contoller passString:_textField.text];
    self.tabBarController.selectedIndex = 1;
} 
```

我在这里（在第二个视图控制器中）收到的文本为：

```
-(void) passString:(NSString *) str
{
    _string = str;
} 
```

在`viewDidAppear`，我正在这样做：

```
- (void) viewDidAppear:(BOOL)animated
{
    self.textLabel.text = [NSString stringWithString:_string];
    NSLog(@"did appear called, str = %@ and label text = %@", _string, self.textLabel.text);
} 
```

并且日志显示字符串的值应该是传递的文本，但 textLabel.text 的值始终为空。

我已经尝试了我能想到的一切，从检查 UILabel 是否连接到`textLabel`插座到在 viewWillAppear 和 viewDidLoad 中编写代码，但到目前为止没有任何效果。字符串显示正确的值，但标签未更新。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:28:04.063

好的发现错误：

这是一个小错字：我声明`IBOutlet`为：

```
IBOutlet UILabel * textlabel; 
```

和财产：

```
@property (nonatomic, strong) UILabel * textLabel; 
```

并已将插座连接到`textlabel`并一直在更新`textLabel`。解决了这个问题，一切都很好！

# google-chrome - 如何个性化 chrome 上下文菜单？

> ID：11575188
> 
> 赞同：0
> 
> 时间：2012-07-20T07:58:04.403
> 
> 标签：google-chrome, contextmenu

我想，当我在网页中选择一个单词并右键单击时，在上下文菜单中有可能：

1）启动我的程序（脚本perl）

和/或

2）可以通过网页中的选择进行搜索（如谷歌或OPAC ...）

对不起我的英语（请你说得非常明确）

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:52:31.463

如果您正在编写扩展程序，则有一个[contentMenu API](https://code.google.com/chrome/extensions/beta/contextMenus.html)允许扩展程序添加此功能。如果您只是最终用户，您可以尝试在 Chrome 网上应用店中寻找您想要的内容。

# android - Android ICS 的 CSS 加载问题

> ID：11575189
> 
> 赞同：1
> 
> 时间：2012-07-20T07:58:14.313
> 
> 标签：android, mysql, css, android-4.0-ice-cream-sandwich, dolphin-browser

我的手机中安装了 Android ICS 4.0.3。我创建了一个移动 Web 应用程序（测试 url [http://drupal.langoor.mobi](http://drupal.langoor.mobi)），为此我从后端的 MySQL 数据库动态地提供 HTML 页面。

**问题**：Android 和 Dolphin 浏览器的默认股票浏览器不呈现 html 页面。在 chrome、firefox、safari 移动浏览器中不会出现此问题。

为了找出问题，我遵循了*这些方法*：

1.  使用 Adob​​e Shadow 对 HTML 页面进行*远程检查*，这并没有多大帮助，因为我在内容加载中看不到任何错误。
2.  假设 Javascript/jQuery 冲突是一个问题，我尝试删除所有从服务器（不是静态）动态提供的链接 js 文件，然后呈现 HTML 页面但没有应用样式。

我尝试搜索并找到此链接，但没有帮助： [Android - html from android_assets in WebView, CSS not loading in ICS](https://stackoverflow.com/questions/9142997/android-html-from-android-assets-in-webview-css-not-loading-in-ics)

这个你能帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:59:42.617

在对Problem进行了更多挖掘之后，我发现问题的主要原因是`content being sent in Uncompressed format from Server`Android ICS的默认设置和Dolphin Browser无法正确呈现它。

这是我提到问题的确切原因的链接。 [为 Apache2 + FastCGI 设置启用数据压缩](https://stackoverflow.com/questions/11726774/enabling-data-compression-for-apache2-fastcgi-setup)

谢谢

# java - 测试替身：可以控制的“假”的名称是什么

> ID：11575192
> 
> 赞同：-1
> 
> 时间：2012-07-20T07:58:19.920
> 
> 标签：java, unit-testing

我一直在编写很多使用假货的 Java 代码，但这些假货的行为是可控的。他们倾向于伪造实际的硬件，所以一个例子可能是一个测试，我告诉假货它应该表现得好像它丢失了通讯，或者报告了硬件故障。一个简单的例子：

```
interface CommDevice {
    boolean isConnected();
}

class FakeCommDevice implements CommDevice {
    private boolean connected;
    public boolean isConnected() {return connected;}
    public void setConnected(boolean x) {connected=x;}
} 
```

我应该将控制代码松鼠到一个新界面中吗？例如

```
class FakeCommDevice implements CommDevice {
    public class Manager () {
        public void setConnected(boolean x) {connected=x;}
    }
    private boolean connected;
    public boolean isConnected() {return connected;}
    public Manager manager() {return new Manager();}
} 
```

这些类当然是赝品的子集，但它们排除了其他赝品类。是否有合适的术语来描述它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:07:42.307

您将有效地为您的“假”（更好地称为“模拟”）类添加新功能，这会使您的代码有点误导。坚持使用相同的界面，如果您还没有的话，请查看 Mockito。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:03:44.217

称它们为[模拟对象](http://en.wikipedia.org/wiki/Mock_object)或只是“模拟”。

# java - 如何将String转换为Long？

> ID：11575196
> 
> 赞同：1
> 
> 时间：2012-07-20T07:58:28.587
> 
> 标签：java, sql

我有一个 TA_PUNCH 表

```
CREATE TABLE TA_PUNCH(
Punch_id bigint not null auto_increment,
Emp_id int references TA_EMP_BADGE.Emp_id,
txn_type int,
Punch_time bigint,
Last_update_time DATETIME,
Last_user varchar(20) references Trace_user.Username,
Primary key(Punch_id)); 
```

我`punch_time`以长`yyyymmdd`格式存储。但是现在用户给出了一个格式的字符串`yyyymmdd`，我必须检索该用户在过去 7 天内的记录。我该如何进行？

应该进行哪些转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:06:44.937

使用 Long.valueOf 像：

```
Long.valueOf(userProvidedString) 
```

其中 userProvidedString 是类似“yyyymmdd”的字符串，例如

```
Long.valueOf("20120720") 
```

将返回长20120720

# mysql - 在删除级联备用

> ID：11575197
> 
> 赞同：2
> 
> 时间：2012-07-20T07:58:34.617
> 
> 标签：mysql, sql, phpmyadmin

我正在尝试为孩子和父母创建一个数据库。表的样子。

> **ChildTable** : *子 ID* (pk) | *父 ID* (fk) | *姓名*
> 
> **ParentTable** :*父 ID* (pk) | *姓名*
> 
> ***外键 ParentTable(parent-id) REFERENCES ChildTable(parent-id) ON DELETE CASCADE***

**问题：** 父母可以有多个孩子，并且父表依赖于子表。如果父母有两个孩子，我们从***ChildTable***中删除一个孩子记录，它也会删除父母，而另一个孩子的记录必须存在于数据库中。

是否有任何其他 MySQL 方法/约束可以满足上述要求。

提前致谢。

> **更新：**我想详细解释我的问题。

我想将以下规则应用于数据库：

*   父表中的一条记录必须始终依赖于子表中的任何一条或两条记录。（同样添加了 FK。）
*   有可能 2 个孩子可以指向同一个 parentID
*   如果我们删除一个具有 parentID 的孩子（比如“abc”），那么如果存在另一个具有相同 parentID 的孩子，则不能删除 parent id。
*   在删除具有相同 parentID('abc') 的第二个孩子时，现在必须将其删除，因为没有具有 parentID('abc') 的孩子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:01:23.650

您的外键应该反转：

```
FOREIGN KEY parent-id REFERENCES ParentTable(parent-id) ON DELETE CASCADE 
```

您希望子表引用父表中的主键。但要小心级联删除：删除父行时，会自动删除其所有子行。

当您删除一个子行时，父行不会发生任何事情。

**更新**：您想要的只能使用触发器来完成。您需要创建一个`AFTER DELETE`触发器`ChildTable`来检查是否`ParentTable`可以删除其中的行。

# php - Session Codeigniter - 自动检查数据

> ID：11575200
> 
> 赞同：0
> 
> 时间：2012-07-20T07:58:39.783
> 
> 标签：php, codeigniter

使用会话 CodeIgniter 执行以下操作的最佳方式是什么？

我有存储在数据库中的具有角色和公司的用户。

我想确定用户角色和公司而不做：

```
if($roles == 'Editor'): 

// do something

endif; 
```

在每个控制器或方法中。

**例子 ：**

如果用户登录了标题中的功能，则检查该功能，如果没有，则重定向到主页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:12:31.540

您是否考虑过使用身份验证库？[Tank Auth](http://www.konyukhov.com/soft/tank_auth/)是一个很好的解决方案，如果您需要角色，可以尝试使用[Tank Auth with Roles](https://bitbucket.org/mtsandeep/tank-auth-with-roles/wiki/Home)库。

此外，如果您想检查用户是否已登录，您可以将代码添加到控制器的构造函数中。

```
function __construct() {
    // Check the user is logged in / roles / etc
    if( ! $roles == 'Editor' ) { redirect('welcome'); }
} 
```

只需在类中添加此代码，它将在该控制器中的任何页面上运行。

# objective-c - 更改objective-c后刷新mainviewController

> ID：11575208
> 
> 赞同：0
> 
> 时间：2012-07-20T07:58:57.537
> 
> 标签：objective-c, uibutton, refresh

我想在更改后重新加载（刷新）我的主视图控制器。我将一些数据添加到数据模型中，并在保存操作后将按钮放在主视图上的数据元素上。在第二个控制器中，我创建了一个编辑部分，在其中我更改或删除了基础数据。我的问题是：如何在从基础中删除元素后重新加载主视图。我创建按钮的代码在 mainviewcontroller 中：

```
 NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Destination" inManagedObjectContext:_managedObjectContext];
    [request setEntity:entity];
    NSError *error = nil;
    mutableFetchResults = [[_managedObjectContext executeFetchRequest:request error:&error] mutableCopy];

    CGFloat y = 130.;

    for (int i = 0; i < [mutableFetchResults count]; i++) {

        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        [button setBackgroundImage:[UIImage imageNamed:[NSString stringWithFormat:@"ikonki%d.png",i]] forState:UIControlStateNormal];

        [button setTitle:@"Test"  forState:UIControlStateNormal];
        NSLog(@"%@",_destination3.nazwa);
        [button setTitleColor: [UIColor whiteColor] forState: UIControlStateNormal];
        [button setEnabled:YES];

        [button addTarget:self
                   action:@selector(buttonHandler:) 
         forControlEvents:UIControlEventTouchUpInside];

        button.tag = i;
        button.frame = CGRectMake(x, y, 64 , 64); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:39:37.753

你知道`NSFetchedResultsController`吗？转到文档并查看*DataSectionTitles*和*iPhoneCoreDataRecipes*示例。在这里你可以找到如何使用这个类。基本上，此类获取您的获取请求，侦听更改，如果您删除/插入/更新/ ...对象，`NSManagedObjectContext`它会触发您可以更新视图的委托方法。

# c# - 在特定文档中启用功能区控件 C# vsto 2010

> ID：11575209
> 
> 赞同：2
> 
> 时间：2012-07-20T07:58:59.803
> 
> 标签：c#, ms-word, vsto, office-interop

我有一个 MS Office 2010**应用程序级**加载项，当它加载时，我的自定义选项卡中的所有功能区控件都被禁用。然后根据某些条件，我运行此方法以启用我的自定义选项卡中的所有功能区控件：

```
 public void EnableRibbonControls()
{
    IUnityContainer container = ServiceLocator.Current.GetInstance<IUnityContainer>();
    RibbonTab customTab = container.Resolve<RibbonTab>();

    for (int i = 0; i < customTab.Groups.Count; i++)
    {
        IList<RibbonControl> controls = customTab.Groups[i].Items;
        foreach (var control in controls)
        {
            control.Enabled = true;
        }
    }
} 
```

问题是此代码启用了**每个**打开的 Word 文档的功能区中的功能区控件，而不是我正在处理的特定文档。

我想知道解决此问题的唯一方法是实现文档级插件还是有人知道在应用程序级插件中解决此问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:39:53.763

我目前通过将 GUID 设置为[自定义文档属性](http://office.microsoft.com/en-us/word-help/view-or-change-the-properties-for-an-office-file-HA010354245.aspx)，然后在我的应用程序级 VSTO 加载项中的 Document.Activate 事件上添加事件处理程序来解决相同的问题（在 Excel 中）。每当激活文档时，我都会检查 GUID，然后相应地隐藏或显示按钮。

精简代码示例：

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    var app = Globals.ThisAddIn.Application;
    app.WorkbookActivate += new Excel.AppEvents_WorkbookActivateEventHandler(Application_WorkbookActivate);
    app.WorkbookDeactivate += new Excel.AppEvents_WorkbookDeactivateEventHandler(Application_WorkbookDeactivate);
}

private Guid _GetIdentity(Excel.Workbook Wb)
{
    try
    {
        // check for GUID
        Microsoft.Office.Core.DocumentProperties properties = Wb.CustomDocumentProperties;
        Microsoft.Office.Core.DocumentProperty version = properties["_CustomIdentifier"];

        // parse the version for decide what features to activate
        Guid guidVersion;
        return Guid.TryParse(Convert.ToString(version.Value), out guidVersion) ? guidVersion : Guid.Empty;
    }
    catch
    {
        return Guid.Empty;
    }
}

void Application_WorkbookDeactivate(Excel.Workbook Wb)
{
   Globals.Ribbons.MyRibbon.btnButtonName.Visible = false;
}

void Application_WorkbookActivate(Excel.Workbook Wb)
{
    if(_GetIdentity(Wb) == {PRE-DEFINED-GUID})
    {
        Globals.Ribbons.MyRibbon.btnButtonName.Visible = true;
    }
} 
```

我的代码特定于 Excel，您需要查看文档中的激活/停用事件的 Word 等效项。

免责声明：这只是我实际代码的摘录，可能包含错误。

# awk - awk 中的多行注释

> ID：11575210
> 
> 赞同：12
> 
> 时间：2012-07-20T07:59:00.983
> 
> 标签：awk

我想知道如何在 awk 中使用多行注释。到目前为止，我一直在使用 # 来注释一行。有人可以指导我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-20T11:33:37.373

AWK 中没有多行注释，但如果需要，您可以伪造它。这是一种至少在 GNU AWK ( `gawk`) 中有效的技术：

```
#!/usr/bin/awk -f
0 {
    You can use
     0 to cause
     a block to
     not execute
     or be parsed
}

{
    print $2, $1, $3
    if (0) {
        You can use if (0)
        in a similar manner
        inside a block
    }
    sum += $4
}

0 && /pattern/ {    # prepend "0 &&" to other conditions to turn off a block
    print
} 
```

很高兴能够在调试期间使用多行注释来注释掉代码段。我不一定会将此技术用于文档，因为它可能无法保证非代码文本不会被解析为语法错误。

它似乎也适用于`mawk`.

# android - 确保请求是否由 Android 应用程序发出？

> ID：11575220
> 
> 赞同：0
> 
> 时间：2012-07-20T07:59:40.823
> 
> 标签：android

我有我的 android 应用程序与之通信的 RESTful http api。有什么方法可以确保请求是否仅来自我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:03:09.713

您可以在您的应用程序中添加自定义 http 标头，并在服务器上检查它。但是，此标头可能会被恶意用户嗅探和伪造。然后你可以更进一步，做一些公钥认证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:10:17.767

您可以使用`IP configuration`，检查您的 IP。您可以使用应用程序服务器的配置文件配置 IP，也可以`pro-grammatically`在您的 REST WS 中进行配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:04:06.820

没有 100% 的证明方法可以做你想做的事。您可以监控[用户代理](http://en.wikipedia.org/wiki/User_agent)标头，该标头将为 Android 设备提供特定值。但是，您仍然可以看到一些 Android 设备没有使用适当的标头。此外，没有人阻止 PC 客户端发送类似 Android 的用户代理标头。

# excel - Excel中的散点图使用xy散点图的时间数据而不转换为数据系列

> ID：11575222
> 
> 赞同：5
> 
> 时间：2012-07-20T07:59:44.947
> 
> 标签：excel, excel-2010, scatter-plot

对于 excel 的 xy 散点图，我有基于时间（“hh:mm:ss”）的 x 和 y 坐标数据。虽然我已将 x 轴数据和 y 轴数据放在相邻列中，并在选择散点图时将它们都突出显示，但 excel 继续将数据识别为不是 x 和 y 坐标，而是两个独立的数据系列。如何让 excel 散点图程序将数据识别为 x 轴和 y 轴数据点而不是数据系列（自变量）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T14:50:21.993

确保 Excel 知道时代就是时代，而不仅仅是看起来像时代的文本。

在两列数据上方插入一行。保持时间（X 值）上方的单元格为空白，在 Y 值上方放置一个标签。选择此范围包括标题行，插入 XY 图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:36:25.757

在制作图表之前，将 x 轴数据的单元格格式更改为 NUMBER 或 TEXT。呈现图表时，将 x 轴的显示格式更改回日期/时间。

# quicktime - 如何在网页中停止通过 Apple Quicktime 插件播放的音频文件

> ID：11575227
> 
> 赞同：2
> 
> 时间：2012-07-20T07:59:57.883
> 
> 标签：quicktime, multimedia, jquery-dialog, audio-player

我正在通过 Quicktime 在 jQuery 对话框中通过下面的代码播放音频文件。一切正常，但我想做的是当我关闭对话框时，我希望音频文件也停止。实际上它一直在玩。

代码：

```
//Listen Music
$('.listenMusic').live('click', function(){
    if($('div.ui-dialog').length){
        $('div.ui-dialog').remove();
    }
    var path = $(this).attr('rel');
    var $dialog = $('<div>', {
        title: Listen
        }).dialog({
        autoOpen: false,
        modal: true,
        width: 400,
        height: 100
    });
    var tab = '<table width="90%" style="margin: 10px 10%;"><tr><td><object codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0" classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B"><param value="'+path+'" name="SRC"><param value="true" name="AUTOPLAY"><param value="true" name="CONTROLLER"><embed pluginspage="http://www.apple.com/quicktime/download/" controller="true" style="height:20px;width:300px;background-color:#D9EBFB" autoplay="true" target="myself" src="'+path+'"></object></td></tr></table>';
    $('<div id="updateContent">').html(tab).appendTo($dialog);
    $dialog.dialog('open');
    return false;

}); 
```

这是我在上面代码中使用的标签

```
<object codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0" 
classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B"><param value="'+path+'"  
name="SRC"><param value="true" name="AUTOPLAY"><param value="true" 
name="CONTROLLER"><embed pluginspage="http://www.apple.com/quicktime/download/" 
controller="true" style="height:20px;width:300px;background-color:#D9EBFB"    
autoplay="true" target="myself" src="'+path+'"></object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:46:58.937

你为什么不这样做

给你的桌子“id”

```
'<table id="myPlayer" width="90%" style="margin: 10px 10%;"> 
```

捕获 jquery 对话框关闭图标（*）事件

```
 $('div.ui-dialog').live("dialogclose", function(){
   if($("#myPlayer").length){
       $("#myPlayer").remove();
   }
   }): 
```

这将从 dom 中删除它，这意味着您的音频文件不再存在，因此它将停止播放。

# java - Java 正则表达式子字符串

> ID：11575229
> 
> 赞同：1
> 
> 时间：2012-07-20T07:59:59.873
> 
> 标签：java, regex, string

嗨，我有一个字符串，想提取一个与正则表达式匹配的子字符串，我当前拥有的代码删除了我希望它成为唯一应该保留的部分的子字符串。

我有什么，这将其删除，我想保留它：

```
String ticketReference = "You have been assigned to the following Support Ticket: ST-00003 bla bla bla";

ticketReference =  ticketReference.replaceAll("'((ST-)[0-9]{5})", " "); 
```

所需输出：“ST-00003”

提前感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:02:14.410

您可以使用捕获组来执行此操作，它们`$n`在 Java 中表示：

```
String ticketReference = "You have been assigned to the following Support Ticket: ST-00003 bla bla bla";
ticketReference =  ticketReference.replaceAll("^.*(ST-[0-9]{5}).*$", "$1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:23:29.153

该`replaceAll`解决方案**没有错误处理**，因此如果未找到匹配项，则字符串保持不变。

* * *

这是使用`Pattern`and的正确方法`Matcher`（在我看来更容易）：

```
String stringToDecode = 
     "You have been assigned to the following Support Ticket: ST-00003 bla bla";

Matcher m = Pattern.compile("ST-[0-9]{5}").matcher(stringToDecode);

if (!m.find())
    throw new CouldNotFindTicketException(stringToDecode);

String ticketReference = m.group();
//... 
```

# ruby - 使用 rvm 安装 ruby 头文件

> ID：11575231
> 
> 赞同：5
> 
> 时间：2012-07-20T08:00:16.627
> 
> 标签：ruby, rvm, header-files, travis-ci

Travis CI 使用 RVM 提供 Ruby，但它似乎不包含标题：

```
$ find /home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/zlib.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/dl.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/syck.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/socket.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/dbm.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/pty.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/strscan.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/io
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/io/console.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/io/wait.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/io/nonblock.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/iconv.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_14.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/gb2312.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_16.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/windows_1251.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/euc_jp.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_4.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_1.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/japanese_euc.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/emoji_sjis_softbank.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/single_byte.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/emoji_sjis_docomo.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/utf8_mac.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/gbk.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/emoji.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/japanese_sjis.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/big5.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/transdb.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/japanese.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/gb18030.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/utf_16_32.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/korean.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/escape.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/emoji_iso2022_kddi.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/chinese.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/iso2022.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/trans/emoji_sjis_kddi.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/encdb.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/utf_16le.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/gbk.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_8.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/euc_tw.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/koi8_r.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_9.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/utf_32le.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/big5.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/shift_jis.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/cp949.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/gb18030.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/koi8_u.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_7.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/utf_32be.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/euc_kr.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_15.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_10.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_3.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/utf_16be.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/emacs_mule.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_2.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_6.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_13.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_5.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/enc/iso_8859_11.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/json
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/json/ext
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/json/ext/generator.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/json/ext/parser.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/curses.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/fiber.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/racc
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/racc/cparse.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/stringio.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/bigdecimal.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/syslog.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/psych.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/rbconfig.rb
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/gdbm.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/date_core.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/pathname.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/etc.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/digest.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/dl
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/dl/callback.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/openssl.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/digest
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/digest/md5.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/digest/rmd160.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/digest/sha2.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/digest/sha1.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/digest/bubblebabble.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/sdbm.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/mathn
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/mathn/rational.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/mathn/complex.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/continuation.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/fcntl.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/objspace.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/readline.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/ripper.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/nkf.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/fiddle.so
/home/vagrant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/coverage.so 
```

如何安装缺少的标题（`ruby.h`和朋友）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-05T00:39:55.307

您可以传递一个选项，该选项`rvm install`将强制`rvm`从源代码编译 ruby​​ 实例：

```
rvm install <ruby-version> --disable-binary 
```

这使我能够成功安装`fog`及其依赖项`nokogiri`。

[我在GitHub 线程](https://github.com/wayneeseguin/rvm/issues/1244)中遇到了这个解决方案；它是由[mpapis](https://stackoverflow.com/users/497756/mpapis)在那里发布的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T14:32:09.950

您在错误的位置进行检查，请检查：

```
$ find /home/mpapis/.rvm/rubies/ruby-1.9.3-p194/ -name ruby.h
/home/mpapis/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/ruby.h
/home/mpapis/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby.h 
```

# php - 将php数组转换为json treeview

> ID：11575234
> 
> 赞同：-1
> 
> 时间：2012-07-20T08:00:46.307
> 
> 标签：php, json, treeview

我有一个像这样的json:(这是用于通过ajax加载treeview的treeview jquery插件)

```
[
{
    "text": "1\. Pre Lunch (120 min)",
    "expanded": true,
    "classes": "important",
    "children":
    [
        {
            "text": "1.1 The State of the Powerdome (30 min)"
        },
         {
            "text": "1.2 The Future of jQuery (30 min)"
        },
         {
            "text": "1.2 jQuery UI - A step to richnessy (60 min)"
        }
    ]
},
{
    "text": "2\. Lunch  (60 min)"
},
{
    "text": "3\. After Lunch  (120+ min)",
    "children":
    [
        {
            "text": "3.1 jQuery Calendar Success Story (20 min)"
        },
         {
            "text": "3.2 jQuery and Ruby Web Frameworks (20 min)"
        },
         {
            "text": "3.3 Hey, I Can Do That! (20 min)"
        },
         {
            "text": "3.4 Taconite and Form (20 min)"
        },
         {
            "text": "3.5 Server-side JavaScript with jQuery and AOLserver (20 min)"
        },
         {
            "text": "3.6 The Onion: How to add features without adding features (20 min)",
            "id": "36",
            "hasChildren": true
        },
         {
            "text": "3.7 Visualizations with JavaScript and Canvas (20 min)"
        },
         {
            "text": "3.8 ActiveDOM (20 min)"
        },
         {
            "text": "3.8 Growing jQuery (20 min)"
        }
    ]
}
] 
```

我想编写一个返回这样的 json的**php 数组。**请帮我。

我尝试了几种方法来做到这一点，但我做不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:16:00.660

您可以使用[json_encode](http://php.net/manual/en/function.json-encode.php) PHP 函数

# c++ - 如何为连接字符串生成可变参数宏

> ID：11575241
> 
> 赞同：2
> 
> 时间：2012-07-20T08:01:01.430
> 
> 标签：c++, c-preprocessor, variadic-macros, boost-preprocessor

我被困在这里...

```
#define CONCAT(a,b) BOOST_PP_STRINGIZE(BOOST_PP_CAT(a,b))
#define CONCAT1(a,b,c) CONCAT(CONCAT(a,b),c) and so on.
```

即使有 20 个参数，我如何生成 CONCAT 宏？也许我可以使用**BOOST_PP_SEQ_FOR_EACH**但我不明白该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:23:47.630

这取决于您的用例。

这

```
#include <boost/preprocessor/cat.hpp>
#include <boost/preprocessor/stringize.hpp>
#include <boost/preprocessor/seq/for_each.hpp>

#define SEQ (a)(b)(c)

BOOST_PP_STRINGIZE(BOOST_PP_SEQ_CAT(SEQ)) // "abc" 
```

将连接序列，然后将其字符串化。也可以简单地将每个参数字符串化为`"a" "b" "c"`等效于`"abc"`.

```
#define MY_STRINGIZE(r, data, elem) BOOST_PP_STRINGIZE(elem)
BOOST_PP_SEQ_FOR_EACH(MY_STRINGIZE, _, SEQ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:12:29.423

由于您已经在使用 Boost 库，请尝试`BOOST_PP_SEQ_CAT`（[文档](http://www.boost.org/doc/libs/1_45_0/libs/preprocessor/doc/ref/seq_cat.html)）。它需要一个元素列表并将它们简单地连接在一起，即`BOOST_PP_SEQ_CAT(a b c)` 结果为`abc`.

# url - 奇怪的 s:url 行为

> ID：11575244
> 
> 赞同：0
> 
> 时间：2012-07-20T08:01:14.443
> 
> 标签：url, struts2

我刚刚发现了一些有趣的东西，我无法解释。有人可以解释一下。

我在我的jsp文件中定义了一个url

```
<s:url var="test" action="Home.action" escapeAmp="false">
    <s:param name="departYear" value="2006"/>
    <s:param name="homeTown" value="lanzhou"/>
</s:url>
<p><s:property value="test"/></p> 
```

结果是`/path/to/action/Home.action?departYear=2006`，如果我更改了第二个参数`<s:param name="homeTown" value="123456"/>`，那么它会正确显示我并`/path/to/action/Home.action?departYear=2006&homeTown=123456`没有尝试打印，`url`并且它在使用更多参数时总是可以正常工作。它根本没有引发任何问题。我只是好奇，为什么它不适用于`s:property`.

顺便说一句，我也更改了 2 个参数的顺序，它也没有在 url 中显示参数。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:00:07.810

请参阅[文档](http://struts.apache.org/2.x/docs/tag-syntax.html)...它说这**`value`是一个 Object**，而不是一个字符串。

`<s:param name="homeTown" value="lanzhou"/>`将调用`getLanzhou()`您的操作类的方法来尝试填充该值。

你想要的是`<s:param name="homeTown" value="%{'lanzhou'}"/>`

`<s:param name="departYear" value="2006"/>`之所以有效，是因为非字符串属性类型不被解析，而是直接作为表达式求值。

# android - adb 如何安装和工作以使用 shell android？

> ID：11575252
> 
> 赞同：1
> 
> 时间：2012-07-20T08:01:48.737
> 
> 标签：android, shell, adb

如何安装亚行？我需要做什么才能进入安卓手机的外壳？

我安装了 SDK，现在我正在使用 Eclipse。如何使用 ADB 安装应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:06:24.830

去

->Android->android-sdk->platform-tools>adb.exe 从命令提示符

它会给你一个选项列表如何使用它 adb

从 adb 安装 apk

```
adb install myapk.apk(path to apk) 
```

有关其他 ADB 命令信息，请查看此链接

[http://www.linuxtopia.org/online_books/android/devguide/guide/developing/tools/android_adb_commandsummary.html](http://www.linuxtopia.org/online_books/android/devguide/guide/developing/tools/android_adb_commandsummary.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:08:32.607

右键单击“计算机”-> 属性-> 高级系统设置-> 环境变量

然后添加`;C:\Program Files (x86)\Android\android-sdk\tools;C:\Program Files (x86)\Android\android-sdk\platform-tools`到系统路径变量的末尾。**确保您位于整个路径变量的末尾，这样您就不会覆盖当前存在的内容**

然后打开命令窗口并输入`adb install apkLocation\myApp.apk`

# jquery - 如果在创建页面时没有加载图像，如何删除图像标签

> ID：11575255
> 
> 赞同：0
> 
> 时间：2012-07-20T08:02:10.877
> 
> 标签：jquery, css, image

```
$image ='< img src="http://xyz.com/'.$add_image4.'" class="magnify" alt="/>'; 
```

& 如果`$add_image4`为空，空白图像仍显示如何删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:08:31.940

你可以使用这个：

```
<img src="http://theglenbot.com/a-broken-image.jpg" onerror="this.parentNode.removeChild(this);" /> 
```

[这个帖子](http://theglenbot.com/html-image-tag-onerror-attribute/)可能会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:13:12.513

下面是如何在 jQuery 中做到这一点：

```
$(function() {
    $("img.magnify").on('error', function() {
        $(this).remove();
    });
}); 
```

如前所述，`class="magnify"`如果加载失败，将删除所有带有的 img 节点。

可以根据需要调整“img.magnify”选择器以处理更多/更少/不同的 img 节点。

# php - 带有 2 个 foreach 语句的 PHP foreach 格式

> ID：11575257
> 
> 赞同：0
> 
> 时间：2012-07-20T08:02:12.717
> 
> 标签：php, foreach

我想问一下我的代码是否正确。

我有这两个爆炸命令：

```
$url = 'http://google.com, http://yahoo.com, http://msn.com, http://yahoo.com, http://msn.com, http://yahoo.com, http://msn.com';
$key = 'google, yahoo, msn';
$xurl = explode( ',', $url );
$xkey = explode( ',', $key );

foreach ( $xurl as $hyperlink ) {
    foreach ( $xkey as $keyword )
    $sqlHyperLink = mysql_query( "INSERT INTO jon_hyperlink VALUE( '', '$hyperlink', '$keyword', NOW() )" ) or die ( mysql_error() );
}
    echo 'Hyperlink Created'; 
```

***更新******** 如果您注意到，`$url`变量列出了 7 个 url，我有 3 个关键字。我怎样才能使关键字重复...

我如何插入带有 1 的字符串，`foreach`因为我`foreach`在查询中使用了 2 并且它插入了 2 次。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:06:46.500

你可以做：

```
$xurl = explode( ',', $url );
$xkey = explode( ',', $key );

$assoc = array_combine($xkey, $xurl);

foreach ($assoc as $keyword => $hyperlink) {
    //insert here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:06:47.593

使用索引敲击数组。

```
$numItems = count($xurl);
for ($i=0; $i<$numItems; $i++) {
    $sqlHyperLink = mysql_query( "INSERT INTO jon_hyperlink VALUE( '', '{$xurl[$i]}', '{$xkey   [$i]}', NOW() )" ) or die ( mysql_error() ); 
} 
```

理想情况下查看 PDO，您可以在其中将值绑定到准备好的查询 - 不过它更快、更安全、更好的做法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:13:51.223

```
$url = 'http://google.com, http://yahoo.com, http://msn.com, http://yahoo.com, http://msn.com, http://yahoo.com, http://msn.com';
$key = 'google, yahoo, msn';
$xurl = explode( ',', $url );
$xkey = explode( ',', $key );

foreach ($xurl as $i => $keyword) {
    $sqlHyperLink = mysql_query( "INSERT INTO jon_hyperlink VALUE( '', '{$xkey[$i]}', '$keyword', NOW() )" ) or die ( mysql_error() );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:13:59.207

如果您的 $url 和 $key 以正确的顺序映射在一起，您可以只使用带有索引的简单 for 循环并访问每个循环的两个数组。

```
for($i = 0; $i < sizeof($key); $i++)
{
    mysql_query("insert ... $key[$i] .. $url[$i] ..");
} 
```

# sql - SO如何计算数据库中的投票数、答案数和视图数？

> ID：11575259
> 
> 赞同：0
> 
> 时间：2012-07-20T08:02:16.173
> 
> 标签：sql, tsql, select, join, count

我认为 SO 和其他问答系统是高级 TSQL 技术的完美示例。我想知道 SO 和其他问题/答案系统如何与数据库表一起使用。我对什么是 TSQL 选择问题列表特别感兴趣，您还想在其中显示投票数和答案。

表`question`将被指定为

```
id       int 
title    varchar
id_user  int 
```

表格`votes`，以便您可以监控用户对特定问题的投票

```
id_user       int
id_question   int
vote          int 
```

表“答案”与问题的答复

```
id           int
id_parent    int 
```

什么会选择看起来像这样得到结果`question`：

```
id                 int
title              varchar
votes_count        int
answers_count      int 
```

我在想两种方法

1.  表格`question`将根据每次投票或回答重新计算，`votes_count`并`answers_count`直接在`question`表格中更新表格字段。这意味着表`question`也会`votes_count int, answers_count int`
2.  创建将加入的选择，`count`直接在`votes`或`answers`表中计算并仅在表中显示结果`question`。每次选择都计算所有投票和答案记录会损失多少速度？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:08:21.083

我**猜**SO 只是为此使用了 3 个表 - 问题、投票和答案，并在不进行任何缓存的情况下加入它们（问题表中没有 answer_cnt / vote_cnt 列）。

性能损失应该没什么好担心的——毕竟，SO“只有”大约 3.4 个 mio 问题（根据 SO 起始页），对于现代 RDBMS 来说，这确实不是很多数据。

# c++ - 用单个值初始化 std::vector - 重复还是 push_back()？

> ID：11575262
> 
> 赞同：2
> 
> 时间：2012-07-20T08:02:20.720
> 
> 标签：c++, stl, vector, constructor, std

我有一个（虚拟）函数，它返回`std::vector`一个单一的值。让我们假设这个类看起来像：

```
#include <vector>

class Z; // irrelevant

class C
{
    Z& something;

public:
    typedef std::vector<Z*> list_type;

    virtual list_type f();
}; 
```

使用重复构造函数是否更好：

```
C::list_type C::f()
{
    return list_type(1, &something);
} 
```

或者只是`push_back()`单个元素：

```
C::list_type C::f()
{
    list_type ret;

    ret.push_back(&something);

    return ret;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:06:50.117

它们在功能方面基本上是等效的，但`return list_type(1, &something);`可能更有效，因为您直接将向量预分配到其所需的容量，而且您避免调用`push_back`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:08:04.740

如果你的编译器足够新来处理 C++11[初始化列表](http://en.wikipedia.org/wiki/C%2B%2B11#Initializer_lists)，你可以用它来表示：

```
C::list_type C::f()
{
    return list_type{&something};
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T08:09:45.723

如果您认为“更好”是“短代码”，那么重复构造函数可能会更好，因为它更短，因此更简洁。

在功能方面，两者是相等的。

在性能方面，重复构造函数可能会更好，因为它可以`reserve()`预先知道它将要分配的元素总数。但是，您使用它只是为了创建一个元素，所以我想这并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:14:28.853

一般来说，使用重复形式会更好，因为`vector`那样会精确分配`N`元素，用给定的值初始化它们（与为`log2(N)`时间重新分配底层数组相比，这将在重复`push_back()`的情况下发生）。

但是在只有一个指针的情况下，差异可以忽略不计；并使用`-O3`或任何可能会将这些构造转换为相同的汇编代码。

# python - 使用 django 表单打印错误时出现问题

> ID：11575267
> 
> 赞同：0
> 
> 时间：2012-07-20T08:02:43.567
> 
> 标签：python, django

在这里处理 django 表单，我遇到了错误。我知道如何检测它们，但我不能（由于某些原因）在不正确的表单下打印错误。

班上 ：

```
class descclient_form(forms.Form):

TYPE_CHOICE = (
('C', ('Client')),
('F', ('Facture')),
('V', ('Visite'))
)

file_type = forms.ChoiceField(choices = TYPE_CHOICE, widget=forms.RadioSelect)
file_name = forms.CharField(max_length=200)
file_cols = forms.CharField(max_length=200, widget=forms.Textarea)
# file_date = forms.DateField()
file_sep = forms.CharField(max_length=5, initial=';')
file_header = forms.CharField(max_length=200, initial='0')

# Check if file_cols is correctly filled
def clean_cols(self):
    cleaned_file_type = self.cleaned_data.get("file_type")
    cleaned_file_cols = self.cleaned_data.get("file_cols")

    if cleaned_file_type == 'C':
        if 'client' not in cleaned_file_cols:
            self._errors['file_cols'] = [u'Requiers \'Client\' in collumn selection']
            print 'error'
    if cleaned_file_type == 'F':
        mandatory_field = ('fact', 'caht', 'fact_dat')
        for mf in mandatory_field:
            if mf not in cleaned_file_cols:
                self._errors["file_cols"] = self.error_class(['Requiers \'fact\', \'caht\' \'fact_dat\ in file_cols'])
                print 'error'
    return self.cleaned_data 
```

这是调用的函数：

```
def descclient(request):

if request.method == 'POST':
    form = descclient_form(data=request.POST)
    if form.is_valid():
        form.clean_cols()
return render_to_response('descclient.html', {'form': descclient_form}, context_instance=RequestContext(request)) 
```

和模板：

```
<form action="/descclient" method="post">
<div class="fieldWrapper">
    {{ form.file_type_errors }}
    <label for="id_subject">File type:</label>
    {{ form.file_type }}
</div>

<div class="fieldWrapper">
    {{ form.file_name_errors }}
    <label for="id_subject">File name:</label>
    {{ form.file_name }}
</div>

<div class="fieldWrapper">
    {{ form.file_cols_errors }}
    <label for="id_subject">Collumns:</label>
    {{ form.file_cols }}
</div>

<div class="fieldWrapper">
    {{ form.file_sep_errors }}
    <label for="id_subject">Separator:</label>
    {{ form.file_sep }}
</div>

<div class="fieldWrapper">
    {{ form.file_header_errors }}
    <label for="id_subject">Header:</label>
    {{ form.file_header }}
</div>
{% csrf_token %}
<p><input type="submit" value="Validate"></p> 
```

对于某些原因，“{{ form.file_cols_errors }}”不打印任何内容

编辑 ：

因此，正如所指出的，我将 clean_cols 方法更改为 clean。我一定是迷路了，因为它甚至没有进入 if 语句

```
def clean(self):
    cleaned_data = super(descclient_form, self).clean()
    cleaned_file_type = cleaned_data("file_type")
            cleaned_file_cols = cleaned_data("file_cols")

    if cleaned_file_type == 'C':
        if 'client' not in cleaned_file_cols:
            raise forms.ValidationError("This field throws an error")
    if cleaned_file_type == 'F':
        mandatory_field = ('fact', 'caht', 'fact_dat')
        for mf in mandatory_field:
            if mf not in cleaned_file_cols:
                raise forms.ValidationError("This field throws an error")
    return cleaned_data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:09:05.667

而不是在你应该实现方法并在那里进行这些验证`clean_cols`之后调用。`is_valid()``clean`

有关更多详细信息，请参阅[https://docs.djangoproject.com/en/1.4/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other](https://docs.djangoproject.com/en/1.4/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:08:35.410

您应该在“clean_file_cols”方法中引发 ValidationError：

```
raise forms.ValidationError("This field throws an error") 
```

有关详细信息，请查看[文档](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-a-specific-field-attribute)。顺便说一句：您应该避免在 django 项目中的任何地方使用“打印”，因为在大多数网络服务器配置中，它会导致服务器错误。请改用日志记录。

# c++ - Editable QComboBox：将编辑文本与项目文本同步

> ID：11575268
> 
> 赞同：2
> 
> 时间：2012-07-20T08:02:48.630
> 
> 标签：c++, qt, user-interface, qcombobox

我有一个`QComboBox`我想“自动”编辑的。也就是说，每次用户手动更改当前项目的文本时，该文本应该自动“落入”底层模型。

到目前为止，我已经通过自定义信号处理程序实现了这一点：

```
void setupUi() {
    ...
    connect( someComboBox,
             SIGNAL(editTextChanged(QString)),
             SLOT(comboBoxEditTextChanged(QString)) );
    ...
}

void comboBoxEditTextChanged( const QString& text ) {
    someComboBox->setItemText( someComboBox->currentIndex(), text );
} 
```

所以我想知道，有没有可能用更少的代码来做到这一点？我试过`QComboBox::setInsertPolicy(QComboBox::InsertAtCurrent)`了，但这没有帮助。

**编辑：**具有自定义插槽的当前方法可以正常工作 - 但我问是否有*不涉及*任何信号/插槽的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:01:53.307

要在 USER 更改文本时自动设置文本，我们可以按如下方式编辑您的插槽：

```
void comboBoxEditTextChanged( const QString& text ) 
{
    int index = someComboBox->findText(text);
    if(index != -1)
    {
      someComboBox->setCurrentIndex(index);
     }
    someComboBox->setItemText( someComboBox->currentIndex(), text );
} 
```

我希望这能解决你的问题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T08:18:28.383

QComboBox 可以使用手动添加项目

```
combo->additem("X"); 

combo->addItem(QString Y); 
```

而您可以管理其中的最大项目数。请通过以下链接了解详细信息。

[一条链接](http://www.developer.nokia.com/Community/Wiki/Archived%3aHow_to_use_QComboBox_in_Qt)

所以，在你的插槽中，

```
void comboBoxEditTextChanged( const QString& text ) 
{
    someComboBox->addItem(text);
} 
```

# crystal-reports - IFS 水晶报告错误

> ID：11575276
> 
> 赞同：0
> 
> 时间：2012-07-20T08:03:08.910
> 
> 标签：crystal-reports, windows-installer, activex, ifs-erp

在我的公司，我们使用 IFS 作为 ERP 解决方案。在 IFS 中，我们正在为 IFS 未提供的报表创建 Crystal Reports。

问题是，我使用的是 Windows 7 64 位，我需要为 Crystal Reports 安装运行时文件。如果没有这个，当我尝试获取报告时，我会收到以下错误：

[https://dl.dropbox.com/u/3377689/ifs_cp_error.JPG](https://dl.dropbox.com/u/3377689/ifs_cp_error.JPG)

我和一些前员工谈过，他告诉我，如果我为水晶报表安装运行时文件，它将解决问题。

我搜索了互联网，但找不到任何可用的安装程序。我有一个安装程序“Crystal Runtime File Setup.msi”，但是当我尝试运行它时，它似乎提取了它的组件，但安装屏幕不会出现。

是因为这个安装程序是 32 位的还是我的 msi 安装程序有问题？

无论如何，有什么可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:48:08.430

删除 IFS 运行时中属于 Crystal Reports 的 dll 文件（crpaig32.dll,CRPE32.DLL,crwrap32.dll,cslibu-2-0-0.dll,....）或用当前安装中的文件替换它们文件夹。

问题发生在您的报告 cryst.version 和 IFS 运行时文件夹中的水晶查看器的 dll 版本之间存在冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T12:39:11.197

如果您运行的是 IFS Applications 版本 8 或更高版本，Crystal 运行时安装程序位于您的应用程序服务器上。将用户的 Web 浏览器指向您的应用程序服务器的主页，然后单击“附加组件”页面。安装程序应该是那里的链接。

我为 IFS 8.1 找到了这个，但我不保证它是合法的：[http ://demo.ifs.com.tr:58080/add-on.html](http://demo.ifs.com.tr:58080/add-on.html)

编辑：对于 7.5 版，Crystal 运行时安装程序位于首页。

# java - 拆分字符串时出现异常

> ID：11575278
> 
> 赞同：0
> 
> 时间：2012-07-20T08:03:20.680
> 
> 标签：java, android

我有以下字符串`str = "one|two|three|four|five"`
，我尝试使用 拆分它`str1[]=str.split("\\|");`，但它在调试时显示异常。
错误是`Exception processing async thread queue`。这是什么以及怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:07:54.803

请试试这个...

```
in = "Your String";  
StringTokenizer st = new StringTokenizer(in, "|");  
while(st.hasMoreTokens()) {   
  String str = st.nextToken();  
  System.out.println(str);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:08:33.957

试试这个，

```
 String tempString="one|two|three|four|five";
 String str1[]=tempString.split("\\|");
       for(int i=0;i<str1.length;i++)
       {
           Log.i("Str1["+i+"]",str1[i]);
       } 
```

结果是，

```
Str1[0]: one
Str1[1]: two
Str1[2]: three
Str1[3]: four
Str1[4]: five 
```

# c# - “跨线程操作无效”的行为

> ID：11575283
> 
> 赞同：0
> 
> 时间：2012-07-20T08:03:41.920
> 
> 标签：c#, task-parallel-library, multithreading

我试图从 GUI 中读取值，并使用`Task`. 我不明白的是，它只会因为组合框字段（即`tab3_ddl_Range.SelectedText`）而产生错误，如果我删除它，错误就会消失。它不应该仍然给出错误吗？当我从非 GUI 线程访问 GUI 时？

```
factoryA.StartNew(() => ReadInstrument_3(
    Globls.numReadings, tab3_txt_Address.Text.TrimEnd(), tab3_rb_DCI.Checked,
    tab2_rb_DCV.Checked, tab3_ddl_Range.SelectedText.TrimEnd(),
    tab3_rb_FixedZ_10G.Checked, tab3_rb_FixedZ_10M.Checked,
    tab3_rb_Azero_Off.Checked, tab3_rb_Azero_On.Checked,
    tab3_rb_Azero_Once.Checked, tab3_txt_Aper.Text.TrimEnd(),
    tab3_txt_Device_Timeout.Text.TrimEnd(), tab3_txt_SICL.Text.TrimEnd()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:41:14.393

控件的某些属性被缓存并且不需要调用 winapi 来检索它们的值。特别是 Text 属性存储在内部字符串中。因此，在线程中读取 Text 属性不会引发异常，因为它只会返回字符串值。然而，写作确实需要更新该字符串*并*进行 winapi 调用以更新本机窗口。

触发异常的是winapi调用。特别是访问 Handle 属性。

# asp.net - 如何在asp.net中一次向多个用户发送一封电子邮件？

> ID：11575294
> 
> 赞同：0
> 
> 时间：2012-07-20T08:04:38.333
> 
> 标签：asp.net, email, carbon-copy

我想向多个用户发送一封邮件。我已经提取了数据表中所有这些人的电子邮件地址，现在我想知道如何通过邮件将此数据表传递给密件抄送或抄送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:09:46.700

你通过做这样的事情来实现它

```
MailMessage MyMail = new MailMessage();
 MyMail.From = "some email address";

foreach(DataRow row in dataTable1.Rows)
{
 MyMail.To += row["email"] + ";"
} 
```

# javascript - 执行 SOAP xml 请求

> ID：11575295
> 
> 赞同：2
> 
> 时间：2012-07-20T08:04:39.963
> 
> 标签：javascript, xml, soap, textbox

所以在我的公司中，我们使用 SOAP API 来连接到我们的系统，而且我对它进行了很好的排练并且可以使用所有的调用。

我只想知道如果我想构建一个可以执行 API 查询的测试登录页面，我应该从哪里开始。

如果可能的话，我更愿意使用 JavaScript，因为我们的服务器上没有安装 PHP。

寻找从哪里开始的一些方向 - 我只是从文本框中获取一个值并放置在 XML 请求中并执行它:)

任何指针表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:05:13.430

```
<script>
function fireRequest(){

            ..
            //parse your SOAP Request and set the request with 'dataContent'
            ...

            var url = //your target gateway here Java/PHP or your web service recpetor
            var postStr =//xml SOAP resquest ;
            makeRequest(url, postStr);
            }

    function getXmlHttpRequestObject() {
         if (window.XMLHttpRequest) {
            return new XMLHttpRequest(); //Mozilla, Safari ...
         } else if (window.ActiveXObject) {
            return new ActiveXObject("Microsoft.XMLHTTP"); //IE
         } else {
            alert("Your Browser does not support XMLHTTP");

         }
     }
    function makeRequest(url, param) {
    //If our readystate is either not started or finished, initiate a new request
        //clearing all divs
        receiveReq = getXmlHttpRequestObject();
        if (receiveReq.readyState == 4 || receiveReq.readyState == 0) {

           //Set up the connection to captcha_test.html. True sets the request to asyncronous(default) 
           receiveReq.open("POST", url, true);
           //Set the function that will be called when the XmlHttpRequest objects state changes
           receiveReq.onreadystatechange = responseHandler; 

           //Add HTTP headers to the request
           receiveReq.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
           receiveReq.setRequestHeader("Content-length", param.length);
           receiveReq.setRequestHeader("Connection", "close");
           //Make the request
           receiveReq.send(param);
        }   
    }
    function responseHandler(){

        if (receiveReq.readyState == 4) {

            var response = receiveReq.responseText;
            if(response){
            //do what ever you want with the response XML

            }   
        }
    }
</script> 
```

这对你的情况来说已经足够了。使用您页面上的方法。

# wpf - WPF 运行时策略模式，如 UserControl 插入

> ID：11575298
> 
> 赞同：0
> 
> 时间：2012-07-20T08:04:43.510
> 
> 标签：wpf, user-controls

我得到了一个对一系列文件类型通用的用户控件。此用户控件需要保存并显示另一个特定于每个文件的用户控件。所以我喜欢一种基于文件类型的策略模式用户控件选择。因此，如果用户打开文件 A，则子用户控件将属于 ucA 类型，如果他打开文件类型 B，它将属于 ucB 类型

什么是最好的方法。

父用户控件是否应该持有一个 ContentPresenter 我在运行时可以根据文件类型插入正确的子用户控件？或者有没有更好的方法来解决它。

或者只是运行一些说明或类似效果的代码隐藏。

```
parentUCPanel.Children.Add(Factory.GetUC(filetype)); 
```

忘了补充一点，我希望子用户控件具有共同的基本类型，并带有一些依赖属性以绑定到父用户控件的视图模型。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:08:06.487

看看[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)是否有用。

# xen - Xen 从哪里开始？

> ID：11575299
> 
> 赞同：4
> 
> 时间：2012-07-20T08:04:43.840
> 
> 标签：xen

我是 Xen 的新手。我想知道 Xen 是如何工作的。面对代码时真的是一个难题，我不知道从哪里开始。有适合我的简单文章吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T20:34:36.457

由于您提到查看代码，我假设您想了解 Xen 的技术细节，而不仅仅是如何启动 VM。

与所有问题一样，从简单的事情开始，然后逐步向上。一些指示：

1.  一定要具备必备的经验。特别是强大的 C 和 Linux 亲和力，以及 x86 分页和虚拟化内存工作。

2.  确保您对一般的 Xen 架构有很好的掌握。例如，半虚拟化与硬件支持的虚拟化，管理域 (Dom0) 与非特权域 (DomU) 相比的特殊作用等。

3.  调查在 Dom0 中运行的 Xen 组件：

    *   *Xen 控制*库 ( **libxc** ) 实现了与超级调用相关的大部分逻辑并在这些逻辑周围添加了糖（查看）`tools/libxc`。

    *   用于管理 Xen 的瑞士军刀，即*Xen 轻*库 ( **libxl** )。`xm`该库用该工具替换了已弃用的工具，`xl`并负责您的所有维护任务，例如启动/停止 VM、列出所有正在运行的 VM 等。对于所有这些操作，它与上述 libxc 协同工作。（Libxl 位于`tools/libxl`.）

    *   **Xenstore**是一种树状数据结构，所有正在运行的域都可以从中检索和存储数据。这是必要的，因为所有 I/O 都通过 Dom0（而不是虚拟机管理程序！），并且域需要与 Dom0 通信它们将如何传递 I/O。（查看`tools/xenstore`。）您可以使用诸如`xenstore-ls`.

    *   `blkback`/`netback`内核驱动程序通过*共享通道*将数据传递给VM。（您会在最近的 Linux 内核（例如 >= v3.0）中找到这些驱动程序，该内核具有所谓的 PVOPS 支持）。

    *   看看控制台守护程序 ( `tools/console`)。请注意，有时实际使用的是 Qemu 控制台。如果您为 VM 选择文件支持的虚拟存储，Qemu 也作为默认后端出现在图片中。

4.  试验虚拟机间通信的“Xen 方式”：授权表、事件通道和 Xenstore。借助这些基础知识，您可以在 VM 之间创建自己的共享通道。例如，您可以通过编写在两个域中使用的内核模块来让它们相互通信来做到这一点。

5.  我还可以在源代码中提供一些您可以查看的指针：

    *   `xen/xen/include/public/xen.h`将为您提供所有超级调用的列表，并附上他们所做的评论。

    *   `xen/xen/include/xen/mm.h`向您介绍 Xen 使用的不同内存术语（即真实地址与虚拟地址和页码）。如果您不掌握这些差异，那么阅读虚拟机管理程序代码肯定会令人沮丧。

    *   `xen/xen/include/asm-x86/config.h`概述了 Xen 的内存布局。

    *   `xen/tools/libxc/xenctrl.h`导出大量有趣的域控制操作，它提供了 Dom0 和管理程序之间任务划分的抽象视图。

最后但同样重要的是，强烈推荐 David Chisnall所著的《 *Xen Hypervisor 权威指南》一书。*它以全面的技术方式涵盖了所有这些主题以及更多内容，并提供了大量代码示例。

Xen wiki 和开发者邮件列表也是了解 Xen 的重要资源。

如果您有更具体的问题，那么我可以给您更具体的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T21:24:02.267

如果您只是想要一个概述，您可以阅读以下内容：[http](http://wiki.xenproject.org/wiki/Xen_Project_Beginners_Guide) ://wiki.xenproject.org/wiki/Xen_Project_Beginners_Guide 。
这将向您介绍 Xen 虚拟机管理程序，建议配置以设置虚拟机，提供有关网络的信息，最后提供有关虚拟机管理工具的详细信息。

本文档是专门在 ubuntu 上获取 Xen（最重要的是，它有效！） [https://help.ubuntu.com/community/Xen](https://help.ubuntu.com/community/Xen)

===

但是，如果您想更上一层楼并了解 Xen 的工作原理；Xen 架构、内存管理、设备管理、CPU 调度等，我建议阅读**《Xen Hypervisor 权威指南》**一书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:17:31.637

这里有几个链接可以指导您使用 ZEN Start up。希望它们对您有用。

[http://www.howtoforge.com/howtos/virtualization/xen](http://www.howtoforge.com/howtos/virtualization/xen)

[http://wiki.xen.org/wiki/Category:HowTo](http://wiki.xen.org/wiki/Category:HowTo)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T19:38:13.277

[http://wiki.debian.org/Xen](http://wiki.debian.org/Xen)

对我来说，这是最好的、更具体的教程，其中包含示例并逐步开始。我开始的时候用过。

然后您可以阅读更多关于 Xen 文档本身或一些书籍的内容，但作为让您轻松安装和测试 Xen 的起点，我选择了 Debian Wiki 中的该教程。

# ruby - 使用涟漪链接行走 riak 时重复

> ID：11575301
> 
> 赞同：1
> 
> 时间：2012-07-20T08:04:47.560
> 
> 标签：ruby, riak

我正在做一个将 Riak 与 Ripple 结合使用的项目，但我偶然发现了一个问题。出于某种原因，我在链接结构时会出现重复。当我使用 curl 链接 walk 时，我看不到重复项。

我的基于 curl 的链接步行之间的区别

```
curl -v http://127.0.0.1:8098/riak/users/2306403e5177b4716da9df93b67300824aa2fd0e/_,projects,0/_,tasks,1 
```

和我的基于 ruby​​ipple/riak-client 的链接步行

```
 result =   Riak::MapReduce.new(self.robject.bucket.client).
            add(self.robject.bucket,self.key).
            link(Riak::WalkSpec.new({:key => 'projects'})).
            link(Riak::WalkSpec.new({:key => 'tasks', :bucket=>'tasks'})).
            map("function(v){ if(!JSON.parse(v.values[0].data).completed) {return [v];} else { return [];} }", {:keep => true}).run 
```

据我所知，最后是地图。

然而，map/reduce 的结果包含多个重复项。我无法理解为什么。现在我已经决定根据密钥删除重复项，但我希望 riak 结果不包含重复项，因为最后删除重复项似乎是浪费。

我尝试了以下方法：

*   确保我的波纹对象的链接集中没有重复项
*   在没有 map reduce 的情况下加载数据，但 link walk 包含重复的键。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:48:58.947

您在这里遇到的是 Map/Reduce 查询的一个有趣的副作用/挑战。

M/R 查询没有任何读取仲裁值的概念，它们必须命中每个节点上的每个对象（当然，在输入过滤的限制范围内）。这意味着，当 N > 1 时，查询必须命中每个对象的每个*副本*。

例如，假设 N=3，默认情况下。这意味着，对于每个写入的对象，有 3 个副本，每个副本位于 3 个不同的节点上。当您为对象发出读取时（假设使用默认仲裁值 R=2），协调节点（从您的客户端接收读取请求）联系所有 3 个节点（并可能接收 3 个不同的值，3 个不同的副本对象）。然后，它检查以确保这些副本中至少有 2 个具有相同的值（以满足 R=2 的要求），将商定的值返回给请求的客户端，并丢弃其他副本。因此，在常规操作（读/写，还有链接步行）中，协调节点会为您过滤掉重复项。

Map/Reduce 查询没有那么奢侈。它们实际上并没有与之关联的仲裁值——它们被用来迭代所有节点上的每个（相关）键和对象。而且由于 M/R 代码在每个单独的节点（靠近数据）上运行，而不仅仅是在协调节点上，它们本质上并不能真正过滤掉任何重复项。例如，它们的设计目的之一是更新（或删除）所有节点上的所有对象副本。因此，每个 Map 阶段（在上述情况下）在每个节点上运行，为每个副本返回匹配的“完成”值，并将结果发送回协调节点以返回给客户端。而且由于您的 N>1 很可能，结果集中会有重复项。

现在，您可以通过在 Reduce 阶段编写代码来显式过滤掉重复项，以检查是否已经存在密钥并拒绝重复项，等等。但老实说，如果我处于您的情况，我会过滤掉在客户端的 ruby​​ 中重复，而不是弄乱 reduce 代码。

无论如何，我希望能对这个谜团有所了解。

# objective-c - 带有异步回调的 NSThread 与 GCD

> ID：11575305
> 
> 赞同：0
> 
> 时间：2012-07-20T08:05:01.083
> 
> 标签：objective-c

我正在使用 NSURLConnection 向我的 web 服务发出一些 http 请求，它返回一个大文本文件。显然这会阻塞主线程并增加延迟，所以我想在后台处理它。顺便说一句，我意识到有第三方框架可以处理这个特定的工作/情况，但我自己编写代码是因为我需要了解 iOS 上的多线程。

我可以分离一个 NSThread 或将 NSURLConnection 代码在一个块中传递给 GCD。两种方式最初都可以正常工作（建立http连接并发送请求）。问题是如何从服务器取回数据。让我解释一下……当我的网络服务发回数据时，我的应用程序会通过来自 NSURLConnectionDelegate 协议的回调得到通知。但是到这种情况发生时，我的分离线程已经退出了它的目标方法，或者该块已经被 GCD 处理并且它不在队列中（取决于我使用了哪种方法）。基本上，我的应用程序不会注意到回调（当然，除非我使用的是 dispatch_main_queue）。

每种情况下解决此问题的“正确”objective-c方法是什么？

感谢任何方向

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:35:02.907

对于网络代码，我将在 NSULRConnection 上使用异步方法并处理我在后台队列中返回的数据。只有修改 UI 并且需要在主队列中的数据才会被分派（使用 GCD）到主队列。

```
NSOperationQueue *yourQueue = [[NSOperationQueue alloc] init];
[NSULRConnection sendAsynchronousRequest:yourRequest 
                                   queue:yourQueue 
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) 
{
    // The code inside here gets processed once the url request completes ...
    // It happens in the background on "yourQueue".

    [self doSomeExpensiveDataProcessingWithData:data];

    dispatch_sync(dispatch_get_main_queue(), ^{
        // Update UI on the main thread and wait to continue processing the data
        [self updateUI];
    });

    [self doSomeMoreDataProcessing];

    dispatch_sync(dispatch_get_main_queue(), ^{
        // Update UI on the main thread and wait to continue processing the data
        [self finalUpdateOfUI];
    });
}]; 
```

* * *

在网络代码示例之外，我通常喜欢将异步回调作为一种设计模式。单独测试不同的回调变得很容易，它将不同的回调（如错误处理和数据处理）划分为不同的方法，从而在这些方法中提供更集中的代码。

GCD 非常适合在另一个线程上快速执行几行代码或异步调度一些工作。

NSThread 已经很少使用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:33:54.210

听起来像一个 NSRunLoop 问题......例如阅读这个......

[http://www.sortedbits.com/nsurlconnection-in-its-own-thread/](http://www.sortedbits.com/nsurlconnection-in-its-own-thread/) http://www.cocoaintheshell.com/2011/04/nsurlconnection-synchronous-asynchronous/

...谷歌更多...

……你为什么要这样做？（在主线程上）异步使用 NSURLConnection 就足够了，然后在收到这些数据时分派您对这些数据的繁重处理。换句话说，NSURLConnection 委托方法将在主线程上被调用，但随后调度数据处理只是为了不阻塞主线程。

# c# - Foreach 项目更改未在循环外保留

> ID：11575308
> 
> 赞同：1
> 
> 时间：2012-07-20T08:05:08.003
> 
> 标签：c#, linq, foreach, parallel-processing, persistence

我已经看过[这个问题](https://stackoverflow.com/questions/7742937/foreach-changes-not-being-preserved-on-linq-item-collection)，但它没有解释它，所以我了解实际发生了什么。我已经开发了多年，以前从未遇到过这种情况（尽管我对 Linq 和 Parallel 的使用是最近才使用的）。

我的代码是：

```
Parallel.ForEach(databaseMetadata.Rows.Cast<DataRow>(), row => {
        var fieldName = row.Item("Name", "");
        var field = this.Fields.Where(f => f.Name.ToLower() == fieldName.ToLower()).SingleOrDefault();
        if(field != null) { field.Validate(this, connection, row); }
}); 
```

在 field.Validate 函数中，它将字段对象上名为“HasBeenValidated”的属性设置为 true，但是，一旦我退出此 Parallel.ForEach 循环，该属性就会设置回 false。有人可以解释为什么会发生这种情况以及我可以做些什么来确保循环内的更改在循环外持续存在。

编辑：

下面是 field.Validate 中的代码副本：

```
internal void Validate(EntityAttribute entity, SqlConnection connection, [AllowNull] DataRow metadata) {
    this.HasBeenValidated = true;
    var isRequired = this.IsRequired;
    var maxLength = this.MaxLength;
    var isAutoGenerated = this.IsAutoGenerated;
    var dataType = this.member.PropertyType;
    var dataTypeAsString = "";
    if(metadata != null) {
        isRequired = metadata.Item("IsRequired", false);
        maxLength = metadata.Item("MaxLength", 0);
        isAutoGenerated = metadata.Item("IsAutoGenerated", false);
        dataTypeAsString = metadata.Item("DataType", "");
        if(dataTypeAsString == this.member.PropertyType.ToSqlServerDataType()) { dataTypeAsString = ""; }
    } else {
        dataTypeAsString = this.member.PropertyType.ToSqlServerDataType();
    }
    if(metadata == null || isRequired != this.IsRequired || maxLength != this.MaxLength || isAutoGenerated != this.IsAutoGenerated || dataTypeAsString != "") {
        var sql = string.Format((metadata == null ? "ALTER TABLE [{0}].[{1}] ADD" : "ALTER TABLE {0} ALTER COLUMN"), entity.Schema, entity.Name) + " " + this.Sql + ";";
        if(!connection.ExecuteCommand(sql, 1)) {
            throw new InvalidOperationException("Unable to create or alter column '" + this.Name + "' on table '" + entity.Name + "'.");
        }
    }
} 
```

HasBeenValidated 属性在字段对象上定义为：

```
internal bool HasBeenValidated { get; set; } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:01:49.450

抱歉，如果我浪费了任何人的时间，但我已经弄清楚了这个问题的原因。this.Fields 列表是可查询的字段类型的 IEnumerable<>。我认为这比有一个贪婪的列表要好（因为这个类上有很多列表）。生成字段列表的代码是：

```
this.Fields = allProperties
    .Select(property => new { Property = property, Field = property.GetCustomAttributes(typeof(FieldAttribute), true).SingleOrDefault() as FieldAttribute })
    .Where(info => info.Field != null && (info.Field as ListAttribute) == null)
    .Select(info => { info.Field.Member = info.Property; return info.Field; }); 
```

我完全没有意识到的是，GetCustomAttributes 每次调用时都会意外地（无论如何从我的角度来看）重新生成属性类的副本。

如果这是一个更简单的类，我可能会更早地怀疑这一点，但是在设置 Member 属性时我也在更改字段类中的属性（即从 info.Property 中提取元数据并根据该属性在字段类中设置属性类）所以当我在调试器中查看字段类时，我可以看到很多属性已更改（这误导我认为它是字段类的同一个实例而不是副本）。

如果我在这方面浪费了任何人的时间和精力，我真的很抱歉，但希望通过发布我的错误，这可以帮助将来可能会在非贪婪的 Linq 表达式中以类似方式使用 GetCustomAttribute 绊倒的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:09:42.033

看起来您的`DataRow`对象存在同步问题 - 您确定`field.Validate`不更新数据库中的属性吗？并且您`databaseMetadata`不只是仍然坐在旧数据上？

建议您可能正在做类似事情`connection, row`的论据......`field.Validate`

尝试使用正常`for`循环，看看会发生什么。你有同样的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:02:44.727

您可以调用 databaseMetadata.Rows 两次并检查它是同一个实例还是不同的实例。

```
bool isEquals = ReferenceEquals(databaseMetadata.Rows, databaseMetadata.Rows) 
```

如果它不支持不变性，我希望它在您每次访问 Rows 属性时返回行的副本。

# mysql - 从选择中选择特定的行号

> ID：11575309
> 
> 赞同：1
> 
> 时间：2012-07-20T08:05:10.027
> 
> 标签：mysql

我是 MySQL 语法的初学者。所以有几个问题我想问。

我有一个线索数据库，用户可以在其中添加线索。并有一个选择一系列数字来执行随机功能的网络方法。（为了游戏是随机的，一遍又一遍地做同样的线索没有意义吗？）

但我现在的主要问题是，**如果作者决定添加更多线索怎么办？** 那么我的线索数据库将看起来像这样。

```
+--------+-------------+-----------+--------+
| cID    | clueDetails |  location | author |
+--------+-------------+-----------+--------+
|   1    |      abcde  |   loc 1   | auth 1 |
|   2    |      efghi  |   loc 1   | auth 1 |
|   3    |      jklmno |   loc 2   | auth 1 |
|   4    |      pqrstu |   loc 2   | auth 1 |
|   5    |      vwxyz  |   loc 1   | auth 1 |
+--------+-------------+-----------+--------+ 
```

如果玩家选择`loc`1 `auth 1`，它将显示`cID 1,2 and 5`。所以我无法有效地使用我的随机函数，因为它选择了 loc 和 auth 的第一个和最后一个，而 3 和 4 不适合。我现在知道它非常模糊，因为信息稀缺。而要真正了解整个过程，直接到游戏，以及我拥有的方法/功能。（会很长）

切入正题，我的结果将如下所示，识别它的方法将是通过 cID，但如果线索以不同的顺序添加（如上所示），那么我的函数将变得相当糟糕。

编辑：假设这个随机函数给我 2 条线索，因为我想玩 2 条线索。这个随机函数返回 1 和 3。所以从下表结果中，1 和 3 将返回 cID1 和 cID5，因为它们是第 1 行和第 3 行。（抱歉造成的混乱）

```
+--------+-------------+-----------+--------+
| cID    | clueDetails |  location | author |
+--------+-------------+-----------+--------+
|   1    |      abcde  |   loc 1   | auth 1 |
|   2    |      efghi  |   loc 1   | auth 1 |
|   5    |      vwxyz  |   loc 1   | auth 1 |
+--------+-------------+-----------+--------+ 
```

因此，我想问一下我们是否可以按行数选择行？例如`row[3] = cID 5, vwxyz, loc 1, auth 1`。

就我而言，我已经进行了大量研究，MySQL 中似乎没有任何功能允许我们按行号进行选择。（虽然所有文章都过时了，2010 年及之前。不确定 MySQL 是否添加了任何新功能）

我看到了一个 SO 线程 - [MySQL - Get row number on select](https://stackoverflow.com/questions/2520357/mysql-get-row-number-on-select)，从我的看法来看，它似乎正在生成一个名为排名的字段。

我想知道的是，这个字段是`ranking`临时的还是永久的？因为如果它只是一个临时字段，那么我可以将标识符从 cID 转移到这个编号。

或者你们有什么建议可以解决这个问题吗？我想清除数据库，然后重新创建数据库，但这会花费太多时间。随着时间的推移，当数据库变大时，它也会变慢。另一种方法是制作一个数据表来填充 loc=?loc 和 auth=?auth 的所有当前线索，并使用新线索（最新）再次添加它们，但我认为这会导致 cID 蓬勃发展并飞到一个非常快的速度。而且我担心这会导致内存管理问题/内存泄漏。

EDIT2：由于创建字段只是一个临时字段，并且似乎是唯一的选择，我尝试了这个 MySQL 命令。

```
set @rank=0;
select @rank:=@rank+1 AS rank, cId, clueDetails, location, author from tbl_clue where location = "loc" and author = "auth" order by rank ASC 
```

它似乎显示了我想要的东西，但我的命令似乎与其他人通常给出的不同。（更多支架和其他东西）。我的命令可以吗？会不会有由此带来的间接影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:19:39.933

你可以试试这个。如果有帮助，请添加评论:)

```
SELECT     cID, clueDetails, location, author
FROM
   (
      SELECT    @rownum := @rownum + 1 as `RowNo`, 
                p.cID, 
                p.clueDetails, 
                p.location, 
                p.author 
        FROM (
               SELECT cID, clueDetails, location, author
                 FROM myTableName
                WHERE location = 'loc 1' AND author = 'auth 1'
             ) p , (SELECT @rownum:=0) r 
    ) y
WHERE y.RowNo = 3
ORDER BY RowNo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:22:39.393

我不确定我是否理解正确，但假设你最终得到：

```
+--------+-------------+-----------+--------+
| cID    | clueDetails |  location | author |
+--------+-------------+-----------+--------+
|   1    |      abcde  |   loc 1   | auth 1 |
|   2    |      efghi  |   loc 1   | auth 1 |
|   5    |      vwxyz  |   loc 1   | auth 1 |
+--------+-------------+-----------+--------+ 
```

并且您只需要随机一条记录而不是 3 条记录，您可以执行以下操作：

```
$query = "THE QUERY";

if ($result = $dbc->query($query))
{
    $num_rows = mysql_num_rows($result);

    $random_number = rand(1, $num_rows);

    $count = 1;

    while($nt = $result->fetch_assoc())
    {
       if ($count = $random_number)
       {
           //SAVE THE CLUE DETAILS
       }

       $count = $count + 1;
    }
} 
```

# php - 当我在文本区域绑定一些 HTML 时，为什么会出现带问号的小菱形？

> ID：11575311
> 
> 赞同：0
> 
> 时间：2012-07-20T08:05:17.310
> 
> 标签：php, html, utf-8

当我尝试在文本区域内绑定一些 HTMl 代码时，所有   都显示为带有问号的小菱形。我正在使用 smarty 模板引擎。

php代码

```
 $mailContent=$emailbody['emailHtml']; 
```

聪明的代码

```
 {form->textarea name="emailContent" cols="110" rows="20" value={$emailbody} class="textarea05" style="witdh:auto;height:auto" tabindex="1" readonly="readonly"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:38:38.280

尝试使用转义。

```
 {form->textarea name="emailContent" cols="110" rows="20" value={$emailbody|escape:'htmlall':'UTF-8'} class="textarea05" style="witdh:auto;height:auto" tabindex="1" readonly="readonly"} 
```

我在此示例中使用了 UTF-8，您需要将其与您的要求相匹配。

更多信息在这里 - [http://www.smarty.net/docsv2/en/language.modifier.escape](http://www.smarty.net/docsv2/en/language.modifier.escape)

# eclipse - Subclipse 工作流程说明

> ID：11575313
> 
> 赞同：0
> 
> 时间：2012-07-20T08:05:38.060
> 
> 标签：eclipse, workflow, subclipse

我已经使用 TortoiseSVN 一段时间了，最​​近才开始使用 eclipse 插件**subclipse**。我对此感到非常满意，尽管有些事情让我感到困惑。

我有几个项目，每个项目在存储库中都有不同的子文件夹。我从来没有使用过分支（到目前为止），所以我的 SVN 使用相当容易。

1.  更新到头
2.  如有冲突，请解决
3.  在代码/项目中进行一些更改
4.  提交（乌龟告诉我，如果之前需要更新）

现在有了 subclipse，我认为还有其他可能性。例如，同步视图是什么？我真的不明白。目前，我`Team->Update to head/Commit`在项目文件夹上使用，如果有冲突，我`Team->Edit conflicts...`在冲突的文件上使用。就是这样。所以我从不碰同步的东西。我还没有在 subcise 页面或谷歌上找到一个很好的解释......

只是同步的想法，一切都是自动完成的还是什么？

基本上，我要求的是工作流程（或一些指向良好基本解释的链接）。我不是在问，什么是可能的或什么是什么，而是 subclipse**打算**如何用于小型项目（<100 个文件，<5 人在处理它，到目前为止还没有分支）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:22:26.240

同步视图允许您在执行更新之前识别冲突。如果您执行更新并且遇到冲突，这意味着您必须停止之前所做的事情并开始解决冲突。这是您工作流程的中断。

通常，如果您执行更新并发生冲突，您将失去运行和调试程序的能力。使用同步视图，您可以一个一个地更新冲突的文件，这使您可以将远程更改逐步集成到您的项目中。

因此，您可以在不失去运行程序的能力的情况下开始解决冲突。或者您看到有很多冲突并决定此时不是执行更新的好时机。

因此，如果要检测、防止或解决 SVN 中的冲突更改，同步功能非常强大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:00:16.730

如果您不想，我认为没有任何理由使用同步视图。我真的很喜欢团队 > 更新，然后解决发生的任何冲突。这更像是“SVN方式”。Synchronize 视图来自 Eclipse 世界，因此 Subclipse 必须支持它。

TortoiseSVN 确实有一个类似于同步视图的选项。它是“检查修改”选项。特别是当您按下“检查存储库”按钮时。

另外，请记住，同步视图不会像 SVN 那样显示“冲突”。在 SVN 中，冲突意味着它无法将更改自动合并到您的文件中。在同步视图中，这意味着您对具有传入更改的文件进行了本地修改。如果您刚刚进行了更新，SVN 可能会自动合并这些更改。就个人而言，我宁愿让 SVN 尝试这样做。

# android - 放大取景器图像

> ID：11575318
> 
> 赞同：0
> 
> 时间：2012-07-20T08:06:11.813
> 
> 标签：android, zooming, viewflipper, swipe

我有一个包含 3 张图像的取景器。这些图像与 onGestureListener 关联以进行滑动操作。我想对这些图像中的每一个实现放大和缩小效果，以便正确阅读图像上的文字。有什么出路吗？请帮我举个例子。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:08:14.980

这个问题已经被问过了，但你可以这样做：

```
iv = (ImageView) findViewById(R.id.imageview);
zc = (ZoomControls) findViewById(R.id.zoom_controls);
zc.setOnZoomInClickListener(new OnClickListener() {
    public void onClick(View v) {
        float oldZoom = currentZoom;
        currentZoom = currentZoom * 1.25;
        zc.setIsZoomOutEnabled(true);
        if (3.0 < currentZoom) {
            zc.setIsZoomInEnabled(false);
        }
        scaleAnim = new ScaleAnimation(oldZoom, currentZoom, oldZoom, currentZoom, 0, 0);
        scaleAnim.setFillAfter(true);
        iv.startAnimation(scaleAnim);
    }
});
zc.setOnZoomOutClickListener(new OnClickListener() {
    public void onClick(View v) {
        float oldZoom = currentZoom;
        currentZoom = currentZoom / 1.25;
        zc.setIsZoomInEnabled(true);
        if (0.33 > currentZoom) {
            zc.setIsZoomOutEnabled(false);
        }
        scaleAnim = new ScaleAnimation(oldZoom, currentZoom, oldZoom, currentZoom, 0, 0);
        scaleAnim.setFillAfter(true);
        iv.startAnimation(scaleAnim);
    }
}); 
```

来源：[在 viewflipper 中缩放图像](https://stackoverflow.com/questions/9846914/zooming-image-in-viewflipper)

# php - 使用 Doctrine 按多列排序

> ID：11575325
> 
> 赞同：130
> 
> 时间：2012-07-20T08:06:31.180
> 
> 标签：php, doctrine, sql-order-by

我需要按两列对数据进行排序（当行对第 1 列的值不同时，按它排序；否则，按第 2 列排序）

我正在使用 a`QueryBuilder`创建查询。

如果我`orderBy`第二次调用该方法，它将替换任何先前指定的排序。

我可以传递两列作为第一个参数：

```
->orderBy('r.firstColumn, r.secondColumn', 'DESC'); 
```

但是我不能为第二个参数传递两个排序方向，所以当我执行这个查询时，第一列按升序排序，第二列按降序排序。我想对它们都使用降序。

有没有办法做到这一点`QueryBuilder`？我需要使用 DQL 吗？

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2012-07-20T08:11:01.213

您必须在列名之后添加订单方向：

```
$qb->orderBy('column1 ASC, column2 DESC'); 
```

正如您所指出的，多次调用`orderBy` [不堆栈](https://web.archive.org/web/20131108054342/http://www.doctrine-project.org/jira/browse/DC-909)，但您可以多次调用[`addOrderBy`](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/query-builder.html#high-level-api-methods)：

```
$qb->addOrderBy('column1', 'ASC')
   ->addOrderBy('column2', 'DESC'); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-03-28T16:42:01.303

在 Doctrine 2.x 中，您不能通过使用上述示例中的教义 'orderBy' 或 'addOrderBy' 来传递多个订单。因为，当您将第二个参数留空时，它会自动在最后一列名称的末尾添加“ASC”，例如在“orderBy”函数中。

例如，`->orderBy('a.fist_name ASC, a.last_name ASC')`将输出类似于“ORDER BY first_name ASC, last_name ASC ASC”的 SQL。所以这是 SQL 语法错误。仅仅因为 orderBy 或 addOrderBy 的默认值是“ASC”。

要添加多个订单，您需要使用“添加”功能。它会是这样的。

`->add('orderBy','first_name ASC, last_name ASC')`. 这将为您提供格式正确的 SQL。

有关 add() 函数的更多信息。[https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/query-builder.html#low-level-api](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/query-builder.html#low-level-api)

希望这可以帮助。干杯!

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-20T08:17:34.637

您可以使用`->addOrderBy($sort, $order)`

添加：Doctrine Querybuilder 顺便说一句。经常使用常规方法的“特殊”修改，请参阅`select-addSelect`, `where-andWhere-orWhere`, `groupBy-addgroupBy`...

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-05-07T14:16:41.037

您可以使用 orderBy() 后跟 addOrderBy() - 嵌套多个 orderBy() 是不可能的，但嵌套多个 addOrderBy() 也可以在初始 orderBy() 之后使用。

例子：

```
$this->createQueryBuilder('entity')
       ->orderBy('entity.addDate', 'DESC')
       ->addOrderBy('entity.id', 'DESC') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-14T17:51:10.027

该`orderBy`方法需要两个字符串或一个`Expr\OrderBy`对象。如果要添加多个订单声明，正确的做法是使用`addOrderBy`方法，或者实例化一个`OrderBy`对象并相应地填充它：

```
 # Inside a Repository method:
   $myResults = $this->createQueryBuilder('a')
       ->addOrderBy('a.column1', 'ASC')
       ->addOrderBy('a.column2', 'ASC')
       ->addOrderBy('a.column3', 'DESC')
   ;

   # Or, using a OrderBy object:
   $orderBy = new OrderBy('a.column1', 'ASC');
   $orderBy->add('a.column2', 'ASC');
   $orderBy->add('a.column3', 'DESC');

   $myResults = $this->createQueryBuilder('a')
       ->orderBy($orderBy)
   ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-02T00:13:02.520

`orderBy`源代码注释的注释： `Keys are field and values are the order, being either ASC or DESC.`. 所以你可以做到`orderBy->(['field' => Criteria::ASC])`。

# c# - 通过代理获取html源

> ID：11575328
> 
> 赞同：1
> 
> 时间：2012-07-20T08:06:36.403
> 
> 标签：c#, vb.net

嗨，我如何通过代理获取 html 页面的来源。当我使用下面的代码时，我收到一条错误消息“需要代理身份验证”。我必须通过代理。

```
Dim client As New WebClient()

Dim htmlCode As String = client.DownloadString("http://www.stackoverflow.com") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:07:07.090

然后使用不需要身份验证的代理

请参阅此处了解更多信息 [http://msdn.microsoft.com/en-us/library/system.net.webclient.proxy.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient.proxy.aspx)

```
string source = GetPageSource("http://www.stackoverflow.com");

    private string GetPageSource(string url)
    {
        string htmlSource = string.Empty;
        try
        {
            System.Net.WebProxy myProxy = new System.Net.WebProxy("Proxy IP", 8080);
            using (System.Net.WebClient client = new System.Net.WebClient())
            {
                client.Proxy = myProxy;
                client.Proxy.Credentials = new System.Net.NetworkCredential("username", "password");
                htmlSource = client.DownloadString(url);
            }
        }
        catch (WebException ex)
        { 
            // log any exceptions
        }
        return htmlSource;
    } 
```

# javascript - 在添加特定于过渡的 css 属性之前所做的更改会触发过渡。为什么？

> ID：11575334
> 
> 赞同：3
> 
> 时间：2012-07-20T08:06:51.510
> 
> 标签：javascript, jquery, css, css-transitions

看看这个 jsfiddle [http://jsfiddle.net/zB2Td/5/](http://jsfiddle.net/zB2Td/5/)

`.animate` 尽管在更改尺寸后添加了类，但仍会触发动画。如果您取消注释结尾处的第二行，则过渡将不会按应有的方式开始。为什么这段代码会这样工作？什么是添加`.animate`而不是触发先前更改的转换的正确方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:27:30.780

据我了解，发生的事情是调用`box.width()`算作“读取”操作，如[本文](http://gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html)所定义。它强制浏览器（无论如何是 webkit）重新布局（又名回流）DOM。如果没有这个调用，浏览器在添加之前永远不会“知道”盒子是 200x200 `.animate`，它会假设盒子从 100x100 开始。

# javascript - 用于检查 x.0.0 之类的字符串的 Javascript 正则表达式

> ID：11575335
> 
> 赞同：1
> 
> 时间：2012-07-20T08:06:51.523
> 
> 标签：javascript

我有以下内容：

```
 if (/0\.0$/.test(text)) 
```

我成功地使用它来检查以 0.0 结尾的文本，例如：

```
1.0.0 
2.0.0
3.0.0 
```

但是，它也适用于以下情况：

```
1.10.0
2.10.0 
```

有没有办法可以更改此表达式，使其仅对前 3 个值而不是后两个值给出 true？

这是我的完整代码：

```
 if (/0\.0$/.test(text))
        pad = 10;
    else if (/\.0$/.test(text))
        pad = 35;
    else
        pad = 60;
    tdToPad.css('margin-left', pad); 
```

对于文本为 2.10.0 的情况，它应该用 35 填充，但它用 10 填充。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T08:09:49.920

使用有问题`/\.0\.0$/`吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T08:10:35.520

```
if(/\.0\.0$/.test(text)) 
```

如果你想要一个数字开头

```
if(/^\d+\.0\.0$/.test(text)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:18:57.977

您的代码应如下所示：

```
 if (/\d+\.0\.0$/.test(text)) // if number.0.0
        pad = 10;
    else if (/\d+\.[1-9]+\d+?\.0$/.test(text)) // if 0 at the end
        pad = 35;
    else
        pad = 60;
    tdToPad.css('margin-left', pad); 
```

# .net - FileStream 是托管代码还是非托管代码？

> ID：11575339
> 
> 赞同：4
> 
> 时间：2012-07-20T08:07:07.347
> 
> 标签：.net

我在一次采访中被问到这个问题，我说答案是 Managed。面试官似乎很惊讶。我的问题是即使它访问一个文件（本机/非托管资源），但这个类不是托管的吗？还是您认为我应该提出一些后续问题以获得更多澄清？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:12:13.053

根据 ILSpy 的说法，`FileStream`它包含大量托管代码，因此您可以争辩说它是托管的。但是，最终所有文件 I/O 都必须解析为 Win32 P/Invoke 调用，因此您可以争辩说它是对非托管代码的包装。这取决于您的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:20:50.290

通常，至少从您的角度来看，CLR 运行的所有代码都被认为是托管的，除此之外，您还有 Win32 API、ActiveX、COM 对象，这些都是非托管的。

AS FileStream 是.Net 的一个类，因此它是一个托管类/对象。但它使用了一些 Windows 资源，因此它没有被管理，你必须在使用它后处理它的对象。.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:09:58.670

你可以看看这个问题

[什么是托管代码和非托管代码？](https://stackoverflow.com/questions/5306576/what-is-managed-and-unmanaged-code?rq=1)

从那个讨论中我会说它是托管代码，因为您通过 .NET 运行时访问和管理资源

# ios - 属性检查器 xcode 中缺少标识符

> ID：11575342
> 
> 赞同：8
> 
> 时间：2012-07-20T08:07:13.337
> 
> 标签：ios, xcode

Xcode 4.6+ 版没有用于`storyboard view controller identifier`在属性检查器选项卡中设置 a 的字段。

我在哪里可以找到它？

它曾经在属性检查器中，如下所示：

![在此处输入图像描述](../Images/65b57e12f5322e039492d80ac1a66712.png)

但是现在只剩下 Title 字段了：

![在此处输入图像描述](../Images/f40c362522331b4cec9179fe0dbc4dbe.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-20T09:57:37.763

我发现在 xcode 4.5 中，标识符被替换为 Identity > **Storyboard ID**，现在在身份检查器中。

您可以看到以下字段：

![在此处输入图像描述](../Images/5b747102a9f0363746f3220b896ab66c.png)

# php - 使用 JMS Serializer 时禁用 Doctrine 2 延迟加载？

> ID：11575345
> 
> 赞同：16
> 
> 时间：2012-07-20T08:07:36.733
> 
> 标签：php, doctrine, jmsserializerbundle, serialization

我在我的 Zend 项目中使用 Doctrine 2 ORM，并且在几种情况下需要将我的实体序列化为 JSON。

ATM 我使用 Querybuilder 并加入我需要的所有表。但是我的序列化程序导致学说延迟加载每个关联的实体，这会导致大量数据并引发递归。

现在我正在寻找一种完全禁用 Doctrine 延迟加载行为的方法。

我选择数据的方法如下：

```
$qb= $this->_em->createQueryBuilder()
            ->from("\Project\Entity\Personappointment", 'pa')
            ->select('pa', 't', 'c', 'a', 'aps', 'apt', 'p')
            ->leftjoin('pa.table', 't')
            ->leftjoin('pa.company', 'c')
            ->leftjoin('pa.appointment', 'a')
            ->leftjoin('a.appointmentstatus', 'aps')
            ->leftjoin('a.appointmenttype', 'apt')
            ->leftjoin('a.person','p') 
```

我希望我的结果集只包含选定的表和关联。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-29T01:19:51.527

在最新版的JMSSerializer中，你该看的地方是

```
JMS\Serializer\EventDispatcher\Subscriber\DoctrineProxySubscriber 
```

代替

```
Serializer\Handler\DoctrineProxyHandler 
```

要覆盖默认的延迟加载行为，应该定义自己的事件订阅者。

在你`app/config.yml`添加这个：

```
parameters:
    ...
    jms_serializer.doctrine_proxy_subscriber.class: Your\Bundle\Event\DoctrineProxySubscriber 
```

您可以将类从 JMS\Serializer\EventDispatcher\Subscriber\DoctrineProxySubscriber 复制到 Your\Bundle\Event\DoctrineProxySubscriber 并注释掉 $object->__load(); 线

```
public function onPreSerialize(PreSerializeEvent $event)
{
    $object = $event->getObject();
    $type = $event->getType();

    // If the set type name is not an actual class, but a faked type for which a custom handler exists, we do not
    // modify it with this subscriber. Also, we forgo autoloading here as an instance of this type is already created,
    // so it must be loaded if its a real class.
    $virtualType = ! class_exists($type['name'], false);

    if ($object instanceof PersistentCollection) {
        if ( ! $virtualType) {
            $event->setType('ArrayCollection');
        }

        return;
    }

    if ( ! $object instanceof Proxy && ! $object instanceof ORMProxy) {
        return;
    }

     //$object->__load(); Just comment this out

    if ( ! $virtualType) {
        $event->setType(get_parent_class($object));
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T07:01:16.317

在 Doctrine 中寻找答案后，我的团队发现 JMS 序列化器是“问题”。它自动触发了 Doctrine Proxies 的使用。我们为 JMS Serializer 编写了一个补丁来避免延迟加载。

我们实现了自己的**DoctrineProxyHandler**，它不会触发 Doctrine 延迟加载机制，并将其注册到我们的 SerializationHandlers 数组中。

```
class DoctrineProxyHandler implements SerializationHandlerInterface {

public function serialize(VisitorInterface $visitor, $data, $type, &$handled)
{
    if (($data instanceof Proxy || $data instanceof ORMProxy) && (!$data->__isInitialized__ || get_class($data) === $type)) {
        $handled = true;

        if (!$data->__isInitialized__) {

            //don't trigger doctrine lazy loading
            //$data->__load();

            return null;
        }

        $navigator = $visitor->getNavigator();
        $navigator->detachObject($data);

        // pass the parent class not to load the metadata for the proxy class
        return $navigator->accept($data, get_parent_class($data), $visitor);
    }

    return null;
} 
```

现在我可以简单地选择我的表，加入我需要的关联——我的 JSON 将只包含我选择的数据，而不是无限深度的关联和递归 :)

```
$qb= $this->_em->createQueryBuilder()
        ->from("\Project\Entity\Personappointment", 'pa')
        ->select('pa', 't', 'c', 'a')
        ->leftjoin('pa.table', 't')
        ->leftjoin('pa.company', 'c')
        ->leftjoin('pa.appointment', 'a') 
```

JSON将只包含

```
{  
  Personappointment: { table {fields}, company {fields}, appointment {fields}}
  Personappointment: { table {fields}, company {fields}, appointment {fields}}
  Personappointment: { table {fields}, company {fields}, appointment {fields}}
  .
  .
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T19:31:17.940

这很可能被称为丑陋的拐杖，但您可以只选择（）您真正需要的数据，然后使用 Query 对象的 getArrayResult() 方法将结果水合到一个数组中......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T09:23:21.057

使用 Doctrine 的查询构建器时，您不能禁用链接模型类的延迟加载。如果你想绕过这种行为，你最好用 Doctrine 的 DBAL 请求数据。

不要使用`\Doctrine\ORM\QueryBuilder`但是`\Doctrine\DBAL\Query\QueryBuilder`。

```
$qb = new QueryBuilder($this->_em->getConnection());
$expr = $qb->expr();

$qb->select('pa.*', 't.*', 'c.*', 'a.*', 'aps.*', 'apt.*', 'p.*')
   ->from('person_appointment', 'pa')
   ->leftJoin('pa', 'table', 't', $expr->eq('pa.table_id', 't.table_id'))
   // put other joints here
   // ...
   ->leftjoin('a', 'person', 'p', $expr->eq('a.person_id', 'p.person_id')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-10T19:44:27.857

如果您希望务实地使用您的或默认订阅者，

@DavidLin 回答：

您可以将类从 JMS\Serializer\EventDispatcher\Subscriber\DoctrineProxySubscriber 复制到 Your\Bundle\Event\DoctrineProxySubscriber 并注释掉 $object->__load(); 线

```
<?php

/*
 * Copyright 2013 Johannes M. Schmitt <schmittjoh@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

namespace Your\Bundle\Event;

use Doctrine\ORM\PersistentCollection;
use Doctrine\ODM\MongoDB\PersistentCollection as MongoDBPersistentCollection;
use Doctrine\ODM\PHPCR\PersistentCollection as PHPCRPersistentCollection;
use Doctrine\Common\Persistence\Proxy;
use Doctrine\ORM\Proxy\Proxy as ORMProxy;
use JMS\Serializer\EventDispatcher\PreSerializeEvent;
use JMS\Serializer\EventDispatcher\EventSubscriberInterface;

class AvoidDoctrineProxySubscriber implements EventSubscriberInterface
{
    public function onPreSerialize(PreSerializeEvent $event)
    {
        $object = $event->getObject();
        $type = $event->getType();

        // If the set type name is not an actual class, but a faked type for which a custom handler exists, we do not
        // modify it with this subscriber. Also, we forgo autoloading here as an instance of this type is already created,
        // so it must be loaded if its a real class.
        $virtualType = ! class_exists($type['name'], false);

        if ($object instanceof PersistentCollection
            || $object instanceof MongoDBPersistentCollection
            || $object instanceof PHPCRPersistentCollection
        ) {
            if ( ! $virtualType) {
                $event->setType('ArrayCollection');
            }

            return;
        }

        if ( ! $object instanceof Proxy && ! $object instanceof ORMProxy) {
            return;
        }

        //Avoiding doctrine lazy load proxyes
        //$object->__load();

        if ( ! $virtualType) {
            $event->setType(get_parent_class($object));
        }
    }

    public static function getSubscribedEvents()
    {
        return array(
            array('event' => 'serializer.pre_serialize', 'method' => 'onPreSerialize'),
        );
    }
} 
```

**并像这样初始化序列化**：

```
$serializer = JMS\Serializer\SerializerBuilder::create()
    //remove this to use lazy loading 
    ->configureListeners(function(JMS\Serializer\EventDispatcher\EventDispatcher $dispatcher) {
        $dispatcher->addSubscriber(new Your\Bundle\Event\AvoidDoctrineProxySubscriber());
    })  
    // !remove this to use lazy loading 
    ->build();

//and serialize the data with/without Lazy

serializer->serialize($data, 'json'); 
```

# mysql - 构建复杂 SQL 查询的技巧

> ID：11575346
> 
> 赞同：4
> 
> 时间：2012-07-20T08:07:40.990
> 
> 标签：mysql, sql, join, subquery

我已经开始使用 MySQL 作为数据库进行 PHP 编程，并且我知道基本的 SQL 查询到包含最多两个表的简单 JOINS。

但是，当我需要从 3 个或更多表中获取结果时，我被卡住了。不管我怎么努力，我仍然设法发现自己​​迷失了方向。我到处寻找关于如何处理复杂 SQL 查询的好教程，但没有找到任何解释如何去做的东西。大多数教程都包含针对特定问题的解决方案，但它们并没有解释如何解决问题的完美一般程序

任何人都可以解释从头到尾的基本通用方式，如何构建查询等，当涉及到复杂查询时。

例如：

我有一个具有以下数据库结构的论坛：

**论坛分类：**

```
id | name | desc 
```

**论坛主题**：

```
id | category_id | created_on | created_by | title | content 
```

**论坛帖子**：

```
id | topic_id | created_on | created_by 
```

**用户**：

```
id | first_name | last_name 
```

所有主题都在`forumTopic`表中创建。对该主题的所有回复都插入到`forumPost`表中。

现在在论坛主页上，我需要显示类别，用户在该特定类别中发布的最后一个帖子，发布最后一个帖子的用户。

我想到的流程是：

1.  通过查看按 topic_id 分组的 forumPost 表中的 MAX(id)，找到一个类别中的最后一篇文章。这将为我提供每个主题中最后一篇文章的 ID。

2.  现在再次找到按 category_id 分组的 MAX（我之前得到的 IDS）。这将使我获得每个类别的最后一篇文章。

ID 是自动递增的主键。

但是我一直坚持从上述算法构建 SQL 查询

如果有人可以帮助我解决这个问题，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:17:05.017

通过加入 Post to Topic 获取每个类别的最后一篇文章

```
SELECT category_id , category.name, Max(ForumPost.ID) as maxpostid
from ForumPost
inner join ForumTopic on ForumPost.Topic_ID = ForumTopic.ID
inner join ForumCategory on ForumTopic.Category_Id = ForumCategory.ID
group by category_Id, category.name 
```

（这是用于解释目的的中间阶段 - 它包含在下面的查询中）

然后将这个加入到用户表中以找出用户名（大概一个帖子有一个用户ID？）

```
select users.name, lastposts.*
from
    forumpost
inner join
    (
        SELECT category_id , category.name, Max(ForumPost.ID) as maxpostid
        from ForumPost
        inner join ForumTopic on ForumPost.Topic_ID = ForumTopic.ID
        inner join ForumCategory on ForumTopic.Category_Id = ForumCategory.ID
        group by category_Id, category.name
     ) lastposts
          on forumpost.id = lastposts.maxpostid
inner join
     users on forumpost.userid =users.id 
```

但是，您可能需要考虑在每次发布帖子时使用最后一个帖子更新类别表。这样您就可以为您的论坛首页运行更简单的查询。

# macos - 将 iCal 事件导出到 osx 上的 .ics 文件

> ID：11575347
> 
> 赞同：2
> 
> 时间：2012-07-20T08:07:42.947
> 
> 标签：macos, cocoa, icalendar, calendar-store

我需要创建将所有 iCal 事件导出到 isc 文件的应用程序。你能告诉我该怎么做吗？使用 Cocoa 应用程序、命令行工具还是 AppleScript 应用程序？....我正在尝试使用 AppleScript 应用程序执行此操作，使用 CalendarStore 框架。我能够获取所有事件，但是如何将它们保存到 ics 文件？

这是我的代码：

```
 - (IBAction)btnSelector:(id)sender {
CalCalendarStore *calendarStore = [CalCalendarStore defaultCalendarStore];
NSDate *startDate=[[NSDate alloc] init];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init] ;
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
startDate=[formatter dateFromString:@"2010-01-01 00:00:00"];                             
NSDate *endDate=[[NSDate alloc] init];    
 endDate=[formatter dateFromString:@"2050-01-01 00:00:00"];

 NSArray *calendars = [calendarStore calendars];
    NSPredicate *allEventsPredicate = [CalCalendarStore eventPredicateWithStartDate:startDate endDate:endDate calendars:[calendarStore calendars]];

NSArray *events = [calendarStore eventsWithPredicate:allEventsPredicate]; 

for(CalEvent *event in events)
{
    //here i must save event to file...
    NSLog(@"%@",event);
    }

for (CalCalendar *calendar in calendars) {

    self.lblNotification.title=[NSString stringWithFormat:@"%@  %@",self.lblNotification.title,calendar.title];

}

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-02-18T19:00:07.673

我采用了不同的方法——我使用 GUI 脚本从 Apple 日历应用程序中导出指定数量的日历。它要么导出到桌面或文档文件夹，我可能可以编辑脚本以强制它导出到桌面文件夹。

[https://github.com/chinwayland/applescripts/blob/master/wintec-scripts/Export%20Calendars%20to%20ICS.applescript](https://github.com/chinwayland/applescripts/blob/master/wintec-scripts/Export%20Calendars%20to%20ICS.applescript)

```
-- This script exports multiple calendars to ICS one by one using GUI Scripting

use AppleScript version "2.4" -- Yosemite (10.10) or later
use scripting additions

set numberOfCalendars to display dialog "How many calendars?" default answer ""

tell application "Calendar"
    activate
end tell

tell application "System Events"
    tell process "Calendar"
        repeat with i from 2 to text returned of numberOfCalendars as number

            # Select each calendar
            tell row i of outline 1 of scroll area 1 of splitter group 1 of splitter group 1 of window 1
                set selected to true
                delay 1
            end tell

            # Click Export from Menu
            tell menu item 1 of menu of menu item "Export" of menu "File" of menu bar 1
                click
                delay 3
            end tell

            # Click Export Button from pop up window
            tell button "Export" of sheet 1 of window 1
                click
                delay 1
            end tell

            if button "Replace" of sheet 1 of sheet 1 of window 1 exists then
                tell button "Replace" of sheet 1 of sheet 1 of window 1
                    click
                end tell
                delay 1
            end if
        end repeat
    end tell
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:13:44.337

我解决了这个问题......现在我不使用 CalendareStore 框架，我只是阅读日历文件夹的内容：

```
NSFileManager *fileManager = [[NSFileManager alloc] init];
//   /Users/username/Library/Calendars
NSError *err;

NSArray *usersFolder = [fileManager contentsOfDirectoryAtPath:@"/Users" error:&err];

for (NSString *dirElement in usersFolder) {
   // NSLog(@"users folder : %@",dirElement);

    NSString *userCalendarPath = [NSString stringWithFormat:@"/Users/%@/Library/Calendars",dirElement];
    NSArray *contentCalendarDirectory = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:userCalendarPath error:nil];
    NSArray *calendarFolders = [contentCalendarDirectory filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"self ENDSWITH '.calendar'"]];

    NSMutableArray *calendarNames= [[NSMutableArray alloc]  init];

    for(NSString *calendarFolder in calendarFolders)
    {
       // NSLog(@"calendar folder %@/%@",userCalendarPath,calendarFolder);

        NSString * fullCalendarInfoPath = [NSString stringWithFormat:@"%@/%@/Info.plist",userCalendarPath,calendarFolder];
        NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile: fullCalendarInfoPath];

        NSString * eventsDirectory = [NSString stringWithFormat:@"%@/%@/Events",userCalendarPath,calendarFolder];
        NSArray *contentEventsDirectory = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:eventsDirectory error:nil];
        NSArray *events = [contentEventsDirectory filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"self ENDSWITH '.ics'"]];

        for(NSString* eventName in events)
        {
            NSString * eventPath = [[NSString alloc] initWithFormat:@"%@/%@/Events/%@",userCalendarPath,calendarFolder,eventName];
             //this array contain all ics paths...
//to read file content:
//NSString *eventContent = [[NSString alloc] initWithContentsOfFile:eventPath encoding:NSUTF8StringEncoding error:nil];
            [eventsPath addObject:eventPath];

          }
         NSString* calendarTitle = [dict objectForKey: @"Title"];

        [calendarNames addObject:[NSString stringWithFormat:@"%@  (%lu events)",calendarTitle,[events count]]];

    }
    if(calendarNames.count>0)
    { 
       NSDictionary *userCalendars = [NSDictionary dictionaryWithObjectsAndKeys:dirElement,@"parent",calendarNames,@"children", nil];
       [dataCalendars addObject:userCalendars];
       }    
         } 
```

# ios - UIWebview 中的 css3 列

> ID：11575351
> 
> 赞同：1
> 
> 时间：2012-07-20T08:07:58.687
> 
> 标签：ios, css, uiwebview

我有一个包含大量文本、图像、表格和列表的 html，它们被加载到 UIWebView 中。我已经应用了带有内容的 css 样式表

```
body{ -webkit-column-width: 768px; font-family: "Georgia"; font-size: 12px; height: 1000px } 
```

我已经在 UIWebView 中启用了水平滚动页面，这样我就可以像在电子阅读器中一样对 html 内容进行分页。

```
UIScrollView *scrollview = [webview scrollView];
[scrollview setPagingEnabled:YES]; 
```

它可以工作，但是每个页面的宽度（在 iPad 中是 768px），当我开始分页到其他页面（列）时，其他页面的内容会逐渐增加。当我将 css 中的 font-size 增加到 72px 时，这个问题更加明显。我需要它在 12px - 72px 范围内工作。

如何滚动每个（页面）列以完全适合屏幕？

一般来说，我是 css3 和 html 的新手。我非常感谢任何帮助或提示来完成这项工作。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:21:30.330

我遇到了同样的问题，直到我意识到我没有设置 body {margin: 0;}。不确定这是否会解决您的问题，但它对我有用。

# c++ - 在OpenGL立方体上显示多个纹理，c ++ GLFW

> ID：11575352
> 
> 赞同：3
> 
> 时间：2012-07-20T08:07:58.503
> 
> 标签：c++, opengl, textures, glfw

因此，我使用 GLFW 进行窗口管理，并使用 GLEW 进行扩展管理。我正在尝试编写我兄弟提出的跨平台游戏。这是一个纸牌游戏。但是，为了获得在 3D 表面上纹理映射和渲染的基础知识，我试图让一些卡片纹理显示在立方体的侧面。我的第一个问题是 glfw 的 TGA 加载器，其中只有要加载的第一个纹理是可显示的（尽管它会在我尝试纹理的每个表面上正确显示），尽管已为 glGenTextures 使用了 GLuint 指针数组。然后，我找到了[http://home.comcast.net/~mlyn7576/OpenGL-TGA/](http://home.comcast.net/~mlyn7576/OpenGL-TGA/)，它似乎也可以工作，但现在只显示最后加载的纹理，并且它在所有面上显示一个纹理，即使我只引用它的 GL 名称一次。那么我做错了什么？我不明白为什么只显示一个加载的纹理。

这是我的主要标题：

```
#ifndef _RPSEVOLVED_H_
#define _RPSEVOLVED_H_
#endif

#include <iostream>
#include <math.h>

#include <gl\glew.h>
#include <gl\glfw.h>
#include <stdint.h>

using namespace std;

class RPSEvolved
{
private:
    bool Running;

public:
    static RPSEvolved* instance;
    RPSEvolved();
    int OnExecute();
    GLuint cardBackId;
    GLuint bgId;
    GLuint airCardId;
    GLuint earthCardId;
    GLuint fireCardId;
    GLuint lightningCardId;
    GLuint waterCardId;

public:
    bool OnInit();
    void OnEvent(/*SDL_Event* ev*/);
    void OnLoop();
    void OnRender();
    void OnCleanup();

    //callbacks
    static void GLFWCALL OnKeyCB(int key, int action);
    static void OnWindowCloseCB();
    static RPSEvolved* GetInstance();
    void GLFWCALL OnCharCB(int key, int action);
    void GLFWCALL OnMouseWheelCB(int pos);
    void GLFWCALL OnMouseMoveCB(int x, int y);
    void GLFWCALL OnMouseButtonCB(int button, int action);
}; 
```

这是我的初始化代码：

```
#include "RPSEvolved.h"
#include "RPSE_TGA.h"

bool RPSEvolved::OnInit()
{
    if(glfwInit() == GL_FALSE)
    {
        cout << "Error initializing GLFW";
        return false;
    }

    if(glfwOpenWindow(1024, 768, 8, 8, 8, 8, 32, 32, GLFW_WINDOW) == GL_FALSE)
    {
        cout << "Error initializing GLFW";
        return false;
    }

    glEnable(GL_DEPTH_TEST);
    glEnable(GL_COLOR_MATERIAL);
    glEnable(GL_TEXTURE_2D);
    glEnable(GL_NORMALIZE); //Automatically normalize normals
    glShadeModel(GL_SMOOTH);

    glMatrixMode(GL_PROJECTION);
    gluPerspective(45, 1024/768, 1, 100);
    glMatrixMode(GL_MODELVIEW);

    glfwDisable(GLFW_AUTO_POLL_EVENTS);
    glClearColor(0, 0, 0, 255);

    glfwSetWindowCloseCallback((GLFWwindowclosefun)OnWindowCloseCB);
    glfwSetKeyCallback(OnKeyCB);

    cardBackId = load_texture_TGA("images\\cardBack.tga", NULL, NULL, GL_CLAMP, GL_CLAMP);
    bgId = load_texture_TGA("images\\bg.tga", NULL, NULL, GL_CLAMP, GL_CLAMP);
    airCardId = load_texture_TGA("images\\airCard.tga", NULL, NULL, GL_CLAMP, GL_CLAMP);
    earthCardId = load_texture_TGA("images\\earthCard.tga", NULL, NULL, GL_CLAMP, GL_CLAMP);
    fireCardId = load_texture_TGA("images\\fireCard.tga", NULL, NULL, GL_CLAMP, GL_CLAMP);
    lightningCardId = load_texture_TGA("images\\lightningCard.tga", NULL, NULL, GL_CLAMP, GL_CLAMP);
    waterCardId = load_texture_TGA("images\\waterCard.tga", NULL, NULL, GL_CLAMP, GL_CLAMP);

    return true;
} 
```

我的显示代码：

```
#include "RPSEvolved.h"

void RPSEvolved::OnRender()
{
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    gluLookAt(0.0f, 5.0f, 30.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f);

    static float _angle = 0.0f; _angle -= 0.3f;

    glEnable(GL_TEXTURE_2D);

    glRotatef(_angle, 0.0f, 1.0f, 0.0f);

    glColor4f(1.0f, 1.0f, 1.0f, 0.0f);

    glBegin(GL_QUADS);

    glBindTexture(GL_TEXTURE_2D, cardBackId);
    glNormal3f(0.0f, 0.0f, 1.0f); // front
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(-3.0f, -5.0f, 3.0f);
    glTexCoord2f(1.0f, 0.0f);   glVertex3f(3.0f, -5.0f, 3.0f);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(3.0f, 5.0f, 3.0f);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(-3.0f, 5.0f, 3.0f);

    glBindTexture(GL_TEXTURE_2D, airCardId);

    glNormal3f(1.0f, 0.0f, 0.0f); // right
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(3.0f, -4.0f, 3.0f);
    glTexCoord2f(1.0f, 0.0f);   glVertex3f(3.0f, -4.0f, -3.0f);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(3.0f, 4.0f, -3.0f);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(3.0f, 4.0f, 3.0f);

    glBindTexture(GL_TEXTURE_2D, earthCardId);

    glNormal3f(0.0f, 0.0f, -1.0f); // back
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(3.0f, 4.0f, -3.0f);
    glTexCoord2f(1.0f, 0.0f);   glVertex3f(-3.0f, 4.0f, -3.0f);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(-3.0f, -4.0f, -3.0f);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(3.0f, -4.0f, -3.0f);

    glBindTexture(GL_TEXTURE_2D, fireCardId);

    glNormal3f(-1.0f, 0.0f, 0.0f); // left
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(-3.0f, 4.0f, -3.0f);
    glTexCoord2f(1.0f, 0.0f);   glVertex3f(-3.0f, 4.0f, 3.0f);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(-3.0f, -4.0f, 3.0f);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(-3.0f, -4.0f, -3.0f);

    glBindTexture(GL_TEXTURE_2D, lightningCardId);

    glNormal3f(0.0f, 1.0f, 0.0f); // top
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(3.0f, 4.0f, 3.0f);
    glTexCoord2f(1.0f, 0.0f);   glVertex3f(-3.0f, 4.0f, 3.0f);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(-3.0f, 4.0f, -3.0f);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(3.0f, 4.0f, -3.0f);

    glBindTexture(GL_TEXTURE_2D, waterCardId);

    glNormal3f(0.0f, -1.0f, 0.0f); // top
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(-3.0f, -4.0f, 3.0f);
    glTexCoord2f(1.0f, 0.0f);   glVertex3f(3.0f, -4.0f, 3.0f);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(3.0f, -4.0f, -3.0f);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(-3.0f, -4.0f, -3.0f);

    glEnd();

    glfwSwapBuffers();
} 
```

请注意，如果我将 OnInit() 中对 load_texture_TGA 的调用替换为对 glfwLoadTexture2D() 的调用，那么我就会遇到仅显示第一个纹理的问题。纹理并没有像他们应该的那样显示是怎么回事？

PS对不起，如果这真的很长，我习惯于在寻求编码帮助时提供我认为相关的所有信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:18:31.310

我认为您需要在单独的批次中处理每张脸：

```
glBindTexture(GL_TEXTURE_2D, cardBackId);
glBegin(GL_QUADS);
// front vertices..
glEnd();

glBindTexture(GL_TEXTURE_2D, airCardId);
glBegin(GL_QUADS);
// Right vertices..
glEnd();

// Other faces... 
```

有几个替代方案可以让您在单个批次中渲染多维数据集：

*   生成单个纹理，其中包含立方体的所有面。然后为立方体的顶点提供适当的纹理坐标。您可以为此使用 2d 纹理或 3d 纹理。
*   绑定不同纹理单元寄存器中的所有纹理并编写像素着色器。

# asp.net-mvc - 如何在临时文件上调试此 ASP.net MVC 4 错误？

> ID：11575357
> 
> 赞同：0
> 
> 时间：2012-07-20T08:08:24.807
> 
> 标签：asp.net-mvc, iis-7, windows-server-2008

我开发了一个 MVC 4 Web 应用程序，但出现此错误：

c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\3f2bfc7c\b3a7a1f1\App_Web_evento.cshtml.1daa837f.iofx3fob.0.cs(43)：错误 CS1003：语法错误，'> ' 预期的

在本地它工作正常，但是当我将更改发布并上传到网络时，我得到了这个错误。我试图清理临时文件，但我不断收到错误消息。

我该如何调试和解决这个错误？

编辑：这是第 43 行的代码

```
public class _Page_Views_sampedros_evento_cshtml : System.Web.Mvc.WebViewPage<EventoInfo;> {

#line hidden

        public _Page_Views_sampedros_evento_cshtml() {
        } 
```

我想错误出现在第一行末尾的“;>”部分，但是这段代码是自动生成的，在本地它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:36:40.753

即使运行时错误出现在临时文件中，错误消息也会告诉您语法问题在您的`sampedros/evento.cshtml`视图`sampedros_evento.cshtml`中。

查看该视图中的任何模型声明，看看您是否在不应该使用分号结束语句时使用。该行可能以 结束，`EventInfo;`并且应该以 结束`EventInfo`。

# java - 为什么在 Java 中有两种不同的方式来链接异常？哪种情况更好？

> ID：11575358
> 
> 赞同：0
> 
> 时间：2012-07-20T08:08:28.060
> 
> 标签：java, exception, exception-handling

这是我们可以进行异常链接的两种方式：

```
Throwable initCause(Throwable)
Throwable(Throwable) 
```

我认为第二种更优雅，使用更广泛。那么为什么 Java 核心库中的一些标准异常实际上缺少链感知构造函数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:13:13.597

这就是javodoc所说的

> 将所有这些设施统一起来有很多好处。其中最主要的是：（1）我们保证任何想要记录一个异常导致另一个异常的事实的人都可以这样做，无论异常是什么。(2) 通过提供一个通用的 API 来记录一个异常导致另一个异常的事实，我们简化了这项任务，使程序员更有可能不厌其烦地去做。(3) 通过提供一个通用的 API 来访问导致异常的情况，我们大大增加了将这些信息提供给需要它的人的可能性。事实上，所提议的机制将整个“因果链”打印为标准堆栈回溯的一部分，确保预先存在的程序将提供此信息而无需其作者额外努力。
> 
> 为了解决这些问题，我们为 Throwable 添加了两个新方法 getCause() 和 initCause(Throwable)，以及两个新的构造函数 Throwable(Throwable) 和 Throwable(String, Throwable)。其他“通用”异常类（如 Exception、RunTimeException 和 Error）也同样配备了 (Throwable) 和 (String, Throwable) 构造函数。但是，即使没有此类构造函数的异常也可以通过 initCause 方法用作“包装异常”。

[http://docs.oracle.com/javase/1.5.0/docs/guide/lang/chained-exceptions.html](http://docs.oracle.com/javase/1.5.0/docs/guide/lang/chained-exceptions.html)

# c# - 我需要一个方法（方法将具有相同的返回值，但不同的参数），如参数。我能做些什么？

> ID：11575370
> 
> 赞同：0
> 
> 时间：2012-07-20T08:09:05.427
> 
> 标签：c#, .net, delegates, parameter-passing, func

我有下一个代码：

```
public byte[] A(int i){//do something}

public byte[] B(string a) { //do something}

public void useAMethod()
{
  //Previous code
  byte[] array = A(0);
  //final code using array 
}

public void useBMethod()
{
  //Previous code
  byte[] array = B("test");
  //final code using array 
} 
```

如您所见，我有两种返回值相同但参数不同的方法，我想要类似的东西：

```
public void useAnyMethod([method] methodToUse)
{
  //Previous code
  byte[] array = methodToUse;
  //final code using array 
} 
```

像这样使用：

```
useAnyMethod(A(0));
useAnyMethod(B("test")); 
```

有可能吗？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:15:12.223

我认为这`byte[] =`是某种内部任务？

如果是这样

```
public void useAnyMethod(byte[] result) { 

   byte[] = result;  // This is not actually valid because you don't have a variable name after byte[]¬
}

useAnyMethod(a(0));
useAnyMethod(b("fish")); 
```

useAnyMethod 实际上并不调用该方法，它只是接受运行时将首先调用以获取结果的方法的返回值。

或者，如果您决定使用委托

```
public void useAnyMethod(Func<byte[]> method) {
    byte[] = method();
}

useAnyMethod(()=>A(0));
useAnyMEthod(()=>B("test")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:19:20.477

对我来说，这似乎是一个基本的重载候选人。

```
public void DoSomething(int data) 
{
    var bytes = // convert int to bytes here
    DoSomething(bytes)
}

public void DoSomething(string data)
{
    var bytes = // convert string to bytes here
    DoSomething(bytes)
}

public void DoSomething(byte[] data) 
{
} 
```

# haskell - 为什么 Data.Unique 中的值需要在公开之前进行散列？

> ID：11575373
> 
> 赞同：2
> 
> 时间：2012-07-20T08:09:27.493
> 
> 标签：haskell, unique, ghc, base

`Data.Unique.hashUnique`用于从一个值中获得一个几乎唯一`Int`的`Unique`值：

```
hashUnique :: Unique -> Int
#if defined(__GLASGOW_HASKELL__)
hashUnique (Unique i) = I# (hashInteger i)
#else
hashUnique (Unique u) = fromInteger (u `mod` (toInteger (maxBound :: Int) + 1))
#endif 
```

为什么不`Data.Unique`提供`getUnique`获取真正唯一值的功能？

```
getUnique :: Unique -> Integer
getUnique (Unique i) = i 
```

这是图书馆发展过程中的疏忽吗？我们可以在 Data.Unique 中添加这样的功能吗？在许多情况下，需要*真正*独特的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:29:49.740

`Data.Unique`价值观并不是真正独特的。如果您检查源代码，您会看到受保护的构造函数只是`TVar`用一个计数器递增 a 并且每个唯一值都具有下一个计数器值。所以你会得到一个`Unique 1`then a`Unique 2`等。但你可能已经知道了。

因为整数是按递增顺序排列的，并且 an 的哈希`Integer`值是存储在 an 中的整数值`Int`，所以您永远不会遇到达到 an 限制的哈希冲突`Int`（在 64 位机器上，an`Int`可以有 18,446,744,073,709,551,615 个不同的值）。所以，你基本上永远不会遇到哈希冲突。

保证一个`Unique`值对于程序会话是唯一的。就是这样。不能保证它可以跨宇宙打印或重复使用。如果您需要可打印的通用唯一值，则应使用[Universally Unique Identifiers](http://hackage.haskell.org/package/uuid)。

# java - 为什么使用枚举而不是常量？在软件设计和可读性方面哪个更好

> ID：11575376
> 
> 赞同：88
> 
> 时间：2012-07-20T08:09:43.570
> 
> 标签：java, android, enums

我有一个场景，其中我有**Player 类型** `ARCHER`、`WARRIOR`和`sorcerer`。
我应该在 Player 类中为玩家类型使用什么？
常量**最终静态字符串**变量或**枚举**？为什么？
请帮忙说明原因。

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-07-20T08:13:29.480

假设您使用常量字符串（或`int`值 - 它们也是如此）：

```
// Constants for player types
public static final String ARCHER = "Archer";
public static final String WARRIOR = "Warrior";

// Constants for genders
public static final String MALE = "Male";
public static final String FEMALE = "Female"; 
```

那么你最终并不真正知道你的数据类型 - 导致可能不正确的代码：

```
String playerType = Constants.MALE; 
```

如果您使用枚举，则最终结果为：

```
// Compile-time error - incompatible types!
PlayerType playerType = Gender.MALE; 
```

同样，枚举给出一组受限的值：

```
String playerType = "Fred"; // Hang on, that's not one we know about... 
```

对比

```
PlayerType playerType = "Fred"; // Nope, that doesn't work. Bang! 
```

此外，Java 中的枚举可以有更多相关信息，也可以有行为。整体上好多了。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-20T08:13:38.717

枚举将您限制为所需的输入集，而即使您使用常量字符串，您仍然可以使用其他不属于您的逻辑的字符串。

这可以帮助您在输入数据的同时不犯错误，输入域外的内容，还可以提高程序的可读性。

此外，如果您愿意，您可以随时将枚举用作字符串。这是一个[参考](https://stackoverflow.com/questions/3978654/java-string-enum)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-20T08:30:31.233

除了不让你提供不正确的值之外，枚举的另一个特性可能看起来微不足道，但在我看来非常重要。现代 IDE 可以自动为枚举建议值，但无法可靠地推断字符串常量的可能值（Intellij IDEA 可以做到后者，但仅适用于 JDK 类和流行库）。这在您探索新 API 时特别有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-03T09:58:54.987

Enum 更适合用于类型安全。不能输入错误的值。但是 android 中的 enum 占用了这么多内存，你应该使用 intdef 来代替。有关示例和说明，请参阅此答案：-

[IntDef/StringDef 示例](https://stackoverflow.com/questions/29183904/should-i-strictly-avoid-using-enums-on-android#answer-32495161)

您还可以检查 android 源代码，它尽可能用 IntDef/StringDef 替换枚举。前任。查看.可见。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-20T08:27:05.007

我建议您仅在您确实需要枚举常量或所有项目通用的一些附加功能时才使用枚举。

这当然取决于您正在编写的应用程序的类型以及您想要支持的版本和设备。

原因是枚举增加了开销，因为它们分配了项目的实例。您会注意到，android 平台中的枚举最少，并且几乎所有常量都是最终的静态整数（如 View.GONE 和类似的东西）

# magento - 重定向到图像上的外部链接单击 Magento

> ID：11575378
> 
> 赞同：0
> 
> 时间：2012-07-20T08:09:44.247
> 
> 标签：magento, redirect, magento-1.5

我在主页中创建了一个静态块并在其中插入了一个图像。对于该图像，我正在使用锚标记，以便它将重定向到另一个链接。

但实际上它对我不起作用。我的网站域是 www.openerpengines.com 并且在图像点击时，它应该被重定向到 openerpengines.com:8069 。我被这个小问题困住了。请帮帮我。

我正在向我们提供我的网站链接：www.openerpengines.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:16:48.403

我找到了解决方案。

我在图像标签中使用了 onclick 功能。代码如下：

```
<img src"image path" onclick="window.location.href='URL to redirect';"/> 
```

# android - RelativeLayout 技巧中的 Android ListView

> ID：11575379
> 
> 赞同：0
> 
> 时间：2012-07-20T08:09:44.590
> 
> 标签：android, listview

我明白了，在我的 RelativeLayout 中必须有两个 TextView 和一个 ExpandableListView。经过长时间的交谈，我决定展示图片，以便您了解布局本身的行为。

有快照。第一个是 ExpandableListView 未展开时：

![在此处输入图像描述](../Images/ec7c9903276305843afb68d521b2d609.png)

但是，当我尝试扩展此 ExpandableListView 时，我看到以下内容：

![在此处输入图像描述](../Images/e62a8ebaf9839517063c280195a67f61.png)

我们只能看到展开列表的一小部分，其颜色与下一个 TextView 的颜色相同。为什么会这样？我的目标是查看整个展开的 ExpandableListView。

xml的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="#000000" >

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#00ff00" >

        <TextView
            android:id="@+id/user"
            android:layout_width="match_parent"
            android:layout_height="100dp"
            android:paddingLeft="3dp"
            android:text="Top User"
            android:textColor="#111111"
            android:background="#eeeeee"
            android:textSize="22dp" />
        <ExpandableListView
            android:id="@+id/elvMain"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >
        </ExpandableListView>
        <TextView
            android:id="@+id/about"
            android:layout_width="match_parent"
            android:layout_height="100dp"
            android:text="Bottom About"
            android:textColor="#6f6f6f"
            android:textSize="24dp"
            android:textStyle="bold" />

    </LinearLayout>
</ScrollView> 
```

以及活动的代码：

```
public class IngredientsActivity extends Activity {

private ArrayList<Ingredient> ingredients;
private Bitmap bitmap;
private final String TAG = "IngredientsActivity";

public void onCreate (Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.ingredients_layout);
    //ingredients = (ArrayList)getIntent().getSerializableExtra("ingredients");
    //bitmap = (Bitmap)getIntent().getParcelableExtra("bitmap");
    prepareIngredients();  //preparing ExpandableListView children
    TextView user = (TextView)findViewById(R.id.user);
    TextView about = (TextView)findViewById(R.id.about);
    user.setText("Albert Einstein");
    about.setText("Albert Einstein (play /ˈælbərt ˈaɪnstaɪn/; German: [ˈalbɐt ˈaɪnʃtaɪn] ( listen); 14 March 1879 – 18 April 1955) was a German theoretical physicist who developed the theory of general relativity, effecting a revolution in physics. For thisfor his services to theoretical physics, and especially for his discovery of the law of the photoelectric effect.[5] The latter was pivotal in establishing quantum theory within physics.");
}
     private void prepareIngredients() {
      SimpleExpandableListAdapter adapter;
      final ExpandableListView list =                                       (ExpandableListView)findViewById(R.id.elvMain);

      ArrayList<Map<String, String>> groupData = new ArrayList<Map<String, String>>();
      Map m  = new HashMap<String, String>();
      m.put("groupName", "Datas");
      groupData.add(m);

      String groupFrom[] = new String[] {"groupName"};

      int groupTo[] = new int[] {R.id.groupname};

     ArrayList<ArrayList<Map<String, String>>> childData = new ArrayList<ArrayList<Map<String, String>>>();
     ArrayList<Map<String, String>> childDataItem = new ArrayList<Map<String, String>>();
     for (Ingredient i : ingredients) {
            Log.d(TAG, "Ingridient: " + i);
            Map<String, String> m1 = new HashMap<String, String>();
            StringBuilder ingredientsString = new StringBuilder();
            String v = i.getValue();
            if (!v.equals("null")) {
                ingredientsString.append("- " + i.getName() + " " + v + i.getType());
            } else {
                ingredientsString.append("- " + i.getName() + " " + i.getType());
            }
            m1.put("levelTwoCat", ingredientsString.toString());
            childDataItem.add(m1);
     }
     childData.add(childDataItem);

     String childFrom[] = new String[] {"levelTwoCat"};
     int childTo[] = new int[] {R.id.ingredients_second_layer_text};

     adapter = new SimpleExpandableListAdapter (
                this,
                groupData,
                R.layout.ingredients_first_layer,
                groupFrom,
                groupTo,
                childData,
                R.layout.ingredients_second_layer,
                childFrom,
                childTo);

     list.setAdapter(adapter);       
} 
```

问题是一样的。如何在此布局中强制 ExpandableListView 展开？现在它没有像它必须的那样扩展。（请参阅顶部的快照）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:40:32.050

我认为@AkashG 所说的你的主要问题是你的`ListView`内部有一个`ScrollView`. 试着删除你的`ScrollView`

# java - 设备 SMSLib 没有响应

> ID：11575384
> 
> 赞同：1
> 
> 时间：2012-07-20T08:09:59.420
> 
> 标签：java, sms-gateway, smslib

我正在使用 SMSlib 向手机号码发送短信。但出现以下错误。我什至更换了加密狗，但没有成功。

```
org.smslib.TimeoutException: No response from device.
    at org.smslib.modem.AModemDriver$CharQueue.get(AModemDriver.java:535)
    at org.smslib.modem.AModemDriver.getResponse(AModemDriver.java:338)
    at org.smslib.modem.AModemDriver.getResponse(AModemDriver.java:313)
    at org.smslib.modem.athandler.ATHandler.getSimStatus(ATHandler.java:145)
    at org.smslib.modem.AModemDriver.connect(AModemDriver.java:132)
    at org.smslib.modem.ModemGateway.startGateway(ModemGateway.java:189)
    at org.smslib.Service$1Starter.run(Service.java:277) 
```

下面是我的代码 -

```
public static void sendMessage(String number, String message) {
        Service srv = Service.getInstance();
        try {
            srv.addGateway(new SerialModemGateway("modem.com1", "COM5", 9600,
                    "huawei", "E220"));
        } catch (GatewayException e1) {
            e1.printStackTrace();
        }
        try {
            srv.startService();
            OutboundMessage msg = new OutboundMessage(number, message);
            srv.sendMessage(msg);
            srv.stopService();
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

对于调试跟踪，您可以在[此处找到它](http://pastebin.com/MR7AbRK8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:05:14.850

我使用的端口是错误的。我们必须首先使用`CommTest`SMSLib 提供的实用程序跨端口扫描。我使用不同的库来实际发送机器。

# android - 如何加快标签切换

> ID：11575385
> 
> 赞同：0
> 
> 时间：2012-07-20T08:09:59.280
> 
> 标签：android, android-layout

我的 Android 应用有 4 个标签。在每个选项卡上，我显示 3 - 4 个片段。

这就是我实现这个的方式：

在每个选项卡上单击我正在设置不同的内容视图。（我有 4 个 xml 布局，每个都有片段）

```
setContentView(mLayout); // mLayout is the layout for selected Tab. 
```

在每个片段上，我都动态添加了一些子视图。

现在的问题是标签切换很慢。

有什么方法可以加快我的标签切换速度。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:20:56.750

也许你可以尝试这种方式。首先，你可以膨胀所有你想要设置的视图。当你准备切换你的表格时，首先，从当前父布局中删除视图，然后添加你想要设置的视图。

# c# - Foo.cmd 不会输出进程中的行（在网站上）

> ID：11575386
> 
> 赞同：11
> 
> 时间：2012-07-20T08:10:08.077
> 
> 标签：c#, .net, process, cmd

我在理解 .NET 中 ProcessStartInfo 类的输入和输出时遇到了问题。我使用这个类来执行 .exe 程序，如 FFmpeg，没有任何问题。

但是当我使用 ProcessStartInfo 启动一个 .cmd 程序时，比如一个简单的 foo.cmd 只包含`@echo Hello world`它不会输出任何东西。

```
 ProcessStartInfo oInfo = new ProcessStartInfo(@"C:\Program Files (x86)\itms\foo.cmd")
    {
        UseShellExecute = false,
        RedirectStandardError = true,
        RedirectStandardOutput = true,
        CreateNoWindow = true
    };

    using (Process p = new Process())
    {
        p.StartInfo = oInfo;
        p.OutputDataReceived += new DataReceivedEventHandler(transporter_OutputDataReceived);

        p.Start();

        p.BeginOutputReadLine();

        p.WaitForExit();
    }

private void transporter_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    Response.Write(e.Data + " - line<br/>");
} 
```

我看过很多例子，人们使用 cmd.exe 来启动 .cmd 程序，我试过这个，但没有成功。该程序只是无限期地继续加载。

```
 ProcessStartInfo oInfo = new ProcessStartInfo("cmd", "/c start foo.cmd")
    {
        UseShellExecute = false,
        RedirectStandardError = true,
        RedirectStandardOutput = true,
        CreateNoWindow = true,
        WorkingDirectory = @"C:\Program Files (x86)\itms"
    }; 
```

在 Windows 和 Mac 上使用命令行工具时，foo.cmd 程序可以成功运行并输出。

有人可以为我揭开这个神秘面纱。

谢谢

**编辑**

代码在本地执行时行为正确。当我在我们的网站上执行代码时出现问题。要么不允许程序执行，要么以某种方式禁用输出。

只有 cmd.exe 返回输出**'"cmd"，"/c dir"'**例如返回有关当前文件夹内容的信息。

这实际上可能是权限问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T13:37:54.327

我自己找到了答案，并将为任何感兴趣的人发布解决方案。

问题的根源相当难以调试，因为问题源于 IIS 如何处理用户和进程。

正如我所想，代码本身没有任何问题。

**回答**

在 IIS 中，网站在 AppPool 中运行。AppPool 被分配了一个用户身份。**默认身份是一个名为ApplicationPoolIdentity**的虚拟内置帐户。该用户无权调用任何（据我所知）外部批处理/命令脚本。

在启动新进程时为管理用户提供用户名、密码和域，并没有为我解决任何问题——这可能是我误解了整个概念。

在 webconfig 中使用`<identity impersonate="true" userName="domain\user" password="pass" />`也没有解决任何问题。这显然是因为分配的 AppPool 用户仍然是所有进程的作者。

真正困扰我的是我可以执行 .exe 文件，但不能执行 .cmd 或 .bat 文件。

**对我来说，解决方案是创建一个具有执行批处理脚本权限的新用户，并选择该用户作为 IIS 中的 AppPool 用户。**

编辑：正如我在评论中提到的，我正在使用的用户是在**Active Directory**服务器上创建的，因为这个特定的文件服务器位于网络共享上。该用户是我的网络服务器上本地服务器组**IIS_IUSRS**的一部分，并且在存储可执行程序的文件夹中具有*读/写/执行*权限。

Edit2：该解决方案适用于本地用户帐户，只要用户是本地服务器组**IIS_IUSRS**的一部分并且在存储可执行程序的文件夹中具有*读/写/执行*权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:15:22.257

这是稍微修改过的代码，但它应该让您对课程有更好的了解

```
ProcessStartInfo info = new ProcessStartInfo(); 
info.Arguments = "/C C:\Program Files (x86)\itms\foo.cmd"; 
info.WindowStyle = ProcessWindowStyle.Hidden; 
info.CreateNoWindow = true; 
info.FileName = "cmd.exe"; // or C:\Program Files (x86)\itms\foo.cmd with no info.Arguments 
info.UseShellExecute = false; 
info.RedirectStandardOutput = true; 
using (Process process = Process.Start(info)) 
{ 
    using (StreamReader reader = process.StandardOutput) 
    { 
        string result = reader.ReadToEnd(); 
        Console.WriteLine(result);
    } 
} 
```

这会将 cmd 窗口的输出重定向到控制台，只需根据需要进行调整即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:17:18.210

您将需要以这种方式使用它

```
 using (Process p = Process.Start(oInfo))
    {
..... 
```

> **原因是因为 Process.Start() 和 Process.Star(startinfo) 工作方式略有不同**
> 
> [Process.Start()](http://msdn.microsoft.com/en-us/library/e8zac0ca) - 启动（或重用）由该 Process 组件的 StartInfo 属性指定的流程资源，并将其与该组件相关联。
> 
> **返回值**
> 
> 类型：System.Boolean 如果进程资源已启动，则为 true；如果没有启动新的进程资源（例如，如果重用现有进程），则为 false。
> 
> [Process.Start(StartInfo)](http://msdn.microsoft.com/en-us/library/0w4h05yb) - 启动由包含进程启动信息（例如，要启动的进程的文件名）的参数指定的进程资源，并将该资源与新的 Process 组件相关联。
> 
> **返回值**
> 
> 类型：System.Diagnostics.Process 与流程资源关联的新流程组件，如果没有启动流程资源（例如，如果重用现有流程），则为 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-21T19:32:20.713

对我有用（而不是为应用程序池创建新用户）是切换到内置帐户“本地系统”（在 Windows Server 2012 R2 上的 IIS 8.5 上）。

# python - 在 Python 中重载 int()

> ID：11575393
> 
> 赞同：16
> 
> 时间：2012-07-20T08:10:37.517
> 
> 标签：python, class, operator-overloading

假设我在 Python 3 中有一个基本类，它代表一些类似数字的数据类型。我想这样做，所以当我有这个类的实例 x 时，我可以调用 int(x) 并让它调用我的转换函数来返回整数部分。

我敢肯定这很简单，但我似乎无法找到如何去做。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-20T08:17:15.623

`__int__`您可以按照以下示例覆盖魔术方法...

```
class Test:
    def __init__(self, i):
        self.i = i
    def __int__(self):
        return self.i * 2

t = Test(5)
print( int(t) )
# 10 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T08:11:36.013

覆盖[`__int__()`](http://docs.python.org/py3k/reference/datamodel.html#object.__int__)方法。

# java - FC 尝试启动我的 Android AccessibilityService

> ID：11575394
> 
> 赞同：0
> 
> 时间：2012-07-20T08:10:46.330
> 
> 标签：java, android, api, service

我正在使用 Jelly Bean v16 API，请遵循此处的指南：[开发可访问性服务](http://developer.android.com/training/accessibility/service.html)

我还没有开始添加任何东西，只是一个空白服务，但在我尝试启动服务后它立即崩溃。

这是代码，我做错了哪一部分？

`AndroidManifest.xml`：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.firstapp.service"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="16"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <service android:name=".MyAccessibilityService" >
        <intent-filter>
            <action android:name="android.accessibilityservice.AccessibilityService" />
        </intent-filter>
    </service>
</application> 
```

`MyAccessibilityService.java`：

```
package com.example.android.apis.accessibility;

import android.accessibilityservice.AccessibilityService;
import android.view.accessibility.AccessibilityEvent;

public class MyAccessibilityService extends AccessibilityService {
    @Override
    public void onAccessibilityEvent(AccessibilityEvent event) {
    }

    @Override
    public void onInterrupt() {
    }

} 
```

这是 LogCat 的错误消息（还有更多）。

```
07-17 18:38:28.660: E/AndroidRuntime(3334): FATAL EXCEPTION: main
07-17 18:38:28.660: E/AndroidRuntime(3334): java.lang.RuntimeException: Unable to instantiate service com.firstapp.service.MyAccessibilityService: java.lang.ClassNotFoundException: com.firstapp.service.MyAccessibilityService
07-17 18:38:28.660: E/AndroidRuntime(3334):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2347) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:17:52.580

您的清单声明服务存在于 Java 包`com.firstapp.service`中，而实际的类是在`com.example.android.apis.accessibility`包中实现的。

将文件中的包名更改`MyAccessibilityService.java`为：`com.firstapp.service`

# c# - 网格扩展器标题 - 无法正确安排

> ID：11575397
> 
> 赞同：5
> 
> 时间：2012-07-20T08:11:01.563
> 
> 标签：c#, wpf

我`Expander`为 a 定义了以下内容`DataGrid`。

```
<Expander IsExpanded="True" HorizontalAlignment="Stretch" Background="Blue">
    <Expander.Header>
            <Grid HorizontalAlignment="Stretch" Background="BurlyWood">
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="3*" />
                        <ColumnDefinition Width="*" />
                      </Grid.ColumnDefinitions>

                      <TextBlock Text="{Binding Path=Name, StringFormat=\{0:D\}}" FontWeight="Bold" />
                      <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Column="1">
                        <TextBlock Text="Total : "/>
                        <TextBlock Text="{Binding Path=Items, Converter={StaticResource sumConverter}}" FontWeight="Bold"/>
                      </StackPanel>
                </Grid>
        </Expander.Header>
        <ItemsPresenter />
</Expander> 
```

我需要在左侧显示项目名称，并在组标题的右端显示总和。然而我得到的是：

![在此处输入图像描述](../Images/8eea1ab37282df968721501ec0dad8ed.png)

如何将“总计”移动到标题的右端？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T09:03:55.760

我有同样的问题，如果我没记错的话，问题是`ContentPresenter`for`Expander.Header`不关心`HorizontalAlignment`of `Expander`。我在某个地方找到了这个不错的解决方法：

```
<Expander.Header>
    <Grid HorizontalAlignment="{Binding Path=HorizontalAlignment, RelativeSource={RelativeSource AncestorType={x:Type ContentPresenter}}, Mode=OneWayToSource}">
        ...
    </Grid>
</Expander.Header> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:29:46.907

试试这个

```
<Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                      <ColumnDefinition Width="5" /> //space between two textblocks
                    <ColumnDefinition Width="Auto" />
                  </Grid.ColumnDefinitions>

                  <TextBlock Text="{Binding Path=Name, StringFormat=\{0:D\}}" FontWeight="Bold" />
                    <TextBlock Text="Total : " Grid.Column="2"/>
                    <TextBlock Text="{Binding Path=Items, Converter={StaticResource sumConverter}}" FontWeight="Bold"  Grid.Column="4"/>

            </Grid> 
```

我希望这个能帮上忙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:49:17.920

您可以通过使用 ValueConverter 将 Expander.Header 中的 Grid 的宽度设置为相对于 Expander.ActualWidth 的值来实现所需的结果，如下所示：

```
 <Expander Name="MyExpander" IsExpanded="True" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Background="Blue">
        <Expander.Header>
            <Grid HorizontalAlignment="Stretch" Background="BurlyWood" Width="{Binding ElementName=MyExpander, Path=ActualWidth, Converter={MyConverters:ExpanderHeaderWidthConverter}, ConverterParameter=30}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Text="{Binding Path=Name, StringFormat=\{0:D\}}" FontWeight="Bold" />
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Column="2">
                    <TextBlock Text="Total : "/>
                    <TextBlock Text="{Binding Path=Items, Converter={StaticResource sumConverter}}" FontWeight="Bold"/>
                </StackPanel>
            </Grid>
        </Expander.Header>
        <ItemsPresenter />
    </Expander> 
```

值转换器的代码：

```
public abstract class BaseConverter : MarkupExtension
{
    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }
}

public class ExpanderHeaderWidthConverter : BaseConverter, IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // The actuacl Width of the Expander
        double width = (double)value;

        // Default width difference
        double diff = 25.0;

        if (parameter != null)
        {
            // If the parameter is not null, try to use it as width difference
            Double.TryParse(parameter.ToString(), out diff);
        }

        // If width - diff is less than 0, return double.NaN instead.
        if (width - diff < 0)
        {
            return double.NaN;
        }

        // Return the modified width
        return width - diff;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        double width = (double)value;
        double diff = 25.0;
        if (parameter != null)
        {
            Double.TryParse(parameter.ToString(), out diff);
        }
        return width + diff;
    }
} 
```

尝试更改 ConverterParameter，直到获得所需的结果。

# python - 如何在我的版本控制系统中安全地保存我的密钥和密码？

> ID：11575398
> 
> 赞同：138
> 
> 时间：2012-07-20T08:11:06.813
> 
> 标签：python, django, git, version-control

我在我的版本控制系统中保留了重要的设置，例如开发和生产服务器的主机名和端口。但我知道在 VCS 存储库中保存*机密*（如私钥和数据库密码）是一种*不好的做法。*

 *但是密码——就像任何其他设置一样——似乎应该进行版本控制。那么保持密码版本控制的正确方法*是什么？*

我想这将涉及将*秘密*保存在他们自己的“秘密设置”文件中，并*对该*文件进行加密和版本控制。但是什么技术？以及如何正确地做到这一点？有没有更好的方法来解决它？

* * *

我一般会问这个问题，但在我的具体实例中，我想使用*git*和*github存储**Django/Python*站点的密钥和密码。

 **此外，当我使用 git 推/拉时，一个*理想*的解决方案会做一些神奇的事情——例如，如果加密的密码文件发生更改，则会运行一个脚本，该脚本会要求输入密码并将其解密到位。

* * *

编辑：为清楚起见，我*问*的是在哪里存储*生产*机密。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-26T22:31:55.373

您希望在加密敏感设置文件的同时仍将文件保留在版本控制中，这是完全正确的。正如您所提到的，最好的解决方案是当您推送某些敏感文件时，Git 会透明地加密它们，以便在本地（即在任何拥有您的证书的机器上）您可以使用设置文件，但 Git 或 Dropbox 或任何人将文件存储在 VC 下无法读取明文信息。

**Push/Pull 过程中的透明加密/解密教程**

这个要点[https://gist.github.com/873637](https://gist.github.com/873637)显示了一个关于如何使用 Git 的 smudge/clean 过滤器驱动程序和 openssl 来透明地加密推送文件的教程。您只需要进行一些初始设置。

**工作原理总结**

您将基本上创建一个`.gitencrypt`包含 3 个 bash 脚本的文件夹，

```
clean_filter_openssl 
smudge_filter_openssl 
diff_filter_openssl 
```

Git 用于解密、加密和支持 Git diff。在这些脚本中定义了主密码和盐（已修复！），您必须确保 .gitencrypt 永远不会被实际推送。示例`clean_filter_openssl`脚本：

```
#!/bin/bash

SALT_FIXED=<your-salt> # 24 or less hex characters
PASS_FIXED=<your-passphrase>

openssl enc -base64 -aes-256-ecb -S $SALT_FIXED -k $PASS_FIXED 
```

`smudge_filter_open_ssl`和类似`diff_filter_oepnssl`。见要点。

您的包含敏感信息的存储库应该有一个 .gitattribute 文件（未加密并包含在存储库中），该文件引用 .gitencrypt 目录（其中包含 Git 透明加密/解密项目所需的所有内容）并且存在于您的本地计算机上。

`.gitattribute`内容：

```
* filter=openssl diff=openssl
[merge]
    renormalize = true 
```

最后，您还需要将以下内容添加到您的`.git/config`文件中

```
[filter "openssl"]
    smudge = ~/.gitencrypt/smudge_filter_openssl
    clean = ~/.gitencrypt/clean_filter_openssl
[diff "openssl"]
    textconv = ~/.gitencrypt/diff_filter_openssl 
```

现在，当您将包含敏感信息的存储库推送到远程存储库时，文件将被透明地加密。当您从具有 .gitencrypt 目录（包含您的密码）的本地机器中提取时，文件将被透明地解密。

**笔记**

我应该注意，本教程并未描述仅加密敏感设置文件的方法。这将透明地加密推送到远程 VC 主机的整个存储库并解密整个存储库，使其在本地完全解密。为了实现您想要的行为，您可以将一个或多个项目的敏感文件放在一个sensitive_settings_repo 中。如果您确实需要将敏感文件放在同一个存储库中，您可以研究这种透明加密技术如何与 Git 子模块一起使用[http://git-scm.com/book/en/Git-Tools-Submodules 。](http://git-scm.com/book/en/Git-Tools-Submodules)

如果攻击者可以访问许多加密的存储库/文件，则使用固定密码在理论上可能会导致暴力破解漏洞。IMO，这种可能性非常低。正如本教程底部的注释所述，不使用固定密码将导致不同机器上的本地版本的存储库始终显示“git status”发生了更改。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-07-26T10:33:19.997

Heroku 推动[使用环境变量](https://devcenter.heroku.com/articles/config-vars)进行设置和密钥：

> 处理此类配置变量的传统方法是将它们放在源下 - 在某种属性文件中。这是一个容易出错的过程，对于开源应用程序来说尤其复杂，因为这些应用程序通常必须使用特定于应用程序的配置来维护单独的（和私有的）分支。
> 
> 更好的解决方案是使用环境变量，并将密钥保留在代码之外。在传统主机上或在本地工作，您可以在 bashrc 中设置环境变量。在 Heroku 上，您使用配置变量。

Heroku使用 Foreman 和`.env`files 提供了令人羡慕的工具链来导出、导入和同步环境变量。

* * *

就个人而言，我认为将密钥与代码一起保存是错误的。它从根本上与源代码控制不一致，因为键是针对*代码外在的*服务的。一个好处是开发人员可以克隆 HEAD 并在没有任何设置的情况下运行应用程序。但是，假设开发人员检查了代码的历史版本。他们的副本将包括去年的数据库密码，因此应用程序将无法针对今天的数据库。

使用上面的 Heroku 方法，开发人员可以签出去年的应用程序，使用今天的密钥对其进行配置，并针对今天的数据库成功运行它。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-20T09:14:07.543

我认为最干净的方法是使用环境变量。例如，您不必处理*.dist*文件，生产环境中的项目状态将与您本地计算机的相同。

我建议您阅读[The Twelve-Factor App](http://www.12factor.net/config)的配置章节，如果您有兴趣，也可以阅读其他章节。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-20T08:14:23.957

一种选择是将项目绑定的凭据放入加密容器（TrueCrypt 或 Keepass）并推送它。

*更新为我下面评论的答案：*

顺便说一句，有趣的问题。我刚刚发现了这个：[github.com/shadowhand/git-encrypt](https://github.com/shadowhand/git-encrypt)看起来非常有希望用于自动加密

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-07-20T08:20:40.547

我建议为此使用配置文件，而不是对其进行版本控制。

但是，您可以对文件的示例进行版本控制。

我没有看到共享开发设置的任何问题。根据定义，它不应该包含有价值的数据。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-01-13T23:21:59.630

自从提出这个问题后，我已经确定了一个解决方案，我在与一小群人一起开发小型应用程序时使用该解决方案。

[git-crypt](https://github.com/AGWA/git-crypt)

git-crypt 使用 GPG 在文件名称与某些模式匹配时透明地加密文件。例如，如果您添加到您的`.gitattributes`文件...

```
*.secret.* filter=git-crypt diff=git-crypt 
```

...然后像这样的文件`config.secret.json`将始终通过加密推送到远程存储库，但在本地文件系统上保持未加密状态。

如果我想向您的存储库添加一个新的 GPG 密钥（一个人），它可以解密受保护的文件，然后运行`git-crypt add-gpg-user <gpg_user_key>`​​. 这会创建一个新的提交。新用户将能够解密后续提交。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-09-03T21:47:39.503

[BlackBox](https://github.com/StackExchange/blackbox)最近由 StackExchange 发布，虽然我还没有使用它，但它似乎完全解决了问题并支持此问题中要求的功能。

从[https://github.com/StackExchange/blackbox](https://github.com/StackExchange/blackbox)上的描述：

> 将机密安全地存储在 VCS 存储库（即 Git 或 Mercurial）中。这些命令使您可以轻松地 GPG 加密存储库中的特定文件，以便它们在您的存储库中“静态加密”。但是，当您需要查看或编辑它们时，这些脚本可以很容易地解密它们，并解密它们以供生产使用。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-07-20T10:32:10.873

> 我一般会问这个问题，但在我的具体实例中，我想使用 git 和 github 存储 Django/Python 站点的密钥和密码。

不，只是不要，即使它是您的私人仓库并且您从不打算分享它，也不要。

您应该创建一个 local_settings.py 将其放在 VCS 忽略并在您的 settings.py 中执行类似的操作

```
from local_settings import DATABASES, SECRET_KEY
DATABASES = DATABASES

SECRET_KEY = SECRET_KEY 
```

如果您的秘密设置如此通用，我很想说您做错了什么

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-07-20T09:23:43.497

**编辑：我假设您想跟踪您以前的密码版本 - 例如，用于防止密码重用等的脚本。**

我认为 GnuPG 是最好的选择——它已经在一个与 git 相关的项目 (git-annex) 中用于加密存储在云服务上的存储库内容。GnuPG (gnu pgp) 提供了*非常*强大的基于密钥的加密。

1.  您在本地计算机上保留密钥。
2.  您将“mypassword”添加到忽略的文件中。
3.  在预提交挂钩上，您将 mypassword 文件加密到 git 跟踪的 mypassword.gpg 文件中，并将其添加到提交中。
4.  在合并后挂钩上，您只需将 mypassword.gpg 解密为 mypassword。

现在，如果您的“mypassword”文件没有更改，那么对其进行加密将产生相同的密文，并且不会被添加到索引中（无冗余）。对 mypassword 稍加修改会导致密文完全不同，并且暂存区中的 mypassword.gpg 与存储库中的相差很大，因此将添加到提交中。即使攻击者掌握了您的 gpg 密钥，他仍然需要暴力破解密码。如果攻击者可以使用密文访问远程存储库，他可以比较一堆密文，但它们的数量不足以给他带来任何不可忽略的优势。

稍后您可以使用 .gitattributes 为您的密码的退出 git diff 提供即时解密。

您还可以为不同类型的密码等设置单独的密钥。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-07-20T08:38:58.477

通常，我将密码单独作为配置文件。并使它们分布。

```
/yourapp
    main.py
    default.cfg.dist 
```

当我运行时`main.py`，将真实密码放入`default.cfg`复制的密码中。

附言。当你使用 git 或 hg 时。您可以忽略`*.cfg`要制作的文件`.gitignore`或`.hgignore`

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-07-27T14:32:15.820

**提供一种覆盖配置的方法**

这是为您签入的配置管理一组健全的默认值的最佳方式，无需配置完整或包含主机名和凭据等内容。有几种方法可以覆盖默认配置。

环境变量（正如其他人已经提到的）是一种方法。

最好的方法是寻找一个覆盖默认配置值的外部配置文件。这允许您通过配置管理系统（如 Chef、Puppet 或 Cfengine）管理外部配置。配置管理是管理与代码库分开的配置的标准答案，因此您无需发布即可更新单个主机或一组主机上的配置。

**仅供参考：**加密信用并不总是最佳实践，尤其是在资源有限的地方。加密信用可能不会为您带来额外的风险缓解，而只会增加不必要的复杂性。确保在做出决定之前进行适当的分析。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-07-26T09:41:22.227

加密密码文件，例如使用 GPG。在本地计算机和服务器上添加密钥。解密文件并将其放在您的 repo 文件夹之外。

我使用位于我的主文件夹中的 passwords.conf。在每次部署时，此文件都会更新。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-07-29T22:27:26.997

不，私钥和密码不受版本控制。没有理由让每个对您的存储库具有读取权限的人都知道生产中使用的敏感服务凭证，因为很可能并非所有人都应该有权访问这些服务。

从 Django 1.4 开始，您的 Django 项目现在附带一个`project.wsgi`定义[`application`对象](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/)的模块，它是开始强制使用`project.local`包含站点特定配置的设置模块的理想场所。

此设置模块在版本控制中被忽略，但在将项目实例作为 WSGI 应用程序运行时需要它的存在，这对于生产环境是典型的。它应该是这样的：

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "project.local")

# This application object is used by the development server
# as well as any WSGI server configured to use this file.
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

现在您可以`local.py`配置一个模块的所有者和组，以便只有授权人员和 Django 进程才能读取文件的内容。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2012-07-30T09:50:23.690

如果您的机密需要 VCS，您至少应该将它们保存在与您的实际代码分开的第二个存储库中。因此，您可以让您的团队成员访问源代码存储库，而他们不会看到您的凭据。此外，将此存储库托管在其他地方（例如，在您自己的带有加密文件系统的服务器上，而不是在 github 上），并且为了将其检出到生产系统，您可以使用类似[git-submodule 的](http://git-scm.com/book/en/Git-Tools-Submodules)东西。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-10-06T10:14:51.797

另一种方法可能是完全避免在版本控制系统中保存机密，而是使用像[hashcorp 的 vault](https://www.vaultproject.io)这样的工具，这是一种具有密钥滚动和审计功能的机密存储，具有 API 和嵌入式加密。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-04-06T21:15:43.607

这就是我所做的：

*   将所有秘密作为环境变量保存在 $HOME/.bashrc 来源的 $HOME/.secrets (go-r perms) 中（这样，如果您在某人面前打开 .bashrc，他们将看不到秘密）
*   配置文件作为模板存储在 VCS 中，例如 config.properties 存储为 config.properties.tmpl
*   模板文件包含秘密的占位符，例如：

    my.password=##MY_PASSWORD##

*   在应用程序部署中，将运行将模板文件转换为目标文件的脚本，将占位符替换为环境变量的值，例如将 ##MY_PASSWORD## 更改为 $MY_PASSWORD 的值。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-07-29T22:53:42.903

如果您的系统提供 EncFS，您可以使用它。因此，您可以将加密数据保存为存储库的子文件夹，同时为您的应用程序提供已安装的数据的解密视图。由于加密是透明的，因此在拉取或推送时不需要特殊操作。

但是，它需要挂载 EncFS 文件夹，这可以由您的应用程序根据存储在版本化文件夹之外的其他位置（例如环境变量）的密码来完成。***

# vba - 根据Excel中的时间列更改日期列

> ID：11575400
> 
> 赞同：2
> 
> 时间：2012-07-20T08:11:28.903
> 
> 标签：vba, date, time, excel

一段时间以来，我的 Excel 宏一直遇到问题，但我无法在任何地方找到解决方案。我想要做的如下所述：

我有一个 Excel 表，其中包含当月电视频道的 EPG 信息。一栏包括电视节目/事件的名称。在它旁边，另一列包括每个电视节目的相应开始时间（例如 13:15）和第三列，包括每个事件的相应日期（2012 年 7 月 20 日）。

问题是一天在 00:00 之后没有发生应有的变化，而是在早上 06:00 发生了变化。我想要一个搜索整个时间列的宏，找到 00:00 06:00 之间的任何时间，然后转到相应的日期单元格并更改日期（添加一天）。这可能吗，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:18:05.670

你不需要VBA。在您的日期列之后插入一列。我现在假设您的时间在 B 列中，而您的日期在 C 列中。现在在您的新 D 列中输入公式

```
=IF(AND(B1 >= 00:00 and B1 < 06:00), C1 + 1, C1) 
```

然后，您可以根据需要隐藏 C 列。并将 D 列的数字格式更改为日期。我不是 100% 确定比较时间的语法，即`A1 >= 00:00`但根据这个线程：[http](http://www.excelbanter.com/showthread.php?t=212849) ://www.excelbanter.com/showthread.php?t=212849它应该是

```
=IF(AND(B1 >= TIME(0,0,0) and B1 < TIME(6,0,0), C1 + 1, C1) 
```

# python - 没有 node.js 的 CoffeeScript 编译器？

> ID：11575404
> 
> 赞同：4
> 
> 时间：2012-07-20T08:12:18.833
> 
> 标签：python, node.js, compiler-construction, coffeescript

我想使用 CoffeeScript(CS) 和 CS 编译器，但不必安装 Node.js。

我看到CS的核心编译器是JavaScript，所以不需要安装Node.js，但是我找不到任何用Python/Java或任何其他语言编写的编译器，只有Node.js。

我错过了什么吗？我必须用 Python 编写自己的实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:20:27.400

[您可以使用http://code.google.com/p/pyv8/](http://code.google.com/p/pyv8/)在 python 中运行 javascript 。

您将运行[CoffeeScript 编译器的 javascript 代码](http://coffeescript.org/extras/coffee-script.js)，然后用它编译 CoffeeScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:36:16.363

如果你不想安装 node.js，你可以在你的浏览器中编译它们。[文档中](http://coffeescript.org/#scripts)有关如何执行此操作的粗略细节。

如果您不想使用浏览器，您可以在任何能够运行 javascript 的环境中运行该脚本，例如 Java 上的 Rhino、python 中的 pyv8 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-10T02:00:24.543

您可以使用如下内容：[http](http://hovet.biz/blog/?p=27) : //hovet.biz/blog/?p=27 这是一个基于 Python2 的编译器，使用 CoffeScript 编译器的 Js 版本和 Qt WebKit。注意，不涉及 Qt GUI，它只是文本。

这是来源，根据要求：

```
import sys, os, glob
import time, htmllib
from os.path import splitext
from PyQt5.QtCore import QUrl
from PyQt5.QtWebKitWidgets import QWebPage
from PyQt5.QtWidgets import QApplication

coffee_script_js = os.path.expanduser('~/src/coffee-monitor/coffee-script.js')

assert os.path.exists(coffee_script_js)

sleep_time = 0.05

class CoffeeMonitor(QWebPage):  
    def __init__(self, src_dir):
        self._cs_src = None
        self._div_start = '<div id="cssrc">'
        self._app = QApplication(sys.argv)  
        QWebPage.__init__(self)  
        self.loadFinished.connect(self.load_finished)

        self._cs_src_dir = src_dir

        if not self.prep_compile_file():
            exit()

        self._app.exec_()

    def prep_compile_file(self):
        while 1:
            try:
                src = self.get_cs_src()

                if src:
                    self.mainFrame().load(QUrl(src))
                    return True

                time.sleep(sleep_time)

            except KeyboardInterrupt:
                break

        return False

    def create_cs_html(self, f):
        f_html = f + '.html'

        src = open(f).read()

        fil = open(f_html, 'w')
        fil.write('''<html>
<body>
'''+ self._div_start +''' </div>
<script type="text/coffeescript">
''')

        fil.write('try\n')
        #fil.write("  src = CoffeeScript.compile '" + src.replace('\n', '\\n').replace("'", "\\'") + "', bare: on\n")
        fil.write("  src = CoffeeScript.compile '" + src.replace('\n', '\\n').replace("'", "\\'") + "', bare: off\n")

        fil.write('''  document.getElementById("cssrc").textContent = src
catch {location, message}
  if location?
    message = "'''+f+''': Error on line #{location.first_line + 1}: #{message}"
  document.getElementById("cssrc").textContent = message

</script>
<script src="''' + coffee_script_js + '''"></script>
</body>
</html>
''')
        fil.close()

        return 'file://' + f_html

    def get_cs_src(self):
        #files = []
        #for exts in [ 'coffee', 'cof', 'coffe', 'cofee', 'cofe', 'kaffe' ]:
        #    files += glob.glob(self._cs_src_dir + '/*.' + exts)
        files = glob.glob(self._cs_src_dir + '/*.coffee')

        self._cs_src = None

        for f in files:
            name,ext = splitext(f)
            js = name + '.js'
            if not os.path.exists(js):
                self._cs_src = f
                return self.create_cs_html(f)

            c_time_cof = os.stat(f).st_ctime
            c_time_js = os.stat(js).st_ctime
            if c_time_cof > c_time_js:
                self._cs_src = f
                return self.create_cs_html(f)

    def get_compiled_js_src(self):
        html = self.mainFrame().toHtml()
        js_src = ''
        error = False

        for line in html.split('\n'):
            if line.startswith(self._div_start):
                js_src = line[len(self._div_start):]
                if js_src.find('Error on line ') > 0:
                    js_src = '!'*5 + ' ' + js_src.rstrip('</div>\n')
                    js_src = 'alert("'+ js_src.replace('"', "'") +'");'
                    error = True
                    #print js_src
                    break

            elif js_src:
                js_src += line.rstrip('</div>\n')
                if line.find('</div>') >= 0:
                    break

        js_src = unescape(js_src)

        return js_src, error

    def load_finished(self, result):
        js_src, error = self.get_compiled_js_src()

        name,ext = splitext(self._cs_src)
        js = name + '.js'
        print '*** updating', js

        if error:
            print js_src

        fil = open(js, 'w')
        fil.write(js_src.replace(';',';\n'))      
        fil.close()

        if not self.prep_compile_file():
            self._app.quit()

def unescape(s):
    p = htmllib.HTMLParser(None)
    p.save_bgn()
    p.feed(s)
    return p.save_end()

if __name__ == '__main__':
    print 'This Python script comes with absolutely no warranty.'
    print 'Ctrl+C to quit'

    if len(sys.argv) == 1:
        print 'coffee-monitor.py  cs-src-dir (note: recursive search is not implemented)'
        exit()

    cs_dir = os.path.abspath(os.path.expanduser(sys.argv[1]))

    assert os.path.isdir(cs_dir)
    CoffeeMonitor(cs_dir) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-02T10:03:06.780

**在我看来， [DukPy](https://github.com/amol-/dukpy)是用 Python 编写的最好的 javascript 解释器！**它可以编译`CoffeeScript`,`TypeScript`和. 用法很简单：`BabelJS``JSX`

```
import dukpy
dukpy.coffee_compile("CoffeeScript goes here!") 
```

DukPy 是[Python-CoffeeScript](https://github.com/doloopwhile/Python-CoffeeScript)包的继承者，不再维护。

# c# - 我应该如何为 WP7 应用程序构建过滤搜索？

> ID：11575407
> 
> 赞同：0
> 
> 时间：2012-07-20T08:12:27.130
> 
> 标签：c#, silverlight, windows-phone-7

我正在开发一个应用程序，它在`ListBox`.

我想使用 a 创建一个搜索，`TextBox`以便当用户在过滤器中键入`TextBox`结果`ListBox`时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:54:28.453

我曾经为 WPF 应用程序编写过类似的功能。对于 a 的项目，应突出显示搜索到的文本`DataGrid`。您只需要一个`MultiValueConverter`，它将您的项目文本和搜索文本转换为一个新的`TextBlock`，其中包含`Run`带有突出显示部分的元素。

**转换器**

转换器会将文本和搜索文本转换为一个`TextBlock`实例，该实例包含`Run`具有已定义样式的匹配元素。

```
public class TextToHighlightedTextConverter : IMultiValueConverter
{
    public Style HighlightedTextStyle { get; set; }

    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        if (values.Length > 0)
        {
            if (values.Length > 1)
            {
                var text = values[0] as string;
                var searchText = values[1] as string;
                if (!string.IsNullOrEmpty(text) && !string.IsNullOrEmpty(searchText))
                {
                    var textParts = GetSplittedText(text, searchText);
                    var textBlock = new TextBlock();
                    foreach (string textPart in textParts)
                    {
                        textBlock.Inlines.Add(textPart.Equals(searchText, StringComparison.OrdinalIgnoreCase)
                                                    ? new Run(textPart) {Style = HighlightedTextStyle ?? new Style()}
                                                    : new Run(textPart));
                    }
                    return textBlock;
                }
            }
            return values[0];
        }
        return null;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    private IEnumerable<string> GetSplittedText(string text, string searchText)
    {
        IList<string> textParts = new List<string>();
        if (string.IsNullOrEmpty(searchText))
        {
            if (text.Length > 0)
            {
                textParts.Add(text);
            }
        }
        else
        {
            while (text.Length > 0)
            {
                int searchIndex = text.IndexOf(searchText, StringComparison.OrdinalIgnoreCase);
                if (searchIndex > -1)
                {
                    if (searchIndex > 0)
                    {
                        string textInFrontOfMatch = text.Substring(0, searchIndex);
                        textParts.Add(textInFrontOfMatch);
                    }
                    textParts.Add(text.Substring(searchIndex, searchText.Length));
                    text = text.Remove(0, searchIndex + searchText.Length);
                }
                else
                {
                    textParts.Add(text);
                    text = string.Empty;
                }
            }
        }
        return textParts;
    }
} 
```

**xaml 文件中的转换器定义**

在 xaml 文件中，您定义转换器并设置应用于匹配的样式。

```
<Converters:TextToHighlightedTextConverter x:Key="TextToHighlightedTextConverter">
    <Converters:TextToHighlightedTextConverter.HighlightedTextStyle>
        <Style TargetType="{x:Type Run}">
            <Setter Property="Background" Value="Orange" />
        </Style>
    </Converters:TextToHighlightedTextConverter.HighlightedTextStyle>
</Converters:TextToHighlightedTextConverter> 
```

**ListBox 的转换器使用情况**

您`DataTemplate`为您的`ListBox`. 这`DataTemplate`使用一个`ContentPresenter`其内容将由定义的转换器设置。

```
<ListBox ItemsSource={Binding YourItemsSource}>
    <ListBox.ItemsTemplate>
        <DataTemplate>
            <ContentPresenter>
                <ContentPresenter.Content>
                    <MultiBinding Converter="{StaticResource TextToHighlightedTextConverter}">
                        <MultiBinding.Bindings>
                            <Binding />
                            <Binding Path="YourSearchTextSource" />
                        </MultiBinding.Bindings>
                    </MultiBinding>
                </ContentPresenter.Content>
            </ContentPresenter>
        </DataTemplate>
    </ListBox.ItemsTemplate>
</ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:26:14.873

使用 CollectionViewSource 它对过滤和搜索非常有用：

参考： [http ://www.geoffhudik.com/tech/2010/10/14/wp7-in-app-searching-filtering.html](http://www.geoffhudik.com/tech/2010/10/14/wp7-in-app-searching-filtering.html)

# multithreading - 在 C# 4 中处理后台线程中引发事件的工作负载并控制线程数

> ID：11575413
> 
> 赞同：1
> 
> 时间：2012-07-20T08:12:35.587
> 
> 标签：multithreading, c#-4.0, event-handling, backgroundworker, task-parallel-library

我有一个 C# 4 应用程序正在订阅一个事件，我希望该事件会快速连续地引发很多次。每次引发它时，都需要做一些我不想阻塞事件线程的工作。

感觉就像我应该将这个“块”工作传递给后台线程/任务并允许事件线程继续，但是我还需要确保没有创建太多线程，正如我所说，我期望这个事件很快就被提出了很多次。

是否有公认的模式或推荐的方法将事件处理程序工作负载传递给后台线程但限制创建的线程数量？

感觉应该有某种方法可以为此使用任务并行库，但目前找不到完全符合我需要的任何东西。

如果有人需要更多信息，请告诉我，因为我很感激我对我所说的内容很笼统。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:20:40.097

在应用程序运行期间不要创建任何线程。在事件触发时创建（或分离）任务并将它们提交/排队到线程池。

如果您不实际创建任何线程（除了在启动时为线程池服务的线程），您就不能创建太多线程！

您可以创建太多任务，但还有其他机制可以限制这一点，（我通常在启动时创建固定数量的任务，但比线程数多得多，并将它们集中在 BlockingCollection 中，弹出/加载/在运行期间提交/pushingBack，因此提供数据/任务流控制）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:50:29.637

如果每次引发事件时要执行的“工作量”很小并且主要受 CPU 限制，那么`Task`每次都启动一个。这`ThreadPool`将确定要使用的最佳线程数，这很可能接近您拥有的 CPU 内核数。在这种情况下，您不必担心限制并行度。

如果每次提升的工作可能需要很长时间，或者它主要受 IO 限制，那么您应该手动限制并行度。一种方法是让少量线程在没有工作时阻塞，否则处理队列中的事件。您可以通过使用`BlockingCollection`.

如果您可以使用 .Net 4.5，可能最好的选择是使用`ActionBlock`来自 TPL Dataflow 的`MaximumDegreeOfParallelism`集合。有了它，你不会在没有工作的时候浪费任何线程，并且可以设置要使用（或不使用）的最大线程数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:03:41.790

ActionBlock 和 TPL 数据流的其余部分也可用于 .NET 4，以 CTP 的形式 - 对于主要场景，它是可靠的（我在大型项目中使用 CTP 没有任何问题 - 当然你的里程可能会有所不同）

如果您在调用远程 Web 服务后还有其他工作需要完成（例如：结果整理、更新日志），数据流块甚至允许您创建管道

# sql - Oracle中奇怪的SQL执行结果

> ID：11575415
> 
> 赞同：0
> 
> 时间：2012-07-20T08:13:10.867
> 
> 标签：sql, oracle, subquery

```
select unique owner 
from all_tables 
where sysdate-50 < (select last_analyzed from dual); 
```

我刚刚写了上面的代码，奇怪的是结果与下面的代码不同。

```
select unique owner from all_tables; 
```

但是，如果我`select last_analyzed from dual`单独执行 ( )，则会弹出一个错误。

我很困惑结果是如何产生的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:21:02.547

您的查询有一个不必要的子查询。这是等价的：

```
select unique owner from all_tables T
where sysdate-50 < T.last_analyzed; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:21:45.977

它从 中`last_analysed`作为一列`all_tables`，因为其中没有这样的列`dual`- 我想这是范围的影响。如果用别名写就更清楚了：

```
select unique owner
from all_tables t
where sysdate-50 < (select t.last_analyzed from dual); 
```

您根本不需要子查询，您可以这样做：

```
select unique owner
from all_tables
where last_analyzed >= sysdate-50; 
```

（我怀疑这是错误的方式；如果您正在寻找陈旧的统计数据，我认为您想要`< sysdate-50`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:16:57.233

last_analyzed 是 all_tables 中具有日期值的列之一。您不能单独运行子查询

# php - OOP Cookie 类

> ID：11575419
> 
> 赞同：0
> 
> 时间：2012-07-20T08:13:17.110
> 
> 标签：php, oop

我最近做了一个 cookie 类，但不幸的是它并不是真正的 OOP，因为我让这个类做了两件不同的事情。即设置/获取 cookie 并存储 te cookie。OOP 意味着每个类都有自己的操作。所以我决定重写我的课，但我不能让它工作。这就是我认为我应该这样做的方式。

我为 CRUD 和一个实现该接口的类创建了一个名为 CookieStorage 的接口。我还创建了一个 Cookie 类来设置 cookie 值等，但现在通过创建这两个类它不起作用，因为我收到此错误：致命错误：调用 /Applications/MAMP/ 中未定义的方法 CookieStorage::getName()第 27 行的 htdocs/library/lib/CookieStorage.php

下面你可以找到我的代码。提前致谢！

```
<?php

interface StorageInterface {
    public function set(Cookie $cookie);
    public function get(Cookie $cookie);
    public function update(Cookie $cookie);
    public function delete(Cookie $cookie);
}

class CookieStorage implements StorageInterface {

/**
 * constructor
 */
public function __construct() {

}

/**
 * Create cookie.
 */
public function set(Cookie $cookie) {
    return setcookie(   
        $this->getName(),
        $this->getValue(),
        $this->getTime(), 
        $this->getPath(), 
        $this->getDomain(), 
        $this->getSecure(), true 
    );
}

/**
 * Get cookie.
 */
public function get(Cookie $cookie) {
    return $_COOKIE[$this->getName()];
}

/**
 * Update cookie.
 */
public function update(Cookie $cookie) {
    return $this->update();
}

public function delete(Cookie $cookie) {
    return $this->delete();
}

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:20:01.400

看起来你想使用`$cookie->getName()`. `$this`指向存储类，但您想存储 cookie 参数的属性。

**更新：** 您在评论中提到的电话是正确的。如果你传递你的 Cookie 对象，那么在你的`set`函数中你`CookieStorage`需要使用`$cookie`，而不是`$this`.

# c# - DropDownList 选择未反映在服务器端

> ID：11575424
> 
> 赞同：0
> 
> 时间：2012-07-20T08:13:32.903
> 
> 标签：c#, jquery, asp.net, ajax, drop-down-menu

我的 asp.net 网页中有一个下拉列表。它是一个服务器端控件。我正在做一个 ajax 调用，在 ajax 调用中我正在向 ddl 添加一个新项目并将其设置为选中状态。它在页面上显示得很好。但是当我回发时，所选项目会在下拉列表中为我提供旧的所选项目。

```
// ddlCaseNumber is the id of the dropdownlist and its clientid property is set
// to static.
// Removes the selected attribute of selected selected item .
$('#ddlCaseNumber option:selected').removeAttr("selected");

// Add the new item to dropdownlist.
$('#ddlCaseNumber').append('<option selected="selected" value=' + crmid + '>' 
                           + crmid + '</option>');

// Code behind code to get the new value.
// This line is giving the old value instead of giving new value.
string strNewValue = ddlCaseNumber.SelectedItem.Value; 
```

谁能告诉我如何在后面的代码中添加新项目？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:17:52.250

在客户端上动态添加的项目**不会**在回发时自动复制到服务器上。

一种选择是以某种方式存储已添加的新项目（以 a`<input type="hidden">`或之类的方式`<asp:HiddenField>`），然后手动将项目添加为`Init`回发页面的一部分。

另一种选择是调用 AJAX 将服务器上的信息存储在`Session`变量中，然后在回发时再次手动添加。

# android - TextView lineSpacingMultiplier 小于零截断最后一行

> ID：11575425
> 
> 赞同：12
> 
> 时间：2012-07-20T08:13:35.440
> 
> 标签：android, android-layout

我有一个 TextView，我希望行距小于 1.0，即行之间的空间小于默认值。我已经这样做了：

```
 <TextView
    android:id="@+id/text_header"
    android:layout_width="@dimen/text_header_width"
    android:layout_height="wrap_content"
    android:text="@string/header_text"
    android:textSize="@dimen/text_header_text_size"
    android:typeface="helvetica"
    android:lineSpacingMultiplier="0.95" /> 
```

但是在底线的文本中，下降的部分（例如 y、g 和 p）被稍微切掉了。换句话说，这些字母的底部大约有 2 或 3 个像素缺失。

我尝试过使用边距和填充，但没有成功。我似乎能够通过使用指定的高度（有一点额外的空间）而不是 wrap_content 来解决这个问题，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-17T22:35:41.810

从我的测试来看，低于 api 21 的 android 版本似乎存在问题。我这样解决了：

在我的情况下，我使用的`TextView`a 最多有 2 行，最后是 ellipsize。

`TextView`我之前的 api 21 ( `values/style.xml`)的样式

```
<style name="MyTextViewStyle" parent="Base.TextAppearance.AppCompat">
    <item name="android:layout_width">match_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:gravity">left</item>
    <item name="android:textColor">@color/blue_dark</item>
    <item name="android:textSize">16sp</item>
    <item name="android:maxLines">2</item>
    <item name="android:ellipsize">end</item>
    <item name="android:lineSpacingExtra">-4dp</item>
    <item name="android:paddingTop">0dp</item>
    <item name="android:paddingBottom">4dp</item>
    <item name="android:includeFontPadding">false</item>
</style> 
```

`TextView`我的 api 21 及之后的样式( `values-v21/style.xml`)

```
<style name="MyTextViewStyle" parent="Base.TextAppearance.AppCompat">
    <item name="android:layout_width">match_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:gravity">left</item>
    <item name="android:textColor">@color/blue_dark</item>
    <item name="android:textSize">16sp</item>
    <item name="android:maxLines">2</item>
    <item name="android:ellipsize">end</item>
    <item name="android:lineSpacingExtra">-4dp</item>
    <item name="android:paddingTop">0dp</item>
    <item name="android:paddingBottom">0dp</item>
    <item name="android:includeFontPadding">true</item>
</style> 
```

这里的秘密主要`android:paddingBottom`是与`android:lineSpacingExtra`api 21 之前相反。在我的设备上，它纠正了最后一行在底部被切断的错误。

注意：`<item name="android:lineSpacingExtra">-4dp</item>`看起来它等同于`<item name="android:lineSpacingMultiplier">0.8</item>`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-20T10:37:53.487

尝试这个

从您的代码使用`textView.setLineSpacing()`

或者

从你的 xml 使用`android:lineSpacingExtra="xxdp"`

# php - 按带有键的数组对结果数组进行排序

> ID：11575428
> 
> 赞同：0
> 
> 时间：2012-07-20T08:13:54.743
> 
> 标签：php

我有 2 个数组：

(1) 具有键 => 值的数组，以及没有相关键的数组 (2)，并且作为值，来自数组 1 的键以不同的顺序排列。是否有一个优雅的解决方案可以将数组 1 的顺序与数组 2 中的值相同？

```
$data = array(
'NAME' => 'XYZ',
'NUMB' => 1234,
'CITY' => 'TEST'
);

$sort = array(
'A1' => 'CITY',
'XY' =>  'NUMB',
'XX' => 'NAME',
);

$result = array(
'CITY' => 'TEST,
'NUMB' => 1234,
'NAME' => 'XYZ',
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:22:30.610

```
$data = array(
    'NAME' => 'XYZ',
    'NUMB' => 1234,
    'CITY' => 'TEST'
);

$sort = array(
    'A1' => 'CITY',
    'XY' => 'NUMB',
    'XX' => 'NAME'
);

$result = array();
foreach($sort as $key => $value){
    if(isset($data[$value]))
        $result[$value] = $data[$value];
}

print_r($result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:29:10.670

我注意到了错字，并认为你想要这个：

```
$result=array();
foreach ($sort as $var=>$val){
    $result[$val]=$data[$val];
} 
```

# php - 从 php 发布到组织页面

> ID：11575431
> 
> 赞同：0
> 
> 时间：2012-07-20T08:14:02.473
> 
> 标签：php, access-token, facebook-page

我在 facebook 上有一个帐户，并且在这个帐户上有一个组织页面。我需要发布到组织页面。我阅读了很多关于它的文章并且遇到了一个问题，第一步我们必须通过这样的请求获取身份验证代码： [https](https://graph.facebook.com/oauth/authorize?client_id=) : //graph.facebook.com/oauth/authorize?client_id= {your application id}&redirect_uri={site_uri}

我们只能在授权后获取此代码，但我需要直接从我的站点发布到组织页面，无需登录 facebook（我有应用程序 ID 和秘密，我可以用这些数据编写一些请求并在没有 facebook auth 表单的情况下取回代码??)

否则，我可以获得应用程序 access_token，但我无法使用此令牌发布到组织页面（我有一个错误“用户尚未授权应用程序执行此操作”）；但我可以使用此令牌发布到我的（用户）页面。也许我必须获得一些许可才能申请发布到 org。页墙？？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:20:02.340

为了作为页面发布到页面，您需要一个页面访问令牌。请参阅此处了解更多信息[权限——页面](http://developers.facebook.com/docs/authentication/permissions/#page_perms)

# php - 在准备好的语句中执行 SELECT 查询时遇到问题

> ID：11575432
> 
> 赞同：10
> 
> 时间：2012-07-20T08:14:10.613
> 
> 标签：php, mysqli, prepared-statement

我遵循了一堆关于在准备好的语句中使用 SELECT 的不同示例，但没有返回任何内容。 *编辑*我已将代码更改为如下所示：

```
$date1 = 2012-01-01;
$date2 = 2012-01-31;
$sql_con = new mysqli('db', 'username', 'password', 'database');

if($stmt = $sql_con->prepare("SELECT eventLogID FROM Country WHERE countryCode=? AND date BETWEEN ? AND ?")){

   $stmt->bind_param("sss", $country_code, $date1,$date2); 

    $stmt->execute();

  $i=0;
  while ($stmt->fetch()){
  $stmt->bind_result($row[$i]);
  $i++;
  }

  $stmt->close();
$sql_con->close(); 
```

现在所有需要的条目，除了第一个，都被添加到 $row[]。为什么没有添加第一个条目？提前致谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-20T08:26:52.110

**编辑**07/2015 （问题自原始答案以来已被编辑，但基本原则是相同的）

**永远不会** `SELECT *`在生产环境中，它只会以奇怪的、不可预测的和看似无关的方式回来咬你。通过指定所需的列，您将确保列顺序、数据类型、约束和各种其他元素从长远来看不会给您带来问题。

这个答案仍然大部分是有效的，所以我会把它留在这里，但主要的收获是：使用 PDO，它通过一个更干净、更简洁的 API 完成了你所需要的 98% 的事情。相同的后端。如果您需要更复杂的特定于 RDBMS 的 API，那么您将已经了解您遇到的问题以及为什么需要 mysqli 等。

* * *

`SELECT *`不适用于 MySQLi 准备好的语句。[这是我推荐PDO](http://php.net/manual/en/book.pdo.php)的主要原因之一- 以及将变量引用而不是值绑定到参数的荒谬要求。

```
$stmt->bind_result($row); 
```

这不是将结果*行*绑定到变量，它只是绑定单个列。而且因为您使用过`SELECT *`，所以它不会做您想做的事。

如果您确实想在 PDO 上使用 MySQLi（正如我所说，我会推荐），在手册页上`SELECT *`的评论中，[有一些很好的示例说明如何使用。](http://uk3.php.net/manual/en/mysqli-stmt.bind-result.php)`bind_result()`

或者您可以只指定要检索的列：

```
$sql_con = new mysqli('db', 'username', 'password', 'database');

if($stmt = $sql_con->prepare("SELECT name, countryCode FROM Country WHERE countryCode = ?")) {

   $stmt->bind_param("s", $country_code); 
   $stmt->execute(); 
   $stmt->bind_result($name, $countryCode);

   while ($stmt->fetch()) {
     // Because $name and $countryCode are passed by reference, their value
     // changes on every iteration to reflect the current row
     echo "<pre>";
     echo "name: $name\n";
     echo "countryCode: $countryCode\n";
     echo "</pre>";
   }

   $stmt->close(); 
```

* * *

**根据您的新代码进行编辑**，您应该这样做：

```
// $date1 will be int(2010), $date2 will be int(1980) because you didn't
// quote the strings!
//$date1 = 2012-01-01;
//$date2 = 2012-01-31;

// Connect to DB
$sql_con = new mysqli('db', 'username', 'password', 'database');

// Check for connection errors here!

// The query we want to execute
$sql = "
  SELECT eventLogID
  FROM Country
  WHERE countryCode = ?
  AND date BETWEEN ? AND ?
";

// Attempt to prepare the query
if ($stmt = $sql_con->prepare($sql)) {

  // Pass the parameters
  $date1 = '2012-01-01';
  $date2 = '2012-01-31';
  $stmt->bind_param("sss", $country_code, $date1, $date2); 

  // Execute the query
  $stmt->execute();
  if (!$stmt->errno) {
    // Handle error here
  }

  // Pass a variable to hold the result
  // Remember you are binding a *column*, not a row
  $stmt->bind_result($eventLogID);

  // Loop the results and fetch into an array
  $logIds = array();
  while ($stmt->fetch()) {
    $logIds[] = $eventLogID;
  }

  // Tidy up
  $stmt->close();
  $sql_con->close();

  // Do something with the results
  print_r($logIds);

} else {
  // Handle error here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T09:03:29.763

我认为您必须绑定到 bind_results() 中的列，例如

```
/* prepare statement */
if ($stmt = $mysqli->prepare("SELECT Code, Name FROM Country ORDER BY Name LIMIT 5")) {
$stmt->execute();

/* bind variables to prepared statement */
$stmt->bind_result($col1, $col2);

/* fetch values */
while ($stmt->fetch()) {
    printf("%s %s\n", $col1, $col2);
} 
```

这里 $col1 和 $col2 绑定到 Country 表的 Code 和 Name 列

（而不是 * 在 SELECT 使用列名）

进一步参考： http: [//php.net/manual/en/mysqli-stmt.bind-result.php](http://php.net/manual/en/mysqli-stmt.bind-result.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-10T16:45:44.280

除了最简单的单行预期查询之外，根本不喜欢 mysqli 中的“bind_result”。

将整行填充到单个数组项中更好地完成：

```
$stmt->execute();
$result = $stmt->get_result();
while ($data = $result->fetch_assoc())
    {
        $retvar[] = $data;
    }
$stmt->close(); 
```

或者

```
while ($data = $result->fetch_row()) 
```

如果您不想要/不需要字段名称。

# gcc - 加载依赖项前的DLL设置路径

> ID：11575433
> 
> 赞同：1
> 
> 时间：2012-07-20T08:14:12.637
> 
> 标签：gcc, dll, path

我想为我的问题找到一个可行的解决方案，即“在加载 DLL 依赖项之前更改进程 PATH 变量”。

在详细解释之前，我想总结一些不能修改的需求。我在这里的其他帖子中找到了一些解决方案，但没有人满足它们：

*   我正在使用 MinGW GCC，并且不允许使用其他工具链（甚至是 MS VS）。
*   使用计算机设置更改系统（或用户）PATH 变量不是一种选择，并且复制主 DLL 的路径不是系统路径。
*   （当然）不可能在加载它的应用程序的同一路径中使用主 DLL（否则这篇文章将是一派胡言）。
*   无法使用 LoadLibrary 加载从属 DLL。

因此，我创建了一个名为 main.dll 的 DLL，它依赖于 A.dll，它位于 main.dll 的同一目录中，但与可执行文件不同。

我想在加载 A.dll 之前在 DllMain 或其他任何地方执行 GetModuleFileName 和 SetEnvironmentVariable ，因此我只能为正在运行的进程修复 PATH 变量。

我发现解决此问题的唯一方法是创建一个简单的新 main.dll，它发布与原始 main.dll 相同的方法，在 DllMain 更改路径，然后在第一次调用其中一个方法时执行一个加载库。主要问题是我有不同版本的 main.dll，具有不同的公共方法，而且我必须在创建新 main.dll 的任何时候创建一个新的“桥”，这非常烦人（并且也可能有错误） .

我阅读了有关延迟加载的信息，但我还没有找到可以与 MinGW 一起使用的方法。

有任何想法吗？

非常感谢！！！

# ios - 在 XCode 中查看我的 iOS 应用程序的“层”

> ID：11575437
> 
> 赞同：1
> 
> 时间：2012-07-20T08:14:33.270
> 
> 标签：ios, xcode

我正在 XCode 4.3.3 中为 iOS 5.1 开发一个 iOS 应用程序。有什么方法可以让模拟器或 XCode 向我展示我的应用程序中的视图层？当我使用预开发的框架时，试图弄清楚哪一层在另一层之上，我变得相当恼火。

# ruby-on-rails - 用部分替换自定义标签

> ID：11575445
> 
> 赞同：0
> 
> 时间：2012-07-20T08:14:59.203
> 
> 标签：ruby-on-rails

我一直在尝试用部分 HTML 替换我在选择的 HTML 中的自定义标签。

在我的 HTML 中，我有 [画廊 2]（2 是画廊的 ID）

我一直在尝试找到一种方法来找到 [gallery 2] 并将其替换为将 ID 为 2 的部分画廊的输出传递给部分画廊，以便它加载正确的图像。

有谁知道我怎么能做到这一点？我曾考虑过使用简单的字符串替换，但是我不确定如何调用部分的输出来替换我的 HTML 中的自定义 [gallery 2] 标记。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:35:36.500

您可以通过 local 选项将变量传递给部分

```
render partial: "form", locals: {user: @current_user, id: @current_user.id} 
```

现在你可以在局部使用`user`and 。`id`

# android - 键盘不可见

> ID：11575446
> 
> 赞同：1
> 
> 时间：2012-07-20T08:15:05.917
> 
> 标签：android, android-webview, android-viewpager

我的应用程序有一个 ViewPager 和动态 WebView。当页面显示验证码（anti-bot）进入时，那么当你点击组件输入时，键盘是不显示的。当我删除 ViewPager 并只留下一个 WebView - 显示键盘。可能是什么问题？

```
adapter=new BrowserPagerAdapter(pages);
    viewpager=new ViewPager(this);
    viewpager.setAdapter(adapter);
    viewpager.setCurrentItem(0);
    setContentView(viewpager); 
```

# powershell - 如何从对象转换为字符串

> ID：11575447
> 
> 赞同：2
> 
> 时间：2012-07-20T08:15:09.650
> 
> 标签：powershell

我是 PowerShell 的新手，所以这可能很容易回答。假设我像这样创建一个数组：

```
$array1 = "a", "b", "c" 
```

然后我创建另一个数组：

```
$array2 = $array1|select-object{$_} 
```

我想做的是加入 $array2 中的所有值，所以我最终得到字符串“ab c”，但是在 $array2 上使用 -join “” 只会产生一个空结果。有人可以向我解释如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:27:56.167

只需替换`$array2 = $array1|select-object{$_}`为`$array2 = $array1 | select-object`或`$array2 = $array1`

```
$array1 = "a", "b", "c"

#expected output: a b c
$array1 -join " "

#here it is
$array2 = $array1 | select-object

#expected output: a b c
$array2 -join " "

#here it is
$array2 = $array1

#expected output: a b c
$array2 -join " " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:29:15.333

在 PowerShell 中执行所需操作的一种简单方法是

```
"$array1" 
```

或者

```
'' + $array1 
```

如果is ，两者都将使用`$OFS`or 空格连接数组元素。`$OFS``$null`

但正如其他人所指出的，你的`Select-Object`电话是错误的。Select-Object 采用属性名称，而不是脚本块。也许你想`ForEach-Object`在那种情况下？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:24:30.457

调整

```
$array2 = $array1|select-object{$_} 
```

在

```
$array2 = $array1 
```

然后

```
$array2 -join ' ' 
```

作品！

# java - HttpServletRequest.authenticate 不要求重新登录

> ID：11575451
> 
> 赞同：0
> 
> 时间：2012-07-20T08:15:15.480
> 
> 标签：java, servlet-3.0

按预期使用以下代码和默认配置（glassfish 3.1.2 中的 HTTP 基本身份验证 + 文件领域），客户端被要求提供凭据。但是，在浏览器中刷新或什至在新选项卡上（即使不允许使用 cookie，也没有存储密码）之后，不再要求客户端重新输入凭据。只有当浏览器关闭并重新打开时，才会再次要求客户端提供凭据。身份验证如何做到这一点？

```
public class AuthenticateServlet extends HttpServlet {

    protected void processRequest(HttpServletRequest request,
            HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
            request.authenticate(response);
            out.println("Authenticate Successful");
        } finally {
            request.logout();
            out.close();
        }
    }

[...]

} 
```

问候，

麦克风

-*编辑*-

这个问题是在尝试使用程序化安全的方法时出现的。在重新启动的客户端浏览器中使用以下代码时，第一个 println 语句会引发 NPE。登录窗口甚至不会出现在客户端浏览器中。但是，当 println - 语句被删除时，登录窗口确实会出现并且登录工作正常。当再次添加 println 语句（并且没有重新启动浏览器）时，它们会被打印出来。我也尝试将 println-Statements 移动到另一个 try/catch - 块中，但这似乎没有什么区别。

```
 try {
        request.authenticate(response);

        out.println("<p>Principal's name: " + request.getUserPrincipal().getName() + "</p>");     <== NPE
        out.println("<p>is that user in role 'gruppeA': " + request.isUserInRole("a_gruppe") + "</p>");
        out.println("<p>remote User is: " + request.getRemoteUser() + "</p>");
        out.println("Authenticate Successful");
    } catch (ServletException ex) {
        out.println("Login Failed with a ServletException." + ex.getMessage());
        return;
    } finally {
        out.close();
    } 
```

这让我想到了身份验证如何工作以及如何使用它的问题。可能，一旦从浏览器登录，身份验证确实会记住并将该信息存储在服务器中。可能不是。

顺便说一句，我尝试使会话无效。但是，不需要新的登录（这符合我原来的帖子——为了测试——在客户端浏览器中禁用了 cookie）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:43:10.443

身份验证凭据缓存在某处，看起来它是基于会话的。您可以检查清除服务器中会话的方法，但您也可以在 /clear 处绑定一些 servlet 并调用 request.getSession().invalidate()

我认为缓存凭据是非常标准的，有时浏览器也会这样做，您的特定用例是什么？

# javascript - HTML 表单验证帮助

> ID：11575452
> 
> 赞同：-1
> 
> 时间：2012-07-20T08:15:17.397
> 
> 标签：javascript, html, forms, validation, email

我正在创建一个简单的 HTML 联系表单，我想验证三个字段；姓名、电子邮件和消息。然而，当涉及到 javascript 字段验证时，我并不是最聪明的，并且希望得到一些帮助。我目前的表格如下：

```
<form action="cgi-bin/FormMail.pl" method="post">
<input type="hidden" name="subject" value="From the feedback form" />
<input type="hidden" name="redirect" value="thankyou.html" />
<p>Whatever you want to say here</p>
<p>&nbsp;</p>
<table>
<tr>
<td align="left">Name:</td>
<td><input type="text" name="name" size="30" value="" /></td>
</tr>
<tr>
<td align="left">E-Mail:</td>
<td><input type="text" name="email" size="30" value="" /></td>
</tr>
<tr>
<td align="left">Content:</td>
<td><textarea name="comment" cols="50" rows="5"></textarea></td>
</tr>
<tr>
<td><input type="submit" value="Submit" /></td>
<td></td>
</tr>
</table>
<input type="hidden" name="redirect" value="thankyou.html" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:26:32.313

供您参考：根据您的需要进行修改

```
<script type="text/javascript">
function validateform()
{
var x=document.forms["myForm"]["name"].value;
if (x==null || x=="")
  {
  alert("Name Is Blank");
  return false;
  }

var x=document.forms["myForm"]["email"].value;
var atpos=x.indexOf("@");
var dotpos=x.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
  {
  alert("invalid e-mail address");
  return false;
  }

var x=document.forms["myForm"]["comment"].value;
if (x==null || x=="")
  {
  alert("Comment is blank");
  return false;
  }
}
</script>

<form name="myForm" action="cgi-bin/FormMail.pl" method="post" onsubmit="return validateform()">
<input type="hidden" name="subject" value="From the feedback form" />
<input type="hidden" name="redirect" value="thankyou.html" />
<p>Whatever you want to say here</p>
<p>&nbsp;</p>
<table>
<tr>
<td align="left">Name:</td>
<td><input type="text" name="name" size="30" value="" /></td>
</tr>
<tr>
<td align="left">E-Mail:</td>
<td><input type="text" name="email" size="30" value="" /></td>
</tr>
<tr>
<td align="left">Content:</td>
<td><textarea name="comment" cols="50" rows="5"></textarea></td>
</tr>
<tr>
<td><input type="submit" value="Submit" /></td>
<td></td>
</tr>
</table>
<input type="hidden" name="redirect" value="thankyou.html" />
</form> 
```

# javascript - 在鼠标悬停点分割二合一图像

> ID：11575453
> 
> 赞同：0
> 
> 时间：2012-07-20T08:15:20.373
> 
> 标签：javascript, image, wordpress, slider, mouseover

这是我在这里的第一篇文章，所以请多多包涵。

我正在尝试在 WordPress 网站上实现响应鼠标悬停的拆分“之前和之后”图像（由在鼠标悬停点拆分的两个图像组成）。我以前见过，所以我知道这是可能的，但是有没有我可以轻松合并的任何实现（javascript等）？这是一个模拟视频来演示我的意思：

[http://youtu.be/j7BtDoxPUnU](http://youtu.be/j7BtDoxPUnU)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:39:32.793

在这里你有一个 jQuery 的小例子：http: [//jsfiddle.net/D5LAj/](http://jsfiddle.net/D5LAj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:26:04.480

我建议你使用两个相同位置的 DIV（第二个放在另一个上面）。您可以使用 style 来实现这一点`position: absolute`。

较低的 DIV 具有您希望位于拆分视图右侧的图像作为其背景图像。它的大小与图像的大小相匹配并保持固定。

上一个具有左侧的图像作为其背景图像。它的宽度不断调整以匹配鼠标位置。后者是通过 Javascript 通过注册`onmousemove`事件来实现的。

# excel - Excel 技巧：粘贴一整列

> ID：11575456
> 
> 赞同：-1
> 
> 时间：2012-07-20T08:15:37.503
> 
> 标签：excel, openoffice-calc

我有一个邮政编码列表。我想将它们粘贴到 Excel 中，使它们全部出现在一个列中（这不是第一列）。
这可以做到吗？

如果是这样，那么邮政编码应该采用什么格式以便垂直粘贴，一次粘贴一个单元格，而不是水平粘贴。

此外，我还想知道在 OpenOffice Calc 中是否也可以使用相同的技巧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:19:59.227

是的，您肯定可以这样做..只需在记事本中像这样格式化它们..

```
110085
23485
23473
110001 
```

并粘贴到excel中所需的位置..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:22:30.327

只需像这样格式化您的邮政编码：

```
12341
12342
12343
12344 
```

然后选择所有内容并将其粘贴到excel的第一个单元格中。

您需要帮助格式化邮政编码吗？您可以使用正则表达式或在 notepad++ 中搜索和替换来实现所需的格式。

我还没有测试过它，但它也应该在 OpenOffice Calc 中工作！

# java - 在每个条目上调用 .size() 会是 Hazelcast 的性能问题吗？

> ID：11575458
> 
> 赞同：1
> 
> 时间：2012-07-20T08:15:38.627
> 
> 标签：java, performance, map, hazelcast

我`EntryListener`在 Hazelcast 上进行了一个实验，`Map`它会调用`.size()`每个条目。

我想知道这是否是一个坏主意，以及它是否可能是一个性能问题，因为它是一个集群范围的操作。

目前我看不到 5-10k 个元素和 2 个节点的性能下降。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:55:40.697

这是一个非常糟糕的主意。您的 EntryListener 将被 Hazelcast 的内部线程调用。通过调用 map.size() 你正在做一个非常昂贵的操作并阻塞线程。不建议在 Hazelcast 的线程中调用任何分布式操作。您应该在自己的线程上接收事件并调用 map.size。这可以通过向您维护的 ExecutorService 提交 runnable 来完成。请注意，这里我的意思是 jucExecutorService 不是 Hazelcast 的分布式 ES 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:26:52.840

我不确定 HazelCast 中的 Map 实现。但是一个通用的指导方针是，如果一个容器维护一个单独的变量（即我们在 java.util.collection 库的许多类中的大小）来计算其中添加的元素，那么性能下降不会有任何问题. 但是如果一个容器迭代添加的元素来计算并返回大小，当容器有相当大的数量时，性能可能会显着下降。其中的元素。也许您可以查看 HazelCast 的 Map 实现并自己决定。

# ruby-on-rails - 尝试使用 Mechanize 通过 xpath 查找图像 url

> ID：11575463
> 
> 赞同：0
> 
> 时间：2012-07-20T08:16:26.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, nokogiri, mechanize-ruby

我正在尝试查找以下页面的图像 xpath：[http ://www.spoonsisters.com/product/1032000/38710.html](http://www.spoonsisters.com/product/1032000/38710.html)

我可以通过浏览器查看 image_url，但是当我尝试通过 Mechanize 找到它时：

```
page = Agent.get("http://www.spoonsisters.com/product/1032000/38710.html")
page.parser.xpath('('//*[@id="main_image"]')')
 => [#<Nokogiri::XML::Element:0x80484c7c name="img" attributes=[#<Nokogiri::XML::Attr:0x80484bdc name="id" value="main_image">, #<Nokogiri::XML::Attr:0x80484bc8 name="src">, #<Nokogiri::XML::Attr:0x80484b8c name="alt" value="Paper Cocktail Napkins - What happens tonight goes on Facebook tomorrow">]>] 
```

我得到'src'>空白。如何找到 image_url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:52:12.533

这是因为页面加载时该图像 src 是由 javascript 设置的。如果您查看源代码并搜索“main_image”，您将看到以下内容：

```
<img id="main_image" src="" alt="Bar Towel - Wine Varietals" /> 
```

Mechanize 没有能力运行 javascript，所以它总是一个空字符串。

# android - Android无法识别的字符显示为“？”

> ID：11575471
> 
> 赞同：1
> 
> 时间：2012-07-20T08:17:14.263
> 
> 标签：android, parsing

我有一个应用程序，而不是解析 csv 并显示其内容。我的问题是将“-”显示为“？” 钻石里面。我该怎么做才能让它不显示？

编辑：这是我打开文件的代码

```
InputStream input = openFileInput("pms.csv");
SchedController.reader = new CSVReader(new InputStreamReader(input, "US-ASCII"));
SchedController.sched = SchedController.reader.readAll();
input.close(); 
```

我试过了`US-ASCII`，`UTF-8`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:13:41.147

先前答案中建议的编码并没有解决我的问题。我尝试了[在这里](https://stackoverflow.com/questions/6192910/converting-a-txt-file-from-ansi-to-utf-8-programaticaly)找到的编码“windows-1252”并且它有效：

```
CSVReader reader = new CSVReader(new InputStreamReader(input, "windows-1252")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:25:02.283

您可以通过以下方式设置编码类型：

```
StandardFonts.WIN_ANSI_ENCODING 
```

或者可以将字符串更改为：

```
 newString = oldString.replace(")", "\\)");
       newString = oldString.replace("(", "\\("); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:27:04.037

尝试将字符编码更改为**UTF-8**

```
SchedController.reader = new CSVReader(new InputStreamReader(input, "UTF-8")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:27:27.257

你也可以参考下面的帖子

[https://stackoverflow.com/a/2680834/1441666](https://stackoverflow.com/a/2680834/1441666)

Android 支持以下编码

*   Xml.Encoding ISO_8859_1
*   Xml.Encoding US_ASCII
*   XML.Encoding UTF_16
*   Xml.Encoding UTF_8

# deployment - 使用 CloudStack 部署 EC2

> ID：11575475
> 
> 赞同：1
> 
> 时间：2012-07-20T08:17:19.680
> 
> 标签：deployment, amazon-ec2, amazon-web-services, cloud, citrix

我想知道是否可以使用 cloudstack 将机器部署到 Amazon EC2。我知道 cloudstack 通过 cloud-bridge 有一个与 AWS 兼容的 api，但我不想管理 cloudstack 基础设施，而是从 cloudstack 界面管理我的 AWS 云。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:34:49.967

@Donal Lafferty 是正确的——您不能使用 CloudStack 来配置 Amazon EC2 实例，但主要原因是 CloudStack 旨在成为云/IaaS 提供商而非消费者的工具。换句话说，如果您想在公司内部运营私有云或提供公共云服务以与亚马逊竞争，CloudStack 将是一个不错的选择。OpenStack 和 VMware vCloud Director 是同一领域的另外两个选择。

听起来您正在寻找一种工具来帮助配置和管理 EC2 实例。如果您需要 AWS 控制台以外的东西，您可能需要查看[Scalr](http://scalr.net/)、[RightScale](http://www.rightscale.com/)或[Puppet Cloud Provisioner](http://puppetlabs.com/solutions/ec2/)。所有这三个都专注于与 Amazon AWS 合作，但如果您想要替代云提供商，它们也提供对 CloudStack 的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:40:59.477

目前还没有，因为 CloudStack GUI 使用 CloudStack API 与管理服务器通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T17:33:41.457

要真正独立于云并能够在任何云提供商上部署您的应用程序，甚至只需单击或命令即可在裸机中部署您的应用程序，您可以使用[ElasticBox](http://elasticbox.com)：AWS EC2、Cloudstack、VMware、Google Compute、Softlayer、Openstack 等支持的云提供商。

这是一个使用它在 AWS EC2 上部署的简单教程：

[https://elasticbox.com/documentation/deploying-and-managing-instances/using-your-aws-account/](https://elasticbox.com/documentation/deploying-and-managing-instances/using-your-aws-account/)

# c# - 选择数据集中的当前行位置

> ID：11575479
> 
> 赞同：0
> 
> 时间：2012-07-20T08:17:49.253
> 
> 标签：c#, dataset

我想在 DataSet 中选择当前行位置但没有任何循环，我可能知道但我卡住了....

首先我声明一个 DataTable 并用数据填充它：

```
DataTable dr_art_line_2 = ds.Tables["QuantityInIssueUnit"]; 
```

然后在女巫中有一个 if 循环我有这个代码：

```
if (dr_art_line_2.Rows.Count > 0)
{

   int ID_line = (int)ds.Tables["Line"].Select()[0]["Line_Id"];
   int ID = (int)ds.Tables["QuantityInIssueUnit"].Select()[ID_line]["Line_Id"];

   QuantityInIssueUnit_value = Convert.ToString(dr_art_line_2.Rows[ID] ["QuantityInIssueUnit_Text"]);
   QuantityInIssueUnit_uom = Convert.ToString(dr_art_line_2.Rows[ID]["uom"]);

}
else
{
    QuantityInIssueUnit_value = "";
    QuantityInIssueUnit_uom = "";
 } 
```

我这里有问题：

```
int ID_line = (int)ds.Tables["Line"].Select()[0]["Line_Id"];
int ID = (int)ds.Tables["QuantityInIssueUnit"].Select()[ID_line]["Line_Id"]; 
```

我想选择“Line ID”，没关系，但 ID_line 必须在每次迭代时增加一个，有没有办法对其他东西进行某种选择？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:40:13.570

CurrentRow（数据游标）是连接数据源（VB6 ActiveX ADO）的概念。当您移动、更新或删除 CurrentRow 时，所做的更改将被写回数据源。

DataTable 或 DataSet 是从 DISconnected 数据源 (ADO.NET) 返回的行的集合。

如果您想要 DataTable 的“当前行”，您可以为 DataTable 创建一个包装类并添加一个 iCurrentRow 属性。当您通过行“导航”时，您需要更新此成员变量（在您在此包装类中提供的 MoveFirst.MoveLast、MoveNext 和 MovePrev 方法中。）

有关其他替代方法，请参阅： http: [//support.microsoft.com/kb/310372](http://support.microsoft.com/kb/310372)。

如果您想要 DataGrid 的行号，请参阅这篇文章： http: [//www.codeproject.com/Articles/9601/Obtaining-Current-DataTable-Row-for-a-DataGrid](http://www.codeproject.com/Articles/9601/Obtaining-Current-DataTable-Row-for-a-DataGrid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:45:17.440

这就是东西，它的工作原理！！！！

```
if (dr_art_line_2.Rows.Count > 0)
{   
    int ID_line = dr_art_line_1.Rows.IndexOf(dr_art_line); 

    //int ID_line = (int)ds.Tables["Line"].Select()[0]["Line_Id"];
    int ID = (int)ds.Tables["QuantityInIssueUnit"].Select()[ID_line]["Line_Id"];

    QuantityInIssueUnit_value = Convert.ToString(dr_art_line_2.Rows[ID]["QuantityInIssueUnit_Text"]);
    QuantityInIssueUnit_uom = Convert.ToString(dr_art_line_2.Rows[ID]["uom"]);    
}
else
{
    QuantityInIssueUnit_value = "";
    QuantityInIssueUnit_uom = "";
} 
```

# php - Kohana 3.2 身份验证模块和致命错误

> ID：11575482
> 
> 赞同：0
> 
> 时间：2012-07-20T08:18:03.640
> 
> 标签：php, web-applications, kohana-3.2

这只是不严重的问题。但我在 kohana 3.2 中发现了一些东西（我不明白）

因此，我已经使用 Auth 模块实现了授权，并始终使用此代码检查授权。

```
//in controller
    if(Auth::instance()->get_user() == null)// not login
    {
         $this->request->redirect("authen/login"); //navigate to login page
    } 
```

它工作正常！

然后我尝试将此代码放入视图文件中。（查看文件中的任何位置）

```
<?php $dummy->dummy()?> 
```

所以，这段代码会出现这样的错误

```
Fatal error: Call to a member function dummy() on a non-object 
```

它看起来像一个正常的情况，因为 $dummy 没有定义

然后我刷新它或导航到其他页面

```
Auth::instance()->get_user() == null // it become true, after fatal error happen !! and redirect me to login page 
```

我的问题是 -**为什么 'Auth::instance()->get_user()' 在发生致命错误后返回 null**？

有人分享这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:50:50.000

您应该检查用户是否使用以下方式登录：

```
if ( ! Auth::instance()->logged_in())
    $this->request->redirect("authen/login"); 
```

# c# - C#：如何从父类填充对象的只读属性

> ID：11575489
> 
> 赞同：0
> 
> 时间：2012-07-20T08:18:34.000
> 
> 标签：c#, class, inheritance, plugins

在我编写的一段代码中，我有一个简单的插件系统。基本上，它接受一个继承自基类的类型，并在其上调用“CreateInstance”。然后我调用这个实例中的方法。超类存在于 SDK DLL 中，不包含特殊的逻辑/代码，只是在制作插件时被覆盖的骨架方法。

我希望能够为插件开发人员提供一个名为“SystemLog”的对象，这将使他们能够编写日志输出。我的问题是，我如何在创建实例时填充此对象，除非我使用 get/set 访问器将其公开？我希望它对插件开发人员是只读的，因为我不希望他们以某种方式覆盖它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:33:45.803

我在这里看到两个问题：

1.  如何将 SystemLog 传递给想要使用的插件？
2.  如何保护 SystemLog 免受插件的影响？

让我从第二个开始。您可以声明类似

```
public interface ISystemLogger 
{ 
  void log(String message);
} 
```

并在 SystemLog 之上实现一种简单的包装器（您可以将这个包装器的实例传递给插件）。所以插件只知道 ISystemLoggger 接口而不知道它的任何类型的实现

```
private sealed class SystemLoggerPluginWrapper : ISystemLogger
{
  private readonly SystemLog inner;

  public SystemLoggerPluginWrapper(SystemLog inner) {
    this.inner = inner;
  }

  public void log(string message)
  {
    inner.log(message);
  }
} 
```

1.  如果您不使用任何类型的依赖注入并手动创建实例，则可以调用 pluginType。[GetConstructors](http://msdn.microsoft.com/en-us/library/e687hf0d.aspx) () 遍历它们，如果有一个完全具有 ISystemLogger 类型的单个参数，而不是调用[CreateInstance(Type)](http://msdn.microsoft.com/en-us/library/wccyzw83%28v=vs.110%29.aspx) ，则调用[CreateInstance(Type, Object[])](http://msdn.microsoft.com/en-us/library/wcxyzt4d%28v=vs.110%29.aspx)并传递上面的包装器实例。

# php - 读取 xml 文件并将其内容加载到数组中

> ID：11575491
> 
> 赞同：0
> 
> 时间：2012-07-20T08:18:41.420
> 
> 标签：php, simplexml

我需要读取 xml 文件并将其内容加载到数组中。最简单的方法是什么？

```
$xml = json_decode(json_encode((array) simplexml_load_file("./test.xml")), 1);
print_r $xml; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T08:42:51.777

您可以尝试使用php 的**SimpleXMLElement**

```
$source = 'test.xml';

 // load as string
 $xmlstr = file_get_contents($source);
 $xmlcont = new SimpleXMLElement($xmlstr);
 foreach($xmlcont as $url) 
 {
    echo "{$url->loc} - {$url->lastmod} - {$url->changefreq} - {$url->priority}\r\n";
 } 
```

参考： http: [//php.net/manual/en/class.simplexmlelement.php](http://php.net/manual/en/class.simplexmlelement.php)

# arrays - OpenCL中结构数组的垃圾输出

> ID：11575492
> 
> 赞同：1
> 
> 时间：2012-07-20T08:18:44.580
> 
> 标签：arrays, struct, opencl

我是 OpenCL 的初学者，我正在尝试使以下内核工作。我将一个结构数组传递给内核并尝试修改它的值。我的结构声明是：

```
#define LIST_SIZE 10
#pragma pack(push, 1)

typedef struct pairt {
    int a;
    int b;
} pairt;

#pragma pack(pop) 
```

我创建缓冲区以传递此结构的主机代码是：

```
pairt p[LIST_SIZE];
p_mem_obj = clCreateBuffer(context, CL_MEM_READ_WRITE, LIST_SIZE*sizeof(struct pairt), NULL, &ret);
ret = clEnqueueWriteBuffer(command_queue, p_mem_obj, CL_TRUE, 0, LIST_SIZE*sizeof(struct pairt), &p, 0, NULL, NULL); 
```

我设置内核参数的代码是：

```
ret = clSetKernelArg(kernel, 0, sizeof(cl_mem), (void *)&p_mem_obj);
size_t global_item_size = LIST_SIZE;
size_t local_item_size = 2;
ret = clEnqueueNDRangeKernel(command_queue, kernel, 1, NULL, &global_item_size, &local_item_size, 0, NULL, &events[0]);
ret = clWaitForEvents(1, &events[0]);
ret = clReleaseEvent(events[0]);
ret = clEnqueueReadBuffer(command_queue, p_mem_obj, CL_TRUE, 0, LIST_SIZE*sizeof(struct pairt), p, 0, NULL, &events[1]);
ret = clWaitForEvents(1, &events[1]); 
```

我的内核是：

```
struct __attribute__ ((packed)) pairt {
    int a;
    int b;
};

__kernel void simple_diff( __global struct pairt* p)
{
    int i = get_global_id(0);
    __global struct pairt *tmp = &p[i];

    tmp->a = tmp->a * -1;
    tmp->b = tmp->b * -1;

} 
```

我用以下值初始化数组：

```
1 2
3 4
5 6
7 8
9 10
11 12
13 14
15 16
17 18
19 20 
```

但内核返回的值是：

```
-298660672 -32767
0 0
-4198172 0
-298660832 -32767
-4200052 0
-1 -2
-3 -4
-5 -6
-7 -8
-9 -10 
```

我不知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:31:48.500

好吧，我在 4 核 CPU 和 AMD 6950 GPU 上使用 32 位和 64 位版本的设备尝试了下面的代码。它对我的工作......

尝试将结构从 pragma pack 1 更改为默认打包或使用 int2 向量

```
/*  
Copyright (C) Tim Child 2012
All rights reserved

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

#include <stdio.h>
#include <stddef.h>
#include <stdint.h>
#include <memory.h>
#include <malloc.h>

#include "CL\cl.h"

#define LIST_SIZE 10
#pragma pack(push, 1)

typedef struct pairt 
{
    int a;
    int b;
} pairt;

#pragma pack(pop)

typedef struct pair32 
{
    int32_t a;
    int32_t b;
} pair32;

void  printAligment( char * msg, size_t a, size_t b)
{
    printf("%s\n", msg);
    printf( "\t%d\t%d\n", a, b );
}

/**
    OpenCLEnvironment  An OpenCl Environment structure
**/

typedef struct OpenCLEnvironment
{
    cl_platform_id *    platformId;
    cl_uint             platformCount;  
    cl_device_id *      deviceId;
    cl_uint      *      deviceCount;    
    cl_uint             deviceTotal;
    cl_context          context;
    cl_command_queue    queue;
    cl_uint             currentPlatform;
    cl_uint             currentDevice;

} OpenCLEnvironment;

typedef struct OpenCLKernel
{
        char *      name;
        cl_program  program;
        cl_kernel   kernel;
        char *      sourceCode;
        char *      compilerOptions;
        char *      compilerErrors;

}  OpenCLKernel;

/**
    NewOpenCLEnvironment  Create a new OpenCL Environment
    @param[in]  currentPlatform  Index of the platform Id to use
    @param[in]  currentDevice    Index of the Device Id to use

    @returns OpenCL Environment
**/
OpenCLEnvironment * NewOpenCLEnvironment(cl_uint     currentPlatform, cl_uint    currentDevice)
{
    OpenCLEnvironment * environment = NULL;
    cl_int      error = 0;
    cl_uint     i = 0;
    cl_uint     sum;
    cl_uint     offset = 0;
    static cl_context_properties properties[] = { CL_CONTEXT_PLATFORM, 0, 0};

    if ( ( environment = (OpenCLEnvironment *)malloc(sizeof (OpenCLEnvironment  ) ) ) != NULL)
    {
        memset( environment, 0, sizeof(OpenCLEnvironment) );

        if ( ( error = clGetPlatformIDs( 0, NULL,  &environment->platformCount) ) == CL_SUCCESS)
        {
            environment->deviceCount = (cl_uint*)malloc( sizeof( cl_uint) * environment->platformCount  ) ;
            environment->platformId =  (cl_platform_id *)malloc( sizeof( cl_platform_id) * environment->platformCount  ) ;
            if ( environment->platformId &&
                environment->platformCount > 0 &&
                ( error = clGetPlatformIDs( environment->platformCount, environment->platformId,  0) ) == CL_SUCCESS)
            {
                sum = 0;
                for( i = 0; i < environment->platformCount; i++)
                {
                     if ( ( error = clGetDeviceIDs( environment->platformId[i], CL_DEVICE_TYPE_ALL, 0, NULL, &sum ) ) == CL_SUCCESS )
                     {
                         environment->deviceCount[i] = sum;
                         environment->deviceTotal += sum;
                     }
                }

                environment->deviceId = (cl_device_id *) malloc( sizeof(cl_device_id) * environment->deviceTotal );
                offset = 0;
                for( i = 0; i < environment->platformCount  && environment->deviceId; i++)
                {
                    if (  ( error = clGetDeviceIDs( environment->platformId[i], CL_DEVICE_TYPE_ALL, environment->deviceCount[i], 
                                        &environment->deviceId[offset],  &sum ) ) == CL_SUCCESS )
                    {
                        offset += sum;
                    }
                }
            }
        }

        if ( currentPlatform <  environment->platformCount && currentDevice < environment->deviceTotal )
        {
            environment->currentPlatform = currentPlatform;
            environment->currentDevice = currentDevice;
            properties[ 1] = (cl_context_properties)environment->platformId[ environment->currentPlatform ];
            environment->context = clCreateContext( properties, 1, &environment->deviceId[ environment->currentDevice ],
                NULL, NULL, &error );

            if (error == CL_SUCCESS)
            {
                environment->queue = clCreateCommandQueue( environment->context,environment->deviceId[ environment->currentDevice ], 0, &error);
            }
        }
    }

     return environment;
}

/**
    NewOpenCLKernel  Create a new OpenCL Kernel from Source code
    @param[in] environment  OpenC;l Environment
    @param[in] name Kernel Name
    @param[in] sourceCode  Kernel source code
    @param[in] compilerOptions command line option used to compile the  kernel

    @returns  a New OpenCL Kernel structure
**/
OpenCLKernel * NewOpenCLKernel( OpenCLEnvironment *  environment, char * name, char * sourceCode, char * compilerOptions )
{
    OpenCLKernel *  kernel = NULL;
    size_t          size = 0;
    cl_int          error = CL_SUCCESS;
    cl_int          error2 = CL_SUCCESS;

    if (  ( kernel = ( OpenCLKernel * ) malloc(sizeof ( OpenCLKernel )  ) ) != NULL )
    {
        memset(kernel, 0, sizeof( OpenCLKernel ) );
        kernel->sourceCode = sourceCode;
        kernel->name = name;
        kernel->compilerOptions = compilerOptions;

        kernel->program = clCreateProgramWithSource( environment->context, 1, &kernel->sourceCode, NULL, &error );

        error = clBuildProgram( kernel->program, 1, &environment->deviceId[ environment->currentDevice], kernel->compilerOptions,
            NULL, NULL );

        if ( error == CL_BUILD_SUCCESS )
        {
             kernel->kernel = clCreateKernel( kernel->program, name, &error );
        }
        else if ( error != CL_SUCCESS)
        {
            error2 = clGetProgramBuildInfo( kernel->program, environment->deviceId[ environment->currentDevice], 
                CL_PROGRAM_BUILD_LOG, (size_t)NULL, NULL, &size );
            kernel->compilerErrors = (char*)malloc( size  +1);

            error2 = clGetProgramBuildInfo( kernel->program, environment->deviceId[ environment->currentDevice], 
                CL_PROGRAM_BUILD_LOG, size, kernel->compilerErrors , &size );

        }

    }

    return kernel;
}

void PrintPair(char * msg, pairt * p, int n)
{
    int i = 0;

    printf("%s\n", msg);
    for ( i = 0; i < n; i++)
    {
        printf ("\t%d\t%d\n", p[i].a, p[i].b );
    }
    printf( " \n" );
}

int main ( int argc, char  ** argv)
{
    cl_int      error = CL_SUCCESS;
    cl_mem      p_mem_obj;
    size_t      global_item_size = LIST_SIZE;
    size_t      local_item_size = 2;
    cl_event    events[2];

    static pairt    unaligned[] = { 
        1, 2,
        3, 4,
        5, 6,
        7, 8,
        9, 10,
        11, 12,
        13, 14,
        15, 16,
        17, 18,
        19, 20,};

    pair32  aligned[] = { 
        1, 2,
        3, 4,
        5, 6,
        7, 8,
        9, 10,
        11, 12,
        13, 14,
        15, 16,
        17, 18,
        19, 20,};

    cl_int2 vector[] = {

        1, 2,
        3, 4,
        5, 6,
        7, 8,
        9, 10,
        11, 12,
        13, 14,
        15, 16,
        17, 18,
        19, 20,};

    OpenCLEnvironment *  environment = NewOpenCLEnvironment(0, 1);

    static char * simple_diff = "struct __attribute__ ((packed)) pairt { \
    int a; \
    int b; \
}; \
 \
__kernel void simple_diff( __global struct pairt* p) \
{                                                    \
    int i = get_global_id(0); \
    __global struct pairt *tmp = &p[i]; \
    \
    tmp->a = tmp->a * -1; \
    tmp->b = tmp->b * -1; \
\
}";

    OpenCLKernel *  simpleDiff;  

    printAligment( "Pack 1 aligned", offsetof(pairt, a), offsetof(pairt, b) );
    printAligment( "Default aligned", offsetof(pair32, a), offsetof(pair32, b) );
    printAligment( "Vector aligned", offsetof(cl_int2, s[0]), offsetof(cl_int2, s[1]) );

    simpleDiff = NewOpenCLKernel(environment,  "simple_diff", simple_diff, "" );

    p_mem_obj = clCreateBuffer(environment->context, CL_MEM_READ_WRITE, LIST_SIZE*sizeof(struct pairt), NULL, &error);
    error = clEnqueueWriteBuffer(environment->queue, p_mem_obj, CL_TRUE, 0, LIST_SIZE*sizeof(struct pairt), &unaligned, 0, NULL, NULL);

    error = clSetKernelArg(simpleDiff->kernel, 0, sizeof(cl_mem), (void *)&p_mem_obj);

    error = clEnqueueNDRangeKernel( environment->queue, simpleDiff->kernel, 1, NULL, &global_item_size, &local_item_size, 0, NULL, &events[0]);
    error = clWaitForEvents(1, &events[0]);
    error = clReleaseEvent(events[0]);
    error = clEnqueueReadBuffer(environment->queue, p_mem_obj, CL_TRUE, 0, LIST_SIZE*sizeof(struct pairt), unaligned, 0, NULL, &events[1]);
    error = clWaitForEvents(1, &events[1]);
    error = clReleaseEvent(events[1]);

     PrintPair( "Pack 1", unaligned, sizeof(unaligned)/sizeof(unaligned[0]) )
} 
```

# android - 在不损失质量的情况下调整位图大小

> ID：11575493
> 
> 赞同：0
> 
> 时间：2012-07-20T08:18:51.010
> 
> 标签：android

我将图片从 sd 卡加载到位图。文件是 jpeg。我这样做是这样的：

```
Bitmap b = BitmapFactory.decodeFile("/sdcard/DinEgen/"+name.get(position), null);
        Bitmap img = Bitmap.createScaledBitmap( b, width, height, true);

         b.recycle();
        i.setImageBitmap(img); 
```

但是当我 scaledBitmap 我失去了质量。当我只使用“位图 b”时，质量很好。所以当我使用`createScaledBitmap`. 如何将位图 b 缩放为大小`hight`和`width`变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:20:29.423

我已经为它写了一个类。

```
 public class BitmapSizeHelper
{

    public static enum ScalingLogic
        {
            CROP, FIT
        }

    public static Bitmap getBitmapFromResources(Resources res, int resId, int dstWidth, int dstHeight, ScalingLogic scalingLogic)
        {
            Options options = new Options();
            options.inJustDecodeBounds = true;
            BitmapFactory.decodeResource(res, resId, options);
            options.inJustDecodeBounds = false;
            options.inSampleSize = calculateSampleSize(options.outWidth, options.outHeight, dstWidth, dstHeight, scalingLogic);
            Bitmap unscaledBitmap = BitmapFactory.decodeResource(res, resId, options);

            return unscaledBitmap;

        }

    public static Bitmap getBitmapFromPath(int targetW, int targetH, String photopath, int dstWidth, int dstHeight, ScalingLogic scalingLogic)
        {

            Options options = new Options();
            options.inJustDecodeBounds = true;
            BitmapFactory.decodeFile(photopath, options);
            options.inJustDecodeBounds = false;
            options.inSampleSize = calculateSampleSize(options.outWidth, options.outHeight, dstWidth, dstHeight, scalingLogic);
            Bitmap bitmap = BitmapFactory.decodeFile(photopath, options);

            return bitmap;

        }

    public static int calculateSampleSize(int srcWidth, int srcHeight, int dstWidth, int dstHeight, ScalingLogic scalingLogic)
        {
            if (scalingLogic == ScalingLogic.FIT)
                {
                    final float srcAspect = (float) srcWidth / (float) srcHeight;
                    final float dstAspect = (float) dstWidth / (float) dstHeight;

                    if (srcAspect > dstAspect)
                        {
                            return srcWidth / dstWidth;
                        }
                    else
                        {
                            return srcHeight / dstHeight;
                        }
                }
            else
                {
                    final float srcAspect = (float) srcWidth / (float) srcHeight;
                    final float dstAspect = (float) dstWidth / (float) dstHeight;

                    if (srcAspect > dstAspect)
                        {
                            return srcHeight / dstHeight;
                        }
                    else
                        {
                            return srcWidth / dstWidth;
                        }
                }
        }

    public static Bitmap createScaledBitmap(Bitmap unscaledBitmap, int dstWidth, int dstHeight, ScalingLogic scalingLogic)
        {
            Rect srcRect = calculateSrcRect(unscaledBitmap.getWidth(), unscaledBitmap.getHeight(), dstWidth, dstHeight, scalingLogic);
            Rect dstRect = calculateDstRect(unscaledBitmap.getWidth(), unscaledBitmap.getHeight(), dstWidth, dstHeight, scalingLogic);
            Bitmap scaledBitmap = Bitmap.createBitmap(dstRect.width(), dstRect.height(), Config.ARGB_8888);
            Canvas canvas = new Canvas(scaledBitmap);
            canvas.drawBitmap(unscaledBitmap, srcRect, dstRect, new Paint(Paint.FILTER_BITMAP_FLAG));

            return scaledBitmap;
        }

    public static Rect calculateSrcRect(int srcWidth, int srcHeight, int dstWidth, int dstHeight, ScalingLogic scalingLogic)
        {
            if (scalingLogic == ScalingLogic.CROP)
                {
                    final float srcAspect = (float) srcWidth / (float) srcHeight;
                    final float dstAspect = (float) dstWidth / (float) dstHeight;

                    if (srcAspect > dstAspect)
                        {
                            final int srcRectWidth = (int) (srcHeight * dstAspect);
                            final int srcRectLeft = (srcWidth - srcRectWidth) / 2;
                            return new Rect(srcRectLeft, 0, srcRectLeft + srcRectWidth, srcHeight);
                        }
                    else
                        {
                            final int srcRectHeight = (int) (srcWidth / dstAspect);
                            final int scrRectTop = (int) (srcHeight - srcRectHeight) / 2;
                            return new Rect(0, scrRectTop, srcWidth, scrRectTop + srcRectHeight);
                        }
                }
            else
                {
                    return new Rect(0, 0, srcWidth, srcHeight);
                }
        }

    public static Rect calculateDstRect(int srcWidth, int srcHeight, int dstWidth, int dstHeight, ScalingLogic scalingLogic)
        {
            if (scalingLogic == ScalingLogic.FIT)
                {
                    final float srcAspect = (float) srcWidth / (float) srcHeight;
                    final float dstAspect = (float) dstWidth / (float) dstHeight;

                    if (srcAspect > dstAspect)
                        {
                            return new Rect(0, 0, dstWidth, (int) (dstWidth / srcAspect));
                        }
                    else
                        {
                            return new Rect(0, 0, (int) (dstHeight * srcAspect), dstHeight);
                        }
                }
            else
                {
                    return new Rect(0, 0, dstWidth, dstHeight);
                }
        }

}` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:26:24.950

[除非它们是矢量图形](http://en.wikipedia.org/wiki/Vector_graphics)，否则您无法在不损失质量的情况下调整图像大小。不过，可能有一些方法可以最大限度地减少质量损失。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-08-12T16:44:53.290

当您解码 JPEG 时，使用`BitmapOptions`明确告诉不要缩放等。

```
Options options = new BitmapFactory.Options();
options.inScaled = false;
options.inDither = false;
options.inPreferredConfig = Bitmap.Config.ARGB_8888;
Bitmap b = BitmapFactory.decodeFile("/sdcard/DinEgen/"+name.get(position), options); 
```

# c# - 使用 C# 将文本文件中特定行的数据加载到 SQL 中

> ID：11575497
> 
> 赞同：1
> 
> 时间：2012-07-20T08:19:14.330
> 
> 标签：c#, sql, text-files

我的问题既简单又复杂。我是一名 SQL DB 开发人员，现在必须创建一个包含 C# 代码的 SSIS 包。代码需要做一些事情，但我遇到问题的组件是：

1.  读取文本文件中的最后一行并将该行插入到 SQL 表的列中。
2.  从第 2 行到倒数第 2 行的每个详细信息行都需要插入到另一个表中。

我对 C# 比较陌生，不知道如何去做。有人可以指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:26:54.350

文件有多大？如果您可以将其全部读入内存，它将使生活变得更加*简单*：

```
string[] lines = File.ReadAllLines("file.txt");

// Could use lines[lines.Length - 1] but LINQ makes it simpler...
string lastLine = lines.Last();

IEnumerable<string> otherLines = lines.Skip(1).Take(lines.Length - 2); 
```

这就是“从文件中获取数据”部分。对于数据库部分，您并没有真正向我们提供足够的信息来帮助您。您需要确定您将如何进行数据库访问（直接 ADO.NET、LINQ 等），然后阅读有关该主题的教程。周围有很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:30:07.440

试试这个在网上为你找到的

```
public static String ReadLastLine(string path)
{
    return ReadLastLine(path, Encoding.ASCII, "\n");
}

public static String ReadLastLine(string path, Encoding encoding, string newline)
{
    int charsize = encoding.GetByteCount("\n");
    byte[] buffer = encoding.GetBytes(newline);
    using (FileStream stream = new FileStream(path, FileMode.Open))
    {
        long endpos = stream.Length / charsize;
        for (long pos = charsize; pos < endpos; pos += charsize)
        {
            stream.Seek(-pos, SeekOrigin.End);
            stream.Read(buffer, 0, buffer.Length);
            if (encoding.GetString(buffer) == newline)
            {
                buffer = new byte[stream.Length - stream.Position];
                stream.Read(buffer, 0, buffer.Length);
                return encoding.GetString(buffer);
            }
        }
    }
    return null;
} 
```

[http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/ff6c07e2-9c36-4490-a989-f24dcff76145](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/ff6c07e2-9c36-4490-a989-f24dcff76145)

# excel - 将时间格式单元格粘贴为数字。

> ID：11575499
> 
> 赞同：1
> 
> 时间：2012-07-20T08:19:28.147
> 
> 标签：excel

' 我正在为我的项目开发 excel。

我的一个单元格被格式化为“h”类型的自定义格式，例如 6。

我复制那个单元格并将特殊值粘贴到另一个单元格上，它返回 0.25

我的理想结果只是 6 作为一个数字。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:31:11.750

在 Excel 中，日期从原始日期开始存储：`01/01/1900 00:00:00`并转换为一种时间戳，其中每天为 1 个单位。

```
1 -> 01/01/1900 00:00:00
2 -> 02/01/1900 00:00:00
3 -> 03/01/1900 00:00:00 
```

等等。

因此，即使 Excel 显示`6`在格式为日期的单元格中（`h`是日期的一部分），内部值也是`0,25`，对应于`00/01/1900 00:06:00`（ok`00`不存在，我只是想以此作为示例）。

如果没有这种行为，我看不到任何将值复制粘贴到另一个单元格的简单方法。

我建议两种解决方法：

1.  将目标单元格的格式更改为日期（或`h`）
2.  在目标单元格中​​使用公式，例如`=HOURS(A1)`

# css - css3 中 display:box 和 display:flexbox 有什么区别

> ID：11575501
> 
> 赞同：1
> 
> 时间：2012-07-20T08:19:30.647
> 
> 标签：css, flexbox

> **可能重复：**
> [display:box 和 display:flexbox 有什么区别](https://stackoverflow.com/questions/8796757/what-are-the-differences-between-displaybox-and-displayflexbox)

我在这里阅读了一个 css3`flex-box` [演示](http://jsbin.com/upumiw/edit#html,live)，父元素的样式是：

```
 .flexbox {
    display: -webkit-flexbox;    
    -webkit-flex-pack: center;
    -webkit-flex-align: center;
    width: 50%;
    height: 100px;
    background: orange;
  } 
```

一旦我将 更改`display: -webkit-flexbox;`为`display: -webkit-box;`，页面布局就发生了变化。

购买 我阅读了一些关于`-webkit-flexbox`and `-webkit-box`just is the syntax.的教程。是这样吗？它们之间有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:41:33.527

根据此[来源](http://coding.smashingmagazine.com/2011/09/19/css3-flexible-box-layout-explained/)，规格已更改：

工作草案对弹性盒模型中使用的大部分语法进行了更改。例如：

```
display: box; 
```

这将变成：

```
display: flexbox; 
```

两个版本的语法都有效（至少在 chrome 中）。更改样式后布局看起来不一样的原因`display`是因为您必须更改`-webkit-flex-pack: center;`为何`-webkit-box-pack: center;`时使用`display: -webkit-box;`

所以这相当于你上面的css样式，应该产生相同的布局：

```
.flexbox {
    display: -webkit-box;    
    -webkit-flex-box: center;
    -webkit-flex-box: center;
    width: 50%;
    height: 100px;
    background: orange;
  } 
```

# c - 让 gcc 通过寄存器传递参数

> ID：11575502
> 
> 赞同：3
> 
> 时间：2012-07-20T08:19:34.153
> 
> 标签：c, linux, gcc

在我的 32 位 x86 Ubuntu11.10 上，gcc4.6.3 通过堆栈传递参数。是否有任何 gcc 优化强制 gcc 通过寄存器传递参数？以及 gcc 是如何做到的？我想要一些细节，请。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T08:35:21.940

相关属性是`__attribute__((fastcall))`。使用此属性声明的函数在 ECX 中使用它们的第一个合格参数调用，在 EDX 中使用第二个合格参数调用。

（我假设 x86。你刚刚说的是 32 位，但这涵盖了许多架构，例如 ARM）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T08:28:46.693

在您的情况下，GCC 在堆栈上传递参数，因为 Linux-x86 ABI 指定了这一点。使用 fastcall 函数属性，您可以更改它，这当然会破坏 ABI 并因此导致各种问题。

一个解决方案可能是切换到 x86-64，其中 ABI 指定（某些）参数由寄存器传递。或者，如果您喜欢最前沿的东西，新的 x32 ABI 类似于 x86-64 ABI，但具有 32 位指针。

# c# - ViewBag.Something 也可以将数据从视图传输到控制器吗？

> ID：11575506
> 
> 赞同：0
> 
> 时间：2012-07-20T08:19:58.770
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

我有以下情况：

```
@model MvcApp.Models.MyAppModel
@{ ViewBag.ActionName = this.Context.Request.RequestContext.RouteData.Values["action"]; } 
```

使用我检查的调试器，我确信 Viewbag.ActionName 收到了它的值。但是在控制器中 ViewBag 总是空的。为什么？我只在这些请求之间使用它（这意味着我总是尊重这个顺序，从这个角度来看，我单击一个总是需要我删除的操作链接。请赐教。干杯。

```
[HttpGet]
public ActionResult Delete(int id)
{
    string actionName = ViewBag.ActionName; 
```

您需要的任何细节都可以询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:36:18.627

视图包中的数据仅在单个请求期间有效。但是您在谈论两个请求：第一个呈现页面，第二个处理*删除*操作。这就是为什么控制器中的视图包最初是空的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:40:28.527

请求的流程是：首先是控制器，然后是视图。

所以答案是否定的，你在视图中所做的，不能延续到动作/控制器。

# php - 我没有收到请求的页面 ID 网址

> ID：11575511
> 
> 赞同：1
> 
> 时间：2012-07-20T08:20:24.073
> 
> 标签：php, url, get

```
function getUrl() {
  $url  = @( $_SERVER["HTTPS"] != 'on' ) ? 'http://'.$_SERVER["SERVER_NAME"] :  'https://'.$_SERVER["SERVER_NAME"];
  $url .= ( $_SERVER["SERVER_PORT"] !== 80 ) ? ":".$_SERVER["SERVER_PORT"] : "";
  $url .= $_SERVER["REQUEST_URI"];
  return $url;
}
?> 
```

if ($sessionUser == 1 || $sessionSeller == 1 || $sessionadmin == 1) { ?> :* " onClick="validate_form('frm_comment')" />
" />

" onClick="window.location .href='login.php?event=Account&url='"'" />

仍然显示get url是这样的：/login.php?event=Account&url=

如何获取 /login.php?event=Account&url=205 ..... 之类的页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:23:29.017

```
<?php 
      $getUrl = $_GET['url']; 
      echo $getUrl;
?> 
```

# ruby - Rails3 中的 :remote=>true 是否自动降级？

> ID：11575522
> 
> 赞同：0
> 
> 时间：2012-07-20T08:20:57.997
> 
> 标签：ruby, ruby-on-rails-3

我已经阅读了有关`:remote=>true`在 rails3 中使用的信息，并且知道它将`data-remote=true`属性添加到生成的 html 标记中。但是`data-remote`是html5中引入的一个新属性。是否会在不支持属性`:remote=true`的浏览器中自动降级为某些兼容的实现（旧 js 或其他） ？`data-remote`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T08:27:35.463

你不必担心这一点。

`data-remote`不是浏览器支持的东西，而是在 rails-ujs（这是 jQuery-to-Rails 集成库）中实现的东西。今天几乎所有的浏览器都支持数据属性（甚至在 HTML5 引入之前就支持它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:35:33.517

HTML5 引入了[自定义数据属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#custom-data-attribute)，即您可以通过在元素前面加上`data-`. Rails`data-remote="true"`使用 jQuery 使用和添加功能。

您的浏览器只需[与 jQuery 兼容](http://docs.jquery.com/Browser_Compatibility)。

# javascript - javascript：加载合成图像时加载条/轮

> ID：11575523
> 
> 赞同：1
> 
> 时间：2012-07-20T08:20:59.843
> 
> 标签：javascript, image-loading

我有一个带有一些 javascript 函数的 HTML 页面。它基本上是这样做的......我有一些具有透明背景（.png）的图像，我使用 z-index 属性将每个图像与其他图像相结合，以便我可以组装一个新图像。使用一些按钮，您可以激活用其他图像替换某些图像的 javascript。

也许一个例子可以帮助你更好地理解这种情况：想象一辆汽车。你有三个图像：眼镜、轮子和身体。每个图像都有一个透明的背景，因此如果您将所有图像一起查看，您可以看到整辆车。使用按钮，您可以用另一个车轮图像替换车轮图像，这样您就可以看到同一辆车的更多“版本”，而无需为每个组合创建图像（我有 345 种可能的组合，所以这是唯一的方法）。

它工作得很好，但速度很慢 :( 当我只需要更改一件时，替换会立即发生，但是当我必须一键更改许多件时，它会缓慢加载图像，因此效果很糟糕。

我需要的是一个加载条/轮子，它出现在所有其他图像上，并且在浏览器完成加载合成图像时消失。我试图在网上搜索解决方案，但我只找到加载整个页面的解决方案。但在我的情况下，页面不会改变，只有内部图像会改变。

我该如何解决这个问题？在此先感谢，马可

# javascript - 如果支持 box-shadow 则隐藏边框

> ID：11575524
> 
> 赞同：0
> 
> 时间：2012-07-20T08:21:00.783
> 
> 标签：javascript, css

我有一个带有边框和框阴影的 div：

```
div.my-div
{
    border: 1px solid #555;
    box-shadow: 0px 4px 35px rgba(0,0,0,0.5);
} 
```

边框很丑，但是对于不支持阴影的浏览器来说是必须的（div的背景和周围元素的颜色一样）。

如何检测浏览器是否支持 box-shadow，并移除 box-shadow？也许用javascript？

**编辑：**我想在没有任何依赖项的情况下执行此操作（例如modernizr）。

例如：

```
var boxShadowSupported = ???;
if (boxShadowSupported && typeof(document.getElementsByClassName) != 'undefined') {
  var elements = document.getElementsByClassName('my-div');
  for (var i= 0; i < elements.length; i++) {
    elements[i].setAttribute('style', 'border: 0;');
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:42:09.407

您可以使用 javascript 检查 box-shadow 浏览器支持：

```
if ('boxShadow' in document.body.style ) 
{
    alert('I can support shadow!');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:43:53.087

也许你可以试试这个：

```
var foo=document.createElement("div");
foo.style.boxShadow="0px 0px 0px rgb(0,0,0)";
document.body.appendChild(foo);
var boxShadowSupported=foo.style.boxShadow?1:0; 
```

# c - C：二维数组的指针

> ID：11575526
> 
> 赞同：0
> 
> 时间：2012-07-20T08:21:02.450
> 
> 标签：c, multidimensional-array

我可以将指针用于一维数组的函数，但我不知道对二维数组使用相同的技术。

这是我的示例代码：

```
 int main(){
          int b[10]; //initialize b
          Print(b);
          int a[10][10]; //initialize a
          Print2(a);
        }

        void Print(int*b){  
           for(int i=0; i<10; i++)
              printf("%d\n",*(b+i));
        }

    // I want to use same technique here
    // but i have met error 

        void Print2(int*a){
           for(int i=0; i<10; i++)
              for(int j=0; j<10; j++)
                  printf("%d\n",*(*(a+i)+j));  // error at this line
        } 
```

请帮助我如何将相同的一维数组技术用于二维数组。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:26:32.767

破坏内部 * 并将 i 乘以 10 然后添加 j

```
 printf("%d\n",*((a+i*10)+j)); 
```

因为在 2d 矩阵中“向下”，您将通过维度 1（在本例中为 10）元素。

对于 3d：

```
 printf("%d\n",*(a+i*100+j*10+k)); 
```

对于 N 维：

```
 *(a+i*(size of i-dimension)+j*(size of j dim)+......+last index) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:28:17.380

我发现这种粘贴非常有用，称为“阵列衰减”。检查每个示例行上方的注释以了解类型。

[http://ideone.com/1PyNC](http://ideone.com/1PyNC)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:39:29.423

`b`是一个整数数组，所以它的第一个元素是一个`int`. 当`b`衰减到指向其第一个元素的指针时，结果因此是一个`int*`（这就是你的`Print`函数接受的）。

`a`是一个数组数组，所以它的第一个元素是一个数组。因此，当`a`衰减到指向其第一个元素的指针时，结果是指向 10 整数数组的指针：

```
void Print2(int (*a)[10] ){    // pointer-to-array type
    for(int i=0; i<10; i++)
        for(int j=0; j<10; j++)
            printf("%d\n",a[i][j]);
} 
```

多维数组只能让你在 C 中走这么远，因为当你传递它们时，只有第一个维度是可变的。其余维度需要在编译时知道，因为它们是指针类型的一部分。如果您需要在多个维度上可变的东西，您可以像在 tuğrul büyükışık 的回答中那样“展平”它并使用一维数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T08:51:44.923

问题是，数组衰减为指针，但二维数组衰减为指向特定大小数组的指针。

```
#include "stdio.h"

void print(int *arr);
void print2D(int (*arr)[]);

int main() {
    int data[5] = {1, 2, 3, 4, 5};
    print(data);

    int data2D[5][5];
    for (int i = 0; i < 5; i++) {
        for (int j = 0; j < 5; j++) {
            data2D[i][j] = (i + 1) * 10 + (j + 1);
        }
    }
    print2D(data2D);
}

void print(int *arr) {  
    for (int i = 0; i < 5; i++) {
        printf("%d\n", arr[i]);
    }
}

void print2D(int (*arr)[5]) {  
    for (int i = 0; i < 5; i++) {
        for (int j = 0; j < 5; j++) {
            printf("%d\n", arr[i][j]);
        }
    }
} 
```

在这里，如您所见，我在二维函数中将数组声明为指向 5 个元素的数组的指针。现在当我递增时`i`，编译器知道我想跳过五个元素。您可以[在 Ideone 运行此示例](http://ideone.com/fLXCW)。

当然，您可以手动完成。在这种情况下，您必须自己计算地址。在这种情况下，函数将如下所示：

```
void print2D(int *arr) {  
    for (int i = 0; i < 5; i++) {
        for (int j = 0; j < 5; j++) {
            printf("%d\n", *(arr + (i * 5) + j));
        }
    }
} 
```

你必须这样称呼它：

```
print2D(data2D[0]); 
```

[关于 Ideone 的第二个例子](http://ideone.com/aW25J)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T09:04:02.227

```
 #include <stdio.h>

        void Print(int*b)
        {
        int i;
           for(i=0; i<10; i++)
              printf("%d\n",*(b+i));
        }

        void Print2(int*a)
        {
           int i,j;
           for( i=0; i<10; i++)
           {
              printf("\n");
              for(j=0; j<10; j++)
                  printf("%d\t",*(a+(i*10)+j));  // Modification done here.
           }
        }

        int main()
        {
          int b[10]; //initialize b
          Print(b);
          int a[10][10] = {}; //initialize a 0
          Print2((int*)a);
          return 0;
        } 
```

我已经修改了 Print2()。

> 将（一维数组的大小*要访问的一维数组（i））+一维数组中的特定元素（j）添加到数组的基地址。

# android - 连接到 Android 中的在线 SQL 数据库

> ID：11575529
> 
> 赞同：1
> 
> 时间：2012-07-20T08:21:25.133
> 
> 标签：android, database, sql-server-2005

我正在开发与外部 MSSQL 数据库（SQL server 2005）交互的 android 应用程序。但是不知道如何使这成为可能……所以我参考了一些文章，例如……

[Android Java 连接到在线数据库](https://stackoverflow.com/questions/9493822/android-java-connect-to-online-database)

[https://groups.google.com/forum/?fromgroups#!topic/android-developers/9KCkhHP2_RY](https://groups.google.com/forum/?fromgroups#!topic/android-developers/9KCkhHP2_RY)

[https://groups.google.com/forum/?fromgroups#!topic/phonegap/YCRt2HducKg](https://groups.google.com/forum/?fromgroups#!topic/phonegap/YCRt2HducKg)

但无法通过。谁能解释我如何通过一些基本的教程或代码来实现它。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:29:37.413

创建一个服务器端应用程序以交互并从数据库获取数据

然后运行该服务器端应用程序并使用任何 Web 服务协议通过 android 客户端应用程序连接到该服务器端应用程序。

检查此链接

这里他们使用 hessian web service 协议

[http://edwin.baculsoft.com/2011/06/simple-messaging-example-using-hessian/](http://edwin.baculsoft.com/2011/06/simple-messaging-example-using-hessian/)

# sql-server-2008 - 无法开始分布式事务：链接服务器 -> 访问数据库

> ID：11575530
> 
> 赞同：6
> 
> 时间：2012-07-20T08:21:30.873
> 
> 标签：sql-server-2008, ms-access, odbc, msdtc, linked-server

# 眼镜：

*   数据库服务器 2008
*   服务器 2008 R2 64 位
*   MS Access 数据库

## 什么有效：

*   我通过安装办公室访问数据组件并创建系统 DSN 等配置了与 Access 数据库的链接服务器连接。它驻留在同一服务器上的目录中。
*   我已经成功通过openquery查询数据。

    SELECT * FROM OPENQUERY(LINKEDHELL, 'SELECT * FROM [D:\path\mordor.mdb].Orcs')

*   我可以通过 openquery 插入/更新/删除（从 Sql Management Studio 内部）

## 什么不起作用：

我创建了一个数据库，它公开了一个包装 openquery 表达式的视图。这使我的应用程序可以忽略它通过链接服务器连接进行查询的事实，并允许我使用 ORM。恰当的例子：实体框架。

然而，虽然检索数据有效，但更新/插入/删除不会。我花了很多时间确保 MSDTC 配置正确，但没有骰子。

## 我试过的

**MSDTC**

*   启用网络 DTC 访问
*   允许入站/出站
*   配置的防火墙
*   启用 XA 事务
*   向 DTC 工作的帐户授予对 .mdb 的访问权限
*   进行这些设置后重新启动 Sql Server

**其他**

*   配置的链接服务器安全性：在 sql 用户和本地管理员帐户之间创建映射，以便当我使用该 sql 用户登录时，它使用本地管理员帐户连接到访问数据库。
*   为 RPC 启用分布式事务的提升：False

我得到的错误：

```
OLE DB provider "MSDASQL" for linked server "LINKEDHELL" returned message "[Microsoft][ODBC Microsoft Access Driver]Invalid attribute/option identifier ".
Msg 7391, Level 16, State 2, Line 4
The operation could not be performed because OLE DB provider "MSDASQL" for linked server "LINKEDHELL" was unable to begin a distributed transaction. 
```

我可以通过 Sql Management Studio 简单地重新创建它

```
begin distributed transaction

//anything that queries the linked server

commit transaction 
```

那么我错过了什么？我读过 ODBC 驱动程序支持分布式事务，但我不确定 ACCESS 数据库是否支持。因此，如果有人至少可以确认这一点。那会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:48:13.083

> Access 没有事务，因为 Access 不是数据库引擎。只要我使用过 Jet/ACE（Access 的默认数据库引擎），它就支持提交/回滚（从 Jet 2.x 开始，例如 1996 年）。它从来不支持事务日志，而且可能永远不会（我知道这不是你要问的，但是许多从服务器数据库背景来到 Jet/ACE 的人对术语“事务”的含义相当模糊，并且很难时间掌握 Jet/ACE 支持一个而不是另一个）。– David-W-Fenton 2010 年 1 月 16 日 23:12

--[我们在 MS-Access 中有交易吗？](https://stackoverflow.com/questions/2078432/do-we-have-transactions-in-ms-access)

[大卫·W·芬顿，MVP，RIP](http://answers.microsoft.com/en-us/office/forum/office_2003-access/access-contributor-david-w-fenton-deceased/7e0515c7-58cf-4a66-82f2-55bf410640d5?msgId=c2885bf0-d2fb-4139-b149-24ae504f6f05)

# php - PHP 文件无法输入部分代码

> ID：11575531
> 
> 赞同：0
> 
> 时间：2012-07-20T08:21:33.137
> 
> 标签：php, mysql, mysql-error-1064

这是我的 php 文件中的一个函数，用于服务我的 android 应用程序的请求。

```
function checkin($DB, $TechID, $ClientID, $SiteID){
    $dbConnection = mysql_connect($DB['server'], $DB['loginName'], $DB['password']);
    if(!$dbConnection){
        die('Error! ' . mysql_error());
        }
    mysql_select_db($DB['database'], $dbConnection);

    $file2 = "C:/wamp/www/file2.txt";
    $data2 = "ClientID:".$ClientID." TechID:".$TechID." SiteID:".$SiteID;
    file_put_contents($file2, $data2);

    $result1 = mysql_query("SELECT COUNT(*) FROM Log") or die('Error! ' . mysql_error());
    $query = "SELECT `Type` FROM `Log` WHERE `TechID` = '".$TechID."' ORDER BY LogTime DESC LIMIT 1";
    $file5 = "C:/wamp/www/file5.txt";
    file_put_contents($file5, $query);
    $result2 = mysql_query($query) or die('Error! ' . mysql_error());
    while($row1 = mysql_fetch_array($result1)){
        $count = $row1['COUNT(*)'];
        $file3 = "C:/wamp/www/file3.txt";
        $data3 = "ClientID:".$ClientID." TechID:".$TechID." SiteID:".$SiteID." Count:".$count;
        file_put_contents($file3, $data3);
        while($row2 = mysql_fetch_array($result2)){
            $file4 = "C:/wamp/www/file4.txt";
            $data3 = "ClientID:".$ClientID." TechID:".$TechID." SiteID:".$SiteID." Count:".$count;
            file_put_contents($file4, $data3);
            /*if($row2['Type']!="Checkin"){
                $count = $count+1;
                $Time = date('Y/m/d H:i');
                mysql_query("INSERT INTO Log (LogID, TechID, ClientID, SiteID, LogTime, Type)
                            VALUES (".$count.", ".$TechID.", ".$ClientID.", ".$SiteID.", ".$Time.", Checkin)");
             }else{
                $query2 = "SELECT TechEmail FROM Tech WHERE TechID=".$TechID;
                $result3 = mysql_query($query2) or die('Error! ' . mysql_error());
                $subject = "Please check out";
                $message = "You have forgot to logout from the last site, please check out manually";
                $from = "devadmin@uniserveit.com";
                $header = "Form:".$from;
                while($row3 = mysql_fetch_array($result3)){
                    mail($row3['TechEmail'], $subject, $message, $header);
                }
            }*/
        }
    }
} 
```

你可以看到我隐藏了一些代码，因为我正在调试它，所以我创建了一些文件只是为了查看哪些部分代码无法执行。我发现程序无法进入应该创建 file4 的区域。我已经发现问题可能来自 $query，当它执行时，mysql 有时会响应“未知表状态：TABLE_TYPE”，我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:31:50.123

正如上面评论中所写，您应该分而治之，以使您的生活更轻松（尤其是当您在编写代码的同时在那个大函数中使用它时）。这确实很简单：

```
function file_put($number, $data)
{
    $path = sprintf("C:/temp/wamp/www/file%d.txt", $number);
    file_put_contents($path, $data);
} 
```

例如，这只是替换了许多重复的行，您只需要在其中放入一些字符串的（编号的）文件。

但是你也可以用更复杂的东西来做这件事，比如数据库操作。您可能希望将错误处理移到您的视线之外，并注意在需要时连接到数据库以及更灵活的方式来获取数据。这可以通过将（轻微弃用的）`mysql_*`函数移动到它自己的一两个类中来完成，这样它就不会出现在你的视线之外。这将使它的使用更容易（我首先展示）：

```
// Create your database object to use it later on:
$config = array(
    'server' => 'localhost',
    'name' => 'root',
    'password' => '',
    'db' => 'test',
);
$db = new MySql($config); 
```

我调用了数据库类`MySql`，因为它代表 mysql 连接，并且它适用于旧的 mysql 扩展。您只需将该数据库对象传递给您问题中的函数即可。结合`file_put`函数，它看起来像这样：

```
function checkin(MySql $DB, $TechID, $ClientID, $SiteID)
{
    $query = sprintf("SELECT `Type` FROM `Log` WHERE `TechID` = '%d' ORDER BY LogTime DESC LIMIT 1", $TechID);
    file_put(5, $query);

    $result1 = $DB->query("SELECT COUNT(*) FROM Log");    
    $result2 = $DB->query($query);

    foreach ($result1 as $row1) {
        list($count) = $row1;
        $data = "ClientID:$ClientID TechID:$TechID SiteID:$SiteID Count:$count"
        file_put(3, $data);
        foreach ($result2 as $row2) {
            file_put(4, $data);
        }
    }
} 
```

该`checkin`函数仍然接近于大型（已经有 12 行代码），但比您的第一个版本要短得多，因为它委派了编写文件和访问数据库的工作。我希望这个演示是有用的。以下是完整的代码示例：

```
/**
 * MySql Exception
 */
class MySqlException extends RuntimeException
{
}

/**
 * MySql Database Class
 */
class MySql
{
    private $server;
    private $name;
    private $password;
    private $db;
    private $connection;

    public function __construct(array $config)
    {
        $this->server = $config['server'];
        $this->name = $config['name'];
        $this->password = $config['password'];
        $this->db = $config['db'];
    }

    private function connect($server, $name, $password)
    {
        $this->connection = mysql_connect($server, $name, $password);
        if (!$this->connection) {
            $this->error("Unable to connect to '%s' as user '%s'", $server, $name);
        }
    }

    private function select($db)
    {
        if (!mysql_select_db($db, $this->connection)) {
            $this->error("Unable to select database '%s'", $db);
        }
    }

    private function close()
    {
        $this->connection && mysql_close($this->connection);
    }

    private function connectSelect()
    {
        $this->connect($this->server, $this->name, $this->password);
        $this->select($this->db);
    }

    /**
     * @param $query
     * @return MySqlResult
     */
    public function query($query)
    {
        $this->connection || $this->connectSelect();
        $result = mysql_query($query, $this->connection);
        if (!$result) {
            $this->error("Unable to execute query '%s'", $query);
        }
        return new MySqlResult($result);
    }

    /**
     * @param string $format
     * @param ...
     * @throws MySqlException
     */
    private function error($format)
    {
        $args = func_get_args();
        array_shift($args);
        $format .= ': %s';
        $args[] = $this->connection ? mysql_error($this->connection) : mysql_error();
        throw new MySqlException(vsprintf($format, $args));
    }

    public function __destruct()
    {
        $this->close();
    }
}

/**
 * MySql Result Set - Array Based
 */
class MySqlResult implements Iterator, Countable
{
    private $result;
    private $index = 0;
    private $current;

    public function __construct($result)
    {
        $this->result = $result;
    }

    public function fetch($result_type = MYSQL_BOTH)
    {
        $this->current = mysql_fetch_array($this->result, $result_type);
        return $this->current;
    }

    /**
     * Return the current element
     * @link http://php.net/manual/en/iterator.current.php
     * @return array
     */
    public function current()
    {
        return $this->current;
    }

    public function next()
    {
        $this->current && $this->fetch();
    }

    /**
     * Return the key of the current element
     * @link http://php.net/manual/en/iterator.key.php
     * @return mixed scalar on success, or null on failure.
     */
    public function key()
    {
        return $this->current ? $this->index : null;
    }

    /**
     * Checks if current position is valid
     * @link http://php.net/manual/en/iterator.valid.php
     * @return boolean The return value will be casted to boolean and then evaluated.
     * Returns true on success or false on failure.
     */
    public function valid()
    {
        return (bool)$this->current;
    }

    /**
     * Rewind the Iterator to the first element
     * @link http://php.net/manual/en/iterator.rewind.php
     * @return void Any returned value is ignored.
     */
    public function rewind()
    {
        $this->fetch();
    }

    /**
     * Count of rows.
     *
     * @link http://php.net/manual/en/countable.count.php
     * @return int The count of rows as an integer.
     */
    public function count()
    {
        return mysql_num_rows($this->result);
    }
}

// Create your database object to use it later on:
$config = array(
    'server' => 'localhost',
    'name' => 'root',
    'password' => '',
    'db' => 'test',
);
$db = new MySql($config);

function file_put($number, $data)
{
    $path = sprintf("C:/temp/wamp/www/file%d.txt", $number);
    file_put_contents($path, $data);
}

function checkin(MySql $DB, $TechID, $ClientID, $SiteID)
{
    $query = sprintf("SELECT `Type` FROM `Log` WHERE `TechID` = '%d' ORDER BY LogTime DESC LIMIT 1", $TechID);
    file_put(5, $query);

    $result1 = $DB->query("SELECT COUNT(*) FROM Log");    
    $result2 = $DB->query($query);

    foreach ($result1 as $row1) {
        list($count) = $row1;
        $data = "ClientID:$ClientID TechID:$TechID SiteID:$SiteID Count:$count";
        file_put(3, $data);
        foreach ($result2 as $row2) {
            file_put(4, $data);
        }
    }
}

checkin($db, 1, 2, 3, 4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:54:59.850

简单的答案应该是：

```
mysql_query("INSERT INTO Log (LogID, TechID, ClientID, SiteID, LogTime, Type)
                        VALUES (".$count.", ".$TechID.", ".$ClientID.", ".$SiteID.", ".$Time.", Checkin)"); 
```

从 $vars 中删除引号。或单引号。还要去掉点。像：

```
mysql_query("INSERT INTO Log (LogID, TechID, ClientID, SiteID, LogTime, Type)
                        VALUES ('$count', '$TechID', '$ClientID', '$SiteID', '$Time', Checkin)"); 
```

# string - 如何在 QLabels 中显示国际脚本？

> ID：11575533
> 
> 赞同：2
> 
> 时间：2012-07-20T08:21:39.643
> 
> 标签：string, fonts, internationalization, pyqt4

我想在 QLabel 中显示印度语、阿拉伯语和希伯来语脚本，并指定字体类型。当我尝试将 UTF-8 编码的字符串传递给 QLabel 时，脚本未正确呈现。

在 QLabel 中显示国际（非字母）脚本的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:14:50.237

将 a 的文本设置为`QLabel`unicode 字符串（`unicode`在 python2 中，`str`在 python3 中）应该可以正常工作。

在 python2 中，您可以使用`QString.fromUtf8`将 utf8 编码转换`str`为 unicode`QString`或`.decode('utf-8')`python `unicode`。

在 python3`QString`上的 PyQt4 中已经消失了，因为现在`str`已经是 unicode，所以只需使用它。

例如：

```
 s = "اردو"
    d = s.decode('utf-8')
    label = QtGui.QLabel(d)
    font = QtGui.QFont("Sheherazade", 40)
    label.setFont(font) 
```

# sql - 如何在 Microsoft SQL Server 2008 Management Studio 中仅将数据库中的索引生成到 sql 文件中？

> ID：11575536
> 
> 赞同：3
> 
> 时间：2012-07-20T08:22:03.620
> 
> 标签：sql, sql-server, tsql

我有一个具有索引的数据库和没有索引的该数据库的相同副本。如何仅从原始数据库生成索引并将它们导入副本数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:30:18.350

你可以这样做

任务 -> 生成脚本 -> 选择特定的数据库对象 -> 表。
然后在高级中选择`Indexes`并取消选择其他人。
您还需要 select `Include if NOT EXISTS`，因此在执行脚本时 sql-server 不会创建已经存在的表。

![在此处输入图像描述](../Images/a31901fbeac95f531d1c78ef1e165b7c.png)

# assembly - 在汇编中添加 2 个两位数，结果为 3 位

> ID：11575539
> 
> 赞同：5
> 
> 时间：2012-07-20T08:22:11.437
> 
> 标签：assembly

我设法根据我上次创建的线程中乐于助人的人提供的解决方案添加了两位数：

[如何在汇编中使用 ADC？](https://stackoverflow.com/questions/11562895/how-do-i-use-the-adc-in-assembly)

所以现在，当我添加 2 个数字并且它们的结果将是一个 3 位数字时，似乎存在问题。名为 IS_3DIGIT 的跳转处理了这种可能性，但是添加一些数字，如 80 + 80、99 + 99、89 + 82 都会给出错误的结果。56 + 77 效果很好。所以我的假设是添加两个高于 79 的数字会得到错误的结果。我该如何解决这个问题？顺便说一句，像 99 + 23 或 89 + 43 这样的加法会给出正确的结果。

```
.MODEL SMALL
.STACK 1000
.DATA

MSGA DB 13,10,"Input first number: ","$"
MSGB DB 13,10,"Input second number:","$"
MSGC DB 13,10,"The sum is: ","$"

NUM1 db ?
NUM2 db ?
NUM3 db ?

.CODE

MAIN PROC NEAR

MOV AX, @DATA
MOV DS, AX

; get first number
LEA DX, MSGA
MOV AH, 09h
INT 21h

MOV AH, 01
INT 21H
SUB AL, '0'

MOV BL, AL

MOV AH, 01
INT 21H
SUB AL, '0'

MOV CL, AL

; get second number
LEA DX, MSGB
MOV AH, 09h
INT 21h

MOV AH, 01
INT 21H
SUB AL, '0'

MOV DL, AL

MOV AH, 01
INT 21H
SUB AL, '0'

MOV DH, AL

; add
MOV AL, CL
MOV AH, BL
ADD AL, DH
AAA 
ADD AH, DL

MOV NUM1, AL
ADD NUM1, '0'

; if tens digit is less than or equal to 9
CMP AH, 9
JLE NOT_3DIGIT 

IS_3DIGIT:
MOV AL, AH   ; move value of ah to al
SUB AH, AH   ; clear ah
ADD AL, 0    ; al + 0 = al (tens digit)
AAA          ; move for addition
ADD AH, 0    ; ah + 0 + 1 = ah + 1 (hundreds digit)
MOV NUM2, AL
MOV NUM3, AH
ADD NUM2, '0'
ADD NUM3, '0'
; output sum
LEA DX, MSGC
MOV AH, 09h
INT 21h
MOV DL, NUM3
MOV AH, 02H
INT 21h
MOV DL, NUM2
MOV AH, 02H
INT 21h
JMP PRINT_LASTDIGIT

NOT_3DIGIT:    
MOV NUM2, AH
ADD NUM2, '0'
; output sum
LEA DX, MSGC
MOV AH, 09h
INT 21h
MOV DL, NUM2
MOV AH, 02H
INT 21h

PRINT_LASTDIGIT:
MOV DL, NUM1
MOV AH, 02H
INT 21h

EXIT:
MOV AH, 4Ch
INT 21h

MAIN ENDP
END MAIN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:37:10.273

好吧，你确实做到了“艰难的方式”。同样，`aaa`只要正确的事情在`ah`and中，就可以完成所有艰苦的工作，`al`因此溢出和不溢出的不同情况并不是真正必要的。

像这样的东西（未经测试）：

```
; ah:al = tens:ones
add al,dh
aaa
; now make ah:al hundres:tens
mov bl,al
mov al,ah
xor ah,ah   ; this will be the hundreds digit
add al,dl
aaa
; result in ah:al:bl 
```

我使用了你`dh`的`dl`来源，`bl`只是一些额外的地方。它们并不重要，但里面的东西`ah`确实`al`必须在那里，就像上次一样。

我已经非常仔细地阅读了`aaa`和的描述，我*认为*即使第二次添加可以将 10 添加到某物上，这也应该有效，但我对此只有大约 90% 的把握。`add`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-17T21:26:41.783

我认为它可以以其他方式完成。无需检查是否已变为 3 位数。

```
PRINT MACRO MSG
      LEA DX,MSG
      MOV AH,09H
      INT 21H
ENDM     

READ MACRO N,J1,J2
      J1: MOV AH,01H
          INT 21H
      CMP AL,0DH
      JE J2
      SUB AL,30H
      MOV BL,AL
      MOV AX,N
      MOV DX,0AH
      MUL DX
      XOR BH,BH
      ADD AX,BX
      MOV N,AX
      JMP J1
  J2: NOP
ENDM     

PRINTMUL MACRO N1,L2,L3
            MOV BX,000AH
            MOV AX,N1
            XOR CX,CX 

       L2: XOR DX,DX
           DIV BX
           PUSH DX
           INC CX
           CMP AX,0000H
           JNE L2      

       L3: POP DX
           ADD DL,30H
           MOV AH,02H
           INT 21H
           LOOP L3
ENDM  

.MODEL SMALL
.STACK 100H
.DATA
    N DW 0
    M DW 0  
    MS DB 0DH,0AH,"ENTER 1ST: $"    
    MT DB 0DH,0AH,"ENTER 2ND: $"
    ANS DB 0DH,0AH,"ANSWER IS: $"
.CODE
MAIN PROC 
    MOV AX,@DATA
    MOV DS,AX

    PRINT MS
    READ N,U1,U2

    PRINT MT
    READ M,G1,G2 

    PRINT ANS 
    MOV AX,N       
    ADD AX,M 

    PRINTMUL AX,H1,J5

MAIN ENDP
END MAIN 
```*

# gstreamer - Gstreamer 管道在 Windows 上播放 Mp3 文件

> ID：11575542
> 
> 赞同：-1
> 
> 时间：2012-07-20T08:22:18.987
> 
> 标签：gstreamer

我已经在 Windows 上安装了 Gstreamer OSS，并且可以在我的系统上播放测试音频。可以与我分享一个 Gstreamer 管道以在 Windows 中播放 mp3 文件。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T10:15:42.700

这是播放所有支持的媒体的规范方式：

```
gst-launch playbin2 uri=[the media to play] 
```

# spring - 关于注释和线程安全的 Spring 初学者问题

> ID：11575544
> 
> 赞同：0
> 
> 时间：2012-07-20T08:22:27.520
> 
> 标签：spring, spring-mvc

我不确定我是否可以在一篇文章中提出多个问题，但在这里，

例如，我有以下内容，

**控制器**

```
@Controller
public class FooController{

    @Autowired
    private FooService fooService;

    @RequestMapping(value="/foo", method=RequestMethod.POST)
    public @ResponseBody foo(@RequestBody FooRequest request){
    }

}
@Controller
public class BarController{

    @Autowired
    private FooService fooService;

    @RequestMapping(value="/bar", method=RequestMethod.POST)
    public @ResponseBody bar(@RequestBody FooRequest request){
    }

} 
```

**服务**

```
public class FooService{

    private Foo foo;

    public Foo getFoo() {
        return foo;
    }
    public void setFoo(Foo foo) {
        this.foo = foo;
    }
    public String doFoo(String str){
        return foo.doFoo(str);
    }
} 
```

**上课做作业**

```
public class Foo{

    public String doFoo(String str){
        return (str + " is foo");
    }
} 
```

**使用依赖注入创建 bean**

```
<context:annotation-config/>

<bean id="fooService" class="com.myapp.service.FooService">
    <property name="foo" ref="foo"></property>
</bean> 
<bean id="foo" class="com.myapp.foo.Foo">
</bean> 
```

我的问题是：

1.  我没有`@service`在课堂上使用注释`FooService`，我应该使用它，**为什么**？
2.  这个配置是否是线程安全的，**为什么**（如果它是线程安全的，它是如何实现的）？
3.  我在哪里可以找到有关 Spring 设计中使用的层（dao 层、服务层......）的教程以及这种设计的目的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T08:31:28.853

1.  如果您在 xml-config 中声明您的 bean，则不必像您所做的那样使用注释。
2.  这是。每个 bean，虽然是单例，但都是无状态的。因此不会发生并发修改。
3.  例如在维基百科中。它不是特定于弹簧的。查找有关[三层架构的文章](http://en.wikipedia.org/wiki/Multitier_architecture)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:33:07.430

1.  使用它只会避免使用 XML 声明 bean 的需要。您选择为其他 bean 使用注释。因此，我也会为此使用注释。
2.  是的，是的，因为 Spring 确保在服务任何请求之前，使用同步屏障正确连接和初始化所有内容
3.  这是一个非常广泛的问题。分层对于关注点分离、可测试性、以声明方式划分事务的能力等很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:50:51.647

1.  @Repository、@Service 或 @Controller（@Components 的子注释）用于标记特定的类，因此它们或多或少可以被视为元数据。但是，Spring 框架的一些特性可以利用这些特性。其中之一是自动组件扫描（将在给定的 java 包中搜索具有上述注释的类，这些类可以用作 Spring bean，就好像它们是在 XML 中声明的一样）。要启用此功能，您应该将其放入您的 spring 上下文中：

    `<context:component-scan base-package="my.service.package"/>`

    更多信息可以在这里找到：[http ://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-classpath-scanning](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-classpath-scanning)

    另一个用例是 AOP。您可以创建注释感知切入​​点，您可以通过这些切入点选择所有存储库类。

2.  上下文中的 Spring bean 是一一提出的，因此没有机会启动并发。但是，bean 之间可能存在循环依赖关系，Spring 可能会或可能不会正确解决这个问题。

3.  对于 DAO 和服务的东西，当前的 Spring 3 文档提供了许多示例，并且可能是最好的学习资源：[http](http://static.springsource.org/spring/docs/3.0.x/reference/index.html) ://static.springsource.org/spring/docs/3.0.x/reference/index.html如果你愿意想要全面了解我建议尝试使用 Hibernate 的 JdbcTemplate、Rowmappers 和基于 ORM 的配置。

# iphone - 如何设置 UINavigation 栏的图像，从 3.2 版本开始支持

> ID：11575548
> 
> 赞同：0
> 
> 时间：2012-07-20T08:22:36.383
> 
> 标签：iphone, uinavigationbar

我是 iphone 新手。我有一个小小的疑问，那就是我们如何设置导航栏的背景图像。如果在以后的版本中有一个用于 setbackgroundimage 的 api，但我的应用程序希望从 3.2 版开始支持它，所以这个 api 不是对我有用。所以，我怎样才能将图像放置到导航栏。如果有人知道这一点，请帮助我......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T08:35:31.737

如果要将自定义视图显示为导航栏，可以执行以下步骤：

1) 隐藏导航栏

2）将您的自定义视图放在顶部，或者不要将自定义视图放在 xib 中（如果您有很多 xib），然后创建自定义 VC 并将其用作项目中每个 VC 的超级视图，以便它自动继承。

# javascript - 仅 8 或 17 位正则表达式

> ID：11575550
> 
> 赞同：-2
> 
> 时间：2012-07-20T08:22:39.657
> 
> 标签：javascript, regex, validation

我是一个正常表达的novoice。我需要一个 8 位或 17 位数字验证的正则表达式。

它用于车辆 VIN 验证。系统应接受 8 位或 17 位 vin 以及小字母和驼色字母

有人可以帮忙吗......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T08:24:19.190

只需考虑 8 位数字和可选的 9 位数字

```
/^\d{8}(\d{9})?$/ 
```

意思是：

```
^        start of string
\d       a digit
{n}      repeat n times
(...)?   optional part
$        end of string 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T08:24:47.480

使用这个正则表达式`^((\d{8})|(\d{17}))$`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T08:26:45.397

为此，您可以将两个正则表达式放在一起：

```
/^(\d{8}|\d{17})$/ 
```

当您有多种不同的可能性时，您总是可以做到

```
/(one-regex|another-regex)/ 
```

# firefox - Selenium 节点忽略 Firefox 设置并设置自己的，设置配置文件不起作用

> ID：11575554
> 
> 赞同：1
> 
> 时间：2012-07-20T08:23:17.303
> 
> 标签：firefox, selenium, proxy

我在为 Selenium 使用的 Firefox 设置代理时遇到问题。firefox 安装是默认的（v 14.0.1，%programfiles%/mozilla firefox/）。我使用默认配置文件启动了 firefox 并设置了代理（我不需要代理或手动代理，但有一个例外）。要测试的站点是可访问的。（使用默认代理设置无法访问该站点）

我启动了默认的 selenium 节点

```
java -jar selenium-server-standalone-2.24.1.jar -role node  -hub http://localhost:4444/grid/register 
```

如果我开始 selenium 测试 ff 打开，输入 url 但现在我得到代理错误。如果我中断测试并检查设置：代理恢复默认值。在“about:config”中，我可以看到并非所有设置都是默认设置，似乎 WebDriver 已经设置了一些东西（更新关闭等）。

所以我的下一个方法是设置节点：

```
-firefoxProfileTemplate <my default profile folder> 
```

但没有成功 - 似乎硒完全忽略了。设置不同的配置文件也不起作用。

那么如何让firefox使用我的特殊代理设置呢？（我也试过没有网格，用本地火狐运行测试 - 同样的问题）

[通过这里](http://forums.mozillazine.org/viewtopic.php?f=38&t=775775&start=0&st=0&sk=t&sd=a)的技巧，我可以看到活动配置文件：“anonymous3433195750899294958webdriver-profile”可以让 webdriver 不使用它吗？

更新：似乎唯一可行的方法是在 java 中设置代理：

```
DesiredCapabilities FF = DesiredCapabilities.firefox();
Proxy proxy = new Proxy();
proxy.setProxyType(ProxyType.DIRECT);
FF.setCapability(CapabilityType.PROXY, proxy); 
```

但是从长远来看，这种硬​​编码的解决方案是没有选择的，我需要独立于环境的代码，除此之外我想知道发生了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-21T14:07:18.453

您可以为每个 Selenium 网格 2 节点分配一个特定的 firefox 配置文件，只需设置 **webdriver.firefox.profile**属性：

java -jar selenium-server-standalone-2.37.0.jar -Dwebdriver.firefox.profile=my-profile -role node -hub [http://mydomain.com:4444/grid/register](http://mydomain.com:4444/grid/register)

*   webdriver.firefox.profile 的值必须是 firefox 配置文件名称，而不是位置或文件夹名称

[http://automatictester.wordpress.com/2013/04/07/selenium-running-custom-firefox-profile/](http://automatictester.wordpress.com/2013/04/07/selenium-running-custom-firefox-profile/)

# c# - 带有 MVC3 的 C# 控制台 - 从控制台应用程序调用 MVC 操作方法

> ID：11575556
> 
> 赞同：1
> 
> 时间：2012-07-20T08:23:30.080
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, console

我正在开发一个创建类对象列表集合的 C# 控制台应用程序，现在我想将该对象发送到一个 mvc3 应用程序（另一个项目）操作方法。但是当我将 mvc3 应用程序的引用添加到我的控制台应用程序时，它会显示一些警告和错误，如下所示：

> 警告 1 无法解析引用的程序集“MVC_POP3”，因为它依赖于“System.Web，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”，它不在当前目标框架“.NETFramework,Version”中=v4.0，配置文件=客户端”。请删除对不在目标框架中的程序集的引用或考虑重新定位您的项目。控制台_Gmail_POP3
> 
> 错误 4 找不到类型或命名空间名称“MVC_POP3”（是否缺少 using 指令或程序集引用？） D​​:\Users\Rajendra\TASKs\Console_Gmail_POP3\Console_Gmail_POP3\Program.cs 13 7 Console_Gmail_POP3

那么我有可能从我的控制台应用程序调用 mvc 操作方法吗？

请指导我有关此....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T08:28:58.203

将控制台应用程序的 .NET 框架从客户端配置文件更改为完整的 .NET 4

脚步：

*   右键单击您的控制台项目，选择**属性**
*   **应用**>**目标框架**
*   选择**.NET Framework 4**而不是**.NET Framework 4 Client Profile**

![在此处输入图像描述](../Images/b15f347dd7e3e7b212645a9672b48cc0.png)

# python - 是否可以使用 telnetlib 发送“resize pty”命令？

> ID：11575558
> 
> 赞同：3
> 
> 时间：2012-07-20T08:23:42.950
> 
> 标签：python, telnet, telnetlib

我正在寻找一种在使用`telnetlib`. 我使用 Paramiko 的[resize_pty](http://www.lag.net/paramiko/docs/paramiko.Channel-class.html#resize_pty)在 SSH 上实现了类似的效果，但我也需要支持 telnet 协议。这甚至可能吗（telnet 甚至有控制流）？

请注意，telnetlib 不是必需的 - 如果有更好的库，我会很乐意使用它。

**更新**（更多背景）：我正在构建一个用于连接网络设备的基于 Web 的界面。前端是使用 JS/AJAX 构建的，它基本上只是将击键发送到后端并从中接收屏幕内容。后端是用 Python 编写的，负责打开与设备的 SSH/telnet 会话，向设备发送击键并获取输出流，然后通过 VT100 虚拟终端 ( [pyte](https://github.com/selectel/pyte) ) 传递。然后将虚拟屏幕的内容发送回前端。当用户想要在其浏览器中调整终端屏幕大小时，就会出现问题。使用 SSH 我只是发送`resize_pty()`通过 Paramiko，然后还调整 pyte 的虚拟终端屏幕大小。但是使用 telnet 我无法找到适当的调整大小功能来告诉设备它应该调整其终端的大小。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:19:58.277

好的，我已经能够组装以下杰作：

```
naws_command = struct.pack('!BBBHHBB',
        255, 250, 31, # IAC SB NAWS
        width, height,
        255, 240) # IAC SE
t.get_socket().send(naws_command) 
```

现在解释几句。

首先，`telnetlib`不支持直接发送命令；它只是逃脱了他们。因此，要发送命令，我们必须直接使用底层套接字。我们使用对象实例的`get_socket()`方法（这里）来做到这一点。`Telnet``t`

此处组装的`NAWS`命令由[RFC 1073](http://www.ietf.org/rfc/rfc1073.txt)定义。`width`和变量是常规的`height`Python 整数，它们被打包成两个 16 位无符号整数。

请注意，这不是一个完美的解决方案，我不确定它是否真的适合您。最重要的是，在能力协商期间，`telnetlib`它会通知服务器它`WON'T NAWS`，因此特定的服务器实际上可能会忽略这些命令。

如果是这种情况，您可能必须使用[set_option_negotiation_callback()](http://docs.python.org/library/telnetlib.html#telnetlib.Telnet.set_option_negotiation_callback)。可悲的是，这意味着您将不得不处理通常`telnetlib`对您有用的所有选项。而且AFAIK对此没有任何便利。

# com - 在 MapPoint 状态栏上书写

> ID：11575559
> 
> 赞同：0
> 
> 时间：2012-07-20T08:23:43.980
> 
> 标签：com, add-in, statusbar, mappoint

我正在使用 Visual Studio 2010 创建一个 MapPoint 加载项。我希望它在 MapPoint 状态栏上写一些日志消息，让用户知道它在做什么。是否可以？在[参考](http://msdn.microsoft.com/en-us/library/gg674771.aspx)状态栏中甚至没有提到它。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:18:41.817

文档非常完整。它没有被覆盖的原因是状态栏没有被 API 暴露。

唯一的方法是尝试捕获 Windows 消息，并直接操作状态栏控件。从安全的角度来看，这绝对是不受欢迎的，并且被 Vista 和 Win7 “禁止”。它也没有记录，很容易被新版本的 MapPoint 破坏。

工具栏可访问性是类似的，并且是经常要求的功能。您可以打开/关闭工具栏，但不能添加自己的按钮。

# c - C：字符串和指针。以特定模式更改字符串中的子字符串

> ID：11575562
> 
> 赞同：1
> 
> 时间：2012-07-20T08:23:48.613
> 
> 标签：c, string, parsing

我很难理解我应该如何执行以下操作：

我有一个这样定义的单词列表：

```
typedef struct _StringNode {
  char *str;
  struct _StringNode* next;
} StringNode; 
```

现在我需要编写一个函数来接收一个字符串和两个相同长度的单词列表，并且我需要用第二个列表中的相应单词替换字符串中第一个列表中出现的每个单词。

例子：

```
 text: "stack overflow siteoverflow oveflow stack"
    patterns: [ "stack", "overflow", "site" ]
replacements: [ "Hello", "guys", "here" ]
      result: "Hello guys hereguys guys Hello" 
```

对于每个单词：我正在尝试使用`strstr()`，因此我将获得一个指向字符串副本中出现的单词的指针，然后更改单词，并提升文本字符串副本的指针。

```
char* replace(const char *text,
              const StringNode *patterns,
              const StringNode *replacements); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:16:55.637

你可以用这个

```
char *strnreplace(char *st,const int length, 
                  const char *orig,const char *repl) {

  static char buffer[length];
  char *ch;

  if (!(ch = strstr(st, orig)))
      return st;

  strncpy(buffer, st, ch-st);
  buffer[ch-st] = 0;
  sprintf(buffer+(ch-st), "%s%s", repl, ch+strlen(orig));
  return buffer;
}

void replace(const char *text,
              const StringNode *patterns,
              const StringNode *replacements)
{
  StringNode *pat, *rep;
  char *temp = text;
  int length = strlen(text);
  for( pat = patterns, rep = replacements;
        pat->next != NULL;
        pat = pat->next, rep = rep->next ) {
        temp = strnreplace(temp, length, pat->str, rep->str);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:23:25.703

也许是这样的：

```
char* replace(const char *text,
              const StringNode *patterns,
              const StringNode *replacements)
{
  char *out = malloc(1024), *put = out;

  while(*text != '\0)
  {
    const StringNode *piter, *riter;
    int found = 0;

    /* Check if current start of text matches any pattern. */
    for(piter = patterns, riter = replacements;
        piter != NULL;
        piter = piter->next, riter = riter->next)
    {
      const size_t plen = strlen(piter->str);
      if(strncmp(text, piter->str, plen) == 0)
      {
        /* Hit found, emit replacement. */
        const size_t rlen = strlen(riter->str);
        memcpy(out, riter->str, rlen);
        out += rlen;
        text += plen;
        found = 1;
        break;
      }
    }
    if(!found)
      *put++ = *text++;
  }
  *put = '\0';

  return out;
} 
```

请注意，上面不*处理*缓冲区溢出，为简洁起见省略。我建议在动态字符串数据类型之上实现类似的东西，以使核心操作（附加）根据需要自动增长目标字符串。

**更新**作为对评论的回应，上面试图实现的算法是：

```
set output to empty string
while text remaining
  if start of text matches pattern[i]
    append replacement[i] to output
    remove len(pattern[i]) characters from start of text
  else
    append first character of text to output
    remove first character of text 
```

因此，它会*反复*检查模式匹配，只要`text`.

# android - 使用我的数据库的异步调用

> ID：11575573
> 
> 赞同：1
> 
> 时间：2012-07-20T08:24:37.537
> 
> 标签：android, sqlite, asynchronous, adapter

我正在尝试为我的 android 应用程序创建一个列表视图，最后有一个页脚按钮。我正在尝试从我的数据库中读取元素，每次按下页脚按钮时使用 limit sql 命令将它们放入列表中，然后我想从我的数据库中加载下一个元素等。

代码工作正常，直到我按下异步调用的按钮，然后我得到一个异常。

这是我的课：

```
public class UIHistoryListActivity extends ListActivity {

    ProgressDialog pDialog;
    EfficientAdapter adap;
    Databasehandler db = new Databasehandler(this);
    List<Message> messages;
    ArrayList<Message> menuItems = new ArrayList<Message>();
    int current_page = 0;
    int index = 0;
    int limit = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);

        android.text.format.DateFormat.format("yyyy-MM-dd hh:mm:ss",
                new java.util.Date());

        db.addMessage(new Message("6983583727", "Hi Lakis", 1,
                (String) android.text.format.DateFormat.format(
                        "yyyy-MM-dd hh:mm:ss", new java.util.Date())));

        db.addMessage(new Message("1234567789", "Hi Takis", 1,
                (String) android.text.format.DateFormat.format(
                        "yyyy-MM-dd hh:mm:ss", new java.util.Date())));

        db.addMessage(new Message("1234344789", "Hi Makis", 1,
                (String) android.text.format.DateFormat.format(
                        "yyyy-MM-dd hh:mm:ss", new java.util.Date())));

        db.addMessage(new Message("1234553229", "Hi Sakis", 0,
                (String) android.text.format.DateFormat.format(
                        "yyyy-MM-dd hh:mm:ss", new java.util.Date())));

        db.addMessage(new Message("1234567781", "Hi Akis", 1,
                (String) android.text.format.DateFormat.format(
                        "yyyy-MM-dd hh:mm:ss", new java.util.Date())));
        db.addMessage(new Message("6983583727", "Hi Qakis", 1,
                (String) android.text.format.DateFormat.format(
                        "yyyy-MM-dd hh:mm:ss", new java.util.Date())));

        db.addMessage(new Message("1234567789", "Hi Wakis", 1,
                (String) android.text.format.DateFormat.format(
                        "yyyy-MM-dd hh:mm:ss", new java.util.Date())));

        db.addMessage(new Message("1234344789", "Hi Eakis", 1,
                (String) android.text.format.DateFormat.format(
                        "yyyy-MM-dd hh:mm:ss", new java.util.Date())));

        db.addMessage(new Message("1234553229", "Hi Yakis", 0,
                (String) android.text.format.DateFormat.format(
                        "yyyy-MM-dd hh:mm:ss", new java.util.Date())));

        db.addMessage(new Message("1234567781", "Hi Ukis", 1,
                (String) android.text.format.DateFormat.format(
                        "yyyy-MM-dd hh:mm:ss", new java.util.Date())));

                //putting the first 5 messages of my db on the list
        messages = db.getMessages(0, 5);
        index += 5;
        limit = limit + 5;
        for (Message mg : messages) {
            menuItems.add(new Message(mg.getID(), mg.getPhoneNumber(), mg
                    .getBody(), mg.getStatus(), mg.getDate()));

        }
        /*
         * menuItems.add(new Message(1, "1234553229", "Hi Sakis", 0, "lala"));
         * menuItems.add(new Message(1, "1234553229", "Hi Lakis", 0, "lala"));
         * menuItems.add(new Message(1, "1234553229", "Hi Takis", 0, "lala"));
         * menuItems.add(new Message(1, "1234553229", "Hi Aakis", 0, "lala"));
         * menuItems.add(new Message(1, "1234553229", "Hi Qakis", 1, "lala"));
         * menuItems.add(new Message(1, "1234553229", "Hi Wakis", 1, "lala"));
         * menuItems.add(new Message(1, "1234553229", "Hi Eakis", 0, "lala"));
         * menuItems.add(new Message(1, "1234553229", "Hi Rakis", 0, "lala"));
         * menuItems.add(new Message(1, "1234553229", "Hi Yakis", 1, "lala"));
         * menuItems.add(new Message(1, "1234553229", "Hi Uakis", 0, "lala"));
         * menuItems.add(new Message(1, "1234553229", "Hi Oakis", 0, "lala"));
         */
        adap = new EfficientAdapter(this, menuItems);

        ListView lv = getListView();

        // Creating a button - Load More
        Button btnLoadMore = new Button(this);
        btnLoadMore.setText("Load More");

        btnLoadMore.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // Starting a new async task
                // CharSequence text = "Ok dude you pressed me ";

                // Toast toast = Toast.makeText(getApplicationContext(), text,
                // Toast.LENGTH_SHORT);
                // toast.show();
                new loadMoreListView().execute();
            }
        });
        // Adding button to listview at footer
        lv.addFooterView(btnLoadMore);

        setListAdapter(adap);
        // adap = new ListViewAdapter(this, messages);
        lv.setAdapter(adap);

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        Toast.makeText(this, "Click-" + String.valueOf(position),
                Toast.LENGTH_SHORT).show();
    }

    /**
     * Async Task that send a request to url Gets new list view data Appends to
     * list view
     * */
    private class loadMoreListView extends AsyncTask<List<Message>, Void, Void> {

        @Override
        protected void onPreExecute() {
            // Showing progress dialog before sending http request
            pDialog = new ProgressDialog(UIHistoryListActivity.this);
            pDialog.setMessage("Please wait..");
            pDialog.setIndeterminate(true);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        protected Void doInBackground(List<Message>... params) {
            // TODO Auto-generated method stub
            // UIHistoryListActivity.this
            // ListView lv = getListView();
            // for (Message mg : messages) {
            // menuItems.add(new Message(mg.getID(), mg.getPhoneNumber(), mg
            // .getBody(), mg.getStatus(), mg.getDate()));
            //
            // }

            // setListAdapter(adap);
            // adap = new ListViewAdapter(this, messages);
            // lv.setAdapter(adap);
            current_page = current_page + 1;

                        //putting the next 5 messages of my db on the list
            messages = db.getMessages(index, limit);
                        index += limit;
            limit = index + 5;

            ListView lv = getListView();
            for (Message mg : messages) {
                menuItems.add(new Message(mg.getID(), mg.getPhoneNumber(), mg
                        .getBody(), mg.getStatus(), mg.getDate()));
            }
            //setListAdapter(adap); edw petouse exception
            // adap = new ListViewAdapter(this, messages);
            adap = new EfficientAdapter(UIHistoryListActivity.this, menuItems);
            lv.setAdapter(adap);

            // Setting new scroll position
            int currentPosition = lv.getFirstVisiblePosition();
            lv.setSelectionFromTop(currentPosition + 1, 0);
            return null;
        }

        protected void onPostExecute(Void unused) {
            // closing progress dialog
            pDialog.dismiss();
        }

    }

    public static class EfficientAdapter extends ArrayAdapter<Message>
            implements Filterable {
        private LayoutInflater mInflater;
        // private Bitmap mIcon1;
        private final Context context;
        private final ArrayList<Message> values;

        public EfficientAdapter(Context context, ArrayList<Message> values) {
            // Cache the LayoutInflate to avoid asking for a new one each time.
            super(context, R.layout.mycontent, values);
            mInflater = LayoutInflater.from(context);
            this.context = context;
            this.values = values;
        }

        /**
         * Make a view to hold each row.
         * 
         * @see android.widget.ListAdapter#getView1(int, android.view.View,
         *      android.view.ViewGroup)
         */
        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // A ViewHolder keeps references to children views to avoid
            // unneccessary calls
            // to findViewById() on each row.
            ViewHolder holder;
            // When convertView is not null, we can reuse it directly, there is
            // no need
            // to reinflate it. We only inflate a new View when the convertView
            // supplied
            // by ListView is null.

            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.mycontent, null);

                holder = new ViewHolder();
                holder.body = (TextView) convertView.findViewById(R.id.body);
                holder.date = (TextView) convertView.findViewById(R.id.date);
                holder.from = (TextView) convertView.findViewById(R.id.from);
                holder.status = (TextView) convertView
                        .findViewById(R.id.status);

                convertView.setTag(holder);
            }

            else {
                // Get the ViewHolder back to get fast access to the TextView
                // and the ImageView.
                holder = (ViewHolder) convertView.getTag();
            }
            convertView.setOnClickListener(new OnClickListener() {
                private int pos = position;

                // private String toId =
                // Integer.toString(values.get(position).getId());
                @Override
                public void onClick(View v) {
                    Toast.makeText(context, "Click-" + pos, Toast.LENGTH_SHORT)
                            .show();
                }
            });
            // holder.textLine.setText(TitleString[position] +
            // String.valueOf(position));

            holder.body.setText(getItem(position).getBody());
            holder.date.setText(getItem(position).getDate());
            holder.from.setText(getItem(position).getPhoneNumber());
            holder.status
                    .setText(String.valueOf(getItem(position).getStatus()));
            return convertView;

        }

        static class ViewHolder {
            TextView from;
            TextView date;
            TextView body;
            TextView status;
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return values.size();
        }

        @Override
        public Message getItem(int position) {
            // TODO Auto-generated method stub
            return values.get(position);
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public Filter getFilter() {
            // TODO Auto-generated method stub
            return null;
        }

    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        db.close();
    }

} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:07:38.787

问题解决了，我每次调用异步时都应该创建一个新的可运行对象

```
private class loadMoreListView extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        pDialog = new ProgressDialog(UIHistoryListActivity.this);
        pDialog.setMessage("Please wait..");
        pDialog.setIndeterminate(true);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected Void doInBackground(Void... unused) {
        // TODO Auto-generated method stub
        runOnUiThread(new Runnable() {
            public void run() {
                List<Message> messages;

                current_page = current_page + 1;
                messages = db.getMessages(index, limit);
                index += limit;
                limit = index + 5;
                ListView lv = getListView();
                for (Message mg : messages) {
                    menuItems.add(new Message(mg.getID(), mg
                            .getPhoneNumber(), mg.getBody(),
                            mg.getStatus(), mg.getDate()));
                }
                // Setting new scroll position
                int currentPosition = lv.getFirstVisiblePosition();

                adap = new EfficientAdapter(UIHistoryListActivity.this,
                        menuItems);
                lv.setAdapter(adap);

                lv.setSelectionFromTop(currentPosition + 1, 0);
            }
        });
        return null;
    }

    protected void onPostExecute(Void unused) {
        // closing progress dialog
        pDialog.dismiss();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:13:23.380

您不能在 doInBackground 中使用 ListView，因为它是不同的线程（不是 UI 线程）。你想在 UI 线程中做的所有事情（例如将适配器设置为 listview）都必须在 onPostExecute 中完成。请[在此处](http://developer.android.com/reference/android/os/AsyncTask.html)阅读有关 AsyncTasks 的信息。

# c# - 在视图内显示来自控制器的 json 数据

> ID：11575575
> 
> 赞同：1
> 
> 时间：2012-07-20T08:24:45.523
> 
> 标签：c#, javascript, ajax, json, asp.net-mvc-3

在我的控制器内部有一个 JsonResult 动作，它返回给我一个 House 对象的列表。我想使用 ajax onclick 来检索这些数据并在我的视图中显示 json 数据。在萤火虫内部，我可以看到正确的响应和 Json 结果，但我不知道如何在我的视图中显示。

```
function GetTabData(xdata) {
    $.ajax({
        url: ('/Home/GetTabData'),
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ id: xdata }),

        success: function (result) {
           // tried with these but it doesnt work
           // result = jQuery.parseJSON(result);
           // alert(result.Title);
        },
        error: function () { alert("error"); }
    });
}

public JsonResult GetTabData()
{
   ...
   var temp = getMyData...
   return Json(temp, JsonRequestBehavior.AllowGet);   
}

  // View page
     <div id="showContent">
       // Json data should appear here
     </div> 
```

当success：function（result）为空时，在firebug JSON选项卡中我有以下数据：

```
Id  149

PropertyType    "Apartment"

StreetNumber    "202B"

CityName        "Sidney"

Title           "My test data" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:43:53.173

```
success: function (json) {
  var data = null;

  $.each(json.items,function(item,i){
    data = '<div>'+item.Id+ ' ' + item.CityName +'</div>';    
    $("#showContent").append(data);
 });

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:36:07.143

首先，您可以在对“json”的 ajax 调用中指定 dataType 属性，然后不必再次解码 json 响应 -

```
dataType: 'json' 
```

然后，您不需要使用 parseJSON。只需使用 result.Title 等。

```
 success: function (result) {
           alert(result.Title);
           var showContent = $('#showContent');
           showContent.html(result.Id+','+result.Title);
        }, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T08:36:36.967

编辑：正如 Mukesh 所说，您可以让 ajax 函数返回 json 而无需使用任何额外的解码。

ajax 调用结果已经是一个对象。*你可以在*成功函数中用它做任何你想做的事情。

例如，您可以在函数内动态创建信息表，或通过调用该成功函数内的函数将数据发送到另一个函数。离开成功功能后，数据将不再可用。

像访问任何对象 (data.someProperty) 一样访问数据对象。

# blackberry-webworks - WebWorks 中的统一搜索

> ID：11575577
> 
> 赞同：0
> 
> 时间：2012-07-20T08:24:52.260
> 
> 标签：blackberry-webworks

我们正试图让统一搜索工作，但我找不到任何适用于 WebWorks API 的东西，而且似乎只适用于 Java 开发环境。有我们可以使用的 WebWorks Java 扩展吗？如果不是，我们如何在 WebWorks 应用程序中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:30:23.517

BlackBerry WebWorks 站点包含调用搜索应用程序的 SearchArguments API：[https ://developer.blackberry.com/html5/apis/blackberry.invoke.searcharguments.html](https://developer.blackberry.com/html5/apis/blackberry.invoke.searcharguments.html)

# java - 我需要在我的服务器上做什么才能与 Android 应用程序通信？

> ID：11575584
> 
> 赞同：0
> 
> 时间：2012-07-20T08:25:22.097
> 
> 标签：java, php, android, client-server

我目前正在编写 Android 应用程序，我需要用服务器做一些事情。实际上我只是不知道从哪里开始，因为我对服务器端不太了解。

我的 Android 应用程序会将 Java 对象和图像发送到我的服务器，那么我需要在我的服务器上编写或使用什么？是否可以编写 Java 代码而不是`PHP`在服务器端？

你能给我准备服务器的步骤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:36:56.380

> 是否可以在服务器端编写 Java 代码而不是 PHP？

您可以使用任何您喜欢的编程语言进行服务器端编程。[这个问题](https://stackoverflow.com/questions/2095397/what-is-the-difference-between-jsf-servlet-and-jsp)提供了有关使用 HTTP 协议的各种基于 Java 的方法的一些有用信息。

> 将发送 Java 对象

您需要将它们序列化为数据格式。JSON 和 XML 在通过 HTTP 传输结构化数据时很受欢迎。

> 和图像到我的服务器

HTTP 允许传输文件，[Java 可以构造请求](https://stackoverflow.com/questions/314300/how-to-simply-generate-post-http-request-from-java-to-do-the-file-upload)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:47:57.900

我看到您只想在服务器和客户端（Android）之间进行通信。我建议为您的服务器考虑 REST 样式的 Web 服务，您可以在其中使用 JSON（推荐）或 XML 格式。

[如何在 Web 应用程序中实现 REST？](https://stackoverflow.com/questions/701260/how-to-implement-rest-in-a-web-aplication)

# javascript - 将动态值传递给值上传中的附加参数

> ID：11575587
> 
> 赞同：4
> 
> 时间：2012-07-20T08:25:30.487
> 
> 标签：javascript, asp.net-mvc-3, file-upload

我正在使用带有 asp.net mvc 3 的值上传文件插件。我有两个下拉框和一个 ajax 值上传文件按钮。我在视图中有以下代码：

```
<link href="@Url.Content("~/Content/css/fileuploader.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Content/js/fileuploader.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.7.2.js")" type="text/javascript"></script>

@using (Html.BeginForm("Upload", "AjaxUpload", FormMethod.Post, new { name = "form1" }))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Upload Wav File</legend>
         <div class="editor-label">
           @Html.Label("Select Language")
        </div>
        <div>

          @Html.DropDownList("Language1", (SelectList)ViewBag.lang)
      </div>
         <div class="editor-label">
           @Html.Label("Select Category")
        </div>

      <div>
          @Html.DropDownList("ParentCategoryID", ViewBag.ParentCategoryID as SelectList) 
      </div>

      <div id="file-uploader">
    <noscript>
        <p>
            Please enable JavaScript to use file uploader.</p>
    </noscript>
</div>
    </fieldset>
}

<script type="text/javascript">

    var uploader = new qq.FileUploader
    ({
        element: document.getElementById('file-uploader'),
        params: {
            param1: document.getElementById("Language1").value,
            param2: document.getElementById("ParentCategoryID").value
        },
        action: '@Url.Action("upload")', // put here a path to your page to handle uploading
        allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'], // user this if you want to upload only pictures
        sizeLimit: 4000000, // max size, about 4MB
        minSizeLimit: 0, // min size
        debug: true
    });
</script> 
```

**问题：** 当我使用 document.getElementByID 传递值上传函数的参数属性中的值时，即使我选择其他选项，它也总是取选择列表的第一个选项的值。我确信在第一次加载页面时它是有价值的，即 document.getElementById。如何在上面的代码中获取当前选定的值并传递给 params 属性：

我有如下控制器操作：

```
[HttpPost]
        public ActionResult Upload(HttpPostedFileBase qqfile, string param1, string param2)
        {
           ..............
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T08:52:33.517

您可以在提交附加值时使用 setParams 方法。

```
var uploader = new qq.FileUploader({
    onSubmit: function() {
        uploader.setParams({
            anotherParam: 'value' 
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-05T18:04:10.230

它适用于我的 2.0 beta 版本，如下所示：

```
var uploader = new qq.FileUploader({
    ......
    onSubmit: function() {
        this.params.xyzfield='dummyval';
        ......
    }
}); 
```

# c# - 将值传递给一张表并在父表中更新

> ID：11575590
> 
> 赞同：0
> 
> 时间：2012-07-20T08:25:36.507
> 
> 标签：c#, sql-server-2008, stored-procedures

我有两张桌子。dbo.Emp EmpID(PK) | 姓名 | 类型ID(FK)

dbo.EmpType TypeID(PK) | 类型

TypeID：仅在 dbo.EmpType 中自动增量

当我在 Emptype 中更新 TypeID 的值时，它需要存储在 dbo.Emp 的 TypeID 中，我使用的 SP 不起作用。

```
Create Procedure bridge_Type(
@EmpID INT,
@Name   varchar(50),
@Mob2   numeric(10,0),
@Email  varchar(50),
@Type   varchar(50)
)
AS 
DECLARE @TYPEID int
Set NOCOUNT OFF

BEGIN TRANSACTION
Insert into dbo.Emp VALUES (@EmpID, @Name, @Mob2, @Email, @TYPEID)
IF @@ERROR <> 0
BEGIN 
ROLLBACK
RETURN
END

INSERT INTO dbo.EmpType VALUES (@Type)
IF @@ERROR <> 0 
BEGIN     
ROLLBACK     
RETURN 
END  

declare @id int
SET @id= @TYPEID;
Update Dbo.Emp 
Set @TYPEID= (Select TypeID from dbo.EmpType
          WHERE  TypeID=@typeID)
COMMIT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:38:39.080

Try This SP，这将首先插入 EmpType，并从中`SCOPE_IDENTITY()`获取 Inserted Identity Value，然后插入 emp。

```
Create Procedure bridge_Type(
@EmpID INT,
@Name   varchar(50),
@Mob2   numeric(10,0),
@Email  varchar(50),
@Type   varchar(50)
)
AS 
DECLARE @TYPEID int
Set NOCOUNT OFF

BEGIN TRANSACTION

INSERT INTO dbo.EmpType VALUES (@Type)

SET @TYPEID = SCOPE_IDENTITY()

IF @@ERROR <> 0 
BEGIN     
ROLLBACK     
RETURN 
END 

Insert into dbo.Emp VALUES (@EmpID, @Name, @Mob2, @Email, @TYPEID)
IF @@ERROR <> 0
BEGIN 
ROLLBACK
RETURN
END

COMMIT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:46:35.553

不是 100% 确定为什么要更新 EmpType 表中的 typeID（特别是因为它是自动增量键），但是，您可以查看将 FK 约束更新为“更新时级联”：

[何时使用“ON UPDATE CASCADE”](https://stackoverflow.com/questions/1481476/when-to-use-on-update-cascade)

[http://msdn.microsoft.com/en-us/library/aa933119(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa933119(v=sql.80).aspx)

# android - 将数据从 Android 发送到 PHP 服务器

> ID：11575591
> 
> 赞同：3
> 
> 时间：2012-07-20T08:25:46.490
> 
> 标签：android, android-location

我在 android 中有一个应用程序，我想通过 url ( `like=..mydata.php?lat=76867&long=87979`) 将 android 手机的纬度和经度发送到 web PHP 服务器。如果点击此 url，我将拥有将数据保存在数据库中的 php 代码。

我没有得到的是如何通过我的android手机将纬度和经度发送到PHP服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:56:25.143

在@DarkXphenomenon 答案的基础上，确保您拥有正确的权限。

```
// to retrieve location
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
// to retrieve location
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
// to send data
<uses-permission android:name="android.permission.INTERNET"/> 
```

然后在您的 java 类中，您可以使用此代码将数据发送到 php 文件。确保捕获任何异常。

```
String and = "&";

                    HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://my site.com/gpsdata.php?imei="+imei+and+"lat="+lat+and+"lng="+lng+and+"alt="+alt+and+"spd="+speed);

        try {

             httpclient.execute(httppost);
            Log.d(TAG, "Data sent!");
        } catch (ClientProtocolException e) {
            Toast.makeText(this,
                    "Client protokol exception ", Toast.LENGTH_LONG).show();
        } catch (IOException e) {
            Toast.makeText(this,
                    "IO exception " + e.getMessage(), Toast.LENGTH_LONG)
                    .show();
        } 
```

您还需要确保您的位置变量（例如纬度或经度）是字符串，否则您会收到一些意外错误。通常位置变量将是一个双精度或浮点数。要将双精度数转换为字符串，请执行

```
String Longitude = Double.toString(doubleToConvertToString); 
```

同样是浮点数到字符串

```
String Longitude = Float.toString(doubleToConvertToString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:40:05.320

清单需要包含

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET" />` 
```

**更新：** UI 线程中不再允许网络连接。然后你需要发出一个 HTTP get 包裹在一个[`AsyncTask<>`](http://developer.android.com/reference/android/os/AsyncTask.html)将由你的 PHP 后端解析和解释的。一个示例位于[http://developer.android.com/training/basics/network-ops/connecting.html](http://developer.android.com/training/basics/network-ops/connecting.html)

# objective-c - 带有图像和文本的 NSMenuItem

> ID：11575593
> 
> 赞同：3
> 
> 时间：2012-07-20T08:25:55.413
> 
> 标签：objective-c, cocoa, user-interface, drop-down-menu

我有一个关于 NSMenuItems 的问题。

我想要做的是使用本机 OS X 组件复制 java GUI，因此我使用的语言是 Cocoa。我想做的是让每个菜单项都有一个图像，然后在它旁边有一些文本。

我已经对它进行了一些研究，我的第一个停靠点（似乎总是大声笑）是苹果文档，它有这个方便的例子，它说明了如何在菜单项中嵌入视图：

[https://developer.apple.com/library/mac/#samplecode/MenuItemView/Listings/MyWindowController_m.html#//apple_ref/doc/uid/DTS10004136-MyWindowController_m-DontLinkElementID_8](https://developer.apple.com/library/mac/#samplecode/MenuItemView/Listings/MyWindowController_m.html#//apple_ref/doc/uid/DTS10004136-MyWindowController_m-DontLinkElementID_8)

作为可可的新手，我想我必须重写 NSMenuItem 中的一种绘图方法。不过不太确定。我正在玩弄的另一个想法是创建一个包含图像和一些文本的自定义视图。

任何其他想法/验证或讨论将不胜感激。

谢谢大家！

哦，GUI创建是手工完成的，没有界面构建器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T14:16:54.443

好的，所以我现在有了旁边带有图标的菜单项。对于任何对此感兴趣的人来说（我还没有对其进行泄漏分析或其他任何事情）。

首先，将您想要的所有图像放入“Resources”文件夹中（这就是它在 xcode 3.1.4 中的名称）。

现在，例如，在我们拥有所有图像之后，我们想要使用名为“eraser.png”和“eraser_on.png”的图像，并且我想将它们附加到第三个菜单项。为了实现这一点，我们执行以下操作：

下面的代码将获取菜单中位置 3 的菜单项

```
NSMenuItem *item = [ nameOfPopUpButton itemAtIndex:2]; 
```

下面的代码将菜单项的图像设置为“eraser.png”

```
[ item setImage: [ NSImage imageNamed:@"eraser"] ]; 
```

那就是您为菜单项设置图像（它将位于文本的左侧，也就是文本之前）。

如果您想要不同状态的不同图像，例如当用户按下它时，请使用此方法（我自己没有测试过，但它听起来很合理：D 并且功能直接来自 api）

```
[item setOnStateImage: [ NSImage imageNamed:@"eraser_on" ] ] 
```

但是，您可以将其保留为 nil 或根本不设置它，它将变为默认颜色

希望这可以帮助某人。

从以下内容拼凑而成： [https ://developer.apple.com/library/mac/#samplecode/MenuMadness/Listings/Controller_m.html#//apple_ref/doc/uid/DTS40008870-Controller_m-DontLinkElementID_4](https://developer.apple.com/library/mac/#samplecode/MenuMadness/Listings/Controller_m.html#//apple_ref/doc/uid/DTS40008870-Controller_m-DontLinkElementID_4)

谢谢 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T09:39:07.847

如果你需要这样做，你有正确的想法来创建一个带有图像和标签子视图的视图。

但是：不要这样做。创建“本机”应用程序主要不是关于您选择的语言（这是 Objective-C，顺便说一句，不是 Cocoa；后者是在 Objective-C 中实现的开发框架的集合）。这是关于符合平台的。

在 OS X（和 iOS）上，可能比任何其他平台都更重要的是 UI 设计的一致性。用户*知道什么*时候应用程序看起来很奇怪，并且在每个菜单项旁边有图标（我在 Java 应用程序中肯定见过）在 OS X 上**绝对**是奇怪和不自然的。用户最多会被激怒，最糟糕的是会感到困惑。

所以我的建议是要么遵循人机界面指南（并为自己节省大量工作作为一个很好的副作用），要么坚持使用现有的 Java 应用程序。

如果您想提供对常用功能的快速标志性访问，在 OS X 上推荐的方法是使用工具栏。

# android - 如果我选择了微调器项目，然后使用自定义列表视图（多列）显示指定的列表项，如何获取？

> ID：11575596
> 
> 赞同：3
> 
> 时间：2012-07-20T08:26:00.143
> 
> 标签：android

如何显示列表视图值。我有一个下拉微调器。如果我选​​择微调器项，指定的列表项值将显示在自定义列表视图中。

//SampActivity.java

```
 class GlobalClass extends Application {
 public static List<String> myval=new ArrayList<String>();

  }
      public  class SampActivity extends Activity {
                 String[] Category={"----SELECT---- ",        "BEVERAGES","BREAKFAST","LUNCH","DINNER","DESSERTS","APPETIZERS & SIDES"};

  Spinner spinner;
   ListView l1;

   String[] item;
   int myid;
 /** Called when the activity is first created. **/
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    spinner = (Spinner) findViewById(R.id.spinnerCategory);
    l1.setAdapter(new EfficientAdapter(this));
    l1=(ListView) findViewById (R.id.list);
    b1=(Button)findViewById(R.id.button3);
    b2=(Button)findViewById(R.id.button2);
    b3=(Button)findViewById(R.id.button1);
    e1=(EditText)findViewById(R.id.editText1);
    e2=(EditText)findViewById(R.id.editText2);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, Category);
   adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

    spinner.setOnItemSelectedListener(new OnItemSelectedListener(){

    public void onItemSelected(AdapterView<?> parent, View arg1, int pos,long id) {              

  String Text = parent.getSelectedItem().toString();
    if(Text.equals("----SELECT----")) {

    }       
    else if(Text.equals("BEVERAGES")){

       l1.setAdapter(bever);

       return;
   }    
   else if(Text.equals("BREAKFAST")){

       l1.setAdapter(Breakf);
       return;
   }
   else if(Text.equals("LUNCH")){

       l1.setAdapter(lunc);
       return;
   }
   else if(Text.equals("DINNER")){
       l1.setAdapter(Dinn);
       return;

   }
   else if(Text.equals("DESSERTS")){
       l1.setAdapter(Dessert);
       return;

   }
   else if(Text.equals("APPETIZERS & SIDES")){
       l1.setAdapter(Appet);
       return;

   }
     }

     public void onNothingSelected(AdapterView<?> arg0){

              }

        });

   l1.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {

  // When clicked, show a toast with the TextView text
        Toast.makeText(getApplicationContext(), "SELECTED :: " +((TextView) view).getText(),
        Toast.LENGTH_SHORT).show();

     String st1 =(String) parent.getItemAtPosition(position); 
        GlobalClass.myval.add(st1);

       }
   });

}
private static class EfficientAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    public EfficientAdapter(Context context) {
        mInflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return StrActivity.Beverage.length;

    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

     public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.listview_row, null);
            holder = new ViewHolder();
            holder.text1 = (TextView) convertView
                    .findViewById(R.id.TextView01);
            holder.text2 = (TextView) convertView
                    .findViewById(R.id.TextView02);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.text1.setText(StrActivity.Beverage[position]);
        holder.text2.setText(StrActivity.Beveragecos[position]);
        return convertView;
      }
     static class ViewHolder {
        TextView text1;
        TextView text2;
    }
}
 } 
```

//StrActivity.java

```
 package com.tru.samp;

  public class StrActivity {
    public static String[] Beverage={"PEPSI","COKE","LASSI","FALOODA","BUTTER MILK","GREEN TEA","BADAM MILK","MASALA CHAI" };
     public static String[] Beveragecos={"$ 0.5","$ 0.5","$ 2.0","$ 3.0","$ 1.5","$ 0.7","$ 0.8","$ 1.0"};
    public static String[] Breakfast={"SIRLOIN & EGG","CFS STEAK & EGG","T-BONE & EGG","TWO EGGS BREAKFAST","2EGG W/MEAT","BEL WAFFLE","BEL WAFFLE W/MEAT","BLUEBERRY CAKE","CAKES","FABULOUS FRENCH TST","MOONS","FRENCH TST"};
     public static String[] Breakfastcos={"$ 2.5","$ 3.0","$ 3.5","$ 2.7","$ 4.7","$ 3.0","$ 5.6","$ 3.0","$ 2.5","$ 3.2","$ 2.0","$ 1.0"};
     public static String[] Lunch={" CRAB CAKE SANDWICH","TUSCAN GRILLED CHICKEN PANINI","SOUTHWEST TURKEY CLUB"," LOBSTER ROLL","TUNA MELT"," FRENCH DIP","YOUR OWN SANDWICH"};
     public static String[] Lunchcos={"$ 4.0","$ 4.5","$ 7.0","$ 3.5","$ 5.5","$ 6.3","$ 5.0"};
     public static String[] Dinner={"DUBLIN BAY PRAWN","CRAB FROM BRITTANY","WHITE ASPARAGUS","BLEWIT MUSHROOM","JOHN DORY FISH","MONKFISH","VEAL SWEET BREAD","LAMB","PIGEON FRY"};
     public static String[] Dinnercos={"$ 3.5","$ 4.5","$ 3.3","$ 2.6","$ 4.3","$ 3.7","$ 2.5","$ 3.0","$ 4.0"};
     public static String[] Desserts={"ECHOURGNAC CHEESE","HAZELNUT","GARIGUETTE STRAWBERRY","MOUSSE & ZEST","APRICOT","CHOCOLATE"};
      public static String[] Dessertscos={"$ 1.0","$ 1.5","$ 2.7","$ 4.0","$ 2.9","$ 1.5"};
     public static String[] Appetizers={"Greek Artichoke Spinach","Seafood Appetizers","Tapenade Flatbread","Cranberry Blue Cheese","Fig and Blue Cheese","Sun-Dried Tomato","Tropical Crab Rangoon"};
     public static String[] Appertizerscos={"$ 1.3","$ 2.7","$ 1.5","$ 2.0","$ 2.5","$ 2.3","$ 3.0"};
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:40:04.113

看看这个：

```
 listView=(ListView) findViewById(R.id.list);
    spinner=(Spinner) findViewById(R.id.spin);
    ArrayAdapter<String> adapter=new ArrayAdapter<String>(HotelActivity.this, android.R.layout.simple_spinner_item,Category);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> parent, View arg1,
                int pos, long arg3) {
            String Text = parent.getSelectedItem().toString();
            if(Text.equals("----SELECT----")) {

            }       
            else if(Text.equals("BEVERAGES")){
                CustomAdapter bever=new CustomAdapter(HotelActivity.this,pos,Beverage.length);
                listView.setAdapter(bever);
               return;
           }    
           else if(Text.equals("BREAKFAST")){
               CustomAdapter breakfast=new CustomAdapter(HotelActivity.this,pos,Breakfast.length);
               listView.setAdapter(breakfast);
               return;
           }
           else if(Text.equals("LUNCH")){
               CustomAdapter lunch=new CustomAdapter(HotelActivity.this,pos,Lunch.length);
                listView.setAdapter(lunch);
               return;
           }
           else if(Text.equals("DINNER")){
               CustomAdapter dinner=new CustomAdapter(HotelActivity.this,pos,Dinner.length);
               listView.setAdapter(dinner);
               return;

           }
           else if(Text.equals("DESSERTS")){
               CustomAdapter dessert=new CustomAdapter(HotelActivity.this,pos,Desserts.length);
                listView.setAdapter(dessert);
               return;

           }
           else if(Text.equals("APPETIZERS & SIDES")){
               CustomAdapter app=new CustomAdapter(HotelActivity.this,pos,Appetizers.length);
                listView.setAdapter(app);
               return;

           }
        }

        public void onNothingSelected(AdapterView<?> arg0) {

        }
    }); 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" 
        />

    <Spinner 
        android:id="@+id/spin"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/> 

        <ListView 
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>

</LinearLayout> 
```

自定义适配器类：

```
public class CustomAdapter extends BaseAdapter{
    Context context;
    int pos;
    int length;
    LayoutInflater layoutInflater;
    public static String[] Beverage={"PEPSI","COKE","LASSI","FALOODA","BUTTER MILK","GREEN TEA","BADAM MILK","MASALA CHAI" };
    public static String[] Beveragecos={"$ 0.5","$ 0.5","$ 2.0","$ 3.0","$ 1.5","$ 0.7","$ 0.8","$ 1.0"};
   public static String[] Breakfast={"SIRLOIN & EGG","CFS STEAK & EGG","T-BONE & EGG","TWO EGGS BREAKFAST","2EGG W/MEAT","BEL WAFFLE","BEL WAFFLE W/MEAT","BLUEBERRY CAKE","CAKES","FABULOUS FRENCH TST","MOONS","FRENCH TST"};
    public static String[] Breakfastcos={"$ 2.5","$ 3.0","$ 3.5","$ 2.7","$ 4.7","$ 3.0","$ 5.6","$ 3.0","$ 2.5","$ 3.2","$ 2.0","$ 1.0"};
    public static String[] Lunch={" CRAB CAKE SANDWICH","TUSCAN GRILLED CHICKEN PANINI","SOUTHWEST TURKEY CLUB"," LOBSTER ROLL","TUNA MELT"," FRENCH DIP","YOUR OWN SANDWICH"};
    public static String[] Lunchcos={"$ 4.0","$ 4.5","$ 7.0","$ 3.5","$ 5.5","$ 6.3","$ 5.0"};
    public static String[] Dinner={"DUBLIN BAY PRAWN","CRAB FROM BRITTANY","WHITE ASPARAGUS","BLEWIT MUSHROOM","JOHN DORY FISH","MONKFISH","VEAL SWEET BREAD","LAMB","PIGEON FRY"};
    public static String[] Dinnercos={"$ 3.5","$ 4.5","$ 3.3","$ 2.6","$ 4.3","$ 3.7","$ 2.5","$ 3.0","$ 4.0"};
    public static String[] Desserts={"ECHOURGNAC CHEESE","HAZELNUT","GARIGUETTE STRAWBERRY","MOUSSE & ZEST","APRICOT","CHOCOLATE"};
     public static String[] Dessertscos={"$ 1.0","$ 1.5","$ 2.7","$ 4.0","$ 2.9","$ 1.5"};
    public static String[] Appetizers={"Greek Artichoke Spinach","Seafood Appetizers","Tapenade Flatbread","Cranberry Blue Cheese","Fig and Blue Cheese","Sun-Dried Tomato","Tropical Crab Rangoon"};
    public static String[] Appertizerscos={"$ 1.3","$ 2.7","$ 1.5","$ 2.0","$ 2.5","$ 2.3","$ 3.0"};

    public CustomAdapter(Context context, int pos, int length) {
        super();
        this.context=context;
        this.pos=pos;
        this.length=length;
    }

    public int getCount() {
        return length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        DataHolder holder=null;
        if(convertView==null){
            holder=new DataHolder();
            layoutInflater=((Activity)context).getLayoutInflater();
            convertView=layoutInflater.inflate(R.layout.list_item, parent, false);
            holder.title=(TextView) convertView.findViewById(R.id.title);
            holder.price=(TextView) convertView.findViewById(R.id.price);
            convertView.setTag(holder);
        }
        else
        {
            holder=(DataHolder) convertView.getTag();
        }
        if(pos==1){
            holder.title.setText(Beverage[position]);
            holder.price.setText(Beveragecos[position]);
        }
        else if(pos==2){
            holder.title.setText(Breakfast[position]);
            holder.price.setText(Breakfastcos[position]);
        }
        else if(pos==3){
            holder.title.setText(Lunch[position]);
            holder.price.setText(Lunchcos[position]);
        }
        else if(pos==4){
            holder.title.setText(Dinner[position]);
            holder.price.setText(Dinnercos[position]);
        }
        else if(pos==5){
            holder.title.setText(Desserts[position]);
            holder.price.setText(Dessertscos[position]);
        }
        else if(pos==6){
            holder.title.setText(Appetizers[position]);
            holder.price.setText(Appertizerscos[position]);
        }
        return convertView;
    }
    static class DataHolder{
        TextView title,price;
    }

} 
```

和 list_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="30dp"
     >

    <TextView 
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

    <TextView 
        android:id="@+id/price"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"/>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:11:29.423

您可以通过 applicationcontroller 类来做到这一点......只需制作一个类 ApplicationController 如下

```
public class ApplicationController extends Application {
           // write your getters and setters here....
} 
```

在 Applicationcontroller 类中，放置 getter 和 setter 方法。您可以在一个活动中通过 set 方法设置数据，并在应用程序的另一个活动中通过 get 方法获取该数据。此类将数据存储在整个应用程序中..Moreoevr，您必须在 manifest.xml 文件中声明该 calss

```
android:name=".your package name.ApplicationController" 
```

以上应在 manifest.xml 文件的 application 标签中声明.....

# ios - 调用 localNotification 时是否可以计算 applicationIconBadgeNumber

> ID：11575599
> 
> 赞同：1
> 
> 时间：2012-07-20T08:26:04.993
> 
> 标签：ios, push-notification

我知道如何安排 localNotification 并在推送 localNotification 时设置 applicationIconBadgeNumber：

```
- (void) scheduleNotificationOn:(NSDate*) fireDate
                            text:(NSString*) alertText
                            action:(NSString*) alertAction
                             sound:(NSString*) soundfileName
                       launchImage:(NSString*) launchImage 
                           andInfo:(NSDictionary*) userInfo
{

    UILocalNotification *localNotification = [[UILocalNotification alloc] init];
    localNotification.fireDate = fireDate;

    ....

    self.badgeCount ++;
    localNotification.applicationIconBadgeNumber = self.badgeCount;         

    // Schedule it with the app
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
    [localNotification release];
} 
```

如代码所示，在调用 localNotification 之前设置了 applicationIconBadgeNumber。我想知道是否可以在调用 localNotification 时计算 applicationIconBadgeNumber 并将其显示在应用程序图标附近？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:09:37.473

不，你不能。除非您的应用程序在前台运行，否则您可能会触发本地通知。

# r - 如何计算铸造数据框部分内的分数？

> ID：11575612
> 
> 赞同：1
> 
> 时间：2012-07-20T08:14:27.700
> 
> 标签：r, aggregation

作为熔化和随后铸造`[1]`数据集的结果，我获得了以下数组（？）（`sumStats.c`）：

```
, , group2 = G2_1, variable = area

            group1
group3        G1_1      G1_2     G1_3       G1_4
   G3_1      0.000     0.000     0.00      0.000
   G3_2      0.000     0.000     0.00      0.000
   G3_3      0.000     0.000     0.00      0.000
   G3_4      0.000     0.000     0.00      0.000
   G3_5      0.000     0.000     0.00      0.000
   G3_6      0.000     0.000     0.00      0.000
   G3_7      0.000     0.000 26336.99  85236.488
   G3_8      0.000  4999.235 87935.73 360062.128
   G3_9      0.000     0.000     0.00      0.000
   G3_10  7853.982 18538.285 49744.29 134180.428
   G3_11     0.000     0.000     0.00   8830.825
   G3_12     0.000     0.000     0.00      0.000

, , grou2 = G2_2, variable = area

         group1
group3         G1_1     G1_2      G1_3      G1_4
   G3_1       0.000     0.00      0.00      0.00
   G3_2       0.000     0.00      0.00      0.00
   G3_3       0.000     0.00      0.00      0.00
   G3_4       0.000     0.00      0.00      0.00
   G3_5       0.000     0.00      0.00      0.00
   G3_6       0.000     0.00      0.00  51772.66
   G3_7       0.000     0.00      0.00      0.00
   G3_8    7853.982 22086.38 140874.76 523373.88
   G3_9       0.000     0.00      0.00      0.00
   G3_10      0.000  1415.79  23325.94  13407.49
   G3_11      0.000     0.00      0.00      0.00
   G3_12      0.000     0.00      0.00      0.00

, , group2 = G2_3, variable = area

          group1
group3          G1_1      G1_2       G1_3        G1_4
   G3_1       0.0000     0.000      0.000      0.0000
   G3_2       0.0000     0.000      0.000      0.0000
   G3_3       0.0000     0.000      0.000     93.2632
   G3_4       0.0000     0.000      0.000      0.0000
   G3_5       0.0000     0.000      0.000  46353.3814
   G3_6       0.0000     0.000      0.000      0.0000
   G3_7       0.0000     0.000      0.000      0.0000
   G3_8    7390.0570 16851.829 101013.680 232666.8839
   G3_9       0.0000  2541.574   6397.271  87825.7232
   G3_10      0.0000     0.000      0.000      0.0000
   G3_11    436.9895  4118.440  56572.140 173866.7915
   G3_12      0.0000     0.000      0.000  47924.5494 
```

现在我需要得到每个变量 ( )相对于每个变量总数的*分数*。例如，G2_1 ( ) 在 G1_1 ( ) 中具有 100% 的 G3_10 ( ) ，G1_2 ( ) 具有 G3_8 的 21.24 % 和 G3_10 的 78.76 %，依此类推。一旦计算出每一列的百分比，我认为我可以得到结果数组来获取进一步分析所需的数据框。`area``group2``group1``group3``group2``group3``group1``group1``group1``melt()`

我觉得这`ddply()`在这里会有所帮助，但由于我很难理解如何将它用于手头的任务，如果有人能提供帮助，我将不胜感激。

```
[1]
sumStats.m <- melt(sumStats, id=c("group1", "group2", "group3"), "area")
sumStats.c <- cast(sumStats.m, group3 ~ group1 ~ group2 ~ variable, sum) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:50:48.213

尝试：

```
prop.table(sumstats.c,margin=c(1,3)) 
```

例如：

```
x<-xtabs(~cyl+vs+am,mtcars)
x
, , am = 0

   vs
cyl  0  1
  4  0  3
  6  0  4
  8 12  0

, , am = 1

   vs
cyl  0  1
  4  1  7
  6  3  0
  8  2  0

prop.table(x,margin=c(1,3))
, , am = 0

   vs
cyl     0     1
  4 0.000 1.000
  6 0.000 1.000
  8 1.000 0.000

, , am = 1

   vs
cyl     0     1
  4 0.125 0.875
  6 1.000 0.000
  8 1.000 0.000 
```

# tridion - SiteEdit.ComponentPresentation() 在 tridion 2011 SP1 中是否仍然有效

> ID：11575613
> 
> 赞同：1
> 
> 时间：2012-07-20T08:26:40.937
> 
> 标签：tridion, tridion-2011, siteedit

在 Tridion 5.3 SP1 版本中，我们使用 SiteEdit.ComponentPresentation(objCP) 在页面上显示可编辑的组件演示文稿。这在 Tridion 5.3 SP1 中运行良好。我们正在迁移到 Tridion 2011 SP1，所以想确认此功能是否仍然存在于 Tridion 2011 SP1 中或已弃用？

如果它被弃用，那么让我们知道它的替代功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:06:33.980

从 SDL Tridion R5.3 升级到 SDL Tridion 2011 并非易事，而是一条受支持的路径。您首先应该关注的是 SDL Tridion 2011 SP1 产品先决条件的变化。SiteEdit 仍受支持（即使在 VBScript 模板上），但对于 SDL Tridion 2011 SP1，它是产品的完整更新版本，名为[SDL Tridion 2011 SP1 的用户界面更新](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/concept_EDC411EF58BD4700A8B6BD996AB102F3)（需要登录，请参阅[此处](http://docportal.sdl.com/sdltridion)了解详细信息）。由于您来自 SiteEdit 1.3，您应该联系客户支持以获取用于从 SiteEdit 1.3 升级的 SiteEdit 脚本扩展 DLL，因为文档仅在 SiteEdit 2009 SP3 中提及它。

升级过程本身在我们的[文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/topic_0CA8B8211FC54ED0BC3FBFD65C439206)中进行了描述（需要登录，请参阅[此处](http://docportal.sdl.com/sdltridion)了解详细信息）。Robert Curlette 还写了一篇关于升级到 SDL Tridion 2011的精彩[博客文章。](http://www.curlette.com/?p=720)

这里要了解的最重要的事情是您正在向前迈出的一大步，从您的示例代码中我看到您仍在使用 VBScript 模板，SDL Tridion 2011 SP1 仍然支持这些模板，但它们已被弃用，因此您应该考虑替换他们与我们的新模板模型。但是，SDL Tridion 不建议您将其包含在升级项目中，因为这会使项目太大并且可能无法管理。

对于此类升级，我能给您的最佳建议可能是联系 SDL Tridion 专业服务并让他们进行升级扫描，这将指出此升级的所有痛点。然后他们还可以建议您最好的前进方式，因为这取决于您的实施细节，升级过程的细节也可能不同（比如您应该继续使用 VBScript 模板还是升级它们是否有意义，该怎么做与您的事件系统和您的扩展或自定义等）。

# java - 是否有与 java-osgi 模块化架构等效的基于 microsoft-clr 的架构？

> ID：11575615
> 
> 赞同：1
> 
> 时间：2012-07-20T08:26:44.760
> 
> 标签：java, .net, module, osgi

是否有针对基于 microsoft-clr 的开发描述的清晰的模块化架构模式？例如，它定义了如何允许将模块插入/插入更大的应用程序 - 例如由 web-ui、服务层和 etl 模块组成的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T01:53:37.530

简单地说，不，我找不到任何建议为 .net 应用程序构建模块化架构的项目/指南

# knockout.js - 如何在 MVC4 的编辑器模板中将字段绑定到敲除？

> ID：11575620
> 
> 赞同：2
> 
> 时间：2012-07-20T08:26:56.427
> 
> 标签：knockout.js, asp.net-mvc-4, mvc-editor-templates

在我的 MVC4 项目中，我有一个包含产品视图模型集合的类别视图模型。我使用编辑器模板来呈现单个产品视图模型，并将产品视图模型的集合传递给它：

类别视图模型：

```
@model CategoryViewModel
@using MVC4PartialViews.Models.ViewModels

<div class="editor-field">
    @Html.EditorFor(model => model.CategoryName)
    @Html.ValidationMessageFor(model => model.CategoryName)
</div>

@Html.EditorFor(x => x.Products) 
```

呈现集合中每个产品的编辑器模板：

```
<div class="editor-field">
    @Html.EditorFor(model => model.ProductName)
    @Html.ValidationMessageFor(model => model.ProductName)
</div>
// etc. 
```

这非常有效，因为它会自动正确命名和索引元素，因此所有产品都会作为父类别视图模型的一部分回发 - 这是它输出的内容：

```
<div class="editor-field">
    <input class="text-box single-line" id="Products_0__ProductName" name="Products[0].ProductName" type="text" value="Add 1st product for this Category" />
    <span class="field-validation-valid" data-valmsg-for="Products[0].ProductName" data-valmsg-replace="true"></span>
</div> 
```

如何将编辑器模板中的字段绑定到淘汰赛？我可以以某种方式访问​​或使用编辑器模板用来命名元素的索引值吗？我可以在父（类别）视图模型中绑定字段没有问题，如下所示：

```
<script>
    window.defaultCategory = @Html.Raw(Json.Encode(Model));
</script>

@Html.TextBoxFor(
    model => model.CategoryName,
    new Dictionary<string, object>
    {
        {"style", "width: 30%;"},
        {"placeholder", "Please enter the Category name"},
        { "data-bind", "value: currentCategory.CategoryName" }
    }) 
```

我需要生成这样的东西，其中 [n] 是编辑器模板在呈现 Products 集合中的每个产品时生成的索引值：

```
{ "data-bind", "value: currentCategory.Products[n].ProductName" } 
```

或者应该是这样的：

```
{ "data-bind", "value: currentCategory.Products()[n].ProductName" } 
```

所有帮助或想法表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:48:44.997

您可以从 TemplateInfo 中提取当前索引：

```
@model ProductViewModel

<div class="editor-field">    
    @Html.TextBoxFor(
        model => model.ProductName,
        new {
            style = "width: 30%;",
            placeholder = "Please enter the Category name",
            data_bind = string.Format(
                "value: currentCategory.{0}.ProductName",
                ViewData.TemplateInfo.HtmlFieldPrefix
            )
        }
    )
    @Html.ValidationMessageFor(model => model.ProductName)
</div> 
```

# c# - Linq 使用 StartsWith 始终为空

> ID：11575628
> 
> 赞同：0
> 
> 时间：2012-07-20T08:27:38.023
> 
> 标签：c#, linq

我有一个带有虚拟数据的简单列表，如下所示：

```
List<Organisation> list = new List<Organisation>();
list.Add(new Organisation() { LogoUrl = "/images/logos/Blade.png", OrganisationId = 1, OrganisationName = "Blade" });
list.Add(new Organisation() { LogoUrl = "/images/logos/Torn.png", OrganisationId = 2, OrganisationName = "Torn" }); 
```

当我运行 linq 查询时：

```
var results = from org in OrganisationsController.GetDummyList()
              where org.OrganisationName.StartsWith(searchString)
              select org; 
```

它总是返回一个 Empty 结果。在这种情况下，searchString 由用户指定，示例为“Tor”。

`where org.OrganisationName == searchString`在搜索字符串为 Torn 的情况下使用不同的变体，如 ' '。但是 StartsWith 永远不会起作用。

有什么想法我哪里出错了吗？

**编辑：** 从乔恩的代码中，我将代码更改为如下所示：

```
public JsonResult Search(string searchString)
{
    //create json result object
    JsonResult data = new JsonResult();

    var list = OrganisationsController.GetDummyList();

    //query the list
    var results = from org in list
        where org.OrganisationName.ToLower().Contains(searchString.ToLower())
        select org;

    if (results.Any())
    {
        System.Diagnostics.Debug.Write("found");
    }

    //setup the data
    data.Data = results;

    //return the data
    return Json(data, JsonRequestBehavior.AllowGet);
} 
```

**注意：我将 StartsWith 更改为 Contains，但两者都给我带来了类似的问题。** 我的组织之一叫做“Absa”。这是我第一次启动应用程序时非常奇怪的事情 然后我再次输入“bsa”只是为了仔细检查，它返回了 Absa，它在第一次测试中没有。为什么结果一开始不起作用然后起作用？

谢谢， 雅克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:34:07.790

无法重现。这对我来说可以：

```
using System;
using System.Collections.Generic;
using System.Linq;

class Organisation
{
    public string LogoUrl { get; set; }
    // Removed redundant Organisation prefixes
    public int Id { get; set; }
    public string Name { get; set; }
}

class Test
{
    static void Main()
    {
        // Used collection initializer for sanity
        var list = new List<Organisation>
        {
            new Organisation { LogoUrl = "Blade.png", Id = 1, Name = "Blade" },
            new Organisation { LogoUrl = "Torn.png", Id = 2, Name = "Torn" },
        };

        string searchString = "Tor";
        var query = from org in list
                    where org.Name.StartsWith(searchString)
                    select org;

        // Nicer version:
        // var query = list.Where(org => org.Name.StartsWith(searchString));

        Console.WriteLine(query.Count()); // 1
    }
} 
```

找出你的代码和我的代码之间的区别，找出问题所在。

特别是，您*展示*了使用 的代码`List<T>`，这意味着 LINQ to Objects。如果您的*真实*代码使用 LINQ to SQL 或实体框架，那很容易影响事情。

# winforms - 自定义控件外观

> ID：11575629
> 
> 赞同：0
> 
> 时间：2012-07-20T08:27:39.483
> 
> 标签：winforms, user-controls

我创建了自己的继承自标准 .net 控件的用户控件（例如 MyTextBox : TextBox）。MyTextBox 在其中包含一些自定义逻辑，并且还设置了一些样式属性（例如颜色）。我构建了包含这些控件的项目，并将它们添加到我的工具箱中。然后我将它们拖到 Windows 窗体设计器上。问题是当我拖动它们时，Windows 窗体设计器会自动包含我拖动的控件的样式定义。例如

> > this.myTextBox1.BackColor = System.Drawing.Color.Gray;

现在，如果稍后在开发过程中我决定将解决方案中 MyTextBox 的所有实例的颜色从灰色更改为白色，我不能简单地转到 MyTextBox 控件代码，在那里进行更改并重新构建。更改不会应用于现有文本框，因为此属性将在表单设计器中被覆盖！处理此类案件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:34:50.587

您可以使用属性控制设计器代码生成... [http://msdn.microsoft.com/en-us/library/system.componentmodel.designerserializationvisibilityattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerserializationvisibilityattribute.aspx)

# android - 如何在我的 Android 应用程序中集成 PayPal 订阅按钮？

> ID：11575631
> 
> 赞同：1
> 
> 时间：2012-07-20T08:27:53.793
> 
> 标签：android, paypal

我可以以某种方式将 PayPal 订阅按钮集成到我的 Android 应用程序中吗？任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:36:05.160

我不知道贝宝是否有移动版本，但我认为当您在应用程序上创建贝宝按钮以打开与贝宝付款链接的网络视图时，这是可能的。希望它会帮助你... :)

# sql - 需要对 UPDATE t-SQL 语句中的 SELECT 进行一些说明

> ID：11575635
> 
> 赞同：5
> 
> 时间：2012-07-20T08:28:18.380
> 
> 标签：sql, sql-server, tsql, sql-update

假设我有以下 t-SQL 语句（设计为在 SQL Server 2008 上运行）：

```
UPDATE tbl
SET col1 = (
    SELECT MAX(col1) FROM tbl AS t1 WHERE t1.type = tbl.type
); 
```

在这种情况下 SELECT 究竟是如何工作的：

1.  它选择考虑每个 UPDATE 的结果，或者

2.  它在 UPDATE 开始更新记录之前从 tbl 中进行选择。

有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T08:44:23.897

2！您的子查询 SELECT 提取在 UPDATE 进行任何更改之前确定的值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-20T08:32:30.093

是 1

1\. 它选择考虑每个 UPDATE 的结果，或者

# objective-c - 如何使用应用的过滤器提取电影帧

> ID：11575636
> 
> 赞同：0
> 
> 时间：2012-07-20T08:28:19.047
> 
> 标签：objective-c, cocoa, core-image, qtkit

所以我有一个`QTMovieView`显示`QTMovie`. 通过我的界面，用户可以添加和删除实时应用于电影的 CoreImage 过滤器。这很好用。

现在我想从电影中提取图像（比如当用户点击按钮时）。这也适用于该`frameImageAtTime`方法。**但我得到的是原始电影中未经过滤的图像。**我的猜测是 CI 过滤器应用于`QTMovieView`' 的显示层而不是电影本身。

有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T07:53:31.560

我得到了一个可行的解决方案：`frameImageAtTime`用于检索 a `CIImage`，对其应用与 相同的过滤器，`QTMovie`并将生成的过滤图像转换为`NSImage`(via `NSBitmapImageRep`)。

# c++ - 可以在方法而不是构造函数中初始化类的 const 成员变量吗？

> ID：11575637
> 
> 赞同：5
> 
> 时间：2012-07-20T08:28:21.823
> 
> 标签：c++, class, design-patterns, initialization, constants

我有一个类并想创建一个 const int 变量，但该变量的值在类的构造函数中对我不可用。

在类的初始化方法中，我得到了值。我可以用那种方法分配它吗？因为我只分配一次（如 const 所说），为什么它不起作用？

代码如下 [Just a ProtoType] ：

**档案：啊**

```
Class A
{
  private :
  const long int iConstValue;

  public :
  A();
  initClassA();
} 
```

**文件：A.cpp**

```
A::A()
{
 //CanNot initialize iConstValue (Don't have it)
}

A::initClassA(some params)
{
 // calculation according to params for iConstValue
 iConstValue = (some value)
} 
```

这是行不通的。有人有任何解决方案吗？

**注意：**我**无法**以任何方式在构造函数中获取 iconstValue 的值，因为存在一些限制。所以请不要建议这样做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T08:45:41.683

一个小例子：

```
class A
{
public:
  A():a(initial_value_of_a()) {}

private:
  const int a;
  int initial_value_of_a() { return 5; /* some computation here */ };
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T08:34:08.133

`const`并不意味着您只能分配一次，您*永远不能*分配给 const 对象。一个 const 变量被初始化一次，它的值不能改变。因此，您在构造函数中对其进行初始化，当所有成员和基都已初始化时，之后您将无法更改它。

如果您无法在构造时获得值，您可以将变量设为非 const，因此您对其进行修改，或者您可以延迟构造直到拥有所有数据，使用占位符直到构造真实对象。

两阶段构造是一种代码味道，它肯定与 const 成员不兼容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T08:29:40.720

您不能这样做，因为您无法更改 const 变量的值。到`initClassA`运行时， const 数据成员已经被初始化（在这种情况下为一些垃圾值）。因此，您只能将数据成员真正初始化为构造函数初始化程序列表中的某个值。

如果你只想设置一次变量，那么你可以使是非常量的，并添加一个保护，所以它只能设置一次。这不漂亮，但它会工作：

```
class A
{
  private :
   long int iValue;
   bool isInitialised;

  public :
  A() : iValue(0), isInitialized(false);
  bool initClassA() {
    if (isInitialized) return false;
    iValue = something:
    isInitialized = true;
    return true;
  }
} 
```

但是拥有可以初始化或不可初始化的对象并不是一个好习惯。对象在构造时应处于一致状态，客户端不必检查这些对象是否已初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:46:12.160

也许你可以做的是改变一个 int 指针，在你的构造函数中接收这个指针，然后改变你想要的指针：P

但它不会是相同的功能，因为它将是 const 指针而不是值：/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T12:49:03.810

我想我需要改变设计，我应该以任何方式计算（或获取）构造函数中的 const 变量值。因为我以后无法设置它的值。

# internet-explorer - IE8“刷新”按钮执行两次 HTTP GET

> ID：11575638
> 
> 赞同：0
> 
> 时间：2012-07-20T08:28:29.860
> 
> 标签：internet-explorer, http, internet-explorer-8

我正在开发内置 Web 服务器的嵌入式 Linux 设备。我使用 uhttpd 作为 Web 服务器，使用 LuCI 作为框架。问题如下：当用户按下浏览器（IE8）的“刷新”按钮时，它会发送 HTTP GET 请求并开始检索响应，但此过程被中断，浏览器屏幕显示部分页面和一些 HTML 标记文本。之后，浏览器再次发送 HTTP GET 并不间断地检索页面。

当用户只需按页面上的 URL 并获取页面时，不会重现此行为。

这种行为的原因是什么（GET两次）？

# unit-testing - PowerMock、Mockito 和来自反射 api 的模拟最终类

> ID：11575641
> 
> 赞同：2
> 
> 时间：2012-07-20T08:28:40.500
> 
> 标签：unit-testing, exception, mockito, powermock

我正在尝试模拟 java.lang.reflect.Method，这里是我的代码：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(Method.class)
public class AuditDataTest {
  @Test
  public void testStartAudit() {
        Object[] args = new Object[1];
        args[0] = "bla";
        Method method = PowerMockito.mock(Method.class);
        when(method.getAnnotation(Audit.class).value()).thenReturn("audit");
        auditData.startAudit(method, args);
    }
} 
```

当我运行测试时，我收到以下错误消息：

```
java.lang.IllegalAccessError: java.lang.Class
    at sun.reflect.GeneratedSerializationConstructorAccessor10.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator.newInstance(SunReflectionFactoryInstantiator.java:40)
    at org.powermock.reflect.internal.WhiteboxImpl.newInstance(WhiteboxImpl.java:257)
    at org.powermock.reflect.Whitebox.newInstance(Whitebox.java:139)
    at org.powermock.core.DefaultFieldValueGenerator.instantiateFieldType(DefaultFieldValueGenerator.java:74)
    at org.powermock.core.DefaultFieldValueGenerator.fillWithDefaultValues(DefaultFieldValueGenerator.java:51)
    at org.powermock.api.mockito.internal.mockcreation.MockCreator.mock(MockCreator.java:60)
    at org.powermock.api.mockito.PowerMockito.mock(PowerMockito.java:138)
    at my.package.audit.AuditDataTest.testStartAudit(AuditDataTest.java:52)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:59)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:322)
    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:79)
    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:87)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:309)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:297)
    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:77)
    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:42)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:222)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:161)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:135)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:133)
    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:112) 
    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:57)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

有人可以解释一下，我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T08:36:59.510

从[Powermock 常见问题解答](http://code.google.com/p/powermock/wiki/FAQ)：

> 我无法从 java.lang、java.net、java.io 或其他系统类中模拟类，为什么？
> 
> 这是因为它们是由 Java 的引导类加载器加载的，并且不能由 PowerMock 的类加载器进行字节码操作。由于 PowerMock 1.2.5 有一个变通方法，请看一下[这个](http://code.google.com/p/powermock/source/browse/trunk/modules/module-test/mockito/junit4/src/test/java/samples/powermockito/junit4/system/SystemClassUserTest.java?spec=svn1714&r=1714) 简单的示例以了解它是如何完成的。

# c# - LocalReport.SubReportProcessing 事件正在忽略后续的 DataTables

> ID：11575644
> 
> 赞同：0
> 
> 时间：2012-07-20T08:28:50.780
> 
> 标签：c#, .net, reporting-services, reporting, rdlc

我有一个（rdlc）报告，其中包含一个表中的子报告。对于生成的每个子报表实例，`LocalReport.SubreportProcessing`都会触发事件，这[与文档一致](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.localreport.subreportprocessing%28v=vs.100%29.aspx)。

但是，对于这些事件中的每一个，报告中似乎只**使用了分配的第一个 DataTable**。我可以验证是否 `ReportFactory.ReturnNextDataTable`为每一行返回了适当的 DataTable，但似乎 DataTable 的第一个实例正在重复多次。

我已经尝试为每个调用（使用）清除报告数据源，`e.DataSources.Clear()`但这没有区别。

这是我的代码：

```
void AddData(object sender, SubreportProcessingEventArgs e)
        {  
            DataTable merged = ReportFactory.ReturnNextDataTable;
            e.DataSources.Add(new ReportDataSource("RATES", merged)); //Subsequent DataTables ignored      
        } 
```

我不禁觉得我从根本上走错了路。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:12:38.570

我找到了解决方案： [http ://social.msdn.microsoft.com/Forums/es-PY/sqlreportingservices/thread/04f72cea-caea-48c5-82e9-f6b2b962717d](http://social.msdn.microsoft.com/Forums/es-PY/sqlreportingservices/thread/04f72cea-caea-48c5-82e9-f6b2b962717d)

对我来说，从 Report Viewer 9.0 (2008) 迁移到 Report Viewer 11.0 (2012) 后会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-29T05:43:29.973

继续 Stephane CLARISSE 的回答，这里是源代码的摘录

> 经过一番摸索和修改我的代码后，我找到了一种解决方法。解决方案是在子报表中创建一个虚拟参数，然后您需要将其绑定到 tablix 数据集中的一个字段。只要 subreport 参数和 tablix 数据集字段类型兼容，任何字段都可以。您不必对子报表中的参数执行任何操作，但现在 SSRS 显示同一子报表的多个实例，tablix 中的每一行都有一个单独的实例。

这似乎是 SSRS 中的一个错误，解决方法是使用从主报告传递的任何数据类型创建一个虚拟参数。这是它为我解决问题的方法

我在子报告中添加了一个虚拟参数 [![虚拟参数](../Images/a86763e14eaea57fd18e721c76407e95.png)](https://i.stack.imgur.com/5HoSG.png)

在主报告上，我只是传递了与虚拟参数的数据类型匹配的虚拟参数的任何字段。就我而言，它是整数（eventID）

[![主要报告属性](../Images/50501730c13ef2b803cdc3f5b4928c73.png)](https://i.stack.imgur.com/3aj8w.png)

# android - 如何删除项目并刷新列表视图

> ID：11575652
> 
> 赞同：5
> 
> 时间：2012-07-20T08:29:23.383
> 
> 标签：android

我的程序中有一个列表视图。在那里我填充了数据库中的值并显示出来。我正在使用上下文菜单来编辑、删除列表视图中的项目。如果我在上下文菜单中选择删除它会删除数据库中的项目，但我没有从列表视图中删除该项目。我在这里做错了什么。如果有人知道，请帮助我。

检索方法：

```
public void retrievedb() {
        strquery = "SELECT * FROM api_settings";
        Cursor mCursor = (MainscreenActivity.JEEMAAndroSMSDB).rawQuery(
                strquery, null);
        if (mCursor.getCount() != 0) {
            mCursor.moveToLast();
            for (int i = mCursor.getCount() - 1; i >= 0; i--) {
                dbid = mCursor.getString(0);
                dbapiname = mCursor.getString(1);
                dbURL = mCursor.getString(2);
                dbUnameVar = mCursor.getString(3);
                dbUnameVal = mCursor.getString(4);
                dbPwdVar = mCursor.getString(5);
                dbPwdVal = mCursor.getString(6);
                dbsendername = mCursor.getString(7);
                dbdestinationvar = mCursor.getString(8);
                dbmsgvariable = mCursor.getString(9);
                dbchars = mCursor.getString(10);
            }
        }

        if ((dbapiname == null) || (dbURL == null) || (dbUnameVar == null)
                || (dbUnameVal == null) || (dbPwdVar == null)
                || (dbPwdVal == null) || (dbsendername == null)
                || (dbdestinationvar == null) || (dbmsgvariable == null)
                || (dbchars == null)) {

            tvText = (TextView) findViewById(android.R.id.text1);
            tvText.setVisibility(1);
        } else {
            adapter = new ArrayAdapter<Settingsmodel>(this,
                    android.R.layout.simple_list_item_1, listItems);
            tvText = (TextView) findViewById(android.R.id.text1);
            tvText.setVisibility(View.GONE);
            strquery = "SELECT ID,API_Name FROM api_settings";
            mCursor = (MainscreenActivity.JEEMAAndroSMSDB).rawQuery(strquery,
                    null);
            if (mCursor.getCount() != 0) {
                mCursor.moveToFirst();
                do {
                    dbid = mCursor.getString(0);
                    dbapiname = mCursor.getString(1);
                    listItems.add(new Settingsmodel(dbapiname, dbid));
                    adapter.notifyDataSetChanged();
                } while (mCursor.moveToNext());
            }
        }
    } 
```

上下文菜单：

```
@Override
    public void onCreateContextMenu(ContextMenu menu, final View v,
            ContextMenuInfo menuInfo) {
        if (v.getId() == android.R.id.list) {
            AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
            Settingsmodel selectedValue = (Settingsmodel) getListAdapter()
                    .getItem(info.position);
            String tempo = selectedValue.getSpinnerText();
            menu.setHeaderTitle(tempo);
            String[] menuItems = getResources().getStringArray(R.array.menu);
            for (int i = 0; i < menuItems.length; i++) {
                menu.add(Menu.NONE, i, i, menuItems[i]);
            }

        }
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item
                .getMenuInfo();
        int menuItemIndex = item.getItemId();
        String[] menuItems = getResources().getStringArray(R.array.menu);
        String menuItemName = menuItems[menuItemIndex];
        Settingsmodel selectedValue = (Settingsmodel) getListAdapter().getItem(
                info.position);
        String temp0 = selectedValue.getSpinnerText();
        String temp1 = selectedValue.getValue();
        int id = Integer.parseInt(temp1);
        if (menuItemName.equalsIgnoreCase("Set as Default")) {
            ContentValues values = new ContentValues();
            values.put(MainscreenActivity.COL_Set_Default, value);
            MainscreenActivity.JEEMAAndroSMSDB.update(
                    MainscreenActivity.TABLE_Name, values, "ID=" + id, null);
            values.put(MainscreenActivity.COL_Set_Default, 0);
            Toast.makeText(getBaseContext(), temp0 + " is set as Default",
                    Toast.LENGTH_LONG).show();
            MainscreenActivity.JEEMAAndroSMSDB.update(
                    MainscreenActivity.TABLE_Name, values, "ID!=" + id, null);
        }

        if (menuItemName.equalsIgnoreCase("Delete")) {
            MainscreenActivity.JEEMAAndroSMSDB.delete(
                    MainscreenActivity.TABLE_Name, "ID=" + id, null);           
            Toast.makeText(getBaseContext(), "API Deleted Successfully",
                    Toast.LENGTH_SHORT).show(); 
            retrievedb();
        }

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T09:17:23.880

您可以在删除项目后刷新您的列表

```
YourListView.setAdapter(YourAdapter); // optional

YourAdapter.notifyDataSetChanged(); // mandatory 
```

请享用

**编辑：**

最佳方法：（第一个解决方案没有伤害）

```
listItems.remove(position);
listViewAdapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T08:33:24.430

尝试从中删除项目`listItems(List)`，然后调用

```
adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T08:37:00.223

有两种方法

```
1) Once after your Item from list view call the methos adapter.notifyChanged();

                            (or) 
2) create a method that append data to the listview, after delete the record call that method again. its just another way of refreshing listview 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T09:50:54.277

您是否尝试过在 UI 线程上执行此操作：

```
 listview.remove(position);
        runOnUiThread(new Runnable() {
            public void run() {
                adapter.notifyDataSetChanged();
            }
        }); 
```

这可能会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-16T06:24:41.400

首先从您将列表填充到列表视图的数组列表中删除一个项目

```
arraylist.remove(position); 
```

然后打电话

```
listview.invalidateViews(); 
```

# php - fpdf 想要更改依赖于 if/else 语句的数组的 SetFillColor

> ID：11575653
> 
> 赞同：0
> 
> 时间：2012-07-20T08:29:29.407
> 
> 标签：php, pdf, fpdf

好的，会尽量在这里尽可能清楚。我正在尝试生成一个包含显示产品信息的各个字段的 pdf 文档。本质上，生成 pdf 的脚本将确定产品中的更改是否已启动，如果已启动，则将创建 pdf。

我现在要做的是突出显示这些变化的领域。为了检查是否有变化，我使用了以下变量（其中大约有 30 个）

```
$cone
$ctwo..... etc 
```

PDF 文件中产品输出的数组示例如下：

```
 $leftHeadArray[0]['leftText']  = 'ID';
    $leftHeadArray[0]['rightText'] = $ID;

    $leftHeadArray[1]['leftText']  = 'start';
    $leftHeadArray[1]['rightText'] = date("d/m/Y", $Start);

    $leftHeadArray[2]['leftText']  = 'End';
    $leftHeadArray[2]['rightText'] = date("d/m/Y", $End); 
```

然后在以下位置启动格式和单元格：

```
$maxheader = max(array_keys($leftHeadArray), array_keys($midHeadArray), array_keys($rightHeadArray));

    for ($i = 0; $i <= max($maxheader); $i++)
    {
        if (isset($leftHeadArray[$i]))
        {
            $pdf->SetFont('helvetica', 'B', 6);
            $pdf->SetFillColor(128, 0, 0);
            $pdf->SetTextColor(255, 255, 255);

            $pdf->Cell(40, 5, $leftHeadArray[$i]['leftText'], $border, 0, 'L', 1);

            $pdf->SetFont('helvetica', 'N', 6);
            if ($ctwentytwo == 0 && $leftHeadArray[1]['rightText'] || $ctwentytwo == 0 && $leftHeadArray[4]['rightText'] ){
            $pdf->SetFillColor(255, 255, 255);
            $pdf->SetTextColor(0, 0, 0);
            }else{
            $pdf->SetFillColor(0, 0, 0);
            $pdf->SetTextColor(255, 255, 255);
            }

        $pdf->Cell(30, 5, $leftHeadArray[$i]['rightText'], $border, 0, 'L', 1);
        $pdf->Cell(20, 5, '', 0, 0, 'L', 0);
    } 
```

**我已经尝试过的事情：**

1.  将 if else 语句包装在单个单元格数组周围

    （例如 $leftHeadArray[0]['leftText'] = 'ID'; $leftHeadArray[0]['rightText'] = $ID;）

    并尝试覆盖其中的设置填充颜色

2.  将 if else 语句放在 if isset 部分中

**我正在努力解决的事情：**

*   将 $cone 连接到 $leftheadarray
*   启动更改时仅更改一个单元格

我希望这是简洁的！

// - - - - - - - - - - - - - - - 解决

该变量始终假定为 0，因此如果 $cone == 1 需要进行 declalation 并与左头数组相关，如下所示：希望这会有所帮助！

```
if (isset($leftHeadArray[$i]))
        {
            $pdf->SetFont('helvetica', 'B', 6);
            $pdf->SetFillColor(128, 0, 0);
            $pdf->SetTextColor(255, 255, 255);

            $pdf->Cell(40, 5, $leftHeadArray[$i]['leftText'], $border, 0, 'L', 1);

            $pdf->SetFont('helvetica', 'N', 6);

            $pdf->SetFillColor(255, 255, 255);
            $pdf->SetTextColor(128, 0, 0);

            if (($ctwentytwo == 1) && ($leftHeadArray[$i]['leftText'] == "Promotion Start Date")
            ||  ($cone == 1) && ($leftHeadArray[$i]['leftText'] == "Promotion ID")
            ||  ($ctwo == 1) && ($leftHeadArray[$i]['leftText'] == "Promotion Type"))#|| $ctwentytwo == 0 && $leftHeadArray[1]['rightText']
            {
                $pdf->SetFillColor(0, 0, 0);
                $pdf->SetTextColor(255, 255, 255);
            }

            $pdf->Cell(30, 5, $leftHeadArray[$i]['rightText'], $border, 0, 'L', 1);
            $pdf->Cell(20, 5, '', 0, 0, 'L', 0);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:57:22.267

```
if (isset($leftHeadArray[$i]))
        {
            $pdf->SetFont('helvetica', 'B', 6);
            $pdf->SetFillColor(128, 0, 0);
            $pdf->SetTextColor(255, 255, 255);

            $pdf->Cell(40, 5, $leftHeadArray[$i]['leftText'], $border, 0, 'L', 1);

            $pdf->SetFont('helvetica', 'N', 6);

            $pdf->SetFillColor(255, 255, 255);
            $pdf->SetTextColor(128, 0, 0);

            if (($ctwentytwo == 1) && ($leftHeadArray[$i]['leftText'] == "Promotion Start Date")
            ||  ($cone == 1) && ($leftHeadArray[$i]['leftText'] == "Promotion ID")
            ||  ($ctwo == 1) && ($leftHeadArray[$i]['leftText'] == "Promotion Type"))#|| $ctwentytwo == 0 && $leftHeadArray[1]['rightText']
            {
                $pdf->SetFillColor(0, 0, 0);
                $pdf->SetTextColor(255, 255, 255);
            }

            $pdf->Cell(30, 5, $leftHeadArray[$i]['rightText'], $border, 0, 'L', 1);
            $pdf->Cell(20, 5, '', 0, 0, 'L', 0);
        } 
```

# php - 如何获取我的站点（我的服务器）用户的 MAC 地址

> ID：11575659
> 
> 赞同：2
> 
> 时间：2012-07-20T08:29:57.037
> 
> 标签：php, javascript, perl, unix, cgi

如何获取我的站点（服务器）用户的 Mac 地址。欢迎任何工具、方法和技术，所有语言。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:32:24.197

简短的回答是：你不能。即使假设您可以从请求中提取 MAC 地址，用户在访问您的站点之前也会经过许多网络设备，那么您如何知道 MAC 地址来自哪一个？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T08:32:29.737

假设您的站点在 Internet 上（而不是 LAN），则不能。

该信息不会暴露给客户端 JavaScript，也不会通过 Internet 路由。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T08:32:10.873

假设您的访问者来自互联网，而不仅仅是本地网络：**您没有。**
它不是底层协议的一部分，在网络上传输该信息多于一跳。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T21:25:25.337

通过让客户端将机器的 MAC 地址发送给您。您必须在能够收集该信息的客户端上执行一些代码，并让它在与服务器的通信中包含该数据。

例如，您可以让 linux 客户端运行`/sbin/ifconfig`并从输出中收集 MAC 地址。您没有指定您使用什么协议进行通信，因此我无法就您收集数据后如何发送数据提供建议。

你为什么要那个？机器甚至可能没有任何 MAC 地址，或者它可能有多个。

# c++ - 对 `boost::chrono::system_clock::now()' 的未定义引用 - Boost 和 cpp-netlib

> ID：11575660
> 
> 赞同：7
> 
> 时间：2012-07-20T08:30:02.570
> 
> 标签：c++, boost, boost-thread, undefined-reference, chrono

我来这里是为了解决让我感到沮丧的情况。很多。首先，我在 Windows 上，我使用 MinGW 作为编译器（C++）。

我在让程序使用 cpp-netlib 和 SSL（尝试 POST 到 https 站点）时遇到了一些问题。我相信一切都井井有条，除了这个不断逃避我的错误。
`C:\boost_1_50_0\boost_1_50_0\stage\lib\libboost_thread-mgw46-mt-1_50.a(thread.o):thread.cpp|| undefined reference to 'boost::chrono::system_clock::now()'`

我确定我已经链接到 chrono 以及 .a 中的所有 .a 库`BOOST_ROOT/stage/lib`。我试过重新排序，所以 chrono 在线程之前链接。没有任何帮助。我已经尝试`BOOST_CHRONO_INLINED`在我的 IDE 设置和多个`conf.hpp`s 中定义它以使其仅成为标题，但这没有帮助。

我很确定这是一个新手问题，我希望有人能给我一个快速的解决方案。我匆忙写了这篇文章，因为我必须在某个地方，但是如果您需要更多信息，请说出来，我回家后会更仔细地写。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T08:37:45.917

> 我试过重新排序，所以 chrono 在线程之前链接。

那是错误的。Boost.Thread 依赖 chrono，所以 chrono 需要在 thread*之后*链接，因此链接器知道需要哪些符号，并且可以找到哪个库定义了它们并链接到它。

# salesforce - Salesforce 如何取消排队的 Apex 未来作业

> ID：11575665
> 
> 赞同：3
> 
> 时间：2012-07-20T08:30:28.490
> 
> 标签：salesforce, apex-code, jobs, future

我工作的组织有一个案例触发器，它调用了一个名为 Cases.cls 的类中的一些代码。我修改了代码，但在尝试部署时，我不断收到错误：待处理的批处理或将来的调用。

我发现 17 个未来的工作正在排队 - 自 2010 年以来！有一个旁边有“中止”的文字，我可以这样做，但我看不出有什么办法可以取消其余的。

我尝试通过开发人员控制台检索其中一项作业，并且成功，但它不允许任何 dml 语句。

有谁知道如何删除排队的作业以便部署更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T15:54:33.247

`System.abortJob(String job_Id)`您是否尝试过使用开发人员控制台中的方法，而不是尝试通过 DML 删除作业记录？（[链接到文档](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_system.htm#abortJob_system_method)）

如果这不起作用，我建议联系 SFDC 支持，因为这很可能是他们方面的内部问题（我们未来的工作通常在被调用后的几秒钟内运行，所以我无法想象会导致工作两年后仍然悬而未决...）

# java - 如何使用 Java 访问 Kinect？

> ID：11575667
> 
> 赞同：10
> 
> 时间：2012-07-20T08:30:30.487
> 
> 标签：java, macos, kinect, processing

我目前正在学习计算机视觉课程，在我的期末项目中，我将制作一个与 Kinect 交互的小游戏。

现在我想用 Java 制作这个游戏，因为我以前从未真正尝试过制作游戏，而且我对这种语言非常熟悉。但我似乎无法找到一种方法来访问深度数据（我只需要将它打包到一些 Java 数据结构中）和 RGB 数据（相同的想法）。

现在，我有办法与 Kinect 进行“对话”。我按照[本](http://openkinect.org/wiki/Getting_Started#OS_X)`glview`教程进行操作，可以使用终端中的命令检测 kinect 。

我有一个叫做[Processing](http://processing.org/)的东西，它承诺是一个 Java 库，让我可以使用 Kinect，但它使用的是它自己的语言，它是使用 Java“构建”的，所以它不是真正的 Java，这意味着我不能使用所有的 GUI 和正常Java 功能。

我想做的是以某种方式`import random.Kinect.code;`在 Java 程序的顶部调用一些，让我使用最基本的 Kinect 功能，如 getDepth() 或 getRGB() 并在 Java 中执行其他所有操作。

有谁知道我可以做到这一点的方法吗？（顺便说一句，我正在运行 MAC OSX Lion）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T10:00:05.140

如果您正在使用处理，我建议使用可用的包装器之一：

*   Daniel Shiffman 的[OpenKinect 处理](http://www.shiffman.net/p5/kinect/)（使用 openkinect/libfreenect）
*   [SimpleOpenNI](http://code.google.com/p/simple-openni/) - 处理 OpenNI 包装器

两者都有很好的文档记录，并包含大量有用的示例。

![simpleOpenNI 示例](../Images/2c4ecbe0a945308e9e834ea8e00a42bb.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-24T01:23:33.850

我有完全相同的问题。我想在 Java 中使用 Kinect 进行计算机视觉研究，并且我有一个像你一样的 Mac OSX Lion。我找到的解决方案是在我的 Mac 中运行 Windows 7 的虚拟副本（使用 VMWare 或 Parallels 或 Microsoft HyperV），然后使用[开源 J4K Java for Kinect 库](http://www.digitalworlds.ufl.edu/angelos/lab/ufdw/j4k/)，这是使用 Java 的 Kinect SDK 的 Java 绑定本机接口 (JNI)。当然，您也可以直接在运行 Windows 的计算机中使用这个开源库。

Kinect 的 J4K Java 库还有一个关于如何用 10 行 Java 代码编写基于 kinect 的应用程序的教程。

还有几个源代码示例向您展示如何从 Kinect 读取深度、视频和骨架数据并在 Java 类中使用它们。您还可以使用多个 Kinect、动画化身和其他示例。源代码示例的链接在[这里](http://www.digitalworlds.ufl.edu/angelos/lab/ufdw/j4k/examples.php)。

下面是开源 Kinect 查看器的屏幕截图，它对像您这样的计算机视觉应用程序很有用：![在此处输入图像描述](../Images/cfb3f12ce94b8e3230d1a54042466ccf.png)

我希望这些信息有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:40:04.533

我会给你一些想法，但我承认 - 我没有用 Kinect 尝试过。
您的问题可以归类为“如何通过 Java 访问某些硬件”的问题。您向我们展示的教程介绍了用于访问 Kinect 的库，甚至是 Python 的包装器。
您可以做的是查看 Python 代码如何实现包装器，并使用 JNI/JNA 构建您自己的包装器。
此外，我查看了@npinti发布的另一个答案中提到的[JNect项目。](http://code.google.com/a/eclipselabs.org/p/jnect/)
eclipse 插件有两部分 -
JNI 代码，它包装了原始 SDK 代码，以及 eclipse 插件本身的 Ecipse RCP 代码。
我建议您忽略 Eclipse RCP 部分，并专注于他们的 JNI 实现，作为您开发自己的 JNI 包装器所需的参考。
即使这是基于 Windows 的实现（例如 - Kinect SDK 在 Windows 上工作，并且您需要在 Mac 上运行代码） - 我认为通过阅读他们的代码 + 一些 JNI 教程 + 链接中的 python 包装器您提供的内容将了解如何为您提供的链接中提供的库创建 JNI 包装器。
此外，考虑使用[JNA](http://jna.java.net/)而不是 JNI 作为与硬件通信的一种方式，我发现它更容易。
最后一个选择可能是使用[Java Script Engine](http://www.theserverside.com/blogs/thread.tss?thread_id=50106)并从您的 java vode 调用 Python 代码（python 包装器） - 不确定它会对您有多大帮助，但您可以试一试。

# ios - iOS 游戏中心组

> ID：11575669
> 
> 赞同：9
> 
> 时间：2012-07-20T08:30:51.637
> 
> 标签：ios, objective-c, app-store-connect, game-center

当我使用`Group Leaderboard`in`Game Center`时，我需要在我的应用程序中枚举的 id 中使用“grp”前缀吗？
换句话说，如果我将设置我现有的游戏以使用`Group Leaderboard`我是否需要在我的应用程序中为每个 id 添加“grp”前缀？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T08:56:02.937

好的，它有效。您可以将现有排行榜移动到组，而无需在应用程序中执行任何更改。

希望我不要破坏 NDA，没有找到任何关于它的信息，除了这个链接 - [http://david-smith.org/blog/2012/06/18/ios-6-nda-cheatsheet/](http://david-smith.org/blog/2012/06/18/ios-6-nda-cheatsheet/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:45:49.183

抱歉，如果我错误地阅读了您的问题。但我相信答案是肯定的。

我在我的游戏中使用了小组排行榜，并提交了这样的分数。

```
 #define LeaderboardID @"grp.yourleaderboardname"

            GKScore *scoreReporter = [[GKScore alloc] initWithCategory:LeaderboardID];
            scoreReporter.value = yourscore;
            [scoreReporter reportScoreWithCompletionHandler:^(NSError *error) {
                if (error != nil) {  
                     NSLog(@"%@", error);
                } else {
                     NSLog(@"%@", @"Success submitting score");
                }
            }];
            [scoreReporter release]; 
```

以前没有使用组排行榜的游戏我的 LeaderboardID 就是这样定义的。

```
#define LeaderboardID @"com.yourcomapny.yourgame.yourleaderboardname" 
```

所以我相信您确实必须更改您的 id 以包含 grp 前缀。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-16T21:34:10.280

答案是肯定的，您确实必须更改为“grp”。字首。这就是 zakhej 可能认为他找到答案的原因：

例如，当您将单个排行榜放入一个组时，该单个排行榜将继续存在。如果您继续使用原始类别 ID 报告分数，您会将它们添加到原始单个排行榜，同时使用“grp.”。前缀会将它们添加到新的分组中，这本质上是您想要做的。简而言之，将排行榜放在一个组中将导致有两个排行榜，每个排行榜都使用自己的类别 ID 进行更新。

因此，看起来原来的类别 ID 将继续有效，但您正在查看旧的单一排行榜。这就是为什么您可能会注意到有时旧的类别 ID 会更新分数，而有时却不会。

解决这个问题花了相当长的时间，但 Apple iTunes Connect 支持以这种方式解释它并且说得通。不更新游戏的玩家将继续向旧排行榜报告分数，并将在游戏中心看到。当他们稍后更新时，他们可能会惊讶地发现他们的高分是您（开发人员）将该排行榜添加到组时的前一个。

本文档对规划 Game Center 实施非常有帮助：[https ://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnectGameCenter_Guide/iTunesConnectGameCenter_Guide.pdf](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnectGameCenter_Guide/iTunesConnectGameCenter_Guide.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-22T08:48:14.173

这个问题有两个不同且相反的答案，所以我想我会表达我自己的经历：

**TL;DR 不要添加`grp.`前缀。**

*   在应用程序上有排行榜，没有 Game Center Group。该应用程序已上线
*   用于`GKGameCenterViewController`显示最高分数效果很好
*   当应用程序上线时，我创建了一个新的 Game Center Group 并将其添加到其中
*   将排行榜 ID 更改为具有组上显示的新 ID，即带有`grp.`前缀
*   我能够将分数发布到排行榜，但是在启动时`GKGameCenterViewController`它没有在我实例化它的排行榜上打开，它只在仪表板上打开，好像它不再识别 ID。
*   将排行榜 id 改回原来的（不带`grp.`），现在我可以再次发布分数，并按`GKGameCenterViewController`预期使用。

**结论**：您可以将id更改为新的，`grp.`是否可以发布分数，结果是一样的，但`GKGameCenterViewController`只有在您使用原始id时才有效。

# android - 没有数据库的Android应用程序升级

> ID：11575670
> 
> 赞同：1
> 
> 时间：2012-07-20T08:30:55.540
> 
> 标签：android, data-migration, auto-update

我有一个*不使用数据库*的应用程序，但它有一些*共享首选项*。在应用程序更新期间，我需要对现有首选项进行一些更改并添加一些新首选项。

通过谷歌搜索我发现，我们可以通过*onUpgrade()*方法处理应用程序升级迁移。但是该方法需要在我的应用程序中不存在的数据库名称。

> 公共无效 onUpgrade（SQLiteDatabase db，int oldVersion，int newVersion）

请建议我在应用程序更新期间升级现有共享首选项的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:38:35.720

从现在开始，在您的共享首选项中存储一个版本号，您可以使用它来准确确定现有共享首选项使用的架构，并从那里做任何需要的事情。

对于当前情况，缺少“模式版本”偏好是您需要做任何您需要做的事情的指标。

（`onUpgrade()`在这种情况下不会帮助你。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:38:43.577

我想你可以这样做

```
SharedPreferences mySharedPreferences=getSharedPreferences("name",mode);
SharedPreferences.Editor editor = mySharedPreferences.edit();
editor.putString(fileName, fileName);
editor.commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:37:01.657

我认为你错了。

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
```

这是[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)类的一个函数。当您升级数据库/增加数据库的版本号时调用它。

# c# - C# 访问修饰符：将某些方法限制为仅一个其他类

> ID：11575673
> 
> 赞同：1
> 
> 时间：2012-07-20T08:31:04.307
> 
> 标签：c#

有点菜鸟问题，但我很好奇，我找不到我的问题的答案：

我有：

```
public class Profile
{
public void methodA(){}
}

public class User
{
private List<Profile> listProfiles;
public void test() { App.Handler.doA(listProfiles[0]);} //let's say we have 1 profile
}

public class Handler
{
public void doA(Profile) { profile.methodA();}
} 
```

我想将 methodA() 的使用限制为仅我的处理程序类，是否可以通过关键字或其他方式？

目的是让一切都通过处理程序。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:33:21.753

您必须嵌套`Handler`在`Profile`类中，并且可以将其设为`methodA`私有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:36:28.407

不可能使用标准方法。您可以使用解决方法：

*   将类嵌套在一起，然后使用私钥。
*   对此类类使用单独的程序集并通过 internal 关键字限制使用

# javascript - 通过下拉列表动态更新总计

> ID：11575677
> 
> 赞同：0
> 
> 时间：2012-07-20T08:31:23.607
> 
> 标签：javascript, jquery

我有点进退两难，我正在努力做到这一点，以便当用户从下拉框中选择一个选项时，它会动态更新同一页面上的总数，而无需重新加载。

换句话说，我在下拉框中有 5 个不同的选项（1、2、3、4、5），如果用户选择 1，它需要通过一个简单的方程式，然后将其输出到“总计”框中是的，我想动态地执行此操作而无需重新加载的问题，任何人都可以给我任何关于我应该使用什么的建议或提示以及任何可能有帮助的教程（代码等......）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:36:40.467

这应该用 Javascript 来完成。我可以推荐使用 jQuery 作为 Javascript 框架[http://jquery.com/](http://jquery.com/)

有了它，做你想做的事情真的很容易：

```
$("select").change(function(){
     var currentValue = parseInt($(this).find("option:selected").val());
     //do whatever calculation e.g
     result = currentValue * 2 + 1;
     //output result somewhere on the page e.g.
     $("#output").html(result);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:37:39.020

// 这是你必须在你的页面中使用 ddl 的 jquery

```
$(document).ready(function () {
        $("#FloorId").change(function () {
            var ddlValue = $(this).val();

                $.getJSON('calculate.php', { "Id": ddlValue }, function (obj) {
                    $("total").text(obj.value);
                });
        });
    }); 
```

在计算页面返回总计

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:45:27.633

如果您不需要将其存储在数据库中，则可以在客户端简单地使用[jquery 。](http://jquery.com)在选择更改时，您从设置了“只读”的输入中检索总数，然后添加用户选择的当前数字。请记住重置选择，否则用户无法添加两次相同的数字：

```
$(document).ready(function(){
    $('select#add').change(function(){
     var  total = parseInt($('input#total').val())+parseInt($(this).val());
     $('input#total').val(total);
        $('select#add option[value=""]').attr('selected', true);
    });
}); 
```

请参阅此[http://jsfiddle.net/3TMK8/](http://jsfiddle.net/3TMK8/)以获取使用 html 的工作示例

# java - 使用从 Servlet 到 JSP 的数据填充选择菜单

> ID：11575682
> 
> 赞同：1
> 
> 时间：2012-07-20T08:31:34.573
> 
> 标签：java, jsp, servlets

我想从数据库中传递一些值以使用各种选择菜单（大约 5 个）填充页面。

我可以使用`JSTL SQL`标签来做到这一点，但这不是一个好习惯。

如何从单个 servlet 获取这些数据？
我可以从一个 servlet 发送多个列表吗？

选择菜单由不同的表填充。我想用来`RequestDispatcher`将列表转发到jsp。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:30:56.947

您可以使用 separate`ArrayList`来存储在 Servlet 中检索到的各种列表，然后将每个列表存储为[@devsundar](https://stackoverflow.com/users/471324/devsundar)提到的请求属性。您可以通过`request`隐式对象在 JSP 中检索这些属性。

如果您只想在单个请求属性中发送所有列表，那么[@KaipaMSarma 的](https://stackoverflow.com/users/713414/kaipa-m-sarma)建议最好有一个`HashMap<String, ArrayList>`，因此您的 servlet 代码可能如下所示：

```
List list1 = getListOneFromDatabase();
List list2 = getListTwoFromDatabase();
List list3 = getListThreeFromDatabase();
// and so on ...

Map<String, List> requestListMap = new HashMap<String, List>();
requestListMap.put("list1", list1);
requestListMap.put("list2", list2);
requestListMap.put("list3", list3);
// and so on ...

request.setAttribute("reqListMap", requestListMap); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:43:06.340

您可以在请求属性中设置数据库中的数据并将其呈现在您的 JSP 中。

[http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setAttribute(java.lang.String](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setAttribute(java.lang.String) , java.lang.Object)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:51:19.763

是的，你可以做到。从您的 servlet 中，您可以访问数据库（任意数量的表）并将结果集存储在集合对象中，并将这些对象作为属性传递给 JSP。

# c# - 在 C# 中将字符串的一部分复制到另一个字符串

> ID：11575683
> 
> 赞同：3
> 
> 时间：2012-07-20T08:31:39.613
> 
> 标签：c#

我正在尝试将部分文本从文本框中复制到另一个字符串。例如，如果我的文本框包含 10 个字符，我想从字符 3 复制到字符 7 到另一个调用 TEST 的字符串。我们该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T08:34:43.413

```
// when textbox contains "ABCDEFGHIJ", the result will be "CDEFG"
string result = textBox.Text.Substring(2, 5); 
```

请记住，这将对短于 7 个字符的字符串抛出异常，因此您可能需要添加一些长度检查。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T08:32:46.723

```
// Start at the 2nd index (0=based index)
// Take  from the 3rd to the 7th character, 
string test = textBox.Text.Substring(2, 5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:36:14.653

我认为您正在寻找的方法是 Substring。使用此方法，您可以获得从某个索引开始的字符串的任何部分。

例如：

```
string test = YourTextBox.Text.Substring(2, 5); 
```

在此示例中，您将在 YourTextBox 中从索引 2 开始获取字符串的 foru 字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:43:00.320

干得好

```
string test = TakePieceFromText("this is my data to work with", 2, 5);

/// <summary>
/// Takes the piece from text.
/// </summary>
/// <param name="text">The text.</param>
/// <param name="startIndex">The start index.</param>
/// <param name="length">The length.</param>
/// <returns>a piece of text</returns>
private string TakePieceFromText(string text, int startIndex, int length)
{
    if (string.IsNullOrEmpty(text))
        throw new ArgumentNullException("no text givin");

    string result = string.Empty;
    try
    {
        result = text.Substring(startIndex, length);
    }
    catch (Exception ex)
    { 
     // log exception
    }
    return result;
} 
```

# facebook - 朋友选择器插件（没有 FBML ？）

> ID：11575684
> 
> 赞同：0
> 
> 时间：2012-07-20T08:31:43.823
> 
> 标签：facebook, multi-friend-selector

由于 fb:friend-selector 页面上的这条消息：

> FBML 已被弃用。从 2012 年 6 月 1 日开始，FBML 应用程序将不再工作，因为所有 FBML 端点都将被删除。如果您在 Facebook.com 上构建新应用程序，请使用 HTML、JavaScript 和 CSS 实现您的应用程序。您可以使用我们的 JavaScript SDK 和社交插件嵌入许多与 FBML 相同的社交功能。

所以为了使用 fb 好友选择器向一些好友发送请求，我必须使用自己的应用程序并使用 SDK 来执行此操作吗？

没有“小部件”可以做到这一点？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:42:37.807

是的，您需要一个 facebook 应用程序来发送请求。

对于发送请求，facebook 提供了一个新的对话框，称为“[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)”，您可以使用 Javascript SDK 的`FB.ui`功能来访问它。

您可能需要在应用程序中重做（或实现）请求处理，因为新的[requests 2.0 API](https://developers.facebook.com/docs/requests/)使开发人员有责任[删除 requests](https://developers.facebook.com/docs/requests/#deleting)。

# jquery - 为什么 $('embed').remove 不起作用？

> ID：11575685
> 
> 赞同：1
> 
> 时间：2012-07-20T08:32:05.317
> 
> 标签：jquery

尝试打鼓直到生成随机名称，然后将其移除并播放欢呼声。

这两个文件都开始正确播放，但由于某种原因，鼓声不会停止。

```
Array.prototype.remove = function(from, to) {
    var rest = this.slice((to || from) + 1 || this.length);
    this.length = from < 0 ? this.length + from : from;
    return this.push.apply(this, rest);
};

$(document).ready(function(){

    var staff = [ 'hardcoded', 'list', 'of', 'staff', 'members' ];

    $('button#start').click( function() {

        $('embed').remove();
        $('body').append('<embed id="drum-roll" src="drum-roll.wav" autostart="true" hidden="true" loop="true">');

        var $display = $('#display'),
            $results = $('#results table');
        $display.removeClass( "winner" );
        $display.addClass( "spinner" );

        var counter = 0,            
            rand = 0,
            run_time = 10,
            delay = ( run_time * 100 ) / staff.length,
            loop_number = 5,
            max_count = staff.length * loop_number;

        $display.doTimeout( 'loop', delay, function() {
            counter++;
            var newRand = Math.floor( Math.random() * staff.length );
            if ( rand === newRand ) {
                rand = Math.floor( Math.random() * staff.length );
            } else {
                rand = newRand;
            }

            $(this).text( staff[rand] );

            if ( counter < max_count ) { return true; }
            else {
                $('#results tr:last').after('<tr><td class="number">' + staff.length + '</td><td>' + staff[rand] + '</td></tr>');
                staff.remove( rand );
                $display.removeClass( "spinner" );
                $display.addClass( "winner" );

                $('embed').remove();
                $('body').append('<embed src="cheering.wav" autostart="true" hidden="true" loop="false">');
            }
        });
    });

}); 
```

任何想法为什么会这样？我猜这与第一个`embed`不在DOM中有关，还是什么？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:44:12.367

如果可以的话，不要尝试删除“嵌入”标签，而是对标签本身的 ID 的引用。

代替：

```
$('embed').remove(); 
```

尝试：

```
$('#drum-roll').remove(); 
```

# r - ggplot2 中带有对数转换坐标的自定义 y 轴标签

> ID：11575694
> 
> 赞同：2
> 
> 时间：2012-07-20T08:32:31.623
> 
> 标签：r, ggplot2

我正在使用 ggplot2 绘制一个漂亮的线图，其下限和上限由 geom_ribbon 提供 - 见下文：

```
ggplot(data = inflow, aes(x = tt, y = inflow.mean)) + geom_line(size = 1) + 
geom_ribbon(eb, alpha = 0.5) + coord_trans(y = "log") 
```

有人可以告诉我如何使 y 轴标签看起来更漂亮吗？

我想展示：`0, 1, 10, 100`等。

注意：在互联网上搜索时，似乎对于 geom_ribbon，coord_trans 必须用于具有对数刻度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:37:38.223

Jase_ - 我按照你的建议包装了我的变量，并使用了我自己包装的 y 轴标签：

```
lab <- log(c(0.01, 1.01, 5.01, 10.01, 20.01, 50.01)) 
names <- c(0,1,5,10,20,50 )
ggplot(data = inflow, aes(x = tt, y = inflow.mean)) + 
  geom_line(size = 1) + geom_ribbon(eb, alpha = 0.5) + 
  scale_y_continuous(breaks = lab, labels = names) 
```

# delphi - Delphi：检测何时创建了新表单

> ID：11575699
> 
> 赞同：3
> 
> 时间：2012-07-20T08:32:57.490
> 
> 标签：delphi, vcl

我想检测何时创建了新表单。

现在我使用该`Screen.ActiveFormChange`事件并检查新表单，`Screen.CustomForms`但在表单事件`ActiveFormChange`之后被触发`OnShow`。

我想在`OnShow`被解雇之前检测到表格。有没有办法在不修改`Vcl.Forms`单元的情况下做到这一点？

我想检测所有表单（还有 Delphi 模态消息等），因此无法从自定义类继承所有表单（如果我错了，请纠正我）。

或者，是否可以检测到某个`TComponent.FComponents`列表中添加了新组件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:08:20.170

您可以使用该[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)函数安装一个`WH_CBT`Hook，然后您必须实现一个[CBTProc 回调](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644977%28v=vs.85%29.aspx)函数并最终截获该钩子的可能代码值之一。在这种情况下，您可以尝试使用`HCBT_ACTIVATE`or `HCBT_CREATEWND`。

检查此示例以获取`HCBT_ACTIVATE`代码。

```
var
 hhk: HHOOK;

function CBT_FUNC(nCode: Integer; wParam: WPARAM; lParam: LPARAM): LRESULT; stdcall;
const
  ClassNameBufferSize = 1024;
var
 hWindow: HWND;
 RetVal : Integer;
 ClassNameBuffer: Array[0..ClassNameBufferSize-1] of Char;
begin
   Result := CallNextHookEx(hhk, nCode, wParam, lParam);
   if nCode<0 then exit;
   case nCode of
     HCBT_ACTIVATE:
     begin
       hWindow := HWND(wParam);
       if (hWindow>0) then
       begin
          RetVal := GetClassName(wParam, ClassNameBuffer, SizeOf(ClassNameBuffer));
          if RetVal>0 then
          begin
            //do something  
            OutputDebugString(ClassNameBuffer);                     
          end;
       end;
     end;
   end;

end;

Procedure InitHook();
var
  dwThreadID : DWORD;
begin
  dwThreadID := GetCurrentThreadId;
  hhk := SetWindowsHookEx(WH_CBT, @CBT_FUNC, hInstance, dwThreadID);
  if hhk=0 then RaiseLastOSError;
end;

Procedure KillHook();
begin
  if (hhk <> 0) then
    UnhookWindowsHookEx(hhk);
end;

initialization
  InitHook();

finalization
  KillHook();

end. 
```

> 注意：如果您改用`HCBT_CREATEWND`代码，您将拦截系统创建的任何窗口，而不仅仅是“表单”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T11:26:51.637

跟踪：`Screen.CustomFormCount`_`Application.OnIdle`

```
 private
    FPrevFormCount: Integer;
  end;

procedure TForm1.ApplicationEvents1Idle(Sender: TObject; var Done: Boolean);
begin
  if Screen.CustomFormCount > FPrevFormCount then
    Caption := Caption + ' +1';
  if Screen.CustomFormCount <> FPrevFormCount then
    FPrevFormCount := Screen.CustomFormCount;
end;

procedure TForm1.TestButton1Click(Sender: TObject);
begin
  TForm2.Create(Self).Show;
end;

procedure TForm1.TestButton2Click(Sender: TObject);
begin
  ShowMessage('Also trackable?');  // Yes!
end;

procedure TForm1.TestButton3Click(Sender: TObject);
begin
  OpenDialog1.Execute; // Doesn't update Screen.CustomFormCount
end; 
```

由 Windows 管理和显示的本机对话框（`TOpenDialog`、`TFontDialog`等...）是在 VCL 之外创建的，并且为了跟踪它们，您需要一个黑客单元。那就试试[这个](https://stackoverflow.com/a/9642293/757830)吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:35:16.697

感谢大卫，我找到了一个解决方案：线索是`Screen.AddForm`用你自己的方法替换方法。这些SO答案中描述了如何做到这一点：

*   [如何修补 delphi 类的私有方法？](https://stackoverflow.com/questions/10156430/how-i-can-patch-a-private-method-of-a-delphi-class)
*   [如何更改外部声明函数的实现（绕道）](https://stackoverflow.com/questions/6905287/how-to-change-the-implementation-detour-of-an-externally-declared-function)
*   [delphi中的补丁例程调用](https://stackoverflow.com/questions/8978177/patch-routine-call-in-delphi)

再次感谢！

# android - 如何将视图添加为 ListView 标题

> ID：11575702
> 
> 赞同：0
> 
> 时间：2012-07-20T08:33:09.817
> 
> 标签：android, listview, header, android-mapview

我有一个扩展谷歌 MapView 的视图。和一个带有项目的 ListView。我需要的是把 MyMapView 作为列表视图的标题。请帮忙怎么办

更新：当我尝试这样做时：

```
LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
ListView list = (ListView) findViewById(R.id.list);
View m = inflater.inflate(R.layout.map, list, false);
list.addHeaderView(m); 
```

我收到一个错误：

> MapViews 只能在 MapActivity 的实例中创建

我认为这是因为我已经从我的活动中删除了我的 xml 布局以将 map 转换为 different.xml

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:52:24.283

尝试这个

*首先创建您的 ListViewHeader.xml*

并这样做

```
ListView lv = getListView(); // Your listView
LayoutInflater inflater = getLayoutInflater();
ViewGroup header = (ViewGroup)inflater.inflate(R.layout.YourHeader, lv, false);
lv.addHeaderView(header, null, false); 
```

看看[Android：将静态标题添加到 ListActivity 的顶部](https://stackoverflow.com/questions/2620177/android-adding-static-header-to-the-top-of-a-listactivity)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:36:48.190

试着打电话

```
ListView.addHeaderView (View v) 
```

在将适配器设置为此 ListView 之前

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:53:50.747

如果您使用的是自定义适配器，则在 getView() 方法中，在位置 0 处提供不同的视图。

```
if(position==0)
{
//Provide header view
}
else  
{
//provide normal row
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T07:56:40.977

您可以执行以下操作以在 android 中将视图添加为 ListView 标头。

```
ListView list = (ListView) findViewById(R.id.list);

LayoutInflater inflater = getLayoutInflater();

ViewGroup viewGroup= (ViewGroup)inflater.inflate(R.layout.YourLayoutFile,list, false);

list.addHeaderView(viewGroup, null, false);

```

# android - 与已启动的服务通信

> ID：11575704
> 
> 赞同：0
> 
> 时间：2012-07-20T08:33:14.357
> 
> 标签：android

我正在尝试使用服务定期从相机捕获图像。为了在活动暂停/停止时保持服务处于活动状态，我应该将其作为启动服务启动 - 这就是我学习服务文档所学到的（我是一个试图学习 Android 的新手）

我如何与服务沟通？说，当我从服务中捕获一些照片时，我想向活动（启动服务）发送一些通知？

PS。我检查了答案[如何服务与其活动通信？Service 如何调用启动该 Service 的 Activity 中的方法？](https://stackoverflow.com/questions/2280845/how-does-a-service-communicate-with-its-activity-how-can-a-service-call-a-metho)在这里，但这不是很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:45:04.640

查看此示例代码。

[http://lalit3686.blogspot.in/2012/06/how-to-update-activity-from-service.html](http://lalit3686.blogspot.in/2012/06/how-to-update-activity-from-service.html)

# php - Jquery Ajax 无法在 IE 上运行

> ID：11575705
> 
> 赞同：0
> 
> 时间：2012-07-20T08:33:18.580
> 
> 标签：php, jquery, ajax, internet-explorer

我在 IE 上遇到了非常奇怪的错误。我使用下面的代码发出 ajax 请求以从数据库中获取数据并使用该数据创建下拉选项`<option>`。问题是在 IE 上数据没有正确显示，它只显示数据的第一个字符，但在其他浏览器上数据显示正确。我也试过打印数据，数据是正确的。所以我怀疑我的 Jquery 选择或追加是错误的，并尝试在 ajax 调用之外附加一些垃圾数据并且数据显示正确，但是我再次将该代码放入 ajax 并且它没有再次显示......我真的没有现在有线索..你能帮我解决这个问题吗？我已经用 FF、Chrome 和 safari 进行了测试，它们都运行良好......

```
$.ajax({

    cache: false,
    type: "POST",
    url: "<?php echo $this->baseUrl(); ?>/rewards/getdiscounttype/",
    data: { esid: estore_id }

}).done(function( data ) {

    var obj = jQuery.parseJSON(data);
    jQuery.each(obj, function (i, app) {

        //alert(i+app['discount_type']);
        var sel = $('select[name=discount_type'+id+']');
        sel.append('<option value="'+app['id']+'">'+app['discount_type']+'</option>');

    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:43:52.237

```
$.ajax({

    cache: false,
    type: "POST",
    url: "<?php echo $this->baseUrl(); ?>/rewards/getdiscounttype/",
    data: { esid: estore_id },
    datatype: "json",
    succes: function(jsonData){
        $.each(jsonData,function(i,app){
            var sel = $('select[name=discount_type'+i+']');
            sel.append('<option value="'+app.id.+'">'+app.discount_type.+'</option>');
        });
    },
    error: function(e){

    }

}) 
```

试试这个，我认为将 JSON 视为 app.id 之类的对象而不是 app['id'] 会更好。没有太多时间做一些测试，你会给我你收到的 json 我可以测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:25:34.587

现在使用 JavaScript！

```
$.ajax({

cache: false,
type: "POST",
url: "<?php echo $this->baseUrl(); ?>/rewards/getdiscounttype/",
data: { esid: estore_id } 

}).done(function( data ) {
    var obj = jQuery.parseJSON(data);

    /* clearing options with JS since jQuery cleare the select in the DOM but enter code   herenot on screen. */
    $('select[name=discount_type'+id+']')[0].options.length = 0;
    $('select[name=discount_type'+id+']').children().remove().end().append('');

    jQuery.each(obj, function (i, app) {
       var sel = $('select[name=discount_type'+id+']');
       sel.append('<option value="'+app.id+'">'+app.discount_type+'</option>');
    });
}); 
```

# java - 了解 Effective Java 记录未检查异常的技巧

> ID：11575708
> 
> 赞同：0
> 
> 时间：2012-07-20T08:33:22.500
> 
> 标签：java, effective-java

来自 Effective Java “**记录所有方法抛出的异常**”

> 应该注意的是，记录每个方法可以抛出的所有未经检查的异常是一种理想，在现实世界中并不总是可以实现。当一个类进行修订时，如果修改导出的方法以引发额外的未经检查的异常，则不违反源代码或二进制兼容性。假设一个类调用另一个独立编写的类的方法。前一个类的作者可能会仔细记录每个方法抛出的所有未经检查的异常，但是如果修改后一个类以抛出额外的未经检查的异常，那么前一个类（没有经过修订）很可能会传播新的未经检查的异常，即使它没有声明它们。

我不明白以前的班级如何传播新的未经检查的例外？Java 语言不要求调用者捕获和传播未经检查的异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:35:08.537

好吧，如果您没有捕获未经检查的异常，它们会自动传播。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:37:19.910

它将准确地传播它，因为异常要么被捕获要么被传播。如果未捕获，则会传播异常：

```
public void caller() {
    callee();
}

public void callee() {
    throw new RuntimeException();
} 
```

在上面的示例中，抛出的异常`callee()`将由`caller()`方法传播，因为`caller()`它不会捕获它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:54:03.517

@Geek ...是的，Java语言不要求处理未经检查的异常，如果您不处理任何未经检查的异常。然后Java虚拟机（JVM）将处理程序执行抛出的所有异常。

If called method does not handle Exception, then Exception will propagate to Calling method. If Calling method does not handle Exception, then Exception will propagate to Java Virtual Machine and default exception handler will come into effect.

# c++ - 如何阅读此运算符声明和实现？

> ID：11575711
> 
> 赞同：1
> 
> 时间：2012-07-20T08:33:38.903
> 
> 标签：c++, operator-keyword

有问题的代码：

```
struct PCArea {
        PCArea(
            int minxx = 0, 
            int minyy = 0, 
            int maxxx = 0, 
            int maxyy = 0
        ) {}
    };

struct NDCVolume {
    NDCVolume() {}

    operator PCArea() const;
};

// how does this operator work? how to use/read it?
NDCVolume ::operator PCArea() const {

    return PCArea(iminx, iminy, imaxx, imaxy); 
} 
```

已从代码段中删除了冗余代码。我使用了 Visual Studio > Find All References，但找不到任何使用它的地方。对我来说，它看起来像一个没有指定返回值的成员方法。

这和下面有什么不同？

```
PCArea NDCVolume::PCArea() const; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:35:03.063

它是一个转换运算符。

如果`NDCVolume NDCVolume::PCArea() const;`它只是一个函数并且不会被隐式使用

如果定义了转换运算符，您可以编写

```
NDCVolume vol;
PCArea area = vol; //implicit conversion 
```

在第二种情况下（使用常规功能），您必须明确说明：

```
NDCVolume vol;
PCArea area  = vol.PCArea(); //explicit conversion
PCArea area2 = vol; //error, if no conversion operator is defined 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:34:45.927

隐式转换运算符到类型 PCArea。

```
PCArea NDCVolume::PCArea() const; 
```

只是函数，不是转换运算符，不能自动使用。

# c# - 如何创建一个像ticker一样的Facebook？

> ID：11575713
> 
> 赞同：0
> 
> 时间：2012-07-20T08:33:48.743
> 
> 标签：c#, javascript, jquery, asp.net, ajaxcontroltoolkit

我正在开发 GPS 跟踪 Web 应用程序，该应用程序显示有关各种功能的信息，例如位置、速度、朝向以及从他的移动设备接收的图像文件。为了使其更具交互性，我想创建一个名为时间线的页面，它可以在自动刷新的 div 中显示更新，例如 1) USer-1 刚刚上传了视频 2) user2 已于 12:00:34 到达德克萨斯州。ETC...

我怎样才能做到……我不是要代码。只需要一些口头帮助和一点指导。我也在互联网上搜索了相同的内容，但所有示例都在 php 中，我需要的是 ASP.net 中的示例或参考。请帮忙。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:38:16.587

构建一个 html5 phonegap 应用程序，您有一个名为 getcurrentlocation 的函数，它可以为您提供纬度+经度数据以及速度等。尝试保存这些数据或将其发布到某个地方，然后在网络应用程序上使用这些数据。之后，您可以使用 google api 将此地理数据转换为实际地址数据（反向地理编码）。

在您的 asp.net 页面中使用 UpdatePanels 在这里您可以放置​​您的“实时”数据，使用此更新面板控件您可以使用定时间隔来刷新面板，例如 2 秒，这样您就可以检查是否有新数据如果是，则每 2 秒更新一次更新面板（即在更新面板内的页面上插入带有数据的新行）。在这个网站上，您会看到一个简单的教程：

[http://msdn.microsoft.com/en-us/library/cc295400.aspx](http://msdn.microsoft.com/en-us/library/cc295400.aspx)

希望这可以帮助

# asp.net - div 没有按预期工作

> ID：11575714
> 
> 赞同：0
> 
> 时间：2012-07-20T08:33:52.870
> 
> 标签：asp.net, html, markup

我正在尝试创建控件行。基本上它是用于过滤搜索。每行有 6 个控件，3 个标签和 3 个下拉列表/文本框。我有一个创建行的 div，第一行结果很好，但其余的真的很奇怪。

**标记如下**

```
<div class="fullRow" style="margin-top:10px">
            <asp:Label ID="FilterDepartmentLabel" AssociatedControlID="FilterDepartment" runat="server" Text="Department" CssClass="aThirdLabel"></asp:Label>
            <asp:DropDownList ID="FilterDepartment" runat="server" CssClass="aThirdInput" />
            <asp:Label ID="FilterCardStatusLabel" AssociatedControlID="FilterCardStatus" runat="server" Text="Status" CssClass="aThirdLabel"></asp:Label>
            <asp:DropDownList ID="FilterCardStatus" runat="server" CssClass="aThirdInput" />
            <asp:Label ID="FilterCardBehaviorLabel" AssociatedControlID="FilterCardBehavior" runat="server" Text="Behavior" CssClass="aThirdLabel"></asp:Label>
            <asp:DropDownList ID="FilterCardBehavior" runat="server" CssClass="aThirdInput" />
        </div>
        <div class="fullRow" style="margin-top:10px">
            <asp:Label ID="FilterCarPlateLabel" AssociatedControlID="FilterCarPlate" runat="server" Text="Car Plate" CssClass="aThirdLabel"></asp:Label>
            <asp:TextBox ID="FilterCarPlate" runat="server" CssClass="aThirdInput"></asp:TextBox>
            <asp:Label ID="FilterCardNoLabel" AssociatedControlID="FilterCardNo" runat="server" Text="Car No" CssClass="aThirdLabel"></asp:Label>
            <asp:TextBox ID="FilterCardNo" runat="server" CssClass="aThirdInput"></asp:TextBox>
            <asp:Label ID="FilterRuleSetCodeLabel" AssociatedControlID="FilterRuleSetCode" runat="server" Text="Rule Set" CssClass="aThirdLabel"></asp:Label>
            <asp:DropDownList ID="FilterRuleSetCode" runat="server" CssClass="aThirdInput" />
        </div>
        <div class="fullRow" style="margin-top:10px">
            <asp:Label ID="FilterDriverLastNameLabel" AssociatedControlID="FilterDriverLastName" runat="server" Text="Driver Lastname" CssClass="aThirdLabel"></asp:Label>
            <asp:TextBox ID="FilterDriverLastName" runat="server" CssClass="aThirdInput"></asp:TextBox>
            <asp:Label ID="FilterCardTypeLabel" AssociatedControlID="FilterCardType" runat="server" Text="Type" CssClass="aThirdLabel"></asp:Label>
            <asp:DropDownList ID="FilterCardType" runat="server" CssClass="aThirdInput" />
        </div> 
```

**这是CSS**

```
.fullRow
{
    width: 100%;
    display:block;
}

.aThirdLabel
{
    width: 15%;
    float: left;
    font-size:small;
    height: 22px;
}

.aThirdInput
{
    width: 15%;
    float: left;
} 
```

实际上，尽管这在 VS2010 的设计视图中看起来不错，但当它加载到浏览器中时，却是一团糟。

谢谢

**编辑：答案在 huMpty duMpty 的评论中。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:03:42.557

`<div style="clear:both;"></div>`在每一行之后添加。

# c# - FileUpload 控件在第二次单击时起作用，但不是第一次尝试保存已发布的文件？

> ID：11575716
> 
> 赞同：6
> 
> 时间：2012-07-20T08:33:58.640
> 
> 标签：c#, asp.net, file-upload, postback, asyncpostbackerror

[我的问题](https://stackoverflow.com/questions/11559762/fileupload-control-not-working-outside-ajax-update-panel-but-works-inside-wi/11560109#11560109)

我设法回答自己，但是同一组功能还有另一个问题。出于某种原因，已发布文件的保存事件的第一次回发命中了未设置为对象错误实例的 Ol' 对象，但在第二次尝试上传文件并触发我的保存事件时（转换为 byte[]存储为 SQL Server BLOB）它完成了所有应该做的事情。

[这里同样的问题](https://stackoverflow.com/questions/8388340/fileupload-updatepanel-does-not-work-on-first-click)

有一个使用 AJAX AsyncUpload 控件的好建议，但是我坚信消除原因而不是解决问题。我将继续沿着这条路线走下去，以最好地理解 asp.net 等。

你们中是否有一个向导可以帮助我确定为什么我在第一次回发时得到“object ref not set to inst of obj”错误，但在第二次它工作正常。内容页面有一个母版页，它将内容页面包装在更新面板中。这不是我的决定。还有一个更新面板，其中包含针对我的保存事件的回发触发器。

你的想法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T09:13:42.277

问题（如在这里看到的[http://forums.asp.net/t/1060363.aspx](http://forums.asp.net/t/1060363.aspx)）似乎是当您在周围面板上使用可见性属性时（因为您似乎来自链接的问题）。

建议的解决方法是改用 CSS 可见性，因此使用它使其不可见 -

```
<asp:Panel ID="pnlUpload" runat="server" class="workerDetailsPanelLeft" style="display:none"> 
```

线程对此的解释是

> 如果您的容器设置为不可见，则上传控件实际上并未呈现为 HTML，导致表单的 enctype 未设置为 enctype="multipart/form-data"，导致文件上传控件无法将所选文件回传到服务器。解决方法是确保 FileUpload 控件呈现为 HTML（通过将其样式设置为 display:none 而不是 Visible=false），或者通过手动设置 enctype

因此，另一种解决方法是将您的表单标签更改为此

```
<form id="form1" enctype="multipart/form-data" runat="server"> 
```

我认为其中任何一个都可以解决您的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-08T05:37:37.180

您可以通过 Page_Load 事件上的代码执行相同的操作。输入此代码，它将解决问题。

```
Page.Form.Attributes.Add("enctype", "multipart/form-data"); 
```

# json - 具有不同网站结构的 Json

> ID：11575717
> 
> 赞同：1
> 
> 时间：2012-07-20T08:34:02.897
> 
> 标签：json, web-crawler

我正在编写一个内容收集程序，它将简单地读取指定网页上的数据，并将其保存以供以后分析。我不需要它来搜索链接或相关数据，只需从网站收集所有数据。内容每天都会改变并不重要。问题是网站的结构是否正在发生变化。是否有任何可能性或产品可以监控指定网站上的结构变化并以某种方式呈现它们？

如何轻松解析具有相同内容类型但结构不同的 JSON/XML-s？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:38:19.767

对于解析，您可以将 Json.NET 和 JObject 用于不同的结构

# php - PHP如何列出类的所有公共函数

> ID：11575724
> 
> 赞同：18
> 
> 时间：2012-07-20T08:34:34.193
> 
> 标签：php, class

我听说过，`get_class_methods()`但是 PHP 中有没有办法从特定类中收集所有公共方法的数组？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-20T08:40:44.820

是的，你可以，看看反射类/方法。

[http://php.net/manual/en/book.reflection.php](http://php.net/manual/en/book.reflection.php)和 [http://www.php.net/manual/en/reflectionclass.getmethods.php](http://www.php.net/manual/en/reflectionclass.getmethods.php)

```
$class = new ReflectionClass('Apple');
$methods = $class->getMethods(ReflectionMethod::IS_PUBLIC);
var_dump($methods); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-20T08:44:06.427

由于[`get_class_methods()`](http://php.net/get_class_methods)是范围敏感的，您只需从类的范围外调用函数即可获取类的所有公共方法：

所以，上这门课：

```
class Foo {
    private function bar() {
        var_dump(get_class_methods($this));
    }

    public function baz() {}

    public function __construct() {
        $this->bar();
    }
} 
```

`var_dump(get_class_methods('Foo'));`将输出以下内容：

```
array
  0 => string 'baz' (length=3)
  1 => string '__construct' (length=11) 
```

虽然来自类 ( ) 范围内的调用`new Foo;`将返回：

```
array
  0 => string 'bar' (length=3)
  1 => string 'baz' (length=3)
  2 => string '__construct' (length=11) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-20T08:40:57.823

获得所有方法后，`get_class_methods($theClass)`您可以通过以下方式循环它们：

```
foreach ($methods as $method) {
    $reflect = new ReflectionMethod($theClass, $method);
    if ($reflect->isPublic()) {
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T08:38:48.553

你有没有尝试过这种方式？

```
$class_methods = get_class_methods(new myclass());

foreach ($class_methods as $method_name) {
    echo "$method_name\n";
} 
```

# ruby-on-rails - 有范围的solr自动完成是可能的吗？

> ID：11575727
> 
> 赞同：1
> 
> 时间：2012-07-20T08:34:51.667
> 
> 标签：ruby-on-rails, solr, sunspot

我正在研究**solr**配置的东西，并试图弄清楚如何实现自动完成功能。

这里提到的一些细节[http://wiki.apache.org/solr/Suggester/](http://wiki.apache.org/solr/Suggester/)

但我不想为所有站点使用相同的字典——当你有一些私人数据时它没有用。我的意思是有几家公司使用搜索，我只想根据公司数据进行自动完成。是否可以使用某些语法来限制自动完成结果的范围。

我正在使用**Rails 3**和**sunspot gem**和**solr 3.6**

**更新：**

**我找到了为rails 3**更新的 gem，这里记录了必要的配置是[https://github.com/xponrails/sunspot_autocomplete](https://github.com/xponrails/sunspot_autocomplete)

**两个答案都帮助我做到这一点**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:23:16.480

不幸的是，无法过滤通过`Suggester`. 你可能想看看我写的[这个博客](http://www.searchworkings.org/blog/-/blogs/different-ways-to-make-auto-suggestions-with-solr)，看看你有其他选择。您应该考虑使用文章中描述的构面前缀或 NGrams 解决方案。我猜 Ngrams 解决方案更灵活，性能更高，但会导致索引大小的增长，而 facet 前缀方法已经准备好使用，但可能会更慢。试一试，看看你更喜欢哪一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:35:32.957

我正在使用 EdgeNgram 字段并对它进行自动完成查询。

在您的 schema.xml 中是这样的：

```
<field name="title_auto" type="edge_ngram" indexed="true" stored="true" multiValued="false" /> 
```

查询“测试”看起来像

```
Jul 20, 2012 12:28:58 PM org.apache.solr.core.SolrCore execute
INFO: [collection1] webapp=/solr path=/select/ params={spellcheck=true&sort=date+desc fl=*+score&start=0&q=title_auto:(test)&spellcheck.count=1&spellcheck.collate=true&wt=json hits=0 status=0 QTime=2 
```

即使我使用第三方应用程序向 Solr (Django-Haystack) 发送查询，上述查询应该与您正在寻找的类似。

# javascript - 如何使用 datajs 进行同步 OData 请求？

> ID：11575728
> 
> 赞同：2
> 
> 时间：2012-07-20T08:34:52.823
> 
> 标签：javascript, ajax, odata, synchronous, datajs

我有一个 URI 列表，在遍历该列表时，我通过 OData.read() 发送 OData GET 请求。

我的问题是这些调用是异步的，我希望它们是*同步*的。有没有办法做到这一点？

据我所知， OData.read() 的给定参数不允许这样做。但也许有某种解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:14:44.900

我通过使用递归函数解决了这个问题，当收到前一个响应时，恰好触发下一个 ajax 请求。

# java - 具有持久性的 HTTP POST 请求的非阻塞队列

> ID：11575734
> 
> 赞同：14
> 
> 时间：2012-07-20T08:35:15.603
> 
> 标签：java, android, asynchronous, message-queue

在我们开发自定义解决方案之前，我正在寻找某种库，它提供：

*HTTP 请求的非阻塞队列*

具有以下属性：

*   在以下情况下持续请求以避免丢失：
    *   网络连接中断
    *   应用程序退出，后台应用程序强制GC
    *   ETC..
*   推出所有这些领域的可能性：
    *   地址
    *   标头
    *   发布数据

那么请问，有什么有用的知道吗，有什么可以节省我们一整天的时间来开发这个？

现在我们不需要对完成的请求进行任何回调，也不需要保存结果数据，因为不会有这样的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T11:15:49.177

在我看来，一个好的和直接的解决方案是使用复杂的连接处理框架（例如**Netty** [https://netty.io/](https://netty.io/) ）开发自己的层（不应该那么复杂） ，以及复杂的异步处理框架，如**Akka** [http://akka.io/](http://akka.io/)

让我们首先在[http://static.netty.io/3.5/guide/#architecture.8了解](http://static.netty.io/3.5/guide/#architecture.8)**Netty**对 http 的支持：

4.3\. HTTP 实现

HTTP 绝对是 Internet 中最流行的协议。已经有许多 HTTP 实现，例如 Servlet 容器。那么为什么 Netty 在其核心之上有 HTTP 呢？

Netty 的 HTTP 支持与现有的 HTTP 库有很大不同。它使您可以完全控制在低级别交换 HTTP 消息的方式。因为它基本上是 HTTP 编解码器和 HTTP 消息类的组合，所以没有强制线程模型等限制。也就是说，您可以编写自己的 HTTP 客户端或服务器，完全按照您想要的方式工作。您可以完全控制 HTTP 规范中的所有内容，包括线程模型、连接生命周期和分块编码。

现在让我们深入**了解 Akka**。Akka 是一个在 Java 并发 API 之上提供出色抽象的框架，它带有 Java 或 Scala 中的 API。

*   它为您提供了一种将应用程序构建为**参与者**层次结构的清晰方法：
    *   Actors 通过消息传递进行通信，使用不可变消息，因此您不必关心线程安全
    *   Actors 消息存储在消息框中，可以持久
    *   演员有责任监督他们的孩子
    *   Actor 可以在一个或多个 JVM 上运行，并且可以使用多种协议进行通信
*   它为异步处理提供了一个轻量级的抽象**Future**，它比 Java Futures 更容易使用。
*   它提供了其他花哨的东西，例如事件总线、ZeroMQ 适配器、远程支持、数据流并发、调度程序

* * *

一旦你熟悉了这两个框架，你就会发现你需要的东西可以很容易地通过它们进行编码。

实际上，您需要的是一个用 Netty 编码的 http 代理，它在收到请求后立即向**FSM**类型的**Akka Actor**发送消息（http://doc.akka.io/docs/akka/2.0.2/java /fsm.html) 使用**持久邮箱**(http://doc.akka.io/docs/akka/2.0.2/modules/durable-mailbox.html)

 ***** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T20:12:30.370

[这](https://www.assembla.com/code/ltprotocol/subversion/nodes)是一个开源库的链接，该库是布拉格捷克技术大学一名学生的硕士论文。它是一个非常大且功能强大的库，主要关注位置。不过，它的好处是它省略了 REST 所具有的标头和其他内容。

这是最新的分支，希望它至少能给你“自己的”解决方案的灵感。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T23:08:39.117

那些并发集合怎么样：

[http://mcg.cs.tau.ac.il/projects/concurrent-data-structures](http://mcg.cs.tau.ac.il/projects/concurrent-data-structures)

我希望许可证没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T20:43:08.940

你会想看看这些帖子。（在文件末尾添加）

基本上，一种对我来说非常有效的方法是将请求与队列和执行程序分开。请求作为 Runnables 或 Callables 执行。从它们继承以创建对您的 API 或服务的不同类型的请求。在执行它们之前将它们设置在那里添加标题和/或正文。

将这些请求排入队列中（选择更适合您的 - 我会说[LinkedBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)将完成这项工作）从绑定服务中链接到执行程序，并从您的活动或任何其他范围调用它们。如果您不需要获取响应和回调，您可以避免使用 Guava 来监听期货或创建自己的回调。

我会继续关注。如果您需要更多深度，我可以发布一些特定的代码。不过，第一个链接中有一个基本示例的来源。

[http://ugiagonzalez.com/2012/08/03/using-runnables-queues-and-executors-to-perform-tasks-in-background-threads-in-android/](http://ugiagonzalez.com/2012/08/03/using-runnables-queues-and-executors-to-perform-tasks-in-background-threads-in-android/)

[http://ugiagonzalez.com/2012/07/02/theres-life-after-asynctasks-in-android/](http://ugiagonzalez.com/2012/07/02/theres-life-after-asynctasks-in-android/)

更新：

您可以为那些无法执行的请求创建另一个队列。我想到的一种方法是将所有失败的请求添加到重试队列中。当手机仍然认为有任何类型的互联网连接可用时，重试队列将尝试重新运行这些任务。在请求对象中，您可以设置最大重试次数，并将其与每次重试时增加的 currentRetry 数进行比较。嗯，这可能很有趣。我肯定会考虑将其包含在我的图书馆中。****

# c# - 内存中的二维数组

> ID：11575735
> 
> 赞同：2
> 
> 时间：2012-07-20T08:35:15.600
> 
> 标签：c#, arrays, memory

> **可能重复：**
> [数组内存分配 - 分页](https://stackoverflow.com/questions/7900677/array-memory-allocation-paging)

是否`byte[,] myArray`总是在连续的内存块中？

我有一些代码可以处理存储在这样的数组中的图像，一切正常，但我只是问一下。

编辑：我使用不安全的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:36:46.470

是的，它一直存在，在记忆中，并且会被连续记住。

看看：[真正的不安全代码性能](https://stackoverflow.com/questions/5374815/true-unsafe-code-performance)

而且msdn说你可以不用考虑就可以使用：http: [//msdn.microsoft.com/en-us/library/28k1s2k6%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/28k1s2k6%28v=vs.80%29.aspx)

# cassandra - 赫克托书（高级教程）

> ID：11575739
> 
> 赞同：2
> 
> 时间：2012-07-20T08:35:27.010
> 
> 标签：cassandra, hector

有没有任何关于[赫克托](http://hector-client.github.com/hector/build/html/index.html)的书，或者任何高级教程？

我问是因为据我所知官方文档已经过时，并且有很多未记录的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:05:01.577

我能理解你的沮丧。更好的解决方案是了解[Cassandra 的 API](http://wiki.apache.org/cassandra/API/)和[数据模型](http://wiki.apache.org/cassandra/DataModel)。赫克托只是一个包装器。然后阅读一些使用 Hector 的开源项目。

# android - 如何创建一个配置页面，我可以从中路由到 Android 中的不同活动？任何样本来源都很棒

> ID：11575744
> 
> 赞同：0
> 
> 时间：2012-07-20T08:35:36.397
> 
> 标签：android, config

我想创建一个需要一个页面的 Android 应用程序，我可以从该页面启动不同的活动，例如配置计时器、关于页面主页等。如何创建一个配置页面，我可以从中路由到 Android 中的不同活动？任何样本来源都很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:47:23.047

更珍贵地解释你的问题.....用不同的按钮制作一个页面。并且对于每个按钮**setOnClickListener**。在 Onclick 事件中的每个 OnClickListener 中，通过制作 Intent 对象来启动 newActiviy。像...

```
Button btListe = (Button)findViewById(R.id.Button_Liste);
    btListe.setOnClickListener(new OnClickListener() 
    {   public void onClick(View v) 
        {   
            intent = new Intent(main.this, ListViewImage.class);
            startActivity(intent);      
            finish();
        }
    }); 
```

# sql - SQL 复制列并更改数据类型

> ID：11575748
> 
> 赞同：1
> 
> 时间：2012-07-20T08:36:05.757
> 
> 标签：sql, types, clob, type-conversion, tablespace

我有一个已经填充的表。

我需要将一列的数据类型从 LONG 更改为 CLOB

但是，此数据库由第三方托管，并且表空间有限。

我知道命令：

```
ALTER TABLE myTable MODIFY my_data CLOB 
```

但是，经过长时间的等待，我收到了错误消息：

```
ORA-01652: unable to extend temp segment by 128 in tablespace 
```

增加表空间不是一种选择。

有什么变通办法吗？

我可以创建一个数据类型为 CLOB 的新列，然后从 my_data ( LONG) 复制和转换数据，而不会耗尽表空间吗？我可以关闭撤消以提供帮助吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:42:17.357

我想说最好的选择是使用新数据类型创建一个新列，根据旧列更新它，然后删除旧列，但是由于您遇到空间问题，这可能不是一个选项。

或者你可以尝试在一系列沐浴中做到这一点。例如，将 10000 行数据移动到新列，然后将这 10000 行的旧值设置为 null 以释放一些空间。

# ios - 从不同的视图控制器访问变量

> ID：11575749
> 
> 赞同：-1
> 
> 时间：2012-07-20T08:36:06.223
> 
> 标签：ios, xcode, uitableview, variables, storyboard

我开发了一个应用程序，使用`TableView`连接到带有搜索栏的 SQLite 数据库，一切正常。
我有一个详细视图控制器，它向我显示有关单击行的信息。如何将变量从`AuthorVC.m`to传递`Details.m`？

部分代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{   
    NSLog(@"prepareForSegue: %@", segue.identifier);  
    if ([segue.identifier isEqualToString:@"Details"]) 
        // segue.identifier value here   
    {      
        Details *dv = segue.destinationViewController;
        dv.labelText.text = author.title;
        //  author.title = dv.labelText.text ;
        // your value to pass     

        [segue.destinationViewController setLabelText:author.title];     
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:55:59.823

做这个：

```
Create property of variable in myDetails to pass data
Suppose i have NSString *strAuthoTitle in myDetails

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{ 
 //Depending upon cell index pass your data differently
 myDetails *objmyDetails = [myDetails alloc] initWithNib:@"myDetails" bundle:nil] //alloc your controller for navigation 

 objmyDetails.strAuthoTitle = [yourArrayofAuthorTile objectAtIndex:indexPath.row];

 //Simarly other data can be passed
} 
```

正如你没有提到你正在使用故事板，所以你需要在 AuthorVC 和 Details 控制器之间创建一个 segue 并使用该 segue

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
 {   
  //NSLog(@"prepareForSegue: %@", segue.identifier);      
  if ([segue.identifier isEqualToString:@"DetailsPass"]) // segue.identifier value here
  {
   objmyDetails = segue.destinationViewController;
   objmyDetails.strText =lblText.text; // your value to pass
   //[segue.destinationViewController setStrText:lblText.text];
  }   
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:58:19.363

假设您的详细VC中有2个属性，`strName`并且`strDescription`...

与在堆栈中推送详细的VC 之前相比，您可以简单地执行以下操作：

```
detailedVCObject.strName = @"whatever";
detailedVCObject.strDescription = @"whatever"; 
```

希望它会有所帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:53:29.720

带故事板

[如何将序列 ios5 故事板 uitableview 中的数据传递到详细视图](https://stackoverflow.com/questions/7937035/how-pass-data-in-seque-ios5-storyboard-uitableview-to-detail-view)

[http://kurrytran.blogspot.in/2011/10/ios-5-storyboard-and.html](http://kurrytran.blogspot.in/2011/10/ios-5-storyboard-and.html)

* * *

没有故事板为此，您必须访问第一类中的变量，例如，单击表格行时，您必须在另一个视图上导航，例如根视图。因此，为此在根视图中定义一个变量，并在您在表的 didselect 方法中创建对象时访问该视图。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

RootViewController *rvController = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:[NSBundle mainBundle]];

//Increment the Current View
rvController.CurrentLevel += 1;

//Set the title;
rvController.CurrentTitle = [dictionary objectForKey:@"Title"];

//Push the new table view on the stack
[self.navigationController pushViewController:rvController animated:YES];

[rv release]
} 
```

# jquery - JQuery Plugin Tutorial - init 以外的方法如何访问选项？

> ID：11575752
> 
> 赞同：0
> 
> 时间：2012-07-20T08:36:09.997
> 
> 标签：jquery, jquery-plugins

在[jQuery 插件教程](http://docs.jquery.com/Plugins/Authoring)中，show()、hide() 或 update() 等其他方法如何访问 init() 中传递的选项？在 init() 中处理它以便其他方法可以访问它的正确方法是什么？

```
(function( $ ){

  var methods = {
    init : function( options ) { // THIS },
    show : function( ) { // IS   },
    hide : function( ) { // GOOD },
    update : function( content ) { // !!! }
  };

  $.fn.tooltip = function( method ) {

    // Method calling logic
    if ( methods[method] ) {
      return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    

  };

})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:41:15.500

在我的插件中，我总是使用以下方式访问选项：

```
this.options 
```

但是...我使用不同的方法...

```
(function ($) {
    $.widget("my.plugin", {
        options: {
            op1: "op1"
        },
        _init: function () {

        },
        _create: function () {

        },
        show: function () {
        }
    });
})(jQuery); 
```

# xslt - XSL 根据元素值删除前面的同级

> ID：11575764
> 
> 赞同：1
> 
> 时间：2012-07-20T08:36:47.857
> 
> 标签：xslt

您好我需要帮助解析以下 XML。

```
<xmeml>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
    </Test>
    <Test>
        <Unit>bcd</Unit>
        <Unit2>2345</Unit2>
    </Test>
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>3456</Unit2>
    </Test>
    <Test>
        <Unit>cde</Unit>
        <Unit2>3456</Unit2>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
    </Test>
    <Test>
        <Unit>def</Unit>
        <Unit2>4567</Unit2>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
    </Test>
    <Test>
        <Unit>efg</Unit>
        <Unit2>2345</Unit2>
    </Test> 
</Doc>
</xmeml> 
```

以以下结束

```
<xmeml>
<Doc>
    <Test>
        <Unit>bcd</Unit>
        <Unit2>2345</Unit2>
    </Test>
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>3456</Unit2>
    </Test>
    <Test>
        <Unit>cde</Unit>
        <Unit2>3456</Unit2>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>def</Unit>
        <Unit2>4567</Unit2>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
    </Test>
    <Test>
        <Unit>efg</Unit>
        <Unit2>2345</Unit2>
    </Test> 
</Doc>
</xmeml> 
```

我正在尝试创建一个 XSLT 文档来执行此操作，但尚未找到一个有效的文档。我应该注意到 are 中所需的匹配参数，在本例中为“abc”，是变量，永远不会是静态可搜索实体。

所以用英文我的 XSL 会是这样的：对于任何包含匹配“Unit”值的父级，删除所有前面的父级“Test”，其中包含“Unit”中的重复值，除了最后一个。

非常感谢所有帮助谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:11:21.573

您可以使用标识模板复制整个文档，并使用您要删除的元素的空模板覆盖该模板。为了检查一个`<Test>`元素是否应该被删除，您可以将其`<Unit>`值与以下兄弟元素的值进行比较。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/xmeml/Doc/Test[(Unit = following-sibling::Test/Unit) or (Unit = ../following-sibling::Doc/Test/Unit)][descendant::Unit2[starts-with(.,'1234')]]"/>

</xsl:stylesheet> 
```

由于以下值如何出现有两种可能性，因此`<Unit>`这两个条件都被显式编写并与`or`条件中的运算符连接。

这两种可能性及其各自的 XPath 条件是：

*   `<Test>`在与当前元素相同的父元素中的后续元素中：
    `Unit = following-sibling::Test/Unit`
*   在当前元素`<Test>`的后续`<Doc>`兄弟元素中`<Doc>`：
    `Unit = ../following-sibling::Doc/Test/Unit`

假设这个输入：

```
<xmeml>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
    </Test>
    <Test>
        <Unit>bcd</Unit>
        <Unit2>2345</Unit2>
    </Test>
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>3456</Unit2>
    </Test>
    <Test>
        <Unit>cde</Unit>
        <Unit2>3456</Unit2>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
    </Test>
    <Test>
        <Unit>def</Unit>
        <Unit2>4567</Unit2>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
    </Test>
    <Test>
        <Unit>efg</Unit>
        <Unit2>2345</Unit2>
    </Test> 
</Doc>
</xmeml> 
```

XSLT 创建以下输出：

```
<xmeml>
  <Doc>
    <Test>
      <Unit>bcd</Unit>
      <Unit2>2345</Unit2>
    </Test>
  </Doc>
  <Doc>
    <Test>
      <Unit>abc</Unit>
      <Unit2>3456</Unit2>
    </Test>
    <Test>
      <Unit>cde</Unit>
      <Unit2>3456</Unit2>
    </Test>
  </Doc>
  <Doc>
    <Test>
      <Unit>def</Unit>
      <Unit2>4567</Unit2>
    </Test>
  </Doc>
  <Doc>
    <Test>
      <Unit>abc</Unit>
      <Unit2>1234</Unit2>
    </Test>
    <Test>
      <Unit>efg</Unit>
      <Unit2>2345</Unit2>
    </Test>
  </Doc>
</xmeml> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:16:46.217

在 XSLT 1.0 中执行分组有两种不同的方法——简单，使用`preceding::`or`following::`轴，以及更有效的 Muenchian 分组方法——使用键。

**这是更有效的 Muenchian 方法：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:key name="kParentByUnit" match="Test[Unit]" use="Unit"/>

     <xsl:template match="node()|@*" name="identity">
         <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
         </xsl:copy>
     </xsl:template>

     <xsl:template match="Test[Unit]">
       <xsl:if test=
       "generate-id()
       =
        generate-id(key('kParentByUnit', Unit)[position()=last()])">

        <xsl:call-template name="identity"/>
       </xsl:if>
     </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<xmeml>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>1234</Unit2>
        </Test>
        <Test>
            <Unit>bcd</Unit>
            <Unit2>2345</Unit2>
        </Test>
    </Doc>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>3456</Unit2>
        </Test>
        <Test>
            <Unit>cde</Unit>
            <Unit2>3456</Unit2>
        </Test>
    </Doc>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>1234</Unit2>
        </Test>
        <Test>
            <Unit>def</Unit>
            <Unit2>4567</Unit2>
        </Test>
    </Doc>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>1234</Unit2>
        </Test>
        <Test>
            <Unit>efg</Unit>
            <Unit2>2345</Unit2>
        </Test>
    </Doc>
</xmeml> 
```

**产生了想要的正确结果**：

```
<xmeml>
   <Doc>
      <Test>
         <Unit>bcd</Unit>
         <Unit2>2345</Unit2>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>cde</Unit>
         <Unit2>3456</Unit2>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>def</Unit>
         <Unit2>4567</Unit2>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>abc</Unit>
         <Unit2>1234</Unit2>
      </Test>
      <Test>
         <Unit>efg</Unit>
         <Unit2>2345</Unit2>
      </Test>
   </Doc>
</xmeml> 
```

# javascript - 在 webOS 中注册 JavaScript 服务

> ID：11575769
> 
> 赞同：0
> 
> 时间：2012-07-20T08:37:08.677
> 
> 标签：javascript, webos, palm

我正在玩掌上模拟器，试图创建一个简单的 JavaScript 服务。我没有使用 palm-install 方法，而是为我的服务创建所需的目录和文件。当我用 luna-send 测试我的服务时，它不会被识别（因为我猜它没有在 luna-bus 上注册）。如果我重新启动模拟器它可以工作。

我想知道是否有任何方法可以在不重新启动模拟器的情况下向 luna 注册我的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:01:57.320

为什么在使用它们之前不发送启动服务请求来创建你的目录？而且 Palm 的做法与 MediaCapture api 相同（当您开始录制时，该服务将自动创建目录）

请求服务很简单：

```
new Mojo.Service.Request("palm://momo.im.app.service.node/", {
            method: "chatSend",
            parameters: {
                auth: Global.authInfo,
                //chat: JSON.stringify(chat)
                chat: chat
            },
            onSuccess: function() {},
            onFailure: function(fail) {
                Mojo.Log.error('send chat fail' + JSON.stringify(chat));
                Global.keepAuth();
            }
        }); 
```

如果您仍然不知道服务是如何工作的，请查看我在 github 上的应用程序源代码：[momo for webOS - node.js service part](https://github.com/momoim/momo-for-webOS/tree/master/service)

# asp.net - 为什么在进行异步回发时不显示 gridview 的 selectedrowstyle？

> ID：11575770
> 
> 赞同：0
> 
> 时间：2012-07-20T08:37:16.783
> 
> 标签：asp.net, ajax, gridview, updatepanel

我有一个包含选择命令字段的网格视图。

我还有一个包含详细信息视图的更新面板。

网格视图位于更新面板之外。

我希望当按下选定的按钮时，gridview 的选定行可以更改颜色，并在不刷新页面的情况下在详细信息视图中显示详细信息。

这是我的代码：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="Column1" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:CommandField HeaderText="details" ShowSelectButton="True" />
            <asp:BoundField DataField="Column1" HeaderText="Column1" SortExpression="Column1" />
        </Columns>
        <SelectedRowStyle BackColor="#FFFFFF" />
    </asp:GridView>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" DataKeyNames="Column1" DataSourceID="SqlDataSource2"  Height="50px" Width="125px">
                <Fields>
                    <asp:BoundField DataField="Column1" HeaderText="Column1" InsertVisible="False" ReadOnly="True" SortExpression="Column1" />
                    <asp:BoundField DataField="Column2" HeaderText="Column2" SortExpression="Column2" />
                </Fields>
            </asp:DetailsView>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="GridView1" />
        </Triggers>
    </asp:UpdatePanel> 
```

问题是gridview在更新面板之外时不会改变所选行的颜色。我知道当我将它移动到更新面板中时它会起作用，但我想知道为什么会发生这种情况。

谢谢。

忘记了最重要的事情：

```
 <asp:SqlDataSource ID="SqlDataSource2" runat="server"  ConnectionString="<%$ ConnectionStrings:MyConnectionString %>" 
        SelectCommand="SELECT * FROM Products WHERE (Column1=@Column1)">
                <SelectParameters>
                    <asp:ControlParameter ControlID="GridView1" Name="Column1" PropertyName="SelectedValue" />
                </SelectParameters>
      </asp:SqlDataSource> 
```

我认为这就是不当行为的根源所在……但我仍然不知道为什么……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:43:39.450

是的，我的错，我只是复制了你的场景，我发现的原因实际上很简单。

首先，使用 的异步回发`UpdatePanel` **只会刷新其子控件**（这就是它们被称为部分渲染帖子的原因）。`UpdatePanel`不会刷新外部的控件。

正如你提到的：

> 我知道当我将它移动到更新面板中时它会起作用，但我想知道为什么会发生这种情况。

乍一看，我认为`GridView`应该做一个完整的回发，但不，那是因为你添加了这个控件作为触发器`UpdatePanel`

原因是您正在从 的`GridView`触发器中注册所有事件`UpdatePanel`，并且您正在使用它来注册它，`<asp:AsyncPostBackTrigger ControlID="GridView1" />`这会导致所需的效果，`GridView`异步触发事件以刷新`UpdatePanel`，并且由于在`GridView`外部*，*因此不会刷新

您可以更改此行为，解决问题，但您的页面将执行**完整的回**发：

```
<asp:PostBackTrigger ControlID="GridView1" /> 
```

提醒一下（对你和我 =p），我们需要记住，每当我们将控件注册为 an 的触发器时`UpdatePanel`，它的事件将被*捕获*以便异步发送，有时会导致不渲染的不良影响源代码控制，如果它在`UpdatePanel`

# c# - 使用 htmlagilitypack 提取文本和图像

> ID：11575771
> 
> 赞同：0
> 
> 时间：2012-07-20T08:37:18.327
> 
> 标签：c#, html, c#-4.0, html-parsing

我正在从网页中提取内容。在网页中，电话号码和电子邮件 ID 等信息存储在图像中。我想提取图像以及该表中的文本。在输出字符串中，我希望输出与在网页中显示图像和文本的方式相同。

以下是网页内容。

```
<table>
<tr>
   <td>text</td>
   <td><img src="" /></td>
</tr>
<tr>
   <td>text</td>
   <td><img src="" /></td>
</tr>
<tr>
   <td>text</td>
   <td><img src="" /></td>
</tr>
</table> 
```

我可以像这样提取文本和图像吗：

> 文字图片
> 
> 文字图片
> 
> 文字图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:51:31.313

```
HtmlDocument doc = new HtmlDocument();
doc.Load("file.htm");
HtmlNode imgNode = doc.DocumentElement.selectSingleNode("/table/tr/td/img");

//Just get Images only
foreach (HtmlNode img in doc.DocumentElement.SelectNodes("//img"))
{
  string imgSrc = img.Attributes["src"].Value;
}

//get td's and ignore img in it
foreach (HtmlNode td in doc.DocumentElement.SelectNodes("//td"))
{
  HtmlNode img = td.ChildNodes["img"];
  if(img == null)
  {
    string tdText = td.InnerText;
  }
}

//Get Images that have style attribute
foreach (HtmlNode img in doc.DocumentElement.SelectNodes("//img[@style]"))
{
  string style = img.Attributes["style"].Value.ToLower();
  style = style.Replace("background:url('", "");
  style = style.Replace("')", "");
 //now you have the image url from the background

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:48:54.327

尝试这个

```
foreach (HtmlNode img in root.SelectNodes("//img"))
{
    string att = img.Attributes["src"].Value;
    anchorTags.Add(att);
} 
```

# objective-c - 在 UITableViewCell 中点击识别 UIImageView

> ID：11575779
> 
> 赞同：25
> 
> 时间：2012-07-20T08:37:45.693
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, uigesturerecognizer

目前我遇到了一个问题，我想在我的 UITableViewCell 上的 UIImageView 被点击时执行操作。

**问题：**我该怎么做？任何人都可以给我看代码或任何教程吗？

提前致谢！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-20T10:22:16.453

这实际上比你想象的要容易。您只需要确保在 imageView 上启用用户交互，并且可以向其添加轻击手势。这应该在实例化单元格时完成，以避免将多个点击手势添加到同一图像视图中。例如：

```
- (instancetype)initWithCoder:(NSCoder *)aDecoder
{
    if (self = [super initWithCoder:aDecoder]) {
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myTapMethod:)];

        [self.imageView addGestureRecognizer:tap];
        [self.imageView setUserInteractionEnabled:YES];
    }

    return self;
}

- (void)myTapMethod:(UITapGestureRecognizer *)tapGesture
{
    UIImageView *imageView = (UIImageView *)tapGesture.view;
    NSLog(@"%@", imageView);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T10:26:11.673

试试这个

```
//within cellForRowAtIndexPath (where customer table cell with imageview is created and reused)
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleImageTap:)];
tap.cancelsTouchesInView = YES;
tap.numberOfTapsRequired = 1;
[imageView addGestureRecognizer:tap];

// handle method
- (void) handleImageTap:(UIGestureRecognizer *)gestureRecognizer 
{
    RKLogDebug(@"imaged tab");
} 
```

确保你有....

```
imageView.userInteractionEnabled = YES; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T08:43:43.907

您可以使用 customButton 代替 UIImageView

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:51:29.520

轻击手势识别器可能会占用大量内存，并可能导致页面上的其他内容中断。我个人建议您创建一个自定义表格单元格，在自定义单元格框架中插入一个按钮，然后在表格视图代码中将 self.customtablecell.background.image 设置为您想要的图像。这样，您可以为按钮分配一个 IBaction 以使其推送到您想要的任何视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-27T14:43:44.973

使用[ALActionBlocks](https://github.com/lavoy/ALActionBlocks "ALA 动作块")在块中执行操作

```
__weak ALViewController *wSelf = self;
imageView.userInteractionEnabled = YES;
UITapGestureRecognizer *gr = [[UITapGestureRecognizer alloc] initWithBlock:^(UITapGestureRecognizer *weakGR) {
    NSLog(@"pan %@", NSStringFromCGPoint([weakGR locationInView:wSelf.view]));
}];
[self.imageView addGestureRecognizer:gr]; 
```

# java - 序列化/反序列化列表

> ID：11575785
> 
> 赞同：0
> 
> 时间：2012-07-20T08:38:14.083
> 
> 标签：java, android

我要将一个字符串数组列表保存到本地数据库的 1 列中。我在这样做时遇到了一些问题。谁能告诉我哪里出错了...

```
private String serializeArray(List<String> array) {
    try {
        ByteArrayOutputStream bytesOut = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(bytesOut);
        oos.writeObject(array);
        oos.flush();
        oos.close();
        return Base64.encodeToString(bytesOut.toByteArray(), Base64.NO_WRAP);
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
}

private ArrayList<String> deserializeArray(String string) {
    Log.d("USERDAO", string);
    try {
        ByteArrayInputStream bytesIn = new ByteArrayInputStream(Base64.decode(string, Base64.NO_WRAP));
        ObjectInputStream ois = new ObjectInputStream(bytesIn);
        return (ArrayList<String>) ois.readObject();
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

在反序列化数组上返回 Arraylist 时出现空指针异常。serialiseArray 方法确实返回一个字符串，但我不确定它是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:15:14.537

当我在 Eclipse 中运行它时，我在这一行得到 java.lang.ClassCastException：

```
return (ArrayList<String>) ois.readObject(); 
```

readObject() 方法试图返回一个 Arrays$ArrayList （不管是什么），而你的演员导致它中断。如果您将反序列化的强制转换和返回类型更改为 List，您会发现一切正常。

# html - HTML5 应用程序缓存 - SSL 和跨域 - 任何解决方法？

> ID：11575790
> 
> 赞同：1
> 
> 时间：2012-07-20T08:38:22.603
> 
> 标签：html, ssl, cross-domain, cache-manifest, html5-appcache

来自[http://appcachefacts.info/](http://appcachefacts.info/)：

> 通过 SSL，清单中的所有资源都必须遵守同源策略。谷歌浏览器是个例外，它在这方面没有遵循规范。通过 SSL，Chrome 将加载来自不同来源的资源，只要它们仍然通过 SSL 提供服务。

我真的很想从靠近用户的 CDN 加载图像、css 和 javascripts 等静态资产，并避免仅仅因为我使用 HTTPS 而从我的网络服务器提供它们

有什么办法可以解决这些安全限制？

我的目标：

主要 html 加载自：[https](https://mydomain.com) ://mydomain.com 。

资产加载自：[https](https://cdn.mydomain.com) ://cdn.mydomain.com （子域但来源不同..）

我目前使用的 Appcache 文件，但似乎不适用于 safari 和 iOS iphone：

```
CACHE MANIFEST

CACHE:
https://cdn.mydomain.com/main.css
https://cdn.mydomain.com/main.zepto.js

NETWORK:
/
* 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T10:54:02.067

不幸的是，不，抱歉，根据[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)，目前唯一允许跨域缓存的浏览器是 Chrome，这只是因为它们故意不遵守同源策略。如果你想让你的离线站点专门为 chrome 用户提供，你可以做双服务器，否则你必须坚持使用一个，直到不同的浏览器提出新的策略。

如果你想变得棘手，你可以尝试在你的资产服务器上运行一个 jQuery 到一个 html 文件，在那里加载清单，但我怀疑这在离线使用期间会起作用。

# css - 水平对齐 div 的 css 定位

> ID：11575791
> 
> 赞同：1
> 
> 时间：2012-07-20T08:38:27.227
> 
> 标签：css

我正在使用以下 HTML [（也在这个小提琴中）](http://jsfiddle.net/kgVKw/5/)。

```
<div id="block1" class="Box"  style="width: 15%; height: 67; overflow-n: scroll;">
    block 1
</div><br/>
<TABLE CLASS="BODY" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" RULES="NONE"> table 1 </TABLE>
<div id="block2" style="width: 20%; height: 67;top: 0; position: absolute;left: 25%;">
    block 2
</div> <br/> 
<table CLASS="BODY" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" RULES="NONE" > table 2</table>
<div id="block3" style="width: 22%; height: 67;top: 0; position: absolute;left: 50%;">
    block 3
</div><br/>
<table CLASS="BODY" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" RULES="NONE" > table 3</table>
<div id="block4" style="width: 25%;top: 0;  position: absolute;left: 75%; height: 67; display: inline-block;">
    block 4
</div><br/>
<table CLASS="BODY" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" RULES="NONE" > table 4</table> 
```

我希望名为 block 1 block 2 block 3 block 4 的四个块水平地出现而不改变桌子的位置。

现在很好。所有的块都在正确的位置。

但是，如果存在其他一些 div，例如可以将其粘贴`<div> position </div>` 到小提琴的顶部。只有块 1 自动进入下一行，因为我力求为块 1 提供定位。我希望其他块 2、3、4 也可以进来行，如果存在一些 div。我们可以通过任何 CSS 属性来实现这一点吗？

注意：每个 Div 下有 4 个不同的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:48:17.540

这是因为你有 block2 - 4 绝对定位。这会将它们带出元素流，忽略开头的 div。

使用`float`或`display:inline-block`水平对齐 div，而不忽略“在它们前面”的任何标记。或者，您可以使用具有`position:relative`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:49:59.277

[http://jsfiddle.net/kgVKw/6/](http://jsfiddle.net/kgVKw/6/) 那是你想要实现的吗？您的代码非常过分，您所需要的只是如果是这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:50:06.157

这是[**myFiddle**](http://jsfiddle.net/czFfV/)只是用一个 div 定位相对..

# forms - 如何将表单数据提交到我的服务器并同时触发 PayPal Pay Now 按钮

> ID：11575793
> 
> 赞同：1
> 
> 时间：2012-07-20T08:38:30.263
> 
> 标签：forms, jquery

我正在使用 PayPal Pay Now 按钮让用户为产品付款。单击该按钮时，我还想向我的服务器发送一些数据。因此，我通过 jQuery Ajax 将这些值发送到我的服务器。不幸的是，这有时会起作用，有时页面转到 PayPal 的速度太快，无法发送表单值，而且它们永远不会被保存。

jQuery 代码看起来像这样

```
//...
function sendUserDetailsByAjax(orderId){

var name = $("#name").val();
var email = $("#email").val();
var arrivalTime = $("#arrivalTime").val();

$.ajax({
    type: "POST",
    url: "/order/updateuser",
    data: { 'orderId': orderId, 'name': name, 'email': email, 'arrivalTime': arrivalTime   },
    success: function(data){
    }
}); 
$('#payWithPaypal').submit();   
}
//... 
```

这些是表单域：

```
<input id="arrivalTime" type="text" size="12" class="checkoutInput"/>
<input id="name" type="text" size="32" class="checkoutInput"/>
<input id="phone" type="text" size="32" class="checkoutInput"/> 
```

这是 PayPal 表单（${something} 元素是应用程序的变量：

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" id="payWithPaypal">
  <input type="hidden" name="cmd" value="_xclick" />
  <input type="hidden" name="business" value="${place.payPalEmail}" />
  <input type="hidden" name="item_name" value="My Order" />
  <input type="hidden" name="amount" value="${order.total}" />
  <input type="hidden" name="currency_code" value="AUD" />
  <input type="hidden" name="lc" value="AU" />
  <input type="hidden" name="button_subtype" value="products" />
  <input type="hidden" name="return" value="http://mysite.com/${order.id}"/>
  <input type="hidden" name="cancel_return" value="http:/mysite.com/cancel/${order.id}" />
  <input type="hidden" name="notify_url" value="http://mysite.com?oid=${order.id}" />
  <input type="hidden" name="oid" value="${order.id}" />
  <input type="image" onclick="javascript:sendUserDetailsByAjax('${order.id}');" src="https://www.paypal.com/en_US/i/btn/x-click-but5.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />
</form> 
```

您对我如何确保`arrivalTime`,`name`和`email`在按钮将页面重定向到 PayPal 之前发送有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:48:03.537

您可以移动 PayPal 提交操作以在您的第一个表单提交成功完成时执行。因此，您可以触发 sendUserDetailsByAjax 函数以使 paypal 提交在第一个表单提交之后发生，这样两者都会一个接一个地成功发生。

```
function sendUserDetailsByAjax(orderId){

    var name = $("#name").val();
    var email = $("#email").val();
    var arrivalTime = $("#arrivalTime").val();

    $.ajax({
        type: "POST",
        url: "/order/updateuser",
        data: { 'orderId': orderId, 'name': name, 'email': email, 'arrivalTime': arrivalTime   },
        success: function(data){
              $('#payWithPaypal').submit();
        }
    }); 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:57:52.190

`("form").serialize`是一种以您页面中包含的任何形式向您的服务器发送信息的方法。

您可以获得有关该主题的大量教程。

# php - 将 PHP 数组存储在单个 SQL 单元格中

> ID：11575799
> 
> 赞同：8
> 
> 时间：2012-07-20T08:38:40.483
> 
> 标签：php, mysql, sql, arrays

如果某个项目作为数组或类似数据类型存储在我的 SQL 数据库中并且无法找到有关该主题的满意信息，我希望将成分存储

在 PHP 中，信息将存储为`ingredient["$id"]=true or false`，其中 $id 代表一种成分

所以对于普通面包（请注意，这主要还是伪代码，因为数据输入端尚未启动）

```
//code that creates array this bit is still theory and will be manually emulated in the db for the time being
    $id=1;
    while (isset ($_POST["ingredient part of form".$ID])){
        if ($_POST["ingredient".$id]==checked){
            $p["ingredient"][$id]=true;
        }
        else{
            $p["ingredient"][$id]=false
        }
    $id++;
    }

//the code that gets the values back for the ingredient name we will use a separate array ingredient_n[$id]
echo p[$prod_id]["item"].': '
$id=1
while (isset ($ingredient[$id])){
    if ($p[$prod_id]["ingredient"][$id]==true)
        if ($id!=1){
            echo ', ';
        }
        echo $ingredient_n[$id];
    }
}
echo '.'; 
```

这应该产生类似的东西

“普通面包：小麦粉、水、盐、酵母。”

我查看了 ENUM 和 SET 但这会使添加新成分变得更加困难

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T08:40:06.013

从主题来看（将 PHP 数组存储在单个 SQL 单元中），您应该对其进行序列化。有标准化的方法

```
$array["a"] = "Hello";
$array["b"] = "World";
$array["c"] = "!";

$str = serialize($array);

// The contents of $str
// a:3:{s:1:"a";s:5:"Hello";s:1:"b";s:5:"World";s:1:"c";s:1:"!";} 
```

反向使用反序列化

```
$unserializedString = unserialize($str); 
```

您可以将它用于数组和对象。

*   [http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T08:45:41.927

> 如果我的 SQL 数据库中的项目作为数组或类似数据类型无法找到有关该主题的满意信息，我希望将成分存储

如果序列化数据是面向数据库问题的答案，那么您很可能问错了问题。[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的数据库，您可能会将成分插入到单独的表中，使用 JOIN 检索它们。这使您的数据库更易于使用、更易于搜索和更易于维护。

那就是说；在某些情况下，存储序列化字符串实际上是最可行的解决方案，但这种情况似乎并非如此。

# wordpress - wordpress 检查是否有多个用户 id 登录

> ID：11575806
> 
> 赞同：0
> 
> 时间：2012-07-20T08:38:59.607
> 
> 标签：wordpress

我正在寻找一种方法来检查某些用户 ID 是否已登录。我真的不想为这些用户创建多个角色，因此我正在寻找解决方案。

这是我到目前为止所拥有的：

```
<?php if ( is_user_logged_in() ) {
 $current_user = wp_get_current_user();
 if (array(375,378,379,619,764,801,1 == $current_user->ID )) {
  echo 'Sorry you cant view this information.';
 } else {
   echo 'Hello Admin';
 }
}

?> 
```

有人可以让我知道我哪里出错了吗？

干杯丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:45:40.647

PHP语法以及您检查数组的方式无效

```
if ( is_user_logged_in() ) {
    $current_user = wp_get_current_user();
    if (!in_array($current_user->ID, array(375,378,379,619,764,801,1))) {
         echo 'Sorry you cant view this information.';
    } else {
         echo 'Hello Admin';
    }
} 
```

我真的不认为你应该这样做，但是，如果更新覆盖了这个怎么办？在我看来，您将暴露管理内容。我建议您花 5 分钟时间来创建这些角色，而不是用您显然不太了解的语言编写快速 hack。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:41:23.253

检查这个然后让我知道——

```
 <?php
$current_user = wp_get_current_user();
if ( 0 == $current_user->ID ) {
    // Not logged in.
} else {
    // Logged in.
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:49:43.207

尝试将 is_user_logged_in() 中的 retval 保存在 var 中，例如：

```
$exist = is_user_logged_in();
if($exist) //if 1/true user exist. 
```

# javascript - Expressjs 不会破坏会话

> ID：11575807
> 
> 赞同：7
> 
> 时间：2012-07-20T08:39:03.410
> 
> 标签：javascript, node.js, session, express

我有一个主干视图，它向服务器发送 Ajax 调用以删除会话。

在服务器上触发以下事件：

```
app.delete('/session', function(req, res) {
    if (req.session) {
        req.session.destroy(function() {
            res.clearCookie('connect.sid', { path: '/' });
            res.send('removed session', 200);
        });
    } else {
        res.send('no session assigned', 500);
    }
}); 
```

奇怪的是，我可以多次按下注销按钮而不会收到 HTTP 500 错误代码。铬也向我展示了一个 cookie 仍然存在。

出了什么问题？

问候

**编辑**：

我发现这不是直接的会话问题，而是 cookie 问题。我在路由中添加了 res.clearCookie。不幸的是行为（cookie，会话保持活动）没有改变

**EDIT2**：我现在给 res.clearCookie 一些参数 => res.clearCookie('connect.sid', { path: '/' }); 现在至少cookie在浏览器中消失了。但是会话似乎仍然可用。或者至少我可以调用注销路由我想要的频率，甚至 req.session 应该是假的

**EDIT3：** 我现在从 redis 中删除了所有会话并重新启动了所有内容（redis、节点、浏览器）。比我再次登录并注销。到目前为止这有效，但是当我用 F5 重新加载页面时，我得到了一个新会话。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T15:47:51.587

为了将所有评论集中在一起，我写了一个答案：

因为 express 总是为客户端创建会话和 cookie，所以我们必须采取不同的方法，而不仅仅是检查是否存在会话。

这部分处理登录

```
app.post('/session', function(req, res) {
    User.findOne({ username: req.body.username })
        .select('salt') // my mongoose schema doesn't fetches salt
        .select('password') // and password by default
        .exec(function(err, user) {
            if (err || user === null) throw err; // awful error handling here
            // mongoose schema methods which checks if the sent credentials
            // are equal to the hashed password (allows callback)
            user.hasEqualPassword(req.body.password, function(hasEqualPassword) {
                if (hasEqualPassword) {
                    // if the password matches we do this:
                    req.session.authenticated = true; // flag the session, all logged-in check now check if authenticated is true (this is required for the secured-area-check-middleware)
                    req.session.user = user; // this is optionally. I have done this because I want to have the user credentials available
                    // another benefit of storing the user instance in the session is
                    // that we can gain from the speed of redis. If the user logs out we would have to save the user instance in the session (didn't tried this)
                    res.send(200); // sent the client that everything gone ok
                } else {
                    res.send("wrong password", 500); // tells the client that the password was wrong (on production sys you want to hide what gone wronge)
                }
            });
        });
}); 
```

那是登录部分，让我们去注销：

```
app.delete('/session', function(req, res) {
    // here is our security check
    // if you use a isAuthenticated-middleware you could make this shorter
    if (req.session.authenticated) {
        // this destroys the current session (not really necessary because you get a new one
        req.session.destroy(function() {
            // if you don't want destroy the whole session, because you anyway get a new one you also could just change the flags and remove the private informations
            // req.session.user.save(callback(err, user)) // didn't checked this
            //delete req.session.user;  // remove credentials
            //req.session.authenticated = false; // set flag
            //res.clearCookie('connect.sid', { path: '/' }); // see comments above                res.send('removed session', 200); // tell the client everything went well
        });
    } else {
        res.send('cant remove public session', 500); // public sessions don't containt sensible information so we leave them
    }
}); 
```

希望这可以帮助

# c# - HiddenField1 值为空

> ID：11575811
> 
> 赞同：0
> 
> 时间：2012-07-20T08:39:30.077
> 
> 标签：c#, .net

我尝试在我的页面上添加表单 jquery。我有这段代码：

```
<form id="form" class="blocks" action="form.aspx" method="post">
    <p>
        <label>Name:</label>
        <input type="text" class="text" id="name1"  name="name"  />
    </p>
<input runat="server" type="submit" class="btn" onclick="return xy();"  value="Submit"/>
            </p>
</form>

<form id="form1" runat="server" action="form.aspx" method="post">
    <asp:HiddenField ID="HiddenField1" runat="server" />
</form> 
```

和这个：

```
function xy()
{
    $("#HiddenField1").val($("#name1").val());
    alert($("#HiddenField1").val());
} 
```

此警报正常工作，我想在 C#`HiddenField1.Value`中使用。`string`我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    string string1 = HiddenField1.Value;
} 
```

`string1`是`null`。为什么会这样`null`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:42:59.093

这取决于。您必须首先调用函数 xy() 以使 HiddelField1.value 具有值。我看不出你叫它。

像这样：

```
protected void Page_Load(object sender, EventArgs e)
{
    //call xy() here
    string string1 = HiddenField1.Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:15:39.297

您只需将 Hidden 变量移动到与提交按钮相同的表单中，然后删除第二个表单标签。因此，您的 HTML 应更改为如下所示：

```
<form id="form" class="blocks" action="WebForm1.aspx" method="post" runat="server">
<asp:HiddenField ID="HiddenField1" runat="server" />
<p>
    <label>
        Name:</label>
    <input type="text" class="text" id="name1" name="name" />
</p>
<input id="Submit1" runat="server" type="submit" class="btn" onclick="return xy();"
    value="Submit" />
</form> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T08:42:40.040

您可以使用 jquery text() 函数

```
function xy() {
  $("#HiddenField1").val($("#name1").text());
} 
```

# iphone - 如何在iphone的UItextfield中显示xml解析数据

> ID：11575832
> 
> 赞同：0
> 
> 时间：2012-07-20T08:40:14.460
> 
> 标签：iphone, xml-parsing, uitextfield, uilabel

我能够解析 xml 数据并能够在控制台中显示它，但无法`UITextField`在`UILabel`.

我也尝试在`viewDidLoad`方法中分配给文本字段。

以下是我的代码，

```
NSMutableString *currentNodeContent;
NSXMLParser *parser;
ViewController *currentProfile;
bool isStatus;

ViewController *xmlParser;

-(id)loadXMLByURL:(NSString *)urlString
{
    _profile = [[NSMutableArray alloc] init];
    NSURL *url = [NSURL URLWithString:urlString];
    NSData *data = [[NSData alloc] initWithContentsOfURL:url];
    parser = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];
    return self;
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if([elementName isEqualToString:@"profileinfo"])
    {
        currentProfile = [ViewController alloc];
        isStatus = YES;
    }

    if([elementName isEqualToString:@"first_name"])
    {
        currentProfile = [ViewController alloc];
        isStatus = YES;
    }
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"first_name"])
    {
        currentProfile.firstName = currentNodeContent;
        NSLog(@"%@",currentProfile.firstName);
        first_Name.text = currentNodeContent;//UITextField
        first_name.text = currentNodeContent;//Label

    }
    if([elementName isEqualToString:@"last_name"])
    {
        currentProfile.lastName = currentNodeContent;
         NSLog(@"%@",currentProfile.lastName);
        last_Name.text = currentProfile.lastName;
    }
    if([elementName isEqualToString:@"profileinfo"])
    {
        [self.profile addObject:currentProfile];
        currentProfile = nil;
        currentNodeContent = nil;
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    xmlParser = [[ViewController alloc] loadXMLByURL:@"http://www.mxxxxx.net/xxx/xxxxx.aspx?type=proifileinfo&loginid=xxx@gmail.com"];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:44:38.763

不是将值直接分配给“UITextField”或“UILabel”，而是将值存储在字符串中。并且当解析动作完成后，将字符串值赋给'UITextField'或'UILabel'；可能你应该在'-viewWillAppear'方法中这样做:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:52:42.533

我在解析 XML 解析器时也遇到了同样的问题。

```
currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

您正在使用上面的行来修剪空格和制表符。但有时它不起作用。

所以，我实现了以下代码。该代码可能对您有用。

```
NSString *sname = [currentNodeContent stringByReplacingOccurrencesOfString:@"\n" withString:@""];

NSString *actualString = [sname stringByReplacingOccurrencesOfString:@"\t" withString:@""]; 
```

然后传递`actualString`给你需要的任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:56:53.557

创建一个 IBOutlet UILabel *label; 在界面中，在Interface Builder中连接，然后可以通过label.text = @"Anything";

# php - PHP：需要使用 [a-zA-Z0-9] 进行解释

> ID：11575833
> 
> 赞同：3
> 
> 时间：2012-07-20T08:40:18.090
> 
> 标签：php, regex, pcre

我是 PHP 新手（不是整体编程），并且对这行简单的代码有问题。我想检查某些输入字段是否已填写为 anysymbolornumber@anysymbolornumber 只是为了检查是否输入了正确的电子邮件。我没有收到任何错误，但整个检查系统不起作用。这是我的代码，谢谢！

```
 if ($email = "[a-zA-Z0-9]@[a-zA-Z0-9]")
{ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T08:45:23.767

由于您是 php 新手，我建议您应该购买一本书或阅读一两个教程。

对于电子邮件验证，您应该使用 php 5.2 及更高版本附带的 filter_var 内置函数：

```
<?php
if(!filter_var("someone@example....com", FILTER_VALIDATE_EMAIL)){
    echo("E-mail is not valid");
}else{
   echo("E-mail is valid");
}
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T08:44:44.203

你可以使用其他函数..而不是正则表达式

```
if(filter_var($email,FILTER_VALIDATE_EMAIL)){
 echo "Valid email";
}else{
 echo "Not a valid email";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T08:42:58.993

正如评论中正确指出的那样，您使用的正则表达式实际上并不是验证电子邮件的好方法。有很多更好的方法，但如果您只是想了解正则表达式的工作原理，这是一个起点。我不是正则表达式方面的专家，但这至少会让你的 if 语句起作用:)

```
if(preg_match("[a-zA-Z0-9]@[a-zA-Z0-9]",$email)
{
    // Your stuff
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T08:50:19.363

您似乎正在尝试验证电子邮件地址是否与特定模式匹配。但是您没有使用正确的功能。您可能想要类似`preg_match( $pattern, $target )`.

此外，你的正则表达式并没有做你想做的事。特别是，您需要一些量词，否则您的电子邮件地址将只能由 前面的一个字符`@`和后面的一个字符组成。而且您需要在序列的开头和结尾使用锚点，以便您匹配整个地址，而不仅仅是最接近`@`.

考虑一下：

```
if( preg_match("^[a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+$", $email ) ) {
    // Whatever
} 
```

但是请记住，这实际上是一种穷人验证电子邮件地址的方法。电子邮件地址可以包含比我提供的字符类中列出的字符多得多的字符。此外，还可以构造具有相同字符类别的无效电子邮件地址。它甚至还没有开始处理 Unicode。使用正则表达式验证电子邮件地址非常困难。Friedl 在 Mastering Regular Expressions (O'Reilly) 中对此进行了尝试，他的努力采用了 2KB 的正则表达式模式。充其量，这只是一个基本的健全性检查。这不是验证电子邮件地址的安全方法。在最坏的情况下，它实际上错过了有效的正则表达式，并且仍然匹配无效的正则表达式。

有[mailparse_rfc822_parse_addresses](http://us.php.net/manual/en/function.mailparse-rfc822-parse-addresses.php)功能，在检测和匹配电子邮件地址方面更可靠。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T08:44:17.937

您需要使用 preg_match 来运行正则表达式。

现在您将 $email = 设置为正则表达式。

它可能看起来像：

```
if ( preg_match("[a-zA-Z0-9]@[a-zA-Z0-9]", $email )) 
```

在匹配时还要记住，如果您必须使用`==`运算符。

我相信最好的做法是使用 filter_var 代替：

```
if( ! filter_var( $email , FILTER_VALIDATE_EMAIL )) {
 // Failed.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T08:44:35.997

另一种方式取自：[http ://www.linuxjournal.com/article/9585](http://www.linuxjournal.com/article/9585)

```
function check_email_address($email) {
  // First, we check that there's one @ symbol, 
  // and that the lengths are right.
  if (!ereg("^[^@]{1,64}@[^@]{1,255}$", $email)) {
    // Email invalid because wrong number of characters 
    // in one section or wrong number of @ symbols.
    return false;
  }
  // Split it into sections to make life easier
  $email_array = explode("@", $email);
  $local_array = explode(".", $email_array[0]);
  for ($i = 0; $i < sizeof($local_array); $i++) {
    if
(!ereg("^(([A-Za-z0-9!#$%&'*+/=?^_`{|}~-][A-Za-z0-9!#$%&
↪'*+/=?^_`{|}~\.-]{0,63})|(\"[^(\\|\")]{0,62}\"))$",
$local_array[$i])) {
      return false;
    }
  }
  // Check if domain is IP. If not, 
  // it should be valid domain name
  if (!ereg("^\[?[0-9\.]+\]?$", $email_array[1])) {
    $domain_array = explode(".", $email_array[1]);
    if (sizeof($domain_array) < 2) {
        return false; // Not enough parts to domain
    }
    for ($i = 0; $i < sizeof($domain_array); $i++) {
      if
(!ereg("^(([A-Za-z0-9][A-Za-z0-9-]{0,61}[A-Za-z0-9])|
↪([A-Za-z0-9]+))$",
$domain_array[$i])) {
        return false;
      }
    }
  }
  return true;
} 
```

# c# - c# Microsoft.Office.Interop.Excel 导出

> ID：11575835
> 
> 赞同：1
> 
> 时间：2012-07-20T08:40:27.107
> 
> 标签：c#, performance, excel

我正在编写一个使用 C# 语言`DataSet`等的程序。我有大约 200 000 个值要导出到 .xlsx 文档。

我的代码：

```
using Excel = Microsoft.Office.Interop.Excel;
...
Excel.Application excelApp = new Excel.Application();
Excel.Workbook excelworkbook = excelApp.Workbooks.Open(/location/);
Excel._Worksheet excelworkSheet = (Excel.Worksheet)excelApp.ActiveSheet;
...
excelApp.visible = true;
...
for (int i = 0; i < /value/; i++)
 for (int j = 0; j < /value/; j++) 
  excelworkSheet.Cells[i, j] = /value/; 
```

它运作良好，但速度太慢（至少 5-10 分钟）。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:21:38.507

对于 Excel，我只编写了 VBA，因此我无法为您提供如何在 C# 中执行此操作的确切语法。

不过我注意到的是，您正在做一些我注意到很多人都想尝试的事情：
分别为 Excel 中的每个单元格编写代码。与在内存中执行的操作相比，读/写操作相当慢。

将一组数据传递给一个函数，该函数在一个步骤中将所有这些数据写入定义的范围会更有趣。在这样做之前，您当然需要正确设置范围的尺寸（等于数组的大小）。

但是，这样做时，应该提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T10:16:55.993

我只是受到了同样的性能打击，写了这个来做基准测试：

```
[Test]
public void WriteSpeedTest()
{
    var excelApp = new Application();
    var workbook = excelApp.Workbooks.Add();
    var sheet = (Worksheet)workbook.Worksheets[1];
    int n = 1000;
    var stopwatch = Stopwatch.StartNew();
    SeparateWrites(sheet, n);
    Console.WriteLine("SeparateWrites(sheet, " + n + "); took: " + stopwatch.ElapsedMilliseconds + " ms");

    stopwatch.Restart();
    BatchWrite(sheet, n);
    Console.WriteLine("BatchWrite(sheet, " + n + "); took: " + stopwatch.ElapsedMilliseconds + " ms");

    workbook.SaveAs(Path.Combine(@"C:\TEMP", "Test"));
    workbook.Close(false);
    Marshal.FinalReleaseComObject(excelApp);
}

private static void BatchWrite(Worksheet sheet, int n)
{
    string[,] strings = new string[n, 1];
    var array = Enumerable.Range(1, n).ToArray();
    for (var index = 0; index < array.Length; index++)
    {
        strings[index, 0] = array[index].ToString();
    }

    sheet.Range["B1", "B" + n].set_Value(null, strings);
}

private static void SeparateWrites(Worksheet sheet, int n)
{
    for (int i = 1; i <= n; i++)
    {
        sheet.Cells[i, 1].Value = i.ToString();
    }
} 
```

**结果：**

```
 n = 100   n = 1 000   n = 10 000    
SeparateWrites(sheet, n);   180 ms    1125 ms     10972 ms
BatchWrite(sheet, n);       3 ms      4 ms        14 ms 
```

# php - 登录时禁用 Javascript 执行

> ID：11575839
> 
> 赞同：1
> 
> 时间：2012-07-20T08:40:36.097
> 
> 标签：php, javascript

我有一个`Index.php`启动`JQuery`对话框的页面（在`modal`模式下）。对话框由一个登录表单组成。当表单被提交时，`Ajax request`被发送到另一个 php 文件（请求被处理的地方）。如果请求成功，我只需关闭对话框。

我知道我可以使用`<noscript>`标签。但是，如果我`javascript`在任何时候禁用 ，我想怎么办？是否可以动态响应（将用户重定向到登录页面）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:58:39.780

这将对您有所帮助..
如果页面中的脚本已关闭，这将自动将页面重定向到给定元标记中的指定 url，
如果启用了 java 脚本，它将注释重定向元标记

```
 <script type="text/javascript" language="JavaScript">
  document.write("<!"+"--") </script> <meta http-equiv="Refresh" content="0; URL=noscript.html"> <!--//--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:33:49.537

多谢你们！

搜索后发现它就像：

```
<noscript>
    <meta http-equiv="refresh" content="0;URL=/other-page.html">
</noscript> 
```

关于 html 有效性（`<head>`标签不应该嵌套`<noscript>`标签，正文不应该包含`<meta>`标签）是相当肮脏的。另外我读到有可能抑制效果/使用

```
<meta http-equiv="refresh" content="0;URL=/other-page.html"> 
```

出色地。于是我想到了一个场景：

```
<body>
    <noscript><?php /* ?></noscript> 
    <ul>
        <li><a href="some_actionA.php"></li>
        <li><a href="some_actionB.php"></li>
        <li><a href="some_actionC.php"></li>
    </ul>
    <noscript><?php */ ?><p class="note">to proceed: Turn on Javascript!</p></noscript>
</body> 
```

无需进行重定向！

**编辑**

哎呀..

`<body>`即使启用它也会清理`Javascript`（所以我最终得到了两个页面`Login.php`和`Index.php`。在里面`Login.php`我检查了 javascript 支持。如果不支持，则会向用户显示消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:48:06.403

我从来没有这样做过，但你有没有试过把它放在`<header>`：

```
<noscript>
    <meta http-equiv="refresh" content="0;URL=/other-page.html">
</noscript> 
```

我不知道该解决方案是否有效，但有可能：)

# sql - 创建表时重用约束

> ID：11575841
> 
> 赞同：2
> 
> 时间：2012-07-20T08:40:37.220
> 
> 标签：sql, constraints

创建表时，如何重用前一列提到的约束？

```
create table ticket_details(
  from_stn char(3)
  constraint chk check(from_stn in ('vsh','mas','ndl'))
  constraint nn NOT NULL,
  to_stn char(3)
  constraint nn1 NOT NULL, (instead of crea)
  seat_no number(3)
  constraint PK primary key,
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:05:57.770

域约束将在域的任何实例上强制执行。另外：更改后，您只需在一个地方进行更改。（实现之间的语法可能略有不同）

```
CREATE DOMAIN THE_STN CHAR(3) constraint THE_STN_check_da_value check(VALUE in ('vsh','mas','ndl'))
        ;

CREATE table ticket_details
        ( seat_no INTEGER NOT NULL PRIMARY KEY
        , from_stn THE_STN NOT NULL
        , to_stn THE_STN
        );
INSERT INTO ticket_details(seat_no,from_stn,to_stn) VALUES (1, 'vsh', 'ndl' ); -- succeeds
INSERT INTO ticket_details(seat_no,from_stn,to_stn) VALUES (2, 'vsh', NULL ); -- succeeds
INSERT INTO ticket_details(seat_no,from_stn,to_stn) VALUES (2, 'lol', 'mas' ); -- fails 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:46:09.527

无法对另一列重用约束。如果需要，您必须为其他列定义它

# css - CSS 在 IE8 中不工作，而在 IE9 中工作正常

> ID：11575843
> 
> 赞同：0
> 
> 时间：2012-07-20T08:40:38.433
> 
> 标签：css, internet-explorer

基本上，为我的网站定义的大部分 CSS 样式在 IE8 中打开页面时都不会显示。这不仅发生在我的自定义样式（我通过自定义 css 文件单独加载），还发生在 Rockettheme IONOSPHERE 模板的内置功能中，例如`box1/2/3/4/5/6`模块样式。此外，圆角样式没有渲染，所有模块都显示为尖角。

我还使用了一个自定义 css 文件（称为`ralph_golfanatics.css`），我将其加载到 index.php 中，如下所示：

```
$gantry->addStyles(array('template.css','joomla.css', 'ralph_golfanatics.css')); 
```

此文件的所有自定义样式在 IE9 中都可以正常显示，但最重要的样式在 IE8 中没有显示。只需在文件中手动添加这些 css 样式`template_ie8.css`（该文件随 Ionosphere 模板包提供）并没有改变任何东西。

期待在这件事上得到任何帮助。该网页是[http://www.golfanatics.de](http://www.golfanatics.de)

提前感谢大家的提示。

拉尔夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:00:30.190

不幸的是，您包含的链接不起作用，因此很难准确确定问题所在。

如果您指的是带有尖角的圆角边框，这是因为`border-radius`IE8 不支持 CSS3 属性。

有关边界半径浏览器支持，请参阅[此链接。](http://caniuse.com/#feat=border-radius)

有许多 CSS3 属性在旧版浏览器中不起作用；这是预期的行为，大多数 Web 开发人员通过使用“渐进增强”或“优雅降级”来解决这个问题。有关更多信息，请参阅[此链接](http://www.alistapart.com/articles/understandingprogressiveenhancement/)。

大多数使用 CSS3 技术的网站在每个浏览器中看起来*都不一样。*

# c++ - 在未命名的命名空间中声明变量

> ID：11575847
> 
> 赞同：0
> 
> 时间：2012-07-20T08:40:56.987
> 
> 标签：c++, pimpl-idiom

在我目前的工作中，我看到在 cpp 文件中的未命名命名空间中声明的变量，并且仅由该类使用，就好像它们是成员变量一样。

我认为这是一种在 .h 中仅保留接口信息并在 .cpp 中实现的有趣方式，并且比通常的 pimpl 惯用语工作量少。

我看到人们一直在使用 pimpl 但从来没有这种方法，它有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:47:33.850

在 .cpp 文件的未命名命名空间中声明的变量是文件范围的；这意味着每次执行程序只有一个实例。

您可以通过创建对象的两个实例并观察它们在未命名的命名空间中相互干扰彼此的变量来亲眼看到这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T08:51:08.237

请显示一些示例代码。AFAIK，您不能在未命名的命名空间中声明成员变量（除非类本身在未命名的命名空间中声明）。

引入了未命名的命名空间来取代将变量声明为静态变量的常见做法，这些变量仅在一个编译单元中使用。

# search - 谷歌破解——inurl:? 不工作？

> ID：11575849
> 
> 赞同：5
> 
> 时间：2012-07-20T08:41:02.067
> 
> 标签：search, search-engine

我想在我公司的网站中搜索一些 URL，并且至少使用一个“get”参数。

类似[http://www.mysite.com/info.php?id=212](http://www.mysite.com/info.php?id=212)

那么，应该有一个**？**里面的符号。

但是，我尝试使用

> **站点：.mysite.com 文件类型：php inurl：？**

并且得到了这么多没有任何 GET 参数的页面，为什么**inurl:?** 不行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:20:37.103

正如您在这里看到的[http://support.google.com/websearch/bin/answer.py?hl=en&answer=2466433](http://support.google.com/websearch/bin/answer.py?hl=en&answer=2466433)：

> 通常，大多数标点符号和特殊字符在 Google 搜索中都会被忽略。

这包括问号，这就是您的搜索不起作用的原因。

# android - 如何将 xmpp 状态设置为脱机？

> ID：11575850
> 
> 赞同：0
> 
> 时间：2012-07-20T08:41:05.823
> 
> 标签：android, xmpp

我已经使用此代码将 XMPP 状态设置为脱机，但没有任何反应。请帮助我

存在存在；

存在=新存在（存在.Type.unavailable）；

connection.sendPacket（存在）；

我想将我的状态设置为离线，以便其他用户无法向我发送消息。我真的需要帮助

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T07:29:03.060

Tyr This Code fo set your status as Offline :

Presence pres = new Presence(Presence.Type.unavailable);

```
connection.sendPacket(pres); 
```

# css - 图像在可见时更改链接的布局

> ID：11575858
> 
> 赞同：0
> 
> 时间：2012-07-20T08:41:52.237
> 
> 标签：css, layout

`display inline`如果我通过单击 javascript 按钮将图像样式设置为，则它会显示出来，并且链接`a`会稍微改变其布局。

```
 <span>
     <a href="#">my link</a>
     <img  src="mygif.gif" style="display: none;">
   </span> 
```

我该如何摆脱它？我需要将图像设置为可见不会改变`a`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:21:31.177

不知道您所说的更改布局是什么意思。

我的 jsfiddle 在这里：http: [//jsfiddle.net/yk5GH/](http://jsfiddle.net/yk5GH/)显示锚链接被推下，如果您不希望将图像设置为`block`并且图像将显示在锚链接下方。

# spring - 记住我和身份验证成功处理程序

> ID：11575860
> 
> 赞同：11
> 
> 时间：2012-07-20T08:42:02.340
> 
> 标签：spring, spring-security

我有登录成功和重定向到页面的奇怪问题。

下面是我的弹簧安全配置。

```
<http auto-config="true" use-expressions="true">
    <intercept-url pattern="/login.hst**" access="anonymous or authenticated" />
    <intercept-url pattern="/**/*.hst" access="authenticated" />
    <form-login login-page="/login.hst"
        authentication-failure-url="/login.hst?error=true"
        authentication-success-handler-ref="loginSucessHandler" />
    <logout invalidate-session="true" logout-success-url="/home.hst"
        logout-url="/logout.hst" />
    <remember-me key="jbcpHaverERP" authentication-success-handler-ref="loginSucessHandler"/>
    <session-management>
    <concurrency-control max-sessions="1" />
</session-management>
</http> 
```

LoginSuessHandler 类：

```
@Service
public class LoginSucessHandler extends
        SavedRequestAwareAuthenticationSuccessHandler {

    @Override
    public void onAuthenticationSuccess(HttpServletRequest request,
            HttpServletResponse response, Authentication authentication)
            throws ServletException, IOException {
            ...
        super.setUseReferer(true);
        super.onAuthenticationSuccess(request, response, authentication);
    }

} 
```

现在成功重定向到请求页面的问题。如果我直接引用任何安全 url，spring 会将我重定向到登录页面并成功登录到原始请求的链接。但是，如果用户之前选择了记住我，然后关闭浏览器并现在请求直接 URL，则这不起作用，他正在被正确验证，而不是将他重定向到请求的页面弹簧重定向到 /。我检查了日志和一些 spring 源代码，发现它无法确定目标 url。

我试图设置参考，但参考值为空。但是我注意到一件奇怪的事情，在 spring 安全配置中，如果我从 remember-me 配置中删除 authentication-success-handler ，那么它就可以工作。

```
 <remember-me key="jbcpHaverERP" authentication-success-handler-ref="loginSucessHandler"/> 
```

无法弄清楚问题。表单登录和记住我的身份验证成功处理程序实现是否需要不同？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T22:14:21.060

记住我与表单登录的不同之处在于，身份验证发生在用户提出的实际请求期间。对于表单登录，用户必须首先被重定向到登录页面，提交登录表单，然后他们被重定向到原始目标（通常缓存在会话中）。所以 form-login 需要重定向，而 remember-me 不需要。使用记住我的请求，可以对用户进行身份验证，并且允许请求​​继续进行而无需任何干预。

an 的主要目的`AuthenticationSuccessHandler`是在身份验证后控制导航流程，因此您通常根本不会将其与 remember-me 一起使用。使用`SavedRequestAwareAuthenticationSuccessHandler`不是一个好主意，因为没有可用的已保存请求。如果没有保存的请求，则默认情况下它将执行重定向到“/”，如您所见。

如果您只想在记住我登录期间添加一些功能，那么您可以`AuthenticationSuccessHandler`直接实现接口，而无需执行重定向或转发。正如我上面解释的，你不能对 form-login 使用相同的实现，因为当前请求是提交登录表单（通常是到 URL `j_spring_security_check`），而不是对应用程序中 URL 的请求。所以你需要一个重定向表单登录。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-16T14:58:37.720

您宁愿使用`ApplicationListener`并查找事件`InteractiveAuthenticationSuccessEvent`。

`InteractiveAuthenticationSuccessEvent`有一个属性`generatedBy`将成为过滤器，即`UsernamePasswordAuthenticationFilter`（表单登录）和`RememberMeAuthenticationFilter`（记住我的登录）

```
@Component
class AuthenticationApplicationListener implements ApplicationListener<InteractiveAuthenticationSuccessEvent> {

  @Override
  void onApplicationEvent(InteractiveAuthenticationSuccessEvent event) {
    //do something
  }

} 
```

使用`AuthenticationSuccessHandler`on rememberMe 的自定义实现会导致问题。看看里面的流量`RememberMeAuthenticationFilter`。如果`successHandler`使用 ，则绕过过滤器链

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-07T15:44:03.300

使用 an`AuthenticationSuccessHandler`不起作用。如另一个答案所述，将绕过弹簧安全过滤器链！
有效的是使用`ApplicationListener`- 作为另一个答案也建议。但是要找出，如果您的用户通过记住我的身份验证，那么使用的想法`InteractiveAuthenticationSuccessEvent.getGeneratedBy()`是行不通的：`getGeneratedBy`返回`Class<T>`，这意味着通用。因此，在运行时您无法确定 if`T`是否为`RememberMeAuthenticationFilter`.

什么对我有用：使用`InteractiveAuthenticationSuccessEvent.getAuthentication()`.

这是一个示例（顺便说一句：`@EventListener`自 Spring Security 4.2 起使用 - 如果您使用早期版本，请通过 implementation 执行以下操作`ApplicationListener<InteractiveAuthenticationSuccessEvent>`）：

```
@Component
public class AuthenticationApplicationListener {

    @EventListener
    public void handleInteractiveAuthenticationSuccess(InteractiveAuthenticationSuccessEvent event) {
        if (RememberMeAuthenticationToken.class.isAssignableFrom(event.getAuthentication().getClass())) {
            .... do some stuff
    }
  }
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-26T00:36:16.407

您应该为登录表单和记住我实现不同的身份验证成功处理程序。如果你想在 remeber-me 处理程序中执行重定向，你可以使用 SimpleUrlAuthenticationSuccessHandler 并设置 DefaultTargetUrl。

```
public class RememberMeAuthenticationSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {

@Override
public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,
    Authentication authentication) throws IOException, ServletException {

    // ...

    super.setAlwaysUseDefaultTargetUrl(true);
    super.setDefaultTargetUrl(request.getRequestURL().toString());
    super.onAuthenticationSuccess(request, response, authentication);
} 
```

# android - 传递可序列化或可解析是一种有效的解决方案吗？

> ID：11575861
> 
> 赞同：1
> 
> 时间：2012-07-20T08:42:07.067
> 
> 标签：android, serializable

我正在构建一个 android 应用程序，在启动活动中，我将一个非常大的 json 文件（3.3 mb）解析为自定义对象，或者当没有更新时，我从序列化的字节数组中检索它。我正在处理一个包含大约 500 个包含子对象、列表等对象的列表的对象。

现在我需要这些数据，或者在我的其他活动中使用其中的一些。什么是最好的解决方案？每次开始新活动时，使用 intent.putExtra 或使用 parceable 似乎需要进行大量数据处理来序列化和反序列化。这个处理比我想象的要少，还是有办法使用你的解析类而不破坏它，这样你就可以使用类似的东西

```
Myclass.get(nrIneed).Mysubclass.getsomestring 
```

? 这就是我在使用数据进行日志记录或解析活动中的某些内容时所做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:49:26.040

您可以使用`Application`类来存储这些数据，并且可以在所有`Activity`

```
public class BusinessClass extends Application 
{     
     public ParsedData parsedData = new ParsedData();
} 
```

然后使用以下代码在任何活动中调用它

```
BusinessClass appState = ((BusinessClass)getApplicationContext());
appState.parsedData.getData(); 
```

欲了解更多信息

[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:51:04.907

您不应该使用`Parcelable`可能消耗内存超过约**1MB**的对象。否则解析将失败（至少按照 API 级别 8）。

但是，在您的情况下，我建议您将解析的数据保存/组织到 SQLite 并从其他活动中查询。这将帮助您的应用程序消耗更少的内存:)

您也可以创建对您的对象的*静态*引用，但由于它的大小很大，我不建议您这样做，因为这样您的应用程序将成为 android VM 杀死的有吸引力的目标 - 在内存不足的情况下运行时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:50:42.690

我认为您不应该将您的数据用作大型 Json 文件。在第一次启动时，您应该将数据保存在数据库中，然后仅在需要创建/检索/更新/删除时使用此数据库。

如果您真的想使用您的 JSON 文件，那么您应该将其设为静态（例如在您的应用程序单例中）。

希望对你有帮助

# ios - ios 框架和边界 - CGRectMake 在屏幕外

> ID：11575863
> 
> 赞同：0
> 
> 时间：2012-07-20T08:42:16.827
> 
> 标签：ios, ipad

在 iPad 上，纵向时跟随在屏幕外，为什么即使在纵向启动时也会出现这种情况？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIView* imageView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 50, 50)];
    blue.backgroundColor = [UIColor blueColor];
    [[self view] addSubview:imageView]; 
```

我被告知根视图的框架在纵向和横向中总是相同的： - 纵向框架 orign（xi 代表 UIView 的 orign）
x0
00
00

横向框架原点：
000
x00

但是为什么 CGRectMake(0,0 .. 不在纵向的右上角？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:12:48.317

旋转设备时，边界和框架会发生变化。我们以 Single View Application 模板为例，添加方向支持并在 iPhone 上运行。纵向：

```
bounds = (0, 0, 320, 460) // 460 compensates for 20p status bar
frame = (0, 20, 320, 460) // status bar adjustment
x0
00
00 
```

在风景中：

```
bounds = (0, 0, 480, 300) // now 20p is taken from "height"
frame = (20, 0, 300, 480) // status bar adjustment
x00
000 
```

无论方向如何，原点始终位于左上角。

# algorithm - 找出三个数组列表中总和为零的所有记录组合？

> ID：11575866
> 
> 赞同：9
> 
> 时间：2012-07-20T08:42:34.053
> 
> 标签：algorithm

考虑有三个数组列表，每个列表长度相等，并且其中有正数、负数和零。我必须编写一个程序来查找总和为零的组合。所以基本上，如果数组是： -

```
A = {0, -1, 2}
B = {0, -1, -2}
C = {0, -2, 0} 
```

输出/输出：A[0] + B[0] + C[0]、A[2] + B[2] + C[2] 等。

我可以想到两种方法，1\. 有 3 个 for 循环并使用 a[i] + b[j] + c[k] 计算总和，如果为零则打印索引。大 O 将是 O(N^3) 2\. 有两个 for 循环，但使用二分搜索找到第三个元素，它将使总和为零。大 O 将是 O(N^2LogN)

还有其他方法吗？

谢谢。

**编辑：** 根据下面给出的答案，我的第一个解决方案是最快的。但是，如果问题是关于“查找”组合的数量而**不是**打印它们，那么请参阅下面的 Grigor Gevorgyan 回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:09:42.840

可以用*2 指针方法在****O(n^2)***中完成。 对数组进行排序。现在执行以下操作： 设置***ans = 0***。 有一个外部循环通过索引为***i的数组******a***运行。现在设置***j = 0, k = n - 1***。 看看***sum = a[ i ] + b[ j ] + c[ k ]***。 如果***sum < 0***，则增加***j***。 如果***sum > 0***减少***k***。 如果***sum == 0***，找到等于***b[ j ]***和***c[ k ]***的元素范围，并将范围长度乘积添加到答案中。然后设置 ****************j***和***k***到该范围之外的第一个元素。
这是有效的，因为数组是排序的并且加法是一个线性函数。
内部部分以**O(n)**运行，总体复杂度**为O(n^2) 。***************

 **C++ 中的示例代码：

```
sort( a, a + n );
sort( b, b + n );
sort( c, c + n );
ans = 0;
for( i = 0; i < n; ++i )
{
   j = 0, k = n - 1;
   while( j < n && k > 0 )
   {
      sum = a[ i ] + b[ j ] + c[ k ];
      if( sum < 0 ) ++j;
          else if( sum > 0 ) --k;
          else 
          { 
             // find the equal range
             for( jj = j; jj < n && b[ jj ] == b[ j ]; ++jj );
             for( kk = k; kk >= 0 && c[ kk ] == c[ k ]; --kk );
             // add pairs quantity from these ranges
             ans += ( jj - j ) * ( k - kk );
             j = jj, k = kk;
          }
} 
```

***注意***：数组***a***的排序不是必需的，只是为了看起来不错:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T04:11:39.933

我认为这个 3SUM：

[http://en.wikipedia.org/wiki/3SUM](http://en.wikipedia.org/wiki/3SUM)

引用维基百科的文章：

> 有一个简单的算法可以在 O(n2) 时间内解决 3SUM，方法是首先对数组中的每个元素进行散列，找到所有可能的对，然后最后检查剩余值是否存在（这只是每对总和的负数）使用哈希表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:59:09.217

天真的方法是检查所有子集，但这运行时间很差。 [http://mathworld.wolfram.com/k-Subset.html](http://mathworld.wolfram.com/k-Subset.html) 没有进一步的限制，我相信这是NP完全子集和问题。有一个与背包问题相关的解决方案，它给出了一个不错的解决方案。 [http://en.wikipedia.org/wiki/Subset_sum_problem](http://en.wikipedia.org/wiki/Subset_sum_problem)

您是否需要找到总和为 0 的所有组合，或者只是一个组合，或者只是一个具有 3 个元素的解决方案？

解决方案应该是 {{A[0]},{B[0]}, {C[0]}, {C[2]}, {A[0],B[0]},{A[0], B[0],C[0]},{A[0],B[0],C[0],C[2]},{A[1],B[1],A[2]}, {A[2],B[2]} 等等}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T18:56:29.370

仅当您将给定的数据从某些存储（例如文件或任何输入流）中读取到数组列表中时，此解决方案才会加快速度。将第三个数组列表替换`hashtable`为为您提供了一个恒定的时间来查找零和的第三个组成部分。在您的两个嵌套循环中，每次获取新对时`a[i]+b[j]`，您都在哈希表中查找`c[n0]=-a[i]+b[j]`需要的内容`O(1)`。所以总的时间复杂度是O(n^2)。让我澄清一下，这个解决方案只有在您被允许掌握阅读过程时才有帮助，并且如果您已经获得了数组列表，则不会加速任何事情。**

# mysql - MySql：计数间隔

> ID：11575871
> 
> 赞同：3
> 
> 时间：2012-07-20T08:42:43.627
> 
> 标签：mysql, sql, datetime

假设我有一个带有警报系统日志的数据库。有一个间隔，在数据库中插入一个新行。该行有alarm_id、一个日期时间和一个警报是打开还是关闭的标志。

我想知道在一段时间（今天、本周、本月）内警报设置为开启（armed=1）多长时间。这将是具有武装=1 的后续行。如果有一个武装=0 的行，它可能不会被计算在内。

例如：

```
id      alarm_id        armed       date        
1       1               0           2012-01-01 00:00:00
2       1               1           2012-01-01 00:10:00
3       1               1           2012-01-01 00:20:10
4       1               1           2012-01-01 00:29:58
5       1               0           2012-01-01 00:40:00
6       1               1           2012-01-01 01:00:00
7       1               1           2012-01-01 01:10:00
8       1               1           2012-01-01 01:20:00
9       1               0           2012-01-01 01:30:00 
```

在本例中，警报从 00:10:00 到 00:29:58 => 19:58 分钟布防。从 1:00:00 到 1:20:00 => 20 分钟布防。在这一天，警报已经启动至少 39:58 分钟，这必须是我查询的结果。

日志就像一个心跳，因此警报可以在“开”和“关”状态之间进行武装，但我只想知道后续行武装=1。

我一直在为此烦恼。我自己加入了桌子，但我不知道该怎么做。甚至可能吗？我已经设置了一个 SQL Fiddle 来处理数据：[http ://sqlfiddle.com/#!2/9eca2/2/0](http://sqlfiddle.com/#!2/9eca2/2/0)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:17:21.477

您将不得不使用类似这样的东西在 MySQL 中使用单个查询来执行此操作：

```
SELECT armed_at INTO @v FROM alarm ORDER BY armed_at LIMIT 1;

SELECT armed, TIMEDIFF(armed_at, @v), @v:=armed_at FROM alarm; 
```

有关更多详细信息，请尝试：

```
SET @t =0;
SELECT armed_at INTO @v FROM alarm ORDER BY armed_at LIMIT 1;
SELECT armed, 
       IF(armed = 1, @t:=ADDTIME(TIME(TIMEDIFF(armed_at, IF(@v <> 0, @v, armed_at))), @t) , @t:=0) AS time, 
       IF(armed = 1, @v:=armed_at, @v := 0) AS v 
FROM alarm; 
```

更新后的查询将为您提供所需的确切结果，请尝试：

```
SET @a=0, @d=0, @t=0;

SELECT atime
FROM (
      SELECT id, armed,
             IF((@a = 1 AND armed = 1), @t:=ADDTIME(TIME(TIMEDIFF(adate, IF(@d <> 0, @d, adate))), @t) , 0) AS atime,
             IF((@a:=armed) = 1, @d:=adate, @d := 0) AS d
      FROM alarmlog
     ) a
WHERE a.armed = 1
ORDER BY id DESC
LIMIT  1; 
```

# javascript - 从代码创建翻转开关

> ID：11575872
> 
> 赞同：0
> 
> 时间：2012-07-20T08:42:47.613
> 
> 标签：javascript, jquery, jquery-mobile

我正在尝试从代码创建翻转切换。

```
var favFlip = '<label for="favourFlip">To fav:</label>'+
        '<select id="favourFlip" data-role="slider">'+
            '<option value="off">Off</option>'+
            '<option value="on">On</option>'+
        '</select>';
        $('.ui-content').append(favFlip);
var flip = $('#favourFlip');
flip.slider('refresh'); 
```

此代码在`pagebeforeshow`处理程序中工作并抛出错误：`Uncaught cannot call methods on slider prior to initialization; attempted to call method 'refresh'`。怎么修？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:19:54.760

您可能想尝试在 中运行它`pageshow`，然后肯定会加载 DOM 并且您的容器`$('#favourFlip')`将被初始化。

编辑：尝试：`.slider()`。您这样做是因为您正在创建一个滑块对象，而不是更新一个已经存在的对象。示例：http: [//jsfiddle.net/Caavoow/724yH/3/](http://jsfiddle.net/Calavoow/724yH/3/)

# c# - 如何在另一个类库项目中引用类库的 dll？

> ID：11575884
> 
> 赞同：0
> 
> 时间：2012-07-20T08:43:17.587
> 
> 标签：c#, asp.net

我有一个来自类库项目 AppconClient 的 dll。我指的是另一个类库项目 p2 中的那个 dll。我从项目 AppconClient 复制了该 dll 并复制到`Bin\Debug`项目 p2 的文件夹中，并通过单击项目 p2 中的添加引用来引用该 dll。

当我尝试在项目 p2`using`的顶部通过关键字引用 dll 时，我很高兴看到 AppconClient 的命名空间。`Program.cs`我可以在我的项目 p2 中看到该 dll 的类和方法。但是当我尝试构建项目 p2 时，我收到错误消息，

> 找不到类型或命名空间名称“AppconClient”（您是否缺少 using 指令或程序集引用？）

但是可以在任何 WebApplication 中引用相同的 dll 并且它也可以正常工作。

谁能告诉我这可能是什么原因和解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:58:37.640

无需手动将其复制到 bin\debug 中。您要做的就是从原始文件夹添加对库的引用，并在新添加的引用属性中将 CopyLocal 值设置为 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:19:56.887

不要复制。如果您复制这可能会发生，因为当您发布您的网站时，复制的 DLL 可能会丢失。

正确的做法是`Add Reference`浏览。VS会自动为你做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:02:21.060

您不应该将文件复制到文件`bin\Debug`夹中。

编译器将在那里添加所有引用的程序集。

您只需要添加对原始 dll 的引用。

当您重建项目时，dll 文件将被删除（这就是 Clean 所做的）并在那里放置一个新副本。你原来的dll被删除了。所以后来没有建立项目。

如果您不能直接引用原始 dll，请在您的项目中制作一个副本，可能是一个名为 Lib 的文件夹并将其放在那里。

# c# - 控制器操作被调用两次，并且 IIS 日志没有显示

> ID：11575885
> 
> 赞同：8
> 
> 时间：2012-07-20T08:43:36.370
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, iis-7.5

我有奇怪的行为，无法在本地机器上复制，它开始让我发疯。

看起来 ASP.NET MVC 正在尝试执行操作，有些超时，它没有任何异常就失败并通知 ajax 客户端，然后尝试重新运行操作，ajax 客户端得到响应，但不是来自原始调用。

我有一个控制器动作：

```
 [ValidateAntiForgeryToken]
 [ClientErrorHandler]
 public virtual ActionResult PlaceOrder(CheckoutDto checkoutDto)
 {
     LoadDataFromDatabase();

     // this may take up to couple minutes
     var orderConfirmationData = PlaceOrderToExternalWebservice();

     SaveConfirmationData(orderConfirmationData);

     return View(Transform(orderConfirmationData))
 } 
```

我使用 jquery ajax 调用它：

```
$.ajax({
                url: placeOrderActionUrl,
                type: "POST",
                async: true,
                dataType: "html",
                data: $('#checkoutForm').serialize(),                    
                success: function (data) {
                   // show confirmation data                       
                },
                error: function (request, status, error) {
                   // show error message
                }
            }); 
```

对于小订单，它工作正常，但对于大订单，会创建两个订单，原因似乎是处理时间，订单越大，将其放置到外部 Web 服务所需的时间就越多。

我检查了 IIS 日志，以确保客户端脚本没有两次调用操作 - 并且 IIS 日志仅显示对特定操作的一次调用。

外部服务没有失败，事件日志/sql日志中没有记录异常。

为确保该 ajax 客户端得到的响应不是来自原始调用，我做了某种锁定：

```
 [ValidateAntiForgeryToken]
 [ClientErrorHandler]
 public virtual ActionResult PlaceOrder(CheckoutDto checkoutDto)
 {
     try 
     {
        if (OrderingLockedForCurrentUser()) 
        {
            Log("Locked");
            return View("Already placing order");
        }

        LockOrderingForCurrentUser();

        LoadDataFromDatabase();

        // this may take up to couple minutes
        var orderConfirmationData = PlaceOrderToExternalWebservice();

        SaveConfirmationData(orderConfirmationData);

        return View(Transform(orderConfirmationData))
     }
     finally 
     {
        RemoveOrderingLockForCurrentUser();
     }
 } 
```

而不是返回确认的数据，而是返回“已经下订单”。

我认为可能是动作执行超时，但我只是为了

```
<httpRuntime executionTimeout="600" /> 
```

没有帮助。

任何想法在哪里搜索原因，另外检查什么，以启用任何额外的日志记录？

更新：有趣的是，原来的调用也完成了。

更新 2：我添加了动作过滤器 AjaxOnly 以确保它只能从 javascript 调用：

```
public class AjaxOnlyAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (!filterContext.HttpContext.Request.IsAjaxRequest())
        {                  
            throw new Exception("This action is intended to be called from Ajax only.");
        }
    }
} 
```

从日志中它只能从 javascript 调用，所以谜团还在继续......

**更新 3：**

我已将问题隔离到单独的测试控制器中的简单线程睡眠：

```
[ValidateAntiForgeryToken]
    [AjaxOnly]
    [ClientErrorHandler]
    public virtual ActionResult PlaceOrderAction(CheckoutDto checkoutDto)
    {
        try
        {
            if (CanPlaceOrder(Request.RequestContext.HttpContext))
            {                   
                Thread.Sleep(TimeSpan.FromSeconds(90));

                return Content("First time");
            }

            return Content("Second time");
        } 
        finally
        {
            HttpContext.Cache.Remove(GetKey(userService.CurrentUser.UserId));
        }
    }

    public bool CanPlaceOrder(HttpContextBase httpContext)
    {
        var userId = userService.CurrentUser.UserId;
        var key = GetKey(userId);

        if (httpContext.Cache[key] == null)
        {
            httpContext.Cache.Add(key, userId, null, DateTime.Now.AddMinutes(10), new TimeSpan(), CacheItemPriority.High, null);
            return true;
        }

        return false;
    }

    private static string GetKey(int userId)
    {
        return "PlacingOrder{0}".With(userId);
    } 
```

只要它在两台独立的开发机器（win 7）和 ec2 中的暂存机器（win2008sp2）上运行正常，几乎可以肯定生产服务器 IIS 设置（win 2008R2 x64 sp1）有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:44:25.123

这是来自类似问题的建议：

“是否有任何其他标记可能会意外引用页面？脚本引用、图像引用、css 引用，所有这些都可能被错误地指向'。' 或当前页面。”

[MVC 控制器被调用两次](https://stackoverflow.com/questions/2751138/mvc-controller-is-being-called-twice)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:52:32.023

找到了。

正如我开始思考的那样，IIS 配置以某种方式涉及到这一点，我已经在生产 IIS 上启动了一个新的测试站点，只是默认的 mvc 站点，具有 90 秒的线程睡眠。
它按预期工作。
所以我复制了整个生产站点以在不同的端口上运行，我认为我可以在不影响生产站点的情况下更快地测试想法 - 当它在不同的端口上运行时没有问题。

事实证明，我们使用的是 Amazon Elastic balancer，这就是问题所在。

道德是，如果我从一开始就积极地隔离问题，我会浪费更少的时间。

# extjs - ExtJS4.1 TreeGrid 中的二次排序

> ID：11575886
> 
> 赞同：3
> 
> 时间：2012-07-20T08:43:38.440
> 
> 标签：extjs, extjs4, extjs4.1

如何在我的 extjs 树存储中实现二次排序。我想要一个排序后的所有列也应该按玩家排序的情况。

所以想象一下我有列：玩家、高分、花费的时间。如果我按花费的时间排序，它将对其进行排序，然后按玩家排序结果。因此，如果我们有 10 个人，花费的时间 = 20，他们都将按玩家姓名的字母顺序显示。

我尝试在 doSort 方法中添加一个额外的排序器，但它似乎没有任何效果。

我试过了：

```
this.sorters.add(new Et.util.Sorter({
  property:'gamer',
  direction: 'ASC'
})); 
```

该物业在商店中。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:37:21.647

您可以定义一个排序器数组，`Ext.util.Sorter()`如下所示：

`this.sorters.add(new Ext.util.Sorter([ {property: 'gamer', direction: 'ASC'}, {property:'highScore', direction: 'DESC'} ]))`

# java - Web 应用程序的免费模型工具？

> ID：11575889
> 
> 赞同：1
> 
> 时间：2012-07-20T08:43:44.250
> 
> 标签：java, web-applications, mockups

Web 应用程序最好的免费模型工具是什么？我知道 balsamiq，它非常好，但缺少将不同页面链接在一起的功能。

我想做某种原型设计，所以不仅仅是模拟一个视图，还要提供模型之间的交互。

我可以从哪个工具开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:11:45.630

我认为 mit csail 的展览是一个不错的选择。 [http://simile-widgets.org/exhibit/](http://simile-widgets.org/exhibit/) 您可以从 javascript 加载数据并模拟与 jquery 的交互和/或通过 URL 参数传递操作。

# scala - 在 Scala 中，我可以只将某些文字隐式转换为我的自定义类型吗？

> ID：11575890
> 
> 赞同：4
> 
> 时间：2012-07-20T08:43:45.107
> 
> 标签：scala, macros, literals, implicit-conversion

在我的应用程序中，我正在跟踪用户拥有的积分数。为了添加一些类型检查，我使用了一个`Credits`类似于这个的类：

```
case class Credits(val numCredits: Int) extends Ordered[Credits] {
   ...
} 
```

假设我有一个`def accept(creds: Credits): Unit`要调用的函数。有没有办法让我打电话给它

```
process(Credits(100))
process(0) 
```

但不是这个？

```
process(10) 
```

即，我想仅提供来自文字的隐式转换，仅此而已`0`。现在，我只是`val Zero = Credits(0)`在伴生对象中，我认为这是一个很好的做法，但无论如何我都会对答案感兴趣，包括其他评论，比如：

*   这可以通过 2.10 中的宏隐式转换来完成吗？
*   是否应该`Credits`扩展 AnyVal 而不是 2.10 中的案例类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T09:32:10.300

这种编译时检查是使用宏的好地方，它将在 2.10 中可用

*一个名叫Jason Zaugg*的非常聪明的人已经实现了与您需要的类似的东西，但它适用于正则表达式：正则*表达式编译时间检查。*

您可能想查看它的 Macrocosm 以了解它是如何完成的，以及您如何以相同的目的编写自己的宏。

[https://github.com/retronym/macrocosm](https://github.com/retronym/macrocosm)

如果你真的想了解更多关于宏的知识，首先我想说你需要勇敢，因为目前文档很少，API 可能会发生变化。Jason Zaugg 的作品在 2.10-M3 上编译得很好，但我不确定它是否适用于较新的版本。

如果你想从一些读数开始：

*   一个很好的切入点是 scalamacros 网站[http://scalamacros.org/](http://scalamacros.org/)和 SIP 文档[https://docs.google.com/document/d/1O879Iz-567FzVb8kw6N5OBpei9dnbW0ZaT7-XNSa6Cs/edit?pli=1](https://docs.google.com/document/d/1O879Iz-567FzVb8kw6N5OBpei9dnbW0ZaT7-XNSa6Cs/edit?pli=1)

*   如果您有时间，您可能还想阅读 Eugene Burmako 的演讲： [http ://scalamacros.org/talks/2012-04-28-MetaprogrammingInScala210.pdf](http://scalamacros.org/talks/2012-04-28-MetaprogrammingInScala210.pdf)

现在，进入主题，Scala 宏是**CAT**：“编译时 AST 转换”。抽象语法树是编译器表示您的源代码的方式。编译器对 AST 应用后续转换，并在最后一步实际生成 java 字节码。

现在让我们看看 Jason Zaugg 代码：

```
 def regex(s: String): scala.util.matching.Regex = macro regexImpl

  def regexImpl(c: Context)(s: c.Expr[String]): c.Expr[scala.util.matching.Regex] = {
    import c.universe._

    s.tree match {
      case Literal(Constant(string: String)) =>
        string.r // just to check
        c.reify(s.splice.r)
    }
  } 
```

正如你所看到的，regex 是一个特殊的函数，它接受一个字符串并通过调用宏 regexImpl 返回一个正则表达式

宏函数在第一个参数列表中接收上下文，在第二个参数列表中以 c.Expr[A] 的形式接收宏的参数并返回 c.Expr[B]。请注意，c.Expr 是一个路径依赖类型，即它是一个定义在 Context 内部的类，因此如果您有两个上下文，则以下内容是非法的

```
val c1: context1.Expr[String] = ...
val c2: context2.Expr[String] = ...
val c3: context1.Expr[String] = context2.Expr[String] // illegal , compile error 
```

现在，如果您查看代码中发生的情况：

*   有一个匹配 s.tree 的匹配块
*   如果 s.tree 是 Literal，包含常量 String ，则调用 string.r

这里发生的事情是 Predef.scala 中定义了从字符串到 StringOps 的隐式转换，该转换在每个 scala 源的编译中自动导入

`implicit def augmentString(x: String): StringOps = new StringOps(x)`

StringOps 扩展了 scala.collection.immutable.StringLike，其中包含：

```
def r: Regex = new Regex(toString) 
```

由于宏是在编译时执行的，这将在编译时执行，如果抛出异常，编译将失败（即从无效的正则表达式字符串创建正则表达式的行为）

* * *

注意：不幸的是，API 非常不稳定，如果您查看 [http://scalamacros.org/documentation/reference.html](http://scalamacros.org/documentation/reference.html)，您会看到指向 Context.scala 的链接断开。正确的链接是 [https://github.com/scala/scala/blob/2.10.x/src/reflect/scala/reflect/makro/Context.scala](https://github.com/scala/scala/blob/2.10.x/src/reflect/scala/reflect/makro/Context.scala)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T14:09:35.683

基本上，您需要[依赖类型](http://en.wikipedia.org/wiki/Dependent_type)。为什么 Scala 在路径依赖类型中支持有限形式的依赖类型，它不能满足你的要求。

[Edmondo](https://stackoverflow.com/users/701829/edmondo1984)在建议宏方面有一个好主意，但它有一些局限性。因为它很简单，所以我实现了它：

```
case class Credits(numCredits: Int)        
object Credits {
  implicit def toCredits(n: Int): Credits = macro toCreditsImpl

  import scala.reflect.makro.Context
  def toCreditsImpl(c: Context)(n: c.Expr[Int]): c.Expr[Credits] = {
    import c.universe._                                                                          

    n.tree match {                                                                               
      case arg @ Literal(Constant(0)) =>                                                         
        c.Expr(Apply(Select(Ident("Credits"), newTermName("apply")),           
          List(arg)))
      case _ => c.abort(c.enclosingPosition, "Expected Credits or 0")                            
    }                                                                                            
  }                                                                                              
} 
```

然后我启动了 REPL，定义了`accept`，并进行了一个基本的演示：

```
scala> def accept(creds: Credits) { println(creds) }
accept: (creds: Credits)Unit

scala> accept(Credits(100))
Credits(100)

scala> accept(0)
Credits(0)

scala> accept(1)
<console>:9: error: Expected Credits or 0
              accept(1)
                     ^ 
```

现在，问题：

```
scala> val x = 0
x: Int = 0

scala> accept(x)
<console>:10: error: Expected Credits or 0
              accept(x)
                     ^ 
```

换句话说，我无法跟踪分配给标识符的值的属性，而依赖类型允许我这样做。

但整个让我觉得浪费。为什么*只*需要转换 0？似乎您想要一个默认值，在这种情况下，最简单的解决方案是使用默认值：

```
scala> def accept(creds: Credits = Credits(0)) { println(creds) }
accept: (creds: Credits)Unit

scala> accept(Credits(100))
Credits(100)

scala> accept()
Credits(0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T09:15:25.987

使用可以使用隐式偏函数：

```
scala> case class Credits(val numCredits: Int)
defined class Credits

scala> def process(c: Credits) = {}
process: (c: Credits)Unit

scala> implicit def i2c:PartialFunction[Int, Credits] = { case 0 => Credits(0) }

i2c: PartialFunction[Int,Credits] 
```

让你

```
scala> process(Credits(12)) 
```

和

```
scala> process(0) 
```

但：

```
scala> process(12)
scala.MatchError: 12 (of class java.lang.Integer)
        at $anonfun$i2c$1.apply(<console>:9)
        at $anonfun$i2c$1.apply(<console>:9)
        at .<init>(<console>:12)
        at .<clinit>(<console>)
        at .<init>(<console>:11)
        at .<clinit>(<console>)
        at $print(<console>)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:704)

        at scala.tools.nsc.interpreter.IMain$Request$$anonfun$14.apply(IMain.sca
la:920)
        at scala.tools.nsc.interpreter.Line$$anonfun$1.apply$mcV$sp(Line.scala:4
3)
        at scala.tools.nsc.io.package$$anon$2.run(package.scala:25)
        at java.lang.Thread.run(Unknown Source) 
```

编辑：但是是的，编译器仍然允许`process(12)`在运行时导致匹配错误。

# c - 在 Linux 中通过 tcpdump 观看广播行为

> ID：11575892
> 
> 赞同：0
> 
> 时间：2012-07-20T08:43:49.973
> 
> 标签：c, linux, network-programming

我有在 RedHat Enterprise Linux5.5 中接收广播数据包的 ac 示例代码，以下是关键源：

```
struct ip_mreq {
    struct in_addr imr_multiaddr;    /* IP multicast address of group */
    struct in_addr imr_interface;    /* local IP address of interface */
} mreq; 

serv_addr.sin_addr.s_addr = inet_addr("225.0.100.100");
portno = 10000 ;
serv_addr.sin_port = htons(portno);
mreq.imr_multiaddr = serv_addr.sin_addr; 
mreq.imr_interface.s_addr = INADDR_ANY ;
//mreq.imr_interface.s_addr = inet_addr("192.168.165.212");
setsockopt(newsockfd, IPPROTO_IP, IP_ADD_MEMBERSHIP, &mreq, sizeof(mreq));
setsockopt(newsockfd, SOL_SOCKET, SO_REUSEADDR, &set, sizeof(set)); 
```

路由表是：

[root@linux01 ~]# route Kernel IP routing table Destination Gateway Genmask Flags Metric Ref Use Iface

192.172.165.0 * 255.255.255.0 U 0 0 0 eth0

128.110.10.0 * 255.255.255.0 U 0 0 0 eth2

225.0.0.0 192.172.165.212 255.255.0.0 UG 0 0 0 eth0

169.254.0.0 * 255.255.0.0 U 0 0 0 eth0

默认 128.110.10.254 0.0.0.0 UG 0 0 0 eth2

我使用 tcpdump -i eth0 -nn 看是否成功加入广播组，

```
mreq.imr_interface.s_addr = INADDR_ANY ;
//mreq.imr_interface.s_addr = inet_addr("192.168.165.212"); 
```

将显示：

16:14:24.322672 IP 192.172.165.212 > 225.0.100.100：igmp v2 报告 225.0.100.100

```
mreq.imr_interface.s_addr = INADDR_ANY ;
//mreq.imr_interface.s_addr = inet_addr("192.168.165.212"); 
```

这不会有 igmp v2 报告消息！

我的问题是：为什么 INADDR_ANY 有效，但不是 inet_addr("192.168.165.212");

我错过了什么？

eth0 inet addr:192.172.165.212 Bcast:192.172.165.255 Mask:255.255.255.0 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1

eth2 inet addr:128.110.10.69 Bcast:128.110.10.255 Mask:255.255.255.0 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1

# mysql - 如何不重复地复制表记录？

> ID：11575900
> 
> 赞同：0
> 
> 时间：2012-07-20T08:44:02.620
> 
> 标签：mysql

我有一个包含一些重复记录的表。我想让记录变得独一无二。我创建了一个新表（比如目的地），并在其中指定了一个唯一列。如何从 table1（源）复制记录，这样，如果记录插入到目标表中，它就不会再次插入它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:56:17.670

您可以使用“ [select into](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-select-into-table.html) ”构造并选择仅插入不同的行，如下所示：

```
insert into table_without_dupes (column0, column1) select distinct column0, column1 from table_with_dupes 
```

如果您有使行不同的自动增量或其他列，您可以将它们排除在插入之外并选择语句的一部分。

### 编辑：

如果要按单个列检测重复项，可以使用 group by：

```
insert into table_without_dupes (column0, column1) select column0, column1 from table_with_dupes group by column0 
```

MySQL 将允许您在 select 中引用非聚合列，但请记住[文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html)说“服务器可以从每个组中自由选择任何值”，如果您想选择组中的一个特定行，您可能会找到[这个](http://dev.mysql.com/doc/refman/5.0/en/example-maximum-column-group-row.html)示例有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:57:27.243

通用方法

```
insert into destination(col1,col2)
select DISTINCT col1,col2 from source as s where not exists
(select * from destination as d where d.col1=s.col1) 
```

已编辑

```
 insert into destination(col1,col2)
   SELECT distinct col1,col2 from source 
```

已编辑（假设 col3 是重复的，并且您只需要它的一个副本。）

```
insert into destination(col1,col2,col3,....,colN)
SELECT col1,col2,col3,...,colN from source as s1 inner join
(
select col1,col2,max(col3) as  col3 
from source 
group by col1,col2
) as s2 on t1.col1=t2.col1 and t1.col2=t2.col2 and t1.col3=t2.col3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:01:11.993

```
insert into <dest_table_name>
select distinct * from <source_table_name>; 
```

# c# - 为什么字符串上的 Thread.VolatileRead 无法编译

> ID：11575907
> 
> 赞同：3
> 
> 时间：2012-07-20T08:44:22.713
> 
> 标签：c#, multithreading, volatile

```
class CFoo 
{
       private string _filePathFormatString;

       public string Foo()
       {
            System.Threading.Thread.VolatileRead(ref _filePathFormatString);
            ...
       }   
} 
```

字符串是对象，为什么这`VolatileRead`不能编译？我认为它应该匹配`VolatileRead(ref object)`签名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:53:27.700

如果在 C# 中使用“ref”传递参数，则形式参数和实际参数的类型必须完全相同。因此，您可以将字段更改为对象类型。第二种方法可能是使用[ReaderWriteLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)而不是易失性读取。

# java - 从小程序调用 Javascript 函数

> ID：11575910
> 
> 赞同：0
> 
> 时间：2012-07-20T08:44:30.963
> 
> 标签：java, javascript, applet

我想做的就是从 Applet 调用一个 javascript 函数并传递多个变量，我可以只用一个变量来做到这一点，但我想用多个来做到这一点。

从小程序调用 Javascript 函数并传递一个有效的变量：

```
 msg = "test";
    try {
        getAppletContext().showDocument
                (new URL("javascript:UpdateComputerDetails(\"" + msg + "\")"));
    }
    catch (MalformedURLException me) { } 
```

如何将多个变量传递给此函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:07:26.003

有 liveconnect 包，但我不知道它在跨浏览器上的表现如何：http: [//docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:10:29.830

您只需要使用：

```
arg1 = "foo";
arg2 = "bar";
try {
    getAppletContext().showDocument
            (new URL("javascript:UpdateComputerDetails(\"" + arg1 + "\", \"" + arg2 + "\")"));
}
catch (MalformedURLException me) { } 
```

要掌握的困难部分实际上是构建 URL，因为您必须以一种或另一种方式转义一些东西。您可以通过在 JS 中使用单引号来减轻痛苦：

```
"javascript:UpdateComputerDetails('" + arg1 + "', '" + arg2 + "')" 
```

现在，您需要小心，`arg1`并且`arg2`（如果您想要更多，其他参数也是如此）要么不包含`'`（或者`"`如果您使用双引号语法），或者在您构建 URL 之前正确转义这些参数。

# clearcase - 如何找到 ClearCase 活动的家属？

> ID：11575911
> 
> 赞同：1
> 
> 时间：2012-07-20T08:44:31.060
> 
> 标签：clearcase

如您所知，有时 UCM 活动依赖于另一个活动，有时其他活动依赖于该活动。我想知道如何轻松获取这些信息？假设我的输入是一个活动 ID - 我如何轻松获得这两个输出？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:36:26.910

活动依赖性是在交付或变基的上下文中确定的。

请参阅“[关于交付操作中的活动依赖项](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/about_activity_depend.htm)

![传递活动依赖](../Images/807f04870e21db04306199845ea94a5b.png)

因此，查看所涉及的活动的最简单方法可能是执行`deliver -preview`.

但除此之外，没有简单的方法列出这些依赖项，因为它们涉及：

*   版本依赖（同一个文件在两个活动中都有版本，使一个依赖于另一个）
*   [时间线](https://stackoverflow.com/questions/1643968/clearcase-ucm-cross-delivering-vs-delivering-upwards)（例如，参见“ [ClearCase：使用旧基线活动创建新基线](https://stackoverflow.com/questions/684895/clearcase-making-new-baseline-with-old-baseline-activities)”）：由交付/变基创建的基线，它将链接（即依赖的第二种形式）给定流中的*所有*活动。即使他们没有任何共同的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:23:02.553

```
REM output is space delimited list

view-context> cleartool lsact -fmt "%[contrib_acts]p" activityID@\pvob
act1 act2 
```

如果您制作 (mkbl) 并比较 (diffbl -act) 基线，您可以获得相同的信息以及递归传递信息。

从 ClearCase GUI（Project Explorer 和 ClearCase Explorer -> My Activities，您也​​可以右键单击一个活动并选择“Show Contributing Activities”。

该答案仅针对活动的一个方向。使用带有其他 %[xxx]p 格式说明符的基线作为基线应该允许正向和反向解析。

# jquery - 检查图像是否不存在然后隐藏一个 div

> ID：11575914
> 
> 赞同：1
> 
> 时间：2012-07-20T08:44:39.793
> 
> 标签：jquery, html, css

如果 div 中有图像，则隐藏 div。但如果图像确实存在，那么我需要保持 div 可见。

但它不起作用。这是我的代码：

**HTML：**

```
<table id="FeatureBox">
    <tbody>
    <tr>
      <td>
        <div id="productInfoGrid">
          <div id="ProductIconsTitle">
            <p>PRODUCT FEATURES</p>
          </div><img width="563" height="337" src="http://www.preserveshop.co.uk/images/black-jam-jar-lid-58mm.jpg" alt="http://www.preserveshop.co.uk/images/black-jam-jar-lid-58mm.jpg" style="cursor: -moz-zoom-in"><div style="clear:both;"></div>
        </div>
      </td>
    </tr>
  </tbody> 
```

**查询：**

```
if ($("#div#productInfoGrid:not(img)").length) {
    $("#productInfoGrid").hide();
} 
```

**JSFIDDLE**：http: [//jsfiddle.net/wJgpr/3/](http://jsfiddle.net/wJgpr/3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T08:47:03.887

```
if ( !$("#productInfoGrid").has("img") ) {
    $(this).hide();
} 
```

或更简单

```
$("#productInfoGrid").not(':has("img")').hide();​ 
```

[**演示**](http://jsfiddle.net/wwWCh/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T08:48:08.573

```
if ($("#productInfoGrid img").length == 0) {
    $("#productInfoGrid").hide();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T08:58:12.583

```
$("div#productInfoGrid").has('img').hide(); 
```

**[演示](http://jsfiddle.net/wJgpr/12/)**

### 笔记

`$("#div#productInfoGrid:not(img)")`应该`$("div#productInfoGrid:not(img)")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T08:57:29.380

您可以使用[.find()](http://api.jquery.com/find/) **（参考：[http](http://api.jquery.com/find/) ://api.jquery.com/find/ ）**

```
if ($("#productInfoGrid").find('img').length == 0) {
    $("#productInfoGrid").hide();
}
​ 
```

# magento - 在 Magento 中，当我用较低像素重新调整图像大小时，如何保持图像质量

> ID：11575915
> 
> 赞同：0
> 
> 时间：2012-07-20T08:44:39.430
> 
> 标签：magento

即使我用较低的图像像素重新调整它的大小，我也想以它的实际大小显示图像。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T09:47:49.807

什么？如果调整图片大小，则像素数会降低。没有办法在不损失质量的情况下调整图像大小。

# vim - Vim 打开带有空字符的 Powershell 转储文件

> ID：11575916
> 
> 赞同：0
> 
> 时间：2012-07-20T08:44:41.660
> 
> 标签：vim, powershell, encoding, logfiles, null-character

在 Powershell 中，我运行一些命令行脚本并将其转储：

```
PS> cmd /c D:\script.bat | tee ~/out.log 
```

然后，我在 vim 中打开这个日志，我看到的大致是这样的：

```
яю^M^@
^@C^@:^@\^@U^@s^@e^@r^@s^@>^@s^@e^@t^@ ^@D^@E^@B^@U^@G^@_^@F^@U^@L^@F^@I^@L^@L^@M^@E^@N^@T^@=^@-^@X^@r^@u^@n^@j^@d^@w^@p^@:^@t^@r^@a^@n^@s^@p^@o^@r^@t^@=^@d^@t^@_^@s^@o^@c^@k^@e^@t^@,^@a^@d^@d^@r^@e^@s^@s^@=^@3^@0^@0^@4^@,^@s^@e^@r^@v^@e^@r^@=^@y^@,^@s^@u^@s^@p^@e^@n^@d^@=^@n^@ ^@^M^@ 
```

和十六进制转储：

```
0000000: d18f d18e 0d00 0a00 4300 3a00 5c00 5500  ........C.:.\.U.
0000010: 7300 6500 7200 7300 3e00 7300 6500 7400  s.e.r.s.>.s.e.t.
0000020: 2000 4400 4500 4200 5500 4700 5f00 4600   .D.E.B.U.G._.F.
0000030: 5500 4c00 4600 4900 4c00 4c00 4d00 4500  U.L.F.I.L.L.M.E.
0000040: 4e00 5400 3d00 2d00 5800 7200 7500 6e00  N.T.=.-.X.r.u.n.
0000050: 6a00 6400 7700 7000 3a00 7400 7200 6100  j.d.w.p.:.t.r.a.
0000060: 6e00 7300 7000 6f00 7200 7400 3d00 6400  n.s.p.o.r.t.=.d.
0000070: 7400 5f00 7300 6f00 6300 6b00 6500 7400  t._.s.o.c.k.e.t.
0000080: 2c00 6100 6400 6400 7200 6500 7300 7300  ,.a.d.d.r.e.s.s.
0000090: 3d00 3300 3000 3000 3400 2c00 7300 6500  =.3.0.0.4.,.s.e.
00000a0: 7200 7600 6500 7200 3d00 7900 2c00 7300  r.v.e.r.=.y.,.s.
00000b0: 7500 7300 7000 6500 6e00 6400 3d00 6e00  u.s.p.e.n.d.=.n.
00000c0: 2000 0d00 0a                              .... 
```

如何配置 vim 以正常打开此类文件，而无需每次都删除这些空值？PS记事本打开文件时不显示空值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:08:14.467

您的文件以 UTF-16 编码；每个字符由 2 个字节表示（低端在前）。

只要`'encoding'`设置为可以代表文件中字符的东西（`utf-8`推荐，`latin1`不会做），就可以了，无需摆弄它。

你需要告诉 Vim 文件的编码。要么在打开时明确

```
:edit ++enc=utf-16le out.log 
```

或通过将值添加到（在具有 BOM 的文件之后，可以唯一标识）`'fileencodings'`：

```
:set fileencodings=ucs-bom,utf-16le,utf-8,default,latin1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:48:34.970

您的文件似乎是 UTF8 编码的。

要打开它，请使用如下编码参数启动 vim：

```
vim "+set encoding=utf-8" 
```

或者如果您已经在编辑文件，您可以按如下方式设置编码：

```
:set enc=utf-8 
```

# c++ - c++元组、向量和线程代码

> ID：11575920
> 
> 赞同：0
> 
> 时间：2012-07-20T08:45:02.880
> 
> 标签：c++, multithreading, boost, vector, tuples

我有这个代码：

```
 void threaded_function(Model_factory &mf, ppa::Node *root)
{

  boost::mutex::scoped_lock lock(result_mutex);
  typedef  vector<boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> >
  ::iterator traveling;

  if(!running_jobs.empty())
  {
      cout << "size of running " << running_jobs.size() << endl;
      boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> tuple_to_check = 
      running_jobs.front();
      running_jobs.pop();

      cout << "poping this object from running_jobs" << tuple_to_check << endl;
      cout << "new size of running " << running_jobs.size() << endl;

      lock.unlock();
      ppa::Node *tuplets_father = boost::get<0>(tuple_to_check);
      ppa::Node *first_son = boost::get<1>(tuple_to_check);
      ppa::Node *second_son = boost::get<2>(tuple_to_check);
      bool is_this_done = boost::get<3>(tuple_to_check);

      tuplets_father->start_alignment_new(&mf);

      lock.lock();
      cout << "size of the wait " << wait.size() << endl;

       boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> new_tuple
       = boost::make_tuple(tuplets_father, first_son, second_son, true);
       wait.push_back(new_tuple);
       cout << "pushing this object to waiting list" << new_tuple << endl; 
```

不必滚动的空间

```
 cout << "new size of the wait " << wait.size() << endl;  

     lock.unlock();

     lock.lock();

       for(traveling i = wait.begin(); i != wait.end(); i++)
      {
          if(boost::get<3>(*i) == true)
          {

              cout << "found in here pushing to running jobs " << *i <<  endl;
              boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool>  tuple = *i;
              wait.erase(i);
              running_jobs.push(tuple);

          }
      }
       lock.unlock();

  } 

  else
  {

      boost::this_thread::yield();

  } 
```

这是我的一部分输出：

```
 found in here pushing to running jobs (0 0x1dd00000142 0xffffffff00000143 1)    
 found in here pushing to running jobs (0 0 0 66)                                
found in here pushing to running jobs (0 0 0x1e000000142 67)                    
found in here pushing to running jobs (0 0x1e100000142 0xffffffff00000143 1)    
found in here pushing to running jobs (0 0 0 66)                                
found in here pushing to running jobs (0 0 0x1e400000142 67)                    
found in here pushing to running jobs (0 0x1e500000142 0xffffffff00000143 1)    
found in here pushing to running jobs (0 0 0 66)                                
found in here pushing to running jobs (0 0 0x1e800000142 67)                    
found in here pushing to running jobs (0 0x1e900000142 0xffffffff00000143 1)    
found in here pushing to running jobs (0 0 0 66)                                
found in here pushing to running jobs (0 0 0x1ec00000142 67) 
```

它将永远消失，我想知道错误在哪里，是否与逻辑有关？很可能是的，但我可以用一些新的眼睛，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:01:18.047

`vector::iterator i`您的代码通过调用无效

```
wait.erase(i); 
```

然后它增加无效`i`值并使用它来确定它是否应该跳出`for`循环。

您应该改用[`std::partition()`](http://www.cplusplus.com/reference/algorithm/partition/). 整个 for 循环可以替换为：

```
traveling running_jobs = 
                   std::partition( wait.begin(), wait.end(), is_not_running );

running_jobs.insert( running_jobs, wait.end() );

wait.erase( running_jobs, wait.end() ); 
```

`is_not_running`将是您创造的功能。这也会将复杂度从 O(n ² ) 降低到 O(n)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:55:33.287

您可能应该使用分区解决方案，但如果您只想修复您的代码，您应该更改您的 for 循环以正确递增 i，即：

```
for(traveling i = wait.begin(); i != wait.end();)
...
if (...)
{ 
    ...
    i = wait.erase(i);
    ...
}
else
{
     i++;
} 
```

# android - 重复几个小时后Android“无法播放视频”

> ID：11575922
> 
> 赞同：1
> 
> 时间：2012-07-20T08:45:04.483
> 
> 标签：android, android-videoview

我有一个在闪存卡中重复视频的应用程序。它正在工作并播放视频几个小时，但随后播放器崩溃（有时Android系统也会冻结），同时显示消息“无法播放视频”。

所以它不是文件或格式的问题，因为它播放视频。可能是 Android 平台的问题（我使用的是 2.1 应用程序）？

有什么方法可以捕获此错误并再次重新启动应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:01:01.970

如果您使用的是 a`VideoView`或 a`MediaPlayer`您可以通过 the 注册一个侦听器，`setOnErrorListener(MediaPlayer.OnErrorListener l)` 那么您可以`public boolean onError(MediaPlayer mp, int what, int extra)`在那里实现并处理错误

# c++ - 在 C# 中使用“cout”，如“Console.WriteLine”

> ID：11575923
> 
> 赞同：3
> 
> 时间：2012-07-20T08:45:04.407
> 
> 标签：c++, printf, cout

想象一下屏幕上有很多声明和信息要写出来

```
cout << "statement A :" << a << "\t statement B :" << B
     << "\t statement C :" << C << "\t statement D :" << D; 
```

在 C# 中你会写：

```
Console.WriteLine(
    "statement A :{0}\t statement B :{1}\t statement C :{2}\t statement D :{3}",
    a, b, c, d); 
```

就像`printf`在 C# 中一样，但我不想在我的程序中使用 C 语句；有没有办法`<<`在不使用 C++ 的情况下编写更少的代码`printf`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T08:49:13.460

使用`boost::format`例如。

```
cout << boost::format("statement A: %1%\tstatement B: %2%\tstatement C: %3%\t statement D: %4%") %a %b %c %d << endl; 
```

所以在 C# 中是`Console.WriteLine("statement A: {0}\t...", a, b, c, d);`

# python - python中的“容器”到底是什么？（以及所有的 python 容器类型是什么？）

> ID：11575925
> 
> 赞同：67
> 
> 时间：2012-07-20T08:45:12.180
> 
> 标签：python, containers

python 文档经常提到“容器”。[例如](http://docs.python.org/library/json.html?highlight=container#basic-usage)：

> **如果 check_circular 为 False（默认值：True），则容器类型**的循环引用检查将被跳过，循环引用将导致 OverflowError（或更糟）。

但我找不到任何官方的容器定义，也找不到它们的列表。

## 编辑

对于 Python 2.7.3：

**检查的内置类型是容器：**

（`isinstance(object, collections.Container)`返回`True`）

1.  `__contains__`定义了方法的容器：

    *   所有内置序列类型：列表、字节数组、字符串、Unicode 字符串和元组。
    *   字典
    *   所有内置集合类型：集合和frozensets
2.  没有`__contains__`定义方法的容器：

    *   xrange 对象

**检查不是容器的内置类型：**

（`isinstance(object, collections.Container)`返回`False`）：

*   整数对象
*   浮动对象
*   长物体
*   布尔对象
*   模块对象
*   文件对象
*   缓冲区对象
*   无对象

告诉我您检查了哪些其他内置类型`isinstance(object, collections.Container)` ，我会将它们添加到列表中。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-07-20T08:51:11.683

容器是包含任意数量的其他对象的任何对象。通常，容器提供了一种访问所包含对象并对其进行迭代的方法。

容器的例子包括`tuple`, `list`, `set`, `dict`; 这些是*内置容器*。[`collections`](http://docs.python.org/dev/library/collections.html#module-collections)模块中提供了更多容器类型。

严格来说，[`collections.abc.Container`](http://docs.python.org/dev/library/collections.abc.html#collections.abc.Container)抽象基类（[`collections.Container`](http://docs.python.org/library/collections.html#collections.Container)在 Python2 中）适用于任何`in`通过`__contains__`魔法方法支持运算符的类型；因此，如果您可以编写`x in y`then`y`通常*是一个容器，但并非总是如此：**容器*和一般*可迭代*对象之间的一个重要区别在于，当迭代时，容器将返回它们持有引用的现有对象，而生成器和例如`file`对象将创建每次一个新对象。这对垃圾收集和深度对象遍历（例如`deepcopy`和序列化）有影响。

举个例子，`iter(lambda: random.choice(range(6)), 0)`支持`in`算子，但肯定*不是*容器！

`Collections.abc.Container`抽象基类仅考虑`__contains__`魔术方法而不考虑支持运算符的其他方式的意图`in`是，真正的容器应该能够在单个操作中测试包含，而不会明显改变内部状态。由于`Collections.abc.Container`定义`__contains__`为抽象方法，因此可以保证 if `isinstance(x, collections.abc.Container)`then`x`支持该`in`运算符。

那么在实践中，所有的容器都会有这个`__contains__`神奇的方法。然而，当测试一个对象是否是一个容器时，如果子类检查发生变化，你应该使用它`isinstance(x, collections.abc.Container)`来保持清晰和向前兼容。`Container`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-20T08:54:31.947

根据[http://docs.python.org/dev/library/collections.abc.html#module-collections.abc](http://docs.python.org/dev/library/collections.abc.html#module-collections.abc)，容器的最一般定义只是一个实现`__contains__`. 一般来说，像“容器”或“序列”这样的 Python 概念不是抽象定义的；他们的行为是“鸭式”的。也就是说，容器是您可以在其上使用`in`运算符的东西。

Python 内置容器类型是 tuple、list、dict、set、frozenset 和 str 和 unicode（或 Python 3 中的 bytes 和 str），以及其他一些技术上属于类型但在特定上下文之外不常用的构造（例如，缓冲区对象和 xrange 对象）。`collections`模块中提供了其他容器类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:57:12.517

容器都是包含其他对象（如`list`or ）的 python 对象`dict`。`Container`类型是 ABC，它的行为类似于接口。Container 是实现该`__contains__`方法的类。

这是[文档](http://docs.python.org/dev/library/collections.abc.html#collections-abstract-base-classes)

# silverlight-5.0 - 从 Silverlight 下载并打开文件

> ID：11575927
> 
> 赞同：2
> 
> 时间：2012-07-20T08:45:22.407
> 
> 标签：silverlight-5.0

我的 silverlight 5 应用程序有一个第三方网格。我需要导出网格并为用户机器打开 excel。网格支持在导出中写入内容的`Stream stream = dialog.OpenFile()`导出功能工作正常。新要求是打开文件而不是只保存文件。我无法在 OOB 中运行我的应用程序，我也讨厌将文件推送到我的服务/网站并从那里下载文件。是否有任何有效的解决方法或解决方案可以在用户的​​ excel 应用程序中打开内容而不使应用程序受证书信任？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T09:29:58.303

Silverlight 的一项基本安全功能是在浏览器中运行且不作为受信任的应用程序运行时**不允许**启动其他应用程序甚至打开网站。

因此，正如您可能已经猜到的那样（因为这个问题大约有一年半的时间没有答案），您的问题的答案是：不，您的问题没有有效的解决方法。

我自己也遇到了这个问题，并寻求将文件发送到网络服务并将其存储在网络共享中的解决方案。然后用户可以从那里打开它......

# validation - 方法所需的先决条件应该由方法还是调用代码来验证？

> ID：11575934
> 
> 赞同：1
> 
> 时间：2012-07-20T08:45:52.773
> 
> 标签：validation, methods, preconditions

要使用一个虚构的示例，假设我有一个 form.submit() 方法，并且我想在提交之前验证表单。验证应该在调用代码中的方法内部还是外部？

如果我将验证放在方法中，那么我可以确保它总是被检查，而不用担心有人在不满足条件的情况下调用该方法。但是，对于阅读调用代码的人来说，验证正在发生可能并不明显，导致他们通过在调用代码中添加自己的检查来检查两次。如果他们在调用代码中看到的只是 form.submit()，他们可能没有意识到它正在执行验证，从而导致他们通过在方法调用周围添加 if 条件来在调用代码中复制它。

处理这个问题的正确方法是什么？

```
public void submit() {
    if(this.isValid()) {
        // do submission
    }
}

...

form.submit(); 
```

或者

```
public void submit() {
    // do submission
}

...

if(form.isValid())
    form.submit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:17:23.573

```
public void validateAndSubmit() {
    if(this.isValid()) {
        this.submitWhenValid()
    }
}
public void submitWhenValid() {
    // do submission
}
...

form.validateAndSubmit(); 
```

# android - Doclava 在文档中显示私有方法

> ID：11575938
> 
> 赞同：-1
> 
> 时间：2012-07-20T08:46:09.920
> 
> 标签：android, javadoc, private

我正在使用 doclava 为我的 Android 项目生成文档。我希望文档显示每个变量、成员和方法。doclava 的文档指出您应该传递 -hidden 标志或 -private 标志来为私有成员和方法生成文档。

我正在为我的 doclava 使用以下 ANT 构建

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." default="doc" name="api docs">
<target name="doc" description="my docs">
    <javadoc destdir="./" verbose="on" 

        classpath="/Users/johndoe/android-sdks/platforms/android-16/android.jar;"
        sourcepath="../gen;../src"
        maxmemory="512m"

        docletpath="doclava.jar"
        >
        <doclet name="com.google.doclava.Doclava" >
        <param name="-stubs" value="build/stubs" />

        <param name="-hdf"/> <param name="project.name"/> <param name=" "/>
        <param name="-templatedir" /> <param name="template" />
        <param name="-private" />
        <param name="-generatesources" />
        <!-- versioning -->
         <param name="-since"/> <param name="./previous.xml"/> <param name="v1" />
        <param name="-apiversion" value="v2"/>
        <!-- federation -->
        <param name="-federate" /><param name="JDK"/>
        <param name="http://download.oracle.com/javase/6/docs/api/index.html?"/>
        <param name="-federationxml"/><param name="JDK"/>
        <param name="http://doclava.googlecode.com/svn/static/api/openjdk-6.xml"/>

       <param name="-federate" /><param name="android"/>
        <param name="http://d.android.com/reference"/>
        <param name="-federationxml"/><param name="android"/>
        <param name="http://doclava.googlecode.com/svn/static/api/android-8.xml"/> 

        </doclet>
    </javadoc>
</target>
</project> 
```

但是 doclava 仍然只会生成公开的方法和成员。

有什么想法我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:57:32.290

`access="private"`在您的`<javadoc />`标签下添加

# javascript - Jquery each in 方法

> ID：11575939
> 
> 赞同：2
> 
> 时间：2012-07-20T08:46:10.660
> 
> 标签：javascript, jquery, methods, this, each

我有一个班级播放列表：

```
function Playlist() {
    this.episodes = [ /*episode list*/ ];
}; 
```

我想制作一个显示每一集的方法：

```
Playlist.prototype.display = function() {
    $('.episodeList').each(function(index) {
        $(this).children('title').text(this.episodes[index].title);
    });
} 
```

问题是最后的“this”，在“.episodes[index]”之前代表选择的dom对象，而不是我的播放列表。

我怎么解决这个问题 ？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:52:35.950

将函数绑定到您的上下文：

```
$('.episodeList').each($.proxy(function(index, elem) {
    $(elem).children('title').text(this.episodes[index].title);
}, this)); 
```

更多关于[`jQuery.proxy`](http://api.jquery.com/jQuery.proxy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:18:32.377

如果`each`在 dom 元素上使用，`this`则每个内部都有对 dom 元素的引用

例如：

```
Playlist.prototype.display = function(e)
{                                       
    $('.episodeList').each(function(index) {                                  
            console.log(this)                                       
    });
} 
```

`console.log`打印 dom 元素，它是正确的。现在将控制台日志放在每个外部，如下所示：

```
Playlist.prototype.display = function(e)
{   
    console.log(this)                            
    $('.episodeList').each(function(index) {                                  

    });
} 
```

现在`console.log`应该打印 PlayList 函数（你的类）。因此，每个范围内的“this”都引用了 dom 元素，但`Playlist.prototype.display`范围内的 this 引用了 Playlist 函数。

解决方案是：

```
Playlist.prototype.display = function(e)
{   
    var self = this;                            
    $('.episodeList').each(function(index) {                                  
        console.log(self)
        console.log(this)                   
    });
} 
```

您需要从 Playlist 范围中获取“this”并将其属性赋予 self var，因此现在 self 可以参考 Playlist。现在你做每一个，所以当前每个中的 this 都引用了 dom 元素，但 self 变量仍然引用了播放列表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T08:52:56.207

在您的代码`$(this)=episodes[index]`中，因为它在`each`函数中。我想这就是你想要的

```
Playlist.prototype.display = function() {
  var element=$(this);

  $('.episodeList').each(function(index,item) {
        item.children('title').text(element.episodes[index].title);
    });
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-20T08:51:50.180

Javascript 中的一个常见做法是创建一个新变量来存储当前类，因为`this`变量的内容随上下文而变化。考虑类似的东西

```
 function Playlist()
    {
        var self = this;
        this.episodes = [/*episode list*/];

        this.display = function()
        {
            $('.episodeList').each(function(index) {
                $(this).children('title').text(self.episodes[index].title);
            });
        }
    }; 
```

为您的播放列表类定义，并调用 myPlaylist.display() 来显示内容。

# android - 在下载文件之前从 URL 解析文件名

> ID：11575943
> 
> 赞同：41
> 
> 时间：2012-07-20T08:46:32.083
> 
> 标签：android, download

我正在从 URL 下载 ePub 文件。

现在我想实现一种机制，如果用户尝试重新下载相同的文件，他应该得到警告/错误消息，并且**不应该**再次下载该文件。

为了实现这一点，我需要检查我的库中存在的文件的名称以及用户尝试下载的文件的名称。

但我只有[这个下载链接](http://dl.dropbox.com/u/1177388/flagship_july_4_2010_flying_island_press.epub)，而不是文件名。

如何在下载前获取文件名以便与现有文件进行比较？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-20T08:52:41.730

在 android 中，您可以使用[guessFileName() 方法](https://developer.android.com/reference/android/webkit/URLUtil.html#guessFileName(java.lang.String,%20java.lang.String,%20java.lang.String))：

```
URLUtil.guessFileName(url, null, null) 
```

或者，Java 中的***简单解决方案***可能是：

```
String fileName = url.substring(url.lastIndexOf('/') + 1); 
```

（假设您的网址格式为`http://xxxxxxxxxxxxx/filename.ext`：）

**更新 2018 年 3 月 23 日**

这个问题得到了很多点击，有人评论我的“简单”解决方案不适用于某些网址，所以我觉得有必要改进答案。

如果您想处理更复杂的 url 模式，我在下面提供了一个示例解决方案。它很快就变得相当复杂，我很确定我的解决方案仍然无法处理一些奇怪的情况，但它仍然存在：

```
public static String getFileNameFromURL(String url) {
    if (url == null) {
        return "";
    }
    try {
        URL resource = new URL(url);
        String host = resource.getHost();
        if (host.length() > 0 && url.endsWith(host)) {
            // handle ...example.com
            return "";
        }
    }
    catch(MalformedURLException e) {
        return "";  
    }

    int startIndex = url.lastIndexOf('/') + 1;
    int length = url.length();

    // find end index for ?
    int lastQMPos = url.lastIndexOf('?');
    if (lastQMPos == -1) {
        lastQMPos = length; 
    }

    // find end index for #
    int lastHashPos = url.lastIndexOf('#');
    if (lastHashPos == -1) {
        lastHashPos = length;   
    }

    // calculate the end index
    int endIndex = Math.min(lastQMPos, lastHashPos);
    return url.substring(startIndex, endIndex);
} 
```

此方法可以处理这些类型的输入：

```
Input: "null" Output: ""
Input: "" Output: ""
Input: "file:///home/user/test.html" Output: "test.html"
Input: "file:///home/user/test.html?id=902" Output: "test.html"
Input: "file:///home/user/test.html#footer" Output: "test.html"
Input: "http://example.com" Output: ""
Input: "http://www.example.com" Output: ""
Input: "http://www.example.txt" Output: ""
Input: "http://example.com/" Output: ""
Input: "http://example.com/a/b/c/test.html" Output: "test.html"
Input: "http://example.com/a/b/c/test.html?param=value" Output: "test.html"
Input: "http://example.com/a/b/c/test.html#anchor" Output: "test.html"
Input: "http://example.com/a/b/c/test.html#anchor?param=value" Output: "test.html" 
```

你可以在这里找到完整的源代码：[https ://ideone.com/uFWxTL](https://ideone.com/uFWxTL)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-03-30T15:50:39.000

尝试使用`URLUtil.guessFileName(url, null, null)`例如。我认为这是最好的 Android 方式。

更多信息在这里：[https://developer.android.com/reference/android/webkit/URLUtil.html#guessFileName(java.lang.String, java.lang.String, java.lang.String)](https://developer.android.com/reference/android/webkit/URLUtil.html#guessFileName%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-07T21:46:45.640

把事情简单化 ：

```
/**
 * This function will take an URL as input and return the file name.
 * <p>Examples :</p>
 * <ul>
 * <li>http://example.com/a/b/c/test.txt -> test.txt</li>
 * <li>http://example.com/ -> an empty string </li>
 * <li>http://example.com/test.txt?param=value -> test.txt</li>
 * <li>http://example.com/test.txt#anchor -> test.txt</li>
 * </ul>
 * 
 * @param url The input URL
 * @return The URL file name
 */
public static String getFileNameFromUrl(URL url) {

    String urlString = url.getFile();

    return urlString.substring(urlString.lastIndexOf('/') + 1).split("\\?")[0].split("#")[0];
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-13T15:42:59.067

我认为使用 URL#getPath() 应该可以简化事情。

```
public static String getFileNameFromUrl(URL url) {

    String urlPath = url.getPath();

    return urlPath.substring(urlPath.lastIndexOf('/') + 1);
} 
```

见，[http://developer.android.com/reference/java/net/URL.html#getPath()](http://developer.android.com/reference/java/net/URL.html#getPath())

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-02T08:48:32.047

您实际上不必比较文件名。只需为具有绝对路径的文件创建**File**对象并检查文件是否存在。

```
protected boolean need2Download(String fileName) {

    File basePath = new File(BOOK_STORE_PATH);

    File fullPath = new File(basePath, fileName);

    if (fullPath.exists())
        return false;
    return true;
}

protected void downloadFile(String url) {
    String fileName = url.substring(url.lastIndexOf('/') + 1);

    if (need2Download(fileName)) {
        // download
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-26T10:51:55.647

`FilenameUtils`从中获取文件名`apache commons-io`

```
URL url = URL(fileUrl)
String fileName = FilenameUtils.getName(url.getPath()) 
```

为此`commons-io`在 build.gradle(app) 中添加依赖项

```
implementation "commons-io:commons-io:2.6" 
```

它还从复杂的 URL 中提取文件名，如下所示

`http://www.example.com/some/path/to/a/file.xml?foo=bar#test`

# python - 如何在python中生成具有特定长度的任意字符串？

> ID：11575946
> 
> 赞同：1
> 
> 时间：2012-07-20T08:46:50.963
> 
> 标签：python, string

我需要一个 100000 个字符长的字符串。在 python 中生成这样一个字符串的最有效和最短的方法是什么？
字符串的内容并不重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T08:52:10.287

就像是：

```
'x' * 100000 # or,

''.join('x' for x in xrange(100000)) # or,

from itertools import repeat
''.join(repeat('x', times=100000)) 
```

或者是一些字母的混合：

```
from string import ascii_letters
from random import choice
''.join(choice(ascii_letters) for _ in xrange(100000)) 
```

或者，对于一些随机数据：

```
import os
s = os.urandom(100000) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T08:49:37.067

你可以简单地做

```
s = 'a' * 100000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T09:01:47.330

由于效率很重要，这里是目前提到的一些方法的快速基准：

```
$ python -m timeit "" "'a'*100000"
100000 loops, best of 3: 4.99 usec per loop

$ python -m timeit "from itertools import repeat" "''.join(repeat('x', times=100000))"
1000 loops, best of 3: 2.24 msec per loop

$ python -m timeit "import array" "array.array('c',[' ']*100000).tostring()"
100 loops, best of 3: 3.92 msec per loop

$ python -m timeit "" "''.join('x' for x in xrange(100000))"
100 loops, best of 3: 5.69 msec per loop

$ python -m timeit "import os" "os.urandom(100000)"
100 loops, best of 3: 6.17 msec per loop 
```

毫不奇怪，在发布的那些中，使用字符串乘法是迄今为止最快的。

另请注意，乘以单个字符比乘以多字符字符串更有效（以获得相同的最终字符串长度）。

```
$ python -m timeit "" "'a'*100000"
100000 loops, best of 3: 4.99 usec per loop

$ python -m timeit "" "'ab'*50000"
100000 loops, best of 3: 6.02 usec per loop

$ python -m timeit "" "'abcd'*25000"
100000 loops, best of 3: 6 usec per loop

$ python -m timeit "" "'abcdefghij'*10000"
100000 loops, best of 3: 6.03 usec per loop 
```

在 Python 2.7.3 上测试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T08:49:41.247

字符串可以使用乘法运算符：

```
"a" * 100000 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T08:53:41.750

尝试制作一个空白字符数组。

```
import array
longCharArray = array.array('c',[' ']*100000) 
```

`' '`这将分配一个大小为 100000的字符数组

```
longCharArray.tostring() 
```

将转换为字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T08:49:48.987

只需选择一些字符并重复 100000 次：

```
 "a"*100000 
```

为什么你会想要这个是另一个问题。. .

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-20T08:53:53.690

你可以尝试这样的事情：

```
"".join(random.sample(string.lowercase * 385,10000)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-20T08:54:51.897

作为一个班轮：

```
''.join([chr(random.randint(32, 126)) for x in range(30)]) 
```

更改 range() 值以获得不同长度的字符串；更改 randint() 的边界以获得不同的字符集。

# java - 将获取请求中的 JSON 数据作为请求正文传递

> ID：11575947
> 
> 赞同：10
> 
> 时间：2012-07-20T08:46:59.587
> 
> 标签：java, android, httpwebrequest, httpurlconnection

嗨，我必须向 url
[http://onemoredemo.appspot.com/group?authToken=access_token&authMethod=oauth发送一个获取请求](http://onemoredemo.appspot.com/group?authToken=access_token&authMethod=oauth)

请求正文包含 json 对象，如下所示。

```
{"goupid":"some_variable"
} 
```

下面是一段用于发送 get 请求的 java 代码：

```
URL url1=new URL("http://onemoredemo.appspot.com/group?authToken="+access_token+"&authMethod=oauth");
conn=(HttpURLConnection) url1.openConnection();
conn.addRequestProperty("Content-type", "application/x-www-form-urlencoded");

conn.setRequestMethod("GET");
conn.setDoOutput(true);
JSONObject jj=new JSONObject();
HttpGet get;
get.

jj.put("groupid", "testing@iritesh.com");
conn.addRequestProperty("Content-TYpe", "application/json");
conn.getOutputStream().write(jj.toString().getBytes());
conn.connect();
InputStream is=conn.getInputStream(); 
```

我收到一个错误`java.io.FileNotFoundException`。

我从 mozilla 浏览器向 url
[http://onemoredemo.appspot.com/group?authToken=ya29.AHES6ZRDl-RqiA8W0PhybU_hMluHrHRjlJBvq06Vze0izJq0Ovjc088&authMethod=oauth](http://onemoredemo.appspot.com/group?authToken=ya29.AHES6ZRDl-RqiA8W0PhybU_hMluHrHRjlJBvq06Vze0izJq0Ovjc088&authMethod=oauth)
发送了一个请求， 它给了我正确的响应，但现在它超过一个小时，所以 acccesstoken 过期了。我知道在 get 请求中发送参数和 requestbody 很奇怪，但我必须发送它。

请帮助如何在获取请求的请求正文中发送 json 对象。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-20T08:55:16.100

不要这样做。

阅读： [http ://tech.groups.yahoo.com/group/rest-discuss/message/9962](http://tech.groups.yahoo.com/group/rest-discuss/message/9962)

> “是的。换句话说，任何 HTTP 请求消息都允许包含消息正文，因此必须在解析消息时考虑到这一点。但是，GET 的服务器语义受到限制，因此正文（如果有的话）没有语义意义解析的要求与方法语义的要求是分开的。
> 
> 所以，是的，您可以使用 GET 发送正文，但不，这样做从来没有用处。
> 
> 这是 HTTP/1.1 分层设计的一部分，一旦规范被划分（正在进行中），它​​将再次变得清晰。”

有关此检查的其他有趣讨论：

[https://stackoverflow.com/a/978094/550967](https://stackoverflow.com/a/978094/550967)

[https://stackoverflow.com/a/978173/550967](https://stackoverflow.com/a/978173/550967)

[https://stackoverflow.com/a/978519/550967](https://stackoverflow.com/a/978519/550967)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:57:42.490

不读取 GET 请求的正文。

您是否尝试将其添加到参数中：

[http://onemoredemo.appspot.com/group?authToken=access_token&authMethod=oauth](http://onemoredemo.appspot.com/group?authToken=access_token&authMethod=oauth) **&goupid=some_variable**

# jquery - MVC4 Ajax 请求

> ID：11575950
> 
> 赞同：0
> 
> 时间：2012-07-20T08:47:17.647
> 
> 标签：jquery

这是我的控制器类

```
[HttpGet]
    public ActionResult ContactUs()
    {
        if (Request.IsAjaxRequest())
        {
            return PartialView("_ContactUs");
        }

        return View();
    } 
```

我的问题返回 PartialView("_ContactUs"); 没有在 MVC4 中直接执行 return View(); 正在执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:18:32.857

您需要使用操作方法选择器来区分 Ajax 和非 Ajax 请求。因此，实现 ActionMethodSelectorAttribute 并使用该属性 (true) 装饰您的操作方法。请参阅下面的示例代码。

```
[HttpGet]
[MyAjax(true)]
public ActionResult ContactUs()
{
    if (Request.IsAjaxRequest())
    {
        return PartialView("_ContactUs");
    }

    return View();
}

//.. 

public class MyAjaxAttribute : ActionMethodSelectorAttribute
    {
        private readonly bool _ajax;
        public AjaxAttribute(bool ajax)
        {
            _ajax = ajax;
        }

        // Determines whether the action method selection is valid for the specified controller context
        public override bool IsValidForRequest(
                               ControllerContext controllerContext,
                               MethodInfo methodInfo)
        {
            return _ajax == controllerContext.HttpContext.Request.IsAjaxRequest();
        }
    } 
```

# database - 当Phonegap中的数据库版本更改时会发生什么

> ID：11575951
> 
> 赞同：2
> 
> 时间：2012-07-20T08:47:17.233
> 
> 标签：database, cordova

我想更改已经存在的数据库的数据库架构。我应该怎么办？我必须更改数据库版本吗？这是[Phonegap](http://docs.phonegap.com/en/1.4.1/phonegap_storage_storage.md.html#version)描述的一个例子。（很短）我确实尝试过，但我不明白。谁能给我一个例子？

```
var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
db.changeVersion("1.0", "1.1"); 
```

# jquery-ui - Orchard Contrib.DateTimeField 缺少样式和脚本

> ID：11575952
> 
> 赞同：2
> 
> 时间：2012-07-20T08:47:19.950
> 
> 标签：jquery-ui, orchardcms, datetimepicker

`我已将 DateTime 字段模块安装到 Orchard 并为我的自定义部分分配了两个字段，但是当导航到实现自定义部分的自定义类型的管理编辑页面时，我收到如下错误：

```
A 'stylesheet' named 'jQueryUtils_TimePicker' could not be found. 
```

在 Contrib.DateTime.cshtml 视图中查看时，我发现需要以下两个资源，但在 jQuery 模块的资源清单中找不到它们。

1.  **风格**：`jQueryUtils_TimePicker`
2.  **脚本**：`jQueryUtils_TimePicker`

这些要在哪里定义和存储？

提前致谢。

PS如果我将两者都更改为`jQueryUI_TimePicker`（在jquery模块资源清单中定义了脚本和样式），那么它不会引发错误，但时间选择器不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:20:46.083

Contrib.DateTimeField 自 1.4 以来已过时，因此您不应使用它。

DateTimeField 已集成在 Orchard.Fields 中，具有核心功能。

# ruby-on-rails - Ruby on Rails: Ransack 未定义的方法`result`

> ID：11575954
> 
> 赞同：0
> 
> 时间：2012-07-20T08:47:23.650
> 
> 标签：ruby-on-rails, ruby, search, ransack

我是 ROR 的新手，所以这可能是一个非常简单的问题。

我刚刚为我的 Web 应用程序安装了 ransack gem。我想在我的数据库中搜索项目名称和客户。我有一个索引页面视图，用于我的主页，然后是一个搜索页面，它使用我创建的搜索操作。

```
def index
@projects = Project.all

  respond_to do |format|
  format.html # index.html.erb
  format.json { render :json => @projects }
  end
 end

def search

  @q = Project.search(params[:q])
  @project_search = @q.result(:distinct => true)

  respond_to do |format|
    format.html # search.html.erb
    format.json { render :json => @projects }
  end
end 
```

这是我的搜索视图的一部分：

```
<%= search_form_for @q do |f| %>
  <%= f.label :project_name %>
  <%= f.text_field :project_name %>
  <%= f.label :client %>
  <%= f.text_field :client %>
  <%= f.submit %>
<% end %> 
```

当我尝试加载搜索页面时，我收到此错误：

未定义的方法“搜索”

提取的源代码在我的项目控制器中的这一行

```
@q = Project.search(params[:q]) 
```

希望这是一个简单的解决方法，您可以解释我做错了什么，以便我学习。

任何帮助都将不胜感激。

提前致谢！

编辑：我在上面添加了我的索引操作，以向您展示我有一个索引操作和一个搜索操作。这也是我的 routes.rb 文件。

```
FinalApp::Application.routes.draw do
resources :projects
match "search" => "projects#search", :as => :search
root :to => 'projects#index'
end 
```

第二次编辑：

我没有重新启动我的服务器。我现在有另一个错误。

未定义的方法“结果”

提取的源代码在我的项目控制器中的这一行

```
@project_search = @q.result(:distinct => true) 
```

第三次编辑：

另一个错误：/

未定义的方法“schema_cache”

提取的源代码在我的项目控制器中的这一行

```
@q = Project.search(params[:q]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:31:42.097

并且您确定在将 Gem 添加到 Gemfile 并重新启动实例后运行 Bundle Install 或具有正确的开发环境设置？

Ransack 添加了搜索方法，因此看起来它没有正确安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:20:14.780

> **在另一个问题中解决了问题：[Ruby on Rails：高级搜索](https://stackoverflow.com/questions/11609005/ruby-on-rails-advanced-search/11610450#11610450)**

我从未使用过 gem `ransack`，但我认为您的第一行`def search`应该是`def index`并且您在`search method`其他地方定义...或者您是否`search`在您的 routes.rb 中包含了一条路线？

无论如何，您正在寻找的是一个非常简单的搜索，我认为您不需要任何宝石。

您可以在模型中定义搜索方法：

产品.rb

```
def self.search(search)
  if search
    find(:all, :conditions => ['name LIKE ?', "%#{search}%"])
  else
    find(:all)
  end
end 
```

products_controller.rb：

```
def index
  @projects = Project.search(params[:search])
end 
```

搜索表单可以包含在您的应用程序的任何位置：

```
<% form_tag projects_path, :method => 'get' do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %> 
```

请看[这里](http://railscasts.com/episodes/37-simple-search-form/)，如果您需要高级搜索，请看[这里](http://railscasts.com/episodes/111-advanced-search-form/)。

我希望它有帮助

# java - JCreator Java 中的斯坦福 POS 标记器？

> ID：11575956
> 
> 赞同：0
> 
> 时间：2012-07-20T08:47:32.440
> 
> 标签：java, part-of-speech

```
import java.io.IOException;

import edu.stanford.nlp.tagger.maxent.MaxentTagger;

public class TagText {
    public static void main(String[] args) throws IOException, ClassNotFoundException {

        // Initialize the tagger
        MaxentTagger tagger = new MaxentTagger("taggers/models/wsj-0-18-bidirectional distsim.tagger");

        // The sample string
        String sample = "This is a sample text.";

        // The tagged string
        String tagged = tagger.tagString(sample);

        // Output the result
        System.out.println(tagged);
     }
} 
```

这是我的代码，在 JCreator > Configure >Option > JDK Tools

在选择工具类型：编译器

我设置的参数`-g -source 1.5 -classpath "$[ClassPath]" -d "$[OutputPath]" -classpath stanford-postagger.jar $[JavaFiles]`

在运行应用程序中，我设置的参数`-classpath "$[ClassPath]" -classpath stanford-postagger.jar edu.stanford.nlp.tagger.maxent.MaxentTagger $[JavaClass]`

该`stanford-postagger`文件位于 location 中`C:\prototype`。当我运行程序时，它会显示结果：

```
Exception in thread "main" java.lang.RuntimeException: unknown argument(s): "TagText"
    at edu.stanford.nlp.tagger.maxent.TaggerConfig.<init>(TaggerConfig.java:139)
    at edu.stanford.nlp.tagger.maxent.TaggerConfig.<init>(TaggerConfig.java:133)
    at edu.stanford.nlp.tagger.maxent.MaxentTagger.main(MaxentTagger.java:1603)

Process completed. 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:39:24.037

在运行应用程序中删除参数：

```
edu.stanford.nlp.tagger.maxent.MaxentTagger 
```

# cocoa - 当 NSWindow 进入全屏时，视图会损坏（动画违反了窗口的最小尺寸）

> ID：11575959
> 
> 赞同：0
> 
> 时间：2012-07-20T08:47:36.150
> 
> 标签：cocoa, core-animation, fullscreen, nswindow

我的主 NSWindow 包含限制在某个大小范围内的 UI，否则它可能会损坏。我将窗口限制在一个大小范围内

[myWindow setContentsMaxSize:maxSize] [myWindow setContentsMinSize:minSize]

这适用于用户拖动边缘或尺寸框。

当用户按下“全屏”按钮时，Lion 会启动一个动画，该动画将

1.  将窗口缩小到当前大小以下，
2.  在几个步骤中，增加它的大小，直到它达到全屏表示大小。

如果窗口以最小尺寸开始，此动画会将其缩小到定义的最小尺寸以下，并将损坏我的 UI 无法修复（用户需要重新启动应用程序）。我的视图正在接收 setFrameSize: 大小不受支持。

我的问题

*   这可以被认为是可可虫吗？
*   我在视图层次结构中做错了吗？
*   我可以以某种方式防止损坏，而不用替换全屏操作系统标准动画吗？
*   为什么标准动画不基于窗口内容的“快照”，而不是
    在整个动画中实时调整整个视图层次结构的大小？这肯定效率不高。
*   有没有一种简单的方法来应用另一个对我来说不会造成破坏的标准过渡？
*   有人可以“节省”几行代码来执行不会低于最小值的简单线性调整大小动画吗？

谢谢。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:05:34.660

我还研究**了全屏动画行为，这是它的工作原理：**

它也是基于拍摄窗口内容的快照，但有一些改进。它在一些控制点上拍摄几个快照：512、1024、2048 等。
在我输入全屏 2560x1440 的情况下，我的 400 像素宽的窗口拍摄了 512 像素的快照，然后是 1024，然后是 2560 宽的快照。我不知道这种行为是否是所有情况的默认行为，但这是我自己调查的结果。

关于**设置最小/最大窗口大小的问题：**
Interface Builder 中设置的最小窗口大小对我有用，但最大约束不适用。我目前正在研究它，这个记录在案的方法应该适合你：

将此代码放入您的窗口委托中。

```
static const NSSize kWindowMinSize = {100, 100};
static const NSSize kWindowMaxSize = {100500, 100500};

...

- (NSSize)windowWillResize:(NSWindow *)sender toSize:(NSSize)frameSize
{
    frameSize.width = MAX(kWindowMinSize.width, MIN(kWindowMaxSize.width, frameSize.width));
    frameSize.height = MAX(kWindowMinSize.height, MIN(kWindowMaxSize.height, frameSize.height));
    return frameSize;
} 
```

希望对你有帮助！

# html - 表单动作属性中的片段标识符

> ID：11575961
> 
> 赞同：3
> 
> 时间：2012-07-20T08:47:52.890
> 
> 标签：html, forms, fragment-identifier

我有一个表格，我想发布到同一页面。表单操作包含页面上包含它的元素的片段标识符 - 我想要它做的是发布数据，然后在同一点重新加载同一页面，这样用户就不需要向下滚动。

例如 index.php：

```
<div>
  some very long content that pushes my form down the page
</div>
<div id="myDiv">
  <form action="index.php#myDiv" method="post">
    <input name="abc" value="123"/>
    <input type="submit" value="submit"/>
  </form>
</div> 
```

但是我有几个问题 - 首先我不确定这是否是好的做法，并且找不到关于片段标识符*被认为是好的做法的太多信息。*

其次，其他一些人说，有时当他们单击提交时，表单会“跳到顶部”。我还不能重现这一点，但似乎很明显，浏览器没有发布数据，而是使用片段标识符操作。

谁能建议一个更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:07:00.717

在表单提交后使用 header() 函数和标识符重定向用户。

```
<div>
  some very long content that pushes my form down the page
</div>
/*Use header() to redirect the person on the #point*/
<?php
//form data goes here, if it passes everything then use
header('Location:index.php#myDiv');
exit;
?>
<div id="myDiv">
  <form action="index.php" method="post">
    <input name="abc" value="123"/>
    <input type="submit" value="submit"/>
  </form>
</div> 
```

# sql - 如何在相关表中查找重复值并更新它们

> ID：11575962
> 
> 赞同：-1
> 
> 时间：2012-07-20T08:47:53.893
> 
> 标签：sql, sql-server

这是我的情况。

**表格1：**

```
DOCUMENT_ID,
GUID 
```

**表 2：**

```
DOCUMENT_ID,
FILE 
```

这些表是由 连接的`DOCUMENT_ID`，这意味着`TABLE2`可以有一个或多个相同的行`DOCUMENT_ID`。

我的问题是`TABLE2`整个一堆的值`DOCUMENT_ID`具有相同的`FILE`值。

我需要一个 SQL 查询，它可以让我全部了解并计算其中有`GUID`多少行具有完全相同的值（以便我可以将其复制到 Excel）。`TABLE2``DOCUMENT_ID``FILE``GUID`

然后我需要为这些情况更新 UPDATE`TABLE2`的`FILE`列。

例如，如果`DOCUMENT_ID`有三行`TABLE2`具有相同的`FILE`值，我需要通过添加类似的后缀来更新其中的两行`FILEVALUE-1`，`FILEVALUE-2`依此类推。

希望我说得通。

提前向所有专家致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:41:06.453

要获得重复项，您可以通过以下方式使用老式组：

```
select table1.guid, table1.document_id, table2.[file], count(*) cnt
  from table1
 inner join table2
    on table1.document_id = table2.document_id
 group by table1.guid, table1.document_id, table2.[file]
having count (*) > 1 
```

要直接更新重复项，您可以使用 CTE：

```
; with t2 as (
    select id, 
           [file],
           row_number() over (partition by document_id, [file]
                              order by id) rn
      from table2
)
update t2
   set [file] = [file] + '-' + convert(varchar(10), rn - 1)
 where t2.rn > 1 
```

请注意，我添加了 ID 作为主键的占位符。您需要一种方法来识别要更新的记录。

[有现场测试@Sql Fiddle](http://sqlfiddle.com/#!3/8da95/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:51:37.870

这将为您提供所有超过 Document_id 的文件

```
Select FILE, COUNT(DOCUMENT_ID) as DOCUMENT_ID from table2
group by FILE
Having count(DOCUMENT_ID)>1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:12:24.840

您可以使用 CTE 从 TABLE2 中找出重复值：

```
WITH CTE_1 (DOCUMENT_ID,FILE, DuplicateCount)
AS
(
SELECT DOCUMENT_ID,FILE,
ROW_NUMBER() OVER(PARTITION BY DOCUMENT_ID,FILE ORDER BY DOCUMENT_ID) AS DuplicateCount
FROM table2
)
select *
FROM CTE_1 
WHERE DuplicateCount >1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:58:09.390

我想到了 1 种方法，但不确定它在您的最终是否可行。但让我向你保证，这是一种非常有效的方法。您可以创建一个具有标识列的表，并将整个数据插入该表中。从那里开始处理任何重复数据都是小菜一碟。有两种方法可以将标识列添加到具有现有数据的表中：

1.  创建一个具有标识的新表，将数据复制到这个新表，然后删除现有表，然后重命名临时表。

2.  创建具有标识的新列并删除现有列

作为参考，我找到了 2 篇文章：http: [//blog.sqlauthority.com/2009/05/03/sql-server-add-or-remove-identity-property-on-column/](http://blog.sqlauthority.com/2009/05/03/sql-server-add-or-remove-identity-property-on-column/)
[http://cavemansblog.wordpress .com/2009/04/02/sql-how-to-add-an-identity-column-to-a-table-with-data/](http://cavemansblog.wordpress.com/2009/04/02/sql-how-to-add-an-identity-column-to-a-table-with-data/)

# r - 早高峰时间的 R 检验 - 间隔中的时间向量

> ID：11575970
> 
> 赞同：2
> 
> 时间：2012-07-20T08:48:08.910
> 
> 标签：r, time, lubridate

我正在尝试在 R 中创建一个干净的函数以返回 TRUE/FALSE，如果 POSIXlt 时间的向量处于早高峰时段，即周一至周五上午 7.30 至上午 9.30。这是我到目前为止所做的，但它似乎有点长而且令人费解。是否可以在保持代码本身可读性的同时对此进行改进？

```
library(lubridate)

morning.rush.hour <- function(tm) {
  # between 7.30am and 9.30am Monday to Friday
  # vectorised...
  # HARDCODED times here!
  tm.mrh.start <- update(tm, hour=7, minute=30, second=0)
  tm.mrh.end <- update(tm, hour=9, minute=30, second=0)
  mrh <- new_interval(tm.mrh.start, tm.mrh.end)
  # HARDCODED weekdays here!
  ((tm$wday %in% 1:5) & # a weekday?
         (tm %within% mrh))
}
# for test purposes...
# nb I'm forcing UTC to avoid the error message "Error in as.POSIXlt.POSIXct(x, tz) : invalid 'tz' value"
#   - bonus points for solving this too :-)
tm <- with_tz(as.POSIXlt(as.POSIXlt('2012-07-15 00:00:01', tz='UTC') + (0:135)*3000), 'UTC')
data.frame(tm, day=wday(tm, label=TRUE, abbr=FALSE), morning.rush.hour(tm)) 
```

如果有一个像这样的工作日时间范围的干净函数定义会更好，因为我也有晚上高峰时间，白天不是高峰时间，最后没有这些！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:20:36.173

我会做一些比使用`difftime`and更简单的事情`cut`。您可以执行以下操作（使用`base`函数）：

```
morning.rush.hour<-function(tm){
    difftime(tm, cut(tm, breaks="days"), units="hours") -> dt  #This is to transform the time of day into a numeric (7:30 and 9:30 being respectively 7.5 and 9.5)
    (tm$wday %in% 1:5) & (dt <= 9.5) & (dt >= 7.5)  #So: Is it a weekday, it is before 9:30 and is it after 7:30?
    } 
```

**编辑：**如果需要，您还可以添加时区参数`difftime`：

```
difftime(tm, cut(tm, breaks="days"), units="hours", tz="UTC") 
```

# php - php文件上传返回文件和文件路径的有效性

> ID：11575979
> 
> 赞同：0
> 
> 时间：2012-07-20T08:48:37.673
> 
> 标签：php, javascript

我有一个网页，其中包含一个带有多个文本字段和一个可选文件上传的表单。

当用户单击提交按钮时，我执行以下操作：

*   检查是否已选择文件进行上传
*   如果是，请上传文件
*   文件上传完成后，提交其他表单数据

我的问题是这个。目前，我的 php 服务器脚本检查文件是否有效。截至目前，在提交表单数据之前，我无法知道文件是否有效。我希望能够知道文件已上传、有效以及保存文件的路径。

```
var xmlhttp=new XMLHttpRequest();
var formData = new FormData();
formData.append("thefile", file);   
xmlhttp.addEventListener("load", uploadComplete, false);
xmlhttp.open("POST","uploadfile.php",true);
xmlhttp.setRequestHeader("enctype", "multipart/form-data");
xmlhttp.send(formData); 
```

.

```
 function uploadComplete(evt) {
    alert("image upload complete");
    submitForm();
 } 
```

我基本上想从 php 发送可以从我的函数 uploadComplete 读取的信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:53:21.710

一个简单的方法是在你的 PHP 脚本中做一个回显，例如：

```
echo json_encode({YOUR INFORMATIONS}); 
```

在`uploadComplete`json_decode 返回之后，您将能够直接在 javascript 中使用这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:04:48.363

另外我建议您检查文件是否已使用 PHP 上传。只是函数 file_exists，这里有一个例子：

```
 if (file_exists($path)) {
   echo 'ok';
   }else{ 
   echo 'file not loaded';
   } 
```

上传没有出错的情况经常发生！

# sql - SQL 选择列分组依据

> ID：11575982
> 
> 赞同：1
> 
> 时间：2012-07-20T08:48:42.957
> 
> 标签：sql, oracle, group-by

如果我有一个格式如下的表格：

```
ID NAME NUM TIMESTAMP BOOL
1  A    5   09:50     TRUE 
1  B    6   13:01     TRUE
1  A    1   10:18     FALSE   
2  A    3   12:20     FALSE
1  A    1   05:30     TRUE
1  A    12  06:00     TRUE 
```

如何获取每个唯一 ID、NAME 对与最新时间戳和 BOOL=TRUE 的 ID、NAME 和 NUM。

所以对于上表，输出应该是：

```
ID NAME NUM
1  A    5
1  B    6 
```

我尝试使用 Group By 但我似乎无法解决我需要在 num 周围放置一个聚合器函数（应用于此示例时 max，min 将不起作用）或在 group by 中指定它（最终将匹配 ID 、NAME 和 NUM 组合）。据我所知，两者在某些情况下都会中断。

PS：我正在使用SQL Developer（我认为是Oracle开发的SQL，对不起我是新手）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:53:31.973

如果您至少使用 SQL-Server 2005，则可以使用以下[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)功能：

```
WITH CTE AS
(
   SELECT ID, NAME, NUM,
      RN = ROW_NUMBER()OVER(PARTITION BY ID, NAME ORDER BY TIMESTAMP DESC)
   FROM Table
   WHERE BOOL='TRUE'
)
SELECT ID, NAME, NUM FROM CTE
WHERE RN = 1 
```

结果：

```
ID     NAME   NUM    
1       A      5     
1       B      6 
```

这是小提琴：[http ://sqlfiddle.com/#!3/a1dc9/10/0](http://sqlfiddle.com/#!3/a1dc9/10/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:01:49.420

```
select t1.* 
from TABLE1 as t1 
left join
TABLE1 as t2 
on t1.name=t2.name and t1.TIMESTAMP>t2.TIMESTAMP
where t1.BOOL='TRUE' and t2.id is null 
```

应该为你做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:54:05.670

```
select t1.* from table as t1 inner join
(
select NAME, NUM, max(TIMESTAMP) as TIMESTAMP from table
where BOOL='TRUE'
) as t2
on t1.name=t2.name and t1.num=t2.num and t1.timestamp=t2.timestamp
where t1.BOOL='TRUE' 
```

# android - 如何将可绘制文件夹中的图像附加到android中的gmail？

> ID：11575986
> 
> 赞同：1
> 
> 时间：2012-07-20T08:48:54.533
> 
> 标签：android

在我的应用程序中，我必须将可绘制文件夹中的图像附加到电子邮件客户端。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:03:31.760

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");

Uri path = Uri.parse("android.resource://your.package.name/" + R.drawable.sample_1);    
intent.putExtra(Intent.EXTRA_STREAM, uri); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:07:26.250

```
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
sendIntent.putExtra("sms_body", "some text"); 
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(url));
sendIntent.setType("image/png"); 
```