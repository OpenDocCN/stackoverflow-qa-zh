# StackOverflow 问答 10560000-10560999

# python - Python 跟踪 URL 获取请求 - 使用 python 脚本

> ID：10560005
> 
> 赞同：0
> 
> 时间：2012-05-12T00:10:28.703
> 
> 标签：python, module, urllib2, httplib

我正在编写一个脚本，以帮助我对一堆 URL 进行一些重复测试。

我在脚本中编写了一个 python 方法，它打开 URL 并发送一个 get 请求。我正在使用 Requests: HTTP for Humans -http://docs.python-requests.org/en/latest/- api 来处理 http 调用。

有一个 request.history 会返回一个状态码列表。我需要能够访问这些 301 列表的特定重定向。似乎没有办法做到这一点 - 访问和跟踪我的 URL 重定向到的内容。我希望能够访问重定向的 URL（状态代码 301）

任何人都可以提供任何建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:36:32.240

好吧，我太傻了。这是我一直在寻找的答案

`r = requests.get("http://someurl")` `r.history[1].url`将返回 URL

# ruby - Snow Leopard 上的 Ruby 1.9.2 eventmachine 安装错误

> ID：10560006
> 
> 赞同：0
> 
> 时间：2012-05-12T00:10:32.403
> 
> 标签：ruby, gcc, eventmachine

当我试图在我的 OSX 上安装 eventmachine 时，我收到了这个错误。

```
构建原生扩展。这可能需要一段时间...
错误：安装事件机器时出错：
    错误：无法构建 gem 原生扩展。

        /Users/ncharass/.rvm/rubies/ruby-1.9.2-head/bin/ruby extconf.rb
检查 ruby​​.h、rubysig.h 中的 rb_trap_immediate ... 否
检查 rb_thread_blocking_region()... 是
检查 sys/inotify.h 中的 inotify_init() ... 否
检查 sys/syscall.h 中的 __NR_inotify_init ... 否
检查 sys/uio.h 中的 writev() ... 是
检查 rb_thread_check_ints()... 是
检查 rb_time_new()... 是
检查 sys/event.h... 是的
检查 sys/queue.h... 是的
创建 Makefile

制作
g++ -I。-I/Users/ncharass/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1/x86_64-darwin10.8.0 -I/Users/ncharass/.rvm/rubies/ruby-1.9.2 -head/include/ruby-1.9.1/ruby/backward -I/Users/ncharass/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1 -I。-DBUILD_FOR_RUBY -DHAVE_RB_THREAD_BLOCKING_REGION -DHAVE_TBR -DHAVE_WRITEV -DHAVE_WRITEV -DHAVE_RB_THREAD_CHECK_INTS -DHAVE_RB_TIME_NEW -DOS_UNIX -DHAVE_SYS_EVENT_H -DHAVE_SYS_QUEUE_H -DHAVE_KQUEUE -DWITH_SSL -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -fno共用-O3 -ggdb -Wextra -Wno-未使用的参数-Wno-括号-Wpointer -arith -Wwrite-strings -Wno-missing-field-initializers -Wshorten-64-to-32 -Wno-long-long -fno-common -pipe -o binder.o -c binder.cpp
g++：错误：无法识别的命令行选项“-Wshorten-64-to-32”
制作：*** [binder.o] 错误 1

Gem 文件将继续安装在 /Users/ncharass/.rvm/gems/ruby-1.9.2-head@comp.com/gems/eventmachine-0.12.10 以供检查。
结果记录到 /Users/ncharass/.rvm/gems/ruby-1.9.2-head@comp.com/gems/eventmachine-0.12.10/ext/gem_make.out

```

这是我的 g++ 版本。

```
使用内置规范。
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/local/libexec/gcc/x86_64-apple-darwin10.7.4/4.7.0/lto-wrapper
目标：x86_64-apple-darwin10.7.4
配置：../gccgo/configure --enable-languages=c,c++,go --with-ld=/usr/bin/ld
线程模型：posix
gcc 版本 4.7.0 20110520（实验性）（GCC）

```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T03:29:30.143

在 Google 上环顾四周，这似乎是用于 Ruby 的编译器与用于 EventMachine 的编译器不匹配。[Instant Badger](http://instantbadger.blogspot.com/2011/11/porting-rails-23-app-to-ruby-19.html)上有一篇很好的文章，可能会有所帮助。

# java - 如何在现有 jar 的 META-INF 中添加 NOTICE 文件？

> ID：10560008
> 
> 赞同：0
> 
> 时间：2012-05-12T00:10:59.767
> 
> 标签：java, jar

如何在现有 jar 的 META-INF 中添加 NOTICE 文件？

我尝试过`jar uf jarfilename META-INF NOTICE`，但它创建了一个重复的 META-INF 目录，而不是更新现有目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T00:36:37.907

你试过“META-INFO/NOTICE”还是“META-INF NOTICE”？前者应将文件添加到 META-INF 目录。后者将在您的 jar 文件中创建 2 个单独的条目。

# ios - 在 iOS 上 Google 同步日历

> ID：10560009
> 
> 赞同：0
> 
> 时间：2012-05-12T00:11:05.497
> 
> 标签：ios, calendar

我对 iOS 很陌生，如果你能给我一个关于如何解决这个问题的线索，我将不胜感激。

我正在计划一个移动应用程序和一个云服务，要求“谷歌日历与移动设备上的日历同步”（即 iPhone、iPad 和 Android）

在 Android 上，我可以从我们的 Android 应用程序中读取日历的事件 ID。如果我更改事件属性，例如磁贴和时间等，事件 ID 保持不变，这似乎是将我们的元数据关联到它的好方法（即事件 ID）。

在 iOS 端，如果我启用 Google Sync，我在网络上定义的事件仍然会出现在 iOS 的日历上。我的问题是“我能否有问题地获取在 Google 日历上分配的事件 ID？”

以下链接显示“EKEvent 的 eventIdentifier 可能会在事件更改时更改” [http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventClassRef/Reference/Reference.html#//apple_ref/occ /instm/EKEvent/eventIdentifier](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventClassRef/Reference/Reference.html#//apple_ref/occ/instm/EKEvent/eventIdentifier) ...所以我猜这个字段不反映来自谷歌日历的事件ID。

我很感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:06:26.433

通常事件标识符的形式为：

> 88E45678-2S11-574E-ABF8-3B1E463ERF4C:google_calendar_id@google.com

对于谷歌同步日历事件。

如果对周期性日历事件之​​一进行了更改，则标识符最后也可以有例外日期：

> 88E45678-2S11-574E-ABF8-3B1E463ERF4C:google_calendar_id@google.com<!ExceptionDate>20121025

# c++ - 在 C++ 中创建更多的 OOP 类

> ID：10560010
> 
> 赞同：1
> 
> 时间：2012-05-12T00:11:15.067
> 
> 标签：c++, oop, qt, class

我一直在使用 QT，我注意到他们通过为诸如`private slots: public slots: signals:`etc 等类实现一些新功能将 OOP 提升到了另一个层次……他们在做什么来声明类的此类类别？它是特定于编译器的还是仅仅是一种`typedef`？我猜它可以移植到主要操作系统，因为 QT 将在多个系统上运行。出于好奇，我要求创建自己的子类来帮助组织和创建更多的 OOP 程序。例如

```
class Main
{
handles:
  HANDLE hWin;
threads:
  HANDLE hThread;
}; 
```

然后简单地做干净的继承就很容易了

```
class Dialog : handles Main
{

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T00:41:48.100

对我来说，看起来人们没有回答你的问题，他们回答的问题有点不同。您似乎在谈论恰好用于插槽的“部分标签”，并且希望您自己的类部分（如句柄和线程）的部分标签。这是 QT 通过在将代码发送到编译器之前对其进行预处理来完成的。如果不添加另一个编译阶段，这不是您可以自己做的事情。

也就是说，除了告诉 QT 预编译器找到它的插槽的部分之外，它真的没有多大用处。你不能继承它们，就像你想要做的那样。它只是标记一个区域以生成内省代码。

而且你真的不想那样做。如果您有想要继承的单独组件，请将它们分成单独的类，然后使这些单独的类成为控制它们交互的更大类的成员。如果您尝试拆分具有不同部分的类，编译器将无法确保它们不会以需要其他部分的不变量的方式进行交互，因为编译器不会将这些类型的限制使用不同的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:13:45.533

它被称为[信号和插槽](http://qt-project.org/doc/qt-4.8/signalsandslots.html)，由[Qt 元对象编译器 moc](http://qt-project.org/doc/qt-4.8/moc.html)实现。`moc`还为预处理的类添加了一个内省系统。还存在不需要特殊预处理步骤的信号/插槽实现，例如[Boost.Signals](http://www.boost.org/doc/libs/1_49_0/doc/html/signals.html)和[Boost.Signals2](http://www.boost.org/doc/libs/1_49_0/doc/html/signals2.html)。与通过函数调用传递的普通消息相比，我不会考虑更多或更少的信号和插槽 OOP，但这是有争议的，并不真正相关。

# javascript - 只允许选中一个（批准/拒绝）复选框

> ID：10560012
> 
> 赞同：0
> 
> 时间：2012-05-12T00:11:40.680
> 
> 标签：javascript, jquery, asp.net

更新：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="chkbox_checked_uncheked.aspx.cs"
    Inherits="Ediable_Repeater.chkbox_checked_uncheked" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.6.2.min.js" type="text/javascript"></script>

    <script type="text/javascript">

        $(document).ready(function () {
            $('#C1All').click(function () {
                debugger
                $('.col1').attr("checked", $('#C1All').attr("checked"));
                $('.col2').removeAttr("checked");
                $('#C2All').removeAttr("checked");
            });

            $('#C2All').click(function () {
                debugger
                $('.col2').attr("checked", $('#C2All').attr("checked"));
                $('.col1').removeAttr("checked");
                $('#C1All').removeAttr("checked");
            });

            $('.col1').each(function () {
                $(this).click(function () {
                    var id = $(this).attr('id');
                    debugger
                    var coresId = id.replace('C1', 'C2');
                    $('#' + coresId).removeAttr("checked");
                    $('#C1All').removeAttr("checked");
                    $('#C2All').removeAttr("checked");
                });
            });

            $('.col2').each(function () {
                $(this).click(function () {
                    var id = $(this).attr('id');
                    var coresId = id.replace('C2', 'C1');
                    debugger
                    $('#' + coresId).removeAttr("checked");
                    $('#C1All').removeAttr("checked");
                    $('#C2All').removeAttr("checked");
                });
            });
        });
  </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <div>
            <table border="1">
                <tr>
                    <td>
                        <asp:CheckBox ID="C1All" runat="server" class="col1" Text="approve all" />
                    </td>
                    <td>
                        <asp:CheckBox ID="C2All" runat="server"  class="col2" Text="Reject all" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:CheckBox ID="C101" runat="server" class="col1" Text="john 0" />
                    </td>
                    <td>
                        <asp:CheckBox ID="C201" runat="server"  class="col2" Text="john 0" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:CheckBox ID="C102" runat="server" class="col1" Text="john 1" />
                    </td>
                    <td>
                        <asp:CheckBox ID="C202" runat="server"  class="col2" Text="john all" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:CheckBox ID="C103" runat="server" class="col1" Text="john 2" />
                    </td>
                    <td>
                        <asp:CheckBox ID="C203" runat="server"  class="col2" Text="John 2" />
                    </td>
                </tr>
            </table>
        </div>
    </div>
    </form>
</body>
</html> 
```

我有两列（全部批准/全部拒绝）我如何限制用户只允许每一个复选框？

这是屏幕的输出：

![在此处输入图像描述](../Images/55bd28de7f6e134705aee74145eb11ed.png)

我尝试过这样的事情但没有奏效：

```
 function SelectApproveAllCheckboxes(chk, selector) 
    {     
         $('#<%=gv.ClientID%>').find(selector + " input:checkbox").each(function () 
        {                    
              $(this).prop("checked", $(chk).prop("checked"));     
         }); 
    } 
function SelectRejectAllCheckboxes(chk, selector) 
{     
     $('#<%=gv.ClientID%>').find(selector + " input:checkbox").each(function () 
    {                    
          $(this).prop("checked", $(chk).prop("checked"));     
     }); 
}  

<asp:CheckBox ID="chkAll" runat="server" onclick="SelectApproveAllCheckboxes(this, '.approve)" />     
<asp:CheckBox ID="chkAll1" runat="server" onclick="SelectRejectAllCheckboxes(this, '.reject)" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T00:14:45.463

不要使用复选框，而是使用单选按钮，它们就是为此而设计的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T01:36:17.067

好的，根据您对我对您问题的评论部分的问题的回答，这是一个可行的解决方案。我使用了带有静态控件的 HTML 表格；但你应该能够应用这些概念。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <table border="1">
            <tr>
                <td><input type="checkbox" id="C1All" />Approve All</td>
                <td><input type="checkbox" id="C2All" />Reject All</td>
            </tr>
            <tr>
                <td><input type="checkbox" id="C101" class="col1" />John 0</td>
                <td><input type="checkbox" id="C201" class="col2" />John 0</td>
            </tr>
            <tr>
                <td><input type="checkbox" id="C102" class="col1" />John 1</td>
                <td><input type="checkbox" id="C202" class="col2" />John 1</td>
            </tr>
            <tr>
                <td><input type="checkbox" id="C103" class="col1" />John 2</td>
                <td><input type="checkbox" id="C203" class="col2" />John 2</td>
            </tr>
        </table>
    </div>
    </form>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#C1All').click(function () {
                $('.col1').attr("checked", $('#C1All').attr("checked"));
                $('.col2').removeAttr("checked");
                $('#C2All').removeAttr("checked");
            });

            $('#C2All').click(function () {
                $('.col2').attr("checked", $('#C2All').attr("checked"));
                $('.col1').removeAttr("checked");
                $('#C1All').removeAttr("checked");
            });

            $('.col1').each(function () {
                $(this).click(function () {
                    var id = $(this).attr('id');
                    var coresId = id.replace('C1', 'C2');
                    $('#' + coresId).removeAttr("checked");
                    $('#C1All').removeAttr("checked");
                    $('#C2All').removeAttr("checked");
                });
            });

            $('.col2').each(function () {
                $(this).click(function () {
                    var id = $(this).attr('id');
                    var coresId = id.replace('C2', 'C1');
                    $('#' + coresId).removeAttr("checked");
                    $('#C1All').removeAttr("checked");
                    $('#C2All').removeAttr("checked");
                });
            });
        });
    </script>
</body>

</html> 
```

**已编辑**

因为在 asp.net 中，复选框嵌套在 span 标签中，所以使用这个 jquery 而不是上一个。

```
 $(document).ready(function () {
            $('#C1All').click(function () {
                $('.col1 > input').attr("checked", $('#C1All').attr("checked"));
                $('.col2 > input').removeAttr("checked");
                $('#C2All').removeAttr("checked");
            });

            $('#C2All').click(function () {
                $('.col2 > input').attr("checked", $('#C2All').attr("checked"));
                $('.col1 > input').removeAttr("checked");
                $('#C1All').removeAttr("checked");
            });

            $('.col1').each(function () {
                $(this).click(function () {
                    var id = $("input", this).attr('id');
                    var coresId = id.replace('C1', 'C2');
                    $('#' + coresId).removeAttr("checked");
                    $('#C1All').removeAttr("checked");
                    $('#C2All').removeAttr("checked");
                });
            });

            $('.col2').each(function () {
                $(this).click(function () {
                    var id = $("input", this).attr('id');
                    var coresId = id.replace('C2', 'C1');
                    $('#' + coresId).removeAttr("checked");
                    $('#C1All').removeAttr("checked");
                    $('#C2All').removeAttr("checked");
                });
            });
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T00:27:15.737

我同意使用单选按钮。您仍然可以有一个“全选”复选框，并且可以在选中时禁用单选按钮。

如果您必须使用复选框，您可以简单地覆盖默认的单击（选中）操作以首先取消选中所有其他框。它应该是非常基本的 javascript，有或没有库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T00:55:38.530

试试这个：

> > ```
> > $('input:checkbox').click(function(){
> >    $('input:checked').removeAttr('checked');
> >    $(this).attr('checked', 'checked');
> > }); 
> > ```

这应该够了吧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T00:56:50.307

如果您使用单选按钮 prolly，您将无法获得全选功能。

您可以将组中的所有复选框赋予同一个类，并执行以下操作以使用 JQuery 取消选中它们，同时选中或取消选中被单击的复选框：

```
$('.checkbox').click(function{
// save the original checked state of the one we're clicking:
 var checked = $(this).attr('checked'); 
 $('.checkbox').attr('checked', false); // uncheck all of the boxes
 $(this).attr('checked', !checked); // invert the original state
}); 
```

但更好的选择可能是使用带有“以上都不是”选项的单选按钮控件。这样您就可以进行验证（这是否完全回答了问题？）

# java - 如何使用 Spring XML 配置创建 log4j 记录器？

> ID：10560013
> 
> 赞同：6
> 
> 时间：2012-05-12T00:12:29.043
> 
> 标签：java, spring, log4j

如何使用 Spring XML 配置创建 log4j 记录器？

我想做这样的事情，这样我就可以将记录器注入其他实例：

```
<bean id="logger" class="org.apache.log4j.Logger">
    <property name="logName" value="my.Logger" />
</bean> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T00:33:09.150

您可以使用 factory-method 属性[通过静态方法构造 bean 。](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-class-static-factory-method)所以对于log4j我们可以使用静态[`Logger.getLogger()`](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html#getLogger%28java.lang.String%29)方法来构造一个bean：

```
<bean id="logger" class="org.apache.log4j.Logger" factory-method="getLogger">
    <constructor-arg type="java.lang.String" value="my.Logger" />
</bean> 
```

# ruby-on-rails - Ruby（机架）应用程序无法启动

> ID：10560014
> 
> 赞同：0
> 
> 时间：2012-05-12T00:12:39.480
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我是编码和设置服务器等的新手。

我在我的网站上收到以下内容并且没有更改任何代码并且在我的托管网站上没有任何问题，但我的网站没有加载。可能是什么原因，我该如何解决？

```
Ruby (Rack) application could not be started
These are the possible causes:
There may be a syntax error in the application's code. Please check for such errors and fix them.
A required library may not installed. Please install all libraries that this application requires.
The application may not be properly configured. Please check whether all configuration files are written correctly, fix any incorrect configurations, and restart this application.
A service that the application relies on (such as the database server or the Ferret search engine server) may not have been started. Please start that service.
Further information about the error may have been written to the application's log file. Please check it in order to analyse the problem.
Error message:
undefined method `[]' for false:FalseClass
Exception class:
NoMethodError
Application root:
/home/ubuntu/nteeq/current
Backtrace:
#   File    Line    Location
0   /home/ubuntu/nteeq/releases/20120430040248/config/initializers/exception_notification.rb    6   
1   /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/activesupport-3.0.3/lib/active_support/dependencies.rb    235 in `load'
2   /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/activesupport-3.0.3/lib/active_support/dependencies.rb    235 in `load'
3   /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/activesupport-3.0.3/lib/active_support/dependencies.rb    227 in `load_dependency'
4   /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/activesupport-3.0.3/lib/active_support/dependencies.rb    235 in `load'
5   /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/engine.rb    201 
6   /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/engine.rb    200 in `each'
7   /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/engine.rb    200 
8   /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/initializable.rb 25  in `instance_exec'
9   /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/initializable.rb 25  in `run'
10  /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/initializable.rb 50  in `run_initializers'
11  /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/initializable.rb 49  in `each'
12  /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/initializable.rb 49  in `run_initializers'
13  /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/application.rb   134 in `initialize!'
14  /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/application.rb   77  in `send'
15  /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/application.rb   77  in `method_missing'
16  /home/ubuntu/nteeq/releases/20120430040248/config/environment.rb    5   
17  config.ru   3   in `require'
18  config.ru   3   
19  /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/rack-1.2.3/lib/rack/builder.rb    46  in `instance_eval'
20  /opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/rack-1.2.3/lib/rack/builder.rb    46  in `initialize'
21  config.ru   1   in `new'
22  config.ru   1   
Powered by Phusion Passenger, mod_rails / mod_rack for Apache. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T00:16:25.223

你可能没有你需要的所有宝石

```
bundle install 
```

如果您遇到权限问题，请尝试

```
sudo bundle install 
```

（在您的 rails 应用程序的目录中）。这将为您的 rails 应用程序安装所有必要的 gem 和依赖项。

# data-structures - 只能翻转为 true 的布尔值

> ID：10560020
> 
> 赞同：1
> 
> 时间：2012-05-12T00:13:57.720
> 
> 标签：data-structures, types, unique

是否有一个数据结构的名称（读取：布尔值）只能从 false 移动到 true，而不能返回到 false？想象一下像这样封装的东西：

```
private var _value = false
def value = _value
def turnOnValue() = value = true 
```

出于好奇，是否有任何平台原生支持它？这似乎是某人以前遇到过的事情......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T00:19:16.617

您正在描述变量的时间属性；而不是这样的数据结构。数据类型是一个简单的布尔值，但有趣的是它的使用方式——作为一种及时的“锁存器”。

boolean 数据类型的这种闩锁属性将使其成为**[线性类型 boolean](http://en.wikipedia.org/wiki/Linear_type_system)**的示例。线性类型和其他类型的[唯一性](http://en.wikipedia.org/wiki/Uniqueness_type)类型用于强制变量的时间属性——例如，它们只能使用一次；或无法共享。

它们对于在编译时强制执行已发生的操作（例如初始化）或在编译时证明对象未被共享很有用。因此，它们在系统编程中最常见，其中低级属性的证明是正确软件设计的关键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:18:39.750

在 perl 中，你有 Tie 变量，你可以建立你的标量值并制作这种“类型”。但在本机......也许在 Smalltalk 中可以构建类似这样的东西，或者 Prolog，但我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T00:30:52.507

制作自己的数据类型

```
public final class CustomBoolean {
    private boolean value;
    public void setValue(boolean value){
        // Bitwise OR
        this.value |= value;
    }   

    public boolean getValue(){
        return value;
    }
} 
```

例子 ：：

```
public static void main (String[] args) 
{
        CustomBoolean foo = new CustomBoolean();

        foo.setValue(false);
        System.out.println(foo.getValue());

        foo.setValue(true);
        System.out.println(foo.getValue());

        foo.setValue(false);
        System.out.println(foo.getValue());
} 
```

输出将是::

```
false
true
true 
```

这意味着您必须在执行任何显式布尔操作之前调用 getValue() ，即

```
if(foo.getValue() && 1 == 1) 
```

该示例是用 Java 编写的。

# java - 使用 CommonJ WorkManagerTaskExecutor Spring 3 进行多线程

> ID：10560028
> 
> 赞同：3
> 
> 时间：2012-05-12T00:15:39.380
> 
> 标签：java

大家好，我是论坛的新手，我刚刚有一个关于使用 Spring 的 commonj WorkManagerTaskExecutor 的问题。我一直在一堆论坛上寻找有关该主题的更好信息，但我没有看到有关该主题的任何详细信息。所以这是我的情况。

我的应用程序使用由 ThreadPoolTask​​Executor 处理的多个线程，一位朋友告诉我他认为这不是正确的选择，因为我们使用的是 websphere 7.0 应用程序服务器。我让一切正常工作，并且通过一些小的调整能够用 WorkManagerTaskExecutor 替换 ThreadPoolTask​​Executor。当我运行应用程序时，线程会通过 websphere 服务器上的默认工作管理器启动。似乎正在发生的问题是，即使我正在使用 workManagerTaskExecutor.waitForAll(collection,timeout); 它实际上从不等待线程完成。我知道线程正在执行它们各自的方法是有效的，因为如果你在所有这些之后发出一个冗长的 for 循环，那么数据就在那里，就好像你没有数据不在那里一样。

1.  WorkManagerTaskExecutor 是要走的路吗？或者使用 ThreadPoolTask​​Executor 是否足以处理企业 Web 应用程序上的多个线程？

2.  如果 WorkManagerTaskExecutor 是要走的路？关于为什么 waitForAll 方法像方法完成一样完成的任何想法？什么时候明显不是？页面加载后，我可以在日志中看到这些方法仍在运行并最终完成。

任何帮助将非常感激。如果我遗漏了任何内容，我将很乐意尝试提供有关该问题的更多信息，因为我非常感谢可能提供的任何帮助。

提前致谢，

账单

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T02:08:58.637

[您应该通过扩展 JavaSE 内置的java.util.concurrent.Executor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html)接口来实现您的并发类，然后使用[Spring IoC 容器](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html)，您可以在 Websphere 下运行时注入[WorkManagerTaskExecutor的实现类。](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/commonj/WorkManagerTaskExecutor.html)

如果您想在另一个 Java 应用程序服务器上运行，这将为您提供灵活性，即使您在 JVM 上直接在容器外运行，也可以工作，因为您可以注入[ThreadPoolTask​​Executor](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/backportconcurrent/ThreadPoolTaskExecutor.html)而不必更改任何代码。

您应该避免直接针对 CommonJ WorkManager API (JSR 237) 进行编码，例如使用该`waitForAll`方法，因为它仅适用于 IBM Websphere 和 Oracle WebLogic。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T18:24:41.070

对我来说，这个问题的最终获胜组合最终是：

```
List<Callable<?>> callables = new ArrayList<Callable<?>>();
    List<Future<?>> futures = new ArrayList<Future<?>>();
    for (int i = 0; i<callers.length;i++){
        callables.add(new MainTaskExecutor(this,entity,callers[i]));

    }
    for (Callable c:callables){
        futures.add(workTaskExecutor.submit(c));
    }
    for (Future<?> f:futures){
        do{}while(!f.isDone());
    } 
```

# ruby - 如何在 ubuntu 中更新 gem 命令？

> ID：10560033
> 
> 赞同：2
> 
> 时间：2012-05-12T00:16:32.753
> 
> 标签：ruby, gem

我的 gem 版本是 1.3.5，因此我无法安装某些 gem。我尝试通过以下方式更新计算机上的 gem

```
sudo update --system 
```

它给了我一个错误

```
ERROR:  While executing gem ... (RuntimeError)
gem update --system is disabled on Debian. 
RubyGems can be updated using the official     
Debian repositories by aptitude or apt-get. 
```

所以根据一些人的说法，源需要是下载的，它需要由 ruby​​ 执行。我下载了文件，没有

```
sudo ruby setup.rb 
```

它给了我

已安装 RubyGems 1.8.24

== 1.8.24 / 2012-04-27

*   1 个错误修复：

    *   正确安装 .pem 文件。修复 #320
    *   从 http 代码路径中删除 OpenSSL 依赖项

* * *

RubyGems 安装了以下可执行文件：/usr/bin/gem1.8

但是当我点击 ruby​​ gem -v 它仍然给我 1.3.5 而不是我安装的 1.8。

我需要手动卸载旧版本吗？还是我需要先做的其他事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T00:44:04.133

> RubyGems 安装了以下可执行文件：`/usr/bin/gem1.8`

正如该行所说，程序的名称是`gem1.8`，而不是`gem`。因此，您需要致电

```
gem1.8 -v 
```

不是

```
gem -v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T00:25:40.833

请尝试建立一个符号链接。

```
sudo ln -s /usr/bin/gem1.8 /usr/bin/gem 
```

# python - 如何将所有列表元素添加到另一个列表中

> ID：10560034
> 
> 赞同：10
> 
> 时间：2012-05-12T00:17:14.313
> 
> 标签：python, list

> **可能重复：**
> [在python中合并两个列表？](https://stackoverflow.com/questions/1720421/merge-two-lists-in-python)

如何将列表元素添加到另一个列表中？

```
A = ['1', '2']
B = ['3', '4']
A.append(B)
print A 
```

返回

```
['1', '2', ['3', '4']] 
```

我怎样才能做到

```
['1', '2', '3', '4']? 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T00:18:59.433

```
A.extend(B) 
```

或者

```
A += B 
```

添加此文本是为了让我发布此答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T00:18:25.033

`list.extend`，例如，在您的情况下，`A.extend(B)`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-12T03:31:44.560

这也可以这样做

```
for s in B: 
    A.append(B) 
```

当然`A.extend(B)`做同样的工作，但使用`append`我们需要添加上面的 f

# c# - 文件类型图标未在 Visual Studio 中更新

> ID：10560035
> 
> 赞同：2
> 
> 时间：2012-05-12T00:17:22.880
> 
> 标签：c#, visual-studio, registry, file-type, .ico

长话短说，我按照此处的说明在双击特定文件类型时打开我的程序。 [http://www.dreamincode.net/forums/topic/58005-file-associations-in-visual-studio/](http://www.dreamincode.net/forums/topic/58005-file-associations-in-visual-studio/)

我包含了一个与指定文件类型相关联的图标。出现的问题是，当我返回更新/更改该图标图像并尝试重新安装较新版本的程序时，使用的是旧图标，而不是我在 Visual Studio 中将其更改为的那个...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T00:24:54.847

该图标可能缓存在外壳图标缓存中。在 NT6 上删除`%USERPROFILE%\AppData\Local\IconCache.db`（并杀死资源管理器或注销）或在旧系统上使用[TweakUI 。](http://en.wikipedia.org/wiki/Tweak_UI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T00:28:58.830

Try using [SHChangeNotify](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762118%28v=vs.85%29.aspx)

```
[DllImport("shell32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern void SHChangeNotify(int wEventId, int uFlags, IntPtr dwItem1, IntPtr dwItem2);

SHChangeNotify(0x08000000, 0x0000, (IntPtr)null, (IntPtr)null);//SHCNE_ASSOCCHANGED SHCNF_IDLIST 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T12:57:38.723

更新图标有两个步骤： 1\. 用新文件覆盖项目文件夹（或保存的任何位置）中的旧 .ico 文件 - 这将更新应用程序属性中的图标。2\. 编辑主窗体，转到图标属性并重新选择图标文件 - 这会更新窗口和任务栏上显示的图标。

# python - 点击 Button-1 时获取 Tkinter 列表框项目

> ID：10560041
> 
> 赞同：1
> 
> 时间：2012-05-12T00:18:57.783
> 
> 标签：python, listbox, tkinter

在使用 Page (page.sourceforge.net) 创建一个简单的窗口/小部件布局后，我发现释放 Button-1 时列表框 curselection() 调用返回正确的索引。当命中时，它返回前一个索引（我们刚刚离开的项目）。

由于一些计时器活动，我想在点击时获得点击的索引，而不是发布时。有人可以帮助我，我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:05:47.863

绑定到事件`<<ListboxSelect>>`而不是`<1>`，此事件将在当前选择更新后触发。

如果您真的需要在按下鼠标按钮时按字面意思进行绑定，则必须重新排列小部件的绑定标签的顺序。

# php - php条形图数组

> ID：10560044
> 
> 赞同：0
> 
> 时间：2012-05-12T00:19:08.107
> 
> 标签：php, arrays

我正在使用下面的 php 脚本（来自[使用 php 的简单水平条形图](https://stackoverflow.com/questions/1968678/simple-horizontal-bar-graph-using-php)）来创建水平条形图，并且我正在用数据库值动态替换静态数组值，这很好，除非有重复值。我需要允许条形图的重复数字准确 - 但是由于数组的原因，当有重复的“条”之一丢失时。

我可以在不使用数组和/或 foreach 循环的情况下重写这个长手吗？

```
$values = array(
        $values['one'] => 'apples',
        $values['two'] => 'oranges',
        $values['three'] => 'pears',
    $values['four'] => 'bananas'
);

// Find the maximum percentage
$max = max(array_keys($values));

foreach($values as $percentage => $label) {
// Calculate the position, maximum value gets position 0, smaller values approach 200
$pos = 200 - ($percentage / $max) * 200;
// Output the label that shows the percentage
echo '<span><label>'.$percentage.'%</label></span>';
// Output the span, apply style rule for the background position
echo '<span class="bar" style="background-position: -'.$pos.'px 0;">'.$label.'</span>';
}
?> 
```

# ios - NSFetchedResultsController 在提供委托时不获取

> ID：10560049
> 
> 赞同：0
> 
> 时间：2012-05-12T00:20:16.770
> 
> 标签：ios, core-data, nsfetchedresultscontroller

*   编辑 * 因此，我似乎将它用于错误的目的，并且在初始提取时永远不会调用委托。我想用它来批处理获取，因为即使数据的实际获取速度很快，但后处理却不是。我只需要卸载到后台进程 * 编辑 *

我在 UIViewController 的 ViewDidLoad 方法中创建了一个 NSFetchedResultsController 并将委托设置为 self：

```
self.resultsController = [[[NSFetchedResultsController alloc] initWithFetchRequest:self.fetchRequest managedObjectContext:[AppDelegate singleton].managedObjectContext sectionNameKeyPath:nil cacheName:nil] autorelease];
self.resultsController.delegate = self; 
```

然后，当点击 ViewController 时，如果需要，我会执行获取：

```
int indexPathCount = self.indexPaths.count;
int objectCount = self.resultsController.fetchedObjects.count;
if (indexPathCount && objectCount)
{
     [self.tableView beginUpdates];
     [self.tableView insertRowsAtIndexPaths:self.indexPaths withRowAnimation:UITableViewRowAnimationFade];
     [self.tableView endUpdates];
}
else
{
     NSError* error;
     BOOL success = [self.resultsController performFetch:&error];
     if (!success)
     {
          UIAlertView* alert = [[[UIAlertView alloc] initWithTitle:@"ERROR" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];
          [alert show];
     }
} 
```

上面的代码不会获取任何对象，并且永远不会调用委托方法。如果我注释掉上面我将 UIViewController 分配为委托的代码行，那么在第二次运行被点击的代码期间，objectCount 将包含一个正确的值。

*   编辑 * 上面的代码现在将实际获取对象。在第二次运行代码时，objectCount 现在符合预期，但仍然没有调用委托方法。现在我的假设是我在内存管理方面做得不好，但我所有的保留计数似乎都是正确的。* 编辑*

这是委托方法的实现，但我已经检查了十几次它们的正确性：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController*)controller
{
     [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController*)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath*)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath*)newIndexPath
{
     switch(type)
     {
          case NSFetchedResultsChangeInsert:
          {
               NSIndexPath* tableIndexPath = [NSIndexPath indexPathForRow:newIndexPath.row inSection:self.section];
               [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:tableIndexPath] withRowAnimation:UITableViewRowAnimationFade];
               [self.indexPaths addObject:tableIndexPath];
          } break;
     }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController*)controller
{
     [self.tableView endUpdates];
} 
```

关于为什么 NSFetchedResultsController 在提供委托时不起作用的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:02:26.380

没有足够的信息。好吧，不是*正确*的信息。既然你没有发帖，那我就假设...

首先，您的获取请求是什么样的？它是否正确指定了要获取的对象？它是否具有排序描述符（FRC 获取请求的要求）？

通常，您在视图控制器加载时启动请求......像您的代码显示那样手动调用插入数据是，好吧，让我们说非常规，

# php - MySQL/PHP 是这个项目的最佳方式吗？

> ID：10560051
> 
> 赞同：-2
> 
> 时间：2012-05-12T00:20:31.160
> 
> 标签：php, mysql

我一直负责这个项目，在我开始任何编码甚至在纸上画任何东西之前，我想确保 MySQL/PHP 是最好的方法。这是我所拥有的：

我和另一个学生将建立一个文章数据库并用设计术语“标记”它们。因此，例如，一篇关于酒店用电问题的文章可能会被标记为“电力节约”或类似的东西。

此外，该数据库将可以通过标签和文章描述或标题/作者进行搜索。

所以，我在想的是——

前端由一个基本表单组成，用户可以选择按标签搜索，文章描述（搜索将与文章描述进行比较，而不是可能是扫描图像的实际文章文本），或标题/作者组合。

执行搜索时，将显示一个简单列表，其中包含查询结果。

数据库本身将包含 1 个具有以下行的表：

ID、标签、作者、标题、描述、文章

其中 ID 是一个自动递增的 INT

TAGS、AUTHOR、TITLE 和 DESCRIPTION 都将是 VARCHAR

并且 ARTICLE 将是 BLOB（因为它将是 PDF、.DOC、.DOCX、.TXT 或 .RTF

单击时，搜索结果将变为文章的完整视图，该视图将显示文章以及相关信息。

这听起来像是最好的方法吗？

非常感谢任何输入，因为这只是我第二个部署的 MySQL/PHP 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T00:24:38.353

好吧，我不同意将文章存储在 BLOB 中，您可以存储在文件系统中。

php 和 mysql 可以很好，但是你可以考虑 mongoDB 和 ElasticSearch 这个数据库。

# php - PHP Ajax登录，成功登录后Ajax不工作

> ID：10560054
> 
> 赞同：0
> 
> 时间：2012-05-12T00:21:10.400
> 
> 标签：php, jquery, ajax, session, login

我有这个 javascript。哪个是正确登录我，但是在登录 ajax 调用的成功回调中执行的 ajax 调用没有被执行

```
$('.js-div-signin form').submit(function(){
    $form = $(this);
    $isValid = $(this).validate({
        rules: {
            email:'required email',
            password:'required'
        }
    });

    if($isValid.form()) {
        $data = {
            email:$('.js-input-email',$form).val(),
            password:$('.js-input-password',$form).val(),
            remember:$('.js-input-remember:checked',$form).val()
        };

        $('input', $form).attr('disabled','disabled');

        $.ajax({
            url:'/ajax/login',
            data:$data,
            type:'post',
            dataType:'json',
            success:function(res){
                if(res.type == 'success') {
                    /**
                     * This is the ajax call not working
                     */
                    $.ajax({
                        url:'/ajax/getheader',
                        dataType:'html',
                        success:function($html){
                            $('#header').html($html);
                        } error:function(a, b) {
                            console.log(a);
                            console.log(b);
                        }
                    })
                } else {
                    showError(res.message);
                    $('.js-input-password',$form).val('');
                    $('input', $form).removeAttr('disabled');
                    $('.js-input-password',$form).focus();
                }
            }, error:function(){
                showError('Email or Password incorrect');
                $('.js-input-password',$form).val('');
                $('input', $form).removeAttr('disabled');
                $('.js-input-password',$form).focus();
            }
        });
    }

    return false;

}); 
```

我在控制台中收到此日志，这意味着对 getheader 的第二次 ajax 调用失败，但该错误根本不提供信息

```
> Object
Error 
```

有任何想法吗？

我猜这个错误可能与饼干或季节有关

当我处于第一个阶段，未登录时，我登录 php 的通过 ajax 启动会话并创建 cookie 对吗？但是这个会话或 cookie 不可访问或不存在于我的当前页面中（从哪里我完成了登录 ajax 调用）。

因此，也许 php 正在阻止从未登录页面（未启动 cookie 或会话）获取已登录部分（会话和 cookie 退出的地方）的内容

这有什么意义吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T00:28:40.217

ajax 错误回调最多可以使用 3 个参数`error(jqXHR, textStatus, errorThrown)` 。记录最后一个参数会很有趣，因为它将包含错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T01:08:38.607

不确定您要做什么，但这对我来说看起来像是对链式函数的函数调用：

```
if($isValid.form()) {...} 
```

但如果它工作正常，并且你正在处理 Ajax 调用，我想没关系。

您的第二个 ajax 调用似乎在成功和错误处理程序之间缺少逗号，这可能是您在控制台中没有得到任何相关内容的原因：

尝试：

```
$.ajax({
    url:'/ajax/getheader',
    dataType:'html',
    success: function(data){
        console.log(data);
        $('#header').html(data);
    },
    error:function() {
        console.log('error');
    }
}); 
```

# bash - 如何按两列的比率对 CSV 文件的列进行排序？

> ID：10560055
> 
> 赞同：3
> 
> 时间：2012-05-12T00:21:22.820
> 
> 标签：bash, awk

我有一个这样的 CSV 文件：

```
bear,1,2
fish,3,4
cats,1,5
mice,3,3 
```

我想按第 2 列和第 3 列的比率从高到低对其进行排序。例如：

```
bear,1,2 # 1/2 = 0.5
fish,3,4 # 3/4 = 0.75
cats,1,5 # 1/5 = 0.2
mice,3,3 # 3/3 = 1 
```

这将像这样排序：

```
mice,3,3
fish,3,4
bear,1,2
cats,1,5 
```

*   如何按第 2 列和第 3 列中两个数字的比率从高到低对列进行排序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T00:43:17.650

```
awk 'BEGIN { FS = OFS = ","} {$4 = $2/$3; print}' | sort -k4,4nr -t, | sed 's/,[^,]*$//' inputfile 
```

或使用 GNU AWK ( `gawk`)：

```
awk -F, '{a[$3/$2] = $3/$2; b[$3/$2] = $0} END {c = asort(a); for (i = 1; i <= c; i++) print b[a[i]]}' inputfile 
```

上述方法比以下方法更好，但这比使用 Bash 和各种实用程序的另一个答案更有效：

```
while IFS=, read animal dividend divisor
do
    quotient=$(echo "scale=4; $dividend/$divisor" | bc)
    echo "$animal,$dividend,$divisor,$quotient"
done < inputfile | sort -k4,4nr -t, | sed 's/,[^,]*$//' 
```

作为一个单行：

```
while IFS=, read animal dividend divisor; do quotient=$(echo "scale=4; $dividend/$divisor" | bc); echo "$animal,$dividend,$divisor,$quotient"; done < inputfile | sort -k4,4nr -t | sed 's/,[^,]*$//' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T00:25:58.107

为什么不创建另一列来保存第二列和第三列的比率，然后对该列进行排序？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T03:46:34.110

bash 不适合这样的东西——选择你自己喜欢的编程语言，然后在那里做。

如果你坚持......这是一个例子：

```
a=( `cut -d "," -f 2 mat.csv` ); b=( `cut -d "," -f 3 mat.csv` );for i in {0..3};do (echo -n `head -n $((i+1)) mat.csv|tail -1`" "; echo "scale=4;${a[i]}/${b[i]}"|bc) ;done|sort -k 2 -r 
```

修改文件名和长度。

# ruby-on-rails - 如何绕过为 ruby on rails 中的嵌套属性设置的验证规则？

> ID：10560056
> 
> 赞同：0
> 
> 时间：2012-05-12T00:21:36.473
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我有一个微帖子表单，允许用户上传照片并输入一些内容。图像文件字段是我的照片模型的嵌套属性。

它有一个验证规则“presence => true”。微博不需要这样做。用户可以发布没有图片/照片的微博。

我如何为用户图片库使用相同的照片模型，并且在提交表单时需要一张照片，所以我无法禁用此规则。

当我发布微帖子表单时，有什么方法可以绕过我的照片模型中设置的验证规则？

**控制器：**

```
 def new
    @user = User.new 
    @micropost = Micropost.new(:user_id => users_id)
    @micropost.build_photo(:photo_album_id => current_user.photo_albums.find_by_album_title("microposts album").id)
  end 
```

**形式：**

```
= form_for @micropost, :html => { :multipart => true }, :remote => true do |f|
    = f.fields_for :photo do |p|
        = p.hidden_field :photo_album_id
        = p.text_field :photo_title
        = p.file_field :image, :id => "micropost_image"
    = f.hidden_field :user_id
    = f.text_area :content
        = f.submit "Post" 
```

**微贴模型：**

```
class Micropost < ActiveRecord::Base

    belongs_to :user
    has_many :comments, :dependent => :destroy 
    has_one  :photo, :dependent => :destroy

    accepts_nested_attributes_for :photo

    attr_accessor :username 
    attr_accessible :content, :user_id, :poster_id, :username, :remote_image_url, :photo_attributes

    validates :content, :presence => true, :length => { :maximum => 10000 }
    validates :user_id, :presence => true

end 
```

**照片模型：**

```
class Photo < ActiveRecord::Base

    belongs_to :photo_album

    attr_accessible :photo_album_id, :photo_title, :image, :remote_image_url
    mount_uploader :image, ImageUploader

    alpha_num_non_word_char = /^[a-zA-Z0-9\D_ -]*$/

    validates :image, :presence => true
    validates :photo_title, :length => { :minimum => 2, :maximum => 50 },
                              :format => { :with => alpha_num_non_word_char,
                                           :message => "error"
                                         }, :if => :photo_title?    
    validate :picture_size_validation, :if => "image?"

    def picture_size_validation
    errors[:image] << "Your photo should be less than 1MB" if image.size > 1.megabytes
    end

end 
```

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T00:42:01.767

有一个选项，:reject_if，你可以传递给accepts_nested_attributes_for，这样它就不会在某些条件下尝试创建新照片。它会像这样工作：

```
accepts_nested_attributes_for :photo, :reject_if => proc { |attributes| attributes['image'].blank? } 
```

由于您将图像字段的 :id 指定为“micropost_image”，因此您可能必须像这样在 proc 中引用它：

```
attributes['micropost_image'] 
```

这两个之一应该工作。

# c# - WorkflowDesigner - 如何指定表达式应该在 C# 中？

> ID：10560071
> 
> 赞同：3
> 
> 时间：2012-05-12T00:25:02.773
> 
> 标签：c#, workflow-foundation-4

我正在研究 Windows Workflow Foundation 的工作流设计器，并且按照 MSDN 上的说明，我有一个运行设计器、工具箱和属性检查器的小应用程序：http: [//msdn.microsoft.com/en-us/图书馆/dd489407.aspx](http://msdn.microsoft.com/en-us/library/dd489407.aspx)

例如，当添加诸如Assign 之类的语句时，表达式框表明应使用VB 来表示表达式；但是，在 Visual Studio 的 C# 工作流项目中使用工作流设计器，它们允许 C# 表达式。

如何向设计器/语句/工具箱条目指定应使用 C#？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:46:35.303

当您使用 WF 4.5 和 VS11 创建 C# 项目时，您的表达式将使用 C#，如果您创建 VB 项目，它们将使用 VB。

如果您愿意，可以将带有 VB 表达式的现有工作流添加到 C# 项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T08:58:33.340

> 如何向设计器/语句/工具箱条目指定应使用 C#？

你不。自从 Workflow FOundation 开始作为 SQL Server IITC 的基于 COM 的组件以来... VB 脚本就是语法。

4.5 允许您在 C# 项目中使用 C# 语法。但是 4.0 坚持使用 vb 脚本。是的，生活是不公平的——我个人认为这是问题所在。上一个项目我们做了很多工作流，整个团队都是 C# 人员，然后经常出现“定义数组的语法是什么”或“我如何获得对类型的引用”（即 typeof 等价物）； )

4.5\. 根据项目的时间表，无论如何我都会使用它。它是 4.0 的替代品，将在 10 月前推送...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-06T16:52:36.220

重新托管的设计器不支持 C# 表达式。

[您可以在此处](http://msdn.microsoft.com/en-us/library/jj205428.aspx)查看“详细信息” 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T15:34:20.753

xaml 中的唯一区别似乎如下：

```
sap2010:ExpressionActivityEditor.ExpressionActivityEditor="C#" 
```

# java - 可以从 JDBC 中运行 sqlite .import 命令吗？

> ID：10560074
> 
> 赞同：0
> 
> 时间：2012-05-12T00:25:42.700
> 
> 标签：java, performance, sqlite, jdbc, import

尝试它在“。”上给了我一个语法错误。

如果没有，是否有另一种方式将数据批量加载到具有类似性能的 sqlite 数据库中？.import（从命令行）在一分钟内完成插入（包装在事务中）在 20 多分钟内完成的工作。

[在阅读sqlite3 中的 Faster bulk inserts](https://stackoverflow.com/questions/364017/faster-bulk-inserts-in-sqlite3)后，我尝试使用 .import ？. 除了虚拟表之外，我已经尝试了所有其他建议。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:35:23.713

所有`.blah`命令都是 sqlite shell 的特性；它们不能从 JDBC（或任何其他嵌入的语言）中使用。对于非常大的数据导入，可以单独运行它（或者在子进程中，前提是父进程当时没有处理任何其他事务）。

# c++ - 是否可以“复制”其模板类派生自非模板基类的对象？

> ID：10560081
> 
> 赞同：2
> 
> 时间：2012-05-12T00:26:42.243
> 
> 标签：c++, class, templates, polymorphism

我用 C++ 构建了一个小型、范围有限的跨平台 UI 库。它使用以下类来处理 UI 回调：

```
// Base class for templated __Callback class to allow for passing __Callback
// objects as parameters, storing in containers, etc. (as Callback*)
class Callback
{
    public:
        virtual void execute() = 0;
        virtual ~Callback() { }

    protected:
        Callback() { }
}; 
```

正如评论所描述的，这是回调的基类 - 它允许将它们作为参数传递并将它们存储在 UI 小部件中，以便可以执行正确的回调（例如，当用户单击按钮时）。

```
// C++ has no callbacks (in the sense of an action [method] of a
// target [object]), so we had to roll our own. This class can be used
// directly, but the NEW_CALLBACK macro is easier.
template <class __TargetType>
class __Callback : public Callback
{
    public:
        typedef __TargetType TargetType;
        typedef void (TargetType::*ActionType)(void);

        virtual void execute()
        {
            (this->__target->*this->__action)();
        }

        __Callback(TargetType* target_, ActionType action_) :
        Callback(), __target(target_), __action(action_) { }

        virtual ~__Callback() { }

    private:
        // target object for the callback
        TargetType* __target;

        // action (method) of the target that will be called
        ActionType __action;
}; 
```

这个模板类是回调范式的核心。它存储指向对象的指针和指向成员函数的指针，以便以后可以在目标对象上调用成员函数。

```
#define NEW_CALLBACK(class_, obj_, act_) \
    new __Callback<class_>(obj_, &class_::act_) 
```

这个宏只是让创建模板`__Callback`对象变得更容易一些。

这已经工作了很长时间了！带有回调的按钮可能被实例化为：

```
MyClass* obj = new MyClass();
Button* btn = new Button("Title", NEW_CALLBACK(MyClass, obj, btnClicked)); 
```

这将创建一个按钮，稍后将其放置在窗口或其他容器中，并在单击时调用`obj->btnClicked()`.

**现在，我的问题**（对不起，设置冗长，我认为我不能再削减它了）。出现了我需要复制`Callback*`对象的情况。当然，由于它只是一个指向基类的指针，我无法确定模板化派生类的类型。

**如何复制一个任意`Callback`对象，副本指向与原始对象相同的目标和动作？**或者，对于这个回调问题，我应该采取完全不同的方法吗（尽管我不想改变太多）？

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T00:34:47.860

我不知道您是否应该采用更好的方法，但这似乎是克隆方法的理想用途。

您只需要在 __Callback 模板中定义一个复制构造函数，在您的基类中定义一个纯虚拟 Clone 方法，然后在您的模板中实现该虚拟方法（利用您创建的复制构造函数）

例如：

```
class Callback
{
    public:
    ...
    virtual Callback* Clone()=0;
};

template <class __TargetType>
class __Callback : public Callback
{
public:
    ...
    __Callback(const __Callback& other) :
        __target(other.target_), __action(other.action_) { }

    virtual Callback* Clone()
    {
        return new __Callback(this);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T00:33:43.210

使用[clone](http://www.parashift.com/c++-faq-lite/virtual-functions.html#faq-20.8)作为虚拟构造函数的替代品。请注意使这真正起作用的协变返回类型。例如

```
struct Callback {
  virtual Callback* clone() const;
};

template<...>
struct Callback_impl {
  virtual Callback_impl* clone() const;
}; 
```

您还应该考虑`shared_ptr`终身管理。这一切似乎有些脆弱。

对我来说，您似乎想要[std::function](http://en.cppreference.com/w/cpp/utility/functional/function)。它是多态的、类型安全的，并通过`std::mem_fn`.

# mysql - 按浏览器对用户代理进行分组

> ID：10560082
> 
> 赞同：4
> 
> 时间：2012-05-12T00:27:08.123
> 
> 标签：mysql, group-by, user-agent

我有一个表格，每一行都包含有关用户页面加载的数据。其中一个字段是该命中的用户代理。如何按浏览器对结果进行分组？我可以按常见的用户代理分组：

```
SELECT useragent, COUNT(useragent) AS c
FROM hitstable
GROUP BY useragent
ORDER BY c DESC 
```

但我想按浏览器分组，无论版本或其他数据如何变化。我希望它输出一个列表，列出浏览器的常见程度。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-04T11:43:43.763

我发现使用 MySQL CASE 来解析浏览器、操作系统和位架构很有帮助。数据 ($_SERVER['HTTP_USER_AGENT']) 通过 PHP 插入到 MySQL 表中。也许您发现以下代码很有帮助。它还根据 UserAgent 呈现一些 Font Awesome 图标。

下面的 SELECT 按浏览器别名分组。当然，对于 OS 和 BitArchitecture 也可以这样做。

```
SELECT 
    CASE
        WHEN `UserAgent` LIKE '%Mac%OS%' THEN '<i class="fa fa-apple"></i> Mac OS X'
        WHEN `UserAgent` LIKE '%iPad%' THEN '<i class="fa fa-apple"></i> iPad'
        WHEN `UserAgent` LIKE '%iPod%' THEN '<i class="fa fa-apple"></i> iPod'
        WHEN `UserAgent` LIKE '%iPhone%' THEN '<i class="fa fa-apple"></i> iPhone'
        WHEN `UserAgent` LIKE '%imac%' THEN '<i class="fa fa-apple"></i> mac'
        WHEN `UserAgent` LIKE '%android%' THEN '<i class="fa fa-android"></i> android'
        WHEN `UserAgent` LIKE '%linux%' THEN '<i class="fa fa-linux"></i> linux'
        WHEN `UserAgent` LIKE '%Nokia%' THEN 'Nokia'
        WHEN `UserAgent` LIKE '%BlackBerry%' THEN 'BlackBerry'
        WHEN `UserAgent` LIKE '%win%' THEN
            CASE
                WHEN `UserAgent` LIKE '%NT 6.2%' THEN '<i class="fa fa-windows"></i> Windows 8'
                WHEN `UserAgent` LIKE '%NT 6.3%' THEN '<i class="fa fa-windows"></i> Windows 8.1'
                WHEN `UserAgent` LIKE '%NT 6.1%' THEN '<i class="fa fa-windows"></i> Windows 7'
                WHEN `UserAgent` LIKE '%NT 6.0%' THEN '<i class="fa fa-windows"></i> Windows Vista'
                WHEN `UserAgent` LIKE '%NT 5.1%' THEN '<i class="fa fa-windows"></i> Windows XP'
                WHEN `UserAgent` LIKE '%NT 5.0%' THEN '<i class="fa fa-windows"></i> Windows 2000'
                ELSE '<i class="fa fa-windows"></i> Windows'
            END      
        WHEN `UserAgent` LIKE '%FreeBSD%' THEN 'FreeBSD'
        WHEN `UserAgent` LIKE '%OpenBSD%' THEN 'OpenBSD'
        WHEN `UserAgent` LIKE '%NetBSD%' THEN 'NetBSD'
        WHEN `UserAgent` LIKE '%OpenSolaris%' THEN 'OpenSolaris'
        WHEN `UserAgent` LIKE '%SunOS%' THEN 'SunOS'
        WHEN `UserAgent` LIKE '%OS/2%' THEN 'OS/2'
        WHEN `UserAgent` LIKE '%BeOS%' THEN 'BeOS'
        ELSE 'Unknown'
    END AS `OS`,
    CASE
        WHEN `UserAgent` LIKE '%edge%'THEN '<i class="fa fa-edge"></i> Edge'
        WHEN `UserAgent` LIKE '%MSIE%' THEN '<i class="fa fa-internet-explorer"></i> Internet Explorer'
        WHEN `UserAgent` LIKE '%Firefox%' THEN '<i class="fa fa-firefox"></i> Mozilla Firefox'
        WHEN `UserAgent` LIKE '%Chrome%' THEN '<i class="fa fa-chrome"></i> Google Chrome'
        WHEN `UserAgent` LIKE '%Safari%' THEN '<i class="fa fa-safari"></i> Apple Safari'
        WHEN `UserAgent` LIKE '%Opera%' THEN '<i class="fa fa-opera"></i> Opera' 
        WHEN `UserAgent` LIKE '%Outlook%' THEN 'Outlook' 
        ELSE 'Unknown'
    END AS `Browser`,
    CASE
        WHEN `UserAgent` LIKE '%WOW64%' THEN '64 bit'
        WHEN `UserAgent` LIKE '%x64%' THEN '64 bit'
        ELSE '32 bit'
    END AS `BitArchitecture`
FROM `Logs`
GROUP BY `Browser`; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T14:36:33.617

[您可以在组 http 用户代理 sql](http://dotclear.placeoweb.com/post/group-http-user-agent-sql)上找到用于对不同用户代理/版本进行排序的 SQL 语句（MySQL 和 SQL Server）。它基于 RegExp 和流行浏览器的 switch case SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T01:05:49.587

请参阅 php 的 get_browser() 函数以从用户代理字符串中识别它。您需要遍历所有用户代理字符串，计算每个字符串的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T01:12:12.813

我想到了两种方法。

1）添加一个只存储浏览器名称的列。这将使通过浏览器进行分组变得非常容易，但会以增大表格为代价。您可以使用Chris 建议的[get_browser()函数。](http://php.net/manual/en/function.get-browser.php)

2) 使用 REGEXP 或 LIKE 查询 (LIKE "%chrome/%") 分别查询每个浏览器的结果，然后将结果合并在一起。这不需要任何额外的空间，但它会使您的查询更成问题。

# python - 如何在获取所有文件大小的同一函数中获取总目录大小？（Python）

> ID：10560085
> 
> 赞同：2
> 
> 时间：2012-05-12T00:27:28.830
> 
> 标签：python, filesystems, operating-system

我正在使用以下函数从目标目录向下获取系统中的所有文件大小。

```
def get_files(target):
    # Get file size and modified time for all files from the target directory and down.
    # Initialize files list
    filelist = []
    # Walk the directory structure
    for root, dirs, files in os.walk(target):
        # Do not walk into directories that are mount points
        dirs[:] = filter(lambda dir: not os.path.ismount(os.path.join(root, dir)), dirs)
        for name in files:
            # Construct absolute path for files
            filename = os.path.join(root, name)
            # Test the path to account for broken symlinks
            if os.path.exists(filename):
                # File size information in bytes
                size = float(os.path.getsize(filename))
                # Get the modified time of the file
                mtime = os.path.getmtime(filename)
                # Create a tuple of filename, size, and modified time
                construct = filename, size, str(datetime.datetime.fromtimestamp(mtime))
                # Add the tuple to the master filelist
                filelist.append(construct)
    return(filelist) 
```

如何修改它以包含包含目录和目录总大小的第二个列表？我试图将此操作包含在一个函数中，希望比在单独的函数中执行第二次遍历以获取目录信息和大小更有效。

这个想法是能够报告前 20 个最大文件的排序列表，以及前 10 个最大目录的第二个排序列表。

感谢你们的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T01:16:44.673

我在字典而不是列表中输出目录，但看看你是否喜欢它：

```
def get_files(target):
    # Get file size and modified time for all files from the target directory and down.
    # Initialize files list
    filelist = []
    dirdict = {}
    # Walk the directory structure
    for root, dirs, files in os.walk(target):
        # Do not walk into directories that are mount points
        dirs[:] = filter(lambda dir: not os.path.ismount(os.path.join(root, dir)), dirs)
        for name in files:
            # Construct absolute path for files
            filename = os.path.join(root, name)
            # Test the path to account for broken symlinks
            if os.path.exists(filename):
                # File size information in bytes
                size = float(os.path.getsize(filename))
                # Get the modified time of the file
                mtime = os.path.getmtime(filename)
                # Create a tuple of filename, size, and modified time
                construct = filename, size, str(datetime.datetime.fromtimestamp(mtime))
                # Add the tuple to the master filelist
                filelist.append(construct)
                if root in dirdict.keys():
                    dirdict[root] += size
                else:
                    dirdict[root] = size
    return(filelist, dirdict) 
```

如果您希望 dirdict 作为元组列表，只需执行以下操作：

```
dirdict.items() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T01:53:51.407

我有很多脚本可以做这种事情，我刚刚将“bigfiles.py”上传到 github [http://github.com/sente/sys-utils/blob/master/bigfiles.py](http://github.com/sente/sys-utils/blob/master/bigfiles.py)

它不计算总累积目录大小，但可以轻松修改它。

我还有其他代码可以在给定深度求和总目录大小，例如：

```
In [7]: t = build_tree_from_directory('/scratch/stu/')

In [8]: pprint.pprint(walk_tree(t,depth=0))
{'name': 'ROOT', 'size': 6539880514}

In [9]: pprint.pprint(walk_tree(t,depth=0))
{'name': 'ROOT', 'size': 6539880514}

In [10]: pprint.pprint(walk_tree(t,depth=1))
{'children': [{'name': 'apache2-gzip', 'size': 112112512},
              {'name': 'gitnotes', 'size': 897104422},
              {'name': 'finder', 'size': 3810736368},
              {'name': 'apache2', 'size': 1719919406}],
 'name': 'ROOT'}

In [12]: pprint.pprint(walk_tree(t,depth=2))
{'children': [{'children': [{'name': 'vhost', 'size': 103489662}],
               'name': 'apache2-gzip'},
              {'children': [{'name': '2', 'size': 533145458},
                            {'name': 'notes.git', 'size': 363958964}],
               'name': 'gitnotes'},
              {'children': [{'name': 'gzipped', 'size': 3810736368},
                            {'name': 'output.txt', 'size': 0}],
               'name': 'finder'},
              {'children': [{'name': 'sente_combined.log', 'size': 0},
                            {'name': 'lisp_ssl.log', 'size': 0},
                            {'name': 'vhost', 'size': 1378778576},
                            {'name': 'other_vhosts_access.log', 'size': 0},
                            {'name': 'ssl_error.log', 'size': 0},
                            {'name': 'ssl_access.log', 'size': 0},
                            {'name': 'sente_test.log', 'size': 0}],
               'name': 'apache2'}],
 'name': 'ROOT'} 
```

FS 只爬行一次，但树一旦创建就需要遍历以获得完整大小，如果您从叶节点开始并朝着根部工作，您可以最有效地计算每个 dir 的总大小。

# node.js - Node.js“无法读取未定义的属性'userAgent'”

> ID：10560086
> 
> 赞同：2
> 
> 时间：2012-05-12T00:27:36.967
> 
> 标签：node.js, require

Edit4：我现在很高兴在 Linux 中进行这项工作，因为我已经了解了放置位置以及如何为项目复制文件的其他问题。继续并接受答案并关闭它。

Edit3：由于 Len 的评论，我目前有一个解决方法，即使用我的 Debian VM 而不是 Windows。但是，我暂时不回答这个问题，看看是否有人可以解决 Windows 问题。

我一直在慢慢地在我的 Windows 7 桌面上安装 Node.js。我说得很慢，因为每一步都有问题，从 PATH 变量没有更新，到不知道我需要 python，再到 npm 权限错误。无论如何，在 Google 的帮助下，我已经完成了很多工作，但这让我完全感到困惑：

```
D:\Website\Webscraper>node webscrape.js

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
TypeError: Cannot read property 'userAgent' of undefined
    at D:\Website\Webscraper\node_modules\jquery\lib\node-jquery.js:87:23
    at D:\Website\Webscraper\node_modules\jquery\lib\node-jquery.js:995:2
    at create (D:\Website\Webscraper\node_modules\jquery\lib\node-jquery.js:9416:2)
    at D:\Website\Webscraper\node_modules\jquery\lib\node-jquery.js:9422:18
    at Object.<anonymous> (D:\Website\Webscraper\node_modules\jquery\lib\node-jquery.js:9424:1)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Module.require (module.js:354:17) 
```

这是我的整个代码：

```
var $ = require('jquery'); 
```

在关于丢失软件包的无尽错误之后，我通过 npm 在本地安装了以下内容：

*   jquery@1.7.2
*   htmlparser@1.7.6
*   jsdom@0.2.14
*   cssom@0.2.3
*   请求@2.9.202
*   xmlhttprequest@1.3.0
*   位置@0.0.1
*   导航器@1.0.1

但是由于我现在得到的错误是一个非常通用的 JS 错误，并且专门搜索它已经获得了 0 个谷歌点击，我很难过。我想做的就是在 node.js 中运行 jquery。这应该需要大约 3 行输入。我到底错过了什么？

编辑：查看 navigator.userAgent 的结果，看起来我下载的 navigator 包是为了解决这个问题，但它不起作用。我还尝试在 jquery 模块中编辑 node-jquery，用一个设置我自己的 userAgent 的全局变量“navigator”以及其他一些东西来覆盖全局变量，但没有任何东西可以改变错误，更不用说解决问题了。

Edit2：（针对 Debian 修复，请参阅 Len 的回答下的评论）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T01:17:10.663

为我工作！

```
aeka ~/test$ cat webscrape.js 
var $ = require('jquery');
aeka ~/test$ node webscrape.js 
aeka ~/test$ echo $?
0
aeka ~/test$ npm ls
/Users/annelicuss/test
├─┬ jquery@1.7.2 
│ ├── htmlparser@1.7.6 
│ ├─┬ jsdom@0.2.14 
│ │ ├─┬ contextify@0.1.2 
│ │ │ └── bindings@0.3.0 
│ │ ├── cssom@0.2.3 
│ │ └── request@2.9.202 
│ └── xmlhttprequest@1.3.0 
└── navigator@1.0.1 

aeka ~/test$ 
```

# linq - 涉及连接的复杂 sql 查询的 Linq 和 Lambda 表达式

> ID：10560087
> 
> 赞同：0
> 
> 时间：2012-05-12T00:27:37.900
> 
> 标签：linq, entity-framework, lambda

在 MVC 3 项目中使用 Linq to Entity（实体框架）。

我的模型：

表 - 用户用户
ID (PK)
...

表 - 客户
C​​lientID (PK)

表 - PropertyItems
PropertyItemID (PK)

表 - MemberContactPreference（包含用户选择的 PropertyItems - 多对多）
UserID(FK)
PropertyItemID(FK)

表 ClientProperties（包含属于 Clients 的 PropertyItems - 多对多）
ClientID (FK)
PropertyItemID (FK)

**我想列出所有选择了客户选择的所有属性的不同用户。**

我的方法：

我得到了一个特定客户的所有属性的列表

```
Iqueryable<ClientProperty> clientProperties  = GetClientProperties(ClientID)

Iqueryable<User> UsersMatchingClientProperties = GetAllUsers();

foreach (ClientProperty property in clientproperties)
{

 UsersMatchingClientProperties = (from uem in UsersMatchingClientProperties
                                  join ucp in GetAllMemberContactPreferences on 
                                  ucp.UserID == uem.UserID
                                  where uem.MemberContactPreferences.SelectMany(      
                                  mcp => mcp.PropertyItemID == property.PropertyItemID)
                                  select uem).Distinct;
} 
```

它只第一次给出正确的结果。因为它不会在每次迭代时减少 UsersMatchingClientProperties 中的项目数。实际上它用新的结果集替换了集合。我想在每次迭代中过滤掉这个集合。

此外，在不使用 Linq 的情况下在 Lambda 表达式中执行此操作的任何建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:03:26.790

在 for 循环中生成 iqueryable 似乎是一件危险的事情，最终可能会导致一次执行的怪物 sql join。

无论如何，我认为你不需要那个。这样的事情怎么样？

```
// for a given client, find all users 
// that selected ALL properties this client also selected

Iqueryable<ClientProperty> clientProperties  = GetClientProperties(ClientID)

Iqueryable<User> allUsers= GetAllUsers();

Iqueryable<MemberContactPreference> allMemberContactProperties = GetAllMemberContactPreferences();

Iqueryable<User> UsersMatchingClientProperties = allUsers
.Where(user => allMemberContactProperties
               .Where(membP => membP.UserID==user.UserID)
               .All(membP => clientProperties
                           .Select(clientP => clientP.PropertyID)
                           .Contains(membP.PropertyID)
               )
); 
```

这是一个替代查询，以防您希望用户为给定客户端选择 ANY 属性

```
// for a given client, find all users 
// that selected ANY properties this client also selected

Iqueryable<ClientProperty> clientProperties  = GetClientProperties(ClientID)

Iqueryable<User> allUsers= GetAllUsers();

Iqueryable<MemberContactPreference> allMemberContactProperties = GetAllMemberContactPreferences();

Iqueryable<User> UsersMatchingClientProperties = clientproperties
.Join(allMembersContactProperties, // join clientproperties with memberproperties
      clientP => clientP.PropertyItemID, 
      membP   => membP.PropertyItemID,
      (clientP, membP) => membP)) // after the join, ignore the clientproperties, keeping only memberproperties
.Distinct()                       // distinct is optional here. but perhaps faster with it?
.Join(allUsers,                   //join memberproperties with users
      membP => membP.UserID,
      user  => user.UserID,
      (membP, user) => user))     // after the join, ignore the member properties, keeping only users 
.Distinct(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:32:43.820

我相信 Hugo 在建议改进查询的方法方面做得很好（+1）。但这还不能解释问题的原因，即修改后的关闭陷阱。

我认为在你的循环之后，有一些代码实际上在`UsersMatchingClientProperties`. *在那一刻，使用循环变量的最后一个值`property`*执行查询！（循环变量是在迭代中创建的每个查询委托中的闭包，并且每次迭代都会对其进行修改）。

像这样改变循环：

```
foreach (ClientProperty property in clientproperties)
{
    var property1 = property;
    ... 
```

并在查询中使用 property1。那应该可以解决问题的原因。但如前所述，看起来整个过程可以改进。

# iphone - CGAffineTransformInvert does not reverse view transformation

> ID：10560090
> 
> 赞同：0
> 
> 时间：2012-05-12T00:28:53.237
> 
> 标签：iphone, ios, core-animation

I want to scale+translate a view and then animate this transformation back. But CGAffineTransformInvert returns a transformation that does something different (cannot understand the logic of it).

```
#import <UIKit/UIKit.h>
@interface TestView : UIView {
    UIView *view;
    CGAffineTransform transform;
}
@end

#import "TestView.h"
#import <QuartzCore/QuartzCore.h>
@implementation TestView
- (void)testAnimation:(NSString*)animationID finished:(NSNumber*)finished context:(void*)context {
    CGAffineTransform transformInverted = CGAffineTransformInvert(transform);
    [UIView beginAnimations:@"test2" context:NULL];
    [UIView setAnimationDuration:3.0];
    [UIView setAnimationCurve:UIViewAnimationCurveLinear];
    view.transform = transformInverted;
    [UIView commitAnimations];
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        view = [[UIView alloc] initWithFrame:CGRectMake(150, 150, 100, 100)];
        view.backgroundColor = [UIColor greenColor];
        [self addSubview:view];

        CGAffineTransform transform1 = CGAffineTransformTranslate(view.transform, -150, -150); 
        transform = CGAffineTransformScale(transform1, (float)1/2, (float)1/2); 

        [UIView beginAnimations:@"test1" context:NULL];
        [UIView setAnimationDuration:3.0];
        [UIView setAnimationCurve:UIViewAnimationCurveLinear];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDidStopSelector:@selector(testAnimation:finished:context:) ];

        view.transform = transform;

        [UIView commitAnimations];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T01:22:32.967

`CGAffineTransformInvert`反转变换矩阵，并返回一个矩阵，该矩阵乘以原始结果为`CGAffineTransformIdentity`.

如果您想反转平移/比例，您应该自己跟踪它们。

PS。矩阵非常复杂，它们不存储平移/缩放/旋转值，它们由多个值组成，当乘以坐标时，可以得到平移/缩放/旋转值，因此您不能期望反转矩阵并得到一个平移、缩放和旋转倒置的矩阵。

[你可以在这里](http://en.wikipedia.org/wiki/Transformation_matrix)阅读更多关于它们的信息。

编辑以回答您的评论：

使用矩阵时，操作顺序很重要，如果先旋转再平移，结果将与先平移再旋转不同。

要反转应用于矩阵的操作，您应该以相反的顺序应用相反的操作，在这种情况下，要反转：

```
CGAffineTransform transform1 = CGAffineTransformTranslate(view.transform, x1, x2);
CGAffineTransform transform2 = CGAffineTransformScale(transform1, r1, r2);
CGAffineTransform transform3 = CGAffineTransformRotate(transform2, a); 
```

你需要这样做：

```
CGAffineTransform reversed3 = CGAffineTransformRotate(transform3, -a);
CGAffineTransform reversed2 = CGAffineTransformScale(reversed3, 1/r1, 1/r2);
CGAffineTransform reversed1 = CGAffineTransformTranslate(reversed2, -x1, -x2);

[view setTransform:reversed1]; 
```

如果你之前没有修改过视图的变换，你可以这样做：

```
[view setTransform:CGAffineTransformIdentity]; 
```

即零旋转，零平移，比例为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:59:27.593

我不确定我是否理解您要做什么，但是您不应该简单地将视图的转换更改回`CGAffineTransformIdentity`testAnimation 方法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-19T20:54:10.210

考虑下面的代码。这里我们有transformTest，然后我们在它上面应用transform3。然后我们在transform3的结果逆之上应用。最终结果非常接近 transformTest （浮点精度更低）。

如果你愿意`view.transform = CGAffineTransformConcat(view.transform, transformInverted);`在你的代码中这样做，它将起作用。

```
CGAffineTransform transformStart = CGAffineTransformIdentity;
CGAffineTransform transform1 = CGAffineTransformTranslate(transformStart, 10, 23);
CGAffineTransform transform2 = CGAffineTransformScale(transform1, 2, 10);
CGAffineTransform transform3 = CGAffineTransformRotate(transform2, M_PI_4);

CGAffineTransform invertedTransform = CGAffineTransformInvert(transform3);

// here actual test
NSLog(@"--------------- here actual test ---------------");

CGAffineTransform transformTest = CGAffineTransformMakeTranslation(2, 15);
transformTest = CGAffineTransformRotate(transformTest, M_PI_2);
transformTest = CGAffineTransformScale(transformTest, 19, 0.4);
transformTest = CGAffineTransformTranslate(transformTest, -33, -19);
NSLog(@"transformTest %@", NSStringFromCGAffineTransform(transformTest));

CGAffineTransform transformTestMultiplied = CGAffineTransformConcat(transformTest, transform3);
NSLog(@"transformTestMultiplied %@", NSStringFromCGAffineTransform(transformTestMultiplied));

CGAffineTransform transformTestMultipliedByInverse = CGAffineTransformConcat(transformTestMultiplied, invertedTransform);
NSLog(@"transformTestMultipliedByInverse %@", NSStringFromCGAffineTransform(transformTestMultipliedByInverse)); 
```

这个的输出：

```
2016-07-19 13:49:22.034 testUIView[45050:69431115] --------------- here actual test ---------------
2016-07-19 13:49:22.034 testUIView[45050:69431115] transformTest [1.1634144591899855e-15, 19, -0.40000000000000002, 2.4492935982947065e-17, 9.5999999999999623, -612]
2016-07-19 13:49:22.034 testUIView[45050:69431115] transformTestMultiplied [-26.870057685088803, 134.35028842544403, -0.56568542494923812, -2.8284271247461898, 889.0751503711158, -4236.611249867763]
2016-07-19 13:49:22.034 testUIView[45050:69431115] transformTestMultipliedByInverse [0, 19, -0.40000000000000002, 0, 9.5999999999999162, -612] 
```

# android - SQLite Update Not Applying Android

> ID：10560094
> 
> 赞同：0
> 
> 时间：2012-05-12T00:30:00.523
> 
> 标签：android, sqlite, listview

When I click on a ListItem, it opens up a custom dialog with 4 EditText fields. The fields are set with current data depending on the row that is clicked. The purpose of the dialog is to allow the user to update the data (it is a financial app). I am having trouble actually applying the update when the user clicks "submit" in the dialog. There are no errors in the app when I run. Here is the onclick method:

```
protected void onListItemClick(ListView l, View v, int position, long id) {

    List<Debt> values = datasource.getAllDebt();
    Debt item = values.get(position);
    final long boxId = item.getId();
    // final String BoxId = String.valueOf(boxId);
    final String BoxName = item.getName();
    final String BoxBalance = item.getBalance();
    final String BoxApr = item.getApr();
    final String BoxPayment = item.getPayment();

    // set up dialog
    final Dialog dialog = new Dialog(manageDebts.this);
    dialog.setContentView(R.layout.custom_dialog);
    dialog.setTitle("Edit Debt Details");
    dialog.setCancelable(true);

    // set up text
    EditText et1 = (EditText) dialog.findViewById(R.id.editText1);
    EditText et2 = (EditText) dialog.findViewById(R.id.editText2);
    EditText et3 = (EditText) dialog.findViewById(R.id.editText3);
    EditText et4 = (EditText) dialog.findViewById(R.id.editText4);

    et1.setText(BoxName);
    et2.setText(BoxBalance);
    et3.setText(BoxApr);
    et4.setText(BoxPayment);

    // set up button
    Button button = (Button) dialog.findViewById(R.id.button1);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            datasource.updateDebt(boxId, BoxName, BoxBalance, BoxApr,
                    BoxPayment);

            dialog.dismiss();

        }
    });

    dialog.show();
} 
```

The Update Method in my Database helper class is shown here:

```
public boolean updateDebt(long updateId, String debt_name, String debt_total, String apr, String payment) 
{
    ContentValues values = new ContentValues();
    values.put(MySQLiteHelper.COLUMN_ID, updateId);
    values.put(MySQLiteHelper.COLUMN_DEBT_NAME, debt_name);
    values.put(MySQLiteHelper.COLUMN_DEBT_TOTAL, debt_total);
    values.put(MySQLiteHelper.COLUMN_APR, apr);
    values.put(MySQLiteHelper.COLUMN_PAYMENT, payment);
    return database.update(MySQLiteHelper.TABLE_DEBT, values, MySQLiteHelper.COLUMN_ID + " = " + updateId, null) > 0;
} 
```

I have verified that the COLUMN_ID and the updateId are pointing to the correct rows in the ListView and the SQL database.

Does someone see something I am not?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T00:45:33.247

也许您的更新违反了约束？只是猜测，没有看到数据库代码。

编辑

丢失行 id 变量周围的单引号，这使得数据库将其视为字符串，并且将字符串与数字进行比较是失败的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:32:54.090

I test your code in my computer.

The update method works fine.

So I think you should post more code .

or You should check your logic.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T00:43:21.210

这将更好地工作：

```
String whereClause = MySQLiteHelper.COLUMN_ID + " = ?";
String[] whereArgs = new String[]{ String.valueOf(updateId) };
return database.update(MySQLiteHelper.TABLE_DEBT,
        values, whereClause, whereArgs) > 0; 
```

该`String.valueOf()`调用只是将 ID 转换为字符串值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:28:08.067

我错过了 2 到 3 之间的一步。

***在**onClick 方法中再次**设置**变量。* **一旦用户按下更新按钮，该变量必须重新设置为 EditText 字段的**新**值。像这样（简化版）：**

 **```
 String name = null;
 EditText et;

 name = debt.getName();
 et.setText(name);
 onclick {
     ***name = et.getText().toString();***
     datasource.updateDebt(name);
 } 
```**

# svn - svn error when commit directory

> ID：10560096
> 
> 赞同：0
> 
> 时间：2012-05-12T00:30:48.220
> 
> 标签：svn

I use svn to commit a folder a checked out before and I get the message "containing working copy admin area is missing"

This is the command I used:

```
svn commit -m svn: /home/user/workspace/data/xyz 
```

The path `/home/user/workspace/data/xyz` is on my local pc where `xyz` is the folder I checked out before.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-12T03:39:09.450

看来您的 .svn 文件夹已在此目录中删除。尝试执行“svn update”。如果这不起作用，请删除此文件夹中的所有内容，然后再次尝试“svn update”。

# iphone - 从另一个类设置 NSString 属性时出错

> ID：10560099
> 
> 赞同：0
> 
> 时间：2012-05-12T00:31:04.910
> 
> 标签：iphone, ios, uiviewcontroller

我在将字符串传递给另一个 UIViewController 然后打开这个 UIViewController 时遇到问题，这就是我所做的：

。H

```
#import <UIKit/UIKit.h>

@interface BroswerViewController : UIViewController

@property (retain, nonatomic) IBOutlet UIWebView *myBrowserView;
@property (nonatomic, retain) NSString * myString;
@end 
```

.m

```
@implementation BroswerViewController
@synthesize myBrowserView;
@synthesize myString;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization

}
return self;
}

- (void)viewWillAppear:(BOOL)animated {

myString = [myString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://mywebsite/%@",myString]];
NSLog(@"%@",url);
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[myBrowserView loadRequest:request];

} 
```

我称之为类：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if (!self.myBroserViewController) {
    self.myBroserViewController = [[[BroswerViewController alloc] initWithNibName:@"BroswerViewController" bundle:nil] autorelease];
}

[self.myBroserViewController setMyString:[NSString stringWithString:[stringArray objectAtIndex:indexPath.row]]];
[self.navigationController pushViewController:self.myBroserViewController animated:YES];
} 
```

好的，所以我将一个字符串传递给 BrowseViewController 类，然后打开 browseviewcontroller 类并使用我传递的字符串打开 url，第一次总是工作，然后我返回并传递另一个字符串并打开视图和第二次随机工作，第三次永远不会，我总是在线收到 EXC_BAD_ACCESS

```
@synthesize myString; 
```

我不知道我错了什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T00:42:02.017

`self.myString`在`viewWillAppear:`. _ 当您直接使用变量而不是属性表示法时，您不会获得保留属性的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T01:01:19.977

我会添加一些指向@Phillip Mills 答案的指针。

- 在您的初始化中，您应该将 myString 设置为 nil。这确保了如果它在被设置到其他地方之前被释放，它不会崩溃。包括如果您使用对其执行释放的设置器（您可以释放 nil 引用）。

- 在你的 dealloc 上，你应该释放 myString（除非你使用 ARC）。

-当您在 viewWillAppear 中设置它时，您需要执行以下操作：

```
self.myString = [self.myString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

或者

```
NSString *temp = myString;
[myString release];
myString = [[temp stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding] retain]; 
```

他们都完成了同样的事情。不过使用 self 更容易。

-最后，我会使用复制而不是保留，除非您有非常具体的理由使用保留。这可以确保其他东西不会改变你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T00:58:22.600

最佳实践告诉我们在这种情况下使用复制而不是保留。这就是为什么：

```
myString = [myString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

也会更改初始字符串，下次您将其调用为已转义的字符串。这就是为什么你会出现这种奇怪的行为:)

解决方案 - 改变

```
@property (nonatomic, retain) NSString * myString; 
```

在

```
@property (nonatomic, copy) NSString * myString; 
```

使用

> 自我.myString

也会解决它，但这仍然不是一个好习惯......例如，如果您的方法如下所示：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[self prepareUrl:self.myString]]; 
```

您仍然可以捕捉到非常奇怪且难以调试的工件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T02:11:16.877

在我的代码中，我在我的合成中更改了实例变量名称。

这是您的代码的样子

```
@implementation BroswerViewController
@synthesize myBrowserViewh = _myBrowserViewh;
@synthesize myString = _myString;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization

}
return self;
}

- (void)viewWillAppear:(BOOL)animated {

self.myString = [self.myString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://mywebsite/%@",self.myString]];
NSLog(@"%@",url);
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[myBrowserView loadRequest:request];

} 
```

那时你将被迫使用

```
self.myString = @""; 
```

或通过引用实例变量

```
_myString = @""; 
```

这将使编译器帮助您找到这样的错误。

# java - background color shows up only when i touch the text

> ID：10560100
> 
> 赞同：0
> 
> 时间：2012-05-12T00:31:40.970
> 
> 标签：java, android

Here is a code snippet

```
int bgColor = Integer.parseInt(summaryReportObj.backgroundColor, 16);
lv0.setBackgroundColor(bgColor); 
```

The bgColor is blue and shows up only when I touch the text. I want the color to show all the time. When I set background image it displays just great.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:48:44.767

如果我的猜测是正确的并且 lv0 是 ListView 那么你应该尝试在你放入列表的实际列表视图项目上设置你的颜色。

# crystal-reports - Avoid column names on empty results in Crystal Reports

> ID：10560106
> 
> 赞同：0
> 
> 时间：2012-05-12T00:33:12.613
> 
> 标签：crystal-reports, label, formula, crystal-reports-2008, empty-list

My question it's quite simple.

Suppose I have a "StoredProcedure" that gives me a result of a table with 2 columns, say: "Name" and "Surname".

I want to show the table only if the result set is not empty.

If I drag&drop the "Name" and "Surname" fields to the "Details" section, it automatically generates in the Header section the name of those columns, but if the result set is empty, I still see the column names. What I want is to make the column names dissapear if there isn't any data to show.

Any idea of how to do this?, it sounds very reasonable so I guess the solution is simple, but I don't know it

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:37:18.153

我现在意识到这个问题在我提出的其他问题中得到了回答。 [根据 Crystal Reports 中的空值或空值进行条件打印](https://stackoverflow.com/questions/10567918/conditional-printing-depending-of-empty-or-null-value-in-crystal-reports)

我猜想用“Count()”函数在列标签上设置一个条件值（我猜应该是一个），就能完成工作。

```
If Count(someFieldOfTheResult) == 0 THEN 
    notShowLabel 
ELSE 
    showLabel 
```

# regex - 如何使用正则表达式验证带有可选百分比符号的小数？

> ID：10560107
> 
> 赞同：2
> 
> 时间：2012-05-12T00:33:21.503
> 
> 标签：regex, windows, vb.net, visual-studio, decimal

作为问题的标题，我需要使用以下值验证正则表达式：（最多 2 个小数位和 9 个整数）和一个可选的百分比符号。

有效的：

```
10%
 0%
 1111111.12%
 15.2%
 10
 2.3 
```

无效的：

```
 .%
 12.%
 .02%
 %
 123456789123.123 
```

我试过了：

```
^[0-9]{0,9}([\.][0-9]{0,2})\d[\%]{0,1}?$ 
```

但它不像我想要的那样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T00:39:06.213

试试这个

```
^\d{1,9}(\.\d{1,2})?%?$ 
```

我对 rubular 进行了测试，这对于您的示例来说是可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T00:41:36.443

试试这个：

```
^[0-9]{1,9}([\.][0-9]{1,2})?[\%]?$ 
```

# php - 使用数据库中的 DateTime() 格式化部分未知日期？

> ID：10560108
> 
> 赞同：4
> 
> 时间：2012-05-12T00:33:23.153
> 
> 标签：php, mysql

我有一个数据库，其中有几个未知的月份或日期，格式如下：`1999-01-00`/ `1999-00-00`。

现在，我一直在使用`DateTime()`格式化已满的日子，效果很好。

我想有未知日期的缩写，但使用`$DateTime->format('M Y');`哪些输出已知月份`Sep 1999`

和

`$DateTime->format('Y');`因为`1999`那是未知的月份和日子。

`DateTime()`不允许`00`几个月/几天的值，那么有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T00:13:30.140

正是我正在寻找的（并且不想听到）。

对于像我这样懒惰的人来说，这是一个基本的 php 函数。

```
function formatDatabaseDate($date, $delimiter = '/')
{
    // this function works only on mysql date fields, 
    // and takes into account partial dates.
    if ($date != '' && $date != NULL)
    {
        $datePieces = explode('-', $date);
        if (count($datePieces) == 3 && 
            strlen($datePieces[0]) == 4 && 
            strlen($datePieces[1]) == 2 && 
            strlen($datePieces[2]) == 2)
        {
            $datestring = '';

            $months['01'] = 'Jan';
            $months['02'] = 'Feb';
            $months['03'] = 'Mar';
            $months['04'] = 'Apr';
            $months['05'] = 'May';
            $months['06'] = 'Jun';
            $months['07'] = 'Jul';
            $months['08'] = 'Aug';
            $months['09'] = 'Sep';
            $months['10'] = 'Oct';
            $months['11'] = 'Nov';
            $months['12'] = 'Dec';

            if ($datePieces[2] != '00' && $datePieces[1] != '00')
            {
                $datestring = $datePieces[2] . $delimiter 
                            . $months[$datePieces[1]] . $delimiter 
                            . $datePieces[0];
            }
            else if ($datePieces[1] != '00')
            {
                $datestring = $months[$datePieces[1]] . $delimiter 
                            . $datePieces[0];
            }
            else
            {
                $datestring = $datePieces[0];
            }

            return $datestring;

        }
        else
        {
            trigger_error('date is not in a valid mysql format');
            return false;
        }
    }
    else
    {
        trigger_error('empty date passed to format command');
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T00:43:30.093

不幸的是，DateTime 类几乎是 UNIX 时间戳的包装器。（我说*了很多*，我知道它不仅仅如此。）它与日期一起工作的方式是其中一个元素为零，只是将它计算为上一时期的同义词。（*例如*：4 月 0 日计算为 3 月 31 日。）

实际上，您只需要绕过 PHP 的内置日期功能并编写您自己的。好消息是你确实可以做到这一点。MySQL 实际上会以简单字符串的形式返回值，并且，当涉及到日期时，实际 C 库使用的自然响应是将日期几乎作为 ISO 8601 字符串返回。（这句话*几乎*又出现了。）

如果我正在写这个，我会用（或你自己的方法）读取原始值`mysql_fetch_row`并检查是否定义了所有元素（*即*：年、月、日）。如果是，请使用 DateTime 方法。如果没有，我会编写一段代码来分解定义的元素并相应地格式化它。

# android - Testing an android accessibility service?

> ID：10560111
> 
> 赞同：8
> 
> 时间：2012-05-12T00:34:02.297
> 
> 标签：android, testing, accessibility, android-a11y

I'm developing an Android application with a service that extends `AccessibilityService`. I'd like to be able to test this without mocking out the accessibility framework.

Does anyone have some recommendation on the best way to go about this?

I'd like to set up some different activities, move between them, and verify that my accessibility service responds correctly. I tried using a `ServiceTestCase`, but unfortunately that requires you set up the service yourself. I'm not sure how to set it up in a way similar to how the accessibility framework will set it up for me.

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-06-08T18:05:57.327

基于：

*   [安卓无障碍服务](https://stackoverflow.com/questions/9675611/android-accessibility-service?rq=1)
*   [Android 无障碍服务检测通知](https://stackoverflow.com/questions/12554448/android-accessibility-service-detect-notification)

创建一个服务扩展`AccessibilityService`：

```
public class TestService extends AccessibilityService {

  @Override
  public void onAccessibilityEvent(AccessibilityEvent evt) {
    //Your coding here   
  }

} 
```

在您的清单文件中：

```
<service android:name=".TestService" android:enabled="true" >
    <intent-filter>
        <action android:name="android.accessibilityservice.AccessibilityService" />
    </intent-filter>
    <meta-data android:name="android.accessibilityservice" android:resource="@xml/accessibilityservice" />
</service> 
```

在您的资源（xml 文件夹）中，创建accessibilityservice.xml：

```
<accessibility-service xmlns:android="http://schemas.android.com/apk/res/android"
                       android:accessibilityEventTypes="typeNotificationStateChanged"
                       android:accessibilityFeedbackType="feedbackAllMask"
                       android:notificationTimeout="100" /> 
```

# dart - 你如何在 Dart 中监听 keyUp 事件？

> ID：10560113
> 
> 赞同：4
> 
> 时间：2012-05-12T00:34:44.600
> 
> 标签：dart

如何在 Dart 的 DOM 元素上监听或注册 keyUp 事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:43:37.833

似乎这个线程有点过时了。在最新版本的 Dart 中，你可以像这样监听 key up 事件：

```
import 'dart:html';

main() {
  querySelector('#some-element').onKeyUp.listen((KeyboardEvent e) {
    print(e.keyCode);
  });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T11:15:44.847

要获取 keyUp，您需要：

```
 query('#anElement').on.keyUp.add((Event e) {

  }); 
```

如果您想要等效于：

```
$(".multipleElements").keyUp(function(){....}); 
```

然后你必须这样做：

```
query('.multipleElements').forEach((key, value){
    value.on.keyUp.add((Event e) {

    }
}); 
```

如果您想知道触发了哪个元素，则需要将目标转换为一个元素：

```
query('.multipleElements').forEach((key, value){
    value.on.keyUp.add((Event e) {
        Element target = e.currentTarget;
        ...
    }
}); 
```

# php - 如何防止此查询两次打印相同的结果？

> ID：10560114
> 
> 赞同：0
> 
> 时间：2012-05-12T00:34:44.730
> 
> 标签：php, mysql, sql, repeat

我设法创建了一个适合我需要的查询。但是现在我遇到了问题，在当前显示结果的方式下，查询重复每个结果两次。我怎样才能让它在它显示一次的地方正常工作。

代码：

```
$sql = "SELECT DISTINCT contacts.contact_id, user_accounts.full_name, 
contact_notes.note_name, contact_notes.type, contact_notes.note_id, 
contact_posts.why_post, contact_posts.type, contact_posts.post_id
FROM contacts, user_accounts, contact_notes, contact_posts
WHERE (contacts.system_id = '$sid' AND contacts.contact_id = 
user_accounts.system_id AND contact_notes.user_allowed = '$everybody' AND   
contact_posts.user_allowed = '$everybody') OR (contacts.contact_id = '$sid' 
AND contacts.system_id = user_accounts.system_id AND contact_notes.user_allowed 
= '$everybody' AND contact_posts.user_allowed = '$everybody')
LIMIT $startrow, 20";

$query = mysql_query($sql) or die ("Error: ".mysql_error());

$result = mysql_query($sql);

if ($result == "")
{
echo "";
}
echo "";

$rows = mysql_num_rows($result);

if($rows == 0)
{
print("");

}
elseif($rows > 0)
{
while($row = mysql_fetch_array($query))
{

$noteid = htmlspecialchars($row['note_id']);
$note_title = htmlspecialchars($row['note_name']);
$postid = htmlspecialchars($row['post_id']);
$postreason = htmlspecialchars($row['why_post']);
$datetimeadded = htmlspecialchars($row['just_date']);

print("<br /> <br />$note_title - $noteid <br /><br />$postreason - $postid");
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T00:35:43.960

而不是使用`mysql_fetch_array()`use [`mysql_fetch_assoc()`](http://us3.php.net/manual/en/function.mysql-fetch-assoc.php)。默认情况下，`mysql_fetch_array()`将返回一个包含关联索引*和*数字索引的数组，这将导致您看到两次结果。

# mysql - 无法确定存储过程，END 处出错

> ID：10560117
> 
> 赞同：1
> 
> 时间：2012-05-12T00:35:26.167
> 
> 标签：mysql, stored-procedures

我希望你能帮助我...

我确实知道一些 SQL，但我是 mySQL 的新手......而且有一个简单的查询，我只是无法弄清楚它有什么问题：

```
CREATE PROCEDURE inserttoscrapbookSD
(owner1 VARCHAR(50),
poster1 VARCHAR(50),
Scrap1 VARCHAR(50),

)
BEGIN

INSERT INTO scrapbook (Owner)

VALUES(owner1)

END 
```

我知道有很多变量被传递，但目前只使用一个变量，因为如果它适用于一个变量，它将适用于所有人。我尝试在结尾使用和不使用分号（ ; ）`END`但`VALUES(owner1)`没有运气。它说：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的“） BEGIN INSERT INTO 剪贴簿（所有者）值（所有者1）结束”附近使用正确的语法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T00:51:51.470

您的问题是您需要在定义存储过程时更改分隔符，这允许您`;`在存储过程代码中使用分号而无需完成创建命令。

试试这个：

```
delimiter //

CREATE PROCEDURE inserttoscrapbookSD (
    owner1 VARCHAR(50),
    poster1 VARCHAR(50),
    Scrap1 VARCHAR(50)
)
BEGIN

INSERT INTO scrapbook (Owner)

VALUES(owner1);

END
//

delimiter ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T00:40:10.710

尝试删除最后一个参数后的逗号

# sql - SQL Script 'Find-in-files' Query

> ID：10560118
> 
> 赞同：0
> 
> 时间：2012-05-12T00:35:29.980
> 
> 标签：sql, search, scripting, grep

I love SQL Server Management Studio's 'Find in files' capability -- searching specific file types along multiple pre-defined paths for specified strings. (I have a PERL-driven ASCII editor which does something very similar.) But I am needing a batch process to execute the same sort of argument-rich search for many MANY DIFFERENT strings. I had assumed that once I ran a preliminary search, the query windows would provide (along with the search results) the SQL query syntax executed to produce that search -- which I could then use as a template for creating a complex query or batch search. I see now that this 'Find-in-files' capability in Management Studio isn't a SQL query at all, but a process apparently internal to the software itself. I'm an avid SQL user, but not really a SQL programmer. Does anyone have a simple approach to accomplishing this sort of search in a 'scalable' SQL query?

# haskell - 使用 Cont 从未来和过去获取值

> ID：10560124
> 
> 赞同：19
> 
> 时间：2012-05-12T00:35:51.940
> 
> 标签：haskell, monads, continuations, tying-the-knot, monadfix

我正在用 Haskell 编写一个笨拙的解释器，我想出了我认为对程序非常有趣的描述：

```
data Program m = Instruction (m ()) (Program m)
               | Control (m (Program m))
               | Halt 
```

然而，将一个 Brainfuck 程序的文本表示解析为这种数据类型是很棘手的。尝试正确解析方括号会出现问题，因为有一些打结要做，以便`Instruction`循环内的最终链接再次链接到循环`Control`。

更多初步信息。有关所有详细信息，请参阅[github repo 上的此版本。](https://github.com/DanBurton/bf-interp/blob/1150f2c1da54bfd4e2f09dafb44a7a82967c9693/Parser.hs)

```
type TapeM = StateT Tape IO
type TapeP = Program TapeM
type TapeC = Cont TapeP

branch :: Monad m => m Bool -> Program m -> Program m -> Program m
branch cond trueBranch falseBranch =
  Control ((\b -> if b then trueBranch else falseBranch) `liftM` cond)

loopControl :: TapeP -> TapeP -> TapeP
loopControl = branch (not <$> is0) 
```

这是我尝试过的：

```
toProgram :: String -> TapeP
toProgram = (`runCont` id) . toProgramStep

liftI :: TapeM () -> String -> TapeC TapeP
liftI i cs = Instruction i <$> toProgramStep cs

toProgramStep :: String -> TapeC TapeP
toProgramStep ('>':cs) = liftI right cs
-- similarly for other instructions
toProgramStep ('[':cs) = push (toProgramStep cs)
toProgramStep (']':cs) = pop (toProgramStep cs)

push :: TapeC TapeP -> TapeC TapeP
push mcontinue = do
  continue <- mcontinue
  cont (\breakMake -> loopControl continue (breakMake continue))

pop :: TapeC TapeP -> TapeC TapeP
pop mbreak = do
  break <- mbreak
  cont (\continueMake -> loopControl (continueMake break) break) 
```

我想我可以以某种方式使用延续来将信息从`'['`案例传递到`']'`案例，反之亦然，但我对 Cont 没有足够的把握，除了对看起来可能有效的事情进行疯狂猜测之外，我还没有真正做任何事情，如上所示`push`和`pop`。这编译并运行，但结果是垃圾。

这种情况可以`Cont`用来打结吗？如果不是，那么我应该使用什么技术来实现`toProgram`？

* * *

注 1：我之前有一个微妙的逻辑错误：`loopControl = branch is0`布尔值反转了。

注意 2：我设法使用`MonadFix`（如 jberryman 建议的那样）`State`提出了一个解决方案（请参阅[github 存储库的当前状态](https://github.com/DanBurton/bf-interp/blob/master/Parser.hs)）。我仍然想知道如何做到这一点`Cont`。

注 3：我的 Racketeer 导师为我准备[了一个类似的 Racket 程序](https://github.com/jeapostrophe/exp/blob/master/bf-1.rkt)（查看所有修订版）。他的管道/管道输出技术可以使用 翻译成 Haskell`Cont`吗？

* * *

**tl; 博士**我设法使用 MonadFix 做到了这一点，而其他人则设法使用 Racket 的延续组合器做到了这一点。我很确定这可以`Cont`在 Haskell 中完成。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-21T09:27:28.373

带有 continuation monad 的前向旅行状态如下所示：

```
Cont (fw -> r) a 
```

那么参数的类型`cont`是

```
(a -> fw -> r) -> fw -> r 
```

所以你`fw`从过去得到一个传递，你必须传递给延续。

倒车状态如下：

```
Cont (bw, r) a 
```

那么参数的类型`cont`是

```
(a -> (bw, r)) -> (bw, r) 
```

即你`bw`从你必须传递给过去的延续中得到一个。

这些可以组合成一个延续单子：

```
Cont (fw -> (bw, r)) a 
```

将其应用于解析器时有一个问题，因为`toProgramStep`逆向构建程序，因此 ']' 点的列表是前向状态，而 '[' 点的列表是后向状态。另外，我变得懒惰并跳过了 Maybe 部分，它应该会捕获`openBrace`and中的模式匹配错误`closeBrace`。

```
type ParseState = Cont ([TapeP] -> ([TapeP], TapeP))

toProgram :: String -> TapeP
toProgram = snd . ($ []) . (`runCont` (\a _ -> ([], a))) . toProgramStep

openBrace :: ParseState TapeP -> ParseState TapeP
openBrace mcontinue = do
  continue <- mcontinue
  cont $ \k (break:bs) -> let (cs, r) = k (loopControl continue break) bs in (continue:cs, r)

closeBrace :: ParseState TapeP -> ParseState TapeP
closeBrace mbreak = do
  break <- mbreak
  cont $ \k bs -> let (continue:cs, r) = k (loopControl continue break) (break:bs) in (cs, r) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T20:59:14.917

因为我不喜欢这个答案，所以非常懒惰`Cont`，但[MonadFix](http://www.haskell.org/haskellwiki/MonadFix)可能是您正在寻找的吗？`State`是一个实例，虽然不是`Cont`，它可以让你做一些看起来像的事情（使用[“递归做”符号](http://www.haskell.org/ghc/docs/6.12.2/html/users_guide/syntax-extns.html#mdo-notation)）：

```
{-# LANGUAGE DoRec #-}
parseInst str = do
    rec ctl <- parseInstructionsLinkingTo ctl str 
```

这是我为我的演员库发现的解决方案：我们想要一个`spawn`返回生成演员邮箱的操作，但是我们如何启动相互通信的演员？还是可以访问自己邮箱的演员？

使用合适的`MonadFix`实例，我们可以这样做：

```
fork3 = do
    rec mb1 <- spawn $ actorSpamming mb2 mb3
        mb2 <- spawn $ actorSpamming mb1 mb2
        mb3 <- spawn $ actorSpamming mb2 mb3
    send "go" mb1 
```

希望上面能给你一些想法。

# eclipse - How to detect Files being opened at the startup of an Eclipse-Plugin

> ID：10560129
> 
> 赞同：1
> 
> 时间：2012-05-12T00:37:34.753
> 
> 标签：eclipse, eclipse-plugin, text-editor

I'm developing my custom text editors in Eclipse. For the configuration of my text editors, I have to access the current file which is being opened.

It is no problem, if the file is opened by being selected in project explorer:

```
 ISelection selection = PlatformUI.getWorkbench()
            .getActiveWorkbenchWindow().getSelectionService().getSelection(); 
```

My question is: How can I access the file, if it is being opened at the startup ? Eclipse remembers the files which were opened before the last termination, but there is no ISelection which would provide me the selected IResource.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T03:17:42.430

您可以使用 IPartListener2 接口在打开编辑器时收到通知。[我在这里](https://stackoverflow.com/a/10377810/639520)谈过。

# css - 任何人都知道为什么：在 CSS 无法在 IE9 中运行之后？

> ID：10560138
> 
> 赞同：7
> 
> 时间：2012-05-12T00:39:06.830
> 
> 标签：css, internet-explorer-9, pseudo-element

[此提交按钮](http://jsfiddle.net/BWC9q/6/)应在左侧呈圆形，并指向右侧。它在非 ie 浏览器中工作，但在 IE9 中，它不起作用。

如果我查看开发人员工具中的样式， .flat-button:after 规则将所有内容都划掉了，就好像它被某些东西取代了一样。什么？

```
<button type="submit" class="flat-button">Submit</button>
<style>
.flat-button {
    float: left;
    position: relative;
    border-top-left-radius: 5px;
    -moz-border-top-left-radius: 5px;
    -webkit-border-top-left-radius: 5px;
    border-bottom-left-radius: 5px;
    -moz-border-bottom-left-radius: 5px;
    -webkit-border-bottom-left-radius: 5px;
    border: none;
    padding: 0 12px;
    margin: 0 3px 3px 0;
    outline: none;
    cursor: pointer;
    color: white;
    font-family:'Trebuchet MS', Arial, helvetica, Sans-Serif;
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    text-decoration: none;
    border-collapse: separate;
    height: 26px;
    line-height: 26px;
    background: #5191cd;
}
.flat-button:hover {
    background: #1c3f95;
}
.flat-button:after {
    position: absolute;
    content: ' ';
    height: 0;
    width: 0;
    left: 100%;
    border: 13px solid transparent;
    border-left-color: #5191cd;
}
.flat-button:hover:after {
    border-left-color: #1c3f95;
}
</style> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-12T01:15:49.743

玩了一段时间后，我找到了一个简单的 IE9 修复程序。

[http://jsfiddle.net/thirtydot/BWC9q/10/](http://jsfiddle.net/thirtydot/BWC9q/10/)

您所要做的就是添加`overflow: visible`到`.flat-button`.

# php - 在 HTML/PHP 中实现“杀死”按钮

> ID：10560139
> 
> 赞同：1
> 
> 时间：2012-05-12T00:39:25.223
> 
> 标签：php, javascript, html

我目前正在开发一个 PHP UI，它收集信息、解析信息、将其发送到另一个程序、收集输出并将其呈现给用户。

通常它工作得很好。但是，有时，另一个程序可能需要很长时间才能完成（大约 2 到 15 个小时，我让它运行一夜，然后在早上完成）。我想实现一个允许用户取消程序的 KILL 按钮，因为它不仅需要永远完成，而且会占用服务器并阻止用户在此期间做任何其他事情。

它当前的设置方式是这样的：page1.php 收集所有用户输入。page2.php 检查用户输入。如果它不好，它会打印错误。如果输入是好的，它会解析它并通过系统调用将其发送到另一个程序。发生这种情况时，屏幕上会出现一个“正在计算...”的 gif。程序完成后，输出将显示在页面上。

理想情况下，我希望终止按钮与计算 gif 同时（并且仅同时）出现，并且我希望它能够终止进程（并让输出反映进程是被杀）。

到目前为止，我已经能够让按钮在我想要的时间和地点出现。但是，我无法获得我正在寻找的实际杀死功能。目前我已经设置了它，以便使用带有在单击时执行的 javascript 函数的 html 按钮制作按钮。该javascript函数包含带有系统调用的php代码，该系统调用可以找到目标进程并杀死它们（我知道系统调用可以正常工作，因为我可以在终端窗口中使用它并且它工作得很好）。

以下是相关代码：

```
startload("calculating");
$opt->run_optimization($output);
stopload("calculating"); 
```

这会弹出计算 gif 和终止按钮，然后运行一个进行系统调用的函数，然后删除计算 gif 和终止按钮。

```
system("./optimi/optimi < $infile > $outfile"); 
```

这是对另一个程序 (optimi) 的系统调用。

```
 print <<< KILLBUTTON

<br/>
<button type="button" onclick="kill();">Kill</button>
<br/>

<script type="text/javascript">
function kill(){
    <?php
    system("ps -Af | grep optimi | grep -v grep | awk '{print $2}' | xargs sudo kill"); 
    ?>
}
</script>

KILLBUTTON; 
```

这是我的杀戮按钮，现在似乎什么也没做。

我应该指出，重写 optimi 程序是我想不惜一切代价避免的事情，考虑到我不是编写它的人，也没有使用过编写它的编程语言。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T00:47:13.953

您似乎不了解 Web 服务器如何与您的浏览器交互。

当您向运行 php 的 Web 服务器发送请求时，Web 服务器会加载请求的文件，解释任何相关的 php 代码，然后向浏览器发送一个*文本文件*。

如果该文本文件中有 javascript，您的浏览器将尝试解释/执行它。您不能将 php 代码放入 javascript 函数中，并期望它在用户执行某些操作时执行 - 页面上的所有 php 只执行一次 - 当请求页面时。

如果您想运行 php 代码以响应用户交互，则需要为相关 php 脚本设置 ajax 请求。

# php - BBEdit 10 中的 PHP 验证与 Applescript

> ID：10560142
> 
> 赞同：0
> 
> 时间：2012-05-12T00:40:24.923
> 
> 标签：php, validation, applescript, bbedit

我正在尝试向 BBEdit 10 添加一个脚本来验证 PHP 文件。我在我的 Mac 上启用了 PHP 和 Web 共享，我认为脚本是准确的，但我遇到了一个问题，我认为这是由包含空格的卷名引起的。

```
property phpref : "/usr/bin/php -l "
try
    tell application "BBEdit" to get file of first text window
    do shell script phpref & POSIX path of result
    display dialog "Ok: " & result buttons {"Finished Checking"} default button 1
on error msg
    display dialog "Err: " & msg buttons {"Finished Checking"} default button 1
end try 
```

我收到一个错误`get file of`。错误是：无法打开输入文件：/Volumes/ Data

卷名是“Data HD”，这就是我认为空间导致问题的原因。打电话时可以转出空格`get file of`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:53:52.863

这个问题在另一个网站上得到了回答。我想分享最终的答案。问题不在于获取文件。它是使用文件路径的命令行。

这是正确且有效的脚本：

```
property phpref : "/usr/bin/php -l "
try
    tell application "BBEdit" to get file of first text window
    do shell script phpref & quoted form of POSIX path of result
    display dialog "Ok: " & result buttons {"Finished Checking"} default button 1
on error msg
    display dialog "Err: " & msg buttons {"Finished Checking"} default button 1
end try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:25:19.833

我无法测试它，但尝试：

```
tell application "BBEdit" to set xxx to quoted form of POSIX path of (get file of first text window)
do shell script phpref & xxx 
```

在 Finder 中，它看起来像这样：

```
tell application "Finder" to set xxx to quoted form of POSIX path of (get file 1 of desktop as alias) 
```

您是否尝试过在没有空格的情况下临时重命名卷以验证它是否是问题的原因？

# ruby-on-rails - 在 Rails 应用程序中使用 Clearance 的会话超时

> ID：10560143
> 
> 赞同：1
> 
> 时间：2012-05-12T00:41:10.143
> 
> 标签：ruby-on-rails, ruby, timeout, clearance

我在我的 Rails 应用程序中使用 Clearance 进行身份验证。有谁知道配置会话超时的方法？它在我登录后的 5 分钟内将我注销，我似乎找不到任何指定如何设置超时的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T00:57:40.870

当您安装 Clearance 时，我认为它应该添加了一个 config/initializers/clearance.rb 文件。您可以通过使用 cookie_expiration 配置在其中配置会话超时。从他们的文档中，它看起来像这样：

```
@example
  Clearance.configure do |config|
    config.mailer_sender     = 'me@example.com'
    config.cookie_expiration = lambda { 2.weeks.from_now.utc }
    config.password_strategy = MyPasswordStrategy
    config.user_model        = MyNamespace::MyUser
  end 
```

因此，只需为 cookie 过期提供一个 lambda，该 lambda 返回一个 Time 对象，该对象在未来某个时间发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:56:52.600

查看 rdoc，`cookie_expiration`在 Clearance 配置类上有一个方法。这是 - 查看方法的来源：

默认情况下，它看起来像 1 年：

```
def initialize
  @mailer_sender     = 'donotreply@example.com'
  @cookie_expiration = lambda { 1.year.from_now.utc }
end 
```

所以我会考虑在配置中覆盖它。

[http://rdoc.info:8080/github/thoughtbot/clearance/Clearance/Configuration#cookie_expiration-instance_method](http://rdoc.info:8080/github/thoughtbot/clearance/Clearance/Configuration#cookie_expiration-instance_method)

如果您找不到它，有时您可以在 Freenode 上的 Thoughtbot IRC 频道 #thoughtbot 上提问。有时开发人员会在那里闲逛，他们会提出问题。

# android - 运行 Android 简单 OCR 应用程序后强制关闭

> ID：10560144
> 
> 赞同：0
> 
> 时间：2012-05-12T00:41:27.417
> 
> 标签：android, camera, ocr, tesseract

我已经按照本教程了解了 android 中的 ocr。 [http://gaut.am/making-an-ocr-android-app-using-tesseract/](http://gaut.am/making-an-ocr-android-app-using-tesseract/)

在我的设备上成功运行程序后，拍照，强制关闭。好像它无法分析图像一样。

我已经将训练数据放在我的 /asset/testdata/

训练后的数据下载自： [http ://code.google.com/p/tesseract-ocr/downloads/list](http://code.google.com/p/tesseract-ocr/downloads/list)

我的 logcat 显示我在 **java.lang.ExceptionInInitializerError上有错误**

你能教我怎么修吗？

这是代码：

```
package com.datumdroid.android.ocr.simple;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.zip.GZIPInputStream;

import android.app.Activity;
import android.content.Intent;
import android.content.res.AssetManager;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;
import android.media.ExifInterface;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

import com.googlecode.tesseract.android.TessBaseAPI;

public class SimpleAndroidOCRActivity extends Activity {
    public static final String PACKAGE_NAME = "com.datumdroid.android.ocr.simple";
    public static final String DATA_PATH = Environment
            .getExternalStorageDirectory().toString() + "/SimpleAndroidOCR/";

    // You should have the trained data file in assets folder
    // You can get them at:
    // http://code.google.com/p/tesseract-ocr/downloads/list
    public static final String lang = "eng";

    private static final String TAG = "SimpleAndroidOCR.java";

    protected Button _button;
    // protected ImageView _image;
    protected EditText _field;
    protected String _path;
    protected boolean _taken;

    protected static final String PHOTO_TAKEN = "photo_taken";

    @Override
    public void onCreate(Bundle savedInstanceState) {

        String[] paths = new String[] { DATA_PATH, DATA_PATH + "tessdata/" };

        for (String path : paths) {
            File dir = new File(path);
            if (!dir.exists()) {
                if (!dir.mkdirs()) {
                    Log.v(TAG, "ERROR: Creation of directory " + path
                            + " on sdcard failed");
                    return;
                } else {
                    Log.v(TAG, "Created directory " + path + " on sdcard");
                }
            }

        }

        // lang.traineddata file with the app (in assets folder)
        // You can get them at:
        // http://code.google.com/p/tesseract-ocr/downloads/list
        // This area needs work and optimization
        if (!(new File(DATA_PATH + "tessdata/" + lang + ".traineddata"))
                .exists()) {
            try {

                AssetManager assetManager = getAssets();
                InputStream in = assetManager.open("tessdata/eng.traineddata");
                // GZIPInputStream gin = new GZIPInputStream(in);
                OutputStream out = new FileOutputStream(DATA_PATH
                        + "tessdata/eng.traineddata");

                // Transfer bytes from in to out
                byte[] buf = new byte[1024];
                int len;
                // while ((lenf = gin.read(buff)) > 0) {
                while ((len = in.read(buf)) > 0) {
                    out.write(buf, 0, len);
                }
                in.close();
                // gin.close();
                out.close();

                Log.v(TAG, "Copied " + lang + " traineddata");
            } catch (IOException e) {
                Log.e(TAG,
                        "Was unable to copy " + lang + " traineddata "
                                + e.toString());
            }
        }

        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        // _image = (ImageView) findViewById(R.id.image);
        _field = (EditText) findViewById(R.id.field);
        _button = (Button) findViewById(R.id.button);
        _button.setOnClickListener(new ButtonClickHandler());

        _path = DATA_PATH + "/ocr.jpg";
    }

    public class ButtonClickHandler implements View.OnClickListener {
        public void onClick(View view) {
            Log.v(TAG, "Starting Camera app");
            startCameraActivity();
        }
    }

    // Simple android photo capture:
    // http://labs.makemachine.net/2010/03/simple-android-photo-capture/

    protected void startCameraActivity() {
        File file = new File(_path);
        Uri outputFileUri = Uri.fromFile(file);

        final Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

        startActivityForResult(intent, 0);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        Log.i(TAG, "resultCode: " + resultCode);

        if (resultCode == -1) {
            onPhotoTaken();
        } else {
            Log.v(TAG, "User cancelled");
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putBoolean(SimpleAndroidOCRActivity.PHOTO_TAKEN, _taken);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        Log.i(TAG, "onRestoreInstanceState()");
        if (savedInstanceState.getBoolean(SimpleAndroidOCRActivity.PHOTO_TAKEN)) {
            onPhotoTaken();
        }
    }

    protected void onPhotoTaken() {
        _taken = true;

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 4;

        Bitmap bitmap = BitmapFactory.decodeFile(_path, options);

        try {
            ExifInterface exif = new ExifInterface(_path);
            int exifOrientation = exif.getAttributeInt(
                    ExifInterface.TAG_ORIENTATION,
                    ExifInterface.ORIENTATION_NORMAL);

            Log.v(TAG, "Orient: " + exifOrientation);

            int rotate = 0;

            switch (exifOrientation) {
            case ExifInterface.ORIENTATION_ROTATE_90:
                rotate = 90;
                break;
            case ExifInterface.ORIENTATION_ROTATE_180:
                rotate = 180;
                break;
            case ExifInterface.ORIENTATION_ROTATE_270:
                rotate = 270;
                break;
            }

            Log.v(TAG, "Rotation: " + rotate);

            if (rotate != 0) {

                // Getting width & height of the given image.
                int w = bitmap.getWidth();
                int h = bitmap.getHeight();

                // Setting pre rotate
                Matrix mtx = new Matrix();
                mtx.preRotate(rotate);

                // Rotating Bitmap
                bitmap = Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, false);
            }

            // Convert to ARGB_8888, required by tess
            bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);
            System.out.println("Bitmap Selesai");
        } catch (IOException e) {
            Log.e(TAG, "Couldn't correct orientation: " + e.toString());
        }

        // _image.setImageBitmap( bitmap );
        //System.loadLibrary("tess");
        System.out.println("Masuk");
        Log.v(TAG, "Before baseApi");

        TessBaseAPI baseApi = new TessBaseAPI();
        baseApi.setDebug(true);
        baseApi.init(DATA_PATH, lang);
        baseApi.setImage(bitmap);
        String recognizedText = baseApi.getUTF8Text();
        baseApi.end();
        System.out.println("Keluar");
        // You now have the text in recognizedText var, you can do anything with
        // it.
        // We will display a stripped out trimmed alpha-numeric version of it
        // (if lang is eng)
        // so that garbage doesn't make it to the display.

        Log.v(TAG, "OCRED TEXT: " + recognizedText);

        if (lang.equalsIgnoreCase("eng")) {
            recognizedText = recognizedText.replaceAll("[^a-zA-Z0-9]+", " ");
        }

        recognizedText = recognizedText.trim();

        if (recognizedText.length() != 0) {
            _field.setText(_field.getText().toString().length() == 0 ? recognizedText
                    : _field.getText() + " " + recognizedText);
            _field.setSelection(_field.getText().toString().length());
        }

        // Cycle done.
    }

    // www.Gaut.am was here
    // Thanks for reading!
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:03:36.713

你的 AndroidManifest.xml 中有这个吗？：

```
 <uses-permission android:name="WRITE_EXTERNAL_STORAGE" /> 
```

我注意到您正在尝试在初始化期间创建文件/目录，也许这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:46:14.560

`System.loadLibrary("tess");`可以在初始化tesseract-ocr之前尝试添加吗？

# javascript - 复杂的正则表达式模式

> ID：10560152
> 
> 赞同：0
> 
> 时间：2012-05-12T00:42:16.477
> 
> 标签：javascript, regex

至少对我来说是一个复杂的正则表达式。这是我有的字符串：

```
/wp-content/themes/modern2/timthumb.php?src=http://www.cnn.com/storyimages/4C59D569-7749-F32B.jpg&h=442&w=642&zc=1&s=2 
```

我想要做的是将该字符串中包含的 url 更改为我选择的另一个 url，即。

```
http://www.cnn.com/storyimages/4C59D569-7749-F32B.jpg 
```

至

```
http://upload.wikimedia.org/wikipedia/commons/2/20/Google-Logo.svg 
```

我不知道如何正则表达式匹配/替换 src= 和 &h= 之间的数据

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T00:46:26.507

必须用正则表达式完成吗？

```
function replaceURL(sourceURL, newPart) {
    var beforeSrc = sourceURL.split('?src=')[0];
    var afterH = sourceURL.split('&h=')[1];

    return beforeSrc + '?src=' + newPart + '&h=' + afterH;
} 
```

然后打电话

```
replaceURL(
    '/wp-content/themes/modern2/timthumb.php?src=http://www.cnn.com/storyimages/4C59D569-7749-F32B.jpg&h=442&w=642&zc=1&s=2',
    'http://upload.wikimedia.org/wikipedia/commons/2/20/Google-Logo.svg'
); 
```

请注意，这是有效的，因为在有效的 URL 中，`?src`子字符串不能比您期望的位置更早出现，也不能更`&h`晚出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T00:47:17.613

可能没有必要使用正则表达式，但既然你问了......

```
var str = '/wp-content/themes/modern2/timthumb.php?src=http://www.cnn.com/storyimages/4C59D569-7749-F32B.jpg&h=442&w=642&zc=1&s=2'
var url = 'http://upload.wikimedia.org/wikipedia/commons/2/20/Google-Logo.svg'
str = str.replace(/src=(.*?)&/, 'src=' + url +'&') 
```

输出：

```
/wp-content/themes/modern2/timthumb.php?src=http://upload.wikimedia.org/wikipedia/commons/2/20/Google-Logo.svg&h=442&w=642&zc=1&s=2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T00:53:58.390

您想像这样使用正则表达式：

```
src=([^&$]+) 
```

这是正则[表达式](http://regexr.com?30u4a)和[代码](http://jsfiddle.net/6eryk/)示例。

# android - SoundPool 或 MediaPlayer 队列

> ID：10560153
> 
> 赞同：1
> 
> 时间：2012-05-12T00:42:37.430
> 
> 标签：android, audio, media-player

可以在媒体播放器或声音池中播放队列中的声音吗？我有 50 个持续时间不到一秒的声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T01:03:23.973

听起来像是 SoundPool 的完美案例。SoundPool 非常适合声音效果之类的东西，它通常很短（比如不到一秒）和丰富的（比如 50），所以它正是您正在寻找的。MediaPlayer 更适合长媒体文件，例如背景音乐曲目和视频，对于 50 个小文件并不实用。

# javascript - 使用 rangy 库获取所选文本的父节点

> ID：10560155
> 
> 赞同：7
> 
> 时间：2012-05-12T00:43:14.780
> 
> 标签：javascript, rangy

我正在使用[rangy](http://code.google.com/p/rangy/)库，可以在可编辑的内容中选择文本，如下所示：

```
var sel = rangy.getSelection();
alert(sel); 
```

我不知道如何获取选定的文本父节点/元素。例如，如果我选择的文本是

```
<strong>My Text</strong> 
or
<h1>My Title</h1> 
```

我怎样才能包含强节点或 H1 元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T10:35:11.557

`sel.anchorNode.parentNode`将为您提供仅包含选择一端的节点的父节点。要获取整个选择的最里面的包含元素，最简单的方法是从选择中获取 Range 并查看其`commonAncestorContainer`属性（可能是文本节点，在这种情况下您需要获取其父节点）：

```
var sel = rangy.getSelection();
if (sel.rangeCount > 0) {
    var range = sel.getRangeAt(0);
    var parentElement = range.commonAncestorContainer;
    if (parentElement.nodeType == 3) {
        parentElement = parentElement.parentNode;
    }
} 
```

# ruby-on-rails - 向此控制器添加 AJAX '添加到收藏夹'？

> ID：10560157
> 
> 赞同：0
> 
> 时间：2012-05-12T00:43:18.853
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3, ruby-on-rails-3.1

这让我大吃一惊，发生了很多事情，我只需要在这里寻求帮助。

现在，我有一个资源列表。在每个资源中，它允许某人通过单击链接将其“添加为收藏”。我让它与正常重定向一起工作，但至于集成 ajax 以便他们可以在不刷新页面的情况下进行收藏，我完全迷失了......

1.  现在我将它作为 CRUD 'update' 的“放置”动作

收藏夹控制器（更新是此控制器中的唯一操作）

```
 def update

    @favorite = Favorite.find_or_initialize_by_resource_id_and_user_id(params[:id], current_user.id)

    if @favorite.persisted?
      @favorite.destroy
    else
       if @favorite.valid?
          @favorite.save
       end
    end

    redirect_to root_url
  end 
```

我的观点：

```
<%= link_to "", favorites_path(:id => resource.id), :class => "star#{star_post?(resource)}", :method => "put" %> 
```

我的路线：

```
 resource :favorites, :only => [:update] 
```

我的 JS：

```
 $('.res-list .star').click(function(){
    $.put('/favorites/?id=' + $(this).attr('data-id'));
    return false;
  }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T01:00:03.817

有几种方法可以做到这一点。您可以使用`link_to_function`它来传递 javascript 方法（如果您已在视图或 application.js 中定义它，您甚至可以传递自定义方法）。在此方法中，您可以设置您的 AJAX 调用以执行更新操作。

查看（使用 jQuery 的`put`宏）：

```
<%= link_to_function "AJAX Link", "$.put('/favorites/#{resource.id}');" %> 
```

另一种方法是为您的链接添加一个 HTML 选择器。同样，您需要编写一些 js 来执行更新操作。我倾向于喜欢这种方式，因为我喜欢使用按钮而不是`<a href="#">`标签。（虽然老实说我最终只是创建了一个`button_to_function`调用`content_tag(:button)`而不是调用的方法`content_tag(:a)`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T00:49:52.557

我建议从这个 Railscast 开始，了解基本的 JQuery 和 Ajax 处理。它有点过时了，但仍然相当扎实，将为您提供入门的基础知识。

[http://railscasts.com/episodes/136-jquery](http://railscasts.com/episodes/136-jquery)

它将让您了解如何将 ajax 调用附加到页面上的元素、处理请求处理并制作一个基本的 JavaScript 视图部分，以更新用户的表单。

祝你好运！

# php - Facebook API 自动向自己发送私人消息

> ID：10560161
> 
> 赞同：0
> 
> 时间：2012-05-12T00:44:10.737
> 
> 标签：php, javascript, facebook, api

我在我的网站上使用 Facebook Connect。我需要让用户能够从我的网站向他们的 Facebook 帐户发送自动私人消息。Facebook API 是否允许这样做？

编辑：我找到了一个解决方案[https://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)但是我需要在没有用户与弹出消息交互的情况下发送消息。如果可能，应直接发送消息，因为它们是自动化的，由用户设置一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:16:48.767

您可以发送到他们的 Facebook 电子邮件。Facebook 电子邮件由个人资料昵称+'@facebook.com' 组成。该电子邮件将发送到他们的 Facebook 收件箱消息。请注意，Facebook 电子邮件不接受欺骗性电子邮件。您将需要 whitelabel 域或使用 SendGrid。

# opencv - 配置 OpenCV 时出现 CMake 错误

> ID：10560164
> 
> 赞同：3
> 
> 时间：2012-05-12T00:45:17.507
> 
> 标签：opencv, cmake

我正在使用 cmake-gui 尝试构建 opencv 但收到此错误：

```
CMake Error at cmake/OpenCVGenConfig.cmake:134 (math):
  math cannot parse the expression: "8 * ": syntax error, unexpected $end,
  expecting exp_OPENPARENT or exp_NUMBER (4)
Call Stack (most recent call first):
  CMakeLists.txt:649 (include) 
```

这是我第一次使用 cmake，所以我不知道该去哪里。我查看了 OpenCVGenConfig.cmake 文件，但对它的语法一无所知。我吹走了所有东西，再次下载了opencv tarball，但仍然得到同样的错误。因此，这似乎不是 OpenCVGenConfig.cmake 文件中的拼写错误/错误，而是在“数学”命令的处理中。我似乎在 Cmake 文档中找不到与“数学”命令相关的任何内容。

有任何想法吗？

-安德烈斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T01:40:05.957

看起来有问题的行是

```
 math(EXPR SIZEOF_VOID_P_BITS "8 * ${CMAKE_SIZEOF_VOID_P}") 
```

问题似乎`${CMAKE_SIZEOF_VOID_P}`是当它应该以字节为单位指示指针的大小时未设置。它应该在调用`project`顶级 CMakeLists.txt 开头附近的命令期间设置。

我不确定为什么没有设置它，它甚至可能是 CMake 中的一个错误。如果您还没有，可以尝试使用[最新版本的 CMake （当前为 2.8.8）。](http://www.cmake.org/cmake/resources/software.html)此外，从命令行运行 CMake 可能会有所不同（它不应该，但你永远不知道）。

如果这没有帮助，最好的办法是在[CMake 邮件列表](http://www.cmake.org/cmake/help/mailing.html)上寻求建议。

作为绝对的最后手段，您可以`CMAKE_SIZEOF_VOID_P`通过添加在您的机器上设置适当的值

```
 if(NOT CMAKE_SIZEOF_VOID_P)
    set(CMAKE_SIZEOF_VOID_P 4)  # replace 4 with 8 for 64-bit machine
  endif() 
```

到 cmake/OpenCVGenConfig.cmake 就在第 134 行`math`调用之前。这是一个可怕的 hack，我当然不推荐它，但它*可以*让您在构建 OpenCV 的同时在邮件列表中寻找正确的答案。

您可以`math`通过运行获取有关命令的信息

```
cmake --help-command math 
```

并`CMAKE_SIZEOF_VOID_P`通过运行

```
cmake --help-variable CMAKE_SIZEOF_VOID_P 
```

# android - 将可运行对象传递给要在 Android/Java 中运行的预先存在的线程

> ID：10560166
> 
> 赞同：2
> 
> 时间：2012-05-12T00:45:47.007
> 
> 标签：android, multithreading, runnable

我有一个与以下链接相关的问题：[Thread start() 和 Runnable run() 之间有什么区别](https://stackoverflow.com/questions/8579657/java-whats-the-difference-between-thread-start-and-runnable-run)

在这个问题中，我看到一个人创建可运行对象，然后以两种不同的方式初始化它们。那么，这是否意味着您可以在运行时将这些可运行对象传递给其他事物？

我想将代码传递给一个预先存在的线程，以便在该线程的循环中执行。我环顾四周，据我所知，您可能希望创建一个专用的可运行类，如下所示：

```
 public class codetobesent implements Runnable  
     {  
       public void run()  
        {   
        ..morecodehere.  
        }  
      ...insertcodestuffhere  
     } 
```

但是我如何将它传递给已经在运行的线程呢？假设我正在尝试制作游戏，并且我希望渲染器在其线程中执行一些特别的操作。我如何将这个可运行对象传递给该线程并让它正确运行这些数据？

我当前的渲染线程实现如下，我从一个教程网站上取下它，到目前为止它运行得很好。但我想知道如何将东西传递给它，这样我就可以运行比预设循环更多的东西。

```
class RenderThread extends Thread 
{
private SurfaceHolder _curholder;
private UserView curview;
private boolean runrender = false; 

    public RenderThread (SurfaceHolder holder, UserView thisview)
    { //Constructor function - This gets called when you create a new instance of this object.
        curview = thisview;
        _curholder = holder;
    }

    public SurfaceHolder getThreadHolder()
    {
        return _curholder;
    }
    public void setRunning(boolean onoff) 
    {
        runrender = onoff;
    }
    @Override
    public void run() 
    {
        Canvas c;
        while (runrender)
        {
            c = null; //first clear the object buffer.
            try 
            {
              c = _curholder.lockCanvas(null); //lock the canvas so we can write to it
              synchronized (_curholder) 
              {//we sync the thread with the specified surfaceview via its surfaceholder.
                  curview.onDraw(c);
              }

            } 

            finally 
            {
              // do this in a finally so that if an exception is thrown
              // during the above, we don't leave the Surface in an
              // inconsistent state
                if (c != null) 
                {
                    _curholder.unlockCanvasAndPost(c);
                }
            }

        }

    }   

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T00:51:10.767

处理程序线程实现。

```
private void testWorker(){
        WorkerThread worker = new WorkerThread();
        worker.start();
        for (int i = 0; i < 10; i++) {
            worker.doRunnable(new Runnable() {
                public void run() {
                    Log.d("demo", "just demo");
                    try {
                        Thread.sleep(1000);//simulate long-duration operation.
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                };
            });
        }
    }

    private class WorkerThread extends HandlerThread implements Callback {

        private Handler mHandler;

        public WorkerThread() {
            super("Worker");
        }

        public void doRunnable(Runnable runnable) {
            if (mHandler == null) {
                mHandler = new Handler(getLooper(), this);
            }
            Message msg = mHandler.obtainMessage(0, runnable);
            mHandler.sendMessage(msg);
        }

        @Override
        public boolean handleMessage(Message msg) {
            Runnable runnable = (Runnable) msg.obj;
            runnable.run();
            return true;
        }

    } 
```

# java - 让runnable进入睡眠状态

> ID：10560167
> 
> 赞同：5
> 
> 时间：2012-05-12T00:46:06.177
> 
> 标签：java, multithreading, notify

我对 Java 有疑问。我想编写一个程序，其中有一个类 Main，它有一些类（类任务）的线程的 ArrayList，它只写一个字母和数字。Object Main 只是从 ArrayList 中唤醒一个线程，并让它在同一个对象（Main）休眠另一个线程时做某事。

它工作正常：0A、0B、0C、1B、1C、1A、2B、2A、2C、3B、3C、3A、4B、4C、4A、5B、5A、5C、

但只有当我评论：e.printStackTrace() e is Exception 然后我在 Main.run(Main.java:22) 的 java.lang.Object.notify(Native Method) 处得到很多 java.lang.IllegalMonitorStateException

所以通知工作错误，我应该如何正确唤醒它，请告诉我，显示，正确。请

```
import java.util.ArrayList;

import java.util.ArrayList;

public class Main extends Thread {
ArrayList<Thread> threads;

public Main() {
    super();
    threads = new ArrayList<Thread>();
}

public void run() {
    for (int i = 0; i < 3; i++) {
        threads.add(new Thread(new Task(i + 65)));
    }
    long cT = System.currentTimeMillis();
    for (int i = 0; i < threads.size(); i++) {
        threads.get(i).start();
    }
    while (System.currentTimeMillis() - cT < 10000) {
        for (int i = 0; i < threads.size(); i++) {
            try {
                threads.get(i).notify();
                // HOW TO WAKE THREAD FROM threads ArrayList
                Thread.sleep(1000);
                // how to put to bed the same thread ?
                threads.get(i).wait();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

}

public static void main(String[] args) {
     new Main().start();
    //new Thread(new Task(65)).start();

}

} 
```

H

```
public class Task implements Runnable {
int nr;
char character;

public Task(int literaASCII) {
    this.nr = 0;
    character = (char) (literaASCII);
}

@Override
public void run() {
    while (true) {
        try {
            System.out.print(nr + "" + character + ", ");
            nr++;
            int r = (int) ((Math.random() * 500) + 500); // <500ms,1000ms)
            Thread.sleep(r);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

public static void main(String[] args) {
    // TODO Auto-generated method stub

}
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-12T04:11:28.733

`sleep`并且`wait`非常不同。`sleep`只是将当前线程暂停指定的时间量，并且与其他线程没有直接交互。

`wait`更复杂： 的想法`wait`是暂停*给定监视器上*的线程（或锁定，如果您愿意）并让其他线程工作，直到它`notify`在该监视器上并释放它。因此`wait`，并且`notify`涉及两个或多个线程之间的交互。

`wait`由于这种交互，为了`notify`正常工作，调用这些方法的线程必须拥有监视器（锁），这意味着，`object.wait()`或者`object.notify()`必须从`synchronized(object){ ... }`块内调用。如果您在`object.wait()`没有`synchronized`-block 的情况下调用，您将始终得到一个`IllegalMonitorStateException`.

在您的代码中，

```
for (int i = 0; i < threads.size(); i++) {
  threads.get(i).start();
} 
```

这将启动所有线程，然后同时运行它们，而不是你想要的一次。

为了确保一次只有一个线程运行一个线程，您需要将一个公共监视器对象传递给所有线程并将它们`wait`放在该监视器上。例如：

```
public class Main extends Thread {
  //...

  public void run(){
    //Initialize all threads with common monitor object
    Object monitor = new Object();
    for (int i = 0; i < 3; i++) {
      threads.add(new Thread(new Task(i + 65, monitor)));
    }
    long cT = System.currentTimeMillis();
    for (int i = 0; i < threads.size(); i++) {
      //All threads will start, and immediately pause on monitor.wait()
      threads.get(i).start();
    }
    synchronized(monitor){
      while (System.currentTimeMillis() - cT < 10000) {
        //All threads are currently waiting, so we need to wake one random
        //thread up by calling notify on monitor. Other thread will not run yet,
        //because this thread still holds the monitor.
        monitor.notify();

        //Make this thread wait, which will temporarily release the monitor
        //and let the notified thread run.
        monitor.wait();
      }
    }
  }
}

//...

public class Task implements Runnable{
  int nr;
  char character;
  Object monitor;

  public Task(int literaASCII, Object monitor) {
    this.nr = 0;
    this.monitor = monitor;
    character = (char) (literaASCII);
  }

  @Override
  public void run() {
    synchronized(monitor){
      while (true) {
        //Pause this thread and let some other random thread
        //do the work. When other thread finishes and calls notify()
        //this thread will continue (if this thread is picked).
        monitor.wait();

        try {
          System.out.print(nr + "" + character + ", ");
          nr++;
          int r = (int) ((Math.random() * 500) + 500); // <500ms,1000ms)

          Thread.sleep(r);
        } catch (Exception e) {
          e.printStackTrace();
        }

        //This thread has finished work for now. 
        //Let one other random thread know.
        monitor.notify();

        //Other thread will not be able to do work until this thread 
        //releases the monitor by calling monitor.wait() or 
        //completely exists the synchronized(monitor){ ... } block.
      }
    }
  }
} 
```

它的行为可能与您的初衷略有不同，因为线程会随机唤醒，因此无法保证输出将按任何特定顺序进行。

还要注意，一般来说你应该更喜欢`notifyAll()`，`notify()`除非你有很好的理由去使用`notify()`。因为`notify()`只唤醒一个线程，如果该线程“忘记”在最后调用 notify，所有其他线程可能`wait`永远。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T03:18:00.137

为了在一个对象上调用 wait() ，你必须持有那个对象上的同步锁（虽然锁实际上是在线程等待时释放的）：

您可以在获得解决方案的情况下执行以下操作。

```
import java.util.ArrayList;

public class Main extends Thread {
    ArrayList<Thread> threads;

    public Main() {
        super();
        threads = new ArrayList<Thread>();

        for (int i = 0; i < 3; i++) {
            threads.add(new Thread(new Task(i + 65)));
        }

        for (int i = 0; i < threads.size(); i++) {
            threads.get(i).start();
        }

    }

    public void run() {
        long cT = System.currentTimeMillis();
        while (System.currentTimeMillis() - cT < 10000) {
            for (int i = 0; i < threads.size(); i++) {
                try {
                    synchronized (threads.get(i)) {
                        threads.get(i).notify();
                        // HOW TO WAKE THREAD FROM threads ArrayList
                        Thread.sleep(1000);
                        // how to put to bed the same thread ?
                        threads.get(i).wait();
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

    }

    public static void main(String[] args) {
        new Main().start();
        // new Thread(new Task(65)).start();

    }

}

class Task implements Runnable {
    int nr;
    char character;

    public Task(int literaASCII) {
        this.nr = 0;
        character = (char) (literaASCII);
    }

    public void run() {
        while (true) {
            try {
                System.out.print(nr + "" + character + ", ");
                nr++;
                int r = (int) ((Math.random() * 500) + 500); // <500ms,1000ms)
                Thread.sleep(r);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T00:55:02.090

您需要在要等待（）的线程上进行同步：

```
synchronized(threads.get(i)) {
    // how to put to bed the same thread ?
    threads.get(i).wait();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T11:31:30.700

好的，我纠正了它，所以现在是：但我在控制台上

0A, 0B, 0C, 0D, 0E, 1A, 1B, 1C, 1D, 1E, 2A, 2B, 2C, 2D, 2E, 我停 10 我停 11 我停 12 我停 13 我停 14 我停 15

但我更喜欢 0A、1A（A 工作一段时间 3000 毫秒）然后另一个运行 3 秒等。不像 A、B、C、D、E、A，但更像 A、A、A ,B,B,B....

但我也不能杀死这个线程，没有结束的循环，我想在 Main 快死的时候杀死它。

感谢您的所有评论

导入 java.util.ArrayList；

```
public class Main extends Thread {
ArrayList<Thread> threads;

public Main() {
    super();
    threads = new ArrayList<Thread>();
}

 public void run(){

Object monitor = new Object();
for (int i = 0; i <= 5; i++) {
  threads.add(new Thread(new Task(i + 65, monitor)));
}
long cT = System.currentTimeMillis();
for (int i = 0; i < threads.size(); i++) {
  threads.get(i).start();
}
synchronized(monitor){
  while (System.currentTimeMillis() - cT < 10000) {
      try{

    monitor.notify();
    Thread.sleep(50);

    monitor.wait();}catch(Exception e){e.printStackTrace();}
  }

for(int i = 0; i < threads.size(); i++){
    System.out.println("I suspend "+threads.get(i).getId());
    threads.get(i).stop();
}

}
 }

 public static void main(String[] args) {
     new Main().start();
    //new Thread(new Task(65)).start();

}

} 
```

H

```
public class Task implements Runnable {
int nr;
char character;
Object monitor;

public Task(int literaASCII, Object monitor) {
    this.nr = 0;
    this.monitor = monitor;
    character = (char) (literaASCII);
}

@Override
public void run() {
    synchronized (monitor) {
        while (true) {

            try {
                monitor.wait();

                System.out.print(nr + "" + character + ", ");
                nr++;
                int r = (int) ((Math.random() * 500) + 500); // <500ms,1000ms)

                Thread.sleep(r);
            } catch (Exception e) {
                e.printStackTrace();
            }

            monitor.notify();

        }
    }
} 
```

}

# java - 在 JFrame 中编辑多个 JPanel

> ID：10560177
> 
> 赞同：0
> 
> 时间：2012-05-12T00:48:28.053
> 
> 标签：java, swing, netbeans, jframe, jpanel

我在一个 JFrame 中有 50 个 JPanel，我希望它们都具有相同的大小。我在 netbeans 中使用 gui 构建器，但似乎无法弄清楚是否有一种简单的方法可以同时编辑所有 JPanel 的尺寸？我记得在某处读到有一个功能可以实现这一点，但找不到任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T01:22:20.837

使用正确的布局。对于这种情况，`GridLayout`似乎合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T01:14:26.313

使用 GUI Builder，您应该能够通过按住 CTRL 键并单击它们来选择多个组件。如果组件共享相同的属性，例如首选大小或大小，您将能够同时编辑所有组件的值。

通过修改属性视图上的 prefferedSize 属性，并在设置宽度和高度后按 Enter 键，所有 JPanel 应弹出到相同的宽度和高度。

另一种方法是选择所有 JPanel 按住 CTRL 并单击它们，然后在它们都被选中时右键单击其中一个，并且有一些选项，例如“相同大小”或“设置默认大小”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T01:15:23.060

选择所有面板（可能最容易在导航器中完成）然后右键单击并执行相同大小>相同宽度然后相同大小>相同高度。它将它们设置为所选面板的最大尺寸。

如果要设置特定大小，请在选择所有面板时更改 preferredSize 属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T06:11:34.603

您可以在设置首选大小的地方制作一个抽象的 JPanel，而其余的都扩展它吗？

# java - 如何使用设置 x,y 坐标将 JLabel 添加到 Japplet

> ID：10560180
> 
> 赞同：-2
> 
> 时间：2012-05-12T00:49:01.530
> 
> 标签：java, jlabel, japplet

> **可能重复：**
> [如何查找是否在 JApplet 中单击了图像？](https://stackoverflow.com/questions/10543745/how-to-find-if-image-is-clicked-in-japplet)

我想出最简单的方法来完成我的游戏，我认为那就是使用带有鼠标侦听器的标签。问题是我不知道如何将它添加到具有可调整坐标的小程序中。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T01:03:00.557

只需使用绝对定位。通过不使用布局管理器，您可以使用 setLocation 方法将组件放置在面板或框架中。

```
component.setLocation(x,y); 
```

附录：[http ://docs.oracle.com/javase/tutorial/uiswing/layout/none.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)

# python - 给定模型在 SQLAlchemy 中映射到的 Table 对象，如何获得声明性模型？

> ID：10560186
> 
> 赞同：0
> 
> 时间：2012-05-12T00:49:57.697
> 
> 标签：python, sqlalchemy

我正在尝试获取映射到表中的所有类

```
metadata.sorted_tables 
```

我想替换这些表，但必须更新我的模型，`__table__`因为我使用的是声明性的。

当我使用声明性时，如何获取给定表的映射模型？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:44:23.000

SQLAlchemy 并不真正支持“替换” MetaData 对象中的表，也不支持临时替换类映射到的表。各个表之间以及映射类之间都存在依赖关系，并且这种依赖关系系统只能以附加方式构建 - 不支持替换事物。只有当您完全丢弃元数据，用新的元数据替换它，并调用 clear_mappers() 删除所有映射时，才有可能将类重新映射到新表。但这会丢弃声明性映射，并且也没有有效的用例来执行此操作。

您将希望以不同的方式处理您的问题，这样当您以特定方式将类映射到表时，这是您最后一次为该特定类执行此操作。

# licensing - 亚马逊 ec2 的软件许可证

> ID：10560188
> 
> 赞同：2
> 
> 时间：2012-05-12T00:50:31.440
> 
> 标签：licensing, amazon-ec2, cloud

我们正在尝试构建一个集群服务器以在 Amazon EC2 上运行。

目前我们的许可证的工作方式是我们获取客户的机器信息（如 cpu、内存、mac 地址等）来识别机器并锁定我们的服务器以仅在这台机器上运行。各个服务器可以作为集群运行。所以我们为每个节点提供一个许可证。

但这种模式不适用于 Amazon EC2 和其他云提供商。我想知道我们如何解决这个问题。

我能想到的可能解决方案是：1）托管所有客户的服务器都需要与该许可证服务器通信的许可证服务器2）从亚马逊获取某种ID。到目前为止，这种方法似乎更现实。

关于方法#2，亚马逊是否为我们提供了一些 API 来获取此帐户的 ID？

如果您对在公共云或私有云上工作的许可模型有任何其他想法，也请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:09:19.900

这是 ec2 特有的，但您可以以编程方式获取实例 ID，但我认为您需要在实例本身上安装 ec2 工具并获取它们的信息（可能还有另一种获取它的方法）。该 ID 似乎是唯一的（您必须提供给亚马逊，以便他们可以找到您的实例以获得支持），并且如果您停止您的实例（不确定它们是否终止并重新启动），它不会改变。或者您可以使用安全证书来确保它在这种情况下是唯一的。

目前的许可是什么？他们只能在一台机器上运行它还是一次只能在一台机器上运行它？如果它是一台机器，那么您可能必须将其映射到亚马逊的某个唯一 ID（就像我上面提到的那样），但是如果它一次只有一台机器，那么您可以让它在启动时与您的服务器验证其信息，如果另一个服务器使用他们的许可证连接，您可以禁用它们。

顺便说一句，我认为这通常不是一个好主意。如果你看看像微软或甲骨文这样的大公司，他们通常不会采取太多措施来防止你违反他们的许可。这是因为当您接受审核时，无论如何您都必须付费，并且通过许可过程可能会使人们无法自由安装他们的软件（我的经验，当我们需要一个 oracle 服务器并设置它但当时没有许可它在我们的年度审计期间不得不向他们支付垃圾负载。我们的许多开发测试变成了生产，这导致我们支付更多）。在我现在的公司，我们这样做（监控使用情况，但不要阻止人们安装，然后再向他们收费）并且它非常有利可图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:57:09.970

借助 AWS 市场，亚马逊确实试图解决其中的一些问题。据我了解，这将如何为您工作，您通过市场将您的软件作为 AMI 提供，然后亚马逊将许可费包含在实例 + AMI 的每小时价格中。

这是更多信息的链接[https://aws.amazon.com/marketplace/help/200899830/ref=gtw_r1](https://aws.amazon.com/marketplace/help/200899830/ref=gtw_r1)

# asp.net-mvc-3 - 如何在 Razor 页面上启用 asp 兼容模式？

> ID：10560189
> 
> 赞同：0
> 
> 时间：2012-05-12T00:50:40.567
> 
> 标签：asp.net-mvc-3, razor, vb.net-2010

我正在尝试为朋友网站处理信用卡。处理将通过authorize.net。示例代码是用经典的 asp 编写的。我一直在尝试运行它，但以下部分给了我一个错误：

```
objRequest = Server.CreateObject("Microsoft.XMLHTTP") 
```

我收到以下错误：

> {“无法创建组件 'Microsoft.XMLHTTP'。单元线程组件只能在具有 <%@ Page aspcompat=true %> 页面指令的页面上创建。”}

如何使用 Razor 引擎启用 asp 兼容模式？page 指令与 aspx 不同。我尝试为该页面创建一个 aspx 视图，但它当然不会使用母版页，并且会引发一些其他错误。我真的很想让这个与 Razor 一起工作。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T05:21:16.493

您将需要查看 C# 示例代码或 VB.NET 示例代码（取决于您选择的语言）。

它们以 ASP.NET 格式编写。

[http://developer.authorize.net/downloads/samplecode](http://developer.authorize.net/downloads/samplecode)

# c# - 执行以字符串形式编写的任务

> ID：10560193
> 
> 赞同：0
> 
> 时间：2012-05-12T00:52:00.030
> 
> 标签：c#

我想执行用户编写的任务。该应用程序显示一个文本字段，用户输入，例如：

`"(3*10 + 900)/10"`

并且应用程序显示`"93"`在屏幕上。

可以通过一些简单的方法吗？如果是否定的，有没有这样的图书馆？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T01:09:36.100

您想使用像[Fast Lightweight Expression Evaluator](http://flee.codeplex.com/)这样的表达式求值器。

或者您可以使用 DataTable 的 Compute 方法并编写简单的数学表达式，如下所示：

```
var result = new DataTable().Compute("(3*10+900)/10", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T01:08:49.987

您将需要一个具有解析功能的数学库。有人在这里发布了一个关于数学 .Net 库的问题[。](https://stackoverflow.com/questions/1387430/recommended-math-library-for-c-net) [MathdotNet](http://www.mathdotnet.com/)看起来是您最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T01:18:40.070

我们正在使用由[Scott Allen创建的](http://odetocode.com/default.aspx)[JScript.NET (JavaScript](http://odetocode.com/code/80.aspx) )为 C# 使用 Eval 函数

# attributes - MSTest：在网络不可用时忽略依赖网络的集成测试

> ID：10560198
> 
> 赞同：2
> 
> 时间：2012-05-12T00:52:57.813
> 
> 标签：attributes, mstest

有谁知道当网络不可用时忽略选定的测试。像条件忽略属性之类的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T01:00:45.597

我不知道在运行时忽略某些测试。但是，你可以想到两件事。第一个是在测试开始时，您可以检查网络是否可用，如果不返回，则将测试标记为通过。或者，您可以在 Assert Inconclusive 中检查网络，这将在结果中标记测试不确定。

# javascript - 使用 ExtJS 在 SQLite 中存储 Javascript 日期

> ID：10560199
> 
> 赞同：0
> 
> 时间：2012-05-12T00:53:04.450
> 
> 标签：javascript, sql, sqlite, extjs

我正在用 ExtJS 编写一个应用程序，它使用 WebSQL 将数据存储在浏览器的 SQLite 数据库中。（这些要求仅适用于 web-kit 浏览器，我很幸运吧？）我遇到了日期字段的问题。

我在`datefield`处理 Javascript 日期的 UI 中使用 ExtJS 的 s。我的 SQLite 模式使用`datetime`字段来存储它们。当我保存数据时，SQLite 抱怨违反了约束，但数据仍然在那里，所以我并不在乎。

问题是我需要在 SQLite 中进行一些日期比较才能填充 ExtJS 网格。但是因为日期格式是 Javascript 数据格式，而不是 SQLite 可接受的`datetime`格式之一，所以在 sql 中进行比较是行不通的。

我的 sql 无法比较日期，因为它不是 SQLite 期望的格式。我该如何解决？

我在保存数据时尝试使用 Ext.Data.format() 将其置于 SQLite 喜欢的格式 ( `"Y-m-d"`) 但无济于事。我还研究过使用该`Date()`函数在我的 sql 中将 Javascript 日期格式转换为 SQLite 日期时间格式，但这也没有奏效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:25:21.383

这也不行吗？

```
Ext.create ('Ext.container.Container', {
    renderTo: Ext.getBody () ,
    items: [{
        xtype: 'datefield' ,
        fieldLabel: 'date' ,
        format: "Y-m-d"
    } , {
        xtype: 'button' ,
        text: 'Push me' ,
        listeners: {
            click: function (button) {
                console.log (button.previousSibling('datefield').getRawValue());
            }
        }
    }]
}); 
```

它打印“2012-05-12”。如果你使用 getValue() 你错了，因为（来自 ExtJS Doc）：

> 返回字段的当前数据值。返回值的类型特定于特定字段的类型（例如 Ext.form.field.Date 的 Date 对象），作为**对字段的已处理字符串值调用 rawToValue**的结果。要返回原始字符串值，请参阅 getRawValue。

希望这对你有帮助：D

再见

# ios - iOS 表格视图刷新单元格

> ID：10560202
> 
> 赞同：21
> 
> 时间：2012-05-12T00:54:22.010
> 
> 标签：ios, iphone, objective-c, uitableview

我按照下面链接中的建议将图像添加到表格视图中的单元格。

[将图像添加到表格单元格 (iOS)](https://stackoverflow.com/questions/5212134/adding-image-to-table-cell-ios)

有没有办法强制刷新单元格，即添加/删除图像或指示器？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-12T01:03:22.680

您可以调用`[self.tableview reloadData];`tableview 并刷新整个表格。

否则，您可以这样做来刷新单个单元格。

```
 [self.tableView beginUpdates];
 [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPathOfYourCell] withRowAnimation:UITableViewRowAnimationNone];
 [self.tableView endUpdates]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-30T19:47:25.097

由于您已经拥有单元格的 indexPath，因此有时这可能只是完成这项工作

```
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
[cell reloadInputViews]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-08T14:44:18.780

您可以调用[UITableView类的](https://developer.apple.com/documentation/uikit/uitableview)[reloadRows(at:with:)](https://developer.apple.com/documentation/uikit/uitableview/1614935-reloadrows)方法来使用给定的动画效果重新加载[UITableView](https://developer.apple.com/documentation/uikit/uitableview)实例的某些行。

请注意，如果您想在[UITableView](https://developer.apple.com/documentation/uikit/uitableview)实例中插入或删除某些行，则有类似名称的[insertRows(at:with:)](https://developer.apple.com/documentation/uikit/uitableview/1614879-insertrows)和[deleteRows(at:with:)方法。](https://developer.apple.com/documentation/uikit/uitableview/1614960-deleterows)

# tree - 计算加权树的相似度

> ID：10560205
> 
> 赞同：1
> 
> 时间：2012-05-12T00:54:29.113
> 
> 标签：tree, recommendation-engine, collaborative-filtering

我的树的结构很简单，深度为二，每个子节点都是根的直接子节点，每个节点除根外都有一个权重。有没有衡量两棵树相似度的好方法？
这是最初的问题：
假设你有一个关于你读过的书的数据列表。该列表包含键和值，例如哈希表。键是书籍类别，值是您在当前类别下阅读的书籍数量。所以每个人都有这个数据列表，我想根据这个数据列表来比较两个用户的相似度。我知道协作过滤可以做到这一点，但我正在尝试这种方式并将其与 cf.
所以我将数据列表视为加权树。类别为子节点，每个子节点的权重为该类别在用户书籍中出现的次数。
相似度与协同过滤中两个用户的相似度相似。这是一个数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T02:00:55.077

这可以使用集合操作来完成。

> 几年前，我曾经在 Meta-CVS 软件中实现过这样的相似性度量。这用于在将快照导入分支时识别重命名的文件。当然，可以在基线之间重命名和编辑文件，这意味着您无法执行精确的比较。但我离题了。

**杰卡德索引**[1](http://en.wikipedia.org/wiki/Jaccard_index)

首先，两个用户可以对书籍有完全不同的兴趣。或者他们可以有完全相同的兴趣。

您可以做的是计算他们组合的兴趣集的大小，并将他们共同的部分表示为整体大小的一小部分。

假设兴趣集没有加权，而只是设置没有相关权重的类别。然后，相似性可以表示为两个用户共有的类别数除以类别总数。也就是说，集合交集的基数，除以集合并集的基数。

如果涉及重量，您必须以某种方式对其进行处理。也许通过联合的总权重计算集合交集的总权重（注意被零除）。

如您所见，如果用户没有共同的类别，则该指标为 0.0，如果他们对匹配类别感兴趣（无论权重如何），则为 1.0，因此它是可行的。

**余弦相似度**[2](http://en.wikipedia.org/wiki/Cosine_similarity)

定义相似性的另一种方法是将其视为向量点积（相关性）。首先，确定两个用户之间存在的所有类别。为两个用户中的每一个形成一个向量，其中存在每个类别的权重（如果用户在他的兴趣集中没有该类别，则为零）。

然后，您可以通过将这些向量的点积除以它们的长度的乘积来计算相似度： (A . B) / |A||B|

向量的长度是权重平方和的平方根。（同样，注意被零除。）

在这种相似度度量下，如果用户没有共同的类别，则两个向量垂直，并且它们的点积为零。这个度量基本上是两个向量之间夹角的余弦。余弦越接近 1，向量就越平行（用户的兴趣“在同一方向上对齐”）。

希望这能给你一些想法；但正如你所见，这是开放式的。

# wordpress - 私人WordPress帖子

> ID：10560209
> 
> 赞同：0
> 
> 时间：2012-05-12T00:56:17.850
> 
> 标签：wordpress

是否可以创建一个不会显示在帖子列表中但帖子将通过直接链接获得的类别/帖子。

基本上，我希望帖子/页面/类别只能由我发送链接的人查看。我不想让它在帖子列表中可用。我也不希望它受密码保护。

如果可能特定帖子对搜索引擎不可见，那将是更可取的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:07:16.157

就在这里。你总是可以：

1）[注册自定义帖子类型](http://codex.wordpress.org/Function_Reference/register_post_type)。在本例中，我们将其命名为“Private”。

2) 设置您的存档模板 (archive-private.php) 以重定向到不同的页面（可能是主页，或 404），或以某种方式将其设置为看起来像不同的页面（可能是主页，或 404），因此帖子无法列出

3) 设置您的单个帖子模板 (single-private.php) 来格式化和显示您喜欢的私人帖子。

您不必担心针对任何私人帖子的现有查询，不需要密码，并且可以查看单个帖子而无法查看存档。好消息是，如果您在参数中将 'public' 设置为 false，则帖子不会出现在站点内的任何搜索中。

至于对搜索引擎本身隐藏它，您需要在[Robots.txt 文件](http://codex.wordpress.org/Search_Engine_Optimization_for_WordPress#Robots.txt_Optimization)中进行设置。

请记住，这不会阻止搜索引擎显示您的禁止列表中的内容。它是否会尊重您的禁止列表取决于搜索引擎本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T01:09:29.993

不，那里没有。如果有办法，您必须广泛修改主题的 PHP 设置。

# api - 批准后请求其他打开图形操作属性

> ID：10560223
> 
> 赞同：0
> 
> 时间：2012-05-12T00:58:51.207
> 
> 标签：api, facebook-opengraph

有没有办法在被接受后重新提交开放图形操作以获得进一步的权限？

例如，尝试使用操作发布消息属性会返回以下错误：

`{"error":{"type":"Exception","message":"This action is not allowed to set a user message because this property was not requested for approval."}}`

您可以更改此设置还是删除操作并重新应用的唯一解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:32:34.627

目前（2012 年 5 月）您需要删除并重新申请，我相信有计划这样做，因此您可以在批准初始操作后分别请求三个进一步的权限，但目前批准后无法编辑

# java - Java SE 7 中不可具体化类型的可变参数 - 如何？

> ID：10560224
> 
> 赞同：4
> 
> 时间：2012-05-12T00:59:07.833
> 
> 标签：java, generics, variadic-functions

我的代码在 Java SE 7 中给出了警告。如何在**不**使用注释来抑制警告的情况下绕过它；**并按预期使用**可变参数：

```
 import java.util.Iterator;

  public class UnionIterator < E > implements Iterator < E > {

  public static < E > Iterator < E > newInstance (Iterator < E > ... iterators) {
    return new UnionIterator < E >(iterators);
  }

  private Iterator < E > [] iterators;

  private UnionIterator (Iterator < E > ... iterators) {
    this.iterators = iterators;
  }

  @Override
  public boolean hasNext() {
    // TODO
    return false;
  }

  @Override
  public E next() {
    // TODO
    return null;
  }

  @Override
  public void remove() {
    // TODO
  }

} 
```

这是警告：

```
$ javac UnionIterator.java 
Note: UnionIterator.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
$ javac -Xlint:unchecked UnionIterator.java 
UnionIterator.java:5: warning: [unchecked] Possible heap pollution from parameterized vararg type Iterator<E>
  public static < E > Iterator < E > newInstance (Iterator < E > ... iterators) {
                                                                     ^
  where E is a type-variable:
    E extends Object declared in method <E>newInstance(Iterator<E>...)
UnionIterator.java:11: warning: [unchecked] Possible heap pollution from parameterized vararg type Iterator<E>
  private UnionIterator (Iterator < E > ... iterators) {
                                            ^
  where E is a type-variable:
    E extends Object declared in class UnionIterator
2 warnings 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T01:01:29.387

你不能。如果您使用的是 Java 7，则可以使用[`@SafeVarargs`](http://docs.oracle.com/javase/7/docs/api/java/lang/SafeVarargs.html)工厂方法上的注释来抑制每次调用`newInstance`.

# php - 数据库更新错误数据

> ID：10560239
> 
> 赞同：0
> 
> 时间：2012-05-12T01:01:56.077
> 
> 标签：php, javascript, mysql, sql, ajax

我目前正在从事一个有趣的项目，其中涉及 Ajax、HTML、JavaScript、PHP 和 SQL。

我已经尽可能地调试了我的项目，并且我 100% 确定我的 AJAX、HTML 和 JavaScript 工作正常，并且我的变量已正确发送到服务器。

我正在尝试从数据库中获取数据，从该数据中减去一个数字（在表单中提交）并相应地更新数据库。

我的数据库**确实**更新了。但是，它没有显示正确的数字。在表单中提交`1`时，它总是会在数据库中返回相同的数字。（这很奇怪，因为我正在减去它......）。我 100% 确定表单中的数据已正确传递到服务器，所以我希望大家检查我的服务器文件，这应该是问题所在。

**编辑：** 数据库连接已建立`db.php`并正确建立。这已经过测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T01:08:18.280

您确实需要切换到准备好的语句来解决您的 sql 注入问题。

除此之外，这个特定代码的问题在于[`mysql_query`](http://php.net/manual/en/function.mysql-query.php)它不返回数字，而是返回资源。您需要获取一行以获取数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T01:08:02.187

我认为您误会了的返回值`mysql_query`，请查看[php 的手册](http://php.net/manual/en/function.mysql-query.php)

`mysql_query`返回一个*资源*，然后可以将其传递给其他函数以提取您所做的查询返回的值。你应该这样做：

```
$res = mysql_query(...)
$row = mysql_fetch_assoc($res)
$dec = $res["column_name"] - $some_value 
```

您应该检查 $_REQUEST[...] 数组值以消除[sql 注入](http://en.wikipedia.org/wiki/SQL_injection)漏洞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T01:12:07.850

据我所知，`mysql_query`返回`resource`，而不是结果本身。因此，您必须将代码修改为以下内容：

```
$res = mysql_query("your_query_here");
$row = mysql_fetch_row($res);
$totaalaantal = $row[0]; 
```

检查[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

# javascript - 如何将 nodemon 与 .env 文件一起使用？

> ID：10560241
> 
> 赞同：41
> 
> 时间：2012-05-12T01:02:52.370
> 
> 标签：javascript, web-services, node.js, environment-variables, development-environment

我正在使用 .env 文件来保存服务器的环境变量。如果我使用工头启动运行服务器，这将有效。但它不适用于nodemon。

我想改用 nodemon，因为它会在您修改服务器时自动重新启动。如何让 nodemon 使用 .env 文件？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2019-03-12T05:50:05.670

1.  安装[dotenv](https://www.npmjs.com/package/dotenv) `npm i dotenv`
2.  在里面创建`.env`文件和你的变量
3.  添加要执行的脚本

    ```
    "dev": "nodemon -r dotenv/config ./app/index.js " or
    "start": "node -r dotenv/config ./app/index.js " 
    ```

4.  `npm run dev`使用或 运行应用程序`npm run start`

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-05-28T21:20:27.600

我有一个**生产**Procfile：

```
web: node web.js 
```

所以我创建了一个 Procfile_dev 文件：

```
web: nodemon web.js 
```

当我在开发环境中时，我运行：

```
$ foreman start -f Procfile_dev 
```

它就像一个魅力，不影响生产。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-08-15T00:03:54.813

您可以使用以下命令让 nodemon 直接使用 .env

```
$: env $(cat .env) nodemon app.js 
```

请注意，如果您对 .env 进行更改，则必须重新启动它，如果您的 .env 文件中有任何空格，它将不喜欢它。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-05-10T11:09:15.100

使用最新版本的 Node（自 io.js 1.6 起），您可以将`-r`标志传递给它以在启动时要求模块。这使您可以`.env`使用 nodemon直接加载`--exec`：

```
nodemon --exec 'node -r dotenv/config' 
```

这需要[`dotenv`](https://www.npmjs.com/package/dotenv)安装 npm 包。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-09-27T13:44:59.667

将本地配置变量放在 .env 文件中，并使用以下命令与 nodemon 一起运行工头

```
$ foreman run nodemon web.js 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-05-13T00:52:48.083

This works pretty well for me so far,

```
nodemon  -w . -w .env index.js 
```

> How it works:
> "**-w .**" tells nodemon to watch the files in the current directory
> "**-w .env**" tells nodemon to watch the .env file
> "**index.js**" is just the file to run when changes occur (could be anything)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-25T22:52:26.540

线程死灵术！

使用[grunt-env](https://github.com/jsoverson/grunt-env)从你的 heroku 配置中加载环境变量。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-10-31T20:32:28.070

**分三步**

1.  在根文件夹> .env 上创建文件

```
# .env ======
PORT=5000
WHO_AM_I="Who Knows" 
```

2.  安装 dotenv
3.  运行以下命令

```
"dev": "nodemon -r dotenv/config src/app.js" 
```

> ### 您可以使用 > process.env.varible_name 访问您定义的变量

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-03-29T15:13:13.343

如果你想在其中运行 Typescript`nodemon` *并*需要一个*特定* `.env`的文件，`dotenv`那么你可以这样做：

在`package.json`脚本中：

`"dev": "nodemon -r dotenv/config src/myApp.ts dotenv_config_path=/path/to/your/env/file",`

遇到 Typescript 扩展时`nodemon.json`要`nodemon`使用的一行：`ts-node`

`"execMap": {"ts": "node -r ts-node/register"},`

这对于将开发`.env`文件`.env.development.local`用于本地开发工作并将主`.env`文件用于实时生产变量很有用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-12T12:22:50.193

使用 -w 键来指定 nodemon 要额外监视的内容。

```
"scripts": {
    "dev": "env-cmd nodemon -w app -w *.js -w .env server.js"
} 
```

不要忘记重新运行*npm run dev*

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-29T16:54:16.670

Heroku Procfile

更改： web: node app.js 到 web: nodemon app.js

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-03-14T01:14:10.983

要将 dotenv 包和任何声明的 .env 变量加载到环境中，您可以执行以下操作：

```
nodemon -r dotenv/config myapp.js 
```

# css - 我怎样才能有 display: block; 元素像文本一样环绕浮动元素？

> ID：10560246
> 
> 赞同：1
> 
> 时间：2012-05-12T01:04:11.573
> 
> 标签：css, css-float, sidebar

我做了一些谷歌搜索，发现了许多关于我试图解决的问题的参考资料，但都提出了我不能使用的相同解决方案。问题是我有一个侧边栏向右浮动，一些 div 需要扩展到侧边栏剩余的宽度，但是当侧边栏不再阻止它们这样做时，它们会扩展到全宽。

jsfiddle 在这里：http: [//jsfiddle.net/qdk3n/](http://jsfiddle.net/qdk3n/)

在其他地方找到的解决方案是应用于`overflow: hidden;`这些`.left`项目。这完全达到了我想要的效果：与侧边栏共享​​水平空间的 div 只会扩展到侧边栏，但其他 div 会扩展到允许的最大宽度。不幸的是，左侧 div 内会有一个绝对定位的项目超过 div 的大小，如果我 apply 会被裁剪`overflow: hidden;`，所以我不能使用它。有什么方法可以在不使用的情况下完成我想做的事情`overflow: hidden;`？

注意：在页面呈现时间之前，我不知道侧边栏或任何左侧 div 的大小，并且我不能以任何方式、形状或形式使用 Javascript（因为这适用于禁用 JS 的用户）。我可以在所有这些中设置的唯一尺寸是侧边栏的宽度；div 需要流畅，我不能随意选择其中的一些来仅扩展部分方式。

另请注意：我见过这个：[Div stretch 然后环绕其他浮动 div](https://stackoverflow.com/questions/10129818/div-stretch-then-wrap-around-other-floated-div)。这正是我想要做的，但唯一真正的解决方案是`overflow: hidden;`属性，我不能使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T01:24:10.563

除非我错过了什么，否则我认为不可能完全实现您的要求。

`overflow: hidden;`改变 ( ) 元素行为的原因`display: block;`是所谓的“块格式化上下文”，您可以在此处阅读；

[https://developer.mozilla.org/en/CSS/block_formatting_context](https://developer.mozilla.org/en/CSS/block_formatting_context) http://www.communitymx.com/content/article.cfm?cid=6BC9D

从技术上讲，您可以通过浮动左侧 div 来保留元素`display: block;`并让它们尊重浮动侧边栏，但这不太可能达到您想要的效果。

但是，左侧 div 中的任何内联内容都将尊重浮动侧边栏，所以我真的不认为 div 需要像您描述的那样表现（也许详细说明您背后的原因以获得更具建设性的反馈）。

# c++ - QT-creator 中架构 x86_64 的未定义符号

> ID：10560249
> 
> 赞同：5
> 
> 时间：2012-05-12T01:05:01.927
> 
> 标签：c++, qt-creator

我刚刚开始使用 C++ 并且正在学习如何使用 QT creator 作为 IDE，所以我怀疑这可能真的很容易，但我可能会遗漏一些东西。我安装了 apollo MQ 并安装了 apache CMS（[C++ 消息服务](http://activemq.apache.org/cms/index.html)），所以我可以用 C++ 与服务器交互。问题是，我不知道自己在做什么:-)（还），并且不确定为什么在使用示例时会出现上述错误。

我很确定这些示例很好，因为它们包含在源代码的示例文件夹中，所以它让我怀疑项目的配置不正确（因为它是我真正有影响的唯一因素）。

这是 .pro 文件：

```
TEMPLATE = app
CONFIG += console
CONFIG -= qt

SOURCES += main.cpp

INCLUDEPATH += /usr/local/include/activemq-cpp-3.4.2/
INCLUDEPATH += /opt/local/lib/ 
```

这是我指向的文件夹内容（我想要的文件都在那里的子目录中）：

```
drwxr-xr-x  13 root  admin   442 May 11 19:09 activemq
drwxr-xr-x  48 root  admin  1632 May 11 19:09 cms
drwxr-xr-x   9 root  admin   306 May 11 19:09 decaf 
```

这是我得到的错误：

```
20:54:22: Running build steps for project stackexchangeexample...
20:54:22: Configuration unchanged, skipping qmake step.
20:54:22: Starting: "/usr/bin/make" -w
make: Entering directory `/Users/lostsoul/Dropbox/qt_cuda/stackexchangeexample-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Debug'
/Users/lostsoul/QtSDK/Desktop/Qt/4.8.1/gcc/bin/qmake -spec ../../../QtSDK/Desktop/Qt/4.8.1/gcc/mkspecs/macx-g++ CONFIG+=declarative_debug -o Makefile ../stackexchangeexample/stackexchangeexample.pro
make: Leaving directory `/Users/lostsoul/Dropbox/qt_cuda/stackexchangeexample-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Debug'
make: Entering directory `/Users/lostsoul/Dropbox/qt_cuda/stackexchangeexample-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Debug'
g++ -headerpad_max_install_names -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -o stackexchangeexample.app/Contents/MacOS/stackexchangeexample main.o      
Undefined symbols for architecture x86_64:
  "activemq::library::ActiveMQCPP::initializeLibrary()", referenced from:
      _main in main.o
  "activemq::library::ActiveMQCPP::shutdownLibrary()", referenced from:
      _main in main.o
  "activemq::core::ActiveMQConnectionFactory::ActiveMQConnectionFactory(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
      SimpleProducer::run()      in main.o
  "cms::CMSException::CMSException(cms::CMSException const&)", referenced from:
      SimpleProducer::run()      in main.o
  "typeinfo for cms::CMSException", referenced from:
      GCC_except_table15 in main.o
      GCC_except_table16 in main.o
      SimpleProducer::run()      in main.o
  "cms::CMSException::~CMSException()", referenced from:
      SimpleProducer::run()      in main.o
  "decaf::lang::Thread::getId()", referenced from:
      SimpleProducer::run()      in main.o
  "decaf::lang::Long::toString(long long)", referenced from:
      SimpleProducer::run()      in main.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [stackexchangeexample.app/Contents/MacOS/stackexchangeexample] Error 1
make: Leaving directory `/Users/lostsoul/Dropbox/qt_cuda/stackexchangeexample-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Debug'
20:54:22: The process "/usr/bin/make" exited with code 2.
Error while building project stackexchangeexample (target: Desktop)
When executing build step 'Make' 
```

如果它有帮助，这是我运行的代码（它可能对任何人都没有帮助，因为你需要安装一堆东西才能​​让它工作，但以防万一它有帮助）：

```
/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include <decaf/lang/Thread.h>
#include <decaf/lang/Runnable.h>
#include <decaf/util/concurrent/CountDownLatch.h>
#include <decaf/lang/Long.h>
#include <decaf/util/Date.h>
#include <activemq/core/ActiveMQConnectionFactory.h>
#include <activemq/util/Config.h>
#include <activemq/library/ActiveMQCPP.h>
#include <cms/Connection.h>
#include <cms/Session.h>
#include <cms/TextMessage.h>
#include <cms/BytesMessage.h>
#include <cms/MapMessage.h>
#include <cms/ExceptionListener.h>
#include <cms/MessageListener.h>
#include <stdlib.h>
#include <stdio.h>
#include <iostream>
#include <memory>

using namespace activemq;
using namespace activemq::core;
using namespace decaf;
using namespace decaf::lang;
using namespace decaf::util;
using namespace decaf::util::concurrent;
using namespace cms;
using namespace std;

////////////////////////////////////////////////////////////////////////////////
class SimpleProducer : public Runnable {
private:

    Connection* connection;
    Session* session;
    Destination* destination;
    MessageProducer* producer;
    bool useTopic;
    bool clientAck;
    unsigned int numMessages;
    std::string brokerURI;
    std::string destURI;

private:

    SimpleProducer( const SimpleProducer& );
    SimpleProducer& operator= ( const SimpleProducer& );

public:

    SimpleProducer( const std::string& brokerURI, unsigned int numMessages,
                    const std::string& destURI, bool useTopic = false, bool clientAck = false ) :
        connection(NULL),
        session(NULL),
        destination(NULL),
        producer(NULL),
        useTopic(useTopic),
        clientAck(clientAck),
        numMessages(numMessages),
        brokerURI(brokerURI),
        destURI(destURI) {
    }

    virtual ~SimpleProducer(){
        cleanup();
    }

    void close() {
        this->cleanup();
    }

    virtual void run() {
        try {

            // Create a ConnectionFactory
            auto_ptr<ActiveMQConnectionFactory> connectionFactory(
                new ActiveMQConnectionFactory( brokerURI ) );

            // Create a Connection
            try{
                connection = connectionFactory->createConnection();
                connection->start();
            } catch( CMSException& e ) {
                e.printStackTrace();
                throw e;
            }

            // Create a Session
            if( clientAck ) {
                session = connection->createSession( Session::CLIENT_ACKNOWLEDGE );
            } else {
                session = connection->createSession( Session::AUTO_ACKNOWLEDGE );
            }

            // Create the destination (Topic or Queue)
            if( useTopic ) {
                destination = session->createTopic( destURI );
            } else {
                destination = session->createQueue( destURI );
            }

            // Create a MessageProducer from the Session to the Topic or Queue
            producer = session->createProducer( destination );
            producer->setDeliveryMode( DeliveryMode::NON_PERSISTENT );

            // Create the Thread Id String
            string threadIdStr = Long::toString( Thread::getId() );

            // Create a messages
            string text = (string)"Hello world! from thread " + threadIdStr;

            for( unsigned int ix=0; ix<numMessages; ++ix ){
                TextMessage* message = session->createTextMessage( text );

                message->setIntProperty( "Integer", ix );

                // Tell the producer to send the message
                printf( "Sent message #%d from thread %s\n", ix+1, threadIdStr.c_str() );
                producer->send( message );

                delete message;
            }

        }catch ( CMSException& e ) {
            e.printStackTrace();
        }
    }

private:

    void cleanup(){

        // Destroy resources.
        try{
            if( destination != NULL ) delete destination;
        }catch ( CMSException& e ) { e.printStackTrace(); }
        destination = NULL;

        try{
            if( producer != NULL ) delete producer;
        }catch ( CMSException& e ) { e.printStackTrace(); }
        producer = NULL;

        // Close open resources.
        try{
            if( session != NULL ) session->close();
            if( connection != NULL ) connection->close();
        }catch ( CMSException& e ) { e.printStackTrace(); }

        try{
            if( session != NULL ) delete session;
        }catch ( CMSException& e ) { e.printStackTrace(); }
        session = NULL;

        try{
            if( connection != NULL ) delete connection;
        }catch ( CMSException& e ) { e.printStackTrace(); }
        connection = NULL;
    }
};

////////////////////////////////////////////////////////////////////////////////
int main(int argc AMQCPP_UNUSED, char* argv[] AMQCPP_UNUSED) {

    activemq::library::ActiveMQCPP::initializeLibrary();

    std::cout << "=====================================================\n";
    std::cout << "Starting the example:" << std::endl;
    std::cout << "-----------------------------------------------------\n";

    // Set the URI to point to the IPAddress of your broker.
    // add any optional params to the url to enable things like
    // tightMarshalling or tcp logging etc.  See the CMS web site for
    // a full list of configuration options.
    //
    //  http://activemq.apache.org/cms/
    //
    // Wire Format Options:
    // =====================
    // Use either stomp or openwire, the default ports are different for each
    //
    // Examples:
    //    tcp://127.0.0.1:61616                      default to openwire
    //    tcp://127.0.0.1:61616?wireFormat=openwire  same as above
    //    tcp://127.0.0.1:61613?wireFormat=stomp     use stomp instead
    //
    std::string brokerURI =
        "failover://(tcp://127.0.0.1:61616"
//        "?wireFormat=openwire"
//        "&connection.useAsyncSend=true"
//        "&transport.commandTracingEnabled=true"
//        "&transport.tcpTracingEnabled=true"
//        "&wireFormat.tightEncodingEnabled=true"
        ")";

    //============================================================
    // Total number of messages for this producer to send.
    //============================================================
    unsigned int numMessages = 2000;

    //============================================================
    // This is the Destination Name and URI options.  Use this to
    // customize where the Producer produces, to have the producer
    // use a topic or queue set the 'useTopics' flag.
    //============================================================
    std::string destURI = "TEST.FOO";

    //============================================================
    // set to true to use topics instead of queues
    // Note in the code above that this causes createTopic or
    // createQueue to be used in the producer.
    //============================================================
    bool useTopics = false;

    // Create the producer and run it.
    SimpleProducer producer( brokerURI, numMessages, destURI, useTopics );

    // Publish the given number of Messages
    producer.run();

    // Before exiting we ensure that all CMS resources are closed.
    producer.close();

    std::cout << "-----------------------------------------------------\n";
    std::cout << "Finished with the example." << std::endl;
    std::cout << "=====================================================\n";

    activemq::library::ActiveMQCPP::shutdownLibrary();
} 
```

我刚刚创建了一个空的 c++ 项目，修改了 .pro 文件以包含库的路径，然后将代码复制/粘贴到 main.cpp 中。知道是什么原因造成的吗？以及如何防止它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T01:17:40.657

看起来您忘记了*库路径*；您`INCLUDEPATH`使用新值进行定义，但不添加相应的`LIBPATH`或`LIBRARYPATH`为库命名的任何等效变量。您是否还需要`-l library`特定库的相应参数？

# javascript - Chrome API - 检查 Chrome 是否有焦点

> ID：10560250
> 
> 赞同：0
> 
> 时间：2012-05-12T01:05:12.113
> 
> 标签：javascript, google-chrome-extension, npapi

我正在创建一个扩展，我希望能够确定 Chrome（作为应用程序）是否具有用户的焦点，即它是不是最小化还是在后台？

我相信有 javascript 函数可以检查[选项卡是否有焦点](https://stackoverflow.com/questions/3479734/test-if-window-has-focus)，是否会将该代码注入每个选项卡并查看是否有任何选项卡返回错误的工作？不过，这听起来像可怕的性能，也许只是使用将它注入“活动”窗口`chrome.tabs.onUpdated`？

[还是使用NPAPI](http://code.google.com/chrome/extensions/npapi.html)相对容易做到这一点？对于不同的操作系统是否需要不同的代码？

谢谢！

# symfony - Symfony2 + Doctrine2：根据与继承关联的属性过滤实体

> ID：10560256
> 
> 赞同：1
> 
> 时间：2012-05-12T01:06:37.137
> 
> 标签：symfony, doctrine-orm

我正在尝试根据名为 Account 的关联实体的属性过滤“客户”实体列表。问题是 Account 实体它只是一个基类，用于过滤的实际属性存在于它们的子实体（PersonalAccount 和 EnterpriseAccount）中，但原则只允许我访问 Account 基类的属性。

总结一下，这是我的情况：

客户实体：

```
class Client 
{
    /** @ORM\OneToMany(targetEntity="Account", mappedBy="client") */
    protected $accounts;
} 
```

基本帐户实体：

```
class Account 
{
    /** @ORM\ManyToOne(targetEntity="Client", inversedBy="accounts") */
    protected $client;
} 
```

PersonalAccount 实体（Account 的子实体）

```
class PersonalAccount extends Account
{
    /** @ORM\Column() */
    protected $name;
} 
```

在我的控制器中，我尝试了：

```
$qb = $em->getRepository('MyBundle:Client')->createQueryBuilder('cl');

$query = $qb->select('cl')
            ->innerJoin('cl.accounts', 'acc')
            ->where('acc.name = :name')
            ->setParameter('name', 'Jhon')
            ->getQuery(); 
```

但它会引发异常，因为基类 Account 没有名为“name”的属性。

如何使用继承的 PersonalAccount 类的属性过滤客户端实体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:49:31.117

首先，您应该在父类中添加一些**继承注释**。您应该阅读 Doctrine 文档中的这篇文章：[6\. 继承映射](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html)。

事实上，继承是升序的，而不是降序的。

> “如果没有预先特定的类型转换，**在**任何严格的 OO 语言中都无法访问超类并检查某个子对象上存在的属性。”

您需要的功能正在[这里](http://www.doctrine-project.org/jira/browse/DDC-16)讨论。

**但是**：您目前可以做的是使用*类表继承*和类似的东西：

```
$qb = $em->getRepository('MyBundle:Client')->createQueryBuilder('cl');
$qb2 = $em->getRepository('MyBundle:PersonalAccount')->createQueryBuilder('persoAcc');

$query = $qb->select('cl')
            ->where(
                $qb->expr()->in(
                    'cl.id',
                    $qb2->select('persoAcc.id')
                        ->where('persoAcc.name = :name')
                        ->setParameter('name', 'Jhon')
                        ->getDql()
                )
            )
            ->getQuery(); 
```

我建议您使用存储库类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:45:22.793

在客户端上添加关联：

```
/** @ORM\OneToMany(targetEntity="PersonalAccount", mappedBy="client") */
protected $personalAccounts; 
```

并加入它：

```
->innerJoin('cl.personalAccounts', 'acc') 
```

# parallel-processing - 依赖于 SGE 集群的并行处理

> ID：10560258
> 
> 赞同：1
> 
> 时间：2012-05-12T01:07:23.640
> 
> 标签：parallel-processing, qsub

我正在计算集群上做一些实验。我的算法有两个步骤。第一个将其输出写入第二步将使用的一些文件。依赖关系是 1 到 n，这意味着一个 step2 程序需要 n step1 程序的输出。我不知道做什么既不腰集群资源也不让头节点忙。我目前的解决方案是：

提交脚本（这在头节点上运行）

```
for different params, p:
    run step 1 with p

sleep some time based on the an estimate of how much step 1 takes

for different params, q:
    run step 2 with q 
```

第 2 步算法（在计算节点上运行）

```
while files are not ready:
    sleep a few minutes
do the step 2 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T14:00:36.387

SGE 为此提供了作业依赖项和数组作业。您可以将阶段 1 计算提交为数组作业，然后使用`qsub -hold_jid <phase 1 job ID|name> ...`. 这将使第 2 阶段的作业等到所有第 1 阶段的计算完成，然后才会被释放和分派。只要集群中有足够的插槽，阶段 1 的计算就会并行运行。

在提交脚本中，通过作业名称指定保留并以独特的方式命名每个数组作业可能很有用。例如

```
mkdir experiment_1; cd experiment_1
qsub -N phase1_001 -t 1-100 ./phase1
qsub -hold_jid phase1_001 -N phase2_001 ./phase2 q1
cd ..
mkdir experiment_2; cd experiment_2
qsub -N phase1_002 -t 1-42 ./phase1 parameter_file
qsub -hold_jid phase1_002 -N phase2_002 ./phase2 q2
cd .. 
```

`phase1`这会将脚本的100 次执行安排为数组作业`phase1_001`，并将另外 42 次执行安排为数组作业`phase1_002`。如果集群上有 142 个 slot，则所有 142 个执行都将并行运行。然后`phase2`将在作业中的所有任务完成后分派脚本的一次执行，并在`phase1_001`作业中的所有任务完成后分派一次执行`phase1_002`。同样，它们可以并行运行。

数组 job 中的每个任务都将收到一个唯一`$SGE_TASK_ID`值，范围为 1 到 100 对于 job 中的任务`phase1_001`和从 1 到 42 对于 job 中的任务`phase1_002`。从中您可以计算`p`参数。

# c - 将具有 300dpi 位图的 pdf 转换为 svg

> ID：10560260
> 
> 赞同：9
> 
> 时间：2012-05-12T01:07:43.190
> 
> 标签：c, pdf, svg, cairo, poppler

我正在创建一个将 pdf 转换为 svg 的工具。这些 pdf 包含图形数据，包括 300 dpi 的大位图和一堆矢量。[在 stackoverflow 上](https://stackoverflow.com/questions/4120567/convert-pdf-to-svg)四处寻找，我发现[pdf2svg](http://www.cityinthesky.co.uk/opensource/pdf2svg)非常棒——就像一个魅力，矢量数据是完美的。但看起来位图正在缩小到 72dpi。尺寸仍然是 8x10 英寸，但是当您放大时可以看出 dpi 不正确。默认值假定为 72 dpi 是有道理的，但我需要全分辨率位图图像。

pdf2svg 使用 poppler 和 cairo 进行转换。我在代码中四处寻找，我看到它在哪里创建了一个 poppler 页面和一个 cairo 表面，我在[文档](http://developer.gnome.org/poppler/unstable/PopplerPage.html)中看到一个 poppler 页面有一个看起来相关的“比例”概念，但我可以'不知道在哪里插入它。我尝试（实验性地）将传入的高度和宽度硬编码为`cairo_svg_surface_create`正确的值，但它使应用于整个 svg 的尺寸更大，而不会影响嵌入的位图。

```
poppler_page_get_size (page, &width, &height);

// Open the SVG file
surface = cairo_svg_surface_create(svgFilename, width, height);
drawcontext = cairo_create(surface);

// Render the PDF file into the SVG file
poppler_page_render(page, drawcontext);
cairo_show_page(drawcontext); 
```

我不认为我想做的事情很深奥，所以我希望有图书馆经验的人能马上看到我的错误。当然，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:58:44.907

[我刚刚按照http://lists.freedesktop.org/archives/poppler/2011-December/008451.html](http://lists.freedesktop.org/archives/poppler/2011-December/008451.html)中的描述对源进行了更改，并且效果很好 - 图像似乎是它们的原始分辨率。

代替

```
poppler_page_render(page, drawcontext); 
```

和

```
poppler_page_render_for_printing(page, drawcontext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:53:32.497

cairo_surface_set_fallback_resolution() 可能有帮助吗？（不，我自己也不确定）

# mysql - 从 CSV 导入的数据被放入错误的 mysql 列

> ID：10560264
> 
> 赞同：1
> 
> 时间：2012-05-12T01:08:13.687
> 
> 标签：mysql, csv, phpmyadmin

我正在尝试使用 CSV 将 excel 文件导入我的 mysql 数据库。

数据库结构：

```
CREATE TABLE IF NOT EXISTS `sales_products` (
  `productID` int(11) NOT NULL auto_increment,
  `name` varchar(200) NOT NULL default '',
  `categoryID` int(11) NOT NULL default '0',
  `brandID` int(11) NOT NULL default '0',
  `seriesID` int(11) NOT NULL,
  `info` text NOT NULL,
  `img` text NOT NULL,
  `date_added` date NOT NULL default '0000-00-00',
  `price` double NOT NULL default '0',
  `special` varchar(200) NOT NULL,
  PRIMARY KEY  (`productID`),
  FULLTEXT KEY `name` (`name`,`info`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 COMMENT='All products' AUTO_INCREMENT=21341 ; 
```

CSV 的第一行：

```
Bottle opener (No.:015005);1;1;0;Blue, metallic;801001.gif;12-05-2012;0.95 
```

我使用“使用 LOAD DATA 导入 CSV”，具有以下列：名称、类别 ID、品牌 ID、系列 ID、信息、img、添加日期、价格、特殊

它运行没有错误，但信息字段留空，信息放入“img”字段，img 放入 date_add 等。所以它跳过了信息字段。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:34:44.743

我发现如果您将文件保存为制表符分隔的文本（假设您可以使用电子表格程序对其进行修改），这可以避免错误识别逗号的问题。

# mysql - DROP USER 和从 mysql.user 表中删除一行的区别

> ID：10560268
> 
> 赞同：9
> 
> 时间：2012-05-12T01:08:54.770
> 
> 标签：mysql, sql, sql-drop

我有一个在任何时间点都有数百个活动连接的数据库。当我使用 DROP USER sql 语句删除用户帐户时，大约需要 4 秒，在此期间所有其他连接都处于“检查权限”状态。这意味着要删除 1000 个用户，我将有效地锁定数据库 4000 秒的大部分时间，这是不可接受的。但是，我确实注意到从 mysql.users 表中删除用户行是即时的。

是否从 mysql.users kosher 中删除一行？与使用 DROP USER 相比有哪些缺点？我会在其他地方留下陈旧的行吗？是否存在传播问题？我很可能不得不走这条路，但我想知道我还需要做什么其他清理工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T01:15:39.107

取决于你的 MySQL 版本

Drop user in`MySQL <= v5.0`仅删除用户记录，但不删除权限。 `MySQL >= v5.0.2`一次性完成。

也可以传递多个用户。

# c# - 包含和测试 gui 的类库

> ID：10560277
> 
> 赞同：0
> 
> 时间：2012-05-12T01:11:37.337
> 
> 标签：c#

我想开始说这是家庭作业的一部分，但我不要求任何代码。我必须创建一个抽象基类，它有 2 个子类，包括一个虚拟方法和一个接口。我已经制作了所有的类和界面，但我一直在创建一个类来测试 GUI。我已经引用了所有带有子类和接口的类库，但我的书在示例中还有另一个名为 PresentationGUI.cs 的类。我已经在表单之前创建了类，但不知道如何实现这个类以与表单“工作”，我已将演示类设置为启动项目，但不知道如何使其与 Windows 窗体通信设计师代码。在本书的演示类中，生成了 Windows 窗体代码以及对不同类的命名空间的引用，在这个演示类中，以及部分子类中，但我不知道如何实现这一点。书中的代码是这样的（为了节省时间我把它缩短了）：

```
01  using System;                //// I get an error if I type this in
02  using System.Drawing;
03  using System.Collections.Generic;
04  using System.ComponentModel; 
05  using System.Windows.Forms;
06  using System.Data;
07  using ClubNamespace;       //// to reference the subclasses
08  using IntermuralNamespace;
09   
10  namespace PresentationGUI 
11  {
12  public class PresentationGUI : System.Windows.Forms.Form
13  {
14  private Club aClub;
15  private Intermural aIntermural;
16  private System.Windows.Forms.GroupBox groupbox1;
17  private System.Windows.Forms.Label label1;
18  //// and other Windows.Forms object oriented buttons and so-forth
19   
20  public PresentationGUI ()
21  {
22  Initialize Component ();
23  }
24  /// #Windows Designer Code to add controls
25  static void Main()
26  {
27  Application.Run(new PresentationGUI());
28  }
29  private void Presentation_Load(object sender, System.EventArgs e)
30  {
31  aClub = new Club ("ACM", "Jones", "Davis 203", "Tuesday");
32  aIntermural = new Intermural ("Winners", "Joe Smith", "Gym 3", "VolleyBall")
33  } 
```

我的导师说，通过创建 PresentationGUI 类并将其设置为启动，在向表单添加控件之前将创建私有 Systems.Windows.Forms.Label label1; 到班级本身，但是当我创建班级时不会发生这种情况。在将 PresentationGUI 类设为启动项目后，我什至添加了子类作为对它的引用，甚至接口，我在上面的代码中省略了它（我使用了书中未使用接口的确切代码）。这是否与在顶部添加 using System 部分有关，还是我必须自己添加私有 Windows.Forms 部分才能引用控件？或者我需要以不同的方式创建 PresentationGUI 类库吗？如何使用 Initialize Component() 和 Main() 方法创建一个类？我是否需要在表单设计中引用它，或者它是表单设计的一部分，如果它是我如何使它成为表单设计的一部分？抱歉所有问题，我知道答案可能很简单，但是在我的书和在线上关于这个的内容非常少，我不知道我需要做什么来实现这个。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:12:59.267

欢迎来到 StackOverflow，这是一个相当大的问题，通常需要将它们分解，但我想我知道这本书让你感到困惑，我相信你会在再次发布之前阅读[常见问题解答。](https://stackoverflow.com/FAQ)

**“我如何使用 Initialize Component() 和 Main() 方法创建一个类？我是否需要在表单设计中引用它，或者它是表单设计的一部分，如果它是我如何使它成为的一部分表单设计？”**

表单也是类，它们只是派生自 System.Windows.Form。听起来您只是在创建普通类（右键单击项目并选择 Add New Item > Windows Form not a normal class）

新建Project > Winforms > 将Form1重命名为PresentationGUI，在查看表单设计器的同时，展开控件的ToolBox，将GroupBox控件拖到表单和Label控件上。

右键单击 PresentationGUI 表单 > 查看代码。你会看到它在类构造函数中有这个方法::

```
InitializeComponent(); 
```

右键单击此方法名称并选择 Goto Definition（或 F12），您将在此处看到 Form Designer 代码 - 这是通过将控件拖动到表单表面上生成的。

右键单击 program.cs 文件 > 查看代码 > 它将具有：

```
static void Main()
{
Application.Run(new PresentationGUI());
} 
```

您拥有的那本书将所有这些知识放在一起（不使用设计器生成的代码的部分类）。

最后在您的 PresentationGUI 表单代码中，放入 Form_Load 事件：

```
private void PresentationGUI_Load(object sender, System.EventArgs e)
{
aClub = new Club ("ACM", "Jones", "Davis 203", "Tuesday");
aIntermural = new Intermural ("Winners", "Joe Smith", "Gym 3", "VolleyBall")
} 
```

*我更喜欢使用属性窗口向表单和控件添加事件，例如：打开 PresentationGUI n 设计视图，按 F4，在属性窗口中您会看到一个闪电按钮，这显示了您可以添加到表单的所有事件或您选择的控件。*

关于将控件连接到类，有 2 个子类，包括一个虚拟方法和一个接口，您使用 Binding。例如 ListBox1.DataSource = BusObjectTier.aClub;

关于问题的主要标题`I am stuck in creating a class to test the GUI`。

**使用绑定，这样您就不需要为 GUI 编写测试。您测试控件绑定到的业务逻辑。**

# javascript - 如何防止拖动后的触摸事件？

> ID：10560282
> 
> 赞同：0
> 
> 时间：2012-05-12T01:12:48.510
> 
> 标签：javascript, jquery, mobile, jquery-events

我正在一个移动网站上工作，并且在我不希望它们触发的事件中挣扎。

为了简单起见，它是这样写的（在 jQuery 中）：

```
el.on('touchend', function(ev) {
    ev.preventDefault();
    // fire an ajax call
}; 
```

但是，有时用户会在滚动页面时点击该项目，从而触发 ajax 请求（从而改变页面状态）。

我想不出办法（`ev.stopPropagation()`没用），所以我决定关注`dragstart`事件`dragend`。

```
el.on('dragstart', function() {
     el.off('touchend');
});

el.on('dragend', function(ev) {
     ev.stopPropagation(); // <-- seems to do nothing
     // add back the event above (the function is set to a var)
}); 
```

如果我在`touchend`回调中发出警报，我会确认`touchend`在我停止拖动后事件确实触发了。

有谁知道如何防止任何其他事件触发？我希望我只是失明并且错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T01:19:26.650

您无法阻止事件触发，您只能阻止该事件的默认行为发生。

如果您担心在 touchend 事件触发之前您的页面状态会发生变化，您应该只更改您的函数以检查并考虑状态变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T16:25:30.610

我认为在这种情况下你应该使用

```
event.stopImmediatePropagation();
```

# javascript - 获取不带 html 标签但保留换行符的页面元素文本

> ID：10560286
> 
> 赞同：2
> 
> 时间：2012-05-12T01:14:31.097
> 
> 标签：javascript, jquery, html

我想从页面上的元素中获取文本。我不想要 html 标签，但我想要换行符。如果我这样做`$('#element').text()`，则删除换行符。没有html标签的元素中保留段落的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T01:22:05.543

一个快速而肮脏的解决方案是提取 HTML，用某些字符串替换所有和标签`<p>`，然后使用 jQuery 将 HTML 转换为文本，然后用 s 替换这些特定字符串。`</p>``<br>``.text``\n`

这远非完美的解决方案，但对于您的情况可能就足够了。

# java - 在 Sublime Text 2 中编译和运行 Java 代码

> ID：10560295
> 
> 赞同：80
> 
> 时间：2012-05-12T01:15:42.990
> 
> 标签：java, compilation, sublimetext2

我正在尝试在 Sublime Text 2 中编译和运行 Java 代码。不要只是告诉我在命令提示符中手动执行。谁能告诉我怎么做？

顺便说一句，我在 Windows 7 上...

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-21T07:40:46.880

这就是我添加到 JavaC.sublime-build 文件中的内容

```
{
    "cmd": ["javac", "-Xlint", "$file"],
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    "selector": "source.java",

    "variants": [

        { "cmd": ["javac", "-Xlint", "$file"],
          "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
          "selector": "source.java",
          "name": "Java Lintter"
        },  

        { "cmd": ["java", "$file_base_name"],
          "name": "Run Java"
        }
    ]
} 
```

它的作用是创建常规构建命令 ( `ctrl+b`) 的变体。使用`ctrl`+`b`您仍然可以编译您的代码。如果你这样做`shift`++将执行第一个变体，在这种情况下是带有 -Xlint 选项的 javac `ctrl`。`b`第二个也是最后一个变体是 java 命令本身。你可以把它作为你的第一个变体，`shift`++`ctrl`将`b`实际执行 java 代码。

另外，请注意每个变体都是一个“名称”。这基本上允许这个特定的“构建”选项出现在`shift`++`ctrl`选项`p`中。因此，使用此配置，您只需执行`shift`++`ctrl`并`p`键入“Run Java”并点击`enter`，您的代码就会执行。

希望这有帮助。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-11T10:24:42.840

我发现[使用 Sublime Text 2 编译和运行 Java 程序](http://www.compilr.org/compile-and-run-java-programs/)一文中的方法效果很好，并且比其他方法更方便一些。[这](http://web.archive.org/web/20130509004854/http://www.compilr.org/compile-and-run-java-programs/)是存档页面的链接。

## 对于 Windows：

### 步骤1：

`runJava.bat`使用以下代码创建。

```
@ECHO OFF
cd %~dp1
ECHO Compiling %~nx1.......
IF EXIST %~n1.class (
DEL %~n1.class
)
javac %~nx1
IF EXIST %~n1.class (
ECHO -----------OUTPUT-----------
java %~n1
) 
```

将此文件复制到 jdk bin 目录。

### 第2步：

1.  使用 Preferences > Browse Packages 打开 Sublime 包目录。
2.  转到 Java 文件夹
3.  打开 JavaC.sublime-build 并将行替换
    `"cmd": ["javac", "$file"],`
    为
    `"cmd": ["runJava.bat", "$file"],`

完毕！

编写程序并运行使用`CTRL + B`

*注意*：Sublime 3 的说明不同。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-10-10T16:57:08.257

Sublime Text 3 的解决方案略有不同。这是我之前使用的 vijay 答案的修改。

```
 {
     "shell_cmd": "javac -Xlint \"${file}\"",
     "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
     "working_dir": "${file_path}",
     "selector": "source.java",

     "variants":
     [
          {
               "name": "Run",
               "shell_cmd": "java \"${file_base_name}\""
          }
     ]
 } 
```

将以上内容粘贴到一个名为的新文件中`JavaC.sublime-build`，并将其放入您的用户包中。这可以在 中找到`C:\Users\You\AppData\Roaming\Sublime Text 3\Packages\User`。

Ctrl-B 将编译。Ctrl-Shift-B 将运行。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-08-26T15:05:26.957

这个版本的 JavaC.sublime-build 是根据 vijay 的答案编辑的，适用于我在 Windows 7 和 Mac 上的 Sublime Text 3。

我对其进行了编辑，因此 Ctrl+b 或 command+b 对于构建 + 运行都足够了。

```
{
"shell_cmd": "javac -Xlint $file && java $file_base_name",
"file_regex": "^(...*?):([0-9]*):?([0-9]*)",
"selector": "source.java",
"shell": true
} 
```

'&&' 确保第二部分仅在第一部分成功时运行，即仅在生成类文件时运行。您可以在此处找到更多相关信息：http: [//www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx?mfr=true)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-01-14T11:59:35.667

## 根据 sublime text 2 nd 3 的文档编译和运行

**第 1 步：** 为 Java 设置环境变量，如您所知或在某处参考

**strp-2：** 打开新文档并复制下面的粘贴代码

```
{
"cmd": ["javac", "$file_name", "&&", "java", "$file_base_name"],
"file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
"selector": "source.java",
"shell":true } 
```

**step-3：** 将文档保存为 userjavaC.sublime-build 目录 C:\Users\myLapi\AppData\Roaming\Sublime Text 3\Packages\User

**第4步：**

完成后选择工具->构建系统->userjavaC

编译和运行按**ctrl+b**

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-09-28T19:19:40.473

我正在使用 Windows 7。以下解决方案对我有用！

```
**Open** the file JavaC.sublime-build and replace all the code in the file with the code below:

{
 "cmd": ["javac", "$file_name","&&","java", "$file_base_name"],
 "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
 **"path": "C:\\Program Files\\Java\\jdk1.6.0\\bin\\",**
 "selector": "source.java",
 "shell": true
 } 
```

请记住将“C:\Program Files\Java\jdk1.6.0\bin\”替换为您放置 jdk 的路径。并确保将 java JDK 的路径添加到环境变量“PATH”中。参考 bunnyDrug 的帖子设置环境变量。最好的！！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-25T14:08:15.100

参考解决方案：http: [//www.compilr.org/compile-and-run-java-programs/](http://www.compilr.org/compile-and-run-java-programs/)

希望能解决，在 sublime 中编译和运行类......你可以在评论部分看到我的脚本，以便在 mac 的情况下尝试它......

编辑：不幸的是，上面的链接现在坏了。它详细介绍了在 sublime 文本中编译和运行 java 所需的所有步骤。无论如何，对于 mac 或 linux 系统，以下应该可以工作：

修改 javac.sublime-build 文件为：

* * *

```
#!/bin/sh

classesDir="/Users/$USER/Desktop/java/classes/"
codeDir="/Users/$USER/Desktop/java/code/"
[ -f "$classesDir/$1.class" ] && rm $classesDir/$1.class
for file in $1.java
do
echo "Compiling $file........"
javac -d $classesDir $codeDir/$file
done
if [ -f "$classesDir/$1.class" ]
then
echo "-----------OUTPUT-----------"
java -cp $classesDir $1
else
echo " "
fi 
```

* * *

在这里，我在桌面上创建了一个名为“java”的文件夹和子文件夹“classes”和“code”，分别用于维护.class和.java文件，您可以按照自己的方式进行修改。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-01-30T13:01:24.467

对于
“C:\Program Files\Sublime Text 3\Packages”中的 Sublime Text 3，您将获得 java.sublime-package 将其复制到另一个文件夹，将其扩展名从 .sublime-package 更改为 zip 并解压缩，您将获得 JavaC.sublime-build如上所述的修改文件。
在所有修改后提取的 java 文件夹再次转换为 .zip 并将其扩展名 .zip 更改为 .sublime-package。之后将此文件复制并粘贴到 C:\Program Files\Sublime Text 3\Packages。
这会帮助你！

（即使你从[http://upfile.mobi/363820](http://upfile.mobi/363820)或[http://www.4shared.com/file/73SkzY-Kba/Java.html](http://www.4shared.com/file/73SkzY-Kba/Java.html)链接获取我的文件，我用来运行 java 代码我使用“Wesley Baugh " 所以你需要按照他的说法将 runJava.bat 文件复制到 C:\Program Files (x86)\Java\jdk1.8.0\bin 目录。并将上面的链接文件复制到 C:\Program Files\Sublime Text 3\Packages )

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-07-22T15:24:46.947

您可以完全在 ST 中编译和运行您的代码，而且非常快速/简单。最近有一个名为 Javatar 的 ST 包可以做到这一点。 [https://javatar.readthedocs.org](https://javatar.readthedocs.org)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-05-12T01:27:40.060

如此处详述：

[http://sublimetext.userecho.com/topic/90531-default-java-build-system-update/](http://sublimetext.userecho.com/topic/90531-default-java-build-system-update/)

我采取的措施来解决这个问题

1.  点击开始

2.  右键单击“计算机”

2.5 单击属性。

1.  在左侧选择“高级系统设置”

2.  在底部附近单击“环境变量”

3.  向下滚动“系统变量”，直到找到“路径”——选中此选项后单击编辑。

4.  将路径添加到您的 Java bin 文件夹。我的最终看起来像这样：

    代码：全选

    ;C:\Program Files\Java\jdk1.7.0_03\bin\

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-05-24T18:26:40.390

这是在 sublime text 3 中编译和运行 java 的代码

"shell_cmd": "javac -d .$file && java ${file_base_name}.${file_base_name}", "shell": true

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-02-07T23:17:29.773

我关注了这个[线程](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=1685)中的一个帖子并让它完美地工作：

使用以下内容制作 bat 文件，并将其保存在 PATH 中的任何位置。我建议 C:\Program Files\Java\jdk*\bin\ 将所有内容放在一起。

```
@ECHO OFF
cd %~dp1
javac %~nx1
java %~n1 
```

然后编辑 C:\Users\your_user_name\AppData\Roaming\Sublime Text 2\Packages\Java\JavaC.sublime-build，内容将是

```
{
   "cmd": ["javac", "$file"],
   "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
   "selector": "source.java"
} 
```

将“javac”替换为 bat 文件的名称（例如 javacexec.bat）并保存。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-06-13T17:52:56.150

```
{
"shell_cmd": "javac -Xlint  \"${file}\"",
"file_regex": "^(...*?):([0-9]*):?([0-9]*)",
"working_dir": "${file_path}",
"selector": "source.java",

"variants": [

    { "shell_cmd":"javac -Xlint  \"${file}\" && java $file_base_name  < input.txt > output.txt",
      "name": "Run"
    }
   ]
} 
```

save this sublime build and run the program with ctrl + shift + B with run variant.Without run variant it will just create .class file but wont run it.

This build will read the input from input.txt and print the output in output.txt.

**Note**: both input.txt and output.txt must be present in the same working directory as your .java file.

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-01-24T05:47:54.423

按照以下步骤，您将拥有 2 个崇高的构建系统 - “JavaC”和“JavaC_Input”。

“JavaC”可以让你运行不需要用户输入的代码，并在sublime的终端模拟器中显示结果，既方便又好看。“JavaC_Input”允许您在单独的终端窗口中运行需要用户输入的代码，它能够接受用户输入。你也可以在这个构建系统中运行不需要输入的代码，所以如果你不介意弹出窗口，你可以坚持使用这个构建系统，不要切换。您可以从 Tools -> Build System 在构建系统之间切换。然后使用 ctrl+b 编译和运行代码。

以下是实现此目的的步骤：

（注意：请确保您已经具备java系统的基本设置：安装JDK并设置正确的CLASSPATH和PATH，我不会详细说明）

“JavaC”构建系统设置

1、用下面的代码制作一个bat文件，保存在C:\Program Files\Java\jdk*\bin\下，把所有东西放在一起。将文件命名为“javacexec.bat”。

```
@ECHO OFF
cd %~dp1
javac %~nx1
java %~n1 
```

2、然后编辑 C:\Users\your_user_name\AppData\Roaming\Sublime Text 2\Packages\Java\JavaC.sublime-build （如果没有，创建一个），内容为

```
{
   "cmd": ["javacexec.bat", "$file"],
   "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
   "selector": "source.java"
} 
```

“JavaC_Input”构建系统设置

1、安装Cygwin [ [http://www.cygwin.com/]](http://www.cygwin.com/])

2、转到C:\Users\your_user_name\AppData\Roaming\Sublime Text 2\Packages\Java\，然后创建一个名为“JavaC_Input.sublime-build”的文件，内容如下

```
{
"cmd": ["javacexec_input.bat", "$file"],
"file_regex": "^(...*?):([0-9]*):?([0-9]*)",
"selector": "source.java"
} 
```

3、用下面的代码制作一个bat文件，保存在C:\Program Files\Java\jdk*\bin\下，把所有东西放在一起。将文件命名为“javacexec_input.bat”。

```
@echo off
javac  -Xlint:unchecked %~n1.java 
start cmd /k java -ea %~n1 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-04-14T02:15:49.647

## 确保首先安装 JDK/JRE。

如果您是 mac 用户，请按照以下步骤操作：

打开终端通过键入转到您的根字典

> 光盘..

反复。利用

> ls

看看你是否已经到达根

您将看到 Library 文件夹 现在按照此路径 Library/Java/JVM/bin 进入 bin 后，您可以看到 JavaC 文件

现在您需要获取此文件夹的路径，只需编写此命令

> 密码

将其复制粘贴到您的 sublime JavaC 文件中，然后通过 cmd+b 在 sublime 中构建 java 代码。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-12-29T19:12:29.123

构建系统 JavaC 就像一个魅力，但当你想在 Sublime-text 中从标准输入提供输入时会失败。但是您可以编辑构建系统以使其接收来自用户的输入。这是我在 Ubuntu 18.04 LTS 上使用的修改后的 JavaC 版本。您可以编辑构建系统或创建新的构建系统。

**创建一个新的构建系统。**

*   转到**工具**>>**构建系统**>>**新构建系统**。
*   复制粘贴下面的代码和**文件**>>**保存**。

    {

    ```
    "shell_cmd": "javac \"$file\"",
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    "selector": "source.java",
    "variants": 
    [
        {
            "shell_cmd":"bash -c \"javac $file\" && gnome-terminal -- bash -c \"java $file_base_name ;read\"", 
            "name": "Run"
        }

    ] 
    ```

    }

**编辑现有的 Java C 构建文件**

*   按照步骤 [https://stackoverflow.com/a/23790095/10847305](https://stackoverflow.com/a/23790095/10847305)
*   从此构建系统中复制粘贴**“变体” 。**

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-09-04T12:06:38.603

这就是我通过这些简单的步骤做到的：

**设置一个新的构建系统：**

1.  工具 > 构建系统 > 新构建系统

2.  将默认代码替换为以下内容：

    ```
    {
       "cmd": ["javac","$file_name","&&","java","$file_base_name"], 
       "path": "C:\\Program Files\\Java\\jdk1.7.0_25\\bin\\", 
       "shell": true
    }
    // locate the path of your jdk installation and replace it with 'path' 
    ```

3.  通过给文件命名来保存文件（我将我的命名为“Java”）

**激活构建系统：**

1.  工具 > 构建系统 > Java（保存文件的名称）
2.  现在用 Ctrl + B 运行你的程序

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-09-12T02:07:45.363

这是我使用 sublime text 3。我需要在新窗口中打开命令提示符的选项。Java compile 与`-Xlint`在 Java 中打开警告的完整消息选项一起使用。

我已将文件保存在我的用户包文件夹中为*Java(Build).sublime-build*

```
{
     "shell_cmd": "javac -Xlint \"${file}\"",
     "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
     "working_dir": "${file_path}",
     "selector": "source.java",
     "variants":
     [
          {
               "name": "Run",
                "shell_cmd": "java \"${file_base_name}\"",
          },
          {
               "name": "Run (External CMD Window)",
               "shell_cmd": "start cmd /k java \"${file_base_name}\""
          }
     ]
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-08-12T13:28:47.403

**Alex Yao 的**答案是最简单的解决方案，如果您只想构建和运行 Java 程序而不从控制台获取任何输入，请使用**Alex Yao**提供的解决方案。但是，如果您想从控制台获取输入，请参阅以下链接

[Sublime Text 2中的Java控制台输入？](https://stackoverflow.com/questions/15289352/java-console-input-in-sublime-text-2)

# jsf-2 - 从 JSP 迁移到 Facelets，如何替换一些 scriptlet？

> ID：10560297
> 
> 赞同：3
> 
> 时间：2012-05-12T01:15:51.267
> 
> 标签：jsf-2, migration, facelets

我正准备将最初使用 JSF 1.x 和 JSP 编写的 Web 应用程序移动到 JSF 2 (myFaces 2.1.7) 和 Facelets。我还认为转向 Facelets 是因为它是 JSF 2.0 中的默认视图，而且 RichFaces 4 等库也需要它。

首先，我按照以下文档作为指南来帮助我迁移代码：

[从 JSP 迁移到 Facelets](http://wiki.apache.org/myfaces/MigrateFromJspToFacelets)

就所涉及的复杂性而言，基于上述链接中的迁移路径，它似乎并不是很复杂。链接不是全图吗？

同样在我当前的代码中，还有许多脚本，例如

```
 <%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
    %> 
```

然后`basePath`在页面的各个地方使用，例如在 JavaScript 函数中打开一个新页面`basePath + newPage.faces`和从 hiddenInput 检索的文档 Id。

使用 Facelets 如何归档以上内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T02:48:08.543

> *就所涉及的复杂性而言，基于上述链接中的迁移路径，它似乎并不是很复杂。链接不是全图吗？*

您可以在此答案中找到更多详细信息：[从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)

* * *

> *同样在我当前的代码中，还有许多脚本，例如*
> 
> ```
> <%
> String path = request.getContextPath();
> String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
> %> 
> ```
> 
> *`basePath`然后在页面的各个地方使用，例如在 JavaScript 函数中打开一个新页面+ `basePath`newPage.faces 和从 hiddenInput 检索的文档 ID。*
> 
> *使用 Facelets 如何归档以上内容？*

只是`<ui:param>`和EL。

```
<ui:param name="path" value="#{request.contextPath}" />
<ui:param name="basePath" value="#{request.requestURL.substring(0, request.requestURL.length() - request.requestURI.length())}#{path}/" /> 
```

它将以`#{path}`和的形式提供`#{basePath}`。

```
window.location = '#{basePath}newpage.xhtml?id=' + encodeURIComponent(someparam); 
```

请注意，这`#{basePath}`不包括与您的方法相反的不必要的端口号。另请参阅[如何获取基本 URL？](https://stackoverflow.com/questions/6878275/how-get-the-base-url)

# c# - 处理从 WPF 应用程序动态加载的组件的后台线程异常

> ID：10560302
> 
> 赞同：1
> 
> 时间：2012-05-12T01:17:17.223
> 
> 标签：c#, wpf, multithreading, exception-handling, unhandled-exception

我的应用程序是由父 WPF 应用程序动态加载的程序集。我处理来自组件的 AppDomain.UnhandledException 以处理从任何后台线程抛出的异常。

然而，似乎由于父应用程序也注册了相同的事件，未处理的异常也被传播到父应用程序。

**是否有任何方法可以防止未处理的异常不传播到我的父应用程序。**

我将无法更改父应用程序的行为，因为这可能会影响在父应用程序内运行的其他组件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:34:21.770

只需阅读 MSDN 的文档，

如果在默认应用程序域中处理 UnhandledException 事件，则无论线程在哪个应用程序域中启动，都会在任何线程中针对任何未处理的异常引发该事件。如果线程在具有 UnhandledException 事件处理程序的应用程序域中启动，该事件在该应用程序域中引发。如果该应用程序域不是默认应用程序域，并且默认应用程序域中还有一个事件处理程序，则在两个应用程序域中都会引发该事件。

例如，假设一个线程在应用程序域“AD1”中启动，调用应用程序域“AD2”中的一个方法，然后从那里调用应用程序域“AD3”中的一个方法，并引发异常。可以引发 UnhandledException 事件的第一个应用程序域是“AD1”。如果该应用程序域不是默认应用程序域，则也可以在默认应用程序域中引发事件。

所以解决方案是为我的组件创建一个单独的域并为我的域创建事件处理程序

```
 AppDomain domain = AppDomain.CreateDomain("MyDomain");

  domain.UnhandledException += MyDomainUnhandledException
  static void CurrentDomainUnhandledException(objectsender,UnhandledExceptionEventArgs e) 
  {
   //Exception handling logic for my domain
  } 
```

这将确保异常不会传播到父应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T02:08:55.860

像这样给出事件处理程序的显式名称

您的命名空间是 MyCompany.MyProduct.Service 您父的命名空间是 MyCompany.MyProduct.Parent

而不是使用

```
AppDomain.CurrentDomain.UnhandledException += CurrentDomainUnhandledException(Myhandler); 
```

使用以下

```
AppDomain.CurrentDomain.UnhandledException += CurrentDomainUnhandledException(MyCompany.MyProduct.Service.MyHandler); 
```

我希望问题能得到解决。

# c# - 如何将列表的列表反序列化为列表

> ID：10560304
> 
> 赞同：0
> 
> 时间：2012-05-12T01:18:14.977
> 
> 标签：c#, xml-serialization

请告诉我，如何在 XmlSerializer 中反序列化这个

```
<Root>
   <Ship KindID=0>
      <Ship0 Name='A' />
      <Ship1 Name='B' />
      <Ship2 Name='C' />
   </Ship>
   <Ship KindID=1>
      <Ship3 Name='AA' />
      <Ship4 Name='BB' />
      <Ship4 Name='cC' />
   </Ship>
</Root> 
```

到

```
public class Ships {
   public List<Ship> Ships {get; set;}
}
public class Ship {
   public string Name {get;set;}
   public int KindID {get;set;}
} 
```

我想要在不浏览所有 xml 路径手册的情况下进行反序列化的方式。只需执行 XmlSerializer.Deserialize(mem, obj)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T01:31:59.467

你可以反序列化类似的东西。

```
var reader = new StreamReader("Path of the xml");
var shipCollection = (List<Ship>)serializer.Deserialize(reader); 
```

一旦你收集了你就可以使用 Linq

```
var shipNameCollection =  shipCollection.Where( t=> t.Name != null).ToList(); 
```

您将获得所有船只的名称列表

# javascript - Javascript中二维数组的三维数组

> ID：10560308
> 
> 赞同：-1
> 
> 时间：2012-05-12T01:19:29.150
> 
> 标签：javascript, arrays, multidimensional-array

通过插入二维数组来创建和填充三维数组的最佳方法是什么？

说我有一个数组

```
 var arrState = {
        ME: ['Maine','1,328,361'],
            etc
    }; 
```

并且我想在每次运行函数时将当前值存储在该数组中。像这样的东西会起作用吗？

```
var arrStateHistory;
var i = 0;

function start(){
i++;
arrHistory[i] = arrState;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T01:25:44.477

`arrState`是一个对象，因此您必须使用`for...in`. 为什么不对所有事物都使用对象？

```
var States = {
  ME: {
    name: 'Maine',
    population: 1328361
  },
  FL: {
    name: 'Florida'
    ...
  }
  ...
} 
```

然后你可以像这样添加一个新状态或修改一个：

```
States.WA = {
  name: 'Washington',
  population: 1000000
} 
```

# asp.net - 来自 Web.config 的 VS2008 Crystal Reports 数据库连接

> ID：10560309
> 
> 赞同：0
> 
> 时间：2012-05-12T01:20:06.850
> 
> 标签：asp.net, crystal-reports, web-config, database-connection

我有一个正在开发的 ASP.NET 应用程序。其中有一份 CR 报告。当我第一次编写报告时，我将它硬编码为指向我的开发服务器（使用带有 Windows 集成登录的 MSSQL）。因此，当我将我的应用程序移至生产服务器时，它当然失败了。我一直在寻找有关如何将其连接到 Web.config 中列出的数据库的答案，但没有任何运气。

我看到一个建议，我在我的项目中创建一个数据集并与之相关，但现在我似乎无法使用参数来过滤记录。我确实看到了另一个关于如何动态更改数据库源的建议，但这是为那些想要在会话中更改数据库的人设计的，而不是依赖于机器，而且似乎有点矫枉过正。

有没有人有一个很好的简单解决方案？我一直在研究这个问题太久了，感觉我要拍我的电脑了（这会给它一个教训）。:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T01:31:11.183

```
public static class ReportDocumentExtensions
{
    public static void SetConnectionInfo(this ReportDocument report, ReportContextArgs context)
    {
        SetConnectionInfo(report, context.UserId, context.Password, context.ServerName, context.DatabaseName);
    }

    public static void SetConnectionInfo(this ReportDocument report, string userId, string password, string serverName, string databaseName)
    {
        foreach (Table oTable in report.Database.Tables)
        {
            TableLogOnInfo oInfo = oTable.LogOnInfo;

            ConnectionInfo oConnection = oTable.LogOnInfo.ConnectionInfo;

            oConnection.UserID = userId;
            oConnection.Password = password;
            oConnection.ServerName = serverName;
            oConnection.DatabaseName = databaseName;

            oTable.ApplyLogOnInfo(oInfo);
        }
    }
}

public class ReportContextArgs
{

    private string _userId;
    private string _password;
    private string _serverName;
    private string _databaseName;

    public string ServerName
    {
        get { return _serverName; }
        set { _serverName = value; }
    }

    public string UserId
    {
        get { return _userId; }
        set { _userId = value; }
    }

    public string Password
    {
        get { return _password; }
        set { _password = value; }
    }

    public string DatabaseName
    {
        get { return _databaseName; }
        set { _databaseName = value; }
    }
} 
```

# python - 如何创建具有可变数字的 unicode 字符？

> ID：10560310
> 
> 赞同：1
> 
> 时间：2012-05-12T01:20:50.303
> 
> 标签：python, unicode

基本上我想做的是**print u'\u1001'**，但我不希望**1001**硬编码。有没有办法可以为此使用变量或字符串？此外，当我使用输出作为输入时，如果我能再次检索此代码，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T01:27:18.020

根据 unicode 上的 python 文档（位于[此处](http://docs.python.org/howto/unicode.html)）：

> 单字符 Unicode 字符串也可以使用 unichr() 内置函数创建，该函数接受整数并返回包含相应代码点的长度为 1 的 Unicode 字符串。反向操作是内置的 ord() 函数，它接受一个字符的 Unicode 字符串并返回代码点值：

```
unichr(40960) 
```

导致字符：u'\ua000'

# android - Android中的蓝牙设备发现——startDiscovery()

> ID：10560319
> 
> 赞同：19
> 
> 时间：2012-05-12T01:22:44.670
> 
> 标签：android, android-intent, bluetooth, android-adapter, android-context

**目标：**构建一个 Android 应用程序，发现范围内的 BT 设备的名称和地址，并将其值提交给 Web 服务。BT 设备之前没有绑定到主机设备，我只想在走动时轮询所有内容。

我做了什么：

1.  仔细阅读文档。
2.  实现了主机设备的 BT 适配器的本地实例。
3.  如果未启用，则实施通知以启用 BT。
4.  注册广播接收器和意图来解析**startDiscovery()**`ACTION_FOUNDs`的到来。
***   在清单中注册了**BLUETOOTH**和**BLUETOOTH_ADMIN权限。****

 **直到`startDiscovery()`.

**挫折：**

*   **startDiscovery()** - 我怀疑我在错误的上下文中传递了这个。此方法需要放置在什么上下文中才能正常运行？

如果您能够使这种方法发挥作用，我将非常感谢您的智慧。

**更新**- 这是导致我悲伤的代码的精简版；这种简化概括了我的错误。这段代码运行，它没有抛出`cat.log`错误或其他错误，它根本没有给出任何输出。

```
package aqu.bttest;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.widget.Toast;

public class BT2Activity extends Activity {

private BluetoothAdapter mBTA;
private SingBroadcastReceiver mReceiver;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

  //register local BT adapter
    mBTA = BluetoothAdapter.getDefaultAdapter();
    //check to see if there is BT on the Android device at all
    if (mBTA == null){
        int duration = Toast.LENGTH_SHORT;
        Toast.makeText(this, "No Bluetooth on this handset", duration).show();
    }
    //let's make the user enable BT if it isn't already
    if (!mBTA.isEnabled()){
        Intent enableBT = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBT, 0xDEADBEEF);
    }
    //cancel any prior BT device discovery
    if (mBTA.isDiscovering()){
        mBTA.cancelDiscovery();
    }
    //re-start discovery
    mBTA.startDiscovery();

    //let's make a broadcast receiver to register our things
    mReceiver = new SingBroadcastReceiver();
    IntentFilter ifilter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
    this.registerReceiver(mReceiver, ifilter);
}

private class SingBroadcastReceiver extends BroadcastReceiver {

    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction(); //may need to chain this to a recognizing function
        if (BluetoothDevice.ACTION_FOUND.equals(action)){
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            // Add the name and address to an array adapter to show in a Toast
            String derp = device.getName() + " - " + device.getAddress();
            Toast.makeText(context, derp, Toast.LENGTH_LONG);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-12T01:49:40.800

> 此方法需要放置在什么上下文中才能正常运行。

简而言之，`startDiscovery()`当您希望应用程序发现本地蓝牙设备时，您应该使用...例如，如果您想要实现`ListActivity`扫描附近的蓝牙设备并将其动态添加到 a `ListView`（请参阅 参考资料[`DeviceListActivity`](http://developer.android.com/resources/samples/BluetoothChat/src/com/example/android/BluetoothChat/DeviceListActivity.html)）。

您对该`startDiscovery()`方法的使用应如下所示：

1.  定义一个代表本地蓝牙适配器的类变量。

    ```
    BluetoothAdapter mBtAdapter = BluetoothAdapter.getDefaultAdapter(); 
    ```

2.  检查您的设备是否已经在“发现”。如果是，则取消发现。

    ```
    if (mBtAdapter.isDiscovering()) {
        mBtAdapter.cancelDiscovery();
    } 
    ```

3.  检查（并可能取消）发现模式后，立即通过调用开始发现，

    ```
    mBtAdapter.startDiscovery(); 
    ```

4.  Be very careful in general about accidentally leaving your device in discovery-mode. Performing device discovery is a heavy procedure for the Bluetooth adapter and will consume a lot of its resources. For instance, you want to make sure you check/cancel discovery prior to attempting to make a connection. You most likely want to cancel discovery in your `onDestroy` method too.

Let me know if this helped... and if you are still having trouble, update your answer with your logcat output and/or any error messages you are getting, and maybe I can help you out a bit more.**

# asp.net - 如何在 asp.net 应用程序中设置身份验证

> ID：10560340
> 
> 赞同：0
> 
> 时间：2012-05-12T01:29:19.270
> 
> 标签：asp.net, authentication

我们必须在我们的应用程序中操作 iis，我们遇到了`Access denied`错误。

然后我们将它添加到 web.config 中：

```
<identity userName="username" password="pass" impersonate="true"/> 
```

它可以工作，我们可以操作 iis（创建虚拟应用程序等）。

但是我们也必须访问应用程序中的共享文件夹，添加上述行后，我们只能访问为我们的应用程序提供服务的机器上的共享文件夹。

如果我从 web.config 中删除该行，我们可以从其他服务器访问共享文件夹。

因此，我们似乎无法同时操作 iis 和访问共享文件夹。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:31:01.003

向您在 web.config 的身份行中指定的用户授予对共享文件夹的访问权限，因为您的 Web 应用程序正在使用这些凭据来访问共享文件夹，并且只有在指定的用户具有访问权限时才有可能。

或者您可以切换到 Windows 身份验证，请参阅[如何：在 ASP.NET 2.0 中使用 Windows 身份验证](http://msdn.microsoft.com/en-us/library/ff647405.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T02:55:15.047

还有另一种实现相同的替代方案。

转到 iis 并将您的应用程序池标识设置为对文件夹具有权限的用户。

希望它能解决您的问题。

# actionscript-3 - FLVPlayBack 未缩放到全屏

> ID：10560341
> 
> 赞同：1
> 
> 时间：2012-05-12T01:29:24.833
> 
> 标签：actionscript-3, flash, flvplayback

我试图让 FLVPlayBack 的一个实例全屏运行，而不影响应用程序的其余部分。

根据我读过的东西，我已经设置了播放器缩放模式，因此它在放大时会适合窗口。

```
flvPlayer.scaleMode = "exactFit"; 
```

为了阻止舞台放大，我还设置了舞台的缩放模式。

```
stage.scaleMode = "noScale"; 
```

然后，为了尝试控制视频播放器在我单击全屏按钮时的操作，我还使用了播放器上的 fullScreenTakeOver 设置。

如果我将代码设置为“假”

```
flvPlayer.fullScreenTakeOver = false; 
```

然后整个界面变成全屏，舞台位于窗口的中心，我猜这是因为我将舞台设置为不缩放。视频保持正常大小并继续执行它正在执行的操作。退出全屏会缩小舞台恢复正常。

另一方面，如果我将其设置为“真”

```
flvPlayer.fullScreenTakeOver = true; 
```

然后视频占据了屏幕，但它并没有放大，而是将视频定位在页面的中间，如果视频是全尺寸，控件的可点击区域会移动到它们所在的位置，留下我的猜测按钮应该在哪里。

在这两种情况下，视频都可以正常运行。

任何人都可以帮助我正确组合设置吗？我希望应用程序保持其窗口大小，并让飞行播放器自行缩放以适应全屏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:52:49.707

`flvplayback`named中有一个属性`fullScreenTakeOver`默认设置为 true。这会干扰全屏真的很糟糕。如果您想在不更改阶段逻辑的情况下应用全屏，则最好在实例化后将其设置为 false。这会大大减少你的麻烦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:35:49.457

您需要设置一些您已经完成的设置

```
stage.scaleMode = StageScaleMode.NO_SCALE;
stage.align     = StageAlign.TOP_LEFT;
flvPlayer.fullScreenTakeOver = false; 
```

现在，当您进入全屏时，您的应用程序内容将位于左上角。您需要为全屏模式创建一个事件侦听器。

```
stage.addEventListener(FullScreenEvent.FULL_SCREEN, fullScreenHandler); 
```

在这种情况下，您将处理调整视频大小和移动视频（如果需要，还可以在舞台上隐藏其他对象）

```
function fullScreenHandler(e:FullScreenEvent):void
{
    if (stage.displayState == StageDisplayState.NORMAL)
    {
        // Setup NORMAL Layout
        // resize and reposition the flvPlayer
    }
    else
    {
        // Setup FULL_SCREEN Layout
        // move the flvPlayer to x:0 and y:0
        // set the flvPlayer width and height to stage.stageWidth and stage.stageHeight
    }
} 
```

# google-chrome - CSS3 转换、分层和诊断

> ID：10560342
> 
> 赞同：0
> 
> 时间：2012-05-12T01:29:38.300
> 
> 标签：google-chrome, css, css-transitions

我最近一直在开发一个使用 CSS3 中一些较新的 3D 效果变换的微型站点。然而，我一直试图让分层变得有点太棘手，以便某些视错觉生效，这是导致许多头痛的原因......

一般来说，Chrome（但不是 Firefox，尚未尝试 Safari 或 IE）中存在这个问题，其中所有内容似乎都在屏幕上“呈现”适当，但是当我点击链接或突出显示其中一个中的某些文本时“棘手的分层”区域，我的光标变软了，我无法获得任何功能。我可以看到一切都很好，只是有一堵看不见的墙阻止了我的光标交互，如果这有助于解释的话。

如果不粘贴一英里长的实验代码，是否有人知道可能导致此问题的原因？我最好的猜测是 z-index 继承在某些时候出错了，但很难诊断......导致我的下一个问题是，是否有人知道任何分层诊断的好策略（工具在这里也很棒）！

我当然精通标准的开发人员工具/Firebug ...

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:31:22.827

好的，所以我解决了我的问题并提出了以下策略，以供将来在诊断分层问题时参考...

1.  检查可能相互干扰的所有元素的谨慎 Z-Index 值。如有必要，重新订购它们，看看是否能解决问题。如果没有，请继续。
2.  检查步骤 1 中所有元素的谨慎定位。确保在 CSS 标记中声明它们具有“位置：绝对”或“位置：相对”。不要依赖继承/默认值。绝对声明是关键。
3.  检查您的“背面可见性”值。如果您的设置很复杂，很容易忘记什么是什么。

遵循这种模式最终为我做到了。我的问题原来是所有 3 个问题的组合，但在我按照上述步骤操作之前，它们并不一定会向我展示自己。

# java - 初学Android：ListView影响下一节

> ID：10560343
> 
> 赞同：0
> 
> 时间：2012-05-12T01:30:13.637
> 
> 标签：java, android, eclipse, android-layout, android-intent

我是一个初学者程序员，所以请多多包涵。我正在尝试创建一个应用程序，其中列表视图中的项目会影响将在下一个活动中显示的内容。到目前为止，我有列表活动：

```
public class Primary extends ListActivity{
private static final String[] items = {"Item1", "Item2", "Item3", "item4", "Item5"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items));

    TextView heading =(TextView)findViewById(R.id.listViewHeading);
    heading.setText("Primary");
}

public void onListItemClick(ListView parent, View v, int position, long id){

} 
```

对于第二个活动，我有这个：

```
public class ImageActivity extends Activity{
TextView heading;
ImageView image;
TextView text;
    public static final String[] headings={"heading 1", "heading 2", "heading 3", "heading 4", "heading 5",};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.image_activity);

    heading = (TextView)findViewById(R.id.adHeading);
    image = (ImageView)findViewById(R.id.adImage);
    text =(TextView)findViewById(R.id.adText);

    addInfo();
}

private void addInfo() {
    heading.setText(headings[x]);
    image.setImageResource(images[x]);
    text.setText(text[x]);

} 
```

我怎样才能使标题、图像和文本根据列表视图中的选择项而改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T01:34:56.253

在列表视图活动中。

```
Intent i = new Intent(this, ImageActivity.class);
    i.putExtra("data", data);
    startActivity(i); 
```

下一个 Acitivty onCreate() 方法。

```
final String data = getIntent().getStringExtra("data"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T01:38:28.773

使用作为 Intent 一部分的“附加”功能。

当您从 Primary 调用 start ImageActivity 时，您可以使用“附加”在两者之间传递信息。

有关详细信息，请参阅[此](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)链接。

I'll give you a basic example here. When the list item is clicked, put the data that you want ImageActivity to have into the intent using "putExtra".

```
Intent intent = new Intent(getBaseContext(), ImageActivity.class);
String data = "somedata";
intent.putExtra("DATA", data);
startActivity(intent) 
```

Then, in ImageActivity onCreate, retrieve the data like this:

```
Bundle extras = getIntent().getExtras();
if(extras !=null) {
String data= extras.getString("DATA"); // matches the tag used in putExtra
} 
```

Once you have retrieved the data, set the necessary views.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T02:19:02.070

I think u want to set the heading, image and text in second activity, related to first activity's selected index in list.

just do 1 thing, put following code in 1st activity

```
 public void onListItemClick(ListView parent, View v, int position, long id)
    {
        Intent intent = new Intent(this.getApplicationContext(), ImageActivity.class);
        intent.putExtra("pos", position);
        startActivity(intent);
    } 
```

so, now u r passing the position of item selected in list.

now, put following code in next activity

```
 private void addInfo()
    {
        Bundle ext = getIntent().getExtras();
        if(ext != null)
        {
            int pos= ext.getInteger("pos");
                       //  ext.getInt("pos");

            heading.setText(headings[pos]);

            //  hey, frend, you don't have any array for selecting image-name and text
            //  image.setImageResource(images[x]);
            //  text.setText(text[x]);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T03:31:36.130

use below code

```
public void onListItemClick(ListView parent, View v, int position, long id)
        {
            Intent intent = new Intent(Primary.this, ImageActivity.class);
            intent.putExtra("selected value", item[position]);
            startActivity(intent);
        } 
```

in ImageActivity class:in oncreate (or you can put item variable as global)

```
String item = getIntent().getStringExtra("Selected value"); 
```

# .net - 在 Excel.Application.Workbooks.Open 中禁用 excel 错误警报

> ID：10560344
> 
> 赞同：1
> 
> 时间：2012-05-12T01:30:14.993
> 
> 标签：.net, office-interop

使用 Interop 将多个 Excel 文件呈现到 XPS。许多 .Open 失败并显示错误消息 VBA 需要当前未安装的组件。如果我单击确定，它将继续。我可以将其配置为跳过 VBA 吗？在 Windows 2008 Server 上使用 Office 2010 64 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T01:57:29.657

```
Application.DisplayAlerts = false; 
```

您可以设置应用程序对象的此属性，它不会显示 excel 错误。但如果您的程序要调用 VBA 代码或宏，我建议修复安装错误。

# javascript - 我可以用一个名称传递多个复选框值吗？

> ID：10560345
> 
> 赞同：6
> 
> 时间：2012-05-12T01:30:46.223
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 Twitter 的引导程序，需要将复选框选择的分隔列表传递给我的服务器进行处理。复选框 HTML 如下所示：

```
<div class="controls">
    <label class="checkbox"><input type="checkbox" name="my_match[]" value="190">TEST 190</label>
    <label class="checkbox"><input type="checkbox" name="my_match[]" value="200">TEST 200</label>
    <label class="checkbox"><input type="checkbox" name="my_match[]" value="210">TEST 210</label>
</div>

...

$.post("form.php", $("#form_id").serialize(), function(){
    ...
}); 
```

我使用 jquery 将表单值作为序列化字符串传递，但这些值的发送方式如下：

```
my_match=190&my_match=200 
```

是否可以按以下格式发送它们？

```
my_match=190:200 
```

我不确定我是否需要更改我的 HTML，或者这是我需要用 javascript 处理的事情。有什么想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-12T01:51:31.150

像这样的东西可以解决问题：

```
<div class='controls'>
    <label class="checkbox">
        <input type="checkbox" name="my_match[]" value="190">TEST 190</label>
    <label class="checkbox">
        <input type="checkbox" name="my_match[]" value="200">TEST 200</label>
    <label class="checkbox">
        <input type="checkbox" name="my_match[]" value="210">TEST 210</label>
</div>

<form>
    <input id='my_match' type='hidden' name='my_match[]' />
    <button>Submit</button>
</form> 
```

* * *

```
$('form').submit(function() {
    var arr=[];

    $('input:checked[name=my_match[]]').each(function(){
        arr.push($(this).val());
    });

    $('#my_match').val(arr.join(':'));
    alert($('#my_match').val());

    // Prevent actual submit for demo purposes:
    return false;
});
​
​ 
```

试试 [小提琴](http://jsfiddle.net/namuol/M97FR/)

* * *

编辑：这基本上正是大通在他的回答中所描述的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T01:32:35.330

我相信具有相同名称的复选框以逗号分隔的列表返回。您可以做的是创建一个隐藏字段，按照您想要的方式附加您选中的复选框值，然后发送隐藏字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-16T01:09:07.183

对于其他被 Google 带到这里的人：

据我所知，JavaScript 是使它们成为带分隔符的字符串的唯一方法，因为如果您想要一个通用解决方案来处理所有可能的所需分隔符并支持转义分隔符（如果它出现在其中一个中），它就会变得复杂值字符串。

如果可能的话，我强烈建议只接受`my_match=190&my_match=200`格式并在服务器上转换它们。

在 PHP 中，如果您将 放在`[]`名称的末尾，这是自动的。在其他语言中，例如 Python，通常会有一个特殊的 getter，它返回一个列表而不是单个值。（例如，`request.POST.getlist('my_match')`在 Django 中）

依赖 JavaScript 会使您的页面更加脆弱，因为不稳定的连接、网络中断或损坏的应用程序层防火墙可能会阻止 JavaScript 加载或延迟足够长的时间以使用户尝试在没有它的情况下单击提交。

（而且，如果您在 JavaScript 加载之前禁用提交按钮，您只会惹恼和/或挫败您的访问者，并给他们一种印象，即您的网站是粗制滥造的，因为其他人在没有这种限制的情况下做得很好。始终保持注意你的行为如何影响你给人的第一印象。）

...更不用说，取决于 JavaScript，当您不严格需要时（例如，没有`:hover`后备的下拉菜单、琐碎地需要 JavaScript 提交的表单等）会惹恼像我这样使用 JavaScript 白名单工具（如 NoScript）的人：

1.  制作网络广告并“进行调查！” 插页式广告不那么烦人
2.  减少打开大量选项卡和扩展程序的迟缓
3.  限制 0-day 漏洞利用成功的机会

如果您在这种情况下绝对*必须*使用 JavaScript，请务必使用标签警告人们在填写表单*之前*`<noscript>`启用 JavaScript 重新加载。

# zend-framework - Zend 循环依赖问题

> ID：10560346
> 
> 赞同：2
> 
> 时间：2012-05-12T01:30:51.060
> 
> 标签：zend-framework, bootstrapping, zend-application, zend-app-bootstrap

我的引导程序中有一个方法可以为应用程序设置缓存：

```
protected function _initSetCaches()
{
    $this->bootstrap(array('Db','CacheManager'));
    Zend_Db_Table_Abstract::setDefaultMetadataCache(Master::cache('database'));
    Zend_Translate::setCache(Master::cache());
    Zend_Date::setOptions(array('cache' => Master::cache()));
    Zend_Paginator::setCache(Master::cache());
    Zend_Locale::setCache(Master::cache());
    Zend_Locale_Data::setCache(Master::cache());
 } 
```

如您所见，我通过调用包含缓存方法的 Master 类来设置各种缓存。在缓存方法中，我获取引导对象（`self::bootstrap())`然后从缓存管理器资源中获取缓存类型。这是我的 Master 类中的缓存方法：

```
public static function cache($type='core')
{
    $registryKey = 'master_cache_' . $type;
    if(!self::registry($registryKey)){
        $manager = self::bootstrap()->getPluginResource('cachemanager')->getCacheManager();
        if(!$manager->hasCache($type)){
             self::throwException(sprintf("%s is not an available cache",$type));
        }
        $cache = $manager->getCache($type);
        self::register($registryKey,$cache);
     }
     return self::registry($registryKey);
} 
```

如您所见，此方法从引导程序 ( `self::bootstrap()`) 中获取缓存管理器。我的问题如下......如果我按如下方式实现我的引导方法（通过应用程序对象（`self::app()`）获取引导程序来注册引导程序：

```
public static function bootstrap()
{
    if(!self::registry('master_bootstrap')){
        self::register('master_bootstrap', self::app()->getBootstrap());
    }
    return self::registry('master_bootstrap');
} 
```

然后一切正常。但是，这是与我最初拥有的不同的实现，因此会引发循环依赖异常。这是我的原始实现：

```
public static function bootstrap()
{
      return self::app()->getBootstrap();
} 
```

我很困惑为什么当我在全局注册表中注册引导程序时可以使用缓存方法，但是，如果我直接返回引导程序对象，则会导致循环依赖问题。我在全局注册表中注册引导对象的实现不应该仍然导致循环依赖吗？

# qt - 直接显示 9 声子错误“引脚无法连接”

> ID：10560349
> 
> 赞同：2
> 
> 时间：2012-05-12T01:31:19.923
> 
> 标签：qt, directshow, phonon

尝试将 Direct Show 9 后端与 qt 的声子框架一起使用时出现以下错误：

```
Pins cannot connect due to not supporting the same transport. (0x80040266) 
```

有谁知道这个错误是什么意思和/或如何解决它？这是声子的 Direct Show 9 后端的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:41:58.837

显然问题与错误的元数据有关。如果 Id3 标签不正确，则直接显示 9 后端会扼杀它们。我通过编写以下函数解决了这个问题：

```
void removeTags(UDJ::DataStore::song_info_t& song){
  static int fileCount =0;
  if(song.source.fileName().endsWith(".mp3")){
    UDJ::Logger::instance()->log("On windows and got mp3, copying and striping metadata tags");
    QString tempCopy = QDesktopServices::storageLocation(QDesktopServices::TempLocation) + "/striped" + QString::number(fileCount) +".mp3";
    if(QFile::exists(tempCopy)){
      UDJ::Logger::instance()->log("Prevoius file existed, deleting now");
      if(QFile::remove(tempCopy)){
        UDJ::Logger::instance()->log("File removal worked");
      }
    }
    bool fileCopyWorked = QFile::copy(song.source.fileName(), tempCopy);
    if(!fileCopyWorked){
      UDJ::Logger::instance()->log("File copy didn't work");
      return;
    }

    TagLib::MPEG::File file(tempCopy.toStdString().c_str()); 
    file.strip();
    file.save();
    Phonon::MediaSource newSource(tempCopy);
    song.source = newSource;
    if(fileCount == 3){
      fileCount =0;
    }
    else{
      fileCount++;
    }
  }
} 
```

`song_info_t`只是一个带有 Phonon::MediaSource 成员的结构，称为`source`. 该功能通过使用 taglib 剥离歌曲的所有元数据并将新歌曲保存为临时文件来工作。该函数还旋转用于临时文件的文件名，以便它不会创建无限数量的临时副本文件。我希望这可以帮助其他遇到此错误的人。

# ruby-on-rails - 如何对具有存储在其他模型中的属性的模型执行查询？

> ID：10560351
> 
> 赞同：1
> 
> 时间：2012-05-12T01:32:29.860
> 
> 标签：ruby-on-rails, activerecord

我有以下型号：

```
class Constraint < ActiveRecord::Base
  belongs_to :constraint_category
end

class ConstraintCategory < ActiveRecord::Base
  has_many :constraints
end 
```

这些模型具有以下属性（来自 db/schema.rb）：

```
 create_table "constraint_categories", :force => true do |t|
    t.string   "value"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.boolean  "active"
  end

  create_table "constraints", :force => true do |t|
    t.string   "phrase"
    t.integer  "constraint_category_id", :limit => 255
    t.boolean  "active"
    t.datetime "created_at",                            :null => false
    t.datetime "updated_at",                            :null => false
  end 
```

我想创建一个查询来查找“active”属性为“true”且“constraint_category.value”为“Noun”的所有约束。

希望有任何关于到达那里的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T01:37:12.770

```
Constraint.joins(:constraint_category).where('constraints.active = ? and constraint_categories.value = ?', true, 'Noun') 
```

请参阅指南中的[条件](http://guides.rubyonrails.org/active_record_querying.html#conditions)和[加入](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)。

# javascript - 使用 JavaScript 进行基本的 CSS 操作

> ID：10560353
> 
> 赞同：1
> 
> 时间：2012-05-12T01:32:42.170
> 
> 标签：javascript, css

我目前正在学习 JavaScript，但我的基础知识很薄弱。我正在尝试编写一个在单击链接时更改背景颜色的函数，您能告诉我我做错了什么吗？

```
<head>

<script type="text/javascript">

function change()
{
var abra = document.getElementbyId("body").style;
abra.background-color = "black";

}
</script>

</head>

<body>

<div id="body" style="background-color: red;">
<a href="#" id="test" onclick="return change()">Test</a>
sdfdsfsdfds

</div>

</body> 
```

编辑：为澄清起见，我试图改变 DIV“body”的背景颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T01:33:57.373

您正在寻找的物业是`backgroundColor`：

```
abra.backgroundColor = "black"; 
```

一般来说，Javascript 对 CSS 样式属性使用相应的 camelCase。有关示例，请参阅[一些属性的列表](http://www.w3schools.com/jsref/dom_obj_style.asp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T01:34:06.640

代替

```
var abra = document.getElementbyId("body").style
abra.background-color = "black"; 
```

尝试

```
document.body.style.backgroundColor = "black"; 
```

* * *

```
document.getElementbyId("body") 
```

查找 ID 为 body 的元素，并且

```
abra.background-color 
```

是相同的

```
(abra.background) - color 
```

这可能会导致一个错误，告诉您没有`var`named `color`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T01:34:18.610

使用骆驼案例：

```
background-color => backgroundColor 
```

* * *

```
var abra = document.getElementById("body").style;
abra.backgroundColor = "black"; 
```

但是，如果您想要 body 标签，请使用：

```
document.getElementsByTagName("body")[0] 
```

或者

```
document.body // recommended 
```

# javascript - JavaScript 可扩展树视图轻量级

> ID：10560354
> 
> 赞同：-1
> 
> 时间：2012-05-12T01:32:42.273
> 
> 标签：javascript, css, treeview

我想要一个轻量级的解决方案，所以我找到了这个，但是它只在单击可扩展类别名称旁边的加号“+”时扩展。我将 + 替换为红色方块，将 - 替换为蓝色方块，以使该演示正常工作。现场代码：http: [//jsfiddle.net/2VXuk/2/](http://jsfiddle.net/2VXuk/2/)

我需要帮助修改它以使任何可扩展的子级别成为不是链接的类别，并在单击其名称时扩展其内容。

如果可以选择将其设为一个类别，那就太好了 - 单击时展开或链接在 + 单击时展开，并在名称单击时重定向。例如

```
<ul id="sitemap">
<li><a class="category" href="#">expands only</a> 
    <ul>
        <li><a href="#">Sample</a></li>
        <li><a href="#">Sample</a></li>
        <li><a class="category_and_link" href="psy.html">Link to page or expand on + button</a>
            <ul>
                <li><a href="#">Sample</a></li>
                <li><a href="#">Sample</a></li>
                <li><a href="#">Sample</a></li>
                <li><a href="#">Sample</a></li>
                <li><a href="#">Sample</a></li>
            </ul>                           
        </li>
        <li><a href="#">Fourth link</a></li>
        <li><a href="#">Fifth link</a></li>
    </ul>                   
</li>
</ul>

<script type="text/javascript">
this.sitemapstyler = function(){
    var sitemap = document.getElementById("sitemap")
    if(sitemap){

        this.listItem = function(li){
            if(li.getElementsByTagName("ul").length > 0){
                var ul = li.getElementsByTagName("ul")[0];
                ul.style.display = "none";
                var span = document.createElement("span");
                span.className = "collapsed";
                span.onclick = function(){
                    ul.style.display = (ul.style.display == "none") ? "block" : "none";
                    this.className = (ul.style.display == "none") ? "collapsed" : "expanded";
                };
                li.appendChild(span);
            };
        };

        var items = sitemap.getElementsByTagName("li");
        for(var i=0;i<items.length;i++){
            listItem(items[i]);
        };

    };  
};

window.onload = sitemapstyler;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T01:52:08.097

请参阅我[的 jsFiddle 分支。](http://jsfiddle.net/AF7DX/3/)基本思路是抓取`a`元素...

```
var a = li.getElementsByTagName("a")[0]; 
```

并为其添加一个事件处理程序。

```
if (!a.hasAttribute("href"))
    a.onclick = showHide; 
```

对于非链接，只需省略该`href`属性。

# webkit - 突变观察者---子树

> ID：10560356
> 
> 赞同：17
> 
> 时间：2012-05-12T01:33:49.970
> 
> 标签：webkit, chromium, mutation-observers

我正在阅读此[http://lists.w3.org/Archives/Public/public-webapps/2011JulSep/1622.html](http://lists.w3.org/Archives/Public/public-webapps/2011JulSep/1622.html)似乎 Chrome 的行为与规范形成对比。如果我正确理解规范，为元素定义“子树”意味着应该报告对该元素的子树（包括元素本身）的更改。但是，在执行这段代码时，我什么也得不到。

```
var observer = new WebKitMutationObserver(function(e){console.log(e);})
observer.observe(document.body, {subtree:true, attributes:true});
document.body.appendChild(document.createElement('div')); 
```

我错过了什么？有人可以详细说明一下吗？谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-23T12:25:12.340

文档不清楚，但`subtree`除非您还指定`childList:true`.

`attributes`和的情况`attributeFilter`是一样的。

希望它仍然有帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-06-13T21:03:52.063

根据[这篇文章](https://davidwalsh.name/mutationobserver-api)：

> **childList**：如果要观察目标节点的子元素（包括文本节点）的添加和删除，则设置为 true。
> 
> **subtree**：如果不仅要观察目标的突变，还要观察目标的后代，则设置为 true。

这也解释了取决于**childList的****子树**。

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-10T10:23:22.620

在`mutationObserver`config 中，至少需要设置`attributes`、`characterData`或之一。`childList``true`

现在，如果您只设置`childList: true`，那么它将仅观察目标元素的直接子元素（深度 1），而不是完整的子树。

要观察完整的子树`childList`，`subtree`需要设置和`true`。

例如

```
{
   childList: true,
   subtree: true
} 
```

我希望，它是有帮助的。**

# javascript - 在javascript中声明变量时，默认值是否为null？

> ID：10560362
> 
> 赞同：25
> 
> 时间：2012-05-12T01:35:00.633
> 
> 标签：javascript

如果我有如下声明：

```
var j; 
```

`j==null`直到我将它设置为等于某事？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-12T01:35:49.463

不，它具有默认值`undefined`
但是如果想使用`!j`条件，它将与这两个值一起使用（即**undefined**或**null**）

请注意`(j==null)`is **`true`**, but `(j===null)`is **`false`**... JavaScript 有“假”值，有时还有意想不到的规则来转换值，加上花哨`===`的运算符来同时比较值和类型。

# security - 使用 ASCII 的数学验证码，安全吗？

> ID：10560367
> 
> 赞同：0
> 
> 时间：2012-05-12T01:35:53.070
> 
> 标签：security, ascii, captcha

我不得不在我的表格上放一个验证码。为了方便用户和国际化，我提出了一个简单的数学问题。

因为这对于机器人来说太简单了，所以我决定把整个问题都放在 ASCII 中。这是相对安全的还是大多数机器人仍然可以轻松绕过它？

我有： & #87; hat & #105;... 它会输出“什么是 4 + 1？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T01:40:30.220

而是生成数学问题的图像。如果您需要更多安全性，可能会应用一些简单的转换。

HTML 转义很容易绕过，因为它是一种计算机可读格式。为了使机器人检测方案成功，任务必须易于计算机生成，易于人类解决，而计算机难以解决。

# ant - 将一个目录和子目录中的所有文件复制到一个位置

> ID：10560368
> 
> 赞同：3
> 
> 时间：2012-05-12T01:35:58.920
> 
> 标签：ant

这是我将所有 .txt 文件从一个位置复制到另一个位置的代码：

```
<copy todir="../new/dir">
    <fileset dir="C:/build/build">
        <include name="**/*.txt"/>
    </fileset>
</copy> 
```

尽管它工作正常，但它正在正确复制文件，但问题是它也在维护目的地非空目录的目录结构，我想要“C：/build/build”下的所有文件及其子目录应该

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T01:44:18.347

根据您所写的内容，您可能想要展平文件？

[http://ant.apache.org/manual/Tasks/copy.html](http://ant.apache.org/manual/Tasks/copy.html)

```
<copy todir="../new/dir" flatten="true">
    <fileset dir="C:/build/build">
        <include name="**/*.txt"/>
    </fileset>
</copy> 
```

# textarea - 管理来自用户编辑的文本区域的数据

> ID：10560374
> 
> 赞同：0
> 
> 时间：2012-05-12T01:37:54.330
> 
> 标签：textarea

我正在研究一种管理来自用户编辑的文本区域的数据的解决方案。我必须让用户有机会添加一些基本的 HTML 标记（链接、粗体、列表和其他内容）。我最担心的是安全性。数据将保存在 mySql 数据库中。

有什么建议可以尽可能避免安全问题吗？将这种文本保存在数据库中的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T01:44:27.077

解决此问题的最佳方法是制作允许标签的白名单。通过 JavaScript，您可以警告用户他们正在输入无效数据，但是为了在服务器端保护您的数据，您需要将它们从内容中删除。例如，应该小心处理脚本标签。如果您希望您的用户输入这些内容，并且其他用户能够查看它，则需要进行一些更复杂的处理。

一个巧妙的解决方案是转义所有白名单标签并将其他标签编码为字符，以便`<script>`标签变为`&lt;script&gt;`. 这样，如果您在 html 中输出它，它不会被视为有效标签，而是被视为一个接一个放置的字符。

如果您需要针对您自己的语言的更具体的解决方案，请提供更多详细信息，但这作为一个全球概念就足够了。

# common-lisp - 如何删除反引号内的字符串引号

> ID：10560376
> 
> 赞同：1
> 
> 时间：2012-05-12T01:38:34.633
> 
> 标签：common-lisp

想象一下，我得到了某种由宏调用的函数来返回一个类似的表达式

```
(do-something 'argument) 
```

因此函数必须看起来像

```
(defun form-expression (arg)
  `(do-something ',arg)) 
```

但是当被调用时`(form-expression "foobar")`，由于包装宏必须接收字符串作为参数，结果是：

```
(do-something '"foobar") 
```

如何“删除”给定字符串的引号？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T09:24:09.777

你的问题是：**如何去掉引号？**

这个问题真的没用。

**1：**我们要问，为什么会有“引号”？

答：因为它是*字符串*的语法。

这是一个字符串：`"buddha"`.

**2：**我们需要问我们有什么没有“引号”？

答案：*符号*。

这是一个符号：`buddha`。

**3：**如果我们有一个字符串，我们如何创建或获取对应的符号？

我们需要使用`INTERN`or `FIND-SYMBOL`。

```
> (intern "buddha")
|buddha| 
```

**4：**为什么会有竖条？

默认情况下，所有符号在内部都是大写的（早期有很多计算机只有大写字符，而 Lisp 早在大洪水之前就被发现了）。

因此，Common Lisp 使用竖线在符号有非大写字符时对其进行转义。

**5：**我怎样才能得到一个正常的内部大写符号？

使用功能`STRING-UPCASE`：

```
> (intern (string-upcase "buddha"))
BUDDHA 
```

**现在我们住了一尊大佛**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T03:27:28.257

如果我对您的理解正确，对于“foobar”的输入，您希望结果`form-expression`为`(do-something 'foobar)`.

如果是这种情况，请使用该[`intern`](http://www.lispworks.com/documentation/HyperSpec/Body/f_intern.htm#intern)功能。您要么需要传递`intern`ed 字符串（如 中`(form-expression (intern "foobar"))`），要么需要在函数中进行类型调度

```
(defun form-expression (arg)
   `(do-something ',(if (stringp arg) (intern arg) arg))) 
```

实际上，由于您要根据参数的类型进行调度，因此这是使用方法的理想场所。

```
(defmethod form-expression (arg) `(do-something ',arg))
(defmethod form-expression ((str string)) `(do-something ',(intern str))) 
```

# javascript - 以编程方式更改 jQuery File Upload (blueimp) 的 previewMaxWidth/Height

> ID：10560377
> 
> 赞同：4
> 
> 时间：2012-05-12T01:39:51.820
> 
> 标签：javascript, jquery, file-upload, blueimp

我正在实现 Blueimp jQuery File Uploader [https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)并且我想在添加第一张图像后更改**previewMaxWidth**和**previewMaxHeight**。这是因为我有一个产品特征图像，然后是产品的后续视图，每个视图都应显示小于特征图像。

这是我的文件上传调用：

```
$('.imageupload').fileupload({
    autoUpload : true,
    acceptFileTypes : /(\.|\/)(gif|jpe?g|png)$/i,
    previewMaxWidth : 198,
    previewMaxHeight : 800,
    uploadTemplateId : 'product-add-image-upload',
    downloadTemplateId : 'product-add-image-download'
}).bind('fileuploadadded', function(e, data) {
    // change preview width/height to 60px/60px after first image loaded
    // not sure what to put here

}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T14:04:21.430

存在`option`允许在小部件初始化后更改*选项的参数。*

根据您的代码：

```
...

}).bind('fileuploadadded', function(e, data) {
    $('.imageupload').fileupload(
        'option',
        {
            previewMaxWidth: 60,
            previewMaxHeight: 60
        }
    );
}); 
```

有关更改选项的更多信息，请参见官方[API](https://github.com/blueimp/jQuery-File-Upload/wiki/API)页面（*选项*部分）。

# c - 带有 OpenSSL 的 Web 服务器

> ID：10560380
> 
> 赞同：1
> 
> 时间：2012-05-12T01:40:09.043
> 
> 标签：c, linux, ssl, tcp-ip

我试图编译我的网络服务器，但发生了如下这些事情：

```
gcc -o webserv.o webserv.c -c -ansi -pedantic -Wall -lssl -lcrypto
webserv.c: In function ‘main’:
webserv.c:33: warning: ‘OPENSSL_add_all_algorithms_noconf’ is deprecated (declared at /usr/include/openssl/evp.h:828)
webserv.c:34: warning: ‘SSL_load_error_strings’ is deprecated (declared at /usr/include/openssl/ssl.h:1416)
webserv.c:36: warning: ‘TLSv1_server_method’ is deprecated (declared at /usr/include/openssl/ssl.h:1520)
webserv.c:38: warning: ‘SSL_CTX_new’ is deprecated (declared at /usr/include/openssl/ssl.h:1346)
webserv.c:40: warning: ‘ERR_print_errors_fp’ is deprecated (declared at /usr/include/openssl/err.h:287)
webserv.c:44: warning: ‘SSL_CTX_use_certificate_file’ is deprecated (declared at /usr/include/openssl/ssl.h:1402)
webserv.c:45: warning: ‘SSL_CTX_use_PrivateKey_file’ is deprecated (declared at /usr/include/openssl/ssl.h:1401)
webserv.c:47: warning: ‘SSL_CTX_check_private_key’ is deprecated (declared at /usr/include/openssl/ssl.h:1475)
webserv.c:92: warning: ‘SSL_new’ is deprecated (declared at /usr/include/openssl/ssl.h:1481)
webserv.c:94: warning: ‘ERR_print_errors_fp’ is deprecated (declared at /usr/include/openssl/err.h:287)
webserv.c:98: warning: ‘SSL_set_fd’ is deprecated (declared at /usr/include/openssl/ssl.h:1370)
webserv.c:100: warning: ‘SSL_accept’ is deprecated (declared at /usr/include/openssl/ssl.h:1491)
webserv.c:102: warning: ‘ERR_print_errors_fp’ is deprecated (declared at /usr/include/openssl/err.h:287)
webserv.c:106: warning: ‘SSL_get_version’ is deprecated (declared at /usr/include/openssl/ssl.h:1502)
webserv.c:106: warning: ‘SSL_CIPHER_get_name’ is deprecated (declared at /usr/include/openssl/ssl.h:1360)
webserv.c:106: warning: ‘SSL_get_current_cipher’ is deprecated (declared at /usr/include/openssl/ssl.h:1357)
webserv.c:114: warning: ‘SSL_shutdown’ is deprecated (declared at /usr/include/openssl/ssl.h:1532)
webserv.c:116: warning: ‘SSL_free’ is deprecated (declared at /usr/include/openssl/ssl.h:1490)
i686-apple-darwin11-llvm-gcc-4.2: -lssl: linker input file unused because linking not done
i686-apple-darwin11-llvm-gcc-4.2: -lcrypto: linker input file unused because linking not done
gcc -o helper.o helper.c -c -ansi -pedantic -Wall -lssl -lcrypto
helper.c: In function ‘Readline’:
helper.c:32: warning: ‘SSL_read’ is deprecated (declared at /usr/include/openssl/ssl.h:1493)
helper.c: In function ‘Writeline’:
helper.c:68: warning: ‘SSL_write’ is deprecated (declared at /usr/include/openssl/ssl.h:1495)
i686-apple-darwin11-llvm-gcc-4.2: -lssl: linker input file unused because linking not done
i686-apple-darwin11-llvm-gcc-4.2: -lcrypto: linker input file unused because linking not done
gcc -o servreq.o servreq.c -c -ansi -pedantic -Wall -lssl -lcrypto
i686-apple-darwin11-llvm-gcc-4.2: -lssl: linker input file unused because linking not done
i686-apple-darwin11-llvm-gcc-4.2: -lcrypto: linker input file unused because linking not done
gcc -o reqhead.o reqhead.c -c -ansi -pedantic -Wall -lssl -lcrypto
i686-apple-darwin11-llvm-gcc-4.2: -lssl: linker input file unused because linking not done
i686-apple-darwin11-llvm-gcc-4.2: -lcrypto: linker input file unused because linking not done
gcc -o resphead.o resphead.c -c -ansi -pedantic -Wall -lssl -lcrypto
i686-apple-darwin11-llvm-gcc-4.2: -lssl: linker input file unused because linking not done
i686-apple-darwin11-llvm-gcc-4.2: -lcrypto: linker input file unused because linking not done
gcc -o resource.o resource.c -c -ansi -pedantic -Wall -lssl -lcrypto
i686-apple-darwin11-llvm-gcc-4.2: -lssl: linker input file unused because linking not done
i686-apple-darwin11-llvm-gcc-4.2: -lcrypto: linker input file unused because linking not done
gcc -o webserv webserv.o helper.o servreq.o reqhead.o resphead.o resource.o -Wall -lssl -lcrypto
Undefined symbols for architecture x86_64:
  "_server_ssl", referenced from:
      _Readline in helper.o
      _Writeline in helper.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

**有人知道这里有什么问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T01:45:58.317

在我看来，您的编译器设置为中止警告链接，并且编译阶段在您的代码中生成了数十个“弃用”警告。因此，更改编译器标志或更新已弃用的调用似乎是您的选择。

# wpf - 尝试在 HierarchicalDataTemplate 中捕获鼠标事件

> ID：10560381
> 
> 赞同：1
> 
> 时间：2012-05-12T01:40:24.277
> 
> 标签：wpf, treeview

我对 wpf 和这个网站还很陌生。如果我表现出一些错误，请给我一些怜悯。

我的 HierarchicalDataTemplate 是我的树视图项，它由多个组件组成：两个文本块、图像和复选框，以及一些用于布局的堆栈面板。我的 MouseEventHandler 是 TreeViewItem.Selected，它是在用户单击文本框、图像或复选框时捕获的。但是当我单击这些组件之间的微小空间时，它不会触发 TreeViewItem.Selected。

我最初的想法是，我可能需要在堆栈面板上指定用于 HierarchicalDataTemplate 布局的事件处理程序。但是，即使我专门在堆栈面板上制作了事件处理程序，它也没有引发事件。

你能给我一些指导吗？

附言。我对 IsSelected 属性使用了绑定，但它从未通知更改其属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:05:45.083

为`Background="Transparent"`您的`HierarchicalDataTemplate`.

以下 Grid 不会引发 MouseLeftButtonDown 事件：

```
<Grid MouseLeftButtonDown="handler" Width="200" Height="200">
</Grid> 
```

但以下是：

```
<Grid MouseLeftButtonDown="handler" Width="200" Height="200" Background="Transparent">
</Grid> 
```

这是因为在第一种情况下，它没有背景，也没有什么可以引发 MouseLeftButtonDown 事件。因此，仅当用户单击该网格内的某个元素时才会引发该事件。

# php - SQL Server 2008 分页 PHP

> ID：10560383
> 
> 赞同：0
> 
> 时间：2012-05-12T01:41:00.227
> 
> 标签：php, sql-server, pagination

我正在尝试使用 SQL SERVER 2008 的 ROW_NUMBER 函数每页显示 10 条记录。

我认为我的查询有问题，因为我只定义了从哪里开始和在哪里结束显示记录（从 1 到 10），而不是每页显示的记录数量。

当我转到下一页时，根本没有显示任何结果，因为我不知道如何正确地将 $per_page 变量添加到我的 SQL 查询中。

我想要的只是能够在第 1 页显示前 10 个产品 ID，然后单击“下一步”按钮，将显示接下来的 10 个产品 ID，等等。

这是我现在拥有的代码：

```
$per_page = 10;

if(!isset($_GET['page']))
{
    $page = 1;
}
else
{
    $page = $_GET['page'];  
}

if($page<=1)
{
    $start = 0;
}
else
{
    $start = $page * $per_page - $per_page;
}

$tsql = " SELECT *
FROM (SELECT ROW_NUMBER() OVER(ORDER BY productID) AS
rownum, productID FROM products) AS products1
WHERE rownum >= $start AND rownum <= $per_page";

$num_rows = sqlsrv_num_rows(sqlsrv_query($conn,$tsql));

$num_pages = ceil($num_rows / $per_page); 

$stmt = sqlsrv_query($conn,$tsql);
while($row = sqlsrv_fetch_array($stmt)){ 

            echo $row['productID']. "<br/>";

}

$prev = $page - 1;
$next = $page + 1;

echo "<hr>";

//prev
if($prev > 0)
{
    echo "<a href='?page=$prev'>prev</a> ";
}

//numbers
$number = 1;
for($number; $number <= $num_pages; $number +=1)
{
    if($page==$number)
    {
        echo " <b>[$number]</b> ";
    }
    else
    {
        echo "<a href='?page=$number'>$number</a> ";
    }
}

//next 

    echo "<a href='?page=$next'>next</a>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:10:10.077

我不熟悉 sql server，但在我看来你只需要终点：

```
$tsql = " SELECT *
    FROM (SELECT ROW_NUMBER() OVER(ORDER BY productID) AS
    rownum, productID FROM products) AS products1
    WHERE rownum >= $start AND rownum < ($start + $per_page)";
                                        ^     changed      ^ 
```

如果`$page`应该是一个整数，最好确保它是：

```
$page = (int) $_GET['page']; 
```

# api - 对象引用未设置为对象的实例，youtube API

> ID：10560384
> 
> 赞同：1
> 
> 时间：2012-05-12T01:41:11.617
> 
> 标签：api, pointers, null, youtube

```
class Program
{
    static void Main(string[] args)
    {
        string Appname;
        string developerKey;
        string username;
        string password;

        Appname = "a";
        developerKey = "b";
        username = "c";
        password = "d";

        YouTubeRequestSettings settings = new
           YouTubeRequestSettings(Appname, developerKey, username, password);
        YouTubeRequest request = new YouTubeRequest(settings);

        Uri videoEntryUrl = new
            Uri("http://www.youtube.com/watch?v=dOShGP0FM1U");
        Video video = request.Retrieve<Video>(videoEntryUrl);

        Comment MyComment = new Comment();
        MyComment.Content = "random tango";
        if (video != null)
        {
            request.AddComment(video, MyComment);
        }
        else
        {
            Console.Write("Video was null for some reason!");
            Console.ReadKey();
        }
    }
} 
```

出于某种原因，视频一直返回 null，我不知道，我已经尝试了所有我真正需要帮助的项目。

# ruby - 在 Ruby 中包装深度嵌套的哈希的推荐方法是什么？

> ID：10560385
> 
> 赞同：0
> 
> 时间：2012-05-12T01:41:18.077
> 
> 标签：ruby

我有一个哈希，我需要访问以下内容：

```
parsed["HotelInformationResponse"]["PropertyAmenities"]["PropertyAmenity"] 
```

这需要与变量赋值放在一起。这使它超过 80 个字符，这是我换行的地方。包裹它以使其适合的最优雅的方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T01:54:27.493

文本编辑器只是一个工具。仅仅因为您以 80 个字符换行并不意味着 100% 的行*应*少于 80 个字符。有些表达式不能（或不应该）被分解并且碰巧很长。作为一种旨在读起来像自然语言的语法的语言，有时冗长的方法或变量名称（例如“HotelInformationResponse”）需要更多空间。

要直接回答，您可以将不同的部分分配给单独的变量：

```
response = parsed["HotelInfomationResponse"]
amenities = response["PropertyAmenities"]
amenity = amenities["PropertyAmenity"] 
```

如果您要重用部分哈希，这将是更可取的，这样您就不会`parsed["HotelInformationResponse"]["PropertyAmenities"]`重复调用。

# sql - 选择具有不同列名的表

> ID：10560386
> 
> 赞同：28
> 
> 时间：2012-05-12T01:42:48.467
> 
> 标签：sql, sqlite, sql-insert

在 SQL 中，`Select into ...`将行复制到不同的（备份）表中。如果备份表具有不同的结构（或不同的列名），这可能吗？如果没有，实现这一目标的最佳方法是什么？

这是我想要做的：`TableA`有列`a1,a2,a3`。我想将此表中的一些行复制到另一个`TableB`具有 column 的表中`b1,b2,b3,b4`。`a1`to go into `b1`, `a2`to`b2`等的内容

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-12T01:45:28.673

只要**数据类型**匹配（或者可以在赋值中强制转换），**列名根本不重要。**

 **如果列的数据类型不匹配，请尝试相应地转换值。**只需尝试**使用小型虚拟桌子。请务必明确列出目标列以避免混淆。像这样：

```
INSERT INTO TableB (b1, b2, b3)
SELECT a1, a2, a3
FROM   TableA
WHERE  <some condition>; 
```

[SQLite 手册中的](http://sqlite.org/lang_insert.html)更多详细信息。**

# sencha-touch-2 - Sencha Touch 2：在桌面操作系统（Linux/Windows）上模拟不同的配置文件（手机/平板电脑）

> ID：10560388
> 
> 赞同：2
> 
> 时间：2012-05-12T01:43:02.767
> 
> 标签：sencha-touch-2

我正在学习 Sench Touch 2。我想如果我希望我的应用程序对手机和平板电脑平台“响应”，我可以使用[Profiles](http://docs.sencha.com/touch/2-0/#!/guide/profiles)。

```
Ext.define('Mail.profile.Phone', {
    extend: 'Ext.app.Profile',

    config: {
        name: 'Phone',
        views: ['Main']
    },

    isActive: function() {
        return Ext.os.is.Phone;
    },

    launch: function() {
        Ext.create('Mail.view.phone.Main');
    }
}); 
```

我正在使用 Chromium 在 Arch Linux 上进行开发。我安装了已安装的用户代理切换器以假装在平板电脑/手机操作系统上运行，但配置文件似乎没有改变任何东西。我`console.log()`在启动功能中添加

我想知道我是否将个人资料用于正确的事情？例如，我可能希望我的应用程序在平板电脑上显示一个列表和一个详细信息视图，然后将该列表动画到手机上的详细信息视图。如果是这样，我是否需要一个真正的平板电脑/手机来测试这个配置文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T04:38:12.907

您可以附加`deviceType=Phone`或`deviceType=Tablet`模拟这些不同的设备类型。

这里的例子：

[http://dev.sencha.com/deploy/touch/examples/production/kitchensink/index.html?deviceType=Phone](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/index.html?deviceType=Phone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:18:44.803

我通常只是更改平板电脑和手机配置文件中的“isActive”功能来实现这一点。例如，如果我想在笔记本电脑上测试电话配置文件，我只需将其更改为：

```
isActive: function() {
    return !Ext.os.is.Phone;
} 
```

这与它应该是完全相反的。这实际上是我在平板电脑配置文件中使用的功能。

# java - GridWorld 中的移动算法

> ID：10560391
> 
> 赞同：0
> 
> 时间：2012-05-12T01:44:11.820
> 
> 标签：java, string, gridworld

在网格世界案例研究中，我的最后一个项目是我正在制作一个游戏。在游戏中，如果玩家点击“W”键，则调用 shiftUp() 方法，该方法使某个实例的所有其他角色都向下移动，从而产生玩家移动的错觉。这不是该方法的完成实现，但这应该获取网格中的所有参与者并测试它们是否是扩展 Actor 的名为 Enemy 的类的实例。如果是这样，演员应该向上移动一格。当我调用此方法时，会在调用enemy.moveTo(...); 的行上调用 NullPointerException；这不应该发生，因为我检查它是否为空。谁能帮我这个？我明白了：线程“AWT-EventQueue-0”中的异常 java.lang.NullPointerException

```
public void shiftUp()
{
    if (((GameGrid)getGrid()).getMinX() != 0)
    {
        Grid<Actor> grid = getGrid();
        if (grid != null)
        {
            for (int y = 0; y < getGrid().getNumRows(); y++)
                for (int x = 0; x < getGrid().getNumCols(); x++)
                {
                    Actor enemy = grid.get(new Location(y,x));
                    if (enemy != null && enemy instanceof Enemy)
                        enemy.moveTo(new Location(enemy.getLocation().getRow() - 1, enemy.getLocation().getCol()));
                }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:08:49.607

由于您正在事先检查`enemy != null`，我猜那`enemy.getLocation()`是返回`null`，这会导致`NullPointerException`您调用`null.getRow()`and时出现 a `null.getCol()`。

如果是这种情况，那么看起来问题在于您从未在网格中`Actor`获得适当的权限。`Location`确保您使用该`putSelfInGrid(Grid<Actor> grid, Location loc)`方法将 放置`Actor`在网格中（*不是* `grid.put(Location loc, E obj)`），因为相应地`putSelfInGrid()`设置您`Actor`的位置。

# sql - 如何使用新的 PostgreSQL JSON 数据类型中的字段进行查询？

> ID：10560394
> 
> 赞同：227
> 
> 时间：2012-05-12T01:45:13.270
> 
> 标签：sql, json, postgresql, postgresql-9.2, postgresql-9.3

我正在为 PostgreSQL 9.2 中的新 JSON 函数寻找一些文档和/或示例。

具体来说，给定一系列 JSON 记录：

```
[
  {name: "Toby", occupation: "Software Engineer"},
  {name: "Zaphod", occupation: "Galactic President"}
] 
```

我将如何编写 SQL 以按名称查找记录？

在普通 SQL 中：

```
SELECT * from json_data WHERE "name" = "Toby" 
```

官方开发手册非常稀少：

*   [http://www.postgresql.org/docs/devel/static/datatype-json.html](http://www.postgresql.org/docs/devel/static/datatype-json.html)
*   [http://www.postgresql.org/docs/devel/static/functions-json.html](http://www.postgresql.org/docs/devel/static/functions-json.html)

### 更新一

我整理了一个[要点，详细说明了 PostgreSQL 9.2 目前可能实现的功能](https://gist.github.com/2715918)。使用一些自定义函数，可以执行以下操作：

```
SELECT id, json_string(data,'name') FROM things
WHERE json_string(data,'name') LIKE 'G%'; 
```

### 更新二

我现在已经将我的 JSON 函数移到了他们自己的项目中：

[**PostSQL**](https://github.com/tobyhede/postsql) - 一组用于将 PostgreSQL 和 PL/v8 转换为非常棒的 JSON 文档存储的函数

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-05-12T03:10:59.240

### Postgres 9.2

我在 pgsql-hackers 列表中引用[了 Andrew Dunstan](https://archives.postgresql.org/pgsql-hackers/2012-01/msg01764.php)：

> 在某个阶段可能会有一些 json 处理（而不是 json 生成）功能，但在 9.2 中没有。

不妨碍他在 PLV8 中提供一个可以解决您的问题的示例实现。（链接现已失效，请参阅现代[PLV8](https://plv8.github.io/)。）

### Postgres 9.3

提供一系列新功能和运算符以添加“json-processing”。

*   [新 JSON 功能手册。](https://www.postgresql.org/docs/9.3/functions-json.html)
*   [Postgres Wiki 关于 pg 9.3 中的新功能](https://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.3#JSON:_Additional_functionality)。

Postgres 9.3中**原始问题**的答案：

```
SELECT *
FROM   json_array_elements(
  '[{"name": "Toby", "occupation": "Software Engineer"},
    {"name": "Zaphod", "occupation": "Galactic President"} ]'
  ) AS elem
WHERE elem->>'name' = 'Toby'; 
```

高级示例：

*   [使用 JSON 数据类型的嵌套记录数组查询组合](https://stackoverflow.com/questions/26877241/query-combinations-with-nested-array-of-records-in-json-datatype/26880705#26880705)

对于较大的表，您可能需要添加表达式索引以提高性能：

*   [在 JSON 数组中查找元素的索引](https://stackoverflow.com/questions/18404055/index-for-finding-element-in-json-array)

### Postgres 9.4

添加（b 表示“二进制”，值存储为原生 Postgres 类型）以及*两种***`jsonb`**类型的更多功能。除了上面提到的表达式索引，还支持[GIN、btree 和哈希索引](https://www.postgresql.org/docs/9.4/datatype-json.html#JSON-INDEXING)，其中 GIN 是最强大的。*`jsonb`*

 **   该手册介绍了数据[类型](https://www.postgresql.org/docs/9.4/datatype-json.html)[`json`和`jsonb`](https://www.postgresql.org/docs/9.4/datatype-json.html)[功能](https://www.postgresql.org/docs/current/functions-json.html)。
*   [第 9.4 页中关于 JSONB 的 Postgres Wiki](https://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.4#JSONB_Binary_JSON_storage)

该手册建议：

> 一般来说，**大多数应用程序应该更喜欢将 JSON 数据存储为 `jsonb`**，除非有非常特殊的需求，例如关于对象键排序的遗留假设。

大胆强调我的。

[性能受益于 GIN 索引的全面改进。](https://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.4#GIN_indexes_now_faster_and_smaller)

### Postgres 9.5

功能齐全`jsonb`，算子齐全。添加更多功能以`jsonb`进行就地操作和显示。

*   [Postgres 9.5 发行说明中的​​主要好消息。](https://www.postgresql.org/docs/9.5/release-9-5.html#AEN126466)

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2014-03-20T16:01:55.180

使用 Postgres 9.3+，只需使用`->`操作符。例如，

`SELECT data->'images'->'thumbnail'->'url' AS thumb FROM instagram;`

有关一些不错的示例和教程，请参阅[http://clarkdave.net/2013/06/what-c​​an-you-do-with- postgresql-and-json/。](http://clarkdave.net/2013/06/what-can-you-do-with-postgresql-and-json/)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-03-27T12:27:51.390

在 postgres 9.3 中使用 -> 进行对象访问。4 个例子

种子.rb

```
se = SmartElement.new
se.data = 
{
    params:
    [
        {
            type: 1,
            code: 1,
            value: 2012,
            description: 'year of producction'
        },
        {
            type: 1,
            code: 2,
            value: 30,
            description: 'length'
        }
    ]
}

se.save 
```

导轨 c

```
SELECT data->'params'->0 as data FROM smart_elements; 
```

返回

```
 data
----------------------------------------------------------------------
 {"type":1,"code":1,"value":2012,"description":"year of producction"}
(1 row) 
```

可以继续嵌套

```
SELECT data->'params'->0->'type' as data FROM smart_elements; 
```

返回

```
 data
------
 1
(1 row) 
```*

# r - 在R中对元组进行排序后删除重复的元组

> ID：10560395
> 
> 赞同：3
> 
> 时间：2012-05-12T01:45:17.043
> 
> 标签：r, duplicates, tuples

我有一个关于在 R 中的元组中排序后删除重复项的问题。

假设我有一个值数据框

```
df<-cbind(c(1,2,7,8,5,1),c(5,6,3,4,1,8),c(1.2,1,-.5,5,1.2,1)) 
```

甲和乙

```
a=df[,1]
b=df[,2]
temp<-cbind(a,b) 
```

我正在做的是基于排序元组的唯一性。例如，我想保留 a=1,2,7,8,1 和 b=5,6,3,4,8 并删除条目 a[5] 和 b[5]。这基本上是为了确定两个对象之间的交互。1 对 5、2 对 6 等，但 5 对 1 与 1 对 5 相同，因此我想删除它。

我开始走的路线如下。我创建了一个函数，对每个元素进行排序并将结果放回向量中。

```
sortme<-function(i){sort(temp[i,])}
sorted<-t(sapply(1:nrow(temp),sortme)) 
```

并得到以下结果

```
 a b
[1,] 1 5
[2,] 2 6
[3,] 3 7
[4,] 4 8
[5,] 1 5
[6,] 1 8 
```

然后我唯一的排序结果

```
unique(sorted) 
```

这使

```
 a b
[1,] 1 5
[2,] 2 6
[3,] 3 7
[4,] 4 8
[5,] 1 8 
```

然后，我还使用 !duplicated 来获取真/假结果列表，我可以在原始数据集中使用这些结果从另一个单独的列中提取值。

```
T_F<-!duplicated(sorted)
final_df<-df[T_F,] 
```

我想知道的是，我是否以正确的方式处理非常大的数据集，或者是否已经有内置函数来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:09:32.600

根据您所说的“非常大的数据集”的含义，您可以通过仅将排序功能应用于总和重复的那些行来获得一些速度。

```
theSums<-.rowSums(temp,m=nrow(temp),n=ncol(temp))

almostSorted <- do.call(rbind, tapply(seq_len(nrow(temp)), theSums,
  function(x) {
    if(length(x) == 1L) {
      return(cbind(x, temp[x, , drop = FALSE]))
    } else {
      return(cbind(x, t(apply(temp[x, ], 1, sort))))
    }
  }
))

(sorted <- almostSorted[order(almostSorted[, 1]), -1])

[1,] 1 5
[2,] 2 6
[3,] 7 3
[4,] 8 4
[5,] 1 5
[6,] 1 8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T02:11:46.030

我可能会替换你的函数，`sortme`以及`sapply`with`sort`和`apply`

```
sorted <- t(apply(df[, 1:2], 1, sort)) 
```

# symfony - 如何使用 Doctrine2 Query Builder 伪函数对象？

> ID：10560398
> 
> 赞同：1
> 
> 时间：2012-05-12T01:45:36.510
> 
> 标签：symfony, doctrine-orm

阅读查询生成器的 Doctrine2 文档后，我发现了以下表达式：

```
// Example - $qb->expr()->exists($qb2->getDql())
public function exists($subquery); // Returns Expr\Func instance

// Example - $qb->expr()->all($qb2->getDql())
public function all($subquery); // Returns Expr\Func instance

// Example - $qb->expr()->some($qb2->getDql())
public function some($subquery); // Returns Expr\Func instance

// Example - $qb->expr()->any($qb2->getDql())
public function any($subquery); // Returns Expr\Func instance 
```

但是在文档中没有关于它们如何工作的示例，除了他们在每行上方放置的注释并没有过多解释。

有人可以解释一下如何在查询中使用它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:11:30.653

我找到了这些信息，所以我正在回答我自己的问题，以防其他人感兴趣。

这些表达式映射到它们对应的 EXISTS、ALL、SOME 和 ANY 的 DB 实现。MySQL 的文档可在[此处](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)找到“EXISTS”和“NOT EXISTS”，[此处](http://dev.mysql.com/doc/refman/5.0/en/any-in-some-subqueries.html)用于“ANY”、“IN”和“SOME”；这里是“全部” [。](http://dev.mysql.com/doc/refman/5.0/en/all-subqueries.html)

# javascript - 如何使用 Javascript/Jquery 更改单选按钮的值

> ID：10560402
> 
> 赞同：2
> 
> 时间：2012-05-12T01:46:29.820
> 
> 标签：javascript, jquery, radio-button

假设我有这个收音机：

```
<form name="myForm">
  <input type="radio" name="foo" value="1"> 1
  <input type="radio" name="foo" value="2"> 2
</form> 
```

我正在寻找一种方法来做这样的事情：

```
document.myForm.foo.value = "2"; 
```

为了动态选择第二个单选按钮。或者使用 jquery 执行以下操作的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T01:49:51.623

jQuery 选择器：

```
$('input[value="2"][name="foo"]') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T09:20:44.237

用这个：

```
$('[name="foo"]').val(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T01:54:23.767

既然你这样要求，你可以这样做：

`document.myForm.foo[1].checked = true; //selects the 2nd radio button`

这是一个例子：http: [//jsfiddle.net/bTzqw/](http://jsfiddle.net/bTzqw/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T01:54:26.027

你在寻找类似的东西`$(':radio[name=foo]:eq(1)')`

[**演示**](http://jsfiddle.net/skram/Dk6sB/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T01:55:23.777

如果您在 jQuery 集合中按名称获取所有收音机，则可以使用`eq()`.

```
$('input[name="foo"]').eq(1) // 2nd input 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-12T01:48:14.370

```
document.getElementsByName('foo')[1].check();//Or .checked = true 
```

# r - gdata 包中的 read.xls() 失败，“输入中没有可用的行”

> ID：10560403
> 
> 赞同：1
> 
> 时间：2012-05-12T01:47:00.613
> 
> 标签：r

我`read.xls()`从`gdata`包中使用来阅读 Excel 工作簿，其中每个工作簿都有一张工作表。读取失败并出现以下错误。

```
> read.xls(list.files[[1]])
Error in read.table(file = file, header = header, sep = sep, quote = quote,  : 
  no lines available in input 
```

我无法弄清楚错误。`sheetCount()`返回以下错误。

```
> sheetCount(list.files[[1]])
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
  line 161 did not have 13 elements 
```

但这很奇怪，因为工作簿有 27 列。对于第 161 +/- 1 行或第 13 +/- 1 列，似乎没有什么不寻常的地方。

在整个工作簿中，重复的条目都是空白的，您需要手动将它们向下扩展（这对于我想阅读的 750 多个工作簿来说是不切实际的）。

我尝试手动设置`quote=''`and `quote='\''`，但这些不会改变输出。我的问题是否`read.xls()`认为某些行参差不齐，但其他行不存在？任何指针？（我试过这个`xlsReadWrite`包，但我在 64 位 Win 7 上，它只适用于 32 位系统）。

谢谢！

* * *

更新

我关注了@G。Grothendieck 的建议并得到以下信息。

```
> k <- count.fields(xls2csv(list.xls[[1]]), sep = ","); k
NULL
> L <- readLines(xls2csv(list.xls[[1]])); L
character(0) 
```

生成的临时文件`xls2csv()`是空的，所以现在我无法弄清楚为什么我的`countSheets()`调用会返回“第 161 行，第 13 列”错误。

我还按照@Joran 的建议将 .xls 文件转换为 Libre Office 中的 .csv 文件，它转换和读取都很好（即，它在所有 236 行和逻辑`readLines()`输出中计算了 27 个字段）。

* * *

更新 2

我应该补充一点，我*认为*这些 .xls 文件*不是*由 Excel 生成的（我的来源对它们的来源有点保密），但是当我在 Libre Office 中打开它们时，我没有收到任何错误或警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:34:30.137

试试这个，看看它是否有任何建议：

```
library(gdata)
k <- count.fields(xls2csv("myfile.xls"), sep = ","); k
L <- readLines(xls2csv("myfile.xls")); L 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:14:02.190

In my case I think the problem is that the .xls to .csv Perl script fails (this is what `gdata` uses). I am still not sure why because LibreOffice converts the .xls to .csv with no warnings. I inspected the .csv with Vim and it looks normal (i.e., no crazy characters). I think the .xls is poorly formed by some proprietary script, so the Perl script fails.

Because LibreOffice works here, the easiest solution is to use command line LibreOffice (i.e., non of the Perl-based tools will work). I am on Win7, so I wrote a simple .bat file that converts every .xls in a directory.

```
for %%f in (*.xls) do soffice.exe -invisible -convert-to csv "%%f" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-08T12:23:32.957

使用 XLConnect ！

```
library(XLConnect)
readWorksheetFromFile(list.files[[1]], 1, useCachedValues=TRUE) 
```

# android - 将联系人/日历网络应用程序与移动设备同步需要什么？

> ID：10560404
> 
> 赞同：0
> 
> 时间：2012-05-12T01:48:08.673
> 
> 标签：android, ios, windows-phone-7, mobile, synchronization

我一直在用 PHP 开发一个提供联系人和日历管理的 Web 应用程序。此应用程序需要将其联系人和日历数据与移动设备（特别是 Android、Apple 和 Windows 手机）同步。

我没有移动开发经验，所以我主要是在寻找指导。由于缺乏经验，甚至很难知道要搜索什么。我主要想知道什么是可能的，什么是不可能的。

**总体目标**是能够从任何地方编辑联系人/日历数据，无论是来自 Web 应用程序本身还是移动设备。无论您使用什么工具查看这些更改，都会反映出来。一个非常松散的比较是 IMAP 服务器。一个中央数据源，任何应用程序都可以在其中跳入并查看/管理电子邮件。

我的 Web 应用程序当前可以使用 XML 数据处理 HTTP 请求。因此它可以发送数据并将数据发布到其中。

我的知识到此结束。我对设备本身需要什么才能进行同步几乎没有洞察力。如果用户将联系人添加到移动设备的默认联系人/日历应用程序，如何告知它与我的 Web 应用程序同步？这是否意味着为每个移动设备开发一个应用程序，以充当我的应用程序和移动设备的默认联系人/日历数据之间的媒介？

是否可以访问移动设备的内部联系人/日历数据？可以将这些数据推送到外部服务器或由同一服务器修改吗？Web 应用程序方面需要什么？移动设备方面？

这些是我希望得到回答的问题。可能有一些我什至没有想到的问题，我也很想讨论。如果我的问题过于笼统，请指定任何需要澄清的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T03:24:29.683

如果是 iphone，您必须编写自己的应用程序。我建议在您的服务器上使用数据库（sql），然后每次应用程序打开时，您都可以检查服务器上是否有新条目并在需要时加载它们。

我认为您需要一些时间来获得有关 ios 编程的基本知识，但这一点也不难。

你应该检查的事情：

*   要求
*   uitableview(/委托)
*   活动套件

有很好的教程来学习这些东西。

一个好网站： [http ://www.raywenderlich.com/](http://www.raywenderlich.com/)

# ios - iOS - 核心数据 - 使用关系和获取请求删除记录

> ID：10560406
> 
> 赞同：0
> 
> 时间：2012-05-12T01:48:35.750
> 
> 标签：ios, core-data, fast-enumeration, mutation

**概述：**

我有一个使用核心数据的 iOS 项目

*   我有一个`Employees`实体和一个`Department`实体。
*   1个部门可以包含很多员工
*   所以实体与实体`Department`之间存在“对多”关系`Employees`，这种关系称为关系`employees`，反向关系称为`whichDepartment`

**目标一：**

我想删除特定部门的所有员工

**问题：**

a) 以下是正确的，还是会导致突变或一些问题？

b）这是正确的方法吗？

**请注意**-`removeEmployees`是在创建实体的子类时自动生成的方法

```
- (void) deleteAllEmployeesForDepartment: (Department*) requestedDepartment
{
    [requestedDepartment removeEmployees:requestedDepartment.employees];
} 
```

**目标2：**

*   我想根据某些条件删除员工
*   我正在为获取的记录删除快速枚举循环中的对象

**问题：**

c）以下是正确的，还是会导致一些突变？

d) 是否像在快速枚举中修改对象？

e) 有更好的方法吗？

**请注意**-`removeEmployees`是在创建实体的子类时自动生成的方法

```
- (void) deleteAllType1EmployeesWithDepartment: (Department*) requestedDepartment
{ 
    fetchRequest.predicate = [NSPredicate predicateWithFormat:@"type == %i AND whichDepartment ==%i", 1, requestedDepartment.departmentID];

    NSError *error;
    NSArray *listOfEmployeesToBeDeleted = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];    

    for(Employees *currentEmployee in listOfEmployeesToBeDeleted)
    {       
       [self.managedObjectContext deleteObject:currentEmployee];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:11:54.190

首先，在您的情况下，以`deleteAllEmployeesForDepartment:`这种方式删除对象很好。

如果您还想从 Core Data 中删除 Employees 对象，那么您应该添加另一个规则，将*删除规则*设置为*cascade*，这意味着当`Employee`“丢失” a时`Department`（关系被破坏，要么是`Department`被删除，要么是`Department`删除`Employee`)，它 (the )`Employee`也被删除。

你的第二个问题更有趣一点。

我建议将另一种方法直接添加到 Department 的子类中`NSManagedObeject`，您可以调用它 -`clearEmployeesOfType:`传递类型编号。

由于您通过一对多关系`Department`引用了`NSSet`of ，因此您可以使用它，并且它是过滤掉您想要的那些的方法。`Employees``NSSet``filteredSetUsingPredicate:`

返回集可用于向`removeEmployees:`您的方法发送消息`Department`，有点像以下（警告，代码未测试）。

```
- (void) clearEmployeesOfType:(NSUInteger)type
{ 
    NSPredicate * predicate = [NSPredicate predicateWithFormat:@"SELF.type == %d", type];
    NSSet * firedEmployees = [self.employees filteredSetUsingPredicate:predicate];

    [self removeEmployees:firedEmployees];
} 
```

我会推荐这个解决方案，而不是加载对象并一一删除它们，只要可以，依赖关系并删除 Core Data 中的规则。

# architecture - 新项目的架构分析帮助

> ID：10560407
> 
> 赞同：2
> 
> 时间：2012-05-12T01:48:54.807
> 
> 标签：architecture, nosql, domain-driven-design, ravendb, aggregateroot

[http://i.stack.imgur.com/YZXZN.png](http://i.stack.imgur.com/YZXZN.png)（我目前不允许嵌入图像）

我真的可以对上面的班级模型使用一些帮助。我很惭愧地说，我是“那些”在大学学习面向对象、编写考试、取得优异成绩但从未着手在我的真实世界代码中实施这些原则的开发人员之一。在开始编写应用程序设计之前，我从未真正坐下来考虑过它。因此，在单一的遗留银行应用程序开发和维护的重压下，我的设计和编码技能一直在慢慢消亡和停滞不前。经过多年的努力，我决定是时候做出改变了！我一直在深入研究设计模式、DDD、NoSQL、DI 等领域。过去两周对我来说是一段非常紧张的经历，有时我想我在为大公司和银行工作时错过的大量最佳实践和技术几乎让我流下了眼泪。我简直不敢相信这么长时间以来我与尖端技术和良好的设计方法相距甚远，而突然发生的所有事情都可能使我陷入编码瘫痪状态！我根本无法开始编码，因为我觉得我的设计需要更多调整，或者我需要对特定主题进行更多研究。不过，够了，我需要继续努力，至少对项目进行第一次迭代。突然出现的所有事情都威胁到我进入编码瘫痪状态！我根本无法开始编码，因为我觉得我的设计需要更多调整，或者我需要对特定主题进行更多研究。不过，够了，我需要继续努力，至少对项目进行第一次迭代。突然出现的所有事情都威胁到我进入编码瘫痪状态！我根本无法开始编码，因为我觉得我的设计需要更多调整，或者我需要对特定主题进行更多研究。不过，够了，我需要继续努力，至少对项目进行第一次迭代。

无论如何，足够的戏剧，关于我的问题：

我已经开始为我的高尔夫应用程序创建模型。想在一定程度上坚持 DDD，也想利用 NoSQL (RavenDB)，我开始提出以下要求。

*   我的平台堆栈是 Windows / IIS / MVC 3.0 / RavenDB
*   我需要找到我的总根！我已经着手将它们定义为我的系统中唯一能够以自己的方式持续存在的元素。其他一切我都简单地认为是聚合的“子组件”。请注意，尚未定义实际行为。
*   我的聚合根将是唯一真正保留在我的 RavenDB 文档存储中的类，它们将“按原样”保留。就实现的性能优势而言，拥有大型树状类结构似乎是 RavenDB 的最佳情况。
*   我觉得不需要存储库层（一直在关注 Ayende 的一些帖子），因为 RavenDB API 感觉流畅且非常轻量级。如果需要，我将通过控制器上的自定义操作属性简单地打开和关闭我的会话。我已经看到如果没有存储库层测试可能会很棘手，但我肯定应该能够简单地模拟一些“内存中”域对象吗？
*   对数据库的写入将发生在单独的服务层中
*   有一次我停下来问自己：“我到底要把我的领域行为放在哪里！？”。搜索网络的普遍共识似乎表明我应该让我的域（实体）没有任何行为（业务逻辑），并将其全部在我的服务层中处理。但是在阅读了一些 Eric Evans 之后，我确信我的域行为应该存在于那里......在域中！

**问题** - 作为 DDD 和建筑设计领域的真正菜鸟，我至少是在正确的轨道上，还是注定要毁灭？- 任何想法、警告、建设性的批评和对上述内容的见解将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T03:15:28.860

为了应对这一切过于学术化并在分析中停留太久：首先让它发挥作用。然后让它变得漂亮。

尽可能将行为放在数据附近。使用无法明确地为类分配职责的服务（例如，“转账”方法是否应该在 SavingsAccount 类上？）。服务可以是聚合的一部分。

一定要使用存储库（我不同意 Ayende）。您提到使用单独的服务层进行数据库写入。Repository 是一个完美的接口，可以将该层放在后面。这也是一个完美的测试接缝。

没有彻底查看您的类图，但您可能在这里和那里过度使用继承。优先组合而不是继承。继承可以很快地抬起它丑陋的脑袋。

在选择聚合根时，一个重要的标准是生命周期。当聚合根死亡时，聚合中的其他所有内容也会死亡。聚合根也在控制之中，聚合之外的一切都通过它。如有疑问，只需创建很多（单个实体聚合）。使用文档数据库，您通常会为每个聚合存储一个文档，因此这与您选择它们​​的方式有些匹配。存储对不同聚合的引用的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T02:24:22.893

所以，是的，进入兔子洞不会在短期内提高你的生产力，但从长远来看可能会帮助你成为一名成熟的开发人员。DDD、NoSQL 等有很多东西，你可以花几年时间学习。

如果你希望你的下一个项目成功，我的建议是坚持你所知道的，并逐步引入新技术，这样你就可以始终感到完全掌控，而不是依赖于某人必须忍受的“最佳实践”你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:52:43.530

首先，我要祝贺您决定采取措施尝试变得更加专业。我对这个行业缺乏专业感到绝望，有时觉得我走在 80% 的牛仔/黑客和 20% 的专业人士之间。

对于你的问题：

*   你读过Vaughn Veron 的[这篇文章吗？](http://dddcommunity.org/library/vernon_2011)如果没有，你应该。它为设计聚合提供了**极好**的指南，我认为它的复杂性被低估了。
*   查看您的模型，我不确定您是否真的定义了聚合？我可以看到您已经确定了聚合*根*，但是聚合应该有明确的边界并且与其他聚合分开（即没有引用其他聚合根的实体，让它们引用它们的 ID）。属性名称*RefereeUserIDList* 暗示您实际上正在这样做，但图表显示它持有对实际“用户”聚合根的引用？
*   在识别聚合、根和模型设计方面，我认为我们不能在这里为您提供帮助，因为这完全取决于行为要求。不过我会说：尝试将您的设计基于*行为*，而不是数据结构。这是一个很难转变的心态，但尽量不要描绘数据库结构。
*   我还没有读过 Ayende 所说的关于存储库的内容，但只要你可以模拟 Raven API（我假设你可以给他制作 Rhino 模拟），那么这应该不是问题。
*   可能最重要的是，**不要将所有领域逻辑都放入服务层**。你最终会得到一个[贫血域模型](http://martinfowler.com/bliki/AnemicDomainModel.html)，它是相当于敌基督的 DDD。
*   就个人而言，在学习 DDD 时，我理解了所有的原则，但在尝试将理论转化为实践时却遇到了困难。如果我说实话，我会说我只是因为我了解了与 DDD 互补的校长[CQRS](http://martinfowler.com/bliki/CQRS.html)才真正成功。我真的建议您观看[Greg Young](http://codebetter.com/gregyoung/)的一些关于该主题的视频。

# javascript - 区分内部操作和ajax请求链接的最佳方法？

> ID：10560408
> 
> 赞同：0
> 
> 时间：2012-05-12T01:48:58.523
> 
> 标签：javascript, user-interface, hyperlink, action

因为[这个](https://ux.stackexchange.com/questions/21231/pattern-for-webapp-action-link-using-no-hash-fragment)主题变成了跨学科（但仍然是关于用户体验），所以我很好奇 javacript 开发人员对此有何看法。

我的网站处理`a`标签以ajax 请求`href`开头。`#`如果请求成功，则将文档哈希更改为适当的。现在我想实现调用内部 js 函数的操作链接，例如转到站点顶部，但我不想`javascript:myAction()`引用，因为当您通过链接时，大多数浏览器都会显示带有引用 url 的提示。可能我可以使用并成功处理自己的 url 架构`action:myAction`，但它还不够解决方案 - 用户仍然被暗示有关魔术 url。另一种选择是使用自定义属性`action="myAction"`，`href`例如自定义字符串`href="Go to top"`，但是浏览器兼容性如何？最后的解决方案是使用`span`样式为执行操作的链接 - 不会提示用户任何 url，但这是链接功能的一部分，建议执行操作（默认为 url）。

什么更好，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:19:53.467

我会首先以没有 JS 的用户可以使用它的方式编写所有内容，例如

```
<a href="#" title="Go to the top of the page">Go to top</a> 
```

然后我会在 DOM 加载后立即使用 JS 对其进行增强。首先添加`onclick`事件，然后删除`href`, 以避免任何链接提示（链接以外的任何其他内容可能不会通过任何验证器），最后是一个新的样式属性，光标在悬停时变为指针。

它是非常有用的[程序化渐进增强结构](http://icant.co.uk/articles/pragmatic-progressive-enhancement/)的一部分。通过这种方式，我可以获得有效且兼容的代码以及舒适的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T01:51:56.833

```
<script>
if(window.addEventListener)//Chrome, Firefox and Safari
    document.getElementById('myLink').addEventListener('click',function(e){
        var e = e || event;
        e.preventDefault();
        window.location = destiny;
    });
else//IE and Opera
    document.getElementById('myLink').attachEvent('onclick',function(e){
        var e = e || event;
        e.preventDefault();
        window.location = destiny;
    });
</script>
<a href="#" id="myLink">Link</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T02:03:17.520

您应该首先让您的链接在[*没有*JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的情况下工作。那么你就不用担心有人点击了`<a href='/customers'>Customers!</a>`。它运行良好并且易于访问。一旦达到这一点，您就可以将 JavaScript 放在首位以增强用户体验。如何连接所有这些取决于您 - 假设您想以通用方式处理删除，您可能具有如下所示的链接：

```
<a href='/customers/2' class='delete'>Delete customer</a>

<a href='/customers/2' data-action='delete'>Delete customer</a> 
```

或者，如果每个链接都是特定的，您可以设置 id 并以这种方式连接它：

```
<a href='/customers/2' id='delete'>Delete customer</a> 
```

所有这些连接都应该在一个外部 JavaScript 文件中完成。

# java - 从 ArrayList 问题中删除项目

> ID：10560410
> 
> 赞同：0
> 
> 时间：2012-05-12T01:49:30.737
> 
> 标签：java, arraylist

我正在编写一个具有从其他类中删除对象的方法的类。但它只是工作不正常，输出不正确。请帮我解决，有没有更好的解决方案，我认为我的解决方案很麻烦。这是我的代码：

```
public List<Task> getTaskDue(){        
    List<Task> temp = this.taskCollection;
    for (int unit = 0; unit < this.unitCollection.size(); unit++){            
        for (int j = 0; j < this.unitCollection.get(unit).getAssessmentCollection().size(); j++){
            for (int i = 0; i < temp.size(); i++){
                if (temp.get(i).getDueDate().compareTo(this.unitCollection.get(unit).getAssessmentCollection().get(j).getDueDate()) > 0)
                    temp.remove(i);
            }
        }  
    }
    return temp;
} 
```

更新：我有 Diary 类，其中包含具有截止日期属性的 Task 类和 Assessment 类的列表。我想创建一个方法，通过将日记类中的任务与评估类中的到期日期属性进行比较，返回一个包含过期任务列表的新列表。程序编译成功，但如果我想测试列表，结果不正确，因为没有任务过期，所以不返回任务项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T02:10:34.723

似乎从列表中“删除”元素不是您的最终问题。

您说您希望您的方法返回一个*新*列表，其中包含基于某些条件的 taskCollection 中的元素。同时，我认为您不想以任何方式破坏或更改 taskCollection。

因此，与其创建 temp 作为对 taskCollection 的引用，不如让它成为 a `new ArrayList<Task>()`。然后将任务添加到您希望最终从您的方法返回的临时（新列表）。

我将在此留下我的建议，因为您的代码示例，孤立地，有很多未知数，使我无法对您*真正*需要它做什么做出任何有根据的猜测。

另外，for循环太多了！（我主要是在开玩笑，但说真的……）

* * *

通过以下评论中的更多信息，我修改了您的代码以实现我的建议。为了将项目添加到 temp （而不是删除它们），我不得不将您的 if 语句从 更改`> 0`为`<= 0`. 此外，您应该从当前评估中获取任务并遍历这些任务，而不是在最内层循环中迭代 taskCollection。

```
public List<Task> getTaskDue(){     
    List<Task> temp = new ArrayList<Task>();

    for(int u = 0; u < unitCollection.size(); u++){
        Unit unit = unitCollection.get(u);

        for (int a = 0; a < unit.getAssessmentCollection().size(); a++){
            AssessmentItem assessment = unit.getAssessmentCollection().get(a);

            for (int t = 0; t < assessment.getTasks().size(); t++){
                Task task = assessment.getTasks().get(t);

                if (task.getDueDate().compareTo(assessment.getDueDate()) <= 0){ 
                    temp.add(task);
                }   
            }   
        }   
    }   
    return temp;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T01:52:06.077

如果您需要在迭代时更改列表，请使用 ListIterator。在您的列表上调用[listIterator()](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#listIterator%28%29)来创建一个，然后在 ListIterator 上查看相关方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T02:02:23.507

您正在从索引中删除一个对象，但迭代中的索引没有改变。由于您将跳过列表中的元素的原因。也许这就是您的结果不正确的原因。

改变：

```
if  ( temp.get( i ).getDueDate().compareTo( this.unitCollection.get( unit )
      .getAssessmentCollection().get( j ).getDueDate() ) > 0 )
    temp.remove(i); 
```

到：

```
if  ( temp.get( i ).getDueDate().compareTo( this.unitCollection.get( unit )
      .getAssessmentCollection().get( j ).getDueDate() ) > 0 )
{  
    temp.remove(i);  
    i--;  
} 
```

PS：无论条件或循环下的语句数量如何，最好始终练习使用花括号。

# php - 如何清理变量以防止 sql 注入 - 联合选择？

> ID：10560411
> 
> 赞同：1
> 
> 时间：2012-05-12T01:49:31.183
> 
> 标签：php, mysql, sql, sql-injection

我已经阅读了许多防止 sql 注入的文档。他们说使用`PDO`and `mysql_real_escape_string`。

我编写 BBS 代码（旧式...），人们使用我的 BBS 代码，执行一些简单的代码，例如：

```
select * from $g4[member_table] where mb_id='$mb_id' and mb_1='$my_option' 
```

`$mb_id`做`mysql_real_escape_string` 但`$my_option`不做。所以我想使用像 clean_sql() 这样的 php 函数来清理所有`$_GET`, `$_POST`, `$_REQUEST`varibales。

clean_sql() 当 $my_option 值为 "1' union select * from g4_member where mb_id='admin'" 时清除所有 sql 语句

请让我知道像 clean_sql() 这样的函数？

=== clear_sql 必须与 php 4.x 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T01:50:48.620

无论您是否使用 UNION，SQL 注入的最佳实践都是相同的。`$_POST`,`$_GET`或`$_REQUEST`任何其他形式的用户提供的数据也是如此。使用准备好的语句（通过 PDO 或 MySQLi）或`mysqli_real_escape_string()`.

当然，您应该更进一步，在尝试将用户提供的数据保存到数据库*之前对其进行验证和清理。*[`filter_var()`](http://us3.php.net/manual/en/function.filter-var.php)类似和的函数[`ctype_*`](http://us3.php.net/manual/en/book.ctype.php)是验证和/或清理数据的简单方法。

# asp.net - 为什么 Membership.CreateUser 失败？

> ID：10560414
> 
> 赞同：2
> 
> 时间：2012-05-12T01:50:34.137
> 
> 标签：asp.net, asp.net-membership

对于这个[重载](http://msdn.microsoft.com/en-us/library/d8t4h2es)：

如果`CreateUser("username@email.com","pwd")`，失败并显示错误消息：提供的电子邮件地址无效。请检查值并重试。

但是`CreateUser("username@email.com","pwd","username@email.com")`，成功！

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T02:26:21.170

考虑这样的方法可能会更好：

```
CreateUser(Username, Password);

CreateUser(Username, Password, Email); 
```

如果不反映代码，我不能肯定地说 100%，但我敢打赌，这些函数只是调用一个内部函数，该函数接受所有可能的参数。

所以你的第一个电话（简化）实际上是：

```
CreateUser("username@email.com", "pwd", null); 
```

如果您已将您的提供商配置为要求电子邮件地址，那么显然`null`是无效的。

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/d8t4h2es)：

> SqlMembershipProvider 提供了一个选项，要求每个用户都有一个唯一的电子邮件地址。**如果 RequiresUniqueEmail 属性为 true，您将需要使用 CreateUser 重载之一，该重载允许您为正在创建的用户指定电子邮件地址。** 否则，将抛出 MembershipCreateUserException。

# asp.net-mvc-3 - 为什么我得到 ModelState.IsValid = false？

> ID：10560418
> 
> 赞同：1
> 
> 时间：2012-05-12T01:51:37.243
> 
> 标签：asp.net-mvc-3

我有一个更新控制器操作，它在表单发布时被调用。在表单中有一个单选按钮，用于控制下拉字段的可见性如果下拉字段可见并且我发布表单，则数据库更新正常并且 ModelState 有效。

当下拉字段隐藏并且我发布表单时，它会发布并更新数据库。但是 ModelState.IsValid = false 并且下拉列表被报告为缺失值。

如何解决这个问题？

```
[HttpPost]
public ActionResult Update(ResponseModel model)
{
   //ModelState.IsValid = false when dropdown field hidden

   //validate form fields
   //update database

   //if we are here, then db update successful
   AjaxResponse.AddJsonItem("msg", "Success");
   return Result();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T02:17:18.747

可能是您的 ResponseModel 有一个用一些数据注释（如 [Required] ）注释的属性，当您取消选中您的单选框时，该属性没有得到值。

发布您的模型并发布您在状态无效时收到的值（通过签入调试器）。

* * *

因为你只有一个属性，那就是整数。您的模型状态无效，因为整数不能有空值。当您将其隐藏时，模型对 int 属性没有价值。要么用单选框上的隐藏字段替换下拉列表，要么将其设为可为空的 int。

# scala - Scala 仅具有重载提取器的语言？

> ID：10560422
> 
> 赞同：5
> 
> 时间：2012-05-12T01:52:03.317
> 
> 标签：scala, f#, programming-languages, functional-programming, pattern-matching

在至少一些 ML 家族语言中，您可以定义可以在其上执行模式匹配的记录，例如[http://learnyouahaskell.com/making-our-own-types-and-typeclasses](http://learnyouahaskell.com/making-our-own-types-and-typeclasses) - 基本思想是您定义一个具有命名字段的记录类型，使用这些字段作为参数自动创建构造函数，以便您可以创建该类型的记录，并且使用这些字段作为参数自动创建提取器，以便您可以对该类型的记录进行模式匹配。

Scala 更进一步，允许存储在记录中的字段、构造函数参数和提取器参数彼此分离，例如[http://daily-scala.blogspot.com/2009/11/overloaded-unapply.html](http://daily-scala.blogspot.com/2009/11/overloaded-unapply.html) -在这方面，它实现了支持面向对象和函数式编程的目标。（当然，面向对象的语言通常允许将存储的字段和构造函数参数解耦，尽管它们通常没有提取器。）

是否有其他语言具有模式匹配并允许这种解耦？

有没有关于这种脱钩的利弊的文章？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T04:46:42.903

我承认我没有 100% 的背景知识来理解您的问题，但我可以说 F# 有一个名为“ [Active Patterns](http://en.wikibooks.org/wiki/F_Sharp_Programming/Active_Patterns) ”的功能，它似乎可用于构建与您的`daily-scala`链接演示相同的功能。

那是在你要找的附近吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T07:44:55.267

不，F# 也提供了该功能。

第二篇文章中的示例可以使用[部分活动模式](http://msdn.microsoft.com/en-us/library/dd233248.aspx)来实现：

```
let (|String|_|) = function "s" -> Some "yay" | _ -> None
let (|Int|_|) = function 1 -> Some "hmm" | _ -> None

let (|StringList|_|) = function "x" -> Some [1; 2; 3] | _ -> None
let (|IntList|_|) = function 1 -> Some ["one"; "two"] | _ -> None

match 1 with 
| Int s -> printfn "%O" s 
| _ -> printfn "Unmatched"

match "s" with 
| String s -> printfn "%O" s 
| _ -> printfn "Unmatched"

match "x" with 
| StringList [x; y; z] -> printfn "%O" (x, y, z) 
| _ -> printfn "Unmatched"

match 1 with 
| IntList [x; y] -> printfn "%O" (x, y) 
| _ -> printfn "Unmatched" 
```

Active Patterns 是一种强大的技术，你甚至可以用[递归](http://fsharpnews.blogspot.com/2010/12/parsing-mathematical-expressions-using.html)的方式来编写它。它与模式匹配的结合为解构数据提供了一个方便的工具包。但是，模式匹配并不详尽，因此您必须使用通配符（`_`）作为最后一个模式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-14T13:56:48.590

作为参考，Don Syme（F# 的发明者）写了一篇关于 F# 的“活动模式”的论文：[Extensible Pattern Matching Via a Lightweight Language Extension – Syme 等。](http://research.microsoft.com/pubs/79947/p29-syme.pdf)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-14T18:27:00.040

类型化函数式语言中的一流模式由来已久。

在 Haskell 领域，我们使用[`-XViewPatterns`](http://hackage.haskell.org/trac/ghc/wiki/ViewPatterns)程序化模式的扩展。

第一个真正的视图模式可以追溯到 Phil Wadler 1987 年关于[视图的论文](http://homepages.inf.ed.ac.uk/wadler/papers/view/view.ps)

# javascript - 用JS写一个noscript标签

> ID：10560427
> 
> 赞同：3
> 
> 时间：2012-05-12T01:53:19.147
> 
> 标签：javascript, dom

你有什么实际的理由`<noscript>`用 JavaScript 写一个标签`document.write()`吗？我们的广告部门多年来一直这样做，并且在我指出之后仍然这样做。我有 99% 的把握，这是由于一个古老的广告模板所写的，这个模板是由一个不知道自己在做什么的人编写的，也没有人想过要更改它，因为“为什么要修复没有损坏的东西？” 或者，也许有人错误地阅读了他们的“最佳实践”（“始终包括禁用 JS 的浏览器的替代方案”）。或者也许有一个我不知道的很好的理由。

我能想到的唯一可以想象的事情是，您可以使用它来修改 DOM 而不会在页面上显示它，并且可能将这些内容用作模板以供以后使用，但这似乎很牵强。

（编辑）

在这种情况下，标签包含一个标准`<a href="/path/to/advertiser"><img src="/path/to/image" /></a>`. 因为这是原始的非动态广告代码的样子，所以这让我觉得这只是复制粘贴的垃圾。

我应该说的另一件事是，我不能 100% 确定这是一个过度网站的原因是因为最近将 html 模板放入其中的模式`<script type="text/x-my-custom-template">...</script>`。我怀疑我们这边的某个人会自己想出这个，但这可能是一个非常聪明的人的标准广告实践。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T01:57:31.923

> 有什么实际的理由让你`<noscript>`用 JavaScript 写一个标签`document.write()`

没有。两者 (`<script>`和`<noscript>`) 是互斥的。这就像写一段这样的代码：

```
if (true && false) {
    // do something important
} 
```

* * *

如果启用了 JavaScript，浏览器将忽略该`<noscript>`标记。另一方面，如果 JavaScript 被禁用，`<noscript>`则永远不会写入标签，因为`<script>`标签会被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-21T21:35:38.507

这用于机器人检测/指纹识别。

例如，如果我使用

```
document.write('<script src='...'>...</script><noscript><img>....</noscript>'); 
```

Chrome 55+ 阻止从`document.write()`. `<noscript>`这意味着尽管来自“脚本”，但 上述内容实际上将在某些/较新版本的 chrome 上运行。

假设的目的是，如果机器人假装是（通过欺骗其用户代理）特定版本的 chrome，并且脚本没有被阻止，它将指出它不是*真正*的chrome（机器人）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-15T08:04:20.453

您可以在特定的 html 标记中添加子节点。

```
var noscript = document.createElement('noscript')
var iframe = document.createElement('iframe')
iframe.setAttribute('src', "<your source>")
iframe.setAttribute("height", "0")
iframe.setAttribute("width", "0")
iframe.setAttribute("style", "display:none;visibility:hidden")
noscript.appendChild(iframe)
document.body.appendChild(noscript) 
```

# github - 更改 Github 的默认 Gist 样式

> ID：10560435
> 
> 赞同：14
> 
> 时间：2012-05-12T01:54:31.717
> 
> 标签：github, syntax-highlighting

是否可以以编程方式或通过某些界面更改 Github 的要点默认样式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T20:02:00.303

我不知道有任何 API 或接口会影响 Gist 在 GitHub 上的呈现方式。

如果您将这些要点包含在您的博客中，那么一些 CSS 本地更改当然可以使您的要点有所不同，如本[博](http://hassannadeem.com/blog/2015/12/28/custom-dimentions-embedded-github-gists/)文、[本 CSS](https://stackoverflow.com/a/22950924/6309)或[本 CSS 所示](https://gist.github.com/910409#file_rounded_box_gist.css)。

但是，这与语法高亮无关。
您只能通过自定义样式表共享这些要点，例如[Octopress](http://octopress.org/docs/blogging/code/)，使用Solarized [syntax highlighting](http://ethanschoonover.com/solarized)的 Sass 端口。
但同样，这不会改变 GitHub 本身的那些要点介绍。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-09T14:34:51.703

可能我在聚会上迟到了，但你可以通过用你想要的颜色编辑[默认的 CSS 来创建你自己的 CSS。](https://assets-cdn.github.com/assets/gist-embed-04d41fe71632a896c1dd3e883de9f48941fad414d68185aa8df817b950873a05.css)我做了同样的事情，但不是在博客中粘贴所有的 CSS，我更喜欢链接它

看看这是否适合你

```
<link href="https://cdn.rawgit.com/Killercodes/281792c423a4fe5544d9a8d36a4430f2/raw/36c2eb3e0c44133880485a143717bda9d180f2c1/GistDarkCode.css" rel="stylesheet" type="text/css"> 
```

你也可以在这里找到它：[GistDarkCode.css](https://gist.github.com/Killercodes/281792c423a4fe5544d9a8d36a4430f2)我让它看起来全黑

[![Gist 黑暗主题](../Images/f919c35f675d7fbd67c405f630c010e4.png)](https://i.stack.imgur.com/IBADl.jpg)

**编辑：** 我发现markdown（* .md）文档仍然是白色的，这已在这个[新版本0.3.0](https://gist.github.com/Killercodes/281792c423a4fe5544d9a8d36a4430f2#file-gistdarkcode-css)中得到修复，字体大小增加到**14px**以使其看起来更大，试试下面的新版本

```
<link href="https://cdn.rawgit.com/Killercodes/281792c423a4fe5544d9a8d36a4430f2/raw/42e5b91a60ea5e25b7bb42c0a315d9e740c92f0/GistDarkCode.css" rel="stylesheet" type="text/css"> 
```

[![在此处输入图像描述](../Images/b78ce441ddcc44ccd4f7e5beae37a39c.png)](https://i.stack.imgur.com/vtRNI.jpg)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T11:16:26.717

对于嵌入式 Gist，有[Pretty Gist](http://www.joepettersson.com/demo/pretty-gist/)

> Pretty Gist 是一个 jQuery 插件，用于制作更漂亮、功能更强大的嵌入式 Github Gist。

[Github 仓库](https://github.com/JoePettersson/pretty-gist)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-14T16:14:58.567

是的，有不同的属性来控制 GitHub gist 的默认 css。我在这个项目中进行了各种自定义，并确保我在嵌入的 js 之后定义了属性 - [https://github.com/tebelorg/TA.Gist](https://github.com/tebelorg/TA.Gist)（将您的 GitHub 要点显示为博客文章的 PHP 模板）

# r - 按两个变量对最低分数进行分组

> ID：10560437
> 
> 赞同：2
> 
> 时间：2012-05-12T01:56:12.510
> 
> 标签：r

我有一张看起来像这样的桌子

```
uid gid score
1   a   5
1   a   8
1   a   9
1   b   2
1   b   7
2   a   5
2   a   9
.
.
. 
```

但是每个用户和组都有更多条目。

我想得到一个表格，其中每个 uid/gid 配对都有一行，这是他们最低 5 分的平均值。

这在使用数据透视表的 Excel 中是微不足道的，但我需要做一些 R 更适合的分析。

所以我希望我的结果看起来像

```
uid gid top5avg
1   a   4.3
1   b   5.7
2   a   3.5
2   b   6.8
.
.
. 
```

每个 uid gid 对有一行，然后是该 uid/gid 对的前五个分数的平均值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T02:13:42.567

这在 R 中更加微不足道，假设您的数据框被调用`dat`并且您的真正意思是最低 5 分（即使您的示例建议前 5 位）：

```
library(plyr)
ddply(dat,.(uid,gid),summarise,bottom5avg = mean(tail(sort(score),5))) 
```

请注意，此代码假定每组中至少有 5 个观察值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T02:17:29.870

如果您的数据被称为 dat 这将起作用：

```
aggregate(score~uid+gid, data=dat, function(x) mean(sort(x)[1:5])) 
```

**编辑：** 如果你的意思与我所拥有的相反（底部 5），正如 Joran 所指出的（我也很困惑），那么使用`rev`如下：

```
aggregate(score~uid+gid, data=dat, function(x) mean(rev(sort(x))[1:5])) 
```

或者使用`tail`Joran 提出的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T12:19:26.470

以及`data.table`解决方案

```
library(data.table)
setkey(dat,uid,gid,score)
sol <- dat[,list(avg5 = mean(tail(score,5)),by='uid,gid']) 
```

# facebook - 将 Facebook Canvas 按钮从“转到应用程序”更改为“使用 Facebook 登录”

> ID：10560439
> 
> 赞同：0
> 
> 时间：2012-05-12T01:57:26.073
> 
> 标签：facebook, facebook-canvas

我创建了一个 Facebook 画布。我正在寻找一种将画布按钮从“转到应用程序”更改为“使用 Facebook 登录”的方法，如附图所示。做了一些研究，但在这个问题上找不到任何东西。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:34:22.703

一个是嵌入在 Canvas 中的应用程序：即“转到应用程序”。

另一种是未嵌入画布的网站，即“登录”网站。

* * *

要更改它，您需要使用自定义登录按钮将用户返回到不在 Canvas 中的保留网页。（您还需要在 Facebook 开发者应用设置页面中设置这个“网站”）。在登录网页中，一旦用户接受了应用权限，您就可以将其踢回画布。可能不值得为没有人阅读的按钮而烦恼？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:40:15.743

只需在 URL 中添加一个 respon=token 参数，它会显示“使用 facebook 登录”而不是“转到应用程序”

[http://www.facebook.com/dialog/oauth/?scope=publish_stream&client_id=198583033513325&redirect_uri=myUrll&](http://www.facebook.com/dialog/oauth/?scope=publish_stream&client_id=198583033513325&redirect_uri=myUrll&) **response_type=token** &display=popup

# android - 在 NDK 中更改 Android 陀螺仪更新速率

> ID：10560443
> 
> 赞同：0
> 
> 时间：2012-05-12T01:58:09.880
> 
> 标签：android, gyroscope

我正在使用带有陀螺仪、磁力计和加速度计的三星 Galaxy sii 手机。一切都在使用NDK。

我正在使用 toadlet 库来抽象出很多电话接口，但在该库中，有一个函数可以设置采样率，该函数调用预期的 NDK 函数：

```
void AndroidSensorDevice::setSampleTime(int dt){
    if(mSensor!=NULL){
        ASensorEventQueue_setEventRate(mEventQueue,mSensor,dt*1000);
    }
} 
```

当我改变加速度计和磁力计的采样率时，我大致看到了实际采样率的预期变化。但是，对于陀螺仪，它总是以最快的速度更新，即无论我将采样率设置为多少，我都会得到类似于以下的时间差：

```
I/toadlet (10266): dt= 0.619000
I/toadlet (10266): dt= 4.423000
I/toadlet (10266): dt= 0.511000
I/toadlet (10266): dt= 4.335000
I/toadlet (10266): dt= 0.586000
I/toadlet (10266): dt= 4.371000
I/toadlet (10266): dt= 0.586000
I/toadlet (10266): dt= 4.559000
I/toadlet (10266): dt= 0.340000
I/toadlet (10266): dt= 3.827000
I/toadlet (10266): dt= 0.617000
I/toadlet (10266): dt= 5.337000
I/toadlet (10266): dt= 0.154000
I/toadlet (10266): dt= 3.538000
I/toadlet (10266): dt= 0.556000
I/toadlet (10266): dt= 4.547000 
```

即使尝试大得离谱的采样率也没有效果。有没有其他人看过这个？

手机运行的是 Android 2.3.5，我尝试同时使用 android-9 和 android-14 目标，没有明显区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:01:46.543

根据该`setEventRate()`函数的文档，您设置的采样率实际上只是一个提示，而不是明确的规范。虽然您看到的行为是不受欢迎的，但这并没有错。由于大多数应用程序无论如何都需要集成陀螺仪输出，因此这种行为并非完全不合理。如果您真的需要较低的速率，我建议将样本平均在一起并根据时间戳读出结果。

```
/*
 * Sets the delivery rate of events in microseconds for the given sensor.
 * Note that this is a hint only, generally event will arrive at a higher
 * rate. It is an error to set a rate inferior to the value returned by
 * ASensor_getMinDelay().
 * Returns a negative error code on failure.
 */
int ASensorEventQueue_setEventRate(ASensorEventQueue* queue, ASensor const* sensor, int32_t usec); 
```

# java - java.io.FileNotFoundException（访问被拒绝）

> ID：10560444
> 
> 赞同：0
> 
> 时间：2012-05-12T01:58:28.350
> 
> 标签：java, windows, linux, browser, applet

```
File posisifileXML = new File("namefile.xml");
Writer outXML = new BufferedWriter(new FileWriter(posisifileXML));
outXML.write(String1);
outXML.close(); 
```

我在Linux中创建了Java小程序，该程序用于创建一个`namefile.xml`，当我从浏览器（使用该Linux）访问Java小程序以创建文件时，它可以工作。该文件保存在我的主目录中。但问题是当我使用另一台计算机（Windows 7）从浏览器访问该 Java 小程序时，出现错误：

```
java.io.FileNotFoundException:namefile.xml (Access is denied) 
```

哦对不起，我想通过客户端的浏览器（使用java小程序）从客户端计算机（Windows 7）创建一个文件到服务器计算机。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:11:57.827

你应该已经发布了代码:(

但是，当我使用 Applets 时，由于以下两个问题，我遇到了同样的问题

1.  访问受到 Windows 的限制（有时用户权限可以做到这一点。即：在我的机器上，很难访问 C:/Desktop 的程序）
2.  忘记使用策略工具授予权限
3.  该程序正在寻找现有文件，但没有这样的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T02:29:23.150

```
File posisifileXML = new File("namefile.xml"); 
```

切勿将`File`小程序中的 a 转储到“默认目录”中。使之类似于：

```
File posisifileXML = new File(
    new File(System.getProperty("user.home")), 
    "namefile.xml"); 
```

* * *

> 我想通过客户端的浏览器从客户端的计算机（Windows 7）创建一个文件到服务器的计算机..

客户端计算机上的小程序不能`File`在服务器上创建或访问，安全性除外。文件对象就是不能那样工作。

为了从用户那里获取信息以保存在服务器文件系统上，需要服务器的帮助。

# android - 使用 phoneGap 在地图上显示用户当前位置

> ID：10560445
> 
> 赞同：0
> 
> 时间：2012-05-12T01:58:34.333
> 
> 标签：android, google-maps, cordova, google-maps-api-3

我正在尝试使用 phoneGaps getCurrentPosition 函数在地图上显示用户当前位置，但我不只是想要用户的纬度和经度，我想要他们当前所在的实际位置示例状态、街道名称、国家名称等。如果有人能指出我正确的方向，我会非常适合它（电子书、网络链接、博客文章、代码片段任何东西）。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:20:28.393

您需要将 lat/lng 反向地理编码为地址。谷歌有一个 API：[https ://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

# python - 如何从 Python 中的精灵表中选择精灵图像？

> ID：10560446
> 
> 赞同：9
> 
> 时间：2012-05-12T01:58:35.200
> 
> 标签：python, pygame

我想导入一个精灵表并选择一个精灵。我将如何在 Python/pygame 中执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T19:50:42.740

上面的 spritesheet loader 是一个很好的方法。基于该代码，我制作了适用于任何 spritesheet 的通用函数：

```
#!/usr/bin/python
#
# Sprite Sheet Loader - hammythepig
#
# Edited by Peter Kennedy
#
# License - Attribution - hammythepig
    #http://stackoverflow.com/questions/10560446/how-do-you-select-a-sprite-image-from-a-sprite-sheet-in-python
#
# Version = '2.0'

import pygame,sys
from pygame.locals import *

def sprite_sheet(size,file,pos=(0,0)):

    #Initial Values
    len_sprt_x,len_sprt_y = size #sprite size
    sprt_rect_x,sprt_rect_y = pos #where to find first sprite on sheet

    sheet = pygame.image.load(file).convert_alpha() #Load the sheet
    sheet_rect = sheet.get_rect()
    sprites = []
    print sheet_rect.height, sheet_rect.width
    for i in range(0,sheet_rect.height-len_sprt_y,size[1]):#rows
        print "row"
        for i in range(0,sheet_rect.width-len_sprt_x,size[0]):#columns
            print "column"
            sheet.set_clip(pygame.Rect(sprt_rect_x, sprt_rect_y, len_sprt_x, len_sprt_y)) #find sprite you want
            sprite = sheet.subsurface(sheet.get_clip()) #grab the sprite you want
            sprites.append(sprite)
            sprt_rect_x += len_sprt_x

        sprt_rect_y += len_sprt_y
        sprt_rect_x = 0
    print sprites
    return sprites

#VERSION HISTORY

    #1.1 - turned code into useable function

    #2.0 - fully functional sprite sheet loader 
```

作为参考，这会将工作表从左到右一次一排地切割成单独的精灵。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T18:49:19.567

我做了这个，你可能会感兴趣：

```
import pygame, sys
from pygame.locals import *

SCREEN_X=400
SCREEN_Y=400
#Screen size

SPRT_RECT_X=0  
SPRT_RECT_Y=0
#This is where the sprite is found on the sheet

LEN_SPRT_X=100
LEN_SPRT_Y=100
#This is the length of the sprite

screen = pygame.display.set_mode((SCREEN_X, SCREEN_Y)) #Create the screen
sheet = pygame.image.load('C:\YOURFILE') #Load the sheet

sheet.set_clip(pygame.Rect(SPRT_RECT_X, SPRT_RECT_Y, LEN_SPRT_X, LEN_SPRT_Y)) #Locate the sprite you want
draw_me = sheet.subsurface(sheet.get_clip()) #Extract the sprite you want

backdrop = pygame.Rect(0, 0, SCREEN_X, SCREEN_Y) #Create the whole screen so you can draw on it

screen.blit(draw_me,backdrop) #'Blit' on the backdrop
pygame.display.flip()
#Draw the sprite on the screen 
```

希望我能帮上忙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T20:09:00.033

aquasheep 发布的上述代码非常棒！虽然在行：
`for i in range(0,sheet_rect.height-len_sprt_y,size[1]):#rows`
`for i in range(0,sheet_rect.width-len_sprt_x,size[0]):#columns`

我不得不删除它`-len_sprt_y`，`-len_sprt_x` 它只是不会加载 x 和 y 轴上的最后一个精灵。它可能会根据精灵表 x、y 大小和实际精灵大小而有所不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-29T10:20:34.700

你不需要打电话`set_clip`，`get_clip`正如其他答案中提到的那样。只需将一个矩形、元组或列表传递给[`Surface.subsurface`](http://www.pygame.org/docs/ref/surface.html#pygame.Surface.subsurface).

```
# The size of a sprite in this example is 64x64 pixels.
x_coord = 64 * 2  # This would be the third column.
y_coord = 64 * 3  # Fourth row.
width = 64
height = 64

sheet = pygame.image.load('your_sprite_sheet.png').convert_alpha()
single_image = sheet.subsurface((x_coord, y_coord, width, height)) 
```

# jquery - Ajax 页面刷新失败

> ID：10560449
> 
> 赞同：0
> 
> 时间：2012-05-12T02:00:16.493
> 
> 标签：jquery, ajax, refresh

每当按钮提交表单（并更改页面上的数据）时，我都会尝试使用 ajax 刷新页面，但是它；不管用。我浏览了几个教程和 api，检查了我的语法，但我无法让它工作。你能看一下吗？更新本身在 2 种方法中调用成功，这些方法确实成功。更新本身的方法 update(ajax)。

提前致谢。

编辑：没有浏览器错误或任何东西。该页面根本不刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:19:46.687

您声明了 xmlhttp 并检查了请求对象的状态（不存在）。

```
 if (request.readyState == 4 && request.status == 200)
        cont.innerHTML = request.responseText;}, false); 
```

在上面的代码行中用 xmlhttp 替换请求。

# php - 通过 PHP 为回显数据分配一个数字

> ID：10560450
> 
> 赞同：0
> 
> 时间：2012-05-12T02:00:18.223
> 
> 标签：php, sql-server, database

此代码根据 select 语句中表达的条件选择前五行，然后从 number 指定的列中获取数据，然后将返回的数据回显到页面。

```
if( $connect === false )
{
  echo "Could not connect.\n";
  die( print_r( sqlsrv_errors(), true));
}

/* Select Statement */
$select = "SELECT TOP(5)name, lv FROM Character WHERE lv > 0 AND name NOT LIKE '%@%' AND name NOT LIKE '%[GM]%'
AND name NOT LIKE '%[GA]%' AND name NOT LIKE '%[DEV]%' ORDER BY lv DESC ";

/* Execute the query. */
$query = sqlsrv_query( $connect, $select);

if ( $query )
{
} 
else 
{
  echo "Error in statement execution.\n";
  die( print_r( sqlsrv_errors(), true));
}

/* Iterate through the result set printing a row of data upon each
iteration.*/
while( $row = sqlsrv_fetch_array( $query, SQLSRV_FETCH_NUMERIC))
{
 echo "<b>Name</b>: &nbsp;".$row[0]." <br/>";
 echo "<b>Level</b>: &nbsp;".$row[1]."<br/>";
 echo "<br/>";

}

/* Free statement and connection resources. */
sqlsrv_free_stmt( $query);
sqlsrv_close( $connect);
?> 
```

我需要它做的是回显的数据，必须有一个数字，例如：更高的级别将是第一个等等。这已经按级别对数据进行了排序，但我无法为每个名称回显一个数字。我的想法是让它们出现在 ol 中，每个用户名都在 li 中，因此默认情况下，您可以设置列表样式以按顺序显示数字。然后我想不出该怎么做。你能给我一些提示吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:04:24.167

我想这就是你要找的。它将在每个名称前打印一个数字。

```
$counter = 1;
while( $row = sqlsrv_fetch_array( $query, SQLSRV_FETCH_NUMERIC))
{
 echo $counter.". <b>Name</b>: &nbsp;".$row[0]." <br/>";
 echo "<b>Level</b>: &nbsp;".$row[1]."<br/>";
 echo "<br/>";
 $counter++;
} 
```

# gwt - 创建列列表？

> ID：10560453
> 
> 赞同：1
> 
> 时间：2012-05-12T02:00:53.670
> 
> 标签：gwt

我刚刚从`GWT`官方网站学习了 MVP 架构，现在我想使用 CellTable 开发我的应用程序。但我坚持添加列定义部分。如何创建列接口的arraylist 实例（用于单元格表）。我试过但我只能指定行类型，列类型是动态的，比如

```
ArrayList<Column<CategoryClient, C>> 
```

所以调试器一直说 C 不能解析为一个类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:31:51.507

您可以使用以下方法来实现您的要求。

```
private <C> Column<CategoryClient, C> addColumn(Cell<C> cell, String headerText,
      final GetValue<C> getter, FieldUpdater<CategoryClient, C> fieldUpdater) {
    Column<CategoryClient, C> column = new Column<CategoryClient, C>(cell) {
      @Override
      public C getValue(ContactInfo object) {
        return getter.getValue(object);
      }
    };
    column.setFieldUpdater(fieldUpdater);
    if (cell instanceof AbstractEditableCell<?, ?>) {
      editableCells.add((AbstractEditableCell<?, ?>) cell);
    }
    contactList.addColumn(column, headerText);
    return column;
  } 
```

# osx-snow-leopard - sublime 文本后缀映射

> ID：10560455
> 
> 赞同：4
> 
> 时间：2012-05-12T02:01:28.440
> 
> 标签：osx-snow-leopard, file-extension, sublimetext2, text-coloring

是否可以将 sublime text 2 打开的文件的后缀映射为与其他语言相似以获取文本着色？例如，当我打开 *.cu 文件时，sublime 文本无法将其识别为有效的文件扩展名，因此它会打开文件并且其中根本没有文本着色。但是，如果您打开 php 或 c++ 文件，该文件将被识别为有效的文件扩展名，并且会有文本着色，使其更易于阅读。

我知道 text wrangler 具有此功能，并且您将 *.cu 文件扩展名设置为与 c++ 类似，因此当您打开 .cu 文件时，文本着色将类似于 c++ 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T09:34:10.943

是的。

请参见：

[http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers/](http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers/)

->

*将文件格式映射到语法高亮*

# ruby-on-rails - Rails 错误：无法批量分配受保护的属性：interest_ids？

> ID：10560458
> 
> 赞同：10
> 
> 时间：2012-05-12T02:02:31.180
> 
> 标签：ruby-on-rails, associations

我正在使用多步表单（使用 Wicked gem）。在表单的前几个步骤中，我正在编辑用户模型，这些步骤工作正常。然后我尝试与用户模型具有 HABTM 关系的“兴趣”模型。但是我收到此错误：

```
ActiveModel::MassAssignmentSecurity::Error in UserStepsController#update

Can't mass-assign protected attributes: interest_ids
Rails.root: /Users/nelsonkeating/rails_projects/Oreminder1

Application Trace | Framework Trace | Full Trace
app/controllers/user_steps_controller.rb:12:in `update' 
```

user_steps_controller.rb

```
 class UserStepsController < ApplicationController
  include Wicked::Wizard
  steps :standard, :personal, :interests, :dates 

 def show
   @user = current_user
   render_wizard
 end

 def update
  @user = current_user
  @user.attributes = params[:user]
 render_wizard @user
end

end 
```

观点如下：

```
<%= render layout: 'form' do |f| %>

<% for interest in Interest.find(:all) %>
 <label class="checkbox">
  <%= check_box_tag "user[interest_ids][]", interest.id, @user.interests.include?(interest) %>
  <%= interest.name %>
 </label>
<% end %>

<% end %> 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-12T02:48:02.843

您可以通过将其添加到您的用户模型来消除此错误：

```
attr_accessible :interest_ids 
```

如果没有这个`interest_ids`属性，则可以防止[大量赋值](http://guides.rubyonrails.org/v3.2.13/security.html#mass-assignment)，并且当您尝试为其赋值时，无论如何都会引发异常。

# linux - linux /进程/ /exe & valgrind

> ID：10560460
> 
> 赞同：0
> 
> 时间：2012-05-12T02:03:13.943
> 
> 标签：linux, valgrind

根据手册页 /proc/pid/exe 是一个符号链接，其中包含已执行命令的实际路径。

当我在我的程序上运行 valgrind 时，我看到*/proc/pid/exe*指向*/usr/lib64/valgrind/amd64-linux/memcheck*

```
lnx-host> which valgrind
/usr/bin/valgrind 
```

知道为什么 /proc/pid/exe 在我将其作为 valgrind 调用时指向 usr/lib64/valgrind/amd64-linux/memcheck 吗？

在我的代码中，我试图从 pid 中获取可执行文件名，在这种情况下希望看到 valgrind。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T02:08:01.537

`memcheck`是 Valgrind 使用的默认工具，除非您告诉它使用其他工具，例如`callgrind`.

用于`--tool=<name>`指定要调用的工具。

旁注：你`/usr/bin/valgrind`也是一个脚本，就像默认情况下一样？为什么不玩它来做你想要实现的目标？在我的系统上，首先调用`/usr/bin/valgrind.bin`相应的（后端）工具（`/usr/lib/valgrind/memcheck-amd64-linux`）。

* * *

相关输出`strace`：

```
execve("/usr/bin/valgrind", ["valgrind", "./myprog"], [/* 35 vars */]) = 0
stat("/home/user/HEAD/myprog", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
execve("/usr/bin/valgrind.bin", ["/usr/bin/valgrind.bin", "./myprog"], [/* 39 vars */]) = 0
open("./myprog", O_RDONLY)              = 3
execve("/usr/lib/valgrind/memcheck-amd64-linux", ["/usr/bin/valgrind.bin", "./myprog"], [/* 40 vars */]) = 0
getcwd("/home/user/HEAD/myprog", 4095) = 25
open("./myprog", O_RDONLY)              = 3
stat("./myprog", {st_mode=S_IFREG|0755, st_size=1886240, ...}) = 0
readlink("/proc/self/fd/3", "/home/user/HEAD/myprog/myprog", 4096) = 31
readlink("/proc/self/fd/3", "/home/user/HEAD/myprog/myprog", 4096) = 31
open("./myprog", O_RDONLY)              = 3
write(1015, "./myprog", 8)              = 8
write(1016, "==23547== Command: ./myprog\n", 28==23547== Command: ./myprog
stat("/home/user/HEAD/myprog/myprog", {st_mode=S_IFREG|0755, st_size=1886240, ...}) = 0
open("/home/user/HEAD/myprog/myprog", O_RDONLY) = 3
stat("/home/user/HEAD/myprog/myprog", {st_mode=S_IFREG|0755, st_size=1886240, ...}) = 0
open("/home/user/HEAD/myprog/myprog", O_RDONLY) = 3
open("/home/user/HEAD/myprog/myprog", O_RDONLY) = 3
readlink("/proc/self/fd/3", "/home/user/HEAD/myprog/myprog", 4096) = 31
getcwd("/home/user/HEAD/myprog", 4096) = 25
lstat("/home/user/HEAD/myprog/myprog", {st_mode=S_IFREG|0755, st_size=1886240, ...}) = 0
open("/home/user/HEAD/myprog/datafile", O_RDONLY) = 3
access("/home/user/HEAD/myprog/datafile", F_OK) = 0
open("/home/user/HEAD/myprog/datafile", O_RDONLY) = 3
open("/home/user/HEAD/myprog/datafile", O_RDONLY) = 4 
```

您会注意到，所有`execve`调用都不是指`./myprog`Valgrind 包装脚本、二进制文件，然后是后端工具：

```
execve("/usr/bin/valgrind", ["valgrind", "./myprog"], [/* 35 vars */]) = 0
execve("/usr/bin/valgrind.bin", ["/usr/bin/valgrind.bin", "./myprog"], [/* 39 vars */]) = 0
execve("/usr/lib/valgrind/memcheck-amd64-linux", ["/usr/bin/valgrind.bin", "./myprog"], [/* 40 vars */]) = 0 
```

# data-structures - 顺序（从慢到快）大 O 运行时间

> ID：10560462
> 
> 赞同：-2
> 
> 时间：2012-05-12T02:04:01.603
> 
> 标签：data-structures, big-o, time-complexity

假设 N 非常大，任何人都可以帮助我从最慢到最快的 Big O 运行时间排序以下列表。

O(N^2) O(N) O(1) O(N!) O(2^N) O(N log N) O(N^3) O(log N)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:07:21.960

将 O(A/B) 除以查看 O(A) 是否渐近大于 O(B)。（将极限视为 n->infinity。例如 N^2/N = N，它会爆炸到无穷大，因此 N^2>N 渐近。或者，N/N^2 = 1/N 接近 0，所以ñ

然后您可以绘制它们以检查您的工作并获得直觉（尽管如果您将它们绘制得太靠近原点，并且/或者存在较小的隐藏项，那么这样的图表很容易“撒谎”）。

# ajax - REST、Spring MVC 3 和使用 AJAX 的 PUT 请求

> ID：10560464
> 
> 赞同：1
> 
> 时间：2012-05-12T02:04:29.227
> 
> 标签：ajax, spring, spring-mvc

我想我正在寻找比任何特定编码解决方案更多的建议。这是场景：

*   我有一个可以创建新用户的表单
*   通过 Spring 控制器通过 GET 请求访问此表单

    ```
    @RequestMapping(value = "/secure/clients", method = RequestMethod.GET)
    public String prepareNewClient(final Principal principal, final ModelMap map) {
        map.addAttribute("client", new Client());
        return "secure/clients";
    } 
    ```

*   提交了表单，一切正常，我使用`$.ajax({})`

*   提交使用与我的控制器上的以下方法相同的 URL 触发 POST 请求

    ```
    @RequestMapping(value = "/secure/clients", method = RequestMethod.POST)
    public @ResponseBody JsonResponse saveClient(
        @ModelAttribute("client") final Client client,
        final BindingResult result,
        final Principal principal,
        final ModelMap map) {

        // validate input
        // save client
        // prepare JsonResponse object

        return jsonResponse;
    } 
    ```

完成后，我想让用户保持在同一个屏幕上，并让**表单触发 PUT 而不是 POST**。这很好，我可以用 jQuery 实现，但是一旦我再次提交表单，客户端就`ModelMap`不再存在了。

我什至尝试将保存的客户端添加到`ModelMap`我的 POST 方法中，但即使这样也没有用。

我不完全确定我是否以正确的方式做这件事。老实说，我看到的每个教程都或多或少地使用了我正在做的事情，但没有一个教程**有**PUT 请求——主要是处理对象的创建，我没有问题。

我想到的是我可能需要一个控制器方法映射到`/secure/clients/{clientId}`with`HTTP.GET`和另一个控制器方法映射`/secure/clients/{clientId}`到`HTTP.PUT`.

但我不确定这是否有意义，所以我有点迷茫。

*   我应该完全在 JSON 调用上创建我的控制器吗？
*   在这种情况下，我应该重定向用户并忘记 AJAX 调用吗？

建议不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:08:27.243

Web 浏览器不完全支持 HttpMethod。PUT 请求在两个应用程序使用 Restfull API 时效果很好，但为了浏览器兼容性，最好将自己限制为 POST 或 GET 请求。

您还可以在表单中放置一个覆盖参数，以指示 Web 服务器将帖子作为所需的方法来处理。

`<input type="hidden" name="_method" value="put"/>`会做的工作。

Spring sf 命名空间会为您处理该隐藏字段。

```
<sf:form method="put">
....
</sf:form> 
```

此外，您可以使用 restclient-ui 测试您的控制器，以查看问题是来自您的 WebServer 还是您的客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:10:43.033

我同意@Daniel。

但是您可以使用Spring 中提供的**HiddenHttpMethodFilter**。这应该会让你的工作变得轻松。您将不再需要每次都放置隐藏文件。

希望有帮助。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T07:41:02.277

@Daniel 和 @Japan 非常感谢您的回答。

我明白了你所说的@Daniel，我最终跳出框框，以不同的方式思考——而且效果很好。

只是给你一个想法：

*   当插入新客户端时，我实际上刷新了浏览器，而不是停留在页面上
*   调用函数后，用户被重定向到 /secure/clients/{clientId}
*   从那里映射一个新函数，以及一个新的 POST 请求

它对我有用。并且利用 Knockout.JS 也有很大帮助。

再次感谢！

# javascript - 如何防止自定义键绑定产生噪音？

> ID：10560465
> 
> 赞同：2
> 
> 时间：2012-05-12T02:05:06.780
> 
> 标签：javascript, keyboard-shortcuts, userscripts

相当模糊的标题，我知道，但我将自定义键事件绑定到`document`对象以捕获`Alt``R`组合按键，如下所示：

```
document.body.onkeydown = function(event){
    event = event || window.event;
    var keycode = event.charCode || event.keyCode;
    if (keycode === 82) {
        if (event.altKey) {
            if (!canReload) {
                canReload = true;
                window.location.href += "#doGreaseRefresh";
            } else {
                canReload = false;
                window.location.href = window.location.href.replace("#doGreaseRefresh", "");
            }

            return false;
        }
    }
} 
```

代码按预期运行，但也会产生相当烦人的“哔”声。我怎样才能防止这种情况？`return false`没有证明是答案，所以我想知道它是否可能。

哦，如果您想知道，这是在 Chrome 用户脚本（内容脚本）中，如果我按下 ，则每 10 秒刷新一次 Stack Overflow 的主页`Alt``R`，并在我`Alt``R`再次按下时停止刷新。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:22:13.037

无法停止哔声显然是 Chrome 中的一个错误：[http](http://code.google.com/p/chromium/issues/detail?id=105500) ://code.google.com/p/chromium/issues/detail?id=105500 。`return false`在没有哔哔声的情况下在 Firefox 中工作。

干杯-

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T02:31:42.683

[正如 ZachB 指出的那样](https://stackoverflow.com/a/10566301/331508)，这似乎是 Chrome 的一个错误。

要解决这个烦恼：

1.  进入 Windows 控制面板。
2.  选择*声音*或*系统声音*
3.  分配`(None)`给 的声音`Default Beep`。
    （无论如何我都喜欢这样做，因为它比有用的烦人多 50 倍）。

# java - 停止扫描仪读取用户输入java？

> ID：10560468
> 
> 赞同：2
> 
> 时间：2012-05-12T02:06:48.067
> 
> 标签：java, input, java.util.scanner

我正在尝试编写这种方法，它会一直从用户那里读取，直到输入“退出”这个词。我尝试使用 break 和 for 循环；它没有用。我正在尝试使用while，但即使输入“exit”这个词也不会停止。任何想法如何解决这一问题？谢谢。

```
public void read(Scanner scanner){

while(3<4){
String in = scanner.nextLine();
Scanner scanner_2 = new Scanner(in);

String name = null;

if(scanner_2.hasNext()){
  //create and add the user to the user container class
  name = scanner_2.next();
  System.out.println(name);
}

if(name == exit)
//stop or break the while loop
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T02:09:30.053

`name == exit`是错的。

你要

```
name.equals(exit) 
```

或者

```
name.equals("exit") 
```

分别取决于 exit 是变量还是字符串文字。在 Java 中，`==`表示引用相等（例如，这两个引用是否指向内存中的相同地址），而 . `equals`表示对象等价，通常`overriden`在开发人员的类中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T02:55:17.903

```
if(name == exit) 
```

错了，那是真的。

但是请确保在比较两个字符串时，当一个字符串是常量时，例如，在比较时`"exit"`确保它排在第一位。

即它应该被比较为

```
if ("exit".equals(name)) 
```

不像下面的方式

```
if (name.equals("exit")) 
```

将“exit”作为第一个值的主要原因是，如果 name 是`null`那么它不会触发`NullPointerException`，但是如果我们将`name`其作为第一个对象进行比较，那么如果 name 为 null 那么它将触发该`NullPointerException`异常，因此请确保在任何时候未来。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T02:22:22.530

阿米尔斯的回答是 100% 正确的。此外，在 while 循环中使用 true ，我认为在这种情况下使用 else...if 语句会更好。更具可读性，这就是为什么:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-12T02:23:28.187

假设`String exit = "exit";`在类级别的某处声明：

```
name == exit 
```

检查被引用的`name`对象和被引用的对象`exit`是否相同。你想要什么被引用的对象的*值*和被引用的对象的*值*是否相同。`name`*`exit`*

 *你这样做

```
if(name.equals(exit)) 
```

也就是说，代码中有很多可以改进的地方。我了解您可能正在编写此代码来学习 Java，但仍然可以进行一些小的更改使代码更具可读性。

此外，根本不需要您使用的第二台扫描仪。

以下代码将与您的代码执行相同的操作，但更小且更具可读性。

```
 String name = "";
    while(!name.equals("exit")) {
        if(scanner.hasNext()) {
            //create and add the user to the user container class
            name = scanner.next();
            System.out.println(name);
        }

    } 
```

实际上，他的代码可以进一步改进为：

```
String name = null;
while(scanner.hasNext() && !(name = scanner.next()).equals("exit")) {
    System.out.println(name);
} 
```

但我认为你正在学习，当你在学习时，这可能有点太多了。*

# ruby-on-rails - Rails 3 run_callbacks 带参数

> ID：10560472
> 
> 赞同：0
> 
> 时间：2012-05-12T02:07:50.530
> 
> 标签：ruby-on-rails, ruby, callback

我正在玩 run_callbacks 并且遇到了问题。有人可以帮帮我吗？

```
## loveable.rb
module Loveable
  extend ActiveSupport::Concern

  included do
    define_callbacks :love
  end

  def loved_by!(lover)
    run_callbacks :love do
      do_love(lover)
    end
  end

  def do_love(lover)
    ...implementation goes here...
  end
end

## product.rb
class Product < ActiveRecord::Base
  include Loveable

  set_callback :after, :love, :after_love

  def after_love
     ## How to get lover here??
  end
end 
```

我需要 after_love 方法中的“情人”用户。我怎么能做到这一点？

现在我使用实例变量，但不喜欢这个解决方案。

```
## loveable.rb
def loved_by!(lover)
  @lover = lover
  run_callbacks...
end

## product.rb
def after_love
  @lover.do_something
end 
```

有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:19:01.727

使用实例变量:)

在模块中使用实例变量的唯一严重问题是模块中使用的变量名称会与类本身或其他包含模块中的名称发生冲突的风险。如果您使用一个足够晦涩的名称，例如`@_xxx_loveble_lover`，那应该可以有效地将风险降到最低。

从您的代码看来，这`lover`是与每个对象关联的属性，因此实例变量是最好的设备。

# google-chrome-extension - 使用 WebRequest API 确定传出请求的框架 URL

> ID：10560475
> 
> 赞同：1
> 
> 时间：2012-05-12T02:08:10.513
> 
> 标签：google-chrome-extension

我正在使用 WebRequest API 来修改 Chrome 发送的请求。为了知道如何重写请求，我想知道导致传出请求的框架 URL 是什么。我看到我可以获得框架 ID 和选项卡 ID，我可以使用它们向内容脚本发送消息以找出 URI。但是由于消息传递始终是异步的，因此似乎无法确保在发送请求之前获得该信息。

这是一个测试工具，不是普通用户的东西，所以我不介意增加一些延迟。有谁知道是否有其他方法可以做到这一点？我尝试使用 setTimeout，但它被内容安全策略阻止。使用 referrer 并不能完全减少它，因为它没有设置在来自 HTTPS 帧的 HTTP 请求上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:31:06.367

我不确定我是否完全理解您要完成的工作，但这是我的想法。

**设想**

主框架 google，子框架 facebook 和 twitter，您想修改来自 facebook 框架的任何请求！

如果是这样的话，那么这就是我要尝试的；

1.注册[onCompleted](http://code.google.com/chrome/extensions/webRequest.html#event-onCompleted)事件监听器，该监听器将用于检索完成的请求信息，即url和frame id，并将它们存储在一个数组中。

[2.注册onBeforeSendHeaders](http://code.google.com/chrome/extensions/webRequest.html#event-onBeforeSendHeaders)事件监听器，用于获取请求信息并与上一步存储的信息进行比较，如果通过了可以修改headers

***所以代码会像这样***

*[onCompleted](http://code.google.com/chrome/extensions/webRequest.html#event-onCompleted)* ({将信息 -ie url 和 frame id- 存储在一个数组中},...)

*[onBeforeSendHeaders](http://code.google.com/chrome/extensions/webRequest.html#event-onBeforeSendHeaders)* ({将发出请求的帧 id 与之前存储的帧 id 进行比较，如果它们匹配修改标题}，...)

***您的方法与我列出的方法之间的区别***

在您的方法中，您使用异步消息在发送请求后检索有关框架的信息，在我的方法中，您将为您准备好这些信息，而无需进行任何进一步的消息传递，因此无论何时发生请求，您都可以立即使用它们。

希望你会发现这对你有帮助，祝你好运。

# c# - 清单是否 类声明一个名为 Changed 的 单个事件成员？

> ID：10560476
> 
> 赞同：0
> 
> 时间：2012-05-12T02:08:37.250
> 
> 标签：c#

[C# 4.0 Spec here](http://books.google.com/books?id=s-IH_x6ytuQC&pg=PT92&lpg=PT92&dq=List%3CT%3E%20class%20declared%20a%20single%20event%20member%20called%20Changed,&source=bl&ots=lr867XeUdV&sig=zfUKKKGxFH9ZD4M8VJxCwH9ndgE&hl=en&sa=X&ei=o8OtT-DXG42I6AGxhMmeCQ&ved=0CF4Q6AEwAA#v=onepage&q&f=false)中的一个事件示例说

`"The List<T> class declares a single event member called Changed, which indicates that a new item has been added to the list. The Changed event is raised by the OnChanged virtual method, which first checks whether the event is null (meaning that no handlers are present). The notion of raising an event is precisely equivalent to invoking the delegate represented by the event—thus, there are no special language constructs for raising events."`

我无法`Changed`通过 Reflector 找到该事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T02:17:31.783

该陈述对于`List<T>`书中定义的类是正确的。它与 .Net Framework 无关`class System.Collection.Generic.List<T>`。

是的，如果您从书中复制课程，它将具有 Changed 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T02:13:01.493

文档中没有任何内容表明`List<T>`.

[http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T02:12:19.353

您可以从 List 继承并添加自己的处理程序，例如

```
using System;
using System.Collections.Generic;

namespace test {
    class Program {

        class MyList<T> : List<T> 
        {
            public event EventHandler OnAdd;

            public void Add(T item) 
            {
                if (null != OnAdd)
                    OnAdd(this, null);

                base.Add(item);
            }
        }

        static void Main(string[] args) 
        {
            MyList<int> l = new MyList<int>();
            l.OnAdd += new EventHandler(l_OnAdd);
            l.Add(1);
        }

        static void l_OnAdd(object sender, EventArgs e) 
        {
            Console.WriteLine("Element added...");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T03:01:41.033

如果您真的在寻找这样的列表，请尝试[`BindingList<T>`](http://msdn.microsoft.com/en-us/library/ms132679.aspx)（具有 ListChanged）或[`ObservableCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668604.aspx)

# ruby - Ruby 方法查找是从类的底部开始向上，还是从顶部向下？

> ID：10560477
> 
> 赞同：0
> 
> 时间：2012-05-12T02:08:44.240
> 
> 标签：ruby, metaprogramming

我开始更多地了解 Ruby 对象模型，并试图了解如何找到方法的流程。

据我了解，一个对象通过检查它的自身类（向右）来搜索方法，如果在那里找不到该方法，它会上升到祖先层次结构。

我感到困惑的是......当它查看一个类时，它是从下往上还是从上往下读取每个方法？

我想的是前者。但如果这是真的，那么我觉得这与我一直以来对如何从上到下阅读/解释程序的理解有悖常理。

有人可以证实我对此的理解。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T02:11:23.287

后面的声明会覆盖前面的声明——

```
class Foo
  def hello
    'hello first'
  end

  def hello
    'hello second'
  end
end

f = Foo.new

puts f.hello # hello second 
```

# javascript - 组织谷歌地图 javascript

> ID：10560493
> 
> 赞同：1
> 
> 时间：2012-05-12T02:12:04.893
> 
> 标签：javascript, google-maps

我即将重写我去年创建的一个项目。主要部分之一是重写前端，基本上都是google maps javascript api。

该项目的主要问题之一是 javascript 相当混乱且难以维护。

我想知道是否有任何 javascript 工具/框架可以帮助我组织我的 js 代码。

我研究了骨干网，但我不确定如何将它与谷歌地图 api 集成。

还有其他我应该考虑的框架吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:38:28.103

Backbone 是迄今为止增长最快的 JavaScript MVC 框架，它被很多知名项目使用。当然，使用最广泛使用的工具的优势在于它们更有可能继续得到社区的支持，不仅仅是在开发中，而且在报告和修复的错误数量上。

话虽如此，您可以[在这篇评论文章中找到有关不同 JavaScript 框架的更多信息。](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/).

最后，API 实际上只是在更复杂逻辑层之上的简化抽象。这个 API 不应该与 Google Maps API 一起使用确实没有任何理由，因为它的底层都是 JavaScript。

# objective-c - 设置 UIImage 的路径

> ID：10560497
> 
> 赞同：1
> 
> 时间：2012-05-12T02:12:27.637
> 
> 标签：objective-c, uiimage, sprite

我想知道在执行以下操作时如何设置 UIImage 的路径（到文件夹中）：

[UIImage imageNamed:@"Sprites/Macbeth/Climbing/1.png"];

我想让它使用文件夹 Sprite、Macbeth 的那个文件夹和那个 Climbing 文件夹中名为“1.png”的图像。我希望能够用一行代码来做到这一点，因为我有很多 UIImages 像精灵动画（全部在数组中）。有谁知道如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T02:28:01.683

iOS 不会维护您拥有的文件夹系统。所以这是不可能的。您只需使用这行代码即可提取图像。

```
[UIImage imageNamed:@"1.png"]; 
```

如果您需要对多个 1.png 进行分类，请不要尝试嵌套文件夹，而是尝试将其放入文件名中，例如 macbeth-climbing-1.png

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T02:33:57.660

编写执行以下操作的方法或函数：

1.  调用`[NSBundle mainBundle]`以获取您的应用程序包
2.  调用`-[NSBundle pathForResource:ofType:inDirectory:]`获取图片的路径
3.  `+[UIImage imageWithContentsOfFile:]`使用该路径调用

# android - Android Market 应用程序 - 拥有精简版和其他违反政策的版本

> ID：10560498
> 
> 赞同：0
> 
> 时间：2012-05-12T02:12:57.057
> 
> 标签：android, google-play, policy

如果我的网站上有违反 Google Play 政策的“专业”版本，我的“精简”版本会被删除吗？如果我在“精简”版本中提及我的“专业”版本，Google Play 会这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:19:29.197

我认为谷歌不关心这个。

这是一个市场，不是商店。

# http - 代理 - 将 HTTP 请求转换为 SOCKS5

> ID：10560500
> 
> 赞同：8
> 
> 时间：2012-05-12T02:13:02.143
> 
> 标签：http, proxy, socks, tor

我目前正在使用 TOR 进行一些测试工作并遇到了一个小问题。Tor 的客户端只支持通过 SOCKS5 协议接收连接，但我使用的应用程序只支持 HTTP 代理协议。

可以在中间放点东西吗？例如，它去了。

我的程序（仅限 HTTP）> HTTP 到 SOCKS 转换器 > Tor SOCKS5 服务器

谷歌搜索了一下，我找到了 SOCKS 到 HTTP 的信息，但不是相反。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T06:13:02.297

您可以将任何支持 SOCKS 的 HTTP 代理放在中间。一旦代理[Polipo](http://www.pps.jussieu.fr/~jch/software/polipo/ "波利波")通常用于此目的，它应该仍然可以工作并且在使用 Privoxy 之前。

# r - 替换字符串中所有出现的模式

> ID：10560503
> 
> 赞同：17
> 
> 时间：2012-05-12T02:13:37.700
> 
> 标签：r, character

曾经用数字和矩阵运行 R，当谈到玩字符串和字符时，我迷路了。我想分析一些将时间读入 R 的数据，如下所示：

```
>my.time.char[1]
[1] "\"2011-10-05 15:55:00\"" 
```

我想得到一个只包含的字符串：

```
"2011-10-05 15:55:00" 
```

使用函数 sub() （我几乎不明白......），我得到了以下结果：

```
> sub("(\")","",my.time.char[1])
[1] "2011-10-05 15:55:00\"" 
```

这更接近我正在寻找的格式，但我仍然需要去掉最后两个字符 ( `\"`)。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-12T02:20:59.070

第二行`?sub`解释：

> sub 和 gsub 分别执行第一个和所有匹配的替换。

这应该告诉你`gsub`改用。

# c - 将文本读入缓冲区后如何逐行读取？

> ID：10560505
> 
> 赞同：6
> 
> 时间：2012-05-12T02:14:10.723
> 
> 标签：c, fread

首先，我通过调用fread将文本读入缓冲区，然后我想逐行读取它，怎么做？我尝试使用 sscanf ，但它似乎不起作用。

```
char textbuf[4096];
char line[256];
FILE *fp;
fp = fopen(argv[1],"r");
memset(textbuf, 0, 4096);
fread(textbuf, 1, 4096, fp); 
```

我知道使用 fgets 是一个好方法。我只想知道天气这种方法可以做同样的事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T02:22:53.820

尝试这个：

```
fgets(textbuf, sizeof(textbuf), fp); 
```

对于逐行阅读，您可以使用：`fgets(line, 128, fp)`或`getline(&line, &size, fp);`

**编辑**

如果要从变量中读取它，请查看`strtok()`函数：

```
char * line = strtok(strdup(buffer), "\n");
while(line) {
   printf("%s", line);
   line  = strtok(NULL, "\n");
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-12T02:30:25.337

[您可以使用strchr()](http://linux.die.net/man/3/strchr)找到行尾字符的位置，如下所示：

```
char *eol = strchr(line, '\n'); 
```

之前的一切`*eol`都是第一行。`line`然后从to前进`eol + 1`，删除任何后续的`\r`or`\n`字符，并重复该过程，直到`strchr()`返回`NULL`表明没有更多的换行符。此时，将所有剩余数据移动到缓冲区的开头并从文件中读取下一个块。

如果您担心效率，您可以通过使用 2 个缓冲区并在它们之间交替来避免移动数据，但即使是简单的方法也可能比`fgets()`文件有很多行更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T02:23:26.373

[strtok](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)怎么样

```
char *line;
line = strtok(texbuf, '\n'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T02:29:37.877

您说“我知道使用 fgets 是一种好方法。我只是想知道这个方法是否可以做同样的事情。”当然可以，您只需像在 c 库中那样重新实现 fgets 即可。c 库实际上并没有逐行读取，它读取整个块并在您调用 fgets 时给您一行。

这不是一种有效的方法，而是您必须做的事情的样本。

```
#include <stdio.h>
typedef struct my_state {
 unsigned char * buf;
 int offset;
 int buf_size;
 int left;
 FILE * file;
} my_state_t;
int takeone(my_state_t * state) {
 if ((state->left - state->offset)<=0) {
  if (feof(state->file)) return -1;
  state->left = fread(state->buf,1,state->buf_size,state->file);
  state->offset = 0;
  if (state->left == 0) return -1;
 }
 return state->buf[state->offset++];
}
int getaline(my_state_t * state, char * out, int size) {
 int c;
 c = takeone(state);
 if (c < 0) return 0;
 while (c >=0 && size > 1) {
  *out++ = c;
  --size;
  if (c == '\n') break;
  c = takeone(state);
 }
 *out=0;
 return 1;
}
int main(int argc, char ** argv){
 FILE *fp;
 char textbuf[4096];
 char line[256];
 my_state_t fs;
 fs.buf=textbuf;
 fs.offset=0;
 fs.buf_size=4096;
 fs.left=0;
 fp = (argc>1)? fopen(argv[1],"rb") : stdin;
 fs.file = fp;
 while (getaline(&fs,line,256)) {
  printf("-> %s", line);
 }
 fclose(fp);
} 
```

# mysql - 在连接中使用 Where 子句，以及 Group by 和 Order By

> ID：10560510
> 
> 赞同：6
> 
> 时间：2012-05-12T02:16:20.583
> 
> 标签：mysql, sql, join, left-join

我正在使用 MySQL 经典模型数据库。以下查询工作正常（注意 where 子句）

```
select 
    customers.customerNumber as 'Customer ID',
    customers.customerName as 'Customer Name',
    count(orders.orderNumber) as 'Total Orders Placed'
from customers
left join orders on customers.customerNumber = orders.customerNumber
where customers.customerNumber > 200
group by
    customers.customerNumber
order by 
    3 asc 
```

但是以下会导致错误。目的是仅在结果行集中显示那些下达 3 个以上订单的客户。我究竟做错了什么？

```
select 
    customers.customerNumber as 'Customer ID',
    customers.customerName as 'Customer Name',
    count(orders.orderNumber) as 'Total Orders Placed'
from customers
left join orders on customers.customerNumber = orders.customerNumber
where count(orders.orderNumber) > 3
group by
    customers.customerNumber
order by 
    3 asc 
```

MySQL错误是：**错误代码：1111。组函数的使用无效**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T02:19:12.787

聚合函数（`COUNT(), AVG(), SUM(),`等）不能出现在`WHERE`子句中，因为它们是计算的。相反，它们属于一个`HAVING`子句：

```
select 
    customers.customerNumber as 'Customer ID',
    customers.customerName as 'Customer Name',
    count(orders.orderNumber) as 'Total Orders Placed'
from customers
left join orders on customers.customerNumber = orders.customerNumber
group by
    customers.customerNumber
HAVING count(orders.orderNumber) > 3
order by 
    3 asc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T03:04:47.520

一种更有效的方法是通过聚合将组移动到嵌套派生表中并加入该表。

```
SELECT 
  c.customerNumber AS 'Customer ID',
  c.customerName AS 'Customer Name',
  o.orderCount AS 'Total Orders Placed'
FROM 
  customers c
LEFT JOIN
  (SELECT
     customerNumber, 
     COUNT(*) AS orderCount
   FROM
     orders
   GROUP BY
     customerNumber) o
 ON
   c.customerNumber = o.customerNumber
 WHERE
   o.orderCount > 3
 ORDER BY
   3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T03:25:20.373

在 where 子句中有一种间接使用聚合函数的方法

您可以将查询重写为

```
 select customers.customerNumber as 'Customer ID',
       customers.customerName as 'Customer Name',
       count(orders.orderNumber) as 'Total Orders Placed'
  from customers left join orders on customers.customerNumber =
                                     orders.customerNumber
 where
 (SELECT CASE
        WHEN count(orders.orderNumber) > 3 THEN
             'TRUE'
        ELSE
             'FALSE'
        END
   FROM DUAL) = 'TRUE'
 group by customers.customerNumber
 order by 3 asc 
```

这里，在 select 子句中使用了 count 函数，它根据 count 计算返回 FALSE 字符串的 TRUE。

希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T08:56:09.723

请试试这个

```
select 
  customers.customerNumber as 'Customer ID',
  customers.customerName as 'Customer Name',
  count(orders.orderNumber) as 'Total Orders Placed'
from customers
inner join orders on customers.customerNumber = orders.customerNumber
group by
  customers.customerNumber, 
  customers.customerName
having count(orders.orderNumber) > 3
order by 
  3 asc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-28T17:09:13.527

这是您要实现的目标的简化版本。

```
SELECT 
    customers.customerName,
    COUNT(orders.orderNumber) totalOrders
FROM
    customers
        JOIN
    orders ON customers.customerNumber = orders.customerNumber
GROUP BY customers.customerName
HAVING totalOrders > 2; 
```

[![在此处输入图像描述](../Images/be432c995d95e536087ba93b41bae17d.png)](https://i.stack.imgur.com/VDpDy.png)

# magento - Magento 正确地重新索引所有内容

> ID：10560511
> 
> 赞同：4
> 
> 时间：2012-05-12T02:16:31.740
> 
> 标签：magento, indexing

我已经搜索了一段时间，遵循[了这个](https://stackoverflow.com/questions/4343739/magento-api-rebuild-indexes-after-adding-new-products)答案，甚至查看了 shell 索引器脚本，我就带着这个来了。基本上，我有

```
$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_MANUAL));
$processes->walk('save');

// Importing data here...

Mage::getModel('catalog/product_image')->clearCache();

// rebuild everything!!!
$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('reindexEverything');
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_REAL_TIME));
$processes->walk('save'); 
```

但我仍然在我的后端得到这个屏幕

![在此处输入图像描述](../Images/a60f257b34d42522a114e96a787e6d18.png)

...如何“更新”索引？

****更新****

问题解决了！

要正确索引所有内容，只需调用所有内容！

```
// rebuild everything!!!
$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_REAL_TIME));
$processes->walk('save');

$processes->walk('reindexAll');
$processes->walk('reindexEverything'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T02:20:32.530

如果您从 cli 运行 indexer.php，使用以下参数，是否会解决警报：

`indexer.php reindex all`

如果是这样，将这些参数作为脚本的一部分执行 indexer.php 是一种选择吗？

编辑：另外，`Mage_Index_Model_Process`看看`reindexEverything()`方法。

`indexer.php`有一个使用示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-03T18:21:43.220

我刚刚在 CE v1.9.0.1 中遇到了这个问题。我的管理模块将所有进程作为一个集合并循环遍历每个调用 reindexEverything() 的进程。我将代码基于工作正常的 adminhtml 进程控制器，但我的代码根本不工作。

我终于发现问题在于我之前已将重新索引模式设置为手动（以加快我的产品导入例程），如下所示：

```
$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_MANUAL));

// run product import 

$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
foreach($processes as $p)
{
    if($p->getIndexer()->isVisible())
    {
        $p->reindexEverything();
        //echo $p->getIndexer()->getName() . ' reindexed<br>';
    }
}

$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_REAL_TIME)); 
```

解决方案：在重新索引所有内容之前将模式设置回 MODE_REAL_TIME：

```
$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_MANUAL));

// run product import 

$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_REAL_TIME));

$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
foreach($processes as $p)
{
    if($p->getIndexer()->isVisible())
    {
        $p->reindexEverything();
        //echo $p->getIndexer()->getName() . ' reindexed<br>';
    }
} 
```

注意：这些是来自几种不同方法的片段，因此重复分配 $processes 等。

当进程索引模式设置为 MODE_MANUAL 时，reindexEverything() 似乎没有做任何事情。将模式设置回 MODE_REAL_TIME 然后调用 reindexEverything 工作正常。

我希望这对某人有所帮助，因为我花了几个沮丧的时间才弄清楚这一点！

谢谢

# ruby - 使用匹配字符串的 ruby 解析文本并在条件下返回块 - 重复

> ID：10560515
> 
> 赞同：0
> 
> 时间：2012-05-12T02:17:19.363
> 
> 标签：ruby, parsing, csv, text-files

我有一个如下所示的文本文件：

```
STUFF UP HERE

APEXED NUMBER : 123456789

1234567   Bob,Hope E.                   123.12              
1234567   TOM ROGERS JR III             123.18                
1234567   NICE, JOHNATH               4,450.00                 
1234567   PERDOND, DELLA              4,762.00               
1234567   ERICCY, PHIL                4,552.00               

  STUFF IN BETWEEN

APEXED NUMBER :

1234567   RICHARDSON,FELICIA D          632.00     
1234567   EARLEY, RICKY L               140.00     

STUFF ON THE BOTTOM 
```

我想读取文件并找到“APEXED NUMBER :”字样，然后我想确定冒号后面是否有数字。例如，在第一个 APEXED NUMBER 之后：出现数字 123456789。我想保存这个号码。然后我希望文件跳过一行并在将信息分配给不同的变量之后读取数字和信息。

然后我想继续浏览文件（逐行），直到找到另一个“APEXED NUMBER”文本并检查它后面是否有数字 - 如果没有我想为这些 APEX NUMBER 分配一个“未知”的值并移动在。

然后将找到的所有文本存储在一个以逗号分隔的数组中。

这是我目前的尝试：

```
def is_numeric?(object)  #used to determine if a number is a number
true if Float(object) rescue false 
end

def is_apexed_line?(object)   # check if text has "APEXED NUMBER :"
true if object == "APEXED NUMBER :" rescue false
end

def load_file
 raw_records = []
 infile = File.open("test.txt", "r") 
 while line = infile.gets
 possible_apexed_line = line[2,15]

 if is_apexed_line?(possible_apexed_line)
 apexed_line = line[2,15]
 possible_apexed_number_present = line[18,9]

 if is_numeric?(possible_apexed_number_present)  
  abc_apexed_number = line[18,9]
  else abc_apexed_number = "unknown"
  end  # end of if

record = [apexed_line, abc_apexed_number]
raw_records << record

end  # end of if

end

puts raw_records.map {|record| record*','}

 infile.close

end

load_file 
```

这会产生：

```
APEXED NUMBER :, 123456789
APEXED NUMBER :, unknown 
```

但这是迄今为止我所学到的。我正在寻找的结果是这样的：

```
1234567, BOB, HOPE E., 123.12, APEXED NUMBER :, 123456789
1234567, TOM ROGERS JR III, 123.18 , APEXED NUMBER :, 123456789              
1234567, NICE, JOHNATH,  4450.00  ,APEXED NUMBER :, 123456789               
1234567, PERDOND, DELLA, 4762.00 , APEXED NUMBER :, 123456789              
1234567, ERICCY, PHIL, 4552.00, APEXED NUMBER :, 123456789
1234567,   RICHARDSON,FELICIA D, 632.00 ,  APEXED NUMBER :, unknown  
1234567,   EARLEY, RICKY L, 140.00 , APEXED NUMBER :, unknown 
```

任何可以为我指明正确方向的建议/帮助将不胜感激。我不喜欢这种方法。如果有其他方法，请建议...我正在学习 ruby​​，所以我更喜欢 ruby​​ 建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:49:17.307

这是我的：

```
File.open(filename).each_line do |line|
    @apexed_number = ('' == $1) ? 'unknown' : $1 if line =~ /APEXED NUMBER :\s*(\d*)/
    puts [$1,$2,$3,@apexed_number].join(', ') if line =~ /(\d+)\s{2,}(.*?)\s{2,}([\d,.]+)/
end 
```

# regex - 按键问题 VB.NET

> ID：10560519
> 
> 赞同：0
> 
> 时间：2012-05-12T02:18:42.967
> 
> 标签：regex, vb.net, visual-studio, if-statement, keypress

我花了很多时间试图解决我尝试过的这个问题，但没有成功。我只需要验证一个文本框：

有效链：

```
10% 
 0% 
 1111111.12% 
 15.2% 
 10 
 2.3 
```

无效链：

```
 .% 
 12.% 
 .02% 
 % 
 123456789123.123 
```

我需要使用这些有效链验证文本框，支持按键事件。

我试过了：

```
Private Sub prices_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles wholeprice_input_new_item.KeyPress, dozenprice_input_new_item.KeyPress, _
            detailprice_input_new_item.KeyPress, costprice_input_new_item.KeyPress

            Dim TxtB As TextBox = CType(sender, TextBox)
            Dim fullText As String = TxtB.Text & e.KeyChar
            Dim rex As Regex = New Regex("^[0-9]{1,9}([\.][0-9]{1,2})?[\%]?$ ")

            If (Char.IsDigit(e.KeyChar) Or e.KeyChar.ToString() = "." Or e.KeyChar = CChar(ChrW(Keys.Back))) Then
                If (fullText.Trim() <> "") Then
                    If (rex.IsMatch(fullText) = False And e.KeyChar <> CChar(ChrW(Keys.Back))) Then
                        e.Handled = True
                        MessageBox.Show("You are Not Allowed To Enter More then 2 Decimal!!")
                    End If
                End If
            Else
                e.Handled = True
            End If
        End Sub 
```

**注意：**正则表达式必须使用可选的百分比符号验证（最多 2 个小数位和 9 个整数）。

请帮忙，我很沮丧试图解决这个问题而没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:39:34.717

我认为你几乎得到了正确的答案。当我针对您提供的样本运行您的正则表达式时，它们都失败了。但是，如果我在正则表达式末尾删除额外的空间，我会得到预期的成功和失败。

所以目前你的正则表达式看起来像这样：

```
Dim rex As Regex = New Regex("^[0-9]{1,9}([\.][0-9]{1,2})?[\%]?$ ") 
```

它应该看起来像

```
Dim rex As Regex = New Regex("^[0-9]{1,9}([\.][0-9]{1,2})?[\%]?$") 
```

编辑：

好的，我更了解这个问题。正则表达式的问题在于，它只允许一个句点后跟一个或两个数字。如果您在某人完成输入后评估文本框值，那效果很好。但是在您的代码中，您正在评估每个按键，因此您没有机会在“。”之后键入数字。

我可以看到两种可能的解决方案

1.  更改正则表达式以允许 1\. 作为有效条目
2.  在评估正则表达式时进行更改，也许试图找出一种仅在该人暂停输入时才评估正则表达式的方法。

如果您选择选项 1，那么我们需要将正则表达式调整为类似这样

```
"^[0-9]{1,9}((\.)|(\.[0-9]{1,2}(%)?)|(%))?$" 
```

我更改了正则表达式，使其接受文本字符串的三个可选结尾`(\.)`将允许字符串以句点结尾，`(\.[0-9]{1,2}(%)?)`允许字符串以句点结尾，后跟一个或两个数字和一个可选的百分号，并`(%)`允许字符串以百分号结尾。我将结尾分为三个选项，因为我不想让 12.% 之类的东西有效。此外，要使其正常工作，您还需要在第一个 If 语句中添加百分号

```
If (Char.IsDigit(e.KeyChar) Or e.KeyChar.ToString() = "." Or e.KeyChar.ToString() = "%" Or e.KeyChar = CChar(ChrW(Keys.Back))) Then 
```

这样当有人键入百分号时，正则表达式就会运行。

# c - char* x 和 char x[] 之间的 sizeof 差异

> ID：10560523
> 
> 赞同：4
> 
> 时间：2012-05-12T02:19:13.250
> 
> 标签：c, char, sizeof

我知道 char* 和 char[] 之间的一些区别。 `char x[] = "xxxx"` 是一个字符数组； `char *y = "xxxx"` 是指向文字（const）字符串的指针；和`x[4]=='\0'`，`*(y+4) == '\0'`也是。那么为什么`sizeof(x)==5`和`sizeof(y)==4`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T02:22:27.320

`char x[] = "xxxx"`是一个大小为 5 的数组，包含 xxxx 和 \0。

`char *y = "xxxx"`是一个指向字符串的指针。它的长度是 4 个字节，因为那是指针的长度，而不是字符串的长度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T02:22:46.087

数组类型的大小是数组占用的大小。与 相同`sizeof("xxxx")`。

指针类型的大小是指针本身占用的大小。与 相同`sizeof(char*)`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-12T02:23:06.513

`x`是真的`"xxxx\0"`。字符串末尾的 nul 终止符为数组提供了五个字节。

但是，`sizeof(y)`要求指针的大小，在您的情况下恰好是四个字节。`y`指向的内容`sizeof()`对.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T00:24:05.857

对于, x 是一个指针，这意味着你可以通过,等 `char *x`来改变指向的位置。是一个数组，它是一个常量指针，所以你不能做 x++`x++``x+=2``char x[]`

# java - 如何在 sourceforge.net 中搜索在 Eclipse 中构建的 Java 项目

> ID：10560530
> 
> 赞同：0
> 
> 时间：2012-05-12T02:20:34.080
> 
> 标签：java, eclipse, sourceforge

Sourceforge.net 有一个[用于 Java 项目的过滤器](http://sourceforge.net/directory/language%3ajava/)，但我正在寻找一种方法来将它们缩小到那些打算在 Eclipse 中构建的项目。

**编辑**我正在使用 Eclipse Metrics 和 Omondo 插件来分析开源 Java 项目。我正在寻找一种快速的方法来查找可以在 Eclipse 中快速构建的 Eclipse 开源项目，以便我可以在它们上使用这些工具进行分析。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T02:59:11.317

我假设一个“打算在 Eclipse 中构建”的项目是一个将 Eclipse`.project`文件和其他内容签入源存储库的项目。

首先，签入特定于 Eclipse 的东西可能不是一个好主意，因为它很容易包含特定于开发人员的东西（例如构建路径名、首选项）。如果有多个提交者，你就会遇到问题......

其次，这应该是不必要的。.project 文件中的大部分内容都可以在导入项目时生成。如果这不可能，那么项目应该提供设置构建路径等的说明。（请注意，如果项目使用 Maven，这一切都由您负责。）

第三，任何值得一提的项目都将包含某种构建脚本，这些脚本允许您在不使用*任何*IDE 的情况下进行重建。

最后，任何仅支持使用 Eclipse 构建的项目都排除了使用其他 Java IDE 的开发人员的重要子集。

* * *

请注意，Maven 或 Ant 构建都不需要 Eclipse 才能工作。这两种构建工具都可以从命令行或其他 Java IDE 运行。

* * *

好的。我现在明白你的要求了。您实际上并不关心项目是什么......或者它是健全/有价值的项目。你只需要它来测试你的插件。（我不会评论这样做的“有效性”。这取决于您希望达到的目标。）

我建议您安装 m2eclipse 插件并查找带有“pom.xml”文件的项目。这些项目不需要特定于 Eclipse。m2eclipse插件会根据“pom.xml”文件自动创建“.project”、“.classpath”等。无需排除任何特定的版本控制系统，因为 m2eclipse 插件可以导入您从命令行签出的 Maven 项目。

# c# - 删除我的应用程序文件夹中的照片

> ID：10560533
> 
> 赞同：1
> 
> 时间：2012-05-12T02:21:21.823
> 
> 标签：c#, wpf

我在我的应用程序中对删除图片进行了故障排除，我使用 foreach 删除了文件夹中的文件。

我在我的应用程序中使用无头Skype登录，查询联系人姓名和联系人照片登录成功后，但是当我关闭我的应用程序时出现问题，我想删除我应用程序文件夹中的所有联系人照片。请参阅删除代码：

```
var assemblyLocation = Assembly.GetExecutingAssembly().Location;
var applicationDirectory = System.IO.Path.GetDirectoryName(assemblyLocation);
var imagesDirectory = System.IO.Path.Combine(applicationDirectory, "img");
var contact_photo = Directory.EnumerateFiles(imagesDirectory,
    "*.jpg",SearchOption.TopDirectoryOnly);
if (contact_photo != null)
{
   foreach (var photo in contact_photo)
   {
      Console.WriteLine(photo);

      File.Delete(photo);
   } 
```

}

**错误信息：**

```
The process cannot access the file 'C:\Users\...\mypicture.jpg'
because it is being used by another process. 
```

请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:30:33.540

参考这个答案 [https://stackoverflow.com/a/1025446/988830](https://stackoverflow.com/a/1025446/988830)

该文件被另一个进程使用，您必须确保拥有该文件的进程已释放它。如果它不在您的控制范围内，那么您需要尝试 catch 块以避免异常，并且您不能做更多的事情。

```
try
{
    //Delete file
}
catch (Exception ex)
{
    Console.WriteLine(ex.Message.ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:33:23.320

在删除图像之前，您是否查看过这些图像的使用情况？

当您没有注意到时，您的 WPF 应用程序的其他部分可能会锁定它们，

[WPF中的BitmapImage确实锁定文件](https://stackoverflow.com/questions/6430299/bitmapimage-in-wpf-does-lock-file)

# jquery - jQuery 1.7 到 1.4

> ID：10560536
> 
> 赞同：1
> 
> 时间：2012-05-12T02:21:39.233
> 
> 标签：jquery, drupal, migration, jquery-1.4, jquery-1.7

我正在使用drupal，当前用于drupal 的jQuery 版本是1.4，但在当前的HTML 中，开发人员使用了ON()。功能，我怎样才能适应1.4？

```
$('body').on('click.button.data-api', '[data-toggle^=button]', function (e) {
                var $btn = $(e.target)
                if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')
                $btn.button('toggle') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:23:20.957

jQuery 1.3 在被[http://api.jquery.com/live/取代之前使用了“live”](http://api.jquery.com/live/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T02:24:26.987

你参加过`.bind('click')`活动吗？

[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

`$('#foo').bind('click', function() { alert('User clicked on "foo."'); });`

# php - PHP PDO：更新 SQL WHERE IN () 子句中的数组

> ID：10560537
> 
> 赞同：2
> 
> 时间：2012-05-12T02:21:39.227
> 
> 标签：php, sql, arrays, pdo, where-clause

我正在尝试获取一组 ID 号并使用该 ID 号更新每一行。PHP PDO 代码如下：

```
private function markAsDelivered($ids) {
  $update = $this->dbh->prepare("
     UPDATE notifications
     SET notified = 1
     WHERE notification_id IN (
        :ids
     )
  ");
  $ids = join(',', $ids);
  Logger::log("Marking the following as delivered: " . $ids, $this->dbh);
  $update->bindParam(":ids", $ids, PDO::PARAM_STR);
  $update->execute();
} 
```

然而，当它运行时，只有列表中的第一项得到更新，尽管记录了多个 ID 号。如何修改它以更新多行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T02:47:24.110

占位符只能表示单个原子值。它起作用的原因是mysql看到的值是'123,456'的形式，它解释为一个整数，但是一旦遇到非数字部分（逗号）就会丢弃字符串的其余部分。

相反，做类似的事情

```
$list = join(',', array_fill(0, count($ids), '?'));
echo $sql = "...where notification_id IN ($list)";
$this->dbh->prepare($sql)->execute(array_values($ids)); 
```

# javascript - 意外的第二个参数在 mustache javascript 模板中起作用

> ID：10560539
> 
> 赞同：0
> 
> 时间：2012-05-12T02:22:21.740
> 
> 标签：javascript, html, templates, mustache

我注意到在使用 lambda 时：

```
{
  "name": "Willy",
  "wrapped": function() {
    return function(text) {
      return "<b>" + render(text) + "</b>"
    }
  }
} 
```

传入第二个参数（除了`text`）。第二个参数是一个函数：

```
function (template) {
    return render(template, scope);
} 
```

它返回 html，给定一个模板（带有初始输入 json 对象）。

所以，如果我有如下的 lambda：

```
"wrapped": function() {
  return function(text, func) {
    ....
} 
```

有人会期望 `func("<div>{{name}}</div>")`返回代表 div 的 html，其中的内容填充了 json 数据对象的“名称”属性中的任何内容。

但是，`func("{{.}}")`不起作用。我希望该对象代表初始输入对象。

相反，我得到了 STRING `"[object Object]"`。当我尝试使用`JSON.parse`它时，它会给我一个“Unexpected token o”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:39:32.653

您尝试解析为 JSON 的代码实际上不是 JSON。它只是一个 JavaScript 对象字面量。因此，当您尝试将其`{{.}}`放入模板中时，您得到了正确的结果，`[object Object]`因为那是对象的字符串表示形式。

# php - 数组内的 PHP 数组

> ID：10560542
> 
> 赞同：0
> 
> 时间：2012-05-12T02:22:45.967
> 
> 标签：php, arrays, multidimensional-array

我已经阅读了很多关于数组的先前提出的问题，但我无法让它工作:(我的数组看起来像：-

```
Array
(
[1259] => Array
    (
        [status] => 0
        [cond] => 0
    )

[1461] => Array
    (
        [status] => 0
        [cond] => 0
    )
) 
```

按键因用户输入而异。我目前要做的就是遍历输入并在其父数组键旁边回显数组内容。

我的代码如下： -

```
foreach($games as $key => $value) {
echo 'key: '.$key.' - ';
foreach( $value as $game){
    echo $game["status"].' - '.$game["cond"].'<BR>';            
}
} 
```

这是不正确的，因为它为每个数组项回显状态和条件两次。我还读到在另一个 foreach 中使用 foreach 是不正确的。

以下代码几乎就在那里，但我无法用状态和条件信息回显数组键：-

```
foreach( $games as $game){
    echo $game["status"].' - '.$game["cond"].'<BR>';            
} 
```

是否可以在上面的代码中回显数组键（例如 1259）？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T02:25:34.313

尝试：

```
foreach( $games as $key => $game){
    echo 'Key: '.$key.' - '.$game["status"].' - '.$game["cond"].'<BR>';            
} 
```

# css - 页脚，不锚定在底部，随页面滚动

> ID：10560557
> 
> 赞同：-1
> 
> 时间：2012-05-12T02:24:46.573
> 
> 标签：css, width, footer

这是我的页面[http://sketchedneo.com/indexex.php](http://sketchedneo.com/indexex.php)

所以页脚在 Include php 中

```
#footer {
    position: fixed;
    bottom: 0;
    z-index: 1000;
    left: 0px;
    right:0px;
    width: 100%;
    background: #c9c9c9;
    height: 125px;
    color: #868686;
    text-align: center;
    border-top: 3px solid #EBEBEB;

} 
```

页脚需要位于页面底部（如堆栈溢出）而不是随页面滚动。

请问有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:43:46.290

```
position:fixed;
    left: 0px; bottom:0px; right:0px; 
    background: #c9c9c9;

    color: #868686;
    border-top: 3px solid #EBEBEB;  
    text-align: center;  z-index: 1000; 
```

这样做，并且您在第 1465 行第二次定义了#footer

# multithreading - LWJGL、Clojure、OpenGL 命令的单线程

> ID：10560561
> 
> 赞同：7
> 
> 时间：2012-05-12T02:25:55.973
> 
> 标签：multithreading, concurrency, clojure, lwjgl

## 简短的问题：

给定 Clojure 的并发模型，我如何确保从同一个线程调用所有 LWJGL OpenGL 更新函数？

## 长问题

经过漫长而辉煌的战斗，[在 Leiningen/Clojure 中使用 lwjgl](https://stackoverflow.com/questions/10558795/using-lwjgl-in-leiningen-clojure)，我现在有 LWJGL + Leiningen + Clojure 一起工作。

但是，根据 LWJGL 文档，OpenGL 客户端命令似乎具有线程本地状态——如果我从不同的线程调用 OpenGL 命令，可能会发生坏事 (TM)。

因此，我的问题是：在 Clojure 中，设置 Swing Threads 之类的正确方法是什么（但我不能使用 Swing Threads / 必须自己设置），以便：

(1) 有一个主线程负责所有 OpenGL 调用

(2) 其他线程与该主线程进行某种类型的通信以协调 OpenGL 调用

## 我的背景

我熟悉 C/C++ 中的线程。我熟悉 Clojure 的代理/原子/参考模型。但是，我不熟悉 Clojure 中的“手动”并发/线程。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T02:45:28.227

我设计它的通常方式是让一个线程负责所有渲染。通过这样做，您避免了其他线程“发出 OpenGL 调用”的需要。

当然，您仍然需要一种方法来获取渲染线程的信息，但这可以使用 Clojure 的标准并发技术来处理。例如，如果您的世界状态是不可变的，您可以只使用原子进行状态更新，并让渲染线程使用存储在原子中的最新世界状态执行渲染：

```
 (def world-state (atom (initial-world-state)))

  ;; in rendering thread
  .....
  (loop []
    (render-world @world-state) ; all OpenGL calls happen in this function!!
    (other-stuff)
    (if (still-running) (recur)))

  ;; in other thread responsible for updating world
  (loop []
    (swap! world-state update-world-function)
    (other-stuff)
    (sleep-if-needed)
    (if (still-running) (recur))) 
```

# php - openinviter 的替代方案

> ID：10560572
> 
> 赞同：1
> 
> 时间：2012-05-12T02:27:40.177
> 
> 标签：php, import, contacts

我的主机不允许公开邀请者从 yahoo、gmail 等获取联系人。是否有任何人知道的基于 php 的脚本不包括安装，即。只能放在目录中。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:40:18.000

试试这个：[https ://github.com/dangerouse/cloudsponge-lib-php/](https://github.com/dangerouse/cloudsponge-lib-php/)

# javascript - youtube api，火狐 4.0。iframe 无法加载视频

> ID：10560580
> 
> 赞同：0
> 
> 时间：2012-05-12T02:29:35.673
> 
> 标签：javascript, api, video, youtube

尝试使用 iFrame 和 Firefox 4.0 无法加载视频来解决此问题 这是我目前的代码。我试图查看这个网站 - [https://developer.mozilla.org/en/HTML/HTML5/Optimizing_Your_Pages_for_Speculative_Parsing](https://developer.mozilla.org/en/HTML/HTML5/Optimizing_Your_Pages_for_Speculative_Parsing)寻求帮助。但这对我来说意义不大。

任何帮助将不胜感激

问候马特

```
<div id="myVid"></div>

        <script>

          var tag = document.createElement('script');
          tag.src = "http://www.youtube.com/player_api";
          var firstScriptTag = document.getElementsByTagName('script')[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

          var player;
          function onYouTubePlayerAPIReady() {
            player = new YT.Player('myVid', {
              height: '80%',
              width: '100%',
              events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
              }
            });
          }

          function onPlayerReady(event) {
            event.target.playVideo();
          }

          function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.ENDED) {
              getVideo();

            }
          }

        </script>< 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:37:35.737

使用 YouTube 嵌入方法需要支持**HTML5 postMessage**的现代浏览器。

您使用的 Firefox 版本是 4.0 版，但 postMessage 从**6 版**开始在 Firefox 中可用。

YouTube API 嵌入要求：
[https ://developers.google.com/youtube/iframe_api_reference#Requirements](https://developers.google.com/youtube/iframe_api_reference#Requirements)

HTML5 postMessage 参考：
[https ://developer.mozilla.org/en/DOM/window.postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)

巧合的是，如果您使用的是 Firefox 版本 6，并且您的嵌入标记已使用视频 ID 完成，那么您将受到最近两天出现的 YouTube 嵌入 API 的灾难性错误... Flash Fallback 已损坏！如果适用于您，请参阅此 SO 解决方法：
[https ://stackoverflow.com/a/10560802/1195891](https://stackoverflow.com/a/10560802/1195891)

# ruby-on-rails - 同时选择多个方面或过滤数据

> ID：10560583
> 
> 赞同：4
> 
> 时间：2012-05-12T02:29:51.403
> 
> 标签：ruby-on-rails, filter, sunspot, acts-as-taggable-on, faceted-search

**2012 年 6 月 29 日更新**

我已经设法设置了一个搜索和一个侧栏，用于使用 Sunspot 过滤搜索结果并使用 Rails 充当可标记。[我在这里](http://ericlondon.com/posts/244-setting-up-a-ruby-on-rails-project-with-faceted-solr-search-integration-using-sunspot-and-acts-as-taggable-on)关注本教程， 但我仍然无法一次选择多个过滤器。当我选择一个过滤器时，其他子类别名称仍然消失。我错过了什么？

我原来的问题是这样的：

> 我不太确定如何一次选择多个方面来过滤数据。所以我有多个子类别，即（远足、滑雪、攀登等）。我希望能够同时选择远足和攀登，因此显示的数据只是远足和攀登的那些对象。现在我选择一个（比方说徒步旅行），所有其他选项都消失了。有人可以解释吗？

下面是我的代码：

**齿轮控制器**

```
 def index
    @search = Gear.solr_search do
        exclusions = []
        fulltext params[:search]
        exclusions << with(:sub_category_name, params[:name]) if params[:name].present?
        exclusions.compact!
        exclusions = nil if exclusions.empty?
        facet :sub_category_name
        facet :sub_category_name, :exclude => exclusions, :name => :all_categories
        paginate(page: params[:page], :per_page => 15)
    end

    @gears = @search.results
  end 
```

**齿轮索引视图**

```
<div class="gears_container">
    <div class="side_bar_search">
        <%= form_tag gears_path, :method => :get do %>
          <p>
            <%= text_field_tag :keywords, params[:keywords] , class: 'gearsearchbar' %> <%= submit_tag "Search", :name => nil, class: 'btn btn-inverse gearsearchbutton'  %>

         </p>
        <% end %>

    <div class="sidebar_section">Sub Category</div>
    <ul>
    <% for row in @search.facet(:all_categories).rows %>
      <li class="sidebar_options">
        <% if params[:name].present? %>
          <strong><%= row.value %></strong>(<%= link_to "remove", :name => nil %>)
        <% else %>
          <%= link_to row.value, :name => row.value %> (<%= row.count %>)
        <% end %>
      </li>
    <% end %>
    </ul>
</div>
<div c
    <div class="search_results_gear">   
        <% @hits.each do |gear| %>
            <%= render partial: 'gear', locals: {gear: gear} %>
        <% end %>
        <div style="clear:both"></div>
     <%= will_paginate @hits, class: 'flickr_pagination' %>
         </br>
    </div>
</div> 
```

**齿轮型号**

```
class Gear < ActiveRecord::Base
  attr_accessible :title, :size, :price, :sub_category_id, :user_id, :image, :image_a, :remote_image_url, :color, :year, :latefee, :cancellation, :minrental, :policy, :about, :address, :city, :state, :zip, :sub_category_name
  belongs_to :user
  belongs_to :sub_category
  has_one :category, :through => :sub_category
  has_many :comments, :dependent => :destroy 
  has_many :line_items
  require 'carrierwave/orm/activerecord'
  mount_uploader :image, GearpicUploader
  mount_uploader :image_a, GearpicUploader
  before_destroy :ensure_not_referenced_by_any_line_item
  acts_as_taggable_on :tags

  validates :title, presence: true
  validates :size,  presence: true
  validates :price, presence: true
  validates :sub_category_id, presence: true
  validates :user_id, presence: true

  searchable do
     text :title, :size, :price, :year, :zip, :state, :city, :minrental, :about, :latefee, :color

     text :user_firstname do
          user.firstname
     end

     text :user_lastname do
          user.lastname
     end
     # **Facet Section**   

     string :size, :price, :year, :zip, :state, :city, :minrental, :latefee, :color 

     string :sub_category_name , :multiple => true, :stored => true do
       sub_category.name
     end

     string :category_name do
       category.name
     end
   end

   private
   def ensure_not_referenced_by_any_line_item
     if line_items.empty?
      return true
      else
      errors.add(:base, 'Line Items present')
      return false
     end
   end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:05:00.270

看起来您需要利用`:exclude`分面搜索选项。

```
def index
  @search = Gear.search do
    exclusions = []
    # tags, AND'd        
    if params[:tag].present?
      all_of do
        params[:tag].each do |tag|
          exclusions << with(:sub_category_name, tag)
        end
      end
    end
    exclusions.compact!
    exclusions = nil if exclusions.empty?
    facet :sub_category_name
    facet :sub_category_name, :exclude => exclusions, :name => :all_categories
    paginate(page: params[:page])
  end
  @hits = @search.results
end 
```

所以我在上面所做的是创建一个`exclusions`数组来保存过滤器的集合。该`with()`方法返回一个过滤器对象，因此我们捕获了`exclusions`数组中的所有过滤器。我们这样做是`compact!`为了从数组中删除 nil 对象，如果它是空的，我们会创建它`nil`（这是由于`:exclude`选项的限制，如果你传递一个空数组，它将无法正常工作）。然后我们`facet`就同一个`:sub_category_name`词，不包括过滤器，也给它起个名字。这`facet`将为您提供除所选类别之外的所有方面类别。

然后在您的视图中，当您显示构面选项时，您使用命名的`:all_categories`构面。

```
@search.facet(:all_categories).rows.each_with_index do |facet, index|
  # This just outputs all the facets, you can add the logic in.
  <li><%= facet.value %> (<%= facet.count %>)</li>
end 
```

# android - Monodroid ICS 无法打开数据库文件

> ID：10560584
> 
> 赞同：1
> 
> 时间：2012-05-12T02:29:57.207
> 
> 标签：android, mono, xamarin.android

我正在使用 SQLite-net 读取/访问我的数据库，它在我的 Android 2.2 模拟器上运行良好，但是当我尝试在 ICS ROM 上运行它时，我收到以下错误：

```
Could not open database file: /data/data/MBR/files/MbrDB.db3 
```

我不确定为什么它适用于 2.2 而不是 4.0，有没有人知道版本之间可能发生了变化的任何权限？

获取我正在使用的位置

```
Environment.GetFolderPath(Environment.SpecialFolder.Personal); 
```

谢谢

# c++ - 如果指针是模板值，如何删除它？

> ID：10560588
> 
> 赞同：1
> 
> 时间：2012-05-12T02:30:46.373
> 
> 标签：c++, memory-management

我有一个模板类（`Node`是 BST 中的内部类）。现在是释放内存的时候了；鉴于键或值（或两者）可能是指针，我必须弄清楚如何释放它们。

看一个例子：

```
~Node( void )
{
    if ( is_pointer< TValue >( Value ) )
    {
         delete Value;
         Value = NULL;
    }

    if ( is_pointer< TComparable >( Key ) )
    {
         delete Key;
         Key= NULL;
    }
} 
```

该`is_pointer< T >`函数背后的实现是有效的（取自[此处](https://stackoverflow.com/questions/3177686/how-to-implement-is-pointer)），但是只要我在 Key 或 Value 上按 delete，我就会得到以下信息：

```
Error   13  error C2440: 'delete' : cannot convert from 'esc::Shader' to 'void *'   c:\programming\c++\git\escalator\engine\engine\searchtree.hpp   131
Error   14  error C2440: 'delete' : cannot convert from 'esc::ShaderComparable' to 'void *' c:\programming\c++\git\escalator\engine\engine\searchtree.hpp   137
Error   12  error C2679: binary '=' : no operator found which takes a right-hand operand of type 'int' (or there is no acceptable conversion)   c:\programming\c++\git\escalator\engine\engine\searchtree.hpp   130 
```

我试过`static_cast`, `dynamic_cast`,`reinterpret_cast`等，但这些似乎都不起作用。

什么是好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T02:43:34.857

```
I must figure out how to free them if they are. 
```

不。真的-不要。那是*用户的*问题——如果他想要这种行为，他可以提供一个智能指针。毕竟，如果我想映射非拥有指针怎么办？还是需要自定义删除器？

此外，您的代码不起作用`if`，因为您无论如何都编译了死代码分支，因为您没有使用专业化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T02:39:34.863

看起来您正在存储 T 类型元素的副本，而不是像通常那样存储指针。如果您的声明`T Value;`比您的 Node 类通常不负责删除 Value 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:00:40.280

这实际上取决于您在这里使用的软件类型。除非这是一些快速测试并且您不打算重用代码，否则是的，不要费心区分指针与对象或数组。但是，如果您正在编写库代码并且您认为您的组件会被其他人重用，那么您应该注意自己的清理工作。自诞生之日起，STL vector 就成功地做到了这一点。最后，我看到了他们一直在为向量的 (First,Last) 元素调用 Destroy 函数的代码，并将值标记作为第三个参数传递给函数。如果元素只是平面标量指针（例如意味着 int*），则不需要调用析构函数。显然，实际数据已由用户分配，并且只有数据的地址已存储在向量中，所以它不应该被释放。但是，如果是存储在向量中的对象（例如，用户定义类的对象，比如说 A 类），则需要为向量中的每个元素调用析构函数 ~A() 并且在它们全部运行之后最后，应该通过使用向量分配器来释放用于存储元素的连续内存块。有关更多信息，您可以轻松地打开向量实现，它都在头文件中，查看 ~vector() 实现并让它指导您。应该通过使用向量分配器来释放用于存储元素的连续内存块。有关更多信息，您可以轻松地打开向量实现，它都在头文件中，查看 ~vector() 实现并让它指导您。应该通过使用向量分配器来释放用于存储元素的连续内存块。有关更多信息，您可以轻松地打开向量实现，它都在头文件中，查看 ~vector() 实现并让它指导您。

# iphone - 如何从服务器读取 TXT 文件

> ID：10560590
> 
> 赞同：1
> 
> 时间：2012-05-12T02:31:10.440
> 
> 标签：iphone, xcode, ios5, xcode4

这是完整的 .m 文件：

```
#import "DevotionalView.h"

@implementation DevotionalView
@synthesize mytextview;
@synthesize mystring;

    - {void} awakeFromNib {
    NSURL *myurl = [NSURL URLWithString:@"http://www.myserver.com/text.txt"];
    NSString *mystring = [NSString stringWithContentOfURL:myurl];
    mytextview.text = mystring;
}

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code
}
return self;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
// Drawing code
}
*/ 
```

@结尾

错误是：在实现上下文中缺少“@end”——@implementation DevotionalView 所在的位置——并且在 {void} 行它显示 Objective-c 方法的预期选择器。

感谢您抽出宝贵时间提供帮助！

错误是：在实现上下文中缺少“@end”——@implementation DevotionalView 所在的位置——并且在 {void} 行它显示 Objective-c 方法的预期选择器。此外，在文件末尾它说“预期的方法体”

在我遵循的教程中似乎工作正常，但它不会在 XCode 4.3 中编译。

我正在使用 Storyboard——这会改变关于 NIB 的部分吗？我为我缺乏知识而道歉 - 仍然习惯这一点。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:06:41.943

看起来你在 awakeFromNib 的空白周围有 {}，它们应该是 ()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:26:40.150

好吧，我终于解决了这个问题——从我的搜索来看，我要么搞砸了委托分配，要么搞砸了类似的事情。所以......（你的专业人士可能会为此抱怨）我打开了一个新项目（带有控制器的单个视图）并复制并粘贴了控制器、.h 和 .m 文件，然后使用了以下代码：

```
- (void)viewDidLoad
{NSError *error = nil;
NSURL *myurl = [NSURL URLWithString:@"http://www.myserver.com/test.txt"];
NSString *mystring = [NSString stringWithContentsOfURL:myurl encoding:NSUTF8StringEncoding     error:&error]; 
newtext.text = mystring; 
```

一切都很好！

# javascript - nodejs + WebSockets - 通过消息拒绝连接

> ID：10560591
> 
> 赞同：10
> 
> 时间：2012-05-12T02:31:19.287
> 
> 标签：javascript, node.js, websocket

当连接的用户过多或从不受支持的域连接时，我想向客户端提供一个有意义的错误，所以......

我写了一些 WebSocket 服务器代码：

```
var http = require('http');
var httpServer = http.createServer(function (request, response)
{
    // i see this if i hit http://localhost:8001/
    response.end('go away');
});

httpServer.listen(8001);

// https://github.com/Worlize/WebSocket-Node/wiki/Documentation
var webSocket = require('websocket');
var webSocketServer = new webSocket.server({ 'httpServer': httpServer });

webSocketServer.on('request', function (request)
{
    var connection = request.reject(102, 'gtfo'); 
}); 
```

还有一些 WebSocket 客户端代码：

```
var connection = new WebSocket('ws://127.0.0.1:8001');
connection.onopen = function (openEvent)
{
    alert('onopen');
    console.log(openEvent);
};
connection.onclose = function (closeEvent)
{
    alert('onclose');
    console.log(closeEvent);
}
connection.onerror = function (errorEvent)
{
    alert('onerror');
    console.log(errorEvent);
};
connection.onmessage = function (messageEvent)
{
    alert('onmessage');
    console.log(messageEvent);
}; 
```

我得到的只是`alert('onclose');`一个`CloseEvent`对象记录到控制台，没有任何我能找到的状态代码或消息。当我通过`ws://localhost:8001`httpServer 连接时，回调不起作用，所以我无法在那里捕捉到它。[RFC](https://www.rfc-editor.org/rfc/rfc6455)建议我应该能够在出现问题时发送除 101 之外的任何状态代码，但 Chrome 会在控制台中抛出错误`Unexpected response code: 102`。如果我打电话`request.reject(101, 'gtfo')`，暗示它是成功的，我会收到一个握手错误，正如我所期望的那样。

不太确定我还能做什么。现在是不是不可能在 Chrome 的 WebSocket 实现中获得服务器响应？

**ETA：**与此同时，这是一个非常讨厌的黑客行为，我希望这不是我最终要做的事情。

```
var connection = request.accept(null, request.origin);
connection.sendUTF('gtfo');
connection.close(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T20:05:08.617

我是 WebSocket-Node 的作者，我也在 GitHub 上发布了对相应问题的回复：[https ://github.com/Worlize/WebSocket-Node/issues/46](https://github.com/Worlize/WebSocket-Node/issues/46)

不幸的是，当拒绝客户端连接时，WebSocket 协议没有提供任何特定机制来在此阶段提供关闭代码或原因。拒绝采用 HTTP 响应的形式，其 HTTP 状态类似于 40x 或 50x。规范允许这样做，但没有定义客户端应尝试从此类响应中预测任何特定错误消息的特定方式。

实际上，只有当您拒绝来自不允许来源的用户（例如，来自另一个网站的人试图未经许可将用户连接到您的 websocket 服务器）或用户无权连接时，才应在此阶段拒绝连接（即他们没有登录）。后一种情况应由您网站上的其他代码处理：如果用户未登录，则他们不应尝试连接 websocket 连接。

WebSocket-Node 允许您在此处指定的代码和原因是 HTTP 状态代码（例如 404、500 等）以及作为非标准“X-WebSocket-Reject-Reason”HTTP 标头包含在回复。在使用数据包嗅探器（例如 WireShark）分析连接时，它非常有用。当以这种方式拒绝连接时，没有任何浏览器可以向客户端 JavaScript 代码提供拒绝代码或原因，因为 WebSocket 规范中没有提供它。

# python - 自定义 Python CSV 分隔符

> ID：10560592
> 
> 赞同：0
> 
> 时间：2012-05-12T02:31:52.357
> 
> 标签：python, csv

如何忽略双引号之间的逗号并删除不在双引号之间的逗号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T02:35:45.103

包括电池 - 只需使用 Python 随附的[`csv`模块](http://docs.python.org/library/csv.html)即可。

例子：

```
import csv

if __name__ == '__main__':
    file_path = r"/your/file/path/here.csv"
    file_handle = open(file_path, "r")
    csv_handle = csv.reader(file_handle)
    # Now you can work with the *values* in the csv file. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T05:34:11.003

只是为了您的兴趣，您*可以*（大部分）使用正则表达式来执行此操作；

```
mystr = 'No quotes,"Quotes",1.0,42,"String, with, quotes",1,2,3,"",,""'
import re
csv_field_regex = re.compile("""
(?:^|,)         # Lookbehind for start-of-string, or comma
(
    "[^"]*"     # If string is quoted: match everything up to next quote
    |
    [^,]*       # If string is unquoted: match everything up to the next comma
)
(?=$|,)         # Lookahead for end-of-string or comma
""", re.VERBOSE)

m = csv_field_regex.findall(mystr)

>>> pprint.pprint(m)
['No quotes',
 '"Quotes"',
 '1.0',
 '42',
 '"String, with, quotes"',
 '1',
 '2',
 '3',
 '""',
 '',
 '""'] 
```

这处理除了出现在带引号的字符串中的转义引号之外的所有内容。也可以处理这种情况，但是正则表达式变得更糟糕；这就是我们有`csv`模块的原因。

# mysql - MySQL 随机，间隔超过 40+ 百万行

> ID：10560594
> 
> 赞同：4
> 
> 时间：2012-05-12T02:33:18.440
> 
> 标签：mysql, random, solr

我一直没有问，因为我觉得这个问题被问了这么多，但仍然缺乏明确的答案：

*对象*表：40M+ 行，以 UPC、EIN、ISBN 作为 obj_id 主键填充。差距

*Obj_Cat* 表：将对象链接到类别。|的列 obj_id | cat_id |

**问题：**返回 5 个非顺序随机 obj_id 的最佳方法是什么？有没有比我列出的更好的方法？

**解决方案1：** `SELECT objects.obj_id FROM objects left join obj_cat on objects.obj_id=obj_cat.obj_id WHERE obj_cat.cat_id=cat_id ORDER BY RAND() LIMIT 1;`运行5次

*   大桌子很慢。

**解决方案2：** `SELECT obj_id FROM objects WHERE obj_id >= (SELECT FLOOR( MAX(obj_id) * RAND()) FROM` objects`) LIMIT 1;`运行5次（不包括obj_cat join，让它更容易理解）

*   如果您的行没有间隙或间隙可忽略不计，则为最佳解决方案。非常快。

*   不适用于类别，因为编号不可避免地会出现空白。

**解决方案3：** `SELECT FLOOR(RAND() * COUNT(objects.*)) AS`偏移`FROM objects, obj_cat WHERE objects.obj_id=obj_cat.obj_id AND obj_cat.cat_id=cat_id; SELECT obj_id FROM objects LIMIT $offset, 1`运行5次

*   非常灵活。比解决方案 1 快得多。适用于间隙。但在 40M+ 行时，单个 'LIMIT $offset, 1' 仍可能需要 1 分钟。

我使用了解决方案 3，但速度很慢。我目前的解决方案是移动使用 Solr randomsortfield，因为在 fq 中指定我的类别很容易。

**索尔解决方案：** `?q=*&fl=obj_id&fq=cat:(cat_id)&sort=random_* desc&rows=5`

*   相当快，每个类别大约需要 45 秒，但会在运行中返回 5 个非顺序结果。

人们在处理大型数据集时是否发现了更好的方法？我知道这似乎是一个重复的问题，但我想我会用 40M+ 表贡献我的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:43:34.130

对于这么大的数据集，您无法进行这样的即时计算。您需要利用时间记忆权衡。在 obj_cat 表中创建一个新的无符号整数索引列，其宽度大于最大行数，并用随机数填充每一行。这样，您可以简单地生成一个随机数并直接选择最接近的匹配五次。这将比尝试使用 ORDER BY RAND() 快几个数量级。

# jquery - 用 jquery 编写的这条语句在 IE7/8 上导致语法错误是什么？

> ID：10560599
> 
> 赞同：0
> 
> 时间：2012-05-12T02:35:19.693
> 
> 标签：jquery, internet-explorer, syntax

我现在正在编写 javascript 代码，其中一条语句是：

```
if ($(this).is(":select")) {
    if ($(this).find("option").filter(":selected").length > 0) {
        var txt__ = $(this).find("option:selected:eq(0)").val();
        if ($.trim(txt__) != '') {
            flag_ = true;
        }
    }
} 
```

在 Chrome Firefox 和 IE9 上，没问题。但是在 7/8 上，它一直告诉我“语法错误”，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:53:30.457

问题出在您的第一行：

```
if ($(this).is(":select")) { 
```

编辑：根据 OP 的评论修复响应

我相信要么

```
if ($(this).tagName.toLowerCase() == "select") { 
```

或者

```
if ($(this).is(":input[type=select]")) { 
```

应该做的伎俩。

# c# - 来自 P/Invoke 函数的奇怪行为 - 魔术循环

> ID：10560604
> 
> 赞同：4
> 
> 时间：2012-05-12T02:36:24.910
> 
> 标签：c#, pinvoke

我的 C# 程序有一个非常奇怪的行为。我在这个程序中使用了四种 ''hacky'' pinvoke 方法：GlobalKeyHooking、HotKey Registering、SetForegroundWindow/GetForegroundWindow 和 SendKeys.Send/SendWait。

这是我不理解的行为。我在一个程序中窃取了 Ctrl+V，其中标准的剪切/复制和粘贴例程被一个出现和消失的列表框中的自动完成列表替换。在某些装有 Windows 7 的计算机上，我的程序就像一个魅力，在另外 50% 的装有 Windows 7 的计算机上（遗憾的是没有 VS2010 来调试它），出现了一个非常奇怪的循环——内部——一种方法。由于 Ctrl 和 V 本身被钩住了，我已经阻止了该方法被无限触发。没关系。但是方法内部出现了另一个循环。

简而言之：myDebugValue 增加，直到达到 23-24-25！所以在决定停止之前，有些东西试图多次执行一个功能。

有没有人已经看到过类似的不良循环？即使没有 try/catch 块，它也在函数内部弹跳。

某些 P/Invokes 函数会在某些 Windows 7 上崩溃，而在其他操作系统上不会崩溃吗？

P/Invokes 是否有自己的不可见的低级汇编错误处理程序 try/catch，比我的 C# 程序执行更强大？

在视觉上，当它运行时，我看到我的程序 UI 快速闪烁了很多次，我猜是 25 次。

```
 private bool getOutOfHere = false;

    private int myDebugValue = 0;

    private void globalKeyHooking_KeyUp(object sender, KeyEventArgs e)
    {
        if (getOutOfHere) return;
        myDebugValue = 0;
        if (e.KeyCode == Keys.LControlKey) 
        {
            getOutOfHere = true;
            SendKeys.SendWait("^v");
            getOutOfHere = false;
            myDebugValue++; 
        }                
    } 
```

我尝试使用 2.0、3.0 和 4.0 进行编译，并且在相同的 4 台计算机上，在所有情况下，它的比率仍然相同：50% 崩溃，50% 有效。

[编辑]

我真的认为 SendKeys.Send 在装有 Windows 7 的不同计算机上的行为不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:25:45.507

不想回答我自己的问题，但总有第一次。我决定使用类似于[InputSimulator](http://inputsimulator.codeplex.com/)的方法来实现我的目标并避免使用 SendKeys。现在，一切都在所有机器上完美运行。

我看到 InputSimulator 与我所有使用 Windows 7 的机器兼容，并且使用的是 SendInput 而不是 SendMessage 或 SendKeys，所以我在我的应用程序中使用了 SendInput。

# python - 获取列表中 X 个最大数字的索引

> ID：10560607
> 
> 赞同：1
> 
> 时间：2012-05-12T02:37:07.193
> 
> 标签：python, algorithm

除了 len() 或 range() 之外，请不要使用内置插件。我正在准备期末考试。

这是我的意思的一个例子。

```
def find_numbers(x, lst):

lst = [3, 8, 1, 2, 0, 4, 8, 5]

find_numbers(3, lst) # this should return -> (1, 6, 7) 
```

我没有完全尝试过....无法找出最好的解决方法：

```
def find_K_highest(lst, k):
 newlst = [0] * k
 maxvalue = lst[0]

 for i in range(len(lst)):
    if lst[i] > maxvalue:
        maxvalue = lst[i]
        newlst[0] = i 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T02:50:30.287

从列表中取出前 3 (x) 个数字。最大值的最小值是这些。在您的情况下：3、8、1。它们的索引是（0、1、2）。构建它们的对（（3,0），（8,1），（1,2））。

现在按最大值的大小对它们进行排序：((8,1), (3,0), (1,2))。

使用这个初始列表，您可以递归地遍历列表的其余部分。将最小值 (1, _) 与列表中的下一个元素 (2, 3) 进行比较。如果它更大（它是），将其排序到列表（（8,1），（3,0），（2,3））中并丢弃最小的。

一开始你在前三名中有很多变化，但后来，它们变得很少。当然，遍历时，您还必须保留有关最后位置（3、4、5，...）的书。

前 N 个元素的插入排序应该非常高效。

[这是 Scala 中的类似问题，](https://stackoverflow.com/q/5674741/312172)但不需要报告索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T02:55:46.587

我不知道发布解决方案是否很好，但这似乎可行：

```
def find_K_highest(lst, k):
    # escape index error
    if k>len(lst):
        k=len(lst)
    # the output array
    idxs = [None]*k
    to_watch = range(len(lst))
    # do it k times
    for i in range(k):
        # guess that max value is at least at idx '0' of to_watch
        to_del=0
        idx = to_watch[to_del]
        max_val = lst[idx]
        # search through the list for bigger value and its index
        for jj in range(len(to_watch)):
            j=to_watch[jj]
            val = lst[j]
            # check that its bigger that previously finded max
            if val > max_val:
                idx = j
                max_val = val
                to_del=jj
            # append it
        idxs[i] = idx
        del to_watch[to_del]
        # return answer
    return idxs 
```

PS我试图解释每一行代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T03:12:56.207

你可以使用列表方法吗？（例如`append`，，？）`sort`。`index`如果是这样，这应该有效（我认为......）

```
def find_numbers(n,lst):
    ll=lst[:]
    ll.sort()
    biggest=ll[-n:]
    idx=[lst.index(i) for i in biggest] #This has the indices already, but we could have trouble if one of the numbers appeared twice
    idx.sort()
    #check for duplicates.  Duplicates will always be next to each other since we sorted.
    for i in range(1,len(idx)):
       if(idx[i-1]==idx[i]):
         idx[i]=idx[i]+lst[idx[i]+1:].index(lst[idx[i]]) #found a duplicate, chop up the input list and find the new index of that number
         idx.sort()
    return idx

lst = [3, 8, 1, 2, 0, 4, 8, 5]

print find_numbers(3, lst) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T03:59:29.600

老兄。你有两种方法可以解决这个问题。

第一种方法是聪明。把你的老师赶出去。她正在寻找的是递归。您可以在没有递归和没有内置函数或方法的情况下编写此代码：

```
#!/usr/bin/python

lst = [3, 8, 1, 2, 0, 4, 8, 5]

minval=-2**64

largest=[]

def enum(lst): 
    for i in range(len(lst)): 
        yield i,lst[i]

for x in range(3):
    m=minval
    m_index=None
    for i,j in enum(lst):
        if j>m: 
            m=j
            m_index=i

    if m_index:        
        largest=largest+[m_index]
        lst[m_index]=minval       

print largest 
```

这行得通。它很聪明。带那个老师！！！但是，你会得到一个C或更低的......

或者——你可以成为老师的宠物。写成她想要的样子。您将需要一个列表的递归最大值。剩下的很简单！

```
def max_of_l(l):
    if len(l) <= 1:
        if not l:
            raise ValueError("Max() arg is an empty sequence")
        else:
            return l[0]
    else:
        m = max_of_l(l[1:])
        return m if m > l[0] else l[0]

print max_of_l([3, 8, 1, 2, 0, 4, 8, 5]) 
```

# java - 当您在 jvm（ubuntu 框）之外时，如何终止 jvm 中的挂起连接？

> ID：10560608
> 
> 赞同：0
> 
> 时间：2012-05-12T02:38:11.263
> 
> 标签：java, httpurlconnection

我有一个应用程序在带有 jdk 1.6 的 jboss 4.2.2 服务器中运行。该程序有一个错误，它在打开连接时没有设置 http 连接超时。因此，当第三方出现问题时，连接会永远挂起，这也会导致线程挂起。很快我们的线程就用完了。但是，由于发布周期的原因，我们无法立即进行修复。我想知道有没有办法从 jvm 外部终止网络连接？那么线程可以释放回线程池吗？我可能有很多连接到同一个第三方站点，所以很高兴找出问题连接并杀死那个连接。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T03:14:46.597

您可以 grep [netstat](http://en.wikipedia.org/wiki/Netstat)的输出并使用[tcpkill 终止](http://en.wikipedia.org/wiki/Tcpkill)连接，然后使用[cron](http://en.wikipedia.org/wiki/Cron)运行它。

然而，这只能是一个非常临时的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T03:29:32.313

[这个 ServerFault Q & A](https://serverfault.com/questions/315640/how-to-kill-a-tcp-connection-using-tcpkill-utility)可能是相关的。它解释说，`tcpkill`只有在连接上有活动流量时才会起作用。

（这是因为......显然......`tcpkill`通过发送 TCP RESET 数据包来工作。为了让它工作，它需要知道正确的序列号，它只能通过检查会话的其他数据包来解决这个问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T05:42:55.627

在搜索我自己的问题时，我遇到了一个关于如何从外部杀死线程的很棒的教程。

[http://www.rhcedan.com/2010/06/22/killing-a-java-thread/](http://www.rhcedan.com/2010/06/22/killing-a-java-thread/)

# hibernate-annotations - 休眠搜索不会返回正确的结果

> ID：10560615
> 
> 赞同：0
> 
> 时间：2012-05-12T02:39:36.677
> 
> 标签：hibernate-annotations, hibernate-search

我为休眠搜索构建了一个示例项目，它可以正常工作，没有任何异常，但是当我搜索一个字符串时，我有一些带有该字符串的对象，它返回空。我不知道我该怎么办！！！有人可以帮助我...项目是基于 maven 的，我使用 hibernate 注释来进行休眠和休眠搜索。这是我的 hibernate.cfg.xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                         "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">
            jdbc:mysql://localhost:3306/eprnews
        </property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.connection.password">***</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="hibernate.show_sql">true</property>
        <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
        <!-- 
        <property name="hibernate.hbm2ddl.auto">create-drop</property>

        Hibernate Search --> 
        <!-- org.hibernate.search.store.FSDirectoryProvider --> 
        <!-- org.hibernate.search.store.RAMDirectoryProvider for test -->
        <!-- 
        <property name="hibernate.search.default.directory_provider">org.hibernate.search.store.FSDirectoryProvider</property>
         -->
        <property name="hibernate.search.default.directory_provider">filesystem</property>
        <property name="hibernate.search.default.indexBase">./indexes</property>
        <!-- 
         -->
        <property name="hibernate.search.worker.execution">async</property>
        <property name="hibernate.search.default.optimizer.transaction_limit.max">100</property>

        <!-- Mapped classes -->
        <mapping class="net.leemoo.test.entity.NewsEntity"/>
    </session-factory>
</hibernate-configuration> 
```

这是我的实体：

```
@Entity
@Table(name="news")
@Indexed
@AnalyzerDef(
            name = "PersianAnal",
            charFilters = @CharFilterDef(factory = PersianCharFilterFactory.class),
            tokenizer = @TokenizerDef(factory = StandardTokenizerFactory.class),
            filters={
                        @TokenFilterDef(factory = ArabicNormalizationFilterFactory.class),
                        @TokenFilterDef(factory = PersianNormalizationFilterFactory.class)
                    }
            )
public class NewsEntity {

    @Id
    @GeneratedValue
    private Long id;

    @Field
    @Analyzer(definition="PersianAnal")
    private String title;

    @Field
    @Analyzer(definition="PersianAnal")
    private String newsAbstract;

    @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO)
    @Analyzer(definition="PersianAnal")
    private String content;

    @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO)
    @DateBridge(resolution=Resolution.DAY)
    private Date creationDate;

    @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO)
    @DateBridge(resolution=Resolution.DAY)
    private Date modifiedDate;

    private Integer viewsCounter;

    @Field
    @Analyzer(definition="PersianAnal")
    private String keywords;

    private Boolean jqueryNews;

    private Boolean photoNews;
        and setters and getters... 
```

这是我用于搜索的代码：

```
Session session = HibernateUtil.getSessionFactory().openSession();

        session.beginTransaction();
        FullTextSession fullTextSession = Search.getFullTextSession(session);
        try {
//          fullTextSession.createIndexer().startAndWait();
            QueryBuilder gb = fullTextSession.getSearchFactory().buildQueryBuilder().forEntity(NewsEntity.class).get();
            Query query = gb.keyword().
                onFields("title", "newsAbstract", "content").
                matching("test").createQuery();
            org.hibernate.Query hibQuery = fullTextSession.createFullTextQuery(query, NewsEntity.class);
            List<NewsEntity> result = (List<NewsEntity>)hibQuery.list();
            System.out.println(result.size());
        } catch (Exception e) {
//          e.printStackTrace();
        }

        session.getTransaction().commit();
        session.close(); 
```

我该怎么办？请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:27:30.247

我认为我犯了一个愚蠢的错误，因为我在最后一个代码短语中评论了我的索引创建者。我应该在开始时运行一次以创建索引。再次抱歉耽误了您的时间。

# xcode - Mac App Store 声称我的应用程序的较新版本已安装

> ID：10560619
> 
> 赞同：5
> 
> 时间：2012-05-12T02:40:13.097
> 
> 标签：xcode, macos, app-store, mac-app-store

我正在尝试从 Mac App Store 安装我的应用程序，因为它已经发布。我正在使用与我开发应用程序的机器相同的机器。出于某种原因，App Store 声称“此应用程序的较新版本已安装在此计算机上。” 自从我提交以来，我还没有碰过版本号，所以这很奇怪。

我已从 Applications、Library/Preferences、Library/Application Support、Library/Caches、/var 和 Trash 中删除了该应用程序的所有引用。我还从 Xcode 中清理了产品。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-28T17:11:56.837

我在 Mountain Lion 上遇到了 CoBook 的这个问题，在我发现这个之前似乎没有任何效果：

`/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -kill -r -domain local -domain system -domain user`

来源：[http ://web.archive.org/web/20130519023616/http://www.hacktheday.com/force-reinstall-application-downloaded-from-mac-app-store](http://web.archive.org/web/20130519023616/http://www.hacktheday.com/force-reinstall-application-downloaded-from-mac-app-store)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T03:19:52.593

要解决此问题，您需要执行两个步骤。

1.  删除应用的所有实例。~/Library/Developer/Xcode/DerivedData/ 的主文件夹中可能隐藏着副本
2.  使用以下命令重置`user`启动服务数据库中的域 `/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -kill -r -domain user`

lsregister 命令管理启动服务数据库，或跟踪安装在 Mac 上的应用程序以及它们打开的文件类型的数据库。

由于您的 XCode DerivedData 存在于您的个人用户目录中，因此只需要重置`user`域（与 Mat E. 的其他答案不同，它也重置了`system`域）。`local`只有重置此域才能防止再次出现有关首次运行应用程序的不必要警告。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T20:40:36.150

转到 ~/Library/Developer/Xcode/DerivedData/ 并删除应用程序的构建文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T04:38:43.127

这再次发生在我身上，但不幸的是其他解决方案不起作用。这就是最终的工作：

1.  打开应用商店。从菜单栏中单击商店 > 登录
2.  单击 App Store 窗口顶部的“购买”。
3.  在列表中选择您的应用。然后右键或控制单击您看到已安装的位置，然后单击安装。
4.  确保并使用与原始购买相同的 Apple ID。

这也适用于免费应用程序。

# python - Google App Engine，上传图片

> ID：10560620
> 
> 赞同：2
> 
> 时间：2012-05-12T02:40:25.953
> 
> 标签：python, html, google-app-engine

我正在尝试学习 Web 应用程序开发。我目前正在使用 Google App Engine 来创建应用程序。我正在尝试在我的网站上显示图像，但该网站只显示替代文本。

我第一次尝试这个时，我不知道静态文件。一旦我解决了这个问题，图像的请求行就会显示：'"GET /images/pic.jpg HTTP/1.1" 200 -'。当我运行 dev_appserver 时，它显示一条警告说我需要 python 模块“PIL”来进行成像。一旦我下载并安装，警告消失了，但它仍然不会加载图片！请求行仍然显示它找到了图像。但所有网站显示的是替代文本！

无论如何，这是 app.yaml 和脚本的代码：（注意：我使用的是 python 2.5 的代码）

------------app.yaml------------

```
application: mysite
version: 1
runtime: python
api_version: 1

handlers:
- url: /.*
  script: myscript.py

- url: /images
  static_dir: images 
```

- - - - - 脚本 - - - - - -

```
template = """
        <body>
                <br>
                <br>
                <img src="/images/pic.jpg" alt="Clone Pic" width="100", height="70"/><br>
        </body>
"""
print "Content-Type: text/html"
print template 
```

* * *

这是我的应用程序目录的样子：

```
Root

   app.yaml

   script.py

   images

      pic.jpg 
```

我最近发现即使我在脚本中更改了图像目录的名称

```
<img src="/foo/pic.jpg...) 
```

请求行仍然说没问题

```
"GET /foo/pic.jpg HTTP/1.1" 200 - 
```

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T05:47:58.653

处理程序的顺序很重要。/.* 匹配每个 URI，因此您通常希望在最后。尝试以下...

```
handlers:
- url: /images
  static_dir: images

- url: /.*
  script: myscript.py 
```

此外，请确保您的图像文件位于您在 static_dir 中指定的目录 images 下。

希望这可以帮助。

# php - 如何采用多行输入表单用户并在 PHP 中显示相同

> ID：10560622
> 
> 赞同：2
> 
> 时间：2012-05-12T02:40:45.290
> 
> 标签：php, html, forms, textarea

我搜索了很多文章，但我找不到合适的。我正在尝试从用户输入多行文本并按原样显示它们。我正在使用 textarea 标签，但页面不工作输入值显示在一行中，即使我按下输入并开始一个新行。
请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T02:41:40.047

[`nl2br()`](http://us3.php.net/manual/en/function.nl2br.php)在回显输出时使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T03:13:43.857

已经提到`nl2br()`的是一种方法；

`<pre> .. </pre>`另一种方法是在HTML 标记中回显输出。

# sql - HBase中Order By操作的等价物

> ID：10560623
> 
> 赞同：5
> 
> 时间：2012-05-12T02:40:58.880
> 
> 标签：sql, hbase

我正在做一个使用 HBase 的项目。即使我尽可能好地形成了行键，但在某些情况下，我仍然需要按升序或降序获得结果。HBase 中有什么相当于 MySQL 中的“order by”操作的吗？或者是否可以在 HBase 中对特定列限定符进行排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T03:43:14.270

不; 您需要按照在行键中的排序顺序读取数据，然后进行自己的排序（例如在 java 或您使用的任何语言中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-29T05:32:36.533

我知道帖子很旧，但供将来参考。Scan (Hbase 0.98+) 现在支持`setReversed`

```
public Scan setReversed(boolean reversed)
  Set whether this scan is a reversed one
  This is false by default which means forward(normal) scan.

Parameters:
 reversed - if true, scan will be backward order
Returns: 
```

参考：- [Hbase 扫描教程](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Scan.html)

# java - ListView 适配器中“convertView”的用途是什么？

> ID：10560624
> 
> 赞同：29
> 
> 时间：2012-05-12T02:41:19.387
> 
> 标签：java, android

在android中，我通常使用`MyAdapter extends ArrayAdapter`创建视图，`ListView`因此，我必须重写该函数

```
public View getView(int position, View convertView, ViewGroup parent) {
    // somecode here
} 
```

但是，我不知道具体做什么`convertView`和`parent`做什么！有人有建议吗？更详细，更多帮助！谢谢！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-12T02:46:02.317

从文档中，

> convertView - 如果可能的话，要重用的旧视图。注意：在使用之前，您应该检查此视图是否为非空且类型合适。如果无法将此视图转换为显示正确的数据，则此方法可以创建一个新视图。

换句话说，此参数严格用于提高您的`Adapter`. 当 a`ListView`使用 an`Adapter`用 s 填充其行时，适配器通过调用每一行来`View`用一个对象填充每个列表项。Adapter 使用来回收不再使用的旧对象。通过这种方式，可以向适配器发送不再显示的旧的“回收”视图对象，而不是在适配器每次想要显示新列表项时实例化一个全新的对象。这就是参数的目的。`View``getView()``convertView``View``ListView``convertView`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-12T04:32:49.897

`convertView`用于重用旧视图。

请了解android中的`Adapter` [功能](https://developer.android.com/reference/android/widget/Adapter.html#getView(int,%20android.view.View,%20android.view.ViewGroup))。`Adapter`使您可以使用新数据重用某些视图。

所以如果一个列表有 15 个项目，但是 window 只能显示 5 个项目，那么一开始`convertView`会是 null，我们需要为这五个项目创建新的视图，但是当你向下滚动时，你有两个选择，要么创建 6 -10 个视图，或重新使用旧视图并将新数据加载到这些视图中。 `Adapter`并使`convertView`您能够执行后一种方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-12T02:46:05.847

convertView 是不可见的 ListView 项缓存，因此可以重复使用。它让 ListView 不需要创建很多 ListItem，从而节省内存并使 ListView 更加流畅。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view;
    if(convertView == null) {
        view = this.inflator.inflate(android.R.layout.simple_list_item_1, parent, false);
    }
    else {
        view = convertView;
    }
    // remaining implementation
    return view;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-21T17:36:58.480

**较短的版本**：

请阅读@Alex Lockwood 和@jeet 的回答。

**我的回答**：

在为什么之前，使用in的*更好/正确*的方法是什么？[Romain Guy 在此视频](https://www.youtube.com/watch?v=N6YdwzAvwOA)中进行了很好的解释。`convertView``getView()`

一个**例子**，

```
@Override
 public View getView(final int position, View convertView, ViewGroup parent)            {
   View rowView = convertView;
   ViewHolder holderObject;

 if (rowView == null) {
     rowView = inflater.inflate(R.layout.list_single_post_or_comment, parent, false);
     holderObject = new HolderForContent();
     mapHolder(holderObject, rowView);
     rowView.setTag(holderObject);
   } else {
     holderObject = (HolderForContent) convertView.getTag();
   }
   setHolderValues(holderObject, position);
   return rowView;
 }

 private class ViewHolder {
    TextView mTextView;
 }

 mapHolder(holderObject, rowView) {
    //assume R.id.mTextView exists
    holderObject.mTextView = rowView.findViewById(R.id.mTextView);
 }

 setHolderValues(holderObject, position) {
    //assume this arrayList exists
    String mString = arrayList.get(position).mTextViewContent;
    holderObject.mTextView.setText(mString);
 } 
```

以上只是一个示例，您可以遵循任何类型的模式。但**记住这一点**，

```
@Override
 public View getView(final int position, View convertView, ViewGroup parent) {

   if (convertView == null) {
        // todo : inflate rowView. Map view in xml.
   } else {
        // todo : get already defined view references
   }

   // todo : set data to display

 return rowView;

 } 
```

现在来的**目的**。*为什么*？`convertView`_

 *`convertView`用于**性能优化**[[参见](https://dl.google.com/io/2009/pres/Th_0230_TurboChargeYourUI-HowtomakeyourAndroidUIfastandefficient.pdf)Romain Guy 幻灯片 14 中的图表]，不重新创建已经创建的视图。

**来源**：欢迎任何更正。我实际上通过这些链接收集了这些信息，

阅读`getView()`Android 开发者[文档](https://developer.android.com/reference/android/widget/Adapter.html#getView(int,%20android.view.View,%20android.view.ViewGroup))。

`getView()`Romain Guy 在 Google IO 2009的[视频](https://www.youtube.com/watch?v=N6YdwzAvwOA)“Turbo Charge Your UI”中谈到了用于演示的[材料。](https://dl.google.com/io/2009/pres/Th_0230_TurboChargeYourUI-HowtomakeyourAndroidUIfastandefficient.pdf)

Lucas Rocha的精彩[博客](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)。

那些想深入研究源代码的人：[ListView](https://github.com/android/platform_frameworks_base/blob/dcce1216b0066f3f9ed1b01a485684e8617e7ea4/core/java/android/widget/ListView.java)和一个示例[实现](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/widget/ArrayAdapter.java#369)`getView()`可以在 arrayAdapter 的源代码中看到。

**类似的 SO 帖子。**

[什么是convertview-parameter-in-arrayadapter-getview-method](https://stackoverflow.com/questions/4382176/what-is-convertview-parameter-in-arrayadapter-getview-method)

[我如何选择将视图转换为重用](https://stackoverflow.com/questions/27099455/how-do-i-choose-convertview-to-reuse)

[当创建您自己的自定义适配器时，getview 方法如何工作](https://stackoverflow.com/questions/10120119/how-does-the-getview-method-work-when-creating-your-own-custom-adapter)*

# javascript - 无法让简单的引导模式工作

> ID：10560630
> 
> 赞同：30
> 
> 时间：2012-05-12T02:43:03.663
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog

我试图让一个简单的引导程序的模态样本工作，我按照[这个文档](http://igotstamp.appspot.com/pages/javascript)说“你可以在你的页面上轻松激活模态，而无需编写一行 javascript。只需给一个元素一个 data-controls-modal 属性对应于模态元素 id，...”，但我已尽我所能，并且进行了大量研究，仍然无法让这个简单的模态工作。

```
<div class="modal" id="myModal">
<div class="modal-header">
<button class="close" data-dismiss="modal">×</button>
<h3>Modal header</h3>
</div>
<div class="modal-body">
<p>One fine body…&lt;/p>
</div>
<div class="modal-footer">
<a href="#" class="btn">Close</a>
<a href="#" class="btn btn-primary">Save changes</a>
</div>
</div> 
```

我有这个：

```
<a class="btn" data-controls-modal="myModal">Launch Modal</a> 
```

或这个：

```
<a class="btn" data-toggle="modal" href="#myModal" >Launch Modal</a> 
```

按钮激活模态，我也在页面上加载了 bootstrap-modal.js。除非我添加了一条 javascript 行来处理“Launch Modal”点击事件，否则当我点击“Launch Modal”时，什么都没有发生，有什么我错过的吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-17T10:11:43.857

我终于从“Sven”找到[了这个解决方案并解决了这个问题。](http://groups.google.com/group/twitter-bootstrap/browse_thread/thread/3468c8c6257afc8f?pli=1)我所做的是将“bootstrap.min.js”包含在：

```
<script src="bootstrap.min.js"/> 
```

代替：

```
<script src="bootstrap.min.js"></script> 
```

它解决了看起来很奇怪的问题。谁能解释为什么？

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-12T03:43:30.730

**Fiddle 1**：twitter bootstrap 网站上使用的模态的复制品。（这是默认情况下不显示的模式，但在您单击演示按钮时会启动。）

[http://jsfiddle.net/9RcDN/](http://jsfiddle.net/9RcDN/)

* * *

**Fiddle 2**：引导文档中描述的模式的副本，但它包含必要的元素以避免使用任何 javascript。尤其要注意div`hide`上包含的类，以及关闭按钮上的使用。`#myModal``data-dismiss="modal"`

[http://jsfiddle.net/aPDVM/4/](http://jsfiddle.net/aPDVM/4/)

```
<a class="btn" data-toggle="modal" href="#myModal">Launch Modal</a>

<div class="modal hide" id="myModal"><!-- note the use of "hide" class -->
  <div class="modal-header">
    <button class="close" data-dismiss="modal">×</button>
    <h3>Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a><!-- note the use of "data-dismiss" -->
    <a href="#" class="btn btn-primary">Save changes</a>
  </div>
</div>​ 
```

* * *

还值得注意的是，您使用的网站是在 bootstrap 2.0 上运行的，而[官方的 twitter bootstrap 网站](http://twitter.github.com/bootstrap/)是在 2.0.3 上运行的。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-07-31T21:49:52.240

还可以看看 BootBox，在引导模式中显示警报和确认框非常简单。[http://bootboxjs.com/](http://bootboxjs.com/)

实现就像这样简单：

正常警报：

```
bootbox.alert("Hello world!"); 
```

确认：

```
bootbox.confirm("Are you sure?", function(result) {
  Example.show("Confirm result: "+result);
}); 
```

提示：

```
bootbox.prompt("What is your name?", function(result) {                
      if (result === null) {                                             
        Example.show("Prompt dismissed");                              
      } else {
        Example.show("Hi <b>"+result+"</b>");                          
      }
}); 
```

甚至自定义：

```
 bootbox.dialog("I am a custom dialog", [{
    "label" : "Success!",
    "class" : "btn-success",
    "callback": function() {
        Example.show("great success");
    }
}, {
    "label" : "Danger!",
    "class" : "btn-danger",
    "callback": function() {
        Example.show("uh oh, look out!");
    }
}, {
    "label" : "Click ME!",
    "class" : "btn-primary",
    "callback": function() {
        Example.show("Primary button");
    }
}, {
    "label" : "Just a button..."
}]); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-12-21T09:12:18.210

我也遇到了 Modals 的问题。我应该在***bootstrap.min.js***之前声明***jquery.min.js***（在我的布局页面中）。来自官方网站：“所有插件都依赖于 jQuery（这意味着 jQuery 必须包含**在**插件文件之前）”

 **** * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-16T14:12:36.473

我也遇到这个问题。我包括 bootstrap.js 和 bootstrap-modal.js。如果您已经有 bootstrap.js，则不需要包含 popover。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-20T22:05:40.260

对我来说，当我单击按钮标签时，引导模式显示和消失（在标记中，模式仅使用数据属性显示和隐藏）。在我的 gulpfile.js 中，我添加了 bootstrap.js（具有模态逻辑）和 modal.js 文件。所以我认为在浏览器解析并执行这两个文件之后，两个点击事件处理程序被附加到特定的 dom 元素（每个文件一个），所以一个显示模态另一个隐藏模态。希望这可以帮助某人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-16T21:25:55.833

尝试跳过 p 标签或将其替换为 h3 标签或类似标签。代替：

`<p>One fine body…&lt;/p>`

和

`<h3>One fine body…&lt;/h3>`

它对我有用，我不知道为什么，但似乎 p 标签与某些版本的 Bootstrap 不完全兼容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-12T21:11:48.853

更好的解决方案是在没有 jquery 的情况下加载 bootstrap.js 的扭曲版本。从[http://daniemon.com/blog/bootstrap-without-jquery/ 获取](http://daniemon.com/blog/bootstrap-without-jquery/)

```
<script src=".../bootstrap-without-jquery.min.js"></script> 
```

这样做可以省去脚本标签的麻烦。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-08T01:47:10.493

还，

如果您从 Visual Studio 运行页面并安装了引导程序包，您需要确保两件事

1.  您还获得了 Bootsrap 模态对话框包（非常重要）
2.  如果您使用捆绑，您已将其添加到 bundle.config。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-24T16:24:56.320

我在使用 Angular CLI 时遇到了同样的问题。我需要`bootstrap.js.min`在**.angular-cli.json**文件中导入文件：

```
 "scripts": ["../node_modules/jquery/dist/jquery.min.js",
              "../node_modules/bootstrap/dist/js/bootstrap.min.js"], 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-03-16T11:05:26.710

使用模态的一种简单方法是使用[eModal](http://saribe.github.io/eModal)！

来自[github](https://github.com/saribe/eModal)的前：

1.  链接到 eModal.js`<script src="//rawgit.com/saribe/eModal/master/dist/eModal.min.js"></script>`
2.  使用 eModal 显示警报、ajax、提示或确认的模式

    ```
    // Display an alert modal with default title (Attention)
    eModal.alert('You shall not pass!'); 
    ```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-10-03T09:30:05.283

您必须调用 Bootstrap jQuery 插件才能触发它。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-11-19T07:22:31.547

```
<div class="modal fade bs-example-modal-lg" id="{{'modal'+ cartModal.index}}">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"  aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
          <div class="col-lg-6" >
            <p class="prodTitle" ng-bind="(cartModal.product.p_name|uppercase)"></p>
            <p class="price-para">
              <span class="currency-cls" ng-bind="cartModal.product.c_currency"></span>
              <span class="price-cls" ng-bind="cartModal.product.p_price"></span>
            </p>
            <p class="select-color">
              <span ng-repeat="color in cartModal.product.p_available_options.colors">
                <button id="color-style" ng-click="cartModal.saveColor(color)" ng-style="{'background-color':color.hexcode}"></button>
              </span>
            </p>
            <br>
            <p class="select-box">
              <span class="size-select-cls">
                SIZE:<select ng-init="items=cartModal.product.p_available_options.sizes" ng-model="cartModal.selectedSize" ng-options="item.code as
                item.name for item in items"></select>
              </span>
              <span class="qty">
                QTY:<input type="number"  min="1" ng-model="cartModal.selectedQty"/>
              </span>
            </p>
            <p class="edit-button">
              <button class="btn-primary btn-lg" data-dismiss="modal" ng-click="cartModal.save();cartModal.calculate()">EDIT</button>
            </p>
          </div>
          <div class="col-lg-6">
            <img ng-src="{{cartModal.product.imageSrc}}">
          </div>
      </div>
    </div>
  </div>
</div> 
```***

# system.reactive - 使用 ReplaySubject 将事件添加到 Rx 可观察对象的开头 - 可能吗？

> ID：10560633
> 
> 赞同：0
> 
> 时间：2012-05-12T02:43:39.353
> 
> 标签：system.reactive, event-sourcing

我正在使用 Rx（反应式框架）实现总线，到目前为止它看起来不错。我现在面临的问题是如何在流开始之前添加事件。

为了提供更多上下文，这是针对事件源（a la CQRS/ES）。当总线启动时，一些订阅者会得到**IObservable**。此时，总线会询问订阅者他们需要从什么事件编号/顺序开始。事件从最低编号开始从磁盘加载并添加到流中，每个订阅者使用 where 语句从正确的事件开始。随着应用程序的运行，新事件被添加并发送给订阅者。这部分效果很好。

一些迟到的订阅者，但仍需要所有事件。看起来**ReplaySubject**符合要求，只要事件的数量足够小。我在想我可能可以做一些磁盘/离线缓存来保留更多它们（欢迎任何指针！）。

更大的问题是，当一些订阅者获取 IObservable 时，他们需要获取在最初加载的事件之前发生的事件。像下面这样的情况。

当公共汽车启动时，它会向前加载事件#50（最早的人想要的）。现在，一个新的订阅者请求 IObservable，除非他们需要从 #20 开始。所以我想做的是加载 20-49，并在流**开始**之前添加它们。现有订阅者都不应看到任何事件（它将被 Where 过滤）。

看起来这应该是可能的，但我无法完全理解它。这在 Rx 中可能吗？如果是这样，怎么做？

谢谢！埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T07:19:32.490

我会以一种非常简单的 Rx 方式来看待这个问题。不要使用 a `ReplaySubject`，对所有“实时”事件使用单个`Subject`，并为每个订阅者连接前面的历史事件。

我想你可能有某种数据结构来跟踪历史记录。如果您已经在内存中加载/捕获了 #50 到 #80 的事件，那么当一个新的订阅者出现请求来自 #20 的事件时，我会做这样的事情：

```
var fromIndex = 20;
var eventSubject = new Subject<Event>();
capturedEvents
    .GetFromIndex(fromIndex) // Gets a enumerable list of events
    .ToObservable()
    .Concat(eventSubject)
    .Subscribe( ... ); 
```

然后，您可以`eventSubject`使用 来捕获新事件，如下所示：

```
eventSubject.Subscribe(capturedEvents.CaptureEvent); 
```

这是否满足您的需求？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T06:00:41.467

怎么样：

```
itemsFromTwentyToFourtyNine.Concat(currentItems); 
```

# ios - 想要在用户点击完成后调用 presentingViewController 中的方法

> ID：10560636
> 
> 赞同：4
> 
> 时间：2012-05-12T02:44:48.497
> 
> 标签：ios, uiviewcontroller

Noobie iOS 开发人员，这里有一个采用的 iOS 应用程序。

我有一个 iOS 应用程序的设置部分，当用户单击完成时，我想要模态视图控制器（它目前正在执行）并且我想在 presentingViewController 中调用一个名为 updateMainUI 的函数。

这是我正在调用的方法：

```
- (void)done:(id)sender
{
  [[self presentingViewController] dismissViewControllerAnimated:YES completion:nil]; // works 
  [[self presentingViewController updateMainUI]; //doesn't work 
```

但我收到以下错误：

```
No visible @interface for 'UIViewController' declares the selector 'updateMainUI' 
```

但我已经在呈现控制器中声明了这一点

```
@interface LocationsViewController : UITableViewController <CLLocationManagerDelegate, UISearchBarDelegate, UISearchDisplayDelegate>
-(void)updateMainUI; 
```

但奇怪的是，当呈现控制器是 UITableViewController 时，错误应该与 UIViewController 有关。

关于如何让 updateMainUI 工作的任何想法？我做错了什么？

谢谢

**编辑 #1** 这就是我创建它的方式 - 知道如何获得对 *nearbyViewController 的引用吗？

```
UIViewController *nearbyViewController = [[LocationsViewController alloc] initWithNearbyLocations];
UINavigationController *nearbyNavigationController = [[UINavigationController alloc] initWithRootViewController:nearbyViewController];
...
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:nearbyNavigationController, browseNavigationController, eventsNavigationController, nil]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T02:47:13.160

解雇后`self`，你应该期望`self.presentingViewController`成为`nil`。尝试`updateMainUI`在解雇前打电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T04:39:15.163

克鲁德，我现在看到了真正的答案。是选角问题。试试这个：

```
[[self presentingViewController] dismissViewControllerAnimated:YES completion:nil];
[(LocationsViewController *)[self presentingViewController] updateMainUI]; 
```

您需要*非常*确定`-presentingViewController`返回 LocationsViewController 类型的对象，否则您将遇到更大的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T02:55:53.120

`[[self presentingViewController updateMainUI]`坏了，不会编译。假设你的意思是`[[self presentingViewController] updateMainUI]`，那么还有其他方法可以做到这一点。

```
LocationsViewController *presenting = (LocationsViewController *)[self presentingViewController];
[presenting dismissViewControllerAnimated:YES completion:^{
    [presenting updateMainUI];
}]; 
```

使用变量呈现是重要的一步。

# wordpress - 页脚和样式中的第二张图片

> ID：10560637
> 
> 赞同：0
> 
> 时间：2012-05-12T02:44:51.987
> 
> 标签：wordpress, styles, stylesheet, footer

我已经构建了我的 wordpress 主题，但有两个问题，第一个我在页脚（不是小部件）中的 twitter 提要将样式用于其他东西，而不是我给它的样式。我为提要设置了链接等样式，但样式不正确。我也想在我的页脚后面有一个图像，但不是它的一部分。在我的网站中，我有水平重复的页脚图像和后面的图像。我的问题是当我将图像放入其中时，它就像页脚的一部分而不是背景（它不是我的背景图像就在它上面）。这是我博客的链接（代码太长，无法在此处发布）：

[http://blog.zombiesarefierce.com/](http://blog.zombiesarefierce.com/)

这也是我的页脚应该是什么样子的图片，任何帮助将不胜感激：

[http://www.freeimagehosting.net/jq19y](http://www.freeimagehosting.net/jq19y)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T03:58:54.357

下载插件火虫

右键单击图像并单击检查 eliment with fire bug 然后在您的情况下更改图像的 css

```
.art-footer img
{
border-width: 1px;
} 
```

并做到

```
 border-width: 0px; 
```

n 这是您网站的屏幕截图 ![在此处输入图像描述](../Images/2d3f6ea1f3c0b787df9dcc375a47035b.png)

# regex - Perl 正则表达式：需要语法帮助

> ID：10560642
> 
> 赞同：1
> 
> 时间：2012-05-12T02:46:22.377
> 
> 标签：regex, perl

在 Perl 中，如何将这两条语句组合在一行中？

```
$str=~ s/=>/:/g;
$str=~ s/\$VAR1 = {//g; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T02:49:02.987

```
$str =~ s/(=>|\$VAR = {)/$1 eq '=>' && ':'/ge; 
```

不过，实际上，最好不要保留代码，除非您有一些非常非常令人信服的理由来组合这些语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T07:58:04.180

这很简单——只需将“ `;`”更改为“ `,`”——但为什么呢？结合两个陈述不是目标，而是一种手段。如果你告诉我们你的目标是什么，你可以给你一个更好的答案。

```
$str=~ s/=>/:/g, $str=~ s/\$VAR1 = {//g; 
```

其他方法：

```
do { $str=~ s/=>/:/g; $str=~ s/\$VAR1 = {//g; };

s/=>/:/g, s/\$VAR1 = {//g for $str;

$str = $str =~ s/=>/:/gr =~ s/\$VAR1 = {//gr;   # 5.14+ required. 
```

# timer - Allegro 计时器如何计算时间？

> ID：10560644
> 
> 赞同：0
> 
> 时间：2012-05-12T02:46:30.427
> 
> 标签：timer, allegro

```
const float FPS = 60;
timer = al_create_timer(1.0 / FPS); 
```

显然，这两行启动了一个每秒关闭 60 次的计时器。

我不明白。1/FPS 给出 1/60，文档说 al_create_timer 的参数是它每次滴答计数的秒数，因此每个滴答计数为 1/60 秒。那么...是说计时器每秒*可以方便*地滴答 60 次吗？我不了解这些单位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:19:38.773

单位是秒。如果您希望它每秒关闭 60 次，则计时器将持续 1/60 秒。如果您希望它每秒关闭 5 次，那么您可以将计时器触发之间的时长设置为 1/5 秒。

考虑设置定时器的时间间隔，而不是定时器每秒的次数（或频率）。

# javascript - 如何或在何处将 javascript settimeout 函数添加到 CSS 垂直下拉菜单

> ID：10560646
> 
> 赞同：0
> 
> 时间：2012-05-12T02:46:59.473
> 
> 标签：javascript, jquery, css, menu

我想使用 settimeout 稍微延迟菜单的关闭，这样它们就不会在鼠标移出时消失得那么快。我知道语法是 setTimeout('some action', 350); 但是，由于它是 css，我不确定在哪里应用 mouseout 以及功能是什么。 [http://jsfiddle.net/hCVjK](http://jsfiddle.net/hCVjK)

这是html：

```
<div id="navigation">
    <ul class="top-level">
        <?php $query = "select * from categories";                              
        $categories = mysql_db_query ($dbname, $query, $link); 
        while ($row= mysql_fetch_array($categories)) { ?>
        <li><a href="<?php echo $site_url;?>/<?php echo $row['category_url'];?>.php"><?php echo $row['category_name'];?></a>
            <ul class="sub-level">
                <?php $query = "select * from subcategories WHERE category_number = '".$row['category_number']."' ORDER BY subcategory_name ASC";
                $subcategories = mysql_db_query ($dbname, $query, $link); 
                while ($row2= mysql_fetch_array($subcategories)) { ?>
                <li><a href="<?php echo $site_url;?/subcat_lookup.php?c=<?php echo $row['category_number'];?>&s=<?php echo $row2['subcategory_name'];?>"><?php echo $row2['subcategory_name']; ?></a></li>
                <?php }?>
                <li><a href="<?php echo $site_url;?>/<?php echo $row['category_url'];?>.php">View all for <?php echo $row['category_name'];?></a></li>
            </ul>
        </li><?php }?>
    </ul>
</div> 
```

这是CSS：

```
#navigation {  position:absolute;font-size:0.75em; width:214px;top:115px;}
#navigation ul {margin:0px; padding:0px;}
#navigation li {list-style: none;} 
/* FIRST LEVEL TEXT/BACKGROUND/BORDER SETTINGS */
ul.top-level {background:#fff;}
ul.top-level li {
 font-family: arial, sans-serif;
 font-size:14px;
 font-weight:bold;
 border:1px solid #D2D2D2; border-color:#fff #A5A5A5 #A5A5A5 #A5A5A5;
background:#fff url(images/arrow.gif) no-repeat center right;
}
/* FIRST LEVEL TEXT COLOR */
#navigation a {
 text-align:left;
 display:block;
 color: #<?php echo $tab_color;?>;
 cursor: pointer;
 line-height: 25px;
 text-indent: 10px;
 text-decoration:none;
 width:214px;
}
/* FIRST LEVEL TEXT HOVER COLOR */
#navigation a:hover{
 text-decoration:none;
}
/* FIRST LEVEL HOVER BACKGROUND COLOR */
#navigation li:hover {
 background-color:#<?php echo $tab_color;?>;
 position: relative;
}
#navigation li{
 background-color:#FFF;
 position: relative;
}
/* SECOND LEVEL TEXT SETTINGS */
ul.sub-level li a{
    font-family: arial, sans-serif;
    font-size:12px;
    font-weight:normal;
    background-color:#FFF;
}
ul.sub-level {
    display: none;
}
li:hover .sub-level {
    position: absolute;
    display: block;
    background: #FFF;
    border: #A5A5A5 solid;
    border-width: 1px;
/* set the sub menu flyout position here */
    left: 207px;
    top: -15px;
    z-index:10;
}
/* SECOND LEVEL TEXT HOVER COLOR */
#navigation ul li ul li a:hover{
 color:#FF6633;
 text-decoration:underline;
}
#navigation ul ul{
    padding-top:5px;
    padding-bottom:5px;
    border-radius: 8px;
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
     box-shadow: 0px 3px 10px #B0B0B0;
}
#navigation ul li ul li a{
     text-indent: 20px;
     line-height: 17px;
}
ul.sub-level li {
    background:#fff;
    border:none;
    float:left;
}
/* FIRST LEVEL HOVER BACKGROUND COLOR WHEN IN CHILD NODE*/
#navigation li:hover > a{
    color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:08:59.813

我修改了你的小提琴。这是一个 jQuery 解决方案。[http://jsfiddle.net/hCVjK/3/](http://jsfiddle.net/hCVjK/3/)

```
$('ul.sub-level').css('display', 'none'); 

$('ul.top-level > li').hover(function(){
    $(this).find('> ul').show(); 
}, function(e){
    var t = e.relatedTarget.nodeName; 
    if(t === 'LI' || t === 'A'){
        $(this).find('> ul').hide();
    }else{
        $(this).find('> ul').fadeOut('fast');
    }
}); ​ 
```

我也改成`li:hover .sub-level {`在`.sub-level {`你的css

# perl - 在循环下载期间将大写字母重命名为小写字母时出错

> ID：10560651
> 
> 赞同：1
> 
> 时间：2012-05-12T02:47:41.930
> 
> 标签：perl

我编写了一个脚本，通过子程序从 FTP 下载一些数据。我告诉程序下载属于我的电台的数据，这些数据在@station_list 数组中以大写字母列出。相应的数据位于单独的页面中，每个站点的名称用小写字母表示，例如 ftp://$ftp_srv/$ftp_dir/aaaa 是 aaaa 站点的页面，ftp://$ftp_srv/$ftp_dir/bbbb 是bbbb 站的页面。因此，我制作了一个循环来下载大写字母并将其转换为小写字母。但它只适用于第一站。我不知道我该怎么做才能修复它。感谢您的任何帮助。以下代码是提到的循环：

```
foreach $station (@station_list) {

    $litte_station = "\L$station\E";

    unless ($ftp->cwd($litte_station)) {
        $ftp->quit;
        print2("Can't cd to $station  $!\n");
        return (0);
    }

    $filename = "\L${station}\E${doy}\L$sessionchar\E.${yy}o.gz";
    print2 ("Get file: ${ftp_srv}\\${ftp_dir}\\${yyyy}\\${doy}\\${filename} ...");

    unless ($ftp->get($filename, $ftp_savepath.$filename)) {
        print2(" NOT AVAILABLE\n");
    } else {
        print2 (" Successful \n");   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:33:41.987

针对您对我的第一个答案的评论，我现在更好地理解了您的要求。在`foreach`循环结束时，调用`$ftp->cdup`：

```
foreach my $station (@station_list) {
    $ftp->cwd(lc $station);
    # ...
    $ftp->cdup;
} 
```

这将使您返回父目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T03:07:36.210

我不知道为什么它只发生在你身上一次，但我有一些建议：

*   将`use strict;`和`use warnings;`放在脚本的顶部。它们很可能会导致 Perl 发出诊断信息，帮助您识别真正的问题。
*   `my`用;声明所有变量
*   使用`lc`而不是所有这些`\L`转义。
*   修正`$litte_station`.

所以我写了类似的东西：

```
use strict;
use warnings;

my @station_list = qw(AAA BBB CCC);

foreach my $station (@station_list) {
    my $litte_station = lc $station;
    print $litte_station, $/;
} 
```

它输出：

```
aaa
bbb
ccc 
```

# c# - ClickOnce 安装程序先决条件：如何自动检测所需的 Visual C++ 运行时版本

> ID：10560653
> 
> 赞同：4
> 
> 时间：2012-05-12T02:48:03.687
> 
> 标签：c#, clickonce, publish, prerequisites, redistributable

我编写了一个需要安装 Visual C++ 2010 可再发行组件的 C# 应用程序，并且我使用 Visual Studio 中内置的“发布”机制来分发该应用程序——它使用 Microsoft 的“ClickOnce”安装程序技术。

我发现我需要单击“发布”页面上的“先决条件”按钮，但存在问题。

不知道用户是 x86 还是 64 位，我必须选中可再发行组件的 x86 和 x64 版本。

但是，如果 x86 用户安装它，他们会收到错误消息：“系统组件 Visual C++ 2010 运行时库 (x64) 的先决条件检查失败并显示以下错误消息：“仅在 x64 上支持安装 Visual C++ 2010 运行时库 (x64)机器。”

但是如果我不包括 x64 版本，那么 64 位用户就不能使用安装程序。

另一个问题是一些用户收到错误“在机器上检测到更新版本的 Microsoft Visual C++ 2010 Redistributable”，安装程序失败。

这整件事似乎是一团糟。ClickOnce 安装程序技术是否足够聪明，无法确定用户需要 x86 还是 64 位版本的 C++ 可再发行组件？如果安装了较新的版本，那真的是一个表演障碍吗？

这一切似乎都很脆弱，似乎应该有一个非常简单的解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:42:18.563

ClickOnce 是应用程序的实际部署，而不是引导程序。发布 ClickOnce 应用程序将创建一个 setup.exe，它是为您安装先决条件的引导程序。你的问题是先决条件。

您可以使用引导程序清单生成器（或记事本）创建使 C++ 可再分发到您可以从 Visual Studio/发布/先决条件对话框中选择的先决条件包所需的 XML 包信息。我建议您以这种方式设置先决条件，并查看 Bootstrapper 文件夹中的其他一些包（如 SQLExpress），看看它们是如何做到的。

# vb.net - 为什么我设置的日期时间格式总是错误？

> ID：10560655
> 
> 赞同：1
> 
> 时间：2012-05-12T02:48:13.677
> 
> 标签：vb.net, parsing, datetime

为什么我设置的格式总是错误的？

我认为代码是正确的，但没有得到正确的结果。

我有：

```
Private Now_Date As String = Date.Parse(DateTime.Now.ToString("dd/MM/yyyy")) 
```

今天，它应该返回：**12/05/2012**，对吧？但我总是得到：`12/5/2012`。这也适用于：**09/05/2012**，我会得到：`9/5/2012`。我怎么能这样做？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T02:50:44.623

尝试

```
Private Now_Date As String = DateTime.Now.ToString("dd/MM/yyyy")) 
```

您将其从 DateTime 转换为 String，再转换回 DateTime，然后再转换回 String。

您还应该养成在代码中使用`Option Explicit On`和的习惯。`Option Strict On`它会告诉您您正在尝试将 a 保存`DateTime`为`String`，这将为您提供线索。您的代码会产生错误：

> Option Strict On 禁止从“日期”到“字符串”的隐式转换。

# php - 检查数组中的所有值是否相同

> ID：10560658
> 
> 赞同：60
> 
> 时间：2012-05-12T02:48:48.123
> 
> 标签：php, arrays

我需要检查数组中的所有值是否都相等。

例如：

```
$allValues = array(
    'true',
    'true',
    'true',
); 
```

如果数组中的每个值都等于，`'true'`那么我想 echo `'all true'`。如果数组中的任何值等于，`'false'`那么我想回显`'some false'`

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-05-12T02:50:52.020

所有值都等于测试值：

```
// note, "count(array_flip($allvalues))" is a tricky but very fast way to count the unique values.
// "end($allvalues)" is a way to get an arbitrary value from an array without needing to know a valid array key. For example, assuming $allvalues[0] exists may not be true.
if (count(array_flip($allvalues)) === 1 && end($allvalues) === 'true') {

} 
```

或者只是测试你不想要的东西的存在：

```
if (in_array('false', $allvalues, true)) {

} 
```

如果您确定数组中只有 2 个可能的值，则首选后一种方法，因为它更有效。但如果有疑问，慢程序总比错误程序好，所以使用第一种方法。

如果你不能使用第二种方法，你的数组非常大，而且数组的内容*很可能*有超过 1 个值（特别是如果第 2 个值很可能出现在数组开头附近），它可能执行以下操作要*快得多*：

```
/**
 * Checks if an array contains at most 1 distinct value.
 * Optionally, restrict what the 1 distinct value is permitted to be via
 * a user supplied testValue.
 *
 * @param array $arr - Array to check
 * @param null $testValue - Optional value to restrict which distinct value the array is permitted to contain.
 * @return bool - false if the array contains more than 1 distinct value, or contains a value other than your supplied testValue.
 * @assert isHomogenous([]) === true
 * @assert isHomogenous([], 2) === true
 * @assert isHomogenous([2]) === true
 * @assert isHomogenous([2, 3]) === false
 * @assert isHomogenous([2, 2]) === true
 * @assert isHomogenous([2, 2], 2) === true
 * @assert isHomogenous([2, 2], 3) === false
 * @assert isHomogenous([2, 3], 3) === false
 * @assert isHomogenous([null, null], null) === true
 */
function isHomogenous(array $arr, $testValue = null) {
    // If they did not pass the 2nd func argument, then we will use an arbitrary value in the $arr (that happens to be the first value).
    // By using func_num_args() to test for this, we can properly support testing for an array filled with nulls, if desired.
    // ie isHomogenous([null, null], null) === true
    $testValue = func_num_args() > 1 ? $testValue : reset($arr);
    foreach ($arr as $val) {
        if ($testValue !== $val) {
            return false;
        }
    }
    return true;
} 
```

**注意：**一些答案将原始问题解释为（1）如何检查所有值是否相同，而另一些答案将其解释为（2）如何检查所有值是否相同**并**确保该值等于测试值。您选择的解决方案应该注意这个细节。

我的前 2 个解决方案回答了 #2。`isHomogenous()`如果您将第二个参数传递给它，我的函数会回答 #1 或 #2。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-10-29T15:17:46.213

为什么不只是在调用后比较计数`array_unique()`？

要检查数组中的所有元素是否相同，应该很简单：

```
$allValuesAreTheSame = (count(array_unique($allvalues)) === 1); 
```

无论数组中的值类型如何，这都应该有效。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-02-05T22:43:17.213

此外，如果它不是二进制文件，您可以压缩山羊的答案：

```
if (count(array_unique($allvalues)) === 1 && end($allvalues) === 'true') {
   // ...
} 
```

到

```
if (array_unique($allvalues) === array('foobar')) { 
   // all values in array are "foobar"
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-05-12T02:55:06.247

如果您的数组包含实际的布尔值（或整数）而不是字符串，您可以使用[`array_sum`](http://php.net/manual/en/function.array-sum.php)：

```
$allvalues = array(TRUE, TRUE, TRUE);
if(array_sum($allvalues) == count($allvalues)) {
    echo 'all true';
} else {
    echo 'some false';
} 
```

[http://codepad.org/FIgomd9X](http://codepad.org/FIgomd9X)

这是有效的，因为`TRUE`将被评估为 `1`和`FALSE`as `0`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-05-25T12:05:39.740

您可以比较最小值和最大值...不是最快的方法；p

```
$homogenous = ( min($array) === max($array) ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-12T02:53:21.913

```
$alltrue = 1;
foreach($array as $item) {
    if($item!='true') { $alltrue = 0; }
}
if($alltrue) { echo("all true."); }
else { echo("some false."); } 
```

从技术上讲，这不会测试“某些错误”，而是测试“并非全部正确”。但听起来你很确定你会得到的唯一值是“真”和“假”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-23T22:07:17.793

另外一个选项：

```
function same($arr) {
    return $arr === array_filter($arr, function ($element) use ($arr) {
        return ($element === $arr[0]);
    });
} 
```

用法：

```
same(array(true, true, true)); // => true 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-05-12T02:54:59.893

```
$x = 0;
foreach ($allvalues as $a) {
   if ($a != $checkvalue) {
      $x = 1;
   }
}

//then check against $x
if ($x != 0) {
   //not all values are the same
} 
```

# python - 如何按其值对python dict进行排序？

> ID：10560663
> 
> 赞同：0
> 
> 时间：2012-05-12T02:50:01.540
> 
> 标签：python, sorting, dictionary

最初的数据是这样的：

```
dict = {<User: user2>: {'diff': 48, 'alike': 1}, <User: user3>: {'diff': 42, 'alike': 2}, <User: user4>: {'diff': 45, 'alike': 1}, <User: user5>: {'diff': 43, 'alike':
 2}, <User: user6>: {'diff': 46, 'alike': 1}, <User: user7>: {'diff': 46, 'alike': 1}, <User: user8>: {'diff': 49, 'alike': 1}, <User: user9>: {'diff': 50, 'ali
ke': 0}, <User: user10>: {'diff': 46, 'alike': 1}, <User: user11>: {'diff': 37, 'alike': 3}, <User: user12>: {'diff': 50, 'alike': 0}, <User: user13>: {'diff':
50, 'alike': 0}, <User: user14>: {'diff': 50, 'alike': 0}, <User: user15>: {'diff': 50, 'alike': 0}, <User: user16>: {'diff': 50, 'alike': 0}, <User: user17>: {
'diff': 50, 'alike': 0}, <User: user18>: {'diff': 50, 'alike': 0}, <User: user19>: {'diff': 50, 'alike': 0}, <User: user20>: {'diff': 50, 'alike': 0}} 
```

然后我对其进行排序：

```
sorted(dict) == [{'diff': 50, 'alike': 0}, {'diff': 50, 'alike': 0}, {'diff': 50, 'alike': 0}, {'diff': 50, 'alike': 0}, {'diff': 50, 'alike': 0}, {'diff': 50, 'alike': 0}, {'d
    iff': 50, 'alike': 0}, {'diff': 50, 'alike': 0}, {'diff': 50, 'alike': 0}, {'diff': 50, 'alike': 0}, {'diff': 45, 'alike': 1}, {'diff': 46, 'alike': 1}, {'diff'
    : 46, 'alike': 1}, {'diff': 46, 'alike': 1}, {'diff': 48, 'alike': 1}, {'diff': 49, 'alike': 1}, {'diff': 42, 'alike': 2}, {'diff': 43, 'alike': 2}, {'diff': 37
    , 'alike': 3}] 
```

如何按“差异”对其进行排序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T02:53:56.213

一方面，您没有对 a`dict`进行排序 - 您正在对列表进行排序`dicts`- 这些是非常不同的事情，尤其是因为`dict`Python 中的 a 没有定义的顺序。

您可以使用[`sorted()`](http://docs.python.org/library/functions.html#sorted)和轻松做到这一点[`operator.itemgetter()`](http://docs.python.org/library/operator.html)：

```
import operator
sorted_dicts = sorted(dicts, key=operator.itemgetter("diff")) 
```

`sorted()`内置函数接受关键字参数，这`key`是一个接受值的函数，并给出另一个值进行排序。在这里，我们使用 an从排序依据`itemgetter()`中获取所需的值。`dict`

# 编辑：

鉴于您的更改，有两个答案，因为您不清楚。如果您想要值列表，只需从原始值中提取它们`dict`：

```
sorted(users.values(), key=operator.itemgetter("diff")) 
```

这就像服用一样简单`dict.values()`。自然，在 Python 2.x 下，您会想要使用`viewitems()`or`iteritems()`以获得良好的性能。

如果您想对`dict`自身进行排序，那就另当别论了，因为`dict`s （如我所说）本质上是无序的。

首先，我想指出这`sorted(dict)`不会产生您建议的输出 - dict 会遍历键，而不是默认的值：

```
users = {
    '<User: user10>': {'alike': 1, 'diff': 46},
    '<User: user11>': {'alike': 3, 'diff': 37},
    '<User: user12>': {'alike': 0, 'diff': 50},
    '<User: user13>': {'alike': 0, 'diff': 50},
    '<User: user14>': {'alike': 0, 'diff': 50},
    '<User: user15>': {'alike': 0, 'diff': 50},
    '<User: user16>': {'alike': 0, 'diff': 50},
    '<User: user17>': {'alike': 0, 'diff': 50},
    '<User: user18>': {'alike': 0, 'diff': 50},
    '<User: user19>': {'alike': 0, 'diff': 50},
    '<User: user20>': {'alike': 0, 'diff': 50},
    '<User: user2>': {'alike': 1, 'diff': 48},
    '<User: user3>': {'alike': 2, 'diff': 42},
    '<User: user4>': {'alike': 1, 'diff': 45},
    '<User: user5>': {'alike': 2, 'diff': 43},
    '<User: user6>': {'alike': 1, 'diff': 46},
    '<User: user7>': {'alike': 1, 'diff': 46},
    '<User: user8>': {'alike': 1, 'diff': 49},
    '<User: user9>': {'alike': 0, 'diff': 50}
}

print(sorted(users)) 
```

给我们：

```
['<User: user10>', '<User: user11>', '<User: user12>', '<User: user13>', '<User: user14>', '<User: user15>', '<User: user16>', '<User: user17>', '<User: user18>', '<User: user19>', '<User: user20>', '<User: user2>', '<User: user3>', '<User: user4>', '<User: user5>', '<User: user6>', '<User: user7>', '<User: user8>', '<User: user9>'] 
```

要产生一个 sorted `dict`，我们需要使用[`collections.OrderedDict()`](http://docs.python.org/library/collections.html#collections.OrderedDict)：

```
import collections

users = {
    '<User: user10>': {'alike': 1, 'diff': 46},
    '<User: user11>': {'alike': 3, 'diff': 37},
    '<User: user12>': {'alike': 0, 'diff': 50},
    '<User: user13>': {'alike': 0, 'diff': 50},
    '<User: user14>': {'alike': 0, 'diff': 50},
    '<User: user15>': {'alike': 0, 'diff': 50},
    '<User: user16>': {'alike': 0, 'diff': 50},
    '<User: user17>': {'alike': 0, 'diff': 50},
    '<User: user18>': {'alike': 0, 'diff': 50},
    '<User: user19>': {'alike': 0, 'diff': 50},
    '<User: user20>': {'alike': 0, 'diff': 50},
    '<User: user2>': {'alike': 1, 'diff': 48},
    '<User: user3>': {'alike': 2, 'diff': 42},
    '<User: user4>': {'alike': 1, 'diff': 45},
    '<User: user5>': {'alike': 2, 'diff': 43},
    '<User: user6>': {'alike': 1, 'diff': 46},
    '<User: user7>': {'alike': 1, 'diff': 46},
    '<User: user8>': {'alike': 1, 'diff': 49},
    '<User: user9>': {'alike': 0, 'diff': 50}
}

print(collections.OrderedDict(sorted(users.items(), key=lambda x: x[1]["diff"]))) 
```

这给了我们：

```
OrderedDict([('<User: user11>', {'diff': 37, 'alike': 3}), ('<User: user3>', {'diff': 42, 'alike': 2}), ('<User: user5>', {'diff': 43, 'alike': 2}), ('<User: user4>', {'diff': 45, 'alike': 1}), ('<User: user10>', {'diff': 46, 'alike': 1}), ('<User: user7>', {'diff': 46, 'alike': 1}), ('<User: user6>', {'diff': 46, 'alike': 1}), ('<User: user2>', {'diff': 48, 'alike': 1}), ('<User: user8>', {'diff': 49, 'alike': 1}), ('<User: user20>', {'diff': 50, 'alike': 0}), ('<User: user9>', {'diff': 50, 'alike': 0}), ('<User: user13>', {'diff': 50, 'alike': 0}), ('<User: user19>', {'diff': 50, 'alike': 0}), ('<User: user12>', {'diff': 50, 'alike': 0}), ('<User: user18>', {'diff': 50, 'alike': 0}), ('<User: user15>', {'diff': 50, 'alike': 0}), ('<User: user14>', {'diff': 50, 'alike': 0}), ('<User: user17>', {'diff': 50, 'alike': 0}), ('<User: user16>', {'diff': 50, 'alike': 0})]) 
```

请注意，这里我们必须对`lambda`key 参数使用声明，因为`itemgetter()`不幸的是无法为我们获取多个级别的项目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T02:52:33.330

```
sorted(your_list, key=lambda el: el["diff"]) 
```

关键字参数应该是一个函数，它接受您正在排序的列表中的`key`一个元素，并返回应该在排序比较中使用的值。 `lambda`是简写`def`- 也就是说，它定义了一个函数（有几个限制）。同一行可以这样写：

```
def get_key(el):
    return el["diff"]

sorted(your_list, key=get_key) 
```

# mysql - MySQL 存储过程和最后插入的行

> ID：10560664
> 
> 赞同：1
> 
> 时间：2012-05-12T02:50:19.150
> 
> 标签：mysql, stored-procedures

我很好奇这是否有可能。我有一个存储过程，它插入然后检索最后一个插入 id。如果两个用户同时使用该程序怎么办，这样的事情可能吗？

```
 User 1
             User 2
 Insert 1
             Insert 2
 GetsLastid 2
             GetsLastid 2 
```

存储过程的 2 次调用可以交错插入查询的顺序吗？还是有人带头？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T02:57:08.163

这不是问题。来自[精美手册](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id)：

> 生成的 ID 在每个连接的基础上维护在服务器中。这意味着函数返回给给定客户端的值是为影响*该客户端*列的`AUTO_INCREMENT`最近语句生成的第一个值。此值不会受到其他客户端的影响，即使它们生成自己的值。`AUTO_INCREMENT`*`AUTO_INCREMENT`*

 *因此，该`last_insert_id()`值始终是每个会话（AKA*连接*），并且您有两个会话在玩，不能干扰彼此的`last_insert_id()`值。

也就是说，`last_insert_id()`在 INSERT 之后尽快获取值并将其存储在变量中是个好主意。如果您在背后执行 INSERT 的其他操作 - 假设您调用另一个过程，在两个月后添加了日志记录并且该日志记录执行 INSERT - 您将失去`last_insert_id()`您想要的价值。*

# objective-c - 返回 null 的按钮数组

> ID：10560666
> 
> 赞同：1
> 
> 时间：2012-05-12T02:50:33.750
> 
> 标签：objective-c, ios

我正在尝试将我创建的按钮添加到数组中，然后从数组中删除它们。我的数组一直返回 null 所以我觉得我的按钮甚至没有被添加到我的数组中？

我是初学者。我正在使用 Xcode 4.3。这是我的代码：

```
//
//  MainViewController.h
//  Test-Wards
//
//  Created by Dayle Pearson on 5/12/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "FlipsideViewController.h"

@interface MainViewController : UIViewController <FlipsideViewControllerDelegate> 
{
    /*This stuff creates a timer */
    IBOutlet UILabel *opponentsBlue;
    NSTimer *timer;
    int redBlue;

    /*Stuff for making a label creator */
    CGPoint startPoint;
    int xStuff, yStuff;

    /*array for storing wards*/
    NSMutableArray *wardArray;

}

@property CGPoint startPoint;

- (IBAction)startRedBlue:(id)sender;

- (IBAction)removeWard:(id)
sender;
- (void)countdown;

@end

//
//  MainViewController.m
//  Test-Wards
//
//  Created by Dayle Pearson on 5/12/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "MainViewController.h"

@interface MainViewController ()

@end

@implementation MainViewController

@synthesize startPoint;

- (void)countdown 
{
    if (redBlue < 2) {

        [timer invalidate];
        timer = nil;
    }
    redBlue -= 1;
    opponentsBlue.text = [NSString stringWithFormat:@"%i", redBlue];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *theTouch = [touches anyObject];
    startPoint = [theTouch locationInView:self.view];

}

- (IBAction)startRedBlue:(id)sender 
{
    UIButton *wardButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    wardButton.frame = CGRectMake((startPoint.x - 5), (startPoint.y - 5), 10, 10);
    [wardButton setTitle:@"180" forState:UIControlStateNormal];
    //add targets and actions
    /*[wardButton addTarget:self action:@selector() forControlEvents:<#(UIControlEvents)#>*/
    //add to a view
    [self.view addSubview:wardButton];

    [self->wardArray addObject: wardButton];
    NSLog(@"This elemnt = %@", wardArray);

}
- (IBAction)removeWard:(id)sender 
{
    [self->wardArray removeLastObject];    
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

#pragma mark - Flipside View

- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller
{
    [self dismissModalViewControllerAnimated:YES];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showAlternate"]) {
        [[segue destinationViewController] setDelegate:self];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T02:54:59.617

你忘了初始化你的`wardArray`. 你应该添加

```
wardArray = [NSMutableArray array]; 
```

到您指定的初始化程序。

在 Objective-C 中向`nil`对象发送消息是合法的——这些消息被简单地忽略了。这就是您看不到您添加的项目的原因。

我还注意到您在视图中添加了按钮，但您从不删除它们。要从屏幕上删除按钮，请按如下方式更改代码：

```
 - (IBAction)removeWard:(id)sender 
{
    [[self->wardArray lastObject] removeFromSuperview];
    [self->wardArray removeLastObject];    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T02:54:48.773

您必须先初始化数组，然后才能添加到它

```
wardArray = [NSMutableArray array]; // quick and easy
wardArray = [[NSMutableArray alloc] init]; // oldschool 
```

我建议在你的方法中这样做。如果它不存在，这只会初始化一次，所以它不可能永远准备好拥有对象:)

```
- (IBAction)startRedBlue:(id)sender 
{
    ....

    // If wardArray doesn't exist we create it. Otherwise we add our ward to it.
    if (!wardArray) {
        wardArray = [NSMutableArray array];
    } else {
        [self->wardArray addObject: wardButton];
    }
}

- (IBAction)removeWard:(id)sender 
{
    UIButton *ward = (UIButton *)sender;
    [ward removeFromSuperview]; // Takes it off the screen.
    [self->wardArray removeObject:ward]; //Takes it out of the array    
} 
```

# actionscript-3 - 检测在mapquest flash中点击了哪个poi

> ID：10560667
> 
> 赞同：0
> 
> 时间：2012-05-12T02:50:33.957
> 
> 标签：actionscript-3, apache-flex, mobile, flex4.5, mapquest

因此，我正在尝试针对移动 mapquest 不支持带有 flex 组件的 infowindows 的问题找到一种解决方法。我设法为 pois 创建了一个自定义处理程序。但是我不知道如何检测点击了哪个 poi。所有的 pois 都存储在 shapecollection 中，我希望能够检测到哪个被点击，以便将其数据推送到另一个视图。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:17:18.947

经过几天的研究和尝试不同的方法，我在 flex 本身中找到了解决方案。所以这是我的解决方案，我希望更多的人可以将它用于他们的移动应用程序。

```
 var p: Poi = new Poi(myLatLng);
 p.key = "myKey";
 p.addEventListener(MouseEvent.CLICK,this.onPoiClick);

private function onPoiClick(e:MouseEvent):void {
    var poi: Poi = e.currentTarget as Poi;

   trace("The Poi's key is: " + poi.key);
} 
```

特别感谢 mapquest 论坛的帮助

# python - 尝试在 Google App Engine 网站上加载 Ace.js 编辑器会导致路径格式错误

> ID：10560671
> 
> 赞同：1
> 
> 时间：2012-05-12T02:51:43.893
> 
> 标签：python, google-app-engine, jinja2, ace-editor

我在基于 Python 的 Google App Engine 网站上使用 Ace 编辑器时遇到问题。在我的索引页面（我用 jinja2 渲染）上，我像这样加载 Ace：

```
<script type="text/javascript" src='media/ace-uncompressed-noconflict.js' charset='utf-8'></script> 
```

当`<script>`标签尝试加载 ace 的模式和主题时，`media/`目录后面的路径中会显示一个双斜杠，并会导致如下错误：

```
http://asdfcoding.appspot.com/media//theme-eclipse-uncompressed-noconflict.js
Failed to load resource: the server responded with a status of 404 (Not Found) 
```

如何让 Ace 的主题和模式文件正确加载？

我的实时站点是[AppSpot](http://asdfcoding.appspot.com/)上的 asdfcoding。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:56:58.787

我遇到了同样的问题，但在嵌入式 Microchip TCPIP 堆栈服务器上，对于格式错误的请求非常无情。

作为一个快速修复我这样做了：

在完整的 ace.js 中：

改变

```
this._loadTheme = function(name, callback) {
    if (!config.get("packaged"))
        return callback();

    var base = name.split("/").pop();
    var filename = config.get("themePath") + "/theme-" + base + config.get("suffix");
    net.loadScript(filename, callback);
}; 
```

添加文件名 = filename.replace("//theme","/theme");

```
this._loadTheme = function(name, callback) {
    if (!config.get("packaged"))
        return callback();

    var base = name.split("/").pop();
    var filename = config.get("themePath") + "/theme-" + base + config.get("suffix");
filename = filename.replace("//theme","/theme");
    net.loadScript(filename, callback);
}; 
```

和改变

```
 function fetch(callback) {
        if (!config.get("packaged"))
            return callback();

        var base = mode.split("/").pop();
        var filename = config.get("modePath") + "/mode-" + base + ".js";
        net.loadScript(filename, callback);
    } 
```

添加文件名 = filename.replace("//mode","/mode");

```
 function fetch(callback) {
        if (!config.get("packaged"))
            return callback();

        var base = mode.split("/").pop();
        var filename = config.get("modePath") + "/mode-" + base + ".js";
    filename = filename.replace("//mode","/mode");
        net.loadScript(filename, callback);
    } 
```

# javascript - Innerhtml 不保留 Mozilla 和 Chrome 中 Selectbox 和 Radio 的选定选项，但在 IE 中工作正常

> ID：10560673
> 
> 赞同：1
> 
> 时间：2012-05-12T02:53:03.797
> 
> 标签：javascript, jquery, browser, standards-compliance

我有一个带有多个选项卡的应用程序，每个选项卡都有几个字段。最后一个选项卡是预览选项卡，我想在不可编辑模式下以灰色显示所有选项卡中的所有控件。为此，我将使用所有选项卡的 innerhtml 并在“预览”选项卡中显示相同的内容。

虽然此逻辑适用于 Text 字段，但 Select 字段和 Radio 字段并未保留其在 Mozilla 和 Chrome 中选择的选项。它在 IE 7、8 和 9 中也可以正常工作。

对此有任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:54:57.147

尝试使用该`clone()`方法复制它而不是使用该`innerHTML`属性。

JSFiddle 中的示例：http: [//jsfiddle.net/jLB5s/](http://jsfiddle.net/jLB5s/)

# .net - 当使用不同的线程进行相同的操作时，WCF 不会传播 Trace.CorrelationManager 的属性

> ID：10560675
> 
> 赞同：2
> 
> 时间：2012-05-12T02:53:25.713
> 
> 标签：.net, wcf, web-services, trace, thread-local-storage

当 WCF 对同一操作使用不同的线程时，如何让 WCF 传播 Trace.CorrelationManager 的属性？

我知道 WCF 不保证线程亲和性。所以基本上一个线程可以启动一个请求，另一个线程可以完成它。当我重现此行为时，我看到第一个线程具有正确设置的两个属性 Trace.Correlation.ActivityId 和 Trace.Correlation.LogicalOperationStack。WCF 使用不同的线程完成了操作，但未传播属性。

为了解决这个问题，我可能不得不放弃使用 CorrelationManager 并且可能必须将 ActivityId 存储在 OperationContext 中，我知道它会传播到新线程（如果我在这里错了，请纠正我）。我不想这样做，因为它当然需要更多的工作，而且不如使用单个属性那么优雅。

关于如何解决这个问题的任何其他想法？我可以告诉 WCF 以某种方式为我传播这个吗？

谢谢，穆罕默德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:31:43.470

为了解决这个问题，我放弃了使用 Trace.CorrelationManager 属性。作为这些属性的替代品，我现在使用添加到扩展类的自定义属性。我现在可以直接修改此扩展上的 ActivityId 和 LogicalOperationStack，可以在任何操作请求的生命周期内访问它们，这与使用 Trace.CorrelationManager 属性一样方便。

另外，我可以存储我想在请求的生命周期中使用的任何其他自定义属性。一个很好的例子是客户 ID 或资源 ID，它也可以用于日志记录以获得更好的可支持性。

```
using System;
using System.Collections;
using System.ServiceModel;

namespace MyNamespace
{
    /// <summary>
    /// Class that represents an extension used to store custom data for the life of a WCF OperationContext.
    /// </summary>
    public class OperationContextExtension : IExtension<OperationContext>
    {
        /// <summary>The activity id of the operation.</summary>
        private Guid activityId;

        /// <summary>The logical operation stack of the operation.</summary>
        private Stack logicalOperationStack;

        /// <summary>
        /// Initializes a new instance of the OperationContextExtension class.
        /// </summary>
        public OperationContextExtension()
        {
            this.logicalOperationStack = new Stack();
        }

        /// <summary>
        /// Gets the current OperationContextExtension extension from the OperationContext.
        /// </summary>
        public static OperationContextExtension Current
        {
            get
            {
                OperationContextExtension context;
                if (OperationContext.Current == null)
                {
                    context = null;
                }
                else
                {
                    context = OperationContext.Current.Extensions.Find<OperationContextExtension>();
                }

                return context;
            }
        }

        /// <summary>
        /// Gets or sets the activity id for the current operation.
        /// </summary>
        public Guid ActivityId
        {
            get { return this.activityId; }
            set { this.activityId = value; }
        }

        /// <summary>
        /// Gets the LogicalOperationStack for the current operation.
        /// </summary>
        public Stack LogicalOperationStack
        {
            get { return this.logicalOperationStack; }
        }

        /// <summary>
        /// Enables an extension object to find out when it has been aggregated. Called when the extension is added 
        /// to the System.ServiceModel.IExtensibleObject Extensions property.
        /// </summary>
        /// <param name="owner">The extensible object that aggregates this extension.</param>
        public void Attach(OperationContext owner)
        {
            // Use this method for request initialization if needed
        }

        /// <summary>
        /// Enables an object to find out when it is no longer aggregated. Called when an extension is removed 
        /// from the System.ServiceModel.IExtensibleObject Extensions property.
        /// </summary>
        /// <param name="owner">The extensible object that aggregates this extension.</param>
        public void Detach(OperationContext owner)
        {
            // Use this method for request cleanup if needed
        }
    }
} 
```

您现在需要将此扩展添加到 OperationContext。首先，您需要找到适合 WCF 行为扩展的挂钩。一个流行的选项是使用应用于 IEndpointBehavior 的 MessageInspector。这里有一些关于如何实现这一点的精彩读物（如果我的没有帮助，快速搜索将产生许多有用的例子）：

*   [使用自定义行为扩展 WCF](http://msdn.microsoft.com/en-us/magazine/cc163302.aspx)
*   [使用行为配置和扩展运行时](http://msdn.microsoft.com/en-us/library/ms730137.aspx)
*   [端点行为 (ApplyDispatchBehavior) 示例](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iendpointbehavior.applydispatchbehavior.aspx)

一旦你有了你的钩子，你想尽快将你的扩展添加到 OperationContext 中，使用以下行：

```
// Add an extension object to the current operation context to track custom state across all threads
// for the life of the operation
OperationContext.Current.Extensions.Add(new OperationContextExtension()); 
```

现在，您几乎可以从代码工作流中的任何位置访问您的 ActivityId 属性和 LogicalOperationStack，或您在此类中定义的任何其他属性：

```
LogOperation(OperationContextExtension.Current.ActivityId, logMessage);
OperationContextExtension.Current.LogicalOperationStack.Push("Starting 'Nested Activity' 3..."); 
```

希望这可以帮助！

-穆罕默德

# ruby-on-rails - Ruby 包安装失败

> ID：10560679
> 
> 赞同：2
> 
> 时间：2012-05-12T02:54:09.973
> 
> 标签：ruby-on-rails

我无法捆绑安装 Ruby On Rails。我收到错误

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file.
(RuntimeError)
You have to install development tools first.
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:931:in `block in have_header'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:930:in `have_header'
        from extconf.rb:9:in `<main>'

Gem files will remain installed in C:/sites/rails_projects/sample_app/with-ffi_c-lib/ruby/1.9.1/gems/ffi-1.0.11 for inspection.
Results logged to C:/sites/rails_projects/sample_app/with-ffi_c-lib/ruby/1.9.1/gems/ffi-1.0.11/ext/ffi_c/gem_make.out
An error occured while installing ffi (1.0.11), and Bundler cannot continue.
Make sure that `gem install ffi -v '1.0.11'` succeeds before bundling.
PS C:\sites\rails_projects\sample_app> 
```

当我尝试跑步时`gem install ffi -v '1.0.11'`

我得到错误

```
"ERROR: Could not find a valid gem 'ffi-v' <>=0 in any repository 
```

我在谷歌上搜索过，有些人认为我需要安装 ruby​​ devkit 来解决这个问题。问题是，我也无法让它工作。我运行 ruby​​ dk.rb init 命令，初始化完成，但是当我查看 config.yml 文件时，虽然我安装了 ruby​​，但没有自动列出 rubies。

任何帮助将不胜感激。

# php - PHP 获取当前文件目录

> ID：10560680
> 
> 赞同：3
> 
> 时间：2012-05-12T02:54:19.693
> 
> 标签：php, directory, split

我想知道是否有可能获得回显的文件的完整路径，然后可能会拆分它

就像： echo $currentDir //输出 EX：/home/user/public_html/scrips/code/test/ha

然后将其拆分为 3 个目录，因此输出为：/home/user/public_html/scripts

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T02:58:08.537

`__DIR__`您可以使用 PHP 5.3或`dirname(__FILE__)`< PHP 5.3获取文件当前正在执行的目录。

您可以选择一条路径并通过字符串操作提升几个级别。

```
$path = implode(
    DIRECTORY_SEPARATOR, 
    array_slice(explode(DIRECTORY_SEPARATOR, $path),0,-3)
); 
```

或者，这*应该*工作......

```
$path = realpath(
    rtrim($path, DIRECTORY_SEPARATOR) . str_repeat('..' . DIRECTORY_SEPARATOR, 3)
); 
```

尽管路径可能会通过转换为不同的字符串`realpath()`（尽管它将*指向*相同的位置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T03:20:59.727

我要做的是：

1.  为文件类型创建一个类；
2.  为我的项目定义一些主文件夹的常量，这样我的生活就更轻松了；
3.  在该类中创建一个方法来检索路径；
4.  将函数的结果分配给属性，也让我的生活更轻松；

如：

```
class Image {
   private $temp_path;
   protected $upload_dir = 'imagens';

   public function directory() {
       return $this->upload_dir . DIRECTORY_SEPARATOR . $this->filename;
   }
}

// If you want only the extension:

private function _ext() {
    return strrchr($this->filename, ".");
} 
```

当然，这门课还有更多内容，更多，但这就是您检索上传文件的路径所需要的。您所要做的就是使用面向对象的 PhP 直接在文件上传页面中设置属性以将它们传递给类，因此它甚至可以存储在您的数据库中，以便更好地记录和控制您的文件及其属性。

如果您需要有关整个事情的更多信息，请询问。

祝你好运。

# android - 列出适配器视图

> ID：10560686
> 
> 赞同：0
> 
> 时间：2012-05-12T02:55:13.563
> 
> 标签：android, string, list, listactivity

好的，所以我认为我做对了..但它不会编译：类扩展 ListActivity。我试图从列表中提取字符串，以便将其带到捆绑包中的下一个意图，但首先我需要查看是否可以从列表中获取字符串数据

编辑：感谢 Dhaval Sodha Parmar 的帮助，但我还有另一个难题
是否可以动态设置背景？我没有布局，因为只有列表。/编辑

```
SetUp setup = new SetUp(this);
List<String> characters = new ArrayList<String>();
public String item = "";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setup.open();
    setup.charList(characters);
    setup.close();

     setListAdapter(new ArrayAdapter<String>(SelectCharacter.this,
     android.R.layout.simple_list_item_1, characters)); 
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    item = characters[position];
} 
```

该列表是从数据库创建的：

```
public void charList(List<String> result)
{
    String[] columns = new String[] { KEY_NAME };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

    int iName = c.getColumnIndex(KEY_NAME);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
    {
        result.add(c.getString(iName));
    }

} 
```

# android - Android --- startActivity 或 startActivityForResult 将如何影响当前活动的逻辑流程？

> ID：10560689
> 
> 赞同：4
> 
> 时间：2012-05-12T02:55:41.490
> 
> 标签：android, android-activity

当我在研究一个开源的 Android 项目时，我有这个问题。

我有一个活动 A1 在其“onCreate”方法中调用另一个活动 A2。但是，“startActivity / startActivityForResult”方法前后都有代码语句。我不知道“startActivity / startActivityForResult”方法之后A1中的执行顺序。

A1的代码框架如下：

```
public void onCreate(Bundle bundle) {
   <code statements before>
   this.startActivityForResult(.....);  // Start A2 here.
   <code statements after>
}

public void onResume() {
   <code statements>
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
   <code statements>
}
..... 
```

我想知道 A1 是否会在调用 A2 之前先完成其执行周期（即“onCreate”->“onStart”->“onResume”->“onPause”->“onStop”），还是先完成“onCreate”再调用调用 A2，还是有其他执行逻辑？

此外，当A2返回（完成）并调用A1中的“onActivityResult”时，A1是否会在执行“onActivityResult”方法后执行“onRestart”->“onStart”->“onResume”？

因为 A1 和 A2 都有自己的 UI，所以我认为这 2 个活动可能不会与两个不同的线程同时执行。有谁知道这种情况下的确切执行顺序？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T08:40:46.690

我使用 2 个非常简单的 Android 活动模拟了这种情况，并得到了以下结果。

以下是当Android在活动A1的方法内执行“startActivity”/“startActivityForResult”以启动另一个活动A2时会发生什么，

1.  它会认识到现在有触发另一个活动 A2 的意图，
2.  它将执行到当前方法的末尾（它不会直接跳转到预期的活动 A2），
3.  然后它会调用当前活动 A1 的“onPause”方法（以允许我们保存当前状态）然后离开当前活动，
4.  它现在将启动意图活动 A2 并调用其“onCreate”->“onStart”->“onResume”方法序列，
5.  如果被调用的活动A2已经覆盖了整个屏幕，则可以在此处调用初始调用活动A1的“onStop”方法，
6.  如果被调用的活动 A2 是“singleTask”活动并且 A1 在堆栈中的 A2 顶部（“singleTask”活动顶部的所有活动都将被销毁，则初始调用活动 A1 的“onDestroy”方法可以在此处调用当“singleTask”活动被带到前面时）。

我把它写在这里希望它可能对其他人有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T03:10:57.150

它们不会在不同的线程上执行，两者都将在主 UI 线程上。您不能保证何时/如果 onResume() 和 onPause() 将被调用，如此处的 Android 生命周期文档中[所述](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)。

如果您在活动的 onCreate() 中启动另一个活动，您应该期望 A1 UI 未加载（第一次）。当 A2 返回结果时，您应该会看到它。

除此之外，我建议您尝试一下并亲自看看。

# ios - 由发送到已释放实例的消息导致的加载 UITableView 崩溃

> ID：10560693
> 
> 赞同：1
> 
> 时间：2012-05-12T02:56:05.013
> 
> 标签：ios, iphone, objective-c, uitableview, memory

我的测试应用程序加载了一个 UITableView 并由`[1421:12503] *** -[__NSArrayM class]: message sent to deallocated instance 0x10ae83e0`. 崩溃时进程在 main() 方法处停止。

而且这种崩溃只发生在 ios 4.3.2 的模拟器中，在 ios 4.3.2 和 ios 5.1 的设备中可以，在 ios 5.1 的模拟器中也可以。我无法找出哪个实例被错误地释放。

我在终端中使用命令`malloc_history 1421:12503 0x10ae83e0`试图找到任何有价值的线索。但我只得到以下信息：

```
 > ALLOC 0x10ae83e0-0x10ae83f7 [size=24]: thread_ac2502c0 |start | main | UIApplicationMain | GSEventRun | GSEventRunModal | CFRunLoopRunInMode | CFRunLoopRunSpecific | __CFRunLoopRun | __CFRunLoopDoSource1 | 

    __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ | mshMIGPerform | 

_XCopyElementAtPosition | _AXXMIGCopyElementAtPosition | _copyElementAtPositionCallback |
     -[UIView(UIViewAccessibility) _accessibilityHitTest:withEvent:] | 
    -[UIView(UIViewAccessibility) __accessibilityHitTest:withEvent:] |
     -[UIView(UIViewAccessibility) _accessibilityHitTest:withEvent:] |
     -[UIView(UIViewAccessibility) __accessibilityHitTest:withEvent:]|
     -[UIView(UIViewAccessibility) _accessibilityHitTest:withEvent:] |
     -[UIView(UIViewAccessibility) __accessibilityHitTest:withEvent:] |
     -[UIView(UIViewAccessibility) _accessibilityHitTest:withEvent:] |
     -[UIView(UIViewAccessibility) __accessibilityHitTest:withEvent:] | 
    -[UIView(UIViewAccessibility) _accessibilityHitTest:withEvent:] | 
    -[UIView(UIViewAccessibility) __accessibilityHitTest:withEvent:] |
     -[UITableViewAccessibility(Accessibility) _accessibilityHitTest:withEvent:] | 
    -[UITableViewSectionElement _accessibilityHitTest:withEvent:] | 
    -[UITableViewSectionElement accessibilityChildren] | 
    -[__NSPlaceholderArray init] | 
    -[__NSPlaceholderArray initWithCapacity:] | 
    +[__NSArrayM __new::] | __CFAllocateObject2 | class_createInstance | calloc | malloc_zone_calloc 
```

您能否为这种情况提供任何线索？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:17:18.893

我猜`NSArray`您用于数据源的数据源是自动发布的。检查并保留它。这可能会解决这个问题，但如果没有一些代码，我无法确定，尤其是关于如何创建这个数组。

完成后不要忘记释放数组`dealloc`。

# objective-c - 为什么当我删除相关对象时，Core Data 会复活已删除的对象？

> ID：10560694
> 
> 赞同：0
> 
> 时间：2012-05-12T02:56:30.660
> 
> 标签：objective-c, ios, core-data, ios5

假设我在 Core Data 中有一个 House 实体，它与许多 GraphicalAssets 相关联，它们是 House 的图片。

我想彻底清除所有房屋以及房屋本身的所有图形资产。对于两个方向，关系上的删除行为是 Nullify。删除东西的正确顺序似乎是先删除图形资产，然后是房屋。这是发生的事情：

```
NSFetchRequest* fetchAllGraphicalAssets = [ [ NSFetchRequest alloc ] initWithEntityName:@"GraphicalAsset" ];
NSArray* allGraphicalAssets = [ self.managedObjectContext executeFetchRequest:fetchAllGraphicalAssets error:nil ];
for( GraphicalAsset* asset in allGraphicalAssets )
        [ self.managedObjectContext deleteObject:asset ];
[ self.managedObjectContext processPendingChanges ];

// At this point, if I execute fetchAllGraphicalAssets again, the count is 0\. Perfect.

NSFetchRequest* housesRequest = [ NSFetchRequest fetchRequestWithEntityName:@"House"];
NSArray* existingHouses = [self.managedObjectContext executeFetchRequest: housesRequest error:nil]; 
    for( House* house in existingHouses )
        [ self.managedObjectContext deleteObject: house ];
[ self.managedObjectContext processPendingChanges ];

// Now, if I execute fetchAllGraphicalAssets again, the count is > 0\. What is going on? 
```

所以，看起来，因为房屋曾经指向图形资产（这种关系在资产被删除时应该被取消），当我删除房屋时它神奇地复活了被删除的对象。为什么会这样？我什至尝试在删除任何一个对象之前，在两个方向上明确地消除房屋与其图形资产之间的关系，它仍然以这种方式运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T02:58:13.167

`House`从to到的一对多关系的删除规则`Graphic`应该是级联的 - 这意味着删除 a`House`会将删除级联到所有`Graphic`对象

# macos - crontab -e 似乎不显示 crontabs

> ID：10560695
> 
> 赞同：1
> 
> 时间：2012-05-12T02:56:33.980
> 
> 标签：macos, cron

当我这样做时`crontab -l`，我可以看到我的 crontabs 已列出。但是，如果我这样做`crontab -e`，它会在`mvim`. 我还检查了 /etc/crontab 是否存在，但不存在这样的文件。如果此文件不存在，那么 crontab -l 从哪里获取 crontab？

**解决**
了我将`EDITOR`环境变量设置为 mvim，无论出于何种原因，都`mvim`没有打开我的 crontabs。我将它改回 vim，它现在按预期工作。

# ruby-on-rails - 大型项目的 Sprockets 最佳实践

> ID：10560696
> 
> 赞同：3
> 
> 时间：2012-05-12T02:56:35.527
> 
> 标签：ruby-on-rails, performance, optimization, asset-pipeline, sprockets

我已经和其他大学生一起在一个 RoR 项目上工作了几个月。我负责前端和资产部分，我发现自己想知道**如何以最佳方式使用 Sprockets**。

拥有资产管道的目的是在页面加载时间方面提高性能。Rails 生成应用程序的方式是将所有样式表和 javascript 放入两个压缩文件中。

但是，当应用程序的数量和复杂性增加时，恕我直言，这是一个坏主意，因为一体式文件的大小会增加，并且可能存在重叠的 CSS 规则或寻找元素但找不到它的脚本的问题，使页面崩溃的整个 javascript 部分。

**注意：**我知道，如果团队之间有良好的编码规则和约定，这些问题的发生可以减少，但不会降到 0。

到目前为止，我对这些断言是否正确？

如果是肯定的，那么**在不提供大量对页面范围无用的规则或脚本的情况下处理大型项目的好方法是什么，而不会失去发送给客户的少量资产的好处？**

我目前的方法是定义一组一体化文件，每个应用程序的“上下文区域”一个。所以基本上我尝试发送 2+2 个文件。

但是如何处理这样的情况：

> 有一个非常简单的资源索引视图，其中只有条目列表，每个条目都链接到相应的节目。相反，这个节目一点也不简单，它有很多 CSS3 规则和 javascript。

使用我的方法，索引操作将有很多未使用的代码。你如何处理你的大项目？

您更重视页面获得的资源还是性能？

困扰我的另一件事是**如何处理 partials**。在面向对象的设计中，每个部分都应该（？）包含它需要在加载的任何地方正常工作所需的所有内容。`javascript_include_tag`但是，如果我在视图和部分中调用相同的资产，这将导致重复的包含。

我的所有这些想法都有意义还是我错过了什么？或者可能是从错误的角度看待问题？你能给我一些链接或开源项目来看看吗？你对此事有何看法？

感谢和抱歉这个长问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T20:00:30.310

**从最佳实践开始（一级代码）：**

有两个文件，预编译（缩小/压缩），服务于服务器压缩和遥远的未来标头。作为标头的结果，这些文件将在第一次请求时由客户端浏览器缓存，并用于之后的所有页面，直到缓存过期或被清除。

文件也可以被透明代理缓存；ISP 使用这些来为他们的客户加速网络。这将进一步减少请求。

所以从性能的角度来看，只有第一个请求是昂贵的。

**管理部分（二级代码）**

在具有管理部分的站点中，将其分离成一对单独的文件是很常见的。管理员可能会使用 jquery-ui，而公共站点则不会。在这种情况下，这是最好的折衷方案——您不想为每个公共请求提供一个完全未使用的库。

Rails 管道指南提到了如何设置它。

**页面代码（第三层）**

第三层是针对特定页面的 js 和 css（你的问题）。

在这种情况下，您将不得不对事物的性能/维护方面进行调用。如果你有很多代码，你想分离出所有这些都必须添加到资产管道预编译数组中。如果有很多或代码很小，这很痛苦。

需要（或想要）这样做可能是向程序员发出的信号，表明 CSS 的整体设计可以改进。如果您必须为特定页面添加大量额外规则，那么您可能没有像您可能那样使用 CASCADE（CSS 中的 C）。:-)

面向对象的 CSS 是解决这个问题的一种方法。作为一个门徒，它是关于定义可以在任何地方使用的可重用 CSS 块。如果这样做了，那么从性能（包括所有页面的规则）或维护的角度来看，少量的页面特定规则就不会成为问题。

如果您必须为页面提供单独的文件，那么遵循这些文件的管道最佳实践至少不会牺牲文件的可缓存性。

我在我的项目中所做的是提供一些帮助程序，允许视图为主应用程序布局堆叠文件和代码。这样做的好处是我可以控制生成的代码出现在哪里，而不是出现在页面中间，如果将文件包含在部分视图中，就会发生这种情况。（这对页面渲染性能非常不利，因为中间页面文件包含块渲染）

我这样做：

application_helper.rb

```
def deferred_javascript(&block)
  @deferred_javascript ||= []

  if block_given?
    @deferred_javascript << capture(&block)
  end

  @deferred_javascript
end

def deferred_javascript_files
    @javascript_includes ||= []
end

def deferred_css_files
    @stylesheet_includes ||= []
end 
```

然后在一个视图中：

```
<% deferred_javascript_files << 'extras/public_form' %>
<% deferred_css_files << 'extras/public_form' %> 
```

或者，如果它是单行的，我可以使用带有 deferred_javascript 帮助器的块。（我很少使用这个）。

public_form 文件是此表单（jquery-ui、formtastic）所需内容的清单，在任何其他页面上都不需要。

注意：以这种方式使用的任何文件都必须添加到预编译数组中：

```
config.assets.precompile += ['extras/public_form.css', 'extras/public_form.js'] 
```

很容易忘记，因为我的方法在没有的开发模式下工作，但是在生产中部署时会失败！

最后在应用程序布局中，在 CSS 的顶部（在 head 标签中）：

```
<%= stylesheet_link_tag('application', :media => 'all' ) -%>
<%= stylesheet_link_tag(deferred_css_files) if deferred_css_files.any? %> 
```

在 JS 的布局底部（在结束 body 标记之前）：

```
<%= javascript_tag do %>
  $(document).ready(function() {
<%= raw deferred_javascript.join("\n") %>
  });
<%- end unless deferred_javascript.blank? -%>
<%= javascript_include_tag 'application' %>  
<%= javascript_include_tag(deferred_javascript_files) if deferred_javascript_files.any? %> 
```

此行添加主要清单，以及任何视图清单和代码。

我所概述的内容可确保任何添加视图的文件都是管道的一部分，并且与主文件具有相同的缓存机会。

**总结一下：**

将所有内容放在主清单中几乎总是正确的做法，但是当特定于页面的代码非常大时，可以将其移动到单独的文件中并按照我的概述提供。您将不得不对哪种方法更好进行性能调用 - 没有在每一页上都有额外的代码，或者在一个页面上没有额外的文件请求。

# c# - 如果从网格视图中删除项目，如何从下拉列表中删除

> ID：10560700
> 
> 赞同：1
> 
> 时间：2012-05-12T02:57:18.010
> 
> 标签：c#, asp.net, gridview, drop-down-menu

我在页面上有一个按钮、下拉列表、Gridview。在页面加载时，我从同一个表中绑定了 gridview 和下拉列表。在 girdview 中，我有复选框，如果我选中了复选框并单击按钮，那么它会删除选定的行。我的问题是如何删除从 GridView 中删除的下拉列表项。

就像这样，我有一张员工表。在下拉列表中，我将 empid 绑定到下拉列表并绑定 gridview 中的所有字段。

下拉列表

```
emp001
emp002
emp003 
```

网格视图列

```
empid | empname | contact | des
emp001|   X     | 999     | XY
emp002|   y     | 888     | OB
emp003|   Z     | 987     | UU 
```

如果我从 gridview 中删除“emp001”，则单击按钮时，我也需要从下拉列表中删除 emp001。任何人都可以帮助代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:13:12.573

您需要在 Button_Click 上再次重新绑定 Grid 和 Dropdownlist。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:12:19.920

您可以在 GridView 上创建**RowDeleted**事件

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdeleted.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdeleted.aspx)

删除行后，您将获得已删除行的 ID 并刷新下拉列表

它会解决问题吗？

# compiler-construction - 编译器级别的分支预测

> ID：10560701
> 
> 赞同：3
> 
> 时间：2012-05-12T02:57:31.530
> 
> 标签：compiler-construction, cpu

我一直在阅读有关分支预测的内容，但我发现的唯一实现主要是在计算机的硬件方面。处理器似乎处理了大部分预测。我的问题是，编译器可以进行分支预测吗？我唯一发现的是 2 种方法，函数内联和循环展开。这些被认为是正确的吗？他们还在使用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T08:31:18.033

当然。如果编译器知道：

*   检测运行收集的统计分支概率
*   仪器运行收集的变量值的统计分布；然后它可以预测条件的平均结果，从而预测分支
*   程序员关于条件的频率或偏差的断言
*   基于范围的循环边界估计（如果未知，则默认为“10”:)
*   知道一个分支倒退到循环的顶部（预测“采取”

使用这些信息，它可以预测条件的可能结果，然后生成倾向于由硬件正确“预测”的分支指令。

一些编译器完成的一组特别有趣的优化是[跟踪调度](http://en.wikipedia.org/wiki/Trace_scheduling)，它根据顺序遇到的分支的概率确定通过代码的路径集。通过确定最高概率路径，编译器可以在整个路径上进行优化，而不是仅仅在基本块内进行优化。

有时编译器会生成间接使用硬件分支预测能力的分支代码。编译的 OO 语言（静态或 JITted）必须编译方法调用，并且间接跳转很昂贵。一个便宜的技巧是在每个调用站点保留一个最近调用的方法的小型动态缓存，并检查正在调度的对象类型。如果在调用站点频繁使用相同类型的对象进行调度，则缓存中第一个（并且第二个稍少）条目的比较/分支序列很有可能，因此执行的代码可以避免错误预测。这比间接跳转要好得多。

最后一个标准技巧：如果你可以避免做一个分支，你就不必正确预测它！许多代码序列看起来像这样：

```
 if (exp1 relop exp2)
      X = Y
  endif 
```

现代 CPU 具有实际上是“MOV_if_relop A to B”的“谓词”指令，适用于所有关系条件相等、不相等、小于等。因此，编译器不会为上述构造生成分支，而是生成：

```
 <compute exp1 and exp2>
  CMP  exp1,exp2 ; sets condition code
  MOVif_relop  X,Y 
```

# objective-c - 覆盖文件中的当前内容

> ID：10560702
> 
> 赞同：1
> 
> 时间：2012-05-12T02:57:45.997
> 
> 标签：objective-c, ios, xcode

我想覆盖名为 data.txt 的文本文件开头的当前数据（在我的资源文件夹中）。总是只有一行（没有空格或任何东西），我希望在适当的时候覆盖这一行。到目前为止，这就是我一直在做的事情，但这只会在文件末尾写入内容，而不是从头开始，也就是覆盖我需要的行。如果有人可以帮助我，将不胜感激。谢谢！

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsDirectory = [paths objectAtIndex:0];

//append filename to docs directory
NSString *myPath =  [documentsDirectory stringByAppendingPathComponent:@"data.txt"];
fileHandle = [NSFileHandle fileHandleForUpdatingAtPath:myPath];

writtenString= [[NSString alloc]initWithFormat:@"%d", message];     

[fileHandle seekToEndOfFile];
[fileHandle writeData:[writtenString dataUsingEncoding:NSUTF8StringEncoding]];

[writtenString release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:52:38.293

Mike 的回答将允许您覆盖文件的内容，但不是以您想象的面向行的方式。

您无法调整文件的内部内容，这样，如果您插入内容，则会稍后推送现有的后续数据，如果您删除内容，则会将现有的后续数据拉到删除点之后。

您有两个可用的基本操作：您可以以一定长度截断文件，可能为 0，丢弃超过该点的任何旧数据。并且可以在某个位置写入数据。如果该位置已经有数据，则将其覆盖（即丢失）。如果您正在写入的字节范围超出文件末尾，则文件被扩展。

但是，您既没有截断也没有覆盖的任何旧数据都保留在原处。在任何情况下它都不会被移动。

因此，如果您想更改文本文件的第一行，并且如果您不能确定新行与旧行的长度完全相同，那么您必须注意从第二行移动所有内容到它的新位置。适用于小文件的一种简单方法是将整个内容读入内存，在那里进行调整，然后将其全部写出。另一种方法是遍历文件，读取块，然后将它们写到新位置。如果您将数据移向起点，则从头开始；如果您将数据移向末尾，则从末尾开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T03:09:29.190

> 到目前为止，这就是我一直在做的事情，但这只会在文件末尾写入内容，而不是从头开始，也就是覆盖我需要的行。

嗯，是的，因为你打电话：

```
[fileHandle seekToEndOfFile]; 
```

它正在做你所要求的。尝试：

```
[fileHandle seekToFileOffset: 0]; 
```

# ios - 两个具有相同日期值和相同哈希的 NSDate 怎么可能不相等？

> ID：10560703
> 
> 赞同：1
> 
> 时间：2012-05-12T02:57:48.007
> 
> 标签：ios, comparison, nsdate

我将一个对象存储`NSDate`在一个`NSDictionary`. 然后我得到另一个`NSDate`具有相同日期值的对象，并用它从`NSDictionary`. 令我惊讶的是，它回来了`nil`。但是在我的调试会话中揭示的内容更让我震惊：

> (lldb) po when
> (NSDate *) $34 = 0x0f8be100 2012-05-11 21:08:37 +0000
> (lldb) po [newTaskDict objectForKey:when]
> (id) $36 = 0x00000000
> (lldb) po [newTaskDict allKeys]
> (id ) $37 = 0x0f8c1650 <__NSArrayI 0xf8c1650>(
> 2012-05-11 21:08:37 +0000
> )
> (lldb) po [[newTaskDict allKeys] lastObject]
> (id) $38 = 0x0f8b5ff0 2012-05-11 21:08:37 + 0000
> (lldb) p (int)[[[newTaskDict allKeys] lastObject] isEqual:when]
> (int) $39 = 0
> (lldb) po [[[newTaskDict allKeys] lastObject] class]
> (id) $40 = 0x3f4496b0 __NSDate
> (lldb) po [当类]
> (id) $41 = 0x3f4496b0 __NSDate
> (lldb) p (int)[[[newTaskDict allKeys] lastObject] isEqualToDate:when]
> (int) $42 = 0
> (lldb) p (int)[[[newTaskDict allKeys] lastObject] hash]
> (int) $43 = 358463317
> (lldb ) p (int)[当散列时]
> (int) $44 = 358463317

如您所见，`newTaskDict`只有一个由原始值键入的条目，`NSDate`其值为（$38）：
`0x0f8b5ff0 2012-05-11 21:08:37 +0000`
并且其哈希值为（$43）：
`35846331`

`NSDate`我用来检索条目的另一个是（$34）：
`0x0f8be100 2012-05-11 21:08:37 +0000`
它的哈希是（$44）：
`358463317`

除了它们的内存地址之外，这两个不是`NSDate`完全相同吗？`isEqual:`($39) 和($42)怎么可能`isEqualToDate:`为他们返回 NO？

已解决：
这种奇怪的不平衡原来是由`sub-second differences`. 您必须在已接受的答案下阅读我的第二条评论，因为它真的很有趣，如果您不知道它可能有一天会咬到您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T03:03:40.027

`isEqualToDate:`还将查看毫秒，您无法通过记录对象看到毫秒，因为描述方法`NSDate`仅格式化人类友好的字符串，但是日期对象背后有更多信息。

看起来您的两个日期略有不同，即使它们是在同一个运行循环上创建的，也可能发生这种情况，尝试创建一个并在 2 个引用中仅使用一个对象，然后进行第二次测试以检查分别`NSDate`创建的两个对象 - 甚至一个接一个，他们不应该是平等的。

引用 Apple 文档：

> 此方法检测日期之间的亚秒级差异。如果要比较粒度较小的日期，请使用 timeIntervalSinceDate: 比较两个日期。

[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T03:00:21.460

isEqual to date 以微秒为单位进行比较。如果您需要较低的精度，请使用 timeIntervalSinceDate: 来测试日期是否在微秒、秒、小时、天等范围内。

isEqual 经常使用内存地址本身来决定它是否是同一个对象，因为如果它们有不同的地址，它们就是不同的对象。

# c++ - Qt 和 OSG 集成问题，场景图消失

> ID：10560706
> 
> 赞同：3
> 
> 时间：2012-05-12T02:58:18.570
> 
> 标签：c++, qt, opengl, openscenegraph

所以我在集成 QT 和 OSG 时遇到了问题。我有一个运行良好的 QT/OSG 程序。布局与您在下面看到的类似。

```
|--------------------------|
|  1   |         2         |
|      |                   |
|      |                   |
|      |                   |
|      |                   |
|      |                   |
|      |-------------------|
|      |         3         |
|      |                   |
|--------------------------| 
```

中央小部件由一个 QFrame 组成，该 QFrame 具有三个子小部件并使用网格布局。小部件 1 是一个 QFrame，也具有网格布局。小部件 2 是 OSG 查看器，如下所述。小部件 3 是一个 QFrame，也具有网格布局。

其中两个填充了一个以 osgviewerQT.cpp 中的示例为模型的小部件。基本上它使用一个嵌入式窗口，我有一个每 10 毫秒触发一次并调用 osg 框架函数的 QTimer。

我还有 4 个其他小部件。我动态填充的两个 QLabel 和两个 QTable。我一直在将所有四个小部件添加到 1 的网格布局中。当我这样做时，一切都很好，我在 2 中得到了我漂亮的场景图。如果我进行一次更改，将这四个小部件从 1 的网格布局移动到 2 的网格布局突然我的场景图消失了。任何想法出了什么问题？我已经检查了 valgrind，所以我很确定这不是内存问题，而是我使用 lib 的方式。我已经确认正在调用 frame 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T15:30:54.643

我找到了一个解决方案：您必须为查看器控件添加大小提示。这样的事情就可以了：

在`AbstractQTGLWidget.hpp`：

```
...
class AbstractQTGLWidget ... {
  ...
protected:
  QSize sizeHint() const { return QSize(400,300); }
  ...
}; 
```

我认为（但不是 100% 肯定）问题出在构造函数中，当使用`width()`and`height()`属性时。

不同的布局，在确定每个小部件的宽度和高度时的优先级不同，因此构造函数对最终的宽度和高度*视而不见。*

给出初始宽度和高度，我假设底层 osg 查看器可以计算相机和对象引用，并相应地开始该过程。之后的宽度和高度更改被正确应用，因为对象以正确的大小启动，但不是最终的。

也许控件*认为*它的大小为 0 x 0 像素，并且渲染器开始疯狂初始化......

0： ![与 0](../Images/89b07c9477436177de76634e137eed76.png)

有 1： ![有 1](../Images/735e364000df0388f8b8c2208dcab0d8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T15:33:27.227

我尝试使用您提供的代码重现问题。但是，我无法获得最新的 OpenSceneGraph（及其 OpenThreads 依赖项）构建。

因此，我使您的示例更加简单，并使用了 QFrame 而不是 OSG 小部件。

对代码进行了很多试验，我的建议是尝试添加一个调用：

```
 viewer->setSizePolicy(QSizePolicy::Minimum, QSizePolicy::Minimum); 
```

# php - 使用 API 和 PHP 时错误处理的良好做法是什么？

> ID：10560707
> 
> 赞同：2
> 
> 时间：2012-05-12T02:58:40.437
> 
> 标签：php, error-handling

所以我正在使用 API，我想知道一些在不破坏脚本的情况下处理错误的良好做法。向我扔任何东西，让我接触更多，这样我就可以进一步研究它。

此外，感谢示例，它可以帮助我在视觉上将某些内容链接到一个术语/短语。

我的一些读物：

[PHP 中的错误处理](https://stackoverflow.com/questions/134331/error-handling-in-php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:02:27.850

1.  记录错误
2.  如果这是面向用户的应用程序/页面，则向他们显示人性化的错误消息，而不是 API 返回的错误消息
3.  如果您的 API 调用因技术原因失败（即 curl 无法连接）或 API 遇到不寻常的技术问题，则应使用异常。否则应使用正常的错误处理（即用户提供的数据无效）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T03:12:15.557

错误处理，是一个很大很大的话题。它不能缩小到一个单一的答案。最佳实践通常根据用户友好性和安全性来判断。所以基本上你的api应该有多个单独的错误功能。

*   应该包括一种记录错误并在用户需要时显示的方法。
*   编号你的错误。给每个错误一个唯一的编号来识别它。
*   将例外付诸实践。**并非每个错误都是 ACTUAL**，有些是例外。
*   必须创建多种处理错误的方法。喜欢一次将错误分组或一一显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T03:07:05.040

通常我所做的是用 try/catch 块包装潜在的有问题的代码 - 例如数据库连接。然后，如果发现任何错误，请将人类可读的等效项放入全局数组中，以便您可以安全地将列表输出到模板。

例如：

```
<?php
$errors = array();
try
{
   if (!$var)
        throw new Exception('Meh..');
}
catch (Exception $e)
{
    // Use $e with caution, as with database connection it can sometimes contain your password. :P
    $errors[] = 'Something is seriously wrong with that last statement.<br />' . $e;
}

// Template layers..

echo '
        <ul>';
foreach ($errors as $error)
    echo '
            <li>', $error, '</li>';

echo '
        </ul>'; 
```

# mysql - Rails3：将HABTM关联保存为数据库中的数组？

> ID：10560711
> 
> 赞同：0
> 
> 时间：2012-05-12T02:59:34.507
> 
> 标签：mysql, ruby-on-rails, database, activerecord

我有两个具有HABTM关系的模型：用户和兴趣...基本上这样做的目的是当用户注册时，他们将能够选择兴趣..无论如何，我已经设置并工作了表单（保存到数据库）但不确定它是否是“正确的方式”..查看数据库数据的屏幕截图..例如，我创建的最后一个测试用户（用户 7）选择了许多兴趣..这些应该保存为数组还是这行吗？

![在此处输入图像描述](../Images/59168bd140e2ea1fe0540304fdb48ab3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:02:00.493

这是正常的方式。它为每个人/兴趣对创建一行。

# php - DELETE FROM 通过 CSV 内容查询 MySQL

> ID：10560712
> 
> 赞同：0
> 
> 时间：2012-05-12T02:59:34.837
> 
> 标签：php, mysql, database, csv, sql-delete

我有一个 CSV 文件上传到与包含我想从数据库中的表（一次全部）中删除的人的电子邮件地址的文件相同的目录中。我使用的代码正确回显，但不会从表中删除任何内容。CSV 文件与包含以下代码的文件上传到同一目录。

```
<?php
    // Make a MySQL Connection
    mysql_connect("x", "x", "x") or die(mysql_error());
    mysql_select_db("volunteers2012") or die(mysql_error());
    mysql_query($sql);
    /********************************/

    $addresses = file('deleteEmails.csv');
    foreach($addresses as $address) {
        $safe_address = mysql_real_escape_string($address);
        $sql = "DELETE FROM vols2012 WHERE `email` = '$safe_address'";
        $result = mysql_query($sql) or die(mysql_error());
    }
    echo "DELETION A GREAT SUCCESS!";
    ?> 
```

第 2 轮 - 尝试使用 .txt 文件

```
<?php
    // Make a MySQL Connection
    mysql_connect("x", "x", "x") or die(mysql_error());
    mysql_select_db("volunteers2012") or die(mysql_error());
    mysql_query($sql);
    /********************************/

    $addresses = "LOAD DATA LOCAL INFILE ('deleteEmails.txt')";
foreach($addresses as $address) {
$safe_address = mysql_real_escape_string($address);
$sql = "DELETE FROM vols2012 WHERE (email = '$safe_address')";
$result = mysql_query($sql) or die(mysql_error());
   }
    echo "DELETION A GREAT SUCCESS!";
    ?> 
```

我仍然收到成功回声，但是为`foreach()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:50:46.513

我最终没有使用上传删除方法，而是创建了一个带有复选框的 html 页面以手动删除。最后，这是最好的方法，因为我需要将一些记录留在一个表中而不是另一个表中。

```
 <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <?php

       // Delete the customer rows (only if the form has been submitted)

         if(isset($_POST['submit']))
      {
      foreach($_POST['todelete'] as $delete_id) {

             $query="DELETE FROM volConfirm WHERE email='$delete_id'";

                mysql_query($query) or die ('Error in query: ' .mysql_errno() . mysql_error());
            }

        }

        // Display the customer rows with checkboxes for deleting
        $query="SELECT * FROM volConfirm";

        $result = mysql_query($query);
        while ($row = mysql_fetch_array($result)){
        echo '<input type="checkbox" value="' . $row['email'] .'"name="todelete[]" />';
        echo $row['agreeName'];
        echo ' '.$row['position'];
        echo ' '.$row['shift_times'];
        echo ' '.$row['email'];
        echo ' '.$row['confirmed'];
        echo '<br />';
        echo '<br />';
       }
     ?>

        <input type="submit" name="submit" value="Remove" />
      </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T03:44:01.257

对于电子邮件地址的 CSV 列表，请尝试以下查询大小：

**PHP**

```
$emails = 'a@b.com,b@c.org,foo@example.org'; 
```

**SQL**

```
$emails = mysql_real_escape_string($emails);
$sql = "DELETE FROM vols2012 WHERE `email` IN ({$emails})";
mysql_query($sql); 
```

# php - Facebook SDK OOP 错误

> ID：10560715
> 
> 赞同：-1
> 
> 时间：2012-05-12T03:00:22.823
> 
> 标签：php, facebook, facebook-php-sdk

我将一个简单的登录/注册脚本（使用 facebook 连接）转换为 oop。但是现在当我调用 getUser() 时出现错误：

```
 Fatal error: Call to a member function getUser() on a non-object 
```

有人知道我该如何解决吗？谢谢。附言。包括 facebook sdk。

```
 private $facebook;
    private $db;

    public function __construct($db_user, $db_password, $db_name, $db_host, $app_id, $secret)
    {
        if (empty($_SESSION)) {
            $this->facebook    = new Facebook(array(
                'appId' => $app_id,
                'secret' => $secret,
                'cookie' => true
            ));
            $this->db = new ezSQL_mysql($db_user, $db_password, $db_name, $db_host);
        } else {
            $this->Redirect('index.php');
        }
    }

    public function Login()
    {
        $session = $this->facebook->getUser();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T03:23:10.677

我没有看到 Facebook 类/功能，并且您的帖子似乎没有任何附加内容。如果我可以实际查看您在此处调用的 Facebook 类/函数，那将会很有帮助：

```
$this->facebook    = new Facebook(array(
                'appId' => $app_id,
                'secret' => $secret,
                'cookie' => true
            )); 
```

不管什么原因，这个函数失败了，所以 $this->facebook 不是一个对象（很像如果你的数据库连接失败，你会在 $db->blah 上得到同样的错误。

您可能想要捕获 Facebook 类/函数以查看实际发生的情况。

# javascript - 茉莉花中的全局“beforeEach”？

> ID：10560716
> 
> 赞同：54
> 
> 时间：2012-05-12T03:00:22.183
> 
> 标签：javascript, unit-testing, jasmine

我正在使用 Jasmine 编写测试。

我有几个测试文件，每个文件都有一个`beforeEach`，但它们完全相同。

我如何为他们提供一个**全球性** `beforeEach`的？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2014-07-31T08:01:48.417

x1a4 的回答让我很困惑。这可能更清楚：

当您在所有块**之外**`beforeEach`声明一个函数时，它将在每次测试之前触发（因此在 each 之前）。声明块之前还是之后都没有关系。**`describe``it``beforeEach``describe`**

 **您可以将它包含在您的测试运行中包含的任何规范文件中 - 包括在一个文件中，因此它可能只包含您的全局`beforeEach`声明的规范帮助文件的概念。

[文档中没有提到它。](http://jasmine.github.io/2.0/introduction.html#section-Setup_and_Teardown)

```
// Example: 

beforeEach(function() {
    localStorage.clear();
});

describe('My tests', function() {
    describe('Test localstorage', function() {

        it('Adds an item to localStorage', function() {
            localStorage.setItem('foo', 'bar');
            expect(localStorage.getItem('foo')).toBe('bar');
        });

        it('Is now empty because our beforeEach cleared localStorage', function() {
            expect(localStorage.getItem('foo')).toBe(null);
        });

    });
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-12T04:40:25.947

你可以把它放在你的`spec_helper.js`文件中，它应该可以正常工作。**

# windows-7 - Windows 7 上的 VB6 应用程序有时仅保存到虚拟商店

> ID：10560717
> 
> 赞同：1
> 
> 时间：2012-05-12T03:00:33.093
> 
> 标签：windows-7, vb6, crash, virtualstore

我负责维护一个 VB6 应用程序，我在 Windows 7 上遇到了一个奇怪的行为。

当应用程序安装到程序文件（x86）（或者我假设它没有写入权限的任何目录）时，大多数时候，当它去本地保存文件时，它最终会出现在那个奇怪的虚拟存储位置. 这是可以接受的。但偶尔，它会尝试在本地保存并给出错误，说您不允许在此处保存，并询问您是否要保存在其他地方。好吧，至少，如果您尝试将其保存为新文件，它会这样做，如果您尝试将其保存为现有文件，则会因运行时错误 75 而崩溃。

这两个文件都只是用“Open filename As #1”打开的——谁能给我更多信息，说明是什么迫使它使用或不使用用户无权写入的文件夹中的虚拟存储？

或者，我尝试以管理员身份运行该应用程序，但它在启动时崩溃， - 还没有弄清楚为什么程序会在锁定模式下运行而不是以管理员身份运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:38:53.157

好吧，你自己已经很清楚了：有些地方没有海拔就不能写，有些地方根本就不行。对于某些位置，Windows 会进行救援并将文件重定向到 VirtualStore。其中包括：

*   程序文件和程序文件 (x86)
*   视窗
*   程序数据

它认为永远不要假设文件操作不会出错是一种很好的编程习惯。您可以预见错误并事先警告用户，并且*必须*将任何文件操作嵌入`On Error Goto`块中。

关于程序在提升运行时崩溃（这确实是最后的解决方案，尽量避免这种情况）：VirtualStore 的问题是您最终可能会得到两个版本的文件：提升时写入的版本和不提升时写的。当您运行提升程序时，它会突然使用其他文件而不是以前，因此可能会出现其他行为，包括崩溃。[同样的事情也适用于注册表项](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965884%28v=vs.85%29.aspx)。

[更多关于 UAC 虚拟化](http://www.windowsecurity.com/articles/Protecting-System-Files-UAC-Virtualization-Part1.html)（优秀文章！）

祝你好运！

# .net - .net webservices，返回超过 1 条记录

> ID：10560721
> 
> 赞同：0
> 
> 时间：2012-05-12T03:01:51.440
> 
> 标签：.net, web-services, ksoap2

我正在开发一个.net webservices，但结果总是只返回第一条记录，我怎样才能修复while循环以便它可以返回超过1？下面是示例代码：DAL.cs

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI.WebControls;
using System.Web.UI.HtmlControls;
using System.Data.SqlClient;
using System.Collections.Generic;

namespace Data
{
    public class DAL
    {
        public static Model.customer GetCustomer(string custID)
        {
            string cs = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
            SqlConnection conn = null;
            SqlDataReader reader = null;
            try
            {
                conn = new SqlConnection(cs);
                string sql = "SELECT * FROM member WHERE userType = '" + custID + "'";
                SqlCommand cmd = new SqlCommand(sql, conn);
                conn.Open();
                reader = cmd.ExecuteReader();

                List<Model.customer> list = new List<Model.customer>();

                while (reader.Read())
                {
                    Model.customer cust = new Model.customer();
                    cust.customerID = reader["fullName"].ToString();
                    cust.contactName = reader["handphone"].ToString();
                    cust.companyName = reader["NRIC"].ToString();
                    list.Add(cust);
                }
                //error
                return list;
                //end of error
            }
            catch (Exception e)
            {
                HttpContext.Current.Trace.Warn("Error", "error in getcustomer()", e);
            }

            finally
            {
                if (reader != null) reader.Close();
                if (conn != null && conn.State != ConnectionState.Closed) conn.Close();
            }
            return null;
        }
    }
} 
```

客户.cs

```
using System;

namespace Model
{        
    public class customer
    {
        private string _customerID;
        private string _companyName;
        private string _contactName;

        public string customerID
        {
            get { return _customerID; }
            set { _customerID = value; }
        }

        public string companyName
        {
            get { return _companyName; }
            set { _companyName = value; }
        }

        public string contactName
        {
            get { return _contactName; }
            set { _contactName = value; }
        }
    }
} 
```

服务.cs

```
using System;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Collections.Generic;

[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class Service : System.Web.Services.WebService
{
    public Service () {

        //Uncomment the following line if using designed components 
        //InitializeComponent(); 
    }

    [WebMethod]
    //public Model.customer GetCustomer(string custID)        
    public static List<Model.customer> GetCustomer(string custID)
    {        
        return Biz.BAL.GetCustomer(custID);
    }
} 
```

BAL.cs

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI.WebControls;
using System.Web.UI.HtmlControls;
using System.Data.SqlClient;
using System.Collections.Generic;

namespace Biz
{
    public class BAL
    {
        public static List<Model.customer> GetCustomer(string custID)
        {
            Model.customer cust = Data.DAL.GetCustomer(custID);
            cust.companyName = cust.companyName;
            List<Model.customer> myList = new List<Model.customer>();

            myList.Add(cust);

            return myList;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:05:02.540

您必须返回`List<T>`而不是单个实例，因此将 WebMethod 的返回类型更改为`List<Model.customer>.`

编辑：

使用参数/预编译的 sql 语句或存储过程来避免 SQL 注入攻击。（即永远不要使用硬编码的 sql 字符串。）

始终使用 using 语句正确处理[一次性对象](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)。

```
public static List<Model.customer> GetCustomers(String type)
{
 string cs = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
 List<Model.customer> list=new List<Model.customer>();
 using (SqlConnection cn = new SqlConnection(cs))
 {
    using (SqlCommand cmd = new SqlCommand("SELECT * FROM member WHERE userType=@userType", cn))
    {
        cmd.Parameters.Add("@userType",System.Data.SqlDbType.VarChar,20).Value=type; 
        cn.Open();
        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
              Model.customer cust = new Model.customer();
              cust.fullName = reader["fullName"].ToString();
              cust.handPhone = reader["handphone"].ToString();
              cust.NRIC = reader["NRIC"].ToString();
              list.Add(cust);
            }
        }
    }
 }
 return list;
} 
```

# android - Android - 自动将项目添加到 ListView

> ID：10560724
> 
> 赞同：0
> 
> 时间：2012-05-12T03:02:55.037
> 
> 标签：android, android-listview

下面的代码当前从 mysql 数据库中提取数据并将其显示在 ListView 中。我要做的是找到一种方法让应用程序每分钟左右检查一次 mysql 数据库以检查是否有任何新条目，如果它发现一个不在当前 ListView 中的新条目 - 它会在新条目之前项到列表顶部。我已经阅读了关于 notifyDataSetChanged() 的一些内容，但我想我无法掌握它的实际工作原理或如何实现它。任何帮助都是适用的。谢谢！

```
public class Data extends ListActivity {
    private ArrayList<Feed> posts = new ArrayList<Feed>();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        new FeedTask().execute();
    }
    private class FeedTask extends AsyncTask<Void, Void, Void> {
        private ProgressDialog progressDialog;
        protected void onPreExecute() {
            progressDialog = ProgressDialog.show(Data.this,"", "Loading. Please wait...", true);
        }
        @Override
        protected Void doInBackground(Void... arg0) {
            try {
                HttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost("http://xxxx/livefeed/getdata.php");
                HttpResponse httpResponse = httpClient.execute(httpPost);
                String result = EntityUtils.toString(httpResponse.getEntity());
                JSONArray jArray = new JSONArray(result);
                JSONObject json_data = null;
                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);
                    Feed feed = new Feed();
                    feed.content = json_data.getString("post");
                    feed.time = json_data.getString("post_time");
                    posts.add(feed);
                }
            } 
            catch (Exception e){
                Log.e("ERROR", "Error loading JSON", e);
            }
            return null;
        }
        @Override
        protected void onPostExecute(Void result) {
            progressDialog.dismiss();
            setListAdapter(new FeedListAdaptor(Data.this, R.layout.feed, posts));
        }
    }
    private class FeedListAdaptor extends ArrayAdapter<Feed> {
        private ArrayList<Feed> posts;
        public FeedListAdaptor(Context context,
        int textViewResourceId,
        ArrayList<Feed> items) {
            super(context, textViewResourceId, items);
            this.posts = items;
        }
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater)
                getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.feed, null);
            }
            Feed o = posts.get(position);
            TextView tt = (TextView) v.findViewById(R.id.toptext);
            TextView bt = (TextView) v.findViewById(R.id.bottomtext);
            tt.setText(o.content);
            bt.setText(o.time);
            return v;
        }
    }
    public class Feed {
        String content;
        String time;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T05:08:17.870

我建议在解析 XML 对象后将所有内容存储在本地 sql 数据库中。这样你就可以在内容提供者上使用[LoaderManager](http://developer.android.com/reference/android/app/LoaderManager.html)，当新的东西被添加到数据库时它会异步更新。

它可能会对您当前的代码进行一些重构，但它值得 IMO，因为它几乎是您正在寻找的

# mysql - MySQL 语句 HAVING COUNT(*) < t.row - 包括 Nulls

> ID：10560730
> 
> 赞同：1
> 
> 时间：2012-05-12T03:04:42.260
> 
> 标签：mysql, sql

我目前正在尝试使以下语句起作用：

```
SELECT t1.id, t1.row2
FROM table1 t1
JOIN table2 t2 ON t1.rowx = t2.rowx
JOIN table3 t3 ON t2.rowy = t3.rowy
GROUP BY t1.row2
HAVING COUNT(t2.rowx) < t3.maximum_size 
```

该语句有效并提供输出，但是许多`t3.maximum_size`字段会`NULL`阻止该语句按预期工作。

有没有办法让`COUNT(*)`<`another_number`包含`NULL`值？

例子：

```
10 < 20 // true
20 < 20 // false
18 < null // true (as null represents no maximum size in my query) 
```

（我确实检查了其他一些与该问题相关的 SO 问题，但我没有看到有人帮助完成这项特定任务 - 如果我错过了一个，请指出我正确的方向。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:10:16.410

将have子句更改为：

```
Having count(t2.rowx) < t3.maximum_size or t3.maximum_size is null 
```

回想起来，更好的 SQL 答案是：

```
Having count(t2.rowx) < max(t3.maximum_size) or max(t3.maximum_size) is null 
```

原始语法在 mysql 中有效，但在大多数数据库中无效。另外，我认为它是糟糕的 SQL。当在聚合上下文中引用时，“t3.maximum_size”的使用实际上等同于“t3.Maximum_Size 的任何值”。最好是明确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T03:13:48.857

我认为您还需要汇总`t3.maximum_size`：

```
HAVING COUNT(t2.rowx) < MAX(t3.maximum_size) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T04:30:04.107

也许你可以使用 NVL

```
 HAVING COUNT(t2.rowx) < NVL(t3.maximum_size, 0) 
```

这意味着如果 t3.maximum_size 返回为 NUll，则匹配将使用零完成

希望能帮助到你

# asp.net-mvc-3 - 上传 IIS 中托管的文件网站返回 HTTP 404 文件或目录未找到

> ID：10560736
> 
> 赞同：1
> 
> 时间：2012-05-12T03:05:13.550
> 
> 标签：asp.net-mvc-3, iis-7, upload, http-status-code-404

我的网站托管在 IIS7.5 我有一个控制器操作如下

```
[HttpPost]
    public ActionResult Create(ClientDocument clientdocument,HttpPostedFileBase FilePath)
    {
        if (ModelState.IsValid)
        {
            try
            {
                if (FilePath != null && FilePath.ContentLength > 0)
                {
                    var filename = Path.GetFileName(FilePath.FileName);
                    string ext = filename.Split(char.Parse(".")).LastOrDefault();
                    clientdocument.FilePath = clientdocument.Title + "." + ext;
                    var path = Path.Combine(Server.MapPath("~/Uploads"), clientdocument.Title + "." + ext);
                    FilePath.SaveAs(path);
                    db.ClientDocuments.Add(clientdocument);
                    db.SaveChanges();
                    return RedirectToAction("../");
                }                    
            }
            catch(Exception ex)
            {
                return HttpNotFound("There Was A Problem Uploading File And Creating A Record");
            }
        }

        ViewBag.ClientID = new SelectList(db.Clients, "ClientID", "FullName", clientdocument.ClientID);
        return View(clientdocument);
    } 
```

当我单击按钮时，它会尝试上传文件，但随后显示以下错误消息

http 404 文件或目录未找到您要查找的资源可能已被删除、名称已更改或临时不可用

请协助如何配置 iis7.5 以上传此文件，而在 VS2010 中一切正常。

编辑

更改后@keshav 提到的视图：

```
 @using (Html.BeginForm("Create", "ClientDocument", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)
    <fieldset>
            <legend>Attach New Client Document</legend>
    <div class="editor-label">
                @Html.LabelFor(model => model.FilePath)
            </div>
            <div class="editor-field">
                <input type="file" id="FilePath" name="FilePath" />
                @Html.ValidationMessageFor(model => model.FilePath)
            </div>
   <fieldset>
} 
```

和控制器：

```
[HttpPost,ActionName("Create")]
    public ActionResult Create(ClientDocument clientdocument,HttpPostedFileBase FilePath)
    {
        if (ModelState.IsValid)
        {
            try
            {
                if (FilePath != null && FilePath.ContentLength > 0)
                {
                    var filename = Path.GetFileName(FilePath.FileName);
                    string ext = filename.Split(char.Parse(".")).LastOrDefault();
                    clientdocument.FilePath = clientdocument.Title + "." + ext;
                    var path = Path.Combine(Server.MapPath("~/Uploads"), clientdocument.Title + "." + ext);
                    FilePath.SaveAs(path);
                    db.ClientDocuments.Add(clientdocument);
                    db.SaveChanges();
                    return RedirectToAction("Index", "Home");
                }                    
            }
            catch(Exception ex)
            {
                return HttpNotFound("There Was A Problem Uploading File And Creating A Record");
            }
        }

        ViewBag.ClientID = new SelectList(db.Clients, "ClientID", "FullName", clientdocument.ClientID);
        return View(clientdocument);
    } 
```

我仍然遇到和以前一样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:52:03.747

404 错误意味着您试图在服务器上请求一个不存在的 url。您还没有显示您的视图的外观，但我怀疑您有一些硬编码的 url，并且您没有使用 url 助手来生成表单。因此，这是生成指向此控制器操作的表单的正确方法：

```
@using (Html.BeginForm("Create", null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    ...
} 
```

另一个问题在于您的控制器操作。以下是错误的：

```
return RedirectToAction("../"); 
```

RedirectToAction 方法需要一个操作名称，而不是您提供的 url。因此，请确保您已经传递了一个动作名称（如果动作位于不同的控制器上，则传递一个可选的控制器名称）：

```
return RedirectToAction("Index", "Home"); 
```

如果在您返回的文件上传处理过程中出现异常，也会在您的创建控制器操作`HttpNotFound`中导致客户端出现 404 错误。因此，请确保此代码不会引发异常。您也可以记录错误，而不是简单地重定向，以便能够确定出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T03:18:47.230

我想你忘记了上传之后的 /

> var path = Path.Combine(Server.MapPath("~/Uploads/"), clientdocument.Title + "." + ext);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T04:43:04.657

发布应用程序后会发生这种情况吗？如果是这样，上传文件夹很可能没有被复制。除非您更改发布设置以包含所有文件，否则 Vs2010 不会发布自定义文件夹。或者您可以浏览站点位置并自己创建文件夹

**编辑**

我有一个类似设置的应用程序，似乎工作正常。我注意到的唯一区别在于 html.begin。我明确指定了动作和控制器。

我的观点

```
@using (Html.BeginForm("Upload", "Administrator", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true, "File upload was unsuccessful. Please correct the errors and try again.")
    <input type="file" name="FileUpload1" />
    <input type="submit" name="Submit" id="Submit" value="Upload" onclick="return confirm('Doing this will override any previous data. Are you sure you want to proceed?')"/>
} 
```

我的控制器：

```
[HttpPost, ActionName("Upload")]
public ActionResult UploadPost()
{
  // my code
} 
```

尝试指定您的操作和控制器，看看是否有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T05:35:44.850

据我所知，您不必更改 IIS 中的任何设置......进一步了解@Darin Dimitrov 关于异常的说法，您可以将 catch 子句中的代码更改为：

```
catch(Exception ex)
{
        ViewBag.errorMessage = ex.Message;
        return View("Error");
} 
```

并在您的错误页面（共享视图文件夹下应该有一个）添加以下行

```
@ViewBag.errorMessage 
```

我认为代码在服务器上引发了一些异常，但在本地运行时却没有。这将帮助您缩小问题范围。如果您仍然收到 404 错误，则可能是设置问题。

# ruby - 如何从现有的 postgres 表转储创建 Sequel 迁移？

> ID：10560738
> 
> 赞同：3
> 
> 时间：2012-05-12T03:05:54.727
> 
> 标签：ruby, postgresql, migration, sequel

我想知道在基于 postgres 的现有表转储的续集中创建迁移的最佳方法。我意识到我必须自己编写 down 方法来删​​除表/函数/序列，但是有没有办法告诉后续迁移加载现有的 sql 脚本并执行脚本中的所有内容？

编辑：以防万一不清楚，这是使用 ruby​​ Sequel SQL library / gem

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T16:07:40.137

您不会从表转储创建迁移，但您可以使用 Sequel 的 schema_dumper 扩展轻松创建迁移。sequel 命令行程序实际上内置了对此的支持：

续集 -d postgres://postgres@localhost/mydb > 001_initial_migration.rb

不支持转储函数或序列，因为它旨在生成独立于数据库的迁移。

如果您正在使用函数和自定义序列，那么您完全处于特定于数据库的领域，并且仅使用数据库的工具可能会更好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-12T03:29:59.413

您是否在问如何使用 PostgreSQL 命令行客户端执行 SQL 脚本？如果是这样，答案是使用以下`--file`选项：

```
psql -U postgres -d mydb -f dump.sql. 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-13T16:35:35.130

```
DB.extension :schema_dumper

query = Vydia::DB.dump_schema_migration({:indexes => true, :foreign_keys => true, :index_names => true}) 
```

sequel 有一个扩展名`schema_dumper`，您可以使用它作为 ruby​​ 将 db 结构转储到迁移文件中，您也可以指定要转储的内容。

# mongodb - MongoDB 是否支持复合键的概念？

> ID：10560742
> 
> 赞同：1
> 
> 时间：2012-05-12T03:06:53.397
> 
> 标签：mongodb, mongoose

假设我有一个用户架构如下

```
var User = new db.Schema({
    username    : {type: String, unique: true}
    , password    : String
    , email: String
}); 
```

为了适应有朋友的用户，我正在考虑修改架构如下

```
var User = new db.Schema({
    username    : {type: String, unique: true}
    , password    : String
    , email: String
    , friends: [?]
}); 
```

我正在考虑对数据库进行非规范化以加快查询速度，而不仅仅是存储 ObjectId。假设现在我只想将 ObjectId 和 username 存储在 friends 数组中。是否可以做类似的事情

```
friends: [{String, String}] 
```

这两个字符串代表 ObjectId 和用户名？我不想创建一个全新的架构，因为我不需要新的 ObjectId。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T07:55:29.117

当然你可以这样做，但我真的建议命名这些字段，比如（在 Mongo shell 语法中）：

```
user = {
    '_id' : ObjectId(....),
    'username' : 'derick',
    'password' : 'notmypw',
    'email' : 'nospam@example.com',
    'friends' : [
        { 'id': ObjectId(....), 'username' : 'adam' },
        { 'id': ObjectId(....), 'username' : 'ross' },
    ]
}; 
```

但是，您（当然）根本不必存储 ObjectId，因为您`username`已经是唯一的。哎呀，您甚至可以将用户的用户名作为`_id`字段的 ID：

```
user = {
    '_id' : 'derick',
    'password' : 'notmypw',
    'email' : 'nospam@example.com',
    'friends' : [
        { 'username' : 'adam' },
        { 'username' : 'ross' },
    ]
}; 
```

我认为在 Mongoose 中，您必须这样做（通过阅读[http://mongoosejs.com/docs/model-definition.html](http://mongoosejs.com/docs/model-definition.html)上的“在文档中定义文档” ）

```
var Friend = new db.Schema({
    username  : String
});

var User = new db.Schema({
    username    : {type: String, unique: true}
    , password    : String
    , email: String
    , friends: [Friend]
}); 
```

# python - urllib2 编码问题

> ID：10560744
> 
> 赞同：0
> 
> 时间：2012-05-12T03:07:03.870
> 
> 标签：python, encoding, urllib2

这是我的示例脚本：

```
import urllib2, re

response = urllib2.urlopen('http://domain.tld/file')
data     = response.read() # Normally displays "the emoticon <3 is blah blah"

pattern   = re.search('(the emoticon )(.*)( is blah blah)', data)
result    = pattern.group(2) # result should contain "<3" now

print 'The result is ' + result # prints "&lt;3" because not encoded 
```

如您所见，我正在获取一个页面并尝试从中获取一个字符串，但它没有正确编码，因为我不确定要添加到该脚本中的内容以使最终结果正确。谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T05:29:30.243

尝试这个：

```
>>> import HTMLParser
>>> h = HTMLParser.HTMLParser()
>>> h.unescape('wer&amp;wer')
u'wer&wer' 
```

# ruby - 在 ruby 中寻找匹配字符串的模式

> ID：10560746
> 
> 赞同：0
> 
> 时间：2012-05-12T03:07:20.220
> 
> 标签：ruby, regex

```
name="(this is 
a message
)

(other message)";

res=name.scan(/(\(.*\))/m);
puts res.join("###"); 
```

在上面的代码中，我想将匹配的括号与其中的文本提取为一个整体表达式。

我的意思是我想通过我的代码得到以下结果：

```
(this is 
a message
)###(other message) 
```

也就是说，res的长度应该是2而不是1，但是在我的代码中，我总是得到：

```
(this is 
a message
)
(other message) 
```

我的模式一定有问题，有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:11:53.493

您想使用[非贪婪](http://en.wikipedia.org/wiki/Regular_expression#Lazy_quantification)匹配，因此将正则表达式行更改为：

```
res=name.scan(/(\(.*?\))/m); 
```

# javascript - 处理窗口外焦点的Javascript滚动条

> ID：10560749
> 
> 赞同：2
> 
> 时间：2012-05-12T03:07:41.327
> 
> 标签：javascript, scrollbar

我正在尝试重现我在 Google Docs 中看到的功能。

Google Docs 滚动条具有自定义外观，显然不是本地滚动条，但如果我将鼠标放在手柄上，将鼠标移出窗口并上下拖动鼠标，滚动条将相应地工作。

我尝试查看压缩代码，但尚未找到解决方案。我创建了一个自定义滚动条，其手柄上有一个 mousedown 事件，它在 mousemove 上向主体添加了一个事件侦听器。但我显然无法检测到鼠标移出窗口，因此滚动条的可用性非常差。

即使在窗外，他们如何设法跟踪鼠标移动？有没有更好的跨浏览器，我想念的聪明方法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:14:33.197

他们所做的只是使用 css 来设置具有溢出-y 设置为滚动的 div 的内置滚动功能的样式。

只需在 chrome 或 firefox 上使用您的开发人员工具即可查看。

[用于 Firefox 的自定义 CSS 滚动条](https://stackoverflow.com/questions/6165472/custom-css-scrollbar-for-firefox)关于样式滚动条的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T03:24:52.303

您可以自定义事件 onmousedown 和 onmouseup，当您将焦点移出窗口时，它仍然会发生。

# ruby - Ruby：将 ARGV 转换为字符串

> ID：10560758
> 
> 赞同：3
> 
> 时间：2012-05-12T03:10:49.167
> 
> 标签：ruby

**问题**：有没有一种简单的方法可以在 Ruby 中打印出元素由空格分隔的数组？

**详情**：

我想使用 Ruby 对命令进行基准测试并运行该命令。就像是：

```
 script.rb ./command_name arg1 arg2 arg3 ... 
```

例如：

```
 script.rb ls -lh 
```

应该运行`ls -lh`。我试图这样做：

```
require 'benchmark'
puts Benchmark.measure{system(ARGV.to_s)} 
```

（注意忽略这个问题的基准，我只是将其包括在内，因为我正在使用它）但这不起作用，因为 ARGV 打印时没有空格。例如`ls -lh`变成`ls-lh`. 显然，我可以通过解析 ARGV 数组并在循环中的元素之间插入空格来创建自己的字符串。但我认为有一个更优雅的 Ruby 解决方案，但我还没有弄清楚，所以我想知道是否有人有建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T03:16:33.163

[更新]

你应该使用[l0b0 的答案](https://stackoverflow.com/a/55153164/62082)

[原答案]

您可以轻松地将 Array 的元素[与`join`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join). ARGV 是一个数组。

```
ARGV.join(" ") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-14T00:32:15.893

要生成可重用的参数字符串：

```
ARGV.map{|arg| Shellwords.escape arg}.join(' ') 
```

# smtp - Courier-IMAP 使用另一个 SMTP 服务器

> ID：10560759
> 
> 赞同：0
> 
> 时间：2012-05-12T03:10:56.500
> 
> 标签：smtp, amazon-ses

我正在使用安装了 Courier-IMAP 作为电子邮件服务器的服务器。然而，似乎所有发出的邮件都进入了 Gmail 和 Hotmail 帐户的垃圾邮件文件夹。我确实有一个带有 Amazon SES 的 SMTP 服务器，可以将邮件放入收件箱，我想知道是否可以将 Courier-IMAP 配置为使用 Amazon SMTP 服务器设置。我在这方面找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:18:44.563

Courier 是一个 IMAP 服务器。它提供对邮箱的访问。

您的机器上有一个 SMTP 服务器/MTA，它将本地发送/生成的邮件传递到 IMAP 邮箱和外部邮箱（亚马逊、谷歌、AOL 等）。您可能拥有的流行 SMTP/MTA 是： exim postfix qmail sendmail 。

您可以直接配置应用程序以使用 Amazon 的 SMTP 服务。您还可以将本地 SMTP/MTA 配置为中继到 Amazon。

无论您是否选择亚马逊，所有大型 ISP 和电子邮件提供商的反垃圾邮件政策都非常恶毒。大多数要求您安装发件人策略框架 (SPF) 或 DomainKeys 之类的东西。我认为还有一个新协议。Yahoo 和 AOL 需要一个活动的 abuse@ 帐户，他们会使用具有唯一链接的消息 ping - 他们希望确保您始终检查该帐户。如果有任何内容进入垃圾邮件文件夹，请检查标头以了解为什么将其标记为此类 - 大多数大型 ESP 都会添加一个标头，说明为什么将某些内容标记为垃圾邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T14:03:07.887

根据软件作者的说法，`/etc/courier/esmtpauthclient`应该这样配置，并且它在我的服务器上工作配置：

/etc/courier/esmtpauthclient：

```
:email-smtp.us-east-1.amazonaws.com,587 AKISAMPLEPASSSUA AtHrTSAMPLEPASSWORDLiHJTt 
```

和

/etc/courier/esmtproutes：

```
example.com: email-smtp.us-east-1.amazonaws.com,587 /SECURITY=REQUIRED 
```

并且电子邮件地址和域应通过 Amazon SES 进行验证。

# facebook - 雅虎、纽约时报如何将阅读文章提交给 Facebook 开放图而不违反 Facebook 政策

> ID：10560762
> 
> 赞同：-1
> 
> 时间：2012-05-12T03:11:15.957
> 
> 标签：facebook, facebook-opengraph, facebook-apps

我刚刚向 Facebook 提交了带有关于阅读新闻的开放图表的应用程序，仍在等待批准。

我在这里遵循指南 [http://developers.facebook.com/docs/opengraph/actions/builtin/](http://developers.facebook.com/docs/opengraph/actions/builtin/)

但是当访问者阅读文章时，我很困惑哪个是最好的提交方式。

1.  在文章末尾创建一个按钮/链接，让用户提交，如果他愿意（我相信没有多少人给时间这样做）

2.  创建`onclick`每一个下一篇，后退，其他文章链接的动作，所以当用户阅读其他文章时，提交将开始（在用户转到其他文章的链接之前有硬代码确保提交成功）

3.  如果用户阅读该文章，则使用超时功能，例如 30 秒自动提交。（我不确定这是否违反 Facebook 政策）

4.  反过来呢？请给我建议

我确实检查了雅虎新闻，纽约时报，但仍然不明白他们是如何在每次用户阅读时提交文章的。任何人都可以指出我将非常有帮助。

提前致谢

* * *

**注意更新。**我没有用它来向任何人发送垃圾邮件，这就是为什么我在这里问雅虎，纽约时报是如何做到的。实际上今天经过调查，我发现了他们的使用方式。他们与 Facebook 公会合作。但我仍在研究用于存档的脚本。查看我的问题以了解相关问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:41:55.977

如果您每次准备好文章时都进行任何自动提交，那么您的用户会成群结队地离开您。看看这篇文章。[http://allfacebook.com/social-readers-down_b88125](http://allfacebook.com/social-readers-down_b88125)

Facebook 还明确声明您应该提供提示，除非有某种原因您不能这样做（例如，当用户不在计算机前时，您基于另一个动作发布到用户的墙上，例如用户 B “喜欢”用户 A 的帖子，因此当用户 A 不在时，它会发布到用户 A 的墙上）。

您最好的做法是： a) 提供提示。b）提供一个配置选项，如果用户需要，每次都可以发布 c）如果你想“推动”一点，第一个帖子是自动发布可能没有什么害处（尽管你还需要询问权限为此，这可能会让用户失望）。然后去找提示。

# python - 如何将 python+pygame 程序打包为可执行文件？

> ID：10560767
> 
> 赞同：3
> 
> 时间：2012-05-12T03:12:20.387
> 
> 标签：python, macos, windows-installer, pygame, py2exe

我之前使用`py2exe`过，但它似乎不再维护，他们拥有的最后一个包是 Python 2.6。

我需要使用 Python 2.7 + Pygame 的应用程序。

如果它让我也可以制作 OSX 软件包，那么它会获得很大的奖励积分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T03:30:40.393

[PyInstaller](http://www.pyinstaller.org/)怎么样？在撰写本文时，最近一次修订似乎是在 2 天前完成的，因此它似乎得到了维护，并声称支持 Windows、Linux 和 OSX。

[cx_Freeze](http://cx-freeze.sourceforge.net/)看起来也很有前途。它还声称是跨平台的。还有一个是[py2app](https://pythonhosted.org/py2app/)，它支持 OSX。

# google-bigquery - 使用服务帐户的 Google Bigquery 401 未经授权的错误

> ID：10560768
> 
> 赞同：3
> 
> 时间：2012-05-12T03:12:32.150
> 
> 标签：google-bigquery

当我从我的计算机上的[这篇文章](https://stackoverflow.com/questions/10524576/bigquery-and-oauth2)中尝试 Michael 的 bigquery 片段时，我遇到了“401 Unauthorized”问题。根据 ryguyrg 的建议，我同步了我的计算机时间（通过单击“立即更新”）并且代码有效。但问题是，过了一段时间，也许几分钟，当我重新运行代码时，它再次失败并出现 401 错误。所以几乎每次我想运行一个大查询请求时，我都必须手动同步我的计算机时间。

我很确定我的计算机运行良好，并且时间与服务器的差异不应超过几毫秒。那么究竟是什么导致了这个问题呢？我应该尝试在请求之前从代码中同步时间还是有更好的方法？

以下是 401 错误信息供参考：

```
Exception in thread "main" com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:159)
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:187)
    at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:115)
    at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:112)
    at com.google.api.services.bigquery.Bigquery$Jobs$Insert.executeUnparsed(Bigquery.java:1418)
    at com.google.api.services.bigquery.Bigquery$Jobs$Insert.execute(Bigquery.java:1442)
    at BigQueryJavaServiceAccount.main(BigQueryJavaServiceAccount.java:83) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-10-04T07:42:33.357

在这个例子中我遇到了同样的问题。 [https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries](https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries)

我试图低于命令但发生 401 错误

`export GOOGLE_APPLICATION_CREDENTIALS=/Users/mattheu/credentialFileName.json`

我使用以下解决了凭据问题

```
String jsonPath = "/Users/mattheu/credentialFileName.json";
        GoogleCredentials credentials = GoogleCredentials.fromStream(new FileInputStream(jsonPath)); 
```

```
package com;

import com.google.auth.oauth2.GoogleCredentials;
import com.google.cloud.bigquery.*;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.UUID;

public class App {
    public static void main(String[] args) throws InterruptedException, IOException {
        String jsonPath = "/Users/mattheu/credentialFileName.json";
        GoogleCredentials credentials = GoogleCredentials.fromStream(new FileInputStream(jsonPath));

        BigQuery bigquery = BigQueryOptions.newBuilder()
                .setCredentials(credentials)
                .build().getService();

        QueryJobConfiguration queryConfig =
                QueryJobConfiguration.newBuilder(
                        "SELECT "
                                + "CONCAT('https://stackoverflow.com/questions/', CAST(id as STRING)) as url, "
                                + "view_count "
                                + "FROM `bigquery-public-data.stackoverflow.posts_questions` "
                                + "WHERE tags like '%google-bigquery%' "
                                + "ORDER BY favorite_count DESC LIMIT 10")
                        // Use standard SQL syntax for queries.
                        // See: https://cloud.google.com/bigquery/sql-reference/
                        .setUseLegacySql(false)
                        .build();

        // Create a job ID so that we can safely retry.
        JobId jobId = JobId.of(UUID.randomUUID().toString());
        Job queryJob = bigquery.create(JobInfo.newBuilder(queryConfig).setJobId(jobId).build());

        // Wait for the query to complete.
        queryJob = queryJob.waitFor();

        // Check for errors
        if (queryJob == null) {
            throw new RuntimeException("Job no longer exists");
        } else if (queryJob.getStatus().getError() != null) {
            // You can also look at queryJob.getStatus().getExecutionErrors() for all
            // errors, not just the latest one.
            throw new RuntimeException(queryJob.getStatus().getError().toString());
        }

        QueryResponse response = bigquery.getQueryResults(jobId);

        TableResult result = queryJob.getQueryResults();

        // Print all pages of the results.
        for (FieldValueList row : result.iterateAll()) {
            String url = row.get("url").getStringValue();
            long viewCount = row.get("view_count").getLongValue();
            System.out.printf("url: %s views: %d%n", url, viewCount);
        }
    }
} 
```

> result:
> url:[什么是 Google 的 Dremel？它与 Mapreduce 有何不同？](https://stackoverflow.com/questions/6607552)视图：27736
> url：[无法从本地 App Engine 开发服务器访问 BigQuery](https://stackoverflow.com/questions/20349189)视图：4732
> url：[如何在 BigQuery 中使用 TABLE_QUERY() 函数？](https://stackoverflow.com/questions/22734777)视图：9674
> url​​：[从非分区表迁移到分区表](https://stackoverflow.com/questions/38993877)视图：3549
> url：[如何取消删除 BigQuery 表？](https://stackoverflow.com/questions/27537720)意见：3332
> 网址：[Google App Engine：在数据存储上使用 Big Query？](https://stackoverflow.com/questions/10966841)浏览次数：6928
> 网址：[Google BigQuery 中的随机抽样](https://stackoverflow.com/questions/23375456)浏览次数：11635
> 网址：[如何在应用程序引擎和 python 视图上使用 Bigquery 流式插入](https://stackoverflow.com/questions/22049248)：4279
> url：[从 BigQuery 表视图中删除重复行](https://stackoverflow.com/questions/36675521)：8552
> url：[如何提高 BigQuery 中 GeoIP 查询的性能？](https://stackoverflow.com/questions/19618105)浏览量：3213

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T06:12:59.787

我首先要确保您的时间使用 ntpd 同步，并且设置为您的正确时区： http: [//www.ntp.org/](http://www.ntp.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T22:44:16.830

几毫秒不应该影响它。

失败的最大可能性是您的请求时间是否在未来——Google 的服务器肯定会拒绝这些请求。

我同意 Michael 关于通过 NTP 同步的建议。

我们还可以考虑让我们的 OAuth 服务*稍微*宽松一些——但平衡安全性和可用性总是很困难

# c++ - 如何确定 void * 指针在运行时是指向 Objective-C 对象还是 C++ 对象

> ID：10560770
> 
> 赞同：3
> 
> 时间：2012-05-12T03:12:41.977
> 
> 标签：c++, objective-c, runtime, respondstoselector

我已经搜索了一段时间，但很惊讶没有人提出这个问题，所以我开始了：

我有一个带有 id 参数的 Objective-C 方法。现在我想用`respondsToSelector:`它来确定它是否对以下操作有效，如果不是，我有一个备份计划。（这不是`ASSERT(0)`：P）

所以，当有人试图搞砸我并通过 时`(id)someC++Object`，我当然会遇到很大的崩溃。

我的问题很简单：我可以让一个 C++ 对象`respondsToSelector:`安全地失败，以便我可以使用我的备份计划（将编码器打在脸上）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T03:58:08.467

简而言之，你不能。

至少，不可靠，也不以任何理智的方式。坦率地说，也不应该打扰；面对基于 C 的语言，这种级别的防御性编程完全是徒劳的。

至少，您需要：

*   验证指针是否指向可访问内存
*   指向当前分配
*   第一个地址大小的块指向一个 Objective-C 类（可能包括派生类）

一般来说，任何大量使用`isKindOfClass:`and的代码`respondsToSelector:`（在委托模式之外）都非常不符合 Objective-C 设计模式的规范。

或者，换一种说法，你有一个静态类型检查编译器，它非常擅长在编译时检查大量的有效性参数。用它。

# c - 通过 CreateProcess 启动时的 cl.exe 似乎没有写权限

> ID：10560779
> 
> 赞同：3
> 
> 时间：2012-05-12T03:16:08.030
> 
> 标签：c, permissions, createprocess, cl.exe

我正在调用 CreateProcess 来启动 cl.exe（Win7 64 位上的 VS2010）。我收到以下错误..

cl：命令行错误 D8037：无法创建临时 il 文件；清理旧 il 文件的临时目录

在 cmd 窗口中使用相同的环境变量调用相同的命令行成功。我检查了临时目录，没有旧文件。似乎创建的进程没有写权限。我一直在尝试不同的方法.. CreateProcessAsUser，设置安全属性以将所有标准权限授予Everyone用户组，有和没有继承句柄等。他们似乎都没有修复它。

这是基本代码...

```
SECURITY_ATTRIBUTES sa;
sa.nLength = sizeof( SECURITY_ATTRIBUTES );
sa.bInheritHandle = TRUE;
sa.lpSecurityDescriptor = NULL;

const char* _szSourceFile = "c:\\temp\\test\\src\\foo.cpp";

char szOptions[ 2048 ];
sprintf_s( szOptions, 
    "c:\\temp\\compile\\cl.exe "
    "/Gd "
    "/Fo\"c:\\temp\\test\\out\\\" "
    "/Fe\"c:\\temp\\test\\out\\\" "
    "/Fd\"c:\\temp\\test\\out\\\" "
    "/D \"WIN32\" "
    "/D \"_DEBUG\" "
    "/D \"_WINDOWS\" "
    "/D \"_USRDLL\" "
    "/D \"_WINDLL\" "
    "/D \"_MBCS\" "
    "/I\"c:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\Include\" "
    "/MDd "
    "/I\"c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\include\" "
    "/LDd "
    "%s "
    "c:\\temp\\test\\lib\\Uuid.Lib "
    "c:\\temp\\test\\lib\\oldnames.lib "
    "c:\\temp\\test\\lib\\msvcrtd.lib"
    , _szSourceFile );

STARTUPINFO si;
PROCESS_INFORMATION pi;
ZeroMemory( &si, sizeof( STARTUPINFO ) );
ZeroMemory( &pi, sizeof( PROCESS_INFORMATION ) );
si.cb = sizeof( STARTUPINFO );

BOOL bSucceeded = CreateProcess( "c:\\temp\\compile\\cl.exe", szOptions, NULL, NULL, FALSE, NORMAL_PRIORITY_CLASS, "PATH=c:\\temp\\Compile;%PATH%\0TEMP=c:\\temp\\test\\tmp\0\0", "c:\\temp\\test\\", &si, &pi ); 
```

如果您想知道奇怪的路径，我复制了最少的所需工具、库等，以直接从 cpp 文件构建 dll。代码中的命令使用环境变量块中设置的路径在常规命令行上运行。

另外，如果您想知道这是做什么用的，我正在尝试开发一个可以动态重新加载 dll 的应用程序。该应用程序用于调试/可视化，其想法是能够即时调整可视化代码并让应用程序重新加载 dll。

我已经在此进行了 4 天的谷歌搜索并尝试了不同的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T10:59:06.067

发现问题。

我使用进程监视器来监视 cl.exe 以查看失败的原因。进程监视器可以从[http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)下载。

原来它无法在 Windows 系统文件夹中加载 rsaenh.dll。cl.exe 无法解析 %SystemRoot% 环境变量。因为我覆盖了环境变量，所以它被重置了。**将 SystemRoot=c:\Windows 添加到环境变量中修复了它**。正确的解决方法是获取当前进程的环境变量，对其进行解析和修改以添加路径，然后将其传入。这样您就可以继承所有环境变量。

# matlab - 从 .fig 文件增加散点标记大小

> ID：10560780
> 
> 赞同：3
> 
> 时间：2012-05-12T03:16:32.627
> 
> 标签：matlab, resize, command, scatter-plot

我有一个图形文件（scatter.fig）。该图有许多使用 scatter() 的散点绘图仪。现在我只有这个无花果文件，我需要增加所有散点的标记大小。手动尝试过，但非常困难。有没有办法我可以做类似 H=figurehandle() s= points(h) set(s,'markersize');

我只是无法弄清楚确切的命令。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T11:45:56.310

您需要获取 scattergroup 对象的句柄才能更改标记属性。正如乔纳斯在评论中提出的那样，您可以通过以下方式轻松获得它

```
 % get handle to scattergroup object
   h = gco; 
```

由于分散组是轴的孩子，你也可以得到它

```
% get handle to scattergroup object
h = get(gca,'children'); 
```

如果图像包含多个图形对象（例如，附加的线条），则该命令`findall`可能会有所帮助（再次由 Jonas 提出）。使用此命令，您可以搜索具有特定属性的图形对象的句柄：

```
h = findall(gca,'marker','o') 
```

当您拥有 scattergroup 的句柄时，您可以通过以下方式更改标记的属性

```
% change size of markers 
set(h, 'sizedata', 50) 
```

要查看可以更改的 scattergroup 属性的完整列表，请使用

```
get(h) 
```

或用于显示属性的 GUI 使用

```
inspect(h) 
```

* * *

如果您只想编辑单个绘图（即不需要脚本），您可以通过单击工具栏上的鼠标按钮然后单击绘图中的一个标记来编辑实际图形（再次由 Jonas 建议）。然后右键单击标记，选择“属性”，然后按下“更多属性”按钮。在打开的 UI 中，您将条目“sizeData”更改为您选择的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T04:38:58.300

编辑：1 如果`X`和`Y`数据不可用

我试图找到 的句柄`markersize`，但我找不到。所以，我设计了另一种方法。如果我们有图形文件，那么我们可以直接从图形中获取`X`和`Y`数据，并使用`scatter`新的标记大小重新绘制图形。这是下面的代码。

```
clear all
X=rand(100,1);
Y=rand(100,1);
scatter(X,Y,10) 
saveas(gcf,'SO_scatterQ.fig')
clear all
close all
%%%%%% THE CODE ABOVE JUST GENERATES A SCATTER .fig FILE WITH BLACKBOX PROPERTIES %%%%%
openfig('SO_scatterQ.fig')
Xdata_retrieved = get(get(gca,'Children'),'XData');
Ydata_retrieved = get(get(gca,'Children'),'YData');
scatter(Xdata_retrieved,Ydata_retrieved,20) % You can use any other marker size you wish to use 
```

虽然，如果有人发布答案以直接获取该`markersize`物业的句柄，我将欢迎。

# haskell - 验证二叉搜索树 - Haskell 初学者

> ID：10560782
> 
> 赞同：2
> 
> 时间：2012-05-12T03:16:38.593
> 
> 标签：haskell, tree

所以本质上我想从一个节点开始，它必须大于左子树但小于右子树......等等。在我的工作表上，它说将其分成两个功能以使其更容易。使用“也许是”。（它无法将类型“也许 a”匹配到“a”，这完全阻止了我。

这就是我所拥有的，我看到了一个类似的问题，但无法真正理解它。提前致谢。

```
is_valid_binary_search_tree :: Ord a => BSTree a -> Bool
is_valid_binary_search_tree tree = case tree of 
    Null                               -> True
    Node element t1 t2
        | element > get_element t1 -> is_valid_binary_search_tree t1
        | element < get_element t2 -> is_valid_binary_search_tree t2
        | otherwise                -> False 

get_element :: BSTree a -> Maybe a
get_element tree = case tree of
    Null               -> Nothing
    Node element t1 t2 -> Just element 
```

如果我删除 Null -> Nothing，它可以编译，但会在 get_element 中显示详尽的模式。is_valid_binary_search_tree 也不会比较子树的右子树是否小于主节点。（这真的是我的大问题）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T04:07:54.880

您所描述的解决方案的问题在于，仅检查当前树元素是否大于左侧，分别小于右侧子元素是不够的*。*例如，以下不是有效的二叉树：

```
Node 3 (Node 1 (Node 0 Null Null) (Node 2 Null Null)) 
       (Node 10 (Node (-1) Null Null) (Node 12 Null Null)) 
```

实际上有一个简单的解决方案：按顺序遍历树（即将其转换为列表），然后检查列表是否升序：

```
inOrder Null = [] 
inOrder (Node a t1 t2) = inOrder t1 ++ [a] ++ inOrder t2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T11:54:08.710

我以彼得的回答为基础提供了一个可行的解决方案

```
inOrder :: Tree a -> [a]
inOrder Nil = []
inOrder (Node y l r) = inOrder l ++ [y] ++ inOrder r

isAscending :: [Int] -> Bool
isAscending [x] = True
isAscending (x:xs) = x <= head (xs) && isAscending xs

is_valid_binary_search_tree :: Tree Int -> Bool
is_valid_binary_search_tree = isAscending . inOrder 
```

# php - 用php增量分割字符串

> ID：10560783
> 
> 赞同：0
> 
> 时间：2012-05-12T03:16:55.280
> 
> 标签：php

我在 PHP 中有一个要拆分的字符串。此字符串是数据库中 ID 号的串联。

下面是一个字符串示例，但它可能很长，每个 ID 用“_”分隔：

ID_1_10_11_12

我想将字符串拆分为以下内容：

ID_1_10_11_12

ID_1_10_11

ID_1_10

ID_1

然后将它们连接成一个新的字符串，按顺序颠倒，然后用空格分隔：

新字符串 = “ID_1 ID_1_10 ID_1_10_11 ID_1_10_11_12”

我想不通。我试过用“_”将原始值分解成一个数组，但这只是让我留下了数字。

我将不胜感激有关如何处理此问题的任何建议。作为参考，这些 ID 写入复选框的类值，以便父值和子值可以分组，然后由 jquery 函数操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:42:02.360

可能不是最优雅的方式，如果少于 2 个 ID，它会中断，但这将返回您要求的字符串：

```
$str = "ID_1_10_11_12";

//creates an array with all elements
$arr = explode("_", $str);

$new_str = ' ID_' . $arr[1];
for ($i=2; $i<count($arr); $i++)
{
    $tmp =  explode(" ", $new_str);
    $new_str .= " " . $tmp[$i-1] . "_" . $arr[$i];
}
$new_str = trim($new_str);

echo $new_str; //echoes ID_1 ID_1_10 ID_1_10_11 ID_1_10_11_12 
```

我看不出它有多少可用性，但你去吧。

然后，您可以简单地`explode(" ", $new_str)`获得一个包含该字符串中所有元素的数组，您可以按照您想要的方式横向排列。

显然，您还可以`if (count($arr) < 3)`在 the 之前添加一个`for`以检查在 之后是否有少于 2 个数组元素，`ID`并退出打印`$new_str`没有空格的函数，`trim($new_str)`如果输入少于 2 个 ID 数组是一个问题。

**编辑：**修剪左边的空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:10:52.137

我的测试本地服务器已关闭以验证这一点，但我相信这会奏效。

```
<?php
/*

ID_1_10_11_12
ID_1_10_11
ID_1_10
ID_1

ID_1 ID_1_10 ID_1_10_11 ID_1_10_11_12

*/
$str = "ID_1_10_11_12";
$delim = "_";
$spacer = " ";
$ident = "ID";
$out = "";

// make an array of the IDs
$idList = explode($delim, $str);

// loop through the array
for($cur = 0; $cur >= count($idList); $cur++){
    // reset the holder
    $hold = $ident;

    // loop the number of times as the position beyond 0 we're at
    for($pos = -1; $pos > $cur; $pos++){

        // add the current id to the holder
        $hold .= $delim . $idList[$cur]; // "ID_1"
    }

    // add a spacer and the holder to the output if we aren't at the beginning,
    //      otherwise just add the holder
    $out .= ($cur != 0 ? $spacer . $hold : $hold); // "ID_1 ID_1_10"
}
// output the result
echo $out;

?> 
```

# twitter-bootstrap - 改变 Twitter bootstrap Nav-Pills 的颜色

> ID：10560786
> 
> 赞同：70
> 
> 时间：2012-05-12T03:17:00.717
> 
> 标签：twitter-bootstrap, nav, nav-pills

我正在尝试更改每个选项卡的活动颜色（单击后它仍然是 twitter 的浅蓝色）：

```
 <ul class="nav nav-pills">
   <li class="active"><a href="#tab1" data-toggle="tab">Overview</a></li>
   <li><a href="#tab2" data-toggle="tab">Sample</a></li>
   <li><a href="#tab3" data-toggle="tab">Sample</a></li>
 </ul> 
```

（如何）我可以在 CSS 中做到这一点吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-05-12T23:06:36.693

您可以`nav-pills`使用自定义颜色为您的活动链接向容器提供您自己的类，这样您就可以创建任意数量的颜色，而无需修改页面其他部分的引导程序默认颜色。试试这个：

**标记**

```
<ul class="nav nav-pills red">
    <li class="active"><a href="#tab1" data-toggle="tab">Overview</a></li>
    <li><a href="#tab2" data-toggle="tab">Sample</a></li>
    <li><a href="#tab3" data-toggle="tab">Sample</a></li>
</ul> 
```

这是您自定义颜色的 CSS：

```
.red .active a,
.red .active a:hover {
    background-color: red;
} 
```

此外，如果您更喜欢替换`.active`项目中的默认颜色，`nav-pills`您可以像这样修改原始颜色：

```
.nav-pills > .active > a, .nav-pills > .active > a:hover {
    background-color: red;
} 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-05-19T11:25:48.813

投票最多的解决方案对我不起作用。**（引导程序 3.0.0）**但是，这样做：

```
.nav-pills > li.active > a, .nav-pills > li.active > a:hover, .nav-pills > li.active > a:focus {
    color:black;
    background-color:#fcd900;
    } 
```

在页面`<style></style>`标签上包含这个很好地为每页服务

并将其混合在两种色调上会产生出色的效果，例如：

```
<style>
    .nav-pills > li.active > a, .nav-pills > li.active > a:focus {
        color: black;
        background-color: #fcd900;
    }

        .nav-pills > li.active > a:hover {
            background-color: #efcb00;
            color:black;
        }
</style> 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-04-18T00:20:28.887

对于 Bootstrap 4.0（在键入时为 alpha 版本），您应该在元素上指定`.active`类。`a`

对我来说，只有以下工作：

```
.nav-pills > li > a.active {
    background-color: #ff0000 !important;
} 
```

这`!important`也是必要的。

--

编辑：在`!important`CodeMantle 根据下面的评论之前添加空格

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-10-12T20:07:24.287

### Bootstrap 4.x 解决方案

```
.nav-pills .nav-link.active {
    background-color: #ff0000 !important;
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-12-27T22:59:24.280

这是特定于 Bootstrap 4.0 的。

**HTML**

```
<ul class="nav nav-pills">
  <li class="nav-item">
    <a class="nav-link nav-link-color" href="#about">home</a>
  </li>
  <li class="nav-item">
    <a class="nav-link nav-link-color"  href="#contact">contact</a>
  </li>
</ul> 
```

**CSS**

```
.nav-pills > li > a.active {
  background-color: #ffffff !important;
  color: #ffffff !important;
}

.nav-pills > li > a:hover {
  color: #ffffff !important;
}

.nav-link-color {
  color: #ffffff;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-30T12:52:38.243

我使用这个片段来更改同一 ul 中所有药丸的活动类（在文档准备好时应用）：

```
$('ul.nav.nav-pills li a').click(function() {           
    $(this).parent().addClass('active').siblings().removeClass('active');           
}); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-24T07:10:10.207

以下代码对我有用：-

```
.nav-pills .nav-link.active, .nav-pills .show>.nav-link {
    color: #fff;
    background-color: rgba(0,123,255,.5);
} 
```

注意：-这对我使用 Bootstrap 4 有效

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-04T23:53:14.247

如果您不想包含任何额外的 CSS，您可以在 nav-link 元素中使用按钮颜色类，它会像常规按钮一样格式化药丸。

```
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<ul class="nav nav-pills p-3">
    <li class="nav-item">
        <a class="nav-link active" href="#">Normal</a>
    </li>
    <li class="nav-item">
        <a class="nav-link active btn-primary" href="#">Primary</a>
    </li>
    <li class="nav-item">
        <a class="nav-link active btn-secondary" href="#">Secondary</a>
    </li>
    <li class="nav-item">
        <a class="nav-link active btn-success" href="#">Success</a>
    </li>
    <li class="nav-item">
        <a class="nav-link active btn-warning" href="#">Warning</a>
    </li>
    <li class="nav-item">
        <a class="nav-link active btn-danger" href="#">Danger</a>
    </li>

</ul>
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-06T14:58:09.413

用于更改所有按钮的 SCSS 选项...

```
// do something for each color
@each $color, $value in $theme-colors {

  // nav-link outline colors on the outer nav element
  .nav-outline-#{$color} .nav-link {
    @include button-outline-variant($value);
    margin: 2px 0;
  }

  // nav-link colors on the outer nav element
  .nav-#{$color} .nav-link {
    @include button-variant($value, $value);
    margin: 2px 0;
  }
} 
```

所以你最终会得到所有`.nav-primary`
类似于`.btn-primary`...的定义颜色

```
<div class="col-2 nav-secondary">
            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                <a class="nav-link" aria-expanded="true" aria-controls="addService" data-toggle="pill" href="#addService" role="tab" aria-selected="false">
                    Add Service
                </a>
                <a class="nav-link" aria-expanded="true" aria-controls="bonusPayment" data-toggle="pill" href="#bonusPayment" role="tab" aria-selected="false">
                    Bonus Payment
                </a>
                <a class="nav-link" aria-expanded="true" aria-controls="oneTimeInvoice" data-toggle="pill" href="#oneTimeInvoice" role="tab" aria-selected="false">
                    Invoice - One Time
                </a>
                <a class="nav-link active" aria-expanded="true" aria-controls="oneTimePayment" data-toggle="pill" href="#oneTimePayment" role="tab" aria-selected="true">
                    Payment - One Time
                </a>
            </div>
        </div> 
```

[![在此处输入图像描述](../Images/7891f2b5a21d64e56a4195b91d2e87f3.png)](https://i.stack.imgur.com/6pKOE.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-06-29T07:33:11.047

**在引导 5.0.x 上：**

```
<style>
    .nav-pills .nav-link.active, .nav-pills .show>.nav-link {
        color: #fff;
        background-color: #af2e89;
    }
</style> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-22T09:48:03.177

第 1 步：定义一个名为的类，该类`applycolor`可用于应用您选择的颜色。

第 2 步：定义当它悬停时会发生什么动作。如果您的表单背景是白色的，那么您必须确保在悬停时选项卡不会变成白色。要实现这一点，请使用该`!important`子句在悬停属性上强制执行此功能。我们这样做是为了覆盖 Bootstrap 的默认行为。

第 3 步：将类应用于您要定位的选项卡。

**CSS部分：**

```
<style>
    .nav-pills > li.active > a, .nav-pills > li.active > a:hover, .nav-pills > li.active > a:focus {
        color: #fff;
        background-color: #337ab7 !important;
    }

    .nav > li > a:hover, .nav > li > a:focus {
        text-decoration: none;
        background-color: none !important;
    }

    .applycolor {
        background-color: #efefef;
        text-decoration: none;
        color: #fff;
    }

    .applycolor:hover {
        background-color: #337ab7;
        text-decoration: none;
        color: #fff;
    }
</style> 
```

**标签部分：**

```
<section class="form-toolbar row">
    <div class="form-title col-sm-12" id="tabs">
        <ul class="nav nav-pills nav-justified">
            <li class="applycolor"><a data-toggle="pill" href="#instance" style="font-size: 1.8rem; font-weight: 800;">My Apps</a></li>
            <li class="active applycolor"><a data-toggle="pill" href="#application" style="font-size: 1.8rem; font-weight: 800;">Apps Collection</a></li>
        </ul>
    </div>
</section> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-19T09:53:00.907

这个问题的解决方案，往往会因情况而略有不同。解决它的一般方法是
1.）右键单击引导药丸并选择检查或检查元素，如果是 Firefox
2.）复制更改颜色的规则的 css 选择器
3.）在您的自定义 css 文件中修改它，例如所以...

```
.TheCssSelectorYouJustCopied{
    background-color: #ff0000!important;//or any other color
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-01T05:26:27.357

这在引导程序 4.4.1 中非常适合我！

```
.nav-pills > li > a.active{
  background-color:#46b3e6 !important;
  color:white !important;
}

  .nav-pills > li.active > a:hover {
  background-color:#46b3e6 !important;
  color:white !important;
        }

.nav-link-color {
  color: #46b3e6;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-21T13:44:38.650

这对我有用 Bootstrap v3.3.7 把它写在你的css文件中！

```
.nav > li > a:hover,
.nav > li > a:focus {
   text-decoration: none;
   background-color: #0d0d0d;
} 
```

# pdf - 在 Adob e PDF (Acrobat 9.0) 中删除页面时出现错误的参数错误

> ID：10560787
> 
> 赞同：2
> 
> 时间：2012-05-12T03:17:06.330
> 
> 标签：pdf, adobe, acrobat

在使用 Adob​​e Acrobat 9.0 创建的 Adob​​e PDF 文件中删除或添加页面时，我收到“错误参数”错误。这可以通过使用 Adob​​e PDF 打印机创建 PDF 的新 PDF 来解决，但这不是一个可行的解决方案，因为它会降低文档的质量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T19:19:41.783

Here is a possible solution that retains bookmarks (it worked for me).

(I'm using Acrobat 8)

1.  Use the "Combine Files" feature to combine the problem file with some other PDF (doesn't matter what the file is, though you might choose a small PDF that doesn't have this issue). I combined the files with the problem file first, followed by the additional PDF; I didn't want to chance messing up the bookmarks - but I don't know that the order matters.
2.  When done, save the resulting file.
3.  Open the saved file and you should be able to delete the added PDF pages, and for that matter, you should be able to add/delete/insert pages to the PDF.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T07:51:00.027

In the dialog that says 'bad parameter error' press control when clicking OK. This sometimes gives a more informative message.

The basic problem is that there is something wrong with the PDF file, Acrobat doesn't bother to tell you about this normally, but instead silently ignores the error. Acrobat does this a *lot* and is a major reason why there are a lot of technically invalid PDF files around 'it must be OK because Acrobat can read it'....

By 'refrying' the PDF (printing the content to a new PDF file) you are getting rid of a lot of elements of the PDF and since you are only printing what Acrobat displayd, the resulting PDF file will be fine.

However its not possible to tell you what's wrong with the PDF file without seeing it. You *could* try using another tool to manipulate the PDF file, it might fix it in the process. For example ou could use GhostScript to convert the PDF to PDF, the default settigns should work well.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T03:26:12.883

我遇到了同样的问题，以下解决方案对我有用。

*   点击文件然后打印
*   将其另存为 Adob​​e PDF
*   关闭并重新打开新保存的文件。
*   现在尝试删除页面。

它对我有用。

# ruby-on-rails - 在 Rails 中，如何将 id 从视图传递到控制器

> ID：10560793
> 
> 赞同：0
> 
> 时间：2012-05-12T03:18:36.983
> 
> 标签：ruby-on-rails, ruby

我想将 id 从视图传递给控制器​​。我知道如何通过为它分配一个名称来传递它，例如：`:eid => @model["_id"]`。然后我可以使用`params[:"_id"]`.

但随后 url 将是`/create?:eid="1234"`. 但我想要这个：`create/1234`。那我该怎么做

1.  在视图中
2.  如何在控制器中获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T03:58:52.923

这将需要一个[自定义路线](http://guides.rubyonrails.org/routing.html)，例如：

```
post "/create/:eid" => "my_controller#my_action" 
```

也就是说，将路由参数添加到创建操作是不寻常的。典型的方法只是向提交操作的表单添加隐藏输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T03:59:17.747

您应该花一些时间了解路线。您需要定义一条路线来做您想做的事情。

在你的`config/routes.rb`

```
match '/create/:eid' => 'underscored_name_of_controller_here#create', :as => :create 
```

那么，在你看来：

```
create_path(:eid => @model["_id"]) 
```

我还建议您的路线路径可能应该更具描述性，`/create/:_id`但本着回答您的问题的精神，我将其保留下来。

# php - 遍历循环时，在循环内访问 MySQL 的效率更高/更低？

> ID：10560795
> 
> 赞同：1
> 
> 时间：2012-05-12T03:18:46.083
> 
> 标签：php, mysql, loops, web-scraping

我正在编写一个 PHP 脚本来从网络上抓取数据。最终结果，我希望将所有抓取的数据很好地保存在 mysql 数据库中并格式化。

但是由于在 PHP 脚本中有多个循环和数组要遍历，我的直觉是，为了速度和效率，最好不要保持循环访问 mysql 数据库（在每次复飞时插入数据）循环） - 相反，将数据存储在 PHP 中的临时数组中，然后仅在脚本结束时，一次将数组转储到 mysql 中。

你说什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T03:24:47.403

您可以使用 Insert into values("1","2","3"),("3","5,"5")

在 foreach 中，您可以创建一个值数组，并且在 forloop 之外，您可以内爆并插入到 mysql 中。

可以说，

```
$values = array();
foreach($yourData as $eachData){

// prepare your values here.
$values[] = "('1','2',3')";

}

// out of forloop,
$values = implode(",",$values); 

$query = " insert into `tablename` (field1,field2,field2) values {$values} " ; 
```

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T03:42:30.980

是的，当涉及到查询数量时，通常是最小的是高性能的。但是，您的脚本受限于网络 io（下载速度），而不是数据库。在操作系统下载数据时，您的脚本大部分时间都处于休眠状态。因此，您发出的任何查询都相对不常见。

我的建议是让它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T03:50:04.037

如前所述，您可以使用一个查询插入多行，这比对每一行使用单独的查询优化得多。您可以使用循环向查询字符串添加更多行，但最重要的是，请记住转义数据！

```
<?php    
$rows = array();
$sql = '
    INSERT INTO `table` (`key`, `data`)
    VALUES ';

$data = array(
    array(
        'key' => 'key1',
        'value' => 'some value'
    ),
    array(
        'key' => 'key2',
        'value' => 'some value 2'
    ),
    array(
        'key' => 'key3',
        'value' => 'some value 3'
    ),
);

for ($i = 0; $i < count($data); ++$i)
{
    // Do me a favor and look up PDO.
    $key = mysql_escape_string($data[$i]['key']);
    $row = mysql_escape_string($data[$i]['value']);

    if ($i === 0)
        $sql .= ' (\'' . $key . '\', \'' . $row . '\')';
    else
        $sql .= ', (\'' . $key . '\', \'' . $row . '\')';
} 
```

# android - Android NDK 两个Activity 使用相同的JNI 函数

> ID：10560797
> 
> 赞同：2
> 
> 时间：2012-05-12T03:19:04.327
> 
> 标签：android, java-native-interface

我是 JNI 的新手。

我有两个（或更多）活动想要使用相同的 JNI 函数。
目前我必须定义两个都调用另一个函数的 JNI 函数，
例如

```
int foo() { return 1; }

int Java_my_pkg_activity1_foo1(JNIEnv *env, jobject thiz) {
    return foo();
}

int Java_my_pkg_activity2_foo2(JNIEnv *env, jobject thiz) {
    return foo();
} 
```

有没有更方便的方法来定义一个可以被多个Activity调用的JNI函数，这样我就不必为每个Activity定义Java_my_pkg_activityX_foo2()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:52:40.530

在 Java 层定义一个公共类怎么样？如果您不想实例化新类，该方法甚至可以是静态的。

# c# - 使用 C# 的 XNA 中的 NullReferenceException

> ID：10560800
> 
> 赞同：1
> 
> 时间：2012-05-12T03:19:45.223
> 
> 标签：c#, xna, 3d

我正在尝试使用 XNA 和 C# 为 windows 制作一个简单的 3D 游戏。正如每个教程甚至 MSDN 所建议的那样，我试图创建视图矩阵，但我收到了 NullReferenceException 错误。

错误内容为：对象引用未设置为对象的实例。它指向投影矩阵的定义：

```
projectionMatrix = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, device.Viewport.AspectRatio, 1.0f, 300.0f); 
```

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Series3D1
{
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        Effect effect;

        VertexPositionColor[] vertices;

        Matrix viewMatrix;
        Matrix projectionMatrix;

        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        GraphicsDevice device;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        protected override void Initialize()
        {
            graphics.PreferredBackBufferWidth = 500;
            graphics.PreferredBackBufferHeight = 500;
            graphics.IsFullScreen = false;
            graphics.ApplyChanges();

            Window.Title = "Riemer's XNA Tutorials -- Series 1";

            base.Initialize();
        }

        protected override void LoadContent()
        {
            spriteBatch = new SpriteBatch(GraphicsDevice);

            SetUpCamera();

            effect = Content.Load<Effect>("effects");

            SetUpVerticies();

            device = graphics.GraphicsDevice;
        }

        protected override void UnloadContent()
        {

        }

        protected override void Update(GameTime gameTime)
        {
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            base.Update(gameTime);
        }

        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            effect.CurrentTechnique = effect.Techniques["ColoredNoShading"];

            effect.Parameters["xView"].SetValue(viewMatrix);
            effect.Parameters["xProjection"].SetValue(projectionMatrix);
            effect.Parameters["xWorld"].SetValue(Matrix.Identity);

            foreach (EffectPass pass in effect.CurrentTechnique.Passes)
            {
                pass.Apply();
            }

            device.DrawUserPrimitives(PrimitiveType.TriangleList, vertices, 0, 1, VertexPositionColor.VertexDeclaration);

            base.Draw(gameTime);
        }

        private void SetUpVerticies()
        {
            vertices = new VertexPositionColor[3];

            vertices[0].Position = new Vector3(0f, 0f, 0f);
            vertices[0].Color = Color.Red;
            vertices[1].Position = new Vector3(10f, 10f, 0f);
            vertices[1].Color = Color.Green;
            vertices[2].Position = new Vector3(10f, 0f, -5f);
            vertices[2].Color = Color.Yellow;
        }

        private void SetUpCamera()
        {
            viewMatrix = Matrix.CreateLookAt(new Vector3(0, 0, 50), new Vector3(0, 0, 0), new Vector3(0, 1, 0));
            projectionMatrix = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, device.Viewport.AspectRatio, 1.0f, 300.0f);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T03:27:10.303

您需要`device = graphics.GraphicsDevice`在调用之前设置您的`SetUpCamera()`。该`SetUpCamera`方法要求该`device`字段已经被分配，它没有按照您当前的顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T03:28:24.633

```
protected override void LoadContent()
{
    spriteBatch = new SpriteBatch(GraphicsDevice);

    SetUpCamera();

    effect = Content.Load<Effect>("effects");

    SetUpVerticies();

    device = graphics.GraphicsDevice;
} 
```

必须

```
protected override void LoadContent()
{
    device = graphics.GraphicsDevice;

    spriteBatch = new SpriteBatch(GraphicsDevice);

    SetUpCamera();

    effect = Content.Load<Effect>("effects");

    SetUpVerticies();
} 
```

这样`device`就设置好了（这是 和 所要求的`SetUpCamera`）`SetUpVerticies`。

**调试提示：**检查当地人以验证您的假设，您会看到`device`is `null`. 您也可以通过将变量悬停在您的行中来做到这一点...

# email - 邮件服务器如何确定收件人的电子邮件地址

> ID：10560803
> 
> 赞同：0
> 
> 时间：2012-05-12T03:20:41.837
> 
> 标签：email, smtp

我有一个电子邮件地址：support@mycompany.com。

我在 Google 应用和其他邮件服务提供商中注册了这封电子邮件。现在有两个地方可以接收发送到 support@mycompany.com 的邮件

邮件服务器如何确定发送到哪个地方？

也许这取决于邮件服务器查找地址的方式？

如果我使用 gmail 发送到 support@mycompany.com，Google 应用会收到这封电子邮件。

如果我使用网络表单（如我公司网站上的“联系我们”链接），另一个邮箱将收到这封电子邮件。

谁能告诉我为什么？也许邮件服务器有自己的序列来查找其他邮件服务器中的收件人？一旦他们发现一台服务器接受了这个收件人的地址，它就会发送出去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:26:29.620

在你的 DNS 设置中，你有一个叫做 MX 记录的东西，它告诉你的邮件应该去哪里。

您的域名和虚拟主机之间似乎存在 DNS 问题。您的域名（在 namecheap 之类的地方）有一个 DNS，而您的网站也有一个单独的 DNS。您网站主机的 DNS 未配置为您的 Google Apps 主域上的相同 MX 记录。

只需打开两个 DNS 设置并将 google 设置复制到另一个。

看看这个[http://support.google.com/a/bin/answer.py?hl=en&answer=174125](http://support.google.com/a/bin/answer.py?hl=en&answer=174125)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T03:28:45.670

所以这与DNS有关。DNS 是一种系统，它允许将诸如 support@mycompany.com 之类的文本名称转换为 IP 地址，从而将您的邮件路由到正确的目的地。对于电子邮件，dns 系统使用 MX 记录。

在您的特定情况下，当您通过 GMAIL 发送电子邮件时，他们的服务器首先在其本地 DNS 服务器上进行 DNS 查找。在这些 DNS 服务器上，谷歌应用程序具有权限，因此它们将消息路由到那里。但是，如果您从非 google 站点发送电子邮件，则根据 IANA 规则拥有权限的任何人都会为您提供 IP 地址以将邮件邮寄到。在这种情况下，它是您的其他邮件服务器。

这里还有一些读物：

1.  [http://en.wikipedia.org/wiki/MX_record](http://en.wikipedia.org/wiki/MX_record)
2.  [http://en.wikipedia.org/wiki/Domain_Name_System](http://en.wikipedia.org/wiki/Domain_Name_System)

最好在 google/您的其他邮件服务器上修改您的 mx 记录，以便该电子邮件地址只有一个权限。

# ruby-on-rails - 使用 Nokogiri 保留换行符

> ID：10560805
> 
> 赞同：3
> 
> 时间：2012-05-12T03:22:05.173
> 
> 标签：ruby-on-rails, ruby, nokogiri

我在 Rails 3 应用程序中使用 Nokogiri。它忽略

```
<br/> 
```

标签。我想用“，”替换这些标签，因为它们代表地址中的换行符。我该怎么做呢？我尝试了以下方法，但似乎没有帮助：

```
 doc.inner_html.gsub!("<br/>", ", ") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T17:10:28.430

简单地：

```
doc.css('br').each{ |br| br.replace ", " } 
```

在行动中看到：

```
require 'nokogiri'
doc = Nokogiri.HTML('<address>900 Magnolia Road<br/>Nederland, CO<br/>80466</address>')
puts doc.root
#=> <html><body><address>900 Magnolia Road<br>Nederland, CO<br>80466</address></body></html>

doc.css('br').each{ |br| br.replace ", " }
puts doc.root
#=> <html><body><address>900 Magnolia Road, Nederland, CO, 80466</address></body></html> 
```

如果您想更加小心并且只替换标签`<br>`内部`<address>`（例如），那么：

```
doc.css('address > br').each{ |br| br.replace ", " } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:46:41.950

像这样设置内容：

```
doc.inner_html = doc.inner_html.gsub("<br/>", ", ")  # using non-bang version 
```

# html - 在 Web 浏览器中显示办公文档，但不允许下载

> ID：10560806
> 
> 赞同：0
> 
> 时间：2012-05-12T03:22:39.007
> 
> 标签：html

我想在我的网络浏览器中显示 word 文档而不让它被下载我尝试使用 iframe 但它只显示 pdf 文件但不显示 office 文档需要帮助来解决这个问题.. 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:31:14.027

您必须将办公文档呈现为 html。如果您的文档是office open xml。比你可以提取它并读取里面的 xml 数据文件然后渲染它们。

最简单的方法是使用`Google Docs`在您的网站上打开文档

供参考。在 iframe 上打开 pdf 实际上是下载它，然后让浏览器上的插件显示它。因此，用户仍然可以下载您的 pdf。

# macos - 为什么 macdeployqt 给出错误“无法打开输入文件”？

> ID：10560811
> 
> 赞同：1
> 
> 时间：2012-05-12T03:23:51.630
> 
> 标签：macos, qt

当我`macdeployqt`在我的 .app 上运行时，它会添加库，但是当您尝试启动它时会使应用程序崩溃。这在 Mac OS X 10.7 上运行良好，但在 Mac OS X 10.8 DP3 上没有任何乐趣。要安装我使用过的 Qt `port install qt4-mac`（但是，我的 10.7 机器上可能有来自 Qt 网站的更旧版本的 Qt）。

命令：`macdeployqt bin/Synergy.app -verbose=3`

启动日志：[http ://pastebin.com/i37vadB7](http://pastebin.com/i37vadB7)

```
Log: Using install_name_tool: 
Log:  in "bin/Synergy.app/Contents/Frameworks//libcrypto.1.0.0.dylib" 
Log:  change reference "/opt/local/lib/libz.1.dylib" 
Log:  to "@executable_path/../Frameworks/libz.1.dylib" 
ERROR: "install_name_tool: can't open input file: bin/Synergy.app/Contents/Frameworks//libcrypto.1.0.0.dylib for writing (Permission denied)
install_name_tool: can't lseek to offset: 0 in file: bin/Synergy.app/Contents/Frameworks//libcrypto.1.0.0.dylib for writing (Bad file descriptor)
install_name_tool: can't write new headers in file: bin/Synergy.app/Contents/Frameworks//libcrypto.1.0.0.dylib (Bad file descriptor)
install_name_tool: can't close written on input file: bin/Synergy.app/Contents/Frameworks//libcrypto.1.0.0.dylib (Bad file descriptor)
" 
ERROR: "" 
Log: 
Log: Deploying plugins from "/opt/local/plugins" 
Log: Created configuration file: "bin/Synergy.app/Contents/Resources/qt.conf" 
Log: This file sets the plugin search path to "bin/Synergy.app/Contents/PlugIns" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T10:42:26.967

从您的错误消息看来，您使用的 libcrypto 似乎链接到本地​​文件系统上的 libz。您需要做的是确保在您的包的 Frameworks 目录中有 libz 的副本，然后使用它`install_name_tool`来更改包中版本的路径。

```
install_name_tool -change /opt/local/lib/libz.1.dylib @executable_path/../Frameworks/libz.1.dylib bin/Synergy.app/Contents/Frameworks//libcrypto.1.0.0.dylib 
```

如果您的二进制文件链接到缺少的库，通常会导致崩溃。

更改 Qt 的最后几个版本时存在一些问题，`macdeployqt`因此您必须检查链接路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:02:43.750

通过降级到我一直闲逛的旧 Qt SDK .dmg (qt-sdk-mac-opensource-2010.03.dmg) 来解决。我还跑去`sudo port uninstall qt4-mac`删除了新的 SDK。

所以看起来最新版本的 Qt 有一个损坏的`macdeployqt`应用程序。

所以这是我现在拥有的 Qt 版本，它可以工作：

```
$ qmake -version
QMake version 2.01a
Using Qt version 4.6.3 in /Library/Frameworks 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-26T07:16:04.540

我认为 macdeployqt 中存在特权问题。我通过使用 sudo 解决了：

```
sudo -s -- 'macdeployqt myapp.app; chown -R $(USER) myapp.app' 
```

# objective-c - CAGradientLayer 作为 UIView 的 layerClass

> ID：10560815
> 
> 赞同：2
> 
> 时间：2012-05-12T03:24:53.253
> 
> 标签：objective-c, ios, cocoa, calayer

我试图通过覆盖 UIView 的 layerClass 类方法将 CAGradientLayer 用作 UIView 子类的根层。我为 UIButton 子类做了完全相同的事情，并且一切正常，但是对于 UIView，我没有看到渐变，我只看到默认的白色视图背景。

这是我的代码：

```
#import <UIKit/UIKit.h>
#import "UIView+NBStyle.h"

@interface NBStylizedView : UIView

@property (nonatomic, strong) UIColor* highColor;
@property (nonatomic, strong) UIColor* lowColor;

@end

...

#import "NBStylizedView.h"
#import <QuartzCore/QuartzCore.h>

@implementation NBStylizedView

@synthesize highColor;
@synthesize lowColor;

+ (Class) layerClass {
    return [CAGradientLayer class];
}

- (void)drawRect:(CGRect)rect {
    if (self.highColor && self.lowColor) {
        CAGradientLayer* gLayer = (CAGradientLayer*) self.layer;
        [gLayer setColors:
         [NSArray arrayWithObjects:
          (id)[self.highColor CGColor], 
          (id)[self.lowColor CGColor], nil]];
    }   
    [super drawRect:rect];
}

- (void)setHighColor:(UIColor*)color {
    highColor = color;
    [self.layer setNeedsDisplay];
}

- (void)setLowColor:(UIColor*)color {
    lowColor = color;
    [self.layer setNeedsDisplay];
}

@end 
```

任何人都可以阐明我的问题所在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T06:55:25.150

我试过你的代码，一开始也没有看到渐变。如果我在视图的 awakeFromNib 方法中将视图的背景颜色设置为 clearColor，它就起作用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T03:02:23.257

因为视图默认的 opaque 是 YES，这意味着视图必须在绘制内容之前绘制背景。如果你设置 customView.opaque = NO; 在视图启动后。至于 Button，默认 opaque 是 No，你可以在 IB 中看到 Clears Graphics Context 是 YES。

# actionscript-3 - Actionscript 3 按钮正在使用以前的代码

> ID：10560816
> 
> 赞同：0
> 
> 时间：2012-05-12T03:25:19.947
> 
> 标签：actionscript-3, flash-cs5

我有这个滑块的一个按钮。滑块有三个部分。

第 24 帧加载了第一个帧。它被标记为“frame1”。有一个带有以下代码的按钮。rightButton_1.addEventListener(MouseEvent.CLICK, bj_goRightTo2);

```
function bj_goRightTo2(event:MouseEvent):void
{
gotoAndPlay('1goesTo2');
} 
```

第 25 帧开始第一帧和第二帧之间的过渡。它被标记为“1goesTo2”。

第 64 帧是加载的第二个帧。它被标记为“frame2”再次有一个按钮，下一组带有 gotoAndPlay('2goesTo3')

第 104 帧是加载的第三帧。它被标记为“frame3” 再次有一个带有 gotoAndPlay('3goesTo1') 的按钮。

但是在 3goesTo1 的末尾是 gotoAndStop('frame1')。

在'frame1'，代码告诉按钮 gotoAndPlay('1goesTo2') 但它实际上只执行最后一个 gotoAndPlay('3goesTo1');

我怎样才能让这个按钮刷新它的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:12:20.057

我不会尝试更改时间线中的事件处理程序。相反，我会在父剪辑中添加一个事件处理程序，并在按钮接收到鼠标单击事件时检查当前标签。

# iphone - 自动扩展 UIView 和 CGPath 以适应核心文本

> ID：10560818
> 
> 赞同：0
> 
> 时间：2012-05-12T03:25:29.493
> 
> 标签：iphone, ios, uiview, core-text, cgpath

我一直在寻找这个问题的答案，虽然这个话题有很多，但似乎没有什么能回答这个问题，至少对我来说不是。

我在情节提要中有一个固定大小的自定义 UIView（在原型单元中）。我为它继承了 UIView 并重写了 drawRect 方法。它基本上把一个格式化的字符串放在一起，然后我像这样绘制它：

```
// now for the actual drawing
CGContextRef context = UIGraphicsGetCurrentContext();

CGContextSetShadowWithColor(context, 
                            CGSizeMake(0, 1), 
                            0,  
                            [UIColor whiteColor].CGColor);

CGMutablePathRef path = CGPathCreateMutable(); //1
CGPathAddRect(path, NULL, self.bounds );

// flip the coordinate system
CGContextSetTextMatrix(context, CGAffineTransformIdentity);
CGContextTranslateCTM(context, 0, self.bounds.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

CTFramesetterRef framesetter =
CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)stringToDraw); //3

CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), path, NULL);

CTFrameDraw(frame, context); //4 
```

这很好并且有效，如果我将默认大小设置得足够大，它将处理多行文本。

CGPath 使用所有 UIView，这很好/想要的。

我想保持 CGPath 的宽度固定，但我希望高度扩展以容纳基本上无限量的文本，现在它只是被切断（由于路径/视图不够大以包含它）

我试过玩 CTFramesetterSuggestFrameSizeWithConstraints 无济于事。有人可以帮我开发一些可以实现我需要做的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:57:46.883

知道要绘制的字符串和要使用的字体，您总是可以从中获取边界

```
CGSize boundingSize = CGSizeMake(self.bounds.size.width, CGFLOAT_MAX);
CGSize requiredSize = [yourText sizeWithFont:yourFont
                           constrainedToSize:boundingSize
                               lineBreakMode:UILineBreakModeWordWrap];
CGFloat requiredHeight = requiredSize.height; 
```

你在那里得到了高度，并且可以在其他地方重复使用它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T19:40:15.350

这是您要尝试做的事情，请注意，这使用 CoreText API 并将返回正确的高度，这与错误的 sizeWithFont 答案不同。

```
// Measure the height required to display the attr string given a known width.
// This logic returns a height without an upper bound. Not thread safe!

- (NSUInteger) measureHeightForWidth:(NSUInteger)width
{
  NSAssert(self.isDoneAppendingText == TRUE, @"isDoneAppendingText");

  NSAssert(self.attrString, @"attrString");

  CFMutableAttributedStringRef attrString = self.attrString;
  CFRange stringRange = self.stringRange;

  CGFloat measuredHeight = 1.0f;

  // Create the framesetter with the attributed string.

  CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(attrString);

  if (framesetter) {
    CFRange fitRange;
    CGSize constraints = CGSizeMake(width, CGFLOAT_MAX); // width, height : CGFLOAT_MAX indicates unconstrained

    CGSize fontMeasureFrameSize = CTFramesetterSuggestFrameSizeWithConstraints(framesetter, stringRange, (CFDictionaryRef)NULL, constraints, &fitRange);

    // Note that fitRange is ignored here, we only care about the measured height

    measuredHeight = fontMeasureFrameSize.height;

    CFRelease(framesetter);
  }

  return (NSUInteger) ceil(measuredHeight);
} 
```

# shell - $(brickval_VALASOURCES:.vala=.h) 做什么？

> ID：10560822
> 
> 赞同：0
> 
> 时间：2012-05-12T03:26:34.353
> 
> 标签：shell, makefile, autoconf, automake

我在自动制作脚本中找到了以下行

```
brickval_SOURCES = \
    $(brickval_VALASOURCES:.vala=.c) \
    $(brickval_VALASOURCES:.vala=.h) 
```

整件事都[在这里](http://live.gnome.org/Vala/GameDevelopmentSeries/Setup)

我实际上对它的作用有一个很好的猜测，扩展brickval_VALASOURCES 然后用.c 替换.vala，但是由于以前的经验，我想在某种手册中实际阅读它的确切作用。我查看了 autoconf、automake 和 shell 手册，但一无所获。我也尝试过谷歌搜索，但很难想出一个好的搜索词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:32:18.493

试试 GNU make 的手册或其他`make`手册。automake 程序只是为构建机器上安装的任何 make 添加功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:31:40.647

这是任何兼容 POSIX 的`make`实现中都可用的功能，并且由 Automake 支持。[您可以在 POSIX 规范](http://pubs.opengroup.org/onlinepubs/009695399/utilities/make.html#tag_04_84_13_04)（搜索`subst1`）中了解它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T10:47:37.713

有关功能的完整描述，请参见名为 Substitution References 的 GNU Make 手册中的第 6.3.1 节。

# ruby-on-rails - 从视图中抛出关于当前未访问模型属性的 SQL 异常

> ID：10560825
> 
> 赞同：0
> 
> 时间：2012-05-12T03:27:26.077
> 
> 标签：ruby-on-rails, activerecord

在我看来，我遇到了以下异常，storys/_form.slim。该异常似乎很奇怪，因为它抱怨我不想访问的属性：

```
SQLite3::SQLException: no such column: constraints.sentence_id: SELECT  "constraints".* FROM "constraints"  WHERE "constraints"."sentence_id" = 1 LIMIT 1 
```

违规行是 stories/_form.slim 中的第二行：

```
...

= form_tag("/stories/#{@story.id}", :method => "put") do
  = label_tag "Type the next line in the story. You must use the word '#{@story.curr_sentence.constraint.phrase}'."

... 
```

模型/story.rb：

```
class Story < ActiveRecord::Base
  has_many :sentences, :dependent => :destroy
  accepts_nested_attributes_for :sentences, :allow_destroy => true

  def curr_sentence
    self.sentences.find_by_turn(self.turn)
  end

  ...
end 
```

模型/句子.rb：

```
class Sentence < ActiveRecord::Base
  belongs_to :story
  has_one :constraint
  accepts_nested_attributes_for :constraint
end 
```

模型/约束.rb：

```
class Constraint < ActiveRecord::Base
  has_many :sentences
end 
```

分贝/schema.rb：

```
 create_table "stories", :force => true do |t|
    t.integer  "turn",       :default => 1
    t.datetime "created_at",                :null => false
    t.datetime "updated_at",                :null => false
  end

  create_table "sentences", :force => true do |t|
    t.integer  "constraint_id"
    t.integer  "story_id"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
  end

  create_table "constraints", :force => true do |t|
    t.string   "phrase"
    t.integer  "constraint_category_id", :limit => 255
    t.datetime "created_at",                            :null => false
    t.datetime "updated_at",                            :null => false
  end 
```

有任何想法吗？一直在撕扯我的耳朵，试图弄清楚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T03:32:56.427

句子和约束之间的关联是错误的。您应该只[`has_one`](http://guides.rubyonrails.org/association_basics.html#the-has_one-association)在 1:1 的关系中使用。这是一个一对多的关系，所以你应该使用`belongs_to`：

```
class Sentence < ActiveRecord::Base
  belongs_to :story
  belongs_to :constraint
  accepts_nested_attributes_for :constraint
end 
```

# xcode - rand() 似乎没有那么随机

> ID：10560828
> 
> 赞同：3
> 
> 时间：2012-05-12T03:27:41.893
> 
> 标签：xcode, ios4, xcode4, xcode4.2

这是我创建int的方式：

```
int randNumber = rand() % 4;
NSLog(@"%d", randNumber); 
```

但是，每次我启动应用程序时，数字都是一样的，无论如何。

我创建了一个按钮并向其附加了一个重新初始化随机数并将新数字记录下来的操作，然后它生成一个随机数，但是在应用程序启动时随机数总是相同的（我已经启动了 20次）。

知道为什么在应用程序启动时随机数总是相同的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-12T03:33:16.507

尝试使用`arc4random()`，它不需要种子

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T03:28:55.930

每次运行程序时都需要指定不同的种子。给定一个种子，随机数生成器生成一组数字。相同的种子将产生相同的一组数字。要获得不同的集合，您需要不同的种子。

看看这个以获得一些指导：[Generating random numbers in Objective-C](https://stackoverflow.com/questions/160890/generating-random-numbers-in-objective-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T03:33:37.100

rand() 是一个伪随机数生成器。它使用种子并为每个种子生成精确的序列。

如果您在程序开始时执行此操作

```
srand(time(NULL)); 
```

将起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T03:33:28.053

你必须调用 srand(unsigned int seed); 播种 rand 函数。如果您不调用 srand ，它将每次播种 1 。

# python - Python浮点相等怪异

> ID：10560832
> 
> 赞同：0
> 
> 时间：2012-05-12T03:28:37.660
> 
> 标签：python, floating-point, equality

今晚看到 Python 出现了一些意想不到的行为。为什么以下打印出“不等于”？！

```
num = 1.00
num -= .95
nickel = .05

if nickel != num:
    print 'not equal'
else:
    print 'equal' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T03:32:00.643

[每个计算机科学家都应该了解浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

```
>>> num = 1.00
>>> num
1.0
>>> num -= 0.95
>>> num
0.050000000000000044
>>> nickel = .05
>>> nickel
0.05 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T03:32:23.860

您可能会发现[decimal](http://docs.python.org/library/decimal.html)模块很有用。

```
>>> TWOPLACES = Decimal(10) ** -2
>>> Decimal(1).quantize(TWOPLACES)-Decimal(0.95).quantize(TWOPLACES) == Decimal(0.05).quantize(TWOPLACES)
True 
```

或者，或者：

```
import decimal
decimal.getcontext().prec = 2
decimal.Decimal(1.00) - decimal.Decimal(0.95) 
```

我从您对变量的命名推断出`nickel`您正在考虑金钱。显然，浮点是错误的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T03:33:45.933

这是计算机常见的浮点问题。它与计算机如何存储浮点数有关。我建议快速阅读一下[每个计算机科学家应该了解的关于浮点运算的知识。](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

# mongodb - MongoDB 的“丢失数据”批评在多大程度上仍然有效？

> ID：10560834
> 
> 赞同：69
> 
> 时间：2012-05-12T03:28:48.863
> 
> 标签：mongodb

MongoDB 的“丢失数据”批评在多大程度上仍然有效？[我指的是以下内容](http://pastebin.com/raw.php?i=FD3xe6Jt)：

> ***1\. MongoDB默认*以不安全的方式发出写入以赢得基准测试**
> 
> 如果您不发出 getLastError()，MongoDB 不会等待来自数据库的任何确认该命令已处理。这至少引入了两类问题：
> 
> *   在并发环境（连接池等）中，您可能会在写入“完成”后出现后续读取失败；没有障碍条件可以知道数据库将在什么时候识别写入承诺
> *   由于在各个地方排队，TCP 缓冲区中未完成的事情等，任何未知数量的保存操作都可能被丢弃在地板上，当您的 db 连接丢失被 KILL'd 或 segfault，硬件崩溃时，您可以命名它
> 
> **2\. MongoDB 会以许多令人吃惊的方式丢失数据**
> 
> 以下是我们亲身经历的记录丢失的方式列表：
> 
> 1.  他们只是有时消失了。原因不明。
> 2.  损坏数据库的恢复不成功，预事务日志。
> 3.  master 和 slave 之间的复制在 oplogs 中有*间隙*，导致 slave 丢失 master 拥有的记录。是的，没有校验和，是的，复制状态有从属当前
> 4.  复制有时会停止，没有错误。监控您的复制状态！
> 
> ...[其他批评]

如果仍然有效，这些批评在某种程度上会令人担忧。文章主要参考 v1.6 和 v1.8，但此后 v2 已经发布。文章中讨论的缺点在当前版本中是否仍然突出？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-14T11:33:53.913

**上下文注意事项：**

这个问题是在 2012 年提出的，但直到今天仍然看到流量和投票。最初的答案是专门驳斥在问题发生时流行的特定帖子。自从写下这个答案以来，事情已经发生了巨大的变化（并且还在继续变化）。与 2012 年相比，MongoDB 无疑变得更加耐用和可靠，即使是像基本日志这样的东西也相对较新。我对这个答案投了反对票和评论，因为人们觉得我没有解决名义问题（不是细节）的当前（对于当前的给定值）一般答案：“丢失的数据批评仍然有效吗？”。我试图在下面的更新中澄清，但这个问题基本上没有完美的答案，这取决于你的观点，你的期望是什么，你使用的是什么版本，

**原答案：**

MongoDB 首席技术官兼联合创始人艾略特·霍洛维茨（Eliot Horowitz）在此处逐点揭穿了该特定帖子：

[http://news.ycombinator.com/item?id=3202959](http://news.ycombinator.com/item?id=3202959)

这里也有一个很好的总结：

[http://www.betabeat.com/2011/11/10/the-trolls-come-out-for-10gen/](http://www.betabeat.com/2011/11/10/the-trolls-come-out-for-10gen/)

简短的版本是，看起来这基本上是有人在吸引注意力（成功地），没有确凿的证据或佐证。过去曾发生过真正的事件，随着产品的发展（例如，参见 1.8 中对日志的介绍）或发现并修复了更具体的错误，这些事件已得到处理。

**免责声明：**我确实为 MongoDB（以前的 10gen）工作，并且喜欢 philnate 来到这里并首先独立反驳这一事实 - 这可能比其他任何东西都更能说明产品:)

**更新：2013 年 8 月 19 日**

我最近在这个答案上看到了很多活动，我认为这与[SERVER-10478](https://jira.mongodb.org/browse/SERVER-10478)中的错误公告有关- 这肯定是一个边缘案例，但我仍然建议任何使用大文档分片的人尽快升级到 v2.2.6 和 v2.4.6，其中包含此问题的修复程序。

**更新：2017 年 3 月 24 日**

我不再为 MongoDB 工作，但仍然支持这个答案。鉴于此答案继续获得（和否决）选票并收到很多意见，我想在[这篇文章](https://www.mongodb.com/mongodb-3.4-passes-jepsen-test)中指出人们，它显示了自提出这个问题以来 MongoDB 取得的进展。该数据库现在通过了[Jepsen](https://github.com/jepsen-io/jepsen)测试，并将[测试集成](https://engineering.mongodb.com/post/testing-linearizability-with-jepsen-and-evergreen-call-me-continuously/)到其构建过程中，还有很多更成熟的系统没有通过。2017 年仍在敲打数据丢失鼓的人真的没有受到关注。

**更新：2020 年 5 月 24 日**

Jepsen[重新分析了 MongoDB 4.2.6](http://jepsen.io/analyses/mongodb-4.2.6)，因为 MongoDB 现在提供“完整的 ACID 事务”，虽然它在某些方面变得相当技术性，但如果您担心 MongoDB 中的数据丢失，我强烈建议您阅读这篇文章（我建议您查看您使用 Jepsen 测试的任何数据库，您可能会对它们的弱点感到惊讶）。该报告总结了默认读写问题的弱点，讨论了具有适当读写问题的非事务读写的可靠性，解决了文档中的缺陷，然后提供了有关测试新问题时遇到的问题的重要细节ACID 事务（以及相关的读/写问题）。

**那么，您仍然可以使用 MongoDB 丢失数据吗？**是的，尤其是默认设置，但大多数数据库都是如此。当这个问题被回答时，事情比他们回来时要好得多，并且这些功能具有更高的可靠性和耐用性，而且它们似乎有效（交易除外）。我的建议是了解您操作配置的限制，然后确定您的产品/业务/用例是否可以接受数据丢失风险。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-08-16T09:19:33.267

我不能说每一个案例，只说我自己的。但是**，与其他答案不同，我不为 Mongo 或其竞争对手工作**，我在使用 MongoDB 时丢失了数据，并且使用了 Mongo 大约十年，所以就这样吧。

## 2010

这是我第一次开始使用 Mongo 时，当时对 Mongo 的主要批评是：

*   据称，Mongo 的稳定版本存在重大的数据丢失错误，这些错误并未向用户明确说明。例如，在 1.8 之前的非集群配置可能会丢失数据。Mongo 记录了这一点，但没有达到稳定版本数据库中数据丢失错误的程度。

该批评的主要辩护是：

*   用户被告知了这种危险，尽管没有那么明确。用户应该在开始之前阅读所有文档。

在我自己的情况下，我在单个服务器配置中使用 1.7，但意识到风险。我关闭了数据库进行备份。关闭数据库本身的行为丢失了我的数据，10gen 协助（免费）但无法恢复数据。

## 2013

后来，在 2013 年，一项研究表明MongoDB 的默认设置会导致网络分区期间[**确认写入的大量丢失。**](https://aphyr.com/posts/284-call-me-maybe-mongodb)

同样在 2013 年 Mongo**[官方生产节点 Mongo 驱动程序包装并丢弃了所有错误](https://stackoverflow.com/questions/19546561/node-mongodb-error-connection-closed-due-to-parseerror/19546605#19546605)**。

## 2014

从那以后，[**在 2014 年，稳定的 MongoDB 驱动程序中的一个完全不同的错误**](https://stackoverflow.com/questions/19546561/node-mongodb-error-connection-closed-due-to-parseerror/19546605#19546605)让我和许多其他用户陷入了困境。

## 2016 年（以及 2020 年再次）

2016[**年，Meteor 项目遇到了 MongoDB 查询并不总是返回所有匹配文档的问题**](https://blog.meteor.com/mongodb-queries-dont-always-return-all-matching-documents-654b6594a827#.k8ja2xxj8)。

后来 MongoDB 的[**默认监听所有接口且没有设置管理员密码**](https://nakedsecurity.sophos.com/2017/01/11/thousands-of-mongodb-databases-compromised-and-held-to-ransom/)的策略对许多用户来说也很糟糕。我们在 20 年前（可能更早，但我当时不在技术领域）就知道默认监听所有端口是一个坏主意，这就是其他软件避免这种情况的原因。

**2020 年更新：**[Meow 攻击](https://www.bleepingcomputer.com/news/security/new-meow-attack-has-deleted-almost-4-000-unsecured-databases/)现在会自动破坏具有 Mongo 旧网络默认设置的数据库。

## 2020

[Jepsen 评估了 MongoDB 4.2.6](http://jepsen.io/analyses/mongodb-4.2.6)并得出结论：

> 即使在最高级别的读写问题上，MongoDB 4.2.6 也未能保留快照隔离。相反，Jepsen 观察到读取偏差、循环信息流、重复写入和内部一致性违规。弱默认值意味着事务可能会丢失写入并允许脏读，甚至会降低数据库和集合级别请求的安全级别。

## 结论

多年来，普遍的、反复的观察表明，**Mongo 有不安全的默认值来赢得性能基准**。Mongo 通常会回应说，用户应该通过阅读所有相关文档来了解这些内容，并且可以在需要时使用选择使用安全选项。

**截至 2020 年，**我觉得 MongoDB 现在实际上是一个更稳定的产品，只是通过时间和投资，但是我永远不会相信该公司十年来使用我们的数据进行 beta 测试，如果再次丢失数据我一点也不感到惊讶状况被揭露。我使用 Postgres JSONB、FoundationDB 和 RethinkDB 作为结构化数据存储，它们可能是有效的替代方案。

[![在此处输入图像描述](../Images/4e320f9ba7dd0294ecb18df30de53063.png)](https://i.stack.imgur.com/JMsK7.jpg)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-07-24T20:33:18.450

截至 2017 年 2 月，[Jepsen 对 MongoDB 的最新分析](https://jepsen.io/analyses/mongodb-3-4-0-rc3)表明，**在 MongoDB 3.2.11 和 3.4.0-rc4 之前的所有 MongoDB 版本中都可能发生数据丢失**。

因此，在撰写问题时（2012 年），答案应该是肯定的，这些批评从理论角度来看是有效的。但看起来客户并不关心这个理论。正如[RethinkDB 失败](http://www.defmacro.org/2017/01/18/why-rethinkdb-failed.html)所表明的，正确性并不重要。唯一重要的是上市时间。很伤心。

截至 2018 年 10 月，在 MongoDB 3.4 上 - 这仍然是一个问题。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-05-12T20:12:19.243

在最近的版本中从未听说过那些严重的问题。你需要考虑的是，MongoDB 作为关系系统在后面没有十年的发展。此外，MongoDB 可能根本没有提供那么多功能来避免数据丢失。但即使使用关系系统，您也无法确定您永远不会丢失任何数据。这在很大程度上取决于您的系统配置（因此使用复制和手动数据备份您应该非常安全）。

作为避免早期版本中的 Beta 错误或错误的一般准则，请避免在生产中使用新版本（这是 debian 在服务器中如此受欢迎的原因）。如果 MongoDB 会（一直）遭受如此严重的问题，那么用户列表会更小：[https](https://www.mongodb.com/community/deployments) ://www.mongodb.com/community/deployments 另外我不太相信这个 pastebin 消息，为什么要匿名发布？这个人公司是不是羞于告诉他们使用了mongodb，他们害怕10gen？这些错误报告的链接在哪里（或者 10gen 是否从 JIRA 中删除了它们？）

因此，让我们简短地谈谈这些要点：

1.  是的，MongoDB 在“即发即弃”模式下正常运行。[但是您可以使用以下几个选项修改此行为： https](https://docs.mongodb.com/manual/reference/command/getLastError/#dbcmd.getLastError) ://docs.mongodb.com/manual/reference/command/getLastError/#dbcmd.getLastError 。因此，仅因为 MongoDB 默认使用它，并不意味着您不能根据需要更改它。但是，如果您没有在应用程序中触发并忘记，那么您需要降低性能，因为您正在添加往返。

    更新：[从 2.6 版开始](https://docs.mongodb.com/manual/release-notes/2.6-compatibility/#write-method-acknowledgements)，命令`insert`, `update`, `save`,`remove`默认情况下会确认写入。

2.  从来没有听说过这样的问题，除了那些导致自己失败的问题......但关系系统也可能发生这种情况。我想这一点只谈论主从复制。副本集永远不会稳定。来自网络的一些链接，其中其他 dbms 也因故障而导致数据丢失：http: [//blog.lastinfirstout.net/2010/04/bit-by-bug-data-loss-running-oracle-on.html](http://blog.lastinfirstout.net/2010/04/bit-by-bug-data-loss-running-oracle-on.html) [http： //dbaspot.com/oracle-server/430465-parallel-cause-data-lost-another-oracle-bug.html](http://dbaspot.com/oracle-server/430465-parallel-cause-data-lost-another-oracle-bug.html) [http://bugs.mysql.com/bug.php?id=18014](http://bugs.mysql.com/bug.php?id=18014) （那些发布的链接是' t 有利于给定系统，或者应该暗示其他任何事情，而不是表明其他系统中也存在可能导致数据丢失的错误。）

3.  是的，实际上在实例级别有锁定，我不认为在分片环境中这是一个全局的，我认为这将在每个分片单独的实例级别，因为没有必要锁定其他实例，因为没有一致性检查需要。即将发布的 2.2 版将锁定在 DB 级别，Collection Level 的票证可能还会存在扩展或文档（[https://jira.mongodb.org/browse/SERVER-4328](https://jira.mongodb.org/browse/SERVER-4328)）。但是更深层次的锁定可能会影响 MongoDB 的实际性能，因为锁定管理成本很高。

4.  移动块不应该引起太多问题，因为重新平衡应该从每个节点中取出一些块并将它们移动到新节点。它永远不会导致块的 ping/pong，也不会仅仅因为一两个块的差异而开始重新平衡。当您的分片键选择错误时，可能会出现问题。因此，您最终可能会将所有新条目插入一个节点而不是全部。因此，您会更频繁地看到可能导致问题的重新平衡，但这不是由于 mongo 而不是您选择不当的 shardkey。

5.  不能评论这个

6.  不是 100% 肯定，但我认为 Replicasets 是在 1.6 中引入的，所以如前所述，永远不要使用最新版本进行生产，除非你可以忍受数据丢失。与每个新功能一样，都有可能出现错误。即使是广泛的测试也可能无法揭示所有问题。再一次，为了上帝的缘故，总是运行一些手动备份，除非你可以忍受数据丢失。

7.  无法对此发表评论。但实际上软件可能包含严重的错误。许多游戏也遇到了这些问题，并且香蕉软件在其他领域也广为人知。无法评论具体的事情，因为这是在我的 MongoDB 时代之前。

8.  复制可能会导致此类问题。根据复制策略，这可能是一个问题，另一个系统可能更适合。但是如果没有真正真正的写入密集型工作负载，您可能不会遇到此类问题。事实上，让 3 个副本轮询来自一个主节点的更改可能会有问题。您可以通过添加更多分片来解决问题。

作为一般性结论：是的，可能存在这些问题，但是 MongoDB 在这个方向上做了很多工作，而且我怀疑其他 DBMS 本身从来没有遇到过这个或其他问题。就拿传统的关系数据库来说，那些可以很好地扩展到网络规模的系统就不需要像 MongoDB、HBase 等系统了。您无法获得满足所有需求的系统。所以你必须忍受一个人的缺点，或者尝试建立一个由多个人组成的组合系统来获得你需要的东西。

免责声明：我不隶属于 MongoDB 或 10gen，我只是与 MongoDB 合作并发表我的看法。

# ios - 如何在不被请求的情况下将信息从服务器发送到 iOS

> ID：10560835
> 
> 赞同：0
> 
> 时间：2012-05-12T03:28:49.550
> 
> 标签：ios, http

我正在 iOS 平台上开发一个应用程序，这将涉及许多 iPad 同时处理服务器上的文件，使用像谷歌文档中的在线协作。但是，它需要实时更新。因此，我认为最好的方法是让服务器在每次文档发生更改时与每个 iPad 进行通信。

不幸的是，据我所知，服务器与 iPad 通信的唯一方法是 iPad 首先从服务器请求信息（HTTP GET 或 POST）。由于我想要实时更新，并且我不希望 iPad 每纳秒询问服务器以太是否是更新，所以这是行不通的。

**我如何编程服务器以与 iPad 通信而无需先请求它？**非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:33:49.830

看看这个，Apple 的推送通知服务

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

或更与您的问题更相关，

[iPhone 上的 COMET（服务器推送到客户端）](https://stackoverflow.com/questions/337985/comet-server-push-to-client-on-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T03:35:38.803

只需为每台 iPad 与服务器保持一个打开的套接字即可。每次应用重新启动时，重新建立连接。当连接断开时，将任何更改排队。

没什么大不了。这里没有火箭科学。

# android - 菜单：处理点击事件：对话框

> ID：10560838
> 
> 赞同：0
> 
> 时间：2012-05-12T03:29:26.370
> 
> 标签：android, menu, menuitem

我做了红色的[LINK](http://developer.android.com/guide/topics/ui/menus.html) [LINK](http://developer.android.com/guide/topics/resources/menu-resource.html)

我在主要活动中写了这个

```
@Override   
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.mainmenu, menu);
    return true;
}
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        case R.id.infos:
            infos();
            return true;
        case R.id.waring:
            waring();
            return true;
        case R.id.credits:
            credits();
            return true;
        case R.id.about:
            about();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}
private void about() {
//      // TODO Auto-generated method stub
//      // custom dialog

} 
```

我应该把警报箱放在哪里？

```
new AlertDialog.Builder(this).setTitle("About").setMessage("el viva Stackoverflow           !").create(); 
```

在私人 void about() 或直接

如果 R.id.about: about();

警报框语法是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T03:37:56.097

您可以直接将代码放在 swith case 中，而不是使用新方法（关于）。只需检查您是否正确导入。您只需按 ctrl+shift+O 即可导入所有导入。

您可以使用下面的示例代码来创建 alertdiaolg 。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Are you sure you want to exit?")
       .setCancelable(false)
AlertDialog alert = builder.create();
alert.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:51:40.730

> 我应该把警报箱放在哪里？

没关系，基本上，如果您避免单行函数或仅从单个位置调用的函数，您将获得更紧凑的代码。

> 警报框语法是否正确？

您不应该忘记调用`.show()`after `create()`，如下所示：

```
new AlertDialog.Builder(this).setTitle("About").setMessage("el viva Stackoverflow!").create().show(); 
```

# objective-c - 在 Google Map for IOS 中使用 JSON 方向

> ID：10560839
> 
> 赞同：0
> 
> 时间：2012-05-12T03:29:28.003
> 
> 标签：objective-c, ios, json, google-maps, directions

我已经使用[谷歌地图 API](https://developers.google.com/maps/documentation/directions/)来获取到具有 3 个不同航点的地点的路线。

我找到了一种将方向作为 JSON 传递给应用程序的方法，并且[我知道如何](https://stackoverflow.com/questions/10100110/how-to-decode-route-points-from-the-json-output-data)通过腿解析它，但我的问题是如何调用地图来遵循这些方向？它必须遵循谷歌发送的自定义方向，因为它使用他们的[旅行推销员算法](https://developers.google.com/maps/documentation/directions/#Waypoints)，并且它必须停在不同的航点。

有任何想法吗？

[这是将使用的 JSON 消息的示例](http://maps.googleapis.com/maps/api/directions/json?origin=Adelaide,SA&destination=Adelaide,SA&waypoints=optimize:true|Barossa+Valley,SA|Clare,SA|Connawarra,SA|McLaren+Vale,SA&sensor=false)

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:19:16.780

It looks like you just need to input your origin, destination, and waypoints into the directions render service and plot to the map.

Look at this link and scroll down to the waypoint portion.

[https://developers.google.com/maps/documentation/javascript/directions#DirectionsRequests](https://developers.google.com/maps/documentation/javascript/directions#DirectionsRequests)

This will show you an example of how to get directions from the directions service.

From looking at your file though if you don't have an actual account that you are paying for with google maps, you are going to hit the 8 waypoint maximum very quickly due to all of your waypoints (lats/longs).

Here is a post that describes how to get around that, but if you have an account it shouldn't be an issue.

[Exceed 23 waypoint per request limit on Google Directions API (Business/Work level)](https://stackoverflow.com/questions/8779886/exceed-23-waypoint-per-request-limit-on-google-directions-api-business-level/8796772#8796772)

HTH

# android - android中电话意图的Uri是什么？

> ID：10560845
> 
> 赞同：1
> 
> 时间：2012-05-12T03:30:21.203
> 
> 标签：android, android-intent, uri

我在 android 文档中发现这`Uri`是一个

> 标识抽象或物理资源的统一资源标识符，由 RFC 2396 指定。

当我想从我的 android 应用程序中拨打电话时，意图如下所示：

```
String toDial="tel:"+number.getText().toString();
Intent i = new Intent(Intent.ACTION_DIAL,Uri.parse(toDial)); 
```

在这种情况下，物理或抽象资源是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T04:12:48.797

电话号码的 URI 记录在 RFC 3966 中

[https://www.rfc-editor.org/rfc/rfc3966](https://www.rfc-editor.org/rfc/rfc3966)

> URI可以指电话号码标识的资源，包括但不限于电话呼叫的发起者或目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T04:20:56.907

see Uri syntax from following link:

[http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax](http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax)

note syntax:

```
<scheme name> : <hierarchical part> [ ? <query> ] [ # <fragment> ] 
```

Here scheme name defines what type of Uri it is: it may have options http, mailto, tel, etc.

next is hierarchical part, which may have information into hierarchy. As number does not have fragments or queryl, its only part avaialable for this URI.

# rest - 使用静态文档大摇大摆

> ID：10560857
> 
> 赞同：26
> 
> 时间：2012-05-12T03:33:14.967
> 
> 标签：rest, documentation-generation, swagger

我希望使用 Swagger 来记录我的宁静界面。问题是我不想通过注释我的代码来自动生成我的文档。基本上我不想将我的内部数据模型耦合到接口公开的虚拟数据模型。看来我可以让我的服务器提供一个 Resources.json 文件，然后为每个资源处理程序提供一个相应的 JSON 文件。然而，当我尝试这个时，我在尝试定义 JSON 正确语法并提供正确的 HTTP 标头响应字段时遇到了很多小问题。

有没有人以这种方式使用过 Swagger？有人有一些文档或示例吗？我能找到的一切都围绕着简单地使用客户端库为你生成东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-10T15:19:02.633

我之前为 swagger 创建了静态 json 文件。该文档有点缺乏描述使招摇工作所需的json。

如果您查看他们的[规范](https://github.com/swagger-api/swagger-spec)并查看他们的示例[petstore.json](https://github.com/swagger-api/swagger-spec/blob/master/examples/v2.0/json/petstore.json)。您应该能够很好地了解如何构建 json。

或者看看我的例子。

如果您还有其他问题，请随时提出。

main.json

```
{
    "apiVersion": "0.0.4542.22887",
    "swaggerVersion": "1.0",
    "basePath": "http://local.api.com/api/doc",
    "apis": [
        {
            "path": "/donuts",
            "description": "Operations about donuts"
        },
        {
            "path": "/cakes",
            "description": "Operations about cakes"
        },
        {
            "path": "/bagels",
            "description": "Operations about bagels"
        }
    ]

} 
```

甜甜圈.json

```
{
    "apiVersion": "0.0.4542.22887",
    "swaggerVersion": "1.0",
    "basePath": "http://local.api.com/api",
    "resourcePath": "/donuts",
    "apis": [
        {
            "path": "/donuts/{page}/{pagesize}",
            "description": "Get donuts by page",
            "operations": [
                {
                    "httpMethod": "GET",
                    "notes": "Get a donut with page and size",
                    "nickname": "getDonutsByPageAndSize",
                    "summary": "Get a collection of donuts by page and pagesize.",
                    "parameters": [
                        {
                            "name": "page",
                            "description": "the page of the collection",
                            "dataType": "int",
                            "required": true,
                            "allowMultiple": false,
                            "paramType": "path"
                        },
                        {
                            "name": "pagesize",
                            "description": "the size of the collection",
                            "dataType": "int",
                            "required": true,
                            "allowMultiple": false,
                            "paramType": "path"
                        }
                    ],
                    "errorResponses": [ ]
                }
            ]
        },
    ]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T04:49:28.333

我已经使用 swagger PHP 从 PHP 文件创建了 json，如果有人正在寻找，这是我的代码，希望对您有所帮助

```
<?php
namespace carParking\Resources;

use Swagger\Annotations as SWG;

/**
 * @package
 * @category
 * @subpackage
 *
 * @SWG\Resource(
 *   apiVersion="1.0.0",
 *   swaggerVersion="1.2",
 *   basePath="http://192.168.3.42/swagger/api",
 *   resourcePath="/car",
 *   description="Car Parking System",
 *   produces="['application/json','application/xml','text/plain','text/html']"
 * )
 */
class Car
{
/**
 * @SWG\Api(
 *   path="/car/car.php?carId={carId}",
 *   @SWG\Operation(
 *     method="GET",
 *     summary="Find car by ID",
 *     notes="Returns a car based on ID",
 *     type="Car",
 *     nickname= "getCarById",
 *     authorizations={},
 *     @SWG\Parameter(
 *       name="carId",
 *       description="ID of car that needs to be fetched",
 *       required=true,
 *       type="integer",
 *       format="int64",
 *       paramType="path",
 *       allowMultiple=false
 *     ),
 *     @SWG\ResponseMessage(code=400, message="Invalid ID supplied"),
 *     @SWG\ResponseMessage(code=404, message="car not found")
 *   )
 * )
 */
public function getCarById() {
    echo "getCarById";
}

/**
 * @SWG\Api(
 *   path="/car/fetchAll.php",
 *   @SWG\Operation(
 *     method="GET",
 *     summary="Fetch all parked cars",
 *     notes="Returns all cars parked",
 *     type="Car",
 *     nickname= "getAllParkedCars",
 *     authorizations={},
 *     @SWG\ResponseMessage(code=404, message="car not found")
 *   )
 * )
 */
public function getAllParkedCars() {
    echo "getAllParkedCars";
}

/**
 * @SWG\Api(
 *   path="/car/delete.php",
 *   @SWG\Operation(
 *     method="DELETE",
 *     summary="Deletes a Car",
 *     notes="Delete a parked car",
 *     type="void",
 *     nickname= "deleteCar",
 *     @SWG\Consumes("application/x-www-form-urlencoded"),
 *     authorizations={},
 *     @SWG\Parameter(
 *       name="carId",
 *       description="ID of car that needs to be deleted",
 *       required=true,
 *       type="integer",
 *       format="int64",
 *       paramType="form",
 *       allowMultiple=false
 *     ),
 *     @SWG\ResponseMessage(code=400, message="Invalid ID supplied"),
 *     @SWG\ResponseMessage(code=404, message="car not found")
 *   )
 * )
 */
public function deleteCar() {
    echo "deleteCar";
}

/**
 * @SWG\Api(
 *   path="/car/add.php",
 *   @SWG\Operation(
 *     method="POST",
 *     summary="Add Car",
 *     notes="Add car to parking",
 *     type="array",
 *     @SWG\Items("car"),
 *     nickname= "addCar",
 *     authorizations={},
 *     @SWG\Parameter(
 *       name="parking_section_id",
 *       description="Parking Area ID",
 *       required=true,
 *       type="integer",
 *       format="int64",
 *       paramType="form",
 *       allowMultiple=false
 *     ),
 *     @SWG\Parameter(
 *       name="car_number",
 *       description="Car Number",
 *       required=true,
 *       type="integer",
 *       format="int64",
 *       paramType="form",
 *       allowMultiple=false
 *     ),
 *     @SWG\Parameter(
 *       name="cost",
 *       description="Cost of Parking",
 *       required=true,
 *       type="integer",
 *       format="int64",
 *       paramType="form",
 *       allowMultiple=false
 *     ),
 *     @SWG\ResponseMessage(code=400, message="Invalid ID supplied"),
 *     @SWG\ResponseMessage(code=404, message="car not found")
 *   )
 * )
 */
public function addCar() {
    echo "addCar";
}

/**
 * @SWG\Api(
 *   path="/car/getCost.php",
 *   @SWG\Operation(
 *     method="POST",
 *     summary="Parking Cost of the Car Parked",
 *     notes="Parking Cost of the Car Parked",
 *     type="void",
 *     nickname= "getCost",
 *     authorizations={},
 *     @SWG\Parameter(
 *       name="carId",
 *       description="Parking Area ID",
 *       required=true,
 *       type="integer",
 *       format="int64",
 *       paramType="form",
 *       allowMultiple=false
 *     ),
 *     @SWG\ResponseMessage(code=405, message="Invalid input")
 *   )
 * )
 */
public function getCost() {
    echo "getCost";
}

/**
 * @SWG\Api(
 *   path="/car/deleteAll.php",
 *   @SWG\Operation(
 *     method="DELETE",
 *     summary="Delete all car parking",
 *     notes="Delete all car parking",
 *     type="void",
 *     nickname= "deleteAll",
 *     @SWG\Consumes("application/x-www-form-urlencoded"),
 *     authorizations={}
 *   )
 * )
 */
public function deleteAll() {
    echo "deleteAll";
}

/**
 * @SWG\Api(
 *   path="/car/testPut.php",
 *   @SWG\Operation(
 *     method="PUT",
 *     summary="Testing Put",
 *     notes="Testing Put",
 *     type="void",
 *     nickname= "testWithFormPut",
 *     @SWG\Consumes("application/x-www-form-urlencoded"),
 *     authorizations={},
 *     @SWG\Parameter(
 *       name="firstPara",
 *       description="First Parameter",
 *       required=true,
 *       type="integer",
 *       format="int64",
 *       paramType="form",
 *       allowMultiple=false
 *     ),
  *     @SWG\Parameter(
 *       name="secondPara",
 *       description="Second Parameter",
 *       required=true,
 *       type="integer",
 *       format="int64",
 *       paramType="form",
 *       allowMultiple=false
 *     ),
 *     @SWG\ResponseMessage(code=405, message="Invalid input")
 *   )
 * )
 */
public function testWithFormPut() {
    echo "testWithFormPut";
}

/**
 * @SWG\Api(
 *   path="/car/testPatch.php",
 *   @SWG\Operation(
 *     method="PATCH",
 *     summary="Testing Patch",
 *     notes="Testing Patch",
 *     type="void",
 *     nickname= "testWithFormPatch",
 *     @SWG\Consumes("application/x-www-form-urlencoded"),
 *     authorizations={},
 *     @SWG\Parameter(
 *       name="firstPara",
 *       description="First Parameter",
 *       required=true,
 *       type="integer",
 *       format="int64",
 *       paramType="form",
 *       allowMultiple=false
 *     ),
  *     @SWG\Parameter(
 *       name="secondPara",
 *       description="Second Parameter",
 *       required=true,
 *       type="integer",
 *       format="int64",
 *       paramType="form",
 *       allowMultiple=false
 *     ),
 *     @SWG\ResponseMessage(code=405, message="Invalid input")
 *   )
 * )
 */
public function testWithFormPatch() {
    echo "testWithFormPatch";
}

/**
 * @SWG\Api(
 *   path="/car/carJsonTest.php",
 *   @SWG\Operation(
 *     method="POST",
 *     summary="Send and parse JSON",
 *     notes="Send and parse JSON",
 *     type="void",
 *     authorizations={},
 *     @SWG\Parameter(
 *       name="body",
 *       description="Sample JSON need to be passed",
 *       required=true,
 *       type="Car",
 *       paramType="body",
 *       allowMultiple=false
 *     ),
 *     @SWG\ResponseMessage(code=405, message="Invalid input")
 *   )
 * )
 */
public function carJsonTest() {
    echo "carJsonTest";
} 
```

型号代码：

```
<?php
namespace carStore\Models;

use Swagger\Annotations as SWG;

/**
 * @package
 * @category
 * @subpackage
 *
 * @SWG\Model(id="Car",required="parking_section_id, car_number, cost")
 */
class Car
{
/**
 *         @SWG\Property(name="parking_section_id",type="integer",format="int64",minimum="0.0",maximum="100.0",description="unique identifier for the parking")
 */
public $parking_section_id;

 /**
 * @SWG\Property(name="car_number",type="integer",format="int64",description="unique identifier for the car")
 */
public $car_number;

 /**
 * @SWG\Property(name="cost",type="integer",format="int64",description="cost for the parking")
 */
public $cost;

 } 
```

}

这是我们用于招摇 UI 的 JSON 代码：

```
 {
"basePath": "http://192.168.3.42/swagger/api",
"swaggerVersion": "1.2",
"apiVersion": "1.0.0",
"resourcePath": "/car",
"apis": [
    {
        "path": "/car/add.php",
        "operations": [
            {
                "method": "POST",
                "summary": "Add Car",
                "nickname": "addCar",
                "type": "array",
                "items": {
                    "$ref": "car"
                },
                "parameters": [
                    {
                        "paramType": "form",
                        "name": "parking_section_id",
                        "type": "integer",
                        "required": true,
                        "allowMultiple": false,
                        "description": "Parking Area ID",
                        "format": "int64"
                    },
                    {
                        "paramType": "form",
                        "name": "car_number",
                        "type": "integer",
                        "required": true,
                        "allowMultiple": false,
                        "description": "Car Number",
                        "format": "int64"
                    },
                    {
                        "paramType": "form",
                        "name": "cost",
                        "type": "integer",
                        "required": true,
                        "allowMultiple": false,
                        "description": "Cost of Parking",
                        "format": "int64"
                    }
                ],
                "responseMessages": [
                    {
                        "code": 400,
                        "message": "Invalid ID supplied"
                    },
                    {
                        "code": 404,
                        "message": "car not found"
                    }
                ],
                "notes": "Add car to parking",
                "authorizations": {

                }
            }
        ]
    },
    {
        "path": "/car/car.php?carId={carId}",
        "operations": [
            {
                "method": "GET",
                "summary": "Find car by ID",
                "nickname": "getCarById",
                "type": "Car",
                "parameters": [
                    {
                        "paramType": "path",
                        "name": "carId",
                        "type": "integer",
                        "required": true,
                        "allowMultiple": false,
                        "description": "ID of car that needs to be fetched",
                        "format": "int64"
                    }
                ],
                "responseMessages": [
                    {
                        "code": 400,
                        "message": "Invalid ID supplied"
                    },
                    {
                        "code": 404,
                        "message": "car not found"
                    }
                ],
                "notes": "Returns a car based on ID",
                "authorizations": {

                }
            }
        ]
    },
    {
        "path": "/car/carJsonTest.php",
        "operations": [
            {
                "method": "POST",
                "summary": "Send and parse JSON",
                "nickname": "carJsonTest",
                "type": "void",
                "parameters": [
                    {
                        "paramType": "body",
                        "name": "body",
                        "type": "Car",
                        "required": true,
                        "allowMultiple": false,
                        "description": "Sample JSON need to be passed"
                    }
                ],
                "responseMessages": [
                    {
                        "code": 405,
                        "message": "Invalid input"
                    }
                ],
                "notes": "Send and parse JSON",
                "authorizations": {

                }
            }
        ]
    },
    {
        "path": "/car/delete.php",
        "operations": [
            {
                "method": "DELETE",
                "summary": "Deletes a Car",
                "nickname": "deleteCar",
                "type": "void",
                "parameters": [
                    {
                        "paramType": "form",
                        "name": "carId",
                        "type": "integer",
                        "required": true,
                        "allowMultiple": false,
                        "description": "ID of car that needs to be deleted",
                        "format": "int64"
                    }
                ],
                "responseMessages": [
                    {
                        "code": 400,
                        "message": "Invalid ID supplied"
                    },
                    {
                        "code": 404,
                        "message": "car not found"
                    }
                ],
                "notes": "Delete a parked car",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "authorizations": {

                }
            }
        ]
    },
    {
        "path": "/car/deleteAll.php",
        "operations": [
            {
                "method": "DELETE",
                "summary": "Delete all car parking",
                "nickname": "deleteAll",
                "type": "void",
                "notes": "Delete all car parking",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "authorizations": {

                }
            }
        ]
    },
    {
        "path": "/car/fetchAll.php",
        "operations": [
            {
                "method": "GET",
                "summary": "Fetch all parked cars",
                "nickname": "getAllParkedCars",
                "type": "Car",
                "responseMessages": [
                    {
                        "code": 404,
                        "message": "car not found"
                    }
                ],
                "notes": "Returns all cars parked",
                "authorizations": {

                }
            }
        ]
    },
    {
        "path": "/car/getCost.php",
        "operations": [
            {
                "method": "POST",
                "summary": "Parking Cost of the Car Parked",
                "nickname": "getCost",
                "type": "void",
                "parameters": [
                    {
                        "paramType": "form",
                        "name": "carId",
                        "type": "integer",
                        "required": true,
                        "allowMultiple": false,
                        "description": "Parking Area ID",
                        "format": "int64"
                    }
                ],
                "responseMessages": [
                    {
                        "code": 405,
                        "message": "Invalid input"
                    }
                ],
                "notes": "Parking Cost of the Car Parked",
                "authorizations": {

                }
            }
        ]
    },
    {
        "path": "/car/testPatch.php",
        "operations": [
            {
                "method": "PATCH",
                "summary": "Testing Patch",
                "nickname": "testWithFormPatch",
                "type": "void",
                "parameters": [
                    {
                        "paramType": "form",
                        "name": "firstPara",
                        "type": "integer",
                        "required": true,
                        "allowMultiple": false,
                        "description": "First Parameter",
                        "format": "int64"
                    },
                    {
                        "paramType": "form",
                        "name": "secondPara",
                        "type": "integer",
                        "required": true,
                        "allowMultiple": false,
                        "description": "Second Parameter",
                        "format": "int64"
                    }
                ],
                "responseMessages": [
                    {
                        "code": 405,
                        "message": "Invalid input"
                    }
                ],
                "notes": "Testing Patch",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "authorizations": {

                }
            }
        ]
    },
    {
        "path": "/car/testPut.php",
        "operations": [
            {
                "method": "PUT",
                "summary": "Testing Put",
                "nickname": "testWithFormPut",
                "type": "void",
                "parameters": [
                    {
                        "paramType": "form",
                        "name": "firstPara",
                        "type": "integer",
                        "required": true,
                        "allowMultiple": false,
                        "description": "First Parameter",
                        "format": "int64"
                    },
                    {
                        "paramType": "form",
                        "name": "secondPara",
                        "type": "integer",
                        "required": true,
                        "allowMultiple": false,
                        "description": "Second Parameter",
                        "format": "int64"
                    }
                ],
                "responseMessages": [
                    {
                        "code": 405,
                        "message": "Invalid input"
                    }
                ],
                "notes": "Testing Put",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "authorizations": {

                }
            }
        ]
    }
],
"models": {
    "Car": {
        "id": "Car",
        "required": [
            "car_number",
            "cost",
            "parking_section_id"
        ],
        "properties": {
            "parking_section_id": {
                "description": "unique identifier for the parking",
                "type": "integer",
                "format": "int64",
                "minimum": "0.0",
                "maximum": "100.0"
            },
            "car_number": {
                "description": "unique identifier for the car",
                "type": "integer",
                "format": "int64"
            },
            "cost": {
                "description": "cost for the parking",
                "type": "integer",
                "format": "int64"
            }
        }
    }
},
"produces": [
    "application/json",
    "application/xml",
    "text/plain",
    "text/html"
]
} 
```

在 api-doc.json 中给出 json 路径

# asp.net - 更改密码后，FormsAuthentication 仍然可以跨会话工作

> ID：10560866
> 
> 赞同：2
> 
> 时间：2012-05-12T03:35:58.117
> 
> 标签：asp.net, forms-authentication

我正在使用香草表单身份验证。如果我以同一个用户的身份打开了多个会话，并且我在一个会话中更改了密码，那么另一个会话仍然会进行身份验证。

我希望第二次会议会再次提示我提供我的凭据。

我是否必须将散列密码写入 cookie 并在每个请求上检查以获取此功能？

对我来说似乎是一个安全漏洞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:03:38.653

这是预期的行为。FormsAuthentication 仅存储用户信息（以及一些其他数据来验证服务器是否确实生成了该 cookie）。cookie 本身就是有效的凭证（或票据或声明）。如果您对此感到担忧，您应该减少表单 cookie 的有效时间，或者更频繁地询问服务器是否发生密码更改，如果发生密码更改，请执行 FormsAuthentication.SignOut() 操作以强制重新登录。

也许不是您希望 FormsAuthentication 做什么，而是它做了什么。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:55:20.997

正如我在评论中提到的，如果这是您想要的行为，您需要自己强制执行此操作。这可以像从您自己的“SecureBasePage”派生所有安全页面一样简单。在该安全页面中，您可以轮询您的数据库以查看自用户获得授权后密码是否已更改

# javascript - 如何抓取页面上的某些文本？

> ID：10560867
> 
> 赞同：0
> 
> 时间：2012-05-12T03:36:22.483
> 
> 标签：javascript, jquery, dom

这会抓取 td 标签等

```
<script type=”text/javascript”&gt;

var td = document.getElementsByTagName(“td”);
for (var i = 0; i < td.length; i++) {
    document.write(‘td #’ + i + ‘&lt;br />’);
}

</script> 
```

我如何使其等效于抓取某些文本

例如，如果我有

```
hello world
by world
hello goodbye
yellow submarine
yo hello 
```

我如何抓住所有文本中的“你好”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T03:48:44.200

使用 jQuery 的[contains 选择器](http://api.jquery.com/jQuery.contains/)应该可以帮助您。

[http://jsfiddle.net/akxWF/1/](http://jsfiddle.net/akxWF/1/)

JS

```
$('body').find('*:contains("hello")').each(function(){
    var h = $(this).html(); 
    //alert(h); 
    h = h.replace('hello', '<span class="highlight">hello</span>');
    $(this).html(h); 
}); ​ 
```

HTML

```
<table>
    <tr>
        <td>hello some more text</td><td>test</td>   
    </tr>
</table>
<div>hello testing<div>More data</div></div>
<span>hello</span> 
```

CSS

```
.highlight{
 background-color:yellow;    
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T03:46:21.277

将所有“hello”包装在 span 标签中并给它一个类“hello”

```
<span class="hello">hello</span> world
by world
<span class="hello">hello</span> goodbye
yellow submarine
yo hello 
```

使用 jQuery

```
var allHello = $('.hello').text(); 
```

您可以做的其他方法是使用正则表达式，但如果您知道您的内容，则不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T03:40:42.250

屏幕抓取的常用方法是将需要捕获或搜索的文本放入带有 ID 的 DIV 标记中。完成此操作后，您将能够对 DIV 标记的 ID 执行 getElementsByTagName 以获取整个文本。

希望这很清楚。如果这不是您想要的，我建议您附加更具体的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T05:02:20.977

> 我如何抓住所有文本中的“你好”

我不确定我是否得到了这个问题，但要抓住 "hello" 你可以这样做：

```
var td = document.getElementsByTagName('td')[0],
    td = (td.textContent || td.innerText || ""),
    hello = td.match(/hello/gi); 
```

这将返回一个包含所有“hello”的常规 javascript 数组？

[小提琴](http://jsfiddle.net/adeneo/8QNtn/) ​</p>

# python - 简单的加密程序

> ID：10560868
> 
> 赞同：0
> 
> 时间：2012-05-12T03:37:17.657
> 
> 标签：python, arrays, encryption

我在用 python 编写一个简单的加密/解密程序时遇到了一些问题，只涉及用另一个数组替换一个数组的元素。我有两个数组，需要加密的数组和第一个元素相当于 a 和最后一个元素相当于 z 的密钥。

我假设我需要在第一个数组 = key[0] 中创建 a 的所有实例，依此类推，但我不知道如何编写一些代码。一些提示或指导将不胜感激。

请注意，我不能导入任何库，也没有教过我字典。

跟进问题，但相关问题。如何替换列表中具有相同值的所有元素。即如何将文本列表中的所有“a”值替换为键列表的第一个值？

```
for c in text:        
    if c == 'a':
        c = key[0] 
```

给我一个错误：“函数”对象不可下标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T03:42:30.500

首先将键转换为字典，然后您可以使用简单的列表替换

```
key = {chr(ord('a')+i): e for i, e in enumerate(key)}
encrypted = [key[e] for e in unencrypted] 
```

或者

```
encrypted = [key[ord(e) - ord('a')] for e in unencrypted] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T05:39:38.503

我认为更简单的方法是：

```
def encrypt(iterable,encryption_dictionary):
    itertype = type(iterable)
    return itertype(''.join((encryption_dictionary[i] for i in iterable))) 
```

要创建加密字典，您可以使用

```
{key1:mappedvalue1,key2:mappedvalue2} 
```

以此类推， : 表示对，而 "," 在对之间进行分隔。

# windows - 具有可编辑默认值的 Windows Perl 行编辑器？

> ID：10560869
> 
> 赞同：4
> 
> 时间：2012-05-12T03:37:34.587
> 
> 标签：windows, perl, command-line, stdout, stdin

我在 Windows 上运行 Strawberry Perl，我想在命令提示符中打印一个“默认值”，以便用户可以编辑它，然后按 Enter，Perl 会将其视为新的 STDIN 行。我被告知要使用[IO::Prompt](http://search.cpan.org/perldoc?IO%3a%3aPrompt)，但已经确定这在 Windows 中不起作用。

[没有用Tk](http://search.cpan.org/perldoc?Tk)或其他东西制作 GUI，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T06:08:44.627

[ExtUtils::MakeMaker](http://search.cpan.org/perldoc?ExtUtils::MakeMaker)有一个`prompt`功能，它非常独立于平台。我不建议在您的情况下使用它，但[IO::Prompt::Tiny](http://search.cpan.org/perldoc?IO::Prompt::Tiny)的 POD声明它的`prompt`功能基于它的方式`ExtUtils::MakeMaker`。[冒烟测试](http://static.cpantesters.org/distro/I/IO-Prompt-Tiny.html)似乎反映了 IO::Prompt::Tiny 实现了更好的可移植性（包括 Windows）。你可以试一试。

可以肯定的是，这个新模块的冒烟测试还为时过早，但如果它是基于`ExtUtils::MakeMaker`'s 的`prompt`，它是为便携性而设计的。

[Term::Prompt](http://search.cpan.org/perldoc?Term::Prompt)是另一种选择。它存在的时间更长，并且在多平台烟雾测试方面的成功历史也更长。`Term::ReadKey`但它具有和的非核心依赖项`Text::Wrap`。 `IO::Prompt::Tiny`坚持核心依赖关系，如果这是一个问题。

```
use IO::Prompt::Tiny qw( prompt );
my $input = prompt( 'Proceed? (y/n)', 'n' ); 
```

输出：

```
Proceed? (y/n) [n] 
```

# javascript - 用于 html 文件而不是图像的 jQuery 轮播

> ID：10560871
> 
> 赞同：0
> 
> 时间：2012-05-12T03:37:42.150
> 
> 标签：javascript, jquery

我正在努力寻找一个好的轮播，它将显示单个 html 文件，而不是更典型的图像轮播。Sencha Touch 2 有一个不错的功能，我使用其他人发布的解决方案对其进行了扩展以显示 HTML。然而，虽然 Sencha 很好，但为了简单起见，我宁愿不必结合 jQuery 和 Sencha 并保持有效负载轻等。

我的内容不适合基于图像的轮播，典型的用例可以是多页菜单，其中每个轮播页面映射到一个 html 文件。因此，理想情况下，可以使用一组文件名（或基本名称、页数，并使用插值填充）来调用轮播。

# html - IE 9 焦点围绕内容正确（！）而 Firefox 12.0 似乎没有

> ID：10560874
> 
> 赞同：0
> 
> 时间：2012-05-12T03:37:59.423
> 
> 标签：html, css, internet-explorer, firefox

当打开[http://mitchwillfixit.com/mbc/media.php](http://mitchwillfixit.com/mbc/media.php)然后切换到该页面上的可点击图片时，我在 IE 9 和 Firefox 12.0 中得到不同的结果。IE 9 正确地“环绕”图像，而 Firefox 12.0 以一种奇怪的方式环绕。如果您转到 media.php 页面并通过内容符号进行选项卡，您会明白我的意思。

链接打开得很好，但它让我很困扰 Firefox 如何围绕焦点图像。

有什么方法可以让 Firefox 像 IE 9 那样环绕这些图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:52:04.487

嗯，它正在发生，因为你拥有`text-indent: -9999px;`这三个`a`元素中的每一个。

如果这对您来说真的很重要，请选择一种不同的[图像替换技术](http://css-tricks.com/css-image-replacement/)。

# java - 检测对象是否存储状态或是否可以共享

> ID：10560875
> 
> 赞同：3
> 
> 时间：2012-05-12T03:38:17.850
> 
> 标签：java, caching, reflection, reference

我正在实现一个对象缓存：

```
void cache(String request_type, String request_id, ProcessingStrategy request_strategy) 
{ 
    if (no_state(request_strategy) == true)
       map.put(request_type, request_strategy);
    else
       map.put(request_id, request_strategy); //no chance of keyspace collision
}

ProcessingStrategy lookup(String request_type, String request_id)
{
    ProcessingStrategy request_strategy = map.get(request_type);
    if (request_strategy == null) return map.get(request_id)
    else return request_strategy;
} 
```

这种在特定类型的所有请求中实现的共享对象方案`interface ProcessingStrategy`只有在具体类中没有存储状态时才有效。

**方法怎么写`no_state`？**

我正在考虑检查是否所有成员字段都`final`使用反射就足够了：

```
for(Field f : request_strategy.getClass().getDeclaredFields())
    if(!Modifier.isFinal(f.getModifiers()))
        return false;
//even if all fields are final;
//how to check that they are not being initialized with differently in the ProcessingStrategy constructor? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:07:56.587

您正在尝试做的事情（检测任意对象的可变性），我认为做不到。即使可以，通过一些反思性的杂技，这似乎仍然是个坏主意。

如果您控制`ProcessingStrategy`接口或其实现者，也许您可​​以使用方法、`isStateless()`或子接口，`StatelessProcessingStrategy`按照惯例，它们可以跨请求共享。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T06:58:55.227

> 我正在考虑使用反射检查所有成员字段是否都是最终的就足够了

它不会。

如果成员字段是对数组或集合的最终引用怎么办。你怎么知道数组/集合是否是对象状态的一部分（按设计）？

问题是 Java 语言无法说明设计对象的概念边界在哪里……所以没有什么可以反思性地询问。

一个更好的主意可能是依靠代码的客户端使用自定义注释“声明”类是有状态或无状态的。

# magento - 在 Magento 中自动将上传的图像标签设置为产品名称？

> ID：10560876
> 
> 赞同：2
> 
> 时间：2012-05-12T03:38:22.857
> 
> 标签：magento

在 Magento 中，当我从目录 -> 管理产品 -> 添加产品创建产品时，在“图像”选项卡中上传图像后，我总是必须为每个图像输入标签文本，主要是复制产品名称并将其粘贴到每个产品中。

我的问题是，**在我上传图片后，Magento 有什么方法可以将图片标签自动填充为产品名称？**

到目前为止，我尝试将 JavaScript 添加到*/app/design/adminhtml/default/default/template/catalog/product/edit.phtml*的末尾，以便标签输入文本获取 <input id="name" /> 的值，但是它不起作用，因为在页面加载时未加载标签输入，但仅在图像上传后加载...

知道我能完成这个吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:03:13.527

为什么不直接编辑显示图像的模板文件以将图像标签设置为产品名称？

/app/design/frontend/base/default/template/catalog/product/view/media.phtml 应该是您必须修改才能实现的文件。（路径可能因您的 Magento 配置而异）

# facebook - Wordpress 发布到 Facebook 和 Twitter

> ID：10560877
> 
> 赞同：-1
> 
> 时间：2012-05-12T03:38:27.587
> 
> 标签：facebook, wordpress, twitter, integration

因此，过去一周我一直在绞尽脑汁，试图让 wordpress 自动发布到 Facebook 和 Twitter。

我创建了一个 facebook 页面（只是一个没有链接到任何个人资料的唯一页面）和一个 twitter 帐户。

我试过使用 ping.fm 和 ping.fm wordpress 插件。要发布，我必须进入 wordpress 并手动发布 ping.fm 帖子，然后将其发送到它的 facebook/twitter。Twitter 工作，facebook 没有，尝试了一切——它无法链接到 facebook 粉丝页面。2小时后我放弃了。

有没有人有任何其他建议可以将我的 wordpress 帖子链接（如果可能，自动链接）到 facebook 粉丝页面（时间线）和 twitter？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T03:44:47.183

您可以使用以下在线工具，这些工具将从您的博客发布到 Facebook。

*   [http://www.rssgraffiti.com/](http://www.rssgraffiti.com/)
*   [http://www.networkedblogs.com/](http://www.networkedblogs.com/)

除此之外，您还可以设置您的 Facebook 页面以将其自动发布到 Twitter。因此，当您将新文章发布到 Facebook 时，工作流程将是博客 -> RSSGraffiti/Networkedblogs -> Facebook -> Facebook 自动发布功能到 Twitter -> Twitter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T10:40:33.943

是的，将 WordPress 帖子中的内容自动发布到社交媒体的方法不止一种。

我建议您查看以下自动发布选项之一

1.  一键转发/分享/喜欢 - 它会自动将您的 WordPress 帖子发布到社交媒体，并在您的帖子上提供喜欢/分享按钮。
2.  Jetpack Publicize - 自动将 WordPress 帖子发布到社交媒体
3.  NextScripts：社交网络 Auto-Poster - 自动将 WordPress 帖子发布到社交媒体
4.  Dlvr.it - 一个 3d 派对，它会自动获取您的 RSS 提要并将其发布到社交媒体。

这些只是几种方法，我相信搜索网络会给你更多的选择。

如果您需要有关自动发布的更多信息，可以阅读此[博客文章。](http://tribulant.com/blog/wordpress/how-to-post-from-wordpress-to-social-networks/)

# jquery-ui - jQuery UI 结合了单击淡入淡出和悬停淡入淡出不能一起工作

> ID：10560879
> 
> 赞同：3
> 
> 时间：2012-05-12T03:38:47.593
> 
> 标签：jquery-ui, hover

我有两种相互独立工作的淡入淡出，但是一旦触发悬停淡入淡出，点击淡入淡出就会停止工作。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js">
    /*window.onload = function(){alert("welcome");}*/
</script>

<style>
body {
    text-align:center
}

#container {
    width:660px;
    margin: 0 auto;
    border-width: 0 2px 2px 2px;
    border-style: solid;
    border-color:#CCCCCC;
    overflow:auto;
    padding: 0 5px 5px 5px;
}

div.mainSize {
    width:100px;
    height:100px;
    margin:5px;
    position:relative;
    float:left;
}

div.verticalBox {
    width:100px;
    height:210px;
    padding:5px;
}

div.horizBox {
    width:210px;
    height:100px;
    padding:5px;
}

div.mainSizegreen {
    background-color:#006600;
    width:100px;
    height:100px;
    margin:5px;
    position:relative;
    float:left;
}

div.mainSizered {
    background-color:#FF0000;
    width:100px;
    height:100px;
    margin:5px;
    position:relative;
    float:left;
}

div.mainSizeblue {
    background-color:#0000FF;
    width:100px;
    height:100px;
    margin:5px;
    position:relative;
    float:left;
    /*opacity:0.2;
    filter:alpha(opacity=20);*/
}

div.navigation {
    text-align:center;
    width:500;
    margin-bottom:20px;
}

a.viewBlue{
    color:#000099;
}

a.viewGreen{
    color:#006600;
}

a.viewRed{
    color:#FF0000;
}

.Opac20 {
    filter:alpha(opacity=30);  // IE
    -moz-opacity:0.3;          // Firefox
    -khtml-opacity: 0.3;       
    opacity: 0.3; 
}
</style>

</head>

<body>
    <div id="container">
        <div class="navigation">
            <p><span class="viewBlue">View Blue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="viewRed">View Red</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span class="viewGreen">View Green</span></p>
        </div>
        <div class="mainSizegreen">        </div>
        <div class="mainSizered">        </div>
        <div class="mainSizeblue">        </div>
        <div class="mainSizered">        </div>
        <div class="mainSizegreen">        </div>
        <div class="mainSizeblue">        </div>
        <div class="mainSizeblue">        </div>
        <div class="mainSizegreen">        </div>
        <div class="mainSizered">        </div>
        <div class="mainSizegreen">        </div>
        <div class="mainSizeblue">        </div>
        <div class="mainSizered">        </div>
        <div class="mainSizegreen">        </div>
        <div class="mainSizered">        </div>
        <div class="mainSizeblue">        </div>
        <div class="mainSizered">        </div>
        <div class="mainSizegreen">        </div>
        <div class="mainSizeblue">        </div>
        <div class="mainSizeblue">        </div>
        <div class="mainSizegreen">        </div>
        <div class="mainSizered">        </div>
        <div class="mainSizegreen">        </div>
        <div class="mainSizeblue">        </div>
        <div class="mainSizered">        </div>

    </div>
<script>
$(document).ready(function(){

   $("span.viewBlue").click(function(){
     if($("div.mainSizered:first").hasClass("Opac20") && $("div.mainSizegreen:first").hasClass("Opac20")){
         $("div.mainSizered").stop(true, true).toggleClass("Opac20", 1000);
         $("div.mainSizegreen").stop(true, true).toggleClass("Opac20", 1000);

     }
     else{
         $("div.mainSizered").stop(true, true).addClass("Opac20", 1000);
         $("div.mainSizegreen").stop(true, true).addClass("Opac20", 1000);
         $("div.mainSizeblue").addClass("Opac20");

         $("div.mainSizeblue").toggleClass("Opac20");
     } 
   });

   $("span.viewGreen").click(function(){
     if($("div.mainSizered:first").hasClass("Opac20") && $("div.mainSizeblue:first").hasClass("Opac20")){
         $("div.mainSizered").stop(true, true).toggleClass("Opac20", 1000);
         $("div.mainSizeblue").stop(true, true).toggleClass("Opac20", 1000);

     }
     else{
         $("div.mainSizered").stop(true, true).addClass("Opac20", 1000);
         $("div.mainSizegreen").addClass("Opac20");
         $("div.mainSizeblue").stop(true, true).addClass("Opac20", 1000);

         $("div.mainSizegreen").toggleClass("Opac20");
     }
   });

   $("span.viewRed").click(function(){
     if($("div.mainSizeblue:first").hasClass("Opac20") && $("div.mainSizegreen:first").hasClass("Opac20")){
         $("div.mainSizeblue").stop(true, true).toggleClass("Opac20", 1000);
         $("div.mainSizegreen").stop(true, true).toggleClass("Opac20", 1000);

     }
     else{
         $("div.mainSizered").addClass("Opac20");
         $("div.mainSizegreen").stop(true, true).addClass("Opac20", 1000);
         $("div.mainSizeblue").stop(true, true).addClass("Opac20", 1000);

         $("div.mainSizered").toggleClass("Opac20");
     }
   });

   // THIS IS FOR HOVERING WITH TRANSITION A DIV  
   $("div.mainSizeblue").hover(
     function(){
         $("div.mainSizeblue").stop(true, true).animate({"opacity": "1"}, "slow");
         $("div.mainSizered").stop(true, true).animate({"opacity": "0.4"}, "slow");
         $("div.mainSizegreen").stop(true, true).animate({"opacity": "0.4"}, "slow");
     },
     function(){
         $("div.mainSizered").stop(true, true).animate({"opacity": "1"}, "slow");
         $("div.mainSizegreen").stop(true, true).animate({"opacity": "1"}, "slow");

   });

   $("div.mainSizegreen").hover(
     function(){
         $("div.mainSizeblue").stop(true, true).animate({"opacity": "0.4"}, "slow");
         $("div.mainSizered").stop(true, true).animate({"opacity": "0.4"}, "slow");
         $("div.mainSizegreen").stop(true, true).animate({"opacity": "1"}, "slow");
     },
     function(){
         $("div.mainSizered").stop(true, true).animate({"opacity": "1"}, "slow");
         $("div.mainSizeblue").stop(true, true).animate({"opacity": "1"}, "slow");

   });

   $("div.mainSizered").hover(
     function(){
         $("div.mainSizeblue").stop(true, true).animate({"opacity": "0.4"}, "slow");
         $("div.mainSizered").stop(true, true).animate({"opacity": "1"}, "slow");
         $("div.mainSizegreen").stop(true, true).animate({"opacity": "0.4"}, "slow");
     },
     function(){
         $("div.mainSizeblue").stop(true, true).animate({"opacity": "1"}, "slow");
         $("div.mainSizegreen").stop(true, true).animate({"opacity": "1"}, "slow");

   });

 });

</script>
</body>
</html> 
```

如果您确保不将鼠标悬停在任何颜色方块上，则顶部的文本在您单击它时会起作用。如果您单击“查看蓝色”，它将使除蓝色以外的所有内容褪色至 30% 的不透明度。再次单击它，它会将所有内容淡化为 100% 不透明度。当您将鼠标悬停在彩色方块上时也会发生同样的情况，但是当您再次尝试使用该文本时，它将不起作用。

任何想法为什么会发生这种情况？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:17:05.093

您的问题是您正在混合使用通过 CSS 类应用的规则并设置`style`您正在着色的 DOM 节点的属性。

你的悬停代码设置了阴影块，点击代码设置了一个有规则`style: opacity`的 CSS 类。`opacity`

当 CSS 规则和`style`属性同时存在时，`style`属性将具有更多的特异性并成为生效的属性。因此，一旦您将鼠标悬停在一个块上并`style`设置了属性，CSS 规则可以覆盖的唯一方法就是使用`!important`. 进行此更改会使您的演示工作。

```
.Opac20 {
    filter:alpha(opacity=30) !important;  // IE
    -moz-opacity:0.3 !important;          // Firefox
    -khtml-opacity: 0.3 !important;       
    opacity: 0.3 !important; 
}​ 
```

这里有一个活生生的例子 - [http://jsfiddle.net/Ds6MF/2/](http://jsfiddle.net/Ds6MF/2/)。

话虽如此，使用`!important`不是一个好的做法，应尽可能避免。在这种情况下，您应该将您的应用程序切换为使用 CSS 类或`style`使用不透明度值设置属性，而不是两者兼而有之。

# asp.net-mvc - 在 ASP.NET MVC 中下载动态生成的文件

> ID：10560880
> 
> 赞同：10
> 
> 时间：2012-05-12T03:38:52.807
> 
> 标签：asp.net-mvc

我需要在 ASP.NET MVC 中实现文件下载。在网上搜索，我发现了这样的代码：

```
public ActionResult GetFile()
{
    return File(filename, "text/csv", Server.UrlEncode(filename));
} 
```

很好，但我想动态创建这个文件的内容。

我意识到我可以动态创建文件，然后使用上面的语法下载该文件。但是，如果我可以简单地将我的内容直接写入响应，那不是更有效吗？这在 MVC 中可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-12T04:51:34.707

这是我最终使用的代码的过度简化版本。它满足我的需求。

```
[HttpGet]
public ActionResult GetFile()
{
    Response.Clear();
    Response.AddHeader("Content-Disposition", "attachment; filename=myfile.csv");
    Response.ContentType = "text/csv";

    // Write all my data
    Response.Write(...);
    Response.End();

    // Not sure what else to do here
    return Content(String.Empty);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-05T15:08:40.673

另一种解决方案是使用接受流的 File() 的重载。

就我而言，它是我需要从控制器操作生成的 csv，所以它有点像这样：

```
[HttpGet]
public ActionResult DownloadInvalidData(int fileId)
{
    string invalidDataCsv = this.importService.GetInvalidData(fileId);
    string downloadFileName = "error.csv";

    var stream = new MemoryStream();
    var writer = new StreamWriter(stream);

    writer.Write(invalidDataCsv);
    writer.Flush();
    stream.Position = 0;

    return File(stream, "text/csv", downloadFileName);
} 
```

请注意，您不应**在**将 Stream 或 StreamWriter 传递给 File() 函数之前将其处理掉，因为处理任何一个都会关闭流，使其无法使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T05:03:55.417

如果您想将其作为文件下载，那么您可以`ActionResult`按照@Tungano 的建议尝试自定义，否则如果您想直接进入响应，那么内置的`ContentResult`就可以，但它可以使用简单的字符串，并且在复杂的场景中您必须延长它。

```
public class CustomFileResult : FileContentResult
{
  public string Content { get; private set; }

  public string DownloadFileName { get; private set; }

  public CustomFileResult(string content, string contentType, string downloadFileName)
    : base(Encoding.ASCII.GetBytes(content), contentType)
  {
    Content = content;
    DownloadFileName = downloadFileName;
  }

  public override void ExecuteResult(ControllerContext context)
  {
    context.HttpContext.Response.AppendHeader("Content-Disposition", "attachment; filename=" + DownloadFileName);

    base.ExecuteResult(context);
  }
}

public class BlogController : Controller
{
  public ActionResult Index()
  {
    return View();
  }

  public CustomFileResult GetMyFile()
  {
    return CustomFile("Hello", "text/plain", "myfile.txt");
  }

  protected internal CustomFileResult CustomFile(string content, string contentType, string downloadFileName)
  {
    return new CustomFileResult(content, contentType, downloadFileName);
  }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-12T03:47:30.587

我很确定这就是 FileStreamResult 的作用。但是，如果您不想使用它，只需将其写入响应即可。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-12T04:06:43.007

您可以直接写入 Response.OutputStream ，类似于流式传输到文件的方式。为了保持它的可测试性和 MVC 风格，您可以创建自己的 ActionResult 类，该类对您传递的模型对象进行流式传输。

# java - 伪造编程语言的正则表达式

> ID：10560884
> 
> 赞同：3
> 
> 时间：2012-05-12T03:39:52.620
> 
> 标签：java, regex, tokenize, lexical-analysis

我有一个任务是创建一个词法分析器，将语言翻译成一系列标记。我正在使用 java.util.regex 通过一个字符串来查找不同的标记，然后将它们放入一个数组中，我将通过该数组为它们分配各自的标记。这是我的程序的一部分：

```
public static void main(String args[]) throws FileNotFoundException, IOException{

        String[] symbols = {"+","-","*","/","<","<=",">",">=","==","!=","=",";",",",".","(",")","[","]","{","}","/*","*/","//"};
        String[] input;
        FileInputStream fstream = new FileInputStream("src\\testCode.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
        StringBuilder sb = new StringBuilder();
        String s;
        String ret = "";
        while((s = br.readLine()) != null){
            sb.append(s);
        }

        ret = sb.toString();

        input = regexChecker("regex goes here",ret);

        for (int i = 0; i < input.length; i++) {
            System.out.println(input[i]);

        }
        System.out.println(input.length);
        in.close();       
    }  

public static String[] regexChecker(String theRegex, String str2Check){
         List<String> allMatches = new ArrayList<String>();
        Pattern checkRegex = Pattern.compile(theRegex);
        Matcher regexMatcher = checkRegex.matcher(str2Check);

        while(regexMatcher.find()){
            //regexInput = new String[regexMatcher.group().length()];
            allMatches.add(regexMatcher.group());
        }
        String[] regexInput = allMatches.toArray(new String[allMatches.size()]);

        return regexInput;
    } 
```

我的问题是：是否有一个正则表达式可以分隔这种语言？或者我是否通过尝试只使用一个正则表达式来完成我的任务？一些词汇约定是：标识符以小写字母或下划线的大写开头，后跟任何单词字符。允许使用注释行和块。数字是十进制的无符号整数或实数。并且有 int、double、if 等关键字和 *、/、+ 等特殊符号。

我可以为每个单独的约定制作正则表达式，但我不确定如何将它们组合成 1，正如我的程序需要的那样。

我也将`(?://.*)|(/\\*(?:.|[\\n\\r])*?\\*/)`其用作评论的正则表达式，但它似乎不适用于评论行，仅适用于评论块。将文件读入单行字符串的方式可能是原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:16:07.590

您也许可以使用，[`java.util.StringTokenizer`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/StringTokenizer.html)但在许多情况下，这不够灵活。

当然，您可以编写自己的标记器。这并不像听起来那么难，一旦你自己做了。有些人会告诉你应该改用工具/库，但我大多数人说这样做是因为他们在学校就这样学过，并且在编写/维护标记器和解析器。有很多开源的手写标记器和解析器，例如[JSON/JSOP Tokenizer](http://svn.apache.org/repos/asf/jackrabbit/oak/trunk/oak-mk/src/main/java/org/apache/jackrabbit/mk/json/JsopTokenizer.java)、[JCR XPath Parser](http://svn.apache.org/repos/asf/jackrabbit/oak/trunk/oak-core/src/main/java/org/apache/jackrabbit/oak/query/XPathToSQL2Converter.java)、[JCR SQL-2 Parser](http://svn.apache.org/repos/asf/jackrabbit/oak/trunk/oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T03:57:15.657

我推荐下载[TinyPG](http://www.codeproject.com/Articles/28294/a-Tiny-Parser-Generator-v1-2)。它是一个微型解析器生成器，支持类似于 EBNF（扩展巴科斯-瑙尔形式）的语法语言。它适用于 C#/VB，但基本的语法定义应该教会你很多关于解析器的知识。如果您了解 C# 或 VB，则可以检查生成的解析器以了解有关创建自己的解析器的一些想法。

# objective-c - 从弱链接的 iOS 类或不在部署目标 iOS 版本中的类继承

> ID：10560885
> 
> 赞同：1
> 
> 时间：2012-05-12T03:39:53.153
> 
> 标签：objective-c, ios, inheritance, properties, weak-linking

我的代码中有一个类（我们称之为 myRefLib），它继承自 UIReferenceLibraryViewController（UIKit 框架的一部分），这是一个仅在 iOS 5 及更高版本中可用的类。我想要一个 iOS 3.2 的部署目标。

如果我只是创建 UIReferenceLibraryViewController 的实例，我知道我可以使用 5 的基本 SDK，然后在运行包含它的任何代码之前使用 [UIReferenceLibraryViewController 类] 测试该类是否存在。但是，如果我是从类继承的，我该怎么做呢？

问题是我必须为将使用它的代码部分#include 继承类 myRefLib - 但没有办法在运行时有条件地这样做。或者，也没有运行时有条件地从 myRefLib 中的 UIReferenceLibraryViewController 继承的方法。我还想让 myRefLib 的一个实例成为另一个类的属性 - 同样，我怎样才能有条件地执行该运行时？

非常感谢任何帮助...

D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:27:18.997

Well, first of all, you have know what you're going to do when running on the earlier OS. Basically, you have to write your code as though you were building against the iOS 3.2 SDK. Only then can you add optional enhancements using the newer features.

Starting with the easiest thing: you don't need a declaration of a class interface in order to declare variables, including instance variables, as pointers to that class. You just need a forward declaration:

```
@class SomeClass;
SomeClass* foo; 
```

Next, there should be no problem with importing a header which defines your class. That's a compile-time thing, which you seem to think is a problem, but which means it's not affected by the runtime environment. It will compile because you're building against the iOS 5.0 SDK.

The thing you have to be careful of is to not **use** the class if it's not available. You already know how to check that: test if `[SomeClass class]` returns `Nil`. If it does, don't instantiate your custom subclass.

Finally, you mention "runtime conditionally inheriting from UIReferenceLibraryViewController in myRefLib". Why do you think you need to do that? If `UIReferenceLibraryViewController` is not available, then it doesn't make much sense to want to use `myRefLib` which subclasses it. If you have some alternative implementation in mind that doesn't depend on `UIReferenceLibraryViewController`, then make a separate class. Then conditionally pick between `myRefLib` and this other class depending on availability.

# css - css 可根据列是否存在一组规则来处理动态 1、2、3 列布局

> ID：10560886
> 
> 赞同：2
> 
> 时间：2012-05-12T03:40:02.057
> 
> 标签：css, xhtml, xhtml-1.0-strict

# 笔记：

`display:table-cell;`在某些情况下，顶部有空间的元素不是填充或边距，`border-collapse:collapse;`也不能修复它。您还需要使用`vertical-align:text-top;`. [另一个用户对这个问题的提问](https://stackoverflow.com/questions/4995762/display-table-cell-contents-and-padding)。

# 原始问题

我用 php 创建了我的模板文件，并且根据是否有 1、2 或 3 列，对列使用了 3 组不同的 css 规则。我想知道我是否可以让一组规则起作用。

php思路一瞥

```
if($this->_data['left']!=NULL)
    echo "<div id='left'>{$this->left}</div>";
if($this->_data['right']!=NULL)
    echo "<div id='right'>{$this->right}</div>";
echo "<div id='content'>{$this->main}</div>"; 
```

`#left`并且`#right`将是固定的宽度和左右。将`#main`在中心并用完其余的`#wrappers`宽度。所以如果没有一个`#right`，`#main`就会填满本来应该有的空间`#right`。

```
<!-- 3 column -->
<div id='container'>
    <div id='left'></div>
    <div id='main'></div>
    <div id='right'></div>
</div>

<!-- 2 column -->
<div id='container'>
    <div id='left'></div>
    <div id='main'></div>
</div>
<!-- or -->
<div id='container'>
    <div id='main'></div>
    <div id='right'></div>
</div>

<!-- 1 column -->
<div id='container'>
    <div id='main'></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:47:56.487

您可以为此使用 display:table 属性。像这样写：

```
#container{
    display:table;
    width:100%;
}
#container > div{
    display:table-cell;
    height:50px;
}
#left, #right{
    width:100px;
    background:red;
}
#right{
    background:green;
}
#main{
    background:blue;
} 
```

检查这个[http://jsfiddle.net/HXaPR/](http://jsfiddle.net/HXaPR/)

# php - 如何使用正则表达式区分不同格式的 img 封闭标签？

> ID：10560887
> 
> 赞同：1
> 
> 时间：2012-05-12T03:40:25.210
> 
> 标签：php, regex

我想使用 php + regex 表达式区分以下 2 个 html 标签。我该怎么做。

```
<a href="/"><img src="/nyp/slot/u100/style/homepage/logo.jpg" alt="" hspace="2"/> 
```

和

```
<a href="/"><img src="/nyp/slot/u100/style/homepage/logo.jpg" alt="" hspace="2" /> 
```

请注意，第二个 html img 选项卡在关闭之前有一个“空格”。

感谢任何专家的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:23:53.413

```
<img[^>]*[^\s]/> 
```

以上将匹配字符前*没有*空格的img 标签。`/`所以它会匹配这样的 img 标签：`<img src="" alt=""/>`

# android - 为什么角（半径）不能不同？

> ID：10560890
> 
> 赞同：2
> 
> 时间：2012-05-12T03:40:37.537
> 
> 标签：android

我试图：

```
<corners 
 android:bottomRightRadius="0dp"
 android:bottomLeftRadius="0dp"
 android:topLeftRadius="10dp"
 android:topRightRadius="10dp"/> 
```

没有拐角半径。

```
<corners 
 android:bottomRightRadius="1dp"
 android:bottomLeftRadius="1dp"
 android:topLeftRadius="10dp"
 android:topRightRadius="10dp"/> 
```

所有角半径 == 10dp。

是否有可能以及如何指定角：10dp（左上）10dp（右上）0 0（下）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-25T01:07:43.147

在 Android 开发者[http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

说这注：必须（最初）为每个角提供大于 1 的角半径，否则不会圆角。如果您希望特定角不被圆角，解决方法是使用 android:radius 将默认角半径设置为大于 1，然后用您真正想要的值覆盖每个角，提供零（“0dp” ) 你不想要圆角的地方。

如果你执行你的代码，即使有预览警告它也会看起来很好，我认为这是一个错误或类似的东西。这是我写的：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/brown_light"/>
        <corners
            android:topLeftRadius="0dp"
            android:topRightRadius="0dp"
            android:bottomLeftRadius="30dp"
            android:bottomRightRadius="30dp"
            />

</shape> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T05:03:25.120

这是我实际的可绘制（形状）XML 文件。是的，可以有不同的尺寸，如您的要求。这是 XML 代码：

```
<gradient
    android:startColor="#696969"
    android:endColor="#a2a2a2"
    android:angle="90"  >
</gradient>

<padding
    android:left="5dp"
    android:top="5dp"
    android:right="5dp"
    android:bottom="5dp"    >
</padding>

<corners
    android:radius="10dp"
    android:bottomLeftRadius="0dp"
    android:bottomRightRadius="0dp" >
</corners> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T03:56:50.980

```
<corners android:radius="1dp"
  android:bottomRightRadius="0dp" android:bottomLeftRadius="0dp" 
  android:topLeftRadius="5dp" android:topRightRadius="5dp"/> 
```

试试上面的代码，它将左上角和右上角设置为 5 DP

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-26T05:16:47.420

你可以这样做

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
        <shape android:shape="rectangle" >
            <solid android:color="#000000" />

            <corners android:radius="8dp" />
        </shape>
    </item>
    <item android:top="8dp">  <!-- the distance to top -->
        <shape android:shape="rectangle" >
            <solid android:color="#000000" />
        </shape>
    </item>

</layer-list> 
```

# ruby - 命令设计模式的组合

> ID：10560892
> 
> 赞同：3
> 
> 时间：2012-05-12T03:40:50.167
> 
> 标签：ruby, oop, design-patterns, ooad

有没有人在 Ruby 中有一个使用命令组合的好例子？它是我在各种设计模式文献中看到的一种设计模式混合体，听起来很强大，但找不到任何有趣的用例或代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:16:50.217

受此[博客文章中的一般思想和示例模式实现的](http://blog.ashwinraghav.com/2011/03/14/design-patterns-in-ruby-composite-iterator-commandpart-2/)启发，下面简要介绍一下它的外观：

```
class CompositeCommand
  def initialize(description, command, undo)
    @description=description; @command=command; @undo=undo
    @children = []
  end
  def add_child(child); @children << child; self; end
  def execute
    @command.call() if @command && @command.is_a?(Proc)
    @children.each {|child| child.execute}
  end
  def undo
    @children.reverse.each {|child| child.undo}
    @undo.call() if @undo && @undo.is_a?(Proc)
  end
end 
```

以及使用软件安装程序应用程序的示例用法：

```
class CreateFiles < CompositeCommand
  def initialize(name)
    cmd = Proc.new { puts "OK: #{name} files created" }
    undo = Proc.new { puts "OK: #{name} files removed" }
    super("Creating #{name} Files", cmd, undo)
  end
end

class SoftwareInstaller
  def initialize; @commands=[]; end
  def add_command(cmd); @commands << cmd; self; end
  def install; @commands.each(&:execute); self; end
  def uninstall; @commands.reverse.each(&:undo); self end
end

installer = SoftwareInstaller.new
installer.add_command(
  CreateFiles.new('Binary').add_child(
    CreateFiles.new('Library')).add_child(
    CreateFiles.new('Executable')))
installer.add_command(
  CreateFiles.new('Settings').add_child(
    CreateFiles.new('Configuration')).add_child(
    CreateFiles.new('Preferences')).add_child(
    CreateFiles.new('Help')))
installer.install # => Runs all commands recursively
installer.uninstall 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:22:59.910

我正在尝试自己理解这种模式，并且一直在考虑可能以这种方式建模的东西。

复合模式的基本思想是在某些情况下需要以相同的方式处理项目和集合。集合可能包含项目和子集合的混合，嵌套尽可能深。

我有一些想法（从[Design Patterns in Ruby](http://designpatternsinruby.com/)和[Ruby Under a Microscope](http://patshaughnessy.net/ruby-under-a-microscope)中借用一些）：

## 文件系统

您可以询问文件的大小，它会返回一个简单的值。您还可以询问文件夹的大小，它会返回其文件和子文件夹大小的总和。子文件夹当然会返回其文件和子文件夹的总和。

同样，文件和文件夹都可以移动、重命名、删除、备份、压缩等。

## 一个系统命令

命令对象可以有一个`run`方法。该方法可以通过运行任意数量的子命令来工作，这些子命令具有子命令等。如果它的所有子命令都返回 true，它可以返回 true，并且可以根据其子命令的统计信息（经过的时间、文件修改等）报告统计信息。

## 公司层次结构

个人、团队、部门和整个公司都可以被视为有薪水、带来收入、完成工作单元等。

## 一个军事单位

在游戏中，士兵可以拥有防御和进攻统计数据，可以被告知移动到某个位置，攻击基地等。团和师可以以同样的方式对待。

## 重量或货币价值

装满箱子的卡车的重量包括每个箱子的重量。每个箱子的重量包括它的每个物品的重量，它们的零件等。

同样，金融投资组合的货币价值是其所有资产的价值。其中一些资产可能是包含多只股票的指数基金。您可以买卖单个股票或整个投资组合。

## 图形用户界面元素

一个窗口可以由框架组成，框架由框架组成，框架由框架组成。任何元素都可以定位、着色、聚焦、隐藏等。

## 编程语言中的表达式

当 Ruby 解释器评估一个表达式时，它通过将它分解为一个表达式树（抽象语法树）并评估每个表达式，然后通过返回树的顶部来得出最终值。从某种意义上说，树的每一层都被问到同一个问题：“你的价值是什么？”

举个简单的例子，求 的值的第一步`((4 + 8) * 2)) + 9`是求 的值`4 + 8`。

# android - 加载大约百万项的 Listview

> ID：10560897
> 
> 赞同：0
> 
> 时间：2012-05-12T03:42:52.183
> 
> 标签：android

现在，我必须做标题的工作。listview 中的每个项目都相当复杂，它包含从 Internet 加载的 5 个图像。我认为使用延迟加载但从 Internet 加载的数据非常大（百万项），所以这种方式不合理.. 我也认为其他方式。在滚动列表视图之前，我将加载下面的项目这是我的想法。但我没有进展通过代码。

你有没有做到这一点。帮帮我。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T05:45:36.993

如果我认为正确，那么您想从列表视图中删除行。但在那之后，您需要再次从互联网下载您的数据。我不认为这是一个好主意。而且我也不认为它会影响listview。每次滚动列表视图时，它都会重新膨胀您的行视图并在其上设置数据。因此，如果您要从数组列表或数组中删除数据，它将删除该行。

```
public my_custom_adapter(Context context, int type, String[]  elements)
{
    super(context, type, elements);
    this.elements =  elements;
    this.context = context;
} 
```

在上面的示例中，my_custom_adapter 是扩展 arrayadapter 的适配器。如果您查看超级构造函数，那么我将元素作为字符串数组传递。要从列表视图中删除一行，您可以做的是从“元素”中删除元素，然后调用

notifyDataSetChanged();

这将从您的列表视图中减少一行。

希望对你有帮助。。

# node.js - Node.js 服务器端代码保护

> ID：10560902
> 
> 赞同：6
> 
> 时间：2012-05-12T03:43:37.077
> 
> 标签：node.js, protection

我正在使用 node.js 开发我的下一个 Web 应用程序。以 ASP.net 为例，无法从客户端浏览器访问 .cs 服务器端代码。我想知道的是，当我使用 node.js 开发我的应用程序时，server.js 文件是否受到保护，不受浏览我网站的人的影响。我的意思是我不希望我网站的访问者访问 .js 服务器端代码。我可以使用 CHMOD 文件权限来保护这些文件吗，会有帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T04:05:29.173

如果您使用 Express.js 作为 Web 服务器，您有一个“公共”文件夹，您可以在其中放置直接提供的静态文件。在该文件夹之外，您还有其他同级文件夹，您可以在其中保存您的代码，例如“控制器”和“模型”。您无法通过 Web 浏览器导航到这些文件夹之一，因此无法访问它们，因为您的 Web 服务器的文档根目录是“公共的”。

```
project_root/
  - app.js
  - public/      <-- web root
    - javascripts/
    - stylesheets/
    - images/
    - some_static_page.html
  - controllers/
  - models/
  - routes/
  - views/
  - node_modules/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T15:33:00.360

并不是因为 Node.js 使用 Javascript，您的文件才能在浏览器中神奇地访问。在 Node.js 中，就像在 Asp.net 中一样，客户端和服务器端之间存在差异。如果您不向客户端提供您的 Javascript 文件，那么它们将不会公开。

# javascript - 在 html 选择标签中，如何更改封闭选项标签的部分文本的样式？

> ID：10560905
> 
> 赞同：-5
> 
> 时间：2012-05-12T03:44:33.417
> 
> 标签：javascript, jquery, html, css

给定以下 HTML 代码：

```
<select>
  <option>yellow</option>
  <option>red</option>
  <option>blue</option>
</select> 
```

例如，更改文本“蓝色”中第二个字符的颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:55:05.863

我不相信目前有办法在 CSS 或 (X)HTML 中做到这一点。正如“DaneSoul”所指出的，您可以`<option>`自己设置 s 的样式，但不能单独设置其中文本的不同部分的样式。

`<option>`标记不能有除文本节点以外的任何子**节点。**

[这个问题/答案](https://stackoverflow.com/questions/3354979/styling-part-of-the-option-text)有更多信息，证实了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:24:26.960

The only way this could be done is to create your own drop down list with DIVs, SPANs, perhaps a UL or two, and a bit of JavaScript (something like a CSS dropdown navigation menu cxould work too I suppose) then use JavaScript to set the value to be sent for your form.

Probably more work than it's worth.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T03:53:44.940

```
<select>
  <option id='option1'>yellow</option>
  <option id='option2'>red</option>
  <option id='option3'>blue</option>
</select> 
```

然后在 CSS 中添加样式

```
#option3{ color: blue; } 
```

如果需要动态执行，可以使用 JQuery：

```
$("#option3").css("color", "blue"); 
```

# c - 避免 GLib 内存池和 Valgrind 可能在 C 中丢失

> ID：10560910
> 
> 赞同：4
> 
> 时间：2012-05-12T03:46:24.677
> 
> 标签：c, memory-leaks, valgrind, glib

由于[**内存池**](https://stackoverflow.com/questions/4254610/valgrind-reports-memory-possibly-lost-when-using-glib-data-types) `(g_slice)`，我进入`possibly lost`了我的代码。我的问题是：我可以在我的代码中做些什么来避免泄漏，或者这纯粹是 GLib 问题吗？

所有这些都被报告为“可能丢失”。

```
==2552== 
==2552== 744 bytes in 3 blocks are possibly lost in loss record 6 of 8
==2552==    at 0x40235BE: memalign (vg_replace_malloc.c:694)
==2552==    by 0x402361B: posix_memalign (vg_replace_malloc.c:835)
==2552==    by 0x408693E: ??? (in /usr/lib/libglib-2.0.so.0.1600.6)
==2552==    by 0x4088112: g_slice_alloc (in /usr/lib/libglib-2.0.so.0.1600.6)
==2552==    by 0x405B503: ??? (in /usr/lib/libglib-2.0.so.0.1600.6)
==2552==    by 0x804876C: add_inv (in /home/user/a.out)
==2552==    by 0x8048818: main (in /home/user/a.out) 
```

* * *

```
#include <glib.h>
static GHashTable *hashtable1;
static GHashTable *hashtable2;

int add_inv (char *a, char *b) {
  GHashTable *table = NULL;
  gpointer old_value;
  char *mykey = NULL;
  int i, plus, *pointer;

  for (i = 0; i < 2; i++)
    {
      if (i == 0)
        {
          table = hashtable1;
          mykey = a;
        }
      else if (i == 1)
        {
          table = hashtable2;
          mykey = b;
        }
      old_value = g_hash_table_lookup (table, mykey);
      if (old_value != NULL)
        {
          pointer = (int *) old_value;
          plus = *pointer + 10;
        }
      else
        plus = 10;

      pointer = g_malloc (sizeof (int));
      *pointer = plus;
      g_hash_table_replace (table, g_strdup (mykey), pointer);
    }
}

int main () {
  int i;
  hashtable1 = g_hash_table_new_full (g_str_hash, g_str_equal, (GDestroyNotify) g_free, g_free);
  hashtable2 = g_hash_table_new_full (g_str_hash, g_str_equal, (GDestroyNotify) g_free, g_free);

  for (i = 0; i < 20; i++)
    {
      char *a = g_strdup ("val1");
      char *b = g_strdup ("val2");
      add_inv (a, b);
      g_free (a);
      g_free (b);
    }
  g_hash_table_destroy (hashtable1);
  g_hash_table_destroy (hashtable2);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:45:40.627

设置 G_SLICE 环境变量以重新配置 GSlice 内存分配器。

```
G_SLICE=always-malloc ./your_application 
```

这是[GLib 文档](http://developer.gnome.org/glib/2.30/glib-running.html)的相关部分。

> 这将导致通过 g_slice_alloc() 分配并由 g_slice_free1() 释放的所有切片通过直接调用 g_malloc() 和 g_free() 实际分配。这对于使用 Bohem GC 类似算法产生更准确结果的内存检查器和类似程序最有用。它还可以与系统的 malloc 实现的调试功能（例如 glibc 的 MALLOC_CHECK_=2 ）结合来调试错误的分片分配代码，尽管调试块通常是更适合的调试工具。

# php - ROW_NUMBER() 与 INNER JOIN SQL Server 2008 分页

> ID：10560914
> 
> 赞同：0
> 
> 时间：2012-05-12T03:46:49.107
> 
> 标签：php, sql-server-2008, pagination

我正在尝试将两个表与 INNER JOIN 连接在一起，并使用 ROW_NUMBER 限制每页显示的结果数量：

```
$tsql = "SELECT *
FROM (SELECT ROW_NUMBER() OVER(ORDER BY productID) AS
rownum, * FROM products INNER JOIN product_catalogue ON products.catalogueID = product_catalogue.catalogueID
        WHERE category1 = '1') AS products1
WHERE rownum >= 0 AND rownum <= 6";

  $stmt = sqlsrv_query($conn,$tsql);

 while($row = sqlsrv_fetch_array($stmt)){ 
        echo $row['productID']. "<br/>";
         echo $row['product_name']. "<br/>";

  } 
```

我收到“sqlsrv_fetch_array() 期望参数 1 是资源”错误，并且我知道这与使用 INNER JOIN 的我有关，因为如果我在没有它的情况下运行查询，我的页面上会显示结果：

```
$tsql = "SELECT *
FROM (SELECT ROW_NUMBER() OVER(ORDER BY productID) AS
rownum, * FROM products ) AS products1
WHERE rownum >= 0 AND rownum <= 6"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:14:01.333

我猜你在谈论 MS SQL 服务器。我不会在 php 中编码，但您应该先检查以下内容：

1.  您的查询是否仅使用 SQL（SSMS 中的 MS SQL）
2.  您特定的列名，也许您有双重命名的列！例如，名为“id”的两列然后你的结果是相同的 2 倍，对于 SQL 来说没问题，但对于大多数数据库连接器驱动程序来说是个问题
3.  如果一切都不起作用，请进行查询（ CREATE QUERY qry_yourQuery AS ）然后使用 SELECT * FROM qry_yourQuery

# java - Eclipse 中的动态面板

> ID：10560915
> 
> 赞同：2
> 
> 时间：2012-05-12T03:47:18.147
> 
> 标签：java, eclipse, user-interface, tabs, docking

我需要使用 GUI 界面制作应用程序，并且我想从 eclipse 中获取一个主要概念。我想制作可以最小化、移动（交换）、调整大小、一次打开多个的动态面板。我可以用更少的编码来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T07:23:27.073

您正在寻找的是所谓的“对接框架”。谷歌有一个很大的清单。

显然，您可以使用[Eclipse RCP](http://wiki.eclipse.org/index.php/Rich_Client_Platform)来实现这样的功能，但是您必须使用 SWT 作为 GUI 框架。[Netbeans Platform](http://netbeans.org/features/platform/)类似于 Eclipse RCP，但用于 Swing。使用它的好处是您可以获得一个很好的桌面应用程序框架，尽管可能需要一些时间才能进入框架才能很好地使用它。

就个人而言，我在不久前开始的一个项目中使用了[VLDocking](https://github.com/cmadsen/vldocking)，对此我感到非常满意。我已经开发了一个 Swing 应用程序，并且非常容易集成所需的功能，这要归功于网站上的好教程。但遗憾的是，将不再开发 VLDocking（请参阅 vldocking 邮件列表）——希望它不会与 Java/Swing/OS 的未来版本中断。

如前所述，谷歌列出了更多。我上面提到的那些在我看来是免费的更好的。我试过的其他人有几个问题，例如，当临时打开一个最小化面板时，它在一个未装饰的窗口中打开，这使主窗口失去焦点，我不喜欢。

也有一些商业的，但我没有尝试过，所以我不能说太多。

# java - 2D游戏相机

> ID：10560922
> 
> 赞同：1
> 
> 时间：2012-05-12T03:48:34.237
> 
> 标签：java, camera, 2d, slick2d

我目前正在制作一个很棒的（在我看来）僵尸游戏，我需要知道制作相机的好方法。我正在使用 Slick2d 库和 MarteEngine for java。

我对java有点陌生，在真正深入swing之前直接跳进了一个库，所以这可能是缺乏图形知识。我在一篇教程中读到，您实际上无法在地图上移动游戏窗口，因此您需要移动地图和对象以使其看起来像相机在移动。

如果我这样做，它似乎会非常耗费资源。我必须遍历每个僵尸、幸存者、对象、hitbox 等来移动它们的坐标。我已经尝试过这种方法一次，但事情并没有真正以同样的速度发展。这可能是由于我以不同的更新速度处理它。

我已经看到了一些关于使用 graphics.translate 的东西，但我并不真正理解它。所以.. 任何让相机移动的建议都很棒！提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T12:06:46.577

你绝对可以移动相机。请参阅[我对这个问题的回答，](https://stackoverflow.com/questions/9997006/slick2d-and-jbox2d-how-to-draw?answertab=votes#tab-top)解释如何移动相机，相对于所述相机渲染世界，以及有关如何执行此操作以及如何决定在相机移动时在屏幕上绘制**什么的其他有用提示。**

虽然完全可以使用`translate(x, y)`，但仅此一项并不能解决剪辑问题（如何知道在屏幕上绘制什么），而且也不是万能的。此外，当您考虑它时，平移表面和移动相机之间实际上并没有太大区别。这都是相对的，只要像素朝着正确的方向移动，你是“相对于世界移动相机”还是“相对于相机移动世界”并不重要——它们是基本相同的操作。

就 Swing 而言，[很高兴您没有从那里开始](https://stackoverflow.com/questions/7781040/java-graphics-stages-of-a-game)。Swing 专为具有窗口、菜单、按钮、复杂事件系统等的桌面应用程序而设计。出于多种原因，Swing 对游戏来说很糟糕，其中最重要的是渲染管道在 Swing 中的工作方式；这对于桌面应用程序来说很好，但对于需要实时和图形密集型的游戏和大多数类型的渲染来说却是一个绝望的深渊。这一切都很好，因为 Swing 并不是为解决游戏开发者的问题而构建的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T04:55:27.283

您可能正在寻找，是`translate(x, y)`的，类的方法`Graphics`。该方法在标准 Java Swing/AWT`Graphics`类和 Slick2D 版本中都可用，因此请记住，这不是 Slick2D 特定的功能。

translate 所做的是移动所有未来绘图操作的原点。这是什么意思？好吧，请记住，原点通常位于 (0, 0)。因此，在位置 (40, 50) 绘制一个点将绘制到屏幕位置 (40, 50)。但是，`translate()`移动此参考点，这反过来会影响所有其他绘图操作。

例如，这样做`translate(50, 60)`会将原点在 x 轴上向右移动 50 个像素，在 y 轴上向下移动 60 个像素（因为在计算机程序员中，较大的 y 值在屏幕上较低）。然后，在 (40, 50) 处绘制一个点实际上会在 (40 + 50, 50 + 60) 或 (90, 110) 处绘制到屏幕上。这就是使用的力量`translate()`。

完成绘图后，将原点移回 (0, 0) 通常是个好主意，否则事情可能会搞砸。但是，做`translate(0, 0)`不会完成这项任务，实际上根本不会做任何事情。这是因为 translate 方法将原点移动到*相对*点。相反，只需确保每次通话`translate(x, y)`，您都有另一个通话`translate(-x, -y)`。这将防止原点失控。

如果您想使用此方法让相机跟随您的一个实体，请务必注意您要使用该实体位置的负值来平移原点。例如，用位置向量 'pos' 跟随玩家：

```
g.translate(-player.pos.x, -player.pos.y);

// Render everything

g.translate(player.pos.x, player.pos.y); 
```

这是因为当玩家向右移动时，您希望背景向左移动，否则您将让所有东西都跟随玩家。

# php - 错误的 OO 架构，共享对象和依赖项？也许我在这里缺少设计模式？

> ID：10560925
> 
> 赞同：3
> 
> 时间：2012-05-12T03:48:53.613
> 
> 标签：php, oop, design-patterns

好的，我正在创建一个小型 PHP 应用程序。目前的结构是这样的：

```
$client = new AppName\Client;
$model = $client->getModel();
$model->getNode(); 
```

这里的一切都很美好。Client 负责通过 Socket 连接和运行命令到我构建的一个小型 C 应用程序。我只是在这里玩建筑。Client::getModel 返回一个模型实例。在 getModel 期间，我通过构造函数将 Client 注入到 Model 中。像这样的东西：

```
public function getModel()
{
    return new Model('parameter', $this);
} 
```

反过来...

```
// Model
public function __construct($param, Client $client)
{
    $this->setClient($client);
    // ...
} 
```

但是，在 Model::getNode 期间，我想返回一个 Node 实例。但是，与 getModel 不同，我不想再次注入 Client。但我不得不。现在，我正在这样做：

```
public function getNode()
{
    return new Node('parameter', $this->getClient());
} 
```

我确定这是不正确的。一定有我遗漏的东西......我理解并使用依赖注入，但我很确定依赖注入容器不会解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:02:50.270

看起来您忘记将客户端存储在 setClient() 内的模型中，或者您没有从 getClient() 返回它

如果您发布 setClient() 和 getClient() 的代码，我可以验证这一点。

```
setClient($client){
    $this->client = $client;
}

getClient(){
    return $this->client;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:30:11.667

我无法真正谈论您的整个设计，因为您没有发布大部分内容，但我认为您缺少一个模式。核心 OO 设计原则之一是您不向对象询问数据/对象然后对该数据/对象进行操作，而是要求对象为您做某事-也许只是为了简洁而编辑了该部分，但是您可能要考虑减少“获取”。

为了在我自己的设计中强制执行此操作，我从不在第一遍创建 setter 和 getter（嗯，我几乎从不创建 setter）。稍后我会在我无法避免的时候加入并添加吸气剂（我认为你仍然经常需要它们......）

另一件事是完全避免继承，直到您绝对是解决问题的唯一方法，而不会重复代码或使事情变得混乱。问题是，这个问题没有用我的母语编码，所以我真的不知道你在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:18:40.080

获取客户不是模型的工作（反之亦然！）。那是工厂的问题！您的方法应如下所示：

```
$client = new AppName\Client($model); 
```

永远不要将工厂逻辑与业务逻辑混为一谈，因为这会使测试变得不可能。

# python-3.x - 在 SymPy 中定义包含数值的符号

> ID：10560933
> 
> 赞同：3
> 
> 时间：2012-05-12T03:51:21.613
> 
> 标签：python-3.x, sympy

我试图在 SymPy 中定义一个与 pi、e 和 i 等常量具有相同功能的常量。当给出确切的答案时，它们仍然是它们的符号，而不是评估它们的值。例如，如果我跑

```
2*pi 
```

它会返回 2⋅π。如果我想要一个大概的答案，我可以跑

```
N(2*pi) 
```

返回 6.28318530717959。

我想要的是定义一个常数 tau，其中

```
tau 
```

返回 τ，而

```
N(tau) 
```

返回 6.28318530717959。

基本上我只是想定义一个新符号τ，它等于2⋅π。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T16:45:49.147

您需要以与它`NumberSymbol`相同的方式进行子类化`Pi`。只需复制粘贴源代码`Pi`并添加`*2`就足够了。请注意，这些对象是单例类而不是实例。

您还应该阅读 pi 宣言；）

# php - 返回 使用 MySQL 和 PHP 的 PDO 函数的标签

> ID：10560936
> 
> 赞同：-1
> 
> 时间：2012-05-12T03:52:11.010
> 
> 标签：php, sql, pdo

我有以下功能：

```
function getSystemNames($dbh, $myid) {
    $sql = $dbh->prepare('
    SELECT system_name 
    FROM product_systems
    WHERE user_id = :myid
    ORDER BY `system_name` ASC
    ');
    $sql->bindValue('myid', $myid);
    $sql->execute();
    return $sql;
}
; 
```

然后，我将以下代码与我的 HTML 混合：

```
<select id='group' class='select' name='group'><option value='000'>None</option>
        <?php
        $results = getSystemNames($dbh, $myid);             
        while ($row1 = $results->fetch(PDO::FETCH_ASSOC)){              
          echo "<option value='$row1[system_name]'>$row1[system_name]</option>";
        }
        ?>
</select> 
```

我正在尝试将两者合并，因此我的 HTML 中没有那么多代码，但在过去的一个小时里我一直无法弄清楚，我正在寻求社区的帮助。我试过无济于事：

```
function getSystemNames($dbh, $myid) {
    $sql = $dbh->prepare('
    SELECT system_name 
    FROM product_systems
    WHERE user_id = :myid
    ORDER BY `system_name` ASC
    ');
    $sql->bindValue('myid', $myid);
    $sql->execute();
    while ($row1 = $sql->fetch(PDO::FETCH_ASSOC)) {                 
        return "<option value='$row1[system_name]'>$row1[system_name]</option>";
    }
}
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T05:09:58.297

```
function getSystemNames($dbh, $myid) {
    $sql = $dbh->prepare('
    SELECT system_name 
    FROM product_systems
    WHERE user_id = :myid
    ORDER BY `system_name` ASC
    ');
    $sql->bindValue('myid', $myid);
    $sql->execute();
    $result = $sql->fetchAll(); <----- fetch All the data
    return $result;
} 
```

它会返回一个**多维**数组。然后`foreach`在您的 html 部分中使用 a 来获得所需的输出。

`;`PS你在这里之后就不需要`}`了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:17:14.223

您必须在 while 循环外创建一个临时变量，并在 while 循环内将其连接起来。然后返回临时变量。做`echo getSystemNames(..)`

# iphone - 带有旋转的滚动视图中的图像视图的边界

> ID：10560937
> 
> 赞同：0
> 
> 时间：2012-05-12T03:52:18.930
> 
> 标签：iphone, objective-c, ios, frame, bounds

我有一个全屏 UIScrollView 来显示我的图像，它使用来自苹果示例代码的 PhotoScroller.app 中的一些代码。我对带有旋转的滚动视图中的图像视图的边界和转换点有点困惑。任何帮助将不胜感激！

附言。有关更多详细代码，请在[边界中心找到](https://stackoverflow.com/questions/10556265/center-of-bounds)

**NSLog 调用 willRotateToInterfaceOrientation:duration:**

```
2012-05-12 11:35:45.666 imageScrollView frame X and Y are 0.000000 and 0.000000 
2012-05-12 11:35:45.672 imageScrollView frame Width and Height are 320.000000 and 480.000000 
2012-05-12 11:35:45.677 imageScrollView bounds origin X and Y are 0.000000 and 0.000000 
2012-05-12 11:35:45.682 imageScrollView bounds Width and Height are 320.000000 and 480.000000 
2012-05-12 11:35:45.686 imageView frame origin X and Y are 0.000005 and 0.374437
2012-05-12 11:35:45.689 imageView frame size Width and Height are 320.000000 and 479.251129
2012-05-12 11:35:45.693 imageView bounds origin X and Y are 0.000000 and 0.000000
2012-05-12 11:35:45.697 imageView bounds size Width and Height are 641.000000 and 959.999939
2012-05-12 11:35:45.701 boundsCenter X and Y are 160.000000 and 240.000000 
2012-05-12 11:35:45.705 convertPoint origin X and Y are 320.500000 and 479.999969 
```

**NSLog 调用 willAnimateRotationToInterfaceOrientation:duration:**

```
2012-05-12 11:36:05.975 imageScrollView frame X and Y are 0.000000 and 0.000000 
2012-05-12 11:36:05.978 imageScrollView frame Width and Height are 480.000000 and 320.000000 
2012-05-12 11:36:05.983 imageScrollView bounds origin X and Y are 0.000000 and 0.000000 
2012-05-12 11:36:05.987 imageScrollView bounds Width and Height are 480.000000 and 320.000000 
2012-05-12 11:36:05.990 imageView frame origin X and Y are 80.000008 and 0.000017
//I am confused here. Why is the X is 80.000008, and Y is 0.000017, but not (80, -120)?
2012-05-12 11:36:05.994 imageView frame size Width and Height are 320.000000 and 479.251099
2012-05-12 11:36:06.002 imageView bounds origin X and Y are 0.000000 and 0.000000
2012-05-12 11:36:06.006 imageView bounds size Width and Height are 641.000000 and 959.999878
2012-05-12 11:36:06.009 boundsCenter X and Y are 240.000000 and 160.000000 
2012-05-12 11:36:06.014 convertPoint origin X and Y are 320.500000 and 320.499969 
```

**关于自动调整大小配置：**

```
actionSheetCoverView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
imageScrollView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
imageView.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin; 
```

**旋转前的imageview帧原点（willRotateToInterfaceOrientation:duration中的NSLog）是（0, 0），旋转后（willAnimateRotationToInterfaceOrientation:duration:中的NSLog），我认为应该是（80，-120）。但它是 (80.000008, 0.000017);**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:00:22.217

正如我所解释的，当你不说出你为什么感到困惑或你正在尝试做什么时，很难帮助你。

要获取 imageView 的实际中心，您可以使用以下命令：

```
imageView.center 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:35:17.343

该`frame`属性始终返回基于UIView 的 、 和 属性的计算值 *。*`bounds``center``transform`

根据 Apple 的[UIView 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW5)：

> 如果该`transform`属性不是恒等变换，则该`frame`属性的值是未定义的，因此应该被忽略。

问题是您在`frame`旋转动画开始时读取属性，这意味着您的视图将具有非标识`transform`值，从而使它们的`frame`值毫无意义。

您可以根据[其他问题](https://stackoverflow.com/questions/10556265/center-of-bounds)的代码记录转换值：

```
NSLog(@"imageScrollView transform %@", NSStringFromCGAffineTransform(self.transform));

NSLog(@"imageView transform %@", NSStringFromCGAffineTransform(imageView.transform)); 
```

这将向您显示旋转时的变换属性。如果您不熟悉身份转换，它是`[1, 0, 0, 1, 0, 0]`.

换句话说，`frame`属性给你意想不到的值的原因是你的视图已经`transform`应用了它，使`frame`属性变得毫无意义。

目前尚不清楚您实际上想要实现什么，但来自同一 Apple 文档的其他注释可能会有所帮助：

> 如果`transform`属性包含非恒等变换，则`frame`属性的值未定义且不应修改。在这种情况下，您可以使用该属性重新定位视图并使用该`center`属性调整大小`bounds`。

# php - 为什么这个 for 循环在达到预期值之前停止？

> ID：10560938
> 
> 赞同：5
> 
> 时间：2012-05-12T03:52:23.083
> 
> 标签：php, loops, for-loop

```
for($i=0;$i<=2;$i+=0.1){
    echo  $i."<br>";
} 
```

我希望的结果是：

```
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
1.1
1.2
1.3
1.4
1.5
1.6
1.7
1.8
1.9
2 
```

取而代之的是循环到达`1.9`并停止。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T03:58:36.280

因为，它永远不会实现`floating point`==`integer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:05:40.097

你可以这样做：

```
for($i=0;$i<=20;$i+=1){
    echo  ($i/10)."<br>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T04:05:53.797

由于浮点精度，这不起作用。这些数字以 base 2 格式存储，并且由于四舍五入而永远不会精确。当您将 0.1 添加到 1.9 时，您最终不会得到 2.0。你最终得到像 1.99999 这样的东西。在下一次迭代中，您最终会得到类似 2.099998 的内容，具体取决于它以 base 2 格式四舍五入的内容。

有关详细信息，请参阅[浮点数](http://www.php.net/manual/en/language.types.float.php)和 [双精度浮点格式](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)

你也可以做这样的事情来得到你想要的结果

```
for ($i = 0; $i < 2.1; $i += .1){
    echo  $i . '<br />';
} 
```

# javascript - 使用 javascript 和 django 将文本文件上传到服务器中的某个文件夹

> ID：10560949
> 
> 赞同：2
> 
> 时间：2012-05-12T03:55:46.047
> 
> 标签：javascript, python, django

我需要上传一个包含一些数据的文本文件，从我`local filesystem`的角度来说`{{MEDIA_URL}}/uploadfolder`。这个文件将由我认为的一个函数处理`django`。

我`<input type="file" id="fselect" >`在我的 html 页面中创建了一个。我创建了一个 javascript 文件，我尝试在其中调用上传函数，如下所示

```
 $(document).ready(function(){
      ...
      $('#fselect').change(function(){ 
         file=$('#fselect').get(0).files[0];
         uploadFile(file);
      }

}); 
```

当我使用萤火虫，并尝试

```
file=$('#fselect').get(0).files[0] 
```

我能够获得 File 对象，它是使用输入元素选择的文本文件。如何使用这个 File 对象调用 django 视图？在 django 视图中，这个 File 对象是什么数据类型？

```
def storeAndProcessFile(request,file):
    pass 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T06:03:19.557

在我进入任何 javascript 之前，首先您应该了解文件通常是如何使用 Django 上传和处理的。考虑以下 html 表单：

```
<form method="post" action="/foo/url/">
    <input type="file" name="foofile">
    <input type="submit" value="Upload">
</form> 
```

因此，当用户单击提交按钮时，浏览器会将该文件上传到`/foo/url/`使用 HTTP 方法`POST`。然后在 Django 的服务器端，url`/foo/url/`将被映射到某个视图。在您的情况下，它将是`storeAndProcessFile`. 所以视图必须做的是获取上传的文件并将其存储到磁盘（或可能是其他一些存储系统）。

现在，视图不会像您在问题中显示的那样将文件作为其功能参数之一。这是因为 GET、POST 和 FILE 数据是如何在 HTTP 请求中传递的。所以文件实际上将是`request`视图内参数的一部分。您将能够通过 引用该文件`request.FILES['foofile']`。

要将文件存储到磁盘，您的视图可能类似于：

```
def storeAndProcessFile(request):
    # make sure the the request method is POST
    if request.method != 'POST':
        return HttpResponseBadRequest('Only POST requests are allowed')
    # now get the uploaded file
    file = request.FILES['foofile']
    # the file is going to be an instance of UploadedFile
    with open('/destination/path/%s' % file.name, 'wb+') as dest:
        for chunk in file.chunks():
            dest.write(chunk)
    # return success message
    return HttpResponse('File uploaded') 
```

这段代码几乎来自 Django 文档。如果您想了解更多，可以在[这里](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/)阅读。

至于 Javascript，有大量的 jQuery 插件可以使用 ajax 上传文件，甚至可以一次上传多个文件。我真的很喜欢[这个](http://blueimp.github.com/jQuery-File-Upload/)图书馆。它具有许多功能，包括发送多个文件。但是，如果这太多了，您可以搜索 jQuery 文件上传插件，它们有很多，但我最近没有测试过任何其他插件，所以不能给出任何建议。

然而，在向 Django 站点发出 ajax 请求时需要记住一件事，即 CSRF。从 Django 1.2.5 开始，他们改变了 CSRF 的验证方式，这可能会破坏许多上传库。如果您不需要担心它，您可以随时添加`csrf_exempt`装饰器：

```
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def storeAndProcessFile(request):
    ... 
```

但是，如果您需要 CSRF，您可以在[此处查看](https://github.com/miki725/Django-jQuery-File-Uploader-Integration-demo)集成 jQuery 文件上传器和启用 CSRF 的示例实现。

# ios - Instruments 启动选项仅显示 iPad 模拟器

> ID：10560951
> 
> 赞同：1
> 
> 时间：2012-05-12T03:56:08.637
> 
> 标签：ios, xcode4.2, instruments

仪器启动选项下拉菜单仅显示 iPad 模拟器。我想用 iPhone 模拟器运行一个脚本，但下拉列表中没有列出 iPhone 模拟器选项。在雪豹上使用 Xcode 4.2 和 IOS 5。

我正在尝试在 iPhone 模拟器中记录我的动作，但每次我记录 iPad 时都会启动。但是手动启动选项下拉列表中没有列出 iPhone 模拟器。它只列出 iPad 模拟器。

# html - 具有文件属性的 Html5 tr

> ID：10560964
> 
> 赞同：0
> 
> 时间：2012-05-12T03:58:41.400
> 
> 标签：html, attributes, html5-audio

我看到一段这样的代码：

```
var pl = document.createElement('tr');
...
pl.file = f;
pl.onclick = function(e){
    if(e && e.button == 1){
        pl.parentNode.removeChild(pl);
    }else{
        var url;
        if(window.createObjectURL){
            url = window.createObjectURL(f)
        }else if(window.createBlobURL){
            url = window.createBlobURL(f)
        }else if(window.URL && window.URL.createObjectURL){
            url = window.URL.createObjectURL(f)
        }else if(window.webkitURL && window.webkitURL.createObjectURL){
            url = window.webkitURL.createObjectURL(f)
        }                      
        $("player").src = url;
        $("player").play();
    }
} 
```

这是一个音频播放器。我在想 tr 元素是否有文件属性？我在互联网上进行了搜索，但一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:16:29.360

不，该`<tr>`元素没有`file`属性。这意味着您不应该编写以下（无效的）HTML：

```
<tr file="http://example.com/file.txt"> 
```

`data-file`您可以使用属性名称来做一些非常接近 HTML5 中的事情，那么它是有效的。

```
<tr data-file="http://example.com/file.txt"> 
```

但是您的标记上没有它（大概），您只是获取一个表示它的 JavaScript 对象`<tr>`，并将其添加为属性 -*而不是属性*。要操作实际属性（如`data-file`），您必须使用`setAttribute`and `getAttribute`。

# api - 新消息 LinkedIn 组

> ID：10560965
> 
> 赞同：0
> 
> 时间：2012-05-12T03:58:50.087
> 
> 标签：api, linkedin

我正在尝试通过 API 将新消息发布在订阅的linkedIn 组中。

根据 [https://developer.linkedin.com/documents/groups-api#membergroups](https://developer.linkedin.com/documents/groups-api#membergroups) ，我最接近的是基于时间戳过滤器检索讨论帖子

API 文档中是否有任何资源或其他地方对此进行了解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T02:13:12.323

这可能不受 API 支持，因为它不是他们的 Open Developer 计划的一部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:20:12.560

一种选择是检索评论并遍历它们，根据您正在检查的用户过滤帖子。这将是“API 密集型”，因为您需要重复调​​用 Groups API 以获取所有组帖子 -[油门限制](https://developer.linkedin.com/documents/throttle-limits)将拉组帖子限制为每天 1000 个/用户。

# python - TypeError：需要字符串或缓冲区，找到列表

> ID：10560974
> 
> 赞同：2
> 
> 时间：2012-05-12T03:59:39.533
> 
> 标签：python, typeerror

我正在*学习 Python the Hard Way*并坚持练习 16 的额外学分。我正在尝试读取我使用主要练习 16 创建的文件。我编写的代码如下：

```
# pylint: disable-msg=C0103
""" This script reads and prints a file set from the argv """
from sys import argv

filename = argv

txt = open(filename)

print txt.read() 
```

我要阅读的文件是：

```
Derp Derp
Reading this file
Will it work? 
```

我收到错误：*TypeError: coercing to Unicode: need string or buffer, list found*但我不确定我的文件如何是列表而不是字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T04:02:43.557

要调试，请尝试打印`filename`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T04:02:36.803

`argv`是脚本的参数列表。第一个论点是`argv[1]`。尝试这个：

```
from sys import argv

txt = open(argv[1])

print txt.read() 
```

* * *

**重要说明：**列表中的第一项几乎总是第`0`th 项，`argv`这是一个例外，因为`0`th 参数是您的脚本名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T15:08:40.700

我也遇到了同样的错误，但用这段代码解决了它：

```
from sys import argv

txt = open(argv[1])

print txt.read() 
```

# ios - 无限运行的应用程序中的ios内存泄漏，特别是无限视频播放

> ID：10560981
> 
> 赞同：0
> 
> 时间：2012-05-12T04:02:15.110
> 
> 标签：ios, xcode, video, memory-leaks, infinite

我一直在做一个理论上应该无限期工作的项目。这意味着您启动了程序，将 Ipad 连接到电源，它可以工作数天、数月、数年等。我面临这样一个事实，无论我做什么，内存都是逐渐分配的，但没有释放。Instruments Leaks 显示没有内存泄漏，但在 Instruments Allocations 和 Activity Monitor 中，内存是逐渐分配的，它越来越大。有很多地方会发生，尤其是在播放视频时 一个简单的例子（Xcode 4.3，无 ARC）：

**视图控制器.h**

```
@interface ViewController : UIViewController
{
    MPMoviePlayerController *player;

} 
```

**视图控制器.m**

```
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    player = [[MPMoviePlayerController alloc] initWithContentURL:    [NSURL URLWithString:@"http://mysite.com/movie.mp4"]];

    player.view.frame = CGRectMake(400, 500, 360, 240);
    [self.view addSubview:player.view];
    player.controlStyle = MPMovieControlStyleNone;
    player.repeatMode = MPMovieRepeatModeOne;  
    [player play];
}

- (void)viewDidUnload
{
      [player stop];
      [player.view removeFromSuperview];
      [player release];
      [super viewDidUnload];
}

- (void)dealloc 
{
    [player release];
    [super dealloc];
} 
```

这个简单的应用程序什么也不做，只是循环播放视频。每 3 分钟平均分配 100kb。每天 - 平均 40MB。我正在使用 Instruments Activity Monitor 进行分析。随着时间的推移，应用程序会死掉。怎么了？为什么内存在增长，当我只看视频（循环播放）而不初始化新对象时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T05:54:19.387

用于预加载输入流的缓存只有在再次加载或关闭应用程序时才会自行刷新，否则它会不断累积数据。一旦关闭应用程序并再次打开，内存分配就会在那里。基本上不是内存泄漏。

您还需要在使用后删除 MPMoviePlayerController 通知。您还必须释放玩家对象。

你在哪里使用 [player.view removeFromSuperview];

# objective-c - 从阵列中删除的错误访问

> ID：10560988
> 
> 赞同：0
> 
> 时间：2012-05-12T04:03:32.580
> 
> 标签：objective-c, xcode

所以我的代码编译了，当我在 xcode 中运行我的 iphone 应用程序时，它崩溃并吐出大量内存错误，抱怨访问错误，我不知道这意味着什么。我要做的就是从我的超级视图中删除我创建的实验室在数组中使用计数器，结果比我想象的要困难得多。我对对象 c 和 iphone 开发非常陌生，任何帮助将不胜感激。

```
#import "FlipsideViewController.h"

@interface MainViewController : UIViewController <FlipsideViewControllerDelegate> 
{
    /*This stuff creates a timer */
    IBOutlet UILabel *opponentsBlue;
    NSTimer *timer;
    int redBlue;
    int count;
    /*Stuff for making a label creator */
    CGPoint startPoint;
    int xStuff, yStuff;

    /*array for storing wards*/
    NSMutableArray *wardArray;

}

@property CGPoint startPoint;

- (IBAction)startRedBlue:(id)sender;

- (IBAction)removeWard:(id)
sender;
- (void)countdown;
-(id)init;

@end

#import "MainViewController.h"

@interface MainViewController ()

@end

@implementation MainViewController

@synthesize startPoint;

- (void)countdown 
{
    if (redBlue < 2) {

        [timer invalidate];
        timer = nil;
    }
    redBlue -= 1;
    opponentsBlue.text = [NSString stringWithFormat:@"%i", redBlue];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *theTouch = [touches anyObject];
    startPoint = [theTouch locationInView:self.view];

}

-(id)init{
    int count = 0;
    return self;
}

- (IBAction)startRedBlue:(id)sender 
{
    UIButton *wardButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    wardButton.frame = CGRectMake((startPoint.x - 5), (startPoint.y - 5), 10, 10);
    [wardButton setTitle:@"180" forState:UIControlStateNormal];
    //add targets and actions
    /*[wardButton addTarget:self action:@selector() forControlEvents:<#(UIControlEvents)#>*/
    //add to a view
    [self.view addSubview:wardButton];

    if (!wardArray) {
        wardArray = [NSMutableArray array];
    } 
    if (wardArray){
        [self->wardArray addObject: wardButton];
        count++;
    }

    NSLog(@"This elemnt = %@", wardArray);

}
- (IBAction)removeWard:(id)sender 
{

    NSLog(@"The count is %@", count);
    [[wardArray objectAtIndex:count] removeFromSuperview];

    count--;

    NSLog(@"This elemnt = %@", wardArray);

}
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

#pragma mark - Flipside View

- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller
{
    [self dismissModalViewControllerAnimated:YES];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showAlternate"]) {
        [[segue destinationViewController] setDelegate:self];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:51:34.923

我猜测这不是 ARC（自动引用计数）。

wardArray 没有被保留，因此它在创建后不久就被释放。

您可以尝试替换`[NSMutableArray array]`为`[[NSMutableArray alloc] init]`. 这样它只会泄漏内存而不是留下一个僵尸。

此外，您可能想阅读有关 Objective-C 内存管理的内容。

# php - 要发送的 $_SESSION 值

> ID：10560990
> 
> 赞同：-2
> 
> 时间：2012-05-12T04:03:37.477
> 
> 标签：php, session, session-variables

我在一个真正的pickel：

我正在制作一个登录脚本，由于某种原因，$_SESSION 变量没有从我的登录检查中通过页面发送。

我已经用 pre PHP Ver 5.2.12 对此进行了测试，并且可以正常工作。以前用过这种方法。但是我现在使用这种方法的网站是 PHP Ver 5.2.12

所以我注意到的两个版本之间有两个不同之处，它们是：

在旧版本中，

session.bug_compat_42 On On AND 在新 = session.bug_compat_42 Off Off

还

旧版本

session.use_trans_sid 0 0 和新 session.use_trans_sid 1 1

session.save_path 的路径在每个版本中也不同（这有关系吗？？）这是我登录页面的代码：

登录页面

```
<?php 
session_start();
$var_user = $_SESSION['US'];
//echo $var_user;//ouputs nothing =0
//if not logged in
if(!isset($_SESSION['US'])) {
header ('Location:index.php');
 die();
}else if(isset($_SESSION['US'])){   
include('connect.php');
//rest of script goes here
} 
```

以及我在 if 语句中检查登录详细信息的页面代码

从登录页面顶部检查变量的页面

```
 <?php
 session_start();
 $var_pass =$_REQUEST['PW'] ; 
 $var_user =$_REQUEST['US'] ; 
```

稍后在页面中

```
$_SESSION["US"]= $var_user;
//echo "login success";
header ('Location:loggedin.php'); 
```

这绝对是我的头脑，可能只是我没有意识到的一个小错误，任何想法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:25:25.113

Write

```
session_start(); 
```

at the top of login page.

# meteor - 订阅收集错误

> ID：10560992
> 
> 赞同：1
> 
> 时间：2012-05-12T04:04:37.377
> 
> 标签：meteor

我真的不确定这里有什么问题。也许我对发布/订阅文档不够了解。

在我的服务器目录中：

```
Meteor.publish("kudos", function () {
  return Kudos.find({});
}); 
```

在我的客户目录中：

```
Meteor.startup(function(){
  Meteor.subscribe("kudos");
});

Template.launchsection.kudos = function () {
  return Kudos.find({});
}; 
```

当我运行这个时，我得到一个`Kudos is not defined`返回的行的错误`Kudos.find({});`。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T19:11:45.403

具体来说，您需要同时写入`Kudos = new Meteor.Collection("kudos")`客户端和服务器目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T19:05:57.357

确保在客户端和服务器上都执行的 js 文件中定义架构。`Schema.js`流星应用程序根文件夹中的文件应该可以解决问题。看看这个[问题](https://stackoverflow.com/questions/10483142/meteor-using-a-local-connection-results-in-error-insert-failed-404-method-n)。

希望有帮助！:)