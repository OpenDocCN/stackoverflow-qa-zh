# StackOverflow 问答 10793000-10793999

# windows-8 - 如何在 WinJS 中绑定到“自我”

> ID：10793006
> 
> 赞同：3
> 
> 时间：2012-05-29T04:18:17.317
> 
> 标签：windows-8, winjs

当我在 WinJS 中使用默认数据绑定时，如何绑定到“当前项”而不是指定要绑定的属性。我想到了“。” 在绑定到当前项目的 XAML 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T17:45:43.180

您可以在绑定表达式的右侧使用“this”：

`data-win-bind="innerText: this myInitializer"`

但是，如果您这样做，您应该编写一个自定义初始化程序，该初始化程序知道如何将“this”拆分为正确转换为字符串的内容。

# sql - 编写排序查询

> ID：10793010
> 
> 赞同：1
> 
> 时间：2012-05-29T04:18:40.187
> 
> 标签：sql, sql-server, tsql

我有一个如下表：

```
Job    Quantity Status
-----------------------
1      100      OK
2      400      HOLD
3      200      HOLD
4      450      OK
5      300     
6      500 
```

我希望我的结果如下所示：

```
Job  Quantity Status
----------------------
4      450      OK
2      400      HOLD
1      100      OK
3      200      HOLD
6      500 
5      300 
```

`status`我已经创建了这个查询，但是当表包含列为空/空的数据时它不起作用

```
SELECT 
    Job, 
    Quantity, 
    Status 
FROM 
    myTable
ORDER BY CASE 
    WHEN QUANTITY >= 400 AND STATUS = 'OK' THEN 1 
    WHEN QUANTITY >= 400 AND STATUS = 'HOLD' THEN 2 
    WHEN QUANTITY <  400 AND STATUS = 'OK' THEN 3 
    WHEN QUANTITY >= 400 AND STATUS = 'HOLD' THEN 4 
    WHEN QUANTITY >= 400 AND STATUS = '' THEN 5 
    WHEN QUANTITY <  400 AND STATUS = '' THEN 6 
END 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T04:31:18.677

除非我误读，否则我觉得您已经回答了自己的问题。您需要说明您的数据何时为`NULL`.

重要的部分是它`NULL`的类型不同于`''`. 就像`'' = 0`是假的一样，也是`NULL = ''`。`NULL`用于表示空值。用布尔值而不是字符串来考虑它。显然，有时某些东西既不是真也不是假，这就是价值 like`NULL`的来源。类似地，如果您将字符串视为纯数据而不是字符和单词，那么空值和无值之间存在差异全部。

有关详细信息，请参阅[http://www.w3schools.com/sql/sql_null_values.asp](http://www.w3schools.com/sql/sql_null_values.asp)

所以我认为你的代码应该是这样的：

```
SELECT Job, Quantity, Status 
    FROM myTable
ORDER BY CASE 
    WHEN QUANTITY >= 400 AND STATUS = 'OK' THEN 1 
    WHEN QUANTITY >= 400 AND STATUS = 'HOLD'  THEN 2 
    WHEN QUANTITY < 400 AND STATUS = 'OK'  THEN 3 
    WHEN QUANTITY >= 400 AND STATUS = 'HOLD'  THEN 4 
    WHEN QUANTITY >= 400 AND (STATUS = '' OR STATUS IS NULL)  THEN 5 
    WHEN QUANTITY < 400 AND (STATUS = '' OR STATUS IS NULL)  THEN 6
END 
```

除非您明确将 STATUS 设置为`''`，否则您可能只能使用`STATUS IS NULL`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T07:58:38.217

尝试使用以下查询：-

```
SELECT  
    Job,  
    Quantity,  
    Status  
FROM  
    myTable 
ORDER BY CASE  
    WHEN QUANTITY >= 400 AND STATUS = 'OK' THEN 1  
    WHEN QUANTITY >= 400 AND STATUS = 'HOLD' THEN 2  
    WHEN QUANTITY <  400 AND STATUS = 'OK' THEN 3  
    WHEN QUANTITY >= 400 AND STATUS = 'HOLD' THEN 4  
    WHEN QUANTITY >= 400 AND COALESCE(STATUS,'') = '' THEN 5  
    WHEN QUANTITY <  400 AND COALESCE(STATUS,'') = '' THEN 6  
END 
```

该`COALESCE()`函数返回第一个非空参数，因此如果`STATUS`是`NULL`它将返回`''`。

[http://www.sqlbook.com/SQL/SQL-Coalesce-28.aspx](http://www.sqlbook.com/SQL/SQL-Coalesce-28.aspx)

# jqplot - jqPlot pieRenderer 图例方块未显示

> ID：10793013
> 
> 赞同：8
> 
> 时间：2012-05-29T04:19:07.743
> 
> 标签：jqplot

我正在运行`jqPlot`，由于某种原因，应该显示在饼图渲染器图例中的颜色编码方块没有出现。我想知道这是否与我使用 twitter bootstrap 的事实有关？我没有使用任何其他 css 库。

```
 var plot1 = jQuery.jqplot('chartdiv', [graphData],
        {
            grid: {
                shadow: false, 
                background: '#FFFFFF',                                                                                          
            },
            seriesDefaults: {
                // Make this a pie chart.
                renderer: jQuery.jqplot.PieRenderer,
                rendererOptions: {
                    // Put data labels on the pie slices.
                    // By default, labels show the percentage of the slice.
                    showDataLabels: true,
                    padding: 20,
                    startAngle: 270 
                }
            },
            legend: {
                show: true,
                location: 'e',
                fontSize: 11,
                marginTop: 10,                                
            }
        }); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-29T09:53:56.913

你确定你加载的`CSS`是`jqPlot`正确的（即 url/href 指向正确的位置）？

[这是您加载了 jquery.jqplot.css 的代码。](http://jsfiddle.net/Rxm3L/1/)

[这是你的没有CSS的代码。](http://jsfiddle.net/Rxm3L/2/)

[这个包含 jquery.jqplot.css 和引导程序（下载时没有`jQuery`插件，也没有链接`img`下载附带的文件夹）。](http://jsfiddle.net/Rxm3L/4/)这里都显示正确，因此您必须仔细检查`href`jquery.jqplot.css 的。

# php - 发出原始 HTTP 请求时如何轻松解码 HTTP 分块编码字符串？

> ID：10793017
> 
> 赞同：3
> 
> 时间：2012-05-29T04:20:20.220
> 
> 标签：php, http

我想在不依赖 cURL 的情况下发出 HTTP 请求，并`allow_url_fopen = 1`通过打开套接字连接并发送原始 HTTP 请求：

```
/**
 * Make HTTP GET request
 *
 * @param   string   the URL
 * @param   int      will be filled with HTTP response status code
 * @param   string   will be filled with HTTP response header
 * @return  string   HTTP response body
 */
function http_get_request($url, &$http_code = '', &$res_head = '') 
{
  $scheme = $host = $user = $pass = $query = $fragment = '';
  $path = '/';
  $port = substr($url, 0, 5) == 'https' ? 443 : 80;

  extract(parse_url($url)); 

  $path .= ($query ? "?$query" : '').($fragment ? "#$fragment" : '');

  $head = "GET $path HTTP/1.1\r\n"
        . "Host: $host\r\n"
        . "Authorization: Basic ".base64_encode("$user:$pass")."\r\n"
        . "Connection: close\r\n\r\n";

  $fp = fsockopen($scheme == 'https' ? "ssl://$host" : $host, $port) or 
    die('Cannot connect!');

  fputs($fp, $head);
  while(!feof($fp)) {
    $res .= fgets($fp, 4096);
  }
  fclose($fp);

  list($res_head, $res_body) = explode("\r\n\r\n", $res, 2);
  list(, $http_code, ) = explode(' ', $res_head, 3);

  return $res_body;
} 
```

该函数工作正常，但由于我使用的是 HTTP/1.1，因此响应正文通常以[块编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)字符串返回。例如（来自维基百科）：

```
25
This is the data in the first chunk

1C
and this is the second one

3
con
8
sequence
0 
```

我不想使用[`http_chunked_decode()`](http://php.net/manual/en/function.http-chunked-decode.php)，因为它具有 PE​​CL 依赖项，并且我想要一个高度可移植的代码。

如何轻松解码 HTTP 分块编码字符串，以便我的函数可以返回原始 HTML？我还必须确保解码字符串的长度与`Content-Length:`标题匹配。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-02T02:45:06.410

由于该函数返回 HTTP 响应标头，因此您应该检查是否`'Transfer-Encoding'`是`'chunked'`然后解码分块编码的字符串。在伪代码中：

```
CALL parse_http_header
IF 'Transfer-Encoding' IS 'chunked'
  CALL decode_chunked 
```

* * *

**解析 HTTP 响应头：**

下面是将 HTTP 响应标头解析为关联数组的函数。

```
function parse_http_header($str) 
{
  $lines = explode("\r\n", $str);
  $head  = array(array_shift($lines));
  foreach ($lines as $line) {
    list($key, $val) = explode(':', $line, 2);
    if ($key == 'Set-Cookie') {
      $head['Set-Cookie'][] = trim($val);
    } else {
      $head[$key] = trim($val);
    }
  }
  return $head;
} 
```

该函数将返回一个像这样的数组：

```
Array
(
    [0] => HTTP/1.1 200 OK
    [Expires] => Tue, 31 Mar 1981 05:00:00 GMT
    [Content-Type] => text/html; charset=utf-8
    [Transfer-Encoding] => chunked
    [Set-Cookie] => Array
        (
            [0] => k=10.34; path=/; expires=Sat, 09-Jun-12 01:58:23 GMT; domain=.example.com
            [1] => guest_id=v1%3A13; domain=.example.com; path=/; expires=Mon, 02-Jun-2014 13:58:23 GMT
        )
    [Content-Length] => 43560
) 
```

注意`Set-Cookie`标题如何解析为数组。您需要稍后解析 cookie 以将 URL 与需要发送的 cookie 相关联。

* * *

**解码分块编码的字符串**

下面的函数将分块编码的字符串作为参数，并返回解码后的字符串。

```
function decode_chunked($str) {
  for ($res = ''; !empty($str); $str = trim($str)) {
    $pos = strpos($str, "\r\n");
    $len = hexdec(substr($str, 0, $pos));
    $res.= substr($str, $pos + 2, $len);
    $str = substr($str, $pos + 2 + $len);
  }
  return $res;
}

// Given the string in the question, the function above will returns:
//
// This is the data in the first chunk
// and this is the second one
// consequence 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T04:24:34.743

我不知道它是否最适合您需要做的事情，但是如果您指定`HTTP/1.0`而不是`HTTP/1.1`，您将不会得到分块响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-07T20:31:30.233

这个函数在 Wordpress 中使用。

```
function decode_chunked($data) {
    if (!preg_match('/^([0-9a-f]+)(?:;(?:[\w-]*)(?:=(?:(?:[\w-]*)*|"(?:[^\r\n])*"))?)*\r\n/i', trim($data))) {
        return $data;
    }

    $decoded = '';
    $encoded = $data;

    while (true) {
        $is_chunked = (bool) preg_match('/^([0-9a-f]+)(?:;(?:[\w-]*)(?:=(?:(?:[\w-]*)*|"(?:[^\r\n])*"))?)*\r\n/i', $encoded, $matches);
        if (!$is_chunked) {
            // Looks like it's not chunked after all
            return $data;
        }

        $length = hexdec(trim($matches[1]));
        if ($length === 0) {
            // Ignore trailer headers
            return $decoded;
        }

        $chunk_length = strlen($matches[0]);
        $decoded .= substr($encoded, $chunk_length, $length);
        $encoded = substr($encoded, $chunk_length + $length + 2);

        if (trim($encoded) === '0' || empty($encoded)) {
            return $decoded;
        }
    }

    // We'll never actually get down here
    // @codeCoverageIgnoreStart
} 
```

# database - Db2 选择某些列在设置完整性后不起作用

> ID：10793018
> 
> 赞同：0
> 
> 时间：2012-05-29T04:20:20.590
> 
> 标签：database, select, db2

我正在学习 DB2，但在测试我的数据库中的一些选项时遇到了问题。

我有 2 个这样的表：

```
Country
=========
IdCountry  -- PK
Name

State
=========
IdState  -- PK
IdCountry  -- FK to Country.IdCountry
Name
Code 
```

我正在使用以下查询：

```
SELECT IdState, Name 
FROM Tables.State 
WHERE IdCountry = ? 
```

在哪里 ？是否正常工作`IdCountry`，一切正常。

然后我在我的 db2 控制中心使用选项中的默认信息设置完整性，并且该过程成功但现在我的查询没有给我任何结果。

我尝试使用：

```
SELECT * 
FROM Tables.State 
Where IdCountry = ? 
```

它给了我结果。

在对表进行测试时，我尝试添加新状态，它们使用列名而不是 * 出现在查询中，但旧记录仍然丢失。

我不知道发生了什么，有人知道吗？

在此先感谢，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:38:57.297

我在这里假设您使用的是 Linux/Unix/Windows DB2，因为 z/OS 没有`SET INTEGRITY`命令，而且我在 iSeries 信息中心快速搜索也找不到任何关于它的信息。

* * *

您的表*可能*仍处于“设置完整性待定”状态（以前称为`CHECK PENDING`）。[`SYSCAT.TABLES`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0001063.html)您可以通过使用此查询进行检查来测试该理论：

```
SELECT TRIM(TABSCHEMA) || '.' || TRIM(TABNAME) AS tbl,
       CASE STATUS
            WHEN 'C' THEN 'Integrity Check Pending'
            WHEN 'N' THEN 'Normal'
            WHEN 'X' THEN 'Inoperative'
       END As TblStatus
FROM SYSCAT.TABLES
WHERE TABSCHEMA NOT LIKE 'SYS%' 
```

如果您的表格出现，您将需要使用该[`SET INTEGRITY`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000998.html)命令将您的表格置于检查状态：

```
SET INTEGRITY FOR Tables.State IMMEDIATE CHECKED 
```

# java - 在 Java Applet 中让标签出现在饼图图例旁边时遇到问题

> ID：10793019
> 
> 赞同：0
> 
> 时间：2012-05-29T04:20:25.330
> 
> 标签：java, swing, jfreechart

我对 Java 还很陌生，并且使用的是 NetBeans IDE 7.0.1。

问题：
我正在尝试完成一个需要饼图的Java 小程序。我已经实现了饼图，但我无法让文本标​​签出现在图例中的数据旁边。有没有人有任何指示？

```
package piechartapplet;

import javax.swing.*;
import java.awt.*;

public class PieChartApplet extends JApplet {

    int TotalPieChartSlices = 7;
    SliceValues[] pieSlice = new SliceValues[TotalPieChartSlices];
    private int pieChartValueY;

    public PieChartApplet() 
    {
//Source for input statisctics:
//Global Issues. (2012). World Military Spending. Retrieved from http://www.globalissues.org/article/75/world-military-spending             
// Link:  http://www.globalissues.org/article/75/world-military-spending

    pieSlice[0] = new SliceValues(41.0, Color.RED,"United States");
    pieSlice[1] = new SliceValues(8.2, Color.CYAN,"China");
    pieSlice[2] = new SliceValues(4.1, Color.GREEN,"Russia");
    pieSlice[3] = new SliceValues(3.6, Color.BLUE,"UK");
    pieSlice[4] = new SliceValues(3.6, Color.PINK,"France");
    pieSlice[5] = new SliceValues(21.3, Color.ORANGE,"Next 10 Countries Combined");
    pieSlice[6] = new SliceValues(18.2, Color.LIGHT_GRAY,"Rest of the World");

}

// drawing the pir chart using the values in the array
    public int drawPieChartValues(Graphics2D graphics, Rectangle pieChartArea, SliceValues[] pieSlice)
    {
    // setting font size/style
        Font font = new Font("Arial", Font.BOLD, 24);
        graphics.setFont(font);
// Title of Pie Chart
        graphics.drawString("World Military Spending (% by Country)", 20, 20);
        graphics.setFont(font);
// establishing inital area positioning
        pieChartArea.x=10;
        pieChartArea.y = 30;
// using the array values, rectangles, and color to draw the slices
        for(int i=0; i<pieSlice.length;i++)
        {
            graphics. setColor(pieSlice[i].getSliceColor());
            graphics.fillRect(pieChartArea.x, pieChartArea.y, 15, 10);
            graphics.setColor(Color.BLACK);
            pieChartArea.y+=20;
            graphics.drawString(""+pieSlice[i].getSliceValue(), pieChartArea.x+25, pieChartArea.y-10);
        }
        return pieChartArea.y+=10;
    }

//The code below was adapted from an example I found that enables me to pull from
// the array and use the values as the slice sizes, putting them into a 360* pie
// Walker, K. (2012). How to Draw a Pie Chart in Java. Retrieved from http://www.ehow.com/how_6647263_draw-pie-chart-java.html 

    public void drawPieChart(Graphics2D graphics, Rectangle pieChartArea, SliceValues[] pieSlice) {

// pulling array data for the individual slices
        double total = 0.0;
        for (int i=0; i<pieSlice.length; i++) 
        {
            total += pieSlice[i].getSliceValue(); //pulling value
        }
    // drawing the slice and positioning it accordingly
        double slice = 0.0D;
        int StartAngle = 0;
        pieChartArea.x = 20;
        for (int i=0; i<pieSlice.length; i++) {

// finding initial and final angels
            StartAngle = (int)(slice * 360 / total);
            int finalAngle = (int)(pieSlice[i].getSliceValue() * 360 / total);
//loop for last slice
            if (i == pieSlice.length-1) 
                        {
                finalAngle = 360 - StartAngle;
            }
// Pulling color from array and setting accordingly
        graphics.setColor(pieSlice[i].getSliceColor()); //pulling color
        // drawing pie piece
                graphics.fillArc(pieChartArea.x, pieChartValueY, pieChartArea.width/2, pieChartArea.height/2, StartAngle, finalAngle);

        slice += pieSlice[i].getSliceValue();
        }
    }
    public void paint(Graphics g) 
    {
        super.paint(g);
        pieChartValueY  = drawPieChartValues((Graphics2D)g, getBounds(), pieSlice);
        drawPieChart((Graphics2D)g, getBounds(), pieSlice);
    }   

    public void init() {        
// Sizing my applet
        setSize(600,600);
// adding applet to pane
        getContentPane().add(new PieChartApplet());
    }
} 
```

**这是“值”代码**

```
package piechartapplet;

import javax.swing.*;
import java.awt.*;

public class SliceValues 
{
// Establishing values for the pir chart

    private double Slicevalue;
    private Color Slicecolor;
    private String Slicestring;

// Construction begins...
    public SliceValues(double value, Color color, String string) {
        this.Slicevalue = value; //values from array
        this.Slicecolor = color; //color from array
        this.Slicestring = string; //string values
    }

// calling slice values, colors, strings, and setting values, colors, strings for each slice
    public double getSliceValue() {
        return Slicevalue;
    }

    public void setSliceValue(double value) {
        this.Slicevalue = value;
    }

    public Color getSliceColor() {
        return Slicecolor;
    }

    public void setSliceColor(Color color) {
        this.Slicecolor = color;
    }

    public String getSliceString() {
        return Slicestring;
    }

    public void setSliceString(String string) {
        this.Slicestring = string;
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:57:39.797

的[源代码](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/demo/PieChartDemo1.html#line.60)（[此处](http://www.jfree.org/jfreechart/samples.html)[`PieChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/demo/PieChartDemo1.html)用标签说明）包含在分发中。

# ajax - 是否会为 AJAX 请求调用过滤器

> ID：10793024
> 
> 赞同：0
> 
> 时间：2012-05-29T04:21:00.100
> 
> 标签：ajax, jsf, servlet-filters

我正在阅读过滤器概念，并且怀疑是否将为 JSF 应用程序中的 AJAX 请求调用过滤器。

过滤器映射如下

```
<filter-mapping>
    <filter-name>ModuleSecurityFilter</filter-name>
    <url-pattern>/protected/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:28:09.633

是的。只要从您的 JSF 视图提交到与过滤器的`url-pattern`. 在您的情况下，如果提交是针对任何“ `/protected/anything`”

使用 JSF1.2，您的所有命令操作（commandbutton/commandlinks）将被强制 POST 提交表单数据到同一个视图。

假设您当前的视图是`/protected/firstview.jsf`，那么您`<h:commandButton /> , <h:commandLink />, <a4j:commandButton /> <a4j:commandLink /> , <a4j:support action="" />`将向同一视图提交 POST 请求`/protected/firstview.jsf`。所以所有的请求都必须通过过滤器。

# c - 子恢复时不发出 SIGCHLD 信号

> ID：10793028
> 
> 赞同：1
> 
> 时间：2012-05-29T04:21:28.650
> 
> 标签：c, unix, process, signals

这是我的信号处理程序：

```
pid_t pid;
int status;
while (pid = waitpid(-1, &status, WNOHANG|WUNTRACED|WCONTINUED))
{
     printf("resume? %d\n", WIFCONTINUED(status));
} 
```

即使我将 a 发送`SIGCONT`给子进程，它也总是打印出 0 。如果我使用 将 a 发送`SIGCONT`到一组进程`killpg`，则表明某些进程要恢复，但有些进程不会。有人能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:41:30.507

该`SIGCHLD`信号仅在子进程停止或终止时发出，而不是在执行恢复时发出。

# java - 离散化困境

> ID：10793034
> 
> 赞同：2
> 
> 时间：2012-05-29T04:22:40.183
> 
> 标签：java, math, reinforcement-learning, calc

我目前正在研究强化学习中著名的[山地车问题](http://library.rl-community.org/wiki/Mountain_Car_%28Java%29)。这个问题具有连续性，这意味着我有两个变量：一个位置 - 从 -1.2 到 0.5 和速度 - 从 -0.07 到 0.07。我有 3 种可能的动作 - 反向加速、向前加速和空档，动作会导致在适当方向上改变位置。由于如何计算加速度，我的位置变量是连续的，这意味着我不能使用查找表，所以我尝试将位置速度轴划分为矩形扇区，将位置划分为宽度为 0.05 的桶，将速度划分为长度为 0.005 的桶，为每个部门分配一个索引，我是这样做的：

```
public int discretiseObservation(Observation observation) {
    double position = observation.getDouble(0) ;
    double velocity = observation.getDouble(1);

    boolean positionNegativeFlag = position < 0;
    boolean velocityNegativeFlag = velocity < 0;

    double absolutePosition = Math.abs(position);
    double absoluteVelocity = Math.abs(velocity);

    double discretePosition = Math.floor(absolutePosition / 0.05);
    double discreteVelocity = Math.floor(absoluteVelocity / 0.005);

    if(velocityNegativeFlag) {
        discreteVelocity += 14;
    }

    if(positionNegativeFlag) {
        discretePosition += 10;
    }

    return (int)discretePosition * 28 + (int)discreteVelocity;
} 
```

但是这种方案会导致某些扇区具有相同的索引号。您知道如何离散这两个连续变量吗？

**更新：**抱歉忘了提到当位置或速度超过最大值或最小值时，我将其设置回最大值或最小值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:29:21.253

所有这些签名检查都使事情变得过于复杂。另外，你应该避免使用魔法常量——给它们起有意义的名字。离散化代码应如下所示：

```
double normalize(double value, double min, double max) {
    return (value - min) / (max - min);
}

int clamp(int value, int min, int max) {
    if (value < min) value = min;
    if (value > max) value = max;
    return value;
}

int discretize(double value, double min, double max, int binCount) {
    int discreteValue = (int) (binCount * normalize(value, min, max));
    return clamp(discreteValue, 0, binCount - 1);
}

public int discretizeObservation(Observation observation ) {
    int position = discretize(observation.getDouble(0), minPosition, maxPosition, positionBinCount);
    int velocity = discretize(observation.getDouble(1), minVelocity, maxVelocity, velocityBinCount);
    return position * velocityBinCount + velocity;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:48:17.510

你没有限制你的位置和速度。当它们太大时（无论是什么符号），它们都会溢出硬编码的偏移值（14 和 10）。在组合它们之前，您必须限制这些值。

# iphone - 根据 Setting.bundle 切换开关状态更改应用程序的 MainView？

> ID：10793036
> 
> 赞同：1
> 
> 时间：2012-05-29T04:22:54.257
> 
> 标签：iphone, ios, xcode, settings.bundle

我正在尝试根据 setting.bundle 中的切换开关状态更改我的应用程序的 mainView。我想设置的默认设置为 NO，我已经设置了。但似乎我遗漏了一些东西，我似乎可以通过我的代码更改视图的唯一方法是更改​​默认值。我在 applicationDidFinishLaunchingWithOptions 的 delegate.m 文件中执行此操作。请任何帮助都会很棒！

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

//Registers the defaults.
NSUserDefaults *metricDefaults = [NSUserDefaults standardUserDefaults];
[metricDefaults registerDefaults:[NSDictionary dictionaryWithObject:[NSNumber numberWithBool:NO] forKey:@"metric_preferences"]];
BOOL metricDisabled = [metricDefaults boolForKey:@"metric_preference"];
[metricDefaults synchronize];

//Change MainView based on Metric setting.
if (metricDisabled) {

    //Standard View.
    MainViewController *aController = [[MainViewController alloc] initWithNibName:@"MainView" bundle:nil];
    self.mainViewController = aController;
    [aController release];

    mainViewController.view.frame = [UIScreen mainScreen].applicationFrame;
    [window addSubview:[mainViewController view]];
    [window makeKeyAndVisible];

    return YES;

} else {

    //Metric View.
    MainViewController *aController = [[MainViewController alloc] initWithNibName:@"MainViewMetric" bundle:nil];
    self.mainViewController = aController;
    [aController release];

    mainViewController.view.frame = [UIScreen mainScreen].applicationFrame;
    [window addSubview:[mainViewController view]];
    [window makeKeyAndVisible];

    return YES;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:56:44.103

您需要使用 registerDefaults: 将此键的默认值设置为 NO。如果用户从未设置过该值，则这会为用户默认值提供一个值，但不会影响用户更改后它的值。您执行此操作的方式始终将用户默认值设置为 NO。

编辑后：

这是你这样做的方式：

```
NSUserDefaults *metricDefaults = [NSUserDefaults standardUserDefaults];
    [metricDefaults registerDefaults:[NSDictionary dictionaryWithObject:[NSNumber numberWithBool:NO] forKey:@"metric_preferences"]];
    BOOL metricDisabled = [metricDefaults boolForKey:@"metric_preference"];
    [metricDefaults synchronize]; 
```

# php - 用于解析转发消息的电子邮件正文的正则表达式

> ID：10793038
> 
> 赞同：1
> 
> 时间：2012-05-29T04:23:26.440
> 
> 标签：php, regex, email, email-validation

我需要正则表达式从转发的电子邮件中提取名称和电子邮件，我要解析的部分可能如下所示（可能缺少某些情况，但这足以开始）：

```
<jill@example.com>, "''Steve Pierce''" <steve@example.com>, "Alex" <alex@example.com>, 'Chris Brown' <chris@example.com>, 'Peter Smith' <peter@example.com>, 'Andy McKay, Jr.' <andyjr@example.com> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:35:42.710

**试试这个**

```
$result = preg_replace('/<([^<>]+)>, ["\']+([^\'"]+)["\']+/', 'person:$2\r\nmailto:$1', $subject); 
```

# python - sqlite3 使用 python 和 python cgi 插入

> ID：10793042
> 
> 赞同：2
> 
> 时间：2012-05-29T04:23:50.413
> 
> 标签：python, sqlite, fastcgi

1.  在*db.py*中，我可以使用函数（*func insert*）将数据正确插入到 sqlite 中。
2.  现在我想通过 python-fastcgi 将数据插入到 sqlite，在 fastcgi 中（刚刚命名为*post.py*）我可以正确获取请求数据，但是当我调用*db.insert*时，它给了我内部服务器错误。

我已经做到了`chmod 777 slqite.db`。有谁知道什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:15:59.200

Ffinally我找到了答案：

sqlite3 库也需要对包含它的目录具有写权限，可能是因为它需要创建一个锁定文件。

所以我用sql插入数据是没有问题的，但是通过web cgi,fastcgi等）插入数据就会出错。

只需向目录添加写权限。

# c# - 数据读取器的 C# 命令执行错误

> ID：10793043
> 
> 赞同：2
> 
> 时间：2012-05-29T04:23:58.770
> 
> 标签：c#, c#-4.0

当我运行下面的代码时，编译器给了我错误：“对象引用未设置为对象的实例”。请你能告诉我在这段代码中犯了哪些错误。

```
 public void text()
        {
            cn1.Open();
            string s;
//error came here
            s = "select Request_Type from dbo.component where Material_Code='" +
Mcodeddl.SelectedItem.Text + "' ";
//end

            SqlCommand cd1 = new SqlCommand(s, cn1);
            SqlDataReader rd;
            try
            {
                rd = cd1.ExecuteReader();
                while (rd.Read())
                {
                    TextBox4.Text = rd["Request_Type"].ToString().Trim();
                }
                rd.Close();

            }
            catch (Exception e)
            {
                Response.Write(e.Message);
            }
            finally
            {
                cd1.Dispose();
                cn1.Close();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:02:26.410

```
var code = Mcodeddl.SelectedItem.Text; // you may need to check Mcodeddl.SelectedItem != null here, if you not set default selected item 

if (string.IsNullOrEmpty(code)) return; // return if code type empty, or show message. depending on your requirement

using (SqlConnection connection = new SqlConnection(connectionString)) // using statement will dispose connection automatically
{
    connection.Open();

    using (SqlCommand command = new SqlCommand("select Request_Type from dbo.component where Material_Code= @MaterialCode", connection))
    {
        command.Parameters.AddWithValue("@MaterialCode", code); // use parameters 

        SqlDataReader reader = command.ExecuteReader();
        while (reader.Read())
        {
            var request = reader["Request_Type"];
            TextBox4.Text = request != DBNull.Value ? request.ToString().Trim() :string.Empty;// check null before ToString
        }
    }
}
}
catch (Exception e)
{
Response.Write(e.Message);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:28:00.823

只是预感，但 Mcodeddl 或 Mcodeddl.SelectedItem 为空。

（假设）下拉控件中可能没有选定的项目。

在有错误的代码之前对 Mcodeddl.SelectedItem 对象添加一个空检查，以防止这种情况发生。

# c++ - C ++算法在数组中找到“最大差异”

> ID：10793048
> 
> 赞同：4
> 
> 时间：2012-05-29T04:24:46.233
> 
> 标签：c++, algorithm, sorting, complexity-theory

我正在询问您对这个问题的想法：

我有一个数组 A，有 N 个类型的元素`double`（或整数）。我想找到一个复杂度小于 O(N ² ) 的算法来找到：

```
 max A[i] - A[j] 
```

对于 1 < j <= i < n。请注意，没有`abs()`. 我想到了：

*   动态规划
*   二分法，分而治之
*   在跟踪索引后进行一些处理

你有什么意见或想法吗？您能否指出一些好的参考来训练或在解决此类算法问题方面取得进展？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T06:17:17.137

对阵列进行三次扫描。首先，到目前为止，用*最少的*`j=2`元素填充一个辅助数组。然后，从上到下进行扫描，填充（也从上到下）另一个辅助数组， ，到目前为止（从顶部）具有*最大元素。*现在对两个辅助数组进行扫描，寻找最大差异。`a`*`i=n-1``b`*`b[i]-a[i]`**

 **那将是答案。`O(n)`总共。你可以说它是一种动态规划算法。

***编辑：***作为优化，您可以消除第三次扫描和第二个数组，并通过维护两个循环变量*max-so-far-from-the-top*和*max-difference*在第二次扫描中找到答案。

至于一般如何解决此类问题的“指针”，您通常会尝试一些像您写的一般方法 - 分而治之，记忆/动态规划等。首先仔细查看您的问题和涉及的概念。在这里，它是最大值/最小值。将这些概念分开，看看这些部分如何在问题的上下文中组合，可能会改变它们的计算顺序。另一个是在您的问题中寻找隐藏的顺序/对称性。

具体来说，固定列表中的*任意*内部点`k`，这个问题被简化为找到所有`j`s 中的最小元素与 s 中`1<j<=k`的最大元素之间`i`的差异：`k<=i<n`。你在这里看到了分而治之，以及分解最大/最小的概念（即它们的*渐进式*计算），以及各部分之间的相互作用。隐藏的顺序被揭示（`k`沿着数组），并且记忆有助于保存最大/最小值的中间结果。

任意点的固定`k`可以看作是首先解决一个较小的子问题（“对于给定的`k`......”），然后看看它是否有什么特别之处，它可以被废除 -*概括*-*抽象*出来。

有一种技术是首先尝试制定和解决更大的问题，这样原始问题就是这个更大问题的一部分。在这里，我们考虑找到每个 k 的*所有*差异，然后从中找到最大的差异。

中期结果的*双重使用*（用于比较特定`k`点，以及计算各自方向的*下一个中期结果）通常意味着一些可观的节省。*所以，

*   分而治之
*   记忆/动态规划
*   隐藏的顺序/对称
*   将概念拆开——看看这些部分是如何结合起来的
*   双重用途 - 找到双重用途的零件并记住它们
*   解决更大的问题
*   尝试任意子问题并对其进行抽象

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T16:40:23.347

这应该可以在一次迭代中实现。`max(a[i] - a[j])`for 1 < j <= i 应该与 相同`max[i=2..n](a[i] - min[j=2..i](a[j]))`，对吧？`a[j]`因此，您必须在遍历数组时跟踪最小的，寻找最大的`a[i] - min(a[j])`. 这样你只有一次迭代，j 将小于或等于 i。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T05:41:09.727

你只需要遍历数组找到最大值和最小值然后得到差异，所以最坏的情况是线性时间。如果数组已排序，您可以在恒定时间内找到差异，还是我错过了什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T14:26:34.677

Java 实现以线性时间运行

```
public class MaxDiference {

public static void main(String[] args) {
     System.out.println(betweenTwoElements(2, 3, 10, 6, 4, 8, 1));
}

private static int betweenTwoElements(int... nums) {
    int maxDifference   = nums[1] - nums[0];
    int minElement      = nums[0];

    for (int i = 1; i < nums.length; i++) {
        if (nums[i] - minElement > maxDifference) {
            maxDifference = nums[i] - minElement;
        }
        if (nums[i] < minElement) {
            minElement =  nums[i];
        }           
    }       
    return maxDifference;
}
} 
```**

# java - 使用 java SSL 的 IBM MQ 错误代码 2397

> ID：10793050
> 
> 赞同：4
> 
> 时间：2012-05-29T04:25:21.367
> 
> 标签：java, ibm-mq

我正在尝试使用我的 java 代码设置 2 路 SSL。我成功地做到了一种方式，即服务器证书从我身边得到验证，但是当涉及到两种方式时，我得到一个 2397 错误代码。

我遵循的步骤是：

1.  使用 Keytool 创建具有自签名证书的密钥库，将其部署在 MQ 服务器的信任库中。
2.  为 MQ 服务器创建密钥库并创建自签名证书。
3.  在我的信任库中部署 MQ 服务器的证书。

然后我尝试运行我的 java 代码。这在没有 SSL 或单向 SSL 的情况下可以正常工作。但是如果失败则进行两次握手。下面是代码和堆栈跟踪：

```
 //code to create MQ connectivity
    public static void main(String [] args){
    System.setProperty("javax.net.debug","ssl");
    //keystore path
    System.setProperty("javax.net.ssl.keyStore", "C:/keystores/keystore.jks");              
    System.setProperty("javax.net.ssl.keyStorePassword", "password");
    //trsutstore path
    System.setProperty("javax.net.ssl.trustStore", "C:/keystores/truststore.jks");
    System.setProperty("javax.net.ssl.trustStorePassword", "password");
    //cipher spec          
     MQEnvironment.sslCipherSuite = "SSL_RSA_WITH_NULL_MD5";
     MQEnvironment.hostname = "*****-ws3717";//system name
     MQEnvironment.port = 1414;
     MQEnvironment.channel = "channel_name";//channel name
     MQQueueManager qm = null;
     try {  qm = new MQQueueManager("QMNGR");
         System.out.println("Conn Successs!!!");
     } catch (MQException e) {
         e.printStackTrace();
     } 
     finally {
         try {
             qm.disconnect();
         } catch (Exception e) {
             e.printStackTrace();
             e.getCause();
         }
     }
     } } 
```

堆栈跟踪如下：

```
keyStore is : C:/keystores/keystore.jks
keyStore type is : jks
keyStore provider is : 
init keystore
init keymanager of type SunX509
***
found key for : selfsigned
chain [0] = [
[
  Version: V3
  Subject: CN=Pooja Joshi, OU=SGW, O=SUNGARD, L=PUNE, ST=MH, C=IN
  Signature Algorithm: MD5withRSA, OID = 1.2.840.113549.1.1.4
  Key:  Sun RSA public key, 1024 bits
  modulus: 132473562370742919150140985227175013875110053845431438145351913928668686945002725183702560702247749924970161010103451411451345824467592557656888776558245848713650717773344294766986771753500118311618188922138349812131167438364266468003061810102502957510761089213138803410346480285664890149111581898928681089463
  public exponent: 65537
  Validity: [From: Fri May 25 13:54:00 IST 2012,
               To: Sat May 25 13:54:00 IST 2013]
  Issuer: CN=Pooja Joshi, OU=SGW, O=SUNGARD, L=PUNE, ST=MH, C=IN
  SerialNumber: [    4fbf41a0]
]
  Algorithm: [MD5withRSA]
  Signature:
0000: 46 D0 CC DF AB 5F 6F D3   37 33 E1 64 F7 1B F7 3F  F...._o.73.d...?
0010: 98 95 06 09 F9 84 C8 3A   65 CF A7 24 BB 46 95 DF  .......:e..$.F..
0020: 8B 30 F2 BC 5C F9 CC 31   E4 36 53 43 BB 50 1B EF  .0..\..1.6SC.P..
0030: 8C 9B DB C0 41 C9 2C 37   AD B6 1D 30 BF 6E 75 E4  ....A.,7...0.nu.
0040: A9 05 E7 30 5A B1 30 84   6B 8E B7 7A 83 2D 33 01  ...0Z.0.k..z.-3.
0050: A1 44 86 A0 11 30 C3 4D   5B 68 7E 0B 09 48 03 CC  .D...0.M[h...H..
0060: DF C5 97 AD 87 40 DC 2A   9A 3D ED FC 27 D3 8B 4F  .....@.*.=..'..O
0070: F0 21 02 E8 62 6B 05 63   57 BB E8 4D 33 EA 35 9E  .!..bk.cW..M3.5.
]
***
trustStore is: C:\keystores\truststore.jks
trustStore type is : jks
trustStore provider is : 
init truststore
adding as trusted cert:
  Subject: CN=Pooja Joshi, OU=SGW, O=SUNGARD, L=PUNE, ST=MH, C=IN
  Issuer:  CN=Pooja Joshi, OU=SGW, O=SUNGARD, L=PUNE, ST=MH, C=IN
  Algorithm: RSA; Serial number: 0x4fbf4261
  Valid from Fri May 25 13:57:13 IST 2012 until Sat May 25 13:57:13 IST 2013
trigger seeding of SecureRandom
done seeding SecureRandom
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
%% No cached client session
*** ClientHello, SSLv3
RandomCookie:  GMT: 1321485794 bytes = { 138, 193, 95, 113, 86, 252, 250, 50, 154, 121, 73, 8, 93, 116, 115, 184, 182, 142, 240, 205, 15, 250, 172, 171, 111, 5, 122, 52 }
Session ID:  {}
Cipher Suites: [SSL_RSA_WITH_NULL_MD5]
Compression Methods:  { 0 }
Extension renegotiation_info, renegotiated_connection: <empty>
***
main, WRITE: SSLv3 Handshake, length = 52
main, READ: SSLv3 Handshake, length = 4875
*** ServerHello, SSLv3
RandomCookie:  GMT: 1321485794 bytes = { 250, 173, 248, 90, 241, 136, 107, 119, 99, 92, 80, 19, 223, 223, 152, 131, 216, 115, 242, 56, 198, 135, 156, 111, 210, 234, 220, 103 }
Session ID:  {240, 31, 0, 0, 80, 56, 194, 89, 112, 238, 203, 154, 79, 75, 68, 48, 106, 203, 19, 130, 88, 88, 88, 88, 226, 70, 196, 79, 13, 0, 0, 0}
Cipher Suite: SSL_RSA_WITH_NULL_MD5
Compression Method: 0
***
Warning: No renegotiation indication extension in ServerHello
%% Created:  [Session-1, SSL_RSA_WITH_NULL_MD5]
** SSL_RSA_WITH_NULL_MD5
*** Certificate chain
chain [0] = [
[
  Version: V3
  Subject: CN=Pooja Joshi, OU=SGW, O=SUNGARD, L=PUNE, ST=MH, C=IN
  Signature Algorithm: MD5withRSA, OID = 1.2.840.113549.1.1.4
  Key:  Sun RSA public key, 1024 bits
  modulus: 105605049659295333895264877648371480987144339115417104117025065956957634413900327625548229515098843172709660865042903412409581107015480309223474293490705595126088958625491899627683399717294708677347640098462040771799700233921554682196524988217754821345297656825451441457385676164016790486091736694366149540953
  public exponent: 65537
  Validity: [From: Fri May 25 13:57:13 IST 2012,
               To: Sat May 25 13:57:13 IST 2013]
  Issuer: CN=Pooja Joshi, OU=SGW, O=SUNGARD, L=PUNE, ST=MH, C=IN
  SerialNumber: [    4fbf4261]
]
  Algorithm: [MD5withRSA]
  Signature:
0000: 81 F5 2C 2A 77 63 F1 CD   D8 31 E1 BE B5 9B 28 C5  ..,*wc...1....(.
0010: 6B EA 24 BB 5C 3D EB D0   EB E3 86 2E D7 1C 0D 92  k.$.\=..........
0020: 36 A2 79 13 BC 74 40 C4   BF 7C F7 1B 05 8C 6B CF  6.y..t@.......k.
0030: EB 2C C2 0D E3 40 F7 F0   95 66 B6 85 AE 84 66 C9  .,...@...f....f.
0040: B7 C5 29 BE 71 1F 28 C0   83 1C 94 41 08 2A 44 45  ..).q.(....A.*DE
0050: 99 FD C5 77 28 26 FC 50   A3 69 32 BD F5 8B 0C A6  ...w(&.P.i2.....
0060: 13 21 0F BA B2 C6 A2 71   18 17 94 31 3B 7E 88 63  .!.....q...1;..c
0070: C0 01 76 DC 60 47 BB 3F   2F 7E 2A 73 84 DA 60 79  ..v.`G.?/.*s..`y
]
***
Found trusted certificate:
[
[
  Version: V3
  Subject: CN=Pooja Joshi, OU=SGW, O=SUNGARD, L=PUNE, ST=MH, C=IN
  Signature Algorithm: MD5withRSA, OID = 1.2.840.113549.1.1.4
  Key:  Sun RSA public key, 1024 bits
  modulus: 105605049659295333895264877648371480987144339115417104117025065956957634413900327625548229515098843172709660865042903412409581107015480309223474293490705595126088958625491899627683399717294708677347640098462040771799700233921554682196524988217754821345297656825451441457385676164016790486091736694366149540953
  public exponent: 65537
  Validity: [From: Fri May 25 13:57:13 IST 2012,
               To: Sat May 25 13:57:13 IST 2013]
  Issuer: CN=Pooja Joshi, OU=SGW, O=SUNGARD, L=PUNE, ST=MH, C=IN
  SerialNumber: [    4fbf4261]
]
  Algorithm: [MD5withRSA]
  Signature:
0000: 81 F5 2C 2A 77 63 F1 CD   D8 31 E1 BE B5 9B 28 C5  ..,*wc...1....(.
0010: 6B EA 24 BB 5C 3D EB D0   EB E3 86 2E D7 1C 0D 92  k.$.\=..........
0020: 36 A2 79 13 BC 74 40 C4   BF 7C F7 1B 05 8C 6B CF  6.y..t@.......k.
0030: EB 2C C2 0D E3 40 F7 F0   95 66 B6 85 AE 84 66 C9  .,...@...f....f.
0040: B7 C5 29 BE 71 1F 28 C0   83 1C 94 41 08 2A 44 45  ..).q.(....A.*DE
0050: 99 FD C5 77 28 26 FC 50   A3 69 32 BD F5 8B 0C A6  ...w(&.P.i2.....
0060: 13 21 0F BA B2 C6 A2 71   18 17 94 31 3B 7E 88 63  .!.....q...1;..c
0070: C0 01 76 DC 60 47 BB 3F   2F 7E 2A 73 84 DA 60 79  ..v.`G.?/.*s..`y
]
*** CertificateRequest
Cert Types: RSA
Cert Authorities:
<EMAILADDRESS=server-certs@thawte.com, CN=Thawte Server CA, OU=Certification Services Division, O=Thawte Consulting cc, L=Cape Town, ST=Western Cape, C=ZA>
<EMAILADDRESS=premium-server@thawte.com, CN=Thawte Premium Server CA, OU=Certification Services Division, O=Thawte Consulting cc, L=Cape Town, ST=Western Cape, C=ZA>
<EMAILADDRESS=personal-basic@thawte.com, CN=Thawte Personal Basic CA, OU=Certification Services Division, O=Thawte Consulting, L=Cape Town, ST=Western Cape, C=ZA>
<EMAILADDRESS=personal-freemail@thawte.com, CN=Thawte Personal Freemail CA, OU=Certification Services Division, O=Thawte Consulting, L=Cape Town, ST=Western Cape, C=ZA>
<EMAILADDRESS=personal-premium@thawte.com, CN=Thawte Personal Premium CA, OU=Certification Services Division, O=Thawte Consulting, L=Cape Town, ST=Western Cape, C=ZA>
<CN=VeriSign Class 1 Public Primary Certification Authority - G3, OU="(c) 1999 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US>
<CN=VeriSign Class 2 Public Primary Certification Authority - G3, OU="(c) 1999 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US>
<CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU="(c) 1999 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US>
<CN=VeriSign Class 4 Public Primary Certification Authority - G3, OU="(c) 1999 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US>
<OU=VeriSign Trust Network, OU="(c) 1998 VeriSign, Inc. - For authorized use only", OU=Class 1 Public Primary Certification Authority - G2, O="VeriSign, Inc.", C=US>
<OU=VeriSign Trust Network, OU="(c) 1998 VeriSign, Inc. - For authorized use only", OU=Class 2 Public Primary Certification Authority - G2, O="VeriSign, Inc.", C=US>
<OU=VeriSign Trust Network, OU="(c) 1998 VeriSign, Inc. - For authorized use only", OU=Class 3 Public Primary Certification Authority - G2, O="VeriSign, Inc.", C=US>
<OU=VeriSign Trust Network, OU="(c) 1998 VeriSign, Inc. - For authorized use only", OU=Class 4 Public Primary Certification Authority - G2, O="VeriSign, Inc.", C=US>
<OU=Class 1 Public Primary Certification Authority, O="VeriSign, Inc.", C=US>
<OU=Class 2 Public Primary Certification Authority, O="VeriSign, Inc.", C=US>
<OU=Class 3 Public Primary Certification Authority, O="VeriSign, Inc.", C=US>
<CN=VeriSign Class 3 Secure Server CA, OU=Terms of use at https://www.verisign.com/rpa (c)05, OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US>
<CN=Entrust.net Secure Server Certification Authority, OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS incorp. by ref. (limits liab.), O=Entrust.net, C=US>
<CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net>
<CN=Entrust.net Client Certification Authority, OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/Client_CA_Info/CPS incorp. by ref. limits liab., O=Entrust.net, C=US>
<CN=Entrust.net Client Certification Authority, OU=(c) 2000 Entrust.net Limited, OU=www.entrust.net/GCCA_CPS incorp. by ref. (limits liab.), O=Entrust.net>
<CN=Entrust.net Secure Server Certification Authority, OU=(c) 2000 Entrust.net Limited, OU=www.entrust.net/SSL_CPS incorp. by ref. (limits liab.), O=Entrust.net>
<CN=Pooja Joshi, OU=SGW, O=SUNGARD, L=PUNE, ST=MH, C=IN>
*** ServerHelloDone
matching alias: selfsigned
*** Certificate chain
chain [0] = [
[
  Version: V3
  Subject: CN=Pooja Joshi, OU=SGW, O=SUNGARD, L=PUNE, ST=MH, C=IN
  Signature Algorithm: MD5withRSA, OID = 1.2.840.113549.1.1.4

  Key:  Sun RSA public key, 1024 bits
  modulus: 132473562370742919150140985227175013875110053845431438145351913928668686945002725183702560702247749924970161010103451411451345824467592557656888776558245848713650717773344294766986771753500118311618188922138349812131167438364266468003061810102502957510761089213138803410346480285664890149111581898928681089463
  public exponent: 65537
  Validity: [From: Fri May 25 13:54:00 IST 2012,
               To: Sat May 25 13:54:00 IST 2013]
  Issuer: CN=Pooja Joshi, OU=SGW, O=SUNGARD, L=PUNE, ST=MH, C=IN
  SerialNumber: [    4fbf41a0]
]
  Algorithm: [MD5withRSA]
  Signature:
0000: 46 D0 CC DF AB 5F 6F D3   37 33 E1 64 F7 1B F7 3F  F...._o.73.d...?
0010: 98 95 06 09 F9 84 C8 3A   65 CF A7 24 BB 46 95 DF  .......:e..$.F..
0020: 8B 30 F2 BC 5C F9 CC 31   E4 36 53 43 BB 50 1B EF  .0..\..1.6SC.P..
0030: 8C 9B DB C0 41 C9 2C 37   AD B6 1D 30 BF 6E 75 E4  ....A.,7...0.nu.
0040: A9 05 E7 30 5A B1 30 84   6B 8E B7 7A 83 2D 33 01  ...0Z.0.k..z.-3.
0050: A1 44 86 A0 11 30 C3 4D   5B 68 7E 0B 09 48 03 CC  .D...0.M[h...H..
0060: DF C5 97 AD 87 40 DC 2A   9A 3D ED FC 27 D3 8B 4F  .....@.*.=..'..O
0070: F0 21 02 E8 62 6B 05 63   57 BB E8 4D 33 EA 35 9E  .!..bk.cW..M3.5.
]
***
*** ClientKeyExchange, RSA PreMasterSecret, SSLv3
main, WRITE: SSLv3 Handshake, length = 711
SESSION KEYGEN:
PreMaster Secret:
0000: 03 00 3D 04 C8 EF 08 83   A4 EF 85 1C D9 96 A0 77  ..=............w
0010: 32 2A A5 43 14 98 11 6F   DD 01 52 73 4D DF B4 5A  2*.C...o..RsM..Z
0020: C5 2E FC 2A C0 F6 C2 9B   11 23 B2 C0 7B 59 E8 96  ...*.....#...Y..
CONNECTION KEYGEN:
Client Nonce:
0000: 4F C4 46 E2 8A C1 5F 71   56 FC FA 32 9A 79 49 08  O.F..._qV..2.yI.
0010: 5D 74 73 B8 B6 8E F0 CD   0F FA AC AB 6F 05 7A 34  ]ts.........o.z4
Server Nonce:
0000: 4F C4 46 E2 FA AD F8 5A   F1 88 6B 77 63 5C 50 13  O.F....Z..kwc\P.
0010: DF DF 98 83 D8 73 F2 38   C6 87 9C 6F D2 EA DC 67  .....s.8...o...g
Master Secret:
0000: C0 20 A8 BC D1 A7 06 B0   C5 07 CA A7 83 C5 35 9E  . ............5.
0010: 20 AB B6 28 8C 7E EF 14   CB 9D C1 ED C5 62 F8 A1   ..(.........b..
0020: 6A DE 9F AF 16 5B 2F 1D   21 8F A3 2C F7 B9 3D 36  j....[/.!..,..=6
Client MAC write Secret:
0000: 09 E8 CE 6C D1 2D 43 86   7E 74 1C 5F 68 DA E2 AE  ...l.-C..t._h...
Server MAC write Secret:
0000: CE 62 DA F7 2C F2 2B 4A   AD 47 8F 61 BD 58 51 BD  .b..,.+J.G.a.XQ.
... no encryption keys used
... no IV used for this cipher
*** CertificateVerify
main, WRITE: SSLv3 Handshake, length = 134
main, WRITE: SSLv3 Change Cipher Spec, length = 1
*** Finished
verify_data:  { 4, 127, 139, 212, 93, 181, 170, 62, 121, 196, 243, 156, 251, 103, 206, 222, 2, 10, 84, 35, 186, 251, 144, 6, 31, 97, 135, 179, 160, 127, 204, 93, 100, 140, 74, 79 }
***
main, WRITE: SSLv3 Handshake, length = 56
main, waiting for close_notify or alert: state 1
main, Exception while waiting for close java.net.SocketException: Software caused connection abort: recv failed
main, handling exception: java.net.SocketException: Software caused connection abort: recv failed
MQJE001: An MQException occurred: Completion Code 2, Reason 2397
MQJE030: IOException during security flows
MQJE001: Completion Code 2, Reason 2397
com.ibm.mq.MQException: MQJE001: Completion Code 2, Reason 2397
    at com.ibm.mq.MQManagedConnectionJ11.<init>(MQManagedConnectionJ11.java:219)
    at com.ibm.mq.MQClientManagedConnectionFactoryJ11._createManagedConnection(MQClientManagedConnectionFactoryJ11.java:318)
    at com.ibm.mq.MQClientManagedConnectionFactoryJ11.createManagedConnection(MQClientManagedConnectionFactoryJ11.java:338)
    at com.ibm.mq.StoredManagedConnection.<init>(StoredManagedConnection.java:84)
    at com.ibm.mq.MQSimpleConnectionManager.allocateConnection(MQSimpleConnectionManager.java:168)
    at com.ibm.mq.MQQueueManagerFactory.obtainBaseMQQueueManager(MQQueueManagerFactory.java:772)
    at com.ibm.mq.MQQueueManagerFactory.procure(MQQueueManagerFactory.java:697)
    at com.ibm.mq.MQQueueManagerFactory.constructQueueManager(MQQueueManagerFactory.java:657)
    at com.ibm.mq.MQQueueManagerFactory.createQueueManager(MQQueueManagerFactory.java:153)
    at com.ibm.mq.MQQueueManager.<init>(MQQueueManager.java:451)
    at com.test.SSlTest.main(SSlTest.java:68)
Caused by: java.net.SocketException: Software caused connection abort: recv failed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:798)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.waitForClose(SSLSocketImpl.java:1493)
    at com.sun.net.ssl.internal.ssl.HandshakeOutStream.flush(HandshakeOutStream.java:103)
    at com.sun.net.ssl.internal.ssl.Handshaker.sendChangeCipherSpec(Handshaker.java:689)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.sendChangeCipherAndFinish(ClientHandshaker.java:985)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverHelloDone(ClientHandshaker.java:904)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:238)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:893)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1138)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1165)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1149)
    at com.ibm.mq.SSLHelper.configureSSLSocket(SSLHelper.java:567)
    at com.ibm.mq.SSLHelper.createSSLSocket(SSLHelper.java:150)
    at com.ibm.mq.MQInternalCommunications.createSocketConnection(MQInternalCommunications.java:2264)
    at com.ibm.mq.MQv6InternalCommunications$1.run(MQv6InternalCommunications.java:157)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.ibm.mq.MQv6InternalCommunications.initialize(MQv6InternalCommunications.java:154)
    at com.ibm.mq.MQv6InternalCommunications.<init>(MQv6InternalCommunications.java:102)
    at com.ibm.mq.MQSESSIONClient.MQCONNX(MQSESSIONClient.java:1337)
    at com.ibm.mq.MQSESSIONClient.MQCONN(MQSESSIONClient.java:1246)
    at com.ibm.mq.MQManagedConnectionJ11.<init>(MQManagedConnectionJ11.java:184)
    ... 10 more 
```

请帮助我....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T04:51:24.277

你的调试过程很完美！首次设置 SSL 时，始终先在不使用 SSL 的情况下进行测试（验证通道名称拼写、侦听器端口等），然后使用匿名 SSL 进行检查（验证客户端可以验证 QMgr 的证书），最后使用相互验证的 SSL 进行检查.

在这种情况下，失败出现在最后一步。至此，我们知道 QMgr 可以读取它的 KDB，并且客户端可以读取它的信任库。此时可能出现的问题很少，主要问题是客户端无法找到其私钥或 QMgr 无法验证客户端的密钥。

由于跟踪显示客户端能够访问其密钥，我们知道这不是问题所在。在大多数情况下，这表明 QMgr 方面存在问题。在这种情况下有两个典型的问题。

1.  客户端的密钥未正确加载到 QMgr 的密钥库中（或者可能加载了之前版本的密钥）。
2.  QMgr 没有加载当前版本的 KDB。

由于您提供了堆栈跟踪并且密钥交换的所有其他方面似乎都很好，所以我将大胆猜测并说原因是上面的＃2。如果是这样，那么它很容易修复。您可以使用 runmqsc 输入`REFRESH SECURITY TYPE(SSL)`导致 QMgr 停止所有 SSL 通道并从其缓存中刷新 KDB 的命令。通过右键单击 QMgr，可以在 WMQ Explorer 中找到等效命令。或者只是反弹 QMgr，它完成了同样的事情。这些方法中的任何一种都会导致 QMgr 重新加载 KDB，从而使其能够访问新证书。

**更新：**
对不起，这不是问题。你能重新创建失败并查看 QMgr 的错误日志吗？`/var/mqm/qmgrs/<qmgrname>/errors/AMQERR01.LOG`失败后， 您应该会在右下角看到错误。

您还可以在客户端和 QMgr 上转储证书详细信息以验证它们是否匹配并在 QMgr 的 kdb 中标记为受信任。您已经知道如何使用 keytool 执行此操作。根据您的 WMQ 服务器版本，您可以使用`gsk7capicmd`或`gsk8capicmd`或与 WMQ v7.1 一起使用`runmqakm`。首先使用命令转储 QMgr 的 KDB `-cert -list`，然后使用转储客户端的证书`-cert -details`并将结果作为问题的更新发布。

这些命令将为您提供所需参数的帮助。如果您想了解更详细的信息，请访问[https://t-rob.net/wmq/](https://t-rob.net/wmq/)，您会在页面中间找到指向 GSKit 7 和 GSKit 8 手册的链接。该`runmqakm`命令是 GSKit 8 的包装器，因此如果 QMgr 正在运行 WMQ v7.1，请使用 GSKit 8 手册。

# sockets - 如何让 uWSGI 监听另一台机器？

> ID：10793054
> 
> 赞同：1
> 
> 时间：2012-05-29T04:25:51.013
> 
> 标签：sockets, ubuntu, tcp, nginx, uwsgi

我在同一个局域网上有两台机器，机器 A 运行 nginx，机器 B 运行 uWSGI。我希望 nginx 通过 TCP 端口 1717 与 uWSGI 通信。

（理想情况下，我想使用该`service uwsgi start`命令来执行此操作，这样我就可以从 Ubuntu 中内置的新贵脚本中获利。我不介意编辑该脚本，但在查看它之后，我认为这不是正确的做法！）

我尝试运行`sudo uwsgi start --uwsgi-socket 127.0.0.1:1717`，但它不起作用，并且 nginx 日志会显示以下错误（括号中的数据已清理）：

```
2012/05/29 00:06:46 [error] 19608#0: *6 connect() failed (111: Connection refused) while connecting to upstream, client: {public ip}, server: {domain}, request: "GET / HTTP/1.1", upstream: "uwsgi://{machine B's IP}:1717", host: "{domain}" 
```

显然这种方式行不通。我对 uwsgi 了解不足，无法自行解决此问题，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:43:09.220

添加

```
socket = address:1717 
```

在应用程序的 uwsgi 配置中

# jquery - 未捕获的类型错误：对象# has no method 'validate' I am getting the titular error when I try to call the validate() function on my form. All the research I have done says "make sure you're calling it" however I am 95% sure I am a 问问题 问问题 2012-05-29T04:25:53.863 6185 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am getting the titular error when I try to call the validate() function on my form. All the research I have done says "make sure you're calling it" however I am 95% sure I am as this is my call: When I click on them in Chromes dev tools they come up with the plugin files, leading me to believe they are included. They are being called after jQuery so I highly doubt it's that. The form looks like this:And the call like this:  This thing has me stumped, I am sure it's a stupid little syntax or priority error. Can anybody with fresh eyes spot it? FYI the site is running wordpress, as you may be able to tell by the jQuery being pulled from a plugins file. In response to a comment here is the Chrome console output of console.log(jQuery("form"));: E.fn.E.init 0: HTMLFormElement length: 1 prevObject: E.fn.E.init __proto__: Object This part jQuery("form").validate({ }); need to be in $(document).ready(function(){}); // or jQuery(document).ready(function(){}); So it is shown like this. // '$' indicates 'jQuery' $(document).ready(function(){ jQuery("form").validate({ //your options. }); }); jquerywordpressjquery-validate 4 2 回答 2 This answer is useful 1 It turns out it must be a wordpress 'quirk'. I was calling the js from a different plugin and using wp_equeue_script() The wp_equeue_script() added ?ver=3.3.2 to the end and as it wasn't ver 3.3.2 it wasn't being loaded depsite chrome showing it as called. 于 2012-05-30T03:17:18.060 回答 This answer is useful 0 这部分 jQuery("form").validate({ }); 需要在 $(document).ready(function(){}); // or jQuery(document).ready(function(){}); 所以它是这样显示的。 // '$' indicates 'jQuery' $(document).ready(function(){ jQuery("form").validate({ //your options. }); }); 于 2012-05-29T04:55:09.030 回答 Related 1 plone - 使用 plone.app.discussion 在 FolderishType 中也启用评论 2 symfony - 我应该在布尔学说字段上添加断言验证吗？ 2 java - 如何使用 net.sf.json 库验证给定字符串是否有效 JsonArray 2 perl - perl 脚本使用 XML 解析器读取文本文件中的值并将其替换为 xml 文件 1 actionscript-3 - 如何获取一列的所有值并计算总数 1 computational-geometry - SVG在Javascript中将多边形转换为曲线转换 1 android - 在 Android 中使用广播接收器读取 NFC 标签 3 apache - Solr - DataImportHandler：索引失败。回滚所有更改 2 bash - 如何比较文件中的两个字段并使用awk打印具有数据的字段？ 1 html - 我正在尝试使用 CSS3 过渡实现悬停效果 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10793055
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery, wordpress, jquery-validate

I am getting the titular error when I try to call the `validate()` function on my form. All the research I have done says "make sure you're calling it" however I am 95% sure I am as this is my call:

```
<script type="text/javascript" src="http://test.elitetradersgroup.com.au/wp-content/plugins/a-test/jquery.validate.min.js?ver=3.3.2"></script>
<script type="text/javascript" src="http://test.elitetradersgroup.com.au/wp-content/plugins/a-test/additional-methods.min.js?ver=3.3.2"></script> 
```

When I click on them in Chromes dev tools they come up with the plugin files, leading me to believe they are included. They are being called after jQuery so I highly doubt it's that.

The form looks like this:

```
<form action="http://test.elitetradersgroup.com.au/broker-tools/amazon-upload/" method="post" class="upload" enctype="multipart/form-data">
    <label class="title hide" for="theTitle">Email Title</label>
    <input id="theTitle" class="hide" type="text" name="theTitle"><div id="amazon_title_char_count" class="hide"></div><div id="excess_warning" style="display:none; font-weight: bold;color: red;"></div>

    <label class="title hide" for="theSite">Select Email From</label>

        <div class="option hide"><span class="sec_name">Elite Traders Group</span><div class="opt-cont"><input class="radio broadcast" type="radio" id="sec_2" name="theSite" value="s_2"><label class="radio" for="sec_2">Broadcast</label></div></div><div class="option hide"><span class="sec_name">Elite Futures Mastery</span><div class="opt-cont"><input class="radio broadcast" type="radio" id="sec_6" name="theSite" value="s_6"><label class="radio" for="sec_6">Broadcast</label></div><div class="opt-cont"><input class="radio daily-forex-room" type="radio" id="sec_10" name="theSite" value="s_10"><label class="radio" for="sec_10">Daily Forex Room</label></div><div class="opt-cont"><input class="radio day-ahead" type="radio" id="sec_3" name="theSite" value="s_3"><label class="radio" for="sec_3">Day Ahead</label></div><div class="opt-cont"><input class="radio the-daily-beef" type="radio" id="sec_9" name="theSite" value="s_9"><label class="radio" for="sec_9">The Daily Beef</label></div><div class="opt-cont"><input class="radio trade-progress" type="radio" id="sec_5" name="theSite" value="s_5"><label class="radio" for="sec_5">Trade Progress</label></div><div class="opt-cont"><input class="radio trade-recommendation" type="radio" id="sec_11" name="theSite" value="s_11"><label class="radio" for="sec_11">Trade Recommendation</label></div><div class="opt-cont"><input class="radio week-ahead" type="radio" id="sec_4" name="theSite" value="s_4"><label class="radio" for="sec_4">Week Ahead</label></div></div><div class="option hide"><span class="sec_name">Daily Wealth Report</span><div class="opt-cont"><input class="radio technical-toolbox" type="radio" id="sec_1" name="theSite" value="s_1"><label class="radio" for="sec_1">Technical Toolbox</label></div></div><div class="option hide"><span class="sec_name">Elite Options Mastery</span><div class="opt-cont"><input class="radio broadcast" type="radio" id="sec_7" name="theSite" value="s_7"><label class="radio" for="sec_7">Broadcast</label></div></div><div class="option hide"><span class="sec_name">Options Made Easy</span><div class="opt-cont"><input class="radio broadcast" type="radio" id="sec_8" name="theSite" value="s_8"><label class="radio" for="sec_8">Broadcast</label></div></div>    

<label class="title hide">Files to include</label>
<div id="container">
    <div id="filelist"></div>
    <div id="queue-time"></div>
    <br>
    <a id="pickfiles" class="hide" href="#">[Select files]</a>

</div>

    <label class="title hide">Extras</label>

    <input type="checkbox" class="hide" id="positons" name="positions" value="positions-box"><label class="hide" for="positons">Include Positions</label>
    <input type="checkbox" class="hide" id="message" name="message" value="message-box"><label class="hide" for="message">Include message</label>
    <input type="checkbox" class="hide" id="additional-webinar" name="additional-webinar" value="additional-webinar-box"><label class="hide" for="additional-webinar">Include Additional Webinar</label>

    <div class="hide" id="positions-box" style="display:none;">
        <label class="title">Positions Info</label>
        <label>New/Potential Trades</label>
        <input type="text" name="np-trades">
        <label>Current Trades</label>
        <input type="text" name="cur-trades">
        <label>Updates</label>
        <input type="text" name="update-trades">
    </div>
    <div class="hide" id="message-box" style="display:none;">
        <label class="title">Email Message</label>
        <textarea id="message-ta" name="message" cols="50" rows="10"></textarea>
        <div id="message_char_count"></div>
        <div id="message_excess_warning" style="display:none; font-weight: bold;color: red;"></div>
    </div>
    <div class="hide" id="additional-webinar-box" style="display:none;">
        <label class="title">Select Additional Webinar</label>
        <select name="additional-webinar-selection">
            <option value="0" selected="">Please Select</option>
            <option value="173">Del All test(Elite Options Mastery)</option><option value="171">Glob Test(Elite Futures Mastery)</option><option value="169">Test 2(Elite Futures Mastery)</option><option value="167">Test(Elite Futures Mastery)</option><option value="164">Test(Elite Futures Mastery)</option><option value="162">New Min TEst(Elite Futures Mastery)</option><option value="160">Min Height Test(Elite Options Mastery)</option><option value="158">Title Yo(Elite Options Mastery)</option><option value="156">Title(Options Made Easy)</option><option value="96">TT Test(Daily Wealth Report)</option>        </select>
    </div>

    <input type="hidden" value="elitetradersgroup" name="amazon_bucket">
    <button class="hide" id="validate" type="button" onclick="broker_validate()">Validate</button>
    <button class="hide" id="juploader" type="button" style="display:none">Upload</button>
<input type="hidden" name="uid" value="p16ubcu16t1gus18ls12g79ls1"></form> 
```

And the call like this:

```
<script type="text/javascript">
    function broker_validate() {
        jQuery("form").validate({ //line where the error pops up in console
            rules: {
                theTitle: {
                    required: true
                },
            messages: {
                theTitle: {
                    required: "The email needs a title"
                }
            }
            }
        })

        if (jQuery("form").valid()) {
            jQuery("#validate").hide();
            jQuery("#juploader").show();
        }

    };

</script> 
```

This thing has me stumped, I am sure it's a stupid little syntax or priority error. Can anybody with fresh eyes spot it?

FYI the site is running wordpress, as you may be able to tell by the jQuery being pulled from a plugins file.

In response to a comment here is the Chrome console output of `console.log(jQuery("form"));`:

```
E.fn.E.init
    0: HTMLFormElement
    length: 1
    prevObject: E.fn.E.init
    __proto__: Object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:17:18.060

It turns out it must be a wordpress 'quirk'. I was calling the js from a different plugin and using `wp_equeue_script()` The `wp_equeue_script()` added `?ver=3.3.2` to the end and as it wasn't `ver 3.3.2` it wasn't being loaded depsite chrome showing it as called.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:55:09.030

这部分

```
 jQuery("form").validate({ }); 
```

需要在

```
$(document).ready(function(){});   // or jQuery(document).ready(function(){}); 
```

所以它是这样显示的。

```
//  '$' indicates 'jQuery'
$(document).ready(function(){
    jQuery("form").validate({ //your options. });
}); 
```

# linux - 新安装的 Grails 2.0.3 Ubuntu 看起来不错，但运行 grails 几秒钟后才返回

> ID：10793059
> 
> 赞同：0
> 
> 时间：2012-05-29T04:26:52.270
> 
> 标签：linux, grails, installation

我刚刚使用 apt-get 在我的 Ubuntu 机器上安装了 grails 2.0.3，如下所述：

[http://grails.org/下载](http://grails.org/Download)

一切看起来都很好。

当我在终端中键入 grails 时，大约需要 5 秒钟，然后它返回到提示符而没有做任何事情。没有错误，没有文字。

我已经尝试添加 GRAILS_HOME，即使下载说明说它不是必需的，但这也无济于事。

它很好地找到了grails，它什么也没做。

在此之前我没有明确安装 groovy。这是我错过的一步（我不这么认为，因为我看到它包含在安装的 libs 文件夹中）还是我需要做更多才能完成安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:51:56.213

我有同样的问题，但我设法解决了。

我在 Ubuntu 中安装了 grails 2.1.2，在 VirtualBox 实例中运行，内存为 512MB。

我必须安装 java 6 来运行 grails 并配置`JAVA_HOME`环境变量，尽管 grails 文档说没有必要。

根据几个资源，它可能是由 grails 内存使用问题引起的。似乎 grails 使用了大量的内存或类似的东西。这些资源是：

*   堆栈溢出线程：[Grails 应用程序占用过多内存](https://stackoverflow.com/questions/2535458/grails-application-hogging-too-much-memory)
*   [Grails 部署文档](http://www.grails.org/Deployment)
*   Stack Overflow 线程：[为 grails run-app 增加 Xmx 和 Xms](https://stackoverflow.com/questions/1260645/increase-xmx-and-xms-for-grails-run-app)

因此，按照他们的建议，我使用以下命令配置了一个环境变量 GRAILS_OPTS：

```
export GRAILS_OPTS="-server -Xms128M -Xmx128 -XX:MaxPermSize=256M" 
```

试试看，告诉我们它是否适合你，谢谢。

# arrays - 排序数组中的重复数字

> ID：10793060
> 
> 赞同：2
> 
> 时间：2012-05-29T04:26:58.333
> 
> 标签：arrays, algorithm, sorting, hashtable

我最近在一次采访中被问到这个问题：

在排序数组中查找重复数字的最有效方法是什么？

我的答案是基于使用哈希表，其中键作为数组元素，数组中的重复次数作为值；迭代数组并更新哈希表。最后，可以检查哈希表中 count > 1 的元素；这些是重复的元素。

有一个更好的方法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T04:32:30.410

好吧，您可以使用`O(1)`. 由于它是一个排序数组，因此您只需将当前数字与下一个数字相减即可。如果结果是，`0`那么你有一个重复的数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T04:35:17.100

检查数组中的每个元素（最后一个元素除外）与下一个元素，如果它们相等，则停止并退出：你找到了一个重复的元素。它之所以有效，是因为数组已排序，它不需要任何额外的空间，并且在最坏的情况下（没有重复元素）它将是 O(n)，因为必须遍历所有数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T04:45:19.713

- 对数组进行排序

-找到相邻索引值之间的差异

- 如果差异为 0，则重复并记下索引

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-17T05:31:44.450

```
public static int searchrepeativeVal(int a[]){

    int left =0;
    int right= a.length;
    int mid;

    while (right-left>1){

        mid= (left+right)/2;

        if(a[mid]!=mid+1){
            if(a[mid]== mid){
                return mid;
            }else{
                right=mid;
            }
        }else{

            if(a[mid]==mid ){
                return mid;
            }else{
                left =mid;
            }
        }
    }

    return -1;
} 
```

# c# - 如何在 ASP.NET MVC3 的视图中读取列表的内容

> ID：10793061
> 
> 赞同：0
> 
> 时间：2012-05-29T04:27:02.660
> 
> 标签：c#, asp.net-mvc-3, strong-typing

所以我有这个代码：

```
public ActionResult Agregar(int id)
        {
            Producto producto = db.Productos.Find(id);

            var list = new List<Carrito> { 
                new Carrito { ProductId = producto.ID, Cantidad = 1, PrecioUnitario = producto.Precio } 
            };

            return View(list);
        } 
```

我将变量传递`list`给视图，问题是，我不知道如何访问`ProductId`或`Cantidad`

知道怎么做吗？

另外，假设变量`list`有多个对象，如何通过a打印每个对象的结果`foreach`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:32:34.613

您的视图 ( `Agregar.cshtml`) 应该是这样的。

```
@model IEnumerable<Carrito>

<h2>We are gonna show the items in a loop now..</h2>
@foreach(var item in Model)
{
  <p>@item.ProductId</p>
  <p>@item.Cantidad </p>
} 
```

# video-streaming - 如何使用 vlcj 减少在 java 中播放 rtsp 实时视频流的延迟

> ID：10793062
> 
> 赞同：5
> 
> 时间：2012-05-29T04:27:03.350
> 
> 标签：video-streaming, rtsp, videochat, vlcj

我开发了一个视频聊天应用程序，但是视频显示延迟很高。视频是通过 rtsp 流式传输的。如何减少播放 rtsp 流的延迟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:45:54.487

您使用的是什么视频编解码器？您应该能够使用以下选项将延迟减少到 <1s：

1.  添加`:live-caching=0`到输入处理选项（例如打开网络摄像头时）
2.  使用编解码器，例如将编解码器更改为*mpeg-4*（对于我将 Android 设备作为流接收器的配置，似乎效果更好）
3.  添加`:sout-mux-caching=10`（或其他一些低值）到流选项

使用以下行将网络摄像头视频（注意：无音频）流式传输到我的 Android，我能够稍微减少延迟：

`:sout=#transcode{vcodec=mp4v,vb=800,fps=30,scale=0.25,acodec=none}:rtp{sdp=rtsp://:8554/} :sout-keep :sout-mux-caching=10`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-15T20:16:14.770

目前你必须像这样配置

```
String[] options = {
                ":file-caching=0",
                ":network-caching=300",
                ":sout = #transcode{vcodec=x264,vb=800,scale=0.25,acodec=none,fps=23}:display :no-sout-rtp-sap :no-sout-standard-sap :ttl=1 :sout-keep"};
mediaPlayer.playMedia(address, options); 
```

最重要的是`network-caching=300`。默认为 1000 毫秒。

# python - 在 python 中自定义 lucene 分析器

> ID：10793063
> 
> 赞同：2
> 
> 时间：2012-05-29T04:27:20.097
> 
> 标签：python, django, lucene, analyzer

我正在用 Django 开发一个网络应用程序。我想使用 Lucene 作为搜索引擎。但是，我想自定义分析器以支持我的目的。例如，一个单词“\(H_2\)”在索引之前应该变成“H2”。我什至不确定这是否是分析器的工作。

我做了谷歌，发现这些页面很有用：

[http://packages.python.org/pyes/guide/reference/index-modules/analysis/index.html](http://packages.python.org/pyes/guide/reference/index-modules/analysis/index.html)

[http://hi.baidu.com/aruizen/blog/item/7b5fcb2a05ff122cd52af12a.html](http://hi.baidu.com/aruizen/blog/item/7b5fcb2a05ff122cd52af12a.html) （从 Python 中“扩展”Java 类）

但我仍然无法理解如何在 Python 中自定义 StandardAnalyzer。如您所见，上面的链接给了我非常不同的代码。

谢谢！

# sql - SQL Trigger, set year to current year

> ID：10793070
> 
> 赞同：1
> 
> 时间：2012-05-29T04:28:10.980
> 
> 标签：sql, oracle

I want to make a trigger that sets the joined attribute to the current year. This is what I have working:

```
CREATE OR REPLACE TRIGGER foo2
BEFORE INSERT ON memberof
FOR EACH ROW
BEGIN :new.joined := 2012;
END; 
```

I want to change 2012 to the code below but keep getting compiler errors. What's the proper syntax to accomplish this?

```
select extract(year from sysdate) from dual 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:02:46.043

This should do the trick:

```
CREATE OR REPLACE TRIGGER foo2
BEFORE INSERT ON memberof
FOR EACH ROW
BEGIN 
    :new.joined := to_char(sysdate,'YYYY');
END; 
```

For more information see here: [http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm)

and here: [http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions183.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions183.htm)

BTW OMG Ponies is correct this normally should be done with default values which can take an expression like

```
to_char(sysdate,'YYYY') 
```

as well.

# android - Android 使用 float[] 作为顶点导致 OpenGL 错误 0x502

> ID：10793074
> 
> 赞同：0
> 
> 时间：2012-05-29T04:28:34.223
> 
> 标签：android, opengl-es-2.0, floatbuffer

我正在尝试在 Android 上的 OpenGLES 2.0 中为我的顶点使用浮点数组，而不是 FloatBuffer，但是当我这样做时，glDrawArrays 会给出错误 0x502 或 GL_INVALID_OPERATION。

我没有收到此错误，并且当我使用 FloatBuffers 时一切正常。

我读过这个错误通常是由未设置的程序引起的。我只使用一个着色器程序，并在一切初始化时设置它。

这是我的代码

```
public class LineEngine {
    private static final float[] IDENTIY = new float[16];
    private float[] mLinePoints;
    private float[] mLineColors;
    private int mCount;

    public LineEngine(int maxLines) {
        Matrix.setIdentityM(IDENTIY, 0);

        mLinePoints = new float[maxLines * 2 * 4];
        mLineColors = new float[maxLines * 2 * 4];

        reset();
    }

    public void addLine(float[] position, float[] color) {
        int offset = mCount * 2 * 4;
        System.arraycopy(position, 0, mLinePoints, offset, 8);
        System.arraycopy(color, 0, mLineColors, offset, 4);
        System.arraycopy(color, 0, mLineColors, offset + 4, 4);

        mCount++;
    }

    public void reset() {
        mCount = 0;
    }

    public void draw() {
        if (mCount > 0) {
            GraphicsEngine.setMMatrix(IDENTIY);
            GraphicsEngine.setColors(mLineColors);
            GraphicsEngine.setVertices4d(mLinePoints);
            GraphicsEngine.disableTexture();
            GLES20.glDrawArrays(GLES20.GL_LINES, 0, mCount * 2);

            int error = GLES20.glGetError();
            if (error != 0)
                Log.e("OpenGL", "Draw " + error); // Prints error 1282

            GraphicsEngine.disableColors();
            reset();
        }
    }
} 
```

此代码工作正常，没有错误

```
public class LineEngine {
    private static final float[] IDENTIY = new float[16];
    private FloatBuffer mLinePoints;
    private FloatBuffer mLineColors;
    private int mCount;

    public LineEngine(int maxLines) {
        Matrix.setIdentityM(IDENTIY, 0);

        ByteBuffer byteBuf = ByteBuffer.allocateDirect(maxLines * 2 * 4 * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        mLinePoints = byteBuf.asFloatBuffer();

        byteBuf = ByteBuffer.allocateDirect(maxLines * 2 * 4 * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        mLineColors = byteBuf.asFloatBuffer();

        reset();
    }

    public void addLine(float[] position, float[] color) {
        mLinePoints.put(position, 0, 8);
        mLineColors.put(color, 0, 4);
        mLineColors.put(color, 0, 4);
        mCount++;
    }

    public void reset() {
        mLinePoints.position(0);
        mLineColors.position(0);
        mCount = 0;
    }

    public void draw() {
        if (mCount > 0) {
            mLinePoints.position(0);
            mLineColors.position(0);
            GraphicsEngine.setMMatrix(IDENTIY);
            GraphicsEngine.setColors(mLineColors);
            GraphicsEngine.setVertices4d(mLinePoints);
            GraphicsEngine.disableTexture();
            GLES20.glDrawArrays(GLES20.GL_LINES, 0, mCount * 2);

            int error = GLES20.glGetError();
            if (error != 0)
                Log.e("OpenGL", "Draw " + error); // no errors

            GraphicsEngine.disableColors();
            reset();
        }
    }
} 
```

相关的 GraphicsEngine 代码在这里

```
public static void setVertices4d(FloatBuffer vertices) {
    GLES20.glVertexAttribPointer(aVertexHandle, 4, GLES20.GL_FLOAT, false,
            16, vertices);
    GLES20.glEnableVertexAttribArray(aVertexHandle);
    mState.shape = -1;
}

public static void setVertices4d(float[] vertices) {
    GLES20.glVertexAttrib4fv(aVertexHandle, vertices, 0);
    GLES20.glEnableVertexAttribArray(aVertexHandle);
    mState.shape = -1;
}

public static void setColors(FloatBuffer colors){
    GLES20.glVertexAttribPointer(aColor, 4, GLES20.GL_FLOAT, false,
            16, colors);
    GLES20.glEnableVertexAttribArray(aColor);
    GLES20.glUniform1i(GraphicsEngine.uEnableColors, 1);
}

public static void setColors(float[] colors){
    GLES20.glVertexAttrib4fv(aColor, colors, 0);
    GLES20.glEnableVertexAttribArray(aColor);
    GLES20.glUniform1i(GraphicsEngine.uEnableColors, 1);
} 
```

我不想使用 FloatBuffers，因为它们比浮点数组更慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T05:58:53.980

您别无选择，只能为此代码使用 FloatBuffers。

您`setVertices4d`采用 a 的方法`float[]`已损坏，您不能以这种方式使用 glVertexAttrib4fv 。glVertexAttrib4 仅指定单个顶点，使用**v**版本只是将属性的值作为数组传递给该单个顶点，它不会设置类似于指针函数的顶点数组。

# javascript - Jquery/Js：根据选择框选项值隐藏/显示 Div

> ID：10793078
> 
> 赞同：0
> 
> 时间：2012-05-29T04:29:24.000
> 
> 标签：javascript, jquery

这些是动态相关的选择控件。(1-3, 4-6, 7-9) 的值集决定了使用隐藏/显示 div 功能。问题是我只有根据 div id 隐藏/显示的功能。如何使函数隐藏/显示 div 取决于选择框中的值（1-3、4-6、7-9）？

**jQuery**

```
$('#select').change(function() {
   $('#sub1, #sub2, #sub3').hide();
   $('#sub' + $(this).find('option:selected').attr('id')).show();
}); 
```

**HTML 设置**

```
<html>
<select size="6" id="category">
     <option value="">categories 1-3 </option>
     <option value="">----</option>
     <option value="">----</option>
</select>

<div id="sub1" style="display:none">
<select name="subc1" size="6">
     <option value="1">subcategories 4-6</option>
     <option value="2">---</option>
     <option value="3">---</option>
</select>
</div>

<div id="sub2" style="display:none">
<select name="subc2" size="6">
      <option value="4">subcategories 7-9</option>
      <option value="5">----</option>
      <option value="6">----</option>
</select>
</div>

<div id="sub3" style="display:none">
<select name="subc3" size="6">
      <option value="7">End</option>
      <option value="8">----</option>
      <option value="9">----</option>
</select>   
</div>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:42:17.913

从下拉更改功能中选择值并根据下拉的值进行操作，以下是示例代码

```
$(function() // Shorthand for $(document).ready(function() {
      $('select').change(function() {
            if($(this).val() == 1)
            {
              $('#sub1').hide();
              $('#sub2').show();
            }
      });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:37:50.710

您的代码的问题是您的选择器不正确。

```
$('#select')... 
```

应该

```
$('select')... 
```

另外，这部分是错误的

```
 $('#sub' + $(this).find('option:selected').attr('id')).show(); 
```

换成这个

```
 $('#sub' + $(this).val()).show(); 
```

最后，具有相同名称/ID“sub1”的不同元素可能是一个坏主意，尽管从技术上讲并不违法。这当然令人困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T04:39:36.330

**工作演示** [http://jsfiddle.net/FwBb2/1/](http://jsfiddle.net/FwBb2/1/)

我对您的 Jquery 代码进行了细微更改，并在您的第一个选择下拉列表中增加了价值，但缺少其余部分希望这会有所帮助。

如果我错过了什么，请让我知道！B-)

**代码**

```
$('select').change(function() {
   $('#sub1, #sub2, #sub3').hide();

   $('#sub' + $(this).val()).show();
});​ 
```

**HTML**

```
<html>
<select id="category">
     <option value="1">categories 1-3 </option>
     <option value="2">----</option>
     <option value="3">----</option>
</select>

<div id="sub1" style="display:none">
<select name="subc1" size="6">
     <option value="1">subcategories 4-6</option>
     <option value="2">---</option>
     <option value="3">---</option>
</select>
</div>

<div id="sub2" style="display:none">
<select name="subc2" size="6">
      <option value="4">subcategories 7-9</option>
      <option value="5">----</option>
      <option value="6">----</option>
</select>
</div>

<div id="sub3" style="display:none">
<select name="subc3" size="6">
      <option value="7">End</option>
      <option value="8">----</option>
      <option value="9">----</option>
</select>   
</div>
</html>​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T05:12:53.423

您需要更改类别中的细微更改`select`

```
<select size="6" id="category">
     <option value="1">categories 1-3 </option>
     <option value="2">----</option>
     <option value="3">----</option>
</select>

$('select#category').on('change', function() {
  $('div[id=^sub]:visible').hide();
  $('div#sub' + this.value).show();
}); 
```

也可以使用`.change()`代替`.on('change')`。

```
 $('select#category').change(function() {
  $('div[id=^sub]:visible').hide();
  $('div#sub' + this.value).show();
}); 
```

**笔记：**

`$('div[id=^sub]:visible')`将指向所有以and开头`div`的 s 。`id``sub``visible`

您正在尝试使用`$('#select')`which need to be `$('#category')`or `$('select#category')`。

**根据您的评论：**

完整的解决方案如下所示：

```
function isOnlyDashed(text) {
    return text.replace(/-/g, '').length === 0;
}

$('select#category').change(function() {
    var text = $('option:selected', this).text();
    if (!isOnlyDashed(text)) {
        $('div[id=^sub]:visible').hide();
        $('div#sub' + this.value).show();
    }
});

$('select[name^=subc]').change(function() {
    var text = $('option:selected', this).text();
    if (!isOnlyDashed(text)) {
        $(this).parent() // jump to parent div
        .next('div[id^=sub]:hidden') // go to next hidden div
        .show();
    }
}); 
```

**[完成锻炼](http://jsfiddle.net/5CU5p/1/)**

# image - ckeditor 图像插件定制

> ID：10793080
> 
> 赞同：0
> 
> 时间：2012-05-29T04:29:30.807
> 
> 标签：image, plugins, ckeditor

我想自定义 ckeditor 图像插件。我已经在 URL 文本字段下添加了两个单选框，一个是普通模式，第二个是我在预览区域的 iframe 中显示了一个页面。在页面中，我们有图像链接列表。现在我很难单击任何链接并将该链接发送到 URL 文本字段。实际上我想访问 iframe 中显示的页面中的 URL 字段。

请帮助我，或者建议我更好的解决方案来解决这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:38:37.273

我找到了完成上述工作的方法。首先，我将单选框更改为浏览按钮。在按钮单击事件上，将打开一个灯箱。单击灯箱中的链接时，链接值将保存到 java 脚本 COOKIE 变量中，并且在灯箱关闭事件中，使用以下代码检索来自 COOKIE 的值并将其分配给文本字段。

```
srcVal = getCookie('srcVal');                                   dialog.setValueOf('info','src',srcVal); 
```

# android - 如何在后台运行应用程序

> ID：10793082
> 
> 赞同：2
> 
> 时间：2012-05-29T04:30:24.787
> 
> 标签：android

我正在使用 Smack API 开发应用程序。每当从 jabber 服务器接收到特定用户的消息时，应该出现来自后台应用程序的对话框以显示该消息。因此，用户必须登录才能显示对话。问题是，它在用户第一次登录时显示对话，但在收到第二条消息时从不显示对话。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:33:34.313

在您的应用程序中创建一个新服务并启动该服务它将帮助您在后台运行应用程序。此[链接](http://www.vogella.com/articles/AndroidServices/article.html)将为您提供帮助

# html - 如何在 HTML 中引用相对子域？

> ID：10793088
> 
> 赞同：12
> 
> 时间：2012-05-29T04:31:38.170
> 
> 标签：html, hyperlink, subdomain

假设我有一个由多个域访问的网站，例如`domain1.com`和`domain2.com`.

如果我有一个相对链接，例如`href="/wiki"`，那么无论我使用什么域名访问该网站，该链接都会将我带到正确的位置。

可以说我想使用`wiki.domain1.com`and `wiki.domain2.com`，有什么方法可以相对于域名建立指向此的链接？

如果没有，当多个域指向同一服务器时，是否有一种优雅的方式来处理诸如上面的 wiki 链接之类的链接？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T04:33:38.303

不，您必须提供整个域。要链接 from `domain1.com`to `wiki.domain1.com`，链接必须看起来像`href="http://wiki.domain1.com"`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-30T00:41:51.990

相对路径是不可能的，因为子域实际上是一个完全不同的域。

如果你真的不能使用绝对 URL，但可以使用 PHP，你可以试试这个代理脚本：

```
<?php

if(!isset($_GET['url'])) {
    die('Missing URL!');
}

$subdomain_url = 'http://subdomain.example.com/';
$file_path = $_GET['url'];

$file_url = $subdomain_url . $file_path;

$mime = finfo_open(FILEINFO_MIME, $file_url);

header('Content-Type: ' . $mime);
header('Content-Transfer-Encoding: Binary'); 
header('Content-disposition: inline; filename="' . basename($file_path) . '"'); 

readfile($file_url); 
```

将其保存到文件中，例如。*imgproxy.php*，然后您可以像这样链接其他子域上的图像：

```
<img src="imgproxy.php?url=images/logo.png"> 
```

# jquery - jQuery 手风琴：有些部分扩展，有些不扩展

> ID：10793093
> 
> 赞同：0
> 
> 时间：2012-05-29T04:33:09.590
> 
> 标签：jquery, html, accordion

所以我有这个手风琴，它工作得很好（非常感谢这个社区），但我被困在一个部分：我如何让图像保持居中而文本框在点击时展开（点击时更明显在这个[JsFiddle](http://jsfiddle.net/KmP6u/ "jsFiddle")中的第一张图片），然后当其他一些图片悬停时让文本框“展开”？

# android - Android 应用程序，振动器不与 AlertDialog 一起使用

> ID：10793094
> 
> 赞同：1
> 
> 时间：2012-05-29T04:33:21.260
> 
> 标签：android, media-player, android-alertdialog, vibration

我正在开发我的第一个 android 应用程序，但在尝试实现 Vibrator 时遇到问题。我想要做的是让 AlertDialog 显示一条消息，并且因为用户当时可能实际上并没有运行该应用程序，所以播放警报并振动手机直到他们关闭警报。首先我让它在没有振动器的情况下工作得很好，然后当我实施振动器时，它停止了警报声，它不再显示 AlertDialog。我发现我可以通过在新线程中执行它来解决警报问题，但仍然没有 AlertDialog。因此，我也尝试将振动器移动到新线程，但这并没有解决我的问题。所以我目前的问题是，手机播放警报声并振动，但我告诉它显示的 AlertDialog 永远不会显示。我怎样才能让这三样东西同时工作？这是我的代码（删除了不相关的部分）...

```
public class AlarmDisplayActivity extends Activity {
    private MediaPlayer media;
    private PowerManager.WakeLock lock;
    private AlertDialog alert;
    private Vibrator vibrator;
    private Thread vibrateThread;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.alarmdisplay_screen);

        PowerManager power = (PowerManager)getSystemService(Context.POWER_SERVICE);
        lock = power.newWakeLock(PowerManager.FULL_WAKE_LOCK |
            PowerManager.ACQUIRE_CAUSES_WAKEUP, "AlarmReceiverActivity");
        alert = new AlertDialog.Builder(AlarmDisplayActivity.this).create();
        vibrator = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);
        vibrateThread = new VibrateThread();

        lock.acquire();
        alert.setCancelable(false);

        alert.setButton("OK", new OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                media.stop();
                vibrateThread.interrupt();
                lock.release();
            }// Ends onClick
        }// Ends setButton

        startAlarm(this);
        vibrateThread.start();
        alert.show();
    }// Ends onCreate

    private void startAlarm(final Context context) {
        new Thread() {
            public void run() {
                Uri uri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
                if(uri == null) {
                    uri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
                    if(uri == null)
                        uri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
                }// Ends if

                media = new MediaPlayer();
                try{
                    media.setDataSource(context, uri);
                    final AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
                        if(audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
                            media.setAudioStreamType(AudioManager.STREAM_ALARM);
                            media.setLooping(true);
                            media.prepare();
                            media.start();
                        }// Ends if
                    }// Ends try
                    catch(Exception e){}
                }// Ends run method
            }.start();
        }// Ends startAlarm method

        class VibrateThread extends Thread {
            public VibrateThread() {
                super();
            }
            public void run() {               
                try {
                    long[] vibPattern = new long[] {0L,100L,250L,1000L,250L,500L};
                    vibrator.vibrate(vibPattern, 2);
                }// Ends try
                catch (Exception e) {}
            }// Ends run method
        }// Ends VibrateThread class

}// Ends AlarmDisplayActivity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:30:54.857

我有一种`startAlarm`被阻塞的感觉，但也建议将所有非 UI 移动到不同的线程中。我使用 AsyncTask 来执行此操作，我发现它工作得非常好。

您可以在[此处](http://developer.android.com/reference/android/os/AsyncTask.html)找到 AsyncTask 的文档。因为在我的应用程序中，我从我的应用程序中的 Web 服务获取，它阻止了整个 UI，这可能也与您的应用程序一起发生。

# ruby-on-rails - Rails 3.1 Sweeper 用于不同命名空间中的控制器方法

> ID：10793103
> 
> 赞同：1
> 
> 时间：2012-05-29T04:34:41.073
> 
> 标签：ruby-on-rails, caching, namespaces, sweeper

全部，

我正在尝试向我的 Rails 3.1 应用程序添加缓存。清扫器位于默认命名空间中，而我的控制器位于 Admin 命名空间中。

例如，我在 Admin 命名空间中有 BooksController，每当这个控制器中的 share 方法我希望图书缓存被清除时。我尝试将此方法命名为 after_books_share，但未调用该方法。

```
class Admin::BooksController < ApplicationController
caches_action :show
cache_sweeper :book_sweeper
   def share
   # "Share" a book
   end
end

class BookSweeper < ActionController::Caching::Sweeper
observe Book
def after_update(book)
   expire_cache_for(book)
end
def after_books_share
  book = Book.find params[:id]
  expire_cache_for(book)
end
def expire_cache_for(book)
   expire_action(:controller => '/books', :action => 'show', :id => book)
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:22:42.167

在控制器名称前使用斜杠。在默认命名空间中过期：

```
expire_action(:controller => '/users', :action => 'index') 
```

要在 admin 命名空间中过期：

```
expire_action(:controller => '/admin/users', :action => 'index') 
```

# javascript - jquery - 水平页面布局 - 调光器

> ID：10793107
> 
> 赞同：0
> 
> 时间：2012-05-29T04:35:04.127
> 
> 标签：javascript, jquery

我正在做一个网站。当您单击导航时，布局是水平的，它会滑动到您想要的页面。这一切都有效，但我随后为每个页面添加了一个调光器，因此当您在所选页面上时，其他页面会变暗。我想知道是否有更好的方法来编写这段代码，目前它是每个页面的一个函数，我想知道是否有办法缩短它。

```
//When the link that triggers the message is clicked fade in overlay/msgbox  
$(".test").click(function(){  
$(".dimmerservices").fadeOut('slow', function() {
// Animation complete.
});  
$(".dimmerother1").fadeIn('slow', function() {
// Animation complete.
});  
return false;  
});  

//When the message box is closed, fade out  
$(".close").click(function(){  
$("#fuzz").fadeOut();  
return false;  
});  

});  

$(document).ready(function(){  

//Adjust height of overlay to fill screen when page loads  
$("#fuzz").css("height", $(document).height());  

//When the link that triggers the message is clicked fade in overlay/msgbox  
$(".casestud").click(function(){  
$(".dimmercase").fadeOut('slow', function() {
// Animation complete.
});  
$(".dimmerother2").fadeIn('slow', function() {
// Animation complete.
});  
return false;  
});  

//When the message box is closed, fade out  
$(".close").click(function(){  
$("#fuzz").fadeOut();  
return false;
});  

});  

$(document).ready(function(){  

//Adjust height of overlay to fill screen when page loads  
$("#fuzz").css("height", $(document).height());  

//When the link that triggers the message is clicked fade in overlay/msgbox  
$(".aboutclick").click(function(){  
$(".dimmerabout").fadeOut('slow', function() {
// Animation complete.
});  
$(".dimmerother3").fadeIn('slow', function() {
// Animation complete.
});  
return false;  
});  

//When the message box is closed, fade out  
$(".close").click(function(){  
$("#fuzz").fadeOut();  
return false;
});  

});  

$(document).ready(function(){  

//Adjust height of overlay to fill screen when page loads  
$("#fuzz").css("height", $(document).height());  

//When the link that triggers the message is clicked fade in overlay/msgbox  
$(".contactbutton").click(function(){  
$(".dimmerend").fadeOut('slow', function() {
// Animation complete.
});  
$(".dimmerother4").fadeIn('slow', function() {
// Animation complete.
});  
return false;  
});  

//When the message box is closed, fade out  
$(".close").click(function(){  
$("#fuzz").fadeOut();  
return false;
});  

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:03:07.773

试试这个，我删除了额外的 document.ready()，关闭函数。

```
$(document).ready(function () {

//Adjust height of overlay to fill screen when page loads  
$("#fuzz").css("height", $(document).height());

//When the message box is closed, fade out  
$(".close").click(function () {
    $("#fuzz").fadeOut();
    return false;
});

//When the link that triggers the message is clicked fade in overlay/msgbox  
$(".test").click(function () {
    $(".dimmerservices").fadeOut('slow', function () {
        // Animation complete.
    });
    $(".dimmerother1").fadeIn('slow', function () {
        // Animation complete.
    });
    return false;
});

//When the link that triggers the message is clicked fade in overlay/msgbox  
$(".casestud").click(function () {
    $(".dimmercase").fadeOut('slow', function () {
        // Animation complete.
    });
    $(".dimmerother2").fadeIn('slow', function () {
        // Animation complete.
    });
    return false;
});

//When the link that triggers the message is clicked fade in overlay/msgbox  
$(".aboutclick").click(function () {
    $(".dimmerabout").fadeOut('slow', function () {
        // Animation complete.
    });
    $(".dimmerother3").fadeIn('slow', function () {
        // Animation complete.
    });
    return false;
});

//When the link that triggers the message is clicked fade in overlay/msgbox  
$(".contactbutton").click(function () {
    $(".dimmerend").fadeOut('slow', function () {
        // Animation complete.
    });
    $(".dimmerother4").fadeIn('slow', function () {
        // Animation complete.
    });
    return false;
});

});

//Adjust height of overlay to fill screen when browser gets resized  
$(window).bind("resize", function () {
    $("#fuzz").css("height", $(window).height());
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:39:58.047

正如 Sufyan 所描述的，您绑定了`close`事件并`#fuzz`多次绑定，这是不必要的。关于调光器代码，您可以通过淡入隐藏的调光器和淡出当前的调光器来将其绑定在导航锚点单击功能中，如下所示：

```
$('ul.nav a').bind('click', function(event) {
    ...

    // show hidden dimmer
    $('.dimmer:hidden').fadeIn('slow');

    // fade out current dimmer
    $($anchor.attr('href')).find('.dimmer').fadeOut('slow');
} 
```

这消除了您在锚点上绑定的所有其他点击事件的需要。

我已经更新了你的 jsFiddle 来展示这个：http: [//jsfiddle.net/uQH37/1/](http://jsfiddle.net/uQH37/1/)

# windows - 如何获取屏幕自动旋转的状态？

> ID：10793108
> 
> 赞同：3
> 
> 时间：2012-05-29T04:35:16.190
> 
> 标签：windows, autorotate

如何在windows8中通过Regetry或ACPI获取屏幕自动旋转的状态（禁用或启用）？

我需要禁用屏幕自动旋转，我将使用 winkey + O 更改屏幕自动旋转控制。

有没有人有类似的经历？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T06:35:11.677

如果您想更改自动旋转状态，下面可能会有所帮助：

```
//C++
typedef BOOL (WINAPI* SETAUTOROTATION)(BOOL bEnable);

SETAUTOROTATION SetAutoRotation = (SETAUTOROTATION)GetProcAddress(GetModuleHandle(TEXT("user32.dll")), (LPCSTR)2507);
if(SetAutoRotation != NULL)
{
  SetAutoRotation(TRUE);
} 
```

或者

```
//C#
[DllImport("user32.dll", EntryPoint = "#2507")]
extern static bool SetAutoRotation(bool bEnable);

SetAutoRotation(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T03:08:21.867

我找到了答案。

```
 public enum tagAR_STATE : uint
        {
            AR_ENABLED = 0x0,
            AR_DISABLED = 0x1,
            AR_SUPPRESSED = 0x2,
            AR_REMOTESESSION = 0x4,
            AR_MULTIMON = 0x8,
            AR_NOSENSOR = 0x10,
            AR_NOT_SUPPORTED = 0x20,
            AR_DOCKED = 0x40,
            AR_LAPTOP = 0x80
        }

[DllImport("user32.dll")]
public static extern bool GetAutoRotationState(ref tagAR_STATE input); 
```

希望可以帮助其他人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-04T12:06:13.950

[这个 MSDN 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/dn629265%28v=vs.85%29.aspx)似乎完成了这项工作，使用看起来像“官方”API 调用的东西`SetDisplayAutoRotationPreferences`，它位于 User32.dll（不是示例所述的 kernel.dll）中，并在 WinUser.h 中定义。

此示例相对于其他建议的优势在于它首先检查是否支持并启用自动旋转。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-25T16:12:46.627

注册表和 Windows+O 热键在系统级别工作，调整用户设置。应用程序不应该弄乱它。有一种应用程序级别的方式来设置自动旋转首选项，一旦用户关闭您的应用程序或切换到另一个应用程序，他们现有的设置（或其他应用程序）就会接管。

MSDN 在这里有一个使用相关 API 的好例子：[https ://code.msdn.microsoft.com/windowsapps/Auto-Rotation-Preferences-87ae2902](https://code.msdn.microsoft.com/windowsapps/Auto-Rotation-Preferences-87ae2902)

If your app has only one autorotation preference that it keeps throughout its lifetime, then it is simplest to just set it in your manifest. There are a few options there that you don't get with the APIs such as supporting both landscape and landscape flipped.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-30T10:06:58.733

另一种选择，这是在我的平板电脑上似乎始终如一的选择。检查此注册表项。您还可以更改密钥，设备将立即获取更改：

钥匙：`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\AutoRotation`

环境：`Enable`

它是一个 DWORD，因此设置为 0 以禁用自动旋转或设置为 1 以启用自动旋转。

现在，如果我能找到一种方法来强制应用程序仅在横向模式下工作！...

# objective-c - 防止来自“PerformSelect 可能导致泄漏，因为它的选择器未知”的警告

> ID：10793116
> 
> 赞同：34
> 
> 时间：2012-05-29T04:36:30.923
> 
> 标签：objective-c, ios, macos

> **可能重复：**
> [performSelector 可能会导致泄漏，因为它的选择器未知](https://stackoverflow.com/questions/7017281/performselector-may-cause-a-leak-because-its-selector-is-unknown)

我做了一个 NSDictionary 将我的输入（NSString）转换为选择器。“选择器映射”如下所示：

```
[self setCmdSelectorMap:[NSDictionary dictionaryWithObjectsAndKeys: 
                         [NSValue valueWithPointer:@selector(doOpenBrowserByString:)], @"openBrowser",
                         [NSValue valueWithPointer:@selector(syncData:)], @"sync",
                         [NSValue valueWithPointer:@selector(getCachedString:)], @"getCachedString",
                         nil]]; 
```

当我尝试获取其中一个选择器并按以下方式执行时，会导致警告：

```
sel = [[_cmdMap objectForKey:command] pointerValue];
NSLog(@"selector determined : %@", NSStringFromSelector(sel));
[self performSelector:sel withObject:arguments]; 
```

警告说： PerformSelector 可能会导致泄漏，因为它的选择器是未知的。有什么办法可以防止这个警告的发生吗？还是有任何“更安全”的方式来执行这样的操作？

多谢你们 ：）

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-05-29T11:05:46.487

只需使用这个：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
[self performSelector:sel withObject:arguments];
#pragma clang diagnostic pop 
```

# php - 如果出现致命错误，请重定向到其他页面

> ID：10793117
> 
> 赞同：0
> 
> 时间：2012-05-29T04:36:36.160
> 
> 标签：php, fatal-error

如果我遇到致命错误，有什么办法可以将我的访问者重定向到其他网址？或任何我可以忽略该致命错误以解决问题的方式。基于少于 30 个 facebook 朋友向某些用户显示致命错误。错误是这个

```
Fatal error: Uncaught Exception: 100: null does not resolve to a valid user ID thrown in /home/scorpio/public_html/domain.com/src/base_facebook.php on line 1024 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:54:43.043

抓住这个异常！[例外](http://php.net/manual/en/language.exceptions.php)

# .net - 队列任务重新执行

> ID：10793118
> 
> 赞同：0
> 
> 时间：2012-05-29T04:36:57.367
> 
> 标签：.net, queue, task

*   我无法将 bool 设置为返回 bool 的方法。
*   我正在使用任务类型的队列，并将该方法作为新任务传递给队列。
*   如何根据 Task.Start() 内部使用的方法调用设置布尔值？
*   如何重新执行任务，以便可以多次调用 Task.Start()？

    ```
    public static void Main(string[] args)
    {
        Console.WriteLine("Performing Queue<Task> q = new Queue<Task>();");
        Queue<Task> q = new Queue<Task>();
        Console.WriteLine("Finished Queue<Task> q = new Queue<Task>();");
        Console.WriteLine("Performing q.Enqueue(new Task(() => hello(\"world\") ) );");
        q.Enqueue(new Task(() => print("hello world") ) );
        Console.WriteLine("Finished q.Enqueue(new Task(() => hello(\"world\") ) );");
        Console.WriteLine("Performing Task peek = q.Peek();");
        Task peek = q.Peek();
        Console.WriteLine("Finished Task peek = q.Peek();");
        Console.WriteLine("Performing peek.Start();");
        //bool temp = peek.Start(); // does not set temp to true, how do I accomplish this?
        peek.Start(); // Works, but does not return true as print() should return true, how do I accomplish this?
        Console.WriteLine("Finished peek.Start();");
        Console.WriteLine("Performing Task dequeue = q.Dequeue();");
        Task dequeue = q.Dequeue();
        Console.WriteLine("Finished Task dequeue = q.Dequeue();");
        Console.WriteLine("Performing dequeue.Start();");
        //bool temp2 = dequeue.Start(); // does not set temp2 to true, how do I accomplish this?
        dequeue.Start(); // How do I make a Task reexecute?
        Console.WriteLine("Finished dequeue.Start();");

    }
    public static bool print(string text)
    {
        Console.WriteLine("print(" +text +")");
        return true;
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:18:10.487

以下是如何从 Task 获取返回值的示例：

[http://msdn.microsoft.com/en-us/library/dd537613](http://msdn.microsoft.com/en-us/library/dd537613)

Task 的 MSDN 文章 (http://msdn.microsoft.com/en-us/library/dd270682.aspx) 说：

> 一个任务只能启动和运行一次。任何第二次安排任务的尝试都将导致异常。

我建议找到一种使用 Task.Factory.StartNew() 而不是 new Task().Start 重写代码的方法。这是一篇关于差异的好文章：

[http://blogs.msdn.com/b/pfxteam/archive/2010/06/13/10024153.aspx](http://blogs.msdn.com/b/pfxteam/archive/2010/06/13/10024153.aspx)

为什么不排队 enum 值而不是 Tasks 本身，然后编写一个小函数来根据 enum 值运行任务。它可能看起来像：

```
public static void StartTask(Actions action)
{
    if (action == Actions.Print)
    {
        Task t = new Task(() => print("hello world"));
        t.Start();
    }
} 
```

合并基于第一个示例的返回值，然后一切就绪。

# wpf - 使用 wpf 获取硬件 ID

> ID：10793124
> 
> 赞同：0
> 
> 时间：2012-05-29T04:37:45.167
> 
> 标签：wpf

尝试使用此处发布的解决方案[如何在 C# 中快速获取硬件 ID？](https://stackoverflow.com/questions/2333149/how-to-fast-get-hardware-id-in-c)在这里[http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I](http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I)但似乎 wpf 没有 ManagementObjectCollection。我已经加了

```
using System.Management;
using System.Management.Instrumentation; 
```

不过，在我的代码中。有什么方法可以使用 wpf 来获取 cpu id 等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:50:06.923

怎么回事？

WPF 应该能够使用 WMI。

您是否尝试手动添加对 System.Management (WMI) 的引用？

# php - 使用 javascript src 加载外部 php 文件

> ID：10793129
> 
> 赞同：0
> 
> 时间：2012-05-29T04:38:18.340
> 
> 标签：php, javascript

我目前正在使用以下方法使用javascript调用带有一些变量的外部php文件

```
<script src="http://www.domain.com/function.php?param=A" type="text/javascript"></script> 
```

function.php 文件中的代码将返回 Javascript 格式的数据，例如

```
<?php Header("content-type: application/x-javascript");
$p = $_GET['param'];

$r = mt_rand(0, 10);
echo "document.write('" . $p . $r . "');";
?> 
```

这只是一个简单的例子。我的问题是在谷歌浏览器（v19）上，如果页面没有完成加载，我不断刷新时随机数不会是随机的。只有当我在页面完成加载后点击刷新按钮时，它才会变得真正随机。为什么会发生这种情况，我该如何解决？

我在 Firefox 12 和 IE8 上进行了测试，即使我在加载完成之前刷新页面，随机数总是会重新生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:44:49.963

您的 URL 的查询字符串说`param=A`，您正在引用`$_GET['param1']`您的 PHP/JS 文件。不应该`$_GET['param']`吗？

您可能需要添加标头，以便您的 js 文件不会被缓存

```
<?php
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
?> 
```

见[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:53:37.113

你需要一个小的 JS hack。基本上，你想`<script>`在 JS 中动态添加标签，并在 URL 的末尾添加一个随机参数。

```
var hookScripts = function(url, src) {
    var s = document.createElement("script");
    s.type = "text/javascript";
    s.src = url || null;
    s.innerHTML = src || null;
    document.getElementsByTagName("head")[0].appendChild(s);
};

hookScripts('http://www.domain.com/function.php?param=A&randomSalt=' + Math.random()); 
```

这将强制 chrome 再次请求 JS 文件。

# asp.net - 为 Web 应用程序消费创建一个 .Net DLL 线程安全？

> ID：10793131
> 
> 赞同：1
> 
> 时间：2012-05-29T04:38:31.690
> 
> 标签：asp.net, .net, thread-safety

我在 VB.Net 中编写了一个在运行 IIS7 的 ASP.NET Web 应用程序中使用的类。我使用 .NET Framework 4.0。该类对联机执行 REST 请求并检索包含强类型数据的 XML 响应。

此类还使用 SQL Server 数据库执行缓存。该类被编译为 .DLL 并由 Web 应用程序引用。它工作得很好，现在我需要知道如何使类线程安全。

我没有使代码“线程安全”的经验。我不知道从哪里开始确定它是否是线程安全的。我假设，因为我在开发过程中没有注意这一点，所以它不是线程安全的，并且由于它的 web 应用程序将同时被许多用户使用，因此必须注意它。

谁能告诉我如何测试线程安全？网上有什么资源可以给我一些想法吗？是否有任何经验法则可以提示我主要关注的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:08:38.157

您可以注意的最简单的事情是使用“静态”（C#）或“共享”（VB.NET）变量。如果可以在应用程序的整个生命周期中修改这些变量，您可能会遇到线程问题，这通常会导致“随机查找”问题。

我还会担心您如何在数据库中进行缓存，因为多个 .NET 线程访问 SQL（用于缓存）也可能会导致问题，具体取决于其设计方式。

底线是，如果您想确保这不会有问题，您可能需要了解有关线程的更多信息。就简单到非常复杂的 C# 主题而言，我读过的最好的书可能是[C# 4.0](https://rads.stackoverflow.com/amzn/click/com/0596800959)简而言之，我会看一看那本书，尤其是线程章节。（尽管认真阅读整本书）如果您通读并很好地理解了所提到的概念，那么您应该没问题。

# c# - Webkit.Net C#：如何在 HTML 中导入 JavaScript

> ID：10793135
> 
> 赞同：0
> 
> 时间：2012-05-29T04:39:30.560
> 
> 标签：c#, javascript, jquery, webbrowser-control, webkit.net

我正在使用 Webkit.Net 组件开发 C# 应用程序。需要明确的是，documentText 是显示动态生成的 HTML 字符串的唯一方法。

如标题所示，是否有可能有这样的东西：

```
<script type="text/javascript" src="jss.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.5.js"></script> 
```

在 HTML Head 部分，作为 HTML 字符串的一部分包含在内？我知道为了渲染图像，我需要将图像（来自本地文件）转换为 URi。那么，javascript 或 jquery 怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:51:41.950

必须转换所有本地引用。如果合适，我建议使用`<base>`标签。见：[http ://www.w3schools.com/tags/tag_base.asp](http://www.w3schools.com/tags/tag_base.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:36:43.720

您可以使用此 javascript 函数在标题部分加载 js 文件...

```
function loadjscssfile(filename, filetype) {
            if (filetype == "js") { //if filename is a external JavaScript file
               // alert('called');
                var fileref = document.createElement('script')
                fileref.setAttribute("type", "text/javascript")
                fileref.setAttribute("src", filename)
                alert('called');
            }
            else if (filetype == "css") { //if filename is an external CSS file
                var fileref = document.createElement("link")
                fileref.setAttribute("rel", "stylesheet")
                fileref.setAttribute("type", "text/css")
                fileref.setAttribute("href", filename)
            }
            if (typeof fileref != "undefined")
                document.getElementsByTagName("head")[0].appendChild(fileref)
        } 
```

将此函数称为

```
loadjscssfile('http://code.jquery.com/jquery-1.5.js','js'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T03:18:23.457

我发现 .documentText 无法做到这一点，这是 Webkit.Net 中唯一支持的 HTML 字符串。

在最新的 Webkit 包装器：[Open Webkit Sharp](http://code.google.com/p/open-webkit-sharp/)中，它有一个 API 调用**loadDocument()**，它从 HTML 文件的目录路径显示，JavasSript 调用可以在 HTML 文件中本地完成。

# vba - 如何在vba代码中显示单元格的值？

> ID：10793139
> 
> 赞同：5
> 
> 时间：2012-05-29T04:39:59.147
> 
> 标签：vba

`Row_No = 5`

`MsgBox Range.("A & Row_No").value`

我有上面的代码，但它给了我错误`1004`..请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T04:42:49.993

**试试这个**

```
MsgBox Range.("A" & Row_No).Value 
```

**或这个**

```
MsgBox Range.("A" & Row_No).Text 
```

**或这个**

```
MsgBox Cells(1,"C") 
```

您使用的代码的问题只是放置`&`和`"`错误的位置。

* * *

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:53:00.750

在进行连接时，请记住字符串将在引号中，而变量不会——将引号视为告诉编译器将它们之间的内容解释为文字文本。一个好的 IDE 通常会通过语法高亮显示这一点。

因此，在您的代码中，该`Range()`方法被传递的是字符串`A & Row_No`而不是`A5`-- 所以它会出错。

# php - 如何编写可重复使用的 php 框架、代码？

> ID：10793145
> 
> 赞同：1
> 
> 时间：2012-05-29T04:40:57.463
> 
> 标签：php, frameworks, code-reuse

您好，我是 php 新手，想学习编写可重用的 php 代码，这是一个为我要创建的网站构建 CMS 的框架。

我应该从哪里学习这种方法。如果可能，请分享一些可以帮助我的教程 pdf 的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T04:55:56.290

尝试重新发明轮子。阅读[TinyMVC](http://tinymvc.com)源代码并尝试构建类似的框架。然后你可以阅读并重新发明更大的框架。（如果你问的话，我是用 Zend Framework 做的）

当然，您应该仅出于学习目的这样做。对于您的实际项目，我建议您使用现有的 PHP 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:42:54.597

为什么不直接使用现有的众多[PHP CMS 框架](http://en.wikipedia.org/wiki/List_of_content_management_systems#PHP)之一？例如，Drupal 很容易扩展。不要重新发明轮子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T04:56:03.090

这是 Jeffery Way 的微型 MVC 框架的示例，您可以使用[http://net.tutsplus.com/tutorials/php/create-your-first-tiny-mvc-boilerplate-with-php/](http://net.tutsplus.com/tutorials/php/create-your-first-tiny-mvc-boilerplate-with-php/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T04:58:34.520

就像迈克尔说的，不要重新发明轮子。

当涉及到 PHP 时，您可以从许多框架中进行选择。您也可以考虑使用 Ruby on Rails。以我的经验，所有“好”的 PHP 框架都只是 Ruby on Rails 的追随者，而且在这方面也很糟糕。但是说这只是在乞求一场火焰战，所以让大家假装我没有这么说。

----关于主题----

你说你是一个 PHP 初学者，想学习 1\. 构建可重用的代码 2\. 使用 1\. 构建一个 CMS。

对我来说，编写可重用代码的一个重要做法是，您将组成的库的功能拆分为尽可能多的部分。举一个我正在建立的数字商店的最新示例，我将有一个清除我的购物车的功能，一个清除寄存器的功能，一个重置字段的功能，等等。通过将代码拆分为这些不同的功能，我能够当交易完成时调用其中一些（添加保存交易）和搜索完成时调用我（只需重置字段）。把它想象成一个工具箱，你可以将螺丝刀连接到所有其他工具上，或者你可以只有一把螺丝刀。而这只是一方面。

@Galwegian 在 SO 上发布了一个关于可重用代码的更多元素的好答案：[你如何使代码可重用？](https://stackoverflow.com/questions/268258/how-do-you-make-code-reusable)也是。

2.  学习如何构建 CMS 是一个相当广泛的问题。如果你这样做只是为了好玩，或者只是为了学习如何编写更好的 PHP；看看其他 CMS 正在做什么，想知道他们是如何解决某些问题的，是什么让他们工作或不工作，并试图弄清楚你如何也可以构建它。

如果您想专业地建立网站；请不要创建自己的 CMS。以后你会恨自己的。选择具有广泛用户群和许多教程的东西，例如 drupal 或 wordpress。在构建自己的 CMS 时，您只会浪费时间寻找解决方案来解决其他人已经更好地解决的问题。

-- 半个话题--- 我看到了这个 PHP 课程，虽然它不是免费的，但它应该能让你入门。Nettuts 是一个很好的教程资源，无论哪种方式，都可以查看。

[http://net.tutsplus.com/tutorials/php/php-fundamentals-new-premium-course/](http://net.tutsplus.com/tutorials/php/php-fundamentals-new-premium-course/)

# html - clearfix 的问题

> ID：10793146
> 
> 赞同：2
> 
> 时间：2012-05-29T04:41:07.860
> 
> 标签：html, css, clearfix

我创建了一个 html，可以在[http://temp87.web44.net/temp.html](http://temp87.web44.net/temp.html)找到。我面临的问题是页脚后页面底部有一条灰色条，并且页面没有占据浏览器的 100%。

![在此处输入图像描述](../Images/ac30af8c115bdab906de185bc88dd4d8.png)

导致问题的CSS..

```
.clearfix:after {
    content: ".";   //If this is commented out the page fits in perfectly, but the background of <div>storyWrapper clearfix</div> goes off.
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
} 
```

问题2：我也想要高度

```
<div class="detailsContent"/> 
```

根据屏幕分辨率自动适配。现在计算的高度总是 619px，在大屏幕上，整个页面只占屏幕的 75%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:46:32.923

`"."`从中删除`content`。像这样写：

```
.clearfix:after {
    content: "";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
} 
```

# c# - 以垃圾邮件形式发送的邮件

> ID：10793149
> 
> 赞同：0
> 
> 时间：2012-05-29T04:41:18.483
> 
> 标签：c#, asp.net, mysql, web-services, email

我在 C# 中制作了 asp.net webservice，以给定的 mailid 作为参数发送邮件。

邮件已发送，但显示为垃圾邮件，而不是收件箱邮件。

我使用了以下代码；

**.NET 代码：**

```
public int SendMail(string mailto, string username, string password)
    {
        try
        {
            string mailFrom = "test@gmail.com";
            string siteName = "www.XYZ.com";
            MailAddress fromAddress = new MailAddress(mailFrom, siteName);
            SmtpClient mailClient = new SmtpClient();

            MailMessage message = new MailMessage();
            message.From = fromAddress;
            message.To.Add(mailto);

            message.Subject = "Your User Name and Password";
            message.IsBodyHtml = true;

            mailClient.Host = "relay-hosting.secureserver.net";
            mailClient.UseDefaultCredentials = false;
            mailClient.EnableSsl = false;

            string body = "<HTML><BODY><CENTER><H2>Your User Name  :'" + username + "' </H2><BR/><H2>Your Password :'" + password + "' </H2></CENTER></BODY></HTML>";

            message.Body = body;

            mailClient.Send(message);

            return 1;
        }
        catch (Exception ex)
        {
            return 0;
        }
    } 
```

**WEB.CONFIG 代码：**

```
 <system.net>
    <mailSettings>
        <smtp from="test@gmail.com">
            <network host="relay-hosting.secureserver.net" />
        </smtp>
    </mailSettings>
  </system.net> 
```

可能是什么问题？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:47:15.380

您的 MailMessage 内容被收件人的提供商识别为垃圾邮件，或者您使用的中继服务器被列入黑名单。如果您使用`relay-hosting.secureserver.net`的是后者可能是这种情况。我建议使用比 GoDaddy 更受信任的中继提供商。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:01:21.053

您的 FROM 地址是 GMAIL.COM，您不是从 GMAIL 服务器发送电子邮件，而是从另一台服务器发送电子邮件。使用 DomainKeys Identified Mail (DKIM) 和 Sender Policy Framework (SPF)，现在可以（大多数系统管理员都这样做）在域的 DNS 记录中为该域指定授权的电子邮件发送服务器。这样，当电子邮件收件人服务器收到电子邮件时，它可以通过检查电子邮件发送服务器与在发件人域的 DNS 中提到的授权服务器列表来检查电子邮件来源的真实性。如果不匹配，则根据发件人域的系统管理员在其 DNS 记录中设置或指定的规则，电子邮件可能会被彻底拒绝或作为垃圾邮件保存在垃圾邮件文件夹中。

我想这就是正在发生的事情。在发送电子邮件之前，您还应该使用[http://www.mxtoolbox.com/blacklists.aspx](http://www.mxtoolbox.com/blacklists.aspx)服务检查发送服务器 (SMTP) 凭据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T05:12:23.880

如果您发送的 IP 地址对于您声称来自的域没有有效的 SPF 记录，则该电子邮件可能会显示为垃圾邮件。在此示例中，“relay-hosting.secureserver.net”没有有效的 IP 地址来充当 gmail 的 SMTP 服务器。

尝试从您将在现实生活中使用的实际域发送测试，而不是“test@gmail.com”。

如果它仍然被标记为垃圾邮件，则很容易为*test@youractualdomain.com*添加 SPF 记录。这是一个过去帮助过我的网站：[http ://www.zytrax.com/books/dns/ch9/spf.html](http://www.zytrax.com/books/dns/ch9/spf.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T06:01:08.307

有几件事情会共同提高您电子邮件的垃圾邮件分数。请记住，它不是垃圾邮件/非垃圾邮件，而是一个“垃圾邮件分数”，高于该分数您的电子邮件将被接收服务器标记为垃圾邮件。

我猜想在你的情况下起作用的因素如下：

*   没有替代文本消息的 HTML 正文
*   发件人地址与实际服务器不对应 邮件发自
*   发件人地址不存在
*   SMTP 服务器 (relay-hosting.secureserver.net) 信誉低
*   没有 SPF 或 domainKey 记录

解决方案也有几点：

*   创建消息的替代文本版本并将其包含在正文中（[此答案](https://stackoverflow.com/questions/3456346/c-sharp-send-both-html-and-text-email-most-elegant)说明了如何执行此操作）
*   使用发送电子邮件的服务器上实际存在的发件人地址
*   为您的 SMTP 服务器使用信誉良好的提供商，例如[Sendgrid](http://sendgrid.com)、[postmarkApp](http://postmarkapp.com)或[Mailjet](http://mailjet.com)
*   指定 SPF 和 DomainKeys DNS 记录允许接收服务器将您的消息识别为来自正确的服务器

祝你好运！

# emacs - Emacs/shell 符号链接行为

> ID：10793152
> 
> 赞同：2
> 
> 时间：2012-05-29T04:41:28.017
> 
> 标签：emacs, hyperlink

我有一个符号链接 ~/c 从我的主目录到 ~/a/b/c/。后

cd ~/c

我登陆 ~/a/b/c 然后启动 emacs。在 emacs 中，我使用 Ctrl-x Ctrl-f 打开一个文件。minibuffer 显示 ~/c/，而不是 ~/a/b/c，当我输入 ../ 时，我得到了我的主目录的列表，而不是 ~/a/b 的列表。

我觉得这很奇怪。有没有办法防止emacs向后跟随符号链接？我努力了

(defun file-symlink-p (FILENAME) nil)

没有成功。有趣的是，不同的 shell 处理符号链接的方式不同：

猫~/c/../

为 csh 扩展至目录 b，但在 bash 中扩展至 ~/。所以emacs似乎更接近bash的行为。我真的很喜欢 csh 方法。

任何提示高度赞赏。

# python - 自动化 REST 服务测试所需的建议

> ID：10793154
> 
> 赞同：11
> 
> 时间：2012-05-29T04:41:41.483
> 
> 标签：python, api, rest, testing, automated-tests

我是 REST 和测试部门的新手。我需要编写自动化脚本来测试我们的 REST 服务。我们计划定期从 Jenkins CI 作业运行这些脚本。我更喜欢在 python 中编写这些，因为我们已经有由 selenium IDE 生成的 python 中的 UI 功能测试脚本，但我对任何好的解决方案持开放态度。我检查了 httplib、simplejson 和 Xunit，但正在寻找更好的解决方案。而且，我更喜欢通过从 xml 或其他东西读取 api 信息来编写模板并为每个 REST API 生成实际脚本。提前感谢所有建议。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-29T16:45:45.017

我通常使用[Cucumber](https://github.com/cucumber/cucumber)来测试我的 RESTful API。以下示例使用 Ruby，但可以使用[ruby​​py gem](https://github.com/cucumber/cucumber/tree/master/examples/python)或[lettuce](http://lettuce.it/)轻松转换为 python 。

从一组 RESTful 基本步骤开始：

```
When /^I send a GET request for "([^\"]*)"$/ do |path|
  get path
end

When /^I send a POST request to "([^\"]*)" with the following:$/ do |path, body|
  post path, body
end

When /^I send a PUT request to "([^\"]*)" with the following:$/ do |path, body|
  put path, body
end

When /^I send a DELETE request to "([^\"]*)"$/ do |path|
  delete path
end

Then /^the response should be "([^\"]*)"$/ do |status|
  last_response.status.should == status.to_i
end

Then /^the response JSON should be:$/ do |body|
  JSON.parse(last_response.body).should == JSON.parse(body)
end 
```

现在我们可以编写通过实际发出请求来测试 API 的功能。

```
Feature: The users endpoints

  Scenario: Creating a user
    When I send a POST request to "/users" with the following:
      """
      { "name": "Swift", "status": "awesome" }
      """
    Then the response should be "200"

  Scenario: Listing users
    Given I send a POST request to "/users" with the following:
      """
      { "name": "Swift", "status": "awesome" }
      """
    When I send a GET request for "/users"
    Then the response should be "200"
    And the response JSON should be:
      """
      [{ "name": "Swift", "status": "awesome" }]
      """

   ... etc ... 
```

这些很容易在您选择的 CI 系统上运行。请参阅以下链接以获取参考：

*   [http://www.anthonyeden.com/2010/11/testing-rest-apis-with-cucumber-and-rack-test/](http://www.anthonyeden.com/2010/11/testing-rest-apis-with-cucumber-and-rack-test/)
*   [http://jeffkreftmeijer.com/2011/the-pain-of-json-api-testing/](http://jeffkreeftmeijer.com/2011/the-pain-of-json-api-testing/)
*   [http://www.cheezyworld.com/2011/08/09/running-your-cukes-in-jenkins/](http://www.cheezyworld.com/2011/08/09/running-your-cukes-in-jenkins/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-28T15:38:02.783

```
import openpyxl
import requests
import json
from requests.auth import HTTPBasicAuth

urlHead='https://IP_ADDRESS_HOST:PORT_NUMBER/'

rowStartAt=2
apiColumn=2
#payloadColumn=3
responseBodyColumn=12
statusCodeColumn=13

headerTypes = {'Content-Type':'application/json',
               'Accept':'application/json',
                'Authorization': '23324'
               }

wb = openpyxl.load_workbook('Excel_WORKBOOK.xlsx')

# PROCESS EACH SHEET
for sheetName in (wb.get_sheet_names()):
    print ('Sheet Name = ' + sheetName)

    flagVar = input('Enter N To avoid APIs Sheets')
    if (flagVar=='N'):
        print ('Sheet got skipped')
        continue

    #get a sheet
    sheetObj = wb.get_sheet_by_name(sheetName)

    #for each sheet iterate the API's
    for i in range(2, sheetObj.max_row+1):
        #below is API with method type
        apiFromSheet = (sheetObj.cell(row=i, column=apiColumn).value)
        if apiFromSheet is None:
            continue

        #print (i, apiFromSheet)
        #Let's split the api
        apiType = apiFromSheet.split()[0]
        method = apiFromSheet.split()[1]

        if (apiType!='GET'):
            continue

        #lets process GET API's
        absPath = urlHead + method
        print ("REQUESTED TYPE AND PATH = ", apiType, absPath)
        print('\n')

        res = requests.get(absPath, auth=HTTPBasicAuth(user, pwd),           verify=False, headers=headerTypes)

        #LET's write res body into relevant cell
        sheetObj.cell(row=i, column=responseBodyColumn).value = (res.text)
        sheetObj.cell(row=i, column=statusCodeColumn).value =  (res.status_code)
        wb.save('Excel_WORKBOOK.xlsx')

          `#exit(0)` 
```

# android - 如何在xml android中启用选项“@ style”

> ID：10793156
> 
> 赞同：0
> 
> 时间：2012-05-29T04:41:56.903
> 
> 标签：android, xml

为什么在android中：我不能使用这样的主题：`android:themes="@ style / theme. (...)` 当我把`android:themes=" "`选项显示给我时：（@ id | id + @ | @ android | @ drawable | layout @ | @ @ 样式字符串但没有出现。我该怎么做启用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:47:40.863

您可以将主题应用于特定的活动或整个应用程序，以便在您在**Manifest.xml**文件`android:themes`中时可用

 **[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

**清单.xml**

```
<application android:theme="@style/Theme.GreenDroid">

<activity android:theme="@style/Theme.GreenDroid"> 
```**

# android - onBackPressed() 没有被调用

> ID：10793165
> 
> 赞同：2
> 
> 时间：2012-05-29T04:43:02.217
> 
> 标签：android

我有一个活动“DashboardActivity”（不是主要活动），我想在其中捕获 BACK 按钮以询问他们是否要注销（因为 BACK 通常会将您带到登录屏幕）。

我努力了

```
public void onBackPressed() {
    // ask if they want to logout.....
    logOutIfTheyReallyWantTo();

    //super.onBackPressed();
} 
```

但是在调试器中测试它似乎根本没有命中代码。

然后我尝试添加

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.ECLAIR
            && keyCode == KeyEvent.KEYCODE_BACK
            && event.getRepeatCount() == 0) {
        // Take care of calling this method on earlier versions of
        // the platform where it doesn't exist.
        onBackPressed();
    }

    return super.onKeyDown(keyCode, event);
} 
```

这也证明是浪费时间。

最后我尝试了

```
@Override
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        // a long press of the call key.
        // do our work, returning true to consume it.  by
        // returning true, the framework knows an action has
        // been performed on the long press, so will set the
        // canceled flag for the following up event.
        return true;
    }
    return super.onKeyLongPress(keyCode, event);
} 
```

但调试器没有检测到它们。LogCat 只显示

```
 05-29 12:22:59.040: D/NetdConnector(14366): RCV <- {217 0}
    05-29 12:22:59.040: D/NetdConnector(14366): RSP <- {217 0}
    05-29 12:23:04.743: V/processReply(32759): sr0857000000
    05-29 12:23:07.673: W/KeyCharacterMap(32759): No keyboard for id 0
    05-29 12:23:07.673: W/KeyCharacterMap(32759): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
    05-29 12:23:07.907: V/Dashboard(32759): Pause
    05-29 12:23:07.915: I/ComfortActivity(32759): start
    05-29 12:23:07.915: V/ComfortActivity(32759): Resume
    05-29 12:23:08.032: D/dalvikvm(14430): GC_EXPLICIT freed 92K, 52% free 3322K/6791K, external 5633K/7003K, paused 77ms
    05-29 12:23:08.329: I/DashboardActivity(32759): stop
    05-29 12:23:08.829: V/processReply(32759): sr0856000000 
```

似乎有很多关于这个的问题，我已经尝试了所有我能找到的建议，但到目前为止还没有运气。

---- 回答问题....

```
void logOutIfTheyReallyWantTo()
{
    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle("Log out?");
    alert.setMessage("Do you really want to log out?");

    //AlertDialog loginPrompt = alert.create();

    alert.setPositiveButton("OK", new DialogInterface.OnClickListener() 
    {

        public void onClick(DialogInterface dialog, int which) {
            ((ComfortApp) getApplicationContext()).soundClick();

            getComms().logout(true);
            Intent intent = new Intent(DashboardActivity.this, ConfigurationActivity.class);
            startActivityForResult(intent, 0);
        }
    });
    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener()
    {

        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            // just like Perry the Platypus....
            // don't do much
            ((ComfortApp) getApplicationContext()).soundClick();
        }
    });
    alert.show();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:16:01.460

覆盖`finish()`活动以捕获出口。如果您不想退出，请不要调用`super`.

```
@Override
    public void finish()
    {
        if(!wantToExit)
        {
            super.finish();
        }
        else
        {
            logOutIfTheyReallyWantTo();
        }
    } 
```

`onBackPressed()`on的默认实现`Activity`是 -

```
public void  onBackPressed()
    {
        finish();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:46:44.543

嗨，请尝试下面的代码..

```
@Override
    public void onBackPressed() {
        AlertDialog.Builder alertbox = new AlertDialog.Builder(this);
        alertbox.setMessage("Are you sure logout?");
        alertbox.setTitle("Logout");
        alertbox.setNeutralButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                showDialog(0);
                new Thread() {
                    public void run() {
                        startActivity(new Intent(DashBoard.this, Login.class));
                        DashBoard.super.onBackPressed();
                    }
                }.start();
            }
        });
        alertbox.setNegativeButton("No", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
            }
        });
        alertbox.show();
    } 
```

# java - 编辑器坚持抛出“一个请求已经在进行中”

> ID：10793168
> 
> 赞同：2
> 
> 时间：2012-05-29T04:43:20.037
> 
> 标签：java, gwt, requestfactory

我正在尝试在 gwt 中设置一个基本编辑器。一切正常，编辑器显示数据并保存，但是当我再次尝试保存（即按保存按钮 2 次）时，它会在第二次保存时向我抛出错误“A request is already in progress”，但第一次编辑器正确保存数据。

```
// 
//Methods that edit and save the editor, located in ComposerEditorContainer class 
// 
public void edit(RequestContext requestContext) { 
                editorDriver = GWT.create(Driver.class); 
                editorDriver.initialize(requestFactory, composerEditor); 
                editorDriver.edit(composer, requestContext); 
        } 

public void save() { 
                ComposerRequest composerRequest = (ComposerRequest) editorDriver 
                                .flush(); 
                ComposerProxy newProxy = composerRequest.edit(composer); 
                composerRequest.persist(newProxy).fire(); 
        } 

// 
//Events in a presenter that save and initialize the editor 
// 
                eventBus.addHandler(SaveButtonClickedEvent.TYPE, 
                                new SaveButtonClickedEventHandler() { 
                                        @Override 
                                        public void onSaveButtonClicked(SaveButtonClickedEvent event) { 
                                                ((ComposerEditorContainer) composerEditorContainer) 
                                                                .save(); 
                                        } 
                                }); 
//This method gets the ComposerProxy from the event and initializes the editor in ComposerEditorContainer (above)
// 
                eventBus.addHandler(BrowserItemClickedEvent.TYPE, 
                                new BrowserItemClickedEventHandler() { 
                                        @Override 
                                        public void onBrowserItemClicked( 
                                                        BrowserItemClickedEvent event) { 
                                                requestFactory = GWT.create(AppRequestFactory.class); 
                                                requestFactory.initialize(new SimpleEventBus()); 
                                                ComposerRequest request = requestFactory 
                                                                .getComposerRequest(); 
                                                Request<ComposerProxy> req = request.findComposer(event 
                                                                .getclickedItem().getValue()); 
                                                req.fire(new Receiver<ComposerProxy>() { 
                                                        public void onSuccess(ComposerProxy arg0) { 
                                                                ComposerEditorContainer editorContainer = new 
ComposerEditorContainer( 
                                                                                requestFactory, arg0); 
                                                                editorContainer.edit(requestFactory 
                                                                                .getComposerRequest()); 
                                                                view.clear(); 
                                                                view.addWidget(editorContainer); 
                                                                composerEditorContainer = editorContainer; 
                                                        } 
                                                }); 
                                        } 
                                }); 
```

//第二次保存时出现的错误

原因：java.lang.IllegalStateException：com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.checkLocked(AbstractRequestContext.java: 960) 的请求已经在 com.google.web.bindery.requestfactory .shared.impl.AbstractRequestContext.editProxy(AbstractRequestContext.java: 510) 在 com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.edit(AbstractRequestContext.java: 502) 在 com.google.test.client.editor .ComposerEditorContainer.save(ComposerEditorContainer.java: 58) 在 com.google.test.client.presenter.BrowserDetailPresenter $1.onSaveButtonClicked(BrowserDetailPresenter.java:48) 在 com.google.test.client.event.SaveButtonClickedEvent.dispatch(SaveButtonClickedEvent.爪哇：17）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:07:53.767

在谷歌组上回答：[https ://groups.google.com/d/msg/google-web-toolkit/TfXd_SEJF30/ZTLkfXUQ2vUJ](https://groups.google.com/d/msg/google-web-toolkit/TfXd_SEJF30/ZTLkfXUQ2vUJ)

> RequestContext 是一个“构建器”；你把东西排队，然后fire()。一旦 fire()d，它就不再可用了；你必须创建一个新的并重新开始。

# javascript - Javascript 显示何时存储在数据库中

> ID：10793172
> 
> 赞同：3
> 
> 时间：2012-05-29T04:44:18.010
> 
> 标签：javascript, asp.net, security

我在数据库中存储“<script>alert("Hello")</script>”，当我尝试在标签中显示内容时，它会在网页中显示警报，我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T04:50:21.717

(1) 不要使用标签，使用`Literal`控件并将模式设置为“编码”，因此您的标签将被 HTML 编码：请参阅：http: [//msdn.microsoft.com/en-us/library/system。 web.ui.webcontrols.literal.mode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.literal.mode.aspx)。

或者

(2)。说：`label.Text = HttpUtility.HtmlEncode(stringFromDataBase);`

(3): 编辑：我还要提一下，您可以使用代码块：<%: 它将对文本进行 html 编码。它与 <%= 相同，只是输出是 HTML 编码的。非常便利。例子：`Welcome: <%: UserName %>`

# objective-c - Core Animation + Core Audio + sleep 没有按预期的顺序发生

> ID：10793177
> 
> 赞同：0
> 
> 时间：2012-05-29T04:44:55.480
> 
> 标签：objective-c, audio, asynchronous, core-animation

下面是我正在使用的一些代码。

我想要/期望的：

*   图像淡入；声音播放；延迟; 图像淡出。

发生什么了

*   延迟，声音播放，图像淡入然后立即淡出

非常感谢任何帮助。

**视图控制器.m**

```
[self fadein];
NSString *tempFN;
SystemSoundID soundID;
tempFN = [[NSString alloc] initWithFormat:@"%@.caf", 
          [myGlobals.gTitleArray objectAtIndex:myGlobals.gQuoteCountForLoop]];
NSString *soundFilePath = [NSString stringWithFormat:@"%@/%@", [[NSBundle mainBundle] resourcePath], tempFN];
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
AudioSessionSetProperty (kAudioSessionProperty_AudioCategory,
                         sizeof (sessionCategory),
                         &sessionCategory); 
AudioServicesCreateSystemSoundID((__bridge CFURLRef)soundFileURL, &soundID);
AudioServicesPlaySystemSound(soundID);

// Now fade-out the image after a few seconds delay
sleep(3);
[self fadeout];

-(IBAction)fadein
{
    [UIImageView beginAnimations:NULL context:nil];
    [UIImageView setAnimationDuration:2];
    [faceImage setAlpha:0.3];
    [UIImageView commitAnimations];
}

-(IBAction)fadeout
{
    [UIImageView beginAnimations:NULL context:nil];
    [UIImageView setAnimationDuration:1];
    [faceImage setAlpha:0];
    [UIImageView commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:47:09.510

我相信问题出在你使用“sleep(5)”时。使用 sleep() 函数会阻塞主线程，因此在该时间段内无法进行任何操作。在 Objective-C 中使用 sleep() 函数是非常罕见的，除非在某些命令行实用程序中。我建议您使用 NSTimer 而不是 sleep() 函数。

希望这可以帮助。

//Edit 另外，如果你真的必须使用 sleep()，你应该使用 NSThread 类的 sleepForTimeInterval: 函数，并让其余代码在辅助线程上运行。再一次，我真的不认为你应该使用 sleep() 函数或任何相关函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:44:47.817

正如另一张海报所说，睡眠是问题所在。睡眠冻结主线程。忘记睡眠的存在。永远不要使用它。sleep 唯一有效的时间是在辅助线程上，当您希望该线程停止运行一段时间，然后只有当您真的知道您在使用并发做什么时（一个非常高级的主题）

你应该做的是重写你的动画代码以使用 animateWithDuration:animations:completion:

提供一个完成块，该块使用对 animateWithDuration:animations:completion 的嵌套调用来调用下一个动画：

每个动画都会运行到最后，然后调用下一个。

顺便说一句，你应该看看 AVAudioPlayer。它比 AudioServices 更强大，更易于使用。您只需创建一个 AVAudioPlayer 并告诉它播放。

如果您希望动画中的某个步骤等待声音竞争，则 AVAudioPlayer 会接受一个委托，一旦声音播放完毕，它将调用该委托。

**以下是我建议您重新制作动画序列的方法：**

在你开始你的动画序列之前，设置一个 AVAudioPlayer 并使你的视图控制器成为它的代理。

编写一个 animateWithDuration:animations:completion 调用，动画块让你淡入。

在完成块中，开始播放 AVAudioPlayer。

在 AVAudioPlayer 委托方法 audioPlayerDidFinishPlaying:successfully: 中，调用另一个 animateWithDuration:animations:completion: 方法再次淡出您的视图。

# java - Android 更多选项菜单不显示为网格

> ID：10793183
> 
> 赞同：0
> 
> 时间：2012-05-29T04:45:29.523
> 
> 标签：java, android

我有大约 10 或 12 个选项菜单，当我按下菜单键时，6 个菜单显示为一个网格，包括更多，但是当单击更多菜单时，其余菜单显示为列表。我怎样才能让它们看起来也像一个网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:00:27.417

Android API（10 及以下）仅支持 6 个菜单按钮项，之后它添加了“更多”按钮，如您所见。（API 11+ 建议使用 ActionBar，而不是选项菜单。）我不知道如何更改 Android 代码以在网格中显示更多项目。但是你可以编写自己的代码来做你想做的事。

从[开发人员指南](http://developer.android.com/guide/topics/ui/menus.html#options-menu)：

> 如果您为 Android 2.3.x（API 级别 10）或更低版本开发应用程序，当用户按下菜单按钮时，选项菜单的内容会出现在屏幕底部，如图 1 所示。打开后，第一个可见部分是图标菜单，最多可容纳六个菜单项。如果您的菜单包含六个以上的项目，Android 会将第六个项目和其余项目放在溢出菜单中，用户可以通过选择更多来打开该菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:02:36.327

尝试[创建自定义菜单](http://www.codeproject.com/Articles/173121/Android-Menus-My-Way)，这对我帮助很大。希望这对你有用。

# database - 这个数据库设计有什么问题？

> ID：10793184
> 
> 赞同：0
> 
> 时间：2012-05-29T04:45:42.813
> 
> 标签：database

我被其他人指出，以下数据库设计存在严重问题，谁能告诉我为什么？

1.  一个 tb_user 表保存所有用户信息
2.  tb_user 表将只有 3 - 8 个用户。
3.  每个用户的数据将保存在一个单独的表中，以用户名命名。假设一个用户叫：bill_admin，那么他有一个单独的表，即bill_admin_data，用来保存所有属于他的数据。所有用户的数据共享相同的结构。

指出这个问题的人说我应该将所有数据合并到一个表中，并使用FK来区分它们，但我有以下说法：

1.  用户只有 3 - 8 人，所以不会有很多桌子。
2.  每个用户都有一个非常大的数据表，比如 50 万条记录。

像这样设计数据库是一种不好的做法吗？为什么？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T04:51:27.380

因为它不是很可维护。

1）向数据库添加数据永远不需要修改结构。在您的模型中，如果您需要添加另一个人，您将需要一个新表（或两个）。你可能认为你永远不需要这样做，但相信我。你会。

因此，假设，例如，您想向应用程序添加功能以向数据库添加新用户。使用这种结构，您必须授予最终用户创建新表的权限，这会产生安全问题。

2）它违反了[DRY原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。也就是说，您正在创建相同表结构的多个相同的副本。这使维护变得很痛苦。

3) 跨多个用户的查询将变得不必要地复杂。没有充分的理由将每个用户拆分到一个单独的表中，而不是对必须针对该数据库模型编写查询的人产生仇视。

4) 如果您因为每个用户都有很多行而将其拆分为多个表以提高性能，那么您就是在重新发明轮子。您使用的 RDBMS 无疑具有索引功能，可以有效地查询大型表。您自己开发的 hack 不会胜过平台处理大数据的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:54:10.813

我不会说这本身就是糟糕的设计。这不是关系数据库设计和优化的设计类型。

当然，您可以存储您提到的数据，但许多操作并非易事。例如：

*   添加新人
*   删除一个人
*   根据所有人员的数据生成报告

如果你真的不在乎这样做。继续按照您的建议制作表格，尽管我建议使用非关系数据库，例如 MongoDB，它更适合这种类型的结构。

如果您更喜欢使用关系数据库，通过按类型而不是按人聚合数据，在添加新人员和计算报告时会给您带来很大的灵活性。

500k 行并不是“很大”，所以在设计时不要担心大小。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T04:53:46.863

对于这些类型的需求，最好使用像 mongoDB 这样的基于文档的数据库。

# ruby-on-rails - 离线 Rails 开发环境

> ID：10793187
> 
> 赞同：0
> 
> 时间：2012-05-29T04:45:53.690
> 
> 标签：ruby-on-rails, development-environment

下周我将乘坐 15 小时的国际航班离开，并计划编写一个我一直在考虑的 Rails 应用程序。由于他们不太可能在我的飞机上使用 WiFi（我飞得很便宜），所以设置离线 Rails 开发环境的最佳方法是什么？我下载了所有文档，但我担心我需要一个我无法获得并且会卡住的宝石。我对 RoR 还是很陌生，并且会喜欢一些建议，这样我就不必放弃太平洋上的某个地方。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:02:26.157

我有过类似的经历。我遇到的第一件事是需要一些文档（rails 指南、API 文档）。听起来你已经得到了那个部分。我遇到的下一个问题是外部 JavaScript 依赖项（jQuery）。我使用的是谷歌 CDN，但是当我离线时它不起作用。确保您拥有通常从 CDN 获得的任何文件的本地副本。至于 gem 依赖关系，请`bundle install`在上飞机之前确保您。我无法知道您将需要哪些 gem，但如果您需要的所有内容都内置在 rails 中，那么执行 bundle install 将确保您拥有所需的所有 gem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:53:46.180

离线开发 Rails 没有问题，但正如您所注意到的，您将无法访问任何 gem。除了在飞行前尝试下载一些更受欢迎的宝石之外，您无能为力。想想你将要做什么，或者更好的是，现在就开始编写它，并找出你可能需要的宝石。

您下载了文档，这很好，但是您下载了哪些文档？如果您还没有，我强烈建议您下载[Rails Guides](http://guides.rubyonrails.org/)。

# javascript - 在javascript代码中使用Rhino解析器来解析javascript中的字符串

> ID：10793189
> 
> 赞同：5
> 
> 时间：2012-05-29T04:46:23.840
> 
> 标签：javascript, rhino

我是 Rhino 解析器的新手。我可以在 javascript 代码中使用这个 rhino 解析器来提取任何 html 文件中 javascript 代码的抽象语法树吗？如果是这样，我应该开始这个。这是为了分析代码的 AST 以计算 javascript 中使用的关键字和单词之间的比率，识别常见的解密方案，并计算某些类函数调用的出现次数，例如 fromCharCode() , eval() 和一些常用于解密和执行驱动下载漏洞的字符串函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T15:27:59.413

据我所知，您无法在 Rhino 中从 JavaScript 访问 AST。不过，我会看一下[Esprima](http://esprima.org/)解析器。它是一个用 JavaScript 编写的完整的 JavaScript 解析器，它有一个用于进行代码分析的简单 API。

这是一个计算关键字与标识符比率的简单示例：

```
var tokens = esprima.parse(script, { tokens: true }).tokens;
var identifierCount = 0;
var keywordCount = 0;

tokens.forEach(function (token) {
    if (token.type === 'Keyword') {
        keywordCount++;
    }
    else if (token.type === 'Identifier') {
        identifierCount++;
    }
});

var ratio = keywordCount / identifierCount; 
```

# android - 删除绘图缓存

> ID：10793191
> 
> 赞同：3
> 
> 时间：2012-05-29T04:46:37.970
> 
> 标签：android, bitmap

在我的应用程序中，当用户单击它时，我想在运行时*交换图像。*

当用户单击第一个图像然后单击第二个图像时有两个图像视图我正在获取第一个图像视图图像的位图并为此分配给第二个图像视图我使用了以下代码：

```
public Bitmap createBitmap(ImageView imageview) {
    imageview.setDrawingCacheEnabled(true);
    imageview.buildDrawingCache(false);

    if(imageview.getDrawingCache() != null) {
        Bitmap  bitmap = Bitmap.createBitmap(imageview.getDrawingCache());
        imageview.setDrawingCacheEnabled(false);
        return bitmap;
    } else {
        return null;
    }
} 
```

代码工作正常，但每次都没有清除缓存，并且使用以前的缓存创建的位图，所以我如何清除位图缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:18:55.437

这是一个示例，例如我曾经使用的地方`Free the native object associated with this bitmap`。

```
Bitmap  bitmap;

public Bitmap createBitmap(ImageView imageview) {
    if (bitmap != null) {
        bitmap.recycle();
        bitmap = null;
    }
    bitmap = Bitmap.createBitmap(imageview.getDrawingCache());
    // Your Code of bitmap Follows here
} 
```

在使用位图之前，只需释放对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:56:13.783

在评估您的位图之前使用`bitmap.recycle();`以在重新创建之前清除其缓存。

# javascript - Javascript提交在服务器上不起作用？

> ID：10793192
> 
> 赞同：0
> 
> 时间：2012-05-29T04:46:38.637
> 
> 标签：javascript, html, forms, submit, form-submit

我有最奇怪的错误。我有一个简单的 html 表单。你可以在这里看到它：http: [//www.learndoearn.org/almost_real_products/food_services.html](http://www.learndoearn.org/almost_real_products/food_services.html)

此表格仅用于演示目的。它并没有真正提交给任何地方。我想做的就是验证几个字段，如果这些字段被填写，则将用户重定向到感谢页面。如果您物理上单击 html 文件将其打开，则此操作很好，但是...如果您尝试通过域名访问此 html 页面（如上面的链接中所示），单击提交按钮（一旦所有必要的字段都填写）不起作用。它根本没有做任何事情。

到感谢页面的重定向出现在此文件中：http: [//www.learndoearn.org/almost_real_products/js/forms.js](http://www.learndoearn.org/almost_real_products/js/forms.js)（它大约在 js 文件的中间位置，其中显示 window.location = "http://www .learndoearn.org/almost_real_products/thanks.html";

知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:59:53.093

您提供给 ajax 调用“bin/MailHandler.php”的链接返回 405 错误。由于这个原因，success 函数没有运行并且重定向不会发生。

修改您的 php 文件以返回成功，而不管输入是否是虚拟的，并且它应该都能正常工作。

# php - 如何根据产品价格验证 PayPal IPN？

> ID：10793195
> 
> 赞同：0
> 
> 时间：2012-05-29T04:46:57.730
> 
> 标签：php, paypal-ipn

我正在构建一个软件交付平台。我有一个用 PayPal 编写的完全可用的自定义 IPN 脚本，用 PHP 编写，但我遇到的问题是确认价格。

**简而言之，将实际产品价格与来自 PayPal IPN 的字段进行比较的算法是什么？**

我将产品价格标记为 1.00 美元，但来自英国的 IPN（使用美元货币）显示 mc_gross 为 1.20 美元，mc_fee 显示为 0.34（并且没有 mc_shipping 值）。请注意，这是一个简单的产品——没有订阅、运输、税收和其他复杂性。

因此，由于 1.00 美元与 1.20 美元不匹配，并且 ($1.00 - $0.34 = $0.86 !== $1.00)，我真的不知道确认该价格的公式是什么。这意味着有人可以拿 PP 按钮代码，更改价格，然后购买。然后 IPN 会耸耸肩接受这个价格，除非我能找到验证这个价格的窍门。

请注意，我确实传递了一个自定义字段，该字段告诉我产品 ID 是什么以及购买的数量，例如 4pk 小部件。

我研究了使用 PHP 即时制作加密支付按钮需要什么，它需要一个具有完整根功能的专用托管计划，因为它涉及安全证书和其他几个因素。所以，这看起来不太可能在这里使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:08:48.743

制作加密支付按钮不需要完全根功能，尽管使用专用主机更容易保护您的私人证书安全。您可以咨询您的提供商，看看他们有哪些保护措施，以确保其他人不能只是进入您的主目录并四处窥探。

您可以在本地计算机上生成私有证书并将其上传到您的服务器。服务器将需要`openssl`扩展来执行签名。

# css - 如何使用正则表达式匹配css元素

> ID：10793201
> 
> 赞同：3
> 
> 时间：2012-05-29T04:47:22.503
> 
> 标签：css, regex

我正在调用`indexOf`中的头部`jQuery`。我想看看 CSS 是否包含任何`font-weight:bold`属性。问题是，该属性可以有 4 个更改：

1.  `font-weight:bold`
2.  `font-weight: bold`
3.  `font-weight :bold`
4.  `font-weight : bold`

如何使用正则表达式匹配这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T04:50:13.640

**试试这个**

```
\b(?:font-weight\s*:[^;\{\}]*?\bbold)\b 
```

或者会更好地使用：

```
\b(?:font-weight[\s*\\]*:[\s*\\]*?\bbold\b) 
```

**解释**

```
\b                # Assert position at a word boundary
(?:               # Match the regular expression below
   font-weight       # Match the characters “font-weight” literally
   [\s*\\]           # Match a single character present in the list below
                        # A whitespace character (spaces, tabs, and line breaks)
                        # The character “*”
                        # A \ character
      *                 # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
   :                 # Match the character “:” literally
   [\s*\\]           # Match a single character present in the list below
                        # A whitespace character (spaces, tabs, and line breaks)
                        # The character “*”
                        # A \ character
      *?                # Between zero and unlimited times, as few times as possible, expanding as needed (lazy)
   \b                # Assert position at a word boundary
   bold              # Match the characters “bold” literally
   \b                # Assert position at a word boundary
) 
```

* * *

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:06:04.160

请记住，`font-weight:bold;`它也可以设置为[整数 700](https://developer.mozilla.org/en/CSS/font-weight)或通过扩展字符串范围以匹配相当多的简写[`font`符号。](https://developer.mozilla.org/en/CSS/font)

```
\b(?:font.*?:[^;]*?\b(bold|700))\b 
```

[摆弄](http://jsfiddle.net/ovfiddle/84mHk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T04:59:07.537

试试这个：

```
/font-weight\: bold|font-weight\:bold|font-weight \:bold|font-weight \: bold/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T05:03:57.233

试试这个：

```
RegularExpressionValidator.ValidationExpression = "font-weight\s?:\s?bold" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T05:32:08.590

您不能为此使用正则表达式。CSS 可能包含这样的字符串

```
.foo{ content: "font-weight:bold;" } 
```

你需要一个合适的解析器。幸运的是，浏览器有一个并提供[API](https://developer.mozilla.org/en/DOM/CSSStyleDeclaration#Example)来访问各个 CSS 规则。

# c - copy_to_user 不工作 - 我哪里出错了？

> ID：10793202
> 
> 赞同：3
> 
> 时间：2012-05-29T04:47:31.630
> 
> 标签：c, copy, kernel-module

当条件失败时，我正在尝试从内核空间到用户空间获取一些消息！

这是我的内核代码：

```
#define MESSAGTOUSER 1

int ret_val;
struct siginfo sinfo;
pid_t id;
struct task_struct *task;

unsigned char msgBuffer[20];
unsigned char buf1[20]= "HI";

static int major_no;
static struct class *safe_class;

static long device_ioctl(struct file *file, unsigned int cmd, unsigned long arg);
static int device_open(struct inode *inode, struct file *file);
static int device_write(struct file *file, const char *gdata, size_t len, loff_t *off);
static int device_read(struct file *file, char *buf, size_t len, loff_t *off);
static int device_release(struct inode *inode, struct file *file);

int failureDetection (char* faultMsg) {
    strcpy (msgBuffer, faultMsg);
    printk(KERN_ALERT"\nMessage from HBM %s\n", msgBuffer);
    printk(KERN_ALERT".......... RETURN VALUE ...... : %d", ret_val);

    int Reg_Dev(void);
    memset (&sinfo, 0, sizeof(struct siginfo));
    sinfo.si_signo = SIGUSR1;
    sinfo.si_code  = SI_USER;

    if (id == 0) {
        printk("\ncan't find User PID: %d\n", id);
    }else {
    //task = pid_task(find_vpid(pid), PIDTYPE_PID);
    task = find_task_by_vpid(id);
    send_sig_info(SIGUSR1, &sinfo, task);
    }
    return 0;
}

static int device_open(struct inode *inode, struct file *file){
    /*sucess*/
    return 0;
}

void strPrint(void) {
    printk("value of msgBuffer: %s", msgBuffer);
}

static int device_write(struct file *file, const char *gdata, size_t len, loff_t *off){
    get_user (id,(int *)gdata);
    if(id <0)
        printk(KERN_ALERT"Cann't find PID from userspace its : %i", id);
    else
        printk(KERN_ALERT"Successfully received the PID of userspace %i", id);
    return len;
}

static int
device_read(struct file *file, char *buf, size_t len, loff_t *off){
    /*success*/
    return 0;
}

static int device_release(struct inode *inode, struct file *file){
    /*success*/
    return 0;
}

static long device_ioctl(struct file *file, unsigned int cmd, unsigned long arg) {

    switch (cmd) {
        case MESSAGTOUSER:
            ret_val = copy_to_user((char *)arg, msgBuffer, sizeof(arg));
            printk("Msg of Kernel %s", msgBuffer);
            break;
        default:
            break;
    }
    return 0;

}

static struct file_operations fops = {
    .open = device_open,
    .write = device_write,
    .read = device_read,
    .release = device_release,
    .unlocked_ioctl = device_ioctl
};

int Reg_Dev(void) {

    major_no = register_chrdev(0, "safe_dev", &fops);
    safe_class = class_create(THIS_MODULE, "safe_dev");
    device_create(safe_class,NULL, MKDEV(major_no, 0), "safe_dev");
    printk("\n Device Registered and Created \n");
    return 0;
}

void UnReg_dev (void) {
    printk("\nUser PID : %d\n", id);
    unregister_chrdev(major_no, "safe_dev");
    device_destroy(safe_class, MKDEV(major_no,0));
    class_unregister(safe_class);
    class_destroy(safe_class);
    printk("\n Device Un-Registered and Destroyed \n");
}

extern int Reg_Dev(void); 
```

对于他的用户空间，我有这个代码：

```
#define PORT 9930
#define G_IP "192.168.10.71"
#define BUFLEN 512

#define MESSAGTOUSER 0

unsigned char *str[20];
char b1[BUFLEN], b2[BUFLEN];
struct sockaddr_in me,client;
int s, i, n=sizeof(me);
int fd;

void error_handler(char *s) {
  perror(s);
  exit(1);
}

void signal_handler (int signum) {

  if(signum == SIGUSR1)
  {
    printf("\n%s\n",str);

    if((s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP))  == -1)
       error_handler("\nERROR: in Socket\n");

    memset((char *) &me, 0, sizeof(me));
    me.sin_family = AF_INET;
    me.sin_port = PORT;

    if (inet_aton(G_IP, &me.sin_addr)==0) 
    {
       fprintf(stderr, "inet_aton() failed\n");
       exit(1);
    }
    printf("Message from Kernel : %s", &str);
    //strcpy (str, newStr);

    int cntr =0;    sprintf(b2, "\nFailure Message: %s\n",str);
    printf("\nsending Fault to PMN Group : Tick - %d\n", cntr++);

    if(sendto(s, str, sizeof(str),0,(struct sockaddr *) &me,n)==-1)
        error_handler("\nERROR: in sendto()\n");
    close (s);
//    counter ++;
 //   sendAndReceiveOverUDP();
    return;
  }
}

int main() {
   pid_t u_id;
   u_id = getpid();
   int i = 1;

   fd = open("/dev/safe_dev",O_RDWR);
   write(fd, &u_id, 4);
   ioctl (fd, MESSAGTOUSER, &str);
   printf("\n PID sent to device successfully: %d \n", u_id);
   close(fd);

   signal(SIGUSR1, signal_handler);
   printf("\nMy PID is: %d\n",u_id);
   //printf("Subnet 1 working fine.. Tick - %d", tv.tv_sec);

   while (1)
   sleep(1);
   return 0;
} 
```

## 现在我期望在用户空间收到什么：

```
Message from Kernel: A<->B
Sending Fault o PMN Group : tick - 0

Message from Kernel: B<->B
Sending Fault o PMN Group : tick - 1
....
... 
```

## 但输出是什么：

```
Message from Kernel:
Sending Fault o PMN Group : tick - 0

Message from Kernel:
Sending Fault o PMN Group : tick - 1
....
... 
```

似乎 copy_to_user 不工作，而在简单的程序中只是将字符串从内核复制到用户工作正常，但是当我在这种情况下使用它时它不工作，它的编译没有任何警告，

*   其他一些细节：
*   failureDetection() 得到一个字符串，如 A<->B 在其余程序的输出中提到的..
*   来自 failureDetection 的相同消息正在内核级别打印，但不在用户级别传输。
*   我也尝试在其中创建一个自己的字符串并尝试转移它，但它也不起作用！假设*msgBuffer = HI*，那么我应该收到 HI 到用户空间。但它没有发生！任何人都可以请让我纠正这段代码有什么问题吗？我怎样才能获得用户空间的更新！！？？？

**信德..**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:49:34.237

`copy_to_user()`唯一发生在响应的，`ioctl()`它只发生一次，很早就在你的代码中。大概在那个时候内核缓冲区`msgBuffer`是空的，因为那个`failureDetection()`函数还没有运行。`failureDetection()`如果稍后运行然后设置并不重要`msgBuffer`，因为您的用户空间程序永远不会再次调用，`ioctl()`所以它看不到`msgBuffer`.

您的`copy_to_user()`通话中也有一个错误-`sizeof(args)`您`4`可能应该使用`sizeof msgBuffer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:18:01.267

@caf：非常感谢你..

```
void signal_handler (int signum) {

if(signum == SIGUSR1)
{
    fd = open ("/dev/safe_dev",O_RDWR);
    ioctl (fd, MESSAGTOUSER, &str);
    close (fd);

    if((s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP))  == -1)
        error_handler("\nERROR: in Socket\n");

    memset((char *) &me, 0, sizeof(me));
    me.sin_family = AF_INET;
    me.sin_port = PORT;

    if (inet_aton(G_IP, &me.sin_addr)==0) 
    {
        fprintf(stderr, "inet_aton() failed\n");
        exit(1);
    }

    printf("Failure Detected on Eth Cards as : %s are non reachable.", str);

    printf("\nsending Fault to PMN Group : Tick - %d\n", cntr++);
    sprintf(b2, "\nFailure Message: %s\n",str);

    if(sendto(s, str, sizeof(str),0,(struct sockaddr *) &me,n)==-1)
        error_handler("\nERROR: in sendto()\n");
    close (s);
    return;
    }
} 
```

我只是犯了一个愚蠢的错误..呵呵..我没有在文件打开和关闭块之间添加它..你的建议解决了我的问题......

非常感谢你的回复..

**拉希..**

# visual-studio-2010 - 将 DataSet 从窗体移动到项目

> ID：10793204
> 
> 赞同：0
> 
> 时间：2012-05-29T04:47:42.773
> 
> 标签：visual-studio-2010, dataset, projects-and-solutions

我有一个带有一些 ToolStrips、MenuStrips 和一个 DataSet 的表单。

最近我添加了另一个表单，我也需要数据集在这里可用。有没有办法将 DataSet 从表单控件移动到项目结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:13:47.810

您需要将 DataSet 对象从一种形式传递到另一种形式。您可以使用第二种形式的构造函数来执行此操作。或者第二种形式可以有一个公共方法或属性，使用它可以传递 DataSet 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:00:18.973

我在项目层次结构中创建了另一个 DataSet，因为我没有找到任何其他解决方案。

# objective-c - 如何从弱属性中移除 KVO？

> ID：10793206
> 
> 赞同：35
> 
> 时间：2012-05-29T04:48:27.763
> 
> 标签：objective-c, ios, macos, automatic-ref-counting

我有一个视图（我们称之为视图 A），它具有`weak`其父视图（视图 B）的属性。视图 A KVO 的超级视图，视图 B。由于视图 A 对视图 B 的引用是一个弱属性（以防止保留循环），我怎样才能删除观察者（A 观察 B）？在我有机会删除它之前，视图 A 对视图 B 的引用将被取消。

A 比 B 寿命长，因为视图控制器对 A 有很强的引用。这是泄漏的日志消息：

```
An instance 0x9ac5200 of class UITableView was deallocated while key value observers were still registered with it. Observation info was leaked, and may even become mistakenly attached to some other object. Set a breakpoint on NSKVODeallocateBreak to stop here in the debugger. Here's the current observation info:
<NSKeyValueObservationInfo 0x8660360> (
<NSKeyValueObservance 0x8660320: Observer: 0x8660020, Key path: contentOffset, Options: <New: YES, Old: NO, Prior: NO> Context: 0x8660020, Property: 0x864ac80>
) 
```

B 是一个 UITableView。在处设置断点会`NSKVODeallocateBreak`产生无用的结果。

在 A's`removeFromSuperview`中，我尝试删除观察者，但 A 对 B 的引用已经是`nil`。

切换到`unsafe_unretained`更多手动操作或调用`[A removeFromSuperview]`视图控制器`dealloc`可以解决问题。我想知道如何使用`weak`属性来解决这个问题。

以下是相关代码：[https ://gist.github.com/2822776](https://gist.github.com/2822776)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:28:35.353

我发现这种情况下特别需要的任何类型的代码确实没有必要，因为可以自动删除。

随着 ARC 的引入，Apple 应该提供自动删除观察者的功能来解决这种情况，但不幸的是他们没有。但是我创建了自己的类别来添加这个缺少的功能：[https](https://github.com/krzysztofzablocki/SFObservers) ://github.com/krzysztofzablocki/SFObservers 我已经在我的博客上解释了我是如何管理它的：[http ://www.merowing.info/2012/ 03/自动移除-nsnotificationcenter-or-kvo-observers/](http://www.merowing.info/2012/03/automatic-removal-of-nsnotificationcenter-or-kvo-observers/)

如果您查看我的解决方案，您会注意到，它确保调用原始代码，即使其中一种方法调用其他方法，所以即使苹果更改其内部行为，该类别仍然可以正常工作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:15:40.177

您可以定义一个引用超级视图的显式弱属性，然后`self`使用诸如`@"propertyReferringSuperview.propertyOfSuperview"`？当您收到 KVO 通知时，您检查是否`self.propertyReferringSuperview == nil`并停止观察`@"propertyReferringSuperview.propertyOfSuperview"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:33:06.953

`superview`您可以只使用该属性并实现`willMoveToSuperview:`来添加/删除 KVO 观察，而不是添加一个弱属性。

```
- (void)willMoveToSuperview:(UIView *)newSuperview {
    [self.superview removeObserver:self forKeyPath:@"contentOffset" context:context];
    [newSuperview addObserver:self forKeyPath:@"contentOffset" options:NSKeyValueObservingOptionNew context:context];
    [super willMoveToSuperview:newSuperview]; // optional as default implementation does nothing
} 
```

# c# - WMP：全屏时无法控制/处理事件

> ID：10793209
> 
> 赞同：1
> 
> 时间：2012-05-29T04:49:07.227
> 
> 标签：c#, .net, windows-media-player, wmp

我已经在我的表单中添加了一个 Windows Media 控件，并且能够完美地使用它，除非它处于全屏状态。似乎我无法通过应用程序中的关键事件来操作控件的任何方面。我目前的目标是处理“esc”键以退出全屏。从那以后我可以做更多的事情。

如果您有任何想法，请告诉我！

谢谢，凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:21:52.513

我曾经在某处找到此代码并且工作得很好，但不记得我从哪里得到它。

```
 public partial class WMForm : Form,IMessageFilter

{

    public WMForm()

    {

        InitializeComponent();

    }

    private void WMForm_Load(object sender, EventArgs e)

    {

        this.MyWindowsMediaPlayer.URL = @"YourFilePath/Url";

        Application.AddMessageFilter(this);

    }

    private void WMForm_FormClosing(object sender, FormClosingEventArgs e)

    {

        Application.RemoveMessageFilter(this);

    }

    #region IMessageFilter

    private const UInt32 WM_KEYDOWN = 0x0100;

    public bool PreFilterMessage(ref Message m)

    {

        if (m.Msg == WM_KEYDOWN)

        {

            Keys keyCode = (Keys)(int)m.WParam & Keys.KeyCode;

            if (keyCode == Keys.Escape)

            {

                this.MyWindowsMediaPlayer.fullScreen = false;

            }

            return true;

        }

        return false;

    }

    #endregion

} 
```

# jira - Jira REST API 获取最后一个问题

> ID：10793210
> 
> 赞同：3
> 
> 时间：2012-05-29T04:49:15.193
> 
> 标签：jira

每次将新问题添加到 Jira 时，我的应用程序都应该执行一些逻辑。我想我唯一的选择是每隔 n 秒请求最后添加的问题，并找出哪些问题是新的。我正在调查[Jira REST API](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+APIs)，但找不到任何检索最后一个问题的方法。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T06:10:40.523

您可以尝试使用来自 Jira 的活动提要。此页面概述了访问它的 URL 并对其进行过滤以匹配您的搜索条件[https://developer.atlassian.com/server/framework/atlassian-sdk/sumption-an-activity-streams-feed/](https://developer.atlassian.com/server/framework/atlassian-sdk/consuming-an-activity-streams-feed/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T13:56:19.830

对于基于轮询的解决方案，您可以使用 JQL 查询 Jira REST API 中的“搜索”方法。

邮寄至：

```
http://[yourjirainstance]/rest/api/2/search 
```

在正文中使用 sdata 查询：

```
{"jql" : "project = MyProject and updated>=2012-09-01",
                 "startAt" : 0,
                 "maxResults" : 50
} 
```

通过这种方式，您可以执行通常在 Jira 界面上执行的查询。检查[此](https://confluence.atlassian.com/display/JIRA/Advanced+Searching#AdvancedSearching-FieldsReference)以获取可在查询中使用的字段的参考。

不用说，但如果会话尚未经过身份验证，请不要忘记标题和锻炼身份验证中的“Content-Type: application/json”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T13:17:42.727

我不得不做类似的事情，最终我使用了[Jira Scripting Suite](https://marketplace.atlassian.com/plugins/com.quisapps.jira.jss)，因为它更简单。我已将 Jython 发布功能添加到“创建问题”转换。

这样，只要添加新问题，您的脚本就会运行。它是否满足您的需求？

# javascript - 将rowdata标签从javascript传递到servlet

> ID：10793213
> 
> 赞同：1
> 
> 时间：2012-05-29T04:50:03.763
> 
> 标签：javascript, jquery, ajax, servlets

我有一个 jsp 文件，在按钮上单击一堆行以 html 表格格式显示。

这些行也有复选框。当我单击一个复选框并单击另一个按钮时，我能够检索选定的行标签并将它们推送到一个数组中。

如何将此数组传递给 servlet\scriptlet。

数组由如下标签组成：`'< td > hi < /td> <td>ho</td>','< td > hi < /td> <td>ho< /td>'`,....

我包含了 json2.js 并尝试了 stringify，但是当我使用 request.getparametervalues() 时，servlet 总是返回说 null

我也没有提交表单，因此排除了编码的提交表单部分。

非常感谢任何和所有建议。

js中的代码：

```
$.ajax({
    type: 'POST',
    url: 'book.jsp',
    data: JSON.stringify({ nameParameter: colheader }),
    dataType: 'json',
    contentType: "application/json; charset=utf-8",
    success:function(data){alert(data);},
    error:function(){alert('error');}
}); 
```

scriptlet book.jsp 中的代码

```
String[] arrayData=request.getParameterValues("nameParameter");
System.out.println("########nameParameter"+arrayData); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:28:18.093

我找到了一种方法。

我使用主键的值向每个复选框添加一个 rowid。

在选中一个复选框后，我使用以下命令将 rowid 发布到 scriptlet

```
$.post('target.jsp', { id: selectedrows }); 
```

selectedrows 是一组选定的 rowid。

我将得到的结果集设置到jsp中的session中。

我从我的 scriptlet (target.jsp) 中的会话中检索结果集，并根据我选择的 rowids 进行过滤。这样我就拥有了所有的值，并且不需要传递整个 rowtag。

或者，您可以使用选定的 rowid 再次查询数据库，我选择不这样做，因为我的结果集不包含超过 100 行。

# sql - SQL Join - 员工没有工作的所有商店

> ID：10793219
> 
> 赞同：0
> 
> 时间：2012-05-29T04:50:50.797
> 
> 标签：sql, join, left-join

基本上我想要做的是获取员工**没有**工作过的商店列表。问题是查询返回了其他员工工作过的商店列表。例如，如果employee.ID = 1&2 都在store.ID = 2 工作，那么结果集将包括我不想要的store.ID = 2，因为Employee.ID = 1 已经在那里工作。

```
SELECT
   stores.name
FROM
   stores
LEFT JOIN
   employeeStoreRelationshipTable
ON
   employeeStoreRelationshipTable.employeeID = employee.id
WHERE
   employeeStoreRelationshipTable.employeeID IS NULL    
OR
   employeeStoreRelationshipTable.employeeID <> [actual Employee ID] 
```

这是因为加入包含它，因为没有过滤器来存储。ID = 2 因为员工以外的另一名员工。ID = 1 在那里工作......

**更新：**按要求添加信息：

```
Employee table
id, name
1, Bob
2, John

Store table
ID, name
1, 111 main st.
2, 222 main st.
3, 333 main st.
4, 444 main st.

EmployeeStoreRelationshipTable
employeeID, storeID
1, 1
1, 3
2, 3
3, 4 
```

所以在这种情况下，结果应该是：

员工 1 没有在商店 2 和 4 工作过。

查询结果为 2、3、4。出现 Store 3 是因为 Employee.ID = 2 已经在 store 3 工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:01:17.207

这个查询称为[反连接](http://www.dbspecialists.com/files/presentations/semijoins.html)，应该看起来像这样（可能需要调整它）：

```
select name from stores s where 
     not exists (select 1 from employyeRelTable er 
                 where er.employeeId=[employeeID] 
                   and er.storeID=s.storeID) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:10:37.017

```
select *
from stores s
where ID not in (
    select StoreID
    from EmployeeStoreRelationshipTable
    where employeeId=[employeeID]) 
```

这仅执行两个查询 - 内部一个生成他使用的 ID 列表，外部一个为您提供所有*其他*商店。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:01:08.183

尝试添加

```
and employeeStoreRelationshipTable.employeeId = [actual Employee ID] 
```

加入条件并从`where`子句中删除

# objective-c - NSDate 格式化它以包含日期和时间

> ID：10793220
> 
> 赞同：-2
> 
> 时间：2012-05-29T04:50:51.890
> 
> 标签：objective-c, cocoa-touch, nsdate

我有两个字符串。

```
NSString *dateof = @"Mon May 21";
NSString *timeof = @"01.00 pm from 11.50 pm"; // 01.00 pm is the start time and 11.50 pm is the end time 
```

我需要将这些保存为`NSDate`s，格式为`2012-05-21 13:00:00 +0000`.

到目前为止，我的方法是：

```
NSDate *currentTime        = [NSDate date];
NSCalendar *cal            = [NSCalendar currentCalendar];
NSDateComponents 
*currentDateComps = [cal components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit 
                           fromDate:currentTime];

NSString *startDateStringWithYear = [NSString stringWithFormat:@"%@ %d", startDateString, currentDateComps.year];
NSString *endDateStringWithYear   = [NSString stringWithFormat:@"%@ %d", endDateString, currentDateComps.year];

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"EEE MM dd yyyy"];

[formatter setTimeZone:[NSTimeZone systemTimeZone]];
NSDate *startDate = [formatter dateFromString:startDateStringWithYear];

NSArray *timeDurationStringWords = [timeof componentsSeparatedByString:@" "];

// Calculate NSDate's for the start time for today:
NSString *startTimeString = [timeDurationStringWords objectAtIndex:0];
currentDateComps.hour     = [[startTimeString substringToIndex:2] intValue];
currentDateComps.minute   = [[startTimeString substringFromIndex:3] intValue];
if ([[timeDurationStringWords objectAtIndex:1] isEqualToString:@"pm"]) 
{
    currentDateComps.hour += 12;
}
NSDate *startTime         = [cal dateFromComponents:currentDateComps]; 
```

当我调试代码时，`startTime`打印出`2012-05-29 07:30:00 +0000`哪个不正确（日期和时间都不正确）。我认为这是因为格林威治标准时间。

我需要日期和时间`2012-05-21 13:00:00 +0000`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:39:58.447

这会做到的。至于本地/格林威治标准时间，这将为您提供一个包含本地时间的 NSDate，但调试器将始终以格林威治标准时间显示。如果要将其显示给用户，则需要将其（使用 a `NSDateFormatter`）格式化为您想要的格式，在这种情况下它将是本地时间。

```
NSString *dateof = @"Mon May 21";
NSString *timeof = @"01.00 pm from 11.50 pm";
NSDate   *today  = [NSDate date];

// Start time will be array index 0, end time will be index 1:
NSArray  *times  = [timeof componentsSeparatedByString:@" from "];

NSCalendar *cal  = [NSCalendar currentCalendar];
NSDateComponents *yearComp = [cal components:NSYearCalendarUnit fromDate:today];

// Append the year and the time to the dateof string to get a string like @"Mon May 21 2012 01.00 pm":
NSString *start  = [dateof stringByAppendingFormat:@" %d %@", yearComp.year, [times objectAtIndex:0]];
NSString *end    = [dateof stringByAppendingFormat:@" %d %@", yearComp.year, [times objectAtIndex:1]];

// Make a date formatter that recognizes the above date/time:
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"EEE MMM dd yyyy hh.mm a"];

// Convert the strings to dates:
NSDate *startDate = [formatter dateFromString:start];
NSDate *endDate   = [formatter dateFromString:end]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:54:38.907

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd 'at' HH:mm"];
NSString *str = [formatter stringFromDate:[NSDate date]];
NSLog(@"str=%@",str);
NSDate *dt = [NSDate date];
dt = [formatter dateFromString:str];
NSLog(@"dt=%@",dt); 
```

**输出：**

**str=2012-05-29 在 10:36**

**dt=2012-05-29 05:06:00 +0000**

# alignment - MonoDevelop 中的对齐

> ID：10793223
> 
> 赞同：1
> 
> 时间：2012-05-29T04:51:10.620
> 
> 标签：alignment, monodevelop

我从使用 Visual Studio Ultimate 2010 转而尝试使用 MonoDevelop 和 GTK#。我正在尝试使用新的 IDE，但它似乎与 Visual Studio 大不相同。我想开发全屏应用程序，这就是为什么我必须设置水平和垂直对齐。在 Visual Studio 中，我可以将 Horizo​​ntalAlignment 属性设置为 Stretch 并将 VerticalAlignment 设置为 Top，但 MonoDevelop 和 Gtk# 没有此属性。如何在 MonoDevelop 中设置相同的对齐方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:42:35.670

GTK+ 布局系统与 Winforms 非常不同——它基于将小部件打包到容器中。默认情况下，大多数小部件会展开以占用其父容器分配给它们的所有空间。例如，如果您将一个按钮直接放入一个窗口中，它将填满整个窗口。如果将其放入 HBox/VBox 中，则可以使用 expand 和 fill 属性来控制框如何在其子窗口小部件之间共享可用空间，以及窗口小部件如何填充可用空间。

更准确的答案需要有关您实际使用的小部件的一些信息。

# java - 我应该将大小增加到多大以避免烫发错误？

> ID：10793228
> 
> 赞同：0
> 
> 时间：2012-05-29T04:52:03.647
> 
> 标签：java, eclipse, google-app-engine, size, permgen

在为 Eclipse 安装谷歌应用引擎时，我得到了`perm gen error`. 我读到您需要`perm gen`从 eclipse 打包的配置或 ini 文件中增加 eclipse 的大小。目前它看起来像这样：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m  
-Xmx512m 
```

我需要在多少个地方进行编辑？我需要在哪里添加？是`256 M`指 MB 吗？我应该将尺寸增加到多大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:01:41.137

您需要在ini文件末尾添加一个：

```
-XX:MaxPermSize=256m 
```

继续扩大规模，直到问题消失 - 先尝试 128M，看看情况如何。

是的，256M 的意思是“256 兆字节”。您也可以使用`G`千兆字节。

# javascript - 根据选择的选项更改输入大小

> ID：10793231
> 
> 赞同：2
> 
> 时间：2012-05-29T04:52:58.763
> 
> 标签：javascript, html, forms, select, input

我已经看到发布的类似问题并试图更改它们以满足我的需求，但我对 javascript 的了解还不够。如果他们选择“状态”作为搜索选项，我想要做的就是将表单输入限制为 2 个字符。这就是我所拥有的：

```
function changeValue(){
var option=document.getElementById('searchtype').id;

if (option == ("A") || ("B") ){
document.getElementById('field').size="40";
}
else if(option=="C"){
document.getElementById('field').size="2";

<form action="results.php" method="post">
Search By:<br />
<select id="searchtype" name="searchtype" onchange="changeValue();">
<option id="A" value="name">Hospital Name<br /></option>
<option id="B" value="city">City</option>
<option id="C" value="state">State</option>
</select>
<br /><br />
Search:<br />
<input id="field" name="searchterm" type="text" size="0"> 
```

我做错了什么还是有更好的方法来做到这一点？

我在下面使用了 Jack 的代码并添加了 field.size 属性，因此我的输入与允许的最大字符数匹配：（感谢 Jack）

```
script type="text/javascript">
function changeValue(dropdown) {
var option = dropdown.options[dropdown.selectedIndex].value,
field = document.getElementById('field');

if (option == 'name' || option == 'city') {
    field.maxLength = 40;
            field.size = 40;
} else if (option == 'state') {
    field.value = field.value.substr(0, 2); 
    field.maxLength = 2;
            field.size = 2;
}
}       
</script>

            <h1>Hospital Search</h1>
    <form action="results.php" method="post">
    Search By:<br />
    <select id="searchtype" name="searchtype" onchange="changeValue(this);">
    <option id="name" value="name">Hospital Name<br /></option>
    <option id="city" value="city">City</option>
    <option id="state" value="state">State</option>
    </select><br />
    Search:<br />
    <input id="field" name="field" type="text" size="40">
    </input> 
```

在决定带有状态列表的下拉列表会更好之后，我将其更改为：

```
<form action="results.php" method="post">
      Hospital Name:<br />
      <input name="searchterm_name" type="text" size="40">
      <br />
      <input type="submit" name="submit" value="Search">
      </form><br />
        <form action="results.php" method="get">
        City Name:<br />
        <input name="searchterm_city" type="text" size="40"><br />
        <select name="select_state">
        <option value="">None
        <option value="AL" Selected>Alabama
        <option value="AK">Alaska
        <option value="AZ">Arizona
                    </SELECT>
        <input type="submit" name="submit" value="Search">
      </form> 
```

ED：使用表单方法“post”会导致浏览器在我每次点击返回按钮进入结果页面时抛出警告。我更改为“获取”，因为该信息不敏感，现在它会在没有警告的情况下返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:57:51.453

设置`maxlength`属性：

```
document.getElementById('field').maxlength = 2; 
```

我现在意识到其余的代码不太可能工作：

```
function changeValue(dropdown) {
    var option = dropdown.options[dropdown.selectedIndex].value,
    field = document.getElementById('field');

    if (option == 'name' || option == 'city') {
        field.maxLength = 40;
    } else if (option == 'state') {
        field.value = field.value.substr(0, 2); // before reducing the maxlength, make sure it contains at most two characters; you could also reset the value altogether
        field.maxLength = 2;
    }
}​ 
```

然后在您的 HTML 中：

```
<select id="searchtype" name="searchtype" onchange="changeValue(this);"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:02:16.773

试试这个

```
function changeValue() {
    var option2 = document.getElementById('searchtype').options[document.getElementById('searchtype').selectedIndex].id;
    if (option2 == ("A") || option2 == ("B")) {
        document.getElementById('field').size = "40";
    }
    else if (option2 == "C") {
        document.getElementById('field').size = "2";
    }
}​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T05:05:37.013

试试这个。

```
document.getElementById('field').setAttribute('size', "10"); 
```

# silverlight - 无法更改 WP7 中用户控件的背景图像

> ID：10793232
> 
> 赞同：0
> 
> 时间：2012-05-29T04:53:14.553
> 
> 标签：silverlight, windows-phone-7, grid

我正在开发一个 Windows Phone 应用程序。我是 WP7 应用程序开发的新手。在我的应用程序中，我使用的是用户控件，并且通过代码中显示的以下过程更改了它的背景图像。但是背景图像没有改变。谁能帮我 ？这是我的代码片段：

```
<Grid>
    <Image Source="\assests\backgroungimages\appBackground2.jpg" Stretch="UniformToFill"/>
    <StackPanel x:Name="LayoutRoot"  Width="480" Height="306" Background="Black">
        <TextBlock x:Name="ApplicationTitle" Text="Sign In" Style="{StaticResource PhoneTextNormalStyle}" Foreground="#CBF7FA" FontSize="30"/>
        <toolkit:PhoneTextBox Hint="UserName" Name="txtUsername" Width="auto" HintStyle="{StaticResource HintCustomStyle}"></toolkit:PhoneTextBox>
        <toolkit:PhoneTextBox Hint="Password" Name="txtPassword" Width="auto" HintStyle="{StaticResource HintCustomStyle}"></toolkit:PhoneTextBox>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Button Content="Sign In" Name="btnSignIn" Width="auto" Grid.Column="0" Grid.Row="0">
                <Button.Background>
                    <ImageBrush ImageSource="\assests\backgroungimages\btnImage.jpg" Stretch="UniformToFill"></ImageBrush>
                </Button.Background>
            </Button>
            <Button Content="Cancel" Name="btnCancel" Width="auto" Grid.Column="1" Grid.Row="0">
                <Button.Background>
                    <ImageBrush ImageSource="\assests\backgroungimages\btnImage.jpg" Stretch="UniformToFill"></ImageBrush>
                </Button.Background>
            </Button>
        </Grid>
    </StackPanel>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:52:48.170

```
Set grid background to  

<Grid.Background>
   <ImageBrush ImageSource="\assests\backgroungimages\appBackground2.jpg"/>
</Grid.Background> 
```

# ruby - 测试回文

> ID：10793234
> 
> 赞同：2
> 
> 时间：2012-05-29T04:53:29.503
> 
> 标签：ruby, testing, palindrome

我正在尝试在 Ruby 中创建一个函数来判断字符串是否为回文。我已经检查了以前的示例，但是我找不到通过在我的代码上运行的测试的解决方案。作业从这段代码开始。

```
def palindrome?(string)
  # your code here
end 
```

这就是我所做的。

```
class String
  def palindrome?(string)
    y = string.downcase.scan(/\w/)
    if y == y.reverse
      puts "Palindrome"
    else
      puts "Not a palindrome"
    end
  end
end 
```

这是针对它的测试结果。

```
Failure/Error: palindrome?("A man, a plan, a canal -- Panama").should be_true
NoMethodError:
undefined method `palindrome?' for 
#<RSpec::Core::ExampleGroup::Nested_1:0x00000002c5e368>
 # ./spec.rb:3:in `block (2 levels) in <top (required)>'
 # ./lib/rspec_runner.rb:36:in `block in run_rspec'
 # ./lib/rspec_runner.rb:32:in `run_rspec'
 # ./lib/rspec_runner.rb:23:in `run'
 # lib/graders/weighted_rspec_grader.rb:6:in `grade!'
  # ./grade:32:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T04:58:43.223

您正在调用`palindrome?`它，就好像它是当前规范对象上的一个方法一样，但是您已经对其进行了猴子补丁以在 String 上定义。除了您*还*定义了采用字符串参数的方法。

如所写，您需要编写：

```
str = "A man, a plan, a canal -- Panama"
str.palindrome?(str).should be_true 
```

…除了你也没有`true`从你的方法返回，你只是`puts`一个字符串。（并且`puts`总是返回`nil`，所以你写的方法总是返回`nil`结果，无论是否匹配。）

您可以将代码和测试更改为字符串上的正确方法：

```
class String
  def palindrome?
    letters = self.downcase.scan(/\w/)
    letters == letters.reverse
  end
end    
"A man, a plan, a canal -- Panama".palindrome?.should be_true 
```

…或者你将不得不使它成为一个适当的“全局”方法：

```
def palindrome?(str)
  letters = str.downcase.scan(/\w/)
  letters == letters.reverse
end
palindrome?("A man, a plan, a canal -- Panama").should be_true 
```

*请注意，您使用`\w`which 将匹配字母、数字和下划线；你确定这是你想要的吗？*

# spring - 在 Spring MVC 中获取绝对 URL

> ID：10793238
> 
> 赞同：1
> 
> 时间：2012-05-29T04:53:50.650
> 
> 标签：spring, jsp, spring-mvc

在 JSP 页面中，我需要在页面上有一个绝对 URL，以便与 twitter 进行一些集成。

这就是我所拥有的

```
<spring:url value="/blog/article1" var="articleUrl" />
<spring:url value="https://twitter.com/share" var="twitter" >
  <spring:param name="url" value="${articleUrl}"/>
</spring:url>
<a href="${twitter}">Tweet</a> 
```

我的问题是它生成：

```
<a href="https://twitter.com/share?url=/myWebSite/blog/article1">Tweet</a> 
```

当然，twitter 不喜欢相对 URL ......有没有一种简单的方法来获得绝对 URL（使用 spring:url 或 c:url 或其他......）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:55:19.227

尝试更多地探索标签中的**上下文**属性。`<spring:url/>`我想这对你会有帮助。

希望这对您有所帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:39:50.420

[我在StackOverflow](https://stackoverflow.com/questions/5704712/get-absolute-url-with-el)上找到了我的回复：

```
<c:set var="baseURL" value="${fn:replace(pageContext.request.requestURL, pageContext.request.requestURI, pageContext.request.contextPath)}" /> 
```

# windows-phone-7 - wp7中的缩放和滚动图像

> ID：10793239
> 
> 赞同：2
> 
> 时间：2012-05-29T04:53:51.200
> 
> 标签：windows-phone-7

提前致谢..

在我的 WP7 应用程序中，我使用了以下代码来缩放图像。

```
<Image Name="imgThumbnail" Width="480" Height="740" VerticalAlignment="Center" HorizontalAlignment="Center" RenderTransformOrigin="0.5, 0.5" CacheMode="BitmapCache">
    <Image.RenderTransform>
        <CompositeTransform x:Name="transform" />
    </Image.RenderTransform>
    <toolkit:GestureService.GestureListener>
        <toolkit:GestureListener PinchDelta="OnPinchDelta" PinchStarted="OnPinchStarted" />
    </toolkit:GestureService.GestureListener>
</Image>

private void OnPinchStarted(object sender, PinchStartedGestureEventArgs e)
{
    var image = sender as System.Windows.Controls.Image;
    if (image == null) return;
    var transform = image.RenderTransform as CompositeTransform;
    if (transform == null) return;
    initialScale = transform.ScaleX;
}
private void OnPinchDelta(object sender, PinchGestureEventArgs e)
{
    var image = sender as System.Windows.Controls.Image;
    if (image == null) return;
    var transform = image.RenderTransform as CompositeTransform;
    if (transform == null) return;
    transform.ScaleX = initialScale * e.DistanceRatio;
    transform.ScaleY = initialScale * e.DistanceRatio;
} 
```

缩放工作正常，但我无法滚动图像。添加滚动查看器时，缩放不起作用。有什么问题，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:38:03.437

尝试使用 Laurent Bugnion 的这个库对图像进行捏合和缩放：[https](https://multitouch.codeplex.com/) ://multitouch.codeplex.com/ - 它处理“真正的”捏合和缩放行为所需的计算。

代码将类似于：

```
<Image CacheMode="BitmapCache" Name="imgThumbnail"  Margin="0,0,0,80" Source="test.jpg">
        <i:Interaction.Behaviors>
            <behaviors:MultiTouchBehavior IsDebugModeActive="False"
                                   AreFingersVisible="True"
                                   IsMockActive="True"                                       
                                   MaximumScale="3"
                                   MinimumScale="0.8"
                                   IsScaleEnabled="True"
                                   IsRotateEnabled="False"
                                   IsTranslateXEnabled="True"
                                   IsTranslateYEnabled="True"/>
        </i:Interaction.Behaviors>
    </Image> 
```

如果您确实想尝试自己实现此功能，我建议您阅读 Francesco De Vittori 的这篇文章（[http://www.frenk.com/2011/03/windows-phone-7-correct-pinch-zoom-in-银光/](http://www.frenk.com/2011/03/windows-phone-7-correct-pinch-zoom-in-silverlight/)）。

# java - oracle.sql.BLOB.DURATION_CALL 与 oracle.sql.BLOB.DURATION_SESSION 之间的区别

> ID：10793240
> 
> 赞同：5
> 
> 时间：2012-05-29T04:53:51.607
> 
> 标签：java, oracle, jdbc, oracle10g, ojdbc

oracle.sql.BLOB.DURATION_CALL 与 oracle.sql.BLOB.DURATION_SESSION

两者有什么区别？

> 它用于通过调用 BLOB.createTemporary(connection, true, flag) 创建临时 LOB。

我有以下情况：

> 所有连接都被汇集并且在关闭之前永远不会释放。我希望临时 LOB 仅在执行preparedStatement 时才存在（即插入。插入后，我不需要 lob）。我应该使用哪个标志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T18:19:37.307

我的猜测是`DURATION_SESSION`在这种情况下更合适。

一些链接：

[http://docs.oracle.com/cd/B12037_01/java.101/b10979/oralob.htm#i1060097](http://docs.oracle.com/cd/B12037_01/java.101/b10979/oralob.htm#i1060097)

[http://download.oracle.com/otn_hosted_doc/jdeveloper/905/jdbc-javadoc/constant-values.html#oracle.sql.BLOB.DURATION_CALL](http://download.oracle.com/otn_hosted_doc/jdeveloper/905/jdbc-javadoc/constant-values.html#oracle.sql.BLOB.DURATION_CALL)

[http://docs.oracle.com/cd/B10501_01/appdev.920/a96591/adl11tmp.htm](http://docs.oracle.com/cd/B10501_01/appdev.920/a96591/adl11tmp.htm)

# swt - libjingle 编译错误

> ID：10793241
> 
> 赞同：3
> 
> 时间：2012-05-29T04:53:56.083
> 
> 标签：swt, scons, libjingle

编译 libjingle 时，在 swtoolkit 上运行“hammer.sh”时，出现以下导入错误，

```
root@den-pc:~/tejesh/libjingle-0.6.14/talk# sh ../../swtoolkit/hammer.sh
Traceback (most recent call last):
File "../../swtoolkit/wrapper.py", line 44, in <module>
import SCons.Script
ImportError: No module named SCons.Script 
```

那么我该如何解决这个导入错误......有什么建议吗？

我已经为 scons (SCONS_DIR) 设置了环境变量并安装了所有库..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:16:23.647

如果您正确安装了 SCons，那么这听起来像是 python 无法找到它的问题。除了 SCONS_DIR 环境变量，尝试在 PYTHONPATH 环境变量中包含 SCons 位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-15T05:29:54.907

当您安装 scons 时，在 README 文件中，您可以使用：

```
 # python setup.py install --standalone-lib 
```

这可以使 scons 模块进入 pythonpath。

# c# - c# 分配引用

> ID：10793243
> 
> 赞同：2
> 
> 时间：2012-05-29T04:54:32.323
> 
> 标签：c#, initialization, assign

我对`Lab`for有疑问`class`，问题是我不确定如何分配我的参考。

这是我的**代码：**

```
class Bank
{
    static List<Account> accounts = new List<Account>();
    static Account active_account; // this will be an active 
    // Account (reference) retrieved from 
    // the bank. This will need to initialised either by 
    // CreateAccount or by RetrieveAccount.

    static void Main()
    {
        bool running = true, valid_option = false;
        int user_option = 0, account_num = 0, account_pin = 0;
        string name = "", type = "";
        decimal balance = 0, credit = 0;
        Bank chosen = new Bank();

        Console.Write("account number:");
                    account_num = SafeReadInteger(0);
                    Console.Write("pin number:");
                    account_pin = SafeReadInteger(0);
                    Console.Write("Client name:");
                    name = Console.ReadLine();
                    Console.Write("Balance:");
                    balance = SafeReadDecimal(0);
                    Console.Write("type:");
                    type = Console.ReadLine();
                    Console.Write("Credit:");
                    credit = SafeReadDecimal(0);
        chosen.CreateAccount(account_num, account_pin, name, balance, type);
    }
} 
```

评论来自讲师，

现在向下滚动到我的构造函数，

```
public Account CreateAccount(int ac_num_, int pin_, string owner_, decimal balance_, string type)
{
    Account newAcc = null;

    newAcc = new Account(ac_num_, pin_, owner_, balance_, type); // first uses the         constructor to create an account
    accounts.Add(newAcc); // second it inserts the account in the list and return the       reference to the account
    // depending on the type of account, a credit limit is set
    active_account = new Account(ac_num_, pin_);
    return newAcc;
} 
```

我的问题是我在哪里初始化`active_account`以及我将它分配给什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T04:58:50.813

您的 CreateAccount 方法不是构造函数。这是一种工厂方法。它是这样工作的：

```
active_account = chosen.CreateAccount(
    account_num, account_pin, name, balance, type);

active_account.DoStuff(); 
```

您的 Bank 实例有一个名为 CreateAccount 的工厂方法，它返回 Account 类的初始化实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:03:40.327

查看提供的代码，active_account 用于保存刚刚创建的当前活动帐户，或者当有人登录时。

它正在您发布的 CreateAccount() 函数中进行初始化。同样，您的 RetrieveAccount() 函数将调用数据库并将 active_account 分配给一个新的 Account 对象。

# iphone - 将其他项目中的类复制到 XCOde 4 项目中会出错

> ID：10793248
> 
> 赞同：1
> 
> 时间：2012-05-29T04:55:19.207
> 
> 标签：iphone, xcode, xcode4

我从其他项目中获取 InfoViewControlelr.h .m .xib 文件，添加到我在 xcode 4 中拥有的现有项目中，但是当我构建项目时，它给出了以下错误

```
 Undefined symbols for architecture i386:
   "_OBJC_CLASS_$_InfoViewController", referenced from: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:14:24.233

您必须通知编译器来编译您`InfoViewController`添加的内容。您可以按以下方式执行此操作。请转到 Project 的 TARGET 并选择 Build Phases 选项卡。并将您的添加`InfoViewController.m`到编译源部分。

最后你可以重建你的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:16:57.187

这可能是由于在导入文件时忽略选择“添加到目标”，或者由于您正在导入的框架与实际导入到项目中的框架之间的差异造成的。

# windows - 无法在“InstallscriptMSI”类型项目中设置/获取 INSTALLDIR 属性

> ID：10793251
> 
> 赞同：0
> 
> 时间：2012-05-29T04:55:52.173
> 
> 标签：windows, installshield

尝试使用 MsiSetProperty/MsiGetProperty 方法设置/获取 INSTALLDIR 属性。但它在 InstallscriptMSI projects 的情况下不起作用。我在这里想念什么？

在另一个论坛中发现，Installshield 属性在某些情况下访问受限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:03:16.360

**笔记：**

MsiGetProperty 和 MsiSetProperty 属性不能用于延迟的 InstallScript 自定义操作，这些操作无权访问活动的 .msi 数据库并且无法识别任何 Windows Installer 属性。他们只能访问已写入执行脚本的信息。

**例子：**

```
// Include header file for built-in functions 

#include "isrt.h" 

// Include header file for MSI API functions and constants 

#include "iswi.h"
export prototype Func1(HWND);
function Func1(hMSI)
STRING svName;
NUMBER nvSize, nResponse; 

begin 

// Retrieve the user's name from the MSI database 

nvSize = 256; 

MsiGetProperty (hMSI, "USERNAME", svName, nvSize); 

nResponse = AskYesNo ("Your name will be registered as " + 

                     svName + ". Is this correct?", YES); 

if nResponse = NO then 

    AskText ("Enter the name that will be registered for " + 

             "this product.", svName, svName); 

    MsiSetProperty(hMSI, "USERNAME", svName); 

endif; 

end; 
```

# ember.js - JS-Ember：无法通知我的“类”级观察员

> ID：10793252
> 
> 赞同：0
> 
> 时间：2012-05-29T04:55:53.010
> 
> 标签：ember.js

我有以下情况：

```
 ...
    SN.BaseService = Ember.Object.extend({

        action : null,

        send: function(action) {
            this.set('action', action);
        }
    });
    ...
    SN.userService = SN.BaseService.create({

        login: function() {
              if (some_condition) {
                  this.send("onSuccessfulLogin");
              } else {
                  this.send("onFailedLogin");
              }
        }

    });

    ...

    SN.BaseService.reopen({
          onAction: function() {
              doSomething();
          }.observes('action')
    });

    SN.BaseService.reopen({
          actionChanged: Ember.observer(function() {
              doSomething();
          }, 'action')
    }); 
```

我的观察者（无论我设置它们的方式如何 - 都显示在这里）永远不会被调用，即 doSomething() 永远不会被调用。

对象级别的观察者工作正常。只有当我试图让它们处于“课堂”水平时。非常欢迎反馈。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:24:51.990

问题是您在实例化对象后重新打开了一个类。看起来重新打开课程不会更新每个实例。

如果我没记错的话，你可以：

*   在实例化 userService 之前重新打开类（参见这个[jsfiddle](http://jsfiddle.net/yTc2k/)）

    ```
    App.BaseService.reopen({
      onAction: function() {
         this.doSomething();
      }.observes('action')
    });

    App.BaseService.reopen({
      actionChanged: Ember.observer(function() {
         this.doSomething();
      }, 'action')
    }); 
    ```

*   直接重新打开 userService （参见这个[jsfiddle](http://jsfiddle.net/7rJ9u/)）。

    ```
    App.userService.reopen({
      onAction: function() {
        this.doSomething();
      }.observes('action')
    });

    App.userService.reopen({
      actionChanged: Ember.observer(function() {
        this.doSomething();
      }, 'action')
    }); 
    ```

可能有一些更好的解决方案，但我不知道。

# c# - 嵌入式 Mono：如何在不同线程上使用“mono_runtime_invoke”

> ID：10793256
> 
> 赞同：1
> 
> 时间：2012-05-29T04:56:06.490
> 
> 标签：c#, .net, mono, invoke, mono-embedding

嗨，我正在使用带有 NaCl 的 Embedded Mono。到目前为止一切正常，但不知道如何从 c 调用 .NET 方法，这与执行 .NET exe 不在同一个线程上。

这是我尝试使用的方法：

```
void Mono_InvokeMethod(const char* assemblyName, const char* method, const char* arg)
{
    MonoAssemblyName* man = mono_assembly_name_new(assemblyName);
    assert(man);
    MonoAssembly* ma = mono_assembly_loaded(man);
    assert(ma);
    MonoImage* mi = mono_assembly_get_image(ma);
    assert(mi);
    MonoMethodDesc* mmd = mono_method_desc_new(method, "Second.Program" /* include_namespace */);
    assert(mmd);
    MonoMethod* mm = mono_method_desc_search_in_image(mmd, mi);
    assert(mm);
    void *args[1];
    args[0] = mono_string_new(mono_get_domain(), arg);//mono_get_root_domain() <<<<<<< Maybe use this instead

    mono_runtime_invoke(mm, NULL /* "this" object */, args, NULL /* exception */);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:17:03.370

您必须自己启动新线程，然后调用`mono_thread_attach`before `mono_runtime_invoke`。这就是它的样子，假设`thread_callback`在一个单独的线程上调用：

```
void thread_callback (MonoMethod *method, void **args)
{
    mono_thread_attach (mono_get_root_domain ());
    mono_runtime_invoke (method, NULL, args, NULL);
} 
```

您可以`mono_thread_attach`根据需要多次调用，不必跟踪是否为特定线程调用了它。

# html - 超链接在 http 和 https 模式下的行为不同

> ID：10793258
> 
> 赞同：0
> 
> 时间：2012-05-29T04:56:25.417
> 
> 标签：html, href

我有一个jsp页面。因为我有多个链接。在 http 模式下，如果单击任何链接，则会在同一窗口中打开目标页面。

但在 https 模式下，如果单击任何链接，则会在新窗口中打开目标页面。在 https 模式下如何在同一窗口中打开目标页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:01:26.383

我相信 html 目标属性有自己的选项来打开链接..

```
<a target="_blank|_self|_parent|_top|framename"> 

<a herf="" target="_parent">LINK</a> 
```

应该在同一个父窗口中打开链接，而不是弹出新窗口。

# python - 如何使 SCons 不在 zip 文件中包含基本目录？

> ID：10793259
> 
> 赞同：3
> 
> 时间：2012-05-29T04:56:43.340
> 
> 标签：python, zip, scons

SCons 提供了一个 Zip 构建器来从文件组生成 zip 文件。例如，假设我们有一个`foo`如下所示的文件夹：

```
foo/
foo/blah.txt 
```

`foo.zip`我们从一个文件夹创建 zip 文件`foo`：

```
env.Zip('foo.zip', 'foo/') 
```

这会生成一个 zip 文件：

```
$ unzip -l foo.zip
Archive:  foo.zip
  foo/
  foo/foo.txt 
```

然而，假设我们使用了一个`VariantDir`包含 foo 的 of bar：

```
bar/
bar/foo/
bar/foo/foo.txt 
```

因为我们在 a 中`VariantDir`，所以我们仍然使用相同的命令来创建 zip 文件，尽管它的效果略有不同：

```
env.Zip('foo.zip', 'foo/') 
```

这会生成 zip 文件：

```
$ unzip -l bar/foo.zip
Archive:  bar/foo.zip
  bar/foo/
  bar/foo/foo.txt 
```

问题是 zip 中每个文件的额外`bar/`前缀。如果这不是 SCons，简单的解决方案是 cd 进入`bar`并从那里调用 zip 之类的东西`cd bar; zip -r foo.zip foo/`。然而，这对于 SCons 来说很奇怪/困难，而且无论如何看起来非常不像 SCons。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T04:56:43.480

您可以创建一个 SCons Builder 来完成此任务。我们可以使用标准的 Python zipfile 来制作 zip 文件。我们利用`zipfile.write`，它允许我们指定要添加的文件，以及在 zip 中应该调用的文件：

```
zf.write('foo/bar', 'bar') # save foo/bar as bar 
```

为了获得正确的路径，我们使用`os.path.relpath`基础文件的路径来查找整个文件的路径。

最后，我们使用`os.walk`遍历要添加的目录的内容，并调用前面的两个函数将它们正确地添加到最终的 zip 中。

```
import os.path
import zipfile

def zipbetter(target, source, env):
    # Open the zip file with appending, so multiple calls will add more files
    zf = zipfile.ZipFile(str(target[0]), 'a', zipfile.ZIP_DEFLATED)
    for s in source:
        # Find the path of the base file
        basedir = os.path.dirname(str(s))
        if s.isdir():
            # If the source is a directory, walk through its files
            for dirpath, dirnames, filenames in os.walk(str(s)):
                for fname in filenames:
                    path = os.path.join(dirpath, fname)
                    if os.path.isfile(path):
                        # If this is a file, write it with its relative path
                        zf.write(path, os.path.relpath(path, basedir))
        else:
            # Otherwise, just write it to the file
            flatname = os.path.basename(str(s))
            zf.write(str(s), flatname)
    zf.close()

# Make a builder using the zipbetter function, that takes SCons files
zipbetter_bld = Builder(action = zipbetter,
                        target_factory = SCons.Node.FS.default_fs.Entry,
                        source_factory = SCons.Node.FS.default_fs.Entry)

# Add the builder to the environment
env.Append(BUILDERS = {'ZipBetter' : zipbetter_bld}) 
```

像普通的 SCons 一样调用它`Zip`：

```
env.ZipBetter('foo.zip', 'foo/') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T05:27:42.437

对于 SCons，目录确实是一个挑战。假设文件在“项目中”，有几种不同的方法可以指定要包含在 Zip() 文件中的文件目录，如下所示：

1.  相对于根项目目录，在路径前加上“#”。这个选项将包括完整的目录，就像你提到的
2.  相对于特定的 SConscript 文件。要么指定同一目录中的文件，要么指定相对于 SConscript 的子目录。

听起来你想要第二个选项。在您的情况下，您是否在要压缩的同一目录中有一个 SConscript 文件`foo`？这甚至适用于 variant_dir。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-15T05:45:42.147

使用构造变量'ZIPROOT'</p>

# java - java swing关于动态面板

> ID：10793262
> 
> 赞同：1
> 
> 时间：2012-05-29T04:56:47.273
> 
> 标签：java, swing, jpanel

结构如下：

我有一个框架和两个按钮 - btnA，btnB

当我按下 btnA 时，createPanel() 函数将返回一个要显示在框架中的 panelA，

btnB也是如此。

btnA 和 btnB 可以切换。

在将面板添加到框架之前，我使用 clearPanel() 函数来清除框架中的现有面板。

但问题是当我调整面板大小或单击面板时，我可以看到之前应该删除的面板。

我有什么丢的吗？

```
public void actionPerformed(ActionEvent e) {
    String buttonString = e.getActionCommand();
    if (buttonString.equals("A")) {
        clearPanel();

        A = new APanel();
        this.getContentPane().add(A.createPanel(), BorderLayout.CENTER);
        this.pack();

        componentMap.put("A", A);
        btnB.setEnabled(true);
        btnA.setEnabled(false);
    }
    else if (buttonString.equals("B")) {
        clearPanel();

        chart = new BPanel();
        this.getContentPane().add(B.createPanel(), BorderLayout.CENTER);
        this.pack();

        componentMap.put("B", B);
        btnA.setEnabled(true);
        btnB.setEnabled(false);
    }
}

private void clearPanel() {
    if (!componentMap.isEmpty()) {  // I store panels in a HashMap
        for (Object o: componentMap.values()) {
            this.getContentPane().remove((JPanel)o);
        }
        this.getContentPane().invalidate();
        componentMap.clear();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:18:59.720

您正在向contentPane添加`A.createPanel()`和，但您将和存储在您的 componentMap 中。因此，当您调用 时，您是在和/或不在内容窗格中执行此操作，因此您不会删除任何内容。`B.createPanel()``A``B``this.getContentPane().remove((JPanel)o);``A``B`

如果要清除内容窗格，可以使用更简单/更安全的方法：

```
this.getContentPane().removeAll(); 
```

# c# - 使用Sharp ssh 复制.zip 文件

> ID：10793267
> 
> 赞同：0
> 
> 时间：2012-05-29T04:58:16.330
> 
> 标签：c#, ssh

我在使用 C# 将 Zip 文件从 linux 机器复制到 Windows 机器时遇到问题。
这是我的：

1) 使用 sftp.getFiles(sourcepath) 获取文件名。
文件名=item.to string();
源路径=源路径+文件名；
sftp.Get（源路径，目标）；它适用于单个文件，将由 sftp.getfile() 枚举；
但是，当我对文件夹进行 Zip 压缩并尝试使用 sftp.Get(sourcepath,destination) 复制该 .Zip 文件时，
它不起作用，
使用源路径检查它是正确的，并且检查了它具有所有权限的 ZIp 文件的权限。
请让我知道我们该如何克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:00:21.793

尝试使用下面的库。

[http://sshnet.codeplex.com/](http://sshnet.codeplex.com/)

这是一个非常丰富的库，与Sharp ssh 相比，它支持更多的功能。

# python - Django & AJAX 改变 div 内容

> ID：10793272
> 
> 赞同：0
> 
> 时间：2012-05-29T04:59:01.593
> 
> 标签：python, ajax, django, web-applications

我的网站有部分的子菜单。我想要做的是，当用户单击子菜单时，内容会相应更改。例如，如果用户点击“Pen”，则内容为笔列表，点击“Eraser”，内容为橡皮擦列表。

如何通过使用 Django 模板和 ajax 来实现这一点？我知道我可以将信息作为 JSON 数据检索并解析它以更新 div，但这需要大量工作并且我无法使用 Django 模板功能。

我设法将 AJAX 请求传递给服务器并处理列表，但是如何将呈现的模板作为 AJAX 结果返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:44:23.203

只需返回渲染的模板片段。你不需要做任何特别的事情。然后，您的 Javascript 可以在相关点将其插入 DOM。

# c# - 注册回调 （行动 func) ，我如何将这个函数指针存储在一个类中？

> ID：10793275
> 
> 赞同：1
> 
> 时间：2012-05-29T04:59:07.873
> 
> 标签：c#, generics, delegates, action, func

我正在尝试公开这样的 API，我执行以下操作

```
RegisterCallback<T>(Action<T> func)
{
    someObj.FuncPointer = func;
} 
```

稍后，我调用 func(obj) .. 并且 obj 是用户所说的 T 类型。

更具体的例子：

```
var callbackRegistrar = new CBRegistrar();
callbackRegistrar.RegisterCallback<ISomeClass>(SomeFunc);

public static void SomeFunc(ISomeClass data)
{
    //
} 
```

**编辑**：所以我可能不清楚，所以我将添加更多代码：

我只想制作 CBRegistrar 的“一个”对象，并将其与许多回调连接，如下所示：

```
var callbackRegistrar = new CBRegistrar();
callbackRegistrar.RegisterCallback<ISomeClass>(SomeFunc);
callbackRegistrar.RegisterCallback<ISomeOtherClass>(SomeFunc2);
... 
```

事实上，上面的代码是通过反映插件目录来调用的。

用户将其放入他们的代码中 -->

```
public static void SomeFunc(ISomeClass data)
{
    //
}

public static void SumFunc2(ISomeOtherClass data)
{
    //
} 
```

在我看来，这似乎是不可能使用泛型等的。看起来我可能需要做的是创建一个名为 IPlugin 或其他东西的接口，并要求用户执行此操作..

```
[PluginIdentifier(typeof(ISomeClass))]
public static void SomeFunc(IPluginData data)
{
    var castedStuff = data as ISomeClass; // ISomeClass inherits from IPluginData
} 
```

似乎要求用户做我们应该照顾的事情，但无论如何......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:21:04.577

回调函数在 C# 中使用不多。它们已被更优雅且更易于使用的[事件所取代。](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)

```
class CBRegistrar
{
    public delegate void ActionRequiredEventHandler(object sender, ISomeClass e); 

    public event ActionRequiredEventHandler ActionRequired;
    void RaiseActionRequiredEvent(ISomeClass parm)
    {
       if ( ActionRequired != null)
       {
           ActionRequired(this, parm);
       }
    }

}

class APIConsumer
{
     var callbackRegistrar = new CBRegistrar();
     public APIConsumer()
     {

               callbackRegistrar.ActionRequired += SomeFunc;

     }
     public void SomeFunc(object sender, ISomeClass data)
     {

     }

} 
```

如果您仍然想使用回调，您可以使用或多或少的函数指针的[委托。](http://msdn.microsoft.com/en-us/library/ms173176%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:21:28.447

您需要将`Action<T> func`其存储在其中。这里需要进行语义检查：如果有人调用`RegisterCallback` *了两次*（使用不同的值），您是要*替换*回调，还是*保留两者*？假设后者，`someObj`可能需要一个`event`（实际上，这整个 API 可以作为一个事件公开），所以 - 在`someObj`类中：

```
public event Action<T> FuncPointer;
private void InvokeCallback(T data) {
    var handler = FuncPointer;
    if(handler != null) handler(data);
} 
```

注意到`RegisterCallback`可以完全替换，仍然保留数据`obj`：

```
public event Action<T> Completed {
    add { obj.FuncPointer += value; }
    remove { obj.FuncPointer -= value; }
} 
```

那么用法是：

```
var callbackRegistrar = new CBRegistrar();
callbackRegistrar.Completed += SomeFunc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:36:04.877

CBRegistrar 需要是通用的（如果可以保留单个回调类型）或者它可以进行一些内部转换（如果需要注册多个回调类型）。

```
public class CBRegistrar<T>
{
    private Action<T> callback;
    private Dictionary<Type, object> callbackMap;

    public CBRegistrar()
    {
        this.callbackMap = new Dictionary<Type, object>();
    }

    public void RegisterCallback(Action<T> func)
    {
        this.callback = func;
    }

    public void RegisterGenericCallback<U>(Action<U> func)
    {
        this.callbackMap[typeof(U)] = func;
    }

    public Action<U> GetCallback<U>()
    {
        return this.callbackMap[typeof(U)] as Action<U>;
    }
}

public interface ISomeClass
{
    string GetName();
}

public class SomeClass : ISomeClass
{
    public string GetName()
    {
        return this.GetType().Name;
    }
}

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            var callbackRegistrar = new CBRegistrar<ISomeClass>();

            callbackRegistrar.RegisterCallback(SomeFunc);
            callbackRegistrar.RegisterGenericCallback<ISomeClass>(SomeFunc);

            var someone = new SomeClass();

            callbackRegistrar.GetCallback<ISomeClass>()(someone);
        }

        public static void SomeFunc(ISomeClass data)
        {
            // Do something
            Console.WriteLine(data.GetName());
        }
    }
} 
```

# c# - 在 timer_elapsed 事件中实现等待例程

> ID：10793278
> 
> 赞同：0
> 
> 时间：2012-05-29T04:59:26.370
> 
> 标签：c#

我有一个轮询计时器来检查进程是否正在运行。我有以下简单的代码：

```
bool alreadyChecked = false; //check if the wait to check the second time is already over

**Timer_elapsed event**

Process sampleProcess[] = Process.GetProcessesByName("notepad");
if(sampleProcess.length > 0)
{
//Process is running
return;
}
else
{
//Process is not running, so do the following

//Wait for some time and check again (set alreadyChecked = true when the wait is over)
if (alreadyChecked){
//Run the process}
else{
//The process has started running while we were waiting
return;}
    } 
```

我无法`waiting code`在事件内部实现，因此它可以等待然后再次触发事件。（即使我们实现了等待时间，Timer_elapsed 事件也会在我们等待时再次被定时器触发。）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:07:52.663

您应该创建一个单独的线程并使用 sleep 方法，使用 BackgroundWorker 是最好的选择。您还可以使用计时器线程。

```
**BackgroundWorker_DoWork event**
int nTrials = 0; // this method will help you pick any number of trials before launching the applicaion
bool isRunning = false;
while((isRunning = Process.GetProcessesByName("notepad") == 0)  || nTrials < 2)
{
    Thread.Sleep(1000); // w8 1 second before queriying the process name
    nTrials++;
} 

if ( isRunning ) RunProcess(); 
```

不要在你的主线程上使用 sleep 方法，否则你的应用程序将停止处理睡眠时间的消息。

# java - java中的通信链路故障

> ID：10793279
> 
> 赞同：0
> 
> 时间：2012-05-29T04:59:33.650
> 
> 标签：java, mysql

当我尝试使用 jdbc 连接 mysql 时，意味着它已成功连接到 localhost。但是我用我的 ip 地址替换了 localhost，这意味着 itz 未连接。

dis 是我的编码：

```
package com.retrieve;
import java.sql.*;

public class retrieve{
     public static void main(String[] args) {
             System.out.println("Getting All Rows from a table!");
             Connection con = null;
             String url = "jdbc:mysql://192.168.1.249:3306/";
             String db = "login";
             String driver = "com.mysql.jdbc.Driver";
             String user = "root";
             String pass = "";
             try{
             Class.forName(driver).newInstance();
             con = DriverManager.getConnection(url+db, user, pass);
             try{
             Statement st = con.createStatement();
             ResultSet res = st.executeQuery("SELECT * FROM  login");
             System.out.println("username: " + "\t" + "password: ");
             while (res.next()) {
                     String s = res.getString("username");
             String s1 = res.getString("password");
             System.out.println(s1 + "\t\t" + s);
             }
             con.close();
             }
             catch (SQLException s){
             System.out.println("SQL code does not execute.");
             }  
             }
             catch (Exception e){
             e.printStackTrace();
             }
             }
           } 
```

错误是：

> 从表中获取所有行！java.sql.SQLException：数据源拒绝建立连接，来自服务器的消息：com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:650) 上的“主机'192.168.1.249'不允许连接到此 MySQL 服务器” ) 在 com.mysql.jdbc.Connection.createNewIO(Connection.java:1808) 在 com.mysql.jdbc.Connection.(Connection.java:452) 在 com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:411 ) 在 java.sql.DriverManager.getConnection(DriverManager.java:582) 在 java.sql.DriverManager.getConnection(DriverManager.java:185) 在 com.retrieve.retrieve.main(retrieve.java:15)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T10:00:07.970

```
Please check your port .If you changed your port number ,you got this error like 
```

“com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链路故障”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:01:30.100

使用您的 MySQL 服务器，您需要为您的用户添加权限，以便能够从指定的 IP 访问您的数据库

从 mysql 控制台执行以下查询

```
GRANT ALL ON YOUR_DB.* TO 'root'@'192.168.1.249'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:01:52.507

在您的 mysql 服务器上创建用户 'login'@'192.168.1.249'。

mysql 从“名称”（此处-您指定的登录名）和“主机”（用户连接到服务器的地址）构建用户。您可以使用“%”字符来描述“所有主机”。

考虑阅读这部分文档：

[http://dev.mysql.com/doc/refman/5.1/en/user-account-management.html](http://dev.mysql.com/doc/refman/5.1/en/user-account-management.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T05:03:47.410

尝试关闭所有资源，如`Statment`，`ResultSet`对象等。此外，正如@Jigar 提到的，也向用户授予权限。

# iphone - iTunes connect 如何删除处于等待审核状态的产品

> ID：10793280
> 
> 赞同：0
> 
> 时间：2012-05-29T04:59:45.150
> 
> 标签：iphone, in-app-purchase, itunes

我已经在 iTunes 上创建了一个应用程序连接的应用程序购买，我在创建通用产品 ID 时犯了一个错误，因为产品 ID 应该与您的应用程序的捆绑包 ID 绑定，我通过阅读该帖子了解了这件事

[如何为应用内购买创建产品 ID](https://stackoverflow.com/questions/1756738/how-to-create-a-product-id-for-in-app-purchases)

我知道我无法编辑产品 ID。所以我正在尝试一个一个地删除产品然后想创建新的产品，但是没有删除产品的按钮，我的应用处于开发者拒绝状态，我的产品处于等待审核状态，请指导我，这该怎么做。问候萨德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:19:29.010

如果我正确理解了您的问题，请按照以下步骤操作。

1.  开发者.apple.com
2.  登入
3.  iTunes 连接
4.  登入
5.  单击管理您的应用程序
6.  选择应用程序并单击它
7.  点击查看详情
8.  单击二进制详细信息
9.  单击拒绝此二进制文件

希望这会帮助你。

# wpf - AvalonDock : 以编程方式取消 DocumentPan 的 DocumentContents

> ID：10793282
> 
> 赞同：3
> 
> 时间：2012-05-29T05:00:01.567
> 
> 标签：wpf, avalondock

嗨，我想知道我是否可以以编程方式取消所有`DocumentContent`s 。`DocumentPan`

有什么建议么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T07:14:22.890

我在这个问题上花了几个小时并找到了以下解决方案。我下载了avalon的源代码并进行了修改。我做了两个修改。DocumentPane 类中的第一个：

```
public void UnDock(DockableContent content)
    {
        DockingManager manager = GetManager();
        Point point = this.PointToScreenDPI(new Point(0, 0));
        manager.Drag(content, point, new Point(0, 0));
        manager.CompleteDragging(point);
    } 
```

第二，我将 CompleteDragging 方法的可见性从私有扩展到内部。

UnDock 的使用非常简单：

```
dockumentPane1.UnDock(dockablePane1.Items[0] as DockableContent); 
```

当然 DocumentPane 应该包含一些 DockableContent，它应该是 DockableContent 而不是 DocumentContent。对我来说似乎工作正常；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-27T13:35:14.350

```
void undockAll(LayoutDocumentPane pane)
{
    while(pane.Children.Count > 0)
       pane.Children[0].Float();
} 
```

# android - 在android中将Context类引用到XML时出错

> ID：10793287
> 
> 赞同：0
> 
> 时间：2012-05-29T05:00:45.943
> 
> 标签：android, layout, inflate

我正在尝试引用将 SurfaceView 扩展到 XML 布局的 Main.class。XML是这样的：

```
<AbsoluteLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
>
    <coba.gesture.Main
        android:id="@+id/LayoDalam"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    />
</AbsoluteLayout> 
```

但是当我运行它时会出错。这是错误：

```
05-29 11:57:05.713: ERROR/AndroidRuntime(806): FATAL EXCEPTION: main
05-29 11:57:05.713: ERROR/AndroidRuntime(806): java.lang.RuntimeException: Unable to start activity ComponentInfo{coba.gesture/coba.gesture.CobaGesture}: android.view.InflateException: Binary XML file line #47: Error inflating class coba.gesture.MainBaby
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1622)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1638)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:928)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.os.Looper.loop(Looper.java:123)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.app.ActivityThread.main(ActivityThread.java:3647)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at java.lang.reflect.Method.invokeNative(Native Method)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at java.lang.reflect.Method.invoke(Method.java:507)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at dalvik.system.NativeStart.main(Native Method)
05-29 11:57:05.713: ERROR/AndroidRuntime(806): Caused by: android.view.InflateException: Binary XML file line #47: Error inflating class coba.gesture.MainBaby
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.view.LayoutInflater.createView(LayoutInflater.java:508)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.app.Activity.setContentView(Activity.java:1657)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at coba.gesture.CobaGesture.onCreate(CobaGesture.java:19)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1586)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     ... 11 more
05-29 11:57:05.713: ERROR/AndroidRuntime(806): Caused by: java.lang.NoSuchMethodException: MainBaby(Context,AttributeSet)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at java.lang.Class.getMatchingConstructor(Class.java:643)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at java.lang.Class.getConstructor(Class.java:472)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     at android.view.LayoutInflater.createView(LayoutInflater.java:480)
05-29 11:57:05.713: ERROR/AndroidRuntime(806):     ... 22 more 
```

我的预测是错误来自 MainBaby.java 但我不知道出了什么问题。

更新。

这是你想要的 MainBaby.java 的源代码。

```
public class MainBaby extends SurfaceView implements SurfaceHolder.Callback {
private static final String TAG = MainBaby.class.getSimpleName();
private ObjBaby obaby;
private ThreadBaby thread;
private static final float TOUCH_TOLERANCE = 4;

static float static_x = 0;
static float static_y = 0;
float mX, mY;
Paint p;
Path mPath;
Canvas mCanvas;
Bitmap mBitmap;
Paint mBitmapPaint;

public MainBaby(Context context){
    super(context);

    // adding the callback (this) to the surface holder to intercept events

    getHolder().addCallback(this);

    obaby = new ObjBaby(BitmapFactory.decodeResource(getResources(), R.drawable.clue_btn), 50, 50);

    // create the game loop thread
    thread = new ThreadBaby(getHolder(), this);

    mPath = new Path();
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    p = new Paint();
     p.setAntiAlias(true);
     p.setDither(true);
     p.setColor(Color.WHITE);
     p.setStyle(Paint.Style.STROKE);
     p.setStrokeJoin(Paint.Join.ROUND);
     p.setStrokeCap(Paint.Cap.ROUND);
     p.setStrokeWidth(12);

    setFocusable(true);

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    thread.setRunning(true);
    thread.start();
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    boolean retry = true;
    while (retry) {
        try {
            thread.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        retry = false;
    }
}

private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    // commit the path to our offscreen
    mCanvas.drawPath(mPath, p);

    // kill this so we don't double draw
    mPath.reset();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    static_x = event.getX();
    static_y = event.getY();

    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        // delegating event handling to the droid
        obaby.handleActionDown((int)event.getX(), (int)event.getY());
        touch_start(static_x, static_y);

        if (event.getY() > getHeight() - 50) {
            thread.setRunning(false);
            ((Activity)getContext()).finish();
        } else {
            //Log.d(TAG, "Coords: x=" + event.getX() + ",y=" + event.getY());
        }
    } if (event.getAction() == MotionEvent.ACTION_MOVE) {
        // the gestures
        if (obaby.isTouched()) {
            // the droid was picked up and is being dragged
            obaby.setX((int)event.getX());
            obaby.setY((int)event.getY());
            touch_move(static_x, static_y);
        }
    } if (event.getAction() == MotionEvent.ACTION_UP) {
        // touch was released
        if (obaby.isTouched()) {
            touch_up();
            obaby.setTouched(false);

        }
    }
    return true;
}

@Override
protected void onDraw(Canvas canvas) {
    // fills the canvas with black
    canvas.drawColor(Color.BLACK);

    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
    canvas.drawPath(mPath, p);
    obaby.draw(canvas);
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    //mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    mBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.background_number);
    mCanvas = new Canvas(mBitmap);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:36:57.867

当您像这样扩展视图类型并在 XML 中创建实例时，Android 会在后台调用`MainBaby(Context context, AttributeSet attrs)`其中 AttributeSet 是您在 XML 中定义的所有内容。但是您只覆盖了`MainBaby(Context context)`，因此要修复此错误，请从这里开始：

```
public MainBaby(Context context){
    super(context);
    ... 
```

并通过尝试以下方法覆盖您的所有基础：

```
public MainBaby(Context context) {
    super(context);
    init();
}

public MainBaby(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public MainBaby(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

private void init() {
    // Original constructor code here
    ... 
```

新方法`init()`应该包含来自您的第一个构造函数的初始化代码。

另外，我可能遗漏了未包含的代码中的某些内容，但您是否要`MainBaby`在此处引用您的视图？

```
<coba.gesture.Main
    android:id="@+id/LayoDalam"
    ... 
```

如果是这样，我认为您的意思是：

```
<coba.gesture.MainBaby
    android:id="@+id/LayoDalam"
    ... 
```

最后，AbsoluteLayout 已被弃用，因为它们不容易跨不同密度的屏幕移植。这来自[开发人员指南](http://developer.android.com/guide/practices/screens_support.html)：

> **3.不要使用AbsoluteLayout**
> 
> 与其他布局小部件不同，AbsoluteLayout 强制使用固定位置来布置其子视图，这很容易导致用户界面在不同的显示器上无法正常工作。因此，AbsoluteLayout 在 Android 1.5（API 级别 3）中已被弃用。
> 
> 您应该改用RelativeLayout，它使用相对定位来布置其子视图。例如，您可以指定按钮小部件应出现在文本小部件的“右侧”。

# c - 这个指针如何同时为空而不为空？

> ID：10793288
> 
> 赞同：1
> 
> 时间：2012-05-29T05:00:50.867
> 
> 标签：c, pointers

我遇到了这个奇怪的问题。基本上我有一个永远循环的循环，在循环开始时我打开一个文件，我向文件中写入一些内容，然后在循环结束时关闭文件。在循环的第一次迭代中工作正常，但在第二次迭代中我得到

```
*** glibc detected *** ./prog: double free or corruption (top): 
```

`fclose(data)`在循环的第二次迭代期间，我已将其缩小到该行。显然，当您多次释放某些内容时会发生此错误，但是在此代码中怎么可能呢？

```
while(1)
{
    if (data == NULL)
    { 
        data = fopen(data_path, "w+");
    }

    /* do a bunch of stuff... */

    if (data != NULL)
    { 
        fclose(data);
    }
} 
```

奇怪的是，如果我在`fclose(data)`程序运行后添加以下行就可以了，没有任何问题：

```
 data = NULL; 
```

比我更精通C的人可以解释一下这里发生了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T05:04:26.380

fclose 不会使文件指针为 NULL。它只是关闭文件。所以在第二次迭代中，文件没有打开，因为数据不是 NULL。

# c# - 如何从页面源中省略某些内容

> ID：10793291
> 
> 赞同：1
> 
> 时间：2012-05-29T05:01:05.027
> 
> 标签：c#, http, httpwebrequest, httpwebresponse

我正在编写一个程序，该程序会自动启动网络浏览器以播放所选歌曲，因此为了做到这一点，我的程序正在使用 httwebrequest/response

*   获取包含音频源页面链接的网页的源代码
*   搜索该网站源代码并找到音频源网站
*   打开指定网页的chrome，就可以听歌了。

我正在使用 project.com 作为我的音频源，并且我不打算使用其他网站，例如 youtube

我遇到的问题是，虽然我在 chrome 中加载初始网站时可以看到指向音频源网站的链接，但页面源不包含它。例如，这个[网站](http://www.playlist.com/searchbeta/tracks?category=Homepage-logged_out&action=ClickSubmitSearch#r%20u%20mine/all/1)有一个指向音频源的链接`http://pl.st/s/1709472017`，你可以在初始网站上实际看到，但是当我使用 chrome 查看页面源时，我找不到这个音频源链接。

如果我右键单击音频源文本框并选择检查元素，那么我可以看到：

```
<input class="copy-song-link" 
   type="textbox" 
   value="http://pl.st/s/1709472017" 
   name="url" 
   onclick="javascript:select();" title="Copy and share this song URL"> 
```

所以这个链接显然位于某处。我的问题是这些

*   为什么/如何这个链接不在源页面中，但是当我通过 chrome 查看网站时我可以看到
*   chrome的“检查元素”怎么能找到这个url，而页面源不包含它。

*   检查元素与查看源代码有何不同？

我对http通信很陌生，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:37:16.863

对于这种情况，我通常使用插件 Firebug for Firefox。它将允许您使用[“Net”选项卡](http://getfirebug.com/wiki/index.php/Net_Panel)来检查页面加载时发生的所有后续请求（通常是 Ajax）。

在您的情况下，似乎 Ajax 请求正在收集用于生成您想要提取的链接的数据。此数据以 JSON 格式显示，JavaScript 可能会在客户端从 JSON 生成链接。看看这个链接 [http://www3.playlist.com/async/searchbeta/tracks?searchfor=r%20u%20mine](http://www3.playlist.com/async/searchbeta/tracks?searchfor=r%20u%20mine)

用于生成链接的 linkid 位于响应的第一部分 ...PPL.search.trackdata = [{"linkid":1709472017...

# windows-phone-7 - WP7 中的解决方案配置下拉列表

> ID：10793293
> 
> 赞同：1
> 
> 时间：2012-05-29T05:01:15.203
> 
> 标签：windows-phone-7

我正在为 Windows Phone 运行 Microsoft Visual Studio 2010 Express。我的问题是我没有得到解决方案配置下拉列表。我尝试了很多但我没有得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:49:57.757

单击工具菜单，单击设置，然后单击专家设置。

解决方案配置列表框出现在标准工具栏中。单击调试或发布。

如果仍然不可见，[请检查此](http://msdn.microsoft.com/en-us/library/ff928362%28v=vs.92%29.aspx)

# mysql - 删除 MySQL 整个数据库。数据库未显示在 MySQL 数据库中

> ID：10793296
> 
> 赞同：0
> 
> 时间：2012-05-29T05:01:21.583
> 
> 标签：mysql, database

每次我使用自定义 joomla 模板快速安装创建数据库时，都会创建数据库，但不会出现在 MySQL 数据库管理中，尽管事实上它确实存在并且 MySQL 数据库管理知道它存在，因为它不会让我创建数据库由于错误“数据库已存在”而使用该名称。

我想删除 joomlasall 数据库。

![http://img99.imageshack.us/img99/4995/tempkh.png](../Images/25e0df0ef89e3f1fc66740ff0867068c.png)

全尺寸图片

[http://img99.imageshack.us/img99/4995/tempkh.png](http://img99.imageshack.us/img99/4995/tempkh.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:18:06.797

如果您看不到数据库但您确定它存在，这绝对是权限问题。

做

```
SHOW GRANTS 
```

更多信息[在这里](http://dev.mysql.com/doc/refman/5.1/en/show-grants.html)

您会看到您没有全局 SELECT 权限。您需要使用类似的命令显式授予权限，例如：

```
GRANT ALL PRIVILEGES ON DBNAME.* TO 'username'@'localhost'; 
```

您可以指定 SELECT、INSERT、UPDATE、DELETE、EXECUTE 等，而不是 ALL...[检查这个](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

将 DBNAME 替换为您的 DB 名称，将用户名替换为您要授予访问权限的用户，如果远程使用 DB，则将 localhost 替换为主机名。

为此，您需要 GRANT 权限或成为 root 用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:24:27.497

对 Joomla DB 连接使用相同的 mysql 用户凭据，这也是您在 phpmyadmin 中使用的用户凭据。

# web-config - Web.Config 转换只是复制 web.*.config 文件

> ID：10793297
> 
> 赞同：0
> 
> 时间：2012-05-29T05:01:25.830
> 
> 标签：web-config, microsoft-web-deploy, config-transformation

我对此很陌生，但它看起来很简单，我想知道它到底为什么不起作用。我创建了一堆区域配置管理器（测试、UAT、产品博士等），然后我右键单击我的 web.config 并添加了配置转换，填写了相关文件。

现在，当我为一个区域构建部署包并将其导入另一台机器时，它只会复制 web.test.config 或任何文件。有谁知道我做错了什么？

帮助？！

乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:39:31.070

对于那些面临这个问题的混蛋，您需要不要复制所有文件并构建 action = content

[Web 转换文件被复制到 root + bin](https://stackoverflow.com/questions/5065218/web-transformation-files-get-copied-to-root-bin)

# asp.net - 如何根据条件突出显示列表视图中的行？

> ID：10793301
> 
> 赞同：0
> 
> 时间：2012-05-29T05:01:42.440
> 
> 标签：asp.net, listview, highlight

我想在特定条件下更改行的背景颜色。我的代码是

```
<asp:ListView ID="lst_SentItems" runat="server" ItemPlaceholderID="tr" OnItemDataBound="lst_SentItems_ItemDataBound">
                                <LayoutTemplate>
                                    <table cellspacing="0">
                                        <tr class="hdrRowColor1">
                                            <td align="left" width="180px">
                                                EmpName
                                            </td>
                                            <td align="left" width="180px">
                                                Salary
                                            </td>
                                            <td align="left" width="180px">
                                                Address
                                            </td>
                                            <td align="left" width="180px">
                                                Department
                                            </td>
                                          </tr>
                                        <tr id="tr" runat="server">
                                        </tr>
                                    </table>
                                </LayoutTemplate>
                                <ItemTemplate>
                                    <tr class='<%# Convert.ToBoolean(Container.DataItemIndex % 2) ? "EvenRowColor" : "OddRowColor" %>'>
                                            <td align="left">
                                                <asp:label id="lbl3" runat="server" text='<%# Eval("EmpName")%>' />

                                            </td>
                                            <td align="left"> 
```

' />

```
 </td>
                                            <td align="left">
                                               <asp:label id="lbl1" runat="server" text='<%# Eval("Address")%>' />

                                            </td>
                                            <td align="left">
                                               <asp:label id="lbl" runat="server" text='<%# Eval("Department")%>' /> 
                                            </td>

                                    </tr>
                                </ItemTemplate>
                            </asp:ListView> 
```

现在我想给特定部门颜色，比如如果人来自帐户部门，那么行的背景颜色应该是红色，如果人属于 IT 部门，那么背景颜色应该是绿色。我已经在 ItemdataBound 中尝试了一些代码，但是该代码仅更改标签的背景。我想更改行背景。该代码是

```
 protected void lst_SentItems_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        Label lblCount = (Label)e.Item.FindControl("lbl");
        if (lblCount != null)
        {
            if (lblCount.Text == IT2")
            {
                           lblCount.BackColor = System.Drawing.Color.Red;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:49:27.630

视觉检查：这只是一个想法，并根据您的要求进行编辑。

```
protected void ListView1_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        ListViewDataItem dataitem = (ListViewDataItem)e.Item;
        int policyid = (int)DataBinder.Eval(dataitem.DataItem, "EmpID");
        if (policyid == 3)
        {
            HtmlTableRow cell = (HtmlTableRow)e.Item.FindControl("MainTableRow");

            cell.Style.Add("background-color", "Red");
        }
    }
} 
```

# android - 使用 webview 快速加载数据？

> ID：10793303
> 
> 赞同：0
> 
> 时间：2012-05-29T05:01:59.507
> 
> 标签：android, android-webview

开发测验应用程序，显示带有选项的问题。

这些问题以*HTML 格式保存*在数据库中。使用 WebView 我正在显示问答。

当我使用 TextView 时，问答会整齐地显示出来。但是当我使用WebView显示问答时，显示问题需要很长时间，同时它会*重复显示选项*。

我的代码：

```
static ArrayList<ArrayList<String>> stringList;
static ArrayList<String> optionlist;

webView = (WebView) findViewById(R.id.question);
webView.getSettings().setJavaScriptEnabled(true);

webView.loadData(listItem.getquestion(), "text/html", "UTF-8");
webView.getSettings().setDefaultFontSize(14);
webView.getSettings().setRenderPriority(RenderPriority.HIGH);
webView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);

RadioGroup radiogroup = (RadioGroup) findViewById(R.id.radiogroup);

LinearLayout.LayoutParams layoutParams = new RadioGroup.LayoutParams(
        RadioGroup.LayoutParams.WRAP_CONTENT,
        RadioGroup.LayoutParams.WRAP_CONTENT);

for (int i = 0; i < stringList.size(); i++) {
    optionlist = new ArrayList<String>();
    optionlist = stringList.get(i);

    RadioButton newRadioButton = new RadioButton(this.getContext());

    newRadioButton.setText(optionlist.get(2));
    newRadioButton.setTextColor(Color.parseColor("#000000"));

    radiogroup.addView(newRadioButton, layoutParams);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:37:00.887

我看不到您向 WebView 添加任何内容的位置（一次或多次），但这里有一些指针可以使您包含的代码运行得更快：

*   使用 for-each 循环，它们更快更容易。
*   删除新的 ArrayList 声明，因为在下一行中，您只需用现有的 ArrayList 覆盖它

像这样：

```
for (ArrayList<String> currentList : stringList) {
    RadioButton newRadioButton = new RadioButton(this.getContext());
    newRadioButton.setText(currentList.get(2));
    newRadioButton.setTextColor(Color.parseColor("#000000"));

    radiogroup.addView(newRadioButton, layoutParams);
} 
```

# c# - C# 数据读取器不检索数据

> ID：10793305
> 
> 赞同：-2
> 
> 时间：2012-05-29T05:02:15.693
> 
> 标签：c#

我正在尝试通过使用`DataReader`依赖于下拉列表选择将数据加载到文本框中。没有从此代码中得到错误，但数据没有加载到文本框中。请纠正我。

```
public void text()
{
    cn1.Open();
    string s;
    s = "select Request_Type from component where Material_Code='" + Mcodeddl.SelectedItem.Text + "' ";

    SqlCommand cd1 = new SqlCommand(s, cn1);
    SqlDataReader rd;

    try
    {
        rd = cd1.ExecuteReader();

        while (rd.Read())
        {
            TextBox4.Text = rd["Request_Type"].ToString().Trim();
        }

        rd.Close();
    }
    catch (Exception e)
    {
        Response.Write(e.Message);
    }
    finally
    {
        cd1.Dispose();
        cn1.Close();
    }
}

public void MC()
{
    Mcodeddl.Items.Clear();
    ListItem li1 = new ListItem();
    li1.Text = "-Select-";
    Mcodeddl.Items.Add(li1);
    Mcodeddl.SelectedIndex = 0;

    cn1.Open();
    string s1;
    s1 = "select Material_Code from component";

    SqlCommand cd1 = new SqlCommand(s1, cn1);
    SqlDataReader dr1;

    try
    {
        dr1 = cd1.ExecuteReader();

        while (dr1.Read())
        {
            ListItem ni1 = new ListItem();
            ni1.Text = dr1["Material_Code"].ToString().Trim();
            Mcodeddl.Items.Add(ni1);
        }

        dr1.Close();
    }
    catch (Exception e)
    {
        Response.Write(e.Message);
    }
    finally
    {
        cd1.Dispose();
        cn1.Close();
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:13:51.593

如果一切正常，无异常，则表示连接建立正确且 SQL 命令正确。我认为你必须确保你的 SQL 语句。也许它什么也不返回，因为没有匹配项。

我们需要更多解释您的问题。

# java - 如何为 edismax 搜索处理程序指定架构中的所有字段

> ID：10793312
> 
> 赞同：0
> 
> 时间：2012-05-29T05:02:37.630
> 
> 标签：java, solr

我在 Solr 中有一个具有此基本定义的搜索处理程序（为简洁起见，省略了一些细节）：

```
<requestHandler name="/select" class="solr.SearchHandler">
    <lst name="defaults">
        <str name="defType">edismax</str>
        <str name="q.alt">*:*</str>
        <str name="qf">??</str>
        ... 
```

我知道我可以在`qf`字符串中编写字段列表，但我想搜索架构中的所有字段，包括动态字段。我试过这个：

```
<str name="qf">*</str> 
```

但它没有用。搜索结果返回为空。有什么方法可以搜索架构中的所有字段而不在`qf`参数中显式枚举它们？

**更新：**我应该提到我不想使用复制字段，因为我想向用户显示与搜索匹配的字段，并显示搜索亮点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:37:56.033

据我所知，动态字段只能通过全名查询

```
qf=myfield_s,myfield1_s 
```

通配符将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:07:12.347

使用复制字段将您要搜索的所有字段复制到单个字段中。
这也应该适用于所有静态和动态字段。
您可以在 qf 参数中指定该单个字段。

但是，您不能在这种方法中改变不同字段的权重和提升。您可以创建多个复制字段并相应地改变提升。

# xpages - 在 Xpage 中使用自定义控件数据源

> ID：10793314
> 
> 赞同：1
> 
> 时间：2012-05-29T05:02:50.240
> 
> 标签：xpages

如何在 XPage 应用程序布局中使用自定义控件数据源（名为 doc）？我需要通过位置栏的基本节点来控制阅读模式和编辑模式。当我将代码`doc.isEditable()`放在渲染属性中时，浏览器中显示以下错误：

```
Error while executing JavaScript computed expression
Script interpreter error, line=1, col=6: [ReferenceError] 'doc' not found 
```

JavaScript 代码

```
doc.isEditable(); 
```

我是 Xpage 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:58:26.367

你能发布一些代码吗？不完全确定你的意思。

通常，定义数据源的最佳位置是在 XPage 的顶部，这样它下面的每个控件都可以访问它。如果您在尝试查询后定义数据源，您将收到类似这样的错误

# django - 任何关于 Django 的优秀视频讲座的建议

> ID：10793315
> 
> 赞同：2
> 
> 时间：2012-05-29T05:02:50.813
> 
> 标签：django

我开始使用 Django。我知道 Django 书很有用（[http://www.djangobook.com/](http://www.djangobook.com/)），但我想先看一些视频讲座开始。有什么好的推荐吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T05:19:01.710

从 Pycon 2012 中脱颖而出：

**[Django 简介](http://pyvideo.org/video/604/introduction-to-django)**

**[深入了解 Django](http://pyvideo.org/video/610/django-in-depth)**

**[Django 表单处理深潜](http://pyvideo.org/video/698/django-form-processing-deep-dive)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:04:25.487

[http://godjango.com/](http://godjango.com/)

> 每一集都专注于可以帮助 django 开发人员更好地进行 django 开发的事情。大多数视频将是简短的，甜蜜的，并且是关于特定主题的。预计大多数开发人员都对 Django 有一定的经验，但任何人通常都能从中受益。

# algorithm - 二叉树的密度

> ID：10793320
> 
> 赞同：2
> 
> 时间：2012-05-29T05:03:31.893
> 
> 标签：algorithm, data-structures, binary-tree

如何找到给定二叉树的密度？我遇到了这个面试问题，不确定他们所说的密度是什么意思！任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:12:34.787

密集二叉树接近完美（它接近于`2^(h + 1) - 1 nodes)`。稀疏树更接近链表（它接近`h`节点）。`h`是树的高度，其中单个根节点的高度为 0。

一个简单的密度测量可以是：

```
(n - h)/(2^(h + 1) - h - 1) 
```

我刚刚制定了这个公式，所以我不知道它是否适合你对面试答案的需求，但它会给你 0 表示退化树和 1 表示完美树。对于密集的树木，它会给你接近 1 的数字，而对于稀疏的树木，它会给你接近 0 的数字。

[维基百科](http://en.wikipedia.org/wiki/Binary_tree)有很多关于二叉树的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:10:51.593

在二叉树中，每个级别的节点数都在一个值范围内。在级别 0，有 1 个节点，即根；在级别 1 可以有 1 或 2 个节点。在任何级别 k，节点的数量都在 1 到 2k 的范围内。每个级别的节点数有助于树的密度。直观地说，密度是相对于树高的树大小（节点数）的度量。

# arrays - 如何在谷歌电子表格中合并范围

> ID：10793321
> 
> 赞同：98
> 
> 时间：2012-05-29T05:03:31.877
> 
> 标签：arrays, google-apps-script, google-sheets, google-sheets-formula

我想合并任何 Google 电子表格中的范围。

## 这个例子

*表 1!A:A*

```
{12, 131, 45} 
```

*表 2!A:A*

```
{12, 131, 46} 
```

*未知功能*

```
=formula_for_union_range(Sheet1!A:A; Sheet2!:A:A) 
```

*应该返回*

```
{12, 131, 45, 12, 131, 46} 
```

## 问题

这怎么可能？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2016-06-06T08:37:13.453

只需使用：

```
={sheet1!a:a; sheet2!a:a} 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2015-05-22T22:59:48.807

您可以将它们合并到 1 列中，然后获取唯一值。**检查以下公式：**

```
=UNIQUE({Sheet1!A:A;Sheet2!A:A}) 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-02-27T14:47:58.420

# Google Apps 脚本

然而问题是关于剧本的。我仍然成功使用以下代码：

```
function unionRanges(e) {
  var result = [];
  var length = 0;
  var i = 0;
  try {
    for (i = 0; i < arguments.length; i++)
      length += arguments[i].length;
    if (length > 3000) return '#BIGRANGE';
    for (var i = 0; i < arguments.length; i++)
      result = result.concat(arguments[i].filter(function (el) {
        return el.join('').length > 0
      }));
    return result;
  } catch (err) {
    return JSON.stringify(err);
  }
} 
```

# 电子表格功能

但是，如上所述，使用`{}`-notation 更容易。

```
={ Sheet1!A1:C10 ; Sheet2!A1:C34 } 
```

垂直串联

```
={ Range(Cols=N) ; Range(Cols=N) } 
```

水平串联

```
={ Range(Rows=M) , Range(Rows=M) } 
```

可以结合

```
={ { , , } ; { , , } } 
```

或者更难的东西

```
={{{;;},{;;}};{{;;},{;;}};{{;;},{;;}}} 
```

尝试这样的事情

```
={
   {{ 1; 2; 3},{ 4; 5; 6}};
   {{ 7; 8; 9},{10;11;12}};
   {{13;14;15},{16;17;18}}
 } 
```

不需要内部水平连接

```
={
    { 1; 2; 3},{ 4; 5; 6};
    { 7; 8; 9},{10;11;12};
    {13;14;15},{16;17;18}
} 
```

## 参数分隔符的语言环境依赖

如果您当前的语言环境支持`,`作为参数分隔符，那么您应该将`;`其用于垂直连接和`,`水平连接。

否则，您的参数分隔符是`;`并且您必须分别使用`;`and `\`（不带空格）。

### 床单`'Data 1'!A1:C20`

```
|   Name  |    Date   | Sum |
| Ethan   |  3/4/2017 |  31 |
| Logan   |  3/6/2017 |  62 |
| Brian   | 3/26/2017 |  61 |
|   ...   |     ...   | ... | 
```

### 床单`'Data 2'!A1:C20`

```
|  Name   |    Date   | Sum |
| Nathan  | 3/30/2017 |  53 |
| Alyssa  | 3/13/2017 |  72 |
| John    | 3/24/2017 |  79 |
| Megan   | 3/16/2017 |  10 |
|   ...   |     ...   | ... | 
```

## 级联

### 垂直串联

```
={'Data 1'!A1:C20;'Data 2'!A2:C20} 
```

#### 结果

```
|  Name  |    Date   | Sum |
| Ethan  |  3/4/2017 |  31 |
| Logan  |  3/6/2017 |  62 |
| Brian  | 3/26/2017 |  61 |
| ...    |       ... | ... |
| Nathan | 3/30/2017 |  53 |
| Alyssa | 3/13/2017 |  72 |
| John   | 3/24/2017 |  79 |
| ...    |       ... | ... | 
```

### 水平串联

```
={TRANSPOSE('Data 1'!A1:C20),TRANSPOSE('Data 2'!A2:C20)} 
```

#### 结果

```
| Name |   Ethan  |   Logan  |   Brian   | ... |   Nathan  |   Alyssa  |    John   |
| Date | 3/4/2017 | 3/6/2017 | 3/26/2017 | ... | 3/30/2017 | 3/13/2017 | 3/24/2017 |
| Sum  |       31 |       62 |        61 | ... |        53 |        72 |        79 | 
```

更多关于[如何连接谷歌电子表格中的范围](https://gist.github.com/contributorpw/70759205b0f28faacfe0def50e7b66dc)

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-05-29T14:24:19.897

虽然脚本可以轻松做到这一点，但我建议使用常规电子表格公式，例如

```
=transpose(split(join(";";Sheet1!A:A)&";"&join(";";Sheet2!A:A);";")) 
```

要删除重复项，只需将其包装在一个`unique`公式中：

```
=unique(transpose(...)) 
```

并排序...`=sort(...)`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-06-06T21:43:42.290

起初，当我尝试时`={Sheet1!A:A; Sheet2!A:A}`，我认为它不起作用，因为我只能从第一张纸上看到结果。原来它也包括所有空白单元格！

要过滤掉空白和空单元格，同时保留重复项（不像`=UNIQUE`）并且不重复自己（不像`=FILTER()`），您可以使用 [`=QUERY()`](https://support.google.com/docs/answer/3093343?hl=en)，如下所示：

```
=QUERY(
  {March!A1:Z; April!A2:Z; May!A2:Z}, 
  "select * where Col1 != '' and Col1 is not null", 
  0) 
```

（请注意，我包括第一张表中的标题行，并从其他表中省略它）。

如果您的工作表不包含带有空文本的单元格，则可以省略`Col1 != '' and`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-09T04:10:24.587

如果要合并工作表并排除包含空单元格的行，请在公式中使用[FILTER函数：](https://support.google.com/docs/answer/3093197)

```
=FILTER({Sheet1!A:A;Sheet2!A:A}, {Sheet1!A:A;Sheet2!A:A}<>"") 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-25T21:49:10.993

假设你有：

```
 A    B   C   D   E   F
1: 1    2   3   4   5   6 
```

可以将切片连接为行或列。

对于其他列（同一行），请使用逗号。`={$A1:$C1,$D1:$F1}`产量：

```
1   2   3   4   5   6 
```

对于其他行（相同列），请使用分号。`={$A1:$C1;$D1:$F1}`产量：

```
1   2   3
4   5   6 
```

# asp.net - Telerik RadComboBox AutomaticLoadOnDemand

> ID：10793323
> 
> 赞同：1
> 
> 时间：2012-05-29T05:03:40.930
> 
> 标签：asp.net, telerik, telerik-combobox

我在我的项目中使用 Telerik RadComboBox。我设置`EnableAutomaticLoadOnDemand="true"`在 RadComboBox 上。它工作得很好，但是当我想在加载时设置所选项目时`page event`，它不显示所选项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:48:00.250

使用按需加载模式，因此组合框没有任何项目。当您对其进行操作时，它只有项目。

在我看来，您应该像这样在页面加载事件中手动获取特定项目并将其添加到组合框（我不确定结构，只是一个想法。）

```
if (!IsPostBack)
{
    var itemSelected = service.GetById(Id); //item Id
    this.combobox.Items.Add(new RadComboboxItem(itemSelected.Id, itemSelected.Name));
    this.combobox.SeletedValue = Id.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:21:01.757

RadCombo 允许设置 SelectedValue 和 Text 属性，即使其中没​​有项目。

# php - php curl - curl_getinfo() 中的长重定向时间

> ID：10793332
> 
> 赞同：1
> 
> 时间：2012-05-29T05:05:12.430
> 
> 标签：php, curl, performance

该代码有效，但加载页面最多需要 10 秒。然后我添加 curl_getinfo()，发现重定向时间已经使用了总时间的 90%....

```
<?php
//
$url = "http://www.somesite.com/###";

$username = 'username';
$password = 'password';

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_COOKIEJAR, '/tmp/cookies.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, '/tmp/cookies.txt');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_NTLM);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);

$out = curl_exec($ch);

print "error:" . curl_error($ch) . "<br />";
print "output:" . $out . "<br /><br />";

$info = curl_getinfo($ch);
print_r($info);

curl_close($ch);

?> 
```

curl_getinfo() 显示：

```
Array ( 
[url] => http://www.somesite.com/xxx
[content_type] => text/xml;charset=UTF-8 
[http_code] => 200 
[header_size] => 2760 
[request_size] => 5576 
[filetime] => -1 
[ssl_verify_result] => 0 
[redirect_count] => 3 
[total_time] => 10.751595 
[namelookup_time] => 2.0E-5 
[connect_time] => 0.001612 
[pretransfer_time] => 0.001613 
[size_upload] => 0 
[size_download] => 24506 
[speed_download] => 2279 
[speed_upload] => 0 
[download_content_length] => 24506 
[upload_content_length] => 0 
[starttransfer_time] => 0.62479 
[redirect_time] => 9.080637 <--------------
[certinfo] => Array ( ) 
[redirect_url] => 
) 
```

看到了`[redirect_time] => 9.080637`吗？

它占用了总时间的 90%。

如何改进它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:28:22.803

> CURLINFO_REDIRECT_TIME 传递一个指向 double 的指针以接收总时间，以秒为单位，所有重定向步骤所花费的时间包括名称查找、连接、预传输和在最终事务开始之前的传输。CURLINFO_REDIRECT_TIME 包含多个重定向的完整执行时间。（在 7.9.7 中添加）

我说最有可能是传输问题：您*的“ [http://www.somesite.com/xxx](http://www.somesite.com/xxx) ”*非常慢（如果不是您的站点，则很难修复），3 个重定向每个花费 > 3 秒。但是您可以检查 dns 查找和连接的速度有多快，尽管在该数据中似乎还可以。

# sql-server - 将特定列中的 false 设置为所有行

> ID：10793338
> 
> 赞同：6
> 
> 时间：2012-05-29T05:06:23.290
> 
> 标签：sql-server, tsql

我有一个包含以下列的表格：

```
ID    Name 
1     test1
2     test2 
```

现在我添加了新列`IsConfirmed`。此列包含`null`所有行。

```
ID    Name   IsConfirmed
1     test1     null
2     test2     null 
```

如何使用 T-SQL 为表中的所有行设置`false`列`IsConfirmed`？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T05:07:45.530

```
UPDATE YourTableName
SET IsConfirmed=0
WHERE isConfirmed is Null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T06:57:52.630

[@JohnFx 的建议](https://stackoverflow.com/a/10793342/297408)是手头问题的完美解决方案。但是，您可能想知道如何防止这种情况出现，同时可能解决其他潜在问题。

特别是，您想立即将 NULL 替换为 0 的事实可能表明您从一开始就不想让列保存 NULL。如果确实如此，您应该添加带有说明符的列`NOT NULL`：

```
ALTER TABLE *tablename*
ADD IsConfirmed bit **NOT NULL** 
```

当然，如果您尝试将`NOT NULL`列添加到非空表中，如果您没有*同时*为该列提供默认值，您将收到错误消息，因为 SQL Server 会尝试使用 NULL 来添加列，其中，根据定义，是不允许的。因此，`NOT NULL`改为添加这样的列：

```
ALTER TABLE *tablename*
ADD IsConfirmed bit NOT NULL
**CONSTRAINT DF_*tablename*_IsConfirmed DEFAULT (0)** 
```

该部分是可选的，您可以仅保留，但我仍然建议您为所有约束（包括默认值）提供明确的名称，因为这样您可以更轻松地删除/重新创建它们。出于同样的原因（为了让您更轻松地管理约束），您最好使用固定模式来命名约束。上述语句中的模式（for ，后跟表名，后跟列名）只是一个示例，您很可能会想出一个不同的模式。但是一旦你有了，就保持一致。`CONSTRAINT DF_*tablename*_IsConfirmed``DEAFULT (0)``DF``DEFAULT`

# iphone - 如何在 iPhone 应用程序中处理身份验证

> ID：10793345
> 
> 赞同：6
> 
> 时间：2012-05-29T05:07:53.233
> 
> 标签：iphone, ios, facebook

我目前正在开发我的第一个原生 iPhone 应用程序（尽管我有多年的网络开发经验）。我在理解处理登录的最佳方式时遇到了一些困难，我正在寻找一些关于最佳方式的建议。我对登录过程中可能出错的所有事情想得越多，我的大脑就越想从我的脑海中跳出来。我对此感到非常沮丧，并且真的可以使用一些更有经验的 iPhone 开发人员的建议。在此先感谢您的帮助。

我的目标是在应用程序的第一个版本中支持 Facebook Connect，然后在以后的版本中支持其他 SSO 服务（Twitter、Google 等）以及我自己的用户帐户系统。当前的计划是在服务器上创建一个 MySQL 表，如下所示：

```
users (id, nickname, facebook_id, ...) 
```

当用户第一次通过 Facebook 登录应用程序时，将在此表中为他们创建一个条目。您可能认为这没有必要，但它可以让我稍后扩展到其他服务。例如，我可以这样做：

```
users (id, nickname, facebook_id, twitter_id, google_id, username, ...) 
```

此表将包含 facebook_id、twitter_id、google_id 和用户名的可为空字段。如果用户使用 facebook 登录，他们将拥有一个 facebook_id。Twitter 用户将拥有一个 twitter_id，Google 用户将拥有一个 google_id，而我自己的用户将拥有一个用户名。无论他们使用什么登录系统，他们都将由我自己的 ID 唯一标识。

所以我对用户帐户的后端实现非常满意。我可以设置应用程序可以调用的 Web 服务来创建/检索用户、验证登录等。没问题。

我遇到的问题是使用 iPhone UI 组件实现正确的登录流程。我的特定应用程序使用用作主导航的 UITabBarController。其中一个标签被标记为“我的帐户”，并包含有关当前登录用户的信息。如果用户单击“我的帐户”选项卡，他们会看到一个用作子菜单的表格视图。它有“我的个人资料”、“设置”等选项。如果他们点击了这些菜单项中的任何一个并且他们没有登录，那么我使用*presentViewController*函数来弹出一个登录屏幕。他们单击“使用 facebook 登录”并通过典型的 Facebook 授权过程。当他们完成该过程后，我使用*dismissViewController*删除登录页面并显示他们尝试访问的页面。如果他们取消登录或登录失败，那么我使用UINavigationController 上的*popViewControllerAnimated*将它们发送回“我的帐户”子菜单。对于那些难以想象这一点的人，请查看亚马逊应用程序。这几乎完全相同（只需在未登录时单击“更多”选项卡并尝试单击其下方的菜单项之一）。

这一切都很好，我很满意。但这是我感到困惑的地方：

如果他们在“我的帐户”选项卡中深入到 UINavigationController 的几个级别并且他们的登录会话到期，我该怎么办？

让我们以 Facebook 登录为例。Facebook 使用会话令牌来保持用户登录。令牌会在一定时间后过期。假设用户向下导航到“我的帐户”，然后单击“我的个人资料”，然后单击“编辑”并显示一个屏幕，他们可以在其中编辑他们的个人资料信息。因此，他们显然需要经过身份验证才能查看此页面。事实上，它们深入到需要经过身份验证才能看到的页面的 2-3 层。现在假设他们被电话或其他事情打断，忘记了他们在做什么。他们下次访问该应用程序的时间是一周后，此时他们的登录会话已过期。我可以通过几种方式处理这个问题。在我看来，它们都不是很好。

## 解决方案#1

Facebook SDK 将自动调用 AppDelegate 类上的一个方法，通知我会话已过期。由于我在 AppDelegate 级别收到会话到期通知，因此我不知道用户当前正在查看的页面以及他们是否需要进行身份验证才能使用它。为了解决这个问题，我可以让所有需要登录的 ViewController 扩展“ProtectedViewController”类或指示用户应该登录才能看到该页面的东西。然后当 AppDelegate 收到会话过期的通知时，它会尝试找出当前的 ViewController 是什么，并检查它是否扩展了“ProtectedViewController”。如果是，则显示一个登录屏幕。如果用户成功登录，那么一切都会正常进行。如果不，然后将用户返回到他们必须从头开始的应用程序的第一个屏幕。这很糟糕，因为用户将丢失他们已经输入的任何内容，但我看不出有任何方法可以使用此解决方案来避免它。

## 解决方案#2

忽略 AppDelegate 级别的会话过期事件，而是执行以下操作：在采取任何需要用户登录的操作之前（例如，当用户在其“编辑配置文件”页面上单击“保存”时），检查他们是否仍然已登录。如果未登录，则显示登录屏幕。如果用户无法登录，则将其发送回开始屏幕。这个解决方案对代码来说很麻烦，因为我必须检查用户在应用程序的受保护区域内所做的几乎所有事情——当他们查看页面时，当他们点击按钮时——几乎所有事情。

如果用户无法重新进行身份验证，我也希望避免将用户一直返回到应用程序的开始屏幕。相反，在这种情况下，我更愿意将用户返回 UINavigationController 到“我的帐户”菜单——这是最近的不需要登录的页面。当然，我可以对其进行硬编码，但我正在寻找一种更自然地工作并且可以在其他应用程序中重用的解决方案/模式。

我真的很感激一些指导。当然，我不是世界上第一个需要解决这个问题的人。不幸的是，谷歌并没有提供太多帮助。

谢谢。

编辑：另一个想法是继承 UIViewController（例如“ProtectedViewController”）并实现“viewWillAppear”方法。在此方法中，我可以检查用户是否已登录。如果没有，则向上滑动登录页面。不过，当他们无法登录时，我仍然不知道如何处理这种情况。但是，这个解决方案有一个问题：如果用户的会话在他们使用应用程序时过期，那么我不会重新验证他们，直到他们下次单击新视图时。如果他们已经在查看“编辑”页面并单击“保存”按钮，那么他们将不会被重新验证。但也许这离解决方案更近了一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:09:00.913

不要忘记应用代理是将整个标签栏添加到主 UIWindow 的代理。在检测到凭据失败时，您可以简单地从 UIWindow 中删除 UITabBarController，并仅将其替换为您自己的登录视图以重新进行身份验证。这消除了它们可能与选项卡结构中的任何内容进行交互的任何可能性，但是当恢复时意味着它们在选项卡中的任何位置都将被保留（因为您只需删除选项卡栏控制器视图但保持控制器不变）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:01:50.200

这是我在最近的一个项目中使用单例管理它的方式。

创建一个单例类，比如 LoginManager，它有一个名为的方法，

```
-(UserInfo*) getValidatedUser: (UIView*) senderView 
```

在此方法中检查令牌是否仍然有效。

如果它无效，只需创建一个新视图，强制用户使用 FB 凭据登录并将其覆盖在“senderView”之上，以便强制用户登录，如下所示：

```
[senderView addSubview:loginView]; 
```

一旦令牌有效，您就返回用户信息。

有了这个基本逻辑，你现在可以在你需要一个有效的凭证来做某事时从你的视图控制器类中调用这个 getValidatedUser 方法：

```
UserInfo* myUser = [loginManagerObj  getValidatedUser:self.view] 
```

该方法在内部决定是否应显示登录页面。希望这可以帮助。

# wpf - 覆盖自定义控件 DualButton 的 IsEnabled 属性以设置可见性

> ID：10793347
> 
> 赞同：0
> 
> 时间：2012-05-29T05:08:29.647
> 
> 标签：wpf, xaml, button

我正在研究 WPF，对 XAML 自定义创建的控件知之甚少。我有一个自定义控件名称“DualButton”，如下所示：

```
<Controls:DualButton x:Name="StandardConferenceCancelButton"
                                             Width="90"
                                             Height="25"
                                             Margin="2"
                                             LeftButtonCommand="{Binding StandardModeConnectCommand}"
                                             RightButtonCommand="{Binding ConferenceCancelCommand}"
                                             >
                            <AccessText HorizontalAlignment="Center" Text="{x:Static I18N:TelephonyRegionViewRes.Standard}" />
                        </Controls:DualButton> 
```

它的 2 个依赖属性“LeftButtonCommand”和“RightButtonCommand”绑定了两个不同的 ICommand。我想将此按钮的可见性设置为 LeftButtonCommand 的 CanExecute，以便当 LeftButtonCommandCanExecute() 返回 true 时，只有按钮可见。我采取了dependancyProperty'IsEnabled'我需要做的进一步

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-18T17:18:41.357

我知道它已经晚了，但可能会帮助别人......

1.  在您的 DataContext 中，创建一个`IsVisible`返回的属性

    ```
    StandardModeConnectCommand.CanExecute() 
    ```

2.  在您的窗口或用户控件中，添加资源

    ```
     <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
      </Window.Resources> 
    ```

3.  在您的双按钮中，在命令之后或之前，添加：

    ```
     Visibility="{Binding IsVisible, Converter={StaticResource BooleanToVisibilityConverter}}" 
    ```

4.  最后，在 CanEecute 的返回值可能发生变化的地方，在你的 datacontext 中添加一个

    ```
    NotifyPropertyChanged(nameof(IsVIsible)); 
    ```

你应该在这方面走上正轨。

# jquery - vimeo html5 编辑 CSS

> ID：10793348
> 
> 赞同：0
> 
> 时间：2012-05-29T05:08:31.190
> 
> 标签：jquery, css, html, vimeo

是否可以编辑 vimeo 的 HTML CSS 属性？我有一个自动播放的视频，不需要播放按钮。

我想编辑这门课。

```
.a.l .b .as {
position: absolute;
top: 50%;
left: 50%;
margin: -2em 0 0 -3.25em;
float: none;
z-index: 3; 
```

}

我想在`display:none;`这个类中添加一个。

建立在乔纳森桑普森所说的之上。这可能吗：

```
 $(document).ready(function() {
       $("iframe#vim").contents().find('.as.av').hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:18:10.363

HTML5 视频当前通过 传递`iframe`，因此您无法触摸按钮：

```
<iframe src="http://player.vimeo.com/video/7403673" 
        width="500" height="281" frameborder="0" 
        webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> 
```

一年前，Vimeo 工作人员为他们不允许用户隐藏播放/暂停按钮的决定辩护*，*暗示这会造成*糟糕的用户体验*：http: [//vimeo.com/forums/topic :31015](http://vimeo.com/forums/topic:31015)

# javascript - 更改图像 onmouseover 和 onmouseout 事件在 IE 中有效，但在 Chrome/FireFox 中无效

> ID：10793355
> 
> 赞同：0
> 
> 时间：2012-05-29T05:09:50.040
> 
> 标签：javascript, jquery, asp.net-mvc, razor

想在我的网站上显示另一个图像 onmouseover 和 onmouseout。我有以下内容：

```
<img src="@(Model.ThumbPath)" alt='@Model.Description' 
     onmouseover='iconMouseOver(this,"@Model.ThumbInvPath")' 
                onmouseout='iconMouseOut(this,"@Model.ThumbPath")'/> 
```

调用 Javascript 方法：

```
function iconMouseOver(targetImg, replaceImg) {
    $(targetImg).attr('src', replaceImg);
}

function iconMouseOut(targetImg, replaceImg) {
    $(targetImg).attr('src', replaceImg);
} 
```

上面的代码在 IE 中有效，但在其他浏览器中无效。（我知道，对吗？通常情况相反）。显示图像，但鼠标悬停/悬停效果不起作用。我错过了什么？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:43:12.380

[我在这里](http://jsfiddle.net/Dhfj6/)为你准备了一个例子

我正在使用 jQuery 悬停方法

# .net - 创建应用程序自定义安装程序的单击 msi 文件

> ID：10793356
> 
> 赞同：1
> 
> 时间：2012-05-29T05:09:54.707
> 
> 标签：.net, installation, windows-installer

我有一个应用程序，我为其创建了自定义安装程序。现在这个安装程序有一些支持的文件和 exe。这还包含一个文件夹，其中包含我的应用程序的一组 exe 和支持的 dll。

现在，如果用户必须安装我的应用程序，他可以运行该安装程序 exe 并安装它。

现在我想要的是把整个东西转换成一个单独的 msi 文件，这样我就可以把它放在我的网站上，用户可以下载它。所以它会变得像单击安装的东西。

所有东西都建立在 .NET 中

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:00:44.817

您可以查看[Advanced Installer 中的 Repackager](http://www.advancedinstaller.com/user-guide/convert-exe-to-msi.html)。但是，这需要企业版，您不能在高级安装程序的免费版本中使用它，但您确实可以获得 30 天的试用期来测试它，并提供完整的功能支持。此外，最近发布了您可能感兴趣[的单击安装支持。](http://www.advancedinstaller.com/release-9.2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:17:35.327

我通常用来部署我的应用程序是构建一个[NSIS](http://nsis.sourceforge.net/Main_Page)设置。虽然这不是 MSI，但在大多数情况下，它绝对足以满足我的需求。

如果我需要安装 .NET Framework 等先决条件，我使用了引导程序[dotNetInstaller](http://dblock.github.com/dotnetinstaller/)，其中包括 NSIS 设置以及 .NET Framework。它启动，安装 .NET（如果不存在），然后执行实际的 NSIS 设置。

最后，我绝对需要 MSI，我切换到[Wix](http://en.wikipedia.org/wiki/WiX)和[Wix#](http://www.csscript.net/WixSharp.html)（“Wix Sharp”）。您还可以在 Visual Studio .NET 2010 中创建一个安装项目并让它为您构建一个 MSI 包；通常他们为我提供的自定义选项太少，所以我改用 Wix。

# php - 如何使用 PHP dom 或正则表达式从 java 脚本中提取文本

> ID：10793362
> 
> 赞同：-2
> 
> 时间：2012-05-29T05:10:51.747
> 
> 标签：php, regex, dom

我想从以下 java 脚本部分中提取节点值。java 脚本包含在 html 头部分中。我想用 PHP html dom 或正则表达式来做。

```
<script>  
     *****************************************
     ********************************** 
     document.loginform.action ="../Login1.action";
 document.loginform.submit();
 }
    </script> 
```

我想获取document.loginform.action ="I want to get this text"之间的文本；两个引号。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:42:08.580

要完全按照您的要求进行操作，您可以使用正则表达式和每个脚本元素的 text 属性，但是我认为您不会发现它非常健壮或实用。

```
window.onload = function() {
  var script, scripts = document.scripts;
  var re = /document\.loginform\.action =/;
  var text;

  for (var i=0, iLen=scripts.length; i<iLen; i++) {
    script = scripts[i];

    if (re.test(script.text)) {
      text = script.text.match(/document\.loginform\.action ="[^"]+/)[0];
      alert(text.split('"')[1]);
    } 
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T05:37:05.923

您可以尝试这样做：`<script>`从 HTML 中获取节点，如下所示：

```
x=document.getElementsByTagName("script");
str = x[0].innerHTML; 
```

这将为您提供`<scrip> and </script>`节点之间的整个脚本内容。拆分`str`'

```
var arr = str.split(":"); 
```

这将为您提供一个包含所有行的数组。现在将数组中的所有`document.loginform`字符串分组并继续进行。您需要检查一个包含“动作”的字符串，这将帮助您获得更准确的结果。

希望这会帮助你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T06:13:51.740

您甚至没有搜索或使用人们建议您的内容，这是寻求人们帮助的糟糕方式。这是使用正则表达式的解决方案。

```
<?php
$html = <<<EOD
....
<script>  
     *****************************************
     ********************************** 
     document.loginform.action ="../Login1.action";
 document.loginform.submit();
 }
    </script>
.....
EOD;
$match = preg_match('/document\.loginform\.action\s*=\s*"([^"]+)";/isU', $html, $result);
echo $match[1];
?> 
```

您可能希望使用 DOM 解析器来实现相同的目的，您需要在此处查看：[http](http://docs.php.net/manual/en/domdocument.loadhtml.php) ://docs.php.net/manual/en/domdocument.loadhtml.php以获取更多信息。

# javascript - 检查 JSON 数据是否已更改并警告行

> ID：10793363
> 
> 赞同：0
> 
> 时间：2012-05-29T05:10:59.460
> 
> 标签：javascript, jquery, json

我正在尝试开发一个应用程序，每分钟检查 MYSQL 表是否有新消息，如果有任何新消息，它应该提醒用户并显示消息。这是我使用的代码，我应该如何修改它以使其工作？

```
setInterval ( "getMessages()", 60000 );
var oldmessage = "";
function getMessages() {
    $.getJSON(serviceURL + 'messages.php?ID=' + ID, function(message) {
       if(JSON.stringify(message) != JSON.stringify(oldmessage)){ // old message is not same as new 
          var messages = data.key[0];
           alert(messages.NEW);
        });

            oldmessage = message;

} 
```

所以我想要做的是将旧消息保存到变量并在几分钟后进行比较，如果它发生了变化，我会提醒新行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:54:06.447

可能的解决方案是，您在 mysql 中使用一个新列来标记是否已查看。默认情况下不会被查看（比如 0）。在您的 PHP 代码中，您应该检索标记为“未查看”或 0 的一行。同样，您应该通过 AJAX 显示并将该行更新为 1（已查看）。

如果您没有收到任何行，则不向 AJAX 发送任何内容并相应地处理消息，没有找到新行。

这只是一个逻辑，希望对您有所帮助。

# mysql - Mysql SELECT 查询中的日期格式

> ID：10793364
> 
> 赞同：2
> 
> 时间：2012-05-29T05:11:04.760
> 
> 标签：mysql, date, time

我的查询是这个...

```
SELECT a.ID, a.time, a.quote, a.quantity, a.media, a.print, a.pack 
FROM quotes a 
```

它像这样返回我的日期......

我如何使结果返回为`March 2, 2012`或`05/04/2012`或有意义的东西？

更新 - 下面的 FROM_UNIXTIME 答案列出了我运行查询时有时间的所有记录 - 我需要最初创建记录的时间 - 而不是查询时间。

还有其他想法吗？

![在此处输入图像描述](../Images/353700b98fd63fae71502c00336f4def.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:18:52.537

您可以使用[FROM_UNIXTIME](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)执行此操作：

```
SELECT a.ID, FROM_UNIXTIME(a.time, '%M %e, %Y'), 
       a.quote, a.quantity, a.media, a.print, a.pack 
FROM quotes a 
```

您可以使用指定与[DATE_FORMAT](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)一起使用的格式以任何方式格式化日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:14:39.373

尝试使用这个函数：[FROM_UNIXTIME](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)

在您的情况下，它将是这样的（对于第一个示例）：

```
SELECT a.ID, FROM_UNIXTIME(a.`time`, '%M %e, %Y'), 
    a.quote, a.quantity, a.media, a.print, a.pack 
FROM quotes a 
```

此外，您可能想要做的是给结果一个别名：

```
SELECT a.ID, FROM_UNIXTIME(a.`time`, '%M %e, %Y') as formatted_time, 
    a.quote, a.quantity, a.media, a.print, a.pack 
FROM quotes a 
```

然后你将访问格式化的结果，而`formatted_time`不是`time`......

注意：请注意时间列名称在反引号中

```
 a.`time` 
```

反引号导致查询返回当前时间而不是时间列的值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T05:19:07.080

```
SELECT DATE_FORMAT(FROM_UNIXTIME(a.`time`), '%M %e, %Y') AS `time`... 
```

有关 DATE_FORMAT 可能性的完整列表，请参阅[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T05:17:15.850

看来您需要使用该[`FROM_UNIXTIME`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)功能。从文档中：

> 根据函数是在字符串还是数字上下文中使用，将 unix_timestamp 参数的表示形式返回为值 `'YYYY-MM-DD HH:MM:SS'`或格式。`YYYYMMDDHHMMSS.uuuuuu`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T05:41:57.790

您可以像这样使用 DATE_FORMAT 函数，

```
 SELECT a.ID, DATE_FORMAT(a.time, '%M %D %Y'), a.quote, a.quantity, a.media,a.print,a.pack 
    FROM quotes a 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T05:18:21.190

```
SELECT a.ID, FROM_UNIXTIME(a.time), a.quote, a.quantity, a.media, a.print, a.pack 
FROM quotes a 
```

# jakarta-ee - JPA - 添加新实体或属性而不删除和创建时出错

> ID：10793369
> 
> 赞同：0
> 
> 时间：2012-05-29T05:11:53.003
> 
> 标签：jakarta-ee, jpa, netbeans, eclipselink

我正在使用 JSF 开发一个 Java EE 应用程序，EclipseLink2 作为 JPA 安装，mySQL 作为 Netbeans 的后端数据库。

该应用程序工作正常，除非我向现有实体添加新属性或创建新实体。如果我在 Persistance.xml 文件中选择 dropandcreate 选项，应用程序将再次运行而不会出现错误，但它会删除包含先前条目的整个数据库。

当我投入生产时，我不能在添加新实体时丢失数据库的数据。有什么办法可以克服这个。我尝试使用数据库模式，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:44:14.790

您只有三个模式生成选项（[包含更多详细信息的源](http://wiki.eclipse.org/Using_EclipseLink_JPA_Extensions_%28ELUG%29#Using_EclipseLink_JPA_Extensions_for_Schema_Generation)）：

*   none：不生成任何内容
*   create-tables：通常创建新表并将数据保存在旧表中
*   drop-and-create-tables：删除旧表并创建新表，因此所有数据都将丢失。

如您所见，其中任何一个都不支持您必须保留数据和添加列的方案。您可能会发现自动模式生成不支持许多其他场景，例如更改列类型和转换数据。

因为生成模式不适用于您的情况，所以最好将其保留为开发时间工具，并学习自己编写用于生产的模式。关于这个问题的更多意见可以从[这个](https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production)讨论中找到。它是关于 Hibernate，所以属性名称不同，但问题与 EclipseLink 相同。

# c# - 具有单独控制器操作的 Mvc3 向导

> ID：10793370
> 
> 赞同：1
> 
> 时间：2012-05-29T05:11:58.793
> 
> 标签：c#, asp.net-mvc-3

我正在 mvc3/c# 中组合一个向导。我大致有一个模型设置

```
public interface IStepView {}

public class Step1View : IStepView {}

public class Step2View : IStepView {} 
```

我有一个父视图，它显示这些步骤的 2 个部分视图中的 1 个。

我希望第 2 步的表单提交在同一控制器上使用自定义操作。阅读类似的帖子似乎我需要做的就是像这样添加自定义路线

```
RouteTable.Routes.MapRoute("Step2Route", "", new { controller = "Demo", action = "MyAction" }); 
```

我在 Main.cshtml 上连接在一起

```
@using (Html.BeginForm())
{  
    @Html.BeginRouteForm("Step2Route", new { controller = "RolloverController", action = "Stuff" })

    // and so on for each Step I want to use a custom action

} 
```

这是这样做的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:12:07.143

如果您不知道向导中的步骤数，自定义路线可能有助于跟踪向导中的进度。

即向导/{WizardName}Step/{StepNumber}/

但是由于看起来您确实知道这些步骤，因此您在控制器上的操作可以在没有自定义路由的情况下与它们对应：

即RegistrationWizard/EnterInfo、RegistrationWizard/Confirm、RegistrationWizard/Success

为控制器上的每个操作创建一个 get 和 post 方法。采用相同的模型并使用 RedirectToAction 将其传递或将其存储在会话中，以便在最后一步提交数据之前跟踪用户对数据所做的更改。

# haskell - 在 GHC 解释器中冗余使用 seq 导致空间泄漏

> ID：10793371
> 
> 赞同：22
> 
> 时间：2012-05-29T05:12:06.277
> 
> 标签：haskell, ghc, space-leak

我将这段代码输入解释器，内存很快被消耗：

```
last [1..10^7] `seq` () 
```

我不明白为什么这需要超过 O(1) 的空间。如果我这样做（应该是一样的，因为 Show 强制弱头部正常形式，所以 seq 是多余的？）：

```
last [1..10^7] 
```

...它工作正常。

我无法在口译员之外重现这种情况。

这里发生了什么？

* * *

以下是一些测试用例： [http ://hpaste.org/69234](http://hpaste.org/69234)

注意事项：

*   通过在解释器中运行，我加载 wtf.hs 而不编译它，然后输入`wtf<n>`ghci。
*   通过编译，我做到了`ghc --make wtf.hs && ./wtf`。
*   `last`可以`sum`用严格的累加器或在列表中找到最大元素的函数替换，空间泄漏仍然发生
*   使用`$!`而不是`seq`.
*   我尝试添加一个虚拟`()`参数，因为我认为这可能是 CAF 问题。没有任何改变。
*   上的函数可能不是问题`Enum`，因为我可以用和以后重现该行为，而这些行为`wtf5`根本不使用`Enum`。
*   , 或可能不是问题`Num`，因为我可以在没有它们的情况下重现行为and 。`Int``Integer``wtf14``wtf16`

我尝试使用 Peano 算法重现问题，以将列表和整数排除在等式之外（获取 10^9 末尾的 ），但在尝试实现时遇到了我不理解的其他共享/空间泄漏问题`*`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-29T12:56:14.490

我们需要查看`enumFromTo`for Integer 的实例，最后：

```
last []                 =  errorEmptyList "last"
last (x:xs)             =  last' x xs
  where last' y []     = y
        last' _ (y:ys) = last' y ys 
```

它在 GHC.Enum 中定义为：

```
enumFrom x             = enumDeltaInteger  x 1
enumFromThen x y       = enumDeltaInteger  x (y-x)
enumFromTo x lim       = enumDeltaToInteger x 1 lim 
```

在哪里

```
enumDeltaInteger :: Integer -> Integer -> [Integer]
enumDeltaInteger x d = x `seq` (x : enumDeltaInteger (x+d) d)
-- strict accumulator, so
--     head (drop 1000000 [1 .. ]
-- works 
```

和

```
enumDeltaToInteger :: Integer -> Integer -> Integer -> [Integer]
enumDeltaToInteger x delta lim
  | delta >= 0 = up_list x delta lim
  | otherwise  = dn_list x delta lim

up_list :: Integer -> Integer -> Integer -> [Integer]
up_list x0 delta lim = go (x0 :: Integer)
                where
                    go x | x > lim   = []
                         | otherwise = x : go (x+delta) 
```

`last`正如预期的那样，完全懒惰。

对于 Integer Enum 类，我们有一个严格的累加器（明确地）用于`enumFrom`. 在有界情况下（例如`[1..n]`），它调用`enumDeltaToInteger`然后 into `up_list`，它使用工作人员展开列表，直到达到其限制。

但是在助手`up_list`中是严格的（参见与 的比较）。`x``go``lim`

当在 GHCi 中运行时，这些都没有被优化，在返回之前产生对 enumFromTo 的天真的调用`()`。

```
let
  it_ax6 :: ()      
  it_ax6 =
    case last
           @ GHC.Integer.Type.Integer
           (GHC.Enum.enumFromTo
              @ GHC.Integer.Type.Integer
              GHC.Num.$fEnumInteger
              (GHC.Integer.smallInteger 1)
              (GHC.Real.^
                 @ GHC.Integer.Type.Integer
                 @ GHC.Integer.Type.Integer
                 GHC.Num.$fNumInteger
                 GHC.Real.$fIntegralInteger
                 (GHC.Integer.smallInteger 10)
                 (GHC.Integer.smallInteger 7)))
    of _ -> GHC.Unit.()
in
  GHC.Base.thenIO
    @ ()
    @ [()]
    (System.IO.print @ () GHC.Show.$fShow() it_ax6)
    (GHC.Base.returnIO
       @ [()] (GHC.Types.: @ () it_ax6 (GHC.Types.[] @ ()))) 
```

那么，为什么我们在`seq`案例中保留列表，而不是在常规案例中？依靠`enumFromTo`for`Integer`和 for的惰性，常规案例在恒定空间中运行良好`last`。该案例的 GHCi 核心如下所示：

```
let {
  it_aKj :: GHC.Integer.Type.Integer
  [LclId,
   Unf=Unf{Src=<vanilla>, TopLvl=False, Arity=0, Value=False,
           ConLike=False, Cheap=False, Expandable=False,
           Guidance=IF_ARGS [] 170 0}]
  it_aKj =
    GHC.List.last
      @ GHC.Integer.Type.Integer
      (GHC.Enum.enumFromTo
         @ GHC.Integer.Type.Integer
         GHC.Num.$fEnumInteger
         (GHC.Integer.smallInteger 1)
         (GHC.Real.^
            @ GHC.Integer.Type.Integer
            @ GHC.Integer.Type.Integer
            GHC.Num.$fNumInteger
            GHC.Real.$fIntegralInteger
            (GHC.Integer.smallInteger 10)
            (GHC.Integer.smallInteger 7))) } in
GHC.Base.thenIO
  @ ()
  @ [()]
  (System.IO.print
     @ GHC.Integer.Type.Integer GHC.Num.$fShowInteger it_aKj)
  (GHC.Base.returnIO
     @ [()]
     (GHC.Types.:
        @ ()
        (it_aKj
         `cast` (UnsafeCo GHC.Integer.Type.Integer ()
                 :: GHC.Integer.Type.Integer ~ ()))
        (GHC.Types.[] @ ()))) 
```

所以这些几乎是相同的，不同之处在于：

*   在`seq`版本中，`last (enumFromTo ..)`被强制在`case`.
*   在普通版本中，它是一个懒惰的`let`.
*   在该`seq`版本中，该值被计算然后丢弃，产生一个`()`-- 什么都不看结果
*   在正常情况下，它会被检查并显示。

奇怪的是，没有什么神奇的：

```
let x = case last (enumFromTo 1 n) of _ -> () 
```

这使它保留了价值。

正如我们所看到的，`up_list`它的累加器中的实现是严格的（因为它与 比较`lim`，并且列表是延迟展开的——所以`last`应该能够在恒定空间中使用它）。手写表达式证实了这一点。

对 ghci 执行进行堆分析会显示整个列表被保留：

![在此处输入图像描述](../Images/14e3edffa4df047f631ec2ef28ec724d.png)

这至少告诉我们它不是一连串的 thunk，而是整个列表正在严格构建并保留，直到被丢弃。

所以谜团在于：`last`在 ghci 中，而不是在 ghc 中，是什么保留了 list 参数？

我现在怀疑 ghci 的一些内部（或微妙）细节——我认为这值得一张 ghci 票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:28:27.133

我认为@nm 是对的。没有什么会强制列表中的*值*，因此 1+1+1+1+... thunk 最终会杀死空间。

我会做一个快速测试。

# visual-studio-2010 - 将 VS2008 项目转换为 VS2010 项目时缺少参考

> ID：10793372
> 
> 赞同：3
> 
> 时间：2012-05-29T05:12:17.697
> 
> 标签：visual-studio-2010

当我将 VS2008 项目转换为 2010 时，它显示一条错误消息

> 在命名空间“System.Windows.Markup”中找不到类型名称“IComponentConnector”。此类型已转发到程序集 'System.Xaml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 考虑添加对该程序集的引用

它是在我们添加引用时构建的`System.Xaml`。需要添加额外参考的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T05:18:18.620

在 .Net 3.5/3,0 中，`IComponentConnector`（命名空间`System.Windows.Markup`）是 WindowsBase.dll 的一部分，并且在 .net 4.0 之后的 System.Xaml 中被移动。

看来您正在将项目框架 3.5 升级到 4.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:18:34.227

该类型已移至 .net 4 中的新程序集？

您正在将项目更改为使用 .net 4，它告诉您需要 .net 4 中该程序集的这种类型。

如果你的目标是 .net 3.5，你会发现你不需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:18:43.627

作为经验法则，始终添加记录在案的命名空间。该文件说要使用命名空间 System.Windows.Markup。它在 VS2008 中工作可能是因为 System.Xaml 在内部使用命名空间 System.Windows.Markup。

# iphone - 在 iPhone 应用程序中迁移 sql 数据

> ID：10793377
> 
> 赞同：3
> 
> 时间：2012-05-29T05:12:41.193
> 
> 标签：iphone, ios, sqlite

我有两个应用程序，第一个是 application1 和第二个 application1+，以及如何将 application1 和 application1+ 的数据从这些各自的旧版本迁移到新版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:31:04.450

您应该在第一个新应用程序启动时检查是否存在具有旧数据格式的 SQLite 数据库。如果是这样 - 只需创建新的 SQLite 数据库，从旧数据库中获取数据并将其放入新数据库。之后销毁旧的数据库文件。

# c++ - glReadPixels 返回较暗的图像

> ID：10793380
> 
> 赞同：0
> 
> 时间：2012-05-29T05:12:51.577
> 
> 标签：c++, opengl

我正在使用 glReadPixels 在我的游戏（例如游戏中、菜单中等）中创建状态的最终帧的副本，以用于过渡效果。我得到了那个副本，但它似乎比原版更暗：

![在此处输入图像描述](../Images/ff460c52c5f8e0d3167f3a16e593a6dd.png)

这是相关代码：

```
void GameStateManager::GetLastFrame()
{
    if (last_frame_buffer.id != 0)
        glDeleteTextures(1,&last_frame_buffer.id);

    uint8* data = new uint8[Constants::SCREEN_WIDTH * Constants::SCREEN_HEIGHT*3];

    glReadPixels(0,0,Constants::SCREEN_WIDTH,Constants::SCREEN_HEIGHT,GL_RGB,GL_UNSIGNED_BYTE,data);

    last_frame_buffer.target = GL_TEXTURE_RECTANGLE_ARB;

    glGenTextures(1,&last_frame_buffer.id);
    glBindTexture(last_frame_buffer.target,last_frame_buffer.id);
    glTexParameterf(last_frame_buffer.target,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
    glTexParameterf(last_frame_buffer.target,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
    glTexImage2D(last_frame_buffer.target,0,GL_RGB,Constants::SCREEN_WIDTH,Constants::SCREEN_HEIGHT,0,GL_RGB,GL_UNSIGNED_BYTE,data);
    glBindTexture(last_frame_buffer.target,0);

    delete[] data;
} 
```

这是实际的渲染代码：

```
 glPushMatrix();
        glTranslatef(0,last_frame_pos,0);
        glCallList(last_frame_quad);
    glPopMatrix(); 
```

这是显示列表：

```
 glBegin(GL_QUADS);
        glTexCoord2f(0     , 0);     glVertex2f(0    , height);
        glTexCoord2f(0    , height); glVertex2f(0    , 0);
        glTexCoord2f(width, height); glVertex2f(width, 0);
        glTexCoord2f(width, 0);      glVertex2f(width, height);
  glEnd(); 
```

以下是我迄今为止尝试过的事情：

*   更改缓冲区格式：BYTE（使图像变暗）、UNSIGNED_SHORT、UNSIGNED_INT、FLOAT
*   启用/禁用：TEXTURE_2D、TEXTURE_RECTANGLE、BLEND
*   手动调亮像素（惨败）

# wpf - How to change the value based getting value in Entity Framework

> ID：10793384
> 
> 赞同：0
> 
> 时间：2012-05-29T05:13:37.323
> 
> 标签：wpf, entity-framework

I have taken the values from database using Entity Framework , I have that a class called `EmployeeDetail` in that I have one property called `JOined AS`.

It gives the values as 'F' for fresher and 'E' for experience.. I need to display this value in DataGrid as Experience or Fresher instead of F or E..

For that I have created the partial class for `EmployeeDetail` and created one property `CustJoinedAs` ...

But I didn't get idea to compare the value and return the required value to DataGrid Column...

Here I also have to give each value to DataGrid.. is it automatically bind when I give the property to Column in DataGrid...or any propetyChanged Events have to be Write..

please give a brief idea.. and Code..

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:26:41.843

You can implement the property in partial class like

```
public partial class EmployeeDetail
{
    public string CustJoinedAs
    {
       get{return this.JoinedAs = "E"? "Experienced" : "Fresh";}
    }
} 
```

And bind column of grid to CustJonedAs despite of JoinedAs.

# eclipse - RSE 连接失败，RSEG1066

> ID：10793385
> 
> 赞同：6
> 
> 时间：2012-05-29T05:13:42.450
> 
> 标签：eclipse

RSE 无法连接到以前工作的 ssh 主机。主机当前在线并且 sshd 正在运行。中间没有防火墙。每当我尝试登录远程机器时，Eclipse 错误日志都会给出 RSEG 1066。其他远程机器似乎正在工作。我试过重启、重新安装、清除 known_hosts ...

今天早上刚安装完 12.04。安装了eclipse 3.7.2，安装了RSE 3.4。RSE 工作得很好，但 Eclipse 在 unity 上工作得不是很好（有 alt-tab 问题），所以我使用这个站点的说明升级了 java：[http ://www.duinsoft.nl/packages.php?t=en](http://www.duinsoft.nl/packages.php?t=en)

打开 Eclipse，我可以使用 alt-tab，但 RSE 无法通过 SSH 连接到主机。日志显示 RSEG 1066。这是在报告中：

```
 eclipse.buildId=I20110613-1736
   java.version=1.6.0_24
   java.vendor=Sun Microsystems Inc.
   BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=en_US
   Command-line arguments:  -os linux -ws gtk -arch x86 
```

请帮忙！

# sip - 并行 SIP 事务

> ID：10793399
> 
> 赞同：0
> 
> 时间：2012-05-29T05:15:47.280
> 
> 标签：sip, rfc

对于一个 UA 和另外两个 UA，是否可以并行执行许多 SIP 事务？例如，如果 UA1 在 INVITE 的中间，UA1 可以响应来自 UA3 的传入 INVITE 吗？独立交易呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:30:58.313

标准中没有任何内容阻止 SIP 设备处理多个并发事务，事实上 SIP 服务器需要这样做才能处理任何类型的负载。

至于 SIP 用户代理应该如何处理并发 SIP 事务，这是一个单独的考虑。如果 UA1 已经在通话并且一个新的 INVITE 请求来自 UA3，则处理它的典型方法是使用某种呼叫等待指示。使用软电话，可以看到指示，而使用 ATA，通过将一些音调注入 UA 的音频流，指示通常在音频通道上。

对于非 INVITE 交易，它通常会简单得多，因为大多数交易不需要任何用户操作。例如，UA 可以使用不同的 SIP 服务器维护六种不同的注册，并且各种注册和/或订阅事务（在这种情况下，事务只是请求和响应的组合）可以同时运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:00:22.197

还有另一个 SIP 并行事务“gothca-to-watch-for”...

在 sip 对话中，如果在很短的时间空间（~0.5 秒）内启动了多个 UAC 事务并且您的传输不可靠（UDP），那么如果初始请求数据包丢失，则可能存在问题。

序列号 (CSeq) 'n' 的丢失数据包不会到达，但包含 CSeq n+1 的下一个数据包会到达。

这在接收端 (UAS) 是可以接受的，它会将“远程 cseq”的知识更新为“n+1”。

然后重新发送初始请求，但现在 CSeq 'n' 低于 remote-cseq，因此必须丢弃并且 UAS 以（500 服务器内部错误）响应。

可能不是预期的！

因此，如果您的传输“不可靠”，则需要考虑使用对话框序列化请求。

# iphone - 将单个数组分成两个数组的代码如何？

> ID：10793400
> 
> 赞同：0
> 
> 时间：2012-05-29T05:15:49.757
> 
> 标签：iphone, ios, nsarray

当我使用来自所需 URL 的 JSON 解析时，我对 nsarray 的响应低于但在这里我不想得到 2、1、4、4、6、5、8、7、10、9、12 和 11在单个数组中，我必须将总响应分为两个数组我的意思是一个数组集将包含 2、4、6、8、10，其他数组集必须是 3、5、7、9 和 11。

那么如何在 iPhone 中将单个数组响应分离为两个数组的代码呢？

```
"(\n    2,\n    1\n)",
"(\n    4,\n    3\n)",
"(\n    6,\n    5\n)",
"(\n    8,\n    7\n)",
"(\n    10,\n    9\n)",
"(\n    12,\n    11\n)" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T05:28:45.447

如果将每个数字组合成一个大数组，则可以在 for-in 循环中使用简单的 if-else 来测试每个数字是偶数还是奇数。也许是这样的：

```
-(NSArray*)parseJSONIntoArrays:(NSArray*)array {
    NSMutableArray *evenNumbers = [[NSMutableArray alloc]init];
    NSMutableArray *oddNumbers = [[NSMutableArray alloc]init];

    for (NSNumber *number in array) {
        if (([number intValue] %2) == 0) {
            //even
            [evenNumbers addObject:number];
        }
        else {
            //odd
            [oddNumbers addObject:number];
        }
    }
    return [[NSArray alloc]initWithObjects:evenNumbers, oddNumbers, nil];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T05:26:36.103

要拆分数组，您通常需要遍历所有值并使用 IF ELSE 结构来决定将值放入哪个数组。此外，您需要使用`NSMutableArray`而不是`NSArray`. 像这样的东西：

```
NSMutableArray *evenNumbers = [NSMutableArray new];
NSMutableArray *oddNumbers = [NSMutableArray new];
for (NSNumber *value in myArray) {
    if ([value intValue] % 2 == 0) {
        [evenNumbers addObject:value];
    } else {
        [oddNumbers addObject:value];
    }
} 
```

# c++ - 当列表为空时 std::list:begin() 的行为

> ID：10793404
> 
> 赞同：21
> 
> 时间：2012-05-29T05:15:59.670
> 
> 标签：c++, std

以下是否根据 C++ 标准给出了定义的结果？

```
std::list<int> myList;
std::list<int>::iterator myIter = myList.begin();    // any issues?
myList.push_back( 123 );
myIter++;                                  // will myIter point to the 123 I pushed? 
```

我可以在我正在使用的编译器上对此进行测试......但我想要一个更明确的答案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-29T05:25:22.003

在这方面，所有标准迭代器和容器类型的行为都是相同的：

`§23.2.1 [container.requirements.general] p6`

> `begin()`返回一个引用容器中第一个元素的迭代器。`end()`返回一个迭代器，它是容器的结束值。**如果容器是空的，那么`begin() == end()`；**

表 107`§24.2.3 [input.iterators]`要求作为 , 的先决条件`++it`，`it`应该是可取消引用的，这对于过去的迭代器（即，你从 中得到的`end()`）不是这种情况，因此你正在涉足未定义行为的可怕领域。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T05:20:29.923

```
std::list<int> myList;
std::list<int> myIter = myList.begin(); 
```

迭代器的值与使用`myList.end()`. 迭代器被初始化到结束位置。即使您将一个元素推入列表后，迭代器仍然指向过去的一端。如果你增加它，你正在调用未定义的行为。

更新：

例如，如果您使用带有 -D_GLIBCXX_DEBUG 的 GCC 编译代码片段，则生成的可执行文件将中止：

```
/usr/include/c++/4.6/debug/safe_iterator.h:236:error: attempt to increment 
    a past-the-end iterator.

Objects involved in the operation:
iterator "this" @ 0x0x7fffc9548fb0 {
type = N11__gnu_debug14_Safe_iteratorINSt9__cxx199814_List_iteratorIiEENSt7__debug4listIiSaIiEEEEE (mutable iterator);
  state = past-the-end;
  references sequence with type `NSt7__debug4listIiSaIiEEE' @ 0x0x7fffc9548fb0
}
zsh: abort (core dumped)  ./listiter 
```

# php - 制作类似测验的程序

> ID：10793408
> 
> 赞同：0
> 
> 时间：2012-05-29T05:16:32.737
> 
> 标签：php, javascript, html

我想创建一个“测验”，用户将被问到一个问题，如果用户无法回答，他们在正确回答之前无法转到下一个问题。我知道这个问题听起来可能很简单，但我是编程新手，正在尝试创建我的第一个真正的程序。

所以基本上我想知道如果我希望用户能够在他们离开或无法完成测验时返回他们的测验，我应该采取什么方法。这就是为什么我不认为 Javascript 会起作用的原因，因为它不是服务器端并且不会保存任何东西。如果这是非常基本的，再次抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:18:06.947

我将从 PHP 开始。找到适合您的良好学习环境。学习 PHP 的基础知识。获取在您的机器上运行的本地服务器。

这就是我将如何开始...

1.  将您的问题和答案存储在数据库中，并为每个问题提供一个唯一的 ID。

2.  安全地将用户推进到下一个问题，前提是他们正确回答了前一个问题。

3.  将用户的进度存储在某处；服务器端或用户机器上（通过会话或 cookie）

4.  有一个使用给定 ID 显示问题的页面。mysite.com/question.php?id=x

5.  当用户查看页面时，将该 id 与 COOKIE 进行比较。如果它们匹配，请显示该问题。

现在我们写一些...

当测验开始时，设置一个cookie..

```
setcookie('name', '0'); //start at 0 
```

当用户选择问题的答案时；将该选择与数据库中的内容进行比较...检查答案：

```
public function checkAnswer() { 
      $questionid = $_POST['id'];//separate this question from the others
      $useranswer = $_POST['answer'];//get user's answer
      $dbanswer = getAnswer($questionid); //call a function that retrieves and returns the answer from the database, based on the given id (as an argument).

  if ($useranswer == $dbanswer)://compare answers
     andvanceQuestion();//advance to the next question
  else:
     incorrectAnswer();//tell user their answer was incorrect.
  endif;
}//end checkAnswer 
```

高级问题功能：

```
public function advanceQuestion() {
   $currQuestion = $_COOKIE['name'];//get cookie value
   $nextQuestion = $currQuestion + 1;//increment cookie value
   $setcookie('name', $nextQuestion);//update cookie value
   header("location: /mysite/question.php?id=$currQuestion");//go to next question
} 
```

获取答案功能：

```
public function getAnswer($id) {
   $query = mysql_query("SELECT * FROM questions WHERE id='$id'");//simple mysql syntax
   $question = mysql_fetch_assoc($query);//create array of all the entries given by $query
   $answer = $question['answer'];//select the 'answer' field from the array

   return $answer;//return the value
} 
```

获取问题函数：

```
public function getQuestion($id) {
   $query = mysql_query("SELECT * FROM questions WHERE id='$id'");
   $question = mysql_fetch_assoc($query);//create array of all the entries given by $query
   $question = $question['question'];//select the 'question' field from the array

   return $question;//return the value
} 
```

在 question.php 上：

```
if(isset($_POST['answer']))://check if form was submitted
   $class->checkAnswer();//check
endif;

if (isset($_COOKIE['name']) && isset($_GET['id']))://check for url param and cookie
   if (!$_COOKIE['name'] == $_GET['id'])://compare the two
      header("location: mysite.com/CHEATER.php");//if they DONT match, CHEATER!
   else:
      ?>
      <p>Who is the world's best Programmer?</p><!--Get question from db-->
      <form method="post">
          <!--For each option found with question, echo them.-->
          <input type="hidden" name="id" value="<?php echo $_GET['id']?>"/>
          Steve Jobs <input type="radio" name="answer" value="jobs"><br/>
          Steve Wozniak <input type="radio" name="answer" value="woz"><br/>
          Me? <input type="radio" name="answer" value="me"><br/>
          <input type="submit"/>
      </form>
      <?php
   endif;
endif; 
```

Kinda 写得很快，所以请原谅任何小的语法错误。

差不多就是这样。但是，您可以为自己做的最好的事情是在编写大型应用程序之前学习您将使用的语言。尽量避免复制和粘贴代码。总是自己写。并坚持下去。如果您会编写 Javascript，那么您会对 PHP 感到宾至如归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T05:40:07.807

如果您是初学者，请从简单的事情开始。当您开始构建应用程序时，首先考虑您需要什么（**计划**）。有时功能的顺序很重要，有时它们并不重要。

在这种情况下，您可以先进行测验，而不记住用户，但阻止继续。在第一阶段，您不需要数据库，只需要一个简单的（甚至可能是一页）应用程序。您的应用程序应该：

```
1\. show question to user
2\. show answer possibilities to user
3\. ask user response
4\. intepret that response
5\. if wrong, ask same question again, if right proceed to next, either way goto step 1 
```

完成此操作后，您可以进入第 2 阶段，“记住用户”。我认为，最**简单的方法是将用户问题编号存储到 cookie**中。我知道这不是最好的解决方案，有“漏洞”，用户可以随意提出问题，但这是初学者程序员的开始。在 PHP 中类似于：

```
setcookie("question", $value);       <-- to set
$question = $_COOKIE["question"];    <-- to get value of cookie 
```

看看： http: [//php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

还有其他方法可以继续，包括用户注册/登录等等，但我认为这绝对不是要创建的“第一个真正的程序”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:23:29.650

作为初学者没有错。我们都从某个地方开始 :) 您将要使用的一件事是数据库，具体取决于您的服务器类型以及您对服务器的配置您有很多选择，但常见的涉及结构化查询语言：更常用的是 sqlite， mysql 和 sqlserver。如果您打算让他们回来，这将为用户存储数据（此时您可能必须创建一个登录）另一个选项（与登录相反）是使用 php 使用 cookie（因为会话数据仅暂时存储）你的问题很广泛，所以请原谅我只写你可以做到的方式。在数据库中，您可以为用户设置它，您可以创建一个类似“已完成”的表，并在查询数据库时将其设置为 true，以查看问题是否得到正确回答。

# python - 导入时出现 Python 2.7 错误

> ID：10793409
> 
> 赞同：1
> 
> 时间：2012-05-29T05:16:49.227
> 
> 标签：python, import, importerror

我知道已经发布了很多关于包内导入的问题。我想知道以下是否也是 Python 2.7 的方式。

```
Source/
anomalyCheck/
    __init__.py
    DLthput.py
    ULPowerStats.py
    ULThput.py
config/
    __init__.py
    configure.py
parserTools/
    __init__.py
    logParser.py
utilities/
    __init__.py
    plotLogResults.py
__init__.py
lteDebugger.py 
```

---- lteDebugger.py----

```
import parserTools.logParser
import anomalyCheck.DLthput
import utilities.plotLogResults
import configuration.TDDFDDconfiguration
import anomalyCheck.ULthput
### Work done after here #### 
```

------DLThput.py------

```
from ..utilities.plotLogResults import *
from ..parserTools.logParser import *
### Work done after here #### 
```

------ULThput.py-----

```
from ..parserTools.logParser import *
from ..utilities.plotLogResults import * 
```

错误 ：

运行 lteDebugger.py 文件时，错误是

```
ValueError：尝试相对导入超出顶级包

文件“C:\Users\manojtut\Desktop\Project_LTE_SVN\Source\lteDebugger.py”，第 2 行，在
  导入 anomalyChecker.DLthput
文件“C:\Users\manojtut\Desktop\Project_LTE_SVN\Source\anomalyChecker\DLthput.py”，第 1 行，在

```

我已经阅读了几乎所有可用的文档和 Guido 的包内导入指南。另外，我想我的一切都在正确的地方。我在这里错过了什么吗？请指出。提前非常感谢。:) :)

编辑 1：Amber 的回答解决了提到的问题。因此， lteDebugger.py 通过导入所有其他模块可以正常工作。现在，另一个问题是，我无法解决的是......当我想编译/解释（无论你想调用什么） DLThput.py/ULthput.py 时，它显示与上面相同的错误...... . ValueError: 尝试相对导入超出顶级包。我还有其他添加路径到 sys hacks 的解决方案吗？我真的不想这样做，除非这是唯一要做的事情。那么，我该如何躲避呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:22:02.773

您正在运行`lteDebugger.py`，这意味着任何“包”必须在目录树中至少低一级 - 它们需要包含在一个文件夹中，以便 Python 将它们识别为包而不是模块（从而使相对导入工作）。

`anomalyCheck`被识别为一个包，但它的父目录不是（因为那`lteDebugger.py`是），因此您不允许使用相对导入来访问该父目录。

解决此问题的一种方法是将所有内容移动`lteDebugger.py`到子目录中，例如：

```
Source/
    debugger/
        anomalyCheck/
            __init__.py
            DLthput.py
            ULPowerStats.py
            ULThput.py
        config/
            __init__.py
            configure.py
        parserTools/
            __init__.py
            logParser.py
        utilities/
            __init__.py
            plotLogResults.py
        __init__.py
    lteDebugger.py 
```

然后`lteDebugger.py`会做类似的事情`import debugger.anomalyCheck.DLthput.py`。

# java - 在 struts2-hibernate 中管理数据编辑的正确方法是什么？

> ID：10793410
> 
> 赞同：0
> 
> 时间：2012-05-29T05:16:56.170
> 
> 标签：java, hibernate, struts2, ognl

我正在使用 Struts2，Hibernate 3.5。我有复杂的对象图。因此，每次以编辑模式提交数据时，我都需要确保请求中所有对象节点的 id 都可用。因此，每次在 UI 上显示对象时，我都会将所有 id 作为隐藏文件保存在 jsp 中。这是管理数据编辑的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:48:31.467

您可以创建一个 bean 类并使用 jsp 表单注册它。这个 bean 类将具有 jsp 具有的所有字段。每当您的 jsp 将被修改时，这个 bean 类会自动更新自身。因此，您不必在隐藏字段中维护值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:22:43.567

您的 bean 类将扩展 ActionForm 公共类 HolidayBookingForm 扩展 ActionForm {

```
 private String entryId;

    private String title;

    private String startDate;

    private String days;

    //getters and setters omitted

    public void readFrom(HolidayBooking booking)
    {
        if (booking != null)
        {
            if (booking.getEntryId() != 0)
                this.entryId = String.valueOf(booking.getEntryId());
            if (booking.getEntryId() != 0)
                this.days = String.valueOf(booking.getDays());
            if (booking.getStartDate() != null)
                this.startDate = new java.sql.Date(booking.getStartDate().getTime()).toString();
            this.title = booking.getTitle();
        }
    }

    public void writeTo(HolidayBooking booking)
    {
        if (booking == null)
            throw new IllegalArgumentException("Booking cannot be null");

        if (this.days != null)
            booking.setDays(Integer.parseInt(this.days));
        if (this.entryId != null)
            booking.setEntryId(Long.parseLong(this.entryId));

        // don't accept empty Strings
        if (this.title != null && this.title.trim().length() > 0)
            booking.setTitle(title);

        // assume validation has been handled
        if (this.startDate != null && this.startDate.trim().length() > 0)
            booking.setStartDate(java.sql.Date.valueOf(startDate));

    }

} 
```

# php - 警告：在 sphinx 中发现重复的文档 ID

> ID：10793412
> 
> 赞同：1
> 
> 时间：2012-05-29T05:17:07.727
> 
> 标签：php, search, indexing, centos, sphinx

我试图创建我的狮身人面像索引。在索引它时显示这种警告

警告：发现重复的文档 ID 并跳过索引。

为什么会这样。我该如何解决这个问题？

请帮我

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:26:49.607

Sphinx 的基本要求是它需要唯一的整数文档 ID。有关 Sphinx 如何在索引和搜索中处理重复 ID 的更多信息，请参见此处：

[http://sphinxsearch.com/blog/2010/03/15/the-clone-wars-how-sphinx-handles-duplicates/](http://sphinxsearch.com/blog/2010/03/15/the-clone-wars-how-sphinx-handles-duplicates/)

# signalr - SignalR 中的多个集线器（设计）

> ID：10793413
> 
> 赞同：16
> 
> 时间：2012-05-29T05:17:08.783
> 
> 标签：signalr

使用 SignalR，我想知道在以下情况下设置集线器的最佳方法是什么：假设我有一个网络赌场应用程序（只是为了好玩），它有三个游戏，扑克、二十一点和老虎机。扑克和二十一点都是多人游戏，因此它们具有聊天功能，而老虎机则没有。好的，为了支持这一点，我正在考虑以下列方式设置我的集线器。

BaseHub（处理扑克、二十一点和老虎机常见的连接内容）

PokerHub : BaseHub（处理扑克游戏）

BlackjackHub : BaseHub（处理二十一点游戏）

SlotsHub : BaseHub（处理老虎机游戏）

ChatHub（处理聊天功能）

我正在考虑让这个网络应用程序的扑克页面连接到 PokerHub 以及 ChatHub 和二十一点页面会做类似的事情。Slots 页面显然只会连接到 SlotsHub。

现在，我不确定的是：Poker/BlackjackHub 页面是否应该同时连接到 PokerHub/BlackjackHub 和 ChatHub，或者有什么方法可以让它们只连接到 PokerHub/BlackjackHub 并将聊天功能委托给 Chat中心？在那种情况下，我可能会创建一个接口 IHasChat 或类似的东西。在任何一种情况下，ChatHub 是否也应该扩展 BaseHub？目前 BaseHub 只实现了 IConnected、IDisconnect 并且还处理了基本的 Group 功能（JoinGroup、LeaveGroup）。另外，BaseHub 是否应该是共享实例（单例）？

最后，如果您认为我的做法完全错误，请告诉我。这是我的第一个 SignalR 项目，我知道我不是这方面的专家。另外，我知道这里实际上有几个问题。如果您能回答其中任何一个或所有问题，无论哪种方式，我都非常感激。

谢谢你，汤姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T22:41:35.417

您可以拥有任意数量的集线器，因为只有一个与 SignalR 服务器的连接。集线器是一种 RPC 实现，并且都共享相同的连接。 [js 客户端集线器上的 Wiki 页面](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)显示如下连接：

```
$.connection.hub.start() 
```

其中 hub 是 js 客户端内部的命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-08T11:27:35.020

实际上，它从不需要在服务器上有多个集线器类。就像您需要多个互联网连接一样。一个用于冲浪游戏，另一个用于社交媒体，第三个用于不同的东西。

在服务器端创建单个 Hub 类。

你应该做的是让不同的客户端使用 JS。

例如，在我的网站上，我有两件事。实时聊天和离线通知。对于chat.aspx，我有一个名为“chat”的变量充当集线器。对于所有其他页面，我有一个名为 NotificationHub 的变量。

您可以执行以下操作

```
var pocker = $.connection.hub;
var blackJack = $.connection.hub;
var other = $.connection.hub; 
```

这种方式调用各自的方法此外，如果您想识别谁调用了您的服务器方法，您可以附加查询字符串参数。

```
pocker.connection.qs = "type=pocker"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:01:01.870

这已经有一段时间了，所以你可能不再需要答案了，但是......这里什么都没有。

我是 SignalR 的新手，所以我有点不确定您的设计会如何影响其性能。如果这不是问题，我可能会考虑这样的对象模型：

```
abstract BaseHub : Hub;
abstract MultiplayerHub : BaseHub; // (Handles chat and other MP necessities)
BlackJackHub : MultiplayerHub;
PokerHub : MultiplayerHub;
SlotsHub : BaseHub; 
```

我想不出这种设计会导致 SignalR 出现任何问题的任何原因，但同样，我没有太多经验可以继续。

# linq - ASP.NET 急切加载周期

> ID：10793421
> 
> 赞同：1
> 
> 时间：2012-05-29T05:18:20.570
> 
> 标签：linq, entity-framework, eager-loading

我在 EF 4.1 Model-First 中急切加载儿童时遇到问题。

我有 2 个实体，Person 和 Job。从 Person 到 Job 的关联 OneToMany 和从 Job 到 Person 的关联 OneToMany。（这只是一个例子）

当我做：

```
dbContext.Person.Include(i => i.Job) 
```

我得到一个 Person 'p' 实体，它在第一个关联上与 Job 'j' 有一个链接，在第二个关联上，'j' 与'p' 有一个链接，依此类推..

我有一个“无限”循环。

例如，我想告诉 EF：

```
dbContext.Person.Include(i => i.Job.NotInclude(j => j.Person)) 
```

我希望我已经很好地解释了自己。

谢谢！

# c# - 从 C# 中的二维数组映射

> ID：10793423
> 
> 赞同：0
> 
> 时间：2012-05-29T05:18:32.363
> 
> 标签：c#, arrays

我想在 C# 中使用二维数组，例如：

```
string[,] a = new string[,]
{
    {"aunt", "AUNT_ID"},
    {"Sam", "AUNT_NAME"},
    {"clozapine", "OPTION"},
}; 
```

我的要求是，当我传递`"aunt"`给这个数组时，我想`AUNT_ID`从二维数组中得到对应的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:54:40.893

正如其他人所说， a`Dictionary<string, string>`会更好 - 您可以使用*集合初始化程序*来简单地创建它：

```
Dictionary<string, string> dictionary = new Dictionary<string, string>
{
    {"ant", "AUNT_ID"},
    {"Sam", "AUNT_NAME"},
    {"clozapine", "OPTION"},
}; 
```

如果您确信您的密钥在字典中，并且您很高兴抛出异常：

```
string value = dictionary[key]; 
```

或者如果不是：

```
string value;
if (dictionary.TryGetValue(key, out value))
{
    // Use value here
}
else
{
    // Key wasn't in dictionary
} 
```

如果确实需要使用数组，如果可以改成多维数组（`string[][]`），可以使用：

```
// Will throw if there are no matches
var value = array.First(x => x[0] == key)[1]; 
```

或者再次更加谨慎：

```
var pair = array.FirstOrDefault(x => x[0] == key);
if (pair != null)
{
    string value = pair[1];
    // Use value here
}
else
{
    // Key wasn't in dictionary
} 
```

不幸的是，LINQ 在矩形数组上效果不佳。诚然，编写一个方法来让它“有点”像数组数组一样被对待可能不会太难......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:20:32.937

用于`Dictionary<string, string>`：

```
Dictionary<string, string> arr = new Dictionary<string, string>();
arr.Add("ant", "AUNT_ID");
arr.Add("Sam", "AUNT_NAME");
arr.Add("clozapine", "OPTION");

string k = arr["ant"]; // "AUNT_ID" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T05:42:33.913

对您来说最好的选择是使用 Dictionary，但如果您仍想使用 2D 数组，您可以尝试以下方法

```
 string[,] a = new string[,]
                    {
                        {"ant", "AUNT_ID"},
                        {"Sam", "AUNT_NAME"},
                        {"clozapine", "OPTION"},
                    };
    string search = "ant";
    string result = String.Empty;
    for (int i = 0; i < a.GetLength(0); i++) //loop until the row limit
    {
        if (a[i, 0] == search)
        {
            result = a[i, 1];
            break; //break the loop on find 
        }

    }
    Console.WriteLine(result); // this will display AUNT_ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T05:21:10.017

看起来你想要一本字典：

```
Dictionary<string, string> a = new Dictionary<string, string>();
a.Add("ant", "AUNT_ID");
a.Add("Sam", "AUNT_NAME");
a.Add("clozapine", "OPTION");

string s = a["ant"]; // gets "AUNT_ID" 
```

* * *

检查字典中是否存在键：

```
if (a.ContainsKey("ant")) {
  ...
} 
```

或者：

```
string s;
if (a.TryGetValue("ant", out s)) {
  ...
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-29T05:26:43.920

```
for (i=0; i<3; i++){
    if (!String.Compare(a[i][0], string)){
        stored_string= a[i][1];
    }
} 
```

# android - 简单的持续通知，允许音频在后台继续播放

> ID：10793430
> 
> 赞同：0
> 
> 时间：2012-05-29T05:19:00.800
> 
> 标签：android, cordova, phonegap-plugins

我决定尝试制作一个从我的服务器流式传输实时音频的小 Android 应用程序。我正在为音频使用 HTML5 音频标签。但是，在某些设备上，当用户访问浏览器或他们的消息时，音乐会停止播放。我是否需要创建一个持续通知以便音频继续播放？或者，还有其他更好的东西吗？我也在使用PhoneGap，我不知道是否有我错过的插件可以解决这个问题。我正在尝试自己学习所有这些，但此时我只是感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:00:02.667

我认为这最终成为应用程序管理器关闭应用程序的问题。

# javascript - html 右侧的两行两个按钮，不会破坏左侧

> ID：10793433
> 
> 赞同：1
> 
> 时间：2012-05-29T05:19:08.570
> 
> 标签：javascript, html, css

我正在尝试在我的网页上制作一个由四个按钮组成的菜单，我希望顶部有两个按钮，底部有两个按钮。我有以下 CSS 代码：

```
.navButton {
padding: 3%;
float:right;
background:#C0C0C0;
margin-left:1%;
margin-right:1%;
} 
```

然后使用 br 使后两个下降，但随后它破坏了页面左侧的所有内容。如何使 4 个大小相同的按钮均匀地位于右上角。现在因为单词的大小略有不同，所以按钮有点不同，我希望它们完全相等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:17:51.850

试试[这个](http://shaquin.tk/experiments/menu2.html)。

我刚刚成功了。

只需查看源代码并复制 HTML+CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:51:47.290

输入两个 a 标签后试试这个

```
<div style="clear:right"></div> 
```

并删除 br 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:14:46.807

在两个 a 标签之后插入：

```
<div style="clear:both"></div> 
```

# django - URLConf：根据用户权限限制对通用视图的访问 - 检查 url 参数

> ID：10793435
> 
> 赞同：0
> 
> 时间：2012-05-29T05:19:46.310
> 
> 标签：django, url, authentication, django-class-based-views

再会，

我的 URLConf 中有以下内容：

```
from django.contrib.auth.decorators import user_passes_test

urlpatterns = patterns('',
    (r'^manage/(?P<pk>\d+)/$', user_passes_test(lambda u: (u.is_authenticated()))
    UpdateView.as_view(model=Organization, success_url="/organizations/updated/", template_name="organization/manage.html",))), 
```

因此，只有经过身份验证的用户才能通过 url 访问视图功能。

问题：除了对通用视图进行子类化之外，有没有办法检查嵌入在 URL 中的 pk？我想进一步验证尝试访问更新功能的用户是否具有所需的权限。

[文档](https://docs.djangoproject.com/en/dev/topics/class-based-views/#decorating-in-urlconf)没有详细介绍这个细节，我正在努力寻找任何其他参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:56:59.637

如果您希望扩展默认功能，特别是如果它具有像用户权限这样微妙的功能，那么唯一真正的选择是子类化。我已经转向对我所有的视图进行子类化，即使所有类定义都是 a `template_name`，因为以后扩展它要简单得多。

子类化使您可以完全控制您的代码。没有必要重写像 or 这样的关键方法——像or`get()`这样的`post()`辅助方法可以处理您需要的大多数检查和验证。`get_context_data()``form_valid()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:53:46.193

是的，你只需要更熟悉 python 装饰器：

```
def my_custom_check(view):
  def view_wrap(request, *args, **kwargs):
    pk = kwargs['pk']
    # do your check here
    return view(request, *args, **kwargs)
  return view_wrap 
```

像这样使用它：

```
(r'^manage/(?P<pk>\d+)/$', my_custom_check(UpdateView.as_view(model=Organization, ...))), 
```

# javascript - 在文本后附加换行符

> ID：10793439
> 
> 赞同：4
> 
> 时间：2012-05-29T05:20:30.533
> 
> 标签：javascript, jquery

我正在尝试使用以下代码将换行符附加到我从 xml 页面加载的一行文本中：

```
$("#questionNumber").text(questionInARow).append('<br>'); 
```

文本加载正常，但附加被忽略。我也试过这个：

```
$("#questionNumber").text(questionInARow).html("<br>"); 
```

这同样被忽略。是我的语法错误，还是我的方法不好？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:30:13.727

**标记**

```
<div id='temp'></div> 
```

**JS**

```
$('#temp').text("hello").html($("#temp").html() + "<br/> how do you do? "); //This is one way
$('#temp').html("hello").append("<br/> how do you do?"); //Yet another way using the 'append' method. 
```

**[小提琴](http://jsfiddle.net/qhVWa/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T05:43:45.327

它比你想象的要简单得多：

```
$("#questionNumber").html( questionInARow + "<br/>" ); 
```

小提琴：http: [//jsfiddle.net/8jyqH/](http://jsfiddle.net/8jyqH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:23:53.100

看起来

```
<br/> 
```

是一个标签。但是您使用了 jQuery 的 .html() 和 .append() 方法，它们都将内容插入到内容节点中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-06T06:23:58.920

这对我有用

```
success: function (data) {                      
                    $("#textArea").html(data["Name"] + "\n" + data["Address"] + "\n" + data["Phone"]);
                }, 
```

你可以这样使用

```
$("#textArea").html("Line 1 Text \n Line 2 Text \n Line 3 Text"); 
```

# java - finally 阻止行为不同

> ID：10793443
> 
> 赞同：0
> 
> 时间：2012-05-29T05:20:44.190
> 
> 标签：java, try-catch, try-catch-finally, finally

我有这样的条件

```
String str = null;

try{
  ...
  str = "condition2";
}catch (ApplicationException ae) {
  str = "condition3";
}catch (IllegalStateException ise) {
  str = "condition3";
}catch (Exception e) {
  str = "condition3";
}

if(str == null){
  str = "none";
} 
```

现在我想总结一下`str = "condition3";`。由于 finally 块总是运行，因此无法满足我的需求。还有什么可以做的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T05:22:38.230

从 Java 7 开始，您可以在单个块中[捕获多种异常类型。](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html)`catch`代码看起来像这样：

```
String str = null;

try {
    ...
    str = "condition2";
} catch (ApplicationException|IllegalStateException|Exception ex) {
    str = "condition3";
} 
```

顺便说一句：您发布的代码以及我的 Java 7 代码都可以简单地折叠成`catch (Exception e)`，因为它是和[`Exception`](http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html)的超类。[`ApplicationException`](http://docs.oracle.com/javase/7/docs/api/org/omg/CORBA/portable/ApplicationException.html)[`IllegalStateException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:26:04.037

您可以使用 Java 7 异常处理语法。Java 7 支持在一个 catch 块中处理多个异常。经验 -

```
String str = null;

try{
  ...
  str = "condition2";
}catch (ApplicationException | IllegalStateException | Exception  ae) {
  str = "condition3";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T05:26:41.987

```
try{
  ...
  str = "condition2";
}catch (Exception ae) {
 str = "condition3";
} 
```

因为所有其他都是**Exception**的子类。如果你想显示不同的消息，那么可以尝试如下

```
try{
   ...
   str = "condition2";
}catch(ApplicationException | IllegalStateException e){
if(e instanceof ApplicationException)
    //your specfic message
    else if(e instanceof IllegalStateException)
    //your specific message
    else
        //your specific message
    str = "condition3";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T05:34:33.180

如果您使用 Java 7 在单个 catch 块中捕获多个异常的特性，则必须添加“final”关键字

```
catch (final ApplicationException|IllegalStateException|Exception ex) { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T05:29:41.933

当您在`ApplicationException`和`IllegalStateException`捕获块和一般异常`Exception`捕获块中做同样的事情时，您可以删除`ApplicationException`和`IllegalStateException`阻止。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T05:31:32.723

我将在这里冒险并提供以下内容：

```
String str = null;

 try{
     ...
     str = "condition2";
 }catch (Throwable e) {
    str = "condition3";
 }
 finally {
     if(str == null){
         str = "none";
     }
 } 
```

如果这不是您所说的“总结”，请澄清。

请阅读

[http://www.tutorialspoint.com/java/java_exceptions.htm](http://www.tutorialspoint.com/java/java_exceptions.htm) [http://docs.oracle.com/javase/tutorial/essential/exceptions/](http://docs.oracle.com/javase/tutorial/essential/exceptions/)

# sql - 控制 SQL Server Management Studio 脚本生成

> ID：10793445
> 
> 赞同：3
> 
> 时间：2012-05-29T05:20:59.477
> 
> 标签：sql, sql-server

我正在使用 SQL Server Management Studio 中的“生成脚本”功能。

生成我的脚本时，日期时间值以十六进制显示。有没有办法让它们以纯文本形式出现？

谢谢你。

编辑1：示例：`INSERT [dbo].[CnfgTableOption] ([tableoptionkey], [tablekey], [optiondesc], [optiondescshort], [sortorder], [activeind], [createddate], [createdby], [modifiedby], [modifieddate], [optionaldesc1], [optionaldesc2], [label], [code1], [optnumericvalue]) VALUES (649, 128, N'MA', N'MA', 1, 1, CAST(0x00009EC800EB51F8 AS DateTime), 1, 1, CAST(0x00009EC800EB51F8 AS DateTime), NULL, NULL, NULL, NULL, NULL)`

CAST（0x00009EC800EB51F8 作为日期时间）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:19:43.233

从外观上看，没有。

脚本向导中有 31 个高级选项，但没有一个指定日期在脚本中的显示方式。

当我针对使用单个表编写数据库脚本的操作运行探查器跟踪时，将日期转换为二进制的 SQL 语句作为 SQL:BatchCompleted 事件可见：

```
SELECT [id], CAST([date_value]) AS BINARY(8)) AS [date_value] 
FROM [dbo].[example] 
```

我会问这个问题，将其转换为二进制文件是否重要？将从脚本中正确读取数据。

例子：

```
DECLARE 
  @d DATETIME,
  @b BINARY(8)

SET @d = '2012-05-25 23:59:59.123'
SELECT @b = CAST(@d  AS BINARY(8))

SELECT CAST(@b AS DATETIME) 

-----------------------
2012-05-25 23:59:59.123 
```

# android - 如何从 rss 提要中获取 xml 并将其转换为 Android 中的 Json 对象？

> ID：10793446
> 
> 赞同：0
> 
> 时间：2012-05-29T05:21:02.660
> 
> 标签：android, json, xml-parsing

我是安卓新手。我想解析 RSS 提要。我有这个来自谷歌的天气提要“http://www.google.com/ig/api?weather=%27melbourne%27”。如何获取 XML 数据并将其转换为稍后用于填充 listView 的 Json 对象？或者有没有其他快速的方法来解析 Android 中的 rss 提要？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:30:12.790

我猜你最好的选择是实现一个 SAXParser 来将 XML 内容解析为一个 Java 对象（或一个 Java 对象列表）。如果您只想将数据填充到列表视图中，我认为您不需要将其转换为 JSON。有关 SAXParser 的更多信息：Google 和 stackoverflow 搜索是您的朋友；）

# matlab - 给定子图的句柄，我可以在 MATLAB 中找到相关的子图索引吗？

> ID：10793453
> 
> 赞同：1
> 
> 时间：2012-05-29T05:22:16.480
> 
> 标签：matlab, plot, subplot

我在一个图中有多个子图。我还拥有一个子图的句柄，这是通过使用[此处](http://www.mathworks.com/matlabcentral/newsreader/view_thread/297774)`ginputax`描述的函数获得的。

我现在想从句柄中获取（整数）子图索引，所以我可以使用[subplot](http://www.mathworks.co.jp/help/techdoc/ref/subplot.html)命令绘制到子图。

```
[~, ~, ~, subplot_handle] = ginputax(1);
subplot_idx = ?function?( subplot_handle)     %# this is the bit I don't know how to do
subplot(u, v, subplot_idx);
plot(x, y); 
```

有没有简单的方法来获取这个索引？我意识到我也可以直接绘制到子图句柄，但我更愿意将索引取出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:15:36.833

从我不直接知道的情况来看，子图只是轴。

但是间接的有很多方法：

1.  您可以将信息存储在子图的`Tag`or`Userdata`中，例如。`b=subplot(2,2,3,'Tag','pos3')`- 使用`get(b,'Tag')`（我最喜欢的）
2.  您可以按顺序存储句柄，然后搜索。
3.  `Position`你可以从手柄上弄清楚使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:33:30.567

如果您已经有了子图的句柄，则可以使用`subplot(subplot_handle)`在现有子图中进行绘图。

# r - 在一张图上绘制两张图。功能线不起作用

> ID：10793454
> 
> 赞同：8
> 
> 时间：2012-05-29T05:22:18.223
> 
> 标签：r

我想在一个图上绘制两个图。我读[了这篇文章](https://stackoverflow.com/q/2564258/1082727)，但功能`lines`不起作用，没有任何反应。我不知道可能是什么问题。有任何想法吗？

编辑。可重现的例子：

```
> tr_error
[1] 0.2314984 0.2314990 0.2314981 0.2314955 0.2314955 0.2314943 0.2314912
[8] 0.2314924
> tst_error
[1] 0.001461264 0.001461767 0.001461001 0.001459936 0.001459626 0.001458594
[7] 0.001457719 0.001458288
> plot(tst_error, type='l')
> lines(tr_error, type='l', col='red') 
```

也许有第二个情节，但它更高？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-29T06:00:14.910

它“不起作用”，因为 y 限制不包括第二个向量的范围。

```
 plot(tst_error, type='l', ylim=range( c(tst_error, tr_error) ) )
 lines(tr_error, type='l', col='red') 
```

这不会是一个特别有趣的情节，因为这两个向量的规模是如此不同。红线看起来像一条完全平坦的线。

# php - 无法使用 JS 定位 div

> ID：10793457
> 
> 赞同：0
> 
> 时间：2012-05-29T05:22:39.727
> 
> 标签：php, javascript, html, target, capture

我正在尝试使用 js 定位嵌套在某个 php 中的 div，但无论我做什么，我似乎都无法定位它。这是供参考的代码：php：

```
echo "<li>"."<div id=\"countryclick\">". "<a href=\"?Continent=$Continent&Country=$Country\">" . $Country . " ". "</a>" . "</div>"."</li>"; 
```

js：

```
$("#countryclick").click(function(){
    $("#country").hide();
    $("#city").show();
}); 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:30:22.617

```
div#countryclick 
```

是动态创建的，因此您可以使用jQuery 的[.live](http://api.jquery.com/live/)。喜欢：

```
$("#countryclick").live("click",function(){
   //code here
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:05:07.730

从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。如果你使用一些旧版本的 jQuery，你应该使用 .delegate() 而不是 .live()。

[访问这里 live()](http://api.jquery.com/live/)和[Here on()](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:26:24.987

我不确定您是否正在动态创建 div。如果要动态创建它，则必须使用 live 方法，如下所示：

```
$("#countryclick").live("click",function(){
    $("#country").hide();
    $("#city").show();
}); 
```

请检查一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T05:36:20.430

```
<li>
    <div id="countryclick">
      <a href="?Continent=<?php echo $Continent; ?>&Country=<?php echo $Country; ?>">
        LINK HERE
      </a>
    </div>
</li>
<div id="country">country</div>
<div id="city">city</div>

$("div#countryclick").live("click",function(){
    $("#country").hide();
    $("#city").show();
}); 
```

这应该工作。

# java - primefaces 命令按钮操作不适用于级联下拉菜单

> ID：10793458
> 
> 赞同：1
> 
> 时间：2012-05-29T05:22:52.757
> 
> 标签：java, jsf, primefaces

我的 xhtml 页面上有级联下拉菜单，并且工作正常，但是当我从子级或级联下拉菜单的第二个下拉菜单中选择一个值后单击命令按钮时，出现以下错误：

```
sourceId=frm:sym[severity=(ERROR 2), summary=(frm:sym: Validation Error: Value is not valid), detail=(frm:sym: Validation Error: Value is not valid)] 
```

XHTML 代码：

```
<h:form id="frm">
    <p:selectOneMenu style="width: 150px" value="#{watchBean.exchange}">
            <f:selectItem itemLabel="NSE" itemValue="nse"/>
            <f:selectItem itemLabel="BSE" itemValue="bse"/> 
            <p:ajax update="sym" listener="#{watchBean.wow}" />
        </p:selectOneMenu> 
    <p:selectOneMenu style="width: 150px" id="sym" value="#{watchBean.scripSym}">
        <f:selectItem itemLabel="select scrip" />
        <f:selectItems var="scrip" value="#{watchBean.sl}"  itemLabel="#{scrip.scripSymbol}" itemValue="#{scrip.scripSymbol}"/>
    </p:selectOneMenu> 

    <p:commandButton label="add to watch" value="add to watch" id="btnAdd" action="#{watchBean.addUserTrack()}" ajax="false"/>              
    <p:dataTable id="dt" var="track" .....> 
```

豆子代码：

```
@javax.faces.bean.ManagedBean
@javax.faces.bean.RequestScoped
public class watchBean {
    @WebServiceRef(wsdlLocation = "WEB-INF/wsdl/localhost_8080/StatelessWebService/StatelessWebService.wsdl")
    private StatelessWebService_Service service;

    /** Creates a new instance of watchBean */
    public watchBean() {
    }
    String uname,scripSym,exchange;
    Integer scripID;
    List<UserTrack> ut;
List<MasterScrip> sl;
    public List<MasterScrip> getSl() {
        return sl;
    }

    public void setSl(List<MasterScrip> sl) {
        this.sl = sl;
    }

    public String getExchange() {

        return exchange;
    }

    public void setExchange(String exchange) {
        sl=getAllScripByExchange(exchange);
        setSl(sl);
        this.exchange = exchange;
    }

    public void wow() {
        //sl=getAllScripByExchange((String)e.getNewValue());
        // setSl(sl);
        //FacesContext.getCurrentInstance().renderResponse();
        sl=getAllScripByExchange(exchange);
    }

    public List<UserTrack> getUt() {
        HttpServletRequest req=(HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
        HttpSession session=req.getSession();
        this.uname=(String)session.getAttribute("uname");
        ut=getAllUserTrack(uname);
        return ut;
    }

    //getter setter
    public void addUserTrack() {
        HttpServletRequest req=(HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
        HttpSession session=req.getSession();
        this.uname=(String)session.getAttribute("uname");
        MasterScrip sm=getScripBySymbol(scripSym);
        scripID=sm.getScripID();
        addUserTrack(uname, scripID);
    }
} 
```

什么可能导致这个问题？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:39:38.507

将 bean 从 RequestScoped 更改为 ViewScoped，这样视图上的更改将在视图存在时保留。

编辑：

根据您的评论，您在处理列表后忘记更新数据表。改变这个

```
<p:commandButton label="add to watch" value="add to watch" id="btnAdd" action="#{watchBean.addUserTrack()}" ajax="false"/> 
```

添加`update`句子；

```
<p:commandButton label="add to watch" value="add to watch" id="btnAdd" action="#{watchBean.addUserTrack()}" ajax="false" update="dt"/> 
```

# jquery - Jquery datepicker 采用美国日期格式进行验证

> ID：10793459
> 
> 赞同：2
> 
> 时间：2012-05-29T05:23:05.180
> 
> 标签：jquery, asp.net, asp.net-mvc-3, datepicker

如果我选择日期 >12

，我会在 chrome 上收到验证消息我使用了带有语法的本地化日期选择器

```
var abc = $("#culture").val();
        $.datepicker.setDefaults($.datepicker.regional[""]);

        $("#dob").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd-mm-yy',
            yearRange: '-90:-15',
            defaultDate: '-90y'

        });
        $.datepicker.setDefaults($.datepicker.regional[abc]); 
```

另一个问题：我在控制器上以不良格式获取日期，这就是为什么我的数据库包含错误条目（日期代替月份和月份代替日期）..建议我可能的解决方案......

我发现相关的是[LINK 1](http://forum.jquery.com/topic/datepicker-with-date-validation-fails-in-webkit-browsers)

[链接2](https://stackoverflow.com/questions/6906725/unobtrusive-validation-in-chrome-wont-validate-with-dd-mm-yyyy)

[链接 3](https://stackoverflow.com/questions/6505773/custom-date-format-validation-with-jquery-datepicker-cant-get-rid-of-us-date-v)

但是以上都不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T13:54:55.083

解决方案不是那么简单，您最终应该覆盖 jquery 验证规则。[我建议使用此处MVC 3 jQuery Validation/globalizing of number/decimal field](https://stackoverflow.com/questions/5199835/mvc-3-jquery-validation-globalizing-of-number-decimal-field)中所述的 Globalize 插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:52:12.367

尝试这个：

```
$("#dob").datepicker({
    changeMonth: true,
    changeYear: true,
    dateFormat: 'mm-dd-yy',
    yearRange: '-90:-15',
    defaultDate: '-90y'
});  

var abc = $("#culture").val();  

$("#dob").datepicker("setDate", new Date(abc));

$("#dob").datepicker({
    changeMonth: true,
    changeYear:  true,
    dateFormat:  'dd-mm-yy',
    yearRange:   '-90:-15',
    defaultDate: '-90y'
}); 
```

否则，您可以将日期作为字符串，然后转换为您需要的格式。

如果您使用 jQuery 运行，则可以使用 datepicker UI 库的`parseDate`函数将字符串转换为日期：

```
var d = $.datepicker.parseDate("DD, MM dd, yy",  "Sunday, February 28, 2010"); 
```

然后使用`formatDate`方法将其变为您想要的字符串格式：

```
var datestrInNewFormat = $.datepicker.formatDate( "mm/dd/yy", d); 
```

如果您没有使用 jQuery，那么它可能不是最好的计划，因为您需要 jQuery 核心以及 datepicker UI 模块……最好遵循上面 Segfault 的建议来使用 date.js。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:18:52.117

首先，如果您使用的是 MVC，并且您显示了来自服务器的一些日期，您应该显示如下日期：

```
@Html.TextBox("InsertDate", Model.InsertDate.ToString("dd/MM/yyyy"), new { @class = "date" }) 
```

在你的 jquery 中：

```
$('.date').datepicker({ dateFormat: "dd/mm/yy" }).val(); 
```

如果您的文化是美国文化，则 ModelState.IsValid 将中断。一个肮脏的黑客是这样的：

```
var insertDateStr = ModelState.Values.ToList()[3].Value.AttemptedValue;
var insertDate = DateTime.ParseExact(insertDateStr, "dd/MM/yyyy", CultureInfo.InvariantCulture, DateTimeStyles.None); 
```

最后，对于 chrome 上的红色，只需在文本框样式中添加背景颜色白色即可。

```
@Html.TextBox("InsertDate", Model.InsertDate.ToString("dd/MM/yyyy"), new { @class = "date", @style = "background-color: white;" }) 
```

它很脏，但它有效..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-15T18:48:36.660

如果您希望 ASP.Net 以格式确认日期，请使用`<globalization culture="en-GB"/>`in 。`web.config``"dd-MM-yyyy"`

[参考](https://msdn.microsoft.com/en-us/library/hy4kkhe0(v=vs.71).aspx)

# firefox - 如何在 Firefox 中查看 dump() 消息？

> ID：10793460
> 
> 赞同：0
> 
> 时间：2012-05-29T05:23:08.450
> 
> 标签：firefox, firefox-addon

我目前正在开发一个 Firefox 扩展。我使用`dump()`函数。但是消息没有显示在控制台中。我已经更改了`browser.dom.window.dump.enabled`to `true`in的值`about:config`并从 command linelike 重新启动了 firefox `firefox.exe -console`。我仍然看不到`dump()`消息。什么可能是错的？

顺便说一句，是否有任何插件可以显示`dump()`消息而无需在命令行中重新启动 firefox `firefox -console`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:36:01.603

`-console`只有在 Windows 上才需要使用命令行开关启动 Firefox 。如果您使用的是 Linux，那么您应该简单地从终端窗口启动 Firefox。在 Mac OS X 上，控制台消息可以通过某些应用程序显示（抱歉，不记得是哪一个）。此外，`browser.dom.window.dump.enabled`仅当您从窗口绑定上下文中记录时才需要进行更改 - 在 JavaScript 模块中，无论此偏好如何，它始终有效。

如果您想让您的日志消息更容易可用，您应该使用[`Components.utils.reportError()`](https://developer.mozilla.org/en/Components.utils.reportError)（或`nsIConsoleService.logStringMessage()`如文档中所述） - 这会将消息发送到可以随时打开的常用错误控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:02:15.697

我发现这个插件在将错误/消息记录到控制台时非常有用：[https ://addons.mozilla.org/en-US/firefox/addon/console%C2%B2/](https://addons.mozilla.org/en-US/firefox/addon/console%C2%B2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T22:05:15.147

为了最终从 dump() 获得输出，我通过创建首选项`browser.dom.window.dump.file`并将其设置在**about:config**中来指定转储文件位置。

我相信我有同样的问题。我无法让 dump() 打印到 stderr 或控制台，即使我已设置`browser.dom.window.dump.enabled`为`true`. 我在 Ubuntu 14.04 上。

来源： [https ://developer.mozilla.org/en-US/docs/Mozilla/Preferences/Preference_reference/browser.dom.window.dump.file](https://developer.mozilla.org/en-US/docs/Mozilla/Preferences/Preference_reference/browser.dom.window.dump.file)

# javascript - 富文本编辑器使用 contenteditable 换行文本

> ID：10793469
> 
> 赞同：1
> 
> 时间：2012-05-29T05:24:52.683
> 
> 标签：javascript, jquery, html

我正在尝试使用 contenteditable 功能设计一个简单的富文本编辑器，并且需要一些帮助来使用这个用标签包装选择的功能（例如`<em>`：）

例子：

我从这个开始

```
<div contenteditable="true" id="editor">123<strong>abc</strong>xyz</div> 
```

选择一些文本

```
3<strong>abc</strong>x 
```

然后单击执行标签包装功能的按钮。

```
<div contenteditable="true" id="editor">12<em>3<strong>abc</strong>x</em>yz</div> 
```

如何找到选择的开始和结束以插入开始和结束标签？

我已经被困了几个小时，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:18:48.373

尝试这个：

```
var italicize = function () {
    document.execCommand('italic');
};​ 
```

每当您希望将所选文本变为斜体时，只需调用此方法即可。

见小提琴 - [http://jsfiddle.net/UdPAC/12/](http://jsfiddle.net/UdPAC/12/)

# python - 从文件中检索数据时哪个更快；[使用 open() 作为，然后循环] 或 [f.readlines，然后循环]

> ID：10793472
> 
> 赞同：-1
> 
> 时间：2012-05-29T05:25:13.740
> 
> 标签：python, performance, memory-management, file-io

我有一个大文件要阅读和处理。

这是读取和处理文件的更快方法。

```
with open('file') as file:
  for line in file:
      print line 
```

或者

```
file = open('file')
lines = f.readlines()
file.close()

for line in lines:
  print line 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:28:15.953

前者可以使用缓冲读取；后者需要先将整个文件读入内存，然后才能开始循环。

一般来说，使用前者会更好。它不会比后者*慢，并且在内存使用方面更好。*

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-29T05:32:52.457

如果您有一些基于行的大文件，我强烈建议使用以下行来实现您的目标：

```
file = open('file')

for line in f.readlines():
  print line

file.close() 
```

有2点，

1.  将所有内容读入内存绝不是一个好主意，正确的方法是通过中继（线路）读取它们
2.  Don't call lines=f.readlines(), this will also cause reading all content to memory

PS: The former "with" statement only is short for `try:open();execept:pass`; readlines is implemented using iterator, so it won't eat all your memory.

# php - 处理多个 ID 的 Javascript

> ID：10793480
> 
> 赞同：1
> 
> 时间：2012-05-29T05:26:26.383
> 
> 标签：php, javascript, html, slidedown

我是 javascript 的新手。问题是，我有多个 textarea 和 div，它们通过带有 ID 的 PHP '回显'（例如 textarea_1、textarea_2 ...），我想做一些事情，比如当 textarea 成为焦点时，只有那个特定的 textarea被聚焦的会向下滑动和扩展。

html

```
<textarea id="comment_textarea_1"></textarea>
<div id="button_block_1"><button type="submit">Submit</button><button type="submit" id="cancel_1">Cancel</button></div>

<textarea id="comment_textarea_2"></textarea>
<div id="button_block_2"><button type="submit">Submit</button><button type="submit" id="cancel_2">Cancel</button></div> 
```

Javascript

```
$(document).ready(function () {
    var $this = $(this);
    var $textareaID = $this.attr("id").replace("comment_textarea_");
    var $buttonblockID = $this.attr("id").replace("button_block_");
    var $cancelID = $this.attr("id").replace("cancel_");

    var $textarea = $('#'+$(textareaID));
    var $button = $('#'+$(buttonblockID));
    var $cancel = $('#'+$(cancelID));

$textarea.focus(function(){

    $textarea.animate({"height": "85px",}, "fast" );
    $button.slideDown("fast");
    return false;
});

    $cancel.click(function(){
    $textarea.animate({"height": "18px",}, "fast" );
    $button.slideUp("fast");
    return false;
});
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:34:25.717

我在代码中解释了它。试试这个。

```
$(document).ready(function () {
   // select all the textareas which have an id starting with 'comment_textarea'
   var $textareas = $("textarea[id^='comment_textarea']");
   $textareas.on("focus",function(){
      // now $(this) has the focused element
      $(this).animate({"height": "85px",}, "fast" );
      // find the button block of this div and animate it
      $("div[id^='button_block']",$(this)).slideDown("fast");
   });

   $textareas.on("focusout",function(){
      // now $(this) has the focused out element
      $(this).animate({"height": "18px",}, "fast" );
      // find the button block of this div and animate it
      $("div[id^='button_block']",$(this)).slideUp("fast");
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:34:09.370

我相信我明白你在尝试什么。请让我知道以下是否是您所追求的效果：

```
$("[id^='comment_textarea_']").on({
    focus: function(){
        $(this).stop().animate({ height: '85px' }, 750).next().slideDown();
    },
    blur: function(){
        $(this).stop().animate({ height: '20px' }, 250).next().slideUp();
    }        
});​ 
```

小提琴：http: [//jsfiddle.net/pwype/2/](http://jsfiddle.net/pwype/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:43:42.930

我很困惑。上面的答案集中在使用 ID 上……我上次检查这是我们拥有类属性的主要原因之一？

例如：

```
$(document).ready(function() 
{
    $('.comment-textarea').focus(function()
    {
        $(this).animate(
        {
            'height' : '85px'
        }, 'fast');
        $(this).next('.button-block').slideDown('fast');
    }).blur(function()
    {
        $(this).animate(
        {
            'height' : '18px'
        }, 'fast');
        $(this).next('.button-block').slideUp('fast');
    });
}); 
```

和 HTML：

```
<textarea id="comment_textarea_1" class="comment-textarea"></textarea>
<div id="button_block_1" class="button-block"><button type="submit">Submit</button><button type="submit" id="cancel_1">Cancel</button></div>

<textarea id="comment_textarea_2" class="comment-textarea"></textarea>
<div id="button_block_2" class="button-block"><button type="submit">Submit</button><button type="submit" id="cancel_2">Cancel</button></div> 
```

和一个小小提琴来展示它的工作原理：

[http://jsfiddle.net/ngYMh/](http://jsfiddle.net/ngYMh/)

# android - 拦截点击通知栏Android 4（平板电脑）

> ID：10793484
> 
> 赞同：0
> 
> 时间：2012-05-29T05:26:36.143
> 
> 标签：android, notifications, android-4.0-ice-cream-sandwich

有什么方法可以阻止点击 android 4 平板电脑中的通知栏。我知道没有直接的方法，但有绕过的方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:57:36.727

**不**，你不能处理通知栏点击事件。

唯一可能的是处理属于您的应用程序的通知图标的单击事件。你不能事件处理另一个通知栏图标的点击事件

# qt - QGridLayout 中的 Qt 对齐消除了调整其元素的大小

> ID：10793490
> 
> 赞同：4
> 
> 时间：2012-05-29T05:27:03.817
> 
> 标签：qt, alignment, qgridlayout

好的，所以基本上我有一个带有 QWidget 和两个按钮的简单表格，如下所示：

```
QGridLayout *layout = new QGridLayout;
layout->addWidget(viewcontainer,0,0,1,2);
layout->addWidget(reset,1,0);
layout->addWidget(done,1,1); 
```

这基本上就是我想要的，其中“重置”和“完成”是按钮。本质上它是一个 QWidget，viewcontainer，它会随着用户改变窗口大小而调整大小，而按钮的高度保持不变。但是，gridlayout 的默认设置是将内容向左对齐。如果我改变这个：

```
layout->addWidget(viewcontainer,0,0,1,2, Qt::AlignCenter); 
```

它确实是我想要的，但图形场景不再调整大小（仍然是一个小的恒定大小）。我想在将小部件与中心对齐的同时保留调整大小。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:08:59.213

我认为提供干净解决方案的最简单的解决方案是嵌套 2 个布局。

您的“外部”（父）布局应该是[QHBoxLayout ，您可以使用](http://qt-project.org/doc/qt-4.8/QHBoxLayout.html)[addLayout()](http://qt-project.org/doc/qt-4.8/qboxlayout.html#addLayout)将 QGridLayout 作为“内部”（子）布局添加到其中。

根据我的经验，您应该避免每次都设置 Qt::Alignment。它真的会弄乱你的布局。对于简单的布局，它可以工作，但对于更复杂的布局，你应该避免它。而且您永远不知道将来是否应该扩展布局，所以我的建议是使用嵌套布局。

当然，您可以为“外部”布局和“内部”布局创建一个 QWidget，但大多数时候只嵌套 2 个布局应该没问题。

你也可以使用[QSpacerItem](http://qt-project.org/doc/qt-4.8/qspaceritem.html)来微调你的布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T06:09:28.710

看看这个示例代码，我认为它可以满足您的需求：

```
#include <QApplication>
#include <QPushButton>
#include <QGraphicsView>
#include <QGridLayout>
#include <QPalette>

class MyWidget : public QWidget
{
public:
   MyWidget()
   {
       QGridLayout * layout = new QGridLayout(this);

       QGraphicsView * gv = new QGraphicsView;
       layout->addWidget(gv, 0,0, 1,2);
       layout->setRowStretch(0, 1);  // make the top row get more space than the second row

       layout->addWidget(new QPushButton("reset"), 1,0);
       layout->addWidget(new QPushButton("done"),  1,1);
   }
};

int main(int argc, char ** argv)
{
   QApplication app(argc, argv);

   MyWidget w;
   w.show();
   return app.exec();
} 
```

# javascript - 最后一个单词的jquery自动完成

> ID：10793492
> 
> 赞同：0
> 
> 时间：2012-05-29T05:27:31.860
> 
> 标签：javascript, jquery, autocomplete

我正在尝试编辑此 js 代码，以便在每个之后启动自动完成功能`non-breaking space`；无论在每个之前输入的文本是否`non-breaking space`是标签之一。因此，例如，如果我输入 PHP，那就是标签之一。但是，如果对于我输入的下一个文本，它也必须是标签之一，否则我在 PHP 之后输入的任何内容都不会激活自动完成功能。[你可以在jsfiddle](http://jsfiddle.net/BLGCQ/)上找到这个例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:41:33.150

我认为您正在寻找这样的插件：

[http://levycarneiro.com/projects/tag-it/example.html](http://levycarneiro.com/projects/tag-it/example.html)
- 或 - [http://code.drewwilson.com/entry/autosuggest-jquery-plugin](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)

基本上你需要寻找“jQuery Autocomplete Tags”，而不仅仅是“jQuery Autocomplete”。

# jpa - JPA MEMBER OF with PATTERN

> ID：10793495
> 
> 赞同：0
> 
> 时间：2012-05-29T05:27:41.080
> 
> 标签：jpa

在 JPA 中，我可以将 *pattern_value* 与**MEMBER OF**一起使用吗？

```
WHERE '%abc_' MEMBER OF e.keywords 
```

这里引用了 SPEC，我不认为它是用英文写的。:)

```
collection_member_expression ::=
    entity_or_value_expression [NOT] MEMBER [OF] collection_valued_path_expression
entity_or_value_expression ::=
    single_valued_object_path_expression |
    state_field_path_expression |
    simple_entity_or_value_expression
simple_entity_or_value_expression ::=
    identification_variable |
    input_parameter |
    literal 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:33:41.477

MEMBER OF 是一种旧的 JPQL 语法，我只会使用 JOIN 或子选择，因为它们更清晰。

```
Select e from Employee e join e.keywords k where k like '%abc' 
```

# xamarin.ios - 如何关闭子视图（UIView）

> ID：10793497
> 
> 赞同：0
> 
> 时间：2012-05-29T05:27:44.910
> 
> 标签：xamarin.ios

我使用带有标签、文本和按钮的子视图 (UIView) 连接到服务器。工作正常。完成并成功后，我需要关闭子视图以恢复其父视图。这发生在子视图中 UIAlertView 的 OK 按钮的委托中。（相当于 VB.net 中的 Me.Close）有什么建议吗？到目前为止找不到任何文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:06:52.280

用于`UIView.RemoveFromSuperview()`删除它，请参阅[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)。我也会呼吁`Dispose()`观点。

另一种选择是使用`UIViewController`and `PresentModalViewController()`，这通常是您在另一个上显示弹出视图的方式。

# css - 如何跨浏览器垂直对齐文本

> ID：10793503
> 
> 赞同：3
> 
> 时间：2012-05-29T05:29:02.887
> 
> 标签：css, firefox, google-chrome, cross-browser, vertical-alignment

请注意，我已经浏览了有关该主题的现有链接，但似乎对我的情况没有帮助。

所有人都建议了一种如何垂直移动文本以使其看起来对齐的方法。我的问题是它已经在 Chrome 中对齐，所以当我尝试为 Firefox 对齐文本时，它会在 Chrome 中对齐文本。

请在 Firefox (v12) 和 Chrome (v19) 中打开以下链接。

> [http://jsfiddle.net/UQ4D5/](http://jsfiddle.net/UQ4D5/)

您会注意到它在 Firefox 中向顶部移动，但在 Chrome 中完全对齐。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:39:20.777

你的 CSS 中有两个属性

```
 display: table-cell;
    vertical-align: middle; 
```

检查现场演示[http://jsfiddle.net/UQ4D5/5/](http://jsfiddle.net/UQ4D5/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T05:45:29.160

学习使用[reset.css](http://meyerweb.com/eric/tools/css/reset/)或[normalize.css](http://necolas.github.com/normalize.css/)来防止浏览器渲染模型的细微差异。

然后使用[height=line-height](http://dabblet.com/gist/2822826)技巧：

```
div {
    font-size: 100px;
    text-align: center;
    height: 120px;
    line-height: 120px;
    border: 1px solid black;
} 
```

**铬指标：**
![在此处输入图像描述](../Images/a547ebc896c12d5d4da20d19c84dd7fd.png)
**火狐指标：**
![在此处输入图像描述](../Images/3698896377cd8e165dcc4cbf3fdc1d64.png)

两种情况下的高度相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:36:51.697

该问题基于浏览器默认样式表。我建议您使用正确的[重置样式表](http://bit.ly/M0s6H4)甚至[normalize.css](http://necolas.github.com/normalize.css/)

# python - “？：”在 Python 正则表达式中是什么意思？

> ID：10793504
> 
> 赞同：8
> 
> 时间：2012-05-29T05:29:09.280
> 
> 标签：python, regex

下面是 Python 正则表达式。里面的`?:`意思是什么？表达的整体作用是什么？它如何匹配 MAC 地址，例如“ `00:07:32:12:ac:de:ef`”？

```
re.compile(([\dA-Fa-f]{2}(?:[:-][\dA-Fa-f]{2}){5}), string) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T05:31:36.083

它`(?:...)`表示一组非捕获分组括号。

通常，当您编写`(...)`正则表达式时，它会“捕获”匹配的材料。当您使用非捕获版本时，它不会捕获。

在正则表达式与特定字符串匹配后，您可以使用包中的方法获取[正则表达式](http://docs.python.org/howto/regex.html)匹配的各个部分。[`re`](http://docs.python.org/library/re.html#module-re)

* * *

> 这个正则表达式如何匹配 MAC 地址“00:07:32:12:ac:de:ef”？

这与您最初提出的问题不同。但是，正则表达式部分是：

```
([\dA-Fa-f]{2}(?:[:-][\dA-Fa-f]{2}){5}) 
```

最外面的一对括号是捕获括号；当您成功对字符串使用正则表达式时，它们周围的内容将可用。

该`[\dA-Fa-f]{2}`部分匹配一个数字 ( `\d`) 或一对十六进制数字`A-Fa-f]`，`{2}`后跟一个非捕获分组，其中匹配的材料是冒号或破折号 (`:`或`-`)，后跟另一对十六进制数字，整个重复正好 5次。

```
p = re.compile(([\dA-Fa-f]{2}(?:[:-][\dA-Fa-f]{2}){5}))
m = p.match("00:07:32:12:ac:de:ef")
if m:
    m.group(1) 
```

最后一行应该打印字符串“00:07:32:12:ac:de”，因为这是第一组 6 对十六进制数字（在字符串中总共七对中）。事实上，外部分组括号是多余的，如果省略，`m.group(0)`也可以使用（即使使用它们也可以）。如果需要匹配 7 对，则将 5 更改为 6。如果需要拒绝它们，则将锚点放入正则表达式中：

```
p = re.compile(^([\dA-Fa-f]{2}(?:[:-][\dA-Fa-f]{2}){5})$) 
```

插入符`^`匹配字符串的开头；美元`$`匹配字符串的结尾。使用 5，这与您的示例字符串不匹配。用 6 代替 5，它将与您的字符串匹配。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T05:30:57.597

使用`?:`as in`(?:...)`使组在替换期间不被捕获。在查找期间它没有任何意义。

**您的 RegEx 意味着**

```
r"""
(                   # Match the regular expression below and capture its match into backreference number 1
   [\dA-Fa-f]          # Match a single character present in the list below
                          # A single digit 0..9
                          # A character in the range between “A” and “F”
                          # A character in the range between “a” and “f”
      {2}                 # Exactly 2 times
   (?:                 # Match the regular expression below
      [:-]                # Match a single character present in the list below
                             # The character “:”
                             # The character “-”
      [\dA-Fa-f]          # Match a single character present in the list below
                             # A single digit 0..9
                             # A character in the range between “A” and “F”
                             # A character in the range between “a” and “f”
         {2}                 # Exactly 2 times
   ){5}                # Exactly 5 times
)
""" 
```

* * *

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:32:04.497

`(?:...)`表示非自然组。该组将不会被捕获。

# json - SuperObject 序列化私有变量而不是属性

> ID：10793507
> 
> 赞同：3
> 
> 时间：2012-05-29T05:29:33.163
> 
> 标签：json, delphi, pascal, rtti, superobject

我有以下代码可以序列化一个动态的类数组。出于某种原因，SuperObject 序列化私有变量而不是类属性名称。谁能建议如何在 SuperObject 中解决此问题？

```
class function TJSON.AsJSON<T>(AObject: T; Indent: Boolean = False): string;
var
  Ctx: TSuperRttiContext;
begin
  Ctx := TSuperRttiContext.Create;
  try
    Result := Ctx.AsJson<T>(AObject).AsJSon(Indent);
  finally
    Ctx.Free;
  end;
end;

type
  TMyClass = class
  private
    FName_: String;
    FAge_: Integer;
  public
    property Name: String read FName_ write FName_;
    property Age: Integer read FAge_ write FAge_;
  end;

procedure TFormTest.Button27Click(Sender: TObject);
var
  MyClassArray: TArray<TMyClass>;
  MyClass1, MyClass2: TMyClass;
begin
  MyClass1 := TMyClass.Create;
  MyClass1.Name := 'Joe';
  MyClass1.Age := 10;

  MyClass2 := TMyClass.Create;
  MyClass2.Name := 'Dan';
  MyClass2.Age := 13;

  SetLength(MyClassArray, 2);
  MyClassArray[0] := MyClass1;
  MyClassArray[1] := MyClass2;

  Memo1.Text := TJSON.AsJSON<TArray<TMyClass>>(MyClassArray);
end; 
```

上面的代码生成以下 JSON：

```
[{"FName_":"Joe","FAge_":10},{"FName_":"Dan","FAge_":13}] 
```

我所追求的是以下 JSON：

```
[{"Name":"Joe","Age":10},{"Name":"Dan","Age":13}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:30:48.790

我认为目前这是不可能的，而且你可能打了[`this issue`](http://code.google.com/p/superobject/issues/detail?id=16). 即使是 JSON 编组中的 Delphi XE2 Datasnap[`serializes private`](https://stackoverflow.com/a/10105428/960757)字段，在我看来，这只是在不考虑限制的情况下为新的扩展 RTTI 提供了更深层次的可见性的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:37:47.240

据我所知，RTTI 只对`published`属性进行操作（我可能错了），但我认为您应该简单地将属性访问级别切换为`published`以获取所需的 JSON 字符串。

# java - 检测用户何时在带有打印屏幕的窗口中截屏？

> ID：10793508
> 
> 赞同：3
> 
> 时间：2012-05-29T05:29:33.927
> 
> 标签：java, screenshot, printscreen

因此，我需要在我的应用程序中检测用户何时使用打印屏幕键盘按钮在 Windows 中截屏。我注意到 Picasa 会这样做并通知用户，这在我的聊天软件中非常有用。即使窗口没有焦点，它也需要能够检测到它。有人知道我会怎么做吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:41:24.727

KeyEvent 类有一个称为 VK_PRINTSCREEN 的键代码，它表示 PrintScreen 键...

要听它被按下，你会写一个类似这样的keylistener......

```
public class PrintScrnListener implements KeyListener {  
    public void keyPressed( KeyEvent e ) {  
        if (e.getKeyCode() == KeyEvent.VK_PRINTSCREEN ) {  
            // Do whatever...  
        }  
    }  
    public void keyReleased( KeyEvent e ) {}  
    public void keyTyped( KeyEvent e ) {}  
} 
```

# javascript - WinCE 5.0 中 ActiveXObject("FILECTL.FileSystem") 的支持 dll 是哪个以及如何使用它？

> ID：10793509
> 
> 赞同：1
> 
> 时间：2012-05-29T05:29:38.397
> 
> 标签：javascript, activex, windows-ce

我想通过 ASP 读取 WinCE 5.0 设备文件系统中的 .ini 文件。为此我使用了 ActiveXObject("FILECTL.FileSystem")。但是，在脚本 Microsoft JScript 运行时错误中获取错误为 Parse 错误：'800a01ad' 描述：自动化服务器无法创建对象 应该使用哪个 dll？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:11:42.590

该`FILECTL.FileSystem`对象是旧的 eMbedded Visual Basic 运行时中的 COM 对象，大约在 2003 年被弃用。我刚刚检查了 Platform Builder 6.0 树，不存在名为“FILECTL”的文件，也没有注册表项（用于注册 COM 组件）存在。我将由此得出结论，至少从 6.0 开始，它不存在。它很可能在 5.0 中也不存在，因为在 CE 5.0 发布之前很久就删除了 eVB 运行时。

一般来说，如果您需要从网页访问设备资源，则需要编写自己的 COM 组件（实现`IObjectSafety`浏览器访问它）并将其包含在您的操作系统映像中。

# windows-phone-7 - 无法在 WP7 项目中加载设计页面

> ID：10793515
> 
> 赞同：0
> 
> 时间：2012-05-29T05:30:19.950
> 
> 标签：windows-phone-7

我已经创建了一个 WP7 项目。在我为我的笔记本电脑重新安装 Windows 操作员之后。我打开了那个项目，但它无法加载设计页面并显示一条消息。

[屏幕截图消息](https://lh5.googleusercontent.com/-JrqWf5_NB60/T8RdAFV09PI/AAAAAAAAAVQ/NLmWR_9x_GA/s606/Capture.jpg)

我无法解决这个错误。请给我一些解决方案。感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:45:34.827

单击“单击此处重新加载设计器”，看看问题是否解决。

如果没有，请重新启动 Visual Studio，然后重新构建它。希望这可以解决您的问题。

# ios - 关于 CoreText 内存增长

> ID：10793517
> 
> 赞同：2
> 
> 时间：2012-05-29T05:30:46.290
> 
> 标签：ios, memory, core-text

我使用 CoreText 显示文本，但我发现 Instrument Allocations 的内存增长。我展示和关闭 ViewController 和 Mark Heap！

我发现很多对象没有释放。像这样：大小：304 负责库：CoreGraphics 负责调用者：mem_alloc

仪器显示这些对象是由 CTFrameDraw 创建的。

我确定所有的 Core Fondation 对象都调用了 CFRlease()，并且 Instruments 的泄漏不会显示内存泄漏。现在我怀疑这些对象是否被 system.like [UIImage imageNamed:] 缓存。谁能帮我理解一下，谢谢！

# spring - 根据配置文件在spring应用程序上下文中加载不同的jndi.properties文件

> ID：10793519
> 
> 赞同：0
> 
> 时间：2012-05-29T05:30:49.453
> 
> 标签：spring, jms, jndi, applicationcontext

我有一个 jms 连接设置，它在我的类路径上的 jndi.properties 文件中定义，我曾经在本地开发环境中连接到 ActiveMQ。我想将此文件重命名为“activemq.jndi.properties”，因为我计划对 WebsphereMQ 进行另一个 jms 连接设置（例如 webshperemq.jndi.properties）。但是，到目前为止，我没有成功告诉我的 applicationContext.xml 中的 spring 查看 activemq.jndi.properties。

这是我的 applicationContext.xml 的片段，适用于 jndi.properties

```
<!-- Define how to connect to the Message Queueing system -->
<bean id="connectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName"    value="${jms.connectionFactory}" />
    <property name="resourceRef" value="true" />  
</bean>

<bean id="defaultDestination" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName"    value="${jms.topic}" />
    <property name="resourceRef" value="true" />
</bean>

<!-- Define a connection template that links to the factory -->
<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="connectionFactory" />
    <property name="defaultDestination" ref="defaultDestination" />
    <property name="receiveTimeout" value="6000" />
</bean> 
```

${jms.connectionFactory} 和 ${jms.topic} 都从 maven 中过滤。任何关于我的 applicationContext.xml 中需要更改的内容以使其从 activemq.jndi.properties 加载的任何输入都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:17:17.233

好吧，我认为您应该配置 maven 资源，因此根据配置文件使用另一个配置文件，而不是更改 Spring 配置文件中的任何内容。

例如：

```
<profiles>
    <profile>
        <id>local</id>
        <build>
            <resources>
                <resource>
                    <directory>src/main/resources</directory>
                    <filtering>true</filtering>
                    <includes>
                        <include>jndi.properties</exclude>
                    </excludes>
                </resource>
            </resources>
        </build>
    </profile>
    <profile>
        <id>webshpere</id>
        <build>
            <resources>
                <resource>
                    <directory>src/main/resources</directory>
                    <filtering>true</filtering>
                    <includes>
                        <include>webshperemq.jndi.properties</exclude>
                    </excludes>
                </resource>
            </resources>
        </build>
    </profile>
</profiles> 
```

# mongodb - MongoDB中的'SQL'like'语句

> ID：10793520
> 
> 赞同：5
> 
> 时间：2012-05-29T05:30:51.283
> 
> 标签：mongodb, mongoose

MongoDB/mongoose 'like' 语句中是否有诸如 SQL 语言之类的语句？使用的唯一原因是全文搜索的实现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T05:33:11.777

MongoDB 支持[正则表达式](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:07:50.007

我们可以使用 mongodb 的 java API 实现正则表达式的两种方法：

表达式 1： *我需要从文档字段中的那个字符串开始搜索*

```
String strpattern ="your regular expression";
Pattern p = Pattern.compile(strpattern);

BasicDBObject obj = new BasicDBObject() 
obj.put("key",p); 
```

示例：（考虑我想搜索名称以“a”开头的任何地方）

```
String strpattern ="^a";
Pattern p = Pattern.compile(strpattern);

BasicDBObject obj = new BasicDBObject() 
obj.put("name",p); 
```

表达式 2：

*我需要在一个字段中搜索多个单词*，您可以使用如下

```
String pattern = "\\b(one|how many)\\b";

BasicDBObject obj = new BasicDBObject();

//if you want to check case sensitive

obj.put("message", Pattern.compile(pattern,Pattern.CASE_INSENSITIVE)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T18:44:40.430

尽管您可以使用正则表达式，但您在全文搜索中不会获得良好的性能，因为 /text/ 之类的包含查询**不能使用索引。**

但是，诸如 /^text/ 之类的开头查询可以使用索引。

如果您正在考虑任何大规模的全文搜索，请考虑 MongoDB 的[多键搜索](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)功能。

**更新**

从 MongoDB v3.2 开始，您还可以使用[文本索引](https://docs.mongodb.com/manual/core/index-text/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T21:26:13.863

考虑在应用程序级别制作一个脚本，将您的数据转换为令牌（单词）。然后将令牌视为标签，在这些令牌上建立索引，然后像搜索标签一样搜索令牌。这就像创建一个倒排索引。

要获得更好的文本搜索功能，请考虑使用 Lucene 而不是 MongoDB。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T23:35:54.570

使用正则表达式：/^textforesarc$/i。只是不要忘记与性能说再见:)。使用 like 模拟正则表达式搜索不会命中自定义索​​引。目前仅支持以开头。

# android - 如何接收在应用程序中的 android 浏览器中加载 url 的意图

> ID：10793528
> 
> 赞同：0
> 
> 时间：2012-05-29T05:32:08.080
> 
> 标签：android

我希望我的 android 应用程序接收使用 android 网络浏览器打开的网页的 url 信息。当我的应用程序在后台运行时，这应该动态发生。可能吗？请建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:49:22.397

这听起来像android 中的**Service**。

请参考[http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html) 。

希望对你有帮助

# iphone - 在 iphone dev 中显示自定义坐标的亮点

> ID：10793531
> 
> 赞同：0
> 
> 时间：2012-05-29T05:32:18.697
> 
> 标签：iphone, ios, xcode, uitouch

我想在触摸时显示高光，但我的任务是在自定义坐标上显示高光，而不是在触摸发生的位置，比如触摸发生在 x=120、y=230 但我想显示在 x=100 和 y 的位置=210。如果有人知道，请提供帮助。提前致谢。

# android - Android：在通话过程中读取拨打的号码

> ID：10793533
> 
> 赞同：0
> 
> 时间：2012-05-29T05:32:24.463
> 
> 标签：android

两个人通话时，其中一个人拨打一个号码（比如3），对方能收到这个号码吗？换句话说，作为开发人员，我们能否在通话过程中从一个人读取拨打的号码。如果是这样，有人会提供一小段代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:47:08.007

I think you should look into call DTMF system. I know you can send DTMF signals while in a call. So at the other end just read/decode the DTMF.

# android - 在 SendSms 上创建日志文件并接收 SMS

> ID：10793538
> 
> 赞同：2
> 
> 时间：2012-05-29T05:33:10.933
> 
> 标签：android, sms

我正在开发一个 Android 2.3.3 版应用程序，该应用程序依赖于 SMS 进行 SMS 交易。我写了两个类 SendSMS 和 ReceiveSMS。我想创建一个日志文件来记录它发送或接收的每条短信。为了创建日志文件，我编写了代码但不起作用。

以下是我的代码，

```
public void WriteOnLog()
{
    File exportDir =  Environment.getExternalStorageDirectory();

    if (!exportDir.exists())          {              
    exportDir.mkdirs();          
    }   
    String fileName;    

        fileName = "log" + ".txt";

    File file = new File(exportDir,fileName); 
    String txt=null ;
    try {
        if(!file.exists()){
            file.createNewFile();
            FileWriter Write = new FileWriter(file,true);
            out = new BufferedWriter(Write);
             txt = "Date Time |" + " Send/Receive |" + " Controller No |" +" msg";
        }
        FileWriter Write = new FileWriter(file,true); 
        out = new BufferedWriter(Write);

        String dd=null,mm=null,yy=null,hh=null,min=null,ss=null,dt=null;    
        SimpleDateFormat sdfDateTime = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.getDefault());
        String newtime =  sdfDateTime.format(new Date(System.currentTimeMillis()));             
        yy = newtime.substring(2, 4);
        mm = newtime.substring(5, 7);
        dd = newtime.substring(8, 10);
        hh = newtime.substring(11, 13);
        min = newtime.substring(14, 16);
        ss = newtime.substring(17); 
        dt = dd+"-"+mm+"-"+yy +" " + hh + ":" + min +":"+ ss;
        txt = dt + " |" +" Send " + "| " + phoneNumber + " | " + message.toUpperCase();
        out.write(txt + "\n");     

    }          
    catch(IOException sqlEx)   {              
    Log.e("MainActivity", sqlEx.getMessage(), sqlEx);              

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:29:24.990

我使用了 OutputStreamWriter（而不是 FileWriter）方法。我让它在我的开发环境中工作并在设备（android 2.3.6）上进行了测试。试试这个：

```
try {
        File directory;
        if(isSDCard){
            directory = new File(Environment.getExternalStorageDirectory().toString()+"/"+folderNameOrPath+"/");
        }
        else{
            directory = new File(folderNameOrPath);
        }

        boolean fileReturnVal = directory.mkdirs();
        if(fileReturnVal){
            Log.d("Storage", "Write in SD Card: " + folderNameOrPath + " folder Created successfully");
        }
        else{
            Log.d("Storage", "Write in SD Card: " + folderNameOrPath + " folder either already exists or creation failed");
        }

        File file = new File(directory, fileNameWithExtention);
        FileOutputStream fOut = new FileOutputStream(file);

        OutputStreamWriter osw = new OutputStreamWriter(fOut);

        //Write the string to the file
        osw.write(text);
        osw.flush();
        osw.close();

        //file saved
        Toast.makeText(context, "Text saved in SD Card", Toast.LENGTH_SHORT).show();
        return true;

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        Log.e("Storage", "Write in SD Card: File Not Found ERROR: " + e.toString());
        return false;
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.e("Storage", "Write in SD Card: IOException ERROR: " + e.toString());
        return false;
    } catch (Exception e) {
        Log.e("Storage", "Write in SD Card: ERROR: " + e.toString());
        return false;
    } 
```

您可以为您的任务设置附加模式。变量是 SDCard、folderName、fileNameWithExtn。等是方法级别的变量。我将这些作为参数传递。

# google-maps - Google Places api 我想获取 JSON 输出

> ID：10793542
> 
> 赞同：-3
> 
> 时间：2012-05-29T05:34:02.453
> 
> 标签：google-maps, google-places-api

我想在 google places api 上搜索特定位置的位置并将它们显示在 JSOn 输出上。假设我想搜索我附近的所有银行。我该如何编码。你能提供示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:00:17.587

试试这个工作代码..它使用jquery mobile。它会找到您当前的纬度和经度周围的地方。

地图.html

```
<!DOCTYPE html> 
<html> 
  <head> 
  <meta charset="utf-8">

  <link rel="stylesheet" href="css/jquery.mobile-1.0.min.css" />

  <script src="js/jquery.js"></script>   
  <script src="js/jquery.mobile-1.0.js"></script>   
  <script src="js/map.js"></script>

 <script type="text/javascript" src="//maps.googleapis.com/maps/api/js?sensor=true&libraries=places"></script>

</head> 

<body> 
<div data-role="page" data-theme="none" class="page-map" id="page-map">
  <script src="js/canvas.js"></script>
    <div id="map-canvas">
                        <!-- map loads here... -->
    </div>
 </div>
</body>
</html> 
```

地图.js

```
var map;
var infowindow;
var lat;
var lng;
var lng;
var service;
var reference;
var initialLocation;

$( '.page-map' ).live( 'pagecreate',function(event){        
    checkLocation();
});

function checkLocation() {
    if (navigator.geolocation) {

        navigator.geolocation.getCurrentPosition(function(position) {

            initialLocation = new google.maps.LatLng(position.coords.latitude,
                    position.coords.longitude);
            lat = position.coords.latitude;
            lng = position.coords.longitude;

            callPlaceService(lat, lng);
        }, gpsFail, {
            enableHighAccuracy : true,
            maximumAge : 300000
        });
    }
}

function callPlaceService(lat, lng) {

    var pyrmont = new google.maps.LatLng(lat, lng);

    var myOptions = {
        zoom : 15,
        center : pyrmont,
        mapTypeId : google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);

    var request = {
        location : pyrmont,
        radius : 5000,
        //types: ['atm','bank'],
        keyword : 'Bank'
    };

    service = new google.maps.places.PlacesService(map);    
    service.search(request, callback);
}

function callback(results, status) {

    if (status == google.maps.places.PlacesServiceStatus.OK) {

        for ( var i = 0; i < results.length; i++) {

            var requestDetails = {reference : results[i].reference};

            service.getDetails(requestDetails, checkDetailedStatus);
        }
    }
}

function checkDetailedStatus(details, detailStatus) {
    if (detailStatus == google.maps.places.PlacesServiceStatus.OK) {

        var name = '{"name":"'+  details.name +'"}';
        var address = '{"address":"' + details.formatted_address + '"}'; 
        var phone = '{"phone":"' + details.formatted_phone_number+ '"}';        
        var website = '{"website":"' + details.website + '"}';
        var full_address = name + "," + address + "," + phone + "," + website;  
        console.log(full_address);
        var jsonTxt = JSON.stringify(full_address);

    } 
}

function gpsFail() {
    //Geo-location is supported, but we failed to get your coordinates. 
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T05:45:28.467

试试[这个](https://maps.googleapis.com/maps/api/place/search/json?location=13.117730,80.148430&radius=500&types=atm&sensor=false&key=yourkey)。

在这里你需要根据你的距离给出半径。类型可能是您需要的 ATM、餐馆、加油站。

您需要提供金奈、班加罗尔等地，或者您提供纬度/经度。简要描述一下。你在 android/iphone

# html - 使 dijit.Dialog 显示时透明

> ID：10793551
> 
> 赞同：1
> 
> 时间：2012-05-29T05:35:04.963
> 
> 标签：html, css, dojo

我有一个`Dojo Dialog box`使用`dijit.Dialog`库。它出现在 a 的`Rowclick`事件中`Dojo grid`。现在，当它出现时，我希望它是透明的或降低它的不透明度，这样无论我的背景中是什么，我都能看到它，它看起来会很好。我的对话框是一个简单的`<div> with data-dojo-type="dijit.Dialog"`.

代码是::

```
<div id="terms" name ="hi" data-dojo-type="dijit.Dialog" style="height:580px;width:900px;" data-dojo-props="title:'Control Activities'" preload="true">
<center><p><strong>EDIT AN ACTIVITY </strong></p></center>
<center><table>
<tr style="height: 50px">
<td style="width: 150px" align="right"><b>ASSIGNED BY : &nbsp&nbsp&nbsp</b></td>
<td style="width: 600px" align="left"><div id="plets"><input dojoType="dijit.form.ValidationTextBox" id="dassignedbyid" name="dassignedbyname"  onfocus="hello()" required="true"></div>
<span dojoType="dijit.Tooltip" connectId="dassignedbyid">Enter Name</span></td>
<td style="width: 150px" align="right"><b>ASSIGNED TO : &nbsp&nbsp&nbsp</b></td>
<td style="width: 600px" align="left"><div id="plets1"><input dojoType="dijit.form.ValidationTextBox" id="dassignedtoid" name="dassignedtoname" onfocus="hello()" required="true"></div>
<span dojoType="dijit.Tooltip" connectId="dassignedtoid">Enter Name</span></td></tr>
</table></center>
</div> 
```

并`Dialog box id= terms`显示在此代码上::

```
dojo.connect(grid, "onRowClick", grid, function(){
        var items = grid.selection.getSelected();
        dojo.forEach(items, function(item){

            var v = grid.store.getValue(item, "ActID");
            getdetailsfordialog(v);
            function showDialog(){
                dojo.require('dijit.Tooltip');
                dijit.byId("terms").show();
                document.getElementById('closelabelspan').style.display = 'none';
                document.getElementById('holdlabelspan').style.display = 'none';
                document.getElementById('startlabelspan').style.display = 'none';
                document.getElementById('cancellabelspan').style.display = 'none';
                document.getElementById('updatelabelspan').style.display = 'none';
            }

            showDialog();
            }, grid);
      }); 
```

现在我希望当它`dialog box(terms)`弹出时它是透明的。我也尝试了一个 CSS，但这对我不起作用::

```
<style>
div.transbox
  {
  width:900px;
  height:580px;
  background-color:#FFFFFF;
  border:2px solid black;
  opacity:0.6;
  filter:alpha(opacity=60); /* For IE8 and earlier */

  }
</style> 
```

我正在使用 IE8。

这该怎么做 ？谢谢 ..

功能`showDialog()`编辑::

```
function showDialog(){
                dojo.require('dijit.Tooltip');
                dijit.byId("terms").on("show", function() { dojo.style(this.domNode, "opacity", 0.3); });
                dijit.byId("terms").show();
                document.getElementById('closelabelspan').style.display = 'none';
                document.getElementById('holdlabelspan').style.display = 'none';
                document.getElementById('startlabelspan').style.display = 'none';
                document.getElementById('cancellabelspan').style.display = 'none';
                document.getElementById('updatelabelspan').style.display = 'none';
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:02:24.127

以编程方式

```
 var dia = new dijit.Dialog({
        title: "Click me!",
        onShow: function() {
            var me = this;
            // show routine sets opacity to 1, wait till it has and reset
            // second style call sets the underlay as well
            setTimeout(function() {
                dojo.style(me.domNode, "opacity", 0.4);
                dojo.style(dojo.byId(me.underlayAttrs.dialogId + me.underlayAttrs["class"]), "opacity", 0.4);
            }, 1000);
        },
        content: 'simple contents'
    });
    dia.startup();
    dia.show(); 
```

通过标记；

```
<div data-dojo-type="dijit.Dialog" style="height:580px;width:900px;" 
   data-dojo-props="title:'Control Activities'" preload="true">

   <script type="dojo/method" data-dojo-event="onShow" data-dojo-args="">
            var me = this;
            // show routine sets opacity to 1, wait till it has and reset
            // second style call sets the underlay as well
            setTimeout(function() {
                dojo.style(me.domNode, "opacity", 0.4);
                dojo.style(dojo.byId(me.underlayAttrs.dialogId + me.underlayAttrs["class"]), "opacity", 0.4);
            }, 1000);
   </script>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-09T04:52:39.660

dijit 对话框 css 样式文件有： .dijitDialogUnderlay 将“backgounrd-color”属性更改为： background-color: #0000;

# java - 如何从 ubuntu 终端启动 JBoss 6.1.0 服务器？

> ID：10793552
> 
> 赞同：0
> 
> 时间：2012-05-29T05:35:16.957
> 
> 标签：java, jboss6.x, ubuntu-11.04

我是使用 Ubuntu 和 JBoss 应用服务器的新手，我无法使用 Ubuntu11.04 终端启动 JBoss 6.1.0 服务器。我用来启动的命令是

`<JBOSS6.1.0 HOME>/bin$ ./run.sh`

当我使用此命令运行服务器时，终端中会抛出异常：

```
Failed to boot JBoss:
java.util.MissingResourceException: Can't find bundle for base name gnu/getopt      /MessagesBundle, locale en_US
at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1539)
at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1278)
at java.util.ResourceBundle.getBundle(ResourceBundle.java:805)
at gnu.getopt.LongOpt.<init>(Unknown Source)
at org.jboss.Main.processCommandLine(Main.java:529)
at org.jboss.Main.boot(Main.java:196)
at org.jboss.Main$1.run(Main.java:816)
at java.lang.Thread.run(Thread.java:679) 
```

请建议我如何解决此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:09:47.287

JBOSS 应该以全新安装正常启动。请确保以下内容，

1.  您已正确安装 Java。（运行 java -版本）
2.  您的 JAVA_HOME 环境变量已设置。（回声 $JAVA_HOME）
3.  你已经下载了一个合法的 JBOSS 版本 (http://download.jboss.org/jbossas/6.1/jboss-as-distribution-6.1.0.Final.zip)
4.  JBOSS 文件夹的权限对于运行应用程序的用户是正确的（chmod -R u+rwx ~/my_jboss_folder）。

然后，您可以尝试各种启动选项来进一步诊断问题...

1.  sh run.sh -b0.0.0.0 -c 最小
2.  sh run.sh -b0.0.0.0
3.  sh run.sh -b0.0.0.0 -c all

# c# - Python的最小值/最大值的C#等价物是什么

> ID：10793554
> 
> 赞同：5
> 
> 时间：2012-05-29T05:35:26.283
> 
> 标签：c#, python

以下 Python 的最小/最大代码的 C# 等价物是什么：

```
pairs = [ (2,"dog"), (1, "cat"), (3, "dragon"), (1, "tiger") ]

# Returns the PAIR (not the number) that minimizes on pair[0]
min_pair = min(pairs, key=lambda pair:pair[0])

# this will return (1, 'cat'), NOT 1 
```

似乎 C# 的 Enumerable.Min 非常接近。但根据[其 MSDN doc](http://msdn.microsoft.com/en-us/library/bb548741)，它总是返回最小化 VALUE （不是原始对象）。我错过了什么吗？

**编辑**

* * *

**请注意**- 我不倾向于通过首先排序来实现这一点，因为排序 (O(nlogn)) 在计算上比找到最小值 (O(n)) 更重。

**另请注意**- 字典也不是理想的方法。它无法处理存在重复键的情况 - (1, "cat") 和 (1, "tiger")。

更重要的是，字典无法处理要处理的项目是复杂类的情况。例如，在动物对象列表中找到最小值，使用年龄作为键：

```
class Animal
{
  public string name;
  public int age;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T05:51:34.887

[BCL](http://en.wikipedia.org/wiki/Base_Class_Library)没有 MinBy 函数，但自己编写一个很容易。

```
public static T MinBy<T, C>(this IEnumerable<T> items, Func<T, C> projection) where C : IComparable<C> {
    return items.Aggregate((acc, e) => projection(acc).CompareTo(projection(e)) <= 0 ? acc : e);
} 
```

你可以选择写一个比我更复杂的 MinBy，以避免重新评估投影。无论如何，一旦有了 MinBy 功能，您就可以轻松解决问题：

```
var pairs = new[] {Tuple.Create(2,"dog"), Tuple.Create(1, "cat"), Tuple.Create(3, "dragon"), Tuple.Create(1, "tiger")};
var min_pair = pairs.MinBy(e => e.Item1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:39:07.427

**编辑**

```
var minage = collection.Min( x => x.Age ); //for maxage replace Min by Max
var minAgeAnimals = collection.where(x=> x.age == minage); 
foreach(Animal animal in minAgeAnimals )
   Console.Writeline (  animal.Age.ToString() + " : " + animal.Name); 
```

* * *

**上一页 在编辑问题之前回答**

在 C# 中使用字典对象，而不是像这样做你想做的事情

```
int minimumKey = touchDictionary.Keys.Min(); 
string value = "";
touchDictionary.TryGetValue(minimumKey, out value))
Console.Writeline ( "min key pair is:-" + minimumKey.ToString() + " : " + value); 
```

或者

在 linq 的帮助下，它对您来说变得很容易

```
var dictionary = new Dictionary<int, string>  
                     {{1, "one"}, {2, "two"}, {3, "three"}, {4, "four"}  };  

        var maxKey = dictionary.Max(x => x.Key);  
        var minkey = dictionary.Min(x => x.Key); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:42:18.003

采用

```
Dictionary<int, string> pairs = new Dictionary<int, string>()
                          { {2,"dog"}, {1, "cat"}, {3, "dragon"} };

var min = pairs.OrderBy(x => x.Key).FirstOrDefault(); 
```

**或者**

```
int min = pairs.Keys.Min();

Dictionary<int, string> result 
                          = new Dictionary<int, string>() { {min, pairs[min]} }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T06:23:56.810

我会用

```
var min = pairs.OrderBy(x => x.FirstValue).FirstOrDefault(); 
```

虽然我同意排序比找到最小值更重，但请注意这**不是**对整个集合进行排序。它在集合上的有序枚举中找到第一个（或默认）项 - 这是惰性迭代的。

如果你有

```
var min = pairs.OrderBy(x => x.FirstValue).ToList().FirstOrDefault(); 
```

那么我同意-您正在对您的配对进行排序，然后拿走第一对。但是 LINQ 比这更聪明，而且您不会对集合进行排序。您将从可能已订购但尚未执行的集合中获取第一个。

* * *

除了您关于`Dictionary`无法使用复杂集合的观点（例如列表）之外，`Animal`您将如何按 排序`Animal`？您永远无法按复杂对象排序。相反，您需要使用动物的年龄作为键。Dictionary 可以很容易地做到这一点——事实上，Dictionary 的键永远不会与 Dictionary 的值相同，否则有什么意义呢？

```
var animals = new List<Animal>();
// get some animals...

var animalictionary = animals.ToDictionary(a => a.Age);
// assuming the animals have distinct ages, else

var animalLookup = animals.ToLookup(a => a.Age);

foreach (var animalGroup in animalLookup)
{
    var age = animalGroup.Key;
    Console.WriteLine("All these animals are " + age);
    foreach (Animal animal in animalGroup)
    {
        Console.WriteLine(animal.name);
    }
} 
```

# emacs - Emacs：错误地将 Mx 绑定到不同的函数

> ID：10793560
> 
> 赞同：2
> 
> 时间：2012-05-29T05:36:07.323
> 
> 标签：emacs, key-bindings

我错误地将 Mx （用于执行所有操作）绑定到新定义的函数？我如何解绑它？现在 Alt-x 总是执行我的功能 :( 我不想退出 emacs 并再次重新启动，我有很多缓冲区打开，所以这里有办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T06:02:54.033

通常运行的命令是`execute-extended-command`，只需重新绑定即可。

要重新绑定它，您有几个选择：

1.  只做你之前做过的，但只使用上面提到的你自己的函数`execute-extended-command`。如果您使用 Mx 命令执行此操作，那么您可能不知道，但 Mx 不仅由 生成`Alt-x`，而且由于有些键盘布局没有 Alt（或 Meta）键，您可以使用它`Esc x`来代替。

2.  使用 elisp 命令重新绑定它。为此，请更改为`*scratch*`缓冲区，输入 `(global-set-key (kbd "M-x") 'execute-extended-command)`并使用`C-j`.

3.  也许通过使用菜单（我通常不使用它，所以我不确定这一点）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T06:05:30.517

您可以调用`M-:`（或`Alt-Shift-;`）来运行`eval-expression`. 然后使用`global-set-key`将“Mx”重新分配为其默认值 ( `execute-extended-command`)。

如果您担心打开大量缓冲区并丢失工作区，您可以随时启用`desktop`扩展，这将保存和恢复缓冲区和窗口的状态。

# iphone - 如何在 iPhone 应用程序中调用 UITextFiled Did Change 方法

> ID：10793561
> 
> 赞同：0
> 
> 时间：2012-05-29T05:36:09.203
> 
> 标签：iphone, objective-c, xcode, uitextfield

我正在调用 textfiled 确实更改了方法，但问题是我想输入 1.0，如果值不是 1.0 或 1,5 或我想要的值，那么它可能会显示错误消息，但是当我只输入 1 时，它会显示错误消息如何要解决此问题，应在输入完整的数字 1.5 或 1.0 后调用该方法，如下所示

```
 -(void)textFieldTextDidChangeClinicMarkup:(UITextField*)tf{

   NSString*test=clinicMarkupTextField.text;

   if([test isEqualToString:@"1.0"]){
    NSString*value=@"1.0";

    appDelegate.clinicalMarkup=value;

   }

   else if([test isEqualToString:@"1.5"]){

    NSString*value=@"1.5";

    appDelegate.clinicalMarkup=value;

  }

  else if([test isEqualToString:@"2.0"]){

    NSString*value=@"2.0";

    appDelegate.clinicalMarkup=value;

 }

 else if([test isEqualToString:@"2.5"]){

    NSString*value=@"2.5";

    appDelegate.clinicalMarkup=value;

}

  else if([test isEqualToString:@"3.0"]){

    NSString*value=@"3.0";

    appDelegate.clinicalMarkup=value;

  }

  else{

    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Value Must be as prescribed " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];

   }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T05:44:25.153

```
-(void)textFieldTextDidChangeClinicMarkup:(UITextField*)tf{

   NSString*test=clinicMarkupTextField.text;

   if([test isEqualToString:@"1.0"]){
    NSString*value=@"1.0";

    appDelegate.clinicalMarkup=value;

   }

   else if([test isEqualToString:@"1.5"]){

    NSString*value=@"1.5";

    appDelegate.clinicalMarkup=value;

  }

  else if([test isEqualToString:@"2.0"]){

    NSString*value=@"2.0";

    appDelegate.clinicalMarkup=value;

 }

 else if([test isEqualToString:@"2.5"]){

    NSString*value=@"2.5";

    appDelegate.clinicalMarkup=value;

}

  else if([test isEqualToString:@"3.0"]){

    NSString*value=@"3.0";

    appDelegate.clinicalMarkup=value;

  }

  else if([test length] >=3 || [test floatValue] > 3 || [test floatValue] <1 )  {

    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Value Must be as prescribed " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];

   }

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:04:07.137

对于这种情况，您不应使用 valueDidChange 事件，因为每次您在 textField 中进行更改时都会触发此事件，应该使用 UIControlEventEditingDidEnd 代替，当文本字段失去焦点时将触发此事件 (resignFirstResponse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:43:48.477

您可以添加观察者，当值更改`UITextFieldTextDidChangeNotification`时将调用您的方法 。`UITextField`

```
[[NSNotificationCenter defaultCenter] 
                addObserver:self 
                selector:@selector(textFieldTextDidChangeClinicMarkup:)
                name:UITextFieldTextDidEndEditingNotification
                object:textFieldName]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T06:07:31.910

试试这个 UITextField 委托：

```
 -(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
 {
    int currentTxtLen = [textField.text length] ;
    if (currentTxtLen == 3)
    {
        if([textField.text isEqualToString:@"1.0"] || [textField.text isEqualToString:@"1.5"]  || [textField.text isEqualToString:@"2.0"] || [textField.text isEqualToString:@"2.5"] || [textField.text isEqualToString:@"3.0"]) {
        return YES; // Requied Output
    }
    return NO;// Not required Output
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T06:08:26.347

使用这个，它的工作

```
- (void) textFieldDidEndEditing:(UITextField *)textField {
            if([self validateValue:textField.text] != 1)
            {
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Invalid Value!!" message:@"Please press OK and enter again" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
                [alert show];
                [alert release];
            }
}
- (BOOL) validateValue: (NSString *) candidate 
{

    NSString *valueRegex = @"[1-3]+.[0,5]{1}"; //change values here according to ur need
    NSPredicate *valueTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", valueRegex];
    return [valueTest evaluateWithObject:candidate];
} 
```

希望能帮助到你。快乐编码:)

# ssl - 使用 Firefox 插件访问 https 站点

> ID：10793564
> 
> 赞同：0
> 
> 时间：2012-05-29T05:36:39.573
> 
> 标签：ssl, firefox-addon-sdk

我正在使用自签名 ssl 证书来设置 https 站点并使用请求包来访问该站点上的内容。但是，该程序似乎卡住了，并且没有打印该站点的内容。有什么办法可以克服这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:13:53.913

**警告**：这应该只用于调试。为错误的 SSL 证书自动添加覆盖会危及整个连接 - 如果您这样做，那么您可以首先跳过使用 SSL。当您为其他人发布此扩展时，您应该使用有效的证书。

* * *

您可能想要手动添加证书覆盖。这就是您将使用的东西[`nsICertOverrideService.rememberValidityOverride()`](http://hg.mozilla.org/mozilla-central/file/79262a88881d/security/manager/ssl/public/nsICertOverrideService.idl#l72)（[需要 chrome 权限](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/dev-guide/tutorials/chrome.html)）。唯一的问题是获取要为其添加覆盖的证书。但是尝试联系服务器并打电话[`nsIRecentBadCertsService.getRecentBadCert()`](http://hg.mozilla.org/mozilla-central/file/79262a88881d/security/manager/ssl/public/nsIRecentBadCertsService.idl#l59)应该可以。像这样的东西：

```
var Request = require("request").Request;
var host = "example.com";
var port = "443";
Request({
  url: "https://" + host + ":" + port + "/foo",
  onComplete: function(response)
  {
    var status = null;
    try
    {
      status = response.status;
    } catch(e) {}

    if (!status)
    {
      // There was a connection error, probably a bad certificate
      var {Cc, Ci} = require("chrome");

      var badCerts = Cc["@mozilla.org/security/recentbadcerts;1"]
                       .getService(Ci.nsIRecentBadCertsService);
      var status = badCerts.getRecentBadCert(host + ":" + port);
      if (status)
      {
        var overrideService = Cc["@mozilla.org/security/certoverride;1"]
                                .getService(Ci.nsICertOverrideService);
        overrideService.rememberValidityOverride(host, port, status.serverCert,
                                Ci.nsICertOverrideService.ERROR_UNTRUSTED, false);

        // Override added, now you should re-do the request
        ...
      }
    }
  }
}); 
```

*注意*：此代码尚未经过测试，特别是我不确定通过检查检测连接错误是否真的有效`response.status`（我的猜测是，如果存在连接错误但文档没有说明任何内容，它应该抛出）。

# html - 带有背景的提交按钮的某些区域包含放置在按钮下方的文本的图像无法单击（仅在 IE 中）

> ID：10793570
> 
> 赞同：0
> 
> 时间：2012-05-29T05:37:19.153
> 
> 标签：html, css

我制作了一个带有包含文本的背景图像的提交按钮，当背景图像下没有放置任何文本时，所有这些都有效，如果将某些文本放置在背景图像下方，则该区域将变得不可点击，而其余区域变为可点击区域，这仅在 IE 中出现，在 firefox 中没有问题。

我使用的代码如下

html如下：

```
<div id='con1l'>
 <input type='submit' name='loginbtn' value='Login'   />
 <font class='move'>   Login  </font>   </div> (text to be place when image is disabled in browser) 
```

css如下

```
#con1l input
{
background : url("../images/button1.png") no-repeat center center;
width:105px;
height:30px;
border : none;
color : transparent;
overflow: hidden;
text-indent: -999px;
font-size: 0;
display:block;
line-height: 0;
} 

.move
{
float:left;
margin-top:-23px;
margin-right:28px;
color:black;
cursor:pointer;
font-family:Arial ;
font-size:15px;
font-weight:bold;
} 
```

# applescript - 在 AppleScript 中导入全局变量

> ID：10793574
> 
> 赞同：1
> 
> 时间：2012-05-29T05:37:27.487
> 
> 标签：applescript

如何将全局变量从一个 AppleScript 文件导入另一个？

我正在使用两个 AppleScript 文件为项目课程创建演示。

一个 AppleScript 文件“main.scpt”以全局变量开头

```
global someDirectory
set someDirectory to "~/Documents/cs123-drj/demo"

on openServerWindow()
    # Open the server
    tell application "System Events" to keystroke "n" using command down
    tell application "System Events" to keystroke "i" using {command down, shift down}
    typeKeys("server")
    typeKeys(return)
    tell application "System Events" to keystroke "i" using command down
    typeKeys("cd ")
    typeKeys(someDirectory)
    typeKeys(return)
    typeKeys("./cs123-server.sh")
    typeKeys(return)
end openServerWindow 
```

从这个文件执行时，这工作正常。我想将此文件用作库，其方式类似于[此处](https://stackoverflow.com/questions/2606136/import-applescript-methods-in-another-applescript "这里")找到的内容。我的第二个 AppleScript 的全文如下。

```
#
# Demo script for doing simultaneous selects from a CS123-DRJ database.
#

property CS123Commands : load script POSIX file "/Users/admin/Documents/cs123-drj/demo/main.scpt"

tell CS123Commands to openServerWindow() 
```

当我尝试运行此代码时，出现以下错误：

> 错误“未定义变量 someDirectory。” 来自“someDirectory”的数字 -2753

如何将此变量导入我的第二个 AppleScript 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:50:00.627

加载脚本时实际上并没有运行脚本，因此 someDirectory 永远不会被设置。您可以通过将其设为属性来解决此问题。所以改变这个...

```
global someDirectory
set someDirectory to "~/Documents/cs123-drj/demo" 
```

到...

```
property someDirectory: "~/Documents/cs123-drj/demo" 
```

# java - 多个实例的 SQL Server 连接字符串问题

> ID：10793577
> 
> 赞同：0
> 
> 时间：2012-05-29T05:37:38.733
> 
> 标签：java, sql-server-2008

我使用相同的连接字符串来获得直接连接。但是从 java 代码中使用时它没有连接。可能是什么问题呢？

```
jdbc:sqlserver://DEVSQL\mssql2008:1433 
```

> 原因：com.microsoft.sqlserver.jdbc.SQLServerException：与主机 DEVSQL、命名实例 \mssql2008 的连接失败。

有两个 SQL Server 实例（2005 和 2008）在同一个端口 1433 上运行。那么连接字符串是什么。

*   `\mssql2008`不是一个实例。
*   `DEVSQL`连接到 2005 实例，同时`DEVSQL\mssql2008`连接到 2008 实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:00:22.113

您缺少连接字符串的一部分（`microsoft:`before `sqlserver:`。这应该有效：

```
jdbc:microsoft:sqlserver://DEVSQL\\mssql2008:1433 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:06:34.983

根据您示例中提供的信息，我无法区分：

*   数据库服务器（可能是 DEVSQL）
*   SQL Server 实例名称（可能是 mssql2008）
*   数据库名称（为此，我假设为 dbName）

[有了这些信息，您可以在MSDN 帮助](http://msdn.microsoft.com/en-us/library/ms378428.aspx)中构建您的连接字符串

```
jdbc:sqlserver://DEVSQL:1433;databaseName=dbName;instance=mssql2008. 
```

此外，检查您的 MSSQL 服务器是否启用了 TCP/IP 连接。在这里查看更多信息：

*   [如何：为数据库实例启用 TCP/IP 协议](http://msdn.microsoft.com/en-us/library/bb909712%28v=vs.90%29.aspx)
*   [MSSQL 2008 协议](http://dbconvert.com/images/screenshot/mssql_manual/mssql_server_2008_express1.png)（图片）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:40:48.607

你必须逃避反斜杠

```
jdbc:sqlserver://DEVSQL\\mssql2008:1433 
```

# c# - XmlCompiledTransform.Load 间歇性抛出 NullReferenceException

> ID：10793578
> 
> 赞同：1
> 
> 时间：2012-05-29T05:37:41.847
> 
> 标签：c#, xml, exception, xslt, nullreferenceexception

我有以下代码片段

```
this.xslCompiledTransform = new XslCompiledTransform();

// initialize xsl transform
using (Stream xsltStream = currentAssembly.GetManifestResourceStream(this.TransformationFile))
using (XmlReader schemaReader = XmlReader.Create(xsltStream))
{
    XsltSettings settings = new XsltSettings() { EnableScript = true };
    this.xslCompiledTransform.Load(schemaReader, settings, null);
} 
```

它有时会抛出 NullReferenceExcecption，有时它适用于同一个 xslt 文件。

你能告诉我上面的代码有什么问题吗？任何帮助将不胜感激。

下面是堆栈跟踪

```
 Object reference not set to an instance of an object.

Stack Trace:
   at System.Xml.Xsl.IlGen.XmlILVisitor.VisitFor(QilIterator ndFor)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Visit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd, Type itemStorageType, Boolean isCached)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisitEnsureStack(QilNode nd, Type itemStorageType, Boolean isCached)
   at System.Xml.Xsl.IlGen.XmlILVisitor.VisitXPathNodeValue(QilUnary ndVal)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Visit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd, Type itemStorageType, Boolean isCached)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisitEnsureStack(QilNode nd, Type itemStorageType, Boolean isCached)
   at System.Xml.Xsl.IlGen.XmlILVisitor.VisitXsltInvokeEarlyBound(QilInvokeEarlyBound ndInvoke)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Visit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd, Type itemStorageType, Boolean isCached)
   at System.Xml.Xsl.IlGen.XmlILVisitor.VisitTextCtor(QilUnary ndText, Boolean disableOutputEscaping)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Visit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.VisitLoop(QilLoop ndLoop)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Visit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd, Type itemStorageType, Boolean isCached)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.VisitElementCtor(QilBinary ndElem)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Visit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd, Type itemStorageType, Boolean isCached)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.VisitElementCtor(QilBinary ndElem)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Visit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd, Type itemStorageType, Boolean isCached)
   at System.Xml.Xsl.IlGen.XmlILVisitor.VisitSequence(QilList ndSeq)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Visit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd, Type itemStorageType, Boolean isCached)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.VisitElementCtor(QilBinary ndElem)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Visit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd, Type itemStorageType, Boolean isCached)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.VisitConditional(QilTernary ndCond)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Visit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd, Type itemStorageType, Boolean isCached)
   at System.Xml.Xsl.IlGen.XmlILVisitor.NestedVisit(QilNode nd)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Function(QilFunction ndFunc)
   at System.Xml.Xsl.IlGen.XmlILVisitor.Visit(QilExpression qil, GenerateHelper helper, MethodInfo methRoot)
   at System.Xml.Xsl.XmlILGenerator.Generate(QilExpression query, TypeBuilder typeBldr)
   at System.Xml.Xsl.XslCompiledTransform.LoadInternal(Object stylesheet, XsltSettings settings, XmlResolver stylesheetResolver) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:57:09.800

[直接从XslCompiledTransform.Load 方法](http://msdn.microsoft.com/en-us/library/system.xml.xsl.xslcompiledtransform.load.aspx)注释部分复制：

> 在 Debug 模式下编译的 XSLT 和在 Release 模式下编译的 XSLT 是有区别的。在某些情况下，在 Debug 模式下编译的样式表在 Load 期间不会抛出错误，但稍后会在 Transform 期间失败。在 Release 模式下编译的相同样式表在 Load 期间将失败。这种行为的一个例子是当一个不是节点集类型的变量被分配给一个需要节点集的表达式时。

# php - 在 PHP 中创建随机 UTF-8 字符串的最佳函数？（仅限字母字符）

> ID：10793582
> 
> 赞同：0
> 
> 时间：2012-05-29T05:38:35.303
> 
> 标签：php, unicode, random, utf-8

我编写了这个函数来创建一个随机的 UTF-8 字符字符串。它运作良好，但正则表达式`[^\p{L}]`并没有过滤所有看起来的非字母字符。我想不出更好的方法来生成没有非字母字符的全范围的 unicode.. 没有手动搜索和定义 65 到 65533 之间的十进制字母范围。

```
function rand_str($max_length, $min_length = 1, $utf8 = true) {
    static $utf8_chars = array();

    if ($utf8 && !$utf8_chars) {
        for ($i = 1; $i <= 65533; $i++) {
            $utf8_chars[] = mb_convert_encoding("&#$i;", 'UTF-8', 'HTML-ENTITIES');
        }

        $utf8_chars = preg_replace('/[^\p{L}]/u', '', $utf8_chars);

        foreach ($utf8_chars as $i => $char) {
            if (trim($utf8_chars[$i])) {
                $chars[] = $char;
            }
        }

        $utf8_chars = $chars;
    }

    $chars = $utf8 ? $utf8_chars : str_split('abcdefghijklmnopqrstuvwxyz');
    $num_chars = count($chars);
    $string = '';

    $length = mt_rand($min_length, $max_length);

    for ($i = 0; $i < $length; $i++) {
        $string .= $chars[mt_rand(1, $num_chars) - 1];
    }

    return $string;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:30:17.893

`\p{L}`可能抓太多了。尝试限制为 {Ll} 和 {LU} - {L} 包括 {Lo} - 其他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-01T15:21:35.370

使用 PHP7 和[IntlChar](http://php.net/manual/en/class.intlchar.php)现在有更好的方法：

```
function utf8_random_string(int $length) : string {
        $r = "";

        for ($i = 0; $i < $length; $i++) {
            $codePoint = mt_rand(0x80, 0xffff);
            $char = \IntlChar::chr($codePoint);
            if ($char !== null && \IntlChar::isprint($char)) {
                $r .= $char;
            } else {
                $i--;
            }
        }

        return $r;
    } 
```

# javascript - 如何选择远程网页的标题

> ID：10793585
> 
> 赞同：5
> 
> 时间：2012-05-29T05:38:45.593
> 
> 标签：javascript, html

如何使用 javascript 读取**远程**网页的标题？假设网页是：

```
www.google.com 
```

我想阅读该页面的标题；我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:00:34.570

您将无法单独使用 jQuery 获取这些数据，但是您可以使用 jQuery 与 PHP 或其他可以为您完成繁重工作的服务器端语言进行通信。例如，假设我们在服务器上的 PHP 脚本中有以下内容：

```
<?php # getTitle.php

    if ( $_POST["url"] ) {
        $doc = new DOMDocument();
        @$doc->loadHTML( file_get_contents( $_POST["url"] ) );
        $xpt = new DOMXPath( $doc );
        $output = $xpt->query("//title")->item(0)->nodeValue;
    } else {
        $output = "URL not provided";
    }

    echo $output;

?> 
```

有了这个，我们可以有以下 jQuery：

```
$.post("getTitle.php", { url:'http://example.com' }, function( data ) {
    alert(data);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:42:53.717

由于同源策略，获取您无法控制的远程页面的内容将是一个问题。有关更多信息，请参见此处：[如何使用 JavaScript 获取远程页面的内容？](https://stackoverflow.com/questions/1304653/how-to-get-the-content-of-a-remote-page-with-javascript)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T05:41:21.030

尝试这个

```
alert(document.title); 
```

在你的情况下，我猜你只会使用`document.title`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-29T05:47:09.487

有效的方法是编写一些服务器端代码（使用 PHP/ASP/.NET）并在脚本中通过 AJAX 传递 URL 并获取任何远程页面的标题。

# objective-c - 可可替换 XMLElements

> ID：10793592
> 
> 赞同：0
> 
> 时间：2012-05-29T05:39:36.520
> 
> 标签：objective-c, cocoa, nsxmlelement

如果我有以下示例代码：

```
NSXMLDocument* doc = [[NSXMLDocument alloc] initWithContentsOfURL: [NSURL fileURLWithPath:@"file2.xml"] options:0 error:NULL];
NSXMLElement* root  = [doc rootElement];
NSArray* objectElements = [root nodesForXPath:@"//object" error:nil];

NSLog (@"doc - %@", doc);

NSXMLElement *c1 = [objectElements objectAtIndex:0];
NSLog (@"c1 --> %@",[c1 stringValue]);

//creating new element
NSXMLElement *c2 = [NSXMLElement elementWithName:@"value" stringValue:@"object new node"];
[c1 replaceChildAtIndex:0 withNode:c2]; 

NSLog (@"New doc - %@", doc); 
```

我正在尝试获取一个 XML 元素并将其值更改为另一个 (c2)。问题是随着新节点的替换，我将元素名称也插入到 XML 文档中。

所以，如果我有

```
<element>old value</element>, 
```

我现在得到：

```
<element><newElement>new value</newElement></element> 
```

我怎样才能编写代码，以便

```
<newElement></newElement> 
```

不显示？谢谢

PS 更简单的解释方式：

基本上，我想用另一个元素替换一个元素。所以从

```
<e1>data1</e1> 
```

我希望有

```
<e2>data 2</e2> 
```

在它的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:51:00.653

我可能误解了这个问题，但听起来你只是想让第一个元素具有第二个属性？尝试类似：

```
- (void) method { 
    NSArry* attrs = [c2 attributes];
    [c1 setAttributes: attrs];
} 
```

希望有帮助。

# c# - 使用 jquery 在下拉列表中填充 xml

> ID：10793597
> 
> 赞同：0
> 
> 时间：2012-05-29T05:40:17.597
> 
> 标签：c#, jquery, xml, drop-down-menu

我想用 jquery 填充一个 xml。我得到以下代码：

jQuery：

```
 $.ajax({
        type: "GET",
        url: "GHworkerType.xml",
        dataType: "xml",
        success: function (xml) {
            $(xml).find('type').each(function () {
                var id = $(this).attr('id');
                var name = $(this).find('name').text();
                var rate = $(this).find('rate').text();
                $('<div id="link_' + id + '"></div>').html('<a href="' + name + '">' + type + '</a>').appendTo('#WorkerTypeDropDownList');

            });
        }
    }); 
```

xml:

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<worker>
    <type id=0>
        <name>Fitter, mechanical or electrician</name>
        <rate>75</rate>
    </type>
</worker> 
```

html:

```
<select id="WorkerTypeDropDownList">
      <option>loading</option>
</select> 
```

我现在如何填充这个 xml？我希望用户选择其中一项并将值（速率）传递给我的代码隐藏（C#）的变量。

我还想将此 xml 填充到另一个下拉列表中。但在这种情况下，我想更改费率。我怎样才能让它工作？

问候

托比

编辑：

这是正在运行的代码：

js：

```
$.ajax({
                                type: "GET",
                                url: "GHworkerType.xml",
                                dataType: "xml",
                                success: function (xml) {
                                    var select = $('#comboWorkerType');
                                    $(xml).find('type').each(function () {
                                        type = $(this).find('type').text();
                                        select.append("" + type + "");
                                        id = $(this).attr('id');
                                        name = $(this).find('name').text();
                                        rate = $(this).find('rate').text();
//                                        alert(rate);
                                        $('<option>' + name + '</option>').html('<option' + type + '">' + name + '</option>').appendTo('#comboWorkerType');
                                    });
                                    //                    alert($('#comboWorkerType option:selected').text());

                                    select.children(":first").text("Select worker type").attr("selected", true);

                                } 
```

xml:

```
<type>
    <name>Fitter, mechanical or electrician</name>
    <rate>75</rate>
</type> 
```

html:

```
<select id="comboWorkerType" >
     <option>Select worker type</option>
</select> 
```

但我想将所选项目的速率获取到我的代码隐藏中。

我怎样才能让它运行？

问候

托比

# c++ - 欧拉旋转应该存储为三个矩阵还是一个矩阵？

> ID：10793598
> 
> 赞同：3
> 
> 时间：2012-05-29T05:40:18.813
> 
> 标签：c++, matrix, rotation, euler-angles

我正在尝试用 C++ 创建一个简单的矩阵库，希望以后能够在游戏开发中使用它。

我已经完成了基本的实现，但我刚刚意识到每个对象只存储一个矩阵的问题：旋转顺序会很快混淆。

据我所知：AB != BA

因此，如果我不断地将任意旋转乘以我的矩阵，那么旋转就会混淆，对吗？就我而言，我需要在 Y 轴上全局旋转，在 X 轴上局部旋转（在 Z 轴上局部旋转也不错）。这些似乎是普通第一人称射击游戏的品质。所以通过“混合”，我的意思是如果我在 Y 轴（或 Z 轴）上旋转，那么它将开始围绕局部 X 轴旋转，而不是预期的轴（如果这有任何意义）。

所以，这些是我想出的解决方案：

1.  保留3个欧拉角，当一个角发生变化时，按照正确的顺序重建矩阵
2.  保留3个矩阵，每个轴一个
3.  在乘法过程中以某种方式破坏矩阵，然后正确地重建它（？）

还是我什么都不担心？我的疑虑是假的吗，订单会以某种方式神奇地自行解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:52:13.493

你是正确的，旋转矩阵的顺序在这里可能是一个问题。

特别是如果您使用欧拉角，您可能会遇到[云台锁定](http://en.wikipedia.org/wiki/Gimbal_lock)的问题：假设您的第一次旋转是 +90° 正“俯仰”，这意味着您正在向上看；那么如果下一个旋转是+45°“滚动”，那么你仍然只是直视。但是如果你以相反的顺序进行旋转，你最终会看到完全不同的地方。（请参阅 Wikipedia 链接以获取更清楚的说明。）

游戏开发中的一个常见答案是您在 (1) 中得到的结果：独立存储欧拉角，然后每次您想要在世界空间中获取对象的方向时[，一次从所有三个中构建旋转矩阵。](https://en.wikipedia.org/wiki/Euler_angles#Rotation_matrix)

另一种常见的解决方案是将旋转存储为[围绕单个轴的角度](http://en.wikipedia.org/wiki/Rotation_matrix#Conversion_from_and_to_axis-angle)，而不是欧拉角。（这对于动画师和玩家动作来说通常不太方便。）

我们还经常使用[四元数](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation)作为存储和组合旋转的更有效方式。

上面的每个链接都应将您带到说明相关数学的文章。我也喜欢[Eric Lengyel 的*3D 游戏编程和计算机图形学数学*](https://rads.stackoverflow.com/amzn/click/com/1435458869)书，它很好地解释了整个主题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:47:12.637

我不知道其他人通常如何做到这一点，但我通常只是存储角度，然后在必要时重建一个矩阵。

你是对的，如果你有一个矩阵并不断地将一些东西乘以它，你最终会把事情搞砸。但同样，我认为这不是您可能想要采取的路线。

我不知道您要使用哪种图形系统，但是使用 OpenGL，您甚至不必担心矩阵表示（除非您正在做一些对性能至关重要的事情），并且可以简单地使用一些调用 glRotate 等。

# android - 如何将 ontouchevent() 与 onitemclick 侦听器一起使用？

> ID：10793599
> 
> 赞同：2
> 
> 时间：2012-05-29T05:40:24.860
> 
> 标签：android, onitemclicklistener

我正在尝试为网格视图制作水平滚动视图。我成功地使用了水平滚动视图。但现在我也需要为同一个网格视图实现 onItemClickListener 。我使用 GestureDetector.SimpleOnGestureListener 和 onTouchEvent 进行水平滚动。如果我使用这个 onItemClickListener 不起作用。骗子有人帮我让两者都工作。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-03T02:54:01.553

我最近不得不处理同样的问题，这就是我解决它的方法。

首先，我覆盖`onListItemClick`ListFragment/ListActivity 中的默认侦听器。然后在`onTouchEvent`方法中，我设置了一个条件，当为 true 时，调用 ListView 的`onListItemClick`。当操作等于`MotionEvent.ACTION_UP`且满足条件时执行此调用。您必须首先确定哪些事件组构成您的视图的点击。我将我的声明为`ACTION_DOWN`紧随其后的`ACTION_UP`. 当您准备好执行时`onListItemClick`，您必须将实际项目的视图、位置和 id 传递给该方法。

请参阅下面的示例。

```
Class....{
    private boolean clickDetected = true;

    public boolean onTouchEvent(MotionEvent ev) {
        final int action = ev.getAction();
        final int x = (int) ev.getX();
        final int y = (int) ev.getY();

        //if an action other than ACTION_UP and ACTION_DOWN was performed
        //then we are no longer in a simple item click event group 
        //(i.e DOWN followed immediately by UP)
        if (action != MotionEvent.ACTION_UP
                && action != MotionEvent.ACTION_DOWN)
            clickDetected = false;

        if (action == MotionEvent.ACTION_UP){
            //check if the onItemClick requirement was met
            if (clickDetected){
                //get the item and necessary data to perform onItemClick
                //subtract the first visible item's position from the current item's position
                //to compensate for the list been scrolled since pointToPosition does not consider it
                int position = pointToPosition(x,y) - getFirstVisiblePosition();
                View view = getChildAt(position);
                if (view != null){//only continue if a valid view exists
                    long id = view.getId();
                    performItemClick(view, position, id);//pass control back to fragment/activity
                }//end if
            }//end if

            clickDetected= true;//set this to true to refresh for next event
        }//end if
        return super.onTouchEvent(ev);
        ....
    }//end onTouchEvent
}//end class 
```

此设置提供了很大的灵活性，例如，如果您想设置长按，您可以执行与上述相同的操作，并简单检查 ACTION_DOWN 和 ACTION_UP 之间的时间差异。

另一种方法是获取启动动作的项目的位置，并将其与向上动作的位置进行检查，甚至为向下和向上动作输入时间差异标准（比如小于 1 秒）。

# openlayers - 从 openlayers 地图中获取积分

> ID：10793601
> 
> 赞同：0
> 
> 时间：2012-05-29T05:40:25.343
> 
> 标签：openlayers

我正在开发一个开放层地图。

我需要获取用户绘制的线的所有点。经度和纬度应保存在数据库中。

问题是，我无法使用保存策略来保存所有点，而且我不知道如何获取所有点的经度和纬度。谁能帮我？

这是我在保存策略中的代码。

```
var saveStrategy = new OpenLayers.Strategy.Save();
        saveStrategy.events.register('success', null, saveSuccess);
        saveStrategy.events.register('fail', null, saveFail);

        var vectorLayer = new OpenLayers.Layer.Vector("Line Vectors", {
            styleMap: sm,
            eventListeners: {
                "featuresadded": dataLoaded
            },
            strategies: [
                new OpenLayers.Strategy.Fixed(),
                saveStrategy
            ],
            protocol: new OpenLayers.Protocol.HTTP({
                url: "testing.xml",
                format: new OpenLayers.Format.GeoJSON({
                    ignoreExtraDims: true,
                    internalProjection: map.baseLayer.projection,
                    externalProjection: wgs84
                })
            })
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:40:48.347

如果我理解得很好，您需要将绘制的线转换为点并将这些点保存到数据库，对吗？如果是这样，您可能只需要单击地图并保存每个点。检查[一下](http://www.featureserver.org)，它是一个 RESTful、很酷的与数据库交互的工具，它完美地适应了 openlayers、extjs 和 geoext。

希望这可以帮助

# html - HTML 中心输入按钮

> ID：10793604
> 
> 赞同：8
> 
> 时间：2012-05-29T05:40:57.573
> 
> 标签：html, css

这是我的代码：

```
 <p align="center">Do you want to play the game?</p><br>
        <Input type = 'Submit' Name ='StartQuiz' value="Yes" align="center">
        <Input type = 'Submit' Name ='LogOut' value="No" align="center"> 
```

按钮不在中间。我必须为此使用CSS吗？我在网上阅读只是使用简单的对齐标签。

我应该如何将这些按钮对齐到中心？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-24T15:28:34.050

Align 在 HTML5 上已弃用，因此考虑改用 CSS3。align 属性是使内容居中而不是元素本身。

默认情况下，输入元素是 inline-block，因此，要居中，您需要将它们放在 div 中，如下所示：

```
<div style="text-align:center;">
    <input type="text" />
</div> 
```

这是因为 inline-block 元素与其他元素共享同一行，您需要将共享同一行的所有元素居中。div 元素是一个单独显示在一行中的块元素。

因此，您还有另一个选项可以使输入居中，您可以设置为“display:block;” 就像这里：

```
<input type="text" style="margin:0px auto; display:block;" /> 
```

见：http: [//jsfiddle.net/T4f3W/](http://jsfiddle.net/T4f3W/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:48:21.013

您应该使用 CSS 进行此类样式设置。摆脱 HTML 对齐属性，添加一个包装器，并使文本居中。另请注意，从HTML5 开始，`<center>`标签和某些用途已`align=center`被弃用。

```
<div>
    <p>Do you want to play the game?</p><br>
    <input type="submit" name="StartQuiz" value="Yes">
    <input type="submit" name="LogOut" value="No">
</div> 
```

对于你的 CSS：

```
div
{
    text-align: center;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:44:25.330

`text-align center`定义一个 div 父级并在您的 css 中给予。

嗨检查现场演示[http://jsfiddle.net/vdUEZ/](http://jsfiddle.net/vdUEZ/)

* * *

删除`p tag align center`并给一个 div

**更新了现场演示** [http://jsfiddle.net/vdUEZ/1/](http://jsfiddle.net/vdUEZ/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T05:46:47.133

```
<p align="center">Do you want to play the game?</p><br>
<div style="text-align: center">
        <Input type = 'Submit' Name ='StartQuiz' value="Yes"  align="center">
        <Input type = 'Submit' Name ='LogOut' value="No" align="center">
</div> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-29T05:42:35.850

如果您在`<input>`标签内移动`<p>`标签并删除标签中不推荐使用的`align`属性，您的策略应该有效`<input>`。即使您要在标签中使用该`align`属性，[正确的值也应该是](http://www.w3schools.com/tags/att_input_align.asp)，而不是。试试这个代码：`<input>`[`"middle"`](http://www.w3schools.com/tags/att_input_align.asp)`"center"`

```
<p align="center">Do you want to play the game?<br>
    <Input type = 'Submit' Name ='StartQuiz' value="Yes">
    <Input type = 'Submit' Name ='LogOut' value="No">
</p> 
```

也可以（实际上是首选）使用 CSS 进行居中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-29T05:43:40.157

将输入夹在`<center>`标签内。查看现场演示[http://jsfiddle.net/xA2kS/](http://jsfiddle.net/xA2kS/)

# cakephp - CakePHP 和 Twitter 引导程序

> ID：10793609
> 
> 赞同：3
> 
> 时间：2012-05-29T05:41:24.013
> 
> 标签：cakephp, twitter-bootstrap, cakephp-2.1

我看到了几个不同的解决方案来实现 twitter bootstrap 与 cakephp

我的问题是 - 他们最好的解决方案是什么？？？

我希望在我的应用程序中使用最新版本的 cakephp 和 twitter 引导程序。

我需要的解决方案是烘焙应用程序，之后视图必须已经与 twitter bootstrap 一起使用（因此 twitter bootstrap 的额外助手不是一个好的解决方案）。我发现的是：

*   [http://www.mtkocak.net/?p=338](http://www.mtkocak.net/?p=338) - 据我了解，这是 js 库，它将为标准蛋糕视图或类似的东西添加额外的类
*   [https://github.com/netors/cakephp-shell-template-twitter-bootstrap](https://github.com/netors/cakephp-shell-template-twitter-bootstrap) - 这个解决方案似乎是我需要的，但我认为它不适用于最新版本的 cake/bootstrap

已经尝试为此找到最佳解决方案的任何人都可以告诉我他/她发现了什么吗？？？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:44:48.677

我只是认为，对于偶然发现这个问题线程的其他人来说，知道有人确实为社区整理了一些东西会很有用。你会在这里找到它： [https ://github.com/vz28bh/CakePHP-Bootstrap-Templates](https://github.com/vz28bh/CakePHP-Bootstrap-Templates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T12:23:11.930

我建议您查看**CakeStrap** ( [https://github.com/Rhym/cakeStrap](https://github.com/Rhym/cakeStrap) )

这是非常简单的步骤：

1) 下载 .zip 文件

2）文件已放置在您的 cakePHP 应用程序中已经存在的文件夹中，只需按照兔子洞并将文件夹/文件放置在正确的位置：-“模板”文件夹位于应用程序/控制台中-“主题” " 文件夹进入 app/View

3) 要启用您的主题，请添加 public $theme = "Cakestrap"; 到你的“AppController”类。

4) 如果您想使用面包店生成您的应用程序，请确保在运行脚本之前启用您的主题。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:37:45.607

这是我用来在与 Twitter Bootstrap 兼容的视图中创建表单的方法：

```
echo $this->Form->create('User', array(
    'inputDefaults' => array(
            'div' => 'control-group',
            'label' => array('class' => 'control-label'),
            'between' => '<div class="controls">',
            'after' => '</div>',
            'class' => '',
            'error' => array('attributes' => array('wrap' => 'div', 'class' => 'alert alert-error'))),
    'class' => 'form-horizontal'));
echo $this->Form->input('login');
echo $this->Form->end(); 
```

这是最终输出：

```
<form action="path/to/action" class="form-horizontal" id="UserForm" method="post" accept-charset="utf-8">
    <div style="display:none;">
        <input type="hidden" name="_method" value="POST">
    </div>
    <div class="control-group required">
    <label for="UserLogin" class="control-label">Login</label>
        <div class="controls">
            <input name="data[User][login]" class=""  maxlength="255" type="text" id="UserLogin">
         </div>
    </div>
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T08:22:40.557

我认为最好的解决方案是[更改烘焙模板的 HTML](http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html#modify-default-html-produced-by-baked-templates)，然后与社区分享您的模板 n_n

# php - 如何在php中使用简单的dom html获取最后一个li的锚标签

> ID：10793612
> 
> 赞同：2
> 
> 时间：2012-05-29T05:41:32.267
> 
> 标签：php, html, simple-html-dom, web-crawler

我在 PHP 中的简单 dom 的帮助下爬网。

我正在通过帮助 curl 获取以下 html：

```
<ul><li>1</li><li>2</li><li>3</li><li><a href="http:abc.com">4</a></li></ul> 
```

现在，我需要借助简单的dom对象来href（链接）位于这个ul的最后一个li中的锚标记。请提供我的语法我该怎么做？

我已尝试使用以下代码，但我无法找到最后一个...

```
require_once 'simple_html_dom.php';
        $html = "<ul><li>1</li><li>2</li><li>3</li><li><a href="http:abc.com">4</a></li></ul>";
        $oDocumentModel = new simple_html_dom();
        $oDocumentModel->load($html);
        $ul = $oDocumentModel->find('ul',0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:07:04.860

您可以遍历 li 并将其转换为数组并找到最后一个元素。如果你有更小的 li 喜欢...

```
require_once 'simple_html_dom.php';
$html = "<ul><li>1</li><li>2</li><li>3</li><li><a href='http:abc.com'>4</a></li></ul>";
$oDocumentModel = new simple_html_dom();
$oDocumentModel->load($html);
$ul = $oDocumentModel->find('ul',0);

$items = array();
foreach( $ul->find('li') as $li ){
    $items[] = $li->plaintext;
}
$last = end($items);
print_r($last); 
```

或者您可以使用 lastChild() 只需通过[http://simplehtmldom.sourceforge.net/manual_api.htm](http://simplehtmldom.sourceforge.net/manual_api.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T06:53:26.657

您可以通过这种方式提取链接。

```
$ul = $oDocumentModel->find('ul',0);
$a = $ul -> lastChild() -> find('a'. 0);
$href = $a -> href; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T16:02:23.870

使用 XPath：`//li[last()]/a/@href`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-29T06:05:57.247

PHP 在 DOM 上很烂。话虽如此，我发现的用于解析 HTML 的最有用的插件是 phpQuery：[http ://code.google.com/p/phpquery/](http://code.google.com/p/phpquery/)

我建议使用它而不是 simple_html_dom。

# iphone - Cocos2d 中的 Retina 和非 Retina 图形

> ID：10793614
> 
> 赞同：1
> 
> 时间：2012-05-29T05:41:39.310
> 
> 标签：iphone, ios, cocos2d-iphone

我在 iphone 中有一个游戏，一年前已经在旧版本的 cocos2d 中开发了。

现在我想为所有 iphone3G、3GS 和 4+ 设备升级具有视网膜和非视网膜图形的游戏。

我使用了许多按钮和 CCMenus 我如何在代码中处理它们。我必须为每个图形编写条件吗？

任何帮助或教程？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:51:17.047

不，您不需要进行条件编码....您可以通过取消注释或将以下代码添加到 applicationDidFinishLaunching 中的 appDelegate.m/.mm 文件中来获得视网膜显示支持

```
 if( ! [director enableRetinaDisplay:YES] )
    CCLOG(@"Retina Display Not supported"); 
```

您还需要为 iPhone 的视网膜显示添加“-hd”后缀的图像文件。

对于 cocos2d 版本 2，您需要在 Resources 文件夹中存在“-ipad”和“-ipadhd”文件。

要升级 cocos2d 版本，您可以按照此[链接](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3amigrate_to_v2.0)上的步骤进行操作。但是cocos2d第2版支持3GS及以上的iPhone。

希望这些信息对您有所帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-29T06:12:14.403

据我所知，如果您以正确的方式命名图像文件，iOS 将为您执行此操作。例如：普通屏幕：banner.png 视网膜屏幕：banner@2x.png

您唯一需要做的就是用与较低分辨率图像相同的名称命名较高分辨率图像并添加子前缀“@2x”

# java - 事件发生时动态显示 panelGroup (JSF/ICEFACES)

> ID：10793628
> 
> 赞同：0
> 
> 时间：2012-05-29T05:43:21.477
> 
> 标签：java, jsf, icefaces

我想动态显示一个 panelGroup。

在这段代码中，我有可以填充的框。当最后一个可用的框被数据填满时，应该会出现一个带有一组新框的 panelGroup。

```
<ice:panelGroup binding="#{myPage.boxes0to9}" />
<ice:panelGroup binding="#{myPage.boxes10to19}" /> 
```

如何让第二个 panelGroup 仅在 #{myPage.boxes0to9} 中的最后一个框已填充时显示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:02:50.553

您可以通过用 div 包装`<ice:panelGroup>`并通过 javascript 检查显示/隐藏它来实现它：

```
<script type="text/javascript">
    var arrInputs = new Array(9);
    function checkInputsFulfilled(value, index) {
        arrInputs[index] = (value == "");
        var filled = true;
        for(var i = 0; i < arrInputs.length; i++) {
            if (arrInputs[i]) {
                filled = false;
                break;
            }
        }
        document.getElementById("myDiv").style.display = filled ? "block" : "none";
    }
</script>

<ice:panelGroup binding="#{myPage.boxes0to9}">
    <!-- your 9 inputs (or more) here, I'll write 1 as a sample -->
    <h:inputText value="#{myBean.attribute1}" onchange="checkInputsFulfilled(this.value, 0);" />
</ice:panelGroup>
<div id="myDiv" style="display:none">
    <ice:panelGroup binding="#{myPage.boxes10to19}">
    </ice:panelGroup>
</div> 
```

您也可以使用 ajax 支持并呈现一个包装第二个的 JSF 组件，`<ice:panelGroup>`但是当您只清空一个您的起始输入并且该组应该隐藏时，这将产生很大的影响。当然，这最后一个行为是在 javascript 中控制的，如果你不想让它修改它:)。

# apache - 如何修复 Phusion Passenger 和 VirtualHost 指令的错误配置？

> ID：10793629
> 
> 赞同：0
> 
> 时间：2012-05-29T05:43:30.240
> 
> 标签：apache, passenger, virtualhost, mod-rails, phusion

我已经这样做了，谁能告诉我为什么我的 Rails 应用程序没有加载？

```
hack ~ # cd /www ; rails mysite.com ; cd /etc/apache2/sites-available
hack sites-available # cat default
<VirtualHost *:80>
        ServerName mysite.com
        ServerAlias dev.mysite.com
        DocumentRoot /www/htdocs/mysitecom
        ErrorLog "|/usr/sbin/rotatelogs /www/logs/mysite.com/error_combined_log 7862400"
        CustomLog "|/usr/sbin/rotatelogs /www/logs/mysite.com/access_combined_log 7862400" combined
        ServerSignature email
        RailsBaseURI /
        <Directory /www/htdocs/mysite.com>
                Allow from all
                Options -MultiViews
        </Directory>
</VirtualHost>

hack sites-available # 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:34:18.093

1.  您已经在 /www/mysite.com 初始化了您的应用程序，但将 DocumentRoot 指向了另一个目录 /www/htdocs/mysitecom （我假设您的意思是`rails new mysite.com`）。
2.  DocumentRoot 应该指向您应用的公共目录。

将 DocumentRoot 更改为 /www/mysite.com/public 或应用程序的公用文件夹实际所在的任何位置。

确保乘客已启用（并使用 root 退出）：

```
hack $ sudo a2enmod passenger
hack $ sudo /etc/init.d/apache2 restart 
```

# wpf - Set Tooltip Image in Code for Listbox Items

> ID：10793637
> 
> 赞同：0
> 
> 时间：2012-05-29T05:44:21.723
> 
> 标签：wpf, listbox, tooltip

I have a class `ExpanderItems` which gets loaded during runtime and a list of these is set as the `DataContext` of a `ListBox`. Now what I want to do is show the corresponding Images as a `Tooltip` for each Item. Any suggestions how to do that?

```
public class ExpanderItem
{
    private String mItemName = "empty";
    public String ItemName
    {
        get { return mItemName; }
        set { mItemName = value; }
    }

    private Image mItemSymbol = null;
    public Image ItemSymbol
    {
        get { return mItemSymbol; }
        set { mItemSymbol = value; }
    }
}

public List<ExpanderItem> getExpanderItems()
    {
        List<ExpanderItem> ItemList = new List<ExpanderItem>();

        ExpanderItem i0 = new ExpanderItem();
        i0.ItemName = "Constant";
        i0.ItemSymbol = new Image();
        BitmapImage bi = new BitmapImage();
        bi.BeginInit();
        bi.UriSource = new Uri(@"/resources/Constant.png", UriKind.RelativeOrAbsolute);
        bi.EndInit();
        i0.ItemSymbol.Source = bi;
        ItemList.Add(i0);
        ...
   } 
```

In the Window where the Items are used I am calling:

```
 void WindowMain_Loaded(object sender, RoutedEventArgs e)
    {
        lbItems.DataContext = SomeService.getExpanderItems();
    } 
```

XAML Looks like:

```
 <ListBox x:Name="lstItems" ItemsSource="{Binding}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Label Content="{Binding ItemName}">
                </Label>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:55:40.250

Compiled and tested solution.

XAML:

```
 <ListBox x:Name="lb"
         ItemsSource="{Binding}"
         HorizontalAlignment="Stretch"
         VerticalAlignment="Stretch">
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="ToolTip">
                <Setter.Value>
                    <Image Stretch="UniformToFill"
                           Source="{Binding ItemSymbol}" />
                </Setter.Value>
            </Setter>
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Label Grid.Column="1"
                   Content="{Binding ItemName}">
            </Label>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

Code:

```
using System;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Media.Imaging;

namespace Test
{
    public class ExpanderItem
    {
        private String mItemName = "empty";
        public String ItemName
        {
            get { return mItemName; }
            set { mItemName = value; }
        }

        private BitmapImage mItemSymbol = null;
        public BitmapImage ItemSymbol
        {
            get { return mItemSymbol; }
            set { mItemSymbol = value; }
        }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            this.InitializeComponent();
            lb.DataContext = this.getExpanderItems();
        }

        public List<ExpanderItem> getExpanderItems()
        {
            List<ExpanderItem> ItemList = new List<ExpanderItem>();
            ExpanderItem i0 = new ExpanderItem
            {
                ItemName = "Constant",
                ItemSymbol = new BitmapImage(new Uri(@"/resources/constant.png", UriKind.RelativeOrAbsolute))
            };
            ItemList.Add(i0);

            ExpanderItem i1 = new ExpanderItem
            {
                ItemName = "Constant",
                ItemSymbol = new BitmapImage(new Uri(@"/resources/constant.png", UriKind.RelativeOrAbsolute))
            };
            ItemList.Add(i1);

            return ItemList;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:45:24.210

I found a solution like this, but this does not add the tooltip to the whole listbox item but just to the textbox of it.

```
public class ExpanderItem
{
   private String mItemName = "empty";
   public String ItemName
   {
      get { return mItemName; }
      set { mItemName = value; }
   }

   private Image mItemSymbol = null;
   public Image ItemSymbol
   {
      get { return mItemSymbol; }
      set { mItemSymbol = value; }
   }
}

public List<ExpanderItem> getExpanderItems()
{
    List<ExpanderItem> ItemList = new List<ExpanderItem>();

    ExpanderItem i0 = new ExpanderItem();
    i0.ItemName = "Constant";
    i0.ItemSymbol = new Uri(@"/resources/Constant.png", UriKind.RelativeOrAbsolute);
    ItemList.Add(i0);
    ...
} 
```

XAML:

```
<ListBox.ItemTemplate>
   <DataTemplate>
   ...
   <Label Grid.Column="1" Content="{Binding ItemName}">
      <Label.ToolTip>
      <Border BorderBrush="Black"
              BorderThickness="1"
              CornerRadius="2">
          <Image Source="{Binding ItemSymbol}" />
      </Border>
      </Label.ToolTip>
     </Label> 
```

# javascript - 通过jquery上传多个文件

> ID：10793639
> 
> 赞同：0
> 
> 时间：2012-05-29T05:44:24.527
> 
> 标签：javascript, jquery

这是我上传多个文件的 jquery 代码。输入文件是动态生成的，所以我在生成这些输入文件的地方调用这个 FileUploader 函数。但我必须单击两次才能上传文件。任何想法表示赞赏。

```
FileUploader: function($dis) {
                    var fileName = '';
                    var $htm = $($dis.parents('div.sfFormInput').find('div.cssClassUploadFiles'));
                    var $ht = $($dis.parent('div.uploader'));
                    var extension = new RegExp($ht.attr('extension'), "i");

                    var upload = new AjaxUpload($('#' + $dis.attr('id') + ''), {
                        action: Path + "UploadHandler.ashx",
                        name: "myfile[]",
                        multiple: true,
                        data: {},
                        autoSubmit: true,
                        responseType: "json",
                        onChange: function(file, ext) {
                        },
                        onSubmit: function(file, ext) {
                            if ($ht.attr('almul') == "false" && $('div.cssClassUploadFiles').children('div').length > 0) {
                                csscody.alert('<h1>Alert Message</h1><p>You can upload only one file at  a time!</p>');
                                return false;
                            }
                            if (ext != "exe" && extension != '') {enter code here
                                if (ext && extension.test(ext)) {
                                    this.setData({
                                        'MaxFileSize': $ht.attr('filesize')
                                    });
                                } else {
                                    csscody.alert('<h1>Alert Message</h1><p>Not a valid file!</p>');
                                    return false;
                                }
                            }
                        },
                        onComplete: function(file, response) {
                            var html = '';
                            var filePath = Path + "/UploadedFiles + file;
                            if (file.split('.')[1] == "jpg" || file.split('.')[1] == "JPEG" || file.split('.')[1] == "gif" || file.split('.')[1] == "bmp" || file.split('.')[1] == "png")
                                html = '<div title="' + Path + "UploadedFiles + file + '" ><img height="10%" width="10%" src="' + filePath + '"/><a class="sfDeleteFile"><img src="../Modules/FormBuilder/images/closelabel.png" /></a></div>';
                            else
                                html = '<div title="' + Path + "UploadedFiles + file + '" >' + file + '  <a class="sfDeleteFile"><img src="../Modules/FormBuilder/images/closelabel.png" /></a></div>';
                            $htm.append(html);
                        }
                    });
                } 
```

代码有效，但唯一的问题是我必须单击两次才能上传文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:32:37.603

问题不在于文件上传部分，而在于初始化部分。如果您的文件上传控件是动态创建的，请确保在将上传程序绑定到您的标记后对其进行初始化。

# database - 在 Facebook 数据库上保留客户端相关数据？

> ID：10793642
> 
> 赞同：0
> 
> 时间：2012-05-29T05:44:37.253
> 
> 标签：database, facebook, persistence

我对 fb 编码完全陌生。对于一个新项目，我想创建一个 fb 应用程序。该应用程序是多租户的，授权和认证由fb进行。这很容易。

但是，我想持久化用户*在*fb 中输入的数据。例如，有一个用户依赖属性“心情”。用户可以输入任何字符串。现在我的问题是：有可能在 fb db 上保留此类信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:47:21.597

您无法控制行为或将数据持久存储在 FB 上。相反，您可以获取该属性并保留在您的服务器中

您可以订阅实时数据，当用户修改任何数据时，您可以收到通知并拉取数据。

# silverlight - Silverlight 中的数据网格绑定

> ID：10793646
> 
> 赞同：1
> 
> 时间：2012-05-29T05:44:50.353
> 
> 标签：silverlight, data-binding, gridview

我有一个简单的类 abc

```
class abc
        {
            public string a { get; set; }
            public string b { get; set; }
            public string c { get; set; }

            public abc(string d, string e, string f)
            {
                a = d;
                b = e;
                c = f;
            }
        }

public MainPage()
        {
            InitializeComponent();

            abc obj = new abc("abc1", "abc2", "abc3");
            LayoutRoot.DataContext = obj;

        } 
```

和一个包含三个文本框 1 2 3 的网格我试图将一个类的这 3 个属性绑定到一个网格用户控件。

```
<Grid x:Name="LayoutRoot" Background="White">
        <TextBox Height="27" HorizontalAlignment="Left" Margin="125,86,0,0" Name="textBox1" Text="{Binding Path= a}" VerticalAlignment="Top" Width="120" />
        <TextBox Height="25" HorizontalAlignment="Left" Margin="21,192,0,83" Name="textBox2" Text="{Binding Path= b}"  Width="120" />
        <TextBox Height="25" HorizontalAlignment="Left" Margin="250,192,0,0" Name="textBox3" Text="{Binding Path= c}" VerticalAlignment="Top"  Width="120" />
    </Grid> 
```

它没有显示任何错误，但没有显示任何输出到屏幕，它产生了什么具体问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:55:20.403

首先你的类型'abc'应该实现INotifyPropertyChanged。

```
public class abc : INotifyPropertyChanged
{
    ...
} 
```

然后你需要引发`INotifyPropertyChanged`.PropertyChanged 事件

```
private void RaiseProperty(string propertyName)
{
    var handle = PropertyChanged;
    if(handle != null)
    {
        handle(this, new PropertyChangedEventArgs(propertyName));
    }
}

private string _a;
public string a { get{ return _a;} set{ _a = value; RaiseProperty("a"); } }

.... 
```

如果您使用 CLR 属性，这应该可以工作，因为您需要一种机制来通知绑定；并且该机制由`INotifyPropertyChanged`接口提供

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:22:38.950

尽量不要在绑定表达式中使用“Path=”（带空格）。尝试使用：

```
Text="{Binding a}" 
```

“路径”隐藏在绑定表达式中。您需要阅读一些有关绑定的资源。

# jquery - 在缩放 JQplot 图表时，将 y 轴值设为整数

> ID：10793647
> 
> 赞同：1
> 
> 时间：2012-05-29T05:44:55.560
> 
> 标签：jquery, zooming, jqplot, axis

缩放`jqPlot`图表时，y 轴值中的小数位数不断增加，因此即使轴标签也被推出屏幕。如果位数太大，是否可以将值限制为整数或使用 1K 等符号。

在 tickOptions 中指定**formatString: '%d'**没有帮助，因为在缩放时会重新计算值。

```
yaxis: {
    tickRenderer: $.jqplot.CanvasAxisTickRenderer,
    tickOptions: {
        fontSize: this.sYAxisTickFontSize,
        formatString: '%d'
    }
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:27:23.343

我已经测试了您所说的内容，您是对的，重新计算了值，但始终应用格式。[您可以在此处的示例中看到它](http://jsfiddle.net/zALuD/3/)。它表明缩放不会增加小数位数，因为它始终应用指定的`formatString: '%d'`.

请查看代码示例，看看您是否在某处没有其他问题。如果您仍然有问题，最好发布一个 jsfiddle 来展示您的问题。

# internet-explorer - 如何挂钩浏览器打印命令，如文件->打印或文件->保存

> ID：10793648
> 
> 赞同：1
> 
> 时间：2012-05-29T05:45:20.473
> 
> 标签：internet-explorer, google-chrome, google-chrome-extension, firefox-addon, browser-addons

有没有办法像 Office 应用程序一样在 IE/FF/Chrome 中挂钩浏览器命令？我们可以挂钩键盘事件，但如何挂钩菜单项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:01:08.140

Chrome 的答案是：不。Firefox 的答案是：是的。浏览器窗口中有一个带有 id的[`<xul:command>`元素](https://developer.mozilla.org/en/XUL/command)`cmd_print`。将`command`事件的侦听器附加到它，每当用户调用该菜单项或按 Ctrl-P 时都会调用它。还有一个与 id 类似的元素`Browser:SavePage`。

# php - 有没有办法从php构建android源代码？

> ID：10793653
> 
> 赞同：3
> 
> 时间：2012-05-29T05:45:30.090
> 
> 标签：php, android, linux, sdk

我需要使用 php 将 android 源代码构建到 .apk 文件中，这是我能做的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T04:00:52.183

xampp for android 测试这个应用程序[https://play.google.com/store/apps/details?id=com.andi.serverweb&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5hbmRpLnNlcnZlcndlYiJd](https://play.google.com/store/apps/details?id=com.andi.serverweb&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5hbmRpLnNlcnZlcndlYiJd)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:49:02.377

只要您有一个可以构建源的系统，这当然是您可以做的。我建议你看看这个：http: [//developer.android.com/guide/developing/projects/projects-cmdline.html](http://developer.android.com/guide/developing/projects/projects-cmdline.html)

当然，用于`exec`运行这些实用程序：http: [//php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T06:33:05.873

这是一个不错的论坛，从[http://phpforandroid.net/](http://phpforandroid.net/)开始。我试过它真的很好。

# ruby-on-rails - 扩展 Rails 3.2 的最佳方式

> ID：10793654
> 
> 赞同：1
> 
> 时间：2012-05-29T05:45:48.393
> 
> 标签：ruby-on-rails, ruby, gem, ruby-c-extension

我有我的自定义控制器、模型、一堆视图、助手和其他东西，它们封装了足够用于我工作涉及的 Rails 应用程序的特定数量的用户管理功能。

我想要的是创建某种扩展，以便能够将我所有的自定义内容快速添加到新的 Rails 应用程序中。我对 Ruby on Rails 很陌生，但我知道最后有三种方法可以扩展 Rails - 使用 gems、生成插件或 Railtie。问题是 - 在我的情况下最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:56:46.400

Rails 应用程序模板似乎是适合您的方式。

只需创建一个 Rails 项目，它将作为您其他项目的基础，然后，当您创建一个新的 Rails 应用程序时，

```
$ rails new myapp -m /path/to/your/template/project 
```

这将自动将您的 Rakefile 和 config.ru 中的应用程序名称替换为新应用程序的名称。Railties 和其他东西也可以进入这个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:52:51.877

使用 gem，它可以选择使用[Railties](http://edgeapi.rubyonrails.org/classes/Rails/Railtie.html)连接到 Rails。插件已弃用，[将在 Rails 4.0 中删除](http://guides.rubyonrails.org/3_2_release_notes.html#what-to-update-in-your-apps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:54:08.740

在这种情况下，更好的扩展方法是使用[Rails Engine](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)。您也可以基于此引擎创建一个 gem，然后插入其他 rails 应用程序。

基本上，Rails Engine 允许您将功能子集共享给其他应用程序。例如，博客引擎、https://github.com/radar/forem 的论坛、[https](https://github.com/plataformatec/devise) [://github.com/plataformatec/devise](https://github.com/radar/forem)的身份验证引擎或用户管理（在您的情况下）。

转到文档或 railscasts 剧集了解更多信息。 [http://railscasts.com/episodes/149-rails-engines](http://railscasts.com/episodes/149-rails-engines)

# ios - 如何在 UITabBarController 中设置不同选项卡的标题？

> ID：10793655
> 
> 赞同：1
> 
> 时间：2012-05-29T05:45:52.810
> 
> 标签：ios, xcode, ipad, uitabbarcontroller

我在 TabBarApplication 中有以下选项卡。我从我的主页导航到此 TabBar。

```
UIViewController *viewController1 = [[ExpenseRecorderViewController alloc] initWithNibName:@"ExpenseRecorderViewController" bundle:nil];

UIViewController *viewController2 = [[TaxCalculatorViewController alloc] initWithNibName:@"TaxCalculatorViewController" bundle:nil];

UIViewController *viewController3 = [[CurrencyConverterViewController alloc] initWithNibName:@"CurrencyConverterViewController" bundle:nil];

UIViewController *viewController4 = [[emiCalculatorViewController alloc] initWithNibName:@"emiCalculatorViewController" bundle:nil];

self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2,viewController3, viewController4, nil]; 
```

现在，如果我尝试通过以下方式设置这四个选项卡的标题 -

```
[[tabBarController.tabBar.items objectAtIndex:0] setTitle:@"title A"];
[[tabBarController.tabBar.items objectAtIndex:1] setTitle:@"title B"];
[[tabBarController.tabBar.items objectAtIndex:2] setTitle:@"title C"]; 
```

然后它不起作用。我想我需要在顶部设置导航栏的标题。但是怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:06:16.623

应该这样做：

```
appDelegate.newsNavController = [[[UINavigationController alloc] initWithRootViewController:newsViewController] autorelease];
    appDelegate.newsNavController.navigationBar.tintColor = [UIColor blackColor];
    appDelegate.newsNavController.tabBarItem.image = [UIImage imageNamed:@"IdCard.png"];
    appDelegate.newsNavController.tabBarItem.title = NSLocalizedString(@"Title_News", @""); 
```

# validation - sencha 中的数据验证

> ID：10793656
> 
> 赞同：0
> 
> 时间：2012-05-29T05:45:53.017
> 
> 标签：validation, sencha-touch-2, dataview

我正在为需要一些验证的表单创建模型。

该模型如下所示：

```
//Defining a data structure for the Work Item List
Ext.define('InfoImage.model.configure.configModel', {
    extend : 'Ext.data.Model',

    config : {
        //Defining the fields required in the Work Item List
        fields : [ 'servname', 'port', 'protocol', 'username', 'password',
                'domain', 'appconfig', 'apptitle', 
                'appconfig' ],

        validations : [ 
        {
            type : 'presence',
            name : 'servname'
        }, 
        {
            type : 'presence',
            name : 'port'
        //  matcher : /[0-9]{4}[A-Z]+/
        }, 
        {
            type : 'presence',
            name : 'username'
        },
        {
            type : 'presence',
            name : 'password'
        }],
        proxy : {
            type : 'localstorage',
            id : 'configId'
        }
    }
}); 
```

我尝试通过调用验证

```
Ext.getCmp('form').validate(); 
```

但它说它没有称为验证的方法。

sencha 是否提供验证方法？如果是，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:19:29.767

Sencha 确实提供了一种验证**模型**的方法。阅读文档：[http ://docs.sencha.com/touch/2-0/#!/guide/models-section-3](http://docs.sencha.com/touch/2-0/#!/guide/models-section-3)

我猜你可以使用[form.getValues()](http://docs.sencha.com/touch/2-0/#!/api/Ext.form.Panel-method-getValues)来填充一个新模型，然后在模型上使用 validate() 方法来验证数据。

# android - android tabHost，每个选项卡内都有许多活动

> ID：10793657
> 
> 赞同：1
> 
> 时间：2012-05-29T05:46:15.133
> 
> 标签：android, android-activity, android-tabhost

我有一个 android 应用程序，当点击一个选项卡时，它应该进入不同的活动，

但是一旦进入该选项卡，用户应该能够进入该选项卡内的不同活动 [视图]，

我[在选项卡中找到了这个多项活动](http://ericharlow.blogspot.com.au/2010/09/experience-multiple-android-activities.html)

但我想知道这是否是最好和最简单的方法，拥有一个扩展 ActivityGroup 的 TabGroupActivity，

还是有其他首选方式可以在我的标签中进行多项活动？

编辑，按照aneal的建议使用[碎片](http://developer.android.com/guide/topics/fundamentals/fragments.html)是更好的方法吗？

谢谢！

附言。我想在手机上使用这个应用程序，最低 OS v 2.1

那么片段是否适用于旧操作系统？在手机中？

;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:17:49.880

正如 aneal 使用片段所评论的那样。您可以在 SDK 中找到[一些示例](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/index.html#Fragment)。[这](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)是一篇与“片段选项卡”SDK 示例中所示内容相同的文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T06:52:50.597

您发现使用[this](http://ericharlow.blogspot.com.au/2010/09/experience-multiple-android-activities.html)的多个活动正在使用现在已弃用的 ActivityGroup，并建议使用 Fragments 代替它。

要在您的情况下支持 android 设备 2.1+ 及更高版本，您当然可以使用可供下载的 Android 支持包。如果您希望使用片段，兼容的片段适用于 v1.6 及更高版本的 Android 设备。

# sqlite - 在 windows8 和 SQLiteMetro 中使用我自己的数据库

> ID：10793658
> 
> 赞同：2
> 
> 时间：2012-05-29T05:46:17.957
> 
> 标签：sqlite, windows-8, windows-runtime

我有一个现有的 SQLite.db，我想在使用 SQLiteMetro 的 Windows8 应用程序中使用它。我有一个使用以下内容的工作示例应用程序：

```
using SQLiteMetro; 

Database db =new Database(Path.Combine( Windows. Storage .ApplicationData. Current. LocalFolder. Path, "test.db")); 
```

如何将我自己现有的数据库（例如具有 1000 条记录的“test.db”）添加到 Win8/Metro 项目，以便应用程序可以访问数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:46:20.320

您可以将其放置在应用的本地状态中。应用程序本地状态文件夹默认位于`%localappdata%\packages\<packageid>\LocalState`.

然后，您可以使用...之类的语法

```
var root = Windows.Storage.ApplicationData.Current.LocalFolder.Path;
using (var db = new SQLiteConnection(Path.Combine(root, "test.db")) 
```

[有关适用于 Windows 8 Metro 风格应用程序的 Sqlite 的](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)好文章以及有关[应用程序数据](http://msdn.microsoft.com/en-US/library/windows/apps/hh464917)的更多信息。

# handler - 处理程序结束时的中断操作顺序

> ID：10793659
> 
> 赞同：0
> 
> 时间：2012-05-29T05:46:30.870
> 
> 标签：handler, exit, restore, interrupt

不确定这是否是正确的问题，但我正在处理操作系统任务，我似乎找不到任何有用的信息来解决我的问题。任何建议将不胜感激。谢谢！

当处理程序结束时，中断处理程序应按什么顺序执行以下操作。如果任何操作都可以按任一顺序完成，请说出来。证明您的订单。以下是我从阅读中得出的顺序，但我真的找不到任何合理的理由来回答我的问题。

1.  恢复数据寄存器值
2.  恢复栈指针指向用户栈
3.  恢复中断向量
4.  恢复中断掩码
5.  恢复状态寄存器
6.  将指令寄存器恢复到用户程序

# cocoa - NSFileManager 使用 NSURL 不一致的原因是什么？

> ID：10793662
> 
> 赞同：1
> 
> 时间：2012-05-29T05:46:42.657
> 
> 标签：cocoa, nsstring, nsurl, nsfilemanager

我在某处读到，Apple 鼓励在路径和文件位置方面使用 NSURL 而不是 NSString，这在新的（er）API 中变得越来越明显——如果我错了，请纠正我。这个[Stack Overflow 问题](https://stackoverflow.com/questions/7769219/when-should-i-use-nsurl-instead-of-nsstring-and-vice-versa)特别涉及这个主题。

但是，我注意到一些 API 在使用 NSURL 和 NSString 方面似乎不一致 - 特别是 NSFileManager。例如，NSFileManager 有一个方法 fileExistsAtPath:（它接受一个 NSString 作为唯一的参数），但是没有一个等价的方法接受一个 NSURL 作为参数。但是，要删除文件，有一个采用 NSString 的方法和一个采用 NSURL 的等效方法。

这种差异是有原因的还是在历史上有所增长？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:11:44.187

可能是因为他们想阻止使用存在检查。正如标题相当外交地说的那样：

> 以下方法的效用有限。尝试基于文件系统的当前状态或文件系统上的特定文件来预测行为会在文件系统竞争条件下鼓励奇怪的行为。尝试操作（例如加载文件或创建目录）并优雅地处理错误比尝试提前确定操作是否成功要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T05:54:58.857

我很确定这只是 NSString 方面的一些遗留代码，因为看起来它们确实正在向 NSURL 进行大致称为文件操作的操作。

此外，您引用的 SO 问题很好地说明了为什么 NSURL 更受欢迎：

> NSURL 也有 URLByAppendingPathComponent: 和 URLByAppendingPathExtension: 所以也很方便:-)

# tortoisesvn - 无法在 Windows 资源管理器中显示 TortoiseSVN 覆盖

> ID：10793667
> 
> 赞同：3
> 
> 时间：2012-05-29T05:47:08.343
> 
> 标签：tortoisesvn

我试过这些方法，很奇怪，只有c:下的文件/目录有这个问题，d:下的其他文件/目录都可以。

1.  清理>“刷新外壳覆盖”
2.  升级 TortoiseSVN 到最新版本 1.7.7
3.  重新启动 Windows
4.  [在http://devlicio.us/blogs/sergio_pereira/archive/2010/01/05/oh-no-my-tortoisesvn-overlays-are-missing.aspx](http://devlicio.us/blogs/sergio_pereira/archive/2010/01/05/oh-no-my-tortoisesvn-overlays-are-missing.aspx)尝试过的方法

所有方法都不起作用，有什么建议吗？

答案：设置 -> 图标叠加层 -> 包含路径：==> 在此处添加路径，并且叠加层起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T13:40:48.843

答案：设置 -> 图标叠加层 -> 包含路径：==> 在此处添加路径，并且叠加层起作用

# r - 将 2 个相同长度的数值向量相除

> ID：10793673
> 
> 赞同：1
> 
> 时间：2012-05-29T05:47:49.207
> 
> 标签：r, vector, numeric, divide

```
deflator <- nominalGDP/realGDP
WARNINING MSG  In Ops.factor(nominalGDP, realGDP) 
```

问题是得到：

```
deflator = nominal/real 
```

使用名义GDP 和实际GDP 来计算平减指数值。您应该最终得到一个名为 deflator 的数字向量，如下所示：

```
> deflator
[1] 0.9628929 0.9596746 0.9747274 0.9832532 0.9851884
[6] 0.9797770 0.9913502 1.0100561 1.0176906 1.0092516
[11] 1.0185932 1.0241043 1.0197975 1.0174097 1.0297328
... [71] 1.4497201 
```

名义GDP包含

```
> nominalGDP
 [1] 21382 21585 20557 23720 22748 23110 22005 25211 24219
[10] 24436 23502 26554 24777 25538 24624 27279 25550 25505
[19] 24664 28142 26563 26794 26262 29487 28635 28204 27694
[28] 31593 30016 30688 29517 33754 32365 31875 31847 35178
[37] 33920 33715 33882 37685 36742 36890 36528 40263 38357
[46] 39229 38836 42192 40316 40541 40356 44830 42908 43930
[55] 43094 48599 46076 45562 43637 49231 46665 45711 43757
[64] 49409 48078 47773 46120 53168 51037 50191 48944 
```

实际GDP包含

```
> realGDP
 [1] 22,206 22,492 21,090 24,124 23,090 23,587 22,197 24,960 23,798 24,212
[11] 23,073 25,929 24,296 25,101 23,913 26,492 24,774 24,896 23,835 26,852
[21] 25,734 25,883 25,244 28,225 27,260 26,894 25,968 28,891 27,372 27,543
[31] 26,753 30,045 28,556 28,490 28,093 31,702 30,214 29,870 29,387 32,535
[41] 31,427 31,310 30,577 33,655 32,125 32,372 31,760 34,753 32,968 32,922
[51] 32,103 35,658 34,033 34,470 33,195 36,489 34,400 33,685 32,680 36,487
[61] 34,328 34,194 32,073 36,495 35,201 34,843 33,207 37,279 35,666 35,028
[71] 33,761
71 Levels: 21,090 22,197 22,206 22,492 23,073 23,090 23,587 ... 37,279 
```

我尝试的第一种方法是使用以下方法简单地划分两个列表`/`：

```
nominalGDP/realGDP 
```

并给我一条警告信息。

我认为两者都是数字向量，但似乎它们彼此不对应。而且我也试过了 `mapply("/", nominalGDP, realGDP)`。

请让我知道我在这里缺少什么以得出正​​确的结果。

我不想要答案本身，我想知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:54:37.593

你`realGDP`是因素类。我认为这是因为您将逗号作为小数点，而 R 将其视为因子（不是数字）。`dec=','`在读取数据或将逗号更改为输入文件中的点时，您应该使用参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:53:36.067

线索在“realGDP”的印刷表示的末尾。它是一个因子变量。你需要这样做：

```
 readGDP <- as.numeric(as.character(realGDP)) 
```

...那么你将有两个数字向量。

# c# - 是否可以从我的手机（可能通过短信）访问我的计算机（可以访问互联网）？

> ID：10793675
> 
> 赞同：2
> 
> 时间：2012-05-29T05:47:58.597
> 
> 标签：c#, mobile, sms, sms-gateway, twilio

我正在寻找一种方法让我的电脑（可以访问互联网）与我的手机（通过短信）进行通信。我知道可以使用服务提供商的 SMS 网关（例如加拿大 Koodo mobile 的 number@msg.telus.com）来感知 SMS。即使它有效，我也无法回复短信并通过电子邮件取回消息（不是没有互联网连接，也就是说），这就是我想要实现的目标：即使我是，也可以与我的计算机通信缺乏互联网连接。

基本上我想在家里有某种服务器（用 C# 编写），它等待我通过 SMS 发送命令并通过 SMS 应答。

这可能以最低的费用实现吗？理想情况下，如果我一开始可以免费试用它，我会喜欢它。

我看了一下[Twilio](http://www.twilio.com/api/sms "特维利奥")，它似乎正是我正在寻找的东西，但据我了解，它通过发送 POST 请求将文本消息发送回应用程序。问题是我不是在制作网页，而是在制作独立的 C# 应用程序。有没有办法恢复请求？我必须承认，我对请求以及如何处理它们几乎一无所知。

无论如何，我已经搜索了几个小时，但找不到任何有趣的东西（除了*Twilio*）。我将不胜感激任何形式的帮助或澄清。

感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:17:07.807

您可以通过使用**手机**或**GSM 模块来实现此目的**

您应该有一个程序来解析传递到您连接的手机或 GSM 模块的消息

检查此[通过 GSM 调制解调器发送和阅读短信](http://www.codeproject.com/Articles/38705/Send-and-Read-SMS-through-a-GSM-Modem-using-AT-Com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:52:18.887

Voxeo 提供了一项名为[SMSIfied](http://smsified.com/)的服务，该服务目前处于测试阶段，在测试阶段您可以免费试用。一旦它退出测试版，每条消息只需花费一美分，无需任何安装费。它有一个[REST API，允许您](http://smsified.com/sms-api-documentation)从您的 PC 接收和发送 SMS 消息。这是一篇[博客文章，展示了如何将 API 与 C# 一起使用](http://blog.smsified.com/2011/06/sending-sms-messages-with-c-and-smsified/)。从“独立”C# 应用程序发送 SMS 消息相当容易，但接收它们有点棘手。要接收它们，您需要一个固定的 IP 地址，SMSIfied 服务可以向其发出 HTTP 请求。这还需要您在防火墙中打开一个端口，以便 HTTP 流量进入。要处理传入的请求，我建议使用[ASP.NET Web API](http://www.asp.net/web-api)ASP.NET MVC 4 附带的。对于“独立”C# 应用程序，您可以[自托管 API](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T00:38:13.457

我建议你使用 twitter API。如果您在 twitter 上为您的计算机创建一个帐户并将您的手机注册到 twitter（在您的个人帐户上），您将能够发送您的计算机将接收的推文。您将通过短信在手机上收到推文（如果您的计算机将您的名字添加到其中）。

[控制僵尸网络已经完成](http://www.wired.com/threatlevel/2009/08/botnet-tweets/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T15:21:50.297

*（首先是免责声明，我为[Nexmo](http://nexmo.com)（一个 SMS API）做一些开发人员宣传。）*

在大多数情况下，SMS API 使用 HTTP 回调来传递消息。因此，您的问题的要点似乎是如何使用不在网络服务器上的代码获取基于回调的 API（在给定事件上进行 HTTP 回调）。

这与硬件开发人员（Ardunio 等）在希望设备与 API 交互时所面临的基本用例相同。

以下是一些选项：

*   **使用静态 IP 地址，并将回调指向您的 non-webserver**。当然，这里的问题是您实际上已经将非网络服务器变成了网络服务器。

    不知何故，您的“独立”应用程序现在需要理解和接受 HTTP 请求，并且它运行的服务器现在有额外的安全问题。

    这将起作用（并且可能是最简单的入门方法），但它似乎与您正在寻找的完全相反。此外，这意味着您需要确保您的应用程序保持在线（对于 IP 地址/网络更改的情况肯定会出现问题）。

*   **使用网络服务器作为中介。**仍然需要 Web 组件（毕竟，大多数此类 API 通过 HTTP 回调传递 SMS）；但是，这意味着您可以选择将消息传递给独立应用程序的方式。

    Web 服务器可以接受传入的 SMS（通过 HTTP 回调），然后通过电子邮件、XMPP 等将其发送到您的独立应用程序。这些消息甚至可以被忽略，您的独立应用程序可以轮询 API 以获取消息（自上次民意调查以来）。

    此时，您的独立应用程序可以使用 HTTP 请求进行回复（毕竟，独立应用程序应该能够轻松地*发出*HTTP 请求）。

*   **使用 SMPP。**这是我不太熟悉的东西，但会完全**绕过对 HTTP 回调的需要**。如果您使用的 API 支持[SMPP](http://en.wikipedia.org/wiki/Short_Message_Peer-to-Peer)（SMS 协议），您只需将应用程序配置为通过 SMPP 连接并通过该通道发送/接收所有消息。

    我不是说我会推荐这个，但这是另一种选择。

选项 1 和 2 应该可以使用任何 SMS API，对于选项 3，我所知道的唯一[提供 SMPP 的是 Nexmo](http://www.nexmo.com/documentation/index.html#smpp)（但那是因为我在那里做了一些工作，其他 SMS 提供商完全有可能提供）。

此外，由于您提到了最低费用 - 值得注意的是，Nexmo 接收短信是免费的。

# java - java - 如何从java中超过3位的数字中获得可能的3位组合

> ID：10793682
> 
> 赞同：4
> 
> 时间：2012-05-29T05:48:39.593
> 
> 标签：java

I/p：5278
所需的 o/p：527,278,785,852（我手动执行此操作）。但如果数量很大，那么它就是一个问题。

注意：输出应该是没有重复组合的方式。（即在上述组合中，有一个数字 527 就足够了，我不希望输出中可能有 257 或 725 等组合，

我怎样才能做到这一点？有什么线索吗？

编辑：一个重要的事情是输入数字是唯一的。为了在任何时候更清楚输入不能有像 1123 0r 3455 这样的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T06:33:26.967

这里有一些例子：

```
public class Combination {

    public static void main(String[] args) {
        StringBuilder builder = new StringBuilder("5278");
        String str;
        int lastIndex;

        if(builder.length() % 2 == 0) {
            lastIndex = builder.length() / 2;
        } else {
            lastIndex = builder.length() / 2 + 1;
        }
        str = builder.toString() + builder.toString().substring(0, lastIndex);

        for (int i = 0; i < builder.length(); i++) {
            System.out.println(str.substring(i, i + 3));
        }
    }
} 
```

**更新比上面更简单的方式（基于与[veredesmarald](https://stackoverflow.com/questions/10793682/how-can-get-the-possible-3-digit-combination-from-a-number-having-more-than-3-di/10794160#comment14044447_10794160)的对话）**

```
public class Combination {

    public static void main(String[] args) {
        char[] digits = Integer.toString(123).toCharArray();
        for (int i = 0; i < digits.length; i++) {
            System.out.println("" + digits[i] + digits[(i + 1) % digits.length] + digits[(i + 2) % digits.length]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T06:57:49.880

```
public static void printCombinations(int input)
{
    char[] digits = Integer.toString(input).toCharArray();

    for (int i = 0; i < digits.length - 2; i++) {
        for (int j = i + 1; j < digits.length - 1; j++) {
            for (int k = j + 1; k < digits.length; k++) {
                System.out.println("" + digits[i] + digits[j] + digits[k]);                      
            }
        }
    }
} 
```

这将从您的输入整数中获得 3 位数字的所有唯一组合。请注意，这仅在您所说的数字唯一时才有效。如果您需要构建其他长度的组合，您可以编写一个递归函数。

样本输出：

```
printCombinations(12345);

123
124
125
134
135
145
234
235
245
345 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T06:32:08.953

```
 Integer input = 5278;
    List<Character> digits = new ArrayList<Character>();
    for(char c : String.valueOf(input).toCharArray()) {
        digits.add(Character.valueOf(c));
    }
    int a  = 0;
    for(int i=0; i<digits.size(); i++){
        for(int j=0; j<digits.size(); j++){
            for(int k=0; k<digits.size(); k++){
                if(!digits.get(i).equals(digits.get(j)) && !digits.get(j).equals(digits.get(k)) && !digits.get(i).equals(digits.get(k))){
                    System.out.println(++a +": " + digits.get(i) + digits.get(j) + digits.get(k));                      
                }
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-02T09:51:34.090

```
private static void test() {
    int a[] = { 1, 2, 3, 4, 5, 6 };
    char[] digits = Integer.toString(123456).toCharArray();
    Set<String> res = new HashSet<>();
    int i = 0;
    int m = digits.length - 1;
    while (i <= digits.length - 1 && m >= 0) {

        for (int j = 0; j <= digits.length - 1; j++) {
            for (int k = 0; k <= digits.length - 1; k++) {

                if (digits[j] != digits[k] && digits[i] != digits[j] && digits[m] != digits[j]) {
                    res.add(digits[i] + "" + digits[j] + "" + digits[k]);
                    res.add(digits[i] + "" + digits[k] + "" + digits[j]);
                    res.add(digits[m] + "" + digits[k] + "" + digits[j]);
                    res.add(digits[m] + "" + digits[j] + "" + digits[k]);

                }
            }
        }

        i++;
        m--;
    }
    res.stream().forEach(e -> System.out.println(e));

} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-29T06:12:34.783

将输入的数字放入列表中，创建将返回此列表索引的随机生成器，形成您的输出：

```
Integer input = 5278;
char[] digits = String.valueOf(input).toCharArray();

int numberOfTrinities = 4;
String result = "";
Random generator = new Random();
List<String> trinities = new ArrayList<String>();
while(trinities.size() < numberOfTrinities ) {
    String nextTrinity = "";
    for(int i = 0; i < 3; i++) {
        nextTrinity  += digits(generator.nextInt(digits.size()));
    }
    if(isUniqueDigitsTrinity(trinities, nextTrinity)) {
        trinities.add(nextTrinity);
    }        
}
String result = "";
for(String trinity : trinities) {
    result += trinity;
}
System.out.printl("Input: " + input + ", Result: " + result); 
```

我们需要这个来检查三位一体的唯一数字：

```
private boolean isUniqueDigitsTrinity(List<String> trinities, String candidateTrinity) {
    for(String existingTrinity : trinities) {
        String checker = existingTrinity;
        for(char candidateChar : candidateTrinity.toCharArray()) {
            checker.replace(candidateChar, '');
        }
        if(checker.length() <= 0) {
            return false;
        }
    }
    return true;
} 
```

# blackberry - 黑莓中带有复选框的自定义列表字段

> ID：10793684
> 
> 赞同：0
> 
> 时间：2012-05-29T05:48:59.993
> 
> 标签：blackberry, listfield

我试图`ListField`用黑莓中的复选框来实现自定义。我能够正确显示列表。我的要求是我需要使用黑莓中的复选框选择多个项目，但我无法更改选中并取消选中复选框。我尝试了`navigationClick`, `CheckBox.setChangeListener`,`HorizontalFieldManager.setChangeListener`方法，但没有得到任何解决方案。谁能告诉我我做错了什么？

我的代码是：

```
public class InboxWithCheckboxes extends MainScreen{
    private InboxWithCheckboxeslistfield inboxWithCheckboxeslistfield;
    public MenuItem _DeleteMessage;
    private String[]templongDBTimeStamp;
    private Database db;
    private static final int[] GRADIENT_COLORS     =
    {
        Color.PALEVIOLETRED, Color.ANTIQUEWHITE, Color.DARKTURQUOISE, Color.DEEPSKYBLUE
    };
    protected void makeMenu(Menu menu, int instance)
    {
        menu.add(_DeleteMessage);

        //Create the default menu.
        super.makeMenu(menu, instance);
    }
    public InboxWithCheckboxes(){
        inboxWithCheckboxeslistfield = new InboxWithCheckboxeslistfield();
        Background bg = BackgroundFactory.createLinearGradientBackground( 
                GRADIENT_COLORS[0], GRADIENT_COLORS[1], 
                GRADIENT_COLORS[2], GRADIENT_COLORS[3]);
        this.getMainManager().setBackground(
                bg);

        add(inboxWithCheckboxeslistfield);     
        add(new SeparatorField()); 
        db = new Database();

        _DeleteMessage = new MenuItem("DeleteMessage", 200, 10){
            public void run(){
                int index[] = inboxWithCheckboxeslistfield.getSelection();
                System.out.println("the list size is:"+inboxWithCheckboxeslistfield.getSize());
                for(int i=0;i<inboxWithCheckboxeslistfield.getSize();i++){
                int index1 = inboxWithCheckboxeslistfield.getSelectedIndex();
                System.out.println(" selected index is:"+index1);

                inboxWithCheckboxeslistfield.delete(index1);
                inboxWithCheckboxeslistfield.eraseAt(index1);

                }
                invalidate();   

            }
        };
    }
}

class InboxWithCheckboxeslistfield extends ListField implements ListFieldCallback  {
    public Vector rows;
    private TableRowManager row ;
    public TableRowManager rowManager;
    private LabelField UserName,Message,Timestamp;
    private HorizontalFieldManager hfmcheck;

    private CheckboxField checkbox;

    private Database db;
    private Vector inboxdatavector;
    private String[] msg,key,userinfo,timearray;
    private long[] timeStamp;
    /* Border For EditFields */
    Border bdr = BorderFactory.createRoundedBorder(new XYEdges(4, 4, 4, 4),
            Border.STYLE_SOLID);

    /**
     * Creates a new MyScreen object
     */
    public InboxWithCheckboxeslistfield() {
        // TODO Auto-generated constructor stub

        super(0, ListField.MULTI_SELECT);
        setRowHeight(120);
        setCallback(this);
        rows = new Vector();
        db = new Database();
        inboxdatavector = db.fetchDataInbox();
        int count = db.getcountInbox();
        msg = new String[count];
        key =  new String[count];
        userinfo =  new String[count];
        timearray = new String[count];
        timeStamp = new long[count];
        for (int i = 0; i < count; i++) {

            row = new TableRowManager() { 
                public void paint(Graphics g) { 
                    g.setBackgroundColor(Color.BLACK); 
                    g.fillRect(0, 0, getWidth(), getHeight()); 
                    g.setColor(Color.BLACK); 
                    g.clear(); 
                    super.paint(g); 
                } 
            }; 
            try{
                byte[] a = (byte[]) inboxdatavector.elementAt(i);
                ByteArrayInputStream bais = new ByteArrayInputStream(a);
                DataInputStream dis = new DataInputStream(bais);
                msg[i]= dis.readUTF();
                key[i] = dis.readUTF();
                userinfo[i] = dis.readUTF();
                timeStamp[i] = dis.readLong();
                timearray[i] = convertMillisecondsToDate(timeStamp[i]);
                System.out.println("msg is "+msg[i]);
                System.out.println("key is "+key[i]);
                System.out.println("userinfo is "+userinfo[i]);
                System.out.println("timeStamp is "+timeStamp[i]);

                bais.close();
                dis.close();
            } catch (Exception e) {
                e.printStackTrace();
            }

            UserName = new LabelField("" + String.valueOf(i),
                    DrawStyle.ELLIPSIS | LabelField.USE_ALL_WIDTH
                    | DrawStyle.LEFT);
            UserName.setText(userinfo[i]);
            row.add(UserName);
            hfmcheck = new HorizontalFieldManager(HorizontalFieldManager.FIELD_HCENTER);
            row.add(hfmcheck);
            checkbox = new CheckboxField("",false,Field.USE_ALL_WIDTH){
                public void paint(Graphics graphics) {
                    graphics.setColor(Color.WHITE);
                    super.paint(graphics);
                }
            };
            hfmcheck.add(checkbox);
            hfmcheck.setChangeListener(new FieldChangeListener() {

                public void fieldChanged(Field field, int context) {
                    // TODO Auto-generated method stub
                    System.out.println("entered into hfmfield");
                    checkbox.setChecked(true);
                }
            });
            Message = new LabelField("" + String.valueOf(i),
                    DrawStyle.ELLIPSIS | LabelField.USE_ALL_WIDTH
                    | DrawStyle.RIGHT);
            Message.setText(msg[i]);
            row.add(Message);

            Timestamp = new LabelField("" + String.valueOf(i),
                    DrawStyle.ELLIPSIS | LabelField.USE_ALL_WIDTH
                    | DrawStyle.RIGHT);
            Timestamp.setText(timearray[i]);
            row.add(Timestamp);

            rows.addElement(row);

        }
        for (int i = 0; i < userinfo.length; i++) {
            timearray[i] = convertMillisecondsToDate(timeStamp[i]);
            System.out.println("the time is:"+timearray[i]);

        }
        /*checkbox.setChangeListener(new FieldChangeListener() {

            public void fieldChanged(Field field, int context) {
                // TODO Auto-generated method stub
                System.out.println("enter into checked changed.");
                checkbox.setChecked(true);

            }
        });*/
        setSize(rows.size());

    }

    public void drawListRow(ListField listField, Graphics graphics, int index,
            int y, int width) {
        // TODO Auto-generated method stub

        InboxWithCheckboxeslistfield list = (InboxWithCheckboxeslistfield) listField;
        rowManager = (TableRowManager) list.rows.elementAt(index);
        ((TableRowManager) rowManager).drawRow(graphics, 0, y, width, list.getRowHeight());

    }
    public void erase() {  
        rows.removeAllElements();  
    }

    public void eraseAt(int index) {  
        rows.removeElementAt(index);

    }
    private class TableRowManager extends Manager {

        protected TableRowManager(){
            super(0);
        }

        public void drawRow(Graphics graphics, int i, int y, int width,
                int rowHeight) {
            // TODO Auto-generated method stub
            // Arrange the cell fields within this row manager.
            layout(width, rowHeight);

            // Place this row manager within its enclosing list.
            setPosition(i, y);

            // Apply a translating/clipping transformation to the graphics
            // context so that this row paints in the right area.
            graphics.pushRegion(getExtent());

            // Paint this manager's controlled fields.
            subpaint(graphics);
            graphics.setColor(0x00CACACA);
            graphics.drawLine(0, 0, getPreferredWidth(), 0);

            // Restore the graphics context.
            graphics.popContext();

        }

        protected void sublayout(int width, int height) {
            // TODO Auto-generated method stub
            // set the size and position of each field.
            int fontHeight = Font.getDefault().getHeight();
            int preferredWidth = getPreferredWidth();

            Field field = getField(0);

            layoutChild(field, preferredWidth, 50); 
            setPositionChild(field, 10, 5);

            field = getField(1);
            layoutChild(field, preferredWidth, 150); 
            setPositionChild(field, 10,40);

            // set the list name label field
            field = getField(2);
            layoutChild(field, 300, fontHeight + 1); 
            //setPositionChild(field, 1, 2); 
            setPositionChild(field, 80, fontHeight );

            // set the due time name label field
            field = getField(3);
            layoutChild(field, 150, fontHeight + 1);
            setPositionChild(field, 500, fontHeight );

            setExtent(getPreferredWidth(), getPreferredHeight());

        }
        // The preferred width of a row is defined by the list renderer.  
        public int getPreferredWidth()  
        {       

            return Display.getWidth();        
        } 
        // The preferred height of a row is the "row height" as defined in the  
        // enclosing list.      
        public int getPreferredHeight()     
        { 
            return getRowHeight();       
        } 

    }
    public Object get(ListField listField, int index) { 
        return null; 
    } 

    public int getPreferredWidth(ListField listField) { 
        return 0; 
    } 

    public int indexOfList(ListField listField, String prefix, int start) { 
        return 0; 
    } 

    public String convertMillisecondsToDate(long timeStamp) {

        // Create a DateFormatter object for displaying date information.

        SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss");

        java.util.Date date = new java.util.Date(timeStamp);
        System.out.println("the date is:"+formatter.formatLocal(date.getTime()));
        return formatter.formatLocal(date.getTime());
    }
    protected boolean navigationClick(int status, int time) {
        /*_DeleteMessage = new MenuItem("DeleteMessage", 200, 10){
            public void run(){
                System.out.println("entered into delete item");
                int index = getSelectedIndex();
                System.out.println(" selected index is:"+index);
                for(int i=0;i<rows.size();i++){
                    rows.removeElementAt(index);
                    invalidate();
                }
            }

        };*/
        return true;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:51:43.967

试试这个 -

```
CheckboxField box;
Vector box1 = new Vector();
boolean checked = false;

for(int i=0;i<fbFrndsVector.size();i++){
    //your object class and vector.     
    FriendsRequestObject co_vec = (FriendsRequestObject)fbFrndsVector.elementAt(i);

    String name=co_vec.getSender_name();
    String id=co_vec.getSender_id();

    box = new CheckboxField(" "+name , checked, Field.USE_ALL_WIDTH){
        public void paint(Graphics graphics) {
               graphics.setColor(Color.WHITE);
              super.paint(graphics);
            }
         };

         box1.addElement(box);
         box.setMargin(8, 0, 0, 5);
         vfm.add(box);

}

add(vfm); 
```

//单击按钮时，编写以下代码-

```
 Vector selected_frnd=new Vector();
    private Vector _selected_frnds;

        for(int d=0; d<box1.size(); d++){
                CheckboxField box=(CheckboxField)box1.elementAt(d);
                  if(box.getChecked()==true){
                    FriendsRequestObject co_vec = (FriendsRequestObject)fbFrndsVector.elementAt(d);

                    String name_ = co_vec.getSender_name();
                    String id_ = co_vec.getSender_id();
                    FriendsRequestObject sfrnds = new FriendsRequestObject(id_, name_);
                    selected_frnd.addElement(sfrnds);

                  }
                } 
```

向量 selected_frnd 将包含所有选定的项目。

# php - 汇总 SQL 字段以获得总结果

> ID：10793685
> 
> 赞同：1
> 
> 时间：2012-05-29T05:49:00.210
> 
> 标签：php, sql

我正在尝试对 SQL 数据库中的多个字段求和。这些字段被称为第 1 周到第 13 周，因为它们存储每周的结果。我现在有这个但是它没有输出任何东西，任何帮助将不胜感激。干杯

```
<?php
            if ($resultsRows == 0){
            echo '<p> No results have been listed for you yet. </p>';
            }
            if ($resultsRows > 0){              
            $qrytotalresult = "SELECT SUM(week1 + week2 + week3 + week4 + week5 + week6 + week7 + week8 + week9 + week10 + week11 + week12 + week13) FROM results WHERE username = '$username'";
            $TotalResult = mysql_query($qrytotalresult);
            return $TotalResult;

            }
        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:52:20.820

`SUM()`是一个聚合函数，用于添加行。要添加列，只需使用`+`，但请注意，如果任何列为 NULL，您可能无法获得预期的结果。

```
SELECT IFNULL(week1, 0) + IFNULL(week2, 0) + IFNULL(week3, 0) AS sumweeks //etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:51:45.713

```
SELECT week1 + week2 + week3 + week4 + week5 + week6 + week7 + week8 + week9 + 
week10 + week11 + week12 + week13 as sumweeks 
FROM results WHERE username = '$username' 
```

就足够了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:54:00.003

```
 SELECT SUM(week1) + SUM(week2) + SUM(week3) + SUM(week4) + SUM(week5) +  
        SUM(week6) + SUM(week7) + SUM(week8) + SUM(week9) + SUM(week10) +  
        SUM(week11) + SUM(week12) + SUM(week13) 
 FROM results 
 WHERE username = '$username' 
 group by username 
```

这应该可以解决问题。 *（假设：每个用户有多行。如果每个用户只有一行，那么 sum 函数和 group by 子句可以省略）*

# android - Android：仅从一个 IP 地址接收数据包

> ID：10793692
> 
> 赞同：1
> 
> 时间：2012-05-29T05:49:41.197
> 
> 标签：android

如何让我的 android 平板电脑通过 wifi 仅接收来自一个 IP 地址的数据包，而不允许它从其他 IP 地址接收数据包。

这是代码

**- 用于扫描然后注册**

```
String connectivity_context = Context.WIFI_SERVICE;
            final WifiManager wifi = (WifiManager) getSystemService(connectivity_context);  
if (wifi.isWifiEnabled()) {
                        wifi.startScan();
                    }

IntentFilter i = new IntentFilter();
i.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);

BroadcastReceiver receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent i) {
        // TODO Auto-generated method stub
        ScanWiFiActivity a = ScanWiFiActivity.instance();
        WifiManager w = (WifiManager) context
                .getSystemService(Context.WIFI_SERVICE);
        List<ScanResult> l = w.getScanResults();
        a.Clear();
        for (ScanResult r : l) {
                              //do what i want with the required result
        }
    }
};
registerReceiver(receiver, i); 
```

在 for 块中，我将做所需的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:54:20.027

> 必须通过编程来解决

这是不可能的，除非通过修改固件。

根据您对“编程”的定义，您可能可以从以超级用户身份运行的应用程序在有根设备上修改 iptables，但关键（配置 iptables）不是编程问题，因此对于 StackOverflow 来说是题外话。

# richfaces - a4j:commandbutton 如何确定 bean

> ID：10793693
> 
> 赞同：0
> 
> 时间：2012-05-29T05:49:49.297
> 
> 标签：richfaces, jsf-1.2

请帮助我理解，

```
<h:form>
  <h:panelGrid columns="3">
    <h:outputText value="Age:"/>
    <h:inputText value="#{userBean.age}" size="4"/>
    <a4j:commandButton value="Enter Age" reRender="age"/>
  </h:panelGrid>
  <h:panelGrid>
    <h:outputText id="age" value="Your age: #{userBean.age}"/>
  </h:panelGrid>
</h:form> 
```

单击 commandButton 时，它如何评估要调用 setter 的 bean。它是否从输入区域内使用的 bean 中获得重新访问？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T05:59:42.323

命令按钮不这样做。命令按钮仅自行确定是否必须调用某个操作，如果是，它是哪种方法。每个输入组件都设置自己的值。实际工作是在与组件关联的`decode()`方法中完成的。在应用请求值阶段，`Renderer`JSF 遍历所有`UIForm`和组件。他们每个人首先通过自己的客户端ID作为请求参数名称获取请求参数值：`UIInput``UICommand`

```
String value = request.getParameter(input.getClientId(context)); 
```

*（在`request`这里[`HttpServletRequest`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)和`input`在这里[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)）*

然后，经过必要的转换和验证过程，最终将其设置为由其自身属性引用的 bean`value`属性。

```
input.getValueExpression("value").setValue(context.getElContext(), value); 
```

如果 bean 尚不存在于作用域中，则将评估 bean 并自动创建它，然后使用传入的值调用其上[`ValueExpression#setValue()`](http://docs.oracle.com/javaee/6/api/javax/el/ValueExpression.html#setValue%28javax.el.ELContext,%20java.lang.Object%29)的方法。`#{userBean.age}``setAge()`

这在[JSF 规范](http://jcp.org/aboutJava/communityprocess/final/jsr314/index.html)中有详细描述。

# iphone - 如何在 iphone 中使用 UIWebview 使图像地图可点击？

> ID：10793698
> 
> 赞同：0
> 
> 时间：2012-05-29T05:50:08.917
> 
> 标签：iphone, html, uiwebview, uiimageview

我正在寻找如何从 HTML 到 iPHone 本机 obj-c 获取“一个”和“公园”字符串值（这是 UIwebview 上的 image_map 坐标可点击点）。我已将代码放入获取字符串值但它没有响应...请检查并帮助

我已经用**可能的答案**更新了代码。如果图像地图和地图可点击表面更多，这将是复杂的。任何有关编码和解释的帮助和建议都将受到赞赏。提前致谢

**更新：** **对于 HTML 代码**

```
<html>
<body onload="anyFunction();">
<script language="javascript">

function anyFunction(){
window.location='value';
}

function callFromActivity(msg){
document.getElementById("circle").innerHTML = 'onclick';
    }
</script> 

 <img src="map_new123.png" width="1500" height="731" border="0" usemap="#map" />
 <a href="didTap://button1">
<map name="map">
     //want ot get below onclick values one and park in to objective c .....
<area shape="circle" coords="1047,262,26" onclick="one" />
<area shape="circle" coords="1118,590,24" onclick="park" />
</a></map> 
```

**对于 obj-c**

```
 - (BOOL)webView:(UIWebView*)aWebView shouldStartLoadWithRequest:(NSURLRequest*)request  navigationType:(UIWebViewNavigationType)navigationType
{
NSString *absoluteUrl = [[request URL] absoluteString];
if ([absoluteUrl isEqualToString:@"didTap://button1"]) {
  //        
UIAlertView *myAlert = [[[UIAlertView alloc] initWithTitle:@"Connectivity!" message:@" Hello" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil] autorelease];
    [myAlert show];

//the below line of code should get the string but its not working

 NSString* html = [myWeb stringByEvaluatingJavaScriptFromString:@"document.getElementById('circle').onclick"]; 

    return NO;
}
return YES; } 
```

**可能的答案**

```
//Html coding
<area  shape="circle" coords="1047,262,26" onclick="one" href="didTap://button1" value="one" />
<area  shape="circle" coords="1118,590,24" onclick="park" href="didTap://button2"  value="park"/>

  //Obj C

- (BOOL)webView:(UIWebView*)aWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
NSString *absoluteUrl = [[request URL] absoluteString];
if ([absoluteUrl isEqualToString:@"didTap://button1"]) {
    UIAlertView *myAlert = [[[UIAlertView alloc] initWithTitle:@"Selected  Location!"  message:@"One" delegate:self cancelButtonTitle:@"GetDirection"  otherButtonTitles:@"Quit",nil] autorelease];
    [myAlert show];

    return NO;
 }
 if ([absoluteUrl isEqualToString:@"didTap://button2"]) 
 {
     UIAlertView *myAlert = [[[UIAlertView alloc] initWithTitle:@"Selected  Location!"  message:@"Park" delegate:self cancelButtonTitle:@"GetDirection"  otherButtonTitles:@"Quit",nil] autorelease];
     [myAlert show];
     return NO;
 }
return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:31:20.043

我不确定“从 HTML 获取”到底是什么意思。最可能的解决方案是使用`UIWebView`javascript 方法：`-(NSString*)stringByEvaluatingJavaScriptFromString:`

如果您想`innerHTML`从 id 为“test”的标签中获取：

```
NSString *innerHTML = [aWebview stringByEvaluatingJavaScriptFromString:@"document.getElementById('test').innerHTML"]; 
```

# android - 无法在 HTC explore 中获取当前位置的当前纬度和经度？

> ID：10793699
> 
> 赞同：1
> 
> 时间：2012-05-29T05:50:24.200
> 
> 标签：android, gps, location

我能够在 Galaxy pop、galaxy y 中获取当前位置的当前纬度和经度。但我无法在 HTC explore 中获得当前位置？

我使用的编码如下：

```
 @Override
    protected void onStart() {

            // TODO Auto-generated method stub

            super.onStart();
            context = Context.LOCATION_SERVICE;
            locationManager = (LocationManager)getSystemService(context);
            locationManager.requestLocationUpdates(provider, 1, 1, locationListener);
            crta = new Criteria();
            crta.setAccuracy(Criteria.ACCURACY_FINE);
            crta.setAltitudeRequired(false);
            crta.setBearingRequired(false);
            crta.setCostAllowed(true);
            crta.setPowerRequirement(Criteria.POWER_LOW);
            //String provider = locationManager.getBestProvider(crta, true);
             String provider = LocationManager.GPS_PROVIDER;
             location = locationManager.getLastKnownLocation(provider);
             updateWithNewLocation(location);
            }

            private void updateWithNewLocation(Location location) {
                        String latLong;             
`enter code here`//                      myLocation = (TextView) findViewById(R.id.myLocation);
                        String addressString = "no address found";

                        if(location!=null) {
            System.out.println("Provider " + provider + " has been selected.");
            lat  = (Double) (location.getLatitude());
            lng  = (Double) (location.getLongitude()); 
        // Gomathi
                                    double valueofGPSlat = lat * 1000;
                                    int GPSsum = (int) valueofGPSlat;
                                    GPSvalue = (double) GPSsum / 1000;

                                    // Get Current Location
                                    latt = Double.toString(GPSvalue);                                                                                                                                                         
                                    // Getlon
                                    double valueofGPSlng = lng * 1000;
                                    int resultGPSsum = (int) valueofGPSlng;
                                    resultGPSvalue = (double) resultGPSsum / 1000;
                                    longt = Double.toString(resultGPSvalue);
            // GomathiEnd
                        } else {
                        latLong = " NO Location Found ";
                        }
                        //myLocation.setText("your Current Position is :\n" +latLong + "\n " + addressString );

                        Toast.makeText(UsertaskoptionsActivity.this,"your Current Position is :\n" +latt + "\n " + ""+longt , Toast.LENGTH_LONG).show();
                        }

            private LocationListener locationListener = new LocationListener()
            {
            @Override
            public void onLocationChanged(Location location) {
            updateWithNewLocation(location);
            }

            private void updateWithNewLocation(Location location) {
                        // TODO Auto-generated method stub
            }

            @Override
            public void onProviderDisabled(String provider) {          
            updateWithNewLocation(null);
            }

            @Override
            public void onProviderEnabled(String provider) {

            }

            @Override
            public void onStatusChanged(String provider, int status, Bundle extras) {

            }
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:29:19.093

如果相应的提供商尚未检索到一个位置，您将无法获得最后一个已知位置。您可以尝试运行其他一些首先使用 gps 的应用程序。通常，您应该将您的应用注册到位置更新，请查看有关“获取用户位置”的 android 开发指南[http://developer.android.com/guide/topics/location/obtaining-user-location.html](http://developer.android.com/guide/topics/location/obtaining-user-location.html)

# git - GIT：搜索所有包含小写名称的目录

> ID：10793703
> 
> 赞同：2
> 
> 时间：2012-05-29T05:50:34.920
> 
> 标签：git

我在 Windows 上使用 GIT。如何在包含小写目录名称的所有提交中搜索存储库中的目录？示例我有以下文件

*   Test1\MyDirectory\Testfile.txt
*   test2\mydirectory\Testfile.txt
*   Test3\mydirectory\Testfile.txt
*   test4\mydirectory\Testfile.txt
*   test5\mydirectory\Testfile.txt

搜索应返回以下结果。

*   test2\mydirectory\Testfile.txt
*   test4\mydirectory\Testfile.txt
*   test5\mydirectory\Testfile.txt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:55:30.753

你可以告诉 git 忽略大小写不匹配：

1.  `git config --global core.ignorecase true`（全局设置）
2.  `git config core.ignorecase true`（对于特定的存储库）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:29:03.523

[此线程](http://comments.gmane.org/gmane.comp.version-control.git/158473)可能有助于检测所有相同的路径，但它们的情况除外：

> 你可以做：

```
git ls-files | tr A-Z a-z | sort | uniq -d 
```

> 但：
> 
> 1.  它只会打印小写版本，而不是所有版本。
> 2.  它不处理带有嵌入换行符的文件名。
> 
> 您可以通过以下方式修复两者：

```
 git ls-files -z | perl -0ne '
    push @{$h{lc($_)}}, $_;
    END {
      print join("\n", @{$h{$_}}) . "\n\n"
        foreach grep { @{$h{$_}} > 1 } keys(%h);
    }
  ' 
```

线程的其余部分讨论`git ls-files`（可能很慢）与 `git ls-tree -r <commit>`.

# sqlite - 关于 sqlite 复制

> ID：10793707
> 
> 赞同：1
> 
> 时间：2012-05-29T05:51:18.413
> 
> 标签：sqlite, sqliteopenhelper

我正在使用 c++ linux 在我的应用程序中的 sqlite db 中工作。我需要在另一台机器上复制 sqlite 数据库。

为此，由于 sqlite 没有复制机制，也没有任何网络 API，我想使用 c++ fstream 读取 sqlite db 文件并在另一台机器上创建一个新的 db 文件。

我挣扎了一天。

任何人都可以在这方面帮助我。

下面是代码：

```
 ifstream _fstream;
_fstream.open("Sourcefile",ios::in); 
 ofstream _ostream;
_ostream.open("ReplicatedFile",ios::out);
_ostream << _fstream;
_ostream.close();
_fstream.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:00:47.450

您可能想查看允许在线备份数据库的内置[SQLite Backup API 。](http://www.sqlite.org/backup.html)这可用于创建一种复制形式，您当然必须自己将文件移动到远程位置（如果需要）。最好使用`sqlite_backup_*()`函数而不是直接访问文件，因为 sqlite 函数会锁定数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T10:33:06.627

我知道原来的帖子很旧，但这可能会帮助其他有类似问题的人。我不确定这是否是您想要的，但如果您需要跨多个服务器（分布式）进行复制，[Rqlite](https://github.com/otoolep/rqlite)可能适合您。

> rqlite 是一个分布式关系数据库，它使用 SQLite 作为其存储引擎。rqlite 使用 Raft 在 SQLite 数据库的所有实例之间达成共识，确保对系统所做的每一次更改都针对 SQLite 数据库的法定人数，或者根本没有。

你可以在这里阅读更多： [http ://www.philiptoole.com/replicating-sqlite-using-raft-consensus/](http://www.philipotoole.com/replicating-sqlite-using-raft-consensus/)

希望能帮助到你，

# layout - SWT Eclipse中是否有类似BOXLAYOUT的东西

> ID：10793712
> 
> 赞同：0
> 
> 时间：2012-05-29T05:51:46.793
> 
> 标签：layout, eclipse-plugin, swt, eclipse-rcp

我需要将组件一安排在其他类似 Swing 的 BoxLayout Y 轴场景之下。我想在 Gridlayout 中使用 Gridlayout ，但有没有更好的选择。我已经有 4 列，在每列内我需要添加不同的元素基于 Y 轴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:15:23.607

是的，使用`RowLayout`. 您将在[此处](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)找到更多相关信息。如果您不想包装控件（Swing 的 BoxLayout 的行为），那么您可以使用`FillLayout`它在单行或单列中布置相同大小的小部件。

# ruby - 我如何在 Lion (OSX) 上获得 ruby 1.9.x

> ID：10793715
> 
> 赞同：1
> 
> 时间：2012-05-29T05:51:51.220
> 
> 标签：ruby, macos, osx-lion, installation

我一直在玩rails，不知何故安装了ruby 1.9版和rails 3.2。我确定不记得安装它们，但它们与 git 和 hg 一起存在。

我刚刚重新安装了 Lion，ruby 版本只有 1.8.7，而且似乎没有安装 rails。

我之前确实安装了 Xcode。Xcode 会升级我的 ruby​​ 版本吗？我在网上找到的所有说明都建议使用 ruby​​-build 或 rvm。但我不记得上次使用这些...

我失去理智了吗？

Xcode 4.3 是否包含 git？

~S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:03:50.963

我不确定您之前是如何使用 Rails 构建 1.9 版本的，但我相当肯定它们不会默认出现在 OSX 上。

如果您安装了 Xcode 4.3，那么在尝试安装一些旧版本的 Ruby 时可能会遇到一些问题。无论如何，在安装新的 ruby​​ 之前，您都需要从 Xcode 安装命令行工具。我强烈建议您使用 RVM，即使您以前没有使用过它。它只会让事情变得更干净。

如果您想安装任何 <1.9.3 的 ruby​​ 版本，您需要阅读这篇博文：http: [//jfire.io/blog/2012/03/02/xcode-4-dot-3-homebrew-and -红宝石/](http://jfire.io/blog/2012/03/02/xcode-4-dot-3-homebrew-and-ruby/)

^ 请注意，以上链接假定您已安装自制软件。

希望我能有所帮助。

# wpf - 如何发现 ScrollViewer 在 WPF 中滚动到末尾？

> ID：10793717
> 
> 赞同：30
> 
> 时间：2012-05-29T05:52:13.423
> 
> 标签：wpf, scrollviewer

我的自定义控件中有一个`ScrollViewer`实例......我需要scorollview是否滚动到End的要求？有什么办法吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-29T09:59:12.107

您可以通过以下方式进行检查：

```
...
scrollViewer.ScrollChanged += OnScrollChanged;
...

private void OnScrollChanged(object sender, ScrollChangedEventArgs e)
{
   var scrollViewer = (ScrollViewer)sender;
   if (scrollViewer.VerticalOffset == scrollViewer.ScrollableHeight)
          MessageBox.Show("This is the end"); 
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-07T20:19:14.403

这是我的 MVVM 友好版本：

```
public static class ScrollHelper
{
    public static readonly DependencyProperty ScrollToBottomProperty = DependencyProperty.RegisterAttached("ScrollToBottom", typeof(ICommand), typeof(ScrollHelper), new FrameworkPropertyMetadata(null, OnScrollToBottomPropertyChanged));

    public static ICommand GetScrollToBottom(DependencyObject ob)
    {
        return (ICommand) ob.GetValue(ScrollToBottomProperty);
    }

    public static void SetScrollToBottom(DependencyObject ob, ICommand value)
    {
        ob.SetValue(ScrollToBottomProperty, value);
    }

    private static void OnScrollToBottomPropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var scrollViewer = obj as ScrollViewer;

        scrollViewer.Loaded += OnScrollViewerLoaded;

    }

    private static void OnScrollViewerLoaded(object sender, RoutedEventArgs e)
    {
        (sender as ScrollViewer).Loaded -= OnScrollViewerLoaded;

        (sender as ScrollViewer).Unloaded += OnScrollViewerUnloaded;
        (sender as ScrollViewer).ScrollChanged += OnScrollViewerScrollChanged;
    }

    private static void OnScrollViewerScrollChanged(object sender, ScrollChangedEventArgs e)
    {           
        var scrollViewer = (ScrollViewer)sender;
        if (scrollViewer.VerticalOffset >= scrollViewer.ScrollableHeight)
        {
            var command = GetScrollToBottom(sender as ScrollViewer);
            if (command == null || !command.CanExecute(null))
                return;

            command.Execute(null);
        }
    }

    private static void OnScrollViewerUnloaded(object sender, RoutedEventArgs e)
    {
        (sender as ScrollViewer).Unloaded -= OnScrollViewerUnloaded;
        (sender as ScrollViewer).ScrollChanged -= OnScrollViewerScrollChanged;
    }

} 
```

# objective-c - ^ 运算符对 BOOL 做了什么？

> ID：10793720
> 
> 赞同：2
> 
> 时间：2012-05-29T05:52:27.443
> 
> 标签：objective-c, boolean

这个声明是什么意思？

```
isChecked = isChecked ^ 1; 
```

`isChecked`是一个`BOOL`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T05:56:08.013

“^”是异或运算，所以0翻转为1，1翻转为零。结果应与 相同`isChecked = !isChecked`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:56:31.113

它将 XOR isChecked 与 1 所以我认为 true ^ 1 = 0(false) 和 false ^1 = 1(true)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T05:58:42.633

每个人都在说它对布尔值进行异或运算——这是真的——但这里的目的是*切换*布尔值。

像这样进行按位切换的优点是速度和能够非常详细地处理位。

更多[位运算符](http://www.cprogramming.com/tutorial/bitwise_operators.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-29T11:05:04.370

它只翻转`BOOL`. 不是逻辑否定的可靠方法。如果有人疯狂到将 a`BOOL`变量设置为某个数字，例如 5。那么做`^ 1`只会将值的最后一位翻转为 4，它仍然被评估为`YES`。

如果要逻辑否定，请改用`!`运算符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T05:56:23.010

`^`是[异或](http://en.wikipedia.org/wiki/Exclusive_or)运算符。

在您的示例中，它用于创建切换 -仅在之前未设置`isChecked`时才会设置。`isChecked`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-29T05:56:50.843

这是按位异或运算符，将 0 更改为 1，将 1 更改为 0。[在这里](http://www.dummies.com/how-to/content/objectivec-operators.html)查看所有操作员。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-29T05:59:16.273

“^”称为异或或异或运算。在这种情况下，它将布尔值从真变为假，反之亦然。

要了解更多信息，请查看此[链接](http://en.wikipedia.org/wiki/Exclusive_or)

# android - Android Jsoup select() 错误

> ID：10793723
> 
> 赞同：3
> 
> 时间：2012-05-29T05:52:58.890
> 
> 标签：android, jsoup

我正在尝试从该网站获取一些信息：

[http://www.131500.com.au/plan-your-trip/trip-planner?itd_name_origin=hurstville&itd_name_destination=town+hall](http://www.131500.com.au/plan-your-trip/trip-planner?itd_name_origin=hurstville&itd_name_destination=town+hall)

表结构为：

```
<td headers="header2">
    Take the Eastern Suburbs and Illawarra train (CityRail)                                 
    <br />
    <b>Dep: 12:35pm&nbsp; Hurstville Station Platform 3</b>
    <br />
    <b>Arr: 1:06pm&nbsp; Town Hall Station Platform 5, Sydney</b>
    <br />
</td> 
```

我的代码：

```
import java.io.IOException;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

import android.app.Activity;
import android.os.Bundle;

public class JsouptestActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    jsouptest();
}

public void jsouptest() {
    Document doc = null;
    try {
        doc = Jsoup
                .connect(
                        "http://www.131500.com.au/plan-your-trip/trip-planner?itd_name_origin=hurstville&itd_name_destination=town+hall")
                .get();
    } catch (IOException e) {
        Elements tables = doc.select("div#boxbody");
        System.out.println(tables.get(0).text().toString());
    }

}
} 
```

我期望看到的：

```
Take the Eastern Suburbs and Illawarra train (CityRail)                                 

Dep: 12:35pm ; Hurstville Station Platform 3

Arr: 1:06pm ; Town Hall Station Platform 5, Sydney 
```

我试过的：

```
Elements tables = doc.select("div#boxbody table#dataTbl");

Elements tables = doc.select("div#boxbody table#dataTbl+widthcol2and3"); 
```

因为数据实际上在

```
<table class="dataTbl widthcol2and3" cellspacing="0" style="margin:0px ! important;border-right:0px none;" summary="Search Results Details"> 
```

所以我想我不能只使用这个（dataTbl 和 widthcol2and3 之间的空格）：

```
Elements tables = doc.select("div#boxbody table#dataTbl widthcol2and3"); 
```

所以我尝试了：

```
Elements tables = doc.select("div#boxbody iewfix"); // and div#boxbody+iewfix 
```

但是每次我尝试在模拟器中运行测试应用程序时，我得到了

```
The application has stopped unexpectedly. Please try again. 
```

日志如下图：

```
05-29 15:58:42.575: W/dalvikvm(755): threadid=3: thread exiting with uncaught exception     (group=0x4001b188)
05-29 15:58:42.575: E/AndroidRuntime(755): Uncaught handler: thread main exiting due to uncaught exception
05-29 15:58:42.585: E/AndroidRuntime(755): java.lang.NoClassDefFoundError: org.jsoup.Jsoup
05-29 15:58:42.585: E/AndroidRuntime(755):  at com.yeasiz.jsouptest.JsouptestActivity.jsouptest(JsouptestActivity.java:25)
05-29 15:58:42.585: E/AndroidRuntime(755):  at com.yeasiz.jsouptest.JsouptestActivity.onCreate(JsouptestActivity.java:18)
05-29 15:58:42.585: E/AndroidRuntime(755):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-29 15:58:42.585: E/AndroidRuntime(755):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
05-29 15:58:42.585: E/AndroidRuntime(755):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-29 15:58:42.585: E/AndroidRuntime(755):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-29 15:58:42.585: E/AndroidRuntime(755):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-29 15:58:42.585: E/AndroidRuntime(755):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-29 15:58:42.585: E/AndroidRuntime(755):  at android.os.Looper.loop(Looper.java:123)
05-29 15:58:42.585: E/AndroidRuntime(755):  at        android.app.ActivityThread.main(ActivityThread.java:4363)
05-29 15:58:42.585: E/AndroidRuntime(755):  at    java.lang.reflect.Method.invokeNative(Native Method)
05-29 15:58:42.585: E/AndroidRuntime(755):  at java.lang.reflect.Method.invoke(Method.java:521)
05-29 15:58:42.585: E/AndroidRuntime(755):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-29 15:58:42.585: E/AndroidRuntime(755):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-29 15:58:42.585: E/AndroidRuntime(755):  at dalvik.system.NativeStart.main(Native Method)
05-29 15:58:42.595: I/dalvikvm(755): threadid=7: reacting to signal 3
05-29 15:58:42.595: E/dalvikvm(755): Unable to open stack trace file '/data/anr/traces.txt':      Permission denied 
```

jsoup 似乎找不到合适的课程。

我认为我的 selector-syntax 是错误的，但是我查看了[Use selector-syntax to find elements](http://jsoup.org/cookbook/extracting-data/selector-syntax)，我仍然无法解决这个问题。

请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:06:56.610

你得到什么例外，在哪一行？

对于初学者，您不要在 catch() 中执行此操作：

```
org.jsoup.select.Elements tables = doc.select("div#boxbody");
System.out.println(tables.get(0).text().toString()); 
```

只有在连接过程中出现错误时才会执行，如果有，则此时 doc 将始终为 null。

其次，您提供的代码在我尝试时会引发连接超时异常。试试这个（对我有用）：

```
Document doc = null;
InputStream is = null;
String url = "http://www.131500.com.au/plan-your-trip/trip-planner?itd_name_origin=hurstville&itd_name_destination=town+hall";
is =new URL(url).openStream();
doc = org.jsoup.Jsoup.parse(is , "utf-8", url);
is.close(); 
```

此外，您尝试按 id 选择元素：“div#boxbody”，其中“boxbody”是类名的一部分。我打开了您提供的链接，并且有多个类名包含“boxbody”一词的 div 元素，这不是类的全名。我认为您感兴趣的班级名称将是“boxbody iewfix”。也许它会起作用，但我注意到有时 Jsoup 对空格的反应很奇怪（getElementsByClass("boxbody iewfix") 对我不起作用）。

我不喜欢select，我在使用它时通常会犯太多错误，所以我会这样做：

```
Elements tables = doc.getElementsByAttributeValueStarting("class", "boxbody"); //I checked, it works 
```

然后

```
tables.get(2).text(); // because the you're interested in third element which class name starts with "boxbody" 
```

它将返回：

*“模式详情乘坐东郊和伊拉瓦拉火车 (CityRail) 出发：下午 5:05 Hurstville 站 3 号站台 到达：下午 5:31 市政厅站站 5 号站台，悉尼 地图此行程路线图替代时间”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:57:28.280

那会给你你所期望的。

```
Elements lines = doc.select("td[headers=header2]");
String linesToStr = lines.text();
String[] linestoStrArray = linesToStr.split("\n");

for (String line : linesToStrArray)
    System.out.println(line + "\n"); 
```

# c - 在c中使用rpc将字符串作为参数传递

> ID：10793727
> 
> 赞同：1
> 
> 时间：2012-05-29T05:53:07.503
> 
> 标签：c, rpc

我正在尝试编写一个简单的 RPC 程序，它将字符串作为参数并将其长度返回给调用程序。我正在使用 RPCGEN 生成所需的存根。代码如下： prog.x 文件：

```
 program PROGRAM_PROG {
    version PROGRAM_VERS {
    int fun(string) = 1;    /* procedure number = 1 */
    } = 1;                          /* version number = 1 */
    } = 0x31234567;                     /* program number = 0x31234567 */ 
```

client.c 文件：

```
 #include <stdio.h>
    #include <string.h>
    #include <stdlib.h>
    #include <rpc/rpc.h>    /* standard RPC include file */
    #include "prog.h"       /* this file is generated by rpcgen */
    #include "math.h"
    main(int argc, char *argv[])
    {
        CLIENT *cl;         /* RPC handle */
        char *server;
char *word;
int *lresult;      /* return value from bin_date_1() */

if (argc != 3) {
    fprintf(stderr, "usage: %s hostname\n", argv[0]);
    exit(1);
}

server = argv[1];
word = argv[2];

printf("%s======\n", server);
printf("%s======\n", word);
/*
 * Create client handle
 */

if ((cl = clnt_create(server, PROGRAM_PROG, PROGRAM_VERS, "udp")) == NULL) {
    /*
     * can't establish connection with server
     */
     clnt_pcreateerror(server);
     exit(2);
}

/*
 * First call the remote procedure "bin_date".
 */
printf("123\n");
if ( (lresult = fun_1(&word, cl)) == NULL) {
    clnt_perror(cl, server);
    exit(3);
}
printf("456\n");
printf("time on host %s = %d and look, word: %s\n",server, *lresult, word);

clnt_destroy(cl);         /* done with the handle */
exit(0); 
```

}

最后是 serverproc.c 文件：

```
 #include <stdio.h>
    #include <time.h>
    #include <string.h>
    #include <stdlib.h>
    #include <rpc/rpc.h>
    #include "prog.h"

    int *fun_1(char **p, CLIENT *cl)
    {
    int len;
    int t;
    t = strlen(*p);

    return &t;
    }

    int * fun_1_svc(char **p, struct svc_req *cl){
    CLIENT *client;
    return(fun_1(0, client));
    } 
```

代码编译得很好，但是在运行它时，它只是挂起，我必须使用 Ctrl-C 来结束它。问题可能出在 serverproc.c 文件中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:45:55.117

这可能是由于以下原因：

*   检查是否安装了 rpcbind 或 portmap

    ```
     sudo apt-get install rpcbind
    ```

*   如果已安装，则只做一件事。**：仅使用rpcgen**生成您的客户端和服务器代码，如下所示：

```
 rpcgen prog.x -a 
```

它将为您生成示例客户端和服务器代码。

*   只需在客户端代码和服务器代码中添加几行，将计算的长度设置为静态变量“result”，（已经存在）。
*   试一试，一定会成功的！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-28T21:32:28.690

挂起是由于服务器正在侦听客户端连接。使用 ctrl+c 终止服务器。这可以通过在 serverproc.c 中添加 printf 语句来验证，并检查是否在尝试客户端连接时在服务器控制台中打印。此外，如果您的客户端似乎挂起，那么您可能还没有启动端口映射器。

启动端口映射器的命令

操作系统命令 Mac OS X

```
launchctl start com.apple.portmap 
```

Linux

```
/sbin/portmap 
```

*BSD

```
/usr/sbin/rpcbind 
```

# android - 来自资产的 Android gson 流式传输

> ID：10793732
> 
> 赞同：4
> 
> 时间：2012-05-29T05:53:38.310
> 
> 标签：android, gson

我有 9 MB txt 文件，里面有 json 对象。我需要解析使用 gson 流，我已经完成了

```
 AssetManager assetManager = activity.getAssets();
            InputStream inputStream;
            inputStream = assetManager.open(fileName);
            JsonReader reader = new JsonReader(new InputStreamReader(inputStream,
                    "UTF-8"));
    JsonElement json = new JsonParser().parse(reader);
                JsonArray array = json.getAsJsonArray();
                Gson gson = new Gson();
                String interationString;
                for (JsonElement jsonElement : array) {
                    interationString = jsonElement.getAsJsonObject().get("drug")
                            .toString();
                    Log.d("drug", interationString);
                    Drug drug = gson.fromJson(interationString, Drug.class);
                    Log.d("drug", "" + drug);
                    DatabaseManager.getInstance().saveDrug(drug);
                }
```

我已将 json 文件放入评估中。但是在 4.0 的设备上工作，但在模拟器 2.3 中它不起作用并显示日志

```
05-29 11:19:41.290: D/dalvikvm(164): GC_EXPLICIT freed 74K, 46% free 3344K/6151K, external 1323K/1554K, paused 84ms
05-29 11:19:46.330: D/dalvikvm(373): GC_EXPLICIT freed 2K, 51% free 2718K/5511K, external 716K/1038K, paused 87ms
05-29 11:19:51.370: D/dalvikvm(203): GC_EXPLICIT freed 15K, 51% free 3083K/6215K, external 716K/1038K, paused 102ms
05-29 11:19:56.391: D/dalvikvm(573): GC_EXPLICIT freed 53K, 51% free 2771K/5639K, external 964K/1467K, paused 79ms 
```

然后停止，我尝试解析小文件，它工作正常。任何人都可以帮助解析Android中的长文件，以便它可以在所有Android设备上工作。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T13:19:30.697

通过将流解析与 Gson 的数据绑定混合使用，您将获得最佳性能。这是一个可能适用于您的数据集的示例：

```
public List<Drug> readJsonStream(InputStream in) throws IOException {
    JsonReader reader = new JsonReader(new InputStreamReader(in, "UTF-8"));
    List<Drug> drugs = new ArrayList<Drug>();
    reader.beginArray();
    while (reader.hasNext()) {
        reader.beginObject();
        while (reader.hasNext()) {
            String name = reader.nextName();
            if (name.equals("drug")) {
                Drug drug = gson.fromJson(reader, Drug.class);
                drugs.add(drug);
            } else {
                reader.skipValue();
            }
        }
        reader.endObject();
    }
    reader.endArray();
    reader.close();
    return drugs;
} 
```

请注意，对`beginArray`/`endArray`和`beginObject`/的调用`endObject`必须是平衡的。更多详细信息可在[Gson 的流媒体指南](https://sites.google.com/site/gson/streaming)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:09:15.093

看起来您正在使用 android 附带的 vanilla XML 解析 - 它使用了一种 DOM 模型，并将完整的 JSON 吞入内存中的对象模型中（这就是您所看到的 - 大量的内存分配）。

您应该确保您的解析器使用拉模型。我的选择是 GSON，因为它的内存占用比 jackson 低。这是我在 GSON 之上用来解析我的大 JSON 数据的小型数据绑定库：

[https://github.com/ko5tik/jsonserializer](https://github.com/ko5tik/jsonserializer)

# .htaccess - .htaccess 从目录根重定向到该目录中的 url

> ID：10793733
> 
> 赞同：2
> 
> 时间：2012-05-29T05:53:46.717
> 
> 标签：.htaccess, magento, magento-1.3

我正在尝试使 Magento 的默认页面存储特定的产品页面而不是默认的 cms 页面，并且需要一些帮助。

1.  我的 Magento 安装有两个商店 - 商店 1 和商店 2：（www.mydomain.com/store1 和 www.mydomain.com/store2）
2.  我正在尝试将登陆 store2 主页的访问者重定向到该商店中的 URL：www.mydomain.com/store2/sample-product.html。重定向不适用于该商店中的其他网址。

我尝试通过 Magento 配置中的 'default web url' 字段执行此操作，但这不起作用，可能是因为这是 Magento (1.3.2.1) 的旧版本。所以我试图通过 store2 目录中的 .htacess 文件来做到这一点 - www.mydomain.com/store2

任何帮助将不胜感激。

在 www.mydomain.com/store2 中添加 .htacess：

```
############################################
## uncomment these lines for CGI mode
## make sure to specify the correct cgi php binary file name
## it might be /cgi-bin/php-cgi

#    Action php5-cgi /cgi-bin/php5-cgi
#    AddHandler php5-cgi .php

############################################
## GoDaddy specific options

#   Options -MultiViews

## you might also need to add this line to php.ini
##     cgi.fix_pathinfo = 1
## if it still doesn't work, rename php.ini to php5.ini

############################################
## this line is specific for 1and1 hosting

    #AddType x-mapp-php5 .php
    #AddHandler x-mapp-php5 .php

############################################
## default index file

    DirectoryIndex index.php

<IfModule mod_php5.c>

############################################
## adjust memory limit

#    php_value memory_limit 64M
    php_value memory_limit 128M
    php_value max_execution_time 18000

############################################
## disable magic quotes for php request vars

    php_flag magic_quotes_gpc off

############################################
## disable automatic session start
## before autoload was initialized

    php_flag session.auto_start off

############################################
## enable resulting html compression

    #php_flag zlib.output_compression on

###########################################
# disable user agent verification to not break multiple image upload

    php_flag suhosin.session.cryptua off

###########################################
# turn off compatibility with PHP4 when dealing with objects

    php_flag zend.ze1_compatibility_mode Off

</IfModule>

<IfModule mod_security.c>
###########################################
# disable POST processing to not break multiple image upload

    SecFilterEngine Off
    SecFilterScanPOST Off
</IfModule>

<IfModule mod_deflate.c>

############################################
## enable apache served files compression
## http://developer.yahoo.com/performance/rules.html#gzip

    # Insert filter on all content
    ###SetOutputFilter DEFLATE
    # Insert filter on selected content types only
    #AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript

    # Netscape 4.x has some problems...
    #BrowserMatch ^Mozilla/4 gzip-only-text/html

    # Netscape 4.06-4.08 have some more problems
    #BrowserMatch ^Mozilla/4\.0[678] no-gzip

    # MSIE masquerades as Netscape, but it is fine
    #BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

    # Don't compress images
    #SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary

    # Make sure proxies don't deliver the wrong content
    #Header append Vary User-Agent env=!dont-vary

</IfModule>

<IfModule mod_ssl.c>

############################################
## make HTTPS env vars available for CGI mode

    SSLOptions StdEnvVars

</IfModule>

<IfModule mod_rewrite.c>

############################################
## enable rewrites

    Options +FollowSymLinks
    RewriteEngine on

############################################
## you can put here your magento root folder
## path relative to web root

#    RewriteBase /magento/

############################################
## workaround for HTTP authorization
## in CGI environment

    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

############################################
## always send 404 on missing files in these folders

    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

############################################
## never rewrite for existing files, directories and links

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

############################################
## rewrite everything else to index.php

    #RewriteRule .* index.php [L]
############################################
#For store2
    #RewriteBase /store2/
    #RewriteRule ^$ sample-product.html [L,R]

#########################################    

</IfModule>

############################################
## Prevent character encoding issues from server overrides
## If you still have problems, use the second line instead

    AddDefaultCharset Off
    #AddDefaultCharset UTF-8

<IfModule mod_expires.c>

############################################
## Add default Expires header
## http://developer.yahoo.com/performance/rules.html#expires

    ExpiresDefault "access plus 1 year"

</IfModule>

############################################
## By default allow all access

    Order allow,deny
    Allow from all

############################################
## If running in cluster environment, uncomment this
## http://developer.yahoo.com/performance/rules.html#etags

    #FileETag none 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:07:56.277

将其放入 store2 文件夹中的 .htaccess 文件中：

```
RewriteEngine on
RewriteBase /store2/
RewriteRule ^$ sample-product.html [L] 
```

如果您希望重定向是外部的，请使用它`[L,R]`而不是。`[L]`

# python - 在某些条件下“困难”排序

> ID：10793737
> 
> 赞同：2
> 
> 时间：2012-05-29T05:54:27.047
> 
> 标签：python, list, sorting, object

好的。这可能很困难，但我一直在努力奋斗，但没有很大的进步，所以我想知道你们的想法。

假设我有以下对象列表：

```
objects = [
        {'id': '1', 'w': 0.20}, 
        {'id': '1.1', 'w': 0.80}, 
        {'id': '1.2', 'w': 0.20},
        {'id': '1.3', 'w': 0.30},
        {'id': '1.1.1', 'w': 0.60},
        {'id': '1.1.2', 'w': 0.70},
        {'id': '1.1.3', 'w': 0.40},
        {'id': '1.2.1', 'w': 0.30},
    ] 
```

我想按“id”（例如`'1', '1.1', '1.1.1', '1.1.2', '1.1.3', '1.2', '1.2.1', '1.3'`）对该列表进行排序，但是具有相同父级的所有元素都需要按“w”排序（相反）。我所说的“同父异母”是什么意思？那么，“1”是“1.1”、“1.2”和“1.3”的父级。同样，“1.1”是“1.1.1”、“1.1.2”、“1.1.3”的父级，“1.2”是“1.2.1”的父级。为了更好地说明这一点，假设这是一个带有嵌套评论的线程的表示（'1' 是原始帖子，'1.1' 是它的答案，等等）。

目前，我已经能够达到以下形式：

```
[ [ {'w': 0.2, 'id': '1'} ], [ {'w': 0.8, 'id': '1.1'}, {'w': 0.3, 'id': '1.3'}, 
{'w': 0.2, 'id': '1.2'} ], [ {'w': 0.7, 'id': '1.1.2'}, {'w': 0.6, 'id': '1.1.1'},
{'w': 0.4, 'id': '1.1.3'} ], [ {'w': 0.3, 'id': '1.2.1'} ] ] 
```

如您所见，每个嵌套列表都包含其他元素的子元素。例如，第二个嵌套列表`[ {'w': 0.8, 'id': '1.1'}, {'w': 0.3, 'id': '1.3'}, {'w': 0.2, 'id': '1.2'} ]`包含 element 的所有子项`[ {'w': 0.2, 'id': '1'} ]`。此外，每个嵌套列表都按“w”排序。

最终结果应该是这样的（假设链接所有内部列表 - `list(itertools.chain(*b))`）：

```
{'id': '1', 'w': 0.20}, {'id': '1.1', 'w': 0.80}, {'id': '1.1.2', 'w': 0.70}, 
{'id': '1.1.1', 'w': 0.60}, {'id': '1.1.3', 'w': 0.40}, {'id': '1.3', 'w': 0.30}, 
{'id': '1.2', 'w': 0.20},   {'id': '1.2.1', 'w': 0.30} 
```

基本上，首先是父母，然后是它的孩子（按'w'排序），这同样适用于每个元素（如果它有孩子，当然 - 这里`{'id': '1.3', 'w': 0.30}`没有孩子，所以我们不需要做任何事情它）。

我已经尝试了一些事情（太复杂以至于不值得解释）。我最终得到了很多条件和一个丑陋的代码。

我怎样才能完成这种排序？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:14:11.117

简单的排序不会解决您的问题，因为不可能比较任何两个元素并立即知道何时出现在另一个之前（父母的权重可能会改变排序）。

您需要将列表处理成树形结构，然后按顺序提取：

```
tree = {}

for d in objects:
    ids = d['id'].split('.')
    w = d['w']
    # walk into the tree, creating nodes as necessary
    subtree = [0,tree]
    for n in ids:
        if n not in subtree[1]:
            subtree[1][n] = [0,{}] # w, list of nodes
        subtree = subtree[1][n] # recurse
    # subtree is now the relevant node, set w
    subtree[0] = w

## now we have a tree:
## >>> pprint.pprint(tree, width=10)
## {'1': [0.2,
##       {'1': [0.8,
##              {'1': [0.6,
##                     {}],
##               '2': [0.7,
##                     {}],
##               '3': [0.4,
##                     {}]}],
##        '2': [0.2,
##              {'1': [0.3,
##                     {}]}],
##        '3': [0.3,
##              {}]}]}

# now walk the tree and extract the nodes:
result = []
def walk_subtree(subtree, path=[]):
    keyweights = [(subtree[key][0], key) for key in subtree]
    # walk through nodes at this level, outputting.
    for weight, key in sorted(keyweights, reverse=True):
        result.append(('.'.join(path + [key]), weight))
        walk_subtree(subtree[key][1], path=path+[key])

walk_subtree(tree)

##>>> pprint.pprint(result)
##[('1', 0.2),
## ('1.1', 0.8),
## ('1.1.2', 0.7),
## ('1.1.1', 0.6),
## ('1.1.3', 0.4),
## ('1.3', 0.3),
## ('1.2', 0.2),
## ('1.2.1', 0.3)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:06:51.683

用比较器排序。也就是说，你写了一个看起来像的方法

```
def comparator(x, y):
    ## some code that sets value to -1 if x is "less than" y
    ## or 1 if x is "greater than or equal to" y.
    return value 
```

然后打电话`objects.sort(comparator)`，你应该被设置。

这样，您一次只需要比较两个项目。只要你保持一致，这应该不是问题。

# javascript - 使用 this.inherited 在 dojo 中调用祖父方法

> ID：10793739
> 
> 赞同：4
> 
> 时间：2012-05-29T05:54:36.937
> 
> 标签：javascript, inheritance, dojo

我正在尝试创建一个 dojo 小部件的自定义子类（*父*级,`dojox.mobile.ListItem`派生自*祖父*级, `dijit._WidgetBase`）。

我想从父级覆盖和修改的方法之一包含对`this.inherited(arguments)`. 这意味着我不能直接将它复制到我的子类中（因为`this.inherited`来自我的方法的调用将调用父类的方法，而不是祖父母的方法，就像在原始上下文中所做的那样）。我不想调用父类的方法，因为我故意调整它的作用（我想创建不同的 DOM 元素来`ListItem`创建）。但我想保留标准的祖父母类功能`ListItem`。

所以我想直接在当前对象上调用祖父类的方法。有没有办法做到这一点？如果没有，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:00:07.790

使用`dijit._WidgetBase.prototype.methodName()`将失去子小部件的范围，这可能会或可能不会产生后果。你应该使用

`dijit._WidgetBase.prototype.methodName.apply(this, arguments)`

这是一个小提琴来说明我的意思

[http://jsfiddle.net/cswing/4nGCH/](http://jsfiddle.net/cswing/4nGCH/)

# iphone - 如何在 UISplitView 的 UITableView 子视图中进行多行选择？

> ID：10793749
> 
> 赞同：3
> 
> 时间：2012-05-29T05:55:21.813
> 
> 标签：iphone, uitableview, uisplitview

我想在 UISplitview 的子视图 uitableview（uipopover 视图）中进行多行选择。选定的行信息应显示在拆分视图的详细窗格中的 Lable 中。

我设法获得了多行选择，但没有在详细窗格中显示选定的行信息。

任何帮助/片段代码将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:49:28.877

由于您没有给我们一些示例代码，我们无法为您提供确切的代码片段。有很多方法可以填充 tableView 那么我们怎么知道你是怎么做到的呢？

尽管如此，我会告诉你它应该如何抽象地工作。您将需要一个具有当前选择的数组，或者 - 正如@Ricard Pérez del Campo 所建议的那样 - 您将一个属性添加到包含状态的数据模型中（例如`selected`）。

第 2 步，您将在每次
a) 更改选择或
b)`tableView`显示在屏幕上（`viewWillAppear`并出现弹出窗口）时检查此属性（或数组）

因此，您需要一个可从所有地方获得的数据源（在您的情况下为`Popover`、 the`splitView`和 a `detailView`）

你说一个`tableView`已经工作了，所以第二个的问题可能是选择`dataSource`。调用中
还有一个方法将为您提供当前选择的数组。您可以将该选择应用于另一个选择，但这是一种骇人听闻的方式，您绝对应该更改您的数据模型。`UITableView``indexPathsForSelectedRows``tableView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:27:39.817

在表视图控制器中添加以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tableView.allowsMultipleSelection = YES;
} 
```

在表视图委托中添加：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *selectedRows = [tableView indexPathsForSelectedRows];

    NSMutableArray *mySelectedObjects = [NSMutableArray array];

    for (NSIndexPath *indexPath in selectedRows) {
        MyObject *object = [datasource objectAtIndex:indexPath.row];
        [mySelectedObjects addObject:object];
    }

    [self showSelectedObjectsInDetailPane];
} 
```

# magento - 如何在 Magento 中设置 cookie

> ID：10793756
> 
> 赞同：11
> 
> 时间：2012-05-29T05:56:13.077
> 
> 标签：magento

我正在尝试为在 magento 主页中使用时事通讯 pop 注册的用户设置 cookie

当用户订阅时事通讯时，我在 magento 主页中弹出一个带有时事通讯订阅选项的 cookie，该 cookie 设置为该时事通讯不会在下次访问时显示他

这是如何设置cookie的代码

```
<?php
$value=$_POST['newslettertext'];
setcookie("EmailCookie", $value);
setcookie("EmailCookie", $value , time()+86400,"/");  
function gotopage($url)
{
    echo "<script language=\"javascript\">";
    echo "window.location = '".$url."'; \n";
    echo "</script>";
}

$url="http://abc.com";
gotopage($url);

?> 
```

上面的代码设置了一个cookie

订阅后，用户重定向到同一页面，我检查是否设置了 cookie，然后执行弹出代码，否则将不弹出

但订阅后仍然显示弹出窗口

我正在使用此代码检查 cookie

```
<?php 
if(!isset($_COOKIE['EmailCookie'] ) )
{
//popup code goes here
}
?> 
```

哪里做错了？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-29T06:44:08.673

```
require_once 'Mage.php';
Mage::app();
$cookie = Mage::getSingleton('core/cookie');
$cookie->set('cookiename', 'cookievalue' ,time()+86400,'/'); 
```

here is the answer

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-04T05:59:53.913

这是解决方案：

```
Mage::getModel('core/cookie')->set($name, $value, $period, $path, $domain, $secure,$httponly); 
```

有 7 个参数，其中 name 和 value 是必需的；其他参数是可选的，可以设置为空。让我们一一来看。

```
$name= Cookie name

$value= Cookie Value

$period= Cookie expire date (by default the period is set as 3600 seconds)

$path= Cookies path

$domain= Cookies domain

$secure= Cookies Security

$httponly= Http only when yes 
```

# indexing - 在 Riak 中查找数字二级索引的最大值

> ID：10793760
> 
> 赞同：1
> 
> 时间：2012-05-29T05:56:36.297
> 
> 标签：indexing, max, riak

给定 Riak 中的数字二级索引，我可以进行范围查询，例如：

> “查找索引“sn”在 1 到 10 之间的所有值*”。

有没有办法找到数字索引的**最大值？**IE

> “找到索引“sn”的最大值。

* 它实际上找到了所有主键（不是值本身），但在这里没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:56:37.533

不，你不能要求 Riak 给你 2i 的最大值。您将必须执行一个 map/reduce 作业并解析每个 2i 值，其中包括一个 reduce 作业以找到最大值。

如果这是您的应用程序的重要组成部分，那么您可以通过其他方式解决该问题。找到最大值后，您可以将二级索引添加到表明它是最大值的值。如果最大值随时间变化，您可以：

*   `maxval_int`在 2i所在的桶上映射/减少`1`。
*   如果只有一个结果，则返回它。
*   如果有多个结果，则减少以找到最大值。
*   `maxval_int`从不再是最大值的每个对象中删除索引。
*   添加新值时检查当前最大值，相应地更新索引。

*类似read-repair*的小功能用于处理集群中的节点被分区的情况。

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:23:46.743

或者，如果您的 maxval 单调增加，您可以将其存储在特殊键下，例如 max_2i_index=25 然后如果您将存储桶设置为允许兄弟姐妹，您可以通过提供简单的突变器和冲突解决器来解决潜在的兄弟姐妹。您也可以考虑适当设置 R、W、PR、PW、N 以避免不一致。

# android - 如何以编程方式清除 Android 中的蓝牙名称缓存？

> ID：10793761
> 
> 赞同：7
> 
> 时间：2012-05-29T05:56:40.803
> 
> 标签：android, android-intent, bluetooth, discovery

我注意到，当配对的蓝牙设备发生名称更改时，我的 Android 设备并不总是注册该名称更改。它继续显示设备的旧名称......这对于未配对的设备来说不是问题，所以我自然猜测Android会在某处缓存配对设备的名称。

环顾四周后，我发现如果我取消配对设备并手动清除存储在我的 Android 的“蓝牙共享”应用程序中的缓存，这个问题就会消失。当然，在我再次将设备与我的 Android 配对后，问题可能会再次出现。

**TL;DR 如何强制 Android 始终显示蓝牙设备的最新名称？**

我听说过有关“fetchUuidsWithSdp”方法的一些信息，但我不确定如何使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T14:34:36.403

是的， fetchUuidsWithSdp() 是一个好主意，因为与 getUuids() 不同，它强制设备尝试连接到目标设备并更新其相关信息。

对 fetchUuidsWithSdp 的官方支持刚刚在 4.0.3 中添加，但在此之前使用反射就可以使用。

```
public static void startFetch( BluetoothDevice device ) {
    // Need to use reflection prior to API 15
    Class cl = null;
    try {
        cl = Class.forName("android.bluetooth.BluetoothDevice");
    } catch( ClassNotFoundException exc ) {
        Log.e(CTAG, "android.bluetooth.BluetoothDevice not found." );
    }
    if (null != cl) {
        Class[] param = {};
        Method method = null;
        try {
            method = cl.getMethod("fetchUuidsWithSdp", param);
        } catch( NoSuchMethodException exc ) {
            Log.e(CTAG, "fetchUuidsWithSdp not found." );
        }
        if (null != method) {
            Object[] args = {};
            try {
                method.invoke(device, args);
            } catch (Exception exc) {
                Log.e(CTAG, "Failed to invoke fetchUuidsWithSdp method." );
            }               
        }
    }
} 
```

然后通常会注册 android.bluetooth.device.action.UUID，但您可能想要注册名称更改操作。

请注意，如果您决定注册 UUID 操作，则在 API 15 之前它被拼写错误为“android.bleutooth.device.action.UUID”（蓝牙中的 e 和 u 被交换）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:41:37.663

为了记住我连接的最后一个设备，我总是将 MAC 地址保存在一个文件中

# eclipse - eclipse弹出菜单中的名称过滤器

> ID：10793768
> 
> 赞同：1
> 
> 时间：2012-05-29T05:57:49.337
> 
> 标签：eclipse, user-interface, popupmenu

如何使用名称过滤器在 Eclipse 中为两种不同的文件类型添加弹出菜单。我希望弹出菜单仅对“.wsdl”和“.xsd”文件类型可见。我尝试使用

namefilter = "*.wsdl | *.xsd"

但它没有用。

谁能帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:03:00.503

namefilter 用于`org.eclipse.ui.SelectionEnabler.verifyNameMatch(String, String)`确定允许的内容。这是一个简单的通配符测试器。在[org.eclipse.ui.popupMenus](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_popupMenus.html)中，您可能会使用可见性或启用来提供更复杂的名称选择。

您还应该考虑使用[commands](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_cmd.htm)，并且使用更灵活的核心表达式来控制可见性。

# c# - Mono ASP.NET GridView.Rows 行为不同于 .NET

> ID：10793769
> 
> 赞同：1
> 
> 时间：2012-05-29T05:58:08.370
> 
> 标签：c#, asp.net, ajax, mono

在绑定到 ObjectDataSource 的分页 GridView（包含在 UpdatePanel 中）中，我有一个 OnDataBound 事件，

```
protected void GridView1_DataBound(object sender, EventArgs e)
{
    foreach (GridViewRow row in GridView1.Rows)
    {
        // row isn't starting from the first row of current page in mono!
    }
} 
```

在 .NET 中运行时，我`GridView.Rows`总是给我当前页面中的那些（即 GridViewRow.DataItemIndex 不会是`0`它在其数据源中的正确索引）。但是在 Mono 2.10.8 上，`0`无论我正在查看哪个页面，这都给了我！

但是，GridView.Rows[0].DataItem 返回与 .NET 相同的项目。DataItemIndex 中似乎存在错误。

有没有办法解决它并在 Mono 上实现与 .NET 相同的行为，并且仍然保持与 .NET 的兼容性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:40:13.353

找到了实现这一目标的方法。

```
public static int GetDataItemIndex(this GridViewRow row)
{
    var gridView = (GridView)row.NamingContainer;
    return row.RowIndex + (gridView.PageIndex * gridView.PageSize);
} 
```

这适用于 Mono 和 .NET。

# javascript - 使用 javascript 读取二进制文件并显示在 html 页面中

> ID：10793775
> 
> 赞同：0
> 
> 时间：2012-05-29T05:58:57.120
> 
> 标签：javascript, html, binaryfiles

我使用“C”语言创建了一个包含一些记录的二进制文件。现在我想使用 Javascript 或其他语言将二进制文件内容显示到我的 HTML 页面。如何在 HTML 页面中显示二进制文件内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:36:59.250

我强烈建议不要这样做。即使您可以找到一种可靠的方式来使用 JavaScript 执行此操作，它也可能会大大降低用户的性能，因为您无法控制他们的计算机或他们使用的浏览器的速度。

JavaScript 越来越多地用于渲染，但不用于转换二进制数据然后渲染它。

如果您担心必须启动大型服务器端应用程序，请使用简单的 PHP 页面或 CSHTML WebMatrix 页面在将数据返回给客户端之前对其进行转换。您可以相对轻松地完成此操作，最终将为自己节省很多时间。

# ssis - Execute SQL Task 的单个 ResultSet 变量能否在 SSIS 中保存多个数据集？

> ID：10793776
> 
> 赞同：2
> 
> 时间：2012-05-29T05:59:02.710
> 
> 标签：ssis

我有一种情况，我必须使用两个执行 sql 任务来产生结果并存储在结果集变量 rsProgress 中。我可以为每个循环容器在两个中使用相同的结果集变量吗？

例子：

EST 1 包含查询：select eid, ename from emp where eid=2 存储在 user::rsprogress 变量中的结果。

EST2 包含查询：select eid, ename,designation from emp 其结果也可以存储在同一个用户变量 user:rsprogress 中。

稍后我想使用这个变量 user::rsprogress 用于每个循环容器。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:01:03.657

不幸的是你不能。

我建议你在第一次使用之前复制你的记录集

# java - doc到html转换后如何在jeditorepane中显示html文件？

> ID：10793782
> 
> 赞同：0
> 
> 时间：2012-05-29T05:59:28.490
> 
> 标签：java, swing, file, jeditorpane

我将一个 doc 文件转换为 html 并在我的 jeditorepane 上显示该 doc 文件。

该程序正在我的管理员帐户上运行。当我在我的 windows xp 中使用用户帐户登录时，该文件不显示。

```
try
{

               File docFile=new File("c:\\159.doc");   // file object was created
             FileInputStream finStream=new FileInputStream(docFile.getAbsolutePath()); 
             HWPFDocument doc=new HWPFDocument(finStream);

       WordExtractor wordExtract=new WordExtractor(doc);
         Document newDocument = DocumentBuilderFactory.newInstance() .newDocumentBuilder().newDocument();
    WordToHtmlConverter wordToHtmlConverter = new WordToHtmlConverter(newDocument) ;

    wordToHtmlConverter.processDocument(doc);

    StringWriter stringWriter = new StringWriter();
    Transformer transformer = TransformerFactory.newInstance()
            .newTransformer();
    transformer.setOutputProperty( OutputKeys.INDENT, "yes" );
    transformer.setOutputProperty( OutputKeys.ENCODING, "utf-8" );
    transformer.setOutputProperty( OutputKeys.METHOD, "html" );
    transformer.transform(
            new DOMSource( wordToHtmlConverter.getDocument() ),
            new StreamResult( stringWriter ) );

    String html = stringWriter.toString();

          System.out.println(html);

        FileOutputStream fos; 
            DataOutputStream dos;

           File file= new File("C:\\my.html");
      fos = new FileOutputStream(file);
      dos=new DataOutputStream(fos);
     // dos.writeInt();
      dos.writeUTF(html);

     JEditorPane editorPane = new JEditorPane();
    editorPane.setContentType("text/html");
     editorPane.setEditable(false);

            editorPane.setPage(file.toURL());

           JScrollPane scrollPane = new JScrollPane(editorPane);     

               JFrame f = new JFrame("O'Reilly & Associates");
     // Next line requires Java 1.3
                  f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                 f.getContentPane().add(scrollPane);
                f.setSize(512, 342);
                f.setVisible(true);
    }catch(Exception e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:04:25.180

你不应该**用**它[`DataOutputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataOutputStream.html)来编写一个已经是你的 HTML 格式的字符串，因为这会为你创建一个二进制文件。`C:\\my.html`当您在记事本中打开时，您会明白这一点。它看起来不像您的常规 HTML 文件，并且很可能以不可打印的字符而不是`<HTML>`标记开头。

相反，您可以使用一个简单的[`FileWriter`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)

```
File file= new File("C:\\my.html");
FileWriter fw = new FileWriter(file);
fw.write(html);
fw.flush();
fw.close(); 
```

**编辑 ：**

还建议使用`file.toURI().toURL()`而不是，`file.toURL()`因为后者是一种已弃用的方法。根据java文档

> 此方法不会自动转义 URL 中的非法字符。建议新代码将抽象路径名转换为 URL，首先通过 toURI 方法将其转换为 URI，然后通过 URI.toURL 方法将 URI 转换为 URL。

# android - 调试在虚拟盒子上运行的 android

> ID：10793783
> 
> 赞同：0
> 
> 时间：2012-05-29T05:59:32.533
> 
> 标签：android

我真的很想要一个快速的 android 模拟器，并决定用 android 安装一个 vm。如何从我的 ide 调试机器？

# php - 在 PDO mysql 连接中，pdo 查询输出对于 mysql null 结果集没有任何意义

> ID：10793789
> 
> 赞同：0
> 
> 时间：2012-05-29T06:00:10.177
> 
> 标签：php, mysql, pdo

我正在尝试制作一个登录脚本，我正在使用 PDO MYSQL 进行数据库连接。这是我的代码：

```
$query = "SELECT uid,uname  from user where email_address='abc@gmail.com' AND password='".md5('abcacb')."'";
    try {
        $dbh = new PDO("mysql:host=".DB_HOST.";dbname=".DB_NAME,DB_USER,DB_PASS);
        $stmt = $dbh->query($query);
        $result = $stmt->fetch(PDO::FETCH_ASSOC);
        if(!$result)
            $status = FALSE;
        else
            $status = TRUE;
        $dbh = null;
    }
    catch(PDOException $e){
        echo $e->getMessage();
    }
    print $status; 
```

当`email_address`&`password`都正确时`$status`正在打印`1`。但是，如果`email_address`或`password`与数据库值不匹配，它不会为`$status`. 我认为至少它应该打印`0`. 但我没有得到我错的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:02:43.047

> 当 email_address 和 password 都正确时，$status 正在打印 1。但是如果 email_address 或 password 与数据库值不匹配，则不会为 $status 打印任何内容

因为您正在对变量中的布尔值进行排序`$status`。布尔值在 PHP 中有它自己的行为。

```
boolean value true will always print `1`
boolean value false will print nothing. 
```

试试这个

```
echo true;
//prints 1

echo false;
//prints nothing 
```

如果你想打印 0，那么你可以这样做。

```
$status = ($result == true) ? 1 : 0; 
```

如果您不知道，上面的代码是三元运算符。这与

```
if($result)
    $status = 1;
else
    $status = 0; 
```

在使用条件语句时，1 将始终被视为布尔值 true，而 0 则被视为 false。

我希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:04:48.200

听起来您对 print 的期望是错误的——尝试使用 print_r 或 var_dump 进行调试打印。

# asp.net - 免费使用基于文档的数据库

> ID：10793790
> 
> 赞同：2
> 
> 时间：2012-05-29T06:00:11.227
> 
> 标签：asp.net, open-source, licensing, ravendb

我想使用 RavenDB 作为我网站的后端。但是现在当我检查它的许可证时，我明白要在封闭源软件中使用 RavenDB（我不会发布我的网站代码），我应该购买许可证。

所以我不能那样做。没有此许可限制，是否有任何替代 RavenDB 的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T06:12:46.790

也许看看 MongoDB。

[http://www.mongodb.org/](http://www.mongodb.org/)

# javascript - PhoneGap/iOS 因失去焦点而断开连接？

> ID：10793795
> 
> 赞同：1
> 
> 时间：2012-05-29T06:00:19.757
> 
> 标签：javascript, ios, cordova

当我的 PhoneGap 应用程序被推送到后台并在那里存在一段时间时，它会与服务器断开连接。如果可能的话，我想保持这个连接打开。如果这是不可能的，我至少希望能够在焦点恢复时对事件做出反应，这样我就可以使所有内容保持最新。

请让我知道我能如何最好地处理这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:10:40.337

不，您不能轻易地在 javascript 中运行后台线程 - 当应用程序被推送到后台时，它会停止执行。

但是，您可以绑定到[resume](http://docs.phonegap.com/en/1.7.0/cordova_events_events.md.html#resume)事件，以在将应用程序置于最前面时恢复所需的一切：

```
document.addEventListener("resume", onResume, false);

function onResume() {
   // restore context
} 
```

# url-rewriting - Response.Redirect 不适用于 url 重写或 url 屏蔽

> ID：10793802
> 
> 赞同：0
> 
> 时间：2012-05-29T06:00:57.517
> 
> 标签：url-rewriting, response.redirect

我正在使用链接按钮进行登录。我掩盖了网址。

在验证并从 db 获取数据后，我将使用重定向到另一个页面

```
Response.Redirect("....."); 
```

但它不是重定向......它正在验证并正确地从 db 获取数据。

你能为我的问题提出任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:50:20.633

如果重定向嵌套在条件语句（如 IF）内，那么它可能没有获得限定，即：IF 条件尚未得到满足。

否则请检查您的代码...“response.redirect”在我看来就像 Classic ASP。对于 javaScript 和其他语言，它将是不同的函数名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:38:02.567

Response.redirect("...") 是一个用于 ASP 的 vbScript 命令。您在示例中显示了一个分号，这是 JavaScript 语法，但“response.redirect”不是 JavaScript 命令。所以...如果您删除分号，您的重定向可能会起作用。

# c# - 如何使用淘汰赛js指定名称属性

> ID：10793803
> 
> 赞同：19
> 
> 时间：2012-05-29T06:00:58.317
> 
> 标签：c#, asp.net-mvc-3, knockout.js

我有一个使用 knockoutjs / mvc3 的绑定列表

```
<div data-bind="foreach: phones">
   <input data-bind='value: number' />
</div> 
```

将此发送到我的控制器操作，即

```
[HttpPost]
public ActionResult Index([Deserialize] WizardModel wizard, IStepViewModel step)
{
} 
```

以前我可以通过在输入上指定名称来使用 Jquery 绑定到我的 List< T >

```
 <input name="Phones[0].Name"
              Phones[1].Number etc.. 
```

但我现在正在使用淘汰赛我不清楚这应该如何工作。任何人都会引导我朝着正确的方向前进。

塔

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-29T09:25:42.527

您可以使用模板中的 attr 绑定来执行此操作，或者像这样假设您的电话号码位于可观察数组中。

```
<input data-bind='attr: { name: "Phones["+$index()+"].Name"}' /> 
```

我还假设您使用的是最新版本的淘汰赛，因此您可以使用 $index.html。

这将允许您命名输入，以便它们与 MVC 模型绑定一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:01:46.453

您可以使用'uniqueName'，内置淘汰赛。这是文档： http: [//knockoutjs.com/documentation/uniqueName-binding.html](http://knockoutjs.com/documentation/uniqueName-binding.html)

如果您想要自定义绑定（例如生成唯一 ID），您可以使用自定义绑定： http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

这些是 unuqueName 和 uniqueId 的有用答案： [Unique ids in knockout.js templates](https://stackoverflow.com/questions/9233176/unique-ids-in-knockout-js-templates)和 [Knockout JS "uniqueName" binding - 两个字段同名](https://stackoverflow.com/questions/8758832/knockout-js-uniquename-binding-same-name-to-two-fields)

我的唯一 id 生成实现是：

```
ko.bindingHandlers.uniqueId = {
    init: function (element, valueAccessor) {
        if (valueAccessor()) {
            element.id = ko.bindingHandlers.uniqueId.prefix + (++ko.bindingHandlers.uniqueId.counter);
        }
    },
    counter: 0,
    prefix: "unique_id_"
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:36:52.290

也许您可以创建一个自定义绑定来设置名称属性。看这里： http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

然后你应该可以写：

```
<input data-bind='yourBindingName: Name'  /> 
```

# macos - 如何让 Qt 图像格式插件加载到使用 Qt GUI 但不使用 QApplication 的控制台应用程序上？

> ID：10793806
> 
> 赞同：0
> 
> 时间：2012-05-29T06:01:25.043
> 
> 标签：macos, qt, plugins

我有一个使用 QtCore 和 QtGui 的控制台应用程序。我不使用 Qt 事件循环或创建任何 QApplication 实例；我只是在使用 Qt 的字符串、列表和图像处理功能。如何让图像格式插件加载？

此应用程序在 OS X 上，**不使用应用程序包**。

我的印象是，将插件文件`./plugins/<pluginfolder>/*.dylib`（应用程序可执行文件的目录放在哪里`.`）可以解决问题，因为根据部署文档，“插件”是插件相对于应用程序包的默认搜索目录。

但是，插件没有加载，因为我的图像处理功能中出现“无效的图像格式”。相同的功能在我安装了 Qt 二进制包的开发机器上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:31:53.537

只有两个想法：尝试使用字符串在 Qt-dll 中搜索字符串（例如“/plugins”）| grep 或 VI。可能这样你会找到插件目录。正如我所发现的，在 Windows 上，插件路径在安装过程中作为完整路径存储在 DLL 中。

创建 QCoreApplication 的实例。也许插件加载是从那里触发的。不需要启动事件循环。

# hadoop - HBase 中的检查点

> ID：10793807
> 
> 赞同：2
> 
> 时间：2012-05-29T06:01:25.040
> 
> 标签：hadoop, hbase

嗨，我对 HBase 很陌生，我无法理解 HBase 中检查点的概念。我想知道 HBase 中的检查点是什么，我们如何配置或使用它们？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:56:04.080

检查点是指快照吗？如果是，那么继续...hbase 的快照在特定时间点获取指定表的副本。它可以用作当前表的备份...a快照只能由 hbaseadmin 创建。如果一个表的一个快照正在进行中，则不应允许对同一表的其他快照请求。在创建快照期间，该表可以继续进行读取和写入.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:24:57.250

根据评论中的讨论，我认为您想了解快照。让我在这里澄清一下，检查点只是在备份，而快照只是相同的错字场景。请阅读链接中给出的附件，以便您可以很好地了解快照。
[快照pdf](https://issues.apache.org/jira/browse/HBASE-50/)

# ios - UIViewController 没有收到 touchesBegan 消息

> ID：10793809
> 
> 赞同：2
> 
> 时间：2012-05-29T06:01:35.610
> 
> 标签：ios, uiviewcontroller, uiscrollview, touch

我的 UIViewController 中有一个 UIScrollView。我需要检测任何形式的触摸，然后做点什么。我还需要什么？

```
- (BOOL)canBecomeFirstResponder {
    return YES;
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self becomeFirstResponder];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"TOUCHED"); // never happens
    for (UITouch *touch in touches) {
        if ( [touch view] == self.myScrollView)
        {
            //do something
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:29:22.510

两种选择：

1.  子类 UIScrollView 并在那里实现你的 touchesBegan[...] 代码
2.  将 UIView 添加到您的 UIScrollView 并使用 UIView 的 touchesBegan[...] 委托方法

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-29T10:03:56.210

使用控制器将`UserInteractionEnabled`属性设置`true`为`UIView`类。

尝试`imgTouchMe.UserInteractionEnabled = true;`

或关注

![在此处输入图像描述](../Images/e7e4950b0c1a25aa08e0d9662d944bf7.png)

# php - 打开 .phtml 文件在浏览器中显示代码

> ID：10793810
> 
> 赞同：2
> 
> 时间：2012-05-29T06:01:49.140
> 
> 标签：php, html, netbeans

我已在 netbeans IDE 中将我的视图文件保存为 .phtml。文件中同时包含 php 脚本和 HTML5。

通过 WAMP，当我尝试打开时，只显示编码..

有人可以帮忙吗？

提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T06:19:53.677

尝试使用以下内容创建一个 .htaccess 文件

```
AddType application/x-httpd-php .phtml
AddHandler x-httpd-php5 .phtml 
```

如果它有效，您就知道您的服务器未配置为默认将 phtml 作为 php 运行。

也可以尝试`php5-script`代替`x-httpd-php5`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:13:54.247

有时我们会在论坛上发帖，用户抱怨当他们运行 PHP 文件时，输出就是文件本身。这意味着该脚本未被识别为 PHP 脚本，而是被浏览器视为纯文本。据我所知，您遇到这种情况有两个原因。

如果您使用短标签来编写类似的 PHP 脚本`<? echo 'Hello World' ?>`，则应确保在 PHP INI 文件中将 short_open_tag INI 指令设置为“1”。如果不是这种情况，脚本将不会被视为 PHP 脚本。我更喜欢 PHP 脚本，例如`<?php echo 'Hello World' ?>`. 这更清楚，避免了混淆。

遇到这种情况的另一个原因可能是 PHP 文件没有保存为 ASCII/ANSI。以 UNICODE/多字节格式保存 PHP 脚本将再次无法将脚本识别为 PHP 脚本。始终将 PHP 脚本保存为纯文本文件以避免遇到这种情况

**评论后编辑**

```
AddType application/x-httpd-php .html 
```

或者对于 .htm

```
AddType application/x-httpd-php .htm 
```

# android - 如何仅在android的日期选择器中显示年份

> ID：10793811
> 
> 赞同：15
> 
> 时间：2012-05-29T06:01:55.350
> 
> 标签：android

任何人都可以告诉如何仅在 android 的日期选择器中显示年份

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-11-14T12:43:26.490

首先，创建**MonthYearPickerDialog.java**类扩展 DialogFragment

```
public class MonthYearPickerDialog extends DialogFragment {

private static final int MAX_YEAR = 2099;
private DatePickerDialog.OnDateSetListener listener;

public void setListener(DatePickerDialog.OnDateSetListener listener) {
    this.listener = listener;
}

@SuppressLint("ResourceAsColor")
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), R.style.AlertDialogStyle);
    LayoutInflater inflater = getActivity().getLayoutInflater();

    Calendar cal = Calendar.getInstance();

    View dialog = inflater.inflate(R.layout.month_year_picker_dialog, null);
    final NumberPicker monthPicker = (NumberPicker) dialog.findViewById(R.id.picker_month);
    final NumberPicker yearPicker = (NumberPicker) dialog.findViewById(R.id.picker_year);

    monthPicker.setMinValue(1);
    monthPicker.setMaxValue(12);
    monthPicker.setValue(cal.get(Calendar.MONTH) + 1);

    int year = cal.get(Calendar.YEAR);
    yearPicker.setMinValue(1900);
    yearPicker.setMaxValue(3500);
    yearPicker.setValue(year);

    builder.setView(dialog).setPositiveButton(Html.fromHtml("<font color='#FF4081'>Ok</font>"), new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int id) {
            listener.onDateSet(null, yearPicker.getValue(), monthPicker.getValue(), 0);
        }
    }).setNegativeButton(Html.fromHtml("<font color='#FF4081'>Cancel</font>"), new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            MonthYearPickerDialog.this.getDialog().cancel();
        }
    });
    return builder.create();
   }
 } 
```

在**styles.xml 中**粘贴此代码。

```
 <style name="AlertDialogStyle" parent="Theme.AppCompat.Light.Dialog">
    <item name="android:textColor">#FF4081</item>  // you can change the color of the yearPiker dialog
    <item name="android:textColorPrimary">#FF4081</item> // you can change the color of the yearPiker dialog
  </style> 
```

创建month_year_picker_dialog.xml

```
<?xml version="1.0" encoding="utf-8"?><LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="220dp"
android:layout_height="300dp"
android:layout_gravity="center"
android:gravity="center"
android:orientation="vertical">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="70dp"
        android:background="@color/colorAccent"
        android:gravity="top">

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:elevation="8dp"
            android:gravity="center"
            android:text="Year"
            android:textColor="#ffffff"
            android:textSize="22dp"
            android:textStyle="bold" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:orientation="horizontal">

        <NumberPicker
            android:id="@+id/picker_month"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginEnd="20dp"
            android:descendantFocusability="blocksDescendants"
            android:visibility="gone"
            tools:ignore="RtlCompat">

        </NumberPicker>

        <NumberPicker
            android:id="@+id/picker_year"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:descendantFocusability="blocksDescendants"
            >

        </NumberPicker>

      </LinearLayout>

   </LinearLayout>

</LinearLayout> 
```

在您的**主要课程**中（活动）

```
 private DatePickerDialog createDialogWithoutDateField() {
    DatePickerDialog dpd = new DatePickerDialog(this, null, 2014, 1, 24);
    try {
        java.lang.reflect.Field[] datePickerDialogFields = dpd.getClass().getDeclaredFields();
        for (java.lang.reflect.Field datePickerDialogField : datePickerDialogFields) {
            if (datePickerDialogField.getName().equals("mDatePicker")) {
                datePickerDialogField.setAccessible(true);
                DatePicker datePicker = (DatePicker) datePickerDialogField.get(dpd);
                java.lang.reflect.Field[] datePickerFields = datePickerDialogField.getType().getDeclaredFields();
                for (java.lang.reflect.Field datePickerField : datePickerFields) {
                    Log.i("test", datePickerField.getName());
                    if ("mDaySpinner".equals(datePickerField.getName())) {
                        datePickerField.setAccessible(true);
                        Object dayPicker = datePickerField.get(datePicker);
                        ((View) dayPicker).setVisibility(View.GONE);
                    }
                }
            }
        }
    }
    catch (Exception ex) {
    }
    return dpd;
} 
```

**最后，**随叫随到

```
createDialogWithoutDateField().show(); 
```

[![在此处输入图像描述](../Images/72f363ea377d80eef848d86596c827e8.png)](https://i.stack.imgur.com/BHfUy.png)

[![在此处输入图像描述](../Images/67670b978d333c55e27f3c148de12b73.png)](https://i.stack.imgur.com/AItIj.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T09:38:16.640

`NumberPicker`您还可以使用一些简单的反射来隐藏小部件的日期和月份`DatePicker`。请注意，如果 Google 决定重命名成员字段名称，这可能会停止工作。此外，这种方法在使用[`android:datePickerMode="spinner"`](https://developer.android.com/reference/android/R.styleable.html#DatePicker_datePickerMode).

```
// inflate DatePicker, or e.g. get it from a DatePickerDialog:
DatePicker datepicker = ...

// pre-Honeycomb fields: 
findAndHideField(datepicker, "mDayPicker");
findAndHideField(datepicker, "mMonthPicker");

// Honeycomb(+) fields:
findAndHideField(datepicker, "mDaySpinner");
findAndHideField(datepicker, "mMonthSpinner");

// Lollipop(+) fields (wrapped in a delegate):
final Object mDatePickerDelegate = findFieldInstance(picker, "mDelegate");
findAndHideField(mDatePickerDelegate, "mDaySpinner");
findAndHideField(mDatePickerDelegate, "mMonthSpinner");

/** find a member field by given name and hide it */
private static void findAndHideField(Object object, String name) {
    try {
        final Field field = object.getClass().getDeclaredField(name);
        field.setAccessible(true);
        final View fieldInstance = (View) field.get(object);
        fieldInstance.setVisibility(View.GONE);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/* find a member field by given name and return its instance value */
private static Object findFieldInstance(DatePicker datepicker, String name) {
    try {
        final Field field = DatePicker.class.getDeclaredField(name);
        field.setAccessible(true);
        return field.get(datepicker);
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

* * *

**更新：**添加了说明如何使此方法与 Android 'Lollipop' 5.0 (API 21+) 一起使用的代码。

* * *

**免责声明**：我不能过分强调这是一个骇人听闻的解决方案，它可能会停止与任何框架更新一起工作（就像首次引入 Android 3.0 时所做的那样，并且再次引入 Android 5.0 时）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-12T08:36:40.777

您可以像这样从自定义日期选择器中隐藏日期和月份：

```
DatePicker datePicker = (DatePicker) datePickerDialogField.get(obj);
DatePicker monPickerPicker = (DatePicker) datePickerDialogField.get(obj);

Field datePickerFields[] = datePickerDialogField.getType().getDeclaredFields();
for (Field datePickerField: datePickerFields) {
    //datePickerField
    //mMonthSpinner

    if (“mDayPicker”.equals(datePickerField.getName()) || “mDaySpinner”.equals(datePickerField
            .getName())) {
        datePickerField.setAccessible(true);
        Object dayPicker = new Object();
        dayPicker = datePickerField.get(datePicker);
        ((View) dayPicker).setVisibility(View.GONE);
    }
    if (“mMonthpicker”.equals(datePickerField.getName()) || “mMonthSpinner”.equals(datePickerField
            .getName())) {
        datePickerField.setAccessible(true);
        Object dayPicker = new Object();
        dayPicker = datePickerField.get(datePicker);
        ((View) dayPicker).setVisibility(View.GONE);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-12T08:22:14.590

我修改了@agilanbu 的答案，它可以用作：

```
private fun createDialogWithoutDateField() {

    val alertDialog: AlertDialog?
    val builder = AlertDialog.Builder(activity, R.style.AlertDialogStyle)
    val inflater = activity!!.layoutInflater

    val cal = Calendar.getInstance()

    val dialog = inflater.inflate(R.layout.month_year_picker_dialog, null)
    val monthPicker = dialog.findViewById(R.id.picker_month) as NumberPicker
    val yearPicker = dialog.findViewById(R.id.picker_year) as NumberPicker

    monthPicker.minValue = 1
    monthPicker.maxValue = 12
    monthPicker.value = cal.get(Calendar.MONTH) + 1

    val year = cal.get(Calendar.YEAR)
    yearPicker.minValue = 1900
    yearPicker.maxValue = 3500
    yearPicker.value = year

    builder.setView(dialog).setPositiveButton(Html.fromHtml("<font color='#FF4081'>Ok</font>")){dialogInterface, which ->
        //Toast.makeText(applicationContext,"clicked yes",Toast.LENGTH_LONG).show()

        val value = yearPicker.value
        dialogInterface.cancel()
    }

    builder.setNegativeButton(Html.fromHtml("<font color='#FF4081'>Cancel</font>")){dialogInterface, which ->
        dialogInterface.cancel()
    }

    alertDialog = builder.create()
    // Set other dialog properties
    alertDialog.setCancelable(true)
    alertDialog.show()
} 
```

您可以在@agilanbu 的答案中获取布局文件和样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-30T09:27:58.637

我只是有同样的问题，我发现的所有解决方案都不适用于新的 Android 版本，因为我无法获得 DatePicker 的反射字段

无论如何，如果您需要代码，我会通过一个对话框来选择一个数字来解决：

**SingleNumberPickerDialog.java 代码**

```
public class SingleNumberPickerDialog extends DialogFragment {

    public interface IOnNumberSelected {
        void onNumberSelected(int num, int requestCode);
    }

    private static final String TAG = SingleNumberPickerDialog.class.getSimpleName();
    private static final String KEY = TAG + ".key";
    // Arguments Keys
    private static final String KEY_LABEL = KEY + ".label";
    private static final String KEY_START_VALUE = KEY + ".startValue";
    private static final String KEY_MIN_VALUE = KEY + ".minValue";
    private static final String KEY_MAX_VALUE = KEY + ".maxValue";
    private static final String KEY_REQUEST_CODE = KEY + ".requestCode";
    // Int Values
    private static final int INT_UNDEFINED = -0x1;

    @BindView(R2.id.tv_label)
    protected TextView mtvLabel;
    @BindView(R2.id.np_number)
    protected NumberPicker mnpNumber;

    private IOnNumberSelected mCallback;
    private int mRequestCode;

    public static SingleNumberPickerDialog newInstance(String label, int startValue, int minValue, int maxValue, int requestCode){
        SingleNumberPickerDialog mInstance = new SingleNumberPickerDialog();
        Bundle args = new Bundle();
        args.putString(KEY_LABEL, label);
        args.putInt(KEY_START_VALUE, startValue);
        args.putInt(KEY_MIN_VALUE, minValue);
        args.putInt(KEY_MAX_VALUE, maxValue);
        args.putInt(KEY_REQUEST_CODE, requestCode);
        mInstance.setArguments(args);
        return mInstance;
    }

    /** Override Lifecycle Methods **/
    @Override
    public void onAttach(@NonNull Context context) {
        super.onAttach(context);
        try {
            mCallback = (IOnNumberSelected) context;
        } catch (ClassCastException ccE){
            Log.e(TAG, ccE);
        }
    }

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        View view = inflater.inflate(R.layout.dialog_single_number_picker, container, false);
        ButterKnife.bind(this, view);
        initOnCreateView();
        return view;
    }

    /** Actions Methods **/
    @OnClick(R2.id.b_confirm)
    void onClickConfirm(View view){
        if(mCallback != null){
            mCallback.onNumberSelected(mnpNumber.getValue(), mRequestCode);
        }
    }

    /** Private Methods **/
    private void initOnCreateView(){
        if(getArguments() != null){
            initLabel();
            initStartValue();
            initMinValue();
            initMaxValue();
            initRequestCode();
        }
    }

    private void initLabel(){
        if(getArguments().containsKey(KEY_LABEL)){
            mtvLabel.setText(getArguments().getString(KEY_LABEL));
        }
    }

    private void initStartValue(){
        if(getArguments().containsKey(KEY_START_VALUE)){
            mnpNumber.setValue(getArguments().getInt(KEY_START_VALUE));
        }
    }

    private void initMinValue(){
        if(getArguments().containsKey(KEY_MIN_VALUE)){
            mnpNumber.setMinValue(getArguments().getInt(KEY_MIN_VALUE));
        }
    }

    private void initMaxValue(){
        if(getArguments().containsKey(KEY_MAX_VALUE)){
            mnpNumber.setMaxValue(getArguments().getInt(KEY_MAX_VALUE));
        }
    }

    private void initRequestCode(){
        if(getArguments().containsKey(KEY_REQUEST_CODE)){
            mRequestCode = getArguments().getInt(KEY_REQUEST_CODE);
        }
    }

} 
```

**dialog_single_number_picker.xml 代码：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:orientation="vertical"
    android:background="@color/black"
    android:padding="@dimen/padding_3dp">
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="@color/white"
        android:padding="@dimen/padding_22dp">
        <TextView
            android:id="@+id/tv_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:textColor="@color/black"
            android:textSize="@dimen/text_size_20sp"
            android:textStyle="bold"
            android:padding="@dimen/padding_25dp"/>
        <NumberPicker
            android:id="@+id/np_number"
            android:layout_width="wrap_content"
            android:layout_height="@dimen/height_200dp"
            android:layout_gravity="center"/>
        <Button
            android:id="@+id/b_confirm"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/label_confirm"
            android:paddingStart="@dimen/padding_15dp"
            android:paddingEnd="@dimen/padding_15dp"
            style="@style/ButtonAccentWhiteStyle"/>
    </LinearLayout>
</LinearLayout> 
```

**使用示例（您需要在您的活动中实现回调）：**

```
int year = DateUtils.getCurrentYear();
            SingleNumberPickerDialog mDialog = SingleNumberPickerDialog.newInstance(getString(R.string.label_year), year, year - 50, year + 50, 0x0);
            mDialog.setStyle(DialogFragment.STYLE_NO_FRAME, R.style.NoBackgroundDialogStyle);
            mDialog.setCancelable(false);
            mDialog.show(getSupportFragmentManager(), TAG_DIALOG_YEAR_PICKER); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-11T08:15:53.977

```
private void showBirthDayPicker() {
    int year = calendar.get(Calendar.YEAR);

    final Dialog birthDayDialog = new Dialog(this);
    birthDayDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    birthDayDialog.setContentView(R.layout.dialog_birthday);

    Button okBtn = birthDayDialog.findViewById(R.id.btn_ok);
    Button cancelBtn = birthDayDialog.findViewById(R.id.btn_cancel);

    final NumberPicker np = birthDayDialog.findViewById(R.id.birthdayPicker);
    np.setMinValue(year - 100);
    np.setMaxValue(year - 15);
    np.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
    setDivider(np, android.R.color.white);
    np.setWrapSelectorWheel(false);
    np.setValue(year-20);
    np.setOnValueChangedListener(new NumberPicker.OnValueChangeListener() {
        @Override
        public void onValueChange(NumberPicker numberPicker, int i, int i1) {

        }
    });

    okBtn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            edtBirthDay.setText(String.valueOf(np.getValue()));
            birthDayDialog.dismiss();
        }
    });

    cancelBtn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            birthDayDialog.dismiss();
        }
    });

    birthDayDialog.show();
} 
```

> xml

```
 `enter code here`<?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/white"
        android:baselineAligned="false"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/birthday_dialog_title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:layout_marginBottom="10dp"
            android:gravity="center"
            android:minHeight="42dp"
            android:text="Year lahir"
            android:textSize="14sp" />

        <NumberPicker
            android:id="@+id/birthdayPicker"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:gravity="center" >

            <Button
                android:id="@+id/btn_cancel"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Cancel" />

            <Button
                android:id="@+id/btn_ok"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="OK" />
        </LinearLayout>

    </LinearLayout>

    </RelativeLayout> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-31T14:11:42.977

我还修改了@agilanbu 的答案并更新了@ROHIT LIEN 的答案。注意：它只包含有关年份的信息：

```
private fun createYearPicker() {

    val builder = AlertDialog.Builder(requireContext(), R.style.AppAlertDialogTheme)

    val cal = Calendar.getInstance()

    val view = layoutInflater.inflate(R.layout.dialog_year_picker, null)
    val yearPicker = view.yearPicker as NumberPicker

    val year = cal.get(Calendar.YEAR)

    yearPicker.minValue = 1900
    yearPicker.maxValue = 2021
    yearPicker.value = year

    builder.setView(view)
    val show = builder.show().apply { this.setCancelable(true) }

    view.btnNegative.setOnClickListener {
        show.dismiss()
    }
    view.btnPositive.setOnClickListener {
        etvDate.setText(yearPicker.value.toString())
        saveDate(yearPicker.value)
        show.dismiss()
    }
} 
```

尽管我在布局中添加了 2 个按钮，但布局是相同的：

btn阳性 btn阴性

并将其从样式中删除。这是为了防止您为正面和负面按钮定制设计。+ monthPicker 数字选择器已删除。

注意： btnPositive 和 btnNegative 是布局中按钮的 ID。

# java - Glassfish 与 JDeveloper 的集成

> ID：10793812
> 
> 赞同：1
> 
> 时间：2012-05-29T06:02:16.337
> 
> 标签：java, netbeans, glassfish, jdeveloper

有什么方法可以在我的 JDeveloper 11.1.1.4.0 安装中集成 Glassfish 应用程序服务器并将应用程序直接从我的 IDE 部署到 Glassfish 服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:21:29.720

您不能用 Glassfish 替换集成的 WLS，但您可以使用 Ant 任务对 glassfish 进行部署，然后添加菜单项来启动/停止 Glassfish。这是 Tomcat 的示例： [https ://blogs.oracle.com/shay/entry/tomcat_extensions_for_jdevelop_1](https://blogs.oracle.com/shay/entry/tomcat_extensions_for_jdevelop_1)

# javascript - 如何纠正 Jslint 中的“不安全 '.'. 错误”

> ID：10793814
> 
> 赞同：6
> 
> 时间：2012-05-29T06:02:21.050
> 
> 标签：javascript, jslint

我有一个正则表达式：

```
return (str+'').replace(/^(.)|\s(.)/g, function ( $1 ) {
    return $1.toUpperCase ( );
}); 
```

我收到以下 jslint 错误：

不安全`'.'`

是什么让字符集的否定“不安全”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:41:34.297

您可以通过告诉 JSLint 忽略它来“修复”警告：添加`regexp: true`到文件顶部的 JSLint 设置中。

这是[JSLint 对](http://www.jslint.com/lint.html#options)默认情况下为什么`.`和`[^...]`生成警告的解释：

> 它们匹配的材料比预期的要多，从而使攻击者能够混淆应用程序。在安全应用程序中进行验证时，不应使用这些表单。

因此，如果您的正则表达式用于输入/表单验证，那么您可能需要注意警告并使用稍微不同的代码。如果您将它用于其他任何事情，则没有理由启用警告。

# extjs - 如何从检查网格中的 CheckBox 中获取详细信息？

> ID：10793815
> 
> 赞同：2
> 
> 时间：2012-05-29T06:02:21.803
> 
> 标签：extjs

我有EditorGridPanel，网格的ColumnModel 包括TextField、ComboBox 和CheckBox。编辑 TextField 或 ComboBox 后，会触发包含有关已编辑字段的详细信息的“afteredit”事件。当我选中/取消选中 CheckBox 字段时，没有任何事件可以提供有关按下哪个 CheckBox 的任何详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T06:18:31.050

选择模型呈现一列复选框，可以切换以选择或取消选择网格中的行。

尝试在复选框选择模型上应用侦听器。

文档：[Ext.selection.CheckboxModel-event-selectionchange](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.selection.CheckboxModel-event-selectionchange)

参考：[例子](http://jsfiddle.net/ruY5h/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:08:25.687

使用来自的[checkchange](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.CheckColumn-event-checkchange)事件`Ext.ux.CheckColumn`。这给出了rowIndex。

**编辑**

如果您在 2.2 中进行更多开发，我建议您升级。但是如果你不能，你总是可以尝试添加一个覆盖，或者扩展`Ext.ux.CheckColumn`以包含更高版本的事件。我确信必须调整此代码以使其与 2.2 兼容，但这是一个包含所需事件的覆盖示例——我意识到我什至不确定 2.2 是否具有该`Ext.override`方法，您必须检查您的文档（checkchange 代码直接来自 4.1 API）：

```
Ext.override(Ext.ux.CheckChange, {
    constructor: function() {
        this.addEvents(
            /**
             * @event beforecheckchange
             * Fires when before checked state of a row changes.
             * The change may be vetoed by returning `false` from a listener.
             * @param {Ext.ux.CheckColumn} this CheckColumn
             * @param {Number} rowIndex The row index
             * @param {Boolean} checked True if the box is to be checked
             */
            'beforecheckchange',
            /**
             * @event checkchange
             * Fires when the checked state of a row changes
             * @param {Ext.ux.CheckColumn} this CheckColumn
             * @param {Number} rowIndex The row index
             * @param {Boolean} checked True if the box is now checked
             */
            'checkchange'
        );
        this.callParent(arguments);
    },

    /**
     * @private
     * Process and refire events routed from the GridView's processEvent method.
     */
    processEvent: function(type, view, cell, recordIndex, cellIndex, e) {
        var me = this,
            key = type === 'keydown' && e.getKey(),
            mousedown = type == 'mousedown';

        if (mousedown || (key == e.ENTER || key == e.SPACE)) {
            var record = view.panel.store.getAt(recordIndex),
                dataIndex = me.dataIndex,
                checked = !record.get(dataIndex);

            // Allow apps to hook beforecheckchange
            if (me.fireEvent('beforecheckchange', me, recordIndex, checked) !== false) {
                record.set(dataIndex, checked);
                me.fireEvent('checkchange', me, recordIndex, checked);

                // Mousedown on the now nonexistent cell causes the view to blur, so stop it continuing.
                if (mousedown) {
                    e.stopEvent();
                }

                // Selection will not proceed after this because of the DOM update caused by the record modification
                // Invoke the SelectionModel unless configured not to do so
                if (!me.stopSelection) {
                    view.selModel.selectByPosition({
                        row: recordIndex,
                        column: cellIndex
                    });
                }

                // Prevent the view from propagating the event to the selection model - we have done that job.
                return false;
            } else {
                // Prevent the view from propagating the event to the selection model if configured to do so.
                return !me.stopSelection;
            }
        } else {
            return me.callParent(arguments);
        }
    },
}); 
```

# php - 正确的php语法

> ID：10793816
> 
> 赞同：0
> 
> 时间：2012-05-29T06:02:22.540
> 
> 标签：php, sql

```
// query
$sql = "INSERT INTO tool (title,details) VALUES (:title,:details) ";
$q = $conn->prepare($sql);
$q->execute(array(':details'=>$details,
                  ':title'=>$title)); 
```

整天纠结这个问题，终于搞定了。如果我使用上面的代码，它只会向数据库添加一个新帖子。这应该用于编辑帖子，所以显然我需要编辑现有信息：

```
// query
$post = htmlspecialchars($_GET['story']);
$sql = "UPDATE  tool SET (title,details) VALUES (:title,:details) WHERE id = $post";
$q = $conn->prepare($sql);
$q->execute(array(':details'=>$details,
                  ':title'=>$title)); 
```

'id' 是数据库中的一列。我需要它来更新该特定帖子的标题和详细信息。我只是不确定我应该在这里使用什么语法。

感谢您的任何回答！

===== 第二个问题：

现在我回到了我的旧错误。每当我编辑帖子时，它只会丢失一次标题和详细信息。第一次编辑帖子时，我会丢失所有信息，但其他时候它会正常工作。知道为什么吗？继承人的代码：

来自编辑页面的表格（可能重要也可能不重要，我不知道）：

```
$name = $_SESSION['Username'];
if (in_array($name, $allowedposters)) {
$results = mysql_query("SELECT * FROM tool WHERE id = $post");
    while($row = mysql_fetch_array($results)){

$title= $row['title'];
$details= $row['details'];
$date= $row['date'];
$author= $row['author'];
$id= $row['id'];

echo "<a href=story.php?id=";
echo $post;
echo ">Cancel edit</a> <br><br><b>";
echo $title;
echo "</b> <br><br>";
echo '
<form action="edit-new.php?story=';
echo $id;
echo '" method="post" enctype="multipart/form-data">
<textarea rows="1" cols="60" name="title" wrap="physical" maxlength="100">';
echo $title;
echo '</textarea><br>';
?>

<textarea rows="30" cols="60" name="details" wrap="physical" maxlength="10000">
<?php 
echo $details;
echo '</textarea><br>';

echo '<label for="file">Upload featured image:</label><br>
      <input type="file" name="file" id="file" />';
echo'<br><input type="submit" />';
}

} else {
  echo "Not enough permissions.";
}
?> 
```

这是插入数据库的 SQL：

```
<?php
   $post = htmlspecialchars($_GET['story']);
   $title = mysql_real_escape_string($_POST['title']);
   $details = mysql_real_escape_string($_POST['details']);
      echo "B<br>";
      echo $_POST['title'];
      echo '<br>';
      echo $_POST['details'];
      echo $post;
      echo "<br><br>";

// configuration
$dbtype     = "mysql";
$dbhost     = "localhost";
$dbname     = "zzzz";
$dbuser     = "zzzzz";
$dbpass     = "zzzzzz";

// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

// new data

// query
$sql = "UPDATE  tool SET title=:title, details=:details WHERE id = :postid";
$q = $conn->prepare($sql);
$q->execute(array(
  ':details'=>$details,
  ':title'=>$title,
  ':postid' => $post
));

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:40:53.110

修复你的 sql [UPDATE 语法](http://dev.mysql.com/doc/refman/4.1/en/update.html)

```
$sql = "UPDATE  tool SET title=:title, details=:details WHERE id = :postid";
$q = $conn->prepare($sql);
$q->execute(array(
  ':details'=>$details,
  ':title'=>$title,
  ':postid' => $post
)); 
```

# javascript - IE9 Localstorage API 清除功能问题

> ID：10793820
> 
> 赞同：0
> 
> 时间：2012-05-29T06:02:43.620
> 
> 标签：javascript, html, internet-explorer-9, local-storage

```
localStorage.clear()
SCRIPT1002：语法错误
JsonSerializer.js，第 347 行字符 6

```

在 IE9 localStorage 中没有清除...

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:24:31.137

我不肯定这是你的情况，如果你在离线模式下加载本地文件（即如果你将它作为`file:///`URL 加载），IE9 不支持本地存储。

但是我认为根本没有`window.localStorage`定义。试试这个：

```
if(window.localStorage) {
  localStorage.clear() 
} else {
  alert("localStorage is not available");
} 
```

# html - 对齐水平菜单 li 项

> ID：10793821
> 
> 赞同：0
> 
> 时间：2012-05-29T06:02:45.793
> 
> 标签：html, css, css-float

我在尝试对齐水平菜单时遇到了真正的麻烦。到目前为止，我的菜单看起来像 ![在此处输入图像描述](../Images/8667ae87cb97f45c1c5dc7599bd5cd5e.png)

我有 2 个居中的元素来组成图像中的菜单，您可以看到页面中居中的灰色边框（幻灯片导航类）。现在我正在尝试对菜单做同样的事情

我不得不对 li 宽度进行硬编码，但理想情况下我希望它们能够自动适应。没有javascript可以在中心对齐菜单项吗？

我的html

```
 <nav class="slide-nav">
            <ul class="slider">
                <li class="selected">
                    <div>
                        <span class="heart"></span>
                        <div>
                            Get Started</div>
                    </div>
                </li>
                <li>
                    <div>
                        <span class="price-tag"></span>
                        <div>
                            Get Results</div>
                    </div>
                </li>
                <li>
                    <div>
                        <span class="star"></span>
                        <div>
                            Track & Engage</div>
                    </div>
                </li>
                <li>
                    <div>
                        <span class="people"></span>
                        <div>
                            Features</div>
                    </div>
                </li>
            </ul>
        </nav> 
```

css

```
.slide-nav
{
border-bottom: solid 1px #f2f2f2;
margin: 0 auto;
width: 856px;
}
.slider
{
list-style: none;
height: 38px; 
margin: 0 auto;
width: 722px;
}
.slider li
{
border-bottom: solid 7px transparent;
cursor: pointer;

display: inline-block;
width: 150px;
}
.slider li div 
{
line-height: 31px; 
}
.slider li div div 
{
text-indent: 6px;
}
.slider li.selected > div
{
border-bottom: solid 7px #592970;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:22:08.693

这是你必须改变的CSS

```
.slide-nav
{
border-bottom: solid 1px #f2f2f2;
margin: 0 auto;
width: 856px;
text-align:center;
}
.slider
{
list-style: none;
height: 38px; 
margin: 0;
padding: 0;
}
.slider li
{
border-bottom: solid 7px transparent;
cursor: pointer;
display: inline-block;
padding:0 10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:12:41.703

我刚刚摆脱了宽度，`margin: 0 auto`从`.slider`ole 中删除并添加了`text-align: center`。

查看现场演示：http: [//jsfiddle.net/RJL7J/](http://jsfiddle.net/RJL7J/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T06:13:17.857

我相信这已经在[这里](https://stackoverflow.com/questions/49536/how-do-i-really-justify-a-horizontal-menu-in-htmlcss)详细回答了。

基本上，您希望呈现您的各个按钮，`display:inline-block`这将允许它们被证明是合理的。然而，有一个技巧是添加一个“虚拟”换行符来强制调整。

# c# - 如何设计以下对话框

> ID：10793823
> 
> 赞同：0
> 
> 时间：2012-05-29T06:03:07.740
> 
> 标签：c#, visual-studio-2010, visual-studio

以下对话框是如何设计的，抱歉，但我不是 gui 开发人员，但在一些初步帮助下，我可以做到这一点。我想要的`tree view`是附加到`right pane`它以及它如何随着选择中的选择而`tree view`变化，并且`lower text`随着每个选择而变化。

![在此处输入图像描述](../Images/4419667ee40e725936fac710ac49562a.png)

任何起点都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:24:56.730

纯粹的猜测，所以也许它并不完全正确：

![布局](../Images/8861c406ebad1a9347610f7b429dc0cd.png)

请原谅俗气的颜色，我不知道我为什么这样做......

# ios - 为什么我无法在 iOS 中链接到 Rick Astley？

> ID：10793824
> 
> 赞同：4
> 
> 时间：2012-05-29T06:03:22.237
> 
> 标签：ios, youtube, url-scheme

不，等等，别走！我是认真的。

当九头蛇决定笑到最后时，我（是？）试图让我的同事们摇摇晃晃，以庆祝在我们最近的战斗中击败 iOS 野兽。点击[http://www.youtube.com/watch?v=dQw4w9WgXcQ](http://www.youtube.com/watch?v=dQw4w9WgXcQ)`openURL`或[http://www.youtube.com/watch?v=oHg5SJYRHA0](http://www.youtube.com/watch?v=oHg5SJYRHA0)（两个主要的 rickrolling 视频）的链接“无法加载电影”错误。但是当我通过 Youtube 应用找到视频时，它可以正常播放。其他随机选择并通过完全相同的路径运行的视频 URL 可以正常工作。

除了WTF，我不知道还能怎么问这个？Apple / Youtube 可以对这些视频进行特殊处理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:10:01.323

官方音乐视频往往对手机播放有各种限制……试试不太流行的歌曲视频？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:23:10.740

> Apple / Youtube 可以对这些视频进行特殊处理吗？

当然，他们可能会。[关于“rickrolling”的维基百科条目是这样](http://en.wikipedia.org/wiki/Rickrolling)说的：

> 模因是诱饵和开关；一个人提供了一个看似与当前主题相关的超链接，但实际上指向了 Astley 的视频。

愚弄用户非常违背 iOS 应用商店审查指南的精神，而且您可能不是第一个尝试这样做的人。因此，某些视频可能是特殊情况，或者某些视频标有阻止它们加载的属性。

在文章的后面，[维基百科还说：](http://en.wikipedia.org/wiki/Rickrolling#iPhone_worm)

> 2009 年 10 月/11 月，一种旨在感染越狱 iPhone 的蠕虫将受感染手机的壁纸更改为 Rick Astley 的照片，上面覆盖着“ikee 永远不会放弃你”的文字。

这似乎是 iOS 拥有避免涉及 Rick Astley 视频的代码的更好理由。并不是说该蠕虫与视频直接相关，但如果 R​​ick Astley 的意外出现是与恶意软件相关的模因，您可以想象 Apple 希望阻止不受信任的应用程序加载此类内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T06:15:36.430

**状态：**虽然 OP 的 VideoID 仅限在 YouTube 网站上观看，但这是在 iOS 设备上观看 YouTube 视频的方法。

您需要使用 YouTube 的iOS**嵌入 URL 方法进行链接。**

示例链接：

```
http://www.youtube.com/embed/VIDEOID
http://www.youtube.com/embed/VIDEOID?autoplay=1 
```

**注意：**第二个链接使用**YouTube 自动播放选项**格式化。

* * *

**状态更新：**请参阅可能证明有用的这个[**SO 答案。**](https://stackoverflow.com/a/11270639/1195891)正如这些答案评论所述，iOS 将自动换出 HTML 标签。

# html - HTML 链接在首页无法使用

> ID：10793826
> 
> 赞同：0
> 
> 时间：2012-05-29T06:03:29.740
> 
> 标签：html, css, hyperlink

我在安装 Drupal 时遇到了一个奇怪的问题。我在[Drupal StackExchange](https://drupal.stackexchange.com/questions/32509/main-menu-links-not-operational-on-front-page-when-anonymous)上提出了一个问题，但没有得到答案。我正在尝试调试它。

出于某种原因，当用户未登录时，有效的 HTML 链接不会在首页上运行。显示文本，但无法单击链接。

HTML 代码如下：

```
<div class="NCK_Menu"> 
  <div class="pane-content">
    <ul class="menu">
      <li class="first leaf"><a href="/" class="active">Home</a></li>
      <li class="last leaf"><a href="/currency">Item A</a></li>
    </ul>
  </div>
</div> 
```

无论用户是否登录，都是一样的。Firebug 不会触发错误消息。

什么可能导致此问题？如何禁用 HTML 链接？谢谢。

**更新**

作为记录，我使用 Drupal 导航菜单进行了更多测试。这一次，只有 Home 链接有效，Item A 菜单无效。我终于求助于手动创建自己的菜单并且它有效。我不知道为什么。

**更新二**

我注意到一些非常奇怪的事情，这个问题只有在应用以下 CSS 时才会发生：

```
.NCK_Menu {

    font-size: 103%;
    height: 240px;
    width: 120px;
    background-color: #5E88D0;
    margin: 10px 9px 10px 7px;
    padding: 7px;
    border:none;
    -webkit-border-radius: 1px;
    -moz-border-radius: 1px;
    border-radius: 1px;

} 
```

这毫无意义！！！

# python - 为什么我收到索引错误？

> ID：10793832
> 
> 赞同：0
> 
> 时间：2012-05-29T06:04:20.527
> 
> 标签：python

```
ant=['1']  
round = 30  

while round:  
    ant += '!'  
    next = []  
    start = 0  

    for current in range(len(ant)):  
        if ant[current] != ant[start]:  
            next.append(str(current-start)+ant[start])  
            start = current  
    ant = "".join(next)  

    round-=1  

print len(ant) 
```

我在博客中获得了这个源代码并尝试在 3.2 上运行它。

（这是关于制作蚂蚁序列的。`[1,11,12,1121,&c]`

但是在第 10 行，“IndexError : string index out of range”弹出，我几乎不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:26:33.320

你的代码[对我来说运行良好](http://ideone.com/chUd5)。

* * *

测试.py：

```
ant=['1']
round = 30

while round:
    ant += '!'
    next = []
    start = 0

    for current in range(len(ant)):
        if ant[current] != ant[start]:
            next.append(str(current-start)+ant[start])
            start = current
    ant = "".join(next)

    round-=1

print len(ant) 
```

* * *

```
$ python test.py
5808 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:38:15.053

你的代码在我的电脑上运行良好。我的python版本是2.7

是`len(ant)`5808

但我认为你的python代码不是很清楚，也不是pythonic。你可以阅读这个[链接](http://www.siafoo.net/article/52)和[这个](http://www.cafepy.com/article/be_pythonic/)

例如，使用这个

```
for index, x in enumerate(ant): 
```

代替`for current in range(len(ant)):`

并且不要使用`ant +='!'`. 它应该是`ant.append('!')`

祝你好运

# android - android scrollview 设置 android:scrollbars="none", 滚动视图不起作用

> ID：10793834
> 
> 赞同：3
> 
> 时间：2012-05-29T06:04:27.067
> 
> 标签：android, scrollview

```
<ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scrollbars="none" >
</ScrollView> 
```

我设置了 android:scrollbars="none"，滚动视图不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T06:19:15.497

您可以使用 findViewById 获取 ScrollView 的实例并以编程方式禁用滚动条，请参阅此[`Blog`](http://r00tsecurity.org/forums/topic/12052-android-hide-scrollbar-in-scrollview/)

```
 ScrollView sView = (ScrollView)findViewById(R.id.ScrollView01);
  sView.setVerticalScrollBarEnabled(false);
  sView.setHorizontalScrollBarEnabled(false); 
```

# c - C 中的函数示例

> ID：10793835
> 
> 赞同：2
> 
> 时间：2012-05-29T06:04:28.283
> 
> 标签：c, function, vector

我刚开始研究 C 中的函数，这阻止了我。我想编写一个在元素向量中搜索元素的函数`SIZE`。这是代码：

```
#include <stdio.h>
#define SIZE 10

int find(int vet[], int SIZE, int elem);

int main()
{
    int vett[SIZE] = {1, 59, 16, 0, 7, 32, 78, 90, 83, 14};
    int elem;

    printf ("Imput the element to find: ");
    scanf  ("%d", &elem);

    find(vett[SIZE], SIZE, elem);

    if (find == 1)
        printf ("\nI find the element!");
    else if (find == 2)
        printf ("\nI did not find the element!");

    return 0;
}

int find(int vett[], int SIZE, int elem)
{
    int i;
    int flag = 0;

    for (i = 0; i < SIZE; i++)
        if (vett[i] == elem)
            flag = 1;

    if (flag == 1)
        return 1;
    else
        return 2;
} 
```

为什么 Code::Blocks 对我说：

```
|4|error: expected ';', ',' or ')' before numeric constant| 
||In function 'main':| |8|error: expected ']' before ';' token| 
|14|error: 'vett' undeclared (first use in this function)| 
|14|error: (Each undeclared identifier is reported only once| 
|14|error: for each function it appears in.)| 
|14|error: expected ']' before ';' token|
|14|error: expected ')' before ';' token| 
|16|warning: comparison between pointer and integer|

|18|warning: comparison between pointer and integer|
|24|error: expected ';', ',' or ')' before numeric constant|
||=== Build finished: 8 errors, 2 warnings ===| 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T06:19:31.633

您在不应该使用的地方使用了[预处理器；](http://en.wikipedia.org/wiki/C_preprocessor)让我解释。

你的线

```
#define SIZE 10 
```

告诉编译器所有出现的 4 个字母“ *SIZE* ”都将替换为“ *10* ”。

您的代码中的内容如下所示：

```
int find(int vet[], int SIZE, int elem); // before preprocessor
int find(int vet[], int 10, int elem);   // after preprocessor -> syntax error 
```

第二行在 C 中无效。

你应该做的是尽量不使用你的预处理器定义作为变量名。例如，我所做的是：我用 CAPS 命名我的预处理器宏（你做了），并且*总是只用**CamelCase*或*smallletters*命名我的函数变量。

**编辑：我的建议：**

```
int find(int vett[], int size, int elem);

int find(int vett[], int size, int elem)
{
    int i;
    int flag = 0;

    for (i = 0; i < size; i++)
        if (vett[i] == elem)
            flag = 1;

    if (flag == 1)
        return 1;
    else
        return 2;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T06:07:47.973

如果您使用 SIZE 作为常量，则无需将其传递给函数：

```
int find(int vet[], int elem); 
```

如果你希望函数是通用的，然后像这样定义它的原型：

```
int find(int vet[], int size, int elem); 
```

并这样称呼它：

```
find(vett, SIZE, elem); 
```

并这样写：

```
int find(int vett[], int size, int elem)
{
    int i;
    int flag = 0;

    for (i = 0; i < size; i++)
        if (vett[i] == elem)
            flag = 1;

    if (flag == 1)
        return 1;
    else
        return 2;
} 
```

==EDIT== 关于评论中的问题：
这`find`是一个指向函数的指针，它不保存返回值。您可以通过以下方式之一使用它：-1-

```
int answer = find(vett[size], size, elem);

if (answer == 1)
    printf ("\nI find the element!");
else if (find == 2)
    printf ("\nI did not find the element!"); 
```

-2-

```
if (find(vett[size], size, elem) == 1)
    printf ("\nI find the element!");
else if (find == 2)
    printf ("\nI did not find the element!"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T06:07:24.023

您不是将整个向量 vett 传递给函数 find()，而是将其第 SIZE 个元素传递给函数。

# objective-c - ios中的NSDictionary到xml字符串转换

> ID：10793840
> 
> 赞同：1
> 
> 时间：2012-05-29T06:05:01.357
> 
> 标签：objective-c, ios, xml-serialization

如何将 NSDictionary 格式的请求参数转换为 XML 字符串。我使用了 NSPropertyListSerialization 方法，但它提供了 Plist 格式的 XML 字符串。我需要一个适当的转换方法。是否有任何库或自定义序列化方法可用？

请帮我！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:48:04.883

[KissXML](https://github.com/robbiehanson/KissXML)是一个用于在 iOS 中编写 XML 的优秀库。您必须自己解析 NSDictionary 并构建 XML 树，但这样您就可以自由地以任何您想要的方式构建 XML。

# c# - 指纹识别SDK

> ID：10793846
> 
> 赞同：2
> 
> 时间：2012-05-29T06:05:18.500
> 
> 标签：c#, .net, sdk, fingerprint

我正在寻找与 C# 项目一起使用的指纹识别 SDK。

我有一份在指定区域有申请人指纹的纸质表格列表，我需要消除重复的表格（具有相同指纹的表格）。纸质表格将使用高速扫描仪进行扫描。我需要一个 SDK 来与其他表单指纹进行一对多匹配。

我发现的大多数 SDK 只接受来自指纹扫描仪的输入。是否有任何指纹 SDK 可以接受扫描的指纹图像（例如 TIFF 格式）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-26T17:58:42.767

使用[VeriFinger SDK](http://www.neurotechnology.com/verifinger.html)

它可以处理你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T03:47:52.803

是的，从以下[链接](http://www.files.com/set/5205aeeb584ce)下载 C# sdk 版本。它有一个 CTK_DLL API，可用于指纹处理。

# c# - 在 Windows 8 中更改默认磁贴的形状

> ID：10793850
> 
> 赞同：1
> 
> 时间：2012-05-29T06:05:46.803
> 
> 标签：c#, windows, windows-8, tile

在 Windows 8 中，当我们构建我们的应用程序并在模拟器中检查它时，会以默认的正方形形状创建图块，我希望为我的应用程序创建一个矩形图块，例如起始页上的“视频”图块。有没有办法我可以管理这个

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:46:01.323

只需几个步骤即可做到这一点：

1.  将 310x150 像素的图像添加到您的项目中
2.  打开您应用的“Package.appxmanifest”
3.  在“平铺”部分中，将“宽徽标”设置为指向该图像

该应用程序将在首次安装时默认使用宽磁贴，但请记住，用户最终可以决定是否显示宽磁贴或方形磁贴。（您无法以编程方式控制选择 - 除非我认为根本不提供宽磁贴。）

有关更多信息，请参阅：

*   [快速入门：使用 Microsoft Visual Studio 清单编辑器创建默认磁贴](http://msdn.microsoft.com/en-us/library/windows/apps/hh465437.aspx)
*   [选择您的应用图像](http://msdn.microsoft.com/en-us/library/windows/apps/Hh846296.aspx)
*   [DefaultTile](http://msdn.microsoft.com/en-us/library/windows/apps/br211427.aspx)

# twitter - 扫描 Twitter 关注者，API 调用问题

> ID：10793856
> 
> 赞同：0
> 
> 时间：2012-05-29T06:06:13.510
> 
> 标签：twitter

我想获得可能是垃圾邮件的追随者（我的算法之类的个人资料不超过 10 个推特，默认个人资料图片等。）

但是假设一个配置文件有 1k 个关注者，通过 150 个 api 调用请求从该配置文件中获取所有数据太难了。

还有其他想法吗？任何第三方 api 来获取配置文件数据？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:39:32.603

它可以通过**两个**API 调用来完成。

首先，您想[获得所有关注者](https://dev.twitter.com/docs/api/1/get/followers/ids)

```
https://api.twitter.com/1/followers/ids.json?screen_name=evilspammer 
```

这将返回多达 5,000 个用户 ID。

然后，将这些 ID 发布给[用户/查找](https://dev.twitter.com/docs/api/1/get/users/lookup)

然后，您将取回跟踪您的垃圾邮件发送者的所有用户的完整个人资料。

# spring - @Service 实例化了两次

> ID：10793858
> 
> 赞同：1
> 
> 时间：2012-05-29T06:06:16.877
> 
> 标签：spring, spring-mvc, spring-security

尝试用 Spring MVC 和 Spring Security 做一些实验：

```
@Controller
@RequestMapping("/auth")
public class AuthController {   
    @Autowired
    // @Qualifier("userDetailsService") - tried adding this
    private MyUserDetailsService userDetailsService;
    ...
}

// @Scope("singleton") - tried adding this
@Service("userDetailsService")
public class MyUserDetailsService implements UserDetailsService {
    ...
} 
```

我拥有的完整 context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <!-- ORIGINAL springmvc-servlet.xml -->
    <mvc:annotation-driven />
    <mvc:resources mapping="/static/**" location="/static/" />

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/"></property>
        <property name="suffix" value=".jsp"></property>
    </bean>

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

    <context:annotation-config />
    <context:component-scan base-package="com.xxxxxxxxx" />
    <!-- end ORIGINAL springmvc-servlet.xml -->

    <!-- FROM springmvc-security.xml -->
    <security:global-method-security secured-annotations="enabled">
    </security:global-method-security>

    <security:http auto-config="true" access-denied-page="/auth/denied">
        <security:intercept-url pattern="/admin/*" access="ROLE_ADMIN"/>        
        <security:intercept-url pattern="/user/*" access="ROLE_USER"/>
        <security:intercept-url pattern="/auth/login" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
        <security:intercept-url pattern="/auth/register" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
        <security:intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
        <security:form-login login-page="/auth/login" authentication-failure-url="/auth/login?login_error=true" default-target-url="/user"/>
        <security:logout logout-url="/auth/logout" logout-success-url="/" invalidate-session="true"/>
        <security:openid-login authentication-failure-url="/login?login_error=t" user-service-ref="openIdUserDetailsService" />
    </security:http>

    <security:authentication-manager>
        <security:authentication-provider user-service-ref="userDetailsService" />
    </security:authentication-manager>
    <!-- end FROM springmvc-security.xml -->    
</beans> 
```

出于某种原因，创建了 2 个实例`MyUserDetailsService`。第一个由 Spring Security 使用，第二个被注入到`AuthController`. 如果我想要一个实例，那么正确的方法是`MyUserDetailsService`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:22:09.550

您没有显示足够的配置来确定，但我敢打赌，您对如何在 Spring MVC 应用程序中管理 Spring ApplicationContexts 感到困惑。我对关于同一问题的另一个问题的回答几乎可以肯定是您需要阅读的内容：

[在父上下文与子上下文中声明 Spring Bean](https://stackoverflow.com/questions/7746633/declaring-spring-bean-in-parent-context-vs-child-context/7748108#7748108)

您很可能已经在应用程序的根上下文和子上下文中声明了您的服务 bean（显式或使用组件扫描）。作为一个服务 bean，它应该只存在于根上下文中。您还可以从阅读此答案中受益：

[Spring XML 文件配置层次结构帮助/说明](https://stackoverflow.com/questions/7774295/spring-xml-file-configuration-hierarchy-help-explanation/7774597#7774597)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:21:59.643

这个配置对我有用：

```
<security:authentication-manager>
<security:authentication-provider user-service-ref="userService"> 
```

和

```
<bean id="userService" class="com.mydomain.service.UserDetailsServiceImpl" /> 
```

[这里有一个教程](http://krams915.blogspot.co.uk/2012/01/spring-security-31-implement_5023.html)。

# c# - 应用级数格式 asp.net mvc

> ID：10793859
> 
> 赞同：3
> 
> 时间：2012-05-29T06:06:17.353
> 
> 标签：c#, .net, asp.net-mvc

在我的应用程序中，我有许多属性，例如

```
 [DisplayFormat(ApplyFormatInEditMode=false,ConvertEmptyStringToNull=false,DataFormatString="{0:0.00}")]
public decimal somedecimalvalue { get; set; } 
```

有没有什么方法可以概括这一点，只要在上面创建了一个十进制属性，格式就适用于它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:58:08.063

您可以通过创建自定义为模型中的小数属性手动分配元数据`DataAnnotationsModelMetadataProvider`：

```
public class DecimalMetadataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(IEnumerable<Attribute> attributes, Type containerType, Func<object> modelAccessor, Type modelType, string propertyName)
    {
        var metadata = base.CreateMetadata(attributes, containerType, modelAccessor, modelType, propertyName);

        if (propertyName == null)
            return metadata;

        if (metadata.ModelType == typeof(decimal))
        {
            // Given DisplayFormat Attribute:

            // if ApplyFormatInEditMode = true 
            // metadata.EditFormatString = "{0:0.00}";

            // for DataFormatString
            metadata.DisplayFormatString = "{0:0.00}";

            // for ConvertEmptyStringToNull
            metadata.ConvertEmptyStringToNull = false;
        }

        return metadata;
    }
} 
```

*然后在Global.asax.cs*中注册这个提供者的`Application_Start()`方法：

```
ModelMetadataProviders.Current = new DecimalMetadataProvider(); 
```

然后你可以`DisplayFormat`从十进制属性中删除属性。请注意，这不会影响其他属性，您可以安全地在十进制属性上添加其他数据注释。

阅读有关[MetaData](http://msdn.microsoft.com/en-us/library/Ee407408%28v=vs.100%29.aspx)类及其属性的更多信息。

快乐编码！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:59:49.670

您必须使用*Model Templates*签出。

如果要自定义小数点在整个应用程序中的显示方式，则必须创建一个名为*decimal.cshtml*（如果是 Razor）的局部视图并将其存储在*Views/Shared/DisplayTemplates*文件夹中。

在 decimal.cshtml 中，您可以控制模型小数的显示方式。

像这样，要自定义显示以进行编辑的方式，您必须创建另一个具有相同名称的视图并将其转储到*Views/Shared/EditorTemplates*文件夹中。

MVC 框架负责其余的事情。

前任。

**视图/共享/DisplayTemplates/decimal.cshtml**

```
@model decimal
<p>
  @Model.ToString("0.00")
</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T06:19:39.393

无法准确理解您想知道的内容。再描述一些

我认为没有直接的功能可以做到这一点。拥有一个接口并为所有实体实现相同的接口怎么样？

# javascript - 使用数据表分页中的每个页面的 Ajax 请求

> ID：10793860
> 
> 赞同：0
> 
> 时间：2012-05-29T06:06:22.627
> 
> 标签：javascript, jquery, pagination, datatables

我正在使用数据表并使用服务器端的 Ajax 填充数据。我不想一次从服务器中提取全部数据，但需要获取单个页面的结果，当用户按下下一个或上一个链接时，我想进行 ajax 调用并只为该页面即时获取结果。

数据表可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:22:42.957

你可以使用 jQuery 分页插件。它将完全符合您的目的。

这将 1\. 一次带一页数据 2\. 你可以设置 no。每页记录数。3\. 前后浏览页面 4\. 按列排序记录

它看起来像这样 [http://th3silverlining.com/2010/04/15/pajination-a-jquery-pagination-plugin/](http://th3silverlining.com/2010/04/15/pajination-a-jquery-pagination-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:15:30.693

你需要的是正确的初始化

```
$(document).ready(function() {
    $('#example').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "scripts/server_processing.php"
    } );
} ); 
```

有关完整的文档和示例，请查看[此处](http://www.datatables.net/release-datatables/examples/server_side/server_side.html)

# c++ - 通过接口测试实现

> ID：10793862
> 
> 赞同：2
> 
> 时间：2012-05-29T06:06:38.660
> 
> 标签：c++, unit-testing

我从我的 C++ 项目的测试覆盖开始，这对我来说很奇怪，很多框架都无法创建参数化单元测试。

例如我有接口：

```
class IBuffer {
public:
   virtual void pushBytes(void *data, int length) = 0;
   virtual int  getSize() = 0;
}; 
```

还有一些实现者：

```
class BufferImplOne{};
class BufferImplTwo{}; 
```

现在我想检查将字节推送到缓冲区是否会真正增加其大小：

```
TEST_CASE("example/test", "Test for any IBuffer implementor") {

IBuffer *buf = // ... {I want external parameter to be here}

REQUIRE( buf->getSize() == 0 );

int dataLength = 10;
int data[dataLength];
    buf->pushBytes(data, dataLength * sizeof(int));

REQUIRE( buf->getSize() == dataLength * sizeof(int));
} 
```

现在我要测试每个实现，我想做的第一件事是检查实现者是否满足接口测试。但我不想复制粘贴相同的代码两次，我只想将实现作为参数传递给接口测试。如何处理这样的问题？

我正在使用[CATCH](https://github.com/philsquared/Catch/wiki/Catch-for-Objective-C)，但似乎其他框架也没有提供相同的功能。

无论如何，我是单元测试的新手，也许我误解了一些基本的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:22:54.683

像这样的东西：

```
void TestBuffer(IBuffer& buf)
{
    REQUIRE( buf.getSize() == 0 );

    int dataLength = 10;
    int data[dataLength];
    buf.pushBytes(data, dataLength * sizeof(int));

    REQUIRE( buf.getSize() == dataLength * sizeof(int));
}

TEST_CASE("example/test", "Test for BufferImplOne implementor")
{
   BufferImplOne one;
   TestBuffer(one);
}

TEST_CASE("example/test", "Test for BufferImplTwo implementor")
{
   BufferImplTwo two;
   TestBuffer(two);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T06:17:42.007

嗯，这是真正的多态性。

```
void test(IBuffer& ib) {
    // ... your tests here ...
}

int main() {
    BufferImplOne one;
    test(one);

    BufferImplTwo two;
    test(two);
} 
```

我不太明白框架可以提供什么......

# iphone - 通过拖动对象设置对象遍历路径的边界条件

> ID：10793864
> 
> 赞同：0
> 
> 时间：2012-05-29T06:06:52.590
> 
> 标签：iphone, objective-c, ios, touches, touchesmoved

我正在开发一个应用程序，其中有一个可拖动的对象。用户可以将该对象拖动到指定的路径中，而不是路径之外。为了实现这一点，我必须设置边界条件，以便如果触摸点超出该边界条件，则对象不会移动。

我的问题是我的对象大小是 30*30。现在，如果我从上面的头发装置中触摸对象，然后将其向下拖动，它会给出一个值，但是如果我在下面的某个位置触摸同一个对象，比如说他的下巴，然后将对象移动到与我们相同的位置移动了上一个。现在在这种情况下，观点与上一个不同。所以我不明白我应该设置什么边界条件，如果我设置了第一个值的条件，那么在他的情况下，第二个触摸过程将无法移动，这是错误的，如果我设置了第二个值，那么第一个案例对象也将能够移动到边界以下。我没有使用 cocos 2D。它是简单的 ipad 应用程序。 ![在此处输入图像描述](../Images/da78fb7d5ab62b5803f151b21c96a13e.png)

为了更好地理解，我现在添加了图像，如果你触摸他左侧的绿色圆圈并向右移动，最后一个值就像 760 但如果你触摸右侧部分并向右移动，那么最后一个点是780什么的。如果垂直拖动对象，也会发生同样的情况。

我的基本要求是对象只能在图像中显示的路径内移动，而不是在它之外。

```
- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
    // Retrieve the touch point
    CGPoint pt = [[touches anyObject] locationInView:gamePice];
   startLocation = pt;
}

- (void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event
{

 CGPoint pt1 = [[touches anyObject] locationInView:gamePice];
 CGPoint pt = [[touches anyObject] locationInView:self.view];
   NSLog(@"moved=%f|%f",pt.x,pt.y); 

   if (pt.x>=306 && pt.y>=148 && pt.x<=720 && pt.y<=175) {  //these conditions how to set
        CGRect frame = [gamePice frame];
        frame.origin.x += pt1.x - startLocation.x;
        frame.origin.y += pt1.y - startLocation.y;
        [gamePice setFrame:frame];        
    }
} 
```

请建议如何实现此功能或我应该遵循什么方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:50:40.850

制作一个外部 CGRect，比如说 CGRectMake(306, 148,400,100) ，它是你的路径矩形，你需要多个矩形，但现在从一个开始。

为gamePice制作新框架，这将是根据触摸位置的框架，假设你是这样制作的，

```
 CGRect frame = [gamePice frame];
    frame.origin.x += pt1.x - startLocation.x;
    frame.origin.y += pt1.y - startLocation.y; 
```

那么你的情况将是，

```
 if (CGRectContainsRect(outerRect, frame) ) 
 {  
       [gamePice setFrame:frame];
 }

// else dont move... 
```

# ruby - Apache 上的 Rails 3 URL 路由

> ID：10793868
> 
> 赞同：1
> 
> 时间：2012-05-29T06:07:08.193
> 
> 标签：ruby, ruby-on-rails-3, routing

我知道过去，Rails 使用 .htaccess 和/或 httpd.conf 作为 Apache 上用于路由 url 的“网关”。

Rails 3 究竟使用什么来路由 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:12:37.867

首先，生产环境不需要使用 apache 或 nginx。

您可以使用 ruby​​ 服务器（如 unicorn、thin 或其他服务器）运行您的 rails 应用程序。所有这些服务器都基于 Rack。Rack 使用文件 config.ru 中描述的路由。这是路由的第一步。下一步是rails 路由（正如Strelok 所说的routes.rb）。

但最好的方法是像第一步一样使用 nginx 或 apache（但在这种情况下，最好是 nginx）。它将提供来自 /public 文件夹的所有静态内容以及它将发送到 ruby​​ 服务器的所有其他请求。

所以在这种情况下，第一步在 nginx config 中描述，第二步在 config.ru 中，最后一步在 routes.rb 中

# javascript - 哇滑块图像

> ID：10793869
> 
> 赞同：1
> 
> 时间：2012-05-29T06:07:08.487
> 
> 标签：javascript, jquery, html, css

我在我的网页中使用了哇滑块。它工作正常。但我面临一个问题。

CSS是

```
#wowslider-container1 { 
    zoom: 1; 
    position: relative; 
    max-width:960px;
    margin:0 auto;
    z-index:100;
    border:none;
    text-align:left; /* reset align=center */
}

#wowslider-container1 .ws_images{
    position: relative;
    left:0;
    top:0;
    width:100%;
    height:100%;
    overflow:hidden;
}
#wowslider-container1 .ws_images a{
    width:100%;
    display:block;
    color:transparent;
}

#wowslider-container1 .ws_images img{
    width:100%;
    border:none 0;
    max-width: none;
}
#wowslider-container1 a{ 
    text-decoration: none; 
    outline: none; 
    border: none; 
} 
```

HTML是：

```
<div id="wowslider-container1">
      <div class="ws_images">
        <ul>
          <li><img src="images/amazing_sunset.jpg" alt="amazing sunset" title="amazing sunset amazing sunset amazing sunset amazing sunset" /></li>
          <li><img src="images/apple_tree.jpg" alt="apple tree" title="apple tree"/></li>
          <li><img src="images/beutiful_landscape.jpg" alt="beutiful landscape" title="beautiful landscape"/></li>
          <li><img src="images/lightbox-btn-prev.gif" alt="nature" title="nature" width="63" height="32"/></li>
        </ul>
      </div>

  <!-- Generated by WOWSlider.com v2.2 -->
</div> 
```

如果客户想要上传小尺寸的图像，则不会重新调整大小。但是他上传了大尺寸的图像，图像被调整了大小。他完全不想设置宽度和高度。请参考最后一个li。图像尺寸为 63*62。但它会自动重新调整为 500px。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:03:23.400

在 WowSlider 应用程序（付费版）中，您可以选择设置滑块的高度和宽度（预设或自定义）。您似乎选择了 960px 的宽度。

您还可以选择保留图像的纵横比和/或拉伸小图像。单击扳手图标，单击图像，您将在右侧看到选项。

请注意——如果您的客户只有 63 x 62 像素，那么它的图像非常小。如果你把它拉伸到 960px 宽，它会变得难以置信的扭曲和像素化。在这种情况下，我会向客户请求更高质量的图像。

# r - 获取数据框中的前 n 行？

> ID：10793873
> 
> 赞同：6
> 
> 时间：2012-05-29T06:07:38.763
> 
> 标签：r, plyr

我有以下数据框。

```
date id value
2012-01-01 1 0.3
2012-01-01 2 0.5
2012-01-01 3 0.2
2012-01-01 4 0.8
2012-01-01 5 0.2
2012-01-01 6 0.8
2012-01-01 7 0.1
2012-01-01 8 0.4
2012-01-01 9 0.3
2012-01-01 10 0.2 
```

有几个日期，对于每个日期，我有 10 个 id 值，如上所示和一个值字段。我想做的是为每个 id 找到“值”字段中的前 n 个值。例如，如果 n = 3，那么我希望输出如下。

```
date id value value1 value2 value3
2012-01-01 1 0.3 NA NA NA
2012-01-01 2 0.5 NA NA NA
2012-01-01 3 0.2 NA NA NA
2012-01-01 4 0.8 0.2 0.5 0.3
2012-01-01 5 0.2 0.8 0.2 0.5
... 
```

有没有一种简单的方法可以通过 plyr 或使用 mapply 来实现？提前非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T06:25:54.780

您可以使用基本函数很容易地做到这一点：

```
id <- 1:10
value <- c(0.3,0.5,0.2,0.8,0.2,0.8,0.1,0.4,0.3,0.2)
test <- data.frame(id,value)

test$valprev1 <- c(rep(NA,1),head(test$value,-1))
test$valprev2 <- c(rep(NA,2),head(test$value,-2))
test$valprev3 <- c(rep(NA,3),head(test$value,-3)) 
```

结果

```
 id value valprev1 valprev2 valprev3
1   1   0.3       NA       NA       NA
2   2   0.5      0.3       NA       NA
3   3   0.2      0.5      0.3       NA
4   4   0.8      0.2      0.5      0.3
5   5   0.2      0.8      0.2      0.5
6   6   0.8      0.2      0.8      0.2
7   7   0.1      0.8      0.2      0.8
8   8   0.4      0.1      0.8      0.2
9   9   0.3      0.4      0.1      0.8
10 10   0.2      0.3      0.4      0.1 
```

之前在这里犯了一个错误 - 这是`sapply`一个函数中的一个版本：

```
prevrows <- function(data,n) {sapply(1:n,function(x) c(rep(NA,x),head(data,-x)))}
prevrows(test$value,3) 
```

这给出了这个：

```
 [,1] [,2] [,3]
 [1,]   NA   NA   NA
 [2,]  0.3   NA   NA
 [3,]  0.5  0.3   NA
 [4,]  0.2  0.5  0.3
 [5,]  0.8  0.2  0.5
 [6,]  0.2  0.8  0.2
 [7,]  0.8  0.2  0.8
 [8,]  0.1  0.8  0.2
 [9,]  0.4  0.1  0.8
[10,]  0.3  0.4  0.1 
```

然后，您可以将其应用于数据中的每组日期，如下所示：

```
result <- tapply(test$value,test$date,prevrows,3) 
```

它为每个日期集提供了一堆列表。您可以使用以下方法将这些绑定起来以添加回您的数据集：

```
data.frame(test,do.call(rbind,result)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-03T21:39:06.127

使用`data.table`v1.9.5+ 这很简单：

```
library(data.table)
setDT(dt)

lags <- dt[, shift(value, n = c(1,2,3))] 
```

或将它们作为附加列附加到同一 data.table 中：

```
dt[, c("lag1", "lag2", "lag3") := shift(value, n = c(1,2,3))] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-18T18:38:13.360

只想添加到@thelatemail 的答案（我无法直接评论我的声誉）：

```
prevrows2 <- function(data,n) {
if (length(data) >= 10){
sapply(1:n,function(x) c(rep(NA,x),head(data,-x)))
} else {
cbind(sapply(1:length(data),function(x) c(rep(NA,x),head(data,-x))),
matrix(NA,nrow = length(data),ncol= n - length(data)))}
} 
```

此添加可防止组中的行数小于您希望选择的行数 (n) 的情况

# javascript - 用户通过ajax登录时刷新div？

> ID：10793875
> 
> 赞同：1
> 
> 时间：2012-05-29T06:07:53.463
> 
> 标签：javascript, ruby-on-rails, ajax, devise

我目前`<ul>`在我的导航区域中有一个`<%= render :partial => "sessions/manager" %>`，它基本上调用另一个部分，这取决于用户的登录状态呈现登录表单或欢迎声明。

我的登录部分由 ajx 提供支持，因此会自动刷新。这是我使用的代码。

**登录.js**

```
$(document).ready(function() {

  $('form#sign_in').bind('ajax:success', function(e, data, status, xhr) {
    console.log(data);
    if(data.success) {
      $('.user_nav').html(data.content);
    } else {
      $('.user_nav').prepend(data.errors.join('<br />'));
    }
  });

}); 
```

现在我希望我的页面上有另一个 div，其中包含根据用户登录状态隐藏或显示的各种链接。

目前我的代码是这样的。

```
<% if(signed_in?) %>
  <li><%= link_to "Clients", "/clients"  %></li>
  <li><%= link_to "Jobs", "/jobs"  %></li> 
<% else %>
<% end %> 
```

但是，这并不像 id 那样工作。链接一开始不显示，这很酷但是当我登录时链接不会再次显示......除非我刷新整页。

我怎样才能 ajax-ify 这个部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:36:59.940

最简单的方法是将`div`s 放在页面上，然后使用 javascript 设置切换其可见性。

把它放在你的代码中：

```
<li class="login-show" <%= signed_in? ? "" : "style='display:none'" %> >
  <%= link_to "Clients", "/clients"  %>
</li>
<li class="login-show" <%= signed_in? ? "" : "style='display:none'" %> >
  <%= link_to "Jobs", "/jobs"  %>
</li> 
```

然后这是你的js：

```
 $('form#sign_in').bind('ajax:success', function(e, data, status, xhr) {
    console.log(data);
    if(data.success) {
      $('.user_nav').html(data.content);
      // show the li items hidden from non-logged in users
      $('.login-show').show();
    } else {
      $('.user_nav').prepend(data.errors.join('<br />'));
    }
  });
}); 
```

那应该行得通。但为了保持整洁，我会移动这个垃圾：

```
<%= logged_in? "" : "style='display:none'" %> 
```

进入辅助方法

# image - 使用 google-apps-script 创建带有超链接的图像

> ID：10793876
> 
> 赞同：0
> 
> 时间：2012-05-29T06:07:55.017
> 
> 标签：image, hyperlink, google-apps-script

我一直在尝试将带有超链接的图像放入谷歌应用脚​​本 ui 中。我首先想到的是使用 createAnchor()，但它只允许文本。然后我想到了使用一个按钮，但据我所知，你不能打开一个新的选项卡/窗口并在回调函数中重定向。

我也尝试过 createHTML()，但该元素尚未由它处理。

我见过人们在图像上覆盖透明按钮，但在回调中仍然存在同样的问题。

我的研究还没有找到答案。有没有人有任何解决方案/例子？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:19:23.943

您是否尝试过覆盖图像的透明锚？

```
function doGet() {
var app = UiApp.createApplication().setTitle("Image Anchor");
var panel = app.createAbsolutePanel().setWidth('50%').setHeight('50%');
var image = app.createImage().setUrl("https://lh6.googleusercontent.com/-v0Q3gPQz03Q/T_y5gcVw7LI/AAAAAAAAAF8/ol9uup7Xm2g/s512/GooglePlus-512-Red.png").setStyleAttribute("width", "28px").setStyleAttribute("height", "28px");
var anchor = app.createAnchor("?", "https://plus.google.com/u/1/116085534841818923812/posts").setHeight("28px").setWidth("28px").setStyleAttribute("opacity", "0.1").setTarget("blank");
panel.add(image,100,50);
panel.add(anchor,100,50);
app.add(panel);  
return app.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:47:57.063

> app.createAbsolutePanel() .add(app.createImage(' [https://www.google.com/images/logos/google_logo_41.png](https://www.google.com/images/logos/google_logo_41.png) ')) .add(app.createAnchor('',' [https://www. google.co.uk/intl/en/about/](https://www.google.co.uk/intl/en/about/) ') .setStyleAttributes({position:'absolute',top:'0px',left:'0px',width:'201px',height:'47px',opacity: '0'}))

这是一个经过测试的。它工作正常。它不适用于定位图像（作为“绝对”）。它不适用于 .setHorizo​​ntalAlignment(UiApp.Horizo​​ntalAlignment.CENTER)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T03:28:34.340

这在 Chrome20 和 IE9 上对我有用

```
 // Container for box and results
      var imageContainer = app.createFlexTable();

      // Setup the button
      var button = app.createButton("ImageButton");
      button.setStyleAttribute("background", "url(dontshowimagehere.JPG) no-repeat");
      button.setStyleAttribute("position", "absolute");
      button.setStyleAttribute("color", "transparent");
      button.setStyleAttribute('zIndex','1');
      button.setStyleAttribute("border", "0px solid black");

      imageContainer.setWidget(0, 0, button);

      // image to click
      var image = app.createImage("image.jpg").setId(imageId);

      imageContainer.setWidget(1,0, image); 
```

图像有轻微的 (3px) 偏移。如果重要的话，这看起来可以修复它[http://www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)（使用相对的弹性表和顶部等的图像和按钮）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-18T10:42:35.290

我设法用一个 Anchor 对象并使用 CSS3 来做到这一点。它适用于 Chrome，我没有在其他浏览器中测试它。

```
gui.createAnchor("", false, "$DESTINATION_URL$")
   .setStyleAttributes({ "display":"block",
                         "width":"$IMAGE_WIDTH_IN_PIXEL$",
                         "height":"$IMAGE_HEIGHT_IN_PIXEL$",
                         "background":"url($URL_OF_THE_IMAGE$)",
                         "background-size":"100% 100%",
                         "background-repeat":"no-repeat" }) 
```

当然，您必须用您的数据替换 $......$。

蒂埃里

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T17:05:30.267

我不相信这对于可用的小部件是可能的。我建议更改您的 UI 设计以改用 Anchor 小部件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T02:52:41.477

如果您直接在页面上编码，请使用 HTML Box。单击“编辑”以编辑您的页面，然后转到菜单中的“插入>HTML 框”。它也将接受javascript！有一些注意事项 - 使用 javascript 时，HTML Box 将不接受链接......太糟糕了，但是那里有太多的漏洞利用。

如果您在应用程序脚本中编码，您可以尝试将图像放在面板上并使用绝对面板并将链接放置在图像上。另一种方法是使用 .setStyleAttribute 进行 CSS 样式设置，并利用 zIndex 参数将面板放置在图像顶部......就像这样：

```
var panel = app.createSimplePanel();
// add your image to the simple panel or whatever panel you wish to choose in your GUI

var popPanel = app.createSimplePanel()
  .setStyleAttribute('top','Y')
  .setStyleAttribute('left','X')
  .setStyleAttribute('zIndex','1')
  .setStyleAttribute('position','fixed');
// add your anchor to the popPanel

app.add(panel).add(popPanel); 
```

不是 100% 确定是否可以使此面板透明，但您可以尝试类似： .setStyleAttribute('background',transparent') 或通过以下方式更改不透明度： .setStyleAttribute('opacity','.5')

希望这能给你一些想法！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-29T09:57:49.977

如果您首先在字符串中创建所有 HTML，然后可以将页面的内容替换为您想要的 HTML，如下所示：

```
var myString = 'the html you want to add, for example you image link and button';
var page = SitesApp.getSite('example.com', 'mysite').getChildByName('targetpage');
var upage = page.setHtmlContent('<div>' + myString + '</div>'); 
```

# ios - 如何在iphone应用程序中压缩音频文件

> ID：10793878
> 
> 赞同：-1
> 
> 时间：2012-05-29T06:08:01.363
> 
> 标签：ios, audio, compression, mp3

我正在开发一个新应用程序，对于该应用程序，我需要压缩音频文件。我不知道该怎么做。有人可以帮忙吗？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:18:06.793

音频格式的最佳选择取决于您使用音频的方式；例如，是短的警报声吗？或者它是一段较长的乐曲，可以播放一段时间？需要什么样的品质？

您很可能需要使用 AAC，它是 iOS 支持的最常见的压缩音频格式之一。

您应该在文档中找到所有答案：

*   [核心音频介绍](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/CoreAudioOverview/Introduction/Introduction.html)
*   [播放音频](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQPlayback/PlayingAudio.html#//apple_ref/doc/uid/TP40005343-CH3-SW1)

# javascript - 无法从画布缓存图像数据

> ID：10793879
> 
> 赞同：0
> 
> 时间：2012-05-29T06:08:04.890
> 
> 标签：javascript, canvas, browser-cache

所以我有一个将图像转换为灰度的功能。它接受原始图像的 url，以及将输出放置到的输出画布。该功能在大多数浏览器上运行非常快，但在移动浏览器上运行速度很慢（对于 700x700 图像大约需要 3-4 秒）。出于这个原因，我想缓存（在客户端）灰度图像数据，然后当多次请求图像时，我想提供缓存的灰度数据而不必重新计算它。

我已经对 jsfiddle 进行了测试。这里是： http: [//jsfiddle.net/RCkDX/4/](http://jsfiddle.net/RCkDX/4/) 在测试页面中，我在顶部显示原始图像，在底部输出用于进行计算的画布和两个画布中间它们应该输出与底部图像相同的输出（缓存数据除外）。

目前我收到“未捕获的类型错误：类型错误”，我认为这是因为它似乎不喜欢缓存数据，我尝试过移动东西，尝试不同的方法，但没有任何运气。

重要的是我不使用 dataurls 来缓存，因为我正在使用的 android 移动浏览器此时会显示一个蓝色的小问号图标（不是画布上的正确数据），因此任何没有 dataurls 的选项都可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:48:02.163

@jezternz，我认为`'Uncaught TypeError: Type error'`在您的代码中发生是因为每次都`readyCanvas`调用函数（没有区别：缓存是否存在）；如果没有缓存`returnFunc`，则在`readyCanvas` *grayscaleCache[src]*内部可以返回*undefined 。*在我的代码示例（[jsfiddle.net/RCkDX/5](http://jsfiddle.net/RCkDX/5)）`readyCanvas`中，`returnFunc`仅在定义*grayscaleCache[src]*（构造并保存缓存）时才调用。从我的代码中删除`setTimeout`。主要原因：为了简化示例。

如果您需要构建没有阻塞页面（没有冻结 UI）的代码，您必须提供更复杂的代码来管理缓存。例如：

*   *grayscaleCache[src]*是*未定义*的，这意味着*“没有缓存，并且任何先前的请求都没有在构建缓存”* - 您需要启动缓存过程；
*   *grayscaleCache[src]*等于*null*表示*“缓存正在由先前的请求构建”* - 您不需要启动缓存过程，您只需等待（检查*setTimeout*）当缓存准备好时；
*   *grayscaleCache[src]*不是*未定义*且不是*null* - *“缓存已准备好”* - 使用缓存。

# windows-phone-7 - 单击 bingmaps 中的图钉时如何显示布局？

> ID：10793881
> 
> 赞同：2
> 
> 时间：2012-05-29T06:08:17.643
> 
> 标签：windows-phone-7

基于在 bing 地图中显示图钉的纬度、经度值。我需要显示用户名、用户地址、一侧箭头和一个关闭按钮等布局。当单击图钉时需要显示该布局。请帮助我..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:07:37.037

Bing 地图控件接受任何 UIElement 作为子元素，因此您可以使用 UserControl。

使用您需要的布局创建一个用户控件。然后，您可以将点击事件连接到控件的视觉状态更改。

# symfony - 如何在 Symfony2 中使用 GET 和 POST 参数

> ID：10793886
> 
> 赞同：0
> 
> 时间：2012-05-29T06:08:30.967
> 
> 标签：symfony, http-post, http-get

我们正在将 PHP 应用程序转换为 Symfony2 应用程序。

我们编写的大部分页面都是全新的，但有些页面我们决定保持原样。*即我想使用相同的 php 而没有任何重大变化。*

在我们使用的 php 页面中`GET['prospect_id']`，`GET['executive_id']`还有许多其他参数。GET 和 Post 方法。当我在 Symfony1.4 中查看页面时，没有错误或警告。

但是当我在 Symfony 2 中查看时，我得到了`undefined index error`.

我该如何解决这个问题？

编辑：如果 GET['prospect_id'] 为空，则 Symfony 1.4 中没有错误，但我`undefined index`在 Symfony2 中得到通知。有很多这样的变数。是否需要在使用前定义变量。如何避免此通知消息。

我想要的是如果我使用 $_GET['xxx']。symfony2 不应显示任何通知或错误。我想逃离那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:55:58.577

使用（在 Symfony2 中）控制器请求对象，获取这些参数：

```
$this->request->get('prospect_id');
$this->request->get('executive_id'); 
```

如果没有给出值，您还可以设置默认值。看看这个[文档](http://symfony.com/doc/current/book/http_fundamentals.html)。

# java - 在struts 2中将java bean转换为json数据

> ID：10793887
> 
> 赞同：0
> 
> 时间：2012-05-29T06:08:32.333
> 
> 标签：java, javascript, jquery-plugins, struts2

我有一个 java bean 类 'MenuItem' ，它由 children 列表组成。我想在jsp中显示迭代和渲染这个对象并显示菜单树。我尝试了 json 数据创建，但它需要 ajax 调用。就我而言，我需要提交页面而不是 ajax。

我正在使用 struts 2。谁能建议我如何在 jsp 中渲染和迭代我的 bean 对象？

提前致谢。

这是我的菜单 bean 对象：

```
public class MenuItem implements Serializable {    
    private static final long serialVersionUID = 8690828081102943225L;

    private Long id;
    private String name;
    private Collection<MenuItem> children;
    private String url;
    private String actionHoverLabel;
    private String actionLabel;
    private Long displayOrder;
    private Boolean isLeaf;
    private Boolean isVisible;
    private Long menuLevel;
    private Long parentId;      

    public String getActionHoverLabel() {
        return actionHoverLabel;
    }

    public void setActionHoverLabel(String actionHoverLabel) {
        this.actionHoverLabel = actionHoverLabel;
    }

    public String getActionLabel() {
        return actionLabel;
    }

    public void setActionLabel(String actionLabel) {
        this.actionLabel = actionLabel;
    }

    public Long getDisplayOrder() {
        return displayOrder;
    }

    public void setDisplayOrder(Long displayOrder) {
        this.displayOrder = displayOrder;
    }

    public Boolean getIsLeaf() {
        return isLeaf;
    }

    public void setIsLeaf(Boolean isLeaf) {
        this.isLeaf = isLeaf;
    }

    public Boolean getIsVisible() {
        return isVisible;
    }

    public void setIsVisible(Boolean isVisible) {
        this.isVisible = isVisible;
    }

    public Long getMenuLevel() {
        return menuLevel;
    }

    public void setMenuLevel(Long menuLevel) {
        this.menuLevel = menuLevel;
    }

    public Long getParentId() {
        return parentId;
    }

    public void setParentId(Long parentId) {
        this.parentId = parentId;
    }

    public MenuItem() {
        children = new ArrayList<MenuItem>();
        isVisible = true;
    }

    public MenuItem(Long id, String name) {

        this.id = id;
        this.name = name;
        children = new ArrayList<MenuItem>();
        isVisible = true;
    }

    public Long getId() {    
        return this.id;    
    }

    public void setId(Long id) {
        this.id = id;    
    }

    public String getName() {    
        return this.name;    
    }

    public void setName(String name) {    
        this.name = name;    
    }

    public Collection<MenuItem> getChildren() {

        return this.children;

    }

    public void setChildren(Collection<MenuItem> children) {    
        this.children = children;    
    }

    public boolean isLeaf() {    
        if (children != null && children.size() > 0) {    
            return false;    
        } else {    
            return true;    
        }    
    }

    public void addChild(MenuItem child) {    
        if (child != null && children != null) {    
            children.add(child);
            child.setParentId(this.getId());    
        }    
    }

    public void removeChild(MenuItem child) {    
        if (child != null && children != null) {    
            children.remove(child);
            child.setParentId(null);    
        }    
    }       

    public void setUrl(String url) {
        this.url = url;
    }

    public String getUrl() {
        if (url == null) {
            return name;
        } else {
            return url;
        }
    }

    @Override
    public boolean equals(Object obj) {
        MenuItem m = null;
        boolean isEqual = false;    
        if (id != null && id >= 0) {
            m = (MenuItem) obj;
            if (m.getId().equals(id) 
                    isEqual = true;                     
        } else {    
            isEqual = super.equals(obj);    
        }    
        return isEqual;    
    }

    @Override
    public int hashCode() {    
        if (id != null && id >= 0) {    
            return id.hashCode();    
        } else {    
            return super.hashCode();    
        }    
    }

    @Override
    public String toString() {    
        return "name: " + name + " id: " + id;    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:34:04.360

如果您想在 JSP 中对 bean 进行操作，您可以使用 struts 标签很好地做到这一点。bean 必须在范围内。

为什么在这种情况下需要 JSON？如果您仍然需要 JSON，请检查 GSON 库和 Jackson 映射器库。在 JSP 上，您可以将 JSON 对象存储在一个变量中，然后对其进行操作。在页面提交 Struts 操作将形成 JSON，然后将其设置在页面 bean 变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:15:10.720

访问 www.json.org

下载用于 JSON 编码的 Java 库。

编译它（为方便起见构建一个 jar）。

编写一个类似这样的方法来 JSON 序列化你的 bean：

```
 public static String toJson(SomeBean bean) 
 {
        JSONObject jo = new JSONObject(bean);
        return jo.toString();
 } 
```

反序列化有点棘手，但应该像这样工作：

```
JSONObject jo = new JSONObject(jsonString);
SomeBean res = new SomeBean();

res.someProperty = jo.getString("someProperty");
res.someIntProperty= jo.getInt("someIntProperty"); 
```

显然，您必须处理复杂的属性，但对于简单的 bean，它应该像魅力一样发挥作用。

直接从来源：

```
/**
     * Construct a JSONObject from an Object using bean getters.
     * It reflects on all of the public methods of the object.
     * For each of the methods with no parameters and a name starting
     * with <code>"get"</code> or <code>"is"</code> followed by an uppercase letter,
     * the method is invoked, and a key and the value returned from the getter method
     * are put into the new JSONObject.
     *
     * The key is formed by removing the <code>"get"</code> or <code>"is"</code> prefix.
     * If the second remaining character is not upper case, then the first
     * character is converted to lower case.
     *
     * For example, if an object has a method named <code>"getName"</code>, and
     * if the result of calling <code>object.getName()</code> is <code>"Larry Fine"</code>,
     * then the JSONObject will contain <code>"name": "Larry Fine"</code>.
     *
     * @param bean An object that has getter methods that should be used
     * to make a JSONObject.
     */
    public JSONObject(Object bean) {
        this();
        this.populateMap(bean);
    } 
```

你确定你已经正确设置了所有东西（类路径）吗？

# mysql - MySQL Cluster 之上的 Hive 层

> ID：10793891
> 
> 赞同：1
> 
> 时间：2012-05-29T06:08:55.283
> 
> 标签：mysql, hadoop, cluster-computing, hive

免责声明：我是 Hadoop 和 Hive 的新手。

我们已经建立了一个存储大量数据的 MySql Cluster（版本 7.2.5）。这些行数以百万计，并根据 Mysql 的自动分片逻辑进行分区。即使我们正在利用 Cluster 7.2 的自适应查询本地化 (AQL)，我们的一些查询也有多个连接，并且会运行几分钟甚至几小时。

在这种情况下，我可以使用 Hive 和 Hadoop 来查询数据库并检索数据吗？它会使查询更快吗？它是否复制其文件系统中的数据？这种方法的优缺点是什么？

我的意图是使用 Hive 作为 MySQL Cluster 之上的一个层，并将其用于 MySQL Cluster DB 的读/写。我的申请中没有任何交易。那么这真的可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:17:50.663

我认为这是可能的。我所知道的最接近这个方向的解决方案是 Daniel Abadi 的：http://www.hadapt.com/。
它解决方案的想法是在每个节点上都有本地 RDBMS，并在这些节点上运行通常的 hadoop MR，并在其之上运行 Hive。
原则上，如果您将进行智能 Hive 集成并将谓词下推到 MySQL 实例，它可以为您带来一些性能提升。
同时，你应该做一些严肃的黑客攻击，让 hadoop 知道你的分片位置，以保持数据的局部性。
总结以上所有内容 - 这应该是可能的，但需要认真开发。
同时 - 我不知道在 Mysql 集群上运行 hive 的开箱即用解决方案。

# maven - 使用通配符使用 maven-assembly-plugin 复制文件夹

> ID：10793894
> 
> 赞同：7
> 
> 时间：2012-05-29T06:09:25.257
> 
> 标签：maven, maven-assembly-plugin

我正在使用 maven-assembly-plugin 在 .tar.gz 文件中收集一些文件和文件夹。在我的目标目录中，我有一些具有这些名称的文件夹（例如）：

lib-oracle lib-mysql lib-sqlserver 。.

每个文件夹都包含一些jar文件。

我想将这些文件夹（以及它们的内容）复制到最终的 .tar.gz 文件中。我知道我可以像这样单独复制它们：

```
<fileSet>
    <directory>target/lib-oracle</directory>
    <outputDirectory>lib-oracle</outputDirectory>
</fileSet> 
```

但我很想知道是否有任何方法可以将它们全部复制在一起？
也许是这样的：

```
<fileSet>
    <directory>target/lib*</directory>
</fileSet> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T06:34:07.017

最后我成功地做到了：

```
<fileSet>
        <directory>target</directory>
        <includes>
            <include>lib*/*</include>
        </includes>
        <outputDirectory>/</outputDirectory>
    </fileSet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-20T23:21:29.180

你可以做

```
<fileSet>
    <directory>target/</directory>
    <outputDirectory>lib-oracle</outputDirectory>
</fileSet>` 
```

即使这样，您也可以从目标文件夹中获取所有数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-06T11:56:49.603

您可以使用：

```
<fileSet>
    <directory>target</directory>
    <includes>
        <include>lib-oracle/**</include>
        <outputDirectory>/</outputDirectory>
    </includes>
</fileSet> 
```

'**' 表示当前文件夹中的所有文件以及当前文件夹下子文件夹中的所有文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-29T07:28:32.603

I tested this configuration

```
<include>**/*</include> 
```

and it copies all the sub-folder and files in the sub-folder, except the empty sub-folder. I think it is logic and enough.

# html - 什么技术：在浏览器中画程序？

> ID：10793896
> 
> 赞同：0
> 
> 时间：2012-05-29T06:09:36.137
> 
> 标签：html, svg, cloud, paint

我想开发一个应该托管在云中的小绘图程序（SVG 名片设计器），我试图弄清楚我应该采用什么技术。

我认为可能的答案是 SilverLight、Flash、Java、HTML5。

出于几个原因，我很乐意避免使用 SilverLight 和 Flash，我担心 HTML5 与 ex 的兼容性。IE浏览器？Java 我不太了解以了解这是否是正确的方法。

我印象深刻的一个例子是：

[http://code.google.com/p/svg-edit/](http://code.google.com/p/svg-edit/)

并且看起来与此相同，但 IE 浏览器（这是大多数人使用的）同样是关于 SVG 格式的问题。

我可能只能和前任住在一起。IE9，但想知道你们认为制作这样一个应用程序的正确方法/语言/框架/技术是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:41:32.257

对于名片设计师，您应该专注于字体和页面布局，在这种情况下，您需要使用在线编辑器。有许多从网页运行的免费所见即所得编辑器，还有一些非常复杂的编辑器，例如 FCKeditor。FCK 还包括上传图像和维护剪贴画库所需的一切。我相信它适用于 Windows 和 Apache Web 服务器，并且一旦上传文件夹具有写入权限，它就不需要管理员权限来安装。

# magento - Mage 注册表项“_singleton/core/resource”已存在于 magento

> ID：10793897
> 
> 赞同：2
> 
> 时间：2012-05-29T06:09:52.457
> 
> 标签：magento

我在我的网站上遇到这个问题 Mage 注册表项“_singleton/core/resource”已经存在，请帮助我如何解决这个错误。

我检查了文件夹和文件权限
，将 lib/Zend/Cache/Backend/File.php 更改为 'cache_dir' => null，更改为 'cache_dir' => 'tmp'，index.php 中的更改注释了该行

```
if (isset($_SERVER['MAGE_IS_DEVELOPER_MODE'])) {
    Mage::setIsDeveloperMode(true);
} 
```

进行这些更改后，它运行良好，今天它再次停止并显示相同的问题

我已经尝试了每一种方法，但没有成功。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T08:10:47.147

我之前偶然发现了这个问题，这是因为缓存。如果您仍然可以访问 Magento 管理面板，请去刷新您的缓存存储（系统 -> 缓存管理页面顶部附近的两个主要按钮）。

您还可以参考[此博客文章](https://web.archive.org/web/20141104153311/http://vipinsahu.com/magento-mage-registry-key-_singletoncoreresource-already-exists)以获取有关缓存问题的更多帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-19T17:32:49.497

清除编译器缓存并在 Magento 的后端打开它是非常重要的。

## 清除缓存

SSH：查找 ./var/cache -type f -delete FTP：mrm -r ./var/cache ；mkdir ./var/cache

* * *

## 禁用/清除 Magento 编译

SSH: php -f shell/compiler.php -- 禁用 php -f shell/compiler.php -- 清除 FTP: mv ./includes ./includes.unused

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T06:22:50.937

将此文件放在您的 Magento 根文件夹中，即：`clear-cache.php`并通过终端执行它。

`php /home/magento/www/clear-cache.php`

这将清除所有缓存并重建所有索引。

修复了您在 Magento Enterprise 1.11.2 中描述的问题，当我无法加载任何页面或进入管理员并且删除`/var/cache`并没有解决问题时。

```
<?php
// Include Magento
require_once dirname(__FILE__).'/app/Mage.php';
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);
// Set user admin session
$userModel = Mage::getModel('admin/user');
$userModel->setUserId(0);
Mage::getSingleton('admin/session')->setUser($userModel);
// Call Magento clean cache action
Mage::app()->cleanCache();
// Enable all cache types
$enable = array();
foreach(Mage::helper('core')->getCacheTypes() as $type => $label){
    $enable[$type] = 1;
}
Mage::app()->saveUseCache($enable);
// Refresh cache's
echo 'Refreshing cache...';
try {
    Mage::getSingleton('catalog/url')->refreshRewrites();
    echo 'Catalog Rewrites was refreshed successfully';
} catch ( Exception $e ) {
    echo 'Error in Catalog Rewrites: '.$e->getMessage();
}
// This one caused an error for me - you can try enable it
/*try {
    Mage::getSingleton('catalog/index')->rebuild();
    echo 'Catalog Index was rebuilt successfully';
} catch ( Exception $e ) {
    echo 'Error in Catalog Index: '.$e->getMessage();
}*/
try {
    $flag = Mage::getModel('catalogindex/catalog_index_flag')->loadSelf();
    if ( $flag->getState() == Mage_CatalogIndex_Model_Catalog_Index_Flag::STATE_RUNNING ) {
        $kill = Mage::getModel('catalogindex/catalog_index_kill_flag')->loadSelf();
        $kill->setFlagData($flag->getFlagData())->save();
    }
    $flag->setState(Mage_CatalogIndex_Model_Catalog_Index_Flag::STATE_QUEUED)->save();
    Mage::getSingleton('catalogindex/indexer')->plainReindex();
    echo 'Layered Navigation Indices was refreshed successfully';
} catch ( Exception $e ) {
    echo 'Error in Layered Navigation Indices: '.$e->getMessage();
}
try {
    Mage::getModel('catalog/product_image')->clearCache();
    echo 'Image cache was cleared successfully';
} catch ( Exception $e ) {
    echo 'Error in Image cache: '.$e->getMessage();
}
try {
    Mage::getSingleton('catalogsearch/fulltext')->rebuildIndex();
    echo 'Search Index was rebuilded successfully';
} catch ( Exception $e ) {
    echo 'Error in Search Index: '.$e->getMessage();
}
try {
    Mage::getSingleton('cataloginventory/stock_status')->rebuild();
    echo 'CatalogInventory Stock Status was rebuilded successfully';
} catch ( Exception $e ) {
    echo 'Error in CatalogInventory Stock Status: '.$e->getMessage();
}
try {
    Mage::getResourceModel('catalog/category_flat')->rebuild();
    echo 'Flat Catalog Category was rebuilt successfully';
} catch ( Exception $e ) {
    echo 'Error in Flat Catalog Category: '.$e->getMessage();
}
try {
    Mage::getResourceModel('catalog/product_flat_indexer')->rebuild();
    echo 'Flat Catalog Product was rebuilt successfully';
} catch ( Exception $e ) {
    echo 'Error in Flat Catalog Product: '.$e->getMessage();
}
echo 'Cache cleared';
// Rebuild indexes
echo 'Rebuilding indexes';
for ($i = 1; $i <= 9; $i++) {
    $process = Mage::getModel('index/process')->load($i);
    try {
        $process->reindexAll();
    } catch ( Exception $e ) {
        echo 'Error rebuilding index '.$i.': '.$e->getMessage();
    }
}
echo 'Indexes rebuilt';
echo 'Finished!'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-18T12:35:02.627

把`index.php`这个直接放在后面`require_once $mageFilename;`

```
$app = Mage::app();
$cache = $app->getCache();
$cache->clean(); 
```

刷新损坏的网页，然后删除代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-29T14:13:13.697

我可以看到这是相当老的线程，但我今天遇到了类似的问题。我在 catalog_product_prepare_save 和 catalog_product_save_after 上有两个观察者，两者都是在一次 php 执行中触发的。

事实证明，我们使用 ProductObserver.php 文件（XXXX_Persona_Model_ProductObserver 类）中的方法作为侦听器。它在 Windows 和 Mac 上运行良好，但在生产（Linux）上出现类似消息失败。你猜对了——Linux 区分大小写。将文件名更正为 Productobserver.php（以及相应的类名）为我们解决了这个问题。

# php - Fancybox：导航按钮未显示，PHP 数组中的内容

> ID：10793899
> 
> 赞同：0
> 
> 时间：2012-05-29T06:09:57.213
> 
> 标签：php, arrays, button, fancybox

我对 Fancybox 2.0.6 上的图片库有一点问题。我没有显示导航按钮，只有关闭按钮。所以，我想当我在我的画廊脚本中添加插件时我犯了一个错误，所以它只能找到一个图像。问题不取决于使用的浏览器，我在 IE、Firefox、Safari、Chrome 和 Opera 上得到它。我的画廊脚本是用 PHP 编写的，就像我网站的所有其他部分一样。我的图像存储在一个数组中，由读取文件夹内容的函数创建。

这是我的脚本。

函数获取文件：

```
// Fonction de lecture du dossier et publication dans un tableau
function get_files($images_dir,$exts = array('jpg')) {
  $files = array();
  if($handle = opendir($images_dir)) {
    while(false !== ($file = readdir($handle))) {
      $extension = strtolower(get_file_extension($file));
      if($extension && in_array($extension,$exts)) {
        $files[] = $file;
      }
    }
    closedir($handle);
  }
  return $files;
} 
```

投资组合.php（画廊部分）

```
$image_files = get_files($images_dir);
    if(count($image_files)) {
        $index = 0;
        $firstimage = $image_files[0];
        $thumb = $images_dir.'/'.$firstimage; //Lien: files/photos/$images_dir/premièreimage.JPG
        $page .= '<script type="text/javascript">';
        $page .= '$(".img_gallery").click(function() {';
        $page .= '$.fancybox.open([';
        foreach($image_files as $index=>$file) {
            $index++;
            // echo $file.'<br />';
            //Création des liens image pour javascript
            $link = $images_dir.'/'.$file;
            $page .= "{ href : '".$link."', title : '".$altname."' } ],";
        }
        // Création des liens de la galerie et fermeture du dossier
        $page .= '});</script>';
        $page .= '<h3>Open Gallery</h3><br /><br />';
        $page .= '<a class="img_gallery" href="'.$thumb.'" rel="gallery"><img src="'.$thumb.'" height="342" width="512" alt="Open Gallery" title="Open Gallery"/></a> ';
    }
    else {
      $page .= '<p>There are no images in this gallery.</p>';
    } 
```

这是我添加插件的行：

```
<!-- Add jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>
<!-- Add fancyBox -->
<script type="text/javascript" src="fancybox/source/jquery.fancybox.pack.js"></script>
<!-- Add Button helper (this is optional) -->
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js"></script>
<!-- Add Thumbnail helper (this is optional) -->
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-thumbs.js"></script>
<!-- Add Media helper (this is optional) -->
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-media.js"></script>
<!-- Gallery Initiators -->
<script type="text/javascript">
    $(document).ready(function() {
        /*$("a[rel='gallery']").fancybox();*/
        $("a[rel='gallery']").fancybox(portfolio,{
            openEffect  : 'elastic',
            closeEffect : 'elastic',
            nextEffet: 'fade',
            prevEffect: 'fade'
        });
    });
</script> 
```

谁能解释我出了什么问题以及如何纠正这个问题？我在 PHP 方面有很好的技能，但我对 Javascript 还是很陌生。更多细节：我无法为每张图片创建每个链接，我有很多画廊（由 $_GET 值设置），有些包含数百张图片。最后，我希望只在页面上显示每个画廊的第一张图片作为画廊链接（手动调用）。

提前谢谢了 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:15:46.820

对于每个图像的导航按钮和链接：您需要在图像元素上有 id，以便 fancybox 自动检测图像数组，然后从第一张图像开始，最终将向您显示两侧的导航按钮。

要仅显示每个画廊的第一张图像，请使用 css 隐藏整个容器，并在您的 java 脚本中使用 window onload 函数仅显示父元素的第一个子元素（这将是您的图像的容器）。希望它确实有意义。

# iphone - UITabbarController 与 MoreNavigationController ， PoptoRootViewController 问题

> ID：10793905
> 
> 赞同：4
> 
> 时间：2012-05-29T06:10:29.830
> 
> 标签：iphone, ios, ipad, uitabbarcontroller

请帮我解决这个问题。

我在我的应用程序中使用 tabbarcontroller，

[tabBarController setViewControllers:tabs]; 选项卡包含视图控制器数组（6 个视图控制器）。

它会自动创建更多按钮。

**问题**

当我从更多按钮打开任何视图控制器，然后从索引 0 到 2 打开任何其他控制器，然后按更多按钮，它会保持上次打开的视图控制器。

例如：更多按钮 tableviewcontroller

屏幕 ：![在此处输入图像描述](../Images/389252a195b9675956a5ce3f3b51cb97.png)

**现在，当我按下联系人时，让我们说**

![在此处输入图像描述](../Images/ee731a1003f949be7ee3ae5b04ef14ec.png)

**现在，当用户按下任何其他选项卡栏时，例如功能选项卡栏**

![在此处输入图像描述](../Images/f90a151a21dec983a409302ceb115d03.png)

**现在，当用户返回更多选项卡时，它会显示联系人的视图控制器** ![在此处输入图像描述](../Images/9a9a9534b409a9b032dce0fe9252b919.png)

**但是我希望应用程序在用户再次返回更多选项卡时弹出rootviewcontroller，并且只是更多tableviewcontroller。**

![在此处输入图像描述](../Images/1c32c955c7d44cc1c38dffa5fb6309ec.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:36:16.720

您可以在 More 选项卡中视图控制器的 ViewWillDisappear 方法中执行此操作，调用该方法将视图从 MoreViewNavigationController 中弹出，如下所示：

```
- (void)viewWillDisappear:(BOOL)animated {
[super viewWillDisappear:animated];
[self.navigationController popViewControllerAnimated:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:08:54.947

可能为时已晚，但这里供将来参考

`UITabController`有一个`tabBar`属性，它有一个委托，它告诉你什么时候`tabitem`点击a

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item 
```

选项卡栏还有另一个属性“项目”，其中列出了可见选项卡。在委托方法实现中的项目中查找所选选项卡项的索引，如果索引为 4 哪个是更多按钮，则调用选项卡`[controller.moreNavigationController popToRootViewController]`

# asp.net - 如何允许已知的网络爬虫并阻止垃圾邮件发送者和有害机器人扫描 asp.net 网站

> ID：10793906
> 
> 赞同：6
> 
> 时间：2012-05-29T06:10:30.590
> 
> 标签：asp.net, web-crawler, block

如何配置我的网站以允许从谷歌、必应、雅虎、alexa 等知名机器人抓取并阻止其他有害垃圾邮件发送者、机器人

我应该阻止特定的IP吗？请讨论任何优点，缺点 在 web.config 或 IIS 中要做什么？

如果我有具有 root 访问权限的 vps，我可以在服务器范围内进行吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T19:05:01.937

我建议您查看我发布的类似问题的答案：[如何识别网络爬虫？](https://stackoverflow.com/questions/8404775/how-to-identify-web-crawler/8405803#8405803)

**Robots.txt**
robots.txt 对于有礼貌的机器人很有用，但垃圾邮件发送者通常不礼貌，因此他们倾向于忽略 robots.txt；如果您有 robots.txt，那就太好了，因为它可以帮助有礼貌的机器人。但是，请注意不要阻止错误的路径，因为它会阻止好的机器人抓取您真正希望它们抓取的内容。

**用户代理**
阻止用户代理也不是万无一失的，因为垃圾邮件发送者经常冒充浏览器和其他流行的用户代理（例如谷歌机器人）。事实上，欺骗用户代理是垃圾邮件发送者可以做的最简单的事情之一。

**机器人陷阱**
这可能是保护自己免受不礼貌且无法正确识别用户代理的机器人的最佳方法。至少有两种类型的陷阱：

*   robots.txt 陷阱（仅当机器人读取 robots.txt 时才有效）：在 robots.txt 中指定一个禁区目录，并设置您的服务器以阻止任何试图访问该目录的实体的 IP 地址。
*   在您的网页中创建“隐藏”链接，这些链接也会导致被禁止的目录，任何爬取这些链接并且不遵守您的 robots.txt 的机器人都会进入陷阱并阻止 IP。

隐藏链接是对人不可见的链接，例如没有文本的锚标记：`<a href="http://www.mysite.com/path/to/bot/trap"></a>`。或者，您可以在锚标记中包含文本，但您可以使字体非常小并更改文本颜色以匹配背景颜色，这样人们就看不到链接。隐藏链接陷阱可以捕获任何非人类机器人，所以我建议您将它与 robots.txt 陷阱结合起来，这样您就只会捕获坏机器人。

**验证机器人**
上述步骤可能会帮助您摆脱 99.9% 的垃圾邮件发送者，但可能会有少数恶意机器人冒充流行的机器人（例如 Googlebot）并遵守您的 robots.txt；这些漫游器会占用您为 Googlebot 分配的请求数量，并可能导致您暂时禁止 Google 抓取您的网站。在这种情况下，您还有一个选择，那就是验证机器人的身份。大多数主要的爬虫（你想被爬取）都有一种方法可以识别他们的机器人，这里是谷歌关于验证他们的机器人的建议：http: [//googlewebmastercentral.blogspot.com/2006/09/how-to -验证-googlebot.html](http://googlewebmastercentral.blogspot.com/2006/09/how-to-verify-googlebot.html)

Any bot that impersonates another major bot and fails verification can be blocked by IP. That should probably get you closer to preventing 99.99% of the bad bots from crawling your site.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:35:21.547

通过 IP 阻止可能很有用，但我使用的方法是通过用户代理阻止，这样您就可以使用您不想要的应用程序捕获许多不同的 IP，尤其是站点抓取器。我不会提供我们的清单，因为您需要专注于影响您的那些。对于我们的使用，我们已经确定了 130 多个不是网络浏览器和搜索引擎的应用程序，我们不想访问我们的网络。但是您可以从用户代理的网络搜索开始，以获取站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:21:40.330

最简单的方法是使用网站根目录中的 robots.txt 文件。

robots.txt 文件的语法如下：

```
User-agent: *
Disallow: / 
```

这实际上禁止所有遵守 robots.txt 约定的机器人从定义的页面。

不过要记住的是，*并非所有网络爬虫都遵守此约定*。

它可以非常有用地防止机器人疯狂地多次访问服务器，它也可以用于防止一些你希望根本不接触网站的机器人，但不幸的是它不是万能的。正如已经提到的，没有这样的动物，垃圾邮件是一个经常令人头疼的问题。

有关更多信息，请查看[http://www.robotstxt.org/](http://www.robotstxt.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-02T17:49:55.070

I like to use the .htaccess file, once you have a list of known bots add these lines to the bottom of your file.

RewriteCond %{HTTP_REFERER} ^http(s)?://([^.]+.)*suspectIP.*$ [NC,OR]

RewriteCond %{HTTP_REFERER} ^http(s)?://([^.]+.)*suspectURL.com.*$ [NC]

RewriteRule (.*) - [F]

# opengl-es - 找不到 gl.h 和 glext.h

> ID：10793910
> 
> 赞同：1
> 
> 时间：2012-05-29T06:10:42.167
> 
> 标签：opengl-es, android-ndk, java-native-interface

尝试通过 NDK 平台在 android 中执行基于 C++ 的程序时，编译给出错误，即找不到“gl.h”和“gext.h”头文件，因为我已将它们都包含在我的 C++ 代码中。M 使用 android-ndk-r8 并使用 Cygwin 编译它。

```
here s my code:   
**ANDROID.MK**

LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := NDK1
FILE_LIST := $(wildcard $(LOCAL_PATH)/*.cpp) 
LOCAL_SRC_FILES := $(FILE_LIST:$(LOCAL_PATH)/%=%) 

include $(BUILD_SHARED_LIBRARY)

---
**APPLICATION.MK**

APP_STL := stlport_static
APP_ABI := armeabi armeabi-v7a 
APP_PLATFORM := android-3

---
**Viewer.cpp**

#include <iostream>

#import "OpenGLES/ES2/gl.h"
#import "OpenGLES/ES2/glext.h"

//#import <GLKit/GLKEffects.h>
#import <GLKit/GLKMath.h>

#include "Viewer.h"

void Viewer::render() {
    glClearColor(0.65f, 0.65f, 0.65f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glBindVertexArrayOES( _vertexArray[0]);

    // Render the object with GLKit

    glDrawArrays(GL_TRIANGLES, 0, 36);

    /////////
    glBindVertexArrayOES(_vertexArray[1]);

    // Render the object with GLKit
    //[self.effect prepareToDraw];

    glDrawArrays(GL_TRIANGLES, 0, 36);
}

void Viewer::initialize() {
    sceneObj.constructDemoScene();

    glEnable( GL_DEPTH_TEST);

    ///////////////////////////////////
    glGenVertexArraysOES(1, &_vertexArray[0]);
    glBindVertexArrayOES( _vertexArray[0]);

    glGenBuffers(1, &_vertexBuffer[0]);
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer[0]);
    H3DModel * model = sceneObj.get3DModel(0);
    float * vertices = model->vertexBuffObj.getVertices();
    for (int c = 0; c < 216; c++)
        printf("%f\t", vertices[c]);
    glBufferData(GL_ARRAY_BUFFER, 216 * 4, vertices, GL_STATIC_DRAW);

    glEnableVertexAttribArray( EVertexAttribPosition);
    glVertexAttribPointer(EVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 24,
            (void*) offsetof(Vertex, position));
    glEnableVertexAttribArray( EVertexAttribNormal);
    glVertexAttribPointer(EVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 24,
            (void*) offsetof(Vertex, normal));

    ///////////////////////////////////

    glGenVertexArraysOES(2, &_vertexArray[1]);
    glBindVertexArrayOES(_vertexArray[1]);

    glGenBuffers(2, &_vertexBuffer[1]);
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer[1]);
    H3DModel * model1 = sceneObj.get3DModel(1);
    float * vertices1 = model1->vertexBuffObj.getVertices();
    for (int c = 0; c < 216; c++)
        printf("%f\t", vertices[c]);
    glBufferData(GL_ARRAY_BUFFER, 216 * 4, vertices1, GL_STATIC_DRAW);

    glEnableVertexAttribArray(EVertexAttribPosition);
    glVertexAttribPointer(EVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 24,
            (void*) offsetof(Vertex, position));
    glEnableVertexAttribArray(EVertexAttribNormal);
    glVertexAttribPointer(EVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 24,
            (void*) offsetof(Vertex, normal));

    glBindVertexArrayOES(0);
}

void Viewer::unInitialize() {
    glDeleteBuffers(1, &_vertexBuffer[0]);
    glDeleteBuffers(2, &_vertexBuffer[1]);
    glDeleteVertexArraysOES(1, &_vertexArray[0]);
    glDeleteVertexArraysOES(2, &_vertexArray[1]);

    if (_program) {
        glDeleteProgram( _program);
        _program = 0;
    }
}

GLKMatrix4 Viewer::update() {
    GLKMatrix4 baseModelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f,
            -4.0f);
    baseModelViewMatrix = GLKMatrix4Rotate(baseModelViewMatrix, _rotation,
            0.0f, 1.0f, 0.0f);

    // Compute the model view matrix for the object rendered with GLKit
    //GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, -1.5f);
    //modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, _rotation, 1.0f, 1.0f, 1.0f);
    //modelViewMatrix = GLKMatrix4Multiply(baseModelViewMatrix, modelViewMatrix);

    //self.effect.transform.modelviewMatrix = baseModelViewMatrix;

    /*// Compute the model view matrix for the object rendered with ES2
     modelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, 1.5f);
     modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, _rotation, 1.0f, 1.0f, 1.0f);
     modelViewMatrix = GLKMatrix4Multiply(baseModelViewMatrix, modelViewMatrix);

     _normalMatrix = GLKMatrix3InvertAndTranspose(GLKMatrix4GetMatrix3(modelViewMatrix), NULL);

     _modelViewProjectionMatrix = GLKMatrix4Multiply(projectionMatrix, modelViewMatrix);*/

    _rotation += 0.04f;
    return baseModelViewMatrix;
} 
```

在此先感谢..我想知道如何在 android ndk 中使用 OPENGL ES ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T11:51:44.900

不太确定，但我相信如果您查看 google ndk 提供的示例代码，它可能会有很大帮助。

示例代码位于

```
 android-ndk-r7b\samples\hello-gl2\jni\gl_code.cpp 
```

如果比较 Android.mk，你会发现你的

```
 LOCAL_LDLIBS    := -llog -lGLESv2 
```

不见了。Google 提供的 Android.mk 如下所示：

```
 LOCAL_PATH:= $(call my-dir)

    include $(CLEAR_VARS)

    LOCAL_MODULE    := libgl2jni
    LOCAL_CFLAGS    := -Werror
    LOCAL_SRC_FILES := gl_code.cpp
    LOCAL_LDLIBS    := -llog -lGLESv2

    include $(BUILD_SHARED_LIBRARY) 
```

而且，在 cpp 源代码中，android 正在使用：

```
 #include <GLES2/gl2.h>
    #include <GLES2/gl2ext.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:35:22.583

`#import`在 C/C++ 中没有这样的东西。你还需要提高`APP_PLATFORM`水平。OpenGL ES 1 仅在声明中可用`android-4`，OpenGL ES 2 可从`android-5`. 这一切都在文档中：`docs/STABLE-APIS.html`文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:27:59.313

我认为您正在尝试在 jni 目录中构建。在 Android 项目的根目录中再试一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-28T02:25:25.870

不知道这个问题是否仍然常见。我刚遇到这个问题并找到了一个解决方案。原来“jni”目录中需要文件“Application.mk”。

这是我的“Application.mk”：

```
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_ABI := armeabi armeabi-v7a
APP_PLATFORM := android-14 
```

我认为“APP_PLATFORM := android-14”通知 Android 使用 Opengl ES。事实上，“APP_PLATFORM := android-5”是 OpenGL 2.x 的最低要求。

# ios - 取消覆盖情节提要项目的 loadView

> ID：10793912
> 
> 赞同：2
> 
> 时间：2012-05-29T06:10:52.077
> 
> 标签：ios, overriding, storyboard, loadview

我的 iOS 5 项目使用故事板。我有一个视图，其视图控制器继承自一个类，而该类又继承自 UIViewController。此类属于为非故事板项目编写的框架，即它通过覆盖 loadView 来初始化视图。当我的视图控制器运行时，它接收到由超类设置的 self.view，从而使当前视图的 Interface Builder 设置无效。

虽然我确实有我正在使用的框架的源代码，并且理论上可以编辑它以删除 loadView 覆盖并将代码重新定位到 viewDidLoad 例如，但我想知道是否有更好的方法来做到这一点我自己的代码。基本上我需要取消我的[super loadView]，或者通过调用我的超类的超类（即UIViewController）的loadView 来绕过它。有什么办法可以做到这一点？

# c - 如何在 ONVIF 中对用户进行身份验证？

> ID：10793913
> 
> 赞同：8
> 
> 时间：2012-05-29T06:10:57.410
> 
> 标签：c, authentication, soap, onvif

我们有支持 ONVIF 协议的网络 IP 摄像机。当我尝试获取其 PTZ 配置时，它给出了 Auth 错误。我在 C 中实现这一点。以下是请求和响应。

要求：

```
"<?xml version=\"1.0\" encoding=\"UTF-8\"?>" 
  "<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"" 
  "xmlns:tds=\"http://www.onvif.org/ver20/ptz/wsdl\">" 
  "<soap:Body>"
  "<tds:GetNodes/>" 
  "</soap:Body>" 
  "</soap:Envelope>" 
```

回复：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope  xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" 
                xmlns:SOAP-ENC="http://www.w3.org/2003/05/soap-encoding"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
                xmlns:wsa5="http://www.w3.org/2005/08/addressing" 
                xmlns:c14n="http://www.w3.org/2001/10/xml-exc-c14n#" 
                xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
                xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
                xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
                xmlns:ptzimg2="http://www.onvif.org/ver10/schema" 
                xmlns:ptzimg3="http://www.w3.org/2005/05/xmlmime" 
                xmlns:ptzimg4="http://docs.oasis-open.org/wsn/b-2" 
                xmlns:ptzimg5="http://docs.oasis-open.org/wsrf/bf-2" 
                xmlns:ptzimg6="http://docs.oasis-open.org/wsn/t-1" 
                xmlns:ptzimg1="http://www.onvif.org/ver20/ptz/wsdl" 
                xmlns:ptzimg7="http://www.onvif.org/ver20/imaging/wsdl" 
                xmlns:ter="http://www.onvif.org/ver10/error">

<SOAP-ENV:Body>
    <SOAP-ENV:Fault>
        <SOAP-ENV:Code>
            <SOAP-ENV:Value>
                SOAP-ENV:Sender
            </SOAP-ENV:Value>
            <SOAP-ENV:Subcode>
                <SOAP-ENV:Value>
                    ter:NotAuthorized
                </SOAP-ENV:Value>
            </SOAP-ENV:Subcode>
        </SOAP-ENV:Code>
        <SOAP-ENV:Reason>
            <SOAP-ENV:Text xml:lang="en">
                Sender Not Authorized
            </SOAP-ENV:Text>
        </SOAP-ENV:Reason>
        <SOAP-ENV:Node>
            http://www.w3.org/2003/05/soap-envelope/node/ultimateReceiver
        </SOAP-ENV:Node>
        <SOAP-ENV:Role>
            http://www.w3.org/2003/05/soap-envelope/role/ultimateReceiver
        </SOAP-ENV:Role>
        <SOAP-ENV:Detail>
            The action requested requires authorization and the sender is not authorized
        </SOAP-ENV:Detail>
    </SOAP-ENV:Fault>
</SOAP-ENV:Body> 
```

如何验证用户身份？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T10:34:43.613

那些需要身份验证的命令。可以像这样添加它们的身份验证标头。

```
 snprintf(postData, sizeof(postData),
          "<?xml version=\"1.0\" encoding=\"utf-8\"?>" 
          "<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://www.w3.org/2003/05/soap-envelope\"" 
          "xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401"
          "-wss-wssecurity-secext-1.0.xsd\""  
          "xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-"
          "200401-wss-wssecurity-utility-1.0.xsd\""  
          "xmlns:tds=\"http://www.onvif.org/ver20/ptz/wsdl\">" 
          "<SOAP-ENV:Header><wsse:Security><wsse:UsernameToken>" 
          "<wsse:Username>%s</wsse:Username>" 
          "<wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-"
          "200401-wss-username-token-profile-1.0#PasswordDigest\">"
              "%s</wsse:Password><wsse:Nonce>%s</wsse:Nonce>" 
          "<wsu:Created>%s</wsu:Created></wsse:UsernameToken>"
          "</wsse:Security></SOAP-ENV:Header><SOAP-ENV:Body>" 
          "<tds:GetNodes>" 
          "</SOAP-ENV:Body></SOAP-ENV:Envelope>", 
          username, base64EncDigest, nonce_char, time_char); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T05:32:51.327

您可以使用带有 WSSE 插件的 gSoap 从 OnVif WDSL 生成您需要的 C++ 客户端代理。

这样做大大简化了我的工作。下面是调用 GetVideoEncoderConfiguration 并读取响应的示例。

```
_media__GetVideoEncoderConfigurations query;
_media__GetVideoEncoderConfigurationsResponse response;

soap_wsse_add_Security(&mediaProxy);
soap_wsse_add_UsernameTokenDigest(&mediaProxy, NULL, m_username.c_str(), m_password.c_str());

if(mediaProxy.GetVideoEncoderConfigurations(&query, &response) == SOAP_OK)
{
    LogSuccess("GetVideoEncoderConfigurations");
    for(auto it = response.Configurations.begin(); it != response.Configurations.end(); ++it)
    {
        onvif__VideoEncoderConfiguration* videoConf = *it;
        log(I3) << "Name= " << videoConf->Name << ", Encoding=" << videoConf->Encoding << ", Resolution=" << videoConf->Resolution->Width << "x" << videoConf->Resolution->Height;
    }
}
else
    LogError("GetVideoEncoderConfigurations", soap_faultdetail(&mediaProxy)); 
```

所以没有手动创建肥皂消息。gSOAP 生成的代码在较低层处理这些问题。当然，生成具有 wsse 支持的工作代码需要 mi 2 天，但手动执行它可能要快 10 倍。如果您对更多信息感兴趣，可以联系我。

# join - 如何为连接表创建 DAO？

> ID：10793915
> 
> 赞同：16
> 
> 时间：2012-05-29T06:11:11.130
> 
> 标签：join, dao

我目前正在学习`Dao`在我的项目中使用模式。我知道，一张表相当于一张`Dao`，对吗？就像`StudentDao`，`SubjectDao`。

每个人都在其关联的表中`Dao`执行`CRUD`操作，但我的问题是，我将如何`DAO`为连接表创建一个？假设我有一个查询来加入学生和主题表，那么我该如何创建一个`DAO`呢？

我应该把它放在`StudentDao`? 还是去`SubjectDao`？或者在这种情况下有一个好的做法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T11:50:36.170

`DAO - Data Access Object`那`Object`应该只与数据库通信。所以如果你想要`JOIN`两个表那么你必须在你的`DTO Object`StudentDTO上引用`SubjectDTO`。

```
public class StudentDTO {

   private String name;
   private String surname;
   private String age;
   private SubjectDTO subject;

  // getters, setters
} 
```

所以，主题DTO

```
public class SubjectDTO {

   private String name;
   private int room;

  // getters, setters
} 
```

`DAO`看起来像这样：

```
public StudentDAO {

   private final String SELECT_QUERY = "SELECT * FROM Student S JOIN Subject Sb ON (S.id = Sb.id)"

   public ArrayList<StudentDTO> getData() {

      ArrayList<StudentDTO> data = null;
      StudentDTO member = null;
      Connection con = null;
      PreparedStatement ps = null;
      ResultSet rs = null;

      try {
         con = OracleDAOFactory.getConnection();
         ps = con.prepareStatement(SELECT_QUERY);
         rs = ps.executeQuery();
         while (rs.next()) {
            member = new StudentDTO();
            member.setName(rs.getString(1));
            ...
            data.add(member);
         }
         return data;
      }
      catch (SQLException ex) {
         // body
      }
      finally {
         if (con != null) {
            con.close();
         }
      }
   }
} 
```

我建议您查看一些教程。

问候

# java - JColorChooser：在色板面板中保存/恢复最近的颜色

> ID：10793916
> 
> 赞同：4
> 
> 时间：2012-05-29T06:11:22.917
> 
> 标签：java, swing, mouselistener, jcolorchooser

我在应用程序的不同位置使用**JColorchooser**。可以有多个可以调用 JColorChooser 的面板实例。
选择器中的“色板”面板有一个**“最近的”颜色**区域，它只存在于 JColorChooser 的每个实例中。我想**（a）在我的应用程序中的所有选择器中使用相同的“最近”颜色**，并且**（b）将颜色保存到磁盘**，以便这些颜色在关闭和重新启动应用程序时仍然存在。
（至少（a）可以通过在整个应用程序中使用相同的单个选择器实例来解决，但这看起来很麻烦，因为我需要非常小心附加的更改监听器，

我没有找到任何可以让我在选择器面板中设置（恢复）这些“最近”颜色的方法。所以对我来说，实现这一目标的唯一方法似乎是：

*   序列化并保存/恢复整个选择器（选择器面板？）或
*   从头开始创建我自己的选择器面板

这是正确的，还是我错过了什么？

顺便说一句：我还想检测选择器中的双击，但似乎很难找到将鼠标侦听器附加到的正确位置。我真的需要深入研究选择器面板的内部结构来做到这一点吗？（不，检测第二次单击相同颜色时不起作用，因为更改侦听器仅在单击不同颜色时才会触发。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T10:07:29.543

正如您所注意到的，没有公共 api 可以访问 DefaultSwatchChooserPanel 中的最近颜色，即使面板本身也无法访问。

因为您需要一些逻辑/bean 来保存和重置最近的颜色（加上扩展的鼠标交互），所以滚动您自己的方式是要走的路。有关一些指导，请查看样本面板的实现（咳嗽...... c&p 你需要什么并修改你不需要的）。基本上，像

```
// a bean that keeps track of the colors
public static class ColorTracker extends AbstractBean {

    private List<Color> colors = new ArrayList<>();

    public void addColor(Color color) {
        List<Color> old = getColors();
        colors.add(0, color);
        firePropertyChange("colors", old, getColors());
    }

    public void setColors(List<Color> colors) {
        List<Color> old = getColors();
        this.colors = new ArrayList<>(colors);
        firePropertyChange("colors", old, getColors());
    }

    public List<Color> getColors() {
        return new ArrayList<>(colors);
    }
}

// a custom SwatchChooserPanel which takes and listens to the tracker changes
public class MySwatchChooserPanel ... {

   ColorTracker tracker;

   public void setColorTracker(....) {
       // uninstall old tracker 
       ....
       // install new tracker
       this.tracker = tracker;
       if (tracker != null) 
           tracker.addPropertyChangeListener(.... );
       updateRecentSwatchPanel()
   }

   /** 
    * A method updating the recent colors in the swatchPanel
    * This is called whenever necessary, specifically after building the panel,
    * on changes of the tracker, from the mouseListener
    */
   protected void updateRecentSwatchPanel() {
       if (recentSwatchPanel == null) return;
       recentSwatchPanel.setMostRecentColors(tracker != null ? tracker.getColors() : null);
   }

// the mouseListener which updates the tracker and triggers the doubleClickAction
// if available
class MainSwatchListener extends MouseAdapter implements Serializable {
    @Override
    public void mousePressed(MouseEvent e) {
        if (!isEnabled())
            return;
        if (e.getClickCount() == 2) {
            handleDoubleClick(e);
            return;
        }

        Color color = swatchPanel.getColorForLocation(e.getX(), e.getY());
        setSelectedColor(color);
        if (tracker != null) {
            tracker.addColor(color);
        } else {
            recentSwatchPanel.setMostRecentColor(color);
        }
    }

    /**
     * @param e
     */
    private void handleDoubleClick(MouseEvent e) {
        if (action != null) {
            action.actionPerformed(null);
        }
    }
}

} 

// client code can install the custom panel on a JFileChooser, passing in a tracker
private JColorChooser createChooser(ColorTracker tracker) {
    JColorChooser chooser = new JColorChooser();
    List<AbstractColorChooserPanel> choosers = 
            new ArrayList<>(Arrays.asList(chooser.getChooserPanels()));
    choosers.remove(0);
    MySwatchChooserPanel swatch = new MySwatchChooserPanel();
    swatch.setColorTracker(tracker);
    swatch.setAction(doubleClickAction);
    choosers.add(0, swatch);
    chooser.setChooserPanels(choosers.toArray(new AbstractColorChooserPanel[0]));
    return chooser;
} 
```

至于 doubleClick 处理：增强 swatchChooser 以执行操作并根据需要从 mouseListener 调用该操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-23T18:32:43.410

您可以使用该`JColorChooser.createDialog`方法 - 其中一个参数是 a `JColorChooser`。使用 的静态实例`JColorChooser`并使其成为`Dialog modal`- 这样，一次只显示一个颜色选择器。

该`createDialog`方法还将`ActionListeners`OK 和 Cancel 按钮作为参数。因此，实际上不必管理侦听器。当然，这不会在应用程序的调用中保留最近的颜色，只是在当前应用程序中保留最近的颜色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-22T03:34:15.077

这是使用反射的解决方法 - 只要底层实现不改变，它就会起作用。假设你有一个 JColorChooser，像这样添加你最近的颜色：

```
 final JColorChooser chooser = new JColorChooser(Color.white);

    for (AbstractColorChooserPanel p : chooser.getChooserPanels()) {

        if (p.getClass().getSimpleName().equals("DefaultSwatchChooserPanel")) {

            Field recentPanelField = p.getClass().getDeclaredField("recentSwatchPanel");
            recentPanelField.setAccessible(true);

            Object recentPanel = recentPanelField.get(p);

            Method recentColorMethod = recentPanel.getClass().getMethod("setMostRecentColor", Color.class);
            recentColorMethod.setAccessible(true);

            recentColorMethod.invoke(recentPanel, Color.BLACK);
            recentColorMethod.invoke(recentPanel, Color.RED);

            //add more colors as desired

            break;
        }

    } 
```

# struts2 - 关于struts 2拦截器和servlets过滤器的功能

> ID：10793917
> 
> 赞同：0
> 
> 时间：2012-05-29T06:11:24.190
> 
> 标签：struts2

我有一个疑问，因为我最近开始探索 struts 2，但是请告知在 struts 2 中我们有拦截器，在 servlet 中我们有过滤器，它们也执行相同的任务。那么在 struts 2 中需要什么拦截器，它们之间有什么区别两个都。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:34:43.063

您以其他方式采用了这个概念。Struts2 使用 Filter 来拦截向框架提供的每个请求。

过滤器”是 Servlet 规范的一部分；换句话说，它们是 Servlet API 的一部分。

`interceptors`是 Struts 2 框架的一部分，并且只是由 STruts 2 框架完成的请求处理的一部分。如果您使用的是 Struts 2，则应该使用拦截器来包装 Struts 2 操作周围的功能。

简而言之，拦截器是一组可重用的组件，可以在不同的地方使用。Struts2 创建了一组拦截器来处理每个 Action 请求的一些常见任务，如数据传输、数据转换、验证等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:42:01.490

我能想到的几个区别：

*   [过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)是 Java EE 的一部分，拦截器是 Struts 的一部分。
*   过滤器不能是特定于操作的，而是特定于 URL（有时可能意味着特定于操作），它们只能映射到 Servlet。
*   Filer 更适合部署者（尽管开发者也使用它们，但如果部署者有足够的知识，他们可以在部署期间更改），部署者可以选择配置要为哪个请求调用哪些过滤器，而拦截器是给开发者的，他们决定如何添加执行动作之前，之后的逻辑。
*   [方法过滤](http://struts.apache.org/2.1.6/docs/interceptors.html#Interceptors-MethodFiltering)在过滤器中不可用，但在拦截器中可用。
*   如果您没有通过 Struts 框架处理请求，则不能使用拦截器，例如您使用 Servlet 来处理特定请求。

编辑：移动评论作为答案的一部分：

拦截器作为一种模式并不特定于 Struts2，并且在 Spring、Hibernate 等中可用

# delphi - 如何在 Synapse 中获取客户端数量和连接/断开连接事件？

> ID：10793918
> 
> 赞同：3
> 
> 时间：2012-05-29T06:11:24.830
> 
> 标签：delphi, sockets, tcp, indy, synapse

我正在尝试使用 Synapse(TTCPBlockSocket) 而不是 Indy，但是通过官方帮助和演示我无法理解如何获取 TCP 客户端的数量，并且我没有找到有关 Synapse 的连接/断开连接事件，请给我一些提示或示例代码。提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:52:34.380

正如 TLama 在评论中指出的那样，每个传入的连接都应该触发 OnStatus 事件`HR_Accept`。如果我查看 TBlockSocket 源，每个断开连接，无论是通过协议还是错误，都应该触发一个 OnStatus 事件，并`HR_SocketClose`说明连接套接字上的原因。

# android - 在 Titanium 中的选项卡组上方创建标题栏

> ID：10793920
> 
> 赞同：2
> 
> 时间：2012-05-29T06:11:41.240
> 
> 标签：android, ios, tabs, titanium, titanium-mobile

我正在研究 Titanium 中的某些东西，并且在尝试实现这一目标时遇到了一些困难。

在 Android 版本上，`tabgroup`似乎固定在顶部。我对此很好，但我确实希望应用程序的徽标栏高于此。

我正在尝试实现类似于 Twitter 为其 Android 应用程序提供的功能。他们在`tabgroup`. [为了清楚起见，这是](http://androinica.com/wp-content/plugins/apps-android/screenshots/com.twitter.android-0.png)一个屏幕截图： ![在此处输入图像描述](../Images/fed61f3c8d20ad635f12db07684900f9.png)

这甚至可能吗？如果不能用 native 完成`tabGroups`，是否有一些我可以实施的解决方法？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T03:22:15.427

您不能使用 Titanium 中的 tabGroup 来做到这一点——它们在 Android 中没有导航栏。经过大量工作，您可以通过创建基本窗口、使用单击处理程序添加选项卡图形（视图）来创建自己的窗口，然后它们会打开带有 top: 属性的新窗口，该属性位于选项卡下方。祝你好运。

# html - 在 android 表 flash 对象上闪烁焦点

> ID：10793924
> 
> 赞同：1
> 
> 时间：2012-05-29T06:11:49.977
> 
> 标签：html, flash, browser, android

我的页面上有 Flash 对象。像这样的东西：

```
<html>
<head>
    <title>MyFlash</title>
</head>
<body onLoad="onLoadFunc()">

    <script type="text/javascript">
    function onLoadFunc(){
        //
    }
    </script>
    <div>
    <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="MyFlash" width="100%" height="100%"  
        allowScriptAccess="always" >
        <param name="movie" value="MyFlash.swf"/>
        <EMBED src="MyFlash.swf" style="WIDTH:620;HEIGHT:460" NAME="MyFlash" allowScriptAccess="always" />  
    </object >
    </div>
</body> 
```

当此页面显示在平板电脑浏览器（三星 Galaxy 选项卡和安卓市场中的所有浏览器）上时，flash 对象“闪烁”半秒钟，获得焦点。在台式计算机（win7，每个浏览器）上都不会发生。我尝试收听来自家庭“onTouch”的事件，但未能成功阻止这种闪烁。唯一的想法是在这个对象上设置focus onLoad，但如果对象失去焦点并将其取回，它不会阻止闪烁。谢谢你。

# winforms - C# - 工具提示如何工作？

> ID：10793926
> 
> 赞同：3
> 
> 时间：2012-05-29T06:12:05.990
> 
> 标签：winforms, button, text, tooltip

我想知道如何将一个 ToolTip 控件添加到表单中，并且所有按钮都有不同的文本？一个对象如何扩展所有其他对象，在每个对象上添加不同的东西？我不知道我是否清楚，如果我不明白，请告诉我！提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T06:29:23.883

我认为您正在寻找[Extender Providers](http://msdn.microsoft.com/en-us/library/ms171836)，您可以在其中为其他组件定义新属性。

这是 Visual Studio 设计器的一个功能。ToolTip 控件实际上并不向其他控件添加属性，但 Visual Studio 知道，当您拥有 ToolTip（或任何其他属于[Extender Provider](http://msdn.microsoft.com/en-us/library/ms171836)的组件）时，它应该向其他控件的属性网格中添加一些其他属性。所有这些信息都是从提供这些属性的组件（工具提示）中查询的。例如，当您为按钮设置工具提示时，Visual Studio 会调用[`SetToolTip`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.settooltip)ToolTip 控件的方法，以通知它控件的新值。

请参阅提供的链接以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:19:40.697

其实很简单。假设您有一个带有两个控件的窗口窗体，一个按钮和一个标签。现在将工具箱中的工具提示添加到名为 tooltip1 的表单中。现在右键单击按钮并转到属性，向下滚动直到在 tooltip1 上找到工具提示。将文本设置为您想要的任何内容。现在对标签做同样的事情。运行程序并将光标移到两个控件上。您将看到相应的工具提示。

# javascript - node.js 回调如何异步？

> ID：10793929
> 
> 赞同：1
> 
> 时间：2012-05-29T06:12:17.563
> 
> 标签：javascript, node.js

我最近开始使用 node.js。它引用了 node.js 异步行为可以以三种方式使用`events`，，，`stream`。`callback`

事件和流处理`emit,pipe`事件使其真正异步，但回调异步如何，因为它在函数返回之前**执行**，除非使用**process.nextTick()**。

事件：

```
event.on('data',function(data){

}); 
```

打回来：

```
function(data,cb){
 // do something with "data"
 cb();
 return;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:42:57.667

你是对的，回调不一定意味着异步 I/O。

事件也不一定是异步的，因为 EventEmitter 的 .emit 立即起作用，而不是在下一个滴答声：

```
var EventEmitter = require('events').EventEmitter;

var emitter = new EventEmitter();

emitter.on('ev', function(x) { 
    console.log("received event ", x);
});

console.log("Hello");
emitter.emit('ev', "X");
console.log("World"); 
```

结果：

```
Hello
received event  X
World 
```

*但是，可以*通过以下方式使回调“异步”：

*   使用 process.nextTick()。这不会使回调中的实际 I/O 操作异步。它只是将执行推迟到下一个刻度。如果某些操作阻塞，事件循环也会阻塞 - 在下一个滴答而不是这个滴答。

    ```
    function(data, cb) {
        process.nextTick(function() { doSomethingWith(data); cb(); })
    }); 
    ```

*   从已知由异步 I/O 操作触发的事件调用指定的回调函数

    ```
    function(data, cb) {
        emitter.startIO();
        emitter.on('someIOEvent', function(e) { 
            doSomethingWith(data,e); 
            cb(); 
        });
    }); 
    ```

*   使用另一个已知为异步的基于回调的函数。节点核心和节点模块中的大部分功能都是这样的。

    ```
    function(data, cb) {
        otherFunction(data, function(moredata) { 
            doMoreStuffWith(moredata, data); cb(); 
        });
    }); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:29:46.810

让我们仔细看看有回调的函数：

```
function(data, cb) {
 // do something with "data"
 cb();
 return;
} 
```

您在这里有两个大错误：

1）当你有回调函数时，你没有理由使用 return 。Return 仅在您具有立即发送响应的同步操作时使用（它们不必等待将来某个时间触发回调）。

2）您不立即执行回调，这没有任何意义。您要么不使用回调并使用 return 语句（当您实际上没有异步函数时），要么在将来的某个时间执行回调，当您获得结果时。

更好的例子：

```
function (data, cb) {
  // you make an Ajax call and 
  // you don't know when the callback will be triggered
  makeAjaxCall(data, cb);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:43:29.900

在这种情况下，带有回调的函数不会异步运行，但是仍然存在可以异步使用此类函数的情况：

```
function foo(data, callback) {
    // do something with the data
    callback();
}

function bar() {
    // this will be called as a callback from foo()
}

setInterval(function() { foo(data, bar) }, 1000);
console.log('this is displayed immediately'); 
```

您可以看到它`foo()`计划每秒运行一次，并且是异步发生的；然而，回调的存在允许您从函数外部设置额外的行为`foo()`，例如，您可能会设置几种`foo()`使用不同回调调用的情况，从而导致不同的应用程序逻辑。

# ajax - cakephp ajax 无法正常工作

> ID：10793930
> 
> 赞同：6
> 
> 时间：2012-05-29T06:12:21.257
> 
> 标签：ajax, cakephp, cakephp-1.3

我是 cakephp 新手，我想在我的主页上实现 Ajax。

我的页面中有三个模块（客户端、开发人员和项目）。我想添加一个ajax链接。它仅在索引页面中完美运行。

我的代码：

```
<h2>Projects</h2>
<div class="clear"></div>
<ul>
    <li title="Project List">
        <?php echo $ajax->link('Projects List', array("controller" => "projects", "action" => "index"), array( 'update' => 'main_page' ));?>
    </li><br />
    <li title="Add New Project">
        <?php echo $ajax->link('Add New Project', array("controller" => "projects", "action" => "add"), array( 'update' => 'main_page' ));?>    
    </li>
</ul> 
```

现在，我的第一个问题是在添加表单中，使用 js 的验证不起作用。

其次是：如果我使用 cakephp 内置验证，那么它会验证我的表单，但如果没有插入数据，则将页面重定向到“admin/projects/add”。

第三个问题是，当上述情况发生时，我想通过我的 ajax 链接重定向到列表页面，当时它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T12:20:54.120

最好的办法是停止使用 ajax 助手。它已被折旧，不会在 3.x 分支中可用。

这样做是因为一开始不是一个好主意，非常有限和错误。

使用 jQuery 之类的 ajax 并不是很困难，您应该考虑使用该工具或类似工具。

# c# - T-SQL 查询以使用可用日期填充下拉列表

> ID：10793949
> 
> 赞同：0
> 
> 时间：2012-05-29T06:14:22.253
> 
> 标签：c#, asp.net, sql-server

我的场景：我有一个网站，上面有活动日历和一个供访客预订访问的预订表格，让我们说一些花园 xyz。当在这个花园里举行活动时，游客不得参观花园。

活动日历由管理层维护，如果活动在 2012 年 6 月 16 日至 2012 年 6 月 20 日期间举行，并且对于此活动，他们将关闭花园，不接待任何访客。

在预订的另一边，我必须在下拉列表或一些弹出日历中显示访客的可用日期，这将阻止在活动日历中预订的日期。

**事件数据存储在 Event_Calender 表中，该表具有以下字段**

```
Event_ID
Event_Name
Event_Start_Date
Event_End_Date
Event_Start_Time
Event_End_Time
Event_Block_Visitor 
```

重要的是，任何一天只允许 50 名游客参观花园 **，游客数据存储在 Visitor_Booking Table 表结构中**

```
Booking_ID
Booking_Date
Visitor_Name
No_Of_Visitor
EMail_ID
Contact_No 
```

预订表格有一个下拉菜单，应显示可用日期 基于一个

1.  未在活动日历中预订或阻止的日期
2.  如果 6 月 28 日已经预订了 50 位访客，则 6 月 28 日不应出现在可用预订日期表中。

我的表结构有点复杂，然后在示例中显示。

如果有人能以最好的方式做到这一点，我将不胜感激。

我正在尝试通过`Booked_Dates`使用一个查询和其他查询生成我正在尝试从表`Event_Calender Table`中生成具有 50 个预订的预订日期。`Visitor_Booking`

这会给我所有预订的日期。现在我有了基于此被阻止的日期，我如何生成可供访问的日期。

**CTE 查询以从偶数日历生成预订日期**

**注意：查询结果的一个问题是与查询获取早于指定日期的结果相关的结果。这是由于运算符优先级**

![结果](../Images/e14e801b9e61e45bbe8cde28c88e6b01.png)

到目前为止的脚本：

```
;WITH Calendar
     AS (SELECT EventID,
                EventTitle,
                EventStartDate,
                EventEndDate,
                EventEnumDays,
                EventRecurring,
                EventStartTime,
                EventEndTime,
                EventStartDate AS PlannedDate,
                EventType,
                EventCategory
         FROM   EventCalender
         WHERE  EventActive = 1
                AND LanguageID = 1
                AND EventBlockDate = 1
         UNION ALL
         SELECT EventID,
                EventTitle,
                EventStartDate,
                EventEndDate,
                EventEnumDays,
                EventRecurring,
                EventStartTime,
                EventEndTime,
                Dateadd(dd, 1, PlannedDate),
                EventType,
                EventCategory
         FROM   Calendar
         WHERE  EventRecurring = 1
                AND Dateadd(dd, 1, PlannedDate) <= EventEndDate)
SELECT EventID,
       EventStartDate,
       EventEndDate,
       PlannedDate AS [EventDates],
       EventStartTime,
       EventEndTime,
       Cast(EventStartDate AS DATETIME) + '' + Cast(EventStartTime AS DATETIME) AS DT,
       EventTitle,
       EventType,
       EventCategory,
       Datename(weekday, PlannedDate) AS [WEEKDAY],
       Getdate() AS [YYYY/MM/DD]
FROM   Calendar
WHERE  PlannedDate >= Getdate()
       AND ',' + EventEnumDays + ',' LIKE '%,' + Cast(Datepart(dw, PlannedDate) AS CHAR(1)) + ',%'
        OR EventEnumDays IS NULL
ORDER  BY EventID,
          PlannedDate
OPTION (maxrecursion 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:05:51.933

1.  获取花园为活动预订的日期
2.  获取花园已达到完全访问容量的日期（==50）

3.  结合 1 和 2 个结果

4.  选择日历以显示/选择预订/访问日期
5.  在日历的加载/月份更改事件中，以某种方式禁用在步骤 3 中收到的日期

请参阅此示例代码：

```
 static List<DateTime> lstBookedDates;
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            lstBookedDates = new List<DateTime>();
            lstBookedDates.Add(DateTime.Today);
            lstBookedDates.Add(DateTime.Today.AddDays(2));
            lstBookedDates.Add(DateTime.Today.AddDays(-2));
            lstBookedDates.Add(DateTime.Today.AddMonths(1));
            lstBookedDates.Add(DateTime.Today.AddMonths(1).AddDays(2));
        }
    }

    protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
    {
        if (lstBookedDates.Where(a=> e.Day.Date.ToShortDateString().Equals(a.Date.ToShortDateString())).Count()>0)
        {
            foreach (Control c in e.Cell.Controls)
            {
                if (typeof(LiteralControl) == c.GetType())
                {

                    LiteralControl c1 = (LiteralControl)c;
                    c1.Text = "";
                }
            }
            e.Cell.BackColor = System.Drawing.Color.Gray;
            e.Cell.ToolTip = "Booking full";
            e.Cell.Enabled = false;

        }        
    } 
```

# rest - 多种条件的休息服务

> ID：10793951
> 
> 赞同：2
> 
> 时间：2012-05-29T06:14:32.287
> 
> 标签：rest, service, multiparameter

大家=）我是休息服务的新手，所以我不确定某些功能是否可行。例如，我有一个项目列表和许多在去杠杆到客户端应用程序之前过滤这些项目的方法。我正在使用返回格式的`.net`, `linq`& `wcf`rest 服务。`json`过滤列表的方法：

```
.../Items/RecentOnes
.../Items/FilteredByDate
.../Items/ItemsWithCrashID('CrashId')
.../Items/ItemsWithValue('Value') 
```

等等。我需要在一个查询中调用这些过滤器。喜欢

```
.../Items/ItemsWithValue('Value')/RecentOnes/FilteredByDate 
```

或者

```
.../Items/FilteredByDate/ItemsWithCrashID('CrashID')/Recent 
```

和其他 14 种可能的组合。（如您所见，过滤器的顺序无关紧要）

我的问题是 - 是否有可能以某种方式编写这 4 个服务，以使所有这些组合工作？

或者这样做的唯一方法是编写具有 4 个参数的单个服务，例如

```
.../Items?recentOnes=true&FIlteredByDate=false&CrashID=&Value=somevalue ? 
```

提前感谢=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:04:14.653

好问题！由于 restful web 服务使用 url 作为资源表示，例如：

```
.../items          =>             get all items
.../items/1        =>             get an item which id == 1
.../items/1/edit   =>             edit an item which id == 1
.../items?value='computer' =>     get all items which value == 'computer' 
```

所以你可以看到你的网址：

```
 .../Items/ItemsWithValue('Value')... 
```

它根本不代表任何特定资源。您似乎正在寻找一些按值过滤的项目。这就像一个搜索。所以你的第二个选择更好，使用任何你想要过滤的东西作为查询字符串。

# drupal-7 - 将注释字段添加到自定义 drupal 7 模块

> ID：10793968
> 
> 赞同：1
> 
> 时间：2012-05-29T06:15:42.223
> 
> 标签：drupal-7, drupal-modules

我正在开发一个动态生成页面的自定义 drupal 模块。您可以将此与日历进行比较。但是，我花了很多时间来寻找允许向该内容添加评论的解决方案。

我认为评论模块的设计可能是一个问题，因为它似乎依赖于节点 ID。是否可以添加一个简单的前缀以避免与节点发生冲突？

我找到了评论挂钩，但无法添加评论表单。你能给我一个解决方案吗？

# java - Java "Given final block not properly padded" Exception in Tomcat5.5 Server

> ID：10793970
> 
> 赞同：2
> 
> 时间：2012-05-29T06:16:12.137
> 
> 标签：java, tomcat, encryption

I'm having problem with decoding an encrypted text.
When the encrypted message is received, Java would sometimes throw an exception below.

```
javax.crypto.BadPaddingException: Given final block not properly padded
    at com.sun.crypto.provider.SunJCE_h.b(DashoA12275)
    at com.sun.crypto.provider.SunJCE_h.b(DashoA12275)
    at com.sun.crypto.provider.SunJCE_af.b(DashoA12275)
    at com.sun.crypto.provider.PBEWithMD5AndDESCipher.engineDoFinal(DashoA12275)
    at javax.crypto.Cipher.doFinal(DashoA12275)
    at com.inv.my.encrypt.StringEncrypter.decrypt(StringEncrypter.java:206)
    at com.inv.my.encrypt.EncryptDecryptMachine.decrypt(EncryptDecryptMachine.java:56)
    at com.inv.my.servlet.transfer.hq.RequestStockQty.doPost(RequestStockQty.java:47)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:244)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:276)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:162)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:262)
    at org.apache.catalina.core.ApplicationFilterChain.access$0(ApplicationFilterChain.java:192)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:171)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:167)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Thread.java:595) 
```

* * *

My server setup is...

1.  Ubuntu 8.04 LTS
2.  Java 5
3.  Tomcat5.5

Weirdly enough the problem is intermittent. After restarting the server, it would go away but would come back later again which I would restart my tomcat again just to temporarily fix it.

Thanks!

* * *

Edit-Add Code:

The code I use is from...

[http://www.idevelopment.info/data/Programming/java/security/java_cryptography_extension/StringEncrypter.java](http://www.idevelopment.info/data/Programming/java/security/java_cryptography_extension/StringEncrypter.java)

and modified it a bit, below is my actual code. I removed the comments to make it shorter.

Thanks!

```
public class StringEncrypter {
Cipher ecipher;
Cipher dcipher;

public StringEncrypter(SecretKey key, String algorithm) {
    try {
        ecipher = Cipher.getInstance(algorithm);
        dcipher = Cipher.getInstance(algorithm);
        ecipher.init(Cipher.ENCRYPT_MODE, key);
        dcipher.init(Cipher.DECRYPT_MODE, key);
    } catch (NoSuchPaddingException e) {
        System.out.println("EXCEPTION: NoSuchPaddingException");
    } catch (NoSuchAlgorithmException e) {
        System.out.println("EXCEPTION: NoSuchAlgorithmException");
    } catch (InvalidKeyException e) {
        System.out.println("EXCEPTION: InvalidKeyException");
    }
}

public StringEncrypter(String passPhrase) {

    setPassPhrase( passPhrase );

}

public void setPassPhrase( String passPhrase ) {

    // 8-bytes Salt
    byte[] salt = {
        (byte)0xA9, (byte)0x9B, (byte)0xC8, (byte)0x32,
        (byte)0x56, (byte)0x34, (byte)0xE3, (byte)0x03
    };

    // Iteration count
    int iterationCount = 19;

    try {

        KeySpec keySpec = new PBEKeySpec(passPhrase.toCharArray(), salt, iterationCount);
        SecretKey key = SecretKeyFactory.getInstance("PBEWithMD5AndDES").generateSecret(keySpec);

        ecipher = Cipher.getInstance(key.getAlgorithm());
        dcipher = Cipher.getInstance(key.getAlgorithm());

        // Prepare the parameters to the cipthers
        AlgorithmParameterSpec paramSpec = new PBEParameterSpec(salt, iterationCount);

        ecipher.init(Cipher.ENCRYPT_MODE, key, paramSpec);
        dcipher.init(Cipher.DECRYPT_MODE, key, paramSpec);

    } catch (InvalidAlgorithmParameterException e) {
        System.out.println("EXCEPTION: InvalidAlgorithmParameterException");
    } catch (InvalidKeySpecException e) {
        System.out.println("EXCEPTION: InvalidKeySpecException");
    } catch (NoSuchPaddingException e) {
        System.out.println("EXCEPTION: NoSuchPaddingException");
    } catch (NoSuchAlgorithmException e) {
        System.out.println("EXCEPTION: NoSuchAlgorithmException");
    } catch (InvalidKeyException e) {
        System.out.println("EXCEPTION: InvalidKeyException");
    }
}

public String encrypt(String str) {
    try {
        // Encode the string into bytes using utf-8
        byte[] utf8 = str.getBytes("UTF8");

        // Encrypt
        byte[] enc = ecipher.doFinal(utf8);

        // Encode bytes to base64 to get a string
        return new sun.misc.BASE64Encoder().encode(enc);

    } catch (BadPaddingException e) {
        e.printStackTrace();
    } catch (IllegalBlockSizeException e) {
        e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return null;
}

public String decrypt(String str) {

    try {

        // Decode base64 to get bytes
        byte[] dec = new sun.misc.BASE64Decoder().decodeBuffer(str);
        System.out.println( "[decrypt]BASE64Decoded????? " + dec );
        System.out.println( "[decrypt]Algo: " + dcipher.getAlgorithm() );
        System.out.println( "[decrypt]Block Size: " + dcipher.getBlockSize() );
        System.out.println( "[decrypt]Parameters: " + dcipher.getParameters().getEncoded() );

        // Decrypt
        byte[] utf8 = dcipher.doFinal(dec);

        // Decode using utf-8
        return new String(utf8, "UTF8");

    } catch (BadPaddingException e) {
        e.printStackTrace();
    } catch (IllegalBlockSizeException e) {
        e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return null;
} 
```

}

* * *

Edit-Added Debugging Log

```
Encrypted: HS/uG4F/TZEN/lzX4xGvEQ==
[decrypt]BASE64Decoded????? [B@18df65f
[decrypt]Algo: PBEWithMD5AndDES
[decrypt]Block Size: 8
[decrypt]Parameters: [B@1139ac8 
```

* * *

Better Logging Data

```
Encrypted: HS/uG4F/TZEN/lzX4xGvEQ==
[decrypt]BASE64Decoded????? [B@11b7a20
[decrypt]BASE64Decoded String??? 1D 2F EE 1B 81 7F 4D 91 0D FE 5C D7 E3 11 AF 11 
[decrypt]BASE64Decoded Length: 16
[decrypt]Algo: PBEWithMD5AndDES
[decrypt]Block Size: 8
[decrypt]Parameters: 30 0D 04 08 A9 9B C8 32 56 34 E3 03 02 01 13 
[decrypt]After decryption:68 71 53 69 64 5F 37 36 39 
Decrypted: hqSid_769 
```

* * *

Added more logging after synchronizing function

```
Request data: hqSid_3443
[encrypt] String??? 68 71 53 69 64 5F 33 34 34 33
[encrypt] Encrypted??? C7 02 03 2D BD F9 A6 6A 93 C0 40 48 2E 5F 2B E5
[encrypt]Encrypted ï¿½-ï¿½ï¿½jï¿½ï¿½@H._+ï¿½
[encrypt]Encrypted Length 16
[encrypt]Algo: PBEWithMD5AndDES
[encrypt]Block Size: 8
[encrypt]Parameters: [B@f5cbda 
```

* * *

received

```
Encrypted: xwIDLb35pmqTwEBILl8r5Q==
[decrypt]BASE64Decoded????? [B@13cd5ba
[decrypt]BASE64Decoded String??? C7 02 03 2D BD F9 A6 6A 93 C0 40 48 2E 5F 2B E5
[decrypt]BASE64Decoded Length: 16
[decrypt]Algo: PBEWithMD5AndDES
[decrypt]Block Size: 8
[decrypt]dcipher.Parameters().getEncoded(): 30 0D 04 08 A9 9B C8 32 56 34 E3 03 02 01 13
javax.crypto.BadPaddingException: Given final block not properly padded... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:03:48.230

This code is definitely not threadsafe, and it appears to be the problem. You will need to use a different Cipher object for each thread.

# jquery - 将网页设置为只读？

> ID：10793972
> 
> 赞同：2
> 
> 时间：2012-05-29T06:16:14.450
> 
> 标签：jquery, html, css, asp.net-mvc, readonly

我有一个包含大量输入的网页，并且想将它们全部设置为只读，或者禁用 = false，因为我有**Datepickers**并且希望它们被禁用。

我认为最好的方法是通过样式表来做到这一点，但我几乎没有 CSS Stlesheets 的经验。

如果那里有任何选项，我正在使用 JQuery，否则我可以使用的 CSS 中是否有一些 html 或一些样式？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T06:19:28.123

如果要将网页上的所有**输入字段**`readonly`设置为，可以使用以下命令：

```
$(':input').attr('readonly','readonly'); 
```

要**禁用**，您可以使用：

```
$(':input').attr('disabled','disabled') 
```

希望这可以帮助 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T06:20:49.227

将页面中的所有输入设为只读：

```
$(':input').prop('readonly',true); 
```

为了禁用：

```
$(':input').prop('disabled',true); 
```

希望这可以帮助。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T06:45:04.620

如果您想将网页上的所有输入类型 = 文本字段设置为禁用

```
$(":input[type=text]").attr("disabled", true); 
```

如果你想禁用特定的 3 文本框

```
$("#date1,#date2,#date2").attr("disabled", true); 
```

如果您想将网页上的所有输入类型 = 文本字段设置为只读

```
$(":input[type=text]").attr("readonly", true); 
```

如果你想只读特定的 3 文本框

```
$("#date1,#date2,#date2").attr("readonly", true); 
```

# android - ANDROID：多分辨率

> ID：10793973
> 
> 赞同：3
> 
> 时间：2012-05-29T06:16:17.513
> 
> 标签：android, android-layout

我正在开发一个支持多种分辨率的应用程序。我已经通过[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)但找不到解决方案。

决议是：

1) 320x480 (三星 Galaxy ACE)

2) 480x800 (三星 Nexus S)

3) 600x1024（三星 Galaxy Tab 7 英寸）

如何对 Layout 和 Drawable 的文件夹名称进行分类？

目前我正在使用： -

对于 320x480：layout-mdpi、drawable-mdpi

对于 480x800：layout-hdpi、drawable-hdpi

对于 600x1024：layout-large，drawable-large

只有 320x480 分辨率工作正常。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:24:49.617

而是使用*xhdpi、hdpi、mdpi、sdpi*尝试使用*small、normal、large、xlarge。*

每个设备都有自己的密度，有时大型设备的密度较小，反之亦然，所以只需尝试使用 drawble(outside category)、drawble-small、drawble-normal、drawble-large 和 layout(outside category)、layout-small，布局正常，布局大。

# linux - Windows 7 客户端和 Linux 服务器之间同步的最佳程序

> ID：10793974
> 
> 赞同：0
> 
> 时间：2012-05-29T06:16:23.410
> 
> 标签：linux, eclipse, virtualbox

我在 Windows 7 客户端上工作和开发 PHP/MySQL。使用 xampp，它易于使用和测试。但由于在我的实际项目中，我需要一些仅限 linux 的功能，我想在虚拟机（Ubuntu 服务器）中测试我的代码。

现在我正在寻找一种让我的源代码在客户端和服务器上保持同步的好方法。

我知道，我可以在 linux 客户端上通过 SFTP 工作，但对我来说，这不是理想的方式。

我正在使用 Eclipse 和 Git。

保持两个文件系统同步的任何想法？

也许是 samba，但存在权限问题...... Windows 的 Rsync？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:24:33.103

1) Samba 内置于大多数 Linux 发行版中。它是标准的、可靠的并且易于使用。

它了解您的目录结构，保留文件名和日期戳，并且可以使用 Windows 资源管理器或您选择的 Linux 文件管理器 GUI（例如 Nautilus）在环境之间拖放文件

不去爱的种种？

2）这里有一些链接：

*   [https://superuser.com/questions/258026/using-samba-to-share-a-folder-from-a-linux-guest-with-a-windows-host-in-virtualb](https://superuser.com/questions/258026/using-samba-to-share-a-folder-from-a-linux-guest-with-a-windows-host-in-virtualb)

*   [http://opensuse.swerdna.org/susesambawin7.html](http://opensuse.swerdna.org/susesambawin7.html)

*   [http://www.youtube.com/watch?v=BSg-_3OFlrQ](http://www.youtube.com/watch?v=BSg-_3OFlrQ)

3) 如果您感兴趣的只是保持源代码和版本控制同步，那么 GIT 应该绰绰有余。

4) 你可以使用像 TortoiseGit 这样的 Windows 客户端（或者，更简单，只使用 Eclipse！）：

[https://tortoisegit.org/](https://tortoisegit.org/)

5）您可能还希望考虑使用 GitHub：

[http://nathanj.github.com/gitguide/tour.html](http://nathanj.github.com/gitguide/tour.html)

'希望有帮助。

PS：如果你使用VBox，共享文件夹也是一个选项，对吗？

# c# - 使用 Castle.Windsor 和约定使用基类和接口注册组件

> ID：10793975
> 
> 赞同：1
> 
> 时间：2012-05-29T06:16:26.793
> 
> 标签：c#, castle-windsor, fluent

我的解决方案中有一些组件可以根据用户的不同状态在我的系统中处理重定向。这些组件基于抽象类型 RedirectAction 并且正在完成这项工作。

我在系统中有另一个接口，用于监视服务和功能是否正常工作/活动。称为 IStatusCheck。

```
 container.Register(
            AllTypes.FromThisAssembly()
                .BasedOn<IStatusCheck>()
                .WithServiceBase()
                .LifestyleTransient());

        container.Register(
            AllTypes.FromThisAssembly()
                .BasedOn<RedirectAction>()
                .WithServiceBase()
                .LifestyleTransient()); 
```

在我让 RedirectAction 实现 IStatusCheck 以启用对它们的监视之前，这很有效。而且我不知道如何注册才能在两者中检索组件。

```
ResolveAll<RedirectAction>()
ResolveAll<IStatusCheck>() 
```

请帮帮我。

编辑：

更完整的例子

```
class Program
{
    static void Main(string[] args)
    {
        var container = new WindsorContainer();

        container.Register(
            AllTypes.FromThisAssembly()
                .BasedOn<IGenericInterface>()
                .WithServiceBase()
                .AllowMultipleMatches());

        Debug.Assert(container.ResolveAll<IGenericInterface>().Count() == 2, "Could not find all IGenericInterface types");

        container.Register(
            AllTypes.FromThisAssembly()
                .BasedOn<SpecificAbstractBase>()
                .WithServices(typeof(SpecificAbstractBase))
                .AllowMultipleMatches());

        var specific = container.ResolveAll<IGenericInterface>().First() as SpecificAbstractBase;

        Debug.Assert(specific != null, "Instance was not of expected type");
        Debug.Assert(container.ResolveAll<IGenericInterface>().Count() == 2, "Could not find all IGenericInterface types");
        Debug.Assert(container.ResolveAll<SpecificAbstractBase>().Count() == 2, "Could not find all SpecificAbstractBase types");
    }
}

public interface IGenericInterface
{
    bool ImAlive { get; }
}

public abstract class SpecificAbstractBase : IGenericInterface
{
    public abstract void DoTheJob();

    public bool ImAlive
    {
        get { return true; }
    }
}

public class SpecificOne : SpecificAbstractBase
{
    public override void DoTheJob() { }
}

public class SpecificTwo : SpecificAbstractBase
{
    public override void DoTheJob() { }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:08:06.840

用于`.AllowMultipleMatches()`允许将类型用于多个组件。

# svn - svn status 不显示删除

> ID：10793976
> 
> 赞同：1
> 
> 时间：2012-05-29T06:16:29.163
> 
> 标签：svn

今天遇到了一个很奇怪的问题，我做了一个svn从branch到trunk的合并，merging的输出如下，可以看到，文件'sncpStateInd.cfg'被merging删除了，但是svn状态没有显示它，有谁能帮我检查一下吗？谢谢

```
--- Merging r30994 through r31381 into 'aaa/bbb/ccc/ddd/ccp10_scripts/cfg':

U     aaa/bbb/ccc/ddd/ccp10_scripts/cfg/testSuiteODU.cfg

A     aaa/bbb/ccc/ddd/ccp10_scripts/cfg/lib/telink_metric.cfg

A     aaa/bbb/ccc/ddd/ccp10_scripts/cfg/lib/telink_srlg.cfg

D   aaa/bbb/ccc/ddd/ccp10_scripts/cfg/lib/sncpStateInd.cfg

[xuzhijun@test aaa/bbb/ccc/ddd/ccp10_scripts/cfg/lib]$ svn st
 M      .
A  +    telink_metric.cfg
A  +    telink_srlg.cfg
[xuzhijun@test aaa/bbb/ccc/ddd/ccp10_scripts/cfg/lib]$ svn pl- v 
```

# gwt2 - GWT 如何指定提交按钮的名称？

> ID：10793978
> 
> 赞同：0
> 
> 时间：2012-05-29T06:16:51.240
> 
> 标签：gwt2, submit-button

我已将我的 Spring 应用程序与 GWT 集成。我的应用程序有一个登录页面，其中包含 2 个提交按钮 (1) 登录和 (2) 注册/注册。

现在我已经成功在登录页面中添加了这两个按钮。

但是我如何指定它们的名称，以便我可以在控制器中区分提交了哪个按钮并相应地重定向我的流程。

如何在 GWT 中设置提交按钮的名称？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:21:48.443

如果您可以编辑页面上的 html 代码，您可以简单地使用 if/else 条件和语句。即使对于使用基本 html 的页面，您仍然可以通过使用 javaScript 编写按钮代码来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:14:50.320

终于得到了解决方案

```
DOM.setElementAttribute(buttonElement,"name","register"); 
```

# java - mysql准备好的语句时间戳中的错误？

> ID：10793982
> 
> 赞同：1
> 
> 时间：2012-05-29T06:17:12.473
> 
> 标签：java, mysql, prepared-statement

我正在使用 mysql 开发基本的 ddl 语句，但我创建了数据类型为时间戳的表，并收到错误作为时间戳的无效语句。我的代码是：

```
ps.setTimestamp(4, m_datetime); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T06:37:33.497

```
ps.setTimestamp(4, m_datetime); 
```

确保它`m_datetime`具有正确的`timestamp`格式并且它的数据类型是`java.sql.Timestamp`

# entity-framework - EF Code First - Identity & Computed 列

> ID：10793986
> 
> 赞同：2
> 
> 时间：2012-05-29T06:17:30.727
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我创建了一个名为“项目”的实体。它有一个 Id、CreateDate 和 ModifyDate 以及一些必需的数据。

我正在使用 EF 4.3 Code First 模型。如果它解决了我的问题，我可以使用最新版本的 EF。

所有这三个值都是可选的。有时，我可能会传递一些值，比如 Id 或 CreateDate。如果我不通过，我希望 EF 从 DB 自动生成这些值，否则取我通过的值。

到目前为止，我发现，如果我将 Id 列设置为 Identity 列，那么它会忽略提供的值，计算列也是如此。

无论如何我可以选择提供这些价值吗？

还有一件事，我修改了日期字段。每当我更新记录时，我希望数据库更新当前日期时间。我找到了以下选项，但不知何故，我对其中任何一个都不满意。DB是否有任何直接选项（类似于默认值）？

1.  使用 Update 触发器更新 modifydate
2.  在 C# 端设置 modifydate 值

我的实体：

```
public class Item
{  
    public Guid? ItemId { get; set; }

    public string SomeData { get; set; }

    public DateTime CreateDate { get; set; }

    public DateTime? ModifyDate { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:43:00.017

> 所有这三个值都是可选的。有时，我可能会传递一些值，比如 Id 或 CreateDate。如果我不通过，我希望 EF 从 DB 自动生成这些值，否则取我通过的值。

这在 EF 中是不可能的。EF 仅支持两种机制：

*   价值始终由应用程序提供
*   值始终由数据库使用标识或计算设置提供

原因是数据库处理默认值的方式。仅当 INSERT 命令未显式设置列但 EF 始终显式设置所有列时才使用它们（即使您没有设置值，因为使用了默认的 .NET 值），但标有标识或计算设置的列除外。

因此，您的方案需要第三种机制：

*   如果默认值不存在或包含 .NET 默认值，则使用触发器设置默认值

问题是，如果不将属性标记为计算属性或身份属性，您将无法自动取回这些值。如果您插入新记录或更新现有记录，您的实体实例仍将包含旧值（或默认 .NET 值），除非您强制对数据库进行新查询以刷新当前实体。这就是存在身份和计算设置的原因——在插入或更新期间自动取回这些值。

当您使用 EF 时，所有这些更改都应该在您的应用程序中进行，而不是通过触发器在数据库中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:10:29.000

*   您可以在 的构造函数中设置默认值`Item`。
*   对于修改日期，我总是使用数据库触发器，因为您不想依赖不同机器上的时钟。

# jsp - 我可以在我的模型（表单）中写一些代码吗？？我想更改日期格式，同时在我的 jsp 页面上填充日期值

> ID：10793988
> 
> 赞同：0
> 
> 时间：2012-05-29T06:17:41.883
> 
> 标签：jsp, jakarta-ee, spring-mvc, model

我正在使用 Spring MVC 和休眠编写简单的 CRUD（创建、删除、更新、删除）应用程序。

在创建中，我可以添加 MM/dd/yyyy 格式的成员资格开始日期。

在更新中，我希望在我的 jsp 中显示（填充）相同的数据。我的问题是在更新时我的日期输入字段以 yyyy-MM-dd 格式显示日期。我找到了解决方案在获取值时（在我的模型的 getter 方法中），我编写了一个小代码，如下所示：

```
public Date getDateOfIncorporation() {
        Date date=null;
        try {
            Date abc = this.dateOfIncorporation;
            if (abc != null) {
                DateFormat df = new SimpleDateFormat("MM/dd/yyyy");
                String formattedDate = df.format(abc);
                date= df.parse(formattedDate);              
            }

        } catch (ParseException e) {
            e.printStackTrace();
        }
        return date;
    } 
```

但**我对我的方法感到困惑**。这是正确的方法还是我**在表单（模型）中编写此代码时**犯了任何错误。？？？

因为我想保持良好的编码标准，所以我需要你的建议。这是可以接受的，如果任何高级审查我的代码...？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:28:52.697

实际上它应该在视图中完成（即你的jsp）看看JSTL格式的taglib：

```
<%@ taglib uri="http://java.sun.com/jstl/fmt" prefix="fmt"%> 
```

尤其是它的模式属性（例如`pattern="MM/dd/yyyy"`）

```
<fmt:formatDate value="${yourDate}" pattern="MM/dd/yyyy" /> 
```

# iphone - 一次禁用根视图交互并启用子视图交互

> ID：10793989
> 
> 赞同：0
> 
> 时间：2012-05-29T06:17:48.263
> 
> 标签：iphone, ios, ios4

我正在开发一个应用程序。我使用了一个视图并向其中添加了一个子视图。我的问题是当单击根视图中的按钮时，我添加了一个子视图（tableview）。当我在表视图中选择任何行时。然后从超级视图中删除视图。当我将子视图添加到根视图时。我想禁用根视图交互而不影响子视图交互。有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:28:19.887

在根视图的顶部放置一个透明或半透明的覆盖视图（Alpha = 0 到 0.5 由你决定），它的 frame = rootView.frame ，然后将你的表格视图放入这个覆盖视图中，不能传递任何触摸事件，呵呵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:31:19.993

的值`userInteractionEnabled`会影响它设置的视图的所有子视图，所以不，不是你想的那样。如果您希望禁用视图的触摸事件，请将其子类化并覆盖`- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event`以将其触摸转发到另一个视图。

# php - 我需要遍历来自网站源的信息并将其放入 php 中的表中

> ID：10793994
> 
> 赞同：-2
> 
> 时间：2012-05-29T06:18:05.150
> 
> 标签：php

您好，我试图从网站上提取一些信息以将其放入表格中，然后在 php 中打印

我正在使用 DOM 解析器，因为它看起来正是我需要的

```
 <?php

 include 'simple_html_dom.php';

 $html = file_get_html('http://evolve.sg-community.de/index.php?page=plugins');
 $table = $html->find('#theTable');

 $theData = array();

 foreach($table->find('tr') as $row) {
    $rowData = array();
    foreach($row->find('td.text') as $cell) {
       $rowData[] = $cell->innertext;
    }
    $theData[] = $rowData;
 }
 print_r($theData);
 ?> 
```

我不断得到

```
 Fatal error: Call to a member function find() on a non-object 
```

在

```
 foreach($table->find('tr') as $row) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:30:35.530

您可以使用 phpQuery 来解析该页面并获取您想要的内容

[查询](http://code.google.com/p/phpquery/wiki/Basics)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:26:41.817

您可以使用 DOM 解析器，请参阅[http://docs.php.net/manual/en/domdocument.loadhtml.php](http://docs.php.net/manual/en/domdocument.loadhtml.php)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T06:28:22.290

您是在问如何 1）抓取网站或 2）如何剥离数据。

1）看： http: [//php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

# c# - 更新数据集时更新缓存

> ID：10793997
> 
> 赞同：2
> 
> 时间：2012-05-29T06:18:17.500
> 
> 标签：c#, asp.net, caching

我有一个数据集，存储所有大陆及其各自国家。我正在缓存数据表：

```
DataSet dset = new DataSet();
string cacheKey = "CoverageDataTable";
object cacheItem = Cache[cacheKey] as DataTable;
if (cacheItem == null)
{
    dset = (DataSet)_obj.GetAllContinent();
    cacheItem = dset.Tables[0];
    Cache.Insert(cacheKey, cacheItem, null, System.Web.Caching.Cache.NoAbsoluteExpiration, TimeSpan.FromHours(5), CacheItemPriority.High, null);
 } 
```

现在我想如果数据表有任何变化，应该从数据库中获取新数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:42:46.763

根据您的 SQL 数据库版本，您可以使用 SqlCacheDependency。

在您的 web.config 中非常简短

```
<caching>
        <sqlCacheDependency pollTime="10000" enabled="true" >
            <databases>
                <add connectionStringName="ConnectionString" name="Coverage"/>
            </databases>
        </sqlCacheDependency>
    </caching> 
```

然后在代码中

```
private void BindData()
{
    // if null then fetch from the database
    if (Cache["CoverageDataTable"] == null)
    {
        // Create the cache dependency
        SqlCacheDependency dep = new SqlCacheDependency("Coverage", CoverageDataTable");
        string connectionString = ConfigurationManager.ConnectionStrings[
                                        "ConnectionString"].ConnectionString;
        SqlConnection myConnection = new SqlConnection(connectionString);
        SqlDataAdapter ad = new SqlDataAdapter("SELECT ColA, ColB, ColC " +
                                               "FROM CoverageDataTable", myConnection);
        DataSet ds = new DataSet();
        ad.Fill(ds);

        // put in the cache object
        Cache.Insert("CoverageDataTable", ds, dep);
    }

    gvCoverageDataTable.DataSource = Cache["CoverageDataTable"] as DataSet;
    gvCoverageDataTable.DataBind();
} 
```

一些背景可以在这里找到：[在 ASP.NET 中使用 SqlCacheDependency 类进行缓存](http://msdn.microsoft.com/en-us/library/ms178604.aspx)