# StackOverflow 问答 10136000-10136999

# sql-server-2005 - 处理大量数据的Sql server问题

> ID：10136000
> 
> 赞同：-1
> 
> 时间：2012-04-13T06:03:23.163
> 
> 标签：sql-server-2005, ssis

我有这样的要求，我需要删除过去 800 天内未进行交易的所有客户

我有一个表**客户，其中 customerID 是主键** **信用卡表有列 customerID、CreditcardID，其中信用卡是主键** **交易表有列 transactiondatetime、CreditcardID、CreditcardTransactionID 这里是此表中的主键。**

所有的交易表数据都在名为 CreditcardTransaction 的视图中，所以我使用该视图来获取信息

我已经编写了一个查询来获取在过去 800 天内完成交易的信用卡并获取他们的 CreditcardID 并将其存储在表中，因为**CreditcardTransaction 视图中的数据量约为 60 百万数据**我所写的查询失败并记录了消息日志文件已满并引发消息系统内存不足异常。

```
INSERT INTO Tempcard  
       SELECT CreditcardID,transactiondatetime 
       FROM  CreditcardTransaction WHERE   
       DATEDIFF(DAY ,CreditcardTransaction.transactiondatetime ,getdate())>600 
```

因为我需要在他们最后一次 Transactiondatetime 时获取 CreditcardID

需要在 Excel 表格中显示他们的数据，所以我将数据转储到表格中，然后将它们插入 Excel。

**我在这里展示的最佳解决方案是什么**

**我正在使用 SSIS 包（与 2008 R2 相比），我将 SP 转储数据调用到表中，然后执行少量业务逻辑，最后将数据插入到 Excel 表中。**

谢谢王子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:52:10.683

一个想法：在 Where 子句中使用函数可以大大减慢速度。考虑添加一个名为 IdleTransactionDays 的列。这将允许您在 Select 子句中使用 DateDiff 函数。稍后，您可以查询 Tempcard 表以返回 IdleTransactionDays 大于 600 的记录 - 类似于以下内容：

声明@DMinus600 datetime = INSERT INTO Tempcard (CreditcardID,transactiondatetime,IdleTransactionDays) SELECT CreditcardID,transactiondatetime, DATEDIFF(DAY ,CreditcardTransaction.transactiondatetime ,getdate()) FROM CreditcardTransaction

Select * From Tempcard Where IdleTransactionDays>600

希望这会有所帮助，安迪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:52:45.557

目前，您正在逐行插入这些记录。您可以创建一个 SSIS 包，该包使用 OLEDB 源组件读取您的数据，执行必要的操作并将它们（最少记录的操作）*批量插入到您的目标表中。*

您也可以直接将行输出到 Excel 文件中。将行写入中间表会降低性能。

如果您的源查询仍然超时，请检查是否存在任何索引并且它们是否过于碎片化。

您还可以按年份对源数据进行分区（基于事务日期时间）。这样，数据将被突发加载。

# wpf - 来自转换器的 WPF Xaml 图像

> ID：10136007
> 
> 赞同：0
> 
> 时间：2012-04-13T06:04:14.227
> 
> 标签：wpf, image, xaml, data-binding, uri

我无法将图像绑定到转换器的源？

```
<!-- Works fine -->
<Image Grid.Row="0" Grid.Column="4" Grid.RowSpan="6" Margin="5">     
      <Image.Source>
          C:\pictures\Becker.png
      </Image.Source>
</Image>

<!-- Works not -->
<Image Source="{Binding ClientPicture, Converter={StaticResource clientpictureconv}, ConverterParameter={Binding ClientNumber}}"/> 
```

在转换器中，我返回硬编码图片 Uri（从顶部）。如果我用文本块替换图像，则会显示完整的 uri。但图片中的图片不是。

我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:10:47.727

那是因为 Image.Source 不带`URI`对象；它需要一个`ImageSource`对象。您的转换器应该创建其中之一并将其传回。把它放在你的转换器中，它会工作：

```
return new BitmapImage(myUri); 
```

请注意，这`BitmapImage`是一种`ImageSource`.

您的第一个示例有效，因为 XAML 为您隐式地将 URI 字符串转换为 ImageSource。当您使用转换器显式传回 URI 对象时，它无法做到这一点。

# java - 如何在使它们成为隐藏字段的同时传递和检索值对象？

> ID：10136009
> 
> 赞同：0
> 
> 时间：2012-04-13T06:04:30.653
> 
> 标签：java, web-applications, servlets

[这个问题是在使用所有请求参数将请求从一个 jsp 转发到另一个 jsp](https://stackoverflow.com/questions/10121877/forwarding-the-request-from-one-jsp-to-another-jsp-with-all-request-parameters)的延续？. 为方便用户，将对此场景和新查询进行说明。

我有这种情况。用户在浏览器中的 jsp 表单上输入一些内容并提交。在 servlet 中，我处理请求并将 jsp page1 显示给只有继续按钮的客户端。现在单击继续，我想将此请求转发到另一个 jsp page2，所有请求参数都出现在 page1 上。基本上我也想获取第 2 页第一个请求中存在的所有请求参数。根据回复，我可以选择我同意的隐藏变量。现在这个问题。

**编辑**

**如果我有请求中的客户信息对象，如何将其作为隐藏字段提交。我将在第二个 jsp 中将客户对象作为字符串获取。正确的？有没有办法我可以将它作为请求中的客户对象而不是字符串对象？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-16T05:13:35.493

将其存储在 Session 范围内，并在第一次调用 servlet 时检索您想要取回的位置，只需将其放入 session 中，然后在第三个 jsp 中从 session 中获取它

# ios - 如何判断我的协议中的哪个方法没有实现？

> ID：10136014
> 
> 赞同：0
> 
> 时间：2012-04-13T06:05:14.890
> 
> 标签：ios, xcode

我正在 Cocoa 中开发一个 iPhone 应用程序。

我在 XCode 中看到“协议中的方法未实现”的警告。我的协议有 50 种方法。

XCode 有没有办法有效地告诉我哪些方法是/未实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:10:24.133

`Command+4`打开 Issue navigator，sort `By Type`，点击前面的箭头`Incomplete implementation`，你会发现缺少的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:13:30.610

除了问题导航器角度（+1 @fannheyward），选择器在构建记录中由名称标识。

# c - 从 C 中的另一个程序执行一个程序

> ID：10136015
> 
> 赞同：1
> 
> 时间：2012-04-13T06:05:15.233
> 
> 标签：c, windows, codeblocks

我正在尝试从另一个程序启动一个程序。

这是下面的代码
图：1

```
#include<stdio.h>
#include<stdlib.h>
#include<conio.h>
#include<string.h>
int main()
{
    printf("Before Execution \n");
    system("c:\\Rasmi Personal\\PERSONAL\\C\\Code Block\\C_Test\\bin\\Debug\\C_Test.exe");
    printf("\nAfter Execution \n");
    return 0;
} 
```

在 c:\Rasmi Personal\PERSONAL\C\Code Block\C_Test\bin\Debug\C_Test 项目中包含的代码是

图 2：

```
#include <stdio.h>
int main()
{
     int x = 10;
     while( x --> 0 ) // x goes to 0
     {
        printf("%d\n", x);
     } return 0;
} 
```

但是在执行第一个程序（图 1）时，输出如下所示。

```
Before Execution
'c:\Rasmi' is not recognized as an internal or external command,
operable program or batch file.

After Execution 
```

请帮我解决这个问题。

PS:- 我在 Windows XP 中使用 CODE::BLOCKS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:09:15.370

您正在使用带有空格的路径名。当您这样做时，一切都会变得更加混乱，并且您必须在正确的位置为正确的事物添加引号才能使任何事情发挥作用。

我建议使用不带空格的路径名。

如果您仍想尝试在路径名中使用空格，则可以使用以下方法：

```
system("\"c:\\Rasmi Personal\\PERSONAL\\C\\Code Block\\C_Test\\bin\\Debug\\C_Test.exe\""); 
```

# lucene - lucene 连接查询

> ID：10136017
> 
> 赞同：1
> 
> 时间：2012-04-13T06:05:16.720
> 
> 标签：lucene

有没有办法在不直接使用查询 API 的情况下在 lucene 中发出连接查询（http://www.searchworkings.org/blog/-/blogs/query-time-joining-in-lucene）？是否可以针对此要求以文本形式发出查询？例如：

```
title:derivatives  join(comments:great) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:00:38.220

Apache Solr（4.0，尚未发布）有一个可以处理连接查询的[查询解析器。](http://wiki.apache.org/solr/Join)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:30:15.343

如果我理解你的问题，我想你想要一个像“title:derivatives AND comments:great”这样的查询。或者，您可以使用类似“queryParser.setDefaultOperator(QueryParser.Operator.AND)”的代码将默认连接运算符更改为 AND 而不是 OR（除非您告诉 Lucene，否则默认使用“OR”）。

# sitecore - 如何在 sitecore 中以编程方式更改“MediaLinkPrefix”？

> ID：10136020
> 
> 赞同：1
> 
> 时间：2012-04-13T06:05:29.903
> 
> 标签：sitecore, sitecore6, sitecore-media-library

我知道“MediaLinkPrefix”可以在 web.config 中更改。但是是否可以以编程方式更改“MediaLinkPrefix”？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:29:12.077

回答您的具体问题。不可以。您不能以编程方式更改该设置的值。

如果您尝试使用`Sitecore.Resources.Media.MediaManager.GetMediaUrl(mediaItem)`获取 a 的 URL，`MediaItem`那么它正在利用，它从类`Sitecore.Resources.Media.MediaProvider`中提取 的值。该属性没有“设置器”。此外，该属性的值实际上来自，它也没有设置器，而是直接从配置文件中提取的。`MediaLinkPrefix``Sitecore.Resources.Media.MediaConfig``Sitecore.Configuration.Settings.Media.MediaLinkPrefix`

这`MediaManager`是一个静态类，我相信它不能用自定义实现换掉。而且，与 不同的是`LinkManager`，它`MediaManager`是硬编码来使用的，`Sitecore.Resources.Media.MediaProvider`因此您也不能编写自定义提供程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:59:17.170

您可以通过创建您自己的实现`Sitecore.Links.LinkProvider`并在您的 web.config`<linkManager>`部分下进行设置来做到这一点。

我不知道确切的实现，但您可以继承一个类`Sitecore.Links.LinkProvider`，然后覆盖 GetItemUrl() 方法。然后将您的类配置为用作 LinkManager。

# java - java：使用 POST 将文件上传到 HTTP 服务器，服务器代码问题？

> ID：10136023
> 
> 赞同：1
> 
> 时间：2012-04-13T06:05:51.527
> 
> 标签：java, http, post, file-transfer

我是 java 新手，我必须将文件从 Android 应用程序传输到服务器。我从链接中获得了帮助

[使用 POST 将文件上传到 HTTP 服务器。安卓 SDK](http://reecon.wordpress.com/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/)

```
<?php
$target_path  = "./";
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
 echo "The file ".  basename( $_FILES['uploadedfile']['name']).
 " has been uploaded";
} else{
 echo "There was an error uploading the file, please try again!";
}
?> 
```

它的 PHP 代码工作得很好，但我必须用 Java 而不是 PHP 实现服务器端代码。

我用谷歌搜索并从链接中找到代码[在此处输入链接描述](http://www.jguru.com/faq/view.jsp?EID=62798)

```
InputStream in = request.getInputStream();
        BufferedReader r = new BufferedReader(new InputStreamReader(in));
        StringBuffer buf = new StringBuffer();
        String line;
        while ((line = r.readLine())!=null) {
        buf.append(line);
        }
        String s = buf.toString(); 
```

我是java新手，所以不知道如何编写这段代码。我安装了 NetBeans **netbeans-7.1.1-ml-javaee**。

有人可以告诉我这段代码是否正确以及如何将其放入文件或哪种类型的文件中。我已经创建了项目，但不知道如何将此代码放入文件中。

**编辑：**

Andriod 代码工作正常......我想开发服务器代码来获取和保存文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T06:18:14.950

我希望这段代码可以帮助你

```
try {
         HttpClient client = new DefaultHttpClient();
     HttpPost post = new HttpPost(Image_url);
     MultipartEntity mpEntity = new MultipartEntity();
     File file = new File(selectedImagePath);
     ContentBody cbFile = new FileBody(file, "image/jpeg");         
     mpEntity.addPart("photo", cbFile);
     mpEntity.addPart("user_id", new StringBody(SmallyTaxiTabbar.unique_ID));
     mpEntity.addPart("password", new StringBody(SmallyTaxiTabbar.password));
     post.setEntity(mpEntity);
     HttpResponse response1 = client.execute(post);
     HttpEntity resEntity = response1.getEntity();
     String Response=EntityUtils.toString(resEntity);
     Log.d("PICTUREServer Response", Response);
     JSONArray jsonarray = new JSONArray("["+Response+"]");
     JSONObject jsonobject = jsonarray.getJSONObject(0);
     alert=(jsonobject.getString("alert"));
     client.getConnectionManager().shutdown();
    } 
     catch (Exception e) {
                Log.e("TAGPost", e.toString());     
    } 
```

其中 SmallyTaxiTabbar.unique_ID，密码为参数值

**我希望这段代码可以帮助你！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:57:00.623

检查这个库是否对你有帮助。我已经为几种 http 方法创建了包装器..

[https://github.com/nareshsvs/android-libraries](https://github.com/nareshsvs/android-libraries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:32:05.023

[Apache Commons FileUpload](http://commons.apache.org/fileupload/using.html)库应该可以帮助您`POST`从服务器的角度处理 Java 中的请求内容。如果需要，它可以与 Servlet 集成。

特别是，它将`multipart/form-data`为您处理内容（如果您`InputStream`直接逐行阅读请求，则必须手动执行此操作）。

# php - 复选框值操作

> ID：10136027
> 
> 赞同：0
> 
> 时间：2012-04-13T06:06:21.060
> 
> 标签：php, mysql, html

下面是我的带有值的静态复选框。

我需要的是当用户检查任何复选框然后单击提交时我需要在 php 中进一步检查检查 kboxes 值我想将它们放在 mysql 查询中，如下所示

```
select * from table where "all check boxes values" 
```

我在 mysql 中的搜索将基于所有检查的值

```
echo "<table border='0'>";
echo "<p>Make a Selection to view details</p>";
echo "<tr><th>Scheme Type</th><th>Scehme Sector</th><th>Area</th><th>Year</th></tr>";
echo "<tr><td><input type='checkbox' name='chkSkills' value='ADP' /> District ADP <br/>";
echo "<input type='checkbox' name='chkSkills' value='cmd'/> CM Directives <br/>";
echo "<input type='checkbox' name='chkSkills' value='tkpp'/> Tameer KPK Program <br/>";
echo "<input type='checkbox' name='chkSkills' value='tbcess' /> Tobacco Cess</td>";
echo "<td><input type='checkbox' name='chkSkills' value='wss' /> Water Supply & Sanitation <br/>";
echo "<input type='checkbox' name='chkSkills' value='road'/> Roads <br/>";
    echo "<input type='checkbox' name='chkSkills' value='ccb'/> CCB <br/>";
echo "<input type='checkbox' name='chkSkills' value='health'/> Health <br/>";
echo "<input type='checkbox' name='chkSkills' value='education'/> Education <br/>";
echo "<input type='checkbox' name='chkSkills' value='others' /> Others</td>";
echo "<td><input type='checkbox' name='chkSkills' value='pk77'/> PK-77 <br/>";
echo "<input type='checkbox' name='chkSkills' value='pk78'/> PK-78 <br/>";
echo "<input type='checkbox' name='chkSkills' value='pk79' /> PK-79 </td>";
echo "<td><input type='checkbox' name='chkSkills' value='1112'/> 2011-12 <br/>";
echo "<input type='checkbox' name='chkSkills' value='1011'/> 2010-11 </td></tr>";
echo  "<tr><td colspan='4' align='right' style='background-color:white;'><input type='submit' name='devsub' value='Submit' /></td></tr>";
echo "</table>"; 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:09:22.700

更改`name = chkSkills[]`每个复选框并通过检索`$_POST['chkSkills']`

不仅仅是这样做

```
foreach($_POST['chkSkills'] as $key => $value){
MYSQL_QUERY
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:18:31.047

使用名称 chkSkills[] 然后

在php中使用

```
if(count($_POST['chkSkills']) > 0)
{
     $checkboxes=implode(',',$_POST['chkSkills']);
} 
```

然后进行查询

select * from table where cloumnname in($checkboxes)

# java - android 上的开发人员 ROOT 访问有哪些优势？

> ID：10136031
> 
> 赞同：0
> 
> 时间：2012-04-13T06:06:55.310
> 
> 标签：java, android

我使用android平台大约1-2年，有些应用需要root访问权限。当我创建 android 应用程序时，什么给了我这个 ROOT 访问权限？明确地说，

`if (haveRootAccess) doSomethingSpecial()`

可以是`doSomethingSpecial()`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:13:39.803

**需要在具有超级用户**权限的命令行上执行操作的应用程序需要 Root 访问权限。就像在 linux 系统上使用终端命令*sudo*一样。

```
//for example
Process suPro = Runtime.getRuntime().exec("su"); 
```

有关更多信息，请阅读[此](http://muzikant-android.blogspot.se/2011/02/how-to-get-root-access-and-execute.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T06:21:53.160

您可以访问`/data/data/`设备的文件夹，这有助于获取设备中安装的每个应用程序的数据，并且可以对其进行操作。

您可以`su` `ping` `ftp`使用命令终端运行等命令。

可以添加额外的 commandfile`/system/bin`文件夹。

# c# - 构造函数中值的初始化

> ID：10136034
> 
> 赞同：0
> 
> 时间：2012-04-13T06:07:03.380
> 
> 标签：c#, oop

你能告诉我..以下构造函数初始化之间的区别..

这里的人是一个类..我正在尝试初始化一些值......并且我创建了三个名为

“姓名、年龄、CanCode”

并调用其中之一..

```
//Without Static

public Class Person
{

   Person[] people = {
             new Person { Name="Allen Frances", Age=11, CanCode=false },
             new Person { Name="Burke Madison", Age=50, CanCode=true }
   }

   // with Static...    
   /*
   static   Person[] people =
   {
             new Person { Name="Allen Frances", Age=11, CanCode=false },
             new Person { Name="Burke Madison", Age=50, CanCode=true }
   }
   */
   ........... 
} 
```

当我尝试初始化没有`static`关键字的类构造函数时..它显示“堆栈溢出异常”。

当我调试代码时，在为 Person 类创建对象后，初始化发生的时间更长，我不知道为什么？

我所知道的是，如果您使用`static`关键字那些我们在创建对象之前初始化构造函数数据......但是在这里，当我们尝试在创建对象后初始化数据时，它会显示这种行为......

你能告诉我为什么吗...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:13:13.753

你得到一个堆栈溢出，因为你在一个名为 Person 的类的定义中，并且你试图在其中创建同一个类的更多对象。当这些 Person 对象被创建时，它们也会尝试创建更多的 Person 对象，依此类推。

这个递归定义破坏了堆栈，因为它是无限的并且永远不会结束。

尝试定义这个代码块：

```
Person[] people = {
                 new Person { Name="Allen Frances", Age=11, CanCode=false },
                  new Person { Name="Burke Madison", Age=50, CanCode=true }
                    } 
```

在代码的不同部分，也许是主要方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:32:15.263

尝试

```
Person[] people = new Person[2] {
                 new Person { Name="Allen Frances", Age=11, CanCode=false },
                  new Person { Name="Burke Madison", Age=50, CanCode=true }
                    }; 
```

# android - 锁屏有时不显示android

> ID：10136042
> 
> 赞同：1
> 
> 时间：2012-04-13T06:07:41.120
> 
> 标签：android

我创建了锁屏应用程序。有时它给我一个问题。问题是有的时候默认锁屏显示而不是我的锁屏有的时候直接主屏显示。我不知道问题出在哪里。请给我建议。

LockScreenActivity：使用

```
KeyguardManager keyguardManager = (KeyguardManager) getSystemService(Activity.KEYGUARD_SERVICE); 
KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE); 
lock.disableKeyguard(); 
```

并创建 ScreenReceiver：

```
ACTION_SCREEN_OFF
ACTION_SCREEN_ON
ACTION_BOOT_COMPLETED 
```

请参阅此链接：[http ://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)

在清单文件中：声明服务和接收者以及权限

问题出在 BroadcastReceiver 时

```
if (recievedIntent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
    //call activity
}else if (recievedIntent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
} 
```

但是屏幕上的活动调用..所以缺少什么或有什么问题..为什么会发生这种情况，请回复。

嗨，这是我的代码：

```
public class myReceiver extends BroadcastReceiver {
    public static boolean wasScreenOn = true;

    @Override
    public void onReceive(final Context context, Intent recievedIntent) {

        if (recievedIntent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            wasScreenOn = false;

            Intent intent = new Intent(context,
                    myActivity.class);
            intent.setAction(Intent.ACTION_MAIN);
            intent.setFlags(Intent.FLAG_ACTIVITY_NO_USER_ACTION);
            intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
            intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            intent.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
                    context.startActivity(intent
                    .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK));

        } else if (recievedIntent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            wasScreenOn = true;
        }
    }
} 
```

当 action screen on 是 call 时，activity 正在调用。

# sql - 使用来自 linq 对象列表的 LINQ 编写 SQL 查询

> ID：10136048
> 
> 赞同：2
> 
> 时间：2012-04-13T06:08:01.067
> 
> 标签：sql, linq, linq-to-sql

我有一个 linq 对象，我想使用 linq 编写查询。

请帮我。

输入：

```
var tags = (from row in tempChildData.AsEnumerable()
                                join tagOrder in tupleInfoDataset.Tables["TagHierarchy"].AsEnumerable() on row.Field<Int64>("TAGID") equals tagOrder.Field<Int64>("TAGID")
                                join tagName in tupleInfoDataset.Tables["SequenceChoiceList"].AsEnumerable() on tagOrder.Field<Int64>("PARENTTAGID") equals tagName.Field<Int64>("TAGID")
                                join facet in tupleInfoDataset.Tables["FacetType"].AsEnumerable() on tagName.Field<string>("Tag_Name") equals facet.Field<string>("Facetname")
                                join tagIdInfo in schDataTogetTagid.AsEnumerable() on row.Field<string>("refTagName").Contains(":") ? row.Field<string>("refTagName").Split(':').Last():row.Field<string>("refTagName") equals tagIdInfo.Field<string>("TAGNAME")
                               where ( childList.Contains(row.Field<Int64>("TAGID")) && facet.Field<string>("FacetType").ToLower().Equals("ctype"))
                               select new
                               {
                                   Tagid = row.Field<Int64>("TAGID"),
                                   TagIdToInsert=tagIdInfo.Field<Int64>("TAGID"),
                                   MaxOccur = row.Field<string>("Maxoccurs"),
                                   MinOccur =Convert.ToInt32(Convert.ToString(row.Field<string>("Minoccur"))),
                                   ParentTagId=tagOrder.Field<Int64>("PARENTTAGID"),
                                   Order=tagOrder.Field<Int64>("TAG_ORDER"),
                                   ParentTagname = tagName.Field<string>("Tag_Name"),
                                   FacetId=facet.Field<Int64>("FacetID")
                               }).ToList();

                    var parentTagID = (from tagIdInfo in tupleInfoDataset.Tables["Tuple"].AsEnumerable()
                                      where tagIdInfo.Field<Int64>("TAGID").Equals(key.Key)
                                      select tagIdInfo.Field<Int64>("ConceptID")).ToList();
                    long parentID =Convert.ToInt64(parentTagID[0]); 
```

现在我想从上面的代码中查询为：

```
INSERT INTO TUPLE_MAP (TagId,ParentTagId,ParentTagname,MinOccur,MaxOccur,Order)
VALUES (TagIdToInsert,ParentTagId,ParentTagname,MinOccur,MaxOccur,Order) 
```

请帮助我我不知道如何使用 linq 编写 SQL 查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:42:47.467

也许是这样的：

```
using(var db=new DataContext("YourConnectionStringHERE"))
{
  db.TUPLE_MAP.InsertAllOnSubmit(tags.Select (t =>
  new TUPLE_MAP()
  {
       TagId=t.TagIdToInsert,
       ParentTagId=t.ParentTagId,
       ParentTagname=t.ParentTagname,
       MinOccur=t.MinOccur,
       MaxOccur=t.MaxOccur,
       Order=t.Order
  }));
  db.SubmitChanges();
} 
```

或者，如果您想使用`parentID`then 这样的东西：

```
using(var db=new DataContext("YourConnectionStringHERE"))
{
  db.TUPLE_MAP.InsertAllOnSubmit(tags.Select (t =>
  new TUPLE_MAP()
  {
       TagId=t.TagIdToInsert,
       ParentTagId=parentID,
       ParentTagname=t.ParentTagname,
       MinOccur=t.MinOccur,
       MaxOccur=t.MaxOccur,
       Order=t.Order
  }));
  db.SubmitChanges();
} 
```

其中 db 是您的 linq 数据上下文

有用的参考资料：

*   [如何：将行插入数据库 (LINQ to SQL)](http://msdn.microsoft.com/en-us/library/bb386941.aspx)

**编辑**

因此，如果您使用的是 Compact 数据库 3.5，那么很多类似的东西：

```
using (var conn =new SqlCeConnection("Data Source = test.sdf; Password ='pass'"))
{
        foreach (var tag in tags)
        {
            using(var cmd = conn.CreateCommand())
            {

                cmd.CommandText = @"INSERT INTO TUPLE_MAP (TagId,ParentTagId,ParentTagname,MinOccur,MaxOccur,Order)
                                    VALUES (@TagIdToInsert,@ParentTagId,@ParentTagname,@MinOccur,@MaxOccur,@Order)";

                cmd.Parameters.AddWithValue("@TagIdToInsert", tag.TagIdToInsert);
                cmd.Parameters.AddWithValue("@ParentTagId", tag.ParentTagId);
                cmd.Parameters.AddWithValue("@ParentTagname", tag.ParentTagname);
                cmd.Parameters.AddWithValue("@MinOccur", tag.MinOccur);
                cmd.Parameters.AddWithValue("@MaxOccur", tag.MaxOccur);
                cmd.Parameters.AddWithValue("@Order", tag.Order);

                cmd.ExecuteNonQuery();

            }
        }
    } 
```

有用的参考资料：

*   [为什么我不能在我的 SQL Compact 3.5 数据库中插入记录？](https://stackoverflow.com/questions/3899310/why-cant-i-insert-a-record-into-my-sql-compact-3-5-database)
*   [SqlCeCommand.Parameters 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcecommand.parameters%28v=vs.80%29.aspx)
*   [SqlCeCommand 类](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcecommand.parameters%28v=vs.80%29.aspx)
*   [SqlParameterCollection.AddWithValue 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:15:33.143

使用 linq Pad 或 sql profiler 查看生成的 SQL。您也可以为此目的使用 Visual Studio。在调试模式下，将光标放在变量“tags”上，您将能够看到 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:39:33.583

我假设您正在使用 Linq to SQL，如果您这样做，您将在 xxxDataContext 中有一个名为 Tuple_map 的实体。然后你只需要像这样创建那个实体的对象......

```
using (XXXDataContext context = new XXXDataContext())
{
   Tuple_map obj = new Tuple_map();
   //Populate obj properties like obj.tabid = from objects you got it from above query
   context.Tuple_map.InsertOnSubmit(obj);
   context.SubmitChanges();
} 
```

# c# - 将 JSON 对象反序列化为 C# 对象

> ID：10136049
> 
> 赞同：2
> 
> 时间：2012-04-13T06:08:12.720
> 
> 标签：c#, json, restsharp

我正在尝试使用 RestSharp 读取一些 json 数据。

但是我在读取 json 对象时遇到了一些问题。我有这个回应：

```
expand: "html",
self: "<url>/INCIDENT-447",   
key: "INCIDENT-447",
fields: {
  customfield_11414: {
  name: "Corrective Measures",
  type: "com.atlassian.jira.plugin.system.customfieldtypes:textarea"
},
  summary: {
  name: "summary",
  type: "java.lang.String",
  value: "BLA BLA BLA"
}, 
```

我需要用 Property 的summery 和 customfield_11414 创建一个对象，但我只需要它们的值。不是整个 JSON 对象

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T06:35:38.390

您可以一起使用[Json.Net](http://json.codeplex.com/)和`dynamic`关键字

```
dynamic dynObj = JsonConvert.DeserializeObject(json);
Console.WriteLine(dynObj.fields.customfield_11414.name + " " + 
                  dynObj.fields.summary.value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:20:08.693

你有几个选择。一种是不要尝试反序列化所有内容，而只是让 JSON 可用于 LINQ/XPATH 样式搜索。这是使用[Json.NET](http://json.codeplex.com/)：

```
var json = " ... "; // your json here
var o = JObject.Parse(json);
var summary = o["summary"];
var customfield_11414 = o.SelectToken("customfield_11414"); 
```

这些将所有内容都返回为`JToken`，您可以根据需要对其进行转换或进一步解析。

# android - 如何在 Android 中动态创建编辑文本

> ID：10136060
> 
> 赞同：6
> 
> 时间：2012-04-13T06:09:44.950
> 
> 标签：android

我是 android 编程新手，我遇到了动态创建文本字段的问题；

我想创建一个视图，其中有一个名为“创建文本字段”的按钮和两个编辑文本，一个编辑文本名称是 ROW，第二个编辑文本名称是 COLUMN。当用户在编辑文本中输入数字时，假设 ROW =2 和 COLUMN =3 并按下按钮“创建文本字段”，它可能会在“创建文本字段”按钮下方创建 6 个编辑文本。这些 6 编辑文本应位于 2 行和 3 列中，如下所示

EditText-1 EditText-2 EditText-3

EditText-1 EditText-2 EditText-3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:38:10.163

```
setContentView(R.layout.main);
        LinearLayout ll = (LinearLayout)findViewById(R.id.ll);
        Display display = ((WindowManager) getApplicationContext().getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
        int width = display.getWidth()/3;
        for(int i=0;i<2;i++){
            LinearLayout l = new LinearLayout(this);
            l.setOrientation(LinearLayout.HORIZONTAL);
            for(int j=0;j<3;j++){
                EditText et = new EditText(this);
                LayoutParams lp = new LayoutParams(width,LayoutParams.WRAP_CONTENT);
                l.addView(et,lp);
          }
            ll.addView(l);
        } 
```

在您的 onCreate() 中使用上面的代码，其中“main”是 xml 文件。您可以将 i<2 和 j<3 替换为 edittext 1 和 2 的值。

我正在使用的示例 main.xml 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/et1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/et2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T09:59:22.070

```
public class DynamicEditTextActivity extends Activity {

    private EditText row, column;
    private Button submit;
    private LinearLayout main, matrix;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        main = (LinearLayout) findViewById(R.id.mainlayout);
        row = (EditText) findViewById(R.id.row);
        column = (EditText) findViewById(R.id.column);      
        matrix = (LinearLayout) findViewById(R.id.matrix);
        matrix.setOrientation(LinearLayout.VERTICAL);

        submit = (Button) findViewById(R.id.submit);
        submit.setOnClickListener(generate);
    }

    OnClickListener generate = new OnClickListener() {

        public void onClick(View v) {

            matrix.removeAllViews();

            int rows = Integer.parseInt(row.getText().toString());
            int cols = Integer.parseInt(column.getText().toString());

            for (int i = 0; i < rows; i++) {

                LinearLayout layout = new LinearLayout(
                        DynamicEditTextActivity.this);
                layout.setOrientation(LinearLayout.HORIZONTAL);

                for (int j = 0; j < cols; j++) {

                    TextView text = new TextView(DynamicEditTextActivity.this);
                    text.setLayoutParams(new LayoutParams(
                            LayoutParams.WRAP_CONTENT,
                            LayoutParams.WRAP_CONTENT));
                    text.setText((j+1) + "    ");
                    text.setTextColor(Color.RED);

                    layout.addView(text);
                }

                matrix.addView(layout);
            }
        }
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T06:24:39.880

这就是动态创建 EditText 框的方式...

希望这是有用的...

这只是一个例子......你可以参考这个......

```
EditText t = new EditText(myContext);
    t.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    layout.addView(t); 
```

* * *

```
final LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
final EditText edit_text = new EditText(this);
edit_text.setLayoutParams(lparams);
edit_text.setText("New text: " + text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-21T12:07:21.083

**试试这个功能**

```
public static void display(final Activity activity, Button btn) {
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            LinearLayout scrollViewlinerLayout = activity.findViewById(R.id.linearLayoutForm);
            java.util.ArrayList<String> msg = new ArrayList<String>();

            for (int i = 0; i < scrollViewlinerLayout.getChildCount(); i++)
            {
                LinearLayout innerLayout = (LinearLayout) scrollViewlinerLayout.getChildAt(i);
                EditText edit = innerLayout.findViewById(R.id.editDescricao);

                msg.add(edit.getText().toString().trim());

                int childcount = scrollViewlinerLayout.getChildCount();
                for( i =0 ; i < childcount; i++){
                    View view = scrollViewlinerLayout.getChildAt(i);
                }
            }

            Toast t = Toast.makeText(activity.getApplicationContext(), msg.toString(), Toast.LENGTH_SHORT);
            t.show();
        }
    }); } 
```

# jsp - 使用 Servlet 和 JSP 从 html 表中获取选定的行

> ID：10136062
> 
> 赞同：3
> 
> 时间：2012-04-13T06:09:49.957
> 
> 标签：jsp, servlets, checkbox, row, selected

我有下一个名为 的 jsp 文件`Bookstore.jsp`，其中我用数据库中的数据填充了一个表。

```
<%
ArrayList<Book> b = new ArrayList<Book>();
b = SqlSentencesList.showCatalog(); // this method returns an arrayList with all books
%>

<form method="get" action="ShoppingCarController">
    <table border="2">
        <tr>
            <th>ISBN</th>
            <th>Title</th>
            <th>Author</th>
            <th>Price</th>
            <th>Select</th>
        </tr>

        <%for(int i=0; i<l.size();i++){%>
            <tr>
                <td> <%out.print(b.get(i).getIsbn());%> </td>
                <td> <%out.print(b.get(i).getTitle());%> </td>
                <td> <%out.print(b.get(i).getAuthor());%> </td>
                <td> <%out.print(b.get(i).getPrice());%> </td>
                <th> <input type="checkbox" name="checkboxGroup" value="<%Integer.toString(i);%>"/> </th>
            </tr>
        <% } %>
    </table>
    <input type="submit" value="Add to shopping car"/>
</form> 
```

现在，我需要 Servlet 中的相同图书数据（ISBN、书名、作者和价格），但仅来自选定的图书数据。

这是我来自 ShoppingCarController servlet 的 doGet 方法：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        ArrayList<Book> shoppingCar = new ArrayList<Book>();

        String[] values = request.getParameterValues("checkboxGroup");

        for(int i=0; i<values.length; i++) {
            System.out.println(values[i]);
        }
    } 
```

我试图打印它以查看我得到了什么，但控制台中没有显示任何内容。

我在看这个类似的案例：[How to pass data from selected rows using checkboxes from JSP to the server](https://stackoverflow.com/questions/4525230/how-to-pass-data-from-selected-rows-using-checkboxes-from-jsp-to-the-server)我认为我的问题出在`value`属性上，但我不知道该问题中使用的语法，不明白`for each`和`<c:out`标签；简而言之，我不知道如何调整我的代码以使其正常工作。

有人帮我一把。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:19:33.227

你的jsp应该看起来像这样（使用你发布的servlet代码）

首先编辑您的 servlet 并包括：

```
ArrayList<Book> shoppingCar = new ArrayList<Book>();
request.setAttribute("b", shoppingCar);//accsessed as ${b} in jsp 
```

在您的 jsp 中，您将拥有：-

```
 <form action="yourserlet" method="POST">
                <table>
                    <thead>
                        <tr>
                            <td width="10%">ISBN</td>
                            <td width="30%">TITLE</td>
                            <td width="30%">AUTHOR</td>
                            <td width="20%">SELECT</td>
                        </tr>
                    </thead>

                    <tbody>

        <c:forEach items="${b}" var="book">  
                 <tr>     
                   <td align="left"><input type="text" name="isbn<c:out value="${book.isbn}"/>"  disabled="true"/></td>                     
                     <td align="left"><input type="text" name="title<c:out value="${book.title}"/>"  disabled="true"/></td> 
                     <td align="left"><input type="text" name="author<c:out value="${book.author}"/>"  disabled="true"/></td> 
                     <td align="left"><input type="text" name="price<c:out value="${book.price}"/>"  disabled="true"/></td>
                     <td align="center">  
                        <input type="checkbox" name="checkboxgroup"   
                            value="c:out value="${book.tostring()}"/>"/>  
                     </td>  
                  </tr>  
             </c:forEach>   
      </tbody>
                </table>
            </form> 
```

您可能应该使用 jquery 在选中复选框时启用或禁用字段，默认情况下我已禁用它们。

还要检查：

[jQuery - 复选框启用/禁用](https://stackoverflow.com/questions/2330209/jquery-checkbox-enable-disable)

[使用 ajax 和 jsp/servlet 获取所有选中的复选框值？](https://stackoverflow.com/questions/2688388/getting-all-selected-checkboxes-values-using-ajax-and-jsp-servlets)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:09:42.767

在 JSP 中更改

```
 <input type="checkbox" name="checkboxGroup" value="<%=Integer.toString(i)%>"/> 
```

或者

```
 <input type="checkbox" name="checkboxGroup" value="<%=i%>"/> 
```

也将工作。您不需要转换为字符串值。

**仅供参考：**如果你打算做更多的事情。最好在参数中传递 `b.get(i).getID()`某种东西。传递序列可能会导致不正确的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-15T05:11:05.333

**你的 JSP 代码..**

```
<form method="POST" action="promoteSelected">
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>*</th>
<th>AdmNo</th>
<th>Firstname</th>
<th>Lastname</th>
<th>Check</th>
</tr>
</thead>
<tbody>
<%
if(studentList !=null){
    int scount = 1;
    for(Student stu : studentList){
    %>
<tr>
<td><%=scount%></td>
<td><%=stu.getAdmno()%></td>
<td><%=stu.getFirstname()%></td>
<td><%=stu.getLastname()%></td>
<td> 
 <div class="checkbox">     
<input type="hidden" name="studentId[]" value="<%=stu.getUuid()%>">     
<label><input type="checkbox" name="studentCheck[]">Check</label>   
</div>              
</td>
</tr>
<%
scount++;
} }
%>

</tbody>
</table>
<div class="form-actions">
<button type="submit" class="btn btn-primary">
<input type="hidden" name="schooluuid" value="<%=accountuuid%>">
      Promote
</button> 
</div>
</form> 
```

**sevlet 代码..**

```
String[] studentCheck = {}; 
String[] studentId = {}; 

studentCheck = request.getParameterValues("studentCheck[]");
studentId = request.getParameterValues("studentId[]");
String schooluuid = StringUtils.trimToEmpty(request.getParameter("schooluuid"));

for(String str : studentCheck){
   System.out.println("studentCheck " + str);
}

for(String str : studentId){
    System.out.println("studentId " + str);
}
 System.out.println("schooluuid " + schooluuid); 
```

# c# - 文件管理最佳实践

> ID：10136064
> 
> 赞同：1
> 
> 时间：2012-04-13T06:10:07.530
> 
> 标签：c#, wpf, sql-server, wcf

您好我目前正在开发一个需要大量文件管理的 WPF 应用程序（用户应该能够将文件上传到中央服务器并从该服务器下载文件），目前我已经创建了一个相当简单的基于 wcf 的服务器来处理这些请求。

我想知道是否有更好的方法来做到这一点，比如我不知道的 windows server、sql server、wpf 中的第三方应用程序或功能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:45:56.397

用于存储：阅读`FILESTREAM`SQL Server 2008 中的功能，以通过文件系统在 SQL 中存储和访问大文件。

对于上传/下载：现在对你一无所知..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:11:17.887

您是否考虑过将 WebDAV 与 IIS 结合使用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:18:11.533

Sql Server 2012 在 FileStream 之上有一个新功能，称为 FiledTables。

在那里，您还有一个与您的文件表同步的文件共享

[教程](http://sqlsailor.com/2012/03/12/file-table-in-sql-server-2012-great-flexibility-to-manage-filestream-data/)

# c# - 使用块中的无模式表单和打开模式表单的正常关闭。足够的？

> ID：10136070
> 
> 赞同：3
> 
> 时间：2012-04-13T06:10:47.883
> 
> 标签：c#, .net, winforms, dispose

我正在开发一个 MDI Windows 窗体应用程序。

从欢迎（有点像主页）窗口，用户可以打开特定窗口来添加或编辑实体，例如订单或客户。每个都在其自己的无模式窗口中打开（作为 MDIChild）。在某些情况下添加新记录是在模式窗口中完成的。

我没有明确地在无模式窗口上执行 Dispose()。根据 Debug 期间的检查，当单击表单的 Close 按钮​​时，Designer.cs 文件中的 Dispose() 方法将执行并调用 base.Disposing 方法。我认为该表单确实在单击关闭按钮时被关闭。

对于对话框窗口，我在 using 块中打开它们，据我所知，当 using 块结束时，它将 Dispose 关闭窗口。

那么，我的整体理解和方法是否正确？

我对此进行了谷歌搜索。似乎有很多不同方法的强烈支持者，因此我有点不确定我的方法是否可行。

非常感谢您的澄清。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:51:44.697

您在 using 块中有变量吗？你过得很好。除非该类包含任何非托管资源。C# 对话框和表单不是非托管的。C# 中的大多数内容都是托管内存。所以使用应该足够了。

您有一个 using 子句，因此以下内容并不真正适用，但很高兴知道

*“当 IDisposables 超出范围时，它们是否不会被丢弃？” 不。如果 IDisposable 对象是可终结的，这不是一回事，那么当它被垃圾回收时，它就会被终结。这可能很快，也可能几乎永远不会。*

很多讨论应该可以帮助你在这里获取更多信息

[C# USING 关键字 - 何时以及何时不使用它？](https://stackoverflow.com/q/317184/57883)

我目前的理解是，除非您使用非托管资源，否则如果它决定需要回收内存或程序以稳定状态关闭，则垃圾收集器或程序关闭将处理它。

# meteor - Meteor Step by Step 我的第一个应用指南？

> ID：10136071
> 
> 赞同：9
> 
> 时间：2012-04-13T06:10:54.463
> 
> 标签：meteor

有没有人看过或制作一步一步的`Meteor.js`指南？

我不太熟悉，`Javascript`但我知道`HTML`并且`CSS`我很好奇如何开始搞乱`Meteor.js`，看看它是如何工作的以及我能用它做什么。

我不确定如何编辑示例中的代码，所以我想也许我应该在这里问一下，看看是否有任何有用的链接，你们都可以指出我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T08:15:34.870

Meteor 目前还很新。没有官方指南，除了更像演示的[截屏视频。](http://www.meteor.com/screencast)您仍然可以浏览[源代码](https://github.com/meteor/meteor)，但对 javascript 了解不够，您将不得不稍等片刻。

[Meteor 的例子](https://github.com/meteor/meteor/tree/master/examples)很容易解释，如果你现在还想进入，请阅读代码并尝试自己理解。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T21:06:34.177

Thomas Lomas 刚刚制作了一个很棒的教程截屏视频：http: [//vimeo.com/40300075](http://vimeo.com/40300075)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T15:57:59.850

对于稍微熟悉 JavaScript 和 node.js 的人来说，meteor 示例非常易于理解，因此您应该首先开始学习。一个好的起点是[http://www.nodebeginner.org/](http://www.nodebeginner.org/)

# windows - Windows Mobile 6.5 中的蓝牙连接

> ID：10136072
> 
> 赞同：0
> 
> 时间：2012-04-13T06:11:12.180
> 
> 标签：windows, windows-mobile-6.5

如何设置环境windows mobile 6.5，我的系统运行的是windows 7。我想在windows phone上开发蓝牙应用程序。请你提供6.0或6.5等任何版本的蓝牙api和Socket api的信息。我的设备是索尼爱立信 xperia x1 [WM6.5] 来检查应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T08:26:37.317

首先，安装 Visual Studio 2008（不是 2010！）。

然后安装 Windows Mobile SDK：

[http://www.microsoft.com/download/en/details.aspx?id=6135](http://www.microsoft.com/download/en/details.aspx?id=6135)

可选择安装模拟器和其他示例：

[http://www.microsoft.com/download/en/details.aspx?id=17284](http://www.microsoft.com/download/en/details.aspx?id=17284)

请遵循以下说明：

[http://msdn.microsoft.com/en-us/library/bb158496.aspx](http://msdn.microsoft.com/en-us/library/bb158496.aspx)

然后看看这个样本：

[http://msdn.microsoft.com/en-us/library/bb158754.aspx](http://msdn.microsoft.com/en-us/library/bb158754.aspx)

[http://msdn.microsoft.com/en-us/library/bb158664.aspx](http://msdn.microsoft.com/en-us/library/bb158664.aspx)

这里有很多有用的链接：

[http://www.wiimoteproject.com/bluetooth-and-connectivity-knowledge-center/bluetooth-sdk%27s-and-coding-with-bluetooth-support-documentation/](http://www.wiimoteproject.com/bluetooth-and-connectivity-knowledge-center/bluetooth-sdk%27s-and-coding-with-bluetooth-support-documentation/)

# php - 如何在magento网站中进行facebook登录集成？

> ID：10136076
> 
> 赞同：5
> 
> 时间：2012-04-13T06:11:40.323
> 
> 标签：php, facebook, magento

我想在我的magento网站中集成facebook登录。有人会给我步骤吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:40:49.403

[http://www.magentocommerce.com/magento-connect/facebook-login.html](http://www.magentocommerce.com/magento-connect/facebook-login.html) 这可能对你有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T07:20:20.047

尝试使用 Incho facebook 连接。它就像一个魅力，它是免费的。

使用步骤：

第 1 步：转到[http://inhoo.net/ecommerce/magento/facebook-connect-magento-extension/](http://inchoo.net/ecommerce/magento/facebook-connect-magento-extension/)

第二步：下载扩展。（它与 CE 1.6.2 兼容...已经测试并正在使用它。您也可以查看该页面上的其他使用说明）

Step3：在 Facebook 上设置应用程序并获取其 App ID/API Key 和 Application Secret。

Step4：打开下载的模块并将其内容复制到app文件夹中

Step5：同时将app/design/frontend/default/default/下的template和layout文件夹复制到app/design/frontend/yourinterface/yourtheme/文件夹下

Step6：打开 Magento 后端 goto Configuration->Customer->Facebook Connect，填写 ids 等，设置 Enabled 为 Yes

Step7：刷新缓存/重新索引所有

第 8 步：在按钮标签或标签中的任意位置添加 rel="facebook-connect"。这可以放在 CMS、静态块或模板中的任何位置，它应该会打开一个用于 Facebook 登录的弹出窗口。

希望这可以帮助...

# python - 命名实体的 Python 自然语言处理

> ID：10136077
> 
> 赞同：3
> 
> 时间：2012-04-13T06:12:11.100
> 
> 标签：python, nlp

我正在编写一个 python web 应用程序，我需要处理其中包含命名实体的搜索查询。例如，如果搜索查询是：“mac os lion”并且假设我必须使用数据库中可用的候选者来处理此查询：

*   谷歌安卓。
*   微软Windows。
*   苹果 Mac OS X 狮子
*   ...

我们都知道第三个结果是正确的结果。但是有什么方法可以将用户的查询（即“mac os lion”）映射到“Apple Mac OS X Lion”（这是我数据库中的可用条目）有人可以告诉我要寻找什么或做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T08:06:22.543

您需要对用户查询进行某种规范化，并且必须“学习”从这些到正确“类”的映射。

一种简单的方法是计算与您的任何“类”匹配的“令牌”的重叠。以下示例代码可能会有所帮助：

```
CLASSES = ['Google Android', 'Microsoft Windows', 'Apple Mac OS X Lion']

def classify_query(query_string):
    """
    Computes the most "likely" class for the given query string.

    First normalises the query to lower case, then computes the number of
    overlapping tokens for each of the possible classes.

    The class(es) with the highest overlap are returned as a list.

    """
    query_tokens = query_string.lower().split()
    class_tokens = [[x.lower() for x in c.split()] for c in CLASSES]

    overlap = [0] * len(CLASSES)
    for token in query_tokens:
        for index in range(len(CLASSES)):
            if token in class_tokens[index]:
                overlap[index] += 1

    sorted_overlap = [(count, index) for index, count in enumerate(overlap)]
    sorted_overlap.sort()
    sorted_overlap.reverse()

    best_count = sorted_overlap[0][0]

    best_classes = []
    for count, index in sorted_overlap:
        if count == best_count:
            best_classes.append(CLASSES[index])
        else:
            break

    return best_classes 
```

示例输出

```
classify_query('mac OS x') -> ['Apple Mac OS X Lion']
classify_query('Google') -> ['Google Android'] 
```

当然，这只是一个非常基本的解决方案。您可能希望添加一些拼写检查，以便在查询字符串中出现拼写错误时更加健壮......

希望有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:56:27.877

如果您只需要查找与查询相似的文本，则可以使用带有 python 绑定的文本搜索引擎，例如[Lucene + PyLucene](http://lucene.apache.org/pylucene/)。

# php - 将值从php数组传输到jquery

> ID：10136078
> 
> 赞同：0
> 
> 时间：2012-04-13T06:12:20.080
> 
> 标签：php, javascript, jquery

数组 $data2 用于制作图表，它包含我公司的产品名称。我想将 $data2 中的值（即产品名称）分配给 jquery 数组“类别”，而不是下面代码中列出的位置...？

```
<script type="text/javascript">
 $(function () {
 var chart;
 $(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column',
            margin: [ 50, 50, 100, 80]
        },
        title: {
            text: 'Product Selling Report'
        },

  <?php

  $sql="select productid,count(productid)as num from orderdetails group by productid order by num desc";
$res=mysql_query($sql);
$i=0;
   while($arr=mysql_fetch_array($res))
    {
    $rep=$arr['productid'];
    $sql2="select * from product where productid='$rep'";
    $res2=mysql_query($sql2);
    $arr2=mysql_fetch_array($res2);
    $data2[$i]=$arr2['productname'];
    $i=$i+1;
    }

     ?>
        xAxis: 
            categories: [
                'Tokyo',
                'Jakarta',
                'New York',
                'Seoul',
                'Manila',
                'Mumbai',
                'Sao Paulo',
                'Mexico City',
                'Buenos Aires',
                'Guangzhou',
                'Shenzhen',
                'Istanbul'
            ],
      },
      });
  });
   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:18:54.543

`json_encode($data2)`为 JS 中的数组/映射输出有效代码

```
 categories: <?= json_encode($data2) ?>, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:20:10.853

```
<script type="text/javascript">
 $(function () {
 var chart;
 $(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column',
            margin: [ 50, 50, 100, 80]
        },
        title: {
            text: 'Product Selling Report'
        },
        xAxis: 
            categories: [

  <?php

  $sql="select productid,count(productid)as num from orderdetails group by productid order by num desc";
$res=mysql_query($sql);
$i=0;
   while($arr=mysql_fetch_array($res, MYSQL_ASSOC))
    {
    $rep=$arr['productid'];
    $sql2="select * from product where productid='$rep'";
    $res2=mysql_query($sql2);
    $arr2=mysql_fetch_array($res2, MYSQL_ASSOC);
    echo "'".$arr2['productname']."',\n";
    }

     ?>
            ],
      },
      });
  });
   </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:22:27.990

试试这个..

```
xAxis: 
        categories: [
            <?php $str = "";
                  foreach($data2 as $data) {
                      $str .= $data.',';
                   }
                   $str = substr($str,0,-1);
                   echo $str;
        ],
  },
  }); 
```

});

# android - LocationListener 并在一段时间内作为后台进程更新网络服务

> ID：10136080
> 
> 赞同：0
> 
> 时间：2012-04-13T06:12:23.307
> 
> 标签：android

我的 Andoid 应用程序包含许多活动。我想运行一个独立于这些活动的后台进程（无论 UI 上运行的是哪个活动）。在此后台进程中，我想使用 LocationListener 捕获位置更新，并希望调用 Web 服务将捕获的位置存储在数据库中。并且这种 web 服务的调用必须仅在 2 分钟间隔内发生。有人可以帮我实现这一点。

谢谢。安卓开发者

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T06:51:31.443

Check this

```
public class LocationUpdator extends Service{
    Location location;
    private int normallocationwait = 2000;
        Timer timer = new Timer();
        private final Handler handler = new Handler();
    Intent intent;

    public void  onCreate(){
        super.onCreate();
        intent = new Intent(BROADCAST_ACTION);  
        updateNotification();
    }

    //int onStartCommand(Intent intent, int flags, int startId) 
    public void onStart(Intent intent,int startId){
        super.onStart(intent, startId);
        handler.removeCallbacks(sendUpdatesToUI);
            handler.postDelayed(sendUpdatesToUI, 1000); // 1 second
        Log.v("Location Servics", "Start Service");
    }

    public void onDestroy(){
        super.onDestroy();
        Log.v("Location Servics", "Destroy Service");
    }

    protected void updateNotification() {
             LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
             LocationListener locationListener = new MyLocationlistener();

             lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, normallocationwait, 0.250f, locationListener);
             location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        }

    private class MyLocationlistener implements LocationListener {

            public void onLocationChanged(Location location){
                 if(location!=null){
                           dumpLocation(location);
             } 
            }

         public void onProviderDisabled(String provider){
             Log.v("Loc Update","\nProvider disabled: " + provider);
         }

         public void onProviderEnabled(String provider){
             Log.v("Loc Update","\nProvider enabled: " + provider);
         }

         public void onStatusChanged(String provider, int status, Bundle extras){
             Log.v("Loc Update","\nProvider status changed: " + provider + ", status="
                        + status + ", extras=" + extras);
         }

         private void dumpLocation(Location location) {
                         Log.v("Loc Update","\n" + location.toString());
                     Log.v("Demo", location.toString());
                     if(GlobalValues.whereRegister == 1){
                             String url  = TaxiUrls.taxiLocationUpdate_url  + "taxi_device_id="+ GlobalValues.deviceID +
                                    "&lat="+ location.getLatitude() + "&lng=" + location.getLongitude();
                             Toast.makeText(getBaseContext(), "Location Update", Toast.LENGTH_SHORT).show();
                             HttpClient httpclient = new DefaultHttpClient();
                     HttpPost httppost = new HttpPost(url);
                     try {
                        HttpResponse response = httpclient.execute(httppost);
                            Log.v("Message", response.toString());
                     } catch (ClientProtocolException e) {
                        Log.e("Sending Message",e.getMessage().toString());
                     } catch (IOException e) {
                        Log.e("Sending Message",e.getMessage().toString());
                     }
                } 
            }

     }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:39:23.740

也许值得在后台启动一个简单的 AsyncTask 来执行此操作。

# android - 通过代码android获取android模拟器上pc的ip地址

> ID：10136082
> 
> 赞同：2
> 
> 时间：2012-04-13T06:12:54.603
> 
> 标签：android, android-emulator, ip

我想通过代码在android模拟器中获取我的电脑的IP地址....或告诉我获取连接在一个局域网中的所有设备的IP地址以唯一识别每一个......请帮我排序出这个问题

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:19:28.943

使用此代码获取外部 IP 地址

```
 HttpClient httpclient = new DefaultHttpClient();
      HttpGet httpget = new HttpGet("http://api.externalip.net/ip/"); 
      HttpResponse response = null;
      try 
      {
      response = httpclient.execute(httpget);
        } 
      catch (ClientProtocolException e)
      {
     e.printStackTrace();
        } 
      catch (IOException e)
      {
     e.printStackTrace();
        }
      Log.e("",""+response);
      HttpEntity entity = response.getEntity();
      if (entity != null) {
      long len = entity.getContentLength();
      if (len != -1 && len < 1024) 
      {
       try
       {
      str=EntityUtils.toString(entity);
       Log.e("",""+str);
        }
       catch (ParseException e)
       {            
    e.printStackTrace();
    } 
       catch (IOException e)
       {                
    e.printStackTrace();
    }
    } 
      } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T06:33:51.167

上述功能只有通过检查arp缓存才能实现，其中IP地址将根据每个连接到设备的方式一一添加。使用下面的代码并检查。只需放置具有正确名称的按钮并在单击时调用此方法

```
 public void getClientList() {

    int macCount = 0;
    BufferedReader br = null;
    try {
        br = new BufferedReader(new FileReader("/proc/net/arp"));
        String line;
        while ((line = br.readLine()) != null) {
            String[] splitted = line.split(" +");

            if (splitted != null && splitted.length >= 4) {
                // Basic sanity check
                String mac = splitted[3];

                if (mac.matches("..:..:..:..:..:..")) {
                    macCount++;
                    ClientList.add("Client(" + macCount + ")");
                    IpAddr.add(splitted[0]);
                    HWAddr.add(splitted[3]);
                    Device.add(splitted[5]);
                    Toast.makeText(
                            getApplicationContext(),
                            "Mac_Count  " + macCount + "   MAC_ADDRESS  "
                                    + mac, Toast.LENGTH_SHORT).show();
                    for (int i = 0; i < splitted.length; i++)
                        System.out.println("Addressssssss     "
                                + splitted[i]);
                }
            }
        }
        // ClientList.remove(0);

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            br.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

# perl - Perl crypt 似乎无法正常工作

> ID：10136084
> 
> 赞同：2
> 
> 时间：2012-04-13T06:13:13.403
> 
> 标签：perl, crypt

我正在尝试使用 crypt 函数来验证数据库中用户的详细信息：

```
 my $sql = $dbh->prepare("SELECT COUNT(id) FROM tblUsers WHERE UPPER(Username)=UPPER(?) AND Password=?");
    my $count;
    $sql->execute(
        $args{login_username},
        crypt($args{login_password},$args{login_username})
        ); 
```

但它返回 0 行（密码绝对正确）

该行：

```
 $sql->execute($args{login_username},$args{login_password}); 
```

完美运行。

关于可能出现什么问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:07:54.443

看起来存储在数据库中的密码未加密。要比较加密形式的值，您还需要在数据库端对它们进行加密。

MySQL有一个`ENCRYPT`函数，所以你可以写

```
my $sql= $dbh->prepare(<<SQL);
SELECT COUNT(id)
FROM tblUsers
WHERE UPPER(Username) = UPPER(?)
AND ENCRYPT(Password, Username) = ?
SQL

$sql->execute($args{login_username}, crypt($args{login_password},$args{login_username})); 
```

但确切的语法取决于您使用的平台。

# c - 使用 get() 进行 C 疑难解答

> ID：10136088
> 
> 赞同：-1
> 
> 时间：2012-04-13T06:13:30.843
> 
> 标签：c

当我给出第一个输入时，工作前会出现一个额外的 0 `gets()`。但是，如果我删除`gets()`，则没有问题。`printf()`不能使用，因为它会在空白处中断。请提供任何替代解决方案或我该怎么办？

```
 #include <cstdio>
 #include <iostream>
 #include <stdlib.h>
 using namespace std;
 int main()
 {
  long long a,i,t,count;
  int op;
  char s[10000];
  scanf("%lld",&t);
  for(i=1;i<=t;i++)
  {
    gets(s);
    a=atoll(&s[7]);
    printf("%lld",a);
  }
  return 0;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T06:20:46.760

*scanf()*将第一行的行尾字符留在输入流中，然后由*gets()*使用。这是这里经常讨论的常见初学者错误。

建议：

1.  不要将*scanf()*例程与*gets()*例程混用。
2.  除了简短的测试程序不要使用*gets()*（而是使用*fgets()*），因为使用*gets()*可能会发生缓冲区溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T06:55:27.127

您可以尝试在使用 scanf 阅读时添加 '\n' 字符：

```
 scanf("%lld\n",&t);
  for(i=1;i<=t;i++)
  {
    gets(s);
    a=atoll(&s[7]);
    printf("%lld",a);
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T07:02:42.747

为什么不：

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    long long i;
    long long t;
    char s[10000];

    if (fgets(s, sizeof(s), stdin) == 0)
        return 0;
    t = atoll(s);
    for (i = 1; i <= t; i++)
    {
        if (fgets(s, sizeof(s), stdin) == 0)
            break;
        a = atoll(&s[7]);
        printf("%lld\n", a);
    }
    return 0;
} 
```

除其他优点外，它没有：

*   打印杂散零，
*   在据称 C 程序中包含 C++ 代码，
*   包含任何杂散（未使用）变量，
*   使用危险`gets()`功能。

公平地注意到几个缺陷：

*   如果数据行长度不超过 8 个字符，则会产生虚假输出；它应该`strlen(s)`在调用之前检查`atoll(&s[7])`
*   我们假设 10K 比任何单行都要长，因此截断的行不会成为问题，尽管 JSON 数据有时似乎在没有任何换行符的文件中编码并且可能非常长（Firefox 书签列表或备份，例如，甚至不包含一个换行符）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T06:20:59.280

我确定您在这里尝试做什么，或者问题是什么。但 ...

1.  正如 Greg Hewgill 正确所说：永远不要使用“gets()”。这是等待发生的缓冲区溢出。

2.  您可以使用“fgets()” - 它可以轻松解决问题。

3.  当您使用它时，为什么要使用“scanf()”，然后是“gets()”，然后是“atoll()”？可以合并这些输入中的任何一个吗？还是变得更加一致？

4.  您在哪里检查“环礁（）”的有效转换？为什么不直接使用“sscanf()”（并检查返回值）？

# asp.net-mvc-3 - 如何在 MVC3 nhibernate 中遍历 Icollection

> ID：10136094
> 
> 赞同：0
> 
> 时间：2012-04-13T06:14:19.693
> 
> 标签：asp.net-mvc-3, model-view-controller, nhibernate, drop-down-menu

我正在 mvc3 中开发一个应用程序。
我有两个下拉列表，并根据在第一个下拉列表中选择的值填充第二个下拉列表。第一个下拉菜单是课程，根据选择的课程，第二个下拉菜单会填充课程可用的状态。

例如，如果课程是“MCA”，则州应该是马哈拉施特拉邦、拉贾斯坦邦等。为此，我编写了一个运行良好的 ajax 函数。但问题是我无法一次获取多个状态，即我一次只能获取一个状态。

我编写了以下代码来获取状态名称：

HobbyHomeAdress 表包含我通过其他方法获取的ProvincialStateID。然后我将该值与ProvincialStateID 中ProvincialState 表中的值进行比较并获取该表的数据，但它只给了我最后一条记录。

```
 public ICollection<ProvincialState> FetchStateByStateid(ICollection<HobbyHomeAddress> hobbyhomeaddresslist)
    {
        log.Debug("Start");
        ISession session = DataAccessLayerHelper.OpenWriterSession();
        ITransaction transaction = session.BeginTransaction();
        ICollection<ProvincialState> provincialstate = null;
        try
        {
            foreach (var state in hobbyhomeaddresslist)
            {
                provincialstate = session.CreateCriteria(typeof(ProvincialState))
                                .Add(Expression.Eq("ProvincialStateID", state.ProvincialState.ProvincialStateID))
                                .List<ProvincialState>();
            }
            transaction.Commit();

        }
        catch (SessionException ex)
        {
            if (transaction != null && transaction.IsActive)
                transaction.Rollback();

            log.Error(ex);
            provincialstate = null;
        }
        finally
        {
            if (transaction != null)
                transaction.Dispose();

            if (session != null && session.IsConnected)
                session.Close();

            log.Debug("End");
        }
        return provincialstate;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:18:47.567

您正在为 hobbyhomeaddresslist 中的每个州重新创建省级集合。因此，您最终会得到一个包含单个条目的集合，通常是最后一个条目。相反，您应该预先创建集合，并在检索项目后将其添加到该集合中。

...剪辑

```
 ...
    List<ProvincialState> provincialstate = new List<ProvincialState>();
    try
    {
        foreach (var state in hobbyhomeaddresslist)
        {

            var list = session.CreateCriteria(typeof(ProvincialState))
                            .Add(Expression.Eq("ProvincialStateID",       state.ProvincialState.ProvincialStateID))
                            .List<ProvincialState>();
            provincialstate.AddRange(list);
        }
        transaction.Commit();

    }
    ... 
```

更新：使用析取的单个查询。

```
 IList<ProvincialState> provincialstate = null;
    Disjunction dj = new Disjunction();    
    try
    {
        foreach (var state in hobbyhomeaddresslist)
        {
            dj.Add(Expression.Eq("ProvincialStateID",       state.ProvincialState.ProvincialStateID));
        }
        provincialstate = session.CreateCriteria(typeof(ProvincialState))
                       .Add(dj)
                       .List<ProvincialState>();

        transaction.Commit();

    } 
```

如果您查看生成的 SQL，您现在应该看到带有多个 where 子句的单个 select，而不是带有单个 where 子句的多个 select。

# javascript - myString.replace( VARIABLE, "") ......但全局

> ID：10136097
> 
> 赞同：49
> 
> 时间：2012-04-13T06:14:38.743
> 
> 标签：javascript, string, variables, replace

如何使用变量从字符串中删除子字符串的所有实例？（要删除，我认为最好的方法是在全球范围内一无所有地替换......对吗？）

如果我有这两个字符串，

```
myString = "This sentence is an example sentence."
oldWord = " sentence" 
```

然后像这样

```
myString.replace(oldWord, ""); 
```

仅替换字符串中变量的第一个实例。

但是如果我像这样添加全局 g`myString.replace(/oldWord/g, "");`它将不起作用，因为它认为 oldWord 在这种情况下是子字符串，而不是变量。如何使用变量执行此操作？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-04-13T06:17:24.777

**好吧，你可以使用这个：**

```
var reg = new RegExp(oldWord, "g");
myString.replace(reg, ""); 
```

**或者简单地说：**

```
myString.replace(new RegExp(oldWord, "g"), ""); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-13T06:19:35.523

传递变量时，您必须使用构造函数而不是文字语法。坚持使用文字字符串的文字语法以避免混淆转义语法。

```
var oldWordRegEx = new RegExp(oldWord,'g');

myString.replace(oldWordRegEx,""); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-01-23T20:57:37.820

此处无需使用正则表达式：围绕要删除的子字符串的匹配项拆分字符串，然后将其余部分连接在一起：

```
myString.split(oldWord).join('') 
```

在 OP 的示例中：

```
var myString = "This sentence is an example sentence.";
var oldWord = " sentence";
console.log(myString.split(oldWord).join(''));
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-02-19T14:08:47.223

根据 MDN 的文档，您可以这样做：

```
var re = /apples/gi;
var str = 'Apples are round, and apples are juicy.';
var newstr = str.replace(re, 'oranges');
console.log(newstr);  // oranges are round, and oranges are juicy. 
```

其中 /gi 告诉它进行全局替换，忽略大小写。

# xml - T-SQL XML 值函数 + 案例/何时 select 语句中是否有类似“THIS”的运算符？

> ID：10136098
> 
> 赞同：0
> 
> 时间：2012-04-13T06:15:01.030
> 
> 标签：xml, tsql, view, this

我有一个 XML 列，我正在创建一个视图。在选择语句中，我使用带有 XML 值函数的“case-when”语句。像这样的东西：

```
...

Case TemlXMLColumn.value(...) AS TempResult
WHEN 1 THEN 'Google'
WHEN 2 THEN 'IE'
...
END

... 
```

然后在同一个选择中我想这样做（但它给了我错误）：

```
...

Case TempResult
WHEN 'Google' THEN TemlXMLColumn.value(...)
ELSE ''
END

... 
```

所以，我现在正在这样做：

```
...

Case TemlXMLColumn.value(...) --This give me the "TempResult" so am doing the same thing twice
WHEN 'Google' THEN TemlXMLColumn.value(...)
ELSE ''
END

... 
```

重复的代码看起来不太好。更重要的是，我认为由于这个我称之为“视图”的双重甚至三重相同的 XML 值函数变慢了。

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:07:43.363

您可以这样做以避免编写重复的代码：

```
select
  ...
  case TempResult
     when 'Google' then TempResult
     else ''
  end
  ...
from
  ...
  cross apply (
     select
        case TempXmlColumn.value(...)
           when 1 then 'Google'
           when 2 then 'IE'
           ...
        end AS TempResult
  ) x 
```

当我只在一个地方使用 xml-value-function 时，我在类似的情况下看到了性能提升，但是使用 DATEADD Sql Server 等其他内置函数似乎缓存结果并且只执行一次，即使你正在使用它在同一个查询的几个地方。

# iphone - 懒惰地询问定位服务

> ID：10136099
> 
> 赞同：7
> 
> 时间：2012-04-13T06:15:04.433
> 
> 标签：iphone, ios, location

当我第一次安装并启动我的应用程序时，它会立即询问位置服务，即使尚未调用 startUpdatingLocation。那时我什至还没有分配 CLLocationManager 实例。我希望在我实际拨打电话后懒惰地完成这个提示，这样用户就不会盲目地关闭它。这个流程最近是否随着 iOS 的变化而改变？我记得它曾经被懒惰地问过。我正在使用 5.1 固件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T21:40:57.417

那很有意思。我测试了您的假设，甚至没有分配位置管理器，但出现了 iOS 位置权限对话框。我尝试了以下故障排除。在每一步之后，我在设备上运行项目，我只能让位置弹出窗口出现在最后一步。

*   启动一个新应用
*   需要 info.plist 中的位置服务
*   在 info.plist 中需要 gps
*   将 CoreLocation 链接到项目
*   将核心位置导入标题
*   为位置管理器创建和综合属性
*   向 CLLocationManager 询问 +authorizationStatus
*   向 CLLocationManager 询问 +locationServicesEnabled
*   alloc 初始化一个 CLLocationManager 实例
*   告诉 CLLocationManager 开始更新位置。

只有最后一步才出现提示。为了确保我什至创建了一个视图控制器，它推送了第二个视图控制器，该控制器初始化了一个 CLLocationManager 并开始更新位置。只有在推送第二个视图控制器时才会出现权限弹出窗口。这都是在 5.1 上运行的最新 Xcode。

我已经表明，位置服务仍然只在您尝试打开位置的确切时刻请求许可，就像在以前的 SDK 中所做的那样。也许检查您的代码，也许在此处粘贴一些代码，以便我们更详细地了解。:)

# javascript - imagemapster 插件：如何以编程方式使区域不再可选择？

> ID：10136100
> 
> 赞同：0
> 
> 时间：2012-04-13T06:15:05.173
> 
> 标签：javascript, jquery-plugins, imagemapster

[我已经使用 jquery-plugin imagemapster](http://www.outsharked.com/imagemapster/)设置了一个图像映射， 您能否提供一个提示，如何让 imagemape 中的某个区域在被点击后不再可点击？

我尝试了以下方法，但它不起作用：

```
function userClicked (e) {
    if(e.key == okKey){
        //success
        $('img').mapster({
           areas:[ {
              key: e.key,
              isSelectable: false
           }]
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:31:51.327

$('img').mapster('set_options',{areas:[{key:'anyAreaKey',isDeselectable:false }]})

# objective-c - 如何在目标 c 中调用 UINavigation 控制器

> ID：10136101
> 
> 赞同：-1
> 
> 时间：2012-04-13T06:15:08.177
> 
> 标签：objective-c, ios, xcode, animation

我正在尝试在不使用任何框架的情况下实现 facebook 之类的滑动视图。我正在做的是我在应用程序委托中创建了 UINavigation 控制器视图（比如 NVC1），并在其中加载了一个表格视图。我还在顶部 NVC1 上创建另一个导航视图控制器（比如 NVC2）。我在 NVC2 的左上方放置了一个条形按钮项。当我单击 NVC2 中的条形按钮时，它会滑到屏幕的一侧（我正在手动制作动画），这样它就会显示 NVC2 后面的 NVC1。如前所述，NVC1 包含表格视图。如果我单击 NVC2 中的表格视图单元格，它应该在 NVC1 上显示/动画。我该怎么做，或者有什么办法可以做到。

![雷士1](../Images/deeb0a16f76de05bf1feddc31de8ec88.png)

![雷士2](../Images/77fcf5fcb8cce33c3cf62fd4f600566d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:54:10.067

Implement the method `- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath` and write `SecondViewControllerNVC2 *objectNVC2` in .h file

it's look like following

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {       
                if (!objectNVC2) {
                objectNVC2 = [[SecondViewControllerNVC2 alloc] initWithNibName:@"SecondViewControllerNVC2" bundle:nil];
              UIBarButtonItem *backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil];
            self.navigationItem.backBarButtonItem = backBarButtonItem;
            [backBarButtonItem release];
            [self.navigationController pushViewController:objectNVC2 animated:YES];     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:30:12.227

如果您使用的是 iOS 5，请使用情节提要，创建一个导航控制器，使用 tableView 添加您的 VC，创建第二个 VC，然后右键单击并从第一个 VC 的 tableView 的单元格拖动到第二个 VC 并选择“push”。然后一切都会自动发生！听起来很复杂，但是一旦你完成了几次，它就比乱写代码要容易得多。另一方面，有时您需要对其进行编码 - 如果您真的需要并且仍然卡住，请告诉我，我会为您发布一些代码。

# java - 用户输入的数据未在托管 bean 中更新

> ID：10136102
> 
> 赞同：0
> 
> 时间：2012-04-13T06:15:11.007
> 
> 标签：java, jsf, jakarta-ee, jsf-2

我有一个 html 页面（editprofile.xhtml），它显示了保存在数据库中的数据。我面临的问题是，当我在屏幕上编辑一些数据并单击更新按钮时，编辑的数据不会进入 bean，它为空，从而导致错误。

```
<h:form id="editProfileForm">
 <f:facet name="label">
  <h:outputText value="Edit User Profile" />
 </f:facet>             
 <rich:panel header="Edit User Profile" style="font-size:10pt" >        
  <rich:simpleTogglePanel switchType="client" opened="true">
<f:facet name="header">Registration Details</f:facet>
<table>
    <tbody>
        <tr>
            <td>Login Name</td>
            <td>
            <h:inputText size="15" id="loginName" required="true"
                value="#{EditUserProfileBean.loginName}">
             <rich:ajaxValidator event="onblur" />
            </h:inputText>
            </td>
            <td></td>
            <td>Password</td>
            <td><h:inputSecret size="12" id="password" required="true"
                value="#{EditUserProfileBean.password}" >
            <rich:ajaxValidator event="onblur" />
            </h:inputSecret>
            </td>
            <td>Confirm Password</td>
            <td><h:inputSecret size="12" id="confirmpassword" required="true"
                value="#{EditUserProfileBean.confirmpassword}" >
            <rich:ajaxValidator event="onblur" />
            </h:inputSecret>
            </td>
        </tr>
</rich:simpleTogglePanel>  
<h:commandButton id="editProfile" action="#{EditUserProfileBean.saveEditProfileAction}" immediate="true" value="Update Profile" />
  </rich:panel>
 </h:form> 
```

上面的页面填充了加载时的现有数据，但如果我编辑并说更新，则值为 null

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T08:05:48.567

**从您的命令按钮中删除 immediate="true" 属性。**

它跳过了 jsf 应用程序生命周期的 updateModel 阶段，该阶段负责在 bean 中定义的属性上调用 setter，因此不会更新 bean 值。

阅读有关[直接属性如何影响 JSF 生命周期](http://balusc.blogspot.com/2006/09/debug-jsf-lifecycle.html#AddImmediateTrueToUICommandOnly)的更多信息。*-@BalusC 于 2006 年 9 月 27 日撰写*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T12:51:57.003

immediate = true 让您无需验证即可提交表单。为了解决你的问题，你这样做。

在命令按钮的 saveEditProfileAction 中获取当前用户对象，即编辑对象并调用 save 方法..框架将自动调用服务类的更新或插入方法。所以您的服务类必须包含 inser ， update ， delete 方法.

```
saveEditProfileAction{
super.save(getUserObject());
} 
```

因此，在调用 save 方法时，控件将根据表单状态转到服务类的插入或更新方法。

# perl - perl中带数字的字符串排序

> ID：10136109
> 
> 赞同：-1
> 
> 时间：2012-04-13T06:15:59.893
> 
> 标签：perl, sorting

我有这样的字符串：

```
"PQR23 on abc62", "PQR112 on efg7", "PQR9 on efg76" and so on 
```

现在我想把这个字符串按第一个字符的数字升序排列。

所以预期的输出应该是

```
PQR112 on efg7
PQR23 on abc62
PQR9 on efg76 
```

等等

我是 perl 新手，在网上做作业和搜索，但到目前为止还没有收到完美的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T06:51:06.700

I am not sure what you want that a simple lexical sort doesn't provide. The program belows seems to do what you have specified.

```
use strict;
use warnings;

my @strings = (
  "PQR23 on abc62",
  "PQR112 on efg7", 
  "PQR9 on efg76",
);

print "$_\n" for sort @strings; 
```

**output**

```
PQR112 on efg7
PQR23 on abc62
PQR9 on efg76 
```

* * *

**Edit**

If you want to ignore the prefix letters, then a code block for sort will do the trick

```
use strict;
use warnings;

my @strings = (
  "ABC23 on abc62",
  "PQR112 on efg7", 
  "XYZ9 on efg76",
);

print "$_\n"  for sort {
  my ($aa) = $a =~ /(\d)/;
  my ($bb) = $b =~ /(\d)/;
  $aa cmp $bb;
} @strings; 
```

**output**

```
PQR112 on efg7
ABC23 on abc62
XYZ9 on efg76 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:38:29.893

You could also use [Schwartzian Transform](http://www.stonehenge.com/merlyn/UnixReview/col64.html) like that, very efficient if your array is big:

```
#!/usr/bin/perl
use strict;
use warnings;
use Data::Dumper;

my @strings = (
  "PQR23 on abc62",
  "PQR112 on efg7", 
  "PQR9 on efg76",
);

my @result = 
    map { $_->[0] }
    sort { $a->[1] <=> $b->[1]}
    map { [$_, /(\d)/] }
    @strings;

print Dumper\@result; 
```

**output:**

```
$VAR1 = [
          'PQR112 on efg7',
          'PQR23 on abc62',
          'PQR9 on efg76'
        ]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:12:31.840

```
use strict;
use warnings;
my @sorted_strings=sort("PQR23 on abc62", "PQR112 on efg7", "PQR9 on efg76");
print join ("\n",@sorted_strings); 
```

输出

```
PQR112 on efg7
PQR23 on abc62
PQR9 on efg76 
```

# iphone - 仅在应用程序处于后台时获取位置更新

> ID：10136113
> 
> 赞同：1
> 
> 时间：2012-04-13T06:16:22.917
> 
> 标签：iphone, ios, xcode, cllocationmanager

我正在尝试获取位置更新，尤其是当应用程序处于后台时。当应用程序进入后台时，它应该每 n 分钟发送一次位置更新首先我尝试使用前台，它工作正常。我将相同的代码复制到 applicationDidEnterBackground，我无法打印位置更新。我不知道我在哪里受到打击，请帮助我。

在 viewDidLoad

```
- (void)viewDidLoad {

  locationManager = [[CLLocationManager alloc] init];
  locationManager.delegate = self;
  locationManager.distanceFilter = kCLDistanceFilterNone;
  locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
  [locationManager startUpdatingLocation];
} 
```

和

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{
  int degrees = newLocation.coordinate.latitude;
  double decimal = fabs(newLocation.coordinate.latitude - degrees);
  int minutes = decimal * 60;
  double seconds = decimal * 3600 - minutes * 60;
  NSString *lat = [NSString stringWithFormat:@"%d° %d' %1.4f\"", 
                   degrees, minutes, seconds];
  latLabel.text = lat;
  degrees = newLocation.coordinate.longitude;
  decimal = fabs(newLocation.coordinate.longitude - degrees);
  minutes = decimal * 60;
  seconds = decimal * 3600 - minutes * 60;
  NSString *longt = [NSString stringWithFormat:@"%d° %d' %1.4f\"", 
                     degrees, minutes, seconds];
  longLabel.text = longt;
} 
```

我尝试将这些方法粘贴到 AppDelegate 中。它不工作:(。帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:23:19.550

您不能简单地将代码粘贴到那里并期望您的应用程序在后台运行。您必须将其注册为在后台运行的应用程序。请参阅本文中的[实现](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)长时间**运行的后台任务部分**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T07:09:59.683

根据与评论的讨论，我建议您在 plist 中创建条目。

`UIBackgroundModes for location in plist`

这有帮助。

**编辑**

当您记录坐标时，您可能需要在 NSUserDefaults 中的某个地方节省时间。之后，当您下次登录时，您需要找到当前时间与存储在 NSUserDefaults 中的时间之间的差异。如果间隔是你想要的，而不是记录坐标。

希望这可以帮助。

# objective-c - NSValue 释放时是否释放其价值？

> ID：10136114
> 
> 赞同：1
> 
> 时间：2012-04-13T06:16:23.993
> 
> 标签：objective-c, pointers, memory-management, nsvalue

看看这个伪代码：

```
void* magicpointer = malloc(OVER_NINE_THOUSAND);
NSValue* v = [NSValue valueWithPointer:magicpointer];
[v release]; 
```

当 v 被释放时，magicpointer 是否也会被释放，还是我必须手动执行？我正在使用手动引用计数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T06:20:31.533

它不会被释放 - NSValue 只是一个包装器，因此您可以将任意值视为对象。它对包装的指针没有任何作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T06:35:21.100

不，`NSValue`不会。

听起来您可能想使用`[NSData](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/)`，它可以在发布时释放它的指针：

```
    void* 魔法指针 = malloc(OVER_NINE_THOUSAND);
    NSData *d = [NSData dataWithBytesNoCopy:magicpointer
                                     长度：OVER_NINE_THOUSAND
                               freeWhenDone:YES];
    //d 是自动释放的，所以不需要 -release 它。

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T06:27:42.967

当 NSValue 被释放时，NSValue 不会释放指针。文档中关于存储在 NSValue 中的指针的唯一说明是：

> 如果您使用已分配的数据项创建 NSValue 对象，请不要在 NSValue 对象存在时释放其内存。

使用 NSValue 的主要原因是将值装箱，以便可以将其放入 NSArray 或仅接受对象的类似集合中。仅仅因为不再需要 NSValue 框而释放内存是没有意义的。

# java - 填写应用程序登录表单的简单代码

> ID：10136116
> 
> 赞同：0
> 
> 时间：2012-04-13T06:16:32.327
> 
> 标签：java, automation

我正在尝试制作一个小程序来填充下面应用程序的用户名和密码字段，然后按绿色按钮：

![登录](../Images/963ad0b051ad230ac1793d4982c14e30.png)

最好的方法是什么？我在考虑 Java Robot 类 - 虽然我不知道它是否可以做到这一点。

有没有更简单/更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:24:52.130

机器人类是个好方法，它完全符合这个目的，但你必须以某种方式确定你想要填充的字段坐标。我可能会检查每个屏幕像素（也是机器人类）以寻找特定颜色（来自接受按钮的绿色像素或来自取消按钮的黄色像素，或者更好的组合），然后计算输入字段的位置

# ios - 在 Storyboard、Xcode 中向 UISplitViewController 添加视图

> ID：10136118
> 
> 赞同：0
> 
> 时间：2012-04-13T06:17:16.227
> 
> 标签：ios, xcode, storyboard, uisplitviewcontroller, uisplitview

在我的应用程序中，我有一个 UISplitView，但在加载之前，我需要显示一个页面，用户可以在其中输入一些详细信息，然后单击确定以显示 spitView。我曾尝试从右侧的对象库中拖动视图控制器，但这会产生问题。请告诉我正确的方法来处理我正在尝试做的事情，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T22:04:56.907

我会让 splitview 呈现收集用户数据的 viewController。以模态方式呈现它，然后在他们输入数据后将其关闭，拆分视图将为您提供。

# jquery - jplayer-preload 问题

> ID：10136119
> 
> 赞同：0
> 
> 时间：2012-04-13T06:17:17.147
> 
> 标签：jquery, html, jplayer

需要紧急帮助..plz我正在使用html 5 jplayer并通过递归方法播放音频每件事都在进行并且音频正在播放。但是在加载新音频时会有延迟我希望通过预加载下一个音频来消除音频之间的延迟任何帮助都非常感谢感谢
这是我在递归中所做的

```
$("#jquery_jplayer_1").jPlayer("destroy");
if(val > 1)
            {

            $("#content #suraname").remove(); 
            $("#content #bismillah").remove(); 
            $("#jquery_jplayer_1").jPlayer({ready: function () {$("#jquery_jplayer_1").jPlayer("setMedia", {mp3: "http://www.cityislam.com/Audio/Script/"+qariName+"/"+value_xml_audio+"-"+val_xml+".mp3"});
                                                                $("#jquery_jplayer_1").jPlayer("play");}  })
            $("#jquery_jplayer_1").jPlayer( "option", "cssSelector");

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:54:00.677

您需要实例化两个单独的 jPlayers 实例，都使用`preload: auto`set。`ended`然后设置第二个 jPlayer 在第一个事件中开始播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:22:22.920

来自[官方文档](http://jplayer.org/latest/developer-guide/#jPlayer-option-preload)：

> jPlayer 构造函数选项 jPlayer({preload) 用于控制 jPlayer 何时开始下载新媒体。当预加载选项为“元数据”时，某些浏览器将开始下载整个媒体。其他人将要求使用“自动”。确保下载不会自动开始的唯一方法是使用预加载选项“无”。请记住，媒体可能无法下载，因为它取决于您使用的浏览器。移动浏览器（例如 iOS 4.2 上的 Mobile Safari）在下载或播放任何媒体之前需要一个手势。即，用户必须第一次按下按钮来启动加载或播放操作。

# qt - 如果 QScrollArea 衍生物是从 .ui 文件创建的，则它是空的

> ID：10136126
> 
> 赞同：2
> 
> 时间：2012-04-13T06:18:16.443
> 
> 标签：qt, qscrollarea

考虑以下简单示例：

**面积.hh**

```
#pragma once

class Area;

#include <QScrollArea>

class Area : public QScrollArea {

    Q_OBJECT

public:

    Area (QWidget *_parent = 0);
}; 
```

**区域.cc**

```
#include "main.hh"
#include "Area.hh"

#include <QLabel>

Area::Area (QWidget *_parent) :
    QScrollArea (_parent)
{
    QLabel *label = new QLabel ("Show me please");
    setWidget (label);
} 
```

此滚动区域应在其中显示一个标签。如果您只是创建一个 Area 对象并像这样显示它，它会做得很好：

```
Area *area = new Area();
area->show(); 
```

但是，如果您`QScrollArea`使用 Qt Creator 添加一个并将其提升到`Area`类，那么它内部什么都没有显示，也没有滚动条。我该怎么做才能正确显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:23:45.810

Qt Designer 在 中添加一个空小部件`QScrollArea`，覆盖你的。

为防止这种情况，请使用 base`QWidget`而不是 a `QScrollArea`，并将该小部件提升为`Area`类。Qt 的 Ui 编译器不会将其视为 a `QScrollArea`，因此它不会再生成对的调用`setWidget`。

# android - Android，自定义视图不会填满画廊中的屏幕

> ID：10136127
> 
> 赞同：0
> 
> 时间：2012-04-13T06:18:16.990
> 
> 标签：android, gallery, android-viewpager

我想显示一个自定义视图，由垂直 LinearLayout 中的 ImageView 上方的 TextView 组成，在画廊中一次一个。

**问题是我的自定义视图没有填满屏幕。我可以看到侧面的其他观点的一部分，我不想要这个问题。**

这是我的自定义视图的 xml：**gallery_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gallery_item_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
>
    <TextView
        android:id="@+id/gallery_item_cardname"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textSize="20dp"
        android:textStyle="bold"
        android:text="@string/contrebandiers_lvl1"
        android:textColor="@android:color/darker_gray"
    />
    <ImageView
        android:id="@+id/gallery_item_cardimg"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="centerInside"
        android:contentDescription="@string/app_name"
        android:src="@drawable/contrebandiers_lvl1"
    />
</LinearLayout> 
```

这是我的适配器的 getVew 方法的代码：**GTRoundDeckAdapter**

```
public View getView(int position, View convertView, ViewGroup parent)
{
    GalleryItem galleryItem;

    if(convertView == null)
    {
        galleryItem = new GalleryItem();
        convertView = mInflater.inflate(R.layout.gallery_item, null);
        galleryItem.cardName = (TextView) convertView.findViewById(R.id.gallery_item_cardname);
        galleryItem.cardImg = (ImageView) convertView.findViewById(R.id.gallery_item_cardimg);
        convertView.setTag(galleryItem);
    }
    else
    {
        galleryItem = (GalleryItem) convertView.getTag();
    }

    GTCard gtCard = (GTCard) mRoundDeck.get(position);
    galleryItem.cardName.setText(gtCard.getNameId());
    galleryItem.cardImg.setImageResource(gtCard.getImgId());

    return convertView;
} 
```

我感谢你的帮助。

塞缪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:26:20.487

您应该同时使用 textview 和 imageview fillparent 的宽度。然后它将填满画廊的屏幕...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:27:44.323

我建议您使用 ViewPager 而不是 Gallery。以我个人的经验，我发现 Gallery 有点问题。如果您的要求是一次只显示一个视图，那么 ViewPager（它可以让您左右滑动以逐个浏览）应该适合您的需求。

您需要包含 Android 支持包才能使用 ViewPager。

支持包链接：http: [//developer.android.com/sdk/compatibility-library.html](http://developer.android.com/sdk/compatibility-library.html) 关于如何使用 ViewPager 的链接：http: [//blog.stylingandroid.com/archives/537](http://blog.stylingandroid.com/archives/537)

# django - 在 Django 启动时覆盖模块方法

> ID：10136128
> 
> 赞同：1
> 
> 时间：2012-04-13T06:18:19.720
> 
> 标签：django, python-module, django-middleware

我使用`django.contrib.messages`模块来创建刷新消息。这些消息可以显示在页面上的不同块中，取决于额外的标签：

```
messages.error(request, 'Error message', extra_tags='form') 
```

我有名为“全局”的默认标签，如果没有设置额外标签，我需要将其添加到新消息中。所以我写了中间件来包装`django.contrib.messages.add_message()`应用程序启动的方法：

```
class Initialization:
    def __init__(self):
        self.init_messages()
        raise MiddlewareNotUsed

    def init_messages(self):
        add_message_method = messages.add_message
        def add_message_wrapper(request, level, message, extra_tags='', fail_silently=False):
            if not extra_tags:
                extra_tags = 'global'
            add_message_method(request, level, message, extra_tags, fail_silently)
        messages.add_message = add_message_wrapper 
```

我看到`init_messages()`调用了该方法，但是当我调用 时`django.contrib.messages.add_message()`，它没有用`add_message_wrapper()`.

我的失败在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:17:37.697

难道你不能只是将“启动代码”添加到`settings.py`或`views.py`代替吗？

如果您所做的只是在为空`"global"`时添加默认值`extra_tags`，您也可以在呈现消息时在页面模板中执行此操作：

```
{% if not message_obj.tags %}
    // Use "global"
{% else %}
    // Use {{message_obj.tags}}
{% endif %} 
```

这也可以在您的视图代码中完成：

```
storage = messages.get_messages(request)
for message in storage:
    if not message.tags:
        message.tags = "global"
storage.used = False 
```

有关更多信息，请参阅 Django 文档[https://docs.djangoproject.com/en/dev/ref/contrib/messages/#expiration-of-messages](https://docs.djangoproject.com/en/dev/ref/contrib/messages/#expiration-of-messages)

# objective-c - Cocoa - XML 错误

> ID：10136144
> 
> 赞同：0
> 
> 时间：2012-04-13T06:19:43.777
> 
> 标签：objective-c, xml, cocoa

我在将 XML 写入文件时遇到了一些问题。我正在尝试创建一个包含一些元素的树，但是我得到的错误非常令人困惑，至少对我而言。

下面是我得到的错误的图像.. 任何人都可以阐明它们吗？

![xml 错误](../Images/6ba2ee04cce84cc91811a16a0187a045.png)

不确定图像是否会显示得足够大。如果不是，这里是图像的链接：http: [//i.imgur.com/o84ev.png](https://i.imgur.com/o84ev.png)

除了最后一个（我没有声明要返回任何东西），其他错误和警告有什么问题？

这是文本中的代码：

```
-(NSData *)constructXMLRequest
{   
    NSXMLElement *root = [[NSXMLElement alloc] initWithName:@"items"];

    NSXMLElement *item0 = [[NSXMLElement alloc] initWithName:@"item"];

        [item0 addAttribute:[NSXMLNode attributeWithName:@"id" stringValue:@"0"]];

     NSXMLElement *object = [[NSXMLElement alloc] initWithName:@"object"];
     [object setStringValue:@"object 1"];
     NSXMLElement *description [[NSXMLElement alloc] initWithName:@"description"];
     [object setStringValue:@"description 1"];

     [item0 addChild:object];
     [item0 addChild:description];

     [root addChild:item0];
} 
```

错误：

1.  错误：“initWithName”之前的预期“]”
2.  错误：“描述”未声明（在此函数中首次使用）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:30:12.923

initWithName 之前的“Expected "]" 似乎是第一个错误。您错过了该行中的分配。

```
NSXMLElement *description = [[NSXMLElement alloc] initWithName:@"description"]; 
```

第二个错误将自动消失。

# javascript - 更改脚本以在 div 中输入文本，而不是 textarea

> ID：10136149
> 
> 赞同：0
> 
> 时间：2012-04-13T06:20:22.063
> 
> 标签：javascript, html-table, textarea

我正在与一位开发人员一起工作，该开发人员正在处理超出我能力范围的编码；主要是 PHP 和更复杂的 Javascript（我只擅长*jQuery*）。

开发人员一直在做的部分工作涉及检查数据库并将结果动态地输入页面。问题是当前这些结果被输入到 a`<textarea>`中，这并不理想，因为这意味着如果它是只读的，则如果用户改变主意，则无法删除结果。如果它不是只读的，用户可以在 textarea 中输入他们喜欢的任何文本，从而使页面无法使用。此外，我无法将任何 CSS 应用于 textarea 中的结果。

此外，开发人员正在使用表格，这是我最讨厌的地方之一。

我希望`<textarea>`为找到的每个数据库结果`<div>`包含一个`<div>`。

开发人员目前离开几周，我希望尽快完成这项工作。我尝试将“td”简单地更改为“div”，但显然这不起作用。

我真的很感激一些帮助。我已经包含了下面的代码。不幸的是，我无法访问实时/测试站点（超出我的控制范围）并为此道歉。

```
if(answer)
{

var newRow = document.getElementById("target_table");
var Row = newRow.rows.length;   
var row1 = newRow.insertRow(Row);
var index=row1.rowIndex;
var td1= document.createElement("TD")
var td2= document.createElement("TD")
td2.innerHTML =  "

<INPUT TYPE='hidden' NAME='course"+Row+"' id='course"+Row+"' value='"+answer+"'>
<INPUT TYPE='hidden' NAME='ary"+Row+"' id='ary"+Row+"'>
<INPUT TYPE='hidden' NAME='Dary"+Row+"' id='Dary"+Row+"'>
<p class='courseName'>"+answer+"</p>
<div id='boxRw"+Row+"' class='boxyHolder'>

    <TABLE border=1 cellspacing=2>
        <TR>
            <TD>
                <INPUT TYPE='button' name='Add a favourite to this course' value='Add a favourite to this course' onclick='javascript: window.open(\"<?=$path?>add-my-favourites/"+Row+"\",\"mywindow\",\"left=550,top=200,width=400,height=350,toolbar=1,resizable=0\");'>
            </TD>
        </TR>
        <tr>
            <td colspan=2>
                <TABLE border=1>
                    <TR>
                        <TD valign=top>Favourites:</TD>
                        <TD>
                            <TEXTAREA class='fav-box' NAME='reps"+Row+"' id='reps"+Row+"' ROWS=4 COLS=45></TEXTAREA>
                            <input class='fav-box' TYPE='hidden' NAME='repsId"+Row+"' id='repsId"+Row+"' value=''>
                        </TD>
                    </TR>
                </TABLE>
            </td>
        </tr>

    </TABLE>

</div>"; 

row1.appendChild(td1);
row1.appendChild(td2);

document.getElementById("h").value=Row;
}

function setVal(){
    var r = "<?=$_GET['hVal']?>";
    var y = "reps"+r;

    var y1 = "repsId"+r;

    window.opener.document.getElementById(y).value+=document.frm.favourites.value+',';
    window.opener.document.getElementById(y1).value+=document.frm.recp_listId.value+',';
    window.close();
} 
```

编辑：我相信这些是我需要改变的行：

```
window.opener.document.getElementById(y).value+=document.frm.recipes.value+',';             

window.opener.document.getElementById(y1).value+=document.frm.recp_listId.value+','; 
```

我认为问题在于这些行正在将价值添加到当前的`<textarea>`. 当我将 textareas 更改为 div 时，这些值不会应用于 div。所以我需要更改代码，以便将结果作为文本输入到 div 中，而不是值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:45:03.893

如果您使用 a `div`，请使用它的`textContent`属性，而不是`value`像您用于表单控件（如`textarea`and ）那样`input`。您没有收到任何错误，因为您最终`value`在`div`.

* * *

代码片段#1

```
var div = document.createElement('div');
div.textContent = document.frm.recipes.valu‌​e;
window.opener.document.getElementById(y).appendChild(div); 
```

# plugins - 在 CRM 2011 中升级自定义工作流活动程序集时出错

> ID：10136151
> 
> 赞同：4
> 
> 时间：2012-04-13T06:20:33.013
> 
> 标签：plugins, workflow, dynamics-crm-2011

我有一个由两个工作流引用的自定义工作流活动程序集。该程序集当前的版本为 1.0.builddate.revision。

我已经重新编译了程序集的更新。现在是 1.1.builddate.revision。

根据我在[此处](http://msdn.microsoft.com/en-us/library/gg328011.aspx)找到的信息，我相信由于我正在更改程序集版本中的次要编号，因此需要执行自定义工作流活动的升级（而不是更新）。

我对升级的理解本质上是我应该只注册一个新程序集，然后将流程工作流指向自定义活动的新版本。

但是，当我尝试（以编程方式）注册程序集时，我收到一个 FaultException，仅说明“无法插入重复键”。

```
System.ServiceModel.FaultException<Microsoft.Xrm.Sdk.OrganizationServiceFault> was caught
  Message=Cannot insert duplicate key.
  Source=mscorlib
  Action=http://schemas.microsoft.com/xrm/2011/Contracts/Services/IOrganizationService/CreateOrganizationServiceFaultFault
  StackTrace:
    Server stack trace: 
       at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at Microsoft.Xrm.Sdk.IOrganizationService.Create(Entity entity)
       at Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.CreateCore(Entity entity)
       at Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.Create(Entity entity)
       at PluginRegistrationTool.XrmService.Create(Entity entity) in C:\Workspaces\xxxxxx\Lib\PluginRegistrationTool\PluginRegistrationTool\XrmService.cs:line 390
  InnerException: 
```

我只能猜测这个故障指的是什么键。起初我以为我可能正在尝试上传程序集的旧副本（可能仍然是 v1.0.xx），但我可以通过 Intellisense 检查我实际上正在上传比现有版本更新的程序集在我尝试注册的组织中。关于自定义活动程序集的所有内容都是相同的，除了 AssemblyVersion 编号。

我在这个过程中没有得到什么？我不需要知道如何更新工作流以指向新程序集...我只想知道如何将更新的自定义工作流活动程序集成功上传到 CRM。

尝试升级自定义工作流活动程序集的代码是[此](http://pluginregcrm2011.codeplex.com/)版本的略微修改版本。该 codeplex 站点上的 PluginRegistrationTool 是 CRM SDK 附带的 PluginRegistrationTool 的修改版本。这个版本将 PluginRegistrationTool 变成了我在构建过程中使用的命令行实用程序。

通过比较 CRM 中程序集的 AssemblyVersion 编号的主要/次要部分与我尝试上传的程序集的版本号，我修改了[此](http://pluginregcrm2011.codeplex.com/SourceControl/changeset/view/5989#93502)文件中的 Register 函数以处理更新与升级方案。我可以看到它正在尝试升级（创建一个新程序集），但随后我得到了我前面提到的异常

`organizationServiceProxy.Create(entity);`

[或此](http://pluginregcrm2011.codeplex.com/SourceControl/changeset/view/5989#93527)文件中代码的第 390 行。

需要注意的一件重要事情是，我可以使用 SDK 中的 GUI PluginRegistrationTool 执行升级，而不是使用该工具的命令行版本。此外，如果我尝试在具有旧版本程序集的托管解决方案之上导入具有“升级”版本的自定义工作流活动程序集的托管解决方案，我会收到相同的错误消息。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T21:56:13.720

我通过传入现有的程序集 assemblyid 来创建新程序集。当我调用`proxy.Create()`. 一旦我为程序集实体的 assemblyid 属性分配了一个新的 Guid，`proxy.Create()`函数调用就可以正常工作了。

感谢您对此的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:58:17.253

当我忘记用密钥对程序集进行签名时，我已经看到了这个错误。转到项目属性并确保它已签名。如果没有，请取消注册程序集，然后注册已签名的程序集，更新应该从那里开始。

# ruby-on-rails - 使徽标可互换。我应该通过 scss.erb 还是在应用程序布局中执行此操作？

> ID：10136158
> 
> 赞同：0
> 
> 时间：2012-04-13T06:21:09.523
> 
> 标签：ruby-on-rails, ruby, sass, carrierwave

我正在尝试使我的 rails 应用程序的徽标可互换，请参阅[此处的上一篇文章](https://stackoverflow.com/questions/10116702/how-to-make-logo-interchangeable-ruby-on-rails)

我有一个徽标模型，它具有以下字段名称：字符串、图像：字符串、默认值：布尔值

我正在使用 carrierwave gem 将图像上传到 image:string 列。
应用程序/模型/logo.rb

```
class Logo < ActiveRecord::Base
mount_uploader :image, LogoUploader
scope :default, where(default: true)

def falsify_all_others
  Logo.where('id != ?', self.id).each do |item|
    item.default = false
    item.save
    end
  end
end 
```

我有一个徽标控制器，在这里可以看到
app/controllers/logos_controller.rb

```
class LogosController < ApplicationController
def new
  @logo= Logo.new
end

def create
  @logo = Logo.new(params[:logo])
  if @logo.save
    @logo.falsify_all_others
    redirect_to logos_path, :notice => "Logo has been uploaded successfully"
  else
  render "new"
  end
end

def edit
  @logo = Logo.find(params[:id]) 
end

def destroy
  @logo = Logo.find(params[:id])
  @logo.destroy
  flash[:notice] = "Logo has been obliterated!"
  redirect_to logos_path
end

def update
  @logo = Logo.find(params[:id])

  if @logo.update_attributes(params[:logo])
    @logo.falsify_all_others
    flash[:notice] = "Logo has been changed successfully!"
    redirect_to logos_path
  else 
    flash[:alert] = "Logo has not been updated."
    render :action => "edit"
  end
end

def show
  @logo = Logo.find(params[:id])
end

def index
  @logos = Logo.all
end 
end 
```

和我的应用程序控制器

应用程序/控制器/application_controller.rb

```
before_filter :get_logo

def get_logo
  @logo_default = Logo.default
end 
```

因此，一旦他们通过carrierwave创建/上传了一些图像，我就会像这样显示徽标：app/views/logos/show.html.erb

```
<%= image_tag @logo.image_url.to_s %> 
```

我想添加默认徽标（通过我的徽标范围找到）以显示在主页上。现在，它是通过此代码通过 app/assets/stylesheets/styles.scss.erb 完成的

```
section#header {
height: 220px;
position: relative;
h1 {
    background-image: url('<%= asset_path 'logo.png' %>');
    position: absolute;
    width: 412px;
    height: 188px;
    z-index: 999;
} 
```

所以我的问题是：我是否需要将显示徽标的代码从 scss.erb 中提取并添加到 app/views/layouts/application.html.erb，或者我可以在 scss 中更改它吗？比如用 image_tag 替换asset_path，或者类似的东西？如果您需要更多信息/代码，请告诉我，我很乐意提供...提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:58:42.487

我建议不要将它放在 scss 中，因为您可能希望在生产中预编译所有这些静态内容。

# java - 如何在 scriptlet 代码中使用 javascript 变量。

> ID：10136162
> 
> 赞同：2
> 
> 时间：2012-04-13T06:21:13.133
> 
> 标签：java, javascript, jsp, servlets, scriptlet

我有一个变量 v ，它在任何时间点都包含一个字符串类型的值。现在我想在数据库连接代码中使用这些变量 v.. 在 Where 子句中的 SQL 查询中，类似这样的东西`"Where F_Name = "v"";`。但由于代码在 javascript 或`<script>`标签中。我如何`<%%>`在我的数据库连接代码所在的脚本中使用它。我声明我的 var v 的代码部分是 ::

```
dojo.connect(gridemp, "onRowDblClick", gridemp, function(){
                var items = gridemp.selection.getSelected();

            //  do something with the selected items
                dojo.forEach(items, function(item){
                    var v = gridemp.store.getValue(item,"ID"); 
```

现在，一旦我在 vi 中获得一个选定的值，就想在查询中使用它。这个怎么做 。? 谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:26:59.847

Javascript 在客户端播放，其中 scriptlet 是服务器端的东西，

您需要将字符串设置为某个隐藏字段，并向服务器发出表单 post/ajax 请求，服务器在该服务器处理来自请求的数据

# java - 剪贴板时出现 Java OutOfMemory 异常

> ID：10136164
> 
> 赞同：2
> 
> 时间：2012-04-13T06:21:38.413
> 
> 标签：java, clipboard

当我尝试使用以下内容将一些文本内容设置到我们心爱的窗口的剪贴板时

片段，它可以正常工作到大约 10-15MB。但超出该大小，它会引发错误消息

显示在最后。我们如何将 30+ MB 的 utf 文本设置到剪贴板？

代码：

```
Clipboard cb = Toolkit.getDefaultToolkit().getSystemClipboard();
File tmp = new File("c:\\web\\a.txt");   //This file's size > 38MB.
String s = readFileAsString(tmp);
cb.setContents(new StringSelection(s), null); 
```

错误：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.lang.AbstractStringBuilder.<init>(AbstractStringBuilder.java:45)
    at java.lang.StringBuffer.<init>(StringBuffer.java:91)
    at sun.awt.datatransfer.DataTransferer.translateTransferable(DataTransferer.java:1001)
    at sun.awt.windows.WDataTransferer.translateTransferable(WDataTransferer.java:163)
    at sun.awt.windows.WClipboard.setContentsNative(WClipboard.java:73)
    at sun.awt.datatransfer.SunClipboard.setContents(SunClipboard.java:93)
    at com.webform.XMLReader.main(XMLReader.java:67)
Java Result: 1
BUILD SUCCESSFUL (total time: 1 second) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:24:39.473

尝试更改您的堆大小.. [这是](http://viralpatel.net/blogs/2009/01/jvm-java-increase-heap-size-setting-heap-size-jvm-heap.html)一个包含一些信息的链接，您可以 google 获取更多信息。

# java - 支持细胞选择的线条

> ID：10136173
> 
> 赞同：0
> 
> 时间：2012-04-13T06:22:36.167
> 
> 标签：java, jtable, selection, cell

我正在使用 Netbeans RCP 并希望使 jtable 中的单元格选择更加明显。因此我喜欢画如下红线：

见截图：http: [//i.stack.imgur.com/WRRyq.png](http://i.stack.imgur.com/WRRyq.png)

我只使用 GIMP 在屏幕截图上画线 ;-)

When selection increases and more cells are selected, the red lines should be the borders of the selection and should mark the whole width in the columnheader and the whole height in the row header.

我的表会更大，固定列数约为 35，行数未定义。有没有人尝试过这样的事情？

提前非常感谢！- 迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:41:24.393

这些可能会引导您获得有用的信息。抱歉，我无法为您的情况提供确切的答案。

大纲视图是一个大胖子JTable，所以基本上搜索父组件的信息会给你更多关于内部事物的信息。

`org.openide.explorer.view.OutlineView outlineView;`

**要启用行选择：** `outlineView.getOutline().setRowSelectionAllowed(true);`

**定义行选择模式：** `outlineView.getOutline().setSelectionMode(ListSelectionModel.SINGLE_SELECTION);`

**要禁用单元格选择：** `outlineView.getOutline().setCellSelectionEnabled(false);`

# android - 在 ListView 中使用 CheckedTextView 时无法选择正确的行

> ID：10136175
> 
> 赞同：3
> 
> 时间：2012-04-13T06:22:47.953
> 
> 标签：android, android-layout, checkedtextview

```
SimpleAdapter adapter = new SimpleAdapter(this, list, R.layout.contact_item, new String[] { "name" }, new int[] { R.id.name });
listView.setAdapter(adapter);
listView.setItemsCanFocus(false);
listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        CheckedTextView checkedTextView = (CheckedTextView) view.findViewById(R.id.name);
        checkedTextView.toggle();
        System.out.println(checkedTextView.getText().toString());
    }
}); 
```

当我单击ListView中的第一项时，CheckedTextView会选择ListView中的最后一项，并且System.out是正确的。我不知道为什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:40:23.763

`View``ListView`在实例的实际行中使用的 s经常被回收：通常显示层将创建与`View`可见行一样多的对象，然后循环遍历它们。选择使用嵌入的行`View`通常很棘手：当您单击行中的特定视图时，文本可能是正确的，但系统可能不知道要选择哪一行。尝试使用位置调用`setSelection`以强制选择正确的行。

编辑：不保证，但尝试这样做，看看它是否有效。

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        CheckedTextView checkedTextView = (CheckedTextView) view.findViewById(R.id.name);
        checkedTextView.toggle();
        System.out.println(checkedTextView.getText().toString());
        getListView().setSelection(position);
    }
}); 
```

# bash - 在 bash 中使用 awk

> ID：10136178
> 
> 赞同：2
> 
> 时间：2012-04-13T06:23:22.207
> 
> 标签：bash, awk

我正在阅读`ldd`，并从中提取了以下代码：

```
major=$(awk "\\$2==\"$module\" {print \\$1}" /proc/devices) 
```

我知道这一个班轮在做什么，我不知道为什么在其中`\`使用转义字符。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:45:57.763

shell 变量`$module`必须插入到`awk`脚本中，所以程序不能用单引号。这意味着必须用反斜杠保护外壳特殊的任何字符。

如果作者愿意，代码可以这样写：

```
major=$(awk -v module=$module '$2 == module { print $1 }' /proc/devices) 
```

测试原始代码（修复`= =`到后`==`，由于双反斜杠，我得到错误；它们不是必需的。单反斜杠就足够了，如：

```
major=$(awk "\$2==\"$module\" {print \$1}" /proc/devices) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:28:05.960

此命令行的作者应该使用单引号 (') 而不是双引号 (")。如果不这样做，他需要引用 Shell 特殊字符，以便将它们传递给 awk-command。

# cuda - 如何使用 CUDA 加速 C++ 代码

> ID：10136179
> 
> 赞同：-2
> 
> 时间：2012-04-13T06:23:48.893
> 
> 标签：cuda

我在 Visual Studio 10 中使用 C++、OpenGL 完成了我的物理模拟项目。后来我使用 OpenMP 进行 CPU 并行化。现在我想将我的 C++ 代码加速到 CUDA，以便获得更高的性能。是否可以将我的代码转换为 CUDA 或任何 GPU 设备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:30:41.803

Cuda 和 C++ 是不同的编程语言（即使它们在语法上看起来相似），具有不同的编程范式。

您必须重新编码，甚至可能重新设计您的项目以利用 Cuda（或 OpenCL）。

实际上，您需要定义可能利用 GPGPU 的数值内核，然后重新编码这些内核（在 Cuda 或 OpenCL 中）；您还必须编写一些胶水代码以使所有这些一起工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:21:40.250

您可以确定项目的哪些部分可以并行化，然后在 Cuda 中重新实现这些部分。你可以看看[Fast N-Body Simulation with CUDA](https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch31.html)。

# sql - 如何在公用表中通过递归查询获得第二个父级

> ID：10136180
> 
> 赞同：4
> 
> 时间：2012-04-13T06:23:49.847
> 
> 标签：sql, sql-server

我正在使用 SQL Server 2008。我有一个这样的表：

```
UnitId ParentId  UnitName
---------------------------
1        0       FirstUnit
2        1       SecondUnit One  
3        1       SecondUnit Two
4        3           B
5        2           C
6        4           D
7        6           E
8        5           F 
```

我想获得记录的第二个父母。例如：

如果我选择等于 8 的单元 id，它会给我带来等于 2 的单元 id。它需要是 SecondUnit One。或者如果我选择等于 7 的单元 id，它会给我带来等于 3 的单元 id。它需要是 SecondUnit 2。

如何以这种方式编写 SQL 查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T06:30:27.807

我花了一段时间，但这里是:)

```
with tmp as (
  select unitId, parentId, unitName, 0 as iteration
  from t
  where unitId = 7
  union all
  select parent.unitId, parent.parentId, parent.unitName, child.iteration + 1
  from tmp child
  join t parent on child.parentId = parent.unitId
  where parent.parentId != 0
)
select top 1 unitId, parentId, unitName from tmp
order by iteration desc 
```

这也是一个可以玩的[小提琴。](http://sqlfiddle.com/#!3/c213f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:28:51.163

```
SELECT t.*, tParent1.UnitId [FirstParent], tParent2.UnitId [SecondParent]
FROM Table t
    LEFT JOIN Table tParent1 ON t.ParentId = tParent1.UnitId
    LEFT JOIN Table tParent2 ON tParent1.ParentId = tParent2.UnitId
WHERE t.UnitId = <Unit ID search here>
    AND NOT tParent2.UnitId IS NULL 
```

编辑：如果您希望返回结果，即使它们没有第二个父项，也可以省略 WHERE 子句的第二部分。

# android - Android语言的动态变化

> ID：10136181
> 
> 赞同：0
> 
> 时间：2012-04-13T06:24:02.943
> 
> 标签：android

我有一个 android 应用程序作为设备的 UI 工作。我的意思是，当我打开设备时，我没有看到默认的 android 界面，而是看到了我的应用程序。当我更改 Android 语言时，android 的 os 字符串会更改，但我的应用程序字符串不会。它需要重新启动。重新启动后它会改变，但这不是我想要的。因为，该应用程序是我的主应用程序，我必须重新启动所有系统才能重新启动应用程序。如您所见，此应用程序适用于所有系统生命周期。所以我需要它，在它运行时更改它的语言，而无需重新启动。

我怎样才能做到这一点？

请注意：语言环境不适用于我想要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:32:41.407

**在您的onCreate**方法中调用以下命令以选择语言环境字符串中提供的语言。

```
/**
 * Set the default Locale for app
 * @param context context on which the locale will be implemented
 * @param locale new locale for example, <b>sv</b> for Swedish or <b>en</b> for English
 */
public static void setDefaultLocale(Context context, String locale) {
    Locale locJa = new Locale(locale.trim());
    Locale.setDefault(locJa);

    Configuration config = new Configuration();
    config.locale = locJa;

    context.getResources().updateConfiguration(config, context.getResources().getDisplayMetrics());

    locJa = null;
    config = null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-20T11:33:53.103

您可以使用此功能更改语言..

```
 public void changeLang(String lang) {
    if (lang.equalsIgnoreCase(""))
        return;

    String languageToLoad  =lang; // your language
    Locale locale = new Locale(languageToLoad);
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config,
            getBaseContext().getResources().getDisplayMetrics());
    DebugLog.d("Selectedlang"+lang);

} 
```

# c# - 使用存储在文件中的变量来触发事件

> ID：10136182
> 
> 赞同：1
> 
> 时间：2012-04-13T06:24:03.340
> 
> 标签：c#, windows, file

我对 C# 非常陌生，对文件的写入和读取非常陌生。无论如何，我正在制作一个事件序列，当定时器达到一个数字时将播放事件，同样在该文件中，定时器也将根据存储在文件中的数字调整其速度。我将如何处理，这是解码时该文件的文本。

```
 [EventSequence]
{
    DisplayName "Default"
    OFFset = 0
    Resolution = 192

}
 [SyncSequence]
{
0 = B 180000
}
 [EventsNotes]
{
0 = E "section Intro"
15168 = E "Note1"
21120 = E "Note2"
26880 = E "Note3"
38976 = E "Note4"
44928 = E "Note5"
}
 [Events]
{
192 = N 0 0
240 = N 0 0
288 = N 0 0
336 = N 0 0
384 = N 4 0
432 = N 0 0
480 = N 0 0
528 = N 0 0
576 = N 3 0
624 = N 0 0
672 = N 0 0
720 = N 0 0
768 = N 4 0
816 = N 0 0
864 = N 0 0
912 = N 0 0
960 = N 2 0
1008 = N 0 0
1056 = N 0 0
1104 = N 0 0
1152 = N 1 0
 } 
```

计时器将非常快，但取决于 Sync 下的值。大值是触发事件的时间，N 0 0 等是事件。“事件说明”的类似设置。其余的只是基本信息。高级中的任何帮助或建议都将受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:06:21.527

我为您的情况制作了此功能：

```
public List<string> GetFileKeyValues(string fileName, string key)
        {
            List<string> res = new List<string>();
            try
            {
                if (!string.IsNullOrEmpty(key))
                {
                    using (System.IO.StreamReader tr = new System.IO.StreamReader(fileName))
                    {
                        bool keyFound = false;
                        while (!tr.EndOfStream)
                        {
                            string s = tr.ReadLine().ToLower();
                            if (s.Contains(key.ToLower())) keyFound = true;
                            else
                            {
                                if (keyFound)
                                {
                                    if (!s.Contains("{") && !s.Contains("}")) res.Add(s);
                                    if (s.Contains("}")) break;
                                }
                            }
                        }
                        tr.Close();
                    }
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            return res;
        } 
```

**用法**假设我们想要获取`[SyncSequence]`值：

```
List<string> res = GetFileKeyValues(@"C:\t.txt", "[SyncSequence]");
if(res != null && res.Count > 0) 
{
  //Do Something with res[0], it will return 0 = B 180000
  //So you split it by "=" to get B 180000 or any thing you want... 
} 
```

# c# - .NET Windows 服务在 ntdll.dll 中崩溃

> ID：10136183
> 
> 赞同：5
> 
> 时间：2012-04-13T06:24:29.887
> 
> 标签：c#, windows, windows-services, crash

我有一个用 C# 编写的 Windows 服务。它在调用第 3 方 COM 组件时崩溃。该问题仅出现在 Windows 7（x86 和 x64）上。当我在 Windows 7（x86 和 x64）上运行与控制台应用程序相同的服务代码时，它运行良好。

当我在 Windows 2003 上运行相同的服务时，它也可以正常工作。我认为这可能与UAC有关。我正在寻找有关调试此服务的建议/指导，以确定导致问题的原因。对 ntdll.dll 使用调试符号？在事件日志的信息下方。

```
Event ID: 1000, Level: Error
Faulting application name: ServiceHost.exe, version: 1.0.0.0, time stamp: 0x4f87bc9a
Faulting module name: ntdll.dll, version: 6.1.7601.17725, time stamp: 0x4ec49b60
Exception code: 0xc0000005
Fault offset: 0x0002bcbb
Faulting process id: 0x151c
Faulting application start time: 0x01cd1939c9017b2d
Faulting application path: E:\ServiceHost\bin\Debug\ServiceHost.exe
Faulting module path: C:\Windows\SYSTEM32\ntdll.dll
Report Id: 08da6aa3-852d-11e1-a889-00155d016f32 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T06:40:14.203

作为一个疯狂的猜测，你可能会犯[Session 0 Isolation](http://msdn.microsoft.com/en-us/library/bb756986.aspx)：

> 在 Windows XP®、Windows Server® 2003 和早期版本的 Windows® 操作系统中，所有服务都在与登录控制台的第一个用户相同的会话中运行。此会话称为会话 0。在会话 0 中同时运行服务和用户应用程序会带来安全风险，因为服务以提升的特权运行，因此是寻求提升自身特权级别的方法的恶意代理的目标。

这通常会导致服务出现问题，例如，某些东西试图创建 UI。

处理此问题的最简单方法是与第 3 方组件的供应商交谈，并确保它支持与服务一起使用*。*但是，如果供应商不再存在，这可能是不可能的。

*如果在服务运行时*出现问题，则可以将调试器附加到它并在错误发生时捕获转储（例如，使用 windows 调试工具中的 adplus 之类的东西）。如果问题是在服务启动期间发生的，诊断可能会比较棘手。

*您*确实需要隔离代码中导致错误的最后一个函数调用，然后尝试从那里进行诊断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:30:00.237

尝试将服务帐户更改为任何其他帐户。喜欢`Local System`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:51:26.677

第 3 方 COM 组件正在使用一些 hack（一些释放的 API）来提高其性能，并且`OS`在 Windows 的下一个版本中，界面已更改，恕不另行通知。

这是早期 Windows（Norton，Office ......）的旧策略，用于直接调用内核和......

# iphone - Facebook Share 使用 shareKit 只显示黑屏？

> ID：10136188
> 
> 赞同：6
> 
> 时间：2012-04-13T06:24:40.580
> 
> 标签：iphone, facebook, sharekit

我正在使用 shareKit 进行 Facebook/twitter 共享，当单击 facebookSharing 按钮时，它会显示登录页面，但在首次登录后它只显示白屏并且什么也不做。我在 SHKConfig.h 上做了一些编辑并输入了 facebookKey 和 facebookSecret。

```
#define SHKFacebookUseSessionProxy  NO 
#define SHKFacebookKey          @""
#define SHKFacebookSecret       @""
#define SHKFacebookSessionProxyURL  @"?" 
```

加载时，它只显示白屏...

第二个问题：实际上我应该为 SHKFacebookSessionProxyURL 字段提供什么，这是我的第一个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:56:40.683

没有人给我正确的答案，我找到了另外两个添加共享功能的解决方案，试试这个

[http://support.addthis.com/customer/portal/articles/381270-addthis-for-ios-quick-start-guide#.T5Yz-1FRr9A](http://support.addthis.com/customer/portal/articles/381270-addthis-for-ios-quick-start-guide#.T5Yz-1FRr9A)

和

[http://socialize.github.com/socialize-sdk-ios/getting_started.html#id2](http://socialize.github.com/socialize-sdk-ios/getting_started.html#id2)

这可能会帮助你

谢谢你，

# android - android中的室内地图

> ID：10136191
> 
> 赞同：0
> 
> 时间：2012-04-13T06:25:13.683
> 
> 标签：android, android-layout, map

我正在尝试创建如下图所示的室内地图。这是可在整个屏幕中滚动/移动的。我不知道创建它的正确方法是什么。这是谷歌室内地图吗？

如何在像这张地图这样的图像上创建按钮？

请建议。

![在此处输入图像描述](../Images/e0baf229110664d0c604f307c1a9f324.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:08:43.713

我建议使用标准图像文件/将图像分解为图块，然后进行自定义`View`以加载地图图像并捕获所有触摸事件以进行滚动和单击检测。

如果您想要可点击的叠加层，您可以采取两种方法：

1.  在源图像中包含按钮，并在单击图像时查找图像中的热点。
2.  在您的图像中创建一个坐标列表以覆盖按钮图形，当检测到点击时，您可以将点击的位置与此列表进行比较（以及小幅误差）。

就我个人而言，我更喜欢第二种方法，并且已经在几个需要带有可点击兴趣点的地图的项目中成功使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:20:37.353

我通过使用 html 创建 Imagemap 并将该 html 嵌入到 WebView 中获得了解决方案。

# java - 将我的输入更改为其他格式

> ID：10136193
> 
> 赞同：3
> 
> 时间：2012-04-13T06:25:25.700
> 
> 标签：java

我恳请您的帮助，因为我被卡住了。我输入了这种格式：

6 <-- 顶点数

0 1 2 <-- 通过边直接链接到顶点 0 的顶点

1 0 3 4

我需要在我的程序中是这样的：

```
int[][] edges = {
   {0,1}, {0,2}, 
   {1,2}, {1,3}, 
   {2,5},
   {3,2}, {3,4},
   {5,4}
}; 
```

我被卡住了，我想我可能不得不处理一个列表？这是我到目前为止所拥有的：

```
public class Part1 {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int k = scanner.nextInt(); // number of vertices
        String[] input = new String[k];
        int[][] edges;
        String[] tokens = new String[k];
        int[] vertices = new int[k];
        int[] integers = new int[k];
        int p = 0;

        for (int i = 0; i < k; i++) {
            vertices[i] = i;
            input[i] = scanner.nextLine();
            tokens = input[i].split("[\\s+]");
            integers[i] = Integer.parseInt(tokens[i].trim());
            for (int j = 0; j < integers.length - 1; j++) {
                edges[p][i] = integers[0];
                edges[p][2] = integers[j];
                p++;

            }
        }
    }
} 
```

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:03:06.643

我会要求您考虑以不同的方式表示您的图表。表示图的传统方式（也是许多基本图算法的便捷方式）是 Vector[]，它是这样声明的列表数组。

```
Vector<Integer> graph = new Vector<Integer>[number_of_vertices]; 
```

访问 graph[i] 将返回包含顶点 i 的邻居的向量。因此，这种数据结构让您可以有效地动态添加边并快速遍历邻居。构建图表的一些示例代码：

```
for (int i = 0; i < k; i++) {
  String line = scanner.nextLine();
  tokens = line.split(" ");
  int from = Integer.parseInt(line[0]);
  for (int j = 1; j < tokens.length; j++) {
    graph[from].add(Integer.parseInt(tokens[j]));
  }
} 
```

编辑：请参阅康德对无法使用通用数组的解决方法的回应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:41:05.127

据我所知，java 不允许使用泛型类型的数组。如何以这种方式修改上面的示例：

```
Map<Integer,Vector<Integer>> graph = new HashMap<Integer, Vector<Integer>>();

for (int i = 0; i < k; i++) {
  String line = scanner.nextLine();
  tokens = line.split(" ");
  int from = Integer.parseInt(line[0]);
  Vector<Integer> = v new Vector<Integer>();
  for (int j = 1; j < tokens.length; j++) {
    v.add(Integer.parseInt(tokens[j]));
  }
  graph.put(from, v);

} 
```

当你想检索你写的价值时：

```
 Vector<Integer> v = graph.get(0); 
```

# c - 结构指针中需要一些说明

> ID：10136196
> 
> 赞同：2
> 
> 时间：2012-04-13T06:26:25.133
> 
> 标签：c, list, pointers, struct

我对以下代码有疑问，

我有一个功能如下，

```
void deleteNode(struct myList ** root)
{
  struct myList *temp;
  temp = *root;
  ...//some conditions here
  *root = *root->link;   //this line gives an error
  *root = temp->link;    //this doesnt give any error
 } 
```

那么这两行有什么区别，对我来说看起来一样..错误是，

```
error #2112: Left operand of '->' has incompatible type 'struct myList * *' 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T06:30:31.853

这里的问题是“->”操作符比“*”操作符绑定得更紧密。所以你的第一句话：

```
// what you have written
*root->link; 
```

正在评估：

```
// what you're getting - bad
*(root->link); 
```

而不是：

```
// what you want - good
(*root)->link; 
```

由于 root 是指向指针的指针，因此 -> 运算符对它没有任何意义，因此会出现错误消息。

# c# - 将数据从表单插入到 Access 数据库

> ID：10136197
> 
> 赞同：1
> 
> 时间：2012-04-13T06:26:27.540
> 
> 标签：c#, ms-access-2007

我在连接访问时遇到问题，然后出现错误找不到文件'C：\ Users \ Geeta \ Desktop \ test1.mdb'。我的代码是：

```
protected void btn_submit_Click(object sender, EventArgs e)
{
    System.Data.OleDb.OleDbConnection conn = new System.Data.OleDb.OleDbConnection();
    // TODO: Modify the connection string and include any
    // additional required properties for your database.
    conn.ConnectionString = (@"Provider=Microsoft.Jet.OLEDB.4.0;Data source= C:\Users\Geeta\Desktop\test1.mdb"); 

    conn.Open();
    string query = "insert into test (First Name,Address,Email,Password) values ('" + txt_fstname.Text + "','" + txt_email.Text + "', '"+txt_pass.Text+"', '"+txt_add.Text+"')";
    OleDbCommand cmd = new OleDbCommand(query,conn);
    cmd.ExecuteNonQuery();
    conn.Close();
    Response.Redirect("Default.aspx");

} 
```

请帮助我。

“谢谢”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:00:53.713

尝试使用以下连接字符串：

```
conn.ConnectionString = (@"Provider=Microsoft.Jet.OLEDB.4.0;Data source=C:\Users\Geeta\Desktop\test1.mdb;"); 
```

评论：

*   = 和数据库之间没有空格
*   数据库路径必须以 ; 结尾

此外：

*   您似乎尝试使用 ASP.NET 访问数据库。请记住，运行网站的用户不一定有编辑数据库的权限。

# datagrid - 没有元素 id 的 dojo 动态数据网格

> ID：10136203
> 
> 赞同：0
> 
> 时间：2012-04-13T06:27:00.557
> 
> 标签：datagrid, dojo

我需要在一个复杂的 RIA 应用程序中即时使用出色的 Dojo DataGrids。问题是我不能使用元素 ID。如何在 javascript 中创建 DataGrids，然后将其插入页面？这是我目前正在做的事情：

```
Backbone.View.extend({
    name: 'checkout',
    template: dojo.cache('plugins.patrons.views.templates', 'actions/checkout.html'),
    el: $('<div>'),
    store: new dojo.store.Memory({data: [{id: 1, "accession": '1000', "title": 'my book'}]}),

    initialize: function(el, data) { this.el = el; this.data = data; },

    render: function()
    {
        dojo.parser.parse(this.el.empty().html(_.template(this.template, this.data, {variable: 'data'}))[0]);
        var grid = new DataGrid({
            store: ObjectStore({objectStore: this.store}),
            structure: [
                {name:"Accession Number", field:"accession", width: "200px"},
                {name:"Title", field:"title", width: "400px"}
            ]
        }); 
        $('.checkout.action .data-grid', this.el).append(grid.domNode);
        grid.startup();
        return this;
    }
}); 
```

这会构建表格，但您看不到它，也没有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:33:33.877

尝试给网格一个明确的高度。

```
var grid = new DataGrid({
     height: 400px,
     store: ObjectStore({objectStore: this.store}),
     structure: [
            {name:"Accession Number", field:"accession", width: "200px"},
            {name:"Title", field:"title", width: "400px"}
     ]
}); 
```

# entity-framework - 无法执行 Context.Entity.SqlQuery 实体框架

> ID：10136204
> 
> 赞同：0
> 
> 时间：2012-04-13T06:27:04.923
> 
> 标签：entity-framework, entity-framework-4

我无法在实体框架中执行 Raw Sql Where 查询。

模型 ：

```
public partial class Web_User_Setup_Header
{
    public byte[] timestamp { get; set; }
    public string User_ID { get; set; }
    public bool Enable { get; set; }
    public System.DateTime Expiration_Date { get; set; }
} 
```

流利的模型实体配置：

```
public class Web_User_Setup_HeaderConfigruation : EntityTypeConfiguration<Web_User_Setup_Header>
{
    public Web_User_Setup_HeaderConfigruation()
    {
        ToTable("Web User Setup Header");
        HasKey(x => x.User_ID).Property(x => x.User_ID).HasColumnName("User ID");
        Property(x => x.Expiration_Date).HasColumnName("Expiration Date");
    }
} 
```

我正在执行的 Sql 查询是：

```
 Web_User_Setup_Header WebSetup = context.Web_User_Setup_Headers.SqlQuery("Select * from [" + Convert.ToString(HttpContext.Items["Company"]) +
                 "$Web User Setup Header] where User_ID=@p0", uid).SingleOrDefault(); 
```

在哪里`HttpContext.Items["Company"] = "Sachin Sales"`

和`uid = "web"`

当我执行上述查询时，它给出的错误如下：`Invalid column name 'User_ID'.`

当我在查询中更改`User_ID`为时`[User ID]`，它会给出错误：

`The data reader is incompatible with the specified 'JSTestWeb.Models.Web_User_Setup_Header'. A member of the type, 'User_ID', does not have a corresponding column in the data reader with the same name.`

有人可以说明这个问题吗？但是，数据库字段名称`[User ID]`仅在数据库中，我无法更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:46:45.037

您可以使用[ESQL](http://msdn.microsoft.com/en-us/library/bb387145.aspx)构建动态查询。但是您将需要使用`ObjectContext`API 来执行 ESQL。

```
public class MyContextTest : DbContext
{
    public virtual ObjectContext UnderlyingObjectContext
    {
        get
        {
            return ((IObjectContextAdapter)this).ObjectContext;
        }
    }
} 
```

查询语法与 SQL 略有不同。

```
 Web_User_Setup_Header WebSetup = context.UnderlyingObjectContext
    .CreateQuery<Web_User_Setup_Header>("Select VALUE C from [" +    
     Convert.ToString(HttpContext.Items["Company"]) +
     "$Web User Setup Header] AS C where C.[User ID]=@p0", 
        new ObjectParameter("p0", uid)).SingleOrDefault(); 
```

# java - 需要在JAVA中创建自定义类

> ID：10136209
> 
> 赞同：3
> 
> 时间：2012-04-13T06:27:46.403
> 
> 标签：java, class

我想在 JAVA 中创建一个自定义类对象并且我创建了但它显示错误...不知道为什么会发生此错误，请帮助我，因为我开始更早地学习 JAVA...

```
 class main {

    class student {
        public int rollno;
        public String name;
        public int marks;

        public void accept() {
            rollno = 1;
            name = "Pawan Mall";
            marks = 100;
        }

        public void display() {
            System.out.println(rollno);
            System.out.println(name);
            System.out.println(marks);
        }

    }

    public static void main(String argv[]) {
        student s = new student();
        s.accept();
        s.display();
    }

} 
```

它发生在编译时，这是我在编译代码时遇到的错误：

```
C:\Program Files\Java\jdk1.7.0_03\bin\student.java:28: error: non-static variable this cannot be referenced from a static context
student s = new student();
            ^
1 error

Tool completed with exit code 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:40:11.717

您的`student`班级*嵌套*在`main`班级内部。由于您尚未将其声明为`static`，因此它是一个`inner`类。[Java教程](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)说：

*InnerClass 的实例只能存在于 OuterClass 的实例中。*

因为这正是你想要做的，所以它失败了。

您的`student`类需要是静态的，因此您可以在静态上下文中实例化它。

```
class main {

    static class student {
        public int rollno; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:37:36.380

尝试使用这样的主类引用创建学生实例

```
main m = new main();

student s= m.new student(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T06:36:41.467

名称类的第一个字符必须是大写。类名和文件名相同。在你的情况下：“学生”->“学生”

# haskell - Haskell 中的“依赖可选”数据

> ID：10136222
> 
> 赞同：12
> 
> 时间：2012-04-13T06:29:12.330
> 
> 标签：haskell, algebraic-data-types

考虑一个 DateTime 类型，其中日期必须存在，但以秒为单位的时间部分是可选的。如果有时间部分，则可能还有一个可选的毫秒部分。如果存在毫秒，也可能存在纳秒部分。

有很多方法可以解决这个问题，例如：

```
--rely on smart constructors 
data DateTime = DateTime { days:: Int, 
                           sec :: Maybe Int, 
                           ms :: Maybe Int, 
                           ns :: Maybe Int 
                         }

-- list all possibilities
data DateTime = DateOnly Int 
              | DateWithSec Int Int
              | DateWithMilliSec Int Int Int
              | DateWithNanoSec Int Int Int Int    

-- cascaded Maybe
data DateTime = DateTime Int (Maybe (Int, Maybe (Int, Maybe Int)))

-- cascaded data
data Nano = NoNano | Nano Int
data MilliSec = NoMilliSec | MilliSec Int Nano
data Sec = NoSec | Sec Int MilliSec
data Date = Date Int Sec 
```

你会使用哪种结构（当然不限于上面的例子），为什么？

**[意向]**

我正在探索 Frege 中日期类型的可能性（[http://code.google.com/p/frege/](http://code.google.com/p/frege/)），使用 date4j`DateTime`作为指导方针（因为 Haskell 的日期和时间库太复杂了，`java.util.Date`太破碎了）。在我当前的玩具实现中，所有字段都是必需的，但当然最好将用户从不需要的精度中解放出来（并且原始实现*具有*可选字段）。

所以主要目标是：

*   安全：必须不惜一切代价避免非法状态
*   方便：使用类型应该很容易，例如模式匹配会很酷，日历计算应该很容易......

不那么重要的是：

*   性能：当然，使用类型不应该太慢，但对于典型的用法，它不必挤出最后一个时钟周期
*   内存：在这很重要的情况下，很容易推导出更紧凑的存储格式
*   简洁的实现：这是一个库，我愿意添加使事情顺利进行所需的所有代码

也就是说，所有这些都是非常试探性的，不应该太认真。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T07:48:41.630

（这不是一个答案，但是评论太长了，在这里会更清楚。）

还有另一种方法可以处理它：拥有一个`DateTime`存储所有字段的单一类型，以及一个表示精度的参数，例如

```
data Precision = Days | Seconds | Milliseconds | Nanoseconds deriving (Ord, Eq {- etc -})
data DateTime = DateTime { prec :: Precision,
                           days :: Int, 
                           sec :: Int,
                           ms :: Int,
                           ns :: Int } 
```

并使用智能构造函数将未使用的参数设置为`0`. 如果你有`dateDifference`或其他什么，你可以传播精度（`Ord`实例会使这个整洁）。

（我对这有多好/Haskell-y 知之甚少，但其他解决方案似乎相当混乱，也许这更优雅。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T07:56:46.653

“必须不惜一切代价避免非法状态”和“模式匹配会很酷”是很好的原则，在这种情况下是相互冲突的。

此外，日期和时间是粗糙的人类文化结构，有很多边缘情况和不规则的角落。它们不是我们可以在类型系统中轻松编码的那种规则。

所以在这种情况下，我会使用不透明的数据类型、智能构造函数和智能解构函数。当我们想要使用模式匹配时，总会有视图模式和模式保护。

（而且我什至还没有将依赖的可选数据作为激励因素进行讨论。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T08:39:34.910

受@dbaupp 解决方案的启发，我想为候选人添加一个幻像类型版本：

```
-- using EmptyDataDecls
data DayPrec 
data SecPrec 
data MilliPrec 
data NanoPrec 

data DateTime a = DateTime { days :: Int, sec :: Int, ms :: Int, ns :: Int } 

date :: Int -> DateTime DayPrec
date d = DateTime d 0 0 0

secDate :: Int -> Int -> DateTime SecPrec
secDate d s = DateTime d s 0 0

...    

--will work only for same precision which is a Good Thing (tm)
instance Eq (DateTime a) where
  (DateTime d s ms ns) == (DateTime d' s' ms' ns') = [d,s,ms,ns] == [d',s',ms',ns'] 
```

如果我没记错的话，这使我可以使用一种类型，但如果需要，可以区分精度。但我想也会有一些缺点......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:53:37.707

假设您只想解决这个问题（而不是更通用的问题），那么[十进制](http://hackage.haskell.org/package/Decimal-0.2.2)库可能就是您想要的。

# jquery - ajax调用成功的问题

> ID：10136226
> 
> 赞同：0
> 
> 时间：2012-04-13T06:29:43.480
> 
> 标签：jquery

有以下实现

```
$.ajax({
type: "POST",
url: "/Member/SaveMember",
data: $('form').serialize(),
success: refreshGrid() 
```

为什么在调用 /Member/SaveMember 的 ajax 调用之前首先调用 refreshGrid() 方法？我以为只有在成功调用服务器方法后才会调用“成功”。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:33:03.440

您正在使用调用 refreshGrid 的结果设置 ajax 调用，而不是使用 refreshGrid 作为参考。删除括号表示您不想调用您的方法，而是传递该方法。

```
$.ajax({
type: "POST",
url: "/Member/SaveMember",
data: $('form').serialize(),
success: refreshGrid
}); 
```

如果要使用新参数设置调用，请将其包装在新函数中

```
$.ajax({
type: "POST",
url: "/Member/SaveMember",
data: $('form').serialize(),
success: function() {
    refreshGrid(dataParameter);
}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:33:02.193

仅使用`refreshGrid`，不使用括号（使用括号时，您正在调用函数，并将调用结果归因于该`success`字段）。

# javascript - 使用 Javascript/jquery 访问视频中某一帧的图片内容

> ID：10136232
> 
> 赞同：6
> 
> 时间：2012-04-13T06:30:20.177
> 
> 标签：javascript, jquery, html, video

**问题**

我想编写高效的代码来使用 JavaScript 在网络浏览器中播放/操作图像。我认为使用视频文件可能会减少 http 请求。*如何从视频中访问单个帧的 png/jpg/字节码版本？*

**背景**

目前，我有大约 1000 张图像的序列，这些图像变化非常轻微，需要在我的页面上快速访问。通过 HTTP 请求加载图像需要永远（显然），随着我的应用程序的增长，这个数字很可能会从 1000 增长到 5000 到 10,000 ......

单个图像的 Ajax 请求将不起作用，b/c 我需要立即加载图像（并且没有时间等待新的 http 请求）。

我的想法是在服务器上预处理一个视频文件，该文件显示图像进展——每帧一张图像——以加快下载速度和浏览器的性能。根据在线观看视频的速度，我觉得这个视频可以快速下载到客户端。我被困在如何从视频中获取一帧的图片内容。

**HTML5？**

请注意，我还没有研究过 HTML5，但愿意考虑它是否有帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T18:49:54.700

您可以将视频帧绘制到 html5 画布上。

我通过结合[this](https://stackoverflow.com/a/7179693/1333941)和[this创建了](http://html5doctor.com/video-canvas-magic/)[这个](http://jsfiddle.net/usernamedemanded/893aM/37/)小提琴。

关键是获取当前视频帧并将其绘制到画布元素中。

```
var delay=20;
function draw(cvideo,ccanvas,canvas_width,canvas_height) {
  if(cvideo.paused || cvideo.ended) return false;
  ccanvas.drawImage(cvideo,0,0,canvas_width,canvas_height);
  setTimeout(draw,delay,cvideo,ccanvas,canvas_width,canvas_height);
} 
```

将其放入画布后，您几乎可以对图像执行任何操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T18:31:08.337

[您可以使用图像精灵](http://css-tricks.com/css-sprites/)而不是使用视频文件- 基本上将多个图像组合成一个大图像，您只总是显示适当的区域（假设所有图像具有相同的尺寸，这很容易） - 这将大大减少必要的 HTTP 请求数量并依次加快加载过程。

# salesforce - 更新用户对象时 Salesforce Apex 触发器中的 MIXED_DML_OPERATION 错误

> ID：10136237
> 
> 赞同：4
> 
> 时间：2012-04-13T06:30:45.950
> 
> 标签：salesforce, apex-code, dml

我在联系人对象上有一个触发器，当我尝试在此触发器中更新用户记录时，我得到以下异常：

“MIXED_DML_OPERATION，在您更新非设置对象（反之亦然）后，不允许对设置对象进行 DML 操作：用户，原始对象：联系人”

触发代码：

```
trigger UpdateContactTrigger on Contact (after update) {

    User u = [SELECT Id, IsActive FROM User WHERE IsActive = true];

    u.IsActive = false;
    update u;

} 
```

从联系人触发器更新用户记录的字段时，如何避免此错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T15:03:20.283

Salesforce 将对象分类为所谓的设置对象和非设置对象。User 是一个设置对象，而 Contact 是一个非设置对象。Salesforce 限制 DML 操作，因此不能在同一上下文中操作这两种对象。

此问题有一个解决方法，将冲突对象的 DML 代码放置到 @future 方法中，如本[文档](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_dml_non_mix_sobjects.htm)末尾和上一个答案中所述。

在我的情况下，使用@future 方法不起作用，因为用户上有一个更新触发器调用了另一个@future 方法，而Salesforce 不允许从另一个@future 方法调用@future 方法。

所以我想出了另一种解决方法，它适用于用户对象的某些情况。

从 API 版本 15.0 开始，Salesforce 实际上允许在与非设置对象更新相同的上下文中更新用户对象的自定义字段。因此，如果您需要更新用户的标准字段，您可以在用户对象上使用带有“更新前”触发器的自定义代理字段。

如果您需要更改用户的 IsActive 字段，请向用户添加自定义 IsActiveProxy 字段并在触发器中执行更新：

```
trigger UpdateContactTrigger on Contact (after update) {

    User u = [SELECT Id, IsActive FROM User WHERE IsActive = true];

    u.IsActiveProxy__c = false;
    update u;

} 
```

然后在将代理字段值复制到标准字段的用户上创建一个“更新前”触发器：

```
trigger BeforeUpdateUserTrigger on User (before update) {

    for(User user : trigger.new) {

        if(user.IsActive != user.IsActiveProxy__c) {
            user.IsActive = user.IsActiveProxy__c;
        }

    }

} 
```

就是这样！它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T07:49:42.943

您应该定义 @future 方法，该方法将执行更新并从触发器调用此方法。

```
@future
updateUser(){
    User u = [SELECT Id, IsActive FROM User WHERE IsActive = true];

    u.IsActive = false;
    update u;
} 
```

并在触发器中调用它：

```
trigger UpdateContactTrigger on Contact (after update) {
    updateUser();
} 
```

# winforms - 在任务管理器和内存分析器工具中分析的内存使用情况

> ID：10136239
> 
> 赞同：0
> 
> 时间：2012-04-13T06:30:54.687
> 
> 标签：winforms, .net

.Net winform 应用程序。

我使用了几个内存分析器，包括 CLR 分析器、DotTrace 内存、Net 内存分析器。工具给出的结果是分配的内存是38-40M。但我发现任务管理器中的工作集为 300-400M（与 Peak 工作集或内存或提交大小几乎相同。

那么这两个结果有什么区别呢？结果意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:37:50.743

这些工具可能会向您显示私有字节或托管堆大小，这不包括例如内存映射文件，支持的页面文件或支持的磁盘文件，您的应用程序可能是 r/w ing 大映射文件，因此工作集看起来很大，或者您的应用程序只是加载了太多的 dll/程序集。VMMAP（来自 sysinternals）可以清楚地概述您的应用程序中的内存类型/大小。

# google-app-engine - 强制速率何时降低到 queue.xml 速率以下？

> ID：10136243
> 
> 赞同：1
> 
> 时间：2012-04-13T06:31:27.143
> 
> 标签：google-app-engine, task-queue

即使队列被定义为推送任务队列的**20/s** ，我们的“**强制速率**”也下降到**0.10/s 。**我们积压了 2 个小时的任务。

 **[文档](https://developers.google.com/appengine/docs/java/taskqueue/overview-push#The_Rate_of_Task_Execution)说：

> 当您的应用程序返回 503 HTTP 响应代码，或者没有实例能够在较长时间内执行请求时，强制速率可能会降低。

没有 503（全部为 200），但我们看到 0（零）个实例正在为处理该队列的版本运行，这可能解释了强制率下降。处理队列的应用程序的目标版本*不是*主版本，并且目标版本除了推送任务队列工作负载之外没有其他请求源。

如果由于缺少实例而降低了强制速率，为什么 GAE 不启动新实例？

没有预算限制或速率限制可以解释实例数降至 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:56:53.703

我将这个问题作为我们主演的错误来回答[http://code.google.com/p/googleappengine/issues/detail?id=7338](http://code.google.com/p/googleappengine/issues/detail?id=7338)**

# android - 如果语句仅完全运行 onresume()

> ID：10136244
> 
> 赞同：0
> 
> 时间：2012-04-13T06:31:30.407
> 
> 标签：android, if-statement, radio-button, settext

我正在尝试设置一个战斗系统，允许用户在近战攻击和远程攻击之间进行选择（选择两个单选按钮之一）。基于变量按钮可以说什么动作，“超出范围”，“攻击近战”，“攻击范围”，“重新加载范围”。onresume 单选按钮具有正确的文本。在第一次射击远程武器后（战斗开始时远程武器已经重新加载） rangeRadio 的文本变为“重新加载范围”但不会从“重新加载范围”变回“攻击范围”，即使武器“重新加载”并且当我结束回合（和预置动作）时会开火造成伤害。如果武器需要 2 回合才能重新装填。我花了 2 轮重新加载，单击主页按钮然后返回活动它会正确设置文本并说“

找到radioButtons，if语句首先检查是否有远程武器装备（rangeId == 50表示没有武器）然后检查武器是否已加载（int rangeReload = 100），然后最后检查是否在攻击范围内/火。

```
 private void setActions(){
         RadioButton meleeRadio = (RadioButton) findViewById(R.id.meleeRadio);
         RadioButton rangeRadio = (RadioButton) findViewById(R.id.rangeRadio);
            if (meleeRange >= distance){meleeRadio.setText(meleeString);}else{meleeRadio.setText(oorString);}
            if (rangeId == 50){rangeRadio.setText(norangeString);}else{if(rangeReload<=99){rangeRadio.setText(reloadString);}else{
            if (rangeRange >= distance){rangeRadio.setText(rangeString); Log.e(rangeString, "Range Attack called");}else{rangeRadio.setText(oorString);}}}
    } 
```

我调用 setActions(); 在两个地方。在 onresume 通过 preCombat() -> layoutcombat()

```
@Override
protected void onResume() {     
    new pullCombatActions().execute();
    new prepCombat().execute();
    super.onResume();}

    private class prepCombat extends AsyncTask<String, Void, String>{

        @Override
        protected String doInBackground(String... params) {
            playerBattlePrep();
            findNPC();
            return null;}
        @Override
        protected void onPostExecute(String result) {
            new layoutCombat().execute();
        }
     }

    private class layoutCombat extends AsyncTask<String, Void, String>{

        @Override
        protected String doInBackground(String... params) {
            startCombat();
            pullCombatText();
            return null;}
        @Override
        protected void onPostExecute(String result) {
            setActions();
            popStats();
            refreshStats();
            combatStartText();}
     } 
```

第二个地方我叫 setActions(); 在我的 AsyncTask 中，我在战斗回合结束时运行以刷新屏幕并通过滚动向用户展示发生了什么。

```
private class replaceScreen extends AsyncTask<String, Void, String>{

    @Override
    protected String doInBackground(String... params) {
        pullCombatStory();
        return null;
    }
    @Override
    protected void onPostExecute(String result) {
        refreshStats();
        refreshCombatStory();
        highLightPlayerActions();
        highLightNpcActions();
        setActions();
        }
    } 
```

我不明白为什么在设置 rangeRadio 时它似乎在我的 if 语句中途停止，但 onResume 让它一直完成并为 rangeRadio 显示正确的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:58:18.610

只是一个建议，尝试移动

```
 RadioButton meleeRadio = (RadioButton) findViewById(R.id.meleeRadio);
     RadioButton rangeRadio = (RadioButton) findViewById(R.id.rangeRadio); 
```

在您的 onResume 方法之外，并将其放在您的 onCreate（或 onActivityCreated，如果它是一个片段）方法上，并将 rangeRadio 和 meleeRadio 作为私有变量放在您的活动（或片段）中

然后，由于您使用的是链式 AsyncTasks，因此我不确定您的所有 onPostExecute 是否都在您的 UI 线程上运行，因此我会尝试将您对 rangeRadio.setText() 的所有调用封装在这样的处理程序上：

在您的活动 onCreate 上：

```
handler =  new Handler(); 
```

然后在设置文本时：

```
handler.post(new Runnable() {

            public void run() {
                rangeRadio.setText("...");

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:51:17.013

TY 的帮助。在我匆忙寻找一个好的停车地点时，我忘记了在角色重新加载时设置 AsyncTask。因此，当玩家因为超出范围或玩家重新加载而没有攻击时，不会调用 setActions()。

# django - Django app_cache_ready 方法在 Dev 上返回 True，在生产上返回 False

> ID：10136247
> 
> 赞同：0
> 
> 时间：2012-04-13T06:31:36.817
> 
> 标签：django, caching, middleware, django-middleware

我不知道可能是什么原因。

在我的开发机器上，完全相同的 django 项目运行正常，而在自定义中间件代码 app_cache_ready() 方法的生产中始终返回 False。如果我忽略并绕过它，cache.set 不会缓存对象。

我的开发环境使用 runserver 来启动服务器，而生产环境使用带有 virtualhost 指令的 Apache 和 mod_wsgi。

有谁知道可能是什么问题？我已经花了几个小时没有成功。

提前致谢

下面是再次缓存失败的简化代码：

```
from django.conf import settings
from django.contrib.sites.models import Site
from django.http import HttpResponseRedirect, Http404
from django.core.cache import cache
from django.db.models.loading import app_cache_ready
from django.utils.cache import patch_vary_headers

class MyMiddleware(object):

    def process_request(self, request):

        key='kuku'
        val=cache.get(key)
        if not val:
            logger.warn('Cached key is not available')
            cache.set(key,5)
        else:
            logger.warn('Cached key is %s' % str(val)) 
```

在随后的调用中，我总是看到缓存键不可用。

# continuous-integration - 如何将 Jenkins 与 Redmine 集成？

> ID：10136248
> 
> 赞同：17
> 
> 时间：2012-04-13T06:31:38.400
> 
> 标签：continuous-integration, jenkins, redmine, redmine-plugins, jenkins-plugins

我想将 Jenkins 与 Redmine 集成。如果某些构建中断，Jenkins 将在 Redmine 中打开一个问题以通过控制台输出通知它。

我该怎么做？有插件吗？有实施指南吗？我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T01:29:59.287

有两种方法可以实现这一点

1.  在 redmine 中安装 hudson 插件，参见[http://www.redmine.org/plugins/t-ando_redmine_hudson](http://www.redmine.org/plugins/t-ando_redmine_hudson)，它会让你知道 redmine 中的构建。(**2014.5.7 [更新] 更改 redmine 插件列表 **)

2.  在 jenkins (hudson) 中安装 redmine 插件，不幸的是该插件不再维护，[https:](https://wiki.jenkins-ci.org/display/JENKINS/Redmine+Plugin) //wiki.jenkins-ci.org/display/JENKINS/Redmine+Plugin 。JIRA jenkins 插件是应该支持 redmine 插件的一种方式。（**[更新]该插件自 2013 年以来又回来了**）

[更新] 我尝试在2011.2中为解决方案2添加此功能，请参阅我的博客： http: [//larrycaiyu.com/blog/2011/02/24/associate-ci-build-information-in-redmine-issue-by -using-redmine-rest-api/](http://larrycaiyu.com/blog/2011/02/24/associate-ci-build-information-in-redmine-issue-by-using-redmine-rest-api/)，但在那之后我停止了，因为

1.  在社区中，似乎首选解决方案 1。
2.  JIRA 中已经有很多功能，最好说服他们将其作为 jenkins 中的常见问题插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-16T09:40:32.023

您可以尝试 Redmine 中的电子邮件发送选项。

1.  配置 Jenkins 以向 Redmine 发送一封包含详细报告的电子邮件。
2.  配置 Redmine 以接受电子邮件并将其传输到问题。

您可以配置您希望的任何模板，以便报告对用户友好。此外，Redmine 有一个简单的传入邮件解析器，因此您可以省略不需要的信息。

不需要插件，只需要两个工具中的设置。

# javascript - jQuery - 通过单击另一个 div 获取动态 div 的类

> ID：10136251
> 
> 赞同：-4
> 
> 时间：2012-04-13T06:31:48.773
> 
> 标签：javascript, jquery, html

正如标题所示，我想通过单击另一个 div（“div.secondclass”）来获取动态 div 的类。这是我的代码：

```
$(document).ready(function() {
    $("div.secondclass").click(function () {
        firstclass=$('#firstid').attr('class');
        alert("the class of the 1st div is ="+firstclass);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:30:35.870

```
$(document).ready(function() {
    $("div.secondclass").click(function () {
        var aClass = $('#firstid')[0]
                          .className
                          .replace(/[\n\t\r]/g, " ")
                          .replace(/^\s+|\s+$/g, "")
                          .split(" ");
        alert("The div with the id firstid has got these classes: " + aClass.join(", "));
    });
}); 
```

# objective-c - 国家名称的坐标/地区

> ID：10136254
> 
> 赞同：3
> 
> 时间：2012-04-13T06:31:59.583
> 
> 标签：objective-c, ios, xcode, mapkit, core-location

如何根据正确书写的国家名称提取`CLRegion`或或纬度/经度点？`CLLocationCoordinate2D`会`CLGeocoder`这样工作：

```
 CLGeocoder *geoCode = [[CLGeocoder alloc] init];
[geoCode geocodeAddressString:@"Singapore" completionHandler:^(NSArray *placemarks,       NSError *error) {
if (!error) {
      CLPlacemark *place = [placemarks objectAtIndex:0];
NSLog(@"%i,%i", place.//what would i put here);

}

   }]; 
```

什么变量`CLPlacemark`告诉地址？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T06:46:34.223

没关系想通了：

```
 CLGeocoder *geoCode = [[CLGeocoder alloc] init];
[geoCode geocodeAddressString:@"Singapore" completionHandler:^(NSArray *placemarks, NSError *error) {
    if (!error) {
        CLPlacemark *place = [placemarks objectAtIndex:0];
        CLLocation *location = place.location;
        CLLocationCoordinate2D coord = location.coordinate;
        NSLog(@"%g is latitude and %g is longtitude", coord.latitude, coord.longitude);

    }

}]; 
```

# ios - 使用不同的 sqlite db 结构将新版本更新到应用商店

> ID：10136256
> 
> 赞同：6
> 
> 时间：2012-04-13T06:32:14.117
> 
> 标签：ios, sqlite, app-store

我已经在应用商店（1.0 版）上上传了一个应用。我的应用程序使用 sqlite 数据库来存储一些数据。现在，我对数据库进行了一些更改（我在我的数据库中的一个表中添加了 2 或 3 个新列）。我想用新版本 1.1（具有不同的数据库结构）更新我的应用程序的以前版本。现在，当已经使用 1.0 版的用户将应用程序升级到 1.1 版时，数据库已经存在于应用程序沙箱中，因此，应用程序指向 1.1 版，但我的数据库仍然是旧的。如果有的话，我想拥有带有旧数据的新数据库。请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T10:54:02.010

sqlite 支持称为 user_version 属性的东西，您可以执行`PRAGMA user_version`查询应用程序数据库的当前架构版本。当您的应用程序启动时，此查询可能会在开头写入。

要更新此 user_version，请执行以下更新查询`PRAGMA user_version = version_num`；

每当您创建 sqlite db 时，最好将此属性设置为 user_version，以便将来升级时可以查询当前值。检查它需要什么并执行剩余的更改或创建表以升级您的架构版本。

例如：

在第一个版本中，我使用 col1、col2 创建 table1

我执行 sql 来创建 table1，一旦成功完成，我执行 pragma user_version = 1。所以这将表明我当前的模式版本是 1

在未来的版本中，我添加了新的 col3，我需要将我的架构版本更改为 2

我首先查询 user_version，检查它的值，如果它是 1，那么你需要运行 alter script 添加新列并将用户版本设置为 2。

在您的情况下，由于您之前没有设置 user_version，因此很难区分新安装和升级方案。所以现在你可能假设如果 db 存在它是升级场景并执行改变脚本，如果不存在则假设它是一个新的安装场景并运行创建脚本。但是看看你是否可以使用上述 pragma 来至少在未来解决你的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T06:47:46.833

您可以在启动时检查它是否是旧数据库，如果是，则有一个例程来创建一个具有新结构（具有临时名称）的新数据库，将所有数据从旧数据库复制到新数据库，关闭旧数据库并删除它，关闭新数据库，重命名它，然后最后再次打开它以供您更新的应用程序使用。简单、快速，而且您不需要深入了解 SQLite 即可。

# php - 如何检索我的复选框的数据

> ID：10136266
> 
> 赞同：-1
> 
> 时间：2012-04-13T06:33:08.067
> 
> 标签：php, jquery

我在读取复选框中的数据时遇到问题。我在网上做了一些研究，发现了下面的代码。此代码用于*删除*带有复选框的数据。

```
function deleteData()
{
    var artistIds = new Array();

    $(".p16 input:checked").each(function(){
        artistIds.push($(this).attr('id'));
    });
var sitepath = 'http://www.sinemalar.com/';

$.post('/json/crewonly/deleteDataAjax2', 
       { json: JSON.stringify({'artistIds': artistIds}) },
       function(response){
        alert("Başarıyla silindi");
        window.location.replace(window.location.pathname);
}); 
```

![在此处输入图像描述](../Images/b5ef80140840e64159dd4221e48851ea.png)

这是产生复选框的代码。

```
{foreach value=artist2 from=$artist}

        <br />
        <input type="checkbox" name="artist[]" value="{$artist2.MOVIE_ID}-{$artist2.PERSON_ID}" { in_array array=$item match=$artist2.NAME_SURNAME returnvalue="CHECKED" }>{$artist2.NAME_SURNAME}<br />
        <hr />

        {/foreach} 
```

编写此代码的人使用它来读取复选框。我必须使用`<p>`来读取我的复选框值还是有其他方法？.p16 输入：选中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:25:42.330

你的意思是：

```
 $(document).ready(function() {
  var checkedBoxesArr = [];
  $("input[name='artist[]']").each(function() {
     if($(this).is(":checked")) {
        checkedBoxesArr.push($(this).val());
     }
  });
}); 
```

# java - Java - 按分隔符分割

> ID：10136267
> 
> 赞同：2
> 
> 时间：2012-04-13T06:33:11.183
> 
> 标签：java, regex, split

给定`_<A_>_<B_>_<Z_>`，我想提取`A, B, C`一个数组。

基本上`_<`是起始定界符，`_>`也是结束定界符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T07:20:56.573

您可以使用[环视断言](http://www.regular-expressions.info/lookaround.html)仅匹配标签的内容。

```
String text = "_<A_>_<B_>_<Z_>";

List<String> Result = new ArrayList<String>();

Pattern p = Pattern
    .compile("(?<=_<)" + // Lookbehind assertion to ensure the opening tag before
        ".*?" +          // Match a less as possible till the lookahead is true 
        "(?=_>)"         // Lookahead assertion to ensure the closing tag ahead
        );
Matcher m = p.matcher(text);
while(m.find()){
    Result.add(m.group(0));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T06:38:53.480

这很简单 - 剪掉第一个开头和最后一个关闭，然后将其拆分为 close-open

```
string.replaceFirst( "^_<(.*)_>$", "$1" ).split( "_>_<" ); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-13T06:36:24.553

[您使用捕获组](http://docs.oracle.com/javase/tutorial/essential/regex/groups.html)提取它们。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-13T06:36:34.063

拆分`_<`得到 2 个元素，取第 2 个并拆分`_>`得到 2 个元素，取第一个并拆分`_>_<`得到 A、B、C

# ruby-on-rails - 在 Cucumber 中创建的 ActiveRecord 对象未显示在 Rails Web 应用程序中

> ID：10136268
> 
> 赞同：1
> 
> 时间：2012-04-13T06:33:46.293
> 
> 标签：ruby-on-rails, cucumber

我正在使用 cucumber (cucumber (1.1.0) cucumber-rails (0.3.2)) 尝试在 rails 2.3.14 应用程序上测试 Web UI。问题是我在功能步骤中创建用户：

```
visit("/")

@admin_user = Factory.create :admin_user
@admin_user.email
@admin_user.update_attributes :password => "testtest", :password_confirmation => "testtest"
@admin_user.register!
@admin_user.activate!

click_link("Login")
fill_in "Email:", :with => @admin_user.email
fill_in "Password:", :with => "testtest"

find("input[type=image]").click 
```

但是，当我访问该站点并尝试登录时，该用户在数据库中不可见。调用 new_record？on @admin_user 返回 false 但 rails 应用程序看不到它。关于为什么这个记录没有出现的任何想法？我已经确认 cucumber 和 rails 应用程序都指向同一个数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:35:57.367

正如@Ernest 所说，有两个连接。但是关闭转换会减慢您的套件速度，因此请使用以下代码：[https](https://gist.github.com/470808) ://gist.github.com/470808 ，并阅读：[http ://blog.plataformatec.com.br/2011/12/three-tips-提高测试套件的性能/](http://blog.plataformatec.com.br/2011/12/three-tips-to-improve-the-performance-of-your-test-suite/)尤其是第 3 节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:22:10.693

你确定他们指向同一个数据库吗？通常 cucumber 将在测试环境中运行，您访问该站点将处于开发或生产环境中。

如果您已更改 config/database.yml 以将测试环境指向开发或生产数据库，Cucumber 通常将每个场景包装在回滚的事务中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:31:00.207

如果 Cucumber 和 Rails 使用两个不同的连接，则可能会发生这种情况。对于这种情况，您可能需要关闭事务。更多关于这里的主题：[https ://github.com/cucumber/cucumber/wiki/Browsers-and-Transactions](https://github.com/cucumber/cucumber/wiki/Browsers-and-Transactions)

# python - 抓取：如何获取标签中的属性

> ID：10136270
> 
> 赞同：1
> 
> 时间：2012-04-13T06:33:54.577
> 
> 标签：python, web-scraping, lxml

我正在使用**lxml 和 python**来抓取页面。该页面的链接是**[这里](http://www.insiderpages.com/b/3721895833/central-kia-of-irving-irving)**。我现在面临的问题是如何获取标签中的属性。例如页面顶部的 3 颗金星，它们有一个 html

```
<abbr title="3" class="average rating large star3">★★★☆☆&lt;/abbr> 
```

在这里，我想获取标题，以便知道该位置获得了多少颗星。

我尝试过做几件事，包括：

```
response = urllib.urlopen('http://www.insiderpages.com/b/3721895833/central-kia-of-irving-irving').read()
mo = re.search(r'<div class="rating_box">.*?</div>', response)
div = html.fromstring(mo.group(0))
title = div.find("abbr").attrib["title"]
print title 
```

但对我不起作用。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:50:01.717

[不要使用正则表达式从 html 中提取数据。](https://stackoverflow.com/a/1732454/843822)你有 lxml，使用它的力量（[XPath](http://lxml.de/xpathxslt.html#xpath)）。

```
>>> import lxml.html as html
>>> page = html.parse("http://www.insiderpages.com/b/3721895833/central-kia-of-irving-irving")
>>> print page.xpath("//div[@class='rating_box']/abbr/@title")
['3'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T06:52:11.880

Have you tried xpath?

```
In [38]: from lxml import etree

In [39]: import urllib2

In [40]: html = etree.fromstring(urllib2.urlopen('http://www.insiderpages.com/b/3721895833/central-kia-of-irving-irving').read(), parser)

In [41]: html.xpath('//abbr')[0].xpath('./@title')
Out[41]: ['3'] 
```

# c# - 尝试将 String 转换为 Double 时出现 System.FormatException

> ID：10136272
> 
> 赞同：2
> 
> 时间：2012-04-13T06:33:59.447
> 
> 标签：c#, windows-phone-7

当我尝试在 WP7 C# 上将 String 转换为 Double 时出现此错误。

```
tokenvalue = Convert.ToDouble(saParsed[i].Replace(".", ",")); 
```

我在 WP7 中收到此错误。类型的第一次机会异常`System.FormatException`发生在`mscorlib.dll`

有什么办法可以避免它还是仅仅是模拟器的错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T06:37:27.240

首先你可以尝试使用这个：

```
double tokenvalue = Convert.ToDouble(saParsed[i], CultureInfo.InvariantCulture); 
```

无论如何，您最好检查一下是否正常：

```
double tokenvalue;
if (Double.TryParse(saParsed[i], out tokenvalue) 
{ 
    // Do what you please here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:40:34.747

尝试这样的事情。

```
var tokenvalue = Convert.ToDouble(saParsed[i]);
var tokenValueText = tokenValue.ToString().Replace(".", ","); 
```

如果 saParsed[i] 持有有效的双精度值，希望它能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:49:33.517

尝试使用以下语句对其进行转换：

```
double tokenvalue; 
if (double.TryParse(saParsed[i], NumberStyles.Any, 
    NumberFormatInfo.CurrentInfo, out tokenvalue))
{  
    // Convertion was successfull
} 
```

# ruby-on-rails - 将 params[:date] 转换为 Date 的禅宗方式？

> ID：10136279
> 
> 赞同：4
> 
> 时间：2012-04-13T06:35:18.617
> 
> 标签：ruby-on-rails, ruby

`params[:date]`将字段转换为`Date`对象的最优雅方式是什么？

```
"date"=>{"day"=>"13", "year"=>"2012", "month"=>"4"} 
```

目前，我有以下代码`controller`：

```
@date = Date.current
if params[:date]
  yy = mm = dd = 0
  yy = params[:date][:year].to_i  if params[:date][:year]
  mm = params[:date][:month].to_i if params[:date][:month]
  dd = params[:date][:day].to_i   if params[:date][:day]
  @date = Date::civil(yy, mm, dd) if Date::valid_date?(yy, mm, dd)
end 
```

和里面`view`的`form_tag`：

```
<%= select_date(@date, :order => [:year, :month, :day], :prefix => 'date') %> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T06:53:48.680

It will return the valid date or time object . Try :

```
@date = Date.parse("#{params[:date]['day']}-#{params[:date]['month']}-#{params[:date]['year']}") if params[:date]
OR
@date = Time.parse("#{params[:date]['day']}-#{params[:date]['month']}-#{params[:date]['year']}") if params[:date]

@date ||= Date.current 
```

# java - 在运行时更新 java 线程的堆栈大小

> ID：10136281
> 
> 赞同：5
> 
> 时间：2012-04-13T06:35:22.307
> 
> 标签：java, multithreading, memory, stack-size

有谁知道是否有办法动态（运行时）增加主线程的堆栈大小？另外，我相信这是同一个问题，是否可以`Thread`在实例化后增加/更新 a 的堆栈大小？

`Thread`的 CTOR 允许定义其堆栈大小，但我找不到任何更新它的方法。实际上，我在JDK中没有发现任何堆栈大小的管理（这往往表明这是不可能的），一切都在VM中完成。

根据[java 语言规范](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.2)，可以在“创建堆栈时”设置堆栈大小，但有一个注释：

***Java 虚拟机实现可以为程序员或用户提供对 Java 虚拟机堆栈的初始大小的控制，以及在动态扩展或收缩 Java 虚拟机堆栈的情况下，对最大和最小大小的控制。***

IMO 不是很清楚，这是否意味着某些 VM 处理具有**最大（编辑）**堆栈大小的线程在给定范围内演变？我们可以用 Hostpot 做到这一点吗（我在 Xss 旁边没有找到任何与堆栈大小相关的选项）？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T08:35:02.173

堆栈大小在使用时会动态更新，因此您永远不需要这样做。

您可以设置的是它可以使用的最大大小`-Xss`这是使用的虚拟内存大小，您可以在 64 位 JVM 上将其设置为任意大小。实际使用的内存取决于您使用的内存量。;)

编辑：重要的区别是最大大小被保留为虚拟内存（堆也是如此）。即地址空间是保留的，这也是不能扩展的原因。在 32 位系统中，地址空间有限，这仍然是个问题。但在 64 位系统中，您通常拥有高达 256 TB 的虚拟内存（处理器限制），因此虚拟内存很便宜。实际内存以页为单位分配（通常为 4 KB），并且仅在使用时分配。这就是为什么即使在启动时分配了最大堆大小，Java 应用程序的内存也会随着时间的推移而增长。线程堆栈也会发生同样的事情。仅分配实际接触的页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T06:54:29.390

在标准 JDK 中没有办法做到这一点，甚至`stackSize`争论也不是一成不变的：

> **stackSize 参数的影响（如果有）高度依赖于平台。**...**在某些平台上，stackSize 参数的值可能没有任何影响。**...虚拟机可以自由地将stackSize参数视为建议。

（重点是[原文](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#Thread%28java.lang.ThreadGroup,%20java.lang.Runnable,%20java.lang.String,%20long%29)。）

# asp.net - 会话与跨页回发 asp.net

> ID：10136282
> 
> 赞同：0
> 
> 时间：2012-04-13T06:35:22.760
> 
> 标签：asp.net, postback, session-variables

我需要在会话中绑定一些变量，但它们在跨页面回发后消失。

在跨页面回发的情况下，在服务器端存储变量的最佳方式是什么？

非常感谢干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:38:49.637

试试这个[http://www.java2s.com/Code/ASP/Session-Cookie/GetvaluefromsessionincrosspagepostingVB.htm](http://www.java2s.com/Code/ASP/Session-Cookie/GetvaluefromsessionincrosspagepostingVB.htm)

# android - 需要帮助在带有 Arduino 网站按钮的 Android 应用程序中实现逻辑。

> ID：10136284
> 
> 赞同：0
> 
> 时间：2012-04-13T06:35:39.467
> 
> 标签：android, logic, arduino

# 背景故事：

我有一个带有[Async Labs](http://asynclabs.com/)的 Wishield的[Arduino](http://arduino.cc) ，连接到车库门开启器。Arduino 会弹出一个带有按钮的网站。您按下按钮，页面会以按钮的新状态（打开或关闭）刷新。唯一的问题是别针（以及车库门遥控器）一直设置为开启状态。我制作了一个 Android 应用程序，它从这个网页获取数据并从应用程序中“按下”按钮。

# 问题：

Arduino 和我的 Android 应用程序中的一切都运行良好，我需要的是应用程序内部的某种逻辑。我只是不知道如何或在哪里实现逻辑。我希望能够按下按钮一次，它会打开门，打开电路，然后关闭电路。现在它的工作原理是这样的：

```
-------------------------------------------------------------------
Door   |  Circuit
closed |  off    -- default: door closed circuit off
open   |  on     -- button pushed 1st time: door open circuit on
open   |  off    -- button pushed 2nd time: door open circuit off
closed |  on     -- button pushed 3rd time: door closed circuit on
closed |  off    -- button pushed 4th time: door closed circuit off 
```

我认为它应该像这样工作：

```
---------------------------------------------------------------------
Door   |  Circuit
closed |  off    -- default: door closed circuit off
open   |  on     -- button pushed 1st time: door open circuit on
open   |  off    -- after a set time app automatically closes circuit
closed |  on     -- button pushed 2nd time: door closed circuit on
closed |  off    -- after a set time app automatically closes circuit 
```

## 相关代码：

```
//Http Task
private class httpTask extends AsyncTask<Void, Void, Void> {
HttpResponse responseGet = null;
HttpEntity resEntityGet = null;

    @Override
    protected void onPreExecute() {
        EditText01 = (TextView) findViewById(R.id.EditText01);
        GetMethod test = new GetMethod();
        String returned;
        try {
            returned = test.getInternetData();

                if (pinCheck == 2){

                if(returned.toString().contains("\"Opener 2\">Door Closed")){  //"\"Opener 2\">Door Closed"
                    Toast.makeText(getBaseContext(), "Opening the door.", Toast.LENGTH_SHORT).show();
                    findViewById(R.id.button1).setBackgroundResource(R.drawable.dooropen);                  
                }
                if(returned.toString().contains("\"Opener 2\">Door Open")){
                    Toast.makeText(getBaseContext(), "Closing the door.", Toast.LENGTH_SHORT).show();
                    findViewById(R.id.button1).setBackgroundResource(R.drawable.doorclosed);                    
                }
                } 

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        dialog = new ProgressDialog(GarageDoorOpenerActivity.this);
        dialog.setMessage("Working");
        dialog.show();
    }
    @Override
    protected Void doInBackground(Void... params) {
      try {
    HttpClient client = new DefaultHttpClient();
    HttpGet get = new HttpGet(customURL[0] + URL + customURL[1] + pin);
    responseGet = client.execute(get);  
    resEntityGet = responseGet.getEntity();
  } catch (Exception e) {
      e.printStackTrace();
  }
    return null;
    }
    @Override
    protected void onPostExecute(Void params) {
        if(dialog.isShowing())
            dialog.dismiss();
    if (resEntityGet != null) {  
        Toast.makeText(getBaseContext(), "Done. ", Toast.LENGTH_SHORT).show();
        resEntityGet = null;
    }
    }
}

public class GetMethod {
    public String getInternetData() throws Exception{
        BufferedReader in = null;
        String data = null;
        try{
            HttpClient client = new DefaultHttpClient();
            URI url = new URI(customURL[0] + URL + customURL[1]); //customURL[0] + URL + customURL[1]
            HttpGet request = new HttpGet();
            request.setURI(url);
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");
            while ((l = in.readLine()) !=null){
                sb.append(l + nl);              
            }
            in.close();
            data = sb.toString();
            return data;
        } finally{
            if (in !=null){
                try{
                    in.close();
                    return data;
                } catch (Exception e){
                    e.printStackTrace();
                }
            }
        }
    } 
```

如果有人想制作自己的版本，我可以发布完整的 Android 和 Arduino 代码。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:32:31.190

根据我对您的描述的了解，您已准备就绪，除了在每次按下按钮后关闭电路的定时任务。

在每次按下按钮时启动倒数计时器可能会起作用。见，[http://developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)

这是一个例子

```
new CountDownTimer(30000, 1000) { //30 seconds count-down

 public void onTick(long millisUntilFinished) {
     //no need to do anything here
 }

 public void onFinish() {
     turnOffCircuit(); 
 }
}.start(); 
```

Arduino 很酷的东西。实际上昨天买了我的第一个 Arduino 套件 :)

# iphone - 如何在 xcode 4.3.1 中使用 Springboard 框架

> ID：10136287
> 
> 赞同：1
> 
> 时间：2012-04-13T06:36:20.163
> 
> 标签：iphone

我想使用“跳板”框架，我已经通过拖放从 github.com 下载的 xcode 中添加了该框架，但是当我想运行它时出现了一些错误：

> 架构 i386 的未定义符号：
> “_SBSCopyLocalizedApplicationNameForDisplayIdentifier”，引用自：
> 
> -ViewController.old 中的 [ViewController getActiveApps]：未找到架构 i386 的符号：错误：链接器命令
> 
> 退出代码 1 失败（使用 -v 查看调用）

为什么这个错误任何人都有任何想法。我认为在“headersearch path”设置中存在一些问题，请任何人说如何设置。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:45:46.953

拥有标头是不够的，您还必须链接到跳板二进制文件。

但是，我很确定跳板在应用程序中不可用，所以即使你让它链接，我很确定调用任何跳板方法都会失败。

使用跳板的方法你需要做的是做一个移动基板扩展。

# r - 如何从svg文件获取路径坐标到R

> ID：10136289
> 
> 赞同：6
> 
> 时间：2012-04-13T06:36:33.580
> 
> 标签：r, svg, inkscape

可能这是一个愚蠢的问题，但我没有很多这样做的经验。我需要从多边形获取坐标以在 R 中创建轮廓。它是一个大约 1000 个点的复杂多边形，因此手动输入坐标是疯狂的。我还需要提取轮廓内某些对象的 xy 位置。我尝试使用 Illustrator 和 Inkscape 创建一个包含所有信息的 svg 文件。考虑到 svg 文件包含所有信息，这看起来是一个不错的选择。有没有办法从路径或多边形节点中提取坐标？或者还有其他更简单的方法来完成这个过程吗？我将非常感谢任何帮助，因为我必须为大约 30 张图像做这件事。干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T07:39:59.597

您可以使用`XML`包来提取坐标。

```
# Sample data
library(RCurl)
url <- "http://upload.wikimedia.org/wikibooks/en/a/a8/XML_example_polygon.svg"
svg <- getURL(url)

# Parse the file
library(XML)
doc <- htmlParse(svg)

# Extract the coordinates, as strings
p <- xpathSApply(doc, "//polygon", xmlGetAttr, "points")

# Convert them to numbers
p <- lapply( strsplit(p, " "), function(u) 
  matrix(as.numeric(unlist(strsplit(u, ","))),ncol=2,byrow=TRUE) )
p 
```

但是，这会忽略要应用于多边形的任何变换。

# ruby-on-rails - 访问基于 Ubuntu 的 Rails 服务器上的文件夹（不断收到“没有这样的文件..”）

> ID：10136293
> 
> 赞同：0
> 
> 时间：2012-04-13T06:36:45.000
> 
> 标签：ruby-on-rails, linux, ffmpeg

我在 Ubuntu 上设置 Rails+ffmpeg 并且我不断得到

```
 Errno::ENOENT
 No such file or directory.. 
```

设置如下：

/home/用户名/RailsApp /home/用户名/videos/

我正在尝试运行 ffmpeg 来写入 /home/username/videos，我使用了“/home/username/videos/”和“~/videos/”但没有运气..

我错过了什么？

“www-data”用户包含在“用户名”组中。

Rails 应用程序工作正常，否则..

非常感谢任何输入！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:51:05.990

一般最好不要依赖本地文件系统。尝试以下操作：

```
path_to_video = "#{Rails.root.to_s}/videos/video1.avi"
print File.exist?(path_to_video) 
```

如果您不想在制作服务器上`Rails/public`创建链接`ln -s target link_name`并创建视频，您应该以类似的方式进行操作，例如使用 capistrano。

顺便提一句。视频的权利是什么？`-rw-r--r--`? 在哪个用户下运行您的网络服务器？

# load-balancing - SignalR 和负载平衡

> ID：10136295
> 
> 赞同：7
> 
> 时间：2012-04-13T06:37:13.007
> 
> 标签：load-balancing, signalr

我们的应用程序适用于任何负载平衡调度，可以是随机选择、随机 DNS 或循环。现在我们正在考虑在我们的项目中使用 SignalR，我们想知道 SignalR 处理这些负载平衡方案的效果如何。

还没有测试任何东西，我们正在考虑如果传输使用 EventSource 或 WebSockets，SignalR 在这种情况下是否可以很好地工作，但是如果它退回到长轮询呢？

我很难在谷歌上搜索有关此主题的更多详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:42:05.647

今天有几个选择。[Redis](https://github.com/SignalR/SignalR.Redis)或天蓝色。我目前正在使用效果良好的 redis 总线实现。

# c# - 当用户按下输入按钮 wpf 时，如何在键盘上触发按键事件

> ID：10136300
> 
> 赞同：2
> 
> 时间：2012-04-13T06:37:43.673
> 
> 标签：c#, wpf, widget

我在 wpf 登录表单中有一个登录按钮。我希望该用户有两个选项，第一个是让用户填写用户名和密码并使用鼠标按下登录按钮，第二个选项是用户可以从键盘按下 ENTER 键。我怎样才能让它工作？鼠标单击完成了这项工作，但按 ENTER 不起作用。

```
<Button Canvas.Left="157" Canvas.Top="292" Height="24" BorderThickness="0" BorderBrush="White" Content="Login" Name="btnLogin" Width="99" Click="btnLogin_Click"  Keyboard.KeyDown="bttnLogin_Enter"  /> 
```

我的代码是：---

```
 private void bttnLogin_Enter(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            try
            {
                 /// My code here
             }
           catch()
              {
              }
        }
     } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T06:41:00.057

将`IsDefault`属性设置`Button`为`True`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T06:42:09.607

只需设置`IsDefault="True"`在您的按钮上。这将使您的按钮在用户按回车时自动单击。不需要 KeyDown 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T06:43:34.543

除了将按钮的 IsDefault 属性设置为 true （这将为整个表单设置 Enter 操作）之外，您还可以捕获 Enter 键按下文本框。如果要捕获 Enter multiple key press 按多个文本框，请检查以下示例

假设你有文本框

```
<StackPanel>
  <TextBlock Width="300" Height="20">
    Type some text into the TextBox and press the Enter key.
  </TextBlock>
  <TextBox Width="300" Height="30" Name="textBox1"
           KeyDown="OnKeyDownHandler"/>
  <TextBlock Width="300" Height="100" Name="textBlock1"/>
</StackPanel> 
```

在后面的代码中：

```
private void OnKeyDownHandler(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Return)
    {
        textBlock1.Text = "You Entered: " + textBox1.Text;
    }
} 
```

# ios - 在 Delphi Firemonkey iOS 开发中使用原生 C 静态库

> ID：10136303
> 
> 赞同：1
> 
> 时间：2012-04-13T06:37:55.377
> 
> 标签：ios, delphi, static-libraries, firemonkey

我对使用 Firemonkey 制作 iOS 应用程序很感兴趣。我想在这个应用程序中使用几个本机 C 库。我知道 iOS 不允许动态链接库，但是有没有办法在这个 firemonkey iOS 应用程序中使用静态库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:37:24.767

是的，您可以使用 C 静态库通过 xcode 与 Firemonkey iOS 应用程序链接。我是在 RADStudio X2 之外使用 Xcode 完成的。使用 RADStudio，我生成了 xcode 项目。在 Mac 上，我打开了 xcode 项目并添加了：

```
function C_func(double :x):double; cdecl; external;

{$linklib my_c_lib.a} 
```

我在 xcode 中创建了静态库项目（名为 my_c_lib），其中包含一个 C 文件：

```
double C_func(double x)
{
    return x+2.5;
} 
```

我想以同样的方式你可以使用已经编译的静态库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:37:22.260

这是我制作的一个 iOS 应用程序： Unit1.pas 由 XE2 生成：

```
unit Unit1;

interface

uses
  SysUtils, Types, UITypes, Classes, Variants, FMX_Types, FMX_Controls, FMX_Forms,
  FMX_Dialogs, FMXTee_Engine, FMXTee_Series, FMXTee_Procs, FMXTee_Chart,
  FMX_ExtCtrls;

type
  TForm1 = class(TForm)
    CornerButton1: TCornerButton;
    Chart1: TChart;
    Series1: TLineSeries;
    Label1: TLabel;

    procedure CornerButton1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    x : double; // I added this in Xcode Editor
  end;

// I added this declaration
function tst_function(x:double):double;cdecl;external;
var
  Form1: TForm1;

implementation

{$R *.lfm}
{$link tst1.o} // I added this

procedure TForm1.CornerButton1Click(Sender: TObject);
var      i: integer; x : double;
begin
for  i := 1  to  500  do
begin
x:=tst_function(i*3.14/250.0);
Series2.Add(x);

end

end;

end. 
```

C 文件 tst1.c 是：

```
#include <stdio.h>
#include <math.h>

double tst_function(double x)
{
    return sin(x)+0.25;
} 
```

# jquery - 计算 jQuery 可见的 li 元素

> ID：10136314
> 
> 赞同：11
> 
> 时间：2012-04-13T06:39:29.370
> 
> 标签：jquery, html, css, jquery-selectors, html-lists

我用以下 jQuery 脚本计算我的 li 元素：

**HTML：**

```
<ul class="relatedelements">
   <li style="display:none;" class="1">anything</li>
   <li style="display:none;" class="2">anything</li>
   <li style="display:none;" class="3">anything</li>
</ul> 
```

**jQuery：**

```
 $(function() {
        var numrelated=$('.relatedelements > li').length;
        $('.num-relatedelements').html(numrelated); 
    }); 
```

--> 脚本返回：**3**

我在使用 jQuery时更改了`style="display: none"`一些 li 元素的属性，例如：`$(document).ready``$('.2').show();`

我现在想用以下脚本更改脚本以仅计算可见的 li 元素（我刚刚在 jQuery 文档之后添加了 :visible ）：

```
 $(function() {
        var numrelated=$('.relatedelements > li:visible').length;
        $('.num-relatedelements').html(numrelated); 
    }); 
```

--> 脚本返回：**没有**

我不知道为什么它不起作用 - 也许有人有任何提示或想法？任何帮助都非常感谢。预先感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T06:48:40.070

对我来说很好

```
$(document).ready(function(){
    $('.2').show();
    var numrelated=$('.relatedelements > li:visible').length;
    $('.num-relatedelements').html(numrelated); 
});​ 
```

JsFiddle 林德：http: [//jsfiddle.net/xuckF/1/](http://jsfiddle.net/xuckF/1/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T06:44:41.237

在这里工作正常：

[http://jsfiddle.net/jtbowden/FrPPr/（1](http://jsfiddle.net/jtbowden/FrPPr/)个可见）

[http://jsfiddle.net/jtbowden/FrPPr/1/（0](http://jsfiddle.net/jtbowden/FrPPr/1/)可见）

现在，使用数字作为类名是**非法**的。( [W3C Spec](http://www.w3.org/TR/CSS21/syndata.html#characters) , bullet 2) 类名必须以字母开头。也许用它进行操作会导致问题？

除此之外，我只能猜测您的问题在其他地方。您使用的是最新版本的 jQuery 吗？（虽然在我的测试中，它一直工作到 1.3，然后它根本不起作用）

您是否在实际代码中拼错了“可见”。（我以前做过）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T06:57:09.380

如果元素或其父元素在文档中不占用空间，则假定元素为隐藏。不考虑 CSS 可见性。

**看法：**

```
<ul class="relatedelements">
   <li class="1 hidden">anything</li>
   <li class="2 hidden">anything</li>
   <li class="3 hidden">anything</li>
   <li class="4">anything</li>
    <li class="5">anything</li>
    <li class="6">anything</li>
    <li class="7 hidden">anything</li>
</ul>

<div class="num-relatedelements"></div> 
```

**CSS**

```
.hidden {
    display: none;
}​ 
```

**JS**

```
$(function() {  
   var numrelated= $('.relatedelements > li:not(.hidden)').length;
   alert(numrelated);
   $('.num-relatedelements').html(numrelated); 
});​ 
```

我为你做了一个 jsfiddle：http: [//jsfiddle.net/mgrcic/3BzKT/3/](http://jsfiddle.net/mgrcic/3BzKT/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T06:47:33.630

它是这样工作的：

```
$(function() {
    var numrelated=$('.relatedelements > li:visible').length;
    $('.num-relatedelements').html(numrelated); 
}); 
```

[你可以在那里](http://jsfiddle.net/eFY8r/)看到工作示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T06:48:01.873

看看这个：http: [//jsfiddle.net/vnMrQ/](http://jsfiddle.net/vnMrQ/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T06:48:32.830

是的，正如大家已经说过的那样，它工作正常，即使你 .show() 准备好元素文档：

[http://jsfiddle.net/bKyt4/](http://jsfiddle.net/bKyt4/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T06:52:35.013

I have tried this out and it seems to work i.e. I get a result of '1'.

```
$(function() {
    $('.2').show();

    var numrelated=$('.relatedelements > li:visible').length;
    $('.num-relatedelements').html(numrelated); 
}); 
```

NB: I don't think having numbers for the value of an attribute is valid markup

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-13T06:47:51.437

您的脚本不返回任何内容，因为所有 DIV 都是隐藏的。显示 1 时返回 1。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-01T16:17:35.840

在第一行中，只需定义一个 div 或 span 或要显示计数的段落，在第二行中定义包含 li 的 ul

```
 $('.notify').html(
 $('#ul-notifications li').length); 
```

# ruby - 如何使用 Ruby mixin 作为类的补丁

> ID：10136315
> 
> 赞同：3
> 
> 时间：2012-04-13T06:39:31.867
> 
> 标签：ruby, metaprogramming, mixins

我开始研究 Ruby，因为我正在寻找一种更动态的 Java 替代方案。我喜欢在定义后如何在 Ruby 中修改类，例如：

```
class A
  def print
    "A"
  end
end

class B < A
  def print
    super + "B"
  end
end

class A
  alias_method :print_orig, :print
  def print
    print_orig + "+"
  end
end

puts B.new.print # A+B 
```

现在我尝试对 mixins 做同样的事情：

```
class A
  def print
    "A"
  end
end

class B < A
  def print
    super + "B"
  end
end

module Plus
  alias_method :print_orig, :print
  def print
    print_orig + "+"
  end
end

A.extend(Plus) # variant 1
B.extend(Plus) # variant 2
class A # variant 3
  include Plus
end
class B # variant 4
  include Plus
end
puts B.new.print 
```

然而，没有一个变体产生预期的结果。顺便说一句，预期结果如下：我希望能够使用 mixin 来“修补”类 A，以修改其行为。我想使用 mixins，因为我想“修补”几个具有相同行为的类。

有可能做我想做的事吗？如果是，如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T06:48:14.423

您的模块代码不起作用，因为它在错误的上下文中执行。您需要在 的上下文中执行它`A`，但它会在 的上下文中进行评估`Plus`。这意味着，您需要从`self`更改`Plus`为`A`。

观察：

```
class A
  def print
    "A"
  end
end

class B < A
  def print
    super + "B"
  end
end

module Plus
  self # => Plus
  def self.included base
    self # => Plus
    base # => A
    base.class_eval do
      self # => A
      alias_method :print_orig, :print
      def print
        print_orig + "+"
      end
    end
  end
end

A.send :include, Plus
B.new.print # => "A+B" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:53:33.627

You can't really use Mixins in this way. You're generating a conflict between the class and its mixin. [Mixins implicitly resolve the conflict by linearization.](https://stackoverflow.com/questions/925609/mixins-vs-traits) Bottom line is: In case of conflict, the class's method is preferred over the mixin. To fix that, you can use [Sergio' Tulentsev's approach and have the mixin change its base class aggressively](https://stackoverflow.com/a/10136408/52573).

Or, you can add methods reflectively. Consider this example, which I've stolen from [Mark's blog](http://www.vitarara.org/cms/ruby_metaprogamming_declaratively_adding_methods_to_a_class).

```
class Talker

  [:hello, :good_bye].each do |arg|
    method_name = ("say_" + arg.to_s).to_sym
    send :define_method, method_name do
      puts arg
    end
  end

end

t = Talker.new
t.say_hello
t.say_good_bye 
```

# postgresql - Postgres 9.0 + 翻译函数和 ascii 代码

> ID：10136317
> 
> 赞同：1
> 
> 时间：2012-04-13T06:39:34.177
> 
> 标签：postgresql, escaping, standards

我使用翻译功能来处理不区分重音的搜索。为了改进这个请求，我创建了一个匹配索引：

```
CREATE INDEX person_lastname_ci_ai_si
ON person
USING btree
(translate(upper(lastname::text), '\303\200\303\201\303\202\303\203\303\204\303\205\303\206\303\207\303\210\303\211\303\212\303\213\303\214\303\215\303\216\303\217\303\221\303\222\303\223\303\224\303\225\303\226\303\230\303\231\303\232\303\233\303\234\303\235\303\237\303\240\303\241\303\242\303\243\303\244\303\245\303\246\303\247\303\250\303\251\303\252\303\253\303\254\303\255\303\256\303\257\303\261\303\262\303\263\303\264\303\265\303\266\303\270\303\271\303\272\303\273\303\274\303\275\303\277'::text, 'AAAAAAACEEEEIIIINOOOOOOUUUUYSaaaaaaaceeeeiiiinoooooouuuuyy'::text)
); 
```

它适用于 postgres 9.1，但似乎不适用于 9.0。Postgres 9.0 似乎要取代

```
'\303\200\303\201\303\202\303\203\303\204\303\205\303\206\303\207\303\210\303\211\303\212\303\213\303\214\303\215\303\216\303\217\303\221\303\222\303\223\303\224\303\225\303\226\303\230\303\231\303\232\303\233\303\234\303\235\303\237\303\240\303\241\303\242\303\243\303\244\303\245\303\246\303\247\303\250\303\251\303\252\303\253\303\254\303\255\303\256\303\257\303\261\303\262\303\263\303\264\303\265\303\266\303\270\303\271\303\272\303\273\303\274\303\275\303\277' 
```

经过

```
ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÑÒÓÔÕÖØÙÚÛÜÝßàáâãäåæçèéêëìíîïñòóôõöøùúûüýÿ 
```

然后，因为我的代码使用 ascii 代码执行搜索，所以它不使用索引..

有没有办法避免 postgres 在创建索引时将 ascii 代码转换为字符？

例如 ：

```
select '\303\200\303\201\303\202\303\203\303\204\303\205\303\206\303\207\303\210\303\211\303\212\303\213\303\214\303\215\303\216\303\217\303\221\303\222\303\223\303\224\303\225\303\226\303\230\303\231\303\232\303\233\303\234\303\235\303\237\303\240\303\241\303\242\303\243\303\244\303\245\303\246\303\247\303\250\303\251\303\252\303\253\303\254\303\255\303\256\303\257\303\261\303\262\303\263\303\264\303\265\303\266\303\270\303\271\303\272\303\273\303\274\303\275\303\277' 
```

;

结果

```
ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÑÒÓÔÕÖØÙÚÛÜÝßàáâãäåæçèéêëìíîïñòóôõöøùúûüýÿ 
```

我怎么能有这个结果？

```
\303\200\303\201\303\202\303\203\303\204\303\205\303\206\303\207\303\210\303\211\303\212\303\213\303\214\303\215\303\216\303\217\303\221\303\222\303\223\303\224\303\225\303\226\303\230\303\231\303\232\303\233\303\234\303\235\303\237\303\240\303\241\303\242\303\243\303\244\303\245\303\246\303\247\303\250\303\251\303\252\303\253\303\254\303\255\303\256\303\257\303\261\303\262\303\263\303\264\303\265\303\266\303\270\303\271\303\272\303\273\303\274\303\275\303\277 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:58:03.383

从 9.1 版开始，PostgreSQL[`standard_conforming_strings`](http://www.postgresql.org/docs/current/interactive/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)选项默认为`ON`.

这意味着反斜杠`\`字符按原样处理而不是转义符号，这样做是为了防止 SQL 注入攻击；这遵循 SQL 标准建议。仍然可以使用`\`获取特殊字符，但仅限于[字符串常量](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-STRINGS-ESCAPE)。

对于 PostgreSQL 的 9.1 之前的版本，我想这些选项是可能的：

1.  将系统范围的`standard_conforming_strings`选项更改为`ON`，但这会影响整个集群，并可能在其他区域产生意想不到的结果；

2.  [根据每个用户](http://www.postgresql.org/docs/current/interactive/sql-alterrole.html)更改`standard_conforming_strings`选项，使用，这个也可能有副作用；`ALTER ROLE ... SET standard_conforming_strings TO on;`

3.  在创建索引之前，使用 plain`SET standard_conforming_strings TO on;`作为您在会话中发出的第一个命令；

4.  将所有反斜杠加倍，以便在语句中将其视为文字`\`符号。`CREATE INDEX ...`

让我知道这是否有帮助。

# android - 如何在 Android 中通过蓝牙建立多个传出连接

> ID：10136318
> 
> 赞同：0
> 
> 时间：2012-04-13T06:39:38.637
> 
> 标签：android, bluetooth

使用我当前的应用程序，多个设备可以连接到一个设备。但对比不起作用。我假设设备 A 启动了与设备 B 的连接。现在，如果 A 尝试保持与 B 的连接并启动与设备 C 的另一个连接，那么 AB 的连接就会中断。那么有没有办法避免连接到AC时丢失AB的连接？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:44:55.307

这可能是您使用的 Android 版本/实现的问题：我发现某些设备（三星和 Nexus One）上的某些 Android 版本（2.2 或更低版本）不可能运行多个蓝牙设备同时连接。在 2.3.3 上完美运行的完全相同的 apk 在运行 2.2 的 Nexus One 或运行 2.2 的 Samsung Vibrant 上会失败。我会查看您正在使用的 Android 版本，看看在较新的版本上运行是否可以为您解决此问题。

# javascript - 从 Python 执行 Javascript

> ID：10136319
> 
> 赞同：63
> 
> 时间：2012-04-13T06:39:40.993
> 
> 标签：javascript, python, screen-scraping

我有使用 xpath 抓取的 HTML 网页。`etree.tostring`某个节点的 给了我这个字符串：

```
<script>
<!--
function escramble_758(){
  var a,b,c
  a='+1 '
  b='84-'
  a+='425-'
  b+='7450'
  c='9'
  document.write(a+c+b)
}
escramble_758()
//-->
</script> 
```

我只需要`escramble_758()`. 我可以编写一个正则表达式来弄清楚整个事情，但我希望我的代码保持整洁。什么是最好的选择？

我正在浏览以下库，但我没有看到确切的解决方案。他们中的大多数人都在尝试模仿浏览器，让事情变得缓慢。

*   [http://code.google.com/p/python-spidermonkey/](http://code.google.com/p/python-spidermonkey/)（清楚地说`it's not yet possible to call a function defined in Javascript`）
*   [http://code.google.com/p/webscraping/](http://code.google.com/p/webscraping/)（看不到任何关于 Javascript 的内容，我可能错了）
*   [http://pypi.python.org/pypi/selenium](http://pypi.python.org/pypi/selenium)（模拟浏览器）

编辑：*一个例子会很棒..（准系统会做）*

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2015-05-29T19:08:35.240

您还可以使用 Js2Py，它是用纯 python 编写的，能够执行 javascript 并将其转换为 python。支持几乎整个 JavaScript 甚至标签、getter、setter 和其他很少使用的功能。

```
import js2py

js = """
function escramble_758(){
var a,b,c
a='+1 '
b='84-'
a+='425-'
b+='7450'
c='9'
document.write(a+c+b)
}
escramble_758()
""".replace("document.write", "return ")

result = js2py.eval_js(js)  # executing JavaScript and converting the result to python string 
```

Js2Py 的优点包括可移植性和与 python 的极其容易的集成（因为基本上 JavaScript 正在被翻译成 python）。

安装：

```
pip install js2py 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-04-13T07:07:56.930

使用[PyV8](https://code.google.com/p/pyv8/)，我可以做到这一点。但是，我必须替换`document.write`为，`return`因为没有 DOM，因此没有`document`.

```
import PyV8
ctx = PyV8.JSContext()
ctx.enter()

js = """
function escramble_758(){
var a,b,c
a='+1 '
b='84-'
a+='425-'
b+='7450'
c='9'
document.write(a+c+b)
}
escramble_758()
"""

print ctx.eval(js.replace("document.write", "return ")) 
```

或者您可以创建一个模拟文档对象

```
class MockDocument(object):

    def __init__(self):
        self.value = ''

    def write(self, *args):
        self.value += ''.join(str(i) for i in args)

class Global(PyV8.JSClass):
    def __init__(self):
        self.document = MockDocument()

scope = Global()
ctx = PyV8.JSContext(scope)
ctx.enter()
ctx.eval(js)
print scope.document.value 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2018-03-21T09:16:52.757

PyV8 的另一种解决方案似乎没有维护并且依赖于旧版本的 libv8。

[PyMiniRacer](https://github.com/sqreen/PyMiniRacer)它是 v8 引擎的包装器，它适用于新版本并得到积极维护。

`pip install py-mini-racer`

```
from py_mini_racer import py_mini_racer
ctx = py_mini_racer.MiniRacer()
ctx.eval("""
function escramble_758(){
    var a,b,c
    a='+1 '
    b='84-'
    a+='425-'
    b+='7450'
    c='9'
    return a+c+b;
}
""")
ctx.call("escramble_758") 
```

是的，您必须`document.write`按照`return`其他人的建议替换

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-08T15:19:23.953

您可以使用[requests-html](https://github.com/psf/requests-html)下载并在下面使用 chromium。

```
from requests_html import HTML

html = HTML(html="<a href='http://www.example.com/'>")

script = """
function escramble_758(){
    var a,b,c
    a='+1 '
    b='84-'
    a+='425-'
    b+='7450'
    c='9'
    return a+c+b;
}
"""

val = html.render(script=script, reload=False)
print(val)
# +1 425-984-7450 
```

更多关于这个阅读[这里](https://requests-html.kennethreitz.org/#using-without-requests)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-16T23:46:54.333

您可以使用 js2py 上下文来执行您的 js 代码并使用模拟文档对象从 do​​cument.write 获取输出：

```
import js2py

js = """
var output;
document = {
    write: function(value){
        output = value;
    }
}
""" + your_script

context = js2py.EvalJs()
context.execute(js)
print(context.output) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-31T06:13:16.177

quickjs 应该是 quickjs 出来后的最佳选择。只是`pip install quickjs`，你准备好了。

根据 README 上的示例进行修改。

```
from quickjs import Function

js = """
function escramble_758(){
var a,b,c
a='+1 '
b='84-'
a+='425-'
b+='7450'
c='9'
document.write(a+c+b)
escramble_758()
}
"""

escramble_758 = Function('escramble_758', js.replace("document.write", "return "))

print(escramble_758()) 
```

[https://github.com/PetterS/quickjs](https://github.com/PetterS/quickjs)

# antlr - 即使不匹配，ANTLR 词法分析器规则也会消耗字符？

> ID：10136324
> 
> 赞同：5
> 
> 时间：2012-04-13T06:40:08.483
> 
> 标签：antlr, antlr3, antlrworks

我有一个 antlr 词法分析器规则的奇怪副作用，我创建了一个（几乎）最小的工作示例来演示它。例如，在这个例子中，我想匹配字符串`[0..1]`。但是当我调试语法时，到达解析器的令牌流只包含`[..1]`. 第一个整数，无论​​它包含多少个数字，总是被消耗掉，我不知道这是怎么发生的。如果我删除`FLOAT`规则一切都很好，所以我猜错误在于该规则的某个地方。但由于它根本不应该匹配任何东西，`[0..1]`我很困惑。

对于我可能出错的任何指示，我都会很高兴。这是我的例子：

```
grammar min;
options{
language = Java;
output = AST;
ASTLabelType=CommonTree;
backtrack = true;
}
tokens {
  DECLARATION;
}

declaration : LBRACEVAR a=INTEGER DDOTS b=INTEGER RBRACEVAR -> ^(DECLARATION $a $b);

EXP : 'e' | 'E';
LBRACEVAR: '[';
RBRACEVAR: ']';
DOT: '.';
DDOTS: '..';

FLOAT
    : INTEGER DOT POS_INTEGER
    | INTEGER DOT POS_INTEGER EXP INTEGER
    | INTEGER EXP INTEGER
    ;

INTEGER : POS_INTEGER | NEG_INTEGER;
fragment NEG_INTEGER : ('-') POS_INTEGER;
fragment POS_INTEGER : NUMBER+;
fragment NUMBER: ('0'..'9'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T07:18:08.600

被`'0'`词法分析器丢弃，并产生以下错误：

```
line 1:3 no viable alternative at character '.'
line 1:2 extraneous input '..' expecting INTEGER 
```

这是因为当词法分析器遇到 时`'0.'`，它会尝试创建一个`FLOAT`标记，但不能。并且由于没有其他规则可以依靠 match `'0.'`，它会产生错误、丢弃`'0'`并创建一个`DOT`令牌。

这就是 ANTLR 词法分析器的工作原理：它不会回溯以匹配`INTEGER`后跟 a `DDOTS`（请注意，`backtrack=true`仅适用于解析器规则！）。

在`FLOAT`规则中，您必须确保当双倍`'.'`领先时，您会产生一个`INTEGER`标记。您可以通过添加句法谓词（部分）来做到这一点，并且仅当单个后跟一个数字（部分）时才`('..')=>`生成标记。请参阅以下演示：`FLOAT``'.'``('.' DIGIT)=>`

```
declaration
 : LBRACEVAR INTEGER DDOTS INTEGER RBRACEVAR
 ;

LBRACEVAR : '[';
RBRACEVAR : ']';
DOT       : '.';
DDOTS     : '..';

INTEGER
 : DIGIT+
 ;

FLOAT
 : DIGIT+ ( ('.' DIGIT)=> '.' DIGIT+ EXP? 
          | ('..')=>      {$type=INTEGER;} // change the token here
          |               EXP
          )
 ;

fragment EXP   : ('e' | 'E') DIGIT+;
fragment DIGIT : ('0'..'9'); 
```

# ssh - PSCP将文件从godaddy复制到我的Windows机器

> ID：10136326
> 
> 赞同：22
> 
> 时间：2012-04-13T06:40:13.073
> 
> 标签：ssh, download, putty, pscp

我想备份我在 godaddy 上托管的网站。

我从我的 Windows DOS 使用 pscp 命令并尝试下载整个 public_html 文件夹。我的命令是：

> > pscp -r user@host:public_html/d:\sites\;

文件正在正确下载，文件夹也正在下载。但问题是 public_html 和其他子文件夹有两个文件夹，如“./”和“../”。由于这两个文件夹，我的副本失败并且我收到“安全违规：远程主机试图写入”a。或'..'路径！”错误。

希望任何人都可以为此提供帮助。注意：我只有 ssh 访问权限，并且必须从 ssh 命令本身下载它。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-08-02T04:35:56.870

将星号附加到源应该可以修复它，例如

```
pscp -r user@host:public_html/* d:\sites\; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-16T11:27:40.863

您也可以通过不在源路径末尾添加“/”来做同样的事情。例如。

```
pscp -r user@host:public_html d:\sites 
```

如果您的目的地（即 d:\sites）不存在，上述命令将创建 public_html 目录。简单地说，我们可以说使用上面的命令我们可以制作 a ，因为它是`public_html`at的克隆`d:\sites`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-18T17:50:38.683

一件重要的事情：您需要在此处定义端口号“-P 22”。

```
pscp -r -P 22 user@host:public_html/* D:\sites 
```

就我而言，当我将端口号 22 与上述脚本一起使用时，它可以工作。

# iphone - 密码退出应用程序

> ID：10136332
> 
> 赞同：1
> 
> 时间：2012-04-13T06:40:43.827
> 
> 标签：iphone, ios, password-protection, iphone-privateapi

我正在开发一个不会在 AppStores 上分发的 iPhone 应用程序。我试图搜索私有 api 但没有运气。当用户尝试退出应用程序时，我想提示用户输入正确的密码，以使他能够退出应用程序。我怎样才能做到这一点？提前致谢。干杯！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T07:11:29.903

听起来您需要类似于此答案中描述的iOS“Kiosk Mode”的东西： [Put an iPhone or iPad into 'Store Demo' mode](https://stackoverflow.com/questions/5011774/lock-down-iphone-ipod-ipad-so-it-can-only-run-one-app/8994690#8994690)

将该描述与以下步骤结合使用可能会准确地实现您想要的：

1.  有一个“退出”按钮
2.  按下时显示密码对话框
3.  如果它是正确的，读取一个超出范围的数组位置（或做任何事情）以使应用程序崩溃

但是，安装了该配置后，您将卡在接下来启动的任何应用程序中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T06:52:57.113

你不能！您必须改为使用密码保护启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T07:02:36.663

如果你想阻止用户退出你的应用程序，你需要物理覆盖主页按钮。如果您的目标是做诸如信息亭或销售点系统之类的事情，这不是一个糟糕的解决方案，您可能希望将 iPad 安装在安全的外壳中以防止篡改或盗窃。市场上有很多这样的外壳，款式多样。

然而，对于一个普通的应用程序来说，确实没有解决方案——iOS 并不是为你想要做的任何事情而设计的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T07:13:57.353

我能想到做你想做的事情（即阻止访问某些应用程序）的唯一方法是替换[SpringBoard](http://en.wikipedia.org/wiki/SpringBoard)应用程序（这是 Apple 自己在 iPhone 和 iPad 的 App Store 模型中使用的方法，限制您可以在设备上执行的操作）。@owenfi 指出了一种无需越狱的方法，但总的来说它是有限的：您将无法“退出”应用程序，您基本上只能运行一个应用程序。

# jquery - 带有jquery的复选框图像表单

> ID：10136334
> 
> 赞同：0
> 
> 时间：2012-04-13T06:41:19.867
> 
> 标签：jquery

我想制作一个复选框表单，将鼠标悬停在图像上并使用 jquery 检查图像功能。

我成功地制作了每个功能，但没有一起工作。

这是我的 html 表单。

```
<label for="w_interest">
    <img src="/images/account/w_select.png_img"/ style='cursor:pointer;'>
    <input name="w_interest" type="checkbox" id="w_interest" style="display:none">
</label> 
```

这是jQuery

```
$(document).ready(function () {
  $('#w_interest').hover(
    function () {
        $('img', this).attr('src', '/images/account/w_select_hover.png');
    },
    function () {
        $('img', this).attr('src', '/images/account/w_select.png');
    }
  );

    $("#w_interest").change(function() {
       if(this.checked) {
           $(this).prev().attr("src", "/images/account/w_select_checked.png");
       } else {
           $(this).prev().attr("src", "/images/account/w_select.png");
       }
    });

}); 
```

1.  当用户在图像上移动鼠标指针时，图像变为鼠标悬停图像。

2.  当他或她单击图像时，它会变为选中图像。（当然，它检查复选框）

你能帮我结合这两个功能来实现它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:50:48.367

悬停事件设置在隐藏的输入字段上，因此无法正常工作。

```
<input name="w_interest" type="checkbox" id="w_interest" style="display:none"> 
```

所以我认为你想要图像上的悬停效果？给图像一个 id 并将事件附加到图像上。

像这样的东西：http: [//jsfiddle.net/yB4rQ/](http://jsfiddle.net/yB4rQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:57:23.913

代替：

```
if(this.checked) 
```

写：

```
if ( $(this).is(':checked') ) 
```

# iphone - 需要帮助来设置 svn 和 xcode 4.2

> ID：10136335
> 
> 赞同：0
> 
> 时间：2012-04-13T06:41:22.490
> 
> 标签：iphone, macos, ios5, tortoisesvn, xcode4.2

我正在尝试将 svn 与 xcode 4.2 一起设置。我有一个由 4 名程序员组成的团队，希望将我们的项目存储库保存在某人的机器上。这样所有 4 位程序员都可以在他们的 mac 上同步主副本。

可能吗？我怎样才能实现它？得到这个需要哪些步骤？

谁能建议我一步一步的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:43:38.077

如果您想使用 Subversion，请遵循安装 Subversion 的任何说明。不涉及 Xcode。

话虽如此，Xcode 内置了 Git，因此您可能希望考虑使用它而不是 Subversion。

# c++ - 在 Qt/C++ 程序中使用 OpenMP

> ID：10136337
> 
> 赞同：-2
> 
> 时间：2012-04-13T06:41:25.657
> 
> 标签：c++, multithreading, api, qt, openmp

我想用 OpenMP 并行化一个 Qt/C++ 程序，所以我可以与 Qt 线程工具进行比较。我有一些疑问。

1.  为了让 OpenMP 正常工作，我必须在代码和项目文件中包含哪些内容？

2.  在可交付的软件项目中使用 OpenMP 会很痛苦吗？每个版本都应该包括 OpenMP 更新和大量维护吗？

3.  您对 OpenMP 的性能有何感受？

4.  OpenMP 的嵌套并行工作是否值得信赖？

5.  与 Qt 相同的平台是否支持 OpenMP？

任何参考将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:03:28.633

1.  *为了让 OpenMP 正常工作，我必须在代码和项目文件中包含哪些内容？*

    您必须在代码中引入 OpenMP 编译指示，并可能链接到 OpenMP 运行时库（这将在您的构建系统中引入有限的更改）。

2.  *在可交付的软件项目中使用 OpenMP 会很痛苦吗？每个版本都应该包括 OpenMP 更新和大量维护吗？*

    我不确定你所说的“痛苦”是什么意思。我知道很多使用 OpenMP 成功的项目。可能不时需要一些维护（但我想这对于 Qt 也是如此）。

3.  *您对 OpenMP 的性能有何感受？*

    或多或少应该期望任何好的基于线程的并行化工具。如果工作量足够大，OpenMP 本身不应该给您的代码增加太多开销，而阿姆达尔定律将是您的限制。

4.  *OpenMP 的嵌套并行工作是否值得信赖？*

    是的

5.  *与 Qt 相同的平台是否支持 OpenMP？*

    与作为框架的 Qt 不同，OpenMP 支持主要由编译器完成。您可能会发现可以编译 Qt 的平台，但 C++ 编译器不支持 OpenMP。当然，这取决于您所针对的平台类型。

# java - 解析以字符串形式找到的 HTML 转储的有效方法

> ID：10136340
> 
> 赞同：0
> 
> 时间：2012-04-13T06:41:39.383
> 
> 标签：java, html-parsing, jsoup, htmleditorkit

请处理这个琐碎的问题。它在stackoverflow上以零碎的形式提供。

我有一个字符串形式的网站的 HTML 转储。我想从它的特定标签中提取文本。

换句话说，我想模仿

```
Document doc = Jsoup.connect(url).userAgent("Mozilla").get();
Elements links = doc.getElementsByTag("cite"); 
```

我没有使用 Jsoup，因为我不希望它连接到网站（我有另一项服务，它以文本形式返回 html 转储）。我找到了用于将文本转换为 HTMLDocument 的[HTMLEditorKit](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/html/HTMLEditorKit.html)，但它似乎不太容易使用（如 Jsoup 或 HTMLParser），或者我无法获得它。

任何帮助都会很有用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:47:09.093

如果您使用过 Jsoup 并且它仍然有效，您应该继续使用它。

```
Document doc = Jsoup.parse("<html>..."); 
```

应该做。

请参阅：[API](http://jsoup.org/apidocs/org/jsoup/Jsoup.html#parse%28java.lang.String%29)

# jquery - 对隐藏字段执行验证

> ID：10136342
> 
> 赞同：17
> 
> 时间：2012-04-13T06:41:52.147
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, validation

我有以下观点：

```
 @Html.LabelFor(m => m.CompanyPostCode)
    @Html.TextBoxFor(m => m.CompanyPostCode)

    @Html.LabelFor(m => m.CompanyCity)
    @Html.TextBoxFor(m => m.CompanyCity)

    @Html.HiddenFor(m => m.CompanyCityID) 
```

在我的视图模型中，所有属性都标记为**[必需] 。**然后问题是我的 CompanyCityID（标记为必需）被隐藏，因此在视图中没有进行验证。如果我在视图中显示此属性，则验证完成。

![在此处输入图像描述](../Images/50c6a0a7eac0f20c9d62f1d7a4c94e92.png)

我的问题：是否可以对隐藏字段执行验证？存在解决方法吗？

验证隐藏字段似乎有点奇怪。原因是该字段是根据特殊规则从 jQuery 填充的。如果未填写，我知道视图中的某些内容无效。

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-13T06:46:22.453

可能的原因可能是文件中有`ignore: ':hidden'`行`jquery.validate.unobtrusive.js`。

在 1.9.0 版本之后，这是默认行为。您可以通过添加手动修复它

```
$.validator.setDefaults({ ignore: [] }); 
```

正如你[在这里看到的](http://bassistance.de/2011/10/07/release-validation-plugin-1-9-0/)

> 另一个更改应该使带有隐藏元素的表单的设置更容易，这些现在默认情况下被忽略（*选项“ignore”现在默认为“:hidden”*）。从理论上讲，这可能会破坏现有设置。在不太可能的情况下，**您可以通过将忽略选项设置为“[]”（不带引号的方括号）来修复它。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T15:35:38.473

您也可以在 jquery.validate.js 文件中注释掉这一行。忽略：“：隐藏”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T05:24:04.123

如果您不必在控制器中和相关视图的操作中使用 javascript，则可以在验证模型之前添加模型错误。例子：

```
 [HttpPost]
        public ActionResult Fix(YourModel mdl)
    {

    if (mdl.CompanyCityID==0)
        ModelState.AddModelError("", "Your error message!");

    if (ModelState.IsValid)
    {

       //
       //Some code
       //

        return View("YourView", yourlist);
    }

    return View(mdl);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T07:04:57.443

您始终可以将其放入`@Html.HiddenFor(m => m.CompanyCityID)`隐藏的 div 并将其更改为`EditorFor()`.

**CSS**

```
.hidden {
    display: none;
}​ 
```

**看法**

```
<div class="hidden">
        @Html.EditorFor(m => m.CompanyCityID)
</div 
```

# java - 使用 utf-8 的 opencsv CSVWriter 似乎不适用于多种语言

> ID：10136343
> 
> 赞同：13
> 
> 时间：2012-04-13T06:41:57.670
> 
> 标签：java, unicode, utf-8, opencsv

我在使用 opencsv 时遇到了一个非常烦人的编码问题。当我导出 csv 文件时，我将字符类型设置为“UTF-8”。

```
CSVWriter writer = new CSVWriter(new OutputStreamWriter("D:/test.csv", "UTF-8")); 
```

但是当我用 Microsoft Office Excel 2007 打开 csv 文件时，发现它具有**“UTF-8 BOM”**编码？

一旦我将文件保存在记事本中并重新打开，文件就会变回 UTF-8，并且其中的所有字母看起来都很好。我想我已经进行了足够的搜索，但我还没有找到任何解决方案来阻止我的文件变成“UTF-8 BOM”。有什么想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-07-14T04:21:22.823

我想你的文件有一个 'UTF-8 without BOM' 编码。您最好将 BOM 编码提供给您的文件，即使在大多数情况下没有必要，但只有一个明显的例外是处理 ms excel 时。

```
FileOutputStream os = new FileOutputStream(file);
os.write(0xef);
os.write(0xbb);
os.write(0xbf);
CSVWriter csvWrite = new CSVWriter(new OutputStreamWriter(os)); 
```

现在您的文件将被 excel 理解为 utf-8 csv。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T07:01:38.147

`UTF-8`和`UTF-8 Signature`（有时被错误地命名为`UTF-8 BOM`）是相同的编码，并且签名[仅用于将其与任何其他编码区分开来](http://unicode.org/faq/utf_bom.html)。任何 unicode 应用程序都应正确处理 UTF-8 签名（即三字节序列`EF BB BF`）。

为什么 Java 专门添加了这个签名以及如何阻止它这样做我不知道。

# wcf - WCF 文件上传 - 如何将文件包装到特定的类中？

> ID：10136355
> 
> 赞同：1
> 
> 时间：2012-04-13T06:43:07.207
> 
> 标签：wcf

我正在尝试通过 WCF 服务上传文件。我可以上传一个文件，`Stream`但我还需要一个文件名。

出于测试目的，我创建了一个带有`<input type='file' />`标签的简单表单。

根据文章（[http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)）有一个类：

```
[MessageContract]
public class RemoteFileInfo : IDisposable
{
    [MessageHeader(MustUnderstand = true)]
    public string FileName;

    [MessageHeader(MustUnderstand = true)]
    public long Length;

    [MessageBodyMember(Order = 1)]
    public Stream FileByteStream;

    public void Dispose()
    { 
        if (FileByteStream != null)
        {
            FileByteStream.Close();
            FileByteStream = null;
        }
    }   
} 
```

现在 - 如何将文件值（从该`input`标签）传递给该类？

# c++ - windows上c++中的wxWidgets

> ID：10136360
> 
> 赞同：0
> 
> 时间：2012-04-13T06:43:49.770
> 
> 标签：c++, multithreading, wxwidgets

我正在阅读这个特定的代码片段：-

```
 class WXDLLIMPEXP_CORE wxCommandEvent : public wxEvent, public wxEventBasicPayloadMixin 
```

这是在 event.h 头文件中定义的，我不明白“WXDLLIMPEXP_CORE”。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:07:43.040

如果我们看一下[它的定义位置，](http://trac.wxwidgets.org/browser/wxWidgets/trunk/include/wx/dlimpexp.h)我们会看到

```
#ifdef WXMAKINGDLL_CORE
#    define WXDLLIMPEXP_CORE WXEXPORT
#    define WXDLLIMPEXP_DATA_CORE(type) WXEXPORT type
#    if defined(HAVE_VISIBILITY)
#        define WXDLLIMPEXP_INLINE_CORE WXEXPORT
#    else
#        define WXDLLIMPEXP_INLINE_CORE
#    endif
#elif defined(WXUSINGDLL)
#    define WXDLLIMPEXP_CORE WXIMPORT
#    define WXDLLIMPEXP_DATA_CORE(type) WXIMPORT type
#    if defined(HAVE_VISIBILITY)
#        define WXDLLIMPEXP_INLINE_CORE WXIMPORT
#    else
#        define WXDLLIMPEXP_INLINE_CORE
#    endif
#else /* not making nor using DLL */
#    define WXDLLIMPEXP_CORE
#    define WXDLLIMPEXP_DATA_CORE(type) type
#    define WXDLLIMPEXP_INLINE_CORE
#endif 
```

文件中其他地方的注释对正在发生的事情进行了很好的解释，但简短的总结是有三种情况，我们正在制作一个 DLL，使用一个 DLL 或根本不使用一个。最后一种情况是最简单的，如果我们根本不使用 DLL，那么它们就被定义为一无所有。如果我们正在创建一个 DLL，那么它会将类标记为导出，如果我们正在使用 DLL，那么它将将该类标记为导入。

# iphone - 在 SQLite 数据库的 uiwebview 中显示 HTML 文件？

> ID：10136365
> 
> 赞同：1
> 
> 时间：2012-04-13T06:44:15.050
> 
> 标签：iphone, html, ios, sqlite, uiwebview

我有一个正在处理的项目，要求我能够在 uiwebview 中显示存储在 SQLite 数据库中的 HTML 文件。我知道如何显示存储在主包中的本地文件，但我只是不知道如何让这些存储在 SQLite 数据库中的文件显示在 uiwebview 中。如果有人可以帮助我，将不胜感激。示例项目或教程很棒！提前致谢！

添加的信息我想我会附上这个链接以帮助理解我正在尝试做的事情。[http://www.google.com/url?sa=t&source=web&cd=1&ved=0CCYQFjAA&url=http%3A%2F%2Fdblog.com.au%2Fiphone-development-tutorials%2Fiphone-sdk-tutorial-reading-data-链接教程中的from-a-sqlite-database%2F&rct=j&q=sqlite%20animals%20tutorial%20iphone&ei=41eIT-79L9H-2QW50tXaCQ&usg=AFQjCNGqongc81oHHa3WGFTctkBIiduCvA](http://www.google.com/url?sa=t&source=web&cd=1&ved=0CCYQFjAA&url=http%3A%2F%2Fdblog.com.au%2Fiphone-development-tutorials%2Fiphone-sdk-tutorial-reading-data-from-a-sqlite-database%2F&rct=j&q=sqlite%20animals%20tutorial%20iphone&ei=41eIT-79L9H-2QW50tXaCQ&usg=AFQjCNGqongc81oHHa3WGFTctkBIiduCvA)我已经放弃了图像视图，因为我不需要它来实现我的目的，并且我已将数据库中的数据替换为 html 文件的内容。在本教程中，它在 textview 中显示文本，我想将其更改为在 uiwebview 中显示。我希望这保持格式和其他一些原因。感谢发帖的人。如果有人可以帮助我得到这个，那就太好了！！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:01:54.303

[webView loadHTMLString:baseURL:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/loadHTMLString%3abaseURL%3a)（我假设它只是存储为一个字符串......如果你有任何图像，你需要相应地设置你的基本目录）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:25:31.830

```
 [WebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"html"]isDirectory:NO]]]; 
```

此代码显示位于项目文件夹中的“test.html”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:39:21.427

通过使用得到它

```
NSString *html = [animal description];
[self.animalView.animalDesciption loadHTMLString:html baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

当包含 webview 的 ViewController 被推入显示时。

# objective-c - 如何在我的视图控制器中更新 UITextView？

> ID：10136371
> 
> 赞同：0
> 
> 时间：2012-04-13T06:45:00.160
> 
> 标签：objective-c, ios, xcode

我试过用

```
self.myUITextView.text = @"hi"; 
```

在我的 Nib 文件中更新我的 UITextView。

但是，UITextView 的原始文本仍在屏幕上。如何在我的视图控制器中更新 UITextView？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:50:51.147

从 xib 到您的视图控制器提供正确的连接（IBOutLet）。我猜你错过了从笔尖到控制器的 UITextView 的 IBOutLet 连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:21:07.490

我确定您必须已将 UITextView 声明为

```
IBOutlet UITextView *myUITextView; 
```

并将其正确连接到您的 XIB。

然后在您的 .h 文件中声明以下属性

```
@property (nonatomic, retain) IBOutlet UITextView *myUITextView; 
```

并将其合成到您的 .m 文件中

```
@synthesize myUITextView; 
```

现在尝试将文本更改为您想要的任何内容。在你的情况下

```
myUITextView.text = @"hi"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:52:17.870

可以使用 uitextview 的 set 属性 [self.myUITextView setText:@"Hi Updated"];

在 -(Void)viewWillApper 方法中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T07:15:40.807

1.  确保 IB 中的 UITextView IBOutlet 与控制器属性的有效连接相连。

2.  等到调用“viewDidLoad”来更改文本（在此之前，您不能保证文本视图已加载到内存中）。

3.  更改文本属性（如您所做的那样）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-13T06:57:23.423

你做错了......你在 load 方法中指定值......所以即使你已经更改了值，当你尝试再次加载该视图时...... viewDidload 方法将被调用并且新值将是替换为原始值....

而不是在 viewDidload 中设置值..制作一些方法或在其点击方法中放置一些按钮，设置值并将其存储在某处......你做错了事。

# jquery - VPN断开时的ajax响应

> ID：10136376
> 
> 赞同：0
> 
> 时间：2012-04-13T06:46:04.177
> 
> 标签：jquery

我正在使用 VPN 连接到我的服务器并发送 jquery ajax 请求。当 VPN 连接丢失时，ajax 的行为如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:52:37.230

Pretty much the same behavior as other HTTP requests: the request ends with Not-Found [HTTP 404](http://en.wikipedia.org/wiki/HTTP_404) error code! The XMLHttpRequest's [onreadystate](http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp) event also fires with the Not-Found status code.

# linux - Linux中的SUID程序能否成功调用dmidecode命令？

> ID：10136377
> 
> 赞同：1
> 
> 时间：2012-04-13T06:46:07.210
> 
> 标签：linux

操作系统是`Linux SuSE 2.6.16.60-0.21-smp`

我有一个已配置SUID的可执行bin文件（名称为bmu），如下图

`-rwsr-sr-x 1 root root 14968899 2012-03-29 10:35 bmu`

而这个程序在里面调用`dmidecode`。

如果是 root 运行的，操作是可以的，但`dmidecode`如果程序是非 root 用户运行的，调用会返回 null。

这个问题的原因是什么以及如何解决？

**编辑：**从评论中添加代码和描述：

```
read_fp = popen("dmidecode | grep 'Product Name'", "r");

/* ...... */

chars_read = fread(buffer, sizeof(char), BUFSIZ-1, read_fp); 
```

返回的`read_fp`不是null，而是缓冲区的长度为0，应该有一些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:55:11.177

问题以不安全的方式解决。

在程序bmu中添加SUID是不够的，dmidecode也应该是。

`-rwsr-sr-x 1 root root 59504 2006-06-16 22:08 /usr/sbin/dmidecode`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:07:32.807

该`dmidecode`程序需要`/dev/mem`普通用户无权访问的访问权限。解决此类问题的最常见方法是像您已经做的那样，使程序成为 SUID，或者将用户添加到`kmem`组（拥有的组`/dev/mem`）。

# zend-framework - ZendFramework-1.11.11 和教义2-2.2.0-BETA2 问题

> ID：10136379
> 
> 赞同：-1
> 
> 时间：2012-04-13T06:46:32.550
> 
> 标签：zend-framework, orm, doctrine-orm

我指的是教程 [http://www.webpixel.gr/blog/zend-framework/integrate-doctrine-2-0-1-with-zend-framework-1-11-x](http://www.webpixel.gr/blog/zend-framework/integrate-doctrine-2-0-1-with-zend-framework-1-11-x)

我使用 ZendFramework-1.11.11 和教义2-2.2.0-BETA2

有第 3 步修改此链中的配置文件我无法在我的电脑中找到 application/configs/application.ini ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:05:48.097

使用[Bisna](https://github.com/guilhermeblanco/ZendFramework1-Doctrine2)集成 Zend Framework 1.X + Doctrine 2.X

# r - 用不同颜色在同一个 x 上绘制两个 y？

> ID：10136383
> 
> 赞同：0
> 
> 时间：2012-04-13T06:46:46.347
> 
> 标签：r

```
temp1<- data.frame(x =(1:10), y=(1:10)^2)

temp2<- data.frame(x =(1:10), y=(1:10)^3)

# plot(temp1$x, with both temp1$y and temp2$y; 
# want each represented by a different color) 
```

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T06:52:17.917

```
plot(temp2, type="l", col="green")
lines(temp1, col="red") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T06:51:29.117

```
matplot(temp1$x, cbind(temp1$y, temp2$y), t="l", lty=1, col=c("red", "blue")) 
```

or

```
library(ggplot2)
qplot(x, y, colour=which, geom="path", data=lattice::make.groups(temp1, temp2)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T07:01:04.010

或者，您可以使用 ggplot2 实现此目的。假设您的数据集如下所示：

```
x      y   category
1      3   A
3.2   4   B 
```

您可以使用以下方法绘制两条具有不同颜色的线：

```
ggplot(aes(x=x, y=y, color=category), data = dat) + geom_line() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T06:52:43.403

Yep, it is. See `?plot`, and the `col` (colour) argument for the colour.

As to getting them both on the *same* plot you can either use `lines`/`points` (which draw on the existing plot) or see `?par` and the `new` option.

In particular, `par(new=TRUE)` *doesn't* clean the current plot device, allowing you to draw on top (a bit counter-intuitive, I know).

So:

```
# plot temp1 y vs x in blue
plot(y~x, temp1, col='blue')

# draw the next plot on the same plot
par(new=TRUE)

# plot temp2 y vs x in red, on the SAME plot (new=TRUE)
plot(y~x, temp2, col='red') 
```

If you wanted to use `lines`/`points`, instead of doing the `par(new=TRUE)` and second `plot`, just do `lines(y~x,temp2,...)`

# android - 如何在android项目的每个活动中调用一个函数？

> ID：10136390
> 
> 赞同：2
> 
> 时间：2012-04-13T06:47:16.387
> 
> 标签：android, function, notifications

我有一个通知服务，它每 5 秒触发一次，获取数据并解析它，然后显示它。但这种机制仅适用于应用程序的主屏幕。

我希望在应用程序的每个屏幕上都这样做。为此，我应该在项目的每个活动中编写相同的代码吗？这是一项非常乏味的工作。我想让它概括..

怎么做 ？？有任何想法吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:53:43.167

you can make `BasicActivity` and have method in that `Activity` and call that method inside `onCreate();`

now extend every Activity in your project from your `BasicActivity`

If you are talking push notification service, this idea seems to problematic. tell us more what are you exactly trying to do.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T06:53:43.587

you do something like this in some utility class

```
public static void showNotifction(Activity a)
{
 //notify

} 
```

and over this if you have any call back methods.. Then create an interface with those methods and implement them in all those Activities and you can do this..

```
 public static void showNotifction(CommoInterface a)
    {
     if(a insatncof Activity){
     //notify
      a.callBack(); // callBack is a method in the interface..
     }

    } 
```

# javascript - 使用 DOM 事件打印 javascript 中 document.createElement 调用的计数

> ID：10136391
> 
> 赞同：1
> 
> 时间：2012-04-13T06:47:17.120
> 
> 标签：javascript, userscripts

根据这篇文章[使用用户脚本记录网页的动态创建的标签属性](https://stackoverflow.com/questions/10085343/log-a-web-pages-dynamically-created-tag-attributes-with-a-userscript)

我检索了属性，还按照建议包括了数组

`addJS_Node ("var arr=[];");`

我成功地将 src 属性推送到 arr 数组，因为我没有收到任何错误。

现在我很困惑在哪里显示数组。

我的代码如下

```
// ==UserScript==
// @name        Tags Monitoring
// @namespace   PC
// @run-at      document-start
// ==/UserScript==
//--- Intercept and log document.createElement().tagattributes
addJS_Node ("var arr=[];"); 
function LogNewTagCreations ()
{   
   var oldDocumentCreateElement = document.createElement;
  document.createElement       = function (tagName) 
  {
      var elem = oldDocumentCreateElement.apply (document, arguments);  
      if(tagName=='script')      
         GetScriptAttributes (elem); 
     return elem;
  }   
}
function GetScriptAttributes (elem, tagNum, timerIntVar) 
{
   /*--- Because the tags won't be set for some while, we need
    to poll for when they are added.
   */       
   GetScriptAttributes.tagNum  = GetScriptAttributes.tagNum || 0;
   if ( ! tagNum) 
   {
       GetScriptAttributes.tagNum++;
       tagNum = GetScriptAttributes.tagNum;
   }   
   /*-- Getting the required attributes */
   if (elem.src) 
   {
      doneWaiting ();
      arr.push(elem.src);
        console.log (
        tagNum," has a src attribute of:", elem.src,"=========",arr.length
        );
   }    
   else 
   {
    if ( ! timerIntVar) 
    {
        var timerIntVar = setInterval 
        (
            function () 
            {
                GetScriptAttributes (elem, tagNum, timerIntVar);

            },
            50
        );            
    }        
}    
function doneWaiting () 
{
    if (timerIntVar) 
    {
        clearInterval (timerIntVar);
    }       
}    
}
 /*--- The userscript or GM script will start running before the DOM is available.
   Therefore, we wait...
  */
  var waitForDomInterval = setInterval (
  function () {
    var domPresentNode;
    if (typeof document.head == "undefined")
        domPresentNode = document.querySelector ("head, body");
    else
        domPresentNode = document.head;       
    if (domPresentNode) {
        clearInterval (waitForDomInterval);            
        addJS_Node (GetScriptAttributes.toString() );                    
        addJS_Node (null, null, LogNewTagCreations);
    }
},
1  
);

 addJS_Node("document.onreadystatechange = function (){if (document.readyState ==       'complete'){console.log(arr.length);}}");

//--- Handy injection function.
function addJS_Node (text, s_URL, funcToRun) {
var D                                   = document;
var scriptNode                          = D.createElement ('script');
scriptNode.type                         = "text/javascript";
if (text)       scriptNode.textContent  = text;
if (s_URL)      scriptNode.src          = s_URL;
if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';
var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
targ.appendChild (scriptNode);    
} 
```

我想打印动态创建的标签数量，这就是我添加数组的原因。我第一次尝试只使用脚本标签，我怎么知道数组已完成，以便我可以打印数组长度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:38:50.547

看起来你的问题不在于你的代码。
你根本不知道javascript。

我强烈建议您从简单的代码和教程开始。
尝试编写您的第一个脚本。**如果您对您的代码**
有任何疑问，请随时来询问。

 **Brock Adams 给你的代码运行良好。
我只是将它复制粘贴到 Greasemonkey 中。
这是输出：

![在此处输入图像描述](../Images/d9203473997ef730c55e8614dea70303.png)

请返回[使用用户脚本记录网页动态创建的标签属性，](https://stackoverflow.com/questions/10085343/log-a-web-pages-dynamically-created-tag-attributes-with-a-userscript)并将他的答案标记为正确的。**

# c# - 无法将文本框中的值读入 javascript 变量

> ID：10136398
> 
> 赞同：1
> 
> 时间：2012-04-13T06:47:51.583
> 
> 标签：c#, javascript, asp.net, html, json

您好，我正在尝试在从服务器填充到 javascript 变量后读取文本框（runatserver），但它给了我一个控制台错误“无法读取 NULL 表单”但是文本框由我想要的字符串填充读书

这是我的文本框：

```
 <form runat="server">

        <asp:TextBox ID="ServerSideTextBox" runat="server" />
    </form> 
```

这就是我在 C# 中填充它的方式：

```
ServerSideTextBox.Text= Object_JSON_Class.JSON_DataTable(dt); 
```

它获得了正确的数据也显示了正确的数据字符串，但问题是当我尝试读取文本框的值时，如下所示：

```
 var oServerSideTextBox= document.getElementById("ServerSideTextBox"); 
var oServerJSON_String=eval("("+oServerSideTextBox.value+")"); 
```

我收到一个无法读取 NULL 表单的控制台错误，但文本框确实有我想读入 javascript 变量的字符串，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:51:24.663

```
 var txtToIncr = document.getElementById('<%=ServerSideTextBox.ClientID%>') 
```

查看此[链接](http://wiki.asp.net/page.aspx/483/referencing-server-controls-from-javascript/)，关于通过 javascript 读取 ASP.Net 控件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:52:05.480

试试这个：

`var oServerSideTextBox= document.getElementById("<%=ServerSideTextBox.ClientID%>");`

如果这不起作用，请尝试以下操作：

`var oServerSideTextBox= document.getElementById("<%=ServerSideTextBox.ClientID%>_text");`

当客户端的浏览器呈现时，组件被分配了不同的 ID。您可以在[这里](http://www.devx.com/tips/Tip/28332)查看更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:52:12.140

把它放在你的文本框上`ClientIDMode="Static"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T07:03:42.840

如果您在母版页结构中使用它，您的服务器文本框的 ID 会有所不同，请尝试查找它的 ID。因为它的实际 ID 可能类似于 ctl00_ContentPlaceHolder1_ServerSideTextbox。检查一下。

为你的文本框分配一个类，然后尝试这个来查找 id。

```
$('.textbox').on('blur', function() {

        var error = this.id;
        alert(error);
                                       )}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T07:41:39.547

阅读评论。我认为你指的是错误的文本框 ID。所以我做了一个小测试：这应该可以工作。如果不从你的 HTML 中查看源代码 - 你可以看到 ID。

```
<script type='text/javascript'>
    function testvalue() {
        var oServerSideTextBox = document.getElementById('<%=ServerSideTextBox.ClientID%>');
        if (oServerSideTextBox == null) {
            alert('this is null');
        }
        else {
            alert(oServerSideTextBox.value);
        }
    }
</script>

<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="ServerSideTextBox" runat="server" Text="Testvalue" />
        <input type='button' onclick='testvalue();' value='Click' />
    </div>
    </form>
</body> 
```

# sql-server-2008 - 需要有关使用 if 的更新语句的帮助

> ID：10136399
> 
> 赞同：1
> 
> 时间：2012-04-13T06:47:54.267
> 
> 标签：sql-server-2008

我有以下表格和数据，

```
declare @tApplyProgram table (myID varchar(50), programID varchar(10), stTR char(1) null)
insert into @tApplyProgram(myID,programID) values('1925','184');
insert into @tApplyProgram(myID,programID) values('4474','172');
insert into @tApplyProgram(myID,programID) values('8890','172');
insert into @tApplyProgram(myID,programID) values('5578','172');
insert into @tApplyProgram(myID,programID) values('2980','172');
insert into @tApplyProgram(myID,programID) values('2500','172');
insert into @tApplyProgram(myID,programID) values('1925','180');
insert into @tApplyProgram(myID,programID) values('5578','180');
/*
@tApplyProgram keep applicant and their programID
myID and programID is unique
*/

declare @tResult table (myID varchar(50), subjectCd varchar(50))
insert into @tResult values('1925','01')
insert into @tResult values('1925','02')
insert into @tResult values('1925','03')
insert into @tResult values('4474','03')
insert into @tResult values('4474','04')
insert into @tResult values('4474','05')
insert into @tResult values('5578','01')
insert into @tResult values('5578','02')
insert into @tResult values('5578','03')
insert into @tResult values('2980','01')
insert into @tResult values('2980','02')
/*
@tResult keep their applicant's result
myID and subjectCd is unique
*/

declare @tRulesD table (programID varchar(50), subjectCd varchar(50))
insert into @tRulesD values('172','05')
insert into @tRulesD values('172','02')
insert into @tRulesD values('172','15')
insert into @tRulesD values('184','01')
insert into @tRulesD values('184','02')
insert into @tRulesD values('184','03')
/*
@tRulesD keep programID rules and regulation
programID and subjectCd is unique
*/ 
```

如果应用程序 ID (@tApplyProgram) 以满足要求 (@tRulesD)，则设置 stTR=1。如果不满足要求，设置stTR=0。否则将其保留为 NULL

预期结果如下所示，

```
myID  | programID  | stTR
------------------------------------
1925    184          1           /*1925 have rows in @tResult, and 184 have rows in @tRulesD. And, it's meet the requirements */
4474    172          0           /*4474 have rows in @tResult, and 172 have rows in @tRulesD. But, it's not meet the requirements */
8890    172          NULL        /*8890 don't have rows in @tResult*/
5578    172          0           /*5578 have rows in @tResult, and 172 have rows in @tRulesD. But, it's not meet the requirement*/
2980    184          0           /*2980 have rows in @tResult, and 184 have rows in @tRulesD. But. it's not meet the requirement*/
2500    172          NULL        /*2500 don't have rows in @tResult*/
1925    180          NULL        /*180 don't have rows in @tRulesD*/
5578    180          NULL        /*180 don't have rows in @tRulesD*/ 
```

确实需要帮助来构建 T-SQL。我被困住了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:49:36.820

此查询可能对您有所帮助，我只是不明白“不符合要求”是什么意思：

```
select  myID, programID, 
        case 
            when (
                  (select case WHEN COUNT(*)>1 then 1 else null end from @tResult where myid=p.myid) +
                  (select case WHEN COUNT(*)>1 then 1 else null end from @tRulesD where programid=p.programid)
                 )>1 then 1 else null end 
from @tApplyProgram P 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:31:04.247

这是更新的子查询版本。它通过将来自结果的子查询和分别给定 myid 和 programid 的规则与按 subjectid 列的完全外部连接连接起来。然后对该结果集进行空值（未命中）测试。如果有未命中 max 将返回 1；如果所有值都匹配，则返回值为 0。这对双方都有效。如果没有未命中，总和将给出 0，我们返回 1。如果我们发现未命中，我们仍然需要确定每列的所有值是否为空。我们通过使用 count 测试非空值来做到这一点；如果找到，count 将给出 1，否则将给出零。如果双方至少有一个非空值，我们知道规则和结果都有匹配的行，所以我们返回 0。如果没有，则返回值为空。

```
update @tApplyProgram
set stTR = 
(
  select
    case when max (case when u.subjectcd is null then 1 else 0 end) 
            + max (case when r.subjectcd is null then 1 else 0 end)
            = 0
         then 1
         else case when count (u.subjectcd) > 0
                    and count (r.subjectcd) > 0
                   then 0 
                   else null 
               end

     end
    from (select * from @tResult r where r.myid = [@tApplyProgram].myid) r
    full outer join
         (select * from @tRulesD u where u.ProgramID = [@tApplyProgram].programid) u
     on r.subjectCd = u.subjectCd
) 
```

# c# - 如何将平面平移到 X 距离的点？

> ID：10136404
> 
> 赞同：1
> 
> 时间：2012-04-13T06:48:07.103
> 
> 标签：c#, xna, translation, plane

*   我得到一个`Plane`(Normal, d) 和一个`Vector3`点 (x, y, z)。
*   我需要将平面平移到 X 距离的那个点。我怎么做？

我想出这个..

```
plane = Plane.Transform(plane, Matrix.CreateTranslation( 
```

但不知道该放什么。它必须与点积有关，`Plane.Normal`而我的`Vector3`.

**编辑：**

我在想这个。

```
public static Plane MoveTo(this Plane p, Vector3 point, float distance)
{
    Vector3 planeVector = p.Normal * p.D;

    Matrix matrix = Matrix.CreateTranslation(Vector3.Normalize(planeVector)) *
        distance * Math.Sign(Vector3.Dot(planeVector, point - planeVector))

    return Plane.Transform(p, matrix);
} 
```

如果有人认为这是错误的或部分错误的，请注意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:01:37.717

点 P 到平面 Pi 的距离为：

![在此处输入图像描述](../Images/0108d0c4434751c97ec4de1dc7e3aaa6.png)

![在此处输入图像描述](../Images/b0589412a5c39d81512aed4ee5764ebc.png)

您应该计算当前 d(P, pi)，减去 X 的数量，然后只需计算 D 即可获得新平面。

编辑：

```
 // This line has no sense... is useless do that.
 Vector3 planeVector = p.Normal * p.D; 
```

要知道点和平面之间的关系，您只需计算其方程： R = Ax + By + Cz + D 其中 (A,B,C) 是法线， (x,y,z) 是点。 ..

if (R == 0) 该点包含在平面中
if (R>0) 该点在前面 // 反之亦然
如果 (R<0) 该点在后面

```
R = plane.DotCoordinate(point);    
distance*=(R>0) ? 1 : -1; // or viceversa, i'm not sure now
Matrix matrix = Matrix.CreateTranslation(plane.Normal * distance);
return Plane.Transform(p, matrix); 
```

# encoding - 如何确定文件是否为 IBM1047 编码

> ID：10136405
> 
> 赞同：1
> 
> 时间：2012-04-13T06:48:09.087
> 
> 标签：encoding, xml-parsing

我有一堆声明为 encoding="IBM1047" 的 XML 文件，但它们似乎不是：

*   当使用 iconv 从 IBM1047 转换为 UTF-8 或 ISO8859-1 (Latin 1) 时，它们会导致无法辨认的垃圾
*   file -i <name_of_file> 说“未知的 8 位编码”
*   当由 XML 解析器解析时，解析器会抱怨序言之前有文本但没有；如果我将 XML 声明中的编码更改为其他内容，则不会发生此错误

找出这些文件的真实编码会很好（我试过上面提到的'file -i'和'enca'，但它仅限于斯拉夫语言（文件是法语））。

我几乎无法控制这些文件的生成方式。如果找不到实际的编码，如果我能最终证明这些文件实际上不是 IBM1047，我可能会让生产者对此做点什么。

我该如何证明？

一些特殊字符：

*   'é' 是 '©'
*   'à' 是 'ë'
*   'è' 是 'Û'
*   'ê' 是 'ª'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:45:18.780

证明*任何*类别的数据流以特定方式编码或未编码的唯一方法是，对于该类的至少一个实例，确切地知道流中应该包含哪些字符。如果您对特定测试用例中的（假定是）哪些字符达成一致，则可以计算应该在测试用例的 IBM 1047（或任何其他）编码中的位，并将这些位与这些位进行比较你真的看到了。

当然，对 EBCDIC 数据进行破坏的一种简单方法是，它在使用为其他 EBCDIC 代码页设计的转换表的过程中通过一些 EBCDIC/ASCII 网关。但是，如果您正在使用 EBCDIC 数据，您可能已经知道这一点。

# string - 选择性字符串操作

> ID：10136409
> 
> 赞同：0
> 
> 时间：2012-04-13T06:48:23.190
> 
> 标签：string, shell, sed, awk, grep

我需要 CSH/TCSH 脚本中的字符串处理方面的帮助。我知道基本处理，但需要帮助了解我们如何处理高级字符串操作要求。

我有一个日志文件，其格式如下：

> [开始一个]
> 
> A的日志信息
> 
> [END_A]
> 
> [START_B]
> 
> B的日志信息
> 
> [END_B]
> 
> [START_C]
> 
> C的日志信息
> 
> [END_C]

我的要求是选择性地提取开始和结束标记之间的内容并将它们存储在一个文件中。例如 START_A 和 END_A 之间的内容将存储在 A.log

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:17:07.773

这应该适合你：

```
awk -F'_' '/\[START_.\]/{s=1;gsub(/]/,"",$2);f=$2".txt";next;}/\[END_.\]/{s=0} s{print $0 > f}' yourLog 
```

**测试：**

```
kent$  cat test
    [START_A]

    log info of A

    [END_A]

    [START_B]

    log info of B

    [END_B]

    [START_C]

    log info of C

    [END_C]

kent$  awk -F'_' '/\[START_.\]/{s=1;gsub(/]/,"",$2);f=$2".txt";next;}/\[END_.\]/{s=0} s{print $0 > f}' test

kent$  head *.txt
==> A.txt <==

    log info of A

==> B.txt <==

    log info of B

==> C.txt <==

    log info of C 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:54:57.427

awk 一次可以做 1 个：

```
cat log | awk '/[START_A]/,/[END_A]/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:47:04.960

这可能对您有用：

```
sed '/.*\[START_\([^]]*\)\].*/s||/\\[START_\1\\]/,/\\[END_\1\\]/w \1.log|p;d' file |
sed -nf - file 
```

# symfony1 - Symfony 1.4 跨应用程序链接失败

> ID：10136416
> 
> 赞同：0
> 
> 时间：2012-04-13T06:48:48.793
> 
> 标签：symfony1, symfony-1.4

我的应用程序需要跨应用程序链接，并且在仔细关注 [http://symfony.com/blog/cross-application-links上的博客之后](http://symfony.com/blog/cross-application-links)

我让其中一个工作，其中一个不工作。从前端到后端应用程序的链接工作正常，但后端代码上的前端链接不正常？基本上我有我的 backendConfiguration.class.php 文件：

```
protected $frontendRouting = null ;

  public function generateFrontendUrl($name, $parameters = array())
  {
    return 'http://localhost:8080/frontend_dev.php'.$this->getFrontendRouting()->generate($name, $parameters);
  }

  public function getFrontendRouting()
  {
    if (!$this->frontendRouting)
    {
      $this->frontendRouting = new sfPatternRouting(new sfEventDispatcher());

      $config = new sfRoutingConfigHandler();
      $routes = $config->evaluate(array(sfConfig::get('sf_apps_dir').'/frontend/config/routing.yml'));

      $this->frontendRouting->setRoutes($routes);
    }

    return $this->frontendRouting;
  } 
```

在我的模板中，我得到：

```
echo link_to('Log out', sfContext::getInstance()->getConfiguration()->generateFrontendUrl('dashboard/login') ) 
```

仪表板/登录是一个有效的路径，但这会返回： 路由不存在 ...500 内部服务器错误

你们怎么看？

还发布我的 routing.yml 文件以供参考：

```
# default rules
homepage:
  url:   /
  param: { module: dashboard, action: index }

# generic rules
# please, remove them by adding more specific rules
default_index:
  url:   /:module
  param: { action: index }

default:
  url:   /:module/:action/* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:26:28.237

您是否尝试在前端 routing.yml 中放置带有 dasboard/login url 的真实路由？

```
dashboard_login:
  url:   /dashboard/login
  param: { module: dashboard, action: login }

# default rules
homepage:
  url:   /
  param: { module: dashboard, action: index }

# generic rules
# please, remove them by adding more specific rules
default_index:
  url:   /:module
  param: { action: index }

default:
  url:   /:module/:action/* 
```

然后调用路由名称而不是模块/动作：

```
echo link_to('Log out', $sf_context->getConfiguration()->generateFrontendUrl('dashboard_login') ) 
```

Ps：您可以`$sf_context`在模板中使用而不是`sfContext::getInstance()`.

# android - 如何创建 SQLite 数据库我收到错误

> ID：10136420
> 
> 赞同：0
> 
> 时间：2012-04-13T06:49:26.073
> 
> 标签：android

如何在android中创建一个Sqlite数据库？在这段代码中，我得到了一个错误。

```
package com.ms.adpterDB;

import java.util.Date;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class Friend_listadpter {
     public static final String KEY_ROWID = "_id";

    public static final String KEY_NAME = "name";
    public static final String KEY_NNAME = "nickname";
    public static final String KEY_BIRTHDAY = "birthday";
    public static final String KEY_HOBBIES = "hobbies";
    public static final String KEY_PHONENO = "phoneno";
    public static final String KEY_EMAILID = "email";
    public static final String KEY_LINS = "lines";
    public static final String KEY_image = "image";

    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "Mobileslam";
    private static final String DATABASE_TABLE = "Friends";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE =
        "create table Friends(_id integer primary key autoincrement, "+ "name text not null, nickname text not null, " 
        + "birthday text not null,hobbies text not null,phoneno text not null,email text not null,lines text not null,image text not null);";

    private final Context context; 

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db; 

    public  Friend_listadpter(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, 
        int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion 
                    + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS titles");
            onCreate(db);
        }
    }    

    //---opens the database---
    public  Friend_listadpter open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---    
    public void close() 
    {
        DBHelper.close();
    }

    //---insert a title into the database---
    public long insertTitle(long _id,String name, String nickname, String birthday, String hobbies,
            String phoneno, String email, String lines, String image) 
    {
        ContentValues initialValues = new ContentValues();
      //  initialValues.put(KEY_ROWID, _id);

        initialValues.put(KEY_NAME, name);
        initialValues.put(KEY_NNAME, nickname);
        initialValues.put(KEY_BIRTHDAY,birthday);
        initialValues.put(KEY_HOBBIES,hobbies);
        initialValues.put(KEY_PHONENO,phoneno);
        initialValues.put(KEY_EMAILID,email);
        initialValues.put(KEY_LINS,lines);
        initialValues.put(KEY_image,image);
        initialValues.put(KEY_ROWID,_id);
        //initialValues.put(KEY_time,date.getDate());        
        Log.w(TAG, "inserted friend" + name+"____"+nickname+"____"+birthday+"____"+hobbies+"____"+phoneno+"____"+email+"____"+lines+"____"+image);
        db.execSQL("DROP TABLE IF EXISTS titles");
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //---deletes a particular title---
    public boolean deleteTitle(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + 
                "=" + rowId, null) > 0;
    }

    public Cursor getAllTitles() 
    { Log.w(TAG, "//////// GET ALL TITLES ////////" );
        return db.query(DATABASE_TABLE, new String[] {
                KEY_ROWID, 
                KEY_NAME,
                KEY_NNAME,
                KEY_BIRTHDAY,
                KEY_HOBBIES,
                KEY_PHONENO,
                KEY_EMAILID,
                KEY_LINS,
                KEY_image,
               }, 
                null, 
                null, 
                null, 
                null, 
                null);
    }

    //---retrieves a particular title---
    public Cursor getTitle(long rowId) throws SQLException 
    {
        Cursor mCursor =
                db.query(true, DATABASE_TABLE, new String[] {
                        KEY_ROWID,
                        KEY_NAME,
                        KEY_NNAME,
                        KEY_BIRTHDAY,
                        KEY_HOBBIES,
                        KEY_PHONENO,
                        KEY_EMAILID,
                        KEY_LINS,
                        KEY_BIRTHDAY,
                        }, 
                        KEY_ROWID + "=" + rowId, 
                        null,
                        null, 
                        null, 
                        null, 
                        null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---updates a title---
    public boolean updateTitle(long _id, String name, 
    String nickname, String birthday, String hobbies, String phoneno,
    String email, String lines, String image) 
    {
        ContentValues args = new ContentValues();
        args.put(KEY_ROWID, _id);
        args.put(KEY_NAME, name);
        args.put(KEY_NNAME, nickname);
        args.put(KEY_BIRTHDAY,birthday);
        args.put(KEY_HOBBIES,hobbies);
        args.put(KEY_PHONENO,phoneno);
        args.put(KEY_EMAILID,email);
        args.put(KEY_LINS,lines);
        args.put(KEY_BIRTHDAY,image);

        return db.update(DATABASE_TABLE, args, 
                         KEY_ROWID , null) > 0;
    }

} 
```

错误：

```
04-13 12:30:15.683: D/dalvikvm(336): GC_EXTERNAL_ALLOC freed 49K, 53% free 2551K/5379K, external 1625K/2137K, paused 76ms
04-13 12:30:15.863: D/dalvikvm(336): GC_EXTERNAL_ALLOC freed 2K, 53% free 2556K/5379K, external 2325K/2779K, paused 57ms
04-13 12:31:13.512: W/KeyCharacterMap(336): No keyboard for id 0
04-13 12:31:13.522: W/KeyCharacterMap(336): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
04-13 12:31:22.142: W/IInputConnectionWrapper(336): showStatusIcon on inactive InputConnection
04-13 12:31:24.203: D/(336): strUrl: file:///mnt/sdcard/DCIM/Camera/1334074966132.jpg
04-13 12:31:34.343: W/DBAdapter(336): inserted friendsravanthi____chinnu____july16th____xxxxx____908756889____chinni.sravs____mmmmm____file:///mnt/sdcard/DCIM/Camera/1334074966132.jpg
04-13 12:31:34.374: E/Database(336): Error inserting birthday=july16th _id=1 email=chinni.sravs nickname=chinnu name=sravanthi image=file:///mnt/sdcard/DCIM/Camera/1334074966132.jpg lines=mmmmm hobbies=xxxxx phoneno=908756889
04-13 12:31:34.374: E/Database(336): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
04-13 12:31:34.374: E/Database(336):    at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
04-13 12:31:34.374: E/Database(336):    at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:61)
04-13 12:31:34.374: E/Database(336):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1582)
04-13 12:31:34.374: E/Database(336):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1426)
04-13 12:31:34.374: E/Database(336):    at com.ms.adpterDB.Friend_listadpter.insertTitle(Friend_listadpter.java:106)
04-13 12:31:34.374: E/Database(336):    at com.slam.Add_friend.onClick(Add_friend.java:66)
04-13 12:31:34.374: E/Database(336):    at android.view.View.performClick(View.java:2485)
04-13 12:31:34.374: E/Database(336):    at android.view.View$PerformClick.run(View.java:9080)
04-13 12:31:34.374: E/Database(336):    at android.os.Handler.handleCallback(Handler.java:587)
04-13 12:31:34.374: E/Database(336):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-13 12:31:34.374: E/Database(336):    at android.os.Looper.loop(Looper.java:123)
04-13 12:31:34.374: E/Database(336):    at android.app.ActivityThread.main(ActivityThread.java:3683)
04-13 12:31:34.374: E/Database(336):    at java.lang.reflect.Method.invokeNative(Native Method)
04-13 12:31:34.374: E/Database(336):    at java.lang.reflect.Method.invoke(Method.java:507)
04-13 12:31:34.374: E/Database(336):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-13 12:31:34.374: E/Database(336):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-13 12:31:34.374: E/Database(336):    at dalvik.system.NativeStart.main(Native Method)
04-13 12:31:34.693: D/dalvikvm(336): GC_EXTERNAL_ALLOC freed 480K, 54% free 2711K/5831K, external 3962K/4199K, paused 67ms
04-13 12:31:34.863: D/dalvikvm(336): GC_EXTERNAL_ALLOC freed 36K, 55% free 2681K/5831K, external 4644K/5675K, paused 57ms
04-13 12:31:37.352: D/AndroidRuntime(336): Shutting down VM
04-13 12:31:37.352: W/dalvikvm(336): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-13 12:31:37.374: E/AndroidRuntime(336): FATAL EXCEPTION: main
04-13 12:31:37.374: E/AndroidRuntime(336): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.slam/com.slam.Friend_List}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
04-13 12:31:37.374: E/AndroidRuntime(336):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-13 12:31:37.374: E/AndroidRuntime(336):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-13 12:31:37.374: E/AndroidRuntime(336):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-13 12:31:37.374: E/AndroidRuntime(336):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-13 12:31:37.374: E/AndroidRuntime(336):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 12:31:37.374: E/AndroidRuntime(336):  at android.os.Looper.loop(Looper.java:123)
04-13 12:31:37.374: E/AndroidRuntime(336):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-13 12:31:37.374: E/AndroidRuntime(336):  at java.lang.reflect.Method.invokeNative(Native Method)
04-13 12:31:37.374: E/AndroidRuntime(336):  at java.lang.reflect.Method.invoke(Method.java:507)
04-13 12:31:37.374: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-13 12:31:37.374: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-13 12:31:37.374: E/AndroidRuntime(336):  at dalvik.system.NativeStart.main(Native Method)
04-13 12:31:37.374: E/AndroidRuntime(336): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
04-13 12:31:37.374: E/AndroidRuntime(336):  at android.app.ListActivity.onContentChanged(ListActivity.java:243)
04-13 12:31:37.374: E/AndroidRuntime(336):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:210)
04-13 12:31:37.374: E/AndroidRuntime(336):  at android.app.Activity.setContentView(Activity.java:1657)
04-13 12:31:37.374: E/AndroidRuntime(336):  at com.slam.Friend_List.onCreate(Friend_List.java:27)
04-13 12:31:37.374: E/AndroidRuntime(336):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-13 12:31:37.374: E/AndroidRuntime(336):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-13 12:31:37.374: E/AndroidRuntime(336):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:16:22.247

我建议你看看这两行：

```
04-13 12:31:34.374: E/Database(336): Error inserting birthday=july16th _id=1 email=chinni.sravs nickname=chinnu name=sravanthi image=file:///mnt/sdcard/DCIM/Camera/1334074966132.jpg lines=mmmmm hobbies=xxxxx phoneno=908756889
04-13 12:31:34.374: E/Database(336): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed 
```

您尝试插入的数据似乎有问题（双id？至少有您的约束）

# maven-2 - Maven 项目的 Hudson 集成

> ID：10136421
> 
> 赞同：1
> 
> 时间：2012-04-13T06:49:28.487
> 
> 标签：maven-2, continuous-integration, hudson, hudson-plugins

我有几个 maven 项目。他们也有 testNG 测试用例。测试运行良好。现在我想将项目与 Hudson 集成以获得基本功能，例如颠覆更新、测试报告、发送电子邮件等。项目是在 java 1.5 中构建的。什么是 Java 1.5 的 hudson 兼容版本，还可以添加 maven 2 模块，配置 subversion。我下载的版本有一些 java 版本问题。然后我替换了导致问题但仍然无法为 svn 配置项目的 jar东西。请帮助我，是否有一步一步的指南......提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:51:56.370

`What is the hudson compatible version for Java 1.5 ?`

正如您已经知道的那样，[最新的 Hudson 版本需要 Java 6](http://wiki.hudson-ci.org/display/HUDSON/Installing+Hudson)。 **但是，Hudson 在其上运行的 Java JRE 并不是您的项目将用于在 Maven 中编译、测试和打包自身的 Java JRE/JDK。**

用于编译项目的 Java Hudson 版本是您在 Hudson UI（管理 Hudson）中选择的选项。事实上，如果您愿意，Hudson 可以针对多个 Java 版本编译和测试您的 Maven 项目。

这是 Hudson 的强大能力，并非立即显而易见。有关详细信息，请参阅以下屏幕截图：

![在此处输入图像描述](../Images/396e876601ac7448d052536874be4a3f.png)

所以底线是这样的： *使用最新版本的 Hudson（或 Jenkins）并将 JDK 安装设置为 v1.5。*

# java - 建造迷宫

> ID：10136426
> 
> 赞同：1
> 
> 时间：2012-04-13T06:50:03.967
> 
> 标签：java, events, awt, frame, paint

起初我认为这很容易，但当我开始这样做时，我不知道如何继续。我的想法是使用面板，然后画粗线，但是绘制墙壁并使我的角色不会超出这些墙壁的正确方法是什么？我只是无法想象我怎么可能做到这一点。这是一个迷宫的草图来说明我将如何做：

![在此处输入图像描述](../Images/9809e8ee37c2eef0b0d368bfbc13d6b0.png)

我刚从 a 开始`Frame`，仍然试图抓住这样做的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T07:05:41.713

首先，您需要一个代表迷宫的数据结构。然后你可以担心画它。

我会建议这样的课程：

```
class Maze {
    public enum Tile { Start, End, Empty, Blocked };
    private final Tile[] cells;
    private final int width;
    private final int height;

    public Maze(int width, int height) {
         this.width = width;
         this.height = height;
         this.cells = new Tile[width * height];
         Arrays.fill(this.cells, Tile.Empty);
    }

    public int height() {
        return height;
    }

    public int width() {
        return width;
    }

    public Tile get(int x, int y) {
        return cells[index(x, y)];
    }

    public void set(int x, int y, Tile tile) {
         Cells[index(x, y)] = tile;
    }

    private int index(int x, int y) {
        return y * width + x;
    }
} 
```

然后我会用块（正方形）而不是线来绘制这个迷宫。一个暗块用于阻塞的瓷砖，一个透明的用于空瓷砖。

要绘画，请执行以下操作。

```
public void paintTheMaze(graphics g) {
    final int tileWidth = 32;
    final int tileHeight = 32;
    g.setColor(Color.BLACK);

    for (int x = 0; x < maze.width(); ++x) {
        for (int y = 0;  y < maze.height(); ++y) {
            if (maze.get(x, y).equals(Tile.Blocked)) (
                 g.fillRect(x*tileWidth, y*tileHeight, tileWidth, tileHeight);
            }
        }
    )

} 
```

# algorithm - Algorithm to determine someones age given only a drivers license number?

> ID：10136428
> 
> 赞同：0
> 
> 时间：2012-04-13T06:50:18.413
> 
> 标签：algorithm

I have been debating doing some work on a site which might be age restricted, one of the things have thought about is a hassle free way to confirm a user's age. I recently heard that the site with the movie trailer for the film ted asks people to enter their name and drivers license number to confirm their age. [http://www.tedisreal.com/](http://www.tedisreal.com/) Are they using an algorithm or is there an open governmental api for this kind of data? I have done some searching on this topic and all I can find is a program written in perl from 2004 which no longer appears to be supported.

Any knowledge about this topic would be appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T06:57:54.320

美国大多数州的算法都是保密的。每个州都有自己的算法和翻译形式。如果您为涉及解密驾驶执照信息的供应商工作，您可以向州许可部门索取文件。

# asp-classic - ASP网站如何运行？

> ID：10136435
> 
> 赞同：1
> 
> 时间：2012-04-13T06:51:05.620
> 
> 标签：asp-classic, visual-studio-2010

我有一台 Windows 7 笔记本电脑。我在那台笔记本电脑上安装了 Visual Studio 2010。我知道我不能在 VS 上运行经典的 ASP，但是……我在 VS 中创建了一个 ASP.NET 项目并从 C: 驱动器运行它。我在 G: 盘上有我的经典 ASP 站点。所以我尝试的是使用：

```
localhost:53345///G:/home/igor/myhomepage.asp 
```

但我收到错误“错误请求”。

有没有办法做我想做的事？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:00:24.440

您必须设置站点，以便 Web 服务器执行 ASP Classic 代码。

为此，请使用以下指南：

[在 IIS 7 上运行经典 ASP](http://www.alexthissen.nl/blogs/main/archive/2008/02/18/running-classic-asp-on-iis-7.aspx)

为 IIS 设置 ASP Classic 后，只需添加一个站点并将其指向 ASP 文件所在的目录。在默认的 IIS 设置中，您还可以将 ASP 文件放在`C:\inetpub\wwwroot`Farhan 建议的位置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T08:39:34.700

我不是 IIS 专家，但运行 ASP Classic 代码的最佳方法是将其复制到**C:\inetpub\wwwroot**文件夹（使用安装 Windows 的驱动器号！）

除了在 IIS 中创建网站并重定向到您的目标驱动程序和文件夹之外，可能会有所帮助，但我不会把钱押在 IIS 的向后兼容性上：)

# php - 多重连接基于两个不同条件的总和值与排序

> ID：10136440
> 
> 赞同：0
> 
> 时间：2012-04-13T06:51:25.470
> 
> 标签：php, mysql

我有一个有 4 个表的数据库。

```
Table 1 - "company" table with company_id as the key
Table 2 - "users" table with the user_id as the key
Table 3 - "teams" table that references the company_id and the user_id (So that user can belong to multiple teams.
Table 4 - "points" table that references the company_id, the user_id, points_earned (Numeric value of points given), exchange_dte (0 - if the user has not used the points, otherwise a unixtime value) 
```

给定一个已知的 company_id，我正在尝试调用属于该“团队”的所有用户并显示他们的总积分和未交换的积分。以下 MySQL 将只提供公司 #1 团队的第一个用户。数据库中目前有 5 个用户都获得了一定数量的积分，有的交换了，有的没有。

```
SELECT 
users.user_id AS u_id, 
SUM(points.points_earned) AS ttl_points,
SUM(case when exchange_dte = '0' then points.points_earned else 0 end) AS unused_points
FROM users
INNER JOIN teams ON teams.user_id = users.user_id
INNER JOIN points ON points.user_id = users.user_id
WHERE (teams.company_id = '1' AND points.company_id = '1' AND users.user_active = '1'); 
```

因此，我尝试将 user_id 添加到 Sum 调用中。并以同样的方式结束。

```
SELECT
users.user_id AS u_id, 
SUM(case when points.user_id = users.user_id then points.points_earned else 0 end) AS ttl_points,
SUM(case when points.exchange_dte = '0' AND points.user_id = users.user_id then points.points_earned else 0 end) AS unused_points
FROM users
INNER JOIN teams ON teams.user_id = users.user_id
INNER JOIN points ON points.user_id = users.user_id
WHERE (teams.company_id = '1' AND points.company_id = '1' AND users.user_active = '1')
ORDER BY ttl_points; 
```

有趣的是，第一个用户的总点数似乎是数据库中的所有点，即使他们有一个 user_id 和 company_id 与他们相关联

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:07:00.290

You're trying to do a SUM without using GROUP BY: not sure if it will work for you but try this adding a `GROUP BY users.user_id` after the end of the query and see if that helps you out.

```
SELECT
users.user_id AS u_id, 
SUM(case when points.user_id = users.user_id then points.points_earned else 0 end) AS ttl_points,
SUM(case when points.exchange_dte = '0' AND points.user_id = users.user_id then points.points_earned else 0 end) AS unused_points
FROM users
INNER JOIN teams ON teams.user_id = users.user_id
INNER JOIN points ON points.user_id = users.user_id
WHERE (teams.company_id = '1' AND points.company_id = '1' AND users.user_active = '1') GROUP BY users.user_id
ORDER BY ttl_points; 
```

# java - 非常简单地使用装饰器模式生成数字

> ID：10136445
> 
> 赞同：9
> 
> 时间：2012-04-13T06:51:33.627
> 
> 标签：java, decorator

我是设计模式的新手，我被要求**使用装饰器模式打印 1 到 10 的数字**。如果这是微不足道的，我很抱歉，但我需要学习。这是我到目前为止所拥有的：

**界面**

```
public interface NextNumber {
    public int getNextNumber(int n);
} 
```

**抽象类**

```
abstract public class PrintNumbers implements NextNumber {
    protected final NextNumber next;
    protected int num;

    public PrintNumbers(NextNumber next, int num)
    {
        this.next = next;
        this.num = num;
    }

    public int getNextNumber(int num)
    {
        return num+1;
    }
} 
```

**装饰类**

```
public class DecoratorCount extends PrintNumbers {
    public DecoratorCount(NextNumber next, int num)
    {
        super(next, num);
    }

    public static void main(String[] args)
    {
        int i = 0;
    }
} 
```

不知道如何继续，或者即使我走对了路。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T07:13:31.810

首先，装饰器类不必扩展装饰但实现相同接口的类。

看看这个维基百科[页面](http://en.wikipedia.org/wiki/Decorator_pattern)。

所以你可以像这样更正你的装饰器：

```
// The interface
public interface NextNumber {

     public int getNextNumber();
}

// The class to decorate
public class PrintNumbers implements NextNumber {

    protected int num;

    public PrintNumbers(int startFrom)
    {
        this.num = startFrom;
    }

    public int getNextNumber()
    {
        return num++;
    }
}

// The abstract decorator
public abstract class DecoratorCount implements NextNumber {

    private PrintNumbers pn;

    public DecoratorCount(PrintNumbers pn)
    {
       this.pn = pn;
    }
} 
```

然后，例如，您可以将数字乘以 2。

```
public class DoubleDecoratorCount extends DecoratorCount {

    public DecoratorCount(PrintNumbers pn)
    {
        super(pn);
    }

    public int getNextNumber()
    {    
        return pn.getNextNumber() * 2;
    }
} 
```

你可以用这种方式测试装饰器

```
public class Test {

    public static void main (String[] args) {
        PrintNumbers pn = new PrintNumbers(0);
        DoubleDecoratorCount decorator = new DoubleDecoratorCount(pn);
        for (int i = 0 ; i < 5 ; ++i)
            System.out.println("value: " + decorator.getNextNumber());
    }
} 
```

此时你可以编写你需要的所有装饰器：

*   乘以 3；
*   将结果写在信中；
*   以十六进制写入结果；
*   ETC...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T07:10:59.797

首先，你需要一些可能需要一些装饰的东西，然后你需要一个装饰器来装饰那个*东西*。基类和装饰器这两个类都是具体类，可以直接使用。

将计数器从 1 装饰到 10 没有多大意义（数字总是很漂亮；））。但是您可以实现一个打印未格式化数字的基本类，然后实现一个装饰器，为打印结果添加一些美感。

# .htaccess - 重定向 SEO 重写 url

> ID：10136448
> 
> 赞同：2
> 
> 时间：2012-04-13T06:51:49.677
> 
> 标签：.htaccess, mod-rewrite

我正在使用这些重写规则从动态 url 到静态的。

```
RewriteEngine On
RewriteRule ^songs/album/([^/]*)\.html$ /index.html?album=$1 [L,QSA] 
```

旧网址：[http](http://example.com/index.html?album=rockstar) ://example.com/index.html?album=rockstar 新网址：[http ://example.com/songs/album/rockstar.html](http://example.com/songs/album/rockstar.html)

但是如果我尝试将旧网址重定向到新网址，它就不起作用

```
RedirectMatch 301 ^/index.html?album=(.*)\$ http://example.com/songs/album/$1.html 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:08:16.533

mod_alias 中的`RedirectMatch`指令与查询字符串不匹配，仅匹配`/index.html`部分。您需要使用 a`RewriteCond ${QUERY_STRING} <regexp>`来匹配它。但是如果你像这样重定向，你将导致一个循环，因为 URI 会通过重写引擎，直到 URI 不变：

1.  用户在其 URL 地址栏中键入[http://example.com/index.html?album=rockstar](http://example.com/index.html?album=rockstar)
2.  浏览器被重定向到[http://example.com/songs/album/rockstar.html](http://example.com/songs/album/rockstar.html)
3.  mod rewrite 看到`/songs/album/rockstar.html`并将其重写为`/index.html?album=rockstar`
4.  重定向规则成功匹配`/index.html?album=rockstar`
5.  从第 2 步开始重复。

您需要确保仅在实际请求是 for 时才重定向`/index.html?album=rockstar`，而不是在通过重写引擎时重定向：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\?album=(.+)\ HTTP
RewriteRule ^index\.html$ http://example.com/songs/album/%1.html? [R=301,L] 
```

**%{THE_REQUEST}**是实际的 HTTP 请求，而不是重写的 URI 。**%1**是对前一个匹配项的反向引用，`RewriteCond`而**?** 在重定向 URL 的末尾告诉`RewriteRule`不要将查询字符串附加到末尾。

# drupal-6 - How can Block direct access to drupal 6 site

> ID：10136449
> 
> 赞同：0
> 
> 时间：2012-04-13T06:51:57.527
> 
> 标签：drupal-6

i have developed a site on drupal 6 and now i want to Block direct access to any node url on my site,how can i Block any user to acces the site and redirect on login page from where they can create a new account if he doesnot have user id and passsword,so any one please help me regarding this.Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:32:25.683

如果您不想允许任何匿名用户访问您网站上的内容，请关闭“用户管理”下的“权限”设置中的权限。

然后，您可以将默认首页设置为 /user，这样访问该站点的每个人都会看到登录屏幕（如果需要，还可以注册用户）。

# c# - SubmitChanges 内部将所有字段添加为 where 子句，如何摆脱它

> ID：10136450
> 
> 赞同：4
> 
> 时间：2012-04-13T06:51:57.993
> 
> 标签：c#, linq, linq-to-sql, where-clause, submitchanges

我在数据库中有一个带有主键的表说`emp_pk`。现在使用 LINQ 我正在尝试对其执行一些操作。当我更改一些属性并调用时，

```
context.SubmitChanges(); 
```

理想情况下 where 子句应该包含`where emp_pk = value`.

但是当我从 SQL 分析器查看查询时，我在 where 子句中看到了很多条件，我相信这些条件是由 LINQ 引擎生成的。这导致了一个主要的性能问题。

在这种情况下，谁能帮我优化查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T07:12:21.577

那是因为启用了乐观并发检查。您可以通过在 dbml 设计器中设置 Update Check=never per column 来关闭它

# gwt - When debugging using GWT devmode, how do I redirect to URLs on my own server?

> ID：10136451
> 
> 赞同：1
> 
> 时间：2012-04-13T06:51:58.410
> 
> 标签：gwt, dev-mode

I'm writing an app using GWT and Java Google App Engine. When I launch a page of the app using devmode, I see a URL that has the suffix "?gwt.codesvr=127.0.0.1:9997". Without that suffix, devmode does not seem to work; therefore I assume it must be there when using devmode (to tell the devmode plugin the address of the server talking to the devmode UI, I presume).

In my app I sometimes either use a redirect on the server side to one of my own pages or emit an HTML page that contains a link to one of my own pages. As I want to browse the app the way a user would, in my URL generation code I look for the parameter "gwt.codesvr", get its value, and then put that suffix that back onto the URL as the query string; that is, I copy the query string. I have checked in the generated HTML that this is doing what I expect:

```
<form class="float-right" action="/foo/id123?gwt.codesvr=127.0.0.1:9997" method="GET" >
<input class="color-red" type=submit value="Get Started" />
</form> 
```

Such links/redirects are intended to move the user from page to page and I thought generating such links would allow me to browse do the same as the user but in devmode; however, it does not seem to be working. In particular, when I click on the link to go to the next page, the query string does not show up in the URL in the browser. That is, the URL in the location bar of Chrome is:

```
http://127.0.0.1:8888/foo/id123? 
```

I don't really know how it is possible to click on a link and have the browser go to the same url but minus the query string (but not missing the "?").

In my app, I am generating the link in Intro.jsp which should forward to /foo/id123?gwt.codesvr=127.0.0.1:9997\. My app.yaml headers section says something similar to this:

```
handlers:

- url: /Intro
  jsp: Intro.jsp

# the internal rpc service
- url: /waga/rpc
  name: WagaServiceImpl
  servlet: com.waga.server.WagaServiceImpl
  login: required

- url: /foo/*
  name: FooServlet
  servlet: com.waga.server.FooServlet
  login: required 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:16:50.070

您的问题与在操作 URL 中传递参数有关。这个问题已经在[这里](https://stackoverflow.com/questions/1977390/html-forms-input-type-submit-problem-with-action-url-when-url-contains-index-a)回答了。似乎无法更改操作 URL 中的查询字符串。一种替代方法是使用隐藏输入来传递参数。另一种方法是使用超链接。

```
<a href="/foo/id123?gwt.codesvr=127.0.0.1:9997">Link</a> 
```

# date - using hudson and ant create datewise folder for each day where concern builds will be there

> ID：10136465
> 
> 赞同：1
> 
> 时间：2012-04-13T06:53:38.300
> 
> 标签：date, ant, hudson

Iam using hudson and ant, i want to create a build structure like according to the current date, date folder has to be created and whenever the scheduled build was done , the concern war has to be placed in that date folder, so that it will be easy to pick up the war by the QA team, according to the date.

now I want to create a date folder according to the current date and to put the war in it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T12:04:50.407

您可以添加到 Ant 构建文件中来执行此操作吗？如果是这样，这可能是一个合适的起点。使用 Ant[`tstamp`任务](http://ant.apache.org/manual/Tasks/tstamp.html)为今天的构建生成目录名称。在此处的示例中，还生成了一个构建时间戳，因此可以保持每天多次构建。

```
<tstamp>
<format property="build.date" pattern="yyyyMMdd" />
<format property="build.time" pattern="HHmmss" />
</tstamp>

<property name="current.build.artifacts" value="${build.artifacts}/${build.date}" />
<mkdir dir="${build.artifacts}/${build.date}" />

<copy file="${build.war}" tofile="${current.build.artifacts}/${build.war}.${build.time}" /> 
```

您还可以考虑使用[`buildnumber`任务](http://ant.apache.org/manual/Tasks/buildnumber.html)或[任务](http://ant.apache.org/manual/Tasks/propertyfile.html)`entry`功能引入内部版本号。[`propertyfile`](http://ant.apache.org/manual/Tasks/propertyfile.html)

# javascript - 穆工具。无法在 iframe 中获取 DOM 元素

> ID：10136468
> 
> 赞同：2
> 
> 时间：2012-04-13T06:53:46.900
> 
> 标签：javascript, iframe, mootools

我有一个基于 SocialEngine 4 的网站，它使用 moo-tools-1.2.5。有一个带有一些 js 的 iframe 在弹出窗口中打开（带有内置的 Smoothbox 插件）。而且我不能通过调用 $$() 从 JS 中获取这个 iframe 的 DOM 元素，我需要使用这样的 kludge：

```
var context = (window.frames[0]) ? window.frames[0] : window;
context.$('user_email').set('value', context.$('1_1_30').get('value')); 
```

这很奇怪，我猜这是出乎意料的行为，因为标准 SocialEngine 模块中的 JS 也不能在 iframe 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:08:07.913

这是因为在 1.2.5 中，`$$`是`this.document.getElements`.

我建议您使用 mootools-core 中的[IFrame 包装类](http://mootools.net/docs/core/Element/Element#IFrame)，它可以扩展 iframe，以便它们变得 mootoolsy，然后您可以执行以下操作：

```
var context = this.document, // window
    iframe = document.getElement("iframe")

// if iframe found, change context to its contentDocument
iframe && (context = new IFrame("foo").contentDocument)

// wrapper.
!function() {
    console.log(this.getElements("div"))
}.call(context) 
```

# algorithm - 聚类数量未知的无监督聚类

> ID：10136470
> 
> 赞同：88
> 
> 时间：2012-04-13T06:54:02.160
> 
> 标签：algorithm, math, artificial-intelligence, machine-learning, cluster-analysis

我有一大组 3 维向量。我需要根据欧几里得距离对它们进行聚类，以使任何特定聚类中的所有向量彼此之间的欧几里得距离小于阈值“T”。

我不知道存在多少个集群。最后，可能存在不属于任何集群的单个向量，因为它的欧几里德距离与空间中的任何向量都不小于“T”。

这里应该使用哪些现有的算法/方法？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-04-13T08:12:55.783

您可以使用[层次聚类](http://en.wikipedia.org/wiki/Hierarchical_clustering)。这是一种相当基本的方法，因此有很多可用的实现。例如，它包含在 Python 的[scipy](http://docs.scipy.org/doc/scipy/reference/cluster.hierarchy.html)中。

例如，请参见以下脚本：

```
import matplotlib.pyplot as plt
import numpy
import scipy.cluster.hierarchy as hcluster

# generate 3 clusters of each around 100 points and one orphan point
N=100
data = numpy.random.randn(3*N,2)
data[:N] += 5
data[-N:] += 10
data[-1:] -= 20

# clustering
thresh = 1.5
clusters = hcluster.fclusterdata(data, thresh, criterion="distance")

# plotting
plt.scatter(*numpy.transpose(data), c=clusters)
plt.axis("equal")
title = "threshold: %f, number of clusters: %d" % (thresh, len(set(clusters)))
plt.title(title)
plt.show() 
```

这会产生类似于下图的结果。 ![集群](../Images/76b64d0eb4f39be64fb7c0cb9348723b.png)

作为参数给出的阈值是一个距离值，在此基础上决定是否将点/集群合并到另一个集群中。也可以指定使用的距离度量。

请注意，计算聚类内/聚类间相似度的方法有多种，例如最近点之间的距离、最远点之间的距离、到聚类中心的距离等。[scipys 层次聚类模块（单/完整/平均...链接](http://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.linkage.html#scipy.cluster.hierarchy.linkage)）也支持其中一些方法。根据您的帖子，我认为您会想要使用[完整的链接](http://en.wikipedia.org/wiki/Complete-linkage_clustering)。

请注意，如果小（单点）集群不满足其他集群的相似性标准，即距离阈值，这种方法也允许它们。

* * *

还有其他算法会表现更好，这将在具有大量数据点的情况下变得相关。正如其他答案/评论所暗示的，您可能还想看看 DBSCAN 算法：

*   [https://en.wikipedia.org/wiki/DBSCAN](https://en.wikipedia.org/wiki/DBSCAN)
*   [http://scikit-learn.org/stable/auto_examples/cluster/plot_dbscan.html](http://scikit-learn.org/stable/auto_examples/cluster/plot_dbscan.html)
*   [http://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html#sklearn.cluster.DBSCAN](http://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html#sklearn.cluster.DBSCAN)

* * *

有关这些和其他聚类算法的一个很好的概述，还可以查看这个演示页面（Python 的 scikit-learn 库）：

*   [http://scikit-learn.org/stable/modules/clustering.html](http://scikit-learn.org/stable/modules/clustering.html)

从那个地方复制的图像：

[![http://scikit-learn.org/stable/auto_examples/cluster/plot_cluster_comparison.html](../Images/0c707f6907ced403b28a1c6291dc6f36.png)](https://i.stack.imgur.com/us6N2.jpg)

如您所见，每种算法都对需要考虑的集群的数量和形状做出了一些假设。无论是算法强加的隐含假设还是参数化指定的显式假设。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-13T17:45:37.227

moooeeeep 的答案建议使用层次聚类。我想详细说明如何*选择*聚类的阈值。

一种方法是根据不同的阈值*t1*、*t2*、*t3* ……计算聚类，然后计算聚类“质量”的度量。前提是具有*最佳*聚类数的聚类质量将具有质量度量的最大值。

我过去使用的一个优质指标的例子是 Calinski-Harabasz。简而言之：您计算平均集群间距离并将它们除以集群内距离。最佳聚类分配将具有彼此分离最多的聚类，以及“最紧密”的聚类。

顺便说一句，您不必使用层次聚类。您还可以使用类似*k*的方法，为每个*k*预先计算它，然后选择具有最高 Calinski-Harabasz 分数的*k*。

如果您需要更多参考资料，请告诉我，我会在硬盘上搜索一些论文。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-13T09:50:15.020

查看[DBSCAN](https://en.wikipedia.org/wiki/DBSCAN)算法。它基于向量的局部密度进行聚类，即它们之间的距离不能超过某个*ε ，并且可以自动确定聚类的数量。*它还考虑离群值，即*ε-*邻居数量不足的点，不属于集群的一部分。维基百科页面链接到一些实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-15T12:00:36.593

使用[OPTICS](https://scikit-learn.org/dev/modules/generated/sklearn.cluster.OPTICS.html)，它适用于大型数据集。

> OPTICS: Ordering Points To identify the Clustering Structure 与 DBSCAN 密切相关，找到高密度的核心样本并从中扩展集群[1](https://scikit-learn.org/dev/modules/generated/sklearn.cluster.OPTICS.html)。与 DBSCAN 不同，它为可变邻域半径保持集群层次结构。比 DBSCAN 的当前 sklearn 实现更适合在大型数据集上使用

```
from sklearn.cluster import OPTICS
db = OPTICS(eps=3, min_samples=30).fit(X) 
```

根据您的要求微调*eps、min_samples 。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-15T07:45:31.710

您可能没有解决方案：当任何两个不同的输入数据点之间的距离总是大于 T 时，就会出现这种情况。如果您只想从输入数据中计算聚类的数量，您可以查看 MCG，一种层次聚类具有自动停止标准的方法：请参阅[https://hal.archives-ouvertes.fr/hal-02124947/document](https://hal.archives-ouvertes.fr/hal-02124947/document)上的免费研讨会论文（包含参考书目）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-11T06:53:49.700

我想通过使用层次聚类来添加到 moooeeeep 的答案。该解决方案对我有用，尽管选择阈值非常“随机”。通过参考其他来源和自己的测试，我得到了更好的方法，并且可以通过树状图轻松选择阈值：

```
from scipy.cluster import hierarchy
from scipy.spatial.distance import pdist
import matplotlib.pyplot as plt

ori_array = ["Your_list_here"]
ward_array = hierarchy.ward(pdist(ori_array))
dendrogram = hierarchy.dendrogram(hierarchy.linkage(ori_array, method  = "ward"))
plt.title('Dendrogram')
plt.xlabel('Customers')
plt.ylabel('Euclidean distances')
plt.show() 
```

你会看到这样的情节 [点击这里](https://i.stack.imgur.com/hufNH.png)。然后通过绘制水平线，假设距离 = 1，连接数将是您想要的集群数。所以在这里我为 4 个集群选择阈值 = 1。

```
threshold = 1
clusters_list = hierarchy.fcluster(ward_array, threshold, criterion="distance")
print("Clustering list: {}".format(clusters_list)) 
```

现在 cluster_list 中的每个值都将是 ori_array 中对应点的指定 cluster-id。

# oracle - Examples and tutorials for TopLink

> ID：10136472
> 
> 赞同：2
> 
> 时间：2012-04-13T06:54:15.070
> 
> 标签：oracle, toplink

I can't find any good tutorials or examples of simple application that would map object to relational database using TopLink. Do you know any?

The only one, that I could find was: [http://www.oracle.com/technetwork/middleware/ias/index-092145.html](http://www.oracle.com/technetwork/middleware/ias/index-092145.html), but this is for old version of TopLink.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:08:56.857

试试[http://docs.oracle.com/cd/E14571_01/web.1111/b32441/toc.htm](http://docs.oracle.com/cd/E14571_01/web.1111/b32441/toc.htm)（对于 11i）。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:35:30.410

TopLink 11 捆绑了 EclipseLink 来实现它。

见， [http://wiki.eclipse.org/EclipseLink/Examples](http://wiki.eclipse.org/EclipseLink/Examples)

# windows-phone-7 - 在 WP7 中为 Silverlight Bing 地图控件设置标题？

> ID：10136473
> 
> 赞同：0
> 
> 时间：2012-04-13T06:54:17.613
> 
> 标签：windows-phone-7, bing-maps

根据微软文档中的[这个页面](http://msdn.microsoft.com/en-us/library/gg589031%28v=vs.92%29.aspx)，可以使用方法调用设置 Bing 地图的标题以及它的中心坐标和缩放级别，`setView(GeoCoordinate, double, double)`但实际上，只关注前两个参数以及何时我检查`myMap.Heading`它的值仍然是 0。我也尝试过直接更改标题 ( `myMap.Heading=270;`) 并且发生了同样的事情。任何人都可以提供一些帮助吗？

注意：航向应该以度数为单位，从 0 开始表示北，顺时针增加。（[来源](http://msdn.microsoft.com/en-us/library/ee681898.aspx)）

我发现了一个关于这个的[老话题](https://stackoverflow.com/questions/6268312/the-bing-map-control-for-wp7-has-two-properties-called-pitch-and-heading-but-se)，但它是在 2011 年发布的，显然是在 WP 中实现之前（除非它仍然没有，但文档会建议其他方式）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:36:55.853

Heading 属性仅在 Birdseye（即倾斜）视图中起作用，以指定您是否需要北、东、南或西方面。

您可能会发现这篇文章很有帮助：[http ://alastaira.wordpress.com/2012/03/28/rotating-bing-maps/](http://alastaira.wordpress.com/2012/03/28/rotating-bing-maps/)

# android - 如何获得准确的拨出电话接听时间？

> ID：10136475
> 
> 赞同：1
> 
> 时间：2012-04-13T06:54:25.000
> 
> 标签：android

我是安卓新手。

我正在实现一个与来电和去电详细信息相关的应用程序。

我正在使用广播接收器获取拨出电话和来电详细信息。

问题是当来电来电时，广播接收器会上升，

我拨打广播接收器提出的拨出电话。

很好，但是当我单击绿色按钮时，将开始拨出电话，但是

我想要接听对方电话的确切时间。

我怎么得到这个？

如果有人知道请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:08:56.943

尝试使用 TelephonyManager

```
if ((intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL) || (intent
                .getAction()
                .equals(TelephonyManager.ACTION_PHONE_STATE_CHANGED)))) {

            String phoneState = intent.getExtras().getString(
                    TelephonyManager.EXTRA_STATE);
            if (intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL)) {
                Log.d(TAG, "Outgoing call");

            if (TelephonyManager.EXTRA_STATE_OFFHOOK.equals(phoneState)) {
                Log.d(TAG, "Incoming call/Outgng call Started");

            }
            if (TelephonyManager.EXTRA_STATE_IDLE.equals(phoneState)) {
                Log.d(TAG,"Call ended");
            }
            if (TelephonyManager.EXTRA_STATE_RINGING.equals(phoneState)) {
                Log.d(TAG,"Call ringing");
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:11:44.587

不断检查设备状态何时从 CALL_STATE_IDLE 更改为[CALL_STATEOFFHOOK](http://developer.android.com/reference/android/telephony/TelephonyManager.html#CALL_STATE_OFFHOOK) ...它给出了您呼叫被应答的确切时间

# javascript - 从浏览器 chrome 打印网页时缺少 HTML 图像

> ID：10136477
> 
> 赞同：1
> 
> 时间：2012-04-13T06:54:31.943
> 
> 标签：javascript, google-chrome, printing, cross-browser

我正在使用 javascript 代码来打印带有一些文本的图像。我在我的 html 页面中使用了一个名为“divPrintArea”的 div 区域。该 div 的内容将通过调用 javascript 函数打印出来。

从除 Chrome 之外的所有浏览器（即最新版本的 ie、firefox、opera、safari）打印时，图像都很好。但在 Chrome 的情况下，它有时会丢失。

我的第二个问题是我无法将默认页面布局设置为“横向”。你有什么线索吗？请详细给出一些解决方案。TIA。

```
function printdata() {
var printHtml = "";
printHtml = printHtml + "<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>";
printHtml = printHtml + "<html xmlns='http://www.w3.org/1999/xhtml'>";
printHtml = printHtml + "<head>";
printHtml = printHtml + "<meta http-equiv='cache-control' content='no-cache, must-revalidate'>";
printHtml = printHtml + "<meta http-equiv='refresh' content='0; http://www.MyWebsite.com/' />";
printHtml = printHtml + "<meta http-equiv='expires' content='-1'>";
printHtml = printHtml + "<meta http-equiv='pragma' content='no-cache, must-revalidate'>";
printHtml = printHtml + "<title>www.MyWebsite.com</title>";
printHtml = printHtml + "<style type=\"text/css\" media=\"print\">td{border:0px solid #000; padding:2px 5px;}";
printHtml = printHtml + "body{background:#fff;";
printHtml = printHtml + "width='100%';";
printHtml = printHtml + "height='100%';";
printHtml = printHtml + "filter:progid:DXImageTransform.Microsoft.BasicImage(Rotation=3);";
printHtml = printHtml + "}";
printHtml = printHtml + "</style></head>";
printHtml = printHtml + "<body>";
printHtml = printHtml + "<div style=\"text-align:left; border-bottom:1px dashed #2D86C5; border-top:1px dashed #2D86C5; font-family:'GillSansMTRegular', Arial;\">";
printHtml = printHtml + document.getElementById("divPrintArea").innerHTML;
printHtml = printHtml + "</div>";
printHtml = printHtml + "</body>";
printHtml = printHtml + "</html>";
win = window.open("http://www.MyWebsite.com/", "My");
win.document.write(printHtml);
win.document.close();
win.focus();
win.onload = win.print();
win.close();
return false; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:05:01.880

你的代码有问题：

```
filter:progid:DXImageTransform.Microsoft.BasicImage(Rotation=3); 
```

这仅受 IE 支持，您应该改用 CSS3 `transform`。

```
width='100%';
height='100%'; 
```

我们不使用`=`登录 CSS。我们使用`:`. 也许这就是问题的原因。

## 旁注

好吧，在您的代码中，您不应该真的做所有这些事情。您应该使用[`createElement`](https://developer.mozilla.org/en/DOM/document.createElement), 并将所有更改`printHtml = printHtml +`为

```
printHtml += 
```

此外，使用`document.write`已过时。改为使用`appendChild`。[[MDN]](https://developer.mozilla.org/en/DOM/element.appendChild)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T01:49:44.997

要打印图像，您应该像这样关闭窗口：

```
 setTimeout(function () {
            toDoWindow.close();
        }, 2000); 
```

# php - Go webserver 性能稳定性如何，与 Tomcat、Apache 相比，长期运行稳定性如何？

> ID：10136478
> 
> 赞同：12
> 
> 时间：2012-04-13T06:54:34.280
> 
> 标签：php, ruby, apache, tomcat, go

我一直在考虑而不是使用：

*   雄猫
*   阿帕奇
*   轻量级网络服务器
*   PHP
*   红宝石
*   JSP

为什么不将我的项目切换到 Go 语言。因为我有：

*   内置网络服务器
*   我什至不需要依赖 PHP、Ruby、JSP
*   Go 解决跨平台如：在 FreeBSD、Linux、Solaris（Windows、Mac、Android、Tizen）上运行
*   既不是 Apache 也不是 Tomcat 也不是其他网络服务器维护
*   浏览器的速度将比其他 Web 服务器脚本语言快得多。

但我担心的一件事是 Go 网络服务器与其他网络服务器相比的稳定性。

以前有没有人这样做过，还是我一个人为生产版本构建这样的项目？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-13T09:33:33.037

不存在稳定性问题。

我有几个 100% 的网络服务器运行了几个月，每月服务大约一百万个查询而没有任何问题（主要是 json，通过 GET、POST 和 websockets）。

它们在 64 位 ubuntu 服务器上，但我想你会很难产生这么多关于 32 位的错误，尤其是使用 Web 服务器。

如果没有特定原因，请不要使用前端：使用 Go 很容易制作完整的 Web 应用程序。

你将不再孤单。在我看来，Go 特别适合构建长时间运行的服务器。Goroutines 和 channels 使得处理用户请求和长期任务变得非常容易（或者，例如，在你回答 http 查询后对用户查询进行后处理，这在 php 中并不容易，在 java 中 LOC 太多如果你想正确地做到这一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:59:42.037

为什么不使用 Build in Webserver 并设置像 Varnish 这样的反向代理，或者让 Nginx 充当代理？

[http://wiki.nginx.org/ReverseProxyCachingExample](http://wiki.nginx.org/ReverseProxyCachingExample)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:54:20.367

使用 Nginx 作为前端，并确保您使用的是 64 位版本的 Go。32 位版本存在严重的稳定性问题，这对于任何长时间运行的进程来说都是一个阻碍。

# ruby-on-rails - 如何在 Ruby on Rails 中设置按钮样式

> ID：10136487
> 
> 赞同：2
> 
> 时间：2012-04-13T06:55:48.940
> 
> 标签：ruby-on-rails

按钮如下：

```
 <%= render 'follow_form' if signed_in? %> 
```

在 follow_form 中：

```
 <%= render 'follow' %> 
```

在 follow.html.erb 中：

```
 <%= form_for current_user.relationships.build(:followed_id => @user.id),
         :remote => true do |f| %>
    <div><%= f.hidden_field :followed_id %></div>
    <div class="actions"><%= f.submit "Watch" %></div>
    <% end %> 
```

我将如何使用 CSS 设置样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:06:47.620

您可以简单地将参数传递给`f.submit`帮助程序，包括类和/或 ID，以使按钮能够由 CSS 设置样式。例如，您可以将其放入 ERB：

```
<div class="actions"><%= f.submit "Watch", :class => "button" %></div> 
```

然后有一个适用于此的 CSS 类，例如：

```
.button{
  color: #bbbbbb;
  width: 200px;
  height: 100px;
  /*add any other properties you want to style*/
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T07:00:10.080

尝试 ：

```
<%= f.submit "Watch" , :style => 'padding-top: 14px', :class => 'class_name' %> 
```

# windows-phone-7 - 如何在代码中设置windows phone系统的壁纸？

> ID：10136488
> 
> 赞同：1
> 
> 时间：2012-04-13T06:55:51.200
> 
> 标签：windows-phone-7

我想在c#中通过代码设置系统的壁纸，但是没有找到任何关于它的类或api。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:19:26.437

不幸的是，您无法通过代码更改手机的壁纸。一些自制应用程序设法通过一些黑客来做到这一点，但它需要一部解锁的手机，并且它将无法通过市场认证。

# android - 获取当前来电和去电的电话号码

> ID：10136490
> 
> 赞同：4
> 
> 时间：2012-04-13T06:55:55.083
> 
> 标签：android, phone-number

我正在制作一个应用程序，我必须在其中检索电话号码并且我能够检索它，但我的问题是我正在获取**最后一次通话的****电话号码**而不是**当前通话**。我的代码如下：

 ****```
projection = new String[]{Calls.NUMBER};
cur = context.getContentResolver().query(Calls.CONTENT_URI, projection, null, null, null);
cur.requery();
numberColumn = cur.getColumnIndex(Calls.NUMBER);
cur.requery();
cur.requery();
cur.requery();
cur.requery();
cur.moveToLast();
s = cur.getString(numberColumn);
String pathname = "/sdcard/" + s + ".amr"; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T02:02:15.987

正如 Krutix 所建议的，呼叫 LOG 是完成电话呼叫的 LOG，在呼叫完成后由拨号器应用程序写入。因此，您不会在内容提供商中找到当前正在拨打的号码。

这是一个实现，如果它是作为incomingNumber 的来电，并且当呼叫完成时，它允许您检索电话号码 - 请注意 Handler() 代码。

```
private class PhoneCallListener extends PhoneStateListener {

    private boolean isPhoneCalling = false;

    @Override
    public void onCallStateChanged(int state, String incomingNumber) {

        if (TelephonyManager.CALL_STATE_RINGING == state) {
            // phone ringing
            Log.i(LOG_TAG, "RINGING, number: " + incomingNumber);
        }

        if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
            // active
            Log.i(LOG_TAG, "OFFHOOK");

            isPhoneCalling = true;
        }

        if (TelephonyManager.CALL_STATE_IDLE == state) {
            // run when class initial and phone call ended, need detect flag
            // from CALL_STATE_OFFHOOK
            Log.i(LOG_TAG, "IDLE number");

            if (isPhoneCalling) {

                Handler handler = new Handler();

                //Put in delay because call log is not updated immediately when state changed
                // The dialler takes a little bit of time to write to it 500ms seems to be enough
                handler.postDelayed(new Runnable() {

                    @Override
                    public void run() {
                        // get start of cursor
                          Log.i("CallLogDetailsActivity", "Getting Log activity...");
                            String[] projection = new String[]{Calls.NUMBER};
                            Cursor cur = getContentResolver().query(Calls.CONTENT_URI, projection, null, null, Calls.DATE +" desc");
                            cur.moveToFirst();
                            String lastCallnumber = cur.getString(0);
                    }
                },500);

                isPhoneCalling = false;
            }

        }
    }
} 
```

然后在 onCreate 或 onStartCommand 代码中添加并初始化监听器：

```
 PhoneCallListener phoneListener = new PhoneCallListener();
    TelephonyManager telephonyManager = (TelephonyManager) this
            .getSystemService(Context.TELEPHONY_SERVICE);
    telephonyManager.listen(phoneListener,
            PhoneStateListener.LISTEN_CALL_STATE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:16:19.410

请修改您的查询

```
 cur = context.getContentResolver().query(Calls.CONTENT_URI,
                        projection, null, null, Calls.DATE +" desc");
  cur.moveToFirst();
  s = cur.getString(numberColumn); 
```

它会给出最后一次通话的电话号码，不需要重复查询这么多次****

# android - 运行一个线程几秒钟

> ID：10136494
> 
> 赞同：1
> 
> 时间：2012-04-13T06:56:17.697
> 
> 标签：android, multithreading, media-player, decrement

我正在使用媒体播放器实例播放音乐文件。我想播放歌曲一段时间然后停止播放。我正在使用计数器递减的线程，但有些无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:01:48.403

这是你可以做的事情.. 正常播放媒体播放器，同时初始化一个[处理程序](http://developer.android.com/reference/android/os/Handler.html)并使用你想要的间隔调用它的[postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)方法.. 并在其中停止媒体播放器.. 像这样的东西..

```
new Handler().postDelayed(new Runnable(){

//stop playing
}, 400); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T07:11:06.797

你必须为此使用处理程序

试试这个

```
in your onCreate use this 

  //start media player
  mp.start();

  mTimer.sendMessageDelayed(new Message(),5*10000); 
```

在您的活动课程中创建一个课程

```
 private MusicTimer mTimer = new MusicTimer();

    private class MusicTimer extends Handler
    {
       @Override
       handleMessage(Message msg)
       {
           onTimerExpire();
       }  

        public void onTimerExpire()
        {
           //stop player here
        }

} 
```

使媒体播放器对象成员变量这将播放五秒然后停止nthat

# xml - XML Schema rcase-NameAndTypeOK.3.2.5 无效

> ID：10136495
> 
> 赞同：0
> 
> 时间：2012-04-13T06:56:23.393
> 
> 标签：xml, inheritance, xsd

所以，我正在尝试创建一个模式，其中我使用一个模式作为参考并且从不触摸以及另一个模式，我可以触摸、扩展、限制等。所以我现在遇到的问题是我面临一个约束rcase-NameAndTypeOK3.2.5。

```
<!--Msg -->
<xs:complexType name="Main">
    <xs:complexContent>
        <xs:restriction base="B">
            <xs:sequence>
                <xs:element name="B1" type="BType"/>
                <xs:element name="B2" type="BType"/>
                <xs:element name="B3" type="B3-Type"/>
            </xs:sequence>
        </xs:restriction>
    </xs:complexContent>
</xs:complexType>
<!-- Types -->
<xs:complexType name="B3-Type">
    <xs:complexContent>
        <xs:extension base="BType">
            <xs:sequence>
                <xs:element name="B-4"/>
            </xs:sequence>
        </xs:extension>
    </xs:complexContent>
</xs:complexType>

<!-- Source -->
<xs:complexType name="BType">
    <xs:sequence>
        <xs:element name="B-1"/>
        <xs:element name="B-2"/>
        <xs:element name="B-3"/>
    </xs:sequence>
</xs:complexType>
<xs:complexType name="B">
    <xs:sequence>
        <xs:element name="B1" type="BType"/>
        <xs:element name="B2" type="BType"/>
        <xs:element name="B3" type="BType"/>
    </xs:sequence>
</xs:complexType> 
```

我有一个解决方法，那就是消除 Main 中的限制。在不取消 Main 限制的情况下是否有另一种解决方法？有什么我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:19:23.870

我没有看到另一种解决方法 - 问题是`Main`定义不是限制也不是扩展`B`- 因为它可以包含一个元素`B3`，`B`但有一个额外的 sub-element `B-4`。

If you want to have a fixed base schema and then a derived schema with some declaration equal to the base one and some other different probably you should use `xsd:redefine`

# android - 如何在 SOAP Web 服务中发布数据

> ID：10136497
> 
> 赞同：0
> 
> 时间：2012-04-13T06:56:32.360
> 
> 标签：android, web-services, ksoap2

我有以下 XML，我想在其中发布记录**ProductNumber**，**Quantity**，**Price**。

```
 <?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <QueryPrices xmlns="xyz">
      <strSessionKey>string</strSessionKey>
      <nDiscountID>int</nDiscountID>
      <objOrderItems>
        <OrderItem>
          <ProductNumber>int</ProductNumber>
          <Quantity>int</Quantity>
          <Price>float</Price>
        </OrderItem>
        <OrderItem>
          <ProductNumber>int</ProductNumber>
          <Quantity>int</Quantity>
          <Price>float</Price>
        </OrderItem>
      </objOrderItems>
    </QueryPrices>
  </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:02:47.087

创建肥皂对象，并仅用于`addProperty()`传递参数。

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
request .addProperty("key", value); 
```

处理[SOAP](http://www.helloandroid.com/tutorials/using-ksoap2-android-and-parsing-output-data)

在你的情况下：

```
request.addProperty( "ProductNumber","something");
request.addProperty( "Quantity","something");
request.addProperty( "Price","something"); 
```

# php - 通过 PHP 上传图片，将图片路径保存到 MySQL

> ID：10136498
> 
> 赞同：0
> 
> 时间：2012-04-13T06:56:54.993
> 
> 标签：php, mysql

当然，这对您的专家来说很容易，我正在尝试将图像上传到站点并保存到数据库的路径。如果可能，如何在保存之前更改图像大小？

这是我在更新时处理更新查询的脚本：

```
<?php   // Get Event ID
    $update=$_GET['update'];

    // Create Session
    $event_name=$_POST['event_name'];
    $event_description=$_POST['event_description'];
    $event_date=$_POST['event_date'];
    $event_time=$_POST['event_time'];
    $event_cost=$_POST['event_cost'];
    $event_image=$_POST['event_image'];

    // Connection to MySQL Database.
    include ('_includes/_dbconnection.php');
    include ('_includes/_dbopen.php');

    // Update Event using Event ID.

    $sql="UPDATE b_events SET ename = '$event_name', edescription = '$event_description', edate = '$event_date', etime = '$event_time', ecost = '$event_cost', eimage = '$event_image' WHERE id = '$update'";
    $result=mysql_query($sql);

    if($result){
    header('Location: _events.php');
    }

    else {
    header('Location: _home.php');
    }

?> 
```

我在图片的 update.html 中有以下代码：

```
<input name="event_image" type="file" /> 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:05:54.537

要更改图像大小必须调整大小。创建具有特定尺寸的副本的功能。

```
<?php
// File and new size
$filename = 'test.jpg';
$percent = 0.5;

// Content type
header('Content-Type: image/jpeg');

// Get new sizes
list($width, $height) = getimagesize($filename);
$newwidth = $width * $percent;
$newheight = $height * $percent;

// Load
$thumb = imagecreatetruecolor($newwidth, $newheight);
$source = imagecreatefromjpeg($filename);

// Resize
imagecopyresized($thumb, $source, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);

// Output
imagejpeg($thumb);
?> 
```

来源： http: [//php.net/manual/en/function.imagecopyresized.php](http://php.net/manual/en/function.imagecopyresized.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:06:35.547

PHP 有用于处理图像的 GD 库：函数 imagecopyresampled 调整图像大小。验证 GD 是否在您的 php 配置中启用 [http://us3.php.net/imagecopyresampled](http://us3.php.net/imagecopyresampled)

# asp.net - 网格视图寻呼机样式问题

> ID：10136499
> 
> 赞同：1
> 
> 时间：2012-04-13T06:57:01.197
> 
> 标签：asp.net, css

[1](https://i.stack.imgur.com/udI1L.png)我的 gridview 代码是这样的：

```
<asp:GridView runat="server"
    ID="gvOpenProblems"
    AutoGenerateColumns="true"
    BorderColor="Black"
    OnRowCreated="gvOpenProblems_RowCreated"
    OnRowDataBound="gvOpenProblems_RowDataBound"
    HeaderStyle-HorizontalAlign="Center"
    Width="2000px"
    AllowPaging="true"
    PageSize="20"
    OnPageIndexChanging="gvOpenProblems_PageIndexChanging">

    <RowStyle HorizontalAlign="Left" />
    <PagerStyle CssClass="gridpager"
        HorizontalAlign="Left"
        Width="200px" /> 
```

CSS就像：

```
.gridpager, .gridpager td {
    text-align: left;
    color: Green;
    font-weight: bold;
    text-decoration: none;
    border: 0;
    position: relative;
    margin-left: auto;
    margin-right: auto;
    padding: 0px;
}

.gridpager a {
    color: Red;
    font-weight: normal;
} 
```

这工作正常，但是当页数超过 10 页时，当我点击第 10 页或第 11 页时，所有页码都会散开并超出网格。

![检查图像](../Images/81a5ed12d0555d600a83c90937458600.png)

这是正常问题还是 CSS 的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:08:49.140

问题是您将宽度设置为 200px。您认为这适用于保存分页控件的包含表是可以原谅的，但事实并非如此，它是包含 a & span 标签的 TD。

# java - 在 vista 上替代 System.loadlibrary()

> ID：10136500
> 
> 赞同：1
> 
> 时间：2012-04-13T06:57:01.900
> 
> 标签：java, dll, windows-vista, loadlibrary

我创建了一个 dll 并在我的 java 程序中使用。
它在 Windows XP 和 Windows 7 上运行良好。但是当我在 Windows Vista 上使用相同的程序时，我收到 Unsatisfied Link 错误。
我知道 System.loadlibrary() 在 Vista 上不起作用（[请参阅此](http://social.msdn.microsoft.com/Forums/en/windowsgeneraldevelopmentissues/thread/6d7ecdab-76ae-455d-ac78-9218e761da09)）。
请向我建议一些 System.loadlibrary() 的替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:06:31.217

System.loadlibrary() 在 Vista 上运行良好。您的问题是找不到 DLL 或其依赖项之一。很可能是您需要安装适当的 MSVC 运行时。有时您在某些机器上没有这样做就可以逃脱，因为其他一些应用程序已经安装了运行时。

如果您无法从本机代码编译器的文档中解决此问题，我建议您在配置文件模式下使用 Dependency Viewer 来调试 System.loadlibrary 故障。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:11:48.890

System.Loadlibrary 在 Vista 中工作正常，您的链接指向特定库的问题，而不是 LoadLibrary 本身。作为 LoadLibrary 的替代方法，您可以使用 System.Load 并提供绝对路径（至少像这样您会知道您的库是否可以加载）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:05:11.437

我宁愿使用 Dependency Walker (http://www.dependencywalker.com/) 之类的工具从您的 DLL 中“调用”哪些库

如果路径上缺少 DLL，此应用程序可以告诉您。您还可以在启动 java 程序之前检查 shell 变量 PATH。

希望能帮助到你。

# java - 检查 RMI 连接的更好方法

> ID：10136503
> 
> 赞同：5
> 
> 时间：2012-04-13T06:57:22.583
> 
> 标签：java, rmi

下面是一个静态方法，用于检查另一端 RMI 服务器是否在线，我基本上调用一个方法，如果它回复 true，则表示连接已打开，如果它没有回复并给出异常，则表示有问题。有更好的方法吗？有没有更好的方法来加快这个过程？如果有连接，它会快速返回值，但如果没有，则需要一些时间。

```
public static boolean checkIfOnline(String ip,int port)
{
    boolean online = false;
    try {

    InetAddress ipToConnect;
    ipToConnect = InetAddress.getByName(ip);

    Registry registry = LocateRegistry.getRegistry(ipToConnect.getHostAddress(),port);
    ServerInterface rmiServer = (ServerInterface)registry.lookup("ServerImpl");

    online = rmiServer.checkStudentServerOnline();

    if(online)
    {
        System.out.println("Connected to "+ipToConnect);
    }

    } catch (RemoteException e) {

        System.out.println(e.getMessage());
        //e.printStackTrace();
        return false;
    } catch (NotBoundException e) {
        System.out.println(e.getMessage());
        //e.printStackTrace();
        return false;
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return online;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-09T04:34:01.937

测试*任何*资源是否可用的最好方法就是尝试使用它。这将成功或失败，失败告诉您它不可用（或其他问题）。

任何基于预先执行附加代码的方法都只是试图预测未来。它容易出现几个问题，其中包括测试错误的东西以及测试和使用之间的状态变化。

# stored-procedures - 获取Oracle中两个日期时间之间的时间差

> ID：10136506
> 
> 赞同：0
> 
> 时间：2012-04-13T06:57:30.923
> 
> 标签：stored-procedures, triggers, oracle10g, oracle-apex

情况1：

```
p_start_date = 13.Apr.2012 13:00
p_end_date = 13.Apr.2012 15:00

working_hours = 0

// in this Situation working_hours should be 2 
```

情况2：

```
p_start_date = 13.Apr.2012 13:00
p_end_date = 14.Apr.2012 15:00

working_hours = 24

// in this Situation working_hours should be 26 
```

当我使用 and 运行它时`SQLDevelopper`，`Situation 1`正确返回`Situation 2`值。`working_hours`但我将此程序称为`Before Insert Update Trigger`在我的顶点应用程序中使用。当我提交表格形式时`Situation 1`，值为`working_hours`is `0`，当我提交表格形式时`Situation 2`，值为`working_hours`is `24`。

根据`Situation 1`和`Situation 2`，两个日期之间的差异分配给working_hours。但我需要的是两次之间的差异。

我怎么能那样做？

我的计算程序`working_hours` 是，

```
PROCEDURE get_labour_cost_data(
 p_employee_id IN NUMBER,
 p_start_date IN VARCHAR2,
 p_end_date IN VARCHAR2,
 hours_normal_rate OUT NUMBER,
 working_hours OUT NUMBER,
 total_cost OUT NUMBER)

 AS

 v_employee_rate NUMBER;

 BEGIN

  if p_employee_id is null then

    hours_normal_rate := 0; 
    working_hours := 0;
    total_cost := 0;

  elsif p_employee_id is not null then

    -- Get hourse_noraml from employee
    select HOURLY_SALARY into hours_normal_rate from Employee
    where EMPLOYEE_ID = p_employee_id;

    -- Get working hours   
    working_hours := 24 * (to_date(p_end_date, 'dd.mm.rr hh24:mi') - to_date(p_start_date, 'dd.mm.rr hh24:mi'));

    -- Get Total cost   
    total_cost := nvl(hours_normal_rate,0) * nvl(working_hours,0);

    end if;    
  END; 
```

触发器是，

```
create or replace
TRIGGER LABOUR_COST_BIU_TRI 
BEFORE INSERT OR UPDATE ON LABOUR_COST 
FOR EACH ROW
DECLARE

v_hours_normal NUMBER;
v_working_hours NUMBER;
v_total_cost NUMBER;
BEGIN

    util.get_labour_cost_data(
    p_employee_id => :NEW.EMPLOYEE_ID,
    p_start_date => :NEW.START_DATE_TIME,
    p_end_date => :NEW.END_DATE_TIME,
    hours_normal_rate => v_hours_normal,
    working_hours => v_working_hours,
    total_cost => v_total_cost
  );

      select v_hours_normal, v_working_hours, v_total_cost into :NEW.HOURS_NOMAL, :NEW.HOURS_OT, :NEW.TOTAL_COST
  from dual;

END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:02:28.057

当我单独创建并运行您的程序时，它可以工作：

```
declare
 hours_normal_rate NUMBER;
 working_hours NUMBER;
 total_cost NUMBER;
begin
get_labour_cost_data(
 1,
 '13.Apr.2012 13:00',
 '13.Apr.2012 15:00',
 hours_normal_rate,
 working_hours,
 total_cost);
 dbms_output.put_Line(working_hours);
END; 
```

输出：

```
2 
```

和：

```
declare
 hours_normal_rate NUMBER;
 working_hours NUMBER;
 total_cost NUMBER;
begin
get_labour_cost_data(
 1,
 '13.Apr.2012 13:00',
 '14.Apr.2012 15:00',
 hours_normal_rate,
 working_hours,
 total_cost);
 dbms_output.put_Line(working_hours);
END; 
```

输出：

```
25.99999999999999999999999999999999999992 
```

（关！）

我看不出您在触发器中使用它的方式有任何问题，尽管可以简化为：

```
create or replace
TRIGGER LABOUR_COST_BIU_TRI 
BEFORE INSERT OR UPDATE ON LABOUR_COST 
FOR EACH ROW
BEGIN

    util.get_labour_cost_data(
    p_employee_id => :NEW.EMPLOYEE_ID,
    p_start_date => :NEW.START_DATE_TIME,
    p_end_date => :NEW.END_DATE_TIME,
    hours_normal_rate => :NEW.HOURS_NOMAL,
    working_hours => :NEW.HOURS_OT,
    total_cost => :NEW.TOTAL_COST
  );

END; 
```

# jquery - jQuery 中的 HTML 网格分页

> ID：10136507
> 
> 赞同：0
> 
> 时间：2012-04-13T06:57:53.823
> 
> 标签：jquery, html

我在网格中有 50 条记录。我想在页面加载时显示 25 条记录。当我单击“下一步”按钮时，我希望显示更多记录，例如 100 条中的 25-50 条。（例如，Gmail`<`和`>`按钮）

谢谢你，桑托什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T12:55:44.840

```
 If your meaning is a Database Grid This is a Base and Good way to Make a jquery/PHP Pagination:

    **For Example we have a Database Like This :**

        CREATE TABLE messages
        (
        msg_id INT PRIMARY KEY AUTO_INCREMENT,
        message TEXT
        );

    also we make a js file named jquery_pagination.js :

        $(document).ready(function()
        {
        //Display Loading Image
        function Display_Load()
        {
        $("#loading").fadeIn(900,0);
        $("#loading").html("<img src="bigLoader.gif" />");
        }
        //Hide Loading Image
        function Hide_Load()
        {
        $("#loading").fadeOut('slow');
        };
        //Default Starting Page Results
        $("#pagination li:first")
        .css({'color' : '#FF0084'}).css({'border' : 'none'});
        Display_Load();
        $("#content").load("pagination_data.php?page=1", Hide_Load());
        //Pagination Click
        $("#pagination li").click(function(){
        Display_Load();
        //CSS Styles
        $("#pagination li")
        .css({'border' : 'solid #dddddd 1px'})
        .css({'color' : '#0063DC'});
        $(this)
        .css({'color' : '#FF0084'})
        .css({'border' : 'none'});
        //Loading Data
        var pageNum = this.id;
        $("#content").load("pagination_data.php?page=" + pageNum, Hide_Load());
        });
        });

    This is our Config.php file:
    ....you have to change the detail

        <?php
        $mysql_hostname = "localhost";
        $mysql_user = "username";
        $mysql_password = "password";
        $mysql_database = "database";
        $bd = mysql_connect($mysql_hostname, $mysql_user, $mysql_password) 
        or die("Opps some thing went wrong");
        mysql_select_db($mysql_database, $bd) 
        or die("Opps some thing went wrong");
        ?>

pagination.php :

        <?php
        include('config.php');
        $per_page = 9; 

        //Calculating no of pages
        $sql = "select * from messages";
        $result = mysql_query($sql);
        $count = mysql_num_rows($result);
        $pages = ceil($count/$per_page)
        ?>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/
        libs/jquery/1.3.0/jquery.min.js"></script>
        <script type="text/javascript" src="jquery_pagination.js"></script>

        <div id="loading" ></div>
        <div id="content" ></div>
        <ul id="pagination">
        <?php
        //Pagination Numbers
        for($i=1; $i<=$pages; $i++)
        {
        echo '<li id="'.$i.'">'.$i.'</li>';
        }
        ?>
        </ul>

    pagination_data.php :

        <?php
        include('config.php');
        $per_page = 9; 
        if($_GET)
        {
        $page=$_GET['page'];
        }

        $start = ($page-1)*$per_page;
        $sql = "select * from messages order by msg_id limit $start,$per_page";
        $result = mysql_query($sql);
        ?>
        <table width="800px">
        <?php
        while($row = mysql_fetch_array($result))
        {
        $msg_id=$row['msg_id'];
        $message=$row['message'];
        ?>
        <tr>
        <td><?php echo $msg_id; ?></td>
        <td><?php echo $message; ?></td>
        </tr>
        <?php
        }
        ?>
        </table>

    Also we can use a ** Css Code ** for Page Numbers :

    <style>

        #loading
        { 
        width: 100%; 
        position: absolute;
        }
        li
        { 
        list-style: none; 
        float: left; 
        margin-right: 16px; 
        padding:5px; 
        border:solid 1px #dddddd;
        color:#0063DC; 
        }
        li:hover
        { 
        color:#FF0084; 
        cursor: pointer; 
        }

    </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:11:17.753

最简单的方法是使用 jquery TableSorter [http://tablesorter.com/docs/](http://tablesorter.com/docs/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:16:50.430

您可以在基本 HTML 表中实现 jquery 网格插件。访问这里：[http ://datatables.net](http://datatables.net/)

# android - android开发中有类似TimeSpan的东西吗？

> ID：10136508
> 
> 赞同：8
> 
> 时间：2012-04-13T06:57:54.740
> 
> 标签：android

我需要知道在android开发中是否有类似时间跨度的东西？

在 C# 中有类似的东西，我喜欢以两种方式使用它：

1.  生成一个时间跨度，然后添加例如分钟，然后显示整个跨度
2.  生成两个 DateTime 之间的时间跨度（Android 中 DateTime 的等价物是什么？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T08:40:47.430

```
public long addSeconds(long dt,int sec) //method to add seconds in time  
{

    Date Dt = new Date(dt);
    Calendar cal = new GregorianCalendar();

    SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy HH:mm:ss");
    sdf.setCalendar(cal);
    cal.setTimeInMillis(Dt.getTime());
    cal.add(Calendar.SECOND, sec);
    return cal.getTime().getTime();

} 
```

以秒为单位传递日期和时间，它将返回修改后的时间...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T07:08:16.120

不幸的是，`TimeSpan`Java 中还没有原生可用的类似类，但您可以通过几行代码来实现这一点。

```
Calendar startDate = getStartDate();
Calendar endDate = getEndDate();

long totalMillis = endDate.getTimeInMillis() - startDate.getTimeInMillis();
int seconds = (int) (totalMillis / 1000) % 60;
int minutes =  ((int)(totalMillis / 1000) / 60) % 60;
int hours = (int)(totalMillis / 1000) / 3600; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T19:36:25.763

Android有DateUtils，如果你给它正确的输入，方法“formatElapsedTime”可以满足你的需要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-15T05:35:32.643

您可以轻松获得以毫秒为单位的“TimeSpan”。要将毫秒转换为格式化的毫秒，您可以像这样在函数中进行一些快速而优雅的计算，

```
public static String GetFormattedTimeSpan(final long ms) {
    long x = ms / 1000;
    long seconds = x % 60;
    x /= 60;
    long minutes = x % 60;
    x /= 60;
    long hours = x % 24;
    x /= 24;
    long days = x;

    return String.format("%d days %d hours %d minutes %d seconds", days, hours, minutes, seconds);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T07:05:01.210

您可以使用日历类。

[http://tutorials.jenkov.com/java-date-time/java-util-calendar.html](http://tutorials.jenkov.com/java-date-time/java-util-calendar.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-27T11:19:24.247

Java 中的日期很尴尬。看看[https://github.com/dlew/joda-time-android](https://github.com/dlew/joda-time-android)

# php - .htaccess url重写省略参数的最后一个字符

> ID：10136509
> 
> 赞同：0
> 
> 时间：2012-04-13T06:57:56.620
> 
> 标签：php, regex, .htaccess, url-rewriting

我正在开发一个网络应用程序，其中应该将其他网站的名称作为参数给出，我正在使用我的 apache 网络服务器上的 .htaccess 文件重写 url，这是我在 .htaccess 文件中编写的代码：

```
RewriteEngine On
RewriteRule ^([a-z0-9\_\-]+(\.)[a-z0-9\_\.\-]+)[^(site.php)] site.php?url=$1
RewriteRule ^([a-z0-9\_\-]+(\.)[a-z0-9\_\.\-]+)[^(site.php)]/ site.php?url=$1 
```

我写`[^(site.php)]`这个是因为它传递 site.php 作为参数，因为 site.php 与我的正则表达式匹配。这是正确的方法，但唯一的问题是参数的最后一个字符被省略，例如，当我在写时：

```
www.mywebsite.com/google.com 
```

它采用`google.co`并省略了最后一个`m`。如果是通过`google.co.in`，它的`google.co.i`取舍`n`。这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:13:16.437

由于您使用`[^(site.php)]`（它并不意味着您的想法），它将匹配您网址的最后一个字符。您应该使用 RewriteCond，您可以尝试：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z0-9\_\-]+(\.)[a-z0-9\_\.\-]+)/?$ site.php?url=$1 
```

这意味着：不要重写现有文件或目录

# sql - 如何在所有工作日/所有月份/所有时间进行选择查询，并在值不存在时显示 0

> ID：10136512
> 
> 赞同：0
> 
> 时间：2012-04-13T06:58:21.043
> 
> 标签：sql

在 sql 中我想显示统计数据，所以我想显示所有工作日的总和，通过显示 0 表示不存在的工作日。月，小时，年也是如此......

问题是没有表可以加入来获取缺失的日期。
有没有一种干净的方法可以做到这一点？

谢谢

**编辑**：数据库和数据无关紧要，但我使用的是 Oracle DB 和 Mysql，如果我想做的话，简单地说

```
SELECT SUM(SALES) FROM SALES_TABLE WHERE SALES_DATE BETWEEN DATE1 AND DATE2 GROUP BY WEEKDAY 
```

如何将其更改为例如在星期日获取 0，而不是获取 SATURDAY :4, MONDAY:4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:15:43.777

您可以创建一个包含日期名称的表，然后在该表上执行左连接。

查看您拥有的表结构会有所帮助，但如果我要这样做，我会执行以下操作：

```
create table stats (dayname varchar(3), "value" int);
create table daynames (dayname varchar(3));
insert into stats values ('Sun', 5), ('Mon', 4), ('Wed', 13), ('Sun', 3), ('Tue', 5), ('Sat', 5), ('Mon', 32);
insert into daynames values ('Sun'),('Mon'),('Tue'),('Wed'),('Thu'),('Fri'),('Sat');

select daynames.dayname, sum("value") from daynames left outer join stats on stats.dayname=daynames.dayname group by daynames.dayname;

| dayname | sum |
|---------+-----|
| Fri     |     |
| Mon     | 36  |
| Sat     | 5   |
| Sun     | 8   |
| Thu     |     |
| Tue     | 5   |
| Wed     | 13  | 
```

对于未在数据中表示的日期的总和，您将有空值，但您可以将它们转换为零，具体取决于您的数据库服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T20:47:05.780

在不创建表的情况下执行此操作的另一种可能方法是在 SUM 中使用 CASE 语句。这样做很可能会对性能造成很大影响，但我没有对其进行测试，对于一小部分数据，您应该不会看到太大的影响。它还将所有内容放入一个记录而不是 7 个不同的记录

```
SELECT SUM(CASE WHEN DAYOFWEEK(SALES_DATE) = 1 THEN SALES ELSE 0 END) AS SUNDAY,
       SUM(CASE WHEN DAYOFWEEK(SALES_DATE) = 2 THEN SALES ELSE 0 END) AS MONDAY,
       SUM(CASE WHEN DAYOFWEEK(SALES_DATE) = 3 THEN SALES ELSE 0 END) AS TUESDAY,
       SUM(CASE WHEN DAYOFWEEK(SALES_DATE) = 4 THEN SALES ELSE 0 END) AS WEDNESDAY,
       SUM(CASE WHEN DAYOFWEEK(SALES_DATE) = 5 THEN SALES ELSE 0 END) AS THURSDAY,
       SUM(CASE WHEN DAYOFWEEK(SALES_DATE) = 6 THEN SALES ELSE 0 END) AS FRIDAY,
       SUM(CASE WHEN DAYOFWEEK(SALES_DATE) = 7 THEN SALES ELSE 0 END) AS SATURDAY
FROM SALES_TABLE 
WHERE SALES_DATE BETWEEN DATE1 AND DATE2 
```

# javascript - 使用正则表达式和 jQuery 插件进行验证

> ID：10136516
> 
> 赞同：0
> 
> 时间：2012-04-13T06:58:43.583
> 
> 标签：javascript, jquery, regex

我喜欢使用 JavaScript 进行客户端验证。为此，我在这里使用 jQuery Plugin Validate() 观看：http: [//docs.jquery.com/Plugins/Validation/Methods](http://docs.jquery.com/Plugins/Validation/Methods)

通过单击提交按钮，我想将输入字段内的 ID 与正则表达式进行比较。我该如何解决这个问题？

现在我这样做了：

```
<form id="checkoutFormBean" action="/view/checkout?execution=e3s1" method="POST">
    <li>
    <input id="id" name="id" class="fieldError required number" tabindex="12" value="" maxlength="2048" type="text">
    </li> 

    <script type="text/javascript">
            $(document).ready(function(){
                $("#checkoutFormBean").validate({
                    id: "required",
                    id: {
                        equalTo: "/^2099[0-9]{9}$/"
                    }
                });
            });

        </script> 
```

但它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:09:58.427

提交后，您只需要使用规则进行验证。请查看以下网址。您将了解如何指定规则。

例如：

```
$("#checkoutFormBean").validate({
   rules: {
     name: {
       required: true,
       equalTo: "/^2099[0-9]{9}$/"
     }
   }
}); 
```

希望这可以帮助你:-)

# java - 应用程序的单个 servlet

> ID：10136518
> 
> 赞同：0
> 
> 时间：2012-04-13T06:59:06.720
> 
> 标签：java

是否有可能有一个应用程序，例如购物车，在整个应用程序中只有一个 servlet，这将导致 web.xml 中的单个条目？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:06:21.957

当然。事实上，有几个基于单个 servlet 的 webapp 框架（例如 Struts 和 JSF），在将 URL 组件映射到控制器和参数之后，将传入的请求分派到特定于应用程序的控制器类。

# cgcontext - CGContextSetRGBFillColor 未设置填充颜色

> ID：10136519
> 
> 赞同：2
> 
> 时间：2012-04-13T06:59:13.040
> 
> 标签：cgcontext

我用过

```
CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0); 
```

但它没有填充任何颜色。请帮忙。

# c# - 如何使用 PetaPoco 库从数据库自动创建模型？

> ID：10136520
> 
> 赞同：3
> 
> 时间：2012-04-13T06:59:25.057
> 
> 标签：c#, .net, orm, petapoco

我的数据库中有一个表，我想为它创建一个带有 getter 和 setter 的模型类。对于我项目中的大多数任务，我使用的是 PetaPoco。我手动创建了模型，但很少有表有很多列。

有没有办法使用 PetaPoco 从数据库创建模型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T20:20:08.327

我强烈建议您使用 T4 模板，因为它可以加快流程并添加额外的功能。

最快的方法是打开“包管理器控制台”（工具 > 库包管理器 > 包管理器控制台），确保在“默认项目”下拉菜单中选择您的项目并运行：

```
PM>install-package petapoco 
```

这将创建一个名为“Models”的文件夹和一个名为“Generated”的子文件夹。在“Generated”文件夹中，打开“Database.tt”文件并设置信息。有关设置的信息，请参阅[http://www.toptensoftware.com/petapoco/ 。](http://www.toptensoftware.com/petapoco/)

成功设置 T4 模板后，它将生成一个名为“Database.cs”的代码文件，其中包含数据库中的所有对象。生成的是“部分类”。这里的关键是**你不应该修改**这个文件中的任何对象。相反，您将**在同一个命名空间**中创建一个新的局部类，然后您可以实现更多逻辑。移动/更新现有对象以确认新设置。

另一种选择是创建一些 TSQL 来生成一些代码。这是我过去用来为我的 PetaPoco 表生成接口的一个**非常粗略的示例。**

```
declare @script nvarchar(max);
declare @table nvarchar(256);

set @table = 'YourTableName'

set @script = 'public interface I' + @table + '{' + char(10);
SELECT
    @script = @script + 
        CASE
            WHEN st.Name IN ('int') AND c.is_nullable = 0 THEN 'int'
            WHEN st.name in ('smallint')  AND c.is_nullable = 0 THEN 'short'
            WHEN st.name IN ('bigint') AND c.is_nullable = 0  THEN 'long'
            WHEN st.name IN ('varchar','nvarchar','sysname') THEN 'string'
            WHEN st.Name IN ('datetime') AND c.is_nullable = 0 THEN 'DateTime'
            WHEN st.Name IN ('bit') AND c.is_nullable = 0 THEN 'bool'
            WHEN st.Name IN ('decimal') AND c.is_nullable = 0 THEN 'decimal'
            /* NULLABLE VALUES */
            WHEN st.Name IN ('int') AND c.is_nullable = 1 THEN 'int?'
            WHEN st.name in ('smallint')  AND c.is_nullable = 1 THEN 'short?'
            WHEN st.name IN ('bigint') AND c.is_nullable = 1  THEN 'long?'
            WHEN st.name IN ('varchar','nvarchar','sysname') AND c.is_nullable = 1 THEN 'string?'
            WHEN st.Name IN ('datetime') AND c.is_nullable = 1 THEN 'DateTime?'
            WHEN st.Name IN ('bit') AND c.is_nullable = 1 THEN 'bool?'
            WHEN st.Name IN ('decimal') AND c.is_nullable = 1 THEN 'decimal?'   
            --WHEN st.name IN('sysname') AND c.is_nullable = 1 THEN 'string?'       
            ELSE 'UNKOWN-' + st.name
        END
    + ' ' + c.name + '{get;set;}' + char(10)
FROM sys.tables t
INNER JOIN sys.columns c
ON t.object_id = c.object_id
INNER JOIN sys.types st
ON st.system_type_id = c.system_type_id
WHERE t.name = @table

print @script + '}' 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T19:12:16.927

**PetaPoco 有 T4 Visual Studio 模板**，应该可以为您完成这项工作。如果您不想全部生成它们，只需使用模板，然后从生成的 *.cs 文件中复制您想要的这些类。

您可以在[PetaPoco 的 GitHub 代码库](https://github.com/toptensoftware/PetaPoco/tree/master/PetaPoco/Models/Generated)中找到模板。

可以通过两种方式将模板添加到您的项目中：

1.  手动复制文件
2.  在包控制台中使用 NuGet 或使用 Visual Studio 包管理器。[NuGet 网站上的](http://nuget.org/packages/PetaPoco)详细信息

我会推荐第二个选项，因为您可以将包设置为在不存在时在构建之前自动下载（CVS 的一部分）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T10:40:20.627

在 Visual Studio 中，您可以使用集成实体框架的“数据库优先代码”功能来生成 POCO 类以与 PetaPoco 一起使用。只需生成它们并删除所有不必要的 EF 垃圾，如 DBContext 和属性。这样，您不仅可以为 C# 生成 POCO，还可以为 VB.NET 及其所有可视化单击生成 POCO，而不会与 T4 模板混淆。

项目/添加新项目.../Data/ADO.NET 实体数据模型/代码首先来自数据库

# php - 如何在php中禁用特定时间的按钮

> ID：10136521
> 
> 赞同：-4
> 
> 时间：2012-04-13T06:59:26.163
> 
> 标签：php

我有一个编辑按钮供用户编辑他们发布的工作。我希望该按钮在发布日后一周禁用或消失。如何在 php 中执行此操作。提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:17:26.830

```
<?php
    $timePublished = 1334301250; // unix time when job posted
    $afterOneWeek  = $timePublished+(60*60*24*7); // 1 week
    $dateNow       = date('U'); // unix time for Date Now
    if($dateNow > $afterOneWeek){ // if Date Now is greater than our "After One Week"
        echo "<button>Button is now visible</button>";
    } else {
        echo "No button, one week not passed";
    }
?> 
```

# android - 为不同的活动在片段中滑动（如 Facebook）

> ID：10136524
> 
> 赞同：1
> 
> 时间：2012-04-13T06:59:42.937
> 
> 标签：android, android-fragments

我有一个片段示例，但我希望在右侧显示不同的活动。

![在此处输入图像描述](../Images/b6123eb75f688b69133be79fe9dd228a.png) ![在此处输入图像描述](../Images/77d195c01190e46d4ab9d2b5cbab21ab.png)

这类似于滑动图像。

I want to show different activities on Right side when "Home", "Post", "Live" options are selected. 其他工作都是滑动完成的，我在选择不同的选项时遇到了很大的问题。

任何帮助将不胜感激。谢谢你。

# svg - 过渡 svg 文本不透明度

> ID：10136526
> 
> 赞同：0
> 
> 时间：2012-04-13T06:59:52.897
> 
> 标签：svg, d3.js

有人在转换 SVG 文本元素的不透明度时遇到过任何问题吗？我同时使用填充不透明样式和笔划不透明样式来淡入和淡出文本元素。它在大多数浏览器上都可以正常工作，但在 Mac 上的 Chrome 中根本没有过渡——文本只是一次弹出和弹出。

除了填充不透明度和描边不透明度之外，我还尝试设置“不透明度”属性，这似乎确实使它起作用，尽管现在我在过渡运行之前和之后看到了奇怪的闪烁效果。就像它在将其设置为 0 然后转换为 1 之前将其设置为 opacity=1 一样。

另一个有趣的事情是，其他形状（圆形、矩形）可以很好地淡入和淡出，其代码与我在文本中使用的代码几乎相同。

对于特定的浏览器，这似乎确实很奇怪，但我想知道其他人对文本元素不透明的体验。是否有技巧让它表现一致？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T14:46:23.477

您使用的是哪个版本的 Chrome？前段时间在处理[word cloud](http://www.jasondavies.com/wordcloud/)时，我注意到 Chrome dev 中的一个[错误](http://code.google.com/p/chromium/issues/detail?id=45747)，但它似乎已在 19.0.1077.3 dev 中修复。也许修复尚未进入您的特定版本？

就我而言，使用`opacity`暂时解决了问题。闪烁效应可能是由于指数符号没有被解析为非常小的数字；您可以尝试使用`1e-6`而不是`0`解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:36:55.607

对于几个月前我制作的动画，我切换了样式并使用`webkit-transition`了`visibility: hidden`. 这似乎运作良好。如果这不起作用，您可以尝试过渡到接近零的不透明度。

# silverlight - 在 Silverlight 中实现登录和注册表单动画

> ID：10136529
> 
> 赞同：1
> 
> 时间：2012-04-13T07:00:14.240
> 
> 标签：silverlight, animation, expression-blend, silverlight-5.0, blend

在silverlight 业务应用程序模板中，我们有一个登录并注册带有动画的子窗口。如何在我的silverlight 应用程序中为其他子窗口实现此动画？！！-任何样品-任何一步一步的指导

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:33:53.480

您必须使用 Expression blend 来实现此动画。
查看以下链接：
[http ://forums.silverlight.net/t/181996.aspx/1](http://forums.silverlight.net/t/181996.aspx/1)

# cocos2d-android - 适当的图像尺寸以支持各种安卓手机和平板电脑

> ID：10136530
> 
> 赞同：0
> 
> 时间：2012-04-13T07:00:35.847
> 
> 标签：cocos2d-android

我正在 cocos2d 中开发一个安卓游戏。我需要多少种不同尺寸的图像来支持安卓设备和平板电脑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:30:29.920

我从未使用过该引擎，但如果您指的是图像尺寸、设备屏幕尺寸，那么您应该使用比例尺。我选择了最大的基础，1280x800，这是我平板电脑上的那个，只是为了在平板电脑上更精确。我将 (X,Y) 中的比例应用于每个图像大小以及涉及的屏幕或屏幕大小的每个操作。即：
士兵位图X.move(运动*scaleX)
士兵位图Y.move(运动*scaleY)

**scaleX**和**scaleY**代表您的比例，而**移动** 代表您的烟斗将移动多少像素。这是一个了解如何应用比例的示例。我不建议您使用此操作移动精灵，但请记住是否应该应用比例。您可以将其应用到所有可能的屏幕，您的游戏将完全融入其中。请注意例如 QVGA 屏幕，与其他标准相比，它更“平方”并且非常小。

编辑（如何获得规模）：

```
_xMultiplier = (_screenWidth/(1280.0f/100.0f))/100.0f;
    _yMultiplier = (_screenHeight/(800.0f/100.0f))/100.0f;
    matrix.setScale(_xMultiplier, _yMultiplier); 
```

这是应用于我们将使用的矩阵的比例示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:20:42.333

通过`ScaleX`和`ScaleY`属性，您可以轻松缩放图像.....例如，您将平板电脑尺寸设为 1280 * 800，您可以缩放该精灵并使用它；您还可以将该图像用于较小的分辨率，例如 320 * 480 .....

# binary - Lua memcached 二进制协议

> ID：10136538
> 
> 赞同：2
> 
> 时间：2012-04-13T07:01:22.777
> 
> 标签：binary, lua, memcached

我正在寻找支持 memcached 二进制协议的 lua memcached 客户端。

你能推荐一些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-08-27T03:15:14.307

有一个支持 memcached 二进制协议的客户端。

[lua-resty-couchbase](https://github.com/iqiyi/lua-resty-couchbase) - 基于 cosocket API 的 ngx_lua 的 Lua couchbase 客户端驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:11:42.070

我已经发布了 lua 二进制客户端：

[http://github.com/kolchanov/Lua-couchbase](http://github.com/kolchanov/Lua-couchbase)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T03:43:00.460

不确定*二进制*协议，但请查看：[https ://github.com/silentbicycle/lua-memcached](https://github.com/silentbicycle/lua-memcached)

另外，这个可以作为参考（它是用于 ngx_lua，所以你不太可能立即重用它）：[https ://github.com/agentzh/lua-resty-memcached](https://github.com/agentzh/lua-resty-memcached)

我没有尝试任何一个模块，如果您愿意尝试，请在评论中留下反馈。

# benchmarking - 运行 cal 时出现“没有可用的测试历史”错误

> ID：10136539
> 
> 赞同：1
> 
> 时间：2012-04-13T07:01:24.217
> 
> 标签：benchmarking

```
vogar --benchmark --stream --verbose --mode jvm   ArraySortBenchmark.java 
```

但它不执行任何基准测试，因为“没有可用的测试历史记录”

```
executing mkdir -p /tmp/vogar/573bd257-1b6e-4b91-92dd-1cdc6bdc491b
Actions: 1
skipped Users.louischiffre.projects.testing.ArraySortBenchmark.java
Task 0: prepare target
Task 1: rm /tmp/vogar/573bd257-1b6e-4b91-92dd-1cdc6bdc491b
  depends on completed task: prepare target
Task 2: rm /tmp/vogar/run
  depends on completed task: prepare target
running prepare target
executing rm -rf /tmp/vogar/run
executing mkdir -p /tmp/vogar/run
executing mkdir -p /tmp/vogar/run/tmp
executing mkdir -p /tmp/vogar/dalvik-cache
executing mkdir -p /tmp/vogar/run/user.home
running rm /tmp/vogar/run
running rm /tmp/vogar/573bd257-1b6e-4b91-92dd-1cdc6bdc491b
executing rm -rf /tmp/vogar/573bd257-1b6e-4b91-92dd-1cdc6bdc491b
executing rm -rf /tmp/vogar/run
parsing outcomes from 0 files
Skips summary:
  Users.louischiffre.projects.testing.ArraySortBenchmark.java (no test history available)
Outcomes: 1\. Passed: 0, Failed: 0, Skipped: 1\. Took 129ms. 
```

有趣的是，dn caliper 示例

> EnumSetContainsBenchmark.java

没有这个问题。

# iphone - 如何访问所有字典内容数组

> ID：10136540
> 
> 赞同：0
> 
> 时间：2012-04-13T07:01:37.267
> 
> 标签：iphone

我已经实现了字典内容访问方法的数组，但它只能访问一个内容，请帮助

这是我的数据文件

```
<__NSArrayM 0x8b7a350>(
{
    clkDate = "Wednesday, April 11, 2012";
    resData =     (
                {
            data = 10;
            independentItem = 0;
            module = 6;
            newDate = "11-4-2012";
            newTime = "13:31";
            seqCounter = 101;
            sequence = 10007;
            session = 101;
            timeframe = Breakfast;
            timestamp = "2012-04-11 08:01:27 +0000";
            title = "Glucose reading : Low";
            type = L;
        },
                {
            data =             {
                hours = 0;
                minutes = 0;
                which = "Walking:(null)";
            };
            independentItem = 1;
            module = 13;
            seqCounter = 101;
            sequence = 10009;
            session = 101;
            timestamp = "2012-04-12 08:01:40 +0000";
            title = "Low Cause: Increased Exercise";
        }
    );
    seqCounter = 101;
},
{
    clkDate = "Thursday, April 12, 2012";
    resData =     (
                {
            data = 200;
            independentItem = 0;
            module = 6;
            newDate = "12-4-2012";
            newTime = "13:31";
            seqCounter = 102;
            sequence = 10017;
            session = 101;
            timeframe = Breakfast;
            timestamp = "2012-04-12 08:01:46 +0000";
            title = "Glucose reading : High";
            type = H;
        },
                {
            data =             {
                hours = 0;
                minutes = 0;
                which = "Other Light:Kkkkk";
            };
            independentItem = 1;
            module = 26;
            seqCounter = 102;
            sequence = 10022;
            session = 101;
            timestamp = "2012-04-11 18:30:00 +0000";
            title = "High Cause: Decreased Exercise";
        }
    );
    seqCounter = 102;
},
{
    clkDate = "Thursday, April 12, 2012";
    clkIndependentItem = 1;
    resData =     (
                {
            data =             {
                bathing = 1;
                driving = 1;
                grocery = 1;
                meal = 1;
            };
            independentItem = 1;
            module = 31;
            seqCounter = 103;
            sequence = 10035;
            session = 101;
            timestamp = "2012-04-12 08:02:32 +0000";
            title = "High Cause: Decreased activity";
        }
    );
    seqCounter = 103;
}
) 
```

在上述数据文件中，我需要访问“independentItem = 1”相关项目

我试过源代码是

```
for (int i = 0; i < [self.gluClkDetailArray count]; i++) 
        {
            NSMutableDictionary *mDict = [self.gluClkDetailArray objectAtIndex:i];
            {
                NSMutableArray *mResData = [mDict objectForKey:@"resData"];
                NSDate *mTimestamp = [[mResData objectAtIndex:0] objectForKey:@"timestamp"];

                NSDateFormatter *mFormatter = [[NSDateFormatter alloc] init];
                [mFormatter setDateStyle:NSDateFormatterFullStyle];

                NSString *mClkDate = [mFormatter stringFromDate:mTimestamp];
                [mDict setValue:mClkDate forKey:@"clkDate"];

                NSString *mIndItem = [[mResData objectAtIndex:0] objectForKey:@"independentItem"];
                if (mIndItem.intValue == 1) 
                {
                    [mDict setValue:mIndItem forKey:@"clkIndependentItem"];
                    [mIndpendentArray addObject:mDict];
                }
                [gluClkResultArray addObject:mDict]; 

        } 
```

当我放置 mResData objectAtIndex:0 而不是 i 时，应用程序崩溃了。我已经根据序列计数器保存了字典值数组

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:25:49.477

改变

```
NSString *mIndItem = [[mResData objectAtIndex:0] objectForKey:@"independentItem"]; 
```

对此：

```
NSString *mIndItem = [[mResData objectAtIndex:1] objectForKey:@"independentItem"]; 
```

独立项在索引为 1 的字典中，而不是 0。

希望能帮助到你

# c# - 泛型和显式/隐式运算符

> ID：10136543
> 
> 赞同：3
> 
> 时间：2012-04-13T07:01:39.857
> 
> 标签：c#, generics, casting, operators

考虑以下场景。

我有一个返回的方法`ISomething`，但它可能是`Something`or `Wrapped<Something>`。因此，我将结果转换`Something`为使用它，但它失败了，任何关于为什么或如何解决它的帮助将不胜感激。

```
class Program
{
    static void Main(string[] args)
    {
        var a = new DerivedSomething();
        var b = (DerivedSomething)new Wrapped<DerivedSomething>(a); //success
        var c = (DerivedSomething)_GetSomething(false); //success, obsiously!
        var d = (DerivedSomething)_GetSomething(true); //Unable to cast object of type 'test_bed.Wrapped`1[test_bed.DerivedSomething]' to type 'test_bed.DerivedSomething'.
        var e = (DerivedSomething)(ISomething)new Wrapped<DerivedSomething>(a);  //Unable to cast object of type 'test_bed.Wrapped`1[test_bed.DerivedSomething]' to type 'test_bed.DerivedSomething'.

        var works = ((DerivedSomething)_GetSomething(false)).DoSomethingElse(); 
        var fails = ((DerivedSomething)_GetSomething(true)).DoSomethingElse(); //cast exception
    }

    private static ISomething _GetSomething(bool wrap)
    {
        var something = new DerivedSomething();
        return wrap ? new Wrapped<DerivedSomething>(something) : (ISomething)something;
    }
}

public interface ISomething
{
    void DoSomething();
}

public abstract class Something : ISomething
{
    public void DoSomething()
    {
        //some code
    }
}

public class DerivedSomething : Something
{
    public void DoSomething()
    {
        //some code
    }

    public void DoSomethingElse()
    {
        //some code
    }
}

public class Wrapped<T> : ISomething
    where T : ISomething
{
    private readonly T _something;

    public Wrapped(T something)
    {
        _something = something;
    }

    public void DoSomething()
    {
        _something.DoSomething();
    }

    public static explicit operator T(Wrapped<T> wrapped)
    {
        return wrapped._something;
    }
} 
```

看来，如果在尝试强制转换时将类型暴露为接口，那么找不到运算符？

“简单”的解决方案是编写一个“解包”函数，它可以选择解开`Wrapped<Something>`to `Something`，但如果可能的话，我更喜欢使用运算符。

**编辑**

我认为问题的症结在于：在外面`_GetSomething()`我不知道是否`Something`会`Wrapped<Something>`被退回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T07:19:18.857

显式转换在编译时绑定（额外提示是转换运算符是静态的）。

尝试

```
var f = (Something)(Wrapped<Something>)_GetSomething(true); 
```

这成功了

在您的情况下，编译器只知道您的类型是`ISomething`并且不知道如何将 a 转换`ISomething`为 a `Something`，除非它`Something`已经是 a 。

通过更改`public class Wrapped<T> : ISomething`为`public class Wrapped<T> : Something`您的示例执行良好，但您的演员表没有被调用，因为`Wrapped<T>`已经是`T`.

**注意：**
不是`explicit operator`强制转换，而是类型转换，它是一个调用的方法，并且该方法根据编译时类型（在您的情况下`ISomething`）解析。类型转换与类型转换具有相同的语法，这是一个令人困惑的根源。转换只是将现有对象分配给兼容类型的不同变量，而类型转换实际上返回一个新对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T07:18:05.457

您转换运算符如下所示：

```
public static explicit operator T(Wrapped<T> wrapped)
{
        return wrapped._something;
} 
```

你在投

```
var d = (Something)_GetSomething(true); //FAILS! 
```

你不能投到`Something`，原因`Something`是*具体*的执行`T:ISomething`。要完成这项工作，您需要编写：

```
var d = (ISomething)_GetSomething(true); //SUCCESS! 
```

**或者**

如果你*真的*想使用*具体*类型，你可以定义泛型，如：

```
public class Wrapped<T> : Something //Something and NOT ISomething 
    where T : ISomething
{
    .....
    .....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:24:01.207

```
var d = (Something)(Wrapped<Something>)_GetSomething(true); 
var e = (Something)new Wrapped<Something>(a); 
```

# linq - EF 对象实体状态在附加到新上下文时移动到未更改

> ID：10136545
> 
> 赞同：0
> 
> 时间：2012-04-13T07:01:42.670
> 
> 标签：linq, entity-framework, save

我遇到了最奇怪的问题，我从 EF 获取一个对象并将其传递回业务逻辑进行操作，完成后我试图将对象保存回数据库，当对象被传递到以下方法时，它是 EntityState已修改，但只要附加代码行运行，它就会设置为 UnChanged，因此保存将不起作用。

有谁知道为什么EF会这样做？

```
 public void Save(IEntity entity)
    {
        using (var context = new eDocumentEntities())
        {
            using (var scope = new TransactionScope())
            {
                if (entity.Id != 0)
                    context.AttachTo(entity.EntitySet, entity);
                else
                    context.AddObject(entity.EntitySet, entity);
                context.SaveChanges();
                scope.Complete();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:14:32.407

由于实体更改跟踪封装在 Context 中，因此实体在脱离上下文时自然会丢失状态和其他跟踪内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:19:32.737

好的，我在这里找到了问题的解决方案，但我对解释更感兴趣，为什么 EF 会这样做，似乎非常适得其反！？

[http://geekswithblogs.net/michelotti/archive/2009/11/27/attaching-modified-entities-in-ef-4.aspx](http://geekswithblogs.net/michelotti/archive/2009/11/27/attaching-modified-entities-in-ef-4.aspx)

# regex - 如何使 URL 的这个正则表达式更具体？

> ID：10136549
> 
> 赞同：-1
> 
> 时间：2012-04-13T07:02:12.053
> 
> 标签：regex

我有以下尝试匹配 URL 的正则表达式：

```
/((http|https):(([A-Za-z0-9$_.+!*(),;/?:@&~=-])|%[A-Fa-f0-9]{2}){2,}(#([a-zA-Z0-9][a-zA-Z0-9$_.+!*(),;/?:@&~=%-]*))?([A-Za-z0-9$_+!*();/?:~-]))/g 
```

如何修改此正则表达式以仅匹配单个域的 URL？

例如，我只想匹配以`http://www.google.com`?开头的 URL。

这应该会简化我的正则表达式，但我是一个正则表达式菜鸟，无法让它工作（这些年来......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:35:48.100

你写了那个正则表达式吗？我不知道它想做什么，但它肯定不能正确匹配 URL。这是它匹配的东西：

```
http:@@#9@?~ 
```

我很确定这不是有效的 URL。

您不应该使用 RegEx 来匹配这样的 URL。您还没有说您正在使用哪种语言，但请使用与[urlparse](http://docs.python.org/library/urlparse.html)等效的任何语言。

这是一个相关的问题：[如何在 Python 中使用正则表达式验证 URL？](https://stackoverflow.com/questions/827557/how-do-you-validate-a-url-with-a-regular-expression-in-python)

# javascript - OverlayView 顶部的标记，GoogleMaps API V3 JavaScript

> ID：10136551
> 
> 赞同：2
> 
> 时间：2012-04-13T07:02:30.737
> 
> 标签：javascript, google-maps-api-3

如何在标记后面呈现自定义 OverlayView 项目。当标记和overlayView 项目相交时，总是在顶部绘制overlayview 项目。有没有办法相应地调整它们的 z 深度？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T10:17:13.943

[在这里](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/aeShp5XUtLY)找到了答案。

在`onAdd`方法中替换：

```
窗格。overlayImage .appendChild(div);
```

和：

```
窗格。mapPane .appendChild(div);
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T09:27:46.177

`overlayLayer`窗格也呈现在标记下方：

```
var 窗格 = this.getPanes();
窗格。覆盖层.appendChild (div);
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T08:06:10.823

您可能需要调整 OverlayView 内容的 z 顺序，如此处[所述](https://stackoverflow.com/questions/2682626/z-index-overlay-in-google-maps-version-3)。使 OverlayView 中的 DOM 节点的 z-order 值低于标记。

# php - codeigniter 不会重定向 url

> ID：10136554
> 
> 赞同：0
> 
> 时间：2012-04-13T07:02:36.343
> 
> 标签：php, codeigniter

我做了 htaccess 中所说的：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我把上面的，这样我就可以做到这一点：

```
http://localhost/Speakom2/Home/index 
```

代替：

```
http://localhost/Speakom2/index.php/Home/index 
```

但它不起作用......我收到 404 错误......如何解决这个问题，让它工作？！？

控制器：

```
class Home extends CI_Controller {

public function Index() 
{
    $this->load->view('welcome_message');
} 
```

}

访问：

```
 RewriteEngine on
   RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:08:02.900

当您在本地主机上运行时，您的 Web 根目录是`/localhost/mysite/`，但在真实主机中，您的根目录是`/mysite`：所以在 localhost 中使用：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

注意 index.php 没有`/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:12:12.113

确保您的`.htaccess`文件位于`Speakom2`文件夹中（Codeigniter 根目录）。并改成这个

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:08:37.473

```
 RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T07:11:06.960

//这是.htaccess文件，只需在RewriteBase上替换它RewriteEngine //

```
#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

# java - readObject 的 EOF 异常

> ID：10136559
> 
> 赞同：1
> 
> 时间：2012-04-13T07:02:54.680
> 
> 标签：java, serialization, eof, objectoutputstream

我想知道是否有任何方法可以检查 a `ObjectInputStream`or`ObjectOutputStream`是否为空。我的意思是，在我的程序中。第一次运行时，`ObjectInputStream`将使用它的`readObject()`方法，因为文件仍然是空的，它给了我一个`EOF`异常（文件结尾）所以我想检查它是否为空然后摆脱异常：

我做得对吗？对于序列化，我在客户端和服务器中创建了具有相同名称和属性的类。

```
public class KeyAdr implements Serializable{

 String adr;
 String key;

}
....

    static FileInputStream fIn=null;
    static ObjectInputStream oIn=null;
    private static KeyAdr test=new KeyAdr();

....

           fIn= new FileInputStream("d:\\someFile.ser");
           oIn = new ObjectInputStream(fIn);
           test= (KeyAdr) oIn.readObject(); 
```

# 编辑：

```
 static  File serAdrKey=new File("d:\\someFile.ser");
     static    ObjectOutputStream oOut;
     static    FileOutputStream fOut;
     static  final   Pattern WebUrlPattern = Pattern.compile (WebUrlRegex);
     private static String WebUrlStr;
     static KeyAdr letsDoIt= new KeyAdr();

....

 public static void openStreams() throws IOException
        {
         fOut= new FileOutputStream(serAdrKey);
     oOut = new ObjectOutputStream(fOut);

        }

        @Override
public void    beforeWindowOpen(NavigationEvent event) 
        {

                     temp=event.getURL().toString();

  Matcher WebUrlMatcher = WebUrlPattern.matcher (temp);
    if (WebUrlMatcher.matches ())
    {
        int n = WebUrlMatcher.groupCount ();
      for (int i = 0; i <= n; ++i) {
    WebUrlStr = WebUrlMatcher.group (i);

}

                    letsDoIt.adr=WebUrlStr;    

                    try {
                    oOut.writeObject(letsDoIt);

                } catch (IOException ex) {
                    Logger.getLogger(Cobratest2.class.getName()).log(Level.SEVERE, null, ex);
                }

                   try {
                oOut.flush();

                   } catch (IOException ex) {
                Logger.getLogger(Cobratest2.class.getName()).log(Level.SEVERE, null, ex);
            } 
```

# 编辑 2

```
fIn= new FileInputStream("d:\\someFile.ser");
PushbackInputStream input = new PushbackInputStream(fIn);
int c = input.read();
if(c != -1)
{
  input.unread(c);
  oIn = new ObjectInputStream(input);
  test = (KeyAdr) oIn.readObject();
  // ......
} 
```

# 编辑3：

Edit2 代码给了我以下堆栈跟踪异常：

```
Exception in thread "main" java.io.EOFException
    at java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2552)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1297)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
        at test.Test.processClient(Test.java:117)
            at test.Test.run(Test.java:92)
            at test.Test.main(Test.java:159) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:09:10.690

> 我想检查它是否为空然后摆脱异常：

为什么？这就是 EOFException 的*用途。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:14:34.897

您可能想先使用该`read`方法检查是否至少有 1 个字节。

`read()`当到达流的末尾时保证返回-1，如果第一个`read()`返回-1，则文件必须为空

附录：使用 FileInputStream 您应该能够标记/重置以避免丢失读取的字节。

但是，您可能希望事先使用 java.util.File 来检查文件是否为空。

# asp.net-mvc - 如何在 Index.cshtml MVC3 上显示两个 Partials 视图数据？

> ID：10136560
> 
> 赞同：0
> 
> 时间：2012-04-13T07:03:00.110
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我在 mvc3 中创建了一个 Web 应用程序并创建了两个部分视图，一个具有控件两个下拉列表。第二个有 webgrid，它显示来自数据库的数据。

```
 partialview1.cshtml
    @model Mapping.Models.SecurityIdentifierMapping

    @using (Html.BeginForm("Mapping", "Home"))
    {
        @Html.DropDownList("SecurityID", Model.PricingSecurityID, "-- Select SecurityID --")
        <br />    
        @Html.DropDownList("CUSIPID", Model.PricingSecurityID, "-- Select CUSIPID --")
        <br />
        <button type="submit">Map</button>
    }

    partialview2.cshtml
    @model IEnumerable<Mapping.Models.SecurityIdentifierMapping>

    @{
        ViewBag.Title = "Mapping";
        WebGrid grid = null;
        if (Model.Count() > 0 ){
        grid = new WebGrid(source: Model,
                                defaultSort: "Id",
                                canPage: true,
                                canSort: true,
                                rowsPerPage:20);
        }
    }

    <h2>Mapping</h2>

    @if (grid != null)
    {
    @grid.GetHtml(
                    tableStyle: "grid",
                    headerStyle: "head",
                    alternatingRowStyle: "alt",
                    columns: grid.Columns(
                                                grid.Column("", header: null, format: @<text>@Html.ActionLink("Edit", "Edit", new { id = (int)item.id })  @Html.ActionLink("Delete", "Delete", new { id = (int)item.id })</text>),
                                                grid.Column("PricingSecurityID"),
                                                grid.Column("CUSIP")
                                              )

                    )
    }
    <br />
    <p>
        @Html.ActionLink("Back", "Index")
    </p>

    in index.cshtml

    <div>
    @Html.Partial("_ControlsPartial",)
    </div>

    <div>
    @Html.Partial("_WebGridPartial")
    </div>

inside Indexcontroller.cs in Index()

     public ActionResult Index()
            {
//FOR POPULATE DROPDOWN
                //SecurityIdentifierMapping objModel = new SecurityIdentifierMapping();
                //objModel.PricingSecurityID = objRepository.GetPricingSecurityID();
                //objModel.CUSIP = objRepository.GetCUSIP();
                //return View(objModel);

              //FOR  DISPLAY DATA IN WEBGRID
                return View(dbContext.SecurityIdentifierMappings);
            } 
```

这里的问题是`webgrid partial view`有`@model IEnumerable<Mapping.Models.SecurityIdentifierMapping>` 并且 `controlpartilview`正在有`@model Mapping.Models.SecurityIdentifierMapping`

那么我如何创建一个 VIEWMODEL.cs 一个新的类，它将有两个模型，我如何在 INDEX(() 中写入它，以便该方法也将填充下拉菜单并在 WEBGRID 中显示数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:06:15.053

为什么不创建一个包含两个属性的自定义视图模型类：

```
public class SecurityIdentifierMappingViewModel
{
    public IEnumerable<SecurityIdentifierMapping> MappingList {get; set; }
    public SecurityIdentifierMapping Mapping {get; set; }
} 
```

然后您可以将此自定义视图模型传递给索引视图和相应的属性作为每个部分的视图模型

## 编辑

然后，您的 Index 操作将如下所示：

```
public ActionResult Index()
{
    // single mapping
    var mapping = new SecurityIdentifierMapping();
    maping.PricingSecurityID = objRepository.GetPricingSecurityID();
    mapping.CUSIP = objRepository.GetCUSIP();

    var viewModel = new SecurityIdentifierMappingViewModel
    {
        Mapping = mapping,
        MappingList = dbContext.SecurityIdentifierMappings.ToList()
    };

    return View(viewModel);
} 
```

并在`Index.cshtml`：

```
@model SecurityIdentifierMappingViewModel

<div>
    @Html.Partial("_ControlsPartial", Model.Mapping)
</div>

<div>
    @Html.Partial("_WebGridPartial", Model.MappingList)
</div> 
```

# network-protocols - XL2TP hello 延迟值

> ID：10136562
> 
> 赞同：0
> 
> 时间：2012-04-13T07:03:04.287
> 
> 标签：network-protocols

我试图在我们的 MIPS 目标上测试 XL2TP 1.3.0，但由于不断的 hello 消息而遇到了一些问题。通过 RFC 2661；它说你好延迟可以配置。但问题在于是否需要使用值 0 来表示 hello 延迟，或者是否可以在 hello 延迟值为 0 时设置推荐的默认值 60。

```
Is XL2TP-1.3.1 is stable ? because there is already a patch on 1.3.1 for hello delay which I can use (again depends on the stability of this patch) ? Thanks. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:16:41.163

看起来 xl2tp 没有处理 0 延迟的机制；如果您为 hello 延迟配置 0，则发送 hello 消息之间的时间为 0 并且不会禁用消息。0 可以使用，但要小心。

XL2TP 已由 xelerence 正式发布：

```
 https://lists.openswan.org/pipermail/users/2011-October/021086.html 
```

谢谢大家 。

# hibernate - 使用条件在休眠中指定连接条件

> ID：10136566
> 
> 赞同：0
> 
> 时间：2012-04-13T07:03:09.437
> 
> 标签：hibernate, left-join, hibernate-criteria

我想在两个带有连接条件的表上执行“左外连接”。表格是：

```
TableA(col1A, col2A)
TableB(col1B, col2B) 
```

查询是：

```
select * from TableA ta left outer join TableB tb on (ta.col1A=tb.col1B and ta.col2A=tb.col2B); 
```

如何使用休眠标准实现相同的目标。

——谢谢，Teja。

# java - JSF bean 访问失败

> ID：10136567
> 
> 赞同：0
> 
> 时间：2012-04-13T07:03:10.760
> 
> 标签：java, jsf-2, mojarra

我有一个奇怪的问题。我在我的 Web 应用程序中使用 JSF 2.1.7（最新版本），并且我有一个 JSF 必须在每个会话中管理的 bean。这是我的 bean 代码：

```
public abstract class NavegableManager<E> implements INavegableManager<E> {

/**
 * 
 */
private static final long serialVersionUID = 1L;

// Propiedad que controla la habilitación-desabilitación de los botones de navegación
private boolean _DisableNavigationButtons;

/**
 * 
 */
private final Stack<INavegable<E>> _NavegableStack;

/**
 * Constructor
 */
public NavegableManager() {
    super();
    this._NavegableStack = new Stack<INavegable<E>>();
}

/**
 * Limpia los navegables almacenados en el manager y se quita de la sesión
 * 
 * @throws Throwable
 */
public void clear() throws Throwable {
    while (!this._NavegableStack.isEmpty()) {
        INavegable<E> nav = this._NavegableStack.pop();
        nav.clear();
    }
}

/*
 * (non-Javadoc)
 * 
 * @see
 * com.tesicnor.navigator.event.INavegableListener#eventNewNavegable(com.tesicnor.navigator.event.NavegableEvent)
 */
@Override
public void eventNewNavegable(NavegableEvent event) throws NavegableServiceException {
    if (event.getNavegable() != null) {
        // Se asigna al navegable el mismo servicio que el navegable anterior
        event.getNavegable().set_Service(this._NavegableStack.peek().get_Service());
        this.push(event.getNavegable());
    }
}

/*
 * (non-Javadoc)
 * 
 * @see
 * com.tesicnor.navigator.event.INavegableListener#eventRemoveNavegable(com.tesicnor.navigator.event.NavegableEvent)
 */
@Override
public void eventRemoveNavegable(NavegableEvent event) {
    if (this._NavegableStack.contains(event.getSource())) {
        boolean mustUnFreezePeek = event.getSource() == this._NavegableStack.peek();
        this._NavegableStack.remove(event.getSource());
        event.getSource().unRegister(this);
        event.getSource().clear();

        if (mustUnFreezePeek && !this._NavegableStack.isEmpty())
            this._NavegableStack.peek().unFreeze();
    }
}

/*
 * (non-Javadoc)
 * 
 * @see
 * com.tesicnor.navigator.event.INavegableListener#eventSelectNavegable(com.tesicnor.navigator.event.NavegableEvent)
 */
@Override
public void eventSelectNavegable(NavegableEvent event) throws NavegableServiceException {
    while (!this._NavegableStack.isEmpty() && !this._NavegableStack.peek().equals(event.getSource()))
        this.pop();
    if (this._NavegableStack.isEmpty())
        this.push(event.getSource());
    this.get_Navegable().unFreeze();
}

@Override
public synchronized INavegable<E> get_Navegable() {
    if (!this._NavegableStack.isEmpty())
        return this._NavegableStack.peek();
    else
        return null;
}

@Override
public List<INavegable<E>> get_Navegables() {
    return this._NavegableStack.subList(0, this._NavegableStack.size() - 1);
}

public boolean is_DisableNavigationButtons() {
    return this._DisableNavigationButtons;
}

/**
 * 
 * @return
 */
public boolean is_init() {
    return true;
}

/**
 * Indica si debe mostrarse el menu de navegacion. Solo se muestra si hay más de 1 elemento de navegacion
 * 
 * @return
 */
public boolean is_ShowNavegacion() {
    return this._NavegableStack.size() > 1;
}

/*
 * (non-Javadoc)
 * 
 * @see com.tesicnor.navigator.INavegableManager#isInit()
 */
@Override
public boolean isInit() {
    return false;
}

/**
 * 
 * @throws EmptyStackException
 */
private synchronized void pop() throws EmptyStackException {
    INavegable<E> peek = this._NavegableStack.pop();
    peek.unRegister(this);
    peek.clear();
}

/*
 * (non-Javadoc)
 * 
 * @see com.tesicnor.navigator.INavegableManager#push(com.tesicnor.navigator.INavegable)
 */
private synchronized void push(INavegable<E> navegable) throws NavegableServiceException {
    INavegable<E> peek = this.get_Navegable();
    navegable.register(this);
    this._NavegableStack.push(navegable);
    if (peek != null)
        peek.freeze();
}

/**
 * Propiedad que controla la habilitación-desabilitación de los botones de navegación
 * 
 * @param _disableNavigationButtons
 */
public void set_DisableNavigationButtons(boolean _disableNavigationButtons) {
    this._DisableNavigationButtons = _disableNavigationButtons;
}

/*
 * (non-Javadoc)
 * 
 * @see com.tesicnor.navigator.INavegableManager#setNavegable(com.tesicnor.navigator.INavegable)
 */
@Override
public void setNavegable(INavegable<E> navegable) throws NavegableServiceException {
    while (!this._NavegableStack.isEmpty())
        this.pop();
    this.push(navegable);
}

} 
```

我正在使用 ui:repeat 标记在 xhtml 页面中进行迭代，这就是奇怪的东西出现的地方。如您所见，我在变量名称前用取消标记定义了我的吸气剂。我的 xhtml 显示如下：

```
<h:form>
    <!--            <p:queue requestDelay="1" ignoreDupResponce="true" /> -->
    <h:panelGroup id="navigationPanel">
        <!-- Comprobar si está activada la deshabilitación de los botones de navegación -->
        <h:panelGroup
            rendered="#{!navigationManager._DisableNavigationButtons}">
            <ui:repeat value="#{navigationManager._Navegables}" var="item">
                <p:commandButton value="#{item._Title}"
                    action="#{item.actionSelected}" update="#{reRenderOnSelect}" />
            </ui:repeat>
            <p:commandButton disabled="true"
                value="#{navigationManager._Navegable._Title}" />
        </h:panelGroup>
        <h:panelGroup
            rendered="#{navigationManager._DisableNavigationButtons}">
            <ui:repeat value="#{navigationManager._Navegables}" var="item">
                <p:commandButton value="#{item._Title}"
                    listener="#{item.actionSelected}" update="#{reRenderOnSelect}"
                    disabled="true" />-->
            </ui:repeat>
            <p:commandButton disabled="true"
                value="#{navigationManager._Navegable._Title}" />
        </h:panelGroup>

    </h:panelGroup>
</h:form> 
```

如果我使用给定的代码，它工作没有问题，但如果我折射 get_Navegabes 并将方法名称更改为 getNavegables，不带下划线，并在 xhtml 页面中执行相同操作，它会给我下一个错误：

```
/system/navigation/navigation.xhtml @17,67 value="#{navigationManager.Navegables}": Property 'Navegables' not found on type com.tesicnor.system.view.navigation.NavigationManagerSystem 
```

所以 JSF 找不到该属性。我在此页面中使用的每个吸气剂都会发生这种情况，不知道为什么。有没有人尝试过类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:12:00.060

value="#{navigationManager.Navegables}" 错误，"N" 不应该是大写，而是使用这个： value="#{navigationManager.navegables}"

# ruby-on-rails - 如何解决在 level 2 更深的模型中上传图像的错误

> ID：10136568
> 
> 赞同：0
> 
> 时间：2012-04-13T07:03:41.653
> 
> 标签：ruby-on-rails

# 我的应用程序中的模型

```
class Category < ActiveRecord::Base
  has_many :dishes, :dependent => :destroy
end

class Dish < ActiveRecord::Base
  attr_accessible :assets_attributes
  belongs_to :category
  has_many :assets
  accepts_nested_attributes_for :assets, :allow_destroy => true
end

class Asset < ActiveRecord::Base
  belongs_to :dish
  has_attached_file :asset, :styles => { :large => "640x480", :medium => "300x300>", :thumb => "100x100>" }
end 
```

# 在 Gemfile

```
source 'http://rubygems.org'
gem 'rails', '3.0.11'
gem 'sqlite3', '1.3.3'
gem 'paperclip' 
```

# 应用程序/控制器/dishes_controller.rb

```
class DishesController < ApplicationController

  def new
    @category = Category.find(params[:id])
    @dish = @category.dishes.new(:category_id => params[:id])
    @dish.assets.build    
    @title = "Create dish"
    respond_to do |format|
      format.html # new.html.erb
      format.json  { render :json => @category }
    end
  end

  def create
    @category = Category.find(params[:category_id])
    @dish = @category.dishes.create(params[:dish])
    respond_to do |format|
      format.html { 
        flash[:success] = "Dish created successfully!"
        redirect_to(@category) }
      format.json  { render :json => @category }
    end
  end

end 
```

# 应用程序/视图/类别/show.html.erb

```
<p><%= notice %></p>

<h1> Category Details </h1>

...

<hr />

<h2>Dishes</h2>

<table>
  <tr>
    ...
  </tr>

  <%= render @category.dishes %>

</table>

<%= link_to 'New Dish', newdish_path(:id => @category.id) %> 
```

# 应用程序/视图/菜肴/new.html.erb

```
<h1>New Dish</h1>

<%= render 'form' %> 
```

# 应用程序/视图/菜肴/_form.html.erb

```
<%= form_for([@category, @dish]), :html => { :multipart => true } do |f| %>
...# Here the fields for dishes table will come
  <div class="field">
    <h4>New Files</h4>
      <% f.fields_for :assets do |asset_fields| %>
        <% if asset_fields.object.new_record? %>
      <p>
        <%= asset_fields.file_field :asset %>
      </p>
    <% end %>
      <% end %>
    <h4>Old Files</h4>
      <% f.fields_for :assets do |asset_fields| %>          
        <% unless asset_fields.object.new_record? %>
      <div class="thumb">
        <%= link_to image_tag(asset_fields.object.asset.url(:thumb)), asset_fields.object.asset.url(:original) %>
        <%= asset_fields.check_box :_destroy %>         
      </div>    
    <% end %>
      <% end %>
  </div>
...
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

尝试运行这些代码时出现错误

```
SyntaxError in Dishes#new

Showing /home/ragunathjawahar/Desktop/PROJECT/karaikudi-before-send/app/views/dishes/_form.html.erb where line #1 raised:

/home/ragunathjawahar/Desktop/PROJECT/karaikudi-before-send/app/views/dishes/_form.html.erb:1: syntax error, unexpected tASSOC, expecting keyword_end
...r([@category, @dish]), :html => { :multipart => true } do |f...
...                               ^
/home/ragunathjawahar/Desktop/PROJECT/karaikudi-before-send/app/views/dishes/_form.html.erb:1: syntax error, unexpected keyword_do_block, expecting keyword_end
...ml => { :multipart => true } do |f| @output_buffer.safe_conc...
...                               ^
/home/ragunathjawahar/Desktop/PROJECT/karaikudi-before-send/app/views/dishes/_form.html.erb:51: syntax error, unexpected keyword_ensure, expecting $end 
```

如何解决这个问题呢？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:10:29.823

先更正这一行并告诉

```
 <%= form_for([@category, @dish], :html => { :multipart => true }) do |f| %> 
```

用这条线做菜

```
 @dish = Dish.create!(:dishCode => params[:dish][:dishCode] ,:name => params[:dish][:name]) 
```

代替

```
 @dish = @category.dishes.create(params[:dish]) 
```

但首先检查 params[:dish][:dishCode] 是否给你价值。

和寒冷.......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:10:02.493

尝试改变这个：

```
<%= form_for([@category, @dish]), :html => { :multipart => true } do |f| %> 
```

对此：

```
<%= form_for([@category, @dish], :html => { :multipart => true }) do |f| %> 
```

即，您过早地关闭支架。

# sql - 从 DB2 数据库中的 CLOB 中获取 XML 的 Tag\Element 值

> ID：10136577
> 
> 赞同：0
> 
> 时间：2012-04-13T07:04:45.660
> 
> 标签：sql, xml, db2, clob

我有以下结构的 xml ......

XML的结构：

```
<Persons>
    <PersonID>12345</Person>
    <PersonName>Larissa</Person>
    <PersonAge>28</Person>
<Persons>

<Persons>
    <PersonID>12345</Person>
    <PersonName>Larissa</Person>
    <PersonAge>28</Person>
<Persons> 
```

xml 位于 IBM DB2 数据库的 CLOB 数据类型列中。我想触发一个选择查询来提取**PersonID**字段的值并获得值 12345 作为回报。

DB2 for xml 中是否有任何函数可以用来提取 PersonID 的值？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:47:31.177

（假设 DB2 Linux/Unix/Window）

您可以[使用 xquery](http://www.ibm.com/developerworks/data/library/techarticle/dm-0604saracco/)来获得您想要的结果：

```
xquery
db2-fn:xmlcolumn('YOUR_TABLE.YOUR_COLUMN')/Persons/PersonID/text() 
```

`xquery`由于该查询直接调用 xquery，因此您必须通过使用关键字来指示 DB2 使用 xquery 解析器（而不是 SQL 解析器） 。

# java - 使用 Java 进行 RIJNDAEL 加密

> ID：10136585
> 
> 赞同：5
> 
> 时间：2012-04-13T07:05:12.787
> 
> 标签：java, php, rijndael

我需要在 Java 和 php 中编码一个明文，结果必须相同。

给出以下条件：

1.  算法：RIJNDAEL-128
2.  键：1234567890123456
3.  模式：cfb
4.  初始化向量：1234567890123456

以下代码有效并满足第一个和第二个要求，但它使用 ECB 作为模式，因此不使用初始化向量：

PHP：

```
 <?php  
        $cipher = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', MCRYPT_MODE_ECB, '');     
        $cleartext = 'abcdefghijklmnop';    
        $key128 = '1234567890123456';
        $iv = '1234567890123456';

        if (mcrypt_generic_init($cipher, $key128, $iv) != -1)  //Parameter iv will be ignored in ECB mode
        {
            $cipherText = mcrypt_generic($cipher,$cleartext );
            mcrypt_generic_deinit($cipher);     
            printf(bin2hex($cipherText));       
        }
    ?> 
```

输出为：fcad715bd73b5cb0488f840f3bad7889

爪哇：

```
public class AES {

    public static void main(String[] args) throws Exception {
        String cleartext = "abcdefghijklmnop";
        String key = "1234567890123456";
        SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(), "AES");
        Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
        byte[] encrypted = cipher.doFinal(cleartext.getBytes());
        System.out.println(asHex(encrypted));
    }

    public static String asHex(byte buf[]) {
        StringBuffer strbuf = new StringBuffer(buf.length * 2);
        int i;
        for (i = 0; i < buf.length; i++) {
            if (((int) buf[i] & 0xff) < 0x10)
                strbuf.append("0");
            strbuf.append(Long.toString((int) buf[i] & 0xff, 16));
        }
        return strbuf.toString();
    }

} 
```

输出为（与 PHP 版本相同）：fcad715bd73b5cb0488f840f3bad7889

所以现在为了满足要求 3 和 4，我在我的 PHP 版本中将模式更改为 MCRYPT_MODE_CFB，以便代码如下所示：

```
 <?php  
        $cipher = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', MCRYPT_MODE_CFB, '');     
        $cleartext = 'abcdefghijklmnop';    
        $key128 = '1234567890123456';
        $iv = '1234567890123456';

        if (mcrypt_generic_init($cipher, $key128, $iv) != -1)  //Parameter iv will be ignored in ECB mode
        {
            $cipherText = mcrypt_generic($cipher,$cleartext );
            mcrypt_generic_deinit($cipher);     
            printf(bin2hex($cipherText));       
        }
    ?> 
```

这导致以下输出：14a53328feee801b3ee67b2fd627fea0

在 JAVA 版本中，我还调整了模式并将 iv 添加到我的 Cipher 对象的 init 函数中。

```
public class AES {

    public static void main(String[] args) throws Exception {
        String cleartext = "abcdefghijklmnop";
        String key = "1234567890123456";
        SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(), "AES");
        Cipher cipher = Cipher.getInstance("AES/CFB/NoPadding");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec,  new IvParameterSpec("1234567890123456".getBytes()));
        byte[] encrypted = cipher.doFinal(cleartext.getBytes());
        System.out.println(asHex(encrypted));
    }

    public static String asHex(byte buf[]) {
        StringBuffer strbuf = new StringBuffer(buf.length * 2);
        int i;
        for (i = 0; i < buf.length; i++) {
            if (((int) buf[i] & 0xff) < 0x10)
                strbuf.append("0");
            strbuf.append(Long.toString((int) buf[i] & 0xff, 16));
        }
        return strbuf.toString();
    }

} 
```

但这里的输出是 141eae68b93af782b284879a55b36f70，这与 PHP 版本不同。

有人知道 JAVA 和 PHP 版本之间的区别是什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T16:03:33.427

它没有很好地记录，但是 PHP 的`MCRYPT_RIJNDAEL_128`with`MCRYPT_MODE_CFB`产生的结果与 Java 的`AES/CFB8/NoPadding`.

所以PHP中的这一行：

```
$encrypted = base64_encode( mcrypt_encrypt( MCRYPT_RIJNDAEL_128, $key, $cleartext, MCRYPT_MODE_CFB, $iv ) ); 
```

与 Java 中的此块匹配：

```
SecretKeySpec   key = new SecretKeySpec(KEY.getBytes(), "AES");
IvParameterSpec iv  = new IvParameterSpec(IV.getBytes());

Cipher cipher = Cipher.getInstance("AES/CFB8/NoPadding");
cipher.init(Cipher.ENCRYPT_MODE, key, iv);

byte[] output = cipher.doFinal(cleartext.getBytes());

String signature = Base64.encode(output); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T07:12:18.877

这里有三件事：

*   PHP 的“MCRYPT_RIJNDAEL_128”很可能与 Java 的“AES”不完全相同。[AES Wiki 条目](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)在介绍的底部讨论了 RIJNDAEL 和 AES 之间的区别。

*   您在 PHP 版本中使用 CBC，而在 Java 版本中使用 CFB。即使算法相同，这肯定会给你不同的输出。

*   PHP 版本没有填充，而 Java 版本使用 PKCS5Padding。Java 版本应使用“Cipher.getInstance("AES/CFB/NoPadding");" 实例化密码。

此外，不是用密钥字符串的字节构造 SecretKeySpec，而是真正想要生成一个 AES 密钥。这看起来像：

```
KeyGenerator keygen = KeyGenerator.getInstance("AES");
SecureRandom sec = new SecureRandom(key.getBytes());
keygen.init(128, sec);
Key key = keygen.generateKey();
SecretKeySpec skeySpec = new SecretKeySpec(key.getEncoded(), "AES");
... 
```

本质上，String 密钥是生成 SecretKey 的种子，而不是密钥本身。

# intersystems-cache - 在 Caché 中使用 %GOF 静默导出全局变量

> ID：10136586
> 
> 赞同：1
> 
> 时间：2012-04-13T07:05:15.317
> 
> 标签：intersystems-cache

我想知道是否可以在没有用户交互的情况下使用“^%GOF”。我正在使用 Caché 2008。^%GO 不是一个选项，因为它会变慢。我正在使用来自临时文件的输入来自动回答问题，但它可能会失败（很少发生）。

我在 %SYS 中找不到此实用程序的例程。它位于哪里？

谢谢，

答：使用“%SYS.GlobalQuery:NameSpaceList”获取全局变量列表（系统全局变量除外）。

```
Set Rset = ##class(%ResultSet).%New("%SYS.GlobalQuery:NameSpaceList")
d Rset.Execute(namespace, "*", 0)
s globals=""

while (Rset.Next()){
 s globalName=Rset.Data("Name")_".gbl"
 if (globals=""){
  s globals = globalName
 }else{
  s globals = globals_","_globalName
}

d ##class(%Library.Global).Export(namespace, globals, "/tmp/export.gof", 7) 
```

唯一的缺点是，如果您的命名空间的全局变量连接超过全局条目允许的最大值，则程序会崩溃。然后，您应该拆分全局列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:55:08.577

我建议您查看输出格式为 7 的 %Library.Global() 类。

*   类方法导出（Nsp As %String = $zu(5)，ByRef GlobalList As %String，FileName As %String，OutputFormat As %Integer = 5，RecordFormat As %String = "V"，qspec As %String = "d"，翻译为 %String = "") 为 %Status

    使用 OutputFormat 和 RecordFormat 将全局变量 GlobalList 的列表从命名空间 Nsp 导出到 FileName。OutputFormat 可以采用以下值： 1 - DTM 格式 3 - VAXDSM 格式 4 - DSM11 格式 5 - ISM/缓存格式 6 - MSM 格式 7 - 缓存块格式 (%GOF)

    RecordFormat 可以采用以下值： V - 可变长度记录 S - 流数据

    您可以在此处的类文档中找到它：[http ://docs.intersystems.com/cache20082/csp/documatic/%25CSP.Documatic.cls](http://docs.intersystems.com/cache20082/csp/documatic/%25CSP.Documatic.cls)

    我从来没有使用过它，但是看起来它可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:30:03.703

将您的全局导出到文件

```
d $system.OBJ.Export("myGlobal.GBL","c:\global.xml") 
```

从您的文件中导入全局

```
d $system.OBJ.Load("c:\global.xml") 
```

> 将项目导出为 XML 文件
> 
> 项目的扩展决定了它们是什么类型，它们可以是以下之一：
> 
> *   CLS - 类
> *   CSP - 缓存服务器页面
> *   CSR - 缓存规则文件
> *   MAC - 宏例程
> *   INT - 无宏例程
> *   BAS - 基本例程
> *   INC - 包含文件
> *   GBL - 全球
> *   PRJ - 工作室项目
> *   OBJ - 对象代码
> *   PKG - 包定义
> 
> 如果您希望导出多个类，则用逗号分隔 then 或将 items("item")="" 作为数组传递或使用通配符。
> 如果文件名是空的，那么它将导出到当前设备。

[文档手册](http://docs.intersystems.com/cache20082/csp/documatic/%25CSP.Documatic.cls?PAGE=CLASS&LIBRARY=%25SYS&CLASSNAME=%25SYSTEM.OBJ#Export)的链接

编辑：添加“-d”作为 qspec 值将抑制导出的终端输出。如果您想以编程方式使用它，它可能会妨碍您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T08:47:04.403

只是为了完整起见：

```
SAMPLES>s IO="c:\temp\test.gof"

SAMPLES>s IOT="RMS"

SAMPLES>s IOPAR="WNS"

SAMPLES>s globals("Sample.PersonD")=""

SAMPLES>d entry^%GOF(.globals)

SAMPLES> 
```

-> 导致 c:\temp\test.gof 具有导出。您可以在数组中定义多达 65435 个全局变量（在本例中命名为全局变量）

但我建议您使用 DAiMor 的回答，因为这是更“现代”的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T11:12:33.570

为了避免最大字符串错误，您应该使用下标而不是逗号分隔的字符串：

```
Set Rset = ##class(%ResultSet).%New("%SYS.GlobalQuery:NameSpaceList")
d Rset.Execute(namespace, "*", 0)

while (Rset.Next()) {
 s globals(Rset.Data("Name"))="" // No need for _".gbl" in recent Cache
}

d ##class(%Library.Global).Export(namespace, .globals, "/tmp/export.gof", 7) // Note dot before globals 
```

# jqgrid - java JQGrid TreeGrid - 重新加载网格后展开节点

> ID：10136589
> 
> 赞同：0
> 
> 时间：2012-04-13T07:05:43.617
> 
> 标签：jqgrid

ON 选择行即时调用

```
 $('#grid').trigger('reloadGrid'); 
```

之后，当网格重新加载时，我希望这个节点展开并显示子节点。我试着做类似的事情

```
var rootNode = $('#grid').jqGrid('getRowData')[0];
           $('#grid').jqGrid('expandRow'   ,rootNode);
           $('#grid').jqGrid('expandNode'  ,rootNode);  
           $('#grid').jqGrid('setSelection',rootNode.id); 
```

但这似乎不起作用，感谢任何帮助。

我的网格对象如下

```
 var grid = $('#grid').jqGrid({
        treeGrid: true,
        treeGridModel: 'adjacency',
        ExpandColumn: 'businessAreaName',
        ExpandColClick : false,
        url:'/records.do',
        datatype: 'json',
        mtype: 'GET',
        colNames:['Id'
                  , 'Business Area'
                  , 'Investment'                  
                  ],
        colModel:[
/*00*/          {name:'Id',index:'Id', width:0, editable:false,hidden:true},
/*01*/          {name:'businessAreaName',index:'businessAreaName', width:160, editable:false}

        ],
        treeReader : {
            level_field: 'level',
            parent_id_field: 'parent', 
            leaf_field: 'leaf',
            expanded_field: 'expanded'
        },
        autowidth: true,
        height: 240,
        pager: '#pager',
        sortname: 'id',
        sortorder: 'asc',
        caption:'ATP ScoreCard',
        emptyrecords: 'Empty records',
        loadComplete: function() {
            designtable();          
        },
        jsonReader : {
            root: 'rows',
            page: 'page',
            total: 'total',
            records: 'records',
            repeatitems: false,
            cell: 'cell',
            id: 'agileProgrammeId'
        },
        beforeProcessing : function(data, status, xhr){
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:54:50.647

首先`expanded`，您可以填写隐藏列（请参见[此处](https://stackoverflow.com/a/5333199/315935)和[此处](https://stackoverflow.com/a/6527790/315935)）。因此，如果您在要打开的节点之后包含需要直接打开的节点的子节点并`expanded: true`在其属性中设置，则树节点将显示为打开状态。

可能是您想跟踪哪些节点打开了用户并在下次访问同一页面时恢复节点。在这种情况下，我会将您转发给[答案](https://stackoverflow.com/a/9202378/315935)和[这个](https://stackoverflow.com/a/9244023/315935)。

# ios - iOS，检查应用程序是否因为内存不足而崩溃

> ID：10136590
> 
> 赞同：1
> 
> 时间：2012-04-13T07:05:43.657
> 
> 标签：ios, crash, memory-warning

如何确定崩溃的原因是内存不足？
崩溃日志中有什么具体内容吗？也许我必须使用一些工具或库？

更新：我的应用程序使用大量内存并收到内存警告。减少内存使用非常困难。由于不时出现内存警告，它会崩溃。但我想确保它不会因为其他原因而崩溃。
那么如何检查应用程序崩溃的原因（每次都会收到大量内存警告）

UPDATE2：应用程序有很多 3D 图形和复杂的 UI，需要大量内存来存储纹理。客户不想进行任何类型的“加载...”暂停。如果我在背景中卸载不可见的纹理，我将无法获得流畅的动画。

所以我只需要检测**除了内存之外是否有任何崩溃原因**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:12:20.540

至少您可以实现该方法

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application 
```

在您的应用程序委托中，并放置一个日志以查看您是否确实在崩溃之前经历了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:09:23.260

您可以使用[Apple 的 Instruments Tool](https://en.wikipedia.org/wiki/Instruments_%28application%29)来分析各种内容，例如内存使用情况。该工具与 Xcode 捆绑在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:12:28.423

产品 -> 配置文件 -> 泄漏是检查内存泄漏的一种可能方法。*分配*将显示正在使用的总内存，*泄漏*将显示由于未释放而导致的泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T07:15:21.357

[如何调试内存泄漏与 xcode 和仪器教程](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)

这是一个有用的教程

# backup - 从 Windows 7 机器备份例程

> ID：10136593
> 
> 赞同：0
> 
> 时间：2012-04-13T07:05:55.037
> 
> 标签：backup, rsync

谁能推荐一个在给定本地路径上自动运行备份到网络目标的程序（只需同步，我只需要网络位置上文件夹的精确副本）？即使用户未登录到 Windows 7 计算机，此程序也会自动运行备份过程，这一点很重要。Rsync 或只是网络目标，两者都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:12:06.800

如果你只在 Win7 上，也许 robocopy 会做

[http://technet.microsoft.com/en-us/library/cc733145%28v=WS.10%29.aspx](http://technet.microsoft.com/en-us/library/cc733145%28v=WS.10%29.aspx)

# mongodb - bson 数组如何比较（在 mongodb/pymongo 中）？

> ID：10136600
> 
> 赞同：0
> 
> 时间：2012-04-13T07:06:23.727
> 
> 标签：mongodb, pymongo, bson

我想在 mongdb 中存储一些非常大的整数，确切地说（几千个十进制数字）。这当然不适用于 BSON 支持的标准类型，考虑到我想执行范围搜索和类似的事情，我正在尝试考虑最优雅的解决方法。此要求不包括将整数存储为字符串，因为它使范围搜索不切实际。

我能想到的一种方法是使用标准整数的（可变长度）数组对 2^32 扩展进行编码，并向该数组添加数组本身长度的第一个条目。这样，这些数组的字典顺序对应于任意大整数的通常顺序。

例如，在一个集合中，我可以有 5 个文档

```
{"name": "me", "fortune": [1,1000]}
{"name": "scrooge mcduck", "fortune": [11,1,0,0,0,0,0,0,0,0,0,0]}
{"name": "bruce wayne","fortune": [2, 10,0]}
{"name": "bill gates", "fortune": [2,1,1000]}
{"name": "francis", "fortune": [0]} 
```

因此布鲁斯韦恩的净资产是 10*2^32，比尔盖茨的 2^32+1000 和斯克罗吉麦克杜克的 2^320。

然后我可以使用 {"fortune":1} 进行排序，并在我的机器上（使用 pymongo）按 francis < me < bill < bruce < scrooge 的顺序返回它们，正如预期的那样。

但是，我假设我没有在任何地方看到关于 BSON 数组比较方式的记录，并且范围搜索似乎不像我想的那样工作（例如，

```
find({"fortune":{$gte:[2,5,0]}}) 
```

不返回任何文件，但我希望得到 bruce 和 scrooge）。

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:07:44.713

您可以改为存储左填充字符串，这些字符串表示等于财富的精确整数。

```
eg.  "1000000" = 1 million
     "0010000" = 10 thousand
     "2000000" = 2 million
     "0200000" = 2 hundred thousand 
```

左填充零将确保这些字符串的字典比较直接对应于它们作为数值的比较。您必须在这里假设一个安全的 MAXIMUM 可能的财富值，比如一个 20 位数字，并相应地填充 0 所以示例文档将是：

```
 {"name": "scrooge mcduck", "fortune": "00001100000000000000" }
  {"name": "bruce wayne",    "fortune": "00000200000000000000" } 
```

查询：

```
> db.test123.find()
{ "_id" : ObjectId("4f87e142f1573cffecd0f65e"), "name" : "bruce wayne", "fortune" : "00000200000000000000" }
{ "_id" : ObjectId("4f87e150f1573cffecd0f65f"), "name" : "donald", "fortune" : "00000150000000000000" }
{ "_id" : ObjectId("4f87e160f1573cffecd0f660"), "name" : "mickey", "fortune" : "00000000000000100000" }

> db.test123.find({ "fortune" : {$gte: "00000200000000000000"}});
{ "_id" : ObjectId("4f87e142f1573cffecd0f65e"), "name" : "bruce wayne", "fortune" : "00000200000000000000" }

> db.test123.find({ "fortune" : {$lt: "00000200000000000000"}});
{ "_id" : ObjectId("4f87e150f1573cffecd0f65f"), "name" : "donald", "fortune" : "00000150000000000000" }
{ "_id" : ObjectId("4f87e160f1573cffecd0f660"), "name" : "mickey", "fortune" : "00000000000000100000" } 
```

查询/排序将自然地工作，因为 mongodb 按字典顺序比较字符串。但是，要对您的数据执行其他数字操作，您必须在数据处理脚本（PHP、Python、Ruby 等）中编写自定义逻辑

对于查询和数据存储，这个字符串版本应该很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:18:19.523

不幸的是，您对数组比较的假设是不正确的。例如，查询所有小于 3 的数组值 ({array:{$lt:3}}) 的范围查询将返回至少一个元素小于 3 的所有数组，而不管元素的位置如何。因此，您的方法将行不通。

什么有效，但不太明显，将二进制 blob 用于非常大的整数，因为它们是按字节顺序比较的。这需要您为整数设置一个上限，但这应该相当简单。您可以使用 BinData(subType, base64) 表示法在 shell 中对其进行测试：

```
db.col.find({fortune:{$gt:BinData(0, "e8MEnzZoFyMmD7WSHdNrFJyEk8M=")}}) 
```

所以你所要做的就是创建方法来将你的大整数从字符串转换为二补码二进制，然后你就设置好了。祝你好运

# java - 退出线程

> ID：10136603
> 
> 赞同：5
> 
> 时间：2012-04-13T07:06:40.567
> 
> 标签：java, multithreading, udp

我有以下代码块：

```
public void startListening() throws Exception {
    serverSocket = new DatagramSocket(port);
    new Thread() {

        @Override
        public void run() {
            System.out.print("Started Listening");
            byte[] receiveData = new byte[1024];
            DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
            while (!stopFlag) {
                try {
                    serverSocket.receive(receivePacket);
                    String message = new String(receivePacket.getData());
                    System.out.println("RECEIVED: " + message);
                } catch (Exception ex) {
                    System.out.print("Execption :" + ex.getMessage());
                }
            }
        }
    }.start();
}

public void stopListening() {
    this.stopFlag = true;
} 
```

假设我将 stopFlag 设置为 true。`serverSocket.receive(receivePacket);`将等到它收到一个数据包。如果我希望线程在 stopFlag 设置为 true 后立即退出，我应该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T07:20:57.707

我的套接字也有同样的问题，并且中断（）不起作用。我的问题通过关闭套接字解决了。因此，在 setStop() 方法中（如上所述），您必须调用`serverSocket.close()`（您显然必须使 serverSocket 成为类成员或其他东西）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T07:14:51.157

我不确定停止标志来自哪里，但无论如何，答案是中断。

```
Thread t;
ServerSoket serverSoket;

public void startListening() throws Exception {
    ...
    serverSocket = new DatagramSocket(port);
    t = new Thread()...;
    t.start();
    ...
}

setStop() {
    stopFlag = true;
    serverSocket.close()
    t.interrupt();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T07:16:37.327

如果您有一些代码，其中包含您计划更改`stopFlag`. 如果它在线程之外，您可能会在线程上使用 a `.interrupt()`，然后在线程上使用 a `.destroy()`。尝试在服务器套接字上添加超时可能不是一个理想的解决方案，请参阅java api 中的`setSoTimeout()`方法。`DatagramSocket`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T08:35:01.630

使用`serverSocket.setSoTimeout(t)`.

# android - android：如何在字符串中添加下划线

> ID：10136616
> 
> 赞同：6
> 
> 时间：2012-04-13T07:07:58.377
> 
> 标签：android, string, textview

```
<string-array name="myarray">    
<item>Apple</item> 
<item>Banana</item> 
<item>Grape</item>
<item>Melon</item> 
```

如果我想添加下划线“香蕉”我应该添加什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T07:11:46.427

使用`SpannableString`它您可以对文本进行下划线、罢工、突出显示、粗体、斜体等

对于下划线，您必须使用`UnderlineSpan` [http://developer.android.com/reference/android/text/style/UnderlineSpan.html](http://developer.android.com/reference/android/text/style/UnderlineSpan.html)

```
 TextView textview = (TextView)findViewById(R.id.textview);
 SpannableString content = new SpannableString("Apple Banana Grape Melon");
 content.setSpan(new UnderlineSpan(), 6, 11, 0);
 textview.setText(content); 
```

或者简单地通过将 HTML 标记添加到资源字符串`<string name="sample"> <u>your data</u></string>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T07:13:44.910

```
<resource>
    <string name="your_string_here">This is an <u>underline</u>.</string>
</resources> 
```

# java - 将更改传播到嵌套对象的模式

> ID：10136617
> 
> 赞同：1
> 
> 时间：2012-04-13T07:07:58.977
> 
> 标签：java, actionscript

我正在实现一个游戏/应用程序，其中玩家的帐户/状态同步到服务器。我正在考虑一个通用框架来传达对实体的嵌套对象的修改（实体是用户的帐户）。让我们假设客户端和服务器都是用 Java 编写的计算/反射的讨论（实际上客户端是在可以动态修改属性的 Actionscript 中）

以[Firebase](http://www.firebase.com/docs/writing-data.html)为例。对根对象（Firebase 对象）的任何对象的修改都会通过可能类似于以下内容的请求传播：

```
Service: PersistenceService
Action: modifiedObjects
Body:
Objects [{"/full/Path/To/Object/1","newValue"},{"/full/Path/to/Object/2","newValue"}] 
```

我对您输入的要求如下：

1) 请更正和/或扩充以下关于实现此通用框架以传播对对象树的修改的想法。

在发送方，似乎每个对象：

1）需要从根实体存储它的完整路径

2）所有嵌套对象的属性更改需要反射完成

或者

需要强制进行同步，将实体保存的上次请求的对象树与当前对象树进行比较以进行修改。

在服务器端，可以通过分析对象的路径来缓存一个请求中多次访问的对象，从而避免通过引用/搜索集合多次访问树。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:54:19.507

通常，观察者模式是对您的需求类型的回答（来自 wiki）

观察者模式（又名 Dependents，发布/订阅）是一种软件设计模式，其中称为主体的对象维护其依赖者列表（称为观察者），并自动通知它们任何状态更改，通常通过调用其中一个他们的方法。它主要用于实现分布式事件处理系统。

您需要在客户端服务器上实现，因此 wiki 上给出的示例不适用，您可能需要检查：

[http://deepintojee.wordpress.com/2011/03/18/observer-pattern-applied-at-remote-level/](http://deepintojee.wordpress.com/2011/03/18/observer-pattern-applied-at-remote-level/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:51:27.040

我想出的答案实际上是非常明显的，显然是最好的方法。答案是镜像一个表数据库。为每个对象分配一个 id，并将每个对象存储在 ArrayList 中（或根据类型为每个对象分配一个唯一 ID，并将对象存储在其类型的 ArrayList 中，该 ArrayList 本身存储在 HashMap 中）。

我将我的接口称为 ServiceObject 和 ServiceContainer。

现在我唯一需要看到的是 json 和 protostuff 如何序列化对对象的双重引用。它们是否被序列化为单独的对象？如果是这样，那么任何嵌套的 ServiceObject 都需要反序列化为对 ArrayList 中对象的引用。

# android - 如何在 android 的新 TimerTask 操作中更改某些内容？

> ID：10136620
> 
> 赞同：0
> 
> 时间：2012-04-13T07:08:15.777
> 
> 标签：android

我在android中的timerTask有问题我有这样的代码：

```
timer = new Timer();
timer.schedule(new TimerTask() {
        public void run() {
            countInt = countInt + 1;
            textview1.setText(countInt);
        }
    }, 1000); 
```

每次计时器任务启动时，我的应用程序都会崩溃，因为我正在访问 textview 并且它在另一个线程中，对吗？

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T07:13:15.693

是的，你是对的，它崩溃了，因为你不是从 UI 线程访问视图。为了解决这个问题，您可以使用您的活动将 Runnable 发布到 UI 线程

```
timer = new Timer();
timer.schedule(new TimerTask() {
    public void run() {
        countInt = countInt + 1;
        YourActivity.this.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                textview1.setText(countInt);
            }
        });
    }
}, 1000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T07:11:36.370

尝试这个..

```
 timer = new Timer();
    timer.schedule(new TimerTask() {
            public void run() {
                countInt = countInt + 1;
                yourActivity.this.runOnUiThread(new Runnable()
               public void run(){
                  {textview1.setText(String.valueOf(countInt))});
                }
            }
        }, 1000); 
```

它崩溃是因为你在搞乱`( textview1.setText(countInt);)`属于 UI 线程的东西，这是不允许的......

# c - 什么是在 C 中解析参数的简单但可靠的方法？

> ID：10136623
> 
> 赞同：1
> 
> 时间：2012-04-13T07:08:30.777
> 
> 标签：c, parsing

我有一些输入参数，例如：

> **参数**1 =*参数*1 值&**参数**2 =*参数*2 值&**参数**3 =*参数*3 值...

这些参数用字符' **&** '链接，参数及其值用' **=** '链接。我想将它们解析成这样的键值映射：

```
[param1, param1Value], [param2, param2Value], [param3, param3Value],... 
```

但是因为参数的值包含两个*key-characters*，这会破坏参数解析过程。

我被告知参数传递者，他们创建了这些参数格式以便于自定义，例如使用*sprintf*更改不同应用程序的参数值。所以很难说服他们将这些参数分隔在一个映射数组中。

我原本打算使用 yacc/lex，但是对于这样一个*little-feature*来说太复杂了。[*sscanf*](https://stackoverflow.com/questions/2827714/whats-the-easiest-way-to-parse-a-string-in-c)也可以解析类似正则表达式的文本，但是为我的参数列表构建一个类似正则表达式的字符串似乎并不容易。

有没有简单但可靠的方法可以在没有关键字符的情况下解析它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T07:10:11.323

您可以使用[`strtok`](http://linux.die.net/man/3/strtok)在字符处对字符串进行标记`'&'`，然后在处拆分“标记”`'='`以获取参数名称和值。

at 的拆分`'='`可以使用`strtok`as well （或者更确切地说`strtok_r`）或使用[`strchr`](http://linux.die.net/man/3/strchr)and [`strncpy`/`strcpy`](http://linux.die.net/man/3/strcpy) or [`strndup`/`strdup`](http://linux.die.net/man/3/strdup)来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:57:15.363

如果您保证该模式，您可以使用简单的解析函数。

如果保证键/值的最大长度，那么固定缓冲区 + 副本将是最简单的。否则，您可以先找到分隔符的位置，然后再找到该大小的 malloc 等。

作为一个简单的***例子***/概念，固定大小最大为 100，即：

```
#include <stdio.h>

int get_pair(char **p, char *key, char *val)
{
    int esc = 0;    /* escape level */
    char *cp = key; /* current target */

    *key = '\0';    /* if either is blank */
    *val = '\0';

    if (!*p || !**p)
        return 0;

    /* this could be done more elegant */
    while (**p) {
        if (**p == '=' && (esc & 1) == 0) {
            *cp = '\0'; /* terminate */
            cp = val;   /* change target */
            ++(*p);
            continue;
        } else if (**p == '&' && (esc & 1) == 0) {
            ++(*p);     /* skip & and break */
            break;
        }

        if (**p == '\\') {
            if((++esc & 1) == 0) /* if 2, 4, 6 ... \'s */
                *cp++ = **p;
        } else {
            esc = 0;
            *cp++ = **p;
        }
        ++(*p);
    }

    *cp = '\0';
    return 1;
}

int main(void)
{
    char *data = "ab=123&a\\=42&m\\\\ed\\=\\&do\\\\\\\\=mix";
    char key[100];
    char val[100];

    printf("Parse: %s\n", data);

    while (get_pair(&data, key, val))
        printf("key: %s\nval: %s\n\n", key, val);

    return 0;
} 
```

* * *

输出：

```
Parse: ab=123&a\=42&m\\ed\=\&do\\\\=mix
key: ab
val: 123

key: a=42
val: 

key: m\ed=&do\\
val: mix 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:14:47.517

是的，我已经修复了它们：当 passer 给我参数时，它们应该`\`用来转义`=`and `&`，但`\`本身不需要转义。当我提取这些参数时，我只是 `\&`用`&`, 和`\=`'=' 替换了。如果实际值是`\\=`，只需将其编码为`\\\=`。我不需要分析`\`角色，只需将它们留在原处即可。

# php - Bhai Log.. 我想通过 PHP 查找客户的系统物理身份。这可能吗？

> ID：10136627
> 
> 赞同：-4
> 
> 时间：2012-04-13T07:08:55.690
> 
> 标签：php, javascript, security, mac-address

目前我在 1 个站点上工作，它的要求是，我必须获得客户端系统的唯一身份，我正在使用`REMOTE_ADDR`但有些时间问题是它给了我动态 IP 地址，有时它对整个组织来说很常见，我想获得 Uniq 身份我的站点可以从哪个系统访问的任何系统..我可以通过 PHP 或 Java 脚本获取它，我的站点在核心 PHP 中

需要您的建议....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:21:17.967

我认为您应该在用户的系统上设置一个具有唯一标识符的 cookie，以便当他们重新访问您的网站时，您可以识别 cookie 并将他们视为回访者，但如果您的网站需要一种可靠的方式来识别用户为用户可以随时清除系统中的 cookie，出于一般目的，cookie 是识别用户的最佳方式。[http://www.php.net/manual/en/features.cookies.php](http://www.php.net/manual/en/features.cookies.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:16:41.173

如果一家公司使用动态 IP，我看不出有任何方法可以 100% 确定地识别他们的网络。我唯一能想到的可能是使用[Geolocation](http://en.wikipedia.org/wiki/Geolocation)。

例如，如果您知道一家公司位于 A 镇并使用提供商 X，那么每当出现来自提供商 X 的 IP 时，您可以对其进行地理定位并检查它是否来自公司所在的城镇。但是，这不是很防错，如果来自同一个城镇的两家公司使用同一个提供商，那么你就完蛋了。

另一个想法：您可以对远程系统进行指纹识别（打开端口等，查看 nmap）。如果指纹足够独特，那可能会奏效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T07:15:48.657

唯一身份可以如下：用户名、用户 ID、IP 地址 我相信也有一些方法可以获取客户端的 MAC 地址。但我不推荐这个。

我建议为客户端使用登录区域，以便您可以区分它们。

# c# - C# 中 Windows XP 上的 SendKeys 奇怪行为

> ID：10136630
> 
> 赞同：0
> 
> 时间：2012-04-13T07:09:06.870
> 
> 标签：c#, windows-xp, sendkeys

我在我的一个程序 (C#) 中使用 SendKeys，当用户在键盘上按 F8 时，它会复制选定的文本。

它在 Windows 7 上运行良好，但在 Windows XP 上它有以下问题。

1.  假设在记事本上，下面的句子写着“这是测试”

2.  如果用户选择“is”并按 F8，则不会复制文本。

3.  之后，如果用户选择“This”，则复制的文本为“is”

4.  之后，如果用户选择“test”，则复制的文本为“This”

如您所见，按 F8 会复制先前选择的文本，而不是当前文本。它只发生在 Windows XP 上。

这是代码

```
System.IntPtr test = GetForegroundWindow();
System.Windows.Forms.SendKeys.Send("^(c)");
string copiedText = Clipboard.GetText(); 
```

由于我使用 F8 的全局键绑定，因此第一行代码告诉我当前活动的窗口。之后发送 Ctrl+C，然后从剪贴板复制文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:22:15.683

我建议改用以下[`SendWait`](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.sendwait.aspx)方法：

> 使用 SendWait 将击键或击键组合发送到活动应用程序并*等待处理击键消息。*

（重点补充）

目前，您有一个竞争条件，不能保证其他应用程序在您尝试读取剪贴板内容之前已经处理了 CTRL-C。有时您会获得较旧的内容也就不足为奇了。

`SendKeys`（插入关于自动化其他应用程序的可怕方式的常见警告，考虑改用[自动化 API](http://msdn.microsoft.com/en-us/library/ms752297.aspx)，除非必要，否则避免在剪贴板上踩踏）

# virtual - 生成页面错误和 LLC 未命中事件的测试套件

> ID：10136635
> 
> 赞同：1
> 
> 时间：2012-04-13T07:09:39.497
> 
> 标签：virtual, benchmarking, memory-profiling

我需要根据每秒生成的页面错误数和每秒遇到的最后一级缓存未命中数来分析虚拟机内存访问。是否有标准的测试套件可以帮助我实现这一目标？

下面我描述了我需要实现的确切场景：

1.  在虚拟机上运行程序/测试套件会产生大量页面错误。
2.  在虚拟机上运行程序/测试套件以生成大量最后一级缓存未命中。
3.  监控虚拟机上每秒的页面错误数和每秒最后一级缓存未命中数。
4.  监控托管裸机机器上相应数量的页面错误和最后一级缓存未命中。

除此之外，还有我需要生成的一组分析结果。

问题 1：是否有标准的测试套件可以帮助我实现目标？如果有，请指出参考。我浏览了 SPEC 基准，但似乎没有发现任何对我的工作有多大用处的东西。

查询 2：如果没有这样的套件，有没有办法我可以编写一个程序来模拟上述场景？

任何方向的任何指针都值得赞赏。

谢谢！

# iphone - Iphone> 通过 ASIHTTPRequest 将 UIImage 对象上传到服务器，照片名称？

> ID：10136637
> 
> 赞同：0
> 
> 时间：2012-04-13T07:09:44.007
> 
> 标签：iphone, uiimage, asihttprequest, photo

我得到了一个没有名字的 UIImage 对象。（但是当我将 UIImage 保存到我的照片库时，它会得到一个类似 IMG_00000.jpg 的名称）

我只是不知道如何将此名称用于请求参数。（或任何名称......）

应该是这样的，

```
`[request addData:imageData withFileName:@"%@.jpg", self.IDON'TGETIT]` 
```

我可以用什么来命名这个 UIImage？

我怎样才能做到？（财产？有协议什么的吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:28:18.193

尝试：

```
NSData *imageData = UIImagePNGRepresentation(yourUIImage);
[request setData:imageData withFileName:@"myphoto.jpg" andContentType:@"image/jpeg" forKey:@"file"]; 
```

# iphone - UITextView 的 NSMutableArray 的迭代导致应用崩溃

> ID：10136638
> 
> 赞同：0
> 
> 时间：2012-04-13T07:09:56.813
> 
> 标签：iphone, ios

我想迭代 Uitextview NsmutableArray 但程序崩溃并给出以下错误，

```
"""-[__NSCFString text]: unrecognized selector sent to instance 0x861c2f0""" 
```

请检查此代码，并提供一些可能的解决方案...

谢谢你...

```
for ( x = 0; x < TextViewArray.count; x++) 
{
    // here TextViewArray is a NSMutableArray  
    UITextView *textField1 = [TextViewArray objectAtIndex:x];
    float diff3;
    diff3 = [textField1.text floatValue];   // The program crashes in this line ,"""""" -[__NSCFString text]: unrecognized selector sent to instance 0x861c2f0""""" , here I am checking for a float value but i want to use string value instead of float value in this line how to do this?

    NSLog(@"diff3 is %f",diff3);
    textField1.text = [[NSString alloc] initWithFormat:@"%.2f",diff3];
    TXT_First_Tag = [TextViewArray objectAtIndex:x];  // here uitextview *TXT_First_Tag;
    NSLog(@"txt3 is %d",x);           

    TXT_First_Tag.tag = x;       
    NSLog(@" p  is %d", x);  

    //textField1.text = [[NSString alloc] initWithFormat:@"%.2f",diff2];  

    //NSLog(@"Diff is %f",diff2); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:17:55.483

您的数组在给定索引处包含一个字符串，因此出现错误“”“-[__NSCFString text]：无法识别的选择器发送到实例 0x861c2f0”“”。检查数组是否只包含 UITextViews

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:59:36.530

在崩溃之前放置一个断点，一旦控制到达断点，就在 gdb shell 中执行一个“po”。这样，如果您尝试访问正确的对象，您将不会

# objective-c - NSDateFormatter 错误：不正确的字符串到日期转换

> ID：10136645
> 
> 赞同：0
> 
> 时间：2012-04-13T07:10:14.770
> 
> 标签：objective-c, nsdateformatter, utc

我有一个 UTC 字符串，我想将其转换为 NSDate。不知何故，我得到了 30 分钟的错误

字符串是 **2012-04-10T00:00:00+05:30**

转换后的日期为 **2012-04-09 19:00:00 +0000**

应该在哪里 **2012-04-09 18:30:00 +0000**

我使用此函数将字符串转换为日期

```
- (NSDate *)parseRFC3339Date{
    NSDateFormatter *rfc3339TimestampFormatterWithTimeZone = [[NSDateFormatter alloc] init];
    [rfc3339TimestampFormatterWithTimeZone setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZ"];

    NSDate *theDate = nil;
    NSError *error = nil; 
    if (![rfc3339TimestampFormatterWithTimeZone getObjectValue:&theDate forString:self range:nil error:&error]) {
        NSLog(@"Date '%@' could not be parsed: %@", self, error);
    }

    [rfc3339TimestampFormatterWithTimeZone release];
    return theDate;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:33:50.950

如果您要创建一个`NSRange`覆盖整个字符串并将其地址传递给 的`-getObjectValue:forString:range:error:`，那么您会在输出中看到它会很短。解析在冒号处停止，因为格式字符串中的“Z”仅匹配“-0800”（无冒号）之类的内容。如果您要指定 4 个 Z，“ZZZZ”，它将匹配“GMT-08:00”之类的内容。这允许使用冒号，但需要“GMT”。如果您确定日期字符串的格式，您可以尝试插入“GMT”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:27:56.183

我在这里遇到了**ISOdateFormatter** [http://boredzo.org/iso8601unparser/](http://boredzo.org/iso8601unparser/)，它运行良好。资助它比修改传入的日期字符串更好。

# wordpress - wordpress 创建具有一些不同功能的表单

> ID：10136646
> 
> 赞同：0
> 
> 时间：2012-04-13T07:10:19.127
> 
> 标签：wordpress, for-loop

我有一个简单的问题。创建具有相同功能的[http://www.condoroyalty.com/book-a-tour这样的表单的最佳方法是什么？](http://www.condoroyalty.com/book-a-tour)

我可以自己做，但整合它的最佳方法是什么？在模板下开发表单，创建插件或...

我有另一种方法，使用插件，但插件不允许我编辑该表单，我无法添加日历。

请给我一些提示或链接。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:10:31.743

使用 JQuery，这里有一些链接： [http](http://www.queness.com/post/204/25-jquery-plugins-that-enhance-and-beautify-html-form-elements) ://www.queness.com/post/204/25-jquery-plugins-that-enhance-and-beautify-html-form-elements http://www.jformer.com/ [http://www.designyourway.net/blog/resources/55-jquery-form-plugins-to-download-and-use/](http://www.designyourway.net/blog/resources/55-jquery-form-plugins-to-download-and-use/)

祝你好运！

# java - 在 Apache Felix 中运行的任务调度程序？

> ID：10136656
> 
> 赞同：3
> 
> 时间：2012-04-13T07:11:18.363
> 
> 标签：java, osgi, apache-felix

我想实现一个任务调度程序以在 Apache Felix 中运行。这个想法是任务调度程序将读取一个 crontab 文件，并定期执行任务（任务由已安装的服务或捆绑包定义）。做这个的最好方式是什么？我是 OSGI 的新手，欢迎提出好的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T12:28:27.317

好吧，这不是真正的 OSGi 问题（OSGi 不包括 crontab 类型的事件调度），我会说使用像 Quartz 这样的第 3 方开源调度程序：

[http://quartz-scheduler.org/](http://quartz-scheduler.org/)

然而，它不是一个开箱即用的 OSGi 包，因此仍然可能需要一些努力才能使其工作。

其他建议：Apache Sling 似乎有一个内置的调度程序（也基于 Quartz），并且由于 Sling 基于 OSGi，它应该很容易添加到您的应用程序中。

[http://sling.apache.org/documentation/bundles/scheduler-service-commons-scheduler.html](http://sling.apache.org/documentation/bundles/scheduler-service-commons-scheduler.html)

希望这会有所帮助，弗兰克

# c# - 此代码中返回相同结果但不同 SQL 的 LINQ 方法的执行顺序。里面到底发生了什么？

> ID：10136659
> 
> 赞同：4
> 
> 时间：2012-04-13T07:11:29.313
> 
> 标签：c#, sql, linq, ienumerable, iqueryable

所以，这是我的代码：

**注意** `ToList()` **这里方法的位置，它是 IEnumerable，逐行比较。**

```
Customers.ToList().Where(m=>m.ID > 3).OrderByDescending(m=>m.Name).FirstOrDefault();

Customers.Where(m=>m.ID > 3).ToList().OrderByDescending(m=>m.Name).FirstOrDefault();

Customers.Where(m=>m.ID > 3).OrderByDescending(m=>m.Name).ToList().FirstOrDefault(); 
```

## 让我们逐行浏览它：

`Customers.ToList().Where(m=>m.ID > 3) .OrderByDescending(m=>m.Name).FirstOrDefault()`

*   .ToList() - 可枚举
*   .Where() - 可枚举
*   .OrderByDescending() - 可枚举
*   .FirstOrDefault - 可枚举

`Customers.Where(m=>m.ID > 3).ToList() .OrderByDescending(m=>m.Name).FirstOrDefault()`

*   .Where() -**可查询**
*   .ToList() - 可枚举
*   .OrderByDescending() - 可枚举
*   .FirstOrDefault() - 可枚举

`Customers.Where(m=>m.ID > 3).OrderByDescending(m=>m.Name) .ToList().FirstOrDefault()`

*   .Where() -**可查询**
*   .OrderByDescending() - 可**查询**
*   .ToList() - 可枚举
*   .FirstOrDefault() - 可枚举

## 现在，这是他们的 SQL，按顺序排列：

> 选择 [t0].[ID], [t0].[Name] 从 [Customer] AS [t0] GO
> 
> SELECT [t0].[ID], [t0].[Name] FROM [Customer] AS [t0] WHERE [t0].[ID]
> 
> SELECT TOP (1) [t0].[ID], [t0].[Name] FROM [Customer] AS [t0] WHERE [t0].[ID] > @p0 ORDER BY [t0].[Name] DESC

似乎 line1 获得了整个集合并将其通过线路传递，而 line3 仅获得一个实体。

## 根据 SQL 输出，我可以推断：

    **line1：** *内存密集型代码；需要更多带宽，因为更多数据在线路中传递；*
    **line3：** *数据库密集型代码；需要更少的带宽，因为在线路中传递的数据更少*

我很好奇每行代码之间的内部情况。它们相对相似，**我得到了相同的确切结果**。

## 这里到底发生了什么（在 C# 及其特性的内部？）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T07:15:41.970

`.ToList()`方法使其可枚举并在那时生成 SQL。之后，您将使用 LINQ to Objects。

因此，例如，在第一行，您将获得整张桌子，因为您正在调用 `.ToList()`.`Customers`

这不是一个好的解决方案，因为您将整个记录都放入您的内存中，因此`.ToList()`如果之前没有理由调用它，请始终在查询结束时调用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T07:29:22.663

类似`.Where()`和`.OrderBy()`使用延迟执行的方法，这意味着它们在调用时所做的只是修改查询的表达式树——它们不会导致查询被执行。底层查询只有在被某些东西枚举时才会执行（例如，通过对其进行 foreach）。

`.ToList()`另一方面，它旨在返回查询结果的内存列表，也就是说，它实际上导致查询被执行。它在概念上类似于执行以下伪代码

```
foreach (item in query)
   list.add(item) 
```

在您的示例中，查询由 执行，`.ToList()`并且从那时起您正在执行新查询，这次是针对内存中的集合。

因此，在第一个示例中，客户查询由 ToList() 立即执行，`.Where()`并且`.OrderBy()`仅使用 Linq to objects 查询提供程序修改新的表达式树，并且此 Linq to objects 查询由`FirstOrDefault()`.

# .net - System.Data.SqlDbType.Structured 不是 System.Data.SqlDbType 的一部分

> ID：10136672
> 
> 赞同：1
> 
> 时间：2012-04-13T07:12:08.187
> 
> 标签：.net, .net-2.0

我有两个环境 locl 和 UAT，都有 asp.net 2.0，当我在本地访问 System.Data.SqlDbType.Structured 时它工作正常，而在 UAT 上它会抛出一个错误说

> System.Data.SqlDbType.Structured 不是 System.Data.SqlDbType 的一部分

当我在本地查看 System.Data 的版本时，它是 2.0.50727.3053 和 UAT 2.0.50727.832。

知道如何解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:14:23.333

这是在各种服务包之一中添加的——我**认为是**2.0 SP2（至少从 2008 年就已经存在，所以你的服务器似乎非常不寻常地没有打补丁......）。

解决此问题的最简单方法是安装 .NET 3.5 和所有服务包（考虑到通常的“升级服务器”预防措施）。

# java - 最小化 Tomcat“每个连接”的内存占用

> ID：10136681
> 
> 赞同：5
> 
> 时间：2012-04-13T07:12:40.833
> 
> 标签：java, sockets, tomcat, memory

我用 Java 构建了一个自定义消息服务器，它接收消息流并将每条消息传递给其客户端（1:1，如果未连接，则丢弃 msg - 非常简单）。我在 Win7x64 和 Java 7 上运行 Tomcat 7，并且正在使用 NIO 连接器（实现了 Comet servlet）。它工作得很好，但我现在正在研究扩展这个野兽，目前看到为每个连接的客户端分配了大约 85kb 的 RAM。10.000 个客户端 @ 小于 900MB 并线性扩展。（除了保持连接之外，我没有做任何其他事情）我认为这很重要，所以我想知道是否有一些调整可以使 Tomcat 或 Java 使用它们的 NIO impl 节省更多内存。到目前为止，我尝试的所有 Tomcat 设置都没有影响到这一点。

有没有人有经验如何将 Java 或 Tomcat 放在有关套接字连接的内存饮食中？

更新：通过修剪套接字缓冲区和其他一些 tomcat 内部，我现在低于 70kb/连接。不确定这现在如何影响吞吐量。我也在 32bit / 64bit linux 上尝试过，结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:16:09.960

经过相当多的研究和玩弄后，我得出的结论是，Tomcat 根本不可能用合理的内存量来处理大量并发连接。（顺便说一句，我仍然很高兴在这里被证明是错误的）

然而，有一个救星：

网络：[http ://www.jboss.org/netty/downloads](http://www.jboss.org/netty/downloads)

它是一个 Java IO 框架，建立在 Java 的新 NIO 架构之上，看起来设计和编写都非常好。您可以将一些轻量级模块堆叠在一起并创建一个迷你网络服务器，或者简单地自己以异步方式处理 TCP 连接。

我在 EC2 上运行了一个负载测试，并在只有 1.5GB 的 RAM 时达到了惊人的 700 万个连接！（就像 tomcat 测试一样，我只存储了连接，所以一个真正的应用程序当然会消耗更多的内存，但是 200 字节/连接的“开销”不算什么！）它只是停在那里，因为我限制了 Java VM到 1.5GB，我相信 C10M 测试很容易做到。

向 Netty 和 Java VM 家伙们致敬！我印象深刻。

# android - 如何使用内置框架对在 Android 中使用 HttpClient 的类进行单元测试？

> ID：10136682
> 
> 赞同：5
> 
> 时间：2012-04-13T07:12:43.980
> 
> 标签：android, unit-testing, httpclient

我有一堂课：

```
public class WebReader implements IWebReader {

    HttpClient client;

    public WebReader() {
        client = new DefaultHttpClient();
    }

    public WebReader(HttpClient httpClient) {
        client = httpClient;
    }

    /**
     * Reads the web resource at the specified path with the params given.
     * @param path Path of the resource to be read.
     * @param params Parameters needed to be transferred to the server using POST method.
     * @param compression If it's needed to use compression. Default is <b>true</b>.
     * @return <p>Returns the string got from the server. If there was an error downloading file, 
     * an empty string is returned, the information about the error is written to the log file.</p>
     */
    public String readWebResource(String path, ArrayList<BasicNameValuePair> params, Boolean compression) {
            HttpPost httpPost = new HttpPost(path);
            String result = "";

            if (compression)
                httpPost.addHeader("Accept-Encoding", "gzip");
            if (params.size() > 0){
                try {
                    httpPost.setEntity(new UrlEncodedFormEntity(params, "UTF-8"));
                } catch (UnsupportedEncodingException e1) {
                    e1.printStackTrace();
                }
            }

            try {
                HttpResponse response = client.execute(httpPost);
                StatusLine statusLine = response.getStatusLine();
                int statusCode = statusLine.getStatusCode();
                if (statusCode == 200) {
                    HttpEntity entity = response.getEntity();
                    InputStream content = entity.getContent();
                    if (entity.getContentEncoding() != null
                            && "gzip".equalsIgnoreCase(entity.getContentEncoding()
                                    .getValue()))
                        result = uncompressInputStream(content);
                    else
                        result = convertStreamToString(content);
                } else {
                    Log.e(MyApp.class.toString(), "Failed to download file");
                }
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            return result;
        }

    private String uncompressInputStream(InputStream inputStream)
            throws IOException {...}

    private String convertStreamToString(InputStream is) {...}

} 
```

我找不到使用标准框架对其进行测试的方法。特别是，我需要模拟从测试内部丢失的总互联网。

建议在执行测试时手动关闭模拟器中的 Internet。但在我看来，这不是一个很好的解决方案，因为自动测试应该是......自动的。

我在类中添加了一个“客户端”字段，试图从测试类内部模拟它。但是 HttpClient 接口的实现似乎相当复杂。

据我所知， [Robolectric](http://pivotal.github.com/robolectric/)框架允许开发人员测试[Http 连接。](https://github.com/pivotal/RobolectricSample/blob/master/src/test/java/com/pivotallabs/api/HttpTest.java)但我想有一些方法可以在不使用这么大的附加框架的情况下编写这样的测试。

那么是否有任何使用 HttpClient 的单元测试类的简单直接的方法？你是如何在你的项目中解决这个问题的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T12:28:18.393

> 我在类中添加了一个“客户端”字段，试图从测试类内部模拟它。但是 HttpClient 接口的实现似乎相当复杂。

我对这个说法有点困惑。从问题标题中，您正在询问有关单元测试 httpClint 的问题，通过模拟 FakeHttpClient 可以帮助您对除 httpClient 之外的应用程序的其他部分进行单元测试，但对单元测试 httpClient 没有任何帮助。您需要的是一个 FakeHttpLayer 用于对 httpClient 进行单元测试（无需远程服务器，需要网络，因此需要进行单元测试）。

**HttpClient 虚拟测试：**

如果您只需要在互联网丢失的情况下检查应用程序的行为，那么经典的 Android Instrument Test 就足够了，您可以在执行测试时以编程方式在模拟器中关闭互联网：

```
public void testWhenInternetOK() {
  ... ...
  webReader.readWebResource();
  // expect HTTP 200 response.
  ... ...
}

public void testWhenInternetLost() {
  ... ...
  wifiManager = (WifiManager) this.getSystemService(Context.WIFI_SERVICE); 
  wifiManager.setWifiEnabled(false);
  webReader.readWebResource();
  // expect no HTTP response.
... ...
} 
```

这要求远程 http 服务器已完全设置并处于工作状态，并且每当您运行测试类时，都会通过网络进行真正的 http 通信并访问 http 服务器。

**HttpClient 高级测试：**

例如，如果您想更精确地测试应用程序的行为，您想在您的应用程序中测试一个 http 调用，看看它是否正确处理不同的 http 响应。Robolectric 是最好的选择。您可以使用 FakeHttpLayer 并模拟您喜欢的任何 http 请求和响应。

```
public void setup() {
  String url = "http://...";
  // First http request fired in test, mock a HTTP 200 response (ContentType: application/json)
  HttpResponse response1 = new DefaultHttpResponseFactory().newHttpResponse(HttpVersion.HTTP_1_1, 200, null);
  BasicHttpEntity entity1 = new BasicHttpEntity();
  entity1.setContentType("application/json");
  response1.setEntity(entity1);
  // Second http request fired in test, mock a HTTP 404 response (ContentType: text/html)
  HttpResponse response2 = new DefaultHttpResponseFactory().newHttpResponse(HttpVersion.HTTP_1_1, 404, null);
  BasicHttpEntity entity2 = new BasicHttpEntity();
  entity2.setContentType("text/html");
   response2.setEntity(entity2);
  List<HttpResponse> responses = new ArrayList<HttpResponse>();
  responses.add(response1);
  responses.add(response2);
  Robolectric.addHttpResponseRule(new FakeHttpLayer.UriRequestMatcher("POST", url), responses);
}

public void testFoo() {
  ... ...
  webReader.readWebResource(); // <- a call that perform a http post request to url.
  // expect HTTP 200 response.
  ... ...
}

public void testBar() {
  ... ...
  webReader.readWebResource(); // <- a call that perform a http post request to url.
  // expect HTTP 404 response.
... ...
} 
```

使用 Robolectric 的一些优点是：

*   纯JUnit测试，无需仪器测试，无需启动模拟器（或真机）即可运行测试，提高开发速度。
*   最新的 Robolectric 支持单行代码来启用/禁用 FakeHttpLayer，您可以在其中设置 http 请求由 FakeHttpLayer 解释（不通过网络进行真正的 http 调用），或设置 http 请求绕过 FakeHttpLayer（通过网络执行真正的 http 调用）。查看[这个 SO question](https://stackoverflow.com/questions/9475998/is-it-possible-to-do-real-http-requests-with-robolectric/9476558#9476558)了解更多详情。

如果您查看 Robolectric 的源代码，您会发现自己正确实现 FakeHtppLayer 非常复杂。我建议使用现有的测试框架而不是实现自己的 API。

希望这可以帮助。

# javascript - 在集合中创建新实例后，不要在端点（骨干网）上执行 GET 请求

> ID：10136683
> 
> 赞同：0
> 
> 时间：2012-04-13T07:12:44.177
> 
> 标签：javascript, backbone.js

在将模型实例添加到集合后，我会执行 POST 请求来添加它。然后执行 GET 请求以从服务器获取模型。有没有办法不接受 GET 请求，只接受 POST 请求？另外，是否可以获取成功和错误回调函数来响应 POST 请求的成功和失败？

我想这样做是因为该集合有一个解析返回的 JSON 数据的 URL，因此 GET 请求不起作用，但 POST 请求确实起作用。我不想在不起作用的端点上发出 GET 请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T03:41:00.763

GET 请求是不必要的。在您的 POST 处理程序中的服务器上，您应该将 JSON 结果返回给代表模型的客户端。这在有生成的字段（例如 id）时特别有用。然后在成功回调的客户端上，您可以获取从 POST 返回的模型。

在以下示例中，如果成功，则将新模型添加到集合中。我还包括了错误回调，如果客户端验证失败或 POST 失败，它将触发：

```
var isNew = this.model.isNew();
this.model.save({}, {
    success: function(model, response) {
        if (isNew && this.collection) {
            this.collection.add(model);
        }   
    },
    error: function(model, response) {
        var errorMsg;
        // Response may be string (if failed client side validation or an AJAX response (if failed server side)
        if (_.isString(response))
            errorMsg = response;
        else
            errorMsg = response.responseText;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:34:50.760

您遵循的过程确实是不必要的。您应该`create`在集合上使用直接添加模型，并同时调用`sync`（在本例中为 POST）。

例如：

`collection.create({foo: 'bar'});`或者`collection.create(unsaved_model);`

调用的结果`create`将返回（保存的）模型或者`false`如果这不成功。此外，可以等待模型被保存`before`添加到集合中

```
collection.create({foo: 'bar'}, {wait: true}); 
```

[文档](http://documentcloud.github.com/backbone/#Collection-create)是你的朋友。

# ruby-on-rails - Rails 非阻塞帖子

> ID：10136689
> 
> 赞同：0
> 
> 时间：2012-04-13T07:13:16.127
> 
> 标签：ruby-on-rails, post, asynchronous, eventmachine

我需要在我的 Rails 应用程序中频繁地 POST 到另一台服务器，但这需要永远。问题是我不需要回应。有什么方法可以通过发送请求然后断开连接而不等待响应来加快速度，而不会进入延迟的工作或事件机器？如果这些是唯一的选择，我可以处理它，但不必这样做会使生活更简单。

这是我现在拥有的：

```
remoteAddress = 'http://remote.server.address/'

params = {
  'a' => a,
  'b' => b }

url = URI.parse(remoteAddress)
Net::HTTP.post_form(url, params) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:17:09.820

如果在调用之前实例化一个[Net::HTTP](http://ruby-doc.org/stdlib-1.8.7/libdoc/net/http/rdoc/Net/HTTP.html)对象，可以将其[read_timeout](http://ruby-doc.org/stdlib-1.8.7/libdoc/net/http/rdoc/Net/HTTP.html#method-i-read_timeout-3D)属性设置为一个非常小的数字，然后捕获生成的 Timeout::Error 异常并继续。

这是一个使用 URL 的各个部分和查询字符串格式的 POST 数据的示例：

```
endpoint = Net::HTTP.new(host, port)
endpoint.read_timeout = 0.001
endpoint.post(path, params_as_query_string) rescue Timeout::Error 
```

# objective-c - 如何在打开时更新 NSMenu？

> ID：10136692
> 
> 赞同：8
> 
> 时间：2012-04-13T07:13:25.610
> 
> 标签：objective-c, cocoa, nsmenuitem, nsmenu, nsstatusbar

我有一个动态添加 NSMenuItems 的 NSMenu。NSMenu 在保持打开状态时未正确刷新。我正在调用 NSMenu 更新方法`NSEventTrackingRunLoopModes`。

我已经实现了以下方法来更新 NSMenu。

```
- (void)menuNeedsUpdate:(NSMenu *)menu {
for (NSInteger index = 0; index < count; index++)
    [self menu:menu updateItem:[menu itemAtIndex:index] 
                       atIndex:index 
                  shouldCancel:NO];
}

- (BOOL)menu:(NSMenu *)menu updateItem:(NSMenuItem *)item atIndex:(NSInteger)index shouldCancel:(BOOL)shouldCancel`

- (NSInteger)numberOfItemsInMenu:(NSMenu *)menu 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-16T17:03:05.980

更新菜单项`NSEventTrackingRunLoopMode`解决了这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T14:50:11.527

> 我在计时器中动态填充菜单项，并且 NSMenu 在打开时没有更新。

确保在相应的运行模式下触发计时器：

```
[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

你可能现在才开火`NSDefaultRunLoopMode`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:27:27.177

你遗漏了一堆代码。但是，您不应该调用`-menu:updateItem:atIndex:shouldCancel:`. 这是您应该实现的方法，框架应该调用它。

此外，通常您只假设实现和中的*一个* `-menuNeedsUpdate:` *或*两个。实现所有三个没有多大意义。如果您可以立即构建菜单，则可以实施前者。如果构建菜单需要一些时间，您可以实现后两者。`-numberOfItemsInMenu:``-menu:updateItem:atIndex:shouldCancel:`

最后，所有这些方法都被记录为“当菜单即将显示时”。在菜单打开时他们没有被重复调用，我并不感到非常惊讶。

如果您知道菜单需要更新，您可以尝试调用`-[NSMenu update]`. 这可能会引发它调用您的委托方法。我很确定您也可以只调用方法`NSMenu`并`NSMenuItem`修改菜单，而无需等待调用您的委托。

# android - Android地图未加载

> ID：10136694
> 
> 赞同：0
> 
> 时间：2012-04-13T07:13:36.520
> 
> 标签：android, android-mapview, android-viewpager

我的应用程序中有一个奇怪的情况：使用生成正确 API 密钥的发布密钥构建应用程序后，我仍然无法加载地图。有时它工作正常，有时它不是。

问题出现在 ViewPager 上的地图上。应用程序还有其他 MapActivity。当用户从 ViewPager 打开地图，然后使用 MapActivity 将屏幕更改为一个并返回 ViewPager 时，似乎会出现问题。

任何想法为什么会发生这种情况？以及如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:17:51.360

您的问题可能是因为从[规范](http://code.google.com/android/add-ons/google-apis/reference/com/google/android/maps/MapActivity.html)：

*每个进程只支持一个 MapActivity。同时运行的多个 MapActivity 可能会以意想不到的方式干扰。*

# c# - 检查 Outlook 邮件 (*.msg) 是否经过数字签名或加密

> ID：10136697
> 
> 赞同：3
> 
> 时间：2012-04-13T07:13:54.850
> 
> 标签：c#, .net, encryption, digital-signature

我有一个允许通过文件上传上传 Outlook 邮件 (*.msg) 的 Web 应用程序。客户希望禁止存储数字签名或加密的邮件。因此，在上传邮件后，我应该检查邮件是否已签名或加密。

如果有办法检查吗？就像文件流中的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T22:01:02.653

检查英文单词不仅是有效的，而且是实际记录的方式。

参考权威：

[2.1.3.1.3 识别表示清晰签名消息的消息对象](http://msdn.microsoft.com/en-us/library/ee202946%28v=exchg.80%29.aspx)

> 如果消息对象的消息类（PidTagMessageClass 属性（[MS-OXCMSG] 第 2.2.1.3 节））值为“IPM.Note.SMIME.MultipartSigned”并且只包含一个附件对象，则应将其视为明文签名信息。可以执行其他验证步骤来验证 Attachment 对象是否标记有适当的媒体类型（例如，PidTagAttachMimeTag 属性（[MS-OXPROPS] 第 2.680 节）的值为“multipart/signed”）并表示有效的多部分/signed MIME 实体，如 [RFC1847] 中指定的那样。如果消息类值不是“IPM.Note.SMIME.MultipartSigned”但它以后缀“.SMIME.MultipartSigned”结尾，则消息对象可以<7><8>被视为明文签名消息。
> 
> 如果消息类值为“IPM.Note.SMIME.MultipartSigned”的消息对象不具有第 2.1.3.1 节中指定的结构，则行为未定义。

[2.1.3.2.3 识别表示不透明签名或加密 S/MIME 的消息对象](http://msdn.microsoft.com/en-us/library/ee219897%28v=exchg.80%29.aspx)

> 如果消息对象具有“IPM.Note.SMIME”的消息类（PidTagMessageClass 属性（[MS-OXCMSG] 部分 2.2.1.3））值，并且只包含一个附件对象，则应将其视为不透明签名消息或加密的消息。可以执行其他验证步骤来验证附件对象是否标记有适当的媒体类型（例如，PidTagAttachMimeTag 属性（[MS-OXPROPS] 第 2.680 节）是“application/pkcs7-mime”或“application/x- pkcs7-mime”，或者它是“application/octet-stream”和文件名，由 PidTagAttachFilename 属性（[MS-OXPROPS] 第 2.671 节）指定，文件扩展名为“.p7m”），表示有效的加密或不透明签名的消息，如 [RFC3852] 中所述。
> 
> 消息类别值“IPM.Note.SMIME”可能不明确。<12>
> 
> 如果消息对象的消息类值为“IPM.Note.SMIME”，但不具有第 2.1.3.2 节中指定的适当结构或内容，则行为未定义。

**编辑：**

更具体地说，是的，您应该寻找“文件流中的模式”。

具体来说，如果 MSG 是 unicode，您将扫描“__substg1.0_001A001F”流，并检查上述模式。

MSG 文件是包含流和存储的 OLE 结构化存储文件。如果您在 C# 世界中，请使用 OLE 存储库，如[OpenMCDF 。](http://sourceforge.net/projects/openmcdf/)java、python等也有类似的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:54:55.020

[这篇博客文章](http://blogs.msdn.com/b/openspecification/archive/2009/11/06/msg-file-format-part-1.aspx)很好地描述了格式，同一作者的[另一篇文章](http://blogs.msdn.com/b/openspecification/archive/2010/06/20/msg-file-format-rights-managed-email-message-part-2.aspx)准确地描述了您所追求的内容，即有关权限管理邮件的信息。

基本上只要消息符合[文件格式](http://msdn.microsoft.com/en-us/library/cc463912%28v=EXCHG.80%29.aspx)，这些帖子和规范就应该为您提供检查签名和加密所需的一切。

检查英语单词是个坏主意。如果用户不使用英语写作，如果加密数据的伪随机流碰巧在他们使用的某种编码中创建了诸如“或”或“和”之类的词怎么办？这只是不可靠。

**编辑：**

当我说检查英语单词是一个坏主意时，为了澄清我的意思，我的意思是说简单地扫描文件并验证是否存在一组特定的单词是个坏主意。由于有人对这个解决方案投了反对票，我觉得他们可能因为这种模棱两可而误解了我所说的。

正如另一位用户在他们的回答中指出的那样，将对象解析出来并实际处理数据中的条件是可以的。您可以从他们的帖子中看到它是记录在案的方法并且工作正常，因为它基于标准。这与我在这两个帖子和格式规范中提供的信息相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:12:05.927

要打开邮件并查看，我建议您使用[Outlook Redemption](http://www.dimastr.com/redemption)。这是我使用的，它可以在服务器上没有安装 Outlook 的情况下工作。如果 GetMessageFromMsgFile 方法返回 RDOEncryptedMessage，则表示您的邮件已加密或签名。

# c# - Gridview: Sql Update 语句 "Where RowID=Current editing row number" ，如何在更新语句中设置？

> ID：10136705
> 
> 赞同：0
> 
> 时间：2012-04-13T07:14:44.393
> 
> 标签：c#, asp.net, sql

我有一个简单的 gridview 和 sqldatasource 来将数据从数据表绑定到 gridview。

*   // “Column”是一列，类型：int，递增一，主键

// ID 只是一个列类型 int 这是我在行更新事件中的代码：

```
 string con = "conn string";

            string sqlQuery = "Update TableName set Column = @Column WHERE RowID = '1' (//here I need to get the current editing row number)";
            using (SqlConnection dataConnection = new SqlConnection(con))
            {
                using (SqlCommand dataCommand = new SqlCommand(sqlQuery, dataConnection))
                {
                    int vas = 121;
                    dataCommand.Parameters.AddWithValue("Column", vas);
                    dataConnection.Open();
                    dataCommand.ExecuteNonQuery();
                    dataConnection.Close();

                }

            } 
```

以下是我的问题：

1.对于这段代码：string sqlQuery = "UPDATE mytable SET ID = '131' WHERE No = '1'";

*   我不想设置 No fixed ，我想像这样设置 No=CurrentEditingRowNumber 但我不知道如何做到这一点并使其工作。
*   我知道如何获得当前的编辑（这样想）： GridViewRow row = GridView1.Rows[e.RowIndex];
*   但我不知道如何在更新语句中使用它

2.对于上面的代码，如果我在浏览器中打开它，假设有 2 行（ 1 和 2 ），我的代码说如果 No = 1 则更新。

如果按更新到第一行没有任何反应，但是如果我从第二行按更新，则代码将在第一行执行，因为它是编码的..我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:24:36.917

使用 CommandArgument 并在 Gridview onrowcommand 事件中获取该值。

```
<asp:LinkButton ID="btnUpdate" runat="server" CommandArgument='<%#Eval("RowID")%>' CommandName="btnUpdate" Text="Update">

  protected void GridView_RowCommand(Object sender, GridViewCommandEventArgs e)
  {
    if(e.CommandName=="btnUpdate")
    {
      int index = Convert.ToInt32(e.CommandArgument);
      string sqlQuery = "Update TableName set Column = @Column WHERE RowID = index;
      //now bind your gridview here using index id.
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:28:06.417

您需要在 gridview 设置中指定更新 ID。这里我给你一个小demo

```
<asp:ImageButton ID="imgBtnEdit" runat="server" CommandArgument="<%# ((GridViewRow) Container).RowIndex %>" ToolTip="Edit Record" ImageUrl="~/images/edit.gif" OnClick="imgEdit_OnClick" /> 
```

和 Onclick 事件您执行您的操作

```
 protected void imgEdit_OnClick(object sender, ImageClickEventArgs e)
    {
        ImageButton im1 = (ImageButton)sender;
        GridViewRow grv1 = (GridViewRow)im1.Parent.Parent;
        string id = grv1.Cells[0].Text.ToString();
        // pass this Id value into your query string for update operation. better way you follow three-tier architecture.
    } 
```

如果您还有其他需要，可以在这里回复。

# objective-c - 如何从 ID 号获取对象实例的信息

> ID：10136710
> 
> 赞同：0
> 
> 时间：2012-04-13T07:15:34.380
> 
> 标签：objective-c, xcode, cocoa, instance, tableview

我有一个程序，在两个不同的窗口上有 2 个表。一张表保存客户姓名和 ID 号，另一张保存项目名称和编号。它们既存储在数组中，也存储在 .plist 文件中。

我想做的是在第三页上会有一个销售页面，用户将在其中输入客户 ID 和项目 ID，程序应该能够找到名称并将其显示到标签上。我不知道从哪里开始。有人可以帮忙或告诉我该怎么做吗？我可以上传任何人想看到的任何代码，但由于我不知道从哪里开始，我不知道要上传什么。
这是 customer.h 文件

```
#import <Foundation/Foundation.h>
NSString *name;
int memberNumber;

@interface Customer : NSObject <NSCoding>
{
NSString *name;
int memberNumber;

}
@property (nonatomic, copy) NSString *name;
@property int memberNumber;

@end 
```

这是客户.m

```
#import "Customer.h"

@implementation Customer

@synthesize name;
@synthesize memberNumber;

-(id) init
{
self = [super init];
if(self) 
    {
    name = @"Test";
    int i = arc4random()%1000000000000000000;
    if (i<0) 
        {
        memberNumber = i*-1;
        }
    else
        memberNumber = i;
}
return self;

}

- (id)initWithCoder:(NSCoder *)decoder 
{
if (self = [super init]) 
{
    self.name = [decoder decodeObjectForKey:@"name"];
    self.memberNumber = [decoder decodeIntForKey:@"memberNumber"];

}
return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder 
{
[encoder encodeObject:name forKey:@"name"];
[encoder encodeInt:memberNumber forKey:@"memberNumber"];

}

-(void)dealloc
{
[name release];
[super dealloc];
}

@end 
```

这是 tableView.h 文件

```
#import <Foundation/Foundation.h>
#include <stdlib.h>
NSString *filepath; 
@interface tableViewData : NSObject <NSTableViewDataSource> 
{
@private
    IBOutlet NSTableView *tableView;
    NSMutableArray *list;
    NSString *filepath; 

}
-(IBAction)add:(id)sender;
-(IBAction)remove:(id)sender;

@end 
```

这是 tableView.m 文件

```
#import "tableViewData.h"
#import "Customer.h"
@implementation tableViewData

-(void)awakeFromNib{
filepath = @"/Users/Desktop/CustomerNames.plist";
if ([[NSFileManager defaultManager]fileExistsAtPath:filepath]) 
{
    NSMutableArray *archive = [NSKeyedUnarchiver unarchiveObjectWithFile:filepath];
    list = archive;
}
else
    list=[[NSMutableArray alloc]init];
}

-(NSInteger)numberOfRowsInTableView:(NSTableView *)tableView
{
return [list count];
}

-(id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
Customer *Customer = [list objectAtIndex:row];
NSString *identifier = [tableColumn identifier];
return [Customer valueForKey:identifier];
}

-(void)tableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:     (NSTableColumn *)tableColumn row:(NSInteger)row
{
Customer *Customer = [list objectAtIndex:row];
NSString *identifier = [tableColumn identifier];
[Customer setValue:object forKey:identifier];
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:list];
[data writeToFile:filepath options:NSDataWritingAtomic error:nil];
}

-(IBAction)add:(id)sender
{
[list addObject:[[Customer alloc]init]];
[tableView reloadData];
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:list];
[data writeToFile:filepath options:NSDataWritingAtomic error:nil];
for (id name in list)
    NSLog(@"obj: %@", name);
NSLog (@"array:%@",list);

}

-(IBAction)remove:(id)sender
{
NSInteger row = [tableView selectedRow];
if (row != -1) 
{
    [list removeObjectAtIndex:row];
}

[tableView reloadData];
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:list];
[data writeToFile:filepath options:NSDataWritingAtomic error:nil];

}

-(void)dealloc
{
[super dealloc];
}

@end 
```

希望这可以帮助

（用于 OS X 的 xcode 4.2.1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:08:52.840

If items you loaded to table are at the same order in your table you can use

```
 [myArray objectAtIndex:[indexPath row]]; 
```

Then use can use the variables of the array that you needed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:27:25.200

首先在该代码中：

```
 -(void)tableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:                   (NSTableColumn *)tableColumn row:(NSInteger)row
          {
   Customer *Customer = [list objectAtIndex:row];
   NSString *identifier = [tableColumn identifier];
   [Customer setValue:object forKey:identifier];
   NSData *data = [NSKeyedArchiver archivedDataWithRootObject:list];
   [data writeToFile:filepath options:NSDataWritingAtomic error:nil];
   } 
```

将客户*客户更改为客户*客户始终使用这种方式。

然后使用该方法来了解选择了哪一行。在您的情况下，选择了哪个客户。我从您的代码中了解到，每一行都有一个客户，这些客户在您的列表数组中。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
      //with this code you can get the selected customer from your list,
      Customer *customer=[list objectAtIndex:[indexPath row]];

    } 
```

然后你可以达到客户的价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:49:13.707

例如：

```
if([myNumber isKindOfClass:[NSNumber class]])
{
    //do something here
} 
```

检查对象 myNumber 是否是 NSNumber 类对象。当然，你可以使用任何你想要的类。阅读[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)

# sql-server-2005 - 在 SQL Server 2005 中删除列周围的 []

> ID：10136726
> 
> 赞同：30
> 
> 时间：2012-04-13T07:16:32.023
> 
> 标签：sql-server-2005, square-bracket

当我在 SQL Server 中重命名列时，我不小心在列周围插入了方括号。我使用的实际语句是：

```
SP_RENAME 'customer.[EMPLOYEENAMES]', '[EMPLOYEENAME]', 'COLUMN' 
```

但是当我尝试检索它刚刚说的数据时，我什至尝试不使用方括号，它给出了同样的错误

> 列名“[EMPLOYEENAME]”无效。

我应该如何删除方括号。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-13T07:34:09.917

这将恢复您数据库中的顺序：

```
EXEC SP_RENAME 'customer."[EmployeeName]"', 'EmployeeName','COLUMN' 
```

您不能使用双括号，因为它会返回语法错误。引号绕过了这个限制。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T07:31:19.470

由于您现在有一个名称本身带有方括号的列，因此您可以通过以下方式访问该列：

```
SELECT [[EmployeeName]]] 
FROM Customer 
```

是的，所有这些额外的方括号有点笨拙:)

因此，我将再次重命名您的列以删除括号：

```
EXEC SP_RENAME 'customer.[[EmployeeName]]]', 'EmployeeName','COLUMN' 
```

所以你可以参考“正常”：

```
SELECT EmployeeName
FROM Customer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T20:10:05.053

给定的替代方案都不适合我，所以我必须创建一个具有正确名称的新列，执行更新设置 newName = [[badName]]]，然后删除错误命名的列。

# javascript - 带有 HTML5（Stepcarousel）的网站在 IE 中速度慢？

> ID：10136727
> 
> 赞同：0
> 
> 时间：2012-04-13T07:16:36.170
> 
> 标签：javascript, performance, html, internet-explorer

请在 IE 和 Chrome/Firefox 中查看此页面：http: [//goo.gl/kR2Cv](http://goo.gl/kR2Cv)

在 Chrome/Firefox 中它加载速度很快并且工作正常，但在 Internet Explorer 中它加载很慢并且非常滞后。在页面中，我使用 HTML5 和 jquery/stepcarousel 以及很多图像。整个网站只是一个 html 页面。

我不明白为什么它在 Chrome/Firefox 中运行良好，但在 Internet Explorer 中却不行？有人可以向我指出这一点并可能帮助我解决问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:25:43.093

Internet Explorer 在版本 9 之前有一个臭名昭著的引擎。除了在支持现代标准方面远远落后之外，它也很慢。然而，版本 9 及更高版本已显着改进，因此，您的网站在 IE9、Firefox 和 Chrome 中运行同样流畅。但是，在 IE8 中，正如您所说，它运行得非常慢。

如果您想支持 IE8，也许您可​​以为这些用户选择一个不太注重效果的设计，以保持最佳性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:39:09.750

你的网站太重了**。**它接近 3mb，在 Chrome 上加载需要 12 秒（10mbps 连接）。您应该避免下载所有这些背景图片，直到需要它们，并优化它们（使用 ImageOptim、PunyPNG 或类似的，您将不得不为 JPEG 牺牲一点质量）。在主页上瞄准 <600kb。

较旧的 IE 版本的并行下载限制低于现代浏览器，并且可能会因加载的图像数量而窒息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:32:51.533

由于我的连接速度较慢，FF 加载页面的速度比 IE9 快十倍。我认为您的文件格式有问题。下面的代码是您的代码片段：

`klÃ¤der fÃ¶r dam och barn, frÃ¥n idÃ©`

确保以`DOS/Windows`或- 模式保存文件`ANSI`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T08:12:54.660

IE8 需要大量 HTML 才能同时移动。那是一个表格布局可能没有帮助。表格往往会触发更多的回流计算。

这里有很多关于这个主题的好建议：

[http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/](http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/)

# javascript - 在 raphaeljs 中，有没有办法在对象中放置文本以保持翻转状态

> ID：10136730
> 
> 赞同：1
> 
> 时间：2012-04-13T07:16:42.960
> 
> 标签：javascript, oop, svg, raphael

在使用 raphael js 创建 svg 地图时，我有悬停状态。我是如何尝试将国家名称写到地图上的。我面临的问题是名称成为自己的对象并阻止国家/地区，因此当光标直接位于文本上方时，我松开悬停并单击。有没有一种方法可以让我绘制文本而不让它挡住地图。我试过 set() 但没有成功。

谢谢，

我在下面没有包含 text() 或 print() ：

```
var r = Raphael('map', 1450, 2180);
    arr = new Array();

for (var country in paths) {

    var obj = r.path(paths[country].path);
    countryName = paths[country].name;
    color = paths[country].color;
    scolor = paths[country].stroke;

    obj.attr({fill:color,stroke:scolor,
        'stroke-width': 1,
        'stroke-linejoin': 'round'});

    arr[obj.id] = country;

    obj
    .hover(function(){
        console.log(arr[this.id]);
        this.animate({
            fill: paths[arr[this.id]].hover
        }, 300);

    }, function(){
        this.animate({
            fill: paths[arr[this.id]].color
        }, 300);
    })
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:33:17.177

尝试将`pointer-events`属性设置`none`为文本元素。
文档：
[http ://www.w3.org/TR/SVG/interact.html#PointerEventsProperty](http://www.w3.org/TR/SVG/interact.html#PointerEventsProperty)

# jquery - HTML5如何将本地数据库绑定到asp gridview

> ID：10136736
> 
> 赞同：5
> 
> 时间：2012-04-13T07:17:23.563
> 
> 标签：jquery, html, gridview

我有一个带有 HTML5 和本地数据库的站点，我想使用 jquery 代码将本地数据库中的表绑定到 asp gridview，我该怎么做>

有没有人有一个例子？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:09:25.090

尝试为此使用 DataTables.net。

我将它用于我的一些项目并且效果很好，也有大量的插件。

[http://datatables.net/release-datatables/examples/data_sources/ajax.html](http://datatables.net/release-datatables/examples/data_sources/ajax.html)

该示例将向您展示如何将数据表绑定到 ajax 请求。

只需创建一个 JSONResult 操作，该操作将返回所需的结构并将其绑定。

希望对您有所帮助，祝您好运。

# c# - 检查重启

> ID：10136737
> 
> 赞同：0
> 
> 时间：2012-04-13T07:17:25.437
> 
> 标签：c#, .net, installation

我目前正在开发一个安装支持程序，该程序在安装后执行一些重要任务。现在我遇到了问题，如果需要重新启动，我真的需要确定。

我目前的代码看起来像这样（用于检查）：

```
try
{
    bool restart = false;

    Console.WriteLine("Prüfe auf Neustart...");

    SystemInformation t = new SystemInformation();
    if (t.RebootRequired){
        restart = true;
    }

    RegistryKey rk = null;
    rk = Registry.LocalMachine;
    rk = rk.OpenSubKey(@"SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce");

    string[] r = rk.GetValueNames();

    if (r.Length != 0) { restart = true; }

    rk = Registry.CurrentUser;
    rk = rk.OpenSubKey(@"SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce");

    r = rk.GetValueNames();

    if (r.Length != 0) { restart = true; }

    if (restart == true)
    {
        Console.WriteLine("Bitte starten Sie Ihren Rechner zuerst neu und führen das Setup dann nochmal aus...");
        Console.ReadKey();
        Environment.Exit(0);
    }
}
catch (Exception ex)
{
    Console.WriteLine(ex.Message);
} 
```

这足够还是我必须做更多/其他检查？

# asp.net - 在 web.config 中添加配置时，带有 webHttpBinding 的 WCF 服务不起作用

> ID：10136739
> 
> 赞同：0
> 
> 时间：2012-04-13T07:17:33.257
> 
> 标签：asp.net, wcf, web-services, webhttpbinding

我有一个非常基本的 WCF 服务，我想在 IIS 上作为 RESTful 服务运行。这是服务合同。

```
[ServiceContract]
interface IRestCameraWs
{
   [OperationContract]
   [WebGet(UriTemplate = "/cameras/{username}",ResponseFormat = WebMessageFormat.Xml,
            BodyStyle = WebMessageBodyStyle.Wrapped)]
   CameraInfo[] GetUserCameras(string username);

   [OperationContract]
   [WebGet(UriTemplate = "/liveimage/{cameraId}",ResponseFormat = WebMessageFormat.Xml,
            BodyStyle = WebMessageBodyStyle.Wrapped)]
   byte[] GetLiveImage(int cameraId);

   //void GetLatestImage(int cameraId, out DateTime timestamp, out byte[] image);

   [OperationContract]
   [WebGet(UriTemplate = "/latestimage/{cameraId}", ResponseFormat = WebMessageFormat.Xml,
            BodyStyle = WebMessageBodyStyle.Wrapped)]
   string GetLatestImageUrl(int cameraId);
} 
```

有一个实现这个契约的类叫做`StopMotion.Business.WCFService.RestCameraWs`. 然后我`.svc`在我的 web 项目中添加了一个带有以下标记的文件。

```
<%@ ServiceHost Service="StopMotion.Business.WCFService.RestCameraWsBase"%> 
```

当我导航到此服务 url 时，它会显示服务主页和指向 wsdl 定义的链接。但是，当我在`web.config`文件中添加配置以配置此服务时，`webHttpBinding`我从 IIS express 收到以下错误页面。

![在此处输入图像描述](../Images/da9e55b27ed2110841258b5513e321e0.png)

首先，我认为我在配置方面做错了。后来我删除了配置，只是在 svc 文件中更改了工厂，例如

```
<%@ ServiceHost Factory="System.ServiceModel.Activation.WebServiceHostFactory" Service="StopMotion.Business.WCFService.RestCameraWsBase"%> 
```

`WebServiceHostFactory`据说`webHttpBinding`默认使用，我们不需要在配置中添加它，除非我们需要更多的东西。但是更改工厂也会导致 IIS Express 上出现相同的错误页面。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:39:53.253

查看我的配置，我记得我必须在 web.config 中声明端点并在行为中启用 WebScript。部分结果看起来有点像：

```
 <endpoint address="json" binding="webHttpBinding" contract="svcservice.svc.IAuthsvc" bindingConfiguration="bc.svcservice.svc.AuthsvcJSON" behaviorConfiguration="epb.svcservice.svc.AuthsvcJSON"/>      
    .
    .
    .
    .
    <behavior name="epb.svcservice.svc.AuthsvcJSON">
      <enableWebScript/>
    </behavior> 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:02:42.313

问题出在我的方法签名上。我们只能`string`包含包含在其中的类型参数，`UriTemplate`而某些方法接受`int`如下类型的参数。

```
[OperationContract]
        [WebGet(UriTemplate = "/latestimage/{cameraId}",ResponseFormat = WebMessageFormat.Xml,
            BodyStyle = WebMessageBodyStyle.Wrapped)]
        string GetLatestImageUrl(int cameraId); 
```

当我在 vs 开发服务器上调试它时，它为我在线放置了错误，但似乎即使在开发环境中，在 IIS Express 中观察错误也更加困难。

# php - php mysql时间戳仅适用于更新

> ID：10136740
> 
> 赞同：0
> 
> 时间：2012-04-13T07:17:34.083
> 
> 标签：php, mysql

我在我的 mysql 数据库中使用时间戳类型列，并且我启用了自动更新时间戳的选项，但时间戳仅适用于更新命令而不适用于插入

我正在使用navicat mysql客户端

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:22:15.603

尝试将**当前时间戳**分配为默认值，同时启用自动更新。那应该对你有用。请参阅：[current_timestamp](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_current-timestamp)

你的意思是这样的吗。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:22:44.560

要将任一表中的 TIMESTAMP 列设置为插入时的当前时间戳，请显式为其分配该值。

```
INSERT INTO t1 VALUES (NOW());
INSERT INTO t2 VALUES (CURRENT_TIMESTAMP); 
```

[http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:22:48.410

将列默认值设置为 CURRENT_TIMESTAMP。

如果您使用服务器端语言将数据插入表中，则只需将当前日期插入该列即可。例如，在 PHP 中，这将是

```
<?php
$time = time();
?> 
```

# video - 如何在lwit中获得本机视频播放器的默认视频控制？

> ID：10136744
> 
> 赞同：2
> 
> 时间：2012-04-13T07:17:58.927
> 
> 标签：video, lwuit, mmapi

下面是我用来在本机视频播放器中播放视频的代码。但我没有得到任何默认控制，如停止、暂停、播放。

我在这里错过了什么？如果我的代码是错误的，那么正确的代码是什么？

```
vc = VideoComponent.createVideoPeer("http://localhost/test.mp4"); 
vc.setFullScreen(true);
player = (Player) vc.getNativePeer();
player.realize();
addComponent(vc);
vc.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:19:19.040

通常你应该调用 vc.stop() 等来执行视频控制的操作。我认为有一种方法 getInternal() （或 getNative 我不太记得了，因为我们在[Codename One](http://www.codenameone.com/)中删除了这个类）来访问本机控件。

# .htaccess - 在 .htaccess 文件中使用“允许来自” - 要输入什么 IP？

> ID：10136745
> 
> 赞同：1
> 
> 时间：2012-04-13T07:18:00.440
> 
> 标签：.htaccess

这是我的 htaccess 文件：

```
AuthType Basic
AuthName “Sorry, Restricted Area!”
AuthUserFile /path/to/your/.htpasswd
Require valid-user
Allow from 123.45.67.890
Satisfy Any 
```

我的问题是关于 Allow from line ... 我在这里给出的 IP 是呼叫者 IP，不是吗？这个 htaccess 文件在我的服务器上，它的 IP 为 123.45.67.890，但是一旦我激活了这个 htaccess，我就可以从任何地方调用它保护的网站，而不仅仅是从服务器本身调用，这是计划。我这样称呼它：http: [//123.45.67.890/website](http://123.45.67.890/website) ...问题是，为什么我可以从任何计算机上调用它，即使它有IP限制？该站点只能从服务器本身调用。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:28:25.400

因为你需要首先否认：

```
order deny,allow
deny from all
allow from 888.888.888.888 
```

# iphone - 全屏缩放平移在 iphone 中使用 UIScrollView

> ID：10136748
> 
> 赞同：0
> 
> 时间：2012-04-13T07:18:07.593
> 
> 标签：iphone, image, zooming, fullscreen, photo

我遵循了一个示例代码，用于创建一个简单的图像视图缩放/平移页面，但它会让 navigationController 返回主页。我已将导航栏设置为 0.3。但是在导航栏下面，我看不到图片内容。我研究了reseaon，框架和边界是320 * 480。同样在 xib 文件中，将“状态栏”更改为无。这没用。我怎样才能像原生照片应用程序一样全屏查看图像。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:24:18.240

只需提供一个新的tapguesture，它为用户提供隐藏导航栏的工具，然后再次点击该栏再次显示

# c++ - 在 CUDA 线程中填充计数“桶”

> ID：10136750
> 
> 赞同：4
> 
> 时间：2012-04-13T07:18:27.780
> 
> 标签：c++, algorithm, cuda

在我的程序中，我通过体素网格跟踪大量粒子。粒子与体素的比率是任意的。在某个时刻，我需要知道哪些粒子位于哪些体素中，以及有多少。具体来说，体素必须准确地知道其中包含哪些粒子。由于我不能`std::vector`在 CUDA 中使用任何东西，我正在使用以下算法（在高级别）：

*   分配与体素数量大小相同的整数数组
*   为所有粒子启动线程，确定每个粒子所在的体素，并在我的“桶”数组中增加适当的计数器
*   分配一个指针数组大小的粒子数
*   计算每个体素在这个新数组中的偏移量（将其前面的体素中的粒子数相加）
*   将粒子以有序的方式放置在数组中（我稍后会使用这些数据来加速操作。速度的提高非常值得增加内存使用量）。

但是，这在第二步上就崩溃了。我很久没有在 CUDA 中编程了，只是发现线程之间同时写入全局内存中的同一位置会产生未定义的结果。这反映在我主要得到 1 的事实中`buckets`，偶尔会得到 2。这是我用于此步骤的代码的草图：

```
__global__ void GPU_AssignParticles(Particle* particles, Voxel* voxels, int* buckets) {
    int tid = threadIdx.x + blockIdx.x*blockDim.x;

    if(tid < num_particles) { // <-- you can assume I actually passed this to the function :)
        // Some math to determine the index of the voxel which this particle
        // resides in.
        buckets[index] += 1;
    }
} 
```

我的问题是，在 CUDA 中生成这些计数的正确方法是什么？

另外，有没有办法在体素中存储对粒子的引用？我看到的问题是体素中的粒子数量不断变化，因此几乎每一帧都必须重新分配和重新分配新数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:32:03.527

尽管可能有更有效的解决方案来计算存储桶计数，但第一个可行的解决方案是使用您当前的方法，但使用原子增量。这样，一次只有一个线程自动增加存储桶计数（在整个网格上同步）：

```
if(tid < num_particles) {
    // ...
    atomicAdd(&buckets[index], 1);
} 
```

# android - android中的自定义形状

> ID：10136751
> 
> 赞同：-1
> 
> 时间：2012-04-13T07:18:32.257
> 
> 标签：android, xml, android-layout, shape, android-xml

我想制作一个像图像中一样的自定义形状，但我不知道如何开始，请有人帮忙

![在此处输入图像描述](../Images/f3e2b262f057d6e697138d7eca0e9273.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:28:52.073

[文档](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)不够？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:29:46.850

我认为你必须处理图像。

你可以像这样为“head box”创建一个单独的xml

```
<linear layout>
 <text view background="dark-grey" text = "o nuts"/>
 <image view src="blue line" />
 <linear layout>
   <image view src="donut" />
   <linear layout>
     <text view text="price" />
     <text view text="date" />
   </linear layout>
   <image view src="box_border_shadow_lines" />
 </lienar layout>
</linear layout> 
```

有些人认为文章类似......

注意这不是有效的xml :) 只是一些提示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:32:25.733

您在图像顶部显示的部分是操作栏，您可以开始学习如何制作操作栏。我有一个动作栏的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T13:48:22.803

哪一个？带有“兑换”按钮的图像底部的形状？

# java - 如何在 Java 中使用预先存在的 unix 库

> ID：10136752
> 
> 赞同：2
> 
> 时间：2012-04-13T07:18:36.877
> 
> 标签：java, linux, unix

我使用以下代码对我的应用程序没有任何问题。

```
inputstream = Runtime.getRuntime().exec("/system/bootmenu/recovery/sbin/tune2fs -l /data.img").getInputStream(); 
```

然而最近 tune2fs 可执行文件被 tune2fs 库取代。我不能再让这个代码工作了。

我试过 ：

```
inputstream = Runtime.getRuntime().exec("/system/bootmenu/recovery/sbin/tune2fs -l data.img",new String[]{"LD_LIBRARY_PATH=/system/bootmenu/recovery/sbin:$LD_LIBRARY_PATH"}).getInputStream(); 
```

但是没有成功，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:24:40.847

我建议使用[`ProcessBuilder`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)而不是`Runtime`：

```
ProcessBuilder pb = new ProcessBuilder("/system/bootmenu/recovery/sbin/tune2fs", "-l", "data.img");
Map<String, String> env = pb.environment();
env.put("LD_LIBRARY_PATH", "/system/bootmenu/recovery/sbin:" + env.get("LD_LIBRARY_PATH"));
pb.directory(new File("/mnt/sdcard/multiboot/MIUI/"));
Process p = pb.start(); 
```

# liferay - 是否可以在 Liferay 的创建用户下添加额外字段

> ID：10136753
> 
> 赞同：10
> 
> 时间：2012-04-13T07:18:37.553
> 
> 标签：liferay, liferay-6

我正在使用 Liferay 6 进行门户开发。在 Liferay 下创建用户期间，我还需要添加一些额外的字段？？请让我知道这是否可能？

请参阅此处附上的屏幕截图，也请告诉我这将存储在数据库中的哪个表中？

![在此处输入图像描述](../Images/2fd8d4f943649a326cacfc97f763fc3b.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T08:58:50.523

是的，您可以为 liferay 实体（在您的情况下为用户）使用[自定义属性功能](http://www.liferay.com/community/wiki/-/wiki/Main/How+to+use+Custom+Attributes+to+enhance+Users) ，并且可以根据需要为每个 liferay 实体添加尽可能多的额外字段。

可以通过以下方式创建用户实体的自定义字段：
`Control Panel` `->` `Portal` `->` `Custom Fields` `->` `User`。

并且可以通过编程方式创建如下：

```
user.getExpandoBridge().addAttribute("yourCustomFieldKey"); 
```

然后将值设置为：

```
user.getExpandoBridge().setAttribute("yourCustomFieldKey", "valueForCustomField"); 
```

如果您的自定义字段已经存在，您可以像这样检查：

```
if (user.getExpandoBridge().hasAttribute("yourCustomFieldKey")) { ... }; 
```

数据存储在以**“EXPANDO”**为前缀的表中：

*   **EXPANDOCOLUMN：**存储自定义字段键和其他设置（包含 tableId 引用）
*   **EXPANDODATA：**存储key的自定义字段值（包含columnId和tableId引用）
*   **EXPANDOTABLE：**存储您为其添加自定义字段的 liferay 实体（用户）
*   **EXPANDOROW：**存储用户及其值之间的链接信息（包含 tableId 和 userId 引用）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T08:19:36.263

万一有人尝试从自定义字段中检索值并且遇到方法返回的空值问题`user.getExpandoBridge().getAttribute("yourCustomFieldKey")`（即使您遵循有关权限的线程），我找到了其他方法来检索自定义字段值：

```
ExpandoTable table = ExpandoTableLocalServiceUtil.getDefaultTable(user.getCompanyId(), User.class.getName() );
ExpandoColumn column = ExpandoColumnLocalServiceUtil.getColumn(table.getTableId(), "yourCustomFieldKey");
ExpandoValue expandoValue = ExpandoValueLocalServiceUtil.getValue(table.getTableId(), column.getColumnId(), user.getUserId()); 
```

然后你可以做一个简单的（如果字段是文本）`expandoValue.getString();`

不那么漂亮，但做的工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T08:33:56.463

是的，您可以将自定义字段添加到用户实体并将它们添加到用户的字段值：

```
user.getExpandoBridge().addAttribute(...); 
```

您可以通过控制面板`Portal->Custom Fields`或在 liferay 启动时以编程方式创建的用户实体的 Custim 字段。

数据将存储在`ExpandoValue`表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T10:36:11.347

liferay中的用户创建页面可以自定义。您实际上可以决定在用户​​创建页面中显示哪些字段。**[更多关于这个在这里。](http://www.liferay.com/web/manish.gupta/blog/-/blogs/4951204)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-10T08:34:40.587

如果您在添加或设置属性时遇到权限问题，请使用以下命令。

```
user.getExpandoBridge().addAttribute("yourCustomFieldKey",false);
user.getExpandoBridge().setAttribute("yourCustomFieldKey", "valueForCustomField",false); 
```

# android - ListActivity 中的意图不起作用

> ID：10136754
> 
> 赞同：-1
> 
> 时间：2012-04-13T07:18:38.817
> 
> 标签：android, android-layout, android-intent, android-listview

我在 layout.xml 文件中有 1 个 ListView 和 2 个按钮，如下所示：

```
 <ListView
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:choiceMode="singleChoice"/>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/btnBookRoomInRoomselection"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/btnBookRoomInRoomselection"
        android:width="150dp" />

    <Button
        android:id="@+id/btnCancelInRoomselection"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/btnCancelInRoomselection"
        android:width="150dp" />

</LinearLayout> 
```

这是我的java类：

```
public class RoomSelectionActivity extends ListActivity implements OnClickListener {

List<String> bookroom;
Button btnBookRoom;
Button btnCancel;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.roomselection);

    bookroom = new ArrayList<String>();
    //TODO change the list content from the db
    bookroom.add("Room1");
    bookroom.add("Room2");
    bookroom.add("Room3");
    bookroom.add("Room4");

    btnBookRoom = (Button)findViewById(R.id.btnBookRoomInRoomselection);
    btnCancel = (Button)findViewById(R.id.btnCancelInRoomselection);

    setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_single_choice,
            bookroom));

    btnBookRoom.setOnClickListener(this);
    btnCancel.setOnClickListener(this);

}

@Override
public void onClick(View v) {

    switch (v.getId()) {
    case R.id.btnBookRoom:

        Intent bookRoomIntent = new Intent(this,RoomBookedActivity.class);
        startActivity(bookRoomIntent);
        break;

    case R.id.btnCancel:

        break;
    }

}

} 
```

当我单击`BookRoom`按钮时，意图不起作用。我不确定为什么这不起作用。请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:21:55.680

代替

```
case R.id.btnBookRoom 
```

和

```
case R.id.btnBookRoomInRoomselection 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:19:36.593

案例 R.id.btnBookRoomInRoomselection

# ccache - 什么时候使用ccache？

> ID：10136761
> 
> 赞同：9
> 
> 时间：2012-04-13T07:19:20.423
> 
> 标签：ccache

据我所知，ccache 通过捕获以前的编译并检测何时再次完成相同的编译来加速编译。然而，makefile 做同样的事情。那么我们为什么需要ccache呢？我们什么时候使用它？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T07:22:08.663

来自[http://ccache.samba.org/](http://ccache.samba.org/)：

> 如果你曾经运行过`make clean; make`，你可能会从 ccache 中受益。出于各种原因，开发人员通常会对项目进行干净的构建，这会丢弃您之前编译的所有信息。通过使用 ccache，重新编译速度更快。
> 
> 使用 ccache 的另一个原因是相同的缓存用于不同目录中的构建。如果您将软件的多个版本或分支存储在不同的目录中，则构建目录中的许多目标文件可能会从缓存中获取，即使它们是为另一个版本或分支编译的。
> 
> 第三种情况是使用 ccache 来加速服务器执行的干净构建或定期检查代码是否可构建的构建农场。
> 
> 您还可以在用户之间共享缓存，这在共享编译服务器上非常有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-27T08:55:16.347

除了加速构建系统损坏所必需的干净构建的可疑好处以及拥有共享缓存的偶然好处之外，即使对于一个孤立的、完美的基于 mtime 的构建系统，也存在 ccache 的合法使用：

当您在分支之间来回跳转（不是谈论单独的目录）或变基时，最终会触及一大堆文件，或者如果您不走运，则包含一个中央标题（如*config.h*）在所有地方，您完美的基于 mtime 的构建系统将尽职尽责地重建一切。如果您在过去的某个时间构建了几乎相同的状态，ccache 将加速此重建。

# c# - 如何为 WPF 中的字段制作自定义转换器？

> ID：10136763
> 
> 赞同：0
> 
> 时间：2012-04-13T07:19:30.617
> 
> 标签：c#, wpf, xaml, mvvm

我有一个标签和一个文本字段，它将显示两个不同的值。

```
if(a != null && b == null) {
   return "a"; 
}
else if(a == null && b != null) {
   return "b"; 
} 
```

逻辑很简单，但是如何在 xaml 和 mvvm-pattern 中适应呢？我有一个视图模型和一个视图（xaml-ui）。代码应该适当地放置在视图模型中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:38:26.990

你的意思是说....你想在第**一个**条件下显示a，在第二个条件下显示**b**？？

如果那是真的……

然后 ..

在 ViewModel 中使用属性更改通知创建属性

# ViewModel 中的代码

```
public void ValidationFunction
{
    if(a != null && b == null) 
    {
          TextToDisplay ="a";
    }
    else if(a == null && b != null) 
    {
          TextToDisplay ="b";
    }
    else
    {
          TextToDisplay= string.Empty;
    } 
} 
```

# XAML 中的绑定

```
<TextBlock Text={Binding Path=TextToDisplay}/> 
```

不要忘记在属性的 Setter 中实现 INotifyPropertyChanged。

需要时调用验证函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:32:14.197

您可以在 A 和 B 上使用[MultiBinding ，并在](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)[IMultiValueConverter中实现您的逻辑](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)

```
<TextBlock>
  <TextBlock.Text>
    <MultiBinding Converter="{StaticResource YourConverter}">
      <Binding Path="A"/>
      <Binding Path="B"/>
    </MultiBinding/>
  </TextBlock.Text>
</TextBlock> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:31:10.133

代码：

```
class MyViewModel {
    string ResultStr {
        get {
            if (a != null && b == null)
                return "a"; 
            else if (a == null && b != null)
                return "b"; 
        }
    }
} 
```

XAML：

```
<TextBlock Text={Binding Path=ResultStr Mode=OneWay}/> 
```

# sencha-touch-2 - sencha touch 2 的示例不单独工作

> ID：10136766
> 
> 赞同：1
> 
> 时间：2012-04-13T07:19:34.347
> 
> 标签：sencha-touch-2

我将 touchstyle 文件夹和我的根目录分开。并将 sdk 文件夹放在 touchstyle 文件夹中。在 index.html 文件中进行更改以路由 development.js。并在 app.js 中进行更改以修改 src 文件夹。当我进入浏览器时，我只看到带有类别名称的顶部工具栏，没有别的。我错过了什么。我想通过例子来掌握sencha touch 2。

当我看到每个人都有实现自己想法的新方法时，我感到非常困惑。

请给我一些建议。谢谢

现在它正在工作，我在分离的 touchstyle 文件夹中做了一些修改。

1.  我将文件夹 sdk 粘贴到 touchstyle 文件夹中。

2.  打开 index.html 文件并更改`<script id="microloader" type="text/javascript" src="../../microloader/development.js"></script>`为`<script id="microloader" type="text/javascript" src="sdk/microloader/development.js"></script>`

3.  打开 app.json 文件并从 更改`"path": "../../sencha-touch-debug.js"`为`"path": "sdk/sencha-touch-debug.js"`

4.  打开 app.js 文件并从 更改`'Ext': '../../src'`为`'Ext': 'sdk/src'`

5.  最后，从 sencha touch 复制 sencha-touch-debug.js 文件并粘贴到 sdk 文件夹中。

打开它现在正在工作的浏览器。

如果有人知道，我需要更多教程，请与我分享。

# jquery - F5 后 JQuery-UI 单选按钮更新

> ID：10136768
> 
> 赞同：0
> 
> 时间：2012-04-13T07:19:41.973
> 
> 标签：jquery, jquery-ui, radio-button

我正在使用 JQuery-UI 来显示像[这里](http://jqueryui.com/demos/button/#radio)这样的单选按钮。

我有以下 HTML 代码：

```
<div id="radioDiv">
    <input type="radio" id="u1-radio" name="radio" value="" checked/>
        <label for="u1-radio">U1</label>
    <input type="radio" id="u2-radio" name="radio" value="" />
        <label for="u2-radio">U2</label>
    <input type="radio" id="g1-radio" name="radio" value="" />
        <label for="g1-radio">G1</label>
</div> 
```

和以下 JavaScript：

```
$(document).ready(function(){
    $("#radioDiv").buttonset();
    getUseCase("u1");
}

function getUseCase(useCase){
    if( useCase == "u1" ){
        $("#u2-radio").checked = false;
        $("#g1-radio").checked = false;
        $("#u1-radio").checked = true;
        $("#radioDiv").buttonset('refresh');
    }
    if( useCase == "u2" ){
        $("#u1-radio").checked = false;
        $("#g1-radio").checked = false;
        $("#u2-radio").checked = true;
        $("#radioDiv").buttonset('refresh');
    }
    if( useCase == "g1" ){
        $("#u1-radio").checked = false;
        $("#u2-radio").checked = false;
        $("#g1-radio").checked = true;
        $("#radioDiv").buttonset('refresh');
    }
} 
```

按钮工作正常，但问题是当我用 F5 键刷新页面时：选中的按钮仍然是最后一个，因此“radioDiv”不会在选中第一个按钮时刷新。

我不明白为什么..刷新不应该召回`$(document).ready(function(){})`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:37:27.450

要选择单选按钮值，请使用：

```
.attr('checked', true); // jQuery < 1.6
.prop('checked', true); // jQuery >= 1.6 
```

代替

```
.checked = true; 
```

看看我的 jsFiddle，它可以工作：

> [http://jsfiddle.net/EPp2N/](http://jsfiddle.net/EPp2N/)

# scala - Scala：Seq.distinctOn 函数的实现

> ID：10136771
> 
> 赞同：2
> 
> 时间：2012-04-13T07:19:49.777
> 
> 标签：scala, scala-collections

我正在尝试为一个序列实现一个 distinctOn 函数，该函数将采用一个函数 f 并返回一个序列，当 f 应用于它时，每个项目都有一个不同的结果。例如：

```
case class Person(name:String, age:Int)

val people = Seq(Person("Al", 20), Person("Bob", 21), 
                 Person("Bob", 24)).distinctOn(_.name)

//people should be:

Seq(Person("Al", 20), Person("Bob", 21)) 
```

返回第一个副本 (Al)，并保留顺序。我当前的实现包含一个 var，而我使用 Sets 和 GroupBy 的其他尝试没有保留顺序。有没有更好的方法来实现这个没有var？作为记录，我目前的尝试是：

```
 def distinctOn[A](f: T => A):Seq[T]={
    var seen = Set[A]()

    seq.foldLeft(Seq[T]()) { (res, curr) => {
      if(!seen.contains(f(curr))){
        seen = seen ++ Set[A](f(curr))
        res ++ Seq(curr)
      }else{
        res
      }
    }}
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T07:37:40.813

这是一个实现，它在适用的情况下保留顺序，并且也适用于除`Traversable`s 之外的其他`Seq`s。它基于其他收集方法中`distinct`使用的构建器工厂（又名）的实现并使用。`CanBuildFrom`

```
class TraversableOnceExt[A, CC[A] <: TraversableOnce[A]](coll: CC[A]) {
  import collection.generic.CanBuildFrom
  def distinctBy[B, That](f: A => B)(implicit cbf: CanBuildFrom[CC[A], A, That]): That = {
    val b = cbf(coll)
    val seen = collection.mutable.HashSet[B]()
    for (x <- coll) {
      val v = f(x)
      if (!seen(v)) {
        b += x
        seen += v
      }
    }
    b.result
  }
}

implicit def commomExtendTraversable[A, C[A] <: TraversableOnce[A]](coll: C[A]): TraversableOnceExt[A, C] =
  new TraversableOnceExt[A, C](coll) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T07:27:44.273

这是一项改进，它`seen`被纳入折叠并通常清理事物（就像不构造一个集合只是为了向现有集合添加一个元素）：

```
class EnrichedSeq[T](seq: Seq[T]) {
  def distinctOn[A](f: T => A): Seq[T] = {
    seq.foldLeft((Set[A](), Seq[T]())) {
      case ((seen, res), curr) =>
        val y = f(curr)
        if (!seen(y))
          (seen + y, res :+ curr)
        else
          (seen, res)
    }._2
  }
}
implicit def enrichSeq[T](self: Seq[T]) = new EnrichedSeq(self) 
```

此外，您可能会调用它，`distinctBy`因为这更符合库使用的命名约定（例如`maxBy`，,`sortBy`等）

# permissions - Liferay Security PermissionsURL：保存时防止页面刷新

> ID：10136772
> 
> 赞同：1
> 
> 时间：2012-04-13T07:19:52.427
> 
> 标签：permissions, liferay, alloy-ui

我目前在 AUI 对话框中显示权限 URL，每次单击保存时，整个页面都会重新加载，仅显示权限页面（因为窗口状态为 POP_UP）。

当我单击保存按钮时（如在资产配置页面中），有没有办法使权限页面不刷新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:06:55.577

我认为您可以使用 AUI Dialog **Iframe**而不仅仅是 AUI 对话框。

以下是有关如何使用**dialog-iframe**组件而不仅仅是 aui-dialog 的示例代码：

```
Liferay.provide( // liferay's way of writing a function
        window,
        '<portlet:namespace />openCustomDialog', //function name
        function(url, popupID) { // parameters to the function
            var A = AUI();

            popupDialog = new A.Dialog(
                {
                    id: popupID, // popupId passed so that it would be easy to close it through events other than the close button
                    centered: true, // all the different parameters function you can check in the Alloy API
                    draggable: true,
                    resizable: true,
                    width: 800,
                    stack: true,
                    modal: true
                }
            ).plug(
                A.Plugin.DialogIframe,
                {
                    uri: url,
                    iframeCssClass: 'dialog-iframe, my-custom-css-class'
                }
            );

            popupDialog.render();
        },
        ['aui-dialog','aui-dialog-iframe']
    ); 
```

这将打开一个对话框并创建一个 iframe，然后将您的页面加载到 iframe 中。所以权限页面在某种意义上变得独立于父页面。因此，无论您对权限页面做什么，即使您只提交弹出窗口也会刷新。

看看这是否有帮助。

# javascript - nodejs/express 中的数据库会话支持

> ID：10136774
> 
> 赞同：11
> 
> 时间：2012-04-13T07:20:15.403
> 
> 标签：javascript, database, session, node.js, session-cookies

expressjs/nodejs 是否支持（通过模块？）数据库会话？我来自 PHP/CodeIgniter 的世界，我很喜欢将会话数据存储在 mysql 数据库表中的功能。

这种方法是否与 nodejs Web 应用程序一起使用？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-13T07:57:57.913

是的。

### 雷迪斯

*   [https://github.com/visionmedia/connect-redis](https://github.com/visionmedia/connect-redis)

### MySQL

*   ~~[https://github.com/mren/connect-session-mysql](https://github.com/mren/connect-session-mysql)~~链接失效
*   ~~[https://github.com/CarnegieLearning/connect-mysql-session](https://github.com/CarnegieLearning/connect-mysql-session)~~旧的，不支持
*   [https://github.com/chill117/express-mysql-session](https://github.com/chill117/express-mysql-session)

### PostgreSQL

*   [https://github.com/jebas/connect-pg](https://github.com/jebas/connect-pg)

### MongoDB

*   [https://github.com/kcbanner/connect-mongo](https://github.com/kcbanner/connect-mongo)
*   [https://github.com/bartt/connect-session-mongo](https://github.com/bartt/connect-session-mongo)
*   [https://github.com/donpark/session-mongoose](https://github.com/donpark/session-mongoose)
*   [https://github.com/masylum/connect-mongodb](https://github.com/masylum/connect-mongodb)

### 内存缓存

*   [https://github.com/balor/connect-memcached](https://github.com/balor/connect-memcached)

### 沙发数据库

*   [https://github.com/tdebarochez/connect-couchdb](https://github.com/tdebarochez/connect-couchdb)
*   [https://github.com/eldios/connect-cradle](https://github.com/eldios/connect-cradle)

### 里亚克

*   [https://github.com/frank06/connect-riak](https://github.com/frank06/connect-riak)

### SQLite

*   [https://github.com/tnantoka/connect-sqlite](https://github.com/tnantoka/connect-sqlite)
*   [https://github.com/pkrumins/supermarket-cart](https://github.com/pkrumins/supermarket-cart)

### 基于文件

*   [https://github.com/odogono/connect-session-file](https://github.com/odogono/connect-session-file)
*   [https://github.com/tnantoka/connect-fs](https://github.com/tnantoka/connect-fs)

### 京都内阁

*   [https://github.com/kazupon/connect-kyoto](https://github.com/kazupon/connect-kyoto)

### 天蓝色

*   [https://github.com/pofallon/connect-bluesky](https://github.com/pofallon/connect-bluesky)

### nStore

*   [https://github.com/creationix/nstore-session](https://github.com/creationix/nstore-session)

### 节点脏

*   [https://github.com/mmichelli/connect-dirty](https://github.com/mmichelli/connect-dirty)

### 挥发性有机化合物（？）

*   [https://github.com/triAGENS/SessionVoc-Connect.js](https://github.com/triAGENS/SessionVoc-Connect.js)

实现自己的非常简单，[请参阅此处的文档](http://www.senchalabs.org/connect/session.html)。

# java - 为什么在春季 HibernateOperations 中不推荐使用 saveOrUpdateAll

> ID：10136775
> 
> 赞同：7
> 
> 时间：2012-04-13T07:20:15.560
> 
> 标签：java, spring, hibernate

看看[源代码](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-orm/2.5.6/org/springframework/orm/hibernate3/HibernateOperations.java#HibernateOperations.saveOrUpdateAll%28java.util.Collection%29)。

这背后可能有正当的理由，但奇怪的是我可以做`hibernate.deleteAll`and `hibernate.loadAll`，但不是`hibernate.saveOrUpdateAll`（当然我实际上可以这样做，但如果不推荐使用这种方法意味着它可能会在下一个版本中消失）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T11:19:10.597

Java 文档中的原因很清楚，

> **支持单独的 saveOrUpdate 或合并使用**

如您所见，该方法的实现，代码取自[链接](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-orm/2.5.6/org/springframework/orm/hibernate3/HibernateTemplate.java#767)，

```
public void saveOrUpdateAll(final Collection entities) throws DataAccessException {
    executeWithNativeSession(new HibernateCallback() {
        public Object doInHibernate(Session session) throws HibernateException {
            checkWriteOperationAllowed(session);
            for (Iterator it = entities.iterator(); it.hasNext(); ) {
                session.saveOrUpdate(it.next());
            }
            return null;
        }
    });
} 
```

这个方法用的比较少，不能在你的事务里面。因此，spring 希望您迭代列表并保存各个对象。

该`loadAll()`方法是不同的和有用的。它与 不相似`saveOrUpdateAll()`。

你的观察是正确的`deleteAll()`，`saveOrUpdateAll()`我同意它是不一致的，一个被弃用，另一个不是。

# jpql - JPQL Join Query 使用 getter 方法

> ID：10136777
> 
> 赞同：2
> 
> 时间：2012-04-13T07:20:31.267
> 
> 标签：jpql

*"SELECT pub FROM Publisher pub JOIN pub.magazines mag WHERE pub.revenue > 100"*

我想知道我是否可以使用方法调用而不是**pub.revenue**即**pub.getRevenue()**。这可能吗？因为**收入**变量可能被声明为私有的，不能直接访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:56:39.687

具有私有可见性的*收入*变量不会限制其在 JPQL 查询中的使用。无论可见性如何，您都可以使用它。所以你的例子应该有效。

通常，您不能从 JPQL 查询中调用方法。原因是 JPQL 查询转换为 SQL 查询，并且没有从 SQL 查询调用 Java 类的方法的概念。

# android - 如何更改由于 android 中的其他线程而崩溃的 TimerTask 中的值？

> ID：10136778
> 
> 赞同：0
> 
> 时间：2012-04-13T07:20:51.257
> 
> 标签：android

我发布了一个关于如何在计时器任务中更改 UI 元素的问题（[此处](https://stackoverflow.com/questions/10136620/how-to-change-something-in-a-new-timertask-action-in-android/10136688#10136688)），现在很好。

但是当我有这样的代码时：

```
 countInt = 0;
        timer = new Timer();
        timer.schedule(new TimerTask() {
            public void run() {
                countInt = countInt + 1;
            }
        }, 1000); 
```

counterInt var 保存在此代码所在的活动中。

如何在不崩溃的情况下更改此值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:27:47.003

我认为有两种可能：

1) 使 countInt 成为一个 Integer 对象并在您使用它的任何地方同步对它的访问：

```
Integer countInt=0;

synchronized(countInt){
    countInt++;
} 
```

2）使用[AtomicInteger](http://developer.android.com/reference/java/util/concurrent/atomic/AtomicInteger.html)，它甚至可能会更好，因为它不会阻塞任何线程。这可以防止 UI 锁定。

# height - 如何计算 QTableView 行高。QHeaderView::ResizeToContents 用于不可见的行/列

> ID：10136782
> 
> 赞同：1
> 
> 时间：2012-04-13T07:21:11.110
> 
> 标签：height, cell, qtableview, qheaderview

我有少量行和大约 10 列的 QTableView。我为verticalHeader() 设置了QHeaderView::ResizeToContents resizeMode。但它仅适用于可见行。例如，如果 tableView 向右滚动并且某些数据已更改，则行高会变小。在 tableView 向后滚动之后，行的高度对于以前不可见的单元格来说仍然太小了。我发现重新实现 sizeHintForRow(int row) 可以解决问题。但我找不到使用顶级函数计算单元格高度（包括不可见单元格）的好方法......

我可以使用原始的 QTableView::sizeHintForRow()。我只需要改变它的一小部分。但它调用 d->viewOptionsV4()。在我的例子中，我只能得到 QStyleOptionViewItemV1。但是，让这个对象为 itemDelegate 计算正确的 sizeHint 是不够的。

关于计算单元高度的最佳方法有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:14:36.390

好的，我重新实现了 QTableView::sizeHintForRow()。尺寸提示的计算方式与原始方法相同，但为此我必须借助 viewOptions() 方法和其他设置来初始化 QStyleOptionViewItemV4。

你有更好的解决方案吗？

# xml - 带有命名空间前缀的 linq to xml

> ID：10136787
> 
> 赞同：0
> 
> 时间：2012-04-13T07:21:56.793
> 
> 标签：xml, linq, namespaces, prefix

我有以下xml

```
<Location xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<Latitude>-1</Latitude>
<Longtitude>-1</Longtitude>
</Location> 
```

如果没有命名空间 (xmlns:i...)，我可以使用以下查询

```
//xdoc is an XDocument loaded with the above xml
var locCollection = from p in xdoc.Descendants("Location") 
```

使用命名空间但没有前缀“i”，我可以使用以下查询

```
XNamespace ns = @"http://www.w3.org/2001/XMLSchema-instance"
var locCollection = from p in xdoc.Descendants(ns + "Location") 
```

那么我该如何处理 te "i" 前缀呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:39:36.810

问题是当您提供命名空间前缀时，您需要显式地为该命名空间中的 XML 元素添加前缀。因此，在您的示例中，如果您明确指定前缀，`i:Location`那么您的查询将起作用。

```
<i:Location xmlns:i="http://www.w3.org/2001/XMLSchema-instance"> 
  <Latitude>-1</Latitude> 
  <Longtitude>-1</Longtitude> 
</i:Location> 
```

它在没有前缀的情况下工作的原因是因为没有指定前缀，命名空间被认为是默认命名空间，因此`Location`默认范围为命名空间。

# java - 限制 JTextField 中的字符数

> ID：10136794
> 
> 赞同：31
> 
> 时间：2012-04-13T07:22:16.867
> 
> 标签：java, swing, jframe, jtextfield

我想设置 a 的最大长度`JTextField`，这样你就不能输入超过限制的字符。这是我到目前为止的代码......

```
 textField = new JTextField();
    textField.setBounds(40, 39, 105, 20);
    contentPane.add(textField);
    textField.setColumns(10); 
```

有什么简单的方法可以限制字符数吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-13T07:28:30.300

你可以做这样的事情（取自[这里](http://www.java2s.com/Code/Java/Swing-JFC/LimitJTextFieldinputtoamaximumlength.htm)）：

```
import java.awt.FlowLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.PlainDocument;

class JTextFieldLimit extends PlainDocument {
  private int limit;
  JTextFieldLimit(int limit) {
    super();
    this.limit = limit;
  }

  JTextFieldLimit(int limit, boolean upper) {
    super();
    this.limit = limit;
  }

  public void insertString(int offset, String str, AttributeSet attr) throws BadLocationException {
    if (str == null)
      return;

    if ((getLength() + str.length()) <= limit) {
      super.insertString(offset, str, attr);
    }
  }
}

public class Main extends JFrame {
  JTextField textfield1;

  JLabel label1;

  public void init() {
    setLayout(new FlowLayout());
    label1 = new JLabel("max 10 chars");
    textfield1 = new JTextField(15);
    add(label1);
    add(textfield1);
    textfield1.setDocument(new JTextFieldLimit(10));

    setSize(300,300);
    setVisible(true);
  }
} 
```

编辑：看看[这个](https://stackoverflow.com/questions/8721197/java-equivalent-to-c-sharp-textbox-textchanged-event)以前的SO帖子。您可以拦截按键事件并根据文本字段中当前的字符数量添加/忽略它们。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-06-29T04:13:41.600

自从`DocumentFilter`在 Java 1.4 中引入 以来， `Document`就已经吸取了重写的教训。

`DocumentFilter`提供了`Document`在实际到达之前过滤传递给它的内容的方法。

这些允许字段继续维护它需要的任何文档，同时提供过滤用户输入的方法。

```
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import javax.swing.JFrame;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.text.AbstractDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;

public class LimitTextField {

    public static void main(String[] args) {
        new LimitTextField();
    }

    public LimitTextField() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                    ex.printStackTrace();
                }

                JTextField pfPassword = new JTextField(20);
                ((AbstractDocument)pfPassword.getDocument()).setDocumentFilter(new LimitDocumentFilter(15));

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(pfPassword);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class LimitDocumentFilter extends DocumentFilter {

        private int limit;

        public LimitDocumentFilter(int limit) {
            if (limit <= 0) {
                throw new IllegalArgumentException("Limit can not be <= 0");
            }
            this.limit = limit;
        }

        @Override
        public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {
            int currentLength = fb.getDocument().getLength();
            int overLimit = (currentLength + text.length()) - limit - length;
            if (overLimit > 0) {
                text = text.substring(0, text.length() - overLimit);
            }
            if (text.length() > 0) {
                super.replace(fb, offset, length, text, attrs); 
            }
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-14T15:06:00.043

Swing 工具包不包含此功能很奇怪，但这是您问题的最佳答案：

```
 textField = new JTextField();
    textField.addKeyListener(new KeyAdapter() {
        @Override
        public void keyTyped(KeyEvent e) {
            if (txtGuess.getText().length() >= 3 ) // limit to 3 characters
                e.consume();
        }
    }); 
```

我在我的 Udemy.com 课程“像孩子一样学习 Java”中的一个有趣的猜谜游戏示例中使用了它。干杯-布赖森

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T16:01:07.903

```
private void jTextField1KeyPressed(java.awt.event.KeyEvent evt)
{
    if(jTextField1.getText().length()>=5)
    {
        jTextField1.setText(jTextField1.getText().substring(0, 4));
    }
} 
```

我采用了一个名为 jTextField1 的 jtextfield，代码位于其按键事件中。我已经对其进行了测试，并且可以正常工作。我正在使用 NetBeans IDE。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-16T04:44:56.117

私人无效验证输入（）{

```
 if (filenametextfield.getText().length() <= 3 )
        {

          errorMsg2.setForeground(Color.RED);

        }
        else if(filenametextfield.getText().length() >= 3 && filenametextfield.getText().length()<= 25)
        {

             errorMsg2.setForeground(frame.getBackground());
             errorMsg.setForeground(frame2.getBackground());

        } 
        else if(filenametextfield.getText().length() >= 25)
        {

             remove(errorMsg2);
             errorMsg.setForeground(Color.RED);
             filenametextfield.addKeyListener(new KeyAdapter() {
                  public void keyTyped(KeyEvent e) {
                     if(filenametextfield.getText().length()>=25)
                        {
                         e.consume();
                         e.getModifiers();

                        }
                 }
            });
        }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-17T14:45:58.457

这是另一种限制长度的方法，如下所示。

```
label_4_textField.addKeyListener(new KeyListener() {

    @Override
    public void keyTyped(KeyEvent arg0) {
        if(label_4_textField.getText().length()>=4) // Limit to 4 characters
        {
            label_4_textField.setText(label_4_textField.getText().substring(0,3));
        }
    }
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-06-29T07:54:08.493

```
private void jTextField1KeyTyped(java.awt.event.KeyEvent evt) {                                   
if (jTextField1.getText().length()>=3) {
            getToolkit().beep();
            evt.consume();
        }
    }
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-05-27T14:54:59.647

```
public void Letters(JTextField a) {
    a.addKeyListener(new KeyAdapter() {
        @Override
        public void keyTyped(java.awt.event.KeyEvent e) {
            char c = e.getKeyChar();
            if (Character.isDigit(c)) {
                e.consume();
            }
            if (Character.isLetter(c)) {
                e.setKeyChar(Character.toUpperCase(c));
            }
        }
    });
}

public void Numbers(JTextField a) {
    a.addKeyListener(new KeyAdapter() {
        @Override
        public void keyTyped(java.awt.event.KeyEvent e) {
            char c = e.getKeyChar();
            if (!Character.isDigit(c)) {
                e.consume();
            }
        }
    });
}

public void Caracters(final JTextField a, final int lim) {
    a.addKeyListener(new KeyAdapter() {
        @Override
        public void keyTyped(java.awt.event.KeyEvent ke) {
            if (a.getText().length() == lim) {
                ke.consume();
            }
        }
    });
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-08-30T12:39:28.147

这是[npinti](https://stackoverflow.com/a/10136854/3764804)答案的优化版本：

```
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.JTextComponent;
import javax.swing.text.PlainDocument;
import java.awt.*;

public class TextComponentLimit extends PlainDocument
{
    private int charactersLimit;

    private TextComponentLimit(int charactersLimit)
    {
        this.charactersLimit = charactersLimit;
    }

    @Override
    public void insertString(int offset, String input, AttributeSet attributeSet) throws BadLocationException
    {
        if (isAllowed(input))
        {
            super.insertString(offset, input, attributeSet);
        } else
        {
            Toolkit.getDefaultToolkit().beep();
        }
    }

    private boolean isAllowed(String string)
    {
        return (getLength() + string.length()) <= charactersLimit;
    }

    public static void addTo(JTextComponent textComponent, int charactersLimit)
    {
        TextComponentLimit textFieldLimit = new TextComponentLimit(charactersLimit);
        textComponent.setDocument(textFieldLimit);
    }
} 
```

要为您添加限制[`JTextComponent`](https://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html)，只需编写以下代码行：

```
JTextFieldLimit.addTo(myTextField, myMaximumLength); 
```

# vim - 使用某些 vim 插件保存会话时出现问题

> ID：10136796
> 
> 赞同：4
> 
> 时间：2012-04-13T07:22:17.373
> 
> 标签：vim, vim-plugin

尝试使用[NERDTree](http://www.vim.org/scripts/script.php?script_id=1658)、[session](http://www.vim.org/scripts/script.php?script_id=3150)和[tabbar](http://www.vim.org/scripts/script.php?script_id=1338)组合一个 Vim 设置。

不幸的是 tabbar （基于[minibufexpl](http://www.vim.org/scripts/script.php?script_id=159)）与会话插件不兼容。

是否有解决方法/替代方法？还是我必须放弃其中一个插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:07:02.417

我相信，tabbar/minibufexpl 根本不支持会话，无论你是使用“会话”插件还是`:mksession`直接使用。要使 tabbar 与会话一起工作，首先，您必须设置一个`BufReadCmd`将在*已打开*的具有 name 的缓冲区上调用 tabbar 的`-TabBar-`。也许最好也重命名`-TabBar-`为，`//TabBar//`因为调用 autocmd 后，`-TabBar-`您将失去`-TabBar-`完全打开/创建具有名称的文件的能力，但`//TabBar//`不会丢失任何内容。但请注意， BufReadCmd 可能还不够。

# ruby-on-rails - 验证 csv 文件中与 mysql 数据库字段匹配的行和列

> ID：10136802
> 
> 赞同：0
> 
> 时间：2012-04-13T07:22:45.970
> 
> 标签：ruby-on-rails

我完成了将 csv 文件导入 MySql 数据库的任务。但现在我的要求是： 1\. csv 文件的行和列应该与 MySql 数据库的行和列匹配，这样如果缺少任何行或列，它应该会引发错误：“Missing @row1 or column 2”.. 2 . 在我的代码中，表头即名称、位置、城市等；标题经常在每次导入时重复。

我的代码如下：

```
def load_csv

end

 def import_csv
csv=params[:file].read
n=0
parsed_file = CSV.parse(csv)
parsed_file.each  do |row|
i=User.new
i.name = row[0]
i.location = row[1]
i.city = row[2]
if i.valid?
i.save
n=n+1
GC.start if n%50==0
flash[:notice] = "CSV Imported Successfully, with  #{n} records"                                
end
end 
```

在视图中：

```
<%= form_for(:user, :url => import_csv_user_path,  :html => {:multipart => true}) do |f| %>
 <table>
<tr>
<td>
<label for="dump_file">
Select a CSV File :
</label>
</td>
<td ><%= file_field_tag :file -%></td>
</tr>
<tr>
<td colspan='2'><%= submit_tag 'Submit' -%></td>
</tr>
</table>
<% end -%> 
```

请帮帮我......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T07:34:25.033

我和你现在的工作一样。但是我不认为这是一个非常好的/直接/简洁/优雅的解决方案，因为这（验证 CSV 文件）不是一个很好的要求，对我来说它与数据库的“版本控制”相同/楷模。它可能会弄乱你所有的代码，特别是对于那些不是专家的人。

好的，投诉完毕。让我分享我的解决方案：

1.  通过 javascript。我没有以这种方式实现它，但是比较我所做的，我更喜欢这种方式。步骤是：

    1.  读取本地 csv 文件（参考 jasmine 加载测试夹具的方法）。
    2.  验证 csv 和数据库表之间的列。
    3.  显示结果。如果不通过，给用户警告信息。
2.  通过远程的 ruby​​ 代码：我是这样做的，发现它不是很好（也许我使用了很多 js 函数......脏，不优雅，难以测试，响应慢，ajax ......等）如果你这样做，请只使用普通的 html 页面，而不是“对话框”或“模式窗口”。

    1.  更新文件到远程服务器。
    2.  验证远程服务器中的 csv 文件。
    3.  如果验证失败，则向用户发出警告消息。

# c++ - 我在哪里可以获得 gcc.exe（已编译）版本 4.7.0？

> ID：10136803
> 
> 赞同：2
> 
> 时间：2012-04-13T07:22:47.280
> 
> 标签：c++, gcc, compiler-construction

在 gcc 网站上，gcc 版本 4.7.0 的编译文件 (.exe) 不可用。MinGW 有最高 4.6.2 版本。我在哪里可以得到编译的 gcc.exe 版本 4.7.0 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T07:27:16.840

[这里](http://nuwen.net/mingw.html)有一个相当频繁更新的 MinGW gcc 版本，为 Windows 编译。它包括几个预编译的库（这样的提升），这使得它对学习非常有用。目前它有 gcc 4.7.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T22:47:44.567

对于 GCC 编译器二进制文件，请查看[http://www.gnupit.org](http://www.gnupit.org)

# asp.net-mvc - 如何在 MVC-3 中分别计算每个用户的叶子总数（从数据库中获取）？

> ID：10136807
> 
> 赞同：-1
> 
> 时间：2012-04-13T07:23:06.900
> 
> 标签：asp.net-mvc, c#-4.0

我想从数据库中计算每个用户的总叶子。并希望在**Asp.Net MVC-3 (Aspx)**的 Telerik gridview 中显示它。

我有一个两列的gridview。第一列显示所有员工/用户的姓名，第二列将显示该用户的总休假。

我的**数据库**如下

**leave_master**

leave_id（主键） user_id（外键与表 user_master 的 user_id） leave_days

**用户主**

user_id（主键） user_real_name

我的模型文件如下

名称 - **LeaveGridview.cs**

```
<pre>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel;

namespace ProjectManagementSystem.Models
{
    public class LeaveGridview
    {

        public int user_id { get; set; }

        public string user_name { get; set; }

        public string user_real_name { get; set; }    

        public int leave_id { get; set; }

        public decimal leave_days { get; set; }

    }
}
</pre> 
```

第二个文件

名称 - **LeaveGridviewFetch.cs**

```
<pre>
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace ProjectManagementSystem.Models
{

    public class LeaveGridviewFetch
    {

        public static IList&lt;LeaveGridview&gt; all()
        {
            IList&lt;LeaveGridview&gt; result =
                (IList&lt;LeaveGridview&gt;)HttpContext.Current.Session["leave1"];

            if (result == null)
            {

                HttpContext.Current.Session["leave1"] = result =
                    (from l in new ProjectManagementSystemEntities3().leave_master
                     select new LeaveGridview
                     {
                         user_id = l.user_id,
                         leave_id = l.leave_id,
                         user_real_name = l.user_master.user_real_name,

                     }).ToList();

            }
            return result;
        }
    }
}
</pre> 
```

我的控制器文件名**LeaveController.cs**

```
<pre>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using ProjectManagementSystem.Models;
using Telerik.Web.Mvc;

namespace LeaveModule.Controllers
{
    public class LeaveController : Controller
    {
        public ProjectManagementSystemEntities3 pb = new ProjectManagementSystemEntities3();

  public ActionResult LeaveShow()
        {
            var leave_master = pb.leave_master.Include("user_master");
            ViewBag.leave_id = new SelectList(pb.user_master, "user_id", "user_real_name");
            return View(leave_master.ToList());
        }

 [GridAction]
        public ActionResult _SelectBatchEditing()
        {
            return View(new GridModel(LeaveGridviewFetch.all()));
        }

}
}

</pre> 
```

我的看法是

名称**LeaveShow.ascx**

```
<pre>

&lt;%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage" %&gt;

&lt;asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server"&gt;
    LeaveShow
&lt;/asp:Content&gt;

&lt;asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server"&gt;

&lt;%  Html.Telerik().Grid&lt;ProjectManagementSystem.Models.LeaveGridview&gt;() 
                       .Name("grid")
                       .DataKeys(keys =&gt;
                       {
                           keys.Add(l =&gt; l.leave_id);
                       })

                       .DataBinding(dataBinding =&gt;
                        dataBinding.Ajax()
                       .Select("_SelectBatchEditing", "Leave") // Leave is controller name
                       )

                        .Columns(columns =&gt;
                       {

                           columns.Bound(l =&gt; l.user_real_name).Width(200); 

                           columns.Bound(l =&gt; l.leave_days).Width(150);

                       })

                       .Groupable()
                       .Pageable()
                       .Filterable()
                       .Render();

                       %&gt;

&lt;/asp:Content&gt;

</pre> 
```

我想像这样输出

**名字---------------total_叶**

abc---------------- 10

xyz---------------- 12

pqr---------------- 06

那么我该怎么做呢？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:59:17.620

`leave_id`如果要聚合天数，则不能在查询中包含 。我还将模型中`leave_days`的名称更改为. 我假设您的对象上有一个名为. 将 LeaveGridFetch 中的查询更改为：`LeaveGridView``total_leave_days``IEnumerable<leave_master>``user_master``leave_masters`

```
 HttpContext.Current.Session["leave1"] = result =
                (from l in new ProjectManagementSystemEntities3().user_master
                 select new LeaveGridview
                 {
                     user_id = l.user_id,
                     user_real_name = l.user_real_name,
                     total_leave_days = l.leave_masters.Sum(i => i.leave_days)
                 }).ToList(); 
```

# java - 使用 javax.servlet.RequestDispatcher.include() 时如何将参数传递给 .jsp 文件？

> ID：10136809
> 
> 赞同：0
> 
> 时间：2012-04-13T07:23:20.757
> 
> 标签：java, google-app-engine, servlets

我正在使用模型/视图/控制器样式构建 Web 应用程序，方法是将传入的 HttpRequest 路由到用 Java 编写的控制器 Servlet，然后当 Servlet 完成时，让它使用 .jsp 文件渲染回视图。（这非常符合 Rails 风格。）

这样做需要在 Controller Servlet 的末尾有这样一行：

```
getServletContext().getRequestDispatcher("/Bar.jsp").include(req, res); 
```

主要问题是我想将参数传递给 Bar.jsp，就好像它是我正在调用的函数一样。如果这不可能，我最终会在 Bar.jsp 的顶部放置大量 Java 来找出 Bar.jsp 需要呈现自己的所有内容，这相当难看。

其他 Web 框架提供了一种方法来做到这一点，因此似乎必须有一种方法来使用 Servlet 来做到这一点。特别是我在 Java Google App Engine 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:04:34.020

您可以使用

```
request.setAttribute("attributeName",attributeValue); 
```

在其他jsp文件中你可以使用`getAttribute()`这样的方法

```
request.getAttributeNames();
request.getAttribute("attributeName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T00:18:22.083

这个页面说得很好，还解决了参数和属性之间的区别：[http ://www.xyzws.com/Servletfaq/what-is-the-difference-between-the-request-attribute-and-request-parameter/1](http://www.xyzws.com/Servletfaq/what-is-the-difference-between-the-request-attribute-and-request-parameter/1)

> 请求属性（更准确地称为“请求范围的变量”）是通过调用 setAttribute() 方法显式放置在请求对象上的任何类型的对象。它们在 Java 代码中通过 getAttribute() 方法和在带有表达式语言引用的 JSP 页面中检索。始终使用 request.getAttribute() 来获取添加到服务器端请求范围的对象，即使用 request.setAttribute()。
> 
> 属性是对象，可以放在请求、会话或上下文对象中。因为它们可以是任何对象，而不仅仅是一个字符串，所以它们更加灵活。您还可以以编程方式设置属性并在以后检索它们。这在 MVC 模式中非常有用。例如，您想在一个 jsp/servlet 中从数据库中获取值并在另一个 jsp 中显示它们。现在您已经在 servlet 中准备好填充数据的结果集，然后您使用 setAttribute 方法并将此结果集发送到另一个 jsp，可以使用 getAttribute 方法将其提取出来。
> 
> 一旦 servlet 收到请求，它就可以添加其他属性，然后将请求转发给另一个 servlet 进行处理。属性允许 servlet 相互通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:42:10.547

正如其中一条评论所说，您不能将参数传递给不同的 JSP（在同一个请求中），就好像它是一个函数一样。

您可以做的最好的事情是创建一个（或多个）Java bean，将参数及其属性封装起来。然后，在调用 JSP 之前将这些 bean 添加为请求属性。在 JSP 中，您可以使用 EL 表达式引用这些 bean 保存的值，就​​像`${myBean.myParameter}`在 JSP 中不需要额外的 java 代码一样。这就是常见的 Java MVC 框架是如何做到的。

请注意，如果只需要访问触发该请求/响应处理的参数，您可以使用诸如`${param.myParam}`.

**编辑**

很抱歉之前没有添加任何链接。EL 表达式是... 包含在符号`${`and之间的表达式`}`（或`#{`和`}`- 但要考虑大小写，因为它们是不同类型的 EL 表达式）。El 表达式允许 JSP 开发人员访问存储在请求、会话或应用程序上下文中的数据（其他框架可能会向该基本集合添加更多上下文），而无需 Java 代码。在编写 JSP 时，我们必须避免使用`<% ... %>`并且只使用旨在将输出呈现到视图而不是繁重的数据处理的代码。请点击有关[最佳实践](http://www.oracle.com/technetwork/articles/javase/servlets-jsp-140445.html)的链接以获取有关它的更多背景信息。

主要有一大群 EL 表达式，我无法在 SO 帖子中解释所有内容，但我建议您关注[此链接](http://java.sun.com/products/jsp/reference/techart/unifiedEL.html)。

向请求或任何其他范围添加变量或对象（java bean）相当简单。要将 bean 添加到您执行的请求中：`request.setAttribute("myBeanName", myBean);`. 与其他上下文类似的东西。[Java EE 教程](http://docs.oracle.com/javaee/6/tutorial/doc/)会比我解释得更好，之后您应该能够理解 JavaEE 的特性。

# vba - 隐藏模块中的编译错误：此文档

> ID：10136810
> 
> 赞同：2
> 
> 时间：2012-04-13T07:23:27.013
> 
> 标签：vba, ms-word, word-2007

在 Windows 2007 机器上的 MS Word 2007 中打开 Word 文档时出现以下错误。

> 隐藏模块中的编译错误：此文档

该文档包含宏，并且可以在另一台机器上正常工作。

我认为这个错误是在一些安全更新后开始发生的。

这是操作系统或 MS Word 安全问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:22:16.797

检查文档打开时运行的代码。它正在尝试使用找不到或未定义的过程。

如果您可以在某些机器上正确使用它但在其他机器上不能正确使用，那么可能是机器有问题：a）没有必要的 AddIn/Library

或者

b) 无权访问加载项或库所在的网络位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T15:28:50.580

我记得一年或更长时间前看到过这条消息 - 我相信这个问题与试图在 64 位版本的 office 上运行它有关，而原始文档是在 32 位上生成的。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-04T03:14:10.163

word错误“隐藏模块中的编译错误：此文档”

-- 重要 -- 第一部分是基于其他人的解决方案 [credits at the bottom of page]，最后一部分是我基于它的解决方案。我注意到很多人有点害怕玩电脑和他们不太了解的东西，这给他们在遵循复杂的指令时带来了问题，所以我试着把它简化一点，希望它会更有帮助，那会让它有点啰嗦。

在您的系统中查找 winword.exe 文件的位置，我在此位置找到它 [您的可能在或可能不在同一位置]“C:\Program Files (x86)\Microsoft Office\Office12\WINWORD.EXE” .

一旦你找到它，在 Windows 地址栏中右键单击并“将地址复制为文本”，你会或者我最终得到“C:\Program Files (x86)\Microsoft Office\Office12”，因为它不会复制文件夹内容这是好的。所以你需要在使用的精确大小写中添加“\”和“winword.exe”，即大写使用与小写相同的大写。

在我开始之前，让我们避免一些混淆“不带双引号输入 - 仅用于突出显示要使用的文本。” 此外，我们不会破坏任何我们有时间和精力打开 Word 并制作新的空白文档并将其保存为“空白文档”的内容，我们稍后将使用它。

1.）现在我们需要分解位置地址，我们几乎使用“\”之间的位并添加一个带有空格的cd，如下所示，在最后一个“winword.exe或WINWORD.EXE”上[取决于他们使用什么情况] 我们添加没有“cd space”前缀的“/a”。因此，只需打开一个新的“记事本”或类似的东西，当我们将最后一个命令输入“CMD”（*1）时，Word NEED'S 将被关闭。

所以这个地址：C:\Program Files (x86)\Microsoft Office\Office12\WINWORD.EXE

应该如下所示： cd Program Files (x86) cd Microsoft Office cd Office12 WINWORD.EXE /a

2.) 确保 Mircosoft Word 已关闭！

3.）同时使用 Windows 键和“R”键，它将打开“运行”框。输入“cmd”并回车。

4.）“CMD”框将打开并主要显示“C：\”，但如果不是，那么此时此刻谁在乎！不要紧张。

5.) 现在您只需按照下面的说明，一次剪切和过去一个到“CMD”框，然后按回车键。完成此操作后，打开您制作的空白单词文档，如果没有错误，到目前为止这很好。

如果在“CMD”框中没有显示“C:\”，请键入“cd C:\”并按 Enter。

一旦显示“C:\”，输入“dir”并输入。

它现在应该显示[使用我的位置显然这应该匹配你的而不是我的:)]：大约 50 天知道有多少 DIR，这将是一个很长的列表..

剪切和粘贴 [是，不带引号]：“cd Program Files (x86)”点击“enter” 现在应该显示：C:\Program Files (x86)>

剪切和粘贴：“cd Microsoft Office”按“回车”现在应该显示：C:\Program Files (x86)\Microsoft Office>

剪切和粘贴：“cd Office12”按“回车”现在应该显示：C:\Program Files (x86)\Microsoft Office\Office12>

剪切和粘贴：“WINWORD.EXE /a”点击“输入”字现在应该是打开的

注意：您可以一次使用整个地址，但它对我不起作用“cd C:\Program Files (x86)\Microsoft Office\Office12\WINWORD.EX /a”

6.) 接下来你需要找到我的 WORD 启动文件夹在这个位置 "C:\Users\noel\AppData\Roaming\Microsoft\Word\STARTUP" 你可以通过键入 "%appdata%\Microsoft\Word\ Windows Explorer 地址栏中的“启动”，然后按 Enter (*2)。

7.) 好的 Word 启动文件夹现在应该在你面前打开，如果它有任何东西，[我希望是这样，否则这不会工作对不起]你需要右键单击桌面并创建一个新文件夹和名称它是“保持单词启动”打开它并返回到 Word 启动文件夹单击它以使其成为当前窗口。现在使用“Ctrl + A”键选择所有内容，然后使用“Ctrl + C”复制它们。现在回到您创建的新文件夹[Holding word startup]并单击它并使用“Ctrl + V”将内容粘贴到文件夹中，一旦您确定两个文件夹中的内容相同。返回到 Word 启动文件夹和“Ctrl + A”全选，“删除”是删除所有内容。

我的 Word 启动中有一个名为“WordTalk.dot”的文件。一旦打开，里面只有“你好”这个词。

8.）现在Word启动文件夹为空，双击您之前创建的“空白文档”打开它并测试错误“隐藏模块中的编译错误：此文档”是否已消失。

9.）这解决了我的问题，我在启动时只有一个文件“WordTalk.dot”，它是一个只有一个单词的word文档，我删除了它！但是如果明天出现问题，我知道如何恢复该文件。如果您不了解或不了解备份副本中的内容，则您使用 Word 启动文件夹“Holding word startup”制作，请勿将其删除，只需将其移动到安全的地方，以防万一。

诺埃尔

- - - - - - - - 参考 - - - - - - - - -

(*1) 微软支持。

[https://support.microsoft.com/en-us/help/921541/how-to-troubleshoot-problems-that-occur-when-you-start-or-use-word](https://support.microsoft.com/en-us/help/921541/how-to-troubleshoot-problems-that-occur-when-you-start-or-use-word)

(*2) 格雷厄姆市长。

[http://www.gmayor.com/what_to_do_when_word_crashes.htm](http://www.gmayor.com/what_to_do_when_word_crashes.htm)

# macos - OSX + Terminal.app + Emacs + make command key 作为元操作

> ID：10136811
> 
> 赞同：10
> 
> 时间：2012-04-13T07:23:41.563
> 
> 标签：macos, emacs, terminal, command, meta

我在 OSX Lion

我在 Terminal.app 内运行 emacs

我希望 command-x 产生 Mx（通常是 command -> M）

我尝试了以下解决方案，但它们不是我想要的：

*   在系统首选项中将命令全局映射到 Meta

*   仅在 Terminal.app 中将选项映射到 Meta

*   [Emacs 中 Meta 的 Command 键](https://stackoverflow.com/questions/2915417/command-key-to-meta-in-emacs)

我想要的只是在 Terminal.app 内部（或仅在 emacs 内部），将命令键绑定到 meta。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T23:03:34.233

fwiw - iterm2 需要额外注意才能使 cmd 映射到 meta 并与其他应用程序很好地配合。（cmd-tab 行为、cmd-space（quicksilver）等）这是我的配置，它偏向于左手 cmd-tab 操作等。

在 iterm2 内

*   （首选项>>键选项卡）左cmd需要重新映射到左选项
*   全局快捷键将以下设置为“不重新映射修饰符”
    *   cmd-space（使 quicksilver 正常工作）
    *   ctl-cmd-space（使我的全焦点绑定工作）
    *   cmd-` - 循环窗口
    *   cmd-->（右箭头）使标签循环正常工作
*   （首选项>>配置文件选项卡>>键子选项卡）我将左选项键映射到转义。这为大多数期望元的 shell 应用程序提供了预期的行为

这导致对某些本地 iterm 任务使用 right-cmd，但在具有不同键绑定的应用程序之间切换等，通常的左手操作操作和重新训练我的肌肉记忆被最小化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T11:07:21.077

首先，在终端的首选项中，在设置选项卡上，在键盘子选项卡上，有一个复选框“使用选项作为元键”。这不完全是您所要求的，但它是内置的。

我在想 Cocoa Key Bindings 系统在这里可能会有所帮助，但根据我的搜索，它故意不允许重新映射命令。[这个页面](http://www.hcs.harvard.edu/~jrus/site/cocoa-text.html)有很多关于 Cocoa 的键绑定和文本默认值的可定制性的信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T01:02:34.470

FWIW：我找到了另一种对我更好的方法来实现这一点（这是在 iTerm2 中）。

我希望 emacs 在终端中的行为与在窗口中的行为相同。我通过以下代码段将我的 emacs 设置为使用命令键作为元键：

```
;;osx keys
(setq mac-option-key-is-meta nil)
(setq mac-command-key-is-meta t)
(setq mac-command-modifier 'meta)
(setq mac-option-modifier 'alt) 
```

因此，为了让我的命令键表现得像 iTerm2 中的元键，我去了首选项->配置文件->->键并添加了新键。唯一的问题是您必须分别为每个键执行此操作，但您可以说，例如，

```
keyboard shortcut: <type command-p>
action: send escape sequence
Esc+: p 
```

所以我为我最常用的元+键做了这个。如果有另一组单选按钮（例如 option/alt 的单选按钮）就好了，您可以在其中说“命令键的作用类似于 Esc+”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-13T12:47:54.470

我使用`cmd-key-happy`（[https://github.com/aim-stuff/cmd-key-happy](https://github.com/aim-stuff/cmd-key-happy)），它允许您交换特定应用程序`alt`的`commmand`密钥。

因此，在 Terminal.app 中，您可以按预期使用所有元修饰符，而 Mac 特定的命令（复制、粘贴、关闭、新建）则可以使用`alt`。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-13T11:55:29.290

你为什么坚持使用 Terminal.app？只需安装 iterm2 并继续生活。

# .net - SqlBulkCopy：传递 SqlBulkCopyOptions.UseInternalTransaction 和不传递有什么区别？

> ID：10136814
> 
> 赞同：12
> 
> 时间：2012-04-13T07:24:08.413
> 
> 标签：.net, sql-server, windows, sqlbulkcopy

我试图找出使用带有`SqlBulkCopyOptions.UseInternalTransaction`复制选项的 SqlBulkCopy 与不使用它之间的区别，但在我的测试应用程序中，我没有发现任何区别。例如，如果`BatchSize`是 0 并且我添加了 100 条记录（在 a 中`DataTable`），其中记录号 50 在将其添加到数据库表时会导致错误，我在表中得到 0 条记录。例如，如果`BatchSize`设置为 10，我得到 40 条记录（4 批 10 条记录，第五批包括错误记录并导致批量复制中止）。不管 S`qlBulkCopyOptions.UseInternalTransaction`是否设置，我总是得到相同的结果。似乎批次总是在内部事务中复制。

如果你对我的测试应用程序感兴趣，这里是：[SqlBulkCopy-Error-and-Transaction-Test.zip](http://www.juergen-bayer.net/downloads/SqlBulkCopy-Error-and-Transaction-Test.zip)

我的问题是：

1.  是否因为总是使用内部事务`SqlBulkCopyOptions.UseInternalTransaction`而过时？`SqlBulkCopy`
2.  如果不是：此选项的实际含义是什么？在哪些情况下会有所作为？

希望有人能澄清

**编辑：** 根据答案和评论，我认为我的问题还不够清楚。我知道文档。它说“默认情况下，批量复制操作是它自己的事务。” 并且每个批次在传递时都使用它自己的事务`UseInternalTransaction`. 但是，如果这意味着默认情况下，大容量复制操作对整个大容量复制仅使用一个事务（而不是每个批次一个事务），如果我将 BatchSize 设置为某个大小并且批次位于之后，我将不会在数据库中获取记录第一个导致错误。如果只使用一个事务，则添加到事务日志的所有记录都将回滚。但是我得到了包含错误记录的批次之前的批次记录。据此，似乎默认情况下每个批次都在其自己的事务中执行。这意味着我通过`UseInternalTransaction`与否无关紧要。如果我在这里走错了路，如果有人能澄清一下，我将不胜感激。

一个事实可能很重要：我使用的是 SQL Server 2012。也许 SQL Server 2008 的行为有所不同。我会检查的。

**编辑：**感谢 usr 的回复，我想我找到了答案：我进行了一些调试和分析，发现如果未定义 UseInternalTransaction，则确实未设置私有字段 _internalTransaction。SqlBulkCopy 然后不使用自己的（内部）事务。但是分析表明 SqlBulkCopy 使用 TDS（表格数据流）来复制数据（无论 BatchSize 是什么）。我没有找到太多关于 TDS 的信息，尤其是对于 SQL Server，但我假设 SQL Server 在内部事务中执行 TDS 大容量复制操作。因此 UseInternalTransaction 对于 SQL Server 来说似乎有点多余，但为了安全起见，我会设置它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-05T19:46:59.357

如果设置此选项，则 SQLBulkCopy 类将添加一个

```
_internalTransaction = _connection.BeginTransaction(); 
```

围绕每批。

但是此选项与 SQL Server 没有实际区别，因为默认情况下事务无论如何都在自动提交模式下运行。

唯一可观察到的区别是它执行您还没有尝试传递外部事务的验证。

以下将成功并回滚所有批次

```
var transaction = sourceConnection.BeginTransaction();             
using (SqlBulkCopy bulkCopy =
    new SqlBulkCopy(sourceConnection, SqlBulkCopyOptions.Default, transaction))

{
    bulkCopy.BatchSize = 50;

    bulkCopy.DestinationTableName = "dbo.foobar";
        bulkCopy.WriteToServer(dt);
}

transaction.Rollback(); 
```

传递`SqlBulkCopyOptions.UseInternalTransaction`失败并出现错误

> 不得同时指定 SqlBulkCopyOption.UseInternalTransaction 并传递外部 Transaction。

我想知道如果`SET IMPLICIT_TRANSACTIONS ON;`以前在连接上运行过以关闭自动提交模式但`SqlBulkCopy`采用连接对象的构造函数的重载返回“意外的现有事务”是否会有所不同。无论如何，在这两种情况下都会出错 - 采用连接字符串的重载只会创建一个新连接。

# c# - 已用事件 v Tick 事件？

> ID：10136817
> 
> 赞同：10
> 
> 时间：2012-04-13T07:24:19.790
> 
> 标签：c#, timer

System.Timers.Timer 的 Elapsed 事件是否与 System.Windows.Forms.Timer 的 Tick 事件有效相同？

在特定情况下，使用其中一个而不是另一个有优势吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T07:35:37.637

其他答案提供了很多细节，但是您提到的两个计时器之间的主要区别在于，`System.Windows.Forms.Timer`它将在 UI 线程上调用回调，而`System.Timers.Timer`将使用核心线程池中的一个线程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-13T07:31:55.597

检查这些链接[here](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)和[here](http://netpl.blogspot.com/2010/05/systemwindowsformstimer-vs.html)以完整了解.Net框架中的计时器。

定时器分为三种。

*   System.Windows.Forms.Timer
*   System.Timers.Timer
*   System.Threading.Timer

我个人更喜欢`System.Timers.Timer`它是线程安全的。

# c# - 静态方法之间的调用 - 这会破坏线程安全吗？

> ID：10136819
> 
> 赞同：2
> 
> 时间：2012-04-13T07:24:29.550
> 
> 标签：c#, static, thread-safety

在公共静态类中，我有以下本地方法：

```
private static int GetMaxFromList(IEnumerable<int> list)
    {
        var result = 0;

        foreach (var i in list)
        {
            if (i > result) result = i;
        }

        return result;
    } 
```

该方法由类中的一些公共方法调用（示例）：

```
public static bool IsIntegrityOfDataSetGood(DataSet dataSet, KeyValuePair<string, List<int>> tableAndColumnIndexes)
    {
        return IsIntegrityOfDataSetGood(dataSet, tableAndColumnIndexes.Key) &&
               dataSet.Tables[tableAndColumnIndexes.Key].Columns.Count > GetMaxFromList(tableAndColumnIndexes.Value);
    } 
```

请注意，此公共方法还调用类中的另一个公共方法。

类方法只能处理通过参数发送给它们的数据，但我担心静态方法之间的调用会破坏线程安全。我有理由担心吗？

忘了提及此代码位于 .NET 2.0 项目中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T07:26:53.737

不，这*不会*破坏你的线程安全。

但它是否真的是线程安全的取决于`tableAndColumnIndexes`来自哪里以及其他线程可以访问它。换句话说，它取决于调用代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T07:27:27.290

只要没有其他线程在更改`list`顺序，就绝对没问题。它不访问任何共享状态——它只是使用它的参数。如果任何其他线程*正在*修改序列，您将获得一个`InvalidOperationException`.

听起来您可能对线程安全和静态方法有一些误解，但很难确切地说出它们是什么……您可能会发现 Eric Lippert 的博客文章[“你称之为线程安全的东西是什么？”](http://blogs.msdn.com/b/ericlippert/archive/2009/10/19/what-is-this-thing-you-call-thread-safe.aspx) 有用。

# javascript - 无法在 javascript 中使用变量的值来为 java 变量赋值。

> ID：10136823
> 
> 赞同：0
> 
> 时间：2012-04-13T07:25:00.297
> 
> 标签：javascript, jsp, scriptlet

我已经尝试了很多次，但无法做到这一点。首先让我把我的代码。::

```
<script type="text/javascript">
function delemp(v){
    alert(v);
    <%
    String abc=%>v<%;

    %>
out.println(abc);
}

</script>
<script type="text/javascript">
$(document).ready(function(){
var h= "Shantanu";
delemp(h);
});
</script> 
```

在上面的代码中。我在打电话`delemp(h);`。那应该`"Shantanu"`为变量赋值`abc.`，然后打印该值。但我无法做到这一点。当我评论 scriptlet 部分并仅运行`alert(v)`时，它给了我价值`Shantanu`，即价值正在传递给函数`delemp(v)`。但无法将其分配给`abc`. 它给了我一个错误::

```
Type Mismatch: cannot convert from Void to string. 
```

问题在哪里？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:58:48.790

你不可以做这个。脚本在页面加载之前在服务器上执行，但 javascript - 在客户端上。当你执行你的 js 时，你已经有了对 scriptlet 的评估结果，并且它不能用 js 来改变。

# codeigniter - CodeIgniter：基于文件夹和子文件夹的 URL 结构

> ID：10136827
> 
> 赞同：3
> 
> 时间：2012-04-13T07:25:29.007
> 
> 标签：codeigniter

我对当前的 CodeIgniter 有点问题。我有一个带有“页面”控制器的 CI 安装，该控制器从 /views 加载静态文件，但它最多只能到达 1 个子文件夹，我希望向其中添加另一个子文件夹。

它几乎做了以下事情：

1.  如果请求的 URL 段（例如 site.com/url）作为文件位于 /views 中（例如 /views/url.php），它会从那里加载它，但如果 URL 段（例如 url）实际上是里面的文件夹/views 它将从该文件夹加载 index.php（例如 /views/url/index.php，而 URL 仍然是 site.com/url）。
2.  以上内容适用于任何其他文件名，而不仅仅是 index.php。如果我有 site.com/url/buy，它会从 /views/url 文件夹加载 buy.php 文件。

我想要实现的是在这个结构中添加一个新的子文件夹：

1.  如果我去 site.com/url/buy/faq 从 /views/url/buy 加载 faq.php 文件等等..

当前的 Pages.php 控制器如下：

```
class Pages extends CI_Controller {

public function view($page = 'index', $sub_page = 'index') {

    if ($page == 'index') {
        $path = $page . '.php';
    } else {
        $path = $page . '/' . $sub_page . '.php';
    }       

    if (!file_exists('application/views/pages/' . $path)) {
        if (!file_exists('application/views/pages/' . $page . '.php')) {
            show_404();
        } else {
            $path = $page . '.php';
        }
    }

    // $this->output->cache(60);
    // $this->output->enable_profiler(TRUE);

    $data['title'] = ucfirst($page);
    $data['url'] = lcfirst($page);

    $this->load->view('pages/modules/header', $data);
    $this->load->view('pages/'. $path, $data);
    $this->load->view('pages/modules/footer', $data);

}
} 
```

你们有什么建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:55:14.370

首先确保您有正确的路由。在`config/routes.php`：

```
$route['default_controller'] = "pages"; 
```

您必须在控制器的构造方法中编写代码，否则您需要在 url 中添加方法名称。在`Pages.php`：

```
class Pages extends CI_Controller {

     public function __construct() {
         parent::__construct();
         $this->view(); 
     }

     private function view() {

        $url_string = $this->uri->uri_string(); //get all parameters form url

        if(!file_exist(APPPATH . 'views/pages'. $url_string. '/index.php') {
             if (!file_exists(APPPATH . 'views/pages/' . $url_string . '.php')) {
                  show_404();
             } else {
                  $path = 'pages/' . $url_string . '.php';
             }
        }
        else {
           $path = 'pages/' . $url_string . '/index.php';   
       }
     }

    //here codes continue ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:46:09.863

使用[URI](http://codeigniter.com/user_guide/libraries/uri.html)类并将段转换为目录。大致是这样的：

```
 $i = $this->uri->total_segments();
  $path = APPPATH."views/pages";
  for($j=2;$j<$i;$j++){
     $path = $path . "/" . $this->uri->segment($j);
  }
  if (!file_exists($path . "/index.php")) {
        if (!file_exists($path . ".php")) {
            show_404();
        } else {
            $path = $path . '.php';
        }
    }else{
            $path = $path . '/index.php';
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:28:11.150

> 如果我去 site.com/url/buy/faq 从 /views/url/buy 加载 faq.php 文件等等..

我没有时间检查您的代码，但您可以尝试以下方法。使用路线：

配置/路由.php

```
$route['url/buy/(:any)'] = 'pages/view/$1'; 
```

控制器/pages.php

```
class Pages extends CI_Controller {

function __construct() {

    parent::__construct();
}

function view($page) {

    if(!file_exist(APPPATH . "views/pages/{$page}.php") {

        $this->load->view("pages/{$page}");
    }
    else {
        show_404;
    }
} 
```

# python - 页面未加载 Reportlab 的图像

> ID：10136829
> 
> 赞同：1
> 
> 时间：2012-04-13T07:25:37.060
> 
> 标签：python, django, reportlab

```
def preview_badge(request, module_slug):
    event = request.event

    return  generate_badge_pdf(event, preview=True)

def generate_badge_pdf(event, preview=False):

    response = HttpResponse(mimetype='application/pdf')
    response['Content-Disposition'] = 'attachment; filename=somefilename.pdf'

    # set page layout variables
    pagesize = pagesizes.landscape(A4)
    pagewidth, pageheight = pagesize
    doc = platypus.BaseDocTemplate(filename=response, pagesize=pagesize,
            showBoundary=1)
    newHeight = doc.bottomMargin + doc.topMargin + doc.height
    newWidth = doc.leftMargin + doc.rightMargin + doc.width
    print __file__, 123, pagesize
    # reset margins
    doc.leftMargin = 0
    doc.bottomMargin = 0
    doc.rightMargin = 0
    doc.topMargin = 0

    # create the frames
    left_frame_1 = Frame(doc.leftMargin,
            doc.bottomMargin,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_1")
    left_frame_2 = Frame(doc.leftMargin,
            doc.bottomMargin + newHeight / 6,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_2")
    left_frame_3 = Frame(doc.leftMargin,
            doc.bottomMargin + newHeight / 6 * 2,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_3")
    left_frame_4 = Frame(doc.leftMargin,
            doc.bottomMargin + newHeight / 6 * 3,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_4")
    left_frame_5 = Frame(doc.leftMargin,
            doc.bottomMargin + newHeight / 6 * 4,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_5")
    left_frame_6 = Frame(doc.leftMargin,
            doc.bottomMargin + newHeight / 6 * 5,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_6")
    mid_frame_1 = Frame(doc.leftMargin + newWidth / 3,
            doc.bottomMargin,
            newWidth / 3,
            newHeight / 6 * 3,
            showBoundary=1,
            id="mid_frame_1")
    mid_frame_2 = Frame(doc.leftMargin + newWidth / 3,
            doc.bottomMargin + newHeight / 6 * 3,
            newWidth / 3,
            newHeight / 6 * 3,
            showBoundary=1,
            id="mid_frame_2")
    right_frame_1 = Frame(doc.leftMargin + newWidth / 3 * 2,
            doc.bottomMargin,
            newWidth / 3,
            newHeight / 6 * 2,
            showBoundary=1,
            id="right_frame_1")
    right_frame_2 = Frame(doc.leftMargin + newWidth / 3 * 2,
            doc.bottomMargin + newHeight / 6 * 2,
            newWidth / 3,
            newHeight / 6 * 3,
            showBoundary=1,
            id="right_frame_2")
    right_frame_3 = Frame(doc.leftMargin + newWidth / 3 * 2,
            doc.bottomMargin + newHeight / 6 * 5,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="right_frame_3")

    frames = [left_frame_1, left_frame_2, left_frame_3, left_frame_4,
            left_frame_5, left_frame_6, mid_frame_1, mid_frame_2,
            right_frame_1, right_frame_2, right_frame_3]

    # default content
    indentVal = 5
    fontSize = 16

    mid_2 = '''
    <b>NOTE</b><br /><br />
    '''

    right_2 = '''
    <br /><br />
    <b><font size="16">REGISTRATION Handy Kit</font></b> <br />
    '''

    styles = getSampleStyleSheet()
    Elements = []
    Logo = []

    # LEFT COL CONTENT
    Elements.append(Paragraph('''
        <para leftIndent="%d" fontSize="%d">%s</para>''' %
        (indentVal, fontSize, event.badgecontent.left_1_header,),
        styles['Normal']))
    Elements.append(Paragraph('''
        <para leftIndent="%d"><br />%s<br />%s<br />%s<br />%s</para>''' %
        (indentVal, event.badgecontent.left_1_line_1,
            event.badgecontent.left_1_line_2,
            event.badgecontent.left_1_line_3,
            event.badgecontent.left_1_line_4), styles['Normal'],))
    Elements.append(FrameBreak())

    Elements.append(Paragraph('''
        <para leftIndent="%d" fontSize="%d">%s</para>''' %
        (indentVal, fontSize, event.badgecontent.left_2_header,),
        styles['Normal']))
    Elements.append(Paragraph('''
        <para leftIndent="%d"><br />%s<br />%s<br />%s<br />%s</para>''' %
        (indentVal, event.badgecontent.left_2_line_1,
            event.badgecontent.left_2_line_2,
            event.badgecontent.left_2_line_3,
            event.badgecontent.left_2_line_4), styles['Normal'],))
    Elements.append(FrameBreak())

    Elements.append(Paragraph('''
        <para leftIndent="%d" fontSize="%d">%s</para>''' %
        (indentVal, fontSize, event.badgecontent.left_3_header,),
        styles['Normal']))
    Elements.append(Paragraph('''
        <para leftIndent="%d"><br />%s<br />%s<br />%s<br />%s</para>''' %
        (indentVal, event.badgecontent.left_3_line_1,
            event.badgecontent.left_3_line_2,
            event.badgecontent.left_3_line_3,
            event.badgecontent.left_3_line_4), styles['Normal'],))
    Elements.append(FrameBreak())

    Elements.append(Paragraph('''
        <para leftIndent="%d" fontSize="%d">%s</para>''' %
        (indentVal, fontSize, event.badgecontent.left_3_header,),
        styles['Normal']))
    Elements.append(Paragraph('''
        <para leftIndent="%d"><br />%s<br />%s<br />%s<br />%s</para>''' %
        (indentVal, event.badgecontent.left_4_line_1,
            event.badgecontent.left_4_line_2,
            event.badgecontent.left_4_line_3,
            event.badgecontent.left_4_line_4), styles['Normal'],))
    Elements.append(FrameBreak())

    Elements.append(Paragraph('''
        <para leftIndent="%d" fontSize="%d">%s</para>''' %
        (indentVal, fontSize, event.badgecontent.left_5_header,),
        styles['Normal']))
    Elements.append(Paragraph('''
        <para leftIndent="%d"><br />%s<br />%s<br />%s<br />%s</para>''' %
        (indentVal, event.badgecontent.left_5_line_1,
            event.badgecontent.left_5_line_2,
            event.badgecontent.left_5_line_3,
            event.badgecontent.left_5_line_4), styles['Normal'],))
    Elements.append(FrameBreak())

    Elements.append(Paragraph('''
        <para leftIndent="%d" fontSize="%d">%s</para>''' %
        (indentVal, fontSize, event.badgecontent.left_6_header,),
        styles['Normal']))
    Elements.append(Paragraph('''
        <para leftIndent="%d"><br />%s<br />%s<br />%s<br />%s</para>''' %
        (indentVal, event.badgecontent.left_6_line_1,
            event.badgecontent.left_6_line_2,
            event.badgecontent.left_6_line_3,
            event.badgecontent.left_6_line_4), styles['Normal'],))
    Elements.append(FrameBreak())

    # MID COL CONTENT
    Elements.append(Paragraph('''
        <para leftIndent="%d">%s</para>
        ''' % (indentVal, event.badgecontent.mid_1), styles['Normal']))
    Elements.append(FrameBreak())
    Elements.append(Paragraph('''
        <para leftIndent="%d">%s</para>
        ''' % (indentVal, mid_2), styles['Normal']))
    Elements.append(FrameBreak())

    # RIGHT COL CONTENT
    Elements.append(Paragraph('''
        <para fontSize="14"><img src="%s" />%s<br /><br /><br /><br /><br />
        </para>
        ''' % ('http://127.0.0.1:8000/media/tmplCR84D.jpg', event.name), styles['Normal']))
    Elements.append(Paragraph('''
        <para align="center" fontSize="20">%s<br /><br /></para>
        ''' % ('John Doe'), styles['Normal']))
    Elements.append(Paragraph('''
        <para align="center" fontSize="16">%s</para>
        ''' % ('Nanyang Technological University'),
        styles['Normal']))
    Elements.append(FrameBreak())

    Elements.append(Paragraph('''
        <para leftIndent="%d">%s</para>
        ''' % (indentVal, right_2), styles['Normal']))
    Elements.append(FrameBreak())

    Elements.append(Paragraph('''
        <para align="center" fontSize="18">%s</para>
        ''' % ('REG ID: TEST-R-1234'),
        styles['Normal']))
    Elements.append(Paragraph('''
        <para align="center" fontSize="14"><br /> %s<br /></para>
        ''' % ('John Doe'),
        styles['Normal']))
    Elements.append(Paragraph('''
        <para align="center"><br />%s<br /> %s <br /> </para>''' %
        ('Category: Test', '(This portion will be retained by conference staff)'), styles['Normal'],))
    Elements.append(FrameBreak())

    doc.addPageTemplates(platypus.PageTemplate(id="TwoCol", frames=frames))
    doc.build(Elements)

    return response 
```

这个特定的部分失败了

```
Elements.append(Paragraph('''
            <para fontSize="14"><img src="%s" />%s<br /><br /><br /><br /><br />
            </para>
            ''' % ('http://127.0.0.1:8000/media/tmplCR84D.jpg', event.name), styles['Normal'])) 
```

当我在浏览器中加载页面时，它只是进入永久的“等待页面加载”模式，而没有实际加载页面。我知道我的其余代码有效，因为当我取出`img`标签时，我可以在页面中加载 pdf。

我也确定 url`http://127.0.0.1:8000/media/tmplCR84D.jpg`显示图像。

# sql - 数据库的一致只读视图

> ID：10136837
> 
> 赞同：6
> 
> 时间：2012-04-13T07:26:58.193
> 
> 标签：sql, database

我想执行一个在数据库中返回大量数据的选择查询。所述数据库迫使我将我的查询拆分为 10000 个结果的块，并带有偏移量 + 限制。当我遍历这些块时，其他人会更新数据库，这在某些情况下可能会使数据库多次返回同一行。我通过一个删除具有重复 ID 的行的后处理过滤器来处理它，但我想知道是否有一种方法可以构建一组 sql 查询，使我能够跨多个 select 语句获得数据库的一致视图。即，BEGIN+COMMIT 但用于选择。

我有没有提到我不是一个 sql 人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:07:22.887

你能不：

按 ID 排序，获取前 10000 个，获取 LAST id。

第二次过滤大于 LAST id，得到下一个 10000。

做同样的事情直到你完成

```
Select top(10000) * from Table order by id 
```

获取最后一个 id

```
Select top(10000) * from Table where id> LAST order by id 
```

LAST 当然用数字代替

非常低的级别，但应该解决问题并消除重复

# java - Spring中如何处理不同异常的多个错误页面

> ID：10136839
> 
> 赞同：0
> 
> 时间：2012-04-13T07:27:04.730
> 
> 标签：java, spring, exception-handling, custom-error-pages

我想我以前在某个地方见过它，但我找不到它。我的问题是设置不同的错误页面，一个用于我的详细异常，例如。pl.app.MyException 和另一个用于其他所有异常。我的 web.xml 看起来像：

```
<error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/WEB-INF/jsp/error/exception.jsp</location>
</error-page>

<error-page>
    <exception-type>pl.app.MyException</exception-type>
    <location>/WEB-INF/jsp/error/myException.jsp</location>
</error-page> 
```

但是每个异常都会重定向到 exception.jsp。是否有可能做到这一点以及如何做到这一点？任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T08:19:05.583

我认为 error-page 是与 servlet 容器相关的配置参数，而不是 Spring。您应该使用[Exception resolver](http://static.springsource.org/spring/docs/3.1.1.RELEASE/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers)。请参阅[此处](http://www.mkyong.com/spring-mvc/spring-mvc-exception-handling-example/)获取一个很好的教程。

# ios - iOS：在视图之间传递数据（数组值或字符串）？

> ID：10136842
> 
> 赞同：1
> 
> 时间：2012-04-13T07:27:32.063
> 
> 标签：ios

如何使用以下代码将 NSString 值传递给“webwhatsnew”子视图。谢谢

```
-(IBAction)Whatsnew {
  NSString *myString =[URL absoluteString]; 
  // how can I pass this value to "webwhatsnew" subview 
  webwhatsnew = [[WebWhatsnewView alloc]initWithNibName:@"WebWhatsnewView"bundle:nil]; 
  [self.view addSubview:webwhatsnew.view];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:31:07.553

在 WebWhatsnewView 中创建一个 NSString 属性。然后只需为其设置一个值。例子：

```
//WebWhatsnewView.h
...
@property (nonatomic, retain) NSString *someString;
...

-(IBAction)Whatsnew {
  NSString *myString =[URL absoluteString]; 
  webwhatsnew = [[WebWhatsnewView alloc]initWithNibName:@"WebWhatsnewView"bundle:nil]; 
  webwhatsnew.someString = myString; //if myString is a string that you want to pass
  [self.view addSubview:webwhatsnew.view];
} 
```

希望能帮助到你

**编辑**

```
//WebWhatsnewView.m
...
@synthesize someString;
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T07:34:41.893

您需要在`WebWhatsnewView`. 这样您就可以设置为

```
webwhatsnew.<your_string_entity> = myString; 
```

一定要合成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:48:43.397

还有另一种方法可以使用方法。只需在 WebWhatsnewView 类中声明和定义参数类型方法。

在.h

```
-(void)setSomeData:(NSString*)str; 
```

米

```
-(void)setSomeData:(NSString*)str
{
  NSString *myString=str;
} 
```

然后调用它

```
-(IBAction)Whatsnew {
  NSString *myString =[URL absoluteString]; 
  webwhatsnew = [[WebWhatsnewView alloc]initWithNibName:@"WebWhatsnewView"bundle:nil]; 

  [self.view addSubview:webwhatsnew.view];
  [webwhatsnew setSomeData:myString];

  //or [webwhatsnew setSomeData:@"Here is the real Strings"];
} 
```

# html - WordPress 标题中的 HTML 显示额外字符

> ID：10136844
> 
> 赞同：0
> 
> 时间：2012-04-13T07:27:37.973
> 
> 标签：html, wordpress, title

我正在尝试使用图像作为 WordPress 中博客文章的标题/标题（主题是 mybase 的 0.5，mythem.es。我不确定这是否相关！）。

标题部分正在识别我输入的 HTML（img src 标签等），但是当它显示在页面上时，出现了轻微错误。图像显示正确，但`">`正上方有一个。我在标题中的 HTML 代码如下（我不能使用真正的 HTML，因为这是针对客户端的）：

```
<center><img src="http://example.com/blog/wp-content/uploads/2012/03/example.jpg" alt="Example Blog | Example 2012" title="Example" width="525" height="60" /></center> 
```

任何想法为什么我在我的图像上方得到这个奇怪的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:24:23.913

您无法将 html 插入标题框，因为 wordpress 在您保存帖子时会清理标题字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:23:50.807

但是，您可以使用自定义字段在 WP 标题中使用 html。

1.  创建一个名为 HTML_title 的自定义字段并添加您的 html
2.  在您的站点中输出自定义字段：

`<?php $html_title = get_post_meta($post->ID, "HTML_title", true);`

`if ($html_title) { ?>`

```
 <h1><?php echo $html_title; ?></h1>` 
```

`<?php } else { ?>`

```
 <h1><?php the_title(); ?></h1> 
```

`<?php } ?>`

在此处阅读全文：http: [//digwp.com/2009/10/custom-fields-for-html-post-titles/](http://digwp.com/2009/10/custom-fields-for-html-post-titles/)

# string - 如何为有序集覆盖 .toString 方法

> ID：10136848
> 
> 赞同：1
> 
> 时间：2012-04-13T07:27:54.980
> 
> 标签：string, clojure, println

我在 Clojure 1.3.0 中对一些东西使用了有序集。我的`project.clj`包括`[ordered "1.1.0"]`.

当我打电话时，`(str (ordered-set 1 2 3))`我得到`"ordered.set.OrderedSet@6"`了，但是当我调用普通的 clojure 哈希集时`(str (hash-set 1 2 3))`，我得到了正确`"#{1 2 3}"`的结果。

该`str`方法在某处调用`.toString`，那么如何覆盖该`.toString`方法`ordered-set`以便从中获取正确的字符串？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T08:03:41.830

嗯，这个问题有两个答案。一是，`ordered`（我）的懒惰维护者应该齐心协力并实施`toString`。另一个是，你可能不应该`str`在任何你关心可读性的地方使用 -`pr-str`这是一个更可靠的数据表示功能。例如，`(str {:a 'a})`两者`(str {:a "a"})`都导致`"{:a a}"`. 随着`pr-str`类型信息的保留。

# arrays - VBA：从空数组元素输出“空白”而不是零

> ID：10136860
> 
> 赞同：2
> 
> 时间：2012-04-13T07:28:53.220
> 
> 标签：arrays, vba

我目前正在使用 Excel VBA 中的数组处理大量数据。到目前为止，包含空白单元格的源数据一直被视为零，但现在我必须尝试区分空白单元格和其中包含零的单元格。

是否可以使数组输出为零而不是零？那样...

```
aArray(5) as double
Range("A1:E5") = aArray() 
```

是否只输出与已填充某些内容的数组元素相对应的范围单元格中的值？如果数组为空，我仍然会得到 [0,0,0,0,0]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T13:53:32.907

根据 psubsee2003 的建议从评论转换而来。

您已将 aArray 声明为 Double ，因此空元素将转换为零。您应该将其声明为 Variant。

# mysql - 如何在服务器上恢复 MySQL 备份 .sql

> ID：10136861
> 
> 赞同：1
> 
> 时间：2012-04-13T07:29:01.800
> 
> 标签：mysql, mysqldump

我正在使用 putty 连接到我的 MySQL 服务器。

我有一个备份 .sql 文件，我想从中在服务器上创建表。

根据此处的链接[restore backup mysql](https://stackoverflow.com/questions/2892822/restore-backup-mysql)，我正在尝试执行此命令

`mysql -u username -p -h hostname databasename < dumpfile.sql`

现在我的问题是，

1.  这里的“主机名”是什么？是“本地主机”吗？
2.  如何在我`dumpfile.sql`上传的服务器上找到我的文件的正确路径。比如说我已经上传到里面了`www/apache/appname/`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T07:34:52.187

如果您登录到运行 MySQL 的机器，`hostname`则确实是 localhost（但如果您忽略它，则假定为 localhost）。对于您的路径，`dumpfile.sql`您只需提供包括所有文件夹的完整路径。您的问题显示了相对路径`www/apache/appname/`。我假设您的意思是从`/`. 如果是这种情况，整个命令将是

```
mysql -u username -p -h localhost databasename < /www/apache/appname/dumpfile.sql 
```

# macos - 使用 XIB 为 NSSegmentedControl 创建菜单

> ID：10136862
> 
> 赞同：0
> 
> 时间：2012-04-13T07:29:11.190
> 
> 标签：macos, cocoa

我们如何使用 xib 为 NSSegmentedControl 创建特定段的菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:15:19.750

您只需从对象库中拖动一个 NSMenu 并将其释放到您希望它附加到的段上。

# php - 在此 javascript 代码中包含变量的正确语法是什么？

> ID：10136863
> 
> 赞同：0
> 
> 时间：2012-04-13T07:29:12.290
> 
> 标签：php, javascript, jquery, ajax, get

我指的是

```
url:"../php/loadmorecommentsuserpage.php?profilepageuserid=$profilepageuserid&lastComment="+$(".postedComment:last").attr("id"), 
```

我想通过 GET 将 $profilepageuserid 发送到 loadmorecommentsuserpage.php，但它不起作用。

特别是 $profilepageuserid 代表的值没有被发送。那么语法错误吗？

$profilepageuserid 是 PHP 中的一个变量，我想通过 JS 发送它

```
<script>
    $(document).ready(function(){
        $('div#text').click(function(){
            $("div#text").hide();
            $('div#loadMoreComments').show();
            $.ajax({
                url:"../php/loadmorecommentsuserpage.php?profilepageuserid=$profilepageuserid&lastComment="+$(".postedComment:last").attr("id"),
                success:function(html){
                    if(html){
                        $("#postedComments").append(html);
                        $('div#loadMoreComments').hide();
                        $('div#text').show();
                    }else{
                        $('div#box').replaceWith("<div class='box'><center>Finished Loading the Comments</center></div>");
                    }
                }
            });
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:35:57.223

```
$(function() {

    //your variable
    //if it's from PHP, you need to echo it to a JS variable
    var profilepageuserid = '<?= $profilepageuserid ?>'

    $('div#text').on('click',function() {

        //store required data into variables
        //keeps your code readable
        var commentid = $(".postedComment:last").attr("id");

        $(this).hide();
        $('div#loadMoreComments').show();

        $.ajax({
            url:"../php/loadmorecommentsuserpage.php",

            //instead of a very long querystring, just do "data"
            data : {
                'profilepageuserid' : profilepageuserid,
                'lastComment' : commentid
            },
            success: function(html) {
                if (html) {
                    $("#postedComments").append(html);
                    $('div#loadMoreComments').hide();
                    $('div#text').show();
                } else {
                    $('div#box').replaceWith("<div class='box'><center>Finished Loading the Comments</center></div>");
                }
            }
        });
    });

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:42:37.673

好吧。这就是 PHP 与 Javascript 交互的方式。简单地说，它几乎没有。PHP 由生成文本的*服务器运行。*该文本被发送到浏览器，该浏览器运行任何 Javascript、抓取图像等。幸运的是，由于 Javascript 是该文本的一部分，我们可以将任何我们想要的数据塞入其中，包括任何服务器状态。

因此，要在客户端初始化一个 Javascript 变量 ( `var foo`)（比如 的当前值`$bar`），您需要将该数据填充到一个 Javascript 变量声明中。您希望客户看到的内容如下：

```
var foo = 3; // or whatever else, depending on $bar 
```

因此，为了做到这一点，您需要在正确的时间使用 Javascript 语法包围的`echo`值：`$foo`

```
echo "var foo = $bar;"; 
```

请记住，您只是向客户端发送数据，以便稍后运行（或不运行）。您*永远不能*将数据从浏览器“拉”回仍在运行的脚本中。当浏览器获取数据时，脚本已经完成运行，服务器已经开始处理其他有用的事情，例如枚举数据库。

# qt - 非阻塞循环 {while( QMutex::trylock() );} 如何工作？

> ID：10136865
> 
> 赞同：2
> 
> 时间：2012-04-13T07:29:30.427
> 
> 标签：qt, loops, nonblocking

`QMutex`在关于它的Qt 文档中说：

> (...) 当您在一个线程中调用 lock() 时，其他尝试在同一位置调用 lock() 的线程将阻塞，直到获得锁的线程调用 unlock()。lock() 的非阻塞替代方法是 tryLock()。(...)

我已经多次使用此代码：

```
QMutex mutex;<br>
while( !mutex.tryLock() ); 
```

有人可以解释一下这个`tryLock()`方法是如何构建的，`while()`循环不会挂起整个程序吗？

两个线程共享一个`QMutex`并充当通信 FIFO - 当一个线程正在发送数据，而另一个数据被调度到第二个线程时，该线程正在等待第一个线程完成。通讯符合 Modbus 标准 - send1-receive1、send2-receive2。

您不能进行并行发送和接收。所以总是一个线程处于活动状态，其余的正在等待。

```
QMutex mutex; 
thread1() { 
    while( !mutex.tryLock() )
        ; 
    doThread1Job(); 
} 

thread2() { 
    while( !mutex.tryLock() )
        ; 
    doThread2Job(); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:07:00.267

如果您在`tryLock()`GUI 线程中旋转，那么它当然会阻塞您的用户界面。A`tryLock()`不会旋转事件循环或类似的东西。在您的情况下，`tryLock()`循环与调用`lock()`.

`tryLock()`应该按如下方式使用非阻塞替代方法：如果失败，则等待并重试。您设置了一个`singleShot`QTimer 来触发您的重试槽。

在任何情况下，从工作线程向等待线程发送 Qt 信号可能会更容易，而不是实现自己的同步方式。

# bash - 对于文件中的权限被拒绝和不明确的重定向

> ID：10136866
> 
> 赞同：0
> 
> 时间：2012-04-13T07:29:30.673
> 
> 标签：bash

```
for FILE in /data/intervals/*.txt; do
    ID=echo ${FILE}
    /data/bin/Tool -a /data/check.txt -b  ${FILE} > /data/final/Outputed_${ID}
done 
```

给予：

```
-bash: /data/intervals/CT.BP.200.txt: Permission denied
-bash: /data/final/Outputed_${ID}: ambiguous redirect
-bash: /data/intervals/CT.BP.500.txt: Permission denied
-bash: /data/final/Outputed_${ID}: ambiguous redirect
-bash: /data/intervals/CT.BP.50.txt: Permission denied
-bash: /data/final/Outputed_${ID}: ambiguous redirect
.... 
```

等等

我找不到任何拼写错误。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:32:17.583

```
ID=echo ${FILE} 
```

不做*你*认为它做的事。它实际上将`ID`环境变量设置为该值，`echo`然后尝试*执行* `${FILE}`，因此权限被拒绝。

如果要`ID`基于进行设置`FILE`，则需要以下内容之一：

```
ID=$(echo ${FILE} | sed 'some sed command here')
ID=$(basename ${FILE}) 
```

或者，如果您只想将其设置为`FILE`自身：

```
ID=${FILE} 
```

但是，在这种情况下，`ID`可能是不必要的，您可以执行以下操作：

```
for FILE in /data/intervals/*.txt; do
    /data/bin/Tool -a /data/check.txt -b ${FILE} > /data/final/Outputed_${FILE}
done 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T07:40:53.290

```
for FILE in /data/intervals/*.txt; do /data/bin/Tool -a /data/check.txt -b ${FILE} > /data/final/Outputed_${FILE}; done 
```

我认为您想为 /data/intervals 目录上的每个文件 .txt 执行工具，并将您的流程输出到自定义 Output_my.CT.BP.200.txt

或者...您想从文件名 e 中提取 ID 并在输出中使用它吗？

```
for FILE in /data/intervals/*.txt; do IDFILE=$(echo $FILE | cut -d'.' -f3); /data/bin/Tool -a /data/check.txt -b ${FILE} > /data/final/Outputed_${IDFILE}; done 
```

我正在使用 cut 进行快速而肮脏的解决方案，您可以使用其他系统（awk、sed、perl）

# mysql - MySQL 自动关闭

> ID：10136867
> 
> 赞同：1
> 
> 时间：2012-04-13T07:29:40.747
> 
> 标签：mysql

今天早上，发现mysql服务不可用。它以前工作正常。

请指导我这可能是什么原因。在我重新安装 MySQL 服务器后，它再次工作。

在这里我找到了错误日志：

> 120409 16:48:46 InnoDB：等待后台线程启动 120409 16:48:47 InnoDB：1.1.8 已启动；日志序列号 147932368753 120409 16:48:49 [Note] Event Scheduler: Loaded 2 events 120409 16:48:49 [Note] Event Scheduler: scheduler thread started with id 1 120409 16:48:49 [Note] C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld：准备连接。版本：'5.5.18-log' 套接字：'' 端口：3306 MySQL Community Server (GPL) 120413 3:20:08 [注意] C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld: 正常关闭
> 
> 120413 3:20:10 [Note] Event Scheduler: Killing the scheduler thread, thread id 1 120413 3:20:10 [Note] Event Scheduler: 等待调度线程回复 120413 3:20:10 [Note] Event Scheduler ：已停止 120413 3:20:10 [注意] 事件调度程序：清除队列。2 个事件 120413 3:20:12 InnoDB：开始关闭...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T07:16:21.373

您的服务关闭的可能原因：

*   Windows 更新（很可能）
*   停电（不太可能，否则您不会在日志中看到“正常关机”）
*   有人在机器上发出关机

您提到您重新安装了 MySQL 服务器，这使我相信您的原始服务无法启动。MySQL 通常非常擅长记录它无法启动的**原因，这是一条您没有提供给我们的重要信息。**我只提到 Windows 更新是为了指出**可能**影响您的 MySQL 安装的外部力量，并就您的服务关闭的原因给出一个可能的（但可能的）解释。

# java - HtmlUnit 2.9 jar 执行 JavaScript

> ID：10136873
> 
> 赞同：2
> 
> 时间：2012-04-13T07:30:09.273
> 
> 标签：java, javascript, htmlunit

我正在尝试这段代码：

```
import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.JavaScriptPage;
import com.gargoylesoftware.htmlunit.ScriptResult;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.WebRequest;
import com.gargoylesoftware.htmlunit.WebResponse;
import com.gargoylesoftware.htmlunit.WebWindow;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine;
import com.gargoylesoftware.htmlunit.javascript.host.html.HTMLScriptElement;
import java.net.URL;
import java.util.List;

public class Example {

    public static void main(String[] args) throws Exception {

        WebClient webClient = new WebClient(BrowserVersion.INTERNET_EXPLORER_6);
        URL url=new URL("http://www.google.com");
        WebRequest request= new WebRequest(url);
        WebResponse response=new WebResponse(null, request, 6000);
        webClient.setJavaScriptEnabled(true);
        webClient.setThrowExceptionOnScriptError(false);
        webClient.setCssEnabled(false);

        webClient.setRedirectEnabled(true);

        JavaScriptEngine engine = new JavaScriptEngine(webClient);
        webClient.setJavaScriptEngine(engine);
        HtmlPage firstPage = null;
        ScriptResult result = null;
        JavaScriptPage jsp=new JavaScriptPage(response, null);
        try {
            firstPage = webClient.getPage(request);
        } catch (Exception e) {
            e.printStackTrace();
        }
        String JavaScriptCode = "1+1";

        try {
           result = firstPage.executeJavaScript(JavaScriptCode);

        } catch (Exception e) {
            e.printStackTrace();
        }
        Object javaScriptResult = result.getJavaScriptResult();
        System.out.println(javaScriptResult);
    }
} 
```

它适用于简单的 JavaScript 代码，例如`"1+1"`. 我想执行在 URL 的页面源中定义的特定功能。URL 是我在此代码中定义的字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T08:51:25.563

这是一个工作示例，我试图使其尽可能简单：

```
import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

public class Test {
    public static void main(String[] args) throws Exception {

       WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6);

       HtmlPage page = webClient.getPage("http://www.iana.org/");
       String javaScriptCode = "inArray([1,2],3)";

       Object result = page.executeJavaScript(javaScriptCode).getJavaScriptResult();
       System.out.println(result);
    }
} 
```

# c - *** 检测到 glibc *** 项目/调试/项目：免费（）：

> ID：10136874
> 
> 赞同：-1
> 
> 时间：2012-04-13T07:30:09.327
> 
> 标签：c, free, memory-corruption

我已经为这个错误苦苦挣扎了很长时间。如果他们有帮助，我会给出一些问题的快照。请指导我应该如何进行？？？？对我来说它看起来像一团糟。

```
*** glibc detected *** /home/shivam/workspace/Project/Debug/Project: free(): invalid next size (fast): 0x099781a0 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x6ff22)[0x17ff22]
/lib/i386-linux-gnu/libc.so.6(+0x70bc2)[0x180bc2]
/lib/i386-linux-gnu/libc.so.6(cfree+0x6d)[0x183cad]
/home/shivam/workspace/Project/Debug/Project[0x8048a57]
/home/shivam/workspace/Project/Debug/Project[0x8048fce]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0x129113]
/home/shivam/workspace/Project/Debug/Project[0x8048541]
======= Memory map: ========
00110000-00288000 r-xp 00000000 08:08 786579     /lib/i386-linux-gnu/libc-2.13.so
00288000-0028a000 r--p 00178000 08:08 786579     /lib/i386-linux-gnu/libc-2.13.so
0028a000-0028b000 rw-p 0017a000 08:08 786579     /lib/i386-linux-gnu/libc-2.13.so
0028b000-0028e000 rw-p 00000000 00:00 0 
0039e000-003ba000 r-xp 00000000 08:08 787384     /lib/i386-linux-gnu/libgcc_s.so.1
003ba000-003bb000 r--p 0001b000 08:08 787384     /lib/i386-linux-gnu/libgcc_s.so.1
003bb000-003bc000 rw-p 0001c000 08:08 787384     /lib/i386-linux-gnu/libgcc_s.so.1
0040f000-00410000 r-xp 00000000 00:00 0          [vdso]
00b16000-00b34000 r-xp 00000000 08:08 786576     /lib/i386-linux-gnu/ld-2.13.so
00b34000-00b35000 r--p 0001d000 08:08 786576     /lib/i386-linux-gnu/ld-2.13.so
00b35000-00b36000 rw-p 0001e000 08:08 786576     /lib/i386-linux-gnu/ld-2.13.so
08048000-0804a000 r-xp 00000000 08:08 1604       /home/shivam/workspace/Project/Debug/Project
0804a000-0804b000 r--p 00001000 08:08 1604       /home/shivam/workspace/Project/Debug/Project
0804b000-0804c000 rw-p 00002000 08:08 1604       /home/shivam/workspace/Project/Debug/Project
09978000-09999000 rw-p 00000000 00:00 0          [heap]
b7700000-b7721000 rw-p 00000000 00:00 0 
b7721000-b7800000 ---p 00000000 00:00 0 
b7829000-b782a000 rw-p 00000000 00:00 0 
b783e000-b7840000 rw-p 00000000 00:00 0 
bf8c6000-bf8e7000 rw-p 00000000 00:00 0          [stack] 
```

实际代码如下：

```
/*
 * de.c
 *
 *  Created on: 2012-04-11
 *      Author: shivam
 */

#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <string.h>
#include "const.h"

int simulate_de(result * input, double * bestarr) {

    /* random seed */
    srand((unsigned) time(NULL));
    int i, j;

    /* initial population */
    double ** population = input->population;

    /* generating random population */
    double ** new_pop = (double **) malloc(POPULATION_SIZE * sizeof(double *));

    /* Initialise the dynamic array */
    for (i = 0; i < POPULATION_SIZE; i++)
        new_pop[i] = (double *) malloc(DIMENSION * sizeof(double));

    // for(i = 0; i < POPULATION_SIZE; i++) {
    // for(j = 0; j < DIMENSION; j++) {
    // population[i][j] = (input->min - input->max) * ((double)rand() / RAND_MAX) + input->max;
    // }
    // }

    /* simulation length */
    int sim_len = MAX_NFC * DIMENSION;

    /* for randomly choosing the three random numbers */
    int rand_chooser[POPULATION_SIZE];

    /* Initialise the random chooser array */
    for (i = 0; i < POPULATION_SIZE; i++)
        rand_chooser[i] = i;

    char * _boolMap;
    _boolMap = (char *)malloc((sim_len + 1) * POPULATION_SIZE * sizeof(char));
    memset(_boolMap, 0, (sim_len + 1) * POPULATION_SIZE * sizeof(char));

    double * _valMap;
    _valMap = (double *)malloc((sim_len + 1) * POPULATION_SIZE * sizeof(double));

    int nfc = 0, X;
    double solution, trial_solution, best_temp, best;

    /* trial vector */
    double U[DIMENSION];
    /* noisy vector */
    double V[DIMENSION];

    while (nfc < sim_len) {
        best = 0x7ff0000000000000;

        for (i = 0; i < POPULATION_SIZE; i++) {
            /* choosing randomly */
            int _rand[3];

            for (j = 0; j < 3; j++) {
                int idx;
                /* generate random number not equal to I */
                while ((idx = rand() % (POPULATION_SIZE - j)) == i);
                _rand[j] = rand_chooser[idx];

                /* swap */
                rand_chooser[idx] = rand_chooser[POPULATION_SIZE - 1];
                rand_chooser[POPULATION_SIZE - 1] = _rand[j];
            }

            /* add values to noisy vector */
            for (j = 0; j < DIMENSION; j++) {
                V[j] = population[_rand[0]][j]
                        + F
                                * (population[_rand[2]][j]
                                        - population[_rand[1]][j]);
                if (V[j] < input->min)
                    V[j] = input->min;
                else if (V[j] > input->max)
                    V[j] = input->max;
            }

            for (j = 0; j < DIMENSION; j++) {
                if (((double) rand() / RAND_MAX) < CR)
                    U[j] = V[j];
                else
                    U[j] = population[i][j];
            }

            X = (sim_len + 1) * nfc + i;
            if(_boolMap[X] == DEFINED)
                solution = _valMap[X];
            else {
                solution = input->function(population[i], DIMENSION);
                _valMap[X] = solution;
                _boolMap[X] = DEFINED;
            }
            trial_solution = input->function(U, DIMENSION);

            /* replace into new population */
            if (trial_solution <= solution) {
                for (j = 0; j < DIMENSION; j++)
                    new_pop[i][j] = U[j];
                best_temp = trial_solution;
            } else {
                for (j = 0; j < DIMENSION; j++)
                    new_pop[i][j] = population[i][j];
                best_temp = solution;
            }

            X += sim_len + 1;
            /* next population */
            _valMap[X] = best_temp;
            _boolMap[X] = DEFINED;

            if (best_temp < best)
                best = best_temp;
        }

        /* add best fitness */
        bestarr[nfc] = best;

        /* replace the population */
        for (i = 0; i < POPULATION_SIZE; i++) {
            for (j = 0; j < DIMENSION; j++) {
                population[i][j] = new_pop[i][j];
            }
        }

        /* increment the NFC */
        nfc += 1;
    }
    /* free up all the dynamic memory */
    for (i = 0; i < POPULATION_SIZE; i++) {
        free(new_pop[i]);
    }
    free(new_pop);
    free(_boolMap);
    free(_valMap);
    return 0;
} 
```

我尝试了调试器，导致此错误的行是`free(_boolMap)`最后第三行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:53:08.280

`_valMap`并且`_boolMap`大小为`(sim_len + 1) * POPULATION_SIZE`。确保您的`X`尺寸不超过该尺寸。

可能是如果您可以发布`main()`并且`const.h`，这将有助于更轻松地回答问题...

# iphone - componentsSeparatedByString 为数组返回 nil

> ID：10136875
> 
> 赞同：0
> 
> 时间：2012-04-13T07:30:12.623
> 
> 标签：iphone, nsstring

我有一个问题，例如，当我尝试分离字符串并从同一个 usingcomponentsSeparatedByString 获取数组时，字符串具有值，但是当它向数组提供值时，数组值始终为空，请帮助我，我在下面附上了代码。

```
 self.str_amenitiesValues = [[NSString alloc] init];
    self.str_amenitiesValues = [[arr_HotspotDetails valueForKey:@"Amenities"] objectAtIndex:0];
    self.arr_amenities_values =[[NSArray alloc] init];

    if (![self.str_amenitiesValues isEqualToString:@""]) 
    {
        //NSLog(@"%@",[self.str_amenitiesValues componentsSeparatedByString:@","]);   
        self.arr_amenities_values = [self.str_amenitiesValues componentsSeparatedByString:@","];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:00:48.380

您是否 100% 确定 str_amenitiesvalues 是“5,6,7,8,9,10,11,12”？我刚刚做了一个快速测试，这就是我得到的：

```
NSString *test = @"5,6,7,8,9,10,11,12";
NSArray *testArray = [test componentsSeparatedByString:@","];
NSLog(@"test: %@ \n testArray: %@", test, testArray); 
```

日志输出：

```
test: 5,6,7,8,9,10,11,12 
testArray: (
5,
6,
7,
8,
9,
10,
11,
12
) 
```

所以我建议你仔细检查你的字符串 str_amenitiesvalues 的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:41:01.753

我认为您需要在不同阶段获取所有变量的值，以便您可以弄清楚发生了什么，因为除了字符串的内容之外，似乎没有任何原因它不起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T07:41:42.790

将您的行设为：

```
self.arr_amenities_values = [[self.str_amenitiesValues componentsSeparatedByString:@","] retain]; 
```

让我知道这是否对您有帮助。

# html - css3动画推另一个li

> ID：10136877
> 
> 赞同：0
> 
> 时间：2012-04-13T07:30:18.163
> 
> 标签：html, animation, css

我在一个网站上工作，我发现一个 css3 动画有点问题.. 看看当我悬停“主页”按钮时它会推动“关于我们”链接.. 我如何防止这种情况发生？这是它的代码：

`<div class="menu"> <ul> <li id="one"><a href="">Home</a></li> <li id="two"><a href="">About us</a></li> </ul> </div>`

```
.menu ul{
margin: 0;
padding: 0;}

.menu li{
font-family: Helvetica, Arial sans-serif;
margin: 20px 10px;
display: inline-block;
*display: inline;}

.menu a{
position: relative;
color: #999;
text-decoration: none;
padding: 20px;
background-color: #DDD;
-moz-border-radius: 0 0 20px 20px;
-webkit-border-radius: 0 0 20px 20px;
-border-radius: 0 0 20px 20px;
-webkit-box-shadow: inset 10px -3px 10px #ccc;}

.menu a:hover{
background-color: #eee;
font-size: 150%;
-webkit-box-shadow: 0 0 0 #eee;
text-shadow: 0 0 10px #fff;
-webkit-transition: 0.5s ease;} 
```

[http://jsfiddle.net/nsdbV/](http://jsfiddle.net/nsdbV/)

谢谢 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:47:28.743

通过更改 font-size on `:hover`，您正在更改元素的尺寸，这是我期望浏览器的行为。除非您使用`position: absolute`而不是相对，否则我认为解决此问题的唯一方法是使用 transform 属性。我在这里稍微修改了你的例子：http: [//jsfiddle.net/nsdbV/2/](http://jsfiddle.net/nsdbV/2/)

```
.menu a{
    display: inline-block;
    -webkit-transition: -webkit-transform 0.5s ease;
}
.menu a:hover{
    -webkit-transform: scale(1.5);
}​ 
```

这不仅仅是扩展文本，而是将整个框缩放 150%。我只展示了我在上面所做的更改，但是 jsfiddle 链接应该让您很好地了解如何使用它。你需要稍微调整一下 CSS，但希望它能给你一些东西。

# android - 不同主题的应用

> ID：10136880
> 
> 赞同：0
> 
> 时间：2012-04-13T07:30:34.323
> 
> 标签：android, themes

> **可能重复：**
> [如何在 Android 运行时更改当前主题](https://stackoverflow.com/questions/2482848/how-to-change-current-theme-at-runtime-in-android)

我想在 PreferenceScreen 中为我的整个应用程序设置一个主题。有什么方法可以对所有活动进行全局处理（在使用 setTheme 的 onCreate 中没有明确说明）？

更新：我知道清单条目主题，但我怎么能在运行时让它动态呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:35:25.347

```
<application android:theme="@style/CustomTheme"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:36:30.857

[这个问题在这里](https://stackoverflow.com/questions/2482848/how-to-change-current-theme-at-runtime-in-android)的另一篇文章中有解释

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:38:15.687

我很确定您可以通过在清单文件中设置应用程序主题来设置它。您想将以下内容添加到您的应用程序元素中。

```
android:theme="@android:style/Theme.Holo.Light" 
```

将提到的主题切换为您要使用的主题。

这是应用程序元素的 Android 文档的链接：http: [//developer.android.com/guide/topics/manifest/application-element.html](http://developer.android.com/guide/topics/manifest/application-element.html)

# object - 什么是“方法的对象”和“类的对象”？

> ID：10136885
> 
> 赞同：0
> 
> 时间：2012-04-13T07:31:10.803
> 
> 标签：object, methods

我正在阅读 oracle 文档。

> “当线程调用同步方法时，它会自动获取该方法对象的内在锁，并在方法返回时释放它。”

在这里他们提到了“方法的”对象。

Method的对象到底是什么？

现在他们在这里提到了与类相关的对象

> '线程获取与类关联的类对象的内在锁。

那么与类关联的类对象是什么？

它们之间有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:45:55.863

我认为*方法的对象是非静态*的方法，也就是说，特定于实例的方法。

而*类方法是类中*声明的静态方法。取决于可以像全局函数一样的语言

```
MyClass myInstance = new MyClass();

// Method's object:
// Specific to the instance and won't be called by separate threads at he same time for myInstance, but can be called on another instance of MyClass
myInstance.method();

// Class method:
// Is at the class level, won't be called by separate threads at the same time at all.
MyClass.myStaticMethod(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:40:48.310

对象是可以操作或访问的实例化实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:42:19.420

方法的对象，是该方法当前用于的对象。

类对象是类层次结构的根。每个类都有 Object 作为超类。（不要被这个混淆）所有对象，包括数组，都实现了这个类的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T07:39:22.690

类只是用户自定义的数据类型，代表一些方法和变量。

Object 是该类的实例变量，就像蓝图一样。

还有类方法和对象方法。

您将对象方法发送到该类的特定实例，并将 Class 方法发送到该类。

例如，您有 Class Car。它只是描述了汽车是如何构造的以及它可以做什么。然后，它可能有方法`Create a new car`。因此，例如梅赛德斯和奥迪，您将拥有很少的对象。并且这个对象可以响应方法驱动和停止。是否有意义？

# javascript - 在屏幕中央设置弹出 div

> ID：10136889
> 
> 赞同：0
> 
> 时间：2012-04-13T07:31:56.603
> 
> 标签：javascript

我正在创建一个弹出 div。它的大小为 521 像素，高度为 400 像素。

现在我想将它设置为显示在屏幕或浏览器窗口的中心，而不管浏览器窗口的大小。

这是我的 JavaScript 代码：

```
<script type="text/javascript">
function show_update_profile()
   {
       document.getElementById('black_fade').style.display='block';
       var dw = document.getElementById('div_register').style.width;
       alert(dw);
       document.getElementById('div_register').style.left= ((window.innerWidth)-dw)/2;
   }
</script> 
```

该行`alert(dw);`显示 div 宽度，但之后的行不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:36:07.840

应该：

```
 //remove extra dot
document.getElementById('div_register').style.left= ((window.innerWidth)-dw)/2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:35:38.453

`dw`是一个以`px`;结尾的字符串 您需要先调用`parseInt`它以自行获取号码。然而，使用 JavaScript 解决一个可以通过 CSS 轻松解决的问题还有很长的路要走：

```
#div_register {
    left: 50%;
    top: 50%;
    margin: -200px -260px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:39:18.260

alert(dw) 的输出是什么？如果这包含一些测量单位（如“123px”），则需要在计算中使用它之前将其解析为 int：

```
var dw = parseInt(document.getElementById('div_register').style.width); 
```

# sitecore - 在 sitecore 6.2 中查找特定 XSLT 文件的项目列表

> ID：10136891
> 
> 赞同：0
> 
> 时间：2012-04-13T07:32:11.603
> 
> 标签：sitecore

我想生成在演示选项卡中使用特定 xslt 的所有项目列表的报告。有没有办法使用查询或以编程方式生成报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:02:26.810

如果您想以编程方式执行操作，则必须查看 LinkDatabase。

根据 Sitecore 的版本，您可以使用以下内容进行构建：

站点核心 5：

```
var linkdatabase = Sitecore.Configuration.Factory.GetLinkDatabase();
linkdatabase.GetReferers(Sitecore.Context.Item); //use any item 
```

站点核心 6：

```
var linkdatabase = Sitecore.Configuration.Factory.GetLinkDatabase();
linkdatabase.GetReferrers(Sitecore.Context.Item); //use any item 
```

这应该足以让您完成其余的工作。

*   基督教

# xml - CLojure 萨克斯解析器示例

> ID：10136893
> 
> 赞同：0
> 
> 时间：2012-04-13T07:32:17.010
> 
> 标签：xml, clojure, sax

我一直`xml-seq`在一个项目中使用 XML Parsing，并想知道是否可以使用 sax 解析器。我发现有一个名为 的函数`startparse-sax`，但我找不到任何示例？有没有人有或知道任何使用的简单示例`startparse-sax`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:25:40.323

你的问题有点令人困惑。首先，`xml-seq`不是为了解析。它被设计用于输出`clojure.xml/parse`并返回 XML 树中所有节点的序列。其次，clojure.xml/parse 是建立在 SAX 之上的，所以如果您正在使用，那么`clojure.xml/parse`您已经在间接使用 SAX。您可以在此处找到有关如何使用它的示例：http: [//clojuredocs.org/clojure_core/clojure.xml/parse](http://clojuredocs.org/clojure_core/clojure.xml/parse)

`clojure.xml/parse`如果您不想要默认的解析器，也可以提供特定的 SAX 解析器。您可以通过提供`startparse`要使用的“”函数而不是默认函数来做到这一点`startparse-sax`。这是一个关于如何使用 TagSoup HTML 解析器（作为 SAX 解析器公开）的示例`clojure.xml/parse`：[https](https://gist.github.com/2378475) ://gist.github.com/2378475 。（这类似于 Enlive 所做的。）

# browser - 如何撤消 301 重定向？

> ID：10136895
> 
> 赞同：7
> 
> 时间：2012-04-13T07:32:23.500
> 
> 标签：browser, redirect, search-engine, http-status-code-301, http-status-codes

现在，我对 301 重定向没有任何问题，但是有人问我如何为浏览器和搜索引擎撤消缓存的 301 重定向，所以我回答说“通过将 301 重定向回原始 url”，至少这就是我认为的解决方案，直到我看到人们提到你不能做 301 重定向 [http://getluky.net/2010/12/14/301-redirects-cannot-be-undon/](http://getluky.net/2010/12/14/301-redirects-cannot-be-undon/) [http:// /www.velocityreviews.com/forums/t500058-undo-301-redirect.html](http://www.velocityreviews.com/forums/t500058-undo-301-redirect.html)

这是一个惊喜，我不确定它是否属实，所以我要问的是，将缓存的永久 301 重定向从页面 /a.html 恢复到页面 /b.html的*正确*方法是什么到原来的 /a.html ？

我想请教一些专家的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:40:22.740

如果这些东西没有永久移动（永远！），请不要使用 301。这将是正确的解决方案。

问题是缓存是在客户端完成的，因此您需要等待该缓存超时，然后客户端将再次获取原始页面。

据我所知，这在您的情况下无法从服务器端完成。

作为**一种解决方法**，您可以为 a.html 创建一个同义词（在您的服务器上，如`ln -s a_foo.html a.html`）并从 b.html 重定向到 a_foo.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-01T11:49:21.173

如果您有问题的重定向仅在 HTTP 上，请更改为 HTTPS。或将 example.com 更改为 www.example.com，或相反。

# python - 如何在 pyglet 侧滚动条中制作随机无限地形？

> ID：10136898
> 
> 赞同：0
> 
> 时间：2012-04-13T07:32:44.000
> 
> 标签：python, pyglet

我正在尝试使用 pyglet 制作横向卷轴游戏，并且我已经设法绘制了背景、角色和一些地形。（我对 GUI 的东西很陌生）问题是当玩家移动角色时，地形是要自己生成的（就像像泰拉瑞亚这样的游戏）但我找不到不制作 1000 个副本的方法精灵。你对我将如何处理这件事有任何想法吗？如果我没有说清楚，请随时提出问题:)

编辑：到目前为止，我一直在为每个地形创建一个变量，如下所示：

```
ground_1 = pyglet.sprite.Sprite(ground1, x=-100, y=200, batch = terrain)
ground = pyglet.sprite.Sprite(ground1, 0, y=200, batch = terrain)
ground2 = pyglet.sprite.Sprite(ground1, x=100, y = 200, batch = terrain)
ground3 = pyglet.sprite.Sprite(ground1, x=200, y = 200, batch = terrain)
ground4 = pyglet.sprite.Sprite(ground1, x=300, y = 200, batch = terrain)
ground5 = pyglet.sprite.Sprite(ground1, x=400, y = 200, batch = terrain)
ground6 = pyglet.sprite.Sprite(ground1, x=500, y = 200, batch = terrain)
ground7 = pyglet.sprite.Sprite(ground1, x=600, y = 200, batch = terrain)
ground8 = pyglet.sprite.Sprite(ground1, x=700, y = 200, batch = terrain)
ground9 = pyglet.sprite.Sprite(ground1, x=800, y = 200, batch = terrain)
ground10 = pyglet.sprite.Sprite(ground1, x=900, y = 200, batch = terrain) 
```

我还创建了一个类来查看块上是否有一棵树：

```
class block():
    """ block """
    def __init__(self,image,tree,grass,destroyed):
        self.image = image
        self.tree = tree
        self.grass = grass
        self.destroyed = destroyed

newGround1 = block(newGround,tree[treeR],grass[grassR],destroyed[destroyedR])

groundO = block(ground_1,False,False,False)
groundO1 = block(ground,True,False,False)
groundO2 = block(ground2,False,False,False)
groundO3 = block(ground3,False,False,False)
groundO4 = block(ground4,False,False,False)
groundO5 = block(ground5,False,False,False)
groundO6 = block(ground6,False,False,False)
groundO7 = block(ground7,False,False,False)
groundO8 = block(ground8,False,False,False)
groundO9 = block(ground9,False,False,False)
groundO10 = block(ground10,False,False,False) 
```

但我想知道我是否必须为我想要的所有地形创建*ground2、ground3、ground4 ...*，或者是否有更简单的生成方式（可能无限制）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T21:25:58.250

听起来您应该能够将所有这些`ground`对象存储在列表中，而不是存储它们。

```
#pseudocode
grounds_list = []
for x in range(0, 100000, 100):
   ground = pyglet.sprite.Sprite(ground1, x, y=200, batch = terrain) #x gets passed in here
   groundO1 = block(ground,True,False,False)
   grounds_list.append(ground) #store the objects you want to keep 
```

因此，当您需要查找更多内容时，您会遍历这个 grounds_list。

# actionscript-3 - 如何在运行时使用 actionscript3 从 Flash 导出 svg 或 eps

> ID：10136907
> 
> 赞同：0
> 
> 时间：2012-04-13T07:34:18.490
> 
> 标签：actionscript-3

有可能吗..我四处寻找，似乎不可能。我知道您可以导出 png、jpg（使用[https://github.com/mikechambers/as3corelib](https://github.com/mikechambers/as3corelib)）和 pdf，但是矢量图形呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:06:18.680

你试过[as3svgrendererlib](http://code.google.com/p/as3svgrendererlib/)吗？

它允许您在运行时在 actionscript 3.0、Flash 10 和 Flex 3.0+ 中操作和渲染 SVG。

另一个是[svgweb](http://code.google.com/p/svgweb/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T04:03:25.457

不幸的是，您可能必须编写 SVG 或 PDF，然后使用第二个工具将任何内容转换为 EPS。使用 AIR 或 web 服务比使用纯 web swf 更容易。

# c# - 使用 C# 从另一个进程获取控件

> ID：10136912
> 
> 赞同：0
> 
> 时间：2012-04-13T07:35:22.587
> 
> 标签：c#

我有带有一些控件的窗口，我想从我的应用程序向它们发送一些事件。所以我有两个问题：

*   如何从另一个应用程序获取控件

*   如何将某些事件调用到控件中

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:42:23.850

我无法使用托管 C# 代码提供一个好的答案。
我可以建议的是使用[AutoIt](http://www.autoitscript.com/site/autoit/downloads/)

*   直接（您可以生成脚本并在 EXE 中编译）
*   使用 C# 中的 AutoItX（AutoIt 公开的 COM 对象）

希望这可以帮助...

# iphone - iPhone：根据ios版本管理框架

> ID：10136922
> 
> 赞同：1
> 
> 时间：2012-04-13T07:36:00.003
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, ipad

在我的 iPad 应用程序中，

我已经完成了 twitter 的编码。

适用于 ios 版本 4.0、4.1、4.2 和 4.3。

和

IOS 5.0 版。

```
I have done separate coding for twitter.

if([[[UIDevice currentDevice] systemVersion] floatValue]>=5.0) 
```

像这样。

问题是当我在 ios 4.x 中运行代码时它崩溃了

**结果无法加载我在 XCode 中包含的 twitter 框架。**

那么，如何在我的应用程序中管理这些框架。

它的部署目标是 4.0。

它的基础 SDK 是 5.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:43:06.170

您必须检查 Twitter.framework 是否链接为“可选”。转到 You Target，选择“Bild Phases”，选择“Link Binary With Libraries”，然后在 Twitter.framework 中选择“Optional”。

检查截图：

![在此处输入图像描述](../Images/c969722afbdd51575232832b8859099a.png)

在你的代码中，你可以通过调用来检查 Twitter 框架是否在这里：

```
if(NSClassFromString(@"TWRequest") != NULL) {
  // Yes. Twitter Framework loaded
} 
```

# iphone - 如何在 iphone sdk 中同时输出音频电平表和音高变化

> ID：10136926
> 
> 赞同：0
> 
> 时间：2012-04-13T07:36:49.150
> 
> 标签：iphone, audio, avaudioplayer, pitch

我有一个应用程序，用户可以在其中录制音频并在音调上有一些变化的情况下播放它。并且还应测量输出体积功率。我知道 avaudioplayer 和 cocos 声音引擎的计量特性。但是使用这些我不能一起满足我的需求。我怎么能一起做这些（音高转换和电平测量）。有谁能够帮助我。

**编辑**

```
 CDSoundEngine *soundEngine = [[CDSoundEngine alloc] init];

 NSArray *defs = [NSArray arrayWithObjects: [NSNumber numberWithInt:1],nil]; 
        [soundEngine defineSourceGroups:defs];
[soundEngine loadBuffer: 0 filePath: soundPath];
   ALuint soundID= [soundEngine playSound: 0 sourceGroupId: 0 pitch: PITCH pan: 0.0f gain: 2.0f loop: NO]; 
```

这是我目前使用的代码，它工作正常，但我无法测量输出功率。在 AVAudioPlayer 的情况下，有一个属性 meteringenabled

[玩家 setMeteringEnabled:YES];

我们可以通过

```
 [player updateMeters];
    Float32 peak=[player peakPowerForChannel:0]; 
```

但我不能通过 AVAudioPlayer 改变音高

这是我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:52:37.603

@johnykutty 没有使用avaudio播放器更改声音的选项。您需要通过外部库来更改音高....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:22:12.023

有一种使用外部库的方法：Dirac3 音频库 - [http://dirac.dspdimension.com/Dirac3_Technology_Home_Page/Dirac3_Technology.html](http://dirac.dspdimension.com/Dirac3_Technology_Home_Page/Dirac3_Technology.html)

此处提供了一个简单的教程：http: [//purplelilgirl.tumblr.com/post/3915153445/tutorial-other-ways-to-chipmunkify-your-voice](http://purplelilgirl.tumblr.com/post/3915153445/tutorial-other-ways-to-chipmunkify-your-voice)

但许可证费用为 1000 欧元。有一个免费版本，但您必须阅读许可协议以了解您是否可以在商业产品中使用它（如果我已正确阅读协议，您可以使用它，只要您给予作者信用即可）。

# ios - 如何在ios中拨打电话？

> ID：10136929
> 
> 赞同：0
> 
> 时间：2012-04-13T07:37:25.583
> 
> 标签：ios, ios5

我需要在后台拨打一个号码，如果可能的话，在通话过程中输入一个代码。我可以这样做吗？

此呼叫必须通过用户的电话进行！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:40:56.737

在后台？不，您可以随时使用

```
 [[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"tel:1234567890"]]; 
```

拨打电话，但它会打开电话应用程序

# messaging - ZeroMQ 准备好用于生产了吗？

> ID：10136931
> 
> 赞同：9
> 
> 时间：2012-04-13T07:37:34.627
> 
> 标签：messaging, zeromq

一年前[在这里](https://stackoverflow.com/questions/4870814/is-zeromq-production-ready)问过同样的问题。我正在寻找今天的状态更新。

*   错误消息、文档等如何？
*   是否存在导致开发问题的常见错误？
*   表现如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T11:16:22.240

我们`2.x`在金融领域的生产系统中广泛使用：

*   `2.0.11`在商业交换系统中（用于从经纪人到交换网关`tcp`的通信，以及交换系统本身的各个组件之间的通信）
*   `2.1.x`在其他类型的支付相关系统（`inproc`和`tcp`传输）中

我们还没有使用 PGM 传输。

ZeroMQ 邮件列表和开发团队总是非常有帮助。

# android - Android JNI 调用

> ID：10136932
> 
> 赞同：1
> 
> 时间：2012-04-13T07:37:34.993
> 
> 标签：android, android-ndk, java-native-interface

我尝试为简单的 c 代码编写 jni 调用。当我尝试在运行 2.3.3 的手机上安装它时，它没有安装，有时即使它安装了它也会被强制关闭。请帮我解决这个问题。代码详情如下：

我生成头文件的java代码。

```
package com.hosa;

public class edgejava
{
static{
    System.loadLibrary("edgejava");
}
public native int main(); 
```

}

生成的头文件如下

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class com_hosa_edgejava */

#ifndef _Included_com_hosa_edgejava
#define _Included_com_hosa_edgejava
#ifdef __cplusplus
 extern "C" {
 #endif
 /*
  * Class:     com_hosa_edgejava
  * Method:    main
  * Signature: ()I
  */
  JNIEXPORT jint JNICALL Java_com_hosa_edgejava_main
  (JNIEnv *, jobject);

 #ifdef __cplusplus
 }
 #endif
 #endif 
```

本机功能的实现如下

```
#include "com_hosa_edgejava.h"
#include <jni.h>
#include <cv.h>
#include <highgui.h>

using namespace cv;

JNIEXPORT jint JNICALL Java_com_pes_edgejava_main(JNIEnv *, jobject){
VideoCapture cap(0); // open the default camera
if(!cap.isOpened())  // check if we succeeded
    return -1;

Mat edges;
namedWindow("edges",CV_WINDOW_AUTOSIZE);
for(;;)
{
    Mat frame;
    cap >> frame; // get a new frame from camera
    cvtColor(frame, edges, CV_BGR2GRAY);
    GaussianBlur(edges, edges, Size(7,7), 1.5, 1.5);
    Canny(edges, edges, 0, 30, 3);
    imshow("edges", edges);
    if(waitKey(30) >= 0) break;
}
// the camera will be deinitialized automatically in VideoCapture destructor
return 0; 
```

}

android.mk 文件

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

include /home/srijith/android-opencv/OpenCV-2.3.1/share/OpenCV/OpenCV.mk

LOCAL_MODULE    := edgejava
LOCAL_SRC_FILES := edgecpp.cpp
LOCAL_LDLIBS +=  -llog -ldl

include $(BUILD_SHARED_LIBRARY) 
```

应用程序.mk

```
 APP_MODULES      := edgejava
 APP_STL := gnustl_static
 APP_CPPFLAGS := -frtti -fexceptions 
```

活动文件如下

```
package com.hosa;

import android.app.Activity;
import android.os.Bundle;

public class Andedge2Activity extends Activity {
edgejava nativelib;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    nativelib= new edgejava();
    int i=nativelib.main();
    System.out.println("value returned to andedgeactivity "+i);
} 
```

}

清单的所有必要更改都已完成，例如提及使用相机和设置权限。

**编辑**：我已更改`com_pes_edgejava`为`com_hosa_edgejava_main`但仍无法正常工作...

还有其他解决方法？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:40:35.897

问题在于您的*Packname*将您的应用程序包更改`com.hosa`为`com_pes_edgejava`.

在您的 JNI 文件中，您将看到函数（主）声明，如 JNIEXPORT jint JNICALL Java_com_pes_edgejava_main()

Java_ `com_pes_edgejava`_main

那是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T08:01:44.243

hotveryspicy 指出了一个明显的问题（即当你应该有 com_hosa 时你有 com_pes）。至于它仍然不起作用的事实，我怀疑这归结为“使用命名空间 cv”。结果，您在 cv 命名空间内声明了您的 JNI 函数，这是不正确的。这是 using 关键字值得警惕的原因之一。

将 cv:: 放在对该名称空间中的函数和结构/类的定义的调用前面有什么问题？无论如何，它在自我记录方面要好得多。

# scala - 什么是 List[String~Int]？

> ID：10136939
> 
> 赞同：8
> 
> 时间：2012-04-13T07:38:29.477
> 
> 标签：scala, playframework, playframework-2.0

在浏览 play 框架的 scala 文档（[Play Docs](http://www.playframework.org/documentation/2.0/ScalaAnorm)）时，我看到了一种我以前从未见过的语法。

```
val populations:List[String~Int] = {
  SQL("select * from Country").as( str("name") ~ int("population") * ) 
} 
```

谁能告诉我**“~”**是`List[String~Int]`什么意思？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-13T07:47:07.250

这可能会有所帮助：

```
scala> class ~[A, B]
defined class $tilde

scala> List.empty[String~Int]
res1: List[~[String,Int]] = List() 
```

实际上，`~`它不是标准库的一部分，这是来自 play 框架的通用类，它允许使用中缀表示法。在 scala 中，任何带有 2 个泛型参数的泛型类都可以与中缀表示法一起使用。例如，以下也有效：

```
scala> class X[A, B]
defined class X

scala> List.empty[String X Int]
res1: List[X[String,Int]] = List() 
```

在您的情况下，您将`~`在[Play framework API](http://www.playframework.org/documentation/api/2.0/scala/index.html#anorm.$tilde)中找到 的定义。

# message-queue - RabbitMQ：根据多个标准进行路由，但只针对一个消费者

> ID：10136941
> 
> 赞同：2
> 
> 时间：2012-04-13T07:38:45.780
> 
> 标签：message-queue, rabbitmq, zeromq

我们如何通过 RabbitMQ 分配工作，以便工作池可以根据彼此不同（但经常重叠）的标准订阅工作消息，但是当一条消息被路由到多个工作池时，只有一个工作人员会拿起工作？

简化示例：

*   我们有主机 1 和主机 2。
*   Host1 处理classA 和classB 的工作；host2 处理 classB 和 classC 的作业。
*   如果我们路由一个 classA 的作业，只有 host1 会接它；如果我们路由 B 类的作业，host1 或 host2 会选择它（基于它们当前的负载/第一次可用），但绝不会两者兼而有之。

看起来我们需要使用主题交换，因为我们的路由标准很复杂，并且使用通配符为我们提供了我们想要的灵活匹配类型。

然而：

1.  如果我们为工作池队列使用相同的名称（例如“worker-jobs”），我们会将所需的工作拆分给任意匹配的工作人员，但每个订阅命名队列的工作人员似乎都会用彼此的路由标准感染其他工作人员因为他们绑定它。即，路由键的绑定似乎在中央队列名称级别，而不是在连接到队列的基础上。
2.  如果我们为每个工作池连接（比如“poolA-jobs”和“poolB-jobs”）使用不同的队列名称到同一个交换，那么我们可以获得所需的行为，在池之间维护不同的路由标准，但是进来的作业可以匹配 poolA 和 poolB 被路由到他们两个（尽管每个只有一个工人）。

笔记：

1.  我没有详细说明原因，但我只想说我们有一个现有的多 PB 分布式搜索应用程序，它需要响应时间 < 50 毫秒。我们已经通过我们自己的自定义路由集线器实现了这一点，但如果我们能够获得所需的复杂路由，我们希望将其替换为 RabbitMQ，因为它的性能很有吸引力（就像退休的与通用社区项目重叠的自制代码一样）。
2.  我们使用 Python
3.  迪斯科不可行的原因有很多，太多了，无法进入。
4.  它不一定是 RabbitMQ，但性能需要一样好。ØMQ 看起来非常有趣，并且可能同时提供灵活性和性能，但我们已经在使用 RabbitMQ，并且在阅读了色彩缤纷的 ØMQ 指南的前半部分之后，我仍然不确定它是否会支持我们需要的路由但是看起来我们几乎必须写一个经纪人来做这件事。
5.  实际上，我们有幸知道哪些主机能够为哪些作业提供服务，所以我们可以做一些事情，比如让 host1 订阅 #.host1.#，让 host2 订阅 #.host2.#。然后当我们路由一个 classB 消息时，我们可以给它一个 host1.host2 的键来指示哪些后端可以接受服务。这简化了路由规则，但仍然没有解决所描述的问题。

# git - git-cvsimport 无法导入名称中包含星号的标签 (*)

> ID：10136944
> 
> 赞同：1
> 
> 时间：2012-04-13T07:38:59.577
> 
> 标签：git, cvs

我正在尝试将`cvs`存储库导入到`git`使用`git cvsimport`. 它说：`Cannot create tag aspect-10*2-root: Illegal seek`。我查看了`git cvsimport`man 并没有找到用另一个符号替换标签/分支名称中的任意符号的可能性，也没有找到省略某些标签的方法。当`git cvsimport`遇到标签包含星号时，它会以错误退出并且不会`git`创建任何 repo。请告知如何解决这个问题。

# php - 为什么我的查询不起作用

> ID：10136945
> 
> 赞同：0
> 
> 时间：2012-04-13T07:39:03.753
> 
> 标签：php, mysql

我的查询突然停止工作。我知道它是荷兰语，但你能发现任何错误吗？没有 MySQL 错误。他只是不会将 $content 写入屏幕。我尝试了很多东西。他只是停止工作

```
<?php
$activiteiten= "SELECT 
                activiteiten.ActiviteitID,
                activiteiten.Naam,
                activiteiten.plaatsen,
                agenda.TijdBegin,
                agenda.TijdEind,
                agenda.AgendaID,
                reserveren.ReserveringTijd

                FROM 
                activiteiten,
                agenda,
                reserveren

                WHERE

                agenda.ActiviteitID = activiteiten.ActiviteitID
                AND
                agenda.AgendaID = reserveren.AgendaID
                ";

$result = mysql_query($activiteiten) or die(mysql_error());

    $content .= '<tr>';

    $content .= '<td>'.$record['Naam'].'</td>';
    $content .= '<td>'.$record['ReserveringTijd'].'</td>';
    $content .='<td>Beschikbare plaatsen:'.$record['plaatsen'].'</td>';

    $agendaID= $record['AgendaID'];
    $agendaData = agendaData($agendaID);

    $content.= '<td>aantal reserveringen:'.$agendaData["reserveringen"].'</td>';
    $content.= '</tr>';

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:42:41.583

你做了 a `mysql_query`，但你从不填充`$record`变量。你希望它有怎样的内容？

尝试添加：

```
$record = mysql_fetch_array( $result ); 
```

之后`mysql_query`。

您需要了解这是两件不同的事情：

1.  mysql_query 将在服务器上执行查询
2.  mysql_fetch_array （和朋友）将以所需的格式获得结果。

如果只执行 1，则执行查询。这很好用，但是如果您对结果感兴趣，则需要获取它们。有时您不需要（例如，当查询不是选择时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T07:42:52.540

> 没有 MySQL 错误。他只是不会将 $content 写入屏幕。

添加什么：

```
echo $content; 
```

如果您不打印它，那么您将看不到任何东西:)

除此之外，你不是在混合`$result`和`$record`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T07:43:10.297

您的代码在 mysql_query 之后缺少 mysql_fetch_assoc 调用，它应该是这样的：

```
$result = mysql_query($activiteiten) or die(mysql_error());

while(false != ($record = mysql_fetch_assoc($result))
{
    $content .= '<tr>';

    $content .= '<td>'.$record['Naam'].'</td>';
    $content .= '<td>'.$record['ReserveringTijd'].'</td>';
    $content .='<td>Beschikbare plaatsen:'.$record['plaatsen'].'</td>';

    $agendaID= $record['AgendaID'];
    $agendaData = agendaData($agendaID);

    $content.= '<td>aantal reserveringen:'.$agendaData["reserveringen"].'</td>';
    $content.= '</tr>';

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T07:43:25.560

停止工作并且没有打印出任何错误会让人怀疑数据库中的数据已经以某种方式发生了变化，并且查询根本没有得到任何行。

在 phpMyAdmin 等数据库环境中执行查询并检查是否返回任何行。

否则检查 mysql-php 相关错误的其他答案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T11:22:01.187

```
$result = mysql_query($activiteiten) or die(mysql_error());

while ($record = mysql_fetch_array($result, MYSQL_ASSOC))
{
    // Your $record now contains the data you want
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T07:44:56.027

您将查询结果存储在 $result 中，但您无需继续使用 $result 执行任何操作 - 您需要执行以下操作：

```
$record = mysql_fetch_assoc($qry_result); 
```

从 $result 中检索记录结果。如果您期望多个结果，则需要使用 while 循环来遍历所有结果

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T11:06:57.247

改变：

```
 $content .= '<tr>'; 
```

至：

```
 $content = '<tr>'; 
```

并记住页面上的`echo`。`$content`

确保您有错误报告，以便您立即查看问题是否在于未初始化的 PHP 变量或其他地方。

# php - Magento 信用卡号与信用卡类型异常不匹配

> ID：10136966
> 
> 赞同：5
> 
> 时间：2012-04-13T07:40:51.887
> 
> 标签：php, magento

我正在使用 magento api，但在创建订单时遇到了一些问题。我已经能够完成所有工作，以创建正常工作的订单。我看到的问题是，当我调用方法来创建订单时，我总是会遇到异常：`Credit card number mismatch with credit card type.`

我正在运行 Magento 版本。1.6.2.0

我已经验证我正在测试的卡可以通过 magento 前端工作。

对此的任何帮助将不胜感激。

这是我正在使用的测试代码：

```
<?php
$proxy = new SoapClient('http://localhost/index.php/api/soap/?wsdl');
$sessionId = $proxy->login('shopapi', 'test123');

// Create a quote, get quote identifier
$shoppingCartId = $proxy->call( $sessionId, 'cart.create');

// Set customer, for example guest
$customerAsGuest = array(
    "firstname" => "testFirstname",
    "lastname" => "testLastName",
    "email" => "test@test.com",
    //"website_id" => "0",
    //"store_id" => "0",
    "mode" => "guest"
);
$resultCustomerSet = $proxy->call($sessionId, 'cart_customer.set', array( $shoppingCartId, $customerAsGuest) );

// Set customer addresses, for example guest's addresses
$arrAddresses = array(
    array(
        "mode" => "shipping",
        "firstname" => "testFirstname",
        "lastname" => "testLastname",
        "company" => "testCompany",
        "street" => "testStreet",
        "city" => "testCity",
        "region" => "CA",
        "postcode" => "90049",
        "country_id" => "US",
        "telephone" => "0123456789",
        "fax" => "0123456789",
        "is_default_shipping" => 0,
        "is_default_billing" => 0
    ),
    array(
        "mode" => "billing",
        "firstname" => "testFirstname",
        "lastname" => "testLastname",
        "company" => "testCompany",
        "street" => "testStreet",
        "city" => "testCity",
        "region" => "CA",
        "postcode" => "90049",
        "country_id" => "US",
        "telephone" => "0123456789",
        "fax" => "0123456789",
        "is_default_shipping" => 0,
        "is_default_billing" => 0
    )
);
$resultCustomerAddresses = $proxy->call($sessionId, "cart_customer.addresses", array($shoppingCartId, $arrAddresses));

// add products into shopping cart
$arrProducts = array(
    array(
        "product_id" => "1",
        "qty" => 1
    )
);
$resultCartProductAdd = $proxy->call($sessionId, "cart_product.add", array($shoppingCartId, $arrProducts));

// get list of products
$shoppingCartProducts = $proxy->call($sessionId, "cart_product.list", array($shoppingCartId));

// set payment method
$paymentMethod = array(
    "method" => "authorizenet",
    "cc_type" => 'MC',
    "cc_number" =>'5555555555554444' ,
    "cc_exp_month" => 9,
    "cc_exp_year" => 2014,
    "cc_cid" => 123     
);
$resultPaymentMethod = $proxy->call($sessionId, "cart_payment.method", array($shoppingCartId, $paymentMethod));

// create order
$resultOrderCreation = $proxy->call($sessionId,"cart.order",array($shoppingCartId));
var_dump($resultOrderCreation);
 ?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T08:34:50.217

根据您的帖子，您对 cart_payment.method 的调用成功，因此 CC 号码正在验证为 MC 卡，正如预期的那样。

问题是 Magento 出于 PCI 的考虑，不会将 CC 编号保存在数据库中（在大多数情况下）。

因此，当您在一个请求中发送付款详细信息以及 CC 编号和 CID，然后在另一个请求中创建订单时，状态将丢失，CC 编号和 CID 被清除。

创建订单时，付款数据会再次验证，当这种情况发生时，它有一个空的 CC 编号，类型为 MC，从而导致您看到的错误。

不幸的是，我看不到让 cart.order 接受付款数据的方法。

您可以编写一个模块来使用一种新方法扩展结帐 API，该方法在一次调用中完成这两个步骤，这可能会解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-31T01:19:12.003

我也遇到了这个问题。我的解决方案是创建一个自定义 SOAP 端点，它可以一次处理所有订单创建和提交逻辑，而无需多次 API 调用。

即使这样，我也遇到了卡片类型不匹配的异常。

诀窍是，一旦我使用 getPayment->importData 方法设置付款信息、收集总计并保存报价，它似乎忘记了卡信息。可能是为了（不是处理的最佳方式）PCI-DSS 合规性。

为了解决这个问题，我在保存报价后添加了另一个 getPayment->importData 行，然后再提交订单。

这是在不更改任何核心文件的情况下实现的。

参见示例：

```
public function customCheckout($checkoutData=false)
  {
    if(!$checkoutData){
      Mage::throwException("No checkout data received.");
    }
    if(!json_decode($checkoutData)){
      Mage::throwException("Bad checkout data received.");
    }

    $data = json_decode($checkoutData);

    $email = 'email@email.cc';

    // get the basic store info to associate with order
    $websiteId  = Mage::app()->getWebsite()->getId();
    $store      = Mage::app()->getStore();

    // begin checkout with a quote
    $quote    = Mage::getModel('sales/quote')->setStoreId($store->getId());

    // set customer by email
    $customer = Mage::getModel('customer/customer')
                  ->setWebsiteId($websiteId)
                  ->loadByEmail($email);

    // handle customer not exists by creating a new customer
    if($customer->getId() == ''){
      $customer = Mage::getModel('customer/customer');
      $customer->setWebsiteId($websiteId)
               ->setStore($store)
               ->setFirstName("Bob")
               ->setLastName("Loblaw")
               ->setEmail($email)
               ->setPassword('password');
      $customer->save();
    }

    // assign customer to SO quote
    $quote->assignCustomer($customer);

    // do we want to send a confirmation email to the customer?
    // my guess is we would handle that in a separate service.
    $quote->setSendConfirmation(0);

    // add products to quote
    foreach($data->products as $item){
      $product = Mage::getModel('catalog/product')->load($item->id);
      $quote->addProduct($product,new Varien_Object(array('qty'=>$item->qty)));
    }

    // set SO billing address
    $billingAddress = $quote->getBillingAddress()->addData(array(
      'customer_address_id' => '',
      'prefix' => '',
      'firstname' => $data->customer->firstName,
      'middlename' => '',
      'lastname' => $data->customer->lastName,
      'suffix' => '',
      'company' => '',
      'street' => array(
        '0' => 'street1',
        '1' => 'street2'
      ),
      'city'=>'city',
      'country_id'=>'US',
      'region'=>'WA',
      'postcode'=>'98101',
      'telephone' => '425-425-4254',
      'fax' => '789-789-7897',
      'vat_id' => '',
      'save_in_address_book' => 0
    ));

    // set SO shipping address, this will probably be the location of sale, on-site
    $shippingAddress = $quote->getShippingAddress()->addData(array(
      'customer_address_id' => '',
      'prefix' => '',
      'firstname' => $data->customer->firstName,
      'middlename' => 'middle',
      'lastname' => $data->customer->lastName,
      'suffix' => '',
      'company' => '',
      'street' => array(
        '0' => 'street1',
        '1' => 'street2'
      ),
      'city'=>'city',
      'country_id'=>'US',
      'region'=>'WA',
      'postcode'=>'98201',
      'telephone' => '425-425-4254',
      'fax' => '789-789-7897',
      'vat_id' => '',
      'save_in_address_book' => 0
    ));

    // set shipping method, if it's sold on site we aren't charging for delivery
    $shipMethod='freeshipping_freeshipping';

    $shippingAddress->setCollectShippingRates(true)
                    ->collectShippingRates()
                    ->setShippingMethod($shipMethod)
                    ->setPaymentMethod($data->payment->method);

    // set payment method
    $quote->getPayment()->importData(array(
      'method'      =>$data->payment->method,
      'cc_type'     =>$data->payment->type,
      'cc_number'   =>$data->payment->number,
      'cc_exp_year' =>$data->payment->expYear,
      'cc_exp_month'=>$data->payment->expMonth,
    ));

    // collect totals, save quote
    $quote->collectTotals()->save();

    // turn the quote into an order
    $service = Mage::getModel('sales/service_quote',$quote);

    // set payment method A SECOND TIME!!!!!!!!!!!!!
    $quote->getPayment()->importData(array(
      'method'      =>$data->payment->method,
      'cc_type'     =>$data->payment->type,
      'cc_number'   =>$data->payment->number,
      'cc_exp_year' =>$data->payment->expYear,
      'cc_exp_month'=>$data->payment->expMonth,
    ));

    $service->submitAll();
    $increment_id = $service->getOrder()->getRealOrderId();

    $quote = $customer = $service = null;

    $retval = new stdClass;
    $retval->orderId = $increment_id;

    return json_encode($retval);
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T14:19:36.767

我从未对付款方式代码进行过成功的 API 交易`authorizenet`。这只总是通过前端成功，不知道为什么..我也没有时间调查原因。虽然我一直做的是使用`authorizenet_direct`post 代替。我背后的原因/我是如何偶然发现这一点的，这同样适用于 Paypal 支付方式。API 似乎只适用于`paypal_direct`or `paypaluk_direct`。尝试一下！它应该工作。至少，这对我有用。

```
$paymentMethod = array(
    "method" => "authorizenet_directpost",
    "cc_type" => 'MC',
    "cc_number" =>'5555555555554444' ,
    "cc_exp_month" => 9,
    "cc_exp_year" => 2014,
    "cc_cid" => 123     
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T03:35:32.040

实际上，我刚刚发现了一种通过 API 进行 authorize.net 付款的方法。

首先在 /app/code/core/Mage/Payment/Model/Method/Cc.php 中，取消注释关于保存 cid 的行，所以函数在第 65 行看起来像这样

```
public function prepareSave()
{
    $info = $this->getInfoInstance();
    if ($this->_canSaveCc) {
        $info->setCcNumberEnc($info->encrypt($info->getCcNumber()));
    }
    $info->setCcCidEnc($info->encrypt($info->getCcCid()));
    $info->setCcNumber(null)
        ->setCcCid(null);
    return $this;
} 
```

然后在您的付款方式的主模型文件中，确保将变量设置为：

```
 protected $_canSaveCc = true; 
```

我已经使用它测试了 2 种付款方式，现在都可以通过 API 正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-23T05:22:47.863

这是我的解决方案：转到 /app/code/core/Mage/Payment/Model/Method/Cc.php 并查看功能：

```
public function prepareSave()
{
    $info = $this->getInfoInstance();
    if ($this->_canSaveCc) {
        $info->setCcNumberEnc($info->encrypt($info->getCcNumber()));
    }
    //$info->setCcCidEnc($info->encrypt($info->getCcCid()));
    $info->setCcNumber(null)
        ->setCcCid(null);
    return $this;
} 
```

只有评论行：

```
$info->setCcNumber(null)
 ->setCcCid(null); 
```

# java - 将文件加载到 jar 中

> ID：10136969
> 
> 赞同：1
> 
> 时间：2012-04-13T07:40:56.877
> 
> 标签：java, file-io, properties

我正在加载一个道具并保存它

```
File propfile=new File(getClass().getResource("credentials.properties").toURI());
                prop.load(new FileInputStream(propfile));
            prop.setProperty("a", username);
            prop.setProperty("c", password);
            prop.setProperty("b", pbKey);
            prop.store(new FileOutputStream(propfile), null); 
```

当我通常在 netbeans 中运行它时它很好，当它捆绑到 .jar 文件中时它会抛出

```
Caused by: java.lang.IllegalArgumentException: URI is not hierarchical
    at java.io.File.(Unknown Source) 
```

* * *

现在当我使用

```
 getClass().getResourceAsStream("credentials.properties"); 
```

我可以读取文件，但我无法保存文件，除非我使用`.toURI()` as in ->[将更改存储在已通过 getClass().getResourceAsStream 读取的 .properties 文件中](https://stackoverflow.com/questions/5589012/storing-changes-in-properties-file-that-has-been-read-via-getclass-getresourc)

所以当我使用 toURI() 并运行它（jar 文件）时，它会大声说 `URI is not hierarchical`

当我使用时`getResourceAsStream`，我无法保存文件

我该怎么办？属性文件与类在同一个包中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T07:43:58.673

如果您只需要*加载*属性，则根本不应该使用`File`- 您应该使用`getResourceAsStream`.

如果您需要再次*保存*属性，则不能轻松地将它们保存在 jar 文件中。每次保存时都需要重建 jar 文件 - 哎呀！

如果您*确实*需要两者，您可能需要考虑在第一次需要保存更改时创建一个文件：加载时，如果文件存在，则使用该文件，否则使用 jar 文件中的版本。

编辑：如果您正在构建桌面应用程序并且这些基本上是用户偏好，您应该查看[`Preferences`API](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html)。如果您要存储密码，也要*非常*小心......如果可能的话，请避免这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:44:54.003

尝试：

```
File userFile = new File(System.getProperty("user.home"), "myProgram.properties");
if(userFile.exists()) {
    prop.load(new FileInputStream(userFile));
} else {
    prop.load(getClass().getResourceAsStream("credentials.properties"));
}

prop.setProperty("a", username);
prop.setProperty("c", password);
prop.setProperty("b", pbKey);
prop.store(new FileOutputStream(userFile), null); 
```

（请注意，user.home 并非每次都在每台机器上工作，但它应该每次都在旁边工作。）

# ios - ResKit 的 REST Web 服务

> ID：10136971
> 
> 赞同：0
> 
> 时间：2012-04-13T07:41:13.737
> 
> 标签：ios, rest, restkit

我很困惑要遵循哪些 REST API 将与 RestKit 同步。我在发出 put/post/delete 请求时遇到问题。

我遵循的 REST API 之一来自[NetTuts](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)，我发现它很难与 RestKit 同步。

有什么建议么？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:39:55.237

RestKit 是一个通用框架，用于通过 HTTP 使用 JSON/XML。它将与任何后端互操作，只要有效负载可以表示为键值编码键路径。

# android - 将 SQLite db 复制到存储设备以进行备份

> ID：10136978
> 
> 赞同：0
> 
> 时间：2012-04-13T07:42:21.723
> 
> 标签：android, sqlite, backup

我有一个应用程序，我正在更新我的 SQLite db 文件，但是每次当用户卸载这个应用程序时，这个 db 文件都会被删除，并且在重新安装时会创建一个新的 db 文件。我想在每次更新后将此数据库文件复制到微型 SD 卡，以便在卸载后我可以访问我的数据库。

每次更新 db 文件时的目标复制

1.  创建时说 text.db
2.  现在我想将此 db 文件复制到 micro SD 卡
3.  此 db 文件（应用程序 db 文件）正在更新
4.  现在将这个 db 文件复制并替换到 micro sd 卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:51:38.827

将数据库复制到 SD 卡的 Sudo 代码。要将其复制回来，只需反转流。

```
 public boolean copyDatabase() {
            String SDCardPath = Environment.getExternalStorageDirectory().getAbsolutePath();
            // Create the directory if neccesary.
            File directory = new File(SDCardPath  + <PATH TO SD-CARD SAVE LOCATION>);
            if (!directory.exists())
                    directory.mkdir();

            // Close the database before trying to copy it
            database.close();

            // Copy database to SD-card
            try {
                    InputStream mInput = new FileInputStream(<PATH TO DATABASE ON PHONE>);
                    OutputStream mOutput = new FileOutputStream(SDCardPath + <PATH TO SD-CARD SAVE LOCATION>);

                    byte[] buffer = new byte[1024];
                    int length;
                    while ((length = mInput.read(buffer)) > 0) {
                            mOutput.write(buffer, 0, length);
                    }
                    mOutput.flush();
                    mOutput.close();
                    mInput.close();
            } catch (Exception e) {

            }

            return database.open();
    } 
```

# android - 如何在不可用时捕获互联网错误

> ID：10136979
> 
> 赞同：0
> 
> 时间：2012-04-13T07:42:21.723
> 
> 标签：android

您好先生在登录页面我正在验证服务器数据库中的用户名和密码。如果 net 存在意味着我的应用程序工作正常。如果我断开互联网意味着我的应用程序运行意味着它显示错误应用程序没有响应。如何消除此类错误

```
 i try this code
        if(name.equals("") || pass.equals(""))
            {
                 Toast.makeText(Main.this, "Please Enter Username and Password", Toast.LENGTH_LONG).show();
            }
            else
            {

            try {
                httpclient = new DefaultHttpClient();
                httppost = new HttpPost("server url/login.php");
                // Add your data
                nameValuePairs = new ArrayList<NameValuePair>(2);
               nameValuePairs.add(new BasicNameValuePair("UserEmail", name.trim()));
                nameValuePairs.add(new BasicNameValuePair("Password", pass.trim()));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                response = httpclient.execute(httppost);
                inputStream = response.getEntity().getContent();

                data = new byte[256];

                buffer = new StringBuffer();
                int len = 0;
                while (-1 != (len = inputStream.read(data)) )
                {
                    buffer.append(new String(data, 0, len));
                }

                inputStream.close();
            }

            catch (IOException e) {
                 System.out.println(e);

                 //alertDialog.cancel();

            }
            if(buffer.charAt(0)=='Y')
            {

                Intent intent=new Intent(getApplicationContext(),ManagerHandset.class);
                startActivity(intent);
            }
            else
            {
                Toast.makeText(Main.this, "Invalid Username or password", Toast.LENGTH_LONG).show();
            }
            }
        }
    }); 
```

如果我想断开我的网络意味着如何显示警报网络不可用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:49:25.367

您可以通过此类功能检查您的互联网连接：

```
public boolean isNetworkAvailable(Context context) {
    boolean value = false;

    ConnectivityManager connec = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED
            || connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED) {
        value = true;
    }

    // Log.d ("1", Boolean.toString(value) );
    return value;
} 
```

请记住，您在 Manifest 文件中添加了以下权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

**编辑**

```
if (isNetworkAvailable(getApplicationContext()))
{
       // Do whatever you want to do
}
else{

         new AlertDialog.Builder(YourActivitName.this)
        .setTitle("Error")
        .setMessage("Your Internet Connection is not available at the moment. Please try again later.")
        .setPositiveButton(android.R.string.ok, null)
        .show();
 } 
```

希望这对你有用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:46:11.683

你可以使用这样的东西：

```
private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager
    .getActiveNetworkInfo();
    return activeNetworkInfo != null;
} 
```

如果它返回`true`继续您的正常代码，则显示一条消息..也在您的清单文件中添加

```
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:50:29.963

如果网络可用，请检查互联网连接..

```
private boolean isOnline()
{
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnected()) 
    {
        return true;
    } 
    else 
    {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T08:58:47.837

在发起网络呼叫之前检查网络状态是一个好习惯，其他响应中解释的所有方法都是正确的。链接到[android 文档](http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html)。

如果您的应用程序在网络断开时没有响应，这意味着您正在主线程上声明您的 HTTP 请求。你永远不应该那样做。

即使当网络通过 Wifi 连接正常运行时，您也会在缓慢的 EDGE 连接上遇到相同的“无响应”错误。

要在主线程之外发出 HTTP 请求，您应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，原理在[android doc](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html#WorkerThreads)中进行了说明。

# c++ - 为什么调用移动构造函数和移动赋值运算符而不是复制？

> ID：10136984
> 
> 赞同：0
> 
> 时间：2012-04-13T07:42:44.343
> 
> 标签：c++, boost, stl, c++11

> **可能重复：**
> [防止非 const 左值解析为右值引用而不是 const 左值引用](https://stackoverflow.com/questions/7748104/preventing-non-const-lvalues-from-resolving-to-rvalue-reference-instead-of-const)
> [复制构造函数和转发构造函数之间的冲突](https://stackoverflow.com/questions/9287250/conflict-between-copy-constructor-and-forwarding-constructor)

我有存储 std::unique_ptr 所需的这些类（改编的 boost::any）：

```
class any
{
public:
  any()
    : content(0)
  {
  }

  any(any const&) = delete;

  any(any && other)
    : content(other.content)
  {
    content = 0;
  }

  template<typename ValueType>
  any(ValueType const& value)
    : content(new holder<ValueType>(value))
  {
  }

  template<typename ValueType>
  any(ValueType && value,
    typename std::enable_if<!std::is_lvalue_reference<ValueType>::value,
    void>::type* = 0)
    : content(new holder<ValueType>(std::move(value)))
  {
  }

  ~any()
  {
    delete content;
  }

public: // modifiers

  any & swap(any & rhs)
  {
    std::swap(content, rhs.content);
    return *this;
  }

  any & operator=(const any &) = delete;

  any & operator=(any && rhs)
  {
    return swap(rhs);
  }

  template<typename ValueType>
  any & operator=(ValueType const& rhs)
  {
    any(rhs).swap(*this);
    return *this;
  }

  template<typename ValueType>
  typename std::enable_if<!std::is_lvalue_reference<ValueType>::value,
    any&>::type operator=(ValueType && rhs)
  {
    any(std::move(rhs)).swap(*this);
    return *this;
  }

public: // queries

  bool empty() const
  {
    return !content;
  }

  const std::type_info & type() const
  {
    return content ? content->type() : typeid(void);
  }

private: // types

  class placeholder
  {
  public: // structors

  virtual ~placeholder()
  {
  }

  public: // queries
    virtual const std::type_info & type() const = 0;
  };

  template<typename ValueType>
  class holder : public placeholder
  {
  public: // structors
    template <class T>
    holder(T && value)
      : held(std::forward<T>(value))
    {
    }

    holder & operator=(const holder &) = delete;

  public: // queries
    virtual const std::type_info & type() const
    {
      return typeid(ValueType);
    }

  public:

    ValueType held;
  };

private: // representation

  template<typename ValueType>
  friend ValueType * any_cast(any *);

  template<typename ValueType>
  friend ValueType * unsafe_any_cast(any *);

  placeholder * content;
}; 
```

这个测试用例：

```
any a;
any b(a);

b = a; 
```

和这个：

```
std::map<int, int> map({{1,1},{2,2}});
any b(map);
std::cout << map.size() << std::endl; // displays 0 
```

令我恐惧的是，在 gdb 下，我注意到在构造和分配`b`（甚至从地图）时调用了移动构造函数和移动赋值运算符，即使我没有标记`a`并且`std::move`它不是临时的。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:47:59.647

我的第一个答案是错误的。再次阅读您非常不可读的代码后，我看到您明确提供了移动和默认构造函数，但没有复制构造函数。如果一个类有*任何*用户定义的构造函数（你有两个），编译器将不会为该类生成任何其他构造函数。因此，**您的类没有复制构造函数**。

**编辑**：所以，回到我原来的答案（由您的评论提示）。§12.8/7 [class.copy] 说：

> 永远不会实例化成员函数模板来执行将类对象复制到其类类型的对象。[例子：
> 
> ```
> struct S { 
>     template<typename T> S(T); 
>     template<typename T> S(T&&);
>     S(); 
> }; 
> 
> S f(); 
> const S g; 
> 
> void h() { 
>     S a( f() );          // does not instantiate member template; 
>                          // uses the implicitly generated move
>     constructor S a(g);  // does not instantiate the member template; 
>                          // uses the implicitly generated copy constructor
> } 
> ```
> 
> —结束示例]

由于您的复制构造函数是成员模板，但您的移动构造函数不是，因此在此处选择后者（您的情况在这方面与示例不同）。

# c++ - 如何为调用 CreateThread、LPTHREAD_START_ROUTINE、lpStartAddress、ThreadProc 键入定义

> ID：10136985
> 
> 赞同：-2
> 
> 时间：2012-04-13T07:42:49.633
> 
> 标签：c++, c, windows, winapi, winmain

警告：这是一个示例代码。

我需要定义这个 typedef 和这个定义来让代码编译得很好。

我有以下代码，我需要知道**__WHAT_HERE1 和 _** _WHAT_HERE2 中应该包含什么：

```
 #include <windows.h>
    #include <winbase.h>

_ifdef _WIN32_
    typedef ____WHAT_HERE1 THREAD_TYPE;
_endif

_ifdef _LINUX_
    typedef void (*THREAD_TYPE);
_endif

    THREAD_TYPE thread_function( void * )
    {

    }

    class ThreadInfo {
    public:
_ifdef _WIN32_
        ____WHAT_HERE2 func;
        LPVOID args;
_endif
_ifdef _LINUX_
    void *(*func) (void*);
    void *args;
_endif
    }

    ThreadInfo *infoThread;

    CreateThread(
        NULL, 
        0, 
        (LPTHREAD_START_ROUTINE) infoThread->func, 
        infoThread->args, 
        0, 
        NULL
    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:53:18.327

您可以从粘贴的代码中推断出类型：

1.  根据[`CreateThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453%28v=vs.85%29.aspx)文档，第三个参数是 type `LPTHREAD_START_ROUTINE`。你显然已经意识到了这一点，因为你对此`infoThread->func`进行了投射。

2.  因此，`____WHAT_HERE2`（的类型`infoThread->func`）应该是`LPTHREAD_START_ROUTINE`。

3.  由于您可能会将函数的地址分配给 ，因此`thread_function`函数`infoThread->func`的返回值（`____WHAT_HERE1`在您的代码草图中由 表示）应该是由 表示的返回类型`LPTHREAD_START_ROUTINE`。检查[`LPTHREAD_START_ROUTINE`](http://msdn.microsoft.com/en-us/library/aa964928.aspx)文档表明这是`DWORD`.

但是，这还不够，因为在 Windows 上，线程过程使用`__stdcall`调用约定。在定义`thread_function`.

# mysql - MySql 视图/程序按月列出一年中的所有星期

> ID：10136987
> 
> 赞同：1
> 
> 时间：2012-04-13T07:42:55.580
> 
> 标签：mysql, date

就像标题说的那样，我需要有一个最终结果，在一行上我有年月和周......

像这样的东西：

```
------------------------
| Year | Month | Week  |  
| 2012 |   1   |   1   |  
| 2012 |   1   |   2   |  
| 2012 |   1   |   3   |  
| 2012 |   1   |   4   |  
| 2012 |   1   |   5   |  
| 2012 |   2   |   5   | 
```

等等...

是否可以生成这样的视图（也使用一些支持表）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:28:54.113

您可以使用存储过程来做到这一点：

```
DELIMITER $$

CREATE PROCEDURE createDatesTable()
BEGIN

DECLARE FullDate date;

DROP TABLE IF EXISTS dates;
CREATE TABLE dates(
date_key date NOT NULL,
calendarYear int NOT NULL,
calendarQuarter tinyint NOT NULL,
calendarMonthNo int NOT NULL,
calendarWeekNo tinyint NOT NULL,
dayNumberOfMonth tinyint NOT NULL,
dayNumberOfWeek tinyint NOT NULL,
PRIMARY KEY (date_key));

SET FullDate  = '2012-01-01';

WHILE (FullDate <= '2012-12-31') DO 
BEGIN

INSERT INTO dates( 
    date_key,
    calendarYear,
    calendarQuarter,
    calendarMonthNo,
    calendarWeekNo,
    dayNumberOfMonth,
    dayNumberOfWeek
)VALUES( 
    FullDate,
    YEAR(FullDate),
    QUARTER(FullDate),
    MONTH(FullDate),
    WEEK(FullDate, 1), /*Have a look at the WEEK() function in the manual!!!*/
    DAYOFMONTH(FullDate),
    DAYOFWEEK(FullDate)
);

SET FullDate = DATE_ADD(Fulldate, INTERVAL 1 DAY);
END;
END WHILE;
END ;
$$
DELIMITER ; 
```

然后做一个`call createDatesTable()`

你的桌子就会被填满。

重要提示：ypercube 的评论是正确的。你必须考虑到这一点。因此，请查看[WEEK() 函数](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_week)及其支持的模式。相应地调整程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T18:49:07.830

添加为该表的扩展！
如果有人正在寻找如何获取每周的日期范围（第一个日期和最后一个日期），则以下代码将执行此操作：

```
SELECT date_key AS first_date, MAX(date_key) AS last_date, calendarWeekNo AS week_no 
FROM dates WHERE calendarYear = 2013
GROUP BY `calendarWeekNo`
ORDER BY `calendarWeekNo` ASC 
```

只需将***年份***更改为您选择的选定年份！上面的例子是*2013*。

**结果：**

```
first_date | last_date  | week_no
---------------------------------
2013-01-01 | 2013-01-06 | 1
2013-01-07 | 2013-01-13 | 2
2013-01-14 | 2013-01-20 | 3

etc, etc, etc... 
```

# xml - 将嵌入图像转换（转换）为链接图像

> ID：10136988
> 
> 赞同：0
> 
> 时间：2012-04-13T07:42:57.323
> 
> 标签：xml, xslt, wordml

带有嵌入图像的 WordML (2003) 文件在标签中包含 base64 编码的图像，`<w:binData>`稍后在`<v:shape>`标签中引用：

```
<w:binData w:name="wordml://08000001.jpg">
  // encoded data //
</w:binData>
<v:shape id="_x0000_i1026" type="#_x0000_t75">
  <v:imagedata src="img/08000001.jpg" />
</v:shape> 
```

我找不到任何 XSLT 或通用编程语言脚本可以将这个带有嵌入图像的 Word XML 文件转换为带有链接图像的文件 - 将 WordML 嵌入图像数据提取到外部文件并引用它，即将编码数据提取到`images/08000001.jpg`，删除内联编码图像（`<w:binData>`标签）并引用它：

```
<v:shape id="_x0000_i1026" type="#_x0000_t75">
  <v:imagedata src="images/08000001.jpg" />
</v:shape> 
```

例如，[WordML2LaTeX](http://ctan.org/pkg/wordml2latex)可以转换为 LaTeX，但它会丢失所有嵌入的图像，因为它需要链接所有图像。或保留嵌入图像的
MS/RenderX [WordML2FO](http://www.renderx.com/tools/word2fo.html)

# linux - 映射 2 个目录 linux-server

> ID：10136990
> 
> 赞同：0
> 
> 时间：2012-04-13T07:43:01.760
> 
> 标签：linux, .htaccess, ubuntu, webserver

我有一个网站 mydomain.com。父目录包含（除其他外）httpdocs 和 web_users。web_users 包含一个文件夹 myFolder。

我创建了一个指向 httpdocs 的符号链接（ln -s），一切顺利。但是现在，当我尝试访问 mydomain.com/myFolder 时，出现错误：

> 禁止 您无权访问此文档。
> 
> mydomain.com 上的 Web 服务器

我怎样才能使这项工作？我必须调整我的 .htaccess 吗？

问候，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:46:13.697

这似乎是一个文件权限问题。确保您的 Web 服务器用户（通常是 www-data 或 httpd）对您的 myFolder 目录具有读取权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:48:16.570

1、一定要启用

```
Option FollowSymLinks 
```

文档：[http ://httpd.apache.org/docs/2.2/mod/core.html#Options](http://httpd.apache.org/docs/2.2/mod/core.html#Options)

2、确保apache进程对你的目录有读权限，尝试

```
chmod 0777 myFolder 
```

到您的文件夹或

```
chown [apacheuser] myFolder 
```

这应该解决它

# iphone - 如何在iphone中动态更改按钮标题

> ID：10136992
> 
> 赞同：0
> 
> 时间：2012-04-13T07:43:07.743
> 
> 标签：iphone

我有一个要求，需要用现有标题更改按钮标题，例如按钮标题是“Others”，在运行时需要更改“Others(3)”。需要知道如何将整数值 (3) 与按钮标题相匹配。

请对此提供帮助这是按钮源代码。

```
 mOthersBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [mOthersBtn setTitle:@"Others" forState:UIControlStateNormal];
        [mOthersBtn addTarget:self action:@selector(mOthersClick) forControlEvents:UIControlEventTouchUpInside];
        mOthersBtn.frame = CGRectMake(20, 320, 280, 25);
        [self.view addSubview:mOthersBtn]; 
```

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:47:11.553

只需使用 stringWithFormat：

```
NSInteger count = 3;
[button setTitle:[NSString stringWithFormat:@"Others (%i)", count] forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T08:56:54.843

NSInteger c = 2; [button setTitle:[NSString stringWithFormat:@"Others (%i)", c] forState:UIControlStateNormal];

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T07:57:15.517

试试下面的代码

```
NSString *str = [NSString stringWithFormat:@"Run time text here"];

[button setTitle: str forState:UIControlStateNormal]; 
```

# javascript - 如何使用 jQuery 从 HTML 表中提取数据到关联数组中？

> ID：10136993
> 
> 赞同：1
> 
> 时间：2012-04-13T07:43:07.750
> 
> 标签：javascript, jquery, html, html-table, associative-array

假设我有这样的 HTML，

```
<table id="Words">
<tr>
    <td class="cell">Hello</td>
    <td class="desc">A word</td>
</tr>
<tr>
    <td class="cell">Bye</td>
    <td class="desc">A word</td>
</tr>
<tr>
    <td class="cell">Tricicle</td>
    <td class="desc">A toy</td>
</tr> 
```

是否有任何优雅的方式/功能可以将其转换为 Javascript 关联数组？怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T07:52:00.787

```
$('tr').map(function(){
    return {
        cell: $('.cell', this).text(),
        desc: $('.desc', this).text()
    }
}) 
```

* * *

```
jQuery(Object { cell="Hello", desc="A word"}, Object { cell="Bye", desc="A word"}, Object { cell="Tricicle", desc="A toy"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:52:02.830

[http://jsfiddle.net/cyFW5/](http://jsfiddle.net/cyFW5/) - 在这里，它适用于每个类的 td

```
$(function() {

    var arr = [],
        tmp;

    $('#Words tr').each(function() {

        tmp = {};

        $(this).children().each(function() {

            if ($(this).attr('class')) {
                tmp[$(this).attr('class')] = $(this).text();
            }

        });

        arr.push(tmp);
    });

    console.log(arr);

});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T07:58:13.563

```
var table = [];
$('table tr').each(function() {
    var row = [];
    $(this).find('td').each(function() {
        var cell = {};
        cell[$(this).attr('class')] = $(this).html();
        row.push(cell);
    });
    table.push(row);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T07:49:49.073

[这是一个演示](http://jsfiddle.net/WZETm/)，请观看控制台。

```
$(function() {

    var words = [];

    $('#Words tr').each(function() {
        words.push({
            cell: $('.cell', this).text(),
            desc: $('.desc', this).text()
        });
    });

    console.log(words);

});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T07:51:13.393

鉴于这个特定的用例，那么这将起作用：

```
var results = {};
$('table#Words tr').each(function(i, x){
    results[i] = {
      desc: $(x).find('.desc').text(),
      cell: $(x).find('.cell').text()
    }
}); 
```

但是为什么要全部转换为对象呢？它的用途是什么，可能有一种更简单的方法来遍历数据。

# objective-c - 保存因断电中断的核心数据模型：持久存储迁移失败，缺少映射模型

> ID：10136995
> 
> 赞同：0
> 
> 时间：2012-04-13T07:43:13.117
> 
> 标签：objective-c, cocoa, core-data

我刚刚打开了一个客户的核心数据数据库，他在停电时正在使用该应用程序，所以他的 mac 在保存核心数据模型时关闭了。

调试器说：`Error: Persistent store migration failed, missing mapping model.`

是不是因为模型更新不正确，某些部分丢失/无效？

我可以做些什么来恢复这个数据库吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:02:18.300

显然，模型（.xcdatamodel 文件中描述的模型）不再与存储中的实际数据同步。当您对模型进行更改时会发生这种情况：添加实体、关系、更改属性等。

要将数据从存储传输到新模型，您可以使用核心数据映射模型（.xcmapingmodel 文件）。该文件描述了对数据模型的各种修改，并允许 Core Data 将数据从模型的先前版本迁移到新版本。如果此文件丢失，则无法将数据迁移/传输到模型的新版本。显然，从收到的消息来看，映射模型不存在。

造成这种情况的原因可能很多，可能是因为构建错误。仔细检查应用程序是否可以访问映射模型并重试。如果数据已损坏，您可以尝试使用数据的备份版本，并在停电之前使用时间戳，看看迁移是否可以从那里开始。

# c# - C#：获取用户访问令牌

> ID：10136999
> 
> 赞同：0
> 
> 时间：2012-04-13T07:43:23.223
> 
> 标签：c#, facebook, facebook-c#-sdk, facebook-oauth, facebook-access-token

我正在用 C# 开发一个桌面应用程序。

访问[https://www.facebook.com/dialog/oauth?client_id=123](https://www.facebook.com/dialog/oauth?client_id=123)后，用户登录并将用户访问令牌附加到重定向 uri。没问题，当登录页面显示在我的表单中的 webbrowser 控件中时，我可以从 url 中提取令牌。

但这不是我想要获得令牌的方式。我的问题是，有没有办法**通过 Graph API 调用**获取新创建的令牌？

因为我想在用户的标准浏览器中而不是在这个嵌入式网络浏览器中显示登录页面。我为获取*用户*访问令牌所做的所有努力都导致获取了*应用程序*访问令牌，在这种情况下这是无用的。

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:22:45.800

// 这是非常原始的，注意它是一个 MVC3 解决方案，但它是用 C# 编写的，我希望它有所帮助。// 它基本上是 FB 上用于“服务器端流程”的 PHP 示例的 C# 版本 // 我已经使用了一段时间并且不得不经历一些痛苦 // 请注意我读到的关于 redirect_uri 的错误//requests 必须相同 // 另请阅读，如果 redirect_uri 没有以 '/' 结尾，则有人遇到问题 // 如果您有任何 ?s 则回发，因为我刚刚开始这个项目并且将尝试和//合并 C# FaceBook SDK

```
public class AccountController : Controller
    {
        // LoginWithFaceBook
        // First Contact with FB - oauth?client_id ... redirect_uri = /Account/FacebookLinker 
        // according to a bug files on FB redirect_uri MUST BE SAME FOR both trips ( to get the 'code' then exchange the code for 'access_token'
        public ActionResult ConnectFaceBookAccount()
        {
            string APP_ID = HttpContext.Application["FacebookAppId"].ToString();
            string redirect_uri = HttpContext.Application["FacebookOAuthRedirect"].ToString();
            string state = HttpContext.Application["state_guid"].ToString();
            // in this View I simply link to this URL
            ViewBag.FaceBookOAuthUrl = "https://www.facebook.com/dialog/oauth?client_id=" + APP_ID + "&redirect_uri="+redirect_uri+"&state=" + state+"&display=popup";

            return View();
        }

        // Account/FacebookLinker
        //  redirect_uri for both getting 'code' and exchanging for 'access_token'
        public ActionResult FacebookLinker()
        {
            if (!Request.IsAuthenticated)
            {
                Response.Redirect("/Account/LogOn");
            }
            // Per FB DOC, Make sure 'state' var returned is same one you sent to reduce chance of Cross Site Forgery
            if (Request.QueryString["state"].ToString() == HttpContext.Application["state_guid"].ToString())
            {
                try
                {

                    string FBcode = Request.QueryString["code"].ToString();
                    string APP_ID = HttpContext.Application["FacebookAppId"].ToString();
                    string APP_SECRET = HttpContext.Application["FacebookAppSecret"].ToString();
                    string redirect_uri = HttpContext.Application["FacebookOAuthRedirect"].ToString();

                  string FBAccessUrl = "https://graph.facebook.com/oauth/access_token?client_id=" + APP_ID + "&redirect_uri=" + redirect_uri + "&client_secret=" + APP_SECRET + "&code=" + FBcode;

                string accessToken = null;
                // Send the request to exchange the code for access_token
                var accessTokenRequest = System.Net.HttpWebRequest.Create(FBAccessUrl);
                HttpWebResponse response = (HttpWebResponse) accessTokenRequest.GetResponse();

                 // handle response from FB 
                 // this will not be a url with params like the first request to get the 'code'
                Encoding rEncoding = Encoding.GetEncoding(response.CharacterSet);

                using(StreamReader sr = new StreamReader(response.GetResponseStream(),rEncoding))
                {
                    // parse the response to get the value of the 'access_token'
                    accessToken = HttpUtility.ParseQueryString(sr.ReadToEnd()).Get("access_token"); 
                }
                    //TODO
                    // Add to the accessToken for the Logged in User.Identity to a FBUSERS Model
                    // WHen someone Logs in Check to see if they are also in FB
                    // ON Login Page add option to login with FaceBook

                  return View();

                }
                catch (Exception exp)
                {
                    // try to get token failed

                }
            }
            else
            {
                 // state var form FB did not match state var sent

            }
            return View();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:59:12.380

我认为这是可以通过 URL 协议处理程序实现的；

1.  创建自定义 URL 协议处理程序（[MSDN：将应用程序注册到 URL 协议](http://msdn.microsoft.com/en-us/library/aa767914.aspx)）
2.  创建一个 facebook 页面，将用户访问令牌传递给您的 url 处理程序（例如 `myfbapp://accesstoken/{token}`）
3.  将 oauth 设置`redirect_uri`为您的 Facebook 页面
4.  在您的应用程序中解析访问令牌