# StackOverflow 问答 11618000-11618999

# ruby-on-rails - .find() 语句中的条件和变量

> ID：11618006
> 
> 赞同：0
> 
> 时间：2012-07-23T18:08:23.943
> 
> 标签：ruby-on-rails, ruby, activerecord

我在 Rails 应用程序中有一个表，其中每一列都是字符串类型。此列将称为 mycolumn，其格式设置为每个条目都符合格式 NN:NN，其中 N 是 0 到 9 之间的某个数字。

现在我遇到麻烦的地方是我需要找到 mycolumn[0..1] 在一定范围内的所有元素（比如说 35）。

我认为该声明看起来像

```
Mytable.find(:all, :conditions => ['? <= 35', :mycolumn[0..1].to_i]) 
```

这行得通吗？还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:16:02.907

不，那样不行——你将不得不：

1.  格式化适用于您选择的数据库的 SQL 语句
2.  在表中使用可以自定义查询的数据类型（例如将 NN 和 NN 存储在单独的列中）
3.  检索所有模型并在 Ruby 中执行选择条件

我推荐#2 --- 存储核心数据，然后添加一个方法将其格式化为 NN:NN

# php - 803 脸书错误

> ID：11618009
> 
> 赞同：0
> 
> 时间：2012-07-23T18:08:28.073
> 
> 标签：php, facebook

我在 facebook 上有一个应用程序已经工作了一个月，但现在我让应用程序中的页面空白进入它。

使用调试器的应用程序收到错误 803：“错误”：“消息”：“（＃ 803）您不存在的某些别名请求：bloggsamigos”“类型”：“OAuthException”“代码”：803

如果访问者直接看到消息“由于外部程序员的问题，应用程序被阻止”。

让我感到困惑的是，它工作得很好，我什么都没碰过。

该应用程序显示了来自同一域上托管的数据库的查询的一些图片。这是一个图片博客。我在 facebook 在线应用程序之外有一个管理员，并显示这些图像是由管理员运行的。

在 index.php 页面中，我控制用户已激活“喜欢”以显示页面或其他。我的代码是这样的：

* * *

```
require 'src/facebook.php';
$config = array();
$config['appId'] ="xxxxxxxxxxxxxxx";
$config['secret'] = "xxxxxxxxxxxxxxxxxxxxxxxxxxx";
$facebook = new Facebook($config);
if (isset($_REQUEST['signed_request'])) {
$encoded_sig = null;
$payload = null;
list($encoded_sig, $payload) = explode('.', $_REQUEST['signed_request'], 2);
$sig = base64_decode(strtr($encoded_sig, '-_', '+/'));
$signed_request = json_decode(base64_decode(strtr($payload, '-_', '+/'), true),true); 
} else { echo "ERROR"; }
$lied = $signed_request['page']['liked'];
if ($signed_request['page']['liked']) {
include("fan.php");
}
else {
include("nofan.php");
} 
```

* * *

配置数据为：Namespace App --> bloggsamigos

站点 URL --> 带有 (http://www) mahesoblogsamigos.com/

站点域 --> 带有 (http://www) mahesoblogsamigos.com

工作页面 --> 与（http://）apps.facebook.com/bloggsamigos/

画布的 URL --> 带有 (https://) ssl15.ovh.net/~mahesobl/

安全 URL 画布 --> 使用 (https://) ssl15.ovh.net/~mahesobl/

画布 FBML / iframe --> iframe

我很绝望，我尝试了很多东西，我想要信息，我向 Facebook 发送了电子邮件，但我无能为力。你可以帮帮我，拜托！我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:12:57.173

尝试将名称空间更改为其他名称...

[http://graph.facebook.com/bloggsamigos](http://graph.facebook.com/bloggsamigos)显示：“（#803）您请求的某些别名不存在：bloggsamigos”意味着 facebook 无法确定名称空间与哪个应用程序匹配。Facebook 方面很可能出现了问题。

如果您真的想要该名称空间，您可以将其更改为其他名称，然后将其更改回该名称空间，以希望它能够正确记录信息。

您也可以尝试在[http://developers.facebook.com/bugs](http://developers.facebook.com/bugs)上提交错误，但如果您必须等待数周或数月才能得到回复，请不要感到惊讶。

转到[http://apps.facebook.com/bloggsamigos/](http://apps.facebook.com/bloggsamigos/)还会显示一条消息，称“由于第三方开发者的问题，应用程序“Bloggs Amigos”暂时不可用。我们正在调查情况，并对任何不便表示歉意。” 然而，这几乎意味着任何事情。

# linux - 内核模块别名

> ID：11618010
> 
> 赞同：2
> 
> 时间：2012-07-23T18:08:28.503
> 
> 标签：linux, linux-kernel, linux-device-driver

在编译不同版本的 Linux 内核时，我时不时地看到一些驱动程序被丢弃以支持其他驱动程序。

例如，提交`5772dcaa790851ec068afcd0d1f160d801b1126e`删除（删除）位于`drivers/media/video/usbvideo/ibmcam.c`v2.6.37 分支中的 Xirlink C-it 相机的 IBM 驱动程序。较新的驱动程序出现在 v2.6.38 中`drivers/media/video/gspca/xirlink_cit.c`。

对于那个特定的驱动程序，我看到新驱动程序支持的所有设备都由旧驱动程序支持，如其所写`usb_device_table`，在`xirlink_cit.c`. 但是，我没有看到从较新的驱动程序模块到较旧的任何别名。我知道`MODULE_ALIAS`宏的存在，但特别是在这种情况下，我没有看到它被使用。

也就是说，我想知道以编程方式定义别名的所有可能方式。任何帮助表示赞赏:)

# android - 让付费 Android 应用免费一周？

> ID：11618015
> 
> 赞同：15
> 
> 时间：2012-07-23T18:08:40.813
> 
> 标签：android, google-play

我有一个付费的 Android 应用程序，它需要花费一些美元。我想让它在一段时间内免费。即促销价格为 0 美元。在 Google Play 中，有一个免费的应用程序选项，但是当我检查它时，它说：

*“将价格设置为免费是永久性的；以后不能更改为价格。”*

这当然不是我想要的！一周后，我想恢复原价！所以...

**问：**我怎样才能在一周内获得 0 美元的促销价格？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-23T18:18:57.487

这是不可能的，因为可能会利用 Google Play 商店的运作方式（可能会扭曲下载计数等；免费应用程序更有可能获得下载量，而这些会在您花钱之前提高其排名）。

以前有人[问过](https://groups.google.com/forum/?fromgroups#!topic/android-developers/-vYcbqzSPsI)这个问题，并且一致认为这是设计不可能的。该线程中有一些解决方案，例如：

*   让您的应用免费，持续一周，然后让用户使用应用内购买继续使用它。（不确定这是否正是您所希望的，但无论如何这都是一种潜在的获利方式。）
*   提供一个免费版本，并在一周内将其删除。用户必须重新安装应用程序才能获得付费版本，但这仍然具有相同的预期效果。
*   进行更新（或在您的应用程序中设置在某个时间过期）以在一周后删除付费功能（但这可能会吸引很多用户）。

可悲的是，正如我所说，这是不可能的，所以你只需要尽你所能地解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T00:27:38.577

我知道这个帖子很旧，但对于那些仍在寻找答案的人，你可以在应用程序中做一些事情，迫使用户在一周后购买付费版本。前任。地狱犬。您可以免费试用 6 天。时间到后，每次打开应用程序时，它都会带您进入付费商品详情。只是一个提示。

# c# - 重复值计为数据网格中组合框的单个值

> ID：11618018
> 
> 赞同：0
> 
> 时间：2012-07-23T18:09:04.563
> 
> 标签：c#, .net, wpf, datagrid

这是我的示例代码，其中包含一个数据网格，其中需要根据数据网格中更改的状态计算两个组合框列（状态和当前状态）

```
<Window.Resources>
    <staticData:StatusList x:Key="StatusList"/>
</Window.Resources>

<Grid>
    <my:DataGrid x:Name="dgData" AutoGenerateColumns="False" Margin="0,-6,0,6">
        <my:DataGrid.Columns>
            <my:DataGridTextColumn Binding="{Binding Subject}" Header="Subject" Width="*"/>
            <my:DataGridTemplateColumn Header="Status" Width="100">
                <my:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Status}"/>
                    </DataTemplate>
                </my:DataGridTemplateColumn.CellTemplate>

                <my:DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <ComboBox Height="22" 
                                  ItemsSource="{StaticResource StatusList}"
                                  SelectedItem="{Binding Status}"/>
                    </DataTemplate>
                </my:DataGridTemplateColumn.CellEditingTemplate>

            </my:DataGridTemplateColumn>
            <my:DataGridTextColumn Binding="{Binding RaisedBy}" Header="Raised By" Width="100"/>
            <my:DataGridTemplateColumn Header="PresentStatus" Width="100">
                <my:DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <ComboBox Height="22" 
                                  ItemsSource="{StaticResource StatusList}"
                                  SelectedItem="{Binding Status}"/>
                    </DataTemplate>
                </my:DataGridTemplateColumn.CellEditingTemplate>
            </my:DataGridTemplateColumn>
        </my:DataGrid.Columns>
    </my:DataGrid>
</Grid>` 
```

C# 代码

```
public class StatusList : List<string>
    {
        public StatusList()
        {
            this.Add("Assigned");
            this.Add("Closed");
            this.Add("In Progress");
            this.Add("Open");
            this.Add("Resolved");
        }
    } 
```

所以最后我需要在保存数据网格数据时计算状态。如果多次选择状态值（即相似值），则它应作为单个计数返回。For example, suppose 3 comboboxes are selected, 1 is Open, 2 is Resolved and 3 is Open, then count should be 2 because for open it should count as single value (or count) when multiple times same value selected.

**编辑：**在这里我尝试了代码，因为组合框状态是可编辑的，因此如果更改值和重复值应计为一个值，但我不确定。

```
bool isDuplicate;
int count;
for (int nbRow = 0; nbRow < dgData.Rows.Count; nbRow++)
{
    for (int nbRowCompare = nbRow; nbRowCompare < dgData.Rows.Count; nbRowCompare++)
    {
        isDuplicate = true;
        for (int nbCol = 0; nbCol < dgData.Rows[nbRow].Cells.Count; nbCol++)
        {
            if (dgData[nbCol, nbRow].Value != dgData­[nbCol, nbRowCompare])
            {
                isDuplicate = false;
                count++;
                break;     //Exit for each column if they are not duplicate
            }
        }

        if (isDuplicate)
        {
            //Do something
            count++;
        }
    }
} 
```

* * *

在这里，我尝试了代码，因为组合框状态是可编辑的，因此如果更改值和重复值应计为一个值，但我不确定，请以这种方式帮助我

`bool isDuplicate; int count; for(int nbRow = 0; nbRow < dgData.Rows.Count; nbRow++){for(int nbRowCompare = nbRow; nbRowCompare < dgData.Rows.Count; nbRowCompare++){isDuplicate = true; for(int nbCol = 0; nbCol < dgData.Rows[nbRow].Cells.Count; nbCol++) {if(dgData[nbCol, nbRow].Value != dgData­[nbCol, nbRowCompare]){isDuplicate = false; count++;break; //Exit for each column if they are not duplicate }}if(isDuplicate){//Do something count++;}}}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:14:02.697

如果我正确理解您的问题，您需要计算`Status`DataGrid 中显示的各个行使用的不同值的数量。

您的 DataGrid 可能正在显示一个`ObservableCollection`（或一些其他集合）对象，表的每一行都有一个对象。（您的代码示例中没有显示任何值`ItemsSource`，但我假设有一个。）如果调用此列表`items`，并且您有`using System.Linq;`，您可以使用以下方法获取不同状态的列表：

```
List<string> distinctStatuses = items.Select(item => item.Status)
                                     .Distinct()
                                     .ToList(); 
```

如果您只想要计数，您可以进一步简化：

```
int distinctStatusCount = items.Select(item => item.Status).Distinct().Count(); 
```

我不太确定您的`PresentStatus`列，因为它与您的列绑定到同一列，`Status`因此它只会显示相同的数据。DataGrid 中的`PresentStatus`列也缺少它的`CellTemplate`.

# asp.net - 如果存储在 SQL SERVER 上的应用程序重新启动，asp.net 会丢失会话信息

> ID：11618022
> 
> 赞同：1
> 
> 时间：2012-07-23T18:09:25.627
> 
> 标签：asp.net, session, caching

我们正在考虑将我们的会话从内存移动到 sql 服务器（使用 web.config 会话模式设置）。

它是否会像在内存中一样工作，或者即使应用程序回收，我们的用户也能够保留他们的会话？缓存呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T18:11:21.580

如果 Web 应用程序重新启动，会话状态服务或 Sql Server 模式会保留会话值。如果 Web 应用程序重新启动，缓存将被删除。

1.  Sql Server 模式将会话数据存储在 sql server 数据库中（持久化）。
2.  状态服务将会话数据存储在内存中的单独（可能是远程）进程上，称为 ASP.NET 状态服务，它与 ASP.NET 工作进程或 IIS 应用程序池分开。
3.  缓存存储在 ASP.NET 工作进程内存中。

# git - 未跟踪的工作树 .gitignore - clean -f 或 git rm 运气不佳 - 如何重置所有内容？

> ID：11618023
> 
> 赞同：1
> 
> 时间：2012-07-23T18:09:26.600
> 
> 标签：git, gitignore

每次远程将更改拉入 Dev [Hub 的更新后挂钩]，

我越来越：

> 错误：未跟踪的工作树文件“somepath/here/.gitignore”将被合并覆盖。中止

如果我`git status`在**遥控器**上这样做，我会得到：

```
#On branch dev nothing to commit
(working directory clean) 
```

我知道文件在那里，我愚蠢地直接在远程机器上创建它（不做推送）；

我了解 git 拒绝合并它。

更新：

我试过在远程机器上做：

```
git rm .gitignore 
```

但我得到了：

```
fatal: pathspec 'path/.gitignore' did not match any files 
```

我试过在远程机器上做：

```
git clean -f 
```

什么也没做，`Untracked working tree file`出现同样的错误。

我跑过：

```
git clean -f -d -x 
```

它删除了遥控器上未跟踪的文件和文件夹。

更新：无论触发推送选项的文件是什么，我都已更改。推送时，裸机检测到更改并进行了更改。

由于某种原因尚不清楚，一个 .css 文件（也许还有更多的东西）没有在远程服务器上进行刷新，所以我无论如何都会改变那个 css 只是为了触发推送，再一次，一切都很清楚。

这显然是我们不应该这样做的方式。显然没问题。但我不能确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-02T20:32:22.487

正如所评论的，一个简单`rm`的就足够了。

但是您还可以选择`git reset --hard`,*除了*。 这就是[手册页](https://git-scm.com/docs/git-clean#git-clean--x)所建议的“创建一个原始工作目录”。`git clean -f -d -x`
[`git clean`](https://git-scm.com/docs/git-clean#git-clean--x)

# sql - 来自多个表的聚合数据

> ID：11618024
> 
> 赞同：1
> 
> 时间：2012-07-23T18:09:28.417
> 
> 标签：sql, postgresql, multiple-tables

鉴于我在 DB 中有 3 个表，其中包含来自同一来源的不同数据片。所有表的结构都非常相似：

```
id | parent_id | timestamp | contents 
```

每个表都有 parent_id（一个父到多个记录的关系）和时间戳索引。

我需要访问这些按时间排序的数据。目前我使用下一个查询：

```
prepare query3(bigint) as 
select id, timestamp, contents, filter from 
 (select t1.id, t1.timestamp, t1.contents, 'filter1' as filter from table1 t1 
where t1.parent_id = $1
  union select t2.id, t2.timestamp, t2.contents, 'filter2' as filter from table2 t2 
where t2.parent_id = $1
  union select t3.id, t3.timestamp, t3.contents, 'filter3' as filter from table3 t3 
where t3.parent_id = $1 
) table_alias order by timestamp; 
```

由于每个表中的数据非常多，因此每次执行此查询需要 2 到 3 分钟。据解释：650000行和`Sort Method: external merge Disk: 186592kB`.

有没有办法在不更改架构的情况下优化检索执行时间，但构建更有效的查询或创建特定索引？

更新在这里添加了完整的解释分析结果。在这种情况下，查询中有 4 个表，但我相信在这种情况下 3 和 4 之间没有太大区别。

```
"Sort  (cost=83569.28..83959.92 rows=156258 width=80) (actual time=2288.871..2442.318 rows=639225 loops=1)"
"  Sort Key: t1.timestamp"
"  Sort Method: external merge  Disk: 186592kB"
"  ->  Unique  (cost=52685.43..54638.65 rows=156258 width=154) (actual time=1572.274..1885.966 rows=639225 loops=1)"
"    ->  Sort  (cost=52685.43..53076.07 rows=156258 width=154) (actual time=1572.273..1737.041 rows=639225 loops=1)"
"    Sort Key: t1.id, t1.timestamp, t1.contents, ('table1'::text)"
"    Sort Method: external merge  Disk: 186624kB"
"      ->  Append  (cost=0.00..14635.39 rows=156258 width=154) (actual time=0.070..447.375 rows=639225 loops=1)"
"        ->  Index Scan using table1_parent_id on table1 t1  (cost=0.00..285.08 rows=5668 width=109) (actual time=0.068..5.993 rows=9385 loops=1)"
"        Index Cond: (parent_id = $1)"
"        ->  Index Scan using table2_parent_id on table2 t2  (cost=0.00..11249.13 rows=132927 width=168) (actual time=0.063..306.567 rows=589056 loops=1)"
"        Index Cond: (parent_id = $1)"
"        ->  Index Scan using table3_parent_id on table3 t3  (cost=0.00..957.18 rows=4693 width=40) (actual time=25.234..82.381 rows=20176 loops=1)"
"        Index Cond: (parent_id = $1)"
"        ->  Index Scan using table4_parent_id_idx on table4 t4  (cost=0.00..581.42 rows=12970 width=76) (actual time=0.029..5.894 rows=20608 loops=1)"
"        Index Cond: (parent_id = $1)"
"Total runtime: 2489.569 ms" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:00:29.823

您的大部分时间是由消除联合的重复引起的。使用 union all 代替：

```
select id, timestamp, contents, filter
from  ((select t1.id, t1.timestamp, t1.contents, 'filter1' as filter
        from table1 t1 
        where t1.parent_id = $1
       )
       union all
       (select t2.id, t2.timestamp, t2.contents, 'filter2' as filter
        from table2 t2 
        where t2.parent_id = $1
       )
       union all
       (select t3.id, t3.timestamp, t3.contents, 'filter3' as filter
        from table3 t3 
        where t3.parent_id = $1 
       )
      ) table_alias
order by timestamp; 
```

为了使这更有效，您应该在三个表中的每一个上都有一个 parent_id 索引。通过这些更改，它应该运行得相当快。

# ios - iPad 1 上的应用程序分配是 iPad 2 的 4 倍

> ID：11618026
> 
> 赞同：13
> 
> 时间：2012-07-23T18:09:30.520
> 
> 标签：ios, memory, profiling

当我在 iPad 2 上分析我的应用程序时，它加载时分配的内存不到 1MB。当我在 iPad 1 上执行相同操作时，它加载时分配了大约 4MB。两者都更新到相同的 iOS 版本。这是正常行为吗？如果是这样，我能做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:38:28.317

我要调查的一种可能性是应用程序存储其资源的位置。iPad2 无疑具有更多用于纹理、声音 ram 等的 vram，因此它可能会将这些资源存储在硬件上，而 iPad1 则必须将它们存储在主机内存中并根据需要上传它们。一个快速的测试方法是对你的资源进行下采样，看看它对 iPad1 的影响是否比对 iPad2 的影响更大，如果是，那么这是一个合理的解释。

例如，如果您有 8MB 的图形，而 iPad1 有 4MB 的 vram 可用于纹理，而 iPad2 有 7MB 可用，那么 iPad1 会将 4MB 的纹理存储在 vram 中，而将其他 4MB 保留在主机 ram 中，而 iPad2 将存储7MB 纹理在 vram 中，另外 1MB 在主机 ram 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:18:51.690

是的，这是一种正常的行为。这也取决于设备类型。例如，如果您分析 3G、3GS、4、4S 手机中的内存，您会得到不同的结果。这应该不是问题，除非它随着应用程序的使用而频繁增长。你用的是什么操作系统？你启用了ARC吗？

# java - 使用 Java Sound 和 MP3SPI 流式传输某些 mp3 的问题

> ID：11618027
> 
> 赞同：1
> 
> 时间：2012-07-23T18:09:36.920
> 
> 标签：java, streaming, mp3, javax.sound.sampled

我正在使用 Java Sound libaray 用 Ja​​va 编写一个应用程序，它可以让我将音乐从我的个人图书馆流式传输到我正在使用的任何计算机上。进行得顺利。我已经成功流式传输 mp3，偶尔会出现破解或流行音乐。但是，在我的一个测试文件中，我经常遇到经常走走停停的行为。

对我来说，这表明我未能足够快地将数据放入 SourceDataLine 并且它正在下溢。我试过的一切都没有解决这个问题。我想知道这是否与我如何开始获取数据字节有关，所以我发布了我正在使用的方法。可以在[这里](http://www.javazoom.net/mp3spi/documents.html)找到。我说的方法是顶盒。我已经对其进行了修改，以便获取数据，使用套接字通过网络发送数据，并将其写入客户端的正确线路。

关于可能导致这种情况的任何想法？我已经尝试阅读音频文件，但我并没有真正在导致这种情况的原因上取得任何进展。提前致谢。

# database-design - 数据库模式：多个表与 id 查找

> ID：11618028
> 
> 赞同：0
> 
> 时间：2012-07-23T18:09:38.117
> 
> 标签：database-design

我正在构建一个订阅功能，用户可以根据单个类别（即“书籍”）注册不同的邮件列表。

在 MySQL 中设计我的表时，我遇到了两个选项：

**选项1**

```
/* Table 1 */
Books
    Email

/* Table 2 */
Magazines
    Email 
```

每个用户可以订阅多个列表。

**选项 2**

```
/* Table 1 */
All Categories
    Email
    Category_ID

/* Table 2 */
Category_ID
    Category 
```

我基本上是从所有电子邮件的主表中交叉引用一个类别 ID。在该表中，电子邮件可能会重复，因为用户可以订阅多个类别。我想我想给每个类别一个 ID，而不是引用数据库中的实际字符串，尽管我在数据库模式设计方面没有经验。

你会去哪个？交叉引用类别 ID 或将每个类别分解到自己的表中是否更快？（假设我通过电子邮件发送一长串列表以在每个类别出现新评论时通知用户）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:20:04.090

您的第二个选项是更规范化的形式，因为它不会在多个表中复制数据（电子邮件）。我会更进一步使用您的第二个选项并创建一个用户表（因为您将来无疑需要存储的不仅仅是一封电子邮件）并将用户的 UserID 存储在您的第一个表中，而不是 e -邮件地址。这将确保当用户需要更新他们的电子邮件地址时，您不需要更新多个表（如选项 #1）或单个表中的多个记录（选项 #2）。当您要求查询非常快（无连接）时，非规范化（选项＃1）是可以的，但在插入/更新/删除操作方面有很多缺点。在您的情况下，出于上述原因，我会选择修改后的选项 2。

# firebase - Firebase 中的记录总数（我什么时候完成计数？）

> ID：11618032
> 
> 赞同：4
> 
> 时间：2012-07-23T18:10:00.400
> 
> 标签：firebase

计算表中的记录显然是一项手动工作，直到你们获得一些已经在工作中的漂亮新功能；）

但是，即使使用带有 .on('value', ...) 的手动运行来获取计数，我也会坚持下去：

```
var table = new Firebase('http://beta.firebase.com/user/tablename');
var count = 0;
table.on('child_added', function(snapshot) {
   count++;
   // how do I know if this is the last child? i.e. the count is complete?
});

// when is it okay to use count? 
```

我预见到任何类型的分页都会出现同样的问题，我觉得我对此有点呆滞。我错过了什么？

例如，对于获取用户在他/她的队列中的消息数量，这从根本上来说是错误的模式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T19:12:21.357

child_added 事件没有“完成”的概念，因为随着时间的推移可以继续添加孩子。如果您想立即计算孩子的数量*，*您可以使用“值”从该位置获取当前快照，然后计算孩子的数量。例如：

```
table.once('value', function(snapshot) {
  var count = 0;
  snapshot.forEach(function(childSnapshot) {
    count++;
  });
  // do something with count.
}); 
```

或者，如果您希望计数不断更新，您可以使用 .on() 而不是上面的 .once()。但这在性能方面并不理想，因为您每次都要数所有的孩子。幸运的是，您可以结合使用 'child_added' 和 'value' 来有效地保持计数：

```
var count = 0;
table.on('child_added', function(snapshot) {
  count++;
  // how do I know if this is the last child? i.e. the count is complete?
});

table.on('value', function(snapshot) {
  // do something with count.
}); 
```

这是有效的，因为“初始”数据完成后“值”将触发一次，然后在数据更改时再次触发，因此您将获得不断更新的正确计数。尽管如果您希望删除孩子，您也需要处理 child_removed 。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T19:10:48.550

使用“child_added”，无法知道您何时收到“最后一个”项目。如果您要计算在特定时间点存在的所有孩子，我建议使用“价值”事件，如下所示：

```
var table = new Firebase('http://beta.firebase.com/user/tablename');

table.on('value', function(snapshot) {
   var count = 0;
   snapshot.forEach(function() {
       count++;
   });
   //count is now safe to use.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T11:00:35.280

在 FB 将 count 实现为返回函数之前，我想不让客户端循环通过任何返回的记录的最佳方法是通过 REST 方式获取它。

参考：[返回对象中项目总数的最佳 RESTful 方法是什么？](https://stackoverflow.com/questions/3715981/whats-the-best-restful-method-to-return-total-number-of-items-in-an-object)

# macos - 如何让我的守护程序首先运行

> ID：11618033
> 
> 赞同：1
> 
> 时间：2012-07-23T18:10:02.677
> 
> 标签：macos

我的 com.appname.file.plist 的 Key RunAtLoad YES，但我需要在用户打开 Safari 或任何其他 Web 浏览器之前运行这个守护进程，有办法让它先启动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:19:42.323

使用`launchd`. 将您的 plist 文件放在 /Library/LaunchDaemons 中。查看[技术说明 TN2083 守护进程和代理](http://developer.apple.com/library/mac/#technotes/tn2083/_index.html)

```
launchctl load /Library/LaunchDaemons/com.appname.file.plist 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T22:05:17.400

我只是添加键“Nice”。此可选键指定应将什么[nice(3)](http://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/nice.3.html#//apple_ref/doc/man/3/nice)值应用于守护程序。优先级是 -20 到 20 范围内的值。默认优先级为 0；较低的优先级导致更有利的调度。

# jquery - 获取 url 查询字符串的值

> ID：11618034
> 
> 赞同：0
> 
> 时间：2012-07-23T18:10:08.160
> 
> 标签：jquery

使用 jquery，如何获取 url 查询字符串中每个字段的值？（我指的是 search= value 和 offset= value 等。）有时它不仅仅是这三个。

```
<a href="search=sony&offset=20&lang=en" class="more_info">Read More</a>
<a href="search=sony&offset=20&lang=en&period=3" class="more_info">Read More</a> 
```

我尝试使用`$(".more_info").attr("search")`，这应该有效，但没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:19:27.277

首先获取 href 属性的值：

`$(".more_info").attr("href")`...

然后解析出这些值。尝试修改[此问题](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)的答案：

```
function getParameterByName(name, query) {
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(query);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

所以现在你可以说：

```
$(".more_info").each(function () {
    getParameterByName("search", $(this).attr("href"));
}); 
```

试试看，让我知道它是怎么回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:20:41.253

该`attr()`函数选择元素的一个属性，在这种情况下，“href”就是一个例子。如果您尝试访问名为“search”的 URL 变量，则需要以下代码（假设 search 变量始终是第一个）：

```
$('.more_info').attr('href').split('&')[0].replace('search=', ''); 
```

如果它不总是第一个，那么这个快速修复就会中断，否则它很简单。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T18:29:29.163

尝试这个 ：`$(".more_info").attr('href')`

# c# - c#寻找API来读取7z标头

> ID：11618035
> 
> 赞同：2
> 
> 时间：2012-07-23T18:10:09.740
> 
> 标签：c#, crc, 7zip, dotnetzip

是否有基于 c# 的 7zip (7z) API 支持读取其标头以检索压缩存档中每个文件的 CRC 信息的能力？我看过的所有内容都需要您解压缩文件。我正在编写一个应用程序，将压缩文件夹中文件的 CRC 与单独的列表进行比较。

我目前正在使用 DotNetZip 压缩文件，效果很好。不幸的是，它不支持 .7z。

编辑：调用 ZipFile.Read() 时产生异常

```
{Ionic.Zip.ZipException: Cannot read that as a ZipFile ---> Ionic.Zip.BadReadException:   Bad signature (0xAFBC7A37) at position  0x00000000
   at Ionic.Zip.ZipEntry.ReadHeader(ZipEntry ze, Encoding defaultEncoding)
   at Ionic.Zip.ZipEntry.ReadEntry(ZipContainer zc, Boolean first)
   at Ionic.Zip.ZipFile.ReadIntoInstance_Orig(ZipFile zf)
   at Ionic.Zip.ZipFile.ReadIntoInstance(ZipFile zf)
   --- End of inner exception stack trace ---
   at Ionic.Zip.ZipFile.ReadIntoInstance(ZipFile zf)
   at Ionic.Zip.ZipFile.Read(String fileName, TextWriter statusMessageWriter, Encoding encoding, EventHandler`1 readProgress)
   at Ionic.Zip.ZipFile.Read(String fileName) 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:14:06.230

这听起来像是一个重复的帖子..这里看看这个 StackOverFlow 链接 [阅读 7z 文件的一些答案](https://stackoverflow.com/questions/222030/how-do-i-create-7-zip-archives-with-net)

如果您使用 DotNetZip，这应该对您有用，请尝试以下示例

```
using (ZipFile zip = ZipFile.Read(ExistingZipFile))
{
  foreach (ZipEntry ze in zip)
  {
    if (header)
    {
      System.Console.WriteLine("Zipfile: {0}", zip.Name);
      if ((zip.Comment != null) && (zip.Comment != "")) 
        System.Console.WriteLine("Comment: {0}", zip.Comment);
      System.Console.WriteLine("\n{1,-22} {2,8}  {3,5}   {4,8}  {5,3} {0}",
                               "Filename", "Modified", "Size", "Ratio", "Packed", "pw?");
      System.Console.WriteLine(new System.String('-', 72));
      header = false;
    }
    System.Console.WriteLine("{1,-22} {2,8} {3,5:F0}%   {4,8}  {5,3} {0}",
                             ze.FileName,
                             ze.LastModified.ToString("yyyy-MM-dd HH:mm:ss"),
                             ze.UncompressedSize,
                             ze.CompressionRatio,
                             ze.CompressedSize,
                             (ze.UsesEncryption) ? "Y" : "N");

  }
} 
```

# javascript - 在标题的“我的购物车”中显示产品编号 - Magento

> ID：11618041
> 
> 赞同：-1
> 
> 时间：2012-07-23T18:10:35.627
> 
> 标签：javascript, jquery, magento

我想在 magento 的 Header 中将产品数量显示为“我的购物车”。行动我发现一些代码为`

```
 $count = $this->helper('checkout/cart')->getSummaryCount();
 $total = $this->helper('checkout/cart')->getQuote()->getGrandTotal();
 if($count==0)
 {
     echo "0";
 }
 if($count==1)
 {
     echo $this->__('%s',$count);
 }
 if($count>1)
 {
     echo $this->__('%s',$count);
 } 
```

并在 Top.phtml 中使用它。

发挥其工作正常。但问题是，每次我必须删除缓存时显示正确的数据（购物车中的产品总数）。我只是想要，它不应该依赖于缓存，就像在magento中它如何改变侧栏上的计数一样，它也应该改变标题，不应该依赖于缓存。我正在使用 Magento 1.4.1。它非常紧急，如果有人可以提供帮助.. 提前感谢 Friendz..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:03:34.900

1.goto app->code->core->mage->checkout->block->links.php

2.编辑如下代码

$count=Mage::helper('checkout/cart')->getItemsCount();`

如果（$count>=1）{

$text=$this->__('Mycart(%s items)',$count);

}

别的

{

$text=$this->__('Mycart');

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:07:55.117

```
echo Mage::helper('checkout/cart')->getItemsCount(); 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T10:59:25.633

**用于显示购物车中的产品数量**

```
<?php
  $count = $this->helper('checkout/cart')->getSummaryCount();  //get total items in cart
  $total = $this->helper('checkout/cart')->getQuote()->getGrandTotal(); //get total price
  if($count==0)
  {
    echo $this->__('<a href="/checkout/cart" class="cartgo">(0 ITEMS)</a>',$count);
  }
  if($count==1)
  {
    echo $this->__('<a href="/checkout/cart" class="cartgo">(1 ITEM)</a>',$count);
  }
  if($count>1)
  {
    echo $this->__('<a href="/checkout/cart" class="cartgo">(%s ITMES)</a>',$count);
  }
  echo $this->__('', $this->helper('core')->formatPrice($total, false));
?> 
```

# asp.net-mvc - 我是否有理由使用 Knockout MVC 而不是 Knockout JS？

> ID：11618042
> 
> 赞同：55
> 
> 时间：2012-07-23T18:10:47.217
> 
> 标签：asp.net-mvc, asp.net-mvc-3, knockout.js, knockout-2.0, knockout-mvc

[另一位用户](https://stackoverflow.com/a/11617465/428757)建议使用[Knockout MVC](http://knockoutmvc.com/)来处理一些 AJAX 发布问题。我读了一点，发现它是[Knockout JS](http://knockoutjs.com/)的包装器。所以我想知道两者之间的真正区别是什么？既然存在[Knockout MVC](http://knockoutmvc.com/) ，我应该打扰[Knockout JS](http://knockoutjs.com/)吗？我什么时候会使用其中一个？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-07-23T18:20:39.517

**Knockout MVC 是 WebForms 的混蛋**。它通过控制器操作路由所有视图模型方法，这意味着发生的所有事情都必须反弹到服务器并返回。我不明白为什么有人会采用像敲除这样的框架，它旨在成为客户端 MVVM，并强制它为每个功能调用服务器。

此外，在服务器上执行这些方法意味着每次函数调用都需要将*整个视图模型*传递给服务器，然后再返回给客户端。*这是非常浪费的。*

使用 Knockout MVC 意味着为了不必编写 javascript 而牺牲客户端代码的所有性能优势。WebForms 所做的相同权衡。这不是一个好的。这是一种反模式。

如果 Knockout MVC 明天就死了，那么 Web 将是一个更好的地方。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-09-17T02:44:13.210

我刚刚遇到了这个问题，它有一些非常消极的回答。我将迅速增加我的两美分价值。

我才刚刚开始使用 KnockoutJS。由于我正在构建 ASP.NET MVC 应用程序，因此使用 Knockout MVC 之类的东西对我来说似乎是合乎逻辑的。在大多数情况下，这似乎是个好主意。`<!-- ko -->`如果我可以使用我熟悉和喜爱的 .Net 功能来做同样的事情，我不想花时间在我的页面上编写 JavaScript 和评论。

话虽如此……是的，目前 KMVC 存在局限性。将整个模型发送回服务器是一件大事。所以我所做的是开始了我自己的knockout-mvc 分支。目前，这些变化必然是仓促的。但我现在有能力：

*   创建子上下文（具有完全不同的模型或视图模型的组件）
*   调用服务器时传回模型的选定部分
*   期望从呼叫返回的模型与发送的模型不同
*   围绕 ajax 调用触发事件
*   支持更多的html5输入类型
*   通过标头将防伪令牌传递给服务器（用于 ajax 调用）
*   可能更多我忘记了

我希望尽快回来，并真正清理我所做的事情。希望作者将这些更改包含在他的代码中。如果没有，我想我会继续使用自己的叉子。无论哪种方式，隧道尽头都有光。KMVC 可能需要按现状进行改进，但我相信这个概念绝对值得去做。

我绝对认为

> 如果 Knockout MVC 明天就死了，那么 Web 将是一个更好的地方。

有点苛刻。

**编辑：**

我正在查看评论并再次查看原始问题是什么。完成后，我认为应该在我的答案中添加更多内容：

首先，最初的问题是**我是否有理由使用 Knockout MVC 而不是 Knockout JS？**回答/澄清（也许我只是挑剔）： Knockout MVC 是一个框架，旨在使 KnockoutJS 与您的 ASP.NET MVC 应用程序更容易集成。它主要通过使用熟悉的强类型结构来生成 KnockoutJS 标记来实现这一点。它不是 KnockoutJS 的替代品。一定要使用 KnockoutJS。问题实际上是是否也使用 Knockout *MVC*。

话虽如此，作为开发人员，您仍然可以选择何时使用所有可用工具的各个方面。如果您想通过向服务器执行完整请求来处理功能的某个方面，请执行此操作。如果您想执行 ajax 请求来检索/更新数据，请执行此操作。如果您想纯粹在客户端执行功能，请执行此操作。

使用 Knockout MVC*不会*阻止您充分利用 KnockoutJS。使用 Knockout MVC*不会*阻止您编写额外的 javascript 来处理您想要的尽可能多的客户端功能。仅仅因为 Knockout MVC 为您提供了一种快捷方式来生成服务器的 ajax 回调*并不*意味着您必须使用它们。虽然，如果您的应用程序曾经持久化数据，那么它将不得不在某个时候打电话回家。

与仅使用 Apache 提供静态 HTML 和脚本文件相比，使用 ASP.NET MVC 构建应用程序后端是有原因的。Knockout MVC 允许您继续利用这些相同的好处来协助 KnockoutJS 集成。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-27T09:01:09.257

我觉得 Tyrsius 的回答有点太消极了。Knockout MVC 仍处于早期开发阶段，但据我所知，它具有一些优势，并且比 Webforms 更轻服务器。可见性依赖完全在客户端获得句柄，只有在使用函数时才会调用服务器。在处理复杂的数据结构时，有时无论如何都需要通过服务器，因此 Knockout MVC 可能是节省自己编写大量 Ajax 处理的好方法。

确实，它总是来回发送整个模型，这会产生一些开销，而不是自己构建它。但我不会完全注销它。尤其是当它在未来为复杂的验证获得适当的客户端处理时。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-11T15:33:34.513

在搜索了一些关于淘汰赛 mvc 的信息后，我发现了这篇文章。虽然我同意浪费网络带宽，但我还是被那行代码迷住了：

```
@{
  var ko = Html.CreateKnockoutContext();
 } 
```

这是生成淘汰视图模型的一种简洁明了的方式。有没有人使用淘汰赛 MVC 只是为了该功能并且没有将所有逻辑移动到服务器端？

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-07-23T18:21:52.023

Knockout.js 的美妙之处在于，您可以通过简单地从服务器来回传递 JSON 来为您的应用程序提供服务，而无需推送服务器必须分块以生成 HTML 的整个视图。

再次将其放回服务器似乎非常违反直觉！如果您对此感兴趣，最好首先使用剃刀语法来完成绑定。

我的建议是使用 knockout.js 进行绑定，以便如果这是您的目标，则绑定发生在客户端而不是服务器上。如果您希望您的视图在服务器上绑定数据，请使用 razor。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-11-17T22:04:03.647

而且，knockout.js 确实非常擅长客户端数据显示/删除/插入/更新，以及客户端数据计算。如果一个真正的业务逻辑这么简单，我们必须直接应用knockout.js。

事实是，业务逻辑并不总是那么简单。例如，当客户端在视图中插入新记录时，系统可能需要检查用户的身份验证，根据某些业务逻辑或公式为新创建的对象设置默认值等......所有这些，无论如何都应该去服务器端检查基于数据库数据的逻辑。

开发人员能够将所有必需的业务逻辑转换为 knockout.js 视图模型中的 java 脚本方法。但是这样的设计违反了集中处理业务逻辑的规则。

维护将成为这种设计的噩梦。

总结，什么框架选择真正取决于业务需求。有时，性能并不是首要考虑因素。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-12-11T17:46:52.717

我还可以看到很多使用 Knockout MVC 库的好用例。我几乎无法将 KnockoutJS 集成到我们的 MVC Web 应用程序中，正是因为 @ChinaHelloWorld 指出的原因。以下是一些我觉得它非常有用的案例。

1.  强类型绑定

我喜欢漂亮的强类型 HTML 帮助器方法，它在设置 KnockoutJS 时变得完全无用和混乱。我能做的最好的事情是用辅助方法的额外参数手动附加我的绑定属性，但我不得不再次使用魔术字符串。我喜欢 Knockout MVC 提供的帮助程序，用于创建具有强类型、基于 C# 表达式的绑定的输入和其他元素。但是，在这里我想提一下，我错过了生成字段的名称属性，所以我需要稍微调整一下。

2.  强类型绑定语法（种类）

使用纯字符串绑定时，总是很有可能拼写错误，或者不完全了解您要应用的绑定的正确格式。借助 Knockout MVC 的流畅 API 和 VS IntelliSense，应用正确的绑定真的很容易。

3.  （几乎）从计算的 C# 属性到计算绑定的自动转换

只需应用小的 [Computed] 属性，Knockout MVC 就可以以正确的 KnockoutJS 语法生成相应的绑定表达式。我认为这个也非常有用。

4.  没有视图模型代码重复

以经典方式，我需要在 C# 代码中拥有 viewmodel 类，然后（几乎）在 JS 中拥有相同的 viewmodel 代码（带有 observables）。好吧，这让我很沮丧，当我看到 Knockout MVC 中使用的技术时，我感到非常高兴。但是，我需要对其进行一些调整，以便能够将它与真正复杂的视图模型（嵌套视图模型、集合等）一起使用，并能够使用例如任何需要的自定义 JS 方法或计算的 observable 扩展映射的 Knockout 视图模型.

所以这里至少有四个非常好的点。关于视图模型往返：没有人告诉我们任何人都需要使用 Knockout MVC 的服务器端处理机制。我也不会使用它，只有当确实需要在服务器上处理一些复杂的业务逻辑时。但在大多数情况下，Knockout MVC 只是为了简化 MVC Views 和 KnockoutJS 的绑定和设置过程。所以我不太理解上面的不好的意见。我认为写这些意见的人并没有花精力去学习至少 Knockout MVC 的基本概念。你绝对**不应该使用 Knockout MVC 代替 KnockoutJS，但除了 KnockoutJS**。在任何情况下，理解 Javascript 和至少 KnockoutJS 的基础知识仍然是强制性的。

我希望作者继续开发 Knockout MVC，因为除了这些优点之外，还有一些功能和改进确实会让它变得更加强大。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-11-17T18:28:24.023

在 .Net MVC 模式中，视图模型已经用标签“@model yourmodel”清楚地标记到每个视图/部分视图中，这可以指导开发人员了解在该视图中将做什么。

使用 knockout.js MVVM 模式时，您可能不会看到任何 .Net 视图模型，除了视图中的“data-bind”等标签。这将使视图和控制器解耦，并且难以为团队中的新开发人员专门跟踪逻辑。

我相信knockoutMVC可以解决这些困难，节省大量的javascript代码，这些代码会使系统难以维护和理解。

由于 knockoutMVC 使设计仍然坚持应用服务器端视图模型，因为它是 C# 代码，因此易于跟踪和维护。

对于一个商业项目，经理应该始终专注于易于开发、易于维护、易于升级、易于理解和快速交付以赚钱。

牺牲一点性能但让它变得简单，客户端和服务器端的一致性应该是一个关键点。Javascript 是一个很大的维护问题。

将整个视图模型发送回服务器端真的很重要吗？如果是这样，我们可以将一个大模型拆分为几个小模型。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-10-16T17:37:00.137

如果你不使用 komvc 生成的函数，你仍然有性能。正如 Nigel 所说，初始页面生成仍然必须由服务器生成。您始终可以在客户端添加用户脚本并创建不需要返回服务器的功能。它是一种工具，可为开发人员提供一点生产力。与 Web 表单在性能上的比较肯定被夸大了。伙计们，这是一种可以帮助您按时完成任务的工具。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-03-27T11:58:02.330

I will add my 2 cents in favour of knockoutjs, though it is little complicated to write compared to knockout MVC, the benefit you get is huge when it comes to re-usability. The client code can work harmoniously with other technologies as well.

Keeping aside the security perspective I personally feel knockout js is a way of complicating asp.net MVC and it should be used as is (knockout js) with pure RESTful applications such as asp.net webapi.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-11-23T05:10:44.250

Knockout MVC 是 ASP .NET MVC 的强大扩展，它允许您使用开发人员友好的 fluentAPI 直接在您的 .NET 项目上实现网站客户端功能，无需 Javascript 并删除大量重复和重复的代码。
淘汰 MVC 与编写 ASP .NET MVC 剃须刀相同，您可以轻松获得客户端功能。
您不必编写视图模型和绑定代码行。
我一直在我的大多数网站上使用 koMVC，开发时间减少、易于维护和最小的学习曲线是一个巨大的回报。
我建议您查看他们的网站并尝试一些现场示例。[http://knockoutmvc.com](http://knockoutmvc.com)
你很快就会爱上它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-09T15:28:46.973

MVC 是一种架构模式，它分为模型、视图和控制器三个组件。

KnockoutJS 最适合 MVC 架构，因为框架的数据绑定需要使用控制器。诸如 AngularJS 之类的框架更侧重于前端，因此它们与 MVVM 架构模式（模型、视图、视图模型）配合得更好。它们的数据绑定功能也不需要使用控制器，这减少了绑定范围。

# audio - 不在 LGPL 下的音频导入库？

> ID：11618051
> 
> 赞同：2
> 
> 时间：2012-07-23T18:11:25.917
> 
> 标签：audio, lgpl

我使用过 ffmpeg，但那是在 LGPL 下。我切换到 sfml 但它使用的音频导入库也在 LGPL 下。我想静态链接库，而不必为我的项目使用 LGPL 许可证。除了使用单一格式库之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:14:05.493

[libaudiodecoder](https://github.com/asantoni/libaudiodecoder/)在 Windows 和 Mac OS X 上解码 MP3、M4A 和 WAVE（在 Windows 上为 WMA）。它在 MIT 许可下可用，允许在闭源项目中进行静态链接。

作为奖励，它通过在每个平台上包装本机音频解码 API 来工作，因此您不必随软件附带任何（可能已获得专利的）解码器。

# ruby - 反射非水平线的一点

> ID：11618056
> 
> 赞同：1
> 
> 时间：2012-07-23T18:11:51.397
> 
> 标签：ruby, reflection, line, point, sketchup

我正在为 SketchUp 创建线条工具，并且没有计算钻石上另一点的想法。本质上（使用此线工具）您绘制一条线，然后以设定的宽度，它创建一个基于中点和斜率的菱形。我已经使用中点、斜率和距离计算了第一个点。现在，我需要将该点反映在线上并找到另一个角落....我找到了各种公式，但没有意义。我想知道这里是否有人可以提供帮助。生病链接到我实际测试过的 2 个来源，也许我错过了一些东西。

[http://mathworld.wolfram.com/Reflection.html](http://mathworld.wolfram.com/Reflection.html)

[跨线反射点的算法](https://stackoverflow.com/questions/3306838/algorithm-for-reflecting-a-point-across-a-line)

z = b - 斜率*a

var1 = (a + (m*(bz)))

var2 = var1 / (1 + (斜率**2))

xneg = 2*(var2) - a

yneg = 2*(var2)*slope - b + 2*z

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:15:01.740

看起来应该是

```
var1 = (a + (slope*(b-z))) 
```

# javascript - JavaScript / jQuery：在选择列表更改时更新 HTML

> ID：11618060
> 
> 赞同：0
> 
> 时间：2012-07-23T18:12:22.817
> 
> 标签：javascript, jquery, list, select

谁能告诉我我在这里缺少什么？

[http://jsfiddle.net/sscovil/Ju6mN/](http://jsfiddle.net/sscovil/Ju6mN/)

我试图让这个价格计算器在选择列表之一发生更改时自动更新。由于某种原因，它没有获取 selectedIndex 值......

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:23:22.537

我已经分叉了你的小提琴，工作版本在这里 - [http://jsfiddle.net/nBqWE/6/](http://jsfiddle.net/nBqWE/6/)

它有以下问题：

1.  `discountMultiplier`变量未定义
2.  不正确的事件处理程序分配，应该`$('#duration').on('change', CalculatePrice);`代替`$('#duration').on('change', CalculatePrice());`
3.  您以一种非常奇怪的方式获得选择值，如果您使用 jQuery，则有一个`val()`可用的功能 -`project[0] = parseInt($('#hours').val());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:20:28.453

首先，您直接在函数内部调用`on`函数，您要做的是将函数分配给事件。所以会是

```
$("#duration").on('change',CalculatePrice) 
```

不是

```
$("#duration").on('change',CalculatePrice()) 
```

后者将立即调用该函数。

# git - Git错误：未能推送一些参考

> ID：11618062
> 
> 赞同：2
> 
> 时间：2012-07-23T18:12:27.420
> 
> 标签：git

我想我在进入分支之前做了“git pull”，现在当我做“git branch”时，它会显示：

```
* (no branch)
  master 
```

我怎样才能将 'no branch' 移动到 'master' 这样我就可以做 'g​​it push' 了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:48:36.297

在分支之间移动：

```
git checkout <branch_name> 
```

要在不进入分支的情况下推送分支的提交*，*您可以在命令后指定更多参数`push`：

```
git push <remote> <branch_name> 
```

这将推送跟踪远程分支的本地分支，称为`branch_name`.

# php - PHP Session 上传进度和 fcgid

> ID：11618063
> 
> 赞同：5
> 
> 时间：2012-07-23T18:12:36.413
> 
> 标签：php, apache, file-upload

我正在使用 Apache2.2/mod_fcgid/php5.4.3 并且上传进度未显示在会话中。我读到如果通过 fastcgi 加载 php，则 php 会话上传进度功能将不起作用。真的吗？如果是这样，使用 fastcgi 时获取上传进度的选项有哪些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:25:15.483

" [[mod_fcgi] 从客户端读取整个请求正文，然后将其发送到应用程序。](https://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html#fcgidmaxrequestinmem) "

您应该尝试使用支持“[加速文件上传](http://php-fpm.org/wiki/Features#Accelerated_upload_support)”的 Nginx 和 PHP-FPM，您的 PHP 代码可以在 Nginx 收到完整请求之前运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T01:06:46.103

您可以切换到[mod_fastcgi](http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html)而不是使用[mod_fcgi](http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html)，它具有以下[配置选项](http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html#FastCgiConfig)：

> -flush (none) 当从应用程序接收到数据时，强制写入客户端。默认情况下，mod_fastcgi 缓冲数据以便尽快释放应用程序。

# r - Summary.glm 到 CSV 文件？

> ID：11618072
> 
> 赞同：2
> 
> 时间：2012-07-23T18:13:09.843
> 
> 标签：r

我正在努力将“summary.glm”的结果打印到 CSV 文件。我的代码相当简单，如下所示：

```
results <-glm(dv ~ iv + iv2, family=binomial, data=dataframe)
results_df <-summary.glm(results)
write.csv(results_df, "myCSV.csv") 
```

这会产生错误：`cannot coerce class 'summary.glm' into a data.frame'`.

我真正需要做的就是将我的系数作为优势比导出到一个 CSV 文件中，该文件还包括标准误差和 p 值。我确定有一个包可以做到这一点；我只是还没有找到它。请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T18:54:16.883

做就是了：

```
results_df <-summary.glm(results)$coefficients 
```

这将提取系数数据帧。

# java - iText中的复选框字符

> ID：11618074
> 
> 赞同：3
> 
> 时间：2012-07-23T18:13:22.133
> 
> 标签：java, itext

我正在尝试在我的 pdf 中插入一个复选框字符，如下所示：

```
Phrase phrase = new Phrase("\u2610 somemoretext", somefont); 
```

字符串的“somemoretext”部分正在正确显示，而复选框字符则没有。我是否必须使用特定的东西作为这个角色的字体，或者我还能做错什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:15:51.543

您必须使用包含这些字符的字体和编码。最好的办法是使用 IDENTITY_H 进行编码，因为这允许您访问给定字体中的每个字符：

`Font font = FontFactory.getFont(f.getName(),BaseFont.IDENTITY_H);`

但是您仍然必须使用正确的字体。[这个](http://www.itextpdf.com/book/chapter.php?id=11)链接也可以证明对你有帮助

编辑：

我还看到不同`Font`的 s 使用不同的转换代码/序列：

> 使用不同字体的相应字符。例如在 Wingdings.ttf 你有 0x6F 和 0x70

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T03:02:55.483

```
var font = FontFactory.GetFont(@"C:\Windows\Fonts\wingding.ttf", BaseFont.CP1252, true, 12);
Phrase phrase = new Phrase("\xFC somemoretext", font); 
```

灵感来自 [https://stackoverflow.com/a/5044017/1021364](https://stackoverflow.com/a/5044017/1021364)

人物图

[![在此处输入图像描述](../Images/bc543fa27641abf7679c2a6ee1e660e2.png)](https://i.stack.imgur.com/pzwvU.png)

检查：FB

打勾：FC

签入复选框：FD

勾选复选框：FE

空复选框：6F

# highcharts - highcharts：停止图表捕获鼠标事件，或捕获鼠标点击整个图表

> ID：11618075
> 
> 赞同：12
> 
> 时间：2012-07-23T18:13:25.593
> 
> 标签：highcharts

全部，

我在我正在开发的网络应用程序中使用 HighCharts，一般来说，我非常喜欢它。

但是，我很难弄清楚如何捕获整个图表上的鼠标点击。

换句话说 - 我想知道用户何时点击图表上的任何地方（例如，绘图区域、标题、x 轴或 y 轴、图表元素周围的边距和填充等）

或者，我想完全禁用事件，以便将事件捕获在容器本身中。

更详细的版本...

我有一个包含我的 HighChart 的 DIV。

我想知道用户是否点击了该***DIV***中的任何地方。

所以 - 最初我尝试将“onclick”事件附加到 DIV，但从未被触发，大概是因为点击被 HighChart 捕获。

因此，在设置 HighChart 的代码中，我添加了以下内容：

```
var chart = new Highcharts.Chart({
    chart: {
        renderTo: "container",
        events: {
            click: function(event) {
                // do something
            }
        },
        ...
    }
    ...
}); 
```

**如果用户单击****绘图区域**内的某个位置，这可以正常工作，但如果她单击图表中的其他任何位置（例如，x 轴、y 轴、标题、图表元素周围的填充等）

那么 - 我怎样才能使**整个**图表可点击？

提前谢谢了！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T14:25:36.483

我有同样的问题。

使用 webkit 检查器，我可以看到 Highcharts 将单击事件绑定到图表容器（具有“highcharts-container”类的 div），这似乎会干扰单击。

如果您不想要该点击事件中的任何功能，您可以通过设置将其删除

`chart.container.onclick = null;`

否则，您需要使用内置的 highcharts 事件属性来设置回调。正如 OP 所指出的，图表对象有一个“事件”属性，单击绘图背景时应触发该属性。单击系列本身时触发的绘图选项还有一个事件属性。

例如，对于面积图：

```
var chart = new Highcharts.Chart({
    ...
    plotOptions: {
        area: {
            events: {
                click: function(event) {
                    // do something
                }
            },
        ...
        }
    }
    ...
}); 
```

更多信息请参阅： [http ://www.highcharts.com/ref/#plotOptions-area-events](http://www.highcharts.com/ref/#plotOptions-area-events)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-01T22:47:17.873

我遇到了这个问题，并为 highcharts 3 编写了一个扩展/插件，它将点击事件从 highcharts 中冒泡出来：

```
/*global Highcharts*/
(function (Highcharts) {
    "use strict";

    Highcharts.wrap(Highcharts.Pointer.prototype, 'onContainerClick', function (original, e) {
        var pointer = this,
            parent = pointer.chart.container.parentNode,
            bubbleUp = true;

        // Add a method to the event to allow event handlers to prevent propagation if desired
        e.swallowByHighCharts = function() { bubbleUp = false; };

        // Call the original event
        original.apply(this, Array.prototype.slice.call(arguments, 1));

        // Trigger the event on the container's parent (to bubble the event out of highcharts)
        // unless the user wanted to stop it
        if (bubbleUp && typeof parent !== 'undefined' && parent) {
            jQuery(pointer.chart.container.parentNode).trigger(e);
        }
    });

}(Highcharts)); 
```

添加后，所有点击事件都会从 highcharts 容器中冒出。由于 highcharts 和 jquery 如何与事件触发交互，在容器本身上触发它会导致大量循环，至少在我的情况下，我实际上并没有在用作渲染目标的元素上使用任何处理程序。

关于swallowByHighCharts 的额外部分允许在需要时禁用新行为 - 即，

```
config = {
    chart: { ... }
    plotOptions: {
        series: {
            point: {
                events: {
                    click: function(e) {
                        // Don't pass along clicks on series points for one reason or another
                        e.swallowByHighCharts();
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-04T20:18:22.243

在我看来，一个很晚的答案，但仍然是必要的。

highcharts 文档 [http://api.highcharts.com/highcharts#chart.events.click](http://api.highcharts.com/highcharts#chart.events.click)

指一个简单地将事件转发到图表容器的脚本：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/事件容器/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/events-container/)

```
$(function () {
    $('#chart1').highcharts({
        ...
    });

    $('.chart-container').bind('mousedown', function () {
        $(this).toggleClass('modal');
        $('.chart', this).highcharts().reflow();
    });
}); 
```

# c# - 什么是 UMThunkStubAMD64，为什么它似乎是一个瓶颈？

> ID：11618076
> 
> 赞同：0
> 
> 时间：2012-07-23T18:13:28.823
> 
> 标签：c#, c++, windows

我正在寻找 Windows WPF C++/C# 64 位应用程序中的性能问题。在调试器下运行时（包括使用调试堆运行），应用程序有时会非常慢，每次点击都需要几秒钟的时间来响应。在缓慢期间，MSVS 分析器将 UMThunkStubAMD64 报告为工作最多的函数（25% 的独占样本）。这个名字听起来像是某种适配器/包装器函数，可能用于从 64 位应用程序代码调用 32 位操作系统代码，但我想知道它是否在做更多工作，比如检查堆状态。

UMThunkStubAMD64 是什么？是否有任何因素影响其性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:12:38.950

`UMThunkStubAMD64`是一个处理从本机代码到托管代码的转换的 thunk。

如果 25% 的样本在此 thunk 中，则分析器很可能只分析本机代码。如果是这样，则在托管代码执行时采集的任何样本都将显示在堆栈中最后一个本机帧的存储桶中，这将是托管 thunk 的本机帧。因此，25% 意味着（大约）25% 的运行时间用于执行托管代码。

thunk 本身应该非常快：在本机代码和托管代码之间转换不是免费的，但程序也不应该花费 25% 的时间来做这件事。可能会想出一个花费大量时间进行转换的人为示例，但我猜想在实际代码中遇到这种情况的可能性很小。

# api - 删除 Apache Jena 中没有属性的所有资源？

> ID：11618081
> 
> 赞同：2
> 
> 时间：2012-07-23T18:13:52.060
> 
> 标签：api, rdf, jena

Apache Jena 有没有办法从当前模型中删除所有没有任何属性的资源？

我只找到了如何删除某些三元组，但没有找到诸如迭代资源、检查它们有多少属性等之类的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T19:07:49.183

它不存在，因为它不需要存在。RDF 数据模型描述了一个基于三元组的图，其中主语和宾语映射到耶拿用语中的资源，谓词映射到属性。

没有任何属性的资源是不可能的，因此不需要存在删除此类资源的方法。

要迭代资源，请尝试使用`listSubjects()`和`listObjects()`方法

要获取与特定资源关联的属性的数量，您可以使用该`listStatements()`方法获取 a`StmtIterator`然后计算该资源返回的语句，例如

```
//Assuming you have a Model in variable model
//Assuming you already have some Resource in variable res
StmtIterator stmts = model.listStatements(res, null, null);
int count = 0;
while (stmts.hasNext())
{
  count++;
  stmts.next();
} 
```

如果您想一次计算各种事物（例如每个资源的属性数量），您可能希望使用 SPARQL 查询，例如

```
SELECT ?s (COUNT(?p) AS ?NumProperties)
WHERE { ?s ?p ?o } GROUP BY ?s 
```

请参阅[文档](http://jena.apache.org/documentation/query/)以了解如何运行 SPARQL 查询。

# bash - 循环外未定义的变量

> ID：11618082
> 
> 赞同：1
> 
> 时间：2012-07-23T18:13:55.050
> 
> 标签：bash, variables, loops, undefined

我在使用 Bash 脚本时遇到了一个奇怪的问题。变量`NumTMPara`在内循环内有正确的值，但在循环外，值是 0？

这是我的脚本：

```
echo "packet.txt"
cat $SRDB_dir/tpcf.dat | sed -e 's/[\t]/;/g' \
| while read my_line
  do
    PID_SPID=$(echo $my_line | cut -f1 -d';')
    TPCF_NAME=$(echo $my_line | cut -f2 -d';')
    NumTMPara=0
    cat $SRDB_dir/plf.dat | sed -e 's/[\t]/;/g' | grep ";$PID_SPID;" \
    | while read my_line2
      do
        PCF_NAME=$(echo $my_line2 | cut -f1 -d';')
        Param_ID=$(cat $destination/tmparam.txt | sed -e 's/[\t]/;/g' | grep ";$PCF_NAME," | cut -f1 -d ';')
        OFFBYTE=$(echo $my_line2 | cut -f3 -d';')
        OFFBIT=$(echo $my_line2 | cut -f4 -d';')

        Myptc=$(grep $PCF_NAME $SRDB_dir/pcf.dat | sed -e 's/[\t]/;/g' | cut -f5 -d';')
        Mypfc=$(grep $PCF_NAME $SRDB_dir/pcf.dat | sed -e 's/[\t]/;/g' | cut -f6 -d';')
        WIDTH=$(get_width $Myptc $Mypfc)

        PCF_RELATED=""
        PCF_DESCR=$(grep "^$PCF_NAME" $SRDB_dir/pcf.dat | sed -e 's/[\t]/;/g' | cut -f2 -d ';')
        let NumTMPara=1+${NumTMPara}

        #here, the value is correctly reported
        echo -e "\t$PCF_NAME\t$Param_ID\t$OFFBYTE\t$OFFBIT\t$WIDTH\t$PCF_RELATED\t$PCF_DESCR \t${NumTMPara}"
        packetligne="\t$PCF_NAME\t$Param_ID\t$OFFBYTE\t$OFFBIT\t$WIDTH\t$PCF_RELATED\t$PCF_DESCR"
      done

    #Why does NumTMPara = 0 ??
    echo -e "$PID_SPID\t$TPCF_NAME\t${NumTMPara}"
  done 
```

一切都很好...

```
NCGT0030 14189 16 0 16  TC Packet ID  1
NCGT0040 14190 18 0 16  TC Packet Seq Control  2
NCGT0020 14188 20 0 16  Generic Failure ID  3
NCGB00B4 14074 22 0 32  Data Field Header  4 
```

直到这个：

```
10512 YCSR271B 0 
```

为什么是0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:20:55.707

问题在于，在管道 ( `command1 | command2 | command3`) 中，每个命令都在单独的子 shell 中运行。这意味着来自主 shell 的任何变量都被复制到每个命令的执行环境中，但命令所做的任何更改都不会复制回主 shell 的执行环境中。

您有几个选项，但有两个主要选项：

*   您可以重新构建脚本，以便*不会*在管道内分配变量。
    *   例如`command1 | command2 | while ... do ... done`，您可以写成，而不是`while ... do ... done < <(command1 | command2)`。这仍将在子 shell 中运行`command1`，`command2`但`while`-loop 将根据需要在主 shell 中运行。
*   您可以将变量保存到管道完成后可以读取的临时文件。

# php - 在博客之外显示 wordpress 帖子

> ID：11618083
> 
> 赞同：0
> 
> 时间：2012-07-23T18:13:58.603
> 
> 标签：php, wordpress, blogs

我的网站上有两个 wordpress 博客，现在我想在主页上显示两个博客类别的帖子。我正在使用以下代码。

```
<?php require($_SERVER['DOCUMENT_ROOT'] . '/projects/wp-load.php'); 
 query_posts('cat=9& showposts=8');  if (have_posts()) : while (have_posts()) :   
the_post(); ?>
<ul><li>
<a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php 
$shorttitle4 = substr(the_title('','',FALSE),0,25)."...";

echo $shorttitle4;
?></a>

</li></ul>
<?php endwhile; else: echo "no posts"; endif; ?>
<?php wp_reset_query(); ?> 
```

我的一个博客放在“项目”文件夹中，另一个放在“技术文件夹”中。但是如果我在上面的代码中将文件夹更改为“技术”，则此代码仅显示来自项目博客的帖子。我认为这是因为 wp-load.php 文件。你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:56:14.800

有两种或多种方法，你可以做到。

1.  使用 PHP Pear 包，例如 XML_RSS、XML_Tree 和 XML_Parser
2.  使用 RSS 提要

尝试 RSS 提要。因为大多数托管服务提供商公司不会提供安装现成服务器的软件包。

写在你的主题函数文件（functions.php）

```
function read_rss($display=0,$url='') {
    $rss = new XML_RSS($url);
    $rss->parse();
    $itemArr = array_slice ( $rss->getItems(), 0, $display );
    return $itemArr;
} 
```

现在写在你的模板文件上

```
<ul>
< ?php
    $items = read_rss(2,'http://sivel.net/feed');
    foreach ( $items as $item ) {
        echo '<li><a href="' . $item['link'] . '">' . $item['title'] . '</a>';
    }
?>
</ul> 
```

您可以做更多的事情，请点击[此链接](http://www.worldoweb.co.uk/2012/display-wordpress-posts-on-another-wp-blog)或查看[此 stackoverflow 答案](https://stackoverflow.com/questions/2515871/how-can-i-include-wordpress-posts-in-a-custom-php-file?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:32:29.547

您确实需要提供更多信息，但我认为这可能是因为以下查询在其他文件夹中可能不成功

```
query_posts('cat=9& showposts=8'); 
```

技术站点中是否存在类别 9？也许您需要对另一个文件夹进行另一个查询？

# php - 如何使用 php + javascript 更改 HTML 表格的内容

> ID：11618089
> 
> 赞同：0
> 
> 时间：2012-07-23T18:14:24.447
> 
> 标签：php, javascript, html

我有一个页面，当用户访问它时，对数据库进行 MySQL 调用，然后将该信息放入页面最初加载时呈现给查看器的 html 表中。

我想允许更高级的细化选项，比如按姓名、年龄等过滤。

当用户提交他们的优化选项时，我将如何清除页面加载时显示的 HTML 表中的“旧”数据，然后用 PHP 返回的“新”数据重新填充它？

这需要通过 JS 进行 DOM 操作吗？如何指定目标节点以将我的 PHP 回显到其中？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:19:50.890

当您希望显示的数据可从服务器获得但尚未在浏览器中时，您可以`AJAX`调用服务器并从中拉回数据以进行显示。

一个常见的用例是当您显示可以定期更新的实时信息时

[什么是ajax？](http://en.wikipedia.org/wiki/Ajax_%28programming%29)

[想开始学习ajax？](https://stackoverflow.com/questions/3536609/how-to-start-learning-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:18:48.020

动态 java 脚本将帮助您将更改合并到 html 页面中。

AJAX 将是做到这一点的最佳解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:21:05.207

Ajax，是的，document.getElementById

# c# - 在 SQL Server 中处理 XML 输入参数的最佳做法是什么

> ID：11618093
> 
> 赞同：0
> 
> 时间：2012-07-23T18:14:38.413
> 
> 标签：c#, xml, sql-server-2008

在我的一个 c# 项目中，我必须在数据库表中存储多行。为此，我在存储过程中将 Xml 数据作为字符串数据类型传递，然后我改回 XML，然后使用 sp_xml_prepareddocument 存储到表中。

我想知道这是否是正确的方法。或者是否有任何其他最佳方法可用于处理这种情况。当 XML 变大时是否有任何性能损失。

```
ALTER PROCEDURE [dbo].[InsertData]
 @nSiteId int,
 @nClaimId int,
 @nEditSourceId int,
 @sClaimEditXml NVARCHAR(MAX)
AS
BEGIN
    SET NOCOUNT ON

    DECLARE @hDoc INT, @nRC INT  
    EXEC @nRC = sp_xml_preparedocument @hDoc OUTPUT, @sClaimEditXml  
    IF @nRC <> 0  
    BEGIN  
        RAISERROR( N'apiInsertClaimCurrentEdits #1', 16, -1 )  
        RETURN -1  
    END

    IF EXISTS(SELECT * from ClaimCurrentEdits where SiteID=@nSiteId and ClaimID=@nClaimId and EditSourceId = @nEditSourceId)
    BEGIN
        DELETE FROM ClaimCurrentEdits where SiteID=@nSiteId and ClaimID=@nClaimId and EditSourceId = @nEditSourceId 
    END

    INSERT INTO [ClaimCurrentEdits]
   ([SiteID]
   ,[ClaimID]
   ,[ErrorID]           
   ,[ErrorDesc]
   ,[Severity]
   ,[ValidationDate]
   ,[EditSourceId]
   )     
    SELECT * FROM OPENXML( @hDoc, '/ValidationResults/ValidationResult',2 )
    WITH
    (   SiteId int '../@SiteId',
        ClaimId int '../@ClaimId',
        ErrorId int '@ErrorId',
        ErrorDesc varchar(2048) '@ErrorDesc',
        Severity int '@Severity',
        ValidationDate datetime '@ValidationDate',
        EditSourceId int '@EditSourceId'
    )   

    EXEC sp_xml_removedocument @hDoc

END

RETURN 0

/******************************************************************************/

GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T03:05:20.070

如果您的 xml 文件较大，那么只要您确保在完成后立即运行 sp_xml_removedocument，OpenXML 就是您的选择。如果您要在 xml 上看到更小的块，我认为 XQuery 更快，并且不会带来任何来自 sp_xml_preparedocument 的内存问题。

我一直发现，根据您的需要尝试使用有效大小的 xml 的两种方法是最好的方法。

# c# - excel文件的自动更新器

> ID：11618097
> 
> 赞同：2
> 
> 时间：2012-07-23T18:15:01.150
> 
> 标签：c#, excel, automation, vba

我为我编写的某些软件提供了一个自定义自动更新程序。该软件由许多 DLL 和一个 .xla 文件组成。目前，我的自动更新程序的工作方式如下所示

```
1) Check server to see if update is available
2) download new DLLs and .xla file to temp folder when update is available
3) rename old DLLs and .xla file
   example: a.dll -> a_old.dll
            b.dll -> b_old.dll
            c.xla -> c_old.xla
4) Move new DLLs and .xla file to install location 
```

第 3 步和第 4 步是关键。我重命名了旧的 DLL，因为一些当前正在运行的程序可能对它们有句柄。重命名可确保正在运行的程序不受影响，并将继续使用旧版本的 DLL，而新启动的实例将使用新的 DLL。除了 .xla 文件外，这很好用。在 Microsoft excel 中打开 .xla 文件时，不允许进行重命名操作。您对我如何解决此问题有任何想法，或者您对我的更新程序应如何处理 excel 文件的更新有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:49:40.953

我认为如果您将 xla 文件标记为“只读”，它将不会被锁定。

# c# - 无法将 Microsoft Tag WebService 引用添加到 MVC 4 项目

> ID：11618100
> 
> 赞同：2
> 
> 时间：2012-07-23T18:15:06.777
> 
> 标签：c#, asp.net-mvc, c#-4.0, .net-4.0, asp.net-mvc-4

我试图将 Microsoft Tag Library WebService 引用添加到我的 MVC 4 应用程序。但我找不到 Web 服务的命名空间（例如 MyApp.Service）。我看了看[+](https://stackoverflow.com/questions/7063978/how-to-consume-a-webservice-in-mvc)和[+](https://stackoverflow.com/questions/118931/asp-net-mvc-web-services)和[+](https://stackoverflow.com/questions/11579497/accessing-webservice-from-asp-net-mvc)但我没有找到答案。谁能告诉我如何在 MVC 4 应用程序中使用 MSTag WebService？

*它在winform应用程序中运行良好*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T10:06:32.473

添加引用时，转到高级... 按钮并取消选中在引用的程序集中重用类型。

# android - 在左侧添加一个片段

> ID：11618104
> 
> 赞同：0
> 
> 时间：2012-07-23T18:15:24.153
> 
> 标签：android, view, fragment

当用户按下按钮时，我希望片段 B 出现在左侧，如下所示：

![在此处输入图像描述](../Images/c6ad8817d1a93cf06e2e79b78b6306b8.png)

这是我现在执行此操作的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/root"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<ViewGroup
    android:id="@+id/leftContainer"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="#ffff0000" />

<ViewGroup
    android:id="@+id/rightContainer"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="2"
    android:background="#ff00ffff" />

</LinearLayout> 
```

* * *

```
android.support.v4.app.FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(R.id.leftContainer, fragmentA);
ft.add(R.id.rightContainer, fragmentB);
ft.commit(); 
```

不幸的是，这一切给我的只是黑屏。我什至看不到片段的背景颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:46:08.333

您可以在添加 B 和 A 的情况下开始布局，但将 B 的可见性设置为“GONE”吗？然后，当您希望 B 出现时，更改其可见性。

如果我这样做，我会将它们都放在一个 LinearLayout 中。我将 B 的宽度设置为 0dp 并将其 layout_weight 设置为 1。我将 A 的宽度设置为 0dp 并将其 layout_weight 设置为 2。当 B 消失时，A 将填充整个布局，当 B 出现时，您将得到一个布局1/3 B 和 2/3 A。

ETA：这里有一些代码：

资源/布局/main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/topLevel"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="150dp"
    >
  <TextView  
      android:id="@+id/B"
      android:layout_width="0dp" 
      android:layout_weight="1" 
      android:layout_height="fill_parent" 
      android:text="B"
      android:background="#f00"
      android:textSize="36sp"
      android:gravity="center"
      android:visibility="gone"
      />
  <TextView  
      android:id="@+id/A"
      android:layout_width="0dp" 
      android:layout_weight="2" 
      android:layout_height="fill_parent" 
      android:text="A"
      android:background="#00f"
      android:textSize="36sp"
      android:gravity="center"
      />
</LinearLayout> 
```

FooApp.java：

```
package org.efalk.fooapp;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

public class FooApp extends Activity implements View.OnClickListener {
    private TextView A, B;
    boolean gone = true;

    @Override
    public void onCreate(Bundle savedState)
    {
        super.onCreate(savedState);
        setContentView(R.layout.main);
        A = (TextView)findViewById(R.id.A);
        B = (TextView)findViewById(R.id.B);
        A.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        gone = !gone;
        B.setVisibility(gone ? View.GONE : View.VISIBLE);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:21:16.977

您需要以 xml 或其他方式创建一个布局，以用作这些片段的容器。然后在fragmenttransaction中简单的添加fragment A。然后，您的布局中将有一些视图组，您可以将片段 A 添加到其中，并且您需要指定要将片段添加到事务中的哪个视图组。此外，您需要确保在事务上调用 commit 以使您的更改生效。如果您正在寻找一些不错的过渡等，那么您需要更多地考虑如何构建您的布局以及添加片段的逻辑等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:26:20.490

答案是：

```
add B
add A
call ft.hide(B); 
```

然后在需要时：

```
call ft.show(B); 
```

# python - Django：从根目录开始的多个 url 模式分布在文件中

> ID：11618105
> 
> 赞同：25
> 
> 时间：2012-07-23T18:15:29.303
> 
> 标签：python, django, django-urls

我想知道是否可以将标准 url 模式分布在多个文件中（在这种情况下是项目范围`urls.py`和几个特定于应用程序的文件`urls.py`）。

想象一下项目`urls.py`看起来像这样（让它工作）：

```
from django.conf.urls import patterns, include, url
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^user/signup/', 'registration.views.signup'),
    url(r'^user/confirm/(?P<code>\w{20})/', 'registration.views.confirm'),
    url(r'^user/profile/(\d+)/', 'profile.views.show'),
    url(r'^user/profile/edit/', 'profile.views.edit'), 
) 
```

如您所见，我有两个不同的应用程序都想使用 /user/* 的 url，所以我不能只使用`r'^user/'`包含。

我的问题是：我可以将以上内容分成两个单独的`urls.py`文件，每个文件都进入各自的应用程序吗？

*注意：忽略任何语法错误，因为这是输入的*

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-23T18:27:02.500

当然。URL 是按顺序处理的，两个包含可以具有相同的前缀 - 如果一个没有成功匹配，则处理将继续进行下一个。

```
urlpatterns = patterns('',
    url(r'^user/', include('registration.urls')),
    url(r'^user/', include('profile.urls')),
) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-08T05:58:23.067

我也建议添加这样的命名空间：

```
urlpatterns = patterns('',
    url(r'^user/', include('registration.urls', namespace="registration")),
    url(r'^user/', include('profile.urls', namespace="profile")),
) 
```

# java - 将 String[] 转换为 Arraylist 用java

> ID：11618106
> 
> 赞同：3
> 
> 时间：2012-07-23T18:15:32.087
> 
> 标签：java, string, arraylist

我想将从文件中获取的字符串转换为数组列表。我尝试过这种方式，但它不起作用：

```
import java.io.*;
import java.util.*;

public class Data
{
    static File file = DataSaver.file;
    static List<String> data = new ArrayList<String>(512);
    public static void a() throws Exception
    {
        FileInputStream fis = new FileInputStream(file);
        DataInputStream dis = new DataInputStream(fis);
        BufferedReader reader = new BufferedReader(new InputStreamReader(dis));
        if(!file.exists())
        {
            throw new IOException("Datafile not found.");
        }
        else
        {
            String[] string = reader.readLine().split("$");
            for(int i = 0; i < string.length; i++)
            {
                data.add(string[i]);
            }
        }
        dis.close();
        System.out.println(data.toString()); //for debugging purposes.
    }
} 
```

输出： `[$testdata1$testdata2$]`

想要的输出： `[testdata1, testdata2]`

文件内容： `$testdata1$testdata2$`

有人能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T18:17:45.677

`String.split`采用正则表达式，`$`是需要转义的特殊字符。此外，第一个 char 是一个`$`所以拆分最终会得到一个空的第一个元素（您需要以某种方式将其删除，这是一种方法：

```
String[] string = reader.readLine().substring(1).split("\\$"); 
```

...或者：

```
String[] string = reader.readLine().split("\\$");
for (int i = 0; i < string.length; i++)
    if (!string[i].isEmpty())
        data.add(string[i]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T18:20:58.780

**1.**用来`("\\$")`去掉 的特殊含义`"$"`。

**2.**用于TO`Arrays.asList()`的**转换** `Array``ArrayList`

**来自 Java 文档：**

返回由指定数组支持的固定大小的列表。（更改返回的列表“直写”到数组。）此方法与 Collection.toArray() 结合，充当基于数组和基于集合的 API 之间的桥梁。返回的列表是可序列化的并实现了 RandomAccess。

此方法还提供了一种方便的方法来创建一个固定大小的列表，该列表已初始化为包含多个元素：

**例如：**

```
String[] string = reader.readLine().split("\\$");

ArrayList<String> arr = new ArrayList<String>(Arrays.asList(string)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T18:18:08.150

您需要使用 . 转义特殊字符`\\`。

更改您的拆分语句，如下所示

```
String[] string = reader.readLine().split("\\$"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T18:21:15.143

添加到@dacwe

```
String[] string = reader.readLine().substring(1).split("\\$");
List<String> data =Arrays.asList(string); 
```

# mfc - 我可以将 CBitmapButton 附加到父 CWnd，而不是父 CDialog 吗？

> ID：11618108
> 
> 赞同：0
> 
> 时间：2012-07-23T18:15:42.610
> 
> 标签：mfc, cwnd, cbitmap

我继承了一个项目（最初是为 Win95 编写的！），它有许多按钮附加到从 CWnd 派生的父窗口。按钮本身位于从 CWnd 派生的用户定义类中，因此它们不是“真正的”按钮，而是由数以百万计的代码行定义的小窗口，并且有大量的显示问题，我一直在努力解决几个星期，看不到任何解决方案。

前几天我们得出结论，CBitmapButton 看起来是个不错的选择。看起来很简单，为不同的按钮状态定义 4 个位图。我需要的只是 BN_CLICKED 来启动一个处理程序，我会很高兴。

在搞砸了一段时间后，设置了一个按钮和一些位图，我能够显示 CBitmapButton；看起来不太好，但我可以解决这个问题......现在的问题是我试图设置一个消息映射来捕获 BN_CLICKED 消息，但是由于父窗口是从 CWnd 而不是 CDialog 派生的，我得到语法错误设置消息映射。多次阅读有关该主题的 MSDN，看来您只能将 CBitmapButton 连接到 CDialog 派生类。这对我来说似乎很奇怪 - 我只想要一个按钮，它应该能够将一个简单的“我被点击”传输到它所连接的任何父级，但显然不会发生。

那么，有没有人成功地将 CBitmapButton 附加到 CWnd 派生的父级？如果是这样，如何设置一个可以处理这些东西的消息映射？或者，您将使用什么方法来设置一个可以与 CWnd 父级一起使用的按钮类，因为 CBitmapButton 和 CButton 似乎需要 CDialog 作为父级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:34:37.540

不，它并不要求您的父窗口始终是 CDiaglot，您甚至可以从 CWnd 继承并在其中创建一个 CButton/CBitmapButton。

您可以覆盖派生类`OnCommand`中的消息`CWnd`并点击按钮单击事件。

# xml - Ant 构建文件中的类路径

> ID：11618111
> 
> 赞同：0
> 
> 时间：2012-07-23T18:15:49.860
> 
> 标签：xml, ant

我正在尝试为我的 JBoss AS 7 项目制作一个 Ant 构建文件。构建文件应该将我的项目构建到 EAR 中。我收到以下错误，所以我认为类路径被某种方式忽略了（如果我错了，请纠正我）。

```
C:\workspace\LearningAS7\GrahamsProj\build-handmade.xml:21: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
Compiling 4 source files to C:\workspace\LearningAS7\GrahamsProj\build

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\entity\Schemas.java:4: package javax.persistence does not exist
import javax.persistence.*;

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\entity\Schemas.java:10: cannot find symbol
symbol: class Entity
@Entity

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\entity\Schemas.java:11: cannot find symbol
symbol: class Table
@Table(name="schemas")

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\entity\Schemas.java:12: cannot find symbol
symbol: class SequenceGenerator
@SequenceGenerator(name="seq_schemas", sequenceName = "")

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\session\delegate\GrahamsProjBean.java:7: package javax.ejb does not exist
import javax.ejb.Stateless;

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\session\delegate\GrahamsProjBean.java:8: package javax.persistence does not exist
import javax.persistence.EntityManager;

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\session\delegate\GrahamsProjBean.java:9: package javax.persistence does not exist
import javax.persistence.PersistenceContext;

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\session\interfaces\GrahamsProjBeanLocal.java:3: package javax.ejb does not exist
import javax.ejb.Local;

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\session\interfaces\GrahamsProjBeanLocal.java:8: cannot find symbol
symbol: class Local
@Local

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\session\interfaces\GrahamsProjBeanRemote.java:3: package javax.ejb does not exist
import javax.ejb.Remote;

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\session\interfaces\GrahamsProjBeanRemote.java:8: cannot find symbol
symbol: class Remote
@Remote

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\session\delegate\GrahamsProjBean.java:15: cannot find symbol
symbol: class Stateless
@Stateless

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\session\delegate\GrahamsProjBean.java:18: cannot find symbol
symbol  : class EntityManager
location: class grahamsproj.session.delegate.GrahamsProjBean
EntityManager em;

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\entity\Schemas.java:52: cannot find symbol
symbol  : class Id
location: class grahamsproj.entity.Schemas
@Id

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\entity\Schemas.java:53: cannot find symbol
symbol  : class Column
location: class grahamsproj.entity.Schemas
@Column(name = "ID")

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\entity\Schemas.java:54: cannot find symbol
symbol  : class GeneratedValue
location: class grahamsproj.entity.Schemas
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "seq_schemas")

C:\workspace\LearningAS7\GrahamsProj\src\grahamsproj\session\delegate\GrahamsProjBean.java:17: cannot find symbol
symbol  : class PersistenceContext
location: class grahamsproj.session.delegate.GrahamsProjBean
@PersistenceContext

17 errors
C:\workspace\LearningAS7\GrahamsProj\build-handmade.xml:21: Compile failed; see the compiler error output for details.
BUILD FAILED (total time: 0 seconds) 
```

所以现在我的构建文件看起来像这样： http: [//pastebin.com/NZWmQEjN](http://pastebin.com/NZWmQEjN)（在这里发布太长了）。如您所见，我放入了类路径部分。但现在我收到了这个错误：

```
C:\workspace\LearningAS7\GrahamsProj\build-handmade.xml:11: Problem: failed to create task or type classpath
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place. 
```

谁能看到我的构建文件有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T19:50:55.523

你有：

```
<classpath>
     <pathelement path="${classpath}"/>
      <fileset dir="lib">
           <include name="**/*.jar"/>
       </fileset>
       <pathelement location="classes"/>
       <dirset dir="${build.dir}">
           <include name="apps/**/classes"/>
           <exclude name="apps/**/*Test*"/>
       </dirset>
       <filelist refid="third-party_jars"/>
  </classpath> 
```

但是，你不能简单地`<classpath>`被它寂寞的自我折腾。

您正在做的是创建一个可以在其他地方用作***CLASSPATH的******PATH 。***你可能想要：

 *```
<path id="class.path">
     <pathelement path="${classpath}"/>
      <fileset dir="lib">
          <include name="**/*.jar"/>
      </fileset>
      <pathelement location="classes"/>
      <dirset dir="${build.dir}">
          <include name="apps/**/classes"/>
          <exclude name="apps/**/*Test*"/>
      </dirset>
      <filelist refid="third-party_jars"/>
</path> 
```

现在，您可以在需要指定类路径时使用该***PATH ：***

```
 <javac srcdir="${src}"
        destdir="${build}"
        classpathref="class.path"/> 
```

或者...

```
 <javac srcdir="${src}
        destdir="${build}">
        <classpath>
            <path refid="class.path"/>
        </classpath>
   </javac> 
```

最后一个允许您在需要时添加多个类路径，有些人更喜欢它，因为它可以在需要时更容易地更改类路径。*

# c - 要处理的最重要的信号？

> ID：11618112
> 
> 赞同：5
> 
> 时间：2012-07-23T18:15:50.733
> 
> 标签：c, debugging, signals, signal-handling

最近我正在开发一个用 c 编写的软件，它有大约 3-4 千行代码。当我开始遇到分段错误时，我添加了一个 SIGSEGV 处理程序。这有助于我在处理程序被制作时指出错误给一个回溯。

我的问题是除了 SIGSEGV 之外，当我们拥有大型软件时，应该处理哪些重要信号，这样错误检测就会很容易。

这可以选择用于防止攻击。Ex 软件在进行关键更新/操作时接收中止信号。标准告诉 SIGHUP、SIGINT、SIGKILL、SIGPIPE、SIGTERM 和其他一些信号具有终止该信号传递到的进程的默认属性。

因此，要为我的软件添加另一层保护，我将不得不改变这些信号的行为。通过保护，我的意思是我不希望我的软件在关键更新之间终止，我将决定何时终止中止。

**编辑**：我想知道软件设计得如何，如何处理信号，像安全网一样使用它们，这有助于软件的构建。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T20:39:43.153

好吧，你不是 100% 清楚你对答案的期望，但我会尽量涵盖一般的想法。

首先，您可以称之为“调试”信号的是（以及何时期望它们）：

1.  `SIGILL`, `SIGFPE`— 如果程序试图运行非法指令，通常会出现错误`CFLAGS`和/或自己的程序集（或严重的随机损坏）；
2.  `SIGABRT`— 由`abort()`呼叫引起，例如在`assert()`. 它也可以来自库，因此您通常应该处理它；
3.  `SIGSEGV`——无效的内存访问，你可能已经知道了；
4.  `SIGBUS`— 在使用 I/O`mmap()`并尝试读/写不可访问的内存时可能发生；当`mmap()`基于 - 的 I/O 空间不足时，我也遇到过这种情况；
5.  `SIGPIPE`— 在管道上进行 I/O 时，管道与另一端断开连接；
6.  POSIX 还指定`SIGSYS`了无效的系统调用，您可能也想抓住它（尽管我从未设法看到一个）。

如果您使用相关操作，我会说您需要处理这些信号。它们都在 POSIX 中，但我不确定是否所有系统都实现了它们，所以`#ifdef`无论如何你可能都想为它们使用 s （`SIG*`保证是宏，因此适用于`#ifdef`）。

您在程序运行时可能遇到的其他信号是：

1.  `SIGALRM`— 使用时`alarm()`，
2.  `SIGPOLL`— 使用轮询时，
3.  `SIGCHLD`— 当产生进程时……</li>

这些基本上是您在使用相关操作时正在处理的信号，尽管它们默认终止，但无论如何您都应该为它们提供其他处理程序。

最后，如果您希望处理*user*发送的信号，这是一个苛刻的情况——因为 user 实际上可以发送每个信号。因此，如果您想优雅地处理这一切，您需要捕获`man signal`默认为终止或中止操作的每个信号。

如果您只想捕获您可以预期的常见信号子集，这些将是：

1.  `SIGHUP`当带有程序的终端（或其他相关的父级）死亡时，
2.  `SIGINT`对于 ^c 键，
3.  `SIGQUIT`对于 ^\ 键，
4.  `SIGTERM`对于终止请求（`kill`默认由程序和其他类似工具发送），
5.  `SIGUSR1`和`SIGUSR2`是用户定义的信号，通常用于执行程序特定的操作。它们是由用户发送的，并且——出于某种原因——默认杀死程序。

也有`SIGKILL`，但标准不允许捕捉它。

我希望我涵盖了最重要的信号。请注意，我是 Linux 用户，其他 *nixes 可能有一些您也可能想要捕捉的特定信号。

这通常完全取决于您想要实现的目标。虽然防止软件被随机信号打断是个好主意，但通常不值得阻止它被所有这些信号杀死，尤其是那些仅由用户​​直接发送的信号。

如果用户想要杀死应用程序，无论如何他都可以实现它，并且*只需*处理常见的应用程序就足够了 -`SIGINT`和`SIGTERM`. 我个人希望`SIGQUIT`(^\ key) 杀死应用程序而不让它完成甚至关键的任务（就像这样`SIGKILL`做）。

*编辑*. 作为最后一句话的理由，请考虑以下几点：我刚刚做了一些愚蠢的事情，比如删除了一些重要数据。或者只是注意到退出时清理程序有问题。我*真的*很想终止程序，确保我的信号*不会被捕获，但会**立即*返回。即使它会导致数据损坏，有时我真的更喜欢有损坏的数据（希望我能够恢复我需要的东西）而不是*没有数据*。

# java - 启动可执行文件的多个实例并管理它们

> ID：11618116
> 
> 赞同：0
> 
> 时间：2012-07-23T18:15:55.787
> 
> 标签：java, multithreading, exec, pid

我有很多进程正在运行

```
Runtime rt = Runtime.getRuntime();
int i=0;
int arg1;
while(i<10){
    arg1 = i+1;
    Process p = rt.exec("abc.exe "+ arg1);
    i++;
} 
```

每个进程都以不同的参数值运行，这里 arg1 是该进程 abc.exe 的参数，我想检查所有这些进程是否正在运行或其中任何一个崩溃。如果发生崩溃，我想重新启动它。如何跟踪所有这些过程并定期检查它们是否崩溃？

我可以在 Linux 和 Windows 上追踪这个东西吗？阅读一些关于它的文章，但这一篇有点不同，因为它涉及多次出现并且只需要检查一些特定的过程......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:19:28.663

该`Runtime.exec(...)`命令返回一个`Process`对象。您可以将`Process`对象放入集合中，然后使用该`Process.exitValue()`方法查看每个过程是否已完成。 如果进程仍在运行，则`exitValue()`抛出 a 。`IllegalThreadStateException`

所以你的代码可能是这样的：

```
List<Process> processes = new ArrayList<Process>();
// noticed I turned your while loop into a for loop
for (i = 0; i < 10 i++) {
    int arg1 = i + 1;
    Process p = rt.exec("abc.exe "+ arg1);
    processes.add(p);
}
...
// watch them to see if any of them has finished
// this can be done periodically in a thread
for (Process process : processes) {
   try {
       if (process.exitValue() != 0) {
           // it did not exit with a 0 so restart it
           ...
       }
   } catch (IllegalThreadStateException e) {
       // still running so we can ignore the exception
   }
} 
```

> 我可以在 Linux 和 Windows 上追踪这个东西吗？

如果我理解这个问题，上面的代码应该可以在 Lunux 和 Windows 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:21:27.500

使用 processbuilder，然后保留可以管理您启动的任何进程的进程 ID。`Runtime.exec(...)`应该为您需要执行的“一次性”命令保留。

# python - python：检查主机名是否已解析

> ID：11618118
> 
> 赞同：31
> 
> 时间：2012-07-23T18:16:06.010
> 
> 标签：python, hostname

如何在 python 中创建一个函数，如果主机名解析，则返回 1，如果主机名不解析，则返回 0。

我找不到有用的东西，有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-23T18:21:08.367

您可以[`socket.gethostbyname()`](http://docs.python.org/library/socket.html#socket.gethostbyname)为此使用：

```
>>> import socket
>>> socket.gethostbyname('google.com')
'74.125.224.198'
>>> socket.gethostbyname('foo')           # no host 'foo' exists on the network
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
socket.gaierror: [Errno 8] nodename nor servname provided, or not known 
```

您的函数可能如下所示：

```
def hostname_resolves(hostname):
    try:
        socket.gethostbyname(hostname)
        return 1
    except socket.error:
        return 0 
```

例子：

```
>>> hostname_resolves('google.com')
1
>>> hostname_resolves('foo')
0 
```

# deployment - 在 AWS 上部署简单应用程序/博客的“正确方法”是什么？

> ID：11618119
> 
> 赞同：2
> 
> 时间：2012-07-23T18:16:13.593
> 
> 标签：deployment, amazon-web-services

我是 AWS 的新手，做了我的研究，但没有得到好的答案，因此问了一个简单的问题。

到目前为止我做了什么

*   我启动了一个 Linux AMI，安装了 LAMP 并部署了我的应用程序，它运行良好
*   弹性 IP 是 AMI 的设置
*   域名也正确指向

所以事实上，如果你[http://example-domain-name.com](http://example-domain-name.com)你将能够看到该应用程序并与之交互......

我的问题是，我现在完成了吗，我的**应用程序部署正确**吗？正如我听到的恐怖故事，包括 AWS AMI 崩溃等。

您能否分享您在这方面的专业知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T02:21:11.617

根据您对问题的评论，所有可能的最佳案例是高度可用、多可用区、自动缩放的 Web 层，由复制的 mysql 数据库支持，或者，如果您负担得起，则支持 Amazon RDS 之类的东西。[这是一个示例 CloudFormation 模板，在您填写几个变量后，它将或多或少地构建我刚刚在大约两次单击中描述的内容。](https://s3.amazonaws.com/cloudformation-templates-us-east-1/WordPress_Multi_AZ.template)

这有点矫枉过正......我想......但如果你担心亚马逊的无数故障模式，高可用性可以付出代价。该模板的默认实例（包括多可用区 RDS）[每月 270 美元左右，24/7 正常运行时间。](http://calculator.s3.amazonaws.com/calc5.html)如果你真的致力于你的博客，并且可以保证你会在上面写很多年，那么[使用保留实例可以节省相当多的钱。](http://aws.amazon.com/ec2/reserved-instances/#3)

这是很多钱，是的。但这也低于我在纽约的每月汽车保险费率。这比亚马逊的价格更能说明我可疑的保险公司或我的驾驶记录，但在某些个人应用程序中，高度可用的设计可能值得付出代价。你的时间对你来说价值多少？博客呢？

称之为黄金标准，因为你必须有一辆装满黄金的自卸卡车才能负担得起并且还能吃。当你开始出血时你会失去什么？

*   可用区：进行多可用区部署，您可能会面临可用区中断的风险。这种情况不会经常发生，但[在 DC 地铁中也不会发生这种情况。](http://gigaom.com/cloud/some-of-amazon-web-services-are-down-again/)不过不用担心，如果您围绕单个 AZ 进行设计，那么您就在某个[庞大且可能出乎意料的公司中。](http://www.forbes.com/sites/eliseackerman/2012/06/17/the-real-story-behind-the-aws-outage-and-what-it-means-for-investors/)

*   RDS / 复制 MySQL：丢失高可用数据解决方案，您就有丢失数据的风险。考虑到最好的设计，这是一种痛苦，即使它像偶尔的 EBS 快照一样简单。

*   多个网络服务器：就像 MySQL 数据库一样，如果你把你的网络层放在一台机器上，你就要求中断。如果您能负担得起替代方案，您可以围绕它进行设计。否则，您将需要一种简单的编程方式来构建您的网络服务器。

*   自动缩放：我不明白为什么有人在不使用[CloudFormation](http://aws.amazon.com/cloudformation/)或 CLI 工具的自动缩放的情况下设计 AWS 应用程序，即使实例的最小数量和最大数量正好是一个。[AWS 定价](http://aws.amazon.com/free/)的免费套餐包含大量 CloudWatch 指标，可以轻松进行实例监控，但这当然取决于......

*   配置管理：每个 AWS 设计的共同点是配置管理。无论您实际部署了多少台机器，它都是部署过程中最重要的组成部分。无论您是使用 CloudFormation、Chef、Puppet、其他服务还是它们的[组合，](https://s3.amazonaws.com/cloudformation-examples/IntegratingAWSCloudFormationWithOpscodeChef.pdf)您现在花在配置管理上的任何时间，当您对机器构建仍然记忆犹新时，都会在以后得到回报。

这些组件中的每一个都有助于您的应用程序的稳定性，并且所有这些组件都需要花费金钱或时间。这只是你想花什么，什么时候花的问题。

您可以通过 Amazon 的[免费套餐](http://aws.amazon.com/free/)部分实现黄金标准。它包括足够的时间在单个 AZ 中连续运行一个微实例、一个 ELB 和一个小型 RDS 实例。在撰写本文时，它还允许使用 10 个自定义 CloudWatch 指标。免费套餐仅适用于第一年使用的新客户。如果您将其产品与一些基本配置管理相结合，您可以合理地在 AWS 上运行一个小型博客，以避免许多停机情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:46:16.257

重要的是要了解您的 AWS EC2 服务器“可能”随时出现故障......这是“设计使然”......他们向您收取廉价非冗余商品硬件的廉价租金......没有 SLA...... .

所以真正的问题是：您是否有充分记录（最好是脚本化）的过程来从头开始快速重建服务器和/或从 EBS 快照中恢复它？

如果这个问题的答案是：是的！然后我会说你“做对了”......

如果没有，您可能需要多花一点时间了解 AWS 土地上可能发生的坏事......（再次“按设计”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T22:52:57.410

没有什么好办法。您至少需要一个负载均衡器和两个应用程序实例。另外，根据您的应用程序，您将需要一个容错的 RDS 实例和/或 S3。

AWS 对于简单的应用程序或博客来说是错误的解决方案。通过使用其他提供商的单个 VPS 或专用服务器，您可以以显着降低的成本获得更好的性能和耐用性。使用 AWS，您需要为快速扩展应用程序的能力支付额外费用。如果您不需要这样做，那不是正确的选择。90% 的使用 AWS 的人不理解这一点。

# c#-4.0 - EF4 - 非 POCO 实体是否可以实现接口？

> ID：11618121
> 
> 赞同：1
> 
> 时间：2012-07-23T18:16:21.503
> 
> 标签：c#-4.0, entity-framework-4

只是想知道，通过模型/数据库创建的实体是否有可能首先实现接口？如果是这样，是否只需将其添加到部分类中，如下所示：

```
public partial class SomeEntity : ISomeInterface
{
    // blah
} 
```

还是会更多参与？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:23:04.340

是的，您建议的方法应该可以正常工作。或者，您可以使用自定义 T4 模板来生成具有已经存在的接口实现的类（通过模板）。

# vb.net - 如何在 VB 2010 中动态创建对象和/或属性？

> ID：11618122
> 
> 赞同：0
> 
> 时间：2012-07-23T18:16:28.343
> 
> 标签：vb.net

我正在尝试动态创建对象和/或属性...这可能吗？

```
CLIENT_INFO
  NAME
    F_NAME (= "LoriBeth")
    L_NAME (= "Johnson")
  ADDRESS
    ADDY1 (= "123 MyStreet")
    ETC (= "Etc") 
```

在哪里：

```
Dim objCreated as Object
Dim objName AS String = "CLIENT_INFO"
Dim 1stProp as String = "NAME"
etc...

objCreated = makeObject(objName, objProp1, etc...)

Function makeObject(byval objName as String, byval objProp1 as String, etc...)
  Class &objName
    Property &objProp1
    End Property
  End Class

  Return &objName
End Function 
```

（我使用 VFP 方式在运行时将 vars 替换为它们的值）

最终得到一个可寻址的对象，例如：

CLIENT_INFO.NAME.F_NAME = "LoriBeth"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:24:55.663

You can create a single property typed as a `Dictionary(Of String, Object)` to accomplish your expando- functionality.

But this whole thing seems like a really bad idea.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:04:55.390

汉斯，这很酷，很高兴知道，但不允许我做我第一次发布的内容。即使是这样的事情也会更有帮助：

```
Option Strict Off 
Imports System.Dynamic  
Module Module1     
   Sub Main()         
      Dim OldBag As Object = New ExpandoObject         
      OldBag.Name = "Hans"         
      OldBag.Age = 21         
      OldBag.NewName = "NewBag"
      Console.WriteLine(NewBag.Name)         
      Console.WriteLine(NewBag.Age)
   End Sub 
End Module 
```

# javascript - PageMethods 没有调用成功或失败函数

> ID：11618123
> 
> 赞同：1
> 
> 时间：2012-07-23T18:16:31.683
> 
> 标签：javascript, asp.net, vb.net, pagemethods

在我的 asp.net 应用程序（服务器端的 vb）中 - 我在我的 javascript 中使用 PageMethods 来调用一些服务器端函数。特别是一个电话无法正常工作。pagemethods 调用正在调用服务器端函数（正如我可以通过使用跟踪点看到的那样） - 但是在函数运行后没有命中成功或失败函数。我知道服务器端的函数一直成功运行到最后，因为函数的最后一位是 sql 表更新——它成功发生了。谁能告诉我为什么不调用成功或失败函数？下面列出的是对服务器端的调用以及成功和失败函数，以及正在调用的服务器端函数。谢谢您的帮助。

调用服务器端

```
PageMethods.UpdatePassword(document.getElementById('txtNewPass').value, updatePasswordCallBack, updatePasswordFail); 
```

成功/失败函数

```
function updatePasswordCallBack(c) {
            alert('updatePasswordCallBack hit');
        }
function updatePasswordFail(c) {
            alert('updatePasswordFail hit');
        } 
```

服务器端函数（被跟踪点调用）

```
 <System.Web.Services.WebMethod()> _
Public Shared Function UpdatePassword(ByVal userText)
    'Open Connection to DB here, removed for stackoverflow post

    'convert userText to password hash removed for stack overflow

    'now must update the password

    myCmd.CommandType = CommandType.Text
    myCmd.CommandText = "UPDATE P2_RESOURCE_PROFILE SET RES_PASSWORD = '" & userTextHash & "' WHERE RES_UID = " & UserID
    myCmd.ExecuteScalar()

    objConn.Close()

    Return true
End Function 
```

所以executeScalar被命中并改变了DB值，但完成后没有返回或成功函数被命中。再次感谢你的帮助。

# google-apps-script - Google Apps 管理脚本应用程序 | 转发非管理员电子邮件

> ID：11618125
> 
> 赞同：0
> 
> 时间：2012-07-23T18:16:36.777
> 
> 标签：google-apps-script

我想知道 Script Apps 是否能够让 Google Apps 域影响非管理员帐户。

示例：我想将俱乐部会员的电子邮件地址转发到备用电子邮件地址，而无需登录该帐户。该帐户每年都会从一个新人（学校组织）处滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:28:44.830

您可以使用 Google Apps 电子邮件设置 API 来转发您的 Google Apps 用户的邮件。我之前已经使用 UrlFetchApp 和 oAuth 成功实现了它。这里有几个参考链接 [https://developers.google.com/google-apps/email-settings/#manage_forwarding_settings](https://developers.google.com/google-apps/email-settings/#manage_forwarding_settings) [https://developers.google.com/apps-script/service_urlfetch](https://developers.google.com/apps-script/service_urlfetch)

# c# - c# 是否可以在 Windows 窗体应用程序中显示实时网页？

> ID：11618127
> 
> 赞同：11
> 
> 时间：2012-07-23T18:16:50.030
> 
> 标签：c#

我想知道是否可以在 Windows 窗体应用程序中显示网页。我正在尝试创建一个实时聊天客户端，但对于 ac# 初学者来说似乎很难，因为我还必须编写服务器端代码。所以我想知道是否可以在我的应用程序窗口中显示一个包含聊天客户端的 php 页面？

提前感谢任何重播！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T18:18:12.073

是的，您可以通过[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)控制来做到这一点。将其放入您的表单并调用`Navigate`方法：

```
browser.Navigate("http://www.google.com"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T18:18:36.487

是的，使用 WebBrowser 控件。它完全符合您的描述：从 winforms 应用程序中显示网页。它本质上是控件中的 Internet Explorer。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T18:19:07.967

是的，Windows 窗体中有一个 WebBrowser 控件。您可以将此页面导航到您想要的任何网页。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-02T08:58:06.757

你可以试试 CefSharp.WinForms。

它比网络浏览器控制更容易。

* * *

添加所有参考dll后

只需使用这行简单的代码：

```
uri = "https://www.google.com/";
ChromiumWebBrowser browser = new ChromiumWebBrowser(uri);
panel.Controls.Add(browser);
browser.Dock = DockStyle.Fill; 
```

# php - 需要帮助使用 php mysql 生成报告

> ID：11618128
> 
> 赞同：0
> 
> 时间：2012-07-23T18:16:51.760
> 
> 标签：php, mysql, report

我想加入两个 MySQL 表`processID`并得到后续报告作为报告。

```
table 1: LMProcess
------------------------------------
| ProcessID | LMNo | Status | Dept | 
------------------------------------
|1          |1001  |1       |Legal |
|2          |1001  |1       |R&D   |
|3          |1001  |1       |D&R   |
|4          |1001  |1       |L&M   |
|5          |1002  |1       |Legal |
|6          |1002  |1       |R&D   |
|7          |1002  |1       |D&R   |
|8          |1002  |1       |L&M   |
------------------------------------

table 2: Recommendation
-----------------------------------
| ID | ProcessID | Recommendation |
-----------------------------------
|    |1          |Yes             |
|    |2          |No              |
|    |3          |Yes             |
|    |4          |Yes             |
|    |5          |Yes             |
|    |6          |No              |
|    |7          |No              |
|    |8          |Yes             |
-----------------------------------

Report: LM File Recommendations by the Departments
----------------------------------
| LMNo | Legal | R&D | D&R | L&M |
----------------------------------
|1001  |Yes    |No   |Yes  |Yes  |
|1002  |Yes    |No   |No   |Yes  |
---------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:23:36.923

您正在尝试执行枢轴操作，这是其他一些 RDBMS 本身支持但 MySQL 不支持的操作（因为开发人员认为它真正属于表示层，而不是数据库）。

但是，您可以将结果分组`LMNo`并使用 MySQL 的[`GROUP_CONCAT()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)函数来实现所需的结果：

```
SELECT   LMNo
       , GROUP_CONCAT(IF(Dept='Legal', Recommendation, NULL)) AS `Legal`
       , GROUP_CONCAT(IF(Dept='R&D'  , Recommendation, NULL)) AS `R&D`
       , GROUP_CONCAT(IF(Dept='D&R'  , Recommendation, NULL)) AS `D&R`
       , GROUP_CONCAT(IF(Dept='L&M'  , Recommendation, NULL)) AS `L&M`
FROM     LMProcess JOIN Recommendation USING (ProcessID)
GROUP BY LMNo 
```

# html - 使用html代码制作链接依赖三个下拉菜单

> ID：11618132
> 
> 赞同：0
> 
> 时间：2012-07-23T18:17:03.967
> 
> 标签：html, redirect, drop-down-menu

我正在使用一个网站的*html*代码，并试图让该网站链接到另一个网站，作为三个不同下拉菜单中值的函数。

我需要的是*html*代码，它将带用户：

> ..../[第一个菜单选择]/[第二个菜单选择]/[第三个菜单选择].html

非常感谢，

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:41:06.773

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript">
        function getUrl() {
            var part1 = document.getElementById("firstChoice").value;
            var part2 = document.getElementById("secondChoice").value;
            var part3 = document.getElementById("thirdChoice").value;
            return "http://"+part1+"/"+part2+"/"+part3+".html";
        }
        function gotoSelection() {
            var urlToGoTo = getUrl();
            alert(urlToGoTo);
            //location.href=urlToGoTo;
        }
        function setupLink() {
            var urlToGoTo = getUrl();
            document.getElementById("gotoLink").href=urlToGoTo;
        }
    </script>
</head>
<body onload="setupLink();">
    <select id ="firstChoice" onchange="setupLink();">
        <option>first1</option>
        <option>first2</option>
    </select>
    <select id ="secondChoice" onchange="setupLink();">
        <option>second1</option>
        <option>second2</option>
    </select>
    <select id ="thirdChoice" onchange="setupLink();">
        <option>third1</option>
        <option>third2</option>
    </select>
    <button onclick="gotoSelection();">goto</button>
    <a id="gotoLink" href="">goto by link</a>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:41:00.080

您将需要的不仅仅是 html。幸运的是，您可以使用 jQuery 轻松做到这一点。

为您的下拉菜单提供一个唯一的 ID，如下所示：

```
<select id="dropdown1"> <option val="myValue1">... </select>
<select id="dropdown2"> <option val=myValue2">... </select>
...
<input type="submit" value="GO!" id="go" /> 
```

然后您可以使用 jQuery 从下拉列表中获取结果。可能有更优雅的方法可以做到这一点，但这是基本功能：

```
$(document).ready(function() {
  $("#go").click(function() {
    var dropdown1 = $("#dropdown1 option:selected").attr('val');
    var dropdown2 = $("#dropdown2 option:selected").attr('val');
    var dropdown3 = $("#dropdown3 option:selected").attr('val');
    var uri = "../"+dropdown1+"/"+dropdown2+"/"+dropdown3+".html";
    window.location.href = uri;
  });
}); 
```

# c - Linux - 从 malloc 复制虚拟内存地址或移动虚拟内存地址

> ID：11618133
> 
> 赞同：1
> 
> 时间：2012-07-23T18:17:07.383
> 
> 标签：c, linux, memory, memory-management, malloc

**简短的问题：**
是否可以将一个已经 malloc 的缓冲区映射为具有两种访问同一缓冲区的方式（两个指针指向同一物理内存）？或者，是否可以临时移动 malloc 接收到的虚拟内存地址？或者是否可以从虚拟空间中的一个位置指向另一个位置？

**背景：**
我正在使用`DirectFB`一个表面管理和 2D 图形堆肥库。我正在尝试强制执行锁定协议，即锁定表面，仅在锁定时修改内存（指针指向使用 malloc 分配的系统内存），然后解锁表面。

我目前正在尝试追踪一个应用程序中的一个错误，该错误是锁定一个表面，然后存储像素指针并稍后修改表面。这意味着库不知道何时可以安全地读取或写入表面。我正在尝试找到一种方法来检测是否违反了锁定协议。我想要的是一种在进行解锁调用后使传递给用户的指针无效的方法。更好的是，如果应用程序在锁定后尝试访问内存，我希望应用程序能够分段错误。这将在调试器中停止，并让我们了解涉及哪个表面、涉及哪个例程、谁调用了它等。

**可能的解决方案：**

> 1.  创建一个临时缓冲区，将缓冲区指针传递给用户，解锁时将像素复制到实际缓冲区，删除临时缓冲区。
>     
>     
>     *   优点：这是一个可实施的解决方案。
>     *   缺点：性能很慢，因为它需要一个昂贵的副本，而且内存可能可用也可能不可用。无法保证一个临时表面与另一个表面重叠，从而允许无效的指针突然再次工作。
> 2.  为 malloc 的表面制作额外的地图并将其传递给用户。解锁时，取消映射内存。
>     
>     
>     *   优点：非常快，不需要额外的内存。
>     *   缺点：不知道这是否可能。
>     *   陷阱：需要留出一个保留的地址范围，不会被其他任何东西（包括 malloc 或内核）使用。还需要确保没有两个表面重叠，这可能允许旧指针突然指向有效的东西，而不是在应该的时候出现段错误。
> 3.  利用库在被用户锁定时不访问内存这一事实，只需将虚拟地址移动到锁上并在解锁时将其移回。
>     
>     
>     *   优点：非常快，不需要额外的内存。
>     *   缺点：不知道这是否可能。
>     *   陷阱：与上面的“2”相同。

这可行吗？

**附加信息：**

> *   这是 using `Linux 2.6`， using *stdlib*。
> *   该库是用`C`.
> *   库和应用程序在用户空间中运行。
> *   有可能使用内核模块（编写自定义内存分配例程），但在我当前的工作环境中编写模块的难度可能会将我实际实现此解决方案的机会降低到接近零的水平。但如果这是唯一的方法，那就太好了。
> *   底层处理器是`x86`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T18:21:20.590

您要创建一个页面的多个映射的功能是`shm_open`。

您可能只在一个进程中使用内存，但它仍然是“共享内存” - 也就是说，同一底层物理页面将存在多个虚拟映射。

但是，这不是您想要**做**的。您实际上应该做的是让您的锁定功能使用`mprotect`系统调用来使内存在解锁时不可读并恢复锁定权限；任何没有持有锁的访问都会导致段错误。当然，这只适用于单个同时访问线程......

跟踪问题的另一种可能更好的方法是在`valgrind`或其他内存分析工具中运行您的应用程序。这将大大减慢它的速度，但允许您进行非常精细的控制：您可以使用 valgrind 脚本将内存标记/取消标记为可访问，并且当发生违规时，该工具将直接将您踢入调试器。但是对于像这样一次性解决问题，我会说在您的锁定/解锁功能中安装一个`#ifdef DEBUG`-wrapped调用。`mprotect`

# c# - 静态变量初始化顺序

> ID：11618137
> 
> 赞同：2
> 
> 时间：2012-07-23T18:17:26.247
> 
> 标签：c#

我已将断点放入“get”

```
static readonly LawClass s_Law = new LawClass();
public static LawClass Law { get { return s_Law; } } 
```

并发现 s_law 为空。

这怎么可能？我认为静态变量是在第一类访问之前按行顺序初始化的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T18:29:39.083

这只是一个猜测，但来自[http://msdn.microsoft.com/en-us/library/aa645758(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645758%28v=vs.71%29.aspx)：

> 如果类中存在静态构造函数（第 10.11 节），则在执行该静态构造函数之前立即执行静态字段初始值设定项。**否则，静态字段初始化器在第一次使用该类的静态字段之前的依赖于实现的时间执行**。

如果您在属性 getter 上中断，则尚未访问静态支持字段，因此可能已经或可能未初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:34:22.093

Thank you guys for help! I looked at stack trace and found out I had some crazy recursion in my static variables initialization order. So I simplified the code and now it works.

# cordova - 将 iScroll 与 phonegap 一起使用

> ID：11618138
> 
> 赞同：0
> 
> 时间：2012-07-23T18:17:27.820
> 
> 标签：cordova, iscroll

我希望我的应用程序可以垂直滚动并想使用 iscroll 来执行它。我不太确定如何使用。该应用程序似乎仍然无法垂直滚动。代码：

```
 <head>
        <script type="text/javascript" src="iscroll.js"></script>
        <script type="text/javascript">
                var myScroll;
                function loaded() {
                    setTimeout(function () {
                               myScroll = new iScroll('container');
                               }, 100);
                }
                window.addEventListener('load', loaded, false);
        </script>
       </head>
       <body>
              <div class="container">
                <div class = "topcontainer">
                    <div class = "buttons img1"> </div>
                    <div class = "buttonstext">
                        Gallery
                    </div>
                </div>
                <div class = "middlecontainer">
                    <div class = "buttons img2">
                        <a href="gallery.html">Biography</a>      
                    </div>
                </div>
                <div class = "middlecontainer">
                    <div class = "buttons img3">
                        Pictures
                    </div>
              </div>
        </body> 
```

需要一些指导，我哪里出错了。我需要做点别的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:28:46.530

iScroll`id`在初始化时将元素作为参数 - 而不是类。因此，例如，将 更改`div.container`为`div#container`：

```
 <head>
    <script type="text/javascript" src="iscroll.js"></script>
    <script type="text/javascript">
            var myScroll;
            function loaded() {
                setTimeout(function () {
                           myScroll = new iScroll('container');
                           }, 100);
            }
            window.addEventListener('load', loaded, false);
    </script>
   </head>
   <body>
          <div id="container">
            <div class = "topcontainer">
                <div class = "buttons img1"> </div>
                <div class = "buttonstext">
                    Gallery
                </div>
            </div>
            <div class = "middlecontainer">
                <div class = "buttons img2">
                    <a href="gallery.html">Biography</a>      
                </div>
            </div>
            <div class = "middlecontainer">
                <div class = "buttons img3">
                    Pictures
                </div>
            </div>
          </div>
    </body> 
```

有关详细信息，请参阅iScroll 4 或[iScroll 3的](http://cubiq.org/iscroll)[文档](http://cubiq.org/iscroll-4)。我找不到它明确指出需要在 iScroll 4 文档中传递 ID 的位置，但所有示例代码都支持这一点。此外，这在 iScroll 3 文档中*有*明确说明。

 **另外：您的示例代码中缺少结束语`</div>`。这已在我的回复中得到解决。**

# bash - Bash 脚本通过删除最后访问的文件来限制目录大小

> ID：11618144
> 
> 赞同：6
> 
> 时间：2012-07-23T18:17:52.093
> 
> 标签：bash, shell, for-loop

我之前使用了一个简单的 find 命令来删除最近 x 天（在本例中为 3 天）内未访问的 tar 文件：

```
find /PATH/TO/FILES -type f -name "*.tar" -atime +3 -exec rm {} \; 
```

我现在需要按访问日期的顺序删除来改进这个脚本，而且我的 bash 写作技巧有点生疏。这是我需要它做的事情：

1.  检查目录 /PATH/TO/FILES 的大小
2.  如果 1) 中的大小大于 X 大小，则按访问日期获取文件列表
3.  按顺序删除文件，直到大小小于 X

这里的好处是缓存和备份目录，我只会删除我需要将其保持在限制范围内的内容，而如果一天特别大，简化的方法可能会超出大小限制。我猜我需要使用 stat 和 bash for 循环？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T05:50:10.690

我改进了 brunner314 的示例并修复了其中的问题。

这是我正在使用的工作脚本：

```
#!/bin/bash
DELETEDIR="$1"
MAXSIZE="$2" # in MB
if [[ -z "$DELETEDIR" || -z "$MAXSIZE" || "$MAXSIZE" -lt 1 ]]; then
    echo "usage: $0 [directory] [maxsize in megabytes]" >&2
    exit 1
fi
find "$DELETEDIR" -type f -printf "%T@::%p::%s\n" \
| sort -rn \
| awk -v maxbytes="$((1024 * 1024 * $MAXSIZE))" -F "::" '
  BEGIN { curSize=0; }
  { 
  curSize += $3;
  if (curSize > maxbytes) { print $2; }
  }
  ' \
  | tac | awk '{printf "%s\0",$0}' | xargs -0 -r rm
# delete empty directories
find "$DELETEDIR" -mindepth 1 -depth -type d -empty -exec rmdir "{}" \; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T03:54:47.890

这是我想出的一种简单，易于阅读和理解的方法：

```
DIRSIZE=$(du -s /PATH/TO/FILES | awk '{print $1}')
if [ "$DIRSIZE" -gt "$SOMELIMIT" ]
  then
    for f in `ls -rt --time=atime /PATH/TO/FILES/*.tar`; do
    FILESIZE=`stat -c "%s" $f`
    FILESIZE=$(($FILESIZE/1024))

    DIRSIZE=$(($DIRSIZE - $FILESIZE))
    if [ "$DIRSIZE" -lt "$LIMITSIZE" ]; then
        break
    fi
done
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T21:56:10.560

我不需要使用循环，只需仔细应用 stat 和 awk。下面详细解释，先上代码：

```
find /PATH/TO/FILES -name '*.tar' -type f \
| sed 's/ /\\ /g' \
| xargs stat -f "%a::%z::%N" \
| sort -r \
| awk '
  BEGIN{curSize=0; FS="::"}
  {curSize += $2}
  curSize > $X_SIZE{print $3}
  '
| sed 's/ /\\ /g' \
| xargs rm 
```

请注意，这是一个逻辑命令行，但为了理智起见，我将其拆分。

它以基于上述命令的查找命令开始，没有将其限制为超过 3 天的文件的部分。它通过管道将其传递给 sed，以转义 find 返回的文件名中的任何空格，然后使用 xargs 对所有结果运行 stat。-f "%a::%z::%N" 告诉 stat 要使用的格式，第一个字段是上次访问的时间，第二个字段是文件大小，第二个字段是文件名第三。我使用 '::' 分隔字段，因为这样处理文件名中的空格更容易。Sort 然后在第一个字段上对它们进行排序，使用 -r 来反转排序。

现在我们有一个我们感兴趣的所有文件的列表，按照从最近访问到最早访问的顺序排列。然后 awk 脚本在遍历列表时将所有大小相加，并在超过 $X_SIZE 时开始输出它们。不以这种方式输出的文件将被保留，其他文件名再次转到 sed 以转义任何空格，然后转到运行 rm 它们的 xargs。

# credit-card - 处理信用卡数据的建议

> ID：11618147
> 
> 赞同：0
> 
> 时间：2012-07-23T18:18:00.230
> 
> 标签：credit-card, authorize.net, pci-compliance

我目前正在为需要支付网关的小型企业建立一个网站（我们可能会使用 Authorize.Net）。问题是，在许多订单中，有计算运输和处理成本的特殊需求。这要求我们向客户开具账单，而不是立即为订单开具账单。

我的问题是，是否可以让 Authorize.Net 或相关服务只存储信用卡数据而不进行处理，我们输入账单总额以供稍后处理？

感谢您对此的意见。欢迎所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:51:42.227

您可以使用 Authorize.Net 以两种方式执行此操作

1.  使用他们的 AIM API，您可以执行 AUTH_ONLY 并获得批准和持有的资金，以便稍后收取金额。唯一需要注意的是，您只能将资金持有 30 天，然后才会自动释放。

2.  使用他们的 CIM API 为客户创建付款配置文件。然后，您可以在需要时针对此配置文件收费。但是，CIM 是一项额外服务，因此您必须为此支付更多费用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:35:33.150

我们遇到了这个问题，但最终使用 UPS API 来运送。这很无痛。我们确实必须为标准和快速方法提供单选按钮。

# ruby-on-rails - 向邮件添加参数（... template_name = "something")

> ID：11618152
> 
> 赞同：1
> 
> 时间：2012-07-23T18:18:15.507
> 
> 标签：ruby-on-rails, email

我想发送一封电子邮件，其中包含一个名为“某物”的模板（例如），但我在此页面上还有一个名为 show_text 的参数，如果未定义，该参数默认设置为 false。我想在使用邮件功能时将其设置为 true。如何传递参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:21:35.583

查看本指南，[http](http://guides.rubyonrails.org/action_mailer_basics.html) ://guides.rubyonrails.org/action_mailer_basics.html 。根据您使用的 Rails 版本以及邮件程序模型的配置方式，将参数传递给邮件程序方法的代码示例可能会有所不同。基本上，您将每个参数作为散列传递，然后通过实例变量访问它。

# ruby-on-rails - Rails 3.2.6 session[:_csrf_token] 与元标记不同

> ID：11618153
> 
> 赞同：1
> 
> 时间：2012-07-23T18:18:23.953
> 
> 标签：ruby-on-rails, memcached, csrf, dalli

我有一个从 3.0.7 升级到 3.2.6 的 Rails 应用程序。我将 Dalli 和 memcached 用于我的会话存储。

自从我升级后，我开始遇到`WARNING: Can't verify CSRF token authenticity`错误，并且我的会话正在被重置。

我打电话给`csrf_meta_tags`我的标题。

在我的 ApplicationController 中，我已重写`verify_authenticity_token`以检查应用程序认为 csrf_token 是什么。

```
def verify_authenticity_token
  verified_request?
  Rails.logger.info "+++ VERIFY AUTH TOKEN +++"
  Rails.logger.info session.inspect
end 
```

我从我的应用程序提交了一个表单，写入记录器的会话数据是： `{"_csrf_token"=>"4OQ47F2py+l12lLSTnq0RTmyPbmPi2UGMZaPhMG6vVQ="}`

这与页面上元标记中设置的值以及随表单提交的值不同： `{"authenticity_token"=>"qMsdBkTHoBH09+X0tnyoPsbtc752yKjCVHddrcufd7g="}`

* * *

## 问题解决了

事实证明这是由于配置错误。

我一直`session_store`在 config/initializers/session_store.rb 中设置配置：

```
require 'action_dispatch/middleware/session/dalli_store'
Rails.application.config.session_store :dalli_store 
```

这是为所有环境初始化的，但是在开发环境中，缓存的默认配置是`config.perform_caching = false`.

删除初始化文件并将会话存储配置移动到 production.rb 文件为我解决了这个问题。

```
config.session_store = :dalli_store, 'localhost:11211' 
```

我只是不确定为什么这在 3.0.2 中不是问题，而是在 3.2.6 中。

# c# - 使用 cookie (httpWebRequest,c#)

> ID：11618154
> 
> 赞同：0
> 
> 时间：2012-07-23T18:18:25.147
> 
> 标签：c#, cookies, httpwebrequest, httpwebresponse

我在网站上阅读了有关 httpWebRequest 和 Cookies 的全部答案，但我的问题仍未解决。我有一个登录网站的winform应用程序（正确记录），但我不能使用它的cookies仍然登录另一个页面，我尝试了许多解决方案，例如使用 PHPSESSID ，在两个请求中使用单个 CookieContainer 但没有一个是有效的。这是我的代码：

```
 HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("(Login page)");

        webRequest.Method = "POST";
        webRequest.ContentType = "application/x-www-form-urlencoded";
        webRequest.KeepAlive = true;

        ASCIIEncoding encoding = new ASCIIEncoding();
        byte[] data = encoding.GetBytes("username=uname&password=pass&submit=Button");

        webRequest.ContentLength = data.Length;
        CookieContainer CookieContainer = new CookieContainer();
        webRequest.CookieContainer = CookieContainer;

        Stream newStream = webRequest.GetRequestStream();
        newStream.Write(data, 0, data.Length);
        newStream.Close();
        HttpWebResponse webResponse;
        webResponse = (HttpWebResponse)webRequest.GetResponse();
        HttpWebRequest webRequest1 = (HttpWebRequest)WebRequest.Create("(My control panel page)");
        webRequest1.Method = "GET";
        webRequest1.KeepAlive = true;
        webRequest1.CookieContainer=new CookieContainer();
        foreach (Cookie cook in webResponse.Cookies)
        {
            webRequest1.CookieContainer.Add(cook);
        }
        webRequest.ContentType = "application/x-www-form-urlencoded";

        webResponse = (HttpWebResponse)webRequest1.GetResponse();

        string html;
        using (Stream strmresponse = webResponse.GetResponseStream())
        {
            using (StreamReader reader = new StreamReader(strmresponse, Encoding.UTF8))
            {
                html = reader.ReadToEnd();
            }
        }
        textBox1.Text = html; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:54:33.003

不确定您是否仍然关心，但请检查[此问题](https://stackoverflow.com/questions/571964/automatic-cookie-handling-c-net-httpwebrequesthttpwebresponse)的答案，因为它显示了如何为多个请求重用 cookie。

# android - Android 自定义 EditText 光标

> ID：11618157
> 
> 赞同：1
> 
> 时间：2012-07-23T18:18:38.717
> 
> 标签：android, xml, user-interface

下午好，

我为我的应用程序创建了一个自定义的 EditText 框，但遇到了一些麻烦。我的主要问题是当用户最初单击框时光标没有出现。输入一些文本后，虽然光标会变得可见。关于如何解决这个问题的任何想法？

这是我当前的 XML 代码

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="47dp"
    android:layout_marginTop="25dp"
    android:background="@drawable/textbox1"
    android:gravity = "bottom"
    android:cursorVisible="true"
    android:ems="10" >

    <requestFocus />
</EditText> 
```

非常感谢任何输入。

# android - 如何在android中检索首选项

> ID：11618158
> 
> 赞同：0
> 
> 时间：2012-07-23T18:18:41.533
> 
> 标签：android, android-preferences

我正在制作一个从时间倒计时（例如 1 分钟）然后向某人发送短信的应用程序。我正在使用首选项，以便用户可以设置时间、电话号码和消息，但我不知道如何使计时器、号码和消息变量是首选项中设置的变量，而不是默认变量。这是我到目前为止的代码。

```
package com.countdowntimer;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.preference.PreferenceManager;
import android.telephony.SmsManager;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

        public class CountdownTimer extends Activity implements OnClickListener
            {
                private MalibuCountDownTimer countDownTimer;
                private long timeElapsed;
                private boolean timerHasStarted = false;
                private Button startB;
                private TextView text;
                private TextView timeElapsedView;

                private final long startTime =     30000 ; //I want this to be the value from the preferences
                private final long interval =    1000 ;

                /** Called when the activity is first created. */
                @Override
                public void onCreate(Bundle savedInstanceState)
                    {
                        super.onCreate(savedInstanceState);
                        setContentView(R.layout.activity_countdown_timer);

                        startB = (Button) this.findViewById(R.id.button);
                        startB.setOnClickListener(this);

                        text = (TextView) this.findViewById(R.id.timer);
                        timeElapsedView = (TextView) this.findViewById(R.id.timeElapsed);
                        countDownTimer = new MalibuCountDownTimer(startTime, interval);
                        text.setText(text.getText() + String.valueOf(startTime/1000));
                    }

                public void onClick(View v)
                    {
                        if (!timerHasStarted)
                            {
                                countDownTimer.start();
                                timerHasStarted = true;
                                startB.setText("Start Timer");
                            }
                        else
                            {
                                countDownTimer.cancel();
                                timerHasStarted = false;
                                startB.setText("Stop Timer");
                            }
                    }

                // CountDownTimer class
                public class MalibuCountDownTimer extends CountDownTimer
                    {

                        public MalibuCountDownTimer(long startTime, long interval)
                            {
                                super(startTime, interval);
                            }

                        @Override
                        public void onFinish()
                            {
                                text.setText("Time's up!");
                            timeElapsedView.setText("Time Elapsed: " + String.valueOf(startTime/1000));
                            sendSMS("07772417392", "The timer has finished!"); //These should also be the values from the preferences
                            }

                        @Override
                        public void onTick(long millisUntilFinished)
                            {
                                text.setText("Time remaining:" + millisUntilFinished/1000);
                                timeElapsed = startTime - millisUntilFinished;
                                timeElapsedView.setText("Time Elapsed: " + String.valueOf(timeElapsed/1000));
                            }
                }

                private void sendSMS(String phoneNumber, String Message) {

                    SmsManager sms = SmsManager.getDefault();
                    sms.sendTextMessage(phoneNumber, null, Message, null, null);
                }
        } 
```

我已经研究过使用 SharedPreferences 和 PreferenceManager 等，但我看到的所有示例并没有真正帮助我。

编辑：添加了一些额外的代码（见下文），它没有错误，但每当我尝试启动计时器时，应用程序强制关闭，我不知道为什么。

```
 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
                 String timerLength = prefs.getString("timerLength","");
                 TextView timer = (TextView) this.findViewById(R.id.showTimer);
                 timer.setText(timerLength); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:31:14.897

与`Preferences`，你有`Key/Value`关系。你设置了`Key`你想要存储的值，然后你给`SharedPreference`它`Key`，它会为你吐出存储`Value`的值。

所以，在我的 Preference XML 的应用程序部分看起来像：

```
<EditTextPreference
            android:key="username"
            android:summary="@string/usernameSummary"
            android:title="@string/username" /> 
```

稍后我可以通过执行以下操作来访问用户输入的值：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
String username = preferences.getString("username", ""); //"" is the default String to return if the preference isn't found 
```

所以我使用`Key`“用户名”来获取`Value`用户存储的。

# ios - 从工具栏IOS确定文本字段

> ID：11618159
> 
> 赞同：0
> 
> 时间：2012-07-23T18:18:42.260
> 
> 标签：ios, uitoolbar

我正在尝试为每个文本字段设置撤消和重做，并且不确定如何确定如何确定哪个文本字段是第一响应者。

是否有一个参数可以传递给工具栏按钮调用的方法，或者我需要做一些花哨的步法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:34:10.770

这是一个想法：

如果`viewController`成为 each 的代表`textField`，那么将在 each的值更改`viewController`时收到通知，或者成为第一响应者。`textField`

要采用委托，您将执行以下操作：

```
@interface MyViewController : UIViewController <UITextFieldDelegate>
@end

@implementation
- (void)someMethod{
    // for a series of textfields
    myTextfield1.delegate = self;
    myTextfield1.delegate = self;
   // or you hook the delegate in IB
}

// then you get notified
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    // textField here that gets passed in as an argument is the first responder
    // if you have, let's say tag number for each
    NSInteger activeTextFieldTag = textField.tag;
}
@end 
```

这是对[UITextFieldDelegate 协议的参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

# c++ - 忽略“获取临时地址”错误

> ID：11618160
> 
> 赞同：0
> 
> 时间：2012-07-23T18:18:45.053
> 
> 标签：c++, gcc

对于此代码

```
struct test {};
test f() { return test(); }
void print(test *x) {}
int main()
{
    print(&f());
    print(&test());
} 
```

gcc-4.6 发出两个“获取临时 [-fpermissive] 的地址”错误。这是在 4.6 中引入的，gcc-4.5 可以编译它。

原因很清楚并且有据可查。问题是它是遗留代码，要编译，我们**必须**让它工作，因此，围绕文件和/或部分代码执行#pragmas 以使用-fpermissive 编译它们。假设客户坚持不修改现有**代码**（即不能更改使用 &f() 或 &test() 调用 print() 的事实，而不是一般的源文件）。换句话说，这种或另一种方式**将**被编译，唯一的选择是或多或少的痛苦。

所以问题是 - 是否有任何可能的解决方法可以使其在很多地方不使用 -fpermissive 的情况下工作？-W 标志、C++ 技巧等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T18:53:42.260

> 我的意思是，不能改变用 &f() 或 &test() 调用 print() 的事实。

如果您可以控制类型本身，则始终可以重载引用运算符`operator&`, 并`this`从中返回。在一般情况下这不是一件好事，但考虑到您正在返回正确类型的正确指针，它是相当安全的。

如果涉及基类，那么它变得相当复杂。您需要使用虚拟运算符重载，并且层次结构中的每个类都需要单独实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:46:28.770

为什么不直接重写代码以完全按照编译器所做的工作而不会抱怨呢？换句话说，将您的临时变量存储在临时（但可寻址）变量中。

```
struct test {};
test f() { return test(); }
void print(test *x) {}
int main()
{
    test t1 = f();
    test t2 = test();
    print(&t1);
    print(&t2);
} 
```

这应该与旧编译器版本的行为方式相同。告诉客户新的编译器要求您更改代码以明确编译器过去隐式执行的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T18:23:31.477

您可以通过创建一个额外的重载来提供解决方法，该`print`重载将采用`const&`：

```
void print( test const & t ) {
   print(&t);             // Assuming that the function is 'print( test const * )'
                          // a print function should not take a non-const pointer!
} 
```

并将调用者更改为：

```
print( f() ); 
```

这需要更改代码，但形式非常有限，因此可能是可以接受的。另请注意

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:30:12.150

我不清楚你对什么有多少控制权，但以下黑客似乎有效：

**编辑：**最初`f`返回的是引用而不是副本。DeadMG 正确地指出，一旦使用临时文件，这会导致未定义的行为，因此恢复`f`为返回副本。

```
struct test {};
const test & test_copy (const test &t) { return t; }
#define test() test_copy(test())
test f() { return test(); }
#define f() test_copy(f())
void print(const test *) {}
int main()
{
    print(&f());
    print(&test());
} 
```

hack 基本上是将您的临时变量转换为 const 引用，以便编译器更快乐。它不应该普遍可用，它的唯一目的是关闭编译器。但是，它并没有真正解决客户代码或提供的 API 的任何潜在问题。您可以修复您的 API，并且只对某些客户使用黑客攻击：

```
struct test {};
test f() { return test(); }
void print(const test &) {}

#define CUSTOMER_NEEDS_HACK
#ifdef CUSTOMER_NEEDS_HACK
const test & test_copy (const test &t) { return t; }
#define test() test_copy(test())
#define f() test_copy(f())
void print(const test *t) { print(*t); }
#endif 
```

# java - Java FixedThreadPool 不适用于设置池大小？

> ID：11618161
> 
> 赞同：0
> 
> 时间：2012-07-23T18:18:45.067
> 
> 标签：java, threadpool, threadpoolexecutor

我正在为工作线程使用 FixedThreadPool 。这是我创建它的方式：

```
ThreadPoolExecutor producerThreadPool = (ThreadPoolExecutor) Executors.newFixedThreadPool(25); 
```

所以我将它的大小设置为 25，我假设任何时候最多只能有 25 个活动线程？（如我错了请纠正我）。

那么如果线程池中有空闲线程，我的主线程会不断尝试一次提交 30 个工作线程：

```
if(producerThreadPool.getActiveCount() <= 25) 
```

但是当我调试它时，我得到了这个日志：

```
Mon Jul 23 14:04:42 EDT 2012: {"queued_count":"0","active_count":"28","scheduled_tasks":"28","core_pool_size":"1000","pool_size":"29"}
Mon Jul 23 14:04:43 EDT 2012: {"queued_count":"0","active_count":"3","scheduled_tasks":"33","core_pool_size":"1000","pool_size":"34"}
Mon Jul 23 14:04:44 EDT 2012: {"queued_count":"0","active_count":"0","scheduled_tasks":"60","core_pool_size":"1000","pool_size":"60"}
Mon Jul 23 14:04:45 EDT 2012: {"queued_count":"0","active_count":"0","scheduled_tasks":"90","core_pool_size":"1000","pool_size":"90"}
... 
```

队列总是空的，core_pool_size 仍然是 1000，po​​ol_size 一直在增加直到 1000，但我假设 core_pool_size 应该是 25，应该有排队的任务？

我做错了什么或误解了这一点吗？

任何帮助将不胜感激，谢谢！

这就是我生成日志的方式：

```
HashMap<String, String> log = new HashMap<String, String>();
log.put("core_pool_size", Integer.toString(producerThreadPool.getCorePoolSize()));
log.put("scheduled_tasks", Long.toString(producerThreadPool.getTaskCount()));
log.put("pool_size", Integer.toString(producerThreadPool.getPoolSize()));
log.put("active_count", Integer.toString(producerThreadPool.getActiveCount()));
log.put("queued_count", Integer.toString(producerThreadPool.getQueue().size()));
String gson_str = gson.toJson(log); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:30:53.063

根据文档[ThreadPoolExecutor.getActiveCount()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#getActiveCount%28%29)它只给出一个近似计数，考虑到获得准确值所需的开销，这是相当公平的。因此，当您看到“28”时，它实际上可能不是 28 个线程同时运行，但在函数调用期间它计算了 28 个线程。

# c# - Guid 在 C# 中生成错误

> ID：11618163
> 
> 赞同：1
> 
> 时间：2012-07-23T18:18:49.640
> 
> 标签：c#, .net, guid

我在 C# 和 .NET 4.0 中使用 Guid.NewGuid() 。而且我发现了一个有趣的事实：我生成的每个 Guid 在第 13 位都有“4”。

```
da1471ac-11f7- 4 fb7-a7fa-927fffe8a97c
c90058aa-5d7f- 4 bb5-b3a9-c1db197cf3b1
fa68ec75-8cd2- 4 c24-92f8-41dbbdd428a0
d4efd455-e892- 4 3ef-b7bf-9462c5dc4de4
e0a001a0-8969- 4 092-b7a2-e410ed2b351a
30ae98b9-48ae- 4 25d-b6e7-e091502d6ce2
6a95de82-67ff- 4 4c9-9f7b-e37a80462cf7
66768e46-6d60- 4 2b4-b473-2f6f8bc1559a 
```

我已经在几台机器上试过了，结果都是一样的。任何人都可以尝试或解释一下吗？

简单的检查代码：

```
static void Main(string[] args)
{
     bool ok = false;
     for (int i = 0; i < 10000; i++)
     {
         var guid = Guid.NewGuid();
         if (guid.ToString()[14] != '4')
             ok = true;
         Console.WriteLine(guid);
     }
     Console.WriteLine(ok ? "No bug!" : "4bug founded!");
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T18:21:41.400

确实是这样，而不是错误，它是一个功能。它指定用于生成 GUID 的方法。在 4 的情况下，这些 GUID 是随机生成的。

Eric Lippert 有一个关于这个主题的精彩系列：

[第一](http://blogs.msdn.com/b/ericlippert/archive/2012/04/24/guid-guide-part-one.aspx) [部分 第二](http://blogs.msdn.com/b/ericlippert/archive/2012/04/30/guid-guide-part-two.aspx) [部分 第三部分](http://blogs.msdn.com/b/ericlippert/archive/2012/05/07/guid-guide-part-three.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T18:22:11.383

它在算法规范中。V4 GUID在该位置*必须*有一个“4”。如果您对细节感兴趣，请试一试：[http ://en.wikipedia.org/wiki/Globally_unique_identifier#Algorithm](http://en.wikipedia.org/wiki/Globally_unique_identifier#Algorithm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:22:52.943

这真的没有任何意义。指南由许多不同的组件生成，以帮助最大限度地提高它们的独特性。例如，我相信其中一个组件是您网卡上的 ID。部分是日期。等等。

我无法告诉您 4 的来源，但这一点也不奇怪，而且*绝对*不是您似乎建议的错误。

[您可以在http://en.wikipedia.org/wiki/Globally_unique_identifier](http://en.wikipedia.org/wiki/Globally_unique_identifier)了解有关用于生成此数字的算法的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T18:23:42.027

This is expected behavior, not a bug. This position in the GUID identifies the basic generating algorithm that produced the GUID. There are a few different types; a V4 GUID is, with the exception of seven bits in defined locations of the GUID that identify the version and type variant, composed of random data. Other GUIDs use machine NICs and timestamp values.

# javascript - Ember.js 与 js 对象

> ID：11618165
> 
> 赞同：-1
> 
> 时间：2012-07-23T18:19:00.683
> 
> 标签：javascript, ember.js

我想要一个 Ember 视图来保存一个 Javascript 对象。就像是：

```
 var foo = function(){
   function bar(){
     alert("Hi");
   };
 };

 MyApp.MyView = Ember.View.extend({
   boo: new foo();
 });

 MyApp.MyView.boo.bar(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:51:44.057

我不确定您的问题或问题是什么。也许你可以用问题的形式来表达它。

虽然有一些提示。

1.  您应该小心在类定义中创建引用类型值，因为该类的所有实例都将共享相同的引用。在您的示例中， MyApp.MyView 的每个实例都将共享相同的 boo 对象。
2.  在您的示例中，您尚未创建视图，只需构建一个视图类。正在做：`MyApp.myView = MyApp.MyView.create().append()`应该为您构建一个视图并将其插入到 DOM 中。
3.  `getPath`当在对象链深处引用值时，使用 Ember 的/很方便，`setPath`因为它们带来了一定程度的安全性。例子：

```
if(typeof MyApp.getPath('MyView.boo.bar') === 'function') {
    MyApp.getPath('MyView.boo').bar();
} 
```

# php - 从 $xml 填充 MySQL 数据库

> ID：11618166
> 
> 赞同：0
> 
> 时间：2012-07-23T18:19:04.917
> 
> 标签：php, mysql, xml, populate

如何从定义如下的 $xml 填充 MySQL DB？

```
$xml = simplexml_load_string($line); 
```

是否有任何预定义功能可以自动执行这项工作的某些部分？还是我需要使用 DOM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:32:17.223

我认为这应该有效。我使用了以下代码，并且对我来说效果很好。此代码不仅为一个 xml 文件添加数据，还可以用于多个 xml 文件。

```
 <?php

        // table headers --> SNo  Field  Value 

        $connection = mysql_connect("localhost","root","password"); 
        if (!$connection) {
            die("Database connection failed: " . mysql_error());
        }

        $db_select = mysql_select_db("forms_data",$connection);
        if (!$db_select) {
            die("Database selection failed: " . mysql_error());
        }

        mysql_query("CREATE table form_try11(id int(11) not null auto_increment,
                     Field varchar(100), 
                     Value varchar(100),
                     primary key(id)
                    )");

       $file1="C:\webserver\Apache\htdocs\php_json\file1.xml";
       $file2="C:\webserver\Apache\htdocs\php_json\file2.xml";
       $file3="C:\webserver\Apache\htdocs\php_json\file3.xml";

      $path_arr = Array($file1,$file2,$file3);

      for($count1=0; $count1<count($path_arr); $count1++){
      $xml = simplexml_load_file($path_arr[$count1]);
      $string= json_encode($xml);     

      $jsonIterator = new RecursiveIteratorIterator(
            new RecursiveArrayIterator(json_decode($string, TRUE)),
            RecursiveIteratorIterator::SELF_FIRST);

          foreach ($jsonIterator as $key => $val) {
                if(is_array($val) || $key=="xmlns:xfa" || $key=="xfa:dataNode") {

                    continue;
                } 
                else {

                        $db_insert= mysql_query("INSERT INTO form_try11(Field,Value) VALUES('$key','$val') ");

                        if (!$db_insert) {
                            die("Database insert failed: " . mysql_error());
                        } 
                   }  
            }  

    }

    mysql_close($connection);

    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:28:45.053

我知道没有预定义的功能，但您可以执行以下操作：

使用查看所有变量

```
var_dump($xml); 
```

然后执行一个循环将它们插入到数据库中，如下所示：

```
foreach($xml as $element)
{
    $PDO->prepare('INSERT .....');
    $PDO->bindParam(blah,blah);
    $PDO->execute()
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T18:33:33.937

如果您尝试将所有文​​件拉到表中，您可以使用 SQL 语句将其导入。

```
LOAD XML LOCAL INFILE 'your_xml_file.xml' 
INTO TABLE your_table_name(field_one,field_two,....); 
```

[请参阅加载 XML](http://dev.mysql.com/doc/refman/5.5/en/load-xml.html)

# javascript - 将“活动”类添加到主选项卡列表

> ID：11618174
> 
> 赞同：0
> 
> 时间：2012-07-23T18:19:44.520
> 
> 标签：javascript, jquery

我想将活动类添加到我的 html 代码中的所有主要类别块中，如下所示：-

```
<ul class="tabs">

   <li class="accordion"><a href="#tab1">Boo1</a>

           <ul id="sub-nav">
              <li><a href="http://www.myweb.com"> Ipsum Text</a></li>
              <li><a> Lorem text</a></li>
              <li><a> More lorem text </a></li>
              <li><a> Dolor Sit Amet </a></li>
           </ul>                                   

  </li> 

  <li><a href="#tab2">Boo2</a></li>
  <li><a href="#tab3">Boo3</a></li>
  <li class="last-item"><a href="#tab4">Boo4</a></li>

</ul>​ 
```

以这种方式设计：-

```
#sub-nav  > .active {background:#AAA;}
.tabs li a.active { background: green; }
.tabs li a {font-size:20px;}
#sub-nav li a {font-size:16px; margin-left:20px;} 
```

​</p>

所以我这样做了：-

```
(function(){
    $('.tabs #sub-nav li').bind('click', function(e){
        var subNavList   = $(this),
            list = $('.tabs').find('li').add('.tabs a');
            list.removeClass('active');  

        subNavList.addClass('active').parents('li').addClass('active').children('a').addClass('active');
    });
}());​ 
```

我现在唯一的问题是单击另一个导航列表（boo2 和 boo3）时，未应用活动类。请检查 jsfiddle 代码以更好地理解。[http://jsfiddle.net/gfkM4/6/](http://jsfiddle.net/gfkM4/6/) 我做错了什么？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:43:49.607

我相信这就是您正在寻找的（单击时选择顶部导航，单击时同时选择子导航和它的父级）：

[http://jsfiddle.net/gfkM4/9/](http://jsfiddle.net/gfkM4/9/)

```
(function(){

    $('.tabs a').on('click', function(e){
        $('.tabs a').removeClass('active');
        $(this).addClass('active');
        $(this).closest('ul').closest('li').children('a').addClass('active');
    })       

}());​ 
```

# nvidia - 在 NFS 用户上使用 NVidia 的 xorg.conf

> ID：11618175
> 
> 赞同：-1
> 
> 时间：2012-07-23T18:19:46.387
> 
> 标签：nvidia, nfs, xorg

我正在运行一个 Red Hat EL 5.7 工作站，其中一些 NFS 用户安装在服务器上。我必须使用 xinerama 将 NVidia 参数设置为双屏并保存 X 配置文件，这没关系，但是当我第一次登录每个包含 root 的用户时，第二个显示器没有打开，当我第二次登录时它作品，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:21:38.993

阅读 Xorg 的日志来发现。通常是`/var/log/Xorg.0.log`。

# mamp - 在 MAMP PRO 上设置 xdebug

> ID：11618178
> 
> 赞同：23
> 
> 时间：2012-07-23T18:19:53.170
> 
> 标签：mamp, xdebug

我正在尝试在 mamp pro 上设置 xdebug，但没有成功。我搜索了整个互联网，没有任何帮助。

首先，我尝试在 php.ini 中取消注释以下行：

> > zend_extension="/Applications/MAMP/bin/php/php5.4.4/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so"

接下来，我尝试了向导：http: [//xdebug.org/wizard.php](http://xdebug.org/wizard.php)

接下来，我尝试将这些行添加到 php.ini：

> > xdebug.default_enable=1
> > 
> > xdebug.remote_enable=1
> > 
> > xdebug.remote_handler=dbgp
> > 
> > xdebug.remote_host=localhost
> > 
> > xdebug.remote_port=9000
> > 
> > xdebug.remote_autostart=1

没有什么帮助。我在我的 phpinfo 中看不到 xdebug。

MAMP PRO 版本：2.1.1

PHP版本：PHP 5.4.4

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-23T21:36:43.653

自[MAMP 2.01 发布](http://forum.mamp.info/viewtopic.php?t=13799)以来， XDebug 已包含在内。

解决了。这是帮助我的[教程](http://geek.michaelgrace.org/2011/08/xdebug-cachegrind-and-mamp-on-mac-osx/)：

1.  启动 MAMP

2.  通过 MAMP 编辑 php.ini 模板文件以启用扩展。通过 File -> Edit Template -> PHP -> PHP php.ini 编辑模板文件

    ![在 mac osx 上编辑 mamp 的 php.ini 模板](../Images/aefada83a91b271878fea0597323e2c9.png)

3.  编辑 php.ini 模板文件的底部，使其最终看起来像您想要配置文件输出

    ```
    [xdebug]
    zend_extension="/Applications/MAMP/bin/php/php5.3.6/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"
    xdebug.profiler_enable = 1
    xdebug.profiler_output_dir = "/tmp"
    ; DONT REMOVE: MAMP PRO php5.3.6.ini template compatibility version: 1 
    ```

    如果您不想要配置文件输出并且只想运行 xdebug，请使用

    ```
    [xdebug]
    zend_extension="/Applications/MAMP/bin/php/php5.3.6/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"
    xdebug.profiler_enable = 0
    xdebug.profiler_output_dir = "/tmp"
    ; DONT REMOVE: MAMP PRO php5.3.6.ini template compatibility version: 1 
    ```

    现在，当您遇到错误时，如果将它们发送到标准输出，您将看到类似这样的内容

    ![](../Images/c4c65c75300f9c8623e6852be5e09059.png)

    我的`php.ini`文件：

    ![编辑 php.ini 文件以在 mamp mac osx 上运行 xdebug](../Images/317c37c3784dc3ae51e46ecef93a2c09.png)

4.  保存编辑的模板并关闭编辑窗口

5.  重启 MAMP

6.  打开 MAMP 的 WebStart 页面并导航到 PHPInfo 选项卡。检查以确保 Xdebug 正在运行。在浏览器窗口中搜索“Xdebug”使这很容易。

    ![确认 xdebug 在 mac osx 上的 mamp 上运行](../Images/a8a731e1939430a145bab3619dbec3be.png)

7.  如果您使用与我上面相同的设置，当您运行 PHP 代码时，Xdebug 会将`cachegrind.out`文件放在您的“/tmp”目录中。打开您的“/temp”目录并运行您的一个 PHP 文件以确保它正常工作。您可以通过打开终端并运行来在 finder 中打开“/tmp”目录

    ```
    open /tmp 
    ```

    ![mac osx 上 mamp 的 /temp 文件夹中的 cachegrind.out 输出](../Images/9acf856760eeba57fc3a91f645a5ec4b.png)

8.  现在，您可以使用任何了解这些 cachegrind.out 文件的应用程序来查看配置文件数据。[KCacheGrind](http://kcachegrind.sf.net/) (Linux/Windows, KDE)、[WinCacheGrind](http://sourceforge.net/projects/wincachegrind) (Windows)、[xdebugtoolkit](http://code.google.com/p/xdebugtoolkit/)和[Webgrind](http://code.google.com/p/webgrind/)等应用程序。我走了简单的路线并使用了webgrind。Webgrind 是一个简单的基于 Web 的应用程序，您可以在 MAMP 上本地运行它，只需单击一下，它就会自动查找 cachegrind.out 文件。继续设置 webgrind 的步骤。

9.  [下载 Webgrind](http://code.google.com/p/webgrind/downloads/list)

10.  在 MAMP 上设置 Webgrind 主机以运行 Webgrind

    ![将 webgrind 设置为 mamp 上的主机以处理 xdebug php 配置文件输出](../Images/5ed7eae14d16ae8e926a8477d9996687.png)

11.  访问本地 MAMP 安装上的 webgrind url setup。我的只是 webgrind/

    ![](../Images/bb82043172d61338e44f79551ef2e760.png)

12.  如果您已经有 cachegrind 输出文件，您应该能够在“自动（最新）”下拉列表中选择文件，或者将其保留为自动并单击更新，这将显示配置文件数据

    ![](../Images/4bc425e53a0493a1bcc6dd4e280ffc79.png)

13.  扔一个庆祝的拳头泵

    ![](../Images/e52872e861e0e2899127f8c38701e207.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-24T14:21:56.147

我自己设置 MAMP Pro 和 nginx 时遇到了麻烦，上面的答案对我不起作用。

问题是默认端口设置为 9000，在我的情况下，我已经使用了该端口，所以我在我的 nginx conf 中查看了这一行：

```
location ~ \.php$ {
            try_files        $uri =404;
            fastcgi_pass     unix:/Applications/MAMP/Library/logs/fastcgi/nginxFastCGI.sock;
            fastcgi_param    SCRIPT_FILENAME $document_root$fastcgi_script_name;
            include          fastcgi_params;
        } 
```

然后转到 fastcgi_pass 设置为时所在的文件，在那里你会找到正确的端口号。就我而言，它位于 Applications/MAMP/Library/logs/fastcgi 中，文件名取决于您主机的 php 版本。

然后打开该文件，并将其中的任何 PID 设置为 php.ini 中的 xdebug.remote_port，对我来说是 13267。

值得一提的是，我的 PHP 的 MAMP 配置设置为 CGI 模式，而不是模块。

# 编辑：

我刚刚意识到端口号动态变化太多了。因此，我在 MAMP 的 nginx 模板中为 fastcgi pass 设置了硬编码值，如下所示：

```
fastcgi_pass      127.0.0.1:9072;
# comment out the regular setting just in case.
# fastcgi_pass     unix:/Applications/MAMP/Library/logs/fastcgi/nginxFastCGI.sock; 
```

# mysql - 在 my.ini/my.cnf 中使用环境变量

> ID：11618179
> 
> 赞同：5
> 
> 时间：2012-07-23T18:19:55.527
> 
> 标签：mysql, configuration, environment-variables

是否可以在 MySQL 选项文件 my.ini/my.cnf 中读取环境变量，就像在 httpd.conf 和 php.ini 中使用 ${ENVVAR} 语法一样：

```
datadir="${MYSQL_DATA_HOME}/Data/" 
```

如果是，语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:19:42.763

我认为这是不可能的。我尝试在 MySQL 选项文件中进行相同的更改，但无法启动。但是还有另一种方法。

`MYSQL_DATA_HOME=<some dir>`在控制台中设置。并且在同一个终端中启动 mysql 不是通过`service start`这个命令而是用这个命令`mysqld --datadir=$MYSQL_DATA_HOME/whatever`

# php - 为什么我的 QUERY_STRING 为空？

> ID：11618180
> 
> 赞同：1
> 
> 时间：2012-07-23T18:20:00.933
> 
> 标签：php, apache2, query-string, http-status-code-404

我在本地运行服务器。它是带有 PHP 的 Apache2。以下是我编写的文件。

`.htaccess`

```
错误文档 404 /notFoundError.php

```

`/notFoundError.php`

```
<?php
  回声 phpinfo();
?>

```

当我键入一些不存在的 url`http://localhost/this/is/dummy?key=value`时，它会成功重定向到`notFoundError.php`并打印 phpinfo 表。我没有在行`key=value`中找到。`_SERVER["QUERY_STRING"]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T18:25:18.560

Check out [how to Pass query string in 404 error redirect through .htaccess?](https://stackoverflow.com/questions/10366139/how-to-pass-query-string-in-404-error-redirect-through-haccess) for your answer.

> You will need to access $_SERVER['REDIRECT_QUERY_STRING']

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:25:10.330

If you are sending to a page which does not exist, a 404 will be invoked. Which is why you are being redirect to notFoundError.php and then displaying its contents?

What are you trying to accomplish?

# iphone - CTFramesetterSuggestFrameSizeWithConstraints 返回错误的高度

> ID：11618204
> 
> 赞同：0
> 
> 时间：2012-07-23T18:21:21.643
> 
> 标签：iphone, objective-c, ios, core-text

我知道有关于此的帖子，但没有一个建议有用.. 所以我的问题是 CTFramesetterSuggestFrameSizeWithConstraints 返回的高度对于我的文本来说太小了，文本越长，它被剪切的越多。我用来计算高度的代码：

```
CGFloat widthConstraint = self.frame.size.width;
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(attrString);
CGSize suggestedSize = CTFramesetterSuggestFrameSizeWithConstraints(framesetter,CFRangeMake(0, 0),NULL,CGSizeMake(widthConstraint, 20000),NULL);
CGFloat suggestedHeight = suggestedSize.height; 
```

所以我的问题是我有什么选择？也许有一些解决方法？我找到的解决方案之一是绘制文本，然后才找到高度，但我不知道该怎么做。所以也许有人对此有一些解决方案？

谢谢我提前！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:59:12.250

好吧，经过很长时间，我终于发现出了什么问题..毕竟方法按预期工作，我认为其他说它不在互联网上的人都犯了一些错误..我的错误是当我画文字时我'我留下了一些不好的硬编码值。所以如果有人对 CTFramesetterSuggestFrameSizeWithConstraints 有问题，请仔细检查您的绘图代码！

# java - 将图像大小调整为固定大小，如果需要添加边框

> ID：11618205
> 
> 赞同：3
> 
> 时间：2012-07-23T18:21:25.447
> 
> 标签：java

我需要制作从 flickr 下载的图像以适合 500x500 的形状。如果纵横比不是 1:1，则应在顶部/底部或左侧/右侧添加黑条以填充空白空间。透明背景也可以。重要的是 500x500 并在不裁剪的情况下调整大小。我怎么能在java中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T16:49:21.227

克里斯，

你可以试试[imgscalr](https://github.com/rkalla/imgscalr)；它实现了在 Java 中缩放图像的最优化方法，并且（默认情况下）在调整大小时尊重原始图像的方向和比例......它还提供了一个非常方便的[pad(...)](http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/Scalr.html#pad%28java.awt.image.BufferedImage,%20int,%20java.awt.Color,%20java.awt.image.BufferedImageOp...%29)操作，它将为您提供边框你要。

它唯一不会为您做的事情是自动填充缩放后的图片和完美正方形 500x500 尺寸之间的差异，但您*可以*将图像缩放到 498x498 之类的东西 - 它会给您一个适合主要尺寸的比例结果（ horz 或 port 取决于方向），然后你可以 pad(2) 给它一个漂亮的边框，你想要的任何颜色，包括透明的。

例如，代码看起来像这样（使用静态导入来提高可读性）：

```
import org.imgscalr.Scalr.*;
import java.awt.Color;

public static BufferedImage createThumbnail(BufferedImage img) {
    // Target width of 500x500 is used
    img = resize(img, 500); 
    return pad(img, 2, Color.BLACK);
} 
```

resize() 方法采用[任意数量的附加参数](http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/Scalr.html#resize%28java.awt.image.BufferedImage,%20org.imgscalr.Scalr.Method,%20org.imgscalr.Scalr.Mode,%20int,%20int,%20java.awt.image.BufferedImageOp...%29)来调整拟合行为、图像质量、操作速度等。

您还可以通过将其作为最后一个 arg 传递以调整大小或填充（或任何其他操作），在返回结果之前（[此处）在结果图像上应用任何预定义的 OP。](http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/Scalr.html#OP_ANTIALIAS)

此外，如果您尝试在服务器进程中执行此操作并希望异步运行这些操作，您可以查看提供*所有相同功能的*[AsyncScalr](http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/AsyncScalr.html)类，但将操作排队到可[配置](http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/AsyncScalr.html#THREAD_COUNT)数量的缩放线程以避免饱和主机。

 *在过去几年中，imgscalr 已部署在生产环境中的许多服务器和客户端场景中。如果您有机会试用图书馆，我很想听听您的反馈。*

# css - Helvetica Neue 的垂直对齐问题

> ID：11618206
> 
> 赞同：3
> 
> 时间：2012-07-23T18:21:26.363
> 
> 标签：css, fonts, vertical-alignment

这是对 Helvetica Neue 的轻微但持久的烦恼（在 Arial 中不会发生）

当文本的任何部分加粗时，完全垂直对齐的文本将略微向下移动。虽然这是一个小转变，但在并排混合粗体和非粗体文本元素时会破坏对齐。

例如，参见[http://jsfiddle.net/ZZ3m6/7/ 。](http://jsfiddle.net/ZZ3m6/7/)

即使显式设置行高，也会发生偏移。我怎样才能阻止这个？

![在此处输入图像描述](../Images/f1d103c10c94acf9b3e57ac59e886045.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:38:10.643

我的经验是什至不打扰 Helvetica Neue。无论如何，Mac 都预装了 Helvetica，它没有 Helvetica Neue 所具有的粗体文本的抵消问题。

编辑：这是一个相关的问题，有一些 CSS 黑客可以用来解决这个问题：[Helvetica Neue baseline rendering problem with Firefox/Mac](https://stackoverflow.com/questions/917664/helvetica-neue-baseline-rendering-problem-with-firefox-mac?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T19:47:58.553

此处的原始问题已在较新版本的 Chrome 中修复。设置为：http `vertical-align: top`: [//jsfiddle.net/nwXHG/时，表仍然会引起问题](http://jsfiddle.net/nwXHG/)

解决方案：更改为`vertical-align: middle`.

# python - 使用 Python 在 CSV 上的特定行上开始读写

> ID：11618207
> 
> 赞同：0
> 
> 时间：2012-07-23T18:21:26.120
> 
> 标签：python, csv

我有一个如下所示的 CSV 文件：

```
COL_A,COL_B
12345,A=1$B=2$C=3$ 
```

如何读取该文件并将其写回一个新文件，但只是第二行（行）？我希望输出文件包含：

```
12345,A=1$B=2$C=3$ 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:32:19.733

以下内容读取您的 csv，提取第二行，然后将第二行写入另一个文件。

```
with open('file.csv') as file:
    second_line = list(file)[1]

with open('out.csv', mode = 'w') as file:
    file.write(second_line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:28:11.217

```
outfile = open(outfilename,"w")
with open(filename) as f:
    for line in f:
       print >> outfile , line.split()[-1]
outfile.close() 
```

只要这些线条实际上看起来像您在 OP 中发布的线条

# wordpress - WordPress | 日期并不总是出现

> ID：11618209
> 
> 赞同：0
> 
> 时间：2012-07-23T18:21:34.280
> 
> 标签：wordpress, themes, wordpress-theming

我尝试创建一个主题。在该主题中，我创建了一个自定义帖子类型，并通过使用 wp_query 从该帖子类型获取帖子来查询 WordPress，代码如下：

```
$args = array(
    'post_type'         =>  'portfolio',
    'posts_per_page'    =>  18
);

$projects = new WP_Query($args);

while($projects->have_posts())
{
    $projects->the_post();
?>
<h3><?php the_title(); ?></h3>
<span><?php the_date(); ?></span>
<?php
}

wp_reset_postdata(); 
```

问题是，虽然我获得了所有帖子的标题，但我没有获得所有帖子的日期。有些帖子有日期，有些则没有

对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:33:55.247

替换`the_date()`为`the_time()`并指定日期格式，如下所示：

```
the_time('l, F j, Y'); 
```

查看[有关格式化日期的法典文章](http://codex.wordpress.org/Formatting_Date_and_Time)。

# desire2learn - 如何从 D2L 组中删除用户

> ID：11618210
> 
> 赞同：0
> 
> 时间：2012-07-23T18:21:33.903
> 
> 标签：desire2learn

有一个在组中注册用户的功能：POST /d2l/api/lp/(D2LVERSION: version)/(D2LID: orgUnitId)/groupcategories/(D2LID: groupCategoryId)/groups/(D2LID: groupId)/enrollments/ ，但我一直无法找到从组中删除用户的功能。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:13:49.210

不幸的是，对于当前发布的 D2L 平台（最高 v10 SP1），该领域的 REST 路由存在差距。这有点极端，但在更新 api 之前，一种解决方法是检索组注册并保存它们，然后删除并重新创建组并注册除删除目标之外的所有人。

# python - 为什么 numpy.ravel 返回一个副本？

> ID：11618211
> 
> 赞同：11
> 
> 时间：2012-07-23T18:21:35.370
> 
> 标签：python, numpy

在以下示例中：

```
>>> import numpy as np
>>> a = np.arange(10)
>>> b = a[:,np.newaxis]
>>> c = b.ravel()
>>> np.may_share_memory(a,c)
False 
```

为什么要`numpy.ravel`返回我的数组的副本？它不应该只是返回`a`吗？

编辑：

我刚刚发现它`np.squeeze` *不会*返回副本。

```
>>> b = a[:,np.newaxis]
>>> c = b.squeeze()
>>> np.may_share_memory(a,c)
True 
```

`squeeze`在这种情况下，为什么和之间有区别`ravel`？

编辑：

正如 mgilson 所指出的，`newaxis`将数组标记为不连续，这就是`ravel`返回副本的原因。

所以，新的问题是为什么`newaxis`将数组标记为不连续的。

故事变得更奇怪了：

```
>>> a = np.arange(10)
>>> b = np.expand_dims(a,axis=1)
>>> b.flags
  C_CONTIGUOUS : True
  F_CONTIGUOUS : False
  OWNDATA : False
  WRITEABLE : True
  ALIGNED : True
  UPDATEIFCOPY : False
>>> c = b.ravel()
>>> np.may_share_memory(a,c)
True 
```

根据文档`expand_dims`，它应该等同于`newaxis`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T18:37:41.720

这可能不是您问题的最佳答案，但看起来插入 newaxis 会导致 numpy 将数组视为不连续的——可能是出于广播目的：

```
>>> a=np.arange(10)
>>> b=a[:,None]
>>> a.flags
  C_CONTIGUOUS : True
  F_CONTIGUOUS : True
  OWNDATA : True
  WRITEABLE : True
  ALIGNED : True
  UPDATEIFCOPY : False
>>> b.flags
  C_CONTIGUOUS : False
  F_CONTIGUOUS : False
  OWNDATA : False
  WRITEABLE : True
  ALIGNED : True
  UPDATEIFCOPY : False 
```

但是，重塑不会导致：

```
>>> c=a.reshape(10,1) 
>>> c.flags
  C_CONTIGUOUS : True
  F_CONTIGUOUS : False
  OWNDATA : False
  WRITEABLE : True
  ALIGNED : True
  UPDATEIFCOPY : False 
```

这些数组确实共享相同的内存：

```
>>> np.may_share_memory(c.ravel(),a)
True 
```

**编辑**

`np.expand_dims`实际上是使用实现的`reshape`，这就是它起作用的原因（我想这是文档中的一个小错误）。这是源代码（没有文档字符串）：

```
def expand_dims(a,axis):
    a = asarray(a)
    shape = a.shape
    if axis < 0:
        axis = axis + len(shape) + 1
    return a.reshape(shape[:axis] + (1,) + shape[axis:]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T19:25:37.377

看起来它可能与步幅有关：

```
>>> c = np.expand_dims(a, axis=1)
>>> c.strides
(8, 8)

>>> b = a[:, None]
>>> b.strides
(8, 0)
>>> b.flags
  C_CONTIGUOUS : False
  F_CONTIGUOUS : False
  OWNDATA : False
  WRITEABLE : True
  ALIGNED : True
  UPDATEIFCOPY : False
>>> b.strides = (8, 8)
>>> b.flags
  C_CONTIGUOUS : True
  F_CONTIGUOUS : False
  OWNDATA : False
  WRITEABLE : True
  ALIGNED : True
  UPDATEIFCOPY : False 
```

我不确定维度 1 上的步幅在这里会产生什么影响，但看起来这就是让 numpy 将数组视为不连续的原因。

# assembly - 汇编语言，为什么跳转不起作用？(JC)

> ID：11618212
> 
> 赞同：1
> 
> 时间：2012-07-23T18:21:37.523
> 
> 标签：assembly

我试图实现这个算法

如果设置了进位标志，则添加两个数字data1和data2，如果不设置进位标志，则跳转到“add2digits”，跳转到“add1digit”

发生的情况是，如果总和小于 100（未设置进位标志），它仍会跳转到“add2digits”。

我的问题是如何实现这个？我尝试通过交换 JNC 和 JC 来调整代码，但结果要么是一个正在工作，要么是另一个。

继承人的代码：

```
;For adding 1 digit numbers
          mov ah, data1[0002]
          add ah, data2[0002]
          JC add2digits
          JNC add1digit 
```

> add1digit: mov sum, 啊

```
 sub sum, 30h

          jmp afteradding

add2digits:   
          ;for adding 2 digit numbers
          mov ah, data1[0002]
          mov al, data1[0003]
          sub ax, 3030h 
```

# python - 我怎样才能让这段代码更干

> ID：11618215
> 
> 赞同：0
> 
> 时间：2012-07-23T18:21:48.797
> 
> 标签：python

从[web2py 示例 33](http://www.web2py.com/examples/default/examples)我们看到：

```
db.purchase.insert(buyer_id=form.vars.buyer_id,  
   product_id=form.vars.product_id, 
   quantity=form.vars.quantity) 
```

但我认为应该有一些方法可以减少重复性。也许这个？

```
db.purchase.insert(**dict( [k = getattr(form.vars, k) for k in "buyer_id product_id quantity".split()])) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T18:26:19.623

For me, DRY means 1) not repeating actual code, and 2) (and more important) not repeating information; i.e. there should be one place that each item of information exists.

In this instance, you're really just repeating a pattern, and I think that's fine. The second example is much harder to read; why complicate it just to save a few characters?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T18:25:48.557

You could avoid repeating `form.vars`:

```
vars = form.vars
db.purchase.insert(
    buyer_id=vars.buyer_id,  
    product_id=vars.product_id, 
    quantity=vars.quantity) 
```

There is still some repetition, but I think it's better to leave it with some repetition rather than making your code hard to read.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:30:29.953

~~如果你能做的只有这三件事~~

db.purchase.insert(**form.vars)

~~否则~~我认为原始代码很枯燥

但我想你可以

```
to_insert = {"product_id":form.vars.product_id,"quantity":form.vars.quantity,"buyer_id":form.vars.buyer_id}
db.purchase.insert(**to_insert) 
```

这类似于您的第二个示例，但更具可读性和简单性（python 的一些原则）

# magento - Magento 购物车布局更改不坚持

> ID：11618218
> 
> 赞同：0
> 
> 时间：2012-07-23T18:22:00.903
> 
> 标签：magento

抱歉，这是一个新手问题...

我已将我的 magento 购物车的布局更改为 popup.html。

我已经编辑了 checkout.xml 以使用 popup.phtml ......这是我在 checkout.xml 中使用的代码......

```
 <checkout_cart_index translate="label">
    <label>Shopping Cart</label>
    <remove name="right"/>
    <remove name="left"/>
    <reference name="root">
        <action method="setTemplate">
            <template>page/popup.phtml</template>
        </action>
    </reference>
  </checkout_cart_index> 
```

问题是一切正常......但我在类别页面上进行了更改，突然购物车停止显示布局 popup.phtml 并开始显示 2 column-left 并且也没有购物车内容。

我正在对 catalog.xml 进行一些更改...但看不到它将如何覆盖结帐/购物车的显示

几个小时以来，我一直在努力解决这个问题......关于我应该在哪里查看完全覆盖 popup.phtml 并仅显示带有左列的空两列布局的任何建议。

谢谢。。非常感谢。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:15:18.400

特定文件*通常*无关紧要。重要的是布局更新句柄，即布局更新 XML*中的*顶级节点，例如`default`, 。正是这些“范围”了您的布局 XML 指令。`catalog_category_layered``checkout_onepage_index`

# junit - 如何使用 JMock 测试 void 方法

> ID：11618220
> 
> 赞同：0
> 
> 时间：2012-07-23T18:22:15.973
> 
> 标签：junit, jmock

如何测试 void 方法，即在 JMock 中不返回任何内容的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:33:08.277

要测试不返回任何内容的方法，无论您使用的是什么测试或模拟框架，您都需要测试对该方法的调用的效果。

使用 JMock，这可能意味着您创建一个您正在测试的代码应该调用的东西的模拟，进行设置以便使用您的模拟而不是真实对象，并设置和验证对该模拟的调用的期望。

如果您可以在问题中添加细节，我可能会更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-16T17:16:55.160

void 方法通常会对类的字段值进行一些更改。如果该类的字段不是私有的，那么您可以在您的测试方法中调用 void 方法来断言您是否获得了预期值之后在您的测试类中访问它。

# javascript - 如何使 fancybox href 动态化？

> ID：11618221
> 
> 赞同：7
> 
> 时间：2012-07-23T18:22:22.047
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我有以下花式框代码：

```
$('.fancybox').fancybox({
             'autoScale' : false,
             'href' : $('.fancybox').attr('id'),
             'type':'iframe',
             'padding' : 0,
             'closeClick'  : false,

//some other callbacks etc 
```

问题是我在页面上有 20 个不同的 A 标签 id，我希望 fancybox href 属性获取被点击元素的 id，即触发事件的那个。

我尝试了几件事，但都没有奏效！

```
'href' : $(this).attr('id'),
'href' : $(this.element).attr('id'), 
```

这看起来很简单，但任何时候我插入“这个”或类似的东西都不起作用。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-23T19:43:51.080

没有`each()`或`click()`只是`beforeLoad`像这样将回调添加到您的脚本

```
$(".fancybox").fancybox({
    autoScale: false,
    // href : $('.fancybox').attr('id'), // don't need this
    type: 'iframe',
    padding: 0,
    closeClick: false,
    // other options
    beforeLoad: function () {
        var url = $(this.element).attr("id");
        this.href = url
    }
}); // fancybox 
```

**注意**：这是为 fancybox v2.0.6+

另一方面，更**优雅**的解决方案是使用 (HTML5)`data-*`属性来设置`href`（否则设置看起来很奇怪`id="images/01.jpg"`）所以你可以这样做：

```
<a href="#" id="id01" data-href="images/01.jpg" ... 
```

和你的回调

```
beforeLoad: function(){
 var url= $(this.element).data("href");
 this.href = url
} 
```

并将该`id`属性用于其用途。

* * *

**编辑**：最好是`data-fancybox-href`在你的锚中使用特殊属性，如：

```
<a id="item01" data-fancybox-href="http://jsfiddle.net" class="fancybox" rel="gallery"  href="javascript:;">jsfiddle</a> 
```

并使用没有回调的简单脚本

```
$(".fancybox").fancybox({
    // API options 
    autoScale: false,
    type: 'iframe',
    padding: 0,
    closeClick: false
}); 
```

看`[JSFIDDLE](http://jsfiddle.net/SH6m9/)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T18:27:03.523

You can iterate over your collection of `.fancybox` items and grab the id.

```
$('.fancybox').each(function(){
    $(this).fancybox({
             'autoScale' : false,
             'href' : $(this).attr('id'),
             'type':'iframe',
             'padding' : 0,
             'closeClick'  : false,
             //some other callbacks etc
    });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T19:00:24.503

尝试这个：

```
$(".fancybox").click(function(){
    var url = $(this).attr('id');
    $.fancybox({
         'autoScale' : false,
         'href' : url ,
         'type':'iframe',
         'padding' : 0,
         'closeClick'  : false,
         //some other callbacks etc
    });
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T18:24:41.030

Try this

```
$('.fancybox').each( function() {
    var elem = jQuery(this);
    elem.fancybox({
             'autoScale' : false,
             'href' : elem.attr('id'),
             'type':'iframe',
             'padding' : 0,
             'closeClick'  : false,
          });
    }
); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T18:27:21.677

你试过这个吗？

```
$('.fancybox').each(function(){
    $(this).fancybox({
         'autoScale' : false,
         'href' : this.id,
         'type':'iframe',
         'padding' : 0,
         'closeClick'  : false,
          //some other callbacks etc
    });
}); 
```

# android - 从 ListView 中过滤掉系统包

> ID：11618226
> 
> 赞同：-1
> 
> 时间：2012-07-23T18:22:51.213
> 
> 标签：android, list, listview, filter, system

如何在列表中使用此方法从列表中过滤掉系统包？

我目前有这个方法：

```
public static List<ApplicationInfo> getInstalledApplication(Context context) {
    PackageManager packageManager = context.getPackageManager();

    List<ApplicationInfo> apps = packageManager.getInstalledApplications(0);
    Collections.sort(apps, new ApplicationInfo.DisplayNameComparator(packageManager));
    return apps;
} 
```

过滤掉系统包的方法：

```
private boolean isSystemPackage(ResolveInfo ri){
    return ((ri.activityInfo.applicationInfo.flags&ApplicationInfo.FLAG_SYSTEM)!=0)?true:false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:03:45.000

这将过滤掉系统包：

```
public static List<ApplicationInfo> getInstalledApplication(Context context) {
    PackageManager packageManager = context.getPackageManager();
    List<ApplicationInfo> apps = packageManager.getInstalledApplications(0);
    Collections.sort(apps, new ApplicationInfo.DisplayNameComparator(packageManager));
    Iterator<ApplicationInfo> it = apps.iterator();
    while (it.hasNext()) {
        ApplicationInfo ai = it.next();
        if ((ai.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {
            it.remove();
        }
    }
    return apps;
} 
```

# javascript - 基于 Toggle Jquery 添加 HTML

> ID：11618240
> 
> 赞同：0
> 
> 时间：2012-07-23T18:23:45.750
> 
> 标签：javascript, jquery, append, toggleclass

我有一个刚刚为我要上班的课程制作的切换开关。我需要根据切换状态添加隐藏的 HTML。基本上它需要提交带有按钮状态的表单。这是获取它的最佳方式吗？我也在张贴表格。

这就是我所拥有的..当我单击按钮时，它会添加示例文本，但是当我再次单击时我需要它消失..

```
 $(document).ready(function () { 

    $(".visibilitybutton").click(function(){
        $(this)
            .toggleClass("hide")
            .find("span").toggleClass("icon84 icon85")
            $('.buttons_secondary').append("<input type='hidden'>");
    });

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:37:51.900

您可以像这样删除通过 id 或 class 附加的 html：

```
$('.buttons_secondary').append('<input id="hdf_Test" class="hidden" type="hidden" />');

// Remove by class
$('.buttons_secondary').find('.hidden').remove();

// OR Remove by id
$('.buttons_secondary').find('#hdf_Test').remove(); 
```

根据您之前的问题，我认为您应该尝试以下操作：

```
$(document).ready(function () { 
    $('.button').toggle(function() {
          var $button = $(this);

          $button.prop("title","Invisible");
          $button.find('.icon85').toggleClass('icon85 icon84');
          $('.buttons_secondary').append('<input id="hdf_Test" class="hidden" type="hidden" />');
    }, function() {
          var $button = $(this);

          $button.prop("title","Visible");
          $button.find('.icon85').toggleClass('icon84 icon85');

          // Remove by class
          $('.buttons_secondary').find('.hidden').remove();

          // OR Remove by id
          $('.buttons_secondary').find('#hdf_Test').remove();
    });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:38:47.400

```
 $(document).ready(function () { 

     $('.visibilitybutton').toggle(function() {
          var $button = $(this);

          $button.prop("title","Invisible");
          $button.find('span').removeClass('icon84').addClass('icon85');
          $('.buttons_secondary').append('<input id="visibility_setting" class="hidden" type="hidden" />');
    }, function() {
          var $button = $(this);

          $button.prop("title","Visible");
          $button.find('span').removeClass('icon85').addClass('icon84');

          // OR Remove by id
          $('.buttons_secondary').find('#visibility_setting').remove();
    });

 }); 
```

# java - java使用stringbuilder读取属性和xml文件

> ID：11618245
> 
> 赞同：1
> 
> 时间：2012-07-23T18:24:26.363
> 
> 标签：java

我需要读取一组 xml 和属性文件并解析数据。目前我正在使用 inputstream ans string builder 来执行此操作。但这不会以与输入文件相同的方式创建文件。我不想删除空格和新行。我如何做到这一点。

```
is = test.getInputStream();
br = new BufferedReader(new InputStreamReader(is));
String line5;
StringBuilder sb5 = new StringBuilder();
while ((line5 = br.readLine()) != null) {
    sb5.append(line5);
} 
String s = sb5.toString(); 
```

**我的输出是：**

`#test 123 #test2 345`

**预期输出为：**

```
#test
123
#test2
345 
```

有什么想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:28:10.873

br.readLine() 消耗换行符，您需要在附加行后将它们添加到您的 StringBuilder 中。

```
is = test.getInputStream();
br = new BufferedReader(new InputStreamReader(is));
String line5;
StringBuilder sb5 = new StringBuilder();
while ((line5 = br.readLine()) != null) {
    sb5.append(line5);
    sb5.append("\n");
} 
```

如果您想要一个非常简单的将文件读取到字符串的解决方案，[Apache Commons-IO](http://commons.apache.org/io/)有一种执行此类任务的方法（[org.apache.commons.io.FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToString%28java.io.File,%20java.lang.String%29)）。

```
FileUtils.readFileToString(File file, String encoding); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:28:14.460

`readLine()`方法不添加 EOL 字符 (\n)。因此，在将字符串附加到构建器时，您需要添加 EOL 字符，例如`sb5.append(line5+"\n");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T18:28:31.273

各种`readLine`方法从输入中丢弃换行符。

从[`BufferedReader`文档](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)：

> 返回： 包含行内容的字符串，不包括任何行终止字符，如果已到达流的末尾，则返回 null

一个解决方案可能很简单，就像`StringBuilder`为每个`readLine`:添加一个换行符一样简单`sb5.append(line5 + "\n");`。

更好的选择是首先使用该方法读取中间缓冲区，并`read`提供您自己的`char[]`. 你仍然可以使用[`StringBuilder.append`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html#append%28char%5b%5d%29)，并且得到一个与文件内容匹配的字符串。

# entity-framework-4.1 - EF 4.1 is trying to insert values in identity column despite StoreGeneratedPattern being set to Identity in SSDL

> ID：11618249
> 
> 赞同：2
> 
> 时间：2012-07-23T18:24:52.900
> 
> 标签：entity-framework-4.1, poco, identity-column

I have a table called ScanMasters in SQL Server 2008 which has a column called PresentationAuditId as the primary key. This column is also a foreign key. The table also has an identity column called ScanPartId. I am using Entity Framework 4.1 to generate POCOs based on my database. The EF SSDL represents the entity in this manner:

```
<EntityType Name="ScanMasters">
  <Key>
    <PropertyRef Name="PresentationAuditId" />
  </Key>
  <Property Name="ScanPartId" Type="int" Nullable="false" StoreGeneratedPattern="Identity" />
  <Property Name="RackNum" Type="int" />
  <Property Name="LoadDatetime" Type="datetime" />
  <Property Name="PresentationAuditId" Type="bigint" Nullable="false" />
  <Property Name="Item" Type="varchar" MaxLength="31" />
</EntityType> 
```

When I add new data for this entity and do SaveChanges(), I am getting the following error:

**Cannot insert explicit value for identity column in table 'ScanMasters' when IDENTITY_INSERT is set to OFF.**

Can we have a non-primary key column as an identity column in EF 4.1? How can I go about this?

# xamarin.ios - 为什么这个 Core Graphics 绘图代码会生成不同的线宽？

> ID：11618254
> 
> 赞同：2
> 
> 时间：2012-07-23T18:25:15.513
> 
> 标签：xamarin.ios, core-graphics, cgcontext

看图片。形状小矩形有不同的线宽。指向大中心矩形的线更粗。以左上角为例：to 线和左边的比右边的和底部的要细。首先，我虽然这是一种视错觉，但不是。屏幕截图是在模拟器上以 100% 拍摄的。

![在此处输入图像描述](../Images/a7f16e413434aeb40a02aeba344f285e.png)

下面用于绘制视图的代码来自 UIView 子类的 DrawRect()：

```
public override void Draw (RectangleF rect)
        {
            rect = this.Bounds;
            CGContext oCtx = UIGraphics.GetCurrentContext();
            oCtx.SetFillColor(UIColor.Clear.CGColor);
            oCtx.ClearRect(rect);

            oCtx.SetLineWidth(2f);

            oCtx.SetFillColor(this.BackgroundColor.CGColor);
            oCtx.SetStrokeColor(this.BackgroundColor.CGColor);
            oCtx.SetAlpha(this.Alpha);

            oCtx.AddRect(new RectangleF(rect.X + HANDLE_WIDTH * 0.5f, rect.Y + HANDLE_HEIGHT * 0.5f, rect.Width - HANDLE_WIDTH, rect.Height - HANDLE_HEIGHT));

            oCtx.FillPath();

            oCtx.SetAlpha(1f);
            oCtx.AddRect(new RectangleF(rect.X, rect.Y, HANDLE_WIDTH, HANDLE_HEIGHT));
            oCtx.AddRect(new RectangleF(rect.Right - HANDLE_WIDTH, rect.Y, HANDLE_WIDTH, HANDLE_HEIGHT));
            oCtx.AddRect(new RectangleF(rect.Right - HANDLE_WIDTH, rect.Bottom - HANDLE_HEIGHT, HANDLE_WIDTH, HANDLE_HEIGHT));
            oCtx.AddRect(new RectangleF(rect.X, rect.Bottom - HANDLE_HEIGHT, HANDLE_WIDTH, HANDLE_HEIGHT));

            oCtx.StrokePath();

#if DEBUG
            oCtx.SetAlpha(0.2f);
            oCtx.SetFillColor(UIColor.DarkGray.CGColor);
            oCtx.AddRect(this.GetMovableArea(rect));
            oCtx.FillPath();
#endif
        } 
```

有人可以解释为什么笔画宽度不同吗？我也尝试改用 StrokeRect() - 结果相同。我什至删除了所有的绘图代码，除了左上角的矩形没有改变。常量 HANDLE_HEIGHT 和 HANDLE_WIDTH 都设置为 20f。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:56:11.723

这个`UIView` `ClipsToBounds`房产的价值是多少？

如果`true`那可能是您的问题（2pt 线的一半超出范围）。

**更新**

`GetClipBoundingBox`你的`CGContext`回报是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:56:10.733

这是由于 CoreGraphics 使用了中心笔对齐方式，例如它会在您指定的线条的任一侧绘制像素。正如您已经注意到将坐标带入线宽的一半将修复它。

本文有一个示例，还讨论了 iOS 应用于该行的抗锯齿以及如何避免它。

[http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients](http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients)

> 在我们的例子中，路径的边缘是我们希望填充的矩形。因此，当沿该边缘绘制 1 >pixel 线时，线的一半（1/2 像素）将在 >rectangle 的内侧，而线的另一半（1/2 像素）将在外侧>矩形的。
> 
> 但是，当然，因为没有办法绘制 1/2 个像素，Core Graphics 使用 anti->aliasing 来绘制两个像素，而只是使用较浅的阴影来显示它仅绘制一个像素的外观。

我认为您无法在 CG 中更改此设置，与 GDI+ 不同，您可以在其中设置笔对齐[http://msdn.microsoft.com/en-us/library/z62ath7a.aspx](http://msdn.microsoft.com/en-us/library/z62ath7a.aspx)

# java - Invoking Clojure from Java throws NullPointerException that does not contain stacktrace

> ID：11618257
> 
> 赞同：4
> 
> 时间：2012-07-23T18:25:20.107
> 
> 标签：java, exception, tomcat, clojure

This specific question is related to the missing stacktrace for the NullPointerException raised.

So I have a Clojure file, which gets compiled by my Java web app using the following:

```
Compiler.loadFile("/tmp/test.clj");
Var cljFunc = RT.var("abc", "foo");
cljFunc.invoke(12); 
```

However, I'm getting a NullPointerException at the line of `cljfunc.invoke(12)`. I'm expecting it to show (in the stacktrace) the line number .clj file that the exception occurred. But the stacktrace is null. I added `-XX:-OmitStackTraceInFastThrow` in the Tomcat launch command to turn off the JVM optimization. But it did not help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T02:26:54.610

我怀疑`cljFunc`当你调用`invoke`它时它是空的。

# entity-framework-4.1 - 如何在实体框架的代码优先方法中执行多表查询？

> ID：11618258
> 
> 赞同：0
> 
> 时间：2012-07-23T18:25:26.480
> 
> 标签：entity-framework-4.1, multiple-tables

如果我想执行基于多个表之间的连接的查询，那么如何使用 Entity Framework 4.1 以代码优先的方法对其进行编码？例如，我想执行以下查询：

```
SELECT p.ProductId
 , p.Name AS ProductName
 , c.Name AS CategoryName
FROM
Products p
INNER JOIN Categories c
    ON c.CategoryId = p.CategoryId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:47:13.663

您将创建如下类：

```
public class Product {
    public int ProductId { get; set; }
    public string Name { get; set; }
    public int CategoryId { get; set; }
    public virtual Category Category { get; set; }
}

public class Category {
    public int CategoryId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Product> Products { get; set; }
} 
```

您将使用此查询，从导航属性自动创建连接：

```
var query = from p in context.Products
            select new {
                ProductId = p.ProductId,
                ProductName = p.Name,
                CategoryName = p.Category.Name
            }; 
```

# xslt - 在 XSLT 中的两个特定节点之间应用模板

> ID：11618259
> 
> 赞同：1
> 
> 时间：2012-07-23T18:25:41.180
> 
> 标签：xslt, xpath, xslt-2.0

[我在 xsl:for-each-group 中遇到了问题，在这里](https://stackoverflow.com/questions/11585371/xslfor-each-group-help-needed)得到了很好的解决。现在我还有其他问题。我有这样的输入。

```
<?xml version="1.0" encoding="UTF-8"?>

    <body>
       <p name ="section">this is section</p>
       <p name="h-title" other="main">Introduction</p>
       <p name="h1-title " other="other-h1">XSLT and XQuery</p>
       <p name="h2-title" other=" other-h2">XSLT</p>
       <p name="">
          <p1 name="bold"> XSLT is used to write stylesheets.</p1>
       </p>
       <p name="h2-title " name="other-h2">XQuery</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
       <p name="h3-title" name="other-h3">XQuery and stylesheets</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
       <p name ="section">this is section</p>
       <p name="h1-title " other="other-h1">XSLT and XQuery</p>
       <p name="h2-title " other=" other-h2">XSLT</p>
       <p name ="section">this is section</section>
       <p name="h1-title " other="other-h1">XSLT and XQuery</p>
       <p name="h2-title " other=" other-h2">XSLT</p>
    </body> 
```

**现在我想要的输出是这个**

```
<?xml version="1.0" encoding="UTF-8"?>
<body>
   <p name="h-title " other="main">Introduction</p>
   <section>
   <p name ="section">this is section</p>
   <h1>
      <p name="h1-title " other="other-h1"> XSLT and XQuery </p>
      <h2>
         <p name="h2-title " other="other-h2">XSLT</p>
         <p name="">
            <p1 name="bold">XSLT is used to write stylesheets.
            </p1>
         </p>
      </h2>
      <h2>
         <p name="h2-title " other="other-h2"> XQuery is used to query XMLdatabases    
         </p>
         <p name="">
            <p name="bold"> XQuery is used to query XML databases.</p>
         </p>
         <h3>
            <p name="h3-title " name="other-h3">XQuery and stylesheets</p>
            <p name="">
            <p1 name="bold"> XQuery is used to query XML databases.</p1>
           </p>
        </h3>
      </h2>
</h1>
</section>
<section>
<p name ="section">this is section</p>
<h1>
            <p name="h1-title " other="other-h1">XSLT and XQuery</p>
       <h2>   
            <p name="h2"-title other=" other-h2">XSLT</p>
       </h2>
</h1>
</section>
<section>
<p name ="section">this is section</p>
<h1>
            <p name="h1-title " other="other-h1">XSLT and XQuery</p>
       <h2>   
            <p name="h2"-title other=" other-h2">XSLT</p>
       </h2>
</h1>
</section>
</body> 
```

**我用过的样式表（不能正常工作）**

```
 <xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
      xmlns:xs="http://www.w3.org/2001/XMLSchema"
      xmlns:mf="http://example.com/mf"
      exclude-result-prefixes="xs mf">

    <xsl:param name="prefix" as="xs:string" select="'h'"/>
    <xsl:param name="suffix" as="xs:string" select="'-title'"/>

    <xsl:output method="html" version="4.0" indent="yes"/>

    <xsl:function name="mf:group" as="node()*">
      <xsl:param name="items" as="node()*"/>
      <xsl:param name="level" as="xs:integer"/>
      <xsl:for-each-group select="$items" group-starting-with="p[@name = concat($prefix,$level, $suffix)]">
        <xsl:choose>
          <xsl:when test="not(self::p[@name = concat($prefix, $level, $suffix)])">
            <xsl:apply-templates select="current-group()"/>
          </xsl:when>
          <xsl:otherwise>
            <xsl:element name="h{$level}">
              <xsl:apply-templates select="."/>
              <xsl:sequence select="mf:group(current-group() except ., $level + 1)"/>
            </xsl:element>
          </xsl:otherwise>
        </xsl:choose>
      </xsl:for-each-group>
    </xsl:function>

    <xsl:template match="@* | node()">
      <xsl:copy>
        <xsl:apply-templates select="@* , node()"/>
      </xsl:copy>
    </xsl:template>

    <xsl:template match="body" name ="myTemplate">
      <xsl:copy>
        <xsl:sequence select="mf:group(*, 1)"/>
      </xsl:copy>
    </xsl:template>

   <xsl:template match="body[@name='section']">
        <section>
            <xsl:call-template name="myTemplate"/>
        </section>
    </xsl:template>    
    </xsl:stylesheet> 
```

但这是不正确的。诸如此类的事情`<p name ="section">this is section</p>`广泛出现。不仅如此，像这样的人很少。如果有人请告诉我如何处理，`section`我也可以为其他人做到这一点。请告诉我如何正确执行此操作。

**添加**

```
<body>
<intro>
<p></p>
<p></p>
</intro>

<section>
<para>
</para>
<h1></h2>
<h2></h2>
</section>

<section>
<para>
</para>
<h1></h2>
<h2></h2>
</section>

<sumary>
</summary>
</body> 
```

**我做了什么**

```
<xsl:for-each-group select="*" group-starting-with="p[@name = 'intro']">
            <intro>
                    <xsl:apply-templates select="current()"/>
            </intro>
</xsl:for-each-group> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:47:01.450

我认为您主要想要另一个分组步骤；样式表

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:mf="http://example.com/mf"
  exclude-result-prefixes="xs mf">

<xsl:param name="prefix" as="xs:string" select="'h'"/>
<xsl:param name="suffix" as="xs:string" select="'-title'"/>

<xsl:output method="html" version="4.0" indent="yes"/>

<xsl:function name="mf:group" as="node()*">
  <xsl:param name="items" as="node()*"/>
  <xsl:param name="level" as="xs:integer"/>
  <xsl:for-each-group select="$items" group-starting-with="p[@name = concat($prefix, $level, $suffix)]">
    <xsl:choose>
      <xsl:when test="not(self::p[@name = concat($prefix, $level, $suffix)])">
        <xsl:apply-templates select="current-group()"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:element name="h{$level}">
          <xsl:apply-templates select="."/>
          <xsl:sequence select="mf:group(current-group() except ., $level + 1)"/>
        </xsl:element>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:for-each-group>
</xsl:function>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="body">
  <xsl:copy>
    <xsl:for-each-group select="*" group-starting-with="p[@name = 'section']">
      <section>
        <xsl:sequence select="mf:group(current-group(), 1)"/>
      </section>
    </xsl:for-each-group>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

转换校正后的输入

```
<?xml version="1.0" encoding="UTF-8"?>

    <body>
       <p name ="section">this is section</p>
       <p name="h-title" other="main">Introduction</p>
       <p name="h1-title" other="other-h1">XSLT and XQuery</p>
       <p name="h2-title" other=" other-h2">XSLT</p>
       <p name="">
          <p1 name="bold"> XSLT is used to write stylesheets.</p1>
       </p>
       <p name="h2-title" other="other-h2">XQuery</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
       <p name="h3-title" other="other-h3">XQuery and stylesheets</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
       <p name ="section">this is section</p>
       <p name="h1-title" other="other-h1">XSLT and XQuery</p>
       <p name="h2-title" other=" other-h2">XSLT</p>
       <p name ="section">this is section</p>
       <p name="h1-title" other="other-h1">XSLT and XQuery</p>
       <p name="h2-title" other=" other-h2">XSLT</p>
    </body> 
```

进入结果

```
<body>
   <section>
      <p name="section">this is section</p>
      <p name="h-title" other="main">Introduction</p>
      <h1>
         <p name="h1-title" other="other-h1">XSLT and XQuery</p>
         <h2>
            <p name="h2-title" other=" other-h2">XSLT</p>
            <p name="">

               <p1 name="bold"> XSLT is used to write stylesheets.</p1>

            </p>
         </h2>
         <h2>
            <p name="h2-title" other="other-h2">XQuery</p>
            <p name="">

               <p1 name="bold"> XQuery is used to query XML databases.</p1>

            </p>
            <h3>
               <p name="h3-title" other="other-h3">XQuery and stylesheets</p>
               <p name="">

                  <p1 name="bold"> XQuery is used to query XML databases.</p1>

               </p>
            </h3>
         </h2>
      </h1>
   </section>
   <section>
      <p name="section">this is section</p>
      <h1>
         <p name="h1-title" other="other-h1">XSLT and XQuery</p>
         <h2>
            <p name="h2-title" other=" other-h2">XSLT</p>
         </h2>
      </h1>
   </section>
   <section>
      <p name="section">this is section</p>
      <h1>
         <p name="h1-title" other="other-h1">XSLT and XQuery</p>
         <h2>
            <p name="h2-title" other=" other-h2">XSLT</p>
         </h2>
      </h1>
   </section>
</body> 
```

我认为这具有您发布的结构，除了`<p name="h-title" other="main">Introduction</p>`元素位于部分内，而您发布的示例将其移动到顶部。我不确定这样做的规则是什么，所以我没有尝试实施。请澄清您是否只是想将该单个元素移到顶部而不对其应用分组，或者是否有更复杂的规则来豁免某些元素。

[编辑]如果您只是想将所有内容`p[@name = 't-title']`移到顶部而不是将它们分组，那么上述样式表的以下改编应该可以完成这项工作：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:mf="http://example.com/mf"
  exclude-result-prefixes="xs mf">

<xsl:param name="prefix" as="xs:string" select="'h'"/>
<xsl:param name="suffix" as="xs:string" select="'-title'"/>

<xsl:output method="html" version="4.0" indent="yes"/>

<xsl:function name="mf:group" as="node()*">
  <xsl:param name="items" as="node()*"/>
  <xsl:param name="level" as="xs:integer"/>
  <xsl:for-each-group select="$items" group-starting-with="p[@name = concat($prefix, $level, $suffix)]">
    <xsl:choose>
      <xsl:when test="not(self::p[@name = concat($prefix, $level, $suffix)])">
        <xsl:apply-templates select="current-group()"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:element name="h{$level}">
          <xsl:apply-templates select="."/>
          <xsl:sequence select="mf:group(current-group() except ., $level + 1)"/>
        </xsl:element>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:for-each-group>
</xsl:function>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="body">
  <xsl:copy>
    <xsl:apply-templates select="p[@name = 'h-title']"/>
    <xsl:for-each-group select="* except p[@name = 'h-title']" group-starting-with="p[@name = 'section']">
      <section>
        <xsl:sequence select="mf:group(current-group(), 1)"/>
      </section>
    </xsl:for-each-group>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

# html - 设置 html 表格的宽度 td

> ID：11618262
> 
> 赞同：0
> 
> 时间：2012-07-23T18:25:47.967
> 
> 标签：html, css

我有以下代码：

```
<table>
 <thead>
    <th class='1'>Date</th>
    <th class='2'>Start Time</th>
    <th class='3'>End Time </th>
    <th class='4'>Location</th>
</thead>
  <tbody>
    <td class='1'>Date</td>
    <td class='2'>Start Time</td>
    <td class='3'>End Time </td>
    <td class='4'>Location</td>
</tbody>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

和CSS

```
 table {width:550px;}
​.1 {width:60px; background-color:green;}
.2 {width:90px; background-color:blue;}
.3 {width:90px; background-color:red;}
.4 {width:100px; background-color:yellow;}​ 
```

为什么我不能设置宽度？背景颜色也没有改变，所以我一定有代码错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:27:45.100

类名不能以数字开头。尝试重命名您的类以开始一个字母 (az)。

JS 小提琴：http: [//jsfiddle.net/sDKp2/](http://jsfiddle.net/sDKp2/)

# c# - ComboBox Items to multiple textboxes

> ID：11618265
> 
> 赞同：1
> 
> 时间：2012-07-23T18:26:04.513
> 
> 标签：c#, sql, combobox, textbox

First off I would like to apologize as I am very new to C#. This may sound like a stupid question; however, I have not been able to find any examples anywhere on the internet or within the few books I have purchased on C#

I have a form that pulls quite a bit of data on load from a SQL Database. The First and Last names are inserted into two seperate comboBoxes one that will display the information as "First Last" and the other "Last, First" for easier browsing of names.

Thanks to some help on here the other day I learned how to populate a single textbox with the selected value of the comboBox. Thanks again for the assistance.

What I need to do is when a user is selected from the comboBox, all the information for that user will be displayed within certain textBoxes on the form. Example would be,

```
LastName = textBox1
FirstName = textBox2
MiddleName = textBox3 
```

Do I need to write a seperate string for each of these fields, or can that data be pulled from one string that queries the SQL database for all data?

Any assistance you can provide would be greatly appreciated.

Here is what I have so far

```
enter code here

  namespace Tempus.Menus
 {
 public partial class Employees : Form
 {
    public Employees()
    {
        InitializeComponent();

        //Connect to database for Employees Table Headers
        SqlConnection myConnection = new SqlConnection(@"Server=Server4\INSTANCE;Integrated Security=true;" +
            "user id=userID;password=password;" +
            "Trusted_Connection=yes;" +
            "Database=Database;" +
            "connection timeout=30");

        try
        {
            myConnection.Open();
            string SqlDataPull = String.Format("SELECT * FROM Employees WHERE Lname IS NOT NULL {0}", (checkBox1.Checked ? "AND Active='Y'" : ""));
            //string SqlDataPull2 = String.Format("SELECT * FROM Employees WHERE Fname IS NOT NULL {0} ORDER By Fname", (checkBox1.Checked ? "AND Active='Y'" : ""));
            SqlCommand cmd = new SqlCommand(SqlDataPull, myConnection);
            cmd.CommandType = CommandType.Text;
            SqlDataReader dr = cmd.ExecuteReader();

            while (dr.Read())
            {
                string strEmployee = String.Format("{0}  {1}", dr["Fname"], dr["Lname"], dr["Mname"], dr["DOH"], dr["DOT"], dr["Active"], dr["DoNotRehireReason"], dr["PTO-balance"], dr["SNP-balance"], dr["Cred"]);

                comboBox1.Items.Add(strEmployee);

                string strEmployee2 = String.Format("{0}, {1}", dr["Lname"], dr["Fname"]);

                comboBox2.Items.Add(strEmployee2);

                int Fname = dr.GetInt32(0);
                string firstName = String.Format("{0}", dr["Fname"]);

            }

        }
        catch (Exception e)
        {
            MessageBox.Show(e.ToString());
        }
        finally
        {
            if (myConnection != null)
            {
                myConnection.Dispose();
            }

        }
        comboBox1.SelectedIndexChanged += comboBox1_SelectedIndexChanged;

        comboBox2.SelectedIndexChanged += comboBox2_SelectedIndexChanged;
    }
    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox1.SelectedIndex == -1)
        {
            textBox1.Text = string.Empty;
        }
        else
        {

            textBox1.Text = comboBox1.SelectedItem.ToString();

        }
    }

    private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox2.SelectedIndex == -1)
        {
            textBox1.Text = string.Empty;
        }
        else
        {

            textBox1.Text = comboBox2.SelectedItem.ToString();
        }
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {

    }

    private void Employees_Load(object sender, EventArgs e)
    {

    }

    private void label1_Click(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        Main myNewForm = new Main();

        myNewForm.Show();

        this.Close();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        Reports myNewForm = new Reports();

        myNewForm.Show();

        this.Close();
    }

    private void textBox2_TextChanged(object sender, EventArgs e)
    {

    }

    private void textBox3_TextChanged(object sender, EventArgs e)
    {

    }

    private void textBox4_TextChanged(object sender, EventArgs e)
    {

    }

    private void textBox5_TextChanged(object sender, EventArgs e)
    {

    }

    private void textBox8_TextChanged(object sender, EventArgs e)
    {

    }

    private void textBox9_TextChanged(object sender, EventArgs e)
    {

    }

    private void textBox7_TextChanged(object sender, EventArgs e)
    {

    }

    private void textBox10_TextChanged(object sender, EventArgs e)
    {

    }

    private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
        if (checkBox1.Checked)

                {

            // logic here for if the box has now been checked

                }

            else

                {

                // what to do if the box has been unchecked

                }

       }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:07:26.663

根据您提供的上下文，这是我的反馈。请合并适用的要点并忽略其余部分。并希望它也能回答你的问题。

*   这是一个单层应用程序。建议查看在可维护性、可读性等方面更好的分层结构（[在此处阅读更多内容）。](http://msdn.microsoft.com/en-us/library/ee658109)

*   动态 SQL 在许多方面都被认为是不好的（包括存在安全风险），因此请查看存储过程（或 LINQ-to-SQL 或任何 ORM 提供程序）存储的好处。[这篇](http://www.sommarskog.se/dynamic_sql.html)文章是一个很好的起点。

*   您做了 a`SELECT * FROM EMPLOYEE`并阅读了 10 个（可能更多）列，但您只使用了`FName`and`LName`列。建议使用类似的东西`SELECT FName, LName FROM EMPLOYEE`（在存储过程或等效程序中）并将它们填充到具有数据层中相关属性的对象中。在 UI 层中，您可以进行一次调用以获取数据并将相同的数据以适当的格式绑定到两个组合框（一个带有空格，另一个带有逗号）。

*   最后，在数据层有第二种方法来获取给定员工的详细信息（所有列映射到相应的属性？）（比如基于姓氏）。在 UI 层，根据组合框中的选定项，您可以获取相应的员工详细信息并将其显示在您的文本框中。

如果您不想走这条路并想要“快速修复”，请记住该方法效率极低，难以维护并且容易出现安全问题。在这里，您只需为组合框中的选定值再次调用相同的数据库（使用`WHERE`子句）并将详细信息绑定到您的文本框。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:12:05.737

我建议创建一个 Employee 类

```
 class Employee
{
    public string firstName { get; set; }
    public string middleName { get; set;}
    public string lastName { get; set; }
    public string fullName { get; set; }

    //add other attributes here just the same...

    public Employee(string first, string middle, string last, string full)
    {
        firstName = first;
        middleName = middle;
        lastName = last;
        fullName = full;

        //assign ther other attributes..
    }

} 
```

您可以在其中创建列表`List<Employee> employees = new List<Employee>();`以将返回的 SQL 数据添加到...

```
 SqlDataAdapter da = new SqlDataAdapter(SqlDataPull, myConnection); 
DataSet ds = new DataSet();
da.Fill(ds, "Employees");

foreach (DataRow row in ds.Tables["Employees"].Rows)
{
  employees.Add(dr["Fname"], dr["Lname"], dr["Mname"], dr["FullName"]);
} 
```

您可以在 sql 查询中返回全名`RTRIM(Lname) + ',' + RTRIM(Fname) AS FullName`

然后，您可以将列表添加为组合框的数据源，并引用所选索引以将值添加到文本框中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T19:18:35.710

不熟悉使用 SQL，但是如果您在组合框中拥有所需的所有信息，则可以使用已有的事件。

comboBox1.SelectedIndexChanged += comboBox1_SelectedIndexChanged; comboBox2.SelectedIndexChanged += comboBox2_SelectedIndexChanged;

在我看来，comboBox1 包含有关员工的所有信息，而 comboBox2 仅包含名字和姓氏。基于您用来填充组合框的 while 循环。

因此，如果用户单击 SelectedIndexChanged 中 comboBox1 中的选择，您可以执行以下操作：

```
 if(comboBox1.SelectedIndex != -1)
    {
        string[]parts = comboBox1.Items[comboBox1.SelectedIndex].ToString().Split(' ');
        textBox1.Text = parts[0];//Index for First Name
        textBox2.Text = parts[1];//Index for Last Name
        textBox3.Text = parts[2];//Index for Middle Name
    } 
```

注意：我使用 .Split(' ') 将字符串拆分为空格，但是当您从组合框中检索文本时，您使用分隔不同数据片段的字符。

不完全确定您要尝试使用 SQL 等做什么，但是如果您在从 SQL 加载后在组合框中有数据，您可以轻松获取数据并将它们放入适当的文本框中，而无需重新加载数据库。

希望这可以帮助。

# ios - Save a web photo to camera roll in Phonegap

> ID：11618266
> 
> 赞同：4
> 
> 时间：2012-07-23T18:26:06.393
> 
> 标签：ios, cordova

My iOS PhoneGap app displays a photo gallery (loaded from the server). Is it possible to add a button on an images page which **saves the image to the iOS camera roll**? (similar to the tap and hold in mobile safari)

If this is something that needs to be done as a plug in, any information pointing me in the right direction would be appreciated! (My skills in obj C are very lacking).

Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-04T19:30:25.613

[在 Cordova/Phonegap 插件Canvas2ImagePlugin](https://github.com/devgeeks/Canvas2ImagePlugin)的帮助下，这是可能的。安装它并将以下函数添加到您的代码中。它基于 Raul Sanchez 的[getImageDataURL()](http://appcropolis.com/blog/web-technology/javascript-encode-images-dataurl/)（谢谢！）。

```
function saveImageToPhone(url, success, error) {
    var canvas, context, imageDataUrl, imageData;
    var img = new Image();
    img.onload = function() {
        canvas = document.createElement('canvas');
        canvas.width = img.width;
        canvas.height = img.height;
        context = canvas.getContext('2d');
        context.drawImage(img, 0, 0);
        try {
            imageDataUrl = canvas.toDataURL('image/jpeg', 1.0);
            imageData = imageDataUrl.replace(/data:image\/jpeg;base64,/, '');
            cordova.exec(
                success,
                error,
                'Canvas2ImagePlugin',
                'saveImageDataToLibrary',
                [imageData]
            );
        }
        catch(e) {
            error(e.message);
        }
    };
    try {
        img.src = url;
    }
    catch(e) {
        error(e.message);
    }
} 
```

像这样使用它：

```
var success = function(msg){
    console.info(msg);
};

var error = function(err){
    console.error(err);
};

saveImageToPhone('myimage.jpg', success, error); 
```

# java - 如何使用从 C++ 到 Java 的 java.nio.ByteBuffer 返回

> ID：11618267
> 
> 赞同：4
> 
> 时间：2012-07-23T18:26:06.267
> 
> 标签：java, c++, java-native-interface, swig

这几乎是[如何让 Swig 正确包装在 C 中作为 Java 或其他东西修改的 char* 缓冲区中的问题的重复？](https://stackoverflow.com/questions/2740068/how-can-i-make-swig-correctly-wrap-a-char-buffer-that-is-modified-in-c-as-a-jav)...
如果我要使用字节缓冲区而不是 Stringbuffer，那么 typemap 会有什么变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:22:07.797

我已经整理了一个示例，说明如何使用以下头文件/函数作为测试来执行此操作：

```
#include <stdio.h>

static void foo(char *buf, int len) {
  while(len--)
    putchar(*buf++);
} 
```

我的解决方案是修改[这个答案](https://stackoverflow.com/questions/11584599/pass-an-array-to-a-wrapped-function-as-pointersize-or-range/11584600#11584600)，使代理接受 a`ByteBuffer`并将其转换为 a`byte[]`以供我们传递给 JNI 代码，然后将其转换为我们的指针 + 长度组合。

```
%module test

%{
#include "test.h"
%}

%typemap(jtype) (char *buf, int len) "byte[]"
%typemap(jstype) (char *buf, int len) "java.nio.ByteBuffer"
%typemap(jni) (char *buf, int len) "jbyteArray"
%typemap(javain,pre="    byte[] temp$javainput = new byte[$javainput.capacity()];"
                    "    $javainput.get(temp$javainput);")
        (char *buf, int len) "temp$javainput"

%typemap(in,numinputs=1) (char *buf, int len) {
  $1 = JCALL2(GetByteArrayElements, jenv, $input, NULL);
  $2 = JCALL1(GetArrayLength, jenv, $input);
}

%typemap(freearg) (const signed char *arr, size_t sz) {
  // Or use  0 instead of ABORT to keep changes if it was a copy
  JCALL3(ReleaseByteArrayElements, jenv, $input, $1, JNI_ABORT); 
}

%include "test.h" 
```

这里的新位在 javain 类型映射中，分配一个临时的`byte[]`然后使用`get`来填充它。实际上有一个`array()`功能，如果`ByteBuffer`您使用的支持您应该使用它，即类型映射应该只是：

```
%typemap(javain) (char *buf, int len) "$javainput.array()" 
```

如果您的实现支持它（该方法是可选的并且可能会抛出`UnsuportedOperationException`）。

实际上，这可以通过 SWIG 2.0 进一步简化，从前面引用的问题开始，因为我们期望类型*始终*是`byte`我们可以使用 SWIG 2.0 中的内置 int 类型映射来简化我们的界面，现在变成：

```
%module test

%{
#include "test.h"
%}

%apply (char *STRING, size_t LENGTH) { (char *buf, int len) }
%typemap(javain) (char *buf, int len) "$javainput.array()"
%typemap(jstype) (char *buf, int len) "java.nio.ByteBuffer"

%include "test.h" 
```

我使用以下 Java 测试了所有三个版本：

```
public class run {
  public static void main(String[] argv) {
    System.loadLibrary("test");
    byte value[] = "hello world\n".getBytes();
    java.nio.ByteBuffer buf = java.nio.ByteBuffer.wrap(value);
    test.foo(buf);
  }
} 
```

为了安全起见，`array()`您可能想要做的是在带有编译指示的函数中添加 try/catch：

```
%pragma(java) modulecode = %{
  private static byte[] buf2bytearr(java.nio.ByteBuffer buf) {
    try {
      return buf.array();
    }
    catch (UnsupportedOperationException e) {
      byte arr[] = new byte[buf.capacity()];
      buf.get(arr);
      return arr;
    }
  }
%} 
```

然后修改类型映射以使用它：

```
%typemap(javain) (char *buf, int len) "buf2bytearr($javainput)" 
```

# java - Android file not found exception when trying to upload file via FTP

> ID：11618273
> 
> 赞同：-1
> 
> 时间：2012-07-23T18:26:28.627
> 
> 标签：java, android, ftp

I'm trying to upload a text file to a server via FTP. The text file is in data/data/my package/files (I have checked in the DDMS). I am getting a filenotfoundexception in LogCat.

Here's my code:

```
FTPClient client = new FTPClient();
     FileInputStream fis = null;

   try {
     client.connect("82.163.99.80");
     client.enterLocalPassiveMode();
     client.login("user", "password");

     //
     // Create an InputStream of the file to be uploaded
     //
     String filename = "sdcardstats.txt";
     fis = new FileInputStream(filename);

     //
     // Store file to server
     //
     client.storeFile(filename, fis);
     client.logout();
 } catch (IOException e) {
     e.printStackTrace();
 } finally {
     try {
         if (fis != null) {
             fis.close();
         }
         client.disconnect();
     } catch (IOException e) {
         e.printStackTrace();
     }
     } 
```

Can anyone help please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:56:23.490

你的代码：

```
fis = new FileInputStream(filename); 
```

... 需要路径，而不是文件名。

请尝试：

```
fis = openFileInput(filename); 
```

...它采用文件名并尝试在应用程序的私有文件存储区域中打开它。有关更多信息，请参阅数据存储的 Android 开发人员指南：[内部文件](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)，以及[FileInputStream](http://developer.android.com/reference/java/io/FileInputStream.html#FileInputStream%28java.lang.String%29)和[openFileInput](http://developer.android.com/reference/android/content/Context.html#openFileInput%28java.lang.String%29)。

# mysql - MySQL中模式/数据库之间的区别

> ID：11618277
> 
> 赞同：345
> 
> 时间：2012-07-23T18:26:36.810
> 
> 标签：mysql, database, schema, database-schema

MySQL中的模式和数据库之间有区别吗？在 SQL Server 中，数据库是与架构相关的更高级别的容器。

我读过它`Create Schema`并`Create Database`在 MySQL 中做了基本相同的事情，这让我相信模式和数据库对于相同的对象来说是不同的词。

* * *

## 回答 #1

> 赞同：402
> 
> 时间：2012-07-23T18:32:06.667

[如MySQL 词汇表](http://dev.mysql.com/doc/en/glossary.html#glos_schema)中所定义：

> 在 MySQL 中，从物理上讲，***模式***是***数据库***的同义词。您可以在 MySQL SQL 语法中替换关键字`SCHEMA`而不是`DATABASE`，例如使用`CREATE SCHEMA`instead of `CREATE DATABASE`。
> 
> 其他一些数据库产品也有区别。例如，在 Oracle 数据库产品中，***模式***仅代表数据库的一部分：单个用户拥有的表和其他对象。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2013-10-08T20:32:45.577

取决于数据库服务器。`MySQL`没关系，基本都是一样的。

`Oracle`, `DB2`, 和其他企业级数据库解决方案有所区别。通常，**模式是表的集合，**而**数据库是模式的集合。**

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-07-23T18:34:02.780

参考 MySql[文档](http://dev.mysql.com/doc/refman/5.0/en/create-database.html)，

> CREATE DATABASE 创建一个具有给定名称的数据库。要使用此语句，您需要数据库的 CREATE 权限。从 MySQL 5.0.2 开始，CREATE SCHEMA 是 CREATE DATABASE 的同义词。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-06-14T09:52:40.200

PostgreSQL 支持模式，它是数据库的一个子集： [https ://www.postgresql.org/docs/current/static/ddl-schemas.html](https://www.postgresql.org/docs/current/static/ddl-schemas.html)

> 数据库包含一个或多个命名模式，这些模式又包含表。模式还包含其他类型的命名对象，包括数据类型、函数和运算符。相同的对象名称可以在不同的模式中使用而不会发生冲突；例如，schema1 和 myschema 都可以包含名为 mytable 的表。与数据库不同，模式不是严格分离的：用户可以访问他们连接到的数据库中任何模式中的对象，如果他们有权限这样做的话。

模式类似于操作系统级别的目录，只是模式不能嵌套。

在我看来，MySQL 不是参考数据库。你永远不应该引用 MySQL 作为解释。MySQL 实现了非标准的 SQL，并且有时声称它不支持的特性。例如，在 MySQL 中，CREATE 模式只会创建一个 DATABASE。这确实是在误导用户。

这种词汇被 DBA 称为“MySQLism”。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-02-13T10:57:07.733

在 MySQL***模式***中是***数据库***的同义词。对于跳到 MySQL 并在第一天找到单词*schema*的初学者来说，这非常令人困惑，所以大家不用担心，因为两者都是一样的。

当你第一次启动 MySQL 时，你需要创建一个数据库（像任何其他数据库系统一样）来使用，这样你就可以**CREATE SCHEMA**这只不过是**CREATE DATABASE**

在其他一些数据库系统中，模式代表数据库的一部分或表的集合，而模式的集合就是一个数据库。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-23T18:28:43.317

是的，对于 MySQL，人们可以互换使用这些术语。尽管您经常会听到人们不恰当地将整个数据库服务器称为数据库。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-05-24T06:15:29.653

如果您正在**考虑或**讨论**Mysql**。然后**简单回答**

> “ **SCHEMA 和 DATABASE 是完全一样的东西，只是 mysql 中的一种合成糖**。”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-20T04:02:18.380

只需添加更多信息：

MongoDB还区别于`schema`.`database`

`schema`表示表，表示 的结构`database`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-01T19:27:34.387

以 Microsoft SQL Server 为例，Schemas 指的是单个用户，是容器的另一个层次，按服务器、数据库、模式、表和对象的顺序排列。

例如，当您打算更新 dbo.table_a 并且语法不是完全限定的（例如 UPDATE table.a）时，DBMS 无法决定使用预期的表。基本上默认情况下，DBMS 将使用 myuser.table_a

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-23T03:05:35.413

与 Postgres 不同，SQL 服务器模式是一组数据库具有相同的东西，但在 mysql 模式和数据库中它是相同的 MySQL 不支持模式的概念。在 MySQL 中，模式和模式是数据库和数据库的同义词。

当用户连接到 MySQL 时，他们不会连接到特定的数据库。相反，他们可以访问他们有权访问的任何表

# javascript - Breakpoint on property change

> ID：11618278
> 
> 赞同：167
> 
> 时间：2012-07-23T18:26:41.203
> 
> 标签：javascript, debugging, firefox, google-chrome, firebug

Firebug for Firefox has a nice feature, called "Break on property change", where I can mark any property of any object, and it will stop JavaScript execution right before the change.

I'm trying to achieve the same in Google Chrome, and I can't find the function in Chrome debugger. How do I do this in Google Chrome?

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-07-23T18:35:00.627

如果您不介意弄乱源代码，则可以使用访问器重新定义该属性。

```
// original object
var obj = {
    someProp: 10
};

// save in another property
obj._someProp = obj.someProp;

// overwrite with accessor
Object.defineProperty(obj, 'someProp', {
    get: function () {
        return obj._someProp;
    },

    set: function (value) {
        debugger; // sets breakpoint
        obj._someProp = value;
    }
}); 
```

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2012-07-25T21:10:18.307

**编辑 2016.03：`Object.observe`在 Chrome 50 中已弃用和删除**

~~**编辑 2014.05：在 Chrome 36 中添加了“Object.observe”**~~

Chrome 36 附带`Object.observe`可以在此处使用的本机实现：

```
myObj = {a: 1, b: 2};
Object.observe(myObj, function (changes){
    console.log("Changes:");
    console.log(changes);
    debugger;
})
myObj.a = 42; 
```

如果您只是暂时需要它，您应该将回调存储在一个变量中并`Object.unobserve`在完成时调用：

```
myObj = {a: 1, b: 2};
func = function() {debugger;}
Object.observe(myObj, func);
myObj.a = 42;
Object.unobserve(myObj, func);
myObj.a = 84; 
```

请注意，使用 时`Object.observe`，如果作业没有更改任何内容（例如，如果您编写了`myObj.a = 1`.

要查看调用堆栈，您需要在开发工具中启用“异步调用堆栈”选项：

~~[![chrome 异步调用栈](../Images/aa34a5f814eff6783007a8894a0c7342.png)](https://i.stack.imgur.com/Og5Jw.png)~~

* * *

**原始答案（2012.07）：**

`console.watch`@katspaugh 建议的草图：

```
var console = console || {}; // just in case
console.watch = function(oObj, sProp) {
   var sPrivateProp = "$_"+sProp+"_$"; // to minimize the name clash risk
   oObj[sPrivateProp] = oObj[sProp];

   // overwrite with accessor
   Object.defineProperty(oObj, sProp, {
       get: function () {
           return oObj[sPrivateProp];
       },

       set: function (value) {
           //console.log("setting " + sProp + " to " + value); 
           debugger; // sets breakpoint
           oObj[sPrivateProp] = value;
       }
   });
} 
```

调用：

```
console.watch(obj, "someProp"); 
```

兼容性：

*   在 Chrome 20 中，您可以在运行时直接将其粘贴到 Dev Tools 中！
*   为了完整性：在 Firebug 1.10 (Firefox 14) 中，您必须将其注入您的网站（例如，如果您无法手动编辑源代码，则通过 Fiddler）；可悲的是，从 Firebug 定义的功能似乎并没有中断`debugger`（或者是配置问题？请纠正我），但是`console.log`可以。

~~请注意，在 Firefox 中，`console.watch` 已经存在，因为 Firefox 的非标准 [`Object.watch`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects /对象/手表）。因此，在 Firefox 中，您可以原生地观察变化：

```
>>> var obj = { foo: 42 }
>>> obj.watch('foo', function() { console.log('changed') })
>>> obj.foo = 69
changed
69 
```~~ 

编辑：`Object.watch`在 Firefox 57 中被删除。

* * *

## 回答 #3

> 赞同：97
> 
> 时间：2016-07-28T20:25:58.477

有一个库： [BreakOn()](https://github.com/paulirish/break-on-access)

如果您将它作为片段添加到 Chrome 开发工具中*（来源 -->[片段](https://developer.chrome.com/docs/devtools/javascript/sources/#snippets)--> 右键单击​​ --> 新建 --> 粘贴--> 运行）*，您可以随时使用它*[。](https://raw.githubusercontent.com/paulirish/break-on-access/master/break-on-access.js)*

[![在此处输入图像描述](../Images/d380df4df16d401afa4bfbfd8ef55b8a.png)](https://i.stack.imgur.com/91JMX.png)

* * *

要使用它，请打开开发工具并运行代码片段。然后要在更改时中断`myObject.myProperty`，请从开发控制台调用：

```
breakOn(myObject, 'myProperty'); 
```

您还可以将库添加到项目的调试构建中，这样您就无需在`breakOn`每次刷新页面时再次调用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-25T14:21:28.850

这也可以通过使用新的[Proxy](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)对象来完成，其目的正是：拦截对 Proxy 包装的对象的读取和写入。您只需将要观察的对象包装到代理中，并使用新包装的对象而不是原来的对象。

例子：

```
const originalObject = {property: 'XXX', propertyToWatch: 'YYY'};
const watchedProp = 'propertyToWatch';
const handler = {
  set(target, key, value) {
    if (key === watchedProp) {
      debugger;
    }
    target[key] = value;
  }
};
const wrappedObject = new Proxy(originalObject, handler); 
```

现在使用 WrappedObject 代替提供 originalObject 并检查中断时的调用堆栈。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-01-18T06:54:46.817

```
function debugProperty(obj, propertyName) {
  // save in another property
  obj['_' + propertyName] = obj[propertyName];

  // overwrite with accessor
  Object.defineProperty(obj, propertyName, {
    get: function() {
      return obj['_' + propertyName];
    },

    set: function(value) {
      debugger; // sets breakpoint
      obj['_' + propertyName] = value;
    }
  });
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-05-08T18:15:43.373

决定编写我自己的解决方案版本，将其保存在 Chrome 的 DevTools 中的一个片段中，并将其包装在一个应该支持 Node 和浏览器的 IIFE 中。还更改了观察者以使用范围变量而不是对象上的属性，这样就不会有名称冲突的可能性，并且任何枚举键的代码都不会“看到”新创建的“私钥”：

```
(function (global) {
  global.observeObject = (obj, prop) => {
    let value

    Object.defineProperty(obj, prop, {
      get: function () {
        return value
      },

      set: function (newValue) {
        debugger
        value = newValue
      },
    })
  }
})(typeof process !== 'undefined' ? process : window) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-01T17:19:47.490

在 Alexandos Katechis 的出色解决方案的基础上，这里是一个不影响财产原始价值的片段版本。我重命名它以更好地匹配我使用它时的想法。

用法：

1.  通过 Sources -> Snippets 添加片段
2.  需要时，按 Command-O 并选择运行 breakOnChange 片段
3.  `breakOnChange(anyObject, 'propertyName')`在控制台中调用
4.  采取导致改变的行动
5.  在调试器中停止

这对于发现诸如 jQuery 之类的全局库被第三方脚本踩踏之类的事情非常有帮助。

```
(function (global) {
  global.breakOnChange = (obj, prop) => {
    let value = obj[prop]

    Object.defineProperty(obj, prop, {
      get: function () {
        return value
      },

      set: function (newValue) {
        debugger
        value = newValue
      },
    })
  }
})(typeof process !== 'undefined' ? process : window) 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2018-06-02T09:20:29.177

Chrome 在最新版本中内置了此功能[https://developers.google.com/web/updates/2015/05/view-and-change-your-dom-breakpoints](https://developers.google.com/web/updates/2015/05/view-and-change-your-dom-breakpoints)。

因此不再需要自定义库和解决方案，只需右键单击检查器中的 DOM 元素并选择“中断”->“属性修改”即可。

# python - Python：使用 lxml 定位跨度之外的文本

> ID：11618279
> 
> 赞同：0
> 
> 时间：2012-07-23T18:26:48.167
> 
> 标签：python, css-selectors, lxml

我必须解析一些 HTML。但是，它的格式不正确。您可以看到文本“Cowabunga”不包含在任何 HTML 元素中。

```
from lxml.html import fromstring
from lxml.cssselect import CSSSelector

stuff = '''<p>
                <span id="alpha" style="color: #999; "></span> 
                <span id="bravo" style="color: #999; "></span> 
                Cowabunga  
            </p>'''

l = CSSSelector ("p")

e = l(fromstring(stuff))
print e[0].text 
```

如何使用 lxml/Python 编写 CSSSelector 来定位此文本？

谢谢

**编辑：**上面的代码给出了空白输出——只有一行空格——我需要捕捉“Cowabunga”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:03:06.507

这是混合内容，所以总是有点粗糙。`e[0].text_content()`将获得您示例中的所有文本。

# sql-server - Char(9) 在 Sql server 2005 中不打印选项卡

> ID：11618287
> 
> 赞同：7
> 
> 时间：2012-07-23T18:27:23.157
> 
> 标签：sql-server, char

我正在尝试使用以下方法在 sql server 中打印一个选项卡：

```
select 'tab-->' + char(9) + '<--tab' 
```

但它似乎不起作用并且总是打印

```
tab--> <--tab 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T18:33:03.243

如果您在 Management Studio 中对此进行测试，则`Results to Grid`( `Ctrl`+ `D`) 设置会将您的选项卡更改为空格...尝试切换到`Results to Text`( `Ctrl`+ `T`)，您将看到该选项卡。

或者，您可以将您的更改`select`为`print`：

```
print 'tab-->' + char(9) + '<--tab' 
```

输出...

```
tab-->  <--tab 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-09T11:05:21.927

1.  工具 -> 选项 -> 查询结果 -> SQL Server -> 结果到网格 -> 在复制或保存时保留 CR/LF
2.  重启 SSMS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:59:58.433

关于标签的事情是它们不是恒定的宽度。制表符表示“将我带到下一个制表位”。如果您当前将制表位设置为八个字符，并且制表位在六个字符处，则制表位将只有一宽。但是，假设您持怀疑态度（一件好事！）。有更多证据表明该选项卡实际上正在输出。如果您执行类似的操作`print '>' + char(9) + '<'`，您会注意到您不能只选择间隙中的一个空格，这表明您看到的空格是原子的。但对我来说更有说服力的是将其粘贴到允许您查看选项卡的编辑器中。我使用 vim，但使用任何你喜欢的。在我测试的所有情况下，制表符都出现了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:52:23.467

每个`Char(9)`or`char(160)`都转换为一个空格。如果你对齐 char(9)+char(9)+char(9) => 你仍然只有 1 个空格。

所以我尝试了这些：

```
<"something"+char(9)+char(160)+char(9)+char(160)+char(9)+char(160)+char(9)+char(160)"something"> 
```

返回`something[8 spaces here]something`（每个 char9 或 char16 被一个空格替换）

视觉上，我得到了我想要的……

# ruby-on-rails - RefineryCMS - 博客页面错误

> ID：11618288
> 
> 赞同：1
> 
> 时间：2012-07-23T18:27:29.897
> 
> 标签：ruby-on-rails, refinerycms

localhost:3000/blog 抛出以下错误

```
 NoMethodError in Refinery/blog/posts#index

Showing C:/Ruby193/lib/ruby/gems/1.9.1/gems/refinerycms-blog-2.0.4/app/views/refinery/blog/posts/index.html.erb where line #2 raised:

undefined method `content_for' for nil:NilClass

Extracted source (around line #2):

<% content_for :body_content_left do %>
 <%= raw @page.content_for(Refinery::Pages.default_parts.first.to_sym) if Refinery::Pages.default_parts.any? %>
  <% if @posts.any? %>
    <section id="blog_posts"> 
```

我也按照网上许多人的建议执行了 rake db:seed 命令，但没有运气。

# objective-c - 在文件之间传递参数

> ID：11618290
> 
> 赞同：0
> 
> 时间：2012-07-23T18:27:53.540
> 
> 标签：objective-c, cocoa-touch, ipad

考虑4个文件：Login.h、Login.m、Handler.h、Handler.m

```
Login.h
@class Handler 
  NSString *allResponse;
- (void)handleAllResponse:(NSString*m)response passSelf:(NikeLogin*)LoginSelf;

Login.m
#import Handler.h
[self handleAllResponse:response passSelf:self];

Handler.h
#import Login.h
NSString *allResponse;

Handler.m
- (void)handleAllResponse:(NSString*)response passSelf:(NikeLogin*)LoginSelf
{
allResponse=[LoginSelf parseCommunities:response];
//variables assigned values
}
-(NSString*)parseCommunities:(NSString*)response 
{
 //code  
} 
```

编译器无法识别 Handler.h 中的 handleAllCommunitiesResponse 方法定义，因此无法从 Login.m 调用它。此外，handleAllCommunitiesResponse 方法中的变量必须在 Handler.h 中重新声明。这样做的主要目的是在 Login.h 中声明方法并在 Handler.m 中定义它们以进行模块化，在某些情况下，如上所述，该方法是从 Login.m 中调用的在上面的代码中，self 是从 Login.m 传递的，因此所有方法和变量都可以在 Handler.m 中访问，但它没有发生。

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:33:09.430

你引用你`#import`的s吗？那些应该是：

`#import "Login.h"`

# asp.net - 在 BlockUI 显示的对话框上使用 jQuery Validator

> ID：11618292
> 
> 赞同：1
> 
> 时间：2012-07-23T18:28:01.733
> 
> 标签：asp.net, jquery-validate, jquery-blockui

我还在学习 jQuery，我遇到了一些我不确定如何继续的事情。

我有一个表单，其中有一个在加载时隐藏（使用“显示：无”）的 div。此 div 稍后通过 BlockUI 插件显示为用于编辑某些输入元素的模式对话框。我正在尝试获取验证插件来检查我已按要求表示的字段是否实际由最终用户填写。

我在我的应用程序的其他地方使用了验证插件，没有任何问题，但这是我第一次使用它来验证在加载时隐藏的输入。验证没有被执行（即，被标记为必需的空文本输入没有被标记为这样，并且 .valid() 返回 true）。

我使用 Firebug 逐步检查了验证逻辑，发现对话框 div 中的所有输入元素都不存在于 $(this.currentForm) 中。如果我保持对话框 div 可见并删除 $.blockUI 调用，则验证按预期工作。

所以我想我知道现在的问题是什么——我的输入不在 DOM 中，因为它们最初是不可见的，所以验证插件不知道它们存在。我不知道如何解决这个问题。任何人都可以提供建议吗？谢谢！

编辑：对 $.blockUI() 的调用正在从 DOM 中删除对话框 div。看来我必须找到另一种显示对话框的方法。

编辑：代码是专有的，所以我不能发布它。

[验证插件链接](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

[BlockUI 插件链接](http://jquery.malsup.com/block/)

# objective-c - 如何将按钮标题绑定到数组 IOS 中的特定值？

> ID：11618298
> 
> 赞同：0
> 
> 时间：2012-07-23T18:28:26.260
> 
> 标签：objective-c, uibutton, nsmutablearray

我有六个屏幕按钮，它们的标题需要与 an 中的六个元素对应`NSMutableArray`，当数组中的值发生变化时，我也需要标题随之变化。我无法弄清楚如何为按钮创建不断更新的行，我对*Objective-c 开发*以及*Xcode*仍然很陌生。

我还需要确保当数组的特定索引处没有值时，无法单击该按钮

这是其中一个按钮的示例

```
- (IBAction)card1Pressed:(id)sender {
    if (self.userHasEnteredFirstNumber) { 
        if (!self.userHasEnteredSecondNumber) {
            self.secondNumber = [sender currentTitle];
        }
    }
    else{
        self.firstNumber = [sender currentTitle];
    }

} 
```

最终目标是让用户按下两个按钮，然后选择天气来*加*、*减*、*乘*或*除*。在他们选择这四个操作之一后，数组中分配给按钮的值将被删除并替换为新数字。因此，一旦他们这样做了，数组中将只剩下 5 个数字，然后是 4，然后是 3..... 等等。

这些数字将被绘制并添加到`NSMutable`名为*currentHand的数组中*

更新：使用 UIOutletCollection 我将按钮链接到这样的方法图片的链接在这里“很抱歉不能直接发布它，但新用户必须有 10 的声誉才可以” [链接到声明和实施的照片使用 IBOutletCollection 的接口构建器](http://i.imgur.com/ccahv.png)

这是正确的吗？

关于 IBOutletCollection 的头文件的代码如下“请注意，这已连接到我想在界面生成器中使用它的六个按钮，上面显示了它的图片”

```
@property (nonatomic,retain) IBOutletCollection (UIButton)NSArray *buttonArray; 
```

实现文件中关于 IBOutletController 的代码如下

```
@ synthesize buttonArray = _buttonArray; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:32:30.177

您想使用键值观察，请从 Apple 文档中查看： [https ://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/ uid/10000177i](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:39:00.480

好吧好吧，基本上你有一个'Button'-Array，它的'Caption'由一个NSMutableArray提供，可以很容易地改变，对吗？

现在，这只是我的做法，可能有更好的解决方案，但这里是：

您需要一个“更改”接口，称为每次，您的 NSMutableArray 都会发生一些事情。例如（因为我不知道你的数组中到底是什么）：

```
- (void) ChangeArray:(int)IDofElement (NSString *)newValue {
     [arr replaceObjectAtIndex:IDofElement withObject:newValue]; //Updates/Empties the indexed Element.
     if(newValue != nil) {   
         [buttons[IDOfElement] setText:newValue];
     }
     buttons[IDOfElement].enabled = (newValue != nil);      //Makes Button 'clickable'
} 
```

像这样，每次更改您的数组中的值时，相应的标题也会更新。当然，您需要一组按钮才能使其工作，但我认为这不是大问题。

另一种可能的解决方案：保存对存储在数组中的对象内部按钮的引用，并且每当更改值时，也更改按钮的标题。

这有帮助吗？请注意，这不是“完美的解决方案”，而是我想出的。

另请注意，这只是我的想法，可能在某些方面有问题。但它应该能够为您指明大方向。

# javascript - 在jquery javascript中选择第n个孩子

> ID：11618301
> 
> 赞同：0
> 
> 时间：2012-07-23T18:28:34.123
> 
> 标签：javascript, jquery, asp.net, web, selector

像这样选择第 n 个孩子我想选择第二个孩子。

```
$(this).prev().children[1].removeClass("necry").addClass("necry_er"); 
```

而这个 HTML

```
<div class="reg_label">
    <div class="def">Family</div>
    <div class="necry">Necessary Field</div>
    <div class="clear">&nbsp;</div>
</div> 
```

我期待这个结果：

```
<div class="necry_er">Necessary Field</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:33:38.397

使用[eq()](http://api.jquery.com/eq/)将一组匹配的元素减少到指定索引处的元素。

```
$(this).prev().children().eq(1).removeClass("necry").addClass("necry_er"); 
```

还有一个[:nth-child](http://api.jquery.com/nth-child-selector/)选择器：

```
$('#elementID:nth-child(2)').doSomething(); 
```

要交换两个类，您可以执行以下操作：

```
$('.necry').toggleClass('necry necry_er'); 
```

究竟如何找到你想要的元素有点难说，因为没有解释`this`它是什么或它在什么上下文中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:37:44.947

像这样的东西呢？

```
var nec = $(this).parent().find(".necry");
nec.removeClass("necry");
nec.addClass("necry_er"); 
```

# android - 通过使用后台服务将系统时间与数据库值进行比较来通知android中的通知无法正常工作

> ID：11618303
> 
> 赞同：0
> 
> 时间：2012-07-23T18:28:42.080
> 
> 标签：android

我正在开发一个android应用程序。我想每天提供五个通知。我将通知时间存储在sqlite数据库中。然后我使用服务将这个数据库通知时间与重复循环中的设备时间进行比较。但是通知不起作用正确。Forceclose出现了。我已经给出了下面的两个类文件第三，java和MyService.......我需要帮助

```
 Third.java

   public class third extends Activity {
/** Called when the activity is first created. */
Button btnopen;
Spinner spin1,spin2,spin3,spin4,spin5;
EditText t1,t2,t3,t4,t5;
String fajr,zuhr,asr,magrib,isha;
String[] item={"","2-Times Allahu akbar","3-Beep once"};
example r=new example();
private static final String DATABASE_NAME = "MYPRAYER.db";   
private static final String DATABASE_TABLE = "notification";
private static final String DATABASE_CREATE = "create table "+DATABASE_TABLE+"(id integer primary key autoincrement , fajr varchar not null , zuhr varchar not null , asr varchar not null , magrib varchar not null , isha varchar not null );"; 

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.page3);
   /* Call the service */
    Intent i = new Intent();
    i.setClassName( "org.prayer.test","org.prayer.test.MyService" );
    bindService( i, null, Context.BIND_AUTO_CREATE);
    this.startService(i); 
    /*  Populate the spinner */
btnopen=(Button)findViewById(R.id.button1);
t1=(EditText)findViewById(R.id.editText1);
t2=(EditText)findViewById(R.id.editText2);
t3=(EditText)findViewById(R.id.editText3);
t4=(EditText)findViewById(R.id.editText4);
t5=(EditText)findViewById(R.id.editText5);
spin1=(Spinner)findViewById(R.id.spinner1);
spin2=(Spinner)findViewById(R.id.spinner3);
spin3=(Spinner)findViewById(R.id.spinner4);
spin4=(Spinner)findViewById(R.id.spinner6);
spin5=(Spinner)findViewById(R.id.spinner7);
ArrayAdapter<String> a1=new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item,item);
a1.setDropDownViewResource(android.R.layout.simple_spinner_item);
spin1.setAdapter(a1);
spin2.setAdapter(a1);
spin3.setAdapter(a1);
spin4.setAdapter(a1);
spin5.setAdapter(a1);

         /* Notification time stored on the database */
try
{
        SQLiteDatabase myDB;
        //myDB = openOrCreateDatabase(DATABASE_NAME, Context.MODE_PRIVATE, null);
        myDB = SQLiteDatabase.openDatabase("/data/data/org.prayer.test/databases/MYPRAYER.db",null,SQLiteDatabase.CREATE_IF_NECESSARY);

        //myDB.execSQL(DATABASE_CREATE);
        myDB.execSQL(DATABASE_CREATE);
        myDB = openOrCreateDatabase(DATABASE_NAME, Context.MODE_PRIVATE, null);
        ContentValues newRow = new ContentValues();
        newRow.put("id", "1");
        newRow.put("fajr", "0:00 AM");
        newRow.put("zuhr", "0:00 AM");
        newRow.put("asr", "0:00 AM");
        newRow.put("magrib", "0:00 AM");
        newRow.put("isha", "0:00 AM");
        myDB.insert(DATABASE_TABLE, null, newRow);
        myDB.close();
}
catch(SQLiteException ex)
{
    //Do nothing
    //System.out.println(ex.getMessage());
}

btnopen.setOnClickListener(new OnClickListener() {
      @Override
    public void onClick(View v) {

         fajr=t1.getText().toString();
         zuhr=t2.getText().toString();
         asr=t3.getText().toString();
         magrib=t4.getText().toString();
         isha=t5.getText().toString();

        SQLiteDatabase myDB;
        myDB = openOrCreateDatabase(DATABASE_NAME, Context.MODE_PRIVATE, null);
        ContentValues newRow = new ContentValues();
        newRow.put("id", "1");
        newRow.put("fajr", fajr);
        newRow.put("zuhr", zuhr);
        newRow.put("asr", asr);
        newRow.put("magrib", magrib);
        newRow.put("isha", isha);
        myDB.update(DATABASE_TABLE, newRow,"id" + "=" + "1",null);
        Toast.makeText(getApplicationContext(), "row updated", Toast.LENGTH_SHORT).show();
        myDB.close();
  }

}); 
```

} }

```
MyService.java

ppublic class MyService extends Service {
              private static final String DATABASE_NAME = "MYPRAYER.db";   
              private static final String DATABASE_TABLE = "notification";
              String tag="TestService";
                String a="hello";
                String res1,res2,res3,res4,res5;
                int hour,minute;
                String day3,day4,minute1,hour1;
                MediaPlayer mMediaPlayer;
                   /* Service creation */
               @Override
               public void onCreate() {
             super.onCreate();
               Toast.makeText(this, "Service created...", Toast.LENGTH_LONG).show();      
               Log.i(tag, "Service created...");

                  /* Rereive notification times from the databse notificaion */
              SQLiteDatabase myDB;
            myDB = openOrCreateDatabase(DATABASE_NAME, Context.MODE_PRIVATE, null);
            String[] resultColumns = new String[] {"fajr","zuhr","asr","magrib","isha"};
            Cursor allRows = myDB.query(DATABASE_TABLE, resultColumns, null, null, null, null, null, null);

            Integer cindex = allRows.getColumnIndex("fajr");
            Integer cindex1 = allRows.getColumnIndex("zuhr");
            Integer cindex2 = allRows.getColumnIndex("asr");
            Integer cindex3 = allRows.getColumnIndex("magrib");
            Integer cindex4 = allRows.getColumnIndex("isha");
            allRows.moveToFirst();
            res1=allRows.getString(cindex);
            res2=allRows.getString(cindex1);
            res3=allRows.getString(cindex2);
            res4=allRows.getString(cindex3);
            res5=allRows.getString(cindex4);

            myDB.close();

            while(!Thread.currentThread().isInterrupted())
            {
            try 
            {

                Calendar cal = Calendar.getInstance(); // Rereive calender date
                hour = cal.get(Calendar.HOUR_OF_DAY); // Take hour from the calender
                minute = cal.get(Calendar.MINUTE);    // Take minute from the calender
                minute1=minute + "";  // Convert minute to dtring
                if(minute1.equals("1")) 
                {
                minute1="01";
                }
                else if(minute1.equals("2"))
                {
                minute1="02";
                }
                else if(minute1.equals("3"))
                {
                minute1="03";
                }
                else if(minute1.equals("4"))
                {
                minute1="04";
                }
                else if(minute1.equals("5"))
                {
                minute1="05";
                }
                else if(minute1.equals("6"))
                {
                minute1="06";
                }
                else if(minute1.equals("7"))
                {
                minute1="07";
                }
                else if(minute1.equals("8"))
                {
                minute1="08";
                }
                else if(minute1.equals("9"))
                {
                minute1="09";
                }
                     /* Converting to 12 hour format */
                if ( hour < 12 )
                {
                     hour=hour;
                     day3=hour + "" + ":" + minute1;
                     day4=day3 + " " + "AM"; // DAY4 Contains the system time
                }
                else
                {
                    hour=hour-12;
                    day3=hour + "" + ":" + minute1;
                    day4=day3 + " " + "PM";
                }

                if(day4.equals(res1))
              {
                     Notification("Notification Title","Notification Message");

              }

                 if(day4.equals(res2))
                  {
                         Notification("Notification Title","Notification Message");

                  }

                 if(day4.equals(res3))
                  {
                         Notification("Notification Title","Notification Message");

                  } 
                 if(day4.equals(res4))
                  {
                         Notification("Notification Title","Notification Message");

                  }
                 if(day4.equals(res5))
                  {
                         Notification("Notification Title","Notification Message");

                  }

               Thread.sleep(1000);
       } 
       catch (InterruptedException e)
       {
               Thread.currentThread().interrupt();
               //System.out.println("New 1 Exception here");

       }

       catch (Exception e)
      {
               //Thread.currentThread().interrupt();
           System.out.println("nEW Exception here");
      }          
       }

       }         
          @Override
          public void onStart(Intent intent, int startId) {      
          super.onStart(intent, startId);  
          Log.i(tag, "Service started...");
       }
         @Override
         public void onDestroy() {
         super.onDestroy();
         Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
       }

         @Override
         public IBinder onBind(Intent intent) {
         return null;
        }

         private  void Notification(String notificationTitle, String notificationMessage)
       {
         NotificationManager notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
         Notification notification = new Notification(R.drawable.ic_launcher, "A New Message!", System.currentTimeMillis());

         Intent notificationIntent = new Intent(this,MyService.class);
         PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

         notification.setLatestEventInfo(MyService.this, notificationTitle, notificationMessage, pendingIntent);
         notificationManager.notify(10001, notification);
   //HELLO_ID++;
         Uri alert = RingtoneManager.getDefaultUri(
        RingtoneManager.TYPE_NOTIFICATION); 

        mMediaPlayer = new MediaPlayer();
      try
      {
      mMediaPlayer.setDataSource(this, alert);

      AudioManager audioManager = (AudioManager)getSystemService(
                                  Context.AUDIO_SERVICE);
      int volumen = audioManager.getStreamVolume(
                    AudioManager.STREAM_NOTIFICATION);

      if (volumen != 0) {
        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_NOTIFICATION);
        mMediaPlayer.setLooping(true);
        mMediaPlayer.prepare();
        mMediaPlayer.start();
      }
      }
      catch(IOException e)
      {  
          System.out.println("Exception here");
          //System.out.println("Exception 1 here");
      }
      }
          } 
```

LG猫：

07-27 16:24:52.591：E/global(363)：不支持已弃用的线程方法。07-27 16:24:52.591: E/global(363): java.lang.UnsupportedOperationException 07-27 16:24:52.591: E/global(363): at java.lang.VMThread.stop(VMThread.java: 85) 07-27 16:24:52.591: E/global(363): 在 java.lang.Thread.stop(Thread.java:1379) 07-27 16:24:52.591: E/global(363): 在java.lang.Thread.stop(Thread.java:1344) 07-27 16:24:52.591: E/global(363): at org.prayer.test.splash$1.run(splash.java:71) 07- 27 16:24:53.002: D/dalvikvm(363): GC 在 108 毫秒内释放了 879 个对象/65552 个字节 07-27 16:25:00.542: I/TestService(363): 服务创建... 07-27 16:25 ：20.752：I/dalvikvm（363）：threadid = 7：对信号3做出反应07-27 16：25：20.803：I/dalvikvm（363）：将堆栈跟踪写入'/data/anr/traces.txt'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:16:54.993

如果您的目标是在一天中的固定时间触发通知，请使用 AlarmManager 执行此操作，如下所示：

1.  当应用程序第一次启动时，像现在一样保存那些 EditText 值等 - 然后设置 AlarmManager 以在最近的下一个通知时间唤醒您的服务。
2.  在服务中，发布通知，设置下一个闹钟，然后 stopSelf()。

这个循环将继续。

至于强制关闭，请粘贴您的 logcat。你的代码不是很整洁，变量没有有意义的命名，所以很难说。

# java - Java Web 启动和 SSL。加载 localhost-ca 证书

> ID：11618305
> 
> 赞同：1
> 
> 时间：2012-07-23T18:28:42.970
> 
> 标签：java, ssl, java-web-start

我一直在努力让 NASA WorldWind 小程序在 ssl 上运行，并且遇到了一个相当困难的错误消息。

当我尝试运行纯 webstart 小程序时，它会抛出“sun.security.validator.ValidatorException：PKIX 路径验证失败：java.security.cert.CertPathValidatorException：路径不与任何信任锚链接”据我所知，这意味着它无法为小程序找到 CA。这没有多大意义，因为签名证书及其 ca（Localhost.crt 和 localhost-ca.crt）都在同一个密钥库中，我已将其标记为信任库。

对于这个问题的建议和帮助将不胜感激，因为我已经尝试了我能想到的一切。

我尝试过的事情：

*   将 localhost-ca crt 添加到 JVM 基础的 cacerts 文件中
*   将信任库添加到包含 localhost crt 和 localhost CA 的 jlnp 文件
*   确保所有需要的 .jar 文件都由同一个 crt 签名
    *   是的，我什至将 jogl.jar 及其所有本地文件下载到了我的 PC 上，并让他们删除了旧的 META-INF
*   通过常规 http 加载 Jnlp 文件以确保它不是只需单击 webstart （同样的错误）

附件是我的 WWApplet 代码。

```
<?xml version="1.0" encoding="UTF-8"?>

   <jnlp href="WWJApplet.jnlp" codebase =".">
    <information>
        <title>World Wind Java Applet Demo</title>
        <vendor>NASA</vendor>
        <homepage href="http://worldwind.arc.nasa.gov"/>
        <description>World Wind Java Applet Demo</description>
        <description kind="short">World Wind Java Applet Demo</description>
        <offline-allowed/>
    </information>
    <security>
        <all-permissions/>
    </security>
     <resources os="Windows">
       <property name="sun.java2d.noddraw" value="true"/>
     </resources>
     <resources>
        <j2se href="http://java.sun.com/products/autodl/j2se" version="1.6+" initial-heap-size="512m"
              max-heap-size="512m"/>
        <property name="sun.java2d.noddraw" value="true"/>
        <property name="Djavax.net.ssl.trustStore"        
value="C:\Users\srivera\Documents\Apache-Install\tomcat-owf\certs\keystore.jks"/>
            <property name="Djavax.net.ssl.trustStorePassword" value="password"/>
        <jar href="WorldWindWidget.jar" main="true"/>
        <jar href="Windworld.jar"/>
        <extension name="jogl" href="jogl.jnlp"/>
     </resources>
     <!-- Width and heigth are overwritten by the surrounding web page -->
     <applet-desc
         name="WWJ Applet"
         main-class="org.me.windworldwidget.WorldWindWidget"
         width="800" height="600">
        <param name="separate_jvm" value="true" />
     </applet-desc>
   </jnlp> 
```

# jquery - data-confirm 属性未显示确认对话框

> ID：11618315
> 
> 赞同：0
> 
> 时间：2012-07-23T18:29:32.423
> 
> 标签：jquery, asp.net-mvc-3, html

我正在尝试向删除链接添加确认对话框，并且理想情况下希望使用数据属性。我在这里看到了`data-confirm`属性[Best unobtrusive way to add JQuery confirm to an absolute element](https://stackoverflow.com/questions/8094008/best-unobtrusive-way-to-add-jquery-confirm-to-an-arbitrary-element)但似乎无法保存它。

这是我的链接代码（MVC 3 Razor）

```
or <a href="@Url.Action("DeleteCustomerPhone",new { id = phone.Id })" class="delete" data-confirm="Delete this phone number?">delete</a> 
```

Javascript（稍微修改以匹配我的现在）：

```
$(document).ready(function() {
            $("[data-confirm]").click(function(event) {
                var confirmPrompt = event.currentTarget.attributes['data-confirm'].value;
                event.preventDefault();
                $.prompt(confirmPrompt, {
                    buttons: { Yes: true, No: false },
                    callback: function(v, m, f) {
                        if (v) {
                            // User clicked Yes.  Unbind handler to avoid
                            // recursion, then click the target element again
                            $(event.currentTarget).unbind('click');
                            event.currentTarget.click();
                        }
                    }
                });
            });
        }); 
```

控制台错误：

> 未捕获的类型错误：对象函数 (a, b) { return new e.fn.init(a, b, h) } 没有方法“提示”

有人可以为此指出正确的方向吗？

# php - 在php中删除部分路径

> ID：11618318
> 
> 赞同：0
> 
> 时间：2012-07-23T18:29:43.987
> 
> 标签：php, path, directory

我有这样的路径：

```
$path='somefolder/foo/bar/lastdir'; 
```

我想删除最后一部分，所以我有：

```
$path='somefolder/foo/bar'; 
```

就像我上一个文件夹一样。

我真的是 php 的新手，也许它只是一个功能，虽然我在任何地方都找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T18:35:55.960

你可以试试这个（测试并按预期工作）：

```
$path = 'somefolder/foo/haha/lastone';
$parts = explode('/', $path);
array_pop($parts);
$newpath = implode('/', $parts); 
```

`$newpath`现在将包含`somefolder/foo/haha`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T18:35:55.620

这是未经测试的，但请尝试：

```
$path_array = explode('/',$path);
array_pop($path_array);
$path = implode('/',$path_array); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T18:41:37.023

采用 ：

```
dirname(dirname('somefolder/foo/haha/lastone/somescript.php')); 
```

这应该返回：

```
somefolder/foo/haha/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T18:34:03.843

如果您目前在：

```
somefolder/foo/haha/lastone/somescript.php 
```

你想访问：

```
somefolder/foo/haha/someotherscript.php 
```

只需输入：

```
../someotherscript.php 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T18:36:23.060

如果最后一部分会发生变化，可能使用正则表达式函数是合适的。尝试

```
$pattern = '#/.*$#U';
$stripped_path = preg_replace($pattern, '', $original_path); 
```

这将从最后一个正斜杠开始从原始路径字符串中删除所有内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-23T18:39:24.900

您可以使用将 $path 变量exploded() 到数组中的函数，然后使用array_pop 删除最后一个元素。

```
function path($path) {
    $arrayPath = explode("/", $path);
    $path = array_pop($arrayPath);

    return $path = implode("/", $path);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-23T18:44:03.323

PHP 中最短的变体是：

```
$path = preg_replace('|/[^/]*$|','', $path); 
```

它使用正则表达式。

# wget - 为什么用 wget 下载的文件乱码？

> ID：11618319
> 
> 赞同：-1
> 
> 时间：2012-07-23T18:29:46.700
> 
> 标签：wget

为什么用命令保存文件：

```
wget http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js 
```

都乱了？它在浏览器中看起来很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:34:05.913

它的压缩包。试试这个：

```
$ mv jquery.tools.min.js jquery.tools.min.js.gz
$ gunzip jquery.tools.min.js.gz
$ cat jquery.tools.min.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T21:03:27.617

我不确定这已经存在了多久，但在 wget 1.14 版上，您可以：

```
wget --no-warc-compression http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js 
```

# asp.net-mvc - DateTime 插入然后选择：序列不包含任何元素

> ID：11618320
> 
> 赞同：1
> 
> 时间：2012-07-23T18:29:52.027
> 
> 标签：asp.net-mvc, entity-framework-4

我在 sql server 中的表结构是：

```
TableId int (Pk) identity

Data string

DateNTime DateTime 
```

* * *

我的方法是::

```
public int insertData(string data){

Date= DateTime.Now;

Table table= new Table();

table.Data= data;

table.DateNTime=Date;

 this.DataContext.Set<Table>().Add(table);

this.DataContext.SaveChanges();

return this.DataContext.Tables.Single(b => b.DateNTime == Date).TableId

} 
```

数据插入没有任何问题，但在返回 TableId 时 10 次中有 9 次出现异常“序列不包含元素”

可能是在保存表格行之前触发了选择命令并且我得到了这个错误，如果是这样我该怎么办？

谢谢阿纳布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:42:27.577

`SaveChanges()`是一个同步的“阻塞”操作，在保存日期的事务提交之前它不会返回。因此，当您调用查询时，日期肯定会保存在数据库中。

我认为，这是一个精度/舍入问题。如果您查看`DateTime`.NET 中 a 的精度，您会看到（例如在`TimeOfDay`属性中）：

**.NET`DateTime`类型的 TimeOfDay：10:32:51.0312500**

因此，精度为 10E-7 秒。SQL Server 中的 A`datetime`只有 10E-3 秒的精度，.NET`DateTime`在数据库中保存如下：

**SQL Server 类型的列值`datetime`：10:32:51.030**

所以，它被四舍五入到三位数。当您运行查询时，.NET`DateTime`以高精度传输（如`datetime2(7)`SQL Server 中的类型）...

```
WHERE [Extent1].[MyDateTimeColumn] = @p__linq__0',
    N'@p__linq__0 datetime2(7)', @p__linq__0='2012-05-18 10:32:51.0312500' 
```

...并且相等比较失败，因为

`2012-05-18 10:32:51.0312500`!=`2012-05-18 10:32:51.030`

如果您想要更高的精度，请`datetime2(7)`在 SQL Server 中使用与 .NET 类型匹配的 as`DateTime`类型。或者避免此类查询相等性，而是查询 +/- 1 秒的间隔或您的`DateTime`值附近的时间，如下所示：

```
var date1 = Date.AddSeconds(-1);
var date2 = Date.AddSeconds( 1);
return this.DataContext.Tables
    .Single(b => b.DateNTime >= date1 && b.DateNTime <= date2)
    .TableId; 
```

（当然，如果您保存的速度比每 2 秒快一次，这当然不是一个好的解决方案，`Single`可能会因“序列包含多个元素”异常而失败。）

# python - BeautifulSoup：如何在特定的 html 标签之后提取数据

> ID：11618324
> 
> 赞同：5
> 
> 时间：2012-07-23T18:29:59.193
> 
> 标签：python, html, beautifulsoup, scrape

我有以下 html，我试图弄清楚我如何准确地告诉 BeautifulSoup 在某些 html 元素之后提取 td。在这种情况下，我想在`<td>`之后获取数据`<td>Color Digest</td>`

```
<tr>
<td> Color Digest </td>
<td> 2,36,156,38,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, </td>
</tr> 
```

这是整个 HTML

```
<html>
<head>
<body>
<div align="center">
<table cellspacing="0" cellpadding="0" style="clear:both; width:100%;margin:0px; font-size:1pt;">
<br>
<br>
<table>
<table>
<tbody>
<tr bgcolor="#AAAAAA">
<tr>
<tr>
<tr>
<tr>
<tr>
<tr>
<tr>
<tr>
<tr>
<tr>
<tr>
<tr>
<td> Color Digest </td>
<td> 2,36,156,38,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, </td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T18:51:21.543

听起来您需要遍历列表`<td>`并在找到数据后停止。

例子：

```
from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup('<html><tr><td>X</td><td>Color Digest</td><td>THE DIGEST</td></tr></html>')
for cell in soup.html.tr.findAll('td'):
    if 'Color Digest' == cell.text:
         print cell.nextSibling.text 
```

# javascript - jQuery 插件冲突 - 验证和 jQuery 表单

> ID：11618325
> 
> 赞同：1
> 
> 时间：2012-07-23T18:30:01.750
> 
> 标签：javascript, jquery, ajax, validation, jquery-plugins

我有一个使用 jQuery Validate ( [jQuery Validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) ) 和 jQuery Form ( [jQuery Form](http://jquery.malsup.com/form/) ) 的网站。我的问题是，当我在 ajaxSubmit 上使用成功回调时，当在 Validate 上调用成功回调时，会调用 ajaxSubmit 成功回调。

我在这里 ajax 表单，并在 Validate 下将 submitHandler 设置为 ajaxSubmit：

```
/******* Validate Function Options (not complete function) ************/
success: function(label) {
  label.addClass("checked");
}, 
submitHandler: function(form) {
  $(form).ajaxSubmit();
}

/******* AjaxForm Options/Initilization ************/

var options = { 
  target: '#server-response',       
  success: showResponse,
};

$('#consultation-form').ajaxForm(options); 
```

我的困境是，当验证成功时（在验证时调用成功回调），它也会从 AjaxForm 选项中调用成功回调。花了最后一个小时在这里环顾四周，这就是我找到 submitHandler 的方式。

这里的 JsFiddle，由于我的帖子而无法工作，但它是整个 js 和 html。[http://jsfiddle.net/UUDb6/](http://jsfiddle.net/UUDb6/)

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:48:06.317

看起来您可以分别在 jQuery 验证和 ajax 表单的选项中定义自定义 URL。例如：

```
$("#myform").ajaxForm({
   url: "mypage1.php",
   type: "POST",
   ...
 });

$("#myform").validate({
   url: "mypage2.php",
   type: "POST",
   ...
 }); 
```

`$(form).validate(options)`您可以对;使用类似的选项

您可以制作 PHP 回调脚本的副本并更改名称，因此 validate 函数使用一个脚本，而 ajaxSubmit 使用另一个脚本。

# c - 我的二进制文件中这些额外的字节是什么？

> ID：11618327
> 
> 赞同：8
> 
> 时间：2012-07-23T18:30:23.713
> 
> 标签：c, gcc, operating-system, kernel

我正在用 C 编写一个小型操作系统。我已经编写了一个引导加载程序，现在我正在尝试获取一个简单的 C 文件（“内核”）来编译`gcc`：

```
int main(void) { return 0; } 
```

我使用以下命令编译文件：

```
gcc kernel.c -o kernel.o -nostdlib -nostartfiles 
```

我使用链接器使用以下命令创建最终图像：

```
ld kernel.o -o kernel.bin -T linker.ld --oformat=binary 
```

该`linker.ld`文件的内容如下：

```
部分
{
    . = 0x7e00；

    .文本对齐（0x00）：
    {
        *（。文本）
    }
}

```

（引导加载程序在地址加载映像`0x7e00`。）

这似乎工作得很好——`ld`生成一个 128 字节的文件，在前 11 个字节中包含以下指令：

```
00000000 55 推送 ebp
00000001 48 dec eax
00000002 89 E5 移动 ebp, esp
00000004 B8 00 00 00 00 移动 eax, 0x00000000
00000009 5D pop ebp
0000000A C3 RET

```

但是，我无法弄清楚其他 117 个字节的用途。拆卸它们似乎会产生一堆没有任何意义的垃圾。额外字节的存在让我想知道我是否做错了什么。

我应该担心吗？

![文件的十六进制转储](../Images/1656333945adefa8a56688345df33838.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T19:02:48.807

这些是额外的部分，没有被剥离也没有被丢弃。你希望你的`linker.ld`文件看起来像这样：

```
SECTIONS
{
    . = 0x7e00;

    .text ALIGN (0x00) :
    {
        *(.text)
    }

    /DISCARD/ :
    {
        *(.comment)
        *(.eh_frame_hdr)
        *(.eh_frame)
    }
} 
```

我知道要从`objdump -t kernel.o`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T19:32:09.207

很简单，您使用的是 gcc，它总是在将控制权传递给您的 main 之前放置其初始化代码。我不知道启动代码上有什么，但它们就在那里。正如您可能看到的，在您的二进制文件中还有一个注释“GNU”，您无法使用 objdump -s -j 'section name' 打印特定扇区。

# javascript - 即时搜索 jquery 插件

> ID：11618331
> 
> 赞同：0
> 
> 时间：2012-07-23T18:30:32.120
> 
> 标签：javascript, jquery, search, plugins

首先这是脚本的工作方式：[jsfiddle](http://jsfiddle.net/dynamyc/7Rm8U/7/light/)

'searchList' 设置指定将被搜索的内容。在这种情况下，它是可搜索的 tr。最后，“searchItem”设置允许深入并指定要搜索的单个元素。在这种情况下，我使用“td”。

在这个[小提琴](http://jsfiddle.net/jTdwU/8/)

我有一个包含一些信息的缩略图列表，我想做的是能够搜索“某物”，然后显示与该特定缩略图相关的图像和文本。希望你明白我想要达到的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:15:12.617

在一个肢体上，但你的选择器`searchList`看起来不对：

```
'searchList' : '.imgscontainer portfolio-v6-items ', 
```

当然，第二类前面应该有一个点，它们在同一个元素上，所以没有空格：

```
 class="imgscontainer portfolio-v6-items" 
```

# javascript - 淘汰赛绑定 - 选择第一个填充对象

> ID：11618337
> 
> 赞同：0
> 
> 时间：2012-07-23T18:31:05.337
> 
> 标签：javascript, jquery, forms, knockout.js

我有以下 KnockoutJS 代码，以便为地址表单编辑器进行数据绑定，其中我可以有 4 种地址类型（“家”、“办公室”等）。

[http://jsfiddle.net/mxgFQ/1/](http://jsfiddle.net/mxgFQ/1/)

现在一切都很好，但是 selectedAddress 被硬编码为索引 0

```
self.selectedAddress = ko.observable(self.addresses[0]); 
```

而不是这样做，我想选择第一个填充数据的地址对象。

关于如何做到这一点的任何线索？

欣赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:17:33.557

Knockout 的实用程序功能提供了非常方便的`arrayFirst`功能，这使得它变得简单：

```
self.selectedAddress = ko.observable(
        ko.utils.arrayFirst(self.addresses(), function(item) {
            return item.address1().length > 0;
        })); 
```

这是[更新的小提琴](http://jsfiddle.net/tyrsius/mxgFQ/6/)。

这是[KO 实用功能](http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html)的方便参考：

# asp.net-mvc-3 - 将参数传递给另一个页面 ASPMVC3 中的字段

> ID：11618339
> 
> 赞同：0
> 
> 时间：2012-07-23T18:31:13.407
> 
> 标签：asp.net-mvc-3

我有一个人类，它有一个列出每个人的索引文件。

一个 Html.ActionLink 指向另一个控制器以获取有关此人的注释。

一个人，很多笔记，所以我想将 PersonID 作为参数传递并将其插入到新的笔记表单中。参数不是NoteID，即key

```
@Html.ActionLink("Note", "Create", "Note", new { id = item.PersonID }, null) 
```

PersonID 位于传递给便笺表单的 url 中。

如何将 PersonID 输入到 Note 表单中？

非常感谢，哈利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:56:46.477

在 Note 控制器中的 Create 操作方法中，如果您在函数中包含它的参数，您将收到 ID 作为操作方法的参数：

```
public ActionResult Create(string id)
{

} 
```

从那里您可以将 id 传递到您用于构建“创建注释”页面的视图中。如果您有一个 Note 模型对象并且其中一个属性是 PersonID，您可能想要新建一个新的 Note 对象，将 PersonID 设置为参数中传递的值，然后将新的 Note 对象传递给视图页面该模型：

```
return View(newNote); 
```

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:12:26.680

您可以使用与您声明的*ID相同的名称将其**淘汰*， 或者..只需在另一个使用相同名称的控制器上处理它。*身份证*：

 **```
 [HttpGet]
    public ViewResult Create(int id)
    {
        return View(id); <--
    } 
```

然后使用 razor-engine 它带有*@Model***

# java - 基于 Web 的应用程序的 JDBC 插入语句中的同步

> ID：11618342
> 
> 赞同：1
> 
> 时间：2012-07-23T18:31:25.390
> 
> 标签：java, servlets, jdbc, synchronization

我正在开发一个代码，其中有一组插入和选择语句。这是一个使用 servlet/jsp 的基于 Web 的应用程序。我如何确保一次一个请求访问此方法。

我应该使用：

*   同步方法或同步块

*   或静态同步方法。

```
public void insertDetails()
{
    //Select Statement

    If  //result of Select statment == "X"
        insert1
    else
        insert 2
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T19:02:37.200

通常，使用同步来控制数据库访问意味着“你做错了”。数据库有各种内部机制来控制并发访问，所以最好改用它们。除其他原因外，在您的 jvm 中使用机制可能会限制未来扩展或拥有多个应用程序的能力（即有 2 个 jvm 使用同一数据库服务器的数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:32:51.233

如果我是你，我会尝试修改我的插入语句以处理`if-else`条件，而不是使用同步块。

正如 jthalborn 所指出的，这将确保正确利用数据库的内部并发控制机制，并将您的逻辑与必须处理同步场景分离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T10:18:56.617

您无需担心提交同步，因为 DB 引擎旨在处理该问题。

# php - 从 public_html 文件夹内编辑 public_html 文件夹外的文件

> ID：11618343
> 
> 赞同：-1
> 
> 时间：2012-07-23T18:31:29.953
> 
> 标签：php

使用 php，如何从位于 public_html 文件夹内的文件中编辑位于 public_html 文件夹外的文件夹中的文件？我尝试对 public_html 文件夹之外的文件的文件名使用 include 函数，但它运行外部文件显示当前文件的内容（使用 fputs），而不是仅更新外部文件。

```
<?php 
include "hits.txt"; 
$filename = "hits.txt"; 
$count = file($filename); 
$count[0]++; 
$file = fopen ($filename, "w") or die ("Cannot find $filename"); 
fputs($file, "$count[0]"); 
fclose($file); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:34:30.413

据我了解，您只想编辑父目录中的文件？为此，您需要为 open 函数提供文件的绝对/相对路径。那是：

```
$file_relative = "../../file.txt";
$file_absolute = "/some_file/www/file.txt";

fopen($file_relative, "w");

// Edit your file as necessary 
```

请注意，虽然这在技术上是可行的，但可能是不允许的。您可能没有适当的权限来编辑高于 public_html 的任何内容。

# iphone - 调整 UIView 的大小以适应其内容

> ID：11618347
> 
> 赞同：1
> 
> 时间：2012-07-23T18:31:58.617
> 
> 标签：iphone, ios, ipad, uiview

问题是，我确实有一个包含 3 个部分的视图。

第一部分是一个简单的**标题 - 始终相同的高度！** 第二部分是一个简单的**描述行——总是相同的高度！**

现在问题是第三部分。它是动态计算子视图的**viewContainer**（每个子视图都有一个自定义控制器）。内容的高度是动态的，由从后端下载的一些文本信息引起的。所以有时我需要滚动才能阅读整个文本，有时不需要。

目前我正在这样做：

*   计算特定文本的 UILabel 的大小。
*   然后调整父视图的大小以适合 UILabel（如果更小）。
*   然后调整我的**3-Part-ViewController-View**的滚动视图以适应其子视图。

具有动态内容的详细视图控制器：

```
 self.labelDescription.text = self.customData.descriptionText;
    [self.labelDescription sizeToFit];
    if(self.view.frame.size.height < (self.labelDescription.frame.size.height + self.labelDescription.frame.origin.y)) {
    CGRect newSize = CGRectMake(0,
                                0,
                                self.view.frame.size.width,
                                self.labelDescription.frame.size.height +
                                self.labelDescription.frame.origin.y);
    self.view.frame = newSize;
    } 
```

添加和调整我的详细视图后调整滚动视图的大小：

```
[self addChildViewController:controllerCustomData];
[self.scrollView addSubview:controllerCustomData.view];    
CGRect newRect = CGRectMake(0,
                            self.viewElementDetailContentContainer.frame.origin.y,
                            controllerCustomData.view.frame.size.width,
                            controllerCustomData.view.frame.size.height);
controllerCustomData.view.frame = newRect;
self.scrollView.contentSize = CGSizeMake(self.scrollView.contentSize.width, newRect.origin.y + newRect.size.height); 
```

所以我的问题是，有没有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:16:07.860

你可以创建一个方法来完成你需要的一切。您需要编写一次方法（可能是methodS）并使用它传递必要的参数。

# php - How to add property to object in PHP >= 5.3 strict mode without generating error

> ID：11618349
> 
> 赞同：93
> 
> 时间：2012-07-23T18:32:00.770
> 
> 标签：php, class

This has to be simple, but I can't seem to find an answer....

I have a generic stdClass object `$foo` with no properties. I want to add a new property `$bar` to it that's not already defined. If I do this:

```
$foo = new StdClass();
$foo->bar = '1234'; 
```

PHP in strict mode complains.

What is the proper way (outside of the class declaration) to add a property to an already instantiated object?

NOTE: I want the solution to work with the generic PHP object of type stdClass.

A little background on this issue. I'm decoding a json string which is an array of json objects. `json_decode()` generates an array of StdClass object. I need to manipulate these objects and add a property to each one.

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-07-23T18:45:45.933

If you absolutely have to add the property to the object, I believe you could cast it as an array, add your property (as a new array key), then cast it back as an object. The only time you run into `stdClass` objects (I believe) is when you cast an array as an object or when you create a new `stdClass` object from scratch (and of course when you `json_decode()` something - silly me for forgetting!).

Instead of:

```
$foo = new StdClass();
$foo->bar = '1234'; 
```

You'd do:

```
$foo = array('bar' => '1234');
$foo = (object)$foo; 
```

Or if you already had an existing stdClass object:

```
$foo = (array)$foo;
$foo['bar'] = '1234';
$foo = (object)$foo; 
```

Also as a 1 liner:

```
$foo = (object) array_merge( (array)$foo, array( 'bar' => '1234' ) ); 
```

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2015-09-15T08:55:00.893

Do it like this:

```
$foo = new stdClass();
$foo->{"bar"} = '1234'; 
```

now try:

```
echo $foo->bar; // should display 1234 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-23T18:57:02.460

If you want to edit the decoded JSON, try getting it as an associative array instead of an array of objects.

```
$data = json_decode($json, TRUE); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-08-17T18:18:40.637

This is another way:

```
$foo = (object)null; //create an empty object
$foo->bar = "12345";

echo $foo->bar; //12345 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T18:37:53.200

you should use magic methods __Set and __get. Simple example:

```
class Foo
{
    //This array stores your properties
private $content = array();

public function __set($key, $value)
{
            //Perform data validation here before inserting data
    $this->content[$key] = $value;
    return $this;
}

public function __get($value)
{       //You might want to check that the data exists here
    return $this->$content[$value];
}

} 
```

Of course, don't use this example as this : no security at all :)

EDIT : seen your comments, here could be an alternative based on reflection and a decorator :

```
 class Foo
 {
private $content = array();
private $stdInstance;

public function __construct($stdInstance)
{
    $this->stdInstance = $stdInstance;
}

public function __set($key, $value)
{
    //Reflection for the stdClass object
    $ref = new ReflectionClass($this->stdInstance);
    //Fetch the props of the object

    $props = $ref->getProperties();

    if (in_array($key, $props)) {
        $this->stdInstance->$key = $value;
    } else {
        $this->content[$key] = $value;
    }
    return $this;
}

public function __get($value)
{
    //Search first your array as it is faster than using reflection
    if (array_key_exists($value, $this->content))
    {
        return $this->content[$value];
    } else {
        $ref = new ReflectionClass($this->stdInstance);

        //Fetch the props of the object
        $props = $ref->getProperties();

        if (in_array($value, $props)) {

        return $this->stdInstance->$value;
    } else {
        throw new \Exception('No prop in here...');
    }
}
 }
} 
```

PS : I didn't test my code, just the general idea...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-18T07:49:46.940

I don't know whether its the newer version of php, but this works. I'm using php 5.6

```
 <?php
    class Person
    {
       public $name;

       public function save()
       {
          print_r($this);
       }
    }

   $p = new Person;
   $p->name = "Ganga";
   $p->age = 23;

   $p->save(); 
```

This is the result. The save method actually gets the new property

```
 Person Object
    (
       [name] => Ganga
       [age] => 23
    ) 
```

* * *

## 回答 #7

> 赞同：-8
> 
> 时间：2014-07-19T11:53:30.400

Yes, is possible to dynamically add properties to a PHP object.

This is useful when a partial object is received from javascript.

JAVASCRIPT side:

```
var myObject = { name = "myName" };
$.ajax({ type: "POST", url: "index.php",
    data: myObject, dataType: "json",
    contentType: "application/json;charset=utf-8"
}).success(function(datareceived){
    if(datareceived.id >= 0 ) { /* the id property has dynamically added on server side via PHP */ }
}); 
```

PHP side:

```
$requestString = file_get_contents('php://input');
$myObject = json_decode($requestString); // same object as was sent in the ajax call
$myObject->id = 30; // This will dynamicaly add the id property to the myObject object 
```

OR JUST SEND A DUMMY PROPERTY from javascript that you will fill in PHP.

# playn - 在 Google 网站上托管 playn 应用程序

> ID：11618352
> 
> 赞同：1
> 
> 时间：2012-07-23T18:32:08.520
> 
> 标签：playn, google-gadget, google-sites

我正在尝试在 Google 网站上托管一个仅限客户端（无网络，无持久性）的 PlayN 游戏。任何人都知道一个简单的方法来做到这一点？

我的第一次尝试是将 game.nocache.js 文件上传到“文件柜”并从页面 html 中的脚本标签加载它，但站点会删除脚本标签。

我的下一个尝试是创建一个从文件柜加载脚本的简单小工具，因为我以前使用小工具来解决脚本嵌入问题。该小工具如下所示：

```
<Module>
    <ModulePrefs title="PlayN Gadget"  width="800" height="600" />
    <Content type="html">
        <![CDATA[
             <div id='playn-root'></div>
             <script src="files/game.nocache.js"></script> 
        ]]>
     </Content>
</Module> 
```

（其中 'files' 是文件柜页面的名称。）但是，这会在尝试包含模块时出现 html 验证错误，这是 js 文件深处某处未闭合的 META 标记。

有人在这方面取得成功吗？

# java - 安卓中的pop3

> ID：11618357
> 
> 赞同：-1
> 
> 时间：2012-07-23T18:32:30.753
> 
> 标签：java, android, email

如何使用 POP3 读取带有 POP3 或 IMAP 的 Android 中的字母？

指导我，也许我可以使用一些图书馆和其他？我必须在我的应用程序中阅读一些信件。

谢谢，罗曼·西特尼克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:16:35.133

Javamail-Android 项目应该有所帮助： [https ://code.google.com/p/javamail-android/](https://code.google.com/p/javamail-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:03:14.047

[Chilkat](http://www.example-code.com/android/pop3_http_proxy.asp)有一个您可以使用的 Android 库。

# directx - Direct X Sprite 渲染问题

> ID：11618358
> 
> 赞同：0
> 
> 时间：2012-07-23T18:32:35.043
> 
> 标签：directx, rendering, sprite

我一直在使用 Direct X 编写自己的库，但遇到了一个奇怪的问题。在尝试渲染动画精灵时，我只是看到一个大的黑色方块：

![Direct X 渲染问题](../Images/8eec0c5e5ddefb4f6452b3dd2f41c8bd.png)

我痴迷地浏览了代码，并得出结论，这一定与实际精灵的加载有关，因为我在代码中可以看到的一切都很好。显然，我无法进入诸如 BltFast 之类的函数，因此无法判断我的精灵表面是否成功地被 blitted 到后台缓冲区。

这是精灵的加载和渲染函数：

**精灵::加载**

```
/**
 *  loads a bitmap file and copies it to a directdraw surface
 *
 *  @param  pID             wait
 *  @param  pFileName       name of the bitmap file to load into memory
 */
void Sprite::Load (const char *pID, const char *pFileName)
{
    //  initialises the member variables with the new image id and file name
    mID                 = pID;
    mFileName           = pFileName;

    //  creates the necessary variables
    HBITMAP             tHBM;
    BITMAP              tBM;
    DDSURFACEDESC2      tDDSD;
    IDirectDrawSurface7 *tDDS;

    //  stores bitmap image into HBITMAP handler
    tHBM                    = static_cast<HBITMAP> (LoadImage (NULL, pFileName, IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE | LR_CREATEDIBSECTION));

    GetObject (tHBM, sizeof (tBM), &tBM);

    //  create surface for the HBITMAP to be copied onto
    ZeroMemory (&tDDSD, sizeof (tDDSD));
    tDDSD.dwSize            = sizeof (tDDSD);
    tDDSD.dwFlags           = DDSD_CAPS | DDSD_HEIGHT | DDSD_WIDTH;
    tDDSD.ddsCaps.dwCaps    = DDSCAPS_OFFSCREENPLAIN;
    tDDSD.dwWidth           = tBM.bmWidth;
    tDDSD.dwHeight          = tBM.bmHeight;
    DirectDraw::GetInstance ()->DirectDrawObject()->CreateSurface (&tDDSD, &tDDS, NULL);

    //  copying bitmap image onto surface
    CopyBitmap(tDDS, tHBM, 0, 0, 0, 0);

    //  deletes bitmap image now that it has been used
    DeleteObject(tHBM);

    //  stores the new width and height of the image
    mSpriteWidth            = tBM.bmWidth;
    mSpriteHeight           = tBM.bmHeight;

    //  sets the address of the bitmap surface to this temporary surface with the new bitmap image
    mBitmapSurface          = tDDS;
} 
```

**精灵::渲染**

```
/**
 *  renders the sprites surface to the back buffer
 *
 *  @param  pBackBuffer     surface to render the sprite to
 *  @param  pX              x co-ordinate to render to (default is 0)
 *  @param  pY              y co-ordinate to render to (default is 0)
 */
void Sprite::Render (LPDIRECTDRAWSURFACE7 &pBackBuffer, float pX, float pY)
{
    if (mSpriteWidth > 800)     mSpriteWidth = 800;

    RECT            tFrom;

    tFrom.left      = tFrom.top     =   0;
    tFrom.right     = mSpriteWidth;
    tFrom.bottom    = mSpriteHeight;

    //  bltfast parameters are (position x, position y, dd surface, draw rect, wait flag)
    //  pBackBuffer->BltFast (0 + DirectDraw::GetInstance()->ScreenWidth(), 0, mBitmapSurface, &tFrom, DDBLTFAST_WAIT);
    pBackBuffer->BltFast (static_cast<DWORD>(pX + DirectDraw::GetInstance()->ScreenWidth()), 
        static_cast<DWORD>(pY), mBitmapSurface, &tFrom, DDBLTFAST_WAIT);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:17:31.463

表面根本不是兼容的格式。

这是我现在在加载函数中调用的固定 copybitmap 函数：

```
extern "C" HRESULT
DDCopyBitmap(IDirectDrawSurface7 * pdds, HBITMAP hbm, int x, int y,
             int dx, int dy)
{
    HDC                     hdcImage;
    HDC                     hdc;
    BITMAP                  bm;
    DDSURFACEDESC2          ddsd;
    HRESULT                 hr;

    if (hbm == NULL || pdds == NULL)
        return E_FAIL;
    //
    // Make sure this surface is restored.
    //
    pdds->Restore();
    //
    // Select bitmap into a memoryDC so we can use it.
    //
    hdcImage = CreateCompatibleDC(NULL);
    if (!hdcImage)
        OutputDebugString("createcompatible dc failed\n");
    SelectObject(hdcImage, hbm);
    //
    // Get size of the bitmap
    //
    GetObject(hbm, sizeof(bm), &bm);
    dx = dx == 0 ? bm.bmWidth : dx;     // Use the passed size, unless zero
    dy = dy == 0 ? bm.bmHeight : dy;
    //
    // Get size of surface.
    //
    ddsd.dwSize = sizeof(ddsd);
    ddsd.dwFlags = DDSD_HEIGHT | DDSD_WIDTH;
    pdds->GetSurfaceDesc(&ddsd);

    if ((hr = pdds->GetDC(&hdc)) == DD_OK)
    {
        StretchBlt(hdc, 0, 0, ddsd.dwWidth, ddsd.dwHeight, hdcImage, x, y,
                   dx, dy, SRCCOPY);
        pdds->ReleaseDC(hdc);
    }
    DeleteDC(hdcImage);
    return hr;
} 
```

# c# - 如何在 C# 中有效地链接两个数据集？

> ID：11618360
> 
> 赞同：0
> 
> 时间：2012-07-23T18:32:38.923
> 
> 标签：c#, linq

我有以下包含评论的课程：

```
 public class Review
    {
        public string PartitionKey { get; set; }
        public string RowKey { get; set; }
    }

    IEnumerable<Review> review = // Filled with about 1000 reviews 
```

我还有一个包含主题的课程：

```
 public class Topics
    {
        public string PartitionKey { get; set; }
        public string RowKey { get; set; }
        public string Topic { get; set; }
    }

    IEnumerable<Topic> topic = // Filled with about 300 topics 
```

Review RowKey的前**六个**字符与 Topics 中的 RowKey 相同。在这两种情况下，分区键都是空字符串且未使用。

我在评论类中有大约 1000 条记录，在主题类中有 300 条记录。

有没有一种好方法可以使用 LINQ 结合 Review 和 Topics 来填充下面的新类：

```
 public class ReviewGrid
    {
        public string PartitionKey { get; set; }  // PartitionKey from Review
        public string RowKey { get; set; }  // RowKey from Review
        public string Topic { get; set; }   // This would be the Topic from Topics
    } 
```

如果我使用 LINQ 执行此操作，是否需要很长时间才能创建？有没有办法让它更快地创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:37:54.560

我认为您正在寻找加入 PartitionKey

```
var reviewGrids = (from r in review
                   join t in topic on r.RowKey.Substring(0, 6) equals t.RowKey
                   select new ReviewGrid
                   {
                     r.PartitionKey,  
                     r.RoWKey,
                     t.Topic,
                   }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:41:41.763

你试过这个吗？

```
IEnumerable<ReviewGrid> rivewGrid = (from r in review
                                    join t in topic on r.PartitionKey equals t.PartitionKey
                                    select new ReviewGrid {
                                       PartitionKey = r.PartitionKey,
                                       RowKey = r.RowKey,
                                       Topic  = t.Topic
                                    })AsEnumerable<ReviewGrid>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:41:50.320

```
var reviewGrid = r.Join(t,
                x => x.PartitionKey + x.RowKey.Substring(6),
                y => y.PartitionKey + x.RowKey,
                (x,y)=>new { x.RowKey,x.PartitionKey,y.Topic  } ); 
```

# iphone - iOS 普通表以编程方式根据日期对行进行分类

> ID：11618363
> 
> 赞同：0
> 
> 时间：2012-07-23T18:32:49.267
> 
> 标签：iphone, ios, uitableview, dynamic, classification

我需要一些关于表格的帮助，并且研究了许多类似于[http://www.mobisoftinfotech.com/blog/iphone/iphone-uitableview-tutorial-grouped-table/的示例/教程](http://www.mobisoftinfotech.com/blog/iphone/iphone-uitableview-tutorial-grouped-table/)

但是，我找不到适用于我的上下文的信息，并决定在这里寻求帮助！:)

我已经做了什么：

*   根据截止日期排列行（包含书籍详细信息）

*   创建包含截止日期的节标题

我需要做什么：

*   根据到期日对行进行相应分类
*   如果到期日期相似，则行将位于同一节标题下

谢谢大家！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:39:53.193

创建一个字典，其中每个条目在到期日的键和条目的值是书籍详细信息的数组。节数是日期数，每个节的行数是与该节日期匹配的数组的计数。

# jquery - jQuery Storage：如果存储值为 NaN，则设置默认值

> ID：11618364
> 
> 赞同：0
> 
> 时间：2012-07-23T18:32:52.190
> 
> 标签：jquery, local-storage, default-value

我正在使用[jQuery Storage](http://archive.plugins.jquery.com/project/html5Storage)来保存和恢复用户为音乐播放器设置的音量级别。每当他们拖动音量滑块时，我都会保存值...

```
this.setVolume = function(volume) {
    ...
    $.Storage.set('volume', volume + '');
    ...
}; 
```

然后我使用该值作为下次加载页面时滑块的初始值......

```
$("#volumeslider").slider({
    ...
    value: volume,
    ...
}); 
```

保存和恢复部分工作正常。问题是，如果您是全新用户并且尚未调整音量滑块，`volume`则没有价值。

所以我尝试使用`try`/`catch`块将音量`0.6`默认设置为，除非有保存的值要恢复：

```
var volume = 0.6;
try {
    volume = parseFloat($.Storage.get('volume'));
} catch (e) { } 
```

但相反，`volume`返回为`NaN`. 然后我意识到没有“错误”可以捕获，因为`NaN`这只是`parseFloat`存储中空值的结果。

那么：我将如何仅在存储中没有任何内容时设置默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:36:06.923

为什么要将值存储为字符串以将其转换回数字？
尽管如此

```
$("#volumeslider").slider({
    value: parseFloat($.Storage.get("volume") || 0.6),
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:15:51.263

使用[此问题](https://stackoverflow.com/questions/6678596/nan-is-a-number)作为参考解决了它：

```
if (!isNaN(parseFloat($.Storage.get('volume')))){
    var volume = parseFloat($.Storage.get('volume'));
} else {
    var volume = 0.6;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:27:07.167

比我原来的答案更清洁的解决方案：

```
var volume = parseFloat($.Storage.get('volume'));
if (!volume) {
    volume = 0.6;
    $.Storage.set('volume', volume + '');
} 
```

如果存在，则使用存储值；如果没有，请设置一个默认值并存储它。

# javascript - 在 Jquery 中手动触发事件

> ID：11618367
> 
> 赞同：2
> 
> 时间：2012-07-23T18:33:16.580
> 
> 标签：javascript, jquery

我在 JQuery 中动态创建一个输入框列表，并在检查它们时有一个事件通知我。

```
$("#myDiv").on("change",  "input[type='checkbox']" , function(){
   if(this.checked){
     alert("HERE");
     //...
   }else{
    alert("THERE");
    //...
   }
}); 
```

当页面加载并显示所有复选框时 - 我可以通过选中/取消选中来输入。问题是我希望最初根据后端逻辑的结果检查其中的一些。所以我想在初始加载后进入这个功能。

我看了看，`.trigger()`但是`.click()`，似乎都没有成功。

我可以采取其他途径来输入此回调吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:10:50.743

如果要在复选框上显示选中状态，只需将`checked`属性设置为`checked`

```
<input type='checkbox' checked='checked' /> 
```

如果你想触发`change();`事件，

```
$('<your_checkbox>').change(); 
```

或者

```
$('<you_checkbox>').trigger('change'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:49:01.287

在这种情况下，您可以创建一个命名函数而不是使用匿名函数，并在需要时调用它。

```
var myFunction = function(){
   if(this.checked){
     alert("HERE");
     //...
   }else{
    alert("THERE");
    //...
   }
}

$("#myDiv").on("change", "input[type='checkbox']", myFunction );

// triggering the function manually:
$("#myDiv input[type='checkbox']").each( myFunction ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:50:03.767

当 myDiv 更改时触发您的代码，并且您传递了一个复选框列表。这里的'this'是mydiv。为什么不使用：

```
$('input:checkbox').each(function(){// Now this is referring your checkbox}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:29:43.747

按名称单独定义您的函数，然后在页面为已检查的每个项目加载后调用它。

```
function onChange(this) {
    if(this.checked){
        alert("HERE");
        //...
    }else{
        alert("THERE");
        //...
    }
} 
```

您监控复选框更改的代码将变为：

```
$("#myDiv").on("change",  "input[type='checkbox']" , function() {
    onChange(this);
}); 
```

由于我不知道代码是什么样的，所以我编写了一些代码来打印复选框并定义默认选中哪些复选框。它是 PHP，但这个概念应该适用于任何服务器端语言。

```
<select>
<?php
$items = array(
    'value1' => 'text1',
    'value2' => 'text2',
    'value3' => 'text3'
);

$selected = array(
    'value1' => true,
    'value3' => true
);

foreach ($items as $value => $text) {
    $selectedAttr = isset($selected[$value]) && $selected[$value]) ?
        " selected='selected'" : '';
    echo "<option value='$value'$selectedAttr>$text</option>";
}
?>
</select> 
```

您需要打印运行您希望为每个选定选项执行的函数的 javascript。对于我使用的复选框示例，您想要的最终结果是：

```
$().ready(function() {
    var defaultSelected = [ "[option name='value1']" , "[option name='value3']" ];

    for (var i=0; i < defaultSelected.length; i++) {
        $(defaultSelected[i]).each(onChange);
    }
}); 
```

您需要在服务器端生成 javascript：

```
<?php

// $selected was defined in the previous code section

// Create selectors that will select each checkbox option
$selectors = array();
foreach ($selected as $s) {
    array_push($selectors, "[option name='$s']");
}

// Produces string: [ "[option name='value1']" , "[option name='value3']" ]
$jsSelectorArray = '[ "' . implode('" , "', $selectors) . '" ]';

echo "
$().ready(function() {
    var defaultSelected = $jsSelectorArray;

    for (var i=0; i < defaultSelected.length; i++) {
        $(defaultSelected[i]).each(function() {
            onChange(this);
        });
    }
});
";

?> 
```

# c# - 十六进制的 String.Format

> ID：11618387
> 
> 赞同：42
> 
> 时间：2012-07-23T18:34:27.203
> 
> 标签：c#, string, formatting, hex

使用下面的代码，着色总是给出#DDDD。绿色，红色和空间值 int 他如何解决这个问题？

```
string colorstring;
int Blue = 13;
int Green = 0;
int Red = 0;
int Space = 14;
colorstring = String.Format("#{0:X}{0:X}{0:X}{0:X}", Blue, Green, Red, Space); 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-23T18:35:44.087

in 中的数字`0`是`{0:X}`指列表或参数中的位置。在这种情况下`0`，意味着使用第一个值，即`Blue`. 用于`{1:X}`第二个参数 ( `Green`)，依此类推。

```
colorstring = String.Format("#{0:X}{1:X}{2:X}{3:X}", Blue, Green, Red, Space); 
```

* * *

格式参数的语法在[文档](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)中描述：

> ## 格式化项目语法
> 
> 每个格式项采用以下形式，由以下组件组成：
> 
> ```
> { index[,alignment][:formatString]} 
> ```
> 
> 需要匹配的大括号（“{”和“}”）。
> 
> **指数成分**
> 
> 强制索引组件，也称为参数说明符，是一个从 0 开始的数字，用于标识对象列表中的相应项。即参数说明符为 0 的格式项格式化列表中的第一个对象，参数说明符为 1 的格式项格式化列表中的第二个对象，依此类推。
> 
> 多个格式项可以通过指定相同的参数说明符来引用对象列表中的相同元素。例如，您可以通过指定如下复合格式字符串以十六进制、科学和数字格式格式化相同的数值：“{0:X} {0:E} {0:N}”。
> 
> 每个格式项都可以引用列表中的任何对象。例如，如果有三个对象，您可以通过指定如下复合格式字符串来格式化第二个、第一个和第三个对象：“{1} {0} {2}”。格式项未引用的对象将被忽略。如果参数说明符指定了对象列表边界之外的项目，则会导致运行时异常。
> 
> **对齐组件**
> 
> 可选的对齐组件是一个有符号整数，表示首选的格式化字段宽度。如果alignment 的值小于格式化字符串的长度，则忽略对齐，并将格式化字符串的长度用作字段宽度。如果对齐为正，则字段中的格式化数据右对齐，如果对齐为负，则左对齐。如果需要填充，则使用空格。如果指定了对齐方式，则逗号是必需的。
> 
> **格式化字符串组件**
> 
> 可选的 formatString 组件是适合被格式化的对象类型的格式字符串。如果对应对象是数值，则指定标准或自定义数字格式字符串；如果对应对象是 DateTime 对象，则指定标准或自定义日期和时间格式字符串；如果对应对象是枚举值，则指定枚举格式字符串。如果未指定 formatString，则使用数字、日期和时间或枚举类型的通用 ("G") 格式说明符。如果指定了 formatString，则需要冒号。

请注意，在您的情况下，您只有索引和格式字符串。您没有指定（也不需要）对齐组件。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-08-02T14:30:59.357

您还可以通过在 后面添加一个数字来填充左侧的字符`X`，例如：`string.format("0x{0:X8}", string_to_modify)`，这会产生`"0x00000C20"`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-03T09:37:39.180

**将组合的 UInt32 颜色`Value`转换为 .NET 中的 CSS**

我知道这个问题适用于 3 个输入值 ( `red` `green` `blue`)。但可能存在您已经拥有组合 32bit 的情况`Value`。看起来您想将数据发送到一些 HTML CSS 渲染器（因为 #HEX 格式）。实际上 CSS 希望你在这里打印 6 个或至少 3 个零填充的十六进制数字。所以`#{0:X06}`或`#{0:X03}`将需要。由于一些奇怪的行为，这总是打印 8 位而不是 6 位。

通过以下方式解决此问题：

```
String.Format("#{0:X02}{1:X02}{2:X02}", (Value & 0x00FF0000) >> 16, (Value & 0x0000FF00) >> 8, (Value & 0x000000FF) >> 0) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-30T15:51:33.430

更普遍。

```
byte[] buf = new byte[] { 123, 2, 233 };

string s = String.Concat(buf.Select(b => b.ToString("X2"))); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-13T08:34:08.220

如果我们内置了将整数值转换为颜色的函数，那么为什么要担心。

```
string hexValue = string.Format("{0:X}", intColor);

Color brushes = System.Drawing.ColorTranslator.FromHtml("#"+hexValue); 
```

# perl - Gtk2::SimpleList 的布尔列：如何捕获信号？

> ID：11618389
> 
> 赞同：1
> 
> 时间：2012-07-23T18:34:36.963
> 
> 标签：perl, gtk

如何在 Gtk2::SimpleList 中捕获布尔切换复选框的切换？

我知道复选框本身是一个 Gtk2::CellRendererToggle，它发出一个`toggled`信号，但我如何访问它并设置一个信号处理程序？

我什至如何在 SimpleList 小部件中捕获数据编辑事件？

```
use Glib qw(TRUE FALSE);
use Gtk2 '-init';
use Gtk2::SimpleList;

my $slist = Gtk2::SimpleList->new(
    'Bool Field'    => 'bool',
    'Text Field'    => 'text'
);
$slist->set_column_editable(1, TRUE);

@{$slist->{data}} = (
    [ TRUE, 'text' ],
    [ FALSE, 'more text' ]
);

my $window = Gtk2::Window->new;
$window->set_border_width(8);
$window->signal_connect(destroy => sub { exit(0); });
$window->add($slist);
$window->show_all;

Gtk2->main; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:14:05.273

在深入到 SimpleList.pm 之后，我想出了下面的代码，它似乎可以工作。虽然它不是很直观。

```
# bool column
my $col = $slist->get_column(0);
my $r = $col->get_cell_renderers;
$r->signal_connect(toggled => sub {
    my ($widget, $value, $args) = @_;
    print "checkbox toggled to $value\n";
});

# text column
($slist->get_column(1))->get_cell_renderers->signal_connect(
    edited => sub {
        my ($widget, $text_path, $new_text, $args) = @_;
        print "new text is $new_text\n";
    }
); 
```

# python - 芹菜 - 有顺序任务而不是并发？

> ID：11618390
> 
> 赞同：4
> 
> 时间：2012-07-23T18:34:38.100
> 
> 标签：python, rabbitmq, celery, django-celery

我有一些使用亚马逊 API 的任务，限制为 1 个请求/秒。

因此，我想对使用 Amazon API 的任务进行分组，并将它们排成一个顺序队列。

我所想的只是如何将队列与每个任务相关联。但不知道如何删除特定队列中的并发。

有任何想法吗？

非常感谢！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T13:22:42.243

单个worker从一个队列中消费，并发等于1，确保任务将按顺序处理。换句话说，您可以创建一个特殊的队列并仅运行一个并发等于一的 celery worker：

```
celery -A tasks worker -Q amazon_queue -c 1 
```

并将任务提交到该队列：

```
tasks.add.apply_async(args=[1,2], kwargs={}, queue='amazon_queue') 
```

或者对某些任务类型使用[自动路由](http://docs.celeryproject.org/en/latest/userguide/routing.html#automatic-routing)。

# r - ggplot：geom_text 打印的文本不清楚

> ID：11618392
> 
> 赞同：31
> 
> 时间：2012-07-23T18:34:43.443
> 
> 标签：r, ggplot2

使用 geom_text 打印的文字不是很清楚。我怎样才能让它更清楚？

```
data = data.frame(rnorm(1000))
colnames(data) = "numOfX"
m <- ggplot(data, aes(x=numOfX))
m + geom_histogram(colour = "blue", fill = "white", binwidth = 0.5) +
  annotate("segment", x=10,xend=10,y=20,yend=0,arrow=arrow(), color="blue") +
  geom_text(aes(10, 30, label="Observed \n value"), color = "blue") 
```

![在此处输入图像描述](../Images/3f5a8824eebf1273a952d65b1c2d2c66.png)

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-23T18:55:22.170

用于`annotate`文本和箭头：

```
m + geom_histogram(colour = "blue", fill = "white", binwidth = 0.5) +
  annotate("segment", x=10,xend=10,y=20,yend=0,arrow=arrow(), color="blue") +
  annotate("text", x=10, y=30, label="Observed \n value", color = "blue") 
```

![在此处输入图像描述](../Images/ae2e00e2b3cf722c4e9cd301d2140b58.png)

* * *

原因是`geom_text`为数据框中的每一行数据`annotate`绘制了文本，而只绘制了一次文本。正是这种过度绘制导致了粗体、像素化的文本。

~~我相信这个问题最近得到了回答。我会尝试找到一个参考：~~ 最近有人问了一个类似的问题：

*   [ggplot2：geom_text() 生成的锯齿状、质量差的文本是否有修复？](https://stackoverflow.com/questions/10952832/ggplot2-is-there-a-fix-for-jagged-poor-quality-text-produced-by-geom-text)
*   [如何很好地注释 ggplot2（手动）](https://stackoverflow.com/questions/2409357/how-to-nicely-annotate-a-ggplot2-manual/9081281#9081281)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-10T23:46:43.900

扩展 Dave Gruenewald 的评论，`geom_text`现在可以`check_overlap`选择。请参阅[tidyverse 参考](https://ggplot2.tidyverse.org/reference/geom_text.html)：

> `check_overlap`-- 如果`TRUE`，则不会绘制与同一层中先前文本重叠的文本。`check_overlap`发生在绘制时间和数据的顺序。因此调用前应按标签列排列数据`geom_text()`。请注意，此参数不受`geom_label()`.

```
library(ggplot2)
data = data.frame(rnorm(1000))
colnames(data) = "numOfX"
m <- ggplot(data, aes(x=numOfX))
m + geom_histogram(colour = "blue",
                   fill = "white",
                   binwidth = 0.5) +
  annotate("segment",
           x = 10, xend = 10,
           y = 20, yend = 0,
           arrow = arrow(), color="blue") +
  geom_text(aes(10, 30, label="Observed \n value"),
            color = "blue", check_overlap = T) 
```

[![在此处输入图像描述](../Images/2cfa7366dece4a6ec0455ce77e9d8279.png)](https://i.stack.imgur.com/cGL5R.png)

# javascript - 如何使用以下结构定义一个空的javascript对象，以便我可以动态地将数据插入其中？

> ID：11618394
> 
> 赞同：0
> 
> 时间：2012-07-23T18:34:46.850
> 
> 标签：javascript, auto-populate

我正在使用 JIT Infovis 堆叠或单值饼图来进行一些数据可视化。堆叠饼图采用对象“obj”，具体具有以下结构：

这是 jsonObj 的硬编码版本：

```
 var obj = {
        // labelID is unique in each case and may be multiple or just one
        'labelID': ['pVal'],
        'values': [{ //labelName is unique in each case and will only be one
            'labelName': 'name1',
            //there may be multiple or just one "values"
            //ex, 'values': [80, 40, 15, 10]
            'values': 80
        }, {
            'labelName': 'name2',
            'values': [20]
        }, {
            'labelName': 'name3',
            'values': [38]
        }, {
            'labelName': 'name4',
            'values': [58]
        }]
    }; 
```

我正在尝试使用返回给用户的搜索数据动态填充“obj”。但是我无法使用上述特定结构创建一个空的“obj”来动态填充数据。我尝试了几次，但认为我没有正确创建它们。我尝试将三个值动态填充到此“obj”中，但无法将其搂在怀里。`chartID[m], chartArrName[m], chartVal[m]`.

我需要一个与上面定义的结构相对应的正确空“obj”。

```
 var "obj" = {
        label: ['pVal'],
        values: [{
            label: [],
            values: []
        }]
    };
    for (m = 0; m <= chartArrID.length - 1; m++) {
        obj.values[m].label += chartArrName[m];
        obj.values[m].values += parseFloat(chartArrVal[m]);
        //json.push({label: chartArrName[m], values: parseFloat(chartArrVal[m])});
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:38:21.003

这不是 JSON 对象。JSON 是一种轻量级的数据交换格式。您只是使用对象初始值设定项语法来创建对象。你可以添加你想要的苍蝇。

```
var myObj = {};
myObj.name = "foo";
myObj.books = [ "one", "two" ];
myObj.emptyField = null;
myObj.emptyArray = [];
myObj["anotherField"] = "bar";   // this works too

myObj.anotherArray = [];

myObj.anotherArray[0] = {};  // you need to insert something in the first position!
myObj.anotherArray[0].label = "aaa";
myObj.anotherArray[0].value = "bbb";
myObj.anotherArray[0].xyz = "ccc";

myObj.anotherArray[1] = {};  // in the second too, of course!
myObj.anotherArray[1].label = "ddd";
myObj.anotherArray[1].value = "eee";
myObj.anotherArray[1].xyz = "fff"; 
```

# ms-access - 在更改事件处理程序中获取文本框值

> ID：11618395
> 
> 赞同：5
> 
> 时间：2012-07-23T18:34:51.887
> 
> 标签：ms-access, vba

我编写了一个表单，它在**将文本输入**到文本框中时异步执行查询，但是我似乎有些随意地抛出了以下错误：“除非控件具有焦点，否则您无法引用控件的属性或方法。”

直接相关的代码是：

```
Dim UpdateRequested As Boolean
Dim qryText As String

.
.
.

Private Sub txtBox_Change()
    qryText = txtBox.Text
    UpdateRequested = true
End Sub 
```

省略号中的某些地方是处理动态加载 ADODB 记录集、填充本地表和刷新子表单的代码。但是，即使我禁用此代码，问题仍然存在：有时我会收到错误消息。有时我没有。

通过关闭数据库并重新打开它，这似乎是持久的。每次它再次开始工作时，都是因为我一直在调试器中乱搞代码，但我不确定究竟是什么导致它神奇地“正常工作”或者是什么导致它根本不工作。

# 更新

为了让事情更令人费解，我添加了几个简单的事件处理程序：

```
Private Sub txtBox_GotFocus()
    MsgBox "Got focus"
End Sub

Private Sub txtBox_LostFocus()
    MsgBox "Lost focus"
End Sub 
```

我运行表格。我点击测试框。我收到“获得焦点”消息。一旦我输入，我就会看到如上所述的错误。如果我重新打开表单，我可以在有问题的文本框（它本身是未绑定的）和子表单中的绑定文本框之间单击，并按预期看到“获得焦点”和“失去焦点”消息。此外，显示当前值为“Screen.ActiveControl.Name”的消息框会在访问 Text 属性之前显示预期的名称。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-05T15:38:58.743

我知道这是一个旧线程，但这是我遇到同样问题时发现的第一个线程。除了 Kaganar 自己的解决方案之外，其他答案都没有帮助，它为我指明了正确的方向。我猜人们无法重现错误的原因是 Kaganar 的描述中缺少一些重要的细节：

1.  文本框位于表单页眉（或页脚）中。
2.  表格不允许添加。

因为我相信完整的答案是......

**当窗体有记录源且没有要编辑的记录时，任何控件的 Text 属性都不可访问**

我认为 Access 的一部分没有意识到文本框的存在:) 要了解这可能是如何发生的......

*   将未绑定的TextBox放在表单的详细信息中
*   不允许添加
*   设置记录源不返回记录
*   打开表格。

嘿，快！没有文本框。

返回记录，或允许添加，或删除记录源，等等！有你的文本框和它的文本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T19:57:20.820

`txtFoo`我在表单中添加了一个名为的文本框。这是其更改事件的过程。

```
Private Sub txtFoo_Change()
    Debug.Print "Value: " & Nz(Me.txtFoo.value, "*Null*") & _
        "; Text: " & Nz(Me.txtFoo.Text, "*Null*")
End Sub 
```

然后，`txtFoo`当我在 中键入“abc”时，没有任何内容（IOW 其值为 Null）`txtFoo`，这就是我在“立即”窗口中看到的内容。

```
Value: *Null*; Text: a
Value: *Null*; Text: ab
Value: *Null*; Text: abc 
```

基本上，我添加到文本框中的每个字符都会触发其更改事件并将文本框的当前内容打印到即时窗口。

据我了解，你想做类似的事情......除了你想要一个不同的动作来代替`Debug.Print`. 再看一下您的更改事件过程并将其与我的进行比较。

```
Private Sub txtBox_Change()
    qryText = txtVendorName.Text
    UpdateRequested = true
End Sub 
```

这是名为 的控件的更改事件`txtBox`。在该过程中，您引用`.Text`名为 的控件的属性`txtVendorName`。但是`txtBox`，在其更改事件代码运行时是活动控件...因此您无法访问 的`.Text`属性，`txtVendorName`因为它不是活动控件。

鉴于此问题仅出现在一种形式上，而不出现在其他新形式上，我怀疑问题形式已损坏。阅读此 SO 问题的 2 个答案并尝试反编译以解决损坏问题：[如何反编译和重新编译](https://stackoverflow.com/questions/3266542/ms-access-how-to-decompile-and-recompile)。通常建议将反编译作为开发过程中的常规做法。

您还可以使用未记录的`Application.SaveAsText`方法将表单保存为文本文件。删除不良表格，并用于`Application.LoadFromText`导入保存的文本副本。

确保您有 db 文件的备份副本，以防出现任何问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T18:43:07.600

若要设置或返回控件的 Text 属性，该控件必须具有焦点，否则会发生错误。
要将焦点移动到控件，您可以使用 `txtBox.SetFocus`或`DoCmd.GoToControl "txtBox"`。

此外，Text 属性并不总是可用：
当控件具有焦点时，Text 属性包含当前在控件中的文本数据；Value 属性包含控件上次保存的数据。当您将焦点移到另一个控件时，控件的数据会更新，并且 Value 属性设置为这个新值。在控件再次获得焦点之前，Text 属性设置将**不可用。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T21:08:39.353

该表单有一个挥之不去的数据源。我不确定为什么这会导致上述行为，特别是考虑到文本框控件未绑定，但是由于删除数据源，文本框的行为符合预期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-17T12:19:50.310

你说**“有点武断”**我认为如果一切都很好，当你的表单记录集为空时，你必须得到错误。

事实上，这是 Access 中的一个已知错误，如果满足以下条件，则可能会发生此错误：a) 控件位于表单页眉或表单页脚部分 b) 表单被过滤，使得没有记录匹配（或没有记录） c) 不能添加新记录。

在这种情况下，表单的详细信息部分变为空白。控件仍然可见，但 Access 真的很困惑，可能会抛出您描述的错误。

更多信息： [http ://allenbrowne.com/bug-06.html](http://allenbrowne.com/bug-06.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-03-20T03:09:52.320

我知道我的答案已经过时了。然而，你只能设置焦点三遍。在标题中的 TextBox 上，在详细空间中的任何 texbox 上，再次在标题中的 TextBox 上。我使用访问 2003。

# wso2 - 如何在 wso2 ESB 中安装 mashup 功能

> ID：11618398
> 
> 赞同：1
> 
> 时间：2012-07-23T18:34:59.560
> 
> 标签：wso2, wso2esb, esb, mashup

我对 WSO2 相当陌生。

我有一个安装了 WSO2 的 linux 盒子。现在我想安装混搭功能。是否可以将混搭安装为 ESB 的附加组件？

谢谢，美联社

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:38:16.080

您可以通过以下链接找到有关将功能安装到任何碳服务器的特定主题的有用讨论。[如何安装多个 WSO2 产品？](https://stackoverflow.com/questions/9690766/how-do-you-install-multiple-wso2-products)

问候， 普拉巴斯

# php - 使用 xampp 在 <<<_END 上的 PHP 错误

> ID：11618400
> 
> 赞同：0
> 
> 时间：2012-07-23T18:35:27.863
> 
> 标签：php, xampp

```
$row = mysql_fetch_row($result);

echo <<<_END 
<pre>
<ul> <li> $row[2] <li> <ul>
</pre>
_END; 
```

错误是：

```
Parse error: syntax error, unexpected '<<' (T_SL) in C:\xampp\htdocs\mobile\home.php on line 64 
```

我不明白出了什么问题？_END: 在最左边，没有空格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:40:03.753

我复制了您的代码并发现：您在`<<<_END`;) 之后有一个空格，并且它可以工作。

作为旁注：您不应该使用这样的抽象标识符，如`END`, 或`STRING`, 或这样的。使用*描述*内容的标识符，例如（在您的情况下）`HTML`。一些 IDE（如 PHPStorm）甚至可以根据使用的标识符突出显示代码。

# python - Python：使用 eval() 将字符串转换为 numpy 数组的名称时出错

> ID：11618401
> 
> 赞同：0
> 
> 时间：2012-07-23T18:35:28.957
> 
> 标签：python, numpy, eval

我有两个`numpy`名为的数组`dec_pair`，`dec_community`在一个名为 的模块中`config.py`，初始化为零：

```
dec_pair = numpy.zeros(200)
dec_community = numpy.zeros(200) 
```

现在，我正在尝试从其他模块访问它们，例如`roc.py`，它们的名称是根据输入变量形成的，即

```
import config
def dosomething(name):
    local_name = 'config.py'+name
    eval(local_name)[i:] += 1 
```

哪里`name`可以`pair`或`community`。问题是，`eval(local_name)`返回数组的长度，`numpy`即`200`这里而不是数组本身，这给了我这个错误：

> ValueError：无法对 0 维数组进行切片

但是，当我在 python 解释器上做同样的事情时，它运行顺利：

```
>>> dec_pair = numpy.zeros(5)
>>> name = 'pair'
>>> local_name = 'dec_'+name
>>> eval(local_name)
array([ 0.,  0.,  0.,  0.,  0.]) 
```

关于我做错了什么以及正确的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T18:41:26.507

呸。

首先，不要使用`eval()`. 你会过得很糟糕。

其次，只需导入配置！在`roc.py`：

```
def dosomething(numpy_array):
    return somefunction(numpy_array) 
```

在其他一些模块中：

```
import roc
import config
someresult = roc.somefunction(config.dec_pair) 
```

编辑：重新阅读您的问题后，我相信您正在尝试使用全局值。这几乎总是表明设计不佳。您应该将“全局”变量的使用限制在单个脚本中，并使用函数来传递这些对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T18:54:39.130

您尝试做的事情看起来是个**坏主意**（尽管我很难弄清楚您要做什么）。

我的第一直觉是说你可能想要`numpy.zeros(200)`而不是`numpy.array(200)`在你的配置文件中。

其次，如果这些东西被导入，您可能会使用`globals()[local_name]`or`vars(config)[local_name]`来获取您的数据，而不是`eval`，尽管这仍然是绝对不好的做法（换句话说，**请不要这样做 - 请参阅第 3 点**）。

第三，当你事先不知道变量的名称时，**你应该使用字典开头，** 例如

```
#config.py
dec={'pair':np.zeros(200), 'community':np.zeros(200)} 
```

现在您只需在您的函数中访问它们：

```
a=config.dec[name]
a[i:]+=1 
```

如果您想要更轻松地处理`dec_pair`and `dec_community`，您可以这样做`config.py`：

```
dec_pair=np.zeros(200)
dec_community=np.zeros(200)
dec={'pair':dec_pair, 'community':dec_community} 
```

尽管我可能会说最好将引用的数据仅保留在 1 个位置，因此我会告诫不要这样做，除非您确实**需要**保持 API 一致或其他什么。

最后，您还没有提到变量的值`i`是什么——访问当前命名空间之外的变量通常是有风险的，而命名的变量`i`可能风险更大。

# c# - Asp.Net MVC 中的实体框架

> ID：11618403
> 
> 赞同：2
> 
> 时间：2012-07-23T18:35:40.470
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我的 ASP.Net MVC 应用程序必须在运行时连接到多个数据库。我可以重载我的类以在运行时接受连接字符串，如下所示

```
class MyClassDBContext:DbContext
{
  public MyClassDBContext(string str) : base(str)
  {
    this.Database.Connection.ConnectionString = str;
  }
} 
```

目前，我正在从数据库表中检索此连接字符串。我的工作流程如下

1.  网站使用存储在 web.config 中的凭据连接到默认数据库
2.  网站查询默认数据库以获取其他数据库的连接字符串。
3.  网站通过在运行时提供连接字符串连接到其他数据库

我现在面临的问题是保持我的代码干净。每次我需要数据库 2 的连接字符串时，我都必须在默认数据库中查找它。有没有更清洁的方法来做到这一点？我考虑将连接字符串存储在配置文件数据中，但我不确定这是否是个好主意。我网站的每个用户最多需要连接到 2-3 个不同的数据库，具体取决于他们的凭据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:04:43.500

我会亲自将所有连接字符串放在您的 App.Config 文件中并使用简单的 IOC 实现。

实际上，Nuget 的 ninject 包可能非常适合您的需求。

这就是我的意思。希望这使您的代码干净。我在以前的项目中使用了完全相同的模式，并且效果很好。

您可以更进一步，在您的 global.asax 中创建一个服务定位器并注册服务。如果您对此感兴趣，请告诉我。另请查看ninject。

```
public interface IService() 
{ 
  string GetConnectionString(); 
  void DoStuff(); 
}

public class DBServiceOne : DbContext, IService
{
  protected string GetConnectionString() 
  {
    return ConfigurationManager.AppSettings["DBServiceOneConnectionString"]
  }

  public DBServiceOne(string str) : base(str)
  {
     this.Database.Connection.ConnectionString = GetConnectionString()
  }

   public void DoStuff() { //logic goes here }
}

public class DBServiceTwo : DbContext, IService
{

    public DBServiceTwo(string str) : base(str)
    {
      this.Database.Connection.ConnectionString = GetConnectionString();
    }

    protected string GetConnectionString() 
    {
      return ConfigurationManager.AppSettings["DBServiceTwoConnectionString"]
    }

    public void DoStuff() { //logic goes here }
}

public class DBServiceThree : DbContext, IService
{

   public DBServiceThree(string str) : base(str)
   {
     this.Database.Connection.ConnectionString = GetConnectionString();
   }

   protected string GetConnectionString() 
   {
     return ConfigurationManager.AppSettings["DBServiceThreeConnectionString"]
   }

   public void DoStuff() { //logic goes here }
} 
```

现在实现——在你的控制器上使用构造函数注入

```
//This could be in your home controller

public class HomeController : AsyncController
{
    private IService DBOneService;
    private IService DBTwoService;
    private IService DBThreeService;

   public HomeController(IService one, IService two, IService three)
   {
      DBOneService= one;
      DBTwoService = two;
      DBThreeService = three;
   }

  public HomeController() : this(new DBServiceOne(), new DBServiceTwo(), new DBServiceThree()) {}

public ActionResult Index() {
   DBOneService.DoStuff(); //here you'd want to return a list of data and serialize down with json or populate your razor template with it. Hope this helps!

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:58:43.253

我有一个稍微不同的问题。我连接的数据库取决于产品导入的状态。在导入期间，数据库会被附加和分离。当前可用的数据库存储在“默认数据库”中。

我遇到的主要问题是我必须关闭连接池，否则在分离数据库并再次附加它们之后存在无效的连接状态。

这对您来说可能不是问题。

除此之外，我将当前的 Connectionstring 存储在应用程序状态中。仅在每 60 秒后，我才再次查询“默认数据库”。您必须通过使用锁定来注意多线程问题。

# linux - 如何在 Tcl 中安装软件包？

> ID：11618404
> 
> 赞同：3
> 
> 时间：2012-07-23T18:35:42.730
> 
> 标签：linux, package, tcl, package-managers

我正在尝试`critlib`在我的机器上安装（[http://equi4.com/critlib/](http://equi4.com/critlib/)），以便我可以在 Tcl 中动态创建 zip 文件。

问题是我不知道如何安装 Tcl 包。你放文件夹的地方有吗？有没有`yum`我可以使用的命令？

我浏览了各种 Tcl 初学者指南并阅读了关于包的部分，但每个来源似乎总是假设我缺乏知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:08:36.640

是的，有一些目录。要列出它们，请执行`tclsh`并输入

```
join $auto_path \n 
```

在每个目录及其子目录（但不是子子目录）中，tcl 查找一个名为`pkgIndex.tcl`.

因此，如果您有一个存档，请将其解压缩，查看它的`pkgIndex.tcl`位置，然后将该文件所在的目录复制到其中一个路径`$auto_path`。问题只是从步骤 1 的输出中选择适当的路径。

如果您不确定合适的目录是什么，我建议您将第一步的输出编辑到您的问题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-17T07:14:01.387

如果您使用的是 vscode 并制作了虚拟环境，那么您可以按如下方式执行“pipenv install tcl”

# ruby-on-rails - Rails select_tag - 如何发送ajax请求？

> ID：11618405
> 
> 赞同：2
> 
> 时间：2012-07-23T18:35:41.907
> 
> 标签：ruby-on-rails, ruby, ajax

`select_tag`从Rails 3.1中选择（更改）选项后，我想发送 AJAX 请求。我们可以使用`:remote=>true`或`:onchange => remote_function()`有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T16:15:22.803

你绝对应该用 jQuery 来做这件事（用一种不显眼的方法来保持事情尽可能干净）。在你的 .js 文件上，你应该有这样的东西......

```
$('#select_tag_id').change(function(){
  $ajax({
    url: "remote_action_in_your_controller",
    type: "GET",
    data: {select_tag_value: $('#select_tag_id option:selected').text()},
  })
}); 
```

如果您只想在控制器上调用远程操作，这应该很简单（请注意，我传递了所选选项的值，因为您可能希望该值对其执行某些操作）。如果您需要在执行 ajax 调用后执行某些操作，请使用该`succes`选项。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:43:10.600

您必须使用 JQuery 来完成。像这样，当文件准备好时，：

```
$('#your_select_tag').change(function() {
  $.ajax({ type: "GET",   
           url: "http://your_url/",  
           success : function(text) {
              alert('success')
           }
  });
}); 
```

请参阅文档：[http](http://api.jquery.com/change/) ://api.jquery.com/change/和[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-14T19:58:31.647

`remote: true`添加`data-remote="true"`到 html 元素。只需将其添加为选项中的 CSS 类`select_tag`即可。

```
<%= select '', '',  @coaches, {}, { data: {remote: true } } %> 
```

请注意，`data: { remote: true }`使用它是因为`"data-remote"`它对 Ruby 不友好。

# xcode - Xcode 工作区与嵌套项目

> ID：11618407
> 
> 赞同：36
> 
> 时间：2012-07-23T18:35:53.997
> 
> 标签：xcode, project, code-organization

我不明白如何使用 Xcode 工作区来组织相互依赖的项目。例如，我看到很多开发人员创建的工作区结构如下所示：

```
工作区
|-- 应用
|-- 通用库
|-- 另一个公共库

```

这有什么好处？如果有人直接打开“App”项目，他们不会无法实际构建应用程序吗？他们必须意识到工作空间的存在具有必要的依赖关系。

在我看来，更好的方法是使用这样的嵌套项目：

```
应用程序
|-- 图书馆
| |-- 通用库
| |-- 另一个公共库

```

则不存在无法构建的项目。它似乎也更符合 Git 的子模块理念。

我看到的工作空间的唯一用途是对不相互依赖的通用项目进行分组。我想听听其他人对此的看法，因为我可能遗漏了一些东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-23T19:30:35.650

当我想组合项目同时保持项目独立性时，我会使用工作区。

我使用工作区的一个例子是一系列教程项目，这些项目从非常简单到更复杂。每个项目都可以作为一个独立的项目运行，但是将它们组合在一个工作区中有助于我组织整个项目。

在另一个例子中，我有一个为客户开发的应用程序。该应用程序既可以作为独立应用程序，也可以作为整个项目中的模块使用。独立项目可以构建独立应用程序。另一个应用程序使用包含两个项目的工作区。应用程序的模块版本是根据特殊方案构建的，如果不使用工作区，则无法构建此组合应用程序。

上述两种情况的一个转折点是构建文件夹的存储位置。我必须更改 Xcode 首选项以将构建产品放入教程项目组的唯一文件夹中，在其他应用程序设置中为模块使用通用构建文件夹。

在其他情况下，我有很多带有嵌入式项目的项目。在这些情况下，图书馆项目是稳定的。我不尝试进一步开发图书馆项目，因此它们只是该项目的另一种资源。我发现在我的项目资源的文件系统组织在某种程度上反映了我的 Xcode 项目的组织的情况下，工作起来更容易。所以这些库项目被复制到主项目的文件层次结构中。如果我正在开发库并在多个项目中使用它们，那么使用工作区是有意义的。为了方便起见，我经常不打扰。

有时我什至将工作空间与包含嵌入式项目的项目结合起来。

所以我的观点是，无论是组织工具、嵌入式项目还是工作空间，都有其优点和问题。我根据具体情况选择使用其中一种（或组合）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T20:44:57.910

我们将嵌套项目添加到主项目的框架中，因此我们可以将它们“包含”到 .framework 产品中。

```
Main
|-- Main
|-- MainTests
|-- Frameworks
|   |-- CommonLibrary.xcodeproj
|   |-- AnotherCommonLibrary.xcodeproj
|   |-- UIKit.framework
|   |-- Foundation.framework
|   |-- CoreFoundation.framework
|-- Products 
```

请参阅[Jeff Verkoeyen](https://github.com/jverkoey/iOS-Framework)的这篇很棒的教程，了解如何将通用框架添加到项目中。一开始并不容易，但继续努力，你就会掌握它的窍门。

# javascript - 如何在 js 文件中使用 Google API？

> ID：11618409
> 
> 赞同：0
> 
> 时间：2012-07-23T18:35:54.680
> 
> 标签：javascript, google-api

我想在 js 文件中使用 Google API，我该如何使用它？我尝试直接在 js 文件中使用 google.load() 但被告知未定义 google。然后我尝试使用以下代码

```
var s = document.createElement('script'); 
```

但被告知文档未定义。我应该怎么做才能在 js 文件中使用 google api？谢谢你。

这里我要使用的是[Google Feed API](https://developers.google.com/feed/)。

我使用的html代码是

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>
            Example
        </title>
        <script src="https://www.google.com/jsapi" type="text/javascript"></script>
    </head> 

    <body>
        <div>
            <p id="computation_results">please wait, computing … </p>
        </div>
        <script>
            var worker = new Worker('numberworker.js');
            worker.postMessage({first:123,second:456});
            worker.onmessage = function (event)
            {
                alert(event.data);
                document.getElementById('computation_results').textContent = event.data;
            };
        </script>
    </body>
</html> 
```

我想使用api的js文件是

```
// Our callback function, for when a feed is loaded.
function feedLoaded(result) {
if (!result.error) {
    var container = document.getElementById("content");
    container.innerHTML = '';
    for (var i = 0; i < result.feed.entries.length; i++) {
      var entry = result.feed.entries[i];
      var div = document.createElement("div");
      div.appendChild(document.createTextNode(entry.title));
      container.appendChild(div);
    }
  }
}
function OnLoad() {
  var feed = new google.feeds.Feed("http://www.digg.com/rss/index.xml");
  feed.load(feedLoaded);
}

onmessage = function (event) 
{ 
    var fileref=document.createElement('script');
    var filename="https://www.google.com/jsapi";
    fileref.setAttribute("type","text/javascript");
    fileref.setAttribute("src", filename);
    document.getElementsByTagName("head")[0].appendChild(fileref);
//  google.load("feeds", "1");
//  google.setOnLoadCallback(OnLoad);
    var first=event.data.first; 
    var second=event.data.second; 
    postMessage("Work done! "+ " "+first+" "+second);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:51:07.427

我会检查以确保您的 html 首先经过验证，或者提供指向测试文件的链接。任何最轻微的错误都可能导致您遇到任意数量的错误。我在一个文件中尝试了以下代码，用标签包装，并且能够加载 api。要使用 javascript 加载 javascript 文件，您将使用以下内容

```
var fileref=document.createElement('script');
var filename="https://www.google.com/jsapi";
fileref.setAttribute("type","text/javascript");
fileref.setAttribute("src", filename);
document.getElementsByTagName("head")[0].appendChild(fileref); 
```

然后在它之后你使用api调用

```
google.load(....)\ 
```

**编辑：**

您正在使用 html5 网络工作者，它使用浏览器之外的进程来创建脚本。这是不可能的，因为 html5 工作人员无权访问 DOM。[http://www.sitepoint.com/javascript-threading-html5-web-workers/](http://www.sitepoint.com/javascript-threading-html5-web-workers/)

您必须在工作人员之外创建它或包含在脚本元素中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:40:37.583

您需要先包含 API，然后才能使用它。试着把它放在你的头块中：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

要加载提要 API，您可以使用另一个脚本块，如下所示：

```
<script type="text/javascript">
    google.load("feeds", "1");
    var feed = new google.feeds.Feed("<<url here>>");
    ...
</script> 
```

# security - RallyRestApi 是否使用 HTTP GET 或 POST 方法？

> ID：11618414
> 
> 赞同：2
> 
> 时间：2012-07-23T18:36:11.923
> 
> 标签：security, rally

我正在使用 Java Toolkit for Rally REST API，并且我担心使用 RallyRestApi 类传递的凭据的安全性。RallyRestApi 是否使用 HTTP GET 或 POST 方法进行身份验证？

[以下是来自Java Toolkit for Rally REST API](http://developer.rallydev.com/help/java-toolkit-rally-rest-api)页面的使用示例：

```
RallyRestApi restApi = new RallyRestApi(new URI("https://rally1.rallydev.com"), "user@company.com", "password"); 
```

谢谢，尼克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:55:06.133

该工具包使用基本身份验证，它基本上在编码的标头中发送用户名/密码。只要您通过 SSL（https 协议而不是 http）连接到服务器，您的凭据就不会以明文形式传递。

# c# - 使用 Code First 在 EF 中的检索函数中显示联接表

> ID：11618418
> 
> 赞同：0
> 
> 时间：2012-07-23T18:36:22.373
> 
> 标签：c#, linq

我在 EF4.1 Code First 中创建一个数据库。我的健康表格与健康家属建立了一对多的关系。一份健康表格有 0-5 名家属。当我创建健康表格时，通过使用为我创建了家属表

```
modelBuilder.Entity<BenefitsForm>().HasMany(t => t.Dependents).WithOptional().WillCascadeOnDelete(); 
```

但是，当我使用检索方法时：

```
return context.BenefitsForm; 
```

它不显示 Dependents 表连接，仅显示 BenefitsForms。如何让它显示与 Dependents 表链接的 BenefitsForm 表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:40:02.187

一种方法是使用该`Include()`方法 - [http://msdn.microsoft.com/en-us/library/bb738708.aspx](http://msdn.microsoft.com/en-us/library/bb738708.aspx)

```
return context.BenefitsForm.Include("Dependents"); 
```

另一种方法是在您的上下文中启用 LazyLoading - [http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontextoptions.lazyloadingenabled.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontextoptions.lazyloadingenabled.aspx)

```
yourContext.ContextOptions.LazyLoadingEnabled = true; 
```

# javascript - 通过 websocket 流式传输动态文件的内容

> ID：11618424
> 
> 赞同：0
> 
> 时间：2012-07-23T18:36:52.040
> 
> 标签：javascript, websocket

我在 Bash 中有一个运行控制台提要的程序。提要是文本，每次发生事件时都会附加并带有时间戳。

我如何将控制台提要的内容加载到页面上（可能是控制台的最后 200 行左右），并在每次将文件附加到（新行）时发送附加数据？

我对 WebSockets 和动态数据的移动完全陌生，所以请彻底解释一下。

注意：我也安装了 node.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:48:04.593

既然你已经有了 node.js，你一定要看看[socket.io](http://socket.io/)；它会为你处理所有 WebSocket 的东西。查看该网站以了解如何使用它。

另外，由于您对查看文件的更改感兴趣，请查看[`fs.watchFile()`](http://nodejs.org/api/fs.html#fs_fs_watchfile_filename_options_listener)node.js 的 FileSystem 模块的功能。每次更改文件时都会触发回调。您可以使用它来获取新数据并使用`socket.emit()`.

# c# - 更新列表 在 MongoDB 中

> ID：11618427
> 
> 赞同：0
> 
> 时间：2012-07-23T18:37:09.857
> 
> 标签：c#, mongodb, mongodb-.net-driver

我有一个要使用 C# 驱动程序在 MongoDB 中更新的字符串列表。我该怎么做呢？

```
 List<string> Images = someList;
  var update = Update.Set("Images", Images);
  collection.Update(query, update, UpdateFlags.Upsert); 
```

这会给我一个错误，说'Images'不是BsonValue ..如何将字符串列表转换为bsonvalue？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:02:48.020

看起来 Update.Set 想要一个 BsonValue，您不能从 List 隐式转换为 BsonValue。

无论如何，您看起来都在做 Upserts，您可以使用 Save 代替吗？

使用序列化和保存解决此问题的一种方法是：

```
public class SomeListClass
{
    public ObjectId id { get; set; }
    public List<string> Images { get; set; }
} 
```

* * *

```
SomeListClass slc = new SomeListClass();
slc.Images = someList;
collection.Save(slc); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:13:36.140

这就是我为解决它所做的：我将该列表转换为 BsonArray：

```
List<string> Images = someList;
var update = Update.Set("Images", new BsonArray(Images));
collection.Update(query, update, UpdateFlags.Upsert); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T13:52:11.580

如果您使用的是最新的 1.5 版本的 C# 驱动程序，您还可以使用新的类型化更新构建器，让它找出正确的元素名称以及如何序列化新值。

```
List<string> images = someList;
var update = Update<SomeListClass>.Set(x => x.Images, images); 
```

# linux - 如何从 Scala 执行内置的 shell

> ID：11618428
> 
> 赞同：8
> 
> 时间：2012-07-23T18:37:10.057
> 
> 标签：linux, shell, scala

我需要检查一些系统设置，例如`ulimit -n`Linux 中的 Scala 脚本。如果我要处理普通命令，我会使用`scala.sys.process`如下包：

```
import scala.sys.process._
println("ls -lha".!!) 
```

不幸的是，这不适用于 shell 内置函数。有什么方法可以捕获 Scala 中内置 shell 的输出？

**更新：**

`sh -c "ulimit -n"`我以几种形式尝试了通常的技巧，但没有运气；以下所有命令均失败：

```
"sh -c 'ulimit -n'".!!
"sh -c \"ulimit -n\"".!!
"""sh -c "ulimit -n"""".!!
"""sh -c "ulimit -n """ + "\"".!! 
```

我在 REPL 中遇到运行时错误：

```
-n": 1: Syntax error: Unterminated quoted string
java.lang.RuntimeException: Nonzero exit value: 2
    at scala.sys.package$.error(package.scala:27)
    at scala.sys.process.ProcessBuilderImpl$AbstractBuilder.slurp(ProcessBuilderImpl.scala:131)
    at scala.sys.process.ProcessBuilderImpl$AbstractBuilder.$bang$bang(ProcessBuilderImpl.scala:101)
    at .<init>(<console>:11)
    at .<clinit>(<console>)
    at .<init>(<console>:11)
    at .<clinit>(<console>)
    at $print(<console>)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:704)
    at scala.tools.nsc.interpreter.IMain$Request$$anonfun$14.apply(IMain.scala:920)
    at scala.tools.nsc.interpreter.Line$$anonfun$1.apply$mcV$sp(Line.scala:43)
    at scala.tools.nsc.io.package$$anon$2.run(package.scala:25)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T19:01:29.120

当字符串转换为 shell 命令时，参数用空格分隔。您尝试的约定是*外壳*约定，因此您需要一个外壳才能开始应用它们。

如果您想更好地控制每个参数是什么，请使用 a`Seq[String]`而不是 a `String`，或者使用`Process`相当于同一事物的工厂之一。例如：

```
Seq("sh", "-c", "ulimit -n").!! 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T19:01:34.757

采用

```
println( Process("sh", Seq("-c","ulimit -n")).!! ) 
```

模仿 shell 通常在你输入时所做的事情`sh -c 'ulimit -n'`。也就是说，命令是`sh`，参数是`-c`和`ulimit -n`。

# javascript - 清理 SerialScroll 调整大小功能

> ID：11618429
> 
> 赞同：1
> 
> 时间：2012-07-23T18:37:23.023
> 
> 标签：javascript, jquery, serialscroll

问候

我对 JavaScript 和 Jquery 还比较陌生，我知道肯定有比我正在使用的方法更好的方法。

我正在研究一个 serialScroll 实现。有一个主 scrollTo 控制多个幻灯片的左/右移动。每张幻灯片都包含它自己的垂直serialScroll 实现。我在 scrollTo 上的调整大小工作得很好，在垂直方向上调整大小工作但我想不出一个优雅的方法来确保在调整当前位置时保持居中，我当前的方法有效但效率很低。

```
$(function(){

var $up = $('#sec1_nav a.up').hide();//up button -- each slide needs it's own unique nav buttons
var $down = $('#sec1_nav a.down');//down button -- each slide needs it's own unique nav buttons 

        $('#screen1').serialScroll({
            target:'#section1',
            items:'.item', 
            prev:'#sec1_nav a.up',
            next:'#sec1_nav a.down',    
            axis:'y',
            duration:1000,
            force:true,
            cylce: false,

            onBefore:function( e, elem, $pane, $items, pos ){
            $up.add($down).show();  
            if( pos == 0 )$up.hide();
                else if( pos == $items.length -1 )
                    $down.hide();

                   // Here's where it get ugly, I'am adding a unique class for each slide to the item's
            $('.item').removeClass('pos1'); //Each slides need's it's own class i.e. slide1 = pos1, slide2 = pos2 etc.
                    $(elem).addClass('pos1');
                }                   
            }); 
            $(window).bind("resize", function(){
                resize1(); // Same goes for the resize function, each slide need's it's own function.
            });     
    });
    function resize1() {

    height = $(window).height();
    width = $(window).width();

    mask_height = height * $('.item').length; // sets the new mask height 

    // Resize Height of the area
    $('.sections').css({height: height, width : width});
    $('.item').css({height: height, width : width});
    $('#mask').css({height : mask_height, width : width});

    $('.sections').scrollTo('.pos1', 0 ); // This issue is where it all fall apart, instead of using serialScroll, i'am stuck using scrollTo to maintain the current slide position.
} 
```

# c++ - c++ 数组最小最大范围分数

> ID：11618430
> 
> 赞同：-2
> 
> 时间：2012-07-23T18:37:29.963
> 
> 标签：c++, arrays, floating-point, comparison

我有一个在 0.1429 和 0.1428 之间波动的数组，它似乎没有真正的顶部或底部，所以这些数字可能会有所不同。

```
if(myarray[N-1]<myarry[N]){/*always happens*/}
if(myarray[N-1]>myarry[N]){/*never happens*/} 
```

数字是小数，所以数字中必须有更小的分数才能在我的图表上显示曲线，例如：0.14285216

我在“大于”“小于”< > 我认为这是因为我没有大于 1 的数字（myarray[N-1] 总是显示 0）

我可以对我的数据做一些事情，比如增加范围或使用另一种方法来“<>”吗？

真的卡住了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:48:04.560

我猜你想要做的是在数组中显示数字以便查看它们之间的差异？您总是/从不出现这种情况的原因是数组已排序，这可能是一件好事。无论如何，要显示更多位数，您可以使用格式说明符，例如

```
printf ("my ith number: %.10f", myarray[i]); 
```

这将为您`myarray[i]`提供 10 位小数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:51:05.697

什么是：

myarray 与 myarry（缺少第二个 r 和 y 之间的 a）

直接来自您上面给出的代码：

```
if(myarray[N-1]<myarry[N]){/*always happens*/}
if(myarray[N-1]>myarry[N]){/*never happens*/} 
```

不应该是：

```
if(myarray[N-1]<myarray[N]){/*always happens*/}
if(myarray[N-1]>myarray[N]){/*never happens*/} 
```

另外，我希望您不要使用 N = 0 作为这组 if 语句的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:54:10.147

您可能希望将所有数字乘以 7 并减去 1 - 这会使相对差异更大。

# python - 使用 BeautifulSoup 拉取标签值

> ID：11618433
> 
> 赞同：6
> 
> 时间：2012-07-23T18:37:42.833
> 
> 标签：python, parsing, tags, beautifulsoup

有人可以指导我如何使用 BeautifulSoup 提取标签的值吗？我阅读了文档，但很难浏览它。例如，如果我有：

```
<span title="Funstuff" class="thisClass">Fun Text</span> 
```

我将如何使用 BeautifulSoup/Python 拉“Funstuff”？

编辑：我使用的是 3.2.1 版

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T18:46:56.320

您需要有一些东西来识别您正在寻找的元素，并且很难在这个问题中说出它是什么。

例如，这两个都将在 BeautifulSoup 3 中打印出“Funstuff”。一个查找 span 元素并获取标题，另一个查找具有给定类的 span。达到这一点的许多其他有效方法是可能的。

```
import BeautifulSoup
soup = BeautifulSoup.BeautifulSoup('<html><body><span title="Funstuff" class="thisClass">Fun Text</span></body></html>')
print soup.html.body.span['title']
print soup.find('span', {"class": "thisClass"})['title'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:53:57.690

可以通过 .contents [http://www.crummy.com/software/BeautifulSoup/bs4/doc/#contents-and-children](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#contents-and-children)获得标签子项 在您的情况下，您可以找到标签使用其 CSS 类来提取内容

```
from bs4 import BeautifulSoup
soup=BeautifulSoup('<span title="Funstuff" class="thisClass">Fun Text</span>')
soup.select('.thisClass')[0].contents[0] 
```

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors) 有所有的细节nevessary

# python - 为什么不能用“is”来比较数字？

> ID：11618438
> 
> 赞同：4
> 
> 时间：2012-07-23T18:37:52.780
> 
> 标签：python, numbers

> **可能重复：**
> [Python“is”运算符对整数的行为异常](https://stackoverflow.com/questions/306313/python-is-operator-behaves-unexpectedly-with-integers)

通常我使用`type(x) == type(y)`来比较类型是否相同。然后用于`x==y`比较数值是否相等。

但是，有人提出，如果和包含具有完全相同值的相同类型的数字，则可以仅用于`z1 is z2`比较。在许多情况下，它会成功（尤其是对于正整数）。`z1``z2`

但是，有时相同的数字（主要是负整数）可以有几个不同的实例。这是python的预期行为吗？

例如：

```
>>> for x in range(-20,125):
    z1=x
    z2=int(float(x))
    if z1 is not z2:
        print "z1({z1}; type = {typez1}; id={idz1}) is not z2({z2}; type = {typez2}; id={idz2})".format(z1=z1,typez1=type(z1),idz1=id(z1),z2=z2,typez2=type(z2),idz2=id(z2))

z1(-20; type = <type 'int'>; id=33869592) is not z2(-20; type = <type 'int'>; id=33870384)
z1(-19; type = <type 'int'>; id=33870480) is not z2(-19; type = <type 'int'>; id=33870408)
z1(-18; type = <type 'int'>; id=32981032) is not z2(-18; type = <type 'int'>; id=33870384)
z1(-17; type = <type 'int'>; id=33871368) is not z2(-17; type = <type 'int'>; id=33870408)
z1(-16; type = <type 'int'>; id=33869712) is not z2(-16; type = <type 'int'>; id=33870384)
z1(-15; type = <type 'int'>; id=33869736) is not z2(-15; type = <type 'int'>; id=33870408)
z1(-14; type = <type 'int'>; id=33869856) is not z2(-14; type = <type 'int'>; id=33870384)
z1(-13; type = <type 'int'>; id=33869280) is not z2(-13; type = <type 'int'>; id=33870408)
z1(-12; type = <type 'int'>; id=33868464) is not z2(-12; type = <type 'int'>; id=33870384)
z1(-11; type = <type 'int'>; id=33868488) is not z2(-11; type = <type 'int'>; id=33870408)
z1(-10; type = <type 'int'>; id=33869616) is not z2(-10; type = <type 'int'>; id=33870384)
z1(-9; type = <type 'int'>; id=33871344) is not z2(-9; type = <type 'int'>; id=33870408)
z1(-8; type = <type 'int'>; id=33869064) is not z2(-8; type = <type 'int'>; id=33870384)
z1(-7; type = <type 'int'>; id=33870336) is not z2(-7; type = <type 'int'>; id=33870408)
z1(-6; type = <type 'int'>; id=33870360) is not z2(-6; type = <type 'int'>; id=33870384)
>>> x
124
>>> print x
124
>>> import sys
>>> print sys.version
2.7.2+ (default, Oct  4 2011, 20:06:09) 
[GCC 4.6.1] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T18:42:14.870

是的。只有少数接近 0 的数字（正如您所发现的那样，正数多于负数）被编译器**截留。**由于表达式可能导致超出此范围的数字，`is`因此*永远不*应该用于检查是否相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:46:47.580

根据[Python 文档](http://docs.python.org/reference/expressions.html#is)：

> 对象身份的运算符`is`和测试：当且仅当和是同一个对象时为真。产生逆真值。`is not``x is y``x``y``x is not y`

因此，即使 x 和 y 是相同类型且相等，它们也可能不满足`is`关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:45:27.197

唯一正确的用途`is`是比较对象身份的相等性。要比较值的相等性，请使用`==`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T18:46:13.597

'is' 关键字比较两个对象的身份（基本上是存储它们的内存位置），而不是值。它不应该用于检查是否相等。

由于解释器实现的细节，在您的情况下，“is”关键字成功了几次 - 一些数字由编译器存储以便于访问。您不应期望或依赖这种行为。

# php - 将值传递给 PHP 文件

> ID：11618444
> 
> 赞同：0
> 
> 时间：2012-07-23T18:38:10.660
> 
> 标签：php, html, forms, get

我尝试使用以下代码将值传递给另一个 php 页面，但我没有得到任何东西。

文件名：发送.html

```
<form id="form1" action="get.php" method="get">
<input name="search_name" type="text" id="search_name" size="20.5" height="45" border="#770074" >   
<select name="mydropdown" width="230" STYLE="width: 180px" size="0" "height: 200px">
<option value="All">All Categories</option>
<option value="Childrens Clothing">Childrens Clothing</option>
</select>
<img src="../img/search.jpg" width="70" height="45" border="0" align="left" usemap="#Map">
</form>

<map name="Map">
<area shape="poly" coords="5,35" href="#">
<area shape="rect" coords="-5,8,140,45" href="get.php">
</map> 
```

文件名：get.php

```
<?php
$sname=$_GET['search_name'];
$cname=$_GET['mydropdown'];
echo $sname."<br>".$cname;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:51:16.023

```
<area shape="rect" coords="-5,8,140,45" onclick="document.form1.submit();"> 
```

这是对 webarto 答案的一点修改，因为我认为您只希望图像上的特定区域作为提交按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:41:19.177

在添加之前添加一个正确`</form>`的提交按钮。`Send.html``<input type="submit" value="Submit" />`

**编辑** 如果要使用图像，可以执行以下操作：

```
<button type="submit"><img src="..." /></button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:43:09.680

```
<img onclick="document.getElementById('form1').submit();" src="../img/search.jpg" width="70" height="45" border="0" align="left" usemap="#Map"> 
```

# java - h:commandButton 从第二次点击开始工作

> ID：11618450
> 
> 赞同：1
> 
> 时间：2012-07-23T18:38:44.777
> 
> 标签：java, forms, jsf, jsf-2

这是我的代码：

```
<h:form>
    <h:messages errorClass="errorMessage" infoClass="infoMessage"
                warnClass="warnMessage"></h:messages>
    <h:panelGroup id="login" layout="block" rendered="#{!securityBean.authorized}">
        <h:outputText value="login:"/>
        <h:inputText id="username" value="#{securityBean.username}"/>
        <h:outputText value="password:"/>
        <h:inputSecret id="password" value="#{securityBean.password}"/>
        <h:commandButton value="login" action="#{securityBean.login}"/>
    </h:panelGroup>

    <h:panelGroup id="logout" layout="block" rendered="#{securityBean.authorized}">
        <h:graphicImage id="img" library="img" name="login_success.jpg"/>
        <h:commandButton value="logout" action="#{securityBean.logout}"/>
    </h:panelGroup>
</h:form> 
```

这是支持bean的方法

```
 public Object login() throws ServletException {
        HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
        try {
            request.login(username, password);
        } catch (ServletException e) {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "An Error Occured: Login failed", null));
            e.printStackTrace();
        }
        return null;
    }

    public Object logout(){
        HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);
        if(session != null){
            session.invalidate();
        }
        return null;
    }
    public boolean isAuthorized() {
        return FacesContext.getCurrentInstance().getExternalContext().getUserPrincipal() != null &&
                FacesContext.getCurrentInstance().getExternalContext().getUserPrincipal().getName() != null &&
                !FacesContext.getCurrentInstance().getExternalContext().getUserPrincipal().getName().isEmpty();
    } 
```

登录后，会出现注销按钮，但仅在第二次单击时有效。正如你所看到的，这里没有使用 ajax，所以这个[http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)帮不了我。我怎样才能让它工作正确的？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T22:07:51.033

我认为您遇到了这个问题，因为您需要在注销后重定向（使用结果，而不是 null）到主页或其他内容。我遇到了这个问题，我解决了这样的问题：

```
public String logout(){
    HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);
    if(session != null){
        session.invalidate();
    }
    return "redirectToHomePageAfterLogout";
} 
```

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:27:28.327

这是因为表单提交的响应 URL 与生成它的请求相同。它产生的效果是 URL 始终落后于您实际所在的位置。

您可以使用 ?faces-redirect=true 为您的 URL 添加后缀，以强制 JSF 重定向您而不是转发您。

[这里](http://www.mkyong.com/jsf2/jsf-page-forward-vs-page-redirect/)给出了一个更好的概述

但是，您的 logOut 操作应该返回一个 String()，它给出了在 logOut 函数完成后要移动到的页面的名称。

# scala - 初学者 Scala SBT 查询

> ID：11618451
> 
> 赞同：2
> 
> 时间：2012-07-23T18:38:46.663
> 
> 标签：scala, playframework, sbt

我正在尝试根据[https://play.lighthouseapp.com/projects/82401/tickets/193-javascript-require-support-in-non-minimized-files](https://play.lighthouseapp.com/projects/82401/tickets/193-javascript-require-support-in-non-minimized-files)的说明修改闭包编译器选项。

我还需要添加一个解析器。

```
val defaultOptions = new CompilerOptions()
defaultOptions.closurePass = true
CompilationLevel.WHITESPACE_ONLY.setOptionsForCompilationLevel(defaultOptions)
defaultOptions.setProcessCommonJSModules(true)
val root = new java.io.File(".")
defaultOptions.setCommonJSModulePathPrefix(root.getCanonicalPath + "/app/assets/javascript/")
defaultOptions.setPrettyPrint(true)

def optClosureValues = Option(System.getProperty("closureoff")).filter(_ != "").map {
dev =>
  println("using alternative closure compiler")
  closureCompilerSettings(defaultOptions)
}.getOrElse(Seq.empty)

val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
optClosureValues:_*,
resolvers += ("Morphia" at "http://morphia.googlecode.com/svn/mavenrepo/")
) 
```

这给出了一个错误

```
Build.scala:35: no `: _*' annotation allowed here
[error] (such annotations are only allowed in arguments to *-parameters)
[error]     optClosureValues:_*,
[error]                     ^
[error] one error found 
```

这里的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:52:44.030

你可能可以这样写：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  optClosureValues ++
  Seq(resolvers += ("Morphia" at "http://morphia.googlecode.com/svn/mavenrepo/")): _*
) 
```

我使用最新的 2.1-SNAPSHOT 在我的机器上确认了上述工作。

# c# - MVP Winforms 中的通用用户输入验证代码

> ID：11618452
> 
> 赞同：0
> 
> 时间：2012-07-23T18:38:57.317
> 
> 标签：c#, winforms, validation, mvp

**背景：** 我是 MVP 新手，刚刚使用 Model View Presenter 编写我的第一个 winform 应用程序 **问题：** 我一直在浏览有关如何为 Windows 控件（例如 TextBox 等）编写用户输入验证代码以及将该代码放在何处的最佳实践winforms 应用程序使用 Model View Presenter 设计模式，但仍然感到困惑。让我解释一下 假设我的表单上有一些 TextBox 控件，它们接受名称、电话、电子邮件、zip 等输入。通常我会调用不同的方法，如 validateName()、validatePhone()、validateEmail() 和 validateZip() 然后这些方法中的每一种我都必须检查用户提供的输入是否不为空

```
 if(txtName.Text.Length == 0)
   {
      errorMessage = "Name is required.";
         return false;
   }

   if(txtEmail.Text.Length == 0)
   {
      errorMessage = "e-mail address is required.";
         return false;
   } 
```

这闻起来像代码重复，我认为必须有一种更好、更有效的方法来检查文本是否不为空（可能是通过循环遍历所有文本框控件）。

所以，我在想的是有一个 CommonMethods 类，其中包含常见的方法，如 CheckifTextEmply()、CheckifNumber() 等，并在我的所有表单中使用这个类，因为这些是常见的功能，可以被其他表单中的其他 TextBox 控件使用项目。现在你能告诉我 1\. 这是正确的方法吗，如果不是，我应该如何处理这个问题 2\. 如果正确，我应该将 CommonMethods 类（代码）放在 Model View Presenter 设计中的什么位置。

问候， ZB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:49:21.680

看起来有点旧的帖子。尝试创建一个将控制作为参数的方法，然后尝试验证它。

```
bool validate(TextBox txt)
{
    return string.IsNUllOrEmpty(txt.Text);
} 
```

您还可以尝试使用`params[]`参数来获取多个控件并验证它们。

关于错误消息，如果您使用“必填字段”消息，而不是“名称是必需的”，它将使工作更容易。但如果不是，请尝试创建 control 和 bool 字典，如果验证失败则传递 false 并根据它采取措施。

我知道答案不是很有描述性，但是现在我有点忙，所以不能花太多时间来解释这个。让我知道它是否有帮助。

# javascript - Node.js 警报导致崩溃

> ID：11618456
> 
> 赞同：45
> 
> 时间：2012-07-23T18:39:07.177
> 
> 标签：javascript, node.js, alert

我正在尝试创建一个 node.js 应用程序和

```
alert('Sample Alert'); 
```

导致我的程序崩溃。节点说

> ReferenceError：未定义警报

然后退出。我可以`alert`在常规 html 页面上运行 javascript 时使用该功能，所以我不明白为什么会这样......这是我必须与 node.js 一起使用的单独模块吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-23T18:40:07.920

该`alert()`函数是浏览器`window`对象的属性。它实际上并不是 JavaScript 的一部分。它只是该环境中 JavaScript 代码可用的工具。

尝试`console.log("Hello World");`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-02T01:56:06.717

`alert()`仅当您在浏览器窗口的特殊上下文中执行 JavaScript 时，该函数才可用。它可以通过`window`对象获得。

Node.js 不适用于（直接）编写桌面应用程序。它主要用于编写服务器端 JavaScript 应用程序。如果您想开发真正的桌面应用程序，您可以使用以下框架/包（以及更多）。

*   [电子](https://electronjs.org/)
*   [NW.js](https://github.com/rogerwang/node-webkit)（以前是 node-webkit）

    > NW.js 是一个基于`Chromium`和`node.js`. 您可以使用 NW.js 以 HTML 和 JavaScript 编写本机应用程序。它还允许您直接从 DOM 调用 Node.js 模块，并启用一种使用所有 Web 技术编写本机应用程序的新方法。

*   [应用程序JS](http://appjs.com/)

    > 可作为独立发行版和 npm 包使用

* * *

同时，您可以使用[`console.log()`](https://developer.mozilla.org/en-US/docs/Web/API/Console/log)在 Node.js 中输出消息。

```
console.log('hello'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T01:30:35.297

虽然这些答案是“正确的”，因为在浏览器之外没有可用的警报功能，但没有理由不能创建一个然后使用它：

```
node -e "function alert(x){ 
            x === 'undefined' ? console.log('undefined') : console.log(x); return; 
         }; 
         alert('x'); alert();" 
```

结果：

```
x
undefined 
```

然后您可能不需要更改现有代码或示例或其他任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-30T11:52:15.103

您还需要代码来等待密钥。这是一个开始：

```
process.stdin.on('char', function() {
  var chunk = process.stdin.read();
  if (chunk !== null) {
    process.stdout.write('data: ' + chunk + 'got?\n');
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-05T07:36:36.180

警报功能适用于浏览器。表示前端..在 nodejs 中用于在 cmd 或 bash 中打印，您应该使用这个..

```
console.log("Sample alert"); 
```

您可以在此处打印任何变量或常量...对于打印变量只需删除引号

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-05T10:01:55.997

该`alert()`属性仅允许浏览器使用，JavaScript 不允许。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-11-03T23:21:00.730

我没有看到它记录在哪里，但我一直`global.alert()`在我的`react-native`代码中使用它。我将它用于调试目的，因为我正在运行`Appium`测试，所以我无权访问`console.log()`输出。

# c# - 从字符串解析 DateTime 时遇到问题

> ID：11618459
> 
> 赞同：3
> 
> 时间：2012-07-23T18:39:26.783
> 
> 标签：c#, parsing, datetime, gmt

我目前正在尝试解析从每隔几分钟从网上下载的 xml 获得的字符串。字符串如下所示：

```
Thu Jul 12 08:39:56 GMT+0100 2012 
```

起初我只是做了 a`string.split`并在时间 ( ) 之后取出所有内容`GMT+0100 2012`并在日期之后插入 2012。

直到日期更改为：

```
Thu Jul 12 08:39:56 GMT+0000 2012 
```

所以我想动态地解析 GMT+，因为他们在 c# 中向我发送了那个字符串。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T18:55:33.497

您可以使用`DateTime.ParseExact`自[定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)：

```
DateTime.ParseExact("Thu Jul 12 08:39:56 GMT+0000 2012", 
                    "ddd MMM dd hh:mm:ss 'GMT'K yyyy",
                    CultureInfo.InvariantCulture) 
```

如果字符串和格式字符串不完全匹配，这将引发格式异常，因此您可能希望使用它将在失败`DateTime.TryParseExact`时返回 a 。`false`

[正如@Keith](https://stackoverflow.com/users/436376/keiths)[评论](https://stackoverflow.com/questions/11618459/troubles-parsing-datetime-from-string/11618668#comment15384921_11618668)的那样，`DateTime`您可能不想使用`DateTimeOffset`保留的时区信息- 这*可能*对您的应用程序很重要。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:56:30.023

您可以做两件事：首先，您应该能够使用来自 DateTime 或 DateTimeOffset 的自定义格式字符串和 ParseExact 方法（如果戳的实际时区很重要，我会使用 DateTimeOffset ，而不仅仅是等效时间在 UTC 或您当地的时区）。

看看：[DateTime 自定义格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4%28v=vs.71%29.aspx)

格式字符串可能类似于`@"ddd MMM dd HH:mm:ss 'GMT'zzzz yyyy"`.

但是，有一个障碍；.NET 时区偏移（“zzzz”或简称“K”）在表示为字符串时总是在小时和分钟之间包含一个冒号，而您的输入字符串没有。我无法指定时区偏移量没有/不应该有这个冒号，我很确定尝试在没有冒号的情况下解析它会导致错误。

最简单的解决方法是在解析之前从字符串中删除该特定冒号。给定您输入的代码只是删除字符串中的最后一个冒号字符：

```
var updatedString = inputString.Remove(inputString.LastIndexOf(':'), 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:47:04.587

尝试[DateTime.Parse](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)方法来解析您的日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:11:33.013

这应该有效：

```
XmlConvert.ToDateTime(textBox1.Text, "ddd MMM dd HH:mm:ss 'GMT'zzzz yyyy"); 
```*

# mysql - 从 mysql 中的数据库获取 max(top some things data)

> ID：11618460
> 
> 赞同：1
> 
> 时间：2012-07-23T18:39:32.147
> 
> 标签：mysql, max

伙计们，我想从下表中获取特定年份的前 3 种疾病以及它们的计数。我应该运行什么查询？

```
mysql> select id,dname,d_id,entrydate from patient_master;    
+----+------------------+------+------------+    
| id | dname            | d_id | entrydate  |     
+----+------------------+------+------------+          
|  1 | Root Canal       |    1 | 2012-08-02 |         
|  2 | Cosmetic Filling |    3 | 2012-05-10 |   
|  3 | Root Canal       |    1 | 2012-05-25 |   
|  4 | High BP          |    6 | 2012-07-09 |    
|  5 | Root Canal       |    1 | 2012-07-10 |      
|  6 | Normal Filling   |    2 | 2012-05-10 |     
|  7 | Maleria          |    4 | 2012-07-10 |    
|  8 | Maleria          |    4 | 2012-07-12 |    
|  9 | Typhoid          |    5 | 2012-07-12 |    
+----+------------------+------+------------+    
9 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:41:43.123

使用`group by`子句按疾病组合结果，并`count(*)`统计每种疾病的记录数。然后，您可以从最大到最小排序，并使用`limit 3`它只获得前 3 个。我还包括一个`where`子句，用于仅过滤`2012`.

```
 select count(*), dname
    from patient_master
   where entrydate between '2012-01-01' and '2013-01-01'
group by dname
order by count(*) desc
   limit 3 
```

演示：[http ://www.sqlfiddle.com/#!2/89c06/6](http://www.sqlfiddle.com/#!2/89c06/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:47:01.833

```
SELECT d_id, dname, count(d_id) as `count`, year(entrydate) as `year`
FROM patient_master
GROUP by `year`, d_id
ORDER BY `year` DESC, `count` DESC 
```

注意我没有在这里设置限制，好像你想在同一个查询中同时获得年份和计数，你需要编写一个非常复杂的查询来获得每年的前 3 名。

这将按年份降序排序，然后按每年内的疾病计数降序排序。您将注意到能够在此查询中获取行 id，而且您也不应该关心该值，因为您正在尝试执行此操作。

# mobile - 桌面移动框架

> ID：11618462
> 
> 赞同：0
> 
> 时间：2012-07-23T18:39:39.577
> 
> 标签：mobile

遇到了很多当前的移动框架。由于种类繁多，我发现很难决定在桌面和移动设备上使用哪个 Web 应用程序。

[http://en.wikipedia.org/wiki/Multiple_phone_web_based_application_framework](http://en.wikipedia.org/wiki/Multiple_phone_web_based_application_framework)

有人用过这些吗？是否可以扩展和/或重新用于桌面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:46:37.320

我会说phonegap是你最好的选择。由于您可以使用 javascript、CSS 和 HTML 来构建它，因此您绝对可以将其重用于桌面。

# nancy - 南希 - 我还必须做什么才能在测试中得到认可

> ID：11618463
> 
> 赞同：1
> 
> 时间：2012-07-23T18:39:42.100
> 
> 标签：nancy

我已经查看了相关文档。我已将 Simple.Data 和 Simple.Data.Spark 添加到 Classlibrary 中以进行测试，但我收到以下消息 - 我必须做些什么才能使我粘贴到 Classlibrary 项目中的 Spark 视图才能找到 classlibrary它？这是它说它只识别这些扩展名的错误消息：sshtml,html,htm

无法找到视图“地址列表”当前可用的视图引擎扩展：sshtml、html、htm 检查的位置：AddressList、views/AddressList、views//AddressList、/AddressList、views/Address/AddressList、Address/AddressList

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:37:21.787

有几件事。首先，您需要从测试项目中引用视图引擎，这是由于 .net 中程序集加载的工作原理（除非明确使用，否则引用的同级引用不会自动加载到应用程序域中）。

第二个是视图本身。因为所有测试运行程序都将正在测试的程序集复制到一个隔离位置，并且因为视图是内容文件。它们本身的视图不会自动复制到隔离位置。解决此问题的最简单方法是设置视图文件，以便始终将它们复制到输出位置（使用 VS 属性窗口）

让我知道它是否适合你

# google-maps-api-3 - 谷歌地图，coldfusion，动态标记和信息，打开带有页面链接的信息窗口

> ID：11618465
> 
> 赞同：0
> 
> 时间：2012-07-23T18:39:54.247
> 
> 标签：google-maps-api-3, coldfusion

我有一个自定义的谷歌地图，我已经添加了样式，它是一个带有动态标记的事件地图，我已经让地图工作在它加载所有动态标记和信息的地方，在我的页面上有地图下方的结果，我想要以便能够单击结果中的链接，这将打开地图上的相关信息窗口。我一直在使用[本文](http://www.raymondcamden.com/index.cfm/2011/4/13/Simple-introduction-to-Google-Maps-Part-2--Markers)中的 Raymond Camdens 演示，我无法让最后一部分与页面上的链接一起使用（我不得不取出脚本的地理编码部分，因为我不需要它来对地址进行地理编码，我正在使用坐标。）

这是我的代码：

```
var map;

var lastinfowindow;

function initialize() {

    // Create an array of styles.
  var styles = [
    {
      stylers: [
        { hue: "#0b9cc1" },
        { saturation: -20 }
      ]
    },{
      featureType: "road",
      elementType: "geometry",
      stylers: [
        { lightness: 100 },
        { visibility: "simplified" }
      ]
    },{
      featureType: "administrative.country",
      elementType: "labels",
      stylers: [
        { visibility: "on" }
      ]
    },

    { featureType: "water", 
     elementType: "geometry", 
    stylers: [ { visibility: "on" }, { lightness: -10 }] },
    { featureType: "poi", 
    stylers: [ { visibility: "on" } ] }

  ];

  // Create a new StyledMapType object, passing it the array of styles,
  // as well as the name to be displayed on the map type control.
  var styledMap = new google.maps.StyledMapType(styles,
    {name: "Styled Map"}); 

    var latlng = new google.maps.LatLng(38, -90);
    var mapOptions = {
        zoom: 3,
        center: latlng,
        mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
    };
    map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);

    var image = 'sp-mark.png';

   latLng = new google.maps.LatLng ('23.00593', '12.65287');
            var marker1 = new google.maps.Marker({
                map: map,
                position: LatLng,
                title: 'Event 1 - 38',
                icon:image
            });

            var infowindow = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 1</h3><p>Location: here</p>"
            });

            google.maps.event.addListener(marker, 'click', function() {
             infowindow.open(map,marker);
            });

            marker.gigid = 38;
            marker.infowindow = infowindow;
            markers[markers.length] = marker;

   latLng = new google.maps.LatLng ('57.19173', '-1.7083');
            var marker2 = new google.maps.Marker({
                map: map,
                position: LatLng,
                title: 'Event 2 - 30',
                icon:image
            });

            var infowindow = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 2</h3><p>Location: here</p>"
            });

            google.maps.event.addListener(marker, 'click', function() {
             infowindow.open(map,marker);
            });

            marker.gigid = 30;
            marker.infowindow = infowindow;
            markers[markers.length] = marker;

   latLng = new google.maps.LatLng ('56.98083', '1.30056');
            var marker3 = new google.maps.Marker({
                map: map,
                position: LatLng,
                title: 'Event 3 - 32',
                icon:image
            });

            var infowindow = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 3</h3><p>Location: here, Ibiza</p>"
            });

            google.maps.event.addListener(marker, 'click', function() {
             infowindow.open(map,marker);
            });

            marker.gigid = 32;
            marker.infowindow = infowindow;
            markers[markers.length] = marker;

   latLng = new google.maps.LatLng ('58.96', '1.39861');
            var marker4 = new google.maps.Marker({
                map: map,
                position: LatLng,
                title: 'Event 4 - 41',
                icon:image
            });

            var infowindow = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 4</h3><p>Location: here</p>"
            });

            google.maps.event.addListener(marker, 'click', function() {
             infowindow.open(map,marker);
            });

            marker.gigid = 41;
            marker.infowindow = infowindow;
            markers[markers.length] = marker;

   latLng = new google.maps.LatLng ('-43.92528', '28.42389');
            var marker5 = new google.maps.Marker({
                map: map,
                position: LatLng,
                title: 'Event 5 - 47',
                icon:image
            });

            var infowindow = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 5</h3><p>Location: Here</p>"
            });

            google.maps.event.addListener(marker, 'click', function() {
             infowindow.open(map,marker);
            });

            marker.gigid = 47;
            marker.infowindow = infowindow;
            markers[markers.length] = marker;

    //Associate the styled map with the MapTypeId and set it to display.
     map.mapTypes.set('map_style', styledMap);
     map.setMapTypeId('map_style');

    $(".order").click(function() {
        var thisgig = $(this).data("gigid");
        for(var i=0; i<markers.length; i++) {
            if(markers[i].gigid == thisgig) {
                console.log("found my match");
                //get the latlong
                if(lastinfowindow instanceof google.maps.InfoWindow) lastinfowindow.close();
                console.dir(markers[i]);
                map.panTo(markers[i].getPosition());
                markers[i].infowindow.open(map, markers[i]);
                lastinfowindow = markers[i].infowindow;
            }
        }
    });

} 
```

这是链接所在的正文部分：

```
<body onload="initialize()">

<div id="map_canvas"></div>

<div id="orders">

    <p class="order" data-gigid="38">
    <b>Order 38</b><br/>
    Event 1
    </p>

    <p class="order" data-gigid="30">
    <b>Order 30</b><br/>
    Event 2
    </p>

    <p class="order" data-gigid="32">
    <b>Order 32</b><br/>
    Event 3
    </p>

    <p class="order" data-gigid="41">
    <b>Order 41</b><br/>
    Event 4
    </p>

    <p class="order" data-gigid="47">
    <b>Order 47</b><br/>
    Event 5
    </p>

</div>

</body> 
```

请有人帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:53:01.250

如果您的页面中有任何 javascript 错误，Google 地图通常将无法加载。你有很多。

你在这里有一个语法错误：

```
var infowindow = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 4</h3><p>Location: here</p>
            }); 
```

应该：

```
var infowindow = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 4</h3><p>Location: here</p>"
            }); 
```

LatLng 需要两个浮点数，而不是两个字符串：

```
latLng = new google.maps.LatLng ('23.00593', '12.65287'); 
```

Javascript 区分大小写。所以当你说：

```
latLng = new google.maps.LatLng ('23.00593', '12.65287');
var marker1 = new google.maps.Marker({
                ...
                position: LatLng
            }); 
```

它无法识别**LatLng**，因为您的变量被称为**latLng**

这里的问题：

```
marker.gigid = 38; 
```

是你没有一个叫做标记的变量；你有一个名为 marker1 的变量：

```
var marker1 = new google.maps.Marker({
                map: map,
                position: LatLng,
                title: 'Event 1 - 38',
                icon:image
            }); 
```

为了完整起见，以下是您的标记之一应该如何完成（有更好的方法，但这应该有效）： latLng = new google.maps.LatLng (23.00593,12.65287); var marker1 = new google.maps.Marker({ map: map, position: latLng , title: 'Event 1 - 38', icon:image });

```
 var infowindow = new google.maps.InfoWindow({
          content: "<h3 class=maph3>Event 1</h3><p>Location: here</p>"
        });

        google.maps.event.addListener(marker1, 'click', function() {
         infowindow.open(map,marker1);
        });

        marker1.gigid = 38;
        marker1.infowindow = infowindow;
        markers[markers.length] = marker1; 
```

# c# - 以编程方式发布 InfoPath 表单（作为电子邮件发送）

> ID：11618470
> 
> 赞同：2
> 
> 时间：2012-07-23T18:40:18.583
> 
> 标签：c#, infopath, infopath2010

我正在寻找一种以编程方式发送 InfoPath 表单的方法，相当于使用 InfoPath 设计器中的快速发布按钮，但不使用任何 UI。

我无法找到一种方法来做到这一点，我曾尝试使用 MailEnvelope ，但它会显示一个 UI，我不希望这样。

所以我最终通过 SmtpClient 发送了当前的表单文件，但随后表单显示为常规附件。

有谁知道是否有可能从代码中做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:43:55.130

您可以将 SmtpClient 与附件一起使用，但您必须为电子邮件上的附件和标题设置 MIME 类型。不要在此处复制全文，请参阅此链接：http: [//blogs.msdn.com/b/hanuk/archive/2008/03/18/how-to-display-infopath-forms-inline-with-outlook-电子邮件消息.aspx](http://blogs.msdn.com/b/hanuk/archive/2008/03/18/how-to-display-infopath-forms-inline-with-outlook-email-message.aspx)

# r - 用于可视化五分位数的图形，类似于箱线图和晶须图

> ID：11618474
> 
> 赞同：2
> 
> 时间：2012-07-23T18:40:52.763
> 
> 标签：r, ggplot2

这是一个普遍的问题。我正在使用 R 和 ggplot2，我很想知道，是否存在类似于四分位数的箱线图和晶须图，为分解成五分位数的数据提供信息？如果是这样，是否可以使用 ggplot2 对图形进行编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:58:09.847

用于`geom_boxplot`执行此操作。

下面是一个例子`?geom_boxplot`：

```
ggplot(mtcars, aes(factor(cyl), mpg)) + geom_boxplot(aes(fill=factor(cyl))) 
```

![在此处输入图像描述](../Images/7d1abbe77860b378f04ef33553f2edd9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T12:47:52.780

首先，阅读 Hadley Wickham 和 Lisa Stryjewski 的[40 Years of Boxplots](http://vita.had.co.nz/papers/boxplots.html)。

其次，查看 R Graph Gallery，尤其是[包 Hmisc 中的 Box-Percentile Plot](http://addictedtor.free.fr/graphiques/RGraphGallery.php?graph=77)。

# ssh - 登录服务器上的 scp

> ID：11618475
> 
> 赞同：1
> 
> 时间：2012-07-23T18:40:52.297
> 
> 标签：ssh, remote-access, scp

我需要使用 scp 将文件从机器 S1 上的远程文件夹复制到本地机器 L1。但是，我只能通过登录服务器 X1 访问 S1（我无法存储文件并且无法使用 nc）。实现这一目标的最佳方法是什么？

# css - 在 Django 1.3 开发服务器中处理外部 css 文件

> ID：11618479
> 
> 赞同：1
> 
> 时间：2012-07-23T18:41:16.173
> 
> 标签：css, django, web-applications

我试图让外部 css 文件在 django 1.3 开发服务器上工作。我阅读了 django 的“管理静态文件”以及许多类似的 SO 问题，但我似乎仍然做错了什么。

为什么我去的时候我的 CSS 样式没有正确显示`localhost:8000/page`？

**目录结构**

```
myproject
|-- manage.py
|-- settings.py
|-- urls.py
|-- app
    |-- __init__.py
    |-- models.py
    |-- tests.py
    |-- views.py
    |-- static
        |-- css
            |-- page.css
|-- templates
    |-- app
        |-- page.html 
```

**我的项目/views.py**

```
import django.http
import django.template.loader
import django.template  

def page_function(request):
    t = django.template.loader.get_template("page.html")
    c = django.template.Context()
    return django.http.HttpResponse(t.render(c)) 
```

**我的项目/urls.py**

```
from django.conf.urls.defaults import patterns, include, url
import myproject.app.views

urlpatterns = patterns('',(r'page/$', myproject.app.views.page_function),) 
```

**myproject/templates/app/page.css**

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}page.css" />
</head>
<body>

<h1>My First Heading</h1>

<p>My first paragraph.</p>

</body>
</html> 
```

**我的项目/settings.py**

（部分）

```
MEDIA_ROOT = ''

MEDIA_URL = ''

STATIC_ROOT = ''

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    "/home/myusername/Desktop/myproject/app/static",
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

ROOT_URLCONF = 'myproject.urls'

TEMPLATE_DIRS = (
    '/home/myusername/Desktop/myproject/templates/app', 
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'app'
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:55:34.093

来自[django 文档](https://docs.djangoproject.com/en/dev/howto/static-files/)：

> 如果 {{ STATIC_URL }} 在您的模板中不起作用，您可能在渲染模板时没有使用 RequestContext。
> 
> 作为一个简短的复习，上下文处理器将变量添加到每个模板的上下文中。但是，上下文处理器要求您在呈现模板时使用 RequestContext。如果您使用的是通用视图，这会自动发生，但在手工编写的视图中，您需要显式使用 RequestContext 要了解其工作原理并阅读更多详细信息，请查看子类化上下文：RequestContext。
> 
> 另一种选择是 get_static_prefix 模板标签，它是 Django 核心的一部分。

代替

```
{{ STATIC_URL }}page.css 
```

你会想要使用：

```
{% load static %}
{% get_static_prefix %}css/page.css 
```

另请注意，目录结构是由静态文件维护的，因此由于您的 page.css 位于“static”的子目录中，因此您需要将其作为“css/page.css”加载到模板中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-19T08:36:52.897

也更换

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}page.css" /> 
```

和

```
{% load static %}
<link rel="stylesheet" type="text/css" href={% myproject "app/static/css/page.css" %}> 
```

应该管用。

# c++ - Boost 图形库分布式广度优 先搜索 MPI_Unpack 运行时报错

> ID：11618483
> 
> 赞同：3
> 
> 时间：2012-07-23T18:41:27.180
> 
> 标签：c++, boost, runtime-error, breadth-first-search

我正在使用 boost 图形库并且出现运行时错误，我似乎无法弄清楚如何修复。

当我使用错误的顶点数和处理器数组合创建和广度首先搜索 rmat 图时，我得到一个`MPI_Unpack`运行时错误。

```
 Number of Vertices  
Processors | 1,000,000 | 2,000,000  
    1      |    pass   |   pass  
    2      |    pass   |   fail
    3      |    pass   |   pass
    4      |    pass   |   pass 
```

从堆栈跟踪中，我相信代码在第一次调用同步时失败，即在广度优先搜索代码中检查要处理的顶点队列是否为空。

谁能告诉我我的代码有什么问题？如果有帮助的话，我在运行 red hat linux（6.2 版）和 gcc 4.4.6 的 mac pro 上使用 boost 1.41.0 版。

我的代码是：

```
#include <boost/graph/use_mpi.hpp>
#include <boost/mpi/environment.hpp>
#include <boost/mpi/communicator.hpp>
#include <boost/graph/distributed/concepts.hpp>
#include <boost/graph/adj_list_serialize.hpp>
#include <boost/graph/distributed/mpi_process_group.hpp>
#include <boost/graph/distributed/adjacency_list.hpp>
#include <boost/random/linear_congruential.hpp>
#include <boost/graph/distributed/breadth_first_search.hpp>
#include <boost/graph/rmat_graph_generator.hpp>

using namespace boost;
using namespace graph;
using namespace distributed;

int main(int argc, char* argv[])
{
    mpi::environment env(argc, argv);
    mpi::communicator world;

    int verts = 20;
    if(argc > 1){
        verts = atoi(argv[1]);
    }
    int edgs = 12*verts;
    if(argc > 2){
        edgs = atoi(argv[2]);
    }

    typedef adjacency_list<listS, distributedS<mpi_process_group, vecS>, undirectedS> Graph;
    minstd_rand gen_rmat;

    typedef rmat_iterator<minstd_rand, Graph> RMATgen;

    Graph g(RMATgen(gen_rmat, verts, 12*verts, 0.33, 0.15, 0.49, 0.03), RMATgen(), verts);

    world.barrier();
    synchronize(g.process_group());
    world.barrier();
    breadth_first_search(g, vertex(0, g), visitor(bfs_visitor<null_visitor>()));
    world.barrier();

    return 0;
} 
```

我得到的运行时错误是：

> 在抛出 boost::exception_detail::clone_impl 的实例后调用终止`<boost::exception_detail::error_info_injector<boost::mph::exception> >`
> 
> what(): MPI_Unpack: MPI_ERR_ARG: 其他类型的无效参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:33:27.870

事实证明，升级到 boost 1.50.0 已经解决了这个问题。

# jquery-mobile - 如何让我的 JQuery 复选框显示来自 Knockout 数据绑定的值？

> ID：11618487
> 
> 赞同：0
> 
> 时间：2012-07-23T18:41:40.857
> 
> 标签：jquery-mobile, checkbox, knockout.js

我在将 JQuery Mobile Checkboxes 与我的 Knockout 绑定绑定时遇到问题。我在表单其他部分的所有文本框都正常工作，正如您在这张图片中看到的那样，布尔值设置为 true（加入奖励和参加比赛的值）。

![在此处输入图像描述](../Images/59f5a075157ff92e2258667cf7cd88b7.png)

```
 <div data-role="fieldcontain">
        <fieldset data-role="controlgroup"> 

            <legend>Sign up for extras</legend>

            <label for="IsInRewards">Join Rewards</label>
            <input type="checkbox" data-bind="checked: IsInRewards" id="IsInRewards" class="custom" />

            <label for="IsEnterContest">Enter Contest</label>
            <input type="checkbox" data-bind="checked: IsEnterContest" id="IsEnterContest" class="custom" />

            <br />
            Value of Join Rewards (IsInRewards) : <span data-bind="text: IsInRewards"></span>
            <br />
            Value of Enter Contest (IsEnterContest) : <span data-bind="text: IsEnterContest"></span>

        </fieldset>
    </div> 
```

我读过 Knockout 和 JQuery 处理事件的方式之间存在一些问题，所以我怀疑我的问题与此有关，但我一直无法弄清楚。我需要做什么才能让两个 JQuery 复选框字段显示数据绑定中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T04:48:22.227

[不难做到.. 您可以为 jquery ui 复选框http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)创建自定义绑定处理程序

# image - Phonegap 不显示图像

> ID：11618493
> 
> 赞同：1
> 
> 时间：2012-07-23T18:42:21.183
> 
> 标签：image, cordova

我当前使用 PhoneGap 构建的应用程序有问题。图片未加载：

[http://i.stack.imgur.com/0p5bv.png](http://i.stack.imgur.com/0p5bv.png)

这是我的代码：

```
<div id="center_content">
    <div id="dashboard">
        <a href="#scheduler" onclick="loadxml();">
        <img src="images/horario.png" class="dashboard_icon"/></a>
    <a href="#tests" onclick="loadjson();">
    <img src="images/examenes.png" class="dashboard_icon"/></a>
    <a href="#"><img src="images/tareas.png" class="dashboard_icon"/</a>
    <a href="#"><img src="images/tareas.png" class="dashboard_icon"/></a>
    <a href="#"><img src="images/herramientas.png" class="dashboard_icon"/></a>
    <a href="#"><img src="images/configuracion.png" class="dashboard_icon"/></a>
    <img src="images/tareas.png" class="dashboard_icon"/>
    <img src="images/tareas.png" class="dashboard_icon"/>
    <img src="examenes.png"/>
    </div>
</div> 
```

编辑2：这里是应用程序结构：

PG\assets\www（包含html页面）和图片文件夹...PG\assets\www\images\

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:09:21.340

确保您为图像指定了正确的目录。尝试将图像的实际 http 链接作为 src。例如，“http://yourdomain.com/images/tareas.png”

# asp.net-mvc-3 - 在 MVC3 中，如何在我的布局中为登录用户使用 Session？

> ID：11618496
> 
> 赞同：1
> 
> 时间：2012-07-23T18:42:36.217
> 
> 标签：asp.net-mvc-3, session

我和一位开发人员正在将一个 WebForms 项目移植到 MVC3 中，我们对此并不陌生。我们已经将 WebForms 母版页移植到了 MVC3 布局页面，但让我们感到震惊的一件事是登录用户的 Session。

在 WebForms 母版页中，我们检查 Session 以确保 Session("LoggedInUser") 具有值，如果没有，则重定向到登录页面。

我们不确定如何在 MVC3 中复制这一点，而且我的谷歌搜索结果不足。在布局页面中放置这种逻辑似乎有点邪恶，但也许我疯了。当然，有更好的方法来做到这一点，而不是在每一个行动方法中都进行这样的检查......如果有人能指出我们正确的方向，我们会很乐意潜入研究。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:48:41.207

如果您使用表单身份验证，您很可能希望使用**Authorize**属性装饰每个控制器或控制器操作，这将为您执行检查并将用户重定向到配置的登录页面

在 c# 中，您可能会这样做：

```
[Authorize]
public Controller MyController
{

} 
```

您还可以将用户或组列表指定为属性的参数。登录页面在 web.config 中指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:48:50.373

您所要做的就是在所有控制器上添加 [Authorize] 标签。如果您未登录，它会自动将您重定向到 web.config 中指定的登录页面。

更好的是，您可以创建一个 BaseController ，每个其他控制器都将从中继承。

基本控制器

```
[Authorize]
public abstract class BaseConroller : Controller
{

} 
```

其他控制器

```
public class HomeController : BaseController
{

} 
```

HomeController 中的每个操作都将根据您的 FromsAuthentication 设置进行重定向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T18:49:10.237

如果您使用表单身份验证，则可以使用 User.Identity.IsAuthenticated 检查用户是否经过身份验证。

例子：

```
if(User.Identity.IsAuthenticated)
{
    //Do Stuff
}
else
{
     //Redirect to login
} 
```

就个人而言，我使用流利的安全性来保护我的网站。[http://www.fluentsecurity.net/](http://www.fluentsecurity.net/)

希望这可以帮助，

# sql - 我需要一条 SQL 语句来包含地址 1 或地址 2，或者使用这两个地址来创建邮件列表

> ID：11618498
> 
> 赞同：0
> 
> 时间：2012-07-23T18:42:47.170
> 
> 标签：sql, ms-access-2007

我有一个有邮寄地址的年轻照顾者数据库。有时年轻人有第二个地址，这取决于他们与谁住在一起。有时需要将信息发送到地址 1 或地址 2 或两个地址；我使用组合框来告诉我需要使用哪个地址，即地址 1、地址 2 或两者。

如何编写查询？这是目前的查询，我只需要它自动插入正确的地址！

```
SELECT tblYoungCareerDetails.Flagged
    , tblYoungCarersDetails.FirstName
    , tblYoungCarersDetails.LastName
    , tblYoungCarersDetails.Address1
    , tblYoungCarersDetails.Address2
    , tblYoungCarersDetails.Address3
    , tblGeographicalArea.QuarterStarted
    , tblYoungCarersDetails.[2ndAddress1]
    ,  tblYoungCarersDetails.[2ndAddress2]
    , tblYoungCarersDetails.[2ndAddress3]
    , tblMailOutList
    , tblYoungCarersDetails.UseAddressLabel 
FROM (tblYoungCarersDetails 
INNER JOIN tblMailOutDetails 
    ON tblYoungCarersDetails.YoungCarersID = tblMailOutDetails.YoungCarersID) 
INNER JOIN tblGeographicalArea 
    ON (tblMailOutDetails.YoungCarersID) 
    AND (tblMailOutDetails.YoungCarersID = tblGeographicalArea.YoungCarersID)
WHERE (((tblMailOutDetails.MailOutList)=Yes)); 
```

这使我所有年轻职业的邮寄详细信息都得到了一定程度的服务，我现在如何确保他们将信息发送到正确的地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:32:13.440

您可以选择第一个地址和第二个地址作为联合查询。

```
SELECT a.* 
    , tblGeographicalArea.QuarterStarted
    , tblMailOutDetails.MailOutList

FROM  (

(SELECT YoungCarersID
    , "Select Address1" As WhereFrom
    , t.Flagged
    , t.FirstName
    , t.LastName
    , t.Address1
    , t.Address2
    , t.Address3
    , t.UseAddressLabel 
FROM tblYoungCarersDetails  t
WHERE t.UseAddressLabel  = "Address 1" 
     OR t.UseAddressLabel  = "Both" 

UNION 
SELECT YoungCarersID
    , "Select Address2" As WhereFrom
    , t.Flagged
    , t.FirstName
    , t.LastName
    , t.[2ndAddress1]
    , t.[2ndAddress2]
    , t.[2ndAddress3]
    , t.UseAddressLabel 
FROM tblYoungCarersDetails  t
WHERE t.UseAddressLabel  = "Address 2" 
     OR t.UseAddressLabel  = "Both" ) As a

INNER JOIN tblMailOutDetails 
    ON a.YoungCarersID = tblMailOutDetails.YoungCarersID )

INNER JOIN tblGeographicalArea 
    ON tblMailOutDetails.YoungCarersID = tblGeographicalArea.YoungCarersID
WHERE tblMailOutDetails.MailOutList=Yes 
```

# c++ - std::basic_ostream 没有合适的默认构造函数

> ID：11618503
> 
> 赞同：-2
> 
> 时间：2012-07-23T18:43:26.813
> 
> 标签：c++, visual-c++

当我尝试运行我的代码时，我在 Visual Studio 中遇到了这个错误：

```
1>c:\users\pprasha1\documents\visual studio 2008\projects\simulated-anneal\simulated-anneal\erstream.hpp(120) : error C2512: 'std::basic_ostream<_Elem,_Traits>' : no appropriate default constructor available
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ] 
```

在这行：

```
 my_os(user_os),prog(NULL),errstatus(0) { } //HERE 
```

这是上下文的其余代码（搜索“HERE”以找到该行）

```
#ifndef ERSTREAM_HPP_
#define ERSTREAM_HPP_ 1.6
#include <iostream>
#include <stdlib.h>

using namespace std;

#ifndef __GNUC__
#ifndef INHERIT_ERRORBUF
#define INHERIT_ERRORBUF
#endif
#endif

#ifndef INHERIT_ERRORBUF
    class ErrorStream;
#endif

// the streambuf for the error handler, not used directly
class Errorbuf : public streambuf
{
    private:
#ifndef INHERIT_ERRORBUF
      ErrorStream *ehp;           // NOT owned by the Errorbuf !!!
#endif
      char *space;
    protected:
      virtual int doallocate();
    public:
#ifdef INHERIT_ERRORBUF
      Errorbuf() : space(NULL) {}
#else
      Errorbuf() : ehp(NULL), space(NULL) {}
      Errorbuf(ErrorStream* ehpl) : ehp(ehpl), space(NULL) {}
#endif
     ~Errorbuf();

#ifndef INHERIT_ERRORBUF
      void associate(ErrorStream* ehpl) { ehp = ehpl; }    
      virtual int overflow(int c = EOF);    
#endif

#ifdef __GNUC__
      virtual int underflow() { return EOF; }
#endif    
      virtual int sync();      
};    

class ErrorStream;

struct ErrManipRec        // struct for single parameter manipulator
{ 
        int arg;
        void (*fp)(ErrorStream& ehr, const int a);

        ErrManipRec( void (*f)(ErrorStream& f, const int a ), const int a)
                     : fp(f), arg(a) {}
};

// The actual error handler class
#ifdef INHERIT_ERRORBUF
class ErrorStream : public Errorbuf, public ostream, virtual public ios
#else
class ErrorStream : public ostream, virtual public ios
#endif
{

#ifndef INHERIT_ERRORBUF
    friend Errorbuf;
#endif    

    private:
       static long int efirst;
       static long int elast;
       static long int msgnum;       // count of warning messages

       int errstatus;
       int errcount;
       ostream& my_os;
       char *prog;

       void nomore();

       friend void Warning(ErrorStream& ehr, const int eval);
       friend void    Fail(ErrorStream& ehr, const int eval);
       friend void   Fatal(ErrorStream& ehr, const int eval);

       protected:
           virtual int write_buf(const char* s, const int len, const int eof);   
#ifndef INHERIT_ERRORBUF
       Errorbuf buffr;
#endif                      
      ErrorStream(const ErrorStream& er);
    public:
          ErrorStream(ostream& user_os = cerr) :  errcount(0),
#ifdef INHERIT_ERRORBUF
                    ios( (streambuf*)this ),
#else                                        
                    ios(&buffr),buffr((ErrorStream*)this),
#endif
                my_os(user_os),prog(NULL),errstatus(0) { } //HERE
         ErrorStream(const char *s,ostream& user_os = cerr);
      ~ErrorStream();

#ifdef INHERIT_ERRORBUF
          virtual int overflow(int c = EOF);
#else
          virtual int sync() { return buffr.sync(); }
#endif

      void close();

      void reset()            { errstatus = 0;    }
      int status() const        { return errstatus; }
      int count()  const            { return errcount;  }

      static void first_message(const long int fmsg)        { efirst = fmsg-1; }
      static void maximum_messages(const long int mxmsg)    { elast = mxmsg+1; }

      // set the error status
      ErrorStream& operator=(const int err);

          // add to the error status
          ErrorStream& operator|=(const int err);

      // increment the error status (pre-increment)
          ErrorStream& operator++()           
                       { errstatus++;        return *this; }
#ifndef __ATT2__
      // increment the error status (post-increment)
#ifndef __GNUC__
          ErrorStream operator++(int);           // DOES NOT WORK WITH GCC
#endif
#endif
          ErrorStream& operator+=(const int inc)
                       { errstatus += inc;   return *this; }
          // one way to write error messages
      void warning(const char *msg = NULL);
      void nonfatal(const char *msg = NULL) { warning(msg); }
      void fatal(const char * = NULL );
      void fail(const char *msg = NULL);
      void memory(const void * = NULL );

      void  warning(const int eval, const char *msg = NULL);
      void nonfatal(const int eval, const char *msg = NULL)
                      { warning(eval, msg); }
      void    fatal(const int eval, const char *msg = NULL);
      void     fail(const int eval, const char *msg = NULL);
      void   memory(const int eval, const void * = NULL );    

      // maninpulator version of fatal and warning
          friend ErrorStream& fatal(ErrorStream& er)
                      { er.fatal();   return er; }
          friend ErrorStream& warning(ErrorStream& er)
                      { er.warning(); return er; } 
          friend ErrorStream& fail(ErrorStream& er)
                      { er.fail(); return er; } 

          friend ErrManipRec   fatal(const int eval)
                  { return ErrManipRec(::Fatal,eval);  }
          friend ErrManipRec warning(const int eval)
                  { return ErrManipRec(::Warning,eval); } 
          friend ErrManipRec fail(const int eval)
                  { return ErrManipRec(::Fail,eval); } 

      typedef ErrorStream& (*ErrManip)(ErrorStream&);

    // applicator for the zero parameter manipulators
       friend ErrorStream& operator<<(ErrorStream& err, ErrManip f)
                        { (*f)( err ); return err; }

    // applicator for the one parameter manipulators
       friend ErrorStream& operator<<(ErrorStream& err, ErrManipRec r)
                        { r.fp(err, r.arg ); return err; }    
};

// a nonmember functions, mostly so I remember how to do a manipulator
ostream& terminate(ostream& os); 
#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T19:15:14.240

```
class ErrorStream : public ostream, virtual public ios
{ 
```

说 your `ErrorStream`is a type of `ostream`，这意味着它本身的一部分是 a `ostream`。

```
 ostream& my_os; 
```

这表示您`ErrorStream` *还*包含对 ostream 对象的引用。我相当肯定这两个之一是错误的。是`ErrorStream`流，还是*包含*对流的引用？由于您似乎默认为`cerr`，我相信您想要该成员。

```
ErrorStream(ostream& user_os = cerr) :  errcount(0),
                ios(&buffr),buffr((ErrorStream*)this),
            my_os(user_os),prog(NULL),errstatus(0) { } //HERE 
```

此构造函数会导致错误，因为您初始化了 member `my_os`，但您从未告诉它如何构造父`ostream`对象。编译器有助于尝试默认构造它，但`ostream`不能默认构造。所以编译器不知道如何构造父级`ostream`和错误。

修复会很复杂，但第一步是删除`ostream`父级。如果你想保留一些功能，你可以添加一个转换运算符

```
operator std::ostream&() {return my_os;} 
```

在某些情况下，这可能会让您假装这`ErrorStream`是一个。`ostream`

# asp.net-mvc - 在回发 ASP.NET MVC 上获取复选框值

> ID：11618504
> 
> 赞同：5
> 
> 时间：2012-07-23T18:43:41.617
> 
> 标签：asp.net-mvc, razor

我正在编写一个 ASP.NET MVC 应用程序。我是初学者，所以我相信这真的很容易。我引用[了 ASP.NET MVC - How to get checkbox values on post](https://stackoverflow.com/questions/1495038/asp-net-mvc-how-to-get-checkbox-values-on-post)但代码不再可用，使其几乎无用。

这是我的观点：

```
@using (@Html.BeginForm("Promote", "FPL", FormMethod.Post))
{
<div data-role="fieldcontain">
<fieldset id="PromotionInfo" name="PromotionInfo">
<legend><b>@Model.itemType Promotion Details</b></legend>
    <label for="TargetDate">Target Date: </label>
    <input type="date" id="TargetDate" data-role="datebox" data-options='{"mode": "flipbox"}' />

    <label for="EmailCC">Email cc List: </label>
    <input type="email" id="EmailCC" />

    <div  data-role="fieldcontain">
    <fieldset data-role="controlgroup">
    <legend>Choose Destination Server(s): </legend>

    @foreach (DataRow server in Model.destinationServerList.Rows)
    {
    <label for="@server.ItemArray[0]">@server.ItemArray[1]</label>  
    <input type="checkbox" name="destinationServerSID" id="@server.ItemArray[0].ToString()"  />
    }

    </fieldset>
    </div>
</fieldset>

</div>

<input type="submit" value="Submit" />
} 
```

这是我的控制器：

```
 public ActionResult Promote(string id)
    {
        //Model(item) construction occurs here

        return View(item);
    }

    [HttpPost]
    public ActionResult Promote(FormCollection collection)
    {
        try
        {
            string[] test = collection.GetValues("destinationServerSID");
        }
        catch (Exception ex)
        {
            return null;
        }
    } 
```

test[] 变量包含一个 2 项数组，两者的值都为“on”，但是，我的项目列表超过 2 项。它只为您选择的每个值包含一个“on”，但没有“off”值。我需要复选框的实际值（id 字段）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:50:36.150

ID 不会发布到服务器。只有名称和值才会发布到服务器，并且只有在选中复选框时才会发布。

尝试`value`使用 设置属性`@server.ItemArray[0].ToString()`。

```
<input type="checkbox" name="destinationServerSID" value="@server.ItemArray[0].ToString()"  /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T18:52:46.050

默认 HTML 发布行为不发送未选中框的值。您可以改用 Html.CheckboxFor 方法，它将生成所有必要的输入以始终发布值。

# sql - 纪元时间在不同时区显示不同日期？

> ID：11618505
> 
> 赞同：0
> 
> 时间：2012-07-23T18:43:49.080
> 
> 标签：sql, timezone, epoch

我有一个纪元时间（秒）。它向我展示了不同的时间`JAVA`，当我这样做时

`new Date(time*1000)`

当我这样做时，在 SQL 中

`SELECT cast((DATE '1970-01-01' + time/24/60/60) as timestamp) from dual`.

问题主要是，我需要凌晨 2 点到凌晨 4 点之间特定间隔的数据。因此，当我将秒值传递给 SQL 查询时。它将其解释为上午 9 点到 11 点之间。我知道这是因为时区差异。

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:55:42.780

尝试改用时间戳：

```
SELECT cast((TIMESTAMP '1970-01-01 00:00:00.00' + time/24/60/60) as timestamp)
  FROM dual 
```

演示：[http ://www.sqlfiddle.com/#!4/d41d8/1465](http://www.sqlfiddle.com/#!4/d41d8/1465)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:55:44.870

我对处理任何时区相关问题的建议是始终在内部将时间处理为 UTC，并将它们作为 UTC 存储在数据存储中。仅将它们转换为本地时间以显示给用户。

# php - 在shell中运行连接到mysql db的php脚本

> ID：11618511
> 
> 赞同：0
> 
> 时间：2012-07-23T18:44:57.070
> 
> 标签：php, mysql, shell

我更喜欢在 shell 中运行 php 脚本，因为输出是直接输出的，而不是像在浏览器中那样分批输出。这对于查看脚本实际上仍在工作以及查看长脚本的哪个部分花费的时间最长非常有帮助。

当我像这样从 shell 调用 php 脚本时

```
php filename.php 
```

它工作正常，但前提是脚本中没有建立数据库连接。

显然， mysql_connect() 似乎失败了：

```
Warning: mysql_connect(): [2002] No such file or directory (trying to connect via unix:///var/mysql/mysql.sock) 
```

我怎样才能解决这个问题？

谢谢！

查尔斯

编辑 1

我按如下方式连接到数据库：

```
//Connect to db
$user="root";
$databasePassword="";
$host="localhost";
$database="database1";
$identifier=mysql_connect($host,$user,$databasePassword,true);
$db1=mysql_select_db($database); 
```

**找到解决方案**

[这](https://stackoverflow.com/questions/4219970/warning-mysql-connect-2002-no-such-file-or-directory-trying-to-connect-vi)向我展示了正确的方法 - 就像用“127.0.0.1”替换“localhost”一样简单，因为：“原因是“localhost”是 mysql 驱动程序的特殊名称，使其使用 unix 套接字连接到 mysql 而不是 tcp 套接字。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:51:53.907

显示您的 mysql_connect() 语句，如果您的守护程序在此端口上侦听，也许您应该尝试连接到 localhost:3306。

见：php.net/mysql_connect

如果相同的脚本在通过浏览器调用时有效，那么您的命令行环境的 ini 文件显然会有所不同。ini_get("mysql.default_host") 显示如果您不指定要连接的主机，则使用什么设置。

# javascript - 循环内 setTimeout 中的变量（范围问题）

> ID：11618512
> 
> 赞同：3
> 
> 时间：2012-07-23T18:45:00.783
> 
> 标签：javascript, jquery

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)
> [在循环内调用 setTimeout 函数](https://stackoverflow.com/questions/5986588/calling-settimeout-function-within-a-loop)

在将其称为重复之前，我查看了互联网，每个人似乎都有不同的问题。如果有人可以帮助我解决这个问题，将不胜感激。

基本上，我拥有的是`for`嵌套在第三个循环中的两个循环。

```
for (a=0 ... a++) {
    for (b=0 ... b++) {
        setTimeout( ... + a + ..., 1000*b);
    }
    for (c=0 ... c++) {
        setTimeout( ... + a + ..., 1000*c);
    }
} 
```

这是一些伪代码，只是为了避免垃圾，但基本上我想将`a`值传递给定时器触发的回调函数。问题来自于`a`正在递增的事实，因此当触发事件时，该函数具有最后一个值，`a`而不是它注册的那个值。

我可以把它想象成 C/C++ 中的引用或指针，这真的很烦人。有什么方法可以赋予它永久的价值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T18:48:34.887

最简单形式的闭包可以解决问题：

```
for (a=0 ... a++) {
    (function(a){
       for (b=0 ... b++) {
           setTimeout( ... + a + ..., 1000*b);
       }
       for (c=0 ... c++) {
           setTimeout( ... + a + ..., 1000*c);
       }
    })(a);
} 
```

考虑到 Pointys 的答案：永远不应该将字符串传递给`setTimeout`.

您可以使用 3 参数形式`setTimeout`并传递函数（或对函数的引用）、时间值和函数的参数：

```
for (a=0 ... a++) {
     for (b=0 ... b++) {
         setTimeout( function(x){ /*do stuff, using x */}, 1000*b, a);
     }
} 
```

但是请注意，遗憾的是 3 参数形式在 Internet Explorer 中不起作用。

# php - 是否有类似 JQuery PHP 库的东西，使用 $.ajax 而不是 $.php？

> ID：11618513
> 
> 赞同：2
> 
> 时间：2012-07-23T18:45:06.447
> 
> 标签：php, jquery, ajax, json

[JQuery PHP 库](http://jquery.hohli.com/)创建了一个`$.php`与`$.ajax`. 像这样：

```
$.php(url);
php.complete = function (){
    $('#loading').slideUp('slow');
} 
```

...通过这样做，它添加了一大堆功能，可以让你从服务器上做 jQuery-y 的东西。但我不喜欢完整功能的工作方式。我更喜欢这个：

```
$.ajax(url)
   .complete(function() {
      $('#loading').slideUp('slow');
   }); 
```

...不同之处在于我想为每个单独的调用提供一个自定义的**完整处理程序。**现在的方式是，如果我使用 jQuery PHP 并进行第二次`$.php`调用并定义一个`php.complete`处理程序，新的`php.complete`处理程序将覆盖第一个处理程序。

这样的解决方案是否已经存在？如果不是，如何[修改 jQuery PHP 库](http://code.google.com/p/jquery-php/source/browse/trunk/javascript/jquery.php.js)以使其以这种方式运行？

注意：在 jQuery 1.8+ 中，complete() 已被弃用，取而代之的是 always()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:23:45.143

修改第 19 行以从方法中返回 jqXHR 对象。

[http://pastebin.com/tCzMBGtD](http://pastebin.com/tCzMBGtD)

```
$.ajax(... 
```

变成

```
return $.ajax(... 
```

# android - 反编译apk添加广告？

> ID：11618514
> 
> 赞同：0
> 
> 时间：2012-07-23T18:45:12.750
> 
> 标签：android, launcher

我使用这个.. `http://gotheme.goforandroid.com:8080/goLockerTheme/user/jspController/welcome?locale=en_US` 工具来制作自定义的储物柜主题。现在我想把它发布到市场上，并附上一个`startapp` 广告。

我知道这是可能的，因为这些人`https://play.google.com/store/apps/developer?id=Slingshot+Go+Lockers`一直在为他们的所有应用程序这样做。

我该怎么做？

编辑：如果有任何其他方式（反编译除外）请告诉我....

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T18:58:34.870

您可以使用 dex2jar 或 apktool 之类的程序来查看源代码，但您永远无法理解它。

# ajax - 在 AJAX 输出中实现点赞按钮？

> ID：11618518
> 
> 赞同：0
> 
> 时间：2012-07-23T18:46:00.500
> 
> 标签：ajax, facebook-like

我把这个放在我的索引页中的 body 标记之后：

```
<div id="fb-root"></div> 
```

和其余的 SDK 代码..

我正在通过 ajax 弹出窗口加载图像，并且我也在尝试为它们中的每一个加载一个类似的按钮，但它没有加载。

为什么是这样？我怎样才能让按钮对 AJAX 结果起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:52:15.420

```
 FB.XFBML.parse(); 
    twttr.widgets.load();
    IN.parse(document); 
```

这就是通过 javascript 附加喜欢时刷新喜欢的方式。

# iphone - AFNetworking+UIImage 先下载低分辨率图片

> ID：11618523
> 
> 赞同：0
> 
> 时间：2012-07-23T18:46:21.050
> 
> 标签：iphone, ios, ios5, afnetworking

我在使用 +UIImage`setImageWithURL:`方法时遇到了一些麻烦。我想做的是首先发送一个缩略图的异步请求。此图像非常小，因此加载速度应该相当快。我还想发送另一个异步请求来下载图像的高分辨率版本，因为它需要更长的时间来加载。

我认为它会是这样的：

```
NSURL *thumbURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.server.com/uploads/thumbs/%@.png", name]];
[imageView setImageWithURL:thumbURL placeholderImage:[UIImage imageNamed:@"PHImage.png"]];

NSURL *hiRezURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.server.com/uploads/%@.png", name]];
[imageView setImageWithURL:hiRezURL]; 
```

但这只会加载高分辨率图像并且需要很长时间。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:16:23.993

如果你看一下你的实现，`UIImageView+AFNetworking.m`你会发现它声明了一个属性：

```
@property (readwrite, nonatomic, retain, setter = af_setImageRequestOperation:) AFImageRequestOperation *af_imageRequestOperation; 
```

并且该`- (void)setImageWithURL:(NSURL *)url placeholderImage:(UIImage *)placeholderImage`方法所做的第一件事（它实际上首先调用`-setImageWithURLRequest:placeholderImage:success:failure:`）是`[self cancelImageRequestOperation];`并且实际上取消了类属性的操作`af_imageRequestOperation`。

这意味着，当您再次（在第 3 行）调用该方法时，它会取消第 1 行的操作。

如果您`+ imageRequestOperationWithRequest:imageProcessingBlock:success:failure:`在成功块中使用并设置图像视图的图像，则更好的方法是。我想如果你使用这种方法，你也需要`[operation start];`事后打电话。

希望能帮助到你。

# jquery - 使用 jquery 验证表单

> ID：11618524
> 
> 赞同：0
> 
> 时间：2012-07-23T18:46:25.790
> 
> 标签：jquery, jquery-plugins, validation

![形式](../Images/5b615a3f2411d99a511e38b98aa45a9f.png)

我有这个表格。我需要验证一些文件，所以我[将此插件](http://docs.jquery.com/Plugins/Validation#Options_for_the_validate.28.29_method)与以下代码一起使用：

```
 $("#filter").validate({
                  rules: {
                    "n-habitaciones": {
                      required: false,
                      number: true
                    },
                    "superficie-min":{
                      required: false,
                      number: true
                    },
                    "superficie-max":{
                      required: false,
                      number: true
                    },
                    "precio-min":{
                      required: false,
                      number: true
                    },
                    "precio-max":{
                      required: false,
                      number: true
                    }

                  }
            }); 
```

这很好用！但如果没有设置，我需要在提交时将“superficie”和“Precio”中的输入文本设置为空（“”）。值“Desde”和“Hasta”就像标签一样。这是表单代码：

```
 <fieldset>
            <legend>Superficie(m² o Hs)</legend>
            <input type="text" id="superficie-min" name="superficie-min" class="numeric-input" value="Desde" onfocus="if(this.value=='Desde') this.value='';"  onblur="if(this.value=='') this.value='Desde';"/>
            <span> - </span>
            <input type="text" id="superficie-max" name="superficie-max" class="numeric-input" value="Hasta" onfocus="if(this.value=='Hasta') this.value='';"  onblur="if(this.value=='') this.value='Hasta';"/>
            <br />
            <span class="note">Si busca un campo, ingrese las hectáreas, de otra manera, ingrese m²</span>
        </fieldset>

        <fieldset>
            <legend>Precio</legend>
            <input type="text" name="precio-min" value="Desde" class="numeric-input" onfocus="if(this.value=='Desde') this.value='';"  onblur="if(this.value=='') this.value='Desde';"/><span> - </span>
            <input type="text" name="precio-max" value="Hasta" class="numeric-input" onfocus="if(this.value=='Hasta') this.value='';"  onblur="if(this.value=='') this.value='Hasta';"/>
        </fieldset> 
```

我怎样才能做到这一点？

# objective-c - 如何使用 `NSControl` 和 `NSActionCell` 编写自定义控件

> ID：11618525
> 
> 赞同：1
> 
> 时间：2012-07-23T18:46:25.413
> 
> 标签：objective-c, cocoa

我在这里寻找一个最小的可行示例。我已经搜索和阅读了好几天了，但我找不到一个最新的资源。

我的 NSControl 工作正常，但只要我添加

```
+ (Class)cellClass {
    return [MYCustomCell class];
} 
```

我得到这个输出，我的窗口停止正确绘制

```
<Error>: kCGErrorFailure: CGSShapeWindow
<Error>: kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() to catch errors as they are logged.
_NXPlaceWindow: error setting window shape (1000)
<Error>: kCGErrorFailure: CGSShapeWindow
_NSShapeRoundedWindowWithWeighting: error setting window shape (1000) 
```

我已经阅读了我能找到的关于这个主题的所有内容（包括 Apple 文档），但是对于正确实施来说，一切似乎都还很模糊。如果有人能指出我正确的方向（正确的代码示例或文章），我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:21:02.133

我相信我终于找到了答案。

-cellSize 方法必须在您的 NSCell/NSActionCell 子类中被覆盖。经过大量堆栈跟踪后，我发现此方法将返回 (40000, 40000) 作为您的单元格大小，如果它没有被覆盖，从而产生我们看到的大小错误。由于我的 NSActionCell 子类有特殊需要，需要单元格占据整个 NSControl 的绘图区域，所以我简单地使用了以下内容。

```
- (NSSize)cellSize {
    return self.controlView.bounds.size;
} 
```

希望这对您的情况有所帮助。

# javascript - 函数接受回调值时的 Javascript 关闭

> ID：11618530
> 
> 赞同：1
> 
> 时间：2012-07-23T18:46:51.753
> 
> 标签：javascript, facebook-graph-api, for-loop, closures, parameter-passing

我一直在尝试理解 Javascript 闭包，并认为我正在做一些事情。我已经成功地在我的内部函数中返回了一个迭代整数（由 for 循环生成）。

然而，这个有问题的函数也需要一个由函数本身生成的参数。请原谅我的术语——但它可能是一个回调参数（基本上，参数的值是根据我发出的函数返回的）。

下面有更多关于我的问题的解释，但首先，这里是有问题的代码（闭包工作 - [value] 是 i 每次迭代的变化值）：

```
FB.api('/me/tagged?limit=100', function(response) {

for (var i=0; i<response.data.length; i++){

    var taggedId = response.data[i].id;
    var fromId = response.data[i].from.id;
    var fromName = response.data[i].from.name;

    var taggedQuery = new Parse.Query('tagged');
    taggedQuery.equalTo('taggedId',taggedId);
    taggedQuery.first({ //.first returns the first match (.find returns all)
        success: (function(value) {
            return function() {
            console.log(response.data[value]);
            }
        })(i),
        error: function(taggedRecError){
            console.log('error: '+taggedRecError.message);
        }
   });
} //for
}); 
```

所以基本上，在上面，我正在查询 Facebook 以获取用户的标记帖子。我使用 for 循环遍历每个结果。

然后我使用 Parse.js 来查询我是否为此标记对象保存了记录。

我希望我的代码能够识别我是否这样做（有一个保存的对象）。在 Parse 中，我通常会使用以下内容来执行此操作：

```
taggedQuery.first({ //.first returns the first match (.find returns all)
        success: function(value) {
                if(value){
                   //do nothing
                 }
                else {
                   //do something - e.g. save to Parse data store
                }

        }
}); 
```

因此，如您所见，我使用返回的参数（值）的存在来决定下一步该做什么。

但是，在第一个代码块中，您可以看到，为了使闭包正常工作，我必须将参数 ('(i)') 直接传递给成功函数，以便获得适当的 i 值以在功能。但是，这会扭曲我们从 Parse 获得的结果 - 即返回的对象来自我传入的参数 - 而不是 Parse 根据我的数据存储返回一个

我似乎陷入了困境 22：手动传入参数以成功关闭（但随后丢失 Parse 调用返回的参数），或不传入任何参数以确保 Parse 根据我的数据存储返回正确的响应（但然后在所述函数中具有错误的 i 值：即 - 没有关闭）。

我希望这很清楚。如果没有，请告诉我。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:51:30.823

你可以用[`[].forEach`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach#Compatibility)它来简化很多：

```
FB.api('/me/tagged?limit=100', function(response) {
    response.data.forEach(function(value, i) {
        var taggedId = value.id;
        var fromId = value.from.id;
        var fromName = value.from.name;
        var taggedQuery = new Parse.Query('tagged');
        taggedQuery.equalTo('taggedId', taggedId);
        taggedQuery.first({
            success: function(someOtherData) {
                console.log(value, i, someOtherData);
            },
            error: function(taggedRecError) {
                console.log('error: ' + taggedRecError.message);
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:54:26.487

你走在正确的轨道上，这就是我认为你想用你的`success`参数做的事情：

```
taggedQuery.first({ //.first returns the first match (.find returns all)
    success: (function(index) {
        return function(value) {
            //value is what Parse passes
            //index is your preserved index
        };
    }(i))
}); 
```

# xml - 在 XSL 中使用 If

> ID：11618537
> 
> 赞同：0
> 
> 时间：2012-07-23T18:47:17.833
> 
> 标签：xml, xslt, xml-serialization, xslt-1.0, xslt-2.0

嗨，我正在尝试在 xsl 中使用 if 将输入 xml 转换为其他 xml。可以实现对某些无法获得准确输出的部分。帮助会很高兴。

输入 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Music>
<Music_Model>
    <Electronic>Guitar</Electronic>
    <Beats>Pad</Beats>
    <No_of_used>
        <info>4</info>
    </No_of_used>
    <Music_info>
        <Value>1234566</Value>
        <Description>
            <Value>1</Value>
        </Description>
    </Music_info>
</Music_Model>
<Music_Model>
    <Electronic>Piano</Electronic>
    <Beats>Pad</Beats>
    <No_of_used>
        <info>2</info>
    </No_of_used>
</Music_Model>
<Music_Model>
    <Electronic>Guitar123</Electronic>
    <Beats>Flute</Beats>
    <No_of_used>
        <info>3</info>
    </No_of_used>
    <Music_info>
        <Value>128888902</Value>
        <Description>
            <Value>2</Value>
        </Description>
    </Music_info>
</Music_Model>
<Music_Model>
    <Electronic>tabala</Electronic>
    <Beats>Pad</Beats>
    <No_of_used>
        <info>40</info>
    </No_of_used>
    <Music_info>
        <Value>1298932</Value>
    </Music_info>
</Music_Model>
</Music> 
```

注意：在上面输入xml。我感兴趣的是“如果输入 xml 没有**Musci_info**元素并且也有**Music_info**但没有**描述**，那么输出 xml 应该使用元素**No_of_used**并且应该只显示它​​的值。如果**Music_info**元素及其值可用，那么输出应该是正常的。我可以达到消除但不能得到准确。

预期输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Music>
<Record>
    <Electronic>Guitar</Electronic>
    <Beats>Pad</Beats>
    <music_info_value>1234566</music_info_value>
    <test_level>1</test_level>
</Record>
<Record>
    <Electronic>Guitar123</Electronic>
    <Beats>Flute</Beats>
    <music_info_value>128888902</music_info_value>
    <test_level>2</test_level>
</Record>
<not_found>
    <product>2</product>
</not_found>
</Music> 
```

使用我工作的代码显示输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Music>
<Record>
    <Electronic>Guitar</Electronic>
    <Beats>Pad</Beats>
    <music_info_value>1234566</music_info_value>
    <test_level>1</test_level>
</Record>
<Record>
    <Electronic>Guitar123</Electronic>
    <Beats>Flute</Beats>
    <music_info_value>128888902</music_info_value>
    <test_level>2</test_level>
</Record>
<Record>
    <Electronic>tabala</Electronic>
    <Beats>Pad</Beats>
    <music_info_value>1298932</music_info_value>
    <test_level/>
</Record>
<not_found>
    <product>4</product>
</not_found>
<not_found>
    <product>3</product>
</not_found>
<not_found>
    <product>40</product>
</not_found>
 </Music> 
```

我工作的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
    <Music>
        <xsl:for-each select="//Music_Model">
            <xsl:if test="//Music_Model/Music_info!=Music_info ">
                <Record>
                    <Electronic>
                        <xsl:value-of select="Electronic"/>
                    </Electronic>
                    <Beats>
                        <xsl:value-of select="Beats"/>
                    </Beats>
                    <music_info_value>
                        <xsl:value-of select="Music_info/Value"/>
                    </music_info_value>
                    <test_level>
                        <xsl:value-of select="Music_info/Description/Value"/>
                    </test_level>
                </Record>
            </xsl:if>
        </xsl:for-each>
        <xsl:for-each select="//Music_Model">
            <xsl:if test="//Music_Model/Music_info!=Music_info">
                <not_found>
                    <product>
                        <xsl:value-of select="No_of_used/info"/>
                    </product>
                </not_found>
            </xsl:if>
        </xsl:for-each>
    </Music>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:27:07.070

如果你只是在一个循环中检查 Music_Info/Description 的存在，它会让你知道你是否应该输出 not found ，所以这个：

```
<xsl:template match="/">
    <Music>
        <xsl:for-each select="//Music_Model">
            <xsl:choose>
                <xsl:when test="Music_info/Description">
                    <Record>
                        <Electronic>
                            <xsl:value-of select="Electronic"/>
                        </Electronic>
                        <Beats>
                            <xsl:value-of select="Beats"/>
                        </Beats>
                        <music_info_value>
                            <xsl:value-of select="Music_info/Value"/>
                        </music_info_value>
                        <test_level>
                            <xsl:value-of select="Music_info/Description/Value"/>
                        </test_level>
                    </Record>
                </xsl:when>
                <xsl:otherwise>
                    <not_found>
                        <product>
                            <xsl:value-of select="No_of_used/info"/>
                        </product>
                    </not_found>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>
    </Music>
</xsl:template> 
```

当应用于您的数据时，会产生以下输出：

```
<Music>
    <Record>
        <Electronic>Guitar</Electronic>
        <Beats>Pad</Beats>
        <music_info_value>1234566</music_info_value>
        <test_level>1</test_level>
    </Record>
    <not_found>
        <product>2</product>
    </not_found>
    <Record>
        <Electronic>Guitar123</Electronic>
        <Beats>Flute</Beats>
        <music_info_value>128888902</music_info_value>
        <test_level>2</test_level>
    </Record>
    <not_found>
        <product>40</product>
    </not_found>
</Music> 
```

这似乎是你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:36:06.273

这是一个更简单的推送样式样式表。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
 <Music>
   <xsl:apply-templates select="*/Music_Model[    Music_info/Description ]"/>
   <xsl:apply-templates select="*/Music_Model[not(Music_info/Description)]"/>
 </Music>
</xsl:template>

<xsl:template match="Music_Model">  
 <Record> 
  <xsl:copy-of select="Electronic|Beats"/> 
  <music_info_value><xsl:value-of select="Music_info/Value" /></music_info_value>
  <test_level><xsl:value-of select="Music_info/Description/Value" /></test_level>
 </Record>  
</xsl:template>

<xsl:template match="Music_Model[not(Music_info/Description)]">  
 <not_found>
   <product><xsl:value-of select="No_of_used/info" /></product>
 </not_found>
</xsl:template>

</xsl:stylesheet> 
```

这会根据您的要求生成输出，最后是 <not_found> 节点。

```
<Music>
  <Record>
    <Electronic>Guitar</Electronic>
    <Beats>Pad</Beats>
    <music_info_value>1234566</music_info_value>
    <test_level>1</test_level>
  </Record>
  <Record>
    <Electronic>Guitar123</Electronic>
    <Beats>Flute</Beats>
    <music_info_value>128888902</music_info_value>
    <test_level>2</test_level>
  </Record>
  <not_found>
    <product>2</product>
  </not_found>
  <not_found>
    <product>40</product>
  </not_found>
</Music> 
```

## 笔记

请注意，tabala（产品 40）包含在 not_found 列表中，因为正如您的规则所述，它没有描述。

# java - 在jsp中动态加载小程序

> ID：11618539
> 
> 赞同：1
> 
> 时间：2012-07-23T18:47:20.783
> 
> 标签：java, jquery, applet

我的代码中有以下小程序。我想从 jsp 中删除此代码，并在单击按钮时包含并在 jQuery 成功后删除。

```
<applet id="jzebra-applet" name="jZebra" code="jzebra.PrintApplet.class" archive="${pageContext.request.contextPath}/jzebra.jar" width="1" height="1">
      <param name="printer" value="zebra">
</applet> 
```

我正在使用 jQuery 和 Struts2。

提前谢谢你的帮助。如果有任何关于我的问题的进一步信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:56:58.410

假设您使用与模板相同的 JSP 页面进行显示，您可以在页面中放置一个 Struts 条件标记：

```
<s:if test="%{requestSuccessState == false}">

<applet id="jzebra-applet" name="jZebra" code="jzebra.PrintApplet.class" archive="${pageContext.request.contextPath}/jzebra.jar" width="1" height="1">
      <param name="printer" value="zebra">
</applet>

</s:if> 
```

确保在 Action 类中设置 requestSuccessState。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:29:37.693

实际上，根据 Java 6 文档，调用 applet 最合适的方法是使用 Sun 提供的 javascript。这是因为不同的浏览器对小程序的处理方式不同。有些人想要 EMBED 标签，有些人想要 APPLET 标签等等。

话虽如此，如果您遵循他们的建议，只需在您的点击事件中调用 javascript。

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script>
function runApplet(){
    var attributes = {
    code : 'jzebra.PrintApplet.class',
    archive : '${pageContext.request.contextPath}/jzebra.jar',
    width : 500,
    height : 300
    };
    var parameters = {
    printer : 'zebra'
    };
    var version = '1.6';
    deployJava.runApplet(attributes, parameters, version);
}
</script>
...
<h:commandButton value="Run applet" onclick="runApplet();" action="#"/> 
```

我在这里使用来自 JSF 的 commandButton，但同样的想法适用于您正在使用的任何基于 html 的表示层。

# benchmarking - 无法在 REST Web 应用程序上使用 ApacheBenchmark 运行基准测试

> ID：11618541
> 
> 赞同：1
> 
> 时间：2012-07-23T18:47:37.217
> 
> 标签：benchmarking, apachebench

我想使用 ab 对两个简单的 REST web 框架（RESTlet 和 RESTfulie）进行基准测试我使用这两个框架（一个 hello world）部署了一个非常简单的应用程序，然后我尝试运行这个命令：

```
ab -n 1000 -c 1 http://localhost:8080/ 
```

但我总是得到这个错误：

> 对本地主机进行基准测试（请耐心等待）...apr_pollset_poll：指定的超时已过期（70007）

谁能告诉我我的问题是什么？或者我可以使用哪种基准测试工具来测试 REST Web 应用程序我猜 ab 对 REST 过敏，因为它在 apache/php 服务器上完美地工作。

# linux - 在多个进程之间共享共享对象

> ID：11618543
> 
> 赞同：2
> 
> 时间：2012-07-23T18:47:47.507
> 
> 标签：linux, shared-objects

是为每个进程单独加载共享对象还是在它们之间共享一个共享对象？例如，假设某个程序使用 libc.so。然后启动该程序的两个进程。这个共享对象会在其内存区域中为每个进程加载两次，还是会在内存中的某个地方加载一次并映射到两个进程的内存中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:51:22.753

共享对象通过标志`mmap()`加载。`MAP_PRIVATE`这意味着这些是写时复制映射，它们最初指向相同的内存，但是一旦它们中的任何一个被修改，它就会在修改之前被复制并“取消共享”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:05:20.613

检查这个[线程](https://stackoverflow.com/questions/4856255/the-difference-between-fork-vfork-exec-and-clone))。理论上每个进程都拥有自己的地址空间，线程应该用于此目的，但这是系统实现的问题。

# windows-phone-7 - WP7：了解深色/浅色图标以及如何根据它们动态更改（通过 mvvmlight）？

> ID：11618550
> 
> 赞同：0
> 
> 时间：2012-07-23T18:48:15.537
> 
> 标签：windows-phone-7, xaml, themes, mvvm-light, application-bar

据我了解，wp7 中有 2 个主题，明暗。我注意到应用程序栏有通用图像，它们会自动变为亮或暗。

但是我将 SDK 图标目录中的图像放到 xml 屏幕上，我注意到它们有 2 个变体，浅色或深色。

问题是当我查看深色或浅色页面时，应用程序栏按钮会根据主题更改，但图像不会。

我这样做对吗？

那么我是否必须检查事件更改或其他内容？所以我知道主题已更改为自动将图像从浅色更新为深色（或从深色到浅色）。

如果是这种情况，我正在使用 mvvmlight 并且我的代码非常干净，这可以在 viewmodel 中完成还是必须在 app.xaml 中进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:56:51.713

请看一下[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ff769545%28VS.92%29.aspx)

从 MVVMLight 开始，您可以在 MainViewModel 构造函数或您拥有的任何主视图模型类中检测当前主题。

# java - 静态成员初始化的静态块与私有静态方法

> ID：11618551
> 
> 赞同：12
> 
> 时间：2012-07-23T18:48:18.223
> 
> 标签：java, methods, static-methods

静态变量可以使用私有静态方法或静态块进行初始化。两者之间有什么细微的区别吗？是否有不能使用静态方法初始化静态成员的情况？我发现后者更具可读性。

静态块初始化：

```
private static int NUM_ITER;
static {
    // Operations
    NUM_ITER = //val from above operations.
} 
```

私有静态方法初始化：

```
private static int NUM_ITER = calculateNumIter();

// Some method comment on how we are calculating.
private static int calculateNumIter()
{
    // Operations.
    return //value_from_operations.
} 
```

我更喜欢第二个，因为它更具可读性。有没有我必须首先使用的情况（静态块）？

初始化静态成员（最终成员和变量）的最佳编码约定/设计是什么？即使从这个[线程](https://stackoverflow.com/questions/8189473/static-block-vs-static-method-initializing-static-fields)我了解到私有静态方法比静态块有优势。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:50:42.247

如果两个不同的变量相互依赖并且不能独立初始化，则静态块将是必要的（或至少有用）。

例如，假设您需要从文件中读取两个值。您可以将这两个值存储在一个附加对象中。但是如果你真的想要两个常量，静态块很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:04:27.773

我建议使用任何语法来保持你的代码干净和可读：

*   如果初始化数量为 1 行，最多 2 行，非常简单的代码行，则使用静态块；

*   如果初始化是一个复杂的操作，那么最好使用一个好名字的方法；

*   如有疑问，请使用方法语法并使用方法名称来声明不仅是哪个变量，而且还要声明您的初始化方式（即 initializeValueWithRandomNumber() ）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T18:56:39.403

1.  `static Initializer`块（您的 1 选项）在 JVM 加载类时执行，甚至**在**初始化任何`static`变量之前。

2.  它是一次拥有所有静态变量的好地方。

3.  您的第二个选项可用于通过将多个参数传递给初始化方法的参数来初始化**多个变量。** `static`

# html - 在单个 div 下添加 2 个图像

> ID：11618553
> 
> 赞同：0
> 
> 时间：2012-07-23T18:48:29.177
> 
> 标签：html, css, image

我一直在尝试在一个 div 下添加两个图像，但它们没有按我想要的方式显示。

我想在图像之间留出空间，这没有发生。

这是CSS，

```
.sidebarBody {
    text-align:center;
    padding: 5px;
} 
```

这是HTML，

```
<div class='sidebarBody'>
    <img src="r.gif" />
    <img src="s.gif" />
</div> 
```

为什么填充不能在所有方面工作？第二张图片显示在第一张图片之后，没有任何空格。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:53:05.103

您的 css 不会在图像周围放置任何填充，它只会告诉它进行封闭`<div>`。使用以下内容：

```
.sidebarBody img {
   text-align:center;
   padding: 5px;
} 
```

这告诉浏览器为`.sidebarBody`（div 类）内部的每个图像添加 5px 填充。

# node.js - Node.JS/async for 循环，嵌套回调中的当前迭代

> ID：11618554
> 
> 赞同：2
> 
> 时间：2012-07-23T18:48:29.460
> 
> 标签：node.js, asynchronous

试图围绕一些基本的异步编程概念。

现在我基本上有两个函数，现在我们称它们为 getOne 和 getAll。getAll 本质上是一系列循环并调用 getOne，然后将其映射到哈希并将其发送回链中。这基本上是我在coffeescript中所拥有的：

```
getOne = (key, callback) ->
    try
        # find object referenced by key
        object = "blah blah"
        callback(null, object)
    catch(error)
        callback(error, null)

getAll = (keys, callback) ->
    results = {}
    try
        count = keys.length
        for i, key of keys
            count--
            getOne key, (err, result) ->
                if(err)
                   # do something
                else
                   results[key] = result
                if count is 0
                   callback "", results
    catch
        callback error, results 
```

上面的代码基本上输出了一个哈希，其中键不一定与预期的数据对齐，这是预期的 for 循环异步处理的方式。但是，我似乎无法想出一个不阻塞循环并导致所有内容都被串行处理而不是保持并行处理的解决方案。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:05:32.630

您编写的代码没有任何内在的异步性。如果您担心回调`getOne`需要很长时间才能执行，您有几个选择。

*   使用[异步](https://github.com/caolan/async/)库
*   用于[`process.nextTick`](http://nodejs.org/docs/latest/api/process.html#process_process_nexttick_callback)延迟 for 循环的每次迭代的执行

第一个选择肯定更容易。

第二个选项涉及将您的 getAll 函数重写为递归函数（而不是使用`for`）并将递归子调用包装在`process.nextTick`.

这篇文章对于理解如何使用`process.nextTick`来完成这个相当有用：[Understanding process.nextTick()](http://howtonode.org/understanding-process-next-tick)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:37:42.800

使用这个`async`库，就这么简单：

```
getAll = (keys, callback) ->
  funcs = {}
  keys.forEach (key) => funcs[key] = (_callback) =>
    getOne key, _callback
  async.parallel funcs, callback 
```

# linq - LINQ 查询具有递归关系的聚合计数

> ID：11618556
> 
> 赞同：4
> 
> 时间：2012-07-23T18:48:40.097
> 
> 标签：linq, linq-to-entities

抱歉，我想不出更好的标题！:)

我有一个名为 Process 的表，它具有定义 Process-*Subprocess 的递归关系

现在，每个 Process 都可以附加一个或多个指标： Process-*Metric

所以我的进程表看起来像：

```
PROCESS
-------
ID
PID (fkey on Process.ID) 
```

我的指标表看起来像：

```
METRIC
------
ID
PID (fkey on Process.ID) 
```

将 LINQ 与 EF 一起使用，我可以构建一个返回以下总和的查询：

*   与进程关联的指标计数
*   与作为该进程后代的所有子进程关联的指标的计数

如果可能的话，我正在寻找一种通过对数据库的一次调用来返回此信息的方法。

谢谢！

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:57:16.703

基本上你有两个选择。

1.  将两个表读入内存并在代码中处理结果。适合小型收藏。
2.  创建具有递归 CTE 的视图并在 EF 中映射该视图。加入那个观点。写起来更复杂，但性能最好，尤其是对于大型集合。

# c# - 将 asp.net 中的目录文件与自定义构建的过程相结合

> ID：11618558
> 
> 赞同：0
> 
> 时间：2012-07-23T18:48:45.057
> 
> 标签：c#, asp.net

我有两个包含文件的目录。我想将所有这些文件合并为一个。**我已经知道本机缩小，但我不想这样做，**因为我需要一些定制的东西（它是一个单页应用程序，根据用户类型和其他几个条件）。

假设在文件夹中`MyScripts`我有文件`Script1.js, Script2.js .... Script14.js`。我想使用字符串生成器打开并附加这些文件，然后创建一个`MyFullScript.js`保存到`MyScripts`文件夹中的合并文件。我不确定在哪里寻找这个，有什么方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:03:42.397

为什么不在 c# 上编写一个快速函数来连接所有内容：

```
DirectoryInfo  info = new DirectoryInfo ("c:\\temp"); //Path to JS files
StringBuilder sb = new StringBuilder();

foreach(var item in info.GetFiles("*.js"))
{
    sb.Append(File.ReadAllText(item.FullName));
    sb.Append(Environment.NewLine);
} 
```

现在`sb`已经连接了所有脚本；如果需要，您可以将字符串保存到新`.js`文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:00:23.510

嗨，这可能有帮助，也可能没有帮助，在通过 blu-imp 实现 jQuery FileUpload 时遇到它。无论如何，根据需要提供捆绑和缩小服务，对我来说似乎是可配置的，无论如何都比本机堆栈更可配置，并且可以提供您需要的粒度！

[http://clientdependency.codeplex.com/](http://clientdependency.codeplex.com/)

重新阅读您的帖子后，我认为这可能会有所帮助，特别是因为源代码在 code-plex 上可用，所以我认为这可能提供您需要的 80% 的功能，您可能需要分叉它并添加自定义20% 来满足你的需要！

# php - Preg Match Spaces & 新线？

> ID：11618565
> 
> 赞同：0
> 
> 时间：2012-07-23T18:49:08.493
> 
> 标签：php, regex

我有以下代码

```
$pattern = '#\bset_message\("(.*?)"\)#';
$found = preg_match($pattern, $string, $matches); 
```

但是如果我的 $string 是

```
set_message("Hello there
I like
to 
eat
CHEES!"); 
```

它不会返回任何匹配项，但如果我使用它会返回

```
set_message("Hello there!"); 
```

如何添加新行和类似的东西（\r\n、\n 等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:51:14.013

只需使用`m`修饰符。

```
$pattern = '#\bset_message\("(.*?)"\)#m'; 
```

当你想要这`.`也意味着`\n`，你需要同时使用`m' and`s` 修饰符：

```
$pattern = '#\bset_message\("(.*?)"\)#ms'; 
```

# ruby-on-rails - 数组的未定义方法“%”

> ID：11618567
> 
> 赞同：1
> 
> 时间：2012-07-23T18:49:09.757
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord

来自控制器 + 错误的代码：

```
def search_conditions
    conditions = []
    if !params[:player_name].nil? && !params[:player_name].empty?
      conditions << ["lower(players.name) LIKE ?", "#{params[:player_name].downcase}%"]
    end
    conditions
end

def index
    @games = Game.joins([:player_one, :player_two]).where(search_conditions)
end

undefined method `%' for ["lower(players.name) LIKE ?", "test%"]:Array
Stack Trace:
activerecord (3.2.6) lib/active_record/sanitization.rb:121:in `sanitize_sql_array'
activerecord (3.2.6) lib/active_record/sanitization.rb:28:in `sanitize_sql_for_conditions'
activerecord (3.2.6) lib/active_record/relation/query_methods.rb:324:in `build_where'
activerecord (3.2.6) lib/active_record/relation/query_methods.rb:136:in `where'
app/controllers/game_controller.rb:5:in `index' 
```

查看堆栈跟踪，我搜索了活动记录源，并能够在 sanitize_sql_array 方法中找到导致问题的行：

```
statement % values.collect { |value| connection.quote_string(value.to_s) } 
```

现在，我对 ruby​​ 的了解还不够，无法确切知道那条线的作用。我认为它最初与字符串中的百分号有关，但删除它仍然会导致相同的错误。我什至还尝试通过创建多维数组来完全构造字符串，但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T19:05:32.677

您将数组数组传递给`where`，而不仅仅是一个数组。这意味着`statement`被设置为一个数组，但它需要一个字符串（`%`在字符串上进行字符串格式化，例如：）`"hello %s" % "world" => "hello world"`。

```
conditions = []
conditions << ["lower(players.name) LIKE ?", "#{params[:player_name].downcase}%"]

  => [ ["lower(players.name) LIKE ?", "..."] ] 
```

改变：

```
conditions << ["lower(players.name) LIKE ?", "#{params[:player_name].downcase}%"] 
```

至：

```
conditions.push "lower(players.name) LIKE ?", "#{params[:player_name].downcase}%" 
```

# tomcat - 使用 JENA 和 Tomcat 从 TDB 损坏中恢复

> ID：11618568
> 
> 赞同：1
> 
> 时间：2012-07-23T18:49:15.560
> 
> 标签：tomcat, servlets, jena, triplestore

我正在使用 Jena 和 Tomcat 开发一个 Web 应用程序，我发现通常在抛出异常之后，TDB 会发生一些事情，并且某些从模型中检索数据的调用会导致此 execption：

```
org.openjena.atlas.lib.InternalErrorException: Invalid id node for subject (null node): ([00000000000010D2], [000000000000003D], [0000000000000072])
    at com.hp.hpl.jena.tdb.lib.TupleLib.triple(TupleLib.java:130)
    at com.hp.hpl.jena.tdb.lib.TupleLib.triple(TupleLib.java:116)
    at com.hp.hpl.jena.tdb.lib.TupleLib.access$000(TupleLib.java:45)
    at com.hp.hpl.jena.tdb.lib.TupleLib$3.convert(TupleLib.java:77)
    at com.hp.hpl.jena.tdb.lib.TupleLib$3.convert(TupleLib.java:73)
    at org.openjena.atlas.iterator.Iter$4.next(Iter.java:301)
    at com.hp.hpl.jena.util.iterator.WrappedIterator.next(WrappedIterator.java:80)
    at com.hp.hpl.jena.util.iterator.Map1Iterator.next(Map1Iterator.java:47)
    at com.hp.hpl.jena.util.iterator.WrappedIterator.next(WrappedIterator.java:80)
    at com.hp.hpl.jena.rdf.model.impl.StmtIteratorImpl.next(StmtIteratorImpl.java:45)
    at com.hp.hpl.jena.rdf.model.impl.StmtIteratorImpl.nextStatement(StmtIteratorImpl.java:55)
    at com.example.myApp (myApp.java:123) 
```

为什么这种情况不断发生 - 我在每个 doPost/doGet 方法的末尾调用 model.close() 。大多数时候它似乎工作，只有当出现问题并且服务器在开发过程中崩溃或抛出某些异常时，我才会遇到这个问题。

遇到这个问题后，是否有任何方法可以恢复或者是将三重存储的定期备份保存在文件中然后再次重新读取它们的唯一方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:31:15.123

此问题的常见原因是并发更新。TDB 访问应在写入期间对其他写入者**和**读取者进行锁定。您可以通过使用[transactions](http://jena.apache.org/documentation/tdb/tdb_transactions.html)或使用应用程序级锁定来自己执行 MRSW 策略来做到这一点。您提到`doPost/doGet`方法中出现问题：大多数 Web 服务器通过线程池处理传入请求，因此即使您自己不使用线程，您也可能通过该路由访问存储并发。

还要确保跟踪最新的 Jena 版本。偶尔会有一些错误修复可以解决索引损坏问题，但据我所知，目前没有报告未解决的问题。您可以随时查看 Jena [JIRA](https://issues.apache.org/jira/browse/JENA)以查看是否有任何相关的未解决问题，或者，如果您有可重现的测试用例，请开新票。

通常，不应发生索引损坏。但是，最好将备份和数据恢复内置到您的架构中，就像您对任何其他数据源所做的那样。我不知道如何破坏索引。

# plsql - 需要关于 pl/sql 存储过程的帮助

> ID：11618571
> 
> 赞同：0
> 
> 时间：2012-07-23T18:49:28.947
> 
> 标签：plsql

我有一个请求，如果操作员没有输入任何内容，我将检索所有用户。但是如果操作员多个输入一些用户名，我只检索输入了用户名的用户，我正在尝试使用如下子查询

我使用 subquery(table b) 作为 IN 条件从表 a 中获取用户信息，并且运行良好。

`SELECT * FROM a WHERE UserName IN (SELECT UserName FROM b)`

但是，如果表 b 什么都没有，我需要从 a 中选择所有用户，我不知道该怎么做。在我只能为一个用户执行此操作之前，如果 typeInUserName = NULL，WHERE UserName = UserName 将为我收回所有用户。

```
SELECT * FROM a WHERE UserName = NVL(typeInUserName,UserName) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:13:56.517

```
create table a (username varchar2(20));

insert into a values('gaurav');
insert into a values('rahul');
insert into a values('rohan');
insert into a values('niharika');

create table b (username varchar2(20));

 insert into b values('gaurav');
 insert into b values('rahul'); 
```

**案例1**：当表B中没有记录时

```
Delete from  b;

WITH cnt_b as 
(
 select count(*) cnt from b
)
select a.username from a ,cnt_b where  1= CASE WHEN cnt_b.cnt=0 THEN 1 ELSE 0 END
UNION 
select a.username from a,cnt_b,b where a.username =b.username and cnt_b.cnt>0;

USERNAME 
```

* * *

```
gaurav              
niharika            
rahul               
rohan               

4 rows selected. 
```

**案例2**当表B中有两条匹配记录时

```
 insert into b values('gaurav');
 insert into b values('rahul');

WITH cnt_b as 
(
 select count(*) cnt from b
)
select a.username from a ,cnt_b where  1= CASE WHEN cnt_b.cnt=0 THEN 1 ELSE 0 END
UNION 
select a.username from a,cnt_b,b where a.username =b.username and cnt_b.cnt>0;

USERNAME            
--------------------
gaurav              
rahul               

2 rows selected. 
```

**Case3**当表 B 中有记录，但没有匹配的记录时。

```
delete from  b

insert into b values('rajat');
insert into b values('garima');

with cnt_b as 
(
 select count(*) cnt from b
)
select a.username from a ,cnt_b where  1= CASE WHEN cnt_b.cnt=0 THEN 1 ELSE 0 END
UNION 
select a.username from a,cnt_b,b where a.username =b.username and cnt_b.cnt>0

no rows selected. 
```

干杯 GS

# javascript - 如何使用 java 脚本变量使用 Django 反向 URL？

> ID：11618573
> 
> 赞同：1
> 
> 时间：2012-07-23T18:49:33.657
> 
> 标签：javascript, html, django, django-templates

我在我的 Django 模板上使用了一个按钮，单击该按钮后，它应该打开一个由`reverse url`( `template tags`) 提供的链接。我尝试使用以下代码，但没有成功

```
<input type= "button" style="float: right;" value="Next Graph" onClick="javascript:location.href = 'reverse(graph_view)';"></input> 
```

我知道上面的语法有些问题。什么是正确的？

PS：我不想使用任何外部库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:03:21.867

只需为此使用实际的模板标签`{% url %}`。请参阅：[https ://docs.djangoproject.com/en/dev/ref/templates/builtins/#url](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#url)

**更新**

它应该如下所示：

```
<input type= "button" style="float: right;" value="Next Graph" onClick="javascript:location.href = '{% url graph_view %}';"></input> 
```

如果它仍然不起作用，则说明您还有其他问题。创建一个新问题并确保发布您收到的任何错误和堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:02:16.910

'reverse' 仅适用于服务器端，不适用于模板。

您应该使用模板标签。

```
{% url 'graph_view' %} 
```

请参阅[https://docs.djangoproject.com/en/dev/ref/templates/builtins/#url](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#url)。

# android - 为什么我的装载机被破坏了？

> ID：11618576
> 
> 赞同：2
> 
> 时间：2012-07-23T18:49:54.603
> 
> 标签：android, android-fragments, android-loader

我有一个使用加载器的片段。Fragment 实现了 LoaderManager.LoaderCallbacks。在`onCreate()`片段中，我做了一个`setRetainInstance(true)`，以便片段不会在配置更改（如方向更改）时被破坏。这按预期工作，并且`onDestroy()`不调用片段的 。但是，当我旋转设备时，我的加载器被破坏了。每次我旋转设备时，都会创建一个新的加载器。我检查了内存转储并验证了这一点。

1.  为什么会这样
2.  我怎样才能避免这种情况？

**编辑**：为避免混淆：局部变量加载器在这里不相关。这只是检查我之前创建的加载程序是否存在。即使使用下面的更新代码（删除了局部变量），加载程序也会被破坏。

以下是一些相关代码：

```
 public class MyFragment extends Fragment implements LoaderManager.LoaderCallbacks<Object> {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRetainInstance(true); //Don't destroy fragment across orientation change
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        Log.d(TAG, "onActivityCreated, myTid : " + android.os.Process.myTid());

        mLoaderManager = getLoaderManager();
        mLoaderManager.initLoader(MY_LOADER, null, this);
    }

    @Override
    public Loader<Object> onCreateLoader(int i, Bundle bundle) {
        Log.d(TAG, "onCreateLoader, myTid : " + android.os.Process.myTid());
        return new MyLoader(getActivity().getApplicationContext());
    }

   @Override
    public void onLoaderReset(Loader<Object> objectLoader) {
        Log.d(TAG, "onLoaderReset, myTid : " + android.os.Process.myTid());

        mHandler.post(new Runnable() {
            @Override
            public void run() {
                if (mTxtSomeTxt != null) {
                    mTxtSomeTxt.setText("");
                }
            }
        });
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-07T19:06:01.647

派对有点晚了……

对于保留的片段，您需要保存从 initLoader(...) 返回的加载器，然后在发生配置更改时返回原始加载器。

```
private Loader<Object> myLoader;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Log.d(TAG, "onActivityCreated, myTid : " + android.os.Process.myTid());

    mLoaderManager = getLoaderManager();
    myLoader = mLoaderManager.initLoader(MY_LOADER, null, this);
}

@Override
public Loader<Object> onCreateLoader(int i, Bundle bundle) {
    Log.d(TAG, "onCreateLoader, myTid : " + android.os.Process.myTid());

    // Handle loader creation on retrained fragments
    if (myLoader != null)  {
        return myLoader;
    }

    return new MyLoader(getActivity().getApplicationContext());
} 
```

# python - 是否有 django 应用程序的模拟框架？写一个的好习惯是什么？

> ID：11618579
> 
> 赞同：3
> 
> 时间：2012-07-23T18:50:01.083
> 
> 标签：python, django, testing, statistics, simulation

所以，我有一个想法。

假设您有一个经典应用程序，它由几类用户和他们使用的一些数据组成。假设它是乘客、司机和调度员（如出租车）。乘客创建订单，调度员将订单分配给司机，司机正在执行订单，乘客写关于司机的评论，调度员在他们的调度方案中使用这些评论等等。

假设您拥有这样的系统，其中包含几十名调度员、几百名司机和数千名乘客。

随着时间的流逝，新的调度员被雇用，其中一些被解雇，司机来来往往，而且一如既往地有忠实的客户和新客户。

所以，我的问题是——如何模拟这样的系统？我想要一个工具，让我可以使用我当前的 django 应用程序、它的模型和方法，并用不同模式创建的用户、数据和操作填充它。

我认为它就像一个独立的框架（有点像 unittest 框架和数据生成框架），可以将自己附加到任何应用程序，为用户描述模式，然后以连续的方式运行它。

它可能对以下有用：

*   更好的产品逻辑测试
*   模拟现实生活中的实验（“如果有司机，他会搞定很多订单”）
*   更智能的负载测试系统（真正测试现实生活场景，包括“whatif”情况）
*   创建逼真的数据来测试统计软件

有没有预先存在的解决方案？如果我决定创建一个，你对我有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:15:44.393

对于通用解决方案，您有一项非常具体的任务。在我看来，您必须使用任何数据生成器（例如[django-dilla](http://aerosol.github.com/django-dilla/)、[django](https://github.com/sorl/django-mockups) -mockups 、[django-milkman](https://github.com/ccollins/milkman)）、任务队列（[celery](http://celeryproject.org/)、rabbitmq）并编写自定义后端。

这个问题没有普遍的答案。

# jsf - 用 JMeter 面对 FormSignature？

> ID：11618582
> 
> 赞同：0
> 
> 时间：2012-07-23T18:50:11.613
> 
> 标签：jsf, testing, load, jmeter

我必须对几乎在它发送的每个请求中使用 javax.faces.FormSignature 的应用程序进行负载测试。我正在使用这样的 xPath 提取器来获取 FormSignature 的值：

```
/html/body/div/div/div/form/input[@name='javax.faces.FormSignature']/@value 
```

然后我声明一个用户定义的变量并解析我使用正则表达式提取器得到的值，如下所示：

```
value=(.+?) 
```

我使用 HTTP 代理服务器来记录我的会话，所以我 100% 确定从哪些 GET 请求中提取这些值以及将使用这些值的 POST 请求。它不起作用，我还没有在网上找到任何关于使用 FormSignature 和 JMeter 的信息。最重要的是，我对 JMeter 也很陌生。有人可以帮我吗？

* * *

好的，我之前检查了 Tidy 选项。并且 xpath 有效（我已经检查了 firebug）。这就是我所拥有的：有一个名为 FORM 的 jmeter 用户变量，然后我使用上面提到的 xpath 来提取一个值并将其应用于 FORM。然后我使用正则表达式提取器仅提取值 (value=\"(.+?)\")。我将这个正则表达式提取器应用于我的 jmeter 变量 ${FORM} 因为这是一个（我认为）包含我之前提取的 xpath 的结果。此正则表达式提取器的参考名称是 FORMVALUE，这是我传递给发布请求的值。我没有得到明确的错误，它只是不起作用。传递给我的请求的值是我设置的默认值，即“未找到 FORMVALUE”。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:48:00.053

您是否尝试过不使用完整路径并使用双引号，如下所示：

```
//input[@name="javax.faces.FormSignature"]/@value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:54:48.493

由于您使用 XPath Extractor 来解析 HTML（不是 XML）响应，因此请确保选中**Use Tidy（容错解析器）**选项（在[XPath Extractor 的控制面板](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)中）。

使用下面 mbonaci 答案中的 xpath 查询，检查上面提到的选项，然后重试。

# excel - 使用当前日期打开文件的宏

> ID：11618583
> 
> 赞同：1
> 
> 时间：2012-07-23T18:50:22.653
> 
> 标签：excel, vba

我正在使用宏打开一个文件，由于当前日期，文件名每天都会更改。

今天的文件\today_20120723。

我正在尝试这个，但它不起作用。建议

```
Dim OpenPath As String
Dim OpenName As String

OpenPath = "N:\File\": OpenName = OpenPath & "today_" VBA.Format   (Date, "YYYYMMDD") & ".xlsx"

Workbooks.Open Filename:=OpenPath 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:57:21.603

一行多行代码读起来真的很痛苦。

也就是说，我不确定`VBA.Format`您的代码在做什么，但这应该可行：

```
OpenPath = "N:\File\"
OpenName = OpenPath & "today_" & Format(Date, "YYYYMMDD") & ".xlsx" 
```

# php - 用于正确统计数据的 PHP 函数

> ID：11618584
> 
> 赞同：1
> 
> 时间：2012-07-23T18:50:25.677
> 
> 标签：php, usage-statistics

我在统计领域不熟练，所以我希望这对某人来说很容易，我缺乏技能也使得很难找到关于这个主题的正确搜索词，所以我可能在搜索中错过了我的答案。反正。我正在查看数据数组，例如 CPU 使用率。我如何才能在尽可能少的数据点中捕获准确的信息，比如一组数据，其中包含 1 小时核心 CPU 使用率的 1 秒时间间隔，其中前 30 分钟为 0%，后 30 分钟为100%。现在，我能想到的一个数据点就是平均值，即 50%，在这种情况下根本没有用。此外，另一种情况是使用图就像一个波浪，在 0-100 之间均匀地上下波动，但仍然给出 50% 的平均值。我怎样才能捕获这些数据？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:19:42.577

如果我理解您的问题，这实际上更像是一个统计问题而不是编程问题。你的意思是，*用尽可能少的变量捕捉人口曲线的最佳方法是什么？*

首先，大多数标准统计数据的假设意味着系统或多或少是稳定的（尽管，如果系统不稳定，你得到的数字会让你知道，因为它们是无意义的）。

您需要了解的主要统计指标是平均值、总体规模和标准差。由此，您可以计算出定义为总体曲线的粗钟形曲线，并根据标准差的比例了解曲线的准确性。

这为您提供了标准钟形曲线的三变量模式。

如果您想更详细地了解，您可以添加 Cpk、Ppk，它们是计算字段。

否则，您可能需要进行非线性回归和曲线拟合，最好根据具体情况进行处理（不适合编程）。

查看以下站点以计算 Cp、Cpk、Pp 和 Ppk：
[http ://www.qimacros.com/control-chart-formulas/cp-cpk-formula/](http://www.qimacros.com/control-chart-formulas/cp-cpk-formula/)

[http://www.macroption.com/population-sample-variance-standard-deviation/](http://www.macroption.com/population-sample-variance-standard-deviation/)

# eclipse - Eclipse 链接 JDK

> ID：11618585
> 
> 赞同：0
> 
> 时间：2012-07-23T18:50:27.787
> 
> 标签：eclipse, classpath, java

我已经在我的 C 分区上提取了 Eclipse。我有 Windows 7 64 位。Eclipse 是 64 位的。但是JDK是32位的。一旦我运行 eclipse，弹出菜单就会说它在某种路径上找不到 JDK 或 JRE。一旦我从 USB 驱动器运行 Eclipse，它就可以正常工作。问题是什么？我应该指定 envorinmont 变量、设置类路径还是什么？我究竟应该怎么做？此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:53:01.183

为什么不买 64 位的 JDK？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:53:00.953

你有没有在你的电脑上下载任何java jdk？要检查，打开命令提示符并启动命令，`java -version`然后`javac -version`如果其中一个失败，您需要从 oracle 的网站下载 java jdk

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:06:35.840

**1.**如果你使用的是windows，那么我会推荐你​​下载`Windows x86 jdk-7u5-windows-i586.exe`。

**2.**安装它...在 C:\Program Files\Java\

**3.**将其包含在您的`System PATH` **C:\Program Files\Java\jdk1.7.0_05\bin**中。

**3.**然后输入`java -version`你的命令提示符，如果你得到了你的 JDK 版本，那么你已经正确安装了 java，并且你的路径配置正确。

**4.**从 Eclipse 站点下载的 Eclipse.rar 中提取您的 Eclipse 文件夹。

**5.**你可以把这个Extracted Eclipse文件夹放在磁盘的任何地方，但我建议你把它存储在c:驱动器中`C:\Program Files\eclipse`

**6\. 现在我认为它应该可以工作......**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T02:25:52.943

本教程是唯一对我使用 Win 64 位的东西。

总结：安装

*   32位日食
*   32 位 JDK（不是 JRE）
*   32 位安卓 SDK

将 Java 添加到 PATH 环境变量

打开 eclipse.ini 并添加一行指向 JDK

我首先从我的系统中卸载了所有版本的 Java。

[http://envyandroid.com/archives/38/getting-started-with-android-dev-environment](http://envyandroid.com/archives/38/getting-started-with-android-dev-environment)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T20:50:41.133

在命令提示符中，a`java -version`应该显示已安装 JVM 的详细信息。

例如，jdk7 32 位版本会显示：

```
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b06)
Java HotSpot(TM) Client VM (build 23.1-b03, mixed mode, sharing) 
```

jdk7 64 位版本会显示：

```
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b06)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode) 
```

但是，标准 JDK 安装会复制文件夹中的`java.exe` 和，这可能是 Eclipse 查找`javaw.exe`的文件夹。`c:\Windows\System32`如果您尝试重新安装不同的 JDK 版本并且忘记了您安装的最后一个版本（或者像我一样，如果您安装不同的版本以对某些遗留项目提供向后支持），这可能会变得非常混乱。

要 100% 确定 Eclipse 使用的 JVM，只需修改`eclipse.ini`文件`eclipse/`夹中的文件，使其指向您想要的确切 JVM。例如，如果您想使用 64 位的 jdk7，请添加这些行（检查是否适用相同的文件夹）：

```
-vm
C:\Program Files\Java\jdk1.7.0_05\bin\javaw.exe 
```

启动 Eclipse，它应该可以正常工作。

有关配置的更多信息，请访问[此站点。](http://wiki.eclipse.org/Eclipse.ini)`eclipse.ini`

# c#-4.0 - WIF 4.5 声明值 - 对象引用未设置为对象的实例

> ID：11618586
> 
> 赞同：2
> 
> 时间：2012-07-23T18:50:33.257
> 
> 标签：c#-4.0, asp.net-mvc-4, wif, claims-based-identity, claims

我正在使用新的 WIF 4.5 SDK，但我遇到了与 LINQ 相同的烦人异常，使用 .FirstorDefault() 解决了

```
 var claimEmail = ClaimsPrincipal.Current.FindFirst(ClaimTypes.Email).Value; 
```

这里的问题是 Windows Live ID 在声明中没有 email 值，所以如果用户使用 live ID 登录，我有一个**NullReferenceException - Object reference not set to an instance of an object**。我也试过；

```
var claimEmail = ClaimsPrincipal.Current.FindFirst(ClaimTypes.Email).Value.FirstorDefault(); 
```

没有成功

如果索赔中没有电子邮件，我如何返回 NULL 或“”？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T17:08:54.493

类中没有`FirstOrDefault`快捷方式`ClaimsPrincipal`，但您始终可以使用 LINQ 来迭代声明列表以执行相同的操作：

```
var claimEmail = ClaimsPrincipal.Current.Claims.Where(c => c.Type == ClaimTypes.Email).FirstOrDefault(); 
```

或者您可以检查以确保 Claim 不为 NULL：

```
var claimEmail = ClaimsPrincipal.Current.FindFirst(ClaimTypes.Email);
var email = (claimEmail == null ? string.Empty : claimEmail.Value); 
```

希望这会有所帮助。

# javascript - 如何从函数中获取 UI 变量

> ID：11618588
> 
> 赞同：0
> 
> 时间：2012-07-23T18:50:33.720
> 
> 标签：javascript, function, user-interface

如果这是基本的，我很抱歉。我是自学成才，并且对可能是 Javascript 编程的简单功能感到困惑。谁能告诉我我应该寻找什么来找到正确的答案，或者帮助我解决这个问题？

我在 UI 窗口中有一个函数，可以用面板快速填充它。但我似乎无法让输入到每个面板中的值从 UI 中移出并进入主“DoSomething”功能。
变量 (dlg.tryThis) 不会更新？为什么？我需要做什么？

```
// making a simple UI
function UI_Builder(doSomething)
{
    var dlg = new Window( "dialog", "options" );
    dlg.mainGroup = dlg.add( "group", undefined,"main" );

//Created a simple function so I can re-create panels and values very easy
    function makePanel (panelName, val)  {
        var newPanel = eval("dlg.mainGroup." + panelName);
        newPanel = dlg.mainGroup.add( 'panel', undefined, panelName );
        newPanel.Start = newPanel.add("edittext", [0,0,30,20], val);
        dlg.Start = newPanel.Start.text
        newPanel.Start.onChanging = function()                
                { 
                 dlg.Start = newPanel.Start.text
                  alert("Changed " + panelName + " to:  " + dlg.Start) // THIS alerts correctly.  It know what value I changed and where I changed it. 
                 return dlg.Start;
                 } 
            return dlg.Start;
        } 

    // calling the function to create panels.
    dlg.tryThis = makePanel("tryThis", 4); 
    dlg.anotherOne = makePanel("anotherOne",  3); 
    dlg.again = makePanel("again", 2); 

    dlg.mainGroup.btnCancel = dlg.mainGroup.add( "button",[0,0,130,70], "doSomething" );
    dlg.mainGroup.btnCancel.onClick = function()
    {  
        doSomething();  
     }
 return dlg
}

// all the UI builder is doing is showing the UI
var dlg = UI_Builder(doSomething);
dlg.show();

function doSomething()
{
dlg.close();

alert(dlg.tryThis)  // this is not the NEW value?   How do I get it to be the NEW value updated by the ".onChanging" function? 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:56:23.527

尝试传递`dlg`给事件处理程序而不是全局声明它：

```
dlg.mainGroup.btnCancel.onClick = function() {
    doSomething(dlg);  
}

function doSomething(dlg) {
    dlg.close();
    alert(dlg.tryThis);
} 
```

如果您采用这种方法，则不应`var dlb`全局声明，以避免混淆。（阴影变量通常是一种不好的做法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:58:08.580

你在没有任何上下文的情况下调用 doSomething 。

使用 func.apply：

```
dlg.mainGroup.btnCancel.onClick = function()
{  
    doSomething.apply(this, []);
} 
```

并将对象作为“this”处理：

```
function doSomething()
{
    this.close();
    alert(this.tryThis)  // this is not the NEW value?   How do I get it to be the NEW value updated by the ".onChanging" function? 
} 
```

# mysql - MySQL触发器无需重启？

> ID：11618592
> 
> 赞同：0
> 
> 时间：2012-07-23T18:50:46.727
> 
> 标签：mysql, triggers

是否可以在不重新启动整个服务器的情况下添加 MySQL 触发器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:51:26.137

是的。请参阅有关[`CREATE TRIGGER`语法](http://dev.mysql.com/doc/en/create-trigger.html)的手册部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T01:51:48.867

不，你不需要。它就像视图、过程一样，一旦创建，您就可以开始使用它。

同时，如果您通过编辑配置文件更改了 MySQL 设置，则需要重新启动 MySQL 才能生效。

# microsoft-metro - 如何将嵌入文件中的自定义字体加载到 Metro 应用程序中的 DirectWrite？

> ID：11618595
> 
> 赞同：1
> 
> 时间：2012-07-23T18:50:59.897
> 
> 标签：microsoft-metro, windows-runtime, truetype, directx-11, directwrite

我一直在与从嵌入式文件加载字体以用于 DirectWrite 进行一场失败的战斗。我正在编写一个简单的益智游戏，它具有 C#/XAML 接口，但也使用 SurfaceImageSource 添加一些 DirectX 内容。

我编写了一个处理所有 DirectX 代码的 WinRT 组件，它工作得非常好。我的一些 DirectX 内容是使用 DirectWrite API 绘制的文本。只要我使用**IDWriteFactory::GetSystemFontCollection()**等从系统加载安装的字体，我就可以绘制我喜欢的所有文本。但是，我似乎找不到从嵌入文件加载自定义字体的方法。

据我所知，不允许 Metro 应用程序以与传统应用程序相同的方式从文件系统加载文件。所以，采用普通文件路径的**IDWriteFactory::CreateFontFileReference()方法对我来说毫无价值，对吧？**我需要从 ms-appx URL 加载我的文件。

因此，我在我的 WinRT 组件中编写了一个自定义字体加载器，它实现了**IDWriteFontCollectionLoader接口（如果您之前从未做过，这将是一项繁重的工作），它使用新的****StorageFile** API从 ms-appx URL 加载字体。现在，我可以加载我的**IDWriteFontFile**并获得一个**IDWriteFontFace**，但是如果我尝试在字体上调用任何真正有用的方法，它会返回**E_UNEXPECTED**。我可以获得字形的数量和字形索引，但是如果我尝试调用**GetGlyphRunOutline()**或**GetDesignGlyphMetrics()之类的东西，它会因****E_UNEXPECTED**而失败。使用相同的绘图代码生成**只要我安装字体文件并通过以**IDWriteFactory::GetSystemFontCollection()**开头的一系列调用来获取**IDWriteFontFace** ，使用**GetGlyphRunOutline()的****ID2D1PathGeometry 就**可以很好地工作。我正在使用普通的 true type 字体。**

 ******那么，如何将嵌入文件中的自定义字体加载到 Metro 应用程序的 DirectWrite 中？我可能只是遗漏了一些简单的东西，因为我确信其他人会希望能够以这种方式加载自定义字体。

我有一个示例项目（或者可以很容易地准备一个）给任何可以帮助我识别我的问题的人。

我已经并排加载了两个**IDWriteFontFace**对象，并试图找出有效的对象和损坏的对象之间的不同之处。为了找出它失败的原因，我需要看到的是隐藏在**IDWriteFontFace**界面中的不透明内容。请帮忙！

此处还发布了问题：[使用 DirectX 论坛构建 Metro 风格游戏](http://social.msdn.microsoft.com/Forums/en-US/wingameswithdirectx/thread/3bc3f37d-4826-4df3-9748-2ea60ae23709)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:22:45.087

好吧，答案是……不要写**IDWriteFontCollectionLoader**！您可以将**IDWriteFactory::CreateFontFileReference()**与**StorageFile** API 一起使用。我参加的所有 Microsoft 会议演讲都给我的印象是，在 Metro 中您将无法直接访问本机文件系统。前进的方法是使用使用 ms-appx URL 引用资源等的**StorageFile API。**我知道这样做是为了并发，并允许操作系统通过创建文件系统沙箱将自己与将从商店下载的 Metro 应用程序隔离开来。我认为这是准确的。但是，我觉得我被引导相信我们永远无法获得本机文件系统路径。那不是真的。 **IStorageFile**提供了一种方法。只需使用**IStorageFile.Path**。我从来没有看过它，因为我只是假设**Path**属性将保存我用来创建对象的 ms-appx URL。Microsoft 可能完全出于上述问题的目的提供了此功能：调用需要本机路径的旧 COM 接口。

如果您尝试访问您自己的应用程序包之外的本机文件系统路径，我还没有进行任何测试来确定 WinRT 框架是否真的对您进行沙箱处理。我打赌它确实...******

# android - 使用 Ant 构建 Android 项目 - 找不到符号

> ID：11618602
> 
> 赞同：6
> 
> 时间：2012-07-23T18:51:20.550
> 
> 标签：android, ant

我正在尝试使用 ant 构建我的 android 项目（它在 eclipse 中运行良好）。我使用以下构建失败行运行错误：

```
BUILD FAILED
.../android_sdks/tools/ant/build.xml:680: The following error occurred while executing this line:
.../android_sdks/tools/ant/build.xml:693: Compile failed; see the compiler error output for details. 
```

上面的java编译有很多错误，都是找不到符号的错误。这些符号中的大多数是添加到 R 文件中的变量。有些是项目中的类。

我使用以下方法设置构建环境：

```
android update project --path . 
```

我的工具和 platform_tools 都是最新的，我在 android-7 上运行。我已经刷新了项目，对项目进行了清理，甚至重新启动了 eclipse。

我对蚂蚁还很陌生，不胜感激。

构建失败输出（根据要求，我为格式问题道歉）：

MacBook-Pro：[公司]_Android$ ant clean debugBuildfile：[android_path]/build.xml

```
-check-env:
[checkenv] Android SDK Tools Revision 20
[checkenv] Installed at [path]/android_sdks

-setup:
 [echo] Project Name: SplashActivity
 [gettype] Project Type: Application
 [echo] Switching between debug and non debug build: Deleting previous compilation output...
 [delete] Deleting directory [android_path]/bin/classes

-pre-clean:

clean:
 [delete] Deleting directory [android_path]/bin
 [delete] Deleting directory [android_path]/gen
 [getlibpath] Library dependencies:
 [getlibpath] No Libraries
 [subant] No sub-builds to iterate on

  ###removed some code#####
 -build-setup:
  [echo] Resolving Build Target for SplashActivity...
  [gettarget] Project Target:   Android 2.1
  [gettarget] API level:        7
  [echo] ----------
  [echo] Creating output directories if needed...
  [mkdir] Created dir: [android_path]/bin
  [mkdir] Created dir: [android_path]/bin/res
  [mkdir] Created dir: [android_path]/gen
  [mkdir] Created dir: [android_path]/bin/classes
  [echo] ----------
  [echo] Resolving Dependencies for SplashActivity...
   [dependency] Ordered libraries:
   [dependency] 
   [dependency] ------------------
   [dependency] API<=15: Adding annotations.jar to the classpath.
   [echo] ----------
   [echo] Building Libraries with 'debug'...
   [subant] No sub-builds to iterate on

 -pre-build:

 -code-gen:
    [mergemanifest] Merging AndroidManifest files into one.
    [mergemanifest] Manifest merger disabled. Using project manifest only.
    [echo] Handling aidl files...
    [aidl] Found 1 AIDL files.
    [aidl] Compiling 1 AIDL files.
    [echo] ----------
    [echo] Handling RenderScript files...
    [renderscript] No RenderScript files to compile.
    [echo] ----------
    [echo] Handling Resources...
    [aapt] Generating resource IDs...
    [echo] ----------
    [echo] Handling BuildConfig class...
    [buildconfig] Generating BuildConfig class.

-pre-compile:

-compile:
[javac] Compiling 263 source files to [android_path]/bin/classes
[javac] [android_path]/src/com/[company]/firstbase/AbstractFirstBaseActivity.java:447: warning: unmappable character for encoding UTF-8

#####removed a lot of similar warnings######

[javac] [android_path]/src/com/[company]/firstbase/models/[company]Match.java:14: cannot find symbol
[javac] symbol  : class MatchExpiryComparator
[javac] location: package com.[company].firstbase.util
[javac] import com.[company].firstbase.util.MatchExpiryComparator;
[javac]                                  ^
[javac] [android_path]/src/com/[company]/firstbase/models/[company]Match.java:21: cannot find symbol
[javac] symbol  : class MatchExpiryComparator
[javac] location: class com.[company].firstbase.models.[company]Match
[javac]     public static MatchExpiryComparator EXPIRATION_SORT_COMPARATOR = new MatchExpiryComparator();
[javac]                   ^
[javac] [android_path]/src/com/[company]/firstbase/widget/[company]Widget.java:12: cannot find symbol
[javac] symbol  : class DashboardActivity
[javac] location: package com.[company].firstbase
[javac] import com.[company].firstbase.DashboardActivity;
[javac]                             ^
[javac] [android_path]/src/com/[company]/firstbase/FirstBaseApplication.java:178: warning: non-varargs call of varargs method with inexact argument type for last parameter;
[javac] cast to java.lang.Object for a varargs call
[javac] cast to java.lang.Object[] for a non-varargs call and to suppress this warning
[javac]                         facebookData.put(key, Utils.stringJoin(",", entries));
[javac]                                                                     ^
[javac] [android_path]/src/com/[company]/firstbase/misc/Panel.java:189: cannot find symbol
[javac] symbol  : variable panelHandle
[javac] location: class com.[company].firstbase.R.id
[javac]         mHandle = findViewById(R.id.panelHandle);
[javac]                                    ^
[javac] [android_path]/src/com/[company]/firstbase/misc/Panel.java:193: cannot find symbol
[javac] symbol  : variable panelContent
[javac] location: class com.[company].firstbase.R.id
[javac]         mContent = findViewById(R.id.panelContent);
[javac]                                     ^
[javac] [android_path]/src/com/[company]/firstbase/models/[company]Match.java:21: cannot find symbol
[javac] symbol  : class MatchExpiryComparator
[javac] location: class com.[company].firstbase.models.[company]Match
[javac]     public static MatchExpiryComparator EXPIRATION_SORT_COMPARATOR = new MatchExpiryComparator();
[javac]                                                                          ^
[javac] [android_path]/src/com/[company]/firstbase/models/[company]Match.java:56: cannot find symbol
[javac] symbol  : variable USERS_USERID
[javac] location: class com.[company].firstbase.db.DbHelper
[javac]         this.userID = Utils.descryptForDB(c.getString(c.getColumnIndexOrThrow(DbHelper.USERS_USERID)));
[javac]                                                                                       ^
[javac] [android_path]/src/com/[company]/firstbase/models/[company]Match.java:57: cannot find symbol
[javac] symbol  : variable USERS_USERNAME
[javac] location: class com.[company].firstbase.db.DbHelper
[javac]         this.username = c.getString(c.getColumnIndexOrThrow(DbHelper.USERS_USERNAME));
[javac]                                                                     ^
[javac] [android_path]/src/com/[company]/firstbase/models/[company]Match.java:58: cannot find symbol
[javac] symbol  : variable USERS_PHOTO
[javac] location: class com.[company].firstbase.db.DbHelper
[javac]         this.photoURI = c.getString(c.getColumnIndexOrThrow(DbHelper.USERS_PHOTO));
[javac]                                                                     ^

 #######Removed a lot of similar errors ##########

[javac]                                                                            ^
[javac] [android_path]/src/com/[company]/firstbase/widget/[company]Widget.java:21: cannot find symbol
[javac] symbol  : variable widget_layout
[javac] location: class com.[company].firstbase.R.layout
[javac]             RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
[javac]                                                                                   ^
[javac] [android_path]/src/com/[company]/firstbase/widget/[company]Widget.java:23: cannot find symbol
[javac] symbol  : variable DashboardActivity
[javac] location: class com.[company].firstbase.widget.[company]Widget
[javac]             int count = DashboardActivity.mMatchesCalloutCount+DashboardActivity.mConnectionsCalloutCount;
[javac]                         ^
[javac] [android_path]/src/com/[company]/firstbase/widget/[company]Widget.java:23: cannot find symbol
[javac] symbol  : variable DashboardActivity
[javac] location: class com.[company].firstbase.widget.[company]Widget
[javac]             int count = DashboardActivity.mMatchesCalloutCount+DashboardActivity.mConnectionsCalloutCount;
[javac]                                                                ^
[javac] [android_path]/src/com/[company]/firstbase/widget/[company]Widget.java:23: incompatible types
[javac] found   : java.lang.String
[javac] required: int
[javac]             int count = DashboardActivity.mMatchesCalloutCount+DashboardActivity.mConnectionsCalloutCount;
[javac]                                                               ^
[javac] [android_path]/src/com/[company]/firstbase/widget/[company]Widget.java:27: cannot find symbol
[javac] symbol  : variable callout
[javac] location: class com.[company].firstbase.R.id
[javac]                 views.setTextViewText(R.id.callout, count+"");
[javac]                                           ^
[javac] [android_path]/src/com/[company]/firstbase/widget/[company]Widget.java:28: cannot find symbol
[javac] symbol  : variable callout
[javac] location: class com.[company].firstbase.R.id
[javac]                 views.setViewVisibility(R.id.callout, View.VISIBLE);
[javac]                                             ^
[javac] [android_path]/src/com/[company]/firstbase/widget/[company]Widget.java:31: cannot find symbol
[javac] symbol  : variable callout
[javac] location: class com.[company].firstbase.R.id
[javac]                 views.setViewVisibility(R.id.callout, View.GONE);
[javac]                                             ^
[javac] [android_path]/src/com/[company]/firstbase/widget/[company]Widget.java:34: cannot find symbol
[javac] symbol  : class DashboardActivity
[javac] location: class com.[company].firstbase.widget.[company]Widget
[javac]             Intent intent = new Intent(context, DashboardActivity.class);
[javac]                                                 ^
[javac] [android_path]/src/com/[company]/firstbase/widget/[company]Widget.java:37: cannot find symbol
[javac] symbol  : variable widget_heart
[javac] location: class com.[company].firstbase.R.id
[javac]             views.setOnClickPendingIntent(R.id.widget_heart, pendingIntent);
[javac]                                               ^
[javac] Note: Some input files use or override a deprecated API.
[javac] Note: Recompile with -Xlint:deprecation for details.
[javac] Note: Some input files use unchecked or unsafe operations.
[javac] Note: Recompile with -Xlint:unchecked for details.
[javac] 40 errors
[javac] 21 warnings 
```

BUILD FAILED [path]/android_sdks/tools/ant/build.xml:680：执行此行时出现以下错误：[path]/android_sdks/tools/ant/build.xml:693：编译失败；有关详细信息，请参阅编译器错误输出。

总时间：6秒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:22:43.100

弄清楚了：

我在 Eclipse 上的构建路径中排除了文件。显然，Ant 并非如此。我没有在我的 Ant 文件中添加这么多文件，而是删除了这些文件，事情就解决了。

# javascript - 在选择器中的 JQuery 中返回 true 或 false？

> ID：11618606
> 
> 赞同：1
> 
> 时间：2012-07-23T18:51:27.063
> 
> 标签：javascript, jquery, html

如果我在一个元素中有一个文本字符串，如果该文本与给定的字符串匹配，那么 jQuery 中最有效的返回方式是什么。

例如，

```
<div id="myDiv">This is a test</div>

$("#myDiv").eq("This is as test"); // returns true or false 
```

但是 eq 不是正确的功能

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T18:53:01.370

jQuery：

```
$('#myDiv').text() === "This is as test"; 
```

请注意，如果 DOM 包含其他节点或奇怪的间距等，这会变得很难看。但是对于您控制的简单节点，这是最简单的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T18:56:39.503

我自己会使用grammar31解决方案，但只是为了好玩，这里有一些其他方法：

```
$("#myDiv:contains('This is a test')")​.length​==1;
document.getElementById('myDiv').innerHTML == 'This is a test'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:57:23.350

```
if($("#myDiv").text() === 'This is a test'){ /* true */ }else{ /* false /* } 
```

# right-to-left - 如何将方块向左移动

> ID：11618614
> 
> 赞同：0
> 
> 时间：2012-07-23T18:51:57.470
> 
> 标签：right-to-left

我想将块“商业列表”移动到左侧，使其与网站页面的左侧对齐：[http ://www.kids.yetzira.com/](http://www.kids.yetzira.com/)

有人可以告诉我如何做到这一点。

我正在尝试使网站 rtl。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:08:05.350

添加`float:left`到 section-head div 和`clear-both`下面的文章元素。

# jboss - JBoss AS 7 中的 JaasSecurityDomain？

> ID：11618624
> 
> 赞同：1
> 
> 时间：2012-07-23T18:52:53.260
> 
> 标签：jboss, jaas

是否有替代`JaasSecurityDomain`JBoss AS 7 之前使用的类？我正在将我的应用程序迁移到 JBoss AS 7。我查看了 JBoss AS 7 的文档，但没有发现 org.jboss.security.plugins.JaasSecurityDomain 或可能的替换。

# git - 从 Git 存储库中移除大量开销

> ID：11618625
> 
> 赞同：2
> 
> 时间：2012-07-23T18:52:53.360
> 
> 标签：git, git-filter-branch

我在 git 中有一个本地项目，其中包含一些数据（*例如*单元测试的输入）。这些数据在项目过程中发生了变化，并且在某一时刻要大得多。现在，我不需要将项目恢复到那个状态，但是每当我`clone`使用 git 执行新的操作时，项目的大小是巨大的（来自所有数据更改）。

有没有办法以某种方式重置我的项目以擦除某些目录（*例如*项目/数据/）中的历史记录，以便只存储最近的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:26:43.400

要从历史记录中删除一些文件但将它们保留在最近的提交中（例如最近 6 个月），您可以使用`git filter-branch`如下：

```
cutoff=`date -d '6 months ago' +'%s'`
remove="git rm --cached --ignore-unmatch 'project/data/*.zip'"
git filter-branch --tag-name-filter cat --index-filter \
  "[ `git log -1 --format=%at \$GIT_COMMIT` -lt $cutoff ] && $remove || true" \
  -- --all 
```

要在此之后删除任何剩余部分，请参阅[git filter-branch – 缩小存储库的清单](http://git-scm.com/docs/git-filter-branch#_checklist_for_shrinking_a_repository)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:00:03.097

您可能只想尝试`git gc --aggressive`清理未引用的项目。如果在过去两周内进行了大文件更改（默认情况下），这不会消除它们，但经过足够的时间后它应该会消除它们。这会自动发生，但您可以使用`git gc`

您还可以通过添加更改该两周日期`--prune=now`，但这**可能不是一个好主意**，因为您希望保留大多数文件的历史记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T23:41:30.183

如果你的合作者不会完全被淘汰，只是`cp`在你处于最下游状态时的某个[`git filter-branch`目录，你的代码库中的目录并在你自己之后清理，](https://help.github.com/articles/remove-sensitive-data)然后`cp`它回到 repo 并重新提交。

公平警告：改写历史不能掉以轻心，但如果只是你自己，或者几个知道自己在做什么的合作者，如果它显着改善了你的日常生活，这没什么大不了的。

# ffmpeg - FFmpeg/libavcodec 使用 PHPVideoToolkit 转换 asv1 失败

> ID：11618629
> 
> 赞同：0
> 
> 时间：2012-07-23T18:53:01.697
> 
> 标签：ffmpeg

似乎我无法通过安装 ffmpeg 运行 libavcodec。我说“似乎”是因为我根据以下错误消息所做的搜索已经让我明白了这一点：

> PHPVideoToolkit 错误：执行错误。找到文件“”的输出`/home/clrock/public_html/drupal-7.14/sites/default/files/img/videos/original/StoryboardMovie.mp4`，但该文件不包含数据。请检查使用 FFmpeg 编译的可用编解码器是否支持这种类型的转换。您可以通过检查来自的输出数组来检查编码解码可用性`PHPVideoToolkit::getFFmpegInfo()`。

ffmpeg 命令是

```
/usr/local/bin/ffmpeg \
-i '/home/clrock/public_html/drupal-7.14/sites/default/files/img/videos/original/StoryboardMovie.mp4' \
-strict experimental -vcodec 'asv1' -s '640x480' -acodec 'aac' -ac '2'  \
/tmp/1343067407-500d950fbd290.3gp 
```

我似乎无法找到如何让 ffmpeg 使用 libavcodec 进行配置。似乎所有必要的文件都在`/usr/src/ffmpeg-0.7.12/libavcodec`.

ffmpeg 可以使 mp4 和 flv 文件正常，只有在使用 asv1 时才会挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:12:39.393

我只需要更改输出设置。对于网络：

```
vcodec=libvpx acodec=vorbis 
```

表格 Mp4

```
vcodec=libx264 acodec=libmp3lame 
```

使用 Mp4，我无法使用 libx264-hq 预设，因为缺少某些东西。我不确定是什么，但很高兴知道我不需要它。

谢谢。

# httpclient - HttpClient 响应消息大小

> ID：11618631
> 
> 赞同：0
> 
> 时间：2012-07-23T18:53:06.087
> 
> 标签：httpclient, asp.net-mvc-4, asp.net-web-api

我有一个 webapi

```
public ISearchProviderCommandResult ExecuteCommand(ISearchProviderCommand searchCommand)
{
  //serialize the object before sending it in
  JavaScriptSerializer serializer = new JavaScriptSerializer();
  string jsonInput = serializer.Serialize(searchCommand);

  HttpClient httpClient = new HttpClient() { BaseAddress = new Uri(ServiceUrl), MaxResponseContentBufferSize = 256000 };

  StringContent content = new StringContent(jsonInput, Encoding.UTF8, "application/json");

  HttpResponseMessage output = httpClient.PostAsync(ServiceUrl, content).Result;

  //deserialize the output of the webapi call
  SearchProviderCommandResult searchResult = serializer.Deserialize<SearchProviderCommandResult>(output.Content.ReadAsStringAsync().Result);

  return searchResult;
} 
```

在我的本地机器上，无论我是否设置 MaxResponseContentBufferSize，它似乎都以我想要的方式检索数据。但是在我们的构建环境中，如果我不设置 MaxResponseContentBufferSize ，我会收到此错误：无法将更多字节写入缓冲区而不是配置的最大缓冲区大小：65536。

在查看谷歌后，我决定将 MaxResponseContentBufferSize 设置为任意 256000 值。即使这适用于我的本地机器，但在构建框中我收到此错误：找不到方法：'Void System.Net.Http.HttpClient.set_MaxResponseContentBufferSize(Int64)

我不知道现在该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:06:15.607

[查看forums.asp.net](http://forums.asp.net/t/1792578.aspx/1)上的这个线程。您的构建环境中的 .net 4.5 beta 版本似乎存在一些问题。您的本地和构建环境中肯定存在 dll 不匹配

# tsql - TSQL：确定存储过程返回的列数

> ID：11618634
> 
> 赞同：3
> 
> 时间：2012-07-23T18:53:20.283
> 
> 标签：tsql, stored-procedures, dynamic, temp-tables

以前可能有人问过这个问题，但我找不到令人满意的答案。

我需要将存储过程的结果插入到临时表中，例如：

```
INSERT INTO #TEMP EXEC MY_SP 
```

我事先不知道 SP 将返回多少列，因此我需要准备我的#TEMP 表（通过动态 ALTER .. ADD 命令）以添加列以匹配 SP 结果集。

假设是 - SP 不接受任何参数并且列数始终相同。但是如何在 SP 之外的纯 TSQL 中确定该数字，以便可以将其存储到变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:03:43.927

这有点尴尬，但你可以这样做：

```
SELECT * INTO #temp 
FROM OPENROWSET('SQLOLEDB','Data Source=MyServer;Trusted_Connection=yes;Integrated Security=SSPI', 'EXECUTE MyDB.MySchema.MyProcedure @MyParm=123') 
```

我已经[请求](https://connect.microsoft.com/SQLServer/feedback/details/675710/execute-into-to-capture-execute-results-in-a-new-table)了一个 EXECUTE INTO 语法，比如 SELECT INTO 以避免必须提前知道存储过程输出的形状，但它被拒绝了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:19:30.850

艰难的一个，特别是如果其他人拒绝您运行所需的权限，例如 OPENROWSET。

您是否考虑过对 SP 进行解包/编写脚本并将其内容直接添加到您的 T-SQL 中？通过这种方式，您可以随意修改和调整它。

否则，如果你能解释更多关于 SP 的信息：

*   SP是做什么的？
*   它输出什么样的信息？一 N 列，- 多少行？
*   是慢/快吗？（我们是否可以使用蛮力 [try-catch] 方法）？
*   它如何确定要输出的列以及更改的频率？
*   你能以任何方式预先确定列吗？（这样您就可以使用 INSERT #temp EXEC sp_getData 语法）。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T20:48:20.870

让我从一开始就说，如果我必须这样做，我会尝试在 SQL 环境或其他东西之外找到一种方法，因为我提供的解决方案不是做到这一点的好方法，但它确实有效。所以我并不是说这是一个好主意。我有一个名为 test 的 sp：

```
CREATE PROCEDURE Test
AS
SELECT 1 as One, 2 as Two 
```

要动态执行此操作，我执行以下操作：

```
DECLARE @i int
SET @i = 1;
DECLARE @SUCESS bit 
SET @SUCESS = 0
WHILE(@SUCESS = 0)
BEGIN 
  DECLARE @proc VARCHAR(MAX)
  DECLARE @count int
  SET @count = 1
  SET @proc = 'DECLARE @t TABLE ( c1 varchar(max) '
  WHILE @count < @i 
  BEGIN 
    SET @proc = @proc + ', c' + CONVERT(varchar, @count + 1) + ' varchar(max) '
    print @proc 
    SET @count = @count + 1
  END
  SET @proc = @proc + '); INSERT INTO @t EXEC Test'
  BEGIN TRY
    EXEC(@proc);
    SET @SUCESS = 1
  END TRY
  BEGIN CATCH
    SET @i = @i+1
  END CATCH

END

SET @proc = @proc + '; SELECT * into ##t FROM @t '
EXEC( @proc )

SELECT * from ##t 
```

这对您的问题来说是一个糟糕的解决方案，因为您丢失了列的数据类型、它们的名称等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T23:11:55.667

我不懂语法，这可能不是最好的方法，但似乎有人通过转换为 xml 并解析它来做到这一点：[Dynamic query results into a temp table or table variable](https://stackoverflow.com/questions/6100314/dynamic-query-results-into-a-temp-table-or-table-variable/6100714#comment15434186_6100714)

# c# - 试图通过从日期中减去日期来获得 int

> ID：11618636
> 
> 赞同：3
> 
> 时间：2012-07-23T18:53:26.887
> 
> 标签：c#, datetime, date

使用此代码：

```
public static bool PlatypusIsAFornightOrLessOld(int PlatypusID) {
const int FORTNIGHT = 14;
const string sql = @"SELECT PLATYPUSBIRTHDATE
            FROM PLATYPI 
            WHERE PLATYPUSID = :PLATYPUSID";
DateTime dt;
try {
    using (var ocmd = new OracleCommand(sql, oc)) {
        ocmd.Parameters.Add("PLATYPUSID", PlatypusID);
        dt = Convert.ToDateTime(ocmd.ExecuteScalar());
    }
    return (DateTime.Today - dt) <= FORTNIGHT;
} catch (Exception e) {
. . . 
```

我得到：“返回”行上的“运算符'<='不能应用于'System.TimeSpan'和'int'类型的操作数”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T18:55:58.287

你需要做

```
return (DateTime.Today - dt).Days <= FORTNIGHT; 
```

[Days](http://msdn.microsoft.com/en-us/library/system.timespan.days.aspx)返回时间跨度的完整天数。如果您需要小数天数，您将使用 TotalDays。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T19:03:09.603

其他人建议*从*到`TimeSpan`天数。我建议将其表示`FORTNIGHT`为 a更清洁`TimeSpan`。或者，更好的是：将*截止日期*计算为 a`DateTime`并完全避免减法：

```
public static bool PlatypusIsAFornightOrLessOld(int platypusId) {
    DateTime oneFortnightAgo = DateTime.Today.AddDays(-14);

    ... SQL stuff ...

    return dt >= oneFortnightAgo;
} 
```

另外，我希望您还没有*真正*了解`catch(Exception e)`您的真实代码。您几乎*不*应该抓住`Exception`- 绝对不是在执行 SQL 操作的同一方法中。

# hadoop - 无法标记文件数据

> ID：11618637
> 
> 赞同：1
> 
> 时间：2012-07-23T18:53:32.820
> 
> 标签：hadoop, mapreduce, hadoop-streaming

我是hadoop和mapreduce的新手。在映射器中，我将使用以下给定格式对文本文件中的这些数据进行标记，前几行

```
9593C58F7C1C5CE4    970916072134    levis
9593C58F7C1C5CE4    970916072311    levis strause & co
9593C58F7C1C5CE4    970916072339    levis 501 jeans
45531846E8E7C127    970916065859    
45531846E8E7C127    970916065935    
45531846E8E7C127    970916070105    "brazillian soccer teams"
45531846E8E7C127    970916070248    "brazillian soccer"
45531846E8E7C127    970916071154    "population of maldives"
082A665972806A62    970916123431    pegasus
F6C8FFEAA26F1778    970916070130    "alicia silverstone" cutest crush batgirl babysitter clueless 
945FF0D5996FD556    970916142859    mirc 
```

使用 String Tokenizer 我无法拆分这些数据，它让机器从这个文件中捕获数据感到困惑。除了 String.split() 之外，这个问题还有其他选择吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:55:48.140

您可以使用 TextInputFormat 一次给定每一行，然后如果它确实是固定宽度格式并且您有恒定数量的字段 (3)，那么您可以执行以下操作：

```
Text token1 = new Text();
Text token2 = new Text();
Text token3 = new Text();

protected void map(LongWritable key, Text value, Context context) {
    // 0123456789012345678901234567890123456789
    //           1         2         3
    // 9593C58F7C1C5CE4    970916072134    levis

    if (value.getLength() >= 37) {
      token1.set(value.getBytes(), 0, 16);
      token2.set(value.getBytes(), 20, 12);
      token3.set(value.getBytes(), 26, value.getLength() - 26);

      // TOFO: Do something with these tokens
    } else {
      // TODO: handle bad record length
    }
} 
```

**免责声明**：完全未经测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:04:17.277

@Hanry：你为什么不使用相同的java **StringTokenizer**。您所要做的就是对 wrt 空间进行标记，获取总标记数，然后迭代并使用第一个和第二个标记，并将后续标记连接到第三个字符串中。

# f# - 编译器如何处理扩展记录

> ID：11618640
> 
> 赞同：3
> 
> 时间：2012-07-23T18:53:52.220
> 
> 标签：f#

当记录被扩展（深拷贝？）时，编译器是否在内存中创建一个新位置，或者编译器是否使记录可变并修改值？

例如：

```
type MyRecord = { A : string
                ; B : string
                }

let record = { A = "A"; B = "B" }

let record = { record with A = "new A" } //copy or overwrite? 
```

由于我正在覆盖`record`，编译器会复制还是覆盖？无论哪种方式都存在性能问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T18:59:43.400

它制作副本。

[复制和更新记录表达式](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997059)

*复制和更新记录表达式的详细说明就好像它是一个记录表达式，如下所示：

**让 v = expr in { field-label1 = expr1 ; … ; 字段标签 = exprn; F1 = v.F1; ... ; 调频=v.调频}**

其中 F1 ... FM 是 R 中未在字段初始化器中定义的字段，v 是一个新变量。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:11:24.323

这

```
type T = {
  A : string
  B : string
}

let x = { A = "a"; B = "b" }
let y = { x with A = "aa" } 
```

相当于这个

```
class T {
    public readonly string A;
    public readonly string B;
    public T(string a, string b) {
        A = a;
        B = b;
    }
}

var x = new T("a", "b");
var y = new T("aa", x.B); 
```

# scrapy - Scrapy CrawlSpider 不爬行

> ID：11618641
> 
> 赞同：1
> 
> 时间：2012-07-23T18:53:56.240
> 
> 标签：scrapy

我在尝试抓取特定网站时遇到了一个奇怪的问题。如果我使用 basespider 爬取某些页面，则代码可以完美运行，但是如果我将代码更改为使用 crawlspider，则蜘蛛完成时不会出现任何错误，但不会出现爬虫

以下代码工作正常

```
 from scrapy.spider import BaseSpider
    from scrapy.selector import HtmlXPathSelector
    from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
    from scrapy.contrib.spiders import CrawlSpider, Rule
    from scrapy.contrib.loader import XPathItemLoader
    from dirbot.items import Website
    from urlparse import urlparse
    from scrapy import log

class hushBabiesSpider(BaseSpider):
   name = "hushbabies"
   #download_delay = 10
   allowed_domains = ["hushbabies.com"]
   start_urls = [
       "http://www.hushbabies.com/category/toys-playgear-bath-bedtime.html",
       "http://www.hushbabies.com/category/mommy-newborn.html",
       "http://www.hushbabies.com"

   ]
   def parse(self, response):
       print response.body
       print "Inside parse Item"
       return [] 
```

以下代码不起作用

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.loader import XPathItemLoader
from dirbot.items import Website
from urlparse import urlparse
from scrapy import log

class hushBabiesSpider(CrawlSpider):
   name = "hushbabies"
   #download_delay = 10
   allowed_domains = ["hushbabies.com"]
   start_urls = [
       "http://www.hushbabies.com/category/toys-playgear-bath-bedtime.html",
       "http://www.hushbabies.com/category/mommy-newborn.html",
       "http://www.hushbabies.com"

   ]
   rules = (
        Rule(SgmlLinkExtractor(allow=()),
            'parseItem',
            follow=True,
        ),
    )
  def parseItem(self, response):
       print response.body
       print "Inside parse Item"
       return [] 
```

Scrapy 运行的输出如下

```
scrapy crawl hushbabies
2012-07-23 18:50:37+0000 [scrapy] INFO: Scrapy 0.15.1-198-g831a450 started (bot: SKBot)
2012-07-23 18:50:37+0000 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, WebService, CoreStats, MemoryUsage, SpiderState, CloseSpider
2012-07-23 18:50:37+0000 [scrapy] DEBUG: Enabled downloader middlewares: RobotsTxtMiddleware, HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2012-07-23 18:50:37+0000 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2012-07-23 18:50:37+0000 [scrapy] DEBUG: Enabled item pipelines: SQLStorePipeline
2012-07-23 18:50:37+0000 [hushbabies] INFO: Spider opened
2012-07-23 18:50:37+0000 [hushbabies] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2012-07-23 18:50:37+0000 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2012-07-23 18:50:37+0000 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2012-07-23 18:50:37+0000 [hushbabies] DEBUG: Crawled (200) <GET http://www.hushbabies.com/robots.txt> (referer: None)
2012-07-23 18:50:39+0000 [hushbabies] DEBUG: Crawled (200) <GET http://www.hushbabies.com> (referer: None)
2012-07-23 18:50:39+0000 [hushbabies] DEBUG: Crawled (200) <GET http://www.hushbabies.com/category/mommy-newborn.html> (referer: None)
2012-07-23 18:50:39+0000 [hushbabies] INFO: Closing spider (finished)
2012-07-23 18:50:39+0000 [hushbabies] INFO: Dumping spider stats:
        {'downloader/request_bytes': 634,
         'downloader/request_count': 3,
         'downloader/request_method_count/GET': 3,
         'downloader/response_bytes': 44395,
         'downloader/response_count': 3,
         'downloader/response_status_count/200': 3,
         'finish_reason': 'finished',
         'finish_time': datetime.datetime(2012, 7, 23, 18, 50, 39, 674965),
         'scheduler/memory_enqueued': 2,
         'start_time': datetime.datetime(2012, 7, 23, 18, 50, 37, 700711)}
2012-07-23 18:50:39+0000 [hushbabies] INFO: Spider closed (finished)
2012-07-23 18:50:39+0000 [scrapy] INFO: Dumping global stats:
        {'memusage/max': 27820032, 'memusage/startup': 27652096} 
```

将站点从 hushbabies.com 更改为其他站点将使代码正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:20:09.573

[SgmlLinkExtractor, sgmllib](http://docs.python.org/library/sgmllib.html)中的底层 SGML 解析器似乎存在问题。

以下代码返回零链接：

```
>>> from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
>>> fetch('http://www.hushbabies.com/')
>>> len(SgmlLinkExtractor().extract_links(response))
0 
```

您可以尝试来自 Slybot 的替代链接提取器，它依赖于 Scraply：

```
>>> from slybot.linkextractor import LinkExtractor
>>> from scrapely.htmlpage import HtmlPage
>>> p = HtmlPage(body=response.body_as_unicode())
>>> sum(1 for _ in LinkExtractor().links_to_follow(p))
314 
```

# html - Internet Explorer 7 中的 CSS 下拉菜单爆炸

> ID：11618649
> 
> 赞同：0
> 
> 时间：2012-07-23T18:54:33.677
> 
> 标签：html, css, internet-explorer, drop-down-menu, cross-browser

我正在创建一个带有下拉菜单的设计，并且在现代浏览器（即 Firefox、Chrome、Opera、Safari 和 IE9）中一切正常。但是，由于使用 IE7 和 IE8 的访问者数量较多，我还需要使菜单与这些版本的 Internet Explorer 兼容。

这是下拉菜单（[fiddle](http://jsfiddle.net/lalatino/suRE6/)，[pastebin](http://pastebin.com/mYYRAG16)）：

**HTML**

```
<ul class="menu_top">
    <li><a href="/" title="Home" class="selected">Home</a></li>
    <li><a href="/Help_Videos" title="Help Videos" class="haschildren">Help Videos</a><ul>
        <li><a href="/Child_Page" title="Child Page">Child Page</a></li>
        <li><a href="/Site_Map" title="Site Map" class="haschildren">Site Map</a><ul>
            <li><a href="/Galleries" title="Galleries">Galleries</a></li>
            <li><a href="/Missing" title="Missing">Missing</a></li></ul>
        </li></ul>
    </li>
    <li><a href="/About" title="About" class="haschildren">About</a><ul>
        <li><a href="/Contact" title="Contact">Contact</a></li></ul>
    </li>
</ul> 
```

**CSS**

```
ul.menu_top {
    float:left;
    width:70%;
    margin: 8px 100px 0 0;
    border-radius:4px;
    background-color: #c4092a;
    list-style-type: none;
    z-index:+1;
}
ul.menu_top li {
    float: left;
    position: relative;
    margin: 4px 2em 4px 4px;
    padding: 0;
}
ul.menu_top li ul {
    visibility: hidden;
    position: absolute;
    top:100%;
    left:0;
    padding:0.5em;
    list-style-type: none;
    white-space:nowrap;
    background-color: #c4092a;
    border: 1px solid white;
    border-radius:4px;
    z-index:+1;
}
ul.menu_top li:hover > ul {
    visibility: visible;
    z-index: +2;
}
ul.menu_top li ul li {
    padding: 0;
    margin: 12px 4px;
    float:none;
    border:0;
    min-width:3em;
}
ul.menu_top li ul li ul {
    top:0;
    left:99%;
}
ul.menu_top a {
    background-color:#c4092a;
    color:white;
    text-decoration:none;
    padding:4px;
    font-size:18px
}
ul.menu_top a:hover,
ul.menu_top a.haschildren.childselected,
ul.menu_top a.selected {
    background-color:white;
    color:blue;
    text-decoration:none;
}
ul.menu_top li a.haschildren:after {
    content: "\00A0\00A0\25BC";
}
a {
    color:#0000aa;
    background-color:inherit;
} 
```

## IE7 和 IE8 中的屏幕截图

![在 IE7+IE8 中的样子](../Images/fd5c380d2fd4c41c3aac46d121c3dd87.png)

我已经在 IE Developer Tools 中测试了向后兼容性：

*   **IE7：**列表`<ul>`移位，无法导航
*   **IE8：**仅缺少圆角（这是一个小问题）

我尝试按照[此答案](https://stackoverflow.com/questions/7449773/internet-explorer-7-css-menu-positioning)中的建议修改样式，但未成功。

那么，有人知道如何解决这些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:40:19.800

总的来说，您的问题是您使用的 CSS 比您需要支持的某些浏览器更先进。圆角和大多数伪元素在旧浏览器中的支持参差不齐。

我注意到你的箭头在 IE7 中丢失了，这是我的线索。IE7 不支持伪类元素:after。这是一个有用的参考页面，用于检查某些 CSS [http://kimblim.dk/css-tests/selectors/](http://kimblim.dk/css-tests/selectors/)的浏览器支持。

Quirksmode.org 是一个很好的兼容性资源。这是特定于 :after [http://www.quirksmode.org/css/beforeafter.html的页面](http://www.quirksmode.org/css/beforeafter.html)

# c++ - 如何不链接到 msvcr100.dll？

> ID：11618650
> 
> 赞同：2
> 
> 时间：2012-07-23T18:54:33.287
> 
> 标签：c++, visual-studio-2010, compiler-construction, linker, msvcrt

我在 Visual Studio 10 中编译项目，编译的可执行文件在 win 7 上运行良好，但由于缺少 msvcrt100.dll，它在 win xp 上不起作用。我尝试使用“/NOTDEFAULTLIB”，但它也删除了我使用的其他一些外部库。有没有办法不链接到最新的 Microsoft 运行时库？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T19:04:33.187

要不链接到 DLL，您必须静态链接到运行时。

为此，请转到 C/C++ 属性 -> 代码生成，然后在运行时库下从下拉列表中选择多线程 (/MT) 或多线程调试 (/MTd)。请注意，一旦您使用静态运行时库，您链接的所有其他库代码也必须使用相同的设置构建。而且您可能还必须在附加依赖项下的链接器 -> 输入中添加其他库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T19:02:53.907

它只能在 Windows 7 机器上运行，之前有人安装了那个 DLL。

除了创建安装程序（使用安装项目轻松完成）之外，一个简单的修复方法是将 msvcr100.dll 与您自己的二进制文件一起复制。如果您只有一个 EXE，那么简单的解决方案是链接 CRT 的静态版本。切换到 Release 构建，右键单击项目，Properties，C/C++，Code Generation，Runtime Library 设置。将其从默认的 /MD 更改为 /MT。

# google-maps - Google Maps API 地点库出现 404 错误

> ID：11618651
> 
> 赞同：3
> 
> 时间：2012-07-23T18:54:38.093
> 
> 标签：google-maps, google-maps-api-3

我的页面上有这个：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script> 
```

我使用这个库，以便在某些输入元素上显示一个自动完成的地点列表。

直到几天前，它工作正常。现在，它不起作用，我在 Chrome 的控制台上注意到了这个错误：

```
GET http://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/9/10a/%7Bmain,places%7D.js?_=1343069114062 404 (Not Found) 
```

我已经了解到这是**?_=1343069114062**部分正在破坏（尝试[http://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/9/10a/%7Bmain ,places%7D.js](http://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/9/10a/%7Bmain,places%7D.js) - 工作正常。）

你能帮我解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:49:59.027

显然我的文件上的其他东西在干扰。

我刚刚将脚本标签移动到文档中的另一个位置，现在一切正常。

# php - jquery ajax返回值未按预期响应

> ID：11618653
> 
> 赞同：1
> 
> 时间：2012-07-23T18:54:39.263
> 
> 标签：php, javascript, json, jquery

当我调用这个 ajax 函数时，对象`data`会很好地打印到 chrome 控制台：

```
$.ajax({
    type: "POST",
    cache: false,
    url: "login_user.php",
    data: "username=" + username + "&password=" + password + "&remember=" + remember,
    dataType: "json",
    success: function (data) {

        if (data == "FALSE") {

            $('#input_password').val("");

            alert("The username or password you have entered is incorrect.");

            return false;
        }

        console.log(data);

        console.log(data.accepted_terms);

        //always alerts 'not accepted'
        if (data.accepted_terms == "TRUE") {

            alert('accepted!');

        } else {

            alert('not accepted');
        }
    }

}); 
```

![chrome控制台截图](../Images/245b0f4c88ffd0f90e4c342252ae1400.png)

未定义的结果是`console.log(data.accepted_terms);`

被引用的 php 文件以`json_encode($login_info_array)`.

我是否错误地处理了这个返回的对象？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T18:58:22.903

尝试这个

```
console.log(data[0].accepted_terms); 
```

# java - System.in available() 调用给出“非法搜索”

> ID：11618662
> 
> 赞同：1
> 
> 时间：2012-07-23T18:55:20.907
> 
> 标签：java, file-io, io

我有类似于以下内容：

```
public class X extends Thread{
    BufferedInputStream in = (BufferedInputStream) System.in;
    public void run() {
        while (true) {
            try {
                while (in.available() > 0) {
                  // interesting stuff here
                }
            } catch (Exception e) {
                e.printStackTrace();
            }                   
        }
    }
} 
```

...这在很大程度上有效，但有时我会开始在 stderr 中看到以下内容（一旦发生似乎会不断重复 - 我猜一旦这种情况开始发生，应用程序最终会崩溃）：

```
java.io.IOException: Illegal seek
    at java.io.FileInputStream.available(Native Method)
    at java.io.BufferedInputStream.available(BufferedInputStream.java:381)
    at compactable.sqlpp.X.run(X.java:40) 
```

...我不知道是什么原因造成的。老实说难住了。群众对这怎么可能发生的任何想法？

感谢收到任何/所有有用的建议:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:38:00.537

如果流已关闭，您可以获得可用的 IOException 调用。

此外，*available()*不会告诉您还有多少要读取的流，或者流是否为空，它只会告诉您可以在不阻塞的情况下读取多少（基本上是等待将更多内容放入流中）。你想要的是阅读，直到你的阅读返回*-1*。

```
int c;
while ( (c = in.read()) != -1 ) {
  // do stuff
} 
```

或者

```
int readLength;
byte[] buffer = new byte[1024];
while ( (length = in.read(buffer) != -1) {
  // do stuff with buffer, it now has bytes in buffer[0] to buffer[readLength-1]
} 
```

# c++ - Qt Widget - 如何仅捕获几个键盘键

> ID：11618664
> 
> 赞同：6
> 
> 时间：2012-07-23T18:55:25.817
> 
> 标签：c++, qt4, keyboard

我知道通过grabKeyboard()，如果我的小部件没有获得焦点，它也能够抓取每个键盘事件，但是如果我只想捕获三个或四个键怎么办？

我尝试使用事件过滤器 [https://doc.qt.io/qt-5/qobject.html#installEventFilter](https://doc.qt.io/qt-5/qobject.html#installEventFilter)

但这不起作用（也许是因为我是这样安装的？）

```
 class MyWidget: public QGLWidget
    {
        ...
    protected:
        bool eventFilter( QObject *o, QEvent *e );
    };

    bool MyWidget::eventFilter( QObject *o, QEvent *e )
    {
        if ( e->type() == QEvent::KeyPress ) {
            // special processing for key press
            QKeyEvent *k = (QKeyEvent *)e;
            qDebug( "Ate key press %d", k->key() );
            return TRUE; // eat event
        } else {
            // standard event processing
            return FALSE;
        }
    }

// Installed it in the constructor
MyWidget::MyWidget()
{
    this->installEventFilter(this);
} 
```

我怎样才能只截取我的小部件中的几个键而让其他小部件（QTextEdits）剩下的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T19:36:11.620

您自己的评论说明了一切：

```
return TRUE; // eat event 
```

当您返回`true`所有键时，将不会进一步处理该事件。您必须返回`false`所有不想处理的键。

另一种没有事件过滤器但重新实现keyPressEvent的方法：

```
void MyWidget::keyPressEvent( QKeyEvent* event ) {
    switch ( event->key() ) {
    case Qt::Key_X:
        //act on 'X'
        break;
    case Qt::Key_Y:
        //act on 'Y'
        break;
    default:
        event->ignore();
        break;
    }
} 
```

# c# - 如何按升序显示复选框选定的项目

> ID：11618670
> 
> 赞同：0
> 
> 时间：2012-07-23T18:55:33.090
> 
> 标签：c#, asp.net

这是我的代码：

```
protected void check1_SelectedIndexChanged(object sender, EventArgs e)       
{            
    for (int i = 0; i < check1.Items.Count; i++)           
    {               
        if (check1.Items[i].Selected)
        {
            comment.Text = "\u2022 "+check1.Items[i].Text  +"<br/>"+ comment.Text;
        }
    }
} 
```

例如，如果我有复选框列表：

`*apple` `*Mango` `*Orange` `*Grapes`

我选择了苹果、橙子和葡萄，它显示为

`grapes` `orange` `apple`

我希望它显示为：

`apple` `orange` `grapes`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:04:25.813

您可以使用 Linq 对其进行排序并使用它

例子 ：

```
var sortedCheckBoxes = check1.Items.Where(c => c.Selected).OrderBy(c => c.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:06:33.107

首先将这些项目存储在 List 中，然后对其进行排序，然后将其设置为 Comment.Text 属性

```
protected void check1_SelectedIndexChanged(object sender, EventArgs e) 
{

 List<string> lst = new List<string>();

 for (int i = 0; i < check1.Items.Count; i++)
 {

    if (check1.Items[i].Selected)
    {           
       lst.Add(check1.Items[i]);            
     }           
  }

  lst.Sort();
  foreach(list l in lst)
  {
     comment.Text += l;
  }
 } 
```

# c - 'jpg_name' 可能在此函数中使用未初始化 [-Werror=uninitialized]

> ID：11618671
> 
> 赞同：4
> 
> 时间：2012-07-23T18:55:35.213
> 
> 标签：c, pointers, char

```
int counter = 0;
char *jpg_name;
sprintf(jpg_name, "%3i.jpg", counter);
FILE *photo = fopen( jpg_name, "w");
counter++; 
```

我不断收到以下错误：

```
'jpg_name' may be used uninitialized in this function [-Werror=uninitialized] 
```

我正在尝试使用该`sprintf`函数编写文件名。我想我必须以某种`char*`不正确的方式声明，但我不确定如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:56:59.843

抱怨是因为您使用的是未初始化的指针，而不是因为内容。试着`malloc`回忆一下。

```
char *jpg_name = malloc(ENOUGH); 
```

或者，您可以只使用一个`char`数组。

* * *

旁注：您可以考虑`snprintf`代替`sprintf`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:57:30.390

您需要为正在构建的字符串分配内存。

```
char jpg_name[MAX_LEN + 1];
snprintf(s, MAX_LEN, "%3i.jpg", counter); 
```

您还可以使用`malloc`：

```
jpg_name = malloc(sizeof(char) * (MAX_LEN + 1)); 
```

在您的情况下，`MAX_LEN`应该至少为 5，假设您只有个位数的计数器。如果您的计数器可以增长到多位数，则需要使用更大的`MAX_LEN`.

至于您的错误：当您使用尚未初始化的变量时，编译器会警告您：设置为某个值。你没有初始化你的`char*`，所以编译器会抱怨，但这也可能发生，例如 uninitialized `int`。养成将变量初始化为默认值的习惯。

# php - 尽管 z-index 换行？

> ID：11618672
> 
> 赞同：0
> 
> 时间：2012-07-23T18:55:36.897
> 
> 标签：php, html, css, line, break

您好，我在使用 z-index 时遇到问题。我有一个带有一些输入字段的表单。在他们旁边，我有一些错误 div 用于回显 php 错误消息。我遇到的问题是，只有在设置错误时才会出现的错误 div 会导致输入字段出现换行符。

```
.wrapper   #mainframe   #left #frame form fieldset ul .fr {
    width: 180px;
    float: left;
    margin-bottom: 18px;
    margin-left: 25px;
}
.wrapper #mainframe   #left #frame form fieldset ul input.err {
    width: 180px;
    height: 18px;
    line-height: 18px;
    padding-left: 5px;
    margin-top: 3px;
    outline:none;   
    background-image: url(../images/error.png);
    background-repeat:no-repeat;
    background-position: 172px 50%;
}
.wrapper #mainframe #left #frame form fieldset ul .erl {
    color: #FFF;
    position: relative;
    z-index: 1;
    background-color: #f23;
    width: 200px;
    height: 30px;
    font-family:Arial, Helvetica, sans-serif;
    font-size: 10px;
    font-weight: bold;
    line-height: 30px;
    text-align: center;
    left: +217px;
    top: 25px;
} 
```

这是html代码：

```
<li class="fr">
<label for="a">a</label>
<?php if (isset($errors['a'])):?>
<input class="err" type="text" id="a" name="a" value="<?php echo isset ($_POST['a'])? $_POST['a'] : ''; ?>" tabindex="20" autocomplete="off"/>
<?php if ( isset($errors['a']) 
&& empty($errors['a'][0]) == true ):?>

<?php echo "<div class='erl'>"; 
echo $errors['a'][0];
echo "</div>";
endif;?>

<?php endif;?> 
```

所以我不明白为什么会这样。我认为使用 z-index 就像导致两层（z-index:0 和 z-index:1），因此第二层 z-index:1 的左右手边应该有足够的位置。如果有人能告诉我如何解决这个问题，我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:18:00.343

我会寻找可能会增加意外间距和整体宽度的填充和边距（http://css-tricks.com/the-css-box-model/）。

此外，检查以确保您应用 z-index 的任何元素都明确声明了它们的位置......还有父元素的定位（http://tjkdesign.com/articles/z-index/teach_yourself_how_elements_stack.asp）。

最后，我会看看 hasLayout 属性的问题 (http://www.satzansatz.de/cssd/onhavelayout.html)。这可能是 Vinny 所说的，因为 Z-index 不会像堆栈顺序那样改变文档流动的方式。尝试对错误消息使用 position:absolute 以将它们从文档的整体流程中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:17:55.733

为避免换行，您需要从文档流中删除错误元素。该`z-index`属性与此完全无关；它只影响元素的堆栈顺序，否则它与位置无关。

这就是为什么我把你推荐给这个[jsfiddle](http://jsfiddle.net/QwCsg/)；帮助解决问题的替代方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T19:29:39.200

尝试这个：

HTML：

```
<li class="fr">
    <label for="a">a</label>
    <input class="err" type="text" id="a" name="a" value="" tabindex="20" autocomplete="off"/>
    <div class='erl'> Error text</div>
    <div class="sp"></div>
</li> 
```

CSS：

```
//for label
.fr label, .fr .err, .fr .erl {
    float:left;
}
.fr .sp {
    clear:both;
} 
```

# java - java：从目录中登记 .zip 文件

> ID：11618676
> 
> 赞同：0
> 
> 时间：2012-07-23T18:55:55.643
> 
> 标签：java, xml, zip

我有一个包含大量文件的文件夹`.zip`。我想征用这些文件并递归读取压缩`.xml`文件。我将如何首先征用这些`.zip`文件？我根本不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:06:14.327

为您的目录创建一个对象，并使用适合您的 zip 文件的过滤器`File`调用其方法。`listFiles`

`ZipFile`为每个 zipfile构造一个对象并调用其`entries()`方法以获取条目列表。找到所需`ZipEntry`的 XML 文件并调用`ZipFile.getInputstream(xmlZipFileEntry)`以开始读取其内容。

# django - Django Admin：从选定外键的属性中动态自动填充表单字段

> ID：11618679
> 
> 赞同：1
> 
> 时间：2012-07-23T18:55:58.597
> 
> 标签：django, django-admin

我有两个与问题相关的简单模型：

```
class CarMake(models.Model):
    make = models.CharField(max_length=64)
    default_cost = models.DecimalField(max_digits=7, decimal_places=2)

class Car(models.Model):
    model = models.CharField(max_length=64)
    make = models.ForeignKey(CarMake)
    cost = models.DecimalField(max_digits=7, decimal_places=2) 
```

在 Django Admin 中创建或更新`Car`对象时，我希望该`cost`字段自动填充从下拉列表中选择的选项`default_cost`。`CarMake`

目前，如果在保存对象时该字段留空，我会将其存储`cost`为品牌。当下拉列表选择一个值`default_cost`时，我更愿意动态地执行此操作。`make`我认为该解决方案将涉及一些 JavaScript ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:27:49.833

是的，如果您希望动态更新选择，则必须使用 JS。做这种事情会涉及入侵 django 管理站点。您可能只需自定义模板以加载一些 JS 和更新特定下拉列表的事件处理程序即可。但是，在更新 Django 时，这很容易受到破坏（管理站点模板不能保证向后兼容性）。就我个人而言，我只想写一个自定义视图。

# ruby-on-rails - 使用 omniauth 设计 - 为开发和生产设置单独的配置

> ID：11618680
> 
> 赞同：6
> 
> 时间：2012-07-23T18:56:06.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth, production-environment

我正在使用带有设计的omniauth，以允许在我的应用程序中通过Facebook登录。

我的 devise.rb 文件有以下行

```
config.omniauth :facebook, 'MY_DEV_APP_ID', 'MY_DEV_APP_SECRET' 
```

我在 facebook 上有 2 个应用程序，一个指向我的 live url，另一个指向我的 dev url。

如何将两个单独的omniauth 配置添加到devise rb 文件中？

就像是 -

```
if ENV['RAILS_ENV'] = "production"
    config.omniauth :facebook, 'MY_LIVE_APP_ID', 'MY_LIVE_APP_SECRET'  
else
    config.omniauth :facebook, 'MY_DEV_APP_ID', 'MY_DEV_APP_SECRET' 
end 
```

**更重要的是**，我应该把它放在 devise.tb 文件中还是应该将它分离到我的 production.rb 和 devleopment.rb 文件中？如果是这样，我如何在我的 devise.rb 文件中引用它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T19:34:17.880

我的方法是将它们存储在 yaml 文件中。我叫我的`config/api_keys.yml`

```
defaults: &defaults
  twitter:
    api_key: "KEY"
    api_secret: "SECRET"
  facebook:
    api_key: "KEY"
    api_secret: "SECRET"

development:
  <<: *defaults

test:
  <<: *defaults

production:
  twitter:
    api_key: "KEY2"
    api_secret: "SECRET2"
  facebook:
    api_key: "KEY2"
    api_secret: "SECRET2" 
```

然后在我的`devise.rb`文件中我这样做：

```
API_KEYS = YAML::load_file("#{Rails.root}/config/api_keys.yml")[Rails.env]
config.omniauth :facebook , API_KEYS['facebook']['api_key'], API_KEYS['facebook']['api_secret']
config.omniauth :twitter , API_KEYS['twitter']['api_key'], API_KEYS['twitter']['api_secret'] 
```

作为一种好的做法，您可能不应该将生产 API 密钥存储在版本控制中的此文件中。您应该将其存储在服务器上并在部署脚本中对其进行符号链接，就像您将`database.yml`

# java - EJB 作为控制器

> ID：11618683
> 
> 赞同：5
> 
> 时间：2012-07-23T18:56:11.717
> 
> 标签：java, ejb

在开发 Java EE 应用程序时，是否可以使用 EJB 作为控制器？

EJB容器提供生命周期管理、并发控制等特性，创建无状态EJB作为控制器并注入ManagedBean是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:59:03.207

从 EJB 3.0 开始，特别是在 3.1 中，EJB Bean 变成了越来越多的 POJO，因此 EJB 概念变得模糊，更倾向于 CDI 内部更通用的托管 Bean 概念。甚至`@EJB`注释也与它“竞争”`@Inject`并最终可能被它取代。

因此，在 CDI 中，控制器可以是托管 bean，并利用 Java EE 服务器特性，如生命周期管理等。

# python - 为什么不能在 Python 中重新导入？

> ID：11618687
> 
> 赞同：3
> 
> 时间：2012-07-23T18:56:24.047
> 
> 标签：python, import

关于 SO 上的重新导入有很多问题和答案，但如果不了解其背后的机制，这一切似乎都非常违反直觉。

如果你导入一个模块，改变内容，然后再次尝试导入，你会发现第二次导入没有效果：

```
>>> import foo    # foo.py contains: bar = 'original'
>>> print foo.bar
original
>>> # edit foo.py and change to: bar = 'changed'
>>> import foo
>>> print foo.bar
original 
```

当我发现`reload`：

```
>>> reload(foo)
>>> print foo.bar
changed 
```

但是，当您从模块导入项目而不导入模块本身时，没有简单的解决方案：

```
>>> from foo import baz
>>> print baz
original
>>> # change foo.py from baz = 'original' to baz = 'changed'
>>> from foo import baz
>>> print baz
original
>>> reload(foo)
Traceback (most recent call last):
  File "<pyshell#10>", line 1, in <module>
    reload(foo)
NameError: name 'foo' is not defined 
```

`import`当你给它一个新的语句时，为什么 Python 不会更新导入的项目？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T18:56:24.047

导入模块时，它会缓存在[`sys.modules`](http://docs.python.org/library/sys.html?highlight=sys.modules#sys.modules). 在同一会话中再次导入同一模块的任何尝试都只会返回其中包含的已经存在的模块。当从多个地方导入模块时，这会加快整体体验。它还允许模块在所有导入之间共享自己的对象，因为每次都返回相同的模块。

如前所述，您可以使用[`reload`](http://docs.python.org/library/functions.html?highlight=reload#reload)重新导入整个模块。检查文档中的警告，因为即使这也不是万无一失的。

当您从模块中导入特定项目时，整个模块将按上述方式导入，然后将您请求的对象放置在您的命名空间中。`reload`不起作用，因为这些对象不是模块，而且您从未收到对模块本身的引用。解决方法是获取对模块的引用，重新加载它，然后重新导入：

```
>>> from foo import baz
>>> print baz
original
>>> # change foo.py from baz = 'original' to baz = 'changed'
>>> import foo
>>> reload(foo)
>>> from foo import baz
>>> print baz
changed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:17:37.503

“为什么”的简单解释是 import 语句涉及两个操作：加载模块（即运行其中的代码），以及将名称导入到导入模块的命名空间中。重新导入只会重做第二个操作。原因是第一个操作在计算和内存资源方面可能很昂贵。

`reload`提供作为重做第一个操作的一种方式，但是，如您所见，它需要模块名称。但是，不要被愚弄，以为`from foo import bar`不会*加载*整个模块。确实如此。所有模块的代码都运行，只是您只能引用`bar`您明确导入的名称（例如，）。因此，导入模块和不导入模块之间几乎没有真正的区别；唯一的区别是命名空间问题。所以如果你认为你可能想要重新加载模块`foo`，你应该继续做`import foo`。如果你愿意，你可以这样做来刷新你导入的名字：

```
import foo
from foo import bar
# later...
reload(foo)
from foo import bar 
```

不能重新导入单个名称的另一个原因是 Python 无法更改引用的对象。它只能重新绑定名称。假设你这样做：

```
from foo import bar
newBar = bar
from foo import bar 
```

即使第二次导入确实刷新了 bar 的值，它也永远不会刷新 newBar 的值，因为 foo 和 bar 都无法知道您创建了一个额外的名称来引用 bar。避免重新绑定个人名称可以防止您落入这个陷阱；如果人们认为重新导入会刷新名称，那么很容易忘记它仍然不会刷新对象。

# objective-c - intValue 总是返回 0

> ID：11618691
> 
> 赞同：2
> 
> 时间：2012-07-23T18:56:33.660
> 
> 标签：objective-c, casting

那是代码：

```
NSLog(@"value  = %@",[currentPatient kids_val]);
NSLog(@"value  = %d",[[currentPatient kids_val] intValue]); 
```

这是控制台：

```
2012-07-23 21:43:52.665 Sample[24491:207] value  = 
    14
2012-07-23 21:43:52.665 Sample[24491:207] value  = 0 
```

我需要intValue。但它返回 0。我认为存在 '/r' 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:03:25.493

是的，这是 '/r' 的问题，`intValue`如果接收者不是以数字的有效十进制文本表示开头，则返回 0。

# linux - Shell - 将变量内容写入文件

> ID：11618696
> 
> 赞同：131
> 
> 时间：2012-07-23T18:56:42.820
> 
> 标签：linux, bash, shell

我想将变量（此处称为`var`）的内容复制到文件中。

文件名存储在另一个变量`destfile`中。

我在执行此操作时遇到问题。这是我尝试过的：

```
cp $var $destfile 
```

我也用 dd 命令尝试过同样的事情......显然，shell 认为它`$var`指的是一个目录，所以告诉我找不到该目录。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-07-23T19:12:24.137

使用`echo`命令：

```
var="text to append";
destdir=/some/directory/path/filename

if [ -f "$destdir" ]
then 
    echo "$var" > "$destdir"
fi 
```

代表文件的`if`测试。`$destdir`

`>`截断文件后附加文本。如果您只想将文本附加`$var`到文件现有内容中，请`>>`改用：

```
echo "$var" >> "$destdir" 
```

该`cp`命令用于复制文件（到文件），而不是用于将文本写入文件。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2018-03-21T23:56:18.467

`echo`有一个问题，如果`var`包含类似的东西`-e`，它将被解释为一个标志。另一个选项是`printf`, 但`printf "$var" > "$destdir"`会扩展变量中的任何转义字符，因此如果变量包含反斜杠，则文件内容将不匹配。但是，由于`printf`仅将反斜杠解释为格式字符串中的转义，因此您可以使用`%s`格式说明符将确切的变量内容存储到目标文件中：

`printf "%s" "$var" > "$destdir"`

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2018-03-21T23:40:59.183

如果您的变量，上述答案均无效：

*   以。。开始`-e`
*   以。。开始`-n`
*   以。。开始`-E`
*   包含一个`\`后跟一个`n`
*   后面不应该有额外的换行符

因此它们不能依赖于任意字符串内容。

在 bash 中，您可以将“此处的字符串”用作：

```
cat <<< "$var" > "$destdir" 
```

* * *

正如下面 Ash 的评论中所指出的，[@Trebawa 的答案](https://stackoverflow.com/a/49418406/5951320)（与我在同一个房间里制定！） using`printf`是比`cat`.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-05-01T15:43:38.723

所有上述工作，但还必须解决一个不需要首先发生的问题（转义和特殊字符）：当变量被 shell 扩展时的特殊字符。只是首先不要这样做（变量扩展）。直接使用变量，无需扩展。

此外，如果您的变量包含一个秘密并且您想将该秘密复制到一个文件中，您可能不希望在命令行中进行扩展，因为 shell 命令的跟踪/命令回显可能会泄露秘密。意味着，`$var`命令行中使用的所有答案都可能通过将变量内容暴露给 shell 的跟踪和日志记录而存在潜在的安全风险。

对于已经导出的变量，使用这个：

```
printenv var >file 
```

这意味着，在 OP 问题的情况下：

```
printenv var >"$destfile" 
```

注意：变量名区分大小写。

警告：仅仅为了使用 printenv 打印而导出变量并不是一个好主意。如果您有一个包含机密的未导出脚本变量，则导出它会将其公开给所有未来的子进程（除非未导出，例如使用`export -n`）。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-07-23T19:20:36.810

如果我理解正确，您想复制`$var`一个文件（如果它是一个字符串）。

```
echo $var > $destdir 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T19:28:13.903

当您说“复制变量的内容”时，该变量是否包含文件名，还是包含文件名？

我假设您的问题`$var`包含您要复制到文件中的*内容：*

```
$ echo "$var" > "$destdir" 
```

这会将 $var 的值回显到一个名为 $destdir 的文件中。注意引号。将“$var”括在引号中非常重要。如果名称中有空格，也适用于“$destdir”。要附加它：

```
$ echo "$var" >> "$destdir" 
```

# c# - 如何检测一个 URL 是否被重定向到另一个 URL？

> ID：11618704
> 
> 赞同：2
> 
> 时间：2012-07-23T18:57:01.733
> 
> 标签：c#, httpwebrequest, http-status-codes, httpwebresponse, http-redirect

我使用此代码向网址发出“GET”请求。

```
var request = WebRequest.Create(uri) as HttpWebRequest;
request.Method = "GET";
var response = request.GetResponse() as HttpWebResponse;
var status = response.StatusCode; // returns HttpStatusCode.OK 
```

所以，问题是当一个 url 被重定向到另一个时，我无法检测到它。例如;

```
url is: http://site.com

that redirects to http://www.site.com 
```

但是当我向它发出请求时，`http://site.com`它会返回一个`HttpStatusCode.OK`for it -而不是重定向代码。请问你有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T18:59:44.080

您可以使用[AllowAutoRedirect](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx)属性。将其设置为 false 并自行处理重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-21T15:57:04.050

使用[HttpWebRequest.Address](https://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.address.aspx)属性，该属性明确定义为“请求期间发生的任何重定向完成后的 URI”

请注意，应该使用它而不是类似的[HttpWebResponse.ResponseUri](https://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.responseuri.aspx)，因为它的文档说：

> 需要访问最后重定向的 ResponseUri 的应用程序应该使用[HttpWebRequest..::..Address](https://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.address.aspx)属性而不是 ResponseUri，因为使用 ResponseUri 属性可能会打开安全漏洞。

# c# - 如何访问流布局面板中的复选框值？

> ID：11618708
> 
> 赞同：2
> 
> 时间：2012-07-23T18:57:16.723
> 
> 标签：c#, checkbox, flowlayoutpanel

我正在尝试更新 c# 中 flowlayoutpanel 中的复选框的值。为每个创建的面板生成复选框，并命名为“selected1”。

尝试访问我正在使用的代码中的特定复选框

```
flowLayoutPanel2.Controls[e.Index].Controls["selected1"] 
```

我试图创建一个 CheckBox 对象并将 Name 属性作为值并得到一个错误说明：

```
System.NullReferenceException: Object reference not set to an instance of an object. 
```

我正在使用的代码是：

```
try
{
    System.Windows.Forms.Control checkBox = new System.Windows.Forms.Control();
    checkBox = flowLayoutPanel2.Controls[e.Index].Controls["selected1"];
    MessageBox.Show(Convert.ToString(checkBox.Name));
}
catch (Exception ex)
{
    MessageBox.Show(Convert.ToString(ex));
} 
```

我想我可能只是试图以错误的方式访问复选框，就好像我只是尝试访问包含它的面板一样，我可以毫无问题地操作面板。

谢谢，山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:03:25.570

目前尚不清楚`e.Index`来自哪里，但我认为没有必要：

```
CheckBox checkBox;
if (flowLayoutPanel2.Controls.ContainsKey("selected1")) {
  checkBox = (CheckBox)flowLayoutPanel2.Controls["selected1"];
} 
```

如果您对该值感兴趣，最好使用 CheckBox 而不是仅使用 Control。

# apache-flex - 如何使用 FLEX 从客户端继续会话

> ID：11618713
> 
> 赞同：0
> 
> 时间：2012-07-23T18:57:38.847
> 
> 标签：apache-flex, session

我将 FLEX 用于我的 Web 应用程序的前端。我现在的任务是处理会话超时。我现在可以捕获会话超时。我想做的是让用户继续会话，这意味着让用户停留在当前页面上（例如，当前菜单选择或当前选择的表格）并恢复用户在文本字段中放置的所有内容。

例如，我的菜单中有四个部分：首页、管理、事件和设置。当用户点击“管理”时，会有一些文本字段，如用户名、地址或其他信息。当会话过期时，用户可以继续会话，保持“管理”状态并重新获得他们在文本字段中键入的内容。怎么做？感谢您的审阅！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:59:56.343

您可以在 Flex 组件中创建一个定期调用后端以保持会话打开的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:03:54.813

您只需要在当前“管理”面板前面显示登录面板或其他任何内容。

一旦用户重新登录，只需通过隐藏登录面板切换回以前的配置，用户就可以继续工作而不会丢失任何东西。

嗨，M。

# python - 有没有办法取消 gevent.spawn_later()？

> ID：11618714
> 
> 赞同：5
> 
> 时间：2012-07-23T18:57:41.870
> 
> 标签：python, gevent

如果调用 gevent.spawn_later()，有没有办法在这个预定函数发生之前取消它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T06:04:23.540

是的，使用`kill()`方法。

```
g = gevent.spawn_later(5, function)
g.kill() 
```

# xmlstarlet - xmlstarlet 插入标签

> ID：11618715
> 
> 赞同：2
> 
> 时间：2012-07-23T18:57:47.333
> 
> 标签：xmlstarlet

我正在使用命令：

`xmlstarlet ed --omit-decl --subnode "/boinc" --type elem -n app -v "" project_00.xml > project_01.xml`

但是，我想在该标签中再插入两个标签：

```
<app>
 <name>name</name>
 <nikname>nikname</nikname>
</app> 
```

在我的`project_00.xml`中，我已经有其他标签应用程序，它正在引起冲突。

这个命令的问题：

```
xmlstarlet ed --subnode "/boinc" --type elem -n app -v "" project_00.xml|     xmlstarlet ed --subnode //app --type elem -n name -v "newApp"| xmlstarlet ed --subnode //app --type elem -n user_friendly_name -v "New.App" > project_01.xml 
```

是它创造了这个：

```
 <app name="wilson">
    <name>wilson</name>
    <user_friendly_name>Mr.Wilson</user_friendly_name>
    <name>newApp</name>
    <user_friendly_name>New.App</user_friendly_name>
  </app>
  <app>
    <name>newApp</name>
    <user_friendly_name>New.App</user_friendly_name>
  </app> 
```

知道确切的命令吗？

我试过这个命令，但它复制到所有应用程序标签

```
xmlstarlet ed -s "/boinc" -t elem -n app -v "" -s "/boinc/app" -t elem -n name -v "name" -s "/boinc/app" -t elem -n user_friendly_name -v "New.App" project_00.xml > project_01.xml 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T01:01:04.467

基本上，您需要一个 XPath 表达式来匹配您刚刚插入的节点；因为`--subnode`总是把新孩子放在最后，你可以使用`/boinc/app[last()]`：

```
xmlstarlet ed \
  --subnode /boinc --type elem -n app -v '' \
  --subnode '/boinc/app[last()]' --type elem -n name -v newApp \
  --subnode '/boinc/app[last()]' --type elem -n user_friendly_name -v New.App \
  project_00.xml > project_01.xml 
```

# mysql - 在 MySQL Workbench 中删除 MySQL LocalHost 服务器

> ID：11618716
> 
> 赞同：1
> 
> 时间：2012-07-23T18:57:58.997
> 
> 标签：mysql, mysql-workbench

几周前，我在我的计算机上设置了一个 MySQL LocalHost 服务器。我一直在服务器上测试一些代码，但现在我想删除它。当我打开我的 MySQL Workbench Workspace 视图时，服务器 LocalHost 会在“服务器管理”和“打开连接以开始查询”部分下弹出。我右键单击这两个部分下的 LocalHost 列表并将它们删除。不幸的是，当我重新启动 MySQL Workbench 时，我从上一个会话中删除的 LocalHost 实例会重新弹出。如何在我的 MySQL Workbench Workspace 视图中永久删除 LocalHost 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-03T19:31:45.327

从 Workbench 6 开始，重新启动后不再自动添加本地连接。但是，要添加它们，请右键单击 Workbench 主屏幕并从上下文菜单中选择“重新扫描本地 MySQL 连接”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:42:07.343

默认情况下，MySQL Workbench 将加载 localhost 服务器实例。从 Workbench 5.2.40 开始，似乎没有办法禁用此操作。

如果您真的不希望在 Workbench 中看到服务器，那么我假设您不再使用 localhost 服务器，正如您所说的那样，无论如何它都是用于测试的。如果您从您的机器上卸载服务器，那么它将不再显示在 Workbench 中。但是，鉴于两个列表项（用于服务器和连接）的占用空间很小，似乎不值得为 IMO 烦恼。

# bash - 在临时文件夹中运行脚本

> ID：11618720
> 
> 赞同：3
> 
> 时间：2012-07-23T18:58:18.903
> 
> 标签：bash, sed, awk, grep

是否可以在一个临时文件夹中运行`bash`脚本，而不是它实际所在的文件夹？

我的脚本使用了很多文件名。我担心其中一个名称可能与文件夹中的其他名称一致。我根据包含的数据命名了文件，并考虑了可重用性。

做 同样`mktemp -d`的`tempfile -d`事情吗？如果是这样，有人可以用一个例子来说明它的用法。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:23:28.860

> 是否可以在一个临时文件夹中运行 bash 脚本，而不是它实际所在的文件夹？

是的，您可以`cd`在脚本中使用来更改当前目录

> mktemp -d 和 tempfile -d 做同样的事情吗？如果是这样，有人可以用一个例子来说明它的用法。

它不考虑内容，它创建一个随机名称并确保没有这样的目录：

```
tmpdir=$(mktemp -d)
cd $tmpdir 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T19:22:09.980

您可以轻松地在正在运行的脚本中切换目录。Bash 有一个*当前工作目录*的概念，您可以随时更改它。例如：

```
dir=$(mktemp -d)

cd "$dir"
echo "Current directory changed: $PWD"

cd "$OLDPWD"
echo "Back in the old directory: $PWD" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T19:39:44.223

我`tempfile`在标准的 Linux 系统上看不到，对命令也不熟悉。

在过去，我们只是`$$`在文件和目录名称的末尾附加：

```
 mkdir "mydir.$$" 
```

但是，mktemp 用一种更安全、更安全的方法代替了它。

用法一般是：

```
 $ my_temp_dir=$(mktemp -d -tmpdir=$temp_dir -t $template) 
```

`$template`是可选的。它允许您设置名称。模板包含`XXX`程序可以用来保证唯一名称的一系列。如果不指定`$temp_dir`，一般会把目录放在`/tmp`.

该语法利用`mktemp`创建一个临时目录然后回显名称的优势。因此，您可以捕获创建的临时目录的名称。

# linux - 匹配单词的unix sed命令

> ID：11618726
> 
> 赞同：1
> 
> 时间：2012-07-23T18:58:38.880
> 
> 标签：linux, unix, sed

我正在尝试匹配一行并使用 sed 命令替换它。就像是

```
aaa = 10
 aaa =10
aaa=10 
```

我的 sed 正则表达式应该匹配所有这些模式，并且应该替换为 bbb=5 之类的内容。我试过了

```
 sed -i '/ *aaa *= */bbb=5' 
```

但这不适用于所有模式。任何帮助都会非常显着。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T19:02:13.550

```
 sed -i 's/\s*aaa\s*=\s*[0-9]*/bbb=5/' input_file 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T11:29:54.433

```
cat a | sed -e '1s/aaa =10/bbb=10/' -e '2s/ aaa =10/bbb=10/' -e '3s/aaa=10/bbb=10/' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T19:03:10.650

```
cat myfile | sed 's/\s*aaa\s*=\s*\(.*\)/bbb = \1/' 
```

\s 字符类同时匹配制表符和空格

# javascript - window.open() 在添加到主屏幕的移动 Safari 网络应用程序中不起作用

> ID：11618727
> 
> 赞同：8
> 
> 时间：2012-07-23T18:58:45.930
> 
> 标签：javascript, iphone, web-applications

这是我尝试过的所有代码：

```
select:function(event, ui) {
    window.open(ui.item.value, "_blank");
}

select:function(event, ui) {
    window.location.href = ui.item.value;
} 
```

在网络应用程序模式下，屏幕只会刷新，不会转到该位置。在 Mobile Safari 中，它按预期工作。

这是对 iPhone 上的网络应用程序的限制吗？有办法解决吗？

这是完整的代码：

```
<script>
$(document).ready(function() {
    var cct = $('input[name=csrf_token]').val();    
    var searchInput = $('input[name=search]');

    function loadEventsData(onSuccess){
      $.ajax({
        type: 'POST',
        url: '<?php echo site_url('ajax_frontend/getEventsSearch'); ?>',
        dataType: 'json',
        success: onSuccess,
        error: function(XMLHttpRequest, textStatus, errorThrown) { alert(errorThrown); }
      });
    }

    function initializeEventsAutocomplete(data){
      searchInput.addClass('loaded').autocomplete({
      source:data,
      appendTo: '.search_autocomplete',
      minLength:2,
      delay:0,
      selectFirst:false,
      open: function(event, ui) {
        $('ul.events').hide();
        $('.ui-autocomplete').removeAttr('style');
        $('.icon-search').hide();
        $('.icon-close').show();
      },
      close: function(event, ui) {
        val = searchInput.val();
        searchInput.autocomplete("search", val);
        searchInput.focus();
        return false;
      },
      select:function(event, ui) {
        window.location.href = ui.item.value;
        return false;
      }
      });
    }

    $('form').submit(function(e) {
        e.preventDefault();
        searchInput.blur();
    });

    searchInput.keyup(function(){
    if($(this).is(".loaded")) return;
    loadEventsData(initializeEventsAutocomplete);
    });

    $('.icon-close').click(function(e) {
        e.preventDefault();

        $(this).hide();
        $('.icon-search').show();
        searchInput.autocomplete('close');
        $('ul.events').show();
        searchInput.val('');
    });
});
</script> 
```

这是 JSON（其中一些）：

```
[{"value":"http:\/\/events.dev\/index.php\/event\/canada-day","label":"Canada Day"},{"value":"http:\/\/events.dev\/index.php\/event\/triathlon-festival","label":"Triathlon Festival"}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-17T14:03:43.077

以编程方式 (Javascript) 在 Mobile Safari 中打开一个链接。如果您不能使用标准 html 链接但必须使用 Javascript，则非常理想：

```
var a = document.createElement("a");
a.setAttribute('href', facebook);
a.setAttribute('target', '_blank');
a.click(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:58:13.147

我想通了。我正在使用以下代码来防止 Web 应用程序中的链接在 Safari 中打开：

[https://gist.github.com/1042026](https://gist.github.com/1042026)

这导致了一些不必要的副作用。为了解决这个问题，我添加了：

event.stopPropagation();

到我的`selection:function`地区，它应该可以正常工作。

# mysql - MySQL 中的嵌套 CASE 语句

> ID：11618730
> 
> 赞同：27
> 
> 时间：2012-07-23T18:58:55.890
> 
> 标签：mysql, case

我第一次在 SQL 语句中使用 CASE Logic。如果我删除 CASE 语句，一切正常，所以没有它 SQL 是有效的。

我需要根据几件事来计算商品的总价格。

如果“销售价格”**处于活动状态**且“选项加价”有值，则总数为：数量 *（销售价格 + 选项加价）

如果“销售价格**处于非活动状态**且“期权加价”有值，则总计为：数量 *（价格 + 期权加价）

如果“销售价格”**处于活动状态**且“选项加价”没有价值，则总计为：数量 * 销售价格

如果“销售价格**无效**且“选项加价”没有价值，则总计为：数量 * 价格

如果未添加任何选项，则**tblproduct_options.option_upcharge**的值在输出中为 NULL。

谢谢您的帮助。

布雷特

**这是我的 SQL：**

```
SELECT tblshopping_cart.session_id, tblshopping_cart.product_id, tblshopping_cart.product_qty, tblshopping_cart.product_option, tblproducts.product_title, tblproducts.product_price, tblproducts.product_sale_price_status, tblproducts.product_sale_price, tblproduct_options.option_text, tblproduct_options.option_upcharge,
CASE
WHEN (tblproducts.product_sale_price_status = 'Y')
    CASE
    WHEN (tblproduct_options.option_upcharge IS NOT NULL)
        THEN (tblshopping_cart.product_qty * (tblproducts.product_sale_price + tblproduct_options.option_upcharge)) 
        ELSE (tblshopping_cart.product_qty * tblproducts.product_sale_price)    
    END
ELSE
    CASE
    WHEN (tblproduct_options.option_upchage IS NOT NULL)
        THEN (tblshopping_cart.product_qty * (tblproducts.product_price + tblproduct_options.option_upcharge))
        ELSE (tblshopping_cart.product_qty * tblproducts.product_price)
    END
END AS product_total
FROM tblshopping_cart
INNER JOIN tblproducts ON tblshopping_cart.product_id = tblproducts.product_id
LEFT JOIN tblproduct_options ON tblshopping_cart.product_option = tblproduct_options.option_product_id
ORDER BY tblshopping_cart.product_qty ASC 
```

**它失败并显示消息：**

```
CASE
    WHEN (tblproduct_options.option_upcharge IS NOT NULL)
        THEN (tblshopping_' at line 4 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-23T19:03:26.467

`THEN`您的第一个`CASE`声明中缺少 a 。（*对不起，我不得不添加表别名*）

```
SELECT sc.session_id
    , sc.product_id
    , sc.product_qty
    , sc.product_option
    , p.product_title
    , p.product_price
    , p.product_sale_price_status
    , p.product_sale_price
    , po.option_text
    , po.option_upcharge
    , CASE
        WHEN (p.product_sale_price_status = 'Y')
        THEN <-- add this
            CASE
            WHEN (po.option_upcharge IS NOT NULL)
                THEN (sc.product_qty * (p.product_sale_price + po.option_upcharge)) 
                ELSE (sc.product_qty * p.product_sale_price)    
            END
        ELSE
            CASE
            WHEN (po.option_upchage IS NOT NULL)
                THEN (sc.product_qty * (p.product_price + po.option_upcharge))
                ELSE (sc.product_qty * p.product_price)
            END
        END AS product_total
FROM tblshopping_cart sc
INNER JOIN tblproducts p
    ON sc.product_id = p.product_id
LEFT JOIN tblproduct_options po
    ON sc.product_option = po.option_product_id
ORDER BY sc.product_qty ASC 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T19:02:24.277

看起来你`THEN`在外部失踪了`CASE`：

```
CASE
WHEN (tblproducts.product_sale_price_status = 'Y') THEN
                                                   ^^^^ add this 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T19:09:19.903

我认为您的问题是您编写案例的方式。

在第一次 when 之后你错过了 THEN。你也错过了一个END。

```
CASE
WHEN (tblproducts.product_sale_price_status = 'Y')
    THEN 
    CASE
    WHEN (tblproduct_options.option_upcharge IS NOT NULL)
        THEN (tblshopping_cart.product_qty * (tblproducts.product_sale_price + tblproduct_options.option_upcharge)) 
        ELSE (tblshopping_cart.product_qty * tblproducts.product_sale_price)    
    END
ELSE
    CASE
    WHEN (tblproduct_options.option_upchage IS NOT NULL)
        THEN (tblshopping_cart.product_qty * (tblproducts.product_price + tblproduct_options.option_upcharge))
        ELSE (tblshopping_cart.product_qty * tblproducts.product_price)
    END
END AS product_total 
```

# ruby-on-rails - 为什么我会得到“未定义的方法‘访问’”？

> ID：11618733
> 
> 赞同：0
> 
> 时间：2012-07-23T18:59:09.260
> 
> 标签：ruby-on-rails, ruby, testing, rspec, rspec-rails

我正在尝试使用 RSpec on Ruby on Rails 测试我的应用程序控制器。我没有使用 Capybara（因为很多人都使用它）。这是我的规格测试：

```
require 'spec_helper'

describe UserController do

it "create new user" do
    get :create, :user => { :email => 'foo@example.com', :name => 'userexample' }
    flash[:notice] = 'new user was successfully created.'
end
  describe "signup" do

  before { visit new_user_registration_path }

  let(:submit) { "Create my account" }

  describe "with invalid information" do
  it "should not create a user" do
    expect { click_button submit }.not_to change(User, :count)
  end
 end

describe "with valid information" do
  before do
    fill_in "Name",         :with=> "Example User"
    fill_in "Email",        :with=> "user@example.com"
    fill_in "Password",     :with=> "foobar"
    fill_in "Confirmation", :with=> "foobar"
  end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end
   end
 end
end 
```

这是我的`Usercontroller`：

```
class UserController < ApplicationController
def index

end

def new
     @user = User.new
end

def create
    @user = User.new(params[:user])
    if @user.save
        redirect_to user_session_path
    else
    redirect_to new_user_session_path
end

end

def show
    @user = User.find(params[:id])
    #redirect_to @user
end
end 
```

当我测试它时，我得到了错误`undefined method 'visit'`：：

```
Failure/Error: before { visit new_user_registration_path }
 NoMethodError:
   undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1::Nested_2:0x132cefbc0>
 # ./spec/controllers/user_controller_spec.rb:11 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:09:29.393

您必须使用 Capybara 来执行此功能。我认为您的测试不在正确的位置。你必须为此做请求规范。它不适用于控制器规格。请参阅文档：[https](https://github.com/rspec/rspec-rails/) ://github.com/rspec/rspec-rails/ 。

# javascript - Trigger.io: : 未处理的意图结果

> ID：11618734
> 
> 赞同：1
> 
> 时间：2012-07-23T18:59:22.840
> 
> 标签：javascript, trigger.io

我正在使用 Trigger.io 开发应用程序。

`file.getImage`从图库或相机（在 Android 上）使用并选择图像后，我收到此错误消息（使用 trigger.io 工具包运行应用程序）。

```
W Forge   : Unhandled intent result, should have been handled by Forge. 
```

该应用程序会立即崩溃并重新启动。

相关代码：

```
forge.file.getImage({}, function(file) {
    forge.request.ajax({
        type: 'POST',
        url: "http://example.com/upload/photo",
        files: [file],
        success: function(e) {
            console.log('success');
            console.log(JSON.stringify(e));
        },
        error: function(e) {
            console.log('failure');
            console.log(JSON.stringify(e));
        }
    }); 
```

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:51:10.167

我也在旧设备上看到了这个问题。显然，这也是 Phonegap 和 Native android 应用程序的常见问题。在这个线程上可以看到更多：

[PhoneGap 摄像头重启应用](https://stackoverflow.com/questions/8368091/phonegap-camera-restarts-the-application/9524643)

以下插件是为解决此问题的 Phonegap 开发的。如果可以为 Trigger.io 开发类似的东西，我会很棒

[http://code.google.com/p/foreground-camera-plugin/](http://code.google.com/p/foreground-camera-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:42:57.820

此问题是由于相机在较旧的 Android 设备上占用内存导致它毫不客气地关闭某些应用程序以释放更多内存。

我们正在努力为这种情况提供更优雅的处理，或者至少提供更好的调试输出来告诉您发生了什么。这种情况下的问题发生在 Android 2.3 设备上，可以通过关闭一些打开的应用程序/进程来解决。

**更新**：我们在 v1.4.41 中发布了一个新的前景摄像头模块来解决这个问题。平台版本： [http ://current-docs.trigger.io/modules/camera.html#modules-camera](http://current-docs.trigger.io/modules/camera.html#modules-camera)

# c++ - 拖动分隔条以调整两个面板的大小时，内容（或背景）仍然存在

> ID：11618735
> 
> 赞同：1
> 
> 时间：2012-07-23T18:59:24.053
> 
> 标签：c++, winapi, panel, splitter

我有一个有 3 个孩子的主窗口：（`hwndTocBox`左面板）`hwndSplitter`和`hwndCanvas`（右面板）。 `hwndTocBox`有一个 child `hwndTreeView`，它是一个 TreeView 控件。当我向右拖动`hwndSplitter`时（即想要制作`hwndTocBox`并因此`hwndTreeView`变大），and 的内容（和背景？）`hwndCanvas`将`hwndSplitter`保留一段时间。（当我将拆分器向左拖动时，完全没有问题。）

当`hwndSplitter`被拖动时，它用于`DeferWindowPos()`调整大小和移动`hwndTocBox`，`hwndSplitter`和`hwndCanvas`。当`hwndTocBox`调整大小时，`WM_SIZE`如果是它的 windows 过程，它会调整大小`hwndTreeView`（仍然使用`DeferWindowPos()`，因为它不仅调整大小，还调整`hwndTreeView`其他大小）。

我已经尝试在几个地方使用`CLIPCHILDREN`and `WS_CLIPSIBLINGS`，但它并没有解决问题。

为什么内容会保留一段时间并在稍后删除？

请告诉我如何解决这个问题。

![在此处输入图像描述](../Images/3a5b691391417a84c0614d940f54f66c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T23:35:15.643

您需要重新绘制已调整大小的窗口部分，否则您会得到这些奇怪的工件。它们看起来像涂片是有原因的，因为它们几乎就是这样。部分内容被绘制并正常显示在屏幕上。然后你调整了窗口的大小。已经画的部分没有重画，因为你没有使其无效，但是新暴露的部分必须重画，因为之前没有任何东西。

修复很简单：在调整大小代码的底部添加对[`InvalidateRect()`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145002.aspx)的调用，以确保您正在调整大小的窗口部分在下次窗口处理`WM_PAINT`消息时重新绘制。

如果您想确保`WM_PAINT`立即处理消息（导致立即重绘窗口的受影响区域），请跟进对[`UpdateWindow()`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145167.aspx)的调用。但这确实没有必要。将所有重绘推迟到一切都完成后，而不是渐进式地进行，效率要高得多。相对而言，重绘窗口是一项昂贵的操作。

# javascript - 简单的 Javascript 图像库 - 带有分页点和多个实例

> ID：11618737
> 
> 赞同：2
> 
> 时间：2012-07-23T18:59:36.903
> 
> 标签：javascript, jquery, image, gallery

我是 Javascript 的新手，但我一直在自学 CSS 和一些 php，所以我希望能学到一点。在过去的几天里，我一直在寻找我想要的东西，希望这不是一个愚蠢的问题。

我正在尝试为我的投资组合项目页面构建迷你图像画廊。我有一页大约 8 张大图——每张图用于不同的项目。我正在尝试获取它，如果您单击图像，它将加载该项目的下一个图像（任务完成！我已经用我在网上找到的代码得到了它）

但我也想要分页点（基本上是圆圈的图像），就像我在其他网站上看到的那样，代表集合中的图像。因此，如果一个项目有三个图像，您会看到三个点，然后单击第三个点会将您带到第三个图像——该点图像将替换为“选定的点”图像。说得通？

我整天都在寻找如何做到这一点的脚本和示例，这就是我的 Javascript 所获得的。这是第一个项目的脚本。与其他人一起输入相同的脚本，但更改变量。img1 变成 img2 然后 img3 等等。谁能告诉我出了什么问题？

```
<div class="project" id="proj1">

<script type="text/javascript">
var img1 = [ 
    "img/portf/tiger1.jpg", 
    "img/portf/tiger2.jpg", 
    "img/portf/tiger3.jpg" 
];
img1.current = 0;
function showImage1(i) { 
$('#imag1').fadeOut( function() { 
this.src = img1[img1.current]; 
$(this).fadeIn(); 
}); 
}

function NextImage1() { 
img1.current = (img1.current+1) % img1.length; 
showImage1(img1.current); 
}

function PreviousImage1() { 
if (--img1.current < 0) { img1.current = img1.length - 1; } 
showImage1(img1.current);
}
onload = function(){ 
showImage1(0);
};

</script>

<div class="projname">

<div class="ProjectTitle">
Tigercat Website
</div>
<div class="PaginationButtons">
<a href="javascript:showImage1(0)"><img src="img/active.gif" /></a> 
<a href="javascript:showImage1(1)"><img src="img/inactive.gif" /></a> 
<a href="javascript:showImage1(2)"><img src="img/inactive.gif" /></a>
</div>

<div class="clear"></div>

</div>
<div class="projwindow">
<a href="javascript:NextImage1()">
<img src="img/portf/tiger1.jpg" name="Tigerc" width="800" height="600" id="imag1" />
</a>

</div>
</div> 
```

您可以在这里看到我到目前为止所拥有的： [http](http://www.gmisen.com) : //www.gmisen.com 非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:58:15.767

可能不是最好的学习体验，但您可以使用 jQuery 循环插件轻松实现这一点：http: [//jquery.malsup.com/cycle/int2.html](http://jquery.malsup.com/cycle/int2.html)（查看寻呼机示例）

这是一个演示：http: [//jsfiddle.net/69LNJ/](http://jsfiddle.net/69LNJ/)

**HTML**

```
<div class="slideshow">
<img src="http://flickholdr.com/400/400/cat/bw">
<img src="http://flickholdr.com/400/400/cat/bw/1">
<img src="http://flickholdr.com/400/400/cat/bw/2">
</div>​ 
```

**JS**

```
$(function() {
    $('.slideshow').before('<div id="nav">').cycle({
        fx: 'fade',
        speed: 'fast',
        timeout: 0,
        pager: '#nav'
    });
})​; 
```

**CSS**

```
#nav{
  position: absolute;
  top: 20px;
    left: 20px;
    z-index: 1000;
}

#nav a{
  background-color: cyan;
  border-radius: 10px;
  height: 20px;
  width: 20px;
  display: block;
  text-indent: -1000px;
    float: left;
    margin-right: 10px;
}
#nav a.activeSlide{
  background-color: blue;
} 
```

​</p>

# php - 在 mysql 和 php 中处理双重用户名

> ID：11618740
> 
> 赞同：0
> 
> 时间：2012-07-23T18:59:43.730
> 
> 标签：php, pdo

我正在编写自己的 API 实现。这个 API 的资源之一是`/user`，我可以给它`POST`一个`JSON`字符串，解析它并将它发送给一个`UserService`有`addUser`方法的。现在显然我不能允许两个用户拥有相同的用户名。这是我到目前为止所要做的。

```
protected function handlePost() {
    $user = json_decode($this->getRequest()->getRequestData(), true);

    try {
        $createdUserId = $this->userService->addUser(
            $user['username'],
            $user['password'],
            $user['typeId'],
            $user['companyId']
        );
    } catch (PDOException $e) {
        $this->getResponse()->setStatus(102);
    }

    if ($createdUserId)
        $this->getResponse()->setStatus(101);

    $this->getResponse()->sendResponse();
} 
```

该函数在 HTTP 请求被解析后调用。如您所见，我将`$user`对象放在关联数组中。然后我将这些值用作该`$this->userService->addUser`方法的参数。

这是`addUser()`方法：

```
public function addUser($username, $password, $type, $companyId) {
    $sth = $this->dbh->prepare('INSERT INTO app_user
                                (username, password, typeId, companyId)
                                VALUES (?, ?, ?, ?)');
    $userAdded = $sth->execute(array($username, md5($password), $type, $companyId));

    return ($userAdded)
        ? $this->dbh->lastInsertId()
        : null;
} 
```

现在，如果由于`$sth->execute`某种原因失败，我返回 null （并且不会返回状态代码 101 或 102，我知道这一点）。但是如果用户名已经存在，PDO 会抛出一个异常，我在`handlePost()`上面的方法中捕获了这个异常。

我的问题当然是已经使用的用户名并不例外，不应该这样处理，但我真的不知道应该如何处理？

我必须能够区分触发的唯一约束和触发的其他一些（可能是并发问题），以便我可以将适当的状态代码发送回 API 的使用者。

一个明显的解决方案是检查用户名是否存在于单独的查询中，但出于显而易见的原因，我更愿意限制对数据库的调用。

我怎样才能优雅地解决这个问题？如果我必须使用异常，是否有特定 PDO 异常的列表，这样我就不必使用泛型`PDOException`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:05:09.353

您是否足够关心性能（即最小化对数据库的查询），以至于在尝试插入之前您不会只检查数据库中用户名的存在吗？您可能会发现这个逻辑比尝试捕获异常并根据最后一个查询或类似查询影响的行数确定是否确实存在异常更容易。

我还要补充一点，如果你想让它不是一个例外，你可以在插入中添加 ON DUPLICATE KEY 逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:05:38.793

如果您未在 PDO 构造函数中使用 ERRMODE_EXCEPTION，则 PDO 不应发送违反完整性约束的异常。

在这种情况下，您必须调用方法 PDOStatement::errorCode() 或 PDOStatement::errorInfo()

获取错误的详细信息并查看它是违反完整性约束还是真正的问题。

# html - 如何确定选择了哪个单选按钮

> ID：11618745
> 
> 赞同：0
> 
> 时间：2012-07-23T19:00:04.160
> 
> 标签：html, button, iframe, radio

我有一个程序，我在标签中显示地图。到目前为止，我已经设置了两个单选按钮，但我不确定语法将如何确定选择哪一个。如果我将值设置为我想去的链接会是什么样子？

有什么类似的吗？

`<iframe src=radiobutton1.isChecked width="1200" height="750"></iframe>`

# javascript - window.openDatabase 抛出 TypeError: Object[object DOMWindow] has no method 'openDatabase' on Android

> ID：11618747
> 
> 赞同：3
> 
> 时间：2012-07-23T19:00:20.960
> 
> 标签：javascript, android, sencha-touch-2, opendatabase

我正在使用 Sencha Touch 2.0.1 并尝试使用以下方法打开 SQLite 数据库：

```
var db = window.openDatabase("mydatabase", "1.0", "mydatabase", 2000000); 
```

在 iPhone/IOS 模拟器上，这是可行的。在 Android 设备或模拟器上出现异常：

```
TypeError: Object[object DOMWindow] has no method 'openDatabase' 
```

我正在使用 Sencha 构建原生应用程序（尽管我正在迅速失去信心......）所以我没有使用 PhoneGap。

Sencha 的包装创建和 AndroidManifest.xml 文件，但我看不到为

```
android.permission.WRITE_EXTERNAL_STORAGE 
```

我不确定这是否是问题所在！

非常感谢任何帮助，因为这让我悄悄发疯。

编辑：这是 JS - 它是 Sencha Touch 生成的应用程序的一部分：

```
Ext.application({
name: 'MyApp',

requires: [
    'Ext.MessageBox'
],

views: ['Main'],

icon: {
    '57': 'resources/icons/Icon.png',
    '72': 'resources/icons/Icon~ipad.png',
    '114': 'resources/icons/Icon@2x.png',
    '144': 'resources/icons/Icon~ipad@2x.png'
},

isIconPrecomposed: true,

startupImage: {
    '320x460': 'resources/startup/320x460.jpg',
    '640x920': 'resources/startup/640x920.png',
    '768x1004': 'resources/startup/768x1004.png',
    '748x1024': 'resources/startup/748x1024.png',
    '1536x2008': 'resources/startup/1536x2008.png',
    '1496x2048': 'resources/startup/1496x2048.png'
},

launch: function() {
    // Destroy the #appLoadingIndicator element
    Ext.fly('appLoadingIndicator').destroy();

    // Initialize the main view
    Ext.Viewport.add(Ext.create('MyApp.view.Main'));
    //

    try {

        var db = window.openDatabase("mydatabase", "1.0", "mydatabase", 2000000);

        if ( !db ) {
            var m3 = new Ext.MessageBox(); 
            m3.alert("db test!", "openDatabase failed!");

        } else {
           var m3 = new Ext.MessageBox(); 
           m3.alert("db test!", "openDatabase ok!");
        }
    }
    catch(err){

        var m2 = new Ext.MessageBox(); 
        m2.alert("db test!", "exception caught: " + err.name + ":" + err.message);

    }

} 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:31:25.880

看起来它在您的环境中不可用。这是一个简单的检查方法：

```
if (window.openDatabase) {
    // available
} else {
    // not available
} 
```

> 脱机 SQL 目前可用于 Safari、Google Chrome、iPhone 和 Palm 的 WebOS（用于其应用程序和基于浏览器的内容）。

[http://creativepark.net/1191](http://creativepark.net/1191)

# android - 如何将我的 Activity 绑定到我当前在 Android 中运行的服务？

> ID：11618751
> 
> 赞同：3
> 
> 时间：2012-07-23T19:00:33.957
> 
> 标签：android, binding, android-service

我有一个活动，我想用它来显示从我的服务发送的数据。每次服务向活动发送消息时，活动都会更新文本视图。用户能够使用活动中的按钮启动和停止服务（服务由用户明确启动/停止）。目前，我的活动绑定到 onResume() 中的服务并在 onDestroy() 中取消绑定，这似乎目前正在工作。

当我启动服务，按下后退按钮，然后尝试再次关注活动时，就会出现问题。我遇到了一个新的活动，该活动没有被服务更新，但似乎能够向服务发送消息（我从我的处理程序中的日志中注意到了这一点[男孩，这句话让我发笑！]）。理想情况下，我只希望我的活动的一个实例存在并保持绑定到服务，但我绝对不希望看到一个活动跟不上更新。我已经更新了我的清单`<activity android:launchMode="singleTop">`，但我不确定这对这件事有多大帮助。我可以做些什么来确保我的活动在以后恢复时重新绑定到服务的现有实例？（我想通过消息传递来实现这一点，我不想为此实现数据库或使用 sharedprefereces）。我在下面包含了我的代码-我对服务比较陌生，所以请放轻松。干杯。

可选额外：我的目标是从 startService() 连续运行的服务，并且重新调整活动的焦点是可选的，但会立即显示来自服务的最新信息。我相信我正在寻找的是前台服务。这不是问题的一部分，但如果您认为您的回答可能会阻止我实现这一目标，请告诉我。

MainActivity.java：

```
public class MainActivity extends Activity 
{
    private static final String debug = "MainActivity";
    private boolean bound = false;
    TextView mTextView;
    protected Messenger outMessenger;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Log.i(debug, "onCreate called");
        mTextView = (TextView) findViewById(R.id.textView1);

        Button bind = (Button) findViewById(R.id.bind);
        Button unbind = (Button) findViewById(R.id.unbind);

        bind.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v) 
            {
                Message message = new Message();
                Bundle bundle = new Bundle();
                bundle.putString("ACTION", "START");
                message.setData(bundle);
                try
                {
                    outMessenger.send(message);
                } catch (RemoteException e)
                {
                    Log.d(debug, "She can't reach the service captain!");
                }
            }
        });

        unbind.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v) 
            {
                Message message = new Message();
                Bundle bundle = new Bundle();
                bundle.putString("ACTION", "STOP");
                message.setData(bundle);
                try
                {
                    outMessenger.send(message);
                } catch (RemoteException e)
                {
                    Log.d(debug, "She can't reach the service captain!");
                }
            }
        });
    }

    @Override 
    public void onPause()
    {
        super.onPause();
    }

    @Override
    public void onResume()
    {
        super.onResume();
        doBindService();
    }

    public void onDestroy()
    {
        super.onDestroy();
        Log.i(debug, "onDestroy Called");
        doUnbindService();
    }

    private void doBindService()
    {
        Log.i(debug, "Attempting to bind");
        bound = true;
        Intent i = new Intent(this, MyService.class);
        i.putExtra("MESSENGER", new Messenger(mHandler));
        bindService(i, mConnection, Context.BIND_AUTO_CREATE);
    }

    private void doUnbindService()
    {
        Log.i(debug, "Attempting to unbind");
        if (bound)
        {
            bound = false;
            unbindService(mConnection);
        }
    }

    private Handler mHandler = new Handler()
    {
        public void handleMessage(Message message)
        {
            Log.d(debug, "Got a message!");
            Bundle data = message.getData();
            if (data != null)
            {
                Log.i(debug, "This data ain't null!");
                if (data.containsKey("MESSAGE"))
                {
                    mTextView.setText(data.getString("MESSAGE"));
                }
            }
        }
    };

    private ServiceConnection mConnection = new ServiceConnection() 
    {
        public void onServiceConnected(ComponentName className, IBinder binder) 
        {
            Log.i(debug, "Service connected!");
            outMessenger = new Messenger(binder);
        }

        @Override
        public void onServiceDisconnected(ComponentName className) 
        {
            Log.d(debug, "Service Disconnected!");
        }
    };
} 
```

我的服务.java

```
public class MyService extends Service
{
    private static final String debug = "MyService";
    private Messenger inMessenger = new Messenger(new IncomingHandler());
    Messenger outMessenger;
    private boolean bound = false;
    int secret = 0;

    @Override
    public void onCreate()
    {
        Log.d(debug , "MyService Created");
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) 
    {
        Log.d(debug , "onStartCommand called");
        handleCommand(intent);
        return START_STICKY;
    }

    Handler handler = new Handler();
    public boolean running;
    void handleCommand(Intent i)
    {
        Runnable r = new Runnable()
        {
            public void run()
            {
                updateResultsInUi();
                if (running)
                {
                    handler.postDelayed(this, 500);
                }
            }
        };
        r.run();
    }

    void updateResultsInUi()
    {
        Bundle bundle = new Bundle();
        bundle.putString("MESSAGE", 
                Integer.toString(secret = ++secret % 10));
        Message message = new Message();
        message.setData(bundle);

        if (bound)
        {
            try
            {
                outMessenger.send(message);
            } 
            catch (RemoteException e)
            {
                Log.d(debug, "Messaging failed");
            }
        } 
        else 
        {
            Log.d(debug, "Not connected, so not messaging!");
        }

    }

    @Override
    public IBinder onBind(Intent intent)
    {
        Log.i(debug, "Bound");
        bound = true;
        Bundle extras = intent.getExtras();
        outMessenger = (Messenger) extras.get("MESSENGER");
        return inMessenger.getBinder();
    }

    @Override
    public void onRebind(Intent i)
    {
        bound = true;
        Bundle extras = i.getExtras();
        outMessenger = (Messenger) extras.get("MESSENGER");
    }

    @Override
    public boolean onUnbind(Intent i)
    {
        Log.d(debug, "onUnbind() called.");
        bound = false;
        outMessenger = null;
        return true;
    }

    class IncomingHandler extends Handler 
    {
        @Override
        public void handleMessage(Message msg) 
        {
            Log.d(debug, "Got message");
            Bundle data = msg.getData();
            if (data.containsKey("ACTION"))
            {
                if ("START".equals(data.getString("ACTION")))
                {
                    if (!running)
                    {
                        running = true;
                        Intent i = new Intent(getApplicationContext(), MyService.class);
                        startService(i);
                    } 
                    else 
                    {
                        Log.d(debug, "We're already up and running!");
                    }
                } 
                else if ("STOP".equals(data.getString("ACTION")))
                {
                    running = false;
                    Intent i = new Intent(getApplicationContext(), MyService.class);
                    stopService(i);
                }
            }
        }
    }
} 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tests.servicetest"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.tests.servicetest.MainActivity"
            android:label="@string/title_activity_main" 
            android:launchMode="singleTop" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service
            android:name="com.tests.servicetest.MyService"
            android:process=":inaneService">
        </service>
    </application>
</manifest> 
```

对于那些想要运行它的人，activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

    <Button
        android:id="@+id/bind"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/textView1"
        android:text="Start" />

    <Button
        android:id="@+id/unbind"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/bind"
        android:text="Stop" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T19:29:17.513

你可能想看看这个：[https ://github.com/JonasGroeger/GPSService](https://github.com/JonasGroeger/GPSService)

# android - 无法在 Jelly Bean 中使用 systrace

> ID：11618755
> 
> 赞同：11
> 
> 时间：2012-07-23T19:01:04.050
> 
> 标签：android, debugging, android-4.2-jelly-bean

我尝试使用 jelly bean 发布的新 systrace，但没有运气。

我在 I/O 会话等开发设置中启用了图形和视图跟踪，并尝试调用 systrace，我得到的只是这个。

```
$ ./systrace.py               
error opening /sys/kernel/debug/tracing/options/overwrite: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/sched/sched_switch/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/sched/sched_wakeup/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/power/cpu_frequency/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/power/cpu_idle/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/buffer_size_kb: No such file or directory (2)
error opening /sys/kernel/debug/tracing/trace_clock: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/workqueue/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/ext4/ext4_sync_file_enter/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/ext4/ext4_sync_file_exit/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/block/block_rq_issue/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/block/block_rq_complete/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/tracing_on: No such file or directory (2)
error: unable to start trace
error opening /sys/kernel/debug/tracing/tracing_on: No such file or directory (2)
error opening /sys/kernel/debug/tracing/options/overwrite: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/sched/sched_switch/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/sched/sched_wakeup/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/power/cpu_frequency/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/trace_clock: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/workqueue/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/ext4/ext4_sync_file_enter/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/ext4/ext4_sync_file_exit/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/block/block_rq_issue/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/block/block_rq_complete/enable: No such file or directory (2)
unable to start tracing
error opening /sys/kernel/debug/tracing/buffer_size_kb: No such file or directory (2)
An error occured while capturing the trace.  Output file was not written. 
```

我已经在我的 Desire Hd (ace) 上尝试了模拟器和自定义固件。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:58:08.973

尝试以下命令：

adb root（不确定是否有必要），adb shell mount -t debugfs nodev /sys/kernel/debug

在这些命令下，脚本应该可以正确运行，尽管对我来说 html 文件只包含每个 CPU 的行，而不是单个组件，例如表面抛掷器，在谷歌 IO 谈话视频中可见。

# haskell - 如何在 Yesod 中捕获异常而不杀死站点？

> ID：11618760
> 
> 赞同：4
> 
> 时间：2012-07-23T19:01:34.587
> 
> 标签：haskell, exception-handling, yesod

我是 Yesod 和 Haskell 的新手，所以请耐心等待，但我有一个程序可以接受文件，计算单词并在新的 Yesod 网页上显示结果。我需要一种更优雅地捕获异常的方法。例如，如果它在隐藏文件上运行以下函数：

```
wordCount :: String -> String -> String

wordCount ('.' : _) _   = error "Cannot count hidden files."
wordCount name contents = "<p>There are <b>" ++ show (length $ words contents) ++ "</b> words in your file <i>" ++ name ++ "</i>.</p>" 
```

我想显示该错误消息，然后显示表单以供用户提交新文件。现在它只是转到一个页面，上面写着“页面加载时与服务器的连接已重置”。

我认为 Yesod 有自己的一组 catch 函数，我可能不得不隐藏它来编写自己的函数，但我不确定它们会在哪里，而且我在任何文档中都找不到对它们的任何引用。如果用户输入了错误的文件，我不希望网站崩溃。

任何帮助将非常感激。

编辑：感谢您的建议。我意识到以这种方式抛出错误并不是处理错误的最佳方法，但问题实际上是我正在使用通常从终端而不是 Yesod 站点运行的现有 Haskell 代码。我用wordcount作为一个小例子，但实际上它是几十个文件，几十个函数和分散的错误抛出。希望我可以捕获这些，而不必完全修改现有代码中的每个函数。如果有人对如何在 Yesod 中捕获异常有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:58:30.337

正如 dflemstr 所说，不要`error`用于这样的可恢复错误。错误机制类似于`undefined`-- 它代表一个完全灾难性的错误，例如尚未编写的函数或无限循环。对于您希望*永远不会*遇到坏情况的部分函数来说这很好，但对于预期和必须处理的错误并不是最佳选择。此外，类型系统不反映您对 的使用`error`，因此您的函数的使用者无法知道捕获错误。

相反，您应该使用类似`Maybe`或`Either`表示这样的错误的类型。例如，你可以这样重写这个函数：

```
wordCount :: String -> String -> Maybe String
wordCount ('.' : _) _   = Nothing
wordCount name contents = Just $ "<p>There are <b>" ++ show (length $ words contents) ++ "</b> words in your file <i>" ++ name ++ "</i>.</p>" 
```

现在，不是返回 a `String`，而是返回 a `Maybe String`。这是一个可以通过`Nothing`或的类型`Just String`。`Nothing`代表失败——即函数由于输入无效而失败。`Just`代表成功。

接下来，要“捕获”错误，您可以只进行模式匹配：

```
case wordCount fileName contents of
  Just res -> res
  Nothing  -> "Cannot count hidden files!" 
```

[Data.Maybe](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Maybe.html)中还有一些便利功能，可以让您的代码在常见情况下更整洁。

另一种选择是`Either`类型。在一个`Maybe`类型中，`Nothing`构造函数不携带任何附加信息。您所知道的是该功能失败。`Either`行为方式相同，除了“失败”案例*确实*携带任意附加信息。调用“失败”情况，调用`Left`“成功”情况`Right`。该类型还有两个参数：错误信息的类型和结果的类型。它看起来像这样：

```
wordCount :: String -> String -> Either String String
wordCount ('.' : _) _   = Left "You cannot count a hidden file!"
wordCount name contents = Right $ "<p>There are <b>" ++ show (length $ words contents) ++ "</b> words in your file <i>" ++ name ++ "</i>.</p>" 
```

然后您可以像处理结果一样处理结果`Maybe`。在这种情况下，我认为 a`Maybe`更可取，因为该功能只有一种方式失败。如果有一堆可能的错误情况，那`Either`将是一个更好的选择。

# php - ACL 排序和评估。什么应该优先 帐户或组、aco 或父 aco

> ID：11618761
> 
> 赞同：0
> 
> 时间：2012-07-23T19:01:44.673
> 
> 标签：php, .net, tree, acl

我正在关注这篇[蛋糕 php acl 模型](http://bakery.cakephp.org/articles/theshz/2006/11/28/user-permissions-and-cakephp-acl)文章来创建我自己的 acl 实现。

我已经理解了 ACO ARO 和 ACO_ARO 的概念。我想实现 Check 方法，该方法将决定 aro 是否可以访问 aco。由于有 ARO 树和 ACO 树，我如何计算 aco 到 a ro 的最有效权限。

我还发现了下面的文章，它实现了检查方法，但那是在 php [acl 实现中](http://bakery.cakephp.org/articles/unigue_/2008/03/12/toniacl-component-tutorial)

简而言之，应该优先考虑什么帐户或组、aco 或父aco。

类似这篇[文章的东西](http://docs.alfresco.com/4.0/index.jsp?topic=/com.alfresco.enterprise.doc/concepts/secur-acl.html)

更新到现在我已经到了这里

我制作了一个 accessControlEntry 类，如下所示

```
public class AccessControlEntry
{
    public BsonObjectId AccessControlEntryId { get; set; }
    public BsonObjectId AccessRequestObjectId { get; set; }
    public BsonObjectId AccessControlObjectId { get; set; }
    public bool CanView { get; set; }
    public bool CanEdit { get; set; }
    public bool CanDelete { get; set; }
    public bool CanAdministrate { get; set; }
}

        public bool Check(Usercontext usercontext, BsonObjectId acoId, string permission)
    {
        //aco id is accessControlObjectId like in cakephp acl
        Account acc = _usercontextService.GetAccountByUserContext(usercontext);

        //getting ACE  eg X account has CanRead=true on Y object
        AccessControlEntry entry = _accessControlEntryRepository.GetAccessControlEntry(acc.AccountId, acoId);
        if (entry != null)
        {
            bool value = (bool)entry.GetType().GetProperty(permission).GetValue(entry, null);
            return value;
        }

        //account entry not found ...search in groups
        bool groupEntryFound = false;
        bool effectiveValue = false;
        Group[] groups = _usercontextService.GetGroupsForAccount(acc.AccountId);
        foreach (Group group in groups)
        {
            AccessControlEntry entryGroup = _accessControlEntryRepository.GetAccessControlEntry(group.GroupId, acoId);
            if (entryGroup != null)
            {
                groupEntryFound = true;
                effectiveValue |= (bool)entryGroup.GetType().GetProperty(permission).GetValue(entryGroup, null);
            }
        }

        //ACE found in group ..return most privilged value
        if (groupEntryFound)
            return effectiveValue;

        //entry not found for account nor for group..return false
        return false;
    } 
```

我像这样从其他服务调用检查方法

```
Check(context,44556,"CanRead") 
```

check 方法查找帐户的 AccessControlEntry，如果没有找到帐户的任何条目，则查找组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:07:15.923

在实施内容管理系统/文档管理系统模型时，我在 .Net 中遇到了同样的问题。

我发现，在最简单的形式中，实际上有 2 棵树，并且基于继承的权限进行动态“有效权限”计算对您的应用程序而言在可扩展性方面是不健康的，但这并不意味着它是不可能的。

这意味着您基本上可以根据当前节点计算有效权限，只是为了简化模型。

例如：（让我们使用“页面”作为节点）

在复杂模型中，要确定用户在第 4 页上的权限，您将有效地获取分配给第 1、3 和 4 页的所有权限，然后进行“加法合并”。

在简化模型中，我们只考虑为第 4 页的用户添加的权限

```
 Page 1
      Page 2 
      Page 3
        Page 4 
```

为了使我的问题尽可能简单，从而尽可能避免错误，我决定选择一个模型，其中只能将角色/组与相关的 acl 条目添加到树节点。

这意味着要弄清楚我想要的权限，我会有效地运行类似的查询（只有你的实现可能会有所不同的伪代码）：

```
var allAcls = "Select all ACL where PageId in (pagesToThisPoint) and Role in (userRoles)" 
var resultAcl = new aclEntry();

allAcls.Each(acl => {
  resultAcl.Delete = (acl.Delete > resultAcl.Delete ? acl.Delete : resultAcl.Delete);
  resultAcl.Update = (acl.Update > resultAcl.Update ? acl.Update : resultAcl.Update);
  resultAcl.Read = (acl.Read > resultAcl.Read ? acl.Read : resultAcl.Read);
         ....
}); 
```

这留下了另外一个考虑因素，拒绝规则，其中规则是拒绝规则，典型的约定是它覆盖允许规则。

所以再次回到循环并评估拒绝：

```
allAcls.Each(acl => {
  resultAcl.Delete = (acl.Delete == deny ? resultAcl.Delete == deny);
  resultAcl.Update = (acl.Update == deny ? resultAcl.Update == deny);
  resultAcl.Read = (acl.Read == deny ? resultAcl.Read == deny);
         ....
}); 
```

因此，您基本上是在说获取用户和页面的所有角色，其中页面具有任何这些角色的 acl 条目，将其添加到结果权限，然后删除定义显式拒绝的任何权限。

如果您想重新运行用户特定权限的过程，我确信可以进一步扩展，匹配适用于当前用户的当前页面的所有权限并覆盖基于角色的集。

作为一般的经验法则，我倾向于遵循这样的逻辑，即规则越具体，它就越相关。

所以你可能会说... 所有经理都可以访问整个网站 经理被拒绝访问网站的管理部分 所有销售人员都可以访问销售部分 所有营销人员都可以访问营销 营销用户“鲍勃”可以访问销售人员

上面的逻辑将涵盖所有这些并有效地应用以下访问权限：用户获得其部门的部分权限（销售用户 = 销售等）经理获得额外的权限并访问所有区域接受管理员（可能只是 IT 人员？） Bob 是我们是例外，尽管他从事营销工作，但我们授予他销售权。

这意味着： 1\. 可以将用户添加到角色 2\. 可以将页面添加到角色，然后赋予相关角色“acl”权限 这意味着我可以这样说：如果用户是销售角色，请授予他们“读取，更新” 3\. 根据定义，页面本身不是“角色”，而只是知道授予角色的访问权限 4\. 扩展此模型意味着您可以为特定用户指定 acl 条目 5\. 用户 acl 条目覆盖角色 acl 条目 6\. 所考虑的 Acl 条目适用于到目前为止的整个树 7\. 拒绝规则覆盖允许规则

那么，如果父页面显示“销售用户被完全拒绝访问”，然后我们所在的页面显示“当前用户 bob 具有完全访问权限”，会发生什么？

这是基于开发人员/企业对如何处理这种情况做出的选择......

我的想法是：用户在范围内比角色更本地拒绝规则适用于父级，而允许规则适用于我将采用允许规则的页面。

但是，如果 Parent 规则是针对用户的，而角色的 Page 规则是针对当前页面的，我会使用相同的逻辑为角色采用规则。

这些 ACL 的大部分内容都是主观的，我倾向于依赖人们习惯的东西，例如：Windows 中的文件系统权限，这样应用程序就会以用户认为“规范”的方式运行，这会让你保持从将来得到20个问题。

反正大多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T20:11:56.877

看到这个网址这是 cakephp 2.0:-

```
http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html

http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/part-two.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:44:39.660

[我从PHPGacl](http://phpgacl.sourceforge.net/)学到了很多东西。现在有点旧项目，但这些概念在今天仍然完全有效。

他们的[手册](http://phpgacl.sourceforge.net/manual.pdf)帮助我了解了从基础到更复杂问题的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T21:55:29.983

鉴于上述信息，我们可以编写一些简单的工具，就我而言，我正在使用内容管理系统，因此我的 ACL 是关于页面访问的。

首先，我定义了我的 ACL 条目的外观......

```
using System;
namespace Core.Objects.CMS
{
    /// <summary>
    /// Represents a record on an access control list
    /// </summary>
    public class PageACLEntry
    {
        /// <summary>
        /// Gets or sets the access control entry id.
        /// </summary>
        /// <value>
        /// The access control entry id.
        /// </value>
        public int PageACLEntryId { get; set; }
        /// <summary>
        /// Gets or sets the page id.
        /// </summary>
        /// <value>
        /// The page id.
        /// </value>
        public int PageId { get; set; }
        /// <summary>
        /// Gets or sets the name of the role.
        /// </summary>
        /// <value>
        /// The name of the role.
        /// </value>
        public string RoleName { get; set; }
        /// <summary>
        /// Gets or sets the read.
        /// </summary>
        /// <value>
        /// The read.
        /// </value>
        public bool? Read { get; set; }
        /// <summary>
        /// Gets or sets the content of the update.
        /// </summary>
        /// <value>
        /// The content of the update.
        /// </value>
        public bool? UpdateContent { get; set; }
        /// <summary>
        /// Gets or sets the update meta.
        /// </summary>
        /// <value>
        /// The update meta.
        /// </value>
        public bool? UpdateMeta { get; set; }
        /// <summary>
        /// Gets or sets the delete.
        /// </summary>
        /// <value>
        /// The delete.
        /// </value>
        public bool? Delete { get; set; }
        /// <summary>
        /// Gets or sets the full control.
        /// </summary>
        /// <value>
        /// The full control.
        /// </value>
        public bool? FullControl { get; set; }
    }
} 
```

然后我创建一个帮助类来处理评估......

```
using System.Collections.Generic;
using System.Security.Principal;
using Core.Objects.CMS;

namespace Core.Utilities
{
    /// <summary>
    /// Tools for permission calculation
    /// </summary>
    public static class PermissionHelper
    {
        /// <summary>
        /// Calculates the page permissions the given user has on the given page.
        /// </summary>
        /// <param name="page">The page.</param>
        /// <param name="user">The user.</param>
        /// <returns>the effective permissions</returns>
        private static PageACLEntry CalculatePagePermissions(Page page, IPrincipal user)
        {
            PageACLEntry result = new PageACLEntry();
            // start with acl for the current page
            List<PageACLEntry> acl = new List<PageACLEntry>(page.AclRules);
            // append all the way up the tree until parent == null
            acl = AppendTreePermissions(acl, page, user);
            // reverse the list so we evaluate root first then work up to here
            acl.Reverse();
            // because of the order in which these are applied the most local rules overrule the less local
            // the wider the scope the less it applies
            acl.ForEach(ace => 
            {
                // only apply rules that apply to roles that our current user is in
                if (user.IsInRole(ace.RoleName))
                {
                    result.Read = Eval(result.Read, ace.Read);
                    result.Delete = Eval(result.Delete, ace.Delete);
                    result.UpdateMeta = Eval(result.UpdateMeta, ace.UpdateMeta);
                    result.UpdateContent = Eval(result.UpdateContent, ace.UpdateContent);
                    result.FullControl = Eval(result.FullControl, ace.FullControl);
                }
            });

            return result;
        }

        /// <summary>
        /// Evaluates the specified permission level.
        /// </summary>
        /// <param name="target">The target.</param>
        /// <param name="suggestion">The suggestion.</param>
        /// <returns>evaluation result</returns>
        private static bool? Eval(bool? target, bool? suggestion)
        {
            bool? result = null; 
            switch (target)
            { 
                case false:
                    result = false;
                    break;
                case true:
                    result = true;
                    break;
                case null:
                    break;
            }

            return result;
        }

        /// <summary>
        /// Appends the tree acl from the tree root up to this point.
        /// </summary>
        /// <param name="acl">The acl.</param>
        /// <param name="page">The page.</param>
        /// <param name="user">The user.</param>
        /// <returns>the complete acl</returns>
        private static List<PageACLEntry> AppendTreePermissions(List<PageACLEntry> acl, Page page, IPrincipal user)
        {
            Page currentPage = page.Parent;
            while (currentPage != null)
            {
                acl.AddRange(currentPage.AclRules);
                currentPage = page.Parent;
            }

            return acl;
        }

        /// <summary>
        /// Determines if the current User can read the given page.
        /// Unless an explicit deny rule is in place the default is to make everything read only.
        /// </summary>
        /// <param name="page">The page.</param>
        /// <param name="user">The user.</param>
        /// <returns>
        /// access right indication as bool
        /// </returns>
        public static bool UserCanRead(Page page, IPrincipal user)
        {
            PageACLEntry permissions = CalculatePagePermissions(page, user);
            if (permissions.Read != false)
            {
                return true;
            }

            return false;
        }
        /// <summary>
        /// Determines if the current User can delete the given page.
        /// </summary>
        /// <param name="page">The page.</param>
        /// <param name="user">The user.</param>
        /// <returns>
        /// access right indication as bool
        /// </returns>
        public static bool UserCanDelete(Page page, IPrincipal user)
        {
            PageACLEntry permissions = CalculatePagePermissions(page, user);

            if (permissions.FullControl == true || permissions.Delete == true)
            {
                return true;
            }

            return false;
        }
        /// <summary>
        /// Determines if the current User can update the given page.
        /// </summary>
        /// <param name="page">The page.</param>
        /// <param name="user">The user.</param>
        /// <returns>
        /// access right indication as bool
        /// </returns>
        public static bool UserCanUpdate(Page page, IPrincipal user)
        {
            PageACLEntry permissions = CalculatePagePermissions(page, user);

            if (permissions.FullControl == true || permissions.UpdateMeta == true)
            {
                return true;
            }

            return false;
        }
        public static bool UserCanUpdateContent(Page page, IPrincipal user)
        {
            PageACLEntry permissions = CalculatePagePermissions(page, user);

            if (permissions.FullControl == true || permissions.UpdateContent == true)
            {
                return true;
            }

            return false;
        }
        /// <summary>
        /// Determines if the current User can append children to the given page.
        /// </summary>
        /// <param name="page">The page.</param>
        /// <param name="user">The user.</param>
        /// <returns>
        /// access right indication as bool
        /// </returns>
        public static bool UserCanAddChildTo(Page page, IPrincipal user)
        {
            PageACLEntry permissions = CalculatePagePermissions(page, user);

            if (permissions.FullControl == true || permissions.UpdateMeta == true)
            {
                return true;
            }

            return false;
        }
    }
} 
```

现在，这给了我所有的控制权，我只需传递一个页面和一个 IPrincipal 对象，然后我会返回一个表示访问级别的 ACLEntry。

我决定通过将 Calculation 方法设为私有并且仅将 CanX 方法设为公开来进一步抽象出我的安全实现。

所以现在它很简单

```
bool result = PermissionsHelper.UserCanRead(page, user); 
```

看起来有很多代码，但是如果您取出格式和注释（以满足编码标准），实际上代码很少，如果您将其复制到 Visual Studio 中的类文件中，实际上很容易遵循和维持。

您可能还注意到，我没有一次传入存储库或服务类来获取数据，那是因为我使用它来构建使用代码优先 EF 建模编写的对象，并且我正在使用延迟加载，因此您的实现可能需要比 page.parent.AClEntries 多一点去爬树。

哦，以防万一你需要它，这是我的页面类......

```
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;

namespace Core.Objects.CMS
{
    /// <summary>
    /// Represents a managed CMS page
    /// </summary>
    [Table("Pages")]
    public class Page
    {
        /// <summary>
        /// Gets or sets the page id.
        /// </summary>
        /// <value>
        /// The page id.
        /// </value>
        public int PageId { get; set; }
        /// <summary>
        /// Gets or sets the version.
        /// </summary>
        /// <value>
        /// The version.
        /// </value>
        public int Version { get; set; }
        /// <summary>
        /// Gets or sets the title.
        /// </summary>
        /// <value>
        /// The title.
        /// </value>
        public string Title { get; set; }
        /// <summary>
        /// Gets or sets the template.
        /// </summary>
        /// <value>
        /// The template.
        /// </value>
        public string Template { get; set; }
        /// <summary>
        /// Gets or sets the path.
        /// </summary>
        /// <value>
        /// The path.
        /// </value>
        public string Path { get; set; }
        /// <summary>
        /// Gets or sets the parent.
        /// </summary>
        /// <value>
        /// The parent.
        /// </value>
        public virtual Page Parent { get; set; }
        /// <summary>
        /// Gets or sets the children.
        /// </summary>
        /// <value>
        /// The children.
        /// </value>
        public virtual List<Page> Children { get; set; }
        /// <summary>
        /// Gets or sets the content.
        /// </summary>
        /// <value>
        /// The content.
        /// </value>
        public virtual List<PageContent> Content { get; set; }
        /// <summary>
        /// Gets or sets the component stacks.
        /// </summary>
        /// <value>
        /// The component stacks.
        /// </value>
        public virtual List<Stack> ComponentStacks { get; set; }
        /// <summary>
        /// Gets or sets the acl rules.
        /// </summary>
        /// <value>
        /// The acl rules.
        /// </value>
        public virtual List<PageACLEntry> AclRules { get; set; }
    }
} 
```

非常简单的 poco ... 使用 EF 的强大功能来完成我所有的按需 SQL 爬取。不利的一面……我怀疑如果您的页面深深嵌套在树中，它会特别有效。

我仍然对改进这一点的建议持开放态度，但这感觉是当时实施可管理解决方案的最干净的方式。现在我完全了解了我可以寻求提高效率的问题。

但至少你有一个参考点吧:)

# magento - Magento | 如何按类别 ID 对产品集合进行排序？

> ID：11618762
> 
> 赞同：0
> 
> 时间：2012-07-23T19:01:47.123
> 
> 标签：magento

> **可能重复：**
> [我无法按类别 ID 对产品集合进行排序](https://stackoverflow.com/questions/11618844/i-cant-sort-product-collection-by-category-id)

我有几个类别：男士、女士、男士、女士和优惠。

每个产品都分配给男士、女士、男士或女士类别。

有些产品被分配到“优惠”类别。

我需要检索每个“优惠”产品，但按其他类别排序，我的意思是：

优惠 -> 男士产品 -> 女士产品 -> 男士产品 -> 女士产品

现在我正在让产品按“优惠”类别显示，但是这些产品是按名称属性排序的，我需要在名称之前按类别排序的产品。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:36:54.633

```
$collection = Mage::getModel('catalog/category')->load($categoryId)
->getProductCollection()
->addAttributeToSort('category', 'ASC'); 
```

这将按类别而不是按名称对产品进行排序。addAttributeToSort 方法将任何模型现有属性作为参数。

# c# - （服务器应用程序）加载时未出现窗口窗体

> ID：11618763
> 
> 赞同：0
> 
> 时间：2012-07-23T19:02:05.800
> 
> 标签：c#, multithreading, tcp

我正在尝试在现有的 Windows 窗体应用程序中实现简单的 TCP/IP 通信。构成通信部分的代码有一个无限的while循环，我相信它会让服务器不断地监听客户端。它适用于我的应用程序，除了我对如何让它在单独的线程上运行有点卡住。我将在下面发布我的代码：

```
private TcpListener tcpListener;
    private Thread listenThread;

 private void Form1_Load(object sender, EventArgs e)
    {

        startServer();

    }

private void startServer()
    {
        TcpListener serverSocket = new TcpListener(IPAddress.Parse("127.0.0.1"), 8888);
        TcpClient clientSocket = default(TcpClient);
        serverSocket.Start();

        clientSocket = serverSocket.AcceptTcpClient();

        while ((true))
        {
            try
            {

                NetworkStream networkStream = clientSocket.GetStream();
                byte[] bytesFrom = new byte[10025];
                networkStream.Read(bytesFrom, 0, (int)clientSocket.ReceiveBufferSize);
                string dataFromClient = System.Text.Encoding.ASCII.GetString(bytesFrom);
                dataFromClient = dataFromClient.Substring(0, dataFromClient.IndexOf("$"));
                listBox1.Items.Add(" >> Data from client - " + dataFromClient);
                string serverResponse = "Server acknowledges the request - " + dataFromClient;
                Byte[] sendBytes = Encoding.ASCII.GetBytes(serverResponse);
                networkStream.Write(sendBytes, 0, sendBytes.Length);
                networkStream.Flush();
                listBox1.Items.Add(" >> " + serverResponse);

            }

            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }

        }
    } 
```

我将不胜感激有关此问题的任何建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:19:29.590

使用 BackgroundWorker 并在“DoWork”方法中调用您的服务器，如下所示：

```
using System;
using System.ComponentModel;
using System.Windows.Forms;
using System.Threading;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
    public Form1()
    {
        InitializeComponent();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        startServer() // Call here what you want to execute in another thread
    }
    }

} 
```

[你可以在这里](http://www.dotnetperls.com/backgroundworker)看到更详细的

# javascript - JQuery - 防止在输入按钮上提交表单而不防止击键

> ID：11618764
> 
> 赞同：-1
> 
> 时间：2012-07-23T19:02:08.917
> 
> 标签：javascript, yii, jquery

JQuery - 防止在输入按钮上提交表单而不防止击键

```
$('.filters').keypress(function(event)
{
    if(event.keyCode === 13) 
    {
            $.fn.yiiGridView.update('lead-category-grid', {
                   data: $(this).serialize()
            });
       return false;
    }
}); 
```

因为这个功能会阻止回车键击。但我需要一些功能来执行但表单不应该提交

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:04:29.313

```
$('.filters').keypress(function(event)
{
    if(event.keyCode === 13) 
    {
       // .... execute your functions here....
       return false;
    }
}); 
```

# javascript - 使用 setTimeout 延迟居中弹出 Javascript

> ID：11618765
> 
> 赞同：0
> 
> 时间：2012-07-23T19:02:10.610
> 
> 标签：javascript, popup, settimeout, invalid-argument

尝试在设定的时间值后显示居中的弹出窗口，如下所示：

```
<script type="text/javascript">
    <!--
    function popup(url) {
    var width = 300;
    var height = 200;
    var left = (screen.width - width) / 2;
    var top = (screen.height - height) / 2;
    var params = 'width=' + width + ', height=' + height;
    params += ', top=' + top + ', left=' + left;
    params += ', directories=no';
    params += ', location=no';
    params += ', menubar=no';
    params += ', resizable=no';
    params += ', scrollbars=no';
    params += ', status=no';
    params += ', toolbar=no';
    newwin = window.open(url, 'windowname5', params);
    if (window.focus) {
        newwin.focus()
    }
    setTimeout(popup('`test/login.html'), 5000);
    return false;
}

//-->
//]]>
</script> 
```

但弹出窗口永远不会显示。如果我这样写：

```
 <script type="text/javascript">
        <!--
        function popup(url) {
            var width = 300;
            var height = 200;
            var left = (screen.width - width) / 2;
            var top = (screen.height - height) / 2;
            var params = 'width=' + width + ', height=' + height;
            params += ', top=' + top + ', left=' + left;
            params += ', directories=no';
            params += ', location=no';
            params += ', menubar=no';
            params += ', resizable=no';
            params += ', scrollbars=no';
            params += ', status=no';
            params += ', toolbar=no';
            newwin = window.open(url, 'windowname5', params);
            if (window.focus) {
                newwin.focus()
            }

            return false;

        }
        setTimeout(popup('`test/login.html'), 5000);
        //-->
        //]]>
    </script> 
```

弹出窗口立即显示，但随后我收到一个 Invalid Argument 错误。建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T19:10:59.300

`setTimout`将函数作为其第一个参数。 `popup(...)`不返回函数。试试这个：

```
setTimeout(function() {popup('`test/login.html');}, 5000) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:17:02.777

在您的第一个示例中，您将 放置`setTimeout`在函数的主体内`popup()`。在调用该函数之前，该函数的主体不会运行。所以，你在第二次尝试放置身体`setTimeout`外部时是对的`popup()`。

另一个问题是您需要将[函数或代码](https://developer.mozilla.org/en/DOM/window.setTimeout)传递给`setTimeout()`：

```
var timeoutID = window.setTimeout(func, delay, [param1, param2, ...]);
var timeoutID = window.setTimeout(code, delay); 
```

像这样：

```
setTimeout(function() {
    popup('`test/login.html'); // provided that tick-mark is right...
}, 5000); 
```

而您现有的方法将`popup()`立即执行并且不为 timout 函数提供任何功能：

```
setTimeout(popup('`test/login.html'), 5000); 
```

# php - 从表单外部的 PHP 页面中检索值以查询 MSSQL？

> ID：11618767
> 
> 赞同：0
> 
> 时间：2012-07-23T19:02:14.360
> 
> 标签：php, sql-server, ajax, forms

我知道问题标题可能令人困惑，但这是我想要实现的目标：

我在一张装满许多物品的桌子上有一个 UL。列表的一个单元格包含一个复选框。这些复选框都在数组“itemsDone []”中命名我在侧面菜单中有一个按钮（在表单之外）。我希望这个按钮向我的服务器发送一个查询，以更新每个选中的复选框的值......这可能吗？我已经用谷歌搜索了大约一个小时，我可能正在寻找错误的关键字......我将不胜感激。

谢谢你们，祝你有美好的一天！

编辑：PHP 页面内根本没有表单。

Edit2：这是我现在拥有的代码：

```
<script type="text/javascript">
$(document).ready(function(){

    $("#saveCheckboxes").click(function(){
        var check = Array();
        var counter= 0;

        $('.itemsDone').each(function(){
            if(this.checked)
            {
                check[counter] = this.value;
                counter+=1;
                console.log(check[counter]);
            }
        })

        $.post('setCommandes.php',{'check[]':check}, function(data) {

            alert(data);

        });      
       return false;
    });
});
</script> 
```

这是我的 setCommandes.php 内容：

```
<?php
    include('includes/connexion.php');
    $data = $_POST['check[]'];

    $db_select=mssql_select_db("Test_CommandesWeb");
    foreach ($data as $checks)
    {
        $sql = "UPDATE Commandes SET CommandeFaite='1' WHERE CommandeId='$checks'";
        mssql_query($sql,$connexion);
    }
?> 
```

目前，我的 foreach 语句出现错误（提供的参数无效）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:09:29.747

你可以用 jQuery 做到这一点，像这样：

```
$('#myButton').click(function(){

    // loop through all checkboxes and check if they're checked
    $('input[type=checkbox]').each(function () {
       if (this.checked) {
           // do something with the checkbox if it's checked, like make ajax call
    });

}); 
```

或者，您可以使用 PHP 来完成。只需将您的提交按钮放在表单内，提交时，访问数组 itemsDone[] 并查看它是否被选中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:11:56.050

你应该可以使用[jQuery.post()](http://api.jquery.com/jQuery.post/)

我不确定您的页面是什么样的，但我猜代码会是这样的：

* * *

//确保使用正确的[选择器](http://api.jquery.com/category/selectors/)

```
//so, do the following when .class is clicked
$(".class").click(function(){

    //select the value 
    $('select.foo').val();

    //post the data
    $.post('ajax/test.html', function(data) {

        //replace the .result div with the
        //response from the server
        $('.result').html(data);

    });      

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:16:00.340

按钮必须在表单中才能提交。您的表单应包含您想要的所有输入以及按钮。

```
<form method="POST" action="/mark_items_done.php">

  <ul>
    <li>
      <input type="checkbox" name="itemsDone[]" value="1" />
    </li>
    <li>
      <input type="checkbox" name="itemsDone[]" value="2" />
    </li>
    <li>
      <input type="checkbox" name="itemsDone[]" value="3" />
    </li>
    <li>
      <input type="checkbox" name="itemsDone[]" value="4" />
    </li>
    <li>
      <input type="checkbox" name="itemsDone[]" value="5" />
    </li>
    <li>
      <input type="checkbox" name="itemsDone[]" value="6" />
    </li>
  </ul>

  <input type="submit" value="Send Items" />
</form> 
```

在您的 PHP 页面上，您可以获得`itemsDone`with。

```
<?php

$items_done = isset($_POST['itemsDone']) ? $_POST['itemsDone'] : null;

if( $items_done ) {
  // do something with the items
} 
```

* * *

如果您不想在表单内移动按钮，您可以使用 jQuery 执行类似的操作。

```
$('#submit_button').click(function() {
  $('#my_form').submit();
}); 
```

此解决方案将重新加载页面，但如果您需要，实现 AJAX 应该不会太难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:23:11.903

考虑接下来的步骤：

1）您可以使用javascript通过任何操作提交任何表单。在这种情况下，您的表单必须包含属性名称或 ID：

形式本身：

```
<form name="formName" id="formId" method="POST" action="anyformhandler.php">
<input type="checkbox" value="opt1" name="itemsDone[]">
<input type="checkbox" value "opt2" name="itemsDone[]">
</form> 
```

外部提交者（例如简单文本）：

```
<a href="#" onClick="document.formName.submit()">Submit the form!</a> 
```

或者

```
<a href="#" onClick="document.forms['formId'].submit()">Submit the form!</a> 
```

2）在一个php文件中，处理表单获取数据：

```
 if ((isset($_POST["itemsDone"])) and (is_array($_POST["itemsDone"]))){
     // just do needed stuff.
    } 
```

3) 要在使用数据库时更新每个复选框的值，您应该与数据库进行交互。查询数据库-> 存储数据-> 加载复选框的值。

如果您愿意，请提出问题。希望这可以帮助 ;）

# iphone - CGImage 创建大量脏内存导致应用程序崩溃

> ID：11618768
> 
> 赞同：4
> 
> 时间：2012-07-23T19:02:16.367
> 
> 标签：iphone, ios5, memory-management, cgimage

我尝试通过填写自己的数据来创建 UIImage。到目前为止一切正常。但是，如果我尝试多次调用此函数，它似乎会填满内存，直到应用程序崩溃。使用 VM Tracker，我发现脏内存增长到 328MB，其中 290MB 是应用程序崩溃时的 CG 图像内存。

我在循环中多次调用我的函数，从而启用了 ARC。图像相当大，但这应该不是问题，因为它在 29 次第一次迭代中运行良好。据我所知，脏内存应该被应用程序再次重用。那正确吗？那么为什么它会填满我的记忆，我该如何避免这个问题呢？

```
for(int i = 0; i < 1000; ++i) {
    UIImage *img = [self createDummyImage:CGSizeMake(2000, 1600)];
} 
```

创建虚拟 UIImage 的函数：

```
- (UIImage*)createDummyImage:(CGSize)size
{
    unsigned char *rawData = (unsigned char*)malloc(size.width*size.height*4);

    // fill in rawData (logic to create checkerboard)

    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Host;
    CGContextRef contextRef = CGBitmapContextCreate(rawData, size.width, size.height, 8, 4*size.width, colorSpaceRef, bitmapInfo);
    CGImageRef imageRef = CGBitmapContextCreateImage(contextRef);

    CGColorSpaceRelease(colorSpaceRef);
    CGContextRelease(contextRef);
    free(rawData);

    UIImage *image = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return image;
} 
```

**hooleyhoop 的工作解决方案**

将函数调用放入自动释放池。

```
for (int i = 0; i < 1000; ++i) {
    @autoreleasepool {
        UIImage *img = [self createDummyImage:CGSizeMake(2000, 1600)];
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:34:08.387

我认为，如果您查看 Allocations 工具中的“实时”内存，您会发现您只是用完了正常内存 - 与脏 VM 无关。

这很可能是因为您有太多的内存等待自动释放。在当前的自动释放池被弹出之前，自动释放的对象不会被释放——您正试图将数百兆字节的对象添加到一个自动释放池中。

答案是管理您自己的自动释放池，或者不在一个事件循环中做太多工作。

抱歉，但我无法抗拒讽刺的评论。在我看来，这在 ARC 之前会更加明显。

# javascript - 这些 window.external 调用是什么意思？

> ID：11618772
> 
> 赞同：3
> 
> 时间：2012-07-23T19:02:20.727
> 
> 标签：javascript, external

我最近在我们的源代码树中遇到了一个 JavaScript 文件，其中有很多调用，例如

```
window.external.getParameter()
window.external.createGUID()
window.external.readStringFromRegistry() 
```

等等，我真的很困惑。

这些是以某种方式对 Windows API 的本机调用吗？我在哪里可以找到有关所有可用`window.external`命名空间函数的更多信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T19:05:24.987

看看这里... [http://msdn.microsoft.com/en-us/library/ie/ms535246(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms535246(v=vs.85).aspx)了解信息。我想您的网站使用 .NET？

也许这也有帮助（可能重复）：[window.external 有什么用？](https://stackoverflow.com/questions/10694341/what-is-the-use-of-window-external)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:10:05.507

看看这里：[http](http://help.dottoro.com/ljisswge.php) ://help.dottoro.com/ljisswge.php 。它是（在 IE 中）对“外部”对象（你没有说）或（在 Firefox 中）对“侧边栏”对象的引用。

# regex - Perl 正则表达式

> ID：11618775
> 
> 赞同：4
> 
> 时间：2012-07-23T19:02:32.840
> 
> 标签：regex, perl, parsing, scripting

我继承了一个从某些文件中提取数据的 perl 脚本。整个脚本运行良好，但最近一些工程师已经为某个通常取一个数字的位置输入了多个数字，因此输出并未显示所有预期的内容。

样本输入：

`CRXXXX: "Then some text"`

`CRs XXXX, XXXX, XX, XXX`

`CRXXX "Some Text"`

目前，这个正则表达式语句我已经在 CR 之后提取了数字，但是如果给出第二行示例输入，它会打印`"s XXXX, XXXX, XX, XXX"`而不是想要的`"XXXX XXXX XX XXX"`

我对 perl 非常陌生，并且正在努力弄清楚如何更改此正则表达式以处理所有输入。

```
 $temp_comment =~ s/\s[cC][rR][-\s:;]*([\d])/\n$1/mg; 
```

提前致谢！

布洛克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:31:46.513

对于示例数据，例如：

```
my $temp_comment =
'CR1234: "Then some text"
 CRs 2345, 3456, 45, 567
 CR678 "Some Text"'; 
```

尝试：

```
$temp_comment =~ s/(,)|[^\d\n]+/$1?' ':''/semg; 
```

或者，如果您想靠近字符串模板：

```
$temp_comment =~ s/ ^                 # multi-line mode, line start
                    \s*               # leading blanks?
                    CR                # CR tag
                    \D*               # non-number stuff
                     (                  # start capture group
                      (?:\d+ [,\s]*)+   # find (number, comma, space) groups
                     )                  # end capture group
                    \D*               # skip remaining non-number stuff
                    $                 # multi-line mode, line end
                  /$1/mxg;            # set multi-line mode + regex comments "x" 
```

但您必须在后续步骤中删除数字组中的逗号。

```
$temp_comment =~ tr/,//d;             # remove commas in the whole string 
```

或者

```
$temp_comment =~ s/(?<=\d),(?=\s\d)//g;  # remove commas between numbers '11, 22' 
```

对于“单步”，您必须使用`/e`修饰符：

```
$temp_comment =~ s{ ^                 # line start
                    \s*               # leading blanks?
                    CR                # CR tag
                    \D*               # non-number stuff
                    ((?:\d+ [,\s]*)+) # single or group of numbers
                    \D*               # non number stuff
                    $                 # line end
                  }
                  {do{(local$_=$1)=~y/,//d;$_}}mxeg; 
```

根据上面的数据，这将导致：

```
1234
2345 3456 45 567
678 
```

但实际上，如果可能， **请使用****更简单的两步方法**。后一种正则表达式可能是您的继任者的维护噩梦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:10:29.323

您最好分两步执行此操作：

1）创建你的正则表达式

`s/\s[cC][rR][-\s:;]*([\d\ ]+)/\n$1/mg`（注意捕获所有数字的新方法，您只捕获上面的第一个数字）

2）然后只需用查找/替换去掉字符串中的逗号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T19:19:04.973

```
my ($v) = /CR[s ]*((?:\d+[\s,]*)*)/ig;
$v =~ s/,//g;
print $v,"\n"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T19:41:09.883

也许以下内容对您有用：

```
use Modern::Perl;

say join ' ', (/(\d+)/g) for <DATA>;

__DATA__
CR1234: "Then some text"
CRs 1111, 2222, 33, 444
CR567 "Some Text" 
```

输出：

```
1234
1111 2222 33 444
567 
```

希望这可以帮助！

# mysql - SQL：基于列值的嵌套查询

> ID：11618778
> 
> 赞同：0
> 
> 时间：2012-07-23T19:02:47.483
> 
> 标签：mysql

我使用以下查询查询了一个表

```
select content_type_code_id
    , price
    , count(price) AS PRICECOUNT 
from dbo.transaction_unrated 
where transaction_date >= '2012/05/01' 
    and transaction_date < '2012/06/01' 
    and content_provider_code_id in (1) 
group by content_type_code_id, price 
ORDER BY price ASC 
```

产生以下结果集

```
content_type_code_id   price    PRICECOUNT
1                     -1.99     1
1                     -0.99     1
1                      0.99     178
1                      1.99     786 
```

但我想要这样的结果集：

```
content_type_code_id    price   Debits Credits
1                      0.99     178      1
1                      1.99     786      1 
```

（负价为贷方，正价为借方）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:09:07.710

试试这个

```
select content_type_code_id
    , ABS(price)
    , count(IF(price >= 0,1,null)) AS debits,
    , count(IF(price < 0,1,null)) AS credits,
from dbo.transaction_unrated 
where transaction_date >= '2012/05/01' 
    and transaction_date < '2012/06/01' 
    and content_provider_code_id in (1) 
group by content_type_code_id, ABS(price)
ORDER BY price ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:18:45.563

尝试这个：

```
SELECT  content_type_code_id
     ,  price * -1
     ,  COUNT(price) AS PRICECOUNT
     ,  (
          SELECT  COUNT (deb.price)
            FROM  dbo.transaction_unrated deb
            WHERE deb.transaction_date >= '2012/05/01'
            AND   deb.transaction_date < '2012/06/01'
            AND   deb.content_provider_code_id IN (1)
            AND   deb.price = ( dbo.transaction_unrated.price * -1 )
        )
  FROM  dbo.transaction_unrated
  WHERE transaction_date >= '2012/05/01'
  AND   transaction_date < '2012/06/01'
  AND   content_provider_code_id IN (1)
  AND   price < 0
  GROUP BY content_type_code_id
         , price
         , 4
  ORDER BY price ASC 
```

# python - 内存错误的可能性？

> ID：11618782
> 
> 赞同：3
> 
> 时间：2012-07-23T19:02:54.020
> 
> 标签：python, memory

```
a=raw_input()
prefix_dict = {}
for j in xrange(1,len(a)+1):
    prefix = a[:j]
    prefix_dict[prefix] = len(prefix)
print prefix_dict 
```

上述代码中是否存在内存错误的可能性？这段代码在服务器上运行，服务器是一台运行 32 位 Ubuntu（Ubuntu 12.04 LTS）的四核 Xeon 机器。在少数情况下它可以工作，而在少数情况下它会显示内存错误。仅供参考：我不知道他们正在测试的情况，但输入是小写字母。输入大小 <= 10,000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:24:24.453

仅数据的内存量将是 1 + 2 + 3 ... + n-2 + n-1 + n 其中 n 是输入的长度，换句话说，`len(a)`. 计算结果为 (n+1) * n/2。如果 n 是 10,000，这可以计算出大约 50 MB 的字符串数据，再加上 Python 字典使用多少 RAM 来存储 10,000 个条目。在我的 OSX 机器上进行测试，这似乎很少，实际上如果我在其上运行此代码，该过程显示已使用 53.9 MB：

```
str = "a"
d = {}
for i in xrange(10000):
    d[str] = i
    str = str + "a" 
```

我看不出你的代码有什么明显的错误，当我在一个 10,000 个字母长的字符串上运行它时，它很高兴地吐出大约 50mb 来输出，所以肯定有其他问题。

`top`进程的内存使用情况是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:30:08.380

也许一小段代码会有所帮助：

```
prefix_dict = { a[:j]:j for j in xrange(1, len(a) + 1) } 
```

# ios - 我想在 NSDateComponents 类中获得四分之一的值

> ID：11618784
> 
> 赞同：5
> 
> 时间：2012-07-23T19:03:02.323
> 
> 标签：ios, objective-c, nscalendar, nsdatecomponents

我想从指定日期获得四分之一值。(*日期变量)

所以。我制作了以下代码并运行。但是，四分之一值为零。

为什么季度值为零？哪里有问题？

请高人指教。

```
NSDateComponents *comp1 = [[NSDateComponents alloc] init];
[comp1 setYear:2012];
[comp1 setMonth:6];
[comp1 setDay:1];

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDate *date = [gregorian dateFromComponents:comp1];  <== want to get a quarter value.

unsigned int unitFlags = NSYearCalendarUnit | NSQuarterCalendarUnit | NSMonthCalendarUnit | NSWeekOfYearCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
NSDateComponents *comp2 = [gregorian components:unitFlags fromDate:date];

NSLog(@"year :       %5d",[comp2 year]);
NSLog(@"quarter :    %5d",[comp2 quarter]);
NSLog(@"month :      %5d",[comp2 month]);
NSLog(@"weekofYear : %5d",[comp2 weekOfYear]);
NSLog(@"day :        %5d",[comp2 day]); 
```

结果：

```
2012-07-24 03:44:14.776 dateTest[1228:1307] year :        2012
2012-07-24 03:44:14.776 dateTest[1228:1307] quarter :        0
2012-07-24 03:44:14.777 dateTest[1228:1307] month :          6
2012-07-24 03:44:14.777 dateTest[1228:1307] weekofYear :    22
2012-07-24 03:44:14.778 dateTest[1228:1307] day :            1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T21:24:08.997

NSQuarterCalendarUnit 似乎存在被忽略的问题（尚未验证，但确实看到了一个错误报告）。无论如何，它很容易绕过......只需使用 NSDateFormatter 类。

```
// After your NSDate *date, add...
NSDateFormatter *quarterOnly = [[NSDateFormatter alloc]init];
[quarterOnly setDateFormat:@"Q"];

int quarter = [[quarterOnly stringFromDate:date] intValue];

// Then change the quarter NSLog too
NSLog(@"quarter :    %5d", quarter); 
```

应该可以正常工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T05:00:27.147

2014 年 12 月 16 日

简单地说：

([comp2 月]-1)/3+1;

# python - Python——重新加载模块级对象

> ID：11618788
> 
> 赞同：2
> 
> 时间：2012-07-23T19:03:12.090
> 
> 标签：python, django, unit-testing, testing

## 我想做的事

我正在尝试编写单元测试来检查我的正则表达式是否正确构造：

```
# mediamanager/models.py

import re

from django.conf import settings

filetypes_re = {}
for key, exts in settings.MM_FILETYPES.items():
    filetypes_re[key] = re.compile(r'({})'.format('|'.join(exts))) 
```

注意：实际上，我根本不知道我为什么要编写这个单元测试，因为这段代码非常简单……但这不是重点。

如您所见，最终的正则表达式取决于用户可以设置的变量 settings.MM_FILETYPES。我需要测试特定的输入，对于这种情况，Django 提供了装饰器 @override_settings ，它临时覆盖设置值：

```
# mediamanager/tests.py

import unittest
from django.test.utils import override_settings
from mediamanager.models import (filetypes_re, …)  # import everything we want to test

class ModelsTestCase(unittest.TestCase):
    @override_settings(MM_FILETYPES={'image': ['jpg', 'png', 'gif'],
                                     'document': ['pdf', 'txt'],
                                     'audio': ['mp3', 'wav']})
    def test_filetype_re(self):
        filetypes_re_exp = {'image': '(jpg|png|gif)',
                            'document': '(pdf|txt)',
                            'audio': '(mp3|wav)'}

        for key, value in filetypes_re_exp.items():
            self.assertEqual(value, filetypes_re[key].pattern) 
```

不幸的是，这个测试没有通过。模块 mediamanager.models 在设置被覆盖之前加载，因此 filetypes_re 使用旧设置编译。我需要（以某种方式）重新加载它以使新设置生效。

## 问题

我以这种方式更改了单元测试：

```
@override_settings(MM_FILETYPES={'image': ['jpg', 'png', 'gif'],
                                 'document': ['pdf', 'txt'],
                                 'audio': ['mp3', 'wav']})
def test_filetype_re(self):
    import mediamanager.models  # obtaining module object from sys.modules have the same result
    reload(mediamanager.models)
    filetypes_re = mediamanager.models.filetypes_re
    filetypes_re_exp = {'image': '(jpg|png|gif)',
                        'document': '(pdf|txt)',
                        'audio': '(mp3|wav)'}

    for key, value in filetypes_re_exp.items():
        self.assertEqual(value, filetypes_re[key].pattern) 
```

并且测试通过了。但可能是因为我从 mediamanager.models 模块导入了其他对象，这个测试用例中的其他测试失败了。不是全部，只有两个（这很奇怪）。**编辑**：一点也不奇怪。只有在 test_filetyes_re 和 reload() 调用之后运行的测试才会失败。

## 问题

如何以以下方式“重新加载”模块 mediamanager.models：

1.  filetypes_re 使用新设置进行评估？
2.  从同一模型导入的所有其他对象不受影响？

我是否应该仅仅因为重新加载后变得不稳定而重写一段代码（我的意思是来自 mediamanager.models 的其他那些在重新加载后未通过测试的对象）？我读过一些关于重新加载模块的文章，通常这不是一个好主意。

有没有更好的方法来定义模块级对象，比如这个正则表达式，使测试更容易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:40:00.633

有几种方法。我的头顶上：

```
# mediamanager/models.py

import re

from django.conf import settings

def get_filetypes_re(mm_filetypes=settings.MM_FILETYPES):
    filetypes_re = {}
    for key, exts in settings.MM_FILETYPES.items():
    filetypes_re[key] = re.compile(r'({})'.format('|'.join(exts)))
    return filetypes_re 
```

和你的测试：

```
MM_FILETYPES={'image': ['jpg', 'png', 'gif'],
                        'document': ['pdf', 'txt'],
                        'audio': ['mp3', 'wav']})

def test_filetype_re(self):
    filetypes_re = mediamanager.models.get_filetypes_re(mm_filetypes=MM_FILETYPES)
    filetypes_re_exp = {'image': '(jpg|png|gif)',
                        'document': '(pdf|txt)',
                        'audio': '(mp3|wav)'}

    for key, value in filetypes_re_exp.items():
        self.assertEqual(value, filetypes_re[key].pattern) 
```

# php - htaccess 排除 CSS/JS/图像

> ID：11618791
> 
> 赞同：2
> 
> 时间：2012-07-23T19:03:17.210
> 
> 标签：php, image, .htaccess, mod-rewrite, get

这从原始 url 中排除 CSS/JS/Images。有谁知道如何解决这个问题？

.htacess：

```
RewriteEngine on
RewriteRule %{REQUEST_FILENAME} !-d
RewriteRule %{REQUEST_FILENAME} !-f
RewriteRule ^(.+)$ index.php?uri=$1 [QSA,L] 
```

PHP：

```
$splitarray = explode('/',$_GET['uri']); 
```

*   我使用 PHP 分解 URL 以获取第二个参数并将该页面包含到 index.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:24:52.387

尝试：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_URI} \.(js|css|jpe?g|gif|png|bmp|ico)$ [NC]
RewriteRule ^(.+)$ index.php?uri=$1 [QSA,L] 
```

因此，`index.php`如果请求不是针对现有目录，并且请求不是针对现有文件，或者请求不是针对以 js、css、jpeg、jpg、gif、png、bmp 结尾的文件，这将通过，伊科。

# sql - 使用 SQL 从 xml 获取电子邮件

> ID：11618795
> 
> 赞同：2
> 
> 时间：2012-07-23T19:03:22.077
> 
> 标签：sql

我在 SQL 中有一个表，其中包含以下列和数据：

*   名字是乔
*   姓氏是史密斯
*   邮政编码是 12345
*   Join_date 是 05012011
*   xmldata 是`<data>Idontknow_noidea@noemail.net</data>`

如何在 SQL 中编写一个选择查询，该查询将在 SQL 查询中提取电子邮件，以便我的结果如下所示：

```
Joe,  Smith, 12345, 05012011, Idontknow_noidea@noemail.net 
```

分别用于 First_name、Last_Name、Zipcode、Join_date 和电子邮件标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:34:57.637

查看 XQuery，它专门用于处理 xml 数据类型。

这是一个很好的解释（又快又脏）： [http ://www.brokenwire.net/bw/Programming/125/querying-xml-fields-using-t-sql](http://www.brokenwire.net/bw/Programming/125/querying-xml-fields-using-t-sql)

这里有一些更深入的内容（来自 MSDN）：http: [//msdn.microsoft.com/en-us/library/ms345122%28SQL.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms345122%28SQL.90%29.aspx)

# python - 在本地运行“python manage.py syncdb”时出错，但通过 Heroku 运行相同命令时没有错误

> ID：11618800
> 
> 赞同：2
> 
> 时间：2012-07-23T19:03:30.483
> 
> 标签：python, django, postgresql, heroku, local

我是 Heroku 和 Django/Python 的新手。我希望找到我遇到的问题的答案。我一直在关注 Heroku 开发中心的入门教程：[https ://devcenter.heroku.com/articles/django](https://devcenter.heroku.com/articles/django)

运行命令并将应用程序代码推送到 Heroku 时，一切正常。例如，当我运行 CLI 命令“heroku run python manage.py syncdb”时，一切都按预期工作，没有错误。但是，当我尝试在本地运行相同的命令“python manage.py syncdb”时，我得到以下输出和错误：

```
 Scotts-MacBook-Pro:bonavina scottklieberman$ python manage.py syncdb
    Traceback (most recent call last):
    File "manage.py", line 10, in <module>
    ...
    File "/Library/Python/2.7/site-  packages/django/db/backends/postgresql_psycopg2/base.py", line 162, in _cursor
    raise ImproperlyConfigured("You need to specify NAME in your Django settings file.")
    django.core.exceptions.ImproperlyConfigured: You need to specify NAME in your Django settings file. 
```

然后我回去检查了我的 settings.py 文件。根据 Heroku 教程，我没有在设置文件中指定 NAME，因为我正在使用 dj_database_url。我很好奇为什么这在本地失败（为什么它需要 NAME），而它在 Heroku 上编译成功。任何帮助将不胜感激。如果您需要任何其他信息来诊断问题，请告诉我。

最好的，斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:57:37.887

`dj_database_url`使用环境变量的值，该值`DATABASE_URL`在 Heroku 上设置，但可能未在您的本地环境中设置（除非您自己设置）。

# php - 在命令行中使用 PID 将变量发送到进程？

> ID：11618801
> 
> 赞同：1
> 
> 时间：2012-07-23T19:03:33.813
> 
> 标签：php, shell, command-line, cmd, pid

我有一个打开的进程，可以检索变量，但它在后台运行。

所以我需要使用PID向进程发送一个变量？？是否可以在命令行中将变量发送到进程或重新连接到进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:08:54.560

进程间通信通常由[PHP 支持](http://php.net/manual/en/book.sockets.php)的套接字处理。因此，如果您可以控制这两个应用程序，则可以设置套接字以在它们之间进行通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:05:49.117

* **nix 类型的炮弹**

您可以通过执行重新连接到进程`fg [job id]`（这不是 PID，但您可以使用`jobs`终端中的命令找到它）

**工业PC**

如果程序配置为接受变量，您也可以将变量发送到程序中。它可以从管道、文件或网络套接字中读取它

`kill -[signal]`如果一个程序只是在等待一个布尔消息，它也能够接收信号（用 发送）

对于php来说，通过这些方法发送变量可能会涉及到变量在传输前的[序列化](http://php.net/manual/en/function.serialize.php)

# ruby-on-rails - Ruby gem 的缩进代码

> ID：11618802
> 
> 赞同：0
> 
> 时间：2012-07-23T19:03:39.743
> 
> 标签：ruby-on-rails, ruby

是否有一个 gem 可以让我们在 Rails 中编写带有缩进的 Ruby 代码，就像 Haml 和 CoffeeScript 分别为 html 和 javascript 所做的那样？

谷歌总是以 Lazibi 告终，但这个项目已经死了 5 年。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:14:17.017

为 Ruby 采用 Python 风格的语法的问题在于，Python 的语法主要取决于语句和表达式之间的区别。例如，一个 lambda 只能包含表达式而不是语句（或者换句话说：一个 lambda 的主体必须由一个语句组成）。然而，Ruby 没有语句，它只有表达式。

这意味着为 Ruby（或任何其他类似 Ruby 的语言）采用 Python 风格的语法是不可能的。例如，Tony Arcieri 对 Reia 进行了尝试，但他不得不改变他的决定，正是因为 Reia 和 Ruby 一样，没有声明。

类似 Haskell 或 F# 的语法可能会工作得更好，但还没有人实现它。

# c# - 在 ActiveRecordLinq 语句的返回中使用“或”

> ID：11618807
> 
> 赞同：0
> 
> 时间：2012-07-23T19:03:53.520
> 
> 标签：c#, asp.net-mvc, icollection, activerecordlinq

我正在处理现有的 MP3 文件在线库。代码的一部分在数据库中查找包含系列标题中特定字符串的文件。

```
public ICollection<Series> ListTruthAndLifeSeries() {
return (from f in ActiveRecordLinq.AsQueryable<File>()
     where f.SeriesTitle.Contains("Truth and Life")
     orderby f.SeriesTitle
     select new { Name = f.SeriesTitle, Slug = f.SeriesTitleSlug })
                    .ToList().Distinct()
                    .Select(u => Parse(u.Name, u.Slug))
                    .OrderByDescending(u => u.Year)
                    .ThenBy(u => u.Name)
                    .ToList();
    } 
```

这工作得很好。但我需要添加某种条件，它还将返回系列标题包含“Truth & Life”的记录。我试图通过简单地添加来做到这一点

```
or f.SeriesTitle.Contains("Truth & Life") 
```

在 where 子句之后，但 Visual Studio 会在其中放入一堆红色波浪线，并在该方法中将 or 语句及其后面的所有内容变灰。执行此操作的正确语法是什么？更改数据以使它们都不使用 & 不是一个实际的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:37:05.217

我不确定您的实际问题，但解决它的一种方法（并允许您的查询是可扩展的）是使用从`IEnumerable<String>`以下类派生的任何集合：

```
List<string> Titles = new List<string>();
Titles.Add("Truth and Life");
Titles.Add("Truth & Life");

 return (from f in ActiveRecordLinq.AsQueryable<File>()
         where Titles.Contains(f.SeriesTitle)
         orderby f.SeriesTitle
         select new { Name = f.SeriesTitle, Slug = f.SeriesTitleSlug })
       .ToList().Distinct()
       .Select(u => Parse(u.Name, u.Slug))
       .OrderByDescending(u => u.Year)
       .ThenBy(u => u.Name)
       .ToList(); 
```

**更新**

C# 不使用`or`它`||`来声明*OR*运算符。

```
where f.SeriesTitle.Contains("Truth and Life")
      || f.SeriesTitle.Contains("Truth & Life") 
```

# repository-pattern - 关于存储库模式的一些事情我根本不明白

> ID：11618809
> 
> 赞同：7
> 
> 时间：2012-07-23T19:03:54.650
> 
> 标签：repository-pattern, data-access-layer

我已经阅读了很多关于 Repository 是什么的主题，但仍然有一些事情困扰着我。

*据我了解，存储库*和*传统数据访问层*之间的唯一区别是*存储库的*查询构造功能（即*查询对象模式*）。但是当阅读以下*Repository Pattern*的定义时，即使我们没有实现*Query Object 模式*，我们似乎仍然可以拥有*Repository*：

 *a) [来自：](http://blog.lowendahl.net/?p=249)

> 存储库是我们传递和获取对象的单点。它也是与存储通信开始和结束的边界。

我认为上面的引用表明*存储库*是 DAL 的入口点。换句话说，根据引用，DAL 消费者（比如*服务层）通过**Repository*与 DAL 通信。但是*数据上下文*不应该代表 DAL 的入口点（因此*存储库*应该驻留在*数据上下文中*）吗？

b) [来自：](http://devlicio.us/blogs/casey/archive/2009/02/20/ddd-the-repository-pattern.aspx)

> 存储库与传统数据访问层的主要区别在于，它在所有意图和目的上都是一个集合语义——就像 .Net 中的 IList

大多数传统的 DAL 不也有返回集合的方法（例如`List<Customer> GetAllCustomers()`）吗？那么，*存储库*的类集合语义与传统 DAL 的类集合语义究竟有何不同？

c) [来自：](http://www.sapiensworks.com/blog/post/2012/02/22/The-Repository-Pattern-Explained.aspx)

> 简而言之，存储库模式意味着抽象持久层，将其屏蔽为一个集合。这样，应用程序不关心数据库和其他持久性细节，它只处理抽象（通常被编码为接口）。

据我所知，上述定义与*传统 DAL*的定义没有任何不同。因此，如果*Repository*实现只执行两个功能——具有类似集合的语义并将域对象与数据库访问代码的细节隔离开来——它与*传统的 DAL*有何不同？换句话说，它会/应该仍然被称为*Repository*吗？

d) 是什么使以下接口成为*Repository 接口*而不仅仅是常规*DAL 接口*？

[从：](http://www.sapiensworks.com/blog/post/2012/02/22/The-Repository-Pattern-Explained.aspx)

```
public interface IPostsRepository
    {
        void Save(Post mypost);
        Post Get(int id);
        PaginatedResult<Post> List(int skip,int pageSize);
        PaginatedResult<Post> SearchByTitle(string title,int skip,int pageSize);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T18:55:43.260

[仅供参考，我在这里](https://stackoverflow.com/questions/13180501/what-specific-issue-does-the-repository-pattern-solve)问了一个非常相似的问题，并得到了一些很好的答案。

最重要的是，它似乎取决于您的架构的复杂性。当您需要访问不同*类型*的数据存储时，存储库模式对于创建抽象层最有用，即一些数据在实体框架中，一些在文件系统中，等等。在更简单的 Web 应用程序中（可能不变）单个数据存储（即 SQL Server 或 Oracle 等中的所有数据）不太重要。那时，实体框架上下文对象之类的东西充当实体对象的存储库。*

# c# - 如何在 C# 中从 XSD 中检索 minoccurs 值？

> ID：11618810
> 
> 赞同：3
> 
> 时间：2012-07-23T19:03:57.813
> 
> 标签：c#, xsd

我试图找出 XmlSchemaSimpleType 类型对象的“父”属性的正确转换类型。下面的代码总是返回“”，因为“父”变量被验证为空。谁能帮助如何从 simpleType 的父级检索 minOccurs ？谢谢！

```
private string GetMinOccurs(XmlSchemaSimpleType xsdSimpleType)
{
    var parent = xsdSimpleType.Parent as XmlSchemaElement;

    if (parent == null) return "";

    return parent.MinOccurs.ToString();
} 
```

我的 XSD 的一个例子是：

```
<xsd:complexType name="New_Type">
  <xsd:sequence>
    <xsd:element name="Amount" type="Amount_Type"  minOccurs="1" maxOccurs="1" />
    <xsd:element name="Name" type="Name_Type"  minOccurs="1" maxOccurs="1" />
  </xsd:sequence>
</xsd:complexType>

<xsd:simpleType name="Amount_Type">
  <xsd:annotation>
    <xsd:documentation>Amount</xsd:documentation>
  </xsd:annotation>
  <xsd:restriction base="xsd:string">
    <xsd:maxLength value="12" />
  </xsd:restriction>
</xsd:simpleType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:33:01.170

就像我在您上一个[问题](https://stackoverflow.com/a/11570979/250725)的评论中所说的那样。an的`Parent`属性`XmlSchemaSimpleType`不像你想象的那样工作。看起来您希望它会返回`<element>`具有`XmlSchemaSimpleType`您指定的类型的 。

但是考虑一下这种情况：

```
<xsd:complexType name="New_Type">
  <xsd:sequence>
    <xsd:element name="Amount" type="Amount_Type"  minOccurs="1" maxOccurs="1" />
    <xsd:element name="OtherAmount" type="Amount_Type"  minOccurs="10" maxOccurs="15" />
    <xsd:element name="Name" type="Name_Type"  minOccurs="1" maxOccurs="1" />
  </xsd:sequence>
</xsd:complexType>

<xsd:simpleType name="Amount_Type">
  <xsd:annotation>
    <xsd:documentation>Amount</xsd:documentation>
  </xsd:annotation>
  <xsd:restriction base="xsd:string">
    <xsd:maxLength value="12" />
  </xsd:restriction>
</xsd:simpleType> 
```

由于有 2 个具有相同类型的不同元素，它会返回哪个？从这个示例中可以看出，一个类型可以在整个 XSD 中多次使用，并且每次出现都可以有不同的`MinOccurs`值。如果你想得到`MinOccurs`，你需要找到`<element>`你想要的确切类型，即使该类型只使用一次。但要做到这一点，您需要知道它在 XSD 中的位置。

这个[博客](http://blogs.msdn.com/b/stan_kitsis/archive/2005/08/06/448572.aspx)已经有几年历史了，但我认为这对这一点有所帮助。您基本上必须使用 找到复杂类型`XmlSchemaSet.GlobalTypes[]`，然后您需要查看`Particle`属性。在您的情况下，那里将有一个`XmlSchemaSequence`对象（您可能需要强制转换）。然后您需要查看 items 属性以找到您的`Amount`元素。从那里（在另一个演员之后），你可以得到 MinOccurs。

如果您不确切知道要查找的内容，则`XmlSchemaObject`属性中的所有集合都具有`GetEnumerator`方法，因此您可以使用它`foreach`来帮助扫描所有内容。没有一个是通用的，所以你需要做很多铸造，但这基本上是你必须做的：

```
foreach (DictionaryEntry item in set.GlobalTypes)
{
    // set.GlobalTypes.GetEnumerator returns an object, so you need to cast to DictionaryEntry 
    // DictionaryEntry.Key and DictionaryEntry.Value are objects too so you need to cast again
    // Particle is an XmlSchemaObject, so you need to cast to an XmlSchemaSequence

    var seq = (XmlSchemaSequence)((XmlSchemaComplexType)item.Value).Particle;

    // XmlSchemaSequence.Items also returns an XmlSchemaObject so you need to cast again to XmlSchemaElement.

    foreach (XmlSchemaElement i in seq.Items)
    {
        if (i.SchemaTypeName == new XmlQualifiedName("Amount_Type"))
        {
            Console.WriteLine(i.MinOccursString);
        }
    }
} 
```

但这只是展示如何到达您想去的地方的示例。您需要在每次强制转换之前进行一些类型检查，以防失败。例如，`var seq = (XmlSchemaSequence)((XmlSchemaComplexType)item.Value).Particle;`当它到达 XSD 中的第二种类型后会抛出异常，因为它不是复杂类型，而是简单类型。

如果您确切知道自己想要什么，则 LINQ 解决方案可能会更容易：

```
var xDoc = XDocument.Load("your XSD path");
var ns = XNamespace.Get(@"http://www.w3.org/2001/XMLSchema");

var minOccurs = from element in xDoc.Descendants()
                where (String)element.Attribute("type") == "Amount_Type"
                select (String)element.Attribute("minOccurs"); 
```

此方法至少可以让您快速扫描文档以查找与您匹配的任何类型`Amount_Type`并获取 minOccurs （或返回 null 的没有`minOccurs`属性）。

# matlab - 网格数据的问题

> ID：11618811
> 
> 赞同：1
> 
> 时间：2012-07-23T19:04:02.677
> 
> 标签：matlab

我正在使用 griddata 来插入一些值。但是，我可以找到一些问题。它向我显示 xy 重复值的警告。但是，当我检查数据以查看是否所有 xy 对都是唯一的时，我发现它们是唯一的。

那为什么会显示这个警告呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:25:45.573

奇怪的是它们接近于被复制，而 griddata 显然对此使用了容差。一种解决方案是使用[合并](http://www.mathworks.com/matlabcentral/fileexchange/8354-consolidator)器来平均点，提供公差。

# objective-c - 主发电机不工作

> ID：11618812
> 
> 赞同：0
> 
> 时间：2012-07-23T19:04:18.910
> 
> 标签：objective-c, primes

我想写一个非常简单的主要应用程序。但是我对下面的代码有一些问题，它应该生成从 0 到 99 的素数。但它只显示 99。

一个问题是只显示最后一个数字。但另一个是主要的“检查”不起作用。我该如何解决这些问题。

```
for (i=0; i<100; i++) {
    for (n=2; n<i; n++) {
        if (i%n == 0) break;
        else primetext.text = [NSString stringWithFormat:@"%i, ", i];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:08:16.767

您应该将数字附加到 primetext.text 而不是分配。现在它在每次迭代中都被重新分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:16:35.023

有很多问题，我会尽力解释

*   素数检查的问题在于，您在 for 循环内有 if-else 语句，该语句遍历要检查的数字。因此，如果您的数字不能被您检查的任何数字整除，它将被注册为素数。它也将被注册 n 次，其中 n 是发现它不可整除的次数。
*   所有偶数都不是素数（除了 2），所以你可以`i+=2`加倍速度
*   你只需要检查一个数字的平方根，看看它是否是素数。
*   1 不是质数，因此您不需要包含它（特别是因为它可以使您的逻辑更复杂）。
*   您正在重新分配字符串而不是向其添加组件
*   您使用的是 %i 而不是 %d。这有时会导致奇怪的错误。

考虑到这些要点，这是您修改的方法。

```
int maxNum = 100;
primetext.text = @"2 ";             //Start knowing that 2 is the lowest prime (avoid evaluating evens)
for (i=3; i<=maxNum; i+=2)          //Start at 3 and add 2 (avoid 1 and 2 as well as even numbers) 
{
    bool isPrime = YES;             //Assume that i is prime
    for (n=2; n<sqrt(i); n++)       //Divide by every number up to square root
    {
        if (i%n == 0)               //If evenly divisible by n, not a prime
        {
            isPrime = NO;
            break;                  //Don't need to check any more factors, so break
        }
    }
    if (isPrime)                    //If isPrime was never set to NO, i is prime
    {
        NSString *temp = [NSString stringWithFormat:@"%d ", i];
        primetext.text = [primetext.text stringByAppendingString:temp];
    }
} 
```

希望这可以帮助。

# c# - 将类属性转换为字符串列表

> ID：11618819
> 
> 赞同：7
> 
> 时间：2012-07-23T19:04:35.700
> 
> 标签：c#, .net, vb.net

如何将类的公共属性名称转换为字符串列表？语法最好在 VB.NET 中。

我试图做这样的事情：

```
myClassObject.GetType().GetProperties.ToList() 
```

但是，我需要一个 List(Of String)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-23T19:07:39.507

获取每个属性的名称？使用 LINQ 投影每个`PropertyInfo`使用 LINQ[`Select`](http://msdn.microsoft.com/en-us/library/bb548891)方法，选择[`MemberInfo.Name`](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.name.aspx)属性。

```
myClassObject.GetType().GetProperties().Select(p => p.Name).ToList() 
```

或者在VB中，我认为它会是：

```
myClassObject.GetType.GetProperties.Select(Function (p) p.Name).ToList 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:07:20.130

```
var propertyNames = myClassObject.GetType().GetProperties().Select(p => p.Name).ToList(); 
```

或者，如果您提前知道要使用的类型，您可以这样做：

```
var propertyNames = typeof(ClassName).GetProperties().Select(p => p.Name).ToList(); 
```

# mysql - SQL 获取聚合结果中的关联列

> ID：11618820
> 
> 赞同：1
> 
> 时间：2012-07-23T19:04:37.483
> 
> 标签：mysql, sql

考虑一下这张小桌子

```
Insert into Temp (key1, key2, value1, value2) VALUES
(10, 100, 20, 200),
(11, 101, 19, 199),
(12, 102, 21, 202); 
```

如果我跑

```
SELECT MAX(key1), MIN(key2) FROM Temp; 
```

我明白了

```
12, 100 
```

正如预期的那样。

我还想返回与这些键关联的值，例如

```
SELECT MAX(key1), value1-which-has-that-max-key, MIN(key2), value2-which-has-that-min-key FROM Temp; 
```

在这个例子中应该返回

```
12, 21, 100, 200 
```

我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:07:28.433

您可以使用子选择：

```
SELECT
    MAX(T1.key1) AS maxkey1,
    (SELECT value1 FROM Temp AS T2 WHERE T2.key1 = MAX(T1.key1)) AS value1,
    MIN(T1.key2) AS minkey2,
    (SELECT value2 FROM Temp AS T3 WHERE T3.key2 = MIN(T1.key2)) AS value2
FROM Temp T1 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!3/5f5bd/2)

请注意，如果您有多个具有相同最小值/最大值的键，这将失败。如果您可能遇到这种情况，您可能想要添加一个`ORDER BY ... LIMIT 1`所以选择其中一行而不是给出错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:43:57.793

或者，您可以使用两个派生表，每个表都将返回有序行集中的最顶层行。一个将按 的降序对其行集进行排序，`key1`另一个按 的升序对其行集进行排序`key2`。这就是我的意思：

```
SELECT
  max.key1,
  max.value1,
  min.key2,
  min.value2
FROM
  (SELECT key1, value1 FROM Temp ORDER BY key1 DESC LIMIT 1) max,
  (SELECT key2, value2 FROM Temp ORDER BY key2  ASC LIMIT 1) min
; 
```

可以[在 SQL Fiddle](http://sqlfiddle.com/#!2/5ca4c/1)找到“现场”演示。

如果可以（并且实际上恰好）有多行具有相同的最大值`key1`或相同的最小值`key2`，则此查询将起作用，但是，与 Mark Byers 关于他的解决方案所说的类似，我建议添加其他条件到 ORDER BY 以使结果（更多）可预测。

# javascript - 如果页面上存在 div，如何向 div 添加新的类和属性

> ID：11618822
> 
> 赞同：0
> 
> 时间：2012-07-23T19:04:44.597
> 
> 标签：javascript, jquery, html, visual-studio-2015

我需要在我的母版页上尝试查找是否存在 div 的 JavaScript 代码。如果是这样，它应该添加一个新类并添加一个新的 id 属性。

例如，如果页面有这个 div：

```
<div id="Top" class="toplink">abc..</div> 
```

然后 JavaScript 代码应该完全像这样：

```
<div id="Top" class="toplink adin" id-adi="114">abc..</div> 
```

div 内的代码应该保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:09:03.777

你不能这样做：

```
$('#Top').addClass("toplink adin") 
```

因为如果它不存在，那么它就不会添加一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:34:17.247

谢谢大家下面的代码为我工作

```
<script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.js" type="text/javascript"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
    if ($('.toplink').length > 0) {
        $('.toplink').addClass('adin').attr('data-aid', '114');
    }
});
</script> 
```

由 iamruss 回答

由于我是stackoverflow的[新手，如果页面上存在，我会在向div添加新类和属性时提出几乎相同的问题](https://stackoverflow.com/questions/11619742/add-new-class-and-attributes-to-div-if-it-exists-on-the-page)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:10:45.570

您尝试设置的属性无效，请使用`data-*`某人所说的内容。

```
 jQuery.fn.exists = function(){return this.length>0;}

    if ($('#Top').exists()) {
        $('#Top').addClass('adin').attr('data-adi', '114');
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:19:55.553

该`id-adi`属性不是有效的 HTML 属性，但如果您仍想设置它，请执行以下操作：

```
if ($("#Top").length) {
    $("#Top").addClass('adin').attr('id-adi', 114);
} 
```

[小提琴](http://jsfiddle.net/kCjqY/)

# registry - VB2010和访问windows注册表

> ID：11618824
> 
> 赞同：2
> 
> 时间：2012-07-23T19:04:49.407
> 
> 标签：registry, vb.net-2010

我在编写的 VB 程序以及在 64 位操作系统（如 Win2k8 或 Win2k3）中访问 Windows 注册表的 setup.exe 遇到了一些问题。

**第一部分：setup.exe 和 Windows 注册表** 的问题 首先我将解释 setup.exe 的问题。在安装期间，我有一个自定义操作在安装期间触发以将注册表更改为：

*HKLM/软件/Microsoft/Windows NT/CurrentVersion/WinLogin/Userinit。*

在 32 位操作系统上它工作正常，但在 64 位操作系统上它写入：

*HKLM/软件/WOW6432Node/Microsoft/Windows NT/CurrentVersion/Winlogon/Userinit*

我的问题是，当用户登录时，登录过程不会从该位置读取。我理解它为什么要访问 64 位注册表的 32 位部分。这是因为 setup.exe 是一个 32 位进程。我在任何地方都找不到如何将其设置为 64 位。也许所有 setup.exe 都是 32 位的，我不知道，因为我是创建安装程序的新手。关于如何解决这个问题的任何想法？

**第二部分：64位进程访问Windows注册表** 的问题第二个问题是当我的程序在用户登录后立即运行时。假​​设设置了一个注册表值，以防止用户运行“任务管理器”并能够杀死应用程序. 我知道规避 Windows 安全性可能是一种糟糕的编码实践，但这是我正在为我的公司编写的内部应用程序。

下面的代码是触发任务管理器锁定和解锁的函数。在 32 位系统上它工作得很好，它是在 64 位系统上不起作用。启用 UAC 时也会出现一些问题。我不希望用户被提示以管理员身份运行，并且也不知道该怎么做。有任何想法吗？

```
Private Sub taskMgrState(ByVal state As String)
    Dim hive As String = "HKEY_CURRENT_USER\"
    Dim systemSubKey As String = "Software\Microsoft\Windows\CurrentVersion\Policies\System"
    If state = "enabled" Then
        'enable task manager use
        'create the subkey for later use
        If My.Computer.Registry.GetValue(hive & systemSubKey, "DisableTaskMgr", Nothing) Is Nothing Then
            My.Computer.Registry.LocalMachine.CreateSubKey(systemSubKey)
        End If
        'set DisableTaskMgr valuename to 0 which disables blocking the running of task manager
        My.Computer.Registry.SetValue(hive & systemSubKey, "DisableTaskMgr", 0)
    ElseIf state = "disabled" Then
        'disable the use of the task manager while this app is running
        If My.Computer.Registry.GetValue(hive & systemSubKey, "DisableTaskMgr", Nothing) Is Nothing Then
            My.Computer.Registry.LocalMachine.CreateSubKey(systemSubKey)
        End If
        'set DisableTaskMgr valuename to 0 which disables blocking the running of task manager
        My.Computer.Registry.SetValue(hive & systemSubKey, "DisableTaskMgr", 1)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:11:42.920

要更改设置项目*目标平台在**解决方案资源管理器*中单击您的*ProjectName 部署项目 Proeprties*（通常是顶部的第二个项目），然后导航到其*属性*选项卡并找到**目标平台**它会自动*x86*将其更改为*x64*您现在将拥有不过要发布 2 个版本。:)

# php - 如何找到2个表之间的mysql差异

> ID：11618826
> 
> 赞同：1
> 
> 时间：2012-07-23T19:04:54.550
> 
> 标签：php, mysql, database, join

Pictures 和 Seen_pictures，将 Pictures 表中的图片显示给用户，然后将该图片（它在表中的 ID）移动到 Seen_Pictures，并将 Pictures 表中的新图片显示给用户。我需要一个 mysql 方案来输出 Pictures 和 Seen_pictures 表之间的差异，这样我就知道用户没有看到哪些图片，并且可以输出它们。

到目前为止我有这个，但它只适用于 1 个用户，我需要它来考虑许多不同的用户：

```
$result = mysqli_query(
    $link, 

    "SELECT o_Pics.Pic.PicID 
    FROM o_Pics.Pic 
    LEFT JOIN o_SeenPics.Seen ON o_Pics.Pic.PicID=o_SeenPics.Seen.PicID 
    WHERE NOT o_Pics.Pic.ID='".$ID."' AND o_SeenPics.Seen.PicID IS NULL"
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:10:43.947

怎么样

```
SELECT p.p_id FROM Picture p WHERE p.p_id NOT IN 
   (SELECT s.p_id FROM Seen_Picture s WHERE s.u_id = "$user_id")

Picture
p_id(Primary Key) picture

Seen_Picture
id(Primary Key) u_id p_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:11:14.130

我认为您可以对原始查询进行一些小的修改以获得您想要的内容：

```
SELECT s.UserId, p.PicID 
FROM o_Pics.Pic p LEFT JOIN
     o_SeenPics.Seen s
     ON p.PicID = s.PicID and
        p.OwnerUserId != s.UserId
where s.PicId is null and p.OwnerUserId != s.UserId 
```

这假设 pic 中包含所有者的用户 ID。它还返回未看到图片的用户 ID。

# django - 与 Django 集成的好 JavaScript 框架？

> ID：11618829
> 
> 赞同：2
> 
> 时间：2012-07-23T19:05:08.980
> 
> 标签：django, node.js, backbone.js

我正在构建一个新的网络应用程序。它将在 Django 中，但我现在正在寻找一个好的前端 javascript 库/框架来使用。

我知道 JQuery，但是 Backbone.js 或 node.js 呢？想法？

我正在寻找过去的 JQuery，因为 MVC JavaScript 库会很好用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:24:52.240

你所说的东西都有不同的目的，我不确定它们中的任何一个是否与你所说的你想要的完全匹配。

如您所知，jQuery 完全是关于客户端呈现和交互，在浏览器中实现。

Django —— 一个适用于 pythonistsas 的优秀 MVC 框架——是你列表中唯一一个将 MVC 方法编入代码的东西。

Node.js 真的不是前端。它“只是” javascript (V8) 移植到事件循环上。真的。而已。您的浏览器可能正在运行 V8（Chrome 可以），但不会运行 node.js。Node.js 是关于服务器端 javascript 的优点。由于您已经在 Django 中做后端，因此您已经致力于 python。所以 node.js 可能是; ta考虑。

但是，如果您决定改用 javascript 来开发您的应用程序，这里有一些您可能想知道的事情。Node.js在服务器上提供了*很多东西。*虽然 node.js 本身主要在网络和文件系统层上提供了可靠的 API 抽象，但生态系统是*惊人的*。使用最广泛的“web 后端框架”是 express。与您习惯使用 Django 的文档相比，这些文档有点粗糙，但您可以构建出色的网站。没有内置的 MVC 模型（我知道，但今天可能真的会改变），并且持久性是由令人眼花缭乱的数据库模块数组提供的，几乎适用于您想要使用的每个商店。如果你问 node.js 的支持者，我怀疑他们中至少有几个对“旧的”MVC 方法不是很感兴趣。

我对 Backbone.js 了解不多，但我记得它的重点是支持 ReSTful 实现并帮助您避免 javascript 中间件很容易变得混乱的那种混乱。（当然，在 javascript 中可以变得优雅；但更容易变得混乱，尤其是在添加异步事件时。）

我不知道为什么你的问题被叮了，我希望这至少能提供一些思考。祝你好运！

# android - Android 应用程序中的异常

> ID：11618837
> 
> 赞同：0
> 
> 时间：2012-07-23T19:05:35.220
> 
> 标签：android, android-layout, android-fragments, android-fragmentactivity

我正在为平板电脑和手机开发一个安卓应用程序。我编写了自己的片段类及其相应的活动。但是当我运行应用程序时，我收到以下错误。

```
LogCat

07-23 18:56:10.200: E/AndroidRuntime(691): FATAL EXCEPTION: main
07-23 18:56:10.200: E/AndroidRuntime(691): java.lang.RuntimeException: Unable to start activity        ComponentInfo{com.fxpal.unity.android/com.fxpal.unity.android.MainActivity}: android.view.InflateException:   Binary XML file line #7: Error inflating class fragment
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.os.Looper.loop(Looper.java:137)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.ActivityThread.main(ActivityThread.java:4424)
07-23 18:56:10.200: E/AndroidRuntime(691):  at java.lang.reflect.Method.invokeNative(Native Method)
07-23 18:56:10.200: E/AndroidRuntime(691):  at java.lang.reflect.Method.invoke(Method.java:511)
07-23 18:56:10.200: E/AndroidRuntime(691):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-23 18:56:10.200: E/AndroidRuntime(691):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-23 18:56:10.200: E/AndroidRuntime(691):  at dalvik.system.NativeStart.main(Native Method)
07-23 18:56:10.200: E/AndroidRuntime(691): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
07-23 18:56:10.200: E/AndroidRuntime(691):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.Activity.setContentView(Activity.java:1835)
07-23 18:56:10.200: E/AndroidRuntime(691):  at com.fxpal.unity.android.MainActivity.onCreate(MainActivity.java:20)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.Activity.performCreate(Activity.java:4465)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-23 18:56:10.200: E/AndroidRuntime(691):  ... 11 more
07-23 18:56:10.200: E/AndroidRuntime(691): Caused by: java.lang.NullPointerException
07-23 18:56:10.200: E/AndroidRuntime(691):  at com.fxpal.unity.android.EveryoneAdapter.<init>(EveryoneAdapter.java:24)
07-23 18:56:10.200: E/AndroidRuntime(691):  at com.fxpal.unity.android.GridFragment.onCreateView(GridFragment.java:21)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:806)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1010)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.FragmentManagerImpl.addFragment(FragmentManager.java:1108)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.app.Activity.onCreateView(Activity.java:4243)
07-23 18:56:10.200: E/AndroidRuntime(691):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673)
07-23 18:56:10.200: E/AndroidRuntime(691):  ... 21 more 
```

这是我的 EveryoneAdapter 类

```
 package com.fxpal.unity.android;

  import java.util.ArrayList;

  import android.content.ComponentName;
  import android.content.Context;
  import android.content.Intent;
  import android.view.View;
  import android.view.View.OnClickListener;
  import android.view.ViewGroup;
  import android.widget.BaseAdapter;
  import android.widget.GridView;
  import android.widget.ImageView;

 public class EveryoneAdapter extends BaseAdapter {
private Context mContext;
private UnityMobileApp appCtx;
private ArrayList<String> mNamesList;

public EveryoneAdapter(Context c, UnityMobileApp a) {
    mContext = c;
    appCtx = a;
    mNamesList = new ArrayList<String>(a.everyone.keySet());
}

public int getCount() {
    System.out.println(mNamesList.size());
    return mNamesList.size();
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(final int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    Person p = appCtx.everyone.get(mNamesList.get(position));

    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);

        imageView.setLayoutParams(new GridView.LayoutParams(66, 66));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);

    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageBitmap(p.getRoundedImage(Consts.SMALL_USER_IMAGE_SIZE, Consts.SMALL_USER_IMAGE_BORDER)); 
    imageView.setContentDescription(p.getUsername());
  // example adapter  imageView.setImageResource(mThumbIds[position]);
    final String mUsername = p.getUsername();
    imageView.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            Intent i = new Intent();
            String pkg_name = EveryoneAdapter.class.getPackage().getName();
            i.setComponent(new ComponentName(pkg_name, pkg_name + ".IndividualViewActivity"));
            i.putExtra(Consts.EXTRA_USERNAME, mUsername);
            mContext.startActivity(i);
        }
    });

    return imageView;
}
} 
```

我的 GridFragment 课程是

```
 package com.fxpal.unity.android;

 import com.fxpal.unity.android.EveryoneAdapter;
 import android.app.Fragment;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.GridView;

 public class GridFragment extends Fragment{
public UnityMobileApp appCtx;
public EveryoneAdapter everyoneAdapter;
@Override
 public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)    {
    View view = inflater.inflate(R.layout.gridview,container,false);
   if(everyoneAdapter == null || everyoneAdapter.getCount()!=appCtx.everyone.size()){
    GridView gridView = (GridView) view.findViewById(R.id.gridView);
    gridView.setAdapter(new EveryoneAdapter( view.getContext(),appCtx));
    }// uses the view to get the context instead of getActivity().
    else
    {
        everyoneAdapter.notifyDataSetChanged();
    }
    return view;
}
 public void onActivityCreated(Bundle savedInstanceState) {
     super.onActivityCreated(savedInstanceState);
 }

} 
```

我的 IndividualViewFragment 类在下面

```
 package com.fxpal.unity.android;

 import com.fxpal.unity.android.Person;
 import android.app.Dialog;
 import android.app.Fragment;
 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.net.Uri;
 import android.os.Bundle;
 import android.os.Handler;
 import android.os.Message;
 import android.preference.PreferenceManager;
 import android.view.LayoutInflater;
 import android.view.Menu;
 import android.view.MenuItem;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.view.ViewGroup;
 import android.widget.Button;
 import android.widget.ImageView;
 import android.widget.LinearLayout;
 import android.widget.TableLayout;
 import android.widget.TableRow;
 import android.widget.TextView;
 import android.widget.Toast;

  public class IndividualViewFragment extends Fragment {

private static final String DB_TAG = "IndividualView";

private ImageView userImage;
private Person personToDisplay;
protected String numToCall, numtype;
//private DatabaseHelper db;

//private UnityMobileApp appCtx;

protected static final int DIALOG_VIEW_CALENDAR = 2;    

protected static final int MESSAGE_CONNECTION_ERROR_TOAST = 0;
//private static final String DEBUG_TAG = "unity.IndividualViewActivity";

private final Handler mHandler = new Handler() {
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case MESSAGE_CONNECTION_ERROR_TOAST:
            Toast.makeText(getActivity(), Consts.CONNECTION_ERROR_MESSAGE, Toast.LENGTH_SHORT).show();
            break;
        }
    }
};
private SharedPreferences prefs;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
super.onActivityCreated(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    View view = (LinearLayout) inflater.inflate(R.layout.individual_view, container, false);

    //db = new DatabaseHelper(appCtx);
   // appCtx = (UnityMobileApp) getActivity().getApplication();

    userImage = (ImageView)getView().findViewById(R.id.individualUserImage);
    return view;

}

public void onPause(){
    super.onPause();
}

public void onDestroy(){
    super.onDestroy();
    //doUnbindService();
    //db.close();
}

public void onResume(){
    super.onResume();

    //personToDisplay = appCtx.getEveryone().get(username);
    updateView();
    //updateInfo();

}

private void updateView(){

    userImage.setImageBitmap(personToDisplay.getRoundedImage(Consts.LARGE_USER_IMAGE_SIZE, Consts.LARGE_USER_IMAGE_BORDER));

}

} 
```

我的清单文件在下面

```
 <?xml version="1.0" encoding="utf-8"?>
  <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.fxpal.unity.android"
  android:versionCode="1"
  android:versionName="1.0" >

 <uses-sdk android:minSdkVersion="15" />
 <application
    android:icon="@drawable/unity_icon"
    android:label="@string/app_name" 
    android:name=".UnityMobileApp"
    android:theme="@android:style/Theme.Holo" android:logo="@drawable/fuji_xerox_logo_125">
    <activity
        android:label="@string/app_name"
        android:name=".MainActivity" >
         <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".IndividualViewActivity"
        android:label="@string/app_name" android:theme="@style/PageStyle">
    </activity>
    <service android:name=".ReportingService" />
    <receiver android:name=".StartupReceiver"/>
   </application>

   </manifest> 
```

请帮我。我无法找到问题所在。

问候， 拉克什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:36:03.827

你的`Adapter`构造函数：

```
public EveryoneAdapter(Context c, UnityMobileApp a) {
    mContext = c;
    appCtx = a;
    mNamesList = new ArrayList<String>(a.everyone.keySet()); // Here you call a.everyone
} 
```

但是当您调用该构造函数时：

```
gridView.setAdapter(new EveryoneAdapter( view.getContext(),appCtx)); // appCtx has not been defined 
```

因此，在您的构造函数中，您实际上是在调用`appCtx.everyone.keySet()`. 由于`appCtx`是`null`（尚未由应用程序设置），它将崩溃。您需要`appCtx`正确创建或找到您的。

# wordpress - 了解管理面板页面路径 [wordpress]

> ID：11618841
> 
> 赞同：0
> 
> 时间：2012-07-23T19:05:45.060
> 
> 标签：wordpress

小路：

```
wp-admin/admin.php?page=nggallery-manage-gallery 
```

到目前为止，我认为参数“page”的值是要加载的文件的路径（在插件目录下）。

尽管在上述情况下，没有名为“nggallery-manage-gallery”的插件。这意味着我的理解是错误的。

有人可以向我解释一下 wordpress 如何根据“页面”参数决定在管理面板中加载哪个页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:43:14.090

每当您在插件或文件中使用[add_menu_page()](http://codex.wordpress.org/Function_Reference/add_menu_page)或[add_option_page()](http://codex.wordpress.org/Function_Reference/add_options_page)时，都会创建这些类型的页面`functions.php`。

这`nggallery-manage-gallery`并不意味着有一个具有该名称的插件。此名称只是[add_menu_page()](http://codex.wordpress.org/Function_Reference/add_menu_page)或[add_option_page()](http://codex.wordpress.org/Function_Reference/add_options_page)分配的 slug 。

如果您在您`functions.php`和您的插件文件夹中搜索`nggallery-manage-gallery`，您将找到该页面的定义位置。

# php - 我无法按类别 ID 对产品集合进行排序

> ID：11618844
> 
> 赞同：1
> 
> 时间：2012-07-23T19:05:53.817
> 
> 标签：php, magento, magento-1.6

我有几个类别：男士、女士、男士、女士和优惠。

每个产品都分配给男士、女士、男士或女士类别。

有些产品被分配到“优惠”类别。

我需要检索每个“优惠”产品，但按其他类别排序，我的意思是：

优惠 -> 男士产品 -> 女士产品 -> 男士产品 -> 女士产品

```
$collection = Mage::getResourceModel('catalog/product_collection')
        ->addAttributeToSort('category_ids', 'ASC')
        ->addAttributeToSelect(array('name', 'sku', 'status', 'visibility', 'is_saleable'));

    foreach ($_productCollection as $_product) {
        echo "<!-- "  . $_product->getName() . '-->';
    } 
```

现在我正在让产品按“优惠”类别显示，但是这些产品是按名称属性排序的，我需要在名称之前按类别排序的产品。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:54:10.323

以下查询将返回所有产品并将它们与类别产品关系表连接起来。它还对 category_id 上的记录和类别中的位置进行排序。

```
SELECT `e`.* 
FROM `catalog_product_entity` AS `e` 
LEFT JOIN catalog_category_product ON(entity_id=product_id)
ORDER BY category_id AND position; 
```

唯一可能发生的是您遇到重复的产品，因为产品可能属于女士和女士产品类别。虽然这可以通过`x.catetgory_id`从查询中删除并添加 a`DISTINCT`来过滤重复项来简单地防止。

下面只是一个集合应该是什么样子的快速模型。您仍然需要对此进行测试。希望这对你来说是一个好的方向的指导。

```
$collection = Mage::getResourceModel('catalog/product_collection')
    ->addAttributeToSelect('*')
    ->joinTable('catalog/category_product', 'entity_id=product_id', array('product_id' => 'product_id'), null, 'left')
    ->addAtributeToSort('category_id'); 
```

# symfony - 编译失败：appstageUrlMatcher.php 中的括号不匹配

> ID：11618850
> 
> 赞同：1
> 
> 时间：2012-07-23T19:06:28.667
> 
> 标签：symfony

在我的生产系统上，symfony 路由器出现错误：

> 警告：preg_match() [function.preg-match]：编译失败：/mypath/app/cache/prod/appprodUrlMatcher.php 第 205 行中偏移 60 处的括号不匹配

而在本地机器和另一台服务器上它工作正常。

我在缓存中挖掘，路线的模式不同：

在我的开发服务器上工作：

```
#^/hotels/(?<groupId>[^/\\-]+)\\-(?<groupName>[^\\-]+)$#s 
```

不从事生产：

```
#^/hotels(?:/(?<groupId>[^/\\-]+)(?:\\-(?<groupName>[^\\-]+))?)?)?$#s 
```

路线是：

```
hotel:
    pattern: /hotels/{groupId}-{groupName}
    defaults: { _controller: "MyBundle:Hotel:hotel", requirements:{ groupName: "[a-zA-Z1-9\+\/]+" } } 
```

我在 github 上阅读了一些问题，即在使用旧的 PCRE 时可能会出现类似的错误。 [https://github.com/symfony/symfony/issues/4093](https://github.com/symfony/symfony/issues/4093)
你的我的似乎足够新：PHP 5.3.6 和 PCRE 版本 8.11。
我在 Solaris 上。

这些模式是由 symfony 生成的，对吧？那么，为什么模式不同呢？
毕竟为什么它不起作用？有人有任何线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:44:43.340

这不是 symfony 问题，而是这台 Solaris 机器上 PHP 5.3.6 版本中的错误。
常量 INF 返回了*float(0)*，这炸毁了路由。

在此处查看更多信息：[php INF 的值为零](https://stackoverflow.com/questions/11667512/php-inf-has-value-zero)

# powershell - 删除 temp 文件夹中的所有内容，删除 temp，然后创建一个新 temp

> ID：11618859
> 
> 赞同：0
> 
> 时间：2012-07-23T19:06:41.307
> 
> 标签：powershell, code-cleanup, virtual-server

我有一个正在处理的脚本，旨在删除临时文件夹（在 C 盘中），删除临时文件夹中的所有内容，然后创建一个新的临时文件夹。我已经创建了删除所有内容的脚本，但是我不确定你如何使用 Powershell 创建一个新的临时文件夹。想知道是否有人可能知道如何在 Powershell 中创建新的临时文件夹。

```
#remove all temporary files
if($serverVersion.name -like "*2003*"){
    $dir = "\\$server" + '\C$\temp'
}
elseif($serverVersion.name -like "*2008*"){
    $dir = "\\$server" + '\C$\Windows\Temp'
    }

$tempArray = @()
foreach ($item in get-childitem -path $dir){
    if ($item.name -like "*.tmp"){
        $tempArray = $tempArray + $item
        }
    }

for ($i = 0; $i -le $tempArray.length; $i++){
    $removal = $dir + "\" + $tempArray[$i]
    remove-item $removal -force -recurse 
    } 
```

我是否也正确删除了临时文件夹，以及创建一个新的临时文件夹需要做什么？

编辑：我已经根据人们的建议更新了我的代码，想知道这是否会产生预期的效果，以及是否有办法进一步减少它：

```
if($serverVersion.name -like "*2003*"){
    $dir = "\\$server" + '\C$\temp'
    remove-item $dir -force -recurse
    new-item -path "\\$server" + '\C$\Windows\temp' -Type Directory
}
elseif($serverVersion.name -like "*2008*"){
    $dir = "\\$server" + '\C$\Windows\Temp'
    remove-item $dir -force -recurse
    New-Item -Path "\\$server" + '\C$\Windows\Temp' -Type Directory 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:13:34.960

使用`New-Item`cmdlet 创建文件夹：

```
New-Item -Path "\\$server\admin$\Temp" -Type Directory 
```

您还可以使用“md”别名（指向 mkdir 函数）：

```
md "\\$server\admin$\Temp" -Force 
```

更新：

这就是我要做的：删除目录。检查美元？变量（如果最后一个命令成功则返回 $true），如果命令没有成功完成 - 创建 Temp 文件夹，否则一定有错误并且 Temp 目录仍然存在。

```
Remove-Item  -Path "\\$server\admin$\Temp" -Force -Recurse

if($?)
{
    New-Item -Path "\\$server\admin$\Temp" -Type Directory 
} 
```

ps 您也可以将 Force 开关添加到 New-Item（或“md”）并创建文件夹，而不管上一个命令的结果如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:54:39.763

为什么不简单地使用递归删除项删除临时文件夹

```
# Remove recursively
Remove-Item  -Path "\\$server\admin$\Temp" -Force -Recurse
# Create another one
New-Item -Path "\\$server\admin$\Temp" -Type Directory 
```

# javascript - JS CoffeeScript - 方法中的相同随机数

> ID：11618861
> 
> 赞同：2
> 
> 时间：2012-07-23T19:07:08.307
> 
> 标签：javascript, object, random, coffeescript

我在 coffeescript 中创建了一个类，它带有一个生成 x 和 y 实例变量的 randomInt 方法。但是，当我从此类创建对象时，x 和 y 值是不同的，但两者都是一致的。

这是演示的代码：http: [//jsfiddle.net/paulmason411/BvPBG/](http://jsfiddle.net/paulmason411/BvPBG/)

```
class Shape

  getRandomInt = (min, max) ->
    Math.floor(Math.random() * (max - min + 1)) + min

  y: getRandomInt(1,100)
  x: getRandomInt(1,100)

shape1 = new Shape
shape2 = new Shape

alert(shape1.x)
alert(shape2.x)

alert(shape1.y)
alert(shape2.y)​ 
```

我需要每个警报值都不同。

我搜索了一个解决方案，并且在其他编程语言中他们使用 srand() 但是 js 没有这个本机功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:19:55.130

`x`创建and的“实例变量” `y`（`@`使它们成为这样的变量）：

```
class Shape

  constructor: ->
    @x = Shape::getRandomInt(1,100)
    @y = Shape::getRandomInt(1,100)

  getRandomInt: (min, max) ->
    Math.floor(Math.random() * (max - min + 1)) + min

shape1 = new Shape
shape2 = new Shape

console.log(shape1.x)
console.log(shape2.x)
console.log(shape1.y)
console.log(shape2.y) 
```

其中打印：

```
48
13
9
86
```

请注意，该`getRandomInt`功能已添加到`Shape.prototype`，并且`Shape::getRandomInt(1,100)`与 相同`Shape.prototype.getRandomInt(1,100)`。

# git - 忽略 git 显示错误

> ID：11618862
> 
> 赞同：1
> 
> 时间：2012-07-23T19:07:19.830
> 
> 标签：git

我正在编写一个调用`git show`了很多次的脚本。有时，它会调用`git show $COMMIT:$FILE`. 这将向终端打印错误。通常这将是正确的事情，但目前，我并不为此烦恼。（即使发生这种情况，脚本也能正常工作）。那么有没有办法抑制来自 git 的错误？我找不到旗帜……</p> `$FILE``$COMMIT`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:27:06.540

我认为没有`git show`允许这样做的标志。

只需重定向脚本中的错误输出：

```
git show $COMMIT:$FILE 2> /dev/null 
```

# jquery - 当下拉选项聚焦时调用 Slidetoggle

> ID：11618864
> 
> 赞同：0
> 
> 时间：2012-07-23T19:07:21.283
> 
> 标签：jquery

[http://jsfiddle.net/EhTJF/](http://jsfiddle.net/EhTJF/)

链接是我遇到的问题的一个例子。当一个元素悬停在上面时，会调用 slidetoggle() 来显示一个下拉列表。当试图在 ddl 中选择一个选项时，会再次调用 slidetoggle() 并强制 ddl 和切换的元素折叠。

关于我做错了什么的任何想法？

*编辑

缩进的功能是允许用户从下拉列表中选择一个选项，然后允许元素自动向上切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:29:28.293

hover() 方法有 2 个签名。第一个参数有 2 个参数：一个用于在鼠标进入元素时调用的函数，第二个用于在退出时调用的函数。第二个签名只接受一个为进入和退出事件调用的函数。在您当前的示例中，您对悬停输入和悬停退出使用相同的功能；这就是为什么您的下拉元素被隐藏的原因。

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

如果您希望下拉菜单在第一次悬停后保持打开状态，我有这个示例：

[http://jsfiddle.net/gwZbj/4/](http://jsfiddle.net/gwZbj/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:40:15.787

这有点复杂，但可能是这样的：

```
$(document).ready(function () {
    var timer;
    $('.dropdown').on({
        mouseenter: function () {
            var elm = $(this).find('.sub_navigation');
            if (!elm.is(':visible')) {
                elm.slideDown(100);
            }else{
                clearTimeout(timer);
            }
        },
        mouseleave: function() {
            var elm = $(this).find('.sub_navigation');
            timer = setTimeout(function() {
                elm.slideUp(100);
            }, 300);
        }
    });
});​ 
```

[小提琴](http://jsfiddle.net/EhTJF/2/)

# c# - 验证构造函数参数

> ID：11618865
> 
> 赞同：1
> 
> 时间：2012-07-23T19:07:22.033
> 
> 标签：c#, exception-handling, constructor

我有一个有两个构造函数的类：

```
MyObjGroup(MyObj primaryObj)
MyObjGroup(MyObj primaryObj, MyObj secondaryObj) 
```

`primaryObj`总是需要的。`secondaryObj`不是。显然，您可以调用`MyObjGroup(myObj)`or`MyObjGroup(myObj, null)`并得到相同的结果。

我首先考虑做的是在我的第一个 ctor 中，检查`null`并`primaryObj`抛出一个`ArgumentNullException`. 我还需要在我的辅助 ctor 中执行此操作，复制代码，因此我考虑将其移至属性设置器。

```
private MyObj _primaryObj;
public MyObj PrimaryObj
{
    get {return _primaryObj;}
    private set
    {
       if(value == null) throw new ArgumentNullException("value", "PrimaryObj cannot be null");
        _primaryObj = value;
    }
 } 
```

但是，属性中的参数名称`value`在 ctor 中被调用`primaryObj`。另一个演员（天堂禁止）可能会称它为别的名字，所以不能保证你有正确的名字。

这里推荐的行动方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:10:10.037

检查第一个构造函数中的值，并让第二个构造函数对其进行传递以避免重复代码。

```
public MyObjGroup(MyObj primaryObj) 
{
    if(primaryObj == null) 
        throw new ArgumentNullException("value", "PrimaryObj cannot be null");
}

public MyObjGroup(MyObj primaryObj, MyObj secondaryObj) 
    : this(primaryObj)
{
    SecondaryObj = secondaryObj;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:36:02.993

我总是将逻辑放在尽可能少的构造函数中，所以我会这样做：

```
public MyObjGroup(MyObj primaryObj) : this(primaryObj, null) { }

public MyObjGroup(MyObj primaryObj, MyObj secondaryObj) {
    if (primaryObj == null) {
        throw new ArgumentNullException("value", "PrimaryObj cannot be null");
    }
    SecondaryObj = secondaryObj;
    PrimaryObj = primaryObj;
} 
```

# android - 添加编辑文本以搜索 ListView 中的项目

> ID：11618870
> 
> 赞同：0
> 
> 时间：2012-07-23T19:07:33.220
> 
> 标签：android, list, listview, search

您好，我是 android 新手，我正在尝试添加一个搜索字段来搜索列表视图中的项目。我尝试了几种方法，包括 TextWatcher，但我无法让它成功运行

```
package com.example.permission;

import java.util.ArrayList;
import java.util.Collections;

import android.app.Activity;
import android.content.pm.ApplicationInfo;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.View;
import android.widget.AdapterView;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Toast;

public class MainActivity extends Activity {
    private ListView mListAppInfo;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // set layout for the main screen
        setContentView(R.layout.layout_main);

        // load list application
        mListAppInfo = (ListView)findViewById(R.id.lvApps);
        EditText search = (EditText)findViewById(R.id.EditText01);

        mListAppInfo.setTextFilterEnabled(true);

        // create new adapter
        AppInfoAdapter adapter = new AppInfoAdapter(this, Utilities.getSystemFilteredApplication(this), getPackageManager());

        // set adapter to list view  
        mListAppInfo.setAdapter(adapter);

        TextWatcher filterTextWatcher = new TextWatcher() {

            public void afterTextChanged(Editable s) {

            }

            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
               adapter.getFilter().filter(s); //Filter from my adapter
               adapter.notifyDataSetChanged(); //Update my view
            }

        };

        // implement event when an item on list view is selected
        mListAppInfo.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView parent, View view, int pos, long id) {
                // get the list adapter
                AppInfoAdapter appInfoAdapter = (AppInfoAdapter)parent.getAdapter();
                // get selected item on the list
                ApplicationInfo appInfo = (ApplicationInfo)appInfoAdapter.getItem(pos);
                // launch the selected application
                //Utilities.launchApp(parent.getContext(), getPackageManager(), appInfo.packageName);
                Utilities.getPermissions(parent.getContext(), getPackageManager(), appInfo.packageName);
                //Toast.makeText(MainActivity.this, "You have clicked on package: " + appInfo.packageName, Toast.LENGTH_SHORT).show();
            }
        });

    }
} 
```

编辑：试图实现你的例子，但似乎无法正确，我无法使用我的 getFilter() 方法

```
AppInfoAdapter adapter = new AppInfoAdapter(this, Utilities.getSystemFilteredApplication(this), getPackageManager()); 
```

AppInfoAdapter 类型的方法“getFilter()”未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:12:58.030

绝对不是有史以来最好的代码，但你可以看看我的实现，它运行得很好：

第 252 行：[https ://github.com/iRail/BeTrains-for-Android/blob/master/src/tof/cv/mpp/StationPickerActivity.java](https://github.com/iRail/BeTrains-for-Android/blob/master/src/tof/cv/mpp/StationPickerActivity.java)

还有这个类：[https ://github.com/iRail/BeTrains-for-Android/blob/master/src/tof/cv/mpp/Utils/FilterTextWatcher.java](https://github.com/iRail/BeTrains-for-Android/blob/master/src/tof/cv/mpp/Utils/FilterTextWatcher.java)

# fonts - 仅指定系列时，如何找出 gnuplot 选择的字体？

> ID：11618873
> 
> 赞同：5
> 
> 时间：2012-07-23T19:07:40.323
> 
> 标签：fonts, gnuplot

我在 gnuplot 中使用 pngcairo 终端来生成图像。指定终端时，字体设置为“sans,9”。如何判断选择了哪种特定字体进行渲染？

终端命令：设置终端 pngcairo 字体 "sans,9" 大小 1500,1000

（编辑）更多信息：安装在 Windows 7 操作系统下。我只需要在 gnuplot 4.4.4 中找到给定语句使用的字体，该字体用于创建许多绘图。gnuplot 4.6.0 决定为同一语句使用不同的字体，实际上不可能重新渲染所有早期的绘图以匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:50:00.903

我创建了一个文件`test.gp`

```
set terminal pngcairo font "sans,9" size 1500,1000
set output "test.png"
plot sin(x) 
```

在下运行 gnuplot`strace`

```
strace -o st.out gnuplot test.gp 
```

grep

```
grep 'open.*/usr/share/font.*' st.out 
```

给我 ( `Linux 3.0.0-22-generic #36-Ubuntu`)

```
open("/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans.ttf", O_RDONLY) = 5 
```

# iphone - 从 observeValueForKeyPath 调用方法。

> ID：11618876
> 
> 赞同：2
> 
> 时间：2012-07-23T19:07:56.980
> 
> 标签：iphone, objective-c, ios, key-value-observing

这是我第一次使用 KVO，我马上就卡住了。问题是，当调用 observeValueForKeyPath 时，我正在调用同一个类中的另一个方法。该方法只是显示一个警报视图。我认为简单的事情，但警报视图不显示。

```
- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object 
                     change:(NSDictionary *)change context:(void *)context
{
    [self beginUpdate];
}

 -(void)beginUpdate
 {
     NSLog(@"Check!");
     UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"message" message:@"Hi" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
     [alert show];
 } 
```

显示日志消息。仅当我从observeValueForKeyPath 以外的任何其他方法调用它时，才会显示警报消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T19:24:59.427

据我所知，`observeValueForKeyPath:`在修改观察对象的线程的上下文中调用。另一方面，对 UI 的更改只能在主线程上完成。尝试

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self beginUpdate];
}); 
```

或者

```
[self performSelectorOnMainThread:@selector(beginUpdate) withObject:nil waitUntilDone:NO] 
```

以确保`UIAlertView`在主线程上创建。

# php - PHPExcel在主页中显示垃圾

> ID：11618878
> 
> 赞同：1
> 
> 时间：2012-07-23T19:08:14.493
> 
> 标签：php, jquery, ajax, pdf, phpexcel

我需要生成一个 PDF 文件，其中包含从数据库中获取的一些信息，我正在使用 PHPExcel 来执行此操作，但事情是这样的，当我单击“报告”按钮时，我会获取所有信息并将其放入进入 PDF，我的页面中有很多“垃圾”，这些垃圾就像您尝试用记事本打开 PDF 时一样，它只显示随机符号。

这是我的做法

我正在使用`$.ajax`调用将所有信息显示到表单中：

```
$.ajax({
    // gets all the information and puts them into the form and several tables
}); 
```

然后我向按钮添加一个事件处理程序，`report` 以便我将请求 id 发送到一个 php 脚本，该脚本将收集必要的信息来填写报告

```
report.on('click',function(){       
    $.ajax({
        url  : '../../php/reports/requestReport.php',
        type : 'post',
        data : {'idRequest' : id },
        dataType : 'json',
        success : function(response){
            console.log(response);
        },
        error : function(response){
            if(response.responseText != undefined)
                $('body').append(response.responseText);            
            console.warn(response);
        }
    }); 
}); 
```

在我的 php 文件中，我有这样的东西：

```
<?php
    require '../functions.php';
    require '../classes/PHPExcel.php';

    if(isset($_POST['idRequest']))
        $idRequest = $_POST['idRequest'];
    else{
        $idRequest = false;
        echo json_encode(array("ExitCode"=>1,"Message"=>"idRequest Not Received","Location"=>"requestReport.php"));
    }

if($idRequest){
try{
    // get all the data
    // save the request and send it to the report
    $excel = new PHPExcel();
    //Initializing
    $excel->getProperties()->setCreator("TTMS")
                         ->setLastModifiedBy("TTMS")
                         ->setTitle("Request update $idRequest");

    $excel->setActiveSheetIndex(0)
                ->setCellValue('C1', 'Request For Q.A. / Q.C. / Testing');

    // Rename worksheet
    $excel->getActiveSheet()->setTitle("$idRequest");

    // Set active sheet index to the first sheet, so Excel opens this as the first sheet
    $excel->setActiveSheetIndex(0);

    // Redirect output to a client’s web browser (PDF)
    header('Content-Type: application/pdf');
    header('Content-Disposition: attachment;filename="Update_Request_'.$idRequest.'.pdf"');
    header('Cache-Control: max-age=0');

    $objWriter = PHPExcel_IOFactory::createWriter($excel, 'PDF');
    $objWriter->save('php://output');
} catch(PDOException $ex){
    echo json_encode(array("ExitCode"=>2,"Message"=>$ex->getMessage(),"Location"=>"requestReport.php PDOException"));
} 
```

长话短说，我在表单所在的页面上得到了垃圾。我认为这与我正在执行此操作有关，`ajax`但我需要这样做，因此`echo`'si 必须报告我的代码中的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:12:49.300

将所有输出写入 HTML 文件，然后使用 wkhtmltopdf -> [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)将其转换为 PDF。效果很棒！

下面是用于创建 html 文件的代码：

```
if (!$handle = fopen('/path/to/folder/your_file.html', 'w')) {
     die("Cannot open file for write");
}

$data_string = "<html><body></body></html>"; //all your html output goes here, formatted correctly, etc

// Write somecontent to our opened file.
if (fwrite($handle, $data_string) === FALSE) {
    die("Cannot write to file");
} 
```

然后，一旦成功，您将其转换为 PDF，然后删除旧的 html 文件

```
 // convert to PDF
    $output = shell_exec('wkhtmltopdf --page-size Letter /path/to/folder/your_file.html /path/to/folder/your_file.pdf');
    if (strpos($output,'Error') == false){
        $output = shell_exec('rm /path/to/folder/your_file.html');
    }else{
        die("error creating pdf, please contact IT administrator.");
    } 
```

现在您的 PDF 位于该位置 ->`/path/to/folder/your_file.pdf`您可以让用户下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:01:46.873

您正在现有的 HTML 页面中编写 PDF 输出

```
$('body').append(response.responseText); 
```

浏览器假定 HTML 页面中显示的所有内容都是 HTML 标记，而不是二进制数据流。

如果成功，将输出定向到新的浏览器窗口。

# c# - C#类型转换，如何避免错误？

> ID：11618887
> 
> 赞同：3
> 
> 时间：2012-07-23T19:09:11.783
> 
> 标签：c#, asp.net

一位同事有一个对象，上面有一堆通用列表集合。列表中的每种类型都实现了一个给定的接口。他希望能够创建一个包含所有其他列表的列表，这样他就可以循环并调用对象实现的方法。下面是一个简单的例子。

```
 List<Dx> dxs = new List<Dx>();
 dxs.Add(new Dx());
 dxs.Add(new Dx());

 List<Proc> procs = new List<Proc>();
 procs.Add(new Proc());

 List<List<IClean>> lists = new List<List<IClean>>();
 lists.Add(procs); // Error here
 lists.Add(dxs); // Error here

 foreach (List<IClean> list in lists)
 {
     foreach (IClean i in list)
     {        
         i.Clean();
     }
 } 
```

Dx 和 Proc 都实现了 IClean。这是目标。这样的事情可能吗？或者，这是糟糕的编程吗？

.NET 4.0 版

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T19:18:16.627

您可以只拥有一个`List<IClean>`包含`IClean`.

```
var list = new List<IClean>();
    list.Add(new Dx());
    list.Add(new Proc());

foreach(var clean in list)
{
   clean.Clean();
} 
```

此外，如果您确实需要维护两个单独的实现列表，然后一起处理它们，您可以执行以下操作：

```
var dx = new List<Dx>();
var proc = new List<Proc>();

List<IClean> list = new List<IClean>();
list.AddRange(dx);
list.AddRange(proc);

foreach(var clean in list)
{
   clean.Clean();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T19:18:50.017

您不能使用 a`List`或 an来执行此操作`IList`，因为这些类型不是协变的。换句话说，如果你有 a `List<IClean>`，你应该可以添加 a `Dx`，但如果你有 a`List<Proc>`你不应该。因此， a`List<Proc>`不是 a `List<IClean>`。

但是，从 .NET 4 开始，您可以使用`IEnumerable<>`.

```
 List<Dx> dxs = new List<Dx>();
 dxs.Add(new Dx());
 dxs.Add(new Dx());

 List<Proc> procs = new List<Proc>();
 procs.Add(new Proc());

 List<IEnumerable<IClean>> lists = new List<IEnumerable<IClean>>();
 lists.Add(procs); 
 lists.Add(dxs); 

 foreach (List<IClean> list in lists)
 {
     foreach (IClean i in list)
     {        
         i.Clean();
     }
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T19:20:42.777

怎么样：

```
using System.Linq;

...

foreach( var clean in procs.Cast<IClean>().Concat(dxs.Cast<IClean>()) )
{
    clean.Clean();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:26:19.080

这是将输出以下内容的 LinqPad 代码片段：

> Proc 已清理 Dx 已清理 Dx 已清理

```
void Main()
{
    List<IClean> dxs = new List<IClean>();  
    dxs.Add(new Dx());  
    dxs.Add(new Dx());   

    List<IClean> procs = new List<IClean>();  
    procs.Add(new Proc());   

    List< List<IClean> > lists = new List< List<IClean> >();  

    lists.Add(procs); 
    lists.Add(dxs);

    foreach (List<IClean> list in lists)
    {      
        foreach (IClean i in list)      
        {                  
            i.Clean();      
        }  
    } 
}

// Define other methods and classes here
public interface IClean 
{
  void Clean();
}
public class Dx : IClean
{
    public  void Clean()
    {
        "Dx cleaned".Dump();
    }
}

public class Proc : IClean
{
    public void Clean()
    {
        "Proc cleaned".Dump();
    }
} 
```

# ruby-on-rails - 没有为 Capybara 呈现 simple_form 关联

> ID：11618890
> 
> 赞同：0
> 
> 时间：2012-07-23T19:09:25.637
> 
> 标签：ruby-on-rails, capybara, simple-form

我有一个带有关联的表单（使用 simple_form gem）：

```
= f.association :options, :label => 'Options:', :as => :check_boxes 
```

将选项显示为复选框。当我单击时，它在浏览器中看起来很好。但是，如果我在`save_and_open_page`我的规范中添加一个，选项是空白的。没有复选框。如果我取出`:as => check_boxes`它以使其恢复为多选，则多选为空。我也在使用 Twitter Bootstrap。

不幸的是，我需要测试的大部分应用程序都取决于能够选择这些选项。

这是我最初的问题（现在我已经确定它不是为 Capybara 渲染的，这有点无关紧要）包含一些标记：[Checking checkboxes with Capybara](https://stackoverflow.com/questions/11549345/checking-checkboxes-with-capybara)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:43:03.893

确保将种子数据也放入测试数据库，或者使用像 Factory Girl 这样的测试数据构建器即时构建测试数据！

# java - 参数索引超出范围（1 > 参数个数，即 0）

> ID：11618894
> 
> 赞同：1
> 
> 时间：2012-07-23T19:09:31.273
> 
> 标签：java, mysql

我收到此错误，任何人都可以帮助我在查询中找到我的错误吗？

```
public boolean populateLeagues(String leaguename, String password){

        Connect connect = new Connect();
        Connection conn = connect.Connection();
        Statement stmt = conn.createStatement();            
        String query = "INSERT INTO users VALUES('" + leaguename + "')";
        stmt.executeUpdate(query);
        conn.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:25:00.307

正如@Jon Skeet 所说，使用准备好的语句并将参数注入。通过这种方式，您不必弄清楚有关 sql 注入和数据格式的所有麻烦（考虑使用您提供的查询来全局存储日期时间）。可能`leaguename`价值是`null`。请记住，字符串类型的默认值不是空字符串，而是`null`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T19:36:19.380

您使用单引号`leaguename`，因为我们不知道如何`leaguename`格式化，这可能会导致错误

# spring - @PathVariable 和 @ModelAttribute 的值重叠

> ID：11618895
> 
> 赞同：11
> 
> 时间：2012-07-23T19:09:38.747
> 
> 标签：spring, spring-mvc

我有一个`User`对象存储在会话中`@SessionAttributes`。以及一个简单的方法装饰，`@ModelAttribute`以便在会话的值为空时对其进行初始化。

用户等级：

```
@Entity
@Table( name="USER")
public class User implements java.io.Serializable {

    private Long id;
    private String username;
    private String password;
    ....

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name ="ID")
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }
    ... 
```

控制器：

```
@RequestMapping("/item")
@Controller
@SessionAttributes({"user"})
public class MyController { 
```

@ModelAttribute 方法：

```
@ModelAttribute("user")
    public User createUser(Principal principal) {
        return userService.findByUsername(principal.getName());
    } 
```

除了这种特殊方法外，这一切似乎都按预期工作：

```
@RequestMapping(value = "/{id}", method = RequestMethod.GET)
    public String showItem(@PathVariable("id") Long id, @ModelAttribute("user") User user,
            Model uiModel) {
   ...    
} 
```

**问题是`User.id`正在设置`@PathVariable("id")`**. 我相信我也遇到了这个问题`@RequestParam`。我假设这是因为两者具有相同的名称和类型。阅读[Spring 的文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-method-args)（见下文）后，我假设这是预期的行为：

> 下一步是数据绑定。WebDataBinder 类将请求参数名称（包括查询字符串参数和表单字段）匹配到按名称对属性字段建模。在必要时应用类型转换（从字符串到目标字段类型）后填充匹配字段。

但是，我认为这种情况相当普遍，其他人如何处理呢？如果我的发现是正确的并且这是预期的行为（或错误），这似乎很容易出错。

**可能的解决方案：**

1.  更改`@PathVariable("id")`为`@PathVariable("somethingElse")`。有效，但使用@RequestParam 并不那么简单（例如，我不知道如何将 jqgrid 的请求参数 id 更改为其他内容，但这是另一个问题）。
2.  `@PathVariable("id")`将类型从 Long更改为 Int。这将使类型不同`User.id`，`id`但对 Long 的演员表看起来很难看 :)
3.  不要`@ModelAttribute`在这里使用并再次查询数据库`User`。与其他方法不一致并涉及冗余数据库调用。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T00:04:16.957

这种方法怎么样 -

```
@RequestMapping(value = "/{id}", method = RequestMethod.GET)
public String showItem(@PathVariable("id") Long id,
            Model uiModel) {
       User user = (User)uiModel.asMap().get("user");
   ...    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-10T11:49:32.510

**使用@SessionAttribute**

```
@RequestMapping(value = "/{id}", method = RequestMethod.GET)
    public String showItem(@PathVariable("id") Long id, @SessionAttribute("user") User user,
            Model uiModel) {
   ...    
} 
```

# java - Java TCP Socket接收指定长度的字节

> ID：11618896
> 
> 赞同：2
> 
> 时间：2012-07-23T19:09:38.927
> 
> 标签：java, sockets, tcp

我试图首先读取 4 个字节（int）来指定消息的大小，然后根据字节数读取剩余的字节。我正在使用以下代码来完成此操作：

```
DataInputStream dis = new DataInputStream(
                        mClientSocket.getInputStream());

// read the message length
int len = dis.readInt();

Log.i(TAG, "Reading bytes of length:" + len);

// read the message data
byte[] data = new byte[len];
if (len > 0) {
    dis.readFully(data);
} else {
    return "";
}
return new String(data); 
```

有没有更好/有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:28:14.810

来自readUTF 的[JavaDocs](http://docs.oracle.com/javase/6/docs/api/java/io/DataInput.html#readUTF%28%29)：

> 首先，**读取两个字节并使用***readUnsignedShort 方法的方式构造一个无符号的***16 位*** **整数*。*这个整数值称为 UTF 长度**，它指定要读取的附加字节数**。然后通过分组考虑将这些字节转换为字符。每个组的长度是根据组的第一个字节的值计算的。组后面的字节（如果有的话）是下一组的第一个字节。*

 *唯一的问题是您的协议似乎只发送 4 个字节的有效负载长度。也许您可以执行类似的方法，但将长度标记读取的大小增加到 4 字节/32 位。

Also, I see that you are just doing new String(bytes) which works fine as long as the encoding of the data is the same as "the platform's default charset." See [javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5B%5D%29) So it would be much safer to just ensure that you are encoding it correctly(e.g. if you know that the sender sends it as UTF-8 then do new String(bytes,"UTF-8") instead).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:13:05.177

怎么样

```
DataInputStream dis = new DataInputStream(new BufferedInputStream(
                     mClientSocket.getInputStream()));

return dis.readUTF(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T19:21:33.923

你可以`read(byte[] b, int off, int len)`这样使用

```
byte[] data = new byte[len];
dis.read(data,0,len); 
```*

# c# - “类”有什么区别 其中 T : IList" 和类型为 "IList" 的字段

> ID：11618897
> 
> 赞同：1
> 
> 时间：2012-07-23T19:09:38.533
> 
> 标签：c#, generics, inheritance

这两者有什么区别，什么是“正确”的？

```
public interface IMessage
{
    /// <summary>
    /// Array used to hold all bytes that will be written.
    /// </summary>
    IList Buffer { get; set; }
} 
```

和

```
public interface IMessage<T> where T : IList
{
    /// <summary>
    /// Array used to hold all bytes that will be written.
    /// </summary>
    T Buffer { get; set; }
} 
```

* * *

**编辑 1：**已修复 - 接口上不能有字段。（感谢 BoltClock）
**编辑 2：**固定 - 不能对接口进行封装。（感谢基思）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T19:12:22.600

两者在概念上都是“正确的”并且在语义上意味着几乎相同的东西（如果不介意语法错误 - 因为接口不能有字段，如果它们被定义为属性就可以了）。

泛型版本允许您返回除`IList`- 以外的类型，因此`List`可以返回 a 而不是接口类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:17:42.607

如果我没记错的话，在第二个变体中，您可以使用 IList 中您自己的类作为 T。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:18:32.603

在第一种情况下，您的缓冲区被定义为 IList 类型。它可以在运行时分配 IList 的任何实现，并且该接口实现的任何创建者都不必确切知道将使用什么实现。但是，代码在运行时无法知道使用了哪个确切的具体实现，因此在设计时将此属性称为接口的成员时，您将永远无法访问 IList 接口未显式公开的任何方法。

在第二种情况下，您正在定义一个泛型。只要这个通用定义保持“开放”（未定义 T），您仍然受限于使用 IList 的方法。但是，必须关闭此泛型，无论是接口的实现还是保持泛型打开的实现的特定实例的定义。一旦关闭泛型，就可以知道确切的、具体的缓冲区类型*，*并且可以在其上调用不一定由 IList 定义的方法。但是，一旦关闭泛型，就不能为定义特定泛型类型的实例或类提供 IList 的不同实现以用作缓冲区。

因此，一些示例（假设您无法在接口上指定的受保护字段实际上是一个可变的公共属性）：

```
//this class implements the non-generic interface, so buffer is an IList.
class MyMessage1: IMessage
{
   public IList buffer {get;set;}

   public MyMessage1()
   {
      buffer = new List<string>();

      //even though you "know" what you just assigned, 
      //you cannot refer to buffer as a List<string>, even here.
      buffer.Sort(); //error
   }
}

...

//The exact type of buffer cannot be known statically, 
//so only non-generic IList methods are allowed
var myMessage = new MyMessage1();
myMessage.buffer.Add("my message"); //valid; string literals are Objects
var firstLen = myMessage.buffer[0].Length; //error: indexer returns Objects.
myMessage.Sort(); //error: IList does not have a Sort() method.
firstLen = GetFirstLength(myMessage); //error: not an IMessage<List<string>>
//but, an IList is an IList no matter what, so this works.
myMessage.buffer = new List<int>(); 

...

//this class keeps the generic open so T can be any IList, determined at instantiation.
class MyMessage2<T>:IMessage<T> where T:IList
{
    public T buffer {get;set;}

    //buffer's exact type is still not known here,
    //so inside this class you are still restricted to IList members only
    public int BufferCount{get{return buffer.Count;}}

    public void SortBuffer()
    {
       buffer.Sort(); //error; no such method
    }    
}

...

//but, once you define an instance, you know exactly what buffer is
var myMessage = new MyMessage2<List<string>>();
myMessage.buffer.Add("my message");
var firstLen = myMessage.buffer[0].Length; //now we know the indexer produces strings.
myMessage.buffer.Sort(); //buffer is known to be a List<T> which has Sort()
firstLen = GetFirstLength(myMessage);

...

//and when you pass it as a parameter, you can close the generic of the interface
public string GetFirstLength(IMessage<List<string>> message) 
{
   //...so you still know what you're dealing with
   return message.buffer[0].Length;
}

...

//however, buffer is now "strongly typed" and the implementation can't change
myMessage.buffer = new List<int>(); //error; buffer is of type List<string>

...

//this class closes the generic within the declaration.
class MyMessage3:IMessage<IList<string>>
{
   //now we're closing the generic in the implementation itself,
   //so internally we know exactly what we're dealing with
   public List<string> buffer {get;set;}

   //...so this call is valid
   public void SortBuffer() { buffer.Sort(); }
}

//...and consuming code doesn't have to (get to?) specify the implementation of T
var myMessage = new MyMessage3();
//... but still knows exactly what that implementation is
myMessage.buffer.Add("my message");
var firstLen = myMessage.buffer[0].Length;
myMessage.buffer.Sort();

//and btw, MyMessage3 is still an IMessage<List<string>>
firstLen = GetFirstLength(myMessage);

//... and buffer's still a strongly-typed List<string>
myMessage.buffer = new List<int>(); //error 
```

# python - 找不到 pg_config 可执行文件

> ID：11618898
> 
> 赞同：1156
> 
> 时间：2012-07-23T19:09:40.837
> 
> 标签：python, pip, psycopg2

我在安装 psycopg2 时遇到问题。尝试时出现以下错误`pip install psycopg2`：

```
Error: pg_config executable not found.

Please add the directory containing pg_config to the PATH

or specify the full executable path with the option:

    python setup.py build_ext --pg-config /path/to/pg_config build ...

or with the pg_config option in 'setup.cfg'.

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /tmp/pip-build/psycopg2 
```

但问题`pg_config`实际上出在我的`PATH`; 它运行没有任何问题：

```
$ which pg_config
/usr/pgsql-9.1/bin/pg_config 
```

我尝试将 pg_config 路径添加到文件并使用从他们的网站 ( [http://initd.org/psycopg/](http://initd.org/psycopg/)`setup.cfg` )下载的源文件构建它，我收到以下错误消息！

```
Error: Unable to find 'pg_config' file in '/usr/pgsql-9.1/bin/' 
```

但它实际上是存在的！！！

我对这些错误感到困惑。有人可以帮忙吗？

顺便说一句，我`sudo`所有的命令。我也在 RHEL 5.5 上。

* * *

## 回答 #1

> 赞同：1127
> 
> 时间：2012-08-20T11:51:48.440

`pg_config`位于`postgresql-devel`（`libpq-dev`在 Debian/Ubuntu 中，`libpq-devel`在 Centos/Fedora/Cygwin/Babun 上。）

* * *

## 回答 #2

> 赞同：603
> 
> 时间：2014-07-09T04:28:14.497

On Mac OS X, I solved it using the [homebrew](https://brew.sh/) package manager

```
brew install postgresql 
```

* * *

## 回答 #3

> 赞同：327
> 
> 时间：2013-01-20T11:51:21.980

你安装了`python-dev`吗？如果您已经有，请尝试安装`libpq-dev`

```
sudo apt-get install libpq-dev python-dev 
```

来自文章：[如何在 virtualenv 下安装 psycopg2](http://web.archive.org/web/20140615091953/http://goshawknest.wordpress.com/2011/02/16/how-to-install-psycopg2-under-virtualenv/)

* * *

## 回答 #4

> 赞同：104
> 
> 时间：2014-07-10T19:26:28.190

也在 OSX 上。[从http://postgresapp.com/](http://postgresapp.com/)安装 Postgress.app但有同样的问题。

我`pg_config`在该应用程序的内容中找到并将目录添加到`$PATH`.

它在`/Applications/Postgres.app/Contents/Versions/latest/bin`. 所以这行得通：`export PATH="/Applications/Postgres.app/Contents/Versions/latest/bin:$PATH"`.

* * *

## 回答 #5

> 赞同：72
> 
> 时间：2019-11-21T21:28:58.483

`pip`您可以使用或在任何平台上安装预编译的二进制文件`conda`：

```
python -m pip install psycopg2-binary 
```

或者

```
conda install psycopg2 
```

请注意，[psycopg2-binary pypi 页面](https://pypi.org/project/psycopg2-binary/)建议在生产环境中从源代码构建：

> 二进制包是开发和测试的实用选择，但在生产中建议使用从源代码构建的包

要使用从源代码构建的包，请使用`python -m pip install psycopg2`. 该过程将需要几个依赖项（[文档](http://initd.org/psycopg/docs/install.html#install-from-source)）（强调我的）：

> *   **交流编译器**。
> *   **Python 头**文件. 它们通常安装在一个包中，例如**`python-dev`**. 诸如`error: Python.h: No such file or directory`表示缺少 Python 标头的消息。
> *   **libpq 头**文件。它们通常安装在一个包中，例如**`libpq-dev`**. 如果你得到一个`error: libpq-fe.h: No such file or directory`，你就会想念他们。
> *   **`pg_config`程序**：它通常由软件包安装，但**`libpq-dev`**有时它不在`PATH`目录中。将它放入`PATH`极大地简化了安装，因此请尝试运行`pg_config --version`：如果它返回错误或意外的版本号，则找到包含`pg_config`正确`libpq`版本（通常`/usr/lib/postgresql/X.Y/bin/`）的目录并将其添加到`PATH`：
> 
> ```
> $ export PATH=/usr/lib/postgresql/X.Y/bin/:$PATH 
> ```
> 
> 您只需要`pg_config`compile `psycopg2`，而不是常规使用。

> 一切就绪后，只需运行标准即可：
> 
> ```
> $ pip install psycopg2 
> ```
> 
> 或者，从包含源代码的目录中：
> 
> ```
> $ python setup.py build
> $ python setup.py install 
> ```

* * *

## 回答 #6

> 赞同：53
> 
> 时间：2017-07-06T01:16:23.863

在 alpine 上，包含的库`pg_config`是[`postgresql-dev`](https://pkgs.alpinelinux.org/packages?name=postgresql-dev&branch=&repo=&arch=&maintainer=). 要安装，请运行：

```
apk add postgresql-dev 
```

* * *

## 回答 #7

> 赞同：47
> 
> 时间：2014-11-20T15:16:26.360

这是在 CentOS 上对我有用的方法，首先安装：

```
sudo yum install postgresql postgresql-devel python-devel 
```

在 Ubuntu 上，只需使用等效的 apt-get 软件包。

```
sudo apt-get install postgresql postgresql-dev python-dev 
```

现在在 pip install 中包含 postgresql 二进制目录的路径，这应该适用于基于 Debain 或 RHEL 的 Linux：

```
sudo PATH=$PATH:/usr/pgsql-9.3/bin/ pip install psycopg2 
```

确保包含正确的路径。就这样 ：）

* * *

## 回答 #8

> 赞同：37
> 
> 时间：2013-02-08T19:04:05.250

```
apt-get build-dep python-psycopg2 
```

* * *

## 回答 #9

> 赞同：35
> 
> 时间：2017-09-08T06:54:08.767

您应该在 Ubuntu 上添加 Postgres 中使用的 python 要求。跑：

```
sudo apt-get install libpq-dev python-dev 
```

* * *

## 回答 #10

> 赞同：34
> 
> 时间：2013-07-05T06:46:03.670

总结一下，我也面临完全相同的问题。在阅读了很多 stackoverflow 帖子和在线博客之后，对我有用的最终解决方案是：

1) 安装 psycopg2 之前应安装 PostgreSQL（开发或任何稳定版本）。

2) pg_config 文件（该文件通常位于 PostgreSQL 安装文件夹的 bin 文件夹中）PATH 必须在安装 psycopg2 之前显式设置。就我而言，PostgreSQL 的安装路径是：

```
/opt/local/lib/postgresql91/ 
```

因此，为了显式设置 pg_config 文件的 PATH，我在终端中输入了以下命令：

```
PATH=$PATH:/opt/local/lib/postgresql91/bin/ 
```

此命令确保当您尝试 pip install psycopg2 时，它会自动找到 pg_config 的 PATH。

[我还在我的博客](http://alirazabhayani.blogspot.com/2013/07/install-psycopg2-on-mac-os-x-pgconfig.html)上发布了有关跟踪的完整错误及其解决方案，您可能想参考。它适用于 Mac OS X，但 pg_config PATH 问题是通用的，也适用于 Linux。

* * *

## 回答 #11

> 赞同：32
> 
> 时间：2016-12-07T22:34:30.640

`sudo apt-get install libpq-dev`在 Ubuntu 15.4 上为我工作

* * *

## 回答 #12

> 赞同：30
> 
> 时间：2021-01-09T22:27:46.910

您必须安装**libpq-dev/postgresql-libs**，这是用于编译 C 程序以与 libpq 库链接的头文件和静态库，以便与 PostgreSQL 数据库后端进行通信。

在 Arch 上，这将运行：

```
$ sudo pacman -S postgresql-libs 
```

在 Debian 和 Ubuntu 上：

```
$ sudo apt-get install libpq-dev 
```

在 Mac OS X 上：

```
$ brew install postgresql 
```

在 Red Hat/CentOS/Fedora 上：

```
$ sudo yum install postgresql-devel 
```

* * *

## 回答 #13

> 赞同：23
> 
> 时间：2021-10-04T18:12:01.537

对于 ubuntu 用户，这是解决方案：

```
sudo apt install libpq-dev 
```

它对我有用。

* * *

## 回答 #14

> 赞同：23
> 
> 时间：2017-12-18T02:13:02.890

在 Linux Mint`sudo apt-get install libpq-dev`上为我工作。

* * *

## 回答 #15

> 赞同：22
> 
> 时间：2015-03-26T11:11:46.910

对于那些运行 OS X 的人来说，这个解决方案对我有用：

1) 安装 Postgres.app：

[http://www.postgresql.org/download/macosx/](http://www.postgresql.org/download/macosx/)

2) 然后打开终端并运行此命令，将 {{version}} 替换为 Postgres 版本号：

导出 PATH=$PATH:/Applications/Postgres.app/Contents/Versions/{{version}}/bin

例如

导出 PATH=$PATH:/Applications/Postgres.app/Contents/Versions/9.4/bin

* * *

## 回答 #16

> 赞同：21
> 
> 时间：2013-09-03T10:04:48.883

更新 /etc/yum.repos.d/CentOS-Base.repo、[base] 和 [updates] 部分
添加 exclude=postgresql*

```
curl -O http://yum.postgresql.org/9.1/redhat/rhel-6-i386/pgdg-centos91-9.1-4.noarch.rpmr  
rpm -ivh pgdg-centos91-9.1-4.noarch.rpm

yum install postgresql  
yum install postgresql-devel

PATH=$PATH:/usr/pgsql-9.1/bin/

pip install psycopg2 
```

* * *

## 回答 #17

> 赞同：18
> 
> 时间：2013-12-31T16:45:25.633

Ali 的解决方案对我有用，但我无法找到 bin 文件夹位置。在 Mac OS X 上查找路径的一种快速方法是打开 psql（顶部菜单栏中有一个快速链接）。这将打开一个单独的终端窗口，在第二行，您的 Postgres 安装路径将如下所示：

```
My-MacBook-Pro:~ Me$ /Applications/Postgres93.app/Contents/MacOS/bin/psql ; exit; 
```

您的 pg_config 文件位于该 bin 文件夹中。因此，在安装 psycopg2 之前设置 pg_config 文件的路径：

```
PATH=$PATH:/Applications/Postgres93.app/Contents/MacOS/bin/ 
```

或更新版本：

```
PATH=$PATH:/Applications/Postgres.app/Contents/Versions/9.3/bin 
```

然后安装 psycopg2。

* * *

## 回答 #18

> 赞同：18
> 
> 时间：2012-08-20T12:16:12.960

尝试将其添加到 PATH：

```
PATH=$PATH:/usr/pgsql-9.1/bin/ ./pip install psycopg2 
```

* * *

## 回答 #19

> 赞同：18
> 
> 时间：2021-02-11T09:02:51.297

只需运行以下命令：

```
sudo apt install libpq-dev 
```

为我解决了这个问题

* * *

## 回答 #20

> 赞同：16
> 
> 时间：2019-09-27T10:50:03.793

我将把它留给下一个不幸的灵魂，尽管提供了所有解决方案，但他们仍无法解决这个问题。只需使用`sudo pip3 install psycopg2-binary`

* * *

## 回答 #21

> 赞同：13
> 
> 时间：2017-03-10T08:17:15.210

在安装 psycopg2 之前，您需要升级您的 pip。使用此命令

```
pip install --upgrade pip 
```

* * *

## 回答 #22

> 赞同：12
> 
> 时间：2019-08-04T06:59:03.617

在 MacOS 上，最简单的解决方案是对 Postgres 包下的正确二进制文件进行符号链接。

```
sudo ln -s /Applications/Postgres.app/Contents/Versions/latest/bin/pg_config /usr/local/bin/pg_config 
```

这是相当无害的，如果需要，所有应用程序都可以在系统范围内使用它。

* * *

## 回答 #23

> 赞同：11
> 
> 时间：2016-10-26T06:41:26.600

在 Mac OS X 上，如果您使用的是 Postgres 应用程序 ( [http://postgresapp.com/](http://postgresapp.com/) )：

```
export PATH=$PATH:/Applications/Postgres.app/Contents/Versions/latest/bin 
```

无需在此命令中指定 Postgres 的版本。它总是指向最新的。

做

```
pip install psycopg2 
```

PS：如果更改没有反映您可能需要重新启动终端/命令提示符

[资源](https://postgresapp.com/documentation/cli-tools.html)

* * *

## 回答 #24

> 赞同：10
> 
> 时间：2021-07-23T15:03:48.507

我遇到了这个问题，因为我没有安装 postgres。如果你有 brew install 运行

```
brew install postgresql 
```

这应该可以解决问题。

* * *

## 回答 #25

> 赞同：10
> 
> 时间：2016-10-28T09:07:14.673

在 Arch Linux 上安装[**python-psycopg2为我解决了这个问题：**](https://www.archlinux.org/packages/community/x86_64/python-psycopg2/)

```
pacman -S python-psycopg2 
```

* * *

## 回答 #26

> 赞同：9
> 
> 时间：2014-09-10T14:15:13.943

On Windows, You may want to install the [Windows port of Psycopg](http://www.stickpeople.com/projects/python/win-psycopg/), which is recommended in [psycopg's documentation](http://initd.org/psycopg/docs/install.html#install-from-a-package).

* * *

## 回答 #27

> 赞同：9
> 
> 时间：2016-04-17T18:44:13.957

刚刚通过以下方式解决了 Cent OS 7 中的问题：

```
export PATH=$PATH:/usr/pgsql-9.5/bin 
```

确保您的 PostgreSql 版本与上面的正确版本匹配。

* * *

## 回答 #28

> 赞同：7
> 
> 时间：2015-04-29T18:36:19.627

在这里，为了 OS X 的完整性：如果你从 MacPorts 安装 PostgreSQL，pg_config 将在`/opt/local/lib/postgresql94/bin/pg_config`.

当您安装 MacPorts 时，它已经添加`/opt/local/bin`到您的 PATH 中。

因此，这将解决问题： `$ sudo ln -s /opt/local/lib/postgresql94/bin/pg_config /opt/local/bin/pg_config`

现在`pip install psycopg2`将能够`pg_config`毫无问题地运行。

* * *

## 回答 #29

> 赞同：7
> 
> 时间：2020-09-24T08:33:45.337

这部分是之前提出的，为了清楚起见，在此处添加。

[来自https://www.psycopg.org/docs/install.html](https://www.psycopg.org/docs/install.html)的文档。
他们建议运行： $ **pip install psycopg2-binary**

这为我解决了这个问题。

* * *

## 回答 #30

> 赞同：7
> 
> 时间：2019-11-27T00:15:06.910

**对于那些在 macOS Catalina 上使用`zsh`shell 并且还安装了[postgres 应用程序](https://postgresapp.com/)的人：**

打开您的`~/.zshrc`文件，并*添加*以下行：

```
export PATH="/Applications/Postgres.app/Contents/Versions/latest/bin:$PATH" 
```

* * *

然后关闭所有终端，重新打开它们，您的问题就解决了。

如果您不想关闭终端，只需输入`source ~/.zshrc`您想继续工作的任何终端。

* * *

## 回答 #31

> 赞同：6
> 
> 时间：2021-01-24T17:16:09.923

运行以下命令来解决找不到**pg_config 可执行文件：-**

```
sudo apt-get install --reinstall libpq-dev 
```

* * *

## 回答 #32

> 赞同：5
> 
> 时间：2014-04-08T08:00:21.920

sudo yum 安装 postgresql-devel (centos6X)

pip install psycopg2==2.5.2

* * *

## 回答 #33

> 赞同：5
> 
> 时间：2020-04-29T15:29:56.683

我建议您尝试使用 Postgres.app。( [http://postgresapp.com](http://postgresapp.com) ) 这样您就可以轻松地在 Mac 上打开和关闭 Postgres。完成后，通过附加以下内容将 Postgres 的路径添加到您的 .profile 文件中：

`PATH="/Applications/Postgres.app/Contents/Versions/latest/bin:$PATH"`

只有在将 Postgres 添加到路径后，您才能尝试在虚拟环境（使用 pip）或全局站点包中安装 psycopg2。

* * *

## 回答 #34

> 赞同：5
> 
> 时间：2020-03-01T14:14:55.777

对于 mac 用户，扩展您的路径变量以包含 PostgreSQL，如下所示`export PATH=$PATH:/Library/PostgreSQL/12/bin`。

* * *

## 回答 #35

> 赞同：4
> 
> 时间：2020-07-28T19:32:39.993

如果您尝试`psycopg2`在您的虚拟环境中添加一个依赖项，该依赖项将允许您的 python 项目连接到您的 docker 或 kubernetes pod，这些 pod 在您的 Mac 上单独运行 postgresql，并且对在您的 Mac 上安装 postgresql 并不真正感兴趣，*这样*您可以得到 pg_config，你可以这样做：

`psycopg2_binary`按照 pipenv 安装的错误输出中的建议进行安装，一切都会正常进行。

* * *

## 回答 #36

> 赞同：4
> 
> 时间：2019-10-17T20:53:22.823

Windows用户缺乏答案。这是我解决这个问题的方法。

首先像这样将 PostgreSQL bin 文件夹添加到路径变量中

```
set PATH=%PATH%;C:\Program Files\PostgreSQL\11\bin 
```

`\11\`用你的 Postgres 版本替换

下一次运行

```
pip install pyscopg2 
```

这至少让我遇到了编译错误。

**更新**：它看起来是 psycopg2 库的一个问题，它的依赖关系在 python 3.8 中表现不佳。[https://github.com/psycopg/psycopg2/issues/990](https://github.com/psycopg/psycopg2/issues/990)

* * *

## 回答 #37

> 赞同：4
> 
> 时间：2020-02-02T08:21:33.987

一个简单的解决方案可以是

```
pip install psycopg2==2.7.5 
```

* * *

## 回答 #38

> 赞同：3
> 
> 时间：2014-01-30T12:16:48.053

我很确定您遇到过与我相同的“问题”，因此我将为您提供极其简单的解决方案...

在您的情况下，您需要添加到 $PATH （或作为命令参数）的实际路径是：

```
/usr/pgsql-9.1/bin/pg_config 
```

不是

```
/usr/pgsql-9.1/bin 
```

例如，如果你之后运行 python setup.py 脚本，你会像这样运行它：

```
python setup.py build_ext --pg-config /usr/pgsql-9.1/bin/pg_config build 
```

可能为时已晚，但仍然是最简单的解决方案。

后期编辑：

在进一步的测试中，我发现如果您最初在表单中添加 pg_config 的路径

```
/usr/pgsql-9.1/bin 
```

（在...../bin 之后没有/pg_config）并运行 pip install 命令它将起作用。

但是，如果您随后决定按照指示运行 python setup.py，则必须在 ...../bin 之后使用 /pg_config 指定路径，即

```
python setup.py build_ext --pg-config /usr/pgsql-9.1/bin/pg_config build 
```

* * *

## 回答 #39

> 赞同：3
> 
> 时间：2014-08-07T02:59:51.833

这就是我设法安装 psycopg2 的方式

```
$ wget http://initd.org/psycopg/tarballs/PSYCOPG-2-5/psycopg2-2.5.3.tar.gz
$ tar -xzf psycopg2-2.5.3.tar.gz
$ cd psycopg2-2.5.3
$ pip install . 
```

* * *

## 回答 #40

> 赞同：2
> 
> 时间：2017-09-20T11:21:13.127

对于 CentOS/RedHat 确保这`/etc/alternatives/pgsql-pg_config`是一个完整的符号链接

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2014-09-04T12:16:21.017

在 Gentoo 你必须执行以下操作

```
# Install postgresql client libraries
sudo emerge postgresql-base 
```

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2019-08-27T20:45:26.837

对于在 Django 应用程序上工作并部署到 AWS 时遇到此问题的任何人，本教程中描述的方法对我有用：[https ://realpython.com/deploying-a-django-app-and-postgresql-to-aws-elastic -豆茎/](https://realpython.com/deploying-a-django-app-and-postgresql-to-aws-elastic-beanstalk/)

以下是作者对出现以下错误时的解释：

```
Error: pg_config executable not found. 
```

> 问题是我们尝试安装 psycopy2（Postgres Python 绑定），但我们还需要安装 Postgres 客户端驱动程序。由于默认情况下没有安装它们，因此我们需要先安装它们。
> 
> eb 将从项目根目录中名为“.ebextensions”的文件夹中读取自定义 .config 文件。这些 .config 文件允许您安装软件包、运行任意命令和/或设置环境变量。“.ebextensions”目录中的文件应符合 JSON 或 YAML 语法，并按字母顺序执行。
> 
> 首先要做的是安装一些包，这样我们的 pip install 命令才能成功完成。为此，让我们创建一个名为 .ebextensions/01_packages.config 的文件：

```
packages:
  yum:
    git: []
    postgresql93-devel: []
    libjpeg-turbo-devel: [] 
```

> EC2 实例运行 Amazon Linux，这是一种 Redhat 风格，因此我们可以使用 yum 来安装我们需要的包。现在，我们只需要安装三个包——git、Postgres 客户端和用于 Pillow 的 libjpeg。

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2021-10-15T11:53:08.263

**我在Oracle Linux 7.9**上安装这个库有很大的问题。无论我在做什么，我都无法通过 pip 安装 psycopg2。所以我决定用这个命令通过 yum 安装它：

```
yum install http://mirror.centos.org/centos/7/os/x86_64/Packages/python-psycopg2-2.5.1-4.el7.x86_64.rpm 
```

使用此命令安装了 psycopg2，我可以通过 ansible 创建 postgres 用户 DB。（我知道这就像第六十个答案，但我希望这个答案仍然可以帮助某人）。

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2020-12-20T11:46:50.733

对于 MAC 用户 -

通过 HomeBrew添加`postgresql`软件包后，您可能需要添加`openssl`路径变量 -

`export LIBRARY_PATH=$LIBRARY_PATH:/usr/local/opt/openssl/lib/`

然后你可以再次使用应该工作`pip install`的包。`psycopg2`

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2020-12-26T06:40:32.390

如果您**最近更新了 python 或更改了默认 python**（比如说从 3.6 到 3.8）。以下代码

```
sudo apt-get install python-dev   OR    sudo apt-get install python3-dev 
```

将为以前的 python 版本安装/工作。

因此，如果您希望此命令适用于最近更新/更改的 python 版本，请尝试在命令中提及特定版本，例如 python3.8

```
sudo apt-get install python3.8-dev 
```

在上面尝试以下

```
pip install wheel
export PATH=/path/to/compiled/postgresql/bin:"$PATH"
sudo apt-get install libpq-dev
sudo apt-get install python3.x-dev    **Change x with your version, eg python3.8**
pip install psycopg2-binary
pip install psycopg2 
```

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2021-04-19T08:52:09.383

以下步骤为我解决了这个问题（ubuntu 18.04）

1.  安装 postgres（如果没有安装，请参考[这个）](https://www.postgresql.org/download/linux/ubuntu/)
2.  安装 libpq-dev

> sudo apt-get install libpq-dev

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2015-01-06T09:55:55.697

我发现这个页面提供了在我的 mac 上安装 PostgreSQL 的最佳说明，并且 pip install 命令在之后完美运行：

[https://www.codefellows.org/blog/three-battle-tested-ways-to-install-postgresql](https://www.codefellows.org/blog/three-battle-tested-ways-to-install-postgresql)

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2019-12-09T01:52:38.247

我通过运行以下命令解决了这个问题。

```
env LDFLAGS="-I/usr/local/opt/openssl/include -L/usr/local/opt/openssl/lib" pip install psycopg2 
```

参考：[https ://stackoverflow.com/a/39800677/4270698](https://stackoverflow.com/a/39800677/4270698)

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2020-07-23T17:51:57.763

您可以改用二进制文件，当 Django 尝试将其作为其依赖项的一部分安装时，我在对应用程序进行 dockerizing 时遇到了问题，为了解决这个问题，我将此设置用于 requirements.txt，其中首先安装了二进制文件，然后 django 执行不要尝试再次安装它：psycopg2-binary django gunicorn

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2020-03-03T08:00:21.310

如果您使用的是 mac，请确保您已在您的机器中安装了 Postgresql。

* * *

## 回答 #51

> 赞同：-2
> 
> 时间：2019-02-12T02:27:32.997

在 MAC Mojave 上，如果您使用 brew 安装了它，则执行 `brew info <your postgres>`

它将向您显示您应该设置的所有环境变量，只需复制粘贴这些命令，重新启动您的 shell 就可以了！

* * *

## 回答 #52

> 赞同：-3
> 
> 时间：2019-12-17T03:32:06.427

快速了解 pip 的工作原理`pip`-> python2 和`pip3`-> python3，所以如果你想在 python 3 上解决这个问题，你可以简单地`sudo pip3 install psycopg2`这样做，可能。

# android - 在 Android 应用程序中实现地理标记

> ID：11618900
> 
> 赞同：0
> 
> 时间：2012-07-23T19:09:48.113
> 
> 标签：android, google-maps, geotagging

所以我最近进入了 Android 应用程序开发，虽然我对大多数介绍性教程都没有问题，无论是来自 Android 开发者网站还是其他网站，但我相信我想要实现的内容可能会稍微复杂一些。

我基本上想做以下事情：

*   允许用户以 Twitter 帖子的形式发布有关他们正在做什么的信息

*   允许用户访问 Twitter 提要，在该提要中他们可以看到其他人在做什么

*   将此数据导入 MySQL 数据库或适当的

*   将位置数据与 Google Maps API 集成（我知道这将涉及地理编码和 php 的使用？）

*   使用 Google Maps API 在前端显示地图（在与用户发布有关其活动信息的不同屏幕上）并在地图上显示不同用户的位置，以及当光标悬停在其位置上时有关其活动的信息

所以我想知道是否有人可以推荐一些好的教程来阅读以实现上述功能？

一个关于 Android 上 Eclipse 开发的快速问题，为什么我尝试在模拟器上运行应用程序时总是出现以下两个错误：

*   **警告一次：此应用程序或它使用的库正在使用已被弃用的 NSQuickDrawView。应用程序应停止使用 QuickDraw 并移至 Quartz。和**

*   **emulator-5554 断开连接！取消“com.example1.myApp.MyFirstActivity 活动启动”！**

第二个错误更严重，因为它有效地阻止了我运行我的应用程序

我已将 adb 添加到我的类路径中，我尝试重新启动它，但遗憾的是问题仍然存在

非常感谢您提前回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:41:33.920

我认为您想使用 SQLite 而不是 MySQL。SQLite 包含在 Android SDK 中。本教程帮助了我：[http ://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

尼尔

# assembly - 汇编是唯一的低级编程语言，如果不是，它是最广泛使用的吗？

> ID：11618903
> 
> 赞同：7
> 
> 时间：2012-07-23T19:10:06.993
> 
> 标签：assembly, cpu, performance, machine-code, popularity

我最近开始学习汇编，当我浏览互联网时，我看到越来越多的人说汇编不是无用的，但与需要这么多时间和精力的语言相比，也不值得花时间去编写程序。高级语言。高级语言程序和低级语言程序之间的效率现在真的不够引人注目吗？还有另一种像汇编这样使用更广泛的低级语言吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T19:24:39.270

> 高级语言程序和低级语言程序之间的效率真的不够引人注意吗？

通常，编译器生成的程序集比开发人员编写的要好得多。有些开发人员可以击败编译器。但是由于编写低级代码需要更多地关注细节并且更难编写和维护，因此通常只有一小部分特定的代码会在汇编中实现以提高效率。差异可能很明显。但是，如果开发人员进行错误优化，它也可能不引人注意。

我建议您阅读 Michael [Abrash 的图形编程黑皮书](https://rads.stackoverflow.com/amzn/click/com/1576101746)——它有很多关于组装和优化的内容以及来自现实生活的精彩故事。

> 是否还有另一种更广泛使用的低级语言，例如汇编？

汇编程序可能是最低级别的*应用程序*编程语言。唯一的其他手段是手工编写二进制代码，但二进制操作码很难被称为“语言”。

然而，编程超越了软件。硬件也需要编程。有硬件描述语言 (HDL) 可用于对硬件进行编程（即您可以创建自己的 CPU）。最流行的 HDL 语言是[Verilog](http://en.wikipedia.org/wiki/Verilog)和[VHDL](http://en.wikipedia.org/wiki/VHDL)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-23T19:22:15.053

在更简单的时代编写汇编是合适的。回到 C 编译器中的代码生成器还不是很智能并且预测机器代码的执行时间很简单的时候。

这已经结束了，人类既无法击败现代代码生成器中内置的智能，也无法击败对细节的不懈关注。插入缓存预取时需要准确了解的详细信息，以便数据在正确的时间可用。以及重新排序指令如何恰到好处地为您提供最佳的超级可扩展性。并恰到好处地插入 nop，使跳跃目标对齐。以及如何机械地展开循环。以及如何利用 SIMD 提供的自动并行化。等等。并且不只是一次这样做，而是随着代码的变化一遍又一遍地这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T19:25:15.963

高级语言的编译器每天都变得越来越聪明。在过去，汇编技巧可以大大提高性能。如今，编译器自己实现了很多这些技巧。

示例是：移位而不是除法，在跳转表中为 switch/case 操作程序计数器，内联函数（如果它们只使用一次）等。

仍有优化的空间，但性能增益将非常低，因此最好使用更高级别的语言并实现可维护性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T19:26:33.210

好吧，实际上，“组装”更像是不同品种的集合。它取决于您正在编程的架构。例如，x86 的汇编可能（并且将会）与 ARM、MIPS 或您能想到的任何架构的汇编有很大不同。这是因为汇编是处理器运行的二进制代码的一对一翻译。由于不同的架构有不同的指令集，它们的汇编语言也不同。

所以说真的，汇编是不编写纯二进制代码的最低要求。但是，它不是一种特定的语言，而是一组语言。因此，例如，如果您谈论的是 x86 汇编，并将其与另一种同等低级的语言进行比较，您会发现其他语言也可能是汇编的某种变体。再说一次，这将是另一种架构，所以它也不是很有用。

# php - 如何访问标准类中的密钥

> ID：11618906
> 
> 赞同：0
> 
> 时间：2012-07-23T19:10:13.333
> 
> 标签：php

我有这种情况：

```
object(stdClass)#203 (1) {
  ["1"]=>
  object(stdClass)#212 (7) {
    ["user_id"]=>
    int(1)
    ["type"]=>
    string(6) "Device"
    ["name_first"]=>
    string(0) ""
    ["name_last"]=>
    string(0) ""
    ["name_display"]=>
    string(0) ""
    ["gender"]=>
    string(11) "Unspecified"
    ["birthday"]=>
    string(0) ""
  }
} 
```

我想访问“user_id”或[“1”]，但这是stdclass类型，所以我不能像数组一样对待它。（注：来自`json_decode`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:14:33.027

您必须将其转换为数组：

```
$obj = (array) $obj;
$obj[1]["user_id"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:14:38.893

`json_decode()`当设置为的第二个参数`TRUE`将自动将您的结果转换为关联数组：

```
$objs = json_decode($json, true);
echo $objs[1]["user_id"]; 
```

# android-source - Android 4.1（果冻豆）源代码在哪里？

> ID：11618907
> 
> 赞同：1
> 
> 时间：2012-07-23T19:10:19.183
> 
> 标签：android-source

我正在寻找 Android 4.1（果冻豆）源代码。在互联网上有很多博客提到源代码已经发布。但我不知道在哪里。

我在这里查看[http://source.android.com/](http://source.android.com/)，但它显示的是 Android 4.0 的源代码。我下载了整个 repo，但无法罚款 4.1 分支。我在这里错过了什么吗？

谁能帮我找到源代码？

***编辑***
到目前为止，source.android.com 没有使用最新的下载说明进行更新。如果我使用“Landervdb”建议的命令，那么它可以工作。我还为 Android 源代码找到了更多资源。这些在下面给出。
[Androidxref.com](http://androidxref.com/4.1.1/)
[github.com](https://github.com/android)

有关更多信息，您还可以查看[Android jelly bean source code](http://code4reference.com/2012/07/android-jelly-bean-source-code/)上的帖子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T19:37:58.697

我目前无法访问可以对其进行测试的 linux 机器，但我可以在 AOSP 网站上看到 Jelly Bean 的清单。您应该能够通过发出以下命令来下载源代码：

```
repo init -u https://android.googlesource.com/platform/manifest -b android-4.1.1_r3
repo sync 
```

更详细的描述请参考[http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)。该文档尚未针对 Jelly Bean 进行更新，但*应该*可以使用，只需在适当的地方替换版本号即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T03:02:44.943

Android 4.1 已经可以通过

repo init -u [https://android.googlesource.com/platform/manifest](https://android.googlesource.com/platform/manifest) -b android-4.1.1_r1

# javascript - 在主干模型中定义公共方法

> ID：11618908
> 
> 赞同：1
> 
> 时间：2012-07-23T19:10:24.030
> 
> 标签：javascript, backbone.js, backbone-relational

我需要遍历主干集合并获取从集合中的模型派生的对象数组。

问题是我不知道如何让集合访问在给定对象内创建模型定义时定义的方法：`Backbone.Model.extend({})`

**这是我目前所拥有的架构示例：**

```
// THE MODEL
var TheModel = Backbone.Model.extend({
    // THE FOLLOWING IS NOT AVAILABLE AS A METHOD OF THE MODEL:
    //     This isn't the actual method, but I though it might be helpful to
    //     to demonstrate that kind of thing the method needs to do (manipulate:
    //     map data and make it available to an external library)
    get_derived_object: function(){
        return this.get('lat') + '_' this.get('lon');
    }

});

// THE COLLECTION:
var TheCollection = Backbone.Collection.extend({
    // Use the underscore library to iterate through the list of
    //     models in the collection and get a list the objects returned from
    //     the "get_derived_object()" method of each model:
    get_list_of_derived_model_data: function(){
        return _.map(
            this.models,
            function(theModel){
                // This method is undefined here, but this is where I would expect
                //     it to be:
                return theModel.get_derived_object();

            }
        );
    }

}); 
```

我不确定我哪里出错了，但我有一些猜测： * 集合没有以应有的方式迭代它的模型 * 不能在 Backbone.Model.extend({}) 中定义公共方法* 我在寻找公共方法的错误位置 * 由于对 Backbone.js 的使用方式的误解而导致的其他一些架构错误

任何帮助表示赞赏，非常感谢！

**编辑**

问题是这段代码实际上有一个错误。当集合被填充时，它没有引用“TheModel”作为它的模型类型，所以它创建了自己的模型。

定义集合时需要添加这行代码：`model: TheModel`

```
var theCollection = Backbone.Collection.extend({
    model: TheModel,
    ...
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:15:22.950

而不是使用：

```
return _.map(
    this.models,
    function(theModel){
        // This method is undefined here, but this is where I would expect
        //     it to be:
        return theModel.get_derived_object();
     }
); 
```

为什么不使用内置收藏版：

```
return this.map(function(theModel){
    return theModel.get_derived_object();
}); 
```

不确定这是否会有所帮助，但值得一试。

并且为了记录，第一个参数中定义的所有方法`new Backbone.Model(`都是“公共的”，所以你已经掌握了基础知识。

# python - 打印多行引发的异常

> ID：11618913
> 
> 赞同：4
> 
> 时间：2012-07-23T19:10:49.107
> 
> 标签：python, exception, exception-handling

我正在通过 Python 从 SVN 获取更新。

我有这个：

```
try: 
    output = subprocess.check_output(svn.update_cmd,
                                     stderr=subprocess.STDOUT, shell=True)
    print output
    print 'finished svn update'

    revision_number = output.split()[-1].rstrip('.') #revision number
    if log_update:
        write_update(revision_number)
    return revision_number
except subprocess.CalledProcessError, e:
    raise SVNUpdateError(e.output) 
```

当我提出我的 custom`SNVUpdateError`时，我将换行符打印为`\n`s。

如果我`try:except`是`SVNUpdateError`，我可以漂亮地打印该行，但它作为标准输出出现，并传递到下一个代码块。我想提出异常，完全退出任务，并打印来自 SVN 客户端的结果，说明为什么在没有换行符和其他特殊字符的情况下事情会向南发展。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:06:21.617

由于您使用 Python 2.x：

```
# Usually a simpler error message without newlines
print >>sys.stderr, e.message
# If your message is overly complex, with newlines -- pick a line to print and process it
#print >>sys.stderr, e.message.split('\n')[-1].strip()
# Kill the process
sys.exit(1) 
```

这会将消息（在注释的打印语句中带有受限的换行符）打印到 stderr 并终止该进程。

**编辑**

如果字符串中有实际的“\\n”字符而不是字符串中的特殊字符“\n”（这意味着某人很可能在字符串创建的某个地方有一个类型），您可以在打印之前进行简单的字符串替换：

```
print >>sys.stderr, malformatedStr.replace("\\n", "\n") 
```

# scala - Scala：使用表示类型

> ID：11618915
> 
> 赞同：1
> 
> 时间：2012-07-23T19:10:56.833
> 
> 标签：scala

因为具有表示类型的特征是自引用的，所以声明一个变量包含该特征的实例有点困难。在这个例子中，我简单地声明一个变量包含一个 trait 的实例，声明一个函数接受并返回该 trait 的实例，然后使用该变量调用该函数：

```
trait Foo[+A <: Foo[A]]
case class Bar() extends Foo[Bar]
case class Grill() extends Foo[Grill]

// Store a generic instance of Foo
val b: Foo[_] = if(true) {
  Bar()
} else {
  Grill()
}

// Declare a function that take any Foo and returns a Foo of the same type
// that "in" has in the calling context
def echoFoo[A <: Foo[A]](in: A): A = in

// Call said function
val echo = echoFoo(b) 
```

它失败并出现错误：

```
inferred type arguments [this.Foo[_$1]] do not conform to method 
echoFoo's type parameter bounds [A <: this.Foo[A]]
val echo = echoFoo(b)
           ^ 
```

现在，这是有道理的，因为`[_]`就像`Any`（以我不完全理解的方式）。它可能想要的是类似的东西`Foo[Foo[_]]`，以便类型参数符合`A <: Foo[A]`. 但是现在有一个内部`Foo`有一个不一致的类型参数，这表明解决方案类似于`Foo[Foo[Foo[Foo[...`，这显然是不正确的。

所以我的问题可能可以归结为：“这个变量持有任何合法的`Foo`”的Scala语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:34:42.830

像这样的自引用类型参数有点问题，因为它们不正确。例如，可以定义如下类型：

```
case class BeerGarden extends Foo[Grill] 
```

如您所见， A <: Foo[A] 界限不够紧。在这种情况下，我更喜欢使用蛋糕模式和抽象类型成员：

```
trait FooModule {
  type Foo <: FooLike

  def apply(): Foo

  trait FooLike {
    def echo: Foo
  }
} 
```

现在您可以安全地递归地使用 Foo 类型：

```
object Foos {
  def echo(foo: FooModule#Foo) = foo.echo
} 
```

显然，这不是解决您可能希望使用此类类型解决的所有问题的理想解决方案，但重要的观察是 FooLike 是一个可扩展的特征，因此您始终可以继续改进 FooLike 以添加您需要的成员，在不违反类型成员旨在强制执行的界限的情况下。我发现，在我想要表示的类型集不是封闭的每一个真实世界的情况下，这大约是一个人能做的最好的事情。重要的是要看到 FooModule 对类型*和*实例构造函数都进行了抽象，同时强制执行“自类型”。你不能抽象一个而不抽象另一个。

有关此类事情的一些附加信息（以及我自己早期与递归类型斗争的一些记录）可在此处获得：

[https://issues.scala-lang.org/browse/SI-2385](https://issues.scala-lang.org/browse/SI-2385)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:00:28.727

虽然我同意存在传播泛型的问题，但当你遇到这个问题时，你应该会在屏幕上看到一个很大的警告，因为它通常表示设计不好。这些是关于该主题的一般建议。

*   如果您使用泛型，则类型参数的存在是有原因的。它允许您通过传入或接收 A 类型的参数以类型安全的方式与 Foo[A] 进行交互，并允许您对 A 施加约束。如果您丢失类型信息，您将失去类型安全，并且如果您不再需要泛型，则没有必要编写泛型类：您可以将所有签名更改为 Any 并进行模式匹配。

*   在大多数情况下，可以通过使用“typeclass”为集合实现类似 CanBuildFrom 方法的方法来避免递归类型

*   最后，type-projection (FooModule#Foo) 的应用很少，您可能希望查看依赖于路径的类型。然而，这些也几乎没有应用。

# php - 在php中格式化字符串

> ID：11618917
> 
> 赞同：0
> 
> 时间：2012-07-23T19:11:16.737
> 
> 标签：php

任何人都可以帮助这种格式。我在数据库中有一段说（例如）“黑色；蓝色；绿色”，我想从数据库中调用它，格式为 ; 成为新行\n。

所以它变成了

```
black 
blue 
green 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T19:12:32.710

```
$string = str_replace(';', "\n", $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:17:48.097

`$str = str_replace(";", "\n", $string);`

找到`;`并用换行符替换它。

[参考这个了解更多](http://php.net/manual/en/function.str-replace.php)

# haskell - Parsec csv 解析器解析额外的行

> ID：11618919
> 
> 赞同：2
> 
> 时间：2012-07-23T19:11:30.540
> 
> 标签：haskell, parsec

我已经定义了以下 Parsec 解析器，用于将 csv 文件解析为字符串表，即`[[String]]`

```
--A csv parser is some rows seperated, and possibly ended, by a newline charater
csvParser = sepEndBy row (char '\n')
--A row is some cells seperated by a comma character
row = sepBy cell (char ',')
--A cell is either a quoted cell, or a normal cell
cell = qcell <|> ncell
--A normal cell is a series of charaters which are neither , or newline. It might also be an escape character
ncell = many (escChar <|> noneOf ",\n")
--A quoted cell is a " followd by some characters which either are escape charaters or normal characters except for "
qcell = do
    char '"'
    res <- many (escChar <|> noneOf "\"")
    char '"'
    return res
--An escape character is anything followed by a \. The \ will be discarded.
escChar = char '\\' >> anyChar 
```

*我真的不知道这些评论是否太多和烦人，是否有帮助。作为 Parsec 菜鸟，他们会帮助我，所以我想我会添加它们。*

它工作得很好，但是有一个问题。它在表中创建一个额外的空行。因此，例如，如果我有一个包含 10 行的 csv 文件（*即只有 10 行。最后没有空行**），则`[[String]]`结构的长度为 11，最后一个`String`s 列表将包含 1 个元素。一个空的`String`（至少这是使用 打印时的样子`show`）。

我的主要问题是：为什么会出现这个额外的行，我能做些什么来阻止它？

我注意到的另一件事是，如果 csv 文件中的数据后面有空行，则这些行最终将成为`String`表中仅包含空行的行。我认为使用`sepEndBy`而不是`sepBy`会忽略多余的空行。不是这样吗？

*在十六进制编辑器中查看文本文件后，它似乎确实以换行符结尾，即使 vim 没有显示它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:36:38.397

如果您希望每一行至少有一个单元格，您可以使用`sepBy1`代替`sepBy`. 这也应该停止将空行解析为一行。和之间的区别与和`sepBy`之间`sepBy1`的区别相同：该版本仅解析至少一个元素的序列。所以变成了这样：`many``many1``1``row`

```
row = sepBy1 cell (char ',') 
```

此外，通常的样式是`sepBy1`在中缀中使用：`cell `sepBy1` char ','`. 这读起来更自然：你有一个“用逗号分隔的单元格”而不是“用逗号分隔的单元格”。

编辑：如果您不想接受空单元格，则必须使用以下命令指定`ncell`至少具有一个字符`many1`：

```
ncell = many1 (escChar <|> noneOf ",\n") 
```

# c# - Web 应用程序、WCF 服务和 Sharepoint Web 服务

> ID：11618921
> 
> 赞同：0
> 
> 时间：2012-07-23T19:11:39.113
> 
> 标签：c#, wcf, web-services, sharepoint, authentication

好的，所以场景是这样的：

我有多个使用 wcf 服务的 Web 应用程序。现在我正在更改 wcf 服务以使用 Sharepoint 2010 Web 服务，即 UserprofileService.asmx

**Web 应用程序 -> WCF 服务 -> Sharepoint WebService**

问题是，如果我在 wcf 服务中使用以下代码，它可以与 Sharepoint 服务一起正常工作，并且当我从我的机器测试 wcf 服务时，我能够访问 sharepoint userprofile 服务中可用的方法。

**C＃**

```
 service.ClientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;
        service.ChannelFactory.Credentials.Windows.ClientCredential = System.Net.CredentialCache.DefaultNetworkCredentials; 
```

**网页配置**

```
<security mode="TransportCredentialOnly"> 
<transport clientCredentialType="Ntlm" proxyCredentialType="None" 
realm="" /> 
<message clientCredentialType="UserName" algorithmSuite="Default" /> 
</security> 
```

但是我不再能够从我的 Web 应用程序调用 WCF 服务，因为 Web 应用程序使用以下内容。

```
<security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None" realm="">
              <extendedProtectionPolicy policyEnforcement="Never"/>
            </transport>
            <message clientCredentialType="Windows" negotiateServiceCredential="true" algorithmSuite="Default" establishSecurityContext="true"/>
          </security> 
```

我需要一种方法来配置 WCF 服务，使其仍然能够与所有现有应用程序对话，并且能够同时与 Sharepoint 服务对话。

最重要的是，我想使用运行 WCF 服务的服务帐户（例如：b2\deltaUser）来访问共享点 userprofile 服务中不同用户的配置文件。我需要使用模拟吗？如果是，我该如何在这里使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:16:46.137

解决方案很简单。创建两个单独的绑定就可以了。:)

# iphone - 点击后退按钮后如何将数据从当前屏幕传回前一个屏幕，ios

> ID：11618932
> 
> 赞同：0
> 
> 时间：2012-07-23T19:12:24.590
> 
> 标签：iphone, ios

单击按钮后，我将数据从 FirstView 传输到 SecondView。

```
FirstView.h
@property (strong, nonatomic) NSString  *stringOfFirstView; 
```

> ```
> FirstView.m
> 
>  - (void)pushToSecond {
>          SecondView *controller   =   [[SecondView alloc] initWithNibName:@"SecondView" bundle:nil];
>          controller.stringOfSecondView          =   self.stringOfFirstView;
>          [self.navigationController pushViewController:controller animated:NO];
> 
>         } 
> ```

在 SecondView 中，我有

```
SecondView.h
    @property (strong, nonatomic) NSString  *stringOfSecondView; 
```

在 SecondView，我的目标是通过单击后退按钮返回 FirstView，并且也想分配`stringOfSecondView`给`stringOfFirstView`

**问题 ：**

```
How can I assign stringOfSecondView to stringOfFirstView via clicking back button. 
```

只是让你知道，我正在检测 SecondView 中的后退按钮上的点击事件，方法是

```
SecondView.m
- (void) viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:YES];
    if ([self.navigationController.viewControllers indexOfObject:self]==NSNotFound)
        NSLog(@"will show onto console");  

} 
```

但是我被卡住了如何将数据传回

如果您对此问题有任何线索，请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:16:36.497

我会使用代表。因此，在您的 SecondView 中，您需要创建一个将数据发送回您的 FirstView 的协议。您的 FirstView 将成为 SecondView 的代表。有大量关于如何制作委托的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:21:03.400

基本上你有2个选择：

1.  在`secondView`：持有参考`firstView`
2.  更灵活的选择：如果您可能想要重用该功能，请定义一个协议。让我们`firstView`实现这个协议，并让我们`firstView`成为代表 `secondView`

在这两种情况下，`secondView`都会有一个分配/弱属性，它存储对`firstView`. 并将`firstView`实现一个方法，该方法接收一个 NSString 并将其存储在`stringOfFirstView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:21:59.283

不要将其视为通过单击后退按钮进行分配可能会有所帮助。本质上，当您单击后退按钮时，您的 FirstView 将重新获得控制权。在它重新获得控制权时，您可以简单地向 SecondView 询问 stringOfSecondView 的值并将其存储在您喜欢的任何位置，例如在 stringOfFirstView 中。

为了向 SecondView 询问此信息，您可能希望通过将 SecondView 的 ID 存储在 FirstView 的实例变量中来“记住”SecondView 是谁。另外，如果您不进行自动引用计数，请记住正确保留和释放它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:22:16.223

只是为了补充 ttran 的答案，您可以在这里查看：http: [//mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)。

基本思想是创建一个协议（在其中定义应该由采用此协议的类实现（可选或不实现）的方法。这意味着您的 FirstViewController 可以采用协议，因此您的 SecondViewController 可以知道一些方法第一个视图控制器有。

因此，缺少的部分是第二个视图控制器需要引用第一个视图控制器。您可以通过委托来做到这一点（委托通常是一个弱属性）。

同样，您可以通过阅读协议和委托的基础知识来了解更多信息并理解此过程。

# iphone - Objective-C：AutoresizingMask + 2 Subviews = 挣扎

> ID：11618936
> 
> 赞同：3
> 
> 时间：2012-07-23T19:12:35.133
> 
> 标签：iphone, objective-c, ios, ios5, autoresizingmask

* * *

**解决方案：**对于那些在未来某一天看到这个的人来说，我使用的解决方案确实是`viewDidLayoutSubviews`. 解决方案实际上相当复杂——每次页面需要重新布局时，我都必须计算几个缩放值并动态调整艺术视图的大小。有几个奇怪的问题需要处理，但在每个都被取消之后，实施感觉非常可靠。

如果以后有人遇到类似问题，请告诉我，我可以发布相关代码。

* * *

我有一个“空白”UIView，一个子视图是一个包含单个图像的 UIImageView，第二个子视图基本上是 CGContext 弧线和所有这些的集合。

**我在哪里：**我将 UIImageView 子视图放在 UIView 的顶部，以便它的图像是“背景”。然后我将 CGContext arcs andlines 子视图放在上面（为了清楚起见，我将其称为 Art 子视图）。都好。一切都显示完美且对齐。

**问题：**当我旋转时，事情变得很糟糕。Art 子视图上的弧线和线条最终位于错误的坐标处，并且根据我的 autoresizingmask 设置，图像会被拉伸等。我可以一次修复其中一个问题，但我找不到正确的组合来修复他们俩！

**我尝试过的事情：**我已经尝试了几乎每个 autoresizingMask 选项和选项组合，但是根据上述我不能完全解决这些问题。鉴于我还尝试在 viewDidLayoutSubviews 中使用一些自定义代码，但这感觉非常脆弱，与使用 autoresizingMasks 相比，可扩展性要差得多。所以我在取得了一些名义上的进步后放弃了这条道路。

**我学到了什么：**只要我将 UIImageView 框架和 Art 子视图框架绑定到相同的尺寸，那么弧线和线条就会保持在正确的坐标上。这可能是陈述我的目标的最简单方法：让 UIImageView 保持正确的纵横比（不仅是其中的图像，还包括视图本身），然后将 Art 子视图与其框架完全匹配——即使是屏幕旋转等

这是我想要实现的图表：

`+`= UIView

`~`= UIImageView 子视图

`.`= 艺术子视图

**肖像**

其中 UIImageView 中的图像基本上占据了整个屏幕（虽然不完全），并且 Art 子视图在其顶部分层，下面的点代表粗线/弧线。

```
++++++++++
+~~~~~~~~+
+~   .  ~+
+~  .   ~+
+~ .    ~+
+~ .    ~+
+~~~~~~~~+
++++++++++ 
```

**景观**

其中 UIImageView 子层保持其纵横比，而艺术子层保持“锁定”到 UIImageView 中的图像。

```
++++++++++++++++++++++++++
+         ~~~~~~~~       +
+         ~   .  ~       +
+         ~  .   ~       +
+         ~ .    ~       +
+         ~ .    ~       +
+         ~~~~~~~~       +
++++++++++++++++++++++++++ 
```

**我的视图控制器**（我认为问题所在 - 还删除了所有 autoresizingMask 设置以清理代码）

```
- (void)viewWillAppear:(BOOL)animated {
    // get main screen bounds & adjust to include apple status bar
    CGRect frame = [[UIScreen mainScreen] applicationFrame];

    // get image - this code would be meaningless to show, but suffice to say it works
    UIImage *image = [.. custom method to get image from my image store ..];

    // custom method to resize image to screen; see method below
    image = [self resizeImageForScreen:image];

    // create imageView and give it basic setup
    imageView = [[UIImageView alloc] initWithImage:image];
    [imageView setUserInteractionEnabled:YES];

    [imageView setFrame:CGRectMake(0,
                                   0,
                                   image.size.width, 
                                   image.size.height)];

    [imageView setCenter:CGPointMake(frame.size.width / 2,
                                     frame.size.height / 2)];

    [[self view] addSubview:imageView];

    // now put the Art subview on top of it
    // (customArtView is a subclass of UIView where I handle the drawing code)
    artView = [[customArtView alloc] initWithFrame:imageView.frame];

    [[self view] addSubview:artView];
} 
```

**resizeImageForScreen: 方法**（这似乎工作正常，但我想我还是会包括它）

```
- (UIImage *)resizeImageForScreen:(UIImage *)img {

    // get main screen bounds & adjust to include apple status bar
    CGRect frame = [[UIScreen mainScreen] applicationFrame];

    // get image
    UIImage *image = img;

    // resize image if needed
    if (image.size.width > frame.size.width || image.size.height > frame.size.height) {

        // Figure out a scaling ratio to make sure we maintain the same aspect ratio
        float ratio = MIN(frame.size.width / image.size.width, frame.size.height / image.size.height);

        CGRect newImageRect;
        newImageRect.size.width = ratio * image.size.width;
        newImageRect.size.height = ratio * image.size.height;
        newImageRect.origin.x = 0;
        newImageRect.origin.y = 0;

        // Create a transparent context @ the newImageRect size & no scaling
        UIGraphicsBeginImageContextWithOptions(newImageRect.size, NO, 0.0);

        // Draw the image within it (drawInRect will scale the image for us)
        [image drawInRect:newImageRect];

        // for now just re-assigning i since i don't need the big one
        image = UIGraphicsGetImageFromCurrentImageContext();

        // Cleanup image context resources; we're done!
        UIGraphicsEndImageContext();

    }

    return image;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:44:34.823

没有自动调整大小标志和内容模式的组合可以满足您的需求。使用`viewDidLayoutSubviews`是处理布局的一种合理方法。这就是它存在的原因：自动调整大小的标志非常有限。

另一种方法是更改​​您的`-[ArtView drawRect:]`方法，以便自动调整大小标志可以执行您想要的操作。您可以使您的方法实现与实现 for`drawRect:`相同的算法。`UIImageView``UIViewContentModeScaleAspectFit`

# solr - 来自 Solrj 的引用格式 json

> ID：11618937
> 
> 赞同：2
> 
> 时间：2012-07-23T19:12:36.017
> 
> 标签：solr, solrj

看起来 Solrj 的 QueryResponse 没有办法给你一个带有 wt=on 的引用 Json 字符串。我收到的都是这样的

{responseHeader={status=0,QTime=2,params= {fl=id,productName,imageFront,priceEng,priceEngExp...

问题：

1）我在这里错过了什么吗？或者 Solrj 无法从 Solr 服务器正确获取 json 响应。

2）现在在我的客户端上，如果我从 Solrj 转换未引用的 json 字符串，这是否意味着它已完成两次，一次在服务器时间，一次在 Solrj 客户端时间？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T06:11:42.997

您可以通过将 wt=json 设置为 Solr 查询来获得 JSON 响应。示例 URL 如下所示：

> localhost:8983/solr/select/?q= *:* &rows=10&indent=on&wt=json

您无法使用 Solrj 获得 JSON 响应。您不需要为此使用 Solrj。通过向上面的 URL 发送 HTTP 请求，您可以获得 json 响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-22T07:51:54.880

使用较新版本的 Solr（从 4.7.0 开始）可以直接以 json 格式返回查询响应。这可以通过 NoOpResponseParser 完成。

```
SolrQuery query = new SolrQuery();
QueryRequest req = new QueryRequest(query);

NoOpResponseParser rawJsonResponseParser = new NoOpResponseParser();
rawJsonResponseParser.setWriterType("json");
req.setResponseParser(rawJsonResponseParser);

NamedList<Object> resp = mySolrClient.request(req);
String jsonResponse = (String) resp.get("response");

System.out.println(jsonResponse ); 
```

# asp.net-mvc - DataEntities 和 Controller 之间的中间层

> ID：11618938
> 
> 赞同：0
> 
> 时间：2012-07-23T19:12:36.773
> 
> 标签：asp.net-mvc, entity-framework, linq-to-entities

我正在使用 Model First 阅读 MVC3 和 Linq to Entities 的本教程。
[http://msdn.microsoft.com/en-us/data/gg685489.aspx](http://msdn.microsoft.com/en-us/data/gg685489.aspx)

文章中的一句话说

> 我们的控制器将使用 BlogDataEntities 为我们检索数据。在更高级的应用程序中，您应该进一步分离逻辑并且不会直接从控制器使用 BlogDataEntities。

MVC 应用程序中实体和控制器之间的其他层的一般结构是什么？什么目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:20:23.050

我通常有一个混蛋 ViewModel（参见[http://en.wikipedia.org/wiki/Model_View_ViewModel](http://en.wikipedia.org/wiki/Model_View_ViewModel)），其中包含业务逻辑，可以从 EF 获取/保存，并且是视图绑定的内容。控制器做的不多，只是实例化了视图模型，并根据控制器的动作，在视图模型中调用一个方法。

有些人可能会进一步打破它，并拥有一个完整的 ViewModel，其中没有逻辑，只有数据。具有所有逻辑的业务层，并且能够将数据从 EF 移动到 ViewModel，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:39:51.563

在文章中“BlogDataEntities”不是某些特定实体类的名称（顾名思义），而是 DbContext 的名称。

我想这意味着您将尝试通过不实例化 DbContext 而是通过使用像这样的存储库实现来隐藏您使用 EF

[http://msdn.microsoft.com/en-us/data/ff707264#_Toc261428890](http://msdn.microsoft.com/en-us/data/ff707264#_Toc261428890)

# node.js - 无法解决 NodeJS 中的 EADDRINUSE

> ID：11618939
> 
> 赞同：0
> 
> 时间：2012-07-23T19:12:38.470
> 
> 标签：node.js, express

我正在尝试为节点 (https://github.com/gomfunkel/node-mailchimp/) 集成 mailchimp OAuth 插件，但我不断收到 EADDRINUSE 错误，我不确定问题是什么。我知道错误意味着什么，我只是不知道如何阻止它。

我的快速服务器在端口 3000 上运行。mailchimp 类显然想要生成一个服务器 - 它默认为端口 8100。我尝试更改这两个端口均无济于事。可能是什么问题？

这是我正在使用的路线代码：

```
exports.test = function(req, res){
  var MailChimpOAuth = require('mailchimp').MailChimpOAuth;
  var MailChimpAPI = require('mailchimp').MailChimpAPI;

var options = {
    clientId: '00000000',
    clientSecret: 'abcdefghijklmnop',
    serverUri: 'http://localhost',
    redirectUri: 'http://localhost',

};

var oauth = new MailChimpOAuth(options); 
```

现在我的初始请求有效，任何后续请求都会导致错误 - 可能遇到已经生成的服务器。这是 mailchimp 类中的一个错误，应该查看它是否已经产生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:09:07.050

据我所知，您正在为`MailChimpOAuth`每个请求创建一个新请求，因此当您的第二个请求出现时，您已经有一台服务器正在监听 8100。

您需要在初始化时完成所有设置*，*并在您的请求处理程序中引用*已经实例化* `MailChimpOAuth`的实例。

作为一般规则，如果你发现自己的`require(...)`代码运行不止一次，你的逻辑需要重新思考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T04:58:40.337

赶紧跑：

`killall -9 node`

再试一次。它对我有用

# html - html 5 videojs不会出现在iphone 3G上

> ID：11618944
> 
> 赞同：1
> 
> 时间：2012-07-23T19:12:52.570
> 
> 标签：html, html5-video, mp4, ogg, video.js

这一切都在iphone上搞砸了。这是代码

```
<video id="my_video_1" class="video-js vjs-default-skin" controls
preload="auto" width="540" height="425" poster="/sites/all/themes/iws/videos/image001.jpg"
data-setup="{}">
<source src="/sites/all/themes/iws/videos/overview-IWS-proposal.mp4" type="video/mp4">
<source src="/sites/all/themes/iws/videos/overview-IWS-proposal.ogg" type="video/ogg">
<source src="/sites/all/themes/iws/videos/overview-IWS-proposal.webm" type="video/webm">

</video> 
```

海报图片和播放按钮会显示，但是播放按钮全乱了（没有居中并且在右下角疯狂地伸展），当你点击它时它甚至不播放。这是你连接到wifi的时候

当您未连接到 wifi (3g) 时，它只会显示一个带有删除线的播放按钮（如禁止吸烟标志）

这是进一步文档的页面

[http://www.imageworksstudio.com/content/video-testing](http://www.imageworksstudio.com/content/video-testing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:21:51.227

我自己有一点问题，不确定是否是同一件事：旧 iPhone 只能处理旧编解码器。来自苹果——

> 桌面上的 Safari 支持安装的 QuickTime 版本可以播放的任何媒体。这包括使用 QuickTime 本身不支持的编解码器编码的媒体，前提是编解码器作为 QuickTime 编解码器组件安装在用户的计算机上。
> 
> iOS（包括 iPad）上的 Safari 目前支持未压缩的 WAV 和 AIF 音频、MP3 音频以及 AAC-LC 或 HE-AAC 音频。HE-AAC 是首选格式。
> 
> iOS 上的 Safari（包括 iPad）目前支持 MPEG-4 视频（基线配置文件）和使用 H.264 视频（基线配置文件）编码的 QuickTime 电影和一种受支持的音频类型。
> 
> iPad 和 iPhone 3G 及更高版本支持 H.264 Baseline profile 3.1。早期版本的 iPhone 支持 H.264 Baseline profile 3.0。

[https://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW1](https://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T19:29:01.723

这很可能是编码问题。对于 3G，您需要使用 Baseline@3.0 编解码器配置文件进行编码，而对于 3GS，您可以使用 Baseline@3.0 或 Baseline@3.1 编解码器进行编码。

这是一个有用的链接： [http ://blog.zencoder.com/2010/09/30/how-to-encode-video-for-mobile-use/](http://blog.zencoder.com/2010/09/30/how-to-encode-video-for-mobile-use/)

# python - 在 Python 中使用分隔符对 CSV 文件进行排序

> ID：11618947
> 
> 赞同：1
> 
> 时间：2012-07-23T19:13:03.037
> 
> 标签：python, csv

如何读取具有以下内容的 .csv 文件

```
$C=2$A=3$B=1$ 
```

然后创建一个新的 .csv 文件，其内容相同，但`$`更改为`,`并按字母顺序排序，如下所示：

```
A=3,B=1,C=2 
```

谢谢！

编辑：

这是我的以下代码。它最终在输出的开头给出了一个额外的逗号。

```
input = csv.reader(open('inputfile.csv','r'), delimiter='$')
output = open('outputfile.csv','w')
try:
    writer = csv.writer(output)
    for column in input:
        writer.writerow(sorted(column))
        print (sorted(column))
finally:
    out.close() 
```

现在我的输入是：

> $C=2$A=3$B=1$

我的输出是：

> ,A=3,B=1,C=2

我希望它是：

> A=3,B=1,C=2

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:22:26.407

```
with open('test.csv') as in_file, open('new.csv', 'w') as out_file:
    for line in csv.reader(in_file, delimiter='$'):
        out_file.write(','.join(sorted(line)[2:])+'\n') 
```

基本上这样做是：

*   打开输入为`in_file`
*   打开输出为`out_file`
*   使用作为输入文件`$`的分隔符初始化 CSV 阅读器`in_file`
*   遍历每一行，执行以下操作：
    *   对所有元素进行排序（解析后）
    *   丢弃前 2 个（因为由于每行的开始/结束分隔符，它们总是空字符串）
    *   `,`使用作为分隔符重新组合这些元素
    *   用尾随换行符将其写入文件`\n`

**编辑**`$`：通过删除从 CSV 解析出来的空元素（`[2:]`位）来修复开始/结束符号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:22:11.793

您可以使用 a`csv.reader`来读取分隔符设置为 的文件`'$'`。然后对于返回的每一行，去掉空元素并对其余的进行排序：

```
row = sorted([item for item in row if item]) 
```

# php - 修复多维数组

> ID：11618949
> 
> 赞同：1
> 
> 时间：2012-07-23T19:13:07.070
> 
> 标签：php, multidimensional-array, echo

我正在尝试制作一个应该像这样打印出来的多维数组（没有格式化）：

```
array(3) {
  [0]=> array(5) {
    [0]=> int(0) 
    [1]=> string(5) "Arena" 
    [2]=> string(18) "2012-05-3017:00:00" 
    [3]=> string(18) "2012-05-3000:00:00" 
    [4]=> string(33) "Masquerade Checkin (Participants)" 
}, 

  [1]=> array(5) {
    [0]=> int(0) 
    [1]=> string(10) "Workshop 1"
    [2]=> string(18) "2012-05-3017:00:00"
    [3]=> string(18) "2012-05-3000:00:00"
    [4]=> string(15) "Death Note (Live)" 
},

  [2]=> array(5) {
    [0]=> int(0) 
    [1]=> string(7) "Video 6" 
    [2]=> string(18) "2012-05-3017:00:00"
    [3]=> string(18) "2012-05-3000:00:00"
    [4]=> string(26) "Takeuchi Fan Panel" 
  }
} 
```

请注意，从上面的代码中，内部 array() 长度始终为 5。

下面是我的代码：

```
$loopsArray = array();
$data=array();
// graphing info come in here. 
foreach ($events as $key => $event) {

    $el=$event['event_location'] ;
    $eln=$event['event_locationName'];
    $ed=$event['event_date'];
    $es=$event['event_start'];
    $ee=$event['event_end'];
    $en=$event['event_name'];

    array_push($loopsArray,$el,$eln, $ed.$es,$ed.$ee,$en);
    array_push($data,$loopsArray);

}
var_dump($data); 
```

这里打印出来

```
array(27) {
  [0]=> array(5) {
    [0]=> int(0)
    [1]=> string(5) "Arena"
    [2]=> string(18) "2012-05-3017:00:00"
    [3]=> string(18) "2012-05-3000:00:00"
    [4]=> string(33) "Masquerade Checkin (Participants)" 
  } 

  [1]=> array(10) { 
    [0]=> int(0) 
    [1]=> string(5) "Arena" 
    [2]=> string(18) "2012-05-3017:00:00"
    [3]=> string(18) "2012-05-3000:00:00"
    [4]=> string(33) "Masquerade Checkin (Participants)"
    [5]=> int(13)
    [6]=> string(11) "Autograph 1"
    [7]=> string(18) "2012-06-2419:00:00"
    [8]=> string(18) "2012-06-2422:00:00"
    [9]=> string(17) "Parents and Anime" 
  } 
  //... continues 
} 
```

请注意，内部数组的长度每次迭代都会加倍。数组（5）数组（10）数组（15）数组（20）。

它将最后一个内部数组中的最多 60 个元素加倍。每个内部数组中应该只有 5 个元素。我不明白为什么它会加倍或如何解决它。你能看看我的循环，让我知道如何修复它吗？

我必须使用这个多维数组才能让这段代码在 JpGraph 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:18:58.080

**提示：**写`$loopsArray = array();`在里面`foreach`

### 更好的方法

代替

```
array_push($loopsArray,$el,$eln, $ed.$es,$ed.$ee,$en);
array_push($data,$loopsArray); 
```

尝试这个

```
$temp = array ($el,$eln, $ed.$es,$ed.$ee,$en);
$data[] = $temp; 
```

# mysql - MySQL：不使用 Perl 创建自定义数据目录

> ID：11618950
> 
> 赞同：1
> 
> 时间：2012-07-23T19:13:07.560
> 
> 标签：mysql

MySQL 提供了一个用于初始化数据库存储的新数据目录的脚本。

不幸的是，在 Windows 的 noinstall zip 中，它只是一个 Perl 脚本。

我想在不使用 Perl 的情况下初始化一个新的数据目录，因为我正在构建一个要从多台机器启动的自动安装，并且我想减少软件安装工作。

该脚本是否有不需要安装 Perl 的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:13:07.560

如[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/multiple-data-directories.html)所述，您可以`data`从 MySQL zip 中复制目录到任何您想要的地方。

然后您只需要`mysqld`使用该`--datadir=new_path`选项启动，或者在您将使用`datadir=new_path`的`my.ini`/中指定。`my.cnf`

# apache - Apache ProxyPassReverse 值

> ID：11618952
> 
> 赞同：0
> 
> 时间：2012-07-23T19:13:09.050
> 
> 标签：apache, jakarta-ee, jboss, proxy

我们的 IT 正在尝试配置新的 apache/jboss/apj 设置。

当我浏览到 [http://domain.com/jboss/test.jsp](http://domain.com/jboss/test.jsp) 和 System.out.println`request.getRequestURL()`

我得到[http://domain.com/test.jsp](http://domain.com/test.jsp) （没有 jboss）

因此，我的应用程序遇到了很多 404。

IT 部门表示，Jboss 因为代理，所以没有 URL 的 /jboss/ 部分的概念。他们是正确配置还是我需要更改我的代码。对我来说，如果我必须硬编码 url 路径，我的代码是不可移植的。

## 编辑-

这是他们告诉我的：

```
<Location /jboss>
    ProxyPass balancer://cluster stickysession=JSESSIONID 
    ProxyPassReverse https://domain.com/jboss/
</Location> 
```

本文支持我的问题 [https://sosiouxme.wordpress.com/2010/08/18/fixing-apache-httpd-reverse-proxy-redirect-rewrites/](https://sosiouxme.wordpress.com/2010/08/18/fixing-apache-httpd-reverse-proxy-redirect-rewrites/)

Edit2 在我们的旧服务器上，在几个应用程序使用的登录框架 servlet 中，我有 response.sendRedirect("login.jsp?message=您已成功注销。");

为了让新代理能够正常工作，我必须将其重新编码为 response.sendRedirect("/jboss/AppName/login.jsp?message=您已成功注销。");

我失去了后一种语法的可移植性和可重用性。

注意的错误（在 Apache，而不是 jboss 中）
`response.sendRedirect("login.jsp?message=You have successfully logged off.");`
`File does not exist: /WEB/wwwssl/AppNamelogin.jsp`
在我的 appname 和 login.jsp 之间没有“/”

注意 AppName的错误（在 Apache 中，而不是 jboss 中）
`response.sendRedirect("/login.jsp?message=You have successfully logged off.");`
`File does not exist: /WEB/wwwssl/login.jsp`
丢失

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:44:57.107

请注意，[您提到的文章](https://sosiouxme.wordpress.com/2010/08/18/fixing-apache-httpd-reverse-proxy-redirect-rewrites/)使用[`mod_proxy_html`( `ProxyHTMLURLMap ProxyHTMLURLMap / /ajp/nocluster/`)](http://apache.webthing.com/mod_proxy_html)，它将修复链接以使用正确的路径前缀。这不是`mod_proxy`Apache Httpd 提供的默认模块的一部分。

而不是将这些指令放在一个`<Location>`块中，使用单行语法可能会正确地转发路径：

```
ProxyPass /jboss balancer://cluster stickysession=JSESSIONID 
```

# sql - 松鼠 SQL 错误代码 102

> ID：11618959
> 
> 赞同：1
> 
> 时间：2012-07-23T19:13:43.383
> 
> 标签：sql

我很困惑——我在 Squirrel SQL 中打开了我的数据库来执行一些 SQL，然后在我的 SQL 输入窗口中输入：

```
select * from * 
```

无论出于何种原因，它给了我这个输出：

```
Error: Incorrect syntax near '*'.
SQLState:  42000
ErrorCode: 102 
```

有谁知道这意味着什么？很难进行谷歌搜索，因为谷歌将星号视为特殊字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:23:26.980

我认为第二个`*`是无效的，应该是一个表名：

```
SELECT * FROM MyTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:28:31.720

您需要指定表名。

```
 SELECT * FROM myTable 
```

但是，如果您知道这一点并且您实际上正在寻找一种`SELECT`从所有表格中获取的方法，那么恐怕您将不得不像这样一个一个地键入它们：

```
 SELECT * FROM myTable1
   UNION ALL
   SELECT * FROM myTable2
   UNION ALL
   SELECT * FROM myTable3
   ... 
```

另请记住，如果您必须像我在第二个示例中所做的那样选择，那么您的数据在数据库中的组织方式存在问题。如果是这种情况，您应该看看[这篇关于 Data Normalization](http://databases.about.com/od/specificproducts/a/normalization.htm)的文章。

# android - 如何获得 x,y 坐标

> ID：11618960
> 
> 赞同：3
> 
> 时间：2012-07-23T19:13:43.717
> 
> 标签：android, android-layout

我的 Android 应用程序中的一个活动具有两个图像视图的相对布局，它们设置在一个 xml 布局文件中。如何以编程方式获取图像视图的 x,y 位置

这些坐标是否会因屏幕尺寸和密度而异？

我想要做的是让用户触摸 image1，然后将其动画移动到 image2 的位置。

显然，因为我将这些图像放在 xml 中，所以我知道它们的 x,y 坐标，但我担心这些坐标会因屏幕尺寸和密度而异。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T19:27:25.283

您可以使用`View.getTop(), View.getBottom(), View.getLeft(), and View.getRight()`. 这些将返回`top, bottom, left and right`视图边缘相对于父对象的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:24:02.267

如何获得 x 和 y

```
int[] t = new int[2];
int[] cordinatesofImageView1 = imageView1.getLocationOnScreen(t);

int[] cordinatesofImageView2 = imageView2.getLocationOnScreen(t); 
```

您必须调整屏幕尺寸的控制权，这是如何检测到的链接。

[使用代码确定设备屏幕类别（small、normal、large、xlarge）](https://stackoverflow.com/questions/5015094/determine-device-screen-category-small-normal-large-xlarge-using-code)

或者

您可以参考这个答案，这可能会对您有所帮助。

[两个视图的交换位置](https://stackoverflow.com/questions/11458660/interchange-location-of-two-views)

谢谢 ：）

# java - Eclipse Java 远程调试：如何确保我在项目中获得的代码与在 JVM 中运行的代码相同？

> ID：11618961
> 
> 赞同：0
> 
> 时间：2012-07-23T19:13:45.650
> 
> 标签：java, eclipse, tomcat, web-applications, remote-debugging

我有一些现有的源代码和 webapp 的 jars。我正在尝试使用 tomcat 运行 webabb，然后使用 eclipse 远程调试 tomcat 服务器以了解 webapp 发生了什么。

然而，出于某种原因，eclipse 拒绝捕获任何断点。我已经将服务器上 jar 的 md5sum 与我在调试项目中得到的 jar 进行了比较，并且它们匹配。

有什么方法可以让 eclipse 将远程 JVM 中的 java 类与本地 jar 中的 java 类协调起来，并确保它们对应。或者，也许，更具体地说，与我设置的断点相关的代码是否实际上已加载到远程 JVM 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:51:10.963

Check that on the Java Compiler properties page for the java projects in question that the class file options are all checked (you only need the first three but having all five checked is a good thing for debugging)

# function - 用于填充临时表的 TSQL 聚合函数

> ID：11618964
> 
> 赞同：0
> 
> 时间：2012-07-23T19:14:00.823
> 
> 标签：function, tsql, aggregate, temp-tables

我想运行一个 T-SQL 脚本，在其中创建一个临时表，该表将由另一个表的某个字段聚合，称为表 X。此临时表的其余字段将通过对以下字段执行聚合函数来填充表 X。然后我想在填充临时表后在另一个表（称为表 Y）上与我的临时表进行 MERGE / WHEN MATCHED。

如何创建此临时表并使用聚合函数填充它？（我已经编写了问题的 MERGE 部分）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:17:47.050

要创建临时表，您可以执行以下操作：

```
create table #temp
(
    id int,
    col1 int
) 
```

然后你会写一个`INSERT INTO`

```
INSERT INTO #temp
SELECT col1, sum(col2)
FROM yourTable 
```

创建临时表后，您可以在存储过程中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:47:32.690

bluefeet 发布了什么，或者：

```
with rsAggregated as
(
    select id, sum(x)
    from tableX
    group by id
)
merge... 
```

或者，没有看到您的合并语句，只是

```
merge tableY using 
(
    select id, sum(x)
    from tableX
    group by id
) rsAggregated 
on rsAggregated.id = tableY.id
when matched
  ...
when not matched
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-11T22:06:41.910

您可以使用一个 SELECT 语句完成所有操作

```
SELECT col1 AS ID, sum(col2) AS col1 INTO #temp FROM yourTable 
```

# mysql - 存储过程中的 SQL 变量 ORDER BY 子句

> ID：11618967
> 
> 赞同：1
> 
> 时间：2012-07-23T19:14:19.453
> 
> 标签：mysql, sql

我有一个 SQL 查询，它目前是从 PHP 中的字符串粘贴在一起的，我想把它变成一个存储过程。

目前它就像

```
function db_get ($mode)
{
    $order_by = '';
    if ('name'===$mode)
        $order_by = '`name` DESC';
    if ('date'===$mode)
        $order_by = '`date` DESC';
    // ...

    return db_all_rows ("SELECT foo FROM bar WHERE baz ORDER BY $order_by");
} 
```

我不认为列的名称可以作为存储过程的参数，所以看来要么我必须为每种需要的排序方式复制粘贴整个查询，要么做某种像这样的数字破解

```
CREATE PROCEDURE GetStuff (IN use_name INT, IN use_date INT, ...)
    SELECT foo, (name*use_name + date*use_date + ...) AS order_by_value
    FROM bar WHERE baz ORDER BY order_by_value 
```

我不确定哪个更糟。

我更喜欢数字破解而不是重复，除非它会搞砸优化器。

它会搞砸优化器吗？

或者更好的是，我可以正确参数化 order-by 子句吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:22:31.803

尝试这个：

```
SELECT foo
FROM bar
WHERE baz
ORDER BY
    case when $order_by='name' then name else null end
,   case when $order_by='date' then date else null end 
```

这个想法是构建所有可能`ORDER BY`列的列表，并用条件保护每个列，`when`以便其中只有一个是“活动的”。

# ruby-on-rails - rspec 单元测试

> ID：11618971
> 
> 赞同：1
> 
> 时间：2012-07-23T19:14:55.303
> 
> 标签：ruby-on-rails, unit-testing, rspec, rspec-rails

当我开始使用`$ bundle exec rspec spec/`RSpec 进行单元测试时...

```
admin@ADMINPC /d/ruby/rails/projects/CMS (static-pages)
$ bundle exec rspec spec/
d:/ruby/rails/projects/CMS/spec/controllers/pages_controller_spec.rb:1:in `requi
re': cannot load such file -- spec_helper (LoadError)
        from d:/ruby/rails/projects/CMS/spec/controllers/pages_controller_spec.r
b:1:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1
1.1/lib/rspec/core/configuration.rb:780:in `load'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1
1.1/lib/rspec/core/configuration.rb:780:in `block in load_spec_files'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1
1.1/lib/rspec/core/configuration.rb:780:in `map'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1
1.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1
1.1/lib/rspec/core/command_line.rb:22:in `run'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1
1.1/lib/rspec/core/runner.rb:69:in `run'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.1
1.1/lib/rspec/core/runner.rb:8:in `block in autorun' 
```

如何解决这个问题？

文件 pages_controller_spec.rb：

```
require 'spec_helper'

describe PagesController do

  describe "GET 'home'" do
    it "returns http success" do
      get 'home'
      response.should be_success
    end
  end

  describe "GET 'contact'" do
    it "returns http success" do
      get 'contact'
      response.should be_success
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:19:29.447

首先：

```
rails g rspec:install 
```

它将创建文件`spec_helper`。

比您可以准备数据库进行测试：

```
rake db:test:load
rake db:test:prepare 
```

# javascript - Javascript（jQuery）两个从/到范围选择价格

> ID：11618972
> 
> 赞同：-1
> 
> 时间：2012-07-23T19:14:54.790
> 
> 标签：javascript, jquery

我有两个选择表单域。一个是“price_from”，另一个是“price_to”。问题是我想阻止用户选择例如price_from“10000”和price_to“1000”，所以基本上我必须找到一些基于“price_to”值设置“price_to”字段值的javascript函数。即：如果我选择 price_from ="3000"，price_from 字段将显示来自“4000”的值。当然反之亦然。如果有人再次更改“price_to”或“price_from”字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:27:12.070

尝试这个：

**HTML：**

```
<select id="from1" relatedTo="to1">
    <option value="10">10</option>
    <option value="20">20</option>
    <option value="30">30</option>
    <option value="40">40</option>
</select>

<select id="to1" relatedTo="from1">
    <option value="10">10</option>
    <option value="20">20</option>
    <option value="30">30</option>
    <option value="40">40</option>
</select>

<br/>

<select id="from2" relatedTo="to2">
    <option value="100">100</option>
    <option value="200">200</option>
    <option value="300">300</option>
    <option value="400">400</option>
</select>

<select id="to2" relatedTo="from2">
    <option value="100">100</option>
    <option value="200">200</option>
    <option value="300">300</option>
    <option value="400">400</option>
</select> 
```

**JavaScript：**

```
// function to valide two selects
function validateSelects( fromSelector, toSelector ) {

    // registering the change event to the "to" select
    $( toSelector ).change(function() {

        var fromSelector = "#" + $(this).attr( "relatedTo" );
        var toSelector = "#" + $(this).attr( "id" );

        // compares the value of the selected item with the from select
        if ( $(this).val() > $( fromSelector ).val() ) {

            // selects the value of the from select
            $(this).val( $( fromSelector ).val() );

        }

    });

    // puts the gui in a valid state
    $( fromSelector ).change(function() {

        var fromSelector = "#" + $(this).attr( "id" );
        var toSelector = "#" + $(this).attr( "relatedTo" );

        // compares if the value of this field is less than the value of the "to" select
        if ( $(this).val() < $( toSelector ).val() ) {

            // if so, change the value of the "to" select
            $( toSelector ).val( $(this).val() );

        }

    });

}

validateSelects( "#from1", "#to1" );
validateSelects( "#from2", "#to2" ); 
```

jsFiddle：http: [//jsfiddle.net/davidbuzatto/YNL6R/](http://jsfiddle.net/davidbuzatto/YNL6R/)

**编辑：**我在每个选择中插入了一个自定义属性来表示它们被绑定的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:45:26.743

这是 html 代码。@davidbuzatto 您的代码正在运行，但尝试选择 price_from 10000 和 price to 1000 您会看到。

```
<select name="pricesFrom" id="pricefrom"><option value="0" selected>Any</option><option value="500">500.00</option><option value="1000">1,000.00</option><option value="2000">2,000.00</option><option value="3000">3,000.00</option><option value="4000">4,000.00</option><option value="5000">5,000.00</option><option value="6000">6,000.00</option><option value="7000">7,000.00</option><option value="8000">8,000.00</option><option value="9000">9,000.00</option><option value="10000">10,000.00</option><option value="11000">11,000.00</option><option value="12000">12,000.00</option><option value="13000">13,000.00</option><option value="14000">14,000.00</option><option value="15000">15,000.00</option><option value="16000">16,000.00</option><option value="17000">17,000.00</option><option value="18000">18,000.00</option><option value="19000">19,000.00</option><option value="20000">20,000.00</option></select></label><label>Price to
                        <select name="pricesTo" id="priceto"><option value="0" selected>Any</option><option value="500">500.00</option><option value="1000">1,000.00</option><option value="2000">2,000.00</option><option value="3000">3,000.00</option><option value="4000">4,000.00</option><option value="5000">5,000.00</option><option value="6000">6,000.00</option><option value="7000">7,000.00</option><option value="8000">8,000.00</option><option value="9000">9,000.00</option><option value="10000">10,000.00</option><option value="11000">11,000.00</option><option value="12000">12,000.00</option><option value="13000">13,000.00</option><option value="14000">14,000.00</option><option value="15000">15,000.00</option><option value="16000">16,000.00</option><option value="17000">17,000.00</option><option value="18000">18,000.00</option><option value="19000">19,000.00</option><option value="20000">20,000.00</option></select> 
```

# php - 我的 PHP 嵌套循环使用了太多内存

> ID：11618974
> 
> 赞同：-1
> 
> 时间：2012-07-23T19:15:02.540
> 
> 标签：php, memory-management, loops, foreach, simplexml

我正在尝试编写一个处理大量数据的实用程序，内存是一个因素。不幸的是，每次我运行这组循环时，它都会吃掉 apx。14MB 的内存，因为它被执行了数千次，即使使用了 unset() 调用（是的，我知道它们并没有完全清理内存，这就是我问这个问题的原因）。我想知道是否有更简单的方法可以做到这一点。当前工作代码：

```
 $qr = array();
        foreach($XML->row as $row)
        {
         $ra = array();
         foreach($row as $key => $value)
         {
         $ra[$key] = $value[0];
         unset($key,$value);
         }
        $qr[] = $ra;
        unset($row,$ra);
        }
        unset($XML);
        return $qr; 
```

另一种尝试是这样做，但它落后了。有人知道我在做什么错吗？

```
 $qr = array();
        while(list(,$row) = each($XML->row))
        {
         $ra = array();
         while(list($key,$value) = each($row))
         {
         $ra[$key] = $value[0];
         unset($key,$value);
         }
        $qr[] = $ra;
        unset($row,$ra);
        }
        unset($XML);
        return $qr; 
```

基本上在第一个循环中，我只是尝试进行基本的数组/对象迭代。在第二个循环中，我试图遍历每个数组值并获取第一个元素，同时保持对象/数组索引关联。看来我最初是这样写的，因为它是唯一有效的东西（因为它循环通过一个 SimpleXML 对象）。任何关于加速这件事或弄清楚如何让它不吃内存的提示将不胜感激。

我正在寻找垃圾收集或更高效的代码的解决方案。我不打算替换 SimpleXML，因为不需要它。 **更清楚的是，我正在寻找：**

*   一种无需调用内部循环即可迭代 SimpleXML 对象的方法（这只是因为我在执行 $value[0]。为什么有必要这样做？
*   一种更有效（速度或内存方面）迭代数据的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:26:33.017

如果您想使用更少的内存，我建议您开始查看[SAX 解析器](http://php.net/manual/en/book.xml.php)。这是[示例](http://www.joemarini.com/tutorials/tutorialpages/listoflinks.php)。用 SAX 开发解析器比较困难，但它比 SimpleXML 更有效，你可以用它来解析大的 xml 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:27:30.310

您的内存负载很高，因为 SimpleXML 在解析时会将整个文档加载到内存中。因此，您的`unset()`调用只是减少了[引用计数](http://us.php.net/manual/en/features.gc.php)，并且由于数据仍保留在内存中，因此不会被释放。这是使用 SimpleXML 的结果：这样做的好处是文档在内存中并表示为 PHP 对象。

[如果您想减少内存使用量，则需要使用XMLReader](http://us.php.net/manual/en/book.xmlreader.php)或[XML Parser](http://us.php.net/manual/en/book.xml.php)之类的其他东西。这些是基于 SAX 或基于事件的，它们不会将 XML 文件加载到内存中，而是一次遍历树一个元素。由于您似乎没有使用 XPath 之类的东西，因此这是您更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:05:29.610

这不是您从 SimpleXML 对象访问数据的方式。我看到您正在使用 index [0] 来获取对象每个部分的字符串内容并将其视为数组。 **它不是一个数组，它是一个对象。** 这就是您应该如何访问字符串数据...示例： http: [//php.net/manual/en/simplexml.examples-basic.php#example-5095](http://php.net/manual/en/simplexml.examples-basic.php#example-5095)

像这样的东西可以解决问题：

```
 $qr = array();
    foreach($XML->row as $row)
    {
     $ra = array();
     $ra['name'] = $value->name;
     $ra['name2'] = $value->name2;
     //Add a line for each element name, etc...

    $qr[] = $ra;
    unset($row,$ra);
    }
    unset($XML);
    return $qr; 
```

它还将摆脱您的内部循环并节省您的记忆。

# javascript - 重定向 Javascript window.print

> ID：11618975
> 
> 赞同：0
> 
> 时间：2012-07-23T19:15:08.830
> 
> 标签：javascript

有没有办法将 Javascript window.print 输出重定向到 Web 服务或 DWR 远程方法而无需安装任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:17:00.890

`window.print`在某些浏览器中，您可以使用自定义函数覆盖。

但是，网页不能充当打印机驱动程序。

# php - PHP排序问题，arsort vs asort + array_reverse

> ID：11618980
> 
> 赞同：7
> 
> 时间：2012-07-23T19:15:25.413
> 
> 标签：php, sorting

我最近正在研究一个项目欧拉问题集，遇到了这个奇怪的问题。我已经用第一个解决方案正确解决了这个问题，但我不知道为什么其他版本不能按预期工作。

这是有效的代码：

```
asort($card_count, SORT_NUMERIC);
$card_count = array_reverse($card_count, true); 
```

这是没有的代码：

```
arsort($card_count, SORT_NUMERIC); 
```

这是我改变的唯一一条线，它对最终结果产生了巨大的影响。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:51:22.693

问题出现在对数组中相等的值进行排序时。取数组：

```
$arr = array(
    'a' => 1,
    'b' => 1,
    'c' => 1,
    'd' => 1
); 
```

调用`asort($arr, SORT_NUMERIC)`此数组将**反转数组**。因此，代码行：

```
asort($arr, SORT_NUMERIC);
$arr = array_reverse($arr, true); 
```

将数组放回**原来的顺序**。

因此，通过更改数组添加一个更高的值，如下所示：

```
$arr = array(
    'a' => 1,
    'b' => 1,
    'c' => 2,
    'd' => 1
);

asort($arr, SORT_NUMERIC);
$arr = array_reverse($arr, true); 
```

将产生：

```
Array
(
    [c] => 2
    [a] => 1
    [b] => 1
    [d] => 1
) 
```

尽管

```
arsort($arr, SORT_NUMERIC); 
```

将产生：

```
Array
(
    [c] => 2
    [d] => 1
    [b] => 1
    [a] => 1
) 
```

希望这对这个问题有所启发......

# multilingual - 一个条目是否可以在表达式引擎中有两个 URL，并翻译模板名称？

> ID：11618982
> 
> 赞同：1
> 
> 时间：2012-07-23T19:15:28.933
> 
> 标签：multilingual, expressionengine

我目前正在制作一个双语表达引擎 2.5.2 网站。我正在使用[这种技术](http://expressionengine.com/wiki/Multi_language_site_alternative/#Slight_modification_for_EE2)来创建两种语言，效果很好。

我在两个 index.php 文件中创建了一个 {country_code} 全局变量，它允许我检测当前语言。

使用这种技术，我在访问条目时可以毫无问题地获取与语言相关的数据。我唯一担心的是我显然必须为特定语言的“干净”URL 提供特权。

**示例条目：**

*   {entry_id} = 123
*   {title} = 我的测试文章
*   {title_permalink} = 我的测试文章
*   {name_fr} = 周一文章
*   {name_en} = 我的文章

如果我请求`http://www.example.com/index.php/en/blog/articles/my-test-article`，我希望使用博客模板组中的模板文章找到英文“我的文章”。

一切都很好，但是在请求时可以访问法语翻译`http://www.example.com/index.php/fr/blog/articles/my-test-article`。URL 的正确翻译应该是`http://www.example.com/index.php/fr/blogue/articles/mon-article-test`.

有人遇到过这样的问题吗？通过扩展或模块的任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:41:41.790

我相信[Transcribe 模块](http://devot-ee.com/add-ons/transcribe)通过提供翻译模板组和模板名称的能力以及让您为网站中的每种语言和内容创建单独的条目（因此，您有两个单独的 URL 标题）来解决这个问题。但这意味着要为多语言网站购买他们的整个方法。

我自己，我通常只是坚持使用`entry_id`而不是`url_title`，并且使用主要语言的模板名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:22:26.517

我发现实现这一点的最佳方法是嵌入带有片段翻译的模板、复制模板组和复制频道。

在`blog/articles`模板中：

`{embed="shared/.head" segment_2_translation="blogue" segment_3_translation="articles"}`

在`blogue/articles`模板中：

`{embed="shared/.head" segment_2_translation="blog" segment_3_translation="articles"}`

在`shared/.head`模板中：

`[...] <a href="/{lang}/{if embed:segment_2_translated}{segment_2_translated}/{/if}{if embed:segment_3_translated}{segment_3_translated}/{/if}">{if lang == "fr"}English{if:else}Français{/if}</a> [...]`

然后您可以创建一个`Articles (FR)`和一个`Articles (EN)`频道，每个频道都有其独特的 URL 标题。您还可以为每个渠道添加关系自定义字段，以将条目与其翻译相关联。

感觉很乱，但这是我在没有模块、插件或其他东西的情况下让它工作的唯一方法。

# ruby-on-rails - Rails - 在哪里放置路径助手？

> ID：11618983
> 
> 赞同：0
> 
> 时间：2012-07-23T19:15:33.760
> 
> 标签：ruby-on-rails, rspec

对于我正在编写的这个 Rails 应用程序，有用户，并且用户有很多项目。我编写了一个辅助函数来帮助链接到页面。

```
def new _or_edit_user_path( *user )
  if user[0] && user[0].id
    edit_user_path user[0]
  else
    new_user_path
  end
end 
```

和

```
def new_or_edit_user_project_path( user, *project )
  if project[0] && project[0].id
    edit_user_project_path user, project[0]
  else
    new_user_project_path(user)
  end
end 
```

但是现在我想测试这些并且很明显rails不希望我这样做。你会推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:37:07.457

rails 的路由页面为您提供了一种链接到[嵌套资源的更好方法。](http://guides.rubyonrails.org/routing.html#nested-resources)

如果您对这种方法不太熟悉，您可以进入项目的根文件夹（您在其中调用 rails s）并执行“rake routes”。这将为您提供使用此方法添加的路线。

这是嵌套资源的示例：

```
resources :users do
  resources :projects
end 
```

# arrays - 汇编 - 访问数组元素

> ID：11618985
> 
> 赞同：0
> 
> 时间：2012-07-23T19:15:47.813
> 
> 标签：arrays, loops, assembly, masm32

我有一个正在尝试打印的数组。我想把它打印出来，看看它是否正确。它目前正在打印数字 1 并停止。或者，如果我以不同的方式处理 ECX，它会打印出一堆零并崩溃。

这是我的程序。

```
.data

array DWORD 10 DUP(5, 7, 6, 1, 4, 3, 9, 2, 10, 8)
my_size dd 10

sorted DWORD 0
first DWORD 0
second DWORD 0

.code

start:
main proc
cls

 mov EBX, offset[array]
 mov ECX, [my_size]
 dec ECX
 sub ESI, ESI
 sub EDI, EDI

; print
mov EBX, offset aa
sub ECX, ECX
;mov ECX, my_size
mov ECX, 10

my_loop:
mov EAX, [EBX]
inc EBX
dec ECX

cmp ECX, 0
jle exit_loop

mov first, EAX
print chr$("printing array elements: ")
print str$(first)

loop  my_loop

exit_loop:
ret

main endp

; ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤

end start 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:35:47.597

我不想这么说，但是您还没有“准备好”编写冒泡排序。要么这是一个完全疯狂的家庭作业，要么你到目前为止还没有跟上这门课（可能两者兼而有之）。

首先，我认为您没有正确定义数组。当我阅读您的代码时，您那里有 100 个双字 - 您指定的 10 个数字的 10 个副本。你不应该在那里需要“DUP”。

我会先打印未排序的数组，以确保您正确地完成了该部分。您似乎正在使用几个宏，它们肯定不是指令。仅从名称中，我猜（！）“print_chr$”打印一个字符，“print_str$”打印一个字符串（尽管您似乎正在打印您的字符串和数字 1）。如果你的宏集中有一个“print_int$”，我猜（！）这就是你想要的。由于我不熟悉您的宏，因此我可能是错的。

尽管您已将数组定义为“dword”，但您只比较排序例程中的单个字节。这可能适用于您正在使用的小数字，但它并不正确。

进行冒泡排序的常用方法是在每次遍历数组的开始时将“标志”（寄存器或变量 - 这可能是“排序”的用途）设置为零，并在每次运行时将其设置为 1做一个交换。当你通过你的数组并且标志仍然为零时 - 你还没有进行交换 - 然后，只有这样，你的数组才会被排序。如果您在每次通过后打印数组，您就会明白为什么它被称为“冒泡”排序 - 最小/最大数字“冒泡”到其最终位置。

您遍历 dword 数组 (esi * 4) 的代码看起来很正确（除了比较一个字节之外），但是您的打印例程每次通过循环时只会将 ebx 递增 1。“添加 ebx, 4”或使用“ebx * 4”（不是两者）来打印双字。或者也许你的数组应该只是字节？

说真的，我会从更简单的东西开始 - 只需打印数组 - 并在你完成工作后开始添加排序例程。

希望能帮助到你。

最好的，弗兰克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:38:09.430

我看到你已经简化了代码。好主意！我仍然不熟悉您使用的宏“print_str$”。在我看来，这不像打印数字那样“看起来”。你有“print_int$”或类似的吗？如果你能让它只打印第一个数字“5”，那将是一个好的开始。

现在......通过你的循环工作，你只是“inc ebx”。这不会让你获得下一个 dword，它会从第一个 dword 中获得字节 2、3 和 4，从第二个 dword 中获得第一个字节。由于您在（已删除的）排序代码中使用了“* 4”，因此您可能需要在此处使用“[ebx * 4]”。要么这样，要么每次通过循环将 4 添加到 ebx 。一个或另一个（但不是两者）应该逐步遍历一个 dwords 数组。

我怀疑第一步是选择“正确”的宏来打印一个数字。从那里可能会变得更容易（？）。勇气！:)

最好的，弗兰克

# r - 如何使用 R 构建带有渐变填充的气泡图

> ID：11618991
> 
> 赞同：8
> 
> 时间：2012-07-23T19:16:20.810
> 
> 标签：r

我使用下面的 R 代码来构建气泡图。

```
pdf(file='myfigure.pdf',height=10,width=13)
y<-c(123,92,104,23,17,89,13)
x<-c(11,45,24,50,18,7,2)
size<-c(1236,1067,1176,610,539,864,1026)
radius<-sqrt(size/pi)
col<-c(2,2,3,4,5,5,6)
name<-c("Acura", "Alfa Romeo","AM General","Aston Martin Lagonda","Audi","BMW","Bugatti")

symbols(x,y,  circles=radius,fg="white",bg=col,ylim=c(-20,140))
text(x, y, name, cex=1.5,font=4)
dev.off() 
```

![在此处输入图像描述](../Images/a9593778e774cad6bea6f87355172384.png) 但我想要具有 3d 表面的气泡，比如渐变填充和阴影。像下面的图表。 ![在此处输入图像描述](../Images/52e19e3245ab1868b5885892a9d2256f.png)

任何人都知道如何使用 R 来释放它？谢谢！

感谢所有的建议。虽然最后我尝试了一种愚蠢的方法，从暗到亮绘制多个圆圈来填充渐变。有什么建议可以让它变得更好吗？谢谢！ ![在此处输入图像描述](../Images/74c4f3f4b4b0282dbdab4a032efdeb22.png)

```
makeTransparent<-function(someColor, alpha)
{
 newColor<-col2rgb(someColor)
 apply(newColor, 2, function(curcoldata){rgb(red=curcoldata[1], green=curcoldata[2],                                          blue=curcoldata[3],alpha=alpha,maxColorValue=255)})
}

pdf(file='myfigure.pdf',height=10,width=13)
y<-c(123,92,104,23,17,89,13)
x<-c(11,45,24,50,18,7,2)
size<-c(1236,1067,1176,610,539,864,1026)
radius<-sqrt(size/pi)
col<-c(2,2,3,4,5,5,6)
name<-c("Acura", "Alfa Romeo","AM General","Aston Martin Lagonda","Audi","BMW","Bugatti")

x2<-c()
y2<-c()
circles<-c()
bg<-c()
fg<-c()

num<-30
radius_min<-0.3
alpha_min<-40
alpha_max<-180

for (i in 1:num){

x2<-c(x2,x)
y2<-c(y2,y)
circles<-c(circles,radius*(radius_min+(i-1)*(1-radius_min)/num))
bg<-c(bg,makeTransparent(col,alpha=alpha_max-(i-1)*(alpha_max-alpha_min)/num))
if(i!=num){fg<-c(fg,makeTransparent(col,alpha=alpha_max-(i-1)*(alpha_max-alpha_min)/num))}else{fg<-c(fg,rep('white',length(x)))}

}

symbols(x2,y2,circles=circles,fg=fg,bg=bg)
text(x, y, name, cex=1.5,font=4)
dev.off() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T07:25:48.003

这是一个解决方案（受@Edward's solution for [this question](https://stackoverflow.com/questions/11777124/three-way-color-gradient-fill-in-r?lq=1)的启发）：

```
#First your data:
y<-c(123,92,104,23,17,89,13)
x<-c(11,45,24,50,18,7,2)
size<-c(1236,1067,1176,610,539,864,1026)
radius<-sqrt(size/pi)
col<-c(2,2,3,4,5,5,6)
name<-c("Acura", "Alfa Romeo","AM General","Aston Martin Lagonda","Audi","BMW","Bugatti")

#Then a simple function to draw a circle based on its center and its radius:
circle <- function (r, x0, y0, col){
    t <- seq(0, 2 * pi, by = 0.01)
    x <- r * cos(t) + x0
    y <- r * sin(t) + y0
    lines(x, y, col=col)
    }

#This is a smoothing factor:
sm <- 500

#The asp parameter is important here since we are actually drawing the circles and not plotting some circle symbols: if asp is not equal to 1 they will appear as ellipse.
plot(x,y,type="n",asp=1)

#This can probably be vectorized but I'm not a good vectorizer so if anyone wants to  give it a try:
for(j in 1:length(x)){
    radius[j]*sm:1/sm -> radiuses
    colorRampPalette(c(palette()[col[j]], "white"))->col_grad
    col_grad(length(radiuses))->colx
    for(i in 1:length(radiuses)){circle(radiuses[i], x[j], y[j], col=colx[i])}
    }

text(x, y, name, cex=1.5,font=4) 
```

有关`?colorRampPalette`此功能如何工作的更多信息，请参阅。

![在此处输入图像描述](../Images/74615b2e2114eb311672790503d1b513.png)

**编辑：带阴影**

```
 offset<-c(2,-2) #Offset of the shadow circles
 library(scales) #For function alpha

 plot(x,y,type="n",asp=1)

 for(j in 1:length(x)){
     radius[j]*sm:1/sm -> radiuses
     colorRampPalette(c(palette()[col[j]], "white"))->col_grad
     col_grad(length(radiuses))->colx
     for(i in 1:length(radiuses)){circle(radiuses[i], x[j]+offset[1], y[j]+offset[2], col=alpha("grey90",0.1))} #the alpha, the nuance of grey can be tweaked with obviously for the desired effect
     for(i in 1:length(radiuses)){circle(radiuses[i], x[j], y[j], col=colx[i])}
     }

 text(x, y, name, cex=1.5,font=4) 
```

![在此处输入图像描述](../Images/3d59a06747cba50935f6ee2f3879acc2.png)

# wpf - 图形路径小语言线别名

> ID：11618997
> 
> 赞同：1
> 
> 时间：2012-07-23T19:16:42.153
> 
> 标签：wpf, graphics, path

我试图在一个复选框中画一个勾号，由于混叠似乎不起作用，线条确实是锯齿状的，看起来一点也不好看。我错过了什么？

```
<Style x:Key="{x:Type CheckBox}" TargetType="CheckBox">
    <Setter Property="Foreground" Value="Black"/>
    <Setter Property="RenderOptions.EdgeMode" Value="Aliased"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="CheckBox">
                <BulletDecorator Height="20" MinHeight="20">
                    <BulletDecorator.Bullet>
                        <Grid 
                              Width="20"
                              Height="20">
                            <Border x:Name="Border" 
                                    CornerRadius="0" 
                                    Background="Black"
                                    BorderThickness="0"
                                    BorderBrush="Black"
                              Width="20"
                              Height="20" >
                                        <Path 
                                        x:Name="CheckMark"
                                        Stroke="White"
                                        StrokeThickness="8"
                                        Data="M 3,8 L 5,17,17,2"/>
                            </Border>
                        </Grid>
                    </BulletDecorator.Bullet>
                    <ContentPresenter Margin="0,0,0,0"
                            VerticalAlignment="Top"
                            HorizontalAlignment="Left"
                            RecognizesAccessKey="True" RenderOptions.EdgeMode="Aliased"/>
                </BulletDecorator>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsChecked" Value="false">
                        <Setter TargetName="CheckMark" Property="Visibility" Value="Collapsed"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:25:13.227

设法通过将渲染选项设置为未指定来解决此问题。