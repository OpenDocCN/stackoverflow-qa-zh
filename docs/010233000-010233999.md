# StackOverflow 问答 10233000-10233999

# svn - SVN 仅导出文件夹文件

> ID：10233001
> 
> 赞同：9
> 
> 时间：2012-04-19T16:55:00.347
> 
> 标签：svn

我在存储库中有一个文件夹：

```
svn/Repo/trunk/Folder 
```

我想将所有文件导出`Folder`到本地目录：

```
C:\AnotherFolder 
```

如果我从存储库导出到本地文件夹，它会导出所有文件，包括父文件夹，所以我最终得到以下结构：

```
C:\AnotherFolder\Folder\file1 
C:\AnotherFolder\Folder\file2 
etc 
```

如何在没有父目录的情况下导出？所以我得到类似的东西：

```
C:\AnotherFolder\file1 
C:\AnotherFolder\file2 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T17:05:46.403

您应该可以使用以下 SVN 命令执行此操作：

```
svn export http://.../svn/Repo/trunk/Folder C:\AnotherFolder 
```

这也应该适用于 AnotherFolder 的相对路径，如下所示：

```
svn export http://.../svn/Repo/trunk/Folder AnotherFolder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T02:22:38.173

如果要导出文件，命令是
svn export [http://.../svn/Repo/trunk/filename](http://.../svn/Repo/trunk/filename) C:\AnotherFolder\filename

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-22T18:33:59.087

您可以使用`./`运行命令的当前文件夹的路径：

```
svn export http://.../svn/Repo/trunk/Folder ./ 
```

# superfish - 菜单中的超级鱼文字颜色？

> ID：10233002
> 
> 赞同：0
> 
> 时间：2012-04-19T16:55:02.640
> 
> 标签：superfish

我想为菜单和子菜单中的项目设置不同的文本颜色。我可以通过向子菜单中的项目添加不同的类来仅使用 css 来执行此操作，而无需修改 html 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:00:10.483

只需使用以下 CSS 定义：

```
.sf-menu a, .sf-menu a:visited{
    color: #ffffff;
}

.sf-menu li li a, .sf-menu li li a:visited{
    color: #ff0000;
} 
```

所以菜单有一个白色的字体颜色和红色的子菜单。

# iphone - 启动电话应用程序以拨打没有号码的电话

> ID：10233003
> 
> 赞同：1
> 
> 时间：2012-04-19T16:55:12.977
> 
> 标签：iphone, objective-c, ios, ipad

如果我可以启动没有号码的电话应用程序，现在有没有人？用户选择或写入要拨打的电话号码？

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:no number"]]; 
```

启动应用程序电话但没有任何号码的电话？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:00:27.060

## 应用商店

Apple 不会允许这样做——如果没有要拨打的号码，启动电话应用程序是没有意义的。

## 越狱

如果您只想在不拨打号码的情况下启动应用程序，您始终可以通过捆绑 ID 启动应用程序。您需要在网上搜索如何执行此操作。

# java - 在 Java 中使用 mongoDB 更新数据

> ID：10233007
> 
> 赞同：1
> 
> 时间：2012-04-19T16:55:19.837
> 
> 标签：java, mongodb, database, nosql

我的脚本有一个小错误：

```
 BasicDBObject change = new BasicDBObject();   
   BasicDBObject account =
     new BasicDBObject().append("$set", new BasicDBObject().append("status", 0));
   account.append("pos.X", getX());                                        
   account.append("pos.Y", getY());                                      
   account.append("pos.Z", getZ());                                          
   change.append("pseudo", gPlayer);
   coll.update(change, account); 
```

mongoDB的结构是：

```
{
      pseudo: "pseudo"
      email: "email"
      password: "password"
      status: "1"
      pos: [
        {X: "90.45}
        {Y: "90.45}
        {Z: "90.45}
      ]

} 
```

但这不起作用！没有值被修改。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T18:17:00.093

Java 是一种非常冗长的语言，有时最简单的方法是首先使用 JS shell 编写查询，确保它按预期执行，然后将其翻译成 Java。

通过将 System.out.println(account.toString()) 添加到您的 Java 代码中，我可以看到您的更新文档如下所示，这是无效的：

```
{ "$set" : { "status" : 0} , "pos.X" : "90.45" , "pos.Y" : "90.45" , "pos.Z" : "90.45"} 
```

从您的问题来看，您希望更新后的文档看起来像什么并不完全清楚，但我猜您想修改“status”和“pos.0.X”、“pos.1”的值。 Y”和“pos.2.Z”。因为 X、Y 和 Z 都作为单独的嵌入文档存储在数组中，所以必须通过它们的位置来引用它们才能同时更新。如果可能，您可能会发现最好重新排列文档结构，使 X、Y 和 Z 都存储在同一个文档中，如下所示：

```
"pos" : {
            "X" : "0", 
            "Y" : "0",
            "Z" : "0"
        } 
```

这样，您将能够使用点符号 pos.X、pos.Y、pos.Z 更轻松地访问每个变量，从您的帖子中看起来就像您想要的那样。更多关于嵌入文档的信息可以在“Dot Notation (Reaching into Objects)”文档中找到： [http ://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)

这是一个将修改上述值的更新语句：

```
> db.pseudo.find({ "pseudo" : "gPlayer"}).pretty()
{
    "_id" : ObjectId("4f904ebb5bebd4375b759c90"),
    "email" : "email",
    "password" : "password",
    "pos" : [
        {
            "X" : "90.45"
        },
        {
            "Y" : "90.45"
        },
        {
            "Z" : "90.45"
        }
    ],
    "pseudo" : "gPlayer",
    "status" : "1"
}
> db.pseudo.update({"pseudo" : "gPlayer"}, { "$set" : { "status" : 0 , "pos.0.X" : "0" , "pos.1.Y" : "0" , "pos.2.Z" : "0"}})
> db.pseudo.find({ "pseudo" : "gPlayer"}).pretty()
{
    "_id" : ObjectId("4f904ebb5bebd4375b759c90"),
    "email" : "email",
    "password" : "password",
    "pos" : [
        {
            "X" : "0"
        },
        {
            "Y" : "0"
        },
        {
            "Z" : "0"
        }
    ],
    "pseudo" : "gPlayer",
    "status" : 0
}
> 
```

翻译成Java是：

```
BasicDBObject change = new BasicDBObject("pseudo", "gPlayer");   
BasicDBObject setDoc = new BasicDBObject();                 
setDoc.append("status", "0"); 
setDoc.append("pos.0.X", "0");                                        
setDoc.append("pos.1.Y", "0");                                      
setDoc.append("pos.2.Z", "0");                                          
BasicDBObject account = new BasicDBObject("$set", setDoc);
coll.update(change, account); 
```

我意识到我对您想要执行的更新的确切猜测有点猜想，但希望以上内容能让您指出正确的方向！

# javascript - 如何获取单击的按钮的值 Javascript 或 Jquery

> ID：10233008
> 
> 赞同：0
> 
> 时间：2012-04-19T16:55:21.470
> 
> 标签：javascript, jquery, ajax

我会尽量直截了当。基本上我使用 jquery 和 ajax 来调用 php 脚本并显示数据库中的成员。每个成员姓名旁边都有一个删除按钮。我想这样做，所以当您单击删除按钮时，它会删除该用户。只有那个用户。我遇到的麻烦是尝试仅从一个删除按钮中单击值。我将在下面发布我的代码。我已经尝试了很多东西，现在你可以看到我正在尝试将 url 中的哈希值更改为该成员，然后从 url 中获取值。那是行不通的，URL 中的值永远不会改变。所以我的问题是如何获得点击成员的价值。

```
 <script type="text/javascript">
    $(document).delegate("#user_manage", "pagecreate", function () {
        $.mobile.showPageLoadingMsg()   
        var friends = new Array();
        $.ajaxSetup({
            cache: false
        })
        $.ajax({
            url: 'http://example.com/test/www/user_lookup.php',
            data: "",
            dataType: 'json',
            success: function (data) {
                $.mobile.hidePageLoadingMsg();
                var $member_friends = $('#user_list');
                $member_friends.empty();

                for (var i = 0, len = data.length; i < len; i++) {
                    $member_friends.append("<div class='user_container'><table><tr><td style='width:290px;font-size:15px;'>" + data[i].username + "</td><td style='width:290px;font-size:15px;'>" + data[i].email + "</td><td style='width:250px;font-size:15px;'>" + data[i].active + "</td><td><a href='#" + data[i].username + "' class='user_delete' data-role='none' onclick='showOptions();'>Options</a></td></tr><tr class='options_panel' style='display:none'><td><a href='#" + data[i].username + "' class='user_delete' data-role='none' onclick='showId();'>Delete</a> </td></tr></table></div>");

                }
            }
        });
    });
</script>
                  <script>
                    function showId() {
                    var url = document.URL;
                    var id = url.substring(url.lastIndexOf('#') + 1);
                    alert(id);
                        alert(url);
                    }
                    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:00:26.610

想法：

第一：我认为连接一个字符串然后将其附加到 DOM 元素会更容易。它更快。

第二：在您的按钮上，您可以使用数据库的用户 ID 或其他内容添加一个额外的属性，然后在 ajax 调用中发送它。从按钮单击获取属性时，使用

```
 $(this).attr('data-id-user'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T03:59:55.277

这是您可以进行的非常简单的更改：

替换这部分：

```
 onclick='showId();'>Delete</a> 
```

有了这个：

```
 onclick='showId("+data[i].id+");'>Delete</a> 
```

这是新的 showId 函数：

```
function showId(id) {
                    alert(id);
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:16:33.293

```
<a href="#" class="user_delete" data-id-user="<?php echo $theUsersId ?>"><?php echo $username ?></a> 
```

同样，如果您通过 json 下拉用户，您可以像这样在回调函数中创建标记时对该属性进行编码：

```
'<a href="#'+data[i].username+'" data-user-id="'+ data[i].username + '" class="user_delete" data-role="none" >Options</a>' 
```

所以考虑到你已经在做的事情，整个场景应该是这样的：

```
$(document).delegate("#user_manage", "pagecreate", function () {
    $.mobile.showPageLoadingMsg();   
    var friends = new Array(),
        $member_friends = $('#user_list'),
        // lets jsut make the mark up a string template that we can call replace on
        // extra lines and concatenation added for readability
        deleteUser = function (e) {
          var $this = $(this),
              userId = $this.attr('data-id-user'),
              href = $this.attr('href'),
              deleteUrl = '/delete_user.php';

              alert(userId);
              alert(href);
              // your actual clientside code to delete might look like this assuming
              // the serverside logic for a delete is in /delete_user.php
              $.post(deleteUrl, {username: userId}, function(){
                alert('User deleted successfully!');
              });
        },
        showOptions = function (e) {
          $(this).closest('tr.options_panel').show();
        }, 
        userTmpl = '<div id="__USERNAME__" class="user_container">'
                   + '<table>'
                   +    '<tr>'
                   +      '<td style="width:290px;font-size:15px;">__USERNAME__</td>'
                   +      '<td style="width:290px;font-size:15px;">__EMAIL__</td>'
                   +      '<td style="width:250px;font-size:15px;">__ACTIVE__</td>'
                   +      '<td><a href="#__USERNAME__" data-id-user="__USERNAME__" class="user_options" data-role="none">Options</a></td>'
                   +    '</tr>'
                   +    '<tr class="options_panel" style="display:none">'
                   +      '<td><a href="#__USERNAME__" data-id-user="__USERNAME__" class="user_delete" data-role="none">Delete</a></td>'
                   +    '</tr>'
                   +  <'/table>'
                   + '</div>';

    $.ajaxSetup({
        cache: false
    })

    $(document).delegate('#user_manage #user_container user_options', 'click.userlookup', showOptions)
      .delegate('#user_manage #user_container user_delete', 'click.userlookup', deleteUser);

    $.ajax({
        url: 'http://example.com/test/www/user_lookup.php',
        data: "",
        dataType: 'json',
        success: function (data) {
            $.mobile.hidePageLoadingMsg();
            var markup;
            $member_friends.empty();

            for (var i = 0, len = data.length; i < len; i++) {
                markup = userTmpl.replace('__USERNAME__', data[i].username)
                          .replace('__ACTIVE__', data[i].active)
                          .replace('__EMAIL__', data[i].email);

                $member_friends.append(markup);

            }
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:59:47.617

为什么不在 PHP 脚本中构造数据？然后您可以将索引（数据库中每一行的唯一变量）放在按钮 onclick 事件中。所以删除按钮将是：

`<button onclick = "delete('indexnumber')">Delete</button>`

然后您可以使用该变量发送到另一个 PHP 脚本以将其从数据库中删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T16:59:58.633

```
$('body').on('click', 'a.user_delete', function() {
     var url = document.URL;
     var id = url.substring(url.lastIndexOf('#') + 1);
     alert(id);
     alert(url);
}); 
```

# sql-server-ce - Windows CE 6.0 - USB Drivers , SQL CE 3.5 安装正确，启动

> ID：10233011
> 
> 赞同：0
> 
> 时间：2012-04-19T16:55:30.317
> 
> 标签：sql-server-ce, windows-ce, drivers, platform-builder

我构建了一个新的 Windows CE 映像并放置了两个 USB 驱动程序。一个用于 USB 打印机，第二个用于带有数字和模拟 I/O 端口的特殊设备。

我有两个问题：

**1.开机时的USB驱动**

我的问题是每次启动映像时都会要求输入驱动程序的名称。（消息是“Unidentified USB Device” 请输入 USB 设备驱动程序的名称）是否有解决此问题的方法？我必须将什么放入注册表？

**2\. SQL CE 3.5**

我做了一个应用程序，放在 Win CE 的硬盘（紧凑型闪存卡）上。我的问题是应用程序正在使用 SQL CE 3.5 数据库，但看起来图像是使用 SQLCE 3.0 创建的。开始构建镜像时无法选择 3.5 版本。现在，当应用程序启动时，会弹出带有异常的消息窗口，并且不要让应用程序启动。我的问题是如何将 SQLCE 3.5 安装到映像中，或者如何在以后或每次启动时使用 CAB 文件安装它。

# c# - 如何：从动态数据中获取信息

> ID：10233012
> 
> 赞同：1
> 
> 时间：2012-04-19T16:55:34.607
> 
> 标签：c#, wpf, web-services, xaml, dynamic

起初这可能听起来很奇怪，但它相当简单。我在这个服务中有一个 wcf webservice（restful）我设置了一些通用的“用户”字段，我设置的字段之一是用户 ID，每次添加用户时都会增加。所有非常简单的东西。

然后我有一个正在使用的 wpf 应用程序。对于我的 web 服务中上面提到的每个用户，我动态设置内容以在我的 wpf 应用程序中保存每个用户，这是通过单击按钮完成的，然后加载内容区域，其中包含整齐排列的组框和文本块（同样非常简单）。我保存它们的容器是 GroupBox.Header，它包含用户 ID 和 Textblock，它等于学生的名字和姓氏。

像这样：

```
private void button1_Click(object sender, RoutedEventArgs e)
        {

            if (string.IsNullOrEmpty(textBox1.Text))
            {
                PanelMainContent.Children.Clear();
                MainArea1.Children.Clear();
                string uriGroups = "http://localhost:8000/Service/Student";
                XDocument xDoc = XDocument.Load(uriGroups);
                var sortedXdoc = xDoc.Descendants("Student")
                               .OrderByDescending(x => Convert.ToDateTime(x.Element("TimeAdded").Value));
                foreach (var node in xDoc.Descendants("Student").OrderByDescending(x => Convert.ToDateTime(x.Element("TimeAdded").Value)))
                {

                    GroupBox groupbox = new GroupBox();
                    groupbox.Header = String.Format(node.Element("StudentID").Value);
                    App.Current.Properties["groupboxHeader"] = groupbox.Header;
                    groupbox.Width = 100;
                    groupbox.Height = 100;
                    groupbox.Margin = new Thickness(1);

                    Button btnFindStudent = new Button();
                    btnFindStudent.Click += this.btnGeneral_Click;
                    btnFindStudent.Name = Convert.ToString("btnViewStudent");
                    btnFindStudent.Tag = Convert.ToString("ViewStudent");
                    btnFindStudent.Content = Convert.ToString("View");
                    btnFindStudent.HorizontalAlignment = HorizontalAlignment.Right;
                    btnFindStudent.Height = 20;
                    btnFindStudent.Width = 36;

                    TextBlock textBlock = new TextBlock();
                    textBlock.Text = String.Format(node.Element("FirstName").Value + " " + (node.Element("LastName").Value));
                    textBlock.TextAlignment = TextAlignment.Center;

                    TextBlock textBlock1 = new TextBlock();
                    textBlock1.Text = (DateTime.Parse(node.Element("TimeAdded").Value)).ToString("d");
                    String.Format("{0:d/M/yyyy}", DateTime.Parse(node.Element("TimeAdded").Value));
                    textBlock1.TextAlignment = TextAlignment.Center;
                    textBlock1.VerticalAlignment = VerticalAlignment.Bottom;

                    StackPanel stackPanel = new StackPanel();
                    stackPanel.Children.Add(groupbox);
                    stackPanel.Children.Add(btnFindStudent);
                    stackPanel.Children.Add(textBlock);
                    stackPanel.Children.Add(textBlock1);
                    stackPanel.Margin = new Thickness(5);
                    stackPanel.MouseEnter += new MouseEventHandler(stackpanel_MouseEnter);
                    stackPanel.MouseLeave += new MouseEventHandler(stackpanel_MouseLeave);
                    MainArea1.Children.Add(stackPanel);
                }
            } 
```

输出如下所示：

![在此处输入图像描述](../Images/19f21c617c9430764e8f460f28ea9245.png)

注意`GroupBox.header`用户 ID 的状态。

所以这给我带来了问题……如果您在图像中注意到我还动态设置了一个按钮（上面的代码）。此按钮加载名为`ThisUser`:) 的用户控件应用程序，但我遇到的问题是能够：

> 1）首先获取当前点击的学生的 GroupBox.Header(UserID) （由 Darins 解决，答案如下）
> 
> 2）将该用户ID发送到用户控件“ThisUser”

**解释问题1）：**

查看上面的代码有一种方法可以“获取”已单击该用户的groubox.header（我的应用程序图像中的“查看”按钮）

**对于问题2）**

不知何故，从我当前的应用程序“发送”到用户控件“ThisUser”或“使可用”，供用户控件使用。

我希望这很好，很清楚，并且布置得很好，可以提供最好的答案，如果你还有什么想知道的（代码，解释），请不要犹豫。

在 btnGeneralClick（查看按钮）上发送数据的代码：

```
 public FindStudent()
    {
        InitializeComponent();
    }
    private void btnGeneral_Click(object sender, RoutedEventArgs e)
    {

        ViewStudent myusercontrol = new ViewStudent();
        String id = (String)((Button)sender).Tag;
        myusercontrol.StudentID = id;
        PanelMainContent.Children.Add(myusercontrol);

    } 
```

用户控制：

```
public partial class ViewStudent : UserControl
{

    public ViewStudent()
    {
        InitializeComponent();

    }
    private string _studentID;

    public string StudentID
    {
        get
        {
            return _studentID;
        }
        set
        {
            _studentID = value;
        }
    }
    protected override void OnInitialized(EventArgs e)
    {
        base.OnInitialized(e);
        groupBox1.Header = StudentID;
        //or
        textBlock1.Text = StudentID;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:12:37.357

好吧，首先，我将 StudentID 放入 btnFindStudent.Tag

```
btnFindStudent.Tag = node.Element("StudentID").Value.ToString(); 
```

当 ClickEvent 被触发时，您可以从 Tag 中提取 ID 并将其发送到您的**ThisUser** UserControl。

```
String id = (String)((Button)sender).Tag; 
```

我只需在 UserControl 中创建一个名为“StudentID”的公共属性并将其设置在那里。没有看到你的 UserControl 很难说。:(

**更多信息：**

将此添加到 ViewStudent：

```
#region StudentID

public static readonly DependencyProperty StudentIDProperty = DependencyProperty.Register("StudentID", typeof(String), typeof(ViewStudent), new PropertyMetadata(OnStudentIDChanged));

public string StudentID
{
    get { return (string)GetValue(StudentIDProperty); }
    set { SetValue(StudentIDProperty, value); }
}

static void OnStudentIDChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    (d as ViewStudent).OnStudentIDChanged(e);
}

void OnStudentIDChanged(DependencyPropertyChangedEventArgs e)
{
    groupBox1.Header = StudentID;
    textBlock1.Text = StudentID;
}

#endregion 
```

并摆脱我们之前创建的其他 StudentID 属性。

```
ViewStudent myUserControl = new ViewStudent();
myUserControl.StudentID = (String)((Button)sender).Tag; 
```

试一试。（：

# windows-phone-7 - 在全景项目 wp7 之间导航

> ID：10233022
> 
> 赞同：2
> 
> 时间：2012-04-19T16:56:11.443
> 
> 标签：windows-phone-7, uinavigationitem, panorama-control

我只想知道，如何通过 c# 代码在 wp7 中的不同全景项目之间导航。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:46:01.107

尝试这个

```
Panorama.SetValue(Panorama.SelectedItemProperty, selectedItem); 
```

这可能会解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:14:38.487

只需将默认项目设置为您要为用户视图加载的项目..

```
panSOS.DefaultItem = panSOS.Items[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:58:00.450

我还没有尝试过，但它应该可以工作。

1.  循环`Panorama.Items`并删除除您要关注的项目之外的所有项目。使用`for`循环而不是`foreach`这样做，因为在使用后者进行迭代时无法修改集合。

2.  调用`Panorama.UpdateLayout`以强制全景图重绘自身并切换到要显示的项目。

3.  添加您在步骤 1 中删除的项目。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-19T17:48:00.437

如果你的全景控制被称为 PanoramaControl1 那么你应该可以使用：

```
PanoramaControl1.SelectedIndex = 0 
```

其中 0 是第一个全景页面。

# nginx - 有没有办法让 nginx 在第一次请求时启动一个 uwsgi 进程？

> ID：10233023
> 
> 赞同：0
> 
> 时间：2012-04-19T16:56:17.617
> 
> 标签：nginx, uwsgi

我在想是否有办法让 nginx 在第一个请求时启动 uwsgi 进程，这样我可以在空闲站点上节省大量内存。

有人知道怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:28:17.033

Nginx 根本不启动 uwsgi 进程。这是 uWSGI 服务器工作。

可能，您正在寻找“便宜”模式： [http ://projects.unbit.it/uwsgi/wiki/Doc#cheap](http://projects.unbit.it/uwsgi/wiki/Doc#cheap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:48:49.987

Nginx（按设计）无法生成新进程（这就是为什么您在 nginx 中没有 cgi 支持的原因）。您可以使用 uwsgi 的廉价+空闲模式，在指定时间（由 --idle 设置）不活动后仅从 master 和 rip-off worker 开始。

如果即使只启动 master 对你来说太多了（我想你想要最少的内存使用）你可以查看老式的 inetd/xinetd 或更新的新贵套接字桥和 systemd 套接字激活以仅在特定连接上激活 uWSGI

# github - 从 GitHub 分叉一个项目

> ID：10233026
> 
> 赞同：2
> 
> 时间：2012-04-19T16:56:41.227
> 
> 标签：github

我想从 Github 分叉一个弹性搜索的建议者。
我正在按照网站上的步骤操作，我被要求运行以下代码：

```
git://github.com/spinscale/elasticsearch-suggest-plugin.git 
```

我应该在哪个班级运行它？我应该为它创建一个新项目还是应该在我当前的项目中运行它？

我正在使用 eclipse 和 play 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:55:47.807

`git://github.com/spinscale/elasticsearch-suggest-plugin.git`我在[GitHub elasticsearch-suggest-plugin 页面上](https://github.com/spinscale/elasticsearch-suggest-plugin)看到“”的唯一行是：

> 如果您想在存储库上工作
> 
> *   克隆这个 repo`git clone git://github.com/spinscale/elasticsearch-suggest-plugin.git`
> *   运行：`gradle clean assemble zip`- 这不会运行任何单元测试，因为它们需要一些时间。如果你想运行它们，最好运行`gradle clean build zip`
> *   安装插件：`/path/to/elasticsearch/bin/plugin -install elasticsearch-suggest -url file:///$PWD/build/distributions/elasticsearch-sugges`

所以这一行是关于在本地克隆该 repo 以运行插件。
这不是关于“要运行的课程”。这是 DVCS（分布式版本控制系统）[Git](http://git-scm.com/)必须用来克隆存储库的地址。

```
git clone git://github.com/spinscale/elasticsearch-suggest-plugin.git 
```

# ios - iOS - UIBarButtonItem - 后退按钮标题垂直位置未调整

> ID：10233028
> 
> 赞同：17
> 
> 时间：2012-04-19T16:56:49.417
> 
> 标签：ios, uibarbuttonitem, back-button

我正在`UIBarButtonItem`使用`UIAppearance`. 这可以正常工作并正确设置字体。但是，我确实需要调整按钮标题的垂直位置以适应新字体的大小。

```
[[UIBarButtonItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObject:[UIFont fontWithName:@"Sketch Rockwell" size:12] forKey:UITextAttributeFont] forState:UIControlStateNormal];
[[UIBarButtonItem appearance] setTitlePositionAdjustment:UIOffsetMake(0, 1.5) forBarMetrics:UIBarMetricsDefault]; 
```

问题是标题的垂直位置在常规中正确调整`UIBarButtonItem`，但导航栏上的后退按钮没有得到调整。我假设我在代码中定位了正确的对象，因为它的字体得到了更新，而不是它的标题的垂直位置。

有谁知道如何直接定位后退按钮？

谢谢

布赖恩

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-06T12:00:57.613

我也遇到了这个问题，我通过以下方式解决了这个问题：

```
[[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(0, 1.5) forBarMetrics:UIBarMetricsDefault]; 
```

# java - 开发一个java程序来编译.java文件

> ID：10233035
> 
> 赞同：5
> 
> 时间：2012-04-19T16:57:08.013
> 
> 标签：java, compiler-construction, java-compiler-api

我正在研究一个项目，该项目将涉及我的项目来编译足够简单的 java 文件。根据我的研究，我决定不尝试构建自己的编译器，因为这会花费太多时间。

那么有谁知道在这个项目中实现的最佳编译器是什么，以便我能够编译提交给程序的 java 文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T16:58:04.053

为什么不使用内置的[Java 编译器 API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:59:04.743

这几乎听起来你真的需要一种脚本方法来做三件事：

*   使用适当的语言编译器编译程序源
*   执行结果程序以产生一些结果
*   将结果与预期结果进行比较以产生成绩

既然您说您想从 Java 开始，但要转向其他语言，我建议您研究 ANT。它将以多种语言进行构建，并有助于执行/分级生成的目标代码。

# sql-server - 如何从 VBA 中的存储过程中的存储过程中捕获错误

> ID：10233036
> 
> 赞同：2
> 
> 时间：2012-04-19T16:57:10.117
> 
> 标签：sql-server, excel, vba, error-handling

我有一个调用其他几个的存储过程，其中一个由于重复的主键而无法将行插入到表中

引发的错误是消息 2627，级别 14，状态 1，过程 ...，第 16 行违反主键约束“...”。无法在对象“...”中插入重复键。

我通过 VBA 从 Excel 电子表格中调用它，并使用通常的 On Error 处理，但例程在没有触发错误的情况下静默失败。

我不确定这是由于存储过程中的存储过程还是错误的严重性太低。

有没有人经历过这样的事情并且可以建议解决方法？

我最初的尝试是在存储过程调用周围放置一个 BEGIN TRY / BEGIN CATCH 块，CATCH 以更高的严重性运行 RAISERROR，但它似乎没有触发。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:58:12.827

在外部过程中添加一个显式事务。`BEGIN TRANSACTION`在开始和`COMMIT TRANSACTION`结束时。

然后在开始交易之前添加`SET XACT_ABORT ON;`. 这将处理批处理失败。

在出现错误的内部 proc 之后，检查语句级别错误的错误值，例如

```
IF @@ERROR <> 0 
BEGIN
    ROLLBACK TRANSACTION; 
    RETURN 1; 
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:37:03.787

我们使用 T-SQL 中的 OUTPUT 变量来执行此操作，尽管我只知道它的 SQL 方面：您需要使用 VBA 从 SQL 获取输出参数。将输出变量声明为 varchar，并立即将其设置为 ''：

```
DECLARE @MyError VARCHAR(500) OUTPUT
SET @MyError = '' 
```

在 T-SQL 中进行常规错误检查，如果确实发现错误，请将描述设置到 @MyError 变量中。您的 VBA 代码将始终收到 @MyError 消息，但它通常是一个空字符串 ''。如果不是，那么您将转到 VBA 中的错误处理。

# c# - 我在哪里可以找到`PayPalAPI.PayPalAPIInitialize()`

> ID：10233039
> 
> 赞同：1
> 
> 时间：2012-04-19T16:57:34.787
> 
> 标签：c#, api, paypal

我正在`DoCapture`从 C# .Net 执行 Paypal。我已经从网站下载了 Paypal ASP.Net NVP SDK，目前正在查看`DoCapture`我希望执行的示例代码。

在类的顶部，添加了以下引用，因此我确定将这些添加到我自己的类中（是的，我已将适当的`*.dll`文件添加到我的项目中）：

```
using com.paypal.sdk.core;
using com.paypal.sdk.services;
using com.paypal.sdk.util; 
```

下一行在下面，它基本上运行一个称为`PayPalAPIInitialize`PayPalAPI 类的一部分并返回一个`NVPCallerServices`对象的方法。

```
NVPCallerServices caller = PayPalAPI.PayPalAPIInitialize(); 
```

这对我不起作用。我正在使用与`*.dll`示例代码相同的内容。我还在我的代码中添加了所有可能的 Paypal 引用，如下所示：

```
using com.paypal;
using com.paypal.sdk;
using com.paypal.sdk.core;
using com.paypal.sdk.core.nvp;
using com.paypal.sdk.exceptions;
using com.paypal.sdk.logging;
using com.paypal.sdk.profiles;
using com.paypal.sdk.resources;
using com.paypal.sdk.rules;
using com.paypal.sdk.services;
using com.paypal.sdk.util; 
```

我是在这里做一些愚蠢的事情还是 Paypal 搞砸了（我假设是前者，但我不知道是什么！）？

谢谢

# android - 将 osmdroid jar 文件添加到项目时出现 ClassNotFoundException

> ID：10233044
> 
> 赞同：0
> 
> 时间：2012-04-19T16:57:48.140
> 
> 标签：android, osmdroid

我正在尝试将开放街道地图 MapView 添加到我的示例项目中。我已按照此问答的说明进行操作：

[如何从 OpenStreetMap 离线创建地图图块，在 Android 上显示？](https://stackoverflow.com/questions/7625620/how-to-create-map-tiles-from-openstreetmap-offline-display-it-on-android)

我在eclipse构建路径中添加了这两个jar文件：osmdroid-android-3.0.7.jar slf4j-android-1.5.8.jar

当我运行项目时，我得到了这个异常：

```
java.lang.ClassNotFoundException: org.osmdroid.views.MapView in loader dalvik.system.PathClassLoader[/data/app/net.testapp.osmtest-1.apk] 
```

任何想法？

# sql - 为什么我会收到“ORA-00923：FROM 关键字未在预期的地方找到”？

> ID：10233048
> 
> 赞同：1
> 
> 时间：2012-04-19T16:58:18.023
> 
> 标签：sql, oracle, ora-00923

为什么“发件人”被视为在错误的位置？

在从 Delphi 移植到 C# 时，我必须将查询中的双引号更改为单引号，以便在 IDE 中编译查询字符串。

IOW，使用这样的 SQL，在 Delphi 和 Toad 中工作：

```
@"SELECT R.INTERLOPERABCID "ABCID",R.INTERLOPERID "CRID", . . . 
```

...我必须将其更改为此才能在 Visual Studio 中编译：

```
@"SELECT R.INTERLOPERABCID 'ABCID',R.INTERLOPERID 'CRID', . . . 
```

但是，SQL 不会以这种方式运行 - 我得到“ORA-00923：FROM 关键字未在预期的位置找到”错误消息（在 Toad 和尝试在 C# 应用程序中执行 SQL 时）。

我怎样才能让它编译和运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:17:45.100

您的列别名周围的引号使其胃灼热。

似乎在原始情况下，整个查询都被双引号包围，并且列别名周围的双引号与那些混淆。

在第二种情况下，Oracle 将单引号列别名解释为字符串，从而将其丢弃。

在 Oracle 中，您也不应该需要：您应该能够只编写代码：

```
@"SELECT R.INTERLOPERABCID ABCID,R.INTERLOPERID CRID, . . . 
```

或者，使用可选`AS`关键字：

```
@"SELECT R.INTERLOPERABCID AS ABCID,R.INTERLOPERID AS CRID, . . . 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-26T18:34:07.217

如果您在查询中有内联注释，则通常不起作用

# java - Java 子字符串匹配失败

> ID：10233050
> 
> 赞同：0
> 
> 时间：2012-04-19T16:58:22.990
> 
> 标签：java, bufferedreader

我正在使用文本文件从中读取值并将该文件加载到缓冲读取器中。此后，我逐行读取文件并检查是否有任何行包含我的关键字之一（我已经将它们放在字符串列表中）。

但是，即使该行包含我正在寻找的关键字，它也不会检测到它并给它一个 Miss。这是代码

```
 for(int i=0;i<sortedKeywordList.size();i++)
        {
        String tempString=sortedKeywordList.get(i);
        while(US.readLine()!=null)
        {   
            String str=US.readLine();
            //System.out.println(str);
            if(str.contains(tempString)){
                System.out.println("Contains: "+tempString);
            }               
            else{
                System.out.println("Miss");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:00:20.383

对于每个关键字，您都在使用 readLine() 遍历缓冲区。因此，在您的第一个关键字之后，您将用尽缓冲区读取，并且下一个关键字测试甚至不会执行，因为`US.readLine()`它给您 null。你没有重新初始化你的阅读器。

那么为什么不遍历您的文件一次（使用您的`readLine()`结构），然后为*每一行*遍历您的关键字？

编辑：正如 Hunter 所指出的那样（上面），您还在每个循环中调用 readLine() 两次。一次在您的循环测试中，一次检查每一行的关键字。我首先要确保您正确阅读文件（只需在阅读时打印出每一行）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:02:18.353

你打电话给 US.readLine() 两次！

请尝试：

```
String tempString;
String str;

for(...)
{
    tempString = sortedKeywordList.get(i);
    while((str = US.readLine()) != null)
    {
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:06:25.570

我看到两个主要问题。

1.  你的循环倒退了。

    您编写它的方式是查看关键字 1，然后查看整个输入，检查关键字 1。现在，没有更多的输入，它移动到关键字 2，但没有输入要检查，所以它快速遍历其余关键字并退出。

    您希望循环输入，检查每个关键字，而不是通过关键字，检查输入的每一行。

    ```
    while(input){

        for each keyword {
        ... 
    ```

2.  您`.readLine()`为每次迭代调用两次，有效地跳过每隔一行。

    尝试将第一行存储在循环之外，在循环条件中检查 null，然后在循环结束之前调用 readLine juuust。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T17:01:05.093

您`US.readLine()`在 while 循环入口调用一次，然后在内部调用一次。这会将输入移动到下一行。此外，将字符串与`.equals()`和检查子字符串使用`.contains()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T17:04:59.087

有问题的数据集会很有帮助。没有它，有几个想法 -

1.  验证排序关键字的大小写是否与文本文件中的大小写匹配。如果它们不匹配并且您需要支持不区分大小写的匹配，请将两个字符串转换为相同的大小写（例如，使用 toUpperCase()），然后使用 contains() 调用。

2.  验证没有额外的字符（如换行符/等）附加在排序关键字的末尾。

# c# - 如何获取包含调用窗口的屏幕截图（在 XP 上）

> ID：10233055
> 
> 赞同：1
> 
> 时间：2012-04-19T16:58:57.073
> 
> 标签：c#, screenshot

我有截图的代码......

```
Size ssSize;
int ssX, ssY, ssWidth, ssHeight;
Bitmap thisScreenshot;
Graphics gfxScreenshot;

public Image Screenshot()
{
ssX = Screen.PrimaryScreen.Bounds.X;
ssY = Screen.PrimaryScreen.Bounds.Y;
ssWidth = Screen.PrimaryScreen.Bounds.Width;
ssHeight = Screen.PrimaryScreen.Bounds.Height;
ssSize = Screen.PrimaryScreen.Bounds.Size;
thisScreenshot = new Bitmap(ssWidth,ssHeight);
gfxScreenshot = Graphics.FromImage(thisScreenshot);
return((Image)gfxScreenshot.CopyFromScreen(ssX, ssY, 0, 0, ssSize));
} 
```

在 W7 上，生成的图像包括调用窗口的像素；但在 XP 上却没有。我希望图像始终包含调用进程/窗口的像素。有什么线索我可以强迫这个吗？

**UPDATE1：** 我对此做了更多的实验，结果我更加困惑......我采用了上面的代码并创建了一个完全独立的应用程序，因此这与我最初启动的应用程序之间没有任何关系它从。奇怪的是，我仍然没有在屏幕截图中看到该应用程序的窗口。所以现在我在做截图的过程和我想要包含在截图中的窗口之间没有关系；但是，该窗口仍未包括在内。我确实尝试了 PRNT-SCRN 按钮，它确实包括窗口。请注意，这只是 XP 上的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T18:42:59.797

将表单的 Opacity 属性设置为 100，然后右键单击 TransparencyKey 属性并选择重置。这可确保您的窗口不再是分层窗口，并且不会从屏幕截图中丢失。

如果您想保留这些属性，那么您将不得不解决 Graphics.CopyFromScreen() 中的一个错误。需要使用带有 CaptureBlt 操作的 CopyPixelOperation 的重载来捕获分层窗口。但由于参数验证代码中的错误而无法工作。解决方法不是很漂亮但很实用：

```
using System;
using System.Drawing;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace WindowsFormsApplication1 {
    public partial class Form1 : Form {
        public Form1() {
            InitializeComponent();
        }
        private void button1_Click(object sender, EventArgs e) {
            Size sz = Screen.PrimaryScreen.Bounds.Size;
            IntPtr hDesk = GetDesktopWindow();
            IntPtr hSrce = GetWindowDC(hDesk);
            IntPtr hDest = CreateCompatibleDC(hSrce);
            IntPtr hBmp = CreateCompatibleBitmap(hSrce, sz.Width, sz.Height);
            IntPtr hOldBmp = SelectObject(hDest, hBmp);
            bool b = BitBlt(hDest, 0, 0, sz.Width, sz.Height, hSrce, 0, 0, CopyPixelOperation.SourceCopy | CopyPixelOperation.CaptureBlt);
            Bitmap bmp = Bitmap.FromHbitmap(hBmp);
            SelectObject(hDest, hOldBmp);
            DeleteObject(hBmp);
            DeleteDC(hDest);
            ReleaseDC(hDesk, hSrce);
            bmp.Save(@"c:\temp\test.png");
            bmp.Dispose();
        }

        // P/Invoke declarations
        [DllImport("gdi32.dll")]
        static extern bool BitBlt(IntPtr hdcDest, int xDest, int yDest, int
        wDest, int hDest, IntPtr hdcSource, int xSrc, int ySrc, CopyPixelOperation rop);
        [DllImport("user32.dll")]
        static extern bool ReleaseDC(IntPtr hWnd, IntPtr hDc);
        [DllImport("gdi32.dll")]
        static extern IntPtr DeleteDC(IntPtr hDc);
        [DllImport("gdi32.dll")]
        static extern IntPtr DeleteObject(IntPtr hDc);
        [DllImport("gdi32.dll")]
        static extern IntPtr CreateCompatibleBitmap(IntPtr hdc, int nWidth, int nHeight);
        [DllImport("gdi32.dll")]
        static extern IntPtr CreateCompatibleDC(IntPtr hdc);
        [DllImport("gdi32.dll")]
        static extern IntPtr SelectObject(IntPtr hdc, IntPtr bmp);
        [DllImport("user32.dll")]
        public static extern IntPtr GetDesktopWindow();
        [DllImport("user32.dll")]
        public static extern IntPtr GetWindowDC(IntPtr ptr);
    }
} 
```

# python - "ReplaceWith" & - 但只是其中的一部分

> ID：10233058
> 
> 赞同：1
> 
> 时间：2012-04-19T16:59:06.343
> 
> 标签：python, regex, match

我需要对包含逗号且后面没有空格的文本执行搜索/替换，以更改为逗号+空格。

所以我可以使用以下方法找到它：

```
,[^\s] 
```

但我正在为更换而苦苦挣扎；我不能只使用：

```
 , (space, comma) 
```

或者

```
& , 
```

由于匹配最初匹配两个字符。

有没有办法说 '&' - 1 ？或 '&[0]' 或什么意思；替换参数中的“匹配的字符串，但只是其中的一部分”？

尝试询问此问题的另一种方法：

1.  我可以使用正则表达式来识别我的字符串的一部分吗？
2.  但是替换我字符串的一个（略有不同但相关的）部分。

我可能只是用逗号+空格替换每个逗号，但这更受控制，不太可能做出我不需要的改变......

例如：

原来的：

```
Hello,World. 
```

应该变成：

```
Hello, World. 
```

但：

`Hello, World`.

应保持为：

```
Hello, World. 
```

目前，使用我的（坏）模式我有：

原来的：

```
Hello,World 
```

之后（错误）：

```
Hello, orld 
```

我实际上正在为此使用 Python 的 (2.6) 're' 模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:09:39.260

使用括号来捕获字符串的一部分是一种方法。另一种可能性是使用“前瞻断言”：

```
,(?=\S) 
```

*仅当*逗号后跟非空白字符时，此模式才匹配逗号。它不匹配逗号后面的任何内容，但使用该信息来决定是否匹配逗号。

例如：

```
>>> re.sub(r",(?=\S)", ", ", "Hello,World! Hello, World!")
'Hello, World! Hello, World!' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:09:22.967

是的，你可以。但是，在这种简单的情况下，您为什么要这样做？

```
def insertspaceaftercomma(s):
    """inserts a space after every comma, then remove doubled whitespace after comma (if any)"""
    return s.replace(",",", ").replace(",  ",", ") 
```

似乎工作：

```
>>> insertspaceaftercomma("Hello, World")
'Hello, World'
>>> insertspaceaftercomma("Hello,World")
'Hello, World'
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T19:10:49.493

尝试这个：

```
import re

s1 = 'Hello,World.'
re.sub(r',([^\s])', ', \g<1>', s1)
> Hello, World.

s2 = 'Hello, World.'
re.sub(r',([^\s])', ', \g<1>', s2)
> Hello, World. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T17:57:09.073

您可以查找逗号 + 非空格字符，然后在它们之间添加一个空格：

```
re.sub(r',([^\s])', r', \1', string) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T17:03:13.907

是的，使用括号“捕获”与您的表达式匹配的部分字符串。我没有跟上 Python 的实现速度，但它应该为您提供某种名为 match[] 的数组，其元素对应于捕获。

# linux - 以秒为单位查找时间戳的差异

> ID：10233059
> 
> 赞同：2
> 
> 时间：2012-04-19T16:59:13.177
> 
> 标签：linux, shell, scripting, solaris, ksh

我有 2 个时间戳格式为`MMDDYYYY-HHMMSS`. 例如。`04192012-000623`和`04192012-000854`。

我需要能够在几秒钟内找到 2 之间的差异。

需要检查的特殊情况

*   跨越午夜的日期。例如：`04172012-115500`& `04182012-000200`。
*   哪个文件先进来并不重要，等等。

我正在运行 ksh 而无法访问该`date -d`标志。谁能指出我如何编写shell脚本的正确方向？（它将成为更大的 shell 脚本的一部分，所以请不要使用其他语言）

这旨在同时在 solaris 和 linux ksh 上运行。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:45:11.883

这个解决方案使用 gnu-date 和 bashisms，因为我不知道 ksh。

```
d1=04192012-000623
dd1="${d1:4:4}/${d1:0:2}/${d1:2:2} ${d1:9:2}:${d1:11:2}:${d1:13:2}"
d1=04192012-000854
dd2="${d1:4:4}/${d1:0:2}/${d1:2:2} ${d1:9:2}:${d1:11:2}:${d1:13:2}"
echo $(($(date -d "$dd1" +%s) - $(date -d "$dd2" +%s))) 
```

也许 ${var:from:len} 在 ksh 中不能用于从字符串中剪切部分，那么你必须用其他东西替换它，也许是 sed。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:13:35.787

作为初学者（来自我上面提供的链接）：

```
#! /usr/bin/ksh

echo enter first time stamp
read TIME1
echo enter second time stamp
read TIME2
H1=${TIME1%:+([0-9])}
M1=${TIME1#+([0-9]):}
H2=${TIME2%:+([0-9])}
M2=${TIME2#+([0-9]):}
H1=${H1#0}
M1=${M1#0}
H2=${H2#0}
M2=${M2#0}
((MAM1=H1*60+M1))
((MAM2=H2*60+M2))
((MAM1>MAM2)) && ((MAM2=MAM2+1440))
((diff=MAM2-MAM1))
echo diff = $diff

exit 0
$ ./timestamp
enter first time stamp
17:30
enter second time stamp
18:05
diff = 35
$ ./timestamp
enter first time stamp
23:59
enter second time stamp
00:01
diff = 2
$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T22:00:27.723

如果这只是为了好玩，祝你好运:)。如果它是出于实际的实际目的，请参阅我的`strptime`包装[如何使用 ksh（或其他 shell 脚本）获取现在和不同日期（以分钟为单位）之间的差异？](https://stackoverflow.com/questions/9908915/how-to-get-the-difference-between-now-and-a-different-date-in-minutes-using-ks/10044607#10044607)，它应该很容易适应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-24T17:08:36.180

stat -c 后跟以下之一

```
 %X     time of last access, seconds since Epoch

   %Y     time of last data modification, seconds since Epoch

   %Z     time of last status change, seconds since Epoch 
```

# sql - 找出一组字母可以创建哪些单词？

> ID：10233060
> 
> 赞同：3
> 
> 时间：2012-04-19T16:59:20.463
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试编写一些 SQL 来接受一组字母并返回它可以生成的所有可能的单词。我的第一个想法是创建一个基本的三表数据库，如下所示：

```
Words -- contains 200k words in real life
------
1 | act
2 | cat

Letters -- contains the whole alphabet in real life
--------
1  | a
3  | c
20 | t

WordLetters --First column is the WordId and the second column is the LetterId
------------
1  | 1
1  | 3
1  | 20
2  | 3
2  | 1
2  | 20 
```

但是我有点坚持如何编写一个查询，该查询返回在 WordLetters 中为传入的每个字母都有一个条目的单词。它还需要考虑具有两个相同字母的单词。我从这个查询开始，但它显然不起作用：

```
SELECT DISTINCT w.Word 
FROM Words w
INNER JOIN WordLetters wl
ON wl.LetterId = 20 AND wl.LetterId = 3 AND wl.LetterId = 1 
```

我将如何编写查询以仅返回包含传入的所有字母并考虑重复字母的单词？

* * *

其他信息：

我的 Word 表包含近 200,000 个单词，这就是我尝试在数据库端而不是在代码中执行此操作的原因。如果有人关心，我正在使用[enable1 单词列表。](http://code.google.com/p/dotnetperls-controls/downloads/detail?name=enable1.txt)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:26:00.900

暂时忽略问题的 SQL 部分，我使用的算法相当简单：首先获取字典中的每个单词，然后生成一个版本，其中包含按排序顺序的字母，以及返回的指针到那个词的原始版本。

这将给出一个包含以下条目的表：

```
sorted_text word_id
act         123    /* we'll assume `act` was word number 123 in the original list */
act         321    /* we'll assume 'cat' was word number 321 in the original list */ 
```

然后，当我们收到一个输入（比如“tac”）时，我们对它的字母进行排序，在与原始单词表相连的排序字母表中查找它，这给了我们一个可以从中创建的单词列表那个输入。

如果*我*这样做，我会在 SQL 数据库中拥有相应的表，但可能会使用其他东西将单词列表预处理为排序形式。同样，我可能会将用户输入的字母排序留给我用来创建前端的任何内容，因此 SQL 将留给它擅长的事情：关系数据库管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:38:45.053

如果您使用您提供的解决方案，您需要在 WordLetters 表中添加一个订单列。否则，无法保证您检索到的行与插入它们的顺序相同。

但是，我认为我有更好的解决方案。根据您的问题，您似乎希望找到所有具有相同组成字母的单词，而与出现的顺序或次数无关。这意味着您的可能性有限。如果将字母表中的每个字母转换为不同的 2 次幂，则可以为每个字母组合创建一个唯一值（也称为位掩码）。然后，您可以简单地将单词中每个字母的值相加。这将使匹配单词变得微不足道，因为具有相同字母的所有单词都将映射到相同的值。这是一个例子：

```
WITH letters
     AS (SELECT Cast('a' AS VARCHAR) AS Letter,
                1                    AS LetterValue,
                1                    AS LetterNumber
         UNION ALL
         SELECT Cast(Char(97 + LetterNumber) AS VARCHAR),
                Power(2, LetterNumber),
                LetterNumber + 1
         FROM   letters
         WHERE  LetterNumber < 26),
     words
     AS (SELECT 1 AS wordid, 'act' AS word
         UNION ALL SELECT 2, 'cat'
         UNION ALL SELECT 3, 'tom'
         UNION ALL SELECT 4, 'moot'
         UNION ALL SELECT 5, 'mote')
SELECT wordid,
       word,
       Sum(distinct LetterValue) as WordValue
FROM   letters
       JOIN words
         ON word LIKE '%' + letter + '%'
GROUP  BY wordid, word 
```

如果您运行此查询，您将看到，“act”和“cat”具有相同的 WordValue，“tom”和“moot”也是如此，尽管字符数不同。

是什么让这比您的解决方案更好？您不必构建很多非单词来清除它们。这将大大节省执行任务所需的存储和处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:56:23.877

SQL中有一个解决方案。它涉及使用一种技巧来计算每个字母在单词中出现的次数。以下表达式计算“a”出现的次数：

```
select len(word) - len(replace(word, 'a', '')) 
```

这个想法是计算单词中所有字母的总和，看看它是否与总长度匹配：

```
select w.word, (LEN(w.word) - SUM(LettersInWord))
from 
(
  select w.word, (LEN(w.word) - LEN(replace(w.word, wl.letter))) as LettersInWord
  from word w 
  cross join wordletters wl
) wls
having (LEN(w.word) = SUM(LettersInWord)) 
```

这种特殊的解决方案允许一个字母多次出现。我不确定在原始问题中是否需要这样做。如果我们想要达到一定数量的出现，那么我们可以执行以下操作：

```
select w.word, (LEN(w.word) - SUM(LettersInWord))
from 
(
   select w.word,
     (case when (LEN(w.word) - LEN(replace(w.word, wl.letter))) <= maxcount 
         then (LEN(w.word) - LEN(replace(w.word, wl.letter))) 
         else maxcount end) as LettersInWord
   from word w 
   cross join
   (
      select letter, count(*) as maxcount
      from wordletters wl
      group by letter
   ) wl
) wls
having (LEN(w.word) = SUM(LettersInWord)) 
```

如果您想要与字母完全匹配，那么 case 语句应该使用`" = maxcount"`而不是`" <= maxcount"`.

以我的经验，我实际上已经看到了小交叉连接的良好性能。这实际上可能在服务器端工作。在服务器上进行这项工作有两大优势。首先，它利用了盒子上的并行性。其次，需要通过网络传输的数据要少得多。

# cakephp - cakephp 默认控制器/动作路由，带有命名参数的分页中断

> ID：10233062
> 
> 赞同：0
> 
> 时间：2012-04-19T16:59:35.230
> 
> 标签：cakephp, routing, pagination, named-parameters

我有默认路由规则集：

```
Router::connect('/', array('controller' => 'photos', 'action' => 'index')); 
```

当我去

```
http://url.com/photos/index/page:1/limit:10/direction:desc/ 
```

一切正常，但是当我去的时候它坏了

```
http://url.com/page:1/limit:10/direction:desc/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:22:36.767

首先，你需要告诉你的路由解析之后`/`：

`Router::connect('/*', array('controller' => 'photos', 'action' => 'index'));`

然后，连接命名参数：

`Router::connectNamed(false, array('defaults' => true));`

如果您愿意，您也可以将它们设置在您的路线中。有关在此处连接命名参数的更多信息：http: [//book.cakephp.org/2.0/en/development/routing.html#controlling-named-parameters](http://book.cakephp.org/2.0/en/development/routing.html#controlling-named-parameters)

# java - 如何将事件处理程序附加到 JavaFX 舞台/窗口最小化按钮？

> ID：10233066
> 
> 赞同：2
> 
> 时间：2012-04-19T16:59:52.860
> 
> 标签：java, javafx

单击窗口的最小化按钮时，我需要隐藏舞台窗口。我所做的一切都是java代码而不是脚本语言。如何将窗口事件处理程序附加到 JavaFX 阶段窗口最小化按钮？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T21:23:10.830

将侦听器附加到舞台的[图标化属性](http://docs.oracle.com/javafx/2.0/api/javafx/stage/Stage.html#iconifiedProperty%28%29)。

```
stage.iconifiedProperty().addListener(new ChangeListener<Boolean>() {
  @Override public void changed(ObservableValue<? extends Boolean> prop, Boolean oldValue, Boolean newValue) {
    System.out.println("Iconified? " + newValue);
  }
}); 
```

# php - PHP中的特殊字符和双引号问题

> ID：10233071
> 
> 赞同：1
> 
> 时间：2012-04-19T17:00:06.687
> 
> 标签：php, pdo, special-characters, double-quotes, html-entities

我的 db 列中有这种值，

**法官-Fürstová Mila "Ut enim ad minim veniam"**

我`PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"`用来处理我所有的特殊字符，

```
class database_pdo
{
    # database handler
    protected $connection = null;

    # make a connection
    public function __construct($dsn,$username,$password)
    {
        try 
        {

            $this->connection = new PDO($dsn, $username, $password, array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));
            $this->connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 

        }
        catch (PDOException $e) 
        {
            # call the get_error function
            $this->get_error($e);
        }
    }
    ...
    ...
    ...

 } 
```

当我尝试在输入字段中打印该值时，

```
<input name="title" type="text" value="<?php echo $page->title;?>"/> 
```

我的输入字段中只有**Judge-Fürstová Mila**。

如果我`htmlentities`用来修复双引号问题，

```
<input name="title" type="text" value="<?php echo htmlentities($page->title);?>"/> 
```

我在我的输入字段中得到这个，

**法官-FÃ¼rstovÃ¡ Mila "Ut enim ad minim veniam"**

那么，我怎样才能一次解决这个特殊字符和双引号问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:26:06.557

[htmlentities()](http://php.net/manual/en/function.htmlentities.php)在 PHP5.4 之前默认使用 ISO-8869-1 编码

尝试为函数调用提供编码参数：

```
<?php echo htmlentities($page->title, ENT_COMPAT | ENT_HTML401, 'UTF-8');?> 
```

但是，没有办法绕过提供第二个参数，但`ENT_COMPAT | ENT_HTML401`无论如何都是默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:22:42.833

尝试使用 htmlspecialchars() 而不是 htmlentities()。

# forms - 在带有scala和circumflex-orm类的play framework 2中提供自己的unapply方法

> ID：10233077
> 
> 赞同：0
> 
> 时间：2012-04-19T17:00:30.383
> 
> 标签：forms, scala, orm, playframework-2.0, circumflex-orm

我想将 play 2.0 框架中的表单绑定与从circumflex-orm ( [website](http://circumflex.ru/projects/orm/index.html) ) 扩展 Record 的类结合起来。

这些是我的类对象：

```
class Task extends Record[Long, Task] with IdentityGenerator[Long, Task] {  
  def this(name: String, description: String) = {
    this()
    this.name := name
    this.description := description
}

  val id = "id".BIGINT.NOT_NULL.AUTO_INCREMENT
  val name = "name".VARCHAR(255).NOT_NULL
  val description = "description".TEXT.NOT_NULL

  def PRIMARY_KEY = id
  def relation = Task
} 
```

这就是我试图用播放形式做的事情：

```
val taskForm: Form[Tasks] = Form(
  mapping(
    "name" -> text,
    "description" -> text
  )
  {(name, description) => Task(name, description)}
  {(t: Task) => Option(t.name(), t.description())  }
) 
```

但我收到这样的错误：

```
found   : models.Task => Option[(String, String)]
required: Unit => Option[(String, String)]
  {(t: Task) => Option(t.name(), t.description())} 
```

如果我用一些替换选项：

```
found   : models.Task => Some[(String, String)]
required: Unit => Option[(String, String)]
  {(t: Task) => Some(t.name(), t.description())} 
```

我现在一无所知，任何提示将不胜感激。

非常感谢。

**编辑：**我犯了一个基本错误，我确实命名了表格：

```
val taskForm: Form[Tasks] = Form( 
```

当类的名称是“任务”时。所以我可以将其更改为：

```
val taskForm: Form[Task] = Form(
  mapping(
      "name" -> text,
      "description" -> text
  ) ( (name, description) => Task ) 
  ( (t: Task) => Option() )
) 
```

现在我得到一个不同的错误：

```
Unspecified value parameter x
  ( (t: Task) => Option() ) 
```

我在eclipse中做了一个需要依赖的简单项目，你可以在这里下载并查看它，如果有帮助： [基本表单示例](http://sveri.de/files/public-docs/sonstiges/FormBindOrmExample.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:31:08.123

我的评论错了，下面的片段对我有用。

```
case class Foo(x: String, y: String)

val taskForm = Form(
  mapping(
    "name" -> text,
    "description" -> text)
  ((name, description) => Foo(name, description))
  ((t: Foo) => Some(t.x, t.y))) 
```

## 更新

我在依赖项中添加了抑扬符，并尝试了您的确切示例。它对我来说编译得很好，我只是添加了

```
object Task extends Task with Table[Long, Task] 
```

我相信您忘记将其包含在问题中。所以我只能建议清理和重建整个项目。

PS，我换了行

```
{ (name, description) => new Task(name, description) } 
```

但很明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:05:29.803

主要问题是如果您使用circumflex，您不会编写案例类，因此默认情况下您没有 apply 和 unapply 方法。

你必须在你的任务伴生对象中编写自己的应用和取消应用方法，如下所示：

```
 object Taks extends Task with Table[Long, Task] {
        def apply(name:String,description:String) = {
            var t = new Task()
            t.name := name
            t.description := description
            t
        }
        def unapply(t:Task) = Some(t.name(),t.description())
    } 
```

# php - 通过回显将日期时间/时间戳从 PHP 传递到 Javascript

> ID：10233080
> 
> 赞同：7
> 
> 时间：2012-04-19T17:00:46.827
> 
> 标签：php, javascript, datetime, timestamp

如何将日期时间/时间戳从 PHP 传递到 javascript。以下似乎不起作用：

```
startLive = new Date(<?php echo date("U", strtotime($start_date)); ?>); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-19T17:03:44.603

尝试这个：

```
startLive = new Date(<?php echo strtotime($start_date)*1000; ?>); 
```

解释：

PHP 的[`strtotime`](http://php.net/manual/en/function.strtotime.php)函数返回一个 Unix 时间戳（自 1970 年 1 月 1 日午夜以来的秒数）。

Javascript 的[`Date()`](http://www.w3schools.com/jsref/jsref_obj_date.asp)函数可以通过指定自 1970 年 1 月 1 日午夜以来的*毫秒数来实例化。*

所以将秒乘以 1000 得到毫秒，可以在 Javascript 中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-16T23:27:12.340

我认为非常简单和更通用的解决方案是

```
var dateTime = <?php echo date('c', strtotime($yourDateTime)) ?>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:28:50.427

你可以使用这个：

```
startLive = new Date("<?php echo date("F d, Y G:i:s",strtotime($start_date)); ?>"); 
```

这将解决您的问题

解释：

[在这里检查](http://www.w3schools.com/js/js_obj_date.asp)

# xslt - XSLT：如何测试是否存在至少一个合格的子节点/@date

> ID：10233082
> 
> 赞同：2
> 
> 时间：2012-04-19T17:00:52.030
> 
> 标签：xslt, compare

我想测试一个符合 city 和 current-date() 的组中的事件，以便我可以输出一个标题。

查找城市 ($place eq //event/@city) 似乎可行。但我不知道如何表达“某些 eventTime/@date 小于 $today”。错误消息是“不允许将多个项目的序列作为 'eq' 的第二个操作数”这令人困惑，因为我已经编写了 test="($place eq //event/@city) 和 (xs: date($today) lt xs:date(//eventTime/@date))。

我应该如何将 $today 与 eventTime 中的 @date 进行比较？这是输入。

```
<calendar>  
<group month="2012-04-01">
    <event city="paris">
        <eventTime date="2012-04-02"/>
        <eventText>Paris - expired April date</eventText>
    </event>
    <event city="london">
        <eventTime date="2012-04-19"/>
        <eventText>London - current April 19 date</eventText>
    </event>
    <event city="london">
        <eventTime date="2012-04-24"/>
        <eventText>London - current April date</eventText>
    </event>
</group>
<group month="2012-05-01">
    <event city="london">
        <eventTime date="2012-05-02"/>
        <eventText>London - current May date</eventText>
    </event>
    <event city="paris">
        <eventTime date="2012-05-01"/>
        <eventText>Paris - current May date</eventText>
    </event>
    <event city="london">
        <eventTime date="2012-05-02"/>
        <eventText>London - current May date</eventText>
    </event>
</group>

</calendar> 
```

这是 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns:fn="http://johnadamturnbull.com/xslt"
                exclude-result-prefixes="xs"
                version="2.0" >

    <xsl:output method="html" indent="yes" name="html"/>

    <xsl:param name="place" as="xs:string" required="yes"></xsl:param>
    <xsl:variable name="today" select="current-date()" as="xs:date"/>

      <xsl:template match="/">
        <html>
           <body>
         <xsl:apply-templates select="calendar/group"/>
        </body>
        </html>  
    </xsl:template>

    <xsl:template match = "group">

        <xsl:if test="($place eq //event/@city) and
               (xs:date($today) ge xs:date(//eventTime/@date))">

              <h4 class = "dateHeader">
                    <xsl:value-of select="format-date(./@month,'[MNn] [Y]')"/>
                </h4>
                <ul>
                    <xsl:apply-templates select="event"></xsl:apply-templates>
                </ul>
        </xsl:if>
    </xsl:template>

    <xsl:template match="event">
       <xsl:variable name="eventTime" select="eventTime/@date" as="xs:date"/>
        <xsl:choose>
            <xsl:when test="($eventTime ge $today) and
                            (($place eq @city) or (@city eq ''))">
                <li>
                        <xsl:apply-templates></xsl:apply-templates>
                </li>
            </xsl:when>
            </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:04:06.907

没有 HTML 输出应该是什么的示例，但我很确定我可以说出您想要实现的目标。

我认为您的 XSLT 可以通过删除和添加谓词来进行测试来`xsl:if`简化`xsl:choose`。

这个 XSLT 2.0 样式表：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  xmlns:fn="http://johnadamturnbull.com/xslt" exclude-result-prefixes="xs fn" version="2.0">
  <xsl:output method="html" indent="yes" name="html"/>
  <xsl:strip-space elements="*"/>

  <xsl:param name="place" as="xs:string" required="yes"/>
  <xsl:variable name="today" select="current-date()" as="xs:date"/>

  <xsl:template match="/">
    <html>
      <body>
        <xsl:apply-templates select="calendar/group"/>
      </body>
    </html>
  </xsl:template>

  <!--Match group if @city matches $place or is empty and has an eventTime
  with a @date that is greater than or equal to today's date.-->
  <xsl:template match="group[event[@city=$place or @city=''][xs:date(eventTime/@date) >= $today]]">
      <h4 class="dateHeader">
        <xsl:value-of select="format-date(@month,'[MNn] [Y]')"/>
      </h4>
      <ul>
        <!--Only apply-templates to events that have a @city that matches $place
        or has a @city that is empty.-->
        <xsl:apply-templates select="event[@city=$place or @city='']"/>
      </ul>
  </xsl:template>

  <!--Only match events that have an eventTime with a @date that is greater than 
  or equal to today's date.-->
  <xsl:template match="event[@city=$place or @city=''][xs:date(eventTime/@date) >= $today]">
    <li>
      <xsl:apply-templates/>
    </li>
  </xsl:template>

  <xsl:template match="event"/>

</xsl:stylesheet> 
```

应用于您的示例 XML 输入会生成以下 HTML 输出：

```
<html>
   <body>
      <h4 class="dateHeader">April 2012</h4>
      <ul>
         <li>London - current April 19 date</li>
         <li>London - current April date</li>
      </ul>
      <h4 class="dateHeader">May 2012</h4>
      <ul>
         <li>London - current May date</li>
         <li>London - current May date</li>
      </ul>
   </body>
</html> 
```

如果这不是您要查找的内容，请添加 HTML 输出应该是什么样子的示例。

# r - 使用 R 进行情绪分析

> ID：10233087
> 
> 赞同：28
> 
> 时间：2012-04-19T17:01:05.777
> 
> 标签：r, sentiment-analysis

是否有任何专注于情绪分析的 R 包？我有一个小型调查，用户可以在其中写下关于他们使用网络工具的体验的评论。我要求一个数字排名，并且可以选择包含评论。

我想知道评估评论的积极性或消极性的最佳方法是什么。我希望能够将其与用户使用 R 提供的数字排名进行比较。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-19T17:36:50.837

还有[这个包](http://cran.r-project.org/web/packages/sentiment/index.html)：

`sentiment: Tools for Sentiment Analysis`

情感是一个带有情感分析工具的 R 包，包括用于积极/消极和情感分类的贝叶斯分类器。

2012 年 12 月 14 日更新：它已被删除到[存档](http://cran.r-project.org/src/contrib/Archive/sentiment/)中...

2013 年 3 月 15 日更新：[qdap](http://cran.us.r-project.org/web/packages/qdap/index.html)包有一个`polarity`功能，基于 Jeffery Breen 的工作

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-19T17:06:23.937

[这是](http://www.trestletechnology.net/2011/11/sermon-sentiment-analysis/)我在 R 中对情感分析所做的工作。

该代码绝不是经过修饰或打包好的，但我[将其发布在 Github 上](https://github.com/trestletech/Sermon-Sentiment-Analysis)并附有基本文档。我使用了仅返回 JSON 的[ViralHeat 情绪 API](http://viralheat.com/developer/sentiment_api)，因此进行情绪分析的实际函数非常简单（请参阅[此处](https://github.com/trestletech/Sermon-Sentiment-Analysis/blob/master/ViralHeatAPI.R)的代码）。

如果您在使用它时遇到问题，请随时与我联系。请注意，您需要先向 ViralHeat 注册一个 API 密钥，然后才能使用它。如果您发现配额过于严格，我已经联系了他们，他们很乐意在我使用 API 的几个月里给我更多的查询。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-10T04:53:24.523

有关使用 1) Viral Heat API 2) Jeffrey Breen 的方法 3) 使用 Sentiment Package 的分步指南，请查看此链接：[https ://sites.google.com/site/miningtwitter/questions/sentiment](https://sites.google.com/site/miningtwitter/questions/sentiment)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-14T08:54:55.617

我试图在[这里](http://github.com/mananshah99/sentR)重组并提供一个有凝聚力的情绪分析包。SentR 包括词干提取和预处理，并提供对 ViralHeat API、默认聚合函数以及更高级的朴素贝叶斯方法的访问。

安装比较简单：

```
install.packages('devtools')
require('devtools')
install_github('mananshah99/sentR')
require('sentR') 
```

以及一个简单的分类示例：

```
# Create small vectors for happy and sad words (useful in aggregate(...) function)
positive <- c('happy', 'well-off', 'good', 'happiness')
negative <- c('sad', 'bad', 'miserable', 'terrible')

# Words to test sentiment
test <- c('I am a very happy person.', 'I am a very sad person', 
'I’ve always understood happiness to be appreciation. There is no greater happiness than appreciation for what one has- both physically and in the way of relationships and ideologies. The unhappy seek that which they do not have and can not fully appreciate the things around them. I don’t expect much from life. I don’t need a high paying job, a big house or fancy cars. I simply wish to be able to live my life appreciating everything around me. 
')

# 1\. Simple Summation
out <- classify.aggregate(test, positive, negative)
out

# 2\. Naive Bayes
out <- classify.naivebayes(test)
out 
```

它提供以下输出：

```
 score
1     1
2    -1
3     2

     POS                NEG                 POS/NEG             SENT      
[1,] "9.47547003995745" "0.445453222112551" "21.2715265477714"  "positive"
[2,] "1.03127774142571" "9.47547003995745"  "0.108836578774127" "negative"
[3,] "67.1985217685598" "35.1792261323723"  "1.9101762362738"   "positive" 
```

请随时贡献:) 希望有所帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-17T11:40:17.537

您仍然可以使用情绪包。按照下面的脚本安装它。

您可能需要 R 3.x。

```
require(devtools)
install_url("http://cran.r-project.org/src/contrib/Archive/sentiment/sentiment_0.2.tar.gz")
require(sentiment)
ls("package:sentiment") 
```

# javascript - sphinx js:function 指令不识别参数

> ID：10233088
> 
> 赞同：3
> 
> 时间：2012-04-19T17:01:10.333
> 
> 标签：javascript, parameters, python-sphinx

我使用 js:function 指令收到以下错误。为什么 :param 不能识别 :: 之间的多个值？

" 无效的选项数据：扩展选项字段名称不能包含多个单词。

```
.. js:function:: f(test,test2)  
   ：参数测试：  
   ：参数测试2：  

```

"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:17:16.247

您需要在指令及其选项之间添加一个空行。

# jquery - jqGrid - jsonString 数据类型 - 显示嵌套的 json 元素值

> ID：10233096
> 
> 赞同：0
> 
> 时间：2012-04-19T17:01:35.963
> 
> 标签：jquery, jqgrid

全部，

我有一个从 web 服务返回的 JSON 对象。我正在使用 Stringify 方法将其转换为字符串对象。

当我尝试将它与我的 jqGrid 集成时（使用 datatype:'jsonstring', datastr:myJSONstringobject）。如果它很简单，我可以将 JSON 列与网格映射（即'index：customerName'）

但如果它是一个嵌套的 JSON 值（即 'index:customer.customerAddress.street'），它不会被加载到网格中。

有人可以帮忙吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:38:44.547

如果我理解您的问题正确，您应该使用`jsonmap`包含点（如`jsonmap: customer.customerAddress.street`）而不是`index`. 如果你使用`datatype: 'jsonstring'`你应该使用`name`和`index`参数相同的值，不包含点、空格或任何其他元字符。`jsonmap`如果您定义与您的数据相对应的数据，您可能可以减少使用的需要`jsonReader`。因为您没有发布 JSON 数据的示例，所以我无法向您解释更多。

大多数情况下，您不需要使用 Web 服务`datatype: 'jsonstring'`。相反，使用`datatype: 'json'`一些额外的参数会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T06:27:43.100

如果您有嵌套的 JSON 并且您想显示它在其中一个子注释中的行数据，您只需使用，例如，如果您在“数据”节点中有“jqGrid”的数据：

```
 jsonReader: {
            root: "data.rows",
            page: "data.page",
            total: "data.total",
            records: "data.records"
        } 
```

注意：这在 jqGrid 版本 4.4.4 上 100% 有效

# css - 更改模型验证错误的 css

> ID：10233097
> 
> 赞同：0
> 
> 时间：2012-04-19T17:01:37.727
> 
> 标签：css, asp.net-mvc, asp.net-mvc-3

我知道**输入验证错误**类添加到绑定到模型的元素中。但是，如果我的输入字段被设置样式并用 div 包装怎么办：

```
<div class="inputWide">
    <span class="inputWideSpan"></span>
    @Html.TextBoxFor(m => m.FirstName, new { @class = "wide" })
</div> 
```

我想更改/添加样式到 Model.FirstName 验证上的 inputWide div 无法更改背景等，可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:10:58.257

这实际上取决于验证是客户端还是服务器端。最好做类似的事情：

```
<div class="inputWide">
    @Html.LabelFor(m => m.CardNumber)
</div>
<div class="editor-field">
     @Html.TextBoxFor(m => m.FirstName, new { @class = "wide" })
     @Html.ValidationMessageFor(m => m.FirstName)
</div> 
```

使用CSS：

```
.field-validation-error 
{
    display: block;
    color: #ff0000;
}
.field-validation-valid {
    display: none;
} 
.input-validation-error {
    border: 1px solid #ff0000;
    background-color: #ffeeee;
}
.validation-summary-errors {
    font-weight: bold;
    color: #ff0000;
}
.validation-summary-valid {
    display: none;
} 
```

这将呈现类似于：

![结果](../Images/3b6cb06131444756eafe79267b9481f7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:42:13.723

您需要使用像[jQuery Validate Hooks这样的插件](https://gist.github.com/957732)

# java - ID3 Java 枚举树

> ID：10233099
> 
> 赞同：0
> 
> 时间：2012-04-19T17:01:46.823
> 
> 标签：java, enums, tree, id3

我正在尝试制作一个非二元学习树，它是 ID3 算法的简化版本。为此，我尝试使用枚举，因为有几个参考资料教授枚举层次结构，但是我在将枚举转移到制作树所需的函数时遇到了麻烦。我已经尽我所能为树设置了我需要的一切，但是我在树的初始构建时遇到了麻烦。

首先，我做了六个枚举，每个都有自己的文件，所以我不需要到处写“main.enumname”。前五个枚举代表汽车诊断。

```
public enum fuelstats {notempty, empty}
public enum lightstatus {Dim, Normal}
public enum scents {normal, gas}
public enum soundstatus {Normal, Howl, Screech, Click}
public enum turn {no, yes} 
```

接下来，我又做了两个枚举。一种用于不同的诊断结果，另一种用于汽车诊断的不同“主题”。

```
public enum problems {battery, starter, solenoid, outofgas, flooding}
public enum features {lightstatus, soundstatus, fuelstats, scents, turn, problems} 
```

然后，我制作了五个不同汽车诊断的数据示例，以便在树中进行排序。

```
Example example1 = new Example(lightstatus.Dim, soundstatus.Howl, turn.yes, fuelstats.notempty, scents.normal, problems.battery);
Example example2 = new Example(lightstatus.Normal, soundstatus.Screech, turn.no, fuelstats.notempty, scents.normal, problems.starter);
Example example3 = new Example(lightstatus.Normal, soundstatus.Click, turn.no, fuelstats.notempty, scents.normal, problems.solenoid);
Example example4 = new Example(lightstatus.Normal, soundstatus.Normal, turn.yes, fuelstats.empty, scents.normal, problems.outofgas);
Example example5 = new Example(lightstatus.Normal, soundstatus.Normal, turn.yes, fuelstats.notempty, scents.gas, problems.flooding);

//make an array list of Examples.
ArrayList<Example> Examples = new ArrayList<Example>();
Examples.add(example1);

Examples.add(example2);
Examples.add(example3);
Examples.add(example4);
Examples.add(example5); 
```

我将各种汽车诊断信息（称为 Features）放在一个 ArrayList 中以进行洗牌，因为它们将被随机用于构建树。

```
//This ArrayList holds the Enums for shuffling purposes.
ArrayList<features> Features = new ArrayList<features>();

Features.add(features.soundstatus);
Features.add(features.lightstatus);
Features.add(features.turn);
Features.add(features.scents);
Features.add(features.fuelstats);

// Shuffle the elements in the list
Collections.shuffle(Features);

//The Features Array List is now a shuffled tree.
//We will do a single loop that will serve as our stack.

//First we take the top of the list and assign it to the root.
Tree id3 = new Tree(Features.get(0),Examples); 
```

但是我如何编写一棵树：接受一个特征枚举，使根的主题与枚举匹配，并且枚举的所有不同状态都是子项？例如，如果 soundstatus 是根，它应该生成四个子项，即 Normal、Howl、Screech 和 Click。这样我就可以将示例声音与孩子的声音相匹配。到目前为止，这是我的节点。

```
public class Node 
{

    ArrayList<Node> children;

    /* Constructor*/
    public Node(ArrayList<Node> ExampleList) 
    { 
        this.ExampleList = ExampleList;
        this.parent = parent;
        this.children = children; 
    }

    public ArrayList<Node> getChildren() 
    { 
        return children; 
    }

    public void addChild(Node n) 
    { 
        children.add(n);
    }

    private ArrayList<Node> children;

    Enum phrase;

    private boolean isUsed;

    Node parent;

    public void setUsed(boolean isUsed) 
    {
        this.isUsed = isUsed;
    }

    public boolean isUsed() 
    {
        return isUsed;
    }
    //This method states if the node is a leaf 
    public boolean isLeaf()
    {
        if (this.getChildren() == null)
        return true;

        else
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T06:41:57.113

我有一个类似的问题，建立枚举的层次结构。但就我而言，类的层次结构也可以解决问题。如果您对这里感兴趣，请参阅我的帖子： [如何使用枚举或任何其他方式在 java 中构建类别的层次结构树？](https://stackoverflow.com/questions/20114444/how-to-build-an-hierarchy-tree-of-categories-in-java-using-enums-or-any-other-wa)

现在，仅涉及枚举层次结构，正如您在我的帖子中看到的那样，我发现这可能对您有用：

[http://alexradzin.blogspot.hk/2010/10/hierarchical-structures-with-java-enums_05.html](http://alexradzin.blogspot.hk/2010/10/hierarchical-structures-with-java-enums_05.html)

尤其是：

```
public enum OsType {
OS(null),
    Windows(OS),
        WindowsNT(Windows),
            WindowsNTWorkstation(WindowsNT),
            WindowsNTServer(WindowsNT),
        Windows2000(Windows),
            Windows2000Server(Windows2000),
            Windows2000Workstation(Windows2000),
        WindowsXp(Windows),
        WindowsVista(Windows),
        Windows7(Windows),
        Windows95(Windows),
        Windows98(Windows),
    Unix(OS) {
            @Override
            public boolean supportsXWindows() {
                return true;
            }
        },
        Linux(Unix),
        AIX(Unix),
        HpUx(Unix),
        SunOs(Unix),
;
private OsType parent = null;

private OsType(OsType parent) {
    this.parent = parent;
} 
```

我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:51:30.117

您可以将子类添加到功能：

```
import java.util.*;
interface hasEnumChildren {
    Class clazz();
}
enum fuelstats {
    notempty,empty
}
enum lightstatus {
    Dim,Normal
}
enum scents {
    normal,gas
}
enum soundstatus {
    Normal,Howl,Screech,Click
}
enum turn {
    no,yes
}
enum problems {
    battery,starter,solenoid,outofgas,flooding
}
enum features implements hasEnumChildren {
    lightstatus(lightstatus.class),soundstatus(soundstatus.class),fuelstats(fuelstats.class),scents(scents.class),turn(turn.class),problems(problems.class);
    features(Class clazz) {
        this.clazz=clazz;
    }
    final Class clazz;
    @Override public Class clazz() {
        return clazz;
    }
}
public class So10233099 {
    public static void main(String[] args) {
        System.out.println(Arrays.asList(features.lightstatus.clazz().getEnumConstants()));
    }
} 
```

# css - jQuery Masonry 与我的页脚冲突

> ID：10233100
> 
> 赞同：1
> 
> 时间：2012-04-19T17:00:53.013
> 
> 标签：css, wordpress

我已经设法让 jQuery Masonry 在我的 Wordpress 网站上工作。但是我的页脚不再位于页面底部，而是被撞到页面顶部和 jQuery Masonry 应用内容的后面。

自己看看——http: [//camerabooru.com/blog/](http://camerabooru.com/blog/)

我试图将“clear:both”应用于 div 标签，但这似乎不起作用。有人有什么建议吗？

# javascript - 匹配重复组

> ID：10233101
> 
> 赞同：1
> 
> 时间：2012-04-19T17:01:50.970
> 
> 标签：javascript, regex

我有这样的东西

```
{{ a_name a_description:"a value" another_description: "another_value" }} 
```

我想匹配`a_name`所有的描述和值。

[我现在使用](http://rubular.com/r/FQox0wyhpe)的正则表达式是

```
{{\s*(?<function>\w+)\s+((?<attr>\w+)\s*\:\s*\"(?<val>\w+?)\"\s*)+}} 
```

但这仅匹配最后一组，我如何匹配所有组？如果相关，我正在使用 JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:49:11.260

您必须分两部分执行此操作，首先获取名称，然后获取描述/值对。

```
str = '{{ a_name a_description:"a value" another_description: "another_value" }}';
name = /\w+/.exec(str);

// notice the '?' at the end to make it non-greedy.
re = /(?:(\w+):\s*"([^"]+)"\s*)+?/g;
var res;
while ((res = re.exec(str)) !=null) {
    // For each iteration, description = res[1]; value = res[2];
} 
```

**ETA**：你可以用一个正则表达式来做，但它确实使事情复杂化：

```
re = /(?:{{\s*([^ ]+) )|(?:(\w+):\s*"([^"]+)"\s*)+?/g;
while ((res = re.exec(str)) !=null) {
    if (!name) {
        name = res[1];
    }
    else {
        description = res[2];
        value = res[3];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:44:44.963

在 JavaScript 中：

```
var re = /{{ (\w+) (\w+):\"([a-zA-Z_ ]+)\" (\w+): \"([a-zA-Z_ ]+)\" }}/
var out = re.exec('{{ a_name a_description:"a value" another_description: "another_value" }}') 
```

`out`将是一个包含您需要的匹配项的数组。

如果您需要捕获通用数量的`key: "value"`对，这将有所帮助：

```
var str = '{{ a_name a_description: "a value" another_description: "another_value" }}'
var pat = /[a-zA-Z_]+: "[a-zA-Z_ ]*"/gi
str.match(pat) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:21:36.133

我真的认为处理这种情况的正确方法是瀑布方法：您首先提取函数名称，然后仅使用`split`.

```
var testString = '{{ a_name a_description:"a value" another_description: "another_value" }}';
var parser = /(\w+)\s*([^}]+)/;
var parts  = parser.exec(testString);

console.log('Function name: %s', parts[1]);
var rawParams = parts[2].split(/\s(?=\w+:)/);
var params    = {};
for (var i = 0, l = rawParams.length; i < l; ++i) {
  var t = rawParams[i].split(/:/);
  t[1] = t[1].replace(/^\s+|"|\s+$/g, ''); // trimming
  params[t[0]] = t[1];
}
console.log(params); 
```

但我可能错了。)

# python - 在 Python 中访问 POST 变量

> ID：10233102
> 
> 赞同：1
> 
> 时间：2012-04-19T17:01:55.827
> 
> 标签：python, ajax, post

我有这个将数据发送到 python 脚本的简单测试 AJAX 请求。

```
$.ajax({
              url: 'parser.py',
              type: 'POST',
              data: {test:"test"},
              dataType: "text",
              success: function(result)
              {
                console.log(result)
              },
              error: function(request, status, error)
              {
                console.log("oops")
              }
            }) 
```

我知道这很简单，但是如何访问我发送到 python 脚本的发布内容？它是在像 PHP 这样的查询字符串中发送的吗？

# git - 如何在 git 中找到 2 个 git-svn 克隆（原始 + fork）的 merge_base？

> ID：10233104
> 
> 赞同：1
> 
> 时间：2012-04-19T17:02:00.067
> 
> 标签：git

我有两个 git-svn 克隆，一个是“原始”，另一个是“fork”。虽然他们有不同的历史，但在某一点上他们有相同的差异。

我正在尝试将其缝合回一个 git-repo 并且我正在尝试根据更改差异找到“合并基础”，因此我可以将 fork 中的更改重新定位到该特定点的“原始”，保留“正确”的历史。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-19T20:53:19.647

一个`git merge`呢？

```
cd project-original
git remote add project-forked path/to/git-repo
git fetch project-forked
git merge project-forked
git commit 
```

我觉得整个项目的分支通常会被合并在一起，而不是重新组合在一起。这个选项对你有用吗？

（另外，我对 git-svn 没有真正的经验。所以不要把我的建议当作福音真理 :) ）

# database-design - 数据库设计 - 创建一个只有两个值的表，或使其成为具有这两个值之一的列

> ID：10233108
> 
> 赞同：4
> 
> 时间：2012-04-19T17:02:20.693
> 
> 标签：database-design

这更像是一个数据库设计问题，并且很好奇当只有两组值时专业数据库管理员将如何处理 - 以下面两个设计场景为例，您会选择哪个；为什么？

**情景一**

```
 table INVOICES
 -------------------------------
 id | royalty_fee | royalty_type
 -------------------------------
 1  | 15          | percentage
 2  | 10.00       | fixed
 1  | 25          | percentage
 1  | 25.00       | fixed 
```

或者....

**方案二**

```
 table INVOICES
 ----------------------------------
 id | royalty_fee | royalty_type_id
 ----------------------------------
 1  | 15          | 1
 2  | 10.00       | 2
 1  | 25          | 1
 1  | 25.00       | 2

 table ROYALTY_TYPES
 -------------------------------
 id | label
 -------------------------------
 1  | percentage
 2  | fixed 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T17:07:28.097

方法2更好。您的开发人员可以使用第二个表 ROYALTY_TYPES 进行查找，如果您想添加新类型或编辑/更新 ROYALTY_TYPES 的标签，您也可以轻松完成。如果您在 ROYALTY_TYPES 中编辑/修改标签，则只需要在一个地方进行更改，并且表 INVOICES 将不受影响
编辑：
我通常会寻找与数据库设计相关的三件事：
**添加的难易程度：**在您的第一种方法中，您如果您碰巧没有发票记录，将无法添加新的版税类型。我的意思是，如果您想添加一种新类型，可以说 HalfFixed 用于未来的发票。如果没有 HalfFixed 类型的发票，您将无法执行此操作
**更新有多容易**假设您想将固定版税类型更新为“修复”。如果您遵循第一种方法，那么您将需要在多行中更新它。
**删除是多么容易**现在如果您想从版税类型中删除一个类型，那么根据您的第一种方法，您将必须在表上运行更新语句并将特定的版税类型设置为 NULL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:11:35.540

我会使用后者，毫无疑问。

1.  你能绝对确定永远不会有另一种版税类型吗？你不能。
2.  您可以通过外键关系验证Royalty_type_id 列...对于royalty_type 不是这样...您必须对硬编码的文本值使用检查约束。
3.  使用版税_types 表，您可以根据需要向版税类型实体本身添加新功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:11:34.497

在事务数据库上，2 更好。1 可用于数据仓库系统。

# emacs - Emacs：字节编译时，它会删除折叠内的任何内容

> ID：10233110
> 
> 赞同：2
> 
> 时间：2012-04-19T17:02:26.027
> 
> 标签：emacs, compilation, folding

非常感谢您的帮助。

我正在尝试对我的 init.le 文件进行字节编译。我遇到的问题是生成的 init.lec 文件是空的！经过一些测试，我意识到折叠内的任何内容（即;;{{{;;}}}）都被删除了。

任何人都知道如何防止这种情况，除了停止使用折叠:-D（更准确地说是folding.el）。

我还尝试更改折叠语法。这并不容易，但是当我让它工作时，Emacs 用新的语法删除了折叠的内容！疯了吧？

干杯!

更新：

这是我的[init.el](https://github.com/rafaelgp/emacs-serendipity/blob/master/init.el)文件（抱歉上面的错字）

我使用[fold.le](http://www.emacswiki.org/emacs/folding.el)来保持一切整洁。

基本上，它所做的是收缩和扩展 ;;{{{ ;;}}} 标签内的内容

所以当所有东西都折叠起来时，我的 init.el 文件看起来像这样：

```
(message "Loading Emacs!")

;;{{{ FIRST...
;;{{{ DIRECTORIES...
;;{{{ PACKAGES...
;;{{{ INTERFACE...
;;{{{ EDITOR...
;;{{{ FUNCTIONS...
;;{{{ HOOKS...
;;{{{ PACKAGES...
;;{{{ LAST...

(message "Emacs Loaded!") 
```

字节编译后，这是生成的 init.elc 文件：

```
ELC
;;; Compiled by rafaelgp@RAFAELGP-PC on Thu Apr 19 17:37:20 2012
;;; from file c:/Users/rafaelgp/AppData/Roaming/.emacs.d/init.el
;;; in Emacs version 24.0.92.1
;;; with all optimizations.

;;; This file uses dynamic docstrings, first added in Emacs 19.29.

;;; This file does not contain utf-8 non-ASCII characters,
;;; and so can be loaded in Emacs versions earlier than 23.

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(byte-code "\300\301!\210\300\302!\207" [message "Loading Emacs!" "Emacs Loaded!"] 2) 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T20:28:52.690

唔。它似乎对我有用，但我不得不注释掉一些我没有安装的东西，比如毒蛇。我使用了[这种折叠模式](http://uuid.com/~marcus/computing/fold-mode.html)的修改版本，没有任何问题。至少您可以添加有关字节编译的建议以关闭折叠，例如

```
(defadvice byte-compile-file (around turn-off-folding activate)
  (turn-off-folding-mode)
  ad-do-it
  (turn-on-folding-mode)) 
```

希望这能解决您的问题。不过我可能会尝试不同的折叠模式。

# winapi - 如何在powershell中更改当前的键盘布局？

> ID：10233112
> 
> 赞同：5
> 
> 时间：2012-04-19T17:02:39.273
> 
> 标签：winapi, powershell, keyboard

我在 Windows 设置中设置了两种语言 - 捷克语（默认）和英语（用于编程）。我想**在它们之间切换*powershell*。**

我通常使用捷克语工作，它是我 PC 上的默认语言。因此，每当我（重新）启动任何应用程序时，它都会以捷克语键盘布局开始。

但我正在用英文布局编程。因此，当我开始新的编程应用程序（即 powershell 窗口）时，我总是需要点击 Alt+Shift。

有没有办法用powershell中的一些命令来做到这一点？或者在 C# 中，可能通过一些 win32 api 调用（因为我可以为此制作自己的小 cmdlet）？

我发现了这个[问题](https://stackoverflow.com/questions/263276/change-keyboard-layout-for-other-process)（和其他一些问题），但我不太了解它（他们）......

我从未使用过 Win API，所以我不知道究竟有什么可能以及如何使用它......

有人有一些 cmdlet 或小教程如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:17:18.870

我找到了很好且非常简单的解决方案！Codeplex 上有[WASP](http://wasp.codeplex.com/)项目。该项目允许操作窗口，向它们发送键并向它们发送点击。

我的问题的解决方案是在 powershell 启动时导入 WASP 模块，然后选择 powershell 窗口（使用 WASP）并向其发送 Alt+Shift 击键（使用 WASP）。

这是包含到 powershell **profile.ps1**文件中的代码，以便将语言更改为下一个：

```
Import-Module WASP
Select-Window powershell | Send-Keys "%+" # '%' = ALT key, '+' = SHIFT key 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-04-19T17:11:32.597

转到控制面板，打开区域和语言选项。

单击详细信息...

单击添加和删除以管理您需要的语言。

添加您的语言。单击确定退出。

键盘布局已更改，您可以通过语言栏进行切换。

**您还可以查看此链接：**

[http://krypted.com/commands/powershell-commands/](http://krypted.com/commands/powershell-commands/)

# python - 构建查询字符串时出现 Python TypeError

> ID：10233120
> 
> 赞同：1
> 
> 时间：2012-04-19T17:03:30.723
> 
> 标签：python, typeerror

我正在构建一个查询字符串。

```
query = "SELECT seqid, date, name, steamid, team, text, type, '%s' as triggerword, '%s' as weight FROM chatlogs WHERE date > '%s' AND text LIKE '%%%s%%' ORDER BY DATE" % (word, weight, self.setting['LAST_RUN_TIME'], word) 
```

如果我打印字符串，它会正确返回：

```
SELECT seqid, date, name, steamid, team, text, type, 'hunting_term' as triggerword, '0.01' as weight FROM chatlogs WHERE date > '2012-04-18 23:47:58.439124' AND text LIKE '%hunting_term%' ORDER BY DATE 
```

但是，它会因 TypeError 异常而失败：TypeError: not enough arguments for format string

完整代码：

```
import database

mysqldb = database.Connection('localhost','mydb',user='myuser',password='mypass')

word = 'hunting_term'
weight = 0.01
setting = dict({'LAST_RUN_TIME':'2012-04-18 23:47:58.439124'})

query = "SELECT seqid, date, name, steamid, team, text, type, '%s' as triggerword, '%s' as weight FROM chatlogs WHERE date > '%s' AND text LIKE '%%%s%%' ORDER BY DATE" % (word, weight, setting['LAST_RUN_TIME'], word)
print query

for message in mysqldb.query(query):        # This is the line it throws the exception on
    print "A row" 
```

数据库来自[tornado](https://github.com/facebook/tornado/blob/master/tornado/database.py)包

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:36:54.907

这里的问题是对 MySQLdb 的最终调用看起来像这样：

```
query = "SELECT seqid, date, name, steamid, team, text, type, 'hunting_term' as triggerword, '0.01' as weight FROM chatlogs WHERE date > '2012-04-18 23:47:58.439124' AND text LIKE '%hunting_term%' ORDER BY DATE"
db.cursor().execute(query, ()) 
```

第一个参数`db.cursor().execute()`应该是格式字符串，第二个参数应该是该格式字符串的替换，您可以在[MySQLdb 文档](http://mysql-python.sourceforge.net/MySQLdb.html#some-examples)中看到这一点。换句话说，它将执行以下代码：

```
query % () 
```

如您所见，这将导致相同的 TypeError：

```
>>> query % ()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: not enough arguments for format string 
```

这意味着`%`您希望 MySQL 看到的任何文字`%%`在被 看到时都必须是 a `db.cursor().execute()`，因此您应该能够通过将原始格式字符串更改为以下内容来解决此问题：

```
query = "SELECT seqid, date, name, steamid, team, text, type, '%s' as triggerword, '%s' as weight FROM chatlogs WHERE date > '%s' AND text LIKE '%%%%%s%%%%' ORDER BY DATE" % (word, weight, self.setting['LAST_RUN_TIME'], word) 
```

然而，正确的做法是让 MySQLdb 为您执行替换，这会将您的代码更改为以下内容：

```
query = "SELECT seqid, date, name, steamid, team, text, type, %s as triggerword, %s as weight FROM chatlogs WHERE date > %s AND text LIKE %s ORDER BY DATE"
parameters = (word, weight, setting['LAST_RUN_TIME'], '%%%s%%' % word)
for message in mysqldb.query(query, *parameters):
    print "A row" 
```

# facebook - 在 joomla (kunena) 中获取基本 url

> ID：10233123
> 
> 赞同：0
> 
> 时间：2012-04-19T17:03:40.907
> 
> 标签：facebook, url, joomla, base

我试图获得一个变量，即使我们在 kunena 论坛中同一主题的 2 3... 页面上导航，也会将主题的基本 URL 显示给我。

这是因为我沿主题实现了 Facebook 评论，因此人们也可以在 Facebook 中评论该主题。问题是 facebook 会自动检测当前 url，如果人们导航到主题的第二页，facebook 会认为它是另一个页面，并且在 facebook 上针对同一主题有多个并行评论是没有意义的。

Facebook还让我设置页面的url，如果我可以设置一个变量来推送像joomla默认的基本url：

```
<base href="http://******.***/forum/index/generalidades/1778-amor-procura-se.html" /> 
```

会很棒的。我正在使用这个 joomla 功能来尝试获取 joomla 的基本 url，但是这个元标记和其他标记一起被这个调用：我很难找到所需的变量并将它放在下面的文件中facebook评论应用程序在哪里：

> /public_html/components/com_kunena/template/default/view/view.php

很抱歉发了这么大的帖子，但我是葡萄牙人，我很难用几句话来表达自己。

真挚地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:15:28.307

使用 JURI：

```
$currentUrl = JURI::current(); 
```

# ruby-on-rails - 无类错误

> ID：10233128
> 
> 赞同：0
> 
> 时间：2012-04-19T17:04:20.863
> 
> 标签：ruby-on-rails, haml

我想根据某个需要展示相关产品，只是图片和名称而已，取决于类别这里是mu控制器

```
class RelatedneedsController < ApplicationController

  def index
    @relatedneeds = RelatedNeed.all
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @relatedneeds }
    end
  end 

  def show
    s1 = '@need.category.name'
    s2 = '@relatedneed.category.name'

    if s1.eql?(s2)
      @relatedneed = relatedneed.find(params[:id])

      respond_to do |format|
        format.html # show.html.erb
        format.json { render json: @need }
      end
    end
  end

  def get_name
      @relatedneed.name
  end
end 
```

这是我的模型

```
class Relatedneed
  include Mongoid::Document
  include Mongoid::Paperclip

  mapping do
    indexes :name 
  end

  field :name, type: String

  belongs_to :category
  belongs_to :user
end 
```

这是 show.haml 文件

```
%h1
  %b= @need.name

#container{:style => "width:1000px"}
    #desc{:style => "height:400px;width:400px;float:left;"}
        =image_tag @relatedneed.photo.url(:normal) 
```

这是我的 index.haml 文件

```
%h1= @relatedneed.get_name

#container{:style => "width:1000px"}
    #desc{:style => "background-color:#EEEEEE;height:400px;width:400px;float:left;"}
    = link_to "Check Need", new_need_path 
```

我不知道他们是否缺少某些东西，并且我在 RelatedneedsController#index 中收到此错误 NoMethodError

未定义的方法“键？” 对于零：NilClass

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:45:25.707

你的 index.haml 有`@relatedneed.get_name`但你没有`@relatedneed`在你的控制器中设置，只有`@relatedneeds`. 就这么简单吗？

此外，您在控制器中的 show 方法对我来说毫无意义。您已将实例变量放在字符串中！您需要首先通过模型使用数据库查询设置实例变量。您的 get_name 方法看起来也属于模型而不是控制器。

# c# - Winforms 组件设计器集成

> ID：10233129
> 
> 赞同：0
> 
> 时间：2012-04-19T17:04:23.813
> 
> 标签：c#, winforms, windows-forms-designer, custom-component

我想创建一个包含其他元素集合的 winform 组件，类似于 TabControl（包含 TabPage）或 ListView（包含列）。

子项有一个名称属性，我希望在生成的代码中使用该名称来访问子项。就像在 TabControl 中一样，我可以使用编辑器命名每个标签页。

最后我希望 subItems 被本地化。再一次，就像在 TabControl 中一样，我可以使用编辑器本地化每个 TabPage 的文本。

我遇到的问题是 1) 如何获取用于代码生成的 Name 属性？2) 如何正确本地化子项目？

有什么好文章可以读吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:35:11.303

好的，我找到了解决方案。子项也必须从 Component 继承。

# jquery - jQuery 序列化 + base64 编码

> ID：10233130
> 
> 赞同：0
> 
> 时间：2012-04-19T17:04:27.883
> 
> 标签：jquery, forms, serialization, base64

有没有办法序列化表单以便输出是 base64 编码的？

带着敬意，

麦克风。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:08:17.370

您可以使用这样的脚本来base64输出序列化形式[https://github.com/carlo/jquery-base64](https://github.com/carlo/jquery-base64)

```
$.base64.encode($('form').serialize()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:08:18.413

我相信您可以使用附加到表单 ID

```
($('#NAMEOFID').serialize()); 
```

或者

```
($('#NAMEOFID').serializeArray()); 
```

这将其放入 JSON 序列化数组中，但我认为 jQuery 没有内置的 base64 插件（我可能错了）。我继续找到了一个base64插件： http: [//archive.plugins.jquery.com/project/base64](http://archive.plugins.jquery.com/project/base64)

只需将序列化字符串传递给它，就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:08:43.807

使用[base64 编码库](http://www.webtoolkit.info/javascript-base64.html)，然后：

```
var serialized = $('form').serialize();
var encoded = Base64.encode(serialized); 
```

# redbean - 将mysql查询转换为redbean查询

> ID：10233131
> 
> 赞同：0
> 
> 时间：2012-04-19T17:04:34.170
> 
> 标签：redbean

谁能帮我将此mysql查询转换为redbean查询？

```
SELECT category,sum(price) from transaction GROUP BY category. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T19:02:02.070

我们可以像这样使用

```
$results = R::getAll( 'SELECT category,sum(price) from transaction GROUP BY category' ); 
// $results is multidimensional array 
```

这是参考链接：[http ://www.redbeanphp.com/queries](http://www.redbeanphp.com/queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T23:09:43.243

更好的转换是：

$sql = "SELECT category, sum(price) FROM transaction GROUP BY category";

$transactions = R::getAll($sql);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:47:23.000

你不需要转换任何东西。你只需写：

```
$transactions = R::get("SELECT category,sum(price) from transaction GROUP BY category"); 
```

# php - 处理多个 facebook 之类按钮的一般方法

> ID：10233134
> 
> 赞同：1
> 
> 时间：2012-04-19T17:04:51.987
> 
> 标签：php, facebook, facebook-like

我正在一个网站上工作，该网站有很多产品（想想杂货清单），每个网站都有一个与之关联的类似 facebook 的按钮。

目前我们正在加载页面加载时的每个赞按钮。我正在重新编写它，因此我们仅在用户将鼠标悬停在每个产品上时才加载点赞按钮。我们只是在第一次加载时为每个元素粘贴一个虚拟按钮。

我的问题是这是处理多个 facebook 之类按钮的标准方式吗？

还有其他方法吗？

我正在寻找一个页面上有超过 100 个类似 facebook 按钮的其他网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:20:12.193

如果只是为了美观，请全部加载，但使用 .css 样式的 CSS 样式`display: none;`。当它们悬停在元素上时，您可以使用 CSS :hover 在父`<a>`元素中使它们可见，或者仅使用 javascript/JQuery 将 CSS 更改为`display: block;`鼠标悬停时的任何内容，然后`display: none;`鼠标移出时返回。

# c# - “INSERT INTO ...”查询的灵活方法？

> ID：10233136
> 
> 赞同：0
> 
> 时间：2012-04-19T17:04:56.793
> 
> 标签：c#, ado.net

我现在正在构建一些项目，因为我知道我将`INSERT INTO`在 SQL 中使用大量查询。所以我`class`对他们有不同的 es，我想让它尽可能灵活。

我有一个包含所有查询的类，第二个处理所有连接（打开、关闭和`SqlCommand`填充...

问题是，我可以只有一个“ `command.Parameter.AddWithValue`”，我可以有多个这样的行。具有不同类型的值（`int`等`string`）以及不同的名称和含义。

有谁知道如何搭配这个泡菜？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:09:31.360

SQL 语句必须特定于您正在查询的架构。这包括`INSERT INTO...`.

如果您不想编写重复的 CRUD（创建、读取、更新、删除），您应该考虑使用 ORM。这些用于将您的对象映射到 SQL 语句，并在此过程中为您生成这些 SQL 语句。.NET 的两个更流行的示例是[NHibernate](http://nhforge.org/Default.aspx)和[Entity Framework](http://msdn.microsoft.com/en-us/library/bb399572.aspx)。

# c# - 设置 Visual Studio 以创建 SQL Server 2005 支持的 mdf 文件

> ID：10233142
> 
> 赞同：0
> 
> 时间：2012-04-19T17:05:04.010
> 
> 标签：c#, sql, sql-server, sql-server-2008, sql-server-2005

我正在使用 Visual Studio 2010，并将基于服务的数据库（`.mdf`文件）添加到我的项目中。

问题是在部署服务器中我们只有 SQL Server 2005 但 SQL Server 2005 不支持`.mdf`Visual Studio 2010 创建的文件。

我无法更改部署服务器中的 SQL Server，所以我的问题是为什么要告诉 Visual Studio 创建`.mdf`SQL Server 2005 支持的文件？

如果是这样 - 对我的代码有什么影响

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:38:54.700

您始终可以将数据库的 SQL 脚本从任何服务器版本中导出，并在另一个（包括较低）版本的服务器上执行该脚本。

由于脚本可以包含元数据和实际数据，因此即使您在开发机器上使用较新版本，此选项也应该使您的数据库与 SQL 2005 兼容。

# c# - 将图像插入段落的 InLines 列表

> ID：10233152
> 
> 赞同：2
> 
> 时间：2012-04-19T17:05:48.540
> 
> 标签：c#, wpf, image, flowdocument, paragraph

我需要在段落中包含一个图像以及一些文本。但是，我需要在添加文本*后插入图像。*我知道我可以这样做：

```
Paragraph firstParagraph = new Paragraph();
firstParagraph.Inlines.Add(new System.Windows.Controls.Image());
firstParagraph.Inlines.Add(new Run("Some text")); 
```

效果很好。

但是，如果我似乎无法做到这一点：

```
Paragraph secondParagraph = new Paragraph();
secondParagraph.Inlines.Add(new Run("Some text"));
secondParagraph.Inlines.InsertBefore(secondParagraph.Inlines.FirstInline, new Image()); 
```

（显然，上面是一个人为的例子，在我的真实例子中，我得到了一长串段落，我无法控制。我需要在其中一些前面插入一个图像。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T12:59:48.077

首先你需要知道在哪里插入。您将需要一个 TextPointer。

假设您使用的是 RichTextBox 并且您想在光标位置插入，请尝试：

```
RichTextBox.Name = "rtb"; 
```

您的 System.Windows.Controls.Image 名称：img

```
TextPointer insertHere = rtb.CaretPosition.GetInsertionPosition(LogicalDirection.Forward);
new InlineUIContainer(img, insertHere); 
```

# php - 我需要 php/mysql 取 3 个赋值标记（由用户插入），将它们加在一起，然后除以 3

> ID：10233156
> 
> 赞同：0
> 
> 时间：2012-04-19T17:06:23.337
> 
> 标签：php, mysql

我需要 php/mysql 取 3 个赋值标记（由用户插入），将它们加在一起，然后除以 3 以获得平均标记。然后需要将该平均分插入表中的成绩列中。

这是代码；

```
$a1 = $_REQUEST['ass1'];
$a2 = $_REQUEST['ass2'];
$a3 = $_REQUEST['ass3'];
$id = $_REQUEST['id'];
$t = '3';
$sum = "'$a1' + '$a2' + '$a3'";
$average = (int)($sum / $t);

mysql_select_db("kackieco_final",$con);
$q = "UPDATE grades SET ass1=$a1, ass2=$a2, ass3=$a3, grade=$average WHERE id = $id"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:38:19.490

您的 $sum 是一个包含 3 个数字和数学运算符的字符串。

字面上地

```
'1' + '2' + '3'
// string(15) "'1' + '2' + '3'" 
```

[http://codepad.org/Nxcdrkyk](http://codepad.org/Nxcdrkyk)

摆脱引号

```
$sum = $a1 + $a2 + $a3;
// int(6) 
```

[http://codepad.org/RWvTSfv8](http://codepad.org/RWvTSfv8)

你会得到你的int

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:29:44.287

这是一个示例，在您的代码中，您将值视为字符串：

```
<?php
//Example values, simulate a request
$_REQUEST['id']='25';
$_REQUEST['ass1']='17';
$_REQUEST['ass2']='28';
$_REQUEST['ass3']='32';

//Get and check the values from the user
$values=array();
$values['id'] = (isset($_REQUEST['id']) && is_numeric($_REQUEST['id']))?$_REQUEST['id']:0;
$values[1] = (isset($_REQUEST['ass1']) && is_numeric($_REQUEST['ass1']))?$_REQUEST['ass1']:0;
$values[2] = (isset($_REQUEST['ass2']) && is_numeric($_REQUEST['ass2']))?$_REQUEST['ass2']:0;
$values[3] = (isset($_REQUEST['ass3']) && is_numeric($_REQUEST['ass3']))?$_REQUEST['ass3']:0;
$values['t'] = 3;

//one line add the variables together then devide by 3 and then round down or up depending on whats closest
$values['average'] = round(( ($values[1] + $values[2] + $values[3]) / $values['t'])); //26

$q = "UPDATE grades SET ass1={$values[1]}, ass2={$values[2]}, ass3={$values[3]}, grade={$values['average']} WHERE id = {$values['id']}";

echo $q;
//UPDATE grades SET ass1=17, ass2=28, ass3=32, grade=26 WHERE id = 25
?> 
```

# delphi - 从代码中关闭 BDE

> ID：10233161
> 
> 赞同：3
> 
> 时间：2012-04-19T17:06:31.300
> 
> 标签：delphi, bde

我们有一个使用 BDE 的遗留应用程序。（考虑到它的年龄，BDE 继续工作得非常好）。

有时我们的应用程序需要操作文件夹（重命名、移动等），但 .NET 或 .LCK 文件在文件夹中保持打开状态，从而阻止了这种情况。我们一直无法在我们的代码中找到任何仍然打开的表或查询。

除了让我们的程序外壳连接到非 BDE 程序并自行终止之外，我们是否有一种编程方式来关闭 BDE，从而解锁这些文件。

*标准免责声明：*是的，BDE 已死。是的，我们应该迁移到更现代的数据库。是的，总有一天 BDE 将不再工作。由于有近 200 万行遗留代码，迁移（即使使用像 Sybase Advantage 这样的插件兼容平台）并不是一个廉价的项目，这就是为什么我们还没有这样做的原因......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:55:20.400

您通常不需要为关闭 BDE 做任何具体的事情。
所有 BDE 会话都在 DBTables 的 Finalization 部分中释放。`DbiDLLExit`这将关闭所有内容，并且当 Default Session 也被销毁时，如果需要，它将`DbiExit`从 BDE 单元调用 then 。

现在，如果你想在**之前**关闭 BDE ，我建议你模仿 DBTables 的最终确定和初始化部分（免责声明：有限的测试，小心使用......），如：

```
procedure BDEKill;
begin
// from finalization
  Sessions.Free;
  Sessions := nil;
end;

procedure BDEReStart;
begin
// from initialization
  Sessions := TSessionList.Create;
  Session := TSession.Create(nil);
  Session.SessionName := 'Default'; { Do not localize }
end; 
```

并像这样使用它：

```
BDEKill;
try
  // move my folders
finally
  BDEReStart;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:13:46.107

**解锁文件是您的问题的另一种可能（极端）解决方案：**

建议你研究一下opc0de的[File Unlock源码。](http://www.delphibasics.info/home/delphibasicsprojects/fileunlockbyopc0de)

* * *

**报价**：

> 一个文件经常不能被删除，因为它正在被另一个应用程序使用。此工具允许您解锁该文件以进行删除。

* * *

**外观和感觉：**

![通过 opc0de 解锁文件](../Images/ce1e9cbcb1c9b4218cd4d9538c586970.png)

* * *

**特征：**

*   *解锁*文件
*   *解锁和删除*文件
*   查看哪些进程使用该文件
*   终止使用该文件的进程

* * *

**下载链接：**

*   [文件解锁.rar](http://www.delphibasics.info/home/delphibasicsprojects/fileunlockbyopc0de/FileUnlock.rar)

# javafx-2 - 调整大小时更改 TreeItem 高度

> ID：10233162
> 
> 赞同：3
> 
> 时间：2012-04-19T17:06:36.497
> 
> 标签：javafx-2

我想创建只有垂直滚动条的 TreeView，所以如果我减小窗口宽度，内容应该被包装，TreeView 应该增加它们的高度。

我的想法是把 FlowPane - TreeItem 作为一个孩子。

我尝试了这段代码，以非常不同的组合

```
FlowPane flowPane = new FlowPane();        
flowPane.setMaxWidth(Double.MAX_VALUE);
flowPane.setPrefWidth(200.0f);
flowPane.setMinWidth(100.0f);
flowPane.setMaxHeight(Double.MAX_VALUE);
flowPane.getChildren().addAll( /* add many childs which should be wrapped */ );
TreeItem<FlowPane > = new TreeItem<FlowPane>(flowPane); 
```

当我减小宽度时，FlowPane 中的子元素会被包裹，但容器不会增加高度。看起来很挤。

任何想法如何解决它？

如何制作包装内容并在调整大小时增加高度的TreeItem？

**更新：** 我通过在场景中添加监听器来解决它

```
scene.widthProperty().addListener( new ChangeListener<Number>() {
        @Override
        public void changed(ObservableValue<? extends Number> arg0, Number arg1,    Number arg2) {
           MainController.handleOnResize();
        }
    }); 
```

然后，如果 ListItem 将 FlowPane 作为值，我将遍历 ListView 并更新高度

```
if (treeItem.getValue() instanceof FlowPane) {
final FlowPane flowPane = (FlowPane) treeItem.getValue();

                    Task task = new Task<Void>() {

                        @Override
                        public Void call() {
                            int i = 0;
                            while (flowPane.getHeight() == 0.0) {
                                if (++i > 2) {
                                    return null;
                                }

                                try {
                                    Thread.sleep(500);
                                } catch (InterruptedException ex) {
                                }

                            }
                            flowPane.setPrefHeight(flowPane.getHeight() + flowPane.getChildren().size() * 0.95);

                            return null;
                        }
                    };

                    new Thread(task).start(); 
```

但是有一个错误。偶尔 flowPane.getHeight() 返回错误值 - 小于异常值

# php - 如何从循环中获取结果数量

> ID：10233163
> 
> 赞同：-3
> 
> 时间：2012-04-19T17:06:39.973
> 
> 标签：php, loops, foreach

我有一个上传脚本来上传一些文件到一个目录。每个文件都通过一个循环运行，并且将检查大小或结尾是否存在错误。如果没有错误，它将被上传。

```
if (is_array($_FILES ['image'] ['tmp_name'])) {
    foreach ( $_FILES ['image'] ['tmp_name'] as $key => $val ) {
        ...

        if (! in_array ( $fileExt, $allowedExtensions )) {
            $errors [$fileName] [] = "format not accepted";
        }...

            if ((count ( $errors1 ) == 0) && (count ( $errors ) === 0))  {
               if (move_uploaded_file ( $fileTemp, $fileDst )) {
                //...                               
            }
        }   
     }
} 
```

我的问题是，有没有办法计算成功通过该循环的上传文件的数量？多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:10:07.507

您需要计算每次成功的上传。

如下所示：

```
 if (is_array($_FILES ['image'] ['tmp_name'])) {
    $Counter=0;     // initialize counter variable
        foreach ( $_FILES ['image'] ['tmp_name'] as $key => $val ) {

            $fileName = $_FILES ['image'] ['name'] [$key];
            $fileSize = $_FILES ['image'] ['size'] [$key];
            $fileTemp = $_FILES ['image'] ['tmp_name'] [$key];

            $fileExt = pathinfo ( $fileName, PATHINFO_EXTENSION );
            $fileExt = strtolower ( $fileExt );

            if (empty ( $fileName ))
            continue;

            if (! in_array ( $fileExt, $allowedExtensions )) {
                $errors [$fileName] [] = "format not accepted";
            }...

                if ((count ( $errors1 ) == 0) && (count ( $errors ) === 0))  {
                   if (move_uploaded_file ( $fileTemp, $fileDst )) {
                    //...           
                   $Counter++;       // increment if successful upload
                }
            }   
         }
    }

echo $Counter;  //it will give total count of successfully uploaded files 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:11:51.080

只需使用计数器变量。`move_uploaded_file`我了解您在返回 true时已成功上传文件，对吗？

```
$counter = 0;
//... your code
if ((count ( $errors1 ) == 0) && (count ( $errors ) === 0))  {
    if (move_uploaded_file ( $fileTemp, $fileDst )) {
        $counter++;
        //... some other code
    }
} 
```

所以，当你离开`foreach`循环`$counter`时就会有预期的值。

# javascript - Javascript 确认框打开链接

> ID：10233168
> 
> 赞同：0
> 
> 时间：2012-04-19T17:07:11.567
> 
> 标签：javascript, jquery

我有一个`href`如下：

```
<a class="eLink" href="http:www.abc.com">chk here xyz</a></li> 
```

“eLink”的javascript如下：

```
$("a.eLink").click(function link(evt) {
        url = evt.target.href;

        if (url.toString().toLowerCase().indexOf(".gov") <= 0) {

            var tk = "Do you really want to continue?";

            if (confirm(tk)) {
                window.open(url, 'newwin');
            }
        }
        else
        { window.open(url, 'newwin'); }

        return false;
    });
}); 
```

现在，当单击超链接时，我收到消息“您真的要继续吗？”，现在当我单击“是”时，它会打开一个带有目标页面“abc.com”的新浏览器，并且我当前的浏览器也更改为“ abc.com”。我想更改代码，使当前浏览器保持在同一页面中，目标浏览器“abc.com”在新页面中打开，如果单击“否”，浏览器应保持在同一页面中。我尝试在带有确认框的纯 javascript 中使用它们，但问题是无论我必须使用此代码，外部浏览器链接都必须在 javascript 中给出，我想避免这种情况。上面的脚本中是否有一个可以完成我想要的快速更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:11:54.820

使用“_self”来引用当前窗口/选项卡。有关详细信息，请参阅[http://www.w3schools.com/jsref/met_win_open.asp 。](http://www.w3schools.com/jsref/met_win_open.asp)

```
$("a.eLink").click(function link(evt) {
    url = evt.target.href;

    if (url.toString().toLowerCase().indexOf(".gov") <= 0) {

        var tk = "Do you really want to continue?";

        if (confirm(tk)) {
            window.open(url, 'newwin');
        }
    }
    else
    { window.open(url, '_self'); } // open in same tab/page

    return false;
 });
});

// if you click yes, redirect, if no, then do nothing
if (confirm(tk)) {
   window.open(url, 'newwin');
} else {
   return false; // do nothing
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:14:47.613

为我工作[http://jsfiddle.net/8vKvT/](http://jsfiddle.net/8vKvT/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:14:55.277

```
$("a.eLink").click(function link(evt) {
    url = evt.target.href;

    if (url.toString().toLowerCase().indexOf(".gov") <= 0) {

        var tk = "Do you really want to continue?";

        if (confirm(tk)) {
            window.open(url, 'newwin');
        } else {
            window.open(url, '_self');
        }
    }
    else
    {
        window.open(url, 'newwin');
    }

    return false;
}); 
```

# java - 学习面向对象语言背景的java脚本很困难（查看详情）

> ID：10233170
> 
> 赞同：0
> 
> 时间：2012-04-19T17:07:20.893
> 
> 标签：java, javascript, titanium-mobile

**一些背景信息**

大约一年以来，我一直主要从事 Java 开发（Java EE 框架），最近我已经使用面向 android 和 iOS 的 appcelerator Titan 切换到移动应用程序。使用钛金属已经大约三个月了，我们已经发布了我们的第一个版本。（这是一个内部应用程序）

**问题 ？？**

您可能知道，我们在 Titan 中使用 java 脚本编写代码，并将代码包装到相应的目标平台中。现在，我对 java 脚本的经验仅限于编写客户端表单验证 (DOM)。就是这样。所以我决定修复它。
现在我开始按照[this](https://rads.stackoverflow.com/amzn/click/com/0470344725)和[this](https://rads.stackoverflow.com/amzn/click/com/0596805527)学习java脚本。和道格拉斯·克罗克福德的视频讲座。

**问题 ？**
由于java（OOPS？）在我的脑海中非常臃肿，我很难遵循java脚本，我从java的眼中看到的每一件事，（继承，类型安全，异常处理，构造函数，实例，静态，访问修饰符.. ..)
我知道java脚本支持一流的函数和内置的对象可以使用，但是我不能区分这两者，当我看到这样的东西时，我[一](https://github.com/xavierlacot/joli.js/blob/97a99a08f3d0ed4d13df133ab82ba4c2394a9c69/joli.js)开始就不知道。

那么，如何应对这种情况呢？

PS：虽然这可能是相当主观的，但我相信这对于那些难以从 oops 背景学习 JavaScript 的人来说会很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:13:35.610

你问问题的方式，感觉就像你不是在寻找答案，而是在寻找一个拥抱。

就个人而言，我没有发现从 Java 切换到 JavaScript 有任何问题。与任何语言一样，都有一个学习曲线。你在 Java 中学到的一些东西在 JavaScript 中会很有用，而另一些则不会。重要的是要记住 JavaScript 除了名称的一部分与 Java 没有任何关系，所以尽量不要在你的脑海中做出任何类比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:02:00.757

首先，让我说明一点：你觉得 Javascript 是如此陌生和不舒服，这是一件好事（tm）。离开我们的舒适区，我们程序员的成长和学习最多，这就是为什么你会发现无数 SO 的答案认为你应该学习语言 X，即使你从不打算使用它，只是为了成长为一名程序员。因此，尽管您发现此过程令人反感，但它对您有好处，例如菠菜；-)

与学习任何编程语言一样，规则非常简单：

1.  获得良好的基本语言参考。您可以使用无数网站（但请记住，W3Schools == evil/outdated）。正如 Floydian 提到的，有 Crockford 的“The Good Parts”。就我个人而言，我从愚蠢的 10 美元 O'Reilly Javascript 袖珍参考中学到了很多东西。而且我敢肯定还有很多其他很棒的参考资料（我想亚马逊上 4-5 星的任何东西都是值得的）。
2.  处理一个演示项目。根据您选择的书籍/网站，他们可能会为您提供教程活动，但如果不只是自己制作并尝试在学习时完成它
3.  一旦掌握了基础知识，就可以将 jQuery 加入其中；此时它基本上是 Javascript 2.0（同样，有很多很棒的书籍/网站可供选择，包括具有出色文档的 jquery.com）。其他框架也值得学习（例如，Backbone 是一个很棒的 MVC/OOP(kinda) 框架），但一开始我会坚持只使用 jQuery 和 Javascript，直到你熟悉 jQuery
4.  加入那些其他库，或其他工具，如测试框架（QUnit 和 JS 测试驱动程序都是很好的选择）。你现在已经接近 JS Ninja 状态了。
5.  查看更多高级资源（例如，jQuery 的创建者 John Resig 的 Javascript Ninja 之一）。
6.  [浏览https://stackoverflow.com/questions/1069857/advanced-javascript-interview-questions](https://stackoverflow.com/questions/1069857/advanced-javascript-interview-questions)上的答案。你能回答其中的所有问题吗？如果没有，请继续了解有关该主题的更多信息。
7.  终于能够回答该线程中的所有内容？恭喜：你现在可以说（用你最好的 Keanu Reeves 声音）“我知道 JS-Fu！”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:14:00.203

如果您正在观看 Douglas Crockford，我假设您已阅读 JavaScript：The Good Parts [http://amzn.to/JnVgMn](http://amzn.to/JnVgMn)

如果你有，我认为你做对了。

# objective-c - AFNetworking - 为什么异步 XML 操作不触发并且循环无限运行？

> ID：10233173
> 
> 赞同：0
> 
> 时间：2012-04-19T17:07:52.517
> 
> 标签：objective-c, cocoa, objective-c-blocks, nsoperationqueue, afnetworking

这可能与我对块的理解有关，也可能与 NSOperationQueue 如何/何时触发它的操作有关，但无论如何我都会问：

我有一个基本的获取请求方法：

```
- (void)fetchActiveUser:(NSString*)username withPassword:(NSString *)password {

    [self setAuthorizationHeaderWithUsername:username password:password];

    // SETS FLAG that we are performing a request
    fetchModeActive = TRUE;

    [self getPath:kTLActiveUserURI parameters:nil success:^(AFHTTPRequestOperation 
      *operation, id responseObject) {

    if ([responseObject isKindOfClass:[NSXMLParser class]]) {
        TLPersonParser *personParser = [[TLPersonParser alloc] 
          initWithParser:responseObject];

        [personParser setDelegate: self];
        [personParser parsePeople];

        [personParser release];

    }
    // handle stuff here.
    NSLog(@"Success!");
    fetchModeActive = FALSE;
    [[NSNotificationCenter defaultCenter] 
      postNotificationName:kTLFetchedActiveUserNotification object:nil];

    } 
    failure:^(__unused AFHTTPRequestOperation *operation, NSError *error) {
      NSLog(@"Failure.");
      fetchModeActive = FALSE;
      [[NSNotificationCenter defaultCenter] 
        postNotificationName:kTLFetchedActiveUserNotification object:error];
    }];

    while(self.fetchModeActive) {
        // WHY DOES THIS RUN INFINITELY?
        // Both above Success: & Failure: blocks set fetchModeActive = FALSE 
        // when complete
        NSLog(@"fetching....");
    }

} 
```

滚动到最底部，您将看到我的等待循环。为什么这个运行无限输出*“获取......”*？*success:*和*failure:*块都将我们的 fetchModeActive 标志设置回 false ？

我的理解是，这个 fetch 操作在后台异步运行，但看起来甚至没有执行 fetch！

有什么建议么？我需要在单独的线程中触发获取请求吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:16:04.973

要回答您的问题，这不会终止的原因是您`__block`之前需要一个指令`fetchModeActive`，以便块能够更改块范围之外的变量。（您还需要使用`YES`和`NO`作为布尔文字，因为它们是 Objective-C 中的约定）

但是为了解决更大的问题，您不应该这样做。相反，创建一个操作，然后将`-start`其（或者更好）添加到`NSOperationQueue`. 一切都将在后台异步执行，并在完成时触发回调。

异步编程可能很难理解。如果您需要定义依赖于此方法完成的行为，您可能需要向该方法添加一个块参数，并在成功和失败回调中执行该参数。

# regex - Perl one-liner：从数组中删除路径以仅获取路径中的姓氏，如 basename

> ID：10233174
> 
> 赞同：2
> 
> 时间：2012-04-19T17:07:53.873
> 
> 标签：regex, perl

我试图挑战自己获取目录中的 dir 或文件的名称，并将它们放入尽可能少的代码的数组中。我得到了所有的碎片，但不能把它们放在一起

perl 全局：`<path/to/dir/*>`

正则表达式替换：`s/.+\///`

我对我认为它如何工作的蹩脚尝试：

```
my @flist = <path/to/dir/*>
s/.+\/// for @flist; 
```

但我想不会。

来自 perl 大师的一点帮助？

格拉西亚斯！

编辑：我猜上面的代码只需要一个分号。N00b 错误。对不起！虽然它在技术上仍然是两条线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:27:18.807

```
@flist = map basename($_), @flist; 
```

或者

```
$_ = basename($_) for @flist; 
```

* * *

由于行数对您很重要，因此以下是您询问的行和您已有的行的巧妙组合：

```
my @flist =  map basename($_), <path/to/dir/*>; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:15:41.950

您的代码似乎是功能性的，虽然有点粗糙。您可能会考虑使用一个模块来剥离路径，例如[File::Basename](http://search.cpan.org/perldoc?File%3a%3aBasename)（核心模块）。更简单的方法是确保根本不包含路径。

您可以简单地移动到目录并在那里使用 glob。请记住，之后您的工作目录已更改。

```
chdir "/path/to/dir";
my @flist = <*>; 
```

您也可以使用[`opendir`](http://perldoc.perl.org/functions/opendir.html)和[`readdir`](http://perldoc.perl.org/functions/readdir.html)。请注意，这将返回比 更多`glob`的文件，包括隐藏文件。

```
opendir my $dh, "/path/to/dir" or die $!;
my @flist = readdir $dh; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T19:26:32.433

我认为所有必要的是

```
my @flist = map m|([^/]+)$|, <path/to/dir/*>; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T17:27:22.330

如果您想要所有隐藏文件（包括点和点），您可以执行以下操作：

```
chdir /mypath or die "$!\n";
my @list = glob(".* *"); 
```

见[全局](http://perldoc.perl.org/functions/glob.html)

由于您已更改为感兴趣的目录，因此仅报告文件名而不报告路径。要跳过报告 dot 和 dot-dot 文件，但要查看其他隐藏（dot）文件，您可以执行以下操作：

```
for (@list) {
    next if m{^\.\.?$};
    print "$_\n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T18:17:01.120

```
my @flist=glob('/usr/include/*.h');
s/.*\///g for @flist;
print join ("\n",@flist); 
```

# business-rules - 如何将集合从规则传递给 java 方法

> ID：10233177
> 
> 赞同：0
> 
> 时间：2012-04-19T17:08:12.453
> 
> 标签：business-rules, rule-engine, ilog, jrules

我有一组 Type Cars，我需要将它们从 ILOG Jrules 传递到我的 Java 评估方法。我的 Java 求值方法可以接受一个对象，所以可以接受一个集合。我需要在我的 Java XOM 中处理汽车集合，然后将一些输出返回给 ILOG。但是如何从我的 ILOG JRules 创建汽车集合？对于 DVS 测试，我如何通过 DVS Scenario Excel 表中的汽车集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:38:51.767

那里有2个问题...

1/ 为什么不在您的 Java 中键入 JAVA 方法？除非您不能使用 Java 5，否则您应该键入您的集合。

您可以有一个带有集合作为参数的“虚拟方法”（只需在您的 BOM 中添加一个方法，这是有意义的），并在 B2X 中尝试从集合转换为对象。

JRules 没有键入，因为它使用 1.4，所以你也许可以这样做......试试看。

为什么需要将任何 Collection 传递给 Java？注意不要带回 Java 中的业务逻辑 ;-)

2 / DVS ...怎么说...尤其是Collection作为输入和/或输出...这太糟糕了！这是一段让业务用户感到高兴的糟糕代码，因为他们将使用 Excel 来创建测试场景，但是（我的朋友）如果你真的在寻找麻烦，那就去吧。

让我澄清一下：

输入：您可以轻松拥有复杂的对象和集合

输出：这是一个真正的背部疼痛。但是你也可以有一个集合和一个排序的，只要你在 BOM 中有一个比较器。复杂对象...可行，但这需要进行大量调整，并且没有记录。

但是您需要手动完成所有这些（准备 Excel 文件）:(
让我给您销售人员的回答：7.5 将允许您这样做:) 快乐吗？？

现在务实地说，您可以这样做，但样式表中有很多“不可读”的代码，这意味着您的业务用户将无法从头开始使用它们。也许您的一些 IT 团队将无法使用它。太麻烦了。而且您将不得不阻止业务用户修改样式表的代码......

由于这个麻烦，这绝对没有记录，如果你真的想这样做，我可能需要看一个我认为我有的例子，或者你需要在 Ilog IT 团队中有一个密切的联系......对不起.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:35:45.260

澄清铁托对第一个答案的评论：嗯，这取决于你想做什么。没有任何输入，很难说。

是的，您可以轻松地将集合作为 InputParameter 发送。但是，如果您的业务用户想要针对集合中的项目编写规则，则使用 [concept.insert(Object) ish 将所有项目插入工作内存]。（例如，如果你想写“如果项目的代码是..”而不必说：“定义将项目设置为购物车项目中的项目”），并且不要使用任何循环规则流。这是矫枉过正的性能。

如果您愿意，可以向 JRules 发送一个复杂的结构化对象。然后由您来管理如何编写规则和拆分模型（如果需要），使用指向对象的指针，例如作为主对象“shoppingCart”的集合“项目”的规则集参数是否有意义？

# windows-phone-7 - ShakeGestures - .dll 文件丢失

> ID：10233183
> 
> 赞同：3
> 
> 时间：2012-04-19T17:08:39.023
> 
> 标签：windows-phone-7

当我从[MSDN](http://create.msdn.com/en-us/education/catalog/article/Recipe_Shake_Gesture_Library "MSDN")`ShakeGesture`下载-library 时，他们告诉我引用 .DLL 文件。但是当我解压缩文件夹时，我得到的只是源代码和一份关于一切工作原理的冗长文档。现在，我在哪里可以得到这个 .dll 文件？如果有人可以链接到我，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-05T18:47:20.763

在 VS 中打开项目，重新构建或运行应用程序。然后它将在 projectpath\obj\Debug 中生成 dll

# asp.net - 在多个页面上填充标签

> ID：10233184
> 
> 赞同：0
> 
> 时间：2012-04-19T17:08:42.657
> 
> 标签：asp.net, vb.net

我有一个下拉列表，用于填充计算中的一组数据。我的 asp.net 站点中有多个页面，我想在主页上的下拉列表中显示带有当前数据的标签。这是我的代码...

```
''' In the page load'''
Dim Val As Double
    If Date.Now.Month = 10 OrElse Date.Now.Month = 11 OrElse Date.Now.Month = 12 Then
        Val = Date.Now.Year
    Else
        Val = Date.Now.Year - 1
    End If

    For i = Val To 1996 Step -1
        dropdownlist1.Items.Add(i)
    Next
End Sub

'''function in a seperate class'''
Function GetDates(currentYear As Double) As String
    Dim x As String
    Return x
End Function

'''In the selected index event of the drop down (populates years ie. 2011, 2010, 2009)'''
Dim x As String = class1.GetDates(dropdownlist1.Text)

'''In the other pages load events''' 
Dim x As String = class1.GetDates(label1.Text) 
```

上面这行代码是我想用当前年份（即 2011、2010、2009 年）填充的内容有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:27:56.737

我相信您应该考虑使用下拉菜单创建母版页，并基于该母版页创建 9 个页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:21:51.053

在您的主页中，将您选择的年份保存到会话中：

```
Session.Add("myYear", dropdownlist1.SelectedValue) 
```

在其他页面中：

```
Function GetDates(currentYear As Double) As String 
    Dim x As String 
    x = Session("myYear")
    Return x 
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:54:02.243

这似乎非常适合用户控件。您可以将标签显示的功能合并到一个类中。对显示/功能的任何后续更改只需编码一次。此外，通过允许每个页面决定是否显示/显示什么，这种方法将为您提供将来不可避免地需要的灵活性。

通过创建一个类，例如下面的 SettingsManager，您可以从站点的任何位置通过单个点访问 Year 值，而无需知道其存储方式/存储位置的详细信息。

```
public class SettingsManager
{
    public string Year
    {
        get
        {
            if (HttpContext.Current.Session["SettingsManager:Year"] == null)
            {
                //set default value
            }
            return HttpContext.Current.Session["SettingsManager:Year"].ToString();
        }
        set
        {
            HttpContext.Current.Session["SettingsManager:Year"] = value;
        }

    }
} 
```

您的用户控件将有一个简单的标签 ( `lblYear`) 和代码隐藏中的以下代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            this.lblYear.Text = new SettingsManager().Year;
        }
    } 
```

现在，对于要在其中显示的每个页面，只需注册用户控件：

```
<%@ Register Src="~/WebUserControl1.ascx" TagName="YearControlUC" TagPrefix="SO" %> 
```

并在页面的任何位置插入控件的实例：

```
<SO:YearControlUC runat="server" /> 
```

瞧，一个简单、易于维护的解决方案。

编辑：

'''在下拉的选定索引事件中（填充年份，即2011、2010、2009）'''

```
Dim x As String = class1.GetDates(dropdownlist1.Text) 
```

改成

```
New SettingsManager().Year = dropdownlist1.Text 
```

# php - 使用 php 和 python 框架的相同 MySql DB

> ID：10233187
> 
> 赞同：0
> 
> 时间：2012-04-19T17:08:57.973
> 
> 标签：php, python, mysql, django, cakephp

我有一个使用带有 MySql 作为数据库的 Cakephp 完成的 Web 应用程序。webapp 还公开了一组 Web 服务，用于获取和更新 MySQL 数据库中的数据。我想扩展应用程序以提供一组新的 Web 服务，但想使用基于 python 的框架，如 web2py/django 等。由于两者都将在同一个数据库中工作，会导致任何问题吗？我想这样做的原因是因为最初的应用程序/Web 服务是由其他人完成的，现在我想扩展它，并且使用 python/web2py 和 php/cakephp 更舒服。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:12:14.130

Django 有一些工具可以让这更容易：[https ://docs.djangoproject.com/en/dev/howto/legacy-databases/?from=olddocs](https://docs.djangoproject.com/en/dev/howto/legacy-databases/?from=olddocs)

只要您完全了解现有模式以及旧应用程序正在使用它做什么，就应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:12:16.363

这是使用 RDBMS 为不同用户和应用程序提供对相同数据的访问的原因之一。这绝对没有问题。

# javascript - 打印所有变量？

> ID：10233195
> 
> 赞同：4
> 
> 时间：2012-04-19T17:09:36.970
> 
> 标签：javascript

我想做一个可以在调试中大量使用的函数，它可以打印所有变量及其值。它会提醒：
x=3
y=2

该功能将是这样的：
**示例：**

```
var text='';
for(var a=0;a<allVariables;a++)
{
    text+=nameOfVariable + " = " + valueOfVariable + "/n";
}
alert(text); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T17:24:49.233

这可能会做你正在寻找的东西：

```
console.dir(window); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:12:15.153

您应该使用控制台方法，它最适合调试。相当多的现代浏览器都有控制台，您可以使用更好的调试工具，例如 firebug for firefox。然后一个简单的`console.log(allVariables)`，它都显示在控制台中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:19:58.080

如果您使用任何全局变量，可能很难确定“所有变量”是什么。默认情况下，全局变量都在`window`范围内。因此，您可以遍历 中的所有值`window`，但这也会为您提供*其他*所有值。

如果将所有内容都放在命名空间中，则可以更明确地说明它。

```
var MyVariables = {
};

MyVariables.foo = 1;
MyVaraibles.hello = 'world';

for(var name in MyVariables){
    console.log(name, MyVariables[name]);
} 
```

还可以查看浏览器上可用的开发工具。我个人会推荐 Chrome 开发工具（内置，F12）或 FireFox 中的 FireBug。IE 也有一些内置插件。

# android - setSpeakerphoneOn() 不能在 2.1 上工作，在 2.3 上工作

> ID：10233201
> 
> 赞同：0
> 
> 时间：2012-04-19T17:09:56.727
> 
> 标签：android, audio, android-audiomanager, audiotrack, speakerphone

我需要通过听筒播放一些音频。我正在使用 AudioTrack 在设备上播放一些声音。并且音频模式设置为 STREAM_VOICE_CALL。此外，在我的活动中，扬声器通过以下方式关闭：

```
AudioManager am;            
am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
am.setSpeakerphoneOn(false); 
```

这似乎在 2.3 设备上完美运行。但是在 2.1 上，声音仍然从扬声器播放。

作为对此的修复，我尝试使用 setMode() 作为：

```
am.setMode(AudioManager.MODE_IN_CALL); 
```

有了这个，声音通过听筒播放 2.1 和 2.3，但大多数时候 2.3 根本不播放。另外，我在某些地方读到 setMode() 不应该被应用程序使用，因为它会影响系统范围的电话状态。这里：[http ://code.google.com/p/sipdroid/issues/detail?id=270](http://code.google.com/p/sipdroid/issues/detail?id=270)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:28:16.300

在 2.3 以下，Android 的`setSpeakerPhoneOn()`. 根据[这个答案](https://stackoverflow.com/a/4663831/342745)，我认为您需要同时使用这两种 API 方法。

关于根本不播放 2.3 音频，请检查您的通话音量设置（将使用该设置）。尝试跟踪手机在使用前的状态，也许在音频管理器不再使用时`setMode()`将其设置回。`MODE_NORMAL`

# javascript - javascript匹配替换文本

> ID：10233204
> 
> 赞同：0
> 
> 时间：2012-04-19T17:10:17.173
> 
> 标签：javascript, jquery, function, replace, match

快速提问，我想将一些降价 HTML 内容从双星号转换为粗体。

我得到的错误是：`Uncaught TypeError: Cannot call method 'replace' of null '

这是jsfiddle：http: [//jsfiddle.net/fz5ZT/9/](http://jsfiddle.net/fz5ZT/9/)

这是HTML：

```
<div class="comments">comment 1** is good**</div>
<div class="comments">comment 2**is bad**</div> 
```

这是JS：

```
function markdown(markdownable){

  var boldMatch = markdownable.match(/\*\*[A-Za-z0-9]+\*\*/gim), 
  boldReplace = boldMatch.replace(/\*\*[A-z0-9]+\*\*/gim, '<span style="font-  weight:bold;color:blue;">'+boldMatch+'</span>'),                   
  markdownable = markdownable.replace(boldMatch, boldReplace),    
  markdownable = markdownable.replace(/\*\*/gi, "");

  return markdownable;
}

$('.comments').each(function(){  
   var markdownable=$(this).html(), comments=markdown(markdownable);
}); 
```

如果您能提供帮助，我将不胜感激，

谢谢，蒂姆

**更新**谢谢大家！请看这个工作演示：http: [//jsfiddle.net/fz5ZT/30/](http://jsfiddle.net/fz5ZT/30/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:19:50.577

```
markdownable = markdownable.replace( /\*\*(.+?)\*\*/gm, '<strong>$1</strong>' ); 
```

然而，与其进行一次三心二意、善意的、注定要失败的重新发明轮子的尝试，为什么不直接[使用现有的 JavaScript Markdown 库](https://github.com/evilstreak/markdown-js)呢？

**编辑**：这是一个更强大的正则表达式（如 Markdown）要求在“打开”之后或“关闭”之前没有空格：

```
var bold = /\*\*(\S(.*?\S)?)\*\*/gm;
markdownable = markdownable.replace( bold, '<strong>$1</strong>' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:16:44.900

您的第一个正则表达式匹配忽略字符串中的空格。您需要在允许的字符集中添加一个空格，`[ a-z0-9]`；你不需要 the`A-Z`因为`i`.

此外，`match`返回一个数组，因此您需要获取第一个匹配项，`boldMatch[0]`以便访问返回的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:19:01.743

您不想在 boldMatch 上调用 .replace() ，直到您知道其中有一个值可以使用，也就是说，如果没有匹配项。

更安全的计算：

```
var boldMatch = markdownable.match(/\*\*[A-Za-z0-9]+\*\*/gim);
if (boldMatch) { 
  var boldReplace = boldMatch.replace(/\*\*[A-z0-9]+\*\*/gim, '<span style="font- weight:bold;color:blue;">'+boldMatch+'</span>');
} 
```

等等

**更新：**

这行代码也使追踪发生的事情变得困难：

```
var markdownable=$(this).html(), comments=markdown(markdownable); 
```

通常不赞成用 var 在一行上声明两个变量。更好的：

```
var markdownable=$(this).html();
if (markdownable) {
    comments=markdown(markdownable);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T17:22:01.810

也许你可以看看以下解决方案：

[使用jQuery查找文本字符串？](https://stackoverflow.com/questions/926580/find-text-string-using-jquery)

我相信你需要做一些非常相似的事情：

```
 $('*:contains("I am a simple string")').each(function(){
 if($(this).children().length < 1) 
      $(this).html( 
           $(this).text().replace(
                /"I am a simple string"/
                ,'<span containsStringImLookingFor="true">"I am a simple string"   </span>' 
           )  
       ) 
}); 
```

为了使元素变为粗体，您需要在替换发生后使用 addClass() 。

谢谢

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T17:24:41.347

```
function markdown(markdownable) {

    var boldMatch = markdownable.match(/[\*]{2}( .+)?[\*]{2}/gim);
    if (boldMatch && (boldMatch = boldMatch[0])) {
        var boldReplace = boldMatch.replace(/[\*]{2}( .+)+?[\*]{2}/gim, '<span style="font-weight:bold;color:blue;">' + boldMatch + '</span>');
        markdownable = markdownable.replace(boldMatch, boldReplace);
        markdownable = markdownable.replace(/\*\*/gi, "");
    }
    return markdownable;
}

$('.comments').each(function() {

    var markdownable = $(this).html(),
        comments = markdown(markdownable);

    console.log(comments);
});​ 
```

到目前为止，这不是最好的解决方案……但它是您尝试的“修复”。希望你能学到一些关于你出错的地方。

# c# - WPF - 组样式：我们只能绑定到“名称”属性吗？

> ID：10233205
> 
> 赞同：8
> 
> 时间：2012-04-19T17:10:22.050
> 
> 标签：c#, .net, wpf, .net-4.0

我正在尝试创建一个 ItemsControl，它负责显示按元数据排序的各种项目。每个项目可以有多个元数据。例如，“对话”类型的项目可能具有“章节”、“行为”和“卷”元数据。

在搜索 WPF 中分组的工作方式后，我发现了 GroupStyles 和 PropertyGroupDescription 类。

我创建了自己的类，它继承自 PropertyGroupDescription 并返回“元数据”类型的对象。

无论如何，在我的 ItemsControl 的 GroupStyle DataTemplate 中，我可以绑定到返回的对象（即：“元数据”对象），然后按我的意愿显示它的属性吗？还是我被迫绑定到“名称”？

换句话说：

```
<ItemsControl.GroupStyle>
    <GroupStyle>
        <GroupStyle.HeaderTemplate>
            <DataTemplate>
                  Am I forced to bind to "Name" here ?
            </DataTemplate>
        </GroupStyle.HeaderTemplate>
    </GroupStyle>
</ItemsControl.GroupStyle> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T19:49:00.160

默认情况下`DataContext`，`GroupStyle`您可以绑定到此[CollectionViewGroup Properties](http://msdn.microsoft.com/en-us/library/ms613524.aspx)。[`BindingSource`](http://msdn.microsoft.com/en-us/library/ms752347.aspx#specifying_the_binding_source)但是，当然，如果需要，您可以设置任何其他值。

如果您想要组中的第一个对象，请使用：

```
<TextBlock Text="{Binding Path=Items[0].YourStringProperty}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:56:05.490

默认情况下，当绑定到自定义对象时，它会尝试使用其 ToString() 方法显示，而不是 Name（好吧，默认情况下 ToString() 正在打印名称）。您可以尝试覆盖 ToString() 方法来打印其他内容，您会明白我的意思。

但当然，您可以定义自己的 DataTemplate 并绑定到不同的属性。

```
<DataTemplate>
<TextBlock Text="{Binding XXXXX}"/>
</DataTemplate> 
```

# c# - 为什么我的程序没有连接到数据库？

> ID：10233206
> 
> 赞同：0
> 
> 时间：2012-04-19T17:10:31.890
> 
> 标签：c#, database, sqlcommand

我正在创建一个数据库，以便可以存储用户名和密码。我已经在 Microsft Visual Express C# 2010 上成功创建了一个数据库。

我的程序似乎运行良好，并且没有产生错误消息，除了我没有收到任何反馈：看起来我的程序实际上并没有向数据库发出请求，或者没有返回结果。这是怎么回事？

```
 private void button1_Click(object sender, EventArgs e)
    {
        string connection = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database1.mdf;Integrated Security=True;User Instance=True";
        SqlConnection cn = new SqlConnection(connection);
        try
        {
            cn.Open();
        }
        catch (Exception)
        {
            MessageBox.Show("Did not connect");
        }
        string username = textBox1.Text;
        string password = maskedTextBox1.Text;
        string sqlquery = ("SELECT * FROM User WHERE Username = '" + textBox1.Text + "'");
        sqlquery = "INSERT INFO [User] (Username, Password) VALUES ('" + textBox1.Text + "','" + maskedTextBox1.Text + "')";
        SqlCommand Command = new SqlCommand(sqlquery, cn);
        Command.Parameters.AddWithValue("Username", username);
        Command.Parameters.AddWithValue("Password", password);
    }
    private void Form1_load(object sender, EventArgs e)
    {
        string connection = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database1.mdf;Integrated Security=True;User Instance=True";
        SqlConnection cn = new SqlConnection(connection);
        try
        {
            cn.Open();
        }
        catch (Exception)
        {
            MessageBox.Show("Did not connect");
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:17:59.797

您实际上并没有执行`SqlCommand`，因此您不会“看到”任何事情发生似乎是合乎逻辑的。尝试将以下行添加到末尾`button1_Click`：

```
Command.ExecuteNonQuery(); // actually execute the INSERT INFO... query 
```

您的 SQL 代码存在一些问题，但是一旦执行该命令，您就会收到异常。

# c# - 如何从文件中提取特定数据？

> ID：10233209
> 
> 赞同：4
> 
> 时间：2012-04-19T17:10:46.570
> 
> 标签：c#

我有一个文件，里面有温度数据。我需要从中提取温度并将结果仅保存在一个新文件中。

这是文件的内容：

```
BCAST:000D6F00017620E9, 02=34.23
BCAST:000D6F00017620E9, 02=12.3
BCAST:000D6F00017620E9, 02=54.01
BCAST:000D6F00017620E9, 02=12.34
BCAST:000D6F00017620E9, 02=16.22 
```

需要在每个 = 即 34.23,12.3,54.01 等之后提取数据

我尝试过使用子字符串，但是当我将文件作为字符串读取时可以使用它，它只是生成第一行的子字符串，其余部分保持不变。以下是我的代码。请建议！

```
string temp2 = System.IO.File.ReadAllText(@"C:********\temperature.txt");
int c = temp2.IndexOf("=");
string temp3 = temp2.Substring(c + 1);
System.IO.File.WriteAllText(@"C:\*******\temperature2.txt",temp3); 
```

此代码的输出是：

```
34.23
BCAST:000D6F00017620E9, 02=12
BCAST:000D6F00017620E9, 02=54
BCAST:000D6F00017620E9, 02=12
BCAST:000D6F00017620E9, 02=16 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:13:31.173

`ReadAllText`将整个文件作为一个字符串返回。在行数组上循环并在每一行上使用您的子字符串代码会更有意义。

**编辑**ReadAllLines 是一个静态调用：

```
string[] lines = System.IO.File.ReadAllLines(fileName); 
```

或者，使用流一次读取一行：

```
var sr = new StreamReader(fileStream);
while (!sr.EndOfStream)
{
  var line = sr.ReadLine();
  // .. per line sub string
} 
```

**编辑 2**我制定了一个完整的解决方案（请注意，我更喜欢流式阅读而不是全读样式 - 它对于非常大的文件更有效 - 所以这是一个习惯的好习惯）

```
var sb = new StringBuilder();

using (var file = new FileStream("C:/tmp/temps.txt", FileMode.Open, FileAccess.Read))
{
  var sr = new StreamReader(file);

  while (!sr.EndOfStream)
  {
    var nextLine = sr.ReadLine();
    int indexOfEqualSign = nextLine.IndexOf("=");

    if (indexOfEqualSign == -1 || indexOfEqualSign == nextLine.Length)
      continue;

    string rightHandSide = nextLine.Substring(indexOfEqualSign + 1);
    sb.AppendLine(rightHandSide);
  }
}

File.WriteAllText("C:/tmp/temps2.txt", sb.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:16:17.623

您在正确的轨道上，但是您需要遍历文件中的行，然后在 = 上进行拆分：

```
string[] lines = File.ReadAllLines(@"C:\********\temperature.txt"); 
StringBuilder temperatures = new StringBuilder();

foreach (string line in lines)
{
    string[] parts = line.Split('=');

    if (lines.Length > 1)
    {
        tempatures.Append(lines[1]));
        tempatures.Append("\n");
    }
}

File.WriteAllText(@"C:\*******\temperature2.txt", tempatures.ToString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:18:39.433

一次读每一行，在等号上分开。请务必包括：StreamReader 的 System.IO

```
try
{
    // Create an instance of StreamReader to read from a file.
    // The using statement also closes the StreamReader.
    using (StreamReader sr = new StreamReader(@"C:********\temperature.txt"))
    {
        String line;
        // Read and display lines from the file until the end of
        // the file is reached.
        while ((line = sr.ReadLine()) != null)
        {
            try
            {
                Console.WriteLine(line.Split('=')[1]);
            } 
            catch
            {
                Console.WriteLine("Contained No equals sign: " + line);
            }
        }
    }
}
catch (Exception e)
{
    // Let the user know what went wrong.
    Console.WriteLine("The file could not be read:");
    Console.WriteLine(e.Message);
} 
```

来源：http: [//msdn.microsoft.com/en-us/library/db5x7c0d.aspx](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T17:27:12.417

```
string readFile =  @"C:\****\temperature.txt");
string writeFile = @"C:\****\temperature2.txt");
List<string> lines = new List<string>lines;
....
string sr = new StreamReader(readFile);
foreach (string line in sr.ReadAllLines())
{
   int c = line.IndexOf("=");
   if ( c >= 0 ) {
      lines.Add(line.SubString(c+1);
   }
}

if ( lines.Count > 0 ) {
  System.IO.File.WriteAllText(writeFile, 
     string.Join(Environment.NewLine, lines.ToArray*());
} 
```

# java - 空分隔符上的Java拆分字符串在开头返回空字符串？

> ID：10233210
> 
> 赞同：2
> 
> 时间：2012-04-19T17:10:49.117
> 
> 标签：java

我想将字符串拆分为单个字符。所以我这样做：

```
"abcd".split(""); 
```

但这会产生：

```
["", "a", "b", "c", "d"] 
```

第一个空字符串不是我在其他语言（例如Ruby）中执行相同操作时所习惯的。其背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T17:40:44.843

你为什么用`String.split()`这个？使用`String.toCharArray()`.

我知道一个会给你一个字符串数组，而另一个会给你一个字符数组。由于您需要单独使用每个字符，因此我假设这对您的代码无关紧要。

# bash - Bash 变量替换失败。我需要启用开关吗？

> ID：10233211
> 
> 赞同：0
> 
> 时间：2012-04-19T17:10:49.753
> 
> 标签：bash

以下 Bash 脚本失败：

```
DATA=fred
echo ${DATA:1:1} 
```

我希望它打印“r”，但我得到的只是“错误替换”错误。

我需要使用某种开关来启用变量扩展语法吗？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:14:01.980

不，但您必须确保它是由 bash 而不是其他 shell 运行的。

```
bash script.sh 
```

...

```
#!/bin/bash
 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:33:21.667

这不是一个很好的解决方案，但解决方法是：

```
TEST=`echo "${DATA}" | sed -r 's|^.(.).*$|\1|'` 
```

感谢伊格纳西奥的建议

# java - 使用 Callables 实现斐波那契时静默长溢出

> ID：10233214
> 
> 赞同：2
> 
> 时间：2012-04-19T17:11:12.887
> 
> 标签：java, long-integer, fibonacci, integer-overflow, callable

我正在尝试使用可调用对象来实现斐波那契数列，并使用 3、4、5、6 和 2000 播种我的斐波那契可调用对象的初始值。我得到的输出如下：

> 3 5 8 13 -820905900187520670

问题是当我试图在我的可调用对象中计算 fib(2000) 时。有人可以看看我下面提供的代码，看看我的方法哪里出错了：

```
import java.util.concurrent.*;
import java.util.*;

class FibonacciGen implements Callable<Long>{
    private Long fib;
    public FibonacciGen(long num){
        this.fib = num;
    }
    public Long call(){
        return calculateFibonacci(fib);
    }

    private long calculateFibonacci(long someNum){
        long firstNum = 0L;
        long secondNum = 1L;
        long counter = 0L;
        while(counter<someNum){
            long fibCalc = secondNum+firstNum;
            firstNum = secondNum;
            secondNum = fibCalc;
            counter= counter+1L;
        }
        return secondNum;
    }   

}

public class FibonacciCallable{
    public static void main(String[] args){
        ExecutorService exec = Executors.newCachedThreadPool();
        ArrayList<Callable<Long>> results = new ArrayList<Callable<Long>>();
        CompletionService<Long> ecs = new ExecutorCompletionService<Long>(exec);
        results.add(new FibonacciGen(3L));
        results.add(new FibonacciGen(4L));
        results.add(new FibonacciGen(5L));
        results.add(new FibonacciGen(6L));
        results.add(new FibonacciGen(2000L));
            try{
                for(Callable<Long> fs:results){
                    ecs.submit(fs);
                }
                System.out.println("Submitted all the tasks");
                int n = results.size();
                for(int i=0;i<n;++i){
                    System.out.println("Taking the first completed task");
                    Long r = ecs.take().get();
                    if(r != null)
                        System.out.println(r);
                    }   

            }
            catch(InterruptedException ex){System.out.println(ex);return;}
            catch(ExecutionException e){System.out.println(e);}
            finally{exec.shutdown();}
        }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:19:07.250

Java 不会在溢出时抛出异常，只是将值包装起来，这就是为什么你会得到奇怪的结果。斐波那契是一个快速增长的序列，2000 年。元素远远超出`long`

尝试使用`BigInteger`，它将为您提供任意精度（显然以性能为代价）。

# javascript - Jasmine 中的错误期望

> ID：10233217
> 
> 赞同：10
> 
> 时间：2012-04-19T17:11:26.333
> 
> 标签：javascript, testing, jasmine

我有以下有效的功能

```
function sum ()
{
    var total = 0,
        num = 0,
        numArgs = arguments.length;

    if (numArgs === 0) {
        throw new Error("Arguments Expected");
    }

    for(var c = 0; c < numArgs; c += 1) {
        num = arguments[c];
        if (typeof(num) !== "number") {
            throw new Error("Only number are allowed but found", typeof (num));
        }
        total += num;

    }

    return total;

}

sum(2, "str"); // Error: Only number are allowed but found "string" 
```

茉莉花规格文件如下：

```
describe("First test; example specification", function () {
    it("should be able to add 1 + 2", function (){
        var add = sum(1, 2);
        expect(add).toEqual(3);
    });
    it("Second Test; should be able to catch the excption 1 +'s'", function (){
        var add = sum(1, "asd");
        expect(add).toThrow(new Error("Only number are allowed but found", typeof("asd")));
    });
}); 
```

第一个测试效果很好，第二个测试失败了。
我应该如何处理中的预期错误`Jasmine`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T17:17:35.503

正如[这个问题](https://stackoverflow.com/questions/4144686/how-to-write-a-test-which-expects-an-error-to-be-thrown)中所讨论的，您的代码不起作用，因为您应该传递一个函数对象来期望，而不是调用 fn() 的结果

```
 it("should be able to catch the excption 1 +'s'", function (){
//        var add = sum(1, "asd");
        expect(function () {
            sum(1, "asd");
        }).toThrow(new Error("Only number are allowed but found", typeof ("asd")));
    }); 
```

# scala - Scala - 中缀与点符号

> ID：10233227
> 
> 赞同：41
> 
> 时间：2012-04-19T17:12:10.727
> 
> 标签：scala, methods, call, infix-notation

是否有一个最佳实践？我一直在阅读Odersky 等人*的Scala 书。*似乎中缀用于许多集合 API 函数，而 dot 保留用于程序员定义的函数。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-25T10:06:01.100

我个人对此没有任何硬性规定，但我倾向于仅对符号方法名称使用中缀表示法，对字母数字方法名称使用点表示法。

中缀表示法使得以后修改代码很麻烦。这里有些例子。

想象一下你有这行代码：

```
xs filter { f } map { g } 
```

假设在稍后的某个时间点您需要`toList`在末尾添加一个。你这样说：

```
xs filter { f } map { g } toList 
```

这可能会导致分号推断问题。为避免这些问题，您可以在末尾添加分号，或者换行。在我看来，这两种选择都很丑陋。为了避免所有这些废话，我更喜欢使用`xs.filter(f).map(g)`. 使用这种语法重构总是更容易。

另一个例子：假设我的代码中有以下内容：

```
if(foo contains bar) { .. 
```

说，我需要否定条件。如果我修改如下：

```
if(!foo contains bar) { .. 
```

真可惜。这被解析为`(!foo).contains(bar)`. 不是我们想要的。

或者假设您需要另外添加一个新条件，并且您将其修改为：

```
if(foo contains bar && cond) { .. 
```

另一个无赖。这被解析为`foo.contains(bar.&&(cond))`. 又不是我们想要的。

当然，您可以在周围添加一堆括号，但与点符号相比，这将是丑陋且难以阅读/编辑的。

现在，我上面所说的所有内容也适用于符号方法名称。然而，符号方法在与点语法一起使用时看起来不自然，因此我更喜欢它们的中缀语法。

* * *

上述指南的一个例外：内部 DSL。它们通常精心制作，以免在以文档/示例中规定的方式（通常使用中缀表示法）编写时导致解析问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-19T17:14:14.177

这是个人喜好的问题。您决定使用一种风格或另一种风格应该基于使您的代码最易读的因素。

但请注意，省略点和括号的能力仅限于某些句法结构，因此有时您只需要退回使用它们即可。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-03T08:34:11.963

Scala 官方站点文档中有一个很好的[样式指南](http://docs.scala-lang.org/style/method-invocation.html)，描述了正确使用中缀符号而不是点符号。

后缀符号：

```
names.toList
// is the same as
names toList // Unsafe, don't use! 
```

Arity-1：

```
// right!
names foreach (n => println(n))
names mkString ","
optStr getOrElse "<empty>"
// wrong!
javaList add item 
```

高阶函数：

```
// wrong!
names.map (_.toUpperCase).filter (_.length > 5)
// right!
names map (_.toUpperCase) filter (_.length > 5) 
```

符号方法/运算符：

```
// right!
"daniel" + " " + "Spiewak"
// wrong!
"daniel"+" "+"spiewak" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-04T19:57:50.740

我发现`map`当我使用**cats**库创建笛卡尔坐标时，使用中缀表示法效果很好。例如：

```
(fetchIt(1) |@| fetchIt(2) |@| fetchIt(3)).map(MyCaseClass) 
```

您可以像这样摆脱周围的括号：

```
fetchIt(1) |@| fetchIt(2) |@| fetchIf(3) map MyCaseClass 
```

在我看来，第二个变体读起来更好。我想是口味问题。只是想增加我两美分的价值。

以上工作，因为`|`在“|@|” 优先级高于`m`“地图”。阅读 Scala 语言规范的这一部分以了解更多详细信息：

> 如果表达式中有多个中缀操作，则具有较高优先级的运算符比具有较低优先级的运算符绑定得更紧密。

[http://scala-lang.org/files/archive/spec/2.12/06-expressions.html#infix-operations](http://scala-lang.org/files/archive/spec/2.12/06-expressions.html#infix-operations)

# linux - 如何在linux中执行自定义复制命令？

> ID：10233234
> 
> 赞同：1
> 
> 时间：2012-04-19T17:12:28.443
> 
> 标签：linux, command-line, copy, putty, cp

我必须将一些文件从一个目录移动到另一个目录，但这有点棘手。

这是我的文件夹结构

```
/var/www/media_test1/media001/001_pm_001.jpg
                              th001_pm_001.jpg

/var/www/media_test1/media002/002_pm_001.jpg
                              th002_pm_001.jpg

/var/www/media_test1/media003/003_pm_001.jpg
                              th003_pm_001.jpg

/var/www/media_test1/media004/004_pm_001.jpg
                              th004_pm_001.jpg 
```

我基本上想将每个文件夹中没有的图片移动`th`到另一个目录中，如下所示：

```
/var/www/media_test2/media001/001_pm_001.jpg
/var/www/media_test2/media002/002_pm_001.jpg
/var/www/media_test2/media003/003_pm_001.jpg
/var/www/media_test2/media004/004_pm_001.jpg 
```

我在想的是创建一个我想移动的图像列表，方法是使用 s`ls`命令列出所有图片+它们没有的路径`th`->将其导出到文件->构建`cp`如下命令：

```
cp /var/www/media_test1/media001/001_pm_001.jpg /var/www/media_test2/media001/001_pm_001.jpg
cp /var/www/media_test1/media002/002_pm_001.jpg /var/www/media_test2/media001/002_pm_002.jpg
... 
```

然后执行命令。

问题是我不知道如何编写这些命令。

有没有更好的方法来做到这一点？关于我可以使用哪些命令的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:21:48.497

您可以使用 find 命令来执行此操作。确保目标目录存在，然后运行：

```
find /var/www/media_test1/media001/ -type f -not -name "th*" -exec cp {} /var/www/media_test2/media001/ \; 
```

这将找到所有不以“th”开头的文件并将它们复制到/var/www/media_test2/media001/。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:28:39.253

[`mmv`](http://fclose.com/p/linux/man/1-mmv/)如果您不需要它太灵活，您可以使用它：

```
mmv '/var/www/media_test1/media???/???_pm_*.jpg' '/var/www/media_test2/media#1#2#3/#4#5#6_pm_#7.jpg' 
```

但是，这不会创建目标文件夹；你必须先这样做。

如果您需要它更灵活，或者为您创建目标文件夹，最好编写一个脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:01:39.047

我在`mv`这里使用了命令。因为您一开始说“我必须移动一些文件”...但您可以将其更改为`cp`...两者的结构相同...表达式`|e`末尾的`sed`会导致 sed 生成的脚本自动执行。你实际上并没有看到脚本，所以我在这篇文章的末尾添加了它）...`mkdir -p`将检查目录是否已经存在，如果不存在，那么它会成功。如果`mkdir`失败，则不会执行下一个命令。

```
# use `find' to get the main list of files.. 
# use `sed' to filter when both 'NNN's match in: /mediaNNN/NNN...
# `sed' also build and executes the *move* script

basepath1=/var/www/media_test1/
basepath2=/var/www/media_test2/

find $basepath1/media[0-9][0-9][0-9] \
      -type f -name '[0-9][0-9][0-9]*.jpg' |
sed -nr "
s|$basepath1(/media([0-9]{3})/)\2.*|\
mkdir -p \"$basepath2\1\" \&\&\n\
   mv -n \"&\" \\\\\n\
         \"$basepath2\1\"|e" 
```

这是生成的脚本

```
mkdir -p "/var/www/media_test2/media001/" &&
   mv -n "/var/www/media_test1/media001/001_pm_001.jpg" \
         "/var/www/media_test2/media001/"
mkdir -p "/var/www/media_test2/media002/" &&
   mv -n "/var/www/media_test1/media002/002_pm_001.jpg" \
         "/var/www/media_test2/media002/"
mkdir -p "/var/www/media_test2/media003/" &&
   mv -n "/var/www/media_test1/media003/003_pm_001.jpg" \
         "/var/www/media_test2/media003/"
mkdir -p "/var/www/media_test2/media004/" &&
   mv -n "/var/www/media_test1/media004/004_pm_001.jpg" \
         "/var/www/media_test2/media004/" 
```

# java - 如何在 Java 中将 (int)5 转换为 (byte)0x05？

> ID：10233236
> 
> 赞同：1
> 
> 时间：2012-04-19T17:12:29.853
> 
> 标签：java, hex, byte

我试过：

```
int amount = 5;
String amountStr = "0x0" + amount;
byte newByte = Byte.parsByte(amountStr); 
```

但我明白了`java.lang.NumberFormatException: For input string: "0x05"`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:14:57.827

如果要解析字符串，请使用[`Byte#decode`](http://docs.oracle.com/javase/6/docs/api/java/lang/Byte.html#decode%28java.lang.String%29)：

```
byte newByte = Byte.decode(amountStr); 
```

否则，您可以直接转换它（如评论中所述）。

# c - 如何在 linux C 中获得接口的最大带宽？

> ID：10233239
> 
> 赞同：6
> 
> 时间：2012-04-19T17:12:33.877
> 
> 标签：c, linux, network-programming, kernel-module

假设我有一台带有 3 个 NIC 的机器；wifi、eth 和 3G。我试图获得链路可以在给定时间为每个接口传输的*估计*速度（或带宽），并确定哪个接口最快。在给定的时间再次。我正在编写一个 linux 内核模块。我正在使用内核版本 2.6.35。有没有办法测量可用带宽？即使这意味着发送一个测试 ping 来测量我们在测量延迟时所做的事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:22:11.357

iperf 可以帮助您测量实际带宽 [http://sourceforge.net/projects/iperf/](http://sourceforge.net/projects/iperf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:22:22.430

实际上，这是一个难题。如果您知道所有三个 NIC 都连接到一个公共站点，那么显而易见的直接测试是通过每个 NIC 传输一些数据并为它们计时。

但是，考虑到一般问题的难度，通过每个 NIC 广播 UDP 并计时可能“足够好”。这无法揭示任何接收性能，但总比没有好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:41:11.873

在 Linux 上，您应该阅读 /proc/net/dev （您已发送的总包/字节数。在您的“开始”和“结束”时间获取这些数字）

[http://linuxdevcenter.com/pub/a/linux/2000/11/16/LinuxAdmin.html](http://linuxdevcenter.com/pub/a/linux/2000/11/16/LinuxAdmin.html) [http://www.linuxjournal.com/article/8381](http://www.linuxjournal.com/article/8381)

（来源：[How can I get the current network interface throughput statistics on Linux/UNIX?](https://stackoverflow.com/questions/596590/how-can-i-get-the-current-network-interface-throughput-statistics-on-linux-unix)）

# ldap - 如何在 liferay 6.1 中为 LDAPAuth 类创建钩子

> ID：10233242
> 
> 赞同：3
> 
> 时间：2012-04-19T17:12:39.563
> 
> 标签：ldap, hook, liferay-6

我正在尝试在 lliferay 6.1 中挂钩 LDAPAuth 类以覆盖 authenticateByEmailAddress 以从我这边添加一些逻辑。我不知道如何在 liferay-hook.xml 中定义它

```
<hook>
  <portal-properties>portal.properties</portal-properties>
  <custom-jsp-dir>/jsp_overrides</custom-jsp-dir>
  <service>
    <service-type>com. </service-type>
    <service-impl></service-impl>
  </service>
</hook> 
```

service-type 和 service-imp 中应该提供什么。我的班级名称是 MyLDAPAuth，它从 liferay 扩展了 LDAPauth

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:18:23.223

我不认为你可以创建一个钩子来覆盖这个类，因为这个类驻留在portal-impl.jar中，不能从插件portlet或钩子中引用（这就是它的[原因](http://issues.liferay.com/browse/LPS-4157)，你也可以阅读这个[论坛](http://www.liferay.com/community/forums/-/message_boards/message/1091443)有关我们为什么不能并且我们不应该在插件中使用 portal-impl.jar 的更多信息）。

所以剩下的唯一选择是EXT。

此外，如果您在 EXT 中创建自定义类，则需要在带有属性的 portal-ext.properties 中指定它（阅读 portal.properties 中此属性的注释）：

```
auth.pipeline.pre=com.custom.portal.security.auth.MyLDAPAuth 
```

我没有尝试过，但我认为不可能在插件 portlet 或挂钩中创建自定义类并更改此属性。

希望这能回答你的问题，或者至少给你一个更进一步的想法。

谢谢

# android - 创建一个只有 ProgressDialog 的 Android Activity

> ID：10233250
> 
> 赞同：0
> 
> 时间：2012-04-19T17:13:17.023
> 
> 标签：android, android-activity, progressdialog

我有一个在 TimerTask 上运行 AsyncTask 的 Activity。在运行任务时，我会显示一个 ProgressDialog，并在完成时触发打开另一个 Activity 的意图。

我只想在发生这种情况时显示 ProgressDialog，但如果我省略 setContentView，我的应用程序仍会为 Activity 创建一个小窗口显示。是否可以只显示 ProgressDialog？

我可以将此 Activity 中的代码放入调用它的父 Activity 中，但我希望能够重用此代码，并在需要时从其他 Activity 调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:21:46.877

我认为创建一个仅用于显示对话框的 Activity 并不是最好的方法。对话框视图通常不显示在当前活动之上。如果一个 Activity 只包含一个对话框而没有其他内容，那么它只是一个漂浮在空白黑色背景上的对话框窗口，这不是最好的设计理念。

如果您想要一个可重用的对话框，我建议您制作一个包装相关对话框的独立类。然后从您的任何活动中实例化该类。这样您就可以正确使用对话框并使其可重用。

# regex - 用于忽略主机名的正则表达式

> ID：10233255
> 
> 赞同：0
> 
> 时间：2012-04-19T17:13:31.860
> 
> 标签：regex

我试图忽略网址的主机名部分，只保留路径。

例如：

```
http://bar.foooo.com/path1/path2/path3 
```

目前我有以下正则表达式：

```
\\bhttp\\b)*(\\bhttps\\b)*(\\b[\\w']{1,2}\\b)*(\\bwww\\b)*(\\bco\\b)*(\\buk\\b)*(\\bcom\\b)*(\\borg\\b)*[^\\p{L}\\p{N}]+|[\\w\\d']{20,}|\\b\\w*\\d\\w*", " ")); 
```

这会将链接变为：

```
bar foooo path1 path2 path3 
```

但我也想排除 bar 和 foooo 换句话说忽略 [http://bar.foooo.com/]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:59:50.977

```
^https?:\/\/[^\/]+\/(.+)$ 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:24:34.960

你可以使用这个表达式：

```
^https?:\/\/[^\/]\/(.*)$ 
```

它将忽略起始[http://....../](http://....../)（或[https://....../](https://....../)）并且只会返回路径

# windows - 如何混淆 Windows 注册表中的数据 - 安全管理器？

> ID：10233256
> 
> 赞同：1
> 
> 时间：2012-04-19T17:13:32.173
> 
> 标签：windows, security, registry

我听说有一种方法可以在 Windows 中隐藏注册表项，但不记得它是什么——它可能与安全管理器有关。

我想做的是阻止用户从注册表中复制我的软件激活密钥，停用软件，然后通过将旧密钥复制回原位来重新激活它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:16:48.877

我知道的唯一解决方案是使用 GPO，它保存在注册表的受保护部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:44:29.417

简而言之，你不能对用户隐藏任何东西（假设他们是管理员），但你可以让它变得更加困难。

您可以使用本机 API 来“隐藏”注册表项来访问注册表，而不是使用 Win32 API。这实际上意味着用户将无法使用 RegEdit 删除或重新创建注册表项。他们也不得不求助于使用本机 API。

[本文](http://www.codeproject.com/Articles/14508/Registry-Manipulation-Using-NT-Native-APIs)介绍了本机 API 以及隐藏的注册表项（在键名中使用嵌入的空值）。Sysinternals的[RegHide](http://technet.microsoft.com/en-us/sysinternals/dd581628)工具允许您隐藏注册表项，而[RegDelNull](http://technet.microsoft.com/en-us/sysinternals/bb897448)工具允许您删除它们。

但同样，一个足智多谋的人仍然可以解决这个问题。确保它仍然有效的唯一方法是让第三方（例如您控制的 Web 服务）定期验证许可证是否仍然有效。

# .net - 不同应用程序域中的 Asp.net MVC 请求

> ID：10233257
> 
> 赞同：0
> 
> 时间：2012-04-19T17:13:35.583
> 
> 标签：.net, asp.net-mvc, visual-studio-2010, appdomain

谁能解释一下 MVC 如何处理请求？我有一个 MVC Web 应用程序，在我尝试检查哪个 AppDomain 运行每个请求之前，我遇到了一些问题。发生了一件奇怪的事情（对我来说），有时它会在一个 AppDomain 中创建控制器，有时在另一个 AppDomain 中创建控制器。我将 AppDomain.CurrentDomain.GetHashCode() 添加到控制器的构造函数中，并且不同请求的值不同。（但不是每个请求，有时该值已被使用）这意味着它以某种方式在另一个中创建和运行控制器应用程序域。

我使用 Visual Studio 2010 开发 Web 服务器进行调试。

这里有一个调用栈： ![调用堆栈到控制器](../Images/deaa0c4c779f7c26dbcc79d792a62d40.png)

事实上有 Appdomain Transition 并且我的代码在不同的 AppDomains 中运行它肯定会创建不同的 AppDomains，但是我该如何控制呢？我对这件事不是很有经验，所以有人可以给我一些建议如何改变吗？我需要我的代码在一个 AppDomain 中运行。

谢谢你。

更新 1：这可能有点令人困惑，我的意思是我的代码在 MVC 中的不同 AppDomain 中运行，但 WebServer 创建 AppDomain 并将对 MVC 的调用包装在其中。那么，为什么会这样呢？谁能解释一下？

更新 2：我发现并发布了为什么它会在每个请求中创建 AppDomain。我们通过名为“PEngine”的 C++ 库的 DllImport 管理了内部使用非托管方法“Process”的 C# dll“PEngineCSharp”。

在我的控制器中，我有几种方法，其中一种是“PEngineProcess”，该方法的调用方式如下：

```
PEngineCSharp.PEngine.Process(ProcessInfo info); 
```

每次调用控制器的“PEngineProcess”方法后，每个请求都在单独的 AppDomain 中启动。如果我不调用此方法，而是调用其他方法，那么它们都是纯托管的，它们都在一个 AppDomain 中运行。在评论调用“PEngineCSharp.PEngine.Process(ProcessInfo info);”之后 对控制器方法“PEngineProcess”的调用不会创建新的 AppDomain，并且所有内容都在一个 AppDomain 中运行。为了测试，我刚刚添加了“PEngineCSharp.PEngine.Process(ProcessInfo info);” 到另一个控制器的方法，然后请求开始在新的 AppDomains 中重新开始。所以我找到了这种行为的原因，我也尝试了 VisualStudio WebServer、IIS Express 7.5 和 IIS 7.0 上的所有东西——所有这些行为都是一样的。

拜托，谁能解释一下那里发生了什么？谢谢！

# twitter-bootstrap - 如何使用 Twitter Bootstrap 2 获得 16 列响应式布局？

> ID：10233260
> 
> 赞同：5
> 
> 时间：2012-04-19T17:13:39.893
> 
> 标签：twitter-bootstrap, less

我从各种论坛帖子中得到了不同的信号。它是否通过更改本机存在：

```
// Default 940px grid
// -------------------------
@gridColumns:             12;
@gridColumnWidth:         60px;
@gridGutterWidth:         20px;
@gridRowWidth:            (@gridColumns * @gridColumnWidth) + (@gridGutterWidth * (@gridColumns - 1)); 
```

到

```
// Default 940px grid
// -------------------------
@gridColumns:             16;
@gridColumnWidth:         40px;
@gridGutterWidth:         10px;
@gridRowWidth:            (@gridColumns * @gridColumnWidth) + (@gridGutterWidth * (@gridColumns - 1)); 
```

这就是创建 16 列布局所需的全部内容吗？我看到一些论坛帖子说您必须在选择器 span11-16 中进行硬编码才能使其工作，因为自 Bootstrap 2.0 以来这些不再存在并且无法动态创建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T17:18:43.400

好吧，我刚刚尝试过，它可以很好地生成 16 列。您是否查看过此页面并尝试自定义下载？

[http://twitter.github.com/bootstrap/download.html](http://twitter.github.com/bootstrap/download.html)

此外，如果您查看 mixins (The Grid) 的第 556 行，您将看到生成跨度的函数。在生成跨度时，它会考虑总列数。

[https://github.com/twitter/bootstrap/blob/master/less/mixins.less](https://github.com/twitter/bootstrap/blob/master/less/mixins.less)

换句话说，你很高兴。

# css - 媒体查询奇怪的行为

> ID：10233261
> 
> 赞同：0
> 
> 时间：2012-04-19T17:13:49.590
> 
> 标签：css, media-queries

我正在像这样将媒体查询附加到我的 html 文档中

```
<!-- SmartPhone CSS --> 
<link rel="stylesheet" href="smartphone-portrait.css" />

<!-- IPAD CSS -->
<link rel="stylesheet" href="ipad-portrait.css"         media="only screen and (min-width : 550px)"/>
<link rel="stylesheet" href="ipad-landscape.css"        media="only screen and (min-width : 970px)"/> 
```

smart-portrait.css 是应该一直应用的通用文件，但是如果窗口大小小于 550 像素，则不应用任何样式，请参见第一个屏幕。

如果窗口大小大于 550，则应用样式。为什么当窗口大小较小时不应用 css？

![在此处输入图像描述](../Images/2f5b25aef6a341c3ca4493967c97da39.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:38:10.313

您的标记看起来正确。你的问题像错字一样愚蠢吗？也许 ipad css 的拼写正确，而常见的拼写错误。

# google-chrome - Selenium：网格、谷歌浏览器和 SSL

> ID：10233269
> 
> 赞同：1
> 
> 时间：2012-04-19T17:14:16.140
> 
> 标签：google-chrome, selenium, ssl-certificate

我正在运行 Selenium 测试，其中包括调用两个浏览器：Firefox 和 Google Chrome。该脚本首先调用 Firefox 并且一切顺利，但是当调用 Chrome 时，显然我的 SSL 证书存在一些问题，不允许测试运行。

行为是我使用以下命令启动两个浏览器：

sele1 = new DefaultSelenium("localhost", 4444, "*firefox", "http://www.google.es/"); //建立第二个浏览器 sele2 = new DefaultSelenium("localhost", 4444, "*googlechrome" , "http://www.facebook.com"); //启动第一个测试用例 sele1.start(); //启动第二个测试用例 sele2.start();

然后在两个浏览器启动后，Chrome 突然关闭（没有显示错误）。

运行 Firefox 所需的所有命令后，Chrome 浏览器在 Selenium 服务器（节点）上显示以下错误：

完成：/status 无法代理到[http://jvutamyakw/](http://jvutamyakw/)因为找不到主机 无法代理到[http://lqsvihpmai/](http://lqsvihpmai/)因为找不到主机 无法代理到[http://eqxsaiaqaf/](http://eqxsaiaqaf/)因为找不到主机

我需要测试两个浏览器，所以我不需要创建另一个 Firefox 配置文件来测试它（已经尝试过，但不是一个可行的解决方案，也不能正常工作）。

帮助并提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:38:40.860

经过一段时间的测试，我终于能够在并行测试中使用带有 selenium 的 *googlechrome、*firefox 和 *iexplore 浏览器。

使用 Selenium RC，我启动了一个 Selenium 服务器作为 HUB，指示“trustAllSSLCertificates”。然后启动一个 Selenium 服务器作为一个节点，同时指示“trustAllSSLCertificates”，我摆脱了 SSL 证书问题！

谢谢阿杰！

# python - 用于 piglatin 脚本的 Python UDF 未找到 re 模块

> ID：10233270
> 
> 赞同：3
> 
> 时间：2012-04-19T17:14:22.770
> 
> 标签：python, regex, user-defined-functions, apache-pig

我在为我正在使用的 piglatin 脚本创建 UDF 时遇到问题。我的问题是，当我运行脚本时`pig script.pig`出现以下错误：

```
[main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1121: Python Error. Traceback (most recent call last):
  File "utils.py", line 3, in <module>
    import re
ImportError: No module named re 
```

在我的“utils.py”脚本中，我正在像这样导入模块：`import re`

为什么找不到`re`模块，我该如何解决？

**编辑** 我应该注意，如果我直接使用`python`命令运行 python 脚本，我不会收到错误提示它找不到 `re`模块。

**编辑 2**

好的，根据评论，我安装了 jython（我的系统上没有安装），这里是`print sys.path`我的脚本的输出：

*使用蟒蛇*

```
['/home/hduser/bqmScripts/betsScripts', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/usr/lib/python2.6/lib-old', '/usr/lib/python2.6/lib-dynload', '/usr/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages/PIL', '/usr/lib/python2.6/dist-packages/gst-0.10', '/usr/lib/pymodules/python2.6', '/usr/lib/python2.6/dist-packages/gtk-2.0', '/usr/lib/pymodules/python2.6/gtk-2.0', '/usr/local/lib/python2.6/dist-packages'] 
```

*使用 Jython*

```
['', '/usr/share/jython/Lib', '/usr/lib/site-python', '__classpath__'] 
```

*使用猪*

```
['/pig/lib/Lib', '__classpath__', '__pyclasspath__/'] 
```

看到这个后，我尝试将 jython 中缺少的路径元素添加到 pig 版本中，我现在得到的是这样的：

```
 File "utils.py", line 8, in <module>
    import re
  File "/usr/share/jython/Lib/re.py", line 7, in <module>
    import sre, sys
  File "/usr/share/jython/Lib/sre.py", line 97, in <module>
    import sre_compile
  File "/usr/share/jython/Lib/sre_compile.py", line 17, in <module>
    assert _sre.MAGIC == MAGIC, "SRE module mismatch"
AssertionError: SRE module mismatch 
```

**解决了**

为了解决我最新的错误消息，我查找了我的 pig 安装使用的 jython 版本（2.5）并手动安装了那个版本。这解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:16:36.300

`re`是 stdlib 的一部分，因此您的 Python 安装已损坏或不完整，或者某些内容损坏了`sys.path`.

# zend-framework - 在 Zend 中使用单一表单在两个表中插入数据

> ID：10233274
> 
> 赞同：5
> 
> 时间：2012-04-19T17:14:46.970
> 
> 标签：zend-framework

我有两个表“登录”和“个人资料”。`login table`包含`user_id, username, password, type`. `profile table`包含`profile_id, user_id, name, address, phone_no,email,status,pancardno,gender,birthday,joiingdate,endingdate`. 在这里我使用`user_id`.Form`reference key`包含用户名、密码、类型、姓名、地址、电话号码。那么如何在 Zend Framework 的配置文件表中插入用户名、密码、输入“登录”表和其他字段。
这是我的控制器代码。

> `include_once(APPLICATION_PATH.'/modules/admin/models/DbTable/Login.php');
> public function emppostAction()
> {
> $session=new Zend_Session_Namespace();
> if(isset($session->id))
> {
> $this->view->name="<b>".$session->name."</b>";
> $this->render('employee');`
> 
> ```
>  $data= new Model_DbTable_Login();
>           if($this->getRequest()->isPost())
>           {
>               $un=$this->getRequest()->getPost('un');
>               $name=$this->getRequest()->getPost('name');
> 
>               $bday=$this->getRequest()->getPost('bday');
>               $bmnth=$this->getRequest()->getPost('bmonth');
>               $byear=$this->getRequest()->getPost('byear');                   
>               $bdate=$byear."-".$bmnth."-".$bday;         
> 
>               $jday=$this->getRequest()->getPost('jday');
>               $jmnth=$this->getRequest()->getPost('jmonth');
>               $jyear=$this->getRequest()->getPost('jyear');
>               $jdate=$jyear."-".$jmnth."-".$jday;
> 
>               $eday=$this->getRequest()->getPost('eday');
>               $emnth=$this->getRequest()->getPost('emonth');
>               $eyear=$this->getRequest()->getPost('eyear');                   
>               $edate=$eyear."-".$emnth."-".$eday;
> 
>               $phoneno=$this->getRequest()->getPost('phoneno');
>               $add=$this->getRequest()->getPost('add');   
>               $qf=$this->getRequest()->getPost('qf');
>               $jod=$this->getRequest()->getPost('jod');
>               $email=$this->getRequest()->getPost('email');
>               $pwd=$this->getRequest()->getPost('pwd');
>               $gn=$this->getRequest()->getPost('gender');
>               $ms=$this->getRequest()->getPost('ms');
>               $desg=$this->getRequest()->getPost('desig');
>               $status=$this->getRequest()->getPost('status');
>               $pan=$this->getRequest()->getPost('pancard');
> 
>               $insert=$data-> >insertData($un,$pwd$name,$bdate,$phoneno,$add,$qf,$jdate,$edate,$gn,$ms,$desg,$email,$pan,>$status);
> 
>           $this->_helper->redirector('viewemp', 'Leave');
>               exit;   
> 
>           }               
>       }
>       else
>       {
>           $this->_helper->redirector('login','index');
>       } 
> ```
> 
> }

在模型中我有

> 类 Model_DbTable_Login 扩展 Zend_Db_Table_Abstract
> {
> 公共函数 insertData($un,$pwd)
> 
> {
> $data = array(
> '用户名'=> $un,
> '密码'=> $pwd
> );
> $data2 = array( 'name'=> $name, 'birthdate'=> $bdate, 'phoneno'=> $phoneno, 'address'=> $add, 'qualification'=> $qf, 'joiningdate'=> $jdate, 'endingdate'=> $edate, 'gender'=> $gn, 'maritalstatus'=> $ms, 'designation'=> $desg, 'email'=> $email, 'pancardno'=>$pan , '状态'=> $状态 );
> 
> ```
>  try{  
>                   //here i m inserting data in login table.
>       $result=$this->insert($data);
>                    // now here i want to insert data in profile table
>                    $profile=$this->insert($data2)
>   } 
> ```
> 
> 捕获（异常 $e）{
> echo "
> ".$e;exit;
> }
> }

那么如何在登录表中插入数据的同时在profile表中插入数据呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:16:19.690

好的，Jigar 让我把它降低到我的水平（我想你可能离我很近）。

对于要在应用程序中使用的每个表，您都需要一个 DbTable 模型。

dbTable 模型的最低要求（所有类都使用 ZF 1.11 默认名称和路径）：

```
class Application_Model_DbTable_Login extends Zend_Db_Table_Abstract
{
    //$_name = name of table, not reuired if classname = tablename, but good idea
    protected $_name = 'login';
    //$_primary = primary key column of table, good idea for easy reference.
    protected $_primary = 'user_id';

    //save function added for brevity
    //I like to use the save() method over insert() because for a single row 
    //I can save and update with the same method...easily.
 public function saveUser(array $data) {
    //convert array to standard object for convience
    $dataObject = (object) $data;
    //check if user_id array key exists and isset in original data, if exist will update
    if (array_key_exists('user_id', $data) && isset($data['user_id'])) {
        $row = $this->find($dataObject->id)->current();
    } else {
        //if user_id not set or present in array we create a new row
        $row = $this->createRow();
    }

    $row->username = $dataObject->username;
    $row->password = $dataObject->password;
    $row->type     = $dataObject->type;
    //save or update row
    $row->save();
    //return the whole row object, we'll use it to save data to 'profile'
    return $row;
  }
}

//I would change the profile table to use the user_id as a 'natural' key, this requires adding
//a third property $_sequence = false.
class Application_Model_DbTable_Profile extends Zend_Db_Table_Abstract
{
    //$_name = name of table, not reuired if classname = tablename, but good idea
    protected $_name = 'profile';
    //$_primary = primary key column of table, good idea for easy reference.
    protected $_primary = 'user_id';
    //primary key auto-increment? True for yes false for natural key
    protected $_sequence = FAlSE;

    public function saveUserProfile(array $data, $id) {
    //convert array to standard object for convience
    $dataObject = (object) $data;
    //the user_id will always exist when we deal with the profile
    $row = $this->find($id)->current();
    if (!row)) {
        $row = $this->createRow();
        $row->user_id  = $id;
    } 

    $row->name      = $dataObject->name;
    $row->address   = $dataObject->email;
    $row->phone     = $dataObject->phone;//continue adding fields
    //save or update row
    $row->save();
    //return the whole row object, we'll use it to save data to 'profile'
    return $row;
  }
 }
} 
```

现在通过一个简单的控制器操作来获取我们想要保存的数据。例如，我们将使用默认的 IndexController/indexAction。

```
class IndexController extends Zend_Controller_Action {

    public function indexAction() {
        $form = new Form(); //add your form here
        //this assumes the use of a Zend_Form object. For other form types use $this->getRquest()->getParams();
        if ($this->getRequest()->isPost() {
            if ($form->isValid($this->getRequest()->getPost()){
            $formData = $form->getValues(); //returns array of filtered/validated form values
           $model = new Application_Model_DbTable_Login();
           //pass the whole array to the saveUser() correct the data in the model.
           $user = $model->saveUser($formData);
           //$user returns the row object we just saved
           $profile = new Application_Model_DbTable_Profile();
           $profile->saveUserProfile($formData, $user->user_id);
      }
    }
    //assign form to view
    $this->view->form = $form;
  }
} 
```

这是一个简单的示例，绝不符合最佳实践，但该技术有效。如果您使用多种表单，indexAction() 中的代码模式将变得非常熟悉。

我可能会将控制器中的两个 DbTable 调用组合成第三个模型，例如：`Application_Model_User`.

这里要记住的是：在视图/控制器中过滤和验证用户数据，然后在模型中规范化您的数据。你可以在任何你想要的地方传递相同的数据数组，然后在这里和那里提取一点。

Rob 的回答比我的要正确得多，但它确实包含我们一些业余/初学者程序员还不太了解的概念。:)

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:14:49.487

创建一个`User`包含两个表所需的所有属性的实体。还要创建一个 用于加载和保存用户实体的[服务对象。](http://phpmaster.com/an-introduction-to-services/)

服务器对象，比如说`UserService`，每个表应该有两个属性。您可以使用您编写的两个映射器对象来执行此操作，也可以使用两个`Zend_Db_Table`对象。

`UserService`在调用上编写一个方法`SaveUser($user)`，然后为每个表提取正确的属性并调用相关的表对象进行插入或更新。

同样，创建一个`UserService::LoadUser($id)`允许您实例化用户实体并从两个表网关对象中填充其属性的对象。

这是一些示例代码，显示了我的意思。显然它还没有准备好生产！

```
<?php

class User {
    public $user_id;
    public $username;
    public $password;
    public $profile_id;
    public $name;
    public $address;
    public $phone_no;

}

class LoginTable extends Zend_Db_Table_Abstract
{
    protected $_name = 'login';
}

class ProfileTable extends Zend_Db_Table_Abstract
{
    protected $_name = 'profile';
}

public UserService
{
    public function saveUser(User $user)
    {
        $loginTable = new LoginTable();
        $profileTable = new ProfileTable();

        $loginData = array(
            'username' => $user->username,
            'password' => $user->password,
        );
        $profileData = array(
            'user_id' => $user->user_id,
            'name' => $user->name,
            'address' => $user->address,
            'phone_no' => $user->phone_no,
        );

        if (!user->user_id > 0) {
            // updating
            $loginTable->update($loginData, 'user_id = '. (int)$user->user_id);
            $profileTable->update($profileData, 'profile_id = '. (int)$user->profile_id);
        } else {
            // inserting
            $user->user-id = $loginTable->insert($loginData);
            $profileData['user_id'] = $user->user_id;
            $profileTable->insert($profileData);
        }
    }
} 
```

# java - 通过 Web 的 API：使用 80 端口还是自定义端口（如 8080）？

> ID：10233281
> 
> 赞同：7
> 
> 时间：2012-04-19T17:15:06.180
> 
> 标签：java, http

我们有一个人类用户无法访问的网络服务。即仅通过：

1.  来自浏览器的 Javascript
2.  移动应用程序（iPhone 和 Android）
3.  其他服务器

问题：可以为此使用一些自定义端口（如 8080）还是我们应该只使用 80 端口（因此 URL 不会包含端口号）。

优缺点都有什么？是否有任何原因导致无法接受带有自定义端口的选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:38:18.503

如果您的某些客户端位于防火墙后面，他们可能有限制访问“非标准端口”的策略，包括端口 8080。除此之外，我认为在端口 8080 上运行 Web 服务端点没有任何缺点。专业人士是如果您想在同一台机器上运行常规 Web 服务器，您可以为其分配端口 80，而不会发生冲突。

将服务移动到另一个端口并不会增加您的安全风险，而不是将其放在原始端口上。在 8080 端口上运行不会影响任何移动设备，只要它们的 ISP 不阻止该端口即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:42:57.133

不在默认端口上使用它的一个优点是它不太可能获得不需要的流量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T07:14:36.357

您可以做的一件事是设置自己的防火墙或路由器，将发送到特定 url 的流量路由到应用服务器上设置的自定义端口，这样只有特定于您运行的服务的请求才会命中它。

# android - 将视频帧从 OpenCV 程序发送到三星 Android

> ID：10233285
> 
> 赞同：1
> 
> 时间：2012-04-19T17:15:13.143
> 
> 标签：android, opencv, video

在我进入这个领域之前只是想知道。

是否可以将 Windows 上的 opencv 程序中的视频帧发送到三星 android 选项卡并在那里可视化？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:11:31.320

很久以前，我做了相反的事情，将图像流从 Android 发送到 Windows 上的 C/OpenCV 程序。对于使用 G1 over WiFi 的 320x240 黑白图像，我获得的最大帧速率仅为约 12FPS。我测试了不同的东西，比如发送压缩图像 (JPEG) 或原始像素，但这是我得到的最大值。我认为限制因素是 G1 的处理速度以及 Android 1.6 的糟糕相机堆栈。在更体面的设备上，更高的帧速率应该不是问题。但它甚至应该在 G1 上使用更复杂的方法。

你的方向应该更容易，因为如果你想压缩在快速 Windows 机器上发生的传输图像，你不必处理手机的摄像头。只需使用 WiFi 连接通过套接字将像素从您的 C/C++ 应用程序传输到您的 Android 应用程序。但是，您可能必须考虑机器/语言[字节序](http://en.wikipedia.org/wiki/Endianness)。您也可以尝试使用流媒体视频（就像 youtube 一样）。但这可能需要更多的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:41:37.273

是的。处理后，如果将帧压缩为位图，则可以通过WiFi将其发送到设备。将其拆分为块，将块发送到设备，然后在设备上重新组装数据，从数据创建图像，并将其显示在 imageview 或其他东西中。

# java - 在 Ruby 中调用 Java 程序并获取输出

> ID：10233287
> 
> 赞同：3
> 
> 时间：2012-04-19T17:15:17.543
> 
> 标签：java, ruby-on-rails, ruby

我希望我的 Rails 应用程序调用 Java 程序来完成一些劳动密集型工作。将 Java 程序的输出转换为 Ruby 的最佳方法是什么？输出是文本，每个查询大约 60,000 个字符。

有没有比从文本文件写入/读取更好的方法？

我不想使用 JRuby。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:21:03.223

```
output = %x{java your_program.java} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:01:45.113

取决于规模。实际设置一个消息协议（例如[RabbitMQ](http://www.rabbitmq.com/) ）可能是值得的。

如果您只是设置监视器或其他脚本驱动的过程，您可以查看 ruby​​ 的 [IO.popen](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-popen)，但这仍然会让您解析文本流。

# jquery-mobile - 为什么在同一页面 div 上关闭 SimpleDialog2 时我的 JqueryMobile 单选按钮会失去样式？

> ID：10233288
> 
> 赞同：1
> 
> 时间：2012-04-19T17:15:24.767
> 
> 标签：jquery-mobile, radio-button

我有一个 jQueryMobile 应用程序，我遇到了一个问题，当我关闭 SimpleDialog2 对话框时，我的单选按钮似乎取消选择。仅当对话框与单选按钮在同一“页面”上打开时才会发生这种情况。

基本上我的页面上有 3 组单选按钮 - （这里是一组）

```
<div data-role="page" id="page1">   
 <div data-role="content">
   <input type="radio" name="radio_set_1" id="one" value="one" checked="checked" />
   <label for="one">One</label>
   <input type="radio" name="radio_set_1" id="two" value="two"/>
   <label for="two">Two</label>
 </div>
</div> 
```

我在同一页面上打开一个对话框（SimpleDialog2） -

```
$('#page1').simpledialog2({ 
    mode: 'button',
    headerText: "Dialog Title",
    headerClose: true,  
    buttonPrompt:"Prompt text",
    buttons: {
        'OK': {
            click:function() {
            }
        }
    }
  }); 
```

当此对话框关闭时，单选按钮似乎被取消选中（两个按钮都失去了选中的样式）。我可以说实际上在我的代码中选中了单选按钮，它只是失去了选中的样式。我试过应用刷新方法 -

```
$("input[type='radio']").checkboxradio("refresh"); 
```

但这并没有奏效。

当我在不同的“页面”div 上打开一个 simpleDialog2 对话框，然后关闭此对话框并返回到 page1 时，单选按钮保持其样式正确。

有任何想法吗？

# ios - ARC 的 EXC_BAD_ACCESS

> ID：10233292
> 
> 赞同：0
> 
> 时间：2012-04-19T17:15:44.730
> 
> 标签：ios, automatic-ref-counting, exc-bad-access

```
//tool bar
__strong UIToolbar *tBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0,
                                                              self.view.frameHeight-49.0f-44.0f,
                                                              [UIScreen mainScreen].bounds.size.width, 49.0f)];
UITextField* cText = [[UITextField alloc] initWithFrame:CGRectMake(8, 12, 150, 28)];
self.codeText  = cText;
_codeText.backgroundColor = [UIColor whiteColor];
_codeText.placeholder = @"Input code";
[tBar addSubview:_codeText];

UIButton *obtn = [[UIButton alloc] initWithFrame:CGRectMake(180, 12, 60, 28)];
self.okBtn = obtn;
[self.okBtn setTitle:@"OK" forState:UIControlStateNormal];
self.okBtn.titleLabel.textColor = [UIColor whiteColor];
self.okBtn.backgroundColor = [UIColor blueColor];
[self.okBtn addTarget:self action:@selector(confirm) forControlEvents:UIControlEventTouchUpInside];
[tBar addSubview:self.okBtn];

self.cancelBtn = [[UIButton alloc] initWithFrame:CGRectMake(250, 12, 60, 28)];
[_cancelBtn setTitle:@"Cancel" forState:UIControlStateNormal];
_cancelBtn.titleLabel.textColor = [UIColor whiteColor];
_cancelBtn.backgroundColor = [UIColor blueColor];
[_cancelBtn addTarget:self action:@selector(cancel) forControlEvents:UIControlEventTouchUpInside];
[tBar addSubview:_cancelBtn];

[self.view addSubview:tBar]; 
```

此代码在我的项目中启用ARC的控制器的loadView函数中；但是当我触摸两个按钮中的任何一个时，它总是会因为“EXC_BAD_ACCESS”而崩溃。我已经使用zombie进行调试，但是没有用这个问题。

# c++ - C ++：使用堆栈反转文本文件中的行

> ID：10233293
> 
> 赞同：1
> 
> 时间：2012-04-19T17:15:44.697
> 
> 标签：c++, text, stack, reverse, lines

到目前为止我有这个代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <fstream>
#include <iostream>
#include <string>
#include <stack>
using namespace std;

int main () {

ifstream in;
in.open("example.txt");

ofstream outfile;
outfile.open("out.txt");

stack<string> lines;
string temp;
while(getline(in, temp))
    lines.push(temp);
while(!lines.empty())
    outfile << lines.pop() << endl;

in.close();
outfile.close();

return 0;
} 
```

我的问题是，为什么我会收到“与运算符 << 在 outfile 中不匹配”的编译错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T17:18:13.067

[`pop()`](http://en.cppreference.com/w/cpp/container/stack/pop)返回`void`，而不是`std::string`。使用[`top()`](http://en.cppreference.com/w/cpp/container/stack/top)然后`pop()`：

```
while(!lines.empty())
{
    outfile << lines.top() << endl;
    lines.pop();
} 
```

# html - 使用浮动垂直对齐底部img和文本

> ID：10233295
> 
> 赞同：0
> 
> 时间：2012-04-19T17:15:59.363
> 
> 标签：html, css

我正在尝试使用对齐同一行上的文本块和图像

```
display:table-cell; vertical-align:bottom; 
```

这可行，但是一旦我将跨度浮动到右侧，垂直对齐就会停止工作，任何人都可以伸出援手，
我正在尝试将文本对齐到底部并将蓝色跨度浮动到右侧，这是
我的小提琴：[http：// jsfiddle.net/nalagg/YpVnw/2/](http://jsfiddle.net/nalagg/YpVnw/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:23:36.017

试一试：http : [//jsfiddle.net/YpVnw/5/](http://jsfiddle.net/YpVnw/5/)

我`overflow: hidden`放在包装纸上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:27:57.217

您使用的显示器类型不一致。对于“包装器” div，您使用的是 display:block; 然后对于内部内容（img，span），您正在使用 display:table-cell （没有为父 div 指定 table-row，并为 table-row 的父 div 指定 display:table）

试试这个：

```
<div id="table">
        <div id="table-row">
            <div class="table-cell">
                <img src="http://beta.images.theglobeandmail.com/archive/01397/web-verizon_jpg_1397343cl-8.jpg" alt="" width="412" height="416" class="valign-middle"/>
            </div>
            <div class="table-cell valign-bottom bgcolor">
                <span class='georgia'> Tkquis, dignissim sit amet erat. Cras quis diam s leo vel urna dignissim blandit. Ut ultrices, turpis dolor&nbsp; ntum nulla, eget euismod nisi met, eget euismod nisi metus sit amet nisl. Cu amet nisl. asdCum vitae nisi interdum elit sagittis vestibsulum. volutpat por ttitor. Vestibulum interdum, dolor eget ultridfadfsces ultrices,er turpis m vitae nisi interdum </span>
            </div>
        </div>
    </div>

#table { display: table; }
#table-row { display: table-row; }
.table-cell { display: table-cell; }
.valign-bottom { vertical-align: bottom; }
.valign-middle { vertical-align: middle; }
.bgcolor { background-color: #00CCCC; } 
```

![在此处输入图像描述](../Images/789e48a60ae3c1187945f70337b3f0aa.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:21:46.357

尝试向包含的 div 添加宽度：

```
.mcone{ height:416px; width: 530px; float:left;} 
```

# postgresql - 在 Postgres 中增加一个值

> ID：10233298
> 
> 赞同：142
> 
> 时间：2012-04-19T17:16:08.357
> 
> 标签：postgresql, increment

我对postgres有点陌生。我想在 postgres 表的字段中取一个值（它是一个整数）并将其加一。例如，如果表 'totals' 有 2 列，'name' 和 'total'，而 Bill 总共有 203，我将使用什么 SQL 语句来将 Bill 的总数移动到 204？

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2012-04-19T17:20:23.863

```
UPDATE totals 
   SET total = total + 1
WHERE name = 'bill'; 
```

如果您想确保当前值确实是 203（并且不会意外再次增加），您还可以添加另一个条件：

```
UPDATE totals 
   SET total = total + 1
WHERE name = 'bill'
  AND total = 203; 
```

# javascript - JavaScript 中最快高效的 MarkDown

> ID：10233300
> 
> 赞同：8
> 
> 时间：2012-04-19T17:16:12.257
> 
> 标签：javascript, node.js, markdown

我正在寻找一个 JavaScript MarkDown (MD) 引擎，通过 node.js 用于浏览器内和服务器端。大多数时候，预期的输出将是 HTML5（尽管我可能将 MD 用于 XML、PDF 和各种 ePub 格式；不确定是直接将 MD 转为 xxx 格式还是将 HTML 转为 xxx 格式最好）。快速转换一个大的MD文件最好，但我也打算在低端手机上使用它，所以内存使用也需要考虑。

我想那里有我找不到的 JavaScript-MD 经验，人们运行的测试等等。到目前为止，这是我收集的信息：

[https://github.com/chjj/](https://github.com/chjj/marked)标记为“为速度而生”

[https://github.com/guybrush/showdown](https://github.com/guybrush/showdown) 较旧且不再维护

其他研究，最老： [什么是最好的 JQuery WYSIWYM Textile Editor？](https://stackoverflow.com/questions/2430175/what-is-the-best-jquery-wysiwym-textile-editor)

[Markdown 将双星号转换为 javascript 中的粗体文本](https://stackoverflow.com/questions/10168285/markdown-to-convert-double-asterisks-to-bold-text-in-javascript/10168521#10168521)

[Javascript 将 Markdown/Textile 转换为 HTML（理想情况下，返回 Markdown/Textile）](https://stackoverflow.com/questions/1319657/javascript-to-convert-markdown-textile-to-html-and-ideally-back-to-markdown-t)

[有没有好的 Markdown Javascript 库或控件？](https://stackoverflow.com/questions/134235/is-there-any-good-markdown-javascript-library-or-control)

[你将如何解析 Markdown？](https://stackoverflow.com/questions/605434/how-would-you-go-about-parsing-markdown)

# mysql - 连接 3 个没有嵌套查询的表

> ID：10233302
> 
> 赞同：-1
> 
> 时间：2012-04-19T17:16:23.960
> 
> 标签：mysql

我有以下表格：

```
 CREATE TABLE `orders` (
   `ID` varchar(5) NOT NULL,
   `IDUserProfile` int(11),
   `IDRestaurant` int(11),
   `Date` int(11),
   PRIMARY KEY  (`ID`)
   ) ENGINE=MyISAM DEFAULT CHARSET=latin1  

   CREATE TABLE `userprofiles` (
   `ID` int(11) NOT NULL auto_increment,
   `IDUser` int(11) NOT NULL,
   `Name` varchar(64),
   `Phone` varchar(64),
   `Address` varchar(255),
   PRIMARY KEY  (`ID`)
   ) ENGINE=InnoDB DEFAULT CHARSET=latin1

   CREATE TABLE `users` (
   `ID` int(11) NOT NULL auto_increment,
   `Username` varchar(64) NOT NULL,
   `Password` varchar(33) NOT NULL,
   PRIMARY KEY  (`ID`)
 ) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

我需要执行以下操作：

显示表订单中的所有记录 显示用户电话 显示用户名 根据日期对结果进行排序（来自订单）

如果没有用户名与订单链接，我应该在结果中显示 null。手机也一样。我想在没有嵌套查询的情况下做到这一点......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:21:11.073

```
select o.*,
    up.Phone,
    u.Username
from orders o
left outer join userprofiles up on o.IDUserProfile = up.ID
left outer join users u on up.IDUser = u.ID
order by o.Date 
```

# javascript - 面向对象的 Javascript 和多个 DOM 元素

> ID：10233303
> 
> 赞同：2
> 
> 时间：2012-04-19T17:16:24.783
> 
> 标签：javascript, oop, closures

我有一个关于如何从面向对象的角度处理特定问题的概念性问题（注意：对于那些对此处的命名空间感兴趣的人，我使用的是 Google Closure）。我对 OOP JS 游戏相当陌生，所以任何和所有的见解都是有帮助的！

想象一下，您想要创建一个对象，该对象为页面上与 classname 匹配的每个 DOM 元素启动轮播`.carouselClassName`。

像这样的东西

```
/*
 * Carousel constructor
 * 
 * @param {className}: Class name to match DOM elements against to
 * attach event listeners and CSS animations for the carousel.
 */
var carousel = function(className) {
  this.className = className;

  //get all DOM elements matching className
  this.carouselElements = goog.dom.getElementsByClass(this.className);
}

carousel.prototype.animate = function() {
  //animation methods here
}

carousel.prototype.startCarousel = function(val, index, array) {
  //attach event listeners and delegate to other methods 
  //note, this doesn't work because this.animate is undefined (why?)
  goog.events.listen(val, goog.events.EventType.CLICK, this.animate);
}

//initalize the carousel for each
carousel.prototype.init = function() {
  //foreach carousel element found on the page, run startCarousel
  //note: this works fine, even calling this.startCarousel which is a method. Why?
  goog.dom.array.foreach(this.className, this.startCarousel, carousel);
}

//create a new instance and initialize
var newCarousel = new carousel('carouselClassName');
newCarousel.init(); 
```

第一次在 JS 中玩 OOP，我做了一些观察：

1.  在我的构造函数对象 ( `this.classname`) 中定义的属性可`this`用于其他原型对象中的操作。
2.  在我的构造函数对象或原型中定义的方法不能使用 this.methodName （参见上面的注释）。

绝对欢迎对我的方法提出任何其他评论:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:29:15.857

我建议您不要让您的`Carousel`对象代表页面上的所有轮播。每一个都应该是 的一个新实例`Carousel`。

您遇到的`this`未正确分配的问题可以通过将这些方法“绑定”到`this`您的构造函数中来解决。

例如

```
function Carousel(node) {
    this.node = node;

    // "bind" each method that will act as a callback or event handler
    this.bind('animate');

    this.init();
}
Carousel.prototype = {
    // an example of a "bind" function...
    bind: function(method) {
        var fn = this[method],
            self = this;
        this[method] = function() {
            return fn.apply(self, arguments);
        };
        return this;
    },

    init: function() {},

    animate: function() {}
};

var nodes = goog.dom.getElementsByClass(this.className),
    carousels = [];

// Instantiate each carousel individually
for(var i = 0; i < nodes.length; i++) carousels.push(new Carousel(nodes[i])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:27:28.107

查看[关键字的](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)[参考`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)。如果您从您的`newCarousel`对象调用其中一种方法（例如：`newCarousel.init();`），`this`则在 init 方法中将指向该对象。如果你调用一个方法，它是一样的。

您始终可以从对象引用中检索属性。如果这些属性是函数，并且不会在正确的上下文中执行（例如从事件处理程序），它们`this`将不再指向`newCarousel`。使用[`bind()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)来解决这个问题（`forEach`似乎将您的第三个参数作为每次调用的上下文）。

# api - jQuery 工具 - 范围输入 API

> ID：10233306
> 
> 赞同：1
> 
> 时间：2012-04-19T17:16:41.953
> 
> 标签：api, jquery-tools

由于无法在 jquerytools.org 上找到任何类型的联系信息，因此求助于 SO，并且该网站不会让我登录论坛在那里发帖。

我正在使用范围输入，并试图调用 API 在滑块的每一端添加箭头以执行向上/向下步进。

这是我加载范围输入的 js 代码：

```
 var scroll = jQuery('#river-scroll');

        jQuery("#video-river-range").rangeinput({
            value: <?php echo $rangeValue ?>,
            speed: 0,
            progress: true,
            onSlide: function(ev, step) {
                scroll.css({left: -step});
            },
            change: function(e, i) {
                scroll.animate({left: -i}, "fast");
            }
        }); 
```

按照他们网站上的文档，我应该能够通过以下方式访问 API：

```
var api = jQuery("#video-river-range").data("rangeinput"); 
```

然后随后使用这个：

```
function advanceStep() {
    api.next();
} 
```

唉，不工作。我得到：

```
Uncaught TypeError: Object #<A> has no method 'next' 
```

建议赞赏，谢谢。

# java - 在 Java 中定义最终的 String 有意义吗？

> ID：10233309
> 
> 赞同：52
> 
> 时间：2012-04-19T17:16:51.543
> 
> 标签：java, string, final

> **可能重复：**
> [字符串和最终](https://stackoverflow.com/questions/874978/string-and-final)

从[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)我可以读到：

```
Strings are constant; their values cannot be changed after they are created. 
```

这是否意味着 a`final String`在 Java 中实际上没有意义，因为该`final`属性在某种程度上是多余的？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-19T17:18:30.820

该`String`对象是不可变的，但它实际上是对`String`可以更改的对象的引用。

例如：

```
String someString = "Lala"; 
```

您可以重新分配此变量持有的值（以使其引用不同的字符串）：

```
someString = "asdf"; 
```

但是，有了这个：

```
final String someString = "Lala"; 
```

那么上述重新分配将是不可能的，并且会导致编译时错误。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-19T17:18:16.890

`final`指的是变量，而不是对象，所以是的，这是有道理的。

例如

```
final String s = "s";
s = "a"; // illegal 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-19T17:19:32.560

这说得通。`final`关键字防止将来对变量赋值。以下将是java中的错误：

```
final String x = "foo";
x = "bar" // error on this assignment 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-19T17:26:11.230

引用是最终的，对象不是。您可以将可变对象定义为最终对象并更改其状态。final 确保您正在使用的引用不能再次指向另一个对象。

# java - 迁移到 Maven

> ID：10233311
> 
> 赞同：3
> 
> 时间：2012-04-19T17:17:01.930
> 
> 标签：java, maven, build

我继承了一个基于 Java、基于 Web 的 7 年老产品，其中包含大约 750K 行代码。正如预期的那样，考虑到它的年龄，它不是基于 Maven 的结构，. Maven 用于构建和发布应用程序。但是，Maven 是为项目而生的，通常用于调用 Ant 脚本。

我想迁移到 Maven，因为在当前设置中加入任何新的（er）工具（如 Sonar、Hudson 等）都很麻烦。

我正在对小组进行民意调查，以询问进行此更改的好策略应该是什么？假设我能以某种方式获得时间和金钱来移动代码并将其 mavenized，那么测试没有任何功能由于 mavenization 而被破坏的有效方法是什么。不用说，我们不能依赖单元/集成测试，因为代码覆盖率低于 10%。

如果我在现有设置创建的战争和在 mavenization 后创建的战争之间做出区别，这两个战争是否应该相同（在大小和内容上）？如果是，这是保证没有功能被破坏的充分必要条件吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:24:01.243

首先，我可能会推荐 gradle，它似乎比 maven 更酷。除此之外，我认为您运行旧版本和新版本并比较它们的结果的计划是一个好主意。

话虽如此，为了能够继续前进，您需要运行某种集成测试，即使用 selenium 或 jweb 单元进行自动点击测试。

所以，我可能会先在 jenkins/hudson/bamboo 上建立并运行旧的构建，然后开始编写点击测试，然后开始使用构建。

我还建议[有效地使用遗留代码](http://goo.gl/vOXD)，因为它将为您提供很多用于重构代码的好工具。

在测试不同的构建是否构建相同的东西时，我现在执行以下操作：

```
/opt/gradle/bin/gradle clean war && jar -tf build/libs/new.war  | sort > /tmp/gradle-war.txt && diff /tmp/ant-war.txt /tmp/gradle-war.txt 
```

其中 /tmp/ant-war.txt 由

```
jar -tf old.war | sort | uniq > /tmp/ant-war.txt 
```

通过这种方式，我可以很好地输出两个版本中发生的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:41:27.210

如果您在切换时使用 Maven 的标准文件夹结构，那么这两场战争可能不会完全相同。您可以更改超级 pom 以更改文件夹以匹配您拥有的文件夹，但这样做会破坏一开始就使用 Maven 的优势之一。我会坚持标准。

因此，无论内部结构如何，都需要在代码库外部进行测试以验证功能。Selenium 非常适合这种情况。

# c# - 如何处理 C# XNA 错误并使用已发布的游戏进行最佳调试？

> ID：10233312
> 
> 赞同：2
> 
> 时间：2012-04-19T17:17:04.300
> 
> 标签：c#, debugging, error-handling, xna, publish

我一直在开发我的第一个游戏，并在发布它以创建可执行文件并将其交给我的朋友进行测试后，他不断崩溃，并且没有错误报告让我找出原因。这不会发生在我的电脑上，而且我从中学到的书从来没有教过我如何在发布游戏时处理错误。我在网上搜索，发现最好的东西是使用 catch{} 和 run{} 方法，但是我必须将所有内容都包含在其中。有人可以告诉我处理已发布游戏错误的最佳方法吗？是否有一种方法或东西可以在崩溃或其他东西时将错误/异常写入文本文件？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:26:56.123

这就是日志的用途！

[这是MSDN](http://msdn.microsoft.com/en-us/library/aa287548%28v=vs.71%29.aspx)上使用 C# 写入文件的示例。

您不应该将所有代码都封装在`Try - Catch`块中，这确实是一种不好的做法。相反，封装可能崩溃的部分代码。

您可以使用 和 将错误日志保存在文件`error message`中`stack trace`。这是关于登录的另[一篇文章](http://www.codeproject.com/Articles/3953/Logger-in-C-An-easy-way-for-monitoring-NET-applica)`C#`。

你很可能会得到这样的结果：

```
Try
{
    //Some code that may crash
}
Catch(Exception ex)
{
    WriteToLog(ex.Message, ex.StackTrace);
    throw;
} 
```

# javascript - Ruby on Rails - 如何在 textarea 中输入换行符，以便在显示内容时也有换行符？

> ID：10233313
> 
> 赞同：1
> 
> 时间：2012-04-19T17:17:13.690
> 
> 标签：javascript, ruby-on-rails

我是一个站点的管理员，并且我有一个只有我填充的特殊文本区域（即我不担心有人试图弄乱它来破坏我的站点）。我想在此文本区域中输入时放置一些换行符，以便在显示时有一些不错的换行符。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T17:24:13.960

`simple_format`在rails中使用助手。
[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html)

它将解释换行符并插入正确的 HTML，以便正确显示文本。

# java - Java 按钮不显示？

> ID：10233314
> 
> 赞同：1
> 
> 时间：2012-04-19T17:17:14.400
> 
> 标签：java, android

我正在使用下面的代码，并且我有一个未显示的按钮。我认为它与“SetContentView”有关，因为如果我删除其中一个，按钮就会出现。我不知道如何解决这个问题，以便一切都显示出来？谢谢！

```
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiManager;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;

import android.widget.Button;
import android.widget.TextView;

public class TestActivity extends Activity {
/** Called when the activity is first created. 
 * @return */

@Override
public void onCreate(Bundle savedInstanceState) {    
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    Button OffWifi = (Button)findViewById(R.id.offwifi);
    OffWifi.setOnClickListener(new OnClickListener() { 
      public void onClick(View v) {                 
          WifiManager wifiManager = (WifiManager)getBaseContext().getSystemService(Context.WIFI_SERVICE);
            wifiManager.setWifiEnabled(false);          
          }        
      });

    TextView tv = new TextView(this);       
    TextView status = new TextView(this);                  

    WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE); 
    WifiConfiguration wc = new WifiConfiguration();  
    wc.SSID = "\"Test\""; //IMP! This should be in Quotes!! 

    wc.hiddenSSID = true; 
    wc.status = WifiConfiguration.Status.ENABLED;      
    wc.priority = 10; 
    wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK); 
    wc.allowedProtocols.set(WifiConfiguration.Protocol.RSN);  
    wc.allowedProtocols.set(WifiConfiguration.Protocol.WPA); 
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN); 
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.SHARED); 
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP); 
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP); 
    wc.preSharedKey = "\"Password\""; 
    WifiManager  wifiManag = (WifiManager) this.getSystemService(WIFI_SERVICE); 
    boolean res1 = wifiManag.setWifiEnabled(true); 
    int res = wifi.addNetwork(checkPreviousConfiguration(wc)); 
    Log.d("WifiPreference", "add Network returned " + res ); 
    boolean es = wifi.saveConfiguration(); 
    Log.d("WifiPreference", "saveConfiguration returned " + es ); 
    boolean b = wifi.enableNetwork(res, true);    
    Log.d("WifiPreference", "enableNetwork returned " + b );   

    tv.setText("You are now connected!  " +
            "Version 1.1");

    status.setText("The was an error connecting, please try again.");

       //@Override

    try {

        Thread.sleep(5000);

         ConnectivityManager connec = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE); 

         if (connec != null && (connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED) ||(connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED)){  
                //You are connected, do something online. 
                setContentView(tv);

            }else if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED ||  connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED ) {              
                //Not connected.         
               setContentView(status);
            }  

    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public WifiConfiguration checkPreviousConfiguration(WifiConfiguration wc) {
WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE); 
 List<WifiConfiguration> configs = wifi.getConfiguredNetworks();     
    for(WifiConfiguration config : configs) {         
        if(config.SSID.equals(wc.SSID)) return config;     
        }     
    return wc; 
    } 

} 
```

主 XML 文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
android:id="@+id/tv"
android:layout_width="246dp"
android:layout_height="wrap_content" />

<Button
android:id="@+id/offwifi"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Turn Wifi Off" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:35:28.083

您需要在 main.xml 布局文件中获取根对象，即

```
LinearLayout layout = (LinearLayout) findViewById( R.id.linearlayout1 ); 
```

然后你可以添加到那个布局（它可能没有被命名为linearlayout1）

```
layout.addView ( status ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:25:15.983

setContentView() 不会将视图添加到显示中，它会替换它们。这就是你的按钮消失的原因。

在你的 XML 布局中使用现有的电视而不是创建一个新的，并且只调用一次 setContentReview()。

像这样：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
Button OffWifi = (Button)findViewById(R.id.offwifi);
OffWifi.setOnClickListener(new OnClickListener() { 
  public void onClick(View v) {                 
      WifiManager wifiManager = (WifiManager)getBaseContext().getSystemService(Context.WIFI_SERVICE);
        wifiManager.setWifiEnabled(false);          
      }        
  });

// remove these lines
// TextView tv = new TextView(this);       
// TextView status = new TextView(this);                  

// add this line
TextView tv= (TextView) findViewById(R.id.tv);

WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE); 
WifiConfiguration wc....

 ect.ect. 

Log.d("WifiPreference", "enableNetwork returned " + b );   

// let's do this later
//tv.setText("You are now connected!  " +
//        "Version 1.1");

//status.setText("The was an error connecting, please try again.");

   //@Override

try {

    Thread.sleep(5000);

     ConnectivityManager connec = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE); 

     if (connec != null && (connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED) ||(connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED)){  

            //You are connected, do something online. 

            // setting the ContentView replaces everything, so don't do that
            //setContentView(tv);

            tv.setText("You are now connected!  " +
               "Version 1.1");

        }else if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED ||  connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED ) {              
            //Not connected.         

           //setContentView(status);
           tv.setText("The was an error connecting, please try again.");
        }  

} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:51:44.880

您开始您的活动，将其内容视图设置为至少有一个按钮的东西。然后您创建 TextViews 的新实例。然后稍后在 OnCreate 中，将内容视图设置为文本视图之一。如果已连接，则视图将替换为 TextView，如果未连接，则视图将替换为 TextView。如果您删除其中一个额外设置的内容调用，您将看到该按钮，具体取决于您是否已连接。

这种行为可能是您想要的，或者您可能想要做的是将 TextViews 添加到布局中，并使用 FindViewById 以与按钮句柄相同的方式获取它们的句柄。然后，您可以避免使用 try 块中的所有内容，因为 textviews 已经使用新文本进行了更新。您的代码当前所做的是将整个布局替换为文本视图。

# ruby-on-rails - 为什么 ADT -03:00 在我的 Rails 应用程序中？

> ID：10233315
> 
> 赞同：0
> 
> 时间：2012-04-19T17:17:15.860
> 
> 标签：ruby-on-rails

我将时区更改为大西洋，所以当我保存时间为“2012-04-19 02:00 pm”的记录时，它返回“Thu, 19 Apr 2012 14:00:00 ADT -03:00”当我取回它。'ADT -03:00' 是否只是错误的，因为 ADT 永远不会被认为是 -03:00？这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:28:26.107

转到配置中的 environment.rb 文件并输入：

```
config.time_zone = "Eastern Time (US & Canada)" 
```

那应该可以消除您的问题。您设置的 ADT 时区适用于新斯科舍省等。

# c# - 获取控制器中复选框的选中状态

> ID：10233322
> 
> 赞同：0
> 
> 时间：2012-04-19T17:17:46.220
> 
> 标签：c#, asp.net-mvc-3

net mvc3 应用程序我有一个复选框：

```
<input type="checkbox" id="daStores" name="CheckBox1" onclick="filter()" /> 
```

我如何从控制器中获取它是否已检查？

像这样的东西

```
public ActionResult GoToPage(string page)
{
    bool ischecked = //get the checked status from the view
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:22:21.417

这是我将要展示的一段极其简单（且不切实际）的代码，但您必须将表单提交给控制器。

HTML：

```
<form action="MyController/MyAction" method="POST">
   <input type="checkbox" id="daStores" name="CheckBox1" onclick="filter()" />
   <input type="submit" value="Submit" />
</form> 
```

控制器：

```
[HttpPost]
public ActionResult MyAction(bool Checkbox1)
{
    bool ischecked = Checkbox1;
} 
```

听起来您对 ASP.NET MVC 的工作原理知之甚少，我认为您应该在开始之前尝试使用一些介绍性教程。

[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

# xml - Magento 购物车规则类覆盖模块

> ID：10233324
> 
> 赞同：0
> 
> 时间：2012-04-19T17:17:59.497
> 
> 标签：xml, magento, overriding, magento-1.6

我的 magento 安装有免费送货购物车规则，以及优惠券规则。输入优惠券后，免费送货就消失了。这是不可取的，但 Magento 的一个已知条件：[Magento 免费送货和优惠券折扣](https://stackoverflow.com/questions/9680951/magento-free-shipping-and-coupon-discount) *注意：如果有人知道如何在不覆盖的情况下纠正该问题，那将是可取的。*

我已经为此工作了大约 3 个小时。我搜索了 SO、Google 和其他人，但找不到解决方案。

问题：
我正在尝试编写一个模块来纠正基于这篇文章的行为：
[Magento Issue with Cart Price](http://magentoexpert.com/issue-with-cart-price-rules-coupon-code-discard-promotion-without-coupon-code/)

我试图覆盖的类是`Mage_SalesRule_Model_Resource_Rule_Collection`
使用[Alan Storm 的免费工具](http://commercebugdemo.pulsestorm.net/)，我发现 uri 是`salesrule/resource_rule_collection`，
并进行了一些手动调查，该类位于：
*app/code/core/Mage/SalesRule/Model/Resource/ Rule/Collection.php*
这里还有一个类，它扩展了上述文件中的类：
*app/code/core/Mage/SalesRule/Model/Mysql4/Rule/Collection.php*
（我应该覆盖其中的哪一个？）

对于我的一生，我找不到合适的 config.xml 语法来覆盖所需的类。

我的配置目前看起来像这样：

```
<config>
    <modules>
        <My_Couponrule>
            <version>1.0.0</version>
        </My_Couponrule>
    </modules>
    <global>
        <models>
            <salesrule>
                <rewrite>
                    <resource_rule_collection>My_Couponrule_Model_Resource_Rule_Collection</resource_rule_collection>
                </rewrite>
            </salesrule>
        </models>
    </global> 
```

但是，我已经仔细尝试了我可以推断出的每一种组合，但它们都没有奏效：

```
<salesrule_resource_rule><rewrite><collection>
<salesrule_resource><rewrite><rule_collection>
<salesrule_resource><rewrite><collection>  
<salesrule><rewrite><resource_collection>
<salesrule><rewrite><resource_rule_collection>
<salesrule><rewrite><rule_collection>
<salesrule_mysql4><rewrite><rule_collection>
<salesrule_mysql4_rule><rewrite><collection> 
```

注意：
1\. 我知道正在加载配置文件，我已经检查了 System->Configuration->Advanced
2\. 我进一步知道正在加载配置文件，因为我已经将加载的类输出到浏览器，并且我尝试覆盖其他类并看到它成功输出了正确的类
3\. 我知道我所做的每个更改都是通过我添加的另一个重写加载的（并且每次都修改）只是为了验证更改是否正确上传。
3\. 是的，我非常小心地确保使用正确匹配的结束标签关闭标签
4\. 缓存被禁用，因此文件未加载不是问题

请帮忙。我头发不多了...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T03:14:07.487

使用 Magento 1.6.1 测试，应该适用于所有版本（尽管资源模型的命名约定在最近的版本中发生了变化，因此请采取相应措施）。

首先，有两节课可以帮助您理解配置。

**第 1 课**

Magento 有模型。模型具有资源模型。资源模型执行加载模型对象的数据库/数据存储查询。

模型集合是第三种类型的东西。但是，由于模型集合查询数据库，因此决定模型集合也将是模型资源。这就是你使用的原因

```
Mage::getResourceModel('salesrule/resource_rule_collection'); 
```

实例化一个集合。当你使用

```
Mage::getModel('catalog/product')->getCollection(); 
```

Magento 实际上是在打电话

```
Mage::getResourceModel('catalog/product_collection'); 
```

在幕后。

**第 2 课**

您只能重写模型、助手和块。您不能直接重写资源模型。幸运的是，我们并没有走运。在另一个令人困惑的抽象中，Magento 的资源模型**实际上**就是模型本身。你打电话时

```
Mage::getResourceModel('salesrule/resource_rule_collection'); 
```

Magento 最终调用

```
Mage::getModel('salesrule_resource/resource_rule_collection') 
```

实例化资源模型类。如果您没有看到它，资源模型组`salesrule`将转换为模型组`salesrule_resource`。该值`salesrule_resource`是通过在模型节点`<resourceModel>`下查找节点得出的。`<salesrule>`

```
<salesrule>
    <class>Mage_SalesRule_Model</class>
    <resourceModel>salesrule_resource</resourceModel>
</salesrule> 
```

所以，这意味着你需要重写**模型**类`salesrule_resource/resource_rule_collection`。以下 XML 应该可以工作，替换`Packagename_Modulename_Model_Your_Class_Here`为您的类名。

```
<config>
    <global>
        <models>
            <salesrule_resource>
                <rewrite>     
                    <rule_collection>Packagename_Modulename_Model_Your_Class_Here</rule_collection>
                </rewrite>
            </salesrule_resource>
        </models> 
    </global>
</config> 
```

# sql-server - 从 2005 年到 2008 年需要我的 SQL Server Express

> ID：10233326
> 
> 赞同：-1
> 
> 时间：2012-04-19T17:18:05.703
> 
> 标签：sql-server

此时，我有一个`SQLEXPRESS`运行 SQL Server 2005 Express 的实例，还有一个`SQL2008`运行 SQL Server 2008 的实例。

我需要`SQLEXPRESS`在 SQL Server 2008 下拥有我的实例。

我该如何进行？升级？卸载 SQL Server 2005 Express + 重新安装？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:20:17.160

您不能更改实例的名称。您需要重新安装它，因为`SQLEXPRESS`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:14:43.910

几个想法：

1) 您可以使用安装程序进行就地升级。

2) 更慢但更少的停机时间：

*   备份所有数据库，将它们还原到另一台服务器，将所有内容指向该服务器。
*   卸载主实例，全新安装 2008。
*   将数据库逐个还原到 2008 实例 1，并将应用程序逐个指向该实例。

第二种方式需要更多的努力，但是停机时间很长，您需要更改连接字符串（即秒）

# clearcase - 在 ClearCase UCM 中创建的两个基线

> ID：10233327
> 
> 赞同：1
> 
> 时间：2012-04-19T17:18:07.110
> 
> 标签：clearcase, clearcase-ucm

我正在使用复合基线建立一个项目。当我创建要发送到“主线”项目的基线时，它总是会创建两个基线。一个叫“COMP_BL”，另一个叫“COMP_BL.####”

发生这种情况有原因吗？我可能有我的设置错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:56:04.500

不，你的设置是正确的。

它将始终按已更改的组件创建一个基线。

如果您的基于根的组件（带有文件的组件）发生了变化，那么它就有了一个基线。
这意味着您的无根组件（没有任何文件的组件，用于聚合其他组件）也将获得（复合）基线，以记录所述无根组件的依赖关系的变化。

有关说明，请参阅“[复合基线的最佳实践](http://www.ibm.com/developerworks/rational/library/5134.html)”。

如“[是否有批处理文件要应用并在 clearcase 中创建标签或基线](https://stackoverflow.com/questions/1597245/do-any-one-have-batch-file-to-apply-and-create-label-or-base-line-in-clearcase/1597297#1597297)”中所述，当您应用多个基线时，ClearCase：

*   重用同一个*标题*“ `COMP_BL`”
*   生成不同的ID“ `COMP_BL.####`”

该 ID 将是：

*   “ `COMP_BL`”（标题本身）用于获取基线的第一个组件（通常是无根组件，但不能保证）
*   " `COMP_BL.####`" 代表其他组件

# windows - cygwin - 文件复制到 UNC 共享

> ID：10233330
> 
> 赞同：8
> 
> 时间：2012-04-19T17:18:18.470
> 
> 标签：windows, oracle, cygwin, ksh, unc

首先，我对 CYGWIN 一无所知，所以请耐心等待...

我们的开发人员需要从我们的 DBA 那里获得一些文本转储。他们通过 CYGWIN 环境和 kornshell 在 Windows 上使用 Oracle。

**问题：**我们如何使用 kornshell/cygwin 将老式文本文件复制到标准 Windows 网络共享（UNC 地址）？

* * *

**注意：**我们讨论过一种解决方法，DBA 可以将文本文件放到本地临时文件夹中，然后设置 Windows 任务将文本文件复制/移动到 UNC 地址。我们想避免这种混乱。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-19T20:04:11.133

UNC 路径通过将`\`字符替换为字符来映射到 Cygwin 路径`/`。

例如，在 Windows 中显示为的文件

```
\\server\dir1\dir2\foo.txt 
```

在 Cygwin 中应显示为：

```
//server/dir1/dir2/foo.txt 
```

如果这不起作用（它应该），您还可以将驱动器号映射到 UNC 路径。例如，如果您映射`\\server\dir1`到`S:\`，那么相同的文件 ( `S:\dir2\foo.txt`) 应该在 Cygwin 中显示为`/cygdrive/s/dir2/foo.txt`.

简而言之，Cygwin 命令可以将具有 UNC 路径的目录视为普通目录。

见[https://cygwin.com/cygwin-ug-net/using.html#unc-paths](https://cygwin.com/cygwin-ug-net/using.html#unc-paths)

# c# - 如何改进拆分每第 n 个字符而不是切断单词

> ID：10233334
> 
> 赞同：0
> 
> 时间：2012-04-19T17:18:35.500
> 
> 标签：c#, .net, string

我有我创建的代码来做到这一点，但是我的问题是有一种方法可以改进我的代码。似乎有更好的方法来解决这个问题。

```
public static IEnumerable<string> SplitEvery(this string str, int chunkSize, bool splitAtSpaces)
    {
        var chars = str.ToCharArray();

        var i = 0;
        var currentString = string.Empty;

        var nextWord = false;

        while (i < chars.Length)
        {
            if (nextWord)
            {
                currentString = string.Empty;
                nextWord = false;
            }

            if (currentString.Length < chunkSize)
            {
                currentString += chars[i];
                if ((i + 1) == chars.Length)
                    yield return currentString;
                i++;
            }
            else
            {
                if (splitAtSpaces)
                {
                    var charAtEnd = currentString[currentString.Length - 1];

                    if (charAtEnd == ' ' || chars[i] == ' ')
                    {
                        nextWord = true;
                        yield return currentString;
                    }
                    else
                    {
                        var lastSpace = currentString.LastIndexOf(' ');
                        i = lastSpace + 1;
                        nextWord = true;
                        yield return currentString.Substring(0, i);
                    }
                }
                else
                {
                    nextWord = true;
                    yield return currentString;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:41:24.980

有一个更简单的方法。就像是。

```
int idx = 0;
while (idx < str.Length)
{
    int endIdx = idx + chunkSize;
    if (endIdx >= str.Length)
        endIdx = str.Length;
    else if (splitAtSpaces)
    {
        while (str[endIdx] != ' ')
            --endIdx;
    }
    yield return str.Substring(idx, endIdx - idx);
    idx = endIdx;
} 
```

这个想法是，如果需要，您可以向前跳块大小，然后向后工作到前一个空间。

请注意，此代码假定您不会有一个大于块大小的单词。它也会在多个空间的中间分裂。所以如果你有“... hello world”，你可能会得到一个以“hello”结尾的块。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-19T17:39:15.370

以下应该适用于所有情况，并且比您建议的解决方案更快。

```
 public static IEnumerable<string> SplitEvery(this string str, int chunkSize, bool splitAtSpaces)
    {
        if (splitAtSpaces)
        {
            return SplitEvery_AtSpace(str, chunkSize);
        }
        else
        {
            return SplitEvery_IgnoreSpace(str, chunkSize);
        }
    }

    public static IEnumerable<string> SplitEvery_AtSpace(string str, int chunkSize)
    {
        int lastStartPoint = 0,
            nextStartPoint = chunkSize;
        List<string> output = new List<string>();

        for (int i = 0; i < str.Length && nextStartPoint < str.Length; i++)
        {
            while (nextStartPoint > lastStartPoint + 1 && str[nextStartPoint - 1] != ' ')
            {
                nextStartPoint--;
            }

            if (nextStartPoint == lastStartPoint)   //If no space in line break
            {
                output.Add(str.Substring(lastStartPoint, chunkSize));
                nextStartPoint += chunkSize;
            }
            else
            {
                output.Add(str.Substring(lastStartPoint, nextStartPoint - lastStartPoint - 1)); //-1 skips space
            }

            //Prep for next loop
            lastStartPoint = nextStartPoint;
            nextStartPoint += chunkSize;
        }

        if (lastStartPoint < str.Length) { output.Add(str.Substring(lastStartPoint)); } //Add leftover

        return output;  //May want to convert to array if it will be accessed often.
    }

    public static IEnumerable<string> SplitEvery_IgnoreSpace(string str, int chunkSize)
    {
        int lastInserted = 0;
        List<string> output = new List<string>();

        for (int i = 0; i < str.Length && (lastInserted + chunkSize) < str.Length; i++)
        {
            output.Add(str.Substring(lastInserted, chunkSize));

            //Prep for next loop
            lastInserted += chunkSize;
        }

        if (lastInserted < str.Length) { output.Add(str.Substring(lastInserted)); } //Add leftover

        return output;  //May want to convert to array if it will be accessed often.
    } 
```

1.  在发布您要审查的代码时，如果您知道类型，请尽量不要使用 var。它使代码更难[阅读和调试](http://www.infoq.com/news/2008/05/CSharp-var)。
2.  在循环中连接到字符串通常是一个[坏](http://www.dotnetperls.com/stringbuilder-performance) [主意。](https://stackoverflow.com/questions/779051/string-concatenation-unsafe-in-c-need-to-use-stringbuilder)而是使用[System.Text.StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)。

**更新**：@payo 和@Alex
我认为您错过了我的观点，但感谢您指出您投反对票的原因。请允许我澄清和回应。

对于内置关键字（如 int、string、bool）的局部变量，将它们声明为 var 是没有意义的，因为您不会保存很多击键。
当然 var 有一些很好的用途，例如，变量是匿名的，类型名称很长（比如`GetResponseToSuggestForTodayTrimmedNoInputResults`甚至`ALongVarName`），或者你不知道变量的实际类型。

@payo 在某些情况下，我同意 var 可以更容易阅读，但它也不太明确。i 是 int、byte 还是 long？currentString 是字符串还是 StringBuilder？当然，如果代码在项目中，我们可以“转到定义”，但是当发布在网站上时，这不是一个选项。此外，如果变量在其定义之外的其他地方初始化怎么办？现在我必须去寻找它的初始化位置以确定发布者想说什么，或者创建一个新的 VS 项目并希望他们的代码示例不会花费太长时间来工作。结果我说“在发布您想要审查的代码时，如果您知道类型，请尽量不要使用 var。” 也许不是最准确的表述方式，但又快又容易。

@Alex您有权发表自己的意见，以我的经验，就阅读能力而言，您所使用的更多。如果你总是使用 var ，那么如果你想知道类型，你总是会向左看（并且不记得你做了什么并且不想等待工具提示）。当然，我确实对您的陈述表示异议“它有助于清理您的代码，如果您正确命名变量，那么 var 根本不应该限制可读性。” 因为这不仅不利于[编码对流（“不要依赖变量名来指定变量的类型。它可能不正确。”）](http://msdn.microsoft.com/en-us/library/ff926074.aspx)，您没有明确命名 nextWord，因为听起来您正在寻找单词（两边都有空格的字符串）。您在示例中使用 var （所有用途）实际上并没有增加可读性。大多数习惯使用 var 并想知道变量类型的人会本能地找到它的设置位置并尝试从中猜测类型，而不使用 var 的人会本能地转到变量定义来确定类型。此外，并非所有类型都可以通过初始化准确推断，尤其是从方法初始化时。

重要的是要注意[“在许多情况下，使用 var 是可选的，只是为了语法方便。但是，当使用匿名类型初始化变量时，如果需要访问对象的属性，则必须将变量声明为 var稍后。”](http://msdn.microsoft.com/en-us/library/bb384061.aspx) 还有[“使用这个关键字的目的是当你不知道变量的类型时。”](http://beyondrelational.com/modules/2/blogs/79/posts/11536/when-to-use-var-keyword-in-c.aspx)

[还有一个链接](http://richarddingwall.name/2008/06/21/csharps-var-keyword-jeff-atwood-gets-it-all-wrong/)

# android - 如何打开存储在 SD 卡上的 PSD 文件？

> ID：10233335
> 
> 赞同：1
> 
> 时间：2012-04-19T17:18:38.263
> 
> 标签：android

我正在开发一个应用程序。应用程序需要打开一个[PSD](http://en.wikipedia.org/wiki/Adobe_Photoshop#File_format)文件。

我能够打开所有其他类型的文件，例如[JPEG](http://en.wikipedia.org/wiki/JPEG)、文本、[PDF](http://en.wikipedia.org/wiki/Portable_Document_Format)等，但我无法打开 PSD 文件。

有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:34:34.210

第 1 步：找到一个能够在 Android 上查看 PSD 文件的应用程序。本主题与 Stack Overflow 无关。

步骤#2：尝试`startActivity()`使用`ACTION_VIEW` `Intent`适当的 MIME 类型。不幸的是，PSD 文件似乎有几种可能的 MIME 类型（`image/psd`、`image/photoshop`、`image/vnd.adobe.photoshop`、`image/x-photoshop`、`application/photoshop`等）。如果您找不到可行的方法，请联系该应用程序的开发人员以查看他们是否确实支持`ACTION_VIEW` `Intents`，因为他们可能不支持，如果支持，他们使用什么 MIME 类型。

# android - 如何使我的 'Location' != null 作为按钮中的条件语句？

> ID：10233338
> 
> 赞同：0
> 
> 时间：2012-04-19T17:18:42.833
> 
> 标签：android, android-mapview

我想在按钮上添加一个 onClicklistener；所以当我按下它时，它会为用户位置设置动画。但是，如果没有用户位置并且按下按钮，它会由于用户位置 = null 而崩溃。如何使它仅在不等于 null 时运行？

我试过了 -

```
private void myLocationButton() {
    MapView mp = (MapView) findViewById(R.id.mapView);
    final MapController mapController = mp.getController();
    final Button myLocationButton = (Button) findViewById(R.id.myLocationButton);
    myLocationButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (myLocationButton.isClickable()) {
                mapController.animateTo(myLocationOverlay.getMyLocation());
                mapController.setZoom(17);

            }

        }
    });

} 
```

这是一个很长的帖子，感谢您的充足时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:30:15.143

你做的几乎是对的。但是你必须得到一个新的`Location`对象，因为它必须`!= null`在你按下按钮的那一刻。我也怀疑您是否需要`isClickable()`检查，因为您刚刚被点击。

```
myLocationButton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        Location userLocation = myLocationOverlay.getMyLocation();
        if (myLocationButton.isClickable() && userLocation != null) {
            mapController.animateTo(userLocation);
            mapController.setZoom(17);
        }
    }
}); 
```

我在`userLocation`这里使用变量是因为

```
if (myLocationOverlay.getMyLocation() != null) {
    mapController.animateTo(myLocationOverlay.getMyLocation());
} 
```

仍然可以抛出 a `NullPointerException`，因为您在第二次调用时获得了新结果，`getMyLocation`并且可能会`null`再次出现。我应该是安全的，因为一旦它有了一个真实的位置，它`getMyLocation`可能永远不会变回。`null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:30:07.523

试试这个：

```
@Override
        public void onClick(View v) {
            if (myLocationButton.isClickable() && myLocationOverlay.getMyLocation() != null) {
                mapController.animateTo(myLocationOverlay.getMyLocation());
                mapController.setZoom(17);

            }

        }
    }); 
```

# jquery - 如何使用 jquery 清除下拉项

> ID：10233346
> 
> 赞同：0
> 
> 时间：2012-04-19T17:19:22.307
> 
> 标签：jquery, asp.net-mvc-3, razor, drop-down-menu

我正在使用asp.net mvc 3 razor引擎，当在下拉列表2中选择一个项目时，我在页面中有2个下拉列表1项目加载到下拉列表2中，并且有清除所有值的清除按钮。这里选择的项目被清除但项目加载到下拉列表 2 中没有，如何清除下拉列表 2 中所有加载的项目？下面是 dropdown2 的渲染 html

```
<td>                       
Work description                     
</td>
<div class="t-widget t-dropdown t-header" style="width: 220px; ">
<div class="t-dropdown-wrap t-state-default"><span class="t-input">&nbsp;</span>
<span class="t-select"><span class="t-icon t-arrow-down">select</span></span></div>
<input id="WorkDescriptionId" name="ViewModel.WorkDescriptionId" style="display:none" type="text" value="" /></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:25:47.983

`jQuery.empty()`将清除父级中的所有子元素。

[http://api.jquery.com/empty/](http://api.jquery.com/empty/)

# cocos2d-iphone - 如何获取box2d对象的当前移动速度

> ID：10233347
> 
> 赞同：3
> 
> 时间：2012-04-19T17:19:26.160
> 
> 标签：cocos2d-iphone, box2d

我对 b2body 施加力，但想知道有没有办法知道在 applyforce/applylinearimpulse 之后 b2body 的速度是多少？

```
b2Body* car;
b2Vec2 force = b2Vec2(0,100);
car->ApplyForce(force, car->GetPosition()); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T08:41:59.133

b2Vec2 vel = body->GetLinearVelocity();

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T18:56:00.297

对质心施加力后：

`v = F * t / m`. F - 力，m - 体重，t - 应用时间。我认为如果不使用阻尼，它将给出很好的近似值。

我不太确定冲动。但是，`imp = m * v`因此，通过对质心施加线性脉冲，您可以获得`imp/bodyMass`速度增量

# javascript - 阻止 Internet Explorer 将我的索引转换为 int

> ID：10233350
> 
> 赞同：1
> 
> 时间：2012-04-19T17:19:35.130
> 
> 标签：javascript, internet-explorer

我正在通过类似以下内容的表单进行索引：

```
var i = 0;
var s = new String( i+'.prop');
var v = document.formName[s].value; 
```

但我得到的实际上是：

```
document.formName[0].value 
```

看来我的索引值“0.prop”被强制转换为 int，仅在 Internet Explorer (8) 中

关于如何阻止它的任何想法？

更新：这是一个展示问题的[jsfiddle](http://jsfiddle.net/Vn7nv/)。应该返回 '111'，但它在 IE8 中返回 foo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:23:58.627

使用 toString() 方法：

```
var i = 0;
var s = i.toString() + '.prop';

typeof(s) === string // true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:26:59.323

找到了！根据这个[答案](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)NAME 属性必须以字母而不是数字开头...

所以调整你的html并使用

```
var i = 0;
var s = 'prop_'+i;
var v = document.formName[s].value; 
```

会工作（我也更新了小提琴）

[见小提琴](http://jsfiddle.net/KPEv3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:22:46.537

做

```
var s = new String(''+i+'.prop'); 
```

或者

```
var s = new String( i.toString()+'.prop'); 
```

# php - CodeIgniter 看不到来自 valum 的 ajax 文件上传器的参数

> ID：10233353
> 
> 赞同：0
> 
> 时间：2012-04-19T17:19:51.637
> 
> 标签：php, ajax, codeigniter, post, get

我正在使用带有 CodeIgniter 2.1.0 的 Valums AJAX 文件上传器。当我尝试将参数传递给我的 ajax 控制器时，似乎什么都没有传递。

```
function initializeAttachmentUploader(obj) {
    element = document.getElementById(obj);

    var uploader = new qq.FileUploader({
        multiple: true,
        element: element,
        action: '<?php echo site_url('ajax/attachment_upload'); ?>/' + $('#token').val(),
        debug: true,
        params: { test: 'dsfasdfasdfasdf' },
    });
} 
```

并在 ajax attachment_upload 函数中

```
$param = $this->input->get('test'); 
```

始终显示为 NULL。我正在使用 CodeIgniter，allow_get_array 是 TRUE。我也试过：

```
$param = $this->input->post('test'); 
```

没有错误，除了它只是 NULL。我在这里可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:45:29.890

您必须启用查询字符串才能使其工作。

```
$config['enable_query_strings'] = TRUE; 
```

从[文档](http://codeigniter.com/user_guide/general/urls.html)中：

> **请注意：**如果您使用查询字符串，则必须构建自己的 URL，而不是使用 URL 帮助程序（以及生成 URL 的其他帮助程序，如一些表单帮助程序），因为它们旨在处理基于分段的 URL。

# sql - 如何汇总帐户

> ID：10233358
> 
> 赞同：0
> 
> 时间：2012-04-19T17:20:19.997
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我有 3 个表：DimAccounts、DimTime 和 FactBudget。

DimAccounts 示例：

```
AccountKey  Accouncode  AccountType   AccountFrom   AccountTo 
1.10001     10001       S                  11401    27601
1.10002     10002       S                  11401    16501
1.11000     11000       S                  11401    11508
1.110001    110001      B                   NULL    NULL
1.110002    110002      B                   NULL    NULL
1.11400     11400       S                  11401    11408 
```

昏暗时间示例：

```
 TimeKey      FullDate
    20020102    2002-01-02
    20020103    2002-01-03
    20020104    2002-01-04 
```

事实预算示例：

```
TimeKey     AccountKey              Debit    Credit
20080523    1.110002                0.00    884.00
20080523    1.110001                0.00    4251.96
20100523    1.100002                229.40  0.00
20080523    1.100002                711.79  0.00
20090523    1.110002                0.00    711.79
20080523    1.110001                0.00    229.40
20040523    1.100002                0.00    15619.05 
```

在 FactBudget 中有许多只有 B 类型的账户。我需要计算账户类型为 S（总和）的借方和贷方总和。AccountFrom 和 AccountTo 列显示 B 类帐户从哪里开始求和 (AccountFrom ) 和从哪里结束 (AccountTo)。

我已经使用光标做出了解决方案....但是你知道这很糟糕:) 我认为在 FactBudget 中以某种方式对数据进行分组（因为 factbudget 中还有很多列和 600k 行）以及在搜索解决方案时（当我分组离开时）只有 60k 行）：

```
SELECT [TimeKey], 
       [AccountKey], 
       SUM([Debit]), 
       SUM([Credit]) 
FROM   [dbo].[FactBudget] 
GROUP  BY [TimeKey], 
          [AccountKey] 
```

那么，如何通过 TimeKey 和 AccountKey 获取 S Accounts Debit 和 Cred Sum？（AccountKey 数据类型为 nvarchar）

解决方案示例：

```
TimeKey     AccountKey  Debit    Credit
20080523    1.10002     0.00    2500
20080523    1.11000     0.00    8000
20080524    1.10002     900  0.00 
```

**实际上预算中没有 S 类型的帐户！！！！我们需要得到它（例如 1.11000 仅适用于日期 20080523）：**

```
select 
SUM(Debit), SUM(Credit)
from FactBudget
LEFT JOIN [DimAccounts]
ON [DimAccounts].[AccountKey] = FactBudget.[AccountKey]   
where CAST([DimAccounts].AccountCode AS INT) >=11401    
and CAST([DimAccounts].AccountCode AS INT) <= 11508
and FactBudget.Timekey = 20080523 
```

**但我需要每个 S 帐户借记和贷记总和按日期。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:29:33.863

```
SELECT a.TimeKey, a.AccountKey, SUM(a.Debit) AS 'DebitSum', SUM(a.Credit) AS 'CreditSum'
FROM FactBudget a
JOIN DimAccounts b on b.AccountKey = a.AccountKey
WHERE b.AccountType='S'
GROUP BY a.AccountKey, a.TimeKey 
```

这是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:01:54.923

据我所知，您需要加入`DimAccounts`自身以将B型帐户与其对应的S型帐户相关联，然后加入该行集`FactBudget`以最终获得数字。像这样的东西：

```
SELECT
  f.TimeKey,
  s.AccountKey,
  SUM(f.Debit) AS Debit,
  SUM(f.Credit) AS Credit
FROM DimAccounts s
  INNER JOIN DimAccounts b ON b.AccountCode BETWEEN s.AccountFrom AND s.AccountTo
  INNER JOIN FactBudget  f ON f.AccountKey = b.AccountKey
WHERE s.AccountType = 'S'
  AND b.AccountType = 'B'
GROUP BY
  f.TimeKey,
  s.AccountKey 
```

# iphone - 在 MapVIew 中出现错误 - 无效坐标 - 初学者

> ID：10233359
> 
> 赞同：0
> 
> 时间：2012-04-19T17:20:21.943
> 
> 标签：iphone, objective-c, mapkit

我有一个 2 标签应用程序。其中一个选项卡加载地图视图，它指向几个坐标（注释针点）。所有这些都可以正常工作。

但是，当我继续单击第一个选项卡和第二个选项卡时，我收到以下错误

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Invalid Coordinate -180.00000000, -180.00000000' 
```

我没有这样的坐标，但这只有在我不断单击选项卡时才会出现。我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-19T14:46:09.383

尝试使用**CLLocationCoordinate2DIsValid**属性。如果坐标正确或错误，它将返回 true。
例如：

```
if (CLLocationCoordinate2DIsValid(yourCLLocation2D)) {
    //coordinate is correct
} else {
    //wrong coordinate
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:45:41.000

I had the same problem when switching tabs in my app. I fixed the problem by validating the coordinate before assigning it to MKMapView. I did the validation with the following snippet:

```
if (-90.0f <= coordinate.latitude && coordinate.latitude <= 90.0f &&
    -180.0f <= coordinate.longitude && coordinate.longitude <= 180.0f)
{
   // assign the validated coordinate to MKMapView
} 
```

# sql - postgresql 可写公用表表达式并发

> ID：10233362
> 
> 赞同：0
> 
> 时间：2012-04-19T17:20:30.337
> 
> 标签：sql, postgresql, common-table-expression, postgresql-9.1, database-concurrency

我刚刚了解了在 postgres-9.1 中使用可写公用表表达式，特别是从这个站点。[http://vibhorkumar.wordpress.com/2011/10/26/upsertmerge-using-writable-cte-in-postgresql-9-1/](http://vibhorkumar.wordpress.com/2011/10/26/upsertmerge-using-writable-cte-in-postgresql-9-1/)

```
WITH upsert as
(update mytable2 m set sales=m.sales+d.sales, status=d.status from mytable d where m.pid=d.pid
  RETURNING m.*
)
insert into mytable2 select a.pid, a.sales,'NEW' from mytable a where a.pid not in (select b.pid from upsert b); 
```

我向一些同事提到了这一点，并被问及 postgres 在执行此类操作时使用的并发模型/安全性。我的第一个想法是`mytable`在语句的整个执行过程中被锁定，因此在所有情况下都应该是线程安全的。

这是一个正确的假设吗？我对 postgres 语句执行的内部并发模型知之甚少。但是，如果有人想深入了解他们想要的尽可能多的细节，那就太好了=]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:47:13.737

PostgreSQL 通过 MVCC 处理并发操作，因此基本的 CRUD 操作永远不会锁定。

事务将只看到在它开始之前已经提交的数据。虽然它正在运行，但它不会收到关于它之外发生的任何更改的通知，即它只看到自己的更改。

如果您需要确保没有其他进程并行更改数据，则需要设置显式锁定。

文档中有很好的阅读：[http ://www.postgresql.org/docs/current/static/mvcc-intro.html](http://www.postgresql.org/docs/current/static/mvcc-intro.html)

# web-services - 在检索症状列表时使用 Web 服务连接到数据库

> ID：10233363
> 
> 赞同：1
> 
> 时间：2012-04-19T17:20:37.470
> 
> 标签：web-services

我只是试图从数据库中读取所有症状并将它们存储在一个列表中以供 Web 服务客户端使用。症状包含：symbolID（整数）和症状名称（字符串）。

如何将包含症状 ID 和名称的症状列表返回给 Web 服务客户端。

尽管我似乎无法在 Web 服务中定义症状，但仍采用以下代码。任何帮助将不胜感激，谢谢。

```
@WebService(serviceName = "MyWebService")
public class MyWebService {

/**
 * Web service operation
 */
@WebMethod(operationName = "getAllSym")
public String getAllSym() {
    //TODO write your implementation code here:

Connection con;
Statement ps;
ResultSet rs;    
List allSymptoms = new ArrayList(); 

int i = 0;
try
{
    Class.forName("com.mysql.jdbc.Driver");
    con = DriverManager.getConnection(...);
    ps = con.createStatement();
    rs = ps.executeQuery("select * from symptoms");
    while (rs.next()) {
        allSymptoms.add(new Symptom(rs.getString(1), rs.getString(2)));
        i++;
        }
}

catch (Exception e)
{
    System.out.println("Error Data : " + e.getMessage());
}

return allSymptoms;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:54:10.447

我不是 Java 专家，但为什么不将方法的返回类型更改为`List`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:25:56.793

如果您使用 Java 并希望以 json 格式返回对象，我会推荐 Gson API，一个由 google 制作的 Json 解析器。它看起来像这样：

```
return new Gson().toJson(allSymptoms); 
```

# share - 指定将 URL 粘贴到 LinkedIn 时填充框的信息

> ID：10233364
> 
> 赞同：0
> 
> 时间：2012-04-19T17:20:42.710
> 
> 标签：share, linkedin

当我将 URL 粘贴到“您的网络应该知道什么？” 框（类似于 Facebook 的状态框），它从我的站点中提取数据，并用标题、URL 和一些文本填充下面的框。

但是，它所提取的文本来自我的正确事件轨道，而不是主要文章。

有没有办法指定或让它知道你认为它应该提取什么信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:47:51.113

LinkedIn 还支持 Facebook 使用的 Open Graph 标签的子集，以提供有关页面的元数据。这记录在这里： [https ://developer.linkedin.com/documents/setting-display-tags-shares](https://developer.linkedin.com/documents/setting-display-tags-shares)

但是请注意，LinkedIn 抓取工具会在共享页面时缓存页面数据。它应该每周重新抓取页面以查找缓存中的更多信息，但重新抓取目前（截至 2012 年 4 月下旬）无法正常工作 - 这意味着您需要更改页面名称或尝试使用虚假查询参数进行缓存破坏以使其重新读取您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:32:01.090

它似乎从`<h1>`页面上拉出标题。

最初它是从页面上的**最后一个** `<h1>`提取的——当我删除它时，它从页面上的第一个检索**标题** `<h1>`。

这些都不正确，所以我继续删除`<h1>`标签，直到只剩下文章的实际标题（**无论如何它应该是这样**），并且它起作用了。

进行此更改后，它提取了正确的标题和文本（未包含在紧随我的`<h1>`文章标题之后的标题标签中的第一个文本位）。

# javascript - 执行ajax调用返回错误时从jquery for循环中断

> ID：10233374
> 
> 赞同：0
> 
> 时间：2012-04-19T17:21:30.747
> 
> 标签：javascript, jquery

看看下面的代码。问题很简单，如果方法 findUserInfo ajax 代码返回错误，我该如何打破这个 for 循环。简而言之，只要我愿意，我怎样才能摆脱这个 for 循环？是因为ajax调用是异步的吗？

```
 jQuery.each(d, function() {
    findUserInfo(this);
 });

function findUserInfo(userID){

var req = $.ajax({
url: "http://twitter.com/users/show.json?suppress_response_codes&id=xx!5@x!!x",
dataType : "jsonp"

});

req.success(function(msg) {
    console.log('Yes! Success!');

});

req.error(function(msg) {
    console.log('Error');
});

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:29:33.770

是的，jQuery.ajax 是异步的，所以你需要使用类似的东西：

```
function findUserInfos(datas){
  var userID=datas.shift(); //remove and return the first element

  var req = $.ajax({
    url: "http://twitter.com/users/show.json?suppress_response_codes&id=xx!5@x!!x",
    dataType : "jsonp"
  });

  req.success(function(msg) {
    console.log('Yes! Success!');
    findUserInfos(datas)
  });

  req.error(function(msg) {
    console.log('Error');
  });
}   

findUserInfos(d); 
```

一旦出现错误，它就会崩溃，因为我们只在成功中继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:36:33.100

设置 async:false 是一个糟糕的主意。它会导致浏览器在进行 ajax 调用时挂起。 [Frame.js](https://github.com/bishopZ/Frame.js)旨在解决以下问题：

```
jQuery.each(d, function() {
    findUserInfo(this);
});

Frame.useTimeout = false; // turn off Frame's error recovery

function findUserInfo(userID){

    Frame(function(next){

        var req = $.ajax({
        url: "http://twitter.com/users/show.json?suppress_response_codes&id=xx!5@x!!x",
        dataType : "jsonp"

        });

        req.success(function(msg) {
            console.log('Yes! Success!');
            next();
        });

        req.error(function(msg) {
            console.log('Error');
            // don't call next and Frame will stop
        });

    });

}  
Frame.init(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:30:49.753

要跳出循环，返回 false

如果您在错误处理程序中抛出错误：

```
throw 'Error: ' + userID; 
```

然后你可以写

```
jQuery.each(d, function() {
    try {
        findUserInfo(this);
    } catch(err) {
      return false;
    }
 }); 
```

编辑：正如其他人所评论的那样，最好从您的成功处理程序返回 true，从您的错误处理程序返回 false，然后调用 return findUserInfo(this); 循环内。当然，如果您同步进行 ajax 调用，您可能会冻结浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T17:33:23.750

如何将所有 ID 存储为一个数组，将它们传输到服务器，然后检查给定的结果！？这样可以节省很多请求。您可以将 ID 作为数组收集并通过 POST 传输它们`["id1","id2",...].join(",")`

或者您提前获取所有内容并在获取后开始循环......

正如您已经说过的那样，由于异步性质，不可能打破循环... async: false; 也可以提供帮助，但它会阻止 UI 更新（这将使浏览器由于许多请求而忙碌）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-19T17:27:30.823

您可以通过为 ajax 调用设置 async: false 来使 ajax 调用同步。您已经拥有了捕获所有异常的错误函数。所以我相信应该这样做

```
 $.ajax({
            type: "GET",
            url: "/abc/GetNodesById",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: { "nodeId": '' },
            async: false,
            cache: false,
            success: function (data) {
              //Do Work
            }
            error : function(jqXHR, textStatus, errorThrown){
                // Handle Error
                // Return False 
            }
      }); 
```

# iphone - 如何创建当用户在 iPhone 上滑动手指时激活的按钮

> ID：10233381
> 
> 赞同：3
> 
> 时间：2012-04-19T17:21:55.670
> 
> 标签：iphone, button, interface-builder, slide, ibaction

我正在编写一个具有类似钢琴界面的 iPhone 应用程序。向用户展示了许多大按钮，它们之间没有空格。目前我已经在 Interface Builder 中创建了 IBActions，方法是用鼠标右键将按钮拖到适当的视图控制器接口文件中。这将创建一个方法：

```
-(IBAction) buttonTouchDown: (id) sender 
```

在这个函数的主体中，我已经包含了响应这个动作的代码。

这在我点击按钮时有效，但是当我将手指拖过多个按钮时，只有第一个按钮会激活。当我将手指拖到按钮上时，我需要在手指放在按钮上时激活第一个按钮。然后，当我的手指离开按钮并进入第二个按钮时，我需要第二个来激活和第一个去激活。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:40:48.690

您还可以使用函数 touchesBegan。使用此功能，您可以轻松说出如果按下/触摸一个按钮（或多个按钮）会发生什么。

代码应如下所示：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
        UITouch *touch = [[event touchesForView:self.view] anyObject];

    if(touch == YourButton){
         //so some stuff after touching the button

    }
} 
```

不要忘记像 IBOutlet UIButton * MyButton; 这样在 .h 中删除按钮；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:26:26.320

我还没有尝试过，但尝试将新添加的手势识别器添加到您的按钮。选择滑动方向（Right/Left）并相应实现[button setEnabled]功能。就像滑动发生时一样，您将按钮设置为启用，将所有其他按钮设置为禁用。

和平

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:26:57.047

按钮不是要走的路。UIViews 有各种可以更好地工作的触摸方法。或者，使用自定义手势识别器。

# xpages - 在中使用 attrs（属性列表）

> ID：10233387
> 
> 赞同：2
> 
> 时间：2012-04-19T17:22:19.093
> 
> 标签：xpages

我正在尝试使用`attrs`内部`<xp:viewColumn>`。下面是我的代码中的一个小片段。

```
<xp:viewPanel rows="5" id="viewPanel1" var="rowDocument">
  <xp:this.facets>
    <xp:pager partialRefresh="true" layout="Previous Group Next" xp:key="headerPager" id="pager1"></xp:pager>
  </xp:this.facets>
  <xp:this.data>
    <xp:dominoView var="view1" viewName="MyView"></xp:dominoView>
  </xp:this.data>
  <xp:viewColumn columnName="$22" id="viewColumn1">
    <xp:this.attrs>
      <xp:attr name="draggable" value="true"></xp:attr>
      <xp:attr name="onDragStart">
        <xp:this.value><![CDATA[dragIt(event, "SOME VALUE");]]></xp:this.value>
      </xp:attr>
    </xp:this.attrs>
    <xp:viewColumnHeader value="Name" id="viewColumnHeader1"></xp:viewColumnHeader>
  </xp:viewColumn>
</xp:viewPanel> 
```

基本上我正在添加`draggable`属性以使用拖放功能。但是生成的 HTML 不会将此属性添加到为视图数据生成的`<td>`或标记中。`<span>`我生成的 HTML 如下所示：

```
<table id="view:_id1:viewPanel1" class="xspDataTable">
  <thead>
    <tr>
      <th scope="col">
        <div class="xspPanelViewColumnHeader"><span><span id="view:_id1:viewPanel1:viewColumn1:__internal_header_title_id" class="xspPanelViewColumnHeader">Name</span></span></div>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="xspColumnViewEnd"><span id="view:_id1:viewPanel1:0:viewColumn1:_internalViewText" class="xspTextViewColumn">Data 1</span></td>
    </tr>
    <tr>
      <td class="xspColumnViewEnd"><span id="view:_id1:viewPanel1:1:viewColumn1:_internalViewText" class="xspTextViewColumn">Data 2</span></td>
    </tr>
    ..........
  </tbody>
</table> 
```

为什么不将属性添加到单个行数据？有没有其他方法可以做到这一点？

**更新：**如果我添加`attrs`到`<xp:viewColumnHeader>`然后生成的 HTML 代码显示附加属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:13:49.653

如果您想对生成的输出进行更多（或全部）控制，则最好使用重复控件而不是 viewPanel：

```
<xp:this.data>
    <xp:dominoView var="view2" viewName="MyView"></xp:dominoView>
</xp:this.data>

<xp:repeat id="repeat1" rows="5" value="#{view2}" var="viewRow">

    <xp:this.facets>
        <xp:text xp:key="header" disableTheme="true" escape="false">
            <xp:this.value><![CDATA[<table><tbody>]]></xp:this.value>
        </xp:text>
        <xp:text xp:key="footer" disableTheme="true" escape="false">
            <xp:this.value><![CDATA[</tbody></table>]]></xp:this.value>
        </xp:text>
    </xp:this.facets>

    <tr>
        <xp:text escape="false" tagName="td" value="#{viewRow.$22}">
            <xp:this.attrs>
                <xp:attr name="draggable" value="true"></xp:attr>
                <xp:attr name="onDragStart">
                    <xp:this.value><![CDATA[dragIt(event, "SOME VALUE");]]></xp:this.value>
                </xp:attr>
            </xp:this.attrs>
        </xp:text>
    </tr>

</xp:repeat> 
```

# simulator - 在 xcode 4.3 的 ios 模拟器中哪里可以找到应用程序位置？

> ID：10233397
> 
> 赞同：1
> 
> 时间：2012-04-19T17:23:01.123
> 
> 标签：simulator, xcode4.3

我正在尝试将自定义应用程序放在模拟器的 xcode4.3 应用程序文件夹中，有人知道我们自己编写的应用程序的这个应用程序文件夹在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:10:53.727

我自己解决了这个问题。它位于 xocde/contents/developer/platforms/iphonesimulator.platform/developer/application‌​ns

# html - CSS - 如何用渐变背景设置圆形区域的样式？

> ID：10233398
> 
> 赞同：0
> 
> 时间：2012-04-19T17:23:10.243
> 
> 标签：html, css, background

![在此处输入图像描述](../Images/0a20cd894d46b56a9ecaac9c2589dd92.png)

我想请教您的建议，如何使用 CSS 为上面的图像背景设置样式，最佳实践是什么。

我的设计师得到了一个布局，这是一个背景 - 从银色到白色（从上到下）有一个渐变，与边框相同。

左上角和右上角是圆角的（就像 3px）。

我试图找到最有效的方法，如何编码这个东西，但不幸的是仍然找不到最好的方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:26:42.430

在您的元素上使用 css：

```
.gradient-bg {
   /* fallback/image non-cover color */
   background-color: /*start color*/; 

   /* fallback image */
   background-image: url(images/fallback-gradient.png); 

  /* Safari 4+, Chrome 1-9 */
  background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(/*start color*/), to(/*end color*/));

  /* Safari 5.1+, Mobile Safari, Chrome 10+ */
  background-image: -webkit-linear-gradient(top, /*start color*/, /*end color*/); 

  /* Firefox 3.6+ */
  background-image: -moz-linear-gradient(top, /*start color*/, /*end color*/);

  /* IE 10+ */
  background-image: -ms-linear-gradient(top, /*start color*/, /*end color*/);

  /* Opera 11.10+ */
  background-image: -o-linear-gradient(top, /*start color*/, /*end color*/);

  -moz-border-radius-topleft: /*pixel radius*/;
  -moz-border-radius-topright:/*pixel radius*/;

  -webkit-border-top-left-radius: /*pixel radius*/;
  -webkit-border-top-right-radius: /*pixel radius*/;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:33:19.603

我最喜欢的 CSS3 样式是[CSS3Please](http://css3please.com)。他们使用如下类：

```
.box_round {
  -webkit-border-radius: 3px; /* Saf3-4, iOS 1-3.2, Android ≤1.6 */
     -moz-border-radius: 3px; /* FF1-3.6 */
          border-radius: 3px; /* Opera 10.5, IE9, Saf5, Chrome, FF4, iOS 4, Android 2.1+ */

  /* useful if you don't want a bg color from leaking outside the border: */
  -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box;
}

.box_gradient {
  background-color: #444444;
  background-image: -webkit-gradient(linear, left top, left bottom, from(#444444), to(#999999)); /* Saf4+, Chrome */
  background-image: -webkit-linear-gradient(top, #444444, #999999); /* Chrome 10+, Saf5.1+, iOS 5+ */
  background-image:    -moz-linear-gradient(top, #444444, #999999); /* FF3.6 */
  background-image:     -ms-linear-gradient(top, #444444, #999999); /* IE10 */
  background-image:      -o-linear-gradient(top, #444444, #999999); /* Opera 11.10+ */
  background-image:         linear-gradient(to bottom, #444444, #999999);
} 
```

* * *

根据评论中的渐变边框问题，您可以改用 box-shadow 来模拟边框：

```
.box_shadow {
  -webkit-box-shadow: 0px 0px 4px 0px #ffffff; /* Saf3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
     -moz-box-shadow: 0px 0px 4px 0px #ffffff; /* FF3.5 - 3.6 */
          box-shadow: 0px 0px 4px 0px #ffffff; /* Opera 10.5, IE9, FF4+, Chrome 6+, iOS 5 */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:40:29.237

您需要使用边界半径规则。[您可以在w3c](http://www.w3.org/TR/css3-background/#the-border-radius)了解它。

要查看其使用示例，请参阅[http://jsbin.com/aresif/edit#html,live](http://jsbin.com/aresif/edit#html,live)。随意玩弄它。

```
div.someClassName {
   background-image: url("YourImageGoesHere.jpg");
   background-repeat: repeat-x;
   border: 1px solid red;
   border-radius: 1em 1em 0 0;
} 
```

**轻微优化**

该图像似乎是一个简单的垂直渐变。让它像现在这样宽是没有意义的，因为在 CSS 中，您可以使用 background-repeat 规则重复背景图像。[你可以在w3c](http://www.w3.org/wiki/CSS/Properties/background-repeat)阅读它。我首先将该图像更改为 1px 宽的图像。这将使您的页面加载速度稍快一些，因为浏览器不需要下载更大的图像。

# c# - 如何获得微星版本？

> ID：10233400
> 
> 赞同：8
> 
> 时间：2012-04-19T17:23:16.783
> 
> 标签：c#, .net, visual-studio-2010

我正在尝试使用教程*[从 MSI 获取版本而不安装它](http://www.codeproject.com/Articles/31021/Getting-version-from-MSI-without-installing-it)*的代码，但是当我尝试将“msi.dll”添加到 Visual Studio 2010 作为参考时，我收到了这个错误。

> 无法加载文件或程序集“msi.dll”或其依赖项之一。该模块应包含程序集清单。
> 
> 此文件可能不是托管程序集

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-19T18:25:41.727

使用来自 Wix 项目的部署工具基金会 (DTF) 的“Microsoft.Deployment.WindowsInstaller.dll”。DTF 为 msi.dll 的大部分内容提供了托管包装器。Wix 还提供有用的文档。

在此处使用 DTF 是我在 C# 中访问 msi 版本号的方式

```
using Microsoft.Deployment.WindowsInstaller;

namespace Msi.Tables
{
    public class PropertyTable
    {
        public static string Get(string msi, string name)
        {
            using (Database db = new Database(msi))
            {
                return db.ExecuteScalar("SELECT `Value` FROM `Property` WHERE `Property` = '{0}'", name) as string;
            }
        }
        public static void Set(string msi, string name, string value)
        {
            using (Database db = new Database(msi, DatabaseOpenMode.Direct))
            {
                db.Execute("UPDATE `Property` SET `Value` = '{0}' WHERE `Property` = '{1}'", value, name);
            }
        }
    }
} 
```

然后从我的应用程序

```
string msiVersion = PropertyTable.Get("MyInstall.msi", "ProductVersion"); 
```

您可以使用 Orca 查看 msi 表。MSDN 提供有关[属性表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370908%28v=vs.85%29.aspx)的文档。MSDN 中还提供了[有关 Windows Installer 的 SQL 语法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372021%28v=vs.85%29.aspx)的详细信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T17:34:48.020

![在此处输入图像描述](../Images/0b0640e22d0db3c080fa9d7332050c12.png)

在 32 位机器上注册汇编

```
REGSVR32 MSI.DLL 
```

在 64 位机器上注册汇编

```
cd \windows\syswow64 regsvr32 C:\WINDOWS\system32\msi.dll 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:31:04.413

来自代码项目：

> 要访问版本号或其他与产品相关的东西，我们需要在 Visual Studio .NET 中有 DLL 引用。DLL 名称：msi.dll（存在于 system32 中）。

我认为您应该在解决方案资源管理器中添加对您项目的引用（右键单击 SE 中的引用 -> 添加引用 -> 然后浏览到 system32 目录中的 msi.dll）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-25T16:22:54.770

添加`system.management`到引用并包含命名空间。

```
var searcher = new ManagementObjectSearcher("SELECT * FROM Win32_Product where Name LIKE '%Your MSI Name%'");

foreach (ManagementObject obj in searcher.Get())
{
  var version = obj["Version"];                
} 
```

这将为您提供控制面板中安装的任何软件的版本。

# javascript - javascript日期和python日期时间对象

> ID：10233401
> 
> 赞同：1
> 
> 时间：2012-04-19T17:23:18.080
> 
> 标签：javascript, python, datetime

在javascript控制台中，我试过这个

```
d=new Date()
t=d.getTime() 
```

当我打印 t 时，它给了

```
>>1334855220112 
```

根据文档，它必须是`the number of milliseconds since 1970/01/01`

在 python 中，我创建了一个`datetime.datetime`对象

```
nowdtime=datetime.datetime.today()
print str(int(nowdtime.strftime("%s"))*1000) 
```

这给出了结果：

```
'1334855221000' 
```

这个值看起来非常接近我从 javascript 控制台得到的结果。

nowdtime 的值是

```
datetime.datetime(2012, 4, 19, 22, 37, 1, 866262) 
```

我的疑问是为什么`nowdtime.strftime("%s")`返回纪元以来的秒数？

如果我给 `nowdtime.strftime("%H")`，它只会返回`22`根据 24 小时制的小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:43:28.690

`%s`必须是某种特定于平台的（即，未在 http://docs.python.org/library/time.html#time.strftime 中记录）[指令](http://docs.python.org/library/time.html#time.strftime)：

> 某些平台可能支持其他指令，但只有此处列出的指令具有 ANSI C 标准化的含义。

即 Win7 Python 2.6.6 iPython 控制台：

```
import datetime
d = datetime.datetime(2012, 4, 19, 22, 37, 1, 866262)
d.strftime("%s") # gives: '' 
```

我不确定这是否回答了您的问题，因为我不确定您的问题是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T08:50:34.713

您也可以只使用 time 模块中的 time 方法`time.time()`来获取一个浮点数，该浮点数表示自纪元以来的时间（以秒为单位）。

# c# - 如何使用 Moq 对该操作进行单元测试？

> ID：10233402
> 
> 赞同：0
> 
> 时间：2012-04-19T17:23:18.343
> 
> 标签：c#, asp.net-mvc, moq

**这个动作做了几件事，但我不知道从哪里开始起订量，这里的新手。**

```
 [Authorization.AppAuthorize]
    public ActionResult Form()
    {
        // Create a new Supplier request form
        StoreRequestViewModel requestForm = new StoreRequestViewModel();
        requestForm.OwnerGuid = Guid.NewGuid();

        // Keep in mind the request form ids
        this.Session[requestForm.OwnerSessionCacheKey] = requestForm as IRequestFormViewModel;

        SetupContext();

        return View("IndexForm", requestForm);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:26:58.467

首先，您需要模拟`ControllerContext`这个控制器实例。这使您可以设置所需的容器`Session`。

除此之外，假设没有做任何不愉快的事情，代码片段已经非常可测试`SetupContext`。

您只需将`ActionResult`、 转换为`ViewResult`，然后检查`ViewResult.ViewData.Model`属性（转换为`StoreRequestViewModel`）并测试属性。

# javascript - Javascript 未在 dojox.layout.ContentPane 中触发

> ID：10233414
> 
> 赞同：1
> 
> 时间：2012-04-19T17:24:27.480
> 
> 标签：javascript, dojo

我在 Dojo 中有一个窗格，我在其中使用 dojox.layout.ContentPane。这样做的原因是因为在访问选项卡时我需要一些 javascript 来触发。为了简单起见，我只想弹出一个警报，提示该选项卡已被单击。

我的javascript函数在下面，它在页面的顶部。（我实际上要使用的 javascript 有点复杂，它将在单击的选项卡中使用另一个选项卡中的值设置 innerHTML div）。

```
function onclicktest(){
   alert('Dates have been clicked');
} 
```

我的HTML如下......

```
<div data-dojo-type="dojox.layout.ContentPane" executeScripts="true" data-dojo-props="title: 'Dates'" class="tabBox claro">
<script type="dojo/method" event="onLoad">
onclicktest();
</script> 
```

What I have noticed about this is when I reload the page the javascript won't fire at all when the dojox.layout.ContentPane tab is selected.

关于我如何解决这个问题的任何想法？一旦我找到答案，如果没有其他人有，我会更新。非常感谢！珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:01:50.430

显然，我们服务器上的 dojo 版本不是 1.7，因为如果是这样的话，那就太简单了。关键是使用dojo 1.7 和onShow 功能。这解决了它....

```
<div data-dojo-type="dojox.layout.ContentPane" executeScripts="true" data-dojo-props="title: 'Dates'" class="tabBox claro" onShow="onclickTest()"> 
```

作品！就这样。

# oracle - RA-00904 无效标识符错误，即使列名存在

> ID：10233417
> 
> 赞同：0
> 
> 时间：2012-04-19T17:24:41.010
> 
> 标签：oracle, oracle10g

我在 sqldeveloper 中运行 oracle 查询：

```
merge into invoices c using (select CUSTOMER_ID, INVOICE_NUMBER, INVOICE_DATE from dual where INVOICE_NUMBER = '123'
and CUSTOMER_ID = '456' and INVOICE_DATE = '19-APR-12') cd
on (c.INVOICE_NUMBER = cd.INVOICE_NUMBER)
  when not matched then
        insert (c.CUSTOMER_ID, c.INVOICE_NUMBER, c.INVOICE_DATE)
        values ('987', '654','179-APR-12') 
```

我不断收到 RA-00904 INVOICE_DATE 列的 RA-00904 无效标识符，即使该列存在。我已经通过运行 describe invoices 命令进行了验证，然后实际复制了列名：

```
describe invoices;
Name             
----------------
CUSTOMER_ID      
INVOICE_NUMBER   
INVOICE_DATE 
```

这里发生了什么？

解析度

* * *

瓦迪姆和贾斯汀是正确的。我通过用表名替换 dual 解决了这个问题：

```
merge into invoices c using (select CUSTOMER_ID, INVOICE_NUMBER, INVOICE_DATE from invoices where INVOICE_NUMBER = '123'
    and CUSTOMER_ID = '456' and INVOICE_DATE = '19-APR-12') cd
    on (c.INVOICE_NUMBER = cd.INVOICE_NUMBER)
      when not matched then
            insert (c.CUSTOMER_ID, c.INVOICE_NUMBER, c.INVOICE_DATE)
            values ('987', '654','179-APR-12') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:36:04.327

在该`USING`子句中，您正在执行来自 table`SELECT`的列。该表只有一列，，因此错误。`CUSTOMER_ID, INVOICE_NUMBER, INVOICE_DATE``DUAL``DUMMY`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:36:22.770

问题似乎与您的`USING`子句中的查询有关。 `CUSTOMER_ID`, `INVOICE_NUMBER`, 和`INVOICE_DATE`都是无效的标识符，因为它们都不存在于`DUAL`表中。

```
select CUSTOMER_ID, INVOICE_NUMBER, INVOICE_DATE 
  from dual 
 where INVOICE_NUMBER = '123'
   and CUSTOMER_ID = '456' 
   and INVOICE_DATE = '19-APR-12' 
```

不幸的是，对我来说如何解决这个问题并不明显，因为你想要完成的事情并不明显。

# ruby-on-rails - 使用 ActiveRecord 高效生成报告

> ID：10233422
> 
> 赞同：0
> 
> 时间：2012-04-19T17:25:03.113
> 
> 标签：ruby-on-rails, activerecord

我们需要生成报告来提取大量数据、运行一些计算并将它们作为更大表格的一部分输出。做到这一点并不难。但是，使现有方法可以使用而不生成 1000 条 SQL 查询要困难得多。

例如，我可能有一个`Account`具有如下方法的类：

```
def balance_at(time=Time.now)
  payments_out = self.payments.where("created_at <= ?",time).sum("amount")
  payments_in  = self.payments_on_account.where("created_at <= ?",time).sum("amount")
  payments_in - payments_out
end 
```

这可用于在月初和月底获取帐户余额。它工作得很好。

但是，如果我想要一张包含`Account`月初和月底所有余额的表格，事情就会变得很愚蠢。例如：

```
Account.includes(:payments, :payments_on_account) 
```

如果我想纯粹在 Ruby 中处理这一切，将获得我需要的所有数据，但是我的好小方法`balance_at`并不能在 Ruby 中完成所有的数字处理（这对于个别情况来说会很慢）。

我可以用 Ruby 和 SQL 中的东西来解决它，具体取决于缓存的内容，如下所示：

```
def balance_at(time=Time.now)
  payments_out, payments_in = [payments, payments_on_account].map{|payments|
    if payments.loaded?
      payments.find_all{|p| p.created_at < time }.inject(0){|a,p| p.amount + a }
    else
      payments.where("created_at <= ?",time).sum("amount")
    end
  }
  payments_in - payments_out
end 
```

但是，这也不是很容易阅读或易于测试。

你会怎么解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:55:50.867

假设您有 1000 个帐户，我的第一个问题是您真的需要一次显示所有帐户吗？这对用户真的有用吗？

如果没有，那么您可以继续使用第一种方法 - 只需将每页的帐户数限制在可接受的水平。每个函数调用您仍将执行两个查询，但它是可测试且可靠的。

如果您正在为报告打印输出呈现页面，那么简单地向用户解释它可能需要一些时间。

我了解您需要更快的解决方案，但有时更快不一定对用户更友好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:21:50.560

我参与了一些需要报告的项目。Web 应用程序堆栈不是进行报告的最佳场所，但开源报告选项似乎相当有限。但并不是每个组织都可以使用 SSRS 或 Crystal，根据我的经验，这些产品很痛苦，并且引入了不必要的问题。

我正在使用视图来完成这些工作。SQL 是为分组和聚合数据而设计的，它比 ruby​​ 更有能力处理这些东西。但是，大多数情况下，视图将在运行中执行，因此您不会在这里获得性能提升。理想情况下，在获得基本实现之后，您可以设置一些 cron 任务或预先计算数据的方法。如果您的报告将在白天经常被访问，您将需要一个专用的报告数据库。如果报告必须有实时数据，您将需要设置复制。

我知道，在 Ruby/Rails 中弄乱 SQL 是一件很麻烦的事情，而且不受欢迎。因此，我编写了一个名为 Skiima 的 gem，它可以帮助您管理项目中可能存在的无关 SQL 对象。并且通过将它们与您的迁移一起加载，测试它们变得更加容易。

[http://github.com/dcunited001/skiima](http://github.com/dcunited001/skiima)

除此之外，这就是我一直在做的事情：

```
class AccountsReport < ActiveModel
  attr_accessor :items
  def initialize(attr = {})
    # read in params, set attrs
  end

  def execute
    get_report_items
    group_report_items
    summarize_report_groups # if this needs to occur outside of sql
  end
end

class AccoutsReportItem < ActiveRecord::Base
  # you can hook into a view here, you will want the view to return an id col
  set_table_name :view_accounts_report_items
end

# yay for arel and activerecord methods.  
# you can even set up relationships on these.  use sparingly.
# AccountsReportItem.where(:blah => 'balah') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:50:58.547

最好的选择，假设您留在 Rails 中（而不是其他工具），只需使用 find_by_sql()。

它肯定会很丑陋，但它会是*可读的*——而且不会比原始 SQL 更丑陋。

我已经在许多 Rails 应用程序中工作，其中“Ruby 中的计算”被替换为性能更高的 find_by_sql 专门用于报告。总感觉有点脏，但我也喜欢用一些像样的 SQL 来获取 500 万份报告并让它们在 30 秒内运行。

# iphone - performSegueWithIdentifier 不起作用

> ID：10233424
> 
> 赞同：8
> 
> 时间：2012-04-19T17:25:12.063
> 
> 标签：iphone, ios5, xcode4.3, segue, uistoryboard

我的主视图控制器位于导航控制器中，它符合`EditViewControllerDelegate`协议。这是我需要以模态方式呈现的两个视图控制器的代表。

```
@interface EditViewController : UIViewController
@property (nonatomic) id <EditViewControllerDelegate> delegate;
@end

@interface EditSomethingViewController : EditViewController
@end

@interface EditSomethingElseViewController : EditViewController
@end 
```

在一种 `editViewController:(EditViewController *)evc didFinishEditing:(Something *) something` 方法中，我首先获取所需的数据，然后关闭`evc`并调用

```
[self performSegueWithIdentifier:@"My Segue" sender:self]; 
```

“我的 Segue”是在 Xcode 中定义的，并且标识符在代码和 Xcode 中都是相同的（我试图更改它只是为了查看它是否被调用并引发异常）

当我将“My Seque”的类型更改为 push 时，它起作用了。但是在我回到主视图控制器后，它不会做任何事情

我错过了什么？

编辑：

我不小心在我的故事板中发现了一个警告！（这很奇怪，因为它不是“从任何地方都可见”的项目中的警告）在“引用故事板 Segues”下的连接检查器中，我的模态 segue 有一个警告。它说 ：

```
(null) is not a valid containment controller key path 
```

我检查了其他模态序列并且有相同的警告，但我不需要通过代码触发它们，所以之前没有问题。

编辑2：

```
-(void)editViewController:(EditViewController *) evc
didFinishEditing:(Something *) something
{
    self.something = something;
    [self dismissModalViewControllerAnimated:YES];
    For ( OtherThing * otherThing in self.something.otherthingsArray)
    {
        NSLog(@"%@", otherThing);
    }
    [self performSegueWithIdentifier:@"My Segue" sender:self];
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-21T18:45:04.443

在执行 segue 之前，您需要等到其他视图控制器完成动画。您可以使用新的 iOS 5 方法：

```
[self dismissViewControllerAnimated:YES completion:^() {
    [self performSegueWithIdentifier:@"My Segue" sender:self];
}]; 
```

如果您需要 iOS 5 之前的方法来执行此操作，您应该在执行 segue 之前添加一个延迟以给动画时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-30T19:07:07.323

就我而言，我能够成功执行一次转场；但不是以后的时间。没有抛出特别的致命错误，并且使用`DispatchQueue.main.async`也没有帮助我。

最终，我记得我曾在某个时间点让它在一个单独的分支上工作。该决议最终变得非常愚蠢。在我使用“显示细节”风格的转场的地方，我不得不将其更改为“呈现模态”转场。无论出于何种原因，这让我可以再次执行多次。

# php - php 中的 cron 作业可以访问 100 多个动态 url 来缓存页面

> ID：10233427
> 
> 赞同：3
> 
> 时间：2012-04-19T17:25:26.153
> 
> 标签：php, curl, cron, wget

我们使用后端专有数据库将数据提供给我们网站上的 100 多个动态页面。URL 的格式为 www.example.com/blah?id=1、www.example.com/blah?id=2 等。这些页面可能需要长达 5 秒的时间来加载，因为数据的检索速度非常慢（因为我们要连接的数据库）。

我的目标是编写一个 cron 作业（在 PHP 中），它将“循环”并向我们所有的动态页面发出请求，以便缓存它们（我们为这些页面提供 24 小时缓存）。

我最好的方法是使用嵌入式“wget”命令的 PHP 脚本，其中忽略输出？如果愿意，我可以访问 cURL。编写一个会达到 100 个 URL 以缓存页面的脚本是否存在性能问题？我们当然会在晚上的高峰时段运行它。

感谢您对此的任何指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:28:02.213

我建议使用 multi-cURL 来完成这项工作。这样，您的请求将彼此并行运行。

您可以使用[内置的 PHP 函数](http://php.net/manual/en/function.curl-multi-exec.php)来做到这一点，但我建议使用包装它们的众多类之一：

[https://github.com/jmathai/php-multi-curl](https://github.com/jmathai/php-multi-curl)

[http://curl.haxx.se/libcurl/php/examples/multi.html](http://curl.haxx.se/libcurl/php/examples/multi.html)

# javascript - 使用库在 CoffeeScript 中获取回调

> ID：10233428
> 
> 赞同：0
> 
> 时间：2012-04-19T17:25:30.387
> 
> 标签：javascript, youtube-api, coffeescript, dom-events

我正在使用[YouTube API](https://developers.google.com/youtube/js_api_reference)在页面上嵌入视频。我称之为`swfobject.embedSWF`在页面上嵌入视频，它可以工作。加载完成后，API 应该调用`onYouTubePlayerReady`. 不过我的问题是我必须在我的类中将回调放在哪里才能调用函数？

这是我尝试过的代码，但这不起作用。

```
class YouTube

    constructor: (@uid) ->
        youtube_video_container =   $('<div/>', {
              id: 'ytapiplayer'
        }).appendTo(main);

        params = { allowScriptAccess: "always" };
        atts = { id: "myytplayer" };

        swfobject.embedSWF("http://www.youtube.com/apiplayer?video_id=d9NF2edxy-M&version=3&enablejsapi=1", "ytapiplayer", "1280", "720", "8", null, null, params, atts);

    onYouTubePlayerReady: (playerId) ->
           alert "ready" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T18:05:05.873

来自[精美手册](https://developers.google.com/youtube/js_api_reference#Requirements)：

> 此外，任何包含 YouTube 播放器的 HTML 页面都必须实现一个名为`onYouTubePlayerReady`. 当播放器完全加载并且 API 准备好接收调用时，API 将调用此函数。

和[`onYouTubePlayerReady`](https://developers.google.com/youtube/js_api_reference#EventHandlers)：

> **onYouTubePlayerReady(playerid)**
> 
> 当播放器完全加载并且 API 准备好接收调用时调用。如果`playerapiid`通过 URL 参数将 a 传递给播放器，那么它将传递给此函数。

因此，如果您包含`&playerapiid=X`在 URL 的 CGI 参数中，那么这`X`就是调用的`playerid`时间。`onYouTubePlayerReady`

所有这些都表明这`onYouTubePlayerReady`是一个*全局*函数，而不是您选择的对象上的方法或您可以随意指定的回调。要使用 CoffeeScript 创建一个全局函数，请在 上创建一个属性`window`：

```
window.onYouTubePlayerReady = (playerid) ->
    alert 'Ready' 
```

您必须使用`playerid`回溯到通过一些全局可访问的 playerid-to-object 映射创建玩家的特定对象。

甚至[`addEventListener`](https://developers.google.com/youtube/js_api_reference#Adding_event_listener)接口也是基于名称而不是回调，所以你被困在污染全局命名空间和自己路由的事情上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:25:26.380

我想我找到了一个很好的解决方案，可以让回调在 swfObject 库中工作，这与 txominpelu 的建议非常相似。似乎 using`-> callbackFn`效果很好，基本上是创建一个匿名函数并返回回调？我会很感激有人让我直截了当地说明为什么这可能都是错误的。（我通常第一次就错了）

我正在使用`swfobject.embedSWF`一个`callbackFn`在我`function callbackFn() {}`用来定义它的手工编码的 JavaScript 文件中运行良好的。现在我正在尝试使用 CoffeeScript，它非常棒。所以 CoffeeScript 会编译`callbackFn = function() {};`。我原来的 swfObject.embedSWF 不适用于我的回调的 CoffeeScript 编译版本。

```
// original javascript file approach
swfobject.embedSWF( "swf/flashContent.swf", "site-content", 
                    "100%", "100%", "10.0.0", false, 
                    flashvars, params, attributes, callbackFn );

// original javascript callback
function callbackFn() {
  log( "--> callbackFn invoked ");
  // ... do stuff
} 
```

我是 CoffeeScript 的新手，我认为你[获得命名函数的唯一时间是使用一个类](https://stackoverflow.com/a/6550020/740044)

我首先尝试使用匿名函数来代替[swfObject wiki](https://code.google.com/p/swfobject/wiki/api#swfobject.embedSWF(swfUrlStr,_replaceElemIdStr,_widthStr,_height))上详述的可选回调参数。然后我想我也许可以得到类似的东西来使用 CoffeeScript 版本。这就是我结束的地方。

```
# part of .coffee file
swfobject.embedSWF "swf/flashContent.swf", "site-content", 
                   "100%", "100%", "10.0.0", false, 
                    flashvars, params, attributes, -> callbackFn()

callbackFn = (evt) ->
  console.log "--> callbackFn invoked #{evt}"
  # do other stuff

# part compiled .js file
swfobject.embedSWF("swf/flashContent.swf", "site-content",  
                   "100%", "100%", "10.0.0.", false, 
                   flashvars, params, attributes, function() {
                     return callbackFn();
                   });

callbackFn = function() { ... } 
```

我还研究了通过 callbackFn 传递事件，看起来它有效。

```
# .coffee file swf
@swfobject.embedSWF "swf/flashContent.swf", "site-content", 
                    "100%", "100%", "10.0.0.", false, 
                    flashvars, params, attributes, -> callbackFn(@swfobject)

callbackFn = (evt) ->
  console.log "--> callbackFn invoked #{evt}"
  # do other stuff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:37:27.607

我认为替换以下代码的 embedSWF 调用可能会起作用：

```
swfobject.embedSWF("http://www.youtube.com/apiplayer?video_id=d9NF2edxy-M&version=3&enablejsapi=1", "ytapiplayer", "1280", "720", "8", null, null, params, atts, this.onYouTubePlayerReady); 
```

试一试，让我知道它是否有效。

修改只是意味着您将它作为最后一个参数传递给您希望它视为回调函数的函数。

# java - 关于等待和通知

> ID：10233431
> 
> 赞同：0
> 
> 时间：2012-04-19T17:25:49.323
> 
> 标签：java

我正在开发与等待和通知相关的简单代码我创建了两个单独的类，下面是类

```
 class ThreadA {
 public static void main(String [] args) {
 Thread b = new Thread();
 b.start();

 synchronized(b) {
 try {
 System.out.println("Waiting for b to complete...");
 b.wait();
} catch (InterruptedException e) {}
 //System.out.println("Total is: " + b.totals);
 }
}
}

and the other one is ...

class ThreadB extends Thread {
public  int totals;

 public void run() {
     synchronized(this) {
     for(int i=0;i<100;i++) {
      totals += i;
      }
      notify();
      }
      }
     } 
```

但是在类 ThreadA 中，当我从 b 线程对象访问总数时出现编译时间错误，即..

```
System.out.println("Total is: " + b.totals); 
```

请告诉我如何更正它，以便我可以执行我的代码..!! 提前谢谢...！1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:27:54.707

这是直接的问题：

```
Thread b = new Thread(); 
```

您永远不会真正创建`ThreadB`. `b`is only的类型`Thread`，`ThreadB`这不是编译器无法解析`totals`标识符的原因

此外：

*   公共领域是一个非常糟糕的主意 - 改用属性
*   调用`wait`and`notify`是`Thread`一个非常糟糕的主意，因为`Thread`类本身调用`wait`and `notify`。
*   您通常应该实现`Runnable`而不是扩展`Thread`，以便更好地分离关注点。
*   通常最好在你的类上调用一些知道在*只*对该代码可见的监视器上同步的东西，而不是同步（并等待）一个公开可见的监视器。它使推理线程变得更容易。

# c++ - 使用 windows.h，在鼠标单击时从聊天框中删除文本 (C++)

> ID：10233433
> 
> 赞同：0
> 
> 时间：2012-04-19T17:25:55.533
> 
> 标签：c++

抱歉，标题有点模糊。

基本上，我正在用 C++ 制作一个聊天程序并使用 windows.h API。我的大部分程序都在工作，只是一些小事情不能正常工作。我有一个框，用户可以在其中输入他们想说的话，在该框中，它以斜体字显示“在此处输入文本”。我想设置它，以便当用户单击该框时，这些单词消失并且用户可以自由输入。正如现在设置的那样，如果他们在框内单击它会转到“这里”一词的末尾，他们必须手动删除这些词。

有没有一种简单的方法可以做到这一点？可能在创建框或文本时？还是我必须添加自己的逻辑才能完成此操作？

附件是我在其中创建框和设置字体的代码：

盒子：

```
hwSendEdit = CreateWindowEx(WS_EX_CLIENTEDGE, "Edit", "Enter Text Here", 
WS_CHILD|WS_VISIBLE, 2, 215, 790, 22, hwMain, 0, hInst, 0); 
```

字体：

```
chFont = CreateFont(12, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Tahoma");
SendMessage(hwSendEdit, WM_SETFONT, reinterpret_cast<WPARAM>(chFont), 0); 
```

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:36:53.230

您需要响应`WM_ACTIVATE`控件的消息。它有一个参数`wParam`告诉您控件是被激活还是被停用。如果它正在被激活，请检查窗口文本以查看它是否等于您的提示字符串；如果是这样，请将字体恢复正常并用于`SetWindowText`清除文本。如果它被停用，请使用`GetWindowText`查看文本是否为空，如果是，请将字体设置回斜体并替换您的提示字符串。

# c# - 从 .NET 程序集加载用 C (DLL) 编写的 Tcl 包

> ID：10233435
> 
> 赞同：1
> 
> 时间：2012-04-19T17:25:59.730
> 
> 标签：c#, .net, tcl

我正在用 C# 编写并想使用 tcl。

搜索后，我发现[Tcl/Csharp](http://sourceforge.net/projects/tclcsharp/)项目可以完成这项工作，但是缺少一个允许它与注册表一起使用的包。我有一个 dll 文件形式的包，但我无法加载它。

```
class Program 
{
    static void Main(string[] args) 
    {
        Interp interp = new Interp();

        interp.eval("puts hello world");     // Works
        interp.eval("load tclreg12.dll");    // Throws TclException Invalid command name "load"
        interp.eval("package req registry"); // Throws TclException "cant find package registry"

        TclObject result = interp.getResult();
        Console.WriteLine(result);

        interp.dispose();
    }
} 
```

我怎样才能使用这个包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:34:45.020

正如 M.Babcock 正确指出的那样，您使用的 Tcl/Csharp 包只是尝试在 .NET 堆栈之上实现 Tcl 解释器，但该[`load`](http://www.tcl.tk/man/tcl8.5/TclCmd/load.htm)命令非常特殊（在“真正的”Tcl 中）旨在加载用 C 编写的 Tcl 包，*并且*此类包应该使用Tcl 运行时本身[公开的 C API 。](http://www.tcl.tk/man/tcl8.5/TclLib/contents.htm)这个 C API 非常全面，如果可能的话，自然地，让纯 .NET 代码正确模拟所有 C API 内容将是一项艰巨的任务。

由于 Windows 注册表操作在 .NET 中很简单，我想您手头有一个用 Tcl 编写的大型遗留程序，您需要从您的 .NET 程序中调用它（因为您可能估计移植该程序比制作更麻烦）它按原样运行）。如果这是真的，我会采取以下路线之一：

*   将您的程序变成一个[starpack](http://wiki.tcl.tk)，并将生成的可执行文件与您的“主机”程序捆绑在一起，然后将其作为单独的程序执行。（该文件将是单一的，没有特殊的依赖关系。）
*   编写一个特殊的包装程序集，它将使用[P/Invoke](http://msdn.microsoft.com/en-us/library/aa288468)加载真正的 Tcl 运行时（Tcl 的外壳，`tclshXY.exe`只是一个瘦程序，真正的东西是`tclXY.dll`加上一组库文件，这是你应该加载的 DLL ）。然后，您的代码可以将一个脚本（以字符串的形式）传递给 Tcl 运行时，该脚本将加载并执行您需要运行的实际 Tcl 程序。

# jquery - IE 8 中的 jQuery 错误/页面挂起

> ID：10233437
> 
> 赞同：-1
> 
> 时间：2012-04-19T17:26:03.967
> 
> 标签：jquery, internet-explorer-8

jQuery 导致我的页面在 IE8 中挂起，并且似乎还导致了一些其他错误。

有问题的页面是：

[http://www.yogahunter.com/](http://www.yogahunter.com/)

*   它在 IE8 中加载时挂起。我收到错误消息：

> document.body 为 null 或不是对象 jquery-1.3.2.min.js，第 19 行字符 23004

我很确定它是 jQuery，因为如果我删除对 j​​Query 的调用，页面加载速度很快。但是一旦我重新调用 jQuery，它就会挂起。

*   此外，当我离开某些页面时，我收到另一个错误（我认为这与谷歌地图有关）。错误是：

> 对象预期意识中心 11.htm，第 38 行字符 1

您将看到此错误转到：

[http://www.yogahunter.com/detail/awareness-center-11.htm](http://www.yogahunter.com/detail/awareness-center-11.htm)

然后导航到网站上的不同页面。

您能提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:30:27.710

我要飞跃一下，说 jQuery 的 1.3.2 版和 jQuery UI 的 1.7.2 版不兼容？？

```
<script src="/javascripts/jquery-1.3.2.min.js"></script>
<script src="/javascripts/ajaxupload.js" type="text/javascript"></script>
<script src="/javascripts/jquery/jquery-ui-1.7.2.custom.min.js"></script> 
```

# tomcat - JNDI 查找使用lookUp 可以正常工作，但在JPA 的persistence.xml 中使用时不行

> ID：10233441
> 
> 赞同：13
> 
> 时间：2012-04-19T17:26:12.760
> 
> 标签：tomcat, jpa, jndi, persistence.xml

我正在使用tomcat连接池，jpa，hibernate。如果我尝试使用以下方式获取它，我在 tomcat 的 context.xml 中创建的数据源可以正常工作：

```
source = (DataSource) ((Context) c.lookup("java:comp/env")).lookup("jdbc/kids"); 
```

但是如果我在 persistence.xml 中指定这个 jndi 数据源

```
<persistence-unit name="kids-tomcat" transaction-type="JTA">
           <jta-data-source>jdbc/kids</jta-data-source>
       </persistence-unit> 
```

我收到以下异常：org.hibernate.service.jndi.JndiException: Unable to lookup JNDI name [jdbc/kids]

知道为什么会发生！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-01T15:48:08.757

在我指定了下面的属性之后，它终于在今天起作用了。因为仅仅提到数据源是不够的；我们需要指定一些属性，比如使用哪种方言。如果我们指定数据源；我们不需要指定数据库的用户名、密码 url（因为所有这些都在数据源配置本身中指定）。

最重要的一点是您指定数据源的方式。它应该是完整的路径： java:/comp/env/jdbc/kids 。**所有这一切，而我在 comp 之前错过了斜线。**

```
<persistence-unit name="kids" transaction-type="RESOURCE_LOCAL">
    <non-jta-data-source>java:/comp/env/jdbc/kids</non-jta-data-source>
    <class>com.kids.domain.User</class>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
        <property name="connection.autocommit" value="false"/>
        <property name="hibernate.hbm2ddl.auto" value="create"/>
        <property name="hibernate.show_sql" value="true"/>
    </properties>
</persistence-unit> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:11:34.510

也许尝试使用persistence.xml JNDI 定义的名称，包括命名空间（“ *java:comp/env* ”）以及JNDI 路径（“ *jdbc/kids* ”）在一个字符串中（即把它们放在一起）。

# objective-c - Objective-C中每次按键后需要计算字段（四个NSTextField）

> ID：10233442
> 
> 赞同：0
> 
> 时间：2012-04-19T17:26:14.287
> 
> 标签：objective-c, xcode, macos, keydown

我正在制作一个有四个 NSTextField 框的小程序。每个框都通过一个公式与其他框相关联。基本上，我现在就可以使用它，在您单击开箱后，它会很好地计算其他框（您可以在任何框中输入数字）。

我想要的是每次按键后，我想调用盒子动作来计算其他盒子。因此，结果应该立即发生，而不仅仅是在点击开箱或点击标签等之后。

我仍在学习 ObjC，因此，虽然我尝试查看文档，但它们似乎并不直接适用于我的问题。

我定义了以下操作：

```
- (IBAction)boxX1:(id)sender;
- (IBAction)boxY1:(id)sender;
- (IBAction)boxX2:(id)sender;
- (IBAction)boxY2:(id)sender; 
```

对于每一个，都有一些代码以正确的方式调用计算函数......

所以，基本问题是......计算？

例如，这是 boxX2 的代码：

```
- (IBAction)boxY2:(id)sender {
    self.boxX2.stringValue = [ARCBrain calculateRatio:self.boxX1.stringValue times:self.boxY2.stringValue dividedBy:self.boxY1.stringValue];
} 
```

我只需要在每次按键后都能调用它。看起来很容易，不是吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:26:43.433

这就是我最终做的事情：

我添加了这个：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(textDidChange:) name:NSControlTextDidChangeNotification object:nil]; 
```

到 -applicationDidFinishLaunching: 方法，然后添加：

```
-(void) textDidChange:(NSNotification *)obj {
   if ([obj object] == self.boxX1) {
      //do stuff
   } else ... {
   // Do other stuff
   }
   ...
} 
```

上课..像魅力一样工作！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T19:31:49.830

检查您是否可以使用此方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string; 
```

# floating-point - IEEE 754 中表示的最大浮点数

> ID：10233444
> 
> 赞同：7
> 
> 时间：2012-04-19T17:26:17.247
> 
> 标签：floating-point, computer-science, ieee-754

我想知道 IEEE 754 中表示的最大浮点数是否为：

`(1.11111111111111111111111)_b*2^[(11111111)_b-127]`

这里`_b`的意思是二进制表示。但是该值是`3.403201383*10^38`，它不同于`3.402823669*10^38`，`(1.0)_b*2^[(11111111)_b-127]`例如 和给出`c++` `<limits>`。在框架中不是 `(1.11111111111111111111111)_b*2^[(11111111)_b-127]`可表示的和更大的吗？

有人知道为什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T18:46:07.620

指数 11111111 [b]保留用于无穷大和 NaN，因此无法表示您的数字。

单精度可以表示的最大值，大约 3.4028235×10 ^(38)，实际上是 1.11111111111111111111111 [b] ×2 ^(11111110 [b] -127)。

另见[http://en.wikipedia.org/wiki/Single-precision_floating-point_format](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-16T15:59:09.073

作为“ ***m*** ”尾数和“ ***e*** ”指数，答案是：

[![在此处输入图像描述](../Images/713f95dd5c55114b0dcd11839cb1a356.png)](https://i.stack.imgur.com/CXUZe.png)

在您的情况下，如果 IEEE 754 上的位数是：

*   **16 位**，符号 1，指数 6，尾数 11。代表的最大数字是 4,293,918,720。
*   **32 位**，符号 1，指数 8，尾数 23。表示的最大数字是 3.402823466E38
*   **64位**你有1个符号，11个指数，52个尾数。表示的最大数是 2^1024 - 2^971

# c++ - 如何让这个数组填充我的输入值？

> ID：10233445
> 
> 赞同：1
> 
> 时间：2012-04-19T17:26:22.977
> 
> 标签：c++, arrays, pointers

我正在尝试填充一个我希望是“动态”的数组，以便我可以在运行时根据需要向其中输入尽可能多的条目。但是，我认为指针`NthTeam`指向的数组没有填充：

```
int* NthTeam = NULL;    

NthTeam = (int*)realloc(NthTeam,(playerCounter*STND_NO_GAMES)*sizeof(int));

// loops through each player's standard number of games
for (int i = 1; i <= STND_NO_GAMES; i++) {
    //input the score into the remalloced array
    cout << "Enter player " << playerCounter << "'s score " << i << ": ";
    cin >> inputValue;
    NthTeam[((playerCounter-1)*STND_NO_GAMES+(i-1)))] = SanityCheck(inputValue);
 } 
```

但是，当我`cin >> NthTeam[(playerCounter - 1) * STND_NO_GAMES + (i - 1)]`在我的代码中使用它时，它确实有效......填充了数组。

[从这个链接](http://www.cse.unt.edu/~donr/courses/4410/dynamicArrays/dynamicArrays.html)我被引导相信你可以像使用常规数组一样使用 NthTeam，但我不认为这就是这里发生的事情。我不能只使用的原因`cin`是因为我应该在允许输入数组之前对输入进行有效性检查。

我很迷失谷歌搜索答案；对于我现在所处的位置来说，其中很多都太复杂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:51:22.927

假设您使用 C++ 编程，标准库可以提供帮助。例如：[std::vector](http://www.dreamincode.net/forums/topic/33631-c-vector-tutorial/)。这是一个脑残的修改，一定要`#include <vector>`：

```
std::vector<int> NthTeam;    

// loop through each player's standard number of games
// inputting the score into the vector

for (int i = 1; i <= STND_NO_GAMES; i++) {
    cout << "Enter player " << playerCounter << "'s score " << i << ": ";
    cin >> inputValue;
    NthTeam.push_back(SanityCheck(inputValue));
} 
```

您确实需要考虑输入无效输入时会发生什么（例如输入“番茄”的分数）。考虑这将如何影响 的错误状态`cin`，如果您在最后一次尝试产生错误时尝试从中读取另一个整数会做什么，以及`inputValue`会是什么。

可能您仍然需要“SanityCheck”......但它可能理所当然地认为它只需要检查整数。

# c# - @Html.ActionLink 忽略 actionName，默认为 Index

> ID：10233448
> 
> 赞同：2
> 
> 时间：2012-04-19T17:26:31.100
> 
> 标签：c#, asp.net-mvc-3, razor, actionlink

从另一个控制器中的视图，我尝试使用此@Html.ActionLink 重新路由到我的客户端控制器中的“ClnVwDet”操作。

```
@Html.ActionLink("Client View", "ClnVwDet", "Client") 
```

## 客户端控制器.cs

```
public ActionResult ClnVwDet()
{
  int id = (int)TempData["id"];
  bool vw = true; int pn = 0;
  return RedirectToAction("Details", new { id, pn, vw });
} 
```

无论我使用什么 actionName，它总是转到客户端“索引”操作，而不是我指定的操作。

ActionLink 的此更正语法有效。

```
@Html.ActionLink("Client View", "ClnVwDet", "Client", new { id = @Model.Id }, null) 
```

在这里找到答案：[Using Html.ActionLink to call action on different controller](https://stackoverflow.com/questions/776781/problem-using-html-actionlink-to-call-action-on-different-controller)。请参阅 Banfords 对 cagdas 答案的评论。要获得正确的重载，您需要添加第五个参数。如果您想通过 (linkText, actionName, controllerName) 重载传递 routeValues，您必须添加 htmlAttribues 以获得正确的重载。(linkText、actionName、controllerName、routeValues、htmlAttribues)

# jquery - 使用带有 Json 数据的 Javascript/Jquery 在单击时填充选择框选项

> ID：10233464
> 
> 赞同：18
> 
> 时间：2012-04-19T17:27:16.017
> 
> 标签：jquery, ajax, asp.net-mvc, json, select

我仍在学习 Jquery，对我手头的任务有点困惑。

似乎是一个简单的任务......我有一个框，我想在点击时填充选项。我不希望它在页面加载时填充，只有当有人实际请求查看列表时。此外，它只能填充一次。我真的不希望每次有人扩展列表时都发出请求。

我想我可能会在我的 Select 元素中有一个函数调用

```
<select id="usersList" name="usersList" onclick="getUsers()"> 
```

然后让 Javascript getUsers() 函数调用我的 Json GetUsers() ActionMethod 以获取该列表。如何 ？

就像是...？

```
function getUsers()
{
 getJSON("/Users/GetUsers", null, function (data){}
} 
```

还是 JQuery？...

```
$("usersList").click(
  $.getJSON("/Users/GetUsers", null, function (data) {}
  ) 
```

我应该提一下，我看到了这篇文章： [在加载选择列表时使用 JQuery 中的 json 数据填充选择列表（不是文档）](https://stackoverflow.com/questions/1567962/populate-selectlist-with-json-data-in-jquery-when-the-selectlist-is-loaded-not)

但我需要帮助把它们放在一起。先感谢您！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-19T17:47:52.000

这是我用来填充选择框的 javascript。

```
$.getJSON("/Users/GetUsers", null, function(data) {
    $("#UsersList option").remove(); // Remove all <option> child tags.
    $.each(data.Users, function(index, item) { // Iterates through a collection
        $("#UsersList").append( // Append an object to the inside of the select box
            $("<option></option>") // Yes you can do this.
                .text(item.Description)
                .val(item.Id)
        );
    });
}); 
```

我建议您在页面加载时触发此操作，而不是在用户单击选择框时触发。默认情况下，jQuery AJAX 是异步的（应该是这样），所以会有一两个时间选择框是空的，这可能会极大地混淆用户。

这是您问题的范围，还是您也需要 MVC 方面的帮助？如果您使用的是 ASP.Net MVC，则实际上有一个特定的 JsonResult 结果类型，这使得创建 JSON 控制器方法更简单，因为它们不需要相应的视图。它还允许您使用匿名数据结构，这使得特定方法的投影更简单一些。

* * *

**编辑**这是返回上面 jQuery 代码可以理解的 JSON 结构的基本方法。请注意，属性`u.Username`和`u.ID`取决于您的用户对象。

```
[HttpPost] 
public JsonResult GetUsers() { 
    return Json(new {
        Users = from u in _usersRepository.Get()
                select new { Description = u.Username, ID = u.ID }
    }); 
} 
```

但是，我建议您尽快放弃这种方法并使用标准的 JSON 消息结构。我使用的是这样的：

```
{
    Success: bool,
    LoggedIn: bool,
    ClientErrors: [
        { Number: int, Description: string, Parameter: string },
        { Number: int, Description: string, Parameter: string }...
    ],
    ServerErrors: [
        { Id: int, Message: string },
        { Id: int, Message: string }...
    ],
    Data: {}
} 
```

以下是这样做的几个原因：

1.  毫无疑问，您的 JSON 方法库是一种协议，因此它受益于标准标头。
2.  错误处理从中受益最大。拥有一种一致的方法让用户知道出现问题是非常宝贵的。
3.  区分客户端错误（错误的用户名、错误的密码等）和服务器错误（数据库脱机）非常重要。一个用户可以修复，另一个他们不能。
4.  客户端错误不仅应返回消息，还应返回导致该消息的方法中的参数（如果适用），以便您可以轻松地在适当的输入字段旁边显示这些错误消息。
5.  客户端错误还应提供标识错误的唯一编号（每个方法）。这允许多语言支持。
6.  服务器错误应提供记录的错误的 ID。通过这种方式，您可以允许用户联系支持人员并参考他们遇到的特定错误。
7.  登录布尔值允许任何使用需要身份验证的方法的页面在必要时轻松将用户重定向回登录屏幕，因为 JSON 方法的重定向操作结果将无效。
8.  最后，数据字段是应该提供方法特定数据的地方。

* * *

您绝不应该将我的结构视为这样做*的方式。*显然，您的应用程序需求可能与我的大不相同。一致性，比任何特定结构更重要的是这里的教训。

**编辑：06/01/2016** - 看到人们仍在寻找这个答案。关于填充下拉列表，我建议考虑使用双向绑定框架。我个人更喜欢 Knockout.JS，因为它既简单又轻量，尽管 Angular.JS 也能胜任。除此之外，这个答案的其余部分仍然是最新的。

**编辑：2016**年 8月 10 日 - 代码缺少逗号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T17:32:40.850

我会使用 jQuery 选项。

```
// You are missing the new anonymous function call
$("#usersList").click(function() {
    // If the select list is empty:
    if ($(this).find("option").size() > 0) {
        // Documentation on getJSON: http://api.jquery.com/jQuery.getJSON/
        $.getJSON("/Users/GetUsers.php", null, function (data) {
            $.each(data.items, function(i,item){
                // Create and append the new options into the select list
                $("#usersList").append("<option value="+item.id+">"+item.yourName+"</option>");
            });
        });
    }
}); 
```

由于`append()`操作相对“昂贵”，您也可以只构建一个包含信息的字符串并将其附加一次，如下所示：

```
var collaboration = "";
$.each(data.items, function(i,item){
    collaboration += "<option value="+item.id+">"+item.yourName+"</option>";
});
$("#usersList").append(collaboration);
... 
```

这是一个[jsfiddle](http://jsfiddle.net/grmMf/1/)，演示了如何确定选择列表是否为空。

# javascript - 是否可以访问 FCKEditor textarea 中的滚动事件？

> ID：10233472
> 
> 赞同：0
> 
> 时间：2012-04-19T17:27:44.223
> 
> 标签：javascript, jquery, iframe, fckeditor

我在任何地方都找不到这个，我尝试遍历 iframe 以到达其中包含 html 的 body 元素。

基本上我有一个只读文本的 div 和一个在页面加载时具有相同内容的 fckeditor。当页面加载时，框中的文本在视觉上彼此并排排列。我想对其进行编程，以便当 FCKEditor 随着文本变得比高度长而滚动时，它将以编程方式滚动只读 div，以便内容仍然对齐。

有任何想法吗？

谢谢，

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:56:32.220

我有你的背布罗海姆。

这是查找 FCKEditor 使用的 iFrame 窗口内容的代码。

```
$('#cke_contents_content iframe').contents().find('body').html(); 
```

从这里，您可以找到[offset()](http://api.jquery.com/offset/)并使用[position](http://api.jquery.com/position/)和[scrollTop](http://api.jquery.com/scrollTop/)。这三部分结合起来将允许您找到回滚位置，进行匹配，然后将相同的“距离”应用于“非 FCKEditor”上的 scrollTop() `div`。

祝你好运。

# php - php while循环后输出停止

> ID：10233474
> 
> 赞同：3
> 
> 时间：2012-04-19T17:27:48.653
> 
> 标签：php, loops, while-loop, execution

我有以下 php 代码：

```
echo "<div style='float:left;'>";
echo "<table>";
echo "<tr>";
echo "<th></th>";
echo "<th colspan='4'>Laks beholdt</th>";
echo "</tr>";
echo "<tr>";
echo "<th>Uke</th>";
echo "<th>&lt;3 kg</th>";
echo "<th>3-7 kg</th>";
echo "<th>&gt;7 kg</th>";
echo "<th>Totalt</th>";
echo "</tr>";

while ($row = mysql_fetch_array($result, MYSQL_ASSOC) or die(mysql_error()))
{
   echo "<tr>";
   echo "<td>" . $row['Uke'] . "</td>";
   echo "<td style='text-align:right; padding-right:10px;'>" . number_format($row['SumSmall'], 1,
      ",", " ") . " kg</td>";
   echo "<td style='text-align:right; padding-right:10px;'>" . number_format($row['SumMedium'], 1,
      ",", " ") . " kg</td>";
   echo "<td style='text-align:right; padding-right:10px;'>" . number_format($row['SumLarge'], 1,
      ",", " ") . " kg</td>";
   echo "<td style='text-align:right; padding-right:10px;'>" . number_format($row['SumVekt'], 1, ",",
      " ") . " kg</td>";
   echo "</tr>";
}

echo "</table>";
echo "</div>"; 
```

我从 while 循环中获得了预期的输出，但我的表和 div 的结束标签 - 或任何其他输出 - 没有显示。我没有收到任何错误消息，也没有在我的 html 中看到任何错误。我尝试通过数字而不是关联来引用数组，但我得到了相同的结果。

我已经写了一百个类似的循环没有错误，但我在这里没有想法：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:32:57.357

该`or die()`语句导致它停止执行。什么时候`$row = mysql_fetch_array($result, MYSQL_ASSOC)`应该停止循环，它会`die()`改为。由于没有错误，因此没有打印任何内容`mysql_error()`

```
echo "Before loop\n";

$x = 1;
while($foo = bar($x) or die('Died')) {
    echo $x++, "\n";
}

echo "After loop\n";

function bar($x) {
    if($x < 5) {
        return $x;
    }
    return false;
}

//outputs:
//Before loop
//1
//2
//3
//4
//Died 
```

[键盘版本](http://codepad.org/vrC3YpzF)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:32:41.343

不要`die()`在循环中使用

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
{
   echo "<tr>";
   echo "<td>" . $row['Uke'] . "</td>";
   echo "<td style='text-align:right; padding-right:10px;'>" . number_format($row['SumSmall'], 1,
      ",", " ") . " kg</td>";
   echo "<td style='text-align:right; padding-right:10px;'>" . number_format($row['SumMedium'], 1,
      ",", " ") . " kg</td>";
   echo "<td style='text-align:right; padding-right:10px;'>" . number_format($row['SumLarge'], 1,
      ",", " ") . " kg</td>";
   echo "<td style='text-align:right; padding-right:10px;'>" . number_format($row['SumVekt'], 1, ",",
      " ") . " kg</td>";
   echo "</tr>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:33:50.113

您的 while 条件有缺陷，因为当从结果集中获取所有行时`mysql_fetch_array()`返回，因此 while 条件变为执行并终止脚本。`false``false or die(mysql_error())``die()`

您不应该使用或喜欢那样，也不应该像那样将错误打印到屏幕上。

您正在执行的错误报告类型应取决于您是在生产还是开发，但无论如何都应执行错误检查。

我建议您强烈考虑类似`PDO`例外`mysqli`或`PHP framework`完全例外的事情。使用`mysql_*() API`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T17:37:14.047

这是生死攸关的陈述。如果您想让循环在错误上终止，请设置一个自定义错误处理函数，如果有错误，该函数会设置一个布尔值。然后你可以做类似的事情

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC) or !$error_hander) 
```

# php - 如何优化服务器以使用许多正则表达式操作

> ID：10233477
> 
> 赞同：3
> 
> 时间：2012-04-19T17:27:57.117
> 
> 标签：php, apache

由于 CPU 使用率高，我的服务器运行缓慢。我已将 CPU 使用率高的原因归结为以下几个原因：

*   数据集上的大量正则表达式函数。
*   strpos，substr 操作。
*   循环遍历数组以进行基本的数学运算。

在我的网站上进行一次搜索需要所有这些操作。如果访问者进行搜索，CPU 将达到 100%。我对这些操作无能为力，因为它们是必需的。

我的问题：

*   鉴于上述操作几乎是所有 CPU 使用的原因，那么配置 httpd.conf 或 php.ini 等配置文件的最佳方法是什么？
*   鉴于上述操作是几乎所有 CPU 使用率的原因，那么升级服务器的最佳方法是什么？

更新 1：

一个操作的例子是：

```
preg_match_all('/ValuesBreakdown_\d+_[A-Z]+_out.push\(([\d.,]+)/',$content,$matches); 
```

这个单一的操作并不占用大量的CPU，但是加起来就是这种操作的大量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:10:13.600

面对性能问题时，请始终确保原因确实是您的想法。

我的建议是首先使用 XDebug + webgrind 并确认原因。

然后您可能能够更改代码的逻辑流程以提高性能：例如，您是否循环数次数据集而不是仅一次？你确定你不能改进你的算法吗？ETC..

每次都使用 XDebug 向自己证明您确实提高了性能。

# reporting-services - 分区、维度和度量组上的主动缓存之间的区别

> ID：10233483
> 
> 赞同：1
> 
> 时间：2012-04-19T17:28:35.840
> 
> 标签：reporting-services, ssas

在阅读了大部分文档之后，我仍然不清楚是否在各个地方设置了主动缓存：在分区、维度和度量组中。

将它们设置在这些不同的地方有什么区别，以及需要在哪里设置主动缓存以使 SSRS 报告成为最新的（在我的情况下，我将使用计划轮询）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:14:13.177

当您为维度配置主动缓存时，这将使维度与源保持同步。客户维度是您可能会考虑启用主动缓存的维度...由于日期维度（通常）是静态的，因此您不需要为该维度配置主动缓存（除非您有当前日期标志或类似的东西）。

MeasureGroup 和 Partition 主动缓存特定于您的事实数据。区别只是粒度。如果您希望度量值组中的所有分区都使用相同的主动缓存设置，您可以在度量值组级别对其进行配置。但是，如果只有最近分区中的数据发生变化（比如当月），那么您可以只在该特定分区上配置主动缓存。

# objective-c - NSArray Parsing 有什么区别？

> ID：10233486
> 
> 赞同：0
> 
> 时间：2012-04-19T17:28:40.803
> 
> 标签：objective-c, ios

以下代码段中的 Parsing 有什么区别。哪些代码段在解析中更快？

```
NSArray *arr = [[NSArray alloc] initWithObjects:@"Apple",@"Macbook", nil];

NSMutableArray *data = (NSMutableArray *)arr; 
```

（和）

```
NSArray *arr = [[NSArray alloc] initWithObjects:@"Apple",@"Macbook", nil];

NSMutableArray *data = [NSMutableArray arrayWithArray:arr]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:30:58.350

您在两个片段中都有相同的错误，您为对象分配内存，然后为数据分配其他内容，这使您丢失了前一个（并且有内存泄漏），例如：

```
NSMutableArray *data = [[NSMutableArray alloc] init];
data = [NSMutableArray arrayWithArray:arr]; 
```

应该

```
NSMutableArray *data = [NSMutableArray arrayWithArray:arr]; 
```

现在对于问题本身：

1.  第一种情况是个坏主意，你转换了 NSArray，但你不能修改它，因为你并没有真正改变它的类型，只是将它分配给 NSMutaleArray 指针。

2.  第二种情况将创建一个新的 NSMutableArray，它是可变的，包含 NSArray 的内容，这很酷，您现在可以更改此数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:36:28.027

看起来你想要的是：

```
NSArray *arr = [[NSArray alloc] initWithObjects:@"Apple",@"Macbook", nil];
NSMutableArray *data = [arr mutableCopy]; 
```

或者：

```
NSMutableArray *data = [[NSMutableArray alloc] initWithObjects:@"Apple",@"Macbook", nil]; 
```

# c++ - C++：解析 132x65 二进制文件

> ID：10233487
> 
> 赞同：0
> 
> 时间：2012-04-19T17:28:44.160
> 
> 标签：c++, parsing, binary

所以这就是我必须/必须做的。我有一个 .txt 文件，其中包含 132x72 的大图。我需要做的是将它放入十六进制值的 ac 数组中。

我需要找到一种方法来获取前 8 行的第一个字符并将它们水平放在一起，这样我就可以将它们转换为十六进制。然后我需要这样做9次。

例子：

```
00000
00000
11111
01010
10101
10101
01010
10101 
```

我需要变成：

```
00101101
00110010
00101101
00110010
00101101 
```

最好/最简单的方法是什么？老实说，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:38:39.983

假设 1 和 0 是.txt 文件中的**字符**（如果是二进制文件，则需要先转换它们）：只需将文件逐行读入数组即可。然后您可以大步打印数组，即首先打印字符 0、8、16、24 ...，然后打印 1、9、17、... 等等：

```
for (i = 0; i < ROWS; i++) {
    for (j = 0; j < COLS; j++) {
        printf("%c", chars[i + j * ROWS]);
    }
    printf("\n");
} 
```

类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:58:02.847

这是一种有趣的格式。无论如何，读入一行，然后将值适当地添加到数组中。这就是我的意思：

输入线 1：`01101`

将对应于一些数组：`image[0][0] = 0, image[1][0] = 1 ...`

这可能最好`std::vector`使用该`push_back()`方法来完成。

```
// If you know the image size already
unsigned char image[NUM_ROWS][NUM_COLS/8]; // 8 bits per byte

std::ifstream file("yourfile.txt", std::ifstream::in);

// Initialize the array to 0 with memset or similar

// Read the whole file
int rows = 0;
int cols = 0;
while(!file.eof) {
  std::string line;

  // Get line by line
  std::getline(file, line);

  // Parse each line (probably better in another function)
  const char* str = line.c_str();
  while(str[rows] != '\0') {
    unsigned val = str[rows] - '0'; // Convert to int
    unsigned shift = 8 - (rows % 8); // 8 bits per byte - this is tricky big-endian or little endian?
    image[rows][cols/8] |= val << shift; // Convert to int val and pack it to proper position
    rows++;
  }

  cols++;
  rows = 0;
}

file.close(); 
```

该代码未经测试，但应该让您大致了解如何正确读取数据。现在您有了一个格式正确的二维数组，其中包含您的值（这就是移位的目的）。从这里，您可以将这些值作为`int`值并适当地转换它们（从二进制转换为基数 16 是微不足道的 - 即每个字节都有两个十六进制数字）

# java - java manifest classpath vs. -classpath

> ID：10233490
> 
> 赞同：2
> 
> 时间：2012-04-19T17:28:58.607
> 
> 标签：java, jar, classpath

我试图找出可执行 jar 文件的一个奇怪问题：xyz.jar 在清单文件 / 中有一个类路径，并且取决于 abc.jar 库。

不幸的是，xyz.jar 中的清单类路径不正确。为了避免灾难，我正在更新要使用的执行命令：java -classpath path/abc.jar:etc 而不是 java -jar

问题是 xyz.jar 出现故障，除非 abc.jar 不在类路径中。删除 abc.jar 后，程序会正确执行，并且不会引发异常。为什么？xyz.jar 必须从其他地方获取 abc.jar。xyz.jar 调用 abc.jar 中的方法。

-classpath 应该覆盖任何 $CLASSPATH 设置。即使使用-classpath，java是否仍会查看清单类路径？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T22:36:38.820

如果您指定 -jar，则仅使用清单中的类路径。所有其他都被忽略。如果需要重新指定类路径，请不要使用 -jar。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T18:44:36.007

我相信 jar 清单文件的 Class-Path 属性用于声明该 jar 中类的依赖关系，因此独立于主类路径。虽然在 java 命令中使用 -cp 确实可以替换 ClassPath 环境变量，但它对每个 jar 的单个 Class-Path 应该没有影响。

# javascript - 如何在 MongoDB shell 中使用变量作为字段名称的一部分？

> ID：10233491
> 
> 赞同：2
> 
> 时间：2012-04-19T17:29:01.257
> 
> 标签：javascript, mongodb, mongo-shell

如何在 mongodb shell 中使用变量作为字段名称的一部分？我正在尝试执行以下操作：

```
> var site = "google.com";
> var y = 10;
> var m = 5;

// This fails (field names as concatenation):
> db.test.update({ "domain" : site},
      { $inc : {"counts.year."+y : 1, "counts.month."+m : 1}}, upsert=true);

> Thu Apr 19 19:12:56 SyntaxError: missing : after property id (shell):1

// This works:
> db.test.update({ "domain" : site}, { $inc : {"counts.year.10" : 1,
      "counts.month.5" : 1}}, upsert=true); 
```

我想问题出在创建 JS 对象的方式上：例如`var t = 10; doc = {t : 0};`可以工作，但是`var t = 10; doc = {"Test."+t : 0}`；才不是。我该如何解决这个问题？

谢谢，

/大卫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T17:47:53.867

你可以试试 JS 对象：

```
var t = 10;
var doc = {};
doc["Test."+t] = 0; 
```

或者

```
var t = 10, doc = {};
doc["Test."+t] = 0; 
```

# c++ - boost：如何通过名称查找进程的进程ID？

> ID：10233492
> 
> 赞同：3
> 
> 时间：2012-04-19T17:29:01.910
> 
> 标签：c++, boost, process, terminate

我需要一种跨平台的方式来按名称查找正在运行的进程并获取其进程 ID。然后使用 boost 的进程库来终止它。

Boost 的进程库需要知道进程 id (http://www.highscore.de/boost/process/reference/classboost_1_1process_1_1process.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:04:16.010

我相信没有这样的跨平台设施。我所知道的最接近的是`pgrep`一个程序，而不是一个库，它不是 Windows 的一部分。

在具有 procfs 的类 Unix 系统上，您需要扫描`/proc`以匹配任何您想要的。我不知道如何在 Windows 上执行此操作，但我确信这是可能的，并且不会比您在 *nix 上执行的操作更糟糕。

# java - 即使我没有关闭 cookie，Glassfish 也会使用 URL 重写

> ID：10233494
> 
> 赞同：0
> 
> 时间：2012-04-19T17:29:11.953
> 
> 标签：java, jakarta-ee, glassfish

当我使用最新的 Chrome 浏览器并在未关闭 cookie 的情况下登录应用程序时，Glassfish 诉诸 URL 重写的原因是什么？有什么我忘了配置还是什么？它随机发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:52:00.757

JSESSIONID 是确定用户当前 HTTP 会话的值。它通常存储在浏览器 cookie（名为 JSESSIONID）中，以将请求与服务器上的适当会话对象连接起来。

原始请求中不存在 JSESSIONID 的原因可能是服务器没有机会将其发送回浏览器。没有当前 JSESSIONID cookie 的页面上的任何链接（例如使用 c:url）都将使用 URL 重写生成（URL 将包含 jsessionid）。在后续请求中，在将 JSESSIONID 存储为浏览器 cookie 之后，不会发生 URL 重写。

如果用户的浏览器不支持 cookie（或 cookie 的使用已关闭），则 URL 重写将允许用户通过添加到每个 URL 的 jsessionid 继续连接到同一个会话。

但是，如果要关闭 URL 重写，可以通过在 glassfish-web.xml 文件中将 enableURLRewriting 属性设置为 false 来实现

```
<property name="enableURLRewriting" value="false"/> 
```

您还可以通过确保存在适当的 cookie 并重定向到更合适的 URL 来消除 URL 重写。

# javascript - JavaScript setTimeout 不适用于提示框

> ID：10233504
> 
> 赞同：1
> 
> 时间：2012-04-19T17:30:04.493
> 
> 标签：javascript

这是我的代码：

```
var t = setTimeout("increment();", 1000 * 3);

var st;

function increment() {
    st = 1;
}

for (i = 0; i < 10; i++) {

    cnt = i;
    var no1 = Math.floor(Math.random() * 101);
    var no2 = Math.floor(Math.random() * 101);

    if ((i % 4) == 0) {
        crct_ans[i] = no1 + no2;
        quest[i] = no1 + " + " + no2;
    }
    else if ((i % 4) == 1) {
        crct_ans[i] = no1 - no2;
        quest[i] = no1 + " - " + no2;
    }
    else if ((i % 4) == 2) {
        crct_ans[i] = no1 * no2;
        quest[i] = no1 + " x " + no2;
    }
    else if ((i % 4) == 3) {
        crct_ans[i] = no1 / no2;
        quest[i] = no1 + " / " + no2;
    }

    ans[i] = prompt(quest[i], "");

    if (st == 1) break;
}​ 
```

如果 3 秒过去了，我想停止 for 循环。但这不起作用。For 循环也在 3 秒后运行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:32:17.387

像这样删除`()`和引用：

```
var t = setTimeout(increment, 3000); 
```

*   删除`()`会立即/立即禁用该功能的运行，而`setTimeout`需要 callabck。
*   删除引号可确保`eval`不在幕后使用。

* * *

`var`顺便说一句，使用单个关键字声明所有变量是一个好习惯，如下所示：

```
var t = setTimeout(increment, 3000), st; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:31:48.733

尝试像这样格式化：

```
var t = setTimeout(function(){increment();}, 3000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:36:22.910

如果它符合您的要求，您可以简单地检查通过了多少时间。

例子：

```
var start = new Date();

for(i = 0; i < 10; i++){
    var end = new Date();
    var elapsed = end.getTime() - start.getTime();

    if (elapsed >= 3000)
        break;
}​ 
```

# .net - 是否可以使用 Roslyn 检测无法访问的代码或其他内置编译警告

> ID：10233506
> 
> 赞同：3
> 
> 时间：2012-04-19T17:30:10.827
> 
> 标签：.net, roslyn

是否可以使用 Roslyn 检测无法访问的代码或其他内置编译警告？

```
private void DoSomething()
{
     string a = "TEST";

     throw new Exception("Why would I throw an exception here?");

     a = "This will never be reached"; //this is a compile time warning for unreachable code...Can I detect it?

} 
```

我尝试检查语义和语法方法中的节点属性，但没有看到任何问题或警告集合。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T18:17:30.143

您可以使用语义模型的 AnalyzeRegionControlFlow 方法发现这一点。您可以在与您感兴趣的语句相对应的文本范围内调用此传递。AnalyzeRegionControlFlow 将返回一个具有属性 RegionEndPointIsReachable 的数据结构，它还将告诉您所有跳入或跳出该区域的语句。

如果您想知道如何找到编译器将报告的实际诊断信息，您需要在语义模型上使用 GetDiagnostics 方法。

# c# - Cookie 值 c#

> ID：10233508
> 
> 赞同：0
> 
> 时间：2012-04-19T17:30:15.800
> 
> 标签：c#, cookies

我的问题是这是否是在 c# 中获取 cookie 值的正确方法。我的意图只是获取特定 cookie 的值并将其存储在我在示例中命名为“cookie”的字符串变量中。

```
WebRequest request = WebRequest.Create(url);
(request as HttpWebRequest).CookieContainer = new CookieContainer();
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
String cookie = response.Cookies[cookiename].ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:39:03.437

看：

保存饼干：

```
if (Request.Cookies["cookieName"] == null)
            Response.Cookies.Add(new HttpCookie("cookieName"));

        Response.Cookies["cookieName"].Expires.AddYears(5);
        Response.Cookies["cookieName"]["keyValue"] = "string value";   
        Response.AppendCookie(Response.Cookies["cookieName"]); 
```

恢复cookie：

```
HttpCookie CookieKey = Request.Cookies["cookieName"];
        if (CookieKey != null)
        {
            string value = CookieKey["keyValue"]; 
        } 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:34:05.437

除了错误检查（超时，异常） - 支持按名称查找 cookie

```
string cookie = response.Cookies[cookiename].ToString(); 
```

所以“是”是你问题的答案:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:34:40.943

`Request.Cookies`用于对服务器上的请求做出反应——`Response.Cookies`如果你在服务器上时它不存在，将创建一个 cookie——因为这在服务器执行代码的上下文之外，这是合适的。

# social-networking - 分享 - 网站中的社交按钮

> ID：10233511
> 
> 赞同：0
> 
> 时间：2012-04-19T17:30:32.833
> 
> 标签：social-networking

我想在我的网站上实现社交按钮。根据您的经验，最好的脚本选择是什么？

我发现了这个： http: [//www.addthis.com/](http://www.addthis.com/)

做一件简单的事情是否有很长的路要走？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:41:58.507

看起来您只需要在希望按钮显示在文档中的任何位置插入生成的块代码。对于纯 html 页面，这将非常简单（剪切和粘贴）。

对于 MVC 或服务器端生成的网站，它可能有点棘手，但您只需将相同的代码粘贴到您的视图中，并可能调用一个助手来包含

`<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=xa-4f904e27168d5473"></script>`

在您的文档的头部，或与您的其余代码内联。我想这真的取决于你的网站是如何设置的。

我会从非常容易到稍微适中来评价它。

# android - Sencha Touch 2 Carousel 在文本字段聚焦时缩小

> ID：10233512
> 
> 赞同：0
> 
> 时间：2012-04-19T17:30:33.503
> 
> 标签：android, sencha-touch, extjs, carousel

我正在使用 Ext.Carousel 为我的应用程序包装 3 个面板。在某个时刻，当用户单击一个按钮时，我需要一组字段以在叠加层中弹出。

目前，当用户将焦点放在其中一个文本字段上时，轮播（现在在后台）会缩小到位于 android 键盘上方，这使得这个浮动文本字段后面的所有内容看起来都像垃圾一样。这是示例代码：

```
Ext.Viewport.add(Ext.create('Ext.Carousel', {
    fullscreen: true,
    items: [
        {
            xtype: 'panel',
            items: [
                {
                    xtype: 'button',
                    handler: function() {
                        entryField = Ext.create('Ext.Panel', {
                            hidden: true,
                            modal: true,
                            floating: true,
                            width: '100%',
                            height: 'auto',
                            items: [
                                {
                                    xtype: 'textfield'
                                }
                            ]
                        });
                        entryField.showBy(this);
                    }
                }
            ]
        },

        {
            xtype: 'panel'
        },

        {
            xtype: 'panel'
        }
    ]
})); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:39:24.390

解决了：

拉起键盘时，视口实际上会缩小。要解决这个问题，只需将 Viewport 高度设置为应用程序初始化时的屏幕高度即可。这样，当键盘出现时，它将保持这个高度而不是弯曲。

# sql - 根据参数在 Oracle 中显示不同的报告

> ID：10233513
> 
> 赞同：0
> 
> 时间：2012-04-19T17:30:34.600
> 
> 标签：sql, oracle, report

我正在使用 Oracle 报告生成器，我必须显示摘要和详细报告。此工具不具备向下钻取功能。我需要它根据用户在开始时输入的参数显示详细信息或摘要报告。谁能告诉我如何根据输入的用户参数动态显示一个或另一个报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:25:02.073

您将使用重复框架来显示内容，您可以根据报表参数的值设置此框架的可见性。

因此，您将只有其中两个 - 一个用于您的第一个选择，另一个用于第二个。

# java - Android移动对象以触摸

> ID：10233515
> 
> 赞同：0
> 
> 时间：2012-04-19T17:30:45.053
> 
> 标签：java, android, graphics, imageview

我对在 Android 上构建应用程序有点陌生。我确实有一些Java开发经验，但我现在做的项目首先是在Android上。

我正在构建一个基本的纸牌游戏，我希望卡片移动到我触摸的特定位置。我做到了，卡片移动到接触点，但是一旦动画结束，它就会弹回起始位置。

我添加了一个图像重新定位代码，但现在它从那个点开始动画。任何想法，有人吗？

我做的代码是：

```
 public class FinallyActivity extends Activity {
        /** Called when the activity is first created. */

        EditText DBG;
        ImageView iv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        DBG = (EditText)  findViewById(R.id.editText1);
        iv =  (ImageView) findViewById(R.id.imV1);      
    }

    private void RunAnimations(MotionEvent event) {
    //  Animation b = AnimationUtils.loadAnimation(this,R.anim.cardtrans);
        int xStart, yStart, dx, dy;

        xStart = iv.getLeft();
        yStart = iv.getTop();
        Animation b = new TranslateAnimation(Animation.ABSOLUTE,0,Animation.ABSOLUTE,event.getX()-50,
                Animation.ABSOLUTE,0,Animation.ABSOLUTE,event.getY()- 105);
        b.setDuration(3000);
        iv.clearAnimation();
        iv.startAnimation(b);   

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            RunAnimations(event);
        }

                iv.layout((int)event.getX()-25,(int) event.getY()-105,
                (int)event.getX()+25,(int) event.getY()-35);
        return true;

    }

} 
```

谢谢大家！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:09:50.080

b.fillAfter(true)

[http://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter(boolean)](http://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter%28boolean%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-09T17:54:58.010

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    imageView = findViewById(R.id.subview);
    imageView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch (event.getActionMasked()) {
                case MotionEvent.ACTION_DOWN:
                    xDown = event.getX();
                    yDown = event.getY();
                    break;
                case MotionEvent.ACTION_MOVE:
                    float moveX,moveY;
                    moveX = event.getX();
                    moveY = event.getY();

                    float distanceX = moveX -xDown;
                    float distanceY  = moveY -yDown;
                    imageView.setX(imageView.getX()+distanceX);
                    imageView.setY(imageView.getY()+distanceY);
                    break;
            }
            return true;
        }
    });
} 
```

# php - PHP 回显变量未正确显示

> ID：10233516
> 
> 赞同：2
> 
> 时间：2012-04-19T17:30:48.290
> 
> 标签：php, wordpress

我有以下

```
 <?php echo '<img src="/wp-content/themes/CAFC/images/cards/big/'.get_post_meta($post->ID, "bigcard", true).'" alt="'.the_title().'" />'; ?> 
```

但是由于某种原因，我的“the_title”变量在输出时出现在我的图像之前......

```
UK Fuels Fuel Card
<img alt="" src="/wp-content/themes/CAFC/images/cards/big/ukfuels.png"> 
```

谁能告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:33:15.127

这是因为`the_title()`auto 会呼应标题。试试`get_the_title()`吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:39:10.773

尝试用作：

```
$title = the_title(); 
```

并且，使用它`$title`来代替`the_title();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:35:50.093

改用这个：

```
<?php echo '<img src="/wp-content/themes/CAFC/images/cards/big/'.get_post_meta($post->ID, "bigcard", true).'" alt="'.get_the_title().'" />'; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T17:36:38.993

我认为这是您的浏览器。它会为您更改属性的位置。前。Firefox 可以根据标准修复一些 HTML 代码。

# objective-c - 非重复 arc4random_uniform

> ID：10233517
> 
> 赞同：4
> 
> 时间：2012-04-19T17:30:49.450
> 
> 标签：objective-c, xcode, arc4random

我一直试图让非重复的 arc4random_uniform 为我的 iPhone 应用程序工作很长时间。在没有运气的情况下，在stackoverflow上完成了所有与此相关的问题和答案，现在我希望有人能帮助我。我想做的是在 1 到 104 之间选择 13 个不同的随机数。我已经让它工作到选择 13 个不同的数字，但有时其中两个是相同的。

```
int rand = arc4random_uniform(104); 
```

这就是我正在做的事情，然后我使用 rand 从数组中进行选择。如果更容易打乱数组然后从顶部选择 13，那么我会尝试，但我需要帮助，因为这似乎更难。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-19T17:40:18.820

没有任何保证`ar4random_uniform()`不会重复。想一想——你要求它产生一个介于 0 和 103 之间的数字。如果你这样做 105 次，它别无选择，只能重复它之前的选择之一。该函数如何知道您要请求多少次号码？

您要么必须检查已经获得的数字列表，如果重复，则请求新的数字列表，或者随机排列数组。为此，应该有很多关于 SO 的问题。这是最古老的方法之一：[随机播放 NSMutableArray 的最佳方法是什么？](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray).

还有不少关于非重复随机数的问题：[https ://stackoverflow.com/search?q=%5Bobjc%5D+non-repeating+random+numbers](https://stackoverflow.com/search?q=%5Bobjc%5D+non-repeating+random+numbers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-22T21:21:57.477

您可以像这样创建`NSMutableSet`并实现它：

```
NSMutableArray* numbers = [[NSMutableArray alloc] initWithCapacity: 13];
NSMutableSet* usedValues = [[NSMutableSet alloc] initWithCapacity: 13];

for (int i = 0; i < 13; i++) {
  int randomNum = arc4random_uniform(104);
  while ([usedValues containsObject: [NSNumber numberWithInt: randomNum]) {     
    randomNum = arc4random_uniform(104)
  }
  [[usedValues addObject: [NSNumber numberWithInt: randomNum];
  [numbers addObject: [[NSNumber numberWithInt: randomNum];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T23:59:38.487

或者，您也可以创建一个由 105 个整数组成的可变数组，每个整数都是唯一的，并且 arc4random_uniform([arrayname count]) 然后从数组中删除相同的整数，然后您每次都会得到一个随机 int 而无需重复（尽管较小数组变得更容易预测下一个数字是什么，只是简单的概率）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T09:08:29.903

这里描述了我为这个确切问题找到的最佳算法：

[选择单个随机值组合的算法？](https://stackoverflow.com/questions/2394246/algorithm-to-select-a-single-random-combination-of-values)

您只需循环 13 次，而不是打乱 104 个元素的数组。这是我在Objective C中的算法实现：

```
// Implementation of the Floyd algorithm from Programming Pearls.
// Returns a NSSet of num_values from 0 to max_value - 1.
static NSSet* getUniqueRandomNumbers(int num_values, int max_value) {
    assert(max_value >= num_values);
    NSMutableSet* set = [NSMutableSet setWithCapacity:num_values];
    for (int i = max_value - num_values; i < max_value; ++i) {
        NSNumber* rand = [NSNumber numberWithInt:arc4random_uniform(i)];
        if ([set containsObject:rand]) {
            [set addObject:[NSNumber numberWithInt:i]];
        } else {
            [set addObject:rand];
        }
    }
    return set;
} 
```

# ruby - RVM 安装的 mysql2 gem 可以在 Rails 上正常工作……但不能与独立的 Ruby 脚本一起使用

> ID：10233519
> 
> 赞同：1
> 
> 时间：2012-04-19T17:30:52.363
> 
> 标签：ruby, gem, rvm, mysql2

我在 Mac OS X Lion 环境中随 RVM 一起安装了 Ruby 和 Rails。

我使 Rails 与 mysql2 gem 一起正常工作（使用 MAMP 库而不是 mysql 安装）。所以一切都很好...

直到我尝试编写一个独立的 ruby​​ 脚本（在 Rails 上下文之外）。现在我无法让 mysql2 gem 工作。

从脚本内部或 Ruby 命令行 (irb) 中，

```
require "mysql2" 
```

指令导致以下错误：

```
1.9.2p290 :001 > require "mysql2"
dyld: lazy symbol binding failed: Symbol not found: _mysql_get_client_info
  Referenced from: /Users/mick/.rvm/gems/ruby-1.9.2-p290/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
  Expected in: flat namespace

dyld: Symbol not found: _mysql_get_client_info
  Referenced from: /Users/mick/.rvm/gems/ruby-1.9.2-p290/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
  Expected in: flat namespace 
```

我尝试了几件事：

*   `export DYLD_LIBRARY_PATH=/Applications/MAMP/Library/lib/mysql/:$DYLD_LIBRARY_PATH`

*   使用`sudo ln -s /Applications/MAMP/Library/lib/mysql/libmysqlclient.16.dylib /usr/lib/libmysqlclient.16.dylib`

没有任何效果。我想我很快就要哭了……

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T18:40:06.480

奇怪的是，这件事就发生在今天和一位同事身上。这是我为修复它所做的：

```
gem uninstall mysql2
brew install mysql
gem install mysql2 
```

就这么简单。希望它也对你有用！

# linux - 如何使用 xxd 向 hexdump 插入偏移量？

> ID：10233526
> 
> 赞同：3
> 
> 时间：2012-04-19T17:31:10.653
> 
> 标签：linux, hex, offset, dump, xxd

有没有一种简单的方法可以向 xxd 生成的十六进制转储添加偏移量？

即代替

```
0000: <data>
0004: <data>
0008: <data> 
```

我应该得到

```
Offset+0000: <data>
Offset+0004: <data>
Offset+0008: <data> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-08T22:26:08.753

`xxd`现在似乎带有偏移支持，使用`-o [offset]`

例如：`xxd -o 0x07d20000 file.bin`

我`xxd`在 Gentoo Linux 上的版本有它，但我更深入地挖掘以帮助其他发行版的人们：

`xxd V1.10 27oct98 by Juergen Weigert`-- 不要使用 xxd 版本 -- 我发现这个源代码没有偏移支持！！所以我追踪了我的二进制文件的来源：

`app-editors/vim-core-7.4.769`-- 显然，只要您安装了现代 VIM，您就可以从添加的偏移支持中获益；至少在 Gentoo 上，但我正在引导你朝着正确的方向前进。

如果您发现您的发行版仍然提供较旧的 xxd，请考虑手动编译您确认支持偏移量的较新 VIM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:13:26.063

这就是我现在正在做的事情..它工作得很好，但它只是添加偏移量的那种蹩脚的方法:)

```
xxd file.bin | xxd -r -s 0x2e00000 | xxd -s 0x2e00000 > file.hex 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:36:23.390

在下面阅读您的评论：

> 我希望二进制文件的第一个字节出现在偏移量处。即只添加一个偏移量而不寻找。

让我相信做到这一点的唯一方法是解析输出并修改它以添加所需的偏移量。

我没有在文档中找到任何可以轻松完成此操作的内容，抱歉。:(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T19:07:46.330

如果您可以使用 AWK，这里有一个概念证明：

```
$ xxd random.bin | gawk --non-decimal-data ' # <-- treat 0x123 like numbers
> {
>     offset = 0x1000                # <-- your offset, may be hex of dec
> 
>     colon = index($0, ":") - 1
>     x = "0x" substr($0, 1, colon)  # <-- add 0x prefix to original offset ...
>     sub(/^[^:]*/, "")              # <-- ... and remove it from line
> 
>     new = x + offset               # <-- possible thanks to --non-decimal-data
>     printf("%0"colon"x", new)      # <-- print updated offset ...
>     print                          # <-- ... and the rest of line
> }'
0001000: ac48 df8c 2dbe a80c cd03 06c9 7c9d fe06  .H..-.......|...
0001010: bd9b 02a1 cf00 a5ae ba0c 8942 0c9e 580d  ...........B..X.
0001020: 6f4b 25a6 6c72 1010 8d5e ffe0 17b5 8f39  oK%.lr...^.....9
0001030: 34a3 6aef b5c9 5be0 ef44 aa41 ae98 44b1  4.j...[..D.A..D.
   ^^^^
   updated offsets (+0x1000) 
```

我敢打赌它在 Perl 或 Python 中会更短，但 AWK 只是感觉更“脚本式”:-)

# c# - c# 中的 goto 语句慢吗？

> ID：10233527
> 
> 赞同：8
> 
> 时间：2012-04-19T17:31:13.253
> 
> 标签：c#, goto

我正在开发一个 C# .NET 应用程序，该应用程序在大量数据（平均 1000 万个数据点）上使用了一些相当复杂的科学公式。我正在做的部分工作需要尽可能优化公式实现。

我注意到一个公式实现使用了 goto，这让我想知道：goto 是否比其他流控制结构慢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T17:32:02.817

> goto 比其他流控制结构慢吗？

不，所有其他流量控制结构基本上都是`goto`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T16:01:45.197

> 我注意到一个公式实现使用了 goto，这让我想知道：goto 是否比其他流控制结构慢？

`goto`不会比任何其他流量控制机制慢。它像大多数流控制机制一样被编译成`br.s`（或类似的）MSIL 指令。但是，在某些情况下`goto`可能会稍微快一些。它们主要限于涉及使用嵌套循环`break`和`continue`嵌套循环内部的情况。考虑以下代码。

```
bool condition = false;
for (int i = 0; i < BigNumber; i++)
{
    for (int j = 0; j < i; j++)
    {
        for (int k = 0; k < j; k++)
        {
            condition = Evaluate(i, j, k);
            if (condition)
            {
              // break out of everything
            }
        }
    }
} 
```

有不同的方法可以让你摆脱整个事情。这是一种方法。

```
bool condition = false;
for (int i = 0; i < BigNumber; i++)
{
    for (int j = 0; j < i; j++)
    {
        for (int k = 0; k < j; k++)
        {
            condition = Evaluate(i, j, k);
            if (condition) break;
        }
        if (condition) break;
    }
    if (condition) break;
} 
```

问题是每个循环都必须检查`condition`标志。我们可以用 a 重构它，`goto`让它更高效，启动更优雅。

```
for (int i = 0; i < BigNumber; i++)
{
    for (int j = 0; j < i; j++)
    {
        for (int k = 0; k < j; k++)
        {
            if (Evaluate(i, j, k)) goto BAILOUT;
        }
    }
}
BAILOUT: 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T17:32:47.153

C# 中的`goto`指令并不比任何其他控制流构造慢。事实上，绝大多数控制流结构（if、while、for 等）都是根据`goto`.

例如：

```
if (someExpr) { 
  Console.WriteLine("here");
}
Console.WriteLine("there"); 
```

基本上编译成以下

```
gotoIf !someExpr theLabel;
Console.WriteLine("here");
theLabel:
Console.WriteLine("there"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T17:32:49.687

`if`s并由编译器在内部`for`翻译为`goto`s，因此它们不比`goto`s快

# java - 从 JOptionPane 下拉列表框中选择后无法刷新 jtextarea

> ID：10233529
> 
> 赞同：0
> 
> 时间：2012-04-19T17:31:28.787
> 
> 标签：java, swing, jtextarea, joptionpane, jcheckbox

我第一次从列表中选择一个选项，值显示在 jtextarea 第二次我选择一个选项，值没有改变。有刷新选项吗？还是解决这个问题的更好方法？谢谢！

这是代码片段：

```
String[] choices = {"Apple","Orange", "Pear"}; 

String fruit= (String) JOptionPane.showInputDialog(null, "Select Fruit:","Select Fruit", JOptionPane.QUESTION_MESSAGE, null, choices, choices[0]);  

if (fruit!= null){

jtextarea.append("Name\t:  " + fruit.getName() + "\n"); 
jtextarea.append("Color\t:  " + fruit.getColor() + "\n");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:41:43.890

```
fruit.getName()
fruit.getColor() 
```

这两个是错误的，因为它是对您的 JOptionPane 返回的内容的引用，而不是带有 getter 的对象。因为它不是您的数组`choices`包含字符串。只需附加您的 joptionpane 返回的内容`fruit`（这将是 Apple、Orange 或 Pear）：

```
jtextarea.append("Name\t:  " + fruit + "\n"); 
```

# android - 如何在屏幕上显示安卓平板电脑或智能手机上的光标位置？

> ID：10233537
> 
> 赞同：9
> 
> 时间：2012-04-19T17:31:58.927
> 
> 标签：android

我希望能够在屏幕上显示类似于 PC 上的鼠标光标之类的东西。有谁知道如何使用应用程序或通过修改设备上的选项来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T18:10:50.960

在 Android 4.0 上，转到设置 > 开发人员选项 > 指针位置并将其打开。这对于演示非常方便。

我不知道在以前的 Android 版本上有解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T00:40:50.137

实际上，该设置`Developer Options`与@CommonsWare 的答案相同。对`Jelly Bean`，它的位置开始变得[更加棘手](http://www.ninjaromeo.com/enable-usb-debugging-developer-options-jelly-bean/)。

# java - 在 ext2 文件系统的根目录中创建新文件

> ID：10233538
> 
> 赞同：2
> 
> 时间：2012-04-19T17:31:59.827
> 
> 标签：java, android

我正在为 Android 创建一个应用程序，它使用户能够创建加密的 LUKS 分区，然后将它们挂载到外部存储器上的给定目录。为了使分区可用，我使用 Busybox mkfs.ext2 命令创建了一个 ext2 文件系统。一旦用户尝试在分区的根目录创建文件/目录，就会出现问题。由于某种原因，无法通过 Java 创建文件，因为“File.mkdirs()”方法失败。但是，可以通过命令行创建此文件。并且此错误仅在分区的根目录中发生（即，如果我通过命令行创建文件夹，则可以通过 Java 在该文件夹中创建文件）。另外，如果我创建一个 vfat 文件系统而不是 ext2，我可以创建一个文件。

任何帮助将不胜感激。

哈利

**编辑**

固定的。我正在以 root 身份安装文件系统

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T15:58:01.657

我对这个问题的最终解决方案是创建一个 vfat 文件系统而不是 ext2，因为 vfat 没有权限等……这对我有用，因为我不需要额外的权限安全性。但是，如果您需要一个 ext2 文件系统，您需要以 root 身份挂载，但希望它可供其他用户使用，我建议您查看 mount ownmask 选项（man mount）。

# javascript - 添加删除嵌套的有序列表

> ID：10233539
> 
> 赞同：-2
> 
> 时间：2012-04-19T17:31:59.843
> 
> 标签：javascript, jquery

```
<ol>
    <li>Sales</li>
    <ol>
        <li>North</li>
        <li>South</li>
    </ol>
    <li>Support</li>
    <ol>
        <li>Pc</li>
        <li>Mac</li>
    </ol>
    <li>Accounts</li>
</ol>

   1\.  Sales
         1\. North
         2\. South
   2\. Support
         1\. Pc
         2\. Mac
   3\. Accounts 
```

有人可以建议一种从网页的有序列表中构造、添加和删除元素的方法。我也在寻找可以编辑的列表名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:44:29.833

这是一个小提琴，展示了如何向列表中添加元素和删除项目。 [http://jsfiddle.net/7QrvV/](http://jsfiddle.net/7QrvV/)

```
<ol id="main_ol">
    <li>Sales</li>
    <ol>
        <li>North</li>
        <li>South</li>
    </ol>
    <li>Support</li>
    <ol>
        <li>Pc</li>
        <li>Mac</li>
    </ol>
    <li>Accounts</li>
</ol>​

//add to the end of the list
$('#main_ol').append('<li>a</li>');

//remove support list item
$('#main_ol li:eq(3)').remove(); 
```

# python - wxPython：将框架最小化到托盘

> ID：10233542
> 
> 赞同：1
> 
> 时间：2012-04-19T17:32:09.183
> 
> 标签：python, wxpython

我正在编写一个我想为其制作 GUI 的应用程序。我已经有了一些在 wxpython 中制作 GUI 的经验，但有一件事我还没有尝试过；正在将应用程序最小化到托盘。我一直在研究并想出了如何制作图标，但我陷入泥潭的是将框架最小化到托盘。我没有找到可以用来隐藏框架的函数（wx.Frame.Hide() 不是答案）。你们有谁知道我可以做到这一点的任何方式吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:52:49.180

您需要查看 wxPython 演示的源代码。查找提及 DemoTaskBarIcon 的部分。然后你会想要绑定到 wx.EVT_ICONIZE。您最终会在“iconize”事件处理程序中使用框架的 Hide() 方法。不然怎么隐藏？然后再次显示它，您需要使用任务栏图标中的菜单（从技术上讲，它是 Windows 上的系统托盘图标）。也可以看看：

*   [http://bytes.com/topic/python/answers/699757-wxpython-how-minimize-taskbar](http://bytes.com/topic/python/answers/699757-wxpython-how-minimize-taskbar)
*   [http://wxpython-users.1045709.n5.nabble.com/minimize-to-try-question-td2359957.html](http://wxpython-users.1045709.n5.nabble.com/minimize-to-try-question-td2359957.html)

# android - 在不耗尽电池的情况下保持服务唤醒

> ID：10233543
> 
> 赞同：3
> 
> 时间：2012-04-19T17:32:15.053
> 
> 标签：android, android-service, alarmmanager

我有一个应用程序需要通过 wifi 持续监听传入的请求。在后台运行的服务会完成这项工作。但是，当屏幕关闭时，此服务会在一段时间后进入休眠状态。

我搜索的解决方案是使用 AlarmManager 保持清醒。但据说这会耗尽设备的电池。那么，还有其他方法可以做到这一点吗？

例如，Whatsapp 和 Skype 等应用程序是做什么的？它们似乎不会消耗太多电池，但它们可以持续运行服务，对吗？

此外，如果 AlarmManager 是唯一的方法，如果有人可以分享一个教程或示例，那将是非常好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:38:05.757

> 我搜索的解决方案是使用 AlarmManager 保持清醒

那将无济于事。一旦设备进入睡眠状态，您的套接字连接将被终止。您需要使用部分`WakeLock`加 a`WifiLock`来保持设备持续开机。

> 但据说这会耗尽设备的电池。

并且肯定`WakeLock`会`WifiLock`耗尽电池。

> 那么，还有其他方法可以做到这一点吗？

如果您需要使用 WiFi，则不需要。

> 例如，Whatsapp 和 Skype 等应用程序是做什么的？

当设备想要进入睡眠状态时，他们不使用 WiFi。一旦 WiFi 无线电断电，它们就会使用移动数据，因此`WifiLock`不需要。对于移动数据，传入的数据包将唤醒设备，因此您只需要一段`WakeLock`时间即可实际工作，而不是不断地工作。

不过，最好的答案是改用 C2DM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:38:30.763

实际上，进入睡眠状态的不是您的服务，而是您设备上的 WiFi 单元。HTC 等制造商（或者可能是所有 Android 设备）已经在他们的设备上实施了这种行为，其中 WiFi 单元在屏幕关闭一段时间后进入待机状态。这有助于设备在不使用时节省电池。

# python - ADODBAPI SQL 查询

> ID：10233544
> 
> 赞同：0
> 
> 时间：2012-04-19T17:32:16.763
> 
> 标签：python, sql

我有一个 python SQL 查询，它旨在调用一个过程，然后在结果中返回该查询但是使用下面的代码我只得到这个输出：

```
adodbapi.adodbapi._SQLrows object at 0x0000000004CDE278 
```

而不是选择它应该抓取的行和数据，我对 SQL 和有限的 python 一无所知，所以要温柔:)

```
# Connect to the SQL DB

conn = adodbapi.connect("Provider=SQLOLEDB; SERVER=xx.x.x.x; Initial Catalog=master_db;User Id=User; Password=Pass; ")
curs = conn.cursor()

# Execute SQL procedure "

curs.execute('util.referencing_procedure', )
results = curs.fetchall()

print results

conn.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:26:42.057

您需要遍历结果。大概：

```
for row in results:
    print row 
```

# facebook - Facebook Graph Explorer 中的照片权限

> ID：10233547
> 
> 赞同：0
> 
> 时间：2012-04-19T17:32:30.313
> 
> 标签：facebook, facebook-graph-api, permissions, facebook-like

为什么我不能通过Graph Explorer喜欢这张[照片？](http://www.facebook.com/photo.php?fbid=3611605126197&set=a.3561005581240.193812.1155834080&type=3&theater)我可以使用浏览器做到这一点，但后来我尝试通过 Graph API Explorer 发布一个类似的内容，我得到`false`了响应。

```
https://graph.facebook.com/3611605126197/likes 
```

由于某种原因，Graph Explorer 的工作方式与浏览器不同。为什么？我知道这是一个私人相册，但仍然可以使用浏览器喜欢这张照片，所以必须有一种方法可以使用 Graph Explorer 来喜欢它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T21:43:59.837

这是不可能的。如果您不是该人的朋友，则无法通过 API 获取照片。`friend_photos`仅供您的朋友使用。您可能可以在您的个人 Facebook 帐户上看到它，但使用 API 传输的隐私级别不同。

但是，您*可以*查看 Facebook 页面照片，但不能查看个人资料。

# animation - 反向旋转旋转div的子元素

> ID：10233548
> 
> 赞同：0
> 
> 时间：2012-04-19T17:32:32.250
> 
> 标签：animation, css, rotation

我有一个旋转的 div，它的边缘包含许多 div。我想给孩子 div 总是正面朝上的错觉。为此，我尝试反向旋转子 div ( `transform:rotate(-360deg);`)，但它们似乎总是与父 div 的方向相同。

有没有办法让子 div 总是正面朝上？

这是一个小提琴：http: [//jsfiddle.net/J7xyB/](http://jsfiddle.net/J7xyB/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T23:04:27.177

解决了

礼貌[http://lea.verou.me/2012/02/moving-an-element-along-a-circle/](http://lea.verou.me/2012/02/moving-an-element-along-a-circle/)

[http://jsfiddle.net/cswkd/](http://jsfiddle.net/cswkd/)

# c# - 在不同页面上的可视 Web 部件之间共享数据

> ID：10233549
> 
> 赞同：1
> 
> 时间：2012-04-19T17:32:36.000
> 
> 标签：c#, sharepoint, session

我需要在一个页面上共享来自 Web 部件的信息，在第二个页面上使用 Web 部件。SharePoint 没有默认会话状态，假设为了参数我无法启用会话。

如果有很多信息，不能通过查询字符串发送，还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:06:01.080

根据需要传递的数据的性质，有不同的方法来处理它。我的第一个想法可能是将其保存在活动用户的 cookie 中。另一种选择是将数据保存到当前用户的 SPUser 对象的属性包中。确实感觉像是用户会话状态的场景.. :)

# javascript - 在页面加载时启动引导模式

> ID：10233550
> 
> 赞同：263
> 
> 时间：2012-04-19T17:32:36.343
> 
> 标签：javascript, html, twitter-bootstrap, events, bootstrap-modal

我根本不懂 JavaScript。Bootstrap 文档说

> 通过 JavaScript 调用模态：`$('#myModal').modal(options)`

我不知道如何在页面加载时调用它。使用 Bootstrap 页面上提供的代码，我可以在元素单击时成功调用 Modal，但我希望它在页面加载时立即加载。

* * *

## 回答 #1

> 赞同：495
> 
> 时间：2012-04-19T18:52:06.690

只需将要在页面加载时调用的模式包装在`load`文档头部的 jQuery 事件中，它应该会弹出，如下所示：

**JS**

```
<script type="text/javascript">
    $(window).on('load', function() {
        $('#myModal').modal('show');
    });
</script> 
```

**HTML**

```
<div class="modal hide fade" id="myModal">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
        <p>One fine body…&lt;/p>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn">Close</a>
        <a href="#" class="btn btn-primary">Save changes</a>
    </div>
</div> 
```

您仍然可以通过使用如下链接调用模式来调用页面中的模式：

```
<a class="btn" data-toggle="modal" href="#myModal">Launch Modal</a> 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2013-07-03T09:39:37.917

你不需要`javascript`显示模态

最简单的方法是用“in”替换“hide”

```
class="modal fade hide" 
```

所以

```
class="modal fade in" 
```

你需要添加`onclick = "$('.modal').hide()"`按钮关闭；

PS：我认为最好的方法是添加 jQuery 脚本：

```
$('.modal').modal('show'); 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2014-07-19T07:32:33.710

只需添加以下内容 -

```
class="modal show" 
```

工作示例-

```
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<div class="container">
  <!-- Trigger the modal with a button -->
  <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>

  <!-- Modal -->
  <div class="modal show" id="myModal" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Modal Header</h4>
        </div>
        <div class="modal-body">
          <p>Some text in the modal.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
  </div>

</div>
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-04-28T06:20:07.247

你可以试试这个可运行的代码——

```
$(window).load(function()
{
    $('#myModal').modal('show');
});
```

```
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<div class="container">
  <!-- Trigger the modal with a button -->
  <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Modal Header</h4>
        </div>
        <div class="modal-body">
          <p>Some text in the modal.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
  </div>

</div>
```

更多可以在**[这里](http://getbootstrap.com/javascript/#modals)**找到。

认为你有完整的答案。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2018-07-09T12:09:12.640

**2021 年更新**

## 引导程序 5

现在 Bootstrap 不再需要 jQuery，使用 JavaScript 显示模式很容易。

```
var myModal = new bootstrap.Modal(document.getElementById('myModal'), {})
myModal.toggle() 
```

[演示](https://www.codeply.com/p/qR6vAyVTDJ)

## 引导程序 4

Bootstrap 4 的模态标记略有变化。以下是如何在页面加载时打开模态，并可选择延迟显示模态...

```
$(window).on('load',function(){
    var delayMs = 1500; // delay in milliseconds

    setTimeout(function(){
        $('#myModal').modal('show');
    }, delayMs);
});    

<div class="modal fade" id="myModal">
      <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">My Modal</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary mx-auto" data-dismiss="modal">Close</button>
                </div>
            </div>
      </div>
</div> 
```

[演示](https://www.codeply.com/go/b5LjwrH3Sf/bootstrap-4-open-modal-page-load)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-07-22T13:50:06.830

关于 Andre 的 Ilich 所说的，你必须在你称之为 jquery 的行之后添加 js 脚本：

```
<script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.1.js" type="text/javascript"></script>

<script type="text/javascript">
     $(window).load(function(){
         $('#myModal').modal('show');
      });
</script> 
```

就我而言，这是问题希望它有所帮助

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-04-12T00:15:07.933

使用 Bootstrap 3 和 jQuery（2.2 和 2.3）测试

```
$(window).on('load',function(){
  $('#myModal').modal('show');
});

<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"><i class="fa fa-exclamation-circle"></i>&nbsp; //Your modal Title</h4>
        </div>
        <div class="modal-body">
          //Your modal Content
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
        </div>
      </div>

    </div>
</div> 
```

[https://jsfiddle.net/d7utnsbm/](https://jsfiddle.net/d7utnsbm/)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-02-11T22:12:26.693

在我的情况下，添加 jQuery 来显示模式不起作用：

```
$(document).ready(function() {
    $('#myModal').modal('show');
}); 
```

这似乎是因为模态具有属性 aria-hidden="true"：

```
<div class="modal fade" aria-hidden="true" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"> 
```

需要删除该属性以及上面的 jQuery：

```
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"> 
```

请注意，我尝试将模态类从 更改`modal fade`为`modal fade in`，但这没有用。此外，将类从 更改`modal fade`为`modal show`停止模式能够关闭。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-09-21T18:48:16.220

您可以简单地通过数据属性激活模式，而无需编写任何 JavaScript。

设置为 true 的选项“show”在初始化时显示模态：

```
<div class="modal fade" tabindex="-1" role="dialog" data-show="true"></div> 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2018-03-27T12:27:44.903

就像其他人提到的那样，使用 display:block 创建您的模式

```
<div class="modal in" tabindex="-1" role="dialog" style="display:block">
... 
```

将背景放在页面上的任何位置，不一定要位于页面底部

```
<div class="modal-backdrop fade show"></div> 
```

然后，为了能够再次关闭对话框，添加这个

```
<script>
    $("button[data-dismiss=modal]").click(function () {
        $(".modal.in").removeClass("in").addClass("fade").hide();
        $(".modal-backdrop").remove();
    });
</script> 
```

希望这可以帮助

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-10-23T12:32:04.750

## 这是一个解决方案[没有javascript初始化！]

**如果不**使用 javascript 初始化您的模态，我找不到示例`$('#myModal').modal('show')`，因此这里有一个关于如何在页面加载时没有**javascript 延迟的情况下实现它的建议。**

1.  使用类和样式编辑模态容器 div：

`<div class="modal in" id="MyModal" tabindex="-1" role="dialog" style="display: block; padding-right: 17px;">`

2.  用类和风格编辑你的身体：

    `<body class="modal-open" style="padding-right:17px;">`

3.  添加模态背景 div

    `<div class="modal-backdrop in"></div>`

4.  添加脚本

    ```
    $(document).ready(function() {
        $('body').css('padding-right', '0px');
        $('body').removeClass('modal-open');
        $('.modal-backdrop').remove();

        $('#MyModal').modal('show'); }); 
    ```

    将会发生的是，您的模态的 html 将在页面加载时加载，而无需任何 javascript（无延迟）。此时您无法关闭模态，这就是为什么我们有 document.ready 脚本，以便在加载所有内容时正确加载模态。我们实际上将删除自定义代码，然后（再次）使用 .modal('show') 初始化模式。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-11-14T11:32:12.490

除了 user2545728 和 Reft 的答案，**没有 javascript**但有`modal-backdrop in`

**3 件事要补充**

1.  具有`modal-backdrop in`.modal 类之前的类的 div
2.  `style="display:block;"`到 .modal 类
3.  `fade in`与 .modal 类一起

**例子**

```
<div class="modal-backdrop in"></div>

<div class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="channelModal" style="display:block;">

    <div class="modal-dialog modal-lg" role="document">

        <div class="modal-content">

            <div class="modal-header">

                <h4 class="modal-title" id="channelModal">Welcome!</h4>

            </div>

            <div class="modal-body" style="height:350px;">

                How did you find us?

            </div>

        </div>

    </div>

</div> 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-03-05T17:12:57.823

```
<div id="ModalStart" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-body">
          <p><i class="icon-spinner icon-spin icon-4x"></i></p>
    </div>
</div> 
```

即使没有 Javascript，您也可以在开始时显示它。只需删除类“隐藏”。

```
class="Modal" 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-09-12T14:22:37.780

在 bootstrap 3 中，您只需要通过 js 初始化模态，如果在页面加载时模态标记在页面中，模态将显示出来。

如果您想阻止这种情况，`show: false`请使用初始化模式的选项。像这样的东西： `$('.modal').modal({ show: false })`

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-08-21T22:36:18.383

# Update 2020 - Bootstrap 5

Building on the excellent responses from previous answers, in Bootstrap 5 with no jQuery, this has worked;

```
document.querySelector('[data-target="#exampleModal"]').click(); 
```

Full snippet:

```
window.onload = () => {
  document.querySelector('[data-target="#exampleModal"]').click();
}
```

```
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" rel="stylesheet" />

<div class="container py-3">

  <!-- Button trigger modal -->
  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
    Launch demo modal
  </button>

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>

</div>
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-03-25T15:52:29.340

您可能希望保持`jquery.js`延迟以加快页面加载速度。但是，如果`jquery.js`被推迟，则`$(window).load`可能无法正常工作。那你可以试试

`setTimeout(function(){$('#myModal').modal('show');},3000);`

页面完全加载后它会弹出你的模式（包括jquery）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-05-31T09:45:05.583

也许已经晚了，但是一旦我无法解决这个订单问题，并且没有显示模态；我使用了 jquery click();

我试过了，效果很好:)

创建一个按钮，调用 Modal show > style 该按钮作为 display : none; 例子 ：

```
 $( "#clickme" ).click();
```

```
<html>
<head>
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<body>
<input type="button" value="0"  id="clickme" style="display:none;" data-toggle="modal" data-target="#exampleModal" />   
<!-- Modal -->
<div id="exampleModal" class="modal" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Clicked Successfully</h4>
      </div>
      <div class="modal-body">
        <p>Some text in the modal.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

</body></html>
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-01-06T05:02:23.213

你可以使用 jQuery 来处理这个

首先在您的模板上导入

```
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> 
```

并使用 jQuery Script 在模态框上点击 id

```
<script type="text/javascript">
      $(window).on('load', function() {
        $('#staticBackdrop').modal('show');
    });
</script> 
```

这是案例显示 django 消息的模式

```
{% if messages %}
      {% for message in messages %}
      <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="false">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Message</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              {{ message }}
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}

    {% endif %} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-10-14T17:30:38.403

为了避免引导程序被否决并失去其功能，只需创建一个常规启动按钮，为其提供一个 Id，然后使用 jquery '单击它'，如下所示： 启动按钮：

```
<button type="button" id="btnAnouncement" class="btn btn-primary" data-toggle="modal" data-target="#modalAnouncement">
  See what´s new!
</button> 
```

jQuery 触发器：

```
$(document).ready(function () {
  $('#btnAnouncement').click();
)} 
```

希望能帮助到你。干杯!

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-01-04T21:17:02.243

我最近需要启动一个没有 jQuery 的 Bootstrap 5 模式，而不是使用 Django 消息单击按钮（例如，在页面加载时）。我是这样做的：

**模板/HTML**

```
<div class="modal" id="notification">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Notification!</h5>
        <button type="button" class="btn-close"
                data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {% for m in messages %}
          {{ m }}
        {% endfor %}
      </div>
      <div class="modal-footer justify-content-between">
        <a class="float-none btn btn-secondary" href="{% url 'some_view' %}"
           type="button">
          Link/Button A
        </a>
        <button type="button" class="btn btn-primary"
                data-bs-dismiss="modal">
          Link/Button B
        </button>
      </div>
    </div>
  </div>
</div> 
```

**文件或模板中的 JS**

```
{% block javascript %}
  {{ block.super }}
  <script>
    var test_modal = new bootstrap.Modal(
      document.getElementById('notification')
    )
    test_modal.show()
  </script>
{% endblock javascript %} 
```

此方法将在没有 Django 模板的情况下工作；只需使用 HTML 并将 JS 放在一个文件或`script`元素中，该文件或元素在 Bootstrap JS 之后加载到`body`元素结束之前。

# python - 绑定一个调用类内其他方法的方法

> ID：10233553
> 
> 赞同：0
> 
> 时间：2012-04-19T17:32:45.973
> 
> 标签：python, dynamic, methods, bind

我经常发现自己试图稍微滥用 python 允许的一些动态性（我在这里使用 python3，但应该没有太多差异）。

在这种情况下，我想将我的`unittest.TestCase`, 中的单个 test_ 方法拆分为在运行时创建的多个方法。

（这是一个关于罗马数字的Kata，但我实际上没有TDD：我后来写了测试）

这是测试：

```
class TestNumbers(TestCase):
    def test_number(self):
            for i in range(3000):
                    self.assertEqual(i, roman_to_int(int_to_roman(i))) 
```

这就是我尝试编写它的方式：

```
from functools import partial
from types import MethodType

class TestNumbers(TestCase):
    pass

def test_number(self, n):
    self.assertEqual(n, roman_to_int(int_to_roman(n)))

for i in range(3000):
    name = str(i)
    test_method = MethodType(partial(test_number, n=i), TestNumbers)
    setattr(TestNumbers, "test" + name, test_method) 
```

（或者，我也尝试动态地创建许多 TestCase 子类和`setattr(globals(), ...)`它们）

我知道：这并没有太多目的，它也可能更慢，等等。但这只是一个 POC，我正在尝试了解如何让它工作

通过使用 MethodType，测试变成了一个绑定方法，但是在里面，assertEqual 显然变成了一个函数，当试图调用它时它会失败`TypeError: assertEqual() takes at least 3 arguments (2 given)`

我试图将 test_number 更改为

```
def test_number(self, n):
    self.assertEqual(self, n, roman_to_int(int_to_roman(n))) 
```

但这只会在隐藏的 TestCase 方法中更深地挖掘出同样的问题：`TypeError: _getAssertEqualityFunc() takes exactly 3 arguments (2 given)`

我在stackoverflow上查看了here并发现了类似的问题（如[Python：绑定一个未绑定的方法？](https://stackoverflow.com/questions/1015307/python-bind-an-unbound-method)），但没有一个涉及绑定一个在其中调用目标类的其他绑定方法的方法

我还尝试研究元类（[http://docs.python.org/py3k/reference/datamodel.html#customizing-class-creation](http://docs.python.org/py3k/reference/datamodel.html#customizing-class-creation)），但它似乎与我想要做的不匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:39:24.590

如果您将方法直接添加到类中，则无需自己绑定它。

```
class C(object):
  def __init__(self):
    self.foo = 42

def getfoo(self):
  return self.foo

C.getfoo = getfoo
c=C()
print(c.getfoo()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:02:23.030

在 Python 2 上，有函数、未绑定和绑定方法。将方法作为实例绑定到类不会使其成为未绑定方法，而是使其等效于类方法或元类方法。

在 Python 3 上，不再有绑定和未绑定的方法，只有函数和方法，所以如果你将 assertEqual 作为一个函数，这意味着你的 testx 方法没有绑定到实例，这才是真正的问题。

在 Python 2 上，您所要做的就是在 MethodType 调用上将 None 分配给实例，它就会起作用。

所以，替换：

```
test_method = MethodType(partial(test_number, n=i), TestNumbers) 
```

为了：

```
test_method = MethodType(partial(test_number, n=i), None, TestNumbers) 
```

在 Python 3 上，只需将函数分配给类就可以了，就像其他答案所暗示的那样，但在您的情况下，真正的问题是部分对象不会成为方法。

对于您的情况，一个简单的解决方案是使用 lambda 而不是 partial。

代替：

```
test_method = MethodType(partial(test_number, n=i), TestNumbers) 
```

利用：

```
test_method = lambda self: test_number(self, i) 
```

它应该工作......

真正巧妙的解决方案是重写 partial 以返回具有所需参数的真实函数。您可以使用旧版本中的所有内容和额外的默认参数创建一个函数实例。像这样的东西：

```
code = test_number.__code__
globals = test_number.__globals__
closure = test_number.__closure__

testx = FunctionType(code, globals, "test"+name, (i,), closure)
setattr(TestNumbers, "test" + name, testx) 
```

# vb.net - 在 label.text 中更改一种文字颜色

> ID：10233557
> 
> 赞同：0
> 
> 时间：2012-04-19T17:32:50.027
> 
> 标签：vb.net, winforms

Windows 窗体 .net 4.0 vb 应用程序。这是一件小事，但我试图改变 label.text 中一个单词的颜色。但它没有发生，我有一种强烈的感觉，要让它发生，它的价值将比它的价值更广泛......我正在尝试使用的片段如下......我只是错过了一个关键细节还是老实说，这更像是一种负担而不是它的价值..

```
 Dim _changeLabel1 As String = " Note Fields Marked in "
    Dim _changeLabel2 As String = " are Required"
    Dim _attrib As New Label
    With _attrib
        .ForeColor = Color.Red
        .Text = "RED"
    End With
    _notificationLabel1.Text = _changeLabel1 + " " + _attrib.Text + " " + _changeLabel2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:36:03.827

不幸的是，Winform 标签不支持此功能。

您可以改用多个标签，其中一个为红色的`RED`文本。

这是关于此事的[相关问题](https://stackoverflow.com/questions/11311/formatting-text-in-winform-label)。

# mediaelement.js - 如何让 Silverlight 播放器在 Mediaelement.js 中工作？

> ID：10233560
> 
> 赞同：1
> 
> 时间：2012-04-19T17:32:57.540
> 
> 标签：mediaelement.js

我想将 Silverlight 播放器添加到多编解码器支持 HTML 的播放器列表中，因为除了其他支持的编解码器之外，我还想提供 WMV 文件，但我在网站上看不到太多文档用于启用 Silverlight 版本，而不是通过 JavaScript 启动它。

我有点不知所措，因为我尝试了一些我在下面发布的内容的变体，但没有取得任何成功。我已经查看了 mediaelement-and-player.js 源代码，但对于我需要在 HTML 中做些什么，我没有任何反应。有没有人对我需要做些什么来使基于 HTML 的 Silverlight 版本正常工作有任何建议/提示？

如果这不能通过 HTML 完成，那也没关系 - 但请提供一个清晰的示例。

非常感谢，吉姆

```
<video width="320" height="240" poster="poster.jpg" controls="controls" preload="none">
<!-- MP4 for Safari, IE9, iPhone, iPad, Android, and Windows Phone 7 -->
<source type="video/mp4" src="myvideo.mp4" />
<!-- WebM/VP8 for Firefox4, Opera, and Chrome -->
<source type="video/webm" src="myvideo.webm" />
<!-- Ogg/Vorbis for older Firefox and Opera versions -->
<source type="video/ogg" src="myvideo.ogv" />
<!-- Optional: Add subtitles for each language -->
<track kind="subtitles" src="subtitles.srt" srclang="en" />
<!-- Optional: Add chapters -->
<track kind="chapters" src="chapters.srt" srclang="en" /> 
<!-- Flash fallback for non-HTML5 browsers without JavaScript -->
<object width="320" height="240" type="application/x-shockwave-flash" data="flashmediaelement.swf">
    <param name="movie" value="flashmediaelement.swf" />
    <param name="flashvars" value="controls=true&file=myvideo.mp4" />
    <!-- Image as a last resort -->
    <img src="myvideo.jpg" width="320" height="240" title="No video playback capabilities" />
</object>
<object width="320" height="240" type="application/x-silverlight-2" data="silverlightmediaelement.xap">
    <param name="movie" value="silverlightmediaelement.xap" />
    <param name="flashvars" value="controls=true&file=myvideo.wmv" />
    <!-- Image as a last resort -->
    <img src="myvideo.jpg" width="320" height="240" title="No video playback capabilities" />
</object> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T17:01:25.860

原来我需要指定该文件的类型为 video/wmv。如果其他人遇到这种情况，您可能可以添加类似

```
 <source type="video/wmv" src="myvideo.wmv" /> 
```

到格式列表。

我正在使用 HTML 模板引擎 (Velocity) 并即时输入类型，因此每个人的视频最终可能会略有不同。

# java - 针对动态嵌套属性的 Spring MVC 表单提交绑定

> ID：10233561
> 
> 赞同：1
> 
> 时间：2012-04-19T17:33:04.117
> 
> 标签：java, spring, hibernate, spring-mvc

我没有想法并求助于社区专家。我正在使用 Hibernate 单表继承，这促使我朝这个方向发展。

我有一个 BaseEntity 类，其中包含许多使用鉴别器的子类。我使用 Spring MVC 注释控制器进行 CRUD 操作和 JSP 使用 Spring 表单标签作为视图。

我有一个 backingForm，其中包括表单使用的子类实体。为了节省大量重复代码，我有一个 common.jsp，其中包含 BaseEntity 中的字段，然后是每个子类的其他 JSP。这些其他 JSP 包括 common.jsp。我可以通过查看 pathVariable 然后加载正确的子类，将其添加到表单中来很好地显示数据。表单提交和 Spring 的 DataBinding 让我着迷。任何人都可以提出一种允许 Spring 动态发布到特定嵌套属性的好方法。把它想象成在表单提交上使用多态性。我知道这可能看起来令人困惑，但 idf 任何人都曾尝试过它，这应该很有意义:-)。这与动态列表绑定（AutoPopulating）无关，这是非常不同的。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:50:58.530

在带注释的控制器中，您可以作为单独的方法执行：

```
@ModelAttribute("backingObject")
public SuperClass getBackingObject(HttpRequest request //etc) {
  //determine value of your path variable
  //create appropriate subcass
  return subClassInstanceForBinding;
} 
```

因此，当 spring 进行绑定时，它将在您放置并使用它的模型映射中找到“backingObject”，而不是寻找构造函数。

# tridion - 将 Tridion 2009 SP1 CM 数据库升级到 2011 SP1

> ID：10233567
> 
> 赞同：3
> 
> 时间：2012-04-19T17:33:30.483
> 
> 标签：tridion

从 Tridion 2009 SP1 到 2011 SP1 对内容管理器数据库执行升级前检查时，我在管理器和日志文件中收到以下错误。

有什么线索吗？

```
<TdmLog DateCreated="2012-04-19T10:20:26" ApplicationVersion="6.1.0.996">
<Event DateTime="2012-04-19T10:20:26" Id="0" Type="1">
    <ErrorCode>0</ErrorCode>
    <Description>Tridion Content Management Database Upgrade Analysis</Description>
    <Source>MainModule.ProcessScripts</Source>
</Event> 
```

![数据库更新管理器](../Images/7d962a7db0c85fe0b8cc0f174e6538d4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T09:50:11.700

努诺是对的。ErrorCode 0 表示没有错误，所以预升级成功执行，没有发现任何问题。如果升级前检查发现任何问题，那么您将收到错误消息弹出并且错误代码不会为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:44:50.547

`<ErrorCode>0</ErrorCode>`暗示没关系？我怀疑这是一条成功消息，可能请与客户支持再次确认。

# php - 使用 formbuilder 在组合框中选择默认值

> ID：10233572
> 
> 赞同：0
> 
> 时间：2012-04-19T17:33:52.247
> 
> 标签：php, symfony, formbuilder

我在尝试在组合框（html 选择标签）usign Symfony2 FormBuilder 中选择默认值时遇到问题。这是我的代码：

**MyController.php**我发送到Form th 默认省份被选中

```
$n = new Foo();

$em = $this->getDoctrine()->getEntityManager();
$province = $em->getRepository('MyEntityBundle:SYS_TProvince')->find('ES-M');

$form = $this->createForm(new NewsletterType($province), $n);

$request = $this->getRequest();
if ($request->getMethod() == 'POST') {
    $form->bindRequest($request);

    if ($form->isValid()) {
        // some action
    }
} 
```

**NewsletterType.php**我在省字段中使用默认省份

```
class NewsletterType extends AbstractType
{
    private $province;

    function __construct($province)
    {
        $this->province = $province;
    }

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('idnewsletter', 'hidden');
        $builder->add('email', 'email');
        $builder->add('type', 'entity', 
            array('label' => 'type',
                'class' => 'MeediamSplashBundle:USR_TType',
                'property' => 'description',
                'preferred_choices' => array(3,5,7)
            ));
        $builder->add('province', 'entity', 
            array('label' => 'province',
                'class' => 'MeediamSplashBundle:SYS_TProvince',
                'property' => 'name',
                'data' => $this->province
            ));
        $builder->add('postalcode');
        $builder->add('status', 'hidden');
        $builder->add('created', 'hidden');
    }

    public function getName()
    {
        return 'newsletter';
    }
} 
```

**SYS_TProvince.php**实体

```
<?php

namespace SciOf\Meediam\SplashBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity
 * @ORM\Table(name="SYS_TProvince")
 */
class SYS_TProvince
{
    /**
     * @ORM\Id
     * @ORM\Column(type="string", length=5, nullable=false)
     */
    protected $idprovince;

    /**
     * @ORM\Column(type="string", length=3, nullable=false)
     * @Assert\NotBlank()
     */
    protected $idcountry;

    /**
     * @ORM\Column(type="string", length=60, nullable=false)
     * @Assert\NotBlank()
     */
    protected $name;

    public function getIdprovince()             { return $this->idprovince; }
    public function getIdcountry()              { return $this->idcountry; }
    public function getName()                   { return $this->name; }
    public function setIdprovince($idprovince)  { $this->idprovince = $idprovince; }
    public function setIdcountry($idcountry)    { $this->idcountry = $idcountry; }
    public function setName($name)              { $this->name = $name; }

    public function __toString()                { return $this->idprovince; }

} 
```

显然，一切都很好，但它不起作用。如果我使用“preferred_choices”，它可以工作，但我无法通过“数据”选择默认值。

该对象在类中很好，如果我使用 ->getIdProvice() 我会得到对象的 PK，并且因为是字符串而出现错误。

我阅读了一些信息，但我不知道该怎么做：

[如何在 Symfony2 中设置表单字段的默认值？](https://stackoverflow.com/questions/7913086/how-to-set-default-value-for-form-field-in-symfony2) [http://symfony.com/doc/current/reference/forms/types/field.html](http://symfony.com/doc/current/reference/forms/types/field.html)

有人看到任何错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:43:54.180

如果你想要一个默认值，你需要在创建表单之前在你的实体中设置你的默认值。

像`$yourEntity->setProvince('my default value');`

但在你的情况下，我不确定二传手，你能添加你的实体吗？

# c - 使用 CreatThread api 创建线程后，控制台上的输出包含问号

> ID：10233574
> 
> 赞同：0
> 
> 时间：2012-04-19T17:34:04.720
> 
> 标签：c, multithreading, winapi

大家... 我刚刚开始学习如何使用 Windows API 创建进程和线程。如果我希望线程在屏幕上显示整数，我的代码确实可以工作，但是在使用字符数组时它不起作用......有人可以告诉我我做错了什么吗？编码：

```
#include<stdio.h>
#include<Windows.h>
#include<conio.h>
#include<tchar.h>
#include<strsafe.h>
#include<string.h>

#define N 4
#define bufferSize 255

DWORD WINAPI Threader(LPVOID Parameter);

typedef struct Data {
    char value[bufferSize];
} Data, *pToData;

int main()
{
    int i;
    char c[bufferSize];
    pToData threadData[N];
    HANDLE handleArray[N];
    DWORD threadID[N];

    FILE *file=fopen("niti.txt", "r");

    for(i=0; i<N; i++)
    {
        fscanf(file, "%s", c);
        threadData[i] = (pToData) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, sizeof(Data));
        strcpy(threadData[i]->value, c);
        handleArray[i]=CreateThread(NULL, 0, Threader, threadData[i], 0, &threadID[i]);
    }

    WaitForMultipleObjects(N, handleArray, TRUE, INFINITE);

    for(i=0; i<N; i++)
    {
        CloseHandle(handleArray[i]);
        if(threadData[i] != NULL)
        {
            HeapFree(GetProcessHeap(), 0, threadData[i]);
            threadData[i] = NULL;
        }
    }

    fclose(file);

    return 0;
}

DWORD WINAPI Threader(LPVOID Parameter)
{
    HANDLE hStdOut;
    TCHAR messageBuffer[bufferSize];
    size_t cchStringSize;
    DWORD dwChars;
    pToData dataArray;
    char temp[bufferSize];

    hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);
    if( hStdOut == INVALID_HANDLE_VALUE )
        return 1;

    dataArray=(pToData)Parameter;

    StringCchPrintf(messageBuffer, bufferSize, TEXT("Parameter = %s\n"), dataArray->value); 
    StringCchLength(messageBuffer, bufferSize, &cchStringSize);
    WriteConsole(hStdOut, messageBuffer, (DWORD)cchStringSize, &dwChars, NULL);

    return 0;
} 
```

如果我将结构中的**值**更改为**int并在****main**中执行相同操作，则输出是正确的。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T17:49:22.013

您可能正在为 Unicode 编译但输出一个 char 数组。您的症状听起来像是编码不匹配，而 Unicode 输出函数与 ANSI char 数组不匹配是导致大量问号的不匹配。

换句话说，我假设您的代码解析`StringCchPrintf`为`StringCchPrintfW`. 然后你就不能通过通过`char*`而不是通过`wchar_t*`时来满足合同`dataArray->value`。

使用`wchar_t`or`TCHAR`代替`char`for `dataArray->value`。或者调用输出函数的**A**版本。或者为ANSI编译。

# php - 从任何文件类型的 URL 创建图像

> ID：10233577
> 
> 赞同：25
> 
> 时间：2012-04-19T17:34:20.647
> 
> 标签：php, image, gd

我知道[`imagecreatefromgif()`](http://us2.php.net/manual/en/function.imagecreatefromgif.php), [`imagecreatefromjpeg()`](http://us2.php.net/manual/en/function.imagecreatefromjpeg.php)，但是有没有办法从*任何*类型的有效图像[`imagecreatefrompng()`](http://us2.php.net/manual/en/function.imagecreatefrompng.php)的 url 创建图像资源（最好是 png） ？还是您必须确定文件类型然后使用适当的功能？

 *当我说 url 时，我的意思是`http://sample.com/image.png`，而不是数据 url

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2015-09-19T09:57:41.117

最简单的方法是让 php 决定文件类型：

```
$image = imagecreatefromstring(file_get_contents($src)); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-20T13:24:28.767

## 也许你想要这个：

```
$jpeg_image = imagecreatefromfile( 'photo.jpeg' );
$gif_image = imagecreatefromfile( 'clipart.gif' );
$png_image = imagecreatefromfile( 'transparent_checkerboard.PnG' );
$another_jpeg = imagecreatefromfile( 'picture.JPG' );
// This requires you to remove or rewrite file_exists check:
$jpeg_image = imagecreatefromfile( 'http://example.net/photo.jpeg' );
// SEE BELOW HO TO DO IT WHEN http:// ARGS IS NEEDED:
$jpeg_image = imagecreatefromfile( 'http://example.net/photo.jpeg?foo=hello&bar=world' ); 
```

## 这是如何完成的：

```
function imagecreatefromfile( $filename ) {
    if (!file_exists($filename)) {
        throw new InvalidArgumentException('File "'.$filename.'" not found.');
    }
    switch ( strtolower( pathinfo( $filename, PATHINFO_EXTENSION ))) {
        case 'jpeg':
        case 'jpg':
            return imagecreatefromjpeg($filename);
        break;

        case 'png':
            return imagecreatefrompng($filename);
        break;

        case 'gif':
            return imagecreatefromgif($filename);
        break;

        default:
            throw new InvalidArgumentException('File "'.$filename.'" is not valid jpg, png or gif image.');
        break;
    }
} 
```

### 对`switch`相同功能进行一些小修改后，即可使用 Web url：

```
 /* if (!file_exists($filename)) {
        throw new InvalidArgumentException('File "'.$filename.'" not found.');
    } <== This needs addiotional checks if using non local picture */
    switch ( strtolower( array_pop( explode('.', substr($filename, 0, strpos($filename, '?'))))) ) {
        case 'jpeg': 
```

之后，您可以将其用于`http://www.tld/image.jpg`：

```
$jpeg_image = imagecreatefromfile( 'http://example.net/photo.jpeg' );
$gif_image = imagecreatefromfile( 'http://www.example.com/art.gif?param=23&another=yes' ); 
```

## 一些证明：

正如您可以从官方 PHP 手册[function.imagecreatefromjpeg.php中看到的那样，GD 允许从](http://php.net/manual/en/function.imagecreatefromjpeg.php)[function.fopen.php](http://www.php.net/manual/en/function.fopen.php)支持的 URL 加载图像，因此**无需先获取图像**并将其保存到文件中，然后打开该文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-14T09:09:11.133

我使用这个功能。它支持所有类型的 url 和流包装器以及 php 可以处理的所有图像类型。

```
/**
 * creates a image ressource from file (or url)
 *
 * @version: 1.1 (2014-05-02)
 *
 * $param string:    $filename                    url or local path to image file
 * @param [bool:     $use_include_path]           As of PHP 5 the FILE_USE_INCLUDE_PATH constant can be used to trigger include path search.
 * @param [resource: $context]                    A valid context resource created with stream_context_create(). If you don't need to use a custom context, you can skip this parameter by NULL
 * @param [&array:   $info]                       Array with result info: $info["image"] = imageinformation from getimagesize, $info["http"] = http_response_headers (if array was populated)
 *
 * @see: http://php.net/manual/function.file-get-contents.php
 * @see: http://php.net/manual/function.getimagesize.php
 *
 * @return bool|resource<gd>                       false, wenn aus Dateiinhalt keine gueltige PHP-Bildresource erstellt werden konnte (z.b. bei BMP-Datei)
 * @throws InvalidArgumentException                Wenn Datei kein gueltiges Bild ist, oder nicht gelesen werden kann
 *
 */
function createImageFromFile($filename, $use_include_path = false, $context = null, &$info = null)
{
  // try to detect image informations -> info is false if image was not readable or is no php supported image format (a  check for "is_readable" or fileextension is no longer needed)
  $info = array("image"=>getimagesize($filename));
  $info["image"] = getimagesize($filename);
  if($info["image"] === false) throw new InvalidArgumentException("\"".$filename."\" is not readable or no php supported format");
  else
  {
    // fetches fileconten from url and creates an image ressource by string data
    // if file is not readable or not supportet by imagecreate FALSE will be returnes as $imageRes
    $imageRes = imagecreatefromstring(file_get_contents($filename, $use_include_path, $context));
    // export $http_response_header to have this info outside of this function
    if(isset($http_response_header)) $info["http"] = $http_response_header;
    return $imageRes;
  }
} 
```

用法（简单示例）：

```
$image = createImageFromFile("http://sample.com/image.png"); 
```

用法（复杂示例）：

```
// even sources with php extensions are supported and e.g. Proxy connections and other context Options
// see http://php.net/manual/function.stream-context-create.php for examples
$options = array("http"=> 
                  array("proxy" => "tcp://myproxy:8080",
                        "request_fulluri" => true
                       )
                  );
$context = stream_context_create($options);

$image = createImageFromFile("http://de3.php.net/images/logo.php", null, $context,$info);

// ... your code to resize or modify the image 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-05T05:09:30.943

这可能会帮助你

> $image = imagecreatefromstring(file_get_contents('your_image_path_here'));

例子：`$image = imagecreatefromstring(file_get_contents('sample.jpg'));`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T13:42:05.070

首先使用函数获取 url`file_get_contents($url)`并将内容保存到文件中。之后，您可以使用适当的图像处理功能来进一步更改。您可以使用以下代码从 url 保存图像。这是示例代码：

```
$url = "http://sample.com/image.png";
$arr = explode("/",$url);
$img_file = dir(__FILE__).'/'.$arr[count($arr)-1];
$data = file_get_contents($url);
$fp = fopen($img_file,"w");
fwrite($fp,$data);
fclose($fp); 
```

谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T19:33:05.417

你分析这段代码。

```
$url=$_SERVER['REQUEST_URI'];
$url=explode('.',$url);
$extension=$url[1];
switch($extension){
   case'jpg':
      imagecreatefromjpeg();
   break;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-17T21:57:54.440

您可能还对最高级的版本感兴趣：

[http://salman-w.blogspot.com/2008/10/resize-images-using-phpgd-library.html](http://salman-w.blogspot.com/2008/10/resize-images-using-phpgd-library.html)

```
<?php
/*
 * PHP function to resize an image maintaining aspect ratio
 * http://salman-w.blogspot.com/2008/10/resize-images-using-phpgd-library.html
 *
 * Creates a resized (e.g. thumbnail, small, medium, large)
 * version of an image file and saves it as another file
 */

define('THUMBNAIL_IMAGE_MAX_WIDTH', 150);
define('THUMBNAIL_IMAGE_MAX_HEIGHT', 150);

function generate_image_thumbnail($source_image_path, $thumbnail_image_path)
{
    list($source_image_width, $source_image_height, $source_image_type) = getimagesize($source_image_path);
    switch ($source_image_type) {
        case IMAGETYPE_GIF:
            $source_gd_image = imagecreatefromgif($source_image_path);
            break;
        case IMAGETYPE_JPEG:
            $source_gd_image = imagecreatefromjpeg($source_image_path);
            break;
        case IMAGETYPE_PNG:
            $source_gd_image = imagecreatefrompng($source_image_path);
            break;
    }
    if ($source_gd_image === false) {
        return false;
    }
    $source_aspect_ratio = $source_image_width / $source_image_height;
    $thumbnail_aspect_ratio = THUMBNAIL_IMAGE_MAX_WIDTH / THUMBNAIL_IMAGE_MAX_HEIGHT;
    if ($source_image_width <= THUMBNAIL_IMAGE_MAX_WIDTH && $source_image_height <= THUMBNAIL_IMAGE_MAX_HEIGHT) {
        $thumbnail_image_width = $source_image_width;
        $thumbnail_image_height = $source_image_height;
    } elseif ($thumbnail_aspect_ratio > $source_aspect_ratio) {
        $thumbnail_image_width = (int) (THUMBNAIL_IMAGE_MAX_HEIGHT * $source_aspect_ratio);
        $thumbnail_image_height = THUMBNAIL_IMAGE_MAX_HEIGHT;
    } else {
        $thumbnail_image_width = THUMBNAIL_IMAGE_MAX_WIDTH;
        $thumbnail_image_height = (int) (THUMBNAIL_IMAGE_MAX_WIDTH / $source_aspect_ratio);
    }
    $thumbnail_gd_image = imagecreatetruecolor($thumbnail_image_width, $thumbnail_image_height);
    imagecopyresampled($thumbnail_gd_image, $source_gd_image, 0, 0, 0, 0, $thumbnail_image_width, $thumbnail_image_height, $source_image_width, $source_image_height);
    imagejpeg($thumbnail_gd_image, $thumbnail_image_path, 90);
    imagedestroy($source_gd_image);
    imagedestroy($thumbnail_gd_image);
    return true;
}
?> 
```*

# c# - 从 C# 导入非托管代码导入到 delphi

> ID：10233578
> 
> 赞同：0
> 
> 时间：2012-04-19T17:34:21.493
> 
> 标签：c#, delphi, marshalling, unmanaged, dllimport

我有连接到运行良好的 dll 的 ac# 类。

现在我在 Delphi 中需要相同的功能。最好的方法是什么？我不想在 Delphi 中再次编写所有导入。有没有办法在delphi中导入c#类或任何其他快速简便的方法..

这是我的 c# 类中的一个函数：

```
 /// Return Type: ABS_STATUS->ABS_LONG->int
    ///pszDsn: ABS_CHAR*
    ///phConnection: ABS_CONNECTION*
    [System.Runtime.InteropServices.DllImportAttribute("bsapi.dll", EntryPoint = "ABSOpen", CallingConvention = System.Runtime.InteropServices.CallingConvention.StdCall)]
    public static extern int ABSOpen([System.Runtime.InteropServices.InAttribute()] [System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.LPStr)] string pszDsn, ref uint phConnection); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:25:51.760

这在德尔福很简单：

```
function ABSOpen(pszDsn: PAnsiChar; var phConnection: Cardinal): Integer; 
    stdcall; external 'bsapi.dll'; 
```

毫无疑问，您将拥有比这更多的功能，但它们都应该足够简单。如果我是你，我会回到原来的 C++ 头文件，它应该比你的 p/invokes 更容易翻译。

我认为 p/invoke 到 Delphi 导入单元没有任何好的转换工具。即使对于 Delphi 的 C++ 头文件，我也不相信有很好的通用工具。你可以看看[JEDI 项目，它有一些有用的资源](http://jedi.grizzlydev.com/www/api-howto.html)，但在我看来，是时候卷起袖子了！

# html - CSS 垂直对齐 - 我不明白什么？

> ID：10233582
> 
> 赞同：2
> 
> 时间：2012-04-19T17:34:32.843
> 
> 标签：html, vertical-alignment, css

我在搞乱大家最喜欢的 CSS 主题，垂直对齐。我发现了一个对我来说毫无意义的小案例，这可能意味着我无法理解有关 CSS 的一些东西。

我有以下 HTML（它用于探索代码，所以请原谅内联样式）：

```
<div style="height: 40px; line-height: 40px; vertical-align: middle; border: 1px solid blue; margin: 1em 2em;">
    <span style="background-color: Blue; height: 30px; width: 30px; margin: 5px 1em; display:inline-block;"> </span>
    <span>Some text</span>
</div> 
```

这将显示一个蓝色框和一些文本，两者都垂直居中。但是如果我用`&nbsp;`常规空格字符替换，另一个跨度中的文本不再居中。我创建了一个[JSFiddle](http://jsfiddle.net/mFryV/1/)来演示这一点。

我的问题是 - 为什么`&nbsp;`在第一个跨度中从一个更改为空格字符会改变第二个跨度的垂直对齐方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T17:47:27.330

您对`vertical-align`物业的运作方式感到困惑。**它不适用于块级元素。**当它设置在非表格单元格和非内联元素上时，该属性实际上应用于该元素内的所有内联文本，*而不是*元素本身。

当您使用常规空间时，该空间实际上并没有被浏览器“渲染”，因为它不是真正的内容。因此，整个框成为文本行（因为您将其显示为内联块）并且*基线*设置在父级的最底部与底部的黑色边框相对，这就是文本出现在下方的原因那里。

当您使用不间断空间时，该空间*是*内容并且会被渲染，这会将文本的基线移动到文本实际出现在蓝色框内的位置。它实际上并没有使文本*居中。*它离我屏幕的中心很远。基线刚刚根据内容移动。您会[从这个示例](http://jsfiddle.net/YbTzT/)中注意到，它还会更改连续文本的行高。

解决此问题的一种简单方法是将蓝色框浮动到左侧，然后手动设置其余文本的行高。[请参阅 jsFiddle。](http://jsfiddle.net/VEvWh/)

```
<div style="height: 40px; line-height: 40px; vertical-align: middle; border: 1px solid blue; margin: 1em 2em;">
    <span style="background-color: Blue; height: 30px; width: 30px; margin: 5px 1em; float: left;"></span>
    <span>Some text that continues on and on and on sothat you can see what is actually happening here blah blah blah blah blah</span>
</div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:51:17.813

可以帮忙吗？：

[http://jsfiddle.net/mFryV/18/](http://jsfiddle.net/mFryV/18/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:46:21.733

实体`&nbsp;`代表**不间断空格**，是空格字符的变体。他们不一样。

事实上，实体阻止了自动换行

[在维基百科](http://en.wikipedia.org/wiki/Non-breaking_space)上阅读更多信息

此外，空白导致“空”跨度，这将导致“不良行为”

# jflex - 如何在 jflex 中注释代码

> ID：10233587
> 
> 赞同：2
> 
> 时间：2012-04-19T17:34:56.320
> 
> 标签：jflex

与 flex 不同，`/* */`并且`\\`

似乎在 jlex 中不起作用。他们给出错误“在词法动作开始时缺少大括号”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T17:40:52.307

您可以在 JLex 规范的第一和第三部分（即定义和 java 代码部分）中包含注释，但不能在第二部分（规则）中包含注释，因为 JLex 会认为它们是模式的一部分。

写`%state DUMMY`

在声明部分，然后在规则部分写注释，如下所示：

`<DUMMY>. { /* this is my comment */ }`

# mysql - mysql COUNT() num 行太慢

> ID：10233588
> 
> 赞同：4
> 
> 时间：2012-04-19T17:35:10.110
> 
> 标签：mysql, indexing

我正在尝试从具有**22m**行的表中获取用户的订阅者数量。

我的sql如下：

```
SELECT
    COUNT(id)
FROM
    subscribers
WHERE
    suid=541839243781 
```

需要**12.6020 秒**才能加载

但是以下相同的查询（获取用户的订阅）只需要**0.0036 秒**即可加载（似乎还可以）

```
SELECT
    COUNT(uid)
FROM
    subscribers
WHERE
    uid=541839243781 
```

我的解释：

```
 id  select_type     table            type   possible_keys    key    key_len     ref     rows                 Extra
     1     SIMPLE    dvx_subscribers    index        4            4       16        NULL    22041275    Using where; Using index 
```

显示创建表：

```
 CREATE TABLE `subscribers` (
 `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
 `sid` bigint(20) unsigned NOT NULL,
 `uid` bigint(20) unsigned NOT NULL,
 `suid` bigint(20) unsigned NOT NULL,
 `date` datetime NOT NULL,
 KEY `id` (`id`),
 KEY `2` (`uid`,`suid`),
 KEY `4` (`suid`,`id`)
) ENGINE=MyISAM AUTO_INCREMENT=23226599 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

索引：

```
Table   Non_unique  Key_name    Seq_in_index    Column_name     Collation   Cardinality     Sub_part    Packed  Null    Index_type  Comment
subscribers     1   id  1   id  A   NULL    NULL    NULL        BTREE   
subscribers     1   2   1   uid     A   449821  NULL    NULL        BTREE   
subscribers     1   2   2   suid    A   459193  NULL    NULL        BTREE   
subscribers     1   4   1   suid    A   6115    NULL    NULL        BTREE   
subscribers     1   4   2   id  A   22041275    NULL    NULL        BTREE 
```

我怎样才能索引它或优化它以尽可能快地加载？因为 12 秒对于这个来说实在是太多了……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:39:37.883

第二个查询针对 index 运行`(uid)`，因此它几乎立即完成。但是，第一个需要扫描表，因为没有合适的索引可以使用。创建一个索引`(suid, id)`来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:33:52.160

既然`id`不能`NULL`，可以改写为：

```
SELECT
    COUNT(*)
FROM
    subscribers
WHERE
    suid=541839243781 
```

除了最近（或未来）的优化器，它应该比`COUNT(id)`.

* * *

不过，整整 4 秒听起来太慢了，即使对于 MyISAM 也是如此。也许索引是碎片化的。

# r - 打包检查时如何有效处理未压缩的保存？

> ID：10233593
> 
> 赞同：36
> 
> 时间：2012-04-19T17:35:29.220
> 
> 标签：r, package-development

在最近开发包的努力中，我将数据集包含在`data/`我的包的文件夹中。在我的具体情况下，我有 5 个数据集，所有这些数据集都是`data.table`格式的（尽管如果我将它们保留为，我在下面描述的问题仍然存在`data.frame`）。我已将每个文件保存为单独的`.rda`文件并适当地记录它们。

当我`check()`从 package运行时`devtools`，我收到以下警告：

```
 checking data for ASCII and uncompressed saves ... WARNING
  Warning: large data file(s) saved inefficiently:
          size ASCII compress
  data1.rda 129Kb  TRUE     gzip
  data2.rda 101Kb  TRUE     gzip
  data3.rda 1.6Mb  TRUE     gzip

  Note: significantly better compression could be obtained
        by using R CMD build --resave-data
              old_size new_size compress
  data1.rda         129Kb     34Kb       xz
  data2.rda         101Kb     20Kb       xz
  data4.rda          92Kb     35Kb       xz
  data3.rda         1.6Mb    116Kb       xz
  species.rda     12Kb      9Kb       xz 
```

我尝试使用`resaveRdaFiles`(package `tools`) 以推荐的`xz`压缩方式保存数据。即使在这样做之后，警告仍然存在。

好的，所以我运行`R CMD build --resave-data`并且警告继续存在。

我在这里缺少什么以及如何克服这个问题（现在和将来）？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-21T01:48:34.210

保存`.rda`文件时，请使用命令：`save(..., file='test.rda', compress='xz')` 这将有助于解决问题！

# oracle10g - 在 oracle 中将数据插入到 CLOB 类型

> ID：10233598
> 
> 赞同：3
> 
> 时间：2012-04-19T17:35:56.410
> 
> 标签：oracle10g

我创建了一个表

```
create table test_clob(
  value clob
); 
```

如果我尝试在此表上插入数据大小超过 4000 字节的数据，则会出现以下错误

```
SQL Error: ORA-01704: string literal too long
01704\. 00000 -  "string literal too long"
*Cause:    The string literal is longer than 4000 characters.
*Action:   Use a string literal of at most 4000 characters.
           Longer values may only be entered using bind variables. 
```

我不知道如何使用绑定变量...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-04-30T06:47:49.027

您可以使用**to_clob**函数在 oracle 数据库中插入大文本。例如：字符串有超过 4000 个字符。然后使用查询：

插入 tableName(fieldName)values(to_clob('charCount=>4000')||to_clob('在 4000 char 之后但不超过 4000'));

例如：如果我有 6000 个字符，那么第一个 to_clob 中有 4000 个字符，然后是 to_clob 旁边的 2000 个字符：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-29T12:52:47.853

**TO_CLOB**将**LOB**列或其他字符串中的**NCLOB**值转换为**CLOB**值。char 可以是任何数据类型**CHAR、VARCHAR2、NCHAR、NVARCHAR2、CLOB 或 NCLOB**。这是关于[TO_CLOB](https://docs.oracle.com/cd/E11882_01/server.112/e41084/functions202.htm#SQLRF06131)的 Oracle 官方文档。要将数据插入 CLOB 列，请使用以下查询。

 ******```
insert into tableName(
    column_name
) values (
    to_clob('charCount=>4000') || to_clob('after 4000 char but not more then 4000')
); 
```******

# c++ - 堆栈跟踪分析工具

> ID：10233602
> 
> 赞同：0
> 
> 时间：2012-04-19T17:36:04.937
> 
> 标签：c++, crash, stack-trace

对于可以分析崩溃堆栈跟踪的工具有什么建议吗？如果没有，是否有任何写作指南？我的意思是一个可以查看这些转储并捕获模式的工具。这些是 c++ 应用程序的崩溃日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:48:43.963

对于 Windows，我推荐 WinDbg： http: [//msdn.microsoft.com/en-us/windows/hardware/gg463009](http://msdn.microsoft.com/en-us/windows/hardware/gg463009)有各种有用的网站，您可以通过谷歌搜索来描述如何使用它。

您还可以使用 Visual Studio 打开故障转储：http: [//msdn.microsoft.com/en-us/library/fk551230%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/fk551230%28v=vs.90%29.aspx)

这里有一篇关于 linux 的类似 SO 帖子：[Which is the best Linux C/C++ debugger (or front-end to gdb) to help Teaching Programming？](https://stackoverflow.com/questions/79537/which-is-the-best-linux-c-c-debugger-or-front-end-to-gdb-to-help-teaching-pr)

gdb 应该可以满足您的要求和 Eclipse

# java - 除了 JAR 文件之外，还有哪些其他选项可以部署 Java 应用程序？

> ID：10233605
> 
> 赞同：1
> 
> 时间：2012-04-19T17:36:20.127
> 
> 标签：java, eclipse, deployment

我正在 Eclipse 中开发一个程序。我刚刚完成它，正在寻找一种部署它的方法。我知道我可以使用导出命令来部署我的程序的可运行 JAR。

我想知道除了 JAR 文件之外，是否还有其他选项可以使用 Eclipse 部署我的程序？还有其他方法可以将我的程序包和依赖项部署到单个目录中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:22:10.277

有一些编译器，例如 GCJ，可以从 Java 代码创建本机机器代码（*.exe 文件）。

gcc.gnu.org/java/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:11:52.433

JAR 很方便，但不是唯一的方法。如果您的应用程序适合单个包，那么所有类文件都将适合单个目录。

# c# - 在 Visual Studio 中编辑 xaml 文件的任何替代方法？

> ID：10233609
> 
> 赞同：3
> 
> 时间：2012-04-19T17:36:23.833
> 
> 标签：c#, .net, wpf, xaml

在 Visual Studio 中编辑 xaml 文件非常缓慢且繁琐。我想知道你们中是否有人使用替代方法来编辑 xaml 文件？

我已经尝试了所有改进 xaml 编辑的方法，例如“以完整的 xaml 视图打开文档”等。但它仍然非常缓慢。保存时间平均约为 15 秒。

有时我使用常规文本编辑器来编辑文件，但它确实没有智能感知。任何人都知道一个很好的免费替代品也有智能感知？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:38:40.687

是的！我使用[Microsoft Expression Studio 的 Expression Blend](http://www.microsoft.com/expression/)！

[视频](http://expression.microsoft.com/en-us/dd565835)：了解和使用 Expression Blend 5 中的 XAML 代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:40:47.160

使用*notepad*、*notepad++*或任何你喜欢的文本编辑器。这只是一个标记！

[Kaxaml](http://kaxaml.com/)另一个您可能想要使用的有趣编辑器。

但是，如果您有`VisualStudio`/ `Blend`，请使用它们，因为在最新版本中，如果我没记错的话，重构也应该进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:41:25.367

[XamlPad](http://msdn.microsoft.com/en-us/library/ms742398%28VS.90%29.aspx)。免费、轻量级并提供实时预览。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T07:34:58.373

有很多可用的。我没有尝试过，因为我使用的是 VS2010，我认为它们不会替代 VS，因为 VS 有很多其他人没有的功能。您可以尝试以下方法：

[XAML 编辑器（拉里·贝尔）](http://lcbell4.tripod.com/SeniorProject/Senior_Project_XAML_Editor.htm)

[XAML PadX（扩展）](http://blogs.msdn.com/llobo/archive/2006/10/31/XamlPad-Xtended-_2800_with-an-interpreter_2900_.aspx)

[XAML 黑客](http://devintelligence.com/2007/11/xamlhack-a-better-xamlpad-alternative/)

[卡萨姆](http://www.kaxaml.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-09T12:35:56.273

现在有适用于 Visual Studio的[FAML 设计器。](https://www.faml.dev/)

# ruby-on-rails-3 - 在 Rails 3 中编写自定义 attr_special 函数

> ID：10233610
> 
> 赞同：0
> 
> 时间：2012-04-19T17:36:24.087
> 
> 标签：ruby-on-rails-3, activerecord, model, extending

提前道歉-我非常喜欢学习，并且将编写项目作为学习的一种手段。在这一个中，我正在尝试扩展 ActiveRecord 以便我可以执行以下操作...

在我的模型定义中，调用...

```
attr_special :field, :field 
```

然后，在其他地方，能够通过类似的方式访问此列表

```
Model.special_attributes 
```

可能是非常明显的事情。我很好地扩展了 ActiveRecord，但我什至不确定我在寻找什么之外的指导（构造函数？）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T22:24:53.703

您可以定义类似下面的代码来在您的模型中创建自定义 DSL：

```
module SpecialAttributes
  module ClassMethods
    def attr_special(*attrs)
      class_attribute :special_attributes
      self.special_attributes = attrs
    end

    def special_attributes
      self.special_attributes
    end
  end

  module InstanceMethods
    # some code here
  end

  def self.included(base)
    base.extend ClassMethods
    base.send :include, InstanceMethods
  end

end

class ActiveRecord::Base
  include SpecialAttributes
end 
```

我重新打开 ActiveRecord::Base 类而不是使用继承，因为在 Ruby 中继承更常见。

我喜欢在我的模块中使用名为 ClassMethods 和 InstanceMethods 的子模块，并使用 self.included 方法将它们添加到基类中。因此，您可以使用“include MyModule”，而不必知道是否添加了实例或类方法。

我希望我能帮助你。

# html - 如何从 XML 中的标签读取属性到 HTML

> ID：10233612
> 
> 赞同：1
> 
> 时间：2012-04-19T17:36:29.593
> 
> 标签：html, xml, href

我将列出一个 xml 文件中的一些项目，如下所示：

```
<artist href="spotify:artist:1gR0gsQYfi6joyO1dlp76N">
<name>Justice</name>
<popularity>0.59872</popularity>
</artist> 
```

它是从[http://ws.spotify.com/search/1/artist?q=justice请求的](http://ws.spotify.com/search/1/artist?q=justice)

我的代码如下所示：

```
var x=xmlDoc.getElementsByTagName("artist");
for (i=0;i<x.length;i++)
{ 
document.write("<tr><td>");
document.write(x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue);

document.write("</td><td>");
document.write(x[i].getElementsByTagName("popularity")[0].childNodes[0].nodeValue);

document.write("</td><td>");
document.write(x[i].HOW DO I GET THE SPOTIFY URI);

document.write("</td></tr>");
}
document.write("</table>"); 
```

一切正常，除了我不知道如何将 spotify URL 放入表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:42:47.693

使用[`x[i].getAttribute('href')`](https://developer.mozilla.org/en/DOM/element.getAttribute).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:46:04.197

我知道您正在使用 JavaScript，但是您是否考虑过使用 XSLT？

如果您只是将 XML 转换为 HTML，它看起来像是合适的工具： [http ://www.w3schools.com/xsl/xsl_transformation.asp](http://www.w3schools.com/xsl/xsl_transformation.asp)

# php - base64_* 功能被禁用，现在该怎么办？

> ID：10233613
> 
> 赞同：5
> 
> 时间：2012-04-19T17:36:32.303
> 
> 标签：php, base64, decode, encode

当我尝试使用 base64_decode() 函数时收到以下警告

```
"Warning: base64_decode() has been disabled for security reasons" 
```

看起来我的主机禁用了 base64_* 功能。

我有几个问题

1.  我认为默认情况下可以在 php 中启用 base64_* 函数，对吗？
2.  未启用 base64_* 功能是否有任何安全原因？有什么安全漏洞吗？
3.  默认情况下可用的 base64_* 函数的替代方案？
4.  在哪里可以找到用于 base64_* 实现的自定义类/函数，以便我可以将它们放在我的 PHP 文件中，并在 PHP 的 base64_* 函数不可用时使用它们？

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-19T19:12:32.830

我已经为所有 base64 目的编写了替代函数。

看这里：

```
function base64_decode($input) {
    $keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    $chr1 = $chr2 = $chr3 = "";
    $enc1 = $enc2 = $enc3 = $enc4 = "";
    $i = 0;
    $output = "";

    // remove all characters that are not A-Z, a-z, 0-9, +, /, or =
    $filter = $input;
    $input = preg_replace("[^A-Za-z0-9\+\/\=]", "", $input);
    if ($filter != $input) {
        return false;
    }

    do {
        $enc1 = strpos($keyStr, substr($input, $i++, 1));
        $enc2 = strpos($keyStr, substr($input, $i++, 1));
        $enc3 = strpos($keyStr, substr($input, $i++, 1));
        $enc4 = strpos($keyStr, substr($input, $i++, 1));
        $chr1 = ($enc1 << 2) | ($enc2 >> 4);
        $chr2 = (($enc2 & 15) << 4) | ($enc3 >> 2);
        $chr3 = (($enc3 & 3) << 6) | $enc4;
        $output = $output . chr((int) $chr1);
        if ($enc3 != 64) {
            $output = $output . chr((int) $chr2);
        }
        if ($enc4 != 64) {
            $output = $output . chr((int) $chr3);
        }
        $chr1 = $chr2 = $chr3 = "";
        $enc1 = $enc2 = $enc3 = $enc4 = "";
    } while ($i < strlen($input));
    return urldecode($output);
}

function base64_encode($data) {
    $b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
    $o1 = $o2 = $o3 = $h1 = $h2 = $h3 = $h4 = $bits = $i = 0;
    $ac = 0;
    $enc = '';
    $tmp_arr = array();
    if (!$data) {
        return data;
    }
    do {
    // pack three octets into four hexets
    $o1 = charCodeAt($data, $i++);
    $o2 = charCodeAt($data, $i++);
    $o3 = charCodeAt($data, $i++);
    $bits = $o1 << 16 | $o2 << 8 | $o3;
    $h1 = $bits >> 18 & 0x3f;
    $h2 = $bits >> 12 & 0x3f;
    $h3 = $bits >> 6 & 0x3f;
    $h4 = $bits & 0x3f;
    // use hexets to index into b64, and append result to encoded string
    $tmp_arr[$ac++] = charAt($b64, $h1).charAt($b64, $h2).charAt($b64, $h3).charAt($b64, $h4);
    } while ($i < strlen($data));
    $enc = implode($tmp_arr, '');
    $r = (strlen($data) % 3);
    return ($r ? substr($enc, 0, ($r - 3)) . substr('===', $r) : $enc);
}

function charCodeAt($data, $char) {
    return ord(substr($data, $char, 1));
}

function charAt($data, $char) {
    return substr($data, $char, 1);
} 
```

但不要忘记`charCodeAt`and`charAt`函数。它们都是必要的`base64_encode`。这两个函数`base64_encode`都`base64_decode`像内置的 PHP 函数一样工作。但只有在内置的不可用时才使用它们，因为它们没有内置的快。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-06T07:38:02.813

刚刚注册评论 jankal 的答案，但没有声誉就无法做到。

jankal 答案中函数 base64_encode 代码的最后一行是

```
return ($r ? substr($enc, 0, ($r - 3)) : $enc) . substr('===', ($r || 3)); 
```

其中 $r 可以是 0、1 或 2。据我了解，当 $r = 0 时，代码逻辑的 ($r || 3) 表达式值必须为 3，而在其他两种情况下为 $r，但实际上（PHP 5.6 /7.0) 这个表达式的值总是等于 1，所以我们的 BASE64 编码的字符串总是以两个 '=' 符号结尾，这肯定是错误的。

我的解决方案：

```
return ($r ? substr($enc, 0, ($r - 3)) . substr('===', $r) : $enc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T18:56:52.303

```
function myencode($input)
    {
    $CODES = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

    // the result/encoded string, the padding string, and the pad count
    $r = "";
    $p= "";
    $c = strlen($input) % 3;

    // add a right zero pad to make this string a multiple of 3 characters
    if ($c > 0) 
    {
        for (; $c < 3; $c++)
     {
        $p .= "=";
        $input .= "\0";
     }
    }

    // increment over the length of the string, three characters at a time
    for ($c = 0; $c < strlen($input); $c += 3) {

// we add newlines after every 76 output characters, according to the MIME specs

        if ($c > 0 && ($c / 3 * 4) % 76 == 0)
        $r += "\r\n";

// these three 8-bit (ASCII) characters become one 24-bit number
$n = (ord($input[$c]) << 16) + (ord($input[$c +1]) << 8) + (ord($input[$c +2]));

        // this 24-bit number gets separated into four 6-bit numbers
        $n1 = $n >> 18 & 63;
        $n2 = $n >> 12 & 63;
        $n3 = $n >> 6 & 63;
        $n4 = $n & 63;

 // those four 6-bit numbers are used as indices into the base64 character list

 $r .= "" . $CODES[$n1] . $CODES[$n2] . $CODES[$n3] . $CODES[$n4];

    }
    return substr($r,0,(strlen($r)-strlen($p))) . $p;
    }  

 function mydecode($input) {

 $CODES = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

// remove/ignore any characters not in the base64 characters list
    // or the pad character -- particularly newlines

    $input= str_replace("[^" . $CODES . "=]","",$input);

    // replace any incoming padding with a zero pad (the 'A' character is  zero)
    $p = ($input[strlen($input) - 1] == '=' ?($input[strlen($input) - 2] == '=' ? "AA" : "A") : "");

    $r = "";
    $input = substr($input,0,(strlen($input) - strlen($p))) . $p;
// increment over the length of this encoded string, four characters at a time
    for ($c = 0; $c < strlen($input); $c += 4) {

// each of these four characters represents a 6-bit index in the
// base64 characters list which, when concatenated, will give the
// 24-bit number for the original 3 characters

         $n=(strpos($CODES,$input[$c]) << 18)
         +  (strpos($CODES,$input[$c+1]) << 12)
         +  (strpos($CODES,$input[$c+2]) << 6)
         +  (strpos($CODES,$input[$c+3]));

// split the 24-bit number into the original three 8-bit (ASCII) characters
$r .= "" . chr(($n >> 16) & 0xFF) . chr((($n >> 8) & 0xFF)) . chr(($n & 0xFF));

    }
    // remove any zero pad that was added to make this a multiple of 24 bits
        return substr($r,0, strlen($r)- strlen($p));
    } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-19T17:48:03.100

这是托管问题。

请更改您的主机或要求他们删除此安全问题

# sql - 使用基于 ROWCOUNT 的 SUM

> ID：10233622
> 
> 赞同：2
> 
> 时间：2012-04-19T17:37:10.360
> 
> 标签：sql, sql-server, sum

基本上我正在尝试做的是，有些用户在某个日期范围内（每月）拥有适用的服务

我希望能够显示用户的可用服务时间（以小时为单位），以及他们根据包含约会数据的表安排了多少小时

所以我希望它基本上看起来像

```
user             service             available         scheduled
-----------------------------------------------------------------
User1            Service1            120               7
User1            Service2            40                0 
```

Scheduled 列是通过我的表`SUM`中的`Start`和`End`字段计算的。`Appointment`

现在我的问题是，如果没有安排约会，我不确定如何仍然显示我想要的信息。

表之间的关系如下：

*   每个用户 1 个 NOA
*   每个 NOA 的多项服务
*   每个服务 1 个 FormType

*   Appointment 将 FormTypeID 保存为`FK`

*   ClientAppointment 持有 AppointmentID 和 UserID（具有指定 NOA 的同一用户）

* * *

```
SELECT

 --NOA
 noa.noaID, noa.userID as 'ClientUserID', 

 --Service
 service.BillingCode + service.MOD1 + service.MOD2 + service.MOD3 + service.MOD4 AS     BillingCode, service.FormTypeID, service.StartDate, service.EndDate, service.CurrentUnits, service.Adjustment,

 --Scheduler
 scheduler.* 
 FROM LEL_NOA noa
 LEFT JOIN LEL_Service service ON service.noaID = noa.noaID
 LEFT OUTER JOIN 
 (
 SELECT ca.ClientID, SUM(DATEDIFF(second, a.Start, a.[End]) / 3600) as ScheduledUnits        FROM LEL_Scheduler_Appointment a
 LEFT JOIN LEL_Scheduler_ClientAppointment ca ON a.ApptID = ca.ApptID
 WHERE a.Start BETWEEN '1/1/2012' and '1/31/2012'
   AND a.[End] BETWEEN '1/1/2012' and '1/31/2012'
 GROUP BY ca.ClientID

 ) AS scheduler ON noa.UserID = scheduler.ClientID

WHERE noa.UserID = 4
AND service.StartDate BETWEEN '1/1/2012' and '1/31/2012'
AND service.EndDate BETWEEN '1/1/2012' and '1/31/2012'

ORDER BY 'ClientUserID', BillingCode, FormTypeID, StartDate 
```

上述程序将在本月撤回，21 可用，7 计划，但有 a 的人在`UserID = 4`该时间段内有另一项服务，我想在我的表中显示计划为 0 小时的信息作为下一个项目。

* * *

```
(noaID, ClientUserID, BillingCode, FormTypeID, StartDate, EndDate, CurrentUnits,     Adjustment, ScheduledUnits) VALUES
(203, 25, 'x888', 6, '4/16/2012 4:24:19 PM', '4/16/2012 4:24:19 PM', 0, 0, 5.000000), 
(203, 25, 'x999', 1, '4/1/2012 12:00:00 AM', '4/30/2012 12:00:00 AM', 10, 0, 5.000000) 
```

问题是第一个条目，没有安排任何约会，但仍然显示 5（第二个总和是正确的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:17:14.077

在 ORDER BY 子句上方，添加一个 UNION ALL 行，然后添加一个新的 SELECT 查询，该查询专门为同一用户提取信息，没有计划。只需确保新查询与顶部查询具有相同的列，即使您必须对 NULL 值进行硬编码。这是一般语法：

```
SELECT [stuff] FROM Table1 WHERE [A]
UNION ALL
SELECT [samestuff] FROM Table1 WHERE [B]
ORDER BY [somestuff] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:08:44.347

尝试修改您的查询以使用内联子查询。性能可能会受到影响，但更容易获得正确的查询。

```
SELECT
--NOA
noa.noaID, noa.userID as ClientUserID, 
--Service
service.BillingCode + service.MOD1 + service.MOD2 + service.MOD3 + service.MOD4 AS BillingCode,
service.FormTypeID, service.StartDate, service.EndDate, service.CurrentUnits, service.Adjustment,
--Scheduler
(
    SELECT COALESCE(SUM(DATEDIFF(second, a.Start, a.[End]) / 3600), 0) as ScheduledUnits
    FROM LEL_Scheduler_Appointment a
        INNER JOIN LEL_Scheduler_ClientAppointment ca ON a.ApptID = ca.ApptID
    WHERE a.Start BETWEEN '1/1/2012' and '1/31/2012'
        AND a.[End] BETWEEN '1/1/2012' and '1/31/2012'
        AND ca.ClientID = noa.UserID
        AND a.ServiceID = FormTypeID
) as ScheduledUnits
FROM LEL_NOA noa
    LEFT JOIN LEL_Service service ON service.noaID = noa.noaID
WHERE noa.UserID = 4
    AND service.StartDate BETWEEN '1/1/2012' and '1/31/2012'
    AND service.EndDate BETWEEN '1/1/2012' and '1/31/2012'
ORDER BY ClientUserID, BillingCode, FormTypeID, StartDate 
```

# r - 在多面州地图上绘制县名（ggplot2）

> ID：10233623
> 
> 赞同：5
> 
> 时间：2012-04-19T17:37:12.333
> 
> 标签：r, ggplot2

我正在制作 cholorpleth（我在[这里](http://www.talkstats.com/showthread.php/23324-An-R-learning-project-%28feel-free-to-learn-with-me%29?p=82292&viewfull=1#post82292)开始的一个学习项目）。我曾经问过关于在 SO上的地图（ [HERE ）上绘制文本的问题。](https://stackoverflow.com/questions/9441778/improve-centering-county-names-ggplot-maps)我现在正试图在同一张地图上绘制名称，但它是多面的，但不断出现错误：

```
Error in eval(expr, envir, enclos) : object 'group' not found 
```

我认为 R 讨厌我而且我是个白痴 :) `traceback`大约有 5 英里长，所以这也无济于事。如果你拿出`geom_text` 一切运行良好。

PS我知道新的`geom_map`并且一直在玩它，但这是一个困扰我的单独问题。

预先感谢您的帮助。

```
#Load three data sets from my dropbox 
load(url("http://dl.dropbox.com/u/61803503/Names/cholo.RData"))

#view head of the three data frames
lapply(list("map.data2"=map.data2, "ny"=ny, "centroids"=centroids), head)
####################################################################
# map.data2 contains the filling information (test scores)         #
# ny contains the lat and long information for plotting boundaries #
# centroids contains the information for plotting labels           #
####################################################################

#Load Necessary Libraries
library(ggplot2); library(maps); library(RColorBrewer); library(scales)

ggplot(map.data2, aes(long, lat, group=group)) +  #plot pass rates math
   geom_polygon(aes(fill=level), colour=alpha('white', 1/2), size=0.2) +
   geom_polygon(data=ny, colour='black', fill=NA) + 
   scale_fill_brewer(palette='RdYlBu', guide = guide_legend(title = 
       "Percent Passing"))+
   facet_grid(.~Subject)+
   #annotate(data = "text", label = centroids$subregion, x = centroids$long, 
   #    y = centroids$lat, size = 2, colour = "black") +
   geom_text(data=centroids, aes(x=long, y=lat, 
       label=subregions, angle=angle), size=3) +
   opts(title = "
       New York State Counties Passing Rate \non Elementary ELA Assessments") +
   opts(axis.text.x = theme_blank(), axis.text.y = theme_blank(), 
       axis.ticks = theme_blank())+
   opts(legend.background = theme_rect()) +
   scale_x_continuous('') + scale_y_continuous('') + 
   labs(title = "legend title") + theme_bw()+
   opts(axis.line=theme_blank(),axis.text.x=theme_blank(),
        axis.text.y=theme_blank(),axis.ticks=theme_blank(),
        axis.title.x=theme_blank(), legend.position="bottom",
        axis.title.y=theme_blank(),
        panel.background=theme_blank(),panel.grid.major=theme_blank(),
        panel.grid.minor=theme_blank(),plot.background=theme_blank()) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T17:48:01.373

在第一次`ggplot()`通话中，您将 group 映射到`group`. 然后将此映射传递到每一层，因此 ggplot 在您的层`group`中使用的`centroids`数据中找不到时会抱怨。`geom_text`

`groups=NULL`在调用中取消映射它`geom_text`，这很好：

```
ggplot(map.data2, aes(long, lat, group=group)) +  
   geom_polygon(aes(fill=level), colour=alpha('white', 1/2), size=0.2) +
   geom_polygon(data=ny, colour='black', fill=NA) + 
   scale_fill_brewer(palette='RdYlBu', guide = guide_legend(title = 
         "Percent Passing"))+
   facet_grid(.~Subject)+
   geom_text(data=centroids, aes(x=long, y=lat, 
     label=subregion, angle=angle, group=NULL), size=3) +   # THIS HAS CHANGED!
   opts(title = " 
     New York State Counties Passing Rate \non Elementary ELA Assessments") +
   opts(axis.text.x = theme_blank(), axis.text.y = theme_blank(), 
       axis.ticks = theme_blank())+
   opts(legend.background = theme_rect()) +
   scale_x_continuous('') + scale_y_continuous('') + 
   labs(title = "legend title") + theme_bw()+
    opts(axis.line=theme_blank(),axis.text.x=theme_blank(),
      axis.text.y=theme_blank(),axis.ticks=theme_blank(),
      axis.title.x=theme_blank(), legend.position="bottom",
      axis.title.y=theme_blank(),
      panel.background=theme_blank(),panel.grid.major=theme_blank(),
      panel.grid.minor=theme_blank(),plot.background=theme_blank()) 
```

# javascript - Spotify 应用程序中的 Facebook Javascript SDK，可能吗？

> ID：10233626
> 
> 赞同：0
> 
> 时间：2012-04-19T17:37:16.170
> 
> 标签：javascript, facebook, sdk, spotify

我想标题已经够清楚了。我想在 Spotify 应用程序中导入 Facebook 的 Javascript SDK。主要是使用Dialog功能。

有人知道这是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:16:01.697

可能的答案/解决方法。[https://developer.spotify.com/technologies/apps/docs/beta/09321954e7.html](https://developer.spotify.com/technologies/apps/docs/beta/09321954e7.html)

该 API 有一个 showAuthenticationDialog，但它实际上做的是显示一个弹出窗口，当 url 参数加载到该弹出窗口中时该弹出窗口将关闭。如果 authenticatewith facebook 对您来说还不够，那么这可能是一个可能的解决方案，您也可以将它与 facebooks 页面一起使用。如果您只是定期打开一个链接，它将在 Spotify 之外打开。

不过，您仍然可以使用 facebook js sdk，但如果它使用弹出窗口，则需要在其中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:38:30.380

您不需要 JS SDK 即可使用 Dialog 功能。所有对话框都有一个普通的旧 URL，您可以将用户发送到（在弹出窗口或主窗口中）。

例如，Feed 对话框：

```
https://www.facebook.com/dialog/feed?app_id=YOUR_APP_ID&redirect_uri=YOUR_REDIRECT_URI 
```

# java - MappedByteBuffer 字节顺序颠倒了？

> ID：10233627
> 
> 赞同：0
> 
> 时间：2012-04-19T17:37:16.383
> 
> 标签：java, matlab, bytebuffer

我有一个 java.nio.MappedByteBuffer 用于从 little-endian 文件中读取整数。我使用 ByteBuffer.order() 将字节顺序设置为 LITTLE_ENDIAN，但这会导致缓冲区将整数解释为大端序。

**确认我们在字节 4-7 中有小端序中的数字 3**

```
>> sprintf( '%.2x ', qfunction.s_idx.get(4), qfunction.s_idx.get(5), qfunction.s_idx.get(6), qfunction.s_idx.get(7) )

ans =

03 00 00 00 
```

**读取为 LITTLE_ENDIAN 返回 0x03000000 而不是 0x00000003！**

```
>> qfunction.s_idx.order( java.nio.ByteOrder.LITTLE_ENDIAN );
>> sprintf( '%.8x', qfunction.s_idx.getInt(1) )

ans =

03000000 
```

**读取为 BIG_ENDIAN 确实返回 3！***

```
>> qfunction.s_idx.order( java.nio.ByteOrder.BIG_ENDIAN );
>> sprintf( '%.8x', qfunction.s_idx.getInt(1) )

ans =

00000003 
```

这里发生了什么？

将 Java 1.6.0_17-b04 与 Sun Microsystems Inc. 一起使用 Java HotSpot(TM) 64 位服务器 VM 混合模式 使用 MATLAB R2011b

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:57:48.920

您正在写入字节 4、5、6、7，但读取字节 1、2、3、4。这使得字节 4（这是唯一一个有值的）出现在末尾而不是开头，

试试吧

```
>> sprintf( '%.8x', qfunction.s_idx.getInt(4) ) 
```

# c - 分段错误打开文件

> ID：10233631
> 
> 赞同：0
> 
> 时间：2012-04-19T17:37:52.190
> 
> 标签：c, segmentation-fault

我只是想开始学习 C [http://fromlearncodethehardway.com](http://fromlearncodethehardway.com)。但是，在尝试从那里编写其中一个示例时，我遇到了分段错误。[这是](http://pastebin.com/PH6bsawP)我的源代码的链接。我尝试使用 valgrind 进一步帮助调试，但我似乎无法找出问题所在。这是来自 valgrind 的堆栈跟踪。

```
 ~/Chardway$ valgrind ./ex17 db.dat g
   ==4423== Memcheck, a memory error detector                                                                                 == 4423== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
 ==4423== Using Valgrind-3.6.1-Debian and LibVEX; rerun with -h for copyright info
 ==4423== Command: ./ex17 db.dat g
 ==4423== 
 ==4423== Invalid read of size 1
 ==4423==    at 0x4EA4F1D: _IO_file_fopen@@GLIBC_2.2.5 (fileops.c:271)
 ==4423==    by 0x4E99DB5: __fopen_internal (iofopen.c:93)
 ==4423==    by 0x400A76: Database_open (ex17.c:65)
 ==4423==    by 0x400F7C: main (ex17.c:151)
 ==4423==  Address 0x722b is not stack'd, malloc'd or (recently) free'd
 ==4423== 
 ==4423== 
 ==4423== Process terminating with default action of signal 11 (SIGSEGV)
 ==4423==  Access not within mapped region at address 0x722B
 ==4423==    at 0x4EA4F1D: _IO_file_fopen@@GLIBC_2.2.5 (fileops.c:271)
 ==4423==    by 0x4E99DB5: __fopen_internal (iofopen.c:93)
 ==4423==    by 0x400A76: Database_open (ex17.c:65)
  ==4423==    by 0x400F7C: main (ex17.c:151)
.....

  ==4423== For counts of detected and suppressed errors, rerun with: -v
  ==4423== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 4 from 4)
 Segmentation fault 
```

对调试的任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:45:35.197

在您的代码中，您可以`fopen`调用`fopen(filename,'w');`& `fopen(filename,'r+');`。那些应该是`fopen(filename,"w");`& `fopen(filename,"r+");`。第二个参数[`fopen`](http://pubs.opengroup.org/onlinepubs/007904975/functions/fopen.html)应该是`const char *`
希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:14:16.300

顺便说一句，我认为您的意思是[http://c.learncodethehardway.org/](http://c.learncodethehardway.org/)
您提供的地址无法解析。

# java - 如何将从texfield视图获取的字符串转换为int

> ID：10233635
> 
> 赞同：-1
> 
> 时间：2012-04-19T17:38:06.153
> 
> 标签：java, android

> **可能重复：**
> [如何在 Java 中将字符串转换为 int？](https://stackoverflow.com/questions/5585779/how-to-convert-string-to-int-in-java)

拜托，我正在开发一个 android 应用程序（Java、XML）。如何从文本字段中获取文本并将其转换为整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:44:25.800

number = Integer.parseInt(yourStringHere);

# asp.net-mvc-4 - MVC 4 Web API 中的默认参数值

> ID：10233637
> 
> 赞同：5
> 
> 时间：2012-04-19T17:38:12.907
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我很好奇为什么 ApiController 处理动作的默认参数值与“常规”控制器不同。

这段代码工作得很好，请求 /Test 意味着页面获取值 1

```
public class TestController : Controller
{
    public ActionResult Index(int page = 1)
    {
        return View(page);
    }
} 
```

当向 /api/Values 发出请求时，此代码不起作用。它失败了：

“参数字典包含不可为空类型‘System.Int32’的参数‘页面’的空条目，用于‘MvcApplication1.Controllers’中的方法‘System.Collections.Generic.IEnumerable`1[System.String] Get(Int32)’ .Controllers.ValuesController'。可选参数必须是引用类型、可空类型或声明为可选参数。”

```
public class ValuesController : ApiController
{
    public IEnumerable<string> Get(int page = 1)
    {
        return new string[] { page.ToString() };
    }      
} 
```

关于为什么会这样的任何提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T01:40:43.367

尝试添加 [FromUri] 或 [FromForm] 参数属性。

```
public class ValuesController : ApiController
{
    public IEnumerable<string> Get([FromUri]int page = 1)
    {
        return new string[] { page.ToString() };
    }      
} 
```

Mike Stall 有两篇关于 Webapi 中参数绑定的好文章，它不像在 ASP MVC 中那样工作。要习惯的一个大问题是您只能在管道中读取一次请求正文。因此，如果您需要读取 1 个以上的复杂对象作为参数，您可能需要通过参数求助于 ModelBinding。当我在管道中读取内容正文以进行日志记录时，我遇到了与您类似的问题，并且没有意识到上面的一次读取限制并且必须使用我自己的自定义模型绑定器来解决。

[在http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)解释模型绑定，然后提出一种使 WebAPI 模型绑定更像 ASP 的方法MVC [http://blogs.msdn.com/b/jmstall/archive/2012/04/18/mvc-style-parameter-binding-for-webapi.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/18/mvc-style-parameter-binding-for-webapi.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:02:44.610

尝试定义为`Nullable<T>`：

```
public class ValuesController : ApiController
{
    public IEnumerable<string> Get(int? page = 1)
    {
        return new string[] { page.ToString() };
    }      
} 
```

# ruby - 为 nil 调用 id，活动管理员

> ID：10233639
> 
> 赞同：0
> 
> 时间：2012-04-19T17:38:15.983
> 
> 标签：ruby, ruby-on-rails-3, activeadmin

我正在与活跃的管理员一起工作我有收集选择或下拉框来填充包裹和工作人员我只是想知道我为什么

```
undefined method `[]' for nil:NilClass` 
```

我不知道发生了什么，但它几天前运行并测试了一次，但现在它引发了这个错误，有没有可能解决这个问题的方法？

```
def create
   @package = Package.find(params[:package_crew][:package_id])
   crew = Crew.find(params[:package_crew][:crew_id] )
   @package_crew = @package.add_crew(crew.id)
   if @package_crew.save
      redirect_to {admin_package_crew_url}
   end
 end 
```

提前感谢我们所有人的更多力量

我试过这个

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

尝试创建

```
def create
  #pid = params[:package_crew][:crew_id] if params[:package_crew]
  pid,cid = 2 #tried nil,0..10 
  if params[:package_crew]
     pid = params[:package_crew][:package_id] 
     cid = params[:package_crew][:crew_id] 
  end
  @package = Package.find_by_id(pid) 
  crew = Crew.find_by_id(cid)
  #@package = Package.find(params[:package_crew][:package_id])
  #crew = Crew.find(params[:package_crew][:crew_id] )
  @package_crew = @package.add_crew(crew.id)
  if @package_crew.save
     redirect_to {admin_package_crew_url}
  end
end 
```

add_crew 方法

```
def add_crew(crew_id)
    current_package = package_crews.find_by_crew_id(crew_id)
    if current_package
      current_package.quantity = current_package.quantity.to_i + 1
    else
      current_package = package_crews.build(:crew_id => crew_id)
      current_package.price = current_package.crew.price
    end
      current_package
  end 
```

移动参数

```
{"utf8"=>"✓",
 "authenticity_token"=>"n4WZpQpES6mnSO12oGKV/MeoxAVvV9OmJQKfhcpnvQM=",
 "crew_for_package"=>{"package_id"=>"1",
 "crew_id"=>"1",
 "quantity"=>"1"},
 "commit"=>"Create Package crew"} 
```

堆栈错误

```
app/admin/package_crews.rb:35:in `create'
actionpack (3.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.1) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.1) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.1) lib/active_support/callbacks.rb:447:in `_run__304549499__process_action__775442107__callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.1) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.1) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.1) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.1) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.1) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.1) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.1) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.1) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `call'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:30:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:589:in `call'
sass (3.1.15) lib/sass/plugin/rack.rb:54:in `call'
warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
warden (1.1.1) lib/warden/manager.rb:34:in `catch'
warden (1.1.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.1) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `_run__1039351831__call__833288071__callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.1) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.1) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/static.rb:53:in `call'
railties (3.2.1) lib/rails/engine.rb:479:in `call'
railties (3.2.1) lib/rails/application.rb:220:in `call'
railties (3.2.1) lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_request_handler.rb:513:in `accept_and_process_next_request'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/utils.rb:479:in `safe_fork'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
<internal:prelude>:10:in `synchronize'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/led/.passenger/standalone/3.0.11-x86-ruby1.9.3-linux-gcc4.6.3-1002/support/helper-scripts/passenger-spawn-server:99:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:04:32.753

您发送的内容：

```
{
  "crew_for_package" => {
    "package_id"=>"1",
    "crew_id"=>"1",
    "quantity"=>"1"
  }
} 
```

你叫什么：

```
params[:package_crew][:package_id]
params[:package_crew][:crew_id] 
```

你看出什么不对了吗？这可能无法解决您的问题，但它至少应该让您朝着正确的方向前进！:-)

# wpf - 是否建议将 WCF 与 WPF 和 MVVM 一起使用以从 SQL Server 检索数据？

> ID：10233642
> 
> 赞同：5
> 
> 时间：2012-04-19T17:38:25.443
> 
> 标签：wpf, sql-server, wcf

我正在构建一个将在本地网络上使用的桌面应用程序，其中 SQL Server 作为数据库。

该应用程序将同时拥有大约 50 个用户。在什么特定情况下我需要使用 WCF 服务？是否建议在数据库所在的服务器计算机上创建 WCF 服务，所以我们通过 WCF 服务连接到该服务器，而不是直接连接到数据库？连接到 SQL Server 数据的推荐方法是什么？为什么？

**编辑**：让我更详细地解释一下。我以前使用过 WCF Ria 服务，所以我知道它们是如何工作的。让我们假设 WCF 服务以相同的方式工作。问题是针对为什么我们要使用 WCF 而不是直接连接到数据库？我不想指定我当前的申请要求，因为我会得到特定要求的具体答案。我的目标是大致了解您为什么以及何时会选择一个而不是另一个。到目前为止，我收到了令人满意的答案。

在我看来，普遍的共识是只有在需要另一种类型的应用程序时才使用 WCF，该应用程序将使用 Web 访问从服务中获取数据。另外，如果我理解正确，从安全的角度来看，两者之间没有区别。

将来会有一个统计应用程序使用 Web 向用户提供只读统计信息，自然需要一些服务来完成这项任务（应用程序没有特定的客户，它将提供给很多客户）。由于我需要为特定客户端快速完成一些演示应用程序，因此我正在考虑忽略服务部分，并进行适当的分层（WPF->VM->Model->EF，所以稍后我将在之间插入服务模型和 EF。我想用插入层运行 WPF 应用程序不应该花费太多时间。我也推迟了服务，因为下一个原因：因为 HTML5 是（将成为）Web 的主要技术，并且有SL 有可能被放弃作为技术（我一直在使用），合乎逻辑的决定是选择 HTML5 而不是 SL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:30:40.443

我认为考虑这个问题的更好方法是您是否应该使用服务接口从应用程序中抽象出数据库和数据访问层。您可以使用 WCF 和 SOAP，也可以使用基于 REST 的 HTTP 服务，技术的选择是次要的，取决于您的应用程序的当前或未来需求是否表明需要额外的抽象层。

您可能考虑使用服务接口而不是直接连接到 SQL 数据库的原因包括但不限于：

*   易于支持多个操作系统/客户端 UI
*   能够独立于数据库模式发展数据/服务接口
*   将应用程序与数据库架构或位置的更改隔离开来（您不必将更改重新部署到应用程序，只需更改它正在调用的服务的内部结构）
*   如果数据可以被其他系统使用，那么您有一种标准方法可以允许这些系统与您的应用程序正在管理的数据进行交互
*   减少 SQL 数据库连接安全问题（仅服务身份连接数据库，允许您在客户端使用多种身份验证/授权策略）

您正在考虑的权衡是实现服务接口的时间/成本/复杂性与您将获得的灵活性和可维护性优势。在决定是使用 ADO.NET 直接连接到数据存储还是使用服务层之前，您应该评估应用程序和客户的需求。

您应该查看 Microsoft[服务层指南](http://msdn.microsoft.com/en-us/library/ee658090.aspx)，因为它们涵盖了许多需要考虑的因素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T18:00:41.303

除非您需要创建可重用的服务，否则我想不出添加 WCF 层的理由，除非您只是在寻找这样做的理由。我认为您可以使用某种 ORM（例如 EF 或 nHibernate）并感到高兴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T18:55:22.230

WCF 的主要原因是安全性。如果客户端直接连接到数据库，则必须授予客户端对表的权限。客户端可以侵入连接并直接使用 TSQL。您必须在单层应用程序中向网络公开端口 1433。使用 WCF，客户端无法直接访问 SQL。它不仅总体上更安全，而且您可以拥有更细粒度的安全性。.NET 服务代码可以强制执行行级安全性。表仅具有列级安全性。如果这是在专用网络上进行的业务，并且您不希望有人会尝试入侵您的数据库，那么直接连接到 SQL 服务器的客户端更容易构建。对于服务器端服务，另一个因素是对服务器端代码的更改是一个地方，因此您不必更新 50 台设备。

# javascript - 输入和加载 url 以调用 JS 时使用哪个 XUL 元素？

> ID：10233648
> 
> 赞同：1
> 
> 时间：2012-04-19T17:38:31.817
> 
> 标签：javascript, firefox, firefox-addon, xul

我正在使用 XUL Overlay 开发一个 Firefox 插件，并希望在输入 URL 后加载当前页面时调用特定的 js。我想知道哪个 XUL 元素会受到影响并且应该用于调用所述 JS，例如页面或选项卡或窗口或 ??? 另外，哪个事件最适合该元素？还是我的逻辑错了？此外，js 的功能是记录标签标题和/或 url，所以我需要知道何时调用 js 以及相应的事件。谢谢.. ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:15:50.147

您应该注意的 XUL 元素是[tabbrowser](https://developer.mozilla.org/en/XUL/tabbrowser)。在浏览器窗口中（这也意味着在应用到浏览器窗口的叠加层中）可以通过全局`gBrowser`变量访问它。如果您想知道页面何时完成加载，您可以收听该`DOMContentLoaded`事件。像这样的东西（未经测试的代码）：

```
// Declare an own namespace for extension's functions to avoid
// name conflicts with other extensions.
var MyExtension = {};

MyExtension.init = function()
{
  gBrowser.addEventListener("DOMContentLoaded", MyExtension.onPageLoad, false);
};

MyExtension.onPageLoad = function(event)
{
  // Get the document that loaded
  var doc = event.originalTarget;

  // Ignore frames that load
  if (doc.defaultView != doc.defaultView.parent)
    return;

  // Ignore if this isn't the active tab
  var browser = gBrowser.getBrowserForDocument(doc);
  if (browser != gBrowser.selectedBrowser)
    return;

  alert("Page loaded in current tab: " + doc.defaultView.location.href);
};

// Wait for the browser window to finish loading before adding event listeners
window.addEventListener("load", MyExtension.init, false); 
```

如果您想更早地得到通知，当 URL 栏中显示的地址发生变化时，您可以使用[进度侦听](https://developer.mozilla.org/en/Code_snippets/Progress_Listeners)器来代替。您想实现`onLocationChange`进度侦听器的方法并将其他方法留空。请注意，当用户切换到不同的选项卡时也会调用此方法（这也会导致位置栏发生变化）。另外：`aURI`传递给的参数`onLocationChange`是一个[`nsIURI`实例](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIURI)。如果您希望将 URL 作为字符串，您应该查看`aURI.spec`.

# php - PHP在左括号前提取一个单词

> ID：10233655
> 
> 赞同：0
> 
> 时间：2012-04-19T17:38:46.917
> 
> 标签：php, regex

我有一个像这样的字符串，

> 三星 Galaxy Ace S5830（缟玛瑙黑）
> 三星 Galaxy Y Color Plus S5360（金属灰）
> HTC Radar（白银）
> Micromax X560

我如何提取特定的字符串，例如

> 王牌 s5830
> Y color Plus s5360
> 雷达
> X560

从字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:00:10.913

你必须有制造商的名单，但如果你有，那么你可以做这样的事情：

```
$MANUFACTURERS = array(
        "Samsung",
        "HTC",
        "Micromax"
    );
$descriptions = array(
        "Samsung Galaxy Ace S5830 (Onyx Black)",
        "Samsung Galaxy Y Color Plus S5360 (Metallic Grey)",
        "HTC Radar (White Silver)",
        "Micromax X560"
    );

$models = preg_replace(
    array_map(function($manufacturer) { 
        // Build a regex for each manufacturer
        return '/^'. preg_quote($manufacturer) .'\\s*|\\s*\\(.*\\)$/';
    }, $MANUFACTURERS), 
    '', // Replace manufacturer and color with an empty string
    $descriptions
); 
```

输出（`$models`）：`["Galaxy Ace S5830","Galaxy Y Color Plus S5360","Radar","X560"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:44:27.673

使用拆分（）。

首先**使用 '('**分割& 然后**使用 ' ' (空格) 分割**& 选择数组的**最后一个元素**。

就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:48:14.163

你可以得到像这样的字符串

```
Samsung Galaxy Ace S5830
HTC Radar 
```

有一个简单的：

```
$paren_position = strpos($input, '(');
if ($paren_position !== false) {
   $output = substr($input, 0, $paren_position);
} else {
   $output = $input;
} 
```

，但如果没有所有可能制造商的列表，则永远无法自动从字符串中删除制造商名称。没有办法自动确定制造商的终点和模型的起点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T17:51:06.660

这需要您不想删除的前缀字符串列表，除非您的示例错误并且`"Galaxy Ace S5830"`是可接受的输出。在这种情况下：

```
$bits = explode('(', $string);
$bits = explode(' ', $bits[0]);
array_shift($bits);
$out = trim(implode(' ', $bits)); 
```

这会分裂`(`，在第一个开放括号之前获取所有内容。然后它在空间上拆分，删除字符串中的第一个单词，然后将字符串的其余部分重新连接在一起。

示例代码和输出：[http ://codepad.org/Uxni2Xbr](http://codepad.org/Uxni2Xbr)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T17:52:50.400

只需使用这个：

```
$str = "Samsung Galaxy Ace S5830 (Onyx Black)";

$res = preg_split("/\s*\(/",$str);
$res = $res[0]; 
```

您现在将获得字符串：`Samsung Galaxy Ace S5830`in`$res`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-19T17:52:50.590

使用 preg_match 函数：

```
preg_match('/([^(]+)/', "Samsung Galaxy Ace S5830 (Onyx Black)", $matches); 
```

见[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

# jquery - 如何修复这个将下拉值发送到文本字段的 jquery 代码？

> ID：10233656
> 
> 赞同：0
> 
> 时间：2012-04-19T17:38:48.433
> 
> 标签：jquery

我以为我已经弄清楚了，但无法正常工作：

**我想要的只是以下内容**：这些下拉列表中的任何一个的 onChange 采用所选值并将其添加到 hiddentext 字段*[在实际应用程序中，这些下拉列表位于字段集中，并且根据所选产品类型仅显示一个或另一个]* 我知道很简单，但我看不出我做错了什么。

**下面的代码和我的 jsFiddle 在这里**：http : [//jsfiddle.net/justmelat/M3hyX/](http://jsfiddle.net/justmelat/M3hyX/)

```
<form method="post" action="">
<fieldset name="projInfo" id="projInfo">
                <legend>Proj Info</legend>
                Hidden Product Field:  <input name="hiddenProdField" id="hiddenProdField" type="text" />
                            </fieldset>

<fieldset name="Group1" id="Group1">
                <legend>Product 1</legend>
                <select name="firstSet"  id="firstSet">
                <option value="0">Select</option>
                <option value="One">One</option>
                <option value="Two">Two</option>
                <option value="Three">Three</option>
            </select>
            </fieldset>
<fieldset name="Group2" id="Group2">
                <legend>Product 2</legend>
                <select name="secondSet"  id="secondSet">
                <option value="0">Select</option>
                <option value="Four">Four</option>
                <option value="Five">Five</option>
                <option value="Six">Six</option>
            </select>
            </fieldset>
<fieldset name="Group3" id="Group3">
                <legend>Product 3</legend>
                <select name="thirdSet"  id="thirdSet">
                <option value="0">Select</option>
                <option value="Seven">Seven</option>
                <option value="Eight">Eight</option>
                <option value="Nine">Nine</option>
            </select>
            </fieldset>
</form>​

$(document).ready(function() {
        $("select#firstSet, select#secondSet, select#thirdSet").change(function(){
            var prodType = "";
            $("select#firstSet, select#secondSet, select#thirdSet option:selected");
            prodType = $(this).text();
          $("#hiddenProdField").text(prodType);
        })
        .trigger('change');
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:43:41.997

你弄错了`text()`函数和`val()`函数。见[http://jsfiddle.net/M3hyX/5/](http://jsfiddle.net/M3hyX/5/)

```
 $("#firstSet, #secondSet, #thirdSet").change(function(){
        $("#hiddenProdField").val($(this).val());
    })
    .trigger('change'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:43:00.407

看起来`$("#hiddenProdField").text(prodType);`应该是`$("#hiddenProdField").val(prodType);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T17:43:22.310

```
$('fieldset select').change(function() {
 $('input#hiddenProdField').val(this.value);
}); 
```

[演示](http://jsfiddle.net/M3hyX/13/)

# nhibernate - QueryOver Many to Many with a single SQL join

> ID：10233660
> 
> 赞同：2
> 
> 时间：2012-04-19T17:39:04.947
> 
> 标签：nhibernate, queryover

我有 2 个实体，多对多链接。（产品和用户）我想按用户限制产品：

```
User userAlias = null;
query.JoinAlias(product => product.Users, () => userAlias)
  .Where(() => userAlias.Id == currentUser.Id); 
```

它生成的 SQL 代码：

```
SELECT this_.Id as y0_
FROM   [Product] this_
       inner join UserToProduct users5_
         on this_.Id = users5_.Product_id
       inner join [User] useralias3_
         on users5_.User_id = useralias3_.Id
.... 
```

在“Where”中，我只使用 user_id，不需要第二次加入。

如何使用单个 SQL 连接编写查询（通过 QueryOver）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:41:02.937

这可能有帮助吗？我与 UsersRoles 有类似的设置

```
Role roleAlias = null;
var roles = _session.QueryOver<UsersRole>().JoinAlias(x => x.Role, () => roleAlias, JoinType.LeftOuterJoin).Where(
            x => x.User.UserId == userId).List(); 
```

产生以下内容：

```
SELECT this_.UsersRolesId         as UsersRol1_32_1_,
       this_.UserId               as UserId32_1_,
       this_.RoleId               as RoleId32_1_,
       rolealias1_.RoleId         as RoleId27_0_,
       rolealias1_.RoleName       as RoleName27_0_,
       rolealias1_.Active         as Active27_0_,
       rolealias1_.DateCreated    as DateCrea4_27_0_,
       rolealias1_.LastUpdated    as LastUpda5_27_0_,
       rolealias1_.RoleSettingsId as RoleSett6_27_0_
FROM   UsersRoles this_
       left outer join Roles rolealias1_
         on this_.RoleId = rolealias1_.RoleId
WHERE  this_.UserId = 'a7eec4eb-21cc-4185-8847-a035010e779f' /* @p0 */ 
```

# sql - Firebird 是否适合生产工作？

> ID：10233667
> 
> 赞同：-1
> 
> 时间：2012-04-19T17:39:24.713
> 
> 标签：sql, firebird

我听说过在生产系统中使用 Firebird 数据库的两大反对意见：不支持复制，以及无法恢复备份的严重问题。但那是不久前的事了，我知道 Firebird 已经（并且仍在）不断改进和发展。

那么今天这些问题有多重要，是否还有其他破坏交易的因素会使其在生产系统中不必要地难以使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:50:11.137

查看 Firebird 网站上的参考资料：[http ://www.firebirdsql.org/en/case-studies/](http://www.firebirdsql.org/en/case-studies/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:02:49.390

从 2000 年发布的第一个版本（0.9 beta）开始，我们在生产中的金融应用程序（2 层）中使用 Firebird 作为数据库服务器。

复制 - 我们使用我们自己的内部解决方案，所以我对可用的 3d 派对服务无话可说。

至于*无法恢复备份的严重问题。*. 我有一段时间没有遇到这些问题了。在可以备份但不能恢复的情况下，可以修改数据库结构。但是，如果不删除原始数据库，则始终可以修复数据或元数据，这使得备份/恢复例程再次为该数据库工作。

唯一要遵循的规则：还原时不要覆盖原始数据库。始终在新文件中恢复备份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T19:36:40.507

即使您的数据库或备份（火鸟）崩溃 - 也有团队按需进行恢复（损坏的备份或损坏的数据库）：http: [//ib-aid.com/team/](http://ib-aid.com/team/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T18:51:08.340

除了我个人遇到的不可恢复的备份情况（必须对其进行测试！）和复制之外，Firebird 还缺少许多高级功能，例如：

*   列级权限
*   加密
*   跨模式连接
*   表分区
*   重做日志（“时间点恢复”）*

此外，每个表的行数和索引的宽度也有一些限制，但这不是一个固定的数字——它取决于页面和行的大小。我记得行限制通常在数十亿。

*（使用“小心写入”，Firebird 数据库文件本质上是一个事务日志和数据库文件，因此在崩溃时它应该直到最后提交的事务没有损坏。这也意味着重新启动时的恢复时间为 0。）

# javascript - 如何允许使用 REST API 进行自由文本搜索？

> ID：10233669
> 
> 赞同：1
> 
> 时间：2012-04-19T17:39:33.780
> 
> 标签：javascript, asp.net, rest, full-text-search

我们有一个 ASP.NET MVC 项目，它有一个 REST API，由使用 Backbone 的 Web 前端使用。其中一项功能是自由文本搜索，目前使用如下 URL：

`http://server/Search/{search-query}/{page-number}/{page-count}`

这指向一个像这样的搜索控制器（相应地映射了一个路由）：

```
public JsonResult Search(string query, int page, int pageSize)
{
    // Do search
} 
```

它适用于带有单个单词的简单查询或没有复杂字符（例如`test`, `hello+world`）的简单查询，但似乎一些特殊字符（如`*`,`&`等）很容易打破这一点，并导致以下错误：

```
从客户端检测到潜在危险的 Request.Path 值
```

由于搜索查询是用户通过文本框输入的，因此需要更有弹性地处理包含无效字符的搜索查询。

我尝试使用 对搜索字符串进行编码`encodeURIComponent`，但似乎并未对所有有问题的字符进行编码。

是否有允许通过 REST API 进行自由文本搜索的推荐方法？任何想法或建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:46:35.377

我认为最好将分页参数也放在查询字符串中，而不是放在资源路径中。毕竟它们是搜索相关的，而不是您正在搜索的资源的子资源。还有这个“/Search/Search/”，这似乎有点多余。

所以我认为你的搜索网址应该是：

```
http://server/Search/?q=hello+world&page=1&page_size=10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:21:01.157

不确定这是否是正确的解决方案，但我最终将搜索查询从 URL 的核心部分中分离出来并将其移动到查询字符串中。所以，REST 调用现在看起来像这样：

`http://server/Search/Search/{page-number}/{page-size}/?q={search-query}`

这仍然使用相同的控制器：

```
public JsonResult Search(string q, int page, int pageSize)
{
    // Do search
} 
```

注意：搜索查询的方法参数已从 重命名`query`为`q`以反映查询字符串参数的名称。

搜索 URL 现在如下所示：

`http://server/Search/Search/1/10/?q=hello+world`

听起来在 REST 调用中使用查询字符串参数并没有我想象的那么糟糕，并且在这种情况下是可以接受的，但是如果有更好的做事方式，我仍然想听听。谢谢。

# php - 如何从单独的脚本中旋转 Winston 日志？

> ID：10233672
> 
> 赞同：1
> 
> 时间：2012-04-19T17:39:42.937
> 
> 标签：php, node.js, winston

我们正在使用 node.js 和 winston 来纠正日志文件。我们有一个用 PHP 编写的自定义日志轮换脚本，我们想在这些日志文件上使用它。但是脚本只是移动了在这种情况下不起作用的文件，因为winston在该文件上有一个打开的流。

如何使用 PHP 移动 winston 日志文件，以便 winston 在我移动后知道创建一个新的日志文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:54:18.863

[这里](https://stackoverflow.com/questions/11403953/winston-how-to-rotate-logs)提供了一个解决方案。

将a 添加`maxsize: [bytes]`到该`file: {}`部分，它将自动轮换日志（在文件名后附加一个#，即填满时`woot.log`变为）。`woot1.log`

# ruby - DataMapper：dm-timestamps 不能与 dm-validations 配合使用？

> ID：10233679
> 
> 赞同：0
> 
> 时间：2012-04-19T17:40:15.327
> 
> 标签：ruby, validation, datamapper

似乎 DataMapper 中的验证在 dm-timestamps 有机会自动设置 created_at 和 updated_at 字段之前运行。

考虑以下：

```
require 'dm-core'
require 'dm-migrations'
require 'dm-timestamps'
require 'dm-validations'

class MyResource
  include DataMapper::Resource

  property :mykey, Serial, :key=>true
  property :created_at, DateTime, :required=>true
  property :updated_at, DateTime
end

resource = MyResource.new
resource.save #fails 
```

保存失败，因为 created_at 为空白。有趣的是，如果您只是注释掉“需要 dm-validations”，问题就会消失。当然，您也可以从 :created_at 中删除 ":required=>true" ，但这不是我想要的 - created_at 是必需的。只是我正在使用 dm-timestamps 自动为我设置它。

还有人看到这个吗？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:53:50.530

最有可能的是，`created_at`时间戳是在运行验证之后设置的。这实际上是一个非常明智的行为，因为如果验证失败，它实际上不会被创建。您可以删除它，`:required => true`因为它实际上并没有给您购买任何东西，或者您可以设置一个`before_validation`设置时间戳的钩子。第二种选择可能会产生意想不到的后果。我不这么认为，但我对 DataMapper 的了解不够好，无法确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:58:14.740

在什么情况下你会合理地期望`created_at`为 NULL？您只是在防止手动操作数据库中的记录吗？

如果是这种情况，我可能会省略该`:required=>true`位，而只是在数据库中强制执行该约束。让`dm-timestamps`事情去做吧。它很结实。这似乎是一个务实的解决方案。正如他们所说，“做最简单的事情可能会奏效。”

# java - 有没有办法在 j2me 程序中显示 Web 组件？我正在为 s40 系列诺基亚手机编程

> ID：10233684
> 
> 赞同：1
> 
> 时间：2012-04-19T17:40:27.520
> 
> 标签：java, mobile, java-me, nokia, nokia-s40

我正在尝试在我的应用程序中显示一个小的 Web 内容。有没有办法显示网页内容？

目前我正在显示一个链接，单击该链接后，我的应用程序将关闭并且网络浏览器将打开以显示网页？

我想在我的应用程序中显示 Web 内容而不关闭我的应用程序。

任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:09:57.113

[LWUIT](http://lwuit.java.net/)有一个可以使用的[HTML 组件。](http://lwuit.java.net/nonav/iodocs/com/sun/lwuit/html/HTMLComponent.html)它有局限性，但可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:57:06.083

HTMLComponent 无法正常工作，有时控制切换不会完全按照流程发生，但我们仍然可以使用它，因为我们在 J2ME 中没有替代解决方案

# internationalization - Rails 3 视图中的 i18n 降价文件

> ID：10233686
> 
> 赞同：4
> 
> 时间：2012-04-19T17:40:39.290
> 
> 标签：internationalization, haml, markdown, ruby-on-rails-3.2, railstutorial.org

我目前正在阅读 Michael Hartl 的[Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book?version=3.2)，同时尝试书中未涵盖的其他一些内容。完成[第 5 章](http://ruby.railstutorial.org/chapters/filling-in-the-layout?version=3.2#top)创建静态页面后，我决定将视图代码更改为 HAML，将页面国际化，并将静态内容放入单独的（非部分）Markdown 文件中，使用 RDiscount gem 来呈现它们。例如：

**app/views/static_pages/about.html.haml**

```
- provide(:title, t('.about_us'))
:markdown
  #{render file: "static_pages/about.#{params[:locale]}.md"} 
```

在**static_pages**目录下，我有诸如**about.en.md**、**about.it.md**、**about.ja.md**等 Markdown 文件，因此在`:locale`参数中插值决定了渲染哪种语言的 Markdown 文件。

我的问题是：

1.  static_pages**目录**有点挤满了 Markdown 文件，因此是否有任何合理的默认/最佳实践位置（可能在**app**目录之外）来保存这些 Markdown 文件，它们可能会被不需要的人编辑了解应用程序的内部工作原理吗？
2.  有什么更好的方法来实现在视图中渲染多语言 Markdown 文件？我`:locale`对双字符串插值的使用似乎不优雅。
3.  有没有办法更改此代码，以便我可以将 Ruby 变量传递到 Markdown 文件中？例如，我知道我可以通过将**about.en.md**更改为 HAML 部分（**_about.en.html.haml**`#{language}` ）来使用Markdown 中的变量并将代码更改为如下所示：

     ******app/views/static_pages/about.html.haml**

    ```
    - provide(:title, t('.about_us'))
    :markdown
      #{render "about.#{params[:locale]}", language: 'Markdown!'} 
    ```

    但是，有没有办法在不将 Markdown 文件更改为另一种类型的文件的情况下做到这一点？如果存在这种方式，是否推荐/可行？**** 

 ***** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T12:22:18.420

在查看了这个[StackOverflow 答案](https://stackoverflow.com/a/4901393/567863)后，似乎 i18n Markdown 文件的最佳位置是**config/locales**目录下它们自己的操作名称目录，并且有一个很好的机会来重构. 因此，使用**about.html.haml**作为下面的示例，在**home**、**help**、**about**和**contact**视图中的调用已更改为完全相同的代码：`render``StaticPagesController`**`render`**

 ********app/views/static_pages/about.html.haml**

```
- provide(:title, t('.about_us'))
:markdown
  #{render file: localized_page_for(action_name, params[:locale])} 
```

该`localized_page_for`方法定义在`StaticPagesHelper`：

**应用程序/helpers/static_pages_helper.rb**

```
module StaticPagesHelper
  def localized_page_for(action, locale)
    "#{Rails.root}/config/locales/#{action}/#{action}.#{locale.to_s}.md"
  end
end 
```

因此，现在所有 Markdown 文件都已从**app/views/static_pages**目录中取出，并使用's属性和语言环境从它们各自的逻辑目录（例如**config/locales/about/about.en.md**等）中调用，减少混乱。`ActionController``action_name`

至于上面的问题 2，对于这类问题，字符串插值似乎很常见，所以我也认为它足够“优雅”。

至于上面的问题3，经过详尽的搜索，我还没有找到任何人将变量传递给纯Markdown文件的方法，并且[文档](http://daringfireball.net/projects/markdown/syntax)似乎没有说明支持它们，所以我将得出结论这是不可能的。如果将 Ruby 变量传递给 Markdown 是绝对必要的，那么文件将需要通过另一个解释器运行，有点像[这个 StackOverflow 答案](https://stackoverflow.com/a/10061808/567863)中描述的。

### **更新：**

在对应用程序运行安全扫描程序[Brakeman](http://brakemanscanner.org/)后，由于动态传递给调用而不是传递静态字符串，它提出了一个潜在的[动态渲染路径](http://brakemanscanner.org/docs/warning_types/dynamic_render_path/)安全警告（尽管是一个弱警告） 。因此，我将对该方法的调用移出视图，将方法本身移出（因此该文件现在为空）并移入，然后在每个方法中实例化一个实例变量以传递给视图。总之，代码现在看起来像这样，它没有收到安全警告：`params[:locale]``render``localized_page``StaticPagesHelper``StaticPagesController``@page`

**应用程序/控制器/static_pages_controller.rb**

```
class StaticPagesController < ApplicationController

  before_filter :localized_page, only: [:help, :about, :contact]

  def home
    if signed_in?
      @micropost  = current_user.microposts.build
      @feed_items = current_user.feed.paginate(page: params[:page])
    else
      localized_page
    end
  end

 def help
 end

 def about
 end

 def contact  
 end

 private

   def localized_page
    @page = "#{Rails.root}/config/locales/"\
            "#{action_name}/#{action_name}.#{params[:locale].to_s}.md"
   end
end 
```

**app/views/static_pages/about.html.haml**

```
- provide(:title, t('.about_us'))
:markdown
  #{render file: @page} 
```**********

# java - 可调整大小的 ListeningExecutorService

> ID：10233689
> 
> 赞同：1
> 
> 时间：2012-04-19T17:40:42.543
> 
> 标签：java, guava, executorservice

我已经养成了将`ExecutorService`s 包裹在 a`listeningDecorator`中来制作 a的习惯`ListeningExecutorService`。我知道这是 Guava 团队的建议，而且似乎总是值得的。

但是，我在这里遇到了一个问题。我的 executors 基于标准是不变的`ThreadPoolExecutor`，我想将线程池大小的控制权交给我的应用程序（特别是向支持该应用程序的管理员公开）。使用 undecorated `ThreadPoolExecutor`，执行此操作所需的方法被公开，但包装器对我隐藏了委托。

那么，我需要做什么才能在`ThreadPoolExecutor`不放弃的情况下回到 api 暴露的 api `listeningDecorator`？

我有几个想法是：

1.  `ListeningDecorator`创建一个暴露委托的新的
2.  保留对代表以及装饰的参考`Executor`
3.  仅保留对 的引用，并仅在请求`ThreadPoolExecutor`时包装它`ExecutorService`
4.  将我的方式反映给委托并从那里操作线程池大小

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:21:13.553

Guava 团队成员在这里。

我会编写一个新`ListeningThreadPoolExecutor`类，它基本上是一个`ListeningDecorator`包装 a 的变体`ThreadPoolExecutor`，但不是公开委托本身，而是公开转发给委托`setCorePoolSize(int size)`的方法。`ListeningThreadPoolExecutor``ThreadPoolExecutor`

这种方法比选项 1 暴露的内部细节更少，但如果做不到这一点，我会回退到选项 1，正如你所描述的那样。

# nsdate - NSDate 值无法跨方法访问

> ID：10233695
> 
> 赞同：1
> 
> 时间：2012-04-19T17:40:50.610
> 
> 标签：nsdate

很抱歉问了这么一个微不足道的问题。我是 Objective-C 的新手，在尝试了几种可能的方法并在谷歌搜索之后，根本看不到如何让它工作。请帮忙！我的问题很简单。我有一个类级别的 NSDate 对象，它在类中的任何方法之外声明为：

```
NSDate *fromDate; 
```

现在，在一个方法中，将此值设置为 DatePicker 中的日期：

```
fromDate = [datePicker date]; 
```

完成上述任务后不久，我将它的值打印到日志中并且它工作正常。

```
NSLog(@"From Date: %@", fromDate); 
```

现在，当我在另一种/不同的方法中使用 NSDate 的值时，该值消失了！为什么它不在同一个类本身的方法之间持久化？我该怎么做才能跨方法访问该值？

* * *

感谢您的回复。

嗨，雷米，

1.  我不知道 Objective-C 没有类级别的变量！感谢您指出！

2.  是的，我已经将项目（在 Xcode 中）设置为 ARC（所以，我认为应该小心）。

3.  这是代码：

在 ViewController.h

```
....
....
@property (nonatomic, retain) NSDate *historyFromDate;
@property (nonatomic, retain) NSDate *historyToDate;
....
....
-(IBAction) fromDateChosen: (id)sender;
-(void) fetchTheHistory; 
```

在 ViewController.m 中

```
...
...
@synthesize historyFromDate;
@synthesize historyToDate;
....
....

-(IBAction) fromDateChosen: (id)sender {

NSString *buttonTitle = @"I've chosen the 'FROM' date";

if ([[buttonDateChosen currentTitle] isEqualToString:buttonTitle]) { 

    NSLog(@"User has chosen the 'From' date");

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
    [dateFormatter setTimeStyle:NSDateFormatterMediumStyle];

    // Get the chosen date value
    NSDate *fromDate = [datePicker date];
    historyFromDate = fromDate;

    // Set the 'to' date label to reflect the user's choice
    labelFromDate.text = [dateFormatter stringFromDate:historyFromDate];
    NSLog(@"'From' Date Chosen:%@", historyFromDate);
          //[dateFormatter stringFromDate:[datePicker date]]);

    [self fetchTheMoodHistory];
}
}
...
...
...

-(void) fetchTheHistory {

NSLog(@"Calling fetchTheHistory for the period from %@", historyFromDate);
...
...
}

...
... 
```

*在用户从 UI 中的 Date Picker 对象中选择日期后，将调用*fromDateChosen 。*在方法“ *fromDateChosen* ”中，当我打印*historyFromDate*时，该值是正确的。但是，当我在*fetchTheHistory*方法中打印它时，该值显示当前日期/时间（不是用户选择的日期/时间）。*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:34:57.020

尝试将 fromDate 变量放在类范围内，例如：

```
@implementation ViewController
{
    NSDate *fromDate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:51:23.473

的日期属性`UIDatePicker`由该类保留，只要日期选择器本身在范围内且有效（未发布），就可以访问。您将此日期值存储在一个变量中，但自己不保留它，因此当日期选择器超出范围时，您将丢失该值。作为快速修复，请改为执行此操作；

```
fromDate = [[datePicker date] retain]; 
```

现在，这不是最好的方法，您确实应该将日期作为使用此信息的任何类的属性。*

# linux - 使 Apache2 在 json 中提供目录索引

> ID：10233700
> 
> 赞同：6
> 
> 时间：2012-04-19T17:41:16.893
> 
> 标签：linux, apache, ubuntu, apache2, webserver

当启用并获得特权时，Apache2 中的[mod_dir](http://httpd.apache.org/docs/2.0/mod/mod_dir.html)模块会在请求不包含 index.html 文件的目录时自动提供带有目录内容的 HTML 格式页面。我正在寻找一种使这些目录内容机器可读的简单方法；最好将目录的内容格式化为包含子目录/子文件的 JSON 数组，而不是 HTML 页面。

什么是一种简单的方法来实现这一点，它适用于 Apache2.2 的大多数标准配置？（请不要使用php脚本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:46:49.237

> 什么是完成此任务的简单方法，什么适用于 Apache2.2 的大多数标准配置？

没有一个。您需要修改和重建 mod_autoindex，或者需要重定向到服务器上的脚本或生成的 JSON 文件。

# php - 根据值获取关联数组的元素

> ID：10233704
> 
> 赞同：1
> 
> 时间：2012-04-19T17:41:28.313
> 
> 标签：php

我有这个数组：

```
Array ( 'jan' => 2, 'feb' => 1, 'mar' => 2, 'apr' => 1 ) 
```

..我想回来：

```
Array ('jan', 'mar') 
```

如，找到具有最高计数的 2 个元素并将它们放入一个数组中。实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T17:44:23.123

您可以使用[`max()`](http://php.net/max)获取最大值，并[`array_keys()`](http://php.net/array_keys)获取包含具有该值的键的数组。

```
$max = array_keys($array, max($array)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:50:37.437

好吧，当您需要获得固定数量的最高值时，此方法有效。

```
$array = array( 'jan' => 2 'feb' => 1 'mar' => 2 'apr' => 1 );
arsort($array);
$i = 0;
$max = 2;
$newArray = Array();
foreach($array as $key => $value)
{
  if ($i < $max)
  {
    $newArray[] = $key;
  }
  $i++;
} 
```

# c# - 在 C# 对象上调用 C++/CLI 删除

> ID：10233710
> 
> 赞同：11
> 
> 时间：2012-04-19T17:41:49.780
> 
> 标签：c#, c++-cli

我正在将一些代码从 C++/CLI 转换为 C#。其中一个对象在 C++/CLI 版本中有一个析构函数。使用后，其他一些 C++/CLI 代码在此对象上调用“删除”。

我需要在该对象的 C# 版本中实现哪种方法，以便那些“删除”继续发挥相同的功能（IDisposable.Dispose、终结器或我缺少的其他东西）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-19T17:46:14.637

如果您需要确定性地处理资源，我会说[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)界面就是您所寻找的。这通常是非托管资源的情况，例如需要关闭的非托管句柄、流或数据库连接。

在 C++/CLI 中，如果声明托管类型（`ref class`等），`IDisposable`则使用析构函数语法实现，并`Dispose()`使用`delete`关键字调用。如果您在本地声明此类托管类型的对象（不使用`^`运算符 or `gcnew`），C++/CLI 甚至`Dispose()`会在对象超出范围时自动调用您。这样一来，C++/CLI 比 C# 更方便。

使用 C# 时您将无法调用`delete`该对象，您需要`Dispose()`手动调用它。处理`IDisposable`对象的另一种方法是[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)块。

终结器（在 C# 中使用析构函数语法实现）与 C++ 析构函数不同，因为它在何时被调用是不确定的。带有终结器的对象基本上会排队，直到终结器线程决定调用它们的终结器，因此实际上您永远不知道确切的调用时间。

处理非托管资源的最佳方法可能是两者的结合。请参阅此处了解推荐的方法：http:
[//msdn.microsoft.com/en-us/library/b1yfkh5e (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/b1yfkh5e(v=vs.100).aspx)

但是请注意，在使用 时`IDisposable`，即使您可以确定性地处置非托管资源，托管对象仍需要由垃圾收集器（非确定性地）收集。

我刚刚发现一篇文章解释了 C++/CLI 和 C# 之间的区别。您可能会觉得它很有趣：
[http ://weblogs.thinktecture.com/cnagel/2006/04/ccli-finalize-and-dispose.html](http://weblogs.thinktecture.com/cnagel/2006/04/ccli-finalize-and-dispose.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T18:27:54.350

C++/CLI 和 C# 之间存在术语不匹配。C++/CLI 析构函数 (~Foo) 是 IDisposable.Dispose() 方法实现。C++/CLI 类没有显式实现 IDisposable，它是自动从析构函数的存在开始的。

C++/CLI 终结器 (!Foo) 是 C# 析构函数。

所以 C++/CLI*删除*操作符相当于调用 Dispose() 方法。当心 C++/CLI 中的堆栈语义，由不带 ^ 帽子的引用类型的局部变量触发。编译器在作用域块的末尾生成对 Dispose() 的隐藏调用。这相当于 C# *using*关键字。很难从源代码中看到，因此请特别注意或使用 ildasm.exe 查看生成的 IL

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:51:19.783

C# 没有提供相同的工具，但它确实为您提供了模式：如果您的 dtor 正在关闭流、取消链接指针或适当地设置状态，那么我觉得该`IDisposable`接口非常适合：

```
// C#
void Dispose()
{
  _stream.Close();
  _ptr = null;
  _running = false;
}

// with

obj.Dispose(); 
```

您不能真正强制 GC 保持内存打开。有一些方法可以帮助 GC 了解可以和应该释放的内容，请阅读[http://msdn.microsoft.com/en-us/library/ee787088.aspx](http://msdn.microsoft.com/en-us/library/ee787088.aspx)了解更多信息。

请记住， using`IDisposable`期望您适当地调用该`Dispose()`方法。所以代替每个`delete`，你会想要使用`Dispose()`. 终结器的安全部分是，当 GC 实际释放它时，它会被调用。但是，您不能自己调用​​终结器（因此，如果删除/处置的时间很重要，那不是正确的解决方案。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T17:47:13.760

对我来说，这真的取决于析构函数在做什么。如果它正在执行诸如释放非托管资源（例如 SQL 或文件连接）之类的操作，那么我将实现 IDispose 并在 Dispose() 方法中关闭连接。

如果它正在破坏不需要任何显式清理的其他对象，那么我只需将析构函数留在外面，让 GC 处理它。

# emacs - 如何在 emacs 中使用向后删除字而不是向后删除字

> ID：10233712
> 
> 赞同：3
> 
> 时间：2012-04-19T17:41:53.717
> 
> 标签：emacs

如果命令backward-kill-word（C-backspace）不会将单词附加到kill ring，而只是将其删除，我会更喜欢。也为杀词。（Md），是否有等效的删除词？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:45:38.727

这个问题[在此处和](https://stackoverflow.com/questions/6133799)[此处](http://www.emacswiki.org/emacs/BackwardDeleteWord)的 emacswiki 中得到了解答。希望有帮助...

# delphi - 如何使用 ClientDataset 在运行时创建必填字段

> ID：10233714
> 
> 赞同：3
> 
> 时间：2012-04-19T17:41:59.647
> 
> 标签：delphi

我正在使用此代码在运行时创建一组字段

```
 ClientDataSet1.FieldDefs.Add('ID', ftInteger, 0);
  ClientDataSet1.FieldDefs.Add('Serial', ftInteger, 0);
  ClientDataSet1.FieldDefs.Add('Customer', ftString, 40);
  ClientDataSet1.FieldDefs.Add('Address', ftString, 40);
  ClientDataSet1.CreateDataSet; 
```

现在我想让一些字段成为必填字段，如何将在运行时创建的字段定义为必填字段？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T17:43:54.713

add 方法有第四个参数，称为*required*

```
procedure Add(const Name: string; DataType: TFieldType; Size: Integer = 0;
  Required: Boolean = False); 
```

将该值设置为 True 并且您的字段将是强制性的。

使字段强制`ID`使用此代码的示例

```
ClientDataSet1.FieldDefs.Add('ID', ftInteger, 0, True); 
```

# ios - 在基于故事板的应用程序中禁用/启用 UITabBarController 中的选项卡

> ID：10233715
> 
> 赞同：5
> 
> 时间：2012-04-19T17:42:04.167
> 
> 标签：ios, uitabbarcontroller, storyboard

我用故事板构建了我的应用程序，所有视图都由 tabbarcontroller 管理。

所以在启动时（我目前只在 iPad UI 上工作）它这样做：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)
    {
        UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
        UISplitViewController *splitViewController = [tabBarController.viewControllers objectAtIndex:0];
        UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
        splitViewController.delegate = (id)navigationController.topViewController;

        UINavigationController *masterNavigationController = [splitViewController.viewControllers objectAtIndex:0];
        ProductionMasterViewController *controller = (ProductionMasterViewController *)masterNavigationController.topViewController;
        controller.managedObjectContext = self.managedObjectContext;
    }
} 
```

我希望能够根据用户输入启用或禁用 tabBarController 中的选项卡（例如，需要在第一个选项卡中选择一个项目才能访问默认情况下禁用的第二个和第三个选项卡）

我不清楚的是如何访问选项卡以启用/禁用它们。我会创建一个 appdelegate 的实例，然后做类似的事情吗

```
AppDelegate *d = (AppDelegate *)[[UIApplication sharedApplication] delegate];
UITabBarController *tabs = (UITabBarController *)[d.window rootViewController];
[[[[tabs tabBar] items] objectAtIndex:2] setEnabled:YES];
[[[[tabs tabBar] items] objectAtIndex:3] setEnabled:YES];
[[[[tabs tabBar] items] objectAtIndex:4] setEnabled:YES]; 
```

（这有点像它应该工作，但它也似乎相当恶心。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T22:09:31.477

由于您使用的是基于故事板的应用程序，因此我假设您已`UITabBarController`在故事板中定义为根控制器。顺便说一句，您也可以通过标识符检索它，而不是从窗口走到根视图控制器。

通过设置 UITabBarController 的委托（即符合 的委托）来限制哪些选项卡是可选的`UITabBarControllerDelegate`。

在委托中，您可以实现这两种方法：

`– tabBarController:shouldSelectViewController:`

`– tabBarController:didSelectViewController:`

很可能，您只需要首先限制（禁止）选择，直到您的工作流程准备好。

另一种方法是在标签栏控制器上设置“viewControllers”属性，每次通过里程碑时。在每个里程碑处，您将更广泛的视图控制器数组设置到此属性中，这将打开附加的选择选项卡项。

**斯威夫特 3**

（为了便于理解而展开）

```
let arrayOfTabBarItems = tabBarController?.tabBar.items

        if let barItems = arrayOfTabBarItems, barItems.count > 0 {
            os_log("barItems.count is now ", barItems.count)
            tabBarItem0 = barItems[0]
            tabBarItem0.isEnabled = true
            tabBarItem1 = barItems[1]
            tabBarItem1.isEnabled = true
            tabBarItem2 = barItems[2]
            tabBarItem2.isEnabled = true
            tabBarItem3 = barItems[3]
            tabBarItem3.isEnabled = true
            tabBarItem4 = barItems[4]
            tabBarItem4.isEnabled = true
        } 
```

这可以在每个选项卡控制器上的 viewWillAppear 中使用。检查您的规则并相应地限制每个选项卡。（更简洁的方法）

```
let arrayOfAllTabBarItems = tabBarController?.viewControllers
    if   let tabBarArray = arrayOfAllTabBarItems, tabBarArray.count > 0 {
        for x in 0...tabBarArray.count-1 {
            let tabBarItem = tabBarArray[x]
            if tabBarItem.title != nil {
                if tabBarItem.title == "Tab1" || tabBarItem.title == "MyTab" || tabBarItem.title == "Tab2Check" {
                    tabBarItem.tabBarItem.isEnabled = !(isMyRuleTrue!)
                }
            }
        }
    } 
```

# android - Cordova / Phonegap、jQuery Mobile、Android 和粘性固定页脚

> ID：10233716
> 
> 赞同：2
> 
> 时间：2012-04-19T17:42:06.837
> 
> 标签：android, jquery-mobile, cordova

jQuery Mobile (v1.1) 的固定页脚应该停留在屏幕底部并浮动在文本顶部，否则始终可见。这在浏览器中效果很好，但是当我将它与 Phonegap（现在称为 Cordova）（v1.6）捆绑到 Android 应用程序中时，页脚会停留在它第一次出现的地方。那是页脚与文本一起滚动。

真正奇怪的是，当您点击屏幕时，页眉和页脚会固定在页面的顶部和底部（这是 jQuery Mobile 内置的具有固定页眉和页脚的功能），当您再次点击它时，页眉和页脚会消失回到浮动。但这一次，页脚停留在屏幕底部，不会随着文本滚动，就像从一开始就假设的那样。

知道如何修复页脚吗？

这是我正在使用的代码：

```
 <div data-role="footer" data-theme="b" data-position="fixed" data-id="myfooter">
        <a href="#nextPage" data-role="button" data-icon="arrow-r" data-iconpos="right" data-theme="d"  data-transition="slide">Continue</a>
    </div> 
```

这是我所看到的一个例子。

![页脚示例](../Images/efb486c93cff1bbc28f69688cd90f848.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:26:51.603

固定页脚正在工作 Jquery Mobile 1.2。我确实注意到论坛上有很多修复更新，所以它可能已经改进了。iOS 上滑键盘/输入也存在问题，将页脚错误地移动到页面中间。

我肯定会建议升级到`jquery.mobile-1.2.0.js`那里并从那里去。我必须这样做，除了错误的行为之外，固定的页脚也有效。

# ajax - 在ajax窗口中使用jquery

> ID：10233718
> 
> 赞同：1
> 
> 时间：2012-04-19T17:42:14.683
> 
> 标签：ajax, image, jquery-ui, jquery

我正在使用 Jquery UI ajax 选项卡在我的网站上显示内容。标签工作得很好。在我的每个 Ajax 选项卡上，我都有一个不太好用的图像旋转器。

图像旋转器需要 jquery 才能正常工作。除了这段代码之外，所有的 jquery 图像旋转器插件文件似乎都工作正常......

```
 jQuery(document).ready(function($) {

            var banner1 = $('#banner-rotator1').royalSlider({
                imageAlignCenter:true,
                imageScaleMode: "fill",

                hideArrowOnLastSlide:true,
                slideSpacing:20,

                autoScaleSlider: true,
                autoScaleSliderWidth: 1150,
                autoScaleSliderHeight: 400
            }).data("royalSlider");             

            var banner2 = $('#banner-rotator2').royalSlider({
                imageAlignCenter:true,
                imageScaleMode: "fill",

                hideArrowOnLastSlide:true,
                slideSpacing:20,

                autoScaleSlider: true,
                autoScaleSliderWidth: 1150,
                autoScaleSliderHeight: 400
            }).data("royalSlider");  

            var banner3 = $('#banner-rotator3').royalSlider({
                imageAlignCenter:true,
                imageScaleMode: "fill",

                hideArrowOnLastSlide:true,
                slideSpacing:20,

                autoScaleSlider: true,
                autoScaleSliderWidth: 1150,
                autoScaleSliderHeight: 400
            }).data("royalSlider");

            var banner4 = $('#banner-rotator4').royalSlider({
                imageAlignCenter:true,
                imageScaleMode: "fill",

                hideArrowOnLastSlide:true,
                slideSpacing:20,

                autoScaleSlider: true,
                autoScaleSliderWidth: 1150,
                autoScaleSliderHeight: 400
            }).data("royalSlider");
        }); 
```

我知道代码可以工作，因为如果我将它剪切并粘贴到 ajax 页面中它可以正常工作，但是当代码放置在“母版页”中时，我似乎无法让图像旋转器工作。有谁知道我做错了什么？

这是我的页面的链接[http://dl.dropbox.com/u/14080718/Ajax-Test/Ajax-stripped.html](http://dl.dropbox.com/u/14080718/Ajax-Test/Ajax-stripped.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:47:43.523

这是因为这段代码是在 DOM 就绪时运行的，即母版页 DOM 就绪。您稍后会加载您的 ajax 内容，并且 javascript 代码在 ajax 内容加载之前已经运行。您可以做的是将该代码放在一个函数中。然后在你的 ajax 加载的内容中运行该函数`document.ready`

例如

在您的母版页中

```
function code_to_run(){ 
    // your code here 
} 
```

在您的 ajax 加载的内容中

```
$(function(){ 
    code_to_run() // call the function in your masterpage 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:07:03.210

母版页和内容页的交互很复杂，可以通过查看[http://www.codeproject.com/Articles/36107/Master-Page-and-Content-Page-Interaction](http://www.codeproject.com/Articles/36107/Master-Page-and-Content-Page-Interaction)更好地理解。您可以在其中找到一段描述如何从母版页引用内容页的段落。我希望这有帮助

# java - MySQL - 我的输出中只有 1 行？

> ID：10233719
> 
> 赞同：0
> 
> 时间：2012-04-19T17:42:15.543
> 
> 标签：java, mysql

这是我执行查询的jsp页面。当我运行它时，我从输出的课程表中只得到 1 行。不久前我得到了正确的输出，然后我开始使用界面并意识到我不再得到正确的输出。任何人都可以指出错误吗？谢谢你。

```
rs = statement.executeQuery("select * from courses");

<TABLE cellpadding="15" border="1" style="background-color: #ffffcc;">
<%

while (rs.next()) {
%>
<TR>
<TD><%=rs.getString(1)%></TD>
<TD><%=rs.getString(2)%></TD>
<TD><%=rs.getString(3)%></TD>
<TD><%=rs.getString(4)%></TD>
<TD><%=rs.getString(5)%></TD>
<TD><%=rs.getString(6)%></TD>
<TD><%=rs.getString(7)%></TD>
</TR>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:59:03.570

假设你的粘贴是正确的，你错过了

```
<%
}
%> 
```

在循环结束附近。

# c# - 在 WPF 中运行时创建后的访问控制

> ID：10233720
> 
> 赞同：0
> 
> 时间：2012-04-19T17:42:28.037
> 
> 标签：c#, wpf, xaml

我在运行时创建了许多文本框然后我想向它们添加值.. 之后我添加一个按钮来单击它并计算文本框中的所有这些值但我不知道如何访问这些文本框？ ?

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:20:54.210

您是否尝试过 FindControl 方法？

```
private void Button1_Click(object sender, EventArgs MyEventArgs)
{
  // Find control on page.
  Control myControl1 = FindControl("TextBox2");
  if(myControl1!=null)
  {
     // Get control's parent.
     Control myControl2 = myControl1.Parent;
     Response.Write("Parent of the text box is : " + myControl2.ID);
  }
  else
  {
     Response.Write("Control not found");
  } 
```

}

参考： http: [//msdn.microsoft.com/en-us/library/system.web.ui.control.findcontrol (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.findcontrol(v=vs.71).aspx)

我不时使用这种方法，只要您知道文本框的名称或您需要的任何控件。

```
FindControl("textboxnamehere").Text = "This would put this string in the current text box"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:00:30.737

这只是一个示例，假设您将文本框放在堆栈面板中 - 您需要一个容器！，

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        var sum = 0.0;
        foreach (var child in stackPanel.Children)
        {
            var textBox = child as TextBox;
            if (textBox == null) continue;
            double value;
            Double.TryParse(textBox.Text, out value);
            sum += value;
        }

        Console.WriteLine(sum);
    } 
```

当然，我假设您知道您可能想要验证输入（使用数字文本块） button.Click += Button_click; ， ETC..

**编辑问题**

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        var sum = 0.0;
        for (int i = 1; i < grid.Children.Count; i++ )
        {
            var textBox = grid.Children[i] as TextBox;
            if (textBox == null) continue;
            double value;
            Double.TryParse(textBox.Text, out value);
            sum += value;
        }

        Console.WriteLine(sum);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:30:47.000

如果你有一个容器中的文本框，比如 StackPanel，你可以做这样的事情......

```
private void btnCalculate_Click(object sender, EventArgs e)
{
    var total = 0;
    var textboxes = StackPanelParent.Children.OfType<TextBox>();

    foreach (var textbox in textboxes)
    {
         var input = 0;
         int.TryParse(textbox.Text, out input);
         total += input;
    }

    MessageBox.Show(total.ToString());
} 
```

# c# - 类协会

> ID：10233722
> 
> 赞同：-2
> 
> 时间：2012-04-19T17:42:42.953
> 
> 标签：c#, associations, uml

我正在开发一个应该模拟银行账户的程序。我的基类名为“Investment”，我的两个子类名为“Stock”和“MutualFund”，还有一个名为“CustomerAccount”的类，它应该与基类“Investment”相关联。 ![这是课程的图片以及应如何设置它们](../Images/19baa6e4cc26fd4c8ab74bcaf6b73564.png)

我不确定如何将 CustomerAccount 类与 Investment 类相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:47:39.037

CustomerAccount 类与 Investment 具有“CanHave”关系。

在您的 CustomerAccount 类中，创建一个投资集合。您可以使用列表来实现此目的：

```
List<Investment> _investments; 
```

不要忘记在构造函数中初始化列表。

```
_investments = new List<Investment>(); 
```

**编辑：**

遍历列表：

```
foreach Investment invst in _investments
{
    if (invst.GetType() == typeof(Stock)) { }
    else if (invst.GetType() == typeof(MutualFund)) { }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:45:27.553

而不是拥有一个帐户`AddStock`，`AddMutualFund`它应该只拥有`AddInvestment`一个然后用于添加股票或发明的帐户。然后你得到所有`Investment`s，而不是得到所有股票或共同基金。

# android - 数组没有获取值

> ID：10233724
> 
> 赞同：-2
> 
> 时间：2012-04-19T17:42:47.737
> 
> 标签：android

我一直在做这个 yahtzee 项目并且遇到了问题。dice_number 数组似乎没有得到随机生成的值。oneScore TextView 始终显示“--”。我正在发布我的代码。提前感谢您提供的任何帮助。另外，如果您需要查看更多代码，请告诉我。

```
 switch (v.getId()) {
       case R.id.rollBtn:
           for(i = 0; i < 5; i++){
               randnum = random.nextInt(5);
               if(i == 0){
                   images[i].setImageResource(image_array[randnum]);
                   dice_number[i] = randnum;
               }
               else if(i == 1){
                   images[i].setImageResource(image_array[randnum]);
                   dice_number[i] = randnum;
               }
               else if(i == 2){
                   images[i].setImageResource(image_array[randnum]);
                   dice_number[i] = randnum;
               }
               else if(i == 3){
                   images[i].setImageResource(image_array[randnum]);
                   dice_number[i] = randnum;
               }
               else if(i == 4){
                   images[i].setImageResource(image_array[randnum]);
                   dice_number[i] = randnum;
               }
               else if(i == 5){
                   images[i].setImageResource(image_array[randnum]);
                   dice_number[i] = randnum;
               }
               }
           break;
       case R.id.onesBtn:
           for (i = 0; i < 5; i++)
           {
               if (dice_number[i] == 1) {
                   dice_count[0] += 1;
                   oneScore.setText(Integer.toString(dice_count[0]));
               }
                   else 
                       oneScore.setText("--");
           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:53:44.603

第二个 for 循环为每个数字重新设置文本。所以如果你有一个数组

```
dice_number = {3, 2, 1, 1, 4} 
```

将`TextView`被设置为`--`, then `--`, then `1`(如果`dice_count[0]`是 0), then `2`, then `--`，所以您将看到的只是 的结果`dice_number[4]`，这是最后一个`--`。

您需要构造一个字符串或使用多个`TextViews`来查看整个数组，而不仅仅是最后一个元素。

此外，据我所知，第一个 for 循环中的 if 语句没有做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:54:58.610

不是答案，只是建议的重构：

```
case R.id.rollBtn:
           for(i = 0; i < 5; i++){
               randnum = random.nextInt(5);
               images[i].setImageResource(image_array[randnum]);
               dice_number[i] = randnum; 
             }
           break; 
```

`if(i == 5) {..}`事实上，永远不会到达那段代码，因为 的值`i`始终是 0、1、2、3 或 4。

# c# - BackgroundWorker.ProgressChanged 和 RunWorkerCompletedhandler 还想调用吗？

> ID：10233730
> 
> 赞同：1
> 
> 时间：2012-04-19T17:43:13.807
> 
> 标签：c#, winforms, multithreading, vsto, backgroundworker

我想使用 BackgroundWorker 进行后台操作，因为我认为在更新 WinForm-Controls 时不需要处理“BeginInvoke”等。那正确吗？据我所知，您可以使用 ProgressChanged 和 RunWorkerCompleted 事件处理程序直接更新 WinForms 控件。

但我不能，我虽然得到以下异常：

> 控制从创建它的线程以外的线程访问的控件名称

一些代码：

```
public partial class ConfigurationForm : Form
{

    public ConfigurationForm()
    {
        InitializeComponent();
        backgroundWorker1.WorkerReportsProgress = true;
        backgroundWorker1.WorkerSupportsCancellation = true;
        label1.Text = String.Empty;
        // [...]
    }

    private void StartButton_Click(object sender, EventArgs e)
    {
        if (backgroundWorker1.IsBusy != true)
        {
            label1.Text = "Converting...";
            backgroundWorker1.RunWorkerAsync();
        }
    }

    private void CancelButton_Click(object sender, EventArgs e)
    {
        if (backgroundWorker1.WorkerSupportsCancellation == true)
        {
            backgroundWorker1.CancelAsync();
        }
        progressBar1.Dispose();
        this.Close();
    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
        // EXCEPTION here, why?
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;

        Converter c = new Converter();
        c.Start(worker, e);
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        // EXCEPTION in all cases, why?
        if (e.Cancelled == true)
        {
            label1.Text = "Canceled";
        }
        else if (e.Error != null)
        {
            label1.Text = "Error: " + e.Error.Message;
        }
        else
        {
            label1.Text = "Done!";
        }
    }
} 
```

我不得不说，这不是一个 WinForms 应用程序，而是一个 VSTO PowerPoint 插件。当用户单击 PowerPoint 功能区栏中的图标时，上面的表单由插件创建，如下所示：

```
//Do I need [STAThread] here? but doesn't seem to work anyway
private void button1_Click(object sender, RibbonControlEventArgs e)
{
    ConfigurationForm config = new ConfigurationForm();
    config.Show();
} 
```

你能告诉我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:49:39.737

我发布了链接，但我实际上并不认为这是最好的解决方案。显然，失败是因为您从未调用过 Application.Run() 或使用过 Form.ShowDialog()。您可以如图所示显式分配上下文，但如果操作不当，可能会遇到一些非常棘手的问题。就像多次分配它一样。

更好的解决方法是让它自动安装。然后确保您创建的任何表单都将仅在之前未完成时安装它。把它放在表单创建代码的前面：

```
 WindowsFormsSynchronizationContext.AutoInstall = true; 
```

最大的优势是，如果代码被重复，您将不会创建它的另一个实例，并且可能会搞砸线程的 ExecutionContext。

请考虑 ShowDialog() 作为另一个修复。如果我没记错的话，那么您现在也遇到了制表符和快捷键的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:06:13.350

您的假设对于 Windows 窗体是正确的。它的工作方式是`BackgroundWorkers`使用`SynchronizationContext`当前线程的。在 Windows 应用程序中，这将是一个`WindowsFormsSynchronizationContext`，它会为您进行编组。

在 VSTO 应用程序中，它不会。它可能只是默认的，它只是执行方法。Hans Passant 的链接包含您需要的代码，以使其按预期工作。IE：

```
System.Threading.SynchronizationContext.SetSynchronizationContext(new WindowsFormsSynchronizationContext());

...create and start your background worker here... 
```

# javascript - Knockout.js 可观察绑定未更新（使用 JSON 映射）？

> ID：10233731
> 
> 赞同：1
> 
> 时间：2012-04-19T17:43:17.737
> 
> 标签：javascript, json, knockout.js, knockout-mapping-plugin

**背景：**我有一个使用映射插件的单页 knockout.js 应用程序。数据通过来自服务器的 Websocket JSON 更新。我可以看到应用程序正在成功接收数据（在控制台中打印数据）并且当有*对象*删除/添加时，ViewModel 更新没有问题。

**问题：**从服务器更新对象的属性时，它不会*更改*ViewModel。我是否需要在每次更新时以某种方式返回对象属性？

以下是相关的代码片段：

```
var userMapping = {
        "users": {
            key: function(data) { return ko.utils.unwrapObservable(data.id); },
            create: function(options) {
                // for sortable ui access
                return createUser(options.data);
            }
        }
    };
var jobMapping = {
        "jobs": {
            key: function(data) { return ko.utils.unwrapObservable(data.id); },
            create: function(options) {
                // for sortable ui access
                return createJob(options.data);
            },
            update: function(options) {
                return createJob(options.data);
            }
        }
    };
var createJob = function(job, user) {        
        // leaflet init
        createJobIcon(job);

        // general data mapping
        var result = ko.mapping.fromJS(job);
        return result;
    };
self.engineModel.update = function(data) {
       ko.mapping.fromJS(data, userMapping, self.engineModel);
    }; 
```

在 ViewModel 中：

```
<li data-bind="visible: canceled()==false, attr: {class: 'job-li canceled-'+canceled()+' started-'+started()+' hold-'+hold() }"> 
```

感谢您的洞察力！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:42:27.630

我已经能够纠正这种行为，但我仍然对该决定的长期影响持怀疑态度。

我删除了这一行： `key: function(data) { return ko.utils.unwrapObservable(data.id); },`

现在一切都更新了。如果有人对进一步处理有想法，我会全力以赴（例如，这会影响性能吗？）

# php - 使用 SimpleXMLElement 获取元素内部文本

> ID：10233732
> 
> 赞同：3
> 
> 时间：2012-04-19T17:43:18.617
> 
> 标签：php, simplexml

我正在尝试访问 xml 元素的文本值。我正在使用`SimpleXMLElement`. 我必须遗漏一些明显的东西。

```
<h:html xmlns:jr="http://openrosa.org/javarosa" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ex="http://www.w3.org/2001/xml-events" xmlns:h="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/2002/xforms">
  <h:head>
    <h:title>NewForm</h:title>      
  </h:head>
</h:html>

$xml = new SimpleXMLElement($resp);
$xml->registerXPathNamespace('h', 'http://www.w3.org/1999/xhtml'); 
// I have tried with and without the namespace (it doesn't seem to make a difference)

$result = $xml->xpath('//h:title');
debug($result); 
```

运行上面的代码给了我：

```
array (
  0 => 
  SimpleXMLElement::__set_state(array(
     0 => 'NewForm',
  )),
) 
```

看起来很简单。我很难获得“NewForm”的价值

我试过了

`$result[0]`, `$result[0]->{0}`, `$result[0][0]`.

遍历`$result[0]`.

有人可以帮助指导我正确的方向，以便我可以从标题元素中获取文本吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T18:22:29.580

这对我有用你的例子：

```
echo (string)$result[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:22:38.110

选择数组中的项目后尝试转换为字符串：

```
[...]
$result = $xml->xpath('//h:title');
echo current($result); 
```

# c++ - 在模板定义中专门化模板成员

> ID：10233734
> 
> 赞同：2
> 
> 时间：2012-04-19T17:43:23.640
> 
> 标签：c++, templates

可以在模板定义之外专门化一些类成员函数：

```
template<class A>
struct B {
   void f();   
};

template<>
void B<int>::f() { ... }

template<>
void B<bool>::f() { ... } 
```

在这种情况下，我什至可以省略`f`通用类型的函数定义`A`。

但是如何把这个专业化放在课堂上呢？像这样：

```
template<class A>
struct B {
   void f();   

   void f<int>() { ... }
   void f<bool>() { ... }
}; 
```

在这种情况下我应该使用什么语法？

编辑：现在代码行最少的解决方案是添加一个假模板函数`f`定义并从原始函数显式调用它`f`：

```
template<class A>
struct B {
   void f() { f<A>(); }

   template<class B> 
   void f();

   template<> 
   void f<int>() { ... }

   template<> 
   void f<bool>() { ... }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:48:18.113

您应该将专业化放在`struct`：

```
template<>
struct B<int> {
   void f() { ... }
};

template<>
struct B<bool> {
   void f() { ... }
}; 
```

没有办法在定义模板版本的同一个类中专门化成员函数。您必须在类之外显式专门化成员函数，或者专门化整个类中的成员函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T17:59:45.860

您可以`B::f`在结构中创建模板函数：

```
struct B {
    template <typename T>
    void f();

    template<>
    void f<int>() { ... }

    template<>
    void f<bool>() { ... }
}; 
```

编辑：

根据您的评论，这可能会对您有所帮助，但我尚未测试它是否有效：

```
template <typename A>
struct B {
    template <typename T = A>
    void f() { ... }

    template<>
    void f<int>() { ... }

    template<>
    void f<bool>() { ... }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:51:38.937

```
#include<iostream>
using namespace std;

template<class A>
class B
{
public:
  void f() {
    cout << "any" << endl;
  }
};

template<>
class B<int>
{
public:
  void f() {
    cout << "int" << endl;
  }
};

int main()
{

  B<double> b1;
  b1.f();
  B<int> b2;
  b2.f();
  return 0;
} 
```

输出：

```
any
int 
```

其他任何事情都是不可能的。

# java - 包分类器4J

> ID：10233737
> 
> 赞同：-3
> 
> 时间：2012-04-19T17:43:39.597
> 
> 标签：java, word, classification

```
import net.sf.classifier4J.Utilities;
import net.sf.classifier4J.summariser.ISummariser;
import net.sf.classifier4J.summariser.SimpleSummariser; 
```

我正在做总结，所以我需要这些包，谁能告诉我从哪里可以找到这些包

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:51:48.630

Google 博士告诉我源代码库可以在这里找到：[http ://classifier4j.sourceforge.net/subprojects/core/cvs-usage.html](http://classifier4j.sourceforge.net/subprojects/core/cvs-usage.html)

# ios - 调整 MkMapView 注解

> ID：10233740
> 
> 赞同：3
> 
> 时间：2012-04-19T17:43:53.480
> 
> 标签：ios, image, annotations, mkmapview

我正在向 MkMapView 添加注释并使用自定义图像来执行此操作。我的自定义图像是带有一个小三角形箭头的盒子形状，它应该就在被注释的地方。似乎 MapView 默认使用图像的几何中心进行注释。围绕这个问题进行设计的最佳方法是什么？手动移动图标？以特定方式创建图标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T19:17:34.443

`MKAnnotationView`这是'[`centerOffset`](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html#//apple_ref/occ/instp/MKAnnotationView/centerOffset)属性的 Apple 文档：

> 默认情况下，注释视图的中心点放置在关联注释的坐标点处。您可以根据需要使用此属性重新定位注释视图。此 x 和 y 偏移值以像素为单位。正偏移值将注释视图向下和向右移动，而负值将它向上和向左移动。

# javascript - 多次链接到同一页面的正确方法是什么？

> ID：10233745
> 
> 赞同：0
> 
> 时间：2012-04-19T17:44:21.703
> 
> 标签：javascript, html, jquery-mobile

我试图有一个可以显示相同类型数据的页面（比如说水果）。然后我想在我的网站层次结构中的任何地方加载这个页面，但每次都使用不同的参数。

我的主页如下所示，有两个指向同一页面的链接`show.html`：

```
<div data-role="navbar" data-iconpos="top" data-theme="a" class="nav-ecommera">
    <ul >
      <li>
        <a href="show.html?p=apples" data-role="button">Apples</a>
      </li>
      <li>
        <a href="show.html?p=oranges" data-role="button">Oranges</a>
      </li>
    </ul>
</div> 
```

单击这两个按钮中的每一个都会`show.html`在 DOM 中创建一个新的页面实例。因此，show.html 中的所有项目都将在 DOM 中具有重复的 ID。

在我的 javascript 中，我想动态填充 show.html 页面：

```
$('div[id="show"]').live("pagebeforeshow", function(e, data) {
     var p = getUrlParameter("p");
     show(p);
});

var show = function(p) {
    $.ajax({
        url:'http://show.com/?p='+p,
        success: function(data) {
                    // Refresh 'show' page with new data
                    // First time: It's fine.
                    // Second time: 'show' page is duplicated in the DOM so it's messy.
                 } 
    });
} 
```

现在第一次`show.html`加载一切都很好。然而，第二次`show.html`加载两次，并且 DOM 包含许多重复的 ID。

有没有办法在加载新页面之前从 DOM 中删除第一页？

或者：

有没有更好的方法可以实现我在这里想要实现的目标？

**更新：**`show`我已经尝试在加载新页面时 删除以前的页面实例。就显示第二页而言，它起作用。但是在手动删除后，需要第二次显示第一页时会出现问题。

我认为原因是 jQuery mobile 似乎认为第一页已经加载，尽管我们手动删除了它。因此，再次访问时它不会完全重新加载第一页。我说的是这样的导航顺序：Home -> Apples -> Back to home -> Oranges -> Back to home -> Apples（这里你得到一个有缺陷的页面）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:07:37.497

您可以通过以下选项加载`show.php`页面：`$.mobile.changePage()``reloadPage`

```
//bind to all links that have an HREF attribute that starts with "show.html"
$('a[href^="show.html"]').bind('click', function () {

    //set a default query-string for the page-load
    var query = '';

    //if this link's HREF attribute has a query-string, use it
    if (this.href.indexOf('?') > -1) {
        query = this.href.split('?')[1];
    }

    //forward the user to the page, telling jQuery Mobile to reload the page
    //which will use the new query-string sent
    $.mobile.changePage('show.html', { reloadPage : true, data : query });

    //prevent the default behavior of the click
    return false;
}); 
```

> **reloadPage**（*布尔值*，默认值：false）
> 
> 强制重新加载页面，即使它已经在页面容器的 DOM 中。仅当 changePage() 的 'to' 参数是 URL 时使用。这是文档`$.mobile.changePage()`：

*来源：http: [//jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)*

`data-url`当 jQuery Mobile 加载同一页面两次时，这是因为 HREF 属性中的 URL与伪页面元素上的属性不匹配。要调试此问题，请确保在将页面插入 DOM时检查将哪些`data-url`属性添加到页面。`show.html`如果它似乎不匹配，那么您可以`data-url`在元素上设置一个属性，例如：

```
<div data-url="/show.html" data-role="page" id="show-page">
    ...
</div> 
```

然后，您将始终使用 URL 链接到该页面：`/show.html`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:52:43.903

1）您可以将 ID 更改为类。

2）您可以使用包含 show.html 的包装器，当您第二次尝试加载它时，找到您之前加载的那个并删除它。

您的 show.html：

```
<div class='previous-load'>
  ... enclosed show.html HTML ...
</div> 
```

JavaScript：

```
$('div[id="show"]').live("pagebeforeshow", function(e, data) {
     var p = getUrlParameter("p");
       show(p);
});

var show = function(p) {

    $(".previous-load").remove();

    $.ajax({
        url:'http://show.com/?p='+p,
        success: function(data) {
                    // Refresh 'show' page with new data
                    // First time: It's fine.
                    // Second time: 'show' page is duplicated in the DOM so it's messy.
                 } 
    });
} 
```

# php - Joomla：onContentAfterSave 未触发

> ID：10233748
> 
> 赞同：2
> 
> 时间：2012-04-19T17:44:26.393
> 
> 标签：php, joomla

我正在开发一个 Joomla 插件。不幸的是，没有触发必要的事件。这意味着以下代码永远不会被执行：

```
public function onContentAfterSave($context, &$article, $isNew)
{
 ....
} 
```

我像往常一样开发了插件。所有其他使用的事件都可以正常工作。这可能是内部 Joomla \ PHP 错误还是我遗漏了什么？

Apache/2.2.4 (Win32) mod_ssl/2.2.4 OpenSSL/0.9.8k PHP/5.3.3

Joomla！2.5.4 稳定 [Ember] 2012 年 4 月 2 日 14:00 GMT

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T23:09:43.747

.xml 文件中的插件名称和 .php 文件中的插件名称可能不匹配。

## [插件名称].php

```
<?php

defined('_JEXEC') or die;

jimport('joomla.event.plugin');  // I've also seen joomla.plugin.plugin.
                                 // Perhaps and older version
class plg[PluginGroup][PluginName]
{
    public function onContentAfterSave( $context, &$article, $isNew  )
    {
      // $db = JFactory::GetDBO();
      // etc...
    }
}
?> 
```

## [插件名称].xml

```
<?xml version="1.0" encoding="UTF-8"?>
<extension type="plugin" version="2.5.0" group="[PluginGroup]">
<name>[PluginName]</name>
<version>0.0.1</version>
<author></author>
<creationDate></creationDate>
<copyright></copyright>
<license></license>
<authorEmail></authorEmail>
<authorUrl></authorUrl>
<description></description>
<files>
  <filename plugin="[PluginName]">[PluginName].php</filename>
  <filename>[PluginName].xml</filename>
  <filename>index.html</filename>       
</files>
</extension> 
```

否则，请发布更多信息：

1.  您的 [pluginname].php 和 [pluginname].xml 文件中还有什么。
2.  您是否正确安装了插件？
3.  安装后发布插件了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:34:00.083

您是否*确定*安装并启用了该插件？尤其是后者，很容易忘记。

# android - 如何显示来自 EditText 用户输入的值？

> ID：10233751
> 
> 赞同：0
> 
> 时间：2012-04-19T17:44:30.653
> 
> 标签：android, sharedpreferences

我有一个 SharedPreferences 保存来自一个活动的 EditText 输入并在另一个活动中显示字符串值。

当我在 EditText 字段中输入输入并按下（我创建的按钮）“保存”（将 EditText 提交到编辑器）时，文件已成功存储。但是，显示活动（显示 SharedPreferences 中存储的字符串值）不显示这些值。我猜是因为它是onCreate，所以屏幕在运行时是“创建”的。当用户立即提交（按保存）时，如何让它更新 EditText 值？

CustomStoreEditActivity - 仅存储用户输入（EditText 条目）：

```
 final Button saveButton = (Button) findViewById(R.id.saveButton);
    saveButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            if (saveButton.isClickable()) {
                SharedPreferences prefs = getSharedPreferences(
                        "customtime", 0);
                // prefs.registerOnSharedPreferenceChangeListener(this);
                final SharedPreferences.Editor edit = prefs.edit();
                EditText shopName = (EditText) findViewById(R.id.shopName);
                EditText open1 = (EditText) findViewById(R.id.open1);
                EditText close1 = (EditText) findViewById(R.id.close1);
                EditText open2 = (EditText) findViewById(R.id.open2);
                EditText close2 = (EditText) findViewById(R.id.close2);
                EditText open3 = (EditText) findViewById(R.id.open3);
                EditText close3 = (EditText) findViewById(R.id.close3);
                EditText open4 = (EditText) findViewById(R.id.open4);
                EditText close4 = (EditText) findViewById(R.id.close4);
                EditText open5 = (EditText) findViewById(R.id.open5);
                EditText close5 = (EditText) findViewById(R.id.close5);
                EditText open6 = (EditText) findViewById(R.id.open6);
                EditText close6 = (EditText) findViewById(R.id.close6);
                EditText open7 = (EditText) findViewById(R.id.open7);
                EditText close7 = (EditText) findViewById(R.id.close7);
                EditText comments = (EditText) findViewById(R.id.comments);
                edit.putString("shopName", shopName.getText().toString());
                edit.putString("Monday1", open1.getText().toString());
                edit.putString("Monday2", close1.getText().toString());
                edit.putString("Tuesday1", open2.getText().toString());
                edit.putString("Tuesday2", close2.getText().toString());
                edit.putString("Wednesday1", open3.getText().toString());
                edit.putString("Wednesday2", close3.getText().toString());
                edit.putString("Thursday1", open4.getText().toString());
                edit.putString("Thursday2", close4.getText().toString());
                edit.putString("Friday1", open5.getText().toString());
                edit.putString("Friday2", close5.getText().toString());
                edit.putString("Saturday1", open6.getText().toString());
                edit.putString("Saturday2", close6.getText().toString());
                edit.putString("Sunday1", open7.getText().toString());
                edit.putString("Sunday2", close7.getText().toString());
                edit.putString("comments", comments.getText().toString());
                edit.commit();
                Intent myIntent = new Intent(getBaseContext(),
                        CustomStoreActivity.class);
                myIntent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
                startActivity(myIntent);

                Toast.makeText(getBaseContext(), "Opening Hours Saved!",
                        Toast.LENGTH_SHORT).show();

            }

        }
    });

} 
```

CustomStoreActivity - 我认为问题出在哪里：

```
 private void displayPreferences(){

    SharedPreferences prefs = getSharedPreferences("customtime", 0);
    String shopName = prefs.getString("shopName", "Empty");
    String shopTime1 = prefs.getString("Monday1", " ");
    String shopTime2 = prefs.getString("Monday2",  " ");
    String shopComments = prefs.getString("comments", "");

    TextView displayPrefs = (TextView) findViewById(R.id.displayPrefs);

    displayPrefs.setText(shopName + shopTime1 + shopTime2 + shopComments);

} 
```

感谢您的充裕时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:47:27.240

我认为您正在寻找的部分内容是将您的 CustomStoreActivity 代码放入`onResume`而不是`onCreate`. 无论您移入什么代码，只要将其放在前面（包括首次创建时），`onResume`就会发生。`CustomStoreActivity`

另一种选择，假设`CustomStoreActivity`用于启动`Activity`包含`EditText`s 的 ，是使用`startActivityForResult`并将数据传回结果中，`Intent`而不是使用`SharedPreferences`. [这](http://www.dev-articles.com/article/Android-Activity-startActivityForResult-387002)是一个简单的示例（但请注意，`setResult`此示例中的调用是`null`在您想要传递 的地方传递的[，](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)`Intent`如Android 文档中所述）。

似乎您也正在尝试将您的第二个`Activity`用作带有可编辑字段的对话框。如果是这种情况，另一种选择是`Dialog`在你的`CustomStoreActivity`类中实际使用类的一个变体，而不是创建另一个`Activity`像一个一样的行为。[有关对话框](http://developer.android.com/guide/topics/ui/dialogs.html)，请参阅 Android 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:50:48.250

我不确定我是否真的理解您的问题，但您是否尝试更新与您所在的活动不同的活动的 TextView？在这种情况下，我认为无法做到这一点，您应该使用 Intents 将数据传递给活动

# java - 如何修复系统属性错误Java

> ID：10233754
> 
> 赞同：0
> 
> 时间：2012-04-19T17:44:45.320
> 
> 标签：java, exception, properties, null

我正在使用属性`-D`方法在命令行上为 jar 文件提供参数。这是代码：

```
 String prop1 = "one";  

        String val1 = System.getProperty(prop1);  

        System.out.println(val1); 
```

这可行，但是当我尝试在更大的程序中实现它时，会发生奇怪的事情。没有参数，这将打印`null`，这很好。但是，如果我再做类似的事情`boolean test = val1.equals(null);`，我会遇到似乎与我提供的代码无关的问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:47:15.230

您遇到 a 是`NullPointerException`因为您尝试在空引用上评估方法。如果 val1 为 null，则不能对其调用方法。如果要测试 null，则应使用`==`.

```
if (val1==null)
   // doSomething 
```

或者

```
if(val1!=null && val.equals("aValue")) {
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:46:06.737

如果 val1 为 null，您正在做`null.equals(null)`这将导致`NullPointerException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:47:32.013

尝试

```
val1 == null 
```

相反，当与`null`.

该`null`值是一个引用值，但不引用一个真实的对象（`!(null instanceof Object)`），所以它没有方法，甚至没有`equals`方法。

# android - 从 DatePickerDialog 中删除年份

> ID：10233760
> 
> 赞同：4
> 
> 时间：2012-04-19T17:45:13.137
> 
> 标签：android, datepicker

我正在使用 Android 的基本 DatePickerDialog 教程，在此处找到[Android Date Picker](http://developer.android.com/resources/tutorials/views/hello-datepicker.html)

我已经让它工作了。但我只希望能够从今年中选择一个日期。那么有没有办法从对话框中删除年份，以便只显示月份和日期？每次我尝试将 Year int 取出时，它都会破坏代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T18:02:26.493

是的，有可能。DatePicker 内置了三个 NumberPicker 控件，依次是年、月、日，先隐藏出来。

```
final Calendar cal = Calendar.getInstance();
mDialog = new CustomerDatePickerDialog(getContext(), this,
cal.get(Calendar.YEAR), cal.get(Calendar.MONTH),
cal.get(Calendar.DAY_OF_MONTH));
mDialog.show();
DatePicker dp = findDatePicker((ViewGroup) mDialog.getWindow().getDecorView());
if (dp != null) {
    ((ViewGroup) dp.getChildAt(0)).getChildAt(0).setVisibility(View.GONE);
} 
```

**客户日期选择器对话框**

```
class CustomerDatePickerDialog extends DatePickerDialog {
     public CustomerDatePickerDialog(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
         super(context, callBack, year, monthOfYear, dayOfMonth);
     }

     @Override
     public void onDateChanged(DatePicker view, int year, int month, int day) {
         super.onDateChanged(view, year, month, day);
         mDialog.setTitle((month + 1) + "-" + day + "-");
     }
} 
```

**日期选择器**：

```
private DatePicker findDatePicker(ViewGroup group) {
        if (group != null) {
            for (int i = 0, j = group.getChildCount(); i < j; i++) {
                View child = group.getChildAt(i);
                if (child instanceof DatePicker) {
                    return (DatePicker) child;
                } else if (child instanceof ViewGroup) {
                    DatePicker result = findDatePicker((ViewGroup) child);
                    if (result != null)
                        return result;
                }
            }
        }
        return null;

    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-08T22:49:48.483

一个班轮：

```
getDatePicker().findViewById(Resources.getSystem().getIdentifier("year", "id", "android")).setVisibility(View.GONE); 
```

确保在构建对话框时选择闰年（例如 1904 年）以确保日历中包含 2 月 29 日：

```
 DatePickerDialog dialog = new DatePickerDialog(getContext(),
                listener,
                1904,
                month,
                dayOfMonth
        );
        dialog.show(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-05T22:50:13.143

我不确定隐藏第一个孩子是否是个好主意。我测试了这个解决方案：

1.  Android 2.3 -> 它可以工作（日转盘不见了）
2.  Android 4.0 -> 它不起作用，因为还有一个元素（日历）并且第一个微调器不是一天而是一个月。

更好的解决方案可能是将源代码修改`DatePicker`为您自己的包

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-24T03:05:51.563

我觉得这是一个更好的实现。另外，请考虑黄昏对 OP 的评论。这会使日期显示不正确。

**日期选择器**

```
<?xml version="1.0" encoding="utf-8"?>
<DatePicker xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/datePickerNoYear"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

**CustomDatePickerDialog.java**

```
public class DatePickerDialogNoYear extends DatePickerDialog {
    public DatePickerDialogNoYear(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
        super(context, callBack, year, monthOfYear, dayOfMonth);
        hideYear();
    }

    public DatePickerDialogNoYear(Context context, int theme, OnDateSetListener listener, int year, int monthOfYear, int dayOfMonth) {
        super(context, theme, listener, year, monthOfYear, dayOfMonth);
        hideYear();
    }

    @Override
    public void setView(View view, int viewSpacingLeft, int viewSpacingTop, int viewSpacingRight, int viewSpacingBottom) {
        view = findViewById(R.id.datePickerNoYear);
        super.setView(view, viewSpacingLeft, viewSpacingTop, viewSpacingRight, viewSpacingBottom);
    }

    private void hideYear() {
        try {
            Field f[] = this.getClass().getDeclaredFields();
            for (Field field : f) {
                if (field.getName().equals("mYearPicker")) {
                    field.setAccessible(true);
                    ((View) field.get(this)).setVisibility(View.GONE);
                }
            }
        } catch (SecurityException | IllegalArgumentException | IllegalAccessException e) {
            Log.d("ERROR", e.getMessage());
        }
    }
} 
```

然后就像使用其他任何`DatePickerDialog`. 祝你好运！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-06T15:23:39.920

在这个线程中，您有一个非常简单的解决方案（比以前的解决方案更多），我现在正在尝试并且工作正常。

[在 Android DatePicker 中隐藏年份字段？](https://stackoverflow.com/questions/10401915/hide-year-field-in-android-datepicker)

# c# - 文件信息到 WIN32_FIND_DATAW

> ID：10233761
> 
> 赞同：2
> 
> 时间：2012-04-19T17:45:15.353
> 
> 标签：c#, file, casting, kernel

我正在使用一个递归地快速扫描文件夹的文件和目录的库。输出是一个`List<WIN32_FIND_DATAW>`。[单击此处查看 stuct 的内容](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365740%28v=vs.85%29.aspx)。

我设法使用以下扩展方法将 FILETIME 转换为 DateTime：

```
public static DateTime convertToDateTime(this System.Runtime.InteropServices.ComTypes.FILETIME time)
{
    ulong high = (ulong)time.dwHighDateTime;
    int low = time.dwLowDateTime;
    uint uLow = (uint)low;
    high = high << 32;
    return DateTime.FromFileTime((long)(high | (ulong)uLow));
} 
```

我得到的文件大小为：

```
 (UInt64)((nFileSizeHigh * (2 ^ 32)) + nFileSizeLow); 
```

我在网上找到那些方法不记得在哪里。

**无论如何，该库包含一个需要 WIN32_FIND_DATA 列表的方法。我想调用那个方法，但我不知道如何创建一个 WIN32_FIND_DATA 对象**

这是我遍历 C:\ Drive 时创建的随机 WIN32_FIND_DATA 对象

![在此处输入图像描述](../Images/1f76724e055b3cb5162d43eb79bfa123.png)

我怎么能构造相同的对象？我不知道如何获得 cAlternateName 虽然我认为我不需要它。我不知道如何返回并将 DateTime 转换为 FILETIME。最后，我不知道如何将文件大小转换为 nFileSizeHigh 和 nFileSizeLow。

* * *

该库使用此方法来构造 WIN32_FIND_DATAW 对象：

```
 [DllImport("kernel32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
        public static extern IntPtr FindFirstFileW(string lpFileName, out WIN32_FIND_DATAW lpFindFileData);

        [DllImport("kernel32.dll", CharSet = CharSet.Unicode)]
        public static extern bool FindNextFile(IntPtr hFindFile, out WIN32_FIND_DATAW lpFindFileData);

        [DllImport("kernel32.dll")]
        public static extern bool FindClose(IntPtr hFindFile); 
```

也许存在一种`public static extern bool FindFile(IntPtr hFindFile, out WIN32_FIND_DATAW lpFindFileData);`方法。这样我就可以构造我需要的 WIN32_FIND_DATAW 对象。

* * *

## 编辑

**简而言之，我想通过拥有文件的完整路径来构造一个 WIN32_FIND_DATAW 对象**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:56:10.030

这是必要结构的声明。

```
public struct FILETIME
{
     public UInt32 dwLowDateTime;
     public UInt32 dwHighDateTime;
}

public unsafe struct WIN32_FIND_DATAW
{
    public UInt32 dwFileAttributes;
    public FILETIME ftCreationTime;
    public FILETIME ftLastAccessTime;
    public FILETIME ftLastWriteTime;
    public UInt32 nFileSizeHigh;
    public UInt32 nFileSizeLow;
    public UInt32 dwReserved0;
    public UInt32 dwReserved1;
    public fixed Char cFileName[256];
    public fixed Char cAlternateFileName[14];
} 
```

您可以像 C# 中的常规结构一样构造和初始化此类对象。

**更新：** 存储在结构中的 64 位整数`FILETIME`表示自 1601 年 1 月 1 日（UTC）以来 100 纳秒间隔的数量。在 .NET`DateTime.Ticks`中，表示自 0001 年 1 月 1 日午夜 12:00:00 以来经过的 100 纳秒间隔数。因此，要转换`DateTime`为`FILETIME`您只需减去 1600 年`DateTime`并将刻度数写为一对无符号 32位整数。或者你可以打电话`DateTime.ToFileTimeUtc()`：

```
FILETIME fileTime = new FILETIME();
Int64 ticks = DateTime.Now.ToFileTimeUtc();
fileTime.dwLowDateTime = (UInt32)ticks;
fileTime.dwHighDateTime = (UInt32)(ticks >> 32); 
```

# bash - 通过 udev 提供的 USB 详细信息

> ID：10233764
> 
> 赞同：4
> 
> 时间：2012-04-19T17:45:33.927
> 
> 标签：bash, shell, udev

我编写了一个 udev 规则，该规则在附加/移除 USB 驱动器时调用脚本以发送电子邮件。到目前为止它工作正常。但我想知道是否有任何方法可以在我的电子邮件中包含 USB 驱动器的详细信息？我怎样才能使用 udev 获得它？如 USB 大小、标签、安装位置、时间。以下是我的 udev 规则和发送电子邮件脚本：

```
SUBSYSTEM=="usb", ACTION=="add", RUN+="/u/usb_added add %b" 
```

usb_added 脚本是：

```
sendEmail -f root@IP -t abc@live.com -s smtp.live.com:587 -m "USB Attached" -o username=xyz@live.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:36:33.637

我通过使用找到了方法`udevadm monitor --environment`。这提供了连接或移除 USB 设备时的完整详细信息。

# .net - 64 位系统上的 LOH 碎片有多糟糕

> ID：10233767
> 
> 赞同：0
> 
> 时间：2012-04-19T17:45:47.770
> 
> 标签：.net, performance, c#-4.0, memory, large-object-heap

大对象堆碎片在 32 位系统上是一个明显的问题，因为地址空间相对较小，因此您可以用完它并非常“快速”地遇到 OutOfMemoryException

由于 64 位地址空间要大得多，地址用完不是问题（对于我们的场景）。因此，主要问题是这如何影响机器的性能。

LOH 中的可用空间是保留但未提交，还是保持提交？即使它已提交，如果它未使用，它不会被分页并且实际上不占用物理内存吗？

在我们的特定场景中，我们不太担心由于没有足够的地址空间而导致 OOM，因为这将：1\. 需要一段时间 2\. 当这种情况发生时，我们的服务将自动重新启动。

我们更关心这将对我们运行的机器的整体性能产生影响。

任何人都可以阐明这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:49:18.617

我尽量不要简单地发布直接链接，但这个页面可能不会去任何地方，它比我在这里更好地解释了 LOH 的来龙去脉。

[大对象堆被发现](https://blogs.msdn.microsoft.com/maoni/2016/05/31/large-object-heap-uncovered-from-an-old-msdn-article/)

# android - 我刚刚将我的第一个应用程序上传到 Android Market，当我尝试下载它时收到 404

> ID：10233775
> 
> 赞同：1
> 
> 时间：2012-04-19T17:46:22.297
> 
> 标签：android

这是从 Play 商店下载我的应用程序的链接：

[https://play.google.com/store/apps/details?id=com.dgolder.BCDining](https://play.google.com/store/apps/details?id=com.dgolder.BCDining)

当我尝试安装它时收到 404，但我不确定是什么原因造成的。我也会把我的清单放在这里，我可以提供任何其他信息。

任何见解将不胜感激！

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.dgolder.BCDining"
    android:versionCode="3"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="11" />
    <uses-permission android:name="android.permission.INTERNET" />
    <application
        android:icon="@drawable/logo"
        android:label="@string/app_name" >
        <activity
            android:name="me.activity.DiningExpList"
            android:theme="@android:style/Theme.NoTitleBar"
            >            
        </activity>
        <activity
            android:name="me.activity.DiningActivity"
            android:theme="@android:style/Theme.NoTitleBar"
         >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:53:27.367

您是使用浏览器还是使用市场应用程序打开链接？看到这个问题：[市场链接给出错误 404](https://stackoverflow.com/questions/4747885/market-link-giving-error-404)

# ios - 如何在 iOS5 上复制 CIDarkenBlendMode

> ID：10233776
> 
> 赞同：0
> 
> 时间：2012-04-19T17:46:34.200
> 
> 标签：ios, image, image-processing, ios5, core-image

有谁知道如何在 iOS 上复制 CIDarkenBlendMode（核心图像过滤器）？我需要通过组合两张图像来模拟一张旧纸......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:01:21.607

为什么需要复制 CIDarkenBlendMode？从 iOS 5.0 开始，它是 Core Image 中支持的过滤器，因此您可以直接使用它。

如果您不想为此使用 Core Image，我的[GPUImage](https://github.com/BradLarson/GPUImage)框架在其 GPUImageDarkenBlendFilter 中也有一个变暗混合模式。

# android - 如何停止警报运行蚂蚁控制

> ID：10233778
> 
> 赞同：0
> 
> 时间：2012-04-19T17:47:10.433
> 
> 标签：android, android-alarms

源代码在这里............

```
pendingIntent = PendingIntent.getBroadcast(AlarmAppActivity.this, 0, myIntent,PendingIntent.FLAG_ONE_SHOT );
                  //Intent myIntent = new Intent(AlarmAppActivity.this, AlarmService.class);
               //   PendingIntent pendingIntent = PendingIntent.getService(AlarmAppActivity.this, 0, myIntent, 0);

Calendar calendar = Calendar.getInstance();
calendar.setTimeZone(TimeZone.getDefault());
calendar.set(Calendar.HOUR_OF_DAY, hour);
calendar.set(Calendar.MINUTE, minute);
calendar.set(Calendar.SECOND, 0);
System.out.println("in   alendar.set(Calendar.HOUR_OF_DAY "+Calendar.HOUR_OF_DAY);
// calendar.setTimeInMillis(hour);
                            //calendar.setTimeInMillis(System.currentTimeMillis());
// calendar.add(Calendar.SECOND, 10);

AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);
System.out.println("in   alarmManager.set(AlarmMana) "+calendar.getTimeInMillis()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:50:26.860

[`cancel`](https://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29)使用此挂起的意图调用该方法：

```
AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
alarmManager.cancel(pendingIntent); 
```

# r - 根据从另一个数据框中的 id 中选择的值分配新列

> ID：10233779
> 
> 赞同：1
> 
> 时间：2012-04-19T17:47:12.997
> 
> 标签：r, merge, data.table

我有一个 100k+ obs 和 12 cols 的 df。其中一个列是某种 id，我需要使用它来制作基于另一个 df 的另一列。这个另一个df只有50个obs，一个col是id和我需要复制到第一个df的值。

我无法对此进行编码。这是一个部分 df（两者）我只显示这个问题的相关 cols

DF1（100k+ 观测值）

```
id
010100
010100
010100
010100
010100
010100
010200
010200
010200
010201
010201
010201
010201
010201
010201
010201
010300
010300
010300
010300
010300
010400
010400
010400
010500
010500
010501
010501
010501
010600
010600
010600
010600 
```

这是带有值和 id 的第二个 df

```
id         val
010100  1
010200  2
010201  2
010300  3
010400  4
010500  5
010501  6
010600  7 
```

我需要的是 val 在 df 的新列中，具体取决于两个 df 的 id，如下所示：

```
id  New
010100  1
010100  1
010100  1
010100  1
010100  1
010100  1
010200  2
010200  2
010200  2
010201  2
010201  2
010201  2
010201  2
010201  2
010201  2
010201  2
010300  3
010300  3
010300  3
010300  3
010300  3
010400  4
010400  4
010400  4
010500  5
010500  5
010501  6
010501  6
010501  6
010600  7
010600  7
010600  7
010600  7 
```

任何想法都值得赞赏。谢谢你的时间。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T18:08:44.170

`merge`是你想要的，或者你可能会注意到使用`data.table`包的一些速度优势：

```
df1 <- data.frame(id = 1:3)
df2 <- data.frame(id = rep(1:3, each = 2), val = rnorm(6))

> merge(df1, df2)
  id        val
1  1  0.9462113
2  1 -1.7835754
3  2 -1.1604525
4  2  0.2498844
5  3 -1.5187111
6  3  0.5921281

library(data.table)
dt1 <- data.table(df1, key = "id")
dt2 <- data.table(df2, key = "id")

> dt1[dt2]
     id        val
[1,]  1  0.9462113
[2,]  1 -1.7835754
[3,]  2 -1.1604525
[4,]  2  0.2498844
[5,]  3 -1.5187111
[6,]  3  0.5921281 
```

有关可用连接类型、匹配列等的详细信息，请参阅帮助页面`?merge`。 data.table FAQ 可能是了解该包细微差别的最佳场所：[http://datatable.r-forge.r-project .org/datatable-faq.pdf](http://datatable.r-forge.r-project.org/datatable-faq.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T18:08:51.467

你可以尝试这样的事情：

```
df3 <- merge(df1, df2, by="id", all = TRUE) 
```

您需要设置`all = TRUE`，否则 df3 中将仅存在 df2 行。

# oracle - Oracle CURSOR Fetch

> ID：10233783
> 
> 赞同：0
> 
> 时间：2012-04-19T17:47:26.613
> 
> 标签：oracle, plsql

我有如下代码：

```
CURSOR data_cur(username VARCHAR2)
IS
SELECT user_name as username,pass_word as password 
from User 
where user_name=username;

OPEN data_cur(username);
FETCH data_cur INTO data_rec;

IF data_cur%NOTFOUND
THEN
  vs_return := NULL;
END IF; 
```

现在，一旦将数据复制到 data_rec 中，有什么方法可以让我获得类似的值`data_rec.get(password);`

而且我的函数声明是 getUserProperty(username, property).. 现在假设我有很多来自 select 查询的列，那么我怎么能返回一些**data_rec.get(property)**而没有像**data_rec.password这样的硬编码**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:51:32.680

您可以通过使用它来访问列，如下所示。

```
data_rec.pass_word 
```

# jquery - Javascript函数变量问题

> ID：10233788
> 
> 赞同：2
> 
> 时间：2012-04-19T17:47:37.020
> 
> 标签：jquery

我的脚本有什么问题？当我执行它时，警报（第 2 行）给了我“100,200,300undefinedundefined”，所以当我希望它是 h1、h2 和 h3（带逗号）时，似乎 100,200,300 被解释为 h1。

```
function myanimation(h1,h2,h3) {

        alert(h1 + h2 + h3);
        $("#h1").animate({"left": h1});
        $("#h2").animate({"left": h2});
    }

    var moves = new Array()
    moves[1] = [100,200,300];
    moves[2] = [300,200,100];
    moves[3] = [-500,-300,0];

    var i = 1;

    function animatenow(){
        myanimation(moves[i]);
        i++;
    }

$('#launch').click(function() {
        setInterval(animatenow, 5000);
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:50:23.603

您正在将一个数组传递给`myanimation`，它对应于您的`h1`参数。你没有通过`h2`or `h3`，所以那些是未定义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:51:17.487

亚当，您将数组对象传递给 H1，而不是单独的变量

你可能想改变

```
myanimation(moves[i]); 
```

到：

```
myanimation(moves[i][0],moves[i][1],moves[i][2]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T17:51:19.500

您将一个数组传递到`myanimation`它需要三个参数的位置。

`myanimation(moves[i]);`在哪里`moves[1] = [100,200,300]`

所以`h1`在你`myanimation`会`[100,200,300]`

将其更改为期望一个数组：

```
function myanimation(moves) {
    $("#h1").animate({"left": moves[1]}); // moves[1] is 100
    $("#h2").animate({"left": moves[2]}); // 200
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T17:58:20.163

根据您的代码，以下代码应该是这样的吗？

```
function animatenow(){
    myanimation(moves[i][0], moves[i][1], moves[i][2]);
    i++;
} 
```

# javascript - Href 和确认按钮

> ID：10233791
> 
> 赞同：-2
> 
> 时间：2012-04-19T17:47:50.487
> 
> 标签：javascript, jquery

有一个href如下：

```
<a class="eLink" href="http:www.abc.com">chk here xyz</a></li> 
```

“eLink”的javascript如下：

```
 $("a.eLink").click(function link(evt) {
        url = evt.target.href;

        if (url.toString().toLowerCase().indexOf(".gov") <= 0) {

            var tk = "Do you really want to continue?";

            if (confirm(tk)) {
                window.open(url, 'newwin');
            }else{
               window.open(url,'_self'); 
            }
        }
        else
        { window.open(url, 'newwin'); }

        return false;
    });
}); 
```

现在我的问题是，当我单击 href 并单击确认按钮中的“取消”时，我的页面转到“abc.com”，但它不应该发生。我的浏览器应该保持不变。我应该在 else 部分使用什么脚本，所以我保持在同一页面。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:54:02.617

把其他的拿出来。

```
if (confirm(tk)) {
    window.open(url, 'newwin');
  } 
```

旁注，IE8 及更低版本没有实现该`indexOf`功能，因此您可能希望通过编写自己的实现来修补它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:54:25.253

`return false;`（jQuery 样式）应该已经阻止了默认操作

问题是如果单击取消`window.open(url,'_self');`执行，只需删除确认条件的else部分

检查这个[小提琴](http://jsfiddle.net/bRQzy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:50:35.370

你有：

```
var tk = "Do you really want to continue?";

            if (confirm(tk)) {
                window.open(url, 'newwin');
            }else{
               window.open(url,'_self'); 
            } 
```

这意味着如果他们点击取消，`False`将返回，仍然会打开链接。您需要`window.open`在您的`else`声明中删除

```
if (confirm(tk)) {
                    window.open(url, 'newwin');
                } 
```

# javascript - 画布动画变慢

> ID：10233796
> 
> 赞同：4
> 
> 时间：2012-04-19T17:47:54.417
> 
> 标签：javascript, html5-canvas

下面的代码为选取框设置动画。动画开始很快，但随着时间的推移明显减慢。请帮我弄清楚原因。相同的代码在这里：http: [//jsbin.com/aleqef/](http://jsbin.com/aleqef/)

编辑：我在动画循环期间没有创建任何新对象，一切似乎都被缓存了，即模式、上下文等。我只是没有看到任何可疑的东西。看起来像内存问题，但我不知道为什么。

```
`var data = [
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAMAAADXEh96AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAGUExURQAAAP///6XZn90AAAAcSURBVHjaYmBgYGBkZAQSYAjlgUXgYhAeQIABAAGkABPpfLrFAAAAAElFTkSuQmCC",
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAMAAADXEh96AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAGUExURQAAAP///6XZn90AAAAeSURBVHjaYmBkAEEgYGRkBBEgFgMDRBTGA8sBBBgAAaQAE03fiAgAAAAASUVORK5CYII=",
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAMAAADXEh96AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAGUExURQAAAP///6XZn90AAAAdSURBVHjaYmBgZGRkYGAAY0YGCITxoHIQUYAAAwABpAATvSsONQAAAABJRU5ErkJggg=="
];

var context = document.getElementById("canvas").getContext("2d");
var count = data.length;
var patterns = [];
var pattern = 0;

function onload(e) {
  patterns.push(context.createPattern(e.target, "repeat"));
}

function draw() {
  for (var angle = 0; angle < 360; angle += 5) {
    var rad = (angle * Math.PI) / 180;
    var x = 200 * Math.cos(rad);
    var y = 200 * Math.sin(rad);

    context.moveTo(0, 0);
    context.lineTo(x, y);
  }
}

function animate() {
  window.setTimeout(animate, 1000 / 60);

  if (patterns.length > 0) {
    context.clearRect(0, 0, context.canvas.width, context.canvas.height);
    draw();
    context.lineWidth = 1;
    context.strokeStyle = patterns[pattern];
    context.stroke();
    pattern = (pattern + 1) % patterns.length;
  }
}

for (var i = 0; i < count; i++) {
  var image = new Image();
  image.onload = onload;
  image.src = data[i];
}

animate();` 
```

* * *

 `## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T18:17:18.650

试试这个改变（beginPath()）

```
if (patterns.length > 0) {
    context.clearRect(0, 0, context.canvas.width, context.canvas.height);
    context.beginPath();
    draw(); 
```

链接[http://jsbin.com/aleqef/4/edit#preview](http://jsbin.com/aleqef/4/edit#preview)`

# java - 在 java 中解析 excel 时出现 Apache Poi 问题？

> ID：10233800
> 
> 赞同：0
> 
> 时间：2012-04-19T17:48:08.770
> 
> 标签：java, excel, apache-poi

我`Apache POI`用来解析`excel`文件并通过`row.getCell(5).getNumericCellValue()`假设`cell(5)`该行始终是数字来获取值。

是否可以智能地解析文件，以便即使列的顺序发生变化或混乱，我们也可以根据`columnName`合同年份查找值，以便始终来自标记的列`Contract Year`- 无论该列是第 6 列还是第 7 列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:58:25.583

您可以实现一个称为`getContractYearColumnIndex()`返回所需索引的函数。

```
private int getContractYearColumnIndex(){
    final int maxColIndex = 25;
    int colIndex = 0;
    HSSFRow titleRow = yourSheet.getRow(0);
    String value = titleRow.getCell(colIndex).getStringCellValue();

    while(value != "Contract Year" && colIndex < maxColIndex){
        colIndex = colIndex + 1;
        value = titleRow.getCell(colIndex).getStringCellValue();
    }
    return colIndex;
} 
```

当然，此实现假设您要查找的标题位于第一行（索引 0）。

# whitespace - 在 Outlook 2007 和 Outlook 2010 中防止 html 电子邮件中的连字符自动换行

> ID：10233802
> 
> 赞同：6
> 
> 时间：2012-04-19T17:48:14.103
> 
> 标签：whitespace, html-email, outlook-2007, outlook-2010, typography

这是我的第一篇文章。所以：

我正在使用我已经使用了一段时间的相同模板编写 HTML 电子通讯。该模板直到最近都运行良好（我一直在使用的代码如下）。突然之间，Outlook 07/10 的行为方式与我认为它们过去的行为方式不同。当涉及到连字符时，它们*似乎*不尊重空白属性。所有其他电子邮件客户端的行为都符合我的预期（他们尊重空白属性）。

时事通讯中的一个元素是 ISBN，它是一组由连字符分隔的数字，例如“978-1-555-97610-1”。ISBN 位于一个 span 标签中，该标签是 ap 标签内的一行文本的一部分，该标签与许多其他 p 元素（可能还有一个 img）一起位于表中。我需要防止 ISBN 打破连字符并换行。

我不能使用不间断的连字符，过去我已经研究了很多这个问题（我的工作中有很多 ISBN），所以我希望我不会发布已经回答十亿的东西次。

任何帮助都深表感谢！

谢谢，安德鲁。

代码：

```
<p style="font-family: Arial, Helvetica, sans-serif; font-size: 13px; color: #000000; margin-bottom: 0px; text-align: right;">
    Metropolitan Books &middot; 384 pages &middot; $18.00 &middot; paperback &middot;             
        <span style="white-space: nowrap;">978-0-8050-9466-4</span>
</p> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-07T22:02:41.820

不间断的连字符怎么样`&#8209;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T01:09:53.093

使用`<nobr>`标签。

例如`<nobr>978-0-8050-9466-4</nobr>`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-28T22:04:11.063

我需要有一个元素不会在通过 Outlook 2013 查看的电子邮件中中断，但不能在空格上中断。尽管我讨厌黑客，但我解决这个问题的方法是使用不间断的连字符，但将它们的颜色设置为他们父母的背景颜色：

```
<div style="background-color: #fff; color: #000;">
    New<span style="color: #fff;">&#8209;</span>Listing
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-11T10:21:57.593

除了 Outlook 2016 和空白（空格）之外，我一直在研究类似的问题，我发现对我有用的解决方案是使用`&nbsp;`html 字符。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-04T12:04:26.407

如果可能，您可能想尝试为此添加宽度。然后它没有破裂。

# symfony - 集合字段类型不创建表单元素

> ID：10233807
> 
> 赞同：4
> 
> 时间：2012-04-19T17:48:25.490
> 
> 标签：symfony, prototype, twig, symfony-forms, arraycollection

我正在尝试创建一个表单，每次单击“添加新框”链接时都会添加一个新文本框。我通读了以下示例。 [http://symfony.com/doc/current/reference/forms/types/collection.html](http://symfony.com/doc/current/reference/forms/types/collection.html)

基本上我是按照书中的例子进行的。但是当页面被渲染并且我点击链接时没有任何反应。有什么想法吗？谢谢。

这是我的控制器。

```
 public function createAction() {
    $formBuilder = $this->createFormBuilder();

    $formBuilder->add('emails', 'collection', array(
        // each item in the array will be an "email" field
        'type'   => 'email',
        'prototype' => true,
        'allow_add' => true,
        // these options are passed to each "email" type
        'options'  => array(
            'required'  => false,
            'attr'      => array('class' => 'email-box')
        ),
    ));
    $form = $formBuilder->getForm();

    return $this->render('AcmeRecordBundle:Form:create.html.twig', array(
        'form' => $form->createView(),
    ));
} 
```

这是视图。

```
 <form action="..." method="POST" {{ form_enctype(form) }}>
{# store the prototype on the data-prototype attribute #}
<ul id="email-fields-list" data-prototype="{{ form_widget(form.emails.get('prototype')) | e }}">
{% for emailField in form.emails %}
    <li>
        {{ form_errors(emailField) }}
        {{ form_widget(emailField) }}
    </li>
{% endfor %}
</ul>

<a href="#" id="add-another-email">Add another email</a>
</form>

<script type="text/javascript">
// keep track of how many email fields have been rendered
var emailCount = '{{ form.emails | length }}';

jQuery(document).ready(function() {
    jQuery('#add-another-email').click(function() {
        var emailList = jQuery('#email-fields-list');

        // grab the prototype template
        var newWidget = emailList.attr('data-prototype');
        // replace the "$$name$$" used in the id and name of the prototype
        // with a number that's unique to our emails
        // end name attribute looks like name="contact[emails][2]"
        newWidget = newWidget.replace(/\$\$name\$\$/g, emailCount);
        emailCount++;

        // create a new list element and add it to our list
        var newLi = jQuery('<li></li>').html(newWidget);
        newLi.appendTo(jQuery('#email-fields-list'));

        return false;
    });
})
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:06:22.340

这个问题可以参考下面的链接来解决。

```
https://github.com/beberlei/AcmePizzaBundle 
```

在这里，您会发现正在实现相同的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:05:20.207

我也经历过这个。

对此问题的答案和示例以及[我发现的另一个问题](https://stackoverflow.com/questions/8164873/how-to-customize-a-collectiontype-item)也没有回答我的问题。

这是我如何做到的，以某种通用的方式。

一般来说，我的意思是，`collection`我添加到表单中的任何内容只需要遵循**表单模板**循环（例如在宏中），仅此而已！

## 使用哪个约定

*   HTML 来自 Twitter Bootstrap 2.0.x
*   Javascript 代码已经在 $(document).ready();
*   [遵循 Symfony 2.0.x 教程](http://symfony.com/doc/current/reference/forms/types/collection.html#reference-form-types-by-reference)
*   使用[MopaBootstrapBundle](https://github.com/phiamo/MopaBootstrapBundle)

## 表单类型类

```
class OrderForm extends AbstractType
{
// ...

public function buildForm(FormBuilder $builder, array $options)
{
// ...
  $builder
  ->add('sharingusers', 'collection', array(
          'type' => new UserForm(),
          'allow_add' => true,
          'allow_delete' => true,
          'by_reference' => false,
          'required'=> false
  ));
// ...
}
} 
```

## JavaScript

```
/* In the functions section out of document ready */

/**
 * Add a new row in a form Collection
 *
 * Difference from source is that I use Bootstrap convention
 * to get the part we are interrested in, the input tag itself and not
 * create a new .collection-field block inside the original.
 * 
 * Source: http://symfony.com/doc/current/cookbook/form/form_collections.html
 */
function addTagForm(collectionHolder, newBtn) {
    var prototype = collectionHolder.attr('data-prototype');
    var p = prototype.replace(/\$\$name\$\$/g, collectionHolder.children().length);
    var newFormFromPrototype = $(p);
    var buildup = newFormFromPrototype.find(".controls input");
    var collectionField = $('<div class="collection-field"></div>').append(buildup);
    newBtn.before(collectionField);
}

/* ********** */
$(document).ready(function(){

   /* other initializations */

    /**
     * Form collection behavior
     *
     * Inspired, but refactored to be re-usable from Source defined below
     *
     * Source: http://symfony.com/doc/current/cookbook/form/form_collections.html
     */
    var formCollectionObj = $('form .behavior-collection');
    if(formCollectionObj.length >= 1){
        console.log('run.js: document ready "form .behavior-collection" applied on '+formCollectionObj.length+' elements');
        var addTagLink = $('<a href="#" class="btn"><i class="icon-plus-sign"></i> Add</a>');
        var newBtn = $('<div class="collection-add"></div>').append(addTagLink);
        formCollectionObj.append(newBtn);
        addTagLink.on('click', function(e) {
            e.preventDefault();
            addTagForm(formCollectionObj, newBtn);
        });
    }

   /* other initializations */

}); 
```

## 表单模板

这里的诀窍是我本来会使用原始的`{{ form_widget(form }}`，但我需要在视图表单中添加一些特定的内容，而且我不能让它更短。

我试图[只编辑目标字段](http://symfony.com/doc/current/cookbook/form/form_customization.html#how-to-customize-an-individual-field)，[发现它有点复杂](https://github.com/symfony/symfony/issues/2663)

这是我的做法：

```
 {# All form elements prior to the targeted field #}
            <div class="control-collection control-group">
                <label class="control-label">{{ form_label(form.sharingusers) }}</label>
                <div class="controls behavior-collection" data-prototype="{{ form_widget(form.sharingusers.get('prototype'))|escape }}">
                {% for user in form.sharingusers %}
                    {{ form_row(user) }}
                {% endfor %}
                </div>
            </div>
            {{ form_rest(form) }} 
```

# jquery - Jquery - 悬停动画 div

> ID：10233809
> 
> 赞同：0
> 
> 时间：2012-04-19T17:48:30.423
> 
> 标签：jquery, hover, jquery-animate

悬停 id 时，我正在对 div 应用一个简单的动画。div 不是 id 的孩子。因此，当我的光标离开 id 时，div 会自行隐藏。这是正确的，但我要求 div 保持可见，除非我的鼠标离开它。

您可能需要测试才能看到我的问题。链接如下。

这是我的 jQuery：

```
 $(function(){
                $('.has-children').hover(function(){
                    var the_handle = $(this).attr('id');
                    var the_sub_nav = '#' + the_handle + '-sub-nav';
                    $(the_sub_nav).stop().animate({height:'200px'},1000);
                },function(){
                    var the_handle = $(this).attr('id');
                    var the_sub_nav = '#' + the_handle + '-sub-nav';
                    $(the_sub_nav).stop().animate({height:'0px'},1000);
                });

           }); 
```

这是该问题的链接：

[http://tinyurl.com/c9yunhu](http://tinyurl.com/c9yunhu)

（我应该提到我受限于那个 HTML 代码。我使用的是电子商务平台，这是我可以创建子类别的唯一方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:52:30.373

如果我理解正确；只需删除第二个功能`hover()`即可使 div 在鼠标移出时保持可见。完整代码：

```
$(function(){
    $('.has-children').hover(function(){
        var the_handle = $(this).attr('id');
        var the_sub_nav = '#' + the_handle + '-sub-nav';
        $(the_sub_nav).stop().animate({height:'200px'},1000);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:10:12.367

这里有一个简单的 JSFiddle 给你[http://jsfiddle.net/toroncino/uPDXX/1/](http://jsfiddle.net/toroncino/uPDXX/1/)

编辑：这里有一个简短的版本：http: [//jsfiddle.net/toroncino/uPDXX/3/](http://jsfiddle.net/toroncino/uPDXX/3/)

编辑2：

现在看一下，是基于你当前的 html ......显然我永远不会使用这样的 js。=) 但也许它会帮助你......

[http://jsfiddle.net/toroncino/uPDXX/5/](http://jsfiddle.net/toroncino/uPDXX/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:51:15.960

将子菜单容器添加到悬停功能，这样它在悬停在菜单项或整个子菜单上时将保持打开状态。

```
$('.has-children, #submenu-ID').hover(function(){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T17:57:11.210

```
 $('.has-children').on('hover', function(){
        var the_sub_nav = '#' + this.id + '-sub-nav';
        $(the_sub_nav).stop().animate({height:'200px'},1000);
    }); 
```

# actionscript-3 - AS3：循环播放电影剪辑名称

> ID：10233810
> 
> 赞同：0
> 
> 时间：2012-04-19T17:48:31.890
> 
> 标签：actionscript-3, flash, loops

我试图创建一个循环，该循环将通过允许您附加图像的影片剪辑名称。

到目前为止，这是我的代码：

```
private var mc:MovieClip;
private var instance:String;

public function showFriends(e:Event)
{
    var str:String = e.target.data;
    var num:uint;
    var i:Number;
    var rex:RegExp = /[\s\r\n]*/gim;
    var friends_array:Array = [];

    num = friends_array.length;
    friends_array = str.split(',');

       for(i=0; i<num; i++){
           var fri_id = friends_array[i].replace(rex,'');

           mc = "P"+i; // THIS IS THE PROBLEM LINE

           instance = 'DP';// Sets the Instance Name
           load_DP(fri_id);
       }
} 
```

我正在尝试弄清楚如何将循环中的数字（var i）添加到 MovieClip 的名称中。

目前，此代码不起作用，会发出错误：

> 将 String 类型的值隐式强制转换为不相关的类型 flash.display:MovieClip。

我已经解决了这意味着它使用字符串名称作为 MC，因此无法正常工作。

如果我也改变它：

```
mc = P1; // with no quotes 
```

这可行，但显然只使用一个 MC。

如果你能帮忙，请告诉我。

谢谢你。

伊莱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:59:32.330

如果您尝试访问的所有 MovieClip 实例都是当前组件的子级，则可以使用以下表示法。

```
mc = this["P" + i]; 
```

如果它们都是其他组件的子组件，您还可以将它们作为...

```
mc = myComponent["P" + i]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:57:55.653

查看 DisplayObjectContainer 的 getChildByName 方法。如果 showFriends 在您的 Document 类中，那么它应该作为 \

```
mc = this.getChildByName("P" + i); 
```

这应该可以工作 -* 但是 *- 这是相对较慢且不是好的做法。最好将这些 MovieClip 动态添加到舞台（在代码中，而不是拖动到舞台），这样您就已经有了对它们的引用。

# c++ - 如何以编程方式查询 Windows 控制面板？

> ID：10233812
> 
> 赞同：1
> 
> 时间：2012-04-19T17:48:45.633
> 
> 标签：c++, windows, search, mfc, controlpanel

我需要在 C++ MFC 中搜索整个 Windows 控制面板中的字符串（就像从开始菜单或控制面板资源管理器中搜索 Windows），任何人都可以帮助我吗？

我已经尝试在控制面板虚拟文件夹中进行搜索，但不起作用...

编辑：现在可以使用了！但前提是编译到正确的平台（x86 或 x64）（x86 不适用于 x64 SO）

```
void CSearchView::BuildControlPanelCache()
{
    CComPtr<IShellFolder> pDesktop;
    SHGetDesktopFolder(&pDesktop);
    PIDLIST_ABSOLUTE path;
    SHGetKnownFolderIDList(FOLDERID_ControlPanelFolder,0,NULL,&path);
    CComPtr<IShellFolder> pFolder;
    pDesktop->BindToObject(path,NULL,IID_IShellFolder,(void**)&pFolder);

    ILFree(path);

    CComPtr<IEnumIDList> pEnum;
    if (pFolder->EnumObjects(NULL,SHCONTF_NONFOLDERS|SHCONTF_FOLDERS,&pEnum)!=S_OK) pEnum=NULL;
    if (!pEnum) return;

    PITEMID_CHILD pidl;
    while (pEnum->Next(1,&pidl,NULL)==S_OK)
    {
      STRRET strDispName;

        if( pFolder->GetDisplayNameOf(pidl, SHGDN_NORMAL, &strDispName) == S_OK )
        { 
              CComPtr<IQueryInfo> pLink;
              if (SUCCEEDED(pFolder->GetUIObjectOf(NULL,1,(PCITEMID_CHILD*) &pidl,IID_IQueryInfo,NULL,(void**)&pLink)))
              {
                    TCHAR *pwszTip; 
                    pLink->GetInfoTip( 0, &pwszTip ); 
                    if ( pwszTip ) 
                          { 
                                SHFree( pwszTip ); 
                          } 
                    //pLink->Release();           
              }
        }

        ILFree(pidl);
    }
} 
```

它似乎可以解决问题！泰伙计们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:13:54.717

尝试搜索`%SYSTEM%\*.cpl`。在某些系统上，`%CSIDL_CONTROLS%\*.cpl`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:50:06.973

您可以枚举所有控制面板项目并搜索您要查找的项目试试[这个](http://support.microsoft.com/kb/232536)和[这个](http://forums.codeguru.com/showthread.php?p=378869)

# css - OnUnload 的 CSS 正文标签？

> ID：10233823
> 
> 赞同：-2
> 
> 时间：2012-04-19T17:49:34.170
> 
> 标签：css

我有一个页面需要标签的“OnUnload”属性。我知道如何使它适用于普通标签：

```
<body onunload="offline()"> 
```

但是，在这种特殊情况下，我使用的是 CSS 样式的标签，其设置如下：

```
<style type="text/css">
body 
{
background-image:url('<?php echo $profile[24]; ?>');center;
<?php
if($profile[25]{0}=="F") echo "background-repeat:no-repeat;"; //You can ignore this
if($profile[25]{1}=="T") echo "background-size:100% 100%;";   //entire PHP script, it
if($profile[25]{2}=="T") echo "background-attachment:fixed;"; //isn't important.
?>
}
</style> 
```

我需要的是“OnUnload”属性与该格式一起工作。

我已经多次尝试谷歌，用了很多不同的方式，我什至在另一个论坛上发现了一个类似的问题（它没有得到回答）。但据我所知，这个属性实际上并不存在于 CSS 格式中。然而，我假设这是错误的，这就是我在这里的原因。

请让我知道我能做些什么，即使我不得不放弃 CSS 格式。我认为它可能仍然能够以标准的 http 格式工作，但我知道这里的代码可以按原样工作，所以如果我不需要的话，我宁愿不要弄乱它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:46:36.747

也许你可以试试

```
<script type="text/javascript">
    function offline(){
        //whatever
    }
    window.onbeforeunload = offline;
</script> 
```

# opencv - 如何使用opencv flannbasedmatcher和dmatch访问与最佳关键点匹配对应的最佳图像

> ID：10233826
> 
> 赞同：1
> 
> 时间：2012-04-19T17:49:47.640
> 
> 标签：opencv, computer-vision

关于这个先前提出的问题，我有一个后续问题：

[如何在opencv中使用基于flann的匹配器，或者一般是flann？](https://stackoverflow.com/questions/5695034/how-to-use-flann-based-matcher-or-generally-flann-in-opencv)

特别是关于这部分答案：

```
/* for kk=1 to matches.size()

       the best match for queryKeypoints[matches[kk].queryIdx].pt 
       is dbKeypoints[matches[kk].imgIdx][matches[kk].trainIdx].pt
 */ 
```

我的问题如下：是否可以使用 opencv 的 flannbasedmatcher match() 函数和 dmatch 结构访问从中找到最佳匹配关键点（最短距离）的图像，如果是这样，人们如何去做呢？

具体来说，在将查询图像与一组图像进行比较时，如何做到这一点？在这种情况下，是所有关键点混合在一起构建的 flann kd 树（那么树中的关键点不附加对应的图像标签）？或者有没有办法访问给定关键点所属的图像？

关于 flannbasedmatcher match() 和 train() 函数如何工作的任何其他指针也很好，因为我已经搜索了源代码，但仍然有些迷惑——谢谢。

非常感谢任何指导 - 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T22:51:57.793

Dmatch 属性 imgIdx 报告匹配关键点所属的“火车”图像的索引。使用 DescriptorMatcher.:add 将描述符向量附加到“训练”图像描述符的向量中。由您决定图像 id X 对应于特定的图像文件。

# php - 在 PHP 中将 unix 时间戳转换为人类可读的日期？

> ID：10233829
> 
> 赞同：9
> 
> 时间：2012-04-19T17:49:53.850
> 
> 标签：php, unix-timestamp

我有一个来自 PHP 的时间戳值：`1188604800000`

当我将时间格式化为人类可读时：

```
date("m/d/Y", 1188604800000) 
```

它打印：

```
05/21/39635 
```

如果我将数字放入在线 Unix 时间戳转换器，我会得到：

```
Sat, 01 Sep 2007 00:00:00 GMT 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T17:51:48.203

PHP使用基于秒的时间戳，所以除以`1188604800`你`1000`就很好。

```
php> echo date('Y-m-d', 1188604800000/1000);
2007-09-01 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T08:17:12.220

我在放假一天时遇到问题，我不得不手动设置默认时区以匹配我的位置，方法是使用

```
<?php date_default_timezone_set("Australia/Perth"); ?> 
```

可以在此处找到支持时区列表 - [http://www.php.net/manual/en/timezones.php](http://www.php.net/manual/en/timezones.php)

（我没有足够的代表发表评论，所以有人可以将其与实际答案合并吗？）

# python - 无法将用户添加到数据库

> ID：10233832
> 
> 赞同：0
> 
> 时间：2012-04-19T17:50:01.120
> 
> 标签：python, django

当我填写表格并提交时，不会将任何内容添加到数据库中，而是使用空密码字段重新加载页面，即使表格包含的密码不等于验证密码 ValidationError 也不会出现......谢谢你

表格.py

```
class SignUpForm(ModelForm):
    username      = forms.CharField(label=(u'Username'))
    first_name    = forms.CharField(label=(u'First name'))
    last_name     = forms.CharField(label=(u'Last name'))
    address       = forms.CharField(label=(u'Address'))
    email         = forms.EmailField(label=(u'Email Address'))
    password      = forms.CharField(label=(u'Password'),widget=forms.PasswordInput(render_value=False))
    password1     = forms.CharField(label=(u'Verify Password'),widget=forms.PasswordInput(render_value=False))
    mobile        = forms.IntegerField(label=(u'Mobile'))

    class Meta:
        model = Employer
        ## check whats Exclude !!!!
        exclude = ('user',)

def clean_username(self):
        username = self.cleaned_data['username']
        try:
            User.objects.get(username=username)
        except User.DoesNotExist:
            return username

            raise forms.ValidationError("That username  already exists. Please select another")

def clean(self):
        if self.cleaned_data['password'] != self.cleaned_data['password1']:
            raise forms.ValidationError("not matched")
        return self.cleaned_data 
```

视图.py

```
def EmployerRegistration(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
        form = SignUpForm(request.POST)
        if form.is_valid():
            employer =Employer.objects.create(username=form.cleaned_data["username"],password= form.cleaned_data['password'],first_name=form.cleaned_data['first_name'],last_name=form.cleaned_data['last_name'],email=form.cleaned_data['email'],address=form.cleaned_data['address'],mobile=form.cleaned_data['mobile'])
            employer.save()
            return HttpResponseRedirect('/login/')  

        else:
                return render_to_response('Sign_up_Employer.html',{'form':form}, context_instance=RequestContext(request))

    else:
    #user is not submitting show them the registeration form
            form= SignUpForm()
            context = {'form':form}
            return render_to_response('Sign_up_Employer.html',context,context_instance=RequestContext(request)) 
```

Sign_Up_Employer.html

```
{%block content%}
<form action ="" method ="post">
{% csrf_token %}
{% if form.errors %}<p>Please Correct </p> {% endif %}
<div class ="register_div">
{%if form.username.errors%}<p class= "error">{{form.username.errors}}</p>{% endif %}
 <p> <label for ="username"{% if form.username.errors %} class= "error"{% endif %}> Username</label></p>
<p>{{form.username}}</p>
 </div>
 <div class ="register_div">
{%if form.first_name.errors%}<p class= "error">{{form.first_name.errors}}</p>{% endif %}
 <p> <label for ="first_name"{% if form.first_name.errors %} class= "error"{%endif%}>First name</label></p>
<p>{{form.first_name}}</p>
 </div>
 <div class ="register_div">
{%if form.last_name.errors%}<p class= "error">{{form.last_name.errors}}</p>{% endif %}
 <p> <label for ="last_name"{% if form.last_name.errors %} class= "error"{%endif%}>Last name</label></p>
<p>{{form.last_name}}</p>
 </div>
<div class ="register_div">
{%if form.address.errors%}<p class= "error">{{form.address.errors}}</p>{% endif %}
 <p> <label for ="address"{% if form.address.errors %} class= "error"{%endif%}>Address'</label></p>
<p>{{form.address}}</p>
 </div>
 <div class ="register_div">
{%if form.email.errors%}<p class= "error">{{form.email.errors}}</p>{% endif %}
 <p> <label for ="email"{% if form.email.errors %} class= "error"{%endif%}>Email Address</label></p>
<p>{{form.email}}</p>
 </div>
 <div class ="register_div">
{%if form.password.errors%}<p class= "error">{{form.password.errors}}</p>{% endif %}
 <p> <label for ="password"{% if form.password.errors %} class= "error"{%endif%}>Password</label></p>
<p>{{form.password}}</p>
 </div>

 <div class ="register_div">
{%if form.password1.errors%}<p class= "error">{{form.password1.errors}}</p>{% endif %}
 <p> <label for ="password1"{% if form.password1.errors %} class= "error"{%endif%}>Verify Password</label></p>
<p>{{form.password1}}</p>
 </div>

 <div class ="register_div">
{%if form.mobile.errors%}<p class= "error">{{form.mobile.errors}}</p>{% endif %}
 <p> <label for ="mobile"{% if form.mobile.errors %} class= "error"{%endif%}>Mobile</label></p>
<p>{{form.mobile}}</p>
 </div>
 <p><input type =submit alt =register></p>
</form>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:24:29.780

我不知道这是否只是一个剪切和粘贴问题（尽管因为它在您的另一个（已删除）问题中是相同的，我倾向于不这么认为），但是您的两种`clean`方法的缩进是错误的。它们目前根本不是 ModelForm 类的一部分，因此不会被调用。将它们缩进一级，因此它们与`class Meta`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:55:33.163

我猜在 HTML 模板中你没有将`method`表单的属性设置为`POST` 例如

```
<form method="post"> 
```

# php - MySQL if / else 语句依赖于 MySQL 结果

> ID：10233835
> 
> 赞同：-2
> 
> 时间：2012-04-19T17:50:15.960
> 
> 标签：php, mysql, sql

我需要一些帮助我有点卡住了：

我想要这样，如果表中的一行等于 YES，那么它会显示某个图像，但是如果表中的该行等于 NO，那么它会显示另一个图像。

你有什么想法？

```
if($fetch["g1"] == 1) $buffer .= 'Group 1, '; 
if($fetch["g2"] == 1) $buffer .= 'Group 2, '; 
if($fetch["g3"] == 1) $buffer .= 'Group 3, '; 

echo substr($buffer,0,-2).' '; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:53:54.113

您的问题非常模糊，但这显示了如何获取一行并有条件地选择`<img>`标签的来源：

```
# fetch the row
$row = mysql_fetch_array(mysql_query("SELECT * FROM table WHERE foo=$bar"));

# determine image to show
$img = $row['field'] == 'YES' ? 'img-one.gif' : 'img-two.gif';

# output
echo "<img src=\"$img\" />"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:03:13.067

所以，我假设你有一个类似于以下的表：

```
CREATE TABLE `mytable` (
    `id` int NOT NULL AUTO_INCREMENT,
    `some_data` varchar(128),
    `is_enabled` int(1) NOT NULL default 0,
    PRIMARY KEY(`id`)
); 
```

假设 is_enabled 是我们要查看的行。您可以执行类似于以下的操作。

```
$sql  = 'SELECT `is_enabled`';
$sql .= ' FROM `mytable`';
$sql .= ' WHERE `id` = 1234';

$result = mysql_query($sql);

if ($result && mysql_num_rows($result) > 0) {
    while ($row = mysql_fetch_assoc($result)) {
        if ($row['is_enabled']) {
            // This row is enabled.
        } else {
            // This row is disabled.
        }

        //Alternatively, do something like this:
        ?>
        <img src="<?php echo $row['is_enabled'] ? '/row_is_yes.gif' : '/row_is_no.gif'; ?>" />
        <?php
    }
} 
```

但是，如果没有更多信息，这是我能提供的最大帮助。

# java - 在Oracle的Timestamp列上形成where子句，数据为java.util.Date格式

> ID：10233840
> 
> 赞同：0
> 
> 时间：2012-04-19T17:50:28.703
> 
> 标签：java, oracle, date, timestamp

我在一个名为 DOWNLOAD_TAB 的数据库表中有一个时间戳列名称 DOWNLOAD_DATE。

当我打开 Oracle SQL Developer 时，最大日期是“24.02.12 13:48:39,286000000”

```
select TO_CHAR (MAX(DOWNLOAD_DATE)) from DOWNLOAD_TAB 
```

但是上面的查询将日期返回为“24.02.12 13:48:39,286”

现在我想形成一个查询，它将在某个日期之后给我所有的记录，但是我在 java.util.Date 中有那个日期。

由于某些框架限制，我无法使用 java 的preparedstatement。我需要使用 Statement 类。

有人可以建议我使用 java.sql.Statement 在 java 中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:06:43.957

如果您绝对不能使用准备好的语句，这应该可以。根据需要格式化日期，然后使用相同格式在 sql 语句中使用 TO_DATE。Oracle 有默认格式，但我更喜欢明确说明格式。

```
Date now = new Date();
String dateString = new SimpleDateFormat("yyyy-MM-dd").format(now);
String sqlVal = "TO_DATE('" + dateString + "', 'yyyyy-mm-dd')";
String sql = "SELECT * FROM DOWNLOAD_TAB WHERE download_date > " + sqlValue; 
```

这就是为什么总是首选准备好的语句。如您所见，这段代码丑陋、容易出错、不可跨数据库移植，并且容易受到 sql 注入攻击。当然，准备好的语句表现更好。

# eclipse - CFBuilder 没有在断点处停止

> ID：10233847
> 
> 赞同：4
> 
> 时间：2012-04-19T17:50:58.487
> 
> 标签：eclipse, debugging, coldfusion, remote-debugging, coldfusionbuilder

既然这个问题...

[Eclipse 不会在断点处停止](https://stackoverflow.com/questions/4388192/eclipse-doesnt-stop-at-breakpoints)

...处理 eclipse 本身并且 CFBuilder 是基于 eclipse 的，我认为它可能会有所帮助。那里的评论之一提到停止服务器并重新部署应用程序:(

**我的问题是：** 如果 CFBuilder（我正在使用 v 1.0）没有在断点处停止，或者如果它在设置断点时在断点上出现一个问号图标，我该如何在不重新启动服务器的情况下解决这个问题。重新启动大约 95% 的时间可以解决问题，但需要几分钟（慢/旧机器）。

有没有办法在不重新启动的情况下重新部署，或者另一种快速修复方法，这样我的工作流程就不会被打断？仅仅为了调试我的代码就不得不重新启动服务器，这真是令人抓狂。

作为参考，这是远程调试，因为它来自服务器的 HTTP 请求。

**一些附加信息** 项目菜单对我来说以下是灰色的：

*   全部构建
*   构建项目
*   干净的...
*   并选择工作集...（在构建工作集下）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:11:16.610

我遇到了这个问题。我的 ColdFusion 项目存储在 D:\work\myproject 中；我在 C:\ColdFusion10\cfusion\wwwroot\myproject 中创建了一个链接（使用 MKLINK）。创建 ColdFusion 项目时，请确保项目目录为 C:\ColdFusion10\cfusion\wwwroot\myproject 而不是 D:\work\myproject。项目的路径是 /myproject。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T06:50:10.267

在代码更改之后和调试之前尝试刷新您的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:10:05.233

尝试重新启动调试服务器。登录到您的 ColdFusion 管理员并转到调试和日志记录 > 调试器设置，您将在其中找到重新启动按钮。如果这是一个一致的问题，那么您可能还有其他事情发生。

# java - 捕获可抛出的错误

> ID：10233848
> 
> 赞同：1
> 
> 时间：2012-04-19T17:51:06.633
> 
> 标签：java, exception

需要您对以下代码的反馈 -

```
public static void main(String[] args) {
try {
        throw new OutOfMemoryError();
    } catch (Exception e) {
        System.out.println("Inside catch");
    } catch (Throwable t){
        System.out.println("Inside catch throwable");
    }finally {
        System.out.println("Inside finally");
    }
} 
```

在这里，我从 try 子句中抛出一个 OutOfMemoryError 对象（使用 new 运算符）并捕获 Throwable 对象。所以我得到了输出“Inside catch throwable”和“Inside finally”。但是既然我们抛出 OutofMemError 不应该代码退出（即不去 Throwable & finally）？在实际的实际项目中，如果我们得到 OutOfMemoryError，应用程序就会退出......为什么会有这种差异？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T17:52:16.363

![在此处输入图像描述](../Images/83b4e5bea89133c6fa704d13764ca0d9.png)

`OutOfMemoryError`是类的子`Error`类，是类的子`Throwable`类。这就是它打印出来的原因：

> 内接可投掷

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T17:55:13.847

不，代码不会退出，因为您正在吞噬异常。您描述的“传统 Java 程序”在出现此类错误时崩溃，因为未处理异常。您可以通过在程序的主线程上安装默认异常处理程序来自行测试。

```
Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler() {

   @Override
   public void uncaughtException(Thread t, Throwable e) {
      e.printStackTrace(System.err);
   }
});

throw new OutOfMemoryError(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T17:55:59.233

通常，也可以捕获错误（除非它们使 VM 崩溃或其他原因），并且 Java 6 及更高版本允许捕获 OutOfMemoryError。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T17:53:57.440

可以捕获 Throwable 的异常或错误或 Throwable 的子类（不一定是异常或错误）并不重要。

没有什么可以导致线程退出异常`System.exit(0);`尝试改为。

# c++ - 如何使用 WinApi 函数在 Windows 资源管理器中获取选定的文件

> ID：10233856
> 
> 赞同：0
> 
> 时间：2012-04-19T17:51:20.593
> 
> 标签：c++, windows, winapi, hook, windows-shell

我需要在任何 Windows 资源管理器窗口中找到所有选定的文件。（我使用的是 Windows 7）

谢谢。

对不起，我的英语不好。

# android - 从零售商网站获取价格

> ID：10233858
> 
> 赞同：3
> 
> 时间：2012-04-19T17:51:27.223
> 
> 标签：android, ios, web, barcode

我正在构建一个 iOS 和 Android 应用程序，它扫描条形码并从零售商网站显示该书的产品页面。但是现在，我只想从该产品页面而不是整个页面获取价格。

如何从页面中提取产品的价格，就像 RedLaser 使用它自己的应用程序一样。

产品页面： http: [//goo.gl/rDxAg](http://goo.gl/rDxAg) 价格：321 卢比

我想要这样的东西[，](http://www.mysmartprice.com/books/msp_book_single.php?q=9781408703748&title=Steve%20Jobs%3a%20The%20Exclusive%20Biography&isbn=9781408703748&img=00tubujd/mboenbslpouifofu/dpn0:8925198148590n2190n2630@efqu%3Ecpplt%27tipu%3E1)它可以在 iOS 和 Android 上实现，而无需使用外部服务器。

我是新手，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T22:42:38.057

如果网站上的官方 API 不可用，那么您必须解析下载的 html 以获取您想要的数据。有许多适用于 iOS 和 Android 的第三方 html 解析器库。

对于 iOS，请查看[在 iPhone 上解析 HTML](https://stackoverflow.com/questions/405749/parsing-html-on-the-iphone)。

对于 Android，请查看[Parse HTML in Android](https://stackoverflow.com/questions/2188049/parse-html-in-android)。

两个链接中都有一些代码示例向您展示了如何做到这一点。

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T06:12:21.213

在此简单介绍之后提供了一个**jsFiddle Demo 。**

您正在使用的当前产品页面包含太多数据，只是为了获取价格。

最好使用 Flipkart.com 移动图书网站，因为这样加载速度更快。

**参考资料1：** [**http ://www.flipkart.com/m/books**](http://www.flipkart.com/m/books)

由于您的应用程序必须已经在使用该书的 pid 号，您可以查询移动网页搜索！`pid`您问题中的链接适用于一本书`9780224060875`

**参考2：** [**http ://www.flipkart.com/m/search-all?query=9780224060875**](http://www.flipkart.com/m/search-all?query=9780224060875)

在该页面上，您可以看到 Book Price 在**`Span Tag`**with **`Class Name`**of内`sp`。

```
<!-- Fragment of product price format -->
<div id="productpage-price">
 <p>
     Price:  <del> Rs. 350</del>
  <span class="sp">Rs. 263</span>
 </p>
</div> 
```

然后，使用 jQuery，您可以获得所需的价格数据，如下所示：

```
// Begin section to show random methods to use HTML values

    // Get the HTML of  "Rs. 263" and store it in variable as a string.
    var priceTextAndLabel = $('#productpage-price').find('span.sp').text();

    // Get the HTML of  "Rs. 263" and slice off the first 4 characters of "Rs. " leaving "263" only.
    // Adjust the .slice() if possiable that number is after decimal point. Example: "Rs.1000"
    var priceText = $('#productpage-price').find('span.sp').text().slice(4);

    // As above but convert text string of "263" to a number (to allow JavaScript Math if req.).
    // The value 10 seen below reflects decimal base 10 (vs, octal(8) example) for .parseInt();
    var priceNumber = parseInt($('#productpage-price').find('span.sp').text().slice(4),10);

    // Firefox with Firebug Console will show BLACK characters for "Rs. 263" since it's a "string".
    console.log( priceTextAndLabel );

    // Firefox with Firebug Console will show BLACK characters for "263" since it's a "string".
    console.log( priceText );

    // Firefox with Firebug Console will show BLUE characters for "263" since it's a "number".
    console.log( priceNumber );

// End section to show random method to use HTML values 
```

好的，现在是关键部分......您一直在等待的部分......这就是如何在您的目标（甚至网页）中使用 Flipkart.com 搜索 URL。

可悲的答案是你不能。他们不仅禁止它，还阻止它。这意味着您不能 iframe 网页，甚至不能使用 AJAX 加载搜索 URL。

为了说明上述失败，这里有一个 jsFiddle Demo，当使用浏览器控制台查看时，将显示 AJAX 连接完成后没有获得任何内容。

**参考3：** [**jsFiddle Flipkart.com Demo**](http://fiddle.jshell.net/NcyDM/1)

* * *

**推荐的解决方案：**这里只有一个真正的选择。使用具有可用 API 的书店。该 API 以及可能的**API 密钥用于特权访问**，将允许您成为合法的商店代表。

也许他们最终会提供一个 API。现在，他们有一个用于 MP3 收藏的[**移动应用商店**](http://www.flipkart.com/help/androidflyteapp)。看到 MP3 如何反映有声读物，他们也为图书提供移动应用商店可能只是时间问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:56:56.690

我在电子商务中工作，有时对于某些 CSV，我需要从供应商站点获取数据，您可以编写一个例程，在这种情况下，某些站点使用一个元素，您可以在此处找到价格：

```
xpath: //div[3]/div[2]/div/div/div/span 
```

像 Selenium 和 Perl 的这个例子：

```
open (INFO, '>>file.csv') or die "$!";  
my $sel = Test::WWW::Selenium->new( host => "localhost", 
                                    port => 4444, 
                                    browser => "*chrome", 
                                    browser_url => "http://www.example.com/page.htm" );
$sel->open_ok("/page.htm");
$sel->click_ok("//table[2]/tbody/tr/td/a/img");
$sel->wait_for_page_to_load_ok("30000");
my $price = $sel->get_text("//div[3]/div[2]/div/div/div/span");
print INFO ("$price\n");
$sel->go_back_ok();

# Close file
close (INFO); 
```

您可以使用类似的功能来抓取数据，或使用其他解决方案进行网页抓取

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T17:57:08.277

一个你得到产品页面的 url，你可以使用[Nokogiri来提取价格](http://nokogiri.org/)

您首先需要获取页面内容，然后使用某种方法获取价格。您可以通过 CSS 或 xpath 执行此操作

来自 Nokogiri 的基本示例：

```
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open('http://www.YOUR_URL_HERE.com'))
price = doc.at_xpath("//span[@id='fk-mprod-our-id']").text 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T17:58:21.163

如果零售商提供，您可以使用 API。搜索它！
如果没有可用的 API，您可以从零售商服务器请求页面并将 HTML 解析为 XML 以获取包含价格的元素。但是，如果零售商更改其网站，这可能会被打破。另外，询问他是否允许您使用他的价格。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-08T07:47:22.190

```
<span class="price final-price our fksk-our" id="fk-mprod-our-id">
   Rs.
   <span class="small-font"> </span>
   315
</span> 
```

我注意到这`HTML`是为您的`Price tag`.

我会建议你使用`jSoup`. [从这里下载](http://jsoup.org/packages/jsoup-1.6.3.jar)

现在使用这个库，解析更容易，你所要做的就是。

```
 Document doc = null;

    try{
        doc = Jsoup.connect("You page URL comes here").get(); // get url contents
    }catch(IOException e){
         // Handle exception here.
    }

 String priceHtml = doc.select("#fk-mprod-our-id").get(0).html().trim(); // get specific tag
 System.out.println("html fetched: "+priceHtml); //print to check if right tag is selected
 priceHtml = priceHtml.replace("((<span(.)*?>)(.)*(</span>))", ""); // replace inner span using regex.
 System.out.println("My Price tag: "+priceHtml); 
```

我没有测试上面的代码，但它必须工作。它可能包含小错误。但只要稍加努力，你就可以让它发挥作用。

`Parsing`数据有时需要时间。您必须在后台执行此操作。在后台解析完成后，将数据发布到您的 UI 线程。

**编辑：**

用 .包围您的`connect`通话`try catch`。

并确保您在您的`androidManifest.xml`

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

# objective-c - [layer removeAllAnimations] 调用时如何让动画视图停留在当前位置

> ID：10233863
> 
> 赞同：7
> 
> 时间：2012-04-19T17:51:40.980
> 
> 标签：objective-c, ios, core-animation

如果有两个动画依次发生，我想删除第一个动画，并从当前位置开始第二个动画。在将第二个动画添加到图层之前，我使用 [layer removeAllAnimations] 取消了第一个动画，图层总是回到初始位置。我知道这是 removeAllAnimations 的默认操作，但我想知道是否有任何方法可以将图层设置为保持当前位置。非常感谢。

更新——我通过获取presentationLayer位置并将其分配给模型层位置来完成这项工作。而且我还使用了 - (void)animationDidStop:(UIAnimation*)animation finished:(BOOL)flag; 检查动画是否完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:58:29.033

你可以使用：myView.frame = [[myView.layer presentationLayer] frame]

# actionscript-3 - 为什么 AS3 版本的 Singleton 中没有私有构造函数？

> ID：10233868
> 
> 赞同：4
> 
> 时间：2012-04-19T17:51:51.370
> 
> 标签：actionscript-3, apache-flex, actionscript, flex3

我很困惑：在 AS3 中，为什么我们保留 Singleton 类构造函数`public`而不是`private`像 Java 中那样？如果我们保留构造函数`public`，那么我们可以直接从外部访问它！

请检查[本例](http://cookbooks.adobe.com/post_Simple_MVC_for_Flex_and_AIR-16199.html)中的模型部分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T17:55:35.997

**Actionscript 3 不支持私有构造函数。**

为了强制执行单例模式，如果已经创建了单例实例，许多开发人员会导致构造函数引发异常。这将导致运行时错误，而不是编译时错误，但它确实防止了单例的不当使用。

* * *

例子：

```
public static var instance:MySingleton;

public MySingleton(){
    if (instance != null) {
        throw new Error("MySingleton is a singleton. Use MySingleton.instance");
    }else {
        instance = this;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T00:07:53.547

在这篇[博](http://kuwamoto.org/2006/04/05/as3-on-the-lack-of-private-and-protected-constructors/)文中，Sho Kuwamoto（前身为 Macromedia / Adob​​e 并积极参与 Flex 平台和工具的开发）解释了从 ActionScript 3.0 中省略私有和受保护构造函数的决定，可能与此无关。

Macromedia / Adob​​e 参与了 ECMAScript 4 标准的开发，以及让 ActionScript 3.0 尽可能地遵循规范的决定，这意味着他们面临着选择，要么将这些特性从语言中完全删除，要么等待直到它们被标准化（并因此延迟了语言的发布）。

我认为这很有趣，因为它揭示了开放与专有标准辩论中的一些关键问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T18:28:55.517

flex 框架附带了一个类“Singleton”，它允许您将
类注册到接口。
使用此方法，您可以隐藏您想要的任何功能，只需不将其包含在界面中即可

```
// USAGE: is as simple as importing the class and then calling the
// method you want.
import com.samples.Sample

// and then simple just doing
trace( Sample.someFunction( ) ) // will return true 
```

// 样本.as

```
package com.samples{
  import flash.utils.getDefinitionByName;
  import mx.core.Singleton;

  public class Sample{
    //private static var implClassDependency:SampleImpl;
    private static var _impl:ISample;

    // static methods will call this to return the one instance registered 
    private static function get impl():ISample{
      if (!_impl)   {
        trace( 'registering Singleton Sample' )
        Singleton.registerClass("com.samples::ISample",com.samples.SampleImpl);
        _impl = ISample( Singleton.getInstance("com.samples::ISample"));
      }
      return _impl;
    }

    public static function someFunction( ):Boolean {
      return impl.someFunction(   )
    }
  }
} 
```

// ISample.as

```
package com.samples{
  public interface ISample {
    function someFunction( ):Boolean;
  }
} 
```

// SampleImpl.as

```
package com.samples{

  // ExcludeClass will hide functions from the IDE
  [ExcludeClass]
  // we can extends a class here if we need 
  public class SampleImpl implements ISample{
    // the docs say we need to include this but I donno about that
    // include "../core/Version.as";

    public function SampleImpl (){
      // call super if we are extending a class
      // super();
    }

    // instance will be called automatically because we are
    // registered as a singleton
    private static var instance:ISample;
    public static function getInstance():ISample{
      if (!instance)
        instance = new SampleImpl()
        return instance;
      }
    }

    // public functions where we do all our code
    public function someFunction( ):Boolean {
      return true;
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-04T07:25:47.683

下面是在 AS 中使用内部类的单例实现：

```
package{
    public class Singleton{
        private static var _instance:Singleton=null;
        public function Singleton(e:SingletonEnforcer){
            trace("new instance of singleton created");
        }
        public static function getInstance():Singleton{
            if(_instance==null){
                _instance=new Singleton(new SingletonEnforcer());
            }
            return _instance;
        }
    }
} 
//I’m outside the package so I can only be accessed internally
class SingletonEnforcer{
//nothing else required here
} 
```

在此处查看详细信息：[http ://www.swinburne.edu.au/design/tutorials/P-flash/T-How-to-build-a-Singleton-in-Actionscript-3/ID-143/](http://www.swinburne.edu.au/design/tutorials/P-flash/T-How-to-build-a-Singleton-in-Actionscript-3/ID-143/)

# node.js - 用于构建/测试与部署的 Node.js 项目布局

> ID：10233869
> 
> 赞同：5
> 
> 时间：2012-04-19T17:51:58.477
> 
> 标签：node.js, deployment, jslint, npm, cloud-foundry

我正在开发我的第一个 Cloud Foundry 项目（......和第一个 Node.js 项目，第一个 MongoDB 项目，第一个“express”项目，等等......）

在第一天，我发现了这个问题，并将答案作为我的 github 存储库组织的起点：

[Node.js 项目的文件夹结构](https://stackoverflow.com/questions/5178334/folder-structure-for-a-nodejs-project)

有一个`/node_modules`目录未签入。而是`npm install`根据文件中的规范自动创建的`package.json`。好的，很好......我制作了那个文件。

*（注意：在 a 期间`vmc push`，推送服务器似乎没有检查 package.json 文件。它似乎只是复制了 node_modules 目录，如果它不存在则什么都不做......所以有必要在您的客户端上执行`npm install`然后推送。）*

我已经在我的应用程序中工作了一些基础知识，现在我想开始进行测试和构建基础设施。例如：我想要一个在我所有的 JavaScript 上运行 linting 的构建过程。[有一个名为ready.js](https://github.com/dsimard/ready.js)的持续集成库，它看起来像是一个最新的构建工具......

但是在我的项目目录中并做`npm install ready.js`. 这意味着更多的东西将进入`/node_modules`目录并上传到云中，而不是在云上运行。出于同样的原因：如果我有一个正在缩小资源（或其他）的构建过程，那么我不希望与`vmc push`任何一个一起部署源。

我知道这一切都是新的......但是有没有约定将目标转储到构建目录并从那里推送？还是每个人都从有效的 github 根目录推送，并且只推送所有构建和测试？欢迎任何提示...使用方法，避免方法...

**更新**：我找到了一个使用 express 和 Node.js（以及其他几个常见模块）的应用程序样板，它在服务器代码的 javascript 中执行其“构建过程”......无论好坏：

[https://github.com/mape/node-express-boilerplate](https://github.com/mape/node-express-boilerplate)

我也发现了这一点，似乎将术语“样板”与您希望看到的模块名称结合到结构中是一种很好的搜索策略，可以找到我正在寻找的东西：

[https://github.com/swbiggart/node-express-requirejs-backbone](https://github.com/swbiggart/node-express-requirejs-backbone)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T18:22:47.537

npm 允许你指定`devDependencies`，你可能想看看[这篇文章](http://howtonode.org/managing-module-dependencies)。

您可以将所有开发/测试环境依赖项添加`devDependencies`到`dependencies`. 然后，您可以添加一个脚本以推送到云端。

我不熟悉 Cloud Foundry 或`vmc push`工作流程。但是，您可以将自定义脚本添加到*package.json*`scripts`中的对象，该脚本安装开发环境模块、运行测试、清理 npm 缓存、然后安装仅生产模块并将您的代码和仅这些模块推送到云。

 ***编辑**

如果不推送到 npm 存储库，我不确定您是否可以使用这些，但它们作为示例很有用（我猜......）或者，您可以在 shell 脚本或节点脚本中自动化我上面描述的工作流程。

**/编辑**

您可以连接到任何可用的脚本...（`man npm-scripts`有关更多信息，请参阅）：

```
 preinstall
          Run BEFORE the package is installed

   install, postinstall
          Run AFTER the package is installed.

   preuninstall, uninstall
          Run BEFORE the package is uninstalled.

   postuninstall
          Run AFTER the package is uninstalled.

   preupdate
          Run BEFORE the package is updated with the update command.

   update, postupdate
          Run AFTER the package is updated with the update command.

   prepublish
          Run BEFORE the package is published.

   publish, postpublish
          Run AFTER the package is published.

   pretest, test, posttest
          Run by the npm test command.

   prestop, stop, poststop
          Run by the npm stop command.

   prestart, start, poststart
          Run by the npm start command.

   prerestart, restart, postrestart
          Run by the npm restart command. Note: npm restart will  run  the
          stop and start scripts if no restart script is provided.

   Additionally,  arbitrary  scrips  can  be  run  by doing npm run-script
   <stage> <pkg>. 
```

请注意，`publish`这里用于将模块发布到`npm`. 您应该将您的包设置为私有 ( `"private": true`)，这样您就不会意外地将您的代码发布到 npm 存储库中。*

# spring - MyBatis Spring3 Mapper null 与 SoapClient

> ID：10233870
> 
> 赞同：1
> 
> 时间：2012-04-19T17:51:59.723
> 
> 标签：spring, mybatis

我有一个 ServiceXX.java，其中 XXXMapper.java 注入了@Autowire。ServiceXXX.java 是一个 Web 服务 @WebService(endpointInterface ="com.xxx...")。当使用我的 java 客户端调用 web 服务时，一切似乎都正确连接，但如果通过 SoapClient 调用 web 服务，则 XXXMapper 为空。为什么？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:59:58.790

这可能是由于声明为 a 的类`@WebService`正在由您的容器（而不是 spring）的 web 服务堆栈实例化，因此上下文不知道它以进行自动装配。为了解决这个问题，你可以让你的服务类扩展`SpringBeanAutowiringSupport`。然后，spring 将在容器初始化后自动装配它。

顺便说一句，那个 bean 在`spring-web`模块中。

# css - CSS3 变换：rotateY 在 Safari 和 Chrome 中的行为不同

> ID：10233879
> 
> 赞同：1
> 
> 时间：2012-04-19T17:52:32.933
> 
> 标签：css, css-transforms

我想在一个`<ul>`列表上使用 CSS3 转换，`<li>`其中包含一个`<img>`用`<a>`.

请参考http://jsfiddle.net/h2T8j/1/

我想实现将`<ul>`Y 旋转一定程度并将 Y 全部旋转`<li>`相同程度但方向相反，以使它们沿着倾斜的路径看起来是直立的。

但结果在 Chrome（9.0.1084.30 beta）和 Safari（v5.1.5）中看起来不同。

我尝试从`-webkit-perspective-origin: 0% 0%`中删除`<ul>`，但结果将浮出`<li>`元素。如果我试图将单击事件附加到`<li>`元素，它将无法在 Safari 上运行。

[在 Chrome 中查看结果](http://postimage.org/image/dc6dwjjqv/)

[与 Safari 中的结果相比](http://postimage.org/image/7guts3xyv/)

有没有办法让它们在两个浏览器中以相同的方式工作？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:15:17.583

问题是`<ul>`极其广泛。其实`10000px`。因此，如果`<ul>`只是`400px`远离屏幕，它看起来不会很好。所以我建议`-webkit-perspective`应该扩大。我试过把它改成这样：

```
ul#looks {
    list-style: none;
    width: 10000px;
    position: relative;
    height: 100%;
    -webkit-perspective-origin: 0% 0%;
    -webkit-perspective: 10000px;
    -webkit-transform-origin: 0% 0%;
    -webkit-transform: perspective(400px) rotateY(10deg);
  } 
```

我希望这有帮助。

# css - Internet Explorer 中的红色边框和框阴影问题

> ID：10233887
> 
> 赞同：0
> 
> 时间：2012-04-19T17:52:51.947
> 
> 标签：css, blogger

我正在为 Blogger 上的博客开发自定义主题，在 Chrome 和 Firefox 中看起来都很好，但是在 IE9 中查看时，每个帖子周围都有一个奇怪的红色边框，我摆脱的框阴影仍然存在。如果在 IE8 或 IE7 模式下查看网站，则边框为白色。在加载某些内容之前，该博客看起来还不错，然后就搞砸了。我无法弄清楚问题是什么。

对于 Blogger 规范，我使用图片窗口主题作为这个新主题的基础，我只是在模板设计器中使用自定义 CSS 框。我正在使用的自定义 css 发布在下面：

```
.post-outer {
border-radius:none;
border:none;
background:#3c3c39;
color:#eeeeee;
box-shadow:0pt 0pt 5px #272725 inset;
border-radius:10px;
}

.date-posts {
border:none;
}

.main-outer {
background:none;
border:none;
box-shadow:none;
}

.column-right-outer {
padding-top:20px;
}

.column-right-outer .widget a {
color:#666666;
}

div.post-footer {
border-top:1px dashed #555555;
margin-top:15px;
padding-top:10px;
}

#navbar {
display:none;
}

div.footer-outer {
display:none;
background:none;
box-shadow:none;
}

.footer-inner {
padding:0 20px 0 20px;
}

div.feed-links {
display:none;
}

div#Attribution1 {
display:none;
}

body {
min-height:5px;
padding-top:15px;
}

.blog-pager a {
color:#555553;
} 
```

博客的网址在这里： http: [//grandambiance.blogspot.com/](http://grandambiance.blogspot.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T09:11:41.720

您似乎正在使用其中包含此元标记的模板：

```
<meta content='IE=EmulateIE7' http-equiv='X-UA-Compatible'/> 
```

当存在此元标记时，IE8 或 IE9 将模拟 IE7，并且 IE7 不支持您使用的某些样式。所以这至少应该可以帮助你理解为什么会有一些异常行为。

您可以尝试删除元标记以查看会发生什么。也许它会按照您期望的方式工作，但它也可能变得更加复杂，因为模板使用 IE7 特定功能，因此迫使后来的浏览器模拟 IE7。[当我试图让一些 CSS3 样式工作时，我尝试在我的博客](http://formlesspoet.blogspot.com/)中删除相同的元标记，但这只会让事情变得更糟。但你可能会走运。

除此之外，您可以检查是否有任何 IE7 特定属性可以让您使用所需的一些 CSS3。

如果有什么安慰的话，虽然 IE9 中的页面看起来与其他浏览器中的略有不同，但它看起来仍然很漂亮，并且好像样式是故意的。

# objective-c - 在Objective C中将小数转换为分数（有理数）？

> ID：10233890
> 
> 赞同：1
> 
> 时间：2012-04-19T17:53:01.743
> 
> 标签：objective-c, math, rational-numbers

作为计算器应用程序的一部分，我正在尝试使用 sigma 表示法来实现使用。但是，它打印出来的结果始终是小数，其余的并不重要。我只是想将小数更改为分数。

我已经有了reduce函数，我遇到的问题是从这样的小数：'0.96875'到它的小数值'31/32'

谢谢！

PS：我已经调查了几乎所有事情，而对于我的生活，我无法弄清楚这一点。在这一点上，我所需要的只是如何从中取出小数，然后我可以减少它。

这是我的减少方法：

```
 -(void)reduce {

    int u = numerator;
    int v = denominator;
    int temp;

    while (v != 0) {
        temp = u % v;
        u = v;
        v = temp;
    }

    numerator /= u;
    denominator /= u;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T19:02:32.603

我自己发现了这一点。我所做的是将分子和分母乘以 1000000（回想一下小数点看起来像 .96875/1），所以它看起来像`96875/100000`.

然后，我使用这种 reduce 方法将其降低到最低限度：

```
 -(void)reduce {

    int u = numerator;
    int v = denominator;
    int temp;

    while (v != 0) {
        temp = u % v;
        u = v;
        v = temp;
    }

    numerator /= u;
    denominator /= u;

} 
```

最后，我使用 print 方法将其转换为分数形式：

```
//In the .h
@property int numerator, denominator, mixed;
-(void)print;

//In the .m       
@synthesize numerator, denominator, mixed;

-(void)print {
    if (numerator > denominator) {
        //Turn fraction into mixed number
        mixed = numerator/denominator;
        numerator -= (mixed * denominator);
        NSLog(@"= %i %i/%i", mixed, numerator, denominator);
    } else if (denominator != 1) {
        //Print fraction normally
        NSLog(@"= %i/%i", numerator, denominator);
    } else {
        //Print as integer if it has a denominator of 1
        NSLog(@"= %i", numerator);
    }
} 
```

并得到了我想要的输出：

```
31/32 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:06:23.283

不久前我发现了一种相当好的方法，虽然我不记得从哪里来的。无论如何，它像这样递归地工作（这是伪代码，而不是 C）：

```
function getRational(float n)
  let i = floor(n); (the integer component of n)
  let j = n - i;
  if j < 0.0001 (use abritrary precision threshold here), return i/1
  let m/n = getRational(1 / j)
  return ((i * m) + n) / m 
```

例如，以 3.142857 为起点。

```
i = 3
j = 0.142857
m/n = getRational(7)
  i = 7
  j = 0
  return 7/1
m/n = 7/1
return ((3*7)+1) / 7 = 22/7 
```

或者更复杂的例子，1.55：

```
i = 1
j = 0.55
m/n = getRational(1.81818181)
  i = 1
  j = 0.81818181
  m/n = getRational(1.22222222)
    i = 1
    j = 0.22222222
    m/n = getRational(4.5)
      i = 4
      j = 0.5
      m/n = getRational(2)
        i = 2
        j = 0
        return 2/1
      m/n = 2/1
      return ((4*2)+1)/2 = 9/2
    m/n = 9/2
    return ((1*9)+2)/9 = 11/9
  m/n = 11/9
  return ((1*11)+9)/11) = 20/11
m/n = 20/11
return ((1*20)+11)/20 = 31/20 
```

我用 PI 试过一次。它会持续一段时间，但如果你将阈值设置为 0.01，它只会在返回 355/113 之前下降几次递归。

有一点问题，如果它返回时下降得太深，你最终可能会得到太大的整数；除了将精度阈值设置为相当宽松的值（例如 0.01）之外，我还没有真正研究过允许这种情况的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-27T12:58:59.220

试试这个 ：

```
-(NSString *)convertToFraction:(CGFloat)floatValue{
    double tolerance = 1.0E-6;
    CGFloat h1 = 1;
    CGFloat h2 = 0;
    CGFloat k1 = 0;
    CGFloat k2 = 1;
    CGFloat b = floatValue;
    do{
        CGFloat a = floor(b);
        CGFloat aux = h1;
        h1 = a*h1+h2;
        h2 = aux;
        aux = k1;
        k1 = a*k1+k2;
        k2 = aux;
        b = 1/(b-a);
    }while (ABS(floatValue-h1/k1) > floatValue*tolerance) ;

    return k1 > 1 ?  [NSString stringWithFormat:@"%.0f/%.0f",h1,k1] : [NSString stringWithFormat:@"%.0f",h1];
} 
```

# asp.net-mvc - 动作之间的参数传递

> ID：10233891
> 
> 赞同：4
> 
> 时间：2012-04-19T17:53:02.633
> 
> 标签：asp.net-mvc

我试过这个：

```
public ActionResult Index() // << it starts here
{
    return RedirectToAction("ind", new { name = "aaaaaaa" });
}

[ActionName("ind")]
public ActionResult Index(string name)// here, name is 'aaaaaaa'
{
    return View();
} 
```

它有效..

所以，我试过这个：

```
[HttpPost]
public ActionResult Search(string cnpj) // starts here
{
    List<Client> Client = db.Client // it always find one client
        .Where(c => cnpj.Equals(c.Cnpj))
        .ToList();

    return RedirectToAction("Index", Client); // client is not null
}

public ActionResult Index(List<Client> Client) //but when goes here, client is always null
{
    if (Client != null)
        return View(Client);

    return View(db.Client.ToList());
} 
```

为什么会发生？第二个代码块有问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:54:49.343

您只能在重定向中传递原始类型，您可以将`TempData`用于复杂类型。

```
[HttpPost]
public ActionResult Search(string cnpj) // starts here
{
    List<Client> Client = db.Client // it always find one client
        .Where(c => cnpj.Equals(c.Cnpj))
        .ToList();

    TempData["client"] = Client;  //<=================
    return RedirectToAction("Index");
}

public ActionResult Index()
{
    var Client = TempData["client"];  //<=================

    if (Client != null)
        return View(Client);

    return View(db.Client.ToList());
} 
```

基本上`TempData`就像保存数据一样，`Session`但是数据将在读取请求结束时自动删除。

`TempData`在[**MSDN上**](http://msdn.microsoft.com/en-us/library/system.web.mvc.tempdatadictionary.aspx)

**笔记：**

*   `C#`定义的私有变量中 的通用命名约定为驼峰式。`client`而不是`Client`.
*   对于`List<Client>`变量，我将`clients`用作名称而不是`client`.
*   您应该为字符串使用资源，`"client"`这样它就不会不同步，这意味着一种方法将数据放入其中，`"Client"`而另一种方法则在寻找数据`"client"`或`"Client Data"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:01:45.733

好的，所以您的问题是您将客户端作为参数传递，但是您的操作方法期望的是一个包含属性“客户端”的对象。或者，如果有一个专门要求客户端参数的路由定义，它会像您编写的那样工作。

# ios - 社交游戏应用

> ID：10233892
> 
> 赞同：2
> 
> 时间：2012-04-19T17:53:16.313
> 
> 标签：ios, facebook

我正在创建一个多人游戏 ios 应用程序，并正在考虑使用 facebook 的图表以与“与朋友”相同的方式连接玩家。我的问题是，使用 facebook 图表将存储在我的数据库中的用户相互连接的最佳和最有效的方法是什么？

我最初的想法是：假设 A 获取应用并在 facebook 上注册，然后 A 的朋友 B 使用 facebook 在应用上注册。当B人注册时，我是否应该检查所有现有玩家，看看他们中哪些是他/她的FB朋友，然后将他们连接到我的数据库中？所以在这种情况下，通过当前用户的搜索会找到人 A，并在人 A 和人 B 之间建立联系。这样，当 A 想向朋友挑战游戏时，他可以随时获得数据挑战（在这种情况下，只有 B 人）。

我敢肯定这不是最好的方法，所以任何想法都值得赞赏。如果这对问题有任何影响，我将使用 Django 作为我的后端。

# css - 中心 div 垂直，适用于 webkit，但在 Firefox 中存在错误

> ID：10233895
> 
> 赞同：0
> 
> 时间：2012-04-19T17:53:27.337
> 
> 标签：css, webkit, gecko

我在 Firefox 中居中 div 时遇到问题，它似乎在所有 webkit 浏览器中都可以正常工作，所以我真的不知道我在做什么错：

**我的 CSS：**

```
html {
width: 100%;
height: 100%;
}

body {
position: absolute;
top: 0px;
bottom: 0px;
left: 0px;
right: 0px;
height: 100%;
width: 100%;
}

#Page {
position: absolute;
left: 0px;
right: 0px;
top: 0px;
bottom: 0px;
}

#LoginBackground {
position: absolute;
margin-top: -45%;
margin-left: -35%;
left: 50%;
top: 50%;
width: 70%;
height: 90%;
} 
```

**我的 HTML：**

```
<body>
<div id="Page">
<div id="LoginBackground">
</div>
</div>
</body> 
```

这是 Gecko 引擎中的错误还是我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:58:44.253

水平对齐对我来说很好，垂直似乎是问题，试试这个，也许。

```
#loginBackground
{
top:0;
margin-top: 5%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:01:07.033

编辑新小提琴[http://jsfiddle.net/FsjNu/2/](http://jsfiddle.net/FsjNu/2/)

```
html {
width: 100%;
height: 100%;
}

body {
position: absolute;
top: 0px;
bottom: 0px;
left: 0px;
right: 0px;
height: 100%;
width: 100%;
}

#Page {
position: relative;
width: 100%;
    height:100%;
}

#LoginBackground {
border: 1px solid red;
height: 90%;
left: 50%;
margin-left: -35%;
position: absolute;
top: 5%;
width: 70%; 
```

}

```
<body>
<div id="Page">
<div id="LoginBackground">
</div>
</div>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:04:04.767

使用 #page{ 宽度：980px; 边距：10px 自动；} #LoginBackground{ 边距：50px 自动；
宽度：500 像素；}

# ruby-on-rails - Hartl Ruby-on-Rails 教程 (3.2)，第 8.2.6 节 - 退出链接不返回任何内容

> ID：10233897
> 
> 赞同：3
> 
> 时间：2012-04-19T17:53:28.977
> 
> 标签：ruby-on-rails

完成本教程的退出部分后，我收到以下错误：

```
Failures:

1) User pages signup with valid information after saving the user 
 Failure/Error: it { should have_link('Sign out') }
   expected link "Sign out" to return something
 # ./spec/requests/user_pages_spec.rb:49:in `block (5 levels) in <top (required)>'

Finished in 1.15 seconds
48 examples, 1 failure

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:49 # User pages signup with valid information after saving the user 
```

我之前有更多错误，但我最终重新排列了 authentication_pages_spec.rb 中的项目顺序。物品的顺序有那么重要吗？这个错误我错过了什么？

**authentication_pages_spec.rb**

```
require 'spec_helper'

describe "Authentication" do

subject { page }

describe "signin page" do
before { visit signin_path }

it { should have_selector('h1',    text: 'Sign in') }
it { should have_selector('title', text: 'Sign in') }
end

describe "signin" do
before { visit signin_path }

describe "with invalid information" do
  before { click_button "Sign in" }

  it { should have_selector('title', text: 'Sign in') }
  it { should have_selector('div.alert.alert-error', text: 'Invalid') }

  describe "after visiting another page" do
    before { click_link "Home" }
    it { should_not have_selector('div.alert.alert-error') }
end
end

describe "with valid information" do
  let(:user) { FactoryGirl.create(:user) }
  before do
    fill_in "Email",    with: user.email
    fill_in "Password", with: user.password
    click_button "Sign in"
  end

  describe "followed by signout" do
    before { click_link "Sign out" }
    it { should have_link('Sign in') }
  end

  it { should have_selector('title', text: user.name) }
  it { should have_link('Profile', href: user_path(user)) }
  it { should have_link('Sign out', href: signout_path) }
  it { should_not have_link('Sign in', href: signin_path) }
end
end
end 
```

**session_controller.rb**

```
class SessionsController < ApplicationController

def new
end

def create
user = User.find_by_email(params[:session][:email])
if user && user.authenticate(params[:session][:password])
  sign_in user
  redirect_to user
else
  flash.now[:error] = 'Invalid email/password combination'
  render 'new'
end
end

def destroy
sign_out
redirect_to root_path
end
end 
```

**session_helper.rb**

```
module SessionsHelper

def sign_in(user)
cookies.permanent[:remember_token] = user.remember_token
current_user = user
end

def current_user=(user)
@current_user = user
end

def current_user
@current_user ||= user_from_remember_token
end

private

def user_from_remember_token
  remember_token = cookies[:remember_token]
  User.find_by_remember_token(remember_token) unless remember_token.nil?
end

def signed_in?
!current_user.nil?
end

def sign_out
current_user = nil
cookies.delete(:remember_token)
end

end 
```

**user_pages_spec.rb**

```
require 'spec_helper'

describe "User pages" do

subject { page }

describe "signup page" do
before { visit signup_path }

it { should have_selector('h1',    text: 'Sign up') }
it { should have_selector('title', text: full_title('Sign up')) }
end

describe "profile page" do
let(:user) { FactoryGirl.create(:user) }
before { visit user_path(user) }

it { should have_selector('h1',    text: user.name) }
it { should have_selector('title', text: user.name) }
end

describe "signup" do

before { visit signup_path }

let(:submit) { "Create my account" }

describe "with invalid information" do
  it "should not create a user" do
    expect { click_button submit }.not_to change(User, :count)
  end
end

describe "with valid information" do
  before do
    fill_in "Name",         with: "Example User"
    fill_in "Email",        with: "user@example.com"
    fill_in "Password",     with: "foobar"
    fill_in "Confirmation", with: "foobar"
  end

  it "should create a user" do
    expect { click_button submit }.to change(User, :count).by(1)
  end

  describe "after saving the user" do
    it { should have_link('Sign out') }
    end
  end
end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T18:27:36.467

在“应该创建用户”测试中完成的操作不会在“保存用户之后”测试之前完成，只是因为在它之后（丑陋的解释）。

当您进入“保存用户后”测试分支时，没有点击提交按钮，您可以通过再次点击提交按钮来解决这个问题（见下文）。

尝试使用这样的东西，它应该可以工作，但我不知道是否有更好的方法来编写这个测试（避免这个微小的重复）：

```
# user_pages_spec.rb
# ...
describe "with valid information" do
  before do
    fill_in "Name",         with: "Example User"
    fill_in "Email",        with: "user@example.com"
    fill_in "Password",     with: "foobar"
    fill_in "Confirmation", with: "foobar"
  end

  it "should create a user" do
    expect { click_button submit }.to change(User, :count).by(1)
  end

  describe "after saving the user" do
    before { click_button submit }
    it { should have_link('Sign out') }
  end
end 
```

# c - 在 C 代码中取消引用指向不完整类型的指针

> ID：10233898
> 
> 赞同：1
> 
> 时间：2012-04-19T17:53:33.663
> 
> 标签：c

我调用了下面的函数，传递了一个结构指针。我在指向 currentTableItem -> 请帮助的地方收到错误“取消引用指向不完整类型的指针”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:56:44.530

似乎`struct md_CamsLatchTblStruct`此时编译器不知道完整的声明，可能是因为您使用了前向声明：

编译器看到：

```
struct md_CamsLatchTblStruct; 
```

编译器看不到（未包含/定义在另一个源文件中）：

```
struct md_CamsLatchTblStruct {
     int index;
     int addr;
     int mask;
     int startBit;
     // ..
}; 
```

# ipad - UITableView 崩溃没有错误

> ID：10233901
> 
> 赞同：0
> 
> 时间：2012-04-19T17:53:47.827
> 
> 标签：ipad, uitableview, crash

这是一个相当简单的界面，只有 appdelegate 和 viewcontroller 处理事情。

我有一个 UITableView 显示指定患者的 1 到 13 个图像缩略图。我正在使用包含单个 UIImageView 的自定义单元格来显示拇指。单元格中的 UIImageView 从通过 HTTP 请求加载的 NSMutableArray 加载到 cellForRowAtIndexPath 中。

HTTP 服务器上每位患者的拇指位于患者文件夹中，分为 1 - 3 个命名系列文件夹。当从 iPad 上的 popOver 中选择患者时，拇指表视图将加载 HTTP 服务器上患者文件夹中的第一个系列。

然后，用户可以从系列名称的弹出框中为患者选择不同的系列。此时，通过 HTTP 请求检索所选系列的缩略图并将其加载到缩略图表视图中。

一切正常，除了我有一个患者，在从患者 popOver 中选择患者后检索到的第一个系列有效，但是更改系列或重新选择已加载的系列会导致应用程序崩溃。它不会在模拟器中崩溃，只会在 iPad 上崩溃。从 xCode 运行时，我可以看到崩溃发生在最后一次调用 cellForRowAtIndexPath 完成后，控制台中没有显示任何错误。如果我越过这一点，它会立即崩溃。

我已经在 appdelegate 和 viewController 方法中实现了内存警告委托方法。我没有收到任何内存警告。

我在下面发布了我的 cellForRowAtIndexPath 方法，以防万一我在加载表格视图时遗漏了一些东西。

我正在寻找除了记忆之外还有什么值得怀疑的建议。有什么方法可以在没有控制台的情况下指示导致崩溃的原因？

提前感谢您的帮助

约翰

更新：我在 section 方法中添加了我的行数，这应该不是问题。

我现在确信问题不一定与我的代码有关，而与图像有关。除了这个患者，我可以整天更换患者和/或患者图像系列而没有任何问题。与该患者相关的一张或多张图像正在占用 iPad 中的内存。每个患者有 1 或 2 张 X 射线，其原始大小在 1 到 2 兆字节之间。在将它们保存到磁盘文件以供 iPad 检索时，我将它们的文件大小（压缩质量）减小到 300kb 以下。单个系列中导入的总大小不超过 1.5mb。至少这是磁盘文件的总大小。一旦 iPad 获得文件大小，我不知道实际发生了什么。

在将导入的图像加载到表视图进行显示之前，有什么方法可以测试它们的大小或损坏吗？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    ImageCell *cell = [thumbsTableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
         cell = [[[ImageCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.pImage.image = [thumbsArray objectAtIndex:indexPath.row];
    return cell;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   return [thumbsArray count];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:08:02.703

您是否尝试设置一些断点进行调试？从您发布的代码中，我看不出有任何问题。你启用 NSZombie 了吗？

# magento - SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败

> ID：10233903
> 
> 赞同：3
> 
> 时间：2012-04-19T17:53:52.897
> 
> 标签：magento

我已使用此[链接](http://www.magentocommerce.com/wiki/import-export_and_data_manipulation/removing_products_through_the_database) 中的 SQL 脚本删除所有测试产品数据和类别。然后我阅读了“产品”类别，然后导入了我的 CSV 文件，Magento 在检查数据时说这很好，但是当我单击导入时，我收到以下错误：

> SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败（`gare6221_qshed/catalog_product_website`，CONSTRAINT `FK_CAT_PRD_WS_PRD_ID_CAT_PRD_ENTT_ENTT_ID`FOREIGN KEY ( `product_id`) REFERENCES `catalog_product_entity`( `entity_id`) ON DELETE CASCADE）

有什么想法吗？我真的在努力解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:40:48.133

这已得到修复，问题是由于 SKU 长度超过 64 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:57:17.743

我要说的第一件事是避免直接对数据库进行操作。它会很快变得一团糟（正如你正在学习的那样）。

话虽如此，看起来您可能在某处有一些剩余数据。也许是catalog_product_website？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T14:18:27.287

也遇到了这个问题，虽然 SKU 似乎不是原因（我们的 SKUS 的格式是 'FOO-####'），所以它们都没有接近 64 个字符。

当我选择 csv 文件并选择检查数据时，它通过了检查：

```
Checked rows: 1718, checked entities: 47, invalid rows: 0, total errors: 0
File is valid! To start import process press "Import" button 
```

但是，在选择导入后，我收到此错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`magentoss`.`catalog_product_option_type_value`, CONSTRAINT `FK_CAT_PRD_OPT_TYPE_VAL_OPT_ID_CAT_PRD_OPT_OPT_ID` FOREIGN KEY (`option_id`) REFERENCES `catalog_product_option` (`option_id`) ON D), query was: INSERT INTO `catalog_product_option_type_value` (`option_type_id`,`sort_order`,`sku`,`option_id`) VALUES (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?) 
```

检查产品列表后，文件似乎已上传，因为我的所有数据都已更新，所以不完全确定发生了什么。

# facebook - Graph API - 在粉丝专页上发布 - 图像代理

> ID：10233910
> 
> 赞同：0
> 
> 时间：2012-04-19T17:54:09.043
> 
> 标签：facebook, facebook-graph-api, proxy, facebook-wall

我正在粉丝页面上创建一个墙帖，我在其中指定消息、url、url 名称、标题、描述和相关 url 的照片拇指。

我确实注意到 Facebook 直接使用我的 img 网址。这意味着如果我从我的服务器中删除它，帖子上的图像就会消失。

很明显，如果我创建一个带有自定义图像的帖子，我将不得不终生托管它 - 其他我将有很多带有损坏图像的帖子。

是否可以告诉 FB 获取相关图像的副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:14:44.697

几周前我遇到了同样的问题 - 不幸的是，无法使用托管在 FB 服务器上的图片。我尝试提供用户照片的 URL 等 - 除非您在外部托管它，否则没有任何效果。

因此，要么在您的服务器上“终身托管”，要么使用 Flick 或其他类似的图像托管服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T12:46:49.497

不确定这是否是您想要的，但如果您实际上将图像发布到 FB，则 FB 正在托管它。您可以在此处查看不同的帖子类型：

[https://developers.facebook.com/docs/reference/api/page/#post_types](https://developers.facebook.com/docs/reference/api/page/#post_types)

我们选择“照片”是因为“链接”没有显示很大的图像。

```
$api_call = '' . $network['network_id'] . '/photos';  //network_id is the page id

$attachment =  array(
'access_token' => $network['network_token'],  //access token
'source' => "@" . $image['image_path'],   //must be actual path to image
'message' => $campaign['textresponse'],
);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,'https://graph.facebook.com/' . $api_call);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output
$result = curl_exec($ch);
curl_close ($ch);

echo "<br>";
return $result;  //returns the post number as json string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T02:07:48.600

我认为可以将照片上传到粉丝页面中的相册，然后您可以使用上传的图像属性为您的墙发布消息。

# jquery - 不起作用 jquery ui datetimepicker (node.js + ejs + express)

> ID：10233911
> 
> 赞同：1
> 
> 时间：2012-04-19T17:54:10.010
> 
> 标签：jquery, node.js, express, datetimepicker, ejs

我正在尝试使用这个： [http ://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

那是我的代码：

```
<html>
<head>
    <script src="http://trentrichardson.com/examples/timepicker/js/jquery-1.7.1.min.js">     </script>
    <script src="http://trentrichardson.com/examples/timepicker/js/jquery-ui-1.8.16.custom.min.js"></script>
    <script src="http://trentrichardson.com/examples/timepicker/js/jquery-ui-sliderAccess.js"></script>
    <script src="http://trentrichardson.com/examples/timepicker/js/jquery-ui-timepicker-addon.js"></script>
    <link type="text/css" href="http://trentrichardson.com/examples/timepicker/css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet">   

<script>

$(function() {
  $('#dateTimePicker1').datetimepicker();
});

</script>

</head>
<body>
    <%-body%>      
</body>
</html> 
```

那是body.ejs：

```
<input id="dateTimePicker1" class="hasDatepicker"></input> 
```

我得到的是一个简单的输入。当我点击它时没有任何反应。我在控制台中没有错误。我需要帮助解决这个问题。

upd（我有一个路由文件）：

```
exports.index = function(req, res){
  res.render('index', { title: 'index' })
}; 
```

我检查并在页面加载后输入在代码中。

但是，奇怪的是：我用作者的插件打开网站（这篇文章的第一个链接）。打开开发者工具。编辑站点的 html - 在示例输入附近添加新输入。名称（和 id）它 example222。在控制台做

```
$('#example222').datetimepicker(); 
```

他的输入有效，我的不行！那是什么法术？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:25:20.770

首先，我认为您的脚本是在加载 DOM 之前执行的，这是错误的，因为它包含在 $(...) 中并且应该表现得像包含在 $.ready(...) 中一样。

如果您没有收到任何错误，则表示代码找不到与选择器匹配的任何 DOM 元素，这意味着您的模板未应用。

您能否检查您的源代码（在浏览器中）是否具有`<input id="dateTimePicker1" class="hasDatepicker"></input>`或仍然包含 ejs 模板。

那么你能告诉我们你如何在 node.js 中调用渲染。

**编辑**：问题是没有执行 jQuery 代码。

这将通过[这个 jsFiddle](http://jsfiddle.net/tCxT6/4/)证明有效：

```
<html>
    <head>
        <script src="http://trentrichardson.com/examples/timepicker/js/jquery-1.7.1.min.js">     </script>
        <script src="http://trentrichardson.com/examples/timepicker/js/jquery-ui-1.8.16.custom.min.js"></script>
        <script src="http://trentrichardson.com/examples/timepicker/js/jquery-ui-sliderAccess.js"></script>
        <script src="http://trentrichardson.com/examples/timepicker/js/jquery-ui-timepicker-addon.js"></script>
        <link type="text/css" href="http://trentrichardson.com/examples/timepicker/css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet">
    </head>
    <body>
        <input id="dateTimePicker"></input>  
        <script type="text/javascript">
            $(document).ready(function() {
                $('#dateTimePicker').datetimepicker();
            });
        </script> 
    </body>
</html> 
```

# javascript - jQuery-validate 每个元素验证不起作用

> ID：10233912
> 
> 赞同：1
> 
> 时间：2012-04-19T17:54:10.287
> 
> 标签：javascript, jquery, jquery-validate

我正在尝试设置一些基本的 jQuery 验证，但似乎没有任何效果。当我运行页面并点击提交时，第一个文本框会突出显示，但第二个文本框的消息会显示在摘要中。如果单击进出第二个文本框，两个框都会突出显示，但会显示第二个框的消息两次。随后单击提交按钮会导致在按下按钮时显示第二条消息，但在释放按钮时会隐藏。

很明显，我错误地设置了一些关键的东西，但我一辈子都看不到是什么。

形式：

```
<form id="formInput">    
    Some Input  <input type="text" id="someInput1" />
    Some Input2 <input type="text" id="someInput2" />

    <input id="btnSubmit" type="submit" />    
</form> 
```

代码（在 document.ready 处理程序中运行）：

```
$('form').validate({
    highlight: function (element, errorClass) {
        $(element).addClass("invalidElement");
    },
    unhighlight: function (element, errorClass) {
        $(element).removeClass("invalidElement");
    },
    errorClass: "errorMsg",
    errorContainer: '#errorSummary',
    errorLabelContainer: '#errorsList',
    wrapper: 'li',
    onkeyup: false,
    focusCleanup: false
});

$("#someInput1").rules("add", {
    required: true,
    messages: {
        required: "Some input 1 is required"
    }
});

$("#someInput2").rules("add", {
    required: true,
    messages: {
        required: "Some input 2 is required"
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:30:54.010

上面代码的问题是 jQuery 验证插件要求所有输入都有名称。

添加

```
name="X" 
name="Y" 
```

到两个文本框固定事项。

```
Some Input  <input type="text" name="X" class="someInput1" />
Some Input2 <input type="text" name="Y" class="someInput2" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:58:28.187

不确定您是否正在编写所有代码，因为您最终希望对其进行更多自定义，但如果您希望您的示例以最基本的形式工作，您所需要的就是：

```
<form id="formInput">    
    Some Input  <input type="text" id="someInput1" class="required" />
    Some Input2 <input type="text" id="someInput2" class="required" />
    <input id="btnSubmit" type="submit" />    
</form>

$('#formInput').validate(); 
```

至少，您可以从它开始，一次添加*一个*自定义选项，这样您就可以看到正在发生的事情。

**编辑：**对于自定义消息（注意我通过删除内联规则`class`）：

```
<form id="formInput">    
    Some Input  <input type="text" id="someInput1" name="someinput1" />
    Some Input2 <input type="text" id="someInput2" name="someinput2" />
    <input id="btnSubmit" type="submit" />    
</form>

$("#someInput1").rules("add", {
   required: true,
   messages: { required: "This input is required - learn2forminputn00b!!" }
}); 
```

**替代方法（来自文档）：**

`name`使用此方法通过构造函数中的表单字段为这些规则指定规则和消息。

```
$(".selector").validate({
   rules: {
     name: {
       required: true,
       minlength: 2
     }
   },
   messages: {
     name: {
       required: "We need your email address to contact you",
       minlength: jQuery.format("At least {0} characters required!")
     }
   }
}) 
```

# php - 为什么我会用 Currency's 得到这个 â‚¬ Â£？

> ID：10233914
> 
> 赞同：0
> 
> 时间：2012-04-19T17:54:23.803
> 
> 标签：php, meta-tags

我正在使用 Opencart 网站

[http://www.lutari.net](http://www.lutari.net)

哪里有欧元或英镑的货币符号。我越来越小符号

我试着把

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> 
```

在页面顶部，但随后出现 PHP 错误，这很奇怪。

我在索引代码中找到了这个。

```
// Response
$response = new Response();
$response->addHeader('Content-Type: text/html; charset=utf-8');
$response->setCompression($config->get('config_compression'));
$registry->set('response', $response); 
```

根据一些研究，这看起来是正确的，但不起作用。

有谁知道我还能如何摆脱奇怪的符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:58:24.157

货币符号是通过使用`&#333;`类似代码嵌入的。

像欧元符号一样是代码：`&#8364;`

[检查这个符号](http://www.cs.tut.fi/~jkorpela/html/euro.html)

还有一件事是使用谷歌搜索货币符号

# php - INSERT INTO 失败且没有错误

> ID：10233917
> 
> 赞同：2
> 
> 时间：2012-04-19T17:54:41.213
> 
> 标签：php, mysql

我正在尝试使用 PHP 和 Mysql 进行 INSERT INTO。

这是在 PHPMyadmin 中成功的 SQL 语句：

```
INSERT INTO purchase_orders VALUES (
    DEFAULT, 
    '501',
    '80999',
    '149179',
    'EB-0408898',
    '1',
    'Thompson Center Barrel Encore 26\" Stainless Steel Fluted 35 Whelen 4767',
    '294.43',
    '4767',
    'UPS Ground',
    '11.61',
    'LA',
    'P',
    '1',
    '264.99', 
    DEFAULT, 
    DEFAULT
) 
```

这是我运行 SQL 的 PHP 语句：

```
$sql = "INSERT INTO purchase_orders VALUES (
    DEFAULT, 
    '".mysql_real_escape_string($po_num)."',
    '".mysql_real_escape_string($order_id)."',
    '".mysql_real_escape_string($product_id)."',
    '".mysql_real_escape_string($product_code)."',
    '".mysql_real_escape_string($amount)."',
    '".mysql_real_escape_string($product)."',
    '".mysql_real_escape_string($price)."',
    '".mysql_real_escape_string($mfg_code)."',
    '".mysql_real_escape_string($shipping_method)."',
    '".mysql_real_escape_string($shipping_cost)."',
    '".mysql_real_escape_string($s_state)."',
    '".mysql_real_escape_string($status)."',
    '".mysql_real_escape_string($dist_code)."',
    '".mysql_real_escape_string($dist_cost)."', 
    DEFAULT, 
    DEFAULT)";
mysql_query($sql, $dbc);
echo mysql_errno($dbc) . ": " . mysql_error($dbc). "\n"; 
```

我完全困惑为什么插入语句不适用于 PHP。

我也尝试过这个 SQL 代码，结果相同......

```
INSERT INTO purchase_orders(po_num, order_id, product_id, product_code, amount, product, price, mfg_code, shipping_method, shipping_cost, s_state, status, dist_code, dist_cost) VALUES ('501','80999','149179','EB-0408898','1','Thompson Center Barrel Encore 26\" Stainless Steel Fluted 35 Whelen 4767','294.43','4767','UPS Ground','11.61','LA','P','1','264.99') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:15:08.103

你能在你的数据库中插入任何东西吗？`mysql_query($sql, $dbc);`您的代码部分是否有效？

没有必要在你的表中插入默认值，毕竟它们是默认值。当然，这是对您的表结构的一个很好的提醒，但我会忽略它。

否则，如果您确实喜欢 VIPIN JAIN，建议一切正常。定义要插入值的列。如果列的数据类型是整数，您可以在查询中忽略单引号。

仍然很奇怪，您没有收到任何错误消息。你确定你的数据库连接正常吗？

* * *

更新。尝试这个。命名列并删除`real_escape_string()`函数。如果这可行，请添加它或在连接查询之前清理变量。如果这不起作用，请仔细检查值和表结构中的无效值。回显您尝试分配给函数`$sql`之前和之后的`real_escape_string()`值。也许它做了一些特别的事情。

```
$sql = "INSERT INTO `purchase_orders` (`column1`,`column2`,`column3`,`column4`,'";
$sql .= "`column5`,`column6`,`column7`,`column8`,`column9`,`column10`,";
$sql .= "`column11`,`column12`,`column13`,`column14`)";
$sql .= " VALUES ('{$po_num}','{$order_id}','{$product_id}',";
$sql .= "'{$product_code}','{$amount}','{$product}','{$price}',";
$sql .= "'{$mfg_code}','{$shipping_method}','{$shipping_cost}',";
$sql .= "'{$s_state}','{$status}','{$dist_code}','{$dist_cost}')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:06:02.390

不要`DEFAULT`在字段中使用：

```
INSERT INTO purchase_orders (<colname1>,<colname2>,.....) VALUES ( '501','80999','149179','EB-0408898','1','Thompson Center Barrel Encore 26\" Stainless Steel Fluted 35 Whelen 4767','294.43','4767','UPS Ground','11.61','LA','P','1','264.99') 
```

而是通过将插入值与列相关联来使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:13:08.693

如果您试图让它插入默认值，您可以将这些列的值设置为空。像这样：

```
INSERT INTO purchase_orders VALUES (null, '501','80999','149179','EB-0408898','1','Thompson Center Barrel Encore 26\" Stainless Steel Fluted 35 Whelen 4767','294.43','4767','UPS Ground','11.61','LA','P','1','264.99', null, null) 
```

数据库会发现它需要将默认值放在您要求为空的列中。

# c# - 使用 SQL Server 数据库文件

> ID：10233924
> 
> 赞同：2
> 
> 时间：2012-04-19T17:55:17.500
> 
> 标签：c#, sql, database

我正在使用 Visual Studio 2010 学习基本的 C#，并且正在创建一个使用 SQL Server 数据库的应用程序。该应用程序将允许用户在富文本框中输入文本，按下按钮，然后在文本框 2 中显示“已存储”字词。这些已存储字词仅是带有 * 的字词。我有我的数据库文件，但我不知道如何为它编写代码。到目前为止，我有，

```
SqlConnection myConn = new SqlConnection(@"Server=.\SQLEXPRESS;AttachDbFilename='C:\datafile.mdf';Integrated Security=True;User Instance=True");
con.Open();
SqlCommand com = new SqlCommand("SELECT name FROM bbc", con);
SqlDataReader sdr = com.ExecuteReader();
while (sdr.Read())
{
    this.txtbox2.Text.Add(sdr[""]);
} 
```

这是在我的按钮处理程序下。

我已经设置了我的数据文件，所以这只是如何设置它以从文本框 1 获取数据并将其显示在文本框 2 中的情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:57:49.413

可能是这样的：

```
StringBuilder builder = new StringBuilder();
while (sdr.Read())
{
    string value = sdr["name"].ToString();
    if(value.Contains("*"))
        builder.Append(value );
}

this.txtbox2.Text = builder.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:05:26.187

如果您只想显示以 '*' 开头的单词 - 那么您可以将数据库查询限制为仅返回它们：

```
SELECT name FROM bbc where name like '*%' 
```

'%' 字符是一个通配符 - 意味着只返回以 '*' 开头并以任何结尾的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:06:52.113

也许如下：

```
while (sdr.Read())
{
    string value = sdr["name"].ToString();
    if(value.StartsWith("*"))
        txtbox2.Text += value;
} 
```

几点：

*   在 SqlConnection 周围放置一个 using 以便它自动为您关闭它。
*   我注意到您正在尝试连接到主数据库。为什么？
*   Dave 提出了一个很好的观点，即使用通配符`%`来限制结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T18:11:55.587

我会使用这样的东西：

```
//SQL Connection stuff here
con.Open();
String queryStr = "SELECT name FROM bbc WHERE name LIKE '*%'";
SqlCommand com = new SqlCommand(queryStr, con);
SqlDataReader sdr = com.ExecuteReader();

while(sdr.Read())
{
   this.textbox2.Text = sdr.GetValue(0).ToString();
} 
```

让 SQL 限制查询结果要简单得多，而且通常效率更高。

# c# - OOP，在对象的构造函数中调用另一个对象的getter方法是一种好习惯吗？

> ID：10233929
> 
> 赞同：-1
> 
> 时间：2012-04-19T17:55:38.267
> 
> 标签：c#, constructor

我试图创建一个`StandardMidiFile`对象，它将包含一个`HeaderChunk`对象和一个`TrackChunk`对象。

对象将`TrackChunk`包含`MidiEvent`对象。

所以当我创建这个`StandardMidiFile`对象时，我希望它是构造函数来构造和包含其他对象。

但是，当`TrackChunk` 创建对象时，它首先需要调用 GUI-UserControl 类中的 getter 方法，该方法将确定所有 MidiEvent 的总长度（以字节为单位）。然后该值将用于构造`TrackChunk`.

在构造函数中调用方法是一种好的 OOP 做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:58:45.720

总的来说，它既不好也不坏。在某些特定情况下，它可能是好是坏。不过，找到“坏”的会有点困难。这个想法本质上没有错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T18:05:07.230

如果您希望根据另一个对象来初始化您的对象，这似乎是正确的做法。例如，如果您有一个“设置”类，那么许多新实例尝试访问其内部字段以了解如何初始化自己甚至是有意义的。
一般来说，这既不总是好的也不总是坏的。通常在编程中，这取决于具体情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T18:35:02.020

我要做的是将轨道长度作为构造函数参数传递。

```
class StandardMidiFile
{
    HeaderChunk header;
    TrackChunk track;

    public StandardMidiFile()
    {
        var trackLength = // call GUI-UserControl class to get value
        header = new HeaderChunk();
        track = new TrackChunk(trackLength);
    }
}

class HeaderChunk
{
    // blah blah blah
}

class TrackChunk
{
    // blah blah blah

    public TrackChunk(var trackLength)
    {
        // Do stuff here.
    }
} 
```

当然，这实际上取决于您的设计的其余部分。如果 TrackChunk 仅作为 StandardMidiFile 中使用的对象，那么这对我来说更有意义。我相信，无论哪种方式都是“正确的”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T17:58:19.413

仅仅因为你可以做某事，并不意味着你应该做。也许扩展这个问题，提供一个例子，这将有助于你的答案。

# c++ - 是什么让虚函数这么慢？C++

> ID：10233930
> 
> 赞同：0
> 
> 时间：2012-04-19T17:55:39.367
> 
> 标签：c++, function, refactoring, virtual

> **可能重复：**
> [虚函数和性能 - C++](https://stackoverflow.com/questions/449827/virtual-functions-and-performance-c)

我正在尝试重构我的代码，而且到处有人说使用虚函数在性能方面是一个 huuuuge nono，为什么？还有另一种方法可以继承一个类并重新定义基类中定义的函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T18:00:27.720

可以在此处找到有关此主题的良好参考文章：http: [//coldattic.info/shvedsky/pro/blogs/a-foo-walks-into-a-bar/posts/3](http://coldattic.info/shvedsky/pro/blogs/a-foo-walks-into-a-bar/posts/3)

对于懒惰的人，我猜答案是“可能稍微慢一点”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:58:36.120

虚函数是通过一个[vtable](http://en.wikipedia.org/wiki/Virtual_method_table)调用的，它基本上是一个函数指针数组。因此，每次调用一个时，都会进行一次额外的数组查找。我不确定我是否会称其为*huuuuge nono*，但总的来说它们应该很快。

来自**维基百科**：

> 与非虚拟调用相比，虚拟调用至少需要额外的索引取消引用，有时还需要“修复”添加，后者只是跳转到编译指针。因此，调用虚函数本质上比调用非虚函数慢。1996 年进行的一项实验表明，大约 6-13% 的执行时间用于简单地分派到正确的函数，尽管开销可能高达 50%。 [4] 由于更大的缓存和更好的分支预测，虚拟功能的成本在现代 CPU 架构上可能不会那么高。

# javascript - JavaScript 对象方法返回语句

> ID：10233938
> 
> 赞同：-2
> 
> 时间：2012-04-19T17:56:22.400
> 
> 标签：javascript, oop, return

在 JavaScript 中，我创建了一个 User 类。我为此写了一个方法（函数），但我不能给出一个返回语句。这是我的课：

```
function User() {
    var isLogedIn = "FukkaMukka";
    var mail = "";
    var name = "";

    //functions

    this.isLogedInFn = function(callback) {
        $.post("controller.php?module=login&action=test", function(e) {
            this.isLogedIn = false; // Here i can't reach the object variable.. why?
            return e;
        })
    }
    this.logIn = logIn;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:59:39.230

回调不在对象的[上下文](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)中执行。几种解决方法：

*   使用参数调用[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)`context`
*   [bind()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)你的函数到你的对象
*   将对象的引用存储在变量使用中（如 Sarfraz 建议的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:59:40.427

```
function User() {
    var isLogedIn = "FukkaMukka";
    var mail = "";
    var name = "";
    var self = this;
    //functions

    this.isLogedInFn = function(callback) {
        $.post("controller.php?module=login&action=test", function(e) {
            // `this` is no longer in the scope of the function as you would think it would be. in this case `this` iirc will reference the window object.
            self.isLogedIn = false; 
            return e;
        })
    }
    this.logIn = logIn;

} 
```

查看代码中的注释。

# powerbuilder - 在数据窗口过滤器中使用日期字符串

> ID：10233940
> 
> 赞同：0
> 
> 时间：2012-04-19T17:56:31.613
> 
> 标签：powerbuilder, datawindow

在我的应用程序的许多数据窗口中，用户可以访问一个自由格式的文本框，他们可以在其中输入他们喜欢的任何过滤器字符串。通常，他们会成功使用如下搜索词： `date(last_updated_date) = 2010-10-22`

我正在尝试更新一些文档，并被要求特别解决此语法问题。所以我的问题是：PowerBuilder如何知道“2010-10-22”是一个日期，以及在没有特定转换的情况下包含这样的日期文字的规则是什么？它是基于左侧值显然是日期数据类型这一事实，还是基于“2010-10-22”中使用的特定日期格式或两者兼而有之？只是要明确一点：这种语法可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:09:02.460

绝对是字面日期（不带引号）的格式，不需要和左边的比较就可以把它当作日期来处理。

在“标准数据类型”部分中，文档说明了“日期”类型：

> 日期，包括全年（1000 到 3000）、月数（01 到 12）和日期（01 到 31）。使用文字 要分配文字值，请用连字符分隔年、月和日。例如：
> 
> 2001-12-25 // 2001 年 12 月 25 日
> 
> 2003-02-06 // 2003 年 2 月 6 日

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:42:26.067

Seki 所说的所有文字都是真的。但是，如果您想/必须使用字符串，则格式“yyyy-mm-dd”是在与日期类型变量进行比较/分配时始终有效的格式。它被认为是日期格式的标准。

如果使用不同的字符串格式作为日期，例如“25-12-2012”，PB 将使用 Windows 区域设置对其进行转换。如果转换失败，您将获得 1900-01-01。

您还可以查看 PB 帮助“日期 PowerScript 函数/将字符串转换为日期”。

# ajax - Grails - 在 JS 方法中调用 ajax 后渲染页面

> ID：10233941
> 
> 赞同：2
> 
> 时间：2012-04-19T17:56:31.980
> 
> 标签：ajax, grails

尝试调用我的控制器中的一个方法，该方法本质上将呈现我所在的页面，以便显示更新。我需要在我的 ajax 调用中添加什么来调用 grails 方法？

我想要的流程是：

*   在看花名册
*   选中复选框，点击 actionSubmit，onclick 转到对我的控制器中的方法进行 ajax 调用的 JS 函数。
*   我的控制器上的调用 updateInformation 将更新所有选定的人
*   通话结束后，我想更新我的视图名册。（目前JS调用后流程结束）

名册.gsp：

```
$.ajax({ 
url: "updateInformation", 
type:"GET",
data:{ids:JSON.stringify(idList), option:option, id:id}
}); 
```

我想调用控制器：

```
def roster() {
   [render stuff]
}

def updateInformation() {
    ... stuff ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:00:33.530

grails 默认通过 url 路径解析映射，所以一旦你将它替换为你的控制器和动作名称，下面应该会得到你的 controller.action：

```
$.ajax({ 
    url: "/$controller/$action", 
    type:"GET",
    data:{ids:JSON.stringify(idList), option:option, id:id}
}); 
```

此外，如果您使用下面的 grails2，您的控制器操作应该是一个闭包：

```
def viewPage = {
    //
} 
```

如果您不想更改调用，原始示例将调用`updateNumbers`控制器默认操作。如果要将原始调用映射到`updateNumbers.viewPage`，可以在控制器中将默认操作设置为`viewPage`like this 。`static defaultAction = "viewPage"``updateNumbers`

# android - TextView 水平滚动，怎么滚动

> ID：10233943
> 
> 赞同：0
> 
> 时间：2012-04-19T17:56:37.763
> 
> 标签：android, android-layout

我有一个包裹在 ScrollView 中的 TextView。TextView 设置为 scrollHorizo​​ntally 以使其不是自动换行。文本在屏幕外运行，并且 ScrollView 的垂直滚动条出现，但不是水平的。如何让水平滚动条显示出来？

```
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/textViewContent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scrollHorizontally="true"/>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T18:00:57.887

如果你想让它水平滚动，你应该使用`HorizontalScrollView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:13:40.230

如果您想双向滚动，我认为可能的唯一方法是在 web 视图中。在 java 代码中将文本转换为 html 并不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:09:35.140

使用 Horizo​​ntalScrollView

```
<HorizontalScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/textViewContent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scrollHorizontally="true"/>
</HorizontalScrollView> 
```

# winforms - 在 DataGridView 中突出显示一个单词？

> ID：10233948
> 
> 赞同：0
> 
> 时间：2012-04-19T17:56:48.673
> 
> 标签：winforms, datagridview, highlight

在我的 C# 3.5 Windows 窗体应用程序中，我有一个网格 (DataGridView)。我想突出显示某个单元格内的一个单词，但网格只允许我突出显示整个单元格。

网格或任何可用的用户控件是否有任何调整，建立在 DataGridView 上，可以突出显示 DataGridView 单元格内的单个单词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:19:01.780

解决方案是`RichTextBox`在您的`DataGridView`. 然后，您将能够突出显示单个单词并完全控制单元格中的格式。看看这篇文章：

[DataGridView 中的 RichTextBox 列](http://www.codeproject.com/Articles/31823/RichTextBox-Cell-in-a-DataGridView)

# java - 自定义对象属性更改时更新 JLabel

> ID：10233955
> 
> 赞同：2
> 
> 时间：2012-04-19T17:57:13.880
> 
> 标签：java, swing, jlabel, propertychangelistener, propertychangesupport

我有一个 Java 类，我希望它的一个属性由 Swing 桌面应用程序中的 JLabel 显示：

```
class Item {
    private String name;
    private Integer quantity;

    // getters, setters...
}

class Frame {
    Item item = new Item();
    ...

    JLabel label = new JLabel();
    label.setText(item.getQuantity().toString());
    ...
} 
```

每当项目的数量属性发生变化时，如何让标签更新其文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T18:07:51.130

有些东西必须更新标签的文本（使用`setText`您已经知道的方法）。可能最简单的事情是让`Item`类在其属性更改时触发`PropertyChangeEvent`s，并将侦听器附加到更新标签的项目。

```
final JLabel label = new JLabel();
label.setText(item.getQuantity().toString());
item.addPropertyChangeListener( new PropertyChangeListener(){
   @Override
   public void propertyChange( PropertyChangeEvent event ){
     if ( "quantity".equals( event.getPropertyName ) ){
        //I assume this happens on the EDT, otherwise use SwingUtilities.invoke*
        label.setText( (String)event.getNewValue() );
     }
   }
}); 
```

该类`PropertyChangeSupport`使管理侦听器和触发`Item`类中的事件变得容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:01:50.223

通过调用从 Component 继承的 repaint()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:04:41.110

我可能会向您的 Item 对象添加一个 ObjectChangeListener，然后覆盖它的 objectChanged 方法来更新 JLabel 并调用 repaint()。

# asp.net-mvc - 使用 MembershipProvider.GetUserNameByEmail 有困难 - 不会编译？

> ID：10233961
> 
> 赞同：0
> 
> 时间：2012-04-19T17:57:57.137
> 
> 标签：asp.net-mvc, asp.net-membership

我收到此错误：

非静态字段、方法或属性 'System.Web.Security.MembershipProvider.GetUserNameByEmail(string) 需要对象引用

尝试使用代码时：

```
string userName = MembershipProvider.GetUserNameByEmail(email); 
```

从我的控制器：

```
[HttpPost]
public ActionResult ChangeEmail(ChangeEmailViewModel model)
{
    if (ModelState.IsValid)
    {
        string email = model.Email;
        string userName = MembershipProvider.GetUserNameByEmail(email);
        if (userName != null)
        {
            // change email
        }
        else
        {
            // don't allow email change as that email is already in use
        }
    }
} 
```

我不明白为什么我会收到错误，因为我找到了正在使用此代码的示例并且看不到差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T18:07:31.193

试试`Membership.GetUserNameByEmail(email)`。

# mysql - 从 ant 构建脚本运行 mysql 过程

> ID：10233963
> 
> 赞同：2
> 
> 时间：2012-04-19T17:58:01.260
> 
> 标签：mysql, sql, stored-procedures, ant

我正在尝试执行一个创建过程并执行它的 sql 脚本。我通过从 mysql 客户端手动运行该过程来验证该过程。但是当使用下面的脚本时会出错。

我的蚂蚁脚本是

```
<sql driver="${mysql.driver.string.DE}" url="jdbc:mysql://${database.host}:${database.port}/${database.name}" userid="${database.username}" password="${database.password}" onerror="continue" delimiter="$$" delimitertype="row" keepformat="yes" rdbms="mysql">
    <transaction src="${mysql.dbupgrade.sql.dir.DE}/fixDuplicateClassNames.sql" />
    <transaction>commit;</transaction>
    <classpath>
        <fileset dir="${lib.dir.DE}">
            <include name="*.jar" />
        </fileset>
    </classpath>
</sql> 
```

运行脚本时抛出的错误是

```
java.sql.SQLException: Syntax error or access violation message from server: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DELIMITER $; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T06:08:13.500

据我所知，在 ANT 使用的“file-x.sql”中不可能使用 DELIMITER 属性。您必须在“sql.. tag”中设置它

如果您在 ANT 脚本中设置 delimiter="$$" 而*不是 delimitertype="row"*这将起作用。无需切换回“分隔符；”

**文件-x.sql**

```
DROP FUNCTION IF EXISTS Just$$

CREATE FUNCTION Just( xID SMALLINT )
RETURNS CHAR(30)
BEGIN
  DECLARE fun CHAR(30) DEFAULT '' ;
  SELECT name INTO fun FROM family WHERE ID=xID;
  RETURN fun;
END;
$$

insert into idcart (ID,gruppe,sort,beschr1)values(352, 35, 1,'just for fun')$$
insert into idcart (ID,gruppe,sort,beschr1)values(353, 35, 1,'just for fun'); 
```

注意设置所有$$，你可以让最后一行通过“;” . 但是，如果您将上面的行设置为不以 $$ 结尾 -- 则 ERROR。如果您使用 delimitertype="row" 那么“file-x.sql”中的所有 $$ 都将被转换为 $（只有一个符号），这会引发很多错误。

# ruby - 解析并读取 xml 数组

> ID：10233964
> 
> 赞同：1
> 
> 时间：2012-04-19T17:58:01.557
> 
> 标签：ruby, xml

这是一个简单的东西，但现在让我真的发疯了。花了几个小时来解决这个问题，我以前有很多次。

我正在尝试阅读解析 xmlsimple 文档。但我不知道为什么不能按索引号访问元素。我无法理解这个问题，当我在控制台中尝试它时它可以工作，但不是在实际代码中。它在视图页面上给了我这个错误：

```
undefined method `[]' for nil:NilClass 
```

代码：

```
@i = 0
list =""
while @i <= 2
  puts xml
  a = parsed_items["Item"][@i]["ItemId"]
  list <<  a.to_s << ","
  @i += 1
end
puts list.to_s 
```

如果我通过在我的代码中手动给出一个 int 值来做到这一点，那么它可以工作：

```
a = parsed_items["Item"][0]["ItemId"] # it works with other exact code 
```

更改为`@i`不工作：

```
a = parsed_items["Item"][@i]["ItemId"] # it does not work with other exact code 
```

XML:

```
1.9.2p290 :013 > items = "<ItemList> <Item> <ItemId>123</ItemId> <ItemName>abc</ItemName> <ItemType>xyz</ItemType> <Status>bad</Status> </Item> <Item> <ItemId>456</ItemId> <ItemName>fgh</ItemName> <ItemType>nbv</ItemType> <Status>bad</Status> </Item> </ItemList>"
     => "<ItemList> <Item> <ItemId>123</ItemId> <ItemName>abc</ItemName> <ItemType>xyz</ItemType> <Status>bad</Status> </Item> <Item> <ItemId>456</ItemId> <ItemName>fgh</ItemName> <ItemType>nbv</ItemType> <Status>bad</Status> </Item> </ItemList>" 

1.9.2p290 :014 > parsed_items = XmlSimple.xml_in(items, { 'KeyAttr' => 'name' })
     => {"Item"=>[{"ItemId"=>["123"], "ItemName"=>["abc"], "ItemType"=>["xyz"], "Status"=>["bad"]}, {"ItemId"=>["456"], "ItemName"=>["fgh"], "ItemType"=>["nbv"], "Status"=>["bad"]}]} 
```

XML:

```
<ItemList>
  <Item>
    <ItemId>123</ItemId>
    <ItemName>abc</ItemName>
    <ItemType>xyz</ItemType>
    <Status>bad</Status>
  </Item>
  <Item>
    <ItemId>456</ItemId>
    <ItemName>fgh</ItemName>
    <ItemType>nbv</ItemType>
    <Status>bad</Status>
  </Item>
</ItemList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:17:10.643

解释一下，那个错误的意思是*“嘿，你放`[]`了一些东西`nil`，但`nil`没有那个方法！”*

您的数组中只有 2 个项目，因此当`@i`到达`2`-<strong> 这是基于 0 的列表中的第三个项目时，代码`parse_items["Item"][@i]`将返回`nil`; 当您尝试`["ItemId"]`在该值上执行时，您会收到您所说的错误。

**解决此问题的**最简单更改：****

 **```
while @i<2 # instead of <=2 
```

**更好的改变**（让 Ruby 为你迭代）：

```
list = ""
parsed_items["Item"].each do |item|
  list << item["ItemId"].to_s << ","
end
puts list 
```

**更好的改变**（让 Ruby 为你做你的工作）：

```
puts parsed_items["Item"].map{ |item| item["ItemId"] }.join(',') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:15:25.967

出于某种原因，您正在定义一个实例变量而不是本地变量。将列表转换为字符串也是完全没有必要的，因为它从一开始就是一个字符串。工作代码应该看起来像这样：

```
i = 0
list =""
while i <= 2
  puts xml
  a = parsed_items["Item"][i]["ItemId"]
  list <<  a.to_s << ","
  i += 1
end
puts list 
```

我强烈建议您[阅读不同的变量类型](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Variables_and_Constants)。**

# iphone - 在 UIScrollView 中滚动触摸位置到视图的中心

> ID：10233967
> 
> 赞同：1
> 
> 时间：2012-04-19T17:58:09.133
> 
> 标签：iphone, objective-c, ios, uiscrollview, uilabel

我在 UIScrollView 中有带有文本的标签。当触摸事件发生时，我想用文本滚动我的标签，以便触摸点下方的文本将滚动到视图的中心。如果我有触摸事件坐标，如何将 UIScrollView 的内容从触摸点滚动到屏幕中心？任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:17:27.240

尝试这个：

```
[myScroll setContentOffset: CGPointMake(x, y) animated: YES]; 
```

其中 x,y 是您必须滚动的 myScroll 的左上角位置，由触摸事件坐标计算得出。

# web-services - 从 windows phone 访问 windows azure DB 时出现服务错误

> ID：10233969
> 
> 赞同：2
> 
> 时间：2012-04-19T17:58:12.003
> 
> 标签：web-services, entity-framework, windows-phone-7, azure, azure-storage

收到错误：

EntitySet 'User' 未在 EntityContainer 'festDBEntities' 中定义。接近简单标识符，第 1 行，第 46 列。

我的应用代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using FestCloud.festDBService;

namespace FestCloud
{
    public partial class MainPage : PhoneApplicationPage
    {
        private Service1Client _serviceClient;

        // Constructor
        public MainPage()
        {
            InitializeComponent();
            _serviceClient = new Service1Client();
            _serviceClient.LoginUserCompleted += new EventHandler<LoginUserCompletedEventArgs>(_serviceClient_LoginUserCompleted);
        }

        void _serviceClient_LoginUserCompleted(object sender, LoginUserCompletedEventArgs e)
        {
            if ((e.Error == null) && (e.Result != null))
            {
                MessageBox.Show("Welcome " + e.Result + " !");
            }
            else
            {
                MessageBox.Show("Could not log in. Please check user name/password and try again.");
            }
        }

        private void logInButton_Click(object sender, RoutedEventArgs e)
        {
            _serviceClient.LoginUserAsync(userNameTextBox.Text, passwordTextBox.Text);
        }

        private void newAccountButton_Click(object sender, RoutedEventArgs e)
        {
            NavigationService.Navigate(new Uri("/Register.xaml", UriKind.Relative));
        }
    }
} 
```

和我的服务代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.Data.Objects;

namespace CloudServiceRole
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
    public class Service1 : IService1
    {
        public void AddUser(string userName, string password)
        {
            using (var context = new festDBEntities())
            {
                context.AddToUsers(new User()
                {
                    UserName = userName,
                    Password = password,

                });
                context.SaveChanges();
            }
        }

        public string LoginUser(string username, string password)
        {
            string query = @"SELECT value User.UserName FROM festDBEntities.User AS User WHERE User.UserName = @username AND User.Password = @password";

            ObjectParameter[] parameters = new ObjectParameter[2];

            parameters[0] = new ObjectParameter("username", username);
            parameters[1] = new ObjectParameter("password", password);

            using (var context = new festDBEntities())
            {
                ObjectQuery<string> results = context.CreateQuery<string>(query, parameters);

                foreach (string result in results)
                {
                    if (result != null)
                    {
                        return result;
                    }
                }
            }
            return null; ;
        }
    }
} 
```

我的 IService.cs 文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace CloudServiceRole
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        void AddUser(string userName, string password);

        [OperationContract]
        string LoginUser(string userName, string password);
        // TODO: Add your service operations here
    } 
} 
```

我的数据库包含 UserId(int)-PK、UserName(nvarchar)、Password(nvarchar) 以及其他要在我掌握基础知识后添加的数据库。关于什么导致错误或我的代码的任何想法？非常感谢，MH

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:09:21.307

这听起来不像是电话呼叫的问题，您是否尝试过从其他地方呼叫它？您是否尝试过调用不带参数的 Web 服务来查看是否有效？

您可能需要查看此示例以帮助您入门：

[http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/hosting-wcf-service-in-windows-azure-and-sumption-in-window-7-phone-app/](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/hosting-wcf-service-in-windows-azure-and-consuming-in-window-7-phone-app/)

另外，我建议 WCF REST 并返回 JSON，例如：

[http://www.c-sharpcorner.com/UploadFile/dhananjaycoder/how-to-consume-wcf-rest-service-returning-json-in-windows-ph/](http://www.c-sharpcorner.com/UploadFile/dhananjaycoder/how-to-consume-wcf-rest-service-returning-json-in-windows-ph/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:50:30.687

这看起来像实体框架问题。最可能的原因是 festDBEntities 类不包含名为 User 的属性（也许它被命名为 Users？）。请先检查您的对象模型。根据我的经验，您还可以编写 LINQ 查询而不是对象查询。LINQ 查询是强类型的，可以帮助我们在编译时去除此类错误。

此外，还请在标签中添加实体框架，以便更多实体框架专家参与此线程以提供进一步的建议。

此致，

明旭。

# apache - 限制通过 .htaccess 直接访问文件夹，除非通过特定链接

> ID：10233971
> 
> 赞同：1
> 
> 时间：2012-04-19T17:58:14.937
> 
> 标签：apache, .htaccess, restrict

我想限制对我服务器上文件夹的访问，以便访问者只能通过同一域中的链接访问内容（Web 应用程序）。我可以使用 .htaccess 执行此操作吗？需要明确的是，我只是想阻止直接访问内容，以便访问者通过我网站上的其他页面进行路由以到达那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:46:58.580

听起来你想要 URL 重写。重写所有 URL 以指向单个入口点（即索引页面），并将路由设置为 GET 变量（即`index.php?r=css/file.css`）。

这样，您就可以完全控制去往何处，并且可以`include`相应地重定向您的用户。

# objective-c - Objective-C - UIControlEventTouchUpInside 没有被解雇？

> ID：10233986
> 
> 赞同：0
> 
> 时间：2012-04-19T17:58:37.463
> 
> 标签：objective-c, uibutton

我正在创建一个动画 UIButton 来模拟插页式横幅，但它没有收到事件 UIControlEventTouchUpInside。这是我的代码：

```
-(void)insertInterstitialBannerAtView:(UIView *)mainView {
    if ([self bannerExists]) {
        bannerButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [bannerButton setFrame:CGRectMake(0, 480, 320, 43)];
        [bannerButton setImage:[UIImage imageNamed:@"389.png"] forState:UIControlStateNormal];
        [bannerButton setEnabled:YES];
        [mainView addSubview:bannerButton];
        [mainView bringSubviewToFront:bannerButton];
        [bannerButton addTarget:self 
                         action:@selector(buttonPushed) 
               forControlEvents:UIControlEventTouchUpInside];

        [UIView animateWithDuration:2.0 
                         animations:^(void) {
                             [bannerButton setFrame:CGRectMake(0, 417, 320, 43)];
                         } 
                         completion:^(BOOL finished) {
                             [UIView animateWithDuration:2.0 delay:3.0 options:UIViewAnimationTransitionNone animations:^(void){
                                 [bannerButton setFrame:CGRectMake(0, 480, 320, 43)];
                         } 
                                          completion:^(BOOL finished) {

                                          }];
        }];
    }
}

-(IBAction)buttonPushed{
    NSLog(@"Interstitial Pushed");
}

-(BOOL)bannerExists{
    BOOL returnValue = FALSE;
    NSArray *names = [URLFORSPLASH componentsSeparatedByString:@"/"];
    NSString *fileName = [names lastObject];
    NSString *cacheFolder = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];
    NSString *filePath = [cacheFolder stringByAppendingPathComponent:fileName];
    if ([[NSFileManager defaultManager]fileExistsAtPath:filePath] ) {
        returnValue = TRUE;
    }
    return returnValue;
} 
```

有人知道出了什么问题吗？

问候，克劳迪奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:12:17.157

ios 在动画期间禁用交互。从 UIView 文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW111](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW111)

“在动画过程中，动画视图的用户交互被暂时禁用。（在 iOS 5 之前，整个应用程序的用户交互被禁用。）”

If you're targeting ios 5, you might be able to get away with intercepting touches in the parent view and then checking to see if they're where the animation is/was when the touch was intercepted.

# asp.net-mvc-3 - 在 MVC 3 中设置绝对 Uri

> ID：10233987
> 
> 赞同：0
> 
> 时间：2012-04-19T17:58:40.693
> 
> 标签：asp.net-mvc-3, url, routing

单击操作链接后，是否可以在控制器中设置 absoluteURI？例如：

用户单击名为“GoHere”的链接。当前 URL 是 domain.com/section/place。当链接点击控制器中的方法时，它会识别出用户当前位于名为“section”的部分中，即使在文件结构中部分不存在。链接本身实际上指向 domain.com/place2。它不是返回 domain.com/place2 的 URL，而是返回 domain.com/section/place2。

我问的原因是因为对于我正在做的事情，该部分是完全任意的并且不存在。它只是为了给人一种用户在另一个部分的印象。我知道我可以创建额外的控制器组，但我正在尝试解决这个问题，因为出于管理目的，如果我只有一组控制器会更好。这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:06:35.470

在您的 gobal.asax 中，尝试将您的路线设置为控件的要求部分。也许“{control}/section/{action}/”和你需要的任何其他东西。

# facebook - channel.html 语言环境是否必须与最初包含的 all.js 相匹配？

> ID：10233990
> 
> 赞同：0
> 
> 时间：2012-04-19T17:58:46.807
> 
> 标签：facebook, facebook-javascript-sdk

现在我的`channel.html`文件如下所示：

```
<?php
require_once __DIR__ . '/ay/includes/config.inc.php';

session_set_cookie_params(7200, '/' . AY_PROJECT_ID . '/', 'dev.anuary.com', FALSE, FALSE);

session_start();

$cache_expire   = 60*60*24*365;
header("Pragma: public");
header("Cache-Control: max-age=" . $cache_expire);
header('Expires: ' . gmdate('D, d M Y H:i:s', time() + $cache_expire) . ' GMT');
?>
<script src="//connect.facebook.net/<?=$_SESSION['ay']['fb']['user']['locale']?>/all.js"></script> 
```

我想将其简化为纯 HTML 文件服务：

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

现在，使用以下方法包含原件`all.js`：

```
(function(d){
    var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = 'https://connect.facebook.net/' + ay.locale + '/all.js';

    d.getElementsByTagName('head')[0].appendChild(js);
}(document)); 
```

`ay.locale`是根据签名请求更改的变量。这有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:06:07.420

对 JS SDK 进行硬编码应该是“安全的”，只要它仍然是 Facebook 托管的版本。不同的语言环境不太可能不同步，不同文件之间的唯一区别是面向用户的字符串。

**但是，我强烈建议使用相同的 URL**而不是硬编码一个语言环境。这样做的原因是，如果您使用两个不同的 URL，浏览器可能需要两次下载 SDK。该库很大，因此可能会造成严重的用户体验问题。

当然，如果用户经常浏览其他使用 en_US SDK 和自己语言环境版本的网站，这种情况发生的可能性较小。如果文件被缓存，这将不是问题。

# http - 哪个 HTTP 工具更准确？

> ID：10233997
> 
> 赞同：0
> 
> 时间：2012-04-19T17:59:25.903
> 
> 标签：http, header, gzip

我尝试使用 mod_deflate 进行压缩，我的主机是 gkg.net。我使用不同的 HTTP 标头工具测试我的网站，以确定是否打开了压缩。

我在 Chrome 页面速度、Firefox Firebug 和实时 HTTP 标头附加 Firefox 的响应标头数据中看不到“content-encoding:gzip”。但是，一些工具显示它的工作方式如下：[http](http://web-sniffer.net/) : //web-sniffer.net/ 和 pingdom。

gkg.net 的支持人员说启用了压缩并且我的网站是 gzip 压缩的。我的测试网址是： http: [//mavitasarim.net/TEST6/index.html](http://mavitasarim.net/TEST6/index.html)

我有两个问题：

1.  我的测试网址真的被压缩了吗？
2.  哪些工具的结果更准确，或者为什么不同工具的输出之间存在差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:05:43.627

用户代理和 Web 服务器协商内容编码。如果用户代理列出接受 gzip 编码，则 Web 服务器只能使用 gzip 编码。如果用户代理没有列出 gzip 支持，那么 Web 服务器将不会压缩页面。

当我在 Chrome 中加载您的页面时，我的浏览器发送了此标头：

```
Accept-Encoding: gzip,deflate,sdch 
```

你的网络服务器发送了这个响应头，表明页面确实被压缩了：

```
Content-Encoding: gzip 
```

# visual-studio-2008 - VS 2008 文本可视化器出现损坏

> ID：10233999
> 
> 赞同：0
> 
> 时间：2012-04-19T17:59:28.680
> 
> 标签：visual-studio-2008, windows-7, windows-ce, visual-studio-debugging

我正在调试 MC75A 设备的应用程序。早些时候，我能够使用文本可视化工具来捕获跟踪 Web 服务调用的 StringBuilder 的内容。内容最初在应用程序启动或重新启动时被截断（如果 (trace.Length > 0) trace.Length = 0;）。每次调用 Web 服务时，都会将 XML 输入和 XML 输出附加到 StringBuilder 的内容中。

直到最近，VS 2008 调试器的文本可视化器运行良好。我会将 StringBuilder 的内容捕获为文本，将内容复制到剪贴板，然后将内容粘贴到 VS 2008 粘贴时格式化的 XML 文件中。现在，只要我单击调试器下拉菜单中的文本可视化工具，VS 2008 就会停止交互，需要任务管理器终止 VS 2008。

我不确定发生了什么变化或可能导致这种行为的条件。任何想法将不胜感激。

格斯

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-28T18:46:04.760

我不确定为什么，但 Visual Studio 2008 现在按预期工作。