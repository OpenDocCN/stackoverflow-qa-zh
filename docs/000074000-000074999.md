# StackOverflow 问答 000074000-000074999

# oracle - Oracle中的显式游标和隐式游标有什么区别？

> ID：74010
> 
> 赞同：28
> 
> 时间：2008-09-16T16:06:52.083
> 
> 标签：oracle, plsql

我对 PL/SQL 中的光标术语有点生疏。有人知道吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2008-09-16T19:47:35.797

隐式游标是 Oracle 在您执行查询时“自动”为您创建的游标。编码更简单，但存在以下问题

*   效率低下（ANSI 标准规定它必须提取两次以检查是否有多个记录）
*   数据错误漏洞（如果你得到两行，它会引发一个 TOO_MANY_ROWS 异常）

例子

```
SELECT col INTO var FROM table WHERE something; 
```

显式游标是您自己创建的游标。它需要更多的代码，但提供了更多的控制权——例如，如果你只想要第一条记录而不关心是否还有其他记录，你可以打开-获取-关闭。

例子

```
DECLARE   
  CURSOR cur IS SELECT col FROM table WHERE something; 
BEGIN
  OPEN cur;
  FETCH cur INTO var;
  CLOSE cur;
END; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-09-16T16:18:07.953

显式游标在声明块中定义如下：

```
DECLARE 
CURSOR cur IS 
  SELECT columns FROM table WHERE condition;
BEGIN
... 
```

隐式游标直接在代码块中实现：

```
...
BEGIN
   SELECT columns INTO variables FROM table where condition;
END;
... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T16:13:56.000

显式游标是您声明的游标，例如：

```
CURSOR my_cursor IS
  SELECT table_name FROM USER_TABLES 
```

隐式游标是为支持您编写的任何内联 SQL（静态或动态）而创建的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-05-13T09:32:22.197

在回答第一个问题。直接来自 Oracle[文档](http://download.oracle.com/docs/cd/E11882_01/appdev.112/e10472/static.htm#LNPLS00602)

> 游标是指向私有 SQL 区域的指针，该区域存储有关处理特定 SELECT 或 DML 语句的信息。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-02-13T09:27:59.203

1.CURSOR：当PLSQL发出sql语句时，它会创建私有工作区来解析和执行sql语句，称为游标。

2.IMPLICIT：当任何PL/SQL可执行块发出sql语句时。PL/SQL 创建隐式游标并自动管理意味着隐式打开和关闭发生。当sql语句只返回一行时使用。它有4个属性SQL%ROWCOUNT、SQL%FOUND、SQL%NOTFOUND、SQL%ISOPEN。

3.EXPLICIT：由程序员创建和管理。它每次都需要显式打开、获取和关闭。当 sql 语句返回多于一行时使用它。它还有 4 个属性 CUR_NAME%ROWCOUNT、CUR_NAME%FOUND、CUR_NAME%NOTFOUND、CUR_NAME%ISOPEN。它使用循环处理几行。程序员也可以将参数传递给显式游标。

*   示例：显式光标

```
declare 
   cursor emp_cursor 
   is 
   select id,name,salary,dept_id 
   from employees; 
   v_id employees.id%type; 
   v_name employees.name%type; 
   v_salary employees.salary%type; 
   v_dept_id employees.dept_id%type; 
   begin 
   open emp_cursor; 
   loop 
   fetch emp_cursor into v_id,v_name,v_salary,v_dept_id; 
   exit when emp_cursor%notfound;
   dbms_output.put_line(v_id||', '||v_name||', '||v_salary||','||v_dept_id); 
   end loop;                    
   close emp_cursor; 
   end; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-04T06:59:11.737

隐式游标需要匿名缓冲内存。

显式游标可以通过使用它们的名称一次又一次地执行。它们存储在用户定义的内存空间中，而不是存储在匿名缓冲内存中，因此以后可以轻松访问。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-17T14:46:35.047

如今，隐式游标比显式游标更有效。

[http://www.oracle.com/technology/oramag/oracle/04-sep/o54plsql.html](http://www.oracle.com/technology/oramag/oracle/04-sep/o54plsql.html)

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1205168148688](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1205168148688)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-03-09T08:59:34.277

**从性能的角度来看，隐式游标更快。**

让我们比较显式和隐式游标的性能：

```
SQL> DECLARE
  2    l_loops  NUMBER := 100000;
  3    l_dummy  dual.dummy%TYPE;
  4    l_start  NUMBER;
  5    -- explicit cursor declaration
  6    CURSOR c_dual IS
  7      SELECT dummy
  8      FROM   dual;
  9  BEGIN
 10    l_start := DBMS_UTILITY.get_time;
 11    -- explicitly open, fetch and close the cursor
 12    FOR i IN 1 .. l_loops LOOP
 13      OPEN  c_dual;
 14      FETCH c_dual
 15      INTO  l_dummy;
 16      CLOSE c_dual;
 17    END LOOP;
 18
 19    DBMS_OUTPUT.put_line('Explicit: ' ||
 20                         (DBMS_UTILITY.get_time - l_start) || ' hsecs');
 21
 22    l_start := DBMS_UTILITY.get_time;
 23    -- implicit cursor for loop
 24    FOR i IN 1 .. l_loops LOOP
 25      SELECT dummy
 26      INTO   l_dummy
 27      FROM   dual;
 28    END LOOP;
 29
 30    DBMS_OUTPUT.put_line('Implicit: ' ||
 31                         (DBMS_UTILITY.get_time - l_start) || ' hsecs');
 32  END;
 33  /
Explicit: 332 hsecs
Implicit: 176 hsecs

PL/SQL procedure successfully completed. 
```

因此，明显的差异是显而易见的。隐式游标比显式游标快得多。

更多示例[在这里](http://oracle-base.com/articles/misc/implicit-vs-explicit-cursors-in-oracle-plsql.php)。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T17:08:35.370

使用显式游标，您可以完全控制如何访问数据库中的信息。您决定何时打开游标、何时从游标中获取记录（因此从游标的 SELECT 语句中的一个或多个表中）获取多少记录，以及何时关闭游标。通过检查光标属性可以获得有关光标当前状态的信息。

有关详细信息，请参见[http://www.unix.com.ua/orelly/oracle/prog2/ch06_03.htm](http://www.unix.com.ua/orelly/oracle/prog2/ch06_03.htm)。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-05-13T05:13:38.680

谷歌是你的朋友： [http ://docstore.mik.ua/orelly/oracle/prog2/ch06_03.htm](http://docstore.mik.ua/orelly/oracle/prog2/ch06_03.htm)

> 每当您直接在代码中执行 SQL 语句时，只要该代码不使用显式游标，PL/SQL 就会发出隐式游标。它被称为“隐式”游标，因为开发人员没有为 SQL 语句显式声明游标。
> 
> 显式游标是在代码的声明部分中显式定义的 SELECT 语句，并在此过程中分配了一个名称。没有用于 UPDATE、DELETE 和 INSERT 语句的显式游标。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-05-14T09:51:14.447

游标是 Oracle 表上的一个 SELECTed 窗口，这意味着 Oracle 表中存在一组记录，并且满足某些条件。游标也可以选择表的所有内容。使用游标，您可以操作 Oracle 列，在结果中为它们设置别名。隐式游标的示例如下：

```
BEGIN
   DECLARE
      CURSOR C1
      IS
         SELECT DROPPED_CALLS FROM ALARM_UMTS;

      C1_REC   C1%ROWTYPE;
   BEGIN
      FOR C1_REC IN C1
      LOOP
         DBMS_OUTPUT.PUT_LINE ('DROPPED CALLS: ' || C1_REC.DROPPED_CALLS);
      END LOOP;
   END;
END;
/ 
```

使用 FOR ... LOOP... END LOOP 当游标的记录全部分析完毕后，您可以自动打开和关闭游标。

显式游标的示例如下：

```
BEGIN
   DECLARE
      CURSOR C1
      IS
         SELECT DROPPED_CALLS FROM ALARM_UMTS;

      C1_REC   C1%ROWTYPE;
   BEGIN
      OPEN c1;

      LOOP
         FETCH c1 INTO c1_rec;

         EXIT WHEN c1%NOTFOUND;

         DBMS_OUTPUT.PUT_LINE ('DROPPED CALLS: ' || C1_REC.DROPPED_CALLS);
      END LOOP;

      CLOSE c1;
   END;
END;
/ 
```

在显式游标中，您以显式方式打开和关闭游标，检查记录的存在并声明退出条件。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-06-29T05:59:49.697

隐式游标只返回一条记录并自动调用。但是，显式游标是手动调用的，可以返回多条记录。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-11-16T17:50:41.037

如其他答案所述，隐式游标更易于使用且不易出错。

[Oracle PL/SQL 中的隐式游标与显式游标](https://oracle-base.com/articles/misc/implicit-vs-explicit-cursors-in-oracle-plsql)表明隐式游标也比显式游标快两倍。

奇怪的是还没有人提到[隐式 FOR LOOP 光标](https://docs.oracle.com/cloud/latest/db112/LNPLS/cursor_for_loop_statement.htm#LNPLS1155)：

```
begin
  for cur in (
    select t.id from parent_trx pt inner join trx t on pt.nested_id = t.id
    where t.started_at > sysdate - 31 and t.finished_at is null and t.extended_code is null
  )
  loop
    update trx set finished_at=sysdate, extended_code = -1 where id = cur.id;
    update parent_trx set result_code = -1 where nested_id = cur.id;
  end loop cur;
end; 
```

SO的另一个例子：[PL/SQL FOR LOOP IMPLICIT CURSOR](https://stackoverflow.com/questions/15854749/pl-sql-for-loop-implicit-cursor)。

它比显式形式短得多。

[这也为从 CTE 更新多个表](https://stackoverflow.com/questions/15113086/postgresql-and-oracle-update-multiple-tables-from-common-subquery/47335611#47335611)提供了一个很好的解决方法。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-04-23T14:36:39.950

在 PL/SQL 中，游标是指向该上下文区域的指针。它包含处理语句所需的所有信息。

**隐式游标：** 当 SQL 语句没有显式游标时，Oracle 会自动创建隐式游标。程序员无法控制隐式游标及其中的信息。

**显式游标：** 显式游标是程序员定义的游标，用于获得对上下文区域的更多控制。应在 PL/SQL 块的声明部分中定义显式游标。它是在返回多行的 SELECT 语句上创建的。

创建显式游标的语法是：

```
CURSOR cursor_name IS select_statement; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-17T00:56:37.163

Oracle 数据库执行的每条 SQL 语句都有一个与之关联的游标，游标是存储处理信息的私有工作区。Oracle 服务器为所有 DML 和 SELECT 语句隐式创建隐式游标。

您可以声明和使用显式游标来命名私有工作区，并访问其在程序块中存储的信息。

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2008-09-17T05:20:39.650

明确...

光标 foo 是 select * from blah; 关闭光标时开始打开获取退出 yada yada yada

不要使用它们，使用隐式

光标 foo 是 select * from blah;

for n in foo 循环 x = n.some_column 结束循环

我认为你甚至可以做到这一点

for n in (select * from blah) 循环...

坚持含蓄，它们封闭自己，它们更具可读性，它们让生活变得轻松。

# c# - 在 asp.net 中为动态 PDF 指定文件名

> ID：74019
> 
> 赞同：36
> 
> 时间：2008-09-16T16:07:47.043
> 
> 标签：c#, asp.net, response

将数据转储到响应流中时如何指定文件名？

现在我正在做以下事情：

```
byte[] data= GetFoo();
Response.Clear();
Response.Buffer = true;
Response.ContentType = "application/pdf";            
Response.BinaryWrite(data);
Response.End(); 
```

使用上面的代码，我得到“foo.aspx.pdf”作为要保存的文件名。我似乎记得能够在响应中添加标头以指定要保存的文件名。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-09-16T16:10:34.540

向标题添加内容处置：

```
Response.AddHeader("content-disposition", @"attachment;filename=""MyFile.pdf"""); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-15T21:21:47.703

仅供参考...如果您使用“内联”而不是“附件”，该文件将在 IE 中自动打开。而不是通过打开/保存对话框提示用户。

```
Response.AppendHeader("content-disposition", string.Format("inline;FileName=\"{0}\"", fileName)); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-09-16T16:10:04.213

```
Response.AppendHeader("Content-Disposition", "attachment; filename=foo.pdf"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-22T05:32:49.443

出于某种原因，那里的大多数答案似乎都没有尝试对文件名值进行编码。如果文件包含空格、分号或引号，则可能无法正确识别。

看起来您可以使用[`ContentDisposition`](http://msdn.microsoft.com/library/system.net.mime.contentdisposition.aspx)该类生成正确的标头值：

```
Response.AppendHeader("Content-Disposition", new ContentDisposition
{
    FileName = yourFilename
}.ToString()); 
```

您可以查看[源代码`ContentDisposition.ToString()`](http://referencesource.microsoft.com/System/net/System/Net/mail/ContentDisposition.cs.html#234ee68565525ad0)以确认它正在尝试对其进行正确编码。

**警告**：当文件名包含破折号（不是连字符）时，这似乎会崩溃。我还没有费心去研究这个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T16:11:32.807

```
 Response.AddHeader("Content-Disposition", "attachment;filename=" & FileName & ";") 
```

# c# - 使用 IEqualityComparer 的推荐最佳实践是什么 ?

> ID：74032
> 
> 赞同：10
> 
> 时间：2008-09-16T16:08:36.497
> 
> 标签：c#, comparison

我正在寻找现实世界的最佳实践，其他人可能如何实施具有复杂领域的解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-10-08T03:12:59.213

每当您考虑使用 时`IEqualityComparer<T>`，请停下来考虑是否可以改为实现该类`IEquatable<T>`。如果 a`Product`应始终按 ID 进行比较，只需将其定义为等同，以便您可以使用默认比较器。

也就是说，您可能仍然需要自定义比较器的几个原因：

1.  如果有多种方式可以认为一个类的实例是相等的。最好的例子是一个字符串，框架在[`StringComparer`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.aspx).
2.  如果该类的定义方式无法将其定义为`IEquatable<T>`. 这将包括其他人定义的类和编译器生成的类（特别是匿名类型，默认情况下使用属性比较）。

如果您确实决定需要一个比较器，您当然可以使用一个通用比较器（请参阅 DMeT 的答案），但如果您需要重用该逻辑，您应该将其封装在一个专用类中。您甚至可以通过从通用基础继承来声明它：

```
class ProductByIdComparer : GenericEqualityComparer<ShopByProduct>
{
    public ProductByIdComparer()
        : base((x, y) => x.ProductId == y.ProductId, z => z.ProductId)
    { }
} 
```

就使用而言，您应该尽可能利用比较器。例如，与其调用`ToLower()`用作字典键的每个字符串（其逻辑将散布在您的应用程序中），不如将字典声明为不区分大小写`StringComparer`。接受比较器的 LINQ 运算符也是如此。但同样，始终考虑是否应该是类固有的行为而不是外部定义的平等行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-10T19:36:03.787

我做了以下，我不确定这是否是现实世界的最佳实践，但它对我来说很好。:)

```
public class GenericEqualityComparer<T> : IEqualityComparer<T>
{
    private Func<T, T, Boolean> _comparer;
    private Func<T, int> _hashCodeEvaluator;
    public GenericEqualityComparer(Func<T, T, Boolean> comparer)
    {
        _comparer = comparer;
    }

    public GenericEqualityComparer(Func<T, T, Boolean> comparer, Func<T, int> hashCodeEvaluator)
    {
        _comparer = comparer;
        _hashCodeEvaluator = hashCodeEvaluator;
    }

    #region IEqualityComparer<T> Members

    public bool Equals(T x, T y)
    {
        return _comparer(x, y);
    }

    public int GetHashCode(T obj)
    {
        if(obj == null) {
            throw new ArgumentNullException("obj");
        }
        if(_hashCodeEvaluator == null) {
            return 0;
        } 
        return _hashCodeEvaluator(obj);
    }

    #endregion
} 
```

然后你可以在你的收藏中使用它。

```
var comparer = new GenericEqualityComparer<ShopByProduct>((x, y) => x.ProductId == y.ProductId);
var current = SelectAll().Where(p => p.ShopByGroup == group).ToList();
var toDelete = current.Except(products, comparer);
var toAdd = products.Except(current, comparer); 
```

如果您需要支持自定义 GetHashCode() 功能，请使用替代构造函数提供 lambda 来进行替代计算：

```
var comparer = new GenericEqualityComparer<ShopByProduct>(
       (x, y) => { return x.ProductId == y.ProductId; }, 
       (x)    => { return x.Product.GetHashCode()}
); 
```

我希望这有帮助。=)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-01-13T11:22:24.993

有关（更好的）替代方案，请参阅此帖子：[将委托包装在 IEqualityComparer 中](https://stackoverflow.com/questions/98033/wrap-a-delegate-in-an-iequalitycomparer)

向下滚动到[KeyEqualityComparer](https://stackoverflow.com/questions/98033/wrap-a-delegate-in-an-iequalitycomparer/1239337#1239337)的部分，尤其是[GetHashCode 的重要性](https://stackoverflow.com/questions/98033/wrap-a-delegate-in-an-iequalitycomparer/3719802#3719802)部分。关于为什么（如 D MenT 的帖子所建议的）错误的原因有一个完整的[讨论](https://stackoverflow.com/questions/98033/wrap-a-delegate-in-an-iequalitycomparer/3719617#3719617)`obj.GetHashCode();`，应该只返回 0。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T16:11:59.250

这就是[MSDN](http://msdn.microsoft.com/en-us/library/system.collections.iequalitycomparer.aspx)关于 IEqualityComparer（非泛型）的说法：

> 此接口允许为集合实现自定义的相等比较。也就是说，您可以创建自己的相等定义，并指定此定义与接受`IEqualityComparer`接口的集合类型一起使用。在 .NET Framework 中`Hashtable`，`NameValueCollection`、 和`OrderedDictionary`集合类型的构造函数接受此接口。
> 
> 此接口仅支持相等比较。`IComparer`界面提供了排序和排序比较的自定义。

看起来此接口的通用版本执行相同的功能，但用于`Dictionary<(Of <(TKey, TValue>)>)`集合。

至于为您自己的目的使用此界面的最佳实践。我想说最好的做法是在派生或实现与上述 .NET 框架集合具有相似功能的类并且想要将相同功能添加到自己的集合时使用它。这将确保您与 .NET 框架使用接口的方式保持一致。

换句话说，如果您正在开发自定义集合并且希望允许您的消费者控制在许多 LINQ 和集合相关方法（例如，排序）中使用的相等性，则支持使用此接口。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T16:14:39.867

我会说最好的用途是当您需要为某个算法插入不同的相等规则时。与排序算法可能接受 的方式非常相似`IComparer<T>`，查找算法也可能接受`IEqualityComparer<T>`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T16:17:07.007

该列表经常使用此接口，因此您可以说 a.Substract(b) 或其他这些不错的函数。

请记住：如果您的对象不返回相同的 Hashcode，则不会调用 Equals。

# javascript - 最好的轻量级 JavaScript 框架是什么？

> ID：74048
> 
> 赞同：18
> 
> 时间：2008-09-16T16:10:24.337
> 
> 标签：javascript, frameworks

我正在寻找一个轻量级的 JavaScript 框架，其主要目的是抽象出浏览器的差异。我主要使用它来创建新的 UI 元素，除了可以为我提供独立于平台的语言和 DOM 的东西之外，我不需要太多东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-16T16:29:28.363

我目前使用 3 个 JS 库：[Prototype](http://prototypejs.org/)、[jQuery](http://jquery.com/)和[MooTools](http://mootools.net)。Prototype 和 jQuery 是使用最广泛的。jQuery 和 MooTools 是最轻量级的。

MooTools 在他们的网站上有一个很好的功能，它允许您构建一个自定义的压缩 .js 文件，其中只包含您需要的模块，根据您正在做的事情，制作最轻的。jQuery 拥有更高的粉丝群，并因此获得更好的支持。

在这 3 个中，我推荐 jQuery，但看看所有可用的选项可能不是一个坏主意。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T16:12:14.210

我使用 jQuery - 它既简单又小巧，最重要的是：非常简单 :)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T16:21:34.077

另请参阅问题[您会为新项目选择什么 JavaScript 库以及为什么？](https://stackoverflow.com/questions/913/what-javascript-library-would-you-choose-for-a-new-project-and-why#917)

似乎[jQuery](http://jquery.com/)最近一直在增长。（见[本演示文稿](http://www.slideshare.net/jeresig/building-a-javascript-library/)，幻灯片 4）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-16T17:14:26.617

[mooTools](http://mootools.net/)也是我的最爱。他们的界面让您可以随心所欲地使用，因此，如果您想在您的工具包中添加更多技巧，这很容易做到。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-16T16:11:48.250

[我是雅虎](http://developer.yahoo.com/yui/)的忠实粉丝！[用户界面 (YUI)](http://developer.yahoo.com/yui/)库。它有一套很好的 DOM 操作工具，以及一个非常可靠的小部件框架。另外，您可以混合搭配您想要使用的东西。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T16:12:13.430

尝试[DOMAssistant](http://www.domassistant.com/)。它压缩后只有 7 KB，速度非常快，并且支持 Unicode。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-16T16:14:13.190

我更喜欢 JQuery。它也有很好的文档。[jQuery](http://jquery.com)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-16T16:22:04.433

我也喜欢[jQuery](http://jquery.com/)，因为它具有强大的选择器功能“$”，并希望提供指向替代文档的链接：[Visual jQuery](http://visualjquery.com/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T17:10:18.483

这是一个比较图表，我用来帮助评估那里的一些不同的库。

[Javascript 框架](http://en.wikipedia.org/wiki/Comparison_of_JavaScript_frameworks)

它绝不会列出每个库的所有功能，而是为您提供一个很好的概述，以缩小您应该进一步挖掘哪些框架的选择范围，看看它是否满足您的需求。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T17:39:38.883

我先尝试了[原型](http://prototype.org)和[脚本](http://script.aculo.us)，但后来切换到[jquery](http://www.jquery.com)并且没有回头。如果你想要漂亮的用户界面，那么 YUI 很好，但在我看来 jQuery 很简单。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-16T16:12:08.250

就个人而言，当我在做客户端工作时，我爱上了 15k 版本的 JQuery。有一个轻微的学习曲线，但它非常非常光滑。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T16:12:29.030

您可以打包任何 JavaScript 代码以使其更轻量级，所以问题可能归结为您更喜欢哪个？我选择[Prototype](http://en.wikipedia.org/wiki/Prototype_JavaScript_Framework) - 有一个名为 protopacked 的可用版本，我认为它的大小约为 20 KB。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-16T16:20:03.987

MooTools 很火。这些天它变得有点大了（基数是 60 KB），所以这可能超出你的能力范围。

但是如果你真的只是在追求基本的 DOM，那么 jQuery 可能是理想的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-16T16:23:22.480

我非常广泛地使用[原型。](http://en.wikipedia.org/wiki/Prototype_JavaScript_Framework)默认包为 28 KB，而 jQuery 为 90ish*。

[http://www.prototypejs.org](http://www.prototypejs.org)

*未压缩

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-16T17:07:59.003

在这里再次为 jQuery 投票。快速、轻便，而且你学得越多，你的代码就会越快、越简洁。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-16T17:14:15.230

jQuery 非常流畅并且非常容易学习。我过去曾使用 Moo 进行一些基本的 DOM 操作。它占用的空间更少，但功能更少。您的最佳选择绝对取决于您的要求。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-09-16T17:20:04.827

基本的 YUI 代码 -- [yahoo-dom-event.js](http://yui.yahooapis.com/combo?2.5.2/build/yahoo-dom-event/yahoo-dom-event.js) -- 是 31KB 并且运行良好。您可以获得各种不错的[事件处理](http://developer.yahoo.com/yui/event/)和[DOM 操作](http://developer.yahoo.com/yui/dom/)，并且在您需要时很容易添加更复杂（更重）的东西。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-09-16T17:21:53.900

只是一个建议，但我会在合理的范围内寻找一个具有您想要的功能并且不必太担心大小的框架。大多数现代框架，如 PrototypeJS 或 JQuery 并没有那么大，并且具有最小化的版本（删除了空格等）。此外，您应该将您的站点配置为缓存这些库。用户需要下载该库的唯一时间是第一次访问，或者清除浏览器缓存后的任何访问。

命名库文件时，请确保使用唯一的文件名。例如，根据库的版本命名您的库。当您需要升级到新版本的库时，只需从相关页面中引用新的文件名（版本）即可。这将允许您在没有短期到期日期的情况下缓存这些文件。

您可以使用许多其他缓存技术来绕过库文件大小并提高性能。我推荐“高性能网站”，ISBN：0596529309。虽然书中的所有信息都可以在网上找到，但这本书很好地在一个地方收集了你需要的信息，并将各种概念结合在一起（我有对本书没有经济利益）。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-09-16T17:23:59.450

无论您选择什么，都可以考虑让 Google 为您托管：

[http://code.google.com/apis/ajaxlibs/](http://code.google.com/apis/ajaxlibs/)

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-09-16T17:23:59.700

这个问题真的是[这个问题](https://stackoverflow.com/questions/68114/what-is-the-single-most-useful-general-purpose-javascript-library-for-rich-inte#68147)的重复（我认为）。我对这个问题的回答如下（也适用于这里）：

你会在这里得到一百万个答案。简短的是：有几个，而不是一个。它们在某些方面都不同，而在其他方面则相似，而且总的来说，它们都不是糟糕的选择。我推荐的主要框架是（按字母顺序，以免显示任何偏见）：

```
* Dojo
* jQuery
* MooTools
* Prototype (with Scriptaculous)
* YUI
* MochiKit 
```

它们中的每一个都有不同的风格、不同的社区和不同的侧重点。您应该选择哪一个主要取决于将这些框架的风格与您自己的风格相匹配。花一些时间阅读每个教程和演示，然后选择对您最有意义的一个。

作为免责声明，我将指出我是 MooTools 的开发人员，并写了一本关于如何使用它的书。我不会说 MooTools 比其他任何框架都好。只有不同。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-16T16:18:31.930

我推荐[MooTools](http://www.mootools.net) :-)

```
var theDiv = new Element('div', {
    'id': 'theDiv',
    'styles': {
        'backgroundColor': '#BF1942',
        'color': '#fff'
    }
}).toggleClass('someClass').inject($('someSibling', 'after'); 
```

我真的很喜欢它的代码的可读性。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-16T16:40:38.243

我已经推出自己的多年，但与其他人一起玩时远离dojo + jquery。关于 mootools（我见过的最好的 js ani）+ gui 或 yui 工具包的组合，我无话可说

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-09-16T16:54:11.487

我同意 JQuery 是轻量级、可扩展、强大的选项。我的公司目前正在使用 Extjs，它对于我们正在做的事情来说是庞大且复杂的。如果您需要创建一个没有设计师参与的快速网站（它带有用于创建您需要的任何东西的所有图形和样式），Extjs 非常棒，但它大约 6MB 并且最终使简单的任务变得更加繁琐:)

如果我可以全部完成，这可能会发生，我会使用 JQuery。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-16T16:55:52.653

Jquery 放手....

加上它很受欢迎，所以你知道它会在附近

[Web 开发者趋势](http://www.thespanner.co.uk/2007/07/16/web-development-trends-estimation/)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-09-16T17:01:16.620

[midori](http://www.midorijs.com)是一个轻量级的 JavaScript 框架（只有 45K 未压缩）。它支持大多数 CSS2 和 CSS3 选择器来访问 DOM 元素，并且不需要您学习全新的 API。除了标准的 DOM、事件和 Ajax 功能之外，它还支持基本的视觉效果、拖放、弹出菜单和自动完成等功能。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-09-16T17:02:41.653

jQuery 非常好。

如果我们可以将我们的框架添加到此处建议的框架列表中，并允许其他人对他们最喜欢或使用的框架进行投票 - 即动态投票/调查，那将是非常酷的。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-16T17:23:35.830

我喜欢[jQuery](http://jquery.com/)，因为它轻量级但功能强大。

还有出色的[文档](http://docs.jquery.com/Main_Page)和[教程](http://docs.jquery.com/Tutorials)可以帮助您入门。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-17T01:43:29.343

YUI 对于我的口味来说太大太复杂了。我曾经是一个 Prototype fanboi，但当我开始在新项目中使用 jQuery 时，它对我来说失去了光彩。我喜欢 jQuery 的地方在于一致的心智模型：找到一些东西，然后采取行动。

我非常喜欢 jQuery，因此我构建了一个 Dashboard 小部件用于离线访问文档：[jQuery Reference Widget](http://code.google.com/p/jquery-reference/)

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2010-05-05T17:45:43.907

如果您正在做一些小改进，jQuery 是您的最佳选择，因为它是使用最广泛的框架，并且您会从其他用户那里获得大量反馈。但是，我自己不是 jQuery 用户，因为我已经使用[Ext](http://en.wikipedia.org/wiki/Ext_%28JavaScript_library%29)开发 RIA 。因此，我使用 Ext-core（Ext 的一个子集），因为该框架具有更好的 OO 设计，并且它提供了与 jQuery 相同的基本功能（事件处理、DOM 操作、Ajax）。

[http://www.extjs.com/products/core/](http://www.extjs.com/products/core/)

我从未使用过 Prototype，因为它们会增加`Object.prototype`导致我们代码中的错误。

# sql - 是否可以在 Hibernate 中使用分析函数？

> ID：74057
> 
> 赞同：15
> 
> 时间：2008-09-16T16:11:16.020
> 
> 标签：sql, hibernate

有没有办法在 Hibernate 中使用类似 sql-server 的分析函数？

就像是

```
select foo from Foo foo where f.x = max(f.x) over (partition by f.y) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-16T18:13:00.877

您正在执行本机 SQL 查询。

如果您使用 JPA，则语法为：

```
Query q = em.createNativeQuery("select foo.* from Foo foo " +
                               "where f.x = max(f.x) over " +
                               "(partition by f.y)", Foo.class); 
```

如果需要返回多种类型，请查看[SQLResultSetMapping](http://java.sun.com/javaee/5/docs/api/javax/persistence/SqlResultSetMapping.html)注解。

如果您直接使用 Hibernate API：

```
Query q = session.createSQLQuery("select {foo.*} from Foo foo " +
                                 "where f.x = max(f.x) over "+
                                 "(partition by f.y)");
q.addEntity("foo", Foo.class); 
```

见[10.4.4。](http://www.hibernate.org/hib_docs/v3/reference/en/html/objectstate.html#objectstate-querying-nativesql)有关更多详细信息，请参阅 Hibernate 文档[中的本机 SQL 查询。](http://www.hibernate.org/hib_docs/v3/reference/en/html/objectstate.html#objectstate-querying-nativesql)

在这两个 API 中，您都可以使用 setParameter 正常传递参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-01-08T13:22:08.523

另一种方法是使用映射。请看这篇文章：[https ://forums.hibernate.org/viewtopic.php?f=1&t=998482](https://forums.hibernate.org/viewtopic.php?f=1&t=998482)

我反对在 Hibernate 中使用本机 SQL 查询......你失去了拥有映射的好处:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-07T22:23:39.727

是的，你可以，但你需要像下面这样扩展休眠方言：

导入 org.hibernate.dialect.Oracle10gDialect；

```
public class ExtendedDialect extends Oracle10gDialect{
    public ExtendedDialect()
    {
           super();
           registerKeyword("over");
           registerKeyword("partition");
    }
} 
```

一旦这个类在你的类路径中，你需要告诉 hibernate 使用它而不是原来的方言（在这个例子中是 Oracle10gDialect）。我不确定您使用的是哪些框架，但对于 Spring，您可以使用 LocalContainerEntityManagerFactoryBean 下的以下属性：

```
 <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="databasePlatform" value="path.to.dialect.ExtendedDialect" />
            </bean>
        </property> 
```

然后你可以在@Formula注解、@Where注解和其他hibernate特性中使用over和partition而不会混淆hibernate。

# crystal-reports - 如何检测和打印 CrystalReportViewer 控件中的当前向下钻取？

> ID：74083
> 
> 赞同：2
> 
> 时间：2008-09-16T16:12:35.877
> 
> 标签：crystal-reports

使用 Business Objects 的 CrystalReportViewer 控件时，如何检测并手动打印用户当前钻取的报表？您可以使用 CrystalReportViewer 的 Print() 方法自动打印此报表，但我希望能够手动打印此报表。

可以打印 CrystalReportViewer 的主要 ReportSource，但我需要知道用户钻取了什么报表，然后手动打印该特定钻取。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T05:02:23.827

我不确定您使用的是哪个版本的 Crystal Reports，但如果是 XIR2 或更早版本，那么这是不可能的。我没有用过较新的版本，所以我不能告诉你。过去我为解决此问题所做的一件事是让演练实际上完全链接到另一个报告。然而，这取决于您的查看器如何实际查看报告（通过胖客户端查看器、开发人员或 Web 门户），这是否可行。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-13T17:42:18.753

## 检测：是的！

网页：

```
<CR:CrystalReportViewer ... 
    ondrill="CrystalReportViewer1_Drill" 
    ondrilldownsubreport="CrystalReportViewer1_DrillDownSubreport" /> 
```

后面的代码：

```
 protected void CrystalReportViewer1_Drill(object source, CrystalDecisions.Web.DrillEventArgs e)
 {
  //drill from graph to list of elements
 }
protected void CrystalReportViewer1_DrillDownSubreport(object source, CrystalDecisions.Web.DrillSubreportEventArgs e)
 {
   //drill from main report to subreports
 } 
```

## 打印电流：不！

```
protected void CrystalReportViewer1_DrillDownSubreport(object source, CrystalDecisions.Web.DrillSubreportEventArgs e)
{
    reportDocument.OpenSubreport(e.NewSubreportName).ExportToHttpResponse(format, Response, true, title);
} 
```

导出子报表会引发异常“子报表不允许”。

## 解决方案

CrystalReportsViewer 的按钮也适用于向下钻取...

```
<CR:CrystalReportViewer    HasExportButton="true" .... 
```

# python - 如果对象是任何函数类型，是否有一种常用的方法来检查 Python？

> ID：74092
> 
> 赞同：9
> 
> 时间：2008-09-16T16:13:09.777
> 
> 标签：python, types

我在 Python 中有一个函数，它遍历从 返回的属性`dir(obj)`，我想检查其中包含的任何对象是否是函数、方法、内置函数等。通常你可以使用`callable()`它，但是我不想包括课程。到目前为止，我想出的最好的是：

```
isinstance(obj, (types.BuiltinFunctionType, types.FunctionType, types.MethodType)) 
```

是否有更面向未来的方法来进行此检查？

**编辑：**我之前说错了：“通常你可以用`callable()`这个，但我不想取消课程资格。” 我真的*想*取消课程的资格。我只想匹配函数，而不是类*。*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-16T18:34:03.040

检查模块正是您想要的：

```
inspect.isroutine( obj ) 
```

仅供参考，代码是：

```
def isroutine(object):
    """Return true if the object is any kind of function or method."""
    return (isbuiltin(object)
            or isfunction(object)
            or ismethod(object)
            or ismethoddescriptor(object)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T16:35:51.330

如果要排除类和其他可能有`__call__`方法的随机对象，只检查函数和方法，[`inspect`模块中的这三个函数](http://docs.python.org/lib/module-inspect.html)

```
inspect.isfunction(obj)
inspect.isbuiltin(obj)
inspect.ismethod(obj) 
```

应该以一种面向未来的方式做你想做的事。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T16:18:26.567

```
if hasattr(obj, '__call__'): pass 
```

这也更符合 Python 的“鸭子类型”哲学，因为您并不真正关心它是*什么*，只要您可以调用它。

值得注意的是，`callable()`它正在从 Python 中删除，并且在 3.0 中不存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T18:20:47.287

取决于你所说的“类”：

```
callable( obj ) and not inspect.isclass( obj ) 
```

或者：

```
callable( obj ) and not isinstance( obj, types.ClassType ) 
```

例如，“dict”的结果是不同的：

```
>>> callable( dict ) and not inspect.isclass( dict )
False
>>> callable( dict ) and not isinstance( dict, types.ClassType )
True 
```

# c# - 生成带有白色边框的缩略图

> ID：74100
> 
> 赞同：1
> 
> 时间：2008-09-16T16:13:31.163
> 
> 标签：c#, vb.net, border, thumbnails

我需要从一组需要有一个小的白色边框的 jpg 生成缩略图，以便它们在地图上显示时看起来像“照片”。自己获取缩略图很容易，但我不知道如何获取边框。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T16:20:12.770

这是一个快速破解：

```
public Image AppendBorder(Image original, int borderWidth)
{
    var borderColor = Color.White;

    var newSize = new Size(
        original.Width + borderWidth * 2,
        original.Height + borderWidth * 2);

    var img = new Bitmap(newSize.Width, newSize.Height);
    var g = Graphics.FromImage(img);

    g.Clear(borderColor);
    g.DrawImage(original, new Point(borderWidth, borderWidth));
    g.Dispose();

    return img;
} 
```

它创建一个新`Bitmap`对象，其大小为原始大小加上边框宽度的 2 倍，然后在中间绘制原始图像，然后返回完成的图像。

`Graphics`您也可以使用上面的对象进行大量绘图/绘画。

# visualization - 可视化朋友的朋友（foaf）图

> ID：74108
> 
> 赞同：7
> 
> 时间：2008-09-16T16:14:17.963
> 
> 标签：visualization, rdf, semantic-web, graph-layout, foaf

我写了一个脚本来将 twitter 朋友导出为 foaf rdf 描述。现在我正在寻找一种工具来可视化朋友网络。我试过[http://foafscape.berlios.de/](http://foafscape.berlios.de/)但对于 300 多个节点，它真的很慢，并且在自动格式化方面做得不好。

任何关于良好图形可视化工具的提示？如果他们不直接支持 foaf 也没关系，但他们应该能够将图像用于图形节点并能够显示大图。Linux支持会很好。

哦，我正在寻找一种可以手动移动节点的交互式工具。

**更新：**感谢您的意见。我知道graphviz，对于静态图像，它真的很棒。但是对于大型数据集，我需要能够选择节点并突出显示所有邻居。

*   **Prefuse**看起来很棒： [http ://prefuse.org/gallery/graphview/](http://prefuse.org/gallery/graphview/)
*   通过 prefuse 我找到**了 vizster**，这正是我搜索的内容（只需要找到一些源代码）[http://jheer.org/vizster/](http://jheer.org/vizster/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T16:18:25.787

也许[prefuse](http://prefuse.org/)可视化工具包可能会对您有所帮助。它基于 Java 并有许多示例应用程序，包括[图形查看器](http://prefuse.org/gallery/graphview/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T16:19:06.407

你可以试试[Graphviz](http://www.graphviz.org)。它*在 Linux*、Windows 和 Mac OS X 上运行，它将生成图形的图像（PNG、PS 等）。您必须将您的 foaf 数据转换成它自己的自定义语言，但它很容易学习。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T16:18:51.853

我不知道有任何程序可以自动生成图形可视化*并*允许您以交互方式调整节点，但[Graphviz](http://www.graphviz.org/)是一个非常流行的图形可视化工具。它可以导出为 SVG，因此您可以在自己喜欢的矢量图形编辑器中编辑结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T16:45:47.810

正如其他海报所推荐的，绝对是[Graphviz](http://graphviz.org "图形可视化")。它需要一个输入文件，我们称之为 foaf.dot，格式如下：

```
graph G {
    "George Formby" [shape=custom, shapefile="file:formby.png"];
    "Michael Jackson" [shape=custom, shapefile="file:jackson.png"];
    "George Formby" -- "Michael Jackson";
    "Fred Flinstone" -- "Michael Jackson";
    "Michael Jackson" -- "Steve McQueen";
} 
```

请注意，此文件描述了一个无向图（希望您的友谊是互惠的）。有向图的语法类似。

为了将您的图形输出到 pdf 文件（假设您已经安装了 graphviz），请运行以下命令

```
dot -Tpdf foaf.dot > foaf.pdf 
```

Graphviz 支持除 pdf 之外的多种输出格式，有关详细信息，请参阅其文档。

我发现 'dot' 程序通常提供最好的输出结果，但是 graphviz 总共包含 5 个布局程序。从文档中：

*   dot - 用于绘制有向图的过滤器
*   neato - 用于绘制无向图的过滤器
*   twopi - 图形径向布局的过滤器
*   circo - 用于图形圆形布局的过滤器
*   fdp - 用于绘制无向图的过滤器

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-09-26T21:45:35.053

我之前推荐过 Graphviz，但我认为我应该添加另一个推荐，因为我已经使用了[Gephi](http://gephi.org/)，这是一个比这里的很多东西更新的工具。这是一个非常强大的交互式图形探索工具，我发现它比这里的许多替代品更实用、更快。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T16:32:52.943

尝试使用 Google Social Graph。在上周 dConstruct08 的一次演讲中，有一张社交图显示了 Robert Scoble 的朋友关系。

[http://code.google.com/apis/socialgraph/](http://code.google.com/apis/socialgraph/)
[http://dconstruct.org/2008](http://dconstruct.org/2008)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T16:19:50.977

如果您使用的是 Java，则可以使用[JGraph](http://www.jgraph.com/)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T16:40:21.410

我知道 Adob​​e Flex 有一些图形可视化组件，当然这将使应用程序能够在 Flash 上运行，这对您的潜在用户群具有极好的渗透率。我会用 Google 搜索 Flex SpringGraph 组件，然后检查一下。Flex 有大量的图形组件，包括付费和免费版本。

我脑海中只有一个 SpringGraph：http: [//www.adobe.com/cfusion/exchange/index.cfm? event=extensionDetail&extid=1048510](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&extid=1048510)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-24T23:47:11.683

检查这个论坛：[http](http://goosebumps4all.net/34all/bb/forumdisplay.php?fid=28) ://goosebumps4all.net/34all/bb/forumdisplay.php?fid=28 一些耀斑的例子，那里有一个朋友的朋友图。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-11-25T15:13:13.620

你试过基于 Python 的 IDE NodeBox (1.0) 吗？这就是我用来生成这些的：http: [//givememydata.com/#images](http://givememydata.com/#images)

vizster 看起来很酷，我会检查一下。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-09-06T09:16:10.437

对于大图，Gephi (http://gephi.org/) 非常流行。它是高度可定制的，有很多布局和演示选项。

# c# - 如何在 C# MailMessage 中嵌入媒体播放器以播放附件

> ID：74112
> 
> 赞同：1
> 
> 时间：2008-09-16T16:15:04.297
> 
> 标签：c#, .net, wmp, embedded-control

我正在使用 C# MailMessage 将波形文件 (8K) 附加到电子邮件中。我想在该电子邮件的正文中提供一个播放器，如果用户选择这样做，它将播放该波形文件。我尝试使用 WMP 的嵌入式 <object> 版本和 cid: 对文件的引用，但 Outlook 2003 拒绝对象标记并且不会运行它。如果有帮助，我知道我的用户将使用 Outlook 2003。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T16:19:58.760

如果它不支持对象标签，请尝试使用 Embed 标签：

[http://www.mioplanet.com/rsc/embed_mediaplayer.htm](http://www.mioplanet.com/rsc/embed_mediaplayer.htm)

我不知道它是否有效，但值得一试:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T16:38:16.673

我会尝试使用[EMBED](http://www.htmlcodetutorial.com/embeddedobjects/_EMBED.html)标签。我对 OBJECT 不起作用并不感到惊讶，因为调用 ActiveX 控件是电子邮件系统中某种潜在的“安全漏洞”。不过，我不确定 EMBED 是否会起作用，这可能是设计使然。许多用户会发现这种行为是不可取的（他们的电子邮件能够在 Outlook 中打开时采取多媒体操作），并且预期的用户体验是列出附件并选择在单击时执行它们。如果您不希望他们必须在其关联的多媒体应用程序上本地播放它，则替代方法可能是他们可以单击该链接以打开嵌入了多媒体的网页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T16:55:18.160

我认为这是不可能的，因为 ActiveX 和 Javascript 在 Outlook 中被禁用。

似乎最好只链接到具有音频文件的嵌入式播放器的网页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-18T20:11:32.263

[如果您知道邮件收件人正在运行 Outlook（这意味着您在内部使用它），则可以通过将播放器控件合并到自定义 Outlook 表单](http://www.outlookcode.com/article.aspx?id=35)中来完成更好的工作。

# ios - 使用 iOS 访问相机

> ID：74113
> 
> 赞同：35
> 
> 时间：2008-09-16T16:15:04.483
> 
> 标签：ios, iphone, camera

很明显，有些人已经能够弄清楚如何通过 SDK 访问 iPhone 摄像头（例如 Spore Origins）。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2008-09-16T16:29:59.313

您需要使用`UIImagePickerController`该类，基本上：

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init];
picker.delegate = pickerDelegate
picker.sourceType = UIImagePickerControllerSourceTypeCamera 
```

上面的`pickerDelegate`对象需要实现如下方法：

```
- (void)imagePickerController:(UIImagePickerController *)picker
           didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

字典`info`将包含原始图像和编辑图像的条目，分别用`UIImagePickerControllerOriginalImage`和键控`UIImagePickerControllerEditedImage`。（有关详细信息，请参阅[https://developer.apple.com/documentation/uikit/uiimagepickercontrollerdelegate](https://developer.apple.com/documentation/uikit/uiimagepickercontrollerdelegate)和[https://developer.apple.com/documentation/uikit/uiimagepickercontrollerinfokey ）](https://developer.apple.com/documentation/uikit/uiimagepickercontrollerinfokey)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-07-09T09:39:31.127

嗯.....曾经尝试过使用 OverlayView 吗？有了这个，相机可能看起来是定制的，但实际上它只是它上面的一个视图。

如果直接访问私有 API，可能会导致应用程序被 Apple 拒绝。看看下面的链接是否有帮助。

[链接文本](http://www.articlesbase.com/programming-articles/custom-camera-applications-development-using-iphone-sdk-766832.html)

# file - 向文件写入更多内容，而不仅仅是纯文本

> ID：74116
> 
> 赞同：3
> 
> 时间：2008-09-16T16:15:23.857
> 
> 标签：file

我一直能够用 C++ 读写基本的文本文件，但到目前为止，没有人讨论过更多。

我的问题是这样的：

如果我自己开发一种文件类型供我也创建的应用程序使用，我将如何将数据写入文件并保留布局、格式等？是否有任何标准，还是仅取决于程序员的创造力？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T16:17:58.610

您基本上必须提出自己的文件格式并编写二进制数据。您还可以序列化您的对象模型并将输出写入文件，但这通常效率较低。

最好使用现有的数据库，或者使用 xml（或其他）来满足简单的需求。如果要以已经存在的格式编写文件，请找到支持它的库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T16:19:55.860

您必须知道要创建的文件的二进制文件格式。考虑[Joel 关于此主题的帖子](http://www.joelonsoftware.com/items/2008/02/19.html)：97-2003 文件格式是 349 页规范。

几乎所有时候，为了做类似的事情，你都使用 API 来避免繁重的工作。但是要小心，因为反复试验以及通过反复试验找出“什么有效”可能会导致程序升级破坏您的代码。另外，您必须考虑其他操作系统、次要版本差异、补丁等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T16:17:50.200

当然有很多标准。可能使用的是某种 xml，因为已经存在一些库和工具来帮助您使用它，但没有什么能阻止您发明自己的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T16:18:27.640

好吧，您可以以您可以阅读的格式存储数据，但可以保持数据的完整性（例如 XML 或 JSON）。

或者（*不寒而栗*）您可以提出自己的专有二进制格式，并使用它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T16:19:13.490

你会像处理文本文件一样使用它。逐字节写入数据，以这样的方式编码，当您阅读文件时，您知道您正在阅读什么。对于电子表格应用程序，您甚至可以使用文本格式（OOXML、OpenDocument）来存储演示和内容信息。

或者您可以定义二进制数据结构并将其直接写入文件。

选择文本格式还是二进制格式取决于应用程序。对于配置文件，您可能更喜欢可以在应用程序外部修改的文本文件，对于数据库，出于性能原因，您很可能会选择二进制格式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T16:20:48.213

有关各种文件类型的文件格式的信息，请参阅[wotsit.org](http://www.wotsit.org/)。示例：您可以准确了解如何写出 .BMP 文件以及它是如何组成的。

可以通过使用您的语言中的包装类来写入数据库，主要是向其传递 SQL 命令。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-20T02:24:40.153

自定义数据的典型二进制文件格式是“索引文件格式”，包括

```
--------
|索引|
--------
|数据 |
--------

```

索引包含“指向”数据的记录。

索引由包含偏移量和大小的记录组成。偏移量告诉您数据存储在文件中的哪个位置，大小告诉您该偏移量处的数据大小（即要读取的字节数）。

```
类型定义结构{
  size_t 偏移量
  size_t 大小
} 指数

类型定义结构{
  整数ID
  字符优先[20]
  字符最后[20]
  字符 *随机信息
} 数据

```

假设您想在文件中存储 50 条记录，您将创建 50 个索引和 50 个数据结构。50 个索引结构将首先写入文件，然后是 50 个数据结构。

要读取文件，您将在 50 个索引结构中读取，然后从读取的索引结构中的数据中，您可以知道在哪里“寻找”来读取数据记录。

查找（fopen、fread、fwrite、fclose、ftell）读取/写入数据的函数。

（对不起，我的分号键不起作用）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T16:16:56.240

如果您创建一个二进制文件，您可以向其中写入任何文件。唯一的缺点是你必须确切地知道它从哪里开始和在哪里结束。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T16:17:48.267

您通常使用第三方库来处理这些事情。例如，您将链接到一个数据库库，例如 Oracle，它允许您与数据库对话。因为底层文件类型（即 Excel 电子表格与 Openoffice、Oracle 与 MySQL 等）不同，这些库抽象出您需要关心文件是如何构建的。

希望能帮助你找到你要找的东西！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T16:21:25.577

使用 xml（开放的、描述性的和可验证的），并坚持使用文本。这类事情也有标准，包括[ODF](http://en.wikipedia.org/wiki/OpenDocument)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T16:21:52.157

您可以将文件作为二进制文件打开，而不是文本文件（这在某种程度上取决于平台），从那里您可以将数据直接写入磁盘。唯一真正需要注意的是[endianess](http://en.wikipedia.org/wiki/Endianess)，当将文件从一种架构移动到另一种架构（例如 x86 到 PPC）时，这可能会成为一个问题。

将二进制数据写入磁盘实际上并不比写入文本更难，而且确实，您的创造力是存储数据的关键。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T16:22:24.323

一般问题通常被称为应用程序状态的序列化，在您的情况下，文件的源/目标以任何对您有意义的格式。这些天来，首选的输入/输出格式是 XML，您可能想查看该领域的现有标准。那么问题就变成了我如何从我的系统状态映射到特定的模式。Boost 有一个序列化框架，你可能想看看。

/艾伦

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T16:27:46.900

您可以采用多种方法，但通常您需要某种序列化库。BOOST::Serialization 或[Google 的 Protocal Buffers](http://code.google.com/apis/protocolbuffers/ "Google 的协议缓冲区")就是一个很好的例子。基本思想是您拥有表示数据的内存结构（类和对象），并且您希望以可用于再次重建这些结构的方式将该数据写入文件。

如果您对使用库犹豫不决，您可以手动完成所有操作，但要意识到您最终可能会编写大量冗余代码，或者开发自己的库。请参阅[fopen、fread、fwrite 和 fclose](http://msdn.microsoft.com/en-us/library/c565h7xx.aspx)作为起点。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-04-08T03:07:41.190

1985 打来电话，说他们有一些帮助 IFF 你愿意读起来。[交换文件格式](http://en.wikipedia.org/wiki/Interchange_File_Format)今天仍在使用，并提供一些关于二进制文件的基本元数据，例如 RIFF 或 WAV 音频。（不幸的是，TIFF 是一个假朋友。）[据称](http://en.wikipedia.org/wiki/Interchange_File_Format)它甚至启发了 PNG，所以它不会那么糟糕。

# windows - 如何强制重启而不是关机（XP）

> ID：74126
> 
> 赞同：3
> 
> 时间：2008-09-16T16:17:10.827
> 
> 标签：windows, shutdown, restart, reboot

我有一个可以通过 VNC 访问的 Windows XP SP2 虚拟机。它还在运行 Deep Freeze，因此强制重启应该没有问题。我正在寻找一种方法来强制操作系统重新启动而不是关闭或完全删除使用软件应用程序关闭机器的能力（例如从开始菜单、关闭程序或其他自定义程序的常用方式）。

谢谢你，汤姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T16:18:51.977

试试这个：

`shutdown /r /t 1 /f`

亚历克斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T16:23:21.857

要取消关闭功能，最好的办法是为用户/用户组创建组策略，并指定他们只能重新启动系统。我过去这样做是为了确保只有管理员帐户才能关闭计算机。它阻止了我在凌晨 2 点想重新启动远程电脑时错误地关闭它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T16:19:43.363

在 XP 中有一个称为关机的 DOS 命令。如果您`shutdown /?`从命令提示符键入，您将看到可用的选项。使用它，您可以创建一个批处理文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T16:19:53.957

试试 DShutdown.exe。它很灵活，可以做所有这些事情。

# c# - 如何在十六进制和十进制之间转换数字

> ID：74148
> 
> 赞同：164
> 
> 时间：2008-09-16T16:18:59.327
> 
> 标签：c#, hex, type-conversion, decimal

如何在 C# 中转换十六进制数和十进制数？

* * *

## 回答 #1

> 赞同：317
> 
> 时间：2008-09-16T16:26:00.587

要将十进制转换为十六进制，请...

```
string hexValue = decValue.ToString("X"); 
```

要将十六进制转换为十进制，请执行以下任一操作...

```
int decValue = int.Parse(hexValue, System.Globalization.NumberStyles.HexNumber); 
```

或者

```
int decValue = Convert.ToInt32(hexValue, 16); 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2008-09-16T16:23:13.060

十六进制 -> 十进制：

```
Convert.ToInt64(hexValue, 16); 
```

十进制 -> 十六进制

```
string.format("{0:x}", decValue); 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2008-09-16T16:22:03.420

看起来你可以说

```
Convert.ToInt64(value, 16) 
```

从十六进制中获取十进制。

另一种方法是：

```
otherVar.ToString("X"); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-02-03T09:57:04.823

如果您希望在从十六进制数转换为十进制数时获得最佳性能，您可以使用预先填充的十六进制到十进制值表的方法。

这是说明该想法的代码。我的[性能测试](http://vadmyst.blogspot.com/2012/02/fast-convertion-of-hex-string-into.html)表明它可以比 Convert.ToInt32(...) 快 20%-40%：

```
class TableConvert
  {
      static sbyte[] unhex_table =
      { -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
       ,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
       ,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
       , 0, 1, 2, 3, 4, 5, 6, 7, 8, 9,-1,-1,-1,-1,-1,-1
       ,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1
       ,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
       ,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1
       ,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
      };

      public static int Convert(string hexNumber)
      {
          int decValue = unhex_table[(byte)hexNumber[0]];
          for (int i = 1; i < hexNumber.Length; i++)
          {
              decValue *= 16;
              decValue += unhex_table[(byte)hexNumber[i]];
          }
          return decValue;
      }
  } 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2008-09-16T16:22:49.207

[来自极客百科](https://web.archive.org/web/20081231062758/http://www.geekpedia.com/KB8_How-do-I-convert-from-decimal-to-hex-and-hex-to-decimal.html)：

```
// Store integer 182
int decValue = 182;

// Convert integer 182 as a hex in a string variable
string hexValue = decValue.ToString("X");

// Convert the hex string back to the number
int decAgain = int.Parse(hexValue, System.Globalization.NumberStyles.HexNumber); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T16:21:54.810

```
String stringrep = myintvar.ToString("X");

int num = int.Parse("FF", System.Globalization.NumberStyles.HexNumber); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-22T19:20:05.737

十六进制到十进制转换

```
Convert.ToInt32(number, 16); 
```

十进制到十六进制转换

```
int.Parse(number, System.Globalization.NumberStyles.HexNumber) 
```

[有关更多详细信息，请查看本文](http://kodecenter.com/article?id=f3ed25f1-2563-4323-9f43-c4fbbc9c372f)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-03-30T06:54:52.523

尝试在 C# 中使用 BigNumber - 表示任意大的有符号整数。

### 程序

```
using System.Numerics;
...
var bigNumber = BigInteger.Parse("837593454735734579347547357233757342857087879423437472347757234945743");
Console.WriteLine(bigNumber.ToString("X")); 
```

### 输出

```
4F30DC39A5B10A824134D5B18EEA3707AC854EE565414ED2E498DCFDE1A15DA5FEB6074AE248458435BD417F06F674EB29A2CFECF 
```

### 可能的例外，

ArgumentNullException - 值为 null。

FormatException - 值的格式不正确。

### 结论

您可以转换字符串并将值存储在 BigNumber 中，而不受数字大小的限制，除非字符串为空且非字母表

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-03-20T18:39:55.357

```
 static string chex(byte e)                  // Convert a byte to a string representing that byte in hexadecimal
    {
        string r = "";
        string chars = "0123456789ABCDEF";
        r += chars[e >> 4];
        return r += chars[e &= 0x0F];
    }           // Easy enough...

    static byte CRAZY_BYTE(string t, int i)     // Take a byte, if zero return zero, else throw exception (i=0 means false, i>0 means true)
    {
        if (i == 0) return 0;
        throw new Exception(t);
    }

    static byte hbyte(string e)                 // Take 2 characters: these are hex chars, convert it to a byte
    {                                           // WARNING: This code will make small children cry. Rated R.
        e = e.ToUpper(); // 
        string msg = "INVALID CHARS";           // The message that will be thrown if the hex str is invalid

        byte[] t = new byte[]                   // Gets the 2 characters and puts them in seperate entries in a byte array.
        {                                       // This will throw an exception if (e.Length != 2).
            (byte)e[CRAZY_BYTE("INVALID LENGTH", e.Length ^ 0x02)], 
            (byte)e[0x01] 
        };

        for (byte i = 0x00; i < 0x02; i++)      // Convert those [ascii] characters to [hexadecimal] characters. Error out if either character is invalid.
        {
            t[i] -= (byte)((t[i] >= 0x30) ? 0x30 : CRAZY_BYTE(msg, 0x01));                                  // Check for 0-9
            t[i] -= (byte)((!(t[i] < 0x0A)) ? (t[i] >= 0x11 ? 0x07 : CRAZY_BYTE(msg, 0x01)) : 0x00);        // Check for A-F
        }           

        return t[0x01] |= t[0x00] <<= 0x04;     // The moment of truth.
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-12-17T21:40:48.447

这并不是最简单的方法，但此源代码使您能够正确任何类型的八进制数，即 23.214、23 和 0.512 等。希望对你有帮助..

```
 public string octal_to_decimal(string m_value)
    {
        double i, j, x = 0;
        Int64 main_value;
        int k = 0;
        bool pw = true, ch;
        int position_pt = m_value.IndexOf(".");
        if (position_pt == -1)
        {
            main_value = Convert.ToInt64(m_value);
            ch = false;
        }
        else
        {
            main_value = Convert.ToInt64(m_value.Remove(position_pt, m_value.Length - position_pt));
            ch = true;
        }

        while (k <= 1)
        {
            do
            {
                i = main_value % 10;                                        // Return Remainder
                i = i * Convert.ToDouble(Math.Pow(8, x));                   // calculate power
                if (pw)
                    x++;
                else
                    x--;
                o_to_d = o_to_d + i;                                        // Saving Required calculated value in main variable
                main_value = main_value / 10;                               // Dividing the main value 
            }
            while (main_value >= 1);
            if (ch)
            {
                k++;
                main_value = Convert.ToInt64(Reversestring(m_value.Remove(0, position_pt + 1)));
            }
            else
                k = 2;
            pw = false;
            x = -1;
        }
        return (Convert.ToString(o_to_d));
    } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-06-01T17:47:18.980

如果它是一个超出正常整数容量的非常大的十六进制字符串：

对于 .NET 3.5，我们可以使用 BouncyCastle 的 BigInteger 类：

```
String hex = "68c7b05d0000000002f8";
// results in "494809724602834812404472"
String decimal = new Org.BouncyCastle.Math.BigInteger(hex, 16).ToString(); 
```

.NET 4.0 有[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)类。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-05-22T18:28:16.667

这个对我有用：

```
public static decimal HexToDec(string hex)
{
  if (hex.Length % 2 == 1)
    hex = "0" + hex;
  byte[] raw = new byte[hex.Length / 2];
  decimal d = 0;
    for (int i = 0; i < raw.Length; i++)
    {
      raw[i] = Convert.ToByte(hex.Substring(i * 2, 2), 16);
      d += Math.Pow(256, (raw.Length - 1 - i)) * raw[i];
    }
    return d.ToString();
  return d;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-02-09T10:58:40.927

我的版本是我认为更容易理解的，因为我的 C# 知识不是那么高。我正在使用这个算法：[http](http://easyguyevo.hubpages.com/hub/Convert-Hex-to-Decimal) ://easyguyevo.hubpages.com/hub/Convert-Hex-to-Decimal （示例2）

```
using System;
using System.Collections.Generic;

static class Tool
{
    public static string DecToHex(int x)
    {
        string result = "";

        while (x != 0)
        {
            if ((x % 16) < 10)
                result = x % 16 + result;
            else
            {
                string temp = "";

                switch (x % 16)
                {
                    case 10: temp = "A"; break;
                    case 11: temp = "B"; break;
                    case 12: temp = "C"; break;
                    case 13: temp = "D"; break;
                    case 14: temp = "E"; break;
                    case 15: temp = "F"; break;
                }

                result = temp + result;
            }

            x /= 16;
        }

        return result;
    }

    public static int HexToDec(string x)
    {
        int result = 0;
        int count = x.Length - 1;
        for (int i = 0; i < x.Length; i++)
        {
            int temp = 0;
            switch (x[i])
            {
                case 'A': temp = 10; break;
                case 'B': temp = 11; break;
                case 'C': temp = 12; break;
                case 'D': temp = 13; break;
                case 'E': temp = 14; break;
                case 'F': temp = 15; break;
                default: temp = -48 + (int)x[i]; break; // -48 because of ASCII
            }

            result += temp * (int)(Math.Pow(16, count));
            count--;
        }

        return result;
    }
}

class Program
{
    static void Main(string[] args)
    {
        Console.Write("Enter Decimal value: ");
        int decNum = int.Parse(Console.ReadLine());

        Console.WriteLine("Dec {0} is hex {1}", decNum, Tool.DecToHex(decNum));

        Console.Write("\nEnter Hexadecimal value: ");
        string hexNum = Console.ReadLine().ToUpper();

        Console.WriteLine("Hex {0} is dec {1}", hexNum, Tool.HexToDec(hexNum));

        Console.ReadKey();
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-04-29T09:35:24.167

将二进制转换为十六进制

```
Convert.ToString(Convert.ToUInt32(binary1, 2), 16).ToUpper() 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-04-09T05:42:06.403

您可以使用此代码并可能设置十六进制长度和部分：

```
const int decimal_places = 4;
const int int_places = 4;
static readonly string decimal_places_format = $"X{decimal_places}";
static readonly string int_places_format = $"X{int_places}";

public static string DecimaltoHex(decimal number)
{
    var n = (int)Math.Truncate(number);
    var f = (int)Math.Truncate((number - n) * ((decimal)Math.Pow(10, decimal_places)));
    return $"{string.Format($"{{0:{int_places_format}}}", n)}{string.Format($"{{0:{decimal_places_format}}}", f)}";
}

public static decimal HextoDecimal(string number)
{
    var n = number.Substring(0, number.Length - decimal_places);
    var f = number.Substring(number.Length - decimal_places);
    return decimal.Parse($"{int.Parse(n, System.Globalization.NumberStyles.HexNumber)}.{int.Parse(f, System.Globalization.NumberStyles.HexNumber)}");
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-07-05T12:44:27.180

十进制 - 六进制

```
 var decValue = int.Parse(Console.ReadLine());
        string hex = string.Format("{0:x}", decValue);
        Console.WriteLine(hex); 
```

Hexa - 十进制（使用命名空间：使用 System.Globalization；）

```
 var hexval = Console.ReadLine();
        int decValue = int.Parse(hexval, NumberStyles.HexNumber);
        Console.WriteLine(decValue); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-02-22T22:44:53.993

**将 Hex 转换为 Dec 并返回的四种 C# 原生方法：**

```
using System;

namespace Hexadecimal_and_Decimal
{
  internal class Program
  {
    private static void Main(string[] args)
    {
      string hex = "4DEAD";
      int dec;

      // hex to dec:
      dec = int.Parse(hex, System.Globalization.NumberStyles.HexNumber);
      // or:
      dec = Convert.ToInt32(hex, 16);

      // dec to hex:
      hex = dec.ToString("X"); // lowcase: x, uppercase: X
      // or:
      hex = string.Format("{0:X}", dec); // lowcase: x, uppercase: X

      Console.WriteLine("Hexadecimal number: " + hex);
      Console.WriteLine("Decimal number: " + dec);
    }
  }
} 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2011-07-12T15:27:55.800

一种将字节数组转换为十六进制表示的扩展方法。这用前导零填充每个字节。

```
 /// <summary>
    /// Turns the byte array into its Hex representation.
    /// </summary>
    public static string ToHex(this byte[] y)
    {
        StringBuilder sb = new StringBuilder();
        foreach (byte b in y)
        {
            sb.Append(b.ToString("X").PadLeft(2, "0"[0]));
        }
        return sb.ToString();
    } 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2014-01-12T20:00:19.580

这是我的功能：

```
using System;
using System.Collections.Generic;
class HexadecimalToDecimal
{
    static Dictionary<char, int> hexdecval = new Dictionary<char, int>{
        {'0', 0},
        {'1', 1},
        {'2', 2},
        {'3', 3},
        {'4', 4},
        {'5', 5},
        {'6', 6},
        {'7', 7},
        {'8', 8},
        {'9', 9},
        {'a', 10},
        {'b', 11},
        {'c', 12},
        {'d', 13},
        {'e', 14},
        {'f', 15},
    };

    static decimal HexToDec(string hex)
    {
        decimal result = 0;
        hex = hex.ToLower();

        for (int i = 0; i < hex.Length; i++)
        {
            char valAt = hex[hex.Length - 1 - i];
            result += hexdecval[valAt] * (int)Math.Pow(16, i);
        }

        return result;
    }

    static void Main()
    {

        Console.WriteLine("Enter Hexadecimal value");
        string hex = Console.ReadLine().Trim();

        //string hex = "29A";
        Console.WriteLine("Hex {0} is dec {1}", hex, HexToDec(hex));

        Console.ReadKey();
    }
} 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2019-01-07T22:50:55.337

我的解决方案有点像回归基础，但它无需使用任何内置函数即可在数字系统之间进行转换。

```
 public static string DecToHex(long a)
    {
        int n = 1;
        long b = a;
        while (b > 15)
        {
            b /= 16;
            n++;
        }
        string[] t = new string[n];
        int i = 0, j = n - 1;
        do
        {
                 if (a % 16 == 10) t[i] = "A";
            else if (a % 16 == 11) t[i] = "B";
            else if (a % 16 == 12) t[i] = "C";
            else if (a % 16 == 13) t[i] = "D";
            else if (a % 16 == 14) t[i] = "E";
            else if (a % 16 == 15) t[i] = "F";
            else t[i] = (a % 16).ToString();
            a /= 16;
            i++;
        }
        while ((a * 16) > 15);
        string[] r = new string[n];
        for (i = 0; i < n; i++)
        {
            r[i] = t[j];
            j--;
        }
        string res = string.Concat(r);
        return res;
    } 
```

# sql - 如何插入从另一个表中提取的表记录

> ID：74162
> 
> 赞同：184
> 
> 时间：2008-09-16T16:19:55.923
> 
> 标签：sql, ms-access

我正在尝试编写一个查询，从表中提取和转换数据，然后将这些数据插入到另一个表中。是的，这是一个数据仓库查询，我在 MS Access 中进行。所以基本上我想要一些这样的查询：

```
INSERT INTO Table2(LongIntColumn2, CurrencyColumn2) VALUES
  (SELECT LongIntColumn1, Avg(CurrencyColumn) as CurrencyColumn1 FROM Table1 GROUP BY LongIntColumn1); 
```

我试过但收到语法错误消息。

如果你想这样做，你会怎么做？

* * *

## 回答 #1

> 赞同：291
> 
> 时间：2008-09-16T16:23:34.010

没有“价值”，没有括号：

```
INSERT INTO Table2(LongIntColumn2, CurrencyColumn2)
SELECT LongIntColumn1, Avg(CurrencyColumn) as CurrencyColumn1 FROM Table1 GROUP BY LongIntColumn1; 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-09-16T16:25:51.773

您有两个语法选项：

**选项1**

```
CREATE TABLE Table1 (
    id int identity(1, 1) not null,
    LongIntColumn1 int,
    CurrencyColumn money
)

CREATE TABLE Table2 (
    id int identity(1, 1) not null,
    LongIntColumn2 int,
    CurrencyColumn2 money
)

INSERT INTO Table1 VALUES(12, 12.00)
INSERT INTO Table1 VALUES(11, 13.00)

INSERT INTO Table2
SELECT LongIntColumn1, Avg(CurrencyColumn) as CurrencyColumn1 FROM Table1 GROUP BY LongIntColumn1 
```

**选项 2**

```
CREATE TABLE Table1 (
    id int identity(1, 1) not null,
    LongIntColumn1 int,
    CurrencyColumn money
)

INSERT INTO Table1 VALUES(12, 12.00)
INSERT INTO Table1 VALUES(11, 13.00)

SELECT LongIntColumn1, Avg(CurrencyColumn) as CurrencyColumn1
INTO Table2
FROM Table1
GROUP BY LongIntColumn1 
```

请记住，选项 2 将创建一个表，其中仅包含投影上的列（SELECT 上的列）。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2008-09-16T16:24:34.850

删除 VALUES 和括号。

```
INSERT INTO Table2 (LongIntColumn2, CurrencyColumn2)
SELECT LongIntColumn1, Avg(CurrencyColumn) FROM Table1 GROUP BY LongIntColumn1 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-09-16T16:27:46.027

我相信您在这种情况下的问题是“值”关键字。当您只插入一行数据时，您使用“值”关键字。对于插入选择的结果，您不需要它。

此外，您真的不需要 select 语句周围的括号。

来自[msdn](http://msdn.microsoft.com/en-us/library/bb208861.aspx)：

多记录追加查询：

```
INSERT INTO target [(field1[, field2[, …]])] [IN externaldatabase]
SELECT [source.]field1[, field2[, …]
FROM tableexpression 
```

单记录追加查询：

```
INSERT INTO target [(field1[, field2[, …]])]     
VALUES (value1[, value2[, …]) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-09-16T16:23:01.953

`VALUES`从您的 SQL 中删除。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-16T16:40:58.930

附加一组行时删除“值”，并删除多余的括号。您可以通过使用 avg(CurrencyColumn) 的别名（如您在示例中所做的那样）或根本不使用别名来避免循环引用。

如果两个表中的列名相同，您的查询将如下所示：

```
INSERT INTO Table2 (LongIntColumn, Junk)
SELECT LongIntColumn, avg(CurrencyColumn) as CurrencyColumn1
FROM Table1
GROUP BY LongIntColumn; 
```

它可以在没有别名的情况下工作：

```
INSERT INTO Table2 (LongIntColumn, Junk)
SELECT LongIntColumn, avg(CurrencyColumn)
FROM Table1
GROUP BY LongIntColumn; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-16T16:27:05.763

好吧，我认为最好的方法是（将是？）定义 2 个记录集并将它们用作 2 个表之间的中间体。

1.  打开两个记录集
2.  从第一个表中提取数据（SELECT blablabla）
3.  使用第一个记录集中可用的数据更新第二个记录集（通过添加新记录或更新现有记录
4.  关闭两个记录集

如果您计划从不同的数据库更新表（即每个记录集可以有自己的连接......），这种方法特别有趣。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-08T09:19:36.503

将数据从一张表插入到不同数据库中的另一张表中

```
insert into DocTypeGroup 
    Select DocGrp_Id,DocGrp_SubId,DocGrp_GroupName,DocGrp_PM,DocGrp_DocType 
    from Opendatasource( 'SQLOLEDB','Data Source=10.132.20.19;UserID=sa;Password=gchaturthi').dbIPFMCI.dbo.DocTypeGroup 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-16T16:34:27.197

是否要在现有表中插入提取？

如果没关系，那么您可以尝试以下查询：

```
SELECT LongIntColumn1, Avg(CurrencyColumn) as CurrencyColumn1 INTO T1 FROM Table1 
GROUP BY LongIntColumn1); 
```

它将使用提取的信息创建一个新表-> T1

# java - Java 编译 - 有没有办法告诉编译器忽略我的部分代码？

> ID：74171
> 
> 赞同：12
> 
> 时间：2008-09-16T16:20:18.090
> 
> 标签：java, swing, compilation

我维护一个 Java Swing 应用程序。

为了向后兼容 java 5（对于 Apple 机器），我们维护了两个代码库，一个使用 Java 6 的功能，另一个没有这些功能。

代码基本相同，除了 3-4 个使用 Java 6 特性的类。

我希望只维护 1 个代码库。在编译期间有没有办法让 Java 5 编译器“忽略”我的代码的某些部分？

我不想简单地注释/取消注释我的代码部分，这取决于我的 java 编译器的版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T19:58:13.073

关于使用自定义类加载器和动态注释代码的建议有点令人难以置信，当涉及到维护和保存任何一个可怜的灵魂在你改组到新的牧场后拿起项目的理智时。

解决方案很简单。将受影响的类拉出到两个独立的独立项目中——确保包名相同，然后编译成 jar，然后可以在主项目中使用。如果您保持包名称相同，并且方法签名相同，则没有问题 - 只需将所需的 jar 版本放入部署脚本中即可。我假设您运行单独的构建脚本或在同一脚本中有单独的目标 - ant 和 maven 都可以轻松处理有条件地抓取文件并复制它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T16:23:32.310

我认为这里最好的方法可能是使用构建脚本。您可以将所有代码放在一个位置，通过选择要包含哪些文件和不包含哪些文件，您可以选择要编译的代码版本。请注意，如果您需要比每个文件更细粒度的控制，这可能无济于事。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T17:00:44.123

假设这些类在实现上有 1.5 和 6.0 的差异时具有相似的功能，您可以将它们合并到一个类中。然后，无需编辑源代码以进行注释/取消注释，您就可以依赖编译器始终执行的优化。如果 if 表达式始终为 false，则 if 语句中的代码将不会包含在编译中。

您可以在其中一个类中创建一个静态变量以确定要运行的版本：

```
public static final boolean COMPILED_IN_JAVA_6 = false; 
```

然后让受影响的类检查该静态变量并将不同的代码部分放在一个简单的 if 语句中

```
if (VersionUtil.COMPILED_IN_JAVA_6) {
  // Java 6 stuff goes here
} else {
  // Java 1.5 stuff goes here
} 
```

然后，当您想编译另一个版本时，您只需更改该变量并重新编译。它可能会使 java 文件变大，但它会整合您的代码并消除您拥有的任何代码重复。你的编辑器可能会抱怨无法访问的代码或其他什么，但编译器应该很高兴地忽略它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T16:42:31.313

您可能可以重构您的代码，以便真正不需要条件编译，只需要条件类加载。像这样的东西：

```
public interface Opener{

public void open(File f);

 public static class Util{
        public Opener getOpener(){
          if(System.getProperty("java.version").beginsWith("1.5")){
           return new Java5Opener();
          }
          try{ 
            return new Java6Opener();
           }catch(Throwable t){
            return new Java5Opener();
           }
        }
 }

} 
```

这可能需要很多努力，具体取决于您拥有多少特定于版本的代码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T16:37:57.830

保留一个在 JDK 5 下构建的“主”源根。添加第二个必须在 JDK 6 或更高版本下构建的并行源根。（应该没有重叠，即两者中都没有类。）使用接口来定义两者之间的入口点，以及一点点反射。

例如：

```
---%<--- main/RandomClass.java
// ...
if (...is JDK 6+...) {
    try {
        JDK6Interface i = (JDK6Interface)
            Class.forName("JDK6Impl").newInstance();
        i.browseDesktop(...);
    } catch (Exception x) {
        // fall back...
    }
}
---%<--- main/JDK6Interface.java
public interface JDK6Interface {
    void browseDesktop(URI uri);
}
---%<--- jdk6/JDK6Impl.java
public class JDK6Impl implements JDK6Interface {
    public void browseDesktop(URI uri) {
        java.awt.Desktop.getDesktop().browse(uri);
    }
}
---%<--- 
```

您可以使用不同的 JDK 等在 IDE 中将它们配置为单独的项目。关键是主根可以独立编译，并且非常清楚您可以在哪个根中使用什么，而如果您尝试编译单独的单个 root 很容易意外地将 JDK 6 的使用“泄漏”到错误的文件中。

除了像这样使用 Class.forName 之外，您还可以使用某种服务注册系统 - java.util.ServiceLoader（如果 main 可以使用 JDK 6 并且您想要对 JDK 7 的可选支持！）、NetBeans Lookup、Spring 等。等等

相同的技术可用于创建对可选库而不是更新的 JDK 的支持。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T16:26:49.057

不是真的，但有解决方法。见 [http://forums.sun.com/thread.jspa?threadID=154106&messageID=447625](http://forums.sun.com/thread.jspa?threadID=154106&messageID=447625)

也就是说，您应该坚持至少有一个用于 Java 5 的文件版本和一个用于 Java 6 的文件版本，并通过适当的构建或制作来包含它们。将它们全部放在一个大文件中并试图让 5 的编译器忽略它不理解的东西并不是一个好的解决方案。

高温高压

-- 尼基 --

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T16:30:42.823

这将使所有 Java 纯粹主义者畏缩（这很有趣，呵呵），但我会使用 C 预处理器，将#ifdefs 放入我的源代码中。makefile、rakefile 或任何控制您的构建的东西都必须运行 cpp 来制作临时文件以供编译器使用。我不知道蚂蚁是否可以做到这一点。

虽然 stackoverflow 看起来它将成为所有答案*的地方，但您可能会发现没有人会在*[http://www.javaranch.com](http://www.javaranch.com)上寻找 Java 智慧。我想这个问题很久以前就在那里处理过了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T19:39:52.650

这取决于您要使用哪些 Java 6 功能。对于像向 JTables 添加行排序器这样简单的事情，您实际上可以在运行时进行测试：

```
private static final double javaVersion =
         Double.parseDouble(System.getProperty("java.version").substring(0, 3));
private static final boolean supportsRowSorter =
         (javaVersion >= 1.6);

//...

if (supportsRowSorter) {
    myTable.setAutoCreateRowSorter(true);
} else {
    // not supported
} 
```

此代码必须使用 Java 6 编译，但可以使用任何版本运行（不引用新类）。

编辑：更正确地说，它适用于自 1.3 以来的任何版本（根据[此页面](http://java.sun.com/j2se/versioning_naming.html "J2SE SDK/JRE 版本字符串命名约定")）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-16T20:54:20.677

您可以专门在 Java6 上进行所有编译，然后使用 System.getProperty("java.version") 有条件地运行 Java5 或 Java6 代码路径。

您可以在类中包含纯 Java6 代码，只要不执行纯 Java6 代码路径，该类将在 Java5 上正常运行。

这是一种用于编写小程序的技巧，这些小程序将在古老的 MSJVM 上一直运行到全新的 Java 插件 JVM。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T16:32:20.527

Java 中没有预编译器。因此，没有办法像在 C 中那样执行#ifdef。构建脚本将是最好的方法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T16:35:22.517

您可以获得条件编译，但不是很好 - javac 将忽略无法访问的代码。因此，如果您正确地构建代码，您可以让编译器忽略您的部分代码。要正确使用它，您还需要将正确的参数传递给 javac，这样它就不会将无法访问的代码报告为错误，并拒绝编译:-)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T17:06:30.973

上面提到的公共静态最终解决方案还有一个作者没有提到的额外好处——据我了解，编译器将在编译时识别它并编译出 if 语句中引用该最终变量的任何代码。

所以我认为这就是您正在寻找的确切解决方案。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T17:07:55.433

一个简单的解决方案可能是：

*   将不同的类放在您的正常类路径之外。
*   编写一个简单的自定义类加载器并将其安装在 main 中作为默认值。
*   对于除了 5/6 类之外的所有类，cassloader 可以推迟到其父类（普通系统类加载器）
*   对于 5/6 的（应该是唯一不能被父级找到的），它可以通过 'os.name' 属性或您自己的属性决定使用哪个。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-28T15:00:03.140

您可以使用反射 API。将所有 1.5 代码放在一个类中，将 1.6 api 放在另一个类中。在您的 ant 脚本中创建两个目标，一个用于 1.5，它不会编译 1.6 类，另一个用于 1.6，不会编译 1.5 类。在您的代码中检查您的 java 版本并使用反射加载适当的类，这样 javac 就不会抱怨缺少函数。这就是我如何在 Windows 上编译我的 MRJ（Java 的 Mac 运行时）应用程序。

# wpf - WPF ListBox WrapPanel 剪辑长组

> ID：74188
> 
> 赞同：3
> 
> 时间：2008-09-16T16:22:24.170
> 
> 标签：wpf, listbox, scroll, grouping, wrappanel

我创建了一个 ListBox 来显示组中的项目，当这些组不再适合 ListBox 面板的高度时，它们会从右到左包裹。因此，这些组在列表框中将与此类似，其中每个组的高度是任意的（例如，组 1 是组 2 的两倍）：

```
[ 1 ][ 3 ][ 5 ]
[   ][ 4 ][ 6 ]
[ 2 ][   ] 
```

以下 XAML 可以正常工作，因为它执行换行，并允许在项目从 ListBox 右侧运行时出现水平滚动条。

```
<ListBox> 
  <ListBox.ItemsPanel> 
    <ItemsPanelTemplate> 
      <StackPanel Orientation="Vertical"/> 
    </ItemsPanelTemplate> 
  </ListBox.ItemsPanel> 

  <ListBox.GroupStyle> 
    <ItemsPanelTemplate> 
      <WrapPanel Orientation="Vertical" 
                 Height="{Binding Path=ActualHeight, 
                          RelativeSource={RelativeSource 
                            FindAncestor, 
                            AncestorLevel=1, 
                            AncestorType={x:Type ScrollContentPresenter}}}"/> 
    </ItemsPanelTemplate> 
  </ListBox.GroupStyle> 
</ListBox> 
```

当一组项目长于 WrapPanel 的高度时，会出现此问题。与允许垂直滚动条出现以查看截止项目组不同，该组中的项目被简单地剪裁。我假设这是 WrapPanel 中的 Height 绑定的副作用 - 滚动条认为它不必启用。

有没有办法启用滚动条，或者我没有看到的解决这个问题的其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T17:01:49.503

通过将 WrapPanel 上的 Height 属性设置为 ScrollContentPresenter 的高度，它永远不会垂直滚动。但是，如果您删除该 Binding，它将永远不会换行，因为在布局过程中，它具有无限的高度来布局。

我建议创建你自己的面板类来获得你想要的行为。有一个单独的依赖属性，您可以将所需的高度绑定到该属性，因此您可以使用它来计算度量中的目标高度并安排步骤。如果任何一个孩子高于所需高度，则使用该孩子的高度作为目标高度来计算环绕。

这是执行此操作的示例面板：

```
public class SmartWrapPanel : WrapPanel
{
    /// <summary>
    /// Identifies the DesiredHeight dependency property
    /// </summary>
    public static readonly DependencyProperty DesiredHeightProperty = DependencyProperty.Register(
        "DesiredHeight",
        typeof(double),
        typeof(SmartWrapPanel),
        new FrameworkPropertyMetadata(Double.NaN, 
            FrameworkPropertyMetadataOptions.AffectsArrange |
            FrameworkPropertyMetadataOptions.AffectsMeasure));

    /// <summary>
    /// Gets or sets the height to attempt to be.  If any child is taller than this, will use the child's height.
    /// </summary>
    public double DesiredHeight
    {
        get { return (double)GetValue(DesiredHeightProperty); }
        set { SetValue(DesiredHeightProperty, value); }
    }

    protected override Size MeasureOverride(Size constraint)
    {
        Size ret = base.MeasureOverride(constraint);
        double h = ret.Height;

        if (!Double.IsNaN(DesiredHeight))
        {
            h = DesiredHeight;
            foreach (UIElement child in Children)
            {
                if (child.DesiredSize.Height > h)
                    h = child.DesiredSize.Height;
            }
        }

        return new Size(ret.Width, h);
    }

    protected override System.Windows.Size ArrangeOverride(Size finalSize)
    {
        double h = finalSize.Height;

        if (!Double.IsNaN(DesiredHeight))
        {
            h = DesiredHeight;
            foreach (UIElement child in Children)
            {
                if (child.DesiredSize.Height > h)
                    h = child.DesiredSize.Height;
            }
        }

        return base.ArrangeOverride(new Size(finalSize.Width, h));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T12:51:19.473

这是稍作修改的代码——所有功劳归功于之前发布的 Abe Heidebrecht——它允许水平和垂直滚动。唯一的变化是MeasureOverride的返回值需要base.MeasureOverride(new Size(ret.width, h))。

```
// Original code : Abe Heidebrecht
public class SmartWrapPanel : WrapPanel
{
  /// <summary>
  /// Identifies the DesiredHeight dependency property
  /// </summary>
  public static readonly DependencyProperty DesiredHeightProperty = DependencyProperty.Register(
    "DesiredHeight",
    typeof(double),
    typeof(SmartWrapPanel),
    new FrameworkPropertyMetadata(Double.NaN, 
            FrameworkPropertyMetadataOptions.AffectsArrange |
            FrameworkPropertyMetadataOptions.AffectsMeasure));

  /// <summary>
  /// Gets or sets the height to attempt to be.  If any child is taller than this, will use the child's height.
  /// </summary>
  public double DesiredHeight
  {
    get { return (double)GetValue(DesiredHeightProperty); }
    set { SetValue(DesiredHeightProperty, value); }
  }

  protected override Size MeasureOverride(Size constraint)
  {
    Size ret = base.MeasureOverride(constraint);
    double h = ret.Height;

    if (!Double.IsNaN(DesiredHeight))
    {
      h = DesiredHeight;
      foreach (UIElement child in Children)
      {
        if (child.DesiredSize.Height > h)
          h = child.DesiredSize.Height;
      }
    }

    return base.MeasureOverride(new Size(ret.Width, h));
  }

  protected override System.Windows.Size ArrangeOverride(Size finalSize)
  {
    double h = finalSize.Height;

    if (!Double.IsNaN(DesiredHeight))
    {
      h = DesiredHeight;
      foreach (UIElement child in Children)
      {
        if (child.DesiredSize.Height > h)
          h = child.DesiredSize.Height;
      }
    }

    return base.ArrangeOverride(new Size(finalSize.Width, h));
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T16:36:24.883

谢谢你的回答，大卫。

当绑定为`removed`时，不会发生换行。WrapPanel将每个组**放入**一个垂直列中。

绑定旨在强制 WrapPanel 实际换行。如果没有设置绑定，WrapPanel 假定高度是无限的并且从不换行。

绑定到`MinHeight`会导致一个空的列表框。我可以看到该`VerticalAlignment`属性似乎是一种解决方案，但对齐本身可以防止发生任何包装。当绑定和对齐一起使用时，对齐对问题没有影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T16:27:27.323

我认为你是正确的，它与绑定有关。移除绑定后会发生什么？通过绑定，您是否试图至少填满列表框的整个高度？如果是这样，请考虑改为绑定到 MinHeight，或尝试使用该`VerticalAlignment`属性。

# iis-6 - 一个集群中可以有多个 ASP.NET 状态服务器服务吗？

> ID：74190
> 
> 赞同：3
> 
> 时间：2008-09-16T16:22:29.690
> 
> 标签：iis-6, windows-server-2003, cluster-computing, stateserver

我们有一个运行 ASP.NET Web 应用程序的 4 个服务器集群，使用 ASP.NET 状态服务器服务进行会话。在 4 台服务器之一上运行 ASP.NET 状态服务器服务，其他服务器配置为查看此内容。很多时候我们必须给服务器打补丁，而在状态服务器上打补丁需要几分钟的停机时间。

有没有办法在一个集群中配置两个以上的 ASP.NET 状态服务器服务，所以如果一个出现故障，另一个会接管？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T16:25:50.057

我会研究会话状态分区。这里有很好的信息：http: [//blog.maartenballiauw.be/post/2008/01/ASPNET-Session-State-Partitioning-using-State-Server-Load-Balancing.aspx](http://blog.maartenballiauw.be/post/2008/01/ASPNET-Session-State-Partitioning-using-State-Server-Load-Balancing.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-17T18:37:05.897

ASP Stateserver 不会从第一个节点复制会话。

但至少在下次重试时保持您的 Web 正常运行。

在MSCS集群环境下实现ASP状态服务的思考

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T12:52:46.670

*如果第一个失败而不会*丢失存储在第一台服务器上的会话信息部分，则第二个 ASP.NET 状态服务器服务无法接管。第二台服务器将很好地处理新会话。要获得这种行为，您需要设置会话状态分区（请参阅[Jon Galloway 的回答](https://stackoverflow.com/questions/74190/can-you-have-more-than-one-asp-net-state-server-service-in-a-cluster/74221#74221)）。

这种行为是设计使然；ASP.NET 状态服务不会在服务器之间复制会话数据。

如果您需要将进程外会话数据复制到多台服务器，则必须使用其中一种商业产品（例如 ScaleOut）或等待 Microsoft Project Velocity 成为生产就绪。就我个人而言，我急切地等待 Velocity 的发布，一旦我对产品有信心，我就会从 ASP.NET 状态服务器切换到它。

[这个链接](http://blogs.msdn.com/velocity/archive/2008/06/05/how-to-use-session-store-provider-microsoft-project-code-named-velocity.aspx)有更多关于 ASP.NET 会话状态的速度。

# vba - MS Word：为“选择性粘贴..无格式文本”选项创建快捷方式或工具栏按钮

> ID：74206
> 
> 赞同：8
> 
> 时间：2008-09-16T16:23:51.030
> 
> 标签：vba, ms-word, ms-office

我已经玩了一段时间了，但我得到的最接近的是一个打开`Paste Special`对话框的按钮，需要再单击几次鼠标才能将剪贴板的内容粘贴为未格式化的文本。

所以我经常`copy-paste`从一个网站到一个我不想要 HTML 格式的额外包袱的文档，如果能够使用快捷键或工具栏按钮来做到这一点会很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T16:27:37.260

使按钮调用宏：

```
public sub PasteSpecialUnformatted()
  selection.pastespecial datatype:=wdpastetext
end sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T17:37:29.317

为此，我建议使用Steve Miller的[PureText轻量级实用程序应用程序。](http://www.stevemiller.net/puretext/)

PureText 在您的系统托盘中运行并侦听全局热键（您可以定义——我使用 Win+V）来执行“粘贴文本无格式”——基本上与打开 notepad.exe 实例的操作相同，粘贴到其中，重新复制生成的纯文本，然后粘贴到实际的目标应用程序中。

这种方法的优点是您将能够在任何应用程序中执行“粘贴文本无格式”，而不仅仅是在 Word 中。

几年前我第一次安装了 PureText，从那以后就一直在大量使用它。它已成为我的“必备”实用程序。强烈推荐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T17:44:03.723

我为此使用[FingerTips 。](http://www.getfingertips.com/)默认情况下，它将使 CTRL+W -> 选择性粘贴。此外，它还支持宏文本和许多有用的启动程序——快速的东西和一些 Microsoft Outlook 技巧来支持完成工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T06:42:10.247

您可以简单地在 MS Word 2007 和更高版本中使用快速访问面板。

[在 MS Office](http://dadecoder.blogspot.in/2013/02/add-shortcut-buttons-in-ms-word-2007.html)中添加快捷按钮非常简单

并为普通用户节省了大量时间。

# ruby-on-rails - 如何在 Mongrel 下重启 Rails，而不停止和启动 Mongrel

> ID：74218
> 
> 赞同：8
> 
> 时间：2008-09-16T16:25:23.867
> 
> 标签：ruby-on-rails, mongrel

有没有办法在 Mongrel 运行时重新启动 Rails 应用程序（例如，当您更改插件/配置文件时）。或者快速重启 Mongrel。Mongrel 给出了这些提示，你可以，但你是怎么做到的？

** 信号准备就绪。期限 => 停止。USR2 => 重启。INT => 停止（不重新启动）。

** Rails 信号已注册。HUP => 重新加载（无需重新启动）。它可能无法正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T17:50:17.593

You can add the -c option if the config for your app's cluster is elsewhere:

```
mongrel_rails cluster::restart -c /path/to/config 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-18T05:36:33.753

第一次发现当前的 mongrel pid 路径，例如：

> >ps axf | fgrep 杂种

您将看到如下流程线：

**ruby /usr/lib64/ruby/gems/1.8/gems/swiftiply-0.6.1.1/bin/mongrel_rails start -p 3000 -a 0.0.0.0 -e development -P /home/xxyyzz/rails/myappname/tmp/pids/杂种.pid -d**

使用 '-P /home/xxyyzz/rails/myappname/tmp/pids/mongrel.pid' 部分并像这样使用它：

> >mongrel_rails 重启 -P /home/xxyyzz/rails/myappname/tmp/pids/mongrel.pid

**将 USR2 发送到 PID 18481 的 Mongrel...完成。**

我用它来从可怕的“断管”恢复到 MySQL 问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T17:47:28.893

在您的 Rails 主目录中

```
mongrel_rails cluster::restart 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T16:27:47.213

例如，

```
killall -USR2 mongrel_rails 
```

# c# - 是否可以将 GroupTemplate (.NET) 建立在固定记录数之外的任何基础上？

> ID：74224
> 
> 赞同：1
> 
> 时间：2008-09-16T16:26:03.147
> 
> 标签：c#, .net, listview

我想使用 ListView 来显示我的数据库中的分组数据。由于查询的结构方式，每个逻辑组可能有 1**或**2 条记录与之关联。无论如何要使用 GroupTemplate，同时覆盖 GroupItemCount 行为？理想情况下，我希望它以 SQL 的方式运行——分配一个列 ID，并让它监视值的变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T07:34:16.197

[好的，它是，很好的记录](http://www.4guysfromrolla.com/articles/091708-1.aspx)

将这种功能直接构建到控件中会很好，这样您就可以使用标记简单地指定这个“监视”字段。

同样，这就是我切换到 ListView 的原因，以尽量避免像这样您必须手动注入自己的 HTML 的冗长解决方法。我敢打赌，他们最终会添加这个功能，然后声称 .Net 4.0 是多么的神奇。

一直以来，我越来越有理由避开不灵活的 .Net 并使用更“直接”的 HTML 操作平台之一（PHP + CodeIgnitor）。如果您完全精通 CSS 和 HTML 并且向后了解它们，您会发现 .Net 超级每次都令人沮丧，因为您只是“无法完全进入那里”并快速完成您需要做的事情，而无需寻找解决方法时间。

摘要： ASP.Net 还没有出现。

# java - 在 JSTL/JSP 中，给定一个 java.util.Date，我如何找到第二天？

> ID：74248
> 
> 赞同：1
> 
> 时间：2008-09-16T16:29:26.493
> 
> 标签：java, jsp, jstl

在 JSTL/JSP 页面上，我的应用程序中有一个 java.util.Date 对象。我需要找到该对象指定的*后一天。*我可以使用 <jsp:scriptlet> 进入 Java 并使用 java.util.Calendar 进行必要的计算，但这对我来说感觉很笨拙和不优雅。

是否有某种方法可以使用 JSP 或 JSTL 标签来实现这一目标，而无需切换到全 Java，或者后者是实现这一目标的唯一方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T17:11:20.353

我不喜欢将 java 代码放入您的 jsp 中。

我会使用静态方法和 taglib 来完成此操作。

不过只是我的想法。有很多方法可以解决这个问题。

```
public static Date addDay(Date date){
   //TODO you may want to check for a null date and handle it.
   Calendar cal = Calendar.getInstance();
   cal.setTime (date);
   cal.add (Calendar.DATE, 1);
   return cal.getTime();
} 
```

函数.tld

```
<?xml version="1.0" encoding="UTF-8" ?>
<taglib xmlns="http://java.sun.com/xml/ns/j2ee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd"
  version="2.0">
  <description>functions library</description>
  <display-name>functions</display-name>
  <tlib-version>1.1</tlib-version>
  <short-name>xfn</short-name>
  <uri>http://yourdomain/functions.tld</uri>
  <function>
    <description>
      Adds 1 day to a date.
    </description>
    <name>addDay</name>
    <function-class>Functions</function-class>
    <function-signature>java.util.Date addDay(java.util.Date)</function-signature>
    <example>
      ${xfn:addDay(date)}
    </example>
  </function>
</taglib> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T16:33:21.617

虽然这不能回答您最初的问题，但您可以通过执行以下操作来消除通过 java.util.Calendar 的麻烦：

```
// Date d given
d.setTime(d.getTime()+86400000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T17:03:13.650

您必须使用 scriptlet 或编写自己的标签。作为记录，使用日历看起来像这样：

```
Calendar cal = Calendar.getInstance();
cal.setTime (date);
cal.add (Calendar.DATE, 1);
date = cal.getTime (); 
```

真可怕。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T17:08:09.630

不幸的是，我所知道的标准 JSP/JSTL 库中没有允许您进行此日期计算的标记。

最简单、最不优雅的解决方案是只使用一些 scriptlet 代码来进行计算。你已经说过你认为这是一个笨拙的解决方案，我同意你的看法。如果我是你，我可能会编写一个自定义 JSP taglib 来获得这个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T19:46:14.943

一般来说，我认为 JSP 不应该有数据逻辑。他们应该从 Controller 获取他们需要显示的所有数据，并且他们的所有逻辑都应该是关于如何显示数据，而不是显示什么。这通常比添加自定义标签简单得多，代码/XML 也少得多。

如果没有任何重用发生，那么一个小的 scriptlet 真的比 taglib XML 差那么多吗？

# asp.net - Architect Database 允许应用使用 Windows 集成身份验证或 FBA

> ID：74258
> 
> 赞同：0
> 
> 时间：2008-09-16T16:30:38.703
> 
> 标签：asp.net, authentication

我正在编写一个将分发的 Web 应用程序，我希望允许安装程序在使用集成身份验证或 FBA 之间进行选择。使用 web.config 在它们之间切换显然非常容易。我正在尝试确定如何最好地构建数据库和代码以接受来自 aspnetdb 的 windows-sid 或 UserID。

例如，WSS 3.0 允许 Windows 集成身份验证或使用任何成员资格提供程序的 FBA。他们如何在他们的数据库架构中处理这个问题？网络上有什么好的指南可以提供一些指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T18:27:59.500

我认为这比你想象的要容易得多。

首先，集成身份验证与 Windows SID 无关。启用集成身份验证后， [HttpContext.Current.User.Identity.Name](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)将是“DOMAIN\User”，而不是 Windows SID。

因此，如果使用 Windows 身份验证，您仍然会有一个用户表，其中有一列用于保存 DOMAIN\User。

如果您需要更多说明，请告诉我。

# database - 什么时候该更改数据库后端？

> ID：74261
> 
> 赞同：1
> 
> 时间：2008-09-16T16:31:31.417
> 
> 标签：database, backend

在存储 Web 应用程序数据以了解应该使用哪个数据库后端时，是否有一般的经验法则可以遵循？每天的点击数、数据行数或其他指标是我在选择时应该考虑的吗？

我最初的想法是这个顺序看起来像下面这样（但不一定，这就是我问这个问题的原因）。

1.  平面文件
2.  发展局
3.  SQLite
4.  MySQL
5.  PostgreSQL
6.  SQL 服务器
7.  甲骨文

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-16T16:34:06.480

这不是那么容易。唯一的一般经验法则是，当当前的解决方案无法跟上时，您应该寻找另一种解决方案。这可能包括使用不同的软件（不一定以任何全局固定顺序）、硬件或架构。

与切换到另一个随机存储后端相比，使用[memcached](http://danga.com/memcached/)之类的缓存数据可能会给您带来更多好处。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T16:35:57.350

如果您认为您将需要其中一个重量级（SqlServer、Oracle），那么您应该从一开始就使用其中一个。数据迁移非常困难。从长远来看，从顶部开始并留在那里会花费更少。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T16:37:52.493

我认为您的排名过于具体。对于非常小的数据集，您几乎可以从平面文件等开始，对于不需要类似 SQL 语法的稍大的数据集，可以使用 DBM 之类的东西，然后再使用某种 SQL 数据库。

但是谁愿意做所有的重写呢？如果应用程序将受益于对连接、存储过程、触发器、外键验证等的访问 - 只需使用 SQL 数据库，而不管数据集大小如何。

*哪一个*应该更多地取决于客户的现有安装以及可用的 DBA 技能，而不是您持有的数据量。

换句话说，数据库的大小远不是唯一的考虑因素，也可能不是最重要的考虑因素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T16:46:57.167

对此没有一概而论的答案，但几乎总是，使用平面文件不是一个好主意。您必须解析它们（我想）并且它们不能很好地扩展。从合适的数据库开始，如 Oracle 或 SQL Server（或 MySQL、Postgres，如果您正在寻找免费选项）是一个好主意。只需很少的开销，您就可以在以后省去很多精力和头痛。它们还允许您以不愚蠢的方式构建数据，让您可以自由地思考您将如何处理数据，而不是如何输入/输出数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T16:52:49.820

这实际上取决于您的数据，以及您打算如何使用它。在我之前的一个职位上，我们使用了 Postgres，因为它存在本地地理位置和时区扩展，因为它允许我们使用多边形数据类型来管理我们的数据。对我们来说，我们需要这样做，而且我们还想使用存储过程、视图等。

现在，我工作的另一个地方使用 MySQL 只是因为数据是标准化的，标准的逐行数据。

很长一段时间以来，SQL Server 都有 4gb 的数据库限制（请参阅 SQL Server 2000），但尽管有此限制，但对于清除旧数据的中小型应用程序来说，它仍然是一个非常稳定的平台。

现在，从使用 Oracle 和 SQL Server 05/08 开始，我只能告诉你，如果你想要最好的稳定性、可扩展性和灵活性，那么这两个是你最好的选择。对于企业应用程序，我强烈推荐它们（仅仅是因为这是我们现在工作的地方）。

其他需要考虑的事项：

*   语言集成（ASP.NET 会话存储、角色管理等）
*   查询类型（选择、更新、删除）[虽然这更多是模式设计问题，而不是 DBMS 问题）
*   数据存储要求

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T16:33:11.100

您的应用程序对数据库的利用是最关键的。主要是最常使用哪些查询（SELECT、INSERT 或 UPDATE）？

假设您使用 SQLite，它适用于较小的应用程序，但对于“Web”应用程序，您可能会使用更大的应用程序，例如 MySQL 或 SQL Server。

您编写脚本和 Web 应用程序平台的方式也很重要。如果您在 Microsoft 平台上进行开发，那么 SQL Server 是一个更好的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T16:36:04.777

通常，我会使用我使用的任何框架普遍接受的内容。所以，如果我在做 .NET => SQL Server、Python（通过 Django 或 Pylons）=> MySQL 或 SQLite。

我几乎从不使用平面文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T16:37:43.570

选择仅“后端马力”的 RDBMS 解决方案还有更多。例如，具有提交控制的能力，因此您可以回滚失败的事务，这就是其中之一。原因。

除非您使用的是超大交易率应用程序，否则大多数数据库引擎就足够了 - 所以问题在于您想为软件支付多少费用，它是否在您想要的硬件和操作系统环境上运行，以及您拥有什么专业知识在管理该软件时。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T16:41:22.687

这种进展听起来很痛苦。如果您要在任何地方包含 MS 产品（尤其是付费 SQL Server），您也可以使用整个堆栈，因为您只需为其中的最后一个付费：

```
SQL Server Compact -> SQL Server Express -> SQL Server Enterprise (clustered). 
```

如果您最初将应用程序定位在 SQL Server Compact，则可以保证您的所有 SQL 代码无需修改即可扩展到下一个版本。如果您比 SQL Server Enterprise 更大，那么恭喜您。这就是他们所说的*好*问题。

另外：返回并查看 SO 播客。我相信他们简短地谈到了这一点。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T16:43:08.177

这个问题真的取决于你的情况。

如果您可以控制要部署到的服务器并且可以安装所需的任何服务，那么安装 MySql 或 MSSQL Express 服务器并针对现有数据库框架进行编码与针对平面文件结构进行编码的时间是不值得的的考虑。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T16:53:01.710

火鸟呢？那将在哪里适合该列表？

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T16:57:09.653

并且不要忘记您的解决方案的“客户”也必须具备的要求。如果您为小公司编写商业应用程序，那么 Oracle 可能不是一个好的选择... Oracle 与 Sql Server 的决定将归结为客户最有可能已经部署了什么。

现在的数据迁移并没有那么糟糕，因为我们拥有来自 Embarcadero 的那些出色工具，所以我宁愿让客户需求驱动决策。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T17:03:10.110

如果您有选项，SQL Server 是一个不错的选择，主要是因为您可以访问可靠的过程和功能，并且数据库备份工具是完全可靠的。尽可能多地在数据库本身中包含逻辑（而不是使用您使用的任何语言）有助于安全性和性能 - 确实有一个很好的论据可以始终使用插入/更新逻辑的过程，因为这些使您对注入攻击无懈可击。

如果我可以选择，我唯一会优先考虑 MySQL 的情况是使用一个主要用于读取访问的大型、相当简单的数据库。这并不是要谴责最近已经显着改进的 MySQL，如果我没有选择，我很乐意使用，但是对于具有更新/插入活动的更复杂的系统，MSSQL 通常是更好的选择。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2008-09-16T16:35:19.147

我认为你的名单是主观的，但我会玩你的游戏。

平面文件

发展局

SQLite

MySQL

PostgreSQL

SQL 服务器

甲骨文

太极数据

# javascript - 将 ext Combobox 中的建议值渲染到 DOM 中的元素

> ID：74266
> 
> 赞同：2
> 
> 时间：2008-09-16T16:31:59.527
> 
> 标签：javascript, extjs

我有一个 ext 组合框，它使用商店在用户键入时向他们建议值。

可以在此处找到一个示例：[组合框示例](http://extjs.com/deploy/ext/examples/form/combos.html)

有没有办法让**建议的文本列表**呈现给 DOM 中的元素。请注意，我不是指“applyTo”配置选项，因为这会渲染整个控件，包括 DOM 元素的文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T18:45:21.017

您可以为此使用插件，因为您可以从插件中调用甚至覆盖私有方法：

```
var suggested_text_plugin = {

    init: function(o) {

        o.onTypeAhead = function() {
            // Original code from the sources goes here:

            if(this.store.getCount() > 0){
                var r = this.store.getAt(0);
                var newValue = r.data[this.displayField];
                var len = newValue.length;
                var selStart = this.getRawValue().length;
                if(selStart != len){
                    this.setRawValue(newValue);
                    this.selectText(selStart, newValue.length);
                }
            }

         // Your code to display newValue in DOM
         ......myDom.getEl().update(newValue);
        };
    }
};

// in combobox code:

var cb = new Ext.form.ComboBox({
    ....
    plugins: suggested_text_plugin,
    ....
}); 
```

我认为甚至可以创建一个完整的方法链，在您的方法之前或之后调用原始方法，但我还没有尝试过。

另外，请不要因为使用非标准插件定义和调用方法（未记录）而强迫我。这只是我看待事物的方式。

编辑：

我认为方法链可以实现类似的东西（未经测试）：

```
....
o.origTypeAhead = new Function(this.onTypeAhead.toSource());
// or just
o.origTypeAhead = this.onTypeAhead;
....

o.onTypeAhead = function() {
    // Call original
    this.origTypeAhead();
    // Display value into your DOM element
    ...myDom....
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T17:36:36.260

@qui

要考虑的另一件事是 initList 不是 API 的一部分。该方法可能会消失，或者在 Ext 的未来版本中行为可能会发生显着变化。如果您从不打算升级，那么您无需担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T17:14:14.153

所以澄清一下，您希望所选文本呈现在文本输入正下方之外的某个地方。正确的？

ComboBox 只是[Ext.DataView](http://extjs.com/deploy/dev/docs/?class=Ext.DataView)、文本输入和可选触发按钮的组合。对于您想要的东西没有正式的选择，并且破解它以使其做您想做的事情真的很痛苦。因此，最简单的操作过程（除了查找和使用具有完全符合您要求的组件的其他库）是使用上面的组件构建您自己的：

1.  创建一个文本框。如果需要，您可以使用[Ext.form.TextField并观察 keyup 事件。](http://extjs.com/deploy/dev/docs/?class=Ext.form.TextField)
2.  创建一个绑定到您的商店的 DataView，呈现到您想要的任何 DOM 元素。根据您的需要，收听“selectionchange”事件并采取您需要的任何操作来响应选择。例如，Ext.form.Hidden（或纯 HTML 输入 type="hidden" 元素）上的 setValue。
3.  在您的 keyup 事件侦听器中，调用商店的过滤器方法（请参阅[doc](http://extjs.com/deploy/dev/docs/?class=Ext.data.Store)），从文本字段中传递字段名称和值。例如，store.filter('name',new RegEx(value+'.*'))

这需要更多的工作，但它比从头开始编写自己的组件或破解 ComboBox 以使其表现得像你想要的那样短得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T10:20:46.387

@Thevs

我认为你在正确的轨道上。

我所做的是覆盖 Combobox 的 initList 方法。

```
 Ext.override(Ext.form.ComboBox, {
    initList : function(){ 
```

如果您查看代码，您可以看到它将建议列表呈现给数据视图的位。所以只需将 apply 设置为您想要的 dom 元素：

```
 this.view = new Ext.DataView({
            //applyTo: this.innerList,
            applyTo: "contentbox", 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T14:18:40.917

@qui

行。我以为你想要一个额外的 DOM 字段（除了现有的组合字段）。

但是您的解决方案会覆盖 ComboBox 类中的方法，不是吗？这将导致你所有的组合框都渲染到同一个 DOM。使用插件只会覆盖一个特定的实例。

# batch-file - 如果出现错误，如何获取批处理文件 .bat 继续执行下一条语句

> ID：74267
> 
> 赞同：20
> 
> 时间：2008-09-16T16:32:17.890
> 
> 标签：batch-file

我正在尝试在 .bat 中编写关闭 VM 服务器的脚本。如果 vmware-cmd 命令之一失败（因为机器已经关闭），我希望它继续而不是轰炸。

```
c:
cd "c:\Program Files\VMWare\VmWare Server"

vmware-cmd C:\VMImages\TCVMDEVSQL01\TCVMDEVSQL01.vmx suspend soft -q
vmware-cmd C:\VMImages\DevEnv\DevEnv\DevEnv.vmx suspend soft -q
vmware-cmd C:\VMImages\DevEnv\TCVMDEV02\TCVMDEV02.vmx suspend soft =q

robocopy c:\vmimages\ \\tcedilacie1tb\VMShare\DevEnvironmentBackups\ /mir /z /r:0 /w:0

vmware-cmd C:\VMImages\TCVMDEVSQL01\TCVMDEVSQL01.vmx start
vmware-cmd C:\VMImages\DevEnv\DevEnv\DevEnv.vmx start 
vmware-cmd C:\VMImages\DevEnv\TCVMDEV02\TCVMDEV02.vmx start 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-09-16T16:37:59.950

在另一个命令实例中运行它`CMD /C`

```
CMD /C vmware-cmd C:\... 
```

这应该保持原始 BAT 文件运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T16:55:15.820

如果您正在调用另一个批处理文件，则必须使用 CALL batchfile.cmd

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T16:36:17.210

您是否尝试过对正在执行的每个命令使用“start (cmd)”？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T16:37:15.147

您可以编写一个小程序来执行命令并返回一个值（例如 -1 表示错误）。然后可以在您的批处理文件中使用此值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T16:43:17.253

即使前面的命令产生了错误，批处理文件也应该继续执行。也许，您看到的是由于其他错误导致批处理中止？

# apache-flex - invalidateList 和 invalidateDisplayList 有什么区别？

> ID：74269
> 
> 赞同：10
> 
> 时间：2008-09-16T16:32:36.687
> 
> 标签：apache-flex, datagrid

我有一个 DataGrid，填充了 ArrayCollection 中的对象。更新对象的字段之一后，我希望屏幕更新。数据源不可绑定，因为我是在运行时构建它（而且我还不明白如何让它在运行时可绑定——这是另一个问题）。

在这种情况下，如果我在网格上调用 InvalidateDisplayList() 似乎什么也没有发生。但如果我调用 invalidateList()，就会发生更新。（而且它也非常流畅——没有像我期望的那样在 WIN32 中使窗口无效的闪烁。）

那么问题来了：InvalidateList 和 InvalidateDisplayList 有什么区别？从文档看来，任何一个都应该工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-16T16:55:33.810

invalidateList 告诉组件数据发生了变化，需要重新加载并重新渲染。

invalidateDisplayList 告诉组件它需要重绘自己（但不一定要重新加载它的数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T16:53:28.603

invalidateDisplayList() 仅设置一个标志，以便稍后可以在屏幕更新期间调用 updateDisplayList()。invalidateList() 是你想要的。

[http://livedocs.adobe.com/flex/2/langref/mx/core/UIComponent.html#invalidateDisplayList()](http://livedocs.adobe.com/flex/2/langref/mx/core/UIComponent.html#invalidateDisplayList())

# java - 处理照片上传的最佳方式是什么？

> ID：74315
> 
> 赞同：11
> 
> 时间：2008-09-16T16:37:26.783
> 
> 标签：java, php, javascript, flash

我正在为一个家庭成员的婚礼做一个网站。他们要求的一个功能是一个照片部分，所有客人都可以在婚礼后去上传他们的照片。我说这是一个很棒的想法，然后我开始构建它。

好吧，只有一个问题：物流。上传速度很慢，来自现代相机的照片很大（2-5+Megs）。

我只需要〜800px宽的图像，其中一些可能需要旋转，所以理想情况下我正在寻找使用客户端编辑器来做三件事：

1.  让用户选择多个文件
2.  让他们旋转一些图像，使它们正确向上
3.  调整它们的大小，然后上传

在我的梦想世界中，它将是免费和开源的。有任何想法吗？

提醒一下：这是客人必须使用的东西。他们中的一些人非常精通计算机，但其他人几乎完全是文盲。安装桌面应用程序并不是一个真正的选择。我假设其中 98% 都安装了 Flash 和 Java。

编辑：与 SilverLight 相比，我更喜欢 Flash/Java 选项，不仅因为它目前的安装率较小，而且因为我在 Linux 上并且我想对其进行测试 =)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T16:43:00.063

我在[画廊](http://gallery.menalto.com/)很幸运。它是免费的、开源的，并且具有您提到的所有功能。

它将允许您的用户上传照片而无需您的任何干预。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T16:44:47.687

另一种选择是允许人们将他们的照片上传到他们习惯使用的任何服务（flickr、google、smugmug 或任何其他服务），并且只需接受该服务的用户名或文件夹的 URL。

然后，您可以让您的应用程序获取这些图片的副本以使用一致的界面存储在本地。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-27T23:05:29.970

最常见的解决方案是 java 小程序，尽管它们中的大多数都不是免费的。例子：

*   [http://www.jumploader.com/](http://www.jumploader.com/)
*   [http://www.aurigma.com/Products/ImageUploader/OnlineDemo.aspx](http://www.aurigma.com/Products/ImageUploader/OnlineDemo.aspx)
*   [http://www.javaatwork.com/java-upload-applet/details.html](http://www.javaatwork.com/java-upload-applet/details.html)
*   ScArcher2提到的JUpload

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T17:20:54.403

我用过很多次swfupload。非常棒：[http ://www.swfupload.org/](http://www.swfupload.org/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T16:49:03.683

如果您使用 Flash 并使用 Flickr 执行此操作，那么我会查看 AS3 Flickr 库：

[http://code.google.com/p/as3flickrlib/](http://code.google.com/p/as3flickrlib/)

支持上传图片。

上传需要身份验证。该库还包含一个基于 Flex 的控件来处理此问题：

[http://www.mikechambers.com/blog/2008/08/12/flex-based-flickr-api-authorization-control/](http://www.mikechambers.com/blog/2008/08/12/flex-based-flickr-api-authorization-control/)

（库的其余部分是 ActionScript 3，可用于 Flex 或 Flash。

可能最简单的解决方案是将图像上传到 Flickr，在 Picnik 中编辑（现在内置在 Flickr 中），然后使用 Flickr RSS 提要或 API 加载到用户站点：

[http://www.flickr.com/help/picnik/](http://www.flickr.com/help/picnik/)

[http://www.flickr.com/services/api/](http://www.flickr.com/services/api/)

希望有帮助...

迈克室

网格@adobe.com

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T17:19:33.563

我会使用一个小程序。您可以在客户端调整图片大小和旋转。

看起来[JUpload](http://sourceforge.net/projects/jupload/)可能会为您执行此操作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T16:39:18.030

[Picasa](http://picasa.google.com/)是一个非常棒/免费的照片管理应用程序。它可以让您进行一些令人印象深刻的编辑，并具有上传功能，但我不记得它是否会上传到任何地方，或者只是某些流行的网站（如 Flickr）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T16:40:17.713

您可以使用 Silverlight 或 Flash 或一些自定义插件来允许托管上传，例如，您可以在其中显示进度条。关于上传速度，您无能为力，但您至少可以在上传速度上向他们展示进度。

我不知道您可以使用任何罐装上传程序，但制作一个应该不会太难（除非您不知道 Flash 或 Silverlight）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-16T16:43:44.103

[使用PhotoShop Online](https://www.photoshop.com/express/landing.html)怎么样？它允许您使用基于 Web 的编辑器编辑照片，并提供 2GB 的存储空间。我自己没有使用过，所以不知道它是否允许多个用户访问同一个帐户

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-16T16:44:41.930

出于好奇，这是在什么网络堆栈上运行的？灯？2k3+IIS？等等等等？那里的许多开源解决方案都是跨平台的，但其他的不是...

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-16T16:48:24.420

**通过电子邮件发送照片**是否可用？

大多数想要分享照片的人可能已经知道如何通过电子邮件发送照片。大多数电子邮件客户端已经解决了文件上传的问题。

只需设置一个 gmail/whatevermail 帐户并让您的网站轮询收件箱。

这类似于[TwitPic](http://twitpic.com/)为 twitter 所做的事情，但您的要求似乎比这更简单。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T16:52:25.487

就个人而言，大多数用户不了解 DPI，而且他们的图像甚至被修剪后最终会比大多数托管公司允许的 php.ini 更大。

我不确定你想给他们多少控制权，或者你希望公众如何表现。

我建议使用保管箱 FTP 应用程序，例如[http://etonica.com/dropbox/index.html](http://etonica.com/dropbox/index.html) (tango dropbox) 它对您的客户是免费的，您只需为您的版本付费，这样您就可以设置 FTP 信息并保护它。

我会让他们下载一些链接paint.net（它是免费的）让他们将照片编辑到适当的大小，然后将它们拖放到这个应用程序中。这很简单，不需要修改 php.ini。

您还可以使用像 slideshowpro 的 director 应用程序这样的东西。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-16T17:02:26.460

我完全同意 zigdon，允许不同的站点，但只从网络上获取照片。我仍然想允许上传，并限制大小。

现在，如果你想把自己投入到一些大事中，我建议限制大小，然后使用 JQuery（或其他库）来处理图像。

只是我的 2 美分

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-16T17:05:17.373

您也可以让他们通过电子邮件将图片发送到 picasa。Picasa 网络有一项功能，您可以将图像发送到“秘密”电子邮件，然后将它们发布到 picasa 帐户。设置一个 picasa 帐户，分发“秘密”电子邮件，然后等待所有图片显示出来。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-17T00:15:22.863

走 Flickr 路线很容易，而且效果很好。

如果您想更高级，我建议您使用[snipshot](http://snipshot.com/services/)或[picknik](http://www.picnik.com/info/api)（Flickr 使用它）。两者都可以免费使用，并且有 API 可供使用。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-17T05:11:07.113

取决于网络服务器。如果您可以使用 servlet，请尝试以下操作：

```
// UploadServlet.java : Proof of Concept - Mike Smith March 2006
// Accept a file from the client, assume it is an image, rescale it and save it to disk for later display
import javax.servlet.http.*;
import javax.imageio.*;
import java.io.*;
import java.util.*;
import java.sql.*;
import org.apache.commons.fileupload.*;
import org.apache.commons.fileupload.disk.*;
import org.apache.commons.fileupload.servlet.*;
import java.awt.image.*;
import java.awt.*;

public class UploadServlet extends HttpServlet  {

public static void printHeader(PrintWriter pw)  {
    pw.println("<HEAD><TITLE>Upload Servlet</TITLE><HEAD>");
    pw.println("<BODY>");
}

public static void printTrailer(PrintWriter pw)  {
    pw.println("<img src=\"../images/poweredby.png\" align=left>");
    pw.println("<img src=\"../images/tomcat-power.gif\" align=right>");
    pw.println("</BODY></HTML>");
}

public void init()  {  // Servlet init() : called when the servlet is LOADED (not when invoked)
}

public void service(HttpServletRequest req, HttpServletResponse res)   throws IOException {
    DiskFileItemFactory dfifact;
    ServletFileUpload sfu; 
    java.util.List items;
    Iterator it;
    FileItem fi;
    String field, filename, contype;
    boolean inmem, ismulti;
    long sz;
    BufferedImage img;
    int width, height, nwidth, nheight, pixels;
    double scaling;
    final int MAXPIXELS = 350 * 350;

    res.setContentType("text/html");
    PrintWriter pw = res.getWriter();
    printHeader(pw);

    ismulti = FileUpload.isMultipartContent(req);
    if (ismulti)  {
        pw.println("Great! Multipart detected");
        dfifact = new DiskFileItemFactory(999999, new File("/tmp"));
        sfu = new ServletFileUpload(dfifact);
        try  {
            items = sfu.parseRequest(req);
        } catch (FileUploadException e)  {
            pw.println("Failed to parse file, error [" + e  + "]");
            printTrailer(pw);
            pw.close();
            return;
        }
        it = items.iterator();
        while (it.hasNext())  {
            fi = (FileItem) it.next();
            if (fi.isFormField())  {
                pw.println("Form field [" + fi.getFieldName() + "] value [" + fi.getString() + "]");
            }
            else  {  // Its an upload
                field = fi.getFieldName();
                filename = fi.getName();
                contype = fi.getContentType();
                inmem = fi.isInMemory();
                sz = fi.getSize();
                pw.println("Upload field=" + field + " file=" + filename + " content=" + contype + " inmem=" + inmem
                    + " size=" + sz);
               InputStream istream = fi.getInputStream();
               img = ImageIO.read(istream);
               nwidth = width = img.getWidth();
               nheight = height = img.getHeight();
               pixels = width * height;
               if (pixels > MAXPIXELS)  {
                   scaling = Math.sqrt((double) MAXPIXELS / (double) pixels);
                   nheight = (int) ((double) height * scaling);
                   nwidth = (int) ((double) width * scaling);
               }
               BufferedImage output = new BufferedImage(nwidth, nheight, BufferedImage.TYPE_3BYTE_BGR);
               Graphics2D g = output.createGraphics();
               g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
               g.drawImage(img, 0, 0, nwidth, nheight, null);
               ImageIO.write(output, "jpeg", new File("/var/tomcat/webapps/pioneer/demo.jpg"));
               istream.close(); 
            }
        }
    }
    else
        pw.println("Bugger! Multipart not detected");
        printTrailer(pw);
        pw.close();
}

public void destroy()  {
}
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-09-25T00:12:38.597

我目前需要实现与 Oli 类似的要求。

我相信 Facebook.com 使用某种 java 小程序，它工作得很好，但我不确定该小程序是否可用作 OSS。我将研究 ScArcher2 建议的 JUpload。

如果您没有任何其他好的小程序，请继续提供。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-09-27T23:15:31.850

我**强烈**建议使用Lussomo 的[FileBrowser](http://thefilebrowser.com/)。就像“拖放”一样简单：D

我已经将它用于我的游戏开发团队，我们有超过 200 个概念艺术图像的原始转储，我们只需将 FileBrowser 提取到支持 PHP 的网络服务器并将图像转储到适当的目录（每个专辑 1 个），然后运行缩略图脚本。它处理图像的裁剪，并为您优化它们的大小。比使用 Menalto Gallery 之类的东西要好得多，您必须通过笨拙的上传界面上传它们。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-01-31T21:21:46.750

试试这个 [http://www.lunarvis.com/products/tinymcefilebrowserwithupload.php](http://www.lunarvis.com/products/tinymcefilebrowserwithupload.php)

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2008-09-16T16:42:29.317

GIMP ( [http://www.gimp.org/](http://www.gimp.org/) ) 是一个很好的调整大小的工具并且是开源的。

# c++ - 我应该如何检测大型 C++ 项目中不必要的#include 文件？

> ID：74326
> 
> 赞同：100
> 
> 时间：2008-09-16T16:38:54.830
> 
> 标签：c++, visual-studio-2008, include, header, dependencies

我正在 Visual Studio 2008 中处理一个大型 C++ 项目，并且有很多包含不必要`#include`指令的文件。有时`#include`s 只是工件，删除它们后一切都可以正常编译，而在其他情况下，可以向前声明类，并且可以将 #include 移动到`.cpp`文件中。有没有什么好的工具可以检测这两种情况？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-09-16T16:54:14.200

虽然它不会显示不需要的包含文件，但 Visual Studio 有一个设置`/showIncludes`（右键单击`.cpp`文件，`Properties->C/C++->Advanced`），它将在编译时输出所有包含文件的树。这有助于识别不需要包含的文件。

您还可以查看 pimpl idiom 以减少头文件依赖项，从而更轻松地查看可以删除的内容。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-09-16T17:34:20.393

[PC Lint](http://www.gimpel.com/html/pcl.htm "PC皮棉")可以很好地解决这个问题，它还可以为您发现各种其他愚蠢的问题。它具有可用于在 Visual Studio 中创建外部工具的命令行选项，但我发现[Visual Lint](http://www.riverblade.co.uk/products/visual_lint/index.html "视觉棉绒")插件更易于使用。甚至 Visual Lint 的免费版本也有帮助。但是给 PC-Lint 一个机会。配置它以便它不会给你太多警告需要一些时间，但你会惊讶于它的出现。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2011-02-24T19:28:21.377

有一个新的基于 Clang 的工具[include-what-you-use](https://github.com/include-what-you-use/include-what-you-use)旨在做到这一点。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2008-09-17T11:06:14.047

!!免责声明！我使用商业静态分析工具（不是 PC Lint）。!!免责声明！

简单的非解析方法存在几个问题：

1) 过载集：

重载函数的声明可能来自不同的文件。可能是删除一个头文件会导致选择不同的重载，而不是编译错误！结果将是语义上的静默变化，之后可能很难追踪。

2) 模板特化：

与重载示例类似，如果您对模板有部分或显式特化，则希望在使用模板时它们全部可见。可能是主模板的特化位于不同的头文件中。使用特化删除标头不会导致编译错误，但如果选择了特化，则可能导致未定义的行为。（参见：[C++ 函数模板特化的可见性](https://stackoverflow.com/questions/59331/visibility-of-template-specialization-of-c-function)）

正如“msalters”所指出的，对代码进行全面分析还可以分析类的使用情况。通过检查如何通过特定的文件路径使用类，可以完全删除类的定义（以及因此它的所有依赖项），或者至少将其移动到更接近包含中主要源的级别树。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-09-16T17:00:00.257

不知道有没有这样的工具，以前也想过写一个，结果发现这是一个很难解决的问题。

假设你的源文件包含 ah 和 bh；ah contains`#define USE_FEATURE_X`和 bh 使用`#ifdef USE_FEATURE_X`. 如果`#include "a.h"`被注释掉，您的文件可能仍然可以编译，但可能无法达到您的预期。*以编程*方式检测这一点并非易事。

无论使用什么工具，这都需要了解您的构建环境。如果 ah 看起来像：

```
#if defined( WINNT )
   #define USE_FEATURE_X
#endif 
```

Then`USE_FEATURE_X`仅在定义时才定义`WINNT`，因此该工具需要知道编译器本身生成哪些指令以及在编译命令中而不是在头文件中指定哪些指令。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-09-16T16:58:54.207

像 Timmermans 一样，我不熟悉任何工具。但我认识的程序员写了一个 Perl（或 Python）脚本来尝试一次注释掉每个包含行，然后编译每个文件。

* * *

看来，现在 Eric Raymond[有一个工具可以做到这一点](http://catb.org/~esr/deheader/)。

谷歌的[cpplint.py](http://google-styleguide.googlecode.com/svn/trunk/cpplint/cpplint.py)有一个“包括你使用的”规则（在许多其他规则中），但据我所知，没有“**只**包括你使用的”。即便如此，它也很有用。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-11-07T21:19:03.637

如果您一般对这个主题感兴趣，您可能想查看 Lakos 的[大型 C++ 软件设计](https://rads.stackoverflow.com/amzn/click/com/0201633620 "大规模 C++ 软件设计")。它有点过时了，但涉及到许多“物理设计”问题，例如找到需要包含的绝对最小标题。我还没有在其他任何地方真正看到过这样的讨论。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-06-26T06:56:30.107

试试[包含管理器](http://www.profactor.co.uk/includemanager.php)。它可以轻松集成到 Visual Studio 中，并可视化您的包含路径，从而帮助您找到不必要的东西。它在内部使用 Graphviz，但还有更多很酷的功能。虽然它是一种商业产品，但它的价格非常低。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2010-03-30T08:32:26.720

[您可以使用C/C++ Include File Dependencies Watcher](http://www.mobile-mir.com/cpp/)构建包含图，并直观地查找不需要的包含。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-09-21T00:40:49.577

如果您的头文件通常以

```
#ifndef __SOMEHEADER_H__
#define __SOMEHEADER_H__
// header contents
#endif 
```

（而不是使用 #pragma 一次）您可以将其更改为：

```
#ifndef __SOMEHEADER_H__
#define __SOMEHEADER_H__
// header contents
#else 
#pragma message("Someheader.h superfluously included")
#endif 
```

而且由于编译器会输出正在编译的 cpp 文件的名称，这至少会让您知道哪个 cpp 文件导致头被多次引入。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-09-27T20:42:30.920

PC-Lint 确实可以做到这一点。一种简单的方法是将其配置为仅检测未使用的包含文件并忽略所有其他问题。这非常简单——只启用消息 766（“模块中未使用的头文件”），只需在命令行中包含选项 -w0 +e766。

同样的方法也可以用于相关消息，例如 964（“模块中未直接使用的头文件”）和 966（“模块中未使用的间接包含的头文件”）。

FWIW 我上周在[http://www.riverblade.co.uk/blog.php?archive=2008_09_01_archive.xml#3575027665614976318](http://www.riverblade.co.uk/blog.php?archive=2008_09_01_archive.xml#3575027665614976318)的博客文章中更详细地写了这个。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-17T04:28:17.387

添加以下一项或两项#defines 将排除通常不必要的头文件，并且可能会大大缩短编译时间，尤其是在不使用 Windows API 函数的代码时。

```
#define WIN32_LEAN_AND_MEAN
#define VC_EXTRALEAN 
```

请参阅[http://support.microsoft.com/kb/166474](http://support.microsoft.com/kb/166474)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-09-17T06:02:15.727

如果您希望删除不必要`#include`的文件以减少构建时间，您的时间和金钱可能最好花在使用[cl.exe /MP](http://msdn.microsoft.com/en-us/library/bb385193.aspx)、[make -j](http://www.gnu.org/software/make/manual/make.html#Parallel)、[Xoreax IncrediBuild](http://www.xoreax.com/solutions_vs.htm)、 distcc/ [icecream](http://en.opensuse.org/Icecream)等并行构建过程上。

当然，如果您已经有一个并行构建过程并且您仍在尝试加快它，那么请务必清理您的`#include`指令并删除那些不必要的依赖项。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-09-17T16:55:16.203

从每个包含文件开始，并确保每个包含文件只包含编译自身所需的内容。C++ 文件中缺少的任何包含文件都可以添加到 C++ 文件本身中。

对于每个包含和源文件，一次注释掉每个包含文件并查看它是否可以编译。

按字母顺序对包含文件进行排序也是一个好主意，如果无法做到这一点，请添加注释。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-17T11:12:51.893

如果您还没有，使用预编译的头文件来包含您不会更改的所有内容（平台头文件、外部 SDK 头文件或项目的静态已完成部分）将大大缩短构建时间。

[http://msdn.microsoft.com/en-us/library/szfdksca(VS.71).aspx](http://msdn.microsoft.com/en-us/library/szfdksca(VS.71).aspx)

此外，尽管对您的项目来说可能为时已晚，但将项目组织成多个部分并且不将所有本地标题集中到一个大的主标题中是一种很好的做法，尽管这需要一些额外的工作。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2011-06-01T12:44:43.387

如果您使用 Eclipse CDT，您可以尝试[http://includator.com](http://includator.com)来优化您的包含结构。但是，Includator 可能对 VC++ 的预定义包含不够了解，并且设置 CDT 以使用具有正确包含的 VC++ 尚未内置到 CDT 中。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-04-26T21:08:59.317

最新的 Jetbrains IDE CLion 会自动显示（灰色）当前文件中未使用的包含。

也可以从 IDE 中获取所有未使用的包含（以及函数、方法等）的列表。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-17T09:17:39.673

一些现有的答案表明这很难。确实如此，因为您需要一个完整的编译器来检测适合前向声明的情况。如果不知道符号的含义，就无法解析 C++；语法太模棱两可了。您必须知道某个名称是命名一个类（可以向前声明）还是一个变量（不能）。此外，您需要了解命名空间。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2010-06-30T14:47:08.617

也许有点晚了，但我曾经发现一个 WebKit perl 脚本可以满足您的需求。我相信它需要一些调整（我不精通 perl），但它应该可以解决问题：

[http://trac.webkit.org/browser/branches/old/safari-3-2-branch/WebKitTools/Scripts/find-extra-includes](http://trac.webkit.org/browser/branches/old/safari-3-2-branch/WebKitTools/Scripts/find-extra-includes)

（这是一个旧分支，因为主干不再有文件）

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-11-10T22:12:07.130

如果您认为不再需要某个特定的标头（例如 string.h），您可以注释掉该包含，然后将其放在所有包含的下方：

```
#ifdef _STRING_H_
#  error string.h is included indirectly
#endif 
```

当然，您的接口标头可能使用不同的#define 约定来记录它们在 CPP 内存中的包含。或者没有约定，在这种情况下，这种方法将不起作用。

然后重建。有三种可能：

*   它构建正常。string.h 不是编译关键的，并且可以删除它的包含。

*   #error 跳闸。string.g 以某种方式间接包含您仍然不知道是否需要 string.h。如果需要，您应该直接#include 它（见下文）。

*   你得到一些其他的编译错误。string.h 是必需的，并且没有被间接包含，因此包含一开始是正确的。

请注意，当您的 .h 或 .c 直接使用另一个 .h 时，取决于间接包含几乎可以肯定是一个错误：您实际上承诺您的代码将只需要该标头，只要您使用的其他标头需要它，这可能不是你的意思。

其他答案中提到的关于修改行为的标头而不是声明导致构建失败的内容的警告也适用于此处。

# c++ - 如何修复 MFC 绘画故障？

> ID：74350
> 
> 赞同：0
> 
> 时间：2008-09-16T16:41:09.897
> 
> 标签：c++, mfc, paint

我正在尝试为我工作中正在开发的材料系统实现一些拖放功能。该系统的一部分包括一个“材料库”，它充当用户硬盘上保存的材料的存储库，分为几组。

作为一些 UI 润色的一部分，我希望实现一个“突出显示”类型的功能。拖放时，您可以合法地将材料拖放到其上的窗口将非常微妙地改变颜色，以改善对用户的反馈，即这是一个有效的操作。

我正在使用“基本材料”（只是带有 CStatic 的 CWnd）的栏从未突出显示时的中等灰色背景变为悬停时的蓝色背景。这一切都很好， OnDragEnter 和 OnDragExit 消息看起来很健壮，并设置了一个指示突出显示状态的标志。然后在 OnCtrlColor 我这样做：

```
 if (!m_bHighlighted) {
    pDC->FillSolidRect(0, 0, m_SizeX, kGroupHeaderHeight, kBackgroundColour);
}
else {
    pDC->FillSolidRect(0, 0, m_SizeX, kGroupHeaderHeight, kHighlightedBackgroundColour);
} 
```

但是，正如您在屏幕截图中看到的那样，被拖动对象下方的绘画“出现故障”，原始灰色留在原地。它看起来真的很丑，基本上破坏了整个效果。

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T22:03:43.850

远程调试是调试视觉问题的天赐之物。设置起来很痛苦，但是让虚拟机准备好进行远程调试肯定会得到回报。

我喜欢做的是在我的绘画处理以及框架绘画代码本身中设置大量断点。这使您可以有效地“定格”这幅画，而不会通过翻转到 devenv 来破坏它。通过这种方式，您可以了解谁以什么顺序绘画的真实情况，以及您有机会在哪里以您需要的方式插入填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T16:55:11.530

看起来 CStatic 几乎不知道它需要重新绘制自己，所以留下了可拖动对象的背景颜色。也许尝试使 CStatic 无效，看看是否有帮助？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T10:05:47.687

谢谢大家的回答，ajryan，你似乎总是为我的问题提供帮助，非常感谢。

谢天谢地，这次答案相当简单......

```
ImageList_DragShowNolock(FALSE);
m_pDragDropTargetWnd->SendMessage(WM_USER_DRAG_DROP_OBJECT_DRAG_ENTER, (WPARAM)pDragDropObject, (LPARAM)(&dragDropPoint));
ImageList_DragShowNolock(TRUE); 
```

这将关闭拖动图像的绘制，然后向正在进入的窗口发送一条消息以在突出显示状态下重新绘制，最后在顶部重新绘制拖动图像。似乎已经成功了。

# perl - 如何让 LWP 验证 SSL 服务器证书？

> ID：74358
> 
> 赞同：48
> 
> 时间：2008-09-16T16:41:49.597
> 
> 标签：perl, ssl, https, lwp

如何让[LWP](http://search.cpan.org/perldoc?LWP)验证我要连接的服务器的证书是否由受信任的机构签署并颁发给正确的主机？据我所知，它甚至不检查证书是否声称是我要连接的主机名。这似乎是一个主要的安全漏洞（尤其是最近的 DNS 漏洞）。

**更新：** 原来我真正想要的是`HTTPS_CA_DIR`，因为我没有 ca-bundle.crt。但`HTTPS_CA_DIR=/usr/share/ca-certificates/`成功了。无论如何，我将答案标记为已接受，因为它足够接近。

**更新 2：**事实证明，`HTTPS_CA_DIR`仅`HTTPS_CA_FILE`当您使用 Net::SSL 作为底层 SSL 库时才适用。但是 LWP 也可以与 IO::Socket::SSL 一起使用，它会忽略这些环境变量并愉快地与任何服务器通信，无论它提供什么证书。有没有更通用的解决方案？

**更新 3：**不幸的是，解决方案仍然不完整。Net::SSL 和 IO::Socket::SSL 都没有根据证书检查主机名。这意味着某人可以获得某个域的合法证书，然后冒充任何其他域而 LWP 不会抱怨。

**更新 4：** [LWP 6.00](http://search.cpan.org/dist/libwww-perl/)终于解决了这个问题。有关详细信息，请参阅[我的答案](https://stackoverflow.com/questions/74358/how-can-i-get-lwp-to-validate-ssl-server-certificates#5329129)。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2011-03-16T17:20:31.593

这个长期存在的安全漏洞终于在[libwww-perl](https://metacpan.org/release/libwww-perl)的 6.00 版本中得到修复。从该版本开始，默认情况下[LWP::UserAgent](https://metacpan.org/pod/LWP::UserAgent)会验证 HTTPS 服务器是否提供与预期主机名匹配的有效证书（除非`$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME}`设置为 false 值，或者为了向后兼容，如果根本没有设置该变量，`$ENV{HTTPS_CA_FILE}`或者`$ENV{HTTPS_CA_DIR}`设置） .

这可以通过LWP::UserAgent的新[ssl_opts选项来控制。](https://metacpan.org/pod/LWP::UserAgent#ssl_opts)有关如何定位证书颁发机构证书的详细信息，请参阅该链接。但**要小心**，LWP::UserAgent 过去的工作方式，如果你向`ssl_opts`构造函数提供哈希，则**`verify_hostname`默认为 0**而不是 1。（[此错误](https://rt.cpan.org/Public/Bug/Display.html?id=67947)已在 LWP 6.03 中修复。）为安全起见，请始终`verify_hostname => 1`在您的`ssl_opts`.

所以`use LWP::UserAgent 6;`应该足以验证服务器证书。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-16T16:49:41.060

根据您安装的 SSL 模块，有两种方法可以做到这一点。[LWP 文档建议安装 Crypt::](http://search.cpan.org/src/GAAS/libwww-perl-5.814/README.SSL) SSLeay 。如果这就是您所做的，将`HTTPS_CA_FILE`环境变量设置为指向您的 ca-bundle.crt 应该可以解决问题。（[Crypt::SSLeay 文档](http://search.cpan.org/perldoc?Crypt::SSLeay)提到了这一点，但对细节有点轻描淡写）。此外，根据您的设置，您可能需要设置`HTTPS_CA_DIR`环境变量。

Crypt::SSLeay 的示例：

```
 use LWP::Simple qw(get);
$ENV{HTTPS_CA_FILE} = "/path/to/your/ca/file/ca-bundle";
$ENV{HTTPS_DEBUG} = 1;

print get("https://some-server-with-bad-certificate.com");

__END__
SSL_connect:before/connect initialization
SSL_connect:SSLv2/v3 write client hello A
SSL_connect:SSLv3 read server hello A
SSL3 alert write:fatal:unknown CA
SSL_connect:error in SSLv3 read server certificate B
SSL_connect:error in SSLv3 read server certificate B
SSL_connect:before/connect initialization
SSL_connect:SSLv3 write client hello A
SSL_connect:SSLv3 read server hello A
SSL3 alert write:fatal:bad certificate
SSL_connect:error in SSLv3 read server certificate B
SSL_connect:before/connect initialization
SSL_connect:SSLv2 write client hello A
SSL_connect:error in SSLv2 read server hello B 

```

请注意， get 不是`die`，但它确实返回一个`undef`.

或者，您可以使用该`IO::Socket::SSL`模块（也可从 CPAN 获得）。要验证服务器证书，您需要修改 SSL 上下文默认值：

```
 use IO::Socket::SSL qw(debug3);
use Net::SSLeay;
BEGIN {
    IO::Socket::SSL::set_ctx_defaults(
        verify_mode => Net::SSLeay->VERIFY_PEER(),
        ca_file => "/path/to/ca-bundle.crt",
      # ca_path => "/alternate/path/to/cert/authority/directory"
    );
}
use LWP::Simple qw(get);

warn get("https:://some-server-with-bad-certificate.com"); 

```

此版本还会导致`get()`返回 undef，但会`STDERR`在您执行它时打印一个警告（如果您从 IO::Socket::SSL 导入 debug* 符号，还会显示一堆调试）：

```
 % perl ssl_test.pl
DEBUG: .../IO/Socket/SSL.pm:1387: new ctx 139403496
DEBUG: .../IO/Socket/SSL.pm:269: socket not yet connected
DEBUG: .../IO/Socket/SSL.pm:271: socket connected
DEBUG: .../IO/Socket/SSL.pm:284: ssl handshake not started
DEBUG: .../IO/Socket/SSL.pm:327: Net::SSLeay::connect -> -1
DEBUG: .../IO/Socket/SSL.pm:1135: SSL connect attempt failed with unknown errorerror:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed

DEBUG: .../IO/Socket/SSL.pm:333: fatal SSL error: SSL connect attempt failed with unknown errorerror:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed
DEBUG: .../IO/Socket/SSL.pm:1422: free ctx 139403496 open=139403496
DEBUG: .../IO/Socket/SSL.pm:1425: OK free ctx 139403496
DEBUG: .../IO/Socket/SSL.pm:1135: IO::Socket::INET configuration failederror:00000000:lib(0):func(0):reason(0)
500 Can't connect to some-server-with-bad-certificate.com:443 (SSL connect attempt failed with unknown errorerror:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed) 

```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-09T17:32:54.347

我登陆此页面寻找绕过 SSL 验证的方法，但所有答案仍然非常有帮助。这是我的发现。对于那些希望绕过 SSL 验证的人（不推荐，但在某些情况下您绝对必须这样做），我使用的是 lwp 6.05，这对我有用：

```
use strict;
use warnings;
use LWP::UserAgent;
use HTTP::Request::Common qw(GET);
use Net::SSL;

my $ua = LWP::UserAgent->new( ssl_opts => { verify_hostname => 0 }, );
my $req = GET 'https://github.com';
my $res = $ua->request($req);
if ($res->is_success) {
    print $res->content;
} else {
    print $res->status_line . "\n";
} 
```

我还在一个带有 POST 的页面上进行了测试，它也有效。关键是使用 Net::SSL 和 verify_hostname = 0。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-04T20:16:13.013

如果您直接使用 LWP::UserAgent（不是通过 LWP::Simple），您可以通过将“If-SSL-Cert-Subject”标头添加到 HTTP::Request 对象来验证证书中的主机名。标头的值被视为要应用于证书主题的正则表达式，如果不匹配，则请求失败。例如：

```
#!/usr/bin/perl 
use LWP::UserAgent;
my $ua = LWP::UserAgent->new();
my $req = HTTP::Request->new(GET => 'https://yourdomain.tld/whatever');
$req->header('If-SSL-Cert-Subject' => '/CN=make-it-fail.tld');

my $res = $ua->request( $req );

print "Status: " . $res->status_line . "\n" 
```

将打印

```
Status: 500 Bad SSL certificate subject: '/C=CA/ST=Ontario/L=Ottawa/O=Your Org/CN=yourdomain.tld' !~ //CN=make-it-fail.tld/ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-10-11T06:11:04.287

此处介绍的所有解决方案都包含一个主要的安全漏洞，因为它们仅验证证书信任链的有效性，但不会将证书的通用名称与您要连接的主机名进行比较。因此，中间人可能会向您出示任意证书，只要它是由您信任的 CA 签名的，LWP 就会很乐意接受它。伪造证书的公用名无关紧要，因为 LWP 从未检查过它。

如果您用作 LWP 的后端，您可以通过设置如下参数`IO::Socket::SSL`来启用公用名验证：`verifycn_scheme`

```
use IO::Socket::SSL;
use Net::SSLeay;
BEGIN {
    IO::Socket::SSL::set_ctx_defaults(
        verify_mode => Net::SSLeay->VERIFY_PEER(),
        verifycn_scheme => 'http',
        ca_path => "/etc/ssl/certs"
    );
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-02-23T13:14:28.167

您也可以考虑 Net::SSLGlue ( [http://search.cpan.org/dist/Net-SSLGlue/lib/Net/SSLGlue.pm](http://search.cpan.org/dist/Net-SSLGlue/lib/Net/SSLGlue.pm) ) 但是，请注意，这取决于最近的 IO::Socket::SSL 和Net::SSLeay 版本。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-02-23T23:47:29.493

你担心这一点是对的。不幸的是，我认为在我为 Perl 研究的任何低级 SSL/TLS 绑定下不可能 100% 安全地做到这一点。

本质上，您需要在握手开始之前传入要连接到 SSL 库的服务器的主机名。或者，您可以安排在正确的时刻发生回调，如果未签出，则从回调内部中止握手。编写 Perl 绑定到 OpenSSL 的人似乎很难使回调接口保持一致。

根据服务器证书检查主机名的方法也取决于协议。所以这必须是任何完美功能的参数。

您可能想查看是否有任何绑定到 Netscape/Mozilla NSS 库。当我看着它时，它似乎很擅长这样做。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-06T16:07:18.960

只需在终端中执行以下命令： **sudo cpan install Mozilla::CA**

它应该解决它。

# html - Outlook 07 2列灵活布局

> ID：74368
> 
> 赞同：1
> 
> 时间：2008-09-16T16:42:37.863
> 
> 标签：html, outlook, office-2007

我正在尝试创建一个电子邮件两列灵活布局，适用于 Outlook 07，我在 IE 和 Mozilla Firefox 中的 Outlook 03、hotmail、gmail、yahoo 和 aol 中创建了一个成功的版本，但是在 Outlook 07 中进行测试时去掉我的浮动左 css。

我想要的是一个布局，左边有一张照片，右边有关于照片的文字，当它的全屏时，但是当屏幕尺寸减小时，例如在手机上，让文字在照片下移动. 当屏幕很大时，我希望它移回两列外观。

```
<div>
   <div style="float:left;width:230px;">
      <a href="http://www.google.co.uk" target="_blank"><img src="http://www.maip.com/media/images/Google%20Logo.jpg" border="0" width="230" height="150" style="margin-bottom:5px;"></a>
   </div>
  <div>
    <h4>Test, Test, Test</h4>
    <p style="margin:0 0 0px 0;">Test</p>
    <p>Test text test text kfjhsdkhfjkdshjkf fjsdlfkjsdljflsdjfl sd dfkljflsdjfkljsdlkfjklsdjf dfksdjfkljsdklfjklsdf sdfjsdljfldjfklsd,f lkl sdjkl jdkl jdkljfdkljfklsdjfklj ldk jlksd  Test text test text Test text test text Test text test text Test text test text Test text test text Test text test text Test text test text  
    <a href="http://www.google.co.uk/" target="_blank" >Read more</a>.</p>
    <p>Arrange to view this property</a></p>
  </div>
</div> 
```

Mozilla 像我想要的那样呈现 html，但 IE 没有，目前在 IE 6 上

由于我整天都在搜索，因此对此事的任何帮助都将不胜感激，我唯一能找到的是固定宽度的答案，但没有什么是灵活的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T17:45:46.573

在 Outlook 2007 中，Microsoft 决定停止使用 IE 引擎来呈现 HTML，而改用 Word 引擎。

这意味着如果您需要使您的电子邮件适用于 Outlook 2007 用户，您可以应用的样式会受到严格限制。

不幸的是，浮动是 Outlook 2007 不支持的功能之一——对于列布局，您不得不使用表格。:(

请注意，要让 IE 更好地工作，请确保您有一个有效的 DOCTYPE，这样它就不会恢复到 Quirks 模式。最适用于所有用户代理的最简单的 DOCTYPE 是建议的 HTML5 DOCTYPE，它很简单：

```
<!DOCTYPE html> 
```

这就是它的全部 - 不需要其他任何东西。（注意，虽然它在浏览器中工作，但 W3 验证器会抱怨此文档类型 - 如果您想使用验证器，可以使用覆盖 DOCTYPE 功能。）

回到您可以在电子邮件中使用的 CSS...这里有一个 PDF 显示不同客户端支持哪些 CSS 属性：http:
[//www.campaignmonitor.com/reports/Guide_to_CSS_Support_in_Email_2007.pdf](http://www.campaignmonitor.com/reports/Guide_to_CSS_Support_in_Email_2007.pdf)

以下是有关支持和不支持的更多详细信息：
[http ://www.email-standards.org/clients/microsoft-outlook-2007/](http://www.email-standards.org/clients/microsoft-outlook-2007/)
[http://www.campaignmonitor.com/blog/archives/2007 /04/a_guide_to_css_support_in_emai_2.html](http://www.campaignmonitor.com/blog/archives/2007/04/a_guide_to_css_support_in_emai_2.html)

# linux - 如何克服 Linux 上的 ksh 与 AIX/Solaris/HPUX 上安装的 ksh 之间的不兼容问题？

> ID：74372
> 
> 赞同：5
> 
> 时间：2008-09-16T16:43:05.727
> 
> 标签：linux, solaris, ksh, aix

我参与了将包含数百个 ksh 脚本的系统从 AIX、Solaris 和 HPUX 移植到 Linux 的过程。我在两个系统上的 ksh 行为方式上遇到了以下差异：

```
#!/bin/ksh
flag=false
echo "a\nb" | while read x
do
    flag=true
done
echo "flag = ${flag}"
exit 0 
```

在 AIX、Solaris 和 HPUX 上，输出为“flag = true”，在 Linux 上，输出为“flag = false”。

我的问题是：

*   是否可以设置一个环境变量来让 Linux 的 ksh 表现得像其他操作系统的一样？做不到这一点：
*   Linux 的 ksh 上是否有获得所需行为的选项？做不到这一点：
*   是否有可用于具有所需行为的 Linux 的 ksh 实现？

其他注意事项：

*   在 AIX 上，Solaris 和 HPUX ksh 是 ksh88 的变体。
*   在 Linux 上，ksh 是公共域 ksh (pdksh)
*   在 AIX 上，Solaris 和 HPUX dtksh 和 ksh93（我安装它们的地方）与 ksh 一致
*   我可以访问的 Windows NT 系统：Cygwin 和 MKS NT，与 Linux 是一致的。
*   在 AIX、Solaris 和 Linux 上，bash 是一致的，给出了“flag = false”的错误结果（从我的角度来看）。

下表总结了系统问题：

```
uname -s       uname -r                   which ksh          ksh version                     flag =
========       ========                   =========          ===========                     ======
Linux          2.6.9-55.0.0.0.2.ELsmp     /bin/ksh           PD KSH v5.2.14 99/07/13.2       false
AIX            3                          /bin/ksh           Version M-11/16/88f             true    // AIX 5.3
                                          /bin/ksh93         Version M-12/28/93e             true
SunOS          5.8, 5.9 and 5.10          /bin/ksh           Version M-11/16/88i             true
                                          /usr/dt/bin/dtksh  Version M-12/28/93d             true
HP-UX          B.11.11 and B.11.23        /bin/ksh           Version 11/16/88                true
                                          /usr/dt/bin/dtksh  Version M-12/28/93d             true
CYGWIN_NT-5.1  1.5.25(0.156/4/2)          /bin/ksh           PD KSH v5.2.14 99/07/13.2       false
Windows_NT     5                          .../mksnt/ksh.exe  Version 8.7.0 build 1859...     false    // MKS 
```

# 更新

经过我公司人员的一些建议，我们决定对代码进行以下修改。无论是使用“真正的”ksh（ksh88、ksh93）还是任何 ksh 克隆（pdksh、MSK ksh），这都会为我们提供相同的结果。这也适用于 bash。

```
#!/bin/ksh
echo "a\nb" > junk
flag=false
while read x
do
    flag=true
done < junk
echo "flag = ${flag}"
exit 0 
```

感谢 jj33 先前接受的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T16:51:28.687

不要在 linux 上使用 pdksh，而是使用来自 kornshell.org 的“真实”ksh。pdksh 是对 ksh 的盲目重新实现。kornshell.org 是可追溯到 25 年左右的原始 korn shell（由 David Korn 撰写）。AIX 和 Solaris 使用原始 ksh 的版本，因此 kornshell.org 版本通常具有完整的功能和错误。在使用 SunOS/Solaris 之后，安装 kornshell.org ksh 通常是我在新的 Linux 机器上做的第一件事......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T18:22:36.983

经过我公司人员的一些建议，我们决定对代码进行以下修改。无论是使用“真正的”ksh（ksh88、ksh93）还是任何 ksh 克隆（pdksh、MSK ksh），这都会为我们提供相同的结果。这也适用于 bash。

```
#!/bin/ksh
echo "a\nb" > junk
flag=false
while read x
do
    flag=true
done < junk
echo "flag = ${flag}"
exit 0 
```

感谢 jj33 之前接受的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T17:25:08.370

我在本地 Ubuntu Hardy 系统上安装了“ksh”和“pdksh”。

```
ii  ksh            93s+20071105-1 The real, AT&T version of the Korn shell
ii  pdksh          5.2.14-21ubunt A public domain version of the Korn shell 
```

ksh 具有您期望的“正确”行为，而 pdksh 没有。您可以检查本地 Linux 发行版的软件存储库以获取“真正的”ksh，而不是使用 pdksh。默认情况下，“Real Unix”操作系统将安装 AT&T 版本的 Korn shell，而不是 pdksh，因为它们基于 AT&T Unix（系统 V）:-)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-31T23:05:01.257

差异的原因是内部块是在原始 shell 上下文中执行还是在子 shell 中执行。您可以使用 () 和 {} 分组命令来控制它。使用临时文件，就像您在更新中所做的那样，大部分时间都可以工作，但如果脚本快速运行两次，或者如果它在没有清除文件的情况下执行等，则会遇到问题。

```
#!/bin/ksh
flag=false
echo "a\nb" | { while read x
do    
     flag=true
done }
echo "flag = ${flag}"
exit 0 
```

这可能有助于解决您在 Linux ksh 上遇到的问题。如果您使用括号而不是大括号，您将在其他 ksh 实现中获得 Linux 行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-20T15:37:23.310

这是 echo "\n" 问题的另一个解决方案

**脚步：**

1.  查找 ksh 包名

`$ rpm -qa --queryformat "%{NAME}-%{VERSION}-%{RELEASE}(%{ARCH})\n" | grep "ksh" ksh-20100621-19.el6_4.3(x86_64)`

1.  卸载 ksh `$ sudo yum remove ksh-20100621-19.el6_4.3.x86_64`

2.  下载 pdksh-5.2.14-37.el5_8.1.x86_64.rpm （请检查操作系统为 32 位或 64 位并选择正确的 pkg）

3.  安装 pdksh-5.2.14-37.el5_8.1.x86_64.rpm

`$ sudo yum -y install /SCRIPT_PATH/pdksh-5.2.14-37.el5_8.1.x86_64.rpm`

**PDKSH 安装前的输出**

```
$ ora_db_start_stop.sh
\n==============
Usage: START
==============\n\n
./ora_db_start_stop.sh START ALL    \n
OR \n
./ora_db_start_stop.sh START ONE_OR_MORE    \n
\n==============
Usage: STOP
==============\n\n
./ora_db_start_stop.sh STOP ALL    \n
OR \n
./ora_db_start_stop.sh STOP ONE_OR_MORE    \n\n 
```

**PDKSH 安装后**

===============

# 用法：开始

`./ora_db_start_stop.sh START ALL`

或者

`./ora_db_start_stop.sh START ONE_OR_MORE`

===============

# 用法：停止

`./ora_db_start_stop.sh STOP ALL`

或者

`./ora_db_start_stop.sh STOP ONE_OR_MORE`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T16:48:48.927

我不知道有任何特定选项可以强制 ksh 与特定的旧版本兼容。也就是说，也许您可​​以在您的 linux 机器上安装一个非常旧版本的 ksh，并让它以兼容的方式运行？

在 AIX/HP-UX 机器上安装更现代的 amy shell 版本可能更容易，只需迁移脚本以使用 sh。我知道有适用于所有平台的 bash 版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T17:03:08.313

`zsh`与该`emulate -L ksh`选项一起使用时，您的脚本会提供正确的（真实）输出。如果一切都失败了，您可能希望尝试`zsh`在 Linux 上使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T20:46:27.013

你必须留在ksh内吗？

即使您使用相同的 ksh，您仍然会调用各种外部命令（grep、ps、cat 等），其中一部分将在系统之间具有不同的参数和不同的输出。要么您必须考虑这些差异，要么使用它们中的每一个的 GNU 版本来使事情相同。

[Perl](http://www.perl.org/)编程语言最初就是为了克服这个问题而设计的。它包含了 unix shell 程序员希望从 shell 程序中获得的所有功能，但在每个 Unix 系统上都是相同的。您可能没有在所有这些系统上安装最新版本，但如果您需要安装某些东西，也许最好安装 perl。

# sql - 如何将 DateTime 转换为 VarChar

> ID：74385
> 
> 赞同：321
> 
> 时间：2008-09-16T16:44:22.087
> 
> 标签：sql, sql-server, datetime, sql-convert

我需要将变量中的值`DateTime`转换为`varchar`格式化为`yyyy-mm-dd`格式的变量（没有时间部分）。

我怎么做？

* * *

## 回答 #1

> 赞同：401
> 
> 时间：2013-10-23T09:16:47.943

这是所有样式的一些测试sql。

```
DECLARE @now datetime
SET @now = GETDATE()
select convert(nvarchar(MAX), @now, 0) as output, 0 as style 
union select convert(nvarchar(MAX), @now, 1), 1
union select convert(nvarchar(MAX), @now, 2), 2
union select convert(nvarchar(MAX), @now, 3), 3
union select convert(nvarchar(MAX), @now, 4), 4
union select convert(nvarchar(MAX), @now, 5), 5
union select convert(nvarchar(MAX), @now, 6), 6
union select convert(nvarchar(MAX), @now, 7), 7
union select convert(nvarchar(MAX), @now, 8), 8
union select convert(nvarchar(MAX), @now, 9), 9
union select convert(nvarchar(MAX), @now, 10), 10
union select convert(nvarchar(MAX), @now, 11), 11
union select convert(nvarchar(MAX), @now, 12), 12
union select convert(nvarchar(MAX), @now, 13), 13
union select convert(nvarchar(MAX), @now, 14), 14
--15 to 19 not valid
union select convert(nvarchar(MAX), @now, 20), 20
union select convert(nvarchar(MAX), @now, 21), 21
union select convert(nvarchar(MAX), @now, 22), 22
union select convert(nvarchar(MAX), @now, 23), 23
union select convert(nvarchar(MAX), @now, 24), 24
union select convert(nvarchar(MAX), @now, 25), 25
--26 to 99 not valid
union select convert(nvarchar(MAX), @now, 100), 100
union select convert(nvarchar(MAX), @now, 101), 101
union select convert(nvarchar(MAX), @now, 102), 102
union select convert(nvarchar(MAX), @now, 103), 103
union select convert(nvarchar(MAX), @now, 104), 104
union select convert(nvarchar(MAX), @now, 105), 105
union select convert(nvarchar(MAX), @now, 106), 106
union select convert(nvarchar(MAX), @now, 107), 107
union select convert(nvarchar(MAX), @now, 108), 108
union select convert(nvarchar(MAX), @now, 109), 109
union select convert(nvarchar(MAX), @now, 110), 110
union select convert(nvarchar(MAX), @now, 111), 111
union select convert(nvarchar(MAX), @now, 112), 112
union select convert(nvarchar(MAX), @now, 113), 113
union select convert(nvarchar(MAX), @now, 114), 114
union select convert(nvarchar(MAX), @now, 120), 120
union select convert(nvarchar(MAX), @now, 121), 121
--122 to 125 not valid
union select convert(nvarchar(MAX), @now, 126), 126
union select convert(nvarchar(MAX), @now, 127), 127
--128, 129 not valid
union select convert(nvarchar(MAX), @now, 130), 130
union select convert(nvarchar(MAX), @now, 131), 131
--132 not valid
order BY style 
```

这是结果

```
output                   style
Apr 28 2014  9:31AM          0
04/28/14                     1
14.04.28                     2
28/04/14                     3
28.04.14                     4
28-04-14                     5
28 Apr 14                    6
Apr 28, 14                   7
09:31:28                     8
Apr 28 2014  9:31:28:580AM   9
04-28-14                     10
14/04/28                     11
140428                       12
28 Apr 2014 09:31:28:580     13
09:31:28:580                 14
2014-04-28 09:31:28          20
2014-04-28 09:31:28.580      21
04/28/14  9:31:28 AM         22
2014-04-28                   23
09:31:28                     24
2014-04-28 09:31:28.580      25
Apr 28 2014  9:31AM          100
04/28/2014                   101
2014.04.28                   102
28/04/2014                   103
28.04.2014                   104
28-04-2014                   105
28 Apr 2014                  106
Apr 28, 2014                 107
09:31:28                     108
Apr 28 2014  9:31:28:580AM   109
04-28-2014                   110
2014/04/28                   111
20140428                     112
28 Apr 2014 09:31:28:580     113
09:31:28:580                 114
2014-04-28 09:31:28          120
2014-04-28 09:31:28.580      121
2014-04-28T09:31:28.580      126
2014-04-28T09:31:28.580      127
28 جمادى الثانية 1435  9:31:28:580AM    130
28/06/1435  9:31:28:580AM    131 
```

`nvarchar(max)`缩短以修剪时间。例如：

```
select convert(nvarchar(11), GETDATE(), 0)
union select convert(nvarchar(max), GETDATE(), 0) 
```

输出：

```
May 18 2018
May 18 2018  9:57AM 
```

* * *

## 回答 #2

> 赞同：271
> 
> 时间：2008-09-16T16:52:35.047

使用 Microsoft Sql Server：

```
--
-- Create test case
--
DECLARE @myDateTime DATETIME
SET @myDateTime = '2008-05-03'

--
-- Convert string
--
SELECT LEFT(CONVERT(VARCHAR, @myDateTime, 120), 10) 
```

* * *

## 回答 #3

> 赞同：187
> 
> 时间：2008-09-16T16:45:37.310

尝试以下操作：

```
CONVERT(varchar(10), [MyDateTimecolumn], 20) 
```

对于完整的日期时间，而不仅仅是日期：

```
CONVERT(varchar(23), [MyDateTimecolumn], 121) 
```

请参阅此页面以了解转换样式：

[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)
或
[SQL Server CONVERT() 函数](http://www.w3schools.com/sql/func_convert.asp)

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2013-07-18T02:58:22.930

SQL Server 2012 有一个新功能，格式：http: [//msdn.microsoft.com/en-us/library/ee634924.aspx](http://msdn.microsoft.com/en-us/library/ee634924.aspx)

您可以使用自定义日期时间格式字符串：http: [//msdn.microsoft.com/en-us/library/ee634398.aspx](http://msdn.microsoft.com/en-us/library/ee634398.aspx)

这些页面暗示它在 SQL2008R2 上也可用，但我没有一个方便的工具来测试是否是这种情况。

示例用法（澳大利亚日期时间）：

```
FORMAT(VALUE,'dd/MM/yyyy h:mm:ss tt') 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-07-20T21:42:39.313

您可以使用`DATEPART(DATEPART, VARIABLE)`. 例如：

```
DECLARE @DAY INT 
DECLARE @MONTH INT
DECLARE @YEAR INT
DECLARE @DATE DATETIME
@DATE = GETDATE()
SELECT @DAY = DATEPART(DAY,@DATE)
SELECT @MONTH = DATEPART(MONTH,@DATE)
SELECT @YEAR = DATEPART(YEAR,@DATE) 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-09-16T16:46:41.443

要么`Cast`要么`Convert`：

语法`CAST`：

```
CAST ( expression AS data_type [ (length ) ]) 
```

语法`CONVERT`：

```
CONVERT ( data_type [ ( length ) ] , expression [ , style ] ) 
```

[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

实际上，既然您要求特定格式：

```
REPLACE(CONVERT(varchar(10), Date, 102), '.', '-') 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2011-06-21T18:45:38.083

-- 这给你时间为 0，格式为 'yyyy-mm-dd 00:00:00.000'

```
 SELECT CAST( CONVERT(VARCHAR, GETDATE(), 101) AS DATETIME) ; 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-05-30T15:44:23.813

使用 Microsoft SQL Server：

使用 CONVERT 的语法：

```
CONVERT ( data_type [ ( length ) ] , expression [ , style ] ) 
```

例子：

```
SELECT CONVERT(varchar,d.dateValue,1-9) 
```

对于样式，您可以在此处找到更多信息：[MSDN - Cast and Convert (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-11-26T17:28:41.730

对于 SQL Server 2008+，您可以同时使用 CONVERT 和 FORMAT。

例如，对于欧式（例如德国）时间戳：

```
CONVERT(VARCHAR, FORMAT(GETDATE(), 'dd.MM.yyyy HH:mm:ss', 'de-DE')) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-09-16T16:50:13.307

尝试以下操作：

```
CONVERT(VARCHAR(10),GetDate(),102) 
```

然后你需要替换“。” 和 ”-”。

这是一个帮助 [http://www.mssqltips.com/tip.asp?tip=1145的网站](http://www.mssqltips.com/tip.asp?tip=1145)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-09-26T09:33:52.247

```
declare @dt datetime

set @dt = getdate()

select convert(char(10),@dt,120) 
```

我有固定的数据长度，`char(10)`因为你想要一个特定的字符串格式。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2011-06-06T15:32:48.863

尝试：

```
select replace(convert(varchar, getdate(), 111),'/','-'); 
```

更多关于[ms sql 提示](http://www.mssqltips.com/tip.asp?tip=1145)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2011-08-12T13:38:50.693

OP提到了**日期时间**格式。对我来说，时间部分妨碍了我。
我认为在格式化之前删除时间部分（通过将日期时间转换为日期）会更干净一些。

```
convert( varchar(10), convert( date, @yourDate ) , 111 ) 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2013-03-25T17:31:04.263

我就是这样做的：`CONVERT(NVARCHAR(10), DATE1, 103) )`

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-12-01T15:44:53.137

最短和最简单的方法是：

```
DECLARE @now AS DATETIME = GETDATE()

SELECT CONVERT(VARCHAR, @now, 23) 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-01-11T15:37:45.760

您可以将日期转换为多种格式，语法易于使用：

```
CONVERT('TheTypeYouWant', 'TheDateToConvert', 'TheCodeForFormating' * )
CONVERT(NVARCHAR(10), DATE_OF_DAY, 103) => 15/09/2016 
```

*   代码是一个整数，这里 3 是没有世纪的第三种格式，如果你想要世纪，只需将代码更改为 103。

**在您的情况下**，我刚刚通过 nvarchar(10) 转换并限制大小，如下所示：

```
CONVERT(NVARCHAR(10), MY_DATE_TIME, 120) => 2016-09-15 
```

查看更多：[http ://www.w3schools.com/sql/func_convert.asp](http://www.w3schools.com/sql/func_convert.asp)

**另一种解决方案**（如果您的日期是日期时间）是一个简单的**CAST**：

```
CAST(MY_DATE_TIME as DATE) => 2016-09-15 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2017-07-10T06:29:18.577

试试这个 SQL：

```
select REPLACE(CONVERT(VARCHAR(24),GETDATE(),103),'/','_') + '_'+ 
       REPLACE(CONVERT(VARCHAR(24),GETDATE(),114),':','_') 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-09-16T16:49:34.930

您没有说是哪个数据库，但这里使用 mysql 是一种从时间戳获取日期的简单方法（并且 varchar 类型转换应该自动发生）：

```
mysql> select date(now());
+-------------+
| date(now()) |
+-------------+
| 2008-09-16  | 
+-------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-04-29T16:13:50.250

```
CONVERT(VARCHAR, GETDATE(), 23) 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-11-23T04:30:58.693

```
DECLARE @DateTime DATETIME
SET @DateTime = '2018-11-23 10:03:23'
SELECT CONVERT(VARCHAR(100),@DateTime,121 ) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-08-02T08:43:50.817

写一个函数

```
CREATE FUNCTION dbo.TO_SAP_DATETIME(@input datetime)
RETURNS VARCHAR(14)
AS BEGIN
    DECLARE @ret VARCHAR(14)
    SET @ret = COALESCE(SUBSTRING(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR(26), @input, 25),'-',''),' ',''),':',''),1,14),'00000000000000');
    RETURN @ret
END 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-05-05T15:39:39.687

```
select REPLACE(CONVERT(VARCHAR, FORMAT(GETDATE(), N'dd/MM/yyyy hh:mm:ss tt')),'.', '/') 
```

`05/05/2020 10:41:05 AM`结果会给出

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-04-23T07:47:43.560

简单地使用“转换”，然后使用“格式”来获得你想要的日期格式

```
DECLARE @myDateTime DATETIME
SET @myDateTime = '2008-05-03'

SELECT FORMAT(CONVERT(date, @myDateTime ),'yyyy-MM-dd') 
```

* * *

## 回答 #24

> 赞同：-3
> 
> 时间：2008-09-16T16:52:47.403

您没有说是什么语言，但我假设`C#/.NET`是因为它具有本机`DateTime`数据类型。在这种情况下，只需使用该方法转换它`ToString`并使用格式说明符，例如：

```
DateTime d = DateTime.Today;
string result = d.ToString("yyyy-MM-dd"); 
```

但是，我会警告不要在数据库查询中使用它或将其连接到 SQL 语句中。数据库需要使用特定的格式化字符串。如果这是您想要完成的，您最好将时间部分归零并使用 DateTime 作为 SQL 参数。

# .net - 从非托管代码中使用 DLR

> ID：74386
> 
> 赞同：5
> 
> 时间：2008-09-16T16:44:27.547
> 
> 标签：.net, delphi, ironpython, unmanaged, ironruby

是否可以从非托管代码（如 C++ 或 Delphi）调用托管代码，特别是 IronRuby 或 IronPython？

例如，我们有一个用 Delphi 编写的应用程序正在迁移到 C#.NET 我们想在我们的新应用程序中提供 Ruby 或 Python 脚本来替换 VBSCRIPT。但是，我们需要在旧的 Delphi 应用程序中提供 Ruby/Python 脚本。是否可以从 Delphi 代码中使用 IronRuby/IronPython 提供的托管 dll？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-16T16:51:53.990

是的。此处为 Win32 的 Delphi 示例：http: [//interop.managed-vcl.com/](http://interop.managed-vcl.com/)
展示了如何使用 C# 以及来自 Delphi for Win32 的 Delphi.NET 程序集。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T16:50:33.133

可以在非托管代码中托管 CLR 或 DLR，因为它是 COM 组件。从那时起，您可以加载需要与之交互的托管程序集。

来自 MSDN：[托管公共语言运行时](http://msdn.microsoft.com/en-us/library/9x0wh2z3.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-01T13:00:13.020

为什么不嵌入 CPython，它有一个旨在直接从 C/C++ 使用的 API。您失去了多语言优势，但可能获得了简单性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T16:48:44.637

是的。使用[Com Callable Wrappers](http://msdn.microsoft.com/en-us/library/f07c8z1c.aspx)可以做到这一点。基本上，您可以通过 COM/ActiveX 从您的 win32 代码（Delphi 或 C++）调用您的 .Net 类。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-02-28T13:12:11.530

我使用[非托管导出](http://sites.google.com/site/robertgiesecke/Home/uploads/unmanagedexports)在 C# 中创建 IronPython 脚本引擎的接口。使用 Win32 Delphi 中的 .NET 代码时要小心——您必须使用它`Set8087CW($133F);`来更改浮点异常行为。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T18:09:55.360

你见过RemObjects 的[Hydra吗？](http://www.remobjects.com/product/?id=%7BB6BD1030-F630-4DA8-9018-73C03265A0EF%7D)我没有这方面的经验，但从介绍来看，它看起来很相关。

# algorithm - 证明多线程算法的正确性

> ID：74391
> 
> 赞同：12
> 
> 时间：2008-09-16T16:44:51.480
> 
> 标签：algorithm, multithreading, theory, correctness, proof

多线程算法特别难以设计/调试/证明。Dekker 算法是一个很好的例子，说明了设计一个正确的同步算法是多么困难。Tanenbaum 的现代操作系统在其 IPC 部分中充满了示例。有没有人对此有很好的参考（书籍，文章）？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-16T17:53:39.877

It is impossible to prove anything without building upon guarentees, so the first thing you want to do is to get familiar with the memory model of your target platform; Java and x86 both have solid and standardized memory models - I'm not so sure about CLR, but if all else fails, you'll have build upon the memory model of your target CPU architecture. The exception to this rule is if you intend to use a language that does does not allow any shared mutable state at all - I've heard Erlang is like that.

The first problem of concurrency is shared mutable state.

That can be fixed by:

*   Making state immutable
*   Not sharing state
*   Guarding shared mutable state by the *same* lock (two different locks cannot guard the same piece of state, unless you *always* use exactly these two locks)

The second problem of concurrency is safe publication. How do you make data available to other threads? How do you perform a hand-over? You'll the solution to this problem in the memory model, and (hopefully) in the API. Java, for instance, has many ways to publish state and the java.util.concurrent package contains tools specifically designed to handle inter-thread communication.

The third (and harder) problem of concurrency is locking. Mismanaged lock-ordering is the source of dead-locks. You can analytically prove, building upon the memory model guarentees, whether or not dead-locks are possible in your code. However, you need to design and write your code with that in mind, otherwise the complexity of the code can quickly render such an analysis impossible to perform in practice.

Then, once you have, or before you do, prove the correct use of concurrency, you will have to prove single-threaded correctness. The set of bugs that can occur in a concurrent code base is equal to the set of single-threaded program bugs, plus all the possible concurrency bugs.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T15:09:27.323

“并发和分布式编程原理”，M. Ben-Ari
ISBN-13：978-0-321-31283-9
他们在网上阅读 safari 书籍：http:
[//my.safaribooksonline.com/9780321312839](http://my.safaribooksonline.com/9780321312839)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T22:35:43.983

[Pi-Calculus, A Theory of Mobile Processes](http://books.google.com/books?id=WR828X_7488C&dq=pi-calculus&pg=PP1&ots=C2uWpHm7fN&sig=H_cJSbWkK6TzKTe3x89BtTDYSyw&hl=en&sa=X&oi=book_result&resnum=1&ct=result)是一个很好的起点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T19:08:37.607

简短的回答：这很难。

从 1980 年代后期开始，DEC SRC Modula-3 和落叶松材料中有一些非常出色的工作。

例如

*   [线程同步：AD Birrell、JV Guttag、JJ Horning、R Levin 使用 Modula-3 进行系统编程的正式规范](ftp://gatekeeper.dec.com/pub/DEC/SRC/research-reports/SRC-020.ps.Z)(1991)，第 5 章

*   [扩展静态检查](http://gatekeeper.dec.com/pub/DEC/SRC/research-reports/SRC-159.pdf)(1998)，作者：David L. Detlefs、David L. Detlefs、K. Rustan、K. Rustan、M. Leino、M. Leino、Greg Nelson、Greg Nelson、James B. Saxe、James B. Saxe

来自 Modula-3 的一些好想法正在进入 Java 世界，例如 JML，尽管“JML 目前仅限于顺序规范”说[intro](http://www.eecs.ucf.edu/~leavens/JML/jmlrefman/jmlrefman_1.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T22:31:49.047

我没有任何具体的参考资料，但您可能想研究 Owicki-Gries 理论（如果您喜欢定理证明）或过程理论/代数（也有各种可用的模型检查工具）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T17:38:14.783

@以防万一：我是。但据我所知，为一个非平凡的算法这样做是一个很大的痛苦。我把这种事情留给更聪明的人。我从 KM Chandy, J Misra 的 Parallel Program Design: A Foundation (1988) 中学到了我所知道的

# java - 是否可以在没有 NetBeans 项目的情况下在 NetBeans 之外使用 Jackpot？

> ID：74392
> 
> 赞同：2
> 
> 时间：2008-09-16T16:45:29.807
> 
> 标签：java, netbeans

我知道有一个 Jackpot API [http://jackpot.netbeans.org/docs/org-netbeans-modules-jackpot/overview-summary.html](http://jackpot.netbeans.org/docs/org-netbeans-modules-jackpot/overview-summary.html)用于以编程方式访问规则引擎，有没有人成功地将它与 NetBeans 本身分开？那么它可以对任何Java源文件进行操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T16:59:05.673

回答我自己的问题，但遗憾的是，答案是否定的。

[http://netbeans.org/community/articles/interviews/tom-ball-interview.html](http://netbeans.org/community/articles/interviews/tom-ball-interview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-01T11:32:49.460

从技术上讲，没有什么可以阻止您获取 jar 文件并直接调用它。您可能只需要带上很多 netbeans。

# flash - 交互式世界地图 - 建议？

> ID：74409
> 
> 赞同：3
> 
> 时间：2008-09-16T16:47:07.073
> 
> 标签：flash, maps, imagemap

我正在寻找创建“您访问过的国家/地区”的地图 - 就像您可能在 Facebook、TravelAdvisor 等上看到的那样。

我尝试过不同的闪存套件，但它们并没有我希望的那么先进。我在使用所有不同的工具包时遇到的主要问题是，当您单击某个国家/地区时会更改其背景颜色，并在您“取消选择”它时让它保持该颜色。这显然对于给用户一些视觉反馈是必要的。

到目前为止，我设法做到这一点的唯一方法是通过带有巨大 XML 字符串的 javascript 初始化 flash，有一个与 Javascript 交互的点击回调，并使用 javascript 使用正则表达式更改 XML 字符串，然后发回 XML到闪光灯。很明显，这种方法远非最优，而且非常非常慢。

我已经尝试过 FusionMaps、amMap、AnyMaps 和 diyMap，但到目前为止，我还没有找到任何方法来使用它们中的任何一个。如果有人对其中任何一个做过类似的事情，我真的很想知道如何:-)

有人对我应该看什么有任何指示或建议吗？我开始认为只使用维基百科上的免费 SVG 大陆地图，将它们转换为 PNG 并创建所有国家/地区的图像地图会更简单（虽然不太灵活） - 然后使用 Canvas 和 VML 绘制国家之上的元素 - 但与闪存解决方案相比，这似乎是一个巨大的痛苦并且非常容易出错。

感谢阅读，希望有人能给我一些建议:-)

*   末日先生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-05-16T08:01:42.327

> 只是看起来很痛苦而且很容易出错

我克服了痛苦并修复了错误（好的，大部分）。结果如下：[jVectorMap](http://jvectormap.owl-hollow.net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-06T07:31:28.483

尝试从谷歌地图开始。如果您想要一个使用 Google 地图并在其上放置彩色区域的网站的良好示例，请访问[Wikimapia.org](http://Wikimapia.org)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T16:52:10.913

如果它适用于您正在构建的内容，那么 Virtual Earth 目前处于 6.1 版本，并且在 API 中有许多出色且易于使用的 javascript 调用来加载多边形。如果您有定义国家/地区的点数据（应该可以免费获得），您可以轻松地定义一个带有 VELatLong 对象数组的 VEShape 多边形，并在其上添加一个事件处理程序以在单击时为它们着色。VE 的好处是 javascript API 非常灵活且易于使用，并且公开了许多不错的映射功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T01:56:42.837

如果您有兴趣，这里有一个 ASP.NET Virtual Earth Mapping Server Control：

[http://simplovation.com/page/webmapsve.aspx](http://simplovation.com/page/webmapsve.aspx)

这本质上是一个围绕 Virtual Earth 的“包装器”，它抽象出您传统上需要编写的大部分（如果不是全部）JavaScript。它允许您完全从服务器端 .NET 代码处理地图事件和操作地图事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-23T04:49:35.257

我一直在寻找同样的东西，然后我找到了谷歌的虚拟化强度图。[你可以在这里](http://code.google.com/apis/visualization/documentation/gallery/geomap.html)找到更多信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-04-22T13:12:02.913

试试这可能是你所期望的 [http://www.ammap.com/](http://www.ammap.com/)

# c# - .NET CF 上的游戏循环和 GDI

> ID：74422
> 
> 赞同：0
> 
> 时间：2008-09-16T16:48:52.357
> 
> 标签：c#, game-loop

嗨，我想编写一个具有主要游戏形式和许多其他正常形式的游戏。在这种情况下，管理更新绘制周期的最佳方法是什么？

应该只覆盖游戏表单绘制循环吗？或者我应该在 main 方法中执行 application.do events() 吗？

请指导我。我是 Windows 窗体世界的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T16:54:53.297

问题的主体没有提到 Compact Framework，只是 Winforms。这几乎是来自 Tom Miller（来自 Microsoft 的 Xna Game Studio 和 Managed DirectX guy）对 Winforms 的公认答案：

[Winforms 游戏循环](http://blogs.msdn.com/tmiller/archive/2005/05/05/415008.aspx)

@Rich B：游戏循环独立于渲染的完成方式（DirectX、MDX、GDI+）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T16:51:48.887

如果您正在制作游戏，您应该研究[DirectX](http://msdn.microsoft.com/en-us/magazine/cc164112.aspx)、[OpenGL](http://csgl.sourceforge.net/)或[XNA](http://xna101.spaces.live.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T16:53:52.080

您的逻辑线程应该与表单分开，因此您不需要 DoEvents()。如果您使用的是 GDI+，那么您应该在循环中强制执行 Update()。Windows 窗体不能很好地进行双缓冲，因此根据您的图形的复杂程度，您可能会遇到一些闪烁问题。

我的建议是看看使用[DirectX 托管库](http://msdn.microsoft.com/en-us/library/bb318659(VS.85).aspx)。有很多东西要学，但可以为您提供所需的一切。

**编辑：** 我最近一直在阅读有关 WPF 的文章，对于简单到中等复杂的游戏来说，它似乎是一个更好的平台，因为它提供了比[DirectX 托管库](http://msdn.microsoft.com/en-us/library/bb318659(VS.85).aspx)更高级别的 API 。但是，对于更复杂的游戏，它可能具有性能和灵活性限制。

# python - python 2.5中的随机不工作？

> ID：74430
> 
> 赞同：9
> 
> 时间：2008-09-16T16:49:33.963
> 
> 标签：python

我正在尝试`import random`在 python 中使用该语句，但它似乎没有任何方法可以使用。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-09-16T18:26:02.610

您的工作目录中可能有一个名为 random.py 或 random.pyc 的文件。这掩盖了内置的随机模块。您需要将 random.py 重命名为 my_random.py 和/或删除 random.pyc 文件。

要确定发生了什么，请执行以下操作：

```
>>> import random
>>> print random.__file__ 
```

这将准确显示正在导入的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T23:22:30.993

发生这种情况是因为您在 python 搜索路径中有一个 random.py 文件，很可能是当前目录。

Python 正在使用 sys.path 搜索模块，该路径通常包括标准站点包之前的当前目录，其中包含预期的 random.py。

This is expected to be fixed in Python 3.0, so that you can't import modules from the current directory without using a special import syntax.

Just remove the random.py + random.pyc in the directory you're running python from and it'll work fine.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T16:51:27.873

我认为您需要提供更多信息。根据问题中的信息，实际上不可能回答为什么它不起作用。random 的基本文档位于： [https ://docs.python.org/library/random.html](https://docs.python.org/library/random.html)

你可以在那里检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T16:53:00.570

```
Python 2.5.2 (r252:60911, Jun 16 2008, 18:27:58)
[GCC 3.3.4 (pre 3.3.5 20040809)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import random
>>> random.seed()
>>> dir(random)
['BPF', 'LOG4', 'NV_MAGICCONST', 'RECIP_BPF', 'Random', 'SG_MAGICCONST', 'SystemRandom', 'TWOPI', 'WichmannHill', '_BuiltinMethodType', '_MethodType', '__all__', '__builtins__', '__doc__', '__file__', '__name__', '_acos', '_ceil', '_cos', '_e', '_exp', '_hexlify', '_inst', '_log', '_pi', '_random', '_sin', '_sqrt', '_test', '_test_generator', '_urandom', '_warn', 'betavariate', 'choice', 'expovariate', 'gammavariate', 'gauss', 'getrandbits', 'getstate', 'jumpahead', 'lognormvariate', 'normalvariate', 'paretovariate', 'randint', 'random', 'randrange', 'sample', 'seed', 'setstate', 'shuffle', 'uniform', 'vonmisesvariate', 'weibullvariate']
>>> random.randint(0,3)
3
>>> random.randint(0,3)
1
>>> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T20:11:09.843

如果您尝试运行的脚本本身名为 random.py，那么您将遇到命名冲突。为您的脚本选择一个不同的名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T16:52:11.273

你能发布一个你想要做什么的例子吗？从您的问题中不清楚实际问题是什么。

以下是如何使用随机模块的示例：

```
import random
print random.randint(0,10) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T16:53:43.000

似乎对我来说工作得很好。查看[官方python文档](http://docs.python.org/lib/module-random.html)中的随机方法：

```
>>> import random
>>> random.random()
0.69130806168332215
>>> random.uniform(1, 10)
8.8384170917436293
>>> random.randint(1, 10)
4 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T18:19:19.740

为我工作：

```
Python 2.5.1 (r251:54863, Jun 15 2008, 18:24:51) 
[GCC 4.3.0 20080428 (Red Hat 4.3.0-8)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import random
>>> brothers = ['larry', 'curly', 'moe']
>>> random.choice(brothers)
'moe'
>>> random.choice(brothers)
'curly' 
```

# unix - 在大量主机上管理authorized_keys

> ID：74443
> 
> 赞同：11
> 
> 时间：2008-09-16T16:50:57.347
> 
> 标签：unix, authentication, ssh, openssh

跨大量主机管理 openssh 的 authorized_keys 文件的最简单方法是什么？如果我需要为 10 台主机上的帐户添加或撤销新密钥，我必须手动登录并添加公钥，或者通过笨拙的 shell 脚本添加公钥，这非常耗时。

理想情况下，将有一个中央数据库将密钥链接到具有某种分组支持的帐户@机器（I​​E，将此密钥添加到 web 类别中所有服务器上的用户名 X）。有支持 ldap 的 SSH 分支，但我宁愿使用主线 SSH 包。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T17:00:50.770

我会检查[Monkeysphere](http://web.monkeysphere.info/)项目。它使用 OpenPGP 的网络信任概念来管理 ssh 的 authorized_keys 和 known_hosts 文件，而无需更改 ssh 客户端或服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-03-23T15:08:03.440

我用 Puppet 做很多事情，包括这个。（使用 ssh_authorized_key 资源类型）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T16:57:23.227

我总是通过维护不同服务器密钥的“主”树来做到这一点，并使用 rsync 更新远程机器。这使您可以在一个位置编辑内容，有效地推送更改，并使内容保持“最新”——每个人都编辑主文件，没有人编辑随机主机上的文件。

您可能想查看用于跨机器组运行命令的项目，例如[https://fedorahosted.org/func](https://fedorahosted.org/func)上的 Func或其他服务器配置管理包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T16:58:45.983

您是否考虑过使用 clusterssh（或类似的）来自动化文件传输？另一种选择是集中[配置系统](http://en.wikipedia.org/wiki/Comparison_of_open_source_configuration_management_software)之一。

/艾伦

# windows - 是否可以从 Windows 以低色深连接到 Mac OS X 10.5 Leopard 的内置 vnc 服务器？

> ID：74447
> 
> 赞同：4
> 
> 时间：2008-09-16T16:51:29.387
> 
> 标签：windows, macos, vnc

如果我尝试从 Windows 以低色深连接到 Mac OS X 10.5 Leopard 的内置 vnc 服务器，则客户端在连接后会爆炸。它仅在我将其设置为最高颜色深度时才有效。我已经尝试过至少 3 个 Windows VNC 客户端。有任何想法吗？我可以在 Mac OS X 中设置一些设置吗？

使用我当前的连接和高位深度设置重新绘制屏幕大约需要 20 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T17:28:30.390

不适用于内置 VNC 服务器。 [Vine Server](http://sourceforge.net/projects/osxvnc/)允许您更改客户端连接的位深度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T17:13:37.523

根据我的经验，您不能使用默认的 vnc 服务器降低颜色深度。我不会断言它，因为也许可以使用控制台命令更改该行为。

我建议在 mac 中安装另一个 VNC 服务器，例如[http://sourceforge.net/projects/osxvnc/](http://sourceforge.net/projects/osxvnc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T17:17:18.700

我可以看到内置的 vnc 似乎几乎没有可配置性。

作为替代方案，您可以尝试使用[osxvnc](http://sourceforge.net/projects/osxvnc/)我相信它允许不同的位深度

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-02-22T21:06:04.650

您可以从客户端切换到高颜色（16 位）但不能切换到低颜色（8 位）。您还可以启用 JPEG 压缩。使用这两个选项，我的会话速度从完全不可用（初始屏幕绘制约 45 秒，点击菜单延迟约 5 秒）到完全可用（初始屏幕绘制 <5 秒，点击菜单延迟 <1 秒）。

请注意，这些时间用于从远程计算机通过电缆调制解调器连接到我家的 iMac。即使我只在 VNC 上使用主屏幕，这也正在运行双屏幕女巫。我还没有想出一种方法来关闭 VNC 中的辅助屏幕，并且拔掉它很麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-01-13T21:04:02.397

我两个都用。我发现 OS X 中的内置 VNC 服务器提供了与击键的最大兼容性。我在本地网络上时使用它。使用 VPN（慢得多）时，我在非标准端口 #（比如 5905）上设置 Vine 服务器（“系统服务器”模式），颜色分辨率要低得多，因此屏幕不需要 30 秒即可重绘我点击一些东西。

然后我只要求我的客户端通过适当的端口连接：5900 调用内置 VNC 服务器（用于 LAN 上的高 rez 使用），5905 调用 Vine 服务器（用于通过 VPN 的屏幕更新速度）。两全其美。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T16:12:23.107

我放弃并开始使用 LogMeIn 的免费版。

# c++ - 在 Windows 上获取实际文件名（使用正确的大小写）

> ID：74451
> 
> 赞同：19
> 
> 时间：2008-09-16T16:51:45.410
> 
> 标签：c++, c, windows, winapi

Windows 文件系统不区分大小写。给定文件/文件夹名称（例如“somefile”），我如何获得该文件/文件夹的*实际*名称（例如，如果资源管理器显示它，它应该返回“SomeFile”）？

我知道的一些方法，所有这些方法似乎都很倒退：

1.  给定完整路径，搜索路径上的每个文件夹（通过 FindFirstFile）。这给出了每个文件夹的正确大小写结果。在最后一步，搜索文件本身。
2.  从句柄获取文件名（如[MSDN 示例](http://msdn.microsoft.com/en-us/library/aa366789(VS.85).aspx)）。这需要打开一个文件、创建文件映射、获取它的名称、解析设备名称等。相当复杂。它不适用于文件夹或零大小文件。

我错过了一些明显的 WinAPI 调用吗？最简单的方法，如 GetActualPathName() 或 GetFullPathName() 使用传入的大小写返回名称（例如，如果传入的是“程序文件”，即使它应该是“程序文件”）。

我正在寻找本机解决方案（不是 .NET 解决方案）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-17T09:35:02.750

[*在此，我根据cspirz*](https://stackoverflow.com/questions/74451/getting-actual-file-name-with-proper-casing-on-windows#74588)[的原始答案](https://stackoverflow.com/questions/74451/getting-actual-file-name-with-proper-casing-on-windows#74588)*回答我自己的问题。*

 *这是一个给定绝对、相对或网络路径的函数，将返回大小写的路径，就像它在 Windows 上显示的一样。如果路径的某些组件不存在，它将从该点返回传入的路径。

它非常复杂，因为它试图处理网络路径和其他边缘情况。它对宽字符串进行操作并使用 std::wstring。是的，理论上 Unicode TCHAR 可能与 wchar_t 不同；这是给读者的练习:)

```
std::wstring GetActualPathName( const wchar_t* path )
{
    // This is quite involved, but the meat is SHGetFileInfo

    const wchar_t kSeparator = L'\\';

    // copy input string because we'll be temporary modifying it in place
    size_t length = wcslen(path);
    wchar_t buffer[MAX_PATH];
    memcpy( buffer, path, (length+1) * sizeof(path[0]) );

    size_t i = 0;

    std::wstring result;

    // for network paths (\\server\share\RestOfPath), getting the display
    // name mangles it into unusable form (e.g. "\\server\share" turns
    // into "share on server (server)"). So detect this case and just skip
    // up to two path components
    if( length >= 2 && buffer[0] == kSeparator && buffer[1] == kSeparator )
    {
        int skippedCount = 0;
        i = 2; // start after '\\'
        while( i < length && skippedCount < 2 )
        {
            if( buffer[i] == kSeparator )
                ++skippedCount;
            ++i;
        }

        result.append( buffer, i );
    }
    // for drive names, just add it uppercased
    else if( length >= 2 && buffer[1] == L':' )
    {
        result += towupper(buffer[0]);
        result += L':';
        if( length >= 3 && buffer[2] == kSeparator )
        {
            result += kSeparator;
            i = 3; // start after drive, colon and separator
        }
        else
        {
            i = 2; // start after drive and colon
        }
    }

    size_t lastComponentStart = i;
    bool addSeparator = false;

    while( i < length )
    {
        // skip until path separator
        while( i < length && buffer[i] != kSeparator )
            ++i;

        if( addSeparator )
            result += kSeparator;

        // if we found path separator, get real filename of this
        // last path name component
        bool foundSeparator = (i < length);
        buffer[i] = 0;
        SHFILEINFOW info;

        // nuke the path separator so that we get real name of current path component
        info.szDisplayName[0] = 0;
        if( SHGetFileInfoW( buffer, 0, &info, sizeof(info), SHGFI_DISPLAYNAME ) )
        {
            result += info.szDisplayName;
        }
        else
        {
            // most likely file does not exist.
            // So just append original path name component.
            result.append( buffer + lastComponentStart, i - lastComponentStart );
        }

        // restore path separator that we might have nuked before
        if( foundSeparator )
            buffer[i] = kSeparator;

        ++i;
        lastComponentStart = i;
        addSeparator = true;
    }

    return result;
} 
```

再次感谢 cspiz 将我指向 SHGetFileInfo。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T17:04:32.523

您是否尝试过使用[SHGetFileInfo？](http://msdn.microsoft.com/en-us/library/bb762179(VS.85).aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-03-27T21:36:14.183

还有另一种解决方案。首先调用 GetShortPathName()，然后调用 GetLongPathName()。猜猜那将使用什么字符大小写？;-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T17:01:44.747

好的，这是 VBScript，但即便如此我还是建议使用 Scripting.FileSystemObject 对象

```
Dim fso
Set fso = CreateObject("Scripting.FileSystemObject")
Dim f
Set f = fso.GetFile("C:\testfile.dat") 'actually named "testFILE.dAt"
wscript.echo f.Name 
```

我得到的回应来自这个片段是

```
testFILE.dAt 
```

希望至少可以为您指明正确的方向。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-17T14:47:30.170

刚刚发现`Scripting.FileSystemObject`@bugmagnet 10 年前的建议是宝。与我的旧方法不同，它适用于绝对路径、相对路径、UNC 路径和超长路径（路径长于`MAX_PATH`）。为我没有早点测试他的方法而感到羞耻。

为了将来参考，我想展示这段代码，它可以在 C 和 C++ 模式下编译。在 C++ 模式下，代码将使用 STL 和 ATL。在 C 模式下，您可以清楚地看到幕后一切是如何运作的。

```
#include <Windows.h>
#include <objbase.h>
#include <conio.h> // for _getch()

#ifndef __cplusplus
#   include <stdio.h>

#define SafeFree(p, fn) \
    if (p) { fn(p); (p) = NULL; }

#define SafeFreeCOM(p) \
    if (p) { (p)->lpVtbl->Release(p); (p) = NULL; }

static HRESULT CorrectPathCasing2(
    LPCWSTR const pszSrc, LPWSTR *ppszDst)
{
    DWORD const clsCtx = CLSCTX_INPROC_SERVER;
    LCID const lcid = LOCALE_USER_DEFAULT;
    LPCWSTR const pszProgId = L"Scripting.FileSystemObject";
    LPCWSTR const pszMethod = L"GetAbsolutePathName";
    HRESULT hr = 0;
    CLSID clsid = { 0 };
    IDispatch *pDisp = NULL;
    DISPID dispid = 0;
    VARIANT vtSrc = { VT_BSTR };
    VARIANT vtDst = { VT_BSTR };
    DISPPARAMS params = { 0 };
    SIZE_T cbDst = 0;
    LPWSTR pszDst = NULL;

    // CoCreateInstance<IDispatch>(pszProgId, &pDisp)

    hr = CLSIDFromProgID(pszProgId, &clsid);
    if (FAILED(hr)) goto eof;

    hr = CoCreateInstance(&clsid, NULL, clsCtx,
        &IID_IDispatch, (void**)&pDisp);
    if (FAILED(hr)) goto eof;
    if (!pDisp) {
        hr = E_UNEXPECTED; goto eof;
    }

    // Variant<BSTR> vtSrc(pszSrc), vtDst;
    // vtDst = pDisp->InvokeMethod( pDisp->GetIDOfName(pszMethod), vtSrc );

    hr = pDisp->lpVtbl->GetIDsOfNames(pDisp, NULL,
        (LPOLESTR*)&pszMethod, 1, lcid, &dispid);
    if (FAILED(hr)) goto eof;

    vtSrc.bstrVal = SysAllocString(pszSrc);
    if (!vtSrc.bstrVal) {
        hr = E_OUTOFMEMORY; goto eof;
    }
    params.rgvarg = &vtSrc;
    params.cArgs = 1;
    hr = pDisp->lpVtbl->Invoke(pDisp, dispid, NULL, lcid,
        DISPATCH_METHOD, &params, &vtDst, NULL, NULL);
    if (FAILED(hr)) goto eof;
    if (!vtDst.bstrVal) {
        hr = E_UNEXPECTED; goto eof;
    }

    // *ppszDst = AllocWStrCopyBStrFrom(vtDst.bstrVal);

    cbDst = SysStringByteLen(vtDst.bstrVal);
    pszDst = HeapAlloc(GetProcessHeap(),
        HEAP_ZERO_MEMORY, cbDst + sizeof(WCHAR));
    if (!pszDst) {
        hr = E_OUTOFMEMORY; goto eof;
    }
    CopyMemory(pszDst, vtDst.bstrVal, cbDst);
    *ppszDst = pszDst;

eof:
    SafeFree(vtDst.bstrVal, SysFreeString);
    SafeFree(vtSrc.bstrVal, SysFreeString);
    SafeFreeCOM(pDisp);
    return hr;
}

static void Cout(char const *psz)
{
    printf("%s", psz);
}

static void CoutErr(HRESULT hr)
{
    printf("Error HRESULT 0x%.8X!\n", hr);
}

static void Test(LPCWSTR pszPath)
{
    LPWSTR pszRet = NULL;
    HRESULT hr = CorrectPathCasing2(pszPath, &pszRet);
    if (FAILED(hr)) {
        wprintf(L"Input: <%s>\n", pszPath);
        CoutErr(hr);
    }
    else {
        wprintf(L"Was: <%s>\nNow: <%s>\n", pszPath, pszRet);
        HeapFree(GetProcessHeap(), 0, pszRet);
    }
}

#else // Use C++ STL and ATL
#   include <iostream>
#   include <iomanip>
#   include <string>
#   include <atlbase.h>

static HRESULT CorrectPathCasing2(
    std::wstring const &srcPath,
    std::wstring &dstPath)
{
    HRESULT hr = 0;
    CComPtr<IDispatch> disp;
    hr = disp.CoCreateInstance(L"Scripting.FileSystemObject");
    if (FAILED(hr)) return hr;

    CComVariant src(srcPath.c_str()), dst;
    hr = disp.Invoke1(L"GetAbsolutePathName", &src, &dst);
    if (FAILED(hr)) return hr;

    SIZE_T cch = SysStringLen(dst.bstrVal);
    dstPath = std::wstring(dst.bstrVal, cch);
    return hr;
}

static void Cout(char const *psz)
{
    std::cout << psz;
}

static void CoutErr(HRESULT hr)
{
    std::wcout
        << std::hex << std::setfill(L'0') << std::setw(8)
        << "Error HRESULT 0x" << hr << "\n";
}

static void Test(std::wstring const &path)
{
    std::wstring output;
    HRESULT hr = CorrectPathCasing2(path, output);
    if (FAILED(hr)) {
        std::wcout << L"Input: <" << path << ">\n";
        CoutErr(hr);
    }
    else {
        std::wcout << L"Was: <" << path << ">\n"
            << "Now: <" << output << ">\n";
    }
}

#endif

static void TestRoutine(void)
{
    HRESULT hr = CoInitialize(NULL);

    if (FAILED(hr)) {
        Cout("CoInitialize failed!\n");
        CoutErr(hr);
        return;
    }

    Cout("\n[ Absolute Path ]\n");
    Test(L"c:\\uSers\\RayMai\\docuMENTs");
    Test(L"C:\\WINDOWS\\SYSTEM32");

    Cout("\n[ Relative Path ]\n");
    Test(L".");
    Test(L"..");
    Test(L"\\");

    Cout("\n[ UNC Path ]\n");
    Test(L"\\\\VMWARE-HOST\\SHARED FOLDERS\\D\\PROGRAMS INSTALLER");

    Cout("\n[ Very Long Path ]\n");
    Test(L"\\\\?\\C:\\VERYVERYVERYLOOOOOOOONGFOLDERNAME\\"
        L"VERYVERYVERYLOOOOOOOONGFOLDERNAME\\"
        L"VERYVERYVERYLOOOOOOOONGFOLDERNAME\\"
        L"VERYVERYVERYLOOOOOOOONGFOLDERNAME\\"
        L"VERYVERYVERYLOOOOOOOONGFOLDERNAME\\"
        L"VERYVERYVERYLOOOOOOOONGFOLDERNAME\\"
        L"VERYVERYVERYLOOOOOOOONGFOLDERNAME\\"
        L"VERYVERYVERYLOOOOOOOONGFOLDERNAME\\"
        L"VERYVERYVERYLOOOOOOOONGFOLDERNAME");

    Cout("\n!! Worth Nothing Behavior !!\n");
    Test(L"");
    Test(L"1234notexist");
    Test(L"C:\\bad\\PATH");

    CoUninitialize();
}

int main(void)
{
    TestRoutine();
    _getch();
    return 0;
} 
```

截屏：

[![截图2](https://i.stack.imgur.com/goDre.png)](https://i.stack.imgur.com/goDre.png)

* * *

老答案：

我发现这`FindFirstFile()`将在`fd.cFileName`. 如果我们`c:\winDOWs\exPLORER.exe`作为第一个参数传递给`FindFirstFile()`，`fd.cFileName`则将是`explorer.exe`这样的：

[![证明](https://i.stack.imgur.com/3ihE5.png)](https://i.stack.imgur.com/3ihE5.png)

如果我们用 替换 path 的最后一部分`fd.cFileName`，我们将得到最后一部分；路径将变为`c:\winDOWs\explorer.exe`.

假设路径始终是绝对路径（文本长度没有变化），我们可以将此“算法”应用于路径的每个部分（驱动器号部分除外）。

谈话很便宜，这里是代码：

```
#include <windows.h>
#include <stdio.h>

/*
    c:\windows\windowsupdate.log --> c:\windows\WindowsUpdate.log
*/
static HRESULT MyProcessLastPart(LPTSTR szPath)
{
    HRESULT hr = 0;
    HANDLE hFind = NULL;
    WIN32_FIND_DATA fd = {0};
    TCHAR *p = NULL, *q = NULL;
    /* thePart = GetCorrectCasingFileName(thePath); */
    hFind = FindFirstFile(szPath, &fd);
    if (hFind == INVALID_HANDLE_VALUE) {
        hr = HRESULT_FROM_WIN32(GetLastError());
        hFind = NULL; goto eof;
    }
    /* thePath = thePath.ReplaceLast(thePart); */
    for (p = szPath; *p; ++p);
    for (q = fd.cFileName; *q; ++q, --p);
    for (q = fd.cFileName; *p = *q; ++p, ++q);
eof:
    if (hFind) { FindClose(hFind); }
    return hr;
}

/*
    Important! 'szPath' should be absolute path only.
    MUST NOT SPECIFY relative path or UNC or short file name.
*/
EXTERN_C
HRESULT __stdcall
CorrectPathCasing(
    LPTSTR szPath)
{
    HRESULT hr = 0;
    TCHAR *p = NULL;
    if (GetFileAttributes(szPath) == -1) {
        hr = HRESULT_FROM_WIN32(GetLastError()); goto eof;
    }
    for (p = szPath; *p; ++p)
    {
        if (*p == '\\' || *p == '/')
        {
            TCHAR slashChar = *p;
            if (p[-1] == ':') /* p[-2] is drive letter */
            {
                p[-2] = toupper(p[-2]);
                continue;
            }
            *p = '\0';
            hr = MyProcessLastPart(szPath);
            *p = slashChar;
            if (FAILED(hr)) goto eof;
        }
    }
    hr = MyProcessLastPart(szPath);
eof:
    return hr;
}

int main()
{
    TCHAR szPath[] = TEXT("c:\\windows\\EXPLORER.exe");
    HRESULT hr = CorrectPathCasing(szPath);
    if (SUCCEEDED(hr))
    {
        MessageBox(NULL, szPath, TEXT("Test"), MB_ICONINFORMATION);
    }
    return 0;
} 
```

[![证明 2](https://i.stack.imgur.com/vYAcH.png)](https://i.stack.imgur.com/vYAcH.png)

好处：

*   该代码适用于自 Windows 95 以来的所有 Windows 版本。
*   基本错误处理。
*   可能的最高性能。`FindFirstFile()`非常快，直接缓冲区操作使其更快。
*   只是 C 和纯 WinAPI。小可执行文件大小。

缺点：

*   仅支持绝对路径，其他是未定义的行为。
*   不确定它是否依赖于无证行为。
*   对于某些人来说，代码可能太原始了太多 DIY。可能会让你火上浇油。

代码风格背后的原因：

我`goto`用于错误处理是因为我已经习惯了（`goto`对于 C 中的错误处理非常方便）。我使用`for`循环来执行类似`strcpy`和`strchr`即时的功能，因为我想确定实际执行了什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-01T16:50:01.270

[FindFirstFileNameW](https://msdn.microsoft.com/en-us/library/windows/desktop/aa364421(v=vs.85).aspx)有一些缺点：

*   它不适用于 UNC 路径
*   它会剥离驱动器号，因此您需要将其添加回来
*   如果您的文件有多个硬链接，您需要确定正确的链接

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2008-09-16T17:04:38.670

经过快速测试，[GetLongPathName() 可以满足](http://msdn.microsoft.com/en-us/library/aa364980(VS.85).aspx)您的需求。

# vb.net - Silverlight- DataGrid 控件 - 选择更改事件干扰排序

> ID：74461
> 
> 赞同：2
> 
> 时间：2008-09-16T16:52:20.180
> 
> 标签：vb.net, silverlight, web-services, xaml, datagrid

我目前正在使用 Silverlight(Beta 2) Datagrid 控件。在我连接 SelectionChanged 事件之前，通过单击标题，网格将完美排序。现在，当单击网格时，当我单击标题进行排序时，它将触发 SelectionChanged 事件。有没有办法解决？

在一个半相关的主题中，我希望在单击已选择的项目时触发 SelectionChanged 事件（这样我可以弹出一个窗口以允许用户编辑选定的值）。现在，您必须单击一个不同的值，然后返回到您想要的值才能弹出它。还有其他方法吗？

包括我的代码。

这页纸：

```
<UserControl x:Class="WebServicesApp.Page"
xmlns="http://schemas.microsoft.com/client/2007" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"
Width="1280" Height="1024" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d">
<Grid x:Name="LayoutRoot" Background="White">
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <StackPanel Grid.Row="0" x:Name="OurStack" Orientation="Vertical" Margin="5,5,5,5">
        <ContentControl VerticalAlignment="Center" HorizontalAlignment="Center">
            <StackPanel x:Name="SearchStackPanel" Orientation="Horizontal" Margin="5,5,5,5">
                <TextBlock x:Name="SearchEmail" HorizontalAlignment="Stretch" VerticalAlignment="Center" Text="Email Address:" Margin="5,5,5,5" />
                <TextBox x:Name="InputText" HorizontalAlignment="Stretch" VerticalAlignment="Center" Width="150" Height="Auto" Margin="5,5,5,5"/>
                <Button x:Name="SearchButton" Content="Search" Click="CallServiceButton_Click" HorizontalAlignment="Center" VerticalAlignment="Center" Width="75" Height="Auto" Background="#FFAFAFAF" Margin="5,5,5,5"/>
            </StackPanel>               
        </ContentControl>
<Grid x:Name="DisplayRoot" Background="White" ShowGridLines="True"
                HorizontalAlignment="Center" VerticalAlignment="Center" MaxHeight="300" MinHeight="100" MaxWidth="800" MinWidth="200"
                ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Visible">
<data:DataGrid ItemsSource="{Binding ''}" CanUserReorderColumns="False" CanUserResizeColumns="False"  
                           AutoGenerateColumns="False" AlternatingRowBackground="#FFAFAFAF" SelectionMode="Single" 
                           HorizontalAlignment="Center"  VerticalAlignment="Center" Margin="5,5,5,5" x:Name="IncidentGrid" SelectionChanged="IncidentGrid_SelectionChanged">
                <data:DataGrid.Columns>
                    <data:DataGridTextColumn DisplayMemberBinding="{Binding Address}" Header="Email Address" IsReadOnly="True"  /> <!--Width="150"-->
                    <data:DataGridTextColumn DisplayMemberBinding="{Binding whereClause}" Header="Where Clause" IsReadOnly="True"  /> <!--Width="500"--> 
                    <data:DataGridTextColumn DisplayMemberBinding="{Binding Enabled}" Header="Enabled" IsReadOnly="True"  />
</data:DataGrid.Columns>
            </data:DataGrid>
        </Grid>
    </StackPanel>
    <Grid x:Name="EditPersonPopupGrid" Visibility="Collapsed">
        <Rectangle HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Opacity="0.765" Fill="#FF8A8A8A" />
        <Border CornerRadius="30" Background="#FF2D1DCC" Width="700" Height="400" HorizontalAlignment="Center" VerticalAlignment="Center" BorderThickness="1,1,1,1" BorderBrush="#FF000000">
            <StackPanel x:Name="EditPersonStackPanel" Orientation="Vertical" Background="White" HorizontalAlignment="Center" VerticalAlignment="Center" Width="650" >
                <ContentControl>
                    <StackPanel x:Name="EmailEditStackPanel" Orientation="Horizontal">
                        <TextBlock Text="Email Address:" Width="200" Margin="5,0,5,0" />
                        <TextBox x:Name="EmailPopupTextBox" Width="200" />
                    </StackPanel>
                </ContentControl>
                <ContentControl>
                    <StackPanel x:Name="AppliesToDropdownStackPanel" Orientation="Horizontal" Margin="2,2,2,0">
                        <TextBlock Text="Don't send when update was done by:" />
                        <StackPanel Orientation="Vertical" MaxHeight="275" MaxWidth="350" >
                            <TextBlock x:Name="SelectedItemTextBlock" TextAlignment="Right" Width="200" Margin="5,0,5,0" />
                            <Grid x:Name="UserDropDownGrid" MaxHeight="75" MaxWidth="200" Visibility="Collapsed" ScrollViewer.VerticalScrollBarVisibility="Visible" ScrollViewer.HorizontalScrollBarVisibility="Hidden" >
                                <Rectangle Fill="White" />
                                <Border Background="White">
                                    <ListBox x:Name="UsersListBox" SelectionChanged="UsersListBox_SelectionChanged" ItemsSource="{Binding UserID}" />
                                </Border>                                       
                            </Grid>
                        </StackPanel>
                        <Button x:Name="DropDownButton" Click="DropDownButton_Click" VerticalAlignment="Top" Width="25" Height="25">
                            <Path Height="10" Width="10" Fill="#FF000000" Stretch="Fill" Stroke="#FF000000" Data="M514.66669,354 L542.16669,354 L527.74988,368.41684 z" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="1,1,1,1"/>
                        </Button>
                    </StackPanel>
                </ContentControl>
                <TextBlock Text="Where Clause Condition:" />
                <TextBox x:Name="WhereClauseTextBox" Height="200" Width="800" AcceptsReturn="True" TextWrapping="Wrap" />
                <ContentControl>
                    <StackPanel Orientation="Vertical">
                        <StackPanel Orientation="Horizontal">
                            <Button x:Name="TestConditionButton" Content="Test Condition" Margin="5,5,5,5" Click="TestConditionButton_Click" />
                            <Button x:Name="Save" Content="Save" HorizontalAlignment="Right" Margin="5,5,5,5" Click="Save_Click" />
                            <Button x:Name="Cancel" Content="Cancel" HorizontalAlignment="Right" Margin="5,5,5,5" Click="Cancel_Click" />                       
                        </StackPanel>   
                        <TextBlock x:Name="TestContitionResults" Visibility="Collapsed" />
                    </StackPanel>
                </ContentControl>
            </StackPanel>               
        </Border>               
    </Grid>     
</Grid> 
```

以及更改网格选择时发生的调用：

```
Private Sub IncidentGrid_SelectionChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)

    If mFirstTime Then
        mFirstTime = False
    Else
        Dim data As SimpleASMX.EMailMonitor = CType(IncidentGrid.SelectedItem, SimpleASMX.EMailMonitor)
        Dim selectedGridItem As SimpleASMX.EMailMonitor = Nothing
        If IncidentGrid.SelectedItem IsNot Nothing Then
            selectedGridItem = CType(IncidentGrid.SelectedItem, SimpleASMX.EMailMonitor)
            EmailPopupTextBox.Text = selectedGridItem.Address
            SelectedItemTextBlock.Text = selectedGridItem.AppliesToUserID
            WhereClauseTextBox.Text = selectedGridItem.whereClause
            IncidentGrid.SelectedIndex = mEmailMonitorData.IndexOf(selectedGridItem)
        End If
        If IncidentGrid.SelectedIndex > -1 Then
            EditPersonPopupGrid.Visibility = Windows.Visibility.Visible
        Else
            EditPersonPopupGrid.Visibility = Windows.Visibility.Collapsed
        End If
    End If
End Sub 
```

对不起，如果我的代码很糟糕，我还在学习 Silverlight。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T17:36:12.213

对我来说，这看起来像是一个 Silverlight 错误。我刚刚尝试过，最后发生的事情是，当您单击列标题时， **SelectionChanged**事件会触发两次，更糟糕的是，所选项目的索引不会与当前所选项目保持同步。

我建议您通过使用第一次 SelectionChanged 触发的知识来解决它，数据网格的**SelectedItem**属性的值将为**null**

这是一些至少可以解决问题的示例代码。您的**SelectionChanged**逻辑可以进入**if**子句。

```
public partial class Page : UserControl
{
    private Person _currentSelectedPerson;

    public Page()
    {
        InitializeComponent();

        List<Person> persons = new List<Person>();
        persons.Add(new Person() { Age = 5, Name = "Tom" });
        persons.Add(new Person() { Age = 3, Name = "Lisa" });
        persons.Add(new Person() { Age = 4, Name = "Sam" });

        dg.ItemsSource = persons;
    }       

    private void SelectionChanged(object sender, EventArgs e)
    {
        DataGrid grid = sender as DataGrid;
        if (grid.SelectedItem != null)
        {
            _currentSelectedPerson = grid.SelectedItem as Person;
        }
        else
        {
            grid.SelectedItem = _currentSelectedPerson;
        }
    }
 }

public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-31T13:09:27.070

Silverlight DataGrid 中的冻结列..

[http://dotnetdreamer.wordpress.com/2009/01/31/silverlight-2-datagrid-frozen-columns/](http://dotnetdreamer.wordpress.com/2009/01/31/silverlight-2-datagrid-frozen-columns/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T19:28:46.157

您提到的第一个问题有一个错误修复（选择更改事件在度假村被触发）。

有关 Microsoft 的补丁，请参见以下 URL：

[http://www.microsoft.com/downloads/details.aspx?familyid=084A1BB2-0078-4009-94EE-E659C6409DB0&displaylang=en](http://www.microsoft.com/downloads/details.aspx?familyid=084A1BB2-0078-4009-94EE-E659C6409DB0&displaylang=en)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T20:25:38.857

这行得通，但现在如果我排序两次，它会在第一次排序，然后将弹出窗口作为 grid 的第一个选定项目。如果我关闭弹出网格，然后尝试第二次排序，它会堆栈溢出，并使 firefox 崩溃。

我想我可能需要重新考虑在 Silverlight 中工作，直到系统变得更加稳定。

感谢您的回答霍维托！

# wpf - 如何使用作为 WPF 中资源的图标？

> ID：74466
> 
> 赞同：73
> 
> 时间：2008-09-16T16:52:34.067
> 
> 标签：wpf, resources, icons

我有一个作为资源嵌入的 .ico 文件（构建操作设置为资源）。我正在尝试创建一个 NotifyIcon。如何引用我的图标？

```
notifyIcon = new NotifyIcon();
notifyIcon.Icon = ??     // my icon file is called MyIcon.ico and is embedded 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2008-09-16T17:13:28.477

您的图标文件应添加到您的项目程序集之一，其构建操作应设置为资源。添加对程序集的引用后，您可以像这样创建一个 NotifyIcon：

```
System.Windows.Forms.NotifyIcon icon = new System.Windows.Forms.NotifyIcon();
Stream iconStream = Application.GetResourceStream( new Uri( "pack://application:,,,/YourReferencedAssembly;component/YourPossibleSubFolder/YourResourceFile.ico" )).Stream;
icon.Icon = new System.Drawing.Icon( iconStream ); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-12-09T00:20:41.390

一个常见的使用模式是让通知图标与主窗口的图标相同。该图标被定义为 PNG 文件。

为此，请将图像添加到项目的资源中，然后按如下方式使用：

```
var iconHandle  = MyNamespace.Properties.Resources.MyImage.GetHicon();
this.notifyIcon.Icon = System.Drawing.Icon.FromHandle(iconHandle); 
```

在 XAML 窗口中：

```
<Window x:Class="MyNamespace.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:local="clr-namespace:Seahorse"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Height="600"
Icon="images\MyImage.png"> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-09-16T17:14:05.277

好吧，您不想使用 resx 样式的资源：您只需将 ico 文件粘贴到项目中的文件夹中（比如说“ArtWork”），然后在属性中，将 Build Action 设置为“Resources”...

然后您可以使用 PACK URI 在 XAML 中引用它...“pack://application:,,,/Artwork/Notify.ico”

请参阅此处：http: [//msdn.microsoft.com/en-us/library/aa970069.aspx](http://msdn.microsoft.com/en-us/library/aa970069.aspx#Programming_with_Pack_URIs)和[示例](http://msdn.microsoft.com/en-us/library/aa972152.aspx)

如果你想多一点……类似 WPF，你应该查看 CodePlex 上的[WPF Contrib](http://www.codeplex.com/wpfcontrib/Wiki/View.aspx?title=NotifyIcon&referringTitle=Home)项目，它有一个 NotifyIcon 控件，你可以在 XAML 中创建它并使用标准 WPF 菜单（这样你就可以坚持“任何东西“在菜单中）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-18T19:43:31.760

如果您只是在寻找简单的答案，我认为这就是 MyApp 是您的应用程序名称和应用程序的根命名空间名称的地方。您必须使用 pack URI 语法，但从嵌入式资源中提取图标不必那么复杂。

```
 <Window x:Class="MyApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Height="100"
    Width="200"
    Icon="pack://application:,,,/MyApp;component/Resources/small_icon.ico"> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T17:52:44.980

我在这里创建了一个项目并使用了嵌入式资源（构建操作设置为嵌入式资源，而不仅仅是资源）。此解决方案不适用于 Resource，但您可以操作它。我把它放在 OnIntialized() 上，但它不必去那里。

```
//IconTest = namespace; exclamic.ico = resource 
System.IO.Stream stream = this.GetType().Assembly.GetManifestResourceStream("IconTest.Resources.exclamic.ico");

   if (stream != null)
   {
       //Decode the icon from the stream and set the first frame to the BitmapSource
       BitmapDecoder decoder = IconBitmapDecoder.Create(stream, BitmapCreateOptions.None, BitmapCacheOption.None);
       BitmapSource source = decoder.Frames[0];

       //set the source of your image
       image.Source = source;
    } 
```

# c# - 对 Object.ToString() 的冗余调用

> ID：74471
> 
> 赞同：11
> 
> 时间：2008-09-16T16:52:36.763
> 
> 标签：c#, .net, resharper

我有一个函数，其中包括一个声明为*int privateCount*的参数。当我想在此参数上调用 ToString() 时，ReSharper 将其变灰并将其标记为冗余调用。因此，尽管我很好奇，但我删除了 ToString()，代码仍然可以构建！

C# 编译器如何允许这样做，其中*str*是一个字符串？

`str += privateCount +`...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-16T16:54:38.617

字符串的 + 运算符被重载以调用 String.Concat 传入表达式的左侧和右侧。因此：

```
string x = "123" + 45; 
```

编译为：

```
String.Concat("123", 45); 
```

由于 String.Concat 接受两个对象，因此右侧 (45) 被装箱，然后在其上调用 ToString()。

请注意，这种“重载”不是通过语言中的运算符重载（也不是名为 op_Addition 的方法），而是由编译器处理。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-16T18:23:50.290

这不仅是不好的做法，而且性能也较差：整数必须被装箱，因为 String.Concat 需要一个对象，而 int.ToString() 不需要装箱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T16:59:38.790

C# 会自动为您将对象转换为字符串。考虑这行代码：

```
aString = aString + 23; 
```

这是有效的 C#；它编译为对 String.Concat() 的调用，该调用将两个对象作为参数。这些对象会自动为您转换为字符串对象。

当您编写时会发生同样的事情：

```
aString += 23; 
```

同样，这编译为对 String.Concat(); 的相同调用。它只是写的不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T17:06:57.463

这是一种有效的不好的做法，因为如果变量是字符串或 int，您必须三思而后行。如果变量被称为 myInt 怎么办？

```
myInt = myInt + 23; 
```

这种形式更具可读性和可理解性？

```
myInt = mInt + "23"; 
```

甚至：

```
myInt = string.Format("{0}{1}", myInt, 23); 
```

我们从代码中知道它是一个字符串而不是整数。

# c# - 如何在 WPF 中创建可扩展的 Moebius-strip？

> ID：74479
> 
> 赞同：0
> 
> 时间：2008-09-16T16:53:08.730
> 
> 标签：c#, wpf, xaml, math, topology

[莫比乌斯带](http://en.wikipedia.org/wiki/M%C3%B6bius_strip)是具有一侧的表面。

如何在 XAML/WPF 中定义这样一个对象？
如何使用 C# 在 3D 中操作、放大和缩小和旋转这样的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-22T11:56:30.613

使用[Helix Toolkit](http://www.helix-toolkit.org/)，我可以在几分钟内将其显示在屏幕上。他们的一个演示应用程序在屏幕上呈现参数表面，并允许您更改方程式。“魔法”在于数学，我从[Mathematica StackExchange-site](https://mathematica.stackexchange.com/questions/94943/how-does-one-plot-a-m%C3%B6bius-strip)复制：

```
u *= 2 * pi;
v = (v - 0.5) * 2 * pi;

x = ( 1 + (v/2) * cos(u/2)) * cos(u);
y = ( 1 + (v/2) * cos(u/2)) * sin(u);
z = (v/2) * sin(u/2); 
```

在屏幕上看起来像这样：

[![显示莫比乌斯带的 Helix 演示应用程序的屏幕截图](https://i.stack.imgur.com/p8nSf.png)](https://i.stack.imgur.com/p8nSf.png)

# ms-access - 为什么我应该关心压缩 MS Access .mdb 文件？

> ID：74484
> 
> 赞同：4
> 
> 时间：2008-09-16T16:53:40.567
> 
> 标签：ms-access

我们分发使用 MS Access .mdb 文件的应用程序。有人注意到，在 MS Access 中打开文件后，文件大小缩小了很多。这表明该文件是一个很好的压缩候选者，但我们没有为我们的用户提供这样做的方法。

所以，我的问题是，这重要吗？我们在乎吗？如果我们的用户从不压缩数据库，会发生什么坏事？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-16T16:58:40.930

除了使您的数据库更小外，它还会重新计算表上的索引并对表进行碎片整理，从而加快访问速度。它还会发现任何不应该在您的数据库中发生但可能由于 Access 中的错误或崩溃而发生的不一致。

不过，这并非完全没有风险——Access [2007 中的一个错误](http://blogs.msdn.com/access/archive/2008/05/29/kb-article-950812-compact-and-repair-might-delete-your-database-access-2007.aspx)有时会在此过程中删除您的数据库。

所以这通常是一件好事，但要搭配一个好的备份程序。备份到位后，您还可以从任何“不可恢复”的压缩包中恢复，并以最少的数据丢失修复问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T17:54:03.713

确保您定期压缩和修复数据库，尤其是在数据库应用程序经常遇到记录更新、删除和插入的情况下。这不仅可以将数据库文件的大小保持在最低限度——这将有助于加快数据库操作和网络通信——它还可以执行数据库内务管理，这对数据的稳定性有更大的好处。但在压缩数据库之前，请确保备份文件，以防压缩出现问题。

Jet 压缩数据库以重新组织文件中的内容，以便为数据、表或索引分配的每个 4 KB“页面”（Access 95/97 为 2KB）空间位于连续区域中。Jet 从标记为已删除的记录中恢复空间，并按照主键顺序重写每个表中的记录，就像聚集索引一样。这将使您的数据库的读/写操作更快。

Jet 还在压缩期间更新表统计信息。这包括识别每个表中的记录数，这将允许 Jet 使用最优化的方法来扫描记录，无论是通过使用索引还是在记录很少时使用全表扫描。压缩后，运行每个存储的查询，以便 Jet 使用这些更新的表统计信息重新优化它，这可以提高查询性能。

如果需要，Access 2000、2002、2003 和 2007 会将压缩与修复操作结合起来。修复过程：

1 - 清理不完整的交易

2 - 将系统表中的数据与实际表中的数据、查询和索引中的数据进行比较并修复错误

3 - 修复非常简单的数据结构错误，例如丢失指向多页记录的指针（这并不总是成功，这就是为什么“修复”并不总是能够保存损坏的 Access 数据库的原因）

4 - 替换有关 VBA 项目结构的缺失信息

5 - 替换打开表单、报告和模块所需的缺失信息

6 - 修复表单、报告和模块中的简单对象结构错误

如果用户从不压缩/修复数据库，可能会发生的坏事是它会由于膨胀而变慢，并且可能变得不稳定 - 意味着损坏。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T17:24:59.010

压缩 Access 数据库（也称为 MS JET 数据库）有点像对硬盘进行碎片整理。访问（或者更准确地说，MS JET 数据库引擎）在重复使用空间方面不是很好 - 因此，当更新、插入或删除记录时，空间并不总是被回收 - 相反，新空间被添加到数据库文件的末尾并改为使用。

一般的经验法则是，如果您的 [Access] 数据库将被写入（更新、更改或添加到），您应该允许压缩 - 否则它的大小**会**增长（不仅仅是您添加的数据， 也）。

因此，要回答您的问题：

*   是的，这很重要（除非您的数据库是只读的）。
*   您应该关心（除非您*不*关心用户的磁盘空间）。
*   如果您不压缩 Access 数据库，随着时间的推移，它会变得比其中的数据所显示的要大得多，从而降低性能并增加错误和损坏的可能性。（作为基于文件的数据库，Access 数据库文件因损坏而臭名昭著，尤其是在通过网络访问时。）

如果您决定将此功能添加到您的应用程序，这篇关于[如何通过 ADO 压缩 Microsoft Access 数据库](http://support.microsoft.com/kb/230501)的文章将为您提供一个很好的起点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T16:58:36.577

我会为用户提供一种压缩数据库的方法。当压缩将减少到 60-80 时，我已经看到数据库增长到 600 多兆字节。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T17:40:13.653

呼应 Nate：在旧版本中，我的数据库已经损坏 - 所以一个好的备份机制是必不可少的。我不会在您的应用程序中编写任何代码来自动执行此操作。但是，如果客户发现他们的数据库运行速度非常慢，您的技术支持人员可以在需要时与他们讨论（当然需要适当的备份）。

如果他们的数据库变得如此之大以至于压缩开始成为必需品，那么也许是时候转向 MS-SQL 了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T16:57:53.477

我发现 Access 数据库文件几乎总是随着时间的推移而损坏。压缩和修复它们有助于将其推迟一段时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T17:26:45.607

好吧，这真的很重要！每次操作数据时，mdb 文件的大小都会不断增加，直到达到无法承受的大小。但是您不必通过界面提供压缩方法。您可以在 mdb 文件中添加以下代码，以便在每次关闭文件时对其进行压缩：

Application.SetOption（“自动压缩”），1

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T17:36:10.480

我还*强烈*建议为您的应用程序查看 VistaDB ( [http://www.vistadb.net/](http://www.vistadb.net/) ) 或 SQL Compact ( [http://www.microsoft.com/sql/editions/compact/](http://www.microsoft.com/sql/editions/compact/) )。这些可能不适合您的应用程序......但绝对值得一看。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-16T16:56:06.037

如果您不为您的用户提供一种解压缩方式并且原始大小不是问题，那么请不要打扰。

# iis - 将开发环境限制为仅通过电子邮件发送某些域进行测试（XP smtp IIS）

> ID：74494
> 
> 赞同：2
> 
> 时间：2008-09-16T16:54:31.190
> 
> 标签：iis, testing, windows-xp, smtp

我正在 XP 虚拟机上开发一个网站，并在 IIS 中设置了一个 SMTP 虚拟服务器——它可以很好地传递邮件。我*想要*确认该站点发送的任何电子邮件都只会发送到特定域。

XP 防火墙似乎只涉及传入连接，我无法阻止端口 25 上的传出 TCP。而且我无法将 SMTP 服务器配置为按传递地址进行过滤。

使用此设置，是否有任何简单的方法可以按目标地址过滤外发电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T18:26:33.810

这是一个想法：

在`Advanced Delivery`选项 ( `SMTP Virtual Server Properties`>`Delivery`选项卡 > `Advanced`) 下。在那里您可以设置一个“智能主机”，它是用于实际发送邮件的 SMTP 服务器，因此您可以让它直接传送到特定域的传入 SMTP 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T17:00:42.843

我认为最简单的方法是在网站上的邮件发送代码中添加一个检查（必须有一些类负责发送邮件）。

您可以包含一个检查，该检查仅在代码以调试模式编译时才有效（使用编译器指令）。因此，当您在调试模式下开发和构建站点时，此代码会检查传出消息是否有效（特定域）。如果他们是，它让他们走，否则它不发送邮件。

# c# - What is the "best" canonical implementation of Equals() for reference types?

> ID：74514
> 
> 赞同：6
> 
> 时间：2008-09-16T16:56:24.850
> 
> 标签：c#, .net, equals

Implementing Equals() for reference types is harder than it seems. My current canonical implementation goes like this:

```
public bool Equals( MyClass obj )
{
  // If both refer to the same reference they are equal.
  if( ReferenceEquals( obj, this ) )
    return true;

  // If the other object is null they are not equal because in C# this cannot be null.
  if( ReferenceEquals( obj, null ) )
   return false;

   // Compare data to evaluate equality    
   return _data.Equals( obj._data );
}

public override bool Equals( object obj )
{
  // If both refer to the same reference they are equal.
  if( ReferenceEquals( obj, this ) )
    return true;

  // If the other object is null or is of a different types the objects are not equal. 
  if( ReferenceEquals( obj, null ) || obj.GetType() != GetType() )
    return false;

  // Use type-safe equality comparison
  return Equals( (MyClass)obj );
}

public override int GetHashCode()
{
  // Use data's hash code as our hashcode  
  return _data.GetHashCode();
} 
```

I think that this covers all corner (inheritance and such) cases but I may be wrong. What do you guys think?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T17:27:11.207

I wrote a fairly comprehensive guide to this a while back. For a start your equals implementations should be shared (i.e. the overload taking an object should pass through to the one taking a strongly typed object). Additionally you need to consider things such as your object should be immutable because of the need to override GetHashCode. More info here:

[http://gregbeech.com/blog/implementing-object-equality-in-dotnet](http://gregbeech.com/blog/implementing-object-equality-in-dotnet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T17:22:54.757

Better hope that this._data is not null if it's also a reference type.

```
public bool Equals( MyClass obj )
{
    if (obj == null) {
        return false;
    }
    else {
        return (this._data != null && this._data.Equals( obj._data ))
                         || obj._data == null;
    }
}

public override bool Equals( object obj )
{
    if (obj == null || !(obj is MyClass)) {
        return false;
    }
    else {
        return this.Equals( (MyClass)obj );
    }
}

public override int GetHashCode() {
    return this._data == null ? 0 : this._data.GetHashCode();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T16:59:02.410

It depends on whether you're writing a value type or a reference type. For a sortable value type, I recommend this: [A code snippet for Visual Studio 2005 that implements a skeleton value type adhering to Framework Design Guidelines](http://msmvps.com/blogs/peterritchie/archive/2006/03/25/a-code-snippet-for-visual-studio-2005-that-implements-a-skeleton-value-type-adhering-to-framework-design-guidelines.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T17:01:02.297

Concerning inheritance, I think you should just let the OO paradigm does its magic.

Specifically, the `GetType()` check should be removed, it might break polymorphism down the line.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T17:17:09.747

I agree with chakrit, objects of different types should be allowed to be semantically equal if they have the same data or ID.

Personally, I use the following:

```
 public override bool Equals(object obj)
    {
        var other = obj as MyClass;
        if (other == null) return false;

        return this.data.Equals(other.data);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-09T03:50:30.390

As the link in the accepted answer by Greg Beech is broken, I hope this answer might be helpful to some.

Microsoft's documentation provides the following example for a typical implementation of `Equals()` on reference types (i.e. class):

```
public override bool Equals(object obj) => this.Equals(obj as TwoDPoint);

public bool Equals(TwoDPoint p)
{
   if (p is null)
   {
         return false;
   }

   // Optimization for a common success case.
   if (Object.ReferenceEquals(this, p))
   {
         return true;
   }

   // If run-time types are not exactly the same, return false.
   if (this.GetType() != p.GetType())
   {
         return false;
   }

   // Return true if the fields match.
   // Note that the base class is not invoked because it is
   // System.Object, which defines Equals as reference equality.
   return (X == p.X) && (Y == p.Y);
} 
```

The complete example with more details including what to do in derived classes or for structs, can be found at ["How to define value equality for a class or struct (C# Programming Guide)"](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/how-to-define-value-equality-for-a-type)

As an alternative to what is described in Microsoft's doc, the method `GetHashCode()` can also be implemented as follows:

```
public override int GetHashCode()
{
   return HashCode.Combine(X, Y);
} 
```

# delphi - 使用 Delphi 的 7-Zip？

> ID：74519
> 
> 赞同：25
> 
> 时间：2008-09-16T16:57:03.947
> 
> 标签：delphi, 7zip

我想使用 Delphi 的 7-Zip DLL，但找不到合适的文档或示例。有谁知道如何使用 Delphi 的 7-Zip DLL？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-09-17T10:39:09.960

从 1.102 版开始，[JEDI 代码库](http://wiki.delphi-jedi.org/index.php?title=JEDI_Code_Library)支持[JclCompression](http://jcl.svn.sourceforge.net/viewvc/jcl/trunk/jcl/source/common/JclCompression.pas?view=markup)单元中内置的[7-Zip 。](http://en.wikipedia.org/wiki/7-Zip)不过我自己还没用过。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-08-28T01:58:29.900

扩展 Oliver Giesen 的答案，就像很多 JEDI 代码库一样，我找不到任何像样的文档，但这对我有用：

```
uses
   JclCompression;

procedure TfrmSevenZipTest.Button1Click(Sender: TObject);
const
   FILENAME = 'F:\temp\test.zip';
var
   archiveclass: TJclDecompressArchiveClass;
   archive: TJclDecompressArchive;
   item: TJclCompressionItem;
   s: String;
   i: Integer;
begin
   archiveclass := GetArchiveFormats.FindDecompressFormat(FILENAME);

   if not Assigned(archiveclass) then
      raise Exception.Create('Could not determine the Format of ' + FILENAME);

   archive := archiveclass.Create(FILENAME);
   try
      if not (archive is TJclSevenZipDecompressArchive) then
         raise Exception.Create('This format is not handled by 7z.dll');

      archive.ListFiles;

      s := Format('test.zip Item Count: %d'#13#10#13#10, [archive.ItemCount]);

      for i := 0 to archive.ItemCount - 1 do
      begin
         item := archive.Items[i];
         case item.Kind of
            ikFile:
               s := s + IntToStr(i+1) + ': ' + item.PackedName + #13#10;
            ikDirectory:
               s := s + IntToStr(i+1) + ': ' + item.PackedName + '\'#13#10;//'
         end;
      end;

      if archive.ItemCount > 0 then
      begin
//         archive.Items[0].Selected := true;
//         archive.ExtractSelected('F:\temp\test');

         archive.ExtractAll('F:\temp\test');
      end;

      ShowMessage(s);
   finally
      archive.Free;
   end;
end; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-08-28T16:24:51.897

7 压缩插件 API

[http://www.progdigy.com/?page_id=13](http://www.progdigy.com/?page_id=13)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-09-04T18:21:13.600

没有 DLL 的 Zip 和 7z，试试 Synopse： [http ://synopse.info/forum/viewtopic.php?pid=163](http://synopse.info/forum/viewtopic.php?pid=163)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-12-05T21:40:22.507

Delphi 现在在 XE2 中使用 TZipFile 提供原生的跨平台 zip 支持：

[如何在 Delphi XE2 和 FireMonkey 中使用 TZipFile 提取 zip 文件](http://delphiwiki.com/extract-zip-files-in-delphi-and-firemonkey-with-tzipfile/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-18T11:08:10.583

如果您打算仅将 7Zip 用于 zip 和 unzip，请查看[TZip](http://www.angusj.com/delphi/)组件。我为自己的目的编写了一个小包装器，您可以在[Zipper.pas](https://monex.svn.sourceforge.net/svnroot/monex/trunk/Knjiznice/)文件中找到它，可以随意重用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-04T22:24:14.093

我尝试了许多解决方案并且遇到了问题，这个有效。

下载[https://github.com/zedalaye/d7zip](https://github.com/zedalaye/d7zip) 将 7z.dll 和 Sevenzip.pas 复制到您的项目目录中，并将 Sevenzip.pas 添加到您的项目中。

然后你可以用它来解压：

```
using sevenzip;

procedure Unzip7zFile (zipFullFname:string);
  var
    outDir:string;
  begin
    with CreateInArchive(CLSID_CFormat7z) do
    begin  
      OpenFile(zipFullFname);
      outDir := ChangeFileExt(zipFullFname, '');
      ForceDirectories (outDir);
      ExtractTo(outDir);
    end;
  end; 
```

用法：

```
Unzip7zFile(ExtractFilePath(Application.ExeName) + 'STR_SI_FULL_1000420.7z'); 
```

# visual-studio-2008 - 我正在寻找使用 Visual Studio 使用 Qt4 的开源版本编写和编译

> ID：74521
> 
> 赞同：4
> 
> 时间：2008-09-16T16:57:11.840
> 
> 标签：visual-studio-2008, qt

有没有人有在 Visual Studio 2008 中设置 Qt4 的详细信息？与其他资源的链接也将不胜感激。

我已经知道Qt的商业版有这方面的应用。我也意识到我可能需要从源代码编译，因为开源的安装程序不支持 Visual Studio 并安装 Cygwin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T17:17:14.333

看起来它已经用 Visual Studio 2005 完成了： [http ://wiki.qgis.org/qgiswiki/Building_QT_4_with_Visual_C%2B%2B_2005](http://wiki.qgis.org/qgiswiki/Building_QT_4_with_Visual_C%2B%2B_2005 "使用 Visual C++ 2005 构建 QT 4")

我想它可以与 Visual Studio 2008 一起使用，即使它需要一些更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T22:02:29.793

现在使用 QT4 更加简单，您不再需要补丁。基本上你只需要提供“-spec win32-msvc2008”来配置。
这里有详细说明[http://tom.paschenda.org/blog/?p=28](http://tom.paschenda.org/blog/?p=28)

Visual Studio 插件也是开源的并且可用。

# visual-studio - 项目的 TFS 注释/责备总结报告

> ID：74526
> 
> 赞同：15
> 
> 时间：2008-09-16T16:57:52.803
> 
> 标签：visual-studio, tfs, tfs-code-review

在 Team Foundation Server 中，我知道您可以使用**Annotate**功能来查看谁最后编辑了特定文件中的每一行（相当于 CVS 中的“Blame”）。我想做的是类似于在项目中的每个文件上运行 Annotate，并获得所有在项目中编辑文件的开发人员的摘要报告，以及他们目前“拥有”的代码行数项目。

除了系统地运行每个文件的注释之外，我看不到这样做的方法。有什么想法可以加快这个过程吗？

PS - 我这样做是为了看看有多少顾问的代码仍然保留在一个特定的（相当大的）项目中，而不是密切关注我的开发人员，以防你担心我的动机:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-17T00:00:12.930

在 TFS 中的文件目录中递归使用“tf.exe history”命令很容易。这将告诉您谁更改了哪些文件。

然而，你所追求的远不止这些——你想知道任何文件的最新版本是否有特定用户编写的行。

Team Foundation Power Tools 附带一个名为“tfpt.exe annotate”的命令行版本的注释。这有一个 /noprompt 选项可以将输出定向到控制台，但它只输出变更集 id - 而不是用户名。

您还可以使用 TFS VersionControl 对象模型来编写一个完全满足您需要的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T14:46:53.770

如果您安装了 TFS Power 工具（至少对于 VS2005）；它被称为注释。

它可能是VS2008的一部分......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-08T16:03:19.343

Annotate 现在是 Visual Studio 的一部分（我认为它是在 VS 2010 中引入的）。

[文档](http://msdn.microsoft.com/en-us/library/bb385979.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-05-31T10:03:33.667

您可以使用 TFS Analysis Cube 来查看生成代码流失报告，我相信这是您想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-23T18:45:42.510

我正在写一个8岁问题的答案:)。它并不是一个完整的答案，而是一个建议查看 TFS 的 excel 报告。

TFS2013 / 2015 on prem 有一个 excel 报告，可用于可视化代码流失。

在 VS 打开团队资源管理器中，然后选择“文档”，然后展开“Excel 报告”。我相信代码流失报告有类似的讨论。该报告是由一些默认项目模板制作的，所以我认为 tfs2013 on prem 只是创建它。

代码流失 Excel 报告 VS2015 [https://msdn.microsoft.com/en-us/library/dd695782.aspx](https://msdn.microsoft.com/en-us/library/dd695782.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-15T10:27:06.240

我有非常相似的要求来获取文件中特定属性的详细信息，例如谁添加、何时添加、相关工作项等；以下 GitHub 项目正在实施以获取所需的详细信息，并且需要进行最少的更改以处理多个文件或项目-

[SonarQube SCM TFVC 插件](https://github.com/SonarQubeCommunity/sonar-scm-tfvc)

它需要从安装了 Team Foundation Server 对象模型的 Windows 机器上执行分析（TFS 2013 下载）。

这篇博文也有很好的解释和示例应用程序 -

[TFS SDK：以编程方式连接到 TFS 2010 和 TFS 2012](http://geekswithblogs.net/TarunArora/archive/2011/06/18/tfs-2010-sdk-connecting-to-tfs-2010-programmaticallyndashpart-1.aspx)

# svn - VisualSVN 服务器需要用户名和密码

> ID：74560
> 
> 赞同：8
> 
> 时间：2008-09-16T17:01:03.890
> 
> 标签：svn, tortoisesvn, visualsvn-server

我已经重命名了我的服务器，并试图通过 TortoiseSVN 访问 VisualSVN 服务器存储库。在[这篇文章](https://stackoverflow.com/questions/69646/svn-and-renaming-the-server-its-running-on)中， Gordon 帮助我找到了正确的命令 - 感谢 Gordon。

现在 VisualSVN 服务器要求我输入用户名和密码。我不记得设置了一个，如果我这样做了，我已经忘记了。知道如何重置此用户名/密码吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T17:03:42.587

这取决于您的 Visual SVN 服务器是如何设置的。如果您使用本机 Windows 身份验证，只需输入您的域用户名和密码。否则，您将不得不登录运行 Visual SVN Server 的机器并在那里重置您的密码。Visual SVN Server 提供了一个方便的工具来管理用户、密码、权限等。这个工具应该可以从你服务器的开始菜单中获得。

# vb.net - 如何为 .net 编写静态代码分析器

> ID：74561
> 
> 赞同：5
> 
> 时间：2008-09-16T17:01:05.013
> 
> 标签：vb.net, code-analysis

我有兴趣为 vb.net 编写静态代码分析器，看看它是否符合我公司的标准编码指南。请告知我必须从哪里开始。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-16T17:02:32.607

[我建议您使用FxCop](http://msdn.microsoft.com/en-us/library/bb429476(VS.80).aspx)，而不是编写自己的静态代码分析器：而是根据需要编写自定义 FxCop 规则。它会为你节省很多时间。 [http://www.binarycoder.net/fxcop/](http://www.binarycoder.net/fxcop/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T17:07:20.147

我建议你使用 Mono 的宪兵队。这是一个非常好的工具，有很多内置的规则。它还生成漂亮的 HTML 报告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T17:46:32.580

如果您需要 mroe 架构洞察力，请使用 NDepend。这个工具并没有停止让我惊讶。它可以做的比 FxCop 多得多。虽然是商业版，但有免费试用版

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T17:20:03.470

[FXCop](http://go.microsoft.com/fwlink/?LinkId=70294)是解决编码问题/错误的良好开端，[StyleCop](http://blogs.msdn.com/sourceanalysis/)适合编码风格（显然），但如果这两者都不起作用，那么您可以自己编写解析器或使用 .Net Framework 中的[VBCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.vbcodeprovider.aspx)类

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T17:02:45.773

从 FxCop 开始。如果你不能做你正在尝试的事情，试试 NStatic 或 NDepend 之类的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T17:09:44.570

最好的选择是使用 FxCop 或 StyleCop 并在必要时编写自定义规则。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T17:20:22.343

使用 FxCop，这不是您想亲自承担的项目。所涉及的解析/词法规则和可能的捕获将是疯狂的。我能想象在保持一点理智的同时做到这一点的唯一方法是使用 Lisp，因为它具有极高的表现力，但同样，最好使用 FxCop。

如果您出于某些（教条式？）原因必须编写自定义的内部工具，我建议您编写一个仅执行基本规则检查的 Lisp 程序。不要试图让它变得全面，我们正在谈论人工智能研究人员在软件解析能力方面正在处理的那种前沿。

只需使用 Lisp 找出可能的明显违规者，或者只是捕捉它最终擅长捕捉的不合规代码，然后对其进行简短的人眼扫描。如果您确实使用 Lisp 编写解析器，我强烈建议您滥用宏。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-09T10:01:21.170

我同意其中一位海报的观点，这将是一项相当困难的任务，但我不会从 Lisp 开始，而是从 F# 开始，就像微软为他们的 3rd 方 Windows 驱动程序分析工具所做的那样：

[http://arstechnica.com/journals/microsoft.ars/2005/11/10/1796](http://arstechnica.com/journals/microsoft.ars/2005/11/10/1796)

F# 共享 Lisp 的表现力（好吧，几乎），并且像 VB.NET 一样在 CLR 上工作，这将使整个事情变得更容易。

# html - CSS : 我网站导航栏一侧的灰线

> ID：74570
> 
> 赞同：-1
> 
> 时间：2008-09-16T17:02:14.883
> 
> 标签：html, css

我正在维护[Perl Beginners' Site](http://perl-begin.org/)，并使用了来自 Open Source Web Designs 的修改模板。现在，问题是我仍然有一个不受欢迎的工件：主框架左侧的一条灰线，导航菜单的左侧。这是一张突出不良效果[的图像。](http://www.shlomifish.org/Files/files/images/Computer/Screenshots/perl-begin-bad-artif.png)

如何修复 CSS 以解决此问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T17:07:21.410

这是`background-image`身体上的表现。快速修复（编辑 style.css 或在其他地方添加）：

```
#page-container
{
   background-color: white;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T17:07:36.027

那是一个图像。（在此处查看：http: [//perl-begin.org/images/background.gif](http://perl-begin.org/images/background.gif)）它设置在样式表的 BODY 类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T17:13:01.177

灰线应该在那里。它看起来很奇怪的原因是因为最顶部被缓冲区元素隐藏了。`background-color`从此规则集中删除规则：

```
.buffer {
    float: left; width: 160px; height: 20px; margin: 0px; padding: 0px; background-color: rgb(255,255,255); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T17:08:20.003

我认为是这样的：

```
#page-container {
    border-left: solid 1px rgb(150,150,150); border-right: solid 1px rgb(150,150,150); 
} 
```

但是，我不明白为什么没有出现右边框....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T17:23:36.097

我会对此进行快速修复以添加样式：

```
border-left:2px solid #BDBDBD; 
```

到 .buffer 类

```
.buffer {style.css (line 328)
   background-color:#FFFFFF;
   border-left:2px solid #BDBDBD; /* Grey border */
   float:left;
   height:20px;
   margin:0px;
   padding:0px;
   width:160px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T17:26:19.087

我发现了问题。

问题是您需要在#page-container 上设置白色背景。就目前而言，它有一个透明的背景，所以 navbar-sidebanner 上的 5pt 左边距显示了 page_container 的 bg ......所以改变那个 bg 你很酷。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-16T17:53:15.353

感谢所有回答的人。问题确实是#page-container 的透明度和正文的背景图像。我将它们都固定在样式表中。

# windows - 在 Windows 上仅安装 Quicktime 库

> ID：74586
> 
> 赞同：1
> 
> 时间：2008-09-16T17:04:03.787
> 
> 标签：windows, installation, quicktime

有适用于 Windows 的[Quicktime SDK](http://developer.apple.com/quicktime/download/)，但任何使用它的应用程序都需要在系统上安装 quicktime 运行时库（SDK 本身只有头文件和库存根，而不是实际的 DLL）。

如果我的应用程序使用 Quicktime，我想使用它的安装程序安装必要的库，因此不需要用户单独安装 Quicktime。我正在寻找的是某种“快速可再发行”。

截至目前（quicktime 7.x），我找不到这样做的方法。我可以捆绑整个 quicktime 安装程序（大约 20 MiB），并使用 MSI 的静默/无人值守标志启动它。但是，这种方式有几个副作用：

1.  在桌面和快速启动栏中创建 Quicktime 播放器快捷方式
2.  劫持文件关联，（例如 .mov 与 Quicktime Player 关联，即使它之前与其他东西关联）
3.  安装一些可能监视 Quicktime 关联或处理自动更新的服务/进程（qttask）。
4.  安装 Quicktime Player，实际上我不需要。

在上述情况中，前三个是相当糟糕的。

有没有办法为 Quicktime “只安装库”？

在我的应用程序中，我会使用 Quicktime 导入各种格式的图像、电影和音频文件。如果没有健全的方法来安装没有副作用的 Quicktime 运行时（更改的文件关联、额外的图标，...），那么我应该认真考虑替代解决方案（例如，加载图像的 FreeImage，也许是用于视频/音频的 DirectShow）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T17:28:41.827

如果您需要重新分发 QuickTime，请参阅[QuickTime 许可](http://developer.apple.com/softwarelicensing/agreements/quicktime.html)以了解详细信息。未经 Apple 书面同意，您不得重新分发任何 QuickTime 库。许多 CD 复制公司实际上会在打印大量 CD 之前要求提供此协议的证明。

如果没有咨询律师或您的 Apple 许可代表，我绝对不会分发“QuickTime Lite”。

AFAIK，您最好的选择是使用完整的 QuickTime 安装程序（全部 20MB），并让您的主安装程序使用“静默”标志运行它。至少，这将允许您的用户在没有六个对话框的情况下安装 QuickTime（并且没有那些令人讨厌的比基尼冲浪者图片）。苹果授权部门的人似乎认为使用“静音”标志是可以接受的，至少在我们咨询他们时是这样。

一个警告：如果用户已经安装了旧版本的 QuickTime 6 Pro（或更早版本），那么静默安装 QuickTime 7 会破坏他们的 QuickTime Pro 注册，他们将不得不重新购买它。我们实际上在安装程序中检测到这种情况，并在安装过程中显示警告，就像 Apple 所做的那样。

是的，这是一种痛苦。在使用 QuickTime 6 年多之后，我真诚地建议您查看其他视频框架。我们目前正在评估 Ogg Theora。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T17:16:27.253

您可以在安装包中包含一个名为 Quicktime Lite 的程序。它带有与 Quicktime 相同的库，但要小得多。

这是链接： [下载 Quicktime Lite](http://www.codecguide.com/qt_lite.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T17:32:37.463

Quicktime Alternative 可以满足您的需求，但由于其他人在此处所述的原因，它是非法的。苹果可能不会让你做你想做的事。

# visual-studio - 如何让剪贴板环出现在VS2008工具箱中？

> ID：74604
> 
> 赞同：2
> 
> 时间：2008-09-16T17:06:42.113
> 
> 标签：visual-studio

似乎使剪贴板环出现在 VS2008 工具箱中是非常难以捉摸的。有谁知道如何打开这个？ `Ctrl`- `Shift`-`V`工作正常，但我想看看戒指上有什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T17:38:20.303

你应该试试[Ditto 。](http://ditto-cp.sourceforge.net/)它将您放入剪贴板的所有内容保存到 sqlite 数据库中。一个快捷方式会弹出它并显示剪报的历史记录。

好消息是您可以立即在此窗口中搜索所有剪报。

我将它设置为在 60 天内记住剪贴板中的所有内容，并养成复制所有可能有用的内容的习惯。这样我就可以快速找到我上周做的那个特定的 SQL 语句。只是不要搜索“选择”;-)

尝试几天，您会感到惊讶。还有[便携版](http://prdownloads.sourceforge.net/ditto-cp/Ditto_Portable_3_15_4_0.zip?download)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T17:07:09.380

如果将文本拖到工具箱中，它不会出现吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T17:11:01.853

它已在 Visual Studio 2005 中删除。我正在尝试为此查找来源。

# html - 如何使 HTML 表格的宽度与其包含的 div 标记相同？

> ID：74612
> 
> 赞同：27
> 
> 时间：2008-09-16T17:07:32.033
> 
> 标签：html, css

我在 div 中有一张桌子。我希望表格占据 div 标签的整个宽度。

在 CSS 中，我`width`将表格的 设置为`100%`. 不幸的是，当 div 上有一些`margin`内容时，表格最终会比它所在的 div 更宽。

我需要支持 IE6 和 IE7（因为这是一个内部应用程序），但如果可能的话，我显然想要一个完全跨浏览器的解决方案！

我正在使用以下 DOCTYPE ...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

**编辑**：不幸的是，当我动态生成 HTML 时，我无法对宽度进行硬编码，它包括将 div 递归地嵌套在彼此内部（每个 div 都有左边距，这会产生一个很好的“嵌套”效果）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-02-20T05:58:56.243

将以下 CSS 添加到您的`<table>`:

```
table-layout: fixed;
width: 100%; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T17:18:24.907

以下在 Firefox 和 IE7 中适用于我......不过是一个指导原则：如果您在元素上设置宽度，请不要在同一元素上设置边距或填充。*尤其是*在混合单位时尤其如此——例如，混合百分比和像素。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
  <head>
    <title>Test</title>
  </head>
  <body>
    <div style="width: 500px; background-color:#F33;">
      This is the outer div
      <div style="background-color: #FAA; padding: 10px; margin:10px;">
        This is the inner div
        <table cellpadding="0" cellspacing="0" style="width: 100%">
          <tr>
            <td style="border: 1px solid blue; background-color:#FEE;">Here is my td</td>
          </tr>
        </table>
      </div>
    </div>
  </body>
</html> 
```

有关示例，请参见[此处。](http://bl.ocks.org/1752582)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T20:17:52.527

基于百分比的宽度与指定宽度的第一个父元素相关。如果您的 div 没有指定宽度，则表格的宽度与它无关。您能否发布一个简化版本的标记来显示您的`DOM`树的外观？

从另一个角度来看，如果您的父 div 确实设置了宽度并且边距仍然影响您的表格，那么您可能处于怪癖模式。您已指定您的`DOCTYPE`，但请注意该`DOCTYPE`元素必须是文件中的第一行。处理 时要注意的其他事项`IE6`，默认情况下，如果您的内容比您的父级宽，则父级将被拉伸以适应，您可以通过添加`overflow: hidden`到您的`css`for 父级元素来停止此操作，但在此过程中您可能会掩盖一些子元素的内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-17T15:44:14.063

不太确定问题出在哪里 - 这在 IE6/7 和 FF3 中运行良好。设置 .container DIV 元素的宽度设置表格的宽度。向 .container div 添加边距不会影响表格。也许您的标记/ CSS 中还有其他东西会影响布局？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
    <head>
        <title>Boxes and Tables</title>
        <style type="text/css">

        div.container {
            background-color: yellow;
            border: 1px solid #000;
            width: 500px;
            margin: 5px auto;
        }

        table.contained {
            width: 100%;
            border-collapse: collapse;
        }

        table td {
            border: 2px solid #999;
        }

        </style>
    </head>

    <body>
        <div class="container">
            <table class="contained">
                <thead>
                    <tr><th>Column1</th><th>Column2</th><th>Column3</th></tr>
                </thead>
                <tbody>
                    <tr><td>Value</td><td>Value</td><td>Value</td></tr>
                    <tr><td>Value</td><td>Value</td><td>Value</td></tr>
                    <tr><td>Value</td><td>Value</td><td>Value</td></tr>
                    <tr><td>Value</td><td>Value</td><td>Value</td></tr>
                    <tr><td>Value</td><td>Value</td><td>Value</td></tr>
                </tbody>
            </table>
        </div>
    </body>
</html> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-16T14:53:25.323

我在这里找到了问题的核心。它与`border-collapse`. 我已经有一段时间了同样的问题。由于表格的边框通常很薄，因此问题对大多数人来说并不明显。如果你像 Nate 那样在一个 div 中放置一个宽度设置为 100% 的常规表格，你会没事的。

但是，如果你`border-collapse:collapse`在table上指定，table会跳出div。这对大多数人来说并不明显，因为它可能只突破一个像素，或者取决于它所在的上下文和用户代理，可能根本没有。

为了更清楚地了解发生了什么，试试这个： 将 Nate 的示例放在一个 html 文件中的 David Heggie 的示例旁边。

看起来两者都可以正常工作。但是现在，将 Nate 的内联 TD 样式更改为`border: 40px solid blue`. 将 David 的表格 td 样式更改为`border: 40px solid #999;`. 在这一点上，大卫的桌子在每边突破了 50% 的边界。奈特还在工作。现在也为 Nate 的桌子和他的休息时间添加一种`border-collapse:collapse`风格。

是它`border-collapse`造成的！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T17:26:59.020

在您自动生成可能有边距的代码的情况下，添加一个简单的、无样式的`<div>`元素来包裹您的表格可能会奏效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T17:57:17.950

I've always used `<table width="100%">`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T18:18:17.917

也许这篇关于[Internet Explorer 和 CSS 盒子模型的详尽](http://www.456bereastreet.com/archive/200612/internet_explorer_and_the_css_box_model/)文章会有所帮助？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T19:53:57.547

尝试这个：

```
div {
 padding: 0px;
}

table {
    width: 100%;
    margin: 0px;
} 
```

通过将 div 的填充设置为零，您将删除 div 的边框和它的内容之间的空间。通过将表格的宽度设置为 100% 并将其边距设置为零，您将删除表格边框与其容器之间的空间。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T17:39:19.180

这是 CSS 处理宽度属性的方式的一个大问题，也是微软最初以不同方式实现盒子模型的原因。微软输了，现在它是元素的宽度或边距/填充/边框。

[使用box-sizing 属性](http://www.css3.info/preview/box-sizing/)的 CSS3 中的情况可能会变得更好

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-17T15:48:06.270

顺便说一句，你有充分的理由不使用严格的文档类型吗？严格应该始终是默认值。过渡仅适用于遗留代码。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-10-11T16:36:16.030

以下代码适用于 IE6/8、Chrome、Firefox、Safari：

```
<style type="text/css">
    div.container 
    {
        width: 500px;
        padding: 10px;
        margin: 10px;
        border: 1px solid red;
    }
    table.contained 
    {
        width: 100%;
        border: 1px solid blue;
    }
</style>

<div class="container">
    <table class="contained">
    <tr>
        <td>Hello</td><td>World</td>
    </tr>
    </table>
</div> 
```

尝试复制并粘贴并在其上构建（只需将样式部分移动到标题或单独的 .css 文件），也许您使用将 CSS 内联（使用样式标记）的方式与问题有关，或者它是围绕 div 表块的其他一些 CSS？浮动也会带来麻烦。

PS 我设置了红色和蓝色边框，以查看区域扩展到的位置，以便进行更直观的检查。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-10-16T03:36:41.847

溢出：自动；如果你看到奇怪的东西，最外层的 div 可能会有所帮助——比如最外层的 div 比你想要的小，或者没有占据其中 div 的整个大小。

# delphi - Delphi 资源不足

> ID：74614
> 
> 赞同：2
> 
> 时间：2008-09-16T17:07:36.137
> 
> 标签：delphi, linker

我使用 Delphi 7 编译的每个项目（我***不***使用运行时包编译）都会给出链接器错误：“资源过多”。即使是空白应用程序也会出现此错误。

换句话说：德尔福死在我身上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T17:11:20.777

当您尝试从命令行构建它时会发生什么？（即\Program Files\Borland\Delphi7\Bin\dcc32.exe）

此外，您是否为此项目构建了任何自定义 .RES 文件？如果没有，请尝试删除 Delphi 为您创建的默认 .RES，并让它由项目重新创建。

您还可以通过更改一些琐碎的内容（例如版本号）来强制更新 .RES 文件，保存您的项目，然后再次将其更改回来。

抱歉，这些不是答案......但希望我们能通过一些探索找到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T17:12:28.463

确保您没有重复资源包含，例如在一个单元中有多个 {$R *.dfm} 行或项目中有多个 {$R *.res}。也可以包含在像 {$R MyProject.res} 这样的单元中的任何位置......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T17:14:01.283

很可能是损坏的 project.res 文件。尝试重命名旧的，看看是否成功重新创建？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:38:04.140

我在 Delphi 6 的几个项目中遇到了这个错误。

我找到了解决方法。PFB 详细信息：（如果修改了 .res 文件，请备份）

1.  将 {$R .res} 更改为 {$R *.res}
2.  编译项目
3.  删除 .res 文件并放置原始文件（已备份）
4.  将 {$ *.res} 更改为 {$R .res}
5.  点击编译/构建

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-28T06:22:05.370

当您从以前版本的 Delphi 迁移项目时，有时会发生这种情况。前面提到的解决方法是删除**.res**文件。

# c# - 如何检测类型是否是另一个泛型类型

> ID：74616
> 
> 赞同：32
> 
> 时间：2008-09-16T17:07:53.733
> 
> 标签：c#

例子：

```
public static void DoSomething<K,V>(IDictionary<K,V> items) {
   items.Keys.Each(key => {
      if (items[key] **is IEnumerable<?>**) { /* do something */ }
      else { /* do something else */ }
} 
```

这可以在不使用反射的情况下完成吗？C# 中的 IEnumerable 怎么说？我应该只使用 IEnumerable，因为 IEnumerable<> 实现了 IEnumerable？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2009-07-02T15:25:56.693

非常感谢这篇文章。我想提供一个对我来说效果更好的 Konrad Rudolph 解决方案版本。我对该版本有一些小问题，特别是在测试 Type 是否为可空值类型时：

```
public static bool IsAssignableToGenericType(Type givenType, Type genericType)
{
    var interfaceTypes = givenType.GetInterfaces();

    foreach (var it in interfaceTypes)
    {
        if (it.IsGenericType && it.GetGenericTypeDefinition() == genericType)
            return true;
    }

    if (givenType.IsGenericType && givenType.GetGenericTypeDefinition() == genericType)
        return true;

    Type baseType = givenType.BaseType;
    if (baseType == null) return false;

    return IsAssignableToGenericType(baseType, genericType);
} 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2008-09-16T18:33:28.003

[先前接受的答案](https://stackoverflow.com/a/74648/1968)很好，但它是错误的。值得庆幸的是，这个错误很小。如果你真的想知道接口的通用版本，检查`IEnumerable`是不够的；有很多类只实现非泛型接口。我会在一分钟内给出答案。不过，首先，我想指出接受的答案过于复杂，因为在给定的情况下，以下代码将实现相同的效果：

```
if (items[key] is IEnumerable) 
```

这甚至更多，因为它分别适用于每个项目（而不是在它们的公共子类上`V`）。

现在，寻求正确的解决方案。这有点复杂，因为我们必须采用泛型类型`IEnumerable`1`（即`IEnumerable<>`具有一个类型参数的类型）并注入正确的泛型参数：

```
static bool IsGenericEnumerable(Type t) {
    var genArgs = t.GetGenericArguments();
    if (genArgs.Length == 1 &&
            typeof(IEnumerable<>).MakeGenericType(genArgs).IsAssignableFrom(t))
        return true;
    else
        return t.BaseType != null && IsGenericEnumerable(t.BaseType);
} 
```

您可以轻松测试此代码的正确性：

```
var xs = new List<string>();
var ys = new System.Collections.ArrayList();
Console.WriteLine(IsGenericEnumerable(xs.GetType()));
Console.WriteLine(IsGenericEnumerable(ys.GetType())); 
```

产量：

```
True
False 
```

不要过分担心这会使用反射。虽然这确实增加了运行时开销，但`is`运算符的使用也是如此。

当然，上面的代码受到了极大的限制，可以扩展为更普遍适用的方法，`IsAssignableToGenericType`. 下面的实现有点不正确¹我将把它留在这里*仅用于历史目的*。**不要使用它**。相反，[詹姆斯在他的回答中提供了一个出色、正确的实现。](https://stackoverflow.com/a/1075059/1968)

```
public static bool IsAssignableToGenericType(Type givenType, Type genericType) {
    var interfaceTypes = givenType.GetInterfaces();

    foreach (var it in interfaceTypes)
        if (it.IsGenericType)
            if (it.GetGenericTypeDefinition() == genericType) return true;

    Type baseType = givenType.BaseType;
    if (baseType == null) return false;

    return baseType.IsGenericType &&
        baseType.GetGenericTypeDefinition() == genericType ||
        IsAssignableToGenericType(baseType, genericType);
} 
```

¹`genericType`与 相同时失败`givenType`；出于同样的原因，它对于可空类型失败，即

```
IsAssignableToGenericType(typeof(List<int>), typeof(List<>)) == false
IsAssignableToGenericType(typeof(int?), typeof(Nullable<>)) == false 
```

我[用一套全面的测试用例创建了一个要点](https://gist.github.com/4174727)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-16T18:43:28.743

关于泛型类型和使用 IsAssignableFrom() 的警告...

假设您有以下内容：

```
public class MyListBase<T> : IEnumerable<T> where T : ItemBase
{
}

public class MyItem : ItemBase
{
}

public class MyDerivedList : MyListBase<MyItem>
{
} 
```

在基本列表类型或派生列表类型上调用 IsAssignableFrom 将返回 false，但显然`MyDerivedList`继承了`MyListBase<T>`. （给 Jeff 的一个简短说明，泛型绝对必须*包含*在代码块或波浪号中才能获得`<T>`. 下面的文章可以更好地解释这一点。 [http://mikehadlow.blogspot.com/2006/08/reflecting-generics.html](http://mikehadlow.blogspot.com/2006/08/reflecting-generics.html)`MyListBase<MyItem>``MyListBase<T>`

相反，请尝试以下递归函数：

```
 public static bool IsDerivedFromGenericType(Type givenType, Type genericType)
    {
        Type baseType = givenType.BaseType;
        if (baseType == null) return false;
        if (baseType.IsGenericType)
        {
            if (baseType.GetGenericTypeDefinition() == genericType) return true;
        }
        return IsDerivedFromGenericType(baseType, genericType);
    } 
```

/编辑：康拉德的新帖子将通用递归和接口都考虑在内。非常好的工作。:)

/EDIT2：如果检查 genericType 是否为接口，则可以实现性能优势。检查可以是当前接口代码周围的 if 块，但如果您对使用 .NET 3.5 感兴趣，我的一个朋友提供以下内容：

```
 public static bool IsAssignableToGenericType(Type givenType, Type genericType)
    {
        var interfaces = givenType.GetInterfaces().Where(it => it.IsGenericType).Select(it => it.GetGenericTypeDefinition());
        var foundInterface = interfaces.FirstOrDefault(it => it == genericType);
        if (foundInterface != null) return true;

        Type baseType = givenType.BaseType;
        if (baseType == null) return false;

        return baseType.IsGenericType ?
            baseType.GetGenericTypeDefinition() == genericType :
            IsAssignableToGenericType(baseType, genericType);
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-16T17:11:21.820

```
if (typeof(IEnumerable).IsAssignableFrom(typeof(V))) { 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-12-30T20:56:17.537

感谢您提供的重要信息。为方便起见，我将其重构为扩展方法，并将其简化为单个语句。

```
public static bool IsAssignableToGenericType(this Type givenType, Type genericType)
{
  return givenType.GetInterfaces().Any(t => t.IsGenericType && t.GetGenericTypeDefinition() == genericType) ||
         givenType.BaseType != null && (givenType.BaseType.IsGenericType && givenType.BaseType.GetGenericTypeDefinition() == genericType ||
                                        givenType.BaseType.IsAssignableToGenericType(genericType));
} 
```

现在可以很容易地调用它：

sometype.IsAssignableToGenericType(typeof(MyGenericType<>))

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T18:18:12.270

我会使用重载：

```
public static void DoSomething<K,V>(IDictionary<K,V> items)
  where V : IEnumerable
{
   items.Keys.Each(key => { /* do something */ });
}

public static void DoSomething<K,V>(IDictionary<K,V> items)
{
   items.Keys.Each(key => { /* do something else */ });
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T17:23:35.677

我不确定我明白你在这里的意思。您想知道对象是否属于**任何泛型类型**，还是想测试它是否是**特定的泛型类型**？或者你只是想知道是否是可枚举的？

我认为第一个是不可能的。第二种肯定是可能的，只要把它当作任何其他类型。对于第三个，只需按照您的建议对 IEnumerable 进行测试。

此外，您不能对类型使用“is”运算符。

```
// Not allowed
if (string is Object)
  Foo();
// You have to use 
if (typeof(object).IsAssignableFrom(typeof(string))
  Foo(); 
```

有关更多详细信息，请参阅[有关类型](https://stackoverflow.com/questions/72360/how-to-use-the-is-operator-in-systemtype-variables)的此问题。也许它会帮助你。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-24T07:44:19.303

我曾经认为这种情况可能可以通过类似于@Thomas Danecker 的解决方案的方式[解决](https://stackoverflow.com/questions/74616/how-to-detect-if-type-is-another-generic-type#75341)，但添加了另一个模板参数：

```
public static void DoSomething<K, V, U>(IDictionary<K,V> items)
    where V : IEnumerable<U> { /* do something */ }
public static void DoSomething<K, V>(IDictionary<K,V> items)
                             { /* do something else */ } 
```

但我现在注意到，除非我明确指定第一个方法的模板参数，否则它不起作用。这显然不是为字典中的每个项目定制的，但它可能是一种穷人的解决方案。

如果有人能指出我在这里可能做的任何不正确的事情，我将非常感激。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-16T18:10:47.467

您想查看[Type.IsInstanceOfType](http://msdn.microsoft.com/en-us/library/system.type.isinstanceoftype.aspx)方法

# java - Date.getTime() 不包括时间？

> ID：74620
> 
> 赞同：7
> 
> 时间：2008-09-16T17:08:16.943
> 
> 标签：java, date, timestamp, gettime

无法理解为什么会发生以下情况：

```
String date = "06-04-2007 07:05";
SimpleDateFormat fmt = new SimpleDateFormat("MM-dd-yyyy HH:mm");
Date myDate = fmt.parse(date); 

System.out.println(myDate);  //Mon Jun 04 07:05:00 EDT 2007
long timestamp = myDate.getTime();
System.out.println(timestamp); //1180955100000 -- where are the milliseconds?

// on the other hand...

myDate = new Date();
System.out.println(myDate);  //Tue Sep 16 13:02:44 EDT 2008
timestamp = myDate.getTime();
System.out.println(timestamp); //1221584564703 -- why, oh, why? 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-16T17:11:48.527

几毫秒？您在第一个示例中仅提供分钟信息，而您的第二个示例以毫秒为单位从系统中获取当前日期，您在寻找什么？

```
String date = "06-04-2007 07:05:00.999";
SimpleDateFormat fmt = new SimpleDateFormat("MM-dd-yyyy HH:mm:ss.S");
Date myDate = fmt.parse(date);

System.out.println(myDate); 
long timestamp = myDate.getTime();
System.out.println(timestamp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T17:14:18.833

因为您指定的简单日期格式会丢弃毫秒。因此生成的 Date 对象没有该信息。所以当你打印出来的时候，它全是 0。

另一方面，当您为 Date 对象分配一个以毫秒为单位的值时（在本例中，使用 new Date()），它确实保留了毫秒。因此，当您将它们打印出来时，它也包含毫秒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T01:34:36.603

我建议不要使用 Sun JDK 时间/日期库（还有很多不足之处），我建议您查看[http://joda-time.sourceforge.net](http://joda-time.sourceforge.net)。

这是一个非常成熟和活跃的 sourceforge 项目，拥有非常优雅的 API。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-02T22:37:59.290

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T17:14:21.970

当您解析日期时，它仅使用您提供的信息。在这种情况下，它只知道 MM-dd-yyyy HH:mm。

创建一个新的日期对象返回当前系统日期/时间（自纪元以来的毫秒数）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T17:15:22.357

Date 对象的 toString() 不会显示毫秒...但它们就在那里

所以 new Date() 是一个毫秒分辨率的对象，可以看出：

```
 System.out.printf( "ms = %d\n", myDate.getTime() % 1000 ) ; 
```

但是，当您使用 SimpleDateFormat 构造日期时，不会传递毫秒数

我在这里错过了这个问题吗？

[编辑] 哈哈哈……太慢了；）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T18:01:45.460

Date.getTime 返回自 1970 年 1 月 1 日 00:00:00 GMT 以来的毫秒数，由 Date 对象表示。所以 "06-04-2007 07:05" - "01-01-1970 00:00" 等于 1180955340000 毫秒。由于您的问题唯一关心的是日期的时间部分，因此粗略的计算方法是 07:05 和 00:00 之间的毫秒数，即 25500000。这可以被 1000 整除，因为这两个时间都没有有任何毫秒。

在第二个日期中，它使用执行该代码行的当前时间。这将使用当前秒后的当前毫秒数在计算中。因此，Date.getTime 很可能会返回一个不能被 1000 整除的数字。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T19:27:49.933

该`getTime()`方法`Date`返回自 1970 年 1 月 1 日以来的毫秒数（此日期称为“纪元”，因为所有计算机日期都基于此日期）。它**不**应该用于显示日期的人类可读版本。

请改用该`SimpleDateFormat.format()`方法。这是您的部分代码的修订版本，我认为可以解决您的问题：

```
String date = "06-04-2007 07:05:23:123";
SimpleDateFormat fmt = new SimpleDateFormat("MM-dd-yyyy HH:mm:ss:S");
Date myDate = fmt.parse(date); 

System.out.println(myDate);  //Mon Jun 04 07:05:23 EDT 2007
String formattedDate = fmt.format(myDate);
System.out.println(formattedDate); //06-04-2007 07:05:23:123 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-15T03:24:06.550

```
import java.util.*;

public class Time {
    public static void main(String[] args) {
        Long l = 0L;
        Calendar c = Calendar.getInstance();
        //milli sec part of current time
        l = c.getTimeInMillis() % 1000;  
        //current time without millisec
        StringBuffer sb = new StringBuffer(c.getTime().toString());
        //millisec in string
        String s = ":" + l.toString();
        //insert at right place
        sb.insert(19, s);
        //ENJOY
        System.out.println(sb);
    }
} 
```

# vim - 强迫自己掌握 vi 的最佳方法是什么？

> ID：74625
> 
> 赞同：208
> 
> 时间：2008-09-16T17:08:38.957
> 
> 标签：vim, editor, text-editor, vi

不久前，我阅读[了 viemu 的创建者的一篇文章](http://www.viemu.com/a-why-vi-vim.html)，澄清了很多关于 vi 的误解，并解释了为什么它是一个好主意（以及为什么它在过去 30 年中一直非常流行）。同一个人也[有一套很棒的图形备忘单](http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html)，一次教一些基础知识。

我相信。

事实上，在过去的 2 年里，我一直深信不疑。但是我仍然没有强迫自己学习 vi 作为我的主要编辑器，学习曲线太高了。当我开始工作时，可接受但即时的生产力（使用我当前的编辑器）到目前为止已经赢得了更高的生产力（使用 vi）。

有没有人有任何好的提示来帮助克服学习曲线？它可以是直截了当的提示、其他教程或文章，等等。

编辑：请注意，我知道 vi 的[vim/gVim](http://www.vim.org/)、[Cream](http://cream.sourceforge.net/)和[MacVim](http://code.google.com/p/macvim/)（等）变体。我保留了关于 vi 的问题，以提及整个 vi 家族。感谢所有伟大的答案。

### 更新（2009 年 4 月）

自去年 12 月以来，我在日常职业生涯中一直在使用 Vim（更准确地说是 MacVim）。我不会回去:-)

祝所有掌握 Vim 的人好运。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2008-09-16T17:13:36.043

首先，你可能想学习 Vim；它具有非常出色的功能集以及 ​​vi 的所有功能。

也就是说，学习需要纪律。如果你有一份工作并且负担不起生产力的损失（不会被解雇），我建议你参加一个周末项目，其唯一目的是学习编辑器。在你工作时保持它的文档是开放的，并有足够的纪律性，不要退缩。当你学得更多、变得更有效率并开始依赖肌肉记忆时，坚持下去就不会那么难了。

我使用 Vim 已经很长时间了，以至于我什至没有想过要按什么键来搜索、导航或保存。我的手永远不会离开键盘。使用 Vim 是我在编程生涯中做出的最佳选择之一。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2008-09-16T17:13:02.660

我要做的第一件事是在你的方向键和 ins/home/end/pgup/down 键上放一张纸或一本书。Vi 中不需要这些。

接下来，每当你被告知要按逃生时，我都会习惯按 ctrl+[。它速度更快，您无需将手从键盘上移开。

然后我会看我的截屏视频：

[http://www.youtube.com/watch?v=FcpQ7koECgk](http://www.youtube.com/watch?v=FcpQ7koECgk)

[http://www.youtube.com/watch?v=c6WCm6z5msk](http://www.youtube.com/watch?v=c6WCm6z5msk)

[http://www.youtube.com/watch?v=BPDoI7gflxM](http://www.youtube.com/watch?v=BPDoI7gflxM)

[http://www.youtube.com/watch?v=J1_CfIb-3X4](http://www.youtube.com/watch?v=J1_CfIb-3X4)

然后，只是练习练习练习。

*编辑* 避免使用箭头键的原因是它们会减慢您的速度。Vim 最大的好处之一是它为您提供的速度。箭头键还阻止您真正拥抱模态性质，掌握时非常强大。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2009-05-07T13:06:52.807

**步骤0：**学会触摸打字。说真的 - 如果你的手指不知道键在哪里，那么 vim 会很痛苦。即使你拒绝 vim，触摸打字也会通过让大脑无摩擦地监控链接来[改进你的编程](https://stackoverflow.com/questions/31757/should-programmers-be-excellent-typists)（问[Steve Yegge ）。](http://steve-yegge.blogspot.com/2008/09/programmings-dirtiest-little-secret.html)有[很多](https://stackoverflow.com/questions/410880/how-do-i-improve-my-typing-skills)[软件](https://stackoverflow.com/questions/10475/touch-typing-software-recommendations)可以帮助您改善打字。

**第 1 步：**使用**vimtutor**帮助您入门。它在 gvim 中（我认为是在帮助菜单下），或者您可以在命令行中键入“vimtutor”。这将花费您 30-45 分钟的时间，然后您的手指就会了解 vi/vim 的基础知识，并且您应该能够编辑文件而不必将键盘扔出窗口。

**第 2 步：**到处使用 vim。有关在命令行、Web 浏览器、编写电子邮件、在 IDE 中使用 vim 和 vi 键绑定的提示和链接，请参阅[此问题](https://stackoverflow.com/questions/826208/making-vim-ubiquitous) ……您需要使用 vim 将键绑定嵌入到肌肉记忆中。

**第 3 步：**了解有关 vim 的更多信息。你只会用 vimtutor 划伤表面。你可以[观看这个视频](http://video.google.com/videoplay?docid=2538831956647446078)或阅读[这篇文章](http://www.moolenaar.net/habits.html)（都关于“有效文本编辑的七个习惯”。你可以 [阅读](https://stackoverflow.com/questions/164847/what-is-in-your-vimrc)[StackOverflow](https://stackoverflow.com/questions/95072/what-are-your-favorite-vim-tricks) 上 的 [提示](https://stackoverflow.com/questions/20735/useful-vim-features) 和 [技巧](https://stackoverflow.com/questions/726894/vim-tricks-your-mom-never-told-you-about-dark-corners)。你可以浏览[vimtips](http://vim.wikia.com/wiki/Main_Page)。我的建议是经常学习一点 - 有这么多在那里坚持一口大小的块将是使知识坚持的最佳方式。

**第 4 步：**利润 :)

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2008-09-16T17:57:06.670

这些年来，我一直是 vim 的时断时续的用户（偶尔做系统管理员工作）。我最近才开始花更多的时间在里面做我的编程工作。我也建议从 gvim 开始。它可以与大多数操作系统环境很好地集成，并且（甚至更好），您可以在需要时回退到鼠标:)。

要开始使用 vim，**请运行 vimtutor**（与 gVim 捆绑）一次或两次（需要一个小时左右）。我不能夸大它对我的帮助！尤其是关于在文档中移动的不同方式的第一部分，以及如何使用运动命令记录编辑动作等。之后，事情会更加清晰。

然后，开始用它做快速的、小的编辑（记事本替换的东西），直到你足够舒服地在快速剪辑上进行有用的编辑。然后试着在里面做你的日常工作。您很快就会发现自己渴望在其他编辑器中使用“重复上次操作”命令！

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2008-09-16T17:49:05.553

您要求提供一些好的技巧来帮助克服 vi 文本编辑器的学习曲线。以前的许多答案都建议您不要使用其他编辑器。我认为这是一个很好的建议。从更加图形化的编辑器切换到 vi 需要改变思维方式。它需要根据命令进行思考，而不是视觉变化。

多年来，我只使用 vi 并相信提高工作效率的唯一方法就是记住您经常使用的命令。我这样做的方法是列出最常见的键盘命令。我按功能对这些命令进行分组和颜色编码，即*移动光标、编辑、搜索*等。我小心翼翼地只包括我不知道的最常用的命令。这个想法是创建一个快速参考，同时也有助于记忆——而不是替换可用的帮助屏幕。然后我打印了这份清单，并把它贴在显示器后面的墙上，这样我就可以很容易地看到它。（您提到的图形备忘单可能对某些人更有效，但可能是比记忆工具更好的参考来源。）

**这是关键。** 当我对其中一个命令感到满意时，我用铅笔画了一条线。如果我需要它，我仍然可以看到它，但对我来说，我已经掌握了这个命令。这给了我信心和动力，因为我可以看到定期的进步。一旦我将它们中的大部分划掉，我就删除了它们并添加了一些更不常用的命令。我继续这个过程，直到我对 vi 的命令感到满意为止。当我意识到我已经很长时间没有划掉任何命令甚至查看列表时，我就知道我已经到了那个地步。

几年前，我需要在一个 UNIX 平台上工作，其中 vi 是唯一可用的编辑器。我买了一本关于vi的袖珍参考书，但几乎没有用过。就像我第一次使用 vi 时一样，我最终制作了列表并将它们张贴在墙上。到第一周结束时，我已经很舒服了，尽管我使用 vi 已经五年了。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2008-09-16T17:19:24.157

你应该从**[vim](http://www.vim.org/)** (Vi IMproved) 开始，尤其是它的 GUI - **gVim**。GUI 有菜单，在 Windows 上您可以使用复制、剪切和粘贴快捷方式，因此您可以立即替换记事本。而且由于菜单显示快捷方式（vim 命令），您可以学到很多东西。

您应该从一开始就做的另一件事是根据您的需要配置 vi。例如，您可以将 vim 转换为[Python IDE](http://sontek.net/turning-vim-into-a-modern-python-ide)。通过这样做，您将没有理由使用其他编辑器，因为 vi 将为您提供所需的一切。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2008-09-16T17:19:49.413

对我来说，VI 是一个很好的紧急编辑器，但如果有其他可用的替代品，我不想使用它。我意识到这并不适合所有人，我并不是说这很可怕或任何东西，我只是个人更喜欢可发现的 UI。

但是，如果您在 Linux 中做任何重要的事情，您真的必须了解 VI！

所以只要学习基础知识： i=insert mode esc=leave insert mode :wq=save and quit :q!=don't save and quit x=not in insert mode 时，删除字符。/=搜索

这将使您度过任何编辑紧急情况。这几个命令（当然还有导航）没有什么是你做不到的。其余的您可以根据需要“附加”。

尽管保留参考资料或书籍——当你需要使用 VI 时，你可能无法浏览网页——但手册页可能有些用处。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2008-09-16T18:06:49.190

每次您执行复杂的编辑任务时，都会想知道是否有更有效的方法来完成它。大多数情况下，当您可以用简单的术语来描述它时（例如“交换文本段落”或“删除注释行中 X 字符之后的所有内容”），您只需在 vim 中敲几下键就可以完成。

有一些非常有用的关键功能，您将一直使用。我最喜欢的是：

*   块选择 (Ctrl-V)
*   微距录制 (q)
*   虚拟编辑 (:set ve=all)
*   常用表达
*   连接到外部 Unix 程序
*   键映射
*   自动补全（Cp、Cx Cp、Cx Cf）
*   操作+动作组合（这个厉害了）

询问其他程序员他们认为哪些功能最有用，并采用更适合您大脑的功能。窃取别人的想法`.vimrc`（[这是我的](https://github.com/rbonvall/dotvim/blob/master/vimrc.vim)）

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2008-09-16T18:10:40.990

强迫自己不要。掌握爱情的途径是。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2008-09-16T17:09:30.373

删除所有其他文本编辑器应用程序。

然后你将不得不学习它。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2008-09-16T17:11:44.800

*强迫*自己的最简单方法可能只是从您的机器中删除所有其他编辑器。摆脱诱惑:)

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2008-09-16T18:07:53.260

不久前，我写了一篇[使用 Vim 进行高效编辑](http://jmcpherson.org/editing.html)的指南。您可能会发现它很有帮助。

我会退后一步，问自己“我为什么要学习这个编辑器？是什么让我认为它会比我目前的文本编辑器更快或更好？” 然后学习那些使 Vi(m) 对你来说不可或缺的特性。

例如，Vim 的 CTags 集成对我来说是完全不可缺少的。我使用一个非常非常大的代码库，并且能够在一次击键中跳转到函数或类定义（无论它在哪个文件中）是一个绝对杀手级的功能，没有它我很难工作。

使用您的 .vimrc 文件来制作自动执行常见任务的宏。

您的自动驾驶仪编辑器选择器将选择能够以最快的速度完成工作并且花费最少的精力的编辑器。一点准备工作将确保编辑器是 Vim。:-)

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2010-08-12T01:56:52.790

编辑：我已经[在在线间隔重复网站 flashcarddb.com 上创建了一个抽认卡集](http://flashcarddb.com/cardset/135218-vim-flashcards)，以防你感兴趣......

1.  使用间隔重复的闪存卡程序（例如[mnemosyne](http://www.mnemosyne-proj.org/)、[supermemo](http://www.supermemo.com/)或[anki](http://ichi2.net/anki/)）将学习和保留新命令融入您的日常生活。仅使用 vim 作为您的日常编辑器是不够的。要掌握它，您必须将这些代码存储在您的脑海中，等待它们成为手头任务的理想解决方案的时间。
2.  维护一个带有自定义的 .vimrc
3.  编写或编辑 vim 插件

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2008-09-16T18:45:42.733

有两件事可以极大地提高您的 vi 技能：

1.  练练练练
2.  网络黑客

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2008-09-17T01:41:08.663

我的建议：从小处着手。只需从记住一小组最有用的命令开始。当我开始 vi 时，这些是我的前 10 名：

*   (Esc) 返回命令模式（最重要的！）
*   a 在光标后添加文本
*   A 在当前行的末尾添加文本
*   x 删除 1 个字符
*   dd 删除 1 行
*   R替换文本（覆盖）
*   你撤消
*   ：问！(Enter) 退出而不保存
*   :w (回车) 保存
*   ZZ保存退出

仅使用这些命令即可完成许多基本编辑。一旦你舒服了，其余的看起来就不太难了。

顺便说一句，我想补充一点，我曾经依赖 vi 作为我的主要文本编辑器，但现在只有在我必须这样做的时候。就我而言，当我使用 Emacs 或 Visual Studio 之类的工具时，工作效率会更高（请注意：“就我而言”）。尝试不止一种工具，并选择最能帮助您提高生产力的工具。祝你好运！

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2009-01-18T23:13:34.160

这听起来很傻，但是玩[roguelike](http://en.wikipedia.org/wiki/Roguelike)游戏（例如[Nethack](http://www.nethack.org/)或[Angband](http://www.thangorodrim.net/)）是一种有趣的方式来适应使用`h`/ `j`/ `k`/`l`键进行光标导航。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2008-09-16T17:13:13.890

写下您在工作中使用当前编辑器时使用的所有快捷方式和功能。然后在星期六早上坐下来，使用谷歌和堆栈溢出来了解如何在 vi 中执行每一项操作。如果您为此使用一张（或多张）纸，这可能是最好的。

现在禁用/删除工作中的其他编辑器，这样您将花费更长的时间来查找和重新安装它们，而不是查看您的比较表并在 vi 中进行 - 即您别无选择。

最后，将旧编辑器的交叉快捷方式列表发布到博客上的新编辑器。

祝你好运！

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2008-09-16T17:19:38.663

不使用**X11**吗？

```
$ sudu rm /usr/local/bin/emacs 
```

将您的登录外壳更改为**vi**？

首先，强迫自己使用**ed**，那么**vi**会显得很奢侈吗？

**在bash**中使用**vi**键绑定？

 **一直开始使用**vi**？

在我看来，学习编辑与学习语言并没有太大的不同。沉浸效果最好。

我使用**vi**进行非常快速的编辑，或者当我由于某种原因不能使用**X11时，但我住在****emacs**中。真正强大的编辑器值得花时间学习。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2008-09-16T17:17:34.380

我的建议是想出一些简单的程序并编写它们，从头到尾，使用 VI。

奇怪的是，一开始你会对学习曲线感到沮丧，以至于无法强迫自己在工作或任何时间敏感的环境中使用它们。

我以前这样做是为了熟悉环境/编辑器，而且效果很好。

如果你在写东西时遇到问题，我建议你重做你在学校做过的项目（或者你以前做过的任何其他事情）。这种方法还有一个额外的好处，就是让你看到你已经成为了多少更好的开发人员。:)

编辑：忘了提及您应该完全从控制台执行此操作，以避免使用鼠标的任何诱惑！

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2008-09-16T17:47:13.607

gVIM 有一个非常好的教程（开始菜单组中的链接）。

我发现通过这些工作有助于克服最初的学习障碍。然后将我的 Visual Studio 切换到 ViEMU 帮助我磨练了我的 VI 技能。

此外， http: [//vimcasts.org/](http://vimcasts.org/)上的截屏视频也很棒！

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2008-09-16T18:05:39.100

我记得当我第一次开始学习 emacs 时，我已经对 Vim 非常熟悉了，我和你在同一条或相似的船上，我知道如何在另一个编辑器中完成很多工作，所以当我开始使用 emacs，它总是非常缓慢。

但是，我认为您要做的只是吸收一点痛苦，并且始终，始终，始终确保您查找文档以执行您*知道*可以在以前的编辑器中执行的操作，例如如移动到行尾或选择文本区域。

如果您有当地的 vi 专家可以提出问题，或者如果您像我们公司一样推广结对编程，这也会有所帮助。这样，当您尝试做一些应该很容易的事情时，您可以简单地询问某人，他们会告诉您如何操作，如果您经常使用编辑器几个星期，您不必问更多然后在它成为第二天性之前几次。

如果您没有任何本地资源，网上有很多书籍/教程/参考资料应该能够回答您的大部分问题。

归根结底，学习 Vi 就像学习其他技能一样，没有灵丹妙药，你必须接受这样的事实，在一段时间内，你在 Vi 方面的工作效率会低于你现在的编辑器。只是不断告诉自己，“其他人已经能够学习 Vi，而且我至少和他们一样聪明”（这就是我告诉自己的 :)）

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2009-05-13T14:06:04.087

我使用的主要原因`vi`是`ssh`（或 Windows 上的 Putty）：当您远程登录到 Unix 服务器时，`vi`它始终可用。当光标键和退格/删除都没有映射时，它可以与 VT100 一起使用。

还有一本像[VI Editor Pocket Reference](https://rads.stackoverflow.com/amzn/click/com/1565924975)这样的书也有很大帮助。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2008-09-16T17:24:36.750

每次开始编辑时，您都可以使用原始的 Happy Hacker 键盘（无箭头键）并将您的（无线）鼠标放在遥不可及的地方。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2008-09-16T17:26:57.180

写出一大串命令/快捷方式很容易，但如果没有练习就很难记住它们。

一次专注于一个新命令。当它变得自动时，比如说在使用一两个星期后，在你的曲目中添加另一个。

你将在短期内花费很长的时间来完成某些事情——这些显然是学习新捷径的机会。

根据我的经验，当我尽量不要一次承担太多时，会更容易。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2008-09-16T17:28:45.150

我的第一个建议：学会快速打字，而不需要看键盘。

如果您不能触摸类型并且总是在寻找冒号或 hjkl 或 :%s/foo/bar，请忘记它。打字*可能*比使用鼠标更快，但如果你不是这种情况，vi 将无法工作。

但是结合良好的打字技巧，ssh 和[screen](http://en.wikipedia.org/wiki/GNU_Screen)和 vi 会很自然。

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2008-09-16T17:43:37.873

面对这样一个事实，即它会立即对性能产生影响。当学习一个新工具时，你需要能够做一些你知道如何用其他工具做的事情，这样问题就不是你的问题了。使用新工具一段时间后，它会消失，您将只关注潜在问题。

对于 vim 之类的东西（正如其他人所说，vim 远远优于 vi），定期重新阅读和浏览文档很重要。没有它，界面是完全无法发现的。每次阅读新内容时，您都会看到一个功能并说：“啊哈，这将解决我上周试图解决的这个问题”，并将其归档在您的大脑中。与您遇到的实际问题相关的解决方案比随机快捷方式更容易记住。

最后，您可以将 vim 与它的一小部分功能一起使用，所以不要被所有的花里胡哨所淹没。想想 Word 中的所有功能，99% 的人使用它们吗？

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2008-09-16T18:02:34.927

`ESC gg=G`重新缩进代码`:retab`并将制表符转换为空格或将空格转换为制表符是我迷上 vim 的原因。所以实际上你不需要被迫使用它，你只需要学习它什么时候可以帮助你提高速度。

通过`vimtutor`。

开始使用 vim 进行简单的编辑，例如配置文件或 html。根据需要学习命令。

在 google 上搜索一个好的 .vimrc ，该 .vimrc 由使用类似于您的工具链的人使用。打开语法高亮。找到一个漂亮的配色方案。

学习宏，因为 Vim 最适合自动化任务和片段插入，例如将几个单词格式化为复杂的 XML 标记或将 CSV 转换为 HTML 表格。

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2008-09-16T18:36:24.550

您可能想从 Cream 开始。Cream 将自己描述为 vim 的“现代配置”。基本上，它是 vim 的一个特殊版本，在所有实际用途中，它的外观和感觉都与任何其他文本编辑器一样。但是启用“专家模式”，您将拥有 vim 的所有功能和行为。

因此，您可以开始使用 Cream 作为常规文本编辑器，然后尝试“专家模式”，直到您足够舒适以完全切换到 vim。

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2008-09-16T18:37:39.367

安装`gVim`在您使用的所有平台上。

然后通过 vimtutor（`:help vimtutor`或`vimtutor`在命令行）运行。

观看以下讲座并遵循其建议：[有效文本编辑 2.0 的 7 个习惯](http://video.google.com/videoplay?docid=2538831956647446078)

我说您肯定想开始使用它进行所有编辑。如果您担心会降低工作效率，那么请花一个周末来练习它（我曾经这样做是为了从 qwerty 切换到 dvorak，并且在周一之前我的工作效率已经足够高，并且之后设法坚持下去）。

这是值得的，你不会回头！

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2008-09-17T01:06:44.720

就我个人而言，我要做的是确保我可以在多个应用程序中使用 Vim 键绑定（或者至少，足够接近）。每次更改编辑器时都必须完全切换编辑文本的方式，这使得 Vim 编辑风格难以用于肌肉记忆。

就我而言，Viemu + vimperator 做到了。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2009-01-18T22:25:35.987

使用便利贴方法:-)

使用 gvim 时，请允许自己使用菜单。阅读有关 vim 的书籍/教程，以便了解基础知识。（插入和命令模式）

选择一些您认为需要的非常酷的功能，并将它们写在便利贴上，然后将它们贴在显示器的下部。

一个好的开始可能是 i, a, o, gg, G, :10 ,/something

还有一些像 yy, dd, p 这样的剪切和粘贴

只需使用 v, V（视觉模式）+ 剪切和粘贴即可

然后，当您了解它们时，将便利贴替换为具有更酷功能的新便利贴，然后重复直到您满意为止。

/约翰

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2009-05-07T13:15:05.890

当我更年轻（11 岁）时，我的家人搬到了德国几年。我能够通过沉浸式学习语言——我别无选择，只能说这种语言（尽管如果我处境艰难，我可以找到会说英语的人）。

我的建议是你也这样做——除非你处于绝对绝望的境地（例如，“好吧，我刚刚删除了 /etc/passwd 并且需要恢复 root”），有意识地决定用 vi 尽力而为。如果您愿意，实际上学习基础知识并不需要那么长时间。

正如其他人所建议的那样，

```
vim-tutor 
```

可以是一个非常好的起点，[就像这张图片一样](http://www.ekvin.com/dr/images/1/14/Vi_cheatsheet.png "这个图片")。

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2009-12-01T18:39:49.383

如何强迫自己？我的建议是在一个工作环境中，你必须通过从 Windows telnet/putty 来维护 10 个 unix 盒子。您很快就会意识到，在 *nix 的多个变体上有效地编辑文本的唯一方法是使用我所知道的几乎所有发行版都附带的标准编辑器。此外，当 X11 没有在全新安装时启动时，vi 是你唯一的朋友 :)

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2011-10-14T14:41:48.560

十多年前，我在攻读硕士学位时学习了 vim/vi。当时我唯一可以使用的机器是 Sun Sparc 站（我认为是 Sparc 20）。vi 是它上面唯一的东西。因此，您可以“强制”自己做的一件事就是卸载您拥有的任何其他编辑器！

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2008-09-16T17:12:39.413

删除 notepad.exe 并创建一个名为 notepad 的 vim 快捷方式 :)

或者通过 ssh 或在没有 GUI 的机器上进行所有编码；）

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2008-09-16T17:12:42.427

我尝试保留一个小备忘单或常用 vi 命令的便签。我对我使用的 IDE 做同样的事情。我发现如果我在我的显示器上贴上键盘快捷键或命令的便签，它可以帮助我学习它们。一旦我使用了足够多的快捷方式并认为我记得很清楚，我将删除便笺。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2008-09-16T17:15:20.890

嗯，这更像是一个生理学问题而不是一个编程问题，但是我能够做我真的不想做的事情的最好方法就是去做，并停止尝试激励自己的方法去做吧。

把它想象成刷牙。你必须激励自己去做吗？不，你只是这样做。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2008-09-16T17:18:03.520

花十年时间从一台只有 vi 和 emacs 可用的机器上发布到 Usenet（当从 'rn' 调用时，emacs 的启动时间很长很烦人）。

我就是这样学会的。

但是为了更快的方法，我只能建议您只致力于学习它，并花几个小时处理一些源代码。如果您还没有 vim，请安装它 - 它具有出色的语法突出显示功能。

这很值得。我知道我可以在西方世界的任何地方访问几乎任何 Unix 机器，甚至可以通过慢速拨号连接或在无 GUI 的机器上，并在几分钟内完全工作。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2008-09-16T17:28:39.923

等到您必须在实时环境中调试一个奇怪而奇妙的问题时，您所能做的就是进入命令行。您可能最终不会喜欢 VI，但它会为您节省大量时间，并且您将学习大量技巧来逐步浏览大量（日志）文件。

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2008-09-16T17:32:22.660

打印出您可以在 Internet 上找到的众多 Vi/Vim 备忘单之一，并强迫自己坚持几个星期。

一旦你学习了一些基本的命令，你就会变得非常高效。从那里开始，只要不时停下来学习一个新命令。您无法学习所有 vi 命令。我相信 vi 命令的数量比宇宙中的原子还多！！:)

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2008-09-16T17:37:46.233

最好的办法？将您的终端设置为使用 vi 键绑定。

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2008-09-16T17:49:11.700

我是在开始为 ISP 工作时才学习 vi，在该 ISP 中编辑域的脚本只在终端上打开 vi。我别无选择，只能学习它，但我从未后悔过。

简而言之，将自己置于别无选择，只能学习它的境地。

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2008-09-16T17:54:36.803

我从 O'Reilly 的优秀著作[《Learning the vi editor》](https://rads.stackoverflow.com/amzn/click/com/1565924266)中学习了 vi 。

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2008-09-16T17:57:21.803

谷歌是你的朋友。保持一个方便的窗口或选项卡，当您需要多次执行某些操作时，例如缩进代码或使用正则表达式进行搜索，查找它。最好的提示站点将变得熟悉，为一些站点添加书签，并可能打印出备忘单。

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2008-09-16T18:11:01.990

我会从[argdo](http://www.vim.org/htmldoc/editing.html#:argdo)开始，一旦你爱上了它，剩下的就很容易了......

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2008-09-16T18:13:00.800

[在 vi 爱好者的网站http://nereida.deioc.ull.es/html/vilovers.html](http://nereida.deioc.ull.es/html/vilovers.html)上花几个小时 - 与 vi 的热情粉丝一起阅读大量教程、链接等。

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2008-09-16T18:19:18.273

我开始使用 VI 是因为它是几乎所有操作系统（Windows 除外）的默认编辑器。再说一次，我不会在 Windows 上做很多编码，所以这会有所帮助。

如果您想强迫自己使用 *NIX/OSX 系统，只需删除其他编辑器或给它们起别名。剩下的就看你自己了。每次您不使用 VI 编辑文件时，您都不会得到 cookie。

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2008-09-16T18:27:07.207

我用它来编辑 Linux 网络服务器上的文件，而不是使用 FTP。那是9年前的事了，从那以后我就掌握了这些技能。

另一件事是找到可以在 VI 中执行的出色操作，例如全局搜索和替换或更强大的功能，并在需要时使用 VI。

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2008-09-16T18:37:27.387

我发现在现代 vi（vim？）中真正令人困惑的一件事是输入模式，它允许命令模式的某些功能，但不是所有功能。当输入模式完全简化为旧 Solaris vi 所具有的“仅覆盖，不能移动光标”时，我感觉更舒服。真正的 vi 要求您大部分时间都处于命令模式。

话虽如此，现在没有必要学习 vi - emacs 无处不在。:)

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2008-09-16T19:50:22.827

将系统上的每个终端编辑器符号链接到 vim，并将系统上的每个图形编辑器符号链接到一个脚本，该脚本打开一个运行 vim 的新终端窗口。

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2008-09-16T22:00:18.023

我最初的做法是花几分钟时间来复习最基本的东西——移动光标、前后搜索、跳到下一个和上一个单词/句子/段落等。插入、附加。任何你能装在你脑海里的东西。然后，当你有事情要做而不必在接下来的 15 秒内完成时，让自己使用它。

当你对基础相当熟悉时，慢慢学习更高级的命令——尤其是那些利用你以前学习的命令（比如替换接下来的 3 个单词，或删除到下一个搜索目标）

一旦我学会了如何使用，我就喜欢使用 VI。高级命令比大多数 GUI 编辑器似乎提供的要强大得多，而且它无处不在且基于文本，因此可通过 ssh 获得，这一点更好。

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2008-09-17T00:59:59.057

如果你强迫自己使用它几天，你会发现这些命令很快就会成为第二天性。如果您使用的是 posix 系统，我建议您从 BSD 许可的 nvi（经典的 1:1 vi 克隆）开始，然后继续使用 vim。如果您从 vim 开始，很可能您只使用编辑命令的子集，因为它的 INSERT 模式与 GUI 编辑器非常相似。

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2008-09-17T01:08:09.663

我在 Windows 上有 VI，我使用的版本在下面列出，如果我在控制台窗口中，我总是默认使用 VI，那么无论我在什么操作系统上运行，我都知道我可以编辑文件。相反，如果我处于 UI 模式，我会使用 Notepad++ go figure。

NT VI - 版本 0.23 开发者：Tony Andrews 基于程序：Tim Thompson

* * *

## 回答 #54

> 赞同：0
> 
> 时间：2008-09-17T01:10:26.897

玩很多网络黑客。我上大学的时候就是这样，后来发现光标移动也是一样的。尽管此时您可能需要更改设置以使用 vi 样式键盘映射。

* * *

## 回答 #55

> 赞同：0
> 
> 时间：2008-09-17T01:53:13.547

我为自己制作了一张方便的单页备忘单，并用它来学习所有非基本功能。然而，实践是掌握任何东西的唯一途径。

vi 很好，因为它在每台 UNIX 类型的计算机、Mac OS X、Solaris、Linux 上。在 eBay 上找到一个旧的收纳盒？它有 vi。Sun OS 4 怎么样？再次vi。

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2008-09-17T05:08:07.230

虽然我总体上是 vi 的忠实粉丝，尤其是 vim，但有许多强大的编辑器，你不应该觉得你需要使用 vi，或者它在某种程度上是一些绝对完美的编辑器，因为它不是。

如果你不得不强迫自己使用 vi，我会担心你不会觉得使用它有效率。但是，如果您坚持坚持，我可能会确保我在每个编辑任务中都使用 vi。每当我需要做某事并且我不是最好的方法时，我会尝试在vi中找到最佳的（就最小的击键而言）*在*我以非最佳的正常方式完成之后. 然后我会用这个小提示（或者可能只是一个文本文件）做一个便利贴，这样我下次会记住它。

随着时间的推移，您使用 vi 的工作效率会显着提高。

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2008-09-19T14:53:02.710

为什么我不用自己的低摩擦方式来强迫自己呢？:-)

我所做的很简单：我尝试使用 vim（当您未在命令行中指定消息时的默认编辑器）制作我的 git 提交消息。

当然，提交消息太短了，几乎没有帮助。但是当使用它重新编辑消息时`git commit --amend`会更有帮助。

* * *

## 回答 #58

> 赞同：0
> 
> 时间：2008-09-19T23:16:05.870

做我做的。将它用于一切，并在 freenode 上的 #vim 中闲逛。

* * *

## 回答 #59

> 赞同：0
> 
> 时间：2008-09-24T21:05:05.893

当您需要快速搜索某些内容时，将所有内容放在一个页面上会有所帮助。

* * *

## 回答 #60

> 赞同：0
> 
> 时间：2009-01-21T07:49:19.733

在我 16 岁的时候，我被迫为我的第一份编程工作学习 Vim（老板不会让我们使用其他任何东西），但直到我阅读了[Steve Oualline 的 Vim 书](http://iccf-holland.org/click5.html#oualline)，我才取得任何真正的进步——强烈推荐为如果你想认真对待 vim，这是一个起点。

Vim 实际上比某些编程语言需要更多的时间来掌握（功能就是*这么*复杂）。试图通过打印备忘单来“掌握”Vim 就像试图通过阅读几篇博客文章来掌握 Haskell。准备好投入一些认真的时间，你会得到很好的回报。

# linux - 如何强制 CIFS 连接卸载

> ID：74626
> 
> 赞同：161
> 
> 时间：2008-09-16T17:08:39.503
> 
> 标签：linux, samba, smb, cifs

我在 Linux 机器上安装了一个 CIFS 共享。CIFS 服务器已关闭，或 Internet 连接已关闭，任何接触 CIFS 挂载的内容现在都需要几分钟才能超时，并且在您等待时无法杀死。我什至不能在我的主目录中运行 ls 因为有一个符号链接指向 CIFS 挂载内部，并且 ls 试图跟随它来决定它应该是什么颜色。如果我尝试卸载它（即使使用 -fl），卸载过程也会像 ls 一样挂起。甚至 sudo kill -9 也无法杀死它。如何强制内核卸载？

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2008-09-18T19:59:16.440

我使用惰性卸载：（`umount -l`这是一个小写字母`L`）

> 懒卸载。现在从文件系统层次结构中分离文件系统，并在文件系统不再忙时清理对文件系统的所有引用。（需要内核 2.4.11 或更高版本。）

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-06-15T23:18:07.003

`umount -a -t cifs -l`

在 CentOS 6.3 上对我来说就像一个魅力。它为我节省了服务器重启。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-10-09T19:29:23.790

在 RHEL 6 上，这有效：

```
umount -f -a -t cifs -l 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-01-31T21:00:37.510

这对我有用（Ubuntu 13.10 桌面到 Ubuntu 14.04 服务器）：-

```
 sudo umount -f /mnt/my_share 
```

安装有

```
 sudo mount -t cifs -o username=me,password=mine //192.168.0.111/serv_share /mnt/my_share 
```

其中 serv_share 是在 smb.conf 文件中设置和指向的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-10-18T01:53:37.833

我有这个问题一天，直到我找到真正的解决方案。不要试图强制卸载挂起的 smb 共享，而是使用“软”选项安装共享。如果进程尝试连接到不可用的共享，它将在一定时间后停止尝试。

> soft 使底座变软。几秒钟后文件系统调用失败。

```
mount -t smbfs -o soft //username@server/share /users/username/smb/share

stat /users/username/smb/share/file
stat: /users/username/smb/share/file: stat: Operation timed out 
```

可能不是您问题的真正答案，但它是问题的解决方案

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T17:15:31.560

您可以尝试使用 -f 选项来卸载：

```
umount -f /mnt/fileshare 
```

您是否指定要挂载的“-t cifs”选项？还要确保您没有指定要挂载的“硬”选项。

您可能还需要考虑[fusesmb](http://www.ricardis.tudelft.nl/~vincent/fusesmb/)，因为文件系统将在用户空间中运行，您可以像任何其他进程一样终止它。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-16T17:31:42.583

试试 umount -f /mnt/share。与 NFS 一起工作正常，从未尝试与 cifs 一起使用。

另外，看看 autofs，它只会在访问时挂载共享，并在后世卸载它。

[www.howtoforge.net](http://www.howtoforge.com/accessing_windows_or_samba_shares_using_autofs)上有一个很好的教程

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-04-19T10:17:07.703

我对 davfs 有一个非常相似的问题。在 的手册页中`umount.davfs`，我发现这些 `-f -l -n -r -v`选项被`umount.davfs`. 要强制卸载我的 davfs 挂载，我必须使用`umount -i -f -l /media/davmount`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-02-02T06:12:01.860

```
umount -f -t cifs -l /mnt & 
```

小心`&`，让`umount`后台运行。 `umount`将首先分离文件系统，因此您将一无所获`/mnt`。如果你运行`df`命令，那么它将`umount /mnt`强制执行。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2014-12-09T10:42:33.893

在 RHEL 6 上，这也对我有用：

umount -f -a -t cifs -l FOLDER_NAME

* * *

## 回答 #11

> 赞同：-9
> 
> 时间：2015-04-16T15:06:38.723

懒惰的卸载将为您完成这项工作。

```
umount -l <mount path> 
```

# java - 用Java修改jar文件中的xml文件

> ID：74641
> 
> 赞同：2
> 
> 时间：2008-09-16T17:10:45.970
> 
> 标签：java, jakarta-ee, jboss, jar

我目前的任务是在客户站点的 jar 中更新 XML 文件 (persistance.xml)。我当然可以解压缩文件，更新 xml，然后重新压缩文件以重新部署。我想在 Swing 应用程序中对这些命令行操作进行排序，以便执行此操作的人不必进入命令行。关于以编程方式执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T17:14:20.580

Java API 具有用于操作 JAR 文件的[类。](http://java.sun.com/javase/6/docs/api/java/util/jar/package-summary.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T17:16:41.980

当然：

```
File tmp = new File ("tmp");
tmp.mkdirs();
Process unjar = new ProcessBuilder ("jar", "-xf", "myjar.jar", tmp.getName ()).start();
unjar.waitFor();
// TODO read and update persistence.xml
Process jar = new ProcessBuilder ("jar", "-cf", "myjar.jar", tmp.getName()).start();
jar.waitFor(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T17:14:43.480

您可以使用 Java 的[ZipFile](http://java.sun.com/j2se/1.5.0/docs/api/java/util/zip/ZipFile.html)和[ZipEntry](http://java.sun.com/j2se/1.5.0/docs/api/java/util/zip/ZipEntry.html)类来读取 JAR 文件的内容，然后使用[ZipOutputStream](http://java.sun.com/j2se/1.5.0/docs/api/java/util/zip/ZipOutputStream.html)创建一个新文件。

# apache-flex - 函数值函数类型的 flex (ActionScript3) 语法是什么？

> ID：74649
> 
> 赞同：0
> 
> 时间：2008-09-16T17:11:28.123
> 
> 标签：apache-flex, actionscript-3

在如下代码中为我的比较函数生成器声明类型的语法是什么？

```
var colName:String = ""; // actually assigned in a loop
gc.sortCompareFunction = function() : ??WHAT_GOES_HERE??
{
   var tmp:String = colName;
   return function(a:Object,b:Object):int { return compareGeneral(a,b,tmp); };
}(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T17:20:34.777

“函数”不是数据类型吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-24T06:59:35.130

为了理解数据类型是什么，我们必须知道返回的预期结果是什么。我需要查看 compareGeneral 的代码块，但我仍然不相信这会有所帮助。您有两个具有相同功能“gc.sortCompareFunction”的返回，我认为这是不正确的，因为 return 获取一个值然后充当中断命令，这意味着具有相同功能块的其余任何内容都将被忽略。问题是我不知道哪个return是预期的return，我也不知道flash知道。您可以使用 * 作为数据类型，但这应该只在特定情况下使用。在这种情况下，我相信您只需要一个返回值，它只返回 compareGeneral 的任何值。

现在，如果这是一个 compareGenerator，它真的应该返回一个布尔值 TRUE 或 FALSE，或者一个 int 0 或 1，让我们使用前者。另外我相信我们可以少用一个功能。由于我没有看到您的所有代码，并且我不确定您要完成什么，因此以下是假设的。

> ```
> 函数 compareGeneral(a:object,b:object):Boolean
> {
>    //检查与每个对象关联的一些属性是否相似。
>    如果（a.someAssignedPropery == b.someAssignedPropery）
>    {
>       返回真；
>    }
>    返回假；
> }
> var objA:Object = new Object();
> objA.someAssignedProperty = "AS3";
> objB.someAssignedProperty = "AS3";
> 
> 比较一般（objA，objB）；
> 
> ```

在这种情况下 compareGeneral(objA,objB); 返回 true，尽管我们还没有对它做任何有用的事情。这是您可以使用它的一种方式。请记住，它要么返回 true 要么 false 的值，因此我们可以将其视为变量。

> ```
> if(compareGeneral(objA,objB)) //同 if(compareGeneral(objA,objB)) == true)
> {
>    trace("你找到了一个匹配项！");
>    //在这里，您可以根据找到的匹配项调用其他函数或设置变量或任何您需要的功能。
> }
> 别的
> {
>   trace("找不到匹配的！");
> }
> 
> ```

我希望这能够帮助你理解数据类型和返回值。我不知道你在用 tmp 做什么，但通常返回值的函数只处理那一件事，而且只处理那件事，所以比较函数最好将一件事与另一件事进行比较，这就是调用的范围. tmp 需要的任何功能都可以放在它自己的函数或方法中，并在需要时调用。

# biztalk - 有人连接过 BizTalk 和 Fogbugz 吗？

> ID：74662
> 
> 赞同：2
> 
> 时间：2008-09-16T17:12:55.983
> 
> 标签：biztalk, fogbugz

我们有一个安排日常任务的 Intranet 系统。我们还有用于错误跟踪的 Fogbugz。当出现紧急错误时，我们会在错误跟踪器中跟踪该任务。但是，我需要写回 Intranet 和我们的 CMS。我认为 Biztalk 是中间部分，但不确定最好的方法。数据库适配器？网页服务？

我知道我可以将 CMS 适配器用于 Microsoft CMS。我很想听听您对 Fogbugz 的体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T17:22:58.313

我猜想观察数据库的变化是最好的方法。这样，您可以通过其他 Biztalk 适配器发布您在 FogBugz 数据库中看到的任何更改。

请让我们随时了解您决定做什么 - 我很想听听。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-21T10:52:56.273

[FogBugz API 的第 6 版在http://www.fogcreek.com/FogBugz/docs/60/topics/advanced/API.html](http://www.fogcreek.com/FogBugz/docs/60/topics/advanced/API.html)上有很好的记录。API 被实现为一个接受 GET 或 POST 参数并在用户通过身份验证后返回 XML 的 ASP 页面。

因此，我们可以使用 HTTP 发送适配器向 FogBugz 系统发送 POST 请求，更新错误记录或检索信息。API 调用的响应是基本 Xml，它将在响应正文中返回，BizTalk 可以根据需要读取该响应正文。

请注意，HTTP 发送适配器只能 POST 数据 - 它不能使用 GET 动词 ( [http://msdn.microsoft.com/en-us/library/aa561642.aspx](http://msdn.microsoft.com/en-us/library/aa561642.aspx) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-21T11:00:49.673

FogBugz 不是基于 SQL Server 数据库吗？还是您使用托管替代方案？

如果它使用的是您正在控制的 SQL Server，我只需将两个发送端口绑定到读取和处理“FixBugMessage”的进程。一个使用 CMS 适配器并写入 CMS 的发送端口，另一个仅使用 SQL 适配器并通过存储过程写入 FogBugz 数据库的发送端口。

# java - 如何检查 Java 中的 CPU 和内存使用情况？

> ID：74674
> 
> 赞同：104
> 
> 时间：2008-09-16T17:13:40.363
> 
> 标签：java, operating-system, cpu, ram

我需要检查java中服务器的CPU和内存使用情况，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2008-09-16T17:22:46.457

如果您正在专门寻找 JVM 中的内存：

```
Runtime runtime = Runtime.getRuntime();

NumberFormat format = NumberFormat.getInstance();

StringBuilder sb = new StringBuilder();
long maxMemory = runtime.maxMemory();
long allocatedMemory = runtime.totalMemory();
long freeMemory = runtime.freeMemory();

sb.append("free memory: " + format.format(freeMemory / 1024) + "<br/>");
sb.append("allocated memory: " + format.format(allocatedMemory / 1024) + "<br/>");
sb.append("max memory: " + format.format(maxMemory / 1024) + "<br/>");
sb.append("total free memory: " + format.format((freeMemory + (maxMemory - allocatedMemory)) / 1024) + "<br/>"); 
```

但是，这些仅应作为估计...

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-01-23T15:09:49.363

```
import java.io.File;
import java.text.NumberFormat;

public class SystemInfo {

    private Runtime runtime = Runtime.getRuntime();

    public String info() {
        StringBuilder sb = new StringBuilder();
        sb.append(this.osInfo());
        sb.append(this.memInfo());
        sb.append(this.diskInfo());
        return sb.toString();
    }

    public String osName() {
        return System.getProperty("os.name");
    }

    public String osVersion() {
        return System.getProperty("os.version");
    }

    public String osArch() {
        return System.getProperty("os.arch");
    }

    public long totalMem() {
        return Runtime.getRuntime().totalMemory();
    }

    public long usedMem() {
        return Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
    }

    public String memInfo() {
        NumberFormat format = NumberFormat.getInstance();
        StringBuilder sb = new StringBuilder();
        long maxMemory = runtime.maxMemory();
        long allocatedMemory = runtime.totalMemory();
        long freeMemory = runtime.freeMemory();
        sb.append("Free memory: ");
        sb.append(format.format(freeMemory / 1024));
        sb.append("<br/>");
        sb.append("Allocated memory: ");
        sb.append(format.format(allocatedMemory / 1024));
        sb.append("<br/>");
        sb.append("Max memory: ");
        sb.append(format.format(maxMemory / 1024));
        sb.append("<br/>");
        sb.append("Total free memory: ");
        sb.append(format.format((freeMemory + (maxMemory - allocatedMemory)) / 1024));
        sb.append("<br/>");
        return sb.toString();

    }

    public String osInfo() {
        StringBuilder sb = new StringBuilder();
        sb.append("OS: ");
        sb.append(this.osName());
        sb.append("<br/>");
        sb.append("Version: ");
        sb.append(this.osVersion());
        sb.append("<br/>");
        sb.append(": ");
        sb.append(this.osArch());
        sb.append("<br/>");
        sb.append("Available processors (cores): ");
        sb.append(runtime.availableProcessors());
        sb.append("<br/>");
        return sb.toString();
    }

    public String diskInfo() {
        /* Get a list of all filesystem roots on this system */
        File[] roots = File.listRoots();
        StringBuilder sb = new StringBuilder();

        /* For each filesystem root, print some info */
        for (File root : roots) {
            sb.append("File system root: ");
            sb.append(root.getAbsolutePath());
            sb.append("<br/>");
            sb.append("Total space (bytes): ");
            sb.append(root.getTotalSpace());
            sb.append("<br/>");
            sb.append("Free space (bytes): ");
            sb.append(root.getFreeSpace());
            sb.append("<br/>");
            sb.append("Usable space (bytes): ");
            sb.append(root.getUsableSpace());
            sb.append("<br/>");
        }
        return sb.toString();
    }
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-09-16T19:39:47.940

如果您使用的是 Sun JVM，并且对应用程序的内部内存使用情况（您的应用程序正在使用的分配内存有多少）感兴趣，我更喜欢打开 JVM 内置的垃圾收集日志记录。您只需将 -verbose:gc 添加到启动命令中。

从太阳文档：

> 命令行参数 -verbose:gc 在每个集合中打印信息。请注意，-verbose:gc 输出的格式可能会在 J2SE 平台的版本之间发生变化。例如，这里是大型服务器应用程序的输出：
> 
> ```
> [GC 325407K->83000K(776768K), 0.2300771 secs]
> [GC 325816K->83372K(776768K), 0.2454258 secs]
> [Full GC 267628K->83769K(776768K), 1.8479984 secs] 
> ```
> 
> 在这里，我们看到两个次要的集合和一个主要的集合。箭头前后的数字
> 
> ```
> 325407K->83000K (in the first line) 
> ```
> 
> 分别表示垃圾回收前后活动对象的组合大小。在次要收集之后，计数包括不一定处于活动状态但无法回收的对象，因为它们直接处于活动状态，或者因为它们在永久代中或被永久代引用。括号中的数字
> 
> ```
> (776768K) (in the first line) 
> ```
> 
> 是总可用空间，不包括永久代中的空间，它是总堆减去幸存者空间之一。次要收集大约需要四分之一秒。
> 
> ```
> 0.2300771 secs (in the first line) 
> ```

有关更多信息，请参阅：http: [//java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html](http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-03-31T18:56:06.963

从[这里](http://knight76.blogspot.co.il/2009/05/how-to-get-java-cpu-usage-jvm-instance.html)

```
 OperatingSystemMXBean operatingSystemMXBean = (OperatingSystemMXBean) ManagementFactory.getOperatingSystemMXBean();
    RuntimeMXBean runtimeMXBean = ManagementFactory.getRuntimeMXBean();
    int availableProcessors = operatingSystemMXBean.getAvailableProcessors();
    long prevUpTime = runtimeMXBean.getUptime();
    long prevProcessCpuTime = operatingSystemMXBean.getProcessCpuTime();
    double cpuUsage;
    try
    {
        Thread.sleep(500);
    }
    catch (Exception ignored) { }

    operatingSystemMXBean = (OperatingSystemMXBean) ManagementFactory.getOperatingSystemMXBean();
    long upTime = runtimeMXBean.getUptime();
    long processCpuTime = operatingSystemMXBean.getProcessCpuTime();
    long elapsedCpu = processCpuTime - prevProcessCpuTime;
    long elapsedTime = upTime - prevUpTime;

    cpuUsage = Math.min(99F, elapsedCpu / (elapsedTime * 10000F * availableProcessors));
    System.out.println("Java CPU: " + cpuUsage); 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-09-16T18:00:30.190

JMX, The MXBeans (ThreadMXBean, etc) provided will give you Memory and CPU usages.

```
OperatingSystemMXBean operatingSystemMXBean = (OperatingSystemMXBean) ManagementFactory.getOperatingSystemMXBean();
operatingSystemMXBean.getSystemCpuLoad(); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-16T17:20:28.460

对于内存使用，以下将起作用，

```
long total = Runtime.getRuntime().totalMemory();
long used  = Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory(); 
```

对于 CPU 使用率，您需要使用外部应用程序来测量它。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-09-16T17:27:04.077

从 Java 1.5 开始，JDK 附带了一个新工具：[JConsole](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html)，它可以显示任何 1.5 或更高版本 JVM 的 CPU 和内存使用情况。它可以制作这些参数的图表，导出为 CSV，显示加载的类数、实例数、死锁、线程等......

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-16T17:22:20.157

如果您使用已在此处发布的许多答案中发布的运行时/总内存解决方案（我已经做了很多），如果您想要相当准确/一致的结果，请务必先强制进行两次垃圾收集。

为了提高效率，Java 通常允许垃圾在强制 GC 之前填满所有内存，即使那样它通常也不是完整的 GC，因此 runtime.freeMemory() 的结果总是介于“实际”可用内存量和 0 之间.

第一次 GC 并没有得到所有东西，它得到了大部分。

好处是，如果你只是调用 freeMemory()，你会得到一个绝对没用的数字，而且变化很大，但如果先做 2 gc，它是一个非常可靠的指标。它还使例程变得更慢（可能是几秒钟）。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-16T17:19:02.847

Java 的[Runtime](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Runtime.html)对象可以报告 JVM 的内存使用情况。对于 CPU 消耗，您必须使用外部实用程序，例如 Unix 的顶级或 Windows 进程管理器。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T17:21:43.823

[JConsole](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html)是一种监视正在运行的 Java 应用程序的简单方法，或者您可以使用 Profiler 来获取有关您的应用程序的更多详细信息。我喜欢为此使用[NetBeans Profiler](http://profiler.netbeans.org/)。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-10-24T02:13:30.480

下面是一些简单的代码来计算当前内存使用量（以 MB 为单位）：

```
double currentMemory = ( (double)((double)(Runtime.getRuntime().totalMemory()/1024)/1024))- ((double)((double)(Runtime.getRuntime().freeMemory()/1024)/1024)); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-07-02T14:41:05.273

我还将添加以下方法来跟踪 CPU 负载：

```
import java.lang.management.ManagementFactory;
import com.sun.management.OperatingSystemMXBean;

double getCpuLoad() {
    OperatingSystemMXBean osBean =
        (com.sun.management.OperatingSystemMXBean) ManagementFactory.
        getPlatformMXBeans(OperatingSystemMXBean.class);
    return osBean.getProcessCpuLoad();
} 
```

[你可以在这里](https://www.java.net/community-item/hidden-java-7-features-%E2%80%93-system-and-process-cpu-load-monitoring)阅读更多

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-16T17:18:55.373

如果您使用的是 Tomcat，请查看[Psi Probe](https://code.google.com/p/psi-probe/)，它可以让您监控内部和外部内存消耗以及许多其他区域。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-16T17:52:50.037

The [YourKit](http://www.yourkit.com/) Java profiler is an excellent commercial solution. You can find further information in the docs on [CPU profiling](http://www.yourkit.com/docs/75/help/cpu_profiling/cpu_intro.jsp) and [memory profiling](http://www.yourkit.com/docs/75/help/memory_profiling/memory_telemetry.jsp).

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-11-07T15:55:05.157

对于 Eclipse，您可以使用 TPTP（测试和性能工具平台）来分析内存使用情况等[更多信息](http://eclipse.org/articles/Article-TPTP-Profiling-Tool/tptpProfilingArticle.html)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-09-06T14:44:26.230

我想在现有答案中添加注释：

这些方法只跟踪 JVM 内存。实际进程可能会消耗更多内存。

java.nio.ByteBuffer.allocateDirect() 是一个函数/库，很容易错过，并且确实分配了本机内存，这不是 Java 内存管理的一部分。

在 Linux 上，您可以使用类似的方法来获取实际消耗的内存：[https ://linuxhint.com/check_memory_usage_process_linux/](https://linuxhint.com/check_memory_usage_process_linux/)

# information-management - 有效管理信息的工具？

> ID：74689
> 
> 赞同：3
> 
> 时间：2008-09-16T17:14:52.700
> 
> 标签：information-management

你们如何管理信息溢出？你们都用什么工具？有用的工具之一是 RSS 提要阅读器。是否有任何机构使用任何其他工具或任何其他方式来有效管理信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T17:18:28.963

做一个信息势利小人。

如果该博客不能绝对震撼您的世界，请不要阅读它。信息太多很容易陷入困境，甚至沉迷。不管你有什么工具，你还是人，每天只能读这么多字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T17:19:29.990

我使用[Evernote](http://evernote.com/)来保存笔记并搜索它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T18:25:20.503

我使用谷歌阅读器作为提要。将其分成多个类别，“A”代表更独特的内容，“B”代表垃圾邮件（例如 Digg，很容易忽略，因为重要的内容显示在“A”中），“C”代表我的网络漫画。

我总是读'A'的东西，无聊的时候我有空的时候读'C'和'B'。很多时候我会将“B”标记为已读，只是为了摆脱它。

对于工作，我一直使用 Outlook，所以我经常使用 Outlook 的“任务”功能来整理事情。也是“收件箱零”（[http://www.43folders.com/izero](http://www.43folders.com/izero)）的忠实信徒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T17:48:57.813

我使用少量的工具和技术，因为管理信息管理工具而不是管理信息很容易分心。

1.  谷歌阅读器——对我来说，关键是为适当的位置创建@work 和@home 标签。

2.  TiddlyWiki - 我在 TiddlyWiki 文件中跟踪我的所有工作项目笔记。

3.  美味——我把书签放在这里。当我遇到想要稍后阅读的链接时（通常在我的 RSS 阅读器中），我将其标记为@readreview。当我阅读它时，我会删除它，除非它是有用的参考，然后我会适当地重新标记。

4.  本地书签 - 我将浏览器工具栏上的书签存储在文件夹中，以便我可以中键单击并在选项卡中打开所有书签。显然，这些数量有限:-)。我也有一个书签文件夹。

我没有PDA。我的桌子上有一张方格纸，用来写临时笔记和图表（永久笔记进入 TiddlyWiki）。很多“生产力博客”喜欢宣传各种工具，其中一些很受人们欢迎，但我发现我的系统非常简单且易于管理。这使它很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T17:15:52.170

嗯，这是显而易见的，但 iGoogle 似乎对我来说做得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T17:19:50.850

取决于您要管理的信息。你可以说得更详细点吗？我使用谷歌阅读器来处理我阅读的内容，RememberTheMilk 来提醒我必须做的事情，以及使用 gmail 来快速存储和搜索数据/通信。哦，我也使用[时髦的 PDA](http://www.43folders.com/2004/09/03/introducing-the-hipster-pda)！

您可能应该查看[Lifehacker](http://lifehacker.com/)以获取更多工具和 Getting Things Done 应用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T17:21:30.563

就像你说的，今天大多数网站都有 RSS 提要。如果您使用多台计算机，请获取在计算机之间同步的 RSS 阅读器，这样您就不必将很多帖子标记为已读。一个很好的程序是 FeedDeamon，它是免费的并且可以在计算机之间同步，如果你在路上，甚至还有一个在线版本。FeedDeamon 还有一些工具可以帮助您识别您没有真正阅读过的提要，并为您提供您经常查看的前 10 个提要。这可以帮助您删除不良的 RSS-Feed，还可以帮助您组织您的 Feed。

我也使用 Delicious，让我的书签保持同步，如果你经常添加书签，它会非常方便。

除此之外，我并没有真正使用任何其他工具 - 只是一个常识，一天只有 24 小时，所以不要用它来阅读你不需要的信息 - 从 RSS 为有趣的博客文章添加书签，并在需要时阅读它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T17:23:10.997

在过去的 2 年里，我一直在使用[Delicious ，这对我很有帮助。](http://delicious.com)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T17:24:09.777

如果您主要对博客感兴趣，我认为我们需要一种方法来确定我们**个人**感兴趣的信息的优先级。曾经有一个名为 wTicker（现已停用）的 RSS 阅读器，它使用贝叶斯过滤对文章进行评分为你。另一个正在开发的产品[Particls](http://www.particls.com/)会类似地观察你阅读的内容并突出显示类似的内容。

但是，其他类型的信息呢？例如，OneNote 或 EverNote 或[Zoot](http://www.zootsoftware.com/)等更晦涩的工具旨在促进的任务？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T18:40:35.583

这取决于您所指的信息类型。上面的答案包含大部分工具。但是，如果您使用 ms office，您将探索 Office OneNote。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-18T18:11:28.320

1.  iGoogle：新闻、RSS、Wether、新电影、电子邮件小部件
2.  ToDoList：日常工作方面
3.  Local MediaWiki，用于本地公司知识
4.  用于个人财务的智能手机 MS Excel。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-28T09:40:22.063

1.  我仍然从 RSS 提要阅读新闻和博客。[Feedly](https://feedly.com/)是目前最好的工具。
2.  当我在 Feedly 中发现一些有趣的东西时，我会将其添加到[Pocket](https://getpocket.com)并稍后阅读。高级帐户允许我突出显示我想保存的段落。
3.  我还在[IFTTT](https://ifttt.com/)上设置了一个收据，用于监控我在 Twitter 上的点赞，并将点赞的推文中的链接添加到 Pocket。
4.  随着 Substack 的增长，出现了新的电子邮件通讯热潮。但我的收件箱也是我工作的地方。因此，我编写了一个应用程序脚本文件来每天接收一两次时事通讯，以防止它们分散我的工作注意力。然后，我将它作为[静默收件箱](https://gsuite.google.com/marketplace/app/silent_inbox/236151031043)插件发布到您的 Gmail 中。

# qt - 如何在 Qt 中存储会话之间的窗口大小？

> ID：74690
> 
> 赞同：20
> 
> 时间：2008-09-16T17:15:00.157
> 
> 标签：qt, window, size, restore

我在 Qt 应用程序中有一个 QMainWindow。当我关闭它时，我希望它存储其当前的还原大小（未最大化时的窗口大小）。当我以恢复模式（即未最大化）关闭窗口时，这很有效。但是，如果我在窗口最大化时关闭窗口，那么下次我启动应用程序并恢复应用程序（因为它以最大化模式启动）时，它就不会记住它应该恢复到的大小。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-01-05T01:57:24.633

我发现在 Fedora 14 上需要结合前面所有的答案。注意窗口最大化时**不要保存大小和位置！**

```
void MainWindow::writePositionSettings()
{
    QSettings qsettings( "iforce2d", "killerapp" );

    qsettings.beginGroup( "mainwindow" );

    qsettings.setValue( "geometry", saveGeometry() );
    qsettings.setValue( "savestate", saveState() );
    qsettings.setValue( "maximized", isMaximized() );
    if ( !isMaximized() ) {
        qsettings.setValue( "pos", pos() );
        qsettings.setValue( "size", size() );
    }

    qsettings.endGroup();
}

void MainWindow::readPositionSettings()
{
    QSettings qsettings( "iforce2d", "killerapp" );

    qsettings.beginGroup( "mainwindow" );

    restoreGeometry(qsettings.value( "geometry", saveGeometry() ).toByteArray());
    restoreState(qsettings.value( "savestate", saveState() ).toByteArray());
    move(qsettings.value( "pos", pos() ).toPoint());
    resize(qsettings.value( "size", size() ).toSize());
    if ( qsettings.value( "maximized", isMaximized() ).toBool() )
        showMaximized();

    qsettings.endGroup();
} 
```

在 main() 中，位置设置在第一次显示窗口之前被读取...

```
MainWindow mainWindow;
mainWindow.readPositionSettings();
mainWindow.show(); 
```

...并且这些事件处理程序会根据需要更新设置。（这会导致在移动和调整大小期间每次鼠标移动都会写入设置文件，这是不理想的。）

```
void MainWindow::moveEvent( QMoveEvent* )
{
    writePositionSettings();
}

void MainWindow::resizeEvent( QResizeEvent* )
{
    writePositionSettings();
}

void MainWindow::closeEvent( QCloseEvent* )
{
    writePositionSettings();
} 
```

尽管如此，位置的垂直分量还是不太正确，它似乎忽略了窗口标题栏的高度......如果有人知道如何处理，请告诉我:)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-09-16T20:33:35.437

使用[QWidget::saveGeometry](http://doc.qt.io/qt-4.8/qwidget.html#saveGeometry)功能将当前设置写入注册表。（使用 QSettings 访问注册表）。然后在启动时使用 restoreGeometry() 返回到之前的状态。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T17:36:58.467

我也遇到过这个问题。

你可以做什么：除了窗口的大小，保存它是否最大化（`QWidget::isMaximized()`）。

然后下次启动应用程序时，首先设置大小 ( `QWidget::resize()`)，然后在适当时将其最大化 ( `QWidget::showMaximized()`)。恢复后，它应该恢复到正确的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T22:31:25.287

[http://qt-project.org/doc/qt-4.8/application-windows.html](http://qt-project.org/doc/qt-4.8/application-windows.html)上的图像显示，`geometry.x()`and`geometry.y()`不等于`x()`and `y()`，它们与`pos()`.

就我而言，我使用：

```
x()
y()
width()
height() 
```

并通过以下方式成功恢复这些：

```
move()
resize() 
```

# java - 是否有独立于平台的方式（Java？）来读取音频 CD 的目录？

> ID：74693
> 
> 赞同：3
> 
> 时间：2008-09-16T17:15:22.077
> 
> 标签：java, cross-platform

如果可能的话，我想避免使用本机库。对于 Linux、Windows 和 Mac OS X，肯定有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-26T01:01:29.780

对不起，你运气不好。您将需要 JNI，而且对于不同的平台，它会有令人讨厌的不同。基本的 java 库涵盖了几乎通用的任务和硬件。CD 驱动器过去不是，现在也不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T17:27:34.963

您可以使用 Java 声音 API。我相信这是 java 5 的一部分。这可以让你做你想做的事。

[http://java.sun.com/products/java-media/sound/](http://java.sun.com/products/java-media/sound/)

这里有些例子：

[http://www.jsresources.org/examples/](http://www.jsresources.org/examples/)

# c++ - 在 Windows Mobile 设备上，显示 OK 按钮而不是 X 按钮的最佳方式是什么？

> ID：74696
> 
> 赞同：2
> 
> 时间：2008-09-16T17:15:49.143
> 
> 标签：c++, windows-mobile

我有一个 C++ 程序，在运行时，默认情况下会在右上角显示 X。单击 X，最小化程序。我使用 SHinitDialog 函数添加了代码，将 X 更改为 OK，以便单击 OK 退出程序。

我的问题：有没有更好的方法适用于窗口，因为 SHinitDialog 最适合对话框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T17:23:44.397

看看[SHDoneButton](http://msdn.microsoft.com/en-us/library/aa453682.aspx) API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T18:18:32.033

对于 Windows Mobile 5.0 及更高版本，使用 CreateWindowEx 函数将其传递 WS_EX_CAPTIONOKBTN 以实现扩展样式。

@ctacke SHDoneButton 可能也有效，但我想更改主窗口而不像对话框那样处理它，这基本上是 SHinitDialog 正在做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T17:18:45.813

不确定它是如何在 C++ 中完成的，但在 .NET 中，如果将 MinimizeBox 属性设置为 false，则会得到一个确定按钮。由于 .NET Windows 代码是精美的包装代码，因此应该有一个 C++ 等价物

# icons - 您可以向 Windows 资源管理器发送信号以使其刷新系统托盘图标吗？

> ID：74723
> 
> 赞同：14
> 
> 时间：2008-09-16T17:18:59.557
> 
> 标签：icons, windows-explorer, system-tray, systray

这个问题困扰了我很长一段时间，真的很烦人。

每次我在重新启动/电源循环后登录时，资源管理器都需要一些时间才能显示出来。我已经采取了等待所有服务启动然后登录的步骤，但这没有任何区别。结果始终相同：即使应用程序已启动，某些图标也不会显示。

我已经对使一个应用程序“粘贴”图标的代码进行了一些研究，但是是否有一个 API 调用可以执行，以便资源管理器重新读取所有图标信息？像无效或重绘或类似的东西？

* * *

显然，看起来 Jon 是对的，而且不可能做到。

我遵循 Bob Dizzle 和 Mark Ransom 代码并构建了这个（Delphi 代码）：

```
procedure Refresh;
var
  hSysTray: THandle;
begin
  hSysTray := GetSystrayHandle;
  SendMessage(hSysTray, WM_PAINT, 0, 0);
end;

function GetSystrayHandle: THandle;
var
  hTray, hNotify, hSysPager: THandle;
begin
  hTray := FindWindow('Shell_TrayWnd', '');
  if hTray = 0 then
  begin
    Result := hTray;
    exit;
  end;

  hNotify := FindWindowEx(hTray, 0, 'TrayNotifyWnd', '');
  if hNotify = 0 then
  begin
    Result := hNotify;
    exit;
  end;

  hSyspager := FindWindowEx(hNotify, 0, 'SysPager', '');
  if hSyspager = 0 then
  begin
    Result := hSyspager;
    exit;
  end;

  Result := FindWindowEx(hSysPager, 0, 'ToolbarWindow32', 'Notification Area');
end;
```

但无济于事。

我什至尝试过

```
InvalidateRect()
```

仍然没有出现。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-27T14:33:02.797

看看这个博客条目：[刷新任务栏通知区域](http://malwareanalysis.com/CommunityServer/blogs/geffner/archive/2008/02/15/985.aspx)。我正在使用此代码刷新系统托盘以摆脱孤立的图标，并且它运行良好。该博客条目提供了非常丰富的信息，并很好地解释了作者为发现他的解决方案而执行的步骤。

```
#define FW(x,y) FindWindowEx(x, NULL, y, L"")

void RefreshTaskbarNotificationArea()
{
    HWND hNotificationArea;
    RECT r;

    GetClientRect(
        hNotificationArea = FindWindowEx(
            FW(FW(FW(NULL, L"Shell_TrayWnd"), L"TrayNotifyWnd"), L"SysPager"),
            NULL,
            L"ToolbarWindow32",
            // L"Notification Area"), // Windows XP
            L"User Promoted Notification Area"), // Windows 7 and up
        &r);

    for (LONG x = 0; x < r.right; x += 5)
        for (LONG y = 0; y < r.bottom; y += 5)
            SendMessage(
                hNotificationArea,
                WM_MOUSEMOVE,
                0,
                (y << 16) + x);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-03T23:54:23.437

在 Windows 7 或 Windows 8 上使用 Louis 的答案（来自[REFRESHING THE TASKBAR NOTIFICATION AREA ）的任何人的两个重要细节：](http://malwareanalysis.com/CommunityServer/blogs/geffner/archive/2008/02/15/985.aspx)

首先，正如答案所反映的那样，XP 中标题为“通知区域”的窗口现在在 Windows 7（实际上可能是 Vista）及更高版本中标题为“用户升级通知区域”。

其次，此代码不会清除当前隐藏的图标。这些都包含在一个单独的窗口中。使用原代码刷新可见图标，以下刷新隐藏图标。

```
//Hidden icons
GetClientRect(
    hNotificationArea = FindWindowEx(
        FW(NULL, L"NotifyIconOverflowWindow"),
        NULL,
        L"ToolbarWindow32",
        L"Overflow Notification Area"),
    &r);

for (LONG x = 0; x < r.right; x += 5)
    for (LONG y = 0; y < r.bottom; y += 5)
        SendMessage(
            hNotificationArea,
            WM_MOUSEMOVE,
            0,
            (y << 16) + x); 
```

对于只需要运行实用程序而不是代码来完成此操作的任何人，我使用此更新构建了一个简单的 exe：[刷新通知区域](http://projects.stephenklancher.com/project/id/88/Refresh_Notification_Area)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T17:24:19.463

包含以下代码以刷新系统托盘。

```
public const int WM_PAINT = 0xF;
[DllImport("USER32.DLL")]
public static extern int SendMessage(IntPtr hwnd, int msg, int character,
                                     IntPtr lpsText);

Send WM_PAINT Message to paint System Tray which will refresh it.
SendMessage(traynotifywnd, WM_PAINT, 0, IntPtr.Zero); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T17:23:11.527

据我所知，这是不可能的 Gustavo - 由每个应用程序将其 notifyicon 放入系统托盘，并确保它保持在正确的状态。

当 explorer.exe 崩溃时，您有时会注意到某些图标不会重新出现 - 这不是因为他们的进程已经崩溃，只是因为他们的应用程序在 explorer.exe 的新实例启动时没有将 notifyicon 放入系统托盘向上。再次，它是负责的应用程序。

很抱歉没有更好的消息告诉你！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-27T14:45:29.310

去年，我在[Codeaholic](http://codeaholic.blogspot.com)博客上的一篇题为[[Delphi] 更新 SysTray](http://codeaholic.blogspot.com/2008/07/delphi-updating-systray.html)的文章中讨论了这个问题。

我的解决方案是 Delphi ActiveX/COM DLL。[下载链接仍然有效（尽管我不知道我的PLUG](http://www.plug.org.au)会员资格已经失效了多久。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T17:35:23.307

我使用以下 C++ 代码来获取托盘窗口的窗口句柄。 **注意：**这仅在 Windows XP 上进行了测试。

```
HWND FindSystemTrayIcons(void)
{
    // the system tray icons are contained in a specific window hierarchy;
    // use the Spy++ utility to see the chain
    HWND hwndTray = ::FindWindow("Shell_TrayWnd", "");
    if (hwndTray == NULL)
        return NULL;
    HWND hwndNotifyWnd = ::FindWindowEx(hwndTray, NULL, "TrayNotifyWnd", "");
    if (hwndNotifyWnd == NULL)
        return NULL;
    HWND hwndSysPager = ::FindWindowEx(hwndNotifyWnd, NULL, "SysPager", "");
    if (hwndSysPager == NULL)
        return NULL;
    return ::FindWindowEx(hwndSysPager, NULL, "ToolbarWindow32", "Notification Area");
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-11T09:02:51.947

经过多次尝试，我发现您必须知道三个问题：

*   隐藏托盘窗口的父级`NotifyIconOverflowWindow`不是`Shell_TrayWnd`.
*   您不应该使用`caption`参数 of`FindWindowEx`来查找窗口，因为这些是许多语言版本的 Windows 操作系统，它们显然并不总是相同的标题。
*   使用`spy++`Visual Studio 查找或确认您想要的内容。

所以，我更改了@Stephen Klancher 和@Louis Davis 的代码，谢谢你们。

以下代码对我有用。

```
#define FW(x,y) FindWindowEx(x, NULL, y, L"")
void RefreshTaskbarNotificationArea()
{
    HWND hNotificationArea;
    RECT r;
    GetClientRect(hNotificationArea = FindWindowEx(FW(NULL, L"NotifyIconOverflowWindow"), NULL, L"ToolbarWindow32", NULL), &r);
    for (LONG x = 0; x < r.right; x += 5)
    {
        for (LONG y = 0; y < r.bottom; y += 5)
        {
            SendMessage(hNotificationArea, WM_MOUSEMOVE, 0, (y << 16) + x);
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-27T00:18:48.067

@Skip R，以及其他任何想在 C 中执行此操作的人，并在 Windows 10 64 位（但安装了 mingw 32 位软件包）上的最近（最新）mingw 中验证了此代码，这似乎适用于 Windows XP /2003 摆脱陈旧的通知区域图标。

我通过 Chocolatey 安装了 mingw，如下所示：

```
choco install mingw --x86 --force --params "/exception:sjlj" 
```

（您的里程可能会有所不同，在我的系统上，编译器然后安装在这里：

```
C:\ProgramData\chocolatey\lib\mingw\tools\install\mingw32\bin\gcc.exe 
```

然后一个简单的

```
gcc refresh_notification_area.c 
```

生成了一个 a.exe，它解决了我在 Windows 2003（32 位）上遇到的过时通知区域图标问题。

改编自上面@Stephen Klancher 的代码是（请注意，这可能仅适用于Windows XP/2003，它实现了我的目的）：

```
#include <windows.h>

#define FW(x,y) FindWindowEx(x, NULL, y, "")

int main ()
{

    HWND hNotificationArea;
    RECT r;

    //WinXP
    // technique found at:
    // https://stackoverflow.com/questions/74723/can-you-send-a-signal-to-windows-explorer-to-make-it-refresh-the-systray-icons#18038441
    GetClientRect(
        hNotificationArea = FindWindowEx(
            FW(FW(FW(NULL, "Shell_TrayWnd"), "TrayNotifyWnd"), "SysPager"),
            NULL,
            "ToolbarWindow32",
            "Notification Area"),
        &r);

    for (LONG x = 0; x < r.right; x += 5)
        for (LONG y = 0; y < r.bottom; y += 5)
            SendMessage(
                hNotificationArea,
                WM_MOUSEMOVE,
                0,
                (y << 16) + x);

  return 0;

} 
```

# deployment - 将 VSTO 项目部署到服务器

> ID：74728
> 
> 赞同：1
> 
> 时间：2008-09-16T17:19:33.237
> 
> 标签：deployment, ms-office, vsto

如果没有安装office，是否可以使用vsto放置应用程序？似乎不是这样，但我想知道是否有人有解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T23:02:03.507

VSTO 封装了 Office 的自动化接口。办公室是在幕后工作，所以必须安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-04T13:16:26.697

只是为了和Web Office Extensions相比，它是否也需要在服务器上安装Office？

# ruby - 使用哪个，eruby 还是 erb？

> ID：74782
> 
> 赞同：5
> 
> 时间：2008-09-16T17:24:28.967
> 
> 标签：ruby, erb, eruby

eruby 和 erb 和有什么不一样？是什么因素促使我选择其中一个？

我的应用程序正在为网络设备（路由器、负载平衡器、防火墙等）生成配置文件。我的计划是模板化配置文件，在源文件中使用嵌入式 ruby​​（通过 eruby 或 erb）来执行诸如迭代生成路由器的所有接口配置块之类的事情（这些块都非常相似，仅在标签上有所不同和 IP 地址）。例如，我可能有一个这样的配置模板文件：

```
hostname sample-router
<%=
r = String.new;
[
    ["GigabitEthernet1/1", "10.5.16.1"],
    ["GigabitEthernet1/2", "10.5.17.1"],
    ["GigabitEthernet1/3", "10.5.18.1"]
].each { |tuple|
    r << "interface #{tuple[0]}\n"
    r << "    ip address #{tuple[1]} netmask 255.255.255.0\n"
}
r.chomp
%>
logging 10.5.16.26 
```

当通过嵌入式 ruby​​ 解释器（erb 或 eruby）运行时，会产生以下输出：

```
hostname sample-router
interface GigabitEthernet1/1
    ip address 10.5.16.1 netmask 255.255.255.0
interface GigabitEthernet1/2
    ip address 10.5.17.1 netmask 255.255.255.0
interface GigabitEthernet1/3
    ip address 10.5.18.1 netmask 255.255.255.0
logging 10.5.16.26 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T17:27:51.640

没关系，两者都是一样的。erb 是纯 ruby​​，eruby 是用 C 编写的，所以它有点快。

erubis（第三个）是纯红宝石，比上面列出的两个都快。但我怀疑它的速度是你的瓶颈，所以只需使用 erb。它是 Ruby 标准库的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T17:29:41.213

Eruby 是一个外部可执行文件，而 erb 是 Ruby 中的一个库。如果您想要独立处理您的模板文件（例如快速和肮脏的 PHP 替换），您将使用前者，如果您需要在其他 Ruby 脚本的上下文中处理它们，则使用后者。使用 ERB 更常见，因为它更灵活，但我承认我曾涉足 eruby`.rhtml`为快速的小型实用程序网站执行文件而感到内疚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T09:51:39.013

我正在使用 erb 做类似的事情，性能对我来说很好。

正如 Jordi 所说，这取决于你想在什么环境中运行它——如果你真的要使用你列出的模板，eruby 可能会更好，但我猜你实际上会通过模板的变量，在这种情况下你需要 erb.

仅供参考，使用 erb 时，您需要将要从中获取变量的对象的绑定传递给它，如下所示：

```
device = Device.new
device.add_interface("GigabitEthernet1/1", "10.5.16.1")
device.add_interface("GigabitEthernet1/2", "10.5.17.1")

template = File.read("/path/to/your/template.erb")
config = ERB.new(template).result(device.binding) 
```

# javascript - 是否有任何项目可以替换 HTML 和当前的 javascript？

> ID：74786
> 
> 赞同：1
> 
> 时间：2008-09-16T17:25:06.763
> 
> 标签：javascript, html, ajax, flash, silverlight

Google 创建了协议缓冲区来替代庞大的 XML 数据转换方法。更快的 XML 处理还不够好。大多数网络已经成长为不同技术的大杂烩，这些技术已经集成在浏览器中工作或生成 html。JavaScript 与 HTML 是分开的。Flash 和 Silverlight 也加入了组合。我们可以使用我们拥有的工具完成工作，但我们能做得更好吗？
在您提到标准（这是一件好事）之前，请考虑一下进化变化与革命性变化。如果亨利福特问人们更好的出行方式，他们会说他们想要一匹更快的马。（Webkit 是一匹更快的马。）
我希望有一个项目，但我还没有读过它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T17:49:24.600

有各种各样的“替代品”，而且在网络存在之前就已经存在。谈论 HTML+JS 的“替代”的问题在于，谈话通常是出于对当前实现的一个或多个特定方面的挫败感：

*   “我讨厌缺少特定于演示文稿的标签，我们可以替换它吗？”
*   “我讨厌缺少语义标签，我们可以替换它吗？”
*   “我讨厌 CSS 盒子模型，我们可以替换它吗？”
*   “我讨厌低于标准的打印支持，我们可以更换它吗？”
*   “我讨厌获得炫目的动画所需的技巧，我们可以替换它吗？”
*   ...

有人想要一匹更快的马，有人想要一匹不知疲倦的马，有人想要一匹更强壮的马，有人想要一匹闻起来像燃烧石油的马，而不是，呃，马……把所有的想法放在一起，你*可能会*得到一辆 Model-T。 .. 或者你可能会从儒勒·凡尔纳/蒸汽朋克的噩梦中得到一些东西。

对于每一次带来更好结果的革命，都有产生流血的分数，然后是更多相同的分数。小心你的愿望...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T22:47:54.960

HTML+CSS+JS 将被 HTML+CSS+SVG+JS 取代，后者将被更现代的前者取代，有时还会添加一些新的东西。今天的 Web 技术与 10 年前的 Web 技术大不相同。你可以期待十年后的风景仍然会有所不同。

看看阿尔法极客的样子。嗯，他们都在关注带有大量 Javascript 和 CSS 的 REST 设计。

微软、Adobe、Sun等推广的各种“网络替代”技术之所以出现，只是因为这些公司希望让人们重新陷入锁定状态。祈祷他们不会成功。

Web 技术本身并不是“大杂烩”。大杂烩方面来自具有自己的错误和怪癖的多个实现。换句话说，它来自在竞争激烈的市场中实施的开放格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T22:14:01.373

因此，您正在寻找的是网络技术的范式转变。总是很难想象它会是什么样子——也许新技术将成为一种更身临其境的体验，结合更多的感官，而不仅仅是视觉和声音（触摸是一​​个很好的候选者），以及允许全方位运动交互的东西，而不是然后是 2D 的“指向并单击”鼠标界面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T17:55:47.890

You mentioned two alternatives already: **Silverlight** and **Flash**. It's safe to assume that ~95% people have Flash Player installed; Silverlight has also seen quite good adoption in this short amount of time.

But jumping on the eye-candy bandwagon isn't necessarily going to make your site better. There will be issues with accessibility, search engines not being to properly index your content, users not being to bookmark pages they want to get back to. Rich graphics pages, although vector, take more to load and can often turn out just annoying (where the goal was visual appeal, the opposite happened). All these things can be worked around or even fixed, but it takes much more resources compared to using standards.

All these things would apply even if there was some new technology that we *"haven't read of"*.

HTTP is as slow as network connection is, not by poor design. It's actually very efficient. HTML processing is also blazing fast, considering browsers performed well enough for people using them even on sites with terrible, fat table-based markup. JavaScript scene is looking very bright; there is increased attention on the new version of the specs, multiple implementations, incredible speed advantages in modern browsers over the course of last year. And don't think only WebKit is fast -- Opera and Mozilla have never fallen behind.

If you observe what was happening on the Internet in the last 20 years, you would have noticed that proprietary, vendor-dictated technologies eventually got pushed out by open standards. The only reason Flash Player survived was that JavaScript and open video codecs needed some time to get developed. Now that they are here, I think the same thing is going to happen all over again.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T18:06:56.523

您可能对[Sun 的 Lively](http://research.sun.com/projects/lively/)感兴趣。

可能还会有更多编译为 HTML+JavaScript 的工具，因此您不必直接处理它们（如 GWT）。还有一些项目尝试编译其他语言以在浏览器中工作（如[HotRuby](http://hotruby.yukoba.jp/)）。

# c - 有没有办法让我的二进制文件对 Linux 中的一些全局热键做出反应？

> ID：74790
> 
> 赞同：2
> 
> 时间：2008-09-16T17:25:27.870
> 
> 标签：c, linux, hotkeys

是否可以监听某个热键（例如：）`Ctrl``-``I`然后执行特定操作？我的应用程序是用 C 编写的，只能在 Linux 上运行，并且没有 GUI。是否有任何图书馆可以帮助完成此类任务？

编辑：例如，amarok 具有全局快捷方式，因此例如，如果您将键组合映射到操作（比如说和） `Ctrl``-``+`，您可以在按下键时执行该操作。如果我要映射到音量增加动作，每次按下音量应该增加一定量。`Ctrl``+``Ctrl``-``+``ctrl``-``+`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T17:46:19.397

您的热键需要多全球化？对于 X 会话来说，它们是全球性的就足够了吗？在这种情况下，您应该能够打开 Xlib 连接并监听您需要的事件。

通常 X 中的键盘事件被传递到当前具有焦点的窗口，并向上传播直到它们被处理。显然这不是我们想要的。我们需要在任何其他窗口访问它之前处理该事件。我们需要使用热键的键码和修饰符在根窗口上调用[XGrabKey来完成此操作。](http://tronche.com/gui/x/xlib/input/XGrabKey.html)

我在[这里](http://ubuntuforums.org/showpost.php?p=5419687&postcount=1)找到了一个很好的例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T18:08:11.183

我认为[smoofra](https://stackoverflow.com/questions/74790/is-there-a-way-for-my-binary-to-react-to-some-global-hotkeys-in-linux#74988)在这里是正确的；您正在寻找使用 X 注册一个全局热键，以便您可以拦截按键并采取适当的措施。 [Xlib](http://tronche.com/gui/x/xlib/)可能是你想要的，我认为[XGrabKey](http://tronche.com/gui/x/xlib/input/XGrabKey.html)是函数。

恐怕不容易学；我确实找到了这个看起来很有用的例子：[TinyWM](http://incise.org/tinywm.html)。我还找到了一个使用 Java/JNI 的[示例](http://ubuntuforums.org/showthread.php?p=5787060)（访问相同的底层 Xlib 函数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T18:31:14.110

您应该查看[xbindkeys](http://hocwp.free.fr/xbindkeys/xbindkeys.html)的源代码。

Xlib 编程相当晦涩难懂，文档很难找到，并且存在一些微妙的可移植性问题。你最好复制一些久经考验的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T17:50:11.883

一种方法是让您的应用程序在某个端口或套接字文件上侦听传入请求。

然后，您可以编写一个连接到该端口或套接字文件并将命令发送到正在运行的应用程序的小型客户端应用程序。

然后，您可以配置窗口管理器以绑定某些组合键来启动您的小型客户端应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T17:46:23.530

在 UNIX 中，您可以通过**终端**访问命令行 shell 。这可以追溯到人们通过直接连接到机器的终端（例如通过串行电缆）访问他们的大型共享计算机的时代。

事实上，“xterm”程序或您在 UNIX 机器上使用的任何衍生程序都被恰当地称为**终端仿真器**- 它的行为（从您和操作系统的角度来看）很像那些老式的终端机。

这使得以有趣的方式处理输入有点复杂，因为有许多不同类型的终端，并且您的 UNIX 系统必须了解每种类型的功能。这些功能传统上存储在**termcap**文件中，我认为更现代的系统使用**terminfo**代替。尝试

```
man 5 terminfo 
```

在 Linux 系统上了解更多信息。

现在，好消息是您不需要对终端功能等做太多的麻烦，就可以拥有一个命令行应用程序，它可以通过输入或窗口功能来做有趣的事情。有一个图书馆，**curses**，会有所帮助。抬头

```
man 3 ncurses 
```

在您的 Linux 系统上获取更多信息。您可能会找到一个不错的在线使用诅咒教程。

# java - 是什么导致速度 Template.merge() 失败？如何避免它？

> ID：74818
> 
> 赞同：2
> 
> 时间：2008-09-16T17:29:01.530
> 
> 标签：java, velocity

我们的团队一直在遇到速度模板反复出现的问题。在渲染时，有些人会抛出带有消息“Template.merge() 失败 - 无法渲染速度模板，'/template.vm'”的 RuntimeException。我们无法重现该问题，并且网络上的文档非常不足。该问题并非始终可重现 - 其渲染有时会导致错误的相同模板也可以在其他时间无问题地显示。Template 类的[源代码](http://www.docjar.com/docs/api/org/apache/velocity/Template.html)也没什么帮助。先感谢您。

* * *

编辑：根据 Nathan Bubna 的回复，我需要澄清我们使用的是 Velocity 1.4 版。

* * *

编辑：由于有人指出堆栈跟踪是有益的，所以这里是：

2008-09-15 11:07:57,336 错误速度 - Template.merge() 失败。文档为空，很可能是由于解析错误。2008-09-15 11:07:57,336 错误 VelocityResult - 无法呈现速度模板，'/search/[template-redacted].vm' java.lang.Exception: Template.merge() 失败。文档为空，很可能是由于解析错误。在 org.apache.velocity.Template.merge(Template.java:277) 在 com.opensymphony.webwork.dispatcher.VelocityResult.doExecute(VelocityResult.java:91) 在 com.opensymphony.webwork.dispatcher.WebWorkResultSupport.execute(WebWorkResultSupport .java:109) 在 com.opensymphony.xwork.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:258) 在 com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:182) 在 com.opensymphony.xwork.interceptor。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-17T22:00:23.167

您使用的是什么版本的 Velocity？旧版本中有一些竞争条件导致了这种情况。大多数在 Velocity 1.5 版本中被压扁。虽然我个人建议使用 Velocity 1.6-beta1。它极大地提高了性能（内存和速度），并修复了许多没有进入 1.5 的小错误。

编辑：既然您说您使用的是 1.4，那么，是的，我确定这是我们修复的竞争条件。请考虑升级。1.6 绝对是您最好的选择，因为它修复了您的错误并提高了性能。1.6 final应该很快就出来了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-28T00:54:22.757

我现在正在我们的网站上处理相同的错误。

这似乎是一种竞争条件：我可以使用多个进程获取同一页面来一致地重现它，但如果我序列化请求，则永远不会重现它。

我正在使用velocity-1.5；我尝试迁移到 1.6-beta1 但看到其他错误。

**已解决**：请参阅下面的评论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T21:47:41.657

由于源代码中的注释已经说明这不应该发生，我认为这是模板软件中的一个错误。向编写它的人提交错误报告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T23:42:04.190

您需要获取 RuntimeException 及其原因的完整堆栈跟踪。

请编辑您的答案以添加该信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-23T02:36:47.720

我已经通过电子邮件向代码的作者发送了电子邮件，看看他们是否可以提供一些见解。我会确保分享我学到的任何东西。

# linux - 我在哪里可以找到 vim 增强的资源？

> ID：74821
> 
> 赞同：0
> 
> 时间：2008-09-16T17:29:27.160
> 
> 标签：linux, vim, editor, vi

我最近安装了 vim-enhanced ，但找不到任何与之相关的文章/教程。我只能找到一个简要描述它的新功能的页面，以及几个可供下载的 RPM。它究竟能为常规 vi/vim 所不能提供的脚本语言提供什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T17:34:10.080

据此[，](http://linux.maruhn.com/sec/vim-enhanced.html) vim-enhanced 只是 vim“编译了 perl、python、tcl 和 cscope 选项”。您应该能够在[文档](http://vimdoc.sourceforge.net/htmldoc/help.html)中找到有关这些编译选项的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T17:38:36.450

如果您是 vim 新手，请运行 vimtutor

您可能还想从阅读 :help 和学习如何使用帮助系统开始。特别是 :help topic (control-D) 和 :help topic （如果你有 :set wildmenu 会更有用）将帮助你在 vim 的内置帮助中找到主题（这明显优于尝试谷歌搜索的东西）。如果所有其他方法都失败了，还有 :helpgrep 主题，然后使用 quickfix 缓冲区查看命中（:cn、:cp、:cl 等）。

Freenode IRC 网络上的#vim 频道也是获得帮助的好地方。

# macos - 如何在 Mac OS X 上以 root 身份运行脚本？

> ID：74829
> 
> 赞同：38
> 
> 时间：2008-09-16T17:30:20.730
> 
> 标签：macos, terminal

我应该在 Mac OS X 终端上键入什么来以 root 身份运行脚本？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2008-09-16T17:31:16.250

与任何基于 unix 的环境一样，您可以使用以下[`sudo`](http://xkcd.com/149/)命令：

```
$ sudo script-name 
```

它会询问您的密码（您自己的密码，而不是单独的`root`密码）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2011-04-11T14:07:57.257

或者您可以通过键入 sudo -s 来访问根终端

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T17:49:29.717

为了让 sudo 按照每个人的建议工作，您需要在`admin`小组中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T17:31:10.010

sudo ./*脚本名*

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-16T17:32:43.843

须藤 ./脚本名

sudo bash 基本上会将您切换到以 root 身份运行 shell，尽管最好尽可能少地保持 su。

# bash - Bash 还是 KornShell (ksh)？

> ID：74844
> 
> 赞同：67
> 
> 时间：2008-09-16T17:32:30.413
> 
> 标签：bash, shell, unix, scripting, ksh

我对 *nix 并不陌生，但是最近我在提示符下花了很多时间。我的问题是使用 KornShell (ksh) 或 Bash Shell 有什么好处？使用其中一个的陷阱在哪里？

希望从用户的角度来理解，而不是纯粹的脚本。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2011-08-08T16:53:12.023

Kornshell 和 Bash 之间的差异很小。一个比另一个有一定的优势，但差异很小：

*   BASH 更容易设置显示当前目录的提示。在 Kornshell 中做同样的事情是 hackish。
*   Kornshell 有关联数组，而 BASH 没有。现在，我最后一次使用关联数组是……让我想想……从来没有。
*   Kornshell 更好地处理循环语法。您通常可以在 Kornshell 循环中设置一个值，并在循环后使其可用。
*   Bash 以更简洁的方式处理从管道中获取退出代码。
*   Kornshell 具有比命令`print`更好的`echo`命令。
*   Bash 有制表符补全。在旧版本中
*   Kornshell 具有`r`历史命令，可让我快速重新运行旧命令。
*   Kornshell 具有在您的目录和 CD`cd old new`中替换为的语法。当您在一个名为的目录中并且需要 cd 到In Kornshell 时，这很方便，您可以简单地完成并完成它。在 BASH 中，您必须.`old``new``/foo/bar/barfoo/one/bar/bar/foo/bar``/foo/bar/barfoo/two/bar/bar/foo/bar``cd one two``cd ../../../../../two/bar/bar/foo/bar`

我是一个老 Kornshell 人，因为我在 1990 年代学习了 Unix，而那是当时选择的 shell。我可以使用 Bash，但有时我会对此感到沮丧，因为习惯上我会使用 Kornshell 具有的一些小功能，而 BASH 没有而且它不起作用。因此，只要有可能，我都会将 Kornshell 设置为我的默认值。

但是，我要告诉你学习 BASH。Bash 现在在大多数 Unix 系统和 Linux 上都实现了，而且有比 Kornshell 更多的资源可用于学习 BASH 和获得帮助。如果你需要在 BASH 中做一些奇特的事情，你可以继续 Stackoverflow，发布你的问题，几分钟内你就会得到十几个答案——其中一些甚至是正确的！

如果您有 Kornshell 问题并将其发布在 Stackoverflow 上，您将不得不等待像我这样的资深黑客从午睡中醒来，然后才能得到答案。而且，如果那天他们在敬老院里提供布丁，请忘记得到任何回应。

BASH 只是现在的首选外壳，所以如果你必须学习一些东西，不妨选择流行的东西。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2008-09-16T20:43:39.890

重击。

各种 UNIX 和 Linux 实现具有各种不同的 ksh 源代码级别实现，其中一些是真正的 ksh，其中一些是 pdksh 实现，其中一些只是指向具有“ksh”特性的其他 shell 的符号链接。这可能会导致执行行为出现奇怪的差异。

至少对于 bash，您可以确定它是一个单一的代码库，您所需要担心的只是安装了 bash 的（通常是最低的）版本。在几乎所有现代（和不那么现代）的 UNIX 上编写了大量脚本后，根据我的经验，对 bash 的编程更加可靠一致。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2011-04-02T20:24:45.097

我是一名 korn-shell 资深人士，所以要知道我是从这个角度说话的。

但是，我一直对 Bourne shell、ksh88 和 ksh93 感到满意，而且我最了解哪些功能支持哪些功能。（我应该在这里跳过 ksh88，因为它不再广泛分布。）

对于交互式使用，请选择适合您需要的任何内容。实验。我喜欢能够使用相同的 shell 进行交互使用和编程。

我从 SVR2 上的 ksh88 到 tcsh，再到 ksh88sun（增加了重要的国际化支持）和 ksh93。我尝试过 bash，但我讨厌它，因为它使我的历史变得平淡。然后我发现`shopt -s lithist`，一切都很好。（该`lithist`选项可确保在您的命令历史记录中保留换行符。）

对于 shell 编程，如果您想要一种一致的编程语言、良好的 POSIX 一致性和良好的性能，我会认真推荐 ksh93，因为许多常见的 unix 命令都可以作为内置函数使用。

如果您想要便携性，请至少使用两者。并确保你有一个好的测试套件。

贝壳之间有许多细微的差别。例如，考虑从管道读取：

```
b=42 && echo one two three four |
    read a b junk && echo $b 
```

这会在不同的shell中产生不同的结果。korn-shell 从后到前运行管道；管道中的最后一个元素在当前进程中运行。Bash 直到 v4.x 才支持这种有用的行为，即便如此，它也不是默认的。

另一个说明一致性的例子：`echo`命令本身，由于 BSD 和 SYSV unix 之间的分裂而过时，并且每个都引入了自己的不打印换行符（和其他行为）的约定。这个结果仍然可以在许多“配置”脚本中看到。

Ksh 对此采取了激进的方法 - 并引入了`print`实际上支持这两种方法的命令（`-n`来自 BSD 的选项和来自 SYSV 的尾随`\c`特殊字符）

但是，对于严肃的系统编程，我建议使用 shell 以外的东西，例如 python、perl。或者更进一步，使用像 puppet 这样的平台 - 它允许您通过良好的审计来观察和纠正整个系统集群的状态。

Shell 编程就像在未知的水域中游泳，或者更糟。

任何语言的编程都需要熟悉其语法、接口和行为。Shell 编程没有什么不同。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-16T17:59:04.140

这有点像 Unix 与 Linux 的战斗。大多数（如果不是全部）Linux 发行版都安装了 bash 并且 ksh 是可选的。大多数 Unix 系统，如 Solaris、AIX 和 HPUX，都默认使用 ksh。

就我个人而言，我总是使用 ksh，我喜欢 vi 完成，而且我几乎使用 Solaris 来完成所有事情。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-16T17:46:34.450

我没有使用 ksh 的经验，但我使用过 bash 和 zsh。我更喜欢 zsh 而不是 bash，因为它支持非常强大的文件通配符、变量扩展修饰符和更快的制表符完成。

这是一个快速介绍： http: [//friedcpu.wordpress.com/2007/07/24/zsh-the-last-shell-youll-ever-need/](http://friedcpu.wordpress.com/2007/07/24/zsh-the-last-shell-youll-ever-need/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-16T20:39:17.187

对于脚本，我总是使用*ksh*，因为它可以平滑[gotchas](https://stackoverflow.com/questions/2732/shell-scripting-input-redirection-oddities#12412)。

但我发现*bash*更适合交互式使用。对我来说，*emacs*键绑定和制表符完成是主要的好处。*但这主要是习惯的力量，而不是ksh*的任何技术问题。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-16T17:35:27.817

一方面，bash 具有制表符补全功能。仅此一项就足以让我更喜欢它而不是 ksh。

[Z shell](http://zsh.org/)将 ksh 的独特功能与 bash 提供的好东西很好地结合在一起，此外还有更多的东西。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-16T17:41:01.500

@foxxtrot

实际上，标准 shell 是 Bourne shell ( `sh`)。`/bin/sh`在 Linux 上实际上是`bash`.，但如果您的目标是跨平台脚本，您最好坚持原始 Bourne shell 的功能或将其编写为`perl`.

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-16T17:56:18.233

我的回答是“选择一个并学习如何使用它”。它们都是不错的贝壳​​；bash 可能有更多的花里胡哨，但它们都具有您想要的基本功能。如今，bash 更加普遍可用。如果您一直在使用 Linux，请坚持使用它。

如果您正在编程，尝试坚持简单的 'sh' 以实现可移植性是一种很好的做法，但是随着 bash 的普及，这些天来，一些建议可能有点过时了。

学习如何使用完成和你的 shell 历史；偶尔阅读手册页并尝试学习一些新东西。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-09-02T04:39:23.033

ksh 在大多数 UNIX 系统中都可用，它符合标准、设计清晰、功能完善。我认为书籍，ksh 中的帮助已经足够清晰，尤其是 O'Reilly 的书。Bash 是一个群众。我只在家里将它作为 Linux 的 root 登录 shell。

对于交互式使用，我更喜欢 Linux/UNIX 上的 zsh。我在 zsh 中运行脚本，但我将在 AIX ksh 中测试我的大部分脚本和函数。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-09-16T17:35:00.670

Bash 是基准，但这主要是因为您可以合理地确定它已安装在每个 *nix 上。如果您打算分发脚本，请使用 Bash。

不幸的是，我无法真正解决 shell 之间的实际编程差异。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2008-09-16T18:05:04.313

*Bash*是 Linux 的标准。
我的经验是 bash 比 ksh 或 csh 更容易找到帮助。

# php - 开发时推荐的 error_reporting() 设置是什么？E_STRICT 呢？

> ID：74847
> 
> 赞同：29
> 
> 时间：2008-09-16T17:32:45.717
> 
> 标签：php, error-reporting

通常，我`E_ALL`会查看 PHP 可能对我的代码所说的任何内容，以尝试改进它。

我只是注意到一个错误常量`E_STRICT`，但从未使用或听说过它，这是用于开发的好设置吗？手册说：

> 运行时通知。启用让 PHP 建议对您的代码进行更改，这将确保您的代码的最佳互操作性和前向兼容性。

所以我想知道我是使用最好的`error_reporting`水平`E_ALL`还是最好的水平`E_STRICT`？还是我还没有学习其他组合？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-09-16T17:39:46.307

在 PHP 5 中， 所涵盖的东西`E_STRICT`并没有被 涵盖`E_ALL`，因此要获得最多的信息，您需要将它们组合起来：

```
 error_reporting(E_ALL | E_STRICT); 
```

在 PHP 5.4 中，`E_STRICT`将包含`E_ALL`在`E_ALL`.

你也可以使用

```
error_reporting(-1); 
```

这将始终启用*所有*错误。哪个在语义上更正确：

```
error_reporting(~0); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-16T18:22:44.130

在 php.ini 中使用以下内容：

```
error_reporting = E_ALL | E_STRICT 
```

你也应该安装[Xdebug](http://xdebug.org "Xdebug")，它可以突出你在炫目的色彩中的错误并打印有用的详细信息。

永远不要让代码中出现任何错误或通知，即使它是无害的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-16T17:38:55.623

在我看来，你在开发阶段设置的错误报告级别越高越好。

在实时环境中，您需要稍微（但只是稍微）减少的集合，但您希望它们记录在用户看不到的地方（我更喜欢`syslog`）。

[http://php.net/error_reporting](http://php.net/error_reporting)

`E_ALL | E_STRICT`用于 5.2.0 之前的 PHP 开发。

5.2 介绍`E_RECOVERABLE_ERROR`和 5.3 介绍`E_DEPRECATED`和`E_USER_DEPRECATED`。如果您正在运行其中一个版本，您可能需要打开它们。

如果您想使用幻数，您可以将`error_reporting`值设置为某个相当高的值`2^n-1`- 比如说 ，`16777215`这实际上只会打开 . 之间的所有位`1..n`。但我不认为使用幻数是一个好主意......

`E_ALL`在我看来，PHP并不是真正的全部，所以有点丢球了。但显然它将在 PHP 6 中修复...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T17:39:55.217

在较新的 PHP 版本中，E_ALL 包含更多类别的错误。自 PHP 5.3 起，E_ALL 包括*除*E_STRICT 之外的所有内容。据称在 PHP 6 中它甚至会包含这些内容。这是一个很好的提示：最好看到更多错误消息而不是更少。

E_ALL 中包含的内容记录在在线手册的[PHP 预定义常量](http://uk.php.net/manual/en/errorfunc.constants.php)页面中。

就我个人而言，我认为如果你使用 E_STRICT 并不重要。它当然不会伤害您，尤其是因为它可能会阻止您编写在 PHP 的未来版本中被破坏的可能性很小的脚本。另一方面，在某些情况下，严格的信息可能过于嘈杂，尤其是在您赶时间的情况下。我建议您默认打开它，并在它变得烦人时将其关闭。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-08-29T07:44:58.233

您可以使用`error_reporting = -1`
它将始终由所有位组成（即使它们不在 E_ALL 中）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T17:42:57.347

根据您对此代码的长期支持计划，`E_STRICT`启用调试可能会帮助您的代码在遥远的将来继续工作，但对于日常使用而言，这可能是多余的。有两件重要的事情`E_STRICT`要记住：

1.  [根据手册](http://us3.php.net/error_reporting)，大多数`E_STRICT`错误是在编译时生成的，而不是运行时。如果您将错误级别提高到`E_ALL`代码中（而不是通过*php.ini*），您可能永远不会看到`E_STRICT`错误。
2.  `E_STRICT`包含在`E_ALL`PHP 6 中，但不包含在 PHP 5 中。如果您将服务器升级到 PHP6，并`E_ALL`按照上面 #1 中的说明进行配置，您将开始看到`E_STRICT`错误，而无需您进行任何其他更改。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T18:20:38.707

严格来说，不是错误报告，我**强烈**建议使用任何自动显示解析错误和常见故障（例如，条件分配）的 IDE。

Zend Studio for Eclipse 默认启用此功能，自从我开始使用它以来，它对我在错误发生之前发现有**很大帮助。**

例如，我有这段代码，我在`$GLOBALS`变量中缓存了一些数据，但我无意中写了`$_GLOBALS`。数据从来没有被缓存，我也不知道 Zend 是否没有告诉我：“嘿，这个`$_GLOBALS`东西只出现一次，那可能是一个错误”。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-09-16T17:34:45.493

ini_set("display_errors","2"); 错误报告（E_ALL）；

# svn - 如何让 subversion 从其他存储库中签出项目？

> ID：74865
> 
> 赞同：3
> 
> 时间：2008-09-16T17:34:46.023
> 
> 标签：svn, tortoisesvn, svn-externals

我最近正在处理一个颠覆项目，该项目不仅从我正在使用的存储库中签出代码，而且还从不同服务器上的单独存储库中签出代码。

如何配置我的存储库来执行此操作？

我在 Linux 上使用 subversion 客户端版本 1.3.2，我还可以在 Windows 中访问 TortoiseSVN 版本 1.4.8（基于 svn 版本 1.4.6）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-16T17:36:19.890

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T17:37:27.607

试试 svn:externals

[http://svnbook.red-bean.com/en/1.0/ch07s03.html](http://svnbook.red-bean.com/en/1.0/ch07s03.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T17:37:10.387

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T17:38:01.273

[在文档](http://svnbook.red-bean.com/en/1.0/ch07s03.html)中搜索 svn:externals 属性。

# xml - 有什么工具可以从 XML 实例文档生成 XSD 模式？

> ID：74879
> 
> 赞同：149
> 
> 时间：2008-09-16T17:36:26.940
> 
> 标签：xml, xsd, schema, generator

我正在寻找一种工具，它将采用 XML 实例文档并输出相应的 XSD 模式。

我当然认识到，与手动创建模式相比，生成的 XSD 模式将受到限制（它可能不会处理可选或重复元素或数据约束），但它至少可以作为一个快速起点。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2008-09-16T17:41:19.923

[Microsoft XSD 推理工具](https://msdn.microsoft.com/en-us/library/x6c1kb0s(v=vs.110).aspx)是一个很好的免费解决方案。许多 XML 编辑工具，例如 XmlSpy（@Garth Gilmour 提到）或 OxygenXML Editor 也具有该功能。不过，它们相当昂贵。BizTalk Server 也有一个 XSD 推断工具。

编辑：我刚刚发现了 .net [XmlSchemaInference](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemainference.aspx)类，所以如果你使用的是 .net，你应该考虑

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2008-10-08T18:12:58.667

您可以使用开源和跨平台选项：来自[Apache 的 XMLBeans 的](http://xmlbeans.apache.org/)inst2xsd 。我发现它非常有用且简单。

只需下载、解压缩和播放（它需要 Java）。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2009-08-06T02:09:33.360

[董](http://www.thaiopensource.com/relaxng/trang.html)里是这里的最佳选择。开源和跨平台（虽然需要 Java）

来自董里网站：

> Trang 在 XML 的不同模式语言之间进行转换。它支持以下语言
> 
> *   RELAX NG（XML 语法）
> *   RELAX NG 紧凑语法
> *   XML 1.0 DTD
> *   W3C XML 模式
> 
> 以任何受支持的模式语言编写的模式可以转换为任何其他受支持的模式语言，但 W3C XML 模式仅支持输出，不支持输入。
> 
> **Trang 还可以从一个或多个示例 XML 文档推断模式。**

[下载链接](https://github.com/relaxng/jing-trang)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-06-25T13:17:35.887

在 VS2010 中，如果您将 XML 文件加载到编辑器中，请单击 XML 菜单 >> Create Schema。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2011-12-06T09:53:18.713

[Github](https://github.com/kore/XML-Schema-learner)[**`XML schema learner`**](http://kore-nordmann.de/blog/0104_generating_xml_schemas_from_xml.html)上也有。

它可以获取**多个 xml 文件**并**从所有这些文件中提取一个公共 XSD**。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2008-09-17T23:29:11.170

如果您安装了 .Net，则默认情况下已经包含一个生成 XSD 模式和类的工具。
对我来说，XSD 工具安装在以下结构下。这可能因您的安装目录而异。

```
C:\Program Files\Microsoft Visual Studio 8\VC>xsd
Microsoft (R) Xml Schemas/DataTypes support utility
[Microsoft (R) .NET Framework, Version 2.0.50727.42]
Copyright (C) Microsoft Corporation. All rights reserved.

xsd.exe -
   Utility to generate schema or class files from given source.

xsd.exe <schema>.xsd /classes|dataset [/e:] [/l:] [/n:] [/o:] [/s] [/uri:]
xsd.exe <assembly>.dll|.exe [/outputdir:] [/type: [...]]
xsd.exe <instance>.xml [/outputdir:]
xsd.exe <schema>.xdr [/outputdir:] 
```

通常，此工具生成的类和模式工作得很好，特别是如果您打算在 .Net 语言中使用它们

我通常采用我所追求的 XML 文档，通过带有`/o:<your path>`标志的 XSD 工具将其推送以生成模式 (xsd)，然后使用`/classes /L:VB (or CS) /o:<your path>`标志通过工具将 xsd 文件推回以获取我可以导入和使用的类在我的日常 .Net 项目中

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-09-17T06:37:54.317

如果你想要的只是 XSD，LiquidXML 有一个免费的 XSD 版本，它有一个 GUI，所以你可以根据需要调整 XSD。无论如何，现在我自己编写了自己的 XSD，但这一切都归功于这个应用程序。

[http://www.liquid-technologies.com/](http://www.liquid-technologies.com/)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-09-17T23:31:16.890

如果您在 Java 世界中工作 - *intelliJ idea*还具有广泛的 xml 支持，包括 xsd 生成和来自 xsd 生成的示例 xml，并且您可以使用插件获得 xslt 调试器。- 如果您打算之后使用诸如 jaxb 之类的工具，那就太好了。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-16T17:41:31.123

[Altova XmlSpy 做得很好 - 你可以在这里](http://www.altova.com/products/xmlspy/dtd_editor.html)找到概述

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-08-03T14:59:53.093

这是一个旧线程，但我认为发布此链接可能会很有用：刚刚找到这个工具： [xsd-gen Generate XML Schema from XML](https://github.com/wiztools/xsd-gen)

它只是做了我需要的。

# c# - 委派任务并在完成时收到通知（在 C# 中）

> ID：74880
> 
> 赞同：9
> 
> 时间：2008-09-16T17:36:36.283
> 
> 标签：c#, delegates, notifications

从概念上讲，我想完成以下任务，但在理解如何在 C# 中正确编码时遇到了麻烦：

```
 SomeMethod { // Member of AClass{}
    DoSomething;
    Start WorkerMethod() from BClass in another thread;
    DoSomethingElse;
} 
```

然后，当 WorkerMethod() 完成时，运行：

```
 void SomeOtherMethod()  // Also member of AClass{}
{ ... } 
```

任何人都可以举个例子吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-16T17:41:52.870

[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类被添加到 .NET 2.0 正是为了这个目的。

简而言之，您可以：

```
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += delegate { myBClass.DoHardWork(); }
worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(SomeOtherMethod);
worker.RunWorkerAsync(); 
```

如果需要，您还可以添加花哨的东西，例如取消和进度报告 :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T19:01:24.833

在 .Net 2 中引入了 BackgroundWorker，这使得运行异步操作变得非常容易：

```
BackgroundWorker bw = new BackgroundWorker { WorkerReportsProgress = true };

bw.DoWork += (sender, e) => 
   {
       //what happens here must not touch the form
       //as it's in a different thread
   };

bw.ProgressChanged += ( sender, e ) =>
   {
       //update progress bars here
   };

bw.RunWorkerCompleted += (sender, e) => 
   {
       //now you're back in the UI thread you can update the form
       //remember to dispose of bw now
   };

worker.RunWorkerAsync(); 
```

在 .Net 1 中，您必须使用线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T18:34:45.973

您必须使用 AsyncCallBacks。您可以使用 AsyncCallBacks 指定方法的委托，然后指定在目标方法执行完成后调用的 CallBack 方法。

这是一个小示例，您自己运行并查看它。

类程序{

```
 public delegate void AsyncMethodCaller();

    public static void WorkerMethod()
    {
        Console.WriteLine("I am the first method that is called.");
        Thread.Sleep(5000);
        Console.WriteLine("Exiting from WorkerMethod.");
    }

    public static void SomeOtherMethod(IAsyncResult result)
    {
        Console.WriteLine("I am called after the Worker Method completes.");
    }

    static void Main(string[] args)
    {
        AsyncMethodCaller asyncCaller = new AsyncMethodCaller(WorkerMethod);
        AsyncCallback callBack = new AsyncCallback(SomeOtherMethod);
        IAsyncResult result = asyncCaller.BeginInvoke(callBack, null);
        Console.WriteLine("Worker method has been called.");
        Console.WriteLine("Waiting for all invocations to complete.");
        Console.Read();

    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T21:08:07.117

虽然这里有几种可能性，但我会使用委托，异步调用 using`BeginInvoke`方法。

**警告**：不要忘记始终调用`EndInvoke`以`IAsyncResult`避免最终的内存泄漏，如[本文所述](http://www.ondotnet.com/pub/a/dotnet/2003/02/24/asyncdelegates.html?page=2)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T17:39:33.033

查看 BackgroundWorker。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T18:03:29.823

使用异步委托：

```
// Method that does the real work
public int SomeMethod(int someInput)
{
Thread.Sleep(20);
Console.WriteLine(”Processed input : {0}”,someInput);
return someInput+1;
} 

// Method that will be called after work is complete
public void EndSomeOtherMethod(IAsyncResult result)
{
SomeMethodDelegate myDelegate = result.AsyncState as SomeMethodDelegate;
// obtain the result
int resultVal = myDelegate.EndInvoke(result);
Console.WriteLine(”Returned output : {0}”,resultVal);
}

// Define a delegate
delegate int SomeMethodDelegate(int someInput);
SomeMethodDelegate someMethodDelegate = SomeMethod;

// Call the method that does the real work
// Give the method name that must be called once the work is completed.
someMethodDelegate.BeginInvoke(10, // Input parameter to SomeMethod()
EndSomeOtherMethod, // Callback Method
someMethodDelegate); // AsyncState 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T17:52:48.977

好的，我不确定你想怎么做。从您的示例中，看起来 WorkerMethod 没有创建自己的线程来执行，但您想在另一个线程上调用该方法。

在这种情况下，创建一个调用 WorkerMethod 然后调用 SomeOtherMethod 的短工作方法，并将该方法排队到另一个线程上。然后当 WorkerMethod 完成时， SomeOtherMethod 被调用。例如：

```
public class AClass
{
    public void SomeMethod()
    {
        DoSomething();

        ThreadPool.QueueUserWorkItem(delegate(object state)
        {
            BClass.WorkerMethod();
            SomeOtherMethod();
        });

        DoSomethingElse();
    }

    private void SomeOtherMethod()
    {
        // handle the fact that WorkerMethod has completed. 
        // Note that this is called on the Worker Thread, not
        // the main thread.
    }
} 
```

# svn - 如何在 Windows 上编译 mod_dontdothat

> ID：74883
> 
> 赞同：2
> 
> 时间：2008-09-16T17:36:51.213
> 
> 标签：svn, apache

我似乎无法在 Windows 上编译 mod_dontdothat。有没有人设法做到这一点？

编辑：

我尝试根据网站上的自述文件编译文件，并尝试添加额外的库以减少链接错误。我已经安装了以下内容：

1.  阿帕奇 2.2.9
2.  视觉工作室 2008
3.  ActivePerl
4.  来自 ApacheLounge 的 apxs-win32
5.  Subversion 库和头文件

我运行以下命令行：

```
C:\Program Files\Apache Software Foundation\Apache2.2\bin>apxs -c -I ..\include\
svn_config.h -L ..\lib -LC:\Progra~1\Micros~1.0\VC\lib -l apr-1.lib -l aprutil-
1.lib -l svn_subr-1.lib -l libapr-1.lib -l libaprutil-1.lib -l libhttpd.lib -ll
ibsvn_subr-1.lib -l mod_dav.lib mod_dontdothat.c

```

然后我收到以下错误：

```
cl /nologo /MD /W3 /O2 /D WIN32 /D _WINDOWS /D NDEBUG -I"C:\PROGRA~1\APACHE~
1\Apache2.2\include" /I"..\include\svn_config.h" /c /Fomod_dontdothat.lo mod_d
ontdothat.c
mod_dontdothat.c
链接 kernel32.lib /nologo /subsystem:windows /dll /machine:I386 /libpath:"C:\PRO
GRA~1\APACHE~1\Apache2.2\lib" /out:mod_dontdothat.so /libpath:"..\lib" /libpat
h:"C:\Progra~1\Micros~1.0\VC\lib" apr-1.lib aprutil-1.lib svn_subr-1.lib libapr
-1.lib libaprutil-1.lib libhttpd.lib libsvn_subr-1.lib mod_dav.lib mod_dontdot
帽子.lo
   创建库 mod_dontdothat.lib 和对象 mod_dontdothat.exp
mod_dontdothat.lo：错误 LNK2019：未解析的外部符号 _dav_svn_split_uri
@32 在函数 _is_this_legal 中引用
svn_subr-1.lib(io.obj)：错误 LNK2001：未解析的外部符号 __imp__libint
l_dgettext
svn_subr-1.lib(subst.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__lib
intl_dgettext
svn_subr-1.lib(config_auth.obj) : 错误 LNK2001: 无法解析的外部符号 __im
p__libintl_dgettext
svn_subr-1.lib(time.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__libi
ntl_dgettext
svn_subr-1.lib(nls.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__libin
tl_dgettext
svn_subr-1.lib(dso.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__libin
tl_dgettext
svn_subr-1.lib(path.obj) : error LNK2001: unresolved external symbol __imp__libi
ntl_dgettext
svn_subr-1.lib(prompt.obj) : error LNK2001: unresolved external symbol __imp__li
bintl_dgettext
svn_subr-1.lib(error.obj) : error LNK2019: unresolved external symbol __imp__lib
函数 _print_error 中引用的 intl_dgettext
svn_subr-1.lib(config.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__li
bintl_dgettext
svn_subr-1.lib(utf.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__libin
tl_dgettext
svn_subr-1.lib(cmdline.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__l
ibintl_dgettext
svn_subr-1.lib(utf.obj) : error LNK2019: unresolved external symbol __imp__libin
函数 _fuzzy_escape 中引用的 tl_sprintf
svn_subr-1.lib(path.obj) : error LNK2001: unresolved external symbol __imp__libi
ntl_sprintf
svn_subr-1.lib(cmdline.obj) : 错误 LNK2019: 无法解析的外部符号 __imp__l
函数 _svn_cmdline_init 中引用的 ibintl_fprintf
svn_subr-1.lib(config_win.obj)：错误 LNK2019：未解析的外部符号 __imp
__SHGetFolderPathA@20 在函数 _svn_config__win_config_path 中引用
svn_subr-1.lib(config_win.obj)：错误 LNK2019：未解析的外部符号 __imp
__SHGetFolderPathW@20 在函数 _svn_config__win_config_path 中引用
svn_subr-1.lib(config_win.obj)：错误 LNK2019：未解析的外部符号 __imp
__RegCloseKey@4 在函数 _svn_config__parse_registry 中引用
svn_subr-1.lib(config_win.obj)：错误 LNK2019：未解析的外部符号 __imp
__RegEnumKeyExA@32 在函数 _svn_config__parse_registry 中引用
svn_subr-1.lib(config_win.obj)：错误 LNK2019：未解析的外部符号 __imp
__RegOpenKeyExA@20 在函数 _svn_config__parse_registry 中引用
svn_subr-1.lib(config_win.obj)：错误 LNK2019：未解析的外部符号 __imp
__RegQueryValueExA@24 在函数 _parse_section 中引用
svn_subr-1.lib(config_win.obj)：错误 LNK2019：未解析的外部符号 __imp
__RegEnumValueA@32 在函数 _parse_section 中引用
svn_subr-1.lib(win32_xlate.obj)：错误 LNK2019：未解析的外部符号 __im
p__CoUninitialize@0 在函数 _svn_subr__win32_xlate_open 中引用
svn_subr-1.lib(win32_xlate.obj)：错误 LNK2019：未解析的外部符号 __im
p__CoInitializeEx@8 在函数 _svn_subr__win32_xlate_open 中引用
svn_subr-1.lib(win32_xlate.obj)：错误 LNK2019：未解析的外部符号 __im
p__CoCreateInstance@20 在函数 _get_page_id_from_name 中引用
svn_subr-1.lib(nls.obj)：错误 LNK2019：未解析的外部符号 __imp__libin
函数 _svn_nls_init 中引用的 tl_bindtextdomain
svn_subr-1.lib(stream.obj)：错误 LNK2019：未解析的外部符号 _inflate
在函数 _read_handler_gz 中引用
svn_subr-1.lib(stream.obj)：错误 LNK2019：未解析的外部符号 _inflateI
nit_ 在函数 _read_handler_gz 中引用
svn_subr-1.lib(stream.obj)：错误 LNK2019：未解析的外部符号 _deflate
在函数 _write_handler_gz 中引用
svn_subr-1.lib(stream.obj)：错误 LNK2019：未解析的外部符号 _deflateI
nit_ 在函数 _write_handler_gz 中引用
svn_subr-1.lib(stream.obj)：错误 LNK2019：未解析的外部符号 _deflateE
nd 在函数 _close_handler_gz 中引用
svn_subr-1.lib(stream.obj)：错误 LNK2019：未解析的外部符号 _inflateE
nd 在函数 _close_handler_gz 中引用
mod_dontdothat.so : 致命错误 LNK1120: 21 unresolved externals
apxs：错误：命令失败，rc=6291456
.

```

我不是 C 大师，所以在找到这些未解决的外部符号方面的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-01T00:01:31.467

我设法编译了模块。先决条件：

*   阿帕奇 2.2.11
*   来自 www.apachelounge.com[的 apxs-win32](http://www.apachelounge.com/download/apxs_win32.zip)
*   视觉工作室 2005
*   [Active Perl 5.8.8](http://www.activestate.com/activeperl/)（安装 apxs-win32 需要 perl）

这是一个分步指南。下载这些软件包：

*   [http://subversion.tigris.org/files/documents/15/44595/svn-win32-1.5.5_dev.zip](http://subversion.tigris.org/files/documents/15/44595/svn-win32-1.5.5_dev.zip)（我们需要这个包中的库和头文件）
*   [http://subversion.tigris.org/downloads/subversion-1.5.5.zip](http://subversion.tigris.org/downloads/subversion-1.5.5.zip)（我们将使用`mod_dav_svn`源代码编译静态库）

将 dev 包解压到，`c:\temp\svn`将其他包解压到.`c:\temp\svn-src``mod_dontdothat``C:\Temp\dontdothat`

模块的依赖项之一`mod_dontdothat`是`mod_dav_svn`模块。不幸的是，您会发现`mod_dav_svn`二进制文件仅作为共享库 (DLL)。您不能链接到 DLL。所以第一步是建立一个静态`mod_dav_svn`库：

```
cd C:\Temp\svn-src\subversion\mod_dav_svn
apxs -c -I ..\include  -L C:\Temp\svn\lib -l libsvn_delta-1.lib -l libsvn_diff-1.lib -l libsvn_fs-1.lib -l libsvn_fs_base-1.lib -l libsvn_fs_fs-1.lib -l libsvn_fs_util-1.lib -l libsvn_repos-1.lib -l libsvn_subr-1.lib -l libapr-1.lib -l libaprutil-1.lib -l libhttpd.lib -l mod_dav.lib -l xml.lib  -n mod_dav_svn mod_dav_svn.c activity.c authz.c deadprops.c liveprops.c lock.c merge.c mirror.c repos.c util.c version.c reports\dated-rev.c reports\file-revs.c reports\get-locations.c reports\get-location-segments.c reports\get-locks.c reports\log.c reports\mergeinfo.c reports\replay.c reports\update.c 
```

apxs 调用将打印它执行的命令。最后一个命令是构建 DLL 的链接调用。复制它，将“link”替换为“lib”，删除“/dll”参数，并将“out”参数文件名更改为“ `libmod_dav_svn.lib`”。你应该得到类似的东西：

```
lib kernel32.lib /nologo /subsystem:windows /machine:I386 /libpath:"C:\PROGRA~1\APACHE~1\Apache2.2\lib" /out:libmod_dav_svn.lib  /libpath:"C:\Temp\svn\lib"  libsvn_delta-1.lib libsvn_diff-1.lib libsvn_fs-1.lib libsvn_fs_base-1.lib libsvn_fs_fs-1.lib libsvn_fs_util-1.lib libsvn_repos-1.lib libsvn_subr-1.lib libapr-1.lib libaprutil-1.lib libhttpd.lib mod_dav.lib xml.lib   reports\update.lo reports\replay.lo reports\mergeinfo.lo reports\log.lo reports\get-locks.lo reports\get-location-segments.lo reports\get-locations.lo reports\file-revs.lo reports\dated-rev.lo version.lo util.lo repos.lo mirror.lo merge.lo lock.lo liveprops.lo deadprops.lo authz.lo activity.lo mod_dav_svn.lo 
```

您将收到一些链接警告。你可以忽略它们。复制`libmod_dav_svn.lib`到`mod_dontdothat`目录。现在开始编译过程`mod_dontdothat`：

```
C:\Temp\dontdothat
apxs -c -I C:\Temp\svn\include -L C:\Temp\svn\lib -l libsvn_subr-1.lib -l libapr-1.lib -l libaprutil-1.lib -l libhttpd.lib -l mod_dav.lib -l xml.lib -l libmod_dav_svn.lib    mod_dontdothat.c
apxs -i -n dontdothat mod_dontdothat.so 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-27T10:30:46.120

谷歌搜索我有

*   `mod_dav_svn.lib`为了`_dav_svn_split_uri`
*   `intl3_svn.lib`对于所有事情`_libintl`
*   `shell32.lib`对于 SHGetFolderPath
*   `advapi32.lib`对于`Reg`简单的东西
*   `ole32.lib`因为`CoInitialize`它是同类
*   `inflate``deflate`闻起来像或`zlib1.lib`类似的东西

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T22:31:17.060

感谢您修改问题。

它看起来像一个明确的链接器问题。我看到第一个未定义的符号与 webdav 相关。你确定你在正确的地方有那个图书馆吗？我看到你给出了一个很好的长路径，有很多 svn 库，也许你忽略了一个？

# bash - 如何创建使用变量执行大量命令的命令行 (unix/linux) 指令？

> ID：74886
> 
> 赞同：1
> 
> 时间：2008-09-16T17:37:02.243
> 
> 标签：bash, shell, command-line

我需要重新排列各种目录中的一些内容，但这有点痛苦。为了调试我正在开发的应用程序（一个 ruby​​ 应用程序），我需要一次将一个 gem 移动到我的 gem 文件夹中（长话短说；简而言之：一个坏了，我不知道是哪一个）。

所以我需要做类似的事情：

```
sudo mv backup/gem/foo gem/
sudo mv backup/doc/foo doc/
sudo mv backup/specification/foo.gemspec specification/ 
```

每次替换“foo”。我如何编写一个简单的 shell 脚本来让我执行以下操作： gemMove("foo") 并为我填补空白？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T17:39:38.867

将以下内容放入名为 的文件中`gemmove`：

```
#!/bin/bash

if [ "x$1" == x ]; then
  echo "Must have an arg"
  exit 1
fi

for d in gem doc specification ; do 
  mv "backup/$d/$1" "$d"
done 
```

然后做

```
chmod a+x gemmove 
```

然后调用`sudo /path/to/gemmove foo`将 foo gem 从备份目录移动到真实目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T17:41:02.887

您可以简单地使用 bash shell 参数，如下所示：

```
#!/bin/bash
# This is move.sh
mv backup/gem/$1 gem/
mv backup/doc/$1 doc/
# ... 
```

然后将其执行为：

```
sudo ./move.sh foo 
```

确保使脚本可执行，使用

```
chmod +x move.sh 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T17:47:13.560

在 bash 中，类似：

```
function gemMove()
{
filename=$1
   mv backup/gem/$filename gem/$filename
   mv backup/doc/$filename doc/$filename
   mv backup/specification/$filename.spec specification
} 
```

然后你可以`gemMove("foo")`在脚本的其他地方调用。

# image - JPEG 大小为 8px 或 16px 的倍数是否有质量、文件大小或其他好处？

> ID：74892
> 
> 赞同：11
> 
> 时间：2008-09-16T17:37:38.980
> 
> 标签：image, compression, jpeg, lossy-compression

JPEG 压缩编码过程将给定的图像分割成 8x8 像素的块，在未来的有损和无损压缩中使用这些块。[[来源]](http://en.wikipedia.org/wiki/Jpeg#JPEG_codec_example)

还提到，如果图像是多个 1MCU 块（定义为最小编码单元，“通常在两个方向上 16 个像素”），则可以对 JPEG 进行无损更改。[[来源]](http://en.wikipedia.org/wiki/Jpeg#Lossless_editing)

我正在处理产品图片，并且想知道在我的最终图片尺寸中使用 16 的倍数（例如，使用尺寸为 480 像素 x 360 像素的图片）与非16（例如 484x362）。在此示例中，我对最终图像的进一步更改、编辑或重新压缩不感兴趣。

为了更接近一个我知道必须有很大普遍性的特定答案：给定一个 64k 的 480x360 图像，并在 Photoshop [[示例]](http://enstxzrnsprxt.6hops.net/Random_Bill_Blass_Pen_and_Pencil_Set___2_PacklewStandard.jpg)中以最高质量保存：

*   我可以预期 484x362 的图像会有任何质量损失吗
*   我可以期望增加多少文件大小（对于这个例子，额外的空间是白色像素）
*   比 8px 网格更大还有其他缺点吗？

我知道使用该特定示例是任意的，但它仍然会有所帮助（对于我和可能任何其他考虑图像大小的人）了解我在打破非 8px 网格时要处理的妥协程度。

这里的关键问题是我曾经争论过的问题是 8 像素可分割图像是否比不能被 8 像素整除的图像质量更高。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-16T17:57:30.070

8 像素是截止值。原因是 JPEG 图像只是一个 8x8 DCT 块的数组；如果图像分辨率在两个方向上都不是 mod8，则编码器必须将两侧填充到下一个 mod8 分辨率。这在实践中并不是很昂贵。更糟糕的是图像具有不位于块边界上的清晰黑线（例如带有信箱的图像）的情况。这在视频编码中尤其成问题。这是一个问题的原因是锐线的频率变换是系数的高斯分布 - 导致要编码的位数巨大。

对于那些好奇的人来说，在帧内压缩（例如 JPEG 图像）中填充边缘的最常见方法是镜像边缘之前的像素线。例如，如果你需要填充三行，X线是边缘，X+1线等于X线，X+2线等于X-1线，X+3线等于X-线2\. 这非常有效地最小化了额外行的变换系数的成本。

然而，在帧间编码中，填充算法通常只是简单地复制最后一行，因为镜像方法不适用于帧间压缩，例如视频压缩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-22T19:57:56.727

有时由于二次采样，您需要使用 16 个像素边界而不是 8 个；在编码过程中，每第二个像素都会被丢弃，这些 8x8 DCT 块以 16x16 开始，并将解码回 16x16。在最高质量设置下这不会是问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T15:04:41.867

大小为 8 倍的 JPG 也可以在没有质量损失的情况下旋转/翻转。例如 gthumb 可以在 Linux 上执行此操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T17:57:56.047

图像尺寸为 8 或 16 的倍数不会对磁盘​​大小产生太大影响，但如果您可以将视觉内容排列到 8x8 像素网格（例如，如果存在重复图案或图像中的纹理。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T19:52:42.153

托梅茨基[所说](https://stackoverflow.com/questions/74892/is-there-a-quality-file-size-or-other-benefit-to-jpeg-sizes-being-multiples-of#84213)的。如果您没有正确的倍数，则无损翻转和旋转算法将不起作用。那是因为可以安全忽略的右侧/底部的填充现在最终在左侧/顶部，它不能。

# mono - 从 Mac OS X v10.5 Leopard 卸载 Mono

> ID：74902
> 
> 赞同：20
> 
> 时间：2008-09-16T17:38:20.850
> 
> 标签：mono, osx-leopard

昨晚我在 iMac 上安装了 Mono，我立刻改变了主意！我认为 Mono 还没有准备好迎接黄金时段。

Mono 网站说要运行以下脚本来卸载：

```
#!/bin/sh -x
#This script removes Mono from an OS X System.  It must be run as root
rm -r /Library/Frameworks/Mono.framework
rm -r /Library/Receipts/MonoFramework-SVN.pkg
cd /usr/bin
for i in `ls -al | grep Mono | awk '{print $9}'`; do
rm ${i}
done 
```

有人必须卸载 Mono 吗？是像运行上述脚本一样简单，还是我必须做更多？有多乱？任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-16T17:40:50.563

上面的脚本只是删除了系统上与 Mono 相关的所有内容——而且由于开发人员编写了它，我相信他们没有遗漏任何内容 :) 与其他一些由软件公司制造的与“Macrosoft”押韵的操作系统不同，卸载OS X 中的软件就像删除文件一样简单，99% 的时间.. 没有注册表或类似的东西。

所以，长话短说，是的，那个脚本可能是你唯一需要做的事情。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-09-02T16:36:16.310

2017 年对那些像我一样先看 SE 再看[官方文档](http://www.mono-project.com/docs/about-mono/supported-platforms/osx/#uninstalling-mono-on-mac-os-x)的人的回答（仅供参考，我知道问题是针对 OS Leopard）。在终端中运行这些命令：

```
sudo rm -rf /Library/Frameworks/Mono.framework
sudo pkgutil --forget com.xamarin.mono-MDK.pkg
sudo rm -rf /etc/paths.d/mono-commands 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-07-11T23:02:01.410

今天（2011-07-12）似乎对卸载脚本进行了轻微修改：

```
#!/bin/sh -x

#This script removes Mono from an OS X System.  It must be run as root

rm -r /Library/Frameworks/Mono.framework

rm -r /Library/Receipts/MonoFramework-*

for dir in /usr/bin /usr/share/man/man1 /usr/share/man/man3 /usr/share/man/man5; do
   (cd ${dir};
    for i in `ls -al | grep /Library/Frameworks/Mono.framework/ | awk '{print $9}'`; do
      rm ${i}
    done);
done 
```

[您可以在此处](http://www.mono-project.com/Mono:OSX#Uninstalling_Mono_on_Mac_OS_X)找到当前版本。

顺便说一句：它与运行[joev 提到](https://stackoverflow.com/questions/74902/uninstall-mono-from-mac-os-x-v10-5-leopard/768240#768240)的卸载程序完全相同（尽管jochem[指出](https://stackoverflow.com/questions/74902/uninstall-mono-from-mac-os-x-v10-5-leopard/768240#comment-6661580)它*不在*.`/Library/Receipts`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-20T13:27:01.867

为了扩展 feelofwhite.com 的答案，Mac OS 的 Mono 安装程序将卸载脚本放在 /Library/Receipts 目录中，而不是像 Notes.rtf 文件中所说的那样放在安装程序映像中。Receipts 目录是 Mac OS Installer.app 用来跟踪哪些包负责安装哪些文件的目录。通常，这些列表保存在 .bom（“材料清单”）文件中，可以使用 lsbom 命令进行探索。

对于 Mono，他们还从 /usr/bin 和 man 目录中添加了一大堆链接。他们的卸载脚本会找到这些并删除它们。由于卸载脚本位于卸载程序删除的位置，因此您可能应该在运行之前将卸载脚本复制到其他地方：

```
cd
cp /Library/Receipts/MonoFramework-2.4_7.macos10.novell.universal.pkg/Contents/Resources/uninstallMono.sh .
sudo ./uninstallMono.sh
rm uninstallMono.sh 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T17:39:36.557

Mono 不包含很多绒毛，因此只需运行这些命令就可以了。就像删除所有数据文件夹和二进制文件一样简单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-12-17T14:41:46.230

[http://dragthor.wordpress.com/2007/07/24/uninstall-mono-on-mac-os-x/](http://dragthor.wordpress.com/2007/07/24/uninstall-mono-on-mac-os-x/) 为我工作，OSX，但我使用 Mono 安装程序包中的卸载脚本文件 (.sh) .

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-13T22:04:16.907

我刚刚删除了 mono.frameworks 文件夹。我厌倦了数十亿次回答“是”...

# parsing - 解析文件的工具

> ID：74928
> 
> 赞同：2
> 
> 时间：2008-09-16T17:40:02.627
> 
> 标签：parsing

我试图找出解析 GE Logician MEL 跟踪文件以使其更易于阅读的最佳方法。

它有像

```
>{!gDYNAMIC_3205_1215032915_810 = (clYN)}
执行>GDYNAMIC_3205_1215032915_810 = “是，否”
结果>“是，否”
执行>结束
结果>“是，否”

>{!gDYNAMIC_3205_1215032893_294 = (clYN)}
执行>GDYNAMIC_3205_1215032893_294 = “是，否”
结果>“是，否”
执行>结束
结果>“是，否”
```

和

```
>{IF (STR(F3205_1220646638_285, F3205_1220646638_301) == "") THEN "" ELSE (\par\tab fnHeadingFormat("Depression") + CFMT(F3205_1220646638_285, "", "你是否经常被情绪低落、沮丧或无望？", "B", "\par ") + CFMT(F3205_1220646638_301, "", "你是否经常被做事的兴趣或乐趣所困扰？", "B", "\par ") ) ENDIF}
执行>调用STR（“否”，“否”）
结果>“NoNo”
执行>“否”==“”
结果>错误
执行>如果为假
结果>错误
执行>调用 FNHEADINGFORMAT("抑郁症")
执行>调用 CFMT("抑郁症", "B,2")
结果>"\fs24\b 抑郁\b0\fs20 "
执行>"\r\n" + "\fs24\b 郁闷\b0\fs20 "
结果>"\r\n\fs24\b 抑郁症\b0\fs20 "
执行>"\r\n\fs24\b 抑郁\b0\fs20 " + "\r\n"
结果>"\r\n\fs24\b 抑郁症\b0\fs20 \r\n"
结果>返回 "\r\n\fs24\b 抑郁症\b0\fs20 \r\n"
execute>call CFMT("No", "", "你是否经常被情绪低落、沮丧或绝望所困扰？", "B", "\par ")
结果>"\b 你是否经常被情绪低落、沮丧或绝望所困扰？\b0 没有\par "
执行>"\r\n\fs24\b 抑郁\b0\fs20 \r\n" + "\b 你是否经常被情绪低落、沮丧或绝望所困扰？\b0 没有\par "
结果>"\r\n\fs24\b 抑郁\b0\fs20 \r\n\b 你是否经常被情绪低落、沮丧或绝望所困扰？\b0 没有\par "
execute>call CFMT("No", "", "你是否经常被做事的兴趣或乐趣所困扰？", "B", "\par ")
结果>"\b 你是否经常因为做事没有兴趣或快乐而烦恼？\b0 没有\par "
执行>"\r\n\fs24\b 抑郁\b0\fs20 \r\n\b 你是否经常被情绪低落、沮丧或绝望所困扰？\b0 没有\par " + "\b 你是否经常被困扰对做事缺乏兴趣或乐趣？\b0 没有\par "
结果>"\r\n\fs24\b 抑郁\b0\fs20 \r\n\b 你是否经常被情绪低落、沮丧或绝望所困扰？\b0 没有\par \b 你是否经常被无趣所困扰还是乐于做事？\b0 没有\par "

```

我可以通过程序来完成它，但是在我使用过所有正则表达式之后，我发现很难相信没有任何东西可以让我以类似的方式定义解析文件的规则。我错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T17:44:09.323

使用 ANTLR 制作语法。如果您使用 C，则 lex/yacc 是本机的。ANTLR 在 Java、Python 和 .NET 中创建本地解析器。你的输出看起来像一个repl；尝试向供应商询问有关输入语言的规范。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T17:41:27.333

[Antlr](http://www.antlr.org)可以解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T10:32:53.900

如果您使用 Perl 进行解析。YACC 的 Perl 等价物是[Parse::Yapp](http://search.cpan.org/dist/Parse-Yapp)模块。当我翻译 yacc 语法以用于我的 Perl 代码时，翻译主要是机械性的。还有一个递归下降解析器生成器，它速度慢但功能强大：[Parse::RecDescent](http://search.cpan.org/dist/Parse-RecDescent)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T17:41:36.927

你可以试试 ANTLR 或 lex/yacc。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T17:43:14.600

如果是我，我会派生出一个上下文无关语法并将其插入解析器生成器，可能是 Scala 的组合器库。然而，这个语法看起来相当容易手动解析，只要记住自动机理论，它不应该是一个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T17:44:14.283

我想您可以使用 LEX、FLEX、CUP、ANTLR 或 YACC 之类的工具（或您使用的任何编程语言的等效工具。任何主流编程语言都有这些可用的味道。）来解析文件，如果它们有特定的结构[更准确地说，如果它们可以用语法来表示的话]。不过，这些可能不适用于更精细的点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T17:49:32.320

有一种叫做 Haskell 的编程语言，它有一个很棒的解析库，你可以试试。www.haskell.org 和[http://legacy.cs.uu.nl/daan/parsec.html](http://legacy.cs.uu.nl/daan/parsec.html)了解更多详情

# sql-server - 如何组合包含 Richtext 数据/文件的两列

> ID：74947
> 
> 赞同：0
> 
> 时间：2008-09-16T17:41:49.813
> 
> 标签：sql-server

在 SQL Server 2005 / 2008 中处理富文本 / *.rtf 数据的最佳方法是什么我看过 ocx 解决方案。也许创建一些 CLR 存储过程？

问题是我有几个用富文本编写的笔记，需要组合起来以便于报告。就像 SELECT @Notes = @Notes + RTFColumn FROM Notestable WHERE ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T17:44:43.877

我认为你最好创建一个简单的应用程序来读取这两个文件，合并数据并保存，如果那是你要去的地方。听起来您希望数据库在其存储/检索工作功能之外做一些事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T20:37:03.763

CLR 相当于编写程序，并且可能无法有效地工作。

该数据库并不是真正设计用于执行您的要求，并且处理它的 CLR 存储过程会在许多级别上阻塞。所以你最好编写一个程序来手动处理行来做你想做的事情。

# apache-flex - 如何在 Flex 列表控件中实现自定义拖动功能？

> ID：74951
> 
> 赞同：1
> 
> 时间：2008-09-16T17:42:01.730
> 
> 标签：apache-flex

Flex 为列表控件内置了拖放功能，并允许您覆盖它。但他们没有在示例中涵盖这一点。内置功能会自动拖动列表项，如果您想覆盖它，您会发现处理程序正在列表本身上设置。我特别想做的是，我的 TileList 显示了我可以拖动到大画布上的项目的小缩略图。当我从列表中拖动一个项目时，拖动代理应该是不同的图像。

**所以，我遵循了建议的技术，它只有在我明确设置代理图像的宽度/高度时才有效。为什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T18:37:13.800

在您尝试之前并不明显 =) 几周前我也在为同样的事情苦苦挣扎。这是我的解决方案：

名单：

```
<List>
  <mouseDown>onListMouseDown(event)</mouseDown>
</Tree> 
```

鼠标按下处理程序：

```
private function onMouseDown( event : MouseEvent ) : void {
  var list : List = List(event.currentTarget);

  // the data of the clicked row, change the name of the class to your own
  var item : MyDataType = MyDataType(list.selectedItem);

  var source : DragSource = new DragSource();

  // MyAwsomeDragFormat is the key that you will retrieve the data by in the
  // component that handles the drop
  source.addData(item, "MyAwsomeDragFormat");

  // this is the component that will be shown as the drag proxy image
  var dragView : UIComponent = new Image();

  // set the source of the image to a bigger version here
  dragView.source = getABiggerImage(item);

  // get hold of the renderer of the clicked row, to use as the drag initiator
  var rowRenderer : UIComponent = UIComponent(list.indexToItemRenderer(list.selectedIndex));

  DragManager.doDrag(
    rowRenderer,
    source,
    event,
    dragView
  );
} 
```

当用户单击列表中的项目时，这将开始拖动。请注意，我没有`dragEnabled`在列表中设置和其他与拖动相关的属性，因为我自己处理所有这些。

将其添加到事件处理程序的开头会很有用：

```
if ( event.target is ScrollThumb || event.target is Button ) {
  return;
} 
```

如果用户单击滚动条中的某处，则只是为了短路。它不是很优雅，但可以完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-02T15:20:41.357

[我在这里](http://www.dgrigg.com/post.cfm/11/03/2006/DataGrid-Drag-Image)找到了一个更简单的答案。该示例扩展了 DataGrid 控件，但您可以对 List 控件执行相同操作。就我而言，我使用图像源而不是类：

```
public class CustomDragList extends List {

    [Bindable]
    public var dragProxyImageSource:Object;

    override protected function get dragImage():IUIComponent {
        var image:Image = new Image();
        image.width = 50;
        image.height = 50;
        image.source = dragProxyImageSource;
        image.owner = this;
        return image;
    }
} 
```

然后像这样使用该自定义列表：

```
<control:CustomDragList
    allowMultipleSelection="true"
    dragEnabled="true" 
    dragProxyImageSource="{someImageSource}"
    dragStart="onDragStart(event)"/> 
```

其中“someImageSource”可以是您通常用于图像源的任何内容（嵌入的、链接的等）

# powershell - 是否有 PowerShell“字符串不包含”cmdlet 或语法？

> ID：74957
> 
> 赞同：31
> 
> 时间：2008-09-16T17:42:41.713
> 
> 标签：powershell

在 PowerShell 中，我正在阅读一个文本文件。然后我在文本文件上做一个 Foreach-Object 并且只对不包含`$arrayOfStringsNotInterestedIn`.

这个的语法是什么？

```
 Get-Content $filename | Foreach-Object {$_} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2008-09-16T17:56:12.603

如果 $arrayofStringsNotInterestedIn 是一个 [array] 你应该使用 -notcontains：

```
Get-Content $FileName | foreach-object { `
   if ($arrayofStringsNotInterestedIn -notcontains $_) { $) } 
```

或更好（IMO）

```
Get-Content $FileName | where { $arrayofStringsNotInterestedIn -notcontains $_} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-16T17:51:03.707

您可以使用 -notmatch 运算符来获取没有您感兴趣的字符的行。

```
 Get-Content $FileName | foreach-object { 
     if ($_ -notmatch $arrayofStringsNotInterestedIn) { $) } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-27T14:43:45.543

要排除包含 $arrayOfStringsNotInterestedIn 中任何字符串的行，您应该使用：

```
(Get-Content $FileName) -notmatch [String]::Join('|',$arrayofStringsNotInterestedIn) 
```

Chris 提出的代码仅在 $arrayofStringsNotInterestedIn 包含您要排除的完整行时才有效。

# java - 如何使用 Apache Axis2 和 WSDL2Java 向 SOAP 响应添加命名空间引用

> ID：74960
> 
> 赞同：8
> 
> 时间：2008-09-16T17:42:51.450
> 
> 标签：java, soap, namespaces, axis2, wsdl2java

我正在查看我正在开发的 Web 服务的 SOAP 输出，我注意到一些奇怪的事情：

```
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
   <soapenv:Body>
      <ns1:CreateEntityTypesResponse xmlns:ns1="http://somedomain.com/wsinterface">
         <newKeys>
            <value>1234</value>
         </newKeys>
         <newKeys>
            <value>2345</value>
         </newKeys>
         <newKeys>
            <value>3456</value>
         </newKeys>
         <newKeys xsi:nil="1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         <newKeys xsi:nil="1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         <errors>Error1</errors>
         <errors>Error2</errors>
      </ns1:CreateEntityTypesResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

我有两个 nil 的 newKeys 元素，并且两个元素都为 xsi 插入了一个命名空间引用。我想将该命名空间包含在 soapenv:Envelope 元素中，以便命名空间引用只发送一次。

我正在使用 WSDL2Java 生成服务框架，因此我无法直接访问 Axis2 API。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T18:00:28.863

### Using WSDL2Java

If you have used the Axis2 WSDL2Java tool you're kind of stuck with what it generates for you. However you can try to change the skeleton in this section:

```
 // create SOAP envelope with that payload
   org.apache.axiom.soap.SOAPEnvelope env = null;
   env = toEnvelope(
       getFactory(_operationClient.getOptions().getSoapVersionURI()),
       methodName,
       optimizeContent(new javax.xml.namespace.QName
       ("http://tempuri.org/","methodName")));

//adding SOAP soap_headers
_serviceClient.addHeadersToEnvelope(env); 
```

To add the namespace to the envelope add these lines somewhere in there:

```
OMNamespace xsi = getFactory(_operationClient.getOptions().getSoapVersionURI()).
    createOMNamespace("http://www.w3.org/2001/XMLSchema-instance", "xsi");

env.declareNamespace(xsi); 
```

### Hand-coded

If you are "hand-coding" the service you might do something like this:

```
SOAPFactory fac = OMAbstractFactory.getSOAP11Factory();   
SOAPEnvelope envelope = fac.getDefaultEnvelope();
OMNamespace xsi = fac.createOMNamespace("http://www.w3.org/2001/XMLSchema-instance", "xsi");

envelope.declareNamespace(xsi);
OMNamespace methodNs = fac.createOMNamespace("http://somedomain.com/wsinterface", "ns1");

OMElement method = fac.createOMElement("CreateEntityTypesResponse", methodNs);

//add the newkeys and errors as OMElements here... 
```

### Exposing service in aar

If you are creating a service inside an aar you may be able to influence the SOAP message produced by using the target namespace or schema namespace properties (see [this article](http://wso2.org/library/2060)).

Hope that helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:17:37.570

其他选项是变量 MY_QNAME 的前缀为空。

```
public static final QName MY_QNAME = new QName("http://www.hello.com/Service/",
            "tagname",
            "prefix"); 
```

因此，如果您填写它，那么它就可以工作。

# c# - XBAP 应用程序，这些可以在 Google Chrome 中运行吗？

> ID：74986
> 
> 赞同：24
> 
> 时间：2008-09-16T17:45:57.853
> 
> 标签：c#, .net, google-chrome, xbap

我正在开发一个 .NET 3.5 XBAP 应用程序，它在 FF3 和 IE6/7 等中运行得非常好。我只是想知道是否有可能让这些在其他浏览器下运行，特别是（因为它目前处于聚光灯下）谷歌浏览器。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-02-26T03:35:52.360

XBAP 应用程序可以在 google chrome 中运行，但是您必须将环境 PATH 变量设置为 xpcom.dll 所在的目录。

例如 SET PATH=PATH;"C:\Program Files\Mozilla Firefox"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T17:51:34.203

目前，XBAP 不适用于 Google Chrome。不知何故，我已经让它运行一次，但每次我收到浏览器无法找到 xpcom.dll 的错误后。显然，这个错误不仅仅发生在 XBAP 应用程序中。从我读到的内容来看，由于 Chrome 仍处于测试阶段，用户将不得不等待修复。

**更新：**

看起来它不会被修复：[http ://code.google.com/p/chromium/issues/detail?id=4051](http://code.google.com/p/chromium/issues/detail?id=4051)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-03-06T12:08:00.613

这是另一个仍然需要安装 Firefox 的替代解决方案，但是您复制 DLL 而不是修改 PATH：

[http://adrianbega.blogspot.com/2009/04/execute-xbap-in-google-chrome.html](http://adrianbega.blogspot.com/2009/04/execute-xbap-in-google-chrome.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-09-05T10:27:48.700

这里需要的第一件事是安装.Net framework 3.5，一旦完成检查应用程序是否在Mozilla Firefox中运行，因为它使用Mozilla的插件，如果Mozilla中有问题，`aspnet_regiis.exe -iru`从Visual Studio命令提示符执行具有管理权限，然后将 Path 变量设置为`C:\Program Files\Mozilla Firefox`并将以下 DLL 添加到该位置`C:\Users\[Username]\AppData\Local\Google\Chrome\Application`

*   mozalloc.dll
*   mozcpp19.dll
*   mozcrt19.dll
*   mozjs.dll
*   mozsqlite3.dll
*   nspr4.dll
*   nss3.dll
*   nssutil3.dll
*   plc4.dll
*   plds4.dll
*   smime3.dll
*   ssl3.dll
*   测试.txt
*   xpcom.dll
*   xul.dll

重启浏览器，检查应用程序，如果还是显示插件崩溃，请尝试先重新安装框架，然后再安装Mozilla，同样对于Windows 7，mozilla要求将NPWPF.dll放到该位置`C:\Program Files (x86)\Mozilla Firefox\plugins`。

在经历了这么多地狱之后，应用程序可能仍然无法调试，然后发布 XBAP 应用程序并检查文件并保持手指交叉，因为这次它可能会工作，这就是我如何让我的应用程序在我的系统中工作并检查 5更多系统，所以希望它也能解决您的问题。

# linux - 应该在运行 Web 服务器或数据库的 Linux 服务器上监控哪些资源

> ID：74993
> 
> 赞同：6
> 
> 时间：2008-09-16T17:46:50.987
> 
> 标签：linux, performance, sysadmin

在负载下运行任何类型的服务器时，有几个资源需要监控以确保服务器健康。在负载下测试系统时尤其如此。

这方面的一些例子是 CPU 使用率、内存使用率，也许还有磁盘空间。我应该监控哪些其他资源，以及可以使用哪些工具来监控？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T17:50:11.633

尽可能多的，然后可以绘制/理解/查看结果。监控资源不仅对容量规划有用，而且对异常检测很有用，异常检测显着有助于您检测安全事件的能力。

您的基本图表有一个不错的开始。我还想监控线程数、连接数、网络 I/O、磁盘 I/O、页面错误（可以说这与内存使用有关）、上下文切换。

我真的很喜欢 munin 来绘制与主机相关的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T12:58:04.103

我在生产中广泛使用 Zabbix，它带有一堆有用的默认值。我们将其配置为监控的一些示例：

*   网络使用情况
*   CPU 使用率（% 用户、系统、美好时光）
*   平均负载（1m、5m、15m）
*   RAM 使用情况（真实、交换、shm）
*   光盘吞吐量
*   活动连接（按端口号）
*   进程数（按进程类型）
*   来自远程位置的 Ping 时间
*   SSL 证书到期时间
*   MySQL 内部结构（查询缓存使用情况、RAM 和磁盘上的临时表数量等）

任何你可以用 Zabbix 监控的东西，你也可以附加触发器——这样它就可以重启失败的服务；或寻呼您以提醒问题。

在性能成为问题之前立即收集数据。当它发生时，您会对历史基线感到高兴，并且当您需要追查并准确惩罚哪个开发人员做出了错误的更改时，您将能够显示开始发生的日期和时间问题这一事实:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-29T15:30:19.500

我最终使用了 dstat，它是 vmstat 的表亲。

这将显示您需要了解的有关机器运行状况的大部分信息，包括：

*   中央处理器
*   磁盘
*   记忆
*   网络
*   交换

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T17:53:10.317

“df -h”以确保没有分区运行已满，这可能导致各种时髦的问题，观看系统日志当然也很有用，因为我建议在您的服务器上安装“logwatch”（[Logwatch 网站](http://www.logwatch.org/ "日志观察")）发送给您如果奇怪的事情开始出现在您的系统日志中，请发送一封电子邮件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T19:03:45.467

[Cacti](http://www.cacti.net/)是一个很好的基于 Web 的监控/绘图解决方案。非常完整，非常易于使用，拥有庞大的用户群，包括许多大型企业级安装。

如果您想要更多的“警报”和更少的“绘图”，请查看[nagios](http://www.nagios.org/)。

至于“监控什么”，您想在系统和应用程序级别监控系统，所以是的：网络/内存/磁盘 i/o、中断等系统级别的。应用程序级别变得更加具体，因此网络服务器可能会测量每秒点击次数、每秒错误数（非 200 响应）等，而数据库可能会测量每秒查询次数、平均查询执行时间等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T20:03:28.467

小心前面提到的mysql中的slowquerylog。只有在试图弄清楚为什么某些查询很慢时才应该使用它。它具有在启用时使所有查询变慢的副作用。:P 它用于调试，而不是记录。

尽可能考虑“被动监控”。例如，嗅探网络流量而不是从您的服务器监视它——让另一台机器监视数据包来回传输并记录有关它们的统计信息。

（顺便说一句，这是我的最爱之一——如果你观察正在建立的连接并注意它们何时结束，你可以找到很多关于慢查询或减慢其他任何东西的数据，而不会在你关心的服务器上增加任何负载。 )

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T17:51:28.667

除了top和auth.log，我也经常看mtop，开启mysql的slowquerylog，看mysqldumpslow。

我还使用 Nagios 来监控 CPU、内存和登录用户（在 VPS 或专用服务器上）。最后一个让我知道我以外的其他人何时登录。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T21:13:30.380

网络当然 :) 使用 MRTG 来获得一些不错的带宽图，它们大部分时间都很漂亮.. 直到垃圾邮件发送者发现您的安全漏洞并突然增加。

如前所述，Nagios 非常适合用于警报，并且易于设置。然后，您也可以使用 mrtg 插件来获取网络流量警报。

我还推荐使用 ntop，因为它可以显示您的网络流量的去向。

一个很好的链接，可以让您使用 Munin 和 Monit：[链接文本](http://www.howtoforge.com/server_monitoring_monit_munin)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-16T17:49:41.183

我通常看`top`和`tail -f /var/log/auth.log`.***