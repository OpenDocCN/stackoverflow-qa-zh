# StackOverflow 问答 10958000-10958999

# jquery-mobile - JQuery 移动对话框未关闭

> ID：10958008
> 
> 赞同：0
> 
> 时间：2012-06-09T02:55:50.073
> 
> 标签：jquery-mobile

我使用 JQuery Mobile 创建了一个 facebook 应用程序，但在 facebook 中，对话框没有关闭，您可以在此处找到该应用程序，[https://apps.facebook.com/euro-tv-guide/](https://apps.facebook.com/euro-tv-guide/)，

在 facebook 外运行时，它会正确关闭

这是其中一个对话框的代码：

```
<div data-role="page" id="about">
    <div data-role="header">
         <h1>Euro 2012 TV Guide</h1>
    </div>
    <div data-role="content" align="center">
        <div style="text-align:center;margin:3px 3px 3px 3px">
            xxxxxxxxxxxxxxxxxxxxxxxx
        </div>
    </div>
</div> 
```

# .net - OleDbTransaction 是否自动回滚？

> ID：10958009
> 
> 赞同：2
> 
> 时间：2012-06-09T02:55:52.663
> 
> 标签：.net, transactions

如果我在处理之前不调用提交，OleDbTransaction 会自动回滚吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T03:00:39.937

有关详细信息，请参阅此处的 MSDN 文档。

必须提交事务，否则分阶段的更改不会被提交。发生错误时，您应该调用分阶段更改的回滚。文档中的这句话回答了这个问题。是的，它确实会回滚。

> 事务只能从挂起状态回滚（在调用 BeginTransaction 之后，但在调用 Commit 之前）。如果在调用 Commit 或 Rollback 之前处理该事务，则该事务将被回滚。

[http://msdn.microsoft.com/en-us/library/93ehy0z8.aspx](http://msdn.microsoft.com/en-us/library/93ehy0z8.aspx)

# symfony1 - 如何定义 sfDoctrine Pager 中显示的链接数

> ID：10958010
> 
> 赞同：0
> 
> 时间：2012-06-09T02:56:17.187
> 
> 标签：symfony1

我在 stackoverflow 中搜索了一种设置 sfDoctrine Pager 返回的链接数量的方法。我最终查看了代码以找到 getLinks 的函数声明。该函数采用一个默认为 5 的参数。您可以更改它，getLinks(10)。有谁知道显示 sfDoctrine Pager 类的所有可用选项的资源。我正在使用 Symfony 1.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:15:53.307

如果您查看[sfDoctrinePager](http://www.symfony-project.org/api/1_4/sfPager#method___construct)的构造函数，您会注意到第二个参数如果每页的最大项目数......所以

```
$this->pager = new sfDoctrinePager('modelclass',10); 
```

其中 10 是每页的最大项目数。

[API 文档在这里](http://www.symfony-project.org/api/1_4/)...特别是[sfDoctrinPager 文档在这里](http://www.symfony-project.org/api/1_4/sfDoctrinePager)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:23:48.437

试试[sfPager 文档](http://www.symfony-project.org/api/1_4/sfPager)。

# spring - 如何在 Spring 表达式语言中进行类型转换

> ID：10958011
> 
> 赞同：7
> 
> 时间：2012-06-09T02:56:44.073
> 
> 标签：spring, types, casting, expression

我正在尝试使用 @PreAuthorize 注释进行访问控制。我需要检查身份验证对象详细信息中的一些自定义字段。我有一个 CustomWebAuthenticationDetails 类，它是 WebAuthenticationDetails 的子类，包含自定义字段。通常，我会使用以下内容访问 CustomWebAuthenticationDetails 中的自定义字段：

```
((CustomWebAuthenticationDetails)authentication.getDetails()).getCustomField() 
```

但是，当我尝试在 @PreAuthorize 表达式中使用上述语句（甚至包括 CustomWebAuthenticationDetails 的完全限定路径）时，我收到以下错误：

```
java.lang.IllegalArgumentException: Failed to parse expression ... 
```

我应该如何处理这里的类型转换？

谢谢，

丹尼尔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T06:59:55.630

AFAIK，鉴于 EL 的动态和解释性质，您不需要任何演员表。如果运行时对象的属性存在，它将找到它，而不关心其声明的类型：

```
authentication.details.customField 
```

# objective-c - 获取参数异常（无 URL 参数）！

> ID：10958013
> 
> 赞同：3
> 
> 时间：2012-06-09T02:56:58.123
> 
> 标签：objective-c, xml-parsing, uncaught-exception, initwithcontentsofurl

我遇到了这个问题，我的 iPhone 上出现了这个错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSConcreteData initWithContentsOfURL:options:error:]: nil URL argument' 
```

我正在尝试解析一些 XML 数据，当我在模拟器上尝试时，我没有收到任何错误，但是每当我在 iOS 设备上尝试时，我的控制台中都会出现错误！

这是我解析 XML 的代码：

```
- (ICB_WeatherConditions *)initWithQuery:(NSString *)query {

if (self = [super init])
{
    CXMLDocument *parser = [[[CXMLDocument alloc] initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.google.com/ig/api?weather=%@", query]] options:0 error:nil] autorelease];

    condition         = [[[[[parser nodesForXPath:@"/xml_api_reply/weather/current_conditions/condition" error:nil] objectAtIndex:0] attributeForName:@"data"] stringValue] retain];        
    location          = [[[[[parser nodesForXPath:@"/xml_api_reply/weather/forecast_information/city" error:nil] objectAtIndex:0] attributeForName:@"data"] stringValue] retain];
    day2c    = [[[[[parser nodesForXPath:@"/xml_api_reply/weather/forecast_conditions/condition" error:nil] objectAtIndex:0] attributeForName:@"data"] stringValue] retain];
    day3c     = [[[[[parser nodesForXPath:@"/xml_api_reply/weather/forecast_conditions/condition" error:nil] objectAtIndex:1] attributeForName:@"data"] stringValue] retain];

    currentTemp       = [[[[[parser nodesForXPath:@"/xml_api_reply/weather/current_conditions/temp_f" error:nil] objectAtIndex:0] attributeForName:@"data"] stringValue] integerValue];
    lowTemp           = [[[[[parser nodesForXPath:@"/xml_api_reply/weather/forecast_conditions[2]/low" error:nil] objectAtIndex:0] attributeForName:@"data"] stringValue] integerValue];
    highTemp          = [[[[[parser nodesForXPath:@"/xml_api_reply/weather/forecast_conditions/high" error:nil] objectAtIndex:0] attributeForName:@"data"] stringValue] integerValue];

    conditionImageURL = [[NSURL URLWithString:[NSString stringWithFormat:@"http://www.google.com%@", [[[[parser nodesForXPath:@"/xml_api_reply/weather/current_conditions/icon" error:nil] objectAtIndex:0] attributeForName:@"data"] stringValue]]] retain];
}

return self;} 
```

这是我发送查询的代码：

```
- (void)showWeatherFor:(NSString *)query {
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

ICB_WeatherConditions *weather = [[ICB_WeatherConditions alloc] initWithQuery:query];

self.conditionsImage = [[UIImage imageWithData:[NSData dataWithContentsOfURL:weather.conditionImageURL]] retain];

[self performSelectorOnMainThread:@selector(updateUI:) withObject:weather waitUntilDone:NO];

[pool release];} 
```

请帮我指出正确的方向！再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T04:30:21.203

为了让您开始：错误出现在您的`if`语句中的第一行。这会构建一个字符串和一个 URL，但“nil URL 参数”是个例外。所以把这条线分成几部分：

```
NSString *queryPath = [NSString stringWithFormat:@"http://www.google.com/ig/api?weather=%@", query];
NSURL *queryURL = [NSURL URLWithString:queryPath];
CXMLDocument *parser = [[[CXMLDocument alloc] initWithContentsOfURL:queryURL options:0 error:nil] autorelease]; 
```

现在输入代码来测试*所有内容*- `query`, `queryPath`, `queryURL`- 如果值不是您所期望的，则会产生错误。问题应该很明显了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T04:50:19.160

我想到了！

好的，这就是故事和解决方案：我正在制作一个天气应用程序，查询需要一个城市才能获得包含数据的有效 XML 文件。在我的模拟器中，位置很差，所以它把我放在加利福尼亚州格伦代尔？！如您所见，**格伦代尔是一个词**。因此，当它进入查询时，它作为有效 URL 传递，并获取数据。当我去我的手机测试它时，我得到了上面所说的错误！这是因为我住的地方，从 CLGeocoder 的 reverseGeocodeLocation 检索到的城市名称是 2 个单词。（即得梅因）。**中间**的空间把一切都搞砸了。显然，在 URL 中放置一个空格不会让您返回任何数据。为了在我使用的“XML spitting service”中获得空间，您必须使用**+ 号**. 因此，经过大约 4 个小时的调试，我发现了这一点，并将其放入：

```
 stringByReplacingOccurrencesOfString:@" " withString:@"+" 
```

在我的方法结束时，最后它看起来像这样：

```
 City = [[placemark locality] stringByReplacingOccurrencesOfString:@" " withString:@"+"]; 
```

这解决了它，现在空格可以用加号代替，因此给我实际的数据！祝遇到类似问题的人好运！

# ant - 具有多个地图的 Ant 路径转换任务

> ID：10958014
> 
> 赞同：1
> 
> 时间：2012-06-09T02:57:15.643
> 
> 标签：ant, map

我有一个要求，我必须将位于 C:\temp\java\com\abc\def\xyz 目录下的 Java 类转换为ANT 脚本中的**com.abc.def.xyz.[ClassNameWithoutDOTClass] 。**

我在 ANT 中写了以下内容；

```
<property name="build.ws.java.dir" value="C:\temp\java" />
<for param="wsClass" >
    <path>
        <fileset dir="${build.ws.java.dir}" includes="**${file.separator}**WS.class" />
    </path>
    <sequential>
        <path id="java.ws.class" >
            <fileset file="@{wsClass}" />
        </path>
        <echo message="Actual wsClass = ${toString:java.ws.class}" />
        <pathconvert property="trimmed.wsClass" refid="java.ws.class" >
            <map from="${build.ws.java.dir}${file.separator}" to="" />
            <map from=".class" to="" />
            <map from="${file.separator}" to="." />
        </pathconvert>
        <echo message="Trimmed wsClass = ${trimmed.wsClass}" />
    </sequential>
</for> 
```

它应该可以工作但我得到以下结果（这是不正确的）；

```
 [echo] Actual wsClass = C:\temp\java\com\abc\def\xyz\DummyServiceWS.class
 [echo] Trimmed wsClass = com\abc\def\xyz\DummyServiceWS.class 
```

我期待像' **com.abc.def.xyz.DummyServiceWS** '这样的东西。谁能指出我错过了什么？

谢谢，

--

SJunejo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:13:45.103

实际上，我通过使用高级映射器选项找到了一种方法，在这种情况下，我使用了**[packagemapper]**。所以我更新的脚本就像;

```
<pathconvert property="trimmed.wsClass" refid="java.ws.class" >
    <packagemapper from="${build.ws.java.dir}${file.separator}*.class" to="*"/>
</pathconvert> 
```

以上返回正确的值如下；

```
[echo] Actual wsClass = C:\temp\java\com\abc\def\xyz\DummyServiceWS.class
[echo] Trimmed wsClass = com.abc.def.xyz.DummyServiceWS 
```

希望这可以帮助，

--

SJunejo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T03:21:47.977

引用[pathconvert 手册](http://ant.apache.org/manual/Tasks/pathconvert.html)：

> **注意：**地图元素按指定的顺序应用，并且仅应用第一个匹配的地图元素。因此，如果任何 from 值是其他 from 值的前缀，则地图元素的顺序可能很重要。

这意味着由于第一个映射匹配，其他映射被忽略。您需要指定三个单独的 pathconvert 任务，一个处理前一个的结果。

# mysql - MySQL 中逗号分隔列表的替代方案

> ID：10958018
> 
> 赞同：1
> 
> 时间：2012-06-09T02:58:29.173
> 
> 标签：mysql, csv

我很难找出组织数据库的最佳方法。有与手头的问题相关的三个表：`user, good, and transaction`. 在理想情况下，每笔交易将包括与单个用户和单个商品的识别关系。但是处理多种商品的最佳方式是什么？（在我的例子中，用户可能会在一次交易中购买数百种不同的商品。）我是否应该简单地创建一个逗号分隔的列表并将其粘贴在一个`TEXT`字段中？这似乎违背了数据库设计的传统智慧......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:03:42.137

除了列出的表和列之外，您还需要这些表和列： TRANSACTION_GOOD_MAPPING: Trnsctn_good_id (pk), transaction_id (fk to transaction table), good_id (fk to good table)

USER_TRANSACTION_MAPPING: user_trnsctn_id, user_id (fk to user table), tramsaction_id (fk into transaction table)

以上将允许您拥有许多交易的用户和与许多商品的交易。

这是一个示例查询，用于获取给定用户的给定交易的商品列表：

select good_id, good_name, good_desc from user u, good_g, transaction t, Transaction_good_mapping tgm, user_tramsaction_mapping utm 其中 u.user_id=utm.user_id 和 utm.transaction_id=tgm.transaction_id 和 g.good_id=tgm.good_id 和 u.user_id= 'someuserid' 和 tramsaction_id=some_tramsaction_id

注意：对于上述查询的最后两行，请确保在查询中使用变量替换以避免 SQL 注入。

# c - 读取时 C 块上的 UNIX 管道

> ID：10958022
> 
> 赞同：7
> 
> 时间：2012-06-09T02:59:59.377
> 
> 标签：c, unix, pipe

我正在努力实现一个带有类管道的外壳。

```
typedef struct {
    char** cmd;
    int in[2];
    int out[2];
} cmdio;

cmdio cmds[MAX_PIPE + 1]; 
```

管道中的命令被读取并存储在`cmds`.

`cmdio[i].in`是由 . 返回的输入管道的一对文件描述符`pipe()`。对于从终端输入读取的第一个命令，它只是 {fileno(stdin), -1}。`cmdin[i].out`输出管道/终端输出类似。`cmdio[i].in`是一样的`cmd[i-1].out`。例如：

```
$ ls -l | sort | wc

CMD: ls -l 
IN: 0 -1
OUT: 3 4

CMD: sort 
IN: 3 4
OUT: 5 6

CMD: wc 
IN: 5 6
OUT: -1 1 
```

我们将每个命令传递给 process_command，它会做很多事情：

```
for (cmdi = 0; cmds[cmdi].cmd != NULL; cmdi++) {
    process_command(&cmds[cmdi]);
} 
```

现在，在 process_command 内部：

```
if (!(pid_fork = fork())) {
    dup2(cmd->in[0], fileno(stdin));
    dup2(cmd->out[1], fileno(stdout));    
    if (cmd->in[1] >= 0) {
        if (close(cmd->in[1])) {
            perror(NULL);
        }
    }
    if (cmd->out[0] >= 0) {
        if (close(cmd->out[0])) {
            perror(NULL);
        }
    }
    execvp(cmd->cmd[0], cmd->cmd);
    exit(-1);
} 
```

问题是从管道中读取永远阻塞：

```
COMMAND $ ls | wc
Created pipe, in: 5 out: 6
Foreground pid: 9042, command: ls, Exited, info: 0
[blocked running read() within wc] 
```

如果不是用 交换过程`execvp`，我只是这样做：

```
if (!(pid_fork = fork())) {
    dup2(cmd->in[0], fileno(stdin));
    dup2(cmd->out[1], fileno(stdout));
    if (cmd->in[1] >= 0) {
        if (close(cmd->in[1])) {
            perror(NULL);
        }
    }
    if (cmd->out[0] >= 0) {
        if (close(cmd->out[0])) {
            perror(NULL);
        }
    }

    char buf[6];
    read(fileno(stdin), buf, 5);
    buf[5] = '\0';

    printf("%s\n", buf);
    exit(0);
} 
```

它恰好起作用：

```
COMMAND $ cmd1 | cmd2 | cmd3 | cmd4 | cmd5 
Pipe creada, in: 11 out: 12
Pipe creada, in: 13 out: 14
Pipe creada, in: 15 out: 16
Pipe creada, in: 17 out: 18
hola!
Foreground pid: 9251, command: cmd1, Exited, info: 0
Foreground pid: 9252, command: cmd2, Exited, info: 0
Foreground pid: 9253, command: cmd3, Exited, info: 0
Foreground pid: 9254, command: cmd4, Exited, info: 0
hola!
Foreground pid: 9255, command: cmd5, Exited, info: 0 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T04:04:30.567

你没有足够的关闭。在代码中：

```
if (!(pid_fork = fork())) {
    dup2(cmd->in[0], fileno(stdin));
    dup2(cmd->out[1], fileno(stdout));    
    if (cmd->in[1] >= 0) {
        if (close(cmd->in[1])) {
            perror(NULL);
        }
    }
    if (cmd->out[0] >= 0) {
        if (close(cmd->out[0])) {
            perror(NULL);
        }
    }
    execvp(cmd->cmd[0], cmd->cmd);
    exit(-1);
} 
```

将管道复制到`stdin`和`stdout`（通过`fileno()`）后，您需要关闭管道：

```
if (!(pid_fork = fork())) {
    dup2(cmd->in[0], fileno(stdin));
    dup2(cmd->out[1], fileno(stdout));    
    if (cmd->in[1] >= 0) {
        if (close(cmd->in[1])) {
            perror(NULL);
        }
    }
    if (cmd->out[0] >= 0) {
        if (close(cmd->out[0])) {
            perror(NULL);
        }
    }
    close(cmd->in[0]);  // Or your error checked version, but I'd use a function
    close(cmd->out[1]);     
    execvp(cmd->cmd[0], cmd->cmd);
    exit(-1);
} 
```

程序没有完成，因为文件的写端仍然打开。另外，不要忘记如果父进程（shell）创建管道，它必须关闭管道的两端。在开始学习管道管道时，没有关闭足够多的管道可能是最常见的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T04:39:01.217

好吧，我终于解决了。

在父进程上，就在整个子分叉之后，我放了：

```
f (cmd->in[0] != fileno(stdin)) {
    close(cmd->in[0]);
    close(cmd->in[1]);
} 
```

瞧。我以前做过类似的事情，但我打错了，`close(cmd->out[0]);`而是做了。就是这样了。现在说得通了。

# c++ - 如何使用单应性围绕图像中心旋转图像？

> ID：10958023
> 
> 赞同：3
> 
> 时间：2012-06-09T03:00:26.627
> 
> 标签：c++, image-processing, opencv

我正在使用 opencv`warpPerspective`生成具有不同旋转的图像来评估我的特征点检测算法。

在单应矩阵中，左上角的 2x2 矩阵是旋转矩阵，[参考这里](https://stackoverflow.com/questions/6087241/opencv-warpperspective)。

但结果是围绕原点（左上角）旋转，如何修改单应矩阵以围绕其中心旋转图像？

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T05:06:34.810

看到这个矩阵

![在此处输入图像描述](../Images/3de8eb9140c4d56540822f485c521cda.png)

平移和旋转的仿射变换，中心是旋转中心。要从中获得单应性，只需添加最后一个 raw `[ 0 0 1]`。您可以使用[getRotationMatrix2D](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html?highlight=getperspective#getrotationmatrix2d)计算此矩阵，然后使用`warpAffine`或形成单应性并使用`warpPerspective`. 请告诉我们进展如何。

# apache-flex - Flex 4.6 AIR 3.2 TextInput 工件

> ID：10958027
> 
> 赞同：1
> 
> 时间：2012-06-09T03:01:03.923
> 
> 标签：apache-flex, mobile, air, keyboard, textinput

我正在 flex 4.6 + air 3.2 移动应用程序中测试简单的 TextInput 功能，并在软键盘调整视图大小时观察到奇怪的伪影。这是外观：在弹出软键盘之前和之后。如您所见，Flex 已调整视图大小，以便软 kb 与 TextInput 可见。但这会导致所有 TextInputs 中的擦除伪影！这是一个错误吗？Flex 或 AIR 在哪里？任何建议如何解决这个问题？谢谢！

![](../Images/c23de11c67e9dd9d5f1a637ed132b294.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:05:36.603

默认情况下，Flex 4.6 在其移动 TextInput 外观中使用 StageText。滚动时 StageText 无法正确呈现。

使用 Flex 4.5 移动 TextInput 皮肤：

```
<s:TextInput skinClass="spark.skins.mobile.TextInputSkin"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T04:27:19.733

我们*可能*有一个解决方案：[http](http://blog.flexicious.com/post/Scrolling-Issues-With-TextInput-for-Flex-Air-Mobile-Native-StageText.aspx) ://blog.flexicious.com/post/Scrolling-Issues-With-TextInput-for-Flex-Air-Mobile-Native-StageText.aspx它适用于我们的场景，应该适用于大多数其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T09:50:49.303

升级到 3.3 应该可以解决此问题

[http://blogs.adobe.com/flashplayer/2012/06/introducing-air-3-3-and-flash-player-11-3.html](http://blogs.adobe.com/flashplayer/2012/06/introducing-air-3-3-and-flash-player-11-3.html)

# objective-c - 通过触摸移动多个对象

> ID：10958029
> 
> 赞同：1
> 
> 时间：2012-06-09T03:02:02.277
> 
> 标签：objective-c, ios, touch, uilabel

`UILabels`我有一个应用程序，您必须在其中通过触摸移动不同的字母（以 的形式）。由于有许多不同的`UILabel`对象，我尝试创建此代码，以防止任何标签粘在一起：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

UITouch *touch = [[event allTouches] anyObject];

CGPoint touchPoint = [touch locationInView: self.view];

bool pickup = YES;

if (pickup) {

    if (CGRectContainsPoint(a.frame, touchPoint)) {

        a.center = touchPoint;

        pickup = NO;
    }
}

if (pickup) {

    if (CGRectContainsPoint(x.frame, touchPoint)) {

        x.center = touchPoint;
        pickup = NO;

    }

}

if (pickup) {

    if (CGRectContainsPoint(x2.frame, touchPoint)) {

        x2.center = touchPoint;
        pickup = NO;

    }

}
if (pickup) {

    if (CGRectContainsPoint(eq.frame, touchPoint)) {

        eq.center = touchPoint;
        pickup = NO;

    }

}        

if (pickup) {

    if (CGRectContainsPoint(b.frame, touchPoint)) {

        b.center = touchPoint;
        pickup = NO;

    }

}

} 
```

但这里有一些问题：

1.  移动不流畅，一旦我的手指移动图像，标签就会停止移动（显然是因为`if (CGRectContainsPoint(a.frame, touchPoint))`

2.  而且，一旦我在移动另一个标签时绕过一个标签，我的手指就会开始移动我绕过的标签

我该怎么做，我知道有比我现在正在做的更好的方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T03:11:38.150

尝试将所有内容放在一个链接动画`touchesMoved`中是老派。在每个标签上添加手势识别器。然后在那个选择器中试试这个 -

```
- (void)labelTouchSelector:(UIGestureRecognizer *)gesture
{
    CGPoint touchPoint = [gesture locationInView: self.view];

    [UIView animateWithDuration:1.0 
                          delay:0 
                        options:UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction
                     animations:^(void) 
     {
         if(CGRectContainsPoint(a.frame, touchPoint))
         {
              a.center = touchPoint;
              pickup = NO;
         }
     } 
     completion:^(BOOL finished) 
     {
         if(finished)
         {
             //do some cleanup here
             pickup = NO;
         }
     }];
    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T18:21:23.340

我会尝试创建一个新的 UILabel 类来实现 touchesBegan、touchesMoved 和 touchesEnded。将您的相关代码放入每个方法中。为这个类创建一个方法，为成员分配一个字母的值。在 ViewController 中实例化此类的每个新对象，并在此处设置其字母以及其他必要的详细信息，例如 label.center。我希望这会有所帮助。

我的代码中的示例（使用 UIImage，您需要找到一种使用 UILabel 初始化类的方法，但是标准方法会这样做）：

```
@implementation myClass

- (id)initWithImage:(UIImage *)image
{
    if (self = [super initWithImage:image])
        self.userInteractionEnabled = YES;

    return self;
}

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch * touch = [touches anyObject];
    pos = [touch locationInView: self];

    self.center = pos;

        NSLog(@"Touches Began Called.");

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    activePoint = [[touches anyObject] locationInView:self];    

    int dx = self.center.x + (activePoint.x - pos.x); 
    int dy = self.center.y + (activePoint.y - pos.y);

    CGPoint newPoint = CGPointMake(dx,dy);
    self.center = newPoint;

        NSLog(@"Touches Moved Called.");

}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    NSLog(@"Touches Ended Called.");

} 
```

# dojo - 提交带有前导零的 Dojo NumberTextBox

> ID：10958031
> 
> 赞同：2
> 
> 时间：2012-06-09T03:02:17.403
> 
> 标签：dojo

我是 Dojo Toolkit 的新手，我想在我的表单中提交一个 NumberTextBox 字段，保持前导零。那可能吗 ？
我正在使用最新版本的 Dojo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:33:51.510

我不确定我是否理解您的问题，如果您想发送号码`00,01`，现在获取`0,01`，我的建议是：

*   `ValidationTextBox`改为使用`Number...`，并附加到其正确的正则表达式
*   使用模式属性：`pattern:'#,#00.00'`- 获得 2 个前导零。

# layout - N2 CMS 自定义主题/皮肤开发

> ID：10958033
> 
> 赞同：0
> 
> 时间：2012-06-09T03:02:23.947
> 
> 标签：layout, themes, n2cms

我是 N2CMS 的新手，正在使用表单模板来设计网站。我有一个来自客户的主题和布局。但我无法将它与 N2 集成。我想进行自定义修改，例如布局修改。我应该在哪里放置诸如 CSS、图像之类的资产，我应该在哪里插入 Masterpage 或将被整个站点遵循的布局？即使 N2CMS 文档能够定义这一点，我也无法在网络上找到特定链接。我有我不想集成的 Artisteer 模板。

请提前帮助Thnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:21:18.640

首先，开发N2网站的第一个参考应该是[模板包](http://n2cms.codeplex.com/downloads/get/264787)。

*我应该把 CSS、图像等资产放在哪里*

在模板包中，转到 App_Themes 文件夹，您可以在其中看到许多放置 CSS 和图像的皮肤文件夹。

*我应该在哪里插入 Masterpage 或整个站点将遵循的布局？*

这里是母版页的路径：Templates / UI / Layouts / Top+SubMenu。

# database - 在磁盘上存储待办事项列表、提醒及其链接数据的最佳方式

> ID：10958035
> 
> 赞同：0
> 
> 时间：2012-06-09T03:02:49.203
> 
> 标签：database, file, tree, storage

我正在做一个关于生产力工具的附带项目，它具有以下功能：待办事项列表、约会（作为待办事项）、目标（分解为行动步骤 -> 待办事项）、重复的待办事项每天等等。存储这些信息的最佳方式是什么？

1.  我使用数据库，那么每次程序都必须查询数据库。作为一个“小”程序，这将是低效的。
2.  我使用磁盘上的文件，然后必须读取它们，并且每次都必须对信息进行排序。
3.  我可以看到使用文件的效率，以及包含信息的多个哈希/搜索树吗？那会让搜索变得更容易吗？操纵呢？

问题的上下文是 80% 的搜索/检索 :: 20% 的操作/创建 什么形式的数据存储会简单、高效？数据包含字符串、日期时间、属性（优先级、属于某个组等）等项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T03:12:39.060

我认为 SQLite 是一个不错的选择。由于您没有存储那么多数据，因此您可以使用 SQL 进行搜索`LIKE`，而不必担心速度会受到影响。

# java - 在 Java 中扩展类

> ID：10958037
> 
> 赞同：0
> 
> 时间：2012-06-09T03:03:43.573
> 
> 标签：java, android

我正在尝试将一个类扩展到多个其他类，例如

```
public class Ability extends Character 
```

因此，我的代码中出现错误：

> 隐式超级构造函数 Character() 未定义。必须显式调用另一个构造函数 Defense.java

我的代码是：

```
public class Character {
    int characterID;
    double characterHealth;

    public Character(int charID, double charHealth) {
        characterID = charID;
        characterHealth = charHealth;
    }
}

public class Defense extends Character {
    int armorClass;
    int difficultyClass;

    public Defense(int newAC, int newDC){
        armorClass = newAC;
        difficultyClass = newDC;
    }
} 
```

我不确定如何调用另一个构造函数。如果有人可以指出为什么以及如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T03:06:53.413

我不确定你会从哪里得到 and 的值`charId`，`charHealth`也许这些是常量，但你是这样做的：

```
public Defense(int newAC, int newDC)
{
    super(charId, charHealth);
    armorClass = newAC;
    difficultyClass = newDC;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T03:07:54.887

从子类ctor：

```
super(charId, charHealth); 
```

由于超类没有默认构造函数，因此您必须显式调用非默认构造函数。

# ruby-on-rails - Rails 3.2 应用程序中的 OAuthException 101

> ID：10958040
> 
> 赞同：3
> 
> 时间：2012-06-09T03:04:16.713
> 
> 标签：ruby-on-rails, omniauth

我在我的应用程序中收到此错误

```
{
   "error": {
      "message": "Missing client_id parameter.",
      "type": "OAuthException",
      "code": 101
   }
} 
```

我做了什么： - 我有一个 config/initializers/omniauth.rb 文件，其中包含：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, ENV['my App ID:'], ENV['my app Secret']
end 
```

*   我有一个包含 link_to “使用 Facebook 登录”、“/auth/facebook”的视图

我的应用程序未嵌入 facebook，并且此错误发生在我的在线应用程序（不是本地主机）中 这是我的 Gemfile

```
gem 'rails', '3.2.2'
gem 'fbgraph'
gem 'omniauth'
gem 'omniauth-facebook'

gem 'mysql2'
gem 'less-rails'
group :assets do
  gem 'less-rails'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'twitter-bootstrap-rails'
   gem 'therubyracer'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

谢谢你的帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:03:51.963

尝试删除 ENV[]：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, 'my App ID:', 'my app Secret'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:12:35.133

删除 ENV[ ] 并重新启动 rails 服务器解决了我的问题。

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, 'my App ID:', 'my app Secret'
end 
```

有关 RailsCasts 教程的更多信息：http: [//goo.gl/yrj6c](http://goo.gl/yrj6c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T22:09:20.257

您是否确保将 Facebook Development 上 webapp 的站点 URL 从 localhost 更改为您的域名？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T22:54:11.343

由于某种原因，该应用程序无法获取 api 密钥和秘密。现在我得到一个

```
Koala::Facebook::APIError (OAuthException: Error validating verification code.) while doing this:
        @oauth = Koala::Facebook::OAuth.new('app key', 'app secret', 'http://mywebsite.com/facebook/callback')

    @oauth.url_for_oauth_code
    @oauth.get_access_token(params[:code]) 
```

它发生在用户接受通过 facebook 登录之后

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T04:08:39.137

OmniAuth.config.logger = Rails.logger

Rails.application.config.middleware.use OmniAuth::Builder do provider :facebook, 'my App ID:', 'my app Secret' end

和....起飞 ENV[],

每次更新文件时不要忘记重新启动服务器。:)

# vb.net - menustrip 菜单下拉项目名称在 msgbox 中显示为空白

> ID：10958044
> 
> 赞同：0
> 
> 时间：2012-06-09T03:05:53.917
> 
> 标签：vb.net

我在表单加载时将项目作为下拉项目添加到菜单中。

从同一个子中，我尝试在 msgbox 中输出 menustrip 下拉项目，但我的所有项目都得到空白响应。

```
Private Sub PopulateLoadChildMenu()
    msItemLoad.DropDownItems.Clear()
    Dim fi As FileInfo
    If Directory.GetFiles(_playlistpath).Length > 1 Then
        msItemLoad.Enabled = True
    End If

    For Each fi In _files
        msItemLoad.DropDownItems.Add(Path.GetFileNameWithoutExtension(_playlistpath & fi.Name))
    Next

    For Each MyMenuItem As ToolStripMenuItem In msItemLoad.DropDownItems
        txbList.Text = txbList.Text & ", " & MyMenuItem.Tag
    Next

End Sub 
```

我在这样的 Sub 中使用它

```
Private Sub FormLoad(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim fi As FileInfo
    msItemLoad.Enabled = False

   If Directory.GetFiles(_playlistpath).Length = 1 Then
        For Each fi In _files
            LoadPlaylist(_playlistpath & fi.Name)
        Next
    End If

   PopulateLoadChildMenu()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T03:17:51.453

查看您正在使用`Tag`属性的代码（*如果您没有明确设置数据，您将不会向您的 TextBox 添加任何内容*）：

```
txbList.Text = txbList.Text & ", " & MyMenuItem.Tag 
```

您是否打算使用该`Text`物业

```
txbList.Text = txbList.Text & ", " & MyMenuItem.Text 
```

# javascript - jQuery data() 将字符串视为数字的问题

> ID：10958047
> 
> 赞同：49
> 
> 时间：2012-06-09T03:06:37.543
> 
> 标签：javascript, jquery, floating-point

我有一个存储在 HTML5 数据中的 MySQL BIGINT。然后我试图访问该值并通过 AJAX 调用传递它。

```
<div data-id="211285677671858177"> 
```

和 JavaScript：

```
var send_data = {
    id: '' + $(this).data('id')
}
$.post('/send.php', send_data); 
```

问题是 jQuery`data`函数似乎将该值检索为浮点而不是字符串。所以将它附加到一个空白字符串并没有帮助，因为它已经太晚了 - 它已经被四舍五入（在这种情况下为`211285677671858180`）。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-09T03:17:55.513

这实际上不是“long int”的情况，您得到的数字是最接近的可用浮点数表示。

无论如何，您希望将值作为字符串。引用[jQuery 文档`.data`](http://api.jquery.com/data/)（强调我的）：

> 每次尝试都将字符串转换为 JavaScript 值（这包括布尔值、数字、对象、数组和 null），否则将其保留为字符串。**要将值的属性作为字符串检索而不进行任何转换，请使用 attr() 方法。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T03:14:41.587

JavaScript 中没有“长整数”之类的东西。所有数字都是 64 位浮点数。您的号码无法以 IEEE-794 浮点表示形式准确表示。

“解决”这个问题的唯一方法是将数字变成可以处理大整数值的域中的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T03:09:29.630

尝试将其类型转换为字符串：

```
id: '' + $(this).data('id').toString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T03:22:38.457

如果您想将其视为字符串，请尝试用单引号将数据属性值括起来`data`。我想，那里的问题是您将要剥离引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-17T16:19:47.693

我有一个类似的问题，其中数据 ID（字母数字）通过使用 .data() 进行转换，结果最后几个字符被转换为全零。经过一些研究确定这是 .data() 的 jQuery 实现中的一个错误。

参考：[http ://bugs.jquery.com/ticket/7579](http://bugs.jquery.com/ticket/7579)

对我来说，为了直接获取数据 ID 作为解决方法，我直接使用了 .attr("data-id") ，这给了我正确的 ID。

# visual-studio - 为 Windows 8 Metro 和 Windows Phone 设置项目/解决方案的最佳方式是什么？

> ID：10958049
> 
> 赞同：2
> 
> 时间：2012-06-09T03:07:08.420
> 
> 标签：visual-studio, windows-8, windows-runtime, microsoft-metro, windows-phone

似乎有相当多的内容可用于将 Windows Phone 应用程序移植到 Metro，但如果您是从头开始并且想要构建在两个平台上运行的应用程序呢？

据我了解，Windows Phone dev 在 Win7 上使用 VS2010，但 Metro dev 在 Win8 上需要 VS2012 RC。有没有办法同时处理两者？Windows Phone SDK 在 Windows 8 上的 VS2012 上运行正常吗？

是否可以在一个解决方案中同时拥有两个应用程序的项目（以及共享代码的单独项目 - 在可移植类库中？）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T03:45:54.290

我自己没有这样做的环境，所以这充其量只是基于互联网研究的部分答案，加上我自己的一些可能相关的经验。

根据[这个和其他消息来源](http://msdn.microsoft.com/en-us/library/hh266747%28v=vs.110%29.aspx)，VS2012 RC 不能与当前的 Windows Phone SDK 一起使用，这仍然需要 VS2010。例外情况是（正如您提到的）[Portable Class Libraries](http://msdn.microsoft.com/en-us/library/gg597391%28v=vs.110%29)，它似乎确实能够创建与 Windows Phone 7+ 兼容的库。但是，要在实际的 WP7 应用程序中使用这些，您需要在 VS2010 中的正确 WP 项目中引用它们。因此，如果 PCL 不足以满足您的需求，并且您想要具有共享代码的实际目标特定项目，那么单独使用 VS2012 将不是一个选择。

但是，这个故事还有一些内容可能会引起您的兴趣，并且可能会对您有所帮助。

首先是VS2012添加的[解决方案和项目向后兼容](http://gregorybeamer.wordpress.com/2012/03/07/visual-studio-11-project-backwards-compatibility/)。VS 解决方案可以包含项目，即使它们不能被您使用的 VS 版本加载，这意味着您可以构建一个同时包含 VS2012 Metro 项目和 VS2010 WP7 项目的解决方案。在任何一种情况下，项目都将无法加载（我假设），具体取决于您使用的工具版本。

这可能仍然有价值的原因是您还可以创建共享代码的项目，以便将相同的代码库编译为通常不兼容的项目类型，即使它们不是可移植类库。

它的工作方式是，您可以独立于任何项目或使用某些给定类型的项目作为基线创建代码文件，然后将代码文件链接到其他项目和 . 在这种情况下，您可能需要一个 VS2010 WPF 或 Silverlight 5 项目，因为这两个版本都可以打开这些项目。然后，在这个项目旁边创建你的 Metro 和 WP7 项目（一开始没有代码）。接下来，您使用解决方案资源管理器的“添加现有项目”对话框从基线项目中选择文件（但不要单击“添加”）。单击“添加”按钮旁边的向下箭头，您将可以选择“添加为链接”，这正是您想要的。

在两个项目中重复此过程将允许您在一个版本中开发的任何代码或资产流向另一个版本。此外，如果您需要修改或调试基线文件，您可以在任一版本的 VS 中执行此操作，因为基线项目在任一版本中的工作方式相同。

这个故事的最后一部分是，您可以使用条件编译符号和#if 预处理器指令来进一步调整任何必须根据目标发散的共享代码。然而，为了每个人的理智，这应该谨慎使用。

我实际上在 VS2010 中以这种方式在 WP7、Silverlight 和其他项目之间共享了代码，并且在需要的地方工作得很好。

因此，您仍然需要切换 IDE 来编译和部署 Metro 应用程序和 WP 应用程序，但从理论上讲，我认为即使在当前形式下，您实际上也可以从 VS 中挤出很多协同作用。

**今天的新信息**

今天在旧金山举行的 Windows Phone 峰会上，微软宣布 Visual Studio 2012 将能够编写面向 Windows 8 和 Windows Phone 7.5/8 的应用程序。这似乎改变了上面给出的信息，并提供了一个明显而简单的解决方案。所以你还没有这个，但以后要注意它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:16:25.177

一种方法，例如[至少一个开源项目](http://localangle.codeplex.com/)使用的方法是使用链接源文件，共享可以共享的内容，并分支需要更改的内容。这似乎是一种简单的方法，并且允许跨所有平台进行维护。

# ruby-on-rails - 从 id 子集中查找

> ID：10958052
> 
> 赞同：0
> 
> 时间：2012-06-09T03:08:33.870
> 
> 标签：ruby-on-rails

就像是`Model.find(array_of_ids, :conditions => {:attribute => "something"})`

我将在其中返回属性 = 某物的所有条目，但仅来自该 ID 数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T03:37:40.867

```
Model.where id: array_of_ids, attribute: 'something' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T03:12:03.880

```
Model.where('id in (?)', array_of_ids).where(attribute: "something") 
```

# .net - 如何创建包含集合集合的配置节？

> ID：10958054
> 
> 赞同：36
> 
> 时间：2012-06-09T03:08:42.320
> 
> 标签：.net, configuration, system.configuration

我需要一个类似这样的配置部分：

```
<myConfig>
    <mySubConfig1>
        <mySubSubConfig1 keyAttribute="value1">
            <mySubSubConfig1Element keyAttribute="value1"/>
            <mySubSubConfig1Element keyAttribute="value2"/>
        </mySubSubConfig1>
        <mySubSubConfig1 keyAttribute="value2">
            <mySubSubConfig1Element keyAttribute="value1"/>
        </mySubSubConfig1>
    </mySubConfig1>
    <mySubConfig2>
        <mySubSubConfig2 keyAttribute="value1">
            <mySubSubConfig2Element keyAttribute="value1"/>
            <mySubSubConfig2Element keyAttribute="value2"/>
        </mySubSubConfig2>
        <mySubSubConfig2 keyAttribute="value2">
            <mySubSubConfig2Element keyAttribute="value1"/>
        </mySubSubConfig2>
    </mySubConfig2>
    <mySubConfig3>
        <mySubSubConfig3 keyAttribute="value1">
            <mySubSubConfig3Element keyAttribute="value1"/>
            <mySubSubConfig3Element keyAttribute="value2"/>
        </mySubSubConfig3>
        <mySubSubConfig3 keyAttribute="value2">
            <mySubSubConfig3Element keyAttribute="value1"/>
        </mySubSubConfig3>
    </mySubConfig3>
</myConfig> 
```

`IConfigurationSectionHandler`我还没有找到可以在不使用旧界面的情况下实现这一点的魔力。有谁知道该怎么做？

`myConfig`如果and the `mySubConfign`are `ConfigurationSectionGroup`or对我来说没关系`ConfigurationSection`。

此外，如果重要，这将在 web.config 中使用。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-06T15:17:36.760

在您的示例配置文件中，`myConfig`将是一个继承自`ConfigurationSection`三个属性的类，名为`mySubConfig1`,`mySubConfig2`和`mySubConfig3`.

属性的类型`mySubConfig1`（以及 2 和 3）将是一个继承自`ConfigurationElementCollection`、实现`IEnumerable<ConfigElement>`和装饰的类`ConfigurationCollection`（其中“AddItemName”属性设置为“mySubSubConfig1”）。

下面是我在生产部署中使用的方法的完整示例实现。请务必包含 System.Configuration***程序集***。（这有点令人困惑，因为 System.Configuration 命名空间是在其他程序集中定义的，但您必须包含 System.Configuration*程序集*才能使用下面的代码。）

以下是自定义配置类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Configuration;

namespace ConfigTest {
    class CustomConfigSection : ConfigurationSection {

        [ConfigurationProperty( "ConfigElements", IsRequired = true )]
        public ConfigElementsCollection ConfigElements {
            get {
                return base["ConfigElements"] as ConfigElementsCollection;
            }
        }

    }

    [ConfigurationCollection( typeof( ConfigElement ), AddItemName = "ConfigElement" )]
    class ConfigElementsCollection : ConfigurationElementCollection, IEnumerable<ConfigElement> {

        protected override ConfigurationElement CreateNewElement() {
            return new ConfigElement();
        }

        protected override object GetElementKey( ConfigurationElement element ) {
            var l_configElement = element as ConfigElement;
            if ( l_configElement != null )
                return l_configElement.Key;
            else
                return null;
        }

        public ConfigElement this[int index] {
            get {
                return BaseGet( index ) as ConfigElement;
            }
        }

        #region IEnumerable<ConfigElement> Members

        IEnumerator<ConfigElement> IEnumerable<ConfigElement>.GetEnumerator() {
            return ( from i in Enumerable.Range( 0, this.Count )
                     select this[i] )
                    .GetEnumerator();
        }

        #endregion
    }

    class ConfigElement : ConfigurationElement {

        [ConfigurationProperty( "key", IsKey = true, IsRequired = true )]
        public string Key {
            get {
                return base["key"] as string;
            }
            set {
                base["key"] = value;
            }
        }

        [ConfigurationProperty( "SubElements" )]
        public ConfigSubElementsCollection SubElements {
            get {
                return base["SubElements"] as ConfigSubElementsCollection;
            }
        }

    }

    [ConfigurationCollection( typeof( ConfigSubElement ), AddItemName = "ConfigSubElement" )]
    class ConfigSubElementsCollection : ConfigurationElementCollection, IEnumerable<ConfigSubElement> {

        protected override ConfigurationElement CreateNewElement() {
            return new ConfigSubElement();
        }

        protected override object GetElementKey( ConfigurationElement element ) {
            var l_configElement = element as ConfigSubElement;
            if ( l_configElement != null )
                return l_configElement.Key;
            else
                return null;
        }

        public ConfigSubElement this[int index] {
            get {
                return BaseGet( index ) as ConfigSubElement;
            }
        }

        #region IEnumerable<ConfigSubElement> Members

        IEnumerator<ConfigSubElement> IEnumerable<ConfigSubElement>.GetEnumerator() {
            return ( from i in Enumerable.Range( 0, this.Count )
                     select this[i] )
                    .GetEnumerator();
        }

        #endregion
    }

    class ConfigSubElement : ConfigurationElement {

        [ConfigurationProperty( "key", IsKey = true, IsRequired = true )]
        public string Key {
            get {
                return base["key"] as string;
            }
            set {
                base["key"] = value;
            }
        }

    }

} 
```

这是 App.config 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="CustomConfigSection" type="ConfigTest.CustomConfigSection,ConfigTest" />
  </configSections>

  <CustomConfigSection>
    <ConfigElements>
      <ConfigElement key="Test1">
        <SubElements>
          <ConfigSubElement key="-SubTest1.1" />
          <ConfigSubElement key="-SubTest1.2" />
        </SubElements>
      </ConfigElement>
      <ConfigElement key="Test2">
        <SubElements>
          <ConfigSubElement key="-SubTest2.1" />
          <ConfigSubElement key="-SubTest2.2" />
        </SubElements>
      </ConfigElement>
    </ConfigElements>
  </CustomConfigSection>

</configuration> 
```

最后，这是访问和使用配置文件的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Configuration;

namespace ConfigTest {
    class Program {
        static void Main( string[] args ) {

            var l_configSettings = (CustomConfigSection) ConfigurationManager.GetSection( "CustomConfigSection" );

            foreach ( var l_element in l_configSettings.ConfigElements.AsEnumerable() ) {
                Console.WriteLine( l_element.Key );

                foreach ( var l_subElement in l_element.SubElements.AsEnumerable() ) {
                    Console.WriteLine( l_subElement.Key );
                }

            }

            Console.WriteLine( "Press any key..." );
            Console.ReadKey( true );

        }
    }
} 
```

Sunil Singh 在他的博客上写了一个更轻量级的替代方案：http:
[//blogs.quovantis.com/net-creating-a-custom-configuration-section-that-c ​​ontains-a-collection-of-collections/](http://blogs.quovantis.com/net-creating-a-custom-configuration-section-that-contains-a-collection-of-collections/)

# php - URL中的PHP处理片段标识符

> ID：10958061
> 
> 赞同：5
> 
> 时间：2012-06-09T03:10:24.937
> 
> 标签：php, javascript, facebook, meta-tags, fragment-identifier

我在这里遇到了很大的困境，希望社区提供一些建议。这是我的问题：

我创建了一个包含大量动态内容的网站，所有内容都通过 AJAX 拉取并通过 JS 显示。我目前允许直接链接到我的内容的方式是使用 JS 动态修改片段标识符，这是一个示例：

[http://www.mysite.com/home#/123](http://www.mysite.com/home#/123)

其中 123 是内容的 ID。当内容关闭时，它会再次剥离片段标识符。

这非常有效，当人们加载页面时，我的 AJAX 请求成功地请求了“123”文章。但我刚刚在所有文章上实现了一个 Facebook 点赞按钮，现在我遇到了障碍。

基本上，Facebook 找到与您的“喜欢”内容相关联的缩略图、标题和 URL 的方式是检查传递到 fb 的 URL 的元标记，如 iframe。它通过在 URL 上执行 GET 请求、检查元标记的内容，然后在 Facebook 上显示这些内容来做到这一点。

问题是片段标识符没有传递给服务器，所以我无法在 PHP（据我所知）中使用特定请求文章中的内容动态生成这些元标记。

例如，我希望能够做这样的事情：

```
$id_vals = get_id_values($hash_fragment);
echo '<meta property="og:title" content="'.$id_vals['title'].'" />'; 
```

您的第一个想法可能是：为什么不使用 GET 请求或查询字符串？IE：

[http://www.mysite.com/home?id=123](http://www.mysite.com/home?id=123)

然而，这种方法的问题在于 Javascript 无法动态更改 URL 的这一部分，它只能更改片段标识符。这意味着所有指向我们文章的直接链接都需要刷新页面。这与我们采用的整个“动态”方法背道而驰——我可能会补充说这真的很好:)

所以我现在有点难过。我能想到的唯一半解决方案是同时使用两种方法：

在 fb like 请求中使用 get 参数，对于直接链接使用片段标识符。

但这会带来以下问题：

*   如果用户将直接链接粘贴到 Facebook 上，它将包含片段标识符，并且正确的元数据不会显示在 Facebook 上。
*   我需要做一些奇怪的重定向魔术来修复 URL 的格式以删除 ID（即检测是否传入了 GET 参数并重定向到等效的片段标识符）。但我不知道 FB 是否也会遵循重定向并从重定向页面而不是第一页获取元标记，这实际上会使这个解决方案无论如何都没用。

对不起文字墙！感谢您提供的任何意见。

**编辑：**我刚刚测试了我提出的涉及两者组合的解决方案，我可以确认 Facebook 遵循重定向，所以这个解决方案根本不起作用。这很令人沮丧！

**编辑编辑：**实现我的“混合”想法的一种可能方法是使用 window.location 重定向而不是 PHP header() 调用重定向，因此 Facebook 从原始页面获取元标记，对于那些有类似问题的人.

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:09:40.817

如果您可以重新调整您的网站以使用 hashbang `#!`URL，那么 Facebook 在某种程度上默默地支持[Google 的 AJAX 抓取规范](https://developers.google.com/webmasters/ajax-crawling/docs/specification)。

在遇到包含 的 URL 时`#!`，它会自动将该文本和以下文本转换为 GET 友好的查询字符串`?_escaped_fragment_=`。您的服务器端代码可以关闭该 GET 参数（如果存在）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T00:52:08.370

index.php 只是简单地回显 session['refer'] ，当它被 Navigasyon.js 刷新时，id 在您输入的片段末尾添加 /kill 以停止循环刷新过程！

```
<?php session_start(); ?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Boom - test</title>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/Navigasyon.js"></script>
    </head>
    <body onLoad="if (location.href.indexOf('/kill')==-1) location.replace(location.href+'/kill')">
        <?php
//echo $_GET['url'];
//echo parse_url();
//echo $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"].$_SERVER['PHP_SELF'];;
        if (isset($_SESSION['refer']))
            echo $_SESSION['refer'];
        ?>
    </body>
</html> 
```

Navigasyon.php 所有的魔法都在这里发生！只需通过 ajax 将片段发送到 navg.php 并将其注册到会话中，并在确保终止刷新循环索引时从服务器响应相同的片段 php 添加 /kill 片段并停止

```
var whereAmI = window.location.hash;
var prsdUrl = window.location.hash.split("/");
var a = 0; //#!
var b = 1; //Sayfa dil
var c = 2; //Sayfa id

if(prsdUrl[a] == "#!")
{
    $.post("navg.php", {
        refer: whereAmI
    },
    function(data) {
        //if(data='ref') document.location.reload();
        if(data==whereAmI) {
            if(prsdUrl[c] != 'kill') {
                document.location.reload();
            }
        } 
    });
} 
```

navg.php 你告诉这部分发生了什么！

```
<?php
session_start();
$_SESSION['refer'] = $_POST['refer']; ?>
<?php echo $_SESSION['refer'];
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T04:52:15.540

PHP's [parse_url](http://uk.php.net/manual/en/function.parse-url.php) function returns everything including the hash fragment, so you could either use `parse_url` and access the `fragment` key of the returned array

```
$url = 'http://www.mysite.com/home#/123';
$parts = parse_url($url);
$fragment = $parts['fragment']; // => '/123' 
```

or alternatively pass in the `component` flag `PHP_URL_FRAGMENT`, and just retrieve the fragment itself

```
$fragment = parse_url($url, PHP_URL_FRAGMENT); // => '/123' 
```

# node.js - 在 Express JS 中为 Ajax 设置 REST 路由，仅用于 Backbone

> ID：10958063
> 
> 赞同：7
> 
> 时间：2012-06-09T03:10:45.733
> 
> 标签：node.js, backbone.js, routes, express

我正在使用带有 Express 的 Node.js 重写现有网站。

该站点的前端将使用 Backbone JS，因此我需要使所有必要的路由符合本机 Backbone 同步。现在大多数 URL 的客户端和 Backbone 同步将是相同的。但它们不适用于常规 GET，因为它们需要返回 JSON。

所以我在想，将扩展添加到 Backbone 中的模型/集合 URL 是否是一个好主意，例如`.json`, 和 Express 中的每个路由都有这个：

```
app.get('/p/:topCategory/:category/:product.:format', function(req, res) { ... }); 
```

我们在哪里`if (req.params.id == 'json')`发送 JSON，否则我们渲染 HTML？

还是有更好的方法？请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-09T09:42:22.667

更好的方法是使用 Express 3.x 中的内容协商功能，即`res.format`：

[https://github.com/visionmedia/express/blob/master/lib/response.js#L299-378](https://github.com/visionmedia/express/blob/master/lib/response.js#L299-378)

```
res.format({
  text: function(){
    res.send('hey');
  },

  html: function(){
    res.send('<p>hey</p>');
  },

  json: function(){
    res.send({ message: 'hey' });
  }
}); 
```

你的方法也可以，Yammer for ex。正在使用相同的方法：http: [//developer.yammer.com/api/#message-viewing](http://developer.yammer.com/api/#message-viewing)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-09T03:18:43.907

`Accept`在您的请求中使用标头：`Accept: application/json`如果您想要接收 JSON，`Accept: text/HTML`如果您想要 HTML。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T12:11:37.910

另一种方法还检查是否为 jQuery 等设置了“X-Requested-With”标头。

```
var onlyAllowJsonRequests = function (req, res, next) {

    var acceptJson = (req.accepted.length && _.any(req.accepted, function (acc) { return acc.value.indexOf("json") !== -1 }));

    // also check that "X-Requested-With": "XMLHttpRequest" header is set
    if (acceptJson && (req.xhr === true)) {
        next();
    } else {
        res.send(406, "Not Acceptable");
    }
};

app.use(onlyAllowJsonRequests); 
```

NB 下划线是一种依赖。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-16T16:53:40.870

我认为正确的方法是在您的应用程序中实现**内容协商**。是的，Express 3.x 工具是一种实现方式，并且可以直接回答您的问题，但我认为这不是最好的方式，因为它将内容协商责任置于路由逻辑中。我认为这不是一个好地方，因为它不遵循[单一责任](http://en.wikipedia.org/wiki/Single_responsibility_principle)原则，将**内容协商**放在路由逻辑中。

我尝试在我的[博客引擎中实现](https://github.com/ijoey/joeyguerra/blob/master/represent.js)**内容协商**；回顾这可能有助于指导您朝着一个好的方向前进。要点是代码通过**内容协商**逻辑确定文件扩展名。然后，使用文件扩展名，它想找到相应的视图文件，将其呈现为响应并将其发送回客户端。这个想法是它根据内容协商以请求的表示形式响应请求的资源。[路由逻辑](https://github.com/ijoey/joeyguerra/blob/master/resources/index.js#L23)只指定一个视图，但不知道内容协商。这发生在路由逻辑之外，这使得设计更加灵活。

 **这种设计的结果是能够请求资源的特定表示，例如：

[http://blog.joeyguerra.com/index.json](http://blog.joeyguerra.com/index.json)并获得 JSON 表示 [http://blog.joeyguerra.com/index.phtml](http://blog.joeyguerra.com/index.phtml)并获得部分（或 HTML 片段）HTML 表示 [http://blog.joeyguerra。 com/index.xml](http://blog.joeyguerra.com/index.xml)并获取 XML 表示。**

# c# - 带有列表的 Foreach/for 循环 不会正确更新

> ID：10958066
> 
> 赞同：-2
> 
> 时间：2012-06-09T03:11:10.977
> 
> 标签：c#, list, loops, xna

我遇到了一些`foreach`循环问题`List<T>`

```
foreach (DefenceTerminal defence in DefenceManager.defenceCollection)
{
    defence.ReadNetworkPacket(packetReader);
    //this is a very simple function that just sets defence.damage = to whatever
    //it properly sends the value and sets it
    //defence.damage is a int
} 
```

当我离开循环时，价值......消失了。（它无法改变）

离开循环后，所有值都保持不变

在更新中以类似的方式访问该列表。

我也使用`for`循环作为替代方案，所以我想这比`List<T>`其他任何问题都更重要。

但是，我更愿意继续使用列表。建议？

对于那些想要非常简单的功能的人来说，这是非常简单的功能

```
 public void ReadNetworkPacket(PacketReader packetReader)
    {
        damage = packetReader.ReadInt32();
    } 
```

IT 工作，列表和循环没有。

再次：虽然在循环中一切正常，我已经检查了多次，但它并没有......坚持......就像它制作了自己的小个人列表来搞乱然后在完成后将其丢弃，这在您尝试更新列表。我敢肯定，这是一个与 List 有关的奇怪特质。

其他废话：

```
public static List<DefenceTerminal> defenceCollection = new List<DefenceTerminal>();

        for (int i = 0; i < factionCount; i++)
        {
            DefenceTerminal d = new DefenceTerminal();
            for (int j = 0; j < defenceLimit; j++)
            {
                defenceCollection.Add(d);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T03:27:28.507

请发布更多代码，但我觉得您创建的集合过于本地化，将其移到类范围的更高位置，就像整个类的私有成员变量一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T03:19:03.863

听起来像是`DefenceTerminal`一种`struct`，因此是一种`value`类型。这意味着当您浏览时，`foreach loop`您只是在更改副本。尝试使用经典`for loop`并索引实际列表。

# c++ - 字符串::查找问题 (C++)

> ID：10958069
> 
> 赞同：1
> 
> 时间：2012-06-09T03:11:47.247
> 
> 标签：c++, string, find

我的 string::find 实现有点问题。

输入是一个长字符串，由这个可能的示例组成：input = "one_thousand_and_fifty_one"。

我的问题似乎是，在一个包含多个“和”的输入字符串中，只有第一个和被删除，其他的不是。

到目前为止，这是我的代码，它找到“and”，但只删除“a”之前的字母不是“s”（表示“千”）。

```
string toKill = "and";

size_t andF = input.find(toKill);
    if (andF != string::npos) {
        if (input[(andF - 1)] != 's') {
            input.erase(andF, 4);
        }
    } 
```

编辑：我忘了提到，输入中唯一包含“和”的另一个词是“千”，所以这是一个特例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T03:27:46.497

试试这个：

```
string toKill = "and";
size_t andF = 0;

while ((andF = input.find(toKill, andF)) != string::npos) {
    if (andF == 0 || input[andF - 1] != 's') {
        input.erase(andF, 4);
    }
    else ++andF;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T03:26:31.437

我会为此使用正则表达式（来自 boost、PCRE 或 C++11 标准）——但如果我必须自己做，我的代码看起来像这样：

```
string toKill = "and";
size_t pos = 0;
while( ( pos = s.find(toKill, pos) )!=std::string::n_pos )
{
  //Check it doesn't start with an additional letter
  if( pos!=0 && is_alpha(s[pos-1]) ) { pos++; continue; }
  //Check it doesn't end with an additional letter
  if( pos+toKill.size()!=s.size() && is_alpha(s[pos+toKill.size()]) { pos++; continue;}
  //Remove it and the trailing whitespace (or punctuation)
  s.erase(pos,toKill.size()+1);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T03:27:45.227

您的代码中需要（至少）另外两件事。第一个是为字符串处理整个字符串的循环，`and`第二个是跳过已经检查过的字符串的能力。

您可能还想处理字符串*可能*以 开头的可能性`and`，尽管这不太可能：对您期望的内容保持自由，对您交付的内容保持具体。

以下代码将是一个很好的起点：

```
#include <iostream>
#include <string>

int main (void) {
    std::string inputStr = "one thousand and fifty one";
    std::string killStr = "and ";

    size_t startPos = 0;
    size_t andPos;
    while ((andPos = inputStr.find (killStr, startPos)) != std::string::npos) {
        if ((andPos == 0) || (inputStr[(andPos - 1)] != 's')) {
            inputStr.erase(andPos, killStr.length());
            startPos = andPos;
        } else {
            startPos = andPos + 1;
        }
    }

    std::cout << inputStr << '\n';
    return 0;
} 
```

而且，由于我`and`对在字符串的开头有偏执，迈克尔正确地叫我不要在字符串的*末尾处理它*^((a))，你可以修改它这样做：

```
#include <iostream>
#include <string>
#include <cstring>

static bool endsWith (std::string s1, std::string s2) {
    size_t s1Len = s1.length();
    size_t s2Len = s2.length();
    if (s2Len > s1Len)
        return false;
    return (strcmp (s1.c_str() + s1Len - s2Len, s2.c_str()) == 0);
}

int main (void) {
    std::string inputStr = "and one thousand and fifty one thousand and";
    std::string killStr = "and ";

    size_t startPos = 0;
    size_t andPos;
    while ((andPos = inputStr.find (killStr, startPos)) != std::string::npos) {
        if ((andPos == 0) || (inputStr[(andPos - 1)] != 's')) {
            inputStr.erase (andPos, killStr.length());
            startPos = andPos;
        } else {
            startPos = andPos + 1;
        }
    }
    if (!endsWith (inputStr, "sand") && endsWith (inputStr, "and"))
        inputStr.erase (inputStr.length() - 3);

    std::cout << inputStr << '\n';
    return 0;
} 
```

* * *

^((a))如果我要成为一个书呆子，我最好把它做好:-)

# java - 带有新线程的新 JFrame

> ID：10958071
> 
> 赞同：1
> 
> 时间：2012-06-09T03:12:06.420
> 
> 标签：java, multithreading, swing, jframe, event-dispatching

我创建了一个带有组合框和一个按钮的 JFrame，它将创建一个新线程并继续执行操作。我想要一个新的 JFrame 从每个新线程开始，以将日志输出到新的 JFrame。但是，即使我将与 JFrame 相关的代码放在新线程中并关闭该 JFrame，它也会结束整个程序而不是那个正在运行的线程。使我想要的成为可能的最佳方法是什么？我只是希望在每个新线程启动时打开一个新的 JFrame，当我关闭该 JFrame 时，它​​将结束该线程。

问候！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T03:17:13.873

默认情况下，关闭 a`JFrame`只会隐藏它（请参阅[文档`setDefaultCloseOperation()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29)）。如果关闭窗口正在退出您的应用程序，这一定是由于您自己的代码。你不是，碰巧，打电话`setDefaultCloseOperation(JFrame. EXIT_ON_CLOSE)`，是吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T03:19:24.173

这里有一些想法：

*   不要阻塞事件派发线程；改为使用，如此[处](https://stackoverflow.com/a/4637725/230513)`SwingWorker`所示。

*   不要使用多帧；在具有合适[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)的容器中使用面板。

# python - django-registration 和 sha1 作为哈希算法

> ID：10958073
> 
> 赞同：1
> 
> 时间：2012-06-09T03:12:50.493
> 
> 标签：python, sha1, django-registration

我一直在为我的 django 应用程序使用[django-registration](https://bitbucket.org/ubernostrum/django-registration)（感谢`James Bennett`）。我读了一些文章，这些文章谈到了使用安全散列算法和使用盐进行密码散列的重要性。当我查看 django 的源代码时-registration，我发现`sha1`是用来创建的`activation_key`

```
activation_key = hashlib.sha1(salt+username).hexdigest() 
```

`sha1`据我所知，它不再是一种安全的哈希算法。我想知道是否有某种方法可以设置要使用的哈希算法。

你们有什么推荐的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T03:15:50.707

我建议您重新检查它在这里的用途。当用于存储无盐密码时，SHA-1 很弱。当与盐一起使用来生成一个不完全随机的标识符时，它是相当安全的。

# c++ - 如何为一个文件指定构建设置？

> ID：10958075
> 
> 赞同：0
> 
> 时间：2012-06-09T03:13:15.347
> 
> 标签：c++, qt-creator

我正在使用 QT Creator 创建一个应用程序，并且我正在 Windows 上打开一个套接字，但是我不希望使用本机 QT 套接字，而是希望使用 Windows 提供的套接字。我需要在编译时使用标志 -lws2_32 链接到库中，但我似乎找不到可以在 makefile.release 之外添加该选项的地方。我试图编辑makefile，但它被覆盖并且无法编译。有没有办法为一个特定的文件指定一个构建标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:37:20.333

在项目 .pro 文件中添加一行

```
LIBS += -lws2_32 
```

或者

```
LIBS += C:/Path/to/ws2_32.lib 
```

参考[这里](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html#libs)。

# android - 从 Google 位置服务获取状态

> ID：10958076
> 
> 赞同：2
> 
> 时间：2012-06-09T03:14:21.757
> 
> 标签：android, google-maps

我需要向用户展示：

```
Los Angeles, CA

[City],[State Abriviation] 
```

android.location.Address 有 mLocality='Los Angeles' mAdminArea='California'

现在我注意到还有`mSubLocality`? 和`mSubAdminArea`？

我将此限制为搜索美国。但我仍然需要确保状态始终显示为`mAdminArea`. 此外，我更希望它作为状态代码返回，如 AL、AZ、CA 等。我可以使用实用程序来转换这些，但我更愿意取回代码。代码用于县。无论如何，我会`mSubAdminArea`在美国看到一个吗？或者任何状态不会出现在 mAdminArea 中的情况？这个应用程序面向很多人，所以我真的需要确认这个问题。我意识到`mAdminArea`可以为空，这没关系，但是如果返回一个状态，它将总是出现在下面`mAdminArea`而不是`mSubAdminArea`或其他地方。反正有没有得到缩写而不是整个州名？

如果不是，请回答这个问题：[Is there a Util to convert US State Name to State Code。例如。亚利桑那州到亚利桑那州？](https://stackoverflow.com/questions/11005751/is-there-a-util-to-convert-us-state-name-to-state-code-eg-arizona-to-az)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:37:16.657

使用`getAddressLine(index)`检索其部分之一将具有的地址的所有部分`City`, `State Abriviation`。

# php - php 如果为空则跳过动作

> ID：10958080
> 
> 赞同：0
> 
> 时间：2012-06-09T03:14:44.910
> 
> 标签：php, mysql, file-upload, is-empty

我有一个带字段的表格

```
<input type="file" name="file" size="100" value=""> 
```

如果此字段为空，我想跳过尝试上传图像（因为没有图像），只更新任何已更改的信息。如果存在图像，请上传并更新 mysql 数据库。

此代码仅在上传新图像时才有效。添加了`if(!empty`但现在`wrong file type`当表单字段留空时弹出代码？

```
// connect to datebase
require "master.db.php";

if(!empty($_FILES['file']))
    {
      if ( file types )
          {
           // upload the file
          }
       else
          {
           // wrong file type
                 die;
           }
     }

else {
    // update other data in mysql database
    $sql="UPDATE `characters` SET test='test' WHERE ID='$id'";
    $result=mysql_query($sql);

    // if successfully updated mysql.
       if($result){
          echo "<b>Update successful</b> <br />";
          echo "<a href='../test.html'>View result</a>";
          touch('../master.html');
          clearstatcache();
          }

        else {
             echo "Whoops: " . mysql_error(); ;
              }
    mysql_close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:15:04.547

```
 <?php
  if(!empty($_FILES))
  {
    $name = $_FILES["fileToUpload"]["name"];
    $type = $_FILES["fileToUpload"]["type"];
    $size = $_FILES["fileToUpload"]["size"];

    $match = mysql_query("SELECT * FROM `tb_name` WHERE file_name='$name'");
    if(!empty($match))
     {
       while($res=mysql_fetch_array($match))
       {
         if($type == "filetype")
           {
             //upload
           }
         else
            //error
       }
     }
    else
      //file already exists
  }
  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T03:25:32.033

用这个

```
if(!$_FILES['file']){ 
     echo "file is empty" 
} 
```

代替

```
if(empty($_POST['file'])) 
```

* * *

最后

```
 if(!empty($_FILES['file'])){ 
     //file has something
    }
   else{
     //either file is empty or filed is not set
   } 
```

# ios - iOS：渲染到深度缓冲区并从中读取以进行离屏处理

> ID：10958081
> 
> 赞同：3
> 
> 时间：2012-06-09T03:14:45.993
> 
> 标签：ios, touch, opengl-es-2.0, depth-buffer, glreadpixels

# 问题

我的主要目标是获取设备上触摸的模型坐标，以便检查您触摸的内容。我和一个大模型一起工作，必须画很多东西，这些东西也必须是可触摸的。

为了实现这一点，我知道两种可能的方法：一方面，我们可以进行光线投射并将相机的指向矢量与模型相交，我们必须将其存储在内存中的某个位置。另一方面，这就是我想要做的，我们可以用旧的方式来做：

```
function gluUnProject(winx, winy, winz: TGLdouble; 
                  const modelMatrix: TGLMatrixd4; 
                  const projMatrix: TGLMatrixd4; 
                  const viewport: TGLVectori4; 
                  objx, objy, objz 
```

并将屏幕坐标转换回模型坐标。直到这里我是正确的吗？你知道在 opengl 应用程序中进行触摸处理的其他方法吗？如您所见，该函数将 winz 作为参数，这将是屏幕坐标处片段的高度，此信息通常来自深度缓冲区。我已经知道 opengl-es 2.0 不提供对其内部使用的深度缓冲区的访问，就像在“普通”opengl 中那样。那么我怎样才能得到这些信息呢？

[苹果](http://developer.apple.com/library/ios/#DOCUMENTATION/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html#//apple_ref/doc/uid/TP40008793-CH103-SW6)提供了两种可能性。要么创建一个带有深度附件的屏幕外帧缓冲区，要么将深度信息渲染到纹理中。对我来说可悲的是，该手册没有显示将信息读回 iOS 的方法。我想我必须使用 glReadPixels 并从他们那里读回来。我实现了我能找到的所有东西，但无论我如何设置它，我都没有从屏幕外帧缓冲区或纹理中得到正确的高度结果。我期望得到一个带有 z 值的 GL_FLOAT 。

z:28550323

r:72 g:235 b:191 [3]:1 <-- 总是这个

# 代码

## 胶合项目

就像我们现在一样，glu 库在 iOS 中不可用，所以我查找了代码并基于此源实现了以下方法：[link](http://www.codng.com/2011/02/gluunproject-for-iphoneios.html)。GLKVector2 屏幕输入变量是屏幕上的 X、Y 坐标，由 UITabGestureRecognizer 读取

```
-(GLKVector4)unprojectScreenPoint:(GLKVector2)screen {

//get active viewport
GLint viewport[4];
glGetIntegerv(GL_VIEWPORT, viewport);
NSLog(@"viewport [0]:%d [1]:%d [2]:%d [3]:%d", viewport[0], viewport[1], viewport[2], viewport[3]);

//get matrices
GLKMatrix4 projectionModelViewMatrix = GLKMatrix4Multiply(_modelViewMatrix, _projectionMatrix);
projectionModelViewMatrix = GLKMatrix4Invert(projectionModelViewMatrix, NULL);

//in ios Y is inverse
screen.v[1] = viewport[3]-screen.v[1];
NSLog(@"screen: [0]:%.2f [1]:%.2f", screen.v[0], screen.v[1]);

//read from the depth component of the last rendererd offscreen framebuffer
/*
GLubyte z;
glBindFramebuffer(GL_FRAMEBUFFER, _depthFramebuffer);
glReadPixels(screen.v[0], screen.v[1], 1, 1, GL_DEPTH_COMPONENT16, GL_UNSIGNED_BYTE, &z);
NSLog(@"z:%c", z);
*/

//read from the last rendererd depth texture
Byte rgb[4];
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, _depthTexture);
glReadPixels(screen.v[0], screen.v[1], 1, 1, GL_RGBA, GL_UNSIGNED_BYTE, &z);
glBindTexture(GL_TEXTURE_2D, 0);
NSLog(@"r:%d g:%d b:%d [3]:%d", rgb[0], rgb[1], rgb[2], rgb[3]);

GLKVector4 in = GLKVector4Make(screen.v[0], screen.v[1], 1, 1.0);

/* Map x and y from window coordinates */
in.v[0] = (in.v[0] - viewport[0]) / viewport[2];
in.v[1] = (in.v[1] - viewport[1]) / viewport[3];

/* Map to range -1 to 1 */
in.v[0] = in.v[0] * 2.0 - 1.0;
in.v[1] = in.v[1] * 2.0 - 1.0;
in.v[2] = in.v[2] * 2.0 - 1.0;

GLKVector4 out = GLKMatrix4MultiplyVector4(projectionModelViewMatrix, in);
if(out.v[3]==0.0) {
    NSLog(@"out.v[3]==0.0");
    return GLKVector4Make(0.0, 0.0, 0.0, 0.0);
}
out.v[0] /= out.v[3];
out.v[1] /= out.v[3];
out.v[2] /= out.v[3];

return out; 
```

}

它尝试从深度缓冲区或深度纹理中读取数据，这两者都是在绘制时生成的。我知道这段代码效率很低，但首先它必须在我清理之前运行。

我尝试只绘制额外的帧缓冲区（在这里注释掉），只绘制到平铺和一起，没有成功。

## 画

```
-(void)glkView:(GLKView *)view drawInRect:(CGRect)rect {

    glUseProgram(_program);

    //http://stackoverflow.com/questions/10761902/ios-glkit-and-back-to-default-framebuffer
    GLint defaultFBO;
    glGetIntegerv(GL_FRAMEBUFFER_BINDING_OES, &defaultFBO);
    GLint defaultRBO;
    glGetIntegerv(GL_RENDERBUFFER_BINDING_OES, &defaultRBO);
    //GLint defaultDepthRenderBuffer;
    //glGetIntegerv(GL_Depth_B, &defaultRBO);

    GLuint width, height;
    //width = height = 512;
    width = self.view.frame.size.width;
    height = self.view.frame.size.height;

    GLuint framebuffer;
    glGenFramebuffers(1, &framebuffer);
    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);

    /* method offscreen framebuffer
    GLuint depthRenderbuffer;
    glGenRenderbuffers(1, &depthRenderbuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, depthRenderbuffer);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, width, height);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthRenderbuffer);
    */

    //method render to texture
    glActiveTexture(GL_TEXTURE1);
    //https://github.com/rmaz/Shadow-Mapping        
    //http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html
    GLuint depthTexture;
    glGenTextures(1, &depthTexture);
    glBindTexture(GL_TEXTURE_2D, depthTexture);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    // we do not want to wrap, this will cause incorrect shadows to be rendered
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    // set up the depth compare function to check the shadow depth
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_FUNC_EXT, GL_LEQUAL);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_MODE_EXT, GL_COMPARE_REF_TO_TEXTURE_EXT);

    //glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8_OES,  width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT, width, height, 0, GL_DEPTH_COMPONENT, GL_UNSIGNED_INT, 0);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, depthTexture, 0);

    GLenum status = glCheckFramebufferStatus(GL_FRAMEBUFFER) ;
    if(status != GL_FRAMEBUFFER_COMPLETE) {
        NSLog(@"failed to make complete framebuffer object %x", status);
    }

    GLenum glError = glGetError();
    if(GL_NO_ERROR != glError) {
        NSLog(@"Offscreen OpenGL Error: %d", glError);
    }

    glClear(GL_DEPTH_BUFFER_BIT);
    //glCullFace(GL_FRONT);
    glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);
    glUniform1i(_uniforms.renderMode, 1);

    //        
    //Drawing calls
    //

    _depthTexture = depthTexture;
    //_depthFramebuffer = depthRenderbuffer;

    // Revert to the default framebuffer for now
    glBindFramebuffer(GL_FRAMEBUFFER, defaultFBO);
    glBindRenderbuffer(GL_RENDERBUFFER, defaultRBO);

    // Render normally
    glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);
    glClearColor(0.316f, 0.50f, 0.86f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    //glCullFace(GL_BACK);

    glUniform1i(_uniforms.renderMode, 0);
    [self update];

    //        
    //Drawing calls
    //        
} 
```

}

z 的值可能来自不同的类型。它只是一个必须放回浮点数据类型的浮点数吗？

谢谢你的支持！模式

# 1\. 编辑

我现在也从我渲染的纹理中获取 RGBA。为此，我在绘制时激活了单独的帧缓冲区，而不是深度扩展，并将纹理连接到它。我编辑了上面的代码。现在我得到以下值：

```
screen: [0]:604.00 [1]:348.00
r:102 g:102 b:102 [3]:255

screen: [0]:330.00 [1]:566.00
r:73 g:48 b:32 [3]:255

screen: [0]:330.00 [1]:156.00
r:182 g:182 b:182 [3]:255

screen: [0]:266.00 [1]:790.00
r:80 g:127 b:219 [3]:255

screen: [0]:548.00 [1]:748.00
r:80 g:127 b:219 [3]:255 
```

如您所见，读取了 rgba 值。好消息是，当我触摸没有模型的天空时，值始终相同，而触摸模型时，值会有所不同。所以我认为纹理应该是正确的。但是我现在如何从这 4 个字节中重新组合出真正的值，然后可以将其传递给 gluUnProject？我不能把它扔到一个浮点数上。

# android - Eclipse 不幸的是（应用程序）已停止

> ID：10958082
> 
> 赞同：0
> 
> 时间：2012-06-09T03:15:00.027
> 
> 标签：android, eclipse

所以我正在使用教程来创建我的第一个应用程序。我正在使用我的手机作为模拟器（HTC One X 版本 4.0.3 android）我的编码没有错误，但由于某种原因，我得到一个“不幸的是应用程序已停止”。我尝试将它运行的版本从 2.2 更改为 4.0.3，但它们都没有帮助。这是我的错误日志和编码（简单的编码，所以希望很容易修复）

错误日志

```
 06-09 12:37:20.630: D/AndroidRuntime(18583): Shutting down VM
06-09 12:37:20.650: W/dalvikvm(18583): threadid=1: thread exiting with uncaught exception (group=0x40a65228)
06-09 12:37:20.660: E/AndroidRuntime(18583): FATAL EXCEPTION: main
06-09 12:37:20.660: E/AndroidRuntime(18583): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.regoreminder/com.regoreminder.RegoReminderActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class imageview
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2202)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2237)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.os.Looper.loop(Looper.java:156)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.app.ActivityThread.main(ActivityThread.java:5005)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at java.lang.reflect.Method.invokeNative(Native Method)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at java.lang.reflect.Method.invoke(Method.java:511)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at dalvik.system.NativeStart.main(Native Method)
06-09 12:37:20.660: E/AndroidRuntime(18583): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class imageview
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.app.Activity.setContentView(Activity.java:1897)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at com.regoreminder.RegoReminderActivity.onCreate(RegoReminderActivity.java:13)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.app.Activity.performCreate(Activity.java:4543)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2158)
06-09 12:37:20.660: E/AndroidRuntime(18583):    ... 11 more
06-09 12:37:20.660: E/AndroidRuntime(18583): Caused by: java.lang.ClassNotFoundException: android.view.imageview
06-09 12:37:20.660: E/AndroidRuntime(18583):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:636)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
06-09 12:37:20.660: E/AndroidRuntime(18583):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
06-09 12:37:20.660: E/AndroidRuntime(18583):    ... 21 more 
```

JAVA包com.regoreminder；

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class RegoReminderActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
            Thread logoTimer = new Thread(){
                public void run(){
                    try{
                        int logoTimer = 0;
                        while(logoTimer <5000) {
                            sleep (100);
                            logoTimer = logoTimer +100;

                        }
                        startActivity(new Intent("com.regoreminder.CLEARSCREEN"));
                    }   catch (InterruptedException e)  {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    finally{
                        finish();
                    }
                }

            };
            logoTimer.start();
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
    } 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.regoreminder"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <activity
            android:name=".RegoReminderActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Title"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.regoreminder.CLEARSCREEN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

主要的

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@drawable/background"
    >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Continue" 
        android:gravity="center"/>

</LinearLayout> 
```

溅

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <imageview
        android:src="@drawable/titlebackground"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

如果有人可以就我做错了什么提供一些帮助，那就太棒了！我一直在关注一个教程，所以我不确定出了什么问题。也在网上寻找答案，但每个人的应用程序都不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T03:27:47.237

改变这个

```
<imageview
        android:src="@drawable/titlebackground"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" /> 
```

至

```
 <ImageView  
            android:src="@drawable/titlebackground"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T03:54:08.307

> [...] 我正在使用教程来创建我的第一个应用程序。

欢迎来到编程世界...

其他答案已经告诉你它是什么问题以及如何解决它。但是您需要学习的是如何自己诊断解决这些问题。它基本上涉及学习阅读堆栈跟踪。

如果您查看堆栈跟踪，您将看到一堆部分：

```
java.lang.RuntimeException: Unable to start activity
    ComponentInfo{com.regoreminder/com.regoreminder.RegoReminderActivity}:
    android.view.InflateException: Binary XML file line #7: Error
    inflating class imageview
    ...
Caused by: android.view.InflateException: Binary XML file line #7: 
    Error inflating class imageview
    ...
Caused by: java.lang.ClassNotFoundException: android.view.imageview

    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:636)
    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678) 
```

第一部分是主要的异常堆栈跟踪，其他部分用于一系列嵌套/链接的异常……其中一个异常已被捕获，另一个异常已被创建并以第一个异常为原因抛出。

现在看看实际的消息。每个人都在谈论一个名为“imageview”的类。实际上，最后一个给出了类“android.view.imageview”的完全限定名称......并说异常名称是“ClassNotFoundException”。这个例外基本上意味着它所说的。VM（或更具体地说是类加载器）找不到具有该名称的类。（您将在跟踪中看到类加载器的类/方法名称。）

为什么？

因为它不存在。或者更准确地说，不存在具有这种大写字母的类。所有 Java 和 Android 类都是大写的，因此您永远不会在 Java 或 Android 中看到名为“imageview”的类。

那么你应该问自己“这个不正确的类名是从哪里来的”？它不会出现在您的源代码中（除非您使用反射），因为如果您对库类使用错误的类名，您将看到编译错误。所以它必须是你的配置。快速搜索显示......确实......这个名字来自哪里。再一次，在堆栈跟踪的最后两行中，堆栈跟踪中有确凿的证据：

```
 at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678) 
```

这些名称暗示它正在尝试在布局中创建视图，并且视图名称来自 XML 标记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T03:27:39.250

`imageview`应该是`ImageView`（注意大小写）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-09T11:03:22.613

您的视图应始终为大写。在你的情况下“ImageView”

# php - 本地主机是否指您自己的机器？

> ID：10958083
> 
> 赞同：0
> 
> 时间：2012-06-09T03:15:28.040
> 
> 标签：php, mysql

当我以以下形式运行 PHPmyAdmin 时：domain/localhost/phypmyadmin。本地主机指的是什么？我要导入的文件在域中，但我仍然无法使用 load local 语句导入它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T03:20:20.753

本地主机通常是您的机器。我不确定你想对文件做什么。如果您运行的是 Linux，连接到 Localhost 将通过大多数发行版中的环回接口（不是您的主以太网接口）进行连接。我会查看您的服务器绑定到哪个接口，并正确调整您的地址。

为了回答上面的评论，通常 MySQL 服务器绑定到环回接口，使它们只能在该本地机器上访问。如果需要从远程机器导入文件，则必须将文件复制到服务器，然后在本地运行命令。

如果这仍然有问题，PHPMyAdmin 有一个导入功能。如果您可以访问 PHPMyAdmin，您可以通过该界面导入您的文件（如果您的文件很大，您可能需要启动最大文件上传设置。我不肯定，但我很确定这是一个 PHP 设置。 )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:00:57.517

我不完全理解你遇到的问题。但这里有一些你应该知道的

*   localhost 是指系统本身。所以在这种情况下运行 phpmyadmin 和 mysql 的服务器（它也可以通过 127.0.0.1 而不是术语 localhost 访问

*   如果您有其公共 IP 并打开防火墙端口，您可以在远程系统上访问 phpmyadmin，并且还允许 phpmyadmin 在远程系统上工作

*   如果您在远程系统中有文本 .sql 文件，您应该能够通过 phpmyadmin 导入它们，前提是您能够在该系统上使用 phpmyadmin

如果我理解你的问题是正确的，这就是你需要做的

**方法1：** 将文本文件传输到运行mysql和phpmyadmin的服务器，然后使用它上传到mysql

**方法 2：** 启用 phpmyadmin 为远程用户工作，找到您的公共 ip 并打开防火墙上的所有端口

# ruby-on-rails-3 - Rails 3——for循环给出一个未定义的方法“每个”

> ID：10958084
> 
> 赞同：0
> 
> 时间：2012-06-09T03:15:37.773
> 
> 标签：ruby-on-rails-3, for-loop, nomethoderror

`Rails -v 3.2.3`

我试图在我不断得到的视图中显示表格内的链接 `NoMethodError in Links#submissions , views/links/submissions.html.erb where line #10 raised: undefined method "each" for nil:NilClass`

这是我的**submission.htm.erb**

```
<table>
<% @links.each do |link| %>
  <tr valign = "top">
    <td>
      <%= link_to_remote "Up",
                        :url => { :action => 'modify_points',
                               :id => link.id,
                               :by => 1 },
                    :update => "link" + link.id.to_s %>
</td>
<td>
  <%= link_to_remote "Down",
                    :url => { :action => 'modify_points',
                              :id => link.id,
                              :by => -1 },
                    :update => "link" + link.id.to_s %>

</td>

<td>
  <b> <a href="<%= link.url %>"> <%= link.description %> </a> </b>
  (<%= if link.url =~ /(:\/\/) ([^\/]*)/ then $2 else "wrong URL" end %>) <br/>
  <span id="link"><%= link.id.to_s %>"%><%= link.points %> </span>
  points posted <%= time_ago_in_words link.created_at %> ago
</td>

  </tr>
<% end %>
</table> 
```

我的问题是....如果没有链接，我是否需要编写一些代码？这就是我收到此错误消息的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T03:47:16.317

是的，如果您不知道上下文中是否存在@links，那么安全总比抱歉好。

```
<% if @links.present? %>
  <% @links.each do |link|
    etc 
  <% end %>
<% end %> 
```

等等......也许有一些更好的红宝石速记......如果是这样，我相信有人会提醒我们。:)

# php - 为什么我得到未定义的变量错误？

> ID：10958085
> 
> 赞同：0
> 
> 时间：2012-06-09T03:15:50.050
> 
> 标签：php, explode

我的代码：

```
$fburl_arr = array();
$fburl_arr = explode( "/", "https://www.facebook.com/media/albums/?id=2243618684625465217" );
echo "<pre style='font-size:13px; background-color:yellow;'>";
print_r( "fburl_arr >>> " );
print_r( $fburl_arr );
print_r( "filename >>> " );
print_r( $filename );
echo "</pre>"; 
```

给我错误：

```
Notice:  Undefined variable: fburl_arr in /home/content/96/8564996/html/app/webroot/test/joomla254/modules/mod_jfbalbum/helper.php on line 44 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T03:20:49.303

`$fburl_arr`已启动，因此不能成为错误的来源。

[http://codepad.viper-7.com/IP0RCu#](http://codepad.viper-7.com/IP0RCu#)

您也不需要启动阵列，因此您可以删除

```
$fburl_arr = array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T03:24:44.650

打开 PHP.ini 并找到配置行：**error_reporting**。将其更改为：`error_reporting = E_ALL & ~E_NOTICE`错误将消失

# javascript - 可使用表单元素编辑的内容中光标的奇怪光标行为

> ID：10958087
> 
> 赞同：1
> 
> 时间：2012-06-09T03:16:05.607
> 
> 标签：javascript, forms, checkbox, cursor, contenteditable

[http://jsfiddle.net/yaPqr/](http://jsfiddle.net/yaPqr/)

如果您一次将光标从 div 的一侧移动到另一个字符，您会注意到，当您到达复选框时，它的行为并不像您预期​​的那样（至少我还是希望如此）

在最左边，您希望右一次将您移过复选框并在空格之前，再一次会将您移至句子的第一个字符，但需要两次右箭头键击才能将您带到另一侧复选框，然后您跳过了空格。这是出于某种原因我无法确定预期的行为吗？

# data-binding - knockout.js - 单击绑定参数获取事件发送者的文本

> ID：10958088
> 
> 赞同：2
> 
> 时间：2012-06-09T03:17:00.227
> 
> 标签：data-binding, click, knockout.js

我的页面上有此链接 - 用于按首字母查找条目。我想将锚标记的文本传递到 data-bind 属性内的敲除单击事件中。这可能吗？

```
<a href="#" data-bind="click: $parent.getManageableEntries()><%= Convert.ToChar(i + 65)%></a></li>

// here's my javascript method in my knockout view model
function ManageEntriesViewModel() {
    var self = this;

    this.getManageableEntries = function(firstLetter) {
        // i want to pass in the text of the <a> tag as the 'firstLetter' variable
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:49:56.493

您可能应该在视图模型中将锚的文本作为可观察的。然后你只需要访问那个 observable（而不是直接访问锚元素的文本）。这为您提供了最大的灵活性。

我做了 2 个示例，因为我不确定您是如何构建视图模型对象的。

两者都可以正常工作： [example-1](http://jsfiddle.net/3pduc/)， [example-2](http://jsfiddle.net/26Q7z/)

如果你真的想在你的 data-bind 属性中提取第一个字母，你可以在那里放置一个匿名函数，或者用一个参数绑定你的函数，就像我在[这个 fiddle](http://jsfiddle.net/TJCVr/)中所做的那样。

我希望其中一种方法适合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T16:29:44.537

我相信你现在已经找到了，莱维特，但这就是你要找的……

请参阅此处的“注 2：访问事件对象或传递更多参数”：http: [//knockoutjs.com/documentation/click-binding.html](http://knockoutjs.com/documentation/click-binding.html)

只需通过点击绑定函数传递 add'l 参数。无论您如何渲染，请务必将第一个参数包含为 $data。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T23:10:27.847

这对我有用。在您不想明确地“数据绑定”到视图模型中的某些可观察对象的 HTML 标记中，为 HTML 标记分配一个`click`或`change`事件。然后将您的实际函数包装在一个虚拟函数中并传入两个参数`data`和`event`. **你必须同时拥有两者**，否则它会失败。就我而言，我使用了更改事件。见下文：

**HTML：**

`<input data-bind="event: { change:function(data, event) { $parent.SomeFunction(data, event) }}"></input>`

然后在您的 JavaScript 函数中，您可以访问`<input>`类似这样的文本：

**JavaScript：**

```
function SomeFunction(data, event)
{
    var inputValue = event.currentTarget.value;
    alert(inputValue);
} 
```

所以每次我在`<input>`字段中写文本时，`SomeFunction()`都会被调用并提醒我刚刚写的文本。

# c# - 如何替换图像文件夹中的图像

> ID：10958090
> 
> 赞同：1
> 
> 时间：2012-06-09T03:17:05.933
> 
> 标签：c#, asp.net, visual-studio-2008

我正在上传图像并将其保存在`Image`我创建的文件夹中。当我上传第二张图片时，它必须替换文件夹中已经存在的图片。意味着`Image`文件夹必须始终只包含一张图像。我会怎么做？？

其次，我将如何从另一个不同的页面访问图像？就像，假设我上传了文件`Page1.aspx`，我想在`Page2.aspx`??上显示相同的图像

我使用的语言是 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T03:30:09.967

我建议看一下这个例子：[ASP.NET forms - Upload image to DB](http://csharpdotnetfreak.blogspot.com/2009/07/fileupload-control-save-images-database.html)。

另一种方法是将图像存储在文件夹中并通过相对路径访问它。

您可能还想查看这篇文章：[在 ASP.NET 中创建文件夹并将图像上传到该文件夹​​的最佳方法](https://stackoverflow.com/q/740342/1437962)

# jquery - 从 Google Charts DataTable 中查找最低和最高值

> ID：10958095
> 
> 赞同：1
> 
> 时间：2012-06-09T03:18:05.557
> 
> 标签：jquery, google-visualization, google-datatable

我正在使用此 DataTable绘制图表（ [Google Charts API ）：](https://developers.google.com/chart/interactive/docs/reference#DataTable)

```
chart_data = new google.visualization.DataTable();
chart_data.addColumn('string','date');
chart_data.addColumn('number','value');

chart_data.addRows([
    ["10 May",0.23],
    ["11 May",0.26],
    ["12 May",0.29],
    ["13 May",0.23],
    ["14 May",0.21],
    ["15 May",0.25],
    ["16 May",0.28]
]); 
```

我需要找出 DataTable 中**value**列的最低值和最高值。有一些名为*google.visualization.data.max*的函数，但没有任何关于如何实现它的实际代码示例。有人用过这个功能吗？或者，有人对此问题有其他解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-09T03:29:31.337

该函数`getColumnRange`将返回最大值和最小值。看起来您还需要为数字值声明列类型和名称。

```
chart_data = new google.visualization.DataTable();
chart_data.addColumn('string','date');
chart_data.addColumn('number','some number');

chart_data.addRows([
    ["10 May",0.23],
...
    ["16 May",0.28]
]);

alert("Max: " + chart_data.getColumnRange(1).max);
alert("Min: " + chart_data.getColumnRange(1).min); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-09-25T09:22:25.963

```
//If your fetching data from Mysql 

<script type="text/javascript">
 google.load("visualization", "1", {packages:["corechart"]});
 google.setOnLoadCallback(drawChart);
 function drawChart() {
 var data = google.visualization.arrayToDataTable([

 ['LIFESTYLE','TECHNOLOGY LEVELS',{ role: 'style' }],
 <?php 
            $query = "SELECT question,useranswer from quiz";

             $exec = mysqli_query($con,$query);
             while($row = mysqli_fetch_array($exec)){

             echo "['".$row['question']."',".$row['useranswer'].",'gold'],";
             }
             ?> 

 ]);
 data.getColumnRange(1).max;
//alert("Min: " + data.getColumnRange(1).min);

 var options = {
 title: 'LIFESTYLE CHART',
  // pieHole: 0.5,
  //         pieSliceTextStyle: {
  //           color: 'black',
  //         },
  //         legend: 'none'
 };
 var chart = new google.visualization.ColumnChart(document.getElementById("columnchart12"));
 chart.draw(data,options);
 }

    </script> 
```

# delphi - 有没有办法在执行 DWScript 两次时保留变量值？

> ID：10958101
> 
> 赞同：9
> 
> 时间：2012-06-09T03:19:25.683
> 
> 标签：delphi, dwscript

我正在开发的应用程序允许将脚本 sinppets 嵌入到文档中。例如：

```
SomeText
<* PrintLn("This line is generated by a script"); *>
Some other text
<* PrintLn("This line is generated by a script, too"); *>
Some more lines 
```

结果

```
SomeText
This line is generated by a script
Some other text
This line is generated by a script, too
Some more lines 
```

我正在使用 DWScript。在内部，第一个脚本片段被编译和执行。比下一个是 RecompiledInContext 并执行等等。在片段中声明的函数/变量/等在所有以后的片段中都可用。然而，片段之间的变量值会丢失。例如：

```
SomeText
<* var x: Integer = 5; *>
Some other text
<* PrintLn(x); *>
Some more lines 
```

生成文档后：

```
SomeText
Some other text
0  <-- I would like this to be 5
Some more lines 
```

这是一个说明问题的示例应用程序：

```
program POC.Variable;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  dwsExprs,
  dwsComp,
  dwsCompiler; 

var
  FDelphiWebScript: TDelphiWebScript;
  FProgram: IdwsProgram;
  FExecutionResult: IdwsProgramExecution;

begin
  FDelphiWebScript := TDelphiWebScript.Create(nil);
  try
    FProgram := FDelphiWebScript.Compile('var x: Integer = 2;');
    FProgram.Execute;

    FDelphiWebScript.RecompileInContext(FProgram, 'PrintLn(x);');

    FExecutionResult := FProgram.Execute;
    // The next line fails, Result[1] is '0'
    Assert(FExecutionResult.Result.ToString[1] = '2');
  finally
    FDelphiWebScript.Free;
  end
end. 
```

有没有办法在执行之间“转移”或“保留”变量值？

这是安德鲁答案的更新代码，它不起作用：

```
begin
  FDelphiWebScript := TDelphiWebScript.Create(nil);
  try
    FProgram := FDelphiWebScript.Compile('PrintLn("Hello");');

    FExecution:= FProgram.BeginNewExecution();

    FDelphiWebScript.RecompileInContext(FProgram, 'var x: Integer;');
    FExecution.RunProgram(0);
    WriteLn('Compile Result:');
    WriteLn(FExecution.Result.ToString);

    FDelphiWebScript.RecompileInContext(FProgram, 'x := 2; PrintLn(x);');
    FExecution.RunProgram(0); // <-- Access violation
    WriteLn('Compile Result:');
    WriteLn(FExecution.Result.ToString);

    FExecution.EndProgram();
    ReadLn;
  finally
    FDelphiWebScript.Free;
  end
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T07:07:35.137

您可以尝试改用`BeginNewExecution`//块`RunProgram`（`EndProgram`在 DWScript 2.2 上测试）：

```
begin
  FDelphiWebScript := TDelphiWebScript.Create(nil);
  try
    FProgram := FDelphiWebScript.Compile('var x: Integer;');

    FExecution:= FProgram.BeginNewExecution();

    FDelphiWebScript.RecompileInContext(FProgram, 'x := 2; PrintLn(x);');
    FExecution.RunProgram(0);
    WriteLn('Compile Result:');
    WriteLn(FExecution.Result.ToString);

    FDelphiWebScript.RecompileInContext(FProgram, 'x := x + 3; PrintLn(x);');
    FExecution.RunProgram(0);
    WriteLn('Recompile Result: ');
    WriteLn(FExecution.Result.ToString);

    FExecution.EndProgram();

    ReadLn;
  finally
    FDelphiWebScript.Free;
  end
end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:09:12.157

问题是当 RecompileInContext() 添加新的全局变量时，它们没有分配空间，因为空间分配是由 BeginNewExecution 执行的，但是如果变量预先存在，或者如果在函数中添加了新变量，它应该可以工作，所以是本地变量，而不是全局变量）。

因此，如果您将“更新的代码”更改为这样的内容，它将起作用

```
FProgram := DelphiWebScript1.Compile( 'PrintLn("Hello");'
                                     +'var x: Integer;');

FExecution:= FProgram.BeginNewExecution();

FExecution.RunProgram(0);
SynEdit1.Lines.Add('Compile Result:');
SynEdit1.Lines.Add(FExecution.Result.ToString);

DelphiWebScript1.RecompileInContext(FProgram, 'x := 2; PrintLn(x);');
FExecution.RunProgram(0); // <-- Access violation
SynEdit1.Lines.Add('Compile Result:');
SynEdit1.Lines.Add(FExecution.Result.ToString);

FExecution.EndProgram(); 
```

*编辑：*这已由[DWScript SVN](http://code.google.com/p/dwscript/)中的 r1513 修复。

# excel - 如何搜索列并返回具有特定值的下一列中的值

> ID：10958105
> 
> 赞同：1
> 
> 时间：2012-06-09T03:20:49.667
> 
> 标签：excel, vba

我有一个包含列和多个工作表的 Excel 工作表。我想将 A 列从 Sheet1 复制到 Sheet2。然后，一旦我复制了 A 列，我希望 Sheet2 中的 B 列在 A 中的每个填充单元格附近有一个特定的值（在本例中为“D”）。我只被下面的代码所困扰。

例子：

Sheet1 包含：

```
Column A      B      C
       Arthur 1      34
       Bertha 2      35 
```

Sheet2 必须具有：

```
Column A      B
       Arthur "D"
       Bertha "D" 
```

卡住了代码：

```
Worksheets("Sheet1").Columns("A").Copy ActiveCell.Columns("A:A").Columns("A") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T04:00:57.723

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim wsI As Worksheet, wsO As Worksheet
    Dim lRow As Long

    Set wsI = Sheets("Sheet1")
    Set wsO = Sheets("Sheet2")

    wsI.Columns(1).Copy wsO.Columns(1)

    lRow = wsO.Range("A" & wsO.Rows.Count).End(xlUp).Row

    wsO.Range("B1:B" & lRow).Value = "D"
End Sub 
```

# c# - 部署到 prod 后没有可供读取的 MediaTypeFormatter

> ID：10958110
> 
> 赞同：3
> 
> 时间：2012-06-09T03:23:15.170
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我在服务器上部署了一个 webapi 项目 mvc4 rc 和一个 mvc4 rc Web 应用程序。

在本地一切正常但是在服务器上我得到一个错误

> 2012-06-09 03:18:18,659 [23] INFO WebApplication.Controllers.AccountController – System.InvalidOperationException：没有 MediaTypeFormatter 可用于从媒体类型为“未定义”的内容中读取“业务”类型的对象。在 System.Net.Http.HttpContentExtensions.ReadAsAsync[T](HttpContent content, Type type, IEnumerable `1 formatters, IFormatterLogger formatterLogger) at System.Net.Http.HttpContentExtensions.ReadAsAsync[T](HttpContent content, IEnumerable`1 formatters) 在 C:\@Code\WebApplication\Repository\BusinessRepository.cs 中的 WebApplication.Repository.BusinessRepository.GetByUserId(Guid userId) :C:\@Code\WebApplication\Controllers\AccountController.cs:第 61 行 WebApplication.Controllers.AccountController.SignIn(LogOnModel model, String returnUrl) 的第 37 行。

我试图调用服务的代码看起来像

```
 var url = ApiRestHelper.ApiUrl(ApiEndPointConstants.GetBusinessByUserId, "userId", userId.ToString());
 var service = ApiRestHelper.Get(url).Content;
 var data = service.ReadAsAsync<Business>().Result;
 HttpContext.Current.Session["BusinessInfo"] = data;
 return data;

 public static HttpResponseMessage Get(string apiMethod, string baseAddress)
    {
        var myHttpClient = new System.Net.Http.HttpClient
        {
            BaseAddress = new Uri(baseAddress)
        };
        var get = myHttpClient.GetAsync(apiMethod);
        var x = get.Result;
        return x;
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T17:43:38.417

此消息表明您正在尝试反序列化`Business`来自未指定`Content-Type`标头的消息的实例。在这种情况下，Web API 不知道如何反序列化消息（例如，它不知道是 xml 还是 json）。您确定服务器上正在调用的服务正在返回正确注释的消息吗？（您可以检查 service.Headers.ContentType 属性的值）。

# javascript - 选择对象值

> ID：10958112
> 
> 赞同：1
> 
> 时间：2012-06-09T03:23:29.807
> 
> 标签：javascript

我刚刚看到以下内容： [http ://www.w3schools.com/jsref/prop_option_value.asp](http://www.w3schools.com/jsref/prop_option_value.asp)

*并且想知道selectObject.value*是否有问题。为什么不是一个简单的方法：

```
<!DOCTYPE html>
    <html>
        <head>
            <script type="text/javascript">
                function displayResult(){
                    alert(document.getElementById("mySelect").value);
                }
            </script>
        </head>
    <body>
        <form>
            Select your favorite fruit:
            <select id="mySelect">
                  <option value="apple">Apple</option>
                  <option value="orange">Orange</option>
                  <option value="pineapple">Pineapple</option>
                  <option value="banana">Banana</option>
            </select>
        </form>
        <button type="button" onclick="displayResult()">
            Display value of selected fruit
        </button>
    </body>
</html> 
```

它似乎没有问题。

提前致谢！

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T06:10:58.433

# google-apps - 谷歌应用程序中的字符串长度

> ID：10958116
> 
> 赞同：2
> 
> 时间：2012-06-09T03:24:56.577
> 
> 标签：google-apps, google-apps-script

我在 gApps 电子表格中有一个函数，它需要一个美元数字乘以 100，然后返回字符串的长度......

```
function checkWrite(amount) {
amount = amount * 100
amount = amount+'';
var aLength = amount.length;
return(aLength); 
```

返回结果如下： amount--length
4\. ---- 3
4.01 -- 3
4.02 -- 18
4.03 -- 3
4.04 -- 3
4.05 -- 3
4.06 -- 18

... 等等。我得到了很多正确的答案，3，还有一些随机的错误答案 18。

任何人都可以阐明发生了什么吗？我不擅长编码，但我很确定结果应该是一致的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T04:09:56.480

很可能这些数字没有像您期望的那样四舍五入。浮点值并未如您所想的那样准确表示。要检查您是否也应该返回生成的字符串表示形式，例如将最后一行更改为`return aLength+' '+amount;`

无论如何，这样的功能有什么用？如果我对您的用途有任何想法，我可以建议一些替代解决方案。

# css - 更加突出 DIV 或 那是在浮动 DIV 之后

> ID：10958122
> 
> 赞同：1
> 
> 时间：2012-06-09T03:25:59.850
> 
> 标签：css

**考虑这个 HTML：**

```
<div id="entry-content">
    <div id="my-300px-ad">AD CODE HERE</div>
    <p><img src="file.jpg" alt="file" /></p>
    <p>SOME TEXT</p>
    <p>SOME MORE TEXT</p>
</div> 
```

现在，考虑`div#my-300px-ad`是向右浮动。我是否可以让下一段中的图片出现在广告之前，以便后续段落中的 TEXT 可以环绕广告？

**例如，像这样：**

![例子](../Images/b4a1905b57ea4e9bfd46b9f02f58a89e.png)

**为什么这样...？**

问题是，由于各种原因（包括谷歌），我想避免在帖子内容之间放置广告。

**仅 CSS**

我确信使用一些 JavaScript 代码可以实现这样的事情。但我只在寻找基于 CSS 的解决方案。（跨浏览器兼容性，≥IE8）

请注意，只有 CSS`div#my-300px-ad`可以更改。除了它们是文章之外，其他任何东西都不应触及，因为这不是静态 HTML 页面。

***PS：****很难为此提出一个单行问题。如果可以更清楚，请随时编辑问题的标题。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T04:17:25.357

如以下两个问题所述，这是不可能的：

[使用 CSS 重新排序 DIV](https://stackoverflow.com/questions/220273/css-positioning-div-above-another-div-when-not-in-that-order-in-the-html)

[CSS 布局，使用 CSS 重新排序 DIV](https://stackoverflow.com/questions/624519/css-layout-use-css-to-reorder-divs)

在不知道要跳过的元素的高度、使用 javascript 或更改 html 的情况下，您无法按照您描述的方式使用 css 重新排序元素。

但是，看起来您正在制作一个 WordPress 主题，将广告放在帖子内部和图片之后应该不会太难。如果你这样做了，将广告放在一个[side](https://developer.mozilla.org/en/HTML/Element/aside)元素内应该会提示谷歌它不是主要帖子的一部分。

> **[Mozilla 开发者网络](https://developer.mozilla.org/en/Sections_and_Outlines_of_an_HTML5_document)：** 在 HTML4 中，每个部分都是文档大纲的一部分。但是文档通常不是那么线性的。一个文档可以有特殊的部分，其中包含不属于主要流程的信息，尽管它与主要流程相关，例如广告块或解释框。HTML5 引入了`<aside>`允许这些部分不成为主要大纲的一部分的元素。

# mysql - mysql中的临时表被锁定

> ID：10958124
> 
> 赞同：0
> 
> 时间：2012-06-09T03:26:49.473
> 
> 标签：mysql, sql, temp-tables

在我使用的查询中，我正在创建一个临时表。这是查询：

```
SELECT u1.url,u1.id,u1.domain FROM urls u1 JOIN 
(create new table here) u2 ON u1.id = u2.url_id 
GROUP BY u1.domain; 
```

在此查询之前，我锁定了两个表：

```
LOCK TABLES urls WRITE, ips WRITE; 
```

但是，当我运行我的脚本时，mysql 给了我这个错误：

```
Table 'u1' was not locked with LOCK TABLES 
```

那么有人可以帮我理解我在这里做错了什么吗？我不认为我可以提前声明 u2，因为它还没有真正完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:29:27.027

我在[这里](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)找到了解决方案：

```
LOCK TABLES urls WRITE, urls as u1 WRITE, ips WRITE; 
```

本质上，如果您要在锁定语句之后使用别名引用表，则需要使用别名锁定它。

# dll - 从 USB 端口轮询的程序集 InpOut32.dll

> ID：10958136
> 
> 赞同：0
> 
> 时间：2012-06-09T03:28:46.320
> 
> 标签：dll, assembly, x86, usb

有没有办法使用 InpOut32.dll 从 USB 端口轮询输入？我有一个 USB 适配器的并行端口，它安装的驱动程序是 USB 打印支持。有没有办法找到端口的十六进制值？我将在 MASM 中编写此内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T16:38:32.297

*无法*将USB->Parport 适配器与 InpOut.dll 一起使用 - 这些适配器仅适用于打印机。他们通过 USB 使用打印机协议。

这些适配器类型只是没有为 InpOut.dll 提供控制端口。

您可能会使用 PCI/PICe parport 适配器，它们有 I/O 端口。

# shell - 什么是 shell/open/command 正确的语法？

> ID：10958137
> 
> 赞同：2
> 
> 时间：2012-06-09T03:28:48.340
> 
> 标签：shell, syntax, batch-file, file-association

我想调整我的 Windows 7 Ultimate 操作系统，使其更容易在我的服务器上打开 .php 文件。如果我只是通过打开方式菜单使用 iexplore.exe 打开文件，它将尝试下载 .php 文件而不是打开它。（我使用 XAMPP）。

我已经为 XAMPP 正确配置了目录。

在我创建的 Reg

```
HKEY_CLASSES_ROOT\.php
@tweak.php.open 
```

&

```
HKEY_CLASSES_ROOT\teak.php.open\shell\open\command
@"C:\Program Files (x86)\Internet Explorer\iexplore.exe" localhost/%1 
```

但是，这不会产生预期的结果。它不是这样工作的。

经过一番调试，我发现这背后的原因是因为文件的完整地址是通过使用变量 %1 发送的。

IE

"C:\Program Files (x86)\Internet Explorer\iexplore.exe" localhost/D:\Web Development\xampp\htdocs\form.php

我认为语法与批处理中的相同？如果您使用 %1 批处理，它将是文件的名称。这是我想要得到的，而不是整个路径。

我已经用一个相当不稳定的解决方案解决了这个问题，将输出重定向到我为解析字符串而创建的批处理文件并将其发送到 iexplore.exe ......请有人帮我语法或告诉我我在哪里可以学习正确的语法。（我不确定这种语言的名称是什么......批处理或外壳或什么。：S）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T04:10:20.727

尝试

```
@"C:\Program Files (x86)\Internet Explorer\iexplore.exe" "localhost/%~nx1" 
```

PS不，我似乎没有直接工作，你必须把这一行放到一个批处理文件中。

这是解决方法，将此行放入注册表：

```
cmd /c "for %%a in ("%1") do "C:\Program Files (x86)\Internet Explorer\iexplore.exe" "localhost/%%~nxa"" 
```

# ruby-on-rails - 设置设计时迁移期间出错

> ID：10958144
> 
> 赞同：0
> 
> 时间：2012-06-09T03:30:17.250
> 
> 标签：ruby-on-rails, devise, migration

我对 Rails 比较陌生，在尝试设置 Devise 时遇到了问题。我相信这个问题源于我在尝试安装 Devise 之前已经生成了一个用户脚手架，但我不知道如何解决这个问题。当我继续进行设计设置时，我进入了必须输入以下代码的步骤：

```
rails generate devise User 
```

那行得通，我从终端得到了这个：

```
invoke  active_record
  create    db/migrate/20120609032448_add_devise_to_users.rb
  insert    app/models/user.rb
   route  devise_for :users 
```

下一步是迁移数据库，我尝试但收到以下错误：

```
==  AddDeviseToUsers: migrating ===============================================
-- change_table(:users)
rake aborted!
An error has occurred, this and all later migrations canceled:

SQLite3::SQLException: duplicate column name: email: ALTER TABLE "users" ADD "email"         varchar(255) DEFAULT '' NOT NULL

Tasks: TOP => db:migrate 
```

我已经尝试破坏原始用户脚手架以及原始用户迁移，但我一直卡在这个错误中。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T04:13:17.540

您的新迁移中可能`email`定义了一个列。评论有关添加`email`列的行并再次运行它。您的模型中可能已经有一个电子邮件列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T20:01:13.593

尝试转到此文件

```
db/migrate/20120609032448_add_devise_to_users.rb 
```

在它说的代码中

```
change_table(:users)... 
```

将其更改为

```
create_table(:users)... 
```

# php - JavaScript 表单验证 HTML 表中的行

> ID：10958146
> 
> 赞同：1
> 
> 时间：2012-06-09T03:30:37.643
> 
> 标签：php, javascript, html

由于某些原因，我的 javascript 表单验证不会遍历表中的每一行。我使用以下代码创建了表： $usr 变量只是另一个进程的结果：

```
<form name="myForm" action="addAccessories.php"  method="post" onsubmit="return validateForm(this);">
        <table border="1" id="IT">
            <tr> 
                <th>Barcode<em>*</em></th>
                <th>Current stock</th>
            </tr>    
        <?php
           for($id=1; $id<=$usr; $id++){                   
        ?>
            <tr>                    
                <td><input type="hidden"  name="id[]" value="<?php echo $id; ?>" />
                    <input type="text"  name="bar_code<?php echo $id; ?>" id="bar_code<?php echo $id; ?>" value="" /></td>                  
                <td><input type="text"  name="num_stock<?php echo $id; ?>" value="0" id="num_stock<?php echo $id; ?>"/></td>
        <?php
            }
        ?>
            <tr>
                <td> </td> 
                <td> <button data-theme="b" input type="submit" name="Submit" value="Submit">Add accessories</button></td>
            </tr>
        </table>
    </form> 
```

该表的行数为：rows = $usr + 1

我的验证表单代码：

```
<script type="text/javascript">           
function validateForm(){    
var errors = [];        
for(i = 1; i < document.getElementById("IT").rows.length; i++){
      var barcode = document.getElementById('bar_code'+i).value;
    var des = document.getElementById('description'+i).value;
    var num_stock =  document.getElementById('num_stock'+i).value;        

    if(barcode == null || barcode == ""){
        errors[errors.length] = "You must enter barcode.";
    } 
  if(isNaN(num_stock)){
        errors[errors.length] = "Current stock must be an integer";
    } 
    if(num_stock < 0){
        errors[errors.length] = "Current stock must be a positive number";
    } 

    if (errors.length > 0) {
    reportErrors(errors);
    return false;
    }
    return true;
    }
}
function reportErrors(errors){
var msg = "There were some problems...\n";
for (var i = 0; i<errors.length; i++) {
    var numError = i + 1;
    msg += "\n" + numError + ". " + errors[i];
}
alert(msg);
}
</script> 
```

此过程仅验证表中的第一行然后停止。谁能告诉我出了什么问题以及如何解决？非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:33:07.287

你的代码让生活变得比它需要的更复杂。一种更简单的方法是只处理表单控件，例如，因为您已经从提交侦听器传递了对表单的引用：

```
function validateForm(form) {
  var errors = [];
  var c, cs = form.elements;
  var reB = /^bar_code/;
  var reN = /^num_stock/;
  var reD = /^[0-9]+$/;

  for (var i=0, iLen=cs.length; i<iLen; i++) {
    c = cs[i];

    if (reB.test(c.name) && c.value == '') {
      errors.push('You must enter barcode.'];

    } else if (reN.test(c.name) && !reD.test(c.value)) {
      errors.push('Stock number must be a positive integer.'];
    }       
  }

  // deal with errors...

} 
```

请注意，在测试中：

```
> barcode == null || barcode == "" 
```

条形码是一个字符串，因此第一个测试永远不会返回 true，如果您想查看它是否为空，第二个就足够了。

# ruby - 将字符串中包含的数字转换为整数并删除非数字值和空格

> ID：10958150
> 
> 赞同：1
> 
> 时间：2012-06-09T03:31:14.340
> 
> 标签：ruby, string

我想转换`String`包含多个数字的a，以便所有这些数字都变为`Integer`s。也就是说，我有：

```
"1,2,3,4,5,6,7,8,9,0" # String
" 1,  2, 3,  4, 5   , 6 ,7 ,8  ,9  ,  0" # String (spaces are important) 
```

我想拥有：

```
[1, 2, 3, 4, 5, 6, 7, 8, 9, 0] # Array 
```

但还有更多。如果我有：

```
"1,2,3,4,5,a,b,c,d,e" # String
"  1,  2 , 3   ,  4  ,  5 , a, b,c  , d , e" # String (spaces are important) 
```

我想要（删除不是数字的值）：

```
[1 , 2 , 3 , 4, 5] # Array 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T03:34:45.033

```
"1,2,3,4,5,a,b,c,d,e".scan(/\d+/).map(&:to_i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T03:37:02.020

简单的解决方案：

```
"  1,  2 , 3   ,  4  ,  5 , a, b,c  , d , e"
  .split(',')
  .map {|e| e.strip} 
  .find_all {|e| e =~ /(\d)+/ }
  .map {|e| e.to_i} 
```

# eclipse - Eclipse egit：如何与远程仓库同步？

> ID：10958152
> 
> 赞同：12
> 
> 时间：2012-06-09T03:32:03.380
> 
> 标签：eclipse, git, version-control, egit

我是 GIT 的新手，我曾经提交到我的本地副本，然后“推送”到远程存储库。最近我从另一台计算机修改了我的代码，并希望与我的家用计算机同步更改。

但是在 git 同步视图中，在我将文件标记为“标记为合并”之后（在使用本地更改解决更改之后）我如何提交回远程存储库？（就像在 SVN 中一样？）

（即：即使我单击“标记为合并”，“红色双数组图标”保持不变） [单击以获得更大的尺寸](https://i.stack.imgur.com/PdGU2.png)

![在此处输入图像描述](../Images/3ec71265fd89b582720eaa6fed74adb2.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T03:51:08.017

我不使用同步那么多，因为我使用以下工作流程：

```
- fetch
- merge
  * resolved merges are sent to git index
  * unresolved merges need to be fixed
- add fixed merge to index
- commit
- push 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T04:53:20.470

标记为合并意味着在冲突解决后添加到索引中。

你需要提交和推动。
请参阅 Egit 手册中的“[提交合并](http://wiki.eclipse.org/EGit/User_Guide#Committing_a_merge)”。

# python - 消除多余的逗号

> ID：10958154
> 
> 赞同：1
> 
> 时间：2012-06-09T03:33:19.433
> 
> 标签：python, regex, string, text, text-processing

我无法在数据文本文件中用一个逗号替换三个逗号。

我正在处理一个大文本文件以将其转换为逗号分隔格式，以便我可以使用数据库对其进行查询。

我在命令提示符下执行以下操作，它可以工作：

```
 >>> import re
  >>> line = 'one,,,two'
  >>> line=re.sub(',+',',',line)
  >>> print line
  one,two
  >>> 
```

以下是我的实际代码：

```
 with open("dmis8.txt", "r") as ifp:
      with open("dmis7.txt", "w") as ofp:
          for line in ifp:
              #join lines by removing a line ending.
              line=re.sub('(?m)(MM/ANGDEC)[\r\n]+$','',line)
              #various replacements of text with nothing. This removes the text
              line=re.sub('IDENTIFIER','',line)
              line=re.sub('PART','50-1437',line)
              line=re.sub('Eval','',line)
              line=re.sub('Feat','',line)
              line=re.sub('=','',line)
              #line=re.sub('r"++++"','',line)
              line=re.sub('r"----|"',' ',line)
              line=re.sub('Nom','',line)
              line=re.sub('Act',' ',line)
              line=re.sub('Dev','',line)
              line=re.sub('LwTol','',line)
              line=re.sub('UpTol','',line)
              line=re.sub(':','',line)
              line=re.sub('(?m)(Trend)[\r\n]*$',' ',line)
              #Remove spaces replace with semicolon
              line=re.sub('[ \v\t\f]+', ',', line)
              #no worky line=re.sub(r",,,",',',line)
              line=re.sub(',+',',',line)
              #line=line.replace(",+", ",")
              #line=line.replace(",,,", ",")
              ofp.write(line) 
```

这就是我从上面的代码中得到的：有几个逗号在一起。我不明白为什么它们不会被替换为一个逗号。没关系，我一开始就看不到多余的逗号是如何出现的。

```
 50-1437,d
  2012/05/01
  00/08/27
  232_PD_1_DIA,PED_HL1_CR,,,12.482,12.478,-0.004,-0.021,0.020,----|++++
  232_PD_2_DIA_TOP,PED_HL2_TOP,,12.482,12.483,0.001,-0.021,0.020,----|++++
  232_PD_2_DIA,PED_HL2_CR,,12.482,12.477,-0.005,-0.021,0.020,----|++++
  232_PD_2_DIA_BOT,PED_HL2_BOT,,12.482,12.470,-0.012,-0.021,0.020,--|--++++ 
```

原始数据供参考：

```
 PART IDENTIFIER         :  d
  2012/05/01
  00/08/27
  232_PD_1_DIA  Eval Feat =  PED_HL1_CR   MM/ANGDEC
                    Nom           Act           Dev         LwTol         UpTol         Trend
                 12.482        12.478        -0.004        -0.021         0.020     ----|++++

  232_PD_2_DIA_TOP  Eval Feat =  PED_HL2_TOP   MM/ANGDEC
                 12.482        12.483         0.001        -0.021         0.020     ----|++++

  232_PD_2_DIA  Eval Feat =  PED_HL2_CR   MM/ANGDEC
                 12.482        12.477        -0.005        -0.021         0.020     ----|++++ 
```

有人可以指出我做错了什么吗？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T03:50:49.230

您的正则表达式工作正常。问题在于，在用正则表达式擦洗它们*之后*`write()`，你连接了这些行（通过它们） 。

 *相反，`"".join()`在你的所有行上使用，`re.sub()`在整个事情上运行，然后`write()`一次全部到文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T03:49:26.583

我认为您的问题是由于**删除行结尾不加入 lines**，`write`再加上没有在每个字符串的末尾添加换行符的事实引起的。所以你有多个输入行，看起来像输出中的一行。

查看评论，您似乎认为只需用空字符串替换行尾就会神奇地将下一行附加到它，但这实际上不起作用。因此，您看到的三个逗号不会被您的`re.sub`命令替换，因为它们*不在一行*中，它们是多个输入行（除了逗号之外所有替换都是空的），它们被打印到单个输出行，因为您剥离了他们的`'\n'`字符，并且`write`不会自动添加`'\n'`到每个书面字符串的末尾（与 不同`print`）。

要调试您的代码，只需`print line`在每行代码之后放置，以查看每条“行”实际上是什么 - 这应该可以帮助您了解出了什么问题。

一般来说，读取每个“记录”跨越多行的文件格式需要比`for line in file`循环更复杂的方法。*

# ios - 在 Xcode（声音）中保持和释放？

> ID：10958155
> 
> 赞同：0
> 
> 时间：2012-06-09T03:33:43.380
> 
> 标签：ios, xcode, audio, touch

所以，我基本上只是想使用 AVFoundation Kit 来播放我的声音。我设置了播放方法，但我希望能够按住按钮并以这种方式播放声音，而不是先点击它。一旦我松开按钮，我希望声音停止。简单：按住以播放声音，然后松开手指以停止声音，就像钢琴一样。请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:17:04.363

如果您右键单击 IB 中的按钮，您应该能够链接

触地

和

触摸取消

按钮链接，以便它们都调用相同的方法，或者它们各自调用不同的方法，一种是停止声音，另一种是启动声音。

你可能还想看看这个

[论坛](http://www.iphonedevsdk.com/forum/iphone-sdk-development/36530-playing-audio-when-app-launches.html)

希望这可以帮助

# regex - 我怎样才能使这个脚本更简洁？

> ID：10958156
> 
> 赞同：0
> 
> 时间：2012-06-09T03:33:56.360
> 
> 标签：regex, shell, grep

我写了一个小脚本，它打印包含有问题的字符序列的文件的名称。

```
#!/bin/bash
# Finds all files in the repository that contain
# undesired characters or sequences of characters

pushd .. >/dev/null

# Find Windows newlines
find . -type f | grep -v ".git/" | grep -v ".gitmodules" | grep -v "^./lib" | xargs grep -l $'\r'

# Find tabs (should be spaces)
find . -type f | grep -v ".git/" | grep -v ".gitmodules" | grep -v "^./lib" | xargs grep -l $'\t'

# Find trailing spaces
find . -type f | grep -v ".git/" | grep -v ".gitmodules" | grep -v "^./lib" | xargs grep -l " $"

popd >/dev/null 
```

我想将它组合成一行，即通过 grep 查找 \r 或 \t 或尾随空格。我将如何构建一个正则表达式来做到这一点？似乎对于转义字符需要使用特殊序列（`$'\X'`），我不知道如何组合这些......

我正在运行 OS X，并且正在寻找一种适用于基于 BSD 和 GNU 的系统的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T04:05:52.077

```
find . -type f | grep -E -v ".git/|.gitmodules|^./lib" | xargs grep -E -l '$\r|$\t| $' 
```

不确定 '$\r|$\t| $' 将以这种方式引用，在我的系统上进行一个简单的测试，它似乎可以工作。

我正在使用 -E（扩展 reg-exp）来 grep，它允许将多个搜索目标“或”在一起。

较旧的 Unix-en 可能支持也可能不支持 -E 选项，因此如果您收到一条错误消息标记该选项，请将所有内容替换`grep -E`为`egrep`.

我希望这有帮助。

# jquery - 有没有办法确定特定的 ajax 是否仍在运行？

> ID：10958157
> 
> 赞同：0
> 
> 时间：2012-06-09T03:33:59.603
> 
> 标签：jquery, html, ajax

我的网站上同时运行了一些 ajax 和 setInterval，还有一些带有按钮，

例如，如果我想在再次运行之前检查它是否已完成。因为每次我滚动到底部我都会运行它。知道它不应该调用这个的最好方法是什么，它仍然会运行。

```
$.post(base_url+"index.php/contracts/getleftpanedocs", {},
                    function(data){

                        if(data.count > 0){
                            $("#spandocdisplaycount").html(data.count);
                            $("#divdocsdisplay").fadeIn("slow");
                        }else{
                            $("#spandocdisplaycount").html(data.count);
                            $("#divdocsdisplay").fadeOut("slow");
                        }
                  },"json"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T03:40:51.223

您可能可以设置一个标志

```
loading = false;
if(!loading){
    loading = true;
    $.post(base_url+"index.php/contracts/getleftpanedocs", {},
        function(data){
           loading = false;
        }
} 
```

类似的东西可能会起作用！

# google-apps-script - 遇到错误：发生意外错误

> ID：10958159
> 
> 赞同：0
> 
> 时间：2012-06-09T03:34:30.227
> 
> 标签：google-apps-script

突然间，当我使用点击处理程序时，我正在处理的脚本都说明了这个错误：`Error Encountered: An unexpected error occurred`

**例如 ：**

```
var clickHandlerColapse = app.createServerClickHandler("respondColapse");
upButton.addClickHandler(clickHandlerColapse);<br>
clickHandlerColapse.addCallbackElement(verPanel); 
```

**调用函数：**

```
function respondColapse(e) {
    var app = UiApp.getActiveApplication();
    app.getElementById('abpanel').setVisible(false);
    return app.close();
} 
```

有什么想法可能导致这种情况或为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:19:04.933

这个错误很简单。您的 UI 上没有 ID 为“abpanel”的小部件。

您可能输入错误或将小部件“名称”与其“id”混淆，这是不同的东西。

无论如何，如果你最后只是关闭 UI，你为什么要在这个处理程序上做任何工作呢？`return app.close();`将完成它。如果这不是故意的，请将此行替换为`return app;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T15:24:47.367

试试这个简单的代码：

```
function buttontest() {
  var app = UiApp.createApplication().setHeight('50').setWidth('150');
  app.setTitle("test this button");
  var panel = app.createFlowPanel()
  var quit = app.createButton('quit');
  app.add(panel.add(quit));

  var QHandler = app.createServerHandler("quit");
  quit.addClickHandler(QHandler);

  var doc = SpreadsheetApp.getActive();
  doc.show(app);
}
//
function quit(){
  var app = UiApp.getActiveApplication();
  app.close()
  return app;
  } 
```

在 Chrome 和 safari (mac) 上它会导致错误“发生意外错误”

# unicode - 为什么 Unicode 示例代码的标准压缩方案不起作用？

> ID：10958162
> 
> 赞同：0
> 
> 时间：2012-06-09T03:35:30.027
> 
> 标签：unicode, compression

我想学习 SCSU [http://unicode.org/reports/tr6](http://unicode.org/reports/tr6/) 但是当我尝试[Java 示例代码](ftp://ftp.unicode.org/Public/PROGRAMS/SCSU/)时，输​​出总是大于输入。这就是我得到的：我试过这个例子：

```
Öl fließt 
```

他们说输入：

```
Unicode code points (9 code points):
00D6 006C 0020 0066 006C 0069 0065 00DF 0074 
```

输出是：

```
Compressed (9 bytes):
D6 6C 20 66 6C 69 65 DF 74 
```

但我得到的是： 输入：

```
famihug@hvn:/home/famihug/TestRoom/SCSU%xxd german.txt                      [0]
0000000: c396 6c20 666c 6965 c39f 7420 0a         ..l flie..t . 
```

输出：

```
famihug@hvn:/home/famihug/TestRoom/SCSU%java CompressMain /compress german.txt
Compressed german.txt: 6 chars to german.csu 13 bytes. Ratio: 108%.

famihug@hvn:/home/famihug/TestRoom/SCSU%ls -lt german.*                     [0]
-rw-r--r-- 1 famihug famihug 13 2012-06-09 10:24 german.csu
-rw-r--r-- 1 famihug famihug 13 2012-06-08 01:04 german.txt

famihug@hvn:/home/famihug/TestRoom/SCSU%xxd german.csu                      [0]
0000000: 0fc3 966c 2066 6c69 65c3 9f74 20 
```

~~~~~~~~~~~~~ 这是我尝试日文样本的时候：

```
famihug@hvn:/home/famihug/TestRoom/SCSU%wc -m jav.txt                       [0]
117 jav.txt
famihug@hvn:/home/famihug/TestRoom/SCSU%ls -lt jav.*                        [0]
-rw-r--r-- 1 famihug famihug 349 2012-06-08 01:13 jav.txt
-rw-r--r-- 1 famihug famihug 405 2012-06-08 01:01 jav.csu 
```

他们说输出是压缩的（178字节）

我使用 gedit/Vim 将示例纯文本粘贴到文件中。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T05:42:31.763

看起来示例编码器需要 UTF-16 输入，而您给它的是 UTF-8。

此输入：`c396 6c20 666c 6965 c39f 7420 0a`采用`Öl fließt`UTF-8 格式，带有尾随空格和换行符。

你得到的是`0fc3 966c 2066 6c69 65c3 9f74 20`. 第一个`0f`是`SCU`标签，它表示其余字节为大端 UTF-16。问题是，与输入字符串的 UTF-16 等效项不同，其余字节与输入中的字节*完全相同*（减去换行符），并且这些相同的字节代表 UTF-8 和 UTF 之间完全不同的字符-16。

你得到的输出似乎代表`쎖氠晬楥쎟琠`. 请注意，`CompressMain`据报道，这是一个 6 个字符长的字符串。您可以通过`/expand`同一类运行压缩输出以进行确认。

如果您将输入文件编码为 UTF-16，而不是 UTF-8，您应该得到您期望的输出。

# jquery - 使用jquery从隐藏的输入值中减去复选框值

> ID：10958166
> 
> 赞同：0
> 
> 时间：2012-06-09T03:36:28.313
> 
> 标签：jquery, checkbox

我一直在尝试根据选中和未选中框的值从隐藏的表单字段中添加和减去并更新屏幕文本。我已经能够成功地添加所有选中的复选框值并使用 .each 更新隐藏的输入字段。但是，我有很多时间从总数中减去值。

我似乎无法避免的问题是减去第一个选中框的值，而不是我实际上取消选中的框。我试图通过 id 引用该框，但这似乎没有帮助。

```
$(document).on("click", ".activities .checkbox-select", function(event){

    //event.preventDefault();
    $(this).parent().addClass("selected");

    //Checks the checkbox
    $(this).parent().find(":checkbox").prop('checked', true);

    var total = parseFloat($("#basePoints").val());
    $(':checkbox:checked.activity').each(function() {

        var activtyValues = 0;
        activtyValues = parseFloat(this.value);

        total += activtyValues;

        //Update the screen value
        $("#calulatedpoint").text(total);

        //Update the hidden value
        $("#calulatedPointsHidden").val(total);
    });     
});

$(document).on("click", ".activities .checkbox-deselect", function(event){

    //Get the checkbox id
    var id = $(this).attr('id');

    //event.preventDefault();
    $(this).parent().removeClass("selected");

    var total = $("#calulatedPointsHidden").val();
    checkedValue = $("input[@id="+id+"]:checked").val();  //It's finding the first checked checkbox value and subtracting that

    total -= checkedValue;

    //Update the screen value
    $("#calulatedpoint").text(total);

    //Update the hidden value
    $("#calulatedPointsHidden").val(total);

    //Unchecks the checkbox
    $(this).parent().find(":checkbox").removeAttr("checked");
}); 
```

任何解决我的减法问题的帮助将不胜感激。改进我的加法部分的提示也会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:07:46.093

我最终通过模仿我如何添加复选框值来解决我的问题。因为现在功能几乎相同，所以我将努力使用一个功能来处理检查和取消检查。下面是最终从我的运行总数中减去我取消选中的复选框的值。

```
$(document).on("click", ".activities .checkbox-deselect", function(event){

    //event.preventDefault();
    $(this).parent().removeClass("selected");

    //Unchecks the checkbox
    $(this).parent().find(":checkbox").removeAttr("checked");

    var total = parseFloat($("#basePoints").val());
    $(':checkbox:checked.activity').each(function() {

        var activtyValues = 0;
        activtyValues = parseFloat(this.value);

        total += activtyValues;

    });

    //Update the screen value
    $("#calulatedpoint").text(total);

    //Update the hidden value
    $("#calulatedPointsHidden").val(total);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:13:15.257

缺陷就在这里，我相信

```
checkedValue = $("input[@id="+id+"]:checked").val(); 
```

此复选框不再选中，但您在 jquery 选择器中指定选中，似乎它不会返回任何值，因为您还包括 id？

@ 符号也不再用于属性选择，也许您使用的是旧版本的 jquery？

```
var checkedValue = $("input[id=" + id + "]").val();
console.log(checkedValue); 
```

**编辑：** *添加可能的替代版本，使用 1 单击事件处理程序*

```
$(document).on("click", ".activities", function(event) {
    // add up all the checked items
    // set/reset the hidden field

    if ($(this).is(":checked")) {
        // update UI for checked item
    } else {
        // update UI for unchecked item
    }
}); 
```

# sql - SQL server 命令帮助和特定命令的教程？

> ID：10958170
> 
> 赞同：-6
> 
> 时间：2012-06-09T03:38:11.927
> 
> 标签：sql, sql-server, clustered-index

我在我的书项目中看到了命令（书 - 在 10 分钟内自学 SQL，2004 年）：

```
ALTER TABLE Customers WITH NOCHECK 
ADD CONSTRAINT PK_Customers PRIMARY KEY CLUSTERED (cust_id); 
```

你能告诉我这些命令的含义（或提供这些命令的简单教程链接）：

1.  带NOCHECK
2.  集群

上述命令是否有替代方案？我可以删除它们吗？

我正在使用带有最新更新的免费版 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T03:41:28.980

您可以从 MSDN 下载或使用在线书籍。

1.  [Microsoft SQL Server 2008 联机丛书](http://www.microsoft.com/en-us/download/details.aspx?id=1054)
2.  [SQL Server 联机丛书](http://msdn.microsoft.com/en-us/library/ms130214%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T03:41:59.543

`WITH NOCHECK`将告诉 SQL Server 不要验证特定的约束。 `CLUSTERED`告诉 SQL Server 使用键创建聚集索引`cust_id`。这将把它从一个堆变成一个聚集索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:00:37.117

网上有很多资源。您可以从[这里](http://www.w3schools.com/sql/default.asp)开始：它应该涵盖了大部分基础知识。从基础开始，例如创建数据库、创建表、从表中选择数据等。更高级的主题，例如聚簇索引和 With Non-check 选项将使您更加困惑。

# c# - 有没有办法单独设置 Winforms ListView 单元格的 BackColor？

> ID：10958171
> 
> 赞同：3
> 
> 时间：2012-06-09T03:38:45.390
> 
> 标签：c#, .net, winforms, customization

我想使用不同的颜色为每个列表视图单元格的 BackColor 着色。这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-09T04:05:45.550

要更改单元格的颜色`BackColor`，您可以执行以下操作：

```
listView1.Items[0].UseItemStyleForSubItems = false;
listView1.Items[0].SubItems[0].BackColor = Color.Green;
listView1.Items[0].SubItems[1].BackColor = Color.Orange;
listView1.Items[0].SubItems[2].BackColor = Color.Red;
// Change the 0 in Items[0] for whatever row you want,
// and the 0, 1 or 2 in SubItems[0] to whatever column you want. 
```

第一行，

```
listView1.Items[0].UseItemStyleForSubItems = false; 
```

将使它的行单元格不是全部着色相同的颜色。

这是一张演示图片：

![在此处输入图像描述](../Images/2e8d2dd346ce86864bb81dfec50c0cf0.png)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:05:39.947

如果您使用此属性，则它可以工作：

```
myListView.Items[i].UseItemStyleForSubItems = false; 
```

# mesh - 从 3D 三角形网格重建表面

> ID：10958173
> 
> 赞同：1
> 
> 时间：2012-06-09T03:39:32.113
> 
> 标签：mesh, 3d-reconstruction

我有一个 3D 模型，它由 3D 三角形网格组成。我想将网格划分为不同的组。每组代表一个表面，例如平面、圆柱表面。这类似于表面识别/重建。

输入是一组 3D 三角形网格。输出是每个表面的网格分割。

有没有符合我要求的图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:59:53.260

如果你想进行大量的网格处理，那么点云库是一个好主意，但我也建议使用 CGAL：[http](http://www.cgal.org) ://www.cgal.org以获取更多针对网格的算法和结构负载。

最后，您描述的问题最容易自己解决：

1.  枚举所有顶点
2.  枚举所有多边形
3.  创建一个整数数组，其大小与“大”网格中的顶点数相同，初始化为 0。
4.  创建一个整数数组，其大小与“大”网格中的多边形数量相同，初始化为 0。
5.  将计数器初始化为 0
6.  对于网格中的每个多边形，查看它的顶点以及每个顶点在数组中的值。如果每个顶点的值为零，则增加计数器并相应地分配给顶点数组和多边形数组中的每个值。如果不是，则将所有具有较大数字的顶点和多边形重新标记为最小的非零数字。

使用查找表可以快速完成重新标记。这可能会为您节省很多将代码连接到您并不真正感兴趣的库的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:32:12.410

您应该看看 PCL 库，它具有所有这些功能以及更多功能：http: [//pointclouds.org/](http://pointclouds.org/)

# android - 我可以在没有发布者帐户的情况下使用 android 许可证管理器吗？

> ID：10958178
> 
> 赞同：0
> 
> 时间：2012-06-09T03:41:47.710
> 
> 标签：android

似乎除非我通过支付 25 美元注册发布者帐户，否则我无法使用 android 许可证管理器服务。

如何将 android 许可证管理器用于不会被放入 android 市场的 android 应用程序？

有谁知道可以与android客户端一起使用的免费许可证管理器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:30:48.783

根据[这个](http://developer.android.com/guide/market/licensing/overview.html#Reqs)参考你不能使用它：

> Google Play 许可旨在让您将许可控制应用于您通过 Google Play 发布的应用程序。该服务并非旨在让您控制对未通过 Google Play 发布或在不提供 Google Play 客户端的设备上运行的应用程序的访问。

# java - 使用 Java ScriptEngine 同步执行多个评估

> ID：10958180
> 
> 赞同：0
> 
> 时间：2012-06-09T03:41:53.087
> 
> 标签：java, scriptengine

如何使用单个 Java ScriptEngine 同步执行多个评估？

例如

> 方法1包括
> 
> `sce.eval(code1);`
> 
> 方法2包括
> 
> `sce.eval(code2);`

如果两种方法同步，则​​评估同时运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:08:52.553

同步和并发不适合在一起，因为一个与另一个相反。如果 eval 方法是同步的，则需要 2 个具有相同上下文的脚本引擎实例，如果不是，这里会解释执行并行/并发执行。

如果要同时运行这两种方法，则需要运行多个线程，因为单个线程将依次通过其执行管道运行。

同步意味着它是线程安全的，并且将对类的任何同步方法的所有调用进行排队。例如，如果 m1 和 m2 是同步的，thread1 调用 m1 并且 thread2 调用 m2，第一个将达到其相应方法的将正确运行，而第二个将等待直到另一个退出（不完全正确）该方法执行它的方法的内部代码..

现在，如果你想同时运行多个线程，你可以看看 Thread、ExecutorService 和 Executors 类，每个线程都会运行它自己的管道/执行攻击。

最后，如果您希望两个线程共享相同的脚本引擎，则必须使用该对象的相同引用，最好的方法是将其提供给对象的构造函数。

但是，这就是出现问题的地方。如果脚本引擎不能很好地处理并发，这可能会导致一些晦涩的奇怪行为，因此您必须阅读 scrupt 引擎的规范并验证您使用的实现是否是线程安全的（因此并发执行安全）。

简单的例子：

```
public void launchAsync(final String code) {
   new Thread() {
       public void run() {
           engine.eval(code);
       }
   }.run();
} 
```

这将与主线程异步执行代码，这意味着调用该方法两次将并行运行它们（在与此不同的线程中）。

# php - 在 Yii 框架中实现基于角色的授权

> ID：10958183
> 
> 赞同：3
> 
> 时间：2012-06-09T03:43:13.033
> 
> 标签：php, yii

我一直在关注本教程，顺便说一句，这很棒，并且有一个问题。

[http://www.larryullman.com/2010/01/07/custom-authentication-using-the-yii-framework/](http://www.larryullman.com/2010/01/07/custom-authentication-using-the-yii-framework/)

我可以在我的应用程序代码中的任何位置访问这样的角色属性：

```
Yii::app()->user->role 
```

但是，我真正想做的是在我的 UserController 中使用默认的控制器授权：

```
/**
  * Specifies the access control rules.
  * This method is used by the 'accessControl' filter.
  * @return array access control rules
  */
public function accessRules()
{  
  return array(
   array('allow',  // allow all users to perform 'index' and 'view' actions
    'actions'=>array('*'),
    'users'=>array('@'),
    // Fails
    'roles'=>array(ModelConstantsRole::ADMIN),
    // Also Fails
    'expression'=>'(isset(Yii::app()->user->role) && (Yii::app()->user->role==ModelConstantsRole::ADMIN))',
   ),
   array('deny',  // deny all users
    'users'=>array('*'),
   ),
  );
} 
```

看起来实际上验证 accessRules 中定义的规则的类实际上并不知道我分配给它的角色。CAccessControlFilter（对于那些不想搜索 40 分钟的人 XD）。

当我将 accessRules 方法与 Larry 的方法结合使用时，我有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T16:25:27.313

从您的代码看来，您希望将此规则应用于所有操作，为此您需要将操作数组保留为未指定或空数组：

```
//empty actions
array('allow',  
'actions'=>array(),//array('*'),
...
) 
```

或未指定：

```
array('allow',  // allow all users to perform 'index' and 'view' actions
//'actions'=>array('*'),
...
) 
```

这已经[记录在文档中](http://www.yiiframework.com/doc/api/1.1/CAccessControlFilter)：

> array( 'allow', // 或 'deny'
> // 可选，此规则适用的操作 ID 列表（不区分大小写）
> // 如果未指定，则规则适用于所有操作
> 'actions'=>array('edit' ， '删除'），

请记住，角色数组也是一个带有角色名称的数组，例如：

```
'roles'=>array('role1','role2','role3') 
```

然后你就不需要“表达式”了，因为你在那里所做的一切都已经用角色数组完成了。

编辑：阅读您链接的教程后，他似乎没有实现[RBAC](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#role-based-access-control)。该`'roles'`选项使用 rbac，因此没有它就无法工作。因此，您必须改用该`'expression'`选项，并且您的`'expression'`选项看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:34:19.630

尝试正确设置动作

```
array('allow',  // allow all users to perform 'index' and 'view' actions
    'actions'=>array('view', 'delete', 'update'), 
```

# c# - ac中的环境变量#

> ID：10958185
> 
> 赞同：-1
> 
> 时间：2012-06-09T03:43:33.180
> 
> 标签：c#, command-line

我正在使用以下命令为 ac# Console 应用程序中的环境变量设置一个值。

```
 System.Environment.SetEnvironmentVariable(envvar, result,EnvironmentVariableTarget.Process); 
```

在命令窗口中运行应用程序后，当我尝试回显该变量时，我看不到该值。我必须在批处理文件中使用此应用程序。我想要 SET 命令之类的功能。请帮忙..

**编辑：** 我尝试使用 System.Environment.SetEnvironmentVariable(envvar,result,EnvironmentVariableTarget.user) 并传播我[在 Env VARr 中尝试了这个 Propagating Change 的更改](http://support.microsoft.com/kb/104011)。但我不能在同一个命令窗口中回显变量。

让我重新表述一下这个问题：我想在 c# 中为 Env Var 设置一个值。我必须能够在同一个命令窗口中使用该变量（即我不应该打开一个新的 cmd 窗口来查看更改）。我们使用 SET 命令，我们可以立即使用该变量 .. rt ？我想要这样的功能。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T04:06:43.250

当您使用 EnvironmentVariableTarget.Process 时，变量集将仅在当前进程中可见，如您在此示例中所见：

```
System.Environment.SetEnvironmentVariable("myVar", "myValue", EnvironmentVariableTarget.Process);
string s = System.Environment.GetEnvironmentVariable("myVar",EnvironmentVariableTarget.Process); 
```

myVar 上方将显示 s = "myValue" 但在命令窗口中不可见。

如果要设置在命令窗口中可见的值，则需要使用 EnvironmentVariableTarget.User：

```
System.Environment.SetEnvironmentVariable("myVar", "myValue", EnvironmentVariableTarget.User); 
```

这样设置 myVar=myValue 将被存储，然后您可以在命令窗口上看到。

详细示例位于[此处](http://msdn.microsoft.com/en-us/library/96xafkes.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T04:06:38.857

为了在当前批处理中查看 env。您必须在程序中将其作为字符串输出并解析它并在批处理文件中调用 set。

或者您可以尝试 EnvironmentVariableTarget.User。使用此选项设置时，环境将在所有新进程中可见。

# php - Symfony2：记住我令牌未设置

> ID：10958187
> 
> 赞同：2
> 
> 时间：2012-06-09T03:43:49.403
> 
> 标签：php, cookies, symfony

我做了所有需要的事情，但我的“记住我”令牌没有设置。我跟踪代码，直到 **/vendor/symfony/src/Symfony/Component/Security/Http/RememberMe/TokenBasedRememberMeService.php**中设置 cookie的部分

```
$response->headers->setCookie(
        new Cookie(
            $this->options['name'],
            $value,
            $expires,
            $this->options['path'],
            $this->options['domain'],
            $this->options['secure'],
            $this->options['httponly']
        )
    ); 
```

当我转储 $response->headers 时，cookie 部分如下所示：

```
["cookies":protected]=> array(1) { [""]=> array(1) { ["/"]=> array(1) { ["REMEMBERME"]=> object(Symfony\Component\HttpFoundation\Cookie)#753 (7) { ["name":protected]=> string(10) "REMEMBERME" ["value":protected]=> string(176) "V2Vic3BpblxVc2VyQnVuZGxlXEVudGl0eVxVc2VyOmJXRmliMmRwWlVCbmJXRnBiQzVqYjIwPToxMzM5MjQ5Mjc5OmJjY2QxMWYxNGNkZmQxZmI5ZTNjOTBhYTBiMTEyNjEwYzdkMWYxOGYwYWQzMmMzYmJhYzZlODM3Yjc0Nzc3Mjk=" ["domain":protected]=> NULL ["expire":protected]=> int(1339249279) ["path":protected]=> string(1) "/" ["secure":protected]=> bool(false) ["httpOnly":protected]=> bool(true) } } } } 
```

cookies 数组第一个元素的键为空。那是对的吗？

如果这是正确的，为什么没有设置 cookie？

**编辑：** 我的security.yml：

```
firewalls:
    main:
        pattern: ^/
        form_login:
            provider: fos_userbundle
            login_path: fos_user_security_login 
            check_path: fos_user_security_check 
        logout:
            path:        _security_logout
            target:      _welcome
        anonymous:    true
        remember_me:
            key:      "%secret%"
            lifetime: 36000
            path:     /
            domain:   ~ 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:53:04.887

好的，我解决了这个问题。

原因与我的交互式登录监听器有关。我听取了成功的登录，但在发送标头之前，我使用新的 RedirectResponse 进行了重定向，这当然不包括 cookie。

呸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-04T20:57:05.420

以防万一其他人也在努力弄清楚为什么没有设置 cookie，这就是我的问题所在。

我`_remember_me`通过 my 中的构建器将复选框添加到我的表单中`LoginFormType`，这意味着渲染时的字段名称实际上是`login_form[_remember_me]`，*而不是* `_remember_me`预期的那样。

这意味着即使选中该框，身份验证系统也认为登录不希望被记住，因此没有设置 cookie。设置正确的字段名称`security.yml`已修复。

# ruby-on-rails - 命名 Rails 模型以避免冲突的好方法是什么？

> ID：10958189
> 
> 赞同：3
> 
> 时间：2012-06-09T03:44:30.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3

*你*如何在 Rails 中可靠地命名你的类？

网上似乎没有可靠的或最新的 Rails 保留字列表，而且似乎采用了许多明显的模型名称选择。

我的背景故事：

我添加了一个新类来处理文件附件并命名这个类`Files`。这引起了很大的悲痛。我重命名了它`Assets`，应该猜到 Rails 不会正确路由。接下来是`Media`，这似乎是晦涩和安全的，但 postgres 停止加入表。然后是`Attachments`但回形针停止返回正确的属性值。手动重命名一个类需要做很多工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:07:44.443

您可以将模型包装在一个模块中，以便它围绕您的模型创建一个命名空间。

此处已对其进行了解释：[如何使用 rails 在应用程序/模块中组织类的命名空间？](https://stackoverflow.com/questions/9712468/how-i-can-organize-namespace-of-classes-in-app-modules-with-rails)

# java - 使用谷歌应用引擎发送电子邮件

> ID：10958191
> 
> 赞同：5
> 
> 时间：2012-06-09T03:45:07.273
> 
> 标签：java, google-app-engine, email

我试图使用谷歌应用引擎发送一封带有此代码的简单电子邮件。但是什么也没发生，我必须配置什么才能使用邮件 api 吗？这在本地主机上运行。我使用 gmail 作为邮件主机。

```
 String host = "smtp.google.com";
String to = "example@yahoo.fr";
String from = "example@gmail.com";
String subject = "this is a test";
String messageText = "test";
boolean sessionDebug = false;
// Create some properties and get the default Session.
Properties props = System.getProperties();
props.put("mail.host", host);
props.put("mail.transport.protocol", "smtp");
Session mailSession = Session.getDefaultInstance(props, null);

// Set debug on the Session
// Passing false will not echo debug info, and passing True will.

mailSession.setDebug(sessionDebug);

// Instantiate a new MimeMessage and fill it with the 
// required information.

Message msg = new MimeMessage(mailSession);
msg.setFrom(new InternetAddress(from));
InternetAddress[] address = { new InternetAddress(to) };
msg.setRecipients(Message.RecipientType.TO, address);
msg.setSubject(subject);
msg.setSentDate(new Date());
msg.setText(messageText);

// Hand the message to the default transport service
// for delivery.

Transport.send(msg); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T04:00:37.973

在本地运行 AppEngine 开发服务器时，实际上不会发送通过邮件服务发送的任何内容 - 它只会记录到控制台

看[这里](https://developers.google.com/appengine/docs/java/mail/overview#Development_Server)

> 当开发服务器中运行的应用程序调用邮件服务发送电子邮件消息时，该消息将打印到日志中。Java 开发服务器不发送电子邮件。

另外，`from`地址必须是（从[这里](https://developers.google.com/appengine/docs/java/mail/usingjavamail#Senders_and_Recipients)）

*   应用管理员的电子邮件
*   使用 Google 帐户登录的当前登录用户的电子邮件
*   来自应用程序的有效电子邮件接收地址

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T03:52:43.003

发件人应该是您自己的 Gmail 电子邮件地址，而不是`example@gmail.com`

原因是 SMTP 服务器需要对您进行身份验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-01T13:08:35.483

显然，GAE 不再允许使用管理员帐户。您需要使用服务帐户：`project-id@appspot.gserviceaccount.com`

我以前的项目仍然使用管理员帐户，但最近创建的项目不允许我使用任何管理员帐户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T05:38:34.450

除了电子邮件无法在 localhost 上运行或由于发件人电子邮件不是经过身份验证的电子邮件之外，我还经历过即使版本不是默认版本，电子邮件也无法正常工作。我在任何地方都找不到这个记录。

例如：（ `nondefaultversion-dot-myapp.appspot.com`电子邮件不起作用，没有错误日志） `myapp.appspot.com`（电子邮件有效）

请确认其他人是否也遇到过这个问题。

# python - 使用python从文件中读取特定行

> ID：10958192
> 
> 赞同：0
> 
> 时间：2012-06-09T03:45:07.230
> 
> 标签：python

我有一个文件，其中包含如下数据：

```
 1xxy
   (1gmh)

[white line]
ahdkfkbbmhkkkkkyllllkkjdttyshhaggdtdyrrrutituy
[white line]  
   __________________________________________________
   Intra Chain:
   A 32
   __________________________________________________
   PAIR 1MNS HE 10 NM A ARG 33 OX1 3.22 32
   PAIR 1MNS UR 11 NM A ARG 33 OX2 3.21 12
   PAIR IMNS UK 32 NH A ASN 43 OZ1 5.21 22
   ...
   __________________________________________________ 
```

现在我想让它像：

```
 PAIR 1MNS HE 10 NM A ARG 33 OX1 3.22 32
   PAIR 1MNS UR 11 NM A ARG 33 OX2 3.21 12
   PAIR IMNS UK 32 NH A ASN 43 OZ1 5.21 22
   ... 
```

即删除所有其他字符。我尝试使用：

```
inp = open('c:/users/rox/desktop/1UMG.out','r')
for line in inp:
    if not line.strip():      # to remove excess whit lines
       continue
    else:
       z = line.strip().replace('\t',' ')
       if z.startswith('PAIR'):
          print z
inp.close() 
```

但是这段代码也没有给我任何输出。无法弄清楚为什么`z.startswith('PAIR')`不起作用。但到上一行为止一切正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T03:50:26.930

看起来您只查看以 开头的行`PAIR`，所以为什么不这样简单：

```
with open('data.txt') as infp:
   for line in infp:
      line = line.strip()
      if line.startswith('PAIR'):
         print(line) 
```

会给：

```
PAIR 1MNS HE 10 NM A ARG 33 OX1 3.22 32
PAIR 1MNS UR 11 NM A ARG 33 OX2 3.21 12
PAIR IMNS UK 32 NH A ASN 43 OZ1 5.21 22 
```

此输出删除了前 3 个空格，如果需要将它们重新添加将是微不足道的。

*注意*: using`with`将在您完成或遇到异常时自动为您关闭文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:27:27.403

除了@Levon 的解释，由于文件对象支持迭代器协议，并且根据文件的大小，可以使用列表推导：

```
[l for l in open('test.txt') if l.startswith('PAIR')] 
```

# vim - vim中TextMate风格的代码美化？

> ID：10958205
> 
> 赞同：0
> 
> 时间：2012-06-09T03:49:23.037
> 
> 标签：vim, textmate

我在 vim 中有一堆丑陋的代码：它根本没有一致的缩进。TextMate 有这个美妙的“代码清理”功能......我确信 vim 也同样强大，我只是不知道如何自动清理我的整个文件（**在花括号之后放置一致的标签，长度一致。 ..然后在每个代码块之后取消缩进**是我想要的主要内容）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T03:54:58.770

您是否在正常模式下尝试过 gg=G ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T03:57:05.213

除了[Gebb 的](https://stackoverflow.com/a/10958224/41688)回答，请确保您的`.vimrc`:

```
filetype indent plugin on 
```

此外，要自动删除任何尾随空格，请添加以下内容：

```
autocmd BufWritePre * :%s/\s\+$//e 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T06:18:10.013

在 Vim 中，缩进由文件类型特定的脚本定义。默认的 JavaScript 缩进文件不是最新的，并且不能很好地与“现代”编写 JS 的方式（大量嵌套对象、匿名函数……）配合使用。尝试其他缩进文件，看看它是否能解决您的问题。

# node.js - 有没有人在早午餐中使用玉模板语言？

> ID：10958207
> 
> 赞同：0
> 
> 时间：2012-06-09T03:49:27.763
> 
> 标签：node.js, pug, brunch

有没有人用早午餐的玉器模板？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:32:58.087

似乎这是合规的（在[Brucn Homepage](http://brunch.io/)上）：

> 预编译模板：Handlebars.js、Jade、Mustache、Eco

似乎您必须这样做（在[文档的第一页](http://brunch.readthedocs.org/en/latest/faq.html#how-do-i-change-app-language)），显然将 eco 替换为 jam：

> 从 package.json 中删除 "handlebars-brunch": "version" 行。在 config.coffee 中添加 "eco-brunch": "version" 将 config.files.templates.defaultExtension 更改为 eco。

好像你有一个[RTFM](https://en.wikipedia.org/wiki/Rtfm)问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T20:47:24.430

我正在使用它

1.  添加到 /package.json

    ```
    "dependencies":{
       ...
       "jade-brunch":"> 1.0 < 1.4",
       ...
    }, 
    ```

2.  *在/app/views/templates*中创建您的模板。应该以**.jade 结尾**

3.  运行命令

    ```
    cd <App>
    npm install
    brunch build 
    ```

# scala - 如何从 scala/sbt/slf4j 项目中排除公共日志记录？

> ID：10958215
> 
> 赞同：52
> 
> 时间：2012-06-09T03:51:12.740
> 
> 标签：scala, sbt, slf4j

我的 scala/sbt 项目使用 grizzled-slf4j 和 logback。第三方依赖项使用 Apache Commons Logging。

对于 Java/Maven，我会使用 jcl-over-slf4j 和 logback-classic，这样我就可以使用 logback 作为统一的日志后端。

我还将消除第三方库让 sbt 引入的 commons-logging 依赖项。我在 Maven 中执行以下操作（这是[http://www.slf4j.org/faq.html#](http://www.slf4j.org/faq.html#excludingJCL) excludeJCL 推荐的）：

```
<dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging</artifactId>
    <version>1.1.1</version>
    <scope>provided</scope>
</dependency> 
```

问题是，如何对 sbt 做同样的事情？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-09T08:36:11.963

Heiko 的方法可能会奏效，但不会导致第 3 方库的任何依赖项被下载。如果只想排除特定的一种用途`exclude`。

```
libraryDependencies += "foo" % "bar" % "0.7.0" exclude("org.baz", "bam") 
```

或者

```
... excludeAll( ExclusionRule(organization = "org.baz") ) // does not work with generated poms! 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-05-19T20:38:44.800

对于 sbt 0.13.8 及以上版本，还可以尝试项目级别的依赖排除：

```
excludeDependencies += "commons-logging" % "commons-logging" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-27T02:49:41.967

我以前遇到过同样的问题。通过添加依赖来解决它

```
libraryDependencies += "foo" % "bar" % "0.7.0" exclude("commons-logging","commons-logging") 
```

或者

```
libraryDependencies += "foo" % "bar" % "0.7.0" excludeAll(ExclusionRule(organization = "commons-logging")) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-09T05:40:15.177

添加*不及物*您的 3rd 方库依赖项，例如

```
libraryDependencies += "foo" %% "bar" % "1.2.3" intransitive 
```

# android - Android 应用程序在连接到 EDGE 网络时崩溃

> ID：10958217
> 
> 赞同：0
> 
> 时间：2012-06-09T03:52:21.147
> 
> 标签：android, cellular-network

我开发了一个使用 TCP 套接字连接的 Android 应用程序，该连接侦听并写入特定端口。我的问题是，每次数据连接切换到 EDGE 连接时，应用程序强制关闭。我尝试了 catch 块，没有一个抛出异常。发生这种情况有什么原因吗？

注意：它适用于其他连接类型，例如 HSDPA。

# indy10 - 为 TIdTCPServer 使用 TIdSASLLogin

> ID：10958218
> 
> 赞同：0
> 
> 时间：2012-06-09T03:52:35.990
> 
> 标签：indy10

组件是否`indy SASL`可以使用 to`TIdTCPServer`和`TIdTCPCLient`? 如果可以，请给我建议算法如何处理？我也必须使用`TIdSMTP`吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T04:34:47.787

Indy 的 SASL 组件只是客户端组件。目前 Indy 中没有可用的服务器端 SASL 实现。您必须手动实现服务器端 SASL。SASL 组件主要设计为与由 、 和 组件使用的类一起使用`TIdSASLCollection`。查看这些组件的源代码，了解如何将 SASL 合并到您的客户端代码中。`TIdSMTP``TIdPOP3``TIdIMAP4`

# php - 为什么这两点是php技巧？

> ID：10958220
> 
> 赞同：2
> 
> 时间：2012-06-09T03:53:23.930
> 
> 标签：php, structure, continue

我正在阅读一个提供 php 编码技巧的博客。有两个地方我不明白。

1.  少/不使用继续。

2.  结构 ：

    ```
    do{
      if(true) {
           break;
      }
      if(true) {
           break;
      }
    } while(false); 
    ```

    优于：

    ```
    if(true) {
    } else if(true) {
    } else {
    } 
    ```

有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T03:57:53.950

我非常怀疑这是因为 a`do { } while ()`每次迭代都会检查，而 an`if`只是一个简单的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:06:34.927

也许他们试图在博客中展示的一点是 do {} while() 循环将暂停您的代码，直到满足条件，因为 if 语句将被解析并且您的代码将继续执行，无论条件是否是遇见与否。

# asp.net-mvc - 在同一个流连接上返回多个结果以实现 HTML5 服务器发送事件

> ID：10958223
> 
> 赞同：4
> 
> 时间：2012-06-09T03:54:56.460
> 
> 标签：asp.net-mvc, html

我正在尝试在我的 MVC 4 Web 上设置一个轻量级的 HTML5 服务器发送事件实现，而不使用可用于实现套接字和类似内容的库之一。我正在尝试的轻量级方法是：

**客户端**：（ `EventSource`或`jquery.eventsource`用于 IE）

**服务器端**：长轮询`AsynchController`（很抱歉将原始测试代码放在这里，但只是为了提供一个想法）

```
public class HTML5testAsyncController : AsyncController
    {
        private static int curIdx = 0;
        private static BlockingCollection<string> _data = new BlockingCollection<string>();
        static HTML5testAsyncController()
        {
            addItems(10);
        }
 //adds some test messages
        static void addItems(int howMany)
        {
            _data.Add("started");
            for (int i = 0; i < howMany; i++)
            {
                _data.Add("HTML5 item" + (curIdx++).ToString());
            } _data.Add("ended");
        }

// here comes the async action, 'Simple'
        public void SimpleAsync()
        {
            AsyncManager.OutstandingOperations.Increment();

            Task.Factory.StartNew(() =>
            {
                var result = string.Empty; var sb = new StringBuilder();
                string serializedObject = null;
            //wait up to 40 secs that a message arrives
                if (_data.TryTake(out result, TimeSpan.FromMilliseconds(40000)))
                {
                    JavaScriptSerializer ser = new JavaScriptSerializer();
                    serializedObject = ser.Serialize(new { item = result, message = "MSG content" });
                    sb.AppendFormat("data: {0}\n\n", serializedObject);
                }
                AsyncManager.Parameters["serializedObject"] = serializedObject;
                AsyncManager.OutstandingOperations.Decrement();
            });
        }
  // callback which returns the results on the stream
        public ActionResult SimpleCompleted(string serializedObject)
        { ServerSentEventResult sar = new ServerSentEventResult(); 
            sar.Content = () => { return serializedObject; };
            return sar;

        }
  //pushes the data on the stream in a format conforming HTML5 SSE
        public class ServerSentEventResult : ActionResult
        {
            public ServerSentEventResult() { }
            public delegate string GetContent(); 
            public GetContent Content { get; set; }        
            public int Version { get; set; }
            public override void ExecuteResult(ControllerContext context)
            {
                if (context == null)
                {
                    throw new ArgumentNullException("context");
                } if (this.Content != null)
                {
                    HttpResponseBase response = context.HttpContext.Response;
                    // this is the content type required by chrome 6 for server sent events              
                    response.ContentType = "text/event-stream";

                    response.BufferOutput = false;                // this is important because chrome fails with a "failed to load resource" error if the server attempts to put the char set after the content type          
                    response.Charset = null;
                    string[] newStrings = context.HttpContext.Request.Headers.GetValues("Last-Event-ID");
                    if (newStrings == null || newStrings[0] != this.Version.ToString())
                    {
                        string value = this.Content();
                        response.Write(string.Format("data:{0}\n\n", value));
                        //response.Write(string.Format("id:{0}\n", this.Version));
                    }
                    else
                    {
                        response.Write("");
                    }
                }
            }
        }
    } 
```

问题出在服务器端，因为预期结果与实际情况之间仍有很大差距。

**预期结果**：

*   `EventSource`打开到服务器的流连接，
*   the server keeps it open for a *safe* time (say, 2 minutes) so that I am protected from thread leaking from dead clients,
*   as new message events are received by the server (and enqueued to a thread safe collection such as `BlockingCollection`) they are pushed in the open stream to the client:

    *   message 1 received at T+0ms, pushed to the client at T+x
    *   message 2 received at **T+200ms**, pushed to the client at **T+x+200ms**

**Actual behaviour**:

*   `EventSource` opens a stream connection to the server,
*   the server keeps it open until a message event arrives (thanks to long polling)
*   once a message is received, MVC pushes the message and closes the connection.
*   `EventSource` has to reopen the connection and this happens after a couple of seconds.
    *   message 1 received at T+0ms, pushed to the client at T+x
    *   消息 2 在**T+200ms收到，在****T+x+3200ms**推送到客户端

 **这是不行的，因为它违背了使用 SSE 的目的，因为客户端像正常轮询一样重新开始重新连接，并且消息传递被延迟。

现在，*问题*是：在发送第一条消息并在同一连接上发送更多消息后，是否有一种本地方法可以保持连接打开？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T04:57:23.840

[您希望使用Response.Flush](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.flush.aspx)发送数据，而不是依赖 SimpleComplete 发送数据。通过执行 AsyncManager.OutstandingOperations.Decrement()，您是在告诉 AsyncController 您已完成对请求的处理，并且已准备好发送响应并关闭连接。相反，您避免调用 OutStandingOperations.Decrement() 直到连接丢失等。每当您想向客户端推送消息时，您可以直接从某个后台线程调用[Response.Write和 Response.Flush。](http://msdn.microsoft.com/en-us/library/ms525585%28v=vs.90%29.aspx)此外，AsyncControllers 有一个默认超时，之后它们会自动关闭连接。为了解决这个问题，您需要将[NoAsyncTimeoutAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.noasynctimeoutattribute.aspx)用于相关操作。

附带说明一下，AsyncController 的接口并没有真正允许以干净的方式实现 SSE 流。考虑到我使用的是 Asp.NET MVC 4，我会亲自实现一个[HttpTaskAsyncHandler 。](http://msdn.microsoft.com/en-us/library/system.web.httptaskasynchandler%28v=vs.110%29.aspx)**

# php - mysql查询数组检查

> ID：10958225
> 
> 赞同：0
> 
> 时间：2012-06-09T03:55:29.767
> 
> 标签：php, mysql

这对你们中的一些人来说可能很容易，但我遇到了麻烦。如果查询数组中存在“$my_id”，我需要执行一个 mysql 查询来检索数据。像这样的东西，或者达到相同结果的想法......

```
mysql_query("SELECT myArray FROM myTable WHERE my_id IN (myArray) LIMIT 1") 
```

有任何想法吗？

**编辑：**

表中的数组由逗号分隔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T03:58:37.710

```
mysql_query("SELECT myArray FROM myTable WHERE my_id IN ('".implode("', '", array_map('mysql_real_escape_string', $array))."') LIMIT 1"); 
```

**编辑**

我想我明白你在做什么。您可以为此使用 mysql LIKE，但它确实效率低下（它必须进行全表扫描）。您不应该将值列表存储在 mysql 的一个字段中。

您想在实体之间创建一对多的关系。因为您并没有真正向我们提供太多信息，所以我们将存储在您的表中的实体称为 foos。所以你有一个名为`foos`存储你的 foos 的表。每个 foo 都与许多条有关系，这些条当前存储在一个“数组”中。这称为一对多关系。这些酒吧需要在单独的表中调用`bars`。您将每行存储一个 bar，每个 bar 与一个 foo 相关联，因此您将 foo 的 id 与每个 bar 一起存储。如果您想查找哪些 foo 与某个 bar 相关联，您只需进行简单的连接。

如果 bar 可以在许多 foo 之间共享，这称为多对多映射。然后你需要一张表用于 foos，一张表用于 bar，第三张表用于将 foos 映射到 bar。然后可以搜索哪些 foo 与哪些 bar 相关联，哪些 bar 与哪些 foo 相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:00:03.097

如果它是一维数组 - 只需将其内爆：

```
implode("','", $array) 
```

IN 采用逗号分隔值。[http://www.w3schools.com/sql/sql_in.asp](http://www.w3schools.com/sql/sql_in.asp)

# java - 在 Mac 上调试时未检测到黑莓设备

> ID：10958230
> 
> 赞同：0
> 
> 时间：2012-06-09T03:56:26.617
> 
> 标签：java, macos, debugging, blackberry

当我想使用设备从 Eclipse 调试我的应用程序时遇到问题（我使用 9700 进行调试）。以前是这样的：设备使用usb线连接到Mac，桌面管理器会自动弹出，提示我的设备连接成功，这样我就可以从eclipse调试我的项目了。

现在我不能再那样做了。当我将设备连接到 Mac 时，桌面管理器（或 Mac）没有检测到我的设备。我用：

*   桌面管理器 2.3.1 构建 5
*   黑莓 Java 插件版本：1.5.2.201204302029

有人知道如何让系统再次检测到我的设备吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:58:44.457

您可以比较这两个 USB 实用程序中的任何一个的结果：

*   `/Applications/Utilities/System Profiler.app`

*   `/Developer/Applications/Utilities/USB Prober.app`

# ruby-on-rails - 资产时的capistrano异常：预编译

> ID：10958231
> 
> 赞同：0
> 
> 时间：2012-06-09T03:56:49.477
> 
> 标签：ruby-on-rails, deployment, capistrano

我正在尝试将 mysite 部署到我的 VPS。Capstrano 是我完成这项任务的工具。当我跑步时

```
cap deploy 
```

我收到了这个错误

```
 * executing `deploy:assets:precompile'
  * executing "cd /home/aassdd/mysitename.com/releases/20120609034922 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["mysitename.com"]
    [mysitename.com] executing command
 ** [out :: mysitename.com] Faraday: you may want to install system_timer for reliable timeouts
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/aaalsubaie/mysitename.com/releases/20120609034922; true"
    servers: ["mysitename.com"]
 ** [deploy:update_code] exception while rolling back: IOError, closed stream
/Library/Ruby/Gems/1.8/gems/net-ssh-2.5.2/lib/net/ssh/ruby_compat.rb:41:in `select': closed stream (IOError)
    from /Library/Ruby/Gems/1.8/gems/net-ssh-2.5.2/lib/net/ssh/ruby_compat.rb:41:in `io_select'
    from /Library/Ruby/Gems/1.8/gems/net-ssh-2.5.2/lib/net/ssh/ruby_compat.rb:40:in `synchronize'
    from /Library/Ruby/Gems/1.8/gems/net-ssh-2.5.2/lib/net/ssh/ruby_compat.rb:40:in `io_select'
    from /Library/Ruby/Gems/1.8/gems/net-ssh-2.5.2/lib/net/ssh/transport/packet_stream.rb:73:in `available_for_read?'
    from /Library/Ruby/Gems/1.8/gems/net-ssh-2.5.2/lib/net/ssh/transport/packet_stream.rb:85:in `next_packet'
    from /Library/Ruby/Gems/1.8/gems/net-ssh-2.5.2/lib/net/ssh/transport/session.rb:171:in `poll_message'
    from /Library/Ruby/Gems/1.8/gems/net-ssh-2.5.2/lib/net/ssh/transport/session.rb:166:in `loop'
    from /Library/Ruby/Gems/1.8/gems/net-ssh-2.5.2/lib/net/ssh/transport/session.rb:166:in `poll_message'
    from /Library/Ruby/Gems/1.8/gems/net-ssh-2.5.2/lib/net/ssh/connection/session.rb:451:in `dispatch_incoming_packets'
    from /Library/Ruby/Gems/1.8/gems/net-ssh-2.5.2/lib/net/ssh/connection/session.rb:213:in `preprocess'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/processable.rb:17:in `process_iteration'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/processable.rb:43:in `ensure_each_session'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/processable.rb:41:in `each'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/processable.rb:41:in `ensure_each_session'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/processable.rb:17:in `process_iteration'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/command.rb:165:in `process!'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/command.rb:164:in `loop'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/command.rb:164:in `process!'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/command.rb:163:in `process!'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/command.rb:134:in `process'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/actions/invocation.rb:178:in `run_tree'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/connections.rb:198:in `execute_on_servers'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/erb.rb:719:in `each_slice'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/connections.rb:186:in `each'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/connections.rb:186:in `each_slice'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/connections.rb:186:in `execute_on_servers'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/actions/invocation.rb:176:in `run_tree'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/actions/invocation.rb:148:in `run'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `send'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `method_missing'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `send'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `method_missing'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy/assets.rb:42:in `load'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `instance_eval'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `invoke_task_directly_without_callbacks'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:101:in `find_and_execute_task'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/callback.rb:38:in `call'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/callbacks.rb:123:in `trigger'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/callbacks.rb:123:in `each'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/callbacks.rb:123:in `trigger'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/callbacks.rb:27:in `invoke_task_directly'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `send'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `method_missing'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:110:in `update_code'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:203:in `load'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:56:in `transaction'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `send'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `method_missing'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:202:in `load'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `instance_eval'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `invoke_task_directly_without_callbacks'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `send'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `method_missing'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:110:in `update'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:170:in `load'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `instance_eval'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `invoke_task_directly_without_callbacks'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:101:in `find_and_execute_task'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/cli/execute.rb:46:in `execute_requested_actions_without_help'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/cli/execute.rb:45:in `each'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/cli/execute.rb:45:in `execute_requested_actions_without_help'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/cli/help.rb:19:in `execute_requested_actions'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/cli/execute.rb:34:in `execute!'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/lib/capistrano/cli/execute.rb:14:in `execute'
    from /Library/Ruby/Gems/1.8/gems/capistrano-2.12.0/bin/cap:4
    from /usr/bin/cap:19:in `load'
    from /usr/bin/cap:19 
```

我不知道它曾经正常工作的错误来源是什么！

这是我的帽子文件

```
load 'deploy'
# Uncomment if you are using Rails' asset pipeline
  # load 'deploy/assets'

Dir['vendor/gems/*/recipes/*.rb','vendor/plugins/*/recipes/*.rb'].each { |plugin| load(plugin) }
load 'config/deploy' # remove this line to skip loading any of the default tasks

load 'deploy/assets'
task :search_libs, :hosts => "mysitename.com" do
  run "ls -x1 /usr/lib | grep -i xml"
end 
```

这是我的部署文件

```
require "bundler/capistrano"

default_run_options[:pty] = true

set :user, 'myname'
set :domain, 'mysitename.com'
set :application, 'mysitename'

set :repository,  "#{user}@#{domain}:git/#{application}.git"
set :deploy_to, "/home/#{user}/#{domain}"
set :deploy_via, :remote_cache
set :scm, 'git'
set :branch, 'master'
set :git_shallow_clone, 1
set :scm_verbose, true
set :use_sudo, false

server domain, :app, :web
role :db, domain, :primary => true

namespace :deploy do
  task :restart do
    run "touch #{current_path}/tmp/restart.txt"
  end

  desc "reload the database with seed data"
  task :seed do
    run "cd #{current_path}; bundle exec rake db:seed RAILS_ENV=#{rails_env}"
  end
end 
```

值得一提的是，当我 ssh 到远程服务器并执行时

```
cd /home/ssddff/mysitename.com/releases/20120609034922 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile 
```

它可以正常工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:02:11.197

我通过将 VPS 内存增加到 512MB 解决了这个问题

# php - PHP 和 vBulletin 的 Apache2 mpm-itk 问题

> ID：10958233
> 
> 赞同：2
> 
> 时间：2012-06-09T03:57:07.277
> 
> 标签：php, ubuntu, apache2, vbulletin, linode

我已经花了很长时间没有运气，所以我在这里。

注意的服务器详细信息：

```
Linode 1024 (1GB RAM)
Apache2
Ubuntu 10.04
MySQL 5.1
PHP 5.3
vBulletin 4.2.0
mpm-itk
mod_php
mod_pagespeed 
```

PHP内存限制32M

从外部域（Rackspace 云文件）上的 CDN 加载的所有图像。

注意的apache2.conf指令：

```
Timeout 300
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 15
<IfModule mpm_prefork_module>
    StartServers           1
    MinSpareServers        3
    MaxSpareServers        6
    ServerLimit           24
    MaxClients            24
    MaxRequestsPerChild 3000
</IfModule> 
```

此处推荐这些设置：http: [//library.linode.com/troubleshooting/memory-networking](http://library.linode.com/troubleshooting/memory-networking)

问题：

我不知道为什么该服务器可能会出现问题。流量相当低。任何时候最多同时在线 4-5 个用户。

它运行了一段时间，进程看起来很稳定，然后进程分叉，但没有释放，服务器停止响应。我想知道这是否是内存不足的问题，但对于这种流量来说，1GB 应该足够了。运行按内存消耗排序的 top 显示没有什么太奇怪的和大量可用的内存。没有任何笔记的交换使用。

有时会有很多分叉的进程，但这是意料之中的。我希望上述设置可以限制它们失控。减少它们只会引入 501 错误，虽然比超时替代方案更好，但也好不到哪里去。

我读到减少 PHP 内存限制会有所帮助，但低至 32M 对我没有帮助。

谁能帮我解决这里可能发生的事情？

# wpf - 键绑定问题

> ID：10958235
> 
> 赞同：2
> 
> 时间：2012-06-09T03:57:40.330
> 
> 标签：wpf, mvvm

我有一个如下所示的用户控件，用于显示主详细信息。一个典型的 MVVM 架构，带有一个完整的 CloseCommand 基本视图模型。

我正在尝试确定将在 TabItem 上执行关闭命令的 KeyBinding 的范围，但无法使其正常工作。

有趣的是，如果我将绑定放在 PersonDetailView（TabControl 可能显示的两个可能的 USerControl 之一，如下所示）上，我*可以*让它工作，但它应该在 TabControl 或包含它的 Border 上。

有什么建议么？

干杯，
贝里尔

# 用户控制

```
<Grid>

    <ListBox Style="{StaticResource ListBoxStyle}" />

    <GridSplitter 
        HorizontalAlignment="Right" VerticalAlignment="Stretch" Grid.Column="1" 
        ResizeBehavior="PreviousAndNext" Width="5" Background="#FFBCBCBC" KeyboardNavigation.IsTabStop="False"
                  />

    <Border Grid.Column="2" Background="{StaticResource headerBrush}">

        // ** THIS is the scope I want, but it doesn't work
        <Border.InputBindings>
            <KeyBinding Key="F4" Modifiers="Control" Command="{Binding CloseCommand}"/>
        </Border.InputBindings>

        <TabControl Style="{StaticResource TabControlStyle}" >

            <TabControl.Resources>                   
                <DataTemplate DataType="{x:Type personVm:PersonDetailVm}">
                    <local:PersonDetailView />
                </DataTemplate>
                <DataTemplate DataType="{x:Type orgVm:OrganizationDetailVm}">
                    <local:OrganizationDetailView />
                </DataTemplate>
            </TabControl.Resources>

        </TabControl>
    </Border>

</Grid> 
```

# TabItem 样式

```
<Style x:Key="OrangeTabItemStyle" TargetType="{x:Type TabItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabItem}">
                <Border AllowDrop="true" ToolTip="{Binding DisplayName}">
                    <Border Name="Border" Background="Transparent" BorderBrush="Transparent" BorderThickness="1,1,1,0" CornerRadius="2,2,0,0">
                        <DockPanel x:Name="TitlePanel" TextElement.Foreground="{StaticResource FileTabTextBrush}">
                            <ctrl:GlyphButton 

                                // ** This works as expected
                                Command="{Binding CloseCommand}" CommandParameter="{Binding}"
                                >
                            </ctrl:GlyphButton>

                        </DockPanel>
                    </Border>

                    // ** Can't get it to work from here either **
                    <Border.InputBindings>
                        <KeyBinding Command="{Binding CloseCommand}" Key="F4" Modifiers="Control" />
                    </Border.InputBindings>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# 更新

我无法以我的风格设置 RoutedCommand

```
<Style x:Key="OrangeTabItemStyle" TargetType="{x:Type TabItem}">
    <Setter Property="beh:RoutedCommandWire.RoutedCommand" Value="F4"/> **** ?? ****
    <Setter Property="beh:RoutedCommandWire.ICommand" Value="{Binding CloseCommand}"/>
</Style> 
```

这是我*认为*答案代码在 C# 中的样子

```
public class RoutedCommandWire
{

    public static readonly DependencyProperty RoutedCommandProperty =
        DependencyProperty.RegisterAttached("RoutedCommand", typeof(RoutedCommand), typeof(RoutedCommandWire), new PropertyMetadata(OnCommandChanged));

    public static RoutedCommand GetRoutedCommand(DependencyObject d) { return (RoutedCommand) d.GetValue(RoutedCommandProperty); }
    public static void SetRoutedCommand(DependencyObject d, RoutedCommand value) { d.SetValue(RoutedCommandProperty, value); }

    public static readonly DependencyProperty ICommandProperty = 
        DependencyProperty.RegisterAttached("Iommand", typeof(ICommand), typeof(RoutedCommandWire));

    public static ICommand GetICommand(DependencyObject d) { return (ICommand) d.GetValue(ICommandProperty); }
    public static void SetICommand(DependencyObject d, ICommand value) { d.SetValue(ICommandProperty, value); }

    private static void OnCommandChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) {
        var fe = d as FrameworkElement;
        if(fe==null) return;

        if (e.OldValue != null) {
            Detach(fe, (RoutedCommand) e.OldValue);
        }
        if (e.NewValue != null) {
            Attach(fe, (RoutedCommand) e.NewValue, Execute, CanExecute);
        }
    }

    private static void CanExecute(object sender, CanExecuteRoutedEventArgs e) {
        var depObj = sender as DependencyObject;
        if (depObj == null) return;

        var command = GetICommand(depObj);
        if (command == null) return;

        e.CanExecute = command.CanExecute(e.Parameter);
        e.Handled = true;
    }

    private static void Execute(object sender, ExecutedRoutedEventArgs e)
    {
        var depObj = sender as DependencyObject;
        if (depObj == null) return;

        var command = GetICommand(depObj);
        if (command == null) return;

        command.Execute(e.Parameter);
        e.Handled = true;
    }

    public static void Detach(FrameworkElement fe, RoutedCommand command) {
        var bindingCollection = fe.CommandBindings;
        if (bindingCollection.Count == 0) return;

        var matches = bindingCollection.Cast<CommandBinding>().Where(binding => binding.Equals(command));
        foreach (var binding in matches) {
            bindingCollection.Remove(binding);
        }
    }

    public static void Attach(FrameworkElement fe, RoutedCommand command, 
        ExecutedRoutedEventHandler executedHandler, CanExecuteRoutedEventHandler canExecuteHandler, bool preview = false)
    {
        if (command == null || executedHandler == null) return;

        var binding = new CommandBinding(command);
        if (preview)
        {
            binding.PreviewExecuted += executedHandler;
            if (canExecuteHandler != null)
            {
                binding.PreviewCanExecute += canExecuteHandler;
            }
        }
        else
        {
            binding.Executed += executedHandler;
            if (canExecuteHandler != null)
            {
                binding.CanExecute += canExecuteHandler;
            }
        }
        fe.CommandBindings.Add(binding);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T08:30:12.237

KeyBindings 仅适用于接受键盘输入的控件。边框没有。一般来说，InputBindings 与 CommandBindings 的不同之处在于您可以在父元素上定义 CommandBinding，以便在子元素具有焦点时处理命令，但您不能在父元素上定义 InputBindings 以使它们对子元素有效.

您可以做的是将默认 InputGesture 添加到命令的 InputGestures 集合中。这似乎使命令可以在每个接受键盘输入的控件中使用该键盘快捷键可用（这比必须在任何地方指定 InputBindings 好得多，不是吗？）。为了利用这一点，您必须使用 RoutedCommand 来调用您的 MVVM-ICommand。您可以使用附加属性将两者结合起来，这种模式我称之为“粘性命令”，它与附加行为非常相似。

此代码定义了附加属性：

```
 Public Class Close

    Public Shared ReadOnly CommandProperty As DependencyProperty = DependencyProperty.RegisterAttached("Command", GetType(RoutedCommand), GetType(Close), New PropertyMetadata(AddressOf OnCommandChanged))
    Public Shared Function GetCommand(ByVal d As DependencyObject) As RoutedCommand
        Return d.GetValue(CommandProperty)
    End Function
    Public Shared Sub SetCommand(ByVal d As DependencyObject, ByVal value As RoutedCommand)
        d.SetValue(CommandProperty, value)
    End Sub

    Public Shared ReadOnly MVVMCommandProperty As DependencyProperty = DependencyProperty.RegisterAttached("MVVMCommand", GetType(ICommand), GetType(Close))
    Public Shared Function GetMVVMCommand(ByVal d As DependencyObject) As ICommand
        Return d.GetValue(MVVMCommandProperty)
    End Function
    Public Shared Sub SetMVVMCommand(ByVal d As DependencyObject, ByVal value As ICommand)
        d.SetValue(MVVMCommandProperty, value)
    End Sub

    Private Shared Sub OnCommandChanged(ByVal d As DependencyObject, ByVal e As DependencyPropertyChangedEventArgs)
        If e.OldValue IsNot Nothing Then
            Detach(d, DirectCast(e.OldValue, RoutedCommand))
        End If
        If e.NewValue IsNot Nothing Then
             Attach(d, DirectCast(e.NewValue, RoutedCommand), AddressOf DoCloseCommand, AddressOf CanDoCloseCommand)
        End If
    End Sub

    Private Shared Sub CanDoCloseCommand(ByVal sender As Object, ByVal e As CanExecuteRoutedEventArgs)
        If sender IsNot Nothing Then
            Dim com As ICommand = GetMVVMCommand(sender)
            If com IsNot Nothing Then
                e.CanExecute = com.CanExecute(e.Parameter)
                e.Handled = True
            End If
        End If
    End Sub

    Private Shared Sub DoCloseCommand(ByVal sender As Object, ByVal e As ExecutedRoutedEventArgs)
        If sender IsNot Nothing Then
            Dim com As ICommand = GetMVVMCommand(sender)
            If com IsNot Nothing Then
                com.Execute(e.Parameter)
                e.Handled = True
            End If
        End If
    End Sub

    Public Shared Sub Detach(ByVal base As FrameworkElement, ByVal command As RoutedCommand)
        Dim commandBindings As CommandBindingCollection = base.CommandBindings
        If commandBindings IsNot Nothing Then
            Dim bindings = From c As CommandBinding In commandBindings
                           Where c.Command Is command
                           Select c
            Dim bindingList As New List(Of CommandBinding)(bindings)
            For Each c As CommandBinding In bindingList
                commandBindings.Remove(c)
            Next
        End If
    End Sub

    Public Shared Sub Attach(ByVal base As FrameworkElement, ByVal command As RoutedCommand, ByVal executedHandler As ExecutedRoutedEventHandler, ByVal canExecuteHandler As CanExecuteRoutedEventHandler, Optional ByVal preview As Boolean = False)
        If command IsNot Nothing And executedHandler IsNot Nothing Then
            Dim b As CommandBinding = New CommandBinding(command)
            If preview Then
                AddHandler b.PreviewExecuted, executedHandler
                If canExecuteHandler IsNot Nothing Then
                    AddHandler b.PreviewCanExecute, canExecuteHandler
                End If
            Else
                AddHandler b.Executed, executedHandler
                If canExecuteHandler IsNot Nothing Then
                    AddHandler b.CanExecute, canExecuteHandler
                End If
            End If
            base.CommandBindings.Add(b)
            'For Each i As InputGesture In command.InputGestures
            '    GetInputBindings(base).Add(New InputBinding(command, i))
            'Next
        End If
    End Sub 
```

我猜你会在你的 TabItems 上使用它们，因为这是你想要处理关闭命令的地方，你可以将 Close.Command 设置为一个 RoutedCommand，它在 InputGestures 中有键盘快捷键，并且 Close.MVVMCommand= “{绑定关闭命令}”。

更新

您可以在 ViewModel 中定义这样的 RoutedCommand：

```
Public Shared ReadOnly TestCommand As New RoutedUICommand("Test", "TestCommand", GetType(ViewModel))
Shared Sub New()
    TestCommand.InputGestures.Add(New KeyGesture(Key.T, ModifierKeys.Control))
End Sub 
```

静态构造函数设置命令的默认键位。如果您想在 XAML 中执行此操作，您也可以使用自定义附加属性来执行此操作。无论如何，您会在 XAML 中像这样引用 RoutedCommand：

```
Close.Command="{x:Static my:ViewModel.TestCommand}" 
```

# c# - 无法构建适用于 Android 的 Mono - 找不到 Novell.MonoDroid.CSharp.targets

> ID：10958237
> 
> 赞同：4
> 
> 时间：2012-06-09T03:58:01.880
> 
> 标签：c#, android, windows-7, monodevelop, xamarin.android

我按照所有说明进行操作，安装成功。在 MonoDevelop 中，我去: `New Solution -> C# -> Mono for Android -> Mono for Android Application`，就像它说的那样。当我去构建它时，MonoDevelop 抛出一个错误，说：

`C:\Users\[NAME]\Documents\Android\HelloAndroid1\HelloAndroid1\HelloAndroid1.csproj: Error: C:\Program Files (x86)\Mono-2.10.8\lib\mono\xbuild\Novell\Novell.MonoDroid.CSharp.targets: Project file could not be imported, it was being imported by C:\Users\[NAME]\Documents\Android\HelloAndroid1\HelloAndroid1\HelloAndroid1.csproj: Imported project: "C:\Program Files (x86)\Mono-2.10.8\lib\mono\xbuild\Novell\Novell.MonoDroid.CSharp.targets" does not exist. (HelloAndroid1)`

另外，在References下，“Mono.Android”有错误，说， `Assembly not available for Android 2.2 (Froyo) (in Mono 2.10.8 (C:\Program Files (x86)\Mono-2.10.8))`.

我该如何解决？卸载和重新安装没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T04:09:02.657

确保您的 Active Runtime 设置为 Microsoft.Net。它的工具栏上应该有一个组合框，或者“项目”菜单中应该有一个选项。

# ruby-on-rails - 如何从她在 ruby on rails 中上传的图片列表中为用户设置个人资料图片

> ID：10958238
> 
> 赞同：0
> 
> 时间：2012-06-09T03:58:04.810
> 
> 标签：ruby-on-rails, paperclip

我有一个模型**User.rb**，它允许我在用户注册时设置个人资料图片，还有另一个模型**Upload.rb**，这个上传模型用于用户从他或她的本地机器（即*计算机*）上传的图片。我的问题是，如何从我的数据库中上传的一张图片更改用户的个人资料图片？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:56:32.577

我对回形针不太熟悉。Carrierwave`remote_file_url`内置了一个帮助程序，这在您的情况下可能很有用。

您可以在您的用户模型中构建自己的：

```
def picture_from_url(url)
  self.picture = open(url)
end 
```

然后，您需要构建一个带有`:picture_from_url`字段的用户表单，并找到某种从上传模型中选择图像并传递`Upload.file_url`给该`picture_from_url`字段的方法。

不确定你具体问的是什么。这有帮助吗？

# php - PHP IF 正文和 ELSE 正文都在执行

> ID：10958243
> 
> 赞同：1
> 
> 时间：2012-06-09T03:59:23.070
> 
> 标签：php, if-statement

这是一个非常奇怪的问题。我到处寻找解决方案。这是我的代码。它是我正在创建的网站上的帐户设置页面的一部分。该代码与用户更改他的名字有关：

```
// if there are post vars, user has changed something
if($_POST) {
if(isset($_POST['firstname'])) {
    $firstname = trim($_POST['firstname']);

    if(strlen($firstname) < 2 || strlen($firstname) > 15) {
        $msg = "<span class='errmsg'>Could not complete your request. First name must be between 2 and 15 characters.</span>";
    }
    else {
        // connect to db
        require_once('modules/config.php');

        // update table
        $query = sprintf("UPDATE Users SET FirstName = '%s' WHERE Email = '%s'",
            mysql_real_escape_string($firstname),
            mysql_real_escape_string($_SESSION['email']));
        mysql_query($query);

        // set success message
        $msg = "<span class='sucmsg'>First name successfully changed.</span>";

        // reset the firstname session var
        $_SESSION['firstname'] = $firstname;
    }
}
    } 
```

编辑：添加了 Dagon 提到的右括号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:16:21.837

不知道能不能解决你的问题，试试看。。。

```
 if(in_array(strlen($firstname), range(2, 15))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:05:09.987

我想你`}`最后不见了。

`else {`

实际上正在关闭：

`if(isset($_POST['firstname'])) {`

代替

`if(strlen($firstname) < 2 || strlen($firstname) > 15) {`

# mysql - 构建 SQL 查询以连接三个表以获取消息传递信息

> ID：10958245
> 
> 赞同：0
> 
> 时间：2012-06-09T04:00:27.803
> 
> 标签：mysql, sql

我有以下三个用于消息传递系统的表：

```
`messaging_messagethread`
- id
- subject
- initiator_id # who creates the thread
- recipient_id

`messaging_message`
- id
- thread_id
- content
- timestamp
- sender_id

`messaging_messagestatus` # a status will be created for each recipient of a message
- id
- message_id
- recipient_id
- status 
```

给定一个用户，我需要构建一个查询来获得以下信息：

*   显示线程 ID（不同），
*   `content`以及`timestamp`该线程中的最新消息
*   删除带有最新消息的所有线程`status='deleted'`。

这是我到目前为止所拥有的：

```
SELECT DISTINCT thread.id as thread_id, timestamp.timestamp 
    FROM messaging_messagethread thread 
INNER JOIN 
    (SELECT thread_id, MAX(timestamp) as timestamp
      FROM messaging_message GROUP BY thread_id) timestamp
      ON thread.id = timestamp.thread_id
WHERE initiator_id = 4 OR thread.recipient_id = 4 ORDER BY timestamp.timestamp DESC 
```

这给了我按最近时间戳排序的不同线程 ID。（我的三点中的第一点）。我将如何构建整个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T00:08:20.667

您可以使用相关子查询来获取特定线程的最新消息。尝试这个：

```
SELECT 
    a.id, 
    b.content, 
    b.timestamp
FROM
    messaging_messagethread a
INNER JOIN
    messaging_message b ON a.id = b.thread_id 
WHERE 
    b.timestamp = 
    (
        SELECT MAX(timestamp) 
        FROM messaging_message 
        WHERE thread_id = a.id
    )
    AND b.id NOT IN
    (
        SELECT message_id
        FROM messaging_messagestatus
        WHERE status = 'deleted'
    )
    AND 4 IN (a.initiator_id, a.recipient_id)
ORDER BY
    b.timestamp DESC 
```

如果我理解正确，我相信这就是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:08:36.317

问题是您想要来自每个线程的最新消息，不幸的是，无法通过组 AFAIK 检索顶级成员所以我所做的基本上是从用户相关的每个 thread_id 获取所有消息，然后简单地返回顶部id ...哦，并检查该消息没有被删除。我不确定这是否正确。

但请重新考虑一种不同的方法，可能使用一种编程语言或多个查询。因为这会很慢......

```
SELECT thread_id, content, timestamp
FROM messaging_message
WHERE messaging_message.id IN
(
    SELECT messaging_message.id
    FROM messaging_message
        INNER JOIN messaging_messagestatus ON
            (messaging_messagestatus.message_id = messaging_message.id)
    WHERE messaging_message.thread_id IN
            (SELECT DISTINCT id 
             FROM messaging_messagethread
             WHERE initiator_id = 4 OR recipient_id = 4) AND
         messaging_messagestatus.status != 'deleted'
     ORDER BY timestamp DESC
     LIMIT 1
)
ORDER BY timestamp DESC 
```

祝你好运。

# ruby-on-rails - 不允许用户在一定的时间限制后删除他们的资源？

> ID：10958247
> 
> 赞同：0
> 
> 时间：2012-06-09T04:00:38.583
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如果一个用户有很多文章并且这些文章属于一个用户。然后使用常规脚手架，您希望设置一个时间限制，直到它不能再被删除：

```
def destroy
  @article = Article.find(params[:id])
  @article.destroy

  respond_to do |format|
    format.html { redirect_to articles_url }
    format.json { head :ok }
    format.js
  end
end 
```

您将如何永久禁用用户文章的删除功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T05:06:45.097

首先，您应该在模型中隐藏此逻辑，并且应该将其作为公共方法提供：

```
class Article < ActiveRecord::Base
  def destroyable?
    created_at < some_time.ago
  end
  #...
end 
```

然后在您的视图中，您可以执行以下操作：

```
<% if @model.destroyable? %>
  <!-- delete button/link/... goes here -->
<% end %> 
```

您还需要`before_destroy`模型中的回调来停止无效破坏[：`false`](http://guides.rubyonrails.org/active_record_validations_callbacks.html#halting-execution)

```
class Article < ActiveRecord::Base
  # Your "can destroy" method conveniently returns false at the
  # right time so we can use it here too.
  before_destroy :destroyable?
  #...
end 
```

您还可以根据处理错误的方式向控制器添加显式`@model.destroyable?`检查。`destroy`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T04:12:15.767

如果您想阻止超过一小时的文章删除文章：

```
@article.destroy unless @article.created_at < 1.hour.ago 
```

允许特定用户角色（例如，“管理员”）删除任何年龄的文章是留给读者的练习。;)

# python - 在 (*args, **kwargs) python 中处理参数初始值的简单方法是什么？

> ID：10958248
> 
> 赞同：1
> 
> 时间：2012-06-09T04:00:53.700
> 
> 标签：python

基类看起来像这样（代码来自 Django，但问题不是 Django 特定的）：

```
class BaseModelForm(BaseForm):
    def __init__(self, data=None, files=None, auto_id='id_%s', prefix=None,
                 initial=None, error_class=ErrorList, label_suffix=':',
                 empty_permitted=False, instance=None):

class ModelForm(BaseModelForm):
    __metaclass__ = ModelFormMetaclass 
```

派生类如下所示：

```
class MyForm(forms.ModelForm):
    def __init__(self, data=None, files=None, *args, **kwargs):
        super(EdocForm, self).__init__(data, files, *args, **kwargs)
        self.Meta.model.get_others(data, files, kwargs.get('instance', None)) 
```

如果编码人员将实例作为 kwargs 传递，这一切都很好，应该可以工作，但是如果他们不这样做，而是将其传递给 args 怎么办？处理 *args 和 **kwargs 时提取**实例的明智方法是什么？**诚然，在这种情况下，实例在 args 中的机会很小，但如果它是第三个参数而不是第五个（不包括自我）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T04:56:55.493

Well in django if instance is not passed or its not properly set then it becomes None and **init** will then create a new instance for you [http://docs.nullpobug.com/django/trunk/django.forms.models-pysrc.html#BaseModelForm](http://docs.nullpobug.com/django/trunk/django.forms.models-pysrc.html#BaseModelForm) But this isn't your question. If the other variables aren't properly set an exception will probably be raised.

Its really up to you if you want to check if the user has properly used your API, and in python this can be quite daunting, and checking for instance types isn't very pythonic, there are very heated debate though out the web about whether its a good or bad thing to have a language thats so dynamically typed. On one hand you can be very productive in a dynamically typed language on the other you can have really nasty bugs whose solution aren't that apparent, but thats from my own experience.

I believe consistency is one of the most crucial things a system could have, as such I tend to always use keyword values, all set to None and then simply do an assert to make sure all that are required aren't None, you could have a function that just checks your parameters are good. Keyword arguments tend to be the most flexible, from my own experience, since you don't need to keep track of the order, you pay the price by having the callee remember its name.

If you really need 'instance' then you can iterate over args and/or kwargs using isinstance to get the instance variable, though like I said this isn't very pythonic....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:02:06.320

如果您坚持接受*，*`*args`则处理这种情况的一种方法*是*显式包含作为关键字参数，将实例添加到 kwargs，然后传递 kwargs。*`instance``MyForm`*`instance``MyForm`

```
class MyForm(forms.ModelForm):
    def __init__(self, data=None, files=None, instance=None, *args, **kwargs):
        kwargs['instance'] = instance
        super(EdocForm, self).__init__(data, files, *args, **kwargs) 
```

请注意，如果有人将 instance 作为第三个位置参数，他们将犯一个非常明确的错误，因为 instance 是 BaseModelForm 的最后一个参数。

但是，处理这种情况的更好方法是明确不允许额外的位置参数。例如：

```
class MyForm(forms.ModelForm):
    def __init__(self, data=None, files=None, **kwargs):
        super(EdocForm, self).__init__(data, files, *args, **kwargs)
        self.Meta.model.get_others(data, files, kwargs.get('instance', None)) 
```

这样，`MyForm`最多只能使用 2 个位置参数调用。再多一点，Python 解释器就会生成一个`TypeError: <func> takes exactly 2 arguments (# given)`.

如果需要使用该`instance`参数，则应将其显式包含在`MyForm`. 如果做不到这一点，您至少应该在函数的文档字符串中记下它。

如果你是 BaseModelForm 的子类并且它有一个`self.instance`变量，你可以通过 super 直接访问它。例如`self.instance = super(EdocForm, self).instance`。这样，您就可以让超类处理它需要对实例执行的任何操作，并为自己的后处理获取实例。（注意 super 的语法……你需要 class 和 self）

# java - Clojure - 消耗的惰性序列元素是否保留在内存中？

> ID：10958254
> 
> 赞同：2
> 
> 时间：2012-06-09T04:03:23.700
> 
> 标签：java, clojure

我的应用程序逐行处理一个可能很大的文本文件，我的代码当前是：

```
(with-open [r (clojure.java.io/reader "large_text_file")]
  (doall
    (map #(process %) (line-seq r))) 
```

在我的代码中，已经处理的行会留在内存中吗？如果是这样，我该如何避免它？

通常，消耗的惰性序列元素是否保留在内存中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T04:04:43.027

这取决于：正常的 GC 规则适用，正如[StackOverflow 其他地方详细](https://stackoverflow.com/questions/2214258/holding-onto-the-head-of-a-sequence)讨论的那样。

因此，请确保您仅在元素流经时引用它们，而不是保持序列的头部，您应该很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T09:08:37.187

使用[doall](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/doall)将保留 seq 的头部并返回它。整个*序列*将驻留在内存中。

我假设您遍历 seq 以*产生*副作用。这就是doseq的目的：

```
(with-open [r (clojure.java.io/reader "your_large_file.txt")]
  (doseq [l (line-seq r)]
    (println l))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T08:19:13.593

如果你需要强制对惰性序列求值但你不需要持有它，你可以使用 dorun。它与 doall 相同，但返回 nil 并且不将整个序列保存在内存中。

胡安·曼努埃尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T04:37:07.330

函数的返回值是`process`什么？你最终会以这种方式构建大量的东西吗？我认为您可以处理它`doseq`而不会产生任何价值，这与 map 不同。

# mysql - 在mysql php中以特定格式显示消息

> ID：10958255
> 
> 赞同：1
> 
> 时间：2012-06-09T04:03:26.223
> 
> 标签：mysql, sql, database

我为用户创建了一个消息系统，允许用户向另一个人发送消息。

为此，我创建了两个表。

```
 conversation(conversation_id,user_id1,user_id2)
  messages(message_id,conversation_id,sender_id,receiver_id,message,created_time) 
```

如果用户是第一次交谈，将使用 user_id1（发起聊天的人）和 user_id2（向 user_id1 正在发送消息的人）创建一个 conversation_id

消息表将包含与消息相关的所有信息。

现在我想要的是，创建一个消息摘要页面，其中登录用户可以查看他在其他用户之间的所有对话列表，按created_time排序，按conversation_id分组。

**以下是表格数据：**

```
conversation_id | user_id1 | user_id2
     1                100       103
     2                101       103
     3                103       102        

message_id| conversation_id| sender_id| receiver_id| message | created_time
   1             1            100       103           MSG A    2012-06-08 08:38:57
   2             1            103       100           MSG B    2012-06-08 08:39:40
   3             2            101       103           MSG C    2012-06-08 08:40:20
   4             3            102       103           MSG D    2012-06-08 08:41:10 
```

这是我正在寻找的输出：假设登录用户的 ID 为：103

```
conversation_id| conversation_with | last_message | created_time
      3              102              MSG D         2012-06-08 08:41:10
      2              101              MSG C         2012-06-08 08:40:20
      1              100              MSG B         2012-06-08 08:39:40 
```

因此，此输出按 created_time 排序，按 conversation_id 分组并在 conversation_with 中显示用户的 id，用户 ID 103 正在与谁进行对话。

有人可以提供 MySQL 查询吗？我需要得到这个输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:40:01.400

这是一个有趣的。因此，您需要解决三个主要问题。

1.  `conversation_with`根据所需用户在两列中的显示位置交替列。
2.  `greatest-n-per-group`找到最新的`message`。
3.  `least-n-per-group`找到最早的消息`created_time`。

第一个问题是我通过查询两次、交替`user_id`列、合并结果，然后将合并结果按`created_time`. 我想我可以用一个查询而不用联合来解决这个问题，但它现在有效。

2和3涉及更多一点。这是查询的 SQL 小提琴：[http ://sqlfiddle.com/#!2/bf2b7/1](http://sqlfiddle.com/#!2/bf2b7/1)

**TL;DNR**

```
select * from (
    select c.conversation_id, c.user_id2 as conversation_with, m1.message as last_message, m3.created_time 
    from conversation as c
      join messages as m1 on c.conversation_id = m1.conversation_id
      left outer join messages as m2 on (c.conversation_id = m2.conversation_id 
                                         and (m1.created_time < m2.created_time OR m1.created_time = m2.created_time AND m1.message_id < m2.message_id))
      join messages as m3 on c.conversation_id = m3.conversation_id
      left outer join messages as m4 on (c.conversation_id = m4.conversation_id
                                         and (m3.created_time > m4.created_time OR m3.created_time = m4.created_time AND m3.message_id > m4.message_id))
    where user_id1 = 103 and m2.message_id is null and m4.message_id is null
  union all
    select c.conversation_id, c.user_id1 as conversation_with, m1.message as last_message, m3.created_time 
    from conversation as c
      join messages as m1 on c.conversation_id = m1.conversation_id
      left outer join messages as m2 on (c.conversation_id = m2.conversation_id 
                                         and (m1.created_time < m2.created_time OR m1.created_time = m2.created_time AND m1.message_id < m2.message_id))
      join messages as m3 on c.conversation_id = m3.conversation_id
      left outer join messages as m4 on (c.conversation_id = m4.conversation_id
                                         and (m3.created_time > m4.created_time OR m3.created_time = m4.created_time AND m3.message_id > m4.message_id))
    where user_id2 = 103 and m2.message_id is null and m4.message_id is null
                                        ) as conversations
order by created_time desc 
```

# php - PHP 使用 cURL 下载一个巨大的电影文件 (500 MB)

> ID：10958264
> 
> 赞同：4
> 
> 时间：2012-06-09T04:05:55.790
> 
> 标签：php, curl, download, large-files

好的，我有一个问题希望你能帮我解决。

我正在运行一个存储非常大的视频文件的服务器，有些高达 650 MB。我需要用户能够请求此页面并将文件下载到他们的机器上。我已经尝试了一切，但是一个普通的 readfile() 请求在退出前挂起大约 90 秒，并给了我一个“没有收到数据错误 324 代码”，我从几个网站找到的一个分块的 readfile 脚本甚至没有开始下载，当我试图获取文件时，通过 PHP 的 FTP 解决方案只会给我错误，而我发现的唯一 cURL 解决方案只是在我的服务器上创建另一个文件。那不是我需要的。

需要明确**的是，我需要*用户*能够将文件*下载*到*他们的计算机***而**不是服务器。**

我不知道这段代码是垃圾还是只需要一两次调整，但感谢您的帮助！

```
<?php

$fn = $_GET["fn"];

echo $fn."<br/>";

$url  = $fn;
$path = "dl".$fn;

$fp = fopen($path, 'w');

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_FILE, $fp);

$data = curl_exec($ch);

curl_close($ch);
fclose($fp);

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T04:19:11.890

我不建议使用 PHP 或任何其他脚本技术来提供大型二进制文件。他们从来没有为此设计过——你可以在后端使用 apache、nginx 或任何标准的 http 服务器。如果您仍然需要使用 PHP，那么您可能应该查看 readfile_chunked。

[http://php.net/readfile#48683](http://php.net/readfile#48683) 这是一个很棒的教程。 [http://teddy.fr/blog/how-serve-big-files-through-php](http://teddy.fr/blog/how-serve-big-files-through-php)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:25:22.340

readfile() 没有缓冲。但是，php 本身可能会缓冲。关闭缓冲

```
while (ob_get_level())
    ob_end_clean();
readfile($file); 
```

您的网络服务器可能会缓冲。也把它关掉。你如何做取决于网络服务器，以及它为什么缓冲。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T04:42:20.563

我看到两个可能发生的问题：

*   首先：您的网络服务器可能会因超时而关闭连接。您应该查看 Web 服务器配置。
*   第二：卷曲超时。我推荐看看[这个](https://stackoverflow.com/questions/2582057/setting-curls-timeout-in-php)帖子。

# esb - 如何在不发送的情况下制作 inSequence

> ID：10958265
> 
> 赞同：1
> 
> 时间：2012-06-09T04:06:13.687
> 
> 标签：esb, wso2, mediator, wso2esb

我有这个 WSO2 ESB 代理：

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse" name="sid008" transports="http" startOnLoad="true" trace="disable">
    <target>
        <inSequence>

            <switch source="get-property('inquiryId')">
                        <log level="full"/>
                <case regex="">

                        <send/>

                </case>
                 <default>

                 </default>
             </switch>

        </inSequence>

        <outSequence>                      
<....some processing..>
            <send/>

        </outSequence>
    </target>
    <publishWSDL key="CommonService.wsdl">
        <resource location="request.xsd" key="request.xsd"/>
        <resource location="response.xsd" key="response.xsd"/>
        <resource location="SMEV.xsd" key="SMEV.xsd"/>
        <resource location="statusAndError.xsd" key="statusAndError.xsd"/>
    </publishWSDL>
</proxy> 
```

`outSequence`在默认情况下，此代理在没有发送调解器的情况下不会运行。不发送调解员怎么办

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:17:03.463

试试这个配置：

```
<default>
    <... some processing ...>
    <header action="remove" name="To"/>
    <property action="set" name="RESPONSE" scope="default" type="STRING" value="true"/>
    <send/>
</default> 
```

使用此配置，您将直接从 inSequence 部分向客户端发送响应（您不会进入 outSequence）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:28:30.467

In和Out序列背后的理性是：

In seq ：当消息从客户端到达代理服务时，它总是按顺序发送。

Out Seq：当代理服务从 ESB 向后端服务发送消息时，响应将始终到达 Out seq（除非使用接收 seq 指定序列。）

希望这可以帮助。

# php - 如何使用 Amazon s3 作为 Codeigniter 库？

> ID：10958266
> 
> 赞同：3
> 
> 时间：2012-06-09T04:06:18.950
> 
> 标签：php, codeigniter, amazon-s3, amazon-web-services

我创建了一个名为的文件`awslib.php`并将其放在`application/libraries`文件夹中。这些是 awslib.php 的内容：

```
<?php

class Awslib {

    function Awslib()
    {
        require_once('sdk-1.5.6.2/sdk.class.php');
    }
} 
```

在库文件夹中还有 PHP sdk 作为名为`sdk-1.5.6.2`.

在我的家庭控制器上，我正在加载库并实例化 s3 类：

```
$this->load->library('awslib');
$s3 = new AmazonS3(); 
```

当我加载我的主页时，我收到此错误：

```
Fatal error: Class 'AmazonS3' not found in /var/www/application/controllers/home.php on line 23 
```

为什么它不起作用？

注意：问题不在于 s3，当我将它存储在 codeigniter 外部并加载 sdk 附带的演示文件时，我可以让它正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T06:59:50.087

I'm assuming you're using the [SDK for PHP](http://aws.amazon.com/sdkforphp/) directly. Most SDKs don't play nicely in CI unless wrapped up.

I highly recommend using the amazon-s3 [library](https://github.com/psugand/CodeIgniter-S3) (or rather, the [spark](http://getsparks.org/packages/amazon-s3/versions/HEAD/show)).

# jquery - 使用 jQuery/JS 在 html 中查找特殊字符

> ID：10958267
> 
> 赞同：0
> 
> 时间：2012-06-09T04:06:23.177
> 
> 标签：jquery, special-characters

是否可以在 jQuery/JS 中使用特殊字符，或者它们的解码 html 替代？

特别是，为什么这不起作用：

```
$("*:contains('™')", document.body) 
```

也不是这个，

```
$("*:contains('&trade;')", document.body) 
```

我需要在这些 TM 标记上挂上一个，但什么也没做。在文档本身中，存在™，而不是™（不是我的构建。只是为这个客户做维护和错误）。

# android - Android：将位图或可绘制图像放入 XML 显示屏幕

> ID：10958271
> 
> 赞同：0
> 
> 时间：2012-06-09T04:06:39.490
> 
> 标签：android, image

经过几天的寻找，我来到了源头。我有在 Eclipse 图形布局中绘制和创建的主屏幕。它由屏幕顶部的按钮组成。按钮下方是 image.png 区域。在应用程序启动时，它会正确显示。顶部的按钮和按钮下方的图形图像。在按下每个按钮时，我希望更改图像。我可以提供可绘制或位图图像（想通了）。我需要帮助。我不明白的是如何使用 XML 生成屏幕按钮来显示外部图像。

我目前有很多测试试验，但没有一个能给我我想要的东西。我想将可绘制图像或位图图像放入`R.id.imgVwMain`并使其与按钮一起显示。我知道我在提供的内容中有额外的代码。 `R.id.imgVwMain`作为默认值，在启动时（即启动屏幕）中有一个图像，但我想在按钮按下时动态替换它。

代码片段：

```
ImageView img=new ImageView(this);  
View image;
Drawable drawable= getImg(0);   // GETS NEW IMAGE as drawable
img.setImageDrawable(drawable); 

//setContentView(img); // when uncommented displays just the image no buttons, not what needed
//R.id.imgVwMain    // the target ID to place the new image into

image = findViewById(R.id.imgVwMain);

ImageView imageView=(ImageView)findViewById(R.id.imgVwMain);  

imageView.setImageBitmap(drawableToBitmap(drawable));

image.setImageResource(imageView);

setContentView(R.layout.main);  //of course this just displays default of the XML 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:24:13.020

您可能可以使用[addView](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View%29)动态添加 imageView，同样调用 removeView 以摆脱 imageView。在某些时候，您还需要设置[布局参数](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)。希望这会让你开始：

```
myParentViewOrLayout.removeView(oldImage);

ImageView newImage = (ImageView) findViewById(R.id.imgToAdd);
//Set your layoutParams
myParentViewOrLayout.addView(newImage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:29:00.270

将 onClickListeners 设置到您的按钮上，如下所示：

```
Button mButton = (Button) findViewById(R.id.my_button);
mButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        ImageView ivImage = (ImageView) findViewById(R.id.imgVwMain);
        ivImage.setImageDrawable(getImg(0));
    }
}); 
```

现在，每当单击按钮时，它都会将您的 imageview 的图像设置为您想要的任何内容。

# iphone - iOS：生成的 CoreData 代码中的 EXC_ARM_DA_ALIGN

> ID：10958273
> 
> 赞同：4
> 
> 时间：2012-06-09T04:06:45.070
> 
> 标签：iphone, ios, xcode, core-data, automatic-ref-counting

我觉得我开始在这个问题上失去理智了。

我已经开始使用 SDK 提供的生成的 CoreData 代码来开发 CoreData iOS 应用程序。每当我尝试实例化实体的新实例以便保存它时，就会出现我的问题。

根据 Apple CoreData 教程，这是我在 AppDelegate 中的实例化代码（我将一堆代码移到那里只是为了尝试调试此问题）：

```
NSManagedObjectContext* context = [self managedObjectContext];
if (!context)
{
    NSLog(@"Error"); // I'm not too concerned about my error handling just yet
} 
```

在那之后，这是产生我遇到的错误的行：

```
Vehicle* vehicle = (Vehicle*)[NSEntityDescription insertNewObjectForEntityForName:@"Vehicle" inManagedObjectContext:context]; 
```

有问题的错误是：

```
Thread 1: EXC_BAD_ACCESS (code=EXC_ARM_DA_ALIGN address=0xdeadbeef) 
```

总而言之，除了内存对齐问题（ARMv7 常见？）之外，我真的不知道这意味着什么，而且我在 Google 上找到的资源对我没有丝毫帮助。

唯一其他相关的代码是 Xcode 在生成项目时提供的“managedObjectContext”方法，因为它首先生成了 managedObjectContext：

```
- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil) {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        __managedObjectContext = [[NSManagedObjectContext alloc] init];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }

    return __managedObjectContext;
} 
```

就像我说的，我在这里超出了我的深度。任何人都可以就我如何解决这个问题提供一些明确的说明吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-17T22:58:06.393

很可能`__managedObjectContext`未初始化（因此具有 的值`0xdeadbeef`），这在尝试从中读取值时会导致`EXC_ARM_DA_ALIGN`副作用。

@Kenny Winker `EXC_ARM_DA_ALIGN`通常来自不是实际类型的访问指针值。例如

```
char buf[8];
double d = *((double *)buf); // this may cause EXC_ARM_DA_ALIGN 
```

但也可能导致指针中的无效有效，在这种情况下，`0xdeadbeef`. 例如

```
double *ptr; // not initialized
double d = *ptr; // this is undefined behaviour, which may cause EXC_ARM_DA_ALIGN or other error 
```

通常很难调试这类错误，这里有一些提示：

1.  检查所有指针转换（即`(double *)(void *)ptr`）并尽可能避免它们。
2.  确保一切都已初始化。
3.  当它崩溃时，找出导致它崩溃的变量并尝试回溯以找出值的来源。使用调试器查看内存位置有助于找出变量的所有更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T21:44:24.857

我认为显示正在运行的核心数据堆栈可能会有所帮助。我还将展示对象图的一部分..

```
pragma mark -
#pragma mark Core Data stack

/**
 Returns the managed object context for the application.
 If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
 */

- (NSManagedObjectContext *)managedObjectContext {
    //  NSLog(@"%s", __FUNCTION__);

    if (managedObjectContext_ != nil) {

        return managedObjectContext_;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];

    if (coordinator != nil) {

        managedObjectContext_ = [[NSManagedObjectContext alloc] init];

        [managedObjectContext_ setPersistentStoreCoordinator:coordinator];

    }

    return managedObjectContext_;
}

/**
 Returns the managed object model for the application.
 If the model doesn't already exist, it is created from a starter file.
 */

- (NSManagedObjectModel *)managedObjectModel {
    //NSLog(@"%s", __FUNCTION__);
    if (managedObjectModel_ != nil) {
        return managedObjectModel_;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"DreamCatching" withExtension:@"mom"];
    managedObjectModel_ = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];    
    return managedObjectModel_;
}

/**
 Returns the persistent store coordinator for the application.
 If the coordinator doesn't already exist, it is created and the application's store added to it.
 */
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
    //NSLog(@"%s", __FUNCTION__);
    if (persistentStoreCoordinator_ != nil) {
        return persistentStoreCoordinator_;
    }

    NSString *storePath = [[self applicationDocumentsDirectory] stringByAppendingPathComponent:@"DreamCatching.sqlite"];

    // If the expected store doesn't exist, copy the default store.

    //COMMENT / UNCOMMENT THIS TO LOAD / NOT LOAD THE STARTER FILE.
    NSFileManager *fileManager = [NSFileManager defaultManager];

    if (![fileManager fileExistsAtPath:storePath]) {        
        NSError *error;
        NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"Starter" ofType:@"sqlite"];

        if ([[NSFileManager defaultManager] copyItemAtPath:defaultStorePath toPath:storePath error:&error]) 
            NSLog(@"Copied starting data to %@", storePath);
        else 
            NSLog(@"Error copying default DB to %@ (%@)", storePath, error);
    }
    // to below here

    NSURL *storeURL = [NSURL fileURLWithPath:storePath];

    NSError *error = nil;
    persistentStoreCoordinator_ = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    if (![persistentStoreCoordinator_ addPersistentStoreWithType:NSSQLiteStoreType
                                     configuration:nil URL:storeURL options:nil error:&error]) {

        NSLog(@"Error - App Delegate Creating DB %@, %@", error, [error userInfo]);
        abort();
    }    

    return persistentStoreCoordinator_;
}

#pragma mark -
#pragma mark Application's Documents directory

/**
 Returns the path to the application's Documents directory.
 NB SETTINGS ARE NOT IN THIS DIRECTORY, THEY ARE IN THE APPS BUNDLE. CONTROL-CLICK THE APP TO SEE CONTENTS, CONTROL-CLICK THE BUNDLE TO SEE THE PREFS
 */
- (NSString *)applicationDocumentsDirectory {
    //NSLog(@"%s", __FUNCTION__);
    return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
} 
```

和模型：

![在此处输入图像描述](../Images/abdfb48770f3a6b55eb355bed811adc5.png)

# python - 如何使用 webapp2 在 App Engine 中正确实现继承

> ID：10958276
> 
> 赞同：3
> 
> 时间：2012-06-09T04:07:59.833
> 
> 标签：python, google-app-engine, inheritance, webapp2

给定这个简单的类：

```
class RenderResponseHandler(webapp2.RequestHandler):
    def __init__(self):
        self.nombreUsuario = obtenerUsuarioTablaUsuario().nombre if obtenerUsuarioTablaUsuario() else None
    def doRender(self, tname='index.html',values = {}):
        temp = os.path.join(os.path.dirname(__file__),
                            'templates/'+tname)
        if not os.path.isfile(temp):
            return False

        self.nombreUsuario = obtenerUsuarioTablaUsuario().nombre if obtenerUsuarioTablaUsuario() else None

        newval = dict(values)
        newval['path'] = self.request.path

        if nombreUsuario:
            url_linktext = 'logout'
        else:
            url_linktext = 'login'

        newval['url_linktext'] = url_linktext
        newval['nombreUsuario'] = nombreUsuario

        template = jinja_environment.get_template(tname)
        outstr = template.render(newval)
        self.response.out.write(outstr)

        return True

    def obtenerPagina(self, pOpcion = None, pMensajeInformacion = None):
        opcion = pOpcion if pOpcion is not None else self.request.get('opcion')
        if opcion == 'index':
            self.doRender('index.html')
        #### 
```

如果我这样做，页面会正常显示

```
class MainPage(webapp2.RequestHandler):
    def get(self):
        r = RenderResponseHandler()
        r.request = self.request
        r.response = self.response 
        r.obtenerPagina('index') 
```

虽然，当尝试从 RenderResponseHandler 继承时，像这样：

```
class MainPage(RenderResponseHandler):
    def get(self):
        if self.doRender(self.request.path):
            return
        self.obtenerPagina('index') 
```

我得到以下异常：

```
Traceback (most recent call last):   File "/home/lucas/Dropbox/Tesis/Revision 2012/Desarrollo/Entorno/AppEngine SDK/google_appengine_1.6.6/lib/webapp2/webapp2.py", line 1536, in
__call__
    rv = self.handle_exception(request, response, e)   File "/home/lucas/Dropbox/Tesis/Revision 2012/Desarrollo/Entorno/AppEngine SDK/google_appengine_1.6.6/lib/webapp2/webapp2.py", line 1530, in
__call__
    rv = self.router.dispatch(request, response)   File "/home/lucas/Dropbox/Tesis/Revision 2012/Desarrollo/Entorno/AppEngine SDK/google_appengine_1.6.6/lib/webapp2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)   File "/home/lucas/Dropbox/Tesis/Revision 2012/Desarrollo/Entorno/AppEngine SDK/google_appengine_1.6.6/lib/webapp2/webapp2.py", line 1101, in
__call__
    handler = self.handler(request, response) TypeError: __init__() takes exactly 1 argument (3 given) 
```

我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T05:38:25.193

您需要`__init__`像这样实现 RenderResponseHandler ：`def __init__(self, request=None, response=None)`并将请求和响应传递给基类。

调用请求处理程序类的层在 ctor 将具有这些参数的合同上中继。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T10:59:43.777

如下所示；我们可以从其他 Google App Engine 类调用 myfunc 函数，而无需在类定义行中声明。_ *init _*函数让 GAE 感到困惑，因为他的初始函数是 get()

```
class Test2(webapp2.RequestHandler):
    def get(self):
          tx=Test()
          self.response.out.write(tx.myfunc())

class Test(webapp2.RequestHandler):
  def myfunc(self):
      return "Hooooooooooooooop"
  def get (self,request=None, response=None):
      self.response.out.write("test2") 
```

# c# - 如何使用 C# 读取“uSNChanged”属性

> ID：10958278
> 
> 赞同：5
> 
> 时间：2012-06-09T04:08:11.463
> 
> 标签：c#, active-directory, directoryservices

我想`uSNChanged`使用 C# 通过 ActiveDirectory 中的值获取最后修改或创建的属性...我也试图找到 的最大值`uSNChanged`，你能帮我找出解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:37:46.287

有两种方法可以`uSNChanged`通过 .NET 检索属性：

1.  包含对 COM 库的引用：“Active DS 类型库”，然后您需要使用`IADsLargeInterger`来检索值并最终将其转换为`long`. [例如](http://support.microsoft.com/kb/326091)：

    ```
    IADsLargeInteger li_ad = (IADsLargeInteger)oUser.Properties["USNChanged"].Value;
    long l_uChanged = GetLongFromLargeInteger( li_ad );

    static long GetLongFromLargeInteger(  IADsLargeInteger  Li )
    {
        long retval = Li.HighPart;
        retval <<=32;
        retval |=(uint)Li.LowPart;
        return retval;
    } 
    ```

2.  仅使用 C# 转换值。感谢[Simon Gilbee](https://stackoverflow.com/questions/1101022/how-to-change-system-directoryentry-usnchanged-attribute-value-to-an-int64)，我们有这个选项：

    ```
     long usnChanged = ConvertADSLargeIntegerToInt64(oUser.Properties["USNChanged"].Value);

     public static Int64 ConvertADSLargeIntegerToInt64(object adsLargeInteger)
     {
       var highPart = (Int32)adsLargeInteger.GetType().InvokeMember("HighPart", System.Reflection.BindingFlags.GetProperty, null, adsLargeInteger, null);
       var lowPart  = (Int32)adsLargeInteger.GetType().InvokeMember("LowPart",  System.Reflection.BindingFlags.GetProperty, null, adsLargeInteger, null);
       return highPart * ((Int64)UInt32.MaxValue + 1) + lowPart;
     } 
    ```

**我强烈建议您使用选项 #2**以避免遗留 ActiveDs 库出现问题，并且不需要[此列表中](https://stackoverflow.com/search?q=activeds)的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:57:15.943

[我得到了解决方案，我们可以通过这个属性HighestCommittedUsn](http://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectory.domaincontroller.highestcommittedusn%28v=vs.90%29.aspx)获得域控制器的最大 usnchanged 值

# android - 我们如何告诉主机我们正在从 android 设备请求网页

> ID：10958282
> 
> 赞同：0
> 
> 时间：2012-06-09T04:09:05.810
> 
> 标签：android

实际上我正在使用 HttpClient() 和 HttpPost() 方法来下载 html 源代码，这里是下载代码：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(_url);
try {
  // Execute HTTP Post Request
  HttpResponse response = httpclient.execute(httppost);
  responseBody = EntityUtils.toString(response.getEntity());
    } 
```

如果我执行上面的代码，一些网站，如 www.google.com（它将提供用户代理特定代码（HTML 代码）），而不是提供适合 android 的全部信息。所以我可以告诉主机我正在从 android 设备请求网页。

# dialog - 创建 CD 自动启动对话框

> ID：10958283
> 
> 赞同：0
> 
> 时间：2012-06-09T04:09:21.887
> 
> 标签：dialog, implementation, autostart

对我来说，光盘和这些自定义的自动启动对话框有些过时和浪费......但是，我*必须*创建这样一个对话框作为包含几个 PDF 文件的 CD 的索引。使一个在 Microsoft Windows 上工作非常容易。由于可能有来自不同平台（Unix、Apple 等）的用户，因此问题提出了如何为他们提供这样的（自动启动）对话框。

Java 当然是一种选择，但我认为它已经超载并且自然太慢了。

现在，我想到了一个会出现在本地浏览器中的网页。使用所有这些网络标准，这可能是一种适用于大多数系统的非常有创意的轻量级方法。

您是否看到这里可能出现的任何问题？也许，这个问题有一个不同的、更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:35:20.097

我不能准确地推荐一些东西，但我已经看到很多 CD 打开一个 Adob​​e Flash 对话框。我玩 flash 也很长时间了，但我认为它们是 File > Publish 中的一个设置，允许您导出到对话框。

CD 自动启动是一个`autorun.ini`添加到 CD 根目录的文件。您可以在 CD 上创建一个名为`autorun`或其他名称的文件夹。插入所有 Flash/HTML 文件，然后`open`将 autorun.ini 文件的参数指向 HTML/Flash 文件。

下面的一些文档（或谷歌“autorun.ini”）。 [http://support.microsoft.com/kb/818804](http://support.microsoft.com/kb/818804)

但请注意，并非所有计算机都会默认安装 Flash。

# macos - 在 Mac 上编译 Hadoop 原生库失败

> ID：10958287
> 
> 赞同：0
> 
> 时间：2012-06-09T04:10:05.107
> 
> 标签：macos, hadoop

我正在尝试在 mac os 上编译 hadoop 本机库。

我的 Mac OS X 是 10.7.4。我的 Hadoop 是 1.0.3

我已经安装了 zlib 1.2.7 和 lzo 2.0.6，如​​下所示： ./configure -shared --prefix=/usr/local/[zlib/lzo] make make install

我改变 .bash_profile 如下

```
export C_INCLUDE_PATH=$C_INCLUDE_PATH:/usr/local/zlib-1.2.7/include:/usr/local/lzo-2.06/include
export LIBRARY_PATH=$LIBRARY_PATH:/usr/local/zlib-1.2.7/lib:/usr/local/lzo-2.06/lib
export CFLAGS="-arch x86_64" 
```

我切换到 hadoop 文件夹并运行

```
ant -Dcompile.native=true compile-native 
```

我得到了如下信息

```
[exec] checking stddef.h usability... yes
     [exec] checking stddef.h presence... yes
     [exec] checking for stddef.h... yes
     [exec] checking jni.h usability... yes
     [exec] checking jni.h presence... yes
     [exec] checking for jni.h... yes
     [exec] checking zlib.h usability... yes
     [exec] checking zlib.h presence... yes
     [exec] checking for zlib.h... yes
     [exec] checking Checking for the 'actual' dynamic-library for '-lz'... 
     [exec] configure: error: Can't find either 'objdump' or 'ldd' to compute the dynamic library for '-lz'

BUILD FAILED 
```

有没有人遇到过这个问题？

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:58:28.717

为此提交了一张 JIRA ( [3659](https://issues.apache.org/jira/browse/HADOOP-3659) ) 票证 - 您应该能够获取顶部补丁文件并应用它。不过请阅读评论线程，因为有人说它不支持 32 位。

# c++ - 如何在任务计划程序中使用用户输入？

> ID：10958290
> 
> 赞同：0
> 
> 时间：2012-06-09T04:10:33.863
> 
> 标签：c++, windows-task-scheduler

我正在创建一个程序，它接受任务名称、它执行的文件以及何时执行的输入。我在这里找到了来自 Microsoft 的示例代码：http: [//msdn.microsoft.com/en-us/library/aa384042%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/aa384042%28v=vs.85%29)我正在使用它。

在命名任务时，我不知道如何使用用户输入：

```
//  ------------------------------------------------------
//  Create a name for the task.
LPCWSTR wszTaskName = L"Weekly Trigger Task"; 
```

我一直在尝试以下方式：

```
//  ------------------------------------------------------
//  Create a name for the task.
LPCWSTR wszTaskName = L<<taskname; 
```

有人知道吗？谢谢，-克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:00:14.450

如果您的意思是来自控制台应用程序，那么您可以使用[gets()](http://msdn.microsoft.com/en-us/library/2029ea5f%28v=vs.100%29.aspx)函数（或其 Visual Studio Unicode 等效项 _getws()）。

```
WSTR wszTaskName[256];
_getws(wszTaskName); 
```

# android - 继承 ActionBarSherlock 主题崩溃 Eclipse 布局编辑器

> ID：10958292
> 
> 赞同：0
> 
> 时间：2012-06-09T04:10:52.550
> 
> 标签：android, eclipse, actionbarsherlock, stack-overflow

我在我的 Android 项目中使用 ActionBarSherlock，它很棒。一个小问题：我的应用程序主题继承自`Sherlock.Theme.Light.DarkActionBar`，这很好，它将按预期运行。问题是每当我尝试在 Eclipse 编辑器中打开我的任何布局文件时，它都会抛出 StackOverFlowError。

摆脱这种情况的唯一方法是更改​​用于预览布局的样式/主题（在右上角的下拉框中），但是我无法按照实际外观进行预览。有没有办法解决这个问题？

以下是错误日志显示的内容：

```
java.lang.StackOverflowError
at java.util.regex.Pattern.atom(Pattern.java:1952)
at java.util.regex.Pattern.sequence(Pattern.java:1834)
at java.util.regex.Pattern.expr(Pattern.java:1752)
at java.util.regex.Pattern.compile(Pattern.java:1460)
at java.util.regex.Pattern.<init>(Pattern.java:1133)
at java.util.regex.Pattern.compile(Pattern.java:823)
at java.lang.String.split(String.java:2292)
at java.lang.String.split(String.java:2334)
at com.android.ide.common.resources.ResourceResolver.findResValue(ResourceResolver.java:206)
at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:325)
at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333)
at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333)
at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333)
at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333)
at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333)
at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333)
... and so on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:14:53.243

在布局编辑器中使用`Theme.Holo.Light.DarkActionBar`以获得可比较的外观。这是 ADT 中的一个错误。

请参阅：[http ://code.google.com/p/android/issues/detail?id=19599](http://code.google.com/p/android/issues/detail?id=19599)

# bash - 将 IPv4 点分十进制表示法转换为 /8 或 /16 格式的文本处理

> ID：10958293
> 
> 赞同：0
> 
> 时间：2012-06-09T04:10:53.167
> 
> 标签：bash, sed, awk, grep

我有一个输入文件，其中包含一个 ip 地址列表和 ip_counts（我在内部使用的一些参数。）该文件看起来有点像这样。

```
202.124.127.26  2135869
202.124.127.25  2111217
202.124.127.17  2058082
202.124.127.16  2014958
202.124.127.20  1949323
202.124.127.24  1933773
202.124.127.27  1932076
202.124.127.22  1886466
202.124.127.18  1882955
202.124.127.21  1803528
202.124.127.23  1786348
119.224.129.200  1776592
119.224.129.211  1639325
202.124.127.19  1479198
119.224.129.201  1145426
202.49.175.110  1133354
119.224.129.210  1119525
68.232.45.132  1085491
119.224.129.209  1015078
131.203.3.8   857951
202.162.73.4   817197
207.123.58.125   785326
202.7.6.18   762603
117.121.253.254   718022
74.125.237.120   710448
68.232.44.219   693002
202.162.73.2   671559
205.128.75.126   611301
119.161.91.17   604393
119.224.129.202   559930
8.27.241.126   528862
74.125.237.152   517516
8.254.9.254   514341 
```

如您所见，ip地址本身是未排序的。所以我使用文件上的排序命令对ip地址进行排序，如下所示

```
cat address_count.txt | sort -t . -k 1,1n -k 2,2n -k 3,3n -k 4,4n > sorted_address.txt 
```

这给了我一个按排序顺序显示 ip 地址的输出。该文件的部分输出如下所示。

```
4.23.63.126    15731
4.26.254.254   320705
4.27.8.254    25174
8.12.129.50   176141
8.12.223.125    11800
8.19.32.65    15854
8.19.240.53    11013
8.19.240.70    11915
8.19.240.72    31541
8.19.240.73    23304
8.20.213.28    96434
8.20.213.32   108191
8.20.213.34   170058
8.20.213.39    23512
8.20.213.41    10420
8.20.213.61    24809
8.26.195.253    28568
8.27.152.253   104446
8.27.233.125   115856
8.27.235.126    16102
8.27.235.254    25628
8.27.238.254   108485
8.27.240.125   169262
8.27.241.126   528862
8.27.241.252   197302
8.27.248.125    14926
8.254.9.254   514341
12.129.210.71    89663
15.192.45.21    20139
15.192.45.26    35265
15.193.0.148    10313
15.193.113.29    40318
15.201.49.136    14243
15.240.238.52    57163
17.250.248.95    28166
23.33.125.13    19179
23.33.125.37    17953
31.151.163.60    72709
38.99.42.37   192356
38.99.68.180    41251
38.99.68.181    10272
38.104.237.74    74012
38.108.112.103    37034
38.108.112.115    69698
38.108.112.121    92173
38.108.112.122    99230
38.112.63.238    39958
38.119.130.62    42159
46.4.28.22       19769 
```

现在我想解析上面给出的文件并将其转换为 aaa.bbb.ccc.0/8 格式和 aaa.bbb.0.0/16 格式，我还想计算每个子网中 ip 的出现次数。我想使用 bash 来做到这一点。我愿意使用 sed 或 awk。我该如何实现这一点。

例如

```
8.19.240.53    11013
8.19.240.70    11915
8.19.240.72    31541
8.19.240.73    23304
8.20.213.28    96434
8.20.213.32   108191
8.20.213.34   170058
8.20.213.39    23512
8.20.213.41    10420
8.20.213.61    24809 
```

about 输入部分应该产生 8.19.240.0/8 和 8.20.213.0/8 和类似的 /16 域。我还想计算子网中机器的出现。例如在上面的输出中，这个子网应该在它旁边的下一列中有计数 4。它还应该在另一列中添加已经显示的计数。即 (11013 + 11915 + 31541 + 23304)。

8.19.240.0/8 4 (11013 + 11915 + 31541 + 23304) 8.20.213.0/8 6 (96434 + 108191 + 170058 + 23512 + 10420 + 24809)

如果有人可以提出一些方法来实现这一点，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T06:29:27.187

这里的主要问题是，如果没有数据包到达的各个时刻的路由表，您将不知道它们最初位于哪个网络块中。当然，您可以将它们放在它们所在的类全块中，在一个类中-完整的路由情况，但所有能给你的只是一个很好的演示文稿（而且，诚然，一个更短的文件）。

此外，您的示例看起来有点损坏。您在 8.0.0.0/8 中有一堆 IP 地址，您正在将它们聚合成看起来像 /24 的路由，并在最后以 /8 呈现它们。

尽管如此，在 awk 中，您可以使用 sub() 进行文本替换（或者您可以使用 index 查找 . 的出现，或者您可以使用 split 在点处拆分）。从那个到“删除最后一个数字，添加字符串“0/24”并将其用作更新 IP 计数和命中计数字典的键，然后删除最后两个八位字节和斜线，用“0.0/16”替换并做同样的事情”（awk 中的所有数组都是关联数组，所以本质上是 dicts）。不需要提前排序，当你循环遍历结果时，你会以随机顺序获取键，但平均而言它们会更少，因此事后排序会更便宜。

我手头似乎没有 awk，所以我不能给你一个代码示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:49:18.053

这可能对您有用：

```
awk '{a=$1;sub(/\.[^.]*$/,"",a);ac[a]++;at[a]+=$2};END{for(x in ac)print x".0/8",ac[x],at[x]}' file 
```

这将打印`'0/8`地址以获取`0/16`重复的代码`b=a;sub(/\.[^.]*$/,"",b);ba[b]++`，例如等。

# codeigniter-2 - Codeigniter 网页缓存和数据库缓存？

> ID：10958294
> 
> 赞同：1
> 
> 时间：2012-06-09T04:10:58.120
> 
> 标签：codeigniter-2, page-caching, database-caching

我还是 Codeigniter 框架的新手。今天我阅读了有关数据库缓存[http://codeigniter.com/user_guide/database/caching.html](http://codeigniter.com/user_guide/database/caching.html)和网页缓存[http://codeigniter.com/user_guide/general/caching.html](http://codeigniter.com/user_guide/general/caching.html)的内容。

一旦页面视图已经在缓存中，如果数据库缓存有意义，我会有点困惑。所以如果页面在缓存中，它无论如何都不会进入数据库。

我在以下场景中看到的唯一一点：如果我从 db 加载 30 个结果，然后使用 php 对结果进行洗牌并从数组 10 结果中提取。下次当页面缓存被删除时，我仍然会有 30 个来自 db 的结果在缓存中，但是这次将这 30 个结果洗牌后会有不同的结果。

我是否遗漏了一些东西，当使用数据库缓存时是否还有其他情况会在使用页面缓存时带来任何好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T08:32:43.570

使用页面缓存时，数据库缓存也可以使您受益。如果您的页面是由多个数据库查询生成的，其中一些数据是不变的，而另一些则经常更改。

在这种情况下，您需要将页面缓存设置为较短的时间段，并且每次都从数据库中检索新数据，同时使用相同的常量数据而不查询数据库。

示例：假设您的频繁数据需要每 5 分钟刷新一次，而常量数据每 24 小时更改一次。在这种情况下，您将页面缓存设置为 5 分钟。在 24 小时内，您向数据库查询了 288 次频繁数据，但只查询了一次常量数据。如果您没有使用数据库缓存，则总共有 289 个查询而不是 576 个。

# php - 在 Mysql 命令中使用时出现字体颜色问题

> ID：10958295
> 
> 赞同：0
> 
> 时间：2012-06-09T04:11:10.197
> 
> 标签：php, mysql, html

我使用了红色字体，但在我的页面中它显示为绿色。

```
<?php

include('connect-db.php');

$result = mysql_query("SELECT * FROM players") or die(mysql_error());

while($row = mysql_fetch_array( $result )) {     
    echo '<font color=\"red\">';              
    echo $row['firstname']  ;
    echo '</font>';
    echo ':';
    echo $row['lastname'] ;
    echo '<br><br>';
} 

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T05:46:29.793

```
<?php

include('connect-db.php');

$result = mysql_query("SELECT * FROM players") or die(mysql_error());

while($row = mysql_fetch_array( $result )) {     
echo '<span style=\"color:red;\">';              
echo $row['firstname']  ;
echo '</span>';
echo ':';
echo $row['lastname'] ;
echo '<br><br>';
} 

?> 
```

# blackberry - ICEMobile : 在黑莓中打包 ICEMobile 错误

> ID：10958296
> 
> 赞同：1
> 
> 时间：2012-06-09T04:11:40.227
> 
> 标签：blackberry, icefaces

在 Blackberry 上运行 ICEMobile 演示时出现此错误：

在“打包 ICEmobileContainer”期间发生内部错误。

```
org.osgi.framework.Version.compareTo(Lorg/osgi/framework/Version;) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:05:06.920

您是否尝试将[IceMobile](http://www.icesoft.org/projects/ICEmobile/overview.jsf)直接部署到 BlackBerry 设备上？它旨在在 Web 服务器上运行，而不是直接在设备上运行。BlackBerry 设备使用 Java-ME，因此如果您尝试部署 Java-SE 代码，您会遇到一些验证错误。

> ICEmobile 是一个开源项目，用于为移动设备开发基于 Web 的企业 Java 应用程序。核心移动功能打包在特定技术的捆绑包中，以支持跨广泛的企业 Java 技术进行移动富 Internet 应用程序开发。

# php - 我怎样才能执行像“index.php?type=abc”这样的php文件

> ID：10958300
> 
> 赞同：-2
> 
> 时间：2012-06-09T04:12:25.630
> 
> 标签：php

我创建了 index.php 文件，并在 abc.php 中创建了表单，当我输入“index.php/type=abc”之类的 url 路径时，必须执行表单文件，即 abc.php 文件。我该怎么做.

我的 index.php 文件是

```
<?php include_once('header.php')?>
    <div id="content">
        <div class="min-width">
            <ul id="navmenu">
                <li><a href="tel:+254 0725117848" ><div class="button">CALL IPAIDABRIBE </div></a></li>
                <li><a href="new.php" ><div class="button">new</div></a></li>
                <li><a href="what.php" ><div class="button">what new</div></a></li>
                <li><a href="how.php"><div class="button">how</div></a></li>

            </ul>
        </div>
    </div>
    <?php include_once('footer.php')?> 
```

abc.php 代码是

```
<form action=" "  method="post" id="contact-mail-page">
<div><div class="dealer-page">
       <h2>Interested in becoming a dealer, retailer or a part of our affiliate program for Picture Keeper? Please type in your
 information below and then click submit. You will be contacted within 48 hours.</p><br/>
 </h2>
        </div>
<div class="review">
<div class="form-item" id="edit-name-wrapper">
 <label for="edit-name">Bussiness Name <span class="form-required" title="This field is required.">*</span></label><br />
 <input type="text" maxlength="255" name="name" id="edit-name" size="30" value="" class="form-text required input">
</div>
<div class="form-item" id="edit-name-wrapper">
 <label for="edit-name">Contact Name </label><br />
 <input type="text" maxlength="255" name="cname" id="edit-cname" size="30" value="" class="form-text required input">
</div>
<div class="form-item" id="edit-name-wrapper">
 <label for="edit-add">Address <span class="form-required" title="This field is required.">*</span></label><br />
 <input type="text" maxlength="255" name="add" id="add" size="200" value="" class="form-text required input">
</div>
<div class="form-item" id="edit-name-wrapper">
 <label for="add1">Address1 <span class="form-required" title="This field is required.">*</span></label><br />
 <input type="text" maxlength="255" name="add1" id="add1" size="200" value="" class="form-text required input">
</div><br/>
<input class="dealer-submit" type="submit" value="Submit">

</div></form> 
```

现在在这里，当我输入像 "index.php?type=abc" 这样的 url 路径时。这个 abc.php 文件必须被执行。我该怎么做？谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:17:39.617

怎么样：

```
<?php
if ($_REQUEST["type"] = "abc") {
    include ("abc.php");
}
?> 
```

这将出现在您的 index.php 文件中，就在包含页脚的行的上方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:17:52.563

像这样的东西：

```
<!--HTML HERE-->
<?php
    if (in_array($_GET['type'], array('abc','more','etc'))){
        include ($_GET['type']. ".php");
    }
?>
<!-- MORE HTML HERE--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T04:32:20.027

你到底想要什么？如果你想在 index.php?type=abc Url 被插入时，你重定向到你想要的页面，在 index.php 文件上方添加这个代码。

```
<?php

$SafePages= array("abc", "login", "signin", "logout");
if(isset($_GET['type']))
if (in_array($_GET['type'],$SafePages))
{
header("location:".$_GET['type'].".php");
}
else
{
 header('HTTP/1.0 404 Not Found');

    echo "<h1>404 Not Found</h1>";

    echo "The page that you have requested could not be found.";

    exit();

}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T04:33:10.733

```
<?php
   if (!empty($_GET)
   {

    if ($_GET["type"] = "abc") 
     {
       include ("abc.php");
     }
   }
?> 
```

在 index.php 中包含此代码

# php - 如何使用 SQL 搜索和替换字符串

> ID：10958301
> 
> 赞同：0
> 
> 时间：2012-06-09T04:12:28.057
> 
> 标签：php, mysql

所以我改变主意了......

我已经在文本类型字段中输入了大约 1200 条记录......就像这样：

```
this is <span class="italic">the</span> flower<br />
that speaks the mind<br />
bla bla bla<br /> 
```

如果你注意到，我已经插入了一个名为**italic**的类……那是我的错误……我需要循环所有 1200 条记录并用**espWord替换****斜体类**

 **我如何做到这一点？

```
SELECT lyrics.lyrics_id, lyrics.lyrics
FROM lyrics
WHERE ?????

replace italic with espWord 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T04:20:12.327

UPDATE 歌词设置 Lyrics.lyrics = replace(lyrics.lyrics, 'italic', 'espWord');

我个人永远不会有同名字段的表名；有很大的混乱可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:18:01.330

我对 MySql 不太熟悉，无法说出是否有完整的 MySql 解决方案，但您可以尝试选择数据，例如

```
SELECT SELECT lyrics.lyrics_id, lyrics.lyrics
FROM lyrics
WHERE `field` LIKE '%<span class=\"italics\">%' 
```

然后使用 preg_replace 或 sed 之类的程序来替换值并更新字段。我用的时间不够长，以至于我想不出头顶上的表情。

希望这可以帮助。**

# ruby-on-rails-3 - Rails 3 - 从父模型中提取表名？！（应用模型）

> ID：10958303
> 
> 赞同：1
> 
> 时间：2012-06-09T04:12:57.120
> 
> 标签：ruby-on-rails-3

我刚刚继承了一个项目。该项目已升级到 Rails3，并且缺少 application_model。我正在尝试实施它。我已经从它扩展了所有其他模型。问题是，由于某种原因，在尝试确定表名时，ActiveRecord 使用的是 ApplicationModel，而不是子模型，所以我得到：

表“your_db.application_models”不存在。

有什么想法吗？为什么要从应用程序模型中提取？关于如何修复的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T04:26:12.313

显然，这是问题所在（根据我在此页面上找到的内容：[rails - root model or application model](https://stackoverflow.com/questions/3329639/rails-root-model-or-application-model)）：

```
ActiveRecord normally detects when you subclass an already subclassed ActiveRecord::Base and uses this to turn STI (single table inheritance) on.
ApplicationModel will be an actual model that is expected to have a table in your database. This can lead to problems down the line. 
```

要解决这两个问题，您必须将 abstract_class 设置为 true 才能使 ActiveRecord 正常运行。

类 ApplicationModel < ActiveRecord::Base self.abstract_class = true end

与抽象的 ActionController 相比，abstract_class 必须设置为 true，这意味着开发人员必须知道他们不能从 ApplicationModel 中删除这一行。使用 ApplicationController，您几乎可以为所欲为。

# ruby - irb中的Ruby字符串比较和字符编码

> ID：10958304
> 
> 赞同：3
> 
> 时间：2012-06-09T04:13:09.617
> 
> 标签：ruby

这是错误：

```
=> ["Mænd med navnet Kim", "30.094", "29.946", "-148", "Kvinder med navnet Kim",
 "341", "345", "4", "Mænd med navnet Kim Hansen", "1.586", "1.573", "-13", "Kvin
der med navnet Kim Hansen", "5", "5", "0", "Mænd og kvinder med efternavnet Hans
en", "226.040", "223.478", "-2.562"]
irb(main):094:0>
irb(main):095:0* @tester.index("Mænd med navnet Kim")
=> nil
irb(main):096:0> @tester.index("Kvinder med navnet Kim")
=> 4
irb(main):097:0> @tester.index("Mænd med navnet Kim Hansen")
=> nil
irb(main):098:0> @tester.index("Kvinder med navnet Kim Hansen")
=> 12
irb(main):099:0> @tester.index("Mænd og kvinder med efternavnet Hansen")
=> nil
irb(main):100:0> 
```

示例尝试了 Gsub 方法：

```
<ap(&:text).map{|d| d.delete "'"}.map{|d| d.gsub("æ", "#844"}
irb(main):113:1> )
SyntaxError: (irb):112: syntax error, unexpected '}', expecting ')' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T04:41:48.527

由于您的输入字符串似乎是 UTF-8，因此最简单的解决方案是`irb`使用相同的编码运行会话：

```
irb -EUTF-8 
```

这应该使`irb`命令提示符中的字符串输入默认为 UTF-8。

关于 Ruby 1.9 编码的好资源：http:
[//blog.grayproductions.net/articles/understanding_m17n](http://blog.grayproductions.net/articles/understanding_m17n)

# http-status-code-404 - 404 - 找不到文件或目录 - 具有正确的 URL

> ID：10958306
> 
> 赞同：0
> 
> 时间：2012-06-09T04:13:22.033
> 
> 标签：http-status-code-404

我在“apk”的文件夹中放了一个文件名“abc.apk”，它显示

```
"404 - File or directory not found" 
```

当我尝试使用浏览器访问它时（在 chrome、FF 和 IE 上尝试过）。我什至尝试使用jdownloader，它一直说找不到文件...

但如果我将图片文件放在“apk”文件夹中，它就能显示图片。我该如何解决这个问题？我希望浏览器在我输入完整的 url 后自动下载文件。

我尝试了谷歌的一些解决方案，但它们都不起作用，他们让我检查 url，向上移动 1 个目录以检查目录的可用情况.. 等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:30:26.673

如果您使用托管网络服务器，请向您的托管公司发送一张票，并要求他们将文件扩展名添加到 MIME 中，问题就解决了。

# html - 用纯 css 显示视网膜显示图像

> ID：10958308
> 
> 赞同：5
> 
> 时间：2012-06-09T04:13:33.127
> 
> 标签：html, css, image, media-queries, retina-display

我有一种情况，我不可能知道图像的尺寸（专有的有限 cms ...）

我需要弄清楚如何显示视网膜级别的图像，并且我想在不使用 javascript 的情况下这样做（如果可能的话）。

我一直在使用：

```
@media only screen and (-webkit-min-device-pixel-ratio: 2) {} 
```

但这只会帮助我处理具有背景图像的元素。由于有问题的图像不能是背景图像（因为我不知道大小......）有什么方法可以解决这个问题？

我有`logo.png`and `logo2x.png`，我的适用标记看起来像：

```
<h1 id="logo">
  <a href="/">
    <img src="images/logo.png">
  </a>
</h1> 
```

没有javascript这可能吗？我不反对为此使用非标准 css - 只要它适用于 webkit（在这种情况下为 ios/iphone）。我想`logo.png`为普通浏览器显示，但`logo2x.png`对于像素比至少为 2 的浏览器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:40:31.927

您可以做到这一点：输出所有图像并仅向每个设备显示相关图像：

**HTML 标记：**

```
<h1 id="logo">
  <a href="/">
    <img class="logo logo_normal" src="images/logo.png" />
    <img class="logo logo_retina" src="images/logo2x.png" />
  </a>
</h1> 
```

**CSS 样式：**

```
.logo_retina { display: none; }

@media only screen and (-webkit-min-device-pixel-ratio: 2) {
    .logo_normal { display: none; }
    .logo_retina { display: block; }
} 
```

您也可以使用此**[“自适应图像”</a>](http://adaptive-images.com/)**[解决方案并阅读](http://adaptive-images.com/)**html5doctor 上的**[自适应图像传奇](http://html5doctor.com/html5-adaptive-images-end-of-round-one/)****

 *****更新：*** [**dabblet 链接**](http://dabblet.com/gist/4134213)

**HTML：**

```
<h1><a class="logo ir" href="/">BRAND</a></h1> 
```

**CSS：**

```
#logo a {
    display: block;
    width: 200px;
    height: 200px;
    background: url('//placekitten.com/200');
}

@media  (-webkit-min-device-pixel-ratio:1.5),
        (min--moz-device-pixel-ratio:1.5),
        (-o-min-device-pixel-ratio:3/2),
        (min-resolution:1.5dppx) {
    #logo a {
        background: url('//placekitten.com/400');
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:57:22.537

自己考虑过这个问题 - 只使用 x2 图像并确保设置图像的像素尺寸怎么样？Retina 显示器会以 1:1 的比例显示，非 Retina 显示器会以 50% 的比例显示。但是，所有客户端都必须加载 x​​2 版本，这意味着更多的流量。**

# python - gtimelog 在 Mac OS 上找不到通过 Homebrew 安装的 pygtk

> ID：10958309
> 
> 赞同：1
> 
> 时间：2012-06-09T04:13:36.120
> 
> 标签：python, pygtk, homebrew

我已经通过 Homebrew 安装了 Python。我还通过 Homebrew 安装了 pygtk

我去通过 pip 安装 gtimelog 但它告诉我它已经安装了，它似乎已经在 Homebrew 中使用 Python

当我尝试跑步时，`gtimelog`我得到`ImportError: No module named pygtk`

这似乎是一个`$PYTHONPATH`问题，但我似乎无法解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:21:38.807

我遇到了同样的问题。阅读 Homebrew 日志：

```
==> Installing pygtk
==> Downloading http://ftp.acc.umu.se/pub/GNOME/sources/pygtk/2.24/pygtk-2.24.0.tar.bz2
######################################################################## 100.0%
==> ./configure --prefix=/usr/local/Cellar/pygtk/2.24.0
==> make install 
==> Caveats
For non-Homebrew Python, you need to amend your PYTHONPATH like so:
export PYTHONPATH=/usr/local/lib/python2.7/site-packages:$PYTHONPATH
==> Summary 
```

问题是即使使用正确的 PYTHONPATH 我在运行 gtimelog 时也会出现错误：

```
$ gtimelog 
Traceback (most recent call last):
  File "/usr/local/bin/gtimelog", line 8, in <module>
    load_entry_point('gtimelog==0.8.0dev', 'gui_scripts', 'gtimelog')()
  File "/Library/Python/2.7/site-packages/gtimelog-0.8.0dev-py2.7.egg/gtimelog/main.py", line 2208, in main
    tray_icon = icon_class(main_window)
  File "/Library/Python/2.7/site-packages/gtimelog-0.8.0dev-py2.7.egg/gtimelog/main.py", line 1148, in __init__
    'style-updated', self.on_style_set) # Gtk+ 3
TypeError: <gtk.Window object at 0x10b443cd0 (GtkWindow at 0x7fe09aacd1d0)>: unknown signal name: style-updated 
```

**更新：

对于 Mountain Lion，您需要安装 XQuarks，因为苹果不再随其操作系统发布 X11。

根据 gtimelog 未打开的原因，这是一个 gtimelog 错误，如果您编辑 ~/.gtimelog/gtimelogrc 并将 show_tray_icon 设置为 False，您将使其正常工作！

# iphone - 检查 UINavigationItem 标题是否被截断

> ID：10958310
> 
> 赞同：0
> 
> 时间：2012-06-09T04:14:14.643
> 
> 标签：iphone, objective-c, ios, ipad, user-interface

我想检查 a 的标题是否`UINavigationItem`被截断。

我这样设置标题：`self.navigationItem.title = whatever`.

我知道我可以检查 a 中的文本`UILabel`是否像这样被截断：

```
CGSize size = [label.text sizeWithFont:[UIFont fontWithName:@"myfont" size:18.0]];
if (size.width > label.bounds.size.width) {
    // set a shorter title
} 
```

我什至可以找到`UINavigationItemView`显示标题的对象，如下所示：

```
UIView *navItemView;
for (UIView *view in self.navigationController.navigationBar.subviews) {
    if ([view isKindOfClass:NSClassFromString(@"UINavigationItemView")]) {
        navItemView = view;
    }
} 
```

但我不能将此方法应用于`navItemView`因为它的宽度似乎总是正好 58，这比其中的标题要小得多，所以据此看来，标题似乎被截断了，即使它不是.

所以，我的问题归结为：如何找到标题中显示的宽度`UINavigationItem`？

**更新：**我*找到*了解决我的问题的方法，但它并不完全理想、完美或可靠，所以我还没有将其标记为答案。如果有人有更好的解决方案，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T04:44:02.107

我会尝试的是，将其`UINavigationItemView`转换为 a ，使用属性获取`UILabel`它的文本并使用`.text``CGSize``-sizeWithFont:constrainedToSize:`

```
UILabel *navItemView;
    for (UIView *view in self.navigationController.navigationBar.subviews) {
         if ([view isKindOfClass:NSClassFromString(@"UINavigationItemView")]) {
           navItemView = (UILabel*)view;
           CGSize theSize = [navItemView.text sizeWithFont:[UIFont systemFontOfSize:navItemView.font.systemFontSize] constrainedToSize:260 lineBreakMode:UILineBreakModeWordWrap];
        }
} 
```

现在您可以使用 的`.width`属性`theSize`来找出文本的宽度。

**注意：**这是理论上的，未经测试。我希望它有效！期待你如何使用它。=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T07:14:36.540

终于找到了解决办法：

```
self.navigationItem.title = title;

CGFloat titleWidth = 320 - (5.0 + self.navigationItem.backBarButtonItem.width + 10.0 + 10.0 + self.navigationItem.rightBarButtonItem.width + 5.0);
if ([self.navigationItem.title sizeWithFont:[UIFont fontWithName:@"myfont" size:18.0]].width > titleWidth) {
    self.navigationItem.title = aShorterTitle;
} 
```

说明：`titleWidth`是手动计算导航栏中标题剩余的空间量。换句话说：

> 导航栏的总宽度 (320) - (后退按钮与屏幕左侧之间的间隙大小 (5) + 后退按钮的宽度 + 后退按钮和标题之间的间隙大小 (10) + 标题和右侧栏之间的间隙大小按钮 (10) + 右栏按钮的宽度 + 右栏按钮与屏幕右侧之间的间隙大小 (5))

**注意：**间隙大小（5 和 10）是手动测量的，并且精确到像素，但 Apple 可能会在软件版本之间稍微更改它们，因此这可能并不总是准确的。

**另请注意：**此解决方案适用于带有后退按钮和一个右栏按钮的纵向模式导航栏。如果您的不同，则必须手动调整。

如您所见，这*不是*一个完美的解决方案，所以如果有人有更好的解决方案，请分享。

# ios - 帖子中的非标准 URL

> ID：10958313
> 
> 赞同：1
> 
> 时间：2012-06-09T04:14:55.640
> 
> 标签：ios, facebook, url-scheme

我正在开发一个通过自定义 url 方案共享数据的 iPhone 应用程序。这在电子邮件中运行良好，但我很难在 Facebook 中获得此功能。

我想使用我的自定义 url 方案发布一个带有回调的链接到我的应用程序。基本上，如果您在安装了应用程序的 iOS 设备上运行，我想要一个打开应用程序的链接。

我正在尝试使用提要对话框中的属性来执行此操作，但在调用对话框时出现错误：帖子的操作链接必须是有效的 URL...看来 API 不允许在属性中使用非标准 URL基于此 - 还有另一种方法可以做到这一点吗？

```
SBJSON *jsonWriter = [SBJSON new];
NSDictionary *propertyvalue = [NSDictionary dictionaryWithObjectsAndKeys:@"Final Count", @"text", @"finalcount://somecustomstuffhere", @"href", nil];
NSDictionary *properties = [NSDictionary dictionaryWithObjectsAndKeys:propertyvalue, @"Import ", nil];
NSString *finalproperties = [jsonWriter stringWithObject:properties];
NSString *finalactions = [jsonWriter stringWithObject:actions];            
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       kAppId, @"app_id",
                                       @"http://itunes.apple.com/us/app/final-count/id532992913?ls=1&mt=8", @"link",
                                       @"http://southwestgecko.com/wp-content/uploads/2012/05/PrimaryIcon@2x.png", @"picture",
                                       @"Final Count", @"name",
                                       @"caption", @"caption",
                                       @"description", @"description",
                                       finalproperties, @"properties",
                                       nil];
[facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:48:54.130

这就是我最终这样做的方式：

我利用了这样一个事实，即我的基于 WordPress 的网站将忽略正常 URL 之后的任何内容，并在那里打包所有回调数据。Facebook 应用程序足够智能，可以将完整的 URL 字符串转发到应用程序，而我的应用程序足够智能，可以忽略属于 WordPress 网站的 URL 的第一部分。

这是我放入 Facebook 帖子的链接：

```
link = [NSString stringWithFormat:@"http://southwestgecko.com/?page_id=%i%@",timer.link, [self generateURLFromTimer:timer]]; 
```

其中 [self generateURLFromTimer:timer] 部分生成回调信息。这会从关键字@“link”下的原始问题中放入字典参数中。当一个 URL 被传递到应用程序中时，我只需解析出指向网站的部分并将其余部分作为回调处理（在这种情况下，它包括将计时器导入我的应用程序所需的所有计时器信息）。

# html - 使用 base64 编码将 .swf 内联嵌入到 html 中

> ID：10958314
> 
> 赞同：3
> 
> 时间：2012-06-09T04:15:03.337
> 
> 标签：html, flash, base64

**尝试做：**使用base64编码将.swf嵌入到html中

我在某处读过一篇文章，说 Flash 10+ 不再有
任何黑客或明确答案？

```
'data:application/x-shockwave-flash;base64,Q1dTChQHAAB4(cut)9ktAW5/4BvdnQmw==' 
```

不再工作

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-09T12:37:20.270

为什么，我认为如果你在`<object>`标签上这样做应该可以工作，不知道为什么它取决于播放器的版本，我想 SWF 是由浏览器加载的，而不是播放器。

# php - 如何在 PHP 中获取整个 URL 字符串（包括 &，？）？

> ID：10958315
> 
> 赞同：0
> 
> 时间：2012-06-09T04:15:04.903
> 
> 标签：php, string, url

我只想在参数中获取 URL 字符串。所以我在下面编码：

```
//In my HTML file.
<script>
document.write('<iframe id="ifr1" 
src="http://{domain}/prj.php?url=https://www.google.co.kr/search?sugexp=chrome,mod=3&sourceid=chrome&ie=UTF-8&q=url+utf8+encoding#sclient=psy-ab&hl=ko&newwindow=1&prmdo=1&tbm=klg&q=google&oq=google&aq=f&aqi=g10&aql=&gs_l=serp.3..0l10.2207859.2208404.3.2208459.6.4.0.1.1.3.496.1353.2-2j1j1.4.0...0.0.O1lbexylHQM&pbx=1&prmdo=1&bav=on.2,or.r_gc.r_pw.,cf.osb&fp=b8fee9fdb4e7f90&biw=1440&bih=828&a=' +'asdf'+" width="100%" height="100%" frameborder="0">   </iframe>');
</script>

//In my php file
$message = $_GET['url'];
echo("$message"); 
```

但我只得到'https://www.google.co.kr/search?sugexp=chrome,mod=3'。

怎么了？

我想获取整个 URL 字符串。包括 &,?, 或其他所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T04:17:53.217

您需要使用[`encodeURIComponent`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)对 url 参数进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:29:26.090

原因是您将一种编码转换为另一种编码。

第一个是：

```
prj.php?url=[somedata] 
```

其中 [somedata] 是带有另一个键/值集合的 URL：

```
https://url/etc/search?key1=value1&key2=value2 
```

如果 url 参数没有进行*urlencoded*，则无法区分参数 of`/prj.php`和参数`/search`，假设*所有*用语法定义的参数`&key=value&key=value...`都属于第一页。

诀窍是对url 参数进行*url 编码*，但如何执行取决于上下文。

如果 url 是通过 PHP 动态生成的，请使用该`urlencode()`函数。

如果您的 url 是硬编码的（不是通过 PHP 生成的），您可以为自己编写一个小的 PHP 工具来完成这项工作，或者使用像[http://www.opinionatedgeek.com/dotnet/tools/urlencode/这样的在线编码器编码.aspx](http://www.opinionatedgeek.com/dotnet/tools/urlencode/Encode.aspx)

# python - Google App Engine 非索引列表属性？

> ID：10958318
> 
> 赞同：0
> 
> 时间：2012-06-09T04:15:20.783
> 
> 标签：python, google-app-engine

我在 GAE 中有这个属性：

```
memberNames = db.StringListProperty(indexed = False) 
```

但是对于未索引的属性，它们通常不会花费我任何写入（只是放置文件的基本写入），但是有了这个属性，我可以得到列表中每个字符串的写入。我不允许有非索引的 ListProperties 吗？我唯一的选择是使用 JSON 数组字符串还是有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T16:40:41.477

StringListProperty 创建多个索引行（每个值一行）并且仅存储在索引中，因此您需要实现自己的多值属性序列化（例如 JSON）而不是使用 StringListProperty 来消除索引写入是正确的.

# javascript - 'MediaWiki:Common.js' 中的自定义 JavaScript 不起作用

> ID：10958319
> 
> 赞同：3
> 
> 时间：2012-06-09T04:15:39.273
> 
> 标签：javascript, mediawiki, wiki

1.  我在自己的服务器上新安装了 MediaWiki（最新版本）

2.  我尝试添加一些 JavaScript 代码`MediaWiki:Common.js`

3.  在`localsettings.php`,`$wgAllowUserJs`设置为 true

4.  我还尝试将 JavaScript 添加到`User:Admin/vector.js`和`User:Admin/common.js`

5.  我清除了缓存/cookies，使用了不同的浏览器，启用了 JavaScript，尝试了不同的计算机

JavaScript 代码根本不起作用。我查看了源代码，它不存在。

```
<!-- BEGIN Tynt Script -->
<script type="text/javascript">
    if(document.location.protocol=='http:'){
        var Tynt=Tynt||[];Tynt.push('cAe5WESDOr4BZUacwqm_6r');Tynt.i={"ap":"Read more:"};
        (function(){var s=document.createElement('script');s.async="async";s.type="text/javascript";s.src='http://tcr.tynt.com/ti.js';var h=document.getElementsByTagName('script')[0];h.parentNode.insertBefore(s,h);})();
    }
</script>
<!-- END Tynt Script --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-01T06:55:27.127

不要在 *.js 页面上包含`<script>`和`</script>`- 它将作为单独的 JS 文件包含在内，而不是内联在 HTML 页面中。

请注意，您不需要命名空间`$wgAllowUserJs`中的 javascript 页面`MediaWiki`，只需要命名空间中的页面`User`。（有一个单独的设置[`$wgUseSiteJs`](https://www.mediawiki.org/wiki/Manual:$wgUseSiteJs)用于在命名空间中启用脚本`MediaWiki`，但默认情况下它是打开的）。

# xcode - Xcode 完成，拼写检查停止

> ID：10958334
> 
> 赞同：0
> 
> 时间：2012-06-09T04:20:36.073
> 
> 标签：xcode

我的 Xcode 4.3.2 停止显示拼写错误和代码补全。找出代码中是否有任何错误的唯一方法 - 构建它。Xcode 仅对诸如`if, else, for`etc 之类的关键字着色。所有其他代码均未着色。只显示了一些非常奇怪的完成。例如：

```
CGPoint p;
p.y // completion is "YES"
p.x // completion is "xor" 
```

方法调用的完成只是几乎使用的方法。**我怎样才能解决这个问题？**我已经多次重启了我的 Mac，但在 Xcode 的首选项中没有找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T04:31:18.787

我也有很多次，对我有帮助的是在构建设置中设置`precompile prefix header`为 NO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:31:51.767

我为解决这个问题所做的是：

1.) 将构建设置从 LLVM 3.1 更改为 GCC 4.2

![在此处输入图像描述](../Images/58a973212b1a0c58fe5f157bb14216f2.png) 2.）转到管理器>项目>（选择项目）>删除`Derived Data`

3.) 将构建设置更改回 LLVM 3.1

![在此处输入图像描述](../Images/0f7a1d80204a5b89db68d28c24464671.png)

然后我的语法突出显示再次起作用。无需重新启动 Xcode，并跳过其他障碍。

希望这对您有帮助，就像对我一样！

**更新**：如果这不起作用，有些人可以只使用第 2 步。遵循所有 3 个步骤。

# java - Android Facebook 请求监听器

> ID：10958349
> 
> 赞同：0
> 
> 时间：2012-06-09T04:25:12.037
> 
> 标签：java, android, facebook-graph-api

我是 Java 新手，但多年来一直是 .NET 开发人员，我对 RequestListener 对象的意义有点困惑，因为我无法从我所能检索的 UI 线程上检索异步调用的结果告诉。我的研究告诉我，我不应该使用单例或应用程序上下文对象来获取和存储数据。我可以使用 sqlLite，但我需要的数据太短暂而无法打扰。我想知道如何让 asyncfacebookrunner 对象报告它对 UI 线程的响应，以便我可以继续在我自己的 api 和我在异步调用中进行的 facebook 调用返回给我的对象之间做出决定。

我错过了什么吗？我似乎无法找到一种方法来获取数据。我可以传入一个 Bundle，但我不太确定如何获取数据。我想我会传递一个 Intent 对象来检索，但我没有看到它。我想我的眼睛在这一点上是因为睡眠不足而交叉的。这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:35:21.827

AsyncFacebookRunner 自动在单独的线程中发出请求，然后在 RequestListener 方法中回发到 UI 线程，即

```
facebookrunner.request("me", new RequestListener() {
    @Override
    public void onComplete(String response, Object state) {
        //We are in the UI thread now
    }

    //Override the other methods, all are in the UI thread

}); 
```

这就是 AsyncTasks 的美妙之处。请参阅有关 AsyncTasks 的 Android 文档。 [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html) doInBackground 在单独的线程中执行操作。onPostExecute 回发到 UI 线程。

AsyncTask 是使用 Thread 和 Handler 构建的。Thread 与 UI 线程是分开的，Handler 的 post 回到 UI Thread 中，也称为 Main Looper。

# php - 在 sql 数据库的 php 页面中显示图像

> ID：10958350
> 
> 赞同：-6
> 
> 时间：2012-06-09T04:25:18.060
> 
> 标签：php, sql, varbinary

我正在尝试在 SQL 数据库的 php 页面中显示图像。当我尝试时，我看到：ÿØÿàJFIFHHÿáWExifMM* 而不是我预期的图像。请帮助我阅读或将其显示为图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T05:20:08.653

很可能您没有输出内容类型标头，因此服务器和/或浏览器假设您正在输出纯文本，并将其显示为：

```
<?php

// database stuff here

header('Content-type: image/jpeg');
echo $jpgdata; 
```

应该修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T08:47:22.907

我相信一个好的解决方案是从字符串加载图像（例如您的表格列），并且由于您不知道类型，您可以强制 GD 打印特定类型（在本例中为 JPEG），如下所示：

```
<?
 ...
 $data = $row["line"];

 $new_im = imagecreatefromstring($data)

 Header("Content-Type: image/jpeg");
 Header("Content-Description: PHP Generated Image");

 imagejpeg($new_im);
?> 
```

# maven - 仅编译测试时的 Maven 循环依赖 - 如何轻松解决？

> ID：10958352
> 
> 赞同：1
> 
> 时间：2012-06-09T04:26:03.043
> 
> 标签：maven, configuration, build, dependencies, cyclic-reference

我正在对一个用于 Maven 的旧项目进行现代化改造。该项目非常大，其中包含大约 30 个模块。

就主要源代码而言，我设法让所有代码正确编译并建立依赖关系。它确实有效，并且可以通过 Maven 的 tomcat 插件运行。

问题在于编译测试。

不幸的是，这家公司没有对他们的测试代码应用相同的依赖限制，就像他们对主要源代码所做的那样。

例如，在主源代码中，C 依赖于 B，而 B 依赖于 A。然而，A 依赖于 C 来运行它的测试。显然，Maven 会抱怨说存在循环依赖。

除了彻底修复代码（遗憾的是，这个项目不会发生 - 它有数千万行），有没有办法告诉 Maven，“请先编译所有主要源代码，然后编译所有之后的测试代码”？或者有没有围绕这个问题的任何其他解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:01:40.033

您可能可以作弊，使用配置文件，并告诉 Maven 运行一些测试作为集成测试......这将确保所有源代码都将被编译（记住：验证编译测试包集成测试）。

我会寻找片段 conf，以指导您，但我目前没有可以使用的片段。

您也许可以阅读此线程：[Maven - 从单元测试中分离集成测试](https://stackoverflow.com/questions/8185936/maven-separate-integration-tests-from-unit-tests)

这不是一个真正干净的解决方案，但我不知道如何解决它。

# c++ - 如何以 4 字节 int 打印每个字节的内容

> ID：10958355
> 
> 赞同：3
> 
> 时间：2012-06-09T04:26:52.227
> 
> 标签：c++, linux, byte, endianness

我设计了一个 C++ 代码来检查机器的字节序。它运作良好。但是，它不能以 4 字节 int 打印出每个字节的内容。

```
#include<iostream>
using namespace std;
bool f()
{
    int a = 1;
    char *p = (char*)&a;
    for (int i = 0 ; i < 4 ; ++i)
            cout << "p[" << i << "] is " << hex << *p++ << "   ";
    cout << endl ;
    p -= 4;
    if (*p == 1) return true ; // it is little endian
    else return false;  // it is big endian
}

int main()
{
    cout << "it is little endian ? " << f() << endl ;
    return 0 ;
} 
```

输出：

```
 p[0] is    p[1] is    p[2] is    p[3] is
 it is little endian ? 1 
```

为什么输出为空？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T04:31:15.853

问题是 的类型`*p`是`char`，因此流尝试将其值打印为 ASCII 字符（这可能不是可见字符的值）。如果你将它转换为 an`int`你会得到你所期望的：

```
cout << "p[" << i << "] is " << hex << static_cast<int>(*p++) << "   "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:12:26.057

建议的 printf 是可以的，但另一种方法是使用移位运算符 <<,>> 来调查 int 的各个字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T08:21:31.483

我编写了以下代码来打印 int 数组的每个字节。每个 int 有 4 个字节长。希望这在某种程度上有所帮助。

```
#include <iostream>
#include<math.h>
#include<string.h>
using namespace std;

int main()
{
    int length = 5;
    unsigned int* array = new unsigned int[length];
    for(int i=0; i<length; i++)
        array[i] = 16843009;
    for(int i=0;i<=4;i++)
    {
    int new_dividend=0,k=0,l=0;
        double bytevalue=0;
        int bits[32];
        int number=array[i];
        //Initializing
        for(int c=0;c<=31;c++)
        {
            bits[c]=0;
        }
        //convert to binary
        while(number!=1)
        {
            new_dividend=number/2;
            bits[k]=number%2;
            number=new_dividend;
            k++;
            }
        bits[k]=1;
        //Pad with zero if needed
        if(k!=31)
        {
            for(int ctr=k+1;ctr<=31;ctr++)
            {
                bits[ctr]=0;
            }
        }

    for(int counter=0;counter<=31;counter++)
{
    //Print value of each byte.Also Reset values after each bytevalue has been printed.
    if(l==8)
    {
        l=0;
        cout<<bytevalue;
        bytevalue=0;
    }
    //calculate value of each byte
    bytevalue=bytevalue+(pow(double(2),l))*bits[counter];
    ++l;
}
    if(l==8)
    {cout<<bytevalue;
    }
    }
     delete[] array;

    return 0;
} 
```

数组[i] = 16843009 的预期输出 = 11111111111111111111，其中 i 可以是任何范围。

# mysql - 在没有分区的巨大 mysql 表上优化表

> ID：10958358
> 
> 赞同：0
> 
> 时间：2012-06-09T04:28:48.710
> 
> 标签：mysql

我们有一个非常大的 Mysql 表，它是 MyISAM。每当我们运行优化表命令时，表就会被锁定并且性能会受到影响。该表不是只读的，因此创建临时表并交换它们可能无法正常工作。我们也无法对表进行分区。

有没有其他方法/工具可以在不降低性能的情况下优化表功能。任何建议都会有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:13:29.160

[http://dev.mysql.com/doc/refman/5.5/en/optimize-table.html](http://dev.mysql.com/doc/refman/5.5/en/optimize-table.html)

> 对于 InnoDB 表，OPTIMIZE TABLE 映射到 ALTER TABLE，它会重建表 (...)

因此，正如 Quassnoi 可能暗示的那样，我不希望在切换到 InnoDB 方面有任何改进。

根据定义，OPTIMIZE TABLE 需要对表进行一些独占访问，因此在 OPTIMIZE'ation 期间性能下降

不过，可能需要采取一些措施来减少 OPTIMIZE 所花费的时间，具体取决于您的表如何“巨大”：

*   如果您的表有很多字段，则您的表可能需要进行规范化。相反，您可能希望通过将列分散到几个“更窄”的表中来对表进行非规范化，并建立一对一的关系。
*   如果您的表有很多记录，请在您的应用程序代码中实现“手动”分区。一个简单的步骤是创建一个保存很少更新记录的“存档”表。这样您只需要优化一组较小的记录（非归档表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T09:32:05.053

优化表命令锁定表，它降低了性能。

你下载 percona 工具包命令来优化表。

此命令在优化表期间不锁定表。

使用以下链接：

[https://www.percona.com/doc/percona-toolkit/2.1/pt-online-schema-change.html](https://www.percona.com/doc/percona-toolkit/2.1/pt-online-schema-change.html)

# truncate - 格式化字符串以将数字截断为特定位数

> ID：10958360
> 
> 赞同：0
> 
> 时间：2012-06-09T04:29:03.950
> 
> 标签：truncate, digits, format-string

是否有将数字截断为特定位数的格式字符串？例如，任何大于 5 位的数字我都想截断为 3 位。

```
132456 -> 132
5000000 -> 500 
```

@Erik：像 %2d 这样的格式说明符是特定于一种语言的吗？我实际上想在javascript中使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:06:59.030

伪代码

```
Function returning a String, receiving a String representing a Number as a parameter
    IF the String has more than 5 characters
        RETURN a substring containing the first 3 characters.
    ELSE
        RETURN the string received as a parameter
    END IF
END Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T19:31:42.640

我假设您指的是`printf`格式字符串。我找不到任何会截断整数参数（即`%d`）的东西。但是您可以通过引用字符串格式字符串并通过指定长度来指定字符串的最大长度`"%<MinLength>.<MaxLength>s"`。因此，在您的情况下，您可以将数字参数转换为字符串，然后使用`"%3.3s"`.

# android - SurfaceView 上的 Android 软键盘

> ID：10958361
> 
> 赞同：0
> 
> 时间：2012-06-09T04:29:03.730
> 
> 标签：android

我正在尝试在我的游戏中使用 SurfaceView 上的软键盘。问题是我无法处理 onKey 事件。

我尝试在我的视图上实现 OnKeyListener，并覆盖：

```
@Override
public boolean onKey(View v, int keyCode, KeyEvent event) {
    Log.w("Key", "Key Pressed");
    return true;
} 
```

但我没有收到任何关键事件。

使用

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    Log.w("Key", "Key Pressed");
    return true;
} 
```

也不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:13:37.143

原来我必须在视图构造函数钩子上指定以下内容：

```
setFocusable(true);
setFocusableInTouchMode(true); 
```

因为输入事件只发送到焦点视图。

# c++ - 我可以使用 Python 对外部 C++ .exe 进行计时并获取它的返回值吗？

> ID：10958362
> 
> 赞同：0
> 
> 时间：2012-06-09T04:29:04.930
> 
> 标签：c++, python, time

有没有一种方法可以在 Python 程序中运行 C++ .exe 并计算返回值所需的时间（并且还能够打印以显示该程序的返回值是什么）？这些程序是 C++ 控制台程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:34:57.563

就像是

```
import subprocess
import datetime

t1 = datetime.datetime.now()
h = subprocess.Popen(...) # See subprocess module documentation for the args
h.communicate()
t2 = datetime.datetime.now()
print("Return Code: %d" % h.returncode)
print("Delta: %s" % (t2 - t1)) 
```

应该管用。

（[子流程模块文档](http://docs.python.org/library/subprocess.html)）

# c# - 从 VB UI 执行 Photoshop 动作

> ID：10958363
> 
> 赞同：-5
> 
> 时间：2012-06-09T04:29:07.643
> 
> 标签：c#, vb.net, vb6, photoshop

我是这个论坛的新手，所以如果我问任何愚蠢的问题，请原谅。

我正在尝试从 VB 界面运行 Photoshop 操作。任何机构都可以指导我如何进行。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T04:50:10.730

to interact with photoshop in c# you can see [this page](http://www.pcpix.com/Photoshop/), the simple and basic manual to scripting photoshop

# uml - 如何从 UML 2 活动图中的操作中获取多个输出？

> ID：10958368
> 
> 赞同：0
> 
> 时间：2012-06-09T04:30:01.217
> 
> 标签：uml, activity-diagram

我正在尝试在 UML 2 中绘制活动图。我有一个名为“拆分器”的操作，它获取一个对象并将其拆分为两组对象，称为 A 和 B。这些新对象在活动图中并行经历两个不同的流程. 我想知道 UML2 是否支持从一个动作中获取多个输出。如何在不使用分叉符号的情况下强调并行性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:26:25.743

活动图提供两种流：控制流和对象流。“fork”仅用于控制流。根据您的问题，您似乎在谈论对象流。对象流的 UML 表示法中没有任何类型的“并行性”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:56:49.137

您的操作可以有两个传出数据流 - 使用引脚或将两个传出链接连接到不同的对象节点。在此之后，您可以从引脚或节点启动两个不同的流程。没有必要使用叉子。

# objective-c - 启用个人热点连接会使我的 iphone 应用程序的视图变形

> ID：10958370
> 
> 赞同：1
> 
> 时间：2012-06-09T04:30:17.760
> 
> 标签：objective-c, uiviewcontroller, personal-hotspot

使用个人热点时，我的应用程序视图会失真。字段和文本、可点击的图标和图形会分开，因为状态栏下方有额外的栏。有没有办法根据显示/隐藏热点栏来调整 uiviewcontroller，或者有没有办法在我的应用程序加载时关闭/隐藏热点通知栏？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T04:57:43.667

当有人连接到个人热点或有活动电话时，状态栏的大小基本上会增加一倍。您必须确保您的视图设置了正确的自动调整大小掩码，并且您没有任何需要特定状态栏大小的硬编码。

# php - 在段落中间插入图像 从数据库检索的文本？

> ID：10958374
> 
> 赞同：-3
> 
> 时间：2012-06-09T04:30:54.587
> 
> 标签：php, mysql, html

我有一个 MySQL 表，其中有两列，分别用于文本和图像。但是，当我从数据库中检索这些列并在站点页面上显示这些列时，我需要将图像（来自图像列）放在段落文本的中间（从文本列中检索）。我有一个单独的上传器来上传图片。我正在使用文本编辑器（ckeditor），但它不允许我从计算机上传图片，所以我必须这样做。

我会感谢任何建议或帮助。

![在此处输入图像描述](../Images/68ed2b724b941fb40c3fae6824b19145.png)

content Body 有段落文本，img_location 有图片 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:07:12.073

```
<?php
 $conn = mysql_connect("localhost", "username", "password");
  if(!$conn)
  {
die('Could not connect '.mysql_error());
  }
  mysql_select_db("dbname");
  $res = mysql_query("select * from `tb_name`");
  while($v=mysql_fetch_array($res))
  {
    $name=$v['content_body'];
    $img=$v['img_location'];
    $count=strlen($name);
    for($i=0;$i < $count;$i++)
      {
       if($i == $count/2)
       echo "<img src='".$img."'/>"." ".$name[$i];
       else
       echo $name[$i];
      }
  }
 ?> 
```

# android - 使用 Gson 解析 java 中的 json 对象时出错

> ID：10958384
> 
> 赞同：0
> 
> 时间：2012-06-09T04:32:57.347
> 
> 标签：android, json, gson

我有一个这样的json字符串：

```
String result={[{"id":"2","fullname":"Course 1"},{"id":"3","fullname":"Course 2"}]} 
```

在java中，我编写了这段代码来解码那个json字符串：

```
public class Courses {
public String id,name;  
}
Gson gs = new Gson();
Type listType = new TypeToken<List<Courses>>(){}.getType();
List<Courses> listCourses= gs.fromJson(result, listType); 
```

但我总是收到错误：

> 06-09 04:21:11.614：E/AndroidRuntime(449)：原因：java.lang.IllegalStateException：这不是 JSON 数组。

我错了什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T04:44:00.297

您的 json 无效。请使用一些 jsonvalidator 检查 json 格式是否正确。要检查 json 格式，请参阅链接

[JSON格式](http://jsonformatter.curiousconcept.com/)

要从 json 中获取字符串，请参考以下链接

[AndroidJson](http://www.vogella.com/articles/AndroidJSON/article.html)

[解析 Json](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

我想它可能对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:40:58.797

你 json 字符串`Result is not valid`。[看这里](http://jsonlint.com/)有效与否

它应该是

`[ { "id": "2", "fullname": "Course 1" }, { "id": "3", "fullname": "Course 2" } ]`

```
JSONArray jsonArray = new JSONArray(result);
for (int i = 0; i < jsonArray.length(); i++) {

   JSONObject objJson = jsonArray.getJSONObject(i);
   int id = objJson.getInt("id");
   String fullName = objJson.getString("fullname");

} 
```

# javascript - Greasemonkey 的简单替代品

> ID：10958386
> 
> 赞同：16
> 
> 时间：2012-06-09T04:34:12.500
> 
> 标签：javascript, google-chrome, browser, greasemonkey

我喜欢 GM 的概念，但在实践中，除非你一直使用它并且是绝对的 JS 神，否则它是不可能使用的（也许我只是很烂？）。

如果有一个小扩展，它需要几行 JS 并在某个站点的页面加载后运行它们，那将非常有用。但这不是通用汽车所做的。使用 GM，您必须处理多个帧以及那些层层令人讨厌的安全问题和范围。即使您只是忽略正确的程序并使用 unsafewindow 或其他黑客之一，它通常仍然无法正常工作。

想出 JS 非常容易，你可以在浏览器控制台中运行它来做你想做的事情，但是当转移到用户脚本时这永远不会起作用。我可以更改greasemonkey中的任何设置或完全面向易用性的不同扩展吗？

注意：我使用 Chrome，因此对于适用于该特定浏览器的解决方案的奖励积分。

总结：我想要一种在特定页面上自动运行具有与控制台相同范围/权限的脚本的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-09T05:34:47.613

没有比 Firefox 的 Greasemonkey 或 Chrome 的自动运行用户 JS 的用户脚本更简单的替代方案了。您可以[编写自己的扩展/附加组件](http://crossrider.com/)，但没有太多意义。

如果您不关心 GM 和用户脚本提供的超棒额外功能，并且总是希望“（获取）几行 JS 并在某个站点的页面加载后（运行）它们”——忽略 iframe，那么只需使用以下代码作为所有脚本的基本模板：

```
// ==UserScript==
// @name    _Base template for simple, cross-browser, JS injection.
// @match   *://YOUR_SERVER.COM/YOUR_PATH/*
// @run-at  document-start
// ==/UserScript==

if (window.top != window.self)  //-- Don't run on frames or iframes.
    return;

function scriptMain () {
    // PUT ALL OF YOUR CODE HERE, INCLUDING ANY FUNCTIONS YOU CREATE.
    console.log ("Hello World!");
}

window.addEventListener ("load", scriptMainLoader, false);

function scriptMainLoader () {
    addJS_Node (null, null, scriptMain);
}

function addJS_Node (text, s_URL, funcToRun) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode);
} 
```

* * *

请注意，这`@run-at document-start`是必需的（对于 Chrome），但您的代码仍会在文档加载时触发。

# javascript - Jquery TimePicker：如何动态更改参数

> ID：10958387
> 
> 赞同：6
> 
> 时间：2012-06-09T04:34:22.930
> 
> 标签：javascript, jquery, jquery-ui, timepicker

我正在使用 Jquery Timepicker 。

我有两个输入字段 - 接受时间。

```
<input id="startTime"  size="30" type="text" />
<input id="endTime"  size="30" type="text" /> 
```

[根据文档](http://jonthornton.github.com/jquery-timepicker/)，我正在使用 Jquery UI 计时器

```
$('#startTime').timepicker({
    'minTime': '6:00am',
    'maxTime': '11:30pm',
    'onSelect': function() {
        //change the 'minTime parameter of #endTime <--- how do I do this ?
     }
});
$('#endTime').timepicker({
    'minTime': '2:00pm',
    'maxTime': '11:30pm',
    'showDuration': true
}); 
```

我希望当第一个 timePicker 被选中时，第二个的 'minTime' 参数会被改变。基本上我正在尝试收集某些活动的开始时间和结束时间。我希望第二个输入框显示第一个输入字段（开始时间）本身的值的选项。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T04:43:35.157

你会做这样的事情，

```
$('#startTime').timepicker({
                'minTime': '6:00am',
                'maxTime': '11:30pm',
                    'onSelect': function() {

                    $('#endTime').timepicker('option', 'minTime', $(this).val());                        
              }
            }); 
```

您在这里所做的是，在 的`onSelect`函数中`#startTime`，您将选项`minTime`的`#endTime`值设置为`#startTime`

看到这个[JS Fiddle](http://jsfiddle.net/NXVy2/1/)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-05T15:26:19.247

您可以参加 onchange 活动：

```
 $('#startTime').timepicker();

        $('#endTime').timepicker({
            'minTime': '12:00am',
            'showDuration': true
        });

        $('#startTime').on('changeTime', function() {
            $('#endTime').timepicker('option', 'minTime', $(this).val());
        }); 
```

我修改了第一个回复中发布的代码，这里是它的工作小提琴[http://jsfiddle.net/NXVy2/215/](http://jsfiddle.net/NXVy2/215/)

你也可以使用 on('change'...

```
 $('#startTime').on('change', function() {
        $('#endTime').timepicker('option', 'minTime', $(this).val());
    }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T04:55:29.690

jQuery-UI 小部件通常支持一种`options`允许您更改现有实例上的选项的方法。通过提供一个字符串作为插件调用的第一个参数来调用小部件方法：

```
$(...).widget_name('method_name', arg...) 
```

所以这应该适合你：

```
$('#endTime').timepicker('option', 'minTime', new_min_time) 
```

# random - 使用随机数生成的相对概率

> ID：10958388
> 
> 赞同：1
> 
> 时间：2012-06-09T04:34:39.723
> 
> 标签：random, probability

如果我有事件 A、B、C 发生的相对概率。

即 P(A) = 0.45, P(B) = 0.35, P(C) = 0.20,

如何使用 0 到 1 之间的随机数生成器来表示这一点？

即 R = rand(0,1)

```
if (R < 0.45)
   event A

else if(R < 0.35)
  event B

else if(R < 0.20)
  event C 
```

以上适用于两个事件 A，B 但我认为以上对于三个或更多事件是错误的，因为存在重叠。

这显然是一个非常简单的问题，答案应该立即显而易见，但我太愚蠢了，看不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T04:39:19.543

您必须将概率相加。我正在展示明确`if/then`的陈述，但是很容易在带有循环的数组中使用概率来做到这一点，因此它可以是非常动态的。请注意，顺序无关紧要。

```
if (R < 0.45)
   event A

else if(R < 0.45 + 0.35) // R < 0.80
  event B

else // (R must necessarily be < 0.45 + 0.35 + 0.20, or 1) 
  event C 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T04:40:36.707

您应该具备以下条件：

```
if(R < 0.45)
    Event A
else if(R < 0.80)
    Event B
else
    Event C 
```

# c# - 下拉列表按钮不匹配 ie 和 mozilla

> ID：10958391
> 
> 赞同：0
> 
> 时间：2012-06-09T04:34:59.567
> 
> 标签：c#, asp.net, css, web-controls

我的下拉列表按钮有问题..按钮看起来很奇怪..

这是图片：http: [//imgur.com/9zHNM](http://imgur.com/9zHNM)

**HTML**标记：

```
<td class="style 4">
    <select name="ctl00$ContentPlaceHolder1$ucPromotions1$ddlCompany"     
        id="ctl00_ContentPlaceHolder1_ucPromotions1_ddlCompany" 
        style="height:25px;width:167px;">
</td> 
```

**CSS**标记：

```
.style4
{
    width: 185px;
} 
```

可能是什么问题呢？

**编辑：**问题已解决，这是我的 CSS 中选择的填充

我已经用这种风格解决了

```
<td class="style 4">
    <select name="ctl00$ContentPlaceHolder1$ucPromotions1$ddlCompany"     
    id="ctl00_ContentPlaceHolder1_ucPromotions1_ddlCompany" 
    style="height:25px;width:167px;padding:0 0;padding-top:0;paddingright-:0;padding- bottom:0;padding-left-value:0; ">
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:02:49.983

您的 CSS 属性`.style4`不会有任何影响，因为您已将 class 属性值设置为`style 4`. 删除空格:)

顺便说一句：您的 HTML 有一些错误。

这是有效的：

```
<td class="style4">
    <select name="ctl00$ContentPlaceHolder1$ucPromotions1$ddlCompany" id="ctl00_ContentPlaceHolder1_ucPromotions1_ddlCompany" style="height:25px;width:167px;">
        <option value="one">ONE</option>
        <option value="two">TWO</option>
        <option value="three">THREE</option>
    </select>
</td> 
```

不允许仅用于 CSS 类和 ID 的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:53:48.160

It's kinda hard to help you without a living demo but, what if you adjust the same style on the class `.style4` and the style of the `select`?

Set them both at `width: 185px;` for example.

Hope it helps!

# javascript - 寻找一种在 Three.js 中的球体上的两点之间画线的方法

> ID：10958395
> 
> 赞同：2
> 
> 时间：2012-06-09T04:36:28.170
> 
> 标签：javascript, three.js

我的应用程序（飞行跟踪器）需要使用 Three.js 在球体（地球）上沿表面（即大圆路线）的两点（例如城市）之间画一条线。

我可以想到 2 种方法 - (a) 使用一组（足够的）我手动计算的点创建 Three.js 'Line'，以及 (b) 在球体加载后但之前将线条写入我用于球体的纹理中将其应用为纹理。

我可以看到两者都有问题（甚至不确定 (b) 在 Three.js 中是否可行） - 有人想出更好的方法或有意见吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:32:05.250

您使用许多粒子来创建一种虚线。

# html - 比放置广告更好的元素

> ID：10958410
> 
> 赞同：6
> 
> 时间：2012-06-09T04:40:44.367
> 
> 标签：html, markup, semantic-markup

[当我在Mozilla Publisher Network](https://developer.mozilla.org/en/Sections_and_Outlines_of_an_HTML5_document)上读到这篇文章时，我真的很兴奋：

> 在 HTML4 中，每个部分都是文档大纲的一部分。但是文档通常不是那么线性的。一个文档可以有特殊的部分，其中包含不属于主要流程的信息，尽管它与主要流程相关，例如**广告块**或解释框。HTML5 引入了**`<aside>`允许这些部分**不成为主要大纲的一部分的元素。

[当我在HTML5 Doctor](http://html5doctor.com/understanding-aside/)上遇到这个问题时，我同样觉得自己胜过了：

> 导航、广告、搜索框、博客卷等与文章没有直接关系，因此不能证明使用 `<aside>`.

因此，经过一番谷歌搜索后，我意识到人们意见不一。有些人同意使用`<aside>`广告等内容，但其他人则不同意。

**核心问题：**我正在建立一个技术博客，从一开始，我就希望页面（包括文章）是全角的。这让我几乎没有机会在其中放置广告（Google 真的不喜欢文章内容之间的“广告”）。

当我遇到这个`<aside>`元素时，我以为我挖到了一座金矿，直到我看到关于它用于广告的不同意见。

所以，问题是，有知识的人能否解释一下是否可以`<aside>`用于广告？此外，是否有任何语义替代方案（元素或标记）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-09T08:31:04.070

这[是规范所说的](http://dev.w3.org/html5/spec/the-aside-element.html#the-aside-element)：

> Aside 元素表示页面的一部分，该部分由与 Aside 元素周围的内容相切相关的内容组成，并且可以被认为与该内容分开。这些部分通常在印刷排版中表示为侧边栏。
> 
> 该元素可用于排版效果，如拉引号或侧边栏、广告、导航元素组以及被视为与页面主要内容分开的其他内容。

撇开第二段中特别提到广告是可以的这一事实不谈，混乱的根源很明显。两段略有矛盾。

第一段声明它应该用于与主要内容**相关** *并被* **视为独立于**主要内容的内容。

第二段仅要求将内容与主要内容**分开考虑。**

我怀疑这种混淆是通过选择具有“切向相关”英文内涵的“aside”名称而引起的，而替代元素的名称被拒绝，即“sidebar”则没有。

我不完全确定为什么“侧边栏”被拒绝，但可能它被认为过于形象化且语义不足。不幸的是，在选择“aside”时，作者引入了并非真正有意且无用的语义。

幸运的是，在这种情况下，我们不需要破译这个矛盾。广告被特别指出适合，`<aside>`因此问题得到明确解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T04:56:50.797

在我还在等待答案的同时，我找到了一个权威来源 W3，[指出其中](http://www.w3.org/wiki/HTML/Elements/aside) `<aside>`可能包含广告。

> 内容示例
> 
> *   拉引号
> *   侧边栏
> *   **广告**
> *   导航元素组
> 
> 等其他被认为与页面主要内容分开的内容。

**更新：**在他们关于使用 'aside' 元素的文章的修订版中，[HTML5 Doctor 指出](http://html5doctor.com/aside-revisited/)：

> 有了 的新定义`aside`，了解其上下文至关重要。当***在***一个`article`元素中使用时，内容应该与该文章特别相关（例如，词汇表）。当 在元素***之外***使用时`article`，内容应该与站点相关（例如，博客、附加导航组，如果内容与页面相关，甚至是广告）。

不幸的是，我不明白他们是如何得出这个结论的，因为 HTML5 规范`aside`并没有明确说明任何内容。

事实上，从我上面引用的内容来看，我相信如果`aside`在一篇文章中可以包含拉引号，那么他们也可以做广告（W3C 没有专门区分他们的用例，我相信他们会，如果必须这样的话） .

***PS：**我已经联系了HTML5 Doctor，如果我得到回复，我会更新我的答案。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T05:33:27.460

`aside`这是我遇到的最相关的结论：

> 当`aside`在`article`. 请记住，除此之外——更一般地说，次要内容——并不一定意味着“侧边栏”。内容的风格不应决定元素的使用。对于不是文章（或页面）的主要焦点但仍与文章（或页面）相关的内容，无论其视觉设计如何，您都需要放在一边。

参考：[http ://html5doctor.com/aside-revisited/](http://html5doctor.com/aside-revisited/)

基本上，这取决于您是在内部`article`还是外部使用它。除了做广告的最佳选择之外……我就是这么读的。

# ruby - 为什么 sinatra-redirect-with-flash gem 不适用于霰弹枪？

> ID：10958412
> 
> 赞同：2
> 
> 时间：2012-06-09T04:40:50.113
> 
> 标签：ruby, sinatra, haml, shotgun

我想使用[`sinatra-redirect-with-flash`](https://github.com/vast/sinatra-redirect-with-flash)gem 显示 Flash 消息。

这是我的红宝石代码：

```
require 'sinatra'
require 'sinatra/base'
require 'sinatra/flash'
require 'sinatra/redirect_with_flash'
require 'data_mapper'
require 'haml'
require 'builder'

# ...

class App < Sinatra::Base
  enable :sessions
  register Sinatra::Flash
  helpers Sinatra::RedirectWithFlash
  use Rack::MethodOverride

  get '/' do
    @notes = Note.all :order => :id.desc
    @title = 'All TODOs'
    if @notes.empty?
      flash.now[:error] = 'No TODOs found. Add your first below.'
    end
    haml :home
  end

  post '/' do
    n = Note.new
    n.content = params[:content]
    n.created_at = Time.now
    n.updated_at = Time.now
    if n.save
      redirect '/', :notice => 'TODO saved successfully.'
    else
      redirect '/', :error => 'Failed to save TODO.'
    end
  end

  # ...

end 
```

并且`views/layout.haml`是：

```
!!! 5
%html{:lang => "en"}
  %head
    %meta{:charset => "utf8"}
  %body
    %header
      %hgroup
        %h1
          %a{:href => "/"}= SITE_TITLE
        %h2= SITE_DESCRIPTION
    #main 
      =styled_flash
      =yield 
```

成功添加 TODO 后，我希望`'TODO saved successfully.'`在主页上看到 flash 消息。但是当我使用`shotgun`. `ruby app.rb`当我运行或运行时，Flash 消息显示得很好`rackup`。

我怎么解决这个问题？

当我使用`shotgun`. 在`get '/'`方法中，如果我使用`flash[:error]`而不是`flash.now[:error]`，则 Flash 消息不会显示在页面上。

我正在修改[本教程](http://net.tutsplus.com/tutorials/ruby/singing-with-sinatra-the-encore/)，但我提出了一些不同之处：

*   `erb`->`haml`
*   经典 Sinatra 应用程序 -> 子类化`Sinatra::Base`
*   `rack-flash`->`sinatra-flash`

[你可以在这里](https://github.com/philipjkim/sinatra-quickstart)浏览整个代码。

感谢您的任何回答/评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:41:33.623

每次请求后，[霰弹枪宝石](https://github.com/rtomayko/shotgun)都会重新加载 Sinatra。自述文件说：

> 每次收到请求时，它会分叉，在子进程中加载​​应用程序，处理请求，然后退出子进程。结果是在每个请求上干净、应用程序范围内重新加载所有源文件和模板。

因此，您将需要某种机制来保留请求之间的状态，而不依赖于存储在每个子进程中的数据。

# c++ - 什么是解码像 FAST 这样的数据协议的快速方法，其中数据以字节编码，位作为存在标志？

> ID：10958417
> 
> 赞同：1
> 
> 时间：2012-06-09T04:41:19.937
> 
> 标签：c++, c, bit-manipulation, binary-data, fast-protocol

像 FAST 这样的数据编码协议非常巧妙地减少了需要发送的数据量。基本上一个得到一个 char*，将前几个字节作为整数读取会给你一个 id 号，它指向你如何解码其余字节的指令（即它告诉你其余的字节是，例如，reverseivley an int，一个字符串、一个无符号整数、另一个无符号整数、一个嵌套消息等）和接下来的几个字节（在每一位中）告诉你后续字段是否存在。每个字节中的第 8 位保留用于表示数据之间的边界。

如果没有位操作（ands、ors、移位、位检查）的线性遍历，解码这样的协议似乎是不可能的……有没有办法更快地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T04:47:52.583

我认为您不会找到比刚才描述的更快的技术或方法。此类协议旨在按顺序解析它们。继续搜索的唯一原因是找到一种更方便的数据处理方式。

据我所知，有以下三种方式：

*   只需按照下面的说明进行操作
*   使用具有[二进制解析器](http://www.boost.org/doc/libs/1_49_0/libs/spirit/doc/html/spirit/qi/reference/binary.html)的低级框架，例如[Boost::Spirit](http://www.boost.org/doc/libs/1_49_0/libs/spirit/doc/html/index.html)。
*   尝试使用现成的库：例如[QuickFAST——](https://code.google.com/p/quickfast/)本机 C++ 和 .NET 的 FAST 协议实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T21:17:37.257

> 如果没有位操作（ands、ors、移位、位检查）的线性遍历，解码这样的协议似乎是不可能的……有没有办法更快地做到这一点？

FAST 协议使用停止位方法对值进行编码，换句话说，它按顺序逐字节解析，直到遇到第 8 位设置为 1 的字节。这样做会在每个字节中丢失一点，但总体而言，它是编码许多不同字段的快速方法，而无需在它们之间使用分隔符字节。

看看[这篇关于](http://www.coralblocks.com/index.php/2014/10/fast-support-with-coralfix/)[CoralFIX](http://www.coralblocks.com/index.php/category/coralfix/)的 FAST 支持的文章。它有一个从交换 XML 模板文件生成的 FAST 解码器的 Java 代码示例。

**免责声明：**我是 CoralFIX 的开发者之一。

# java - 结束线程的执行而不使用它的 stop() 方法

> ID：10958422
> 
> 赞同：0
> 
> 时间：2012-06-09T04:42:04.480
> 
> 标签：java, multithreading

我有一个带有按钮的 Swing 表单，当单击该按钮时开始`SocketServer`监听单独线程中的传入请求。以下是我拥有的课程结构。

*   `MainForm`：这是我的主要课程，它启动了 Swing Form。它有两个按钮，“启动服务器”和“停止按钮”。
*   `MySocketServer`：这个类是`SocketServer`对象存在的地方，它有方法`startServer()`和`stopServer()`.

**以下是开始按钮的点击事件正文。**

```
t = new Thread(new Runnable() //Object t is created globally in this main class.
{
    public void run()
    {
        myss = new MySocketServer(); //Object myss has similar accessibility as t.
        myss.startServer();
    }
});
t.start(); 
```

**以下是停止按钮的点击事件主体**

```
myss.stopServer();
if(t.isAlive());
    System.out.println("Thread is still alive!!"); 
```

虽然我可以根据需要切换 SockeServer “开始”和“停止”，但我意识到每次启动服务器时，都会创建新线程并且即使使用`MySocketServer`'s 方法停止服务器，它仍然保持活动状态。

我可以使用`stop()`和`Thread`停止线程执行，但由于它已被贬值，而且我研究过线程在其`run()`方法完全执行后就会结束，但我将`startServer()`方法分开，以便它可以单独处理连接的客户端。

请注意，`startServer()`有 While-Listen 循环，因此`run()`线程方法本质上处于无限执行状态，直到我显式调用`stopServer()`并停止循环。

在这里可以做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:43:32.030

首先，您不要尝试使用`Thread.stop()`. 这是潜在的危险。

那你该怎么办？

一种可能性可能是像这样编写您的服务器线程：

```
 ....
    ServerSocket ss = new ServerSocket(...);
    try {
       while (keepGoing) {
           Socket s = ss.accept(...);
           try {
               // do stuff
           } finally {
               // close socket
           }
       }
    } finally {
       // close the server socket
    } 
```

并`stopServer`清除`keepGoing`标志。但问题是，当线程在调用中被阻塞时，通常会停止`accept`，并且没有什么可以解除阻塞。

另一种可能性可能是调用`Thread.interrupt()`线程。这会导致某些事情解除阻塞并引发异常，但我认为它不会解除阻塞`accept()`调用。（但是，如果“做事”部分需要中断，这仍然比设置标志更好。）

真正的解决方案（我认为）是关闭`ServerSocket`. 这将导致`ss.accept()`调用解除阻塞并引发异常，您需要在服务器线程中处理该异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:26:43.960

你不应该使用 stop()。看看这个[http://docs.oracle.com/javase/1.4.2/docs/guide/misc/threadPrimitiveDeprecation.html](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/threadPrimitiveDeprecation.html) 带有无限循环和启动/停止标志的解决方案很简单，但会导致 CPU 时间的使用无效. 更好的方法是使用等待/通知方法。您使用 MySocketServer 操作的方式让我觉得您在 startServer() 中还有其他无限循环。这就是为什么你必须阻止它。最好在内部将此循环包装到它自己的线程中，并使启动/停止方法以等待/通知方式在此线程状态下运行。忘了提一下，当你的 GUI 在它自己的线程中运行时，你不能在 MySocketServer 中转义启动/停止标志，因为在 GUI 线程中使用 wait() 会使它挂起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T05:24:00.003

在 while 循环中的 MySocketServer 类中，您需要一个标志来测试它是否应该继续运行。

在您新添加的关闭方法中，设置线程中的循环将测试的标志。一旦循环中断并且 run() 返回，线程将结束。

# php - Php 数组爆炸、内爆、洗牌

> ID：10958423
> 
> 赞同：0
> 
> 时间：2012-06-09T04:42:20.403
> 
> 标签：php, arrays

我想做一个非常快速的函数来创建一个随机段落。

所以我想，最好的方法是采用现有的，爆炸，洗牌和内爆。

```
 $content = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation .';

   $content = explode(" ", $content);
   shuffle ($content);
   $content = implode(" ", $content); 
```

它有效，但它在我脑海中产生了 2 个问题。

1 - 为什么这不起作用：？

```
 $content = explode(" ", $content);
   $content = shuffle ($content);
   $content = implode(" ", $content); 
```

这确实有效：

```
 $content = explode(" ", $content);
   shuffle ($content);
   $content = implode(" ", $content); 
```

2 - 如何随机定义要从数组中删除的单词数

（为了创建一个随机长度/字数？）

** 更新我 **

首先，感谢所有评论的答案！

我最终得到了这个：

```
 $content = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. 

 Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?

   ';
   $rand_y = rand(1, 5);// rand number for the loop
   for ($b=1; $b<=$rand_y; $b++) { // repeat random times (to create paragraphes)
   $content = explode(' ', $content);
   $count = count($content) ; // word count - otherwise can return error
   $rand_x = rand(40,$count); // min 20 words , max = word count in paragraph
   $rnd = array_rand($content, $rand_x); // answer from @bsdnoobz
   $content = implode(' ', array_intersect_key($content, array_flip($rnd)));
} 
```

1-我添加了count（），因为如果没有它，如果rand数大于字数，我可能会收到错误。

> “第二个参数必须介于 1 和数组中的元素数之间”

（实际上奇怪的是 PHP 不会自动忽略这样的错误 - 但没关系。）

2-我没有找到一种简单的方法来添加段落分隔符（回车符或换行符）来创建多个 . 所以我使用了一个简单的*“for”*循环。事实证明，在 $content$ 本身中添加回车是可行的！**（我想知道为什么，我认为它被算作数组的一部分！）**

无论如何 - 我知道这是一种原始方式，而不是许多 php 大师会选择的方式， - 但我学到了很多，这是最重要的 - 感谢所有人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T04:54:50.437

`shuffle()`将随机化数组参数，但它返回一个布尔值。您可以使用[`array_rand()`](http://php.net/array_rand)从数组中选择一个或多个随机条目。

```
$content = explode(' ', $content);
$rnd = array_rand($content, 5);
$content = implode(' ', array_intersect_key($content, array_flip($rnd))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T17:37:00.587

这就是我所说的关于`array_filter()`.

```
<?php
$content = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. 

 Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?';

function drop_word($word)
{
    $drop_percent = 20;  # I want there to be a 20% chance that I drop the word.
    if(rand(0,99) < $drop_percent)
    {
        printf("Dropping %s\n", $word);
        return false;           # Drop the word by returning false
    }
    else
    {
        return true;            # Keep the word by returning true
    }
}

$word_array  = explode(" ", $content);

shuffle($word_array);   # $word_array is now shuffled
printf('$word_array has %d elements.'."\n", count($word_array));
$filtered_word_array = array_filter($word_array, "drop_word");
printf('$filtered_word_array has %d elements.'."\n", count($filtered_word_array));
$filtered_content = implode(" ", $word_array);
echo "\n";
echo "New paragraph:\n";
echo $filtered_content;

/*
== OUTPUT ==

$word_array has 199 elements.
Dropping exercitation
Dropping dolore
Dropping molestiae
Dropping sint
Dropping enim
Dropping dolorem
Dropping est,
Dropping ipsum
Dropping laboris
Dropping eu
Dropping aut
Dropping ipsa
Dropping consequatur,
Dropping nisi
Dropping cupidatat
Dropping aut
Dropping Nemo
Dropping fugiat
Dropping amet,
Dropping enim
Dropping proident,
Dropping ut
Dropping labore
Dropping irure
Dropping fugiat
Dropping magni
Dropping consequat.
Dropping quia
Dropping fugit,
Dropping voluptatem
Dropping ea
Dropping Ut
Dropping Neque
Dropping anim
Dropping sed
Dropping laborum.
Dropping in
Dropping exercitationem
$filtered_word_array has 161 elements.

New paragraph:
aperiam, adipisci deserunt eiusmod veniam, voluptas dolor tempora exercitation mollit adipisicing numquam est voluptatem. sit Duis porro sit nulla voluptatem ab dolore molestiae sint beatae tempor natus totam enim quisquam dolorem laboriosam, dicta est, in ipsum qui laboris unde id sed incidunt ea reprehenderit quae nihil autem accusantium nesciunt. vel ea quaerat qui ut ex ratione sequi Lorem pariatur? suscipit eu enim Ut quo aut dolor ut sit pariatur. aspernatur quasi commodo ut ipsa consequatur, ipsam aute quia quia qui sunt elit, nisi sed cupidatat iste aliquid esse nisi labore consectetur, iure modi esse velit et doloremque ad quia aut velit, ipsum consequuntur Quis ut eum Nemo nulla eum illo cillum ullamco fugiat ullam dolore qui minima in voluptas amet, rem Excepteur enim proident, quam ad et qui consectetur ex dolore ut dolores quis eius velit aliqua. magna reprehenderit nostrud occaecat labore inventore in eos irure aliquam sit architecto fugiat magni consequat. incididunt quia fugit, illum aliquip corporis Sed voluptatem sunt eaque non error omnis ea Ut vel Neque culpa voluptate dolorem minim anim do nostrum odit sed veniam, perspiciatis laborum. amet, veritatis non explicabo. voluptate officia dolor quis consequatur? voluptatem commodi et in 

 vitae exercitationem magnam laudantium,
 */ 
```

我留下了回调函数，`drop_word()`为了便于理解而写得很详细。另外，我发表了一些`printf()`声明来说明发生了什么。如果你真的要做这样的事情，你会想要删除那些。

此外，这是另一种可能更容易的方法：

```
<?php
$content = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. 

 Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?';

$drop_percent = 0.2;    # A decimal number representing the percentage of words you want to drop
                        # 0.2 = 20% (Must be between 0.0 and 1.0)

$word_array  = explode(" ", $content);

shuffle($word_array);   # $word_array is now shuffled
printf('$word_array has %d elements.'."\n", count($word_array));
$filtered_word_array = array_slice($word_array, 0, count($word_array) * (1-$drop_percent));
printf('$filtered_word_array has %d elements.'."\n", count($filtered_word_array));
$filtered_content = implode(" ", $word_array);
echo "\n";
echo "New paragraph:\n";
echo $filtered_content;

/*

== OUTPUT ==

$word_array has 199 elements.
$filtered_word_array has 159 elements.

New paragraph:
et ratione exercitationem eaque consequatur, labore ea ea fugiat ullamco illum ab numquam quia ut eum voluptatem. nulla consequatur? vitae qui non nesciunt. ipsum ad incidunt voluptatem inventore enim consequat. in incididunt voluptatem eos ipsam minima laboris Nemo ut quia quia in sit quam sunt est cillum ea reprehenderit dolor aspernatur voluptas in aut sit nisi adipisci et nostrum anim dolore perspiciatis magni doloremque qui laudantium, labore id amet, eius voluptas Lorem officia esse autem tempora ex omnis do dolore consectetur, iste Ut laborum. laboriosam, natus aliquid dolor amet, velit sed nihil sit cupidatat non porro minim vel sequi adipisicing aut quo quae dolorem irure enim culpa ut quaerat est, qui nulla ullam veniam, sed quasi consequuntur in veniam, occaecat molestiae fugiat quia qui iure veritatis architecto ad voluptate magna suscipit voluptate et vel accusantium modi dolorem pariatur. ex aliquip explicabo. tempor quis beatae velit commodo magnam sit aliquam sint illo error unde aliqua. dolor nisi sunt eum Ut consectetur 

 aperiam, qui Quis exercitation aute voluptatem eu odit nostrud sed elit, Neque corporis eiusmod ut quisquam esse ut ipsum quis ipsa pariatur? Excepteur velit, dolores reprehenderit deserunt Duis rem proident, totam Sed dicta enim commodi fugit, mollit dolore

 */ 
```

两者的主要区别在于，对于第一个，每个单词都有 20% 的机会被丢弃，这可能导致每次运行时输出数组的长度不同。有可能（尽管不太可能）不会丢弃任何单词。

使用第二个，消除了 20% 的单词。这是肯定的。其中 20% 将取决于随机改组，但 20% 将始终被丢弃，从而导致每次输出数组的长度相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T04:46:03.013

1.  因为`shuffle`接受一个数组的引用，并返回一个布尔值。

2.  你可以`rand()`用来获取一个随机数。

# php - PHP SQL 显示图像

> ID：10958429
> 
> 赞同：2
> 
> 时间：2012-06-09T04:44:18.580
> 
> 标签：php, mysql, sql

我编写了一个 php 代码来显示所有图像。但是代码中有问题，我无法修复它。这是一种语法错误，但我已经浪费了几个小时并且仍然混淆了“quotes（'）”......这是我的php代码：

```
while($row = mysql_fetch_array($display_query)){
    print "<tr><td>".$row['itemid']."</td><td><img src="resources/wh/'.$row['itemid'].'.png"/></td><td>".$row['description']."</td><td>";
    print "&#8377;".$row['cost']."</td></tr>";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T04:47:47.070

```
"<tr><td>".$row['itemid']."</td><td><img src="resources/wh/'.$row['itemid'].'.png"/></td><td>".$row['description']."</td><td>"; 
```

应该

```
"<tr><td>".$row['itemid'] . '</td><td><img src="resources/wh/'.$row['itemid'].'.png"/></td><td>'.$row['description']."</td><td>"; 
```

但是混合`'`并使`"`您的代码变得一团糟，您可以使用[HEREDOC](http://en.wikipedia.org/wiki/Here_document#PHP)使其更具可读性。

```
while($row = mysql_fetch_array($display_query)){
  echo <<<EOF
<tr>
    <td>{$row['itemid']}</td>
    <td><img src="resources/wh/{$row['itemid']}.png"/></td>
    <td>{$row['description']}</td>
    <td>&#8377;{$row['cost']}</td>
</tr>
EOF;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T04:59:10.907

您的字符串和引号连接不正确。试试这个 -

```
while($row = mysql_fetch_array($display_query)){
    print "<tr><td>" . $row['itemid']."</td><td><img src=" . 'resources/wh/' .$row['itemid']. ".png'/></td><td>".$row['description'] . "</td><td>";
    print "&#8377;".$row['cost']."</td></tr>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T06:52:30.130

最简单的解决方案是在您的代码中进行适当的标记。

正确的代码是：

```
print "<tr><td>".$row['itemid']."</td><td><img src='resources/wh/".$row['itemid'].".png'/></td><td>".$row['description']."</td><td>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-26T10:14:01.100

从 db 我们得到 rating $number=$row->rating 的列值；

如果我们想将图像打印为表格行中的评分值，那么

```
 $number=$row->rating   ;   
 $middle="";
 $first="<td width='200' align='left'>";
  for($x=1;$x<=$number;$x++) {

   $middle=$middle.img($fullimage_properties);  
}

if (strpos($number,'.')) {
    $middle=$middle.img($halfimage_properties); 
    $x++;
}
while ($x<=5) {
    $middle=$middle.img($blankimage_properties);    ;
    $x++;
}

echo $last=$first.$middle."</td>"; 
```

# jquery - 如何使用 jQuery 在文本框中放置 HTML 内容？

> ID：10958430
> 
> 赞同：0
> 
> 时间：2012-06-09T04:44:56.733
> 
> 标签：jquery, asp.net, asp.net-mvc-3

我正在将一个 json 对象从控制器传递到包含`html`内容的视图。我需要将此内容放在文本框中。

```
$("#t").attr("value", res); 
```

我尝试了上述方式，但内容没有被放置。这里`#t`是`textbox id`。我什至尝试了下面的方法，但没有运气

```
$("#t").val($(this).html()); 
```

谁能给我提供有关如何将内容动态放入文本框区域的示例或示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:50:10.363

假设您有以下 HTML 代码：

```
<input type="text" id="my_txt" /> 
```

假设你已经包含了 jQuery 库文件，你可以像这样设置输入的值：

```
$("#my_txt").val("This is now the value"); 
```

如果您正在使用一些返回的 JSON，您可以简单地将其转储到输入中，如下所示：

```
var returned_json;
$("#my_txt").val(returned_json); 
```

# git - 无法推送到转移的存储库：“远程端意外挂断”

> ID：10958431
> 
> 赞同：3
> 
> 时间：2012-06-09T04:45:19.277
> 
> 标签：git, github, repository

我将存储库的所有权转让给了我拥有所有权的组织。但是，现在我无法推送到存储库。我收到此错误：

```
$ git push origin master
ERROR: Repository not found.
fatal: The remote end hung up unexpectedly 
```

为了能够再次推送，我需要采取哪些步骤。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-09T18:17:32.080

您是否调整了遥控器以反映回购现在的位置？

`git remote -v`

将显示所有遥控器及其 URL，并且

`git remote set-url origin git@github.com:[organisation]/[repo].git`

如果它们已过时，是更新它的语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T04:54:46.727

[根据此页面](https://help.github.com/articles/what-are-the-different-access-permissions)，管理员似乎不会自动获得对组织存储库的访问权限。尝试将 repo 添加到您所属的团队中。

# web-services - 如何在 sencha 中动态创建列表并将它们添加到导航视图？

> ID：10958432
> 
> 赞同：0
> 
> 时间：2012-06-09T04:45:37.137
> 
> 标签：web-services, sencha-touch, extjs, sencha-touch-2

如何在 sencha 中动态创建列表并将它们添加到导航视图？我正在进行网络服务调用以获取文件夹列表。当我单击任何文件夹时，它应该显示列表中存在的子文件夹。子文件夹可能是也可能不是其中的文件夹。有子文件夹时如何创建列表？我想导航回来，所以我必须将所有这些添加到导航视图中。请让我看一段代码，解释如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:43:52.750

以我的经验：

*   最简单的方法：只需使用**Ext.NestedList**。如果你使用这个组件，有几件事需要注意。我们先看看文档：

[http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.NestedList](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.NestedList)

和一个很好的例子：

[http://sencha-nested-list.heroku.com/](http://sencha-nested-list.heroku.com/)

*   推荐方式：使用几个**Ext.List**。我的意思是您首先创建“最外层”文件夹列表，然后捕获事件`listitemtap`并呈现显示子文件夹的适当列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:38:21.877

创建商店实例：

```
 var instanceStore = Ext.create(
            'Project.store.MyListStore');
        store.each(function (record) {
            instanceStore.add(record);
        }); 
```

动态创建列表：

```
 var ListDetails = Ext.create(
                    'Project.view.NavigationList', {

                        items:[

                        ],
                        itemTpl:new Ext.XTemplate(workItemListTpl),
                        store:instanceStore
                    }); 
```

创建一个导航视图面板并将列表推送到视图中：

```
 var panelId = Ext.getCmp('NavigationViewPanel');
 panelId.push(ListDetails ); 
```

这种方法对我有用，可以创建列表并将它们动态添加到同一个导航视图中。

# c++ - Dir ( python ) like C++ 中的实用程序

> ID：10958436
> 
> 赞同：1
> 
> 时间：2012-06-09T04:46:52.037
> 
> 标签：c++, gdb

> **可能重复：**
> [如何向 C++ 应用程序添加反射？](https://stackoverflow.com/questions/41453/how-can-i-add-reflection-to-a-c-application)

就像在 python 中一样，我们有 dir() 来列出对象的所有属性/函数/成员，有没有办法让 C++ 对象在 gdb 或其他一些实用程序中获取所有成员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T05:27:47.297

C++ 没有提供实现这一点的内置机制。[Keith Randall 指出的讨论](https://stackoverflow.com/questions/41453/how-can-i-add-reflection-to-a-c-application)似乎很好地涵盖了这个主题。

`gdb`可以为您提供对象的数据成员，但您需要有一个对象实例来引用，并且`print a`如果全局名称是`a`. 要查找方法，您可以使用`info functions A::*`，如果类名是`A`。这将找不到内联函数（`baz_inline`示例中的注释）。

```
class A {
public:
    void foo ();
    int bar (int);
    void baz_inline () {}
    double d;
    short p;
};
A a;
void A::foo () {}
int A::bar (int) { return 0; }
int main () {}

$ g++ -g c.cc
$ gdb a.out
(gdb) p a
$1 = {d = 0, p = 0}
(gdb) p &a.d
$2 = (double *) 0x600920
(gdb) p &a.p
$3 = (short *) 0x600928
(gdb) info functions A::*
All functions matching regular expression "A::*":

File c.cc:
int A::bar(int);
void A::foo();
(gdb) quit 
```

最初，我在考虑中间件，因为有些中间件技术可以部分满足您的需求。在那里，C++ 类以元语言（IDL - 接口定义语言）定义，中间件工具通过解析类的 IDL 描述生成 C++ 类定义。这样做的一个目的是允许生成的代码了解如何打包该类型的对象，将其传递到另一台机器，在该机器上解包，并让该机器上的软件使用该对象。

您没有描述过这样的需求，但您想要类似的功能，因为您想了解 C++ 接口及其数据成员。既然你说 python 已经有这个功能，我想编写你自己的小工具，使用 python 代码作为你的 IDL 可能很容易。也就是说，您创建了一个您实际上想要成为 C++ 对象的 python 对象，并且您的工具将`dir()`生成 C++ 头文件的结果来表示该对象。您可以查询对象的 python 版本（带有嵌入式 python）以获取您想了解的有关 C++ 对象的信息。

# c++ - 如何将 std::string 转换为 C 风格的字符串

> ID：10958437
> 
> 赞同：3
> 
> 时间：2012-06-09T04:47:05.753
> 
> 标签：c++, string, cstring, stdstring

我正在用 C++ 编程。

像这个问题一样基本，我似乎无法在任何地方找到答案。所以这里是问题：

我想创建一个 C 风格的字符串，但是我想将一个整数变量 i 放入字符串中。所以很自然地，我使用了一个流：

```
stringstream foo;
foo
                << "blah blah blah blah... i = " 
                << i
                << " blah blah... "; 
```

但是，我需要以某种方式获取 C 风格的字符串以传递给函数（结果 foo.str() 返回一个 std::string）。所以从技术上讲，这是一个由三部分组成的问题——

1) 如何将 std::string 转换为 C 风格的字符串？

2) 有没有办法从字符串流中获取 C 风格的字符串？

3）有没有办法直接使用C风格的字符串（不使用stringstreams）来构造一个带有整数变量的字符串？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-09T04:55:58.793

> 1) 如何将 std::string 转换为 C 风格的字符串？

只需调用`string.c_str()`即可获得`char const*`. 如果你需要一个*可变*的_C-style_ 字符串然后复制一份。只要您不调用任何*非 const*函数，返回的*C 字符串*就有效。*`string`*

 *> 2) 有没有办法从字符串流中获取 C 风格的字符串？

有，简单地说`strstream.str().c_str()`。返回的*C 字符串*仅在包含它的表达式结束之前有效，这意味着将其用作函数参数是有效的，但不能存储在变量中以供以后访问。

> 3）有没有办法直接使用C风格的字符串（不使用stringstreams）来构造一个带有整数变量的字符串？

有*C方式*，使用`sprintf`等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T04:58:30.443

你已经成功了一半。你需要`foo.str().c_str();`

1.  `your_string.c-str()`-- 但这并没有真正转换，它只是为您提供一个指向缓冲区的指针，该缓冲区（临时）包含与字符串相同的内容。
2.  是的，以上，`foo.str().c_str()`。
3.  是的，但通常最好避免此类事情。你基本上会陷入“真正的程序员可以用任何语言编写 C”的陷阱。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-09T04:57:27.617

1.  这真的很简单

    ```
    #include <afx.h>
    std::string s("Hello");
    CString cs(s.c_str()); 
    ```

2.  不

3.  你可以使用[sprintf](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)来格式化一个 c 风格的字符串*

# c - 使用命名管道和信号量的两个进程之间的通信

> ID：10958438
> 
> 赞同：-1
> 
> 时间：2012-06-09T04:47:17.620
> 
> 标签：c, mutex, pipe, semaphore

我正在尝试在两个进程（如聊天室）之间进行通信。每个进程都有自己的终端窗口打开。我正在使用命名管道进行通信。

这是我所做的：

我有一个名为“MYFILE”的 FIFO_FILE。进程 A 向 MYFILE 写入一个新行，进程 B 从 MYFILE 中读取并将该行输出到进程 B 的终端显示器。但是，如果进程 B 想要向 MYFILE 写入新行，（根据我对信号量的理解）进程 A 将被阻止读取/写入 MYFILE，直到进程 B 完成写入。

**我想要实现的是：**当两个进程要写入时，当其他进程在写入文件之前不应阻塞任何进程。

我能想到的唯一方法是拥有两个 FIFO_FILE。但是如何实现这个实现呢？还是有其他方法可以实现？

有人告诉我使用消费者-生产者模式，但我不明白这将如何解决我的问题。

任何帮助都会很棒。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:03:56.053

假设某种 *nix 环境这是行不通的。只要管道读/写低于 PIPE_BUF 长度，就保证它们是原子的。让两个进程同时写入同一个 fifo 并没有什么意义。把它想象成写一个文件——为什么要穿插两个独立写入的内容？你会如何理解它？

你真的应该考虑使用多个fifo。即使这样，您也需要使用多线程或非阻塞 FIFO，`select`或者`poll`实现我认为您真正想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:51:20.303

Suggestion - you really don't need semaphores with named pipes, do you?

Just write whenever you want, and, under most circumstances, you'll block until there's something to read.

Here are a couple of short tutorial for using named pipes with shell scripts on Linux:

*   [http://www.linuxjournal.com/article/2156?page=0,1](http://www.linuxjournal.com/article/2156?page=0,1)

*   [http://www.linuxjournal.com/content/using-named-pipes-fifos-bash](http://www.linuxjournal.com/content/using-named-pipes-fifos-bash)

# mysql - 如何存储当前日期

> ID：10958442
> 
> 赞同：-1
> 
> 时间：2012-06-09T04:48:44.313
> 
> 标签：mysql, phpmyadmin

我们`msgdate`在我的表中取一个字段`private_message`。我们将数据类型定义为`msgdate`as `datetime`。

当我们插入数据时，该字段`msgdate`存储`0000-00-00 00:00:00`的不是当前日期。

```
$Query = "INSERT INTO private_message (id, sender, msgdate) VALUES ($_POST['id'],$_POST['to'], now()";
$Res = mysql_query($Query); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:52:06.980

you sure this works ?

```
"INSERT INTO private_message (id, sender, msgdate) VALUES ($_POST['id'],$_POST['to'], now()" 
```

or should it be :

```
INSERT INTO private_message (id, sender, msgdate) VALUES ($_POST['id'],$_POST['to'], now())" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:55:14.533

just a parenthesis has been missed

```
INSERT INTO private_message (id, sender, msgdate) VALUES ($_POST['id'],$_POST['to'], **OneOfTheseFunctions**) 
```

replace **OneOfTheseFunctions** with on of these three statements:

There are three ways to retrieve the current datetime in SQL SERVER.

```
CURRENT_TIMESTAMP, GETDATE(), {fn NOW()} 
```

**CURRENT_TIMESTAMP**

CURRENT_TIMESTAMP is a nondeterministic function. Views and expressions that reference this column cannot be indexed. CURRENT_TIMESTAMP can be used to print the current date and time every time that the report is produced.

**GETDATE()**

GETDATE is a nondeterministic function. Views and expressions that reference this column cannot be indexed. GETDATE can be used to print the current date and time every time that the report is produced.

**{fn Now()}**

The {fn Now()} is an ODBC canonical function which can be used in T-SQL since the OLE DB provider for SQL Server supports them. {fn Now()} can be used to print the current date and time every time that the report is produced.

If you run following script in Query Analyzer. I will give you same results. If you see execution plan there is no performance difference. It is same for all the three select statement.

```
SELECT CURRENT_TIMESTAMP
GO
SELECT {fn NOW()}
GO
SELECT GETDATE()
GO 
```

dont worry, all of them are equal in function and performance!

# asp.net-mvc-3 - MVC3 项目中的 Ninject 和 ChildKernel：“加载 Ninject 组件 ICache 时出错”

> ID：10958445
> 
> 赞同：0
> 
> 时间：2012-06-09T04:49:24.350
> 
> 标签：asp.net-mvc-3, ninject, ninject-extensions

我在我的 ASP.Net MVC3 项目中使用 Ninject (3.0)。在请求处理的某个时刻，我想执行一些任务。

我正在使用每请求会话模式，但不希望这些任务与当前请求共享相同的会话。所以，我想，ChildKernels 可以帮助我解决这个问题。我打算在子内核中为 ISession 创建另一个绑定，但从那开始：

```
var child = new Ninject.Extensions.ChildKernel.ChildKernel(NinjectMVC3.Kernel);
child.Dispose(); 
```

如果我在请求期间执行这样的代码，我会在请求*结束时*`Error loading Ninject component ICache`收到异常（而不是在通话时）。如果我删除一切都很好。*`.Dispose()``child.Dispose()`*

 *那么，我是否选择了正确的方式来使用 ChildKernel？在不明确处置子内核的情况下使用子内核是否安全？如果我处置子内核，为什么 Ninject 在请求端抛出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T17:02:20.507

抛出异常是因为您将所有模块从扩展加载到子内核中。使用 LoadExtensions=false 创建内核将解决该问题。但这不是您的解决方案。

ChildKernel 的意图并不是真正用于不同的范围。您需要为该子内核上的任务注册所有内容。只是会议是不够的。只为会话添加条件绑定是更好的选择。*

# r - 来自字符串的词云

> ID：10958446
> 
> 赞同：1
> 
> 时间：2012-06-09T04:49:33.960
> 
> 标签：r, visualization

我正在尝试制作我的第一个词云，但我对一些我认为很简单的东西有点不知所措。我有一个文本字符串向量，想用它们制作一个词云。我想要两种方法：（1）只需将所有字符串与 paste(x, collapse= " ") 以及（尽管这是较低优先级）（2）我不希望一个字符串支配其他字符串所以我想有它的独特的话只有一个分量。例如，如果一个字符串多次包含相同的单词，我仍然希望将其计为一个。

我看过`tm`and`wordcloud`包，但它们似乎都是为更复杂的任务而设计的。我不知道如何`Corpus`从我的数据中构造一个对象。

我该如何开始？这是一个示例向量，以防万一：

```
example <- c("this is a string of text", "another string of text", "one more string of text. This could be a few sentences long", "it looks like string is occurring a lot of times", "I hope this example is long enough. If not I can write more sentences") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T04:18:35.143

从向量创建语料库的方法是`Corpus(VectorSource(example))`. 这解决了我的问题

# regex - Perl 正则表达式量化 错误

> ID：10958447
> 
> 赞同：3
> 
> 时间：2012-06-09T04:49:57.957
> 
> 标签：regex, perl, grep

当我在 precced 中使用量化时，返回此错误，请参阅多个示例：

```
printf 'Joe Satriani\nWhitney Houston\n' | grep -Poi '(?<=J\w)[\w\s]+'
e Satriani

printf 'Joe Satriani\nWhitney Houston\n' | grep -Poi '(?<=J\w+)[\w\s]+' 
grep: lookbehind assertion is not fixed length

printf 'Joe Satriani\nWhitney Houston\n' | grep -Poi '(?<=J\w{2})[\w\s]+' 
Satriani 
```

我不能在precced中使用量化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T05:00:51.623

在 Perl 中，可以通过后向匹配匹配的所有字符串的长度必须相同。显然，您的`grep`工具也是如此。

在 Perl 中，您的问题将使用捕获来解决。

```
say $1 if /J\w+\s+(\w[\w\s]*)/; 
```

在 Perl`\K`中，在进行替换时通常可以用来解决类似的问题，而且它看起来也得到了支持`grep`！

```
$ printf 'Joe Satriani\nWhitney Houston\n' | grep -Poi 'J\w+\s+\K\w[\w\s]*'
Satriani 
```

我印象深刻！

# objective-c - 如何测试特定字节值的 NSData（又名标头）

> ID：10958450
> 
> 赞同：2
> 
> 时间：2012-06-09T04:50:12.387
> 
> 标签：objective-c, ios, byte, nsdata

我有各种各样的 NSData 流向我的班级。其中一些可能是 rtf 格式的字符串。现在我发现（希望是正确的）所有 rtf 格式的字符串都以

```
data: <7b5c7274 66315c61 and then random other data ....> 
```

现在我需要能够进行测试，看看任何给定的 NSData 的前 8 个字节是否等于（7b5c7274 66315c61）。所以我想这个问题有两个方面：

1.  如何存储 (7b5c7274 66315c61) 值以进行测试

2.  我如何针对任何给定的 NSData 对其进行测试

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T04:55:20.530

你可以调用`getBytes:length:`，传递一个八字节的缓冲区，然后测试你得到的结果。

将 rtf 文件放入`NSData`，获取前八个字节，将它们打印出来，然后将这八个常量放入程序中的字节数组中。然后将该数组与`getBytes:length:`使用返回的八个字节进行比较[`memcmp`](http://www.cplusplus.com/reference/clibrary/cstring/memcmp/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T05:18:33.413

RTF 是一种基于文本的文件格式。这些值`NSData`对应于“{\rtf1\a”，其中“\a”是“\ansi”的开头。就个人而言，我只是测试前 5 个字节是否匹配“{\rtf”。这就是[`file`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/file.1.html)命令的“[魔术](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/magic.5.html#//apple_ref/doc/man/5/magic)”文件用作测试的内容。见`/usr/share/file/magic/rtf`。

由于匹配文本是纯 ASCII，您可以使用`NSString* theString = [[NSString alloc] initWithBytes:[theData bytes] length:MIN([theData length], 5) encoding:NSASCIIStringEncoding]`然后`[theString isEqualToString:@"{\\rtf"]`. 如果数据不是 ASCII，那么解码将失败并且将会失败，`theString`并且`nil`相等性测试将给出错误（因为消息传递`nil`返回零），这就是您想要的。

# facebook - Copying facebook posts/notes to SharePoint intranet

> ID：10958451
> 
> 赞同：0
> 
> 时间：2012-06-09T04:50:16.843
> 
> 标签：facebook, sharepoint, powershell, sharepoint-2010

My company has a facebook page and posts 'notes' with pictures and updates on the company. For security, we've blocked facebook, so I'd like to copy those facebook posts to our internal SharePoint, either a list, blog site or something similar.

I've looked at using RSS Viewer Web Part & Facebook Graph API, but seems like the user/client would still need access to facebook (not just the server).

I'm not a programmer but could use PowerShell or another scripting language. I'm looking for ideas on how to accomplish copying facebook data to SharePoint on a regular basis. I considered ifttt.com as well but i'm not comfortable giving it my userid/password to SharePoint.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:33:09.763

如果您从 Javascript 内部调用 Facebook 图形 api，您也应该授予对客户端计算机的访问权限。您可以使用服务器端代码（ASP .Net）连接 Facebook api 并从 JavaScript 调用它。我认为这里有问题，因为客户端和服务器端脚本之间存在差异。谢谢

# jquery - jQuery - 访问父级 通过 $(this) 将层次结构向上五级

> ID：10958459
> 
> 赞同：2
> 
> 时间：2012-06-09T04:53:42.547
> 
> 标签：jquery, dom, this, hierarchy

我有一个嵌套结构：

```
<li id="RCL137_1" class="rcl137">
  <table>
    <tbody>
       <tr>
          <td>
             <img id="RCDEL137_1" class="icon_rcdel" src="images/icon_delete.png"> 
```

如果图像是 $(this)，是否有一种简单的方法可以在不使用 ID 的情况下引用它所属的行？（例如，父 li 某事……）我可以通过 parent().parent() 来做到这一点……但必须有一个更整洁的方法。

顺便说一句：我一直按 ID 做，但我想添加一个类似于以下的类事件处理程序：

```
$('#container').on('click', '.icon_rcdel', function (e) {
    $(this). [navigate to li] .remove(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T04:57:13.247

```
$(this).closest('li').remove(); 
```

见[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

和[http://api.jquery.com/find/](http://api.jquery.com/find/)

# php - Want to use word in URL by php javascript and ajax

> ID：10958461
> 
> 赞同：-10
> 
> 时间：2012-06-09T04:53:48.507
> 
> 标签：php, javascript, ajax

In my php

`$t_keyword= $_GET['user'];` in setting file

I want to use in [http://www.domain.com/index.php?user=](http://www.domain.com/index.php?user=)"Roni" after run above url ajax not work but if I set in setting file `$t_keyword= 'roni';` its work

how to work [http://www.domain.com/index.php?user=](http://www.domain.com/index.php?user=)"Roni"

my code index.php

```
<?php require 'settings.php'; ?>
<html>
    <head>
        <title></title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <style type="text/css">
        #fetched-torrents span{float: left;height:20px;}
        #fetched-torrents div span:nth-child(even){background: #c0c0c0;}
        #fetched-torrents div{float:left; clear: both;}
        .t-link{width: 100px; overflow: hidden;}
        .t-name{width: 300px; overflow: hidden;}
        .t-size{width: 150px; overflow: hidden; text-align: right;}
        .t-se{width: 110px; overflow: hidden; text-align: right;}
        .t-le{width: 110px; overflow: hidden; text-align: right;}
        .t-ve{width: 100px; overflow: hidden; color: green;}
        </style>
    </head>
    <body>
        <script type="text/javascript">
        function search(){
            $.ajax({
                url: 'search.php',
                beforeSend: function(jqXHR){
                    $('#status').html('<img src="images/loading.gif" width="16" height="16" alt="+" />');
                },
                success: function(data){
                    if(data.error!=undefined){
                        $('#status').html(data.error);
                        return;
                    }
                    $('#status').html('');
                    var t_displayed=0;
                    for(var x in data){
                        if(data[x].ver==0){
                            continue;
                        }
                        if(t_displayed>=t_max){
                            break;
                        }
                        t_displayed++;
                        $('#fetched-torrents').append('\
                            <div>\
                                <span class="t-link"><a href="'+data[x].hhss+'">a</a></span>\
                                <span class="t-name">'+data[x].saas+'</span>\
                                <span class="t-size"> '+bytesToSize(data[x].ssa, 2)+'</span>\
                                <span class="t-ss">'+data[x].sff+'</span>\
                                <span class="t-lss">'+data[x].dff+'</span>\
                                <span class="t-ves">Veris</span>\
                            </div>\
                        ');
                    }

                },
                dataType: 'JSON'
            });
        }
        var t_max=<?php echo $t_max;?>;
        $(function(){
            search();
        });
        </script>
        <div id="status"></div>
        <div id="fetched"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:52:45.687

在网址后添加后我的问题解决了:)

```
 $.ajax({
            url: 'search.php',
            data: 'user=<?php echo $keyword;?>', 
```

# android - Convert a joomla website to the mobile website?

> ID：10958462
> 
> 赞同：0
> 
> 时间：2012-06-09T04:53:56.733
> 
> 标签：android, joomla, mobile-website

Im trying to create a mobile website for an existing joomla website. I'm an android developer and a new bee in wweb development. can you please guide me on how can i move, what steps i need to follow, which is the best way.. thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:57:18.810

如果您确实想使用任何组件，您可以随时为 joomla 开发移动模板：[Joomla！移动开发](http://joomla.styletricks.net/index.php/joomla-mobile-development) 或使用新一代响应式布局之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:01:14.793

我现在实际上正在这样做。我决定使用[Mobile Joomla](http://www.mobilejoomla.com/ "移动Joomla")组件。它使开始变得相对容易，但我不得不在此过程中调整一些东西。我做的一件事是淘汰[jQTouch并用](http://www.jqtouch.com/)[jQuery Mobile](http://jquerymobile.com/)替换它。虽然现在他们可能有一个可下载的 jQuery Mobile 主题。

我还遇到了一些问题，即移动网站上的 URL 结构有点不同，并且不包括一些重要的 URL 参数，但见鬼，它是 Joomla。任何曾经使用过 Joomla 的人都知道这几乎是意料之中的。最后用纯粹的修补来修复它。

使用移动 Joomla 的一个好处是它为几种不同类型的手机分离了模板。有一个 iPhone 模板、XHTML 模板等。如果您使用 jQuery Mobile 之类的东西，它几乎可以在任何 iPhone、Android 或 Blackberry 上运行。我在 XHTML 模板和 iPhone 模板中都添加了 jQuery Mobile，因为我的目标是实现强大的 iPhone 兼容性，但我可能只使用 XHTML 模板并将其用于所有设备。

在开发这个移动网站的过程中，我还开发了一个使用 iPhone 滑动手势的移动滑块。我计划在网站本身启动后向公众发布滑块模块。我在 Android 上对其进行了测试，它似乎也运行良好。

希望至少有一点帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T00:09:45.853

好吧，如果您需要合适的东西并且不想长时间摆弄，您也可以使用我们的工具[xapp-studio.com](http://xapp-studio.com)。移动网络应用程序是免费的。

否则，除了清醒之外，没有什么可说的了。

# iphone - How Can i get data from the file in the documents folder

> ID：10958463
> 
> 赞同：7
> 
> 时间：2012-06-09T04:54:18.083
> 
> 标签：iphone

i am new to xcode and objective c.

firstly i have created a file in documents directory and it is created and now what i need is how can i read the data from that file like whether the file is containing a particular string or not

How can i get that

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:54:03.133

您可以在这里按照我的回答，保存和检索 plist 文件

[XCode中文件中的数组](https://stackoverflow.com/questions/10957092/array-from-file-in-xcode/10958026#10958026)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:52:50.967

与您编写的方式相同，您可以检索数据，假设您想从文档文件夹中获取图像，然后查看此代码 -

```
NSString *stringPath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES)objectAtIndex:0]];
NSString *fileName = [stringPath stringByAppendingFormat:@"/image.jpg"];

//fileName is your image path and image.jpg is your image name which is saved in documents folder...
NSData *retrieveData = [NSData dataWithContentsOfFile:fileName];
UIImage *newImage = [UIImage imageWithData: retrieveData]; 
```

在这种情况下，而不是

```
[data writeToFile:fileName atomically:YES]; 
```

你必须写

```
NSData *retrieveData = [NSData dataWithContentsOfFile:fileName]; 
```

线。你可以得到所有类型的数据。

谢谢你！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T04:59:47.630

以下方法将文件的内容获取到一个字符串。

```
+ (id)stringWithContentsOfFile:(NSString *)path
              usedEncoding:(NSStringEncoding *)enc
                     error:(NSError **)error 
```

然后，您可以通过以下方式确定返回的字符串是否包含指定的子字符串：

```
NSRange textRange;
textRange =[string rangeOfString:@"ohai"];

if(textRange.location != NSNotFound) {

    //String contains substring "ohai"
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T07:31:29.917

您可以通过以下方式从文档文件夹中的文件中读取数据：

```
 NSString *filePath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/<pathofFile>"];
 NSString *fileContent = [[NSString alloc] initWithContentOfFile:filePath encoding:NSUTF8StringEncoding error:nil]; 
```

现在，您可以使用 NSString 方法在 fileContent 中搜索子字符串。

# python - Why do I get the error "TypeError: coercing to Unicode: need string or buffer, int found"?

> ID：10958466
> 
> 赞同：20
> 
> 时间：2012-06-09T04:54:59.853
> 
> 标签：python, unicode

After running this small program:

```
#!/usr/bin/env python2.7
# -*-coding:utf-8 -*
a = 1
b = 2
c = 3
title = u"""a=""" + a + u""", b=""" + str(b) + \
    u""", c=""" + str(c)
print(title) 
```

I get the following error:

```
u""", c=""" + str(c)
TypeError: coercing to Unicode: need string or buffer, int found 
```

But the following runs just fine!

```
#!/usr/bin/env python2.7
# -*-coding:utf-8 -*
a = 1
b = 2
c = 3
title = u""", b=""" + str(b) + \
    u""", c=""" + str(c)
print(title) 
```

Can somebody please explain me what is going on?

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-09T04:56:15.163

You didn't wrap `a` in a `str` call. You need to do `str(a)` where you have `a`, just like you did for b and c.

# javascript - 如何动态添加和删除js文件

> ID：10958467
> 
> 赞同：2
> 
> 时间：2012-06-09T04:55:11.920
> 
> 标签：javascript, dynamic

我有一个网页 index.php，我想动态添加和删除 JS 文件到这个页面

到目前为止，我做到了，

```
<script type="text/javascript" src="" id="dynamic_files"></script> 
```

我曾计划通过以下方式更改此脚本标签的 src

```
function loadJsfiles( filename ){ 
    var filePath = 'include/js/'+filename;
    $("script#dynamic_files").attr('src',filePath);
}; 
```

并且包含的​​ js 文件中有脚本标签：

```
document.write('<script type="text/javascript" src="include/js/profile1.js"></script>');
document.write('<script type="text/javascript" src="include/js/profile2.js"></script>');
document.write('<script type="text/javascript" src="include/js/profile3.js"></script>');
document.write('<script type="text/javascript" src="include/js/profile4.js"></script>'); – 
```

我的问题是，

该脚本标签是否会打印到我的文档页面中，如果是，我该如何删除它

参考：[动态js文件](http://www.javascriptkit.com/javatutors/loadjavascriptcss2.shtml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:22:32.523

加载后你不能做 document.write

看这里：

[Javascript：在 createElement 脚本中运行“document.write”失败](https://stackoverflow.com/questions/6530199/javascript-run-document-write-in-createelement-script-failed)

您会注意到您的页面将被擦除。

使用哪种方法插入脚本并不重要，您需要阻止它们使用 document.write 或用自定义方法替换 document.write。

也许您想使用类似[require.js](http://requirejs.org/)的东西- 这是一个 javascript 加载器（感谢 Jared 提供比 [https://developers.google.com/loader/](https://developers.google.com/loader/)更好的链接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:26:50.723

更好的例子是谷歌分析

```
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T23:15:11.670

这就是我所做的：

```
var dynScript,dynParent;

function createjsfile(filename) {
    var fileref = document.createElement('script');
    fileref.setAttribute("type", "text/javascript");
    fileref.setAttribute("src", filename + "?noxhr="+(new Date()).getTime());
    return fileref;
}

function loadjsfile(filename){
    dynScript = createjsfile(filename);
    dynParent = document.getElementsByTagName("head")[0];
    dynParent.appendChild(dynScript);
}

function replacejsfile(filename) {
    var newelement = createjsfile(filename);
    dynParent.replaceChild(newelement, dynScript);
    dynScript = newelement;
} 
```

在`body.load`我做的活动中`loadjsfile("script.js")`

当我想重新加载它时`replacejsfile("script.js")`

# jquery - jQuery UI Radio Set - Hover and Checked states without Javascript

> ID：10958474
> 
> 赞同：0
> 
> 时间：2012-06-09T04:56:00.750
> 
> 标签：jquery, jquery-ui, jquery-ui-button, jquery-ui-selectable

For some reason I cannot find a proper way to adjust the HOVER and SELECTED states of the jQuery UI Radiosets.

Not sure why I can't find it, perhaps someone could give me some direction? What I want to change is how the text is GREY on the blue to be white. And when it's SELECTED to have a coloured BORDER instead of grey.

I'm sure it's simple, I just not sure what i'm missing.

Also, I would like to do this without using Javascript if possible and just use CSS adjustments...

![enter image description here](../Images/db23e47b7c817615d034c16af245e17b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T05:35:14.100

一旦您知道要使用哪些类，这通过直接的 CSS 就很容易了。您可以使用 来定位悬停单选按钮，使用 来定位`.ui-button:hover`活动单选按钮`.ui-state-active`。

所以，给定一些这样的 HTML：

```
<div id="gender">
    <input type="radio" id="radio1" name="radio"><label for="radio1">Male</label>
    <input type="radio" id="radio2" name="radio"><label for="radio2">Female</label>
</div>​ 
```

你可以这样做：

```
#gender .ui-button:hover {
    /* Hover stuff goes here. */
}
#gender .ui-state-active {
    /* Active stuff goes here. */
} 
```

演示：http: [//jsfiddle.net/ambiguous/4k3eJ/1/](http://jsfiddle.net/ambiguous/4k3eJ/1/)

# java - How do I remove a word from a string in an arraylist?

> ID：10958476
> 
> 赞同：1
> 
> 时间：2012-06-09T04:56:14.977
> 
> 标签：java, string, arraylist, word

I have

```
List<String> firstName = new ArrayList<String>() 
```

and

```
List<String> lastName = ArrayList<String>() 
```

Both holds the **same 10 elements** in the form of `"Foo" + " " + "Bar."`

My question is how do I remove "Foo" from each element in **lastName** and "Bar" from each element in **firstName**?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:04:55.927

好吧，字符串是不可变的，所以如果您要更改列表中 ALL 的字符串，您实际上会用新字符串替换每个列表中的字符串，所以这并不像您想象的那么难。

```
for ( int i = 0; i < firstName.size(); i++ ) {
    String [] parts = firstName.get(i).split(" ");
    firstName.set( i, parts[0] ); 
}
for ( int i = 0; i < lastName.size(); i++ ) {
    String [] parts = lastName.get(i).split(" ");
    lastName.set( i, parts[1] ); 
} 
```

我仍然不喜欢假装我知道两个数组的长度相同，所以我仍然在这里做两次工作。Girish 的回答也有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T05:02:45.863

您可以遍历一个列表。遍历 firstName 时，将 10 个字符串中的每一个拆分为空格 " " 并将第一个标记推回 firstName 列表。将第二个令牌推入 lastName 列表。

```
for(int i=0; i < firstName.size(); i++){
    String name = firstName.get(i);
    String[] tokens = name.split(" ");
    String first = tokens[0];
    String last = tokens[1];
    firstName.set(i, first);  //firstName.set(i, first + " ") to keep the whitespace
    lastName.set(i, last); //lastName.set(i, " " + last) to keep the whitespace
} 
```

这应该有效，如果如您所说，每个 List 包含相同的 10 个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T05:31:16.077

或者像这样避免处理列表索引，这可能会提示某些不保证随机访问的列表实现中的性能问题（即 LinkedList）

```
ListIterator<String> it = firstNames.listIterator(); 
while(it.hasNext()){
   it.set(it.next().split(" ")[0])
}

it = lastNames.listIterator(); 
while(it.hasNext()){
   it.set(it.next().split(" ")[1])
} 
```

# sql - right parenthesis missing ora-00907

> ID：10958478
> 
> 赞同：0
> 
> 时间：2012-06-09T04:56:34.823
> 
> 标签：sql, oracle, ora-00907

```
SELECT * FROM (
    SELECT
    ORG_ROADMARK,
    COUNT(DISTINCT EQUIP_INITIAL||EQUIP_NUM||move_dtm) AS Billing_Count
    FROM CMD_BILLING_INFO
    WHERE move_dtm BETWEEN' 01-FEB-12' AND '29-FEB-12'
    AND (
        (MOVE_TYPE_CD ='ICR' AND EQUIP_STATUS_CD IN ('L','W'))
        OR
        ( MOVE_TYPE_CD ='RLO' AND EQUIP_STATUS_CD ='L' )
        OR
        ( MOVE_TYPE_CD ='RMT' AND EQUIP_STATUS_CD ='W' )
    ) GROUPBY ORG_ROADMARK
) ORDERBY ORG_ROADMARK 
```

I am getting missing right parenthesis error for the above sql. Using this sql I was able to get the result for the month period and tried to modify this to get result for last 24 months month by month any suggestions please.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T05:13:46.097

1.  您需要在单词`GROUP`和从句中的单词和单词和从句中的单词之间`BY`留一个空格。`GROUP BY``ORDER``BY``ORDER BY`

2.  虽然它不会导致语法错误，但您几乎肯定不希望在`BETWEEN`. 我强烈建议您也不要依赖隐式转换，因为具有不同 NLS 设置的人可能想要运行此代码。

    ```
    WHERE move_dtm BETWEEN to_date( '01-FEB-2012', 'DD-MON-YYYY' ) 
                   AND to_date( '29-FEB-2012', 'DD-MON-YYYY' ) 
    ```

    或者

    ```
    WHERE move_dtm BETWEEN date '2012-02-01' AND date '2012-02-29' 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T15:52:29.827

ORA-00907 异常有两个原因。

第一个是，平庸地，有一个左括号 - `(`- 没有伙伴右括号 - `)`。这些可能很难手动诊断，尤其是在大型 SQL 语句中，但如果您有一个不错的带有括号匹配功能的 IDE，那就很容易了。

第二个原因是包含括号的 SQL 语句中的语法错误。如果我们输入错误的关键字，Oracle 会将其视为对象名称。这可能会导致它抛出许多错误，例如 ORA-00905、ORA-00936 和[00900 到 01499 范围内的](http://docs.oracle.com/cd/B10501_01/server.920/a96525/e900.htm#ERRMG102)许多其他错误。ORA-00907 就是其中之一。同样，一个体面的 IDE 在这里会有所帮助：语法突出显示可以帮助我们识别拼写错误，因为它不能突出显示我们拼错的关键字。

`GROUP BY`在您的特定情况下，您压缩成一个单词似乎很可能是罪魁祸首。您还需要修复`ORDER BY`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T05:09:16.270

问题似乎是放错了报价`BETWEEN'`

```
BETWEEN' 01-FEB-12' AND '29-FEB-12' 
```

# php - PHP: Skip MySql Query if it takes longer than a second

> ID：10958482
> 
> 赞同：5
> 
> 时间：2012-06-09T04:57:00.503
> 
> 标签：php, mysql

I have a php page that needs to write to a database sometimes at the beginning of the script.

During a scheduled mysqldump backup, the page isn't accessible, because it is trying to write to a table that is locked.

During the lock, MySql queues those sql updates, and after the backup is complete, they do get executed as desired. Yet my php page won't display until the backup is complete.

However, since the updates do not return anything to the script, I wish they wouldn't hang up my script during the lock; I hope there's a way I can tell php to just send the sql update to mysql and don't worry about confirmation that the update completed.

I want php to send the query to mysql, and then just continue on to the next line of php if the update doesn't complete in one second.

I'm running php on a windows server, so I understand that some type of threading is not an option.

If there is way to set a timeout on that query (specifically), that might be ideal, but I don't want to renege the sql update altogether if it times out. I still want MySQL to process it after the lock is gone.

What would you recommend (given that removing the sql updates altogether is not an option)?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:21:13.323

一种解决方案，使用 PDO，开始一个超时连接，开始一个事务并且如果你有锁，超时将关闭连接并回滚。

对于 PDO 中的超时，使用 PDO::ATTR_TIMEOUT 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T07:21:07.223

对于可能遇到此线程的其他人，我最终编写了此函数来检测表是否已锁定，并且仅在未锁定时才进行 SQL**更新**：

```
function isLocked($databaseName,$tableName)
    {
        $sql = "show open tables from `".$databaseName."` where `table`=`".tableName."` and In_use > 0;";
        $result = @mysql_query($sql);
        if (mysql_num_rows($result) != 0 )
        {
            return true;
        }
        else
        {
            return false;
        }
    } 
```

（注意：此函数假设数据库连接已经建立）

这是可行的，因为我已经修改了代码，以便在下次加载页面时最终完成 sql 更新，而无需锁定到位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T05:21:39.090

我认为这样做的唯一方法是将脚本分成几部分并使用 ajax 调用，如果所有脚本都依赖于结果，则可以发送大更新并继续执行不依赖于该过程的脚本的其余部分的更新，唯一的办法是做一个很好的加载...

# ajax - jquery 函数在 ajax 加载的 jquery 选项卡中不起作用

> ID：10958488
> 
> 赞同：1
> 
> 时间：2012-06-09T04:57:53.873
> 
> 标签：ajax, jquery-ui-dialog, jquery-ui-datepicker, jquery-tabs

我无法让 jquery 函数（日期选择器和对话框）在 jquery ajax 加载选项卡中工作。

当我单击相应的选项卡时，我不断收到“日期选择器不是功能”或“对话框不是功能”。我为这个问题在网上做了很多搜索，也有类似的问题，但我找不到适合我的解决方案。

我确实理解出现这样的错误，问题可能是由于系统无法识别脚本。所以，在更高的层次上，我并不真正理解 ajax 加载的选项卡如何处理与主脚本相关的脚本。

希望我的代码可以帮助说明我的错误。

header.html

```
<head>
...
<!-- External javascript call -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" charset="utf-8"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" charset="utf-8"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js" charset="utf-8"></script>
<script type="text/javascript" src="../js/main.js"></script>    
</head> 
```

主文件

```
<?php include '../includes/header.html'; ?>
...
<div id="tabmenu" class="ui-tabs">
<ul>
<li><a href="view_sch.php"><span>Schedule</span></a></li>
</ul>
<div id="view_sch.php" class="ui-tabs-hide">Schedule</div>
</div><br /> 
```

view_sch.php（不包括 header.html）

```
<head>
<!-- External javascript call -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" charset="utf-8"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" charset="utf-8"></script>
<script type="text/javascript" src="../js/schedule.js"></script>
</head>

<body>
<div id="AddGameForm" title="Add New Game">         
<form method="post">
<label for="date">Select Game Date:</label>
<input type="text" name="date" id="date" tabindex="-1" size="10" maxlength="10"    class="text ui-widget-content ui-corner-all" 
value="<?php if (isset($_POST['date'])) echo $_POST['date']; ?>" />
</form>
<table id="schedule"></table>
</body> 
```

schedule.js

```
var GAME = {

loadDialog: function() {
    $( "#date" ).datepicker();
    $( "#AddGameForm" ).dialog({
        autoOpen: false,
        height: 400,
        width: 400,
        modal: true,
        buttons: {
            "Add New Game": function() {
                // Add game to database
                GAME.add();                     
                $( this ).dialog( "close" );
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    });

    $( "#add-game" )
        .button()
        .click(function() {
            $( "#AddGameForm" ).dialog( "open" );
    });     
},

add: function() { 
    var form_data = $('form').serialize();
    $.ajax({
        type: "POST",
        url: "../manager/add_game.php",
        data: form_data, // Data that I'm sending
        error: function() {
            $('#status').text('Update failed. Try again.').slideDown('slow');
        },
        success: function() {
            $('#status').text('Update successful!').slideDown('slow');
        },
        complete: function() {
            setTimeout(function() {
                $('#status').slideUp('slow');
                }, 2000);
        },
        cache: false
    });
  }
}

$(document).ready(function() {
// Load game dialog
GAME.loadDialog();
}); 
```

谢谢你的帮助。

编辑：我应该注意，当您在自己的浏览器窗口中查看 view_sch.php 页面时，它工作得很好。通过 ajax 加载的 jquery 选项卡查看页面时会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:38:36.317

I think I figured it out (with help of my friend too). I first removed the redundant external script calls in the view_sch page since header.html already took care of this. Next, I utilized the functions within the jquery tab, in particular the "load" event to create a callback situation. Ironically, it still wasn't working if you select the tab more than once until I added an if conditional to the load block. Hopefully the code below helps others out there.

schedule.js

```
var GAME = {
 loadDialog: function() {
    $("#date").datepicker();
    $( "#AddGameForm" ).dialog({
        autoOpen: false,
        height: 400,
        width: 400,
        modal: true
        }
    });     
  }
} 
$(document).ready(function()
{
  // jQuery UI Tabs
  $('#tabmenu').tabs({
    ajaxOptions: {
        error: function( xhr, status, index, anchor ) {
            $(anchor.hash).html(
                "Couldn't load this tab. We'll try to fix this as soon as possible. "
            );              
        }
    },
    load: function ( event, ui ) {
        if (ui.index == 2) {
            // Load game dialog
            GAME.loadDialog();

            $( "#add-game" ).on("click", function() {
                $( "#AddGameForm" ).dialog( "open" ); 
            }); 
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T18:05:38.703

我注意到您在文档就绪处理程序之前缺少 jQuery 对象。没有它，您的代码根本不会加载。

```
$(document).ready(function(){...}) 
```

或者更好

```
$(function(){...}) 
```

效果也一样

# php - 在 PHP 中使用 file_get_contents 获取 cookie

> ID：10958491
> 
> 赞同：3
> 
> 时间：2012-06-09T04:59:00.700
> 
> 标签：php, cookies

> **可能重复：**
> [file_get_contents 接收 cookie](https://stackoverflow.com/questions/1797510/file-get-contents-receive-cookies)

假设我想通过 php 中的 file_get_contents() 访问一个页面[http://somewebsite.com](http://somewebsite.com)并且该页面有 cookie，当我执行 file_get_contents 时，cookie 没有被传输，这样做的方法是什么？

# javascript - Titanium Appcelerator 动态 TextArea 高度增加

> ID：10958501
> 
> 赞同：1
> 
> 时间：2012-06-09T05:00:30.130
> 
> 标签：javascript, iphone, titanium, titanium-mobile

我正在使用 Titanium 并尝试在 tableview 行中嵌入 textarea。textarea 需要随着用户在其中键入以及 tableview 行动态增加高度。我知道它应该需要一些计算，但是我不知道算法。有人可以提供一些指示吗？

非常感谢。

到目前为止的代码：

```
var win = Ti.UI.createWindow({
    title: 'My Message'
});

var tableview = Ti.UI.createTableView({
    height: 'auto',
    layout: 'vertical',
    style:Titanium.UI.iPhone.TableViewStyle.GROUPED,
    headerTitle:'Message',
});

var tf = Ti.UI.createTextField({
    width: 200,
    top: 10,
    borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED
});

var rowTo = Ti.UI.createTableViewRow({
    height: 'auto'
});

var ta = Ti.UI.createTextArea({
    height: 'auto',
    font: [{fontSize: 11}],
    top: 0,
    bottom: 20,
    width: 250,
    height: 50,
    backgroundColor: 'green'
});
var rowMsg = Ti.UI.createTableViewRow({
    height: 'auto'
});

rowTo.add(tf);
rowMsg.add(ta);

tableview.appendRow(rowTo);
tableview.appendRow(rowMsg);

win.add(tableview);
win.open(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:15:34.723

使用标签并将其高度分配给 textArea。在 textArea 的“更改”事件监听器中，更新 textArea 相对于标签高度的高度。请参阅下面的代码，我已更改它。

```
 var win = Ti.UI.createWindow({
    title : 'My Message'
});

var tableview = Ti.UI.createTableView({
    height : 'auto',
    layout : 'vertical',
    style : Titanium.UI.iPhone.TableViewStyle.GROUPED,
    headerTitle : 'Message',
});

var tf = Ti.UI.createTextField({
    width : 200,
    top : 10,
    borderStyle : Ti.UI.INPUT_BORDERSTYLE_ROUNDED
});

var rowTo = Ti.UI.createTableViewRow({
    height : 'auto'
});

var ta = Ti.UI.createTextArea({
    font : [{
        fontSize : 11
    }],
    top : 0,
    width : 250,
    scrollable : false,
    backgroundColor : 'green',
    height : 'auto'
});

var label = Ti.UI.createLabel({
    width : 250,
    font : [{
        fontSize : 11
    }],
    height : 'auto',
    text : ta.value,
    visible : false
});

var rowMsg = Ti.UI.createTableViewRow({
    height : 'auto'
});

ta.addEventListener('change', function(e) {
    label.text = e.value;
    ta.height = label.height;
    rowMsg.height = label.height;
});

rowMsg.add(label);
rowTo.add(tf);
rowMsg.add(ta);

tableview.appendRow(rowTo);
tableview.appendRow(rowMsg);

win.add(tableview);

win.open(); 
```

# authentication - TweetDeck 对其桌面应用程序/移动应用程序/Web 应用程序使用什么身份验证机制？

> ID：10958506
> 
> 赞同：0
> 
> 时间：2012-06-09T05:02:10.047
> 
> 标签：authentication, desktop-application, oauth-2.0, mobile-website, mobile-application

我了解 TweetDeck 可以帮助用户代表她访问 Twitter 和 Facebook。

在[OAuth2](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-20)中，这意味着 TweetDeck 是第 3 方应用程序，Twitter 和 Facebook 是资源服务器，而用户是资源所有者。

我的问题**不是**关于 TweetDeck 代表资源所有者访问某些资源服务器。

我的问题是 TweetDeck 如何处理其自己的桌面应用程序/移动应用程序/webapp 的身份验证，因为在所有 3 种类型中，用户仍然需要使用她**自己的 TweetDeck**用户名/密码登录？

对于 webapp，这很简单。TweetDeck 可以使用良好的服务器会话和浏览器 cookie 来维护应用程序/身份验证状态以及通过 HTTPS 的简单登录表单。

我的主要问题是**桌面应用程序/移动应用程序呢？**

TweetDeck 是否也使用 OAuth2 进行自己的身份验证？如果没有，它有什么用？

如果是这样，是[资源所有者密码凭据授予](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-20#page-32)吗？如果不是，那么哪种类型的 OAuth 授权？

如果是这样，他们如何避免受到暴力攻击的危害？由于它在文档中说明，因此端点需要防止暴力攻击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:02:04.433

它使用带有自定义会话实现的[HTTP 基本身份验证。](http://en.wikipedia.org/wiki/Basic_access_authentication)它不是 OAuth2 的**Resource Owner's Password Credentials Grant**的实现，因为我没有在下面的测试运行中指定一些 [必需的参数](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-27#section-4.3.2)（例如`grant_type`）并且服务器没有抱怨。

这是我使用 cUrl 进行的本地运行：

```
 ∴  curl -v https://opyate%40gmail.com:mysupersecretpassword@api.tweetdeck.com/login\?session\=true
    * About to connect() to api.tweetdeck.com port 443 (#0)
    *   Trying 199.59.149.231...
    * connected
    * Connected to api.tweetdeck.com (199.59.149.231) port 443 (#0)
    * successfully set certificate verify locations:
    *   CAfile: /opt/local/share/curl/curl-ca-bundle.crt
      CApath: none
    * SSLv3, TLS handshake, Client hello (1):
    * SSLv3, TLS handshake, Server hello (2):
    * SSLv3, TLS handshake, CERT (11):
    * SSLv3, TLS handshake, Server finished (14):
    * SSLv3, TLS handshake, Client key exchange (16):
    * SSLv3, TLS change cipher, Client hello (1):
    * SSLv3, TLS handshake, Finished (20):
    * SSLv3, TLS change cipher, Client hello (1):
    * SSLv3, TLS handshake, Finished (20):
    * SSL connection using RC4-SHA
    * Server certificate:
    *    subject: C=US; ST=CA; L=San Francisco; O=Twitter, Inc.; OU=Twitter Security; CN=tdweb.twitter.com
    *    start date: 2012-02-23 00:00:00 GMT
    *    expire date: 2015-02-27 12:00:00 GMT
    *    subjectAltName: api.tweetdeck.com matched
    *    issuer: C=US; O=DigiCert Inc; OU=www.digicert.com; CN=DigiCert High Assurance CA-3
    *    SSL certificate verify ok.
    * Server auth using Basic with user 'opyate@gmail.com'
    > GET /login?session=true HTTP/1.1
    > Authorization: Basic 1337YfRl1337YWl1337vbTpzdXJmYTMyMA==
    > User-Agent: curl/7.25.0 (x86_64-apple-darwin10.8.0) libcurl/7.25.0 OpenSSL/1.0.1c zlib/1.2.7 libidn/1.22
    > Host: api.tweetdeck.com
    > Accept: */*
    > 
    < HTTP/1.1 200 OK
    < Transfer-Encoding: chunked
    < Date: Tue, 12 Jun 2012 12:59:47 GMT
    < Expires: Fri, 21 Mar 1975 09:30:00 GMT
    < Content-Type: text/html
    < Cache-Control: no-cache
    < Cache-Control: no-store
    < Cache-Control: must-revalidate
    < Cache-Control: pre-check=0
    < Cache-Control: post-check=0
    < Server: tfe
    < 
    * Connection #0 to host api.tweetdeck.com left intact
    {"mail_list": "False", "session": "Ta1337Qb1wu1337Ra29b1337-13371337Vbf93y91337", "updated_time": "2011-12-08T12:31:00"}* Closing connection #0
    * SSLv3, TLS alert, Client hello (1): 
```

顺便说一句，我从 Chrome 开发人员工具会话中获得了该登录 URL：

![在此处输入图像描述](../Images/8e8c1dff70bb3a308d49fd12ed5a5e5b.png)

* * *

**更新**

[我问过 TweetDeck 自己](https://twitter.com/opyate/status/212611666200887297)，但在撰写本文时，他们还没有回复。

# html - CSS背景不适用于Chrome

> ID：10958507
> 
> 赞同：2
> 
> 时间：2012-06-09T05:02:20.547
> 
> 标签：html, css, google-chrome, background

我有以下 HTML 和 CSS 代码，你能告诉我为什么它可以在 FF、IE9、jsfiddle 上运行，而不是在 Google Chrome 的实时站点上运行吗？

HTML：

```
<p>
    <a href="http://tambnguyen.com/wp-content/uploads/2012/05/256501557_1280.jpg">
        <span class="img_wrapper">
            <img class="tn" src="http://tambnguyen.com/wp-content/uploads/2012/05/256501557_1280-580x326.jpg"/>
        </span>
    </a>
</p> 
```

CSS：

```
img.with-borders, img.tn { 
    margin: 5px 0 0 0;
    padding: 8px;
    background: #f1f1f1;
    border: solid #777;
    border-width: 1px 2px 2px 1px;
    box-shadow: 0 15px 15px -15px rgba(0, 0, 0, 0.9);
    -webkit-transition: all 0.3s ease; -moz-transition: all 0.3s ease; -o-transition: all 0.3s ease;
    transition: all 0.3s ease;
}
span.img_wrapper {
    background: url('http://tambnguyen.com/wp-content/themes/Polished/images/et-image-sliderleft-shadow2.png') no-repeat left bottom, url('http://tambnguyen.com/wp-content/themes/Polished/images/et-image-sliderright-shadow2.png') no-repeat right bottom;
    padding-bottom: 14px;
}
img.with-borders:hover, img.tn:hover, img.post_img:hover, div.related_post_thumb:hover  { 
    border-color: #000;
    filter: alpha(opacity=80);
    opacity: 0.80;
} 
```

jsfiddle 在这里[http://jsfiddle.net/gNtea/](http://jsfiddle.net/gNtea/)，现场站点在这里[http://tambnguyen.com/4493-chemin-vert-giacomo-miceli/](http://tambnguyen.com/4493-chemin-vert-giacomo-miceli/)

谢谢！​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T05:12:12.137

您需要添加`display: inline-block;`到 img_wrapper，例如：

```
span.img_wrapper {
  display: inline-block;
  background: url('http://tambnguyen.com/wp-content/themes/Polished/images/et-image-sliderleft-shadow2.png') no-repeat left bottom, url('http://tambnguyen.com/wp-content/themes/Polished/images/et-image-sliderright-shadow2.png') no-repeat right bottom;
  padding-bottom: 14px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T08:56:08.217

我访问了**jsFiddle**链接和 Chrome 中的**实时网站**，该网站当前正在使用`display:inline-block;`修复程序以允许看到角落背景图像。

目前，我可以看到背景阴影图像结束后和社交按钮开始之前有很大的差距。这是因为`inline-block`被使用了。

相反，省略 using `display:inline-block;`（在阅读了*整个*`top`答案之后）并只定义, `right`, `bottom`,的所有填充值`left`。

也就是说，因为您是实时网页中的浮动对象，请`padding-right`给出`1px`.

这两种方法中的任何一种都可以。

**方法 1 - 速记填充（上、右、下、左）：**

```
padding: 0 1px 18px 0; 
```

**方法 2 - 指定缺失`padding-right`值：**

```
padding-bottom: 18px;
padding-right: 1px; 
```

现在您可以在不更改网页布局的情况下查看带有背景图像的海报图像......并且那个大间隙也消失了。

但是在我解释为什么它适用于 jsFiddle 而不是实时网站之前，这个答案并不完整。简单的答案是 jsFiddle 是一个沙盒，并不完美。这可以被认为是一个 jsFiddle 错误。

[我将用你当前的修复和一个完整的 HTML 页面的jsFiddle](http://jsfiddle.net/M4yek/)来说明这个 jsFiddle 错误，该页面被复制并粘贴到 HTML 面板中。什么都没有改变。

现在，使用 Chrome 开发人员工具（*按键盘上的 F12 键*），您可以使用**Inspect Element**查看图像...一旦显示在 Elements 选项卡中，您将在该区域中单击`span`正上方的标签。

现在到了有趣的部分，您可以`display:inline-block;`通过删除**复选标记**来禁用样式（在右侧面板中展开时通过样式），您将在 Chrome 中看到这些 .png 图像的轻微像素偏移，但可以肯定的是，它们仍然可见！

底线：认为**jsFiddle**是一个出色的工具，但 Chrome 浏览器或***任何浏览器***应该是测试页面以进行生产工作时的唯一界面。它应该有最终决定权，没有中间人。

* * *

**参考照片1：** `display:inline-block`

![版面受间隙影响。](../Images/969f907a852531fbb9e9cbe8af727178.png)

* * *

**参考照片2：** `padding-right: 1px;`

![布局不受影响。](../Images/3c43345786e55aa80a74e90dc25580bd.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-13T13:04:38.033

简单地说图像的高度=）

```
li.current-menu-item a {
background: url("../images/bg_menu.png") repeat-x;    
height: 35px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-17T01:49:03.600

我用 Chrome 添加了同样的问题，但我的修复很奇怪

这是我在正文包装器中的原始 CSS 代码

```
background-image: url(../../img/layout/bgOutside-rtl.jpg); 
```

但是图像重复了，这不是我想要的。我尝试了其他地方提供的解决方案，但在大多数情况下，这让事情变得更糟。

我添加了这个

```
background-image: url(../../img/layout/bgOutside-rtl.jpg);
background-repeat: no-repeat; 
```

PHPStorm 建议这是一个更好的选择

```
background: url(../../img/layout/bgOutside-rtl.jpg) no-repeat; 
```

这似乎合乎逻辑，但没有奏效。Chrome 似乎将此视为根本不显示任何图像的指示。

我让它工作的唯一方法是回到

```
background-image: url(../../img/layout/bgOutside-rtl.jpg);
background-repeat: no-repeat; 
```

去搞清楚。它工作正常，所有浏览器都正确呈现了页面。

更奇怪的是，在 Linux 中编写代码时并没有出现此问题，仅在使用 Windows 版本的 Chrome 时才会出现......

# forms - 您如何获得要提交的网络托管 pdf 表单？

> ID：10958511
> 
> 赞同：0
> 
> 时间：2012-06-09T05:03:20.667
> 
> 标签：forms, pdf

我有一个 PDF 表单，在我的桌面上会将表单数据提交到 php 文件进行处理。但是，当我将该表单移动到网络主机时，它不会提交数据。

我已经尝试了两个公共网络服务器以及 localhost/wamp，但没有成功。就像我说的，如果你从桌面打开文件，它会提交数据就好了。我正在使用 Adob​​e Pro 9。我尝试过 FDF 和 HTML。

有什么好主意吗？

# c++ - 从 Python 测量外部 .exe 运行时更准确的计时器？

> ID：10958512
> 
> 赞同：1
> 
> 时间：2012-06-09T05:03:55.910
> 
> 标签：c++, python, time

我正在尝试使用 Python 从已编译的 C++ exe 中获取返回值（同时对它们进行计时）。

这是我的 Python 代码

```
import subprocess
import time

info = subprocess.STARTUPINFO()
info.dwFlags |= subprocess.STARTF_USESHOWWINDOW
info.wShowWindow = subprocess.SW_HIDE

t1 = time.clock()
h = subprocess.Popen([r"C:\Users\MyName\Desktop\test.exe"], startupinfo=info) 
h.communicate()
t2 = time.clock()-t1

print "Return Code:", h.returncode
print "Duration:", t2 
```

这是 test.cpp 的内容：

```
int main(){    
    return 1234;
} 
```

这是 Python 输出

```
Return Code: 1234

Duration: 0.0438238265388 
```

我觉得 43+ 毫秒太长而且不准确。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:02:38.577

我还建议从 C++ 程序本身测量时间，如果您仍然有兴趣在 Python 程序中获取时间，您可以返回从 C++ 程序计算的时间，这应该非常准确。也正如其他人所建议的那样，平均多次运行。

# c - while(!feof(file)) 读取额外的行

> ID：10958514
> 
> 赞同：2
> 
> 时间：2012-06-09T05:03:59.603
> 
> 标签：c, file-io

我在从文件中读取行时遇到问题。基本上我的代码比它应该多读一行，所有变量都是'0'ie

如果我的文件是：

```
0, 0, 3, 64, 0, 0, 0, 0
2, 0, 6, 64, 0, 0, 0, 0
4, 0, 4, 64, 0, 0, 0, 0
6, 0, 5, 64, 0, 0, 0, 0
8, 0, 2, 64, 0, 0, 0, 0 
```

它将读取：

```
Object 1:  0, 0, 3, 64, 0, 0, 0, 0
Object 2:  2, 0, 6, 64, 0, 0, 0, 0
Object 3:  4, 0, 4, 64, 0, 0, 0, 0
Object 4:  6, 0, 5, 64, 0, 0, 0, 0
Object 5:  8, 0, 2, 64, 0, 0, 0, 0
Object 6:  0, 0, 0,  0, 0, 0, 0, 0 
```

这是我的读取算法：

```
while (!feof(pfile)) { 

        PcbPtr p = createnullPcb();
        fscanf(pfile, "%d,%d,%d,%d,%d,%d,%d,%d", &p->arrivaltime, &p->priority, &p->remainingcputime, 
        &p->memalloc, &p->pr,  &p->sc, &p->mo, &p->cd);
        char cwd[1024];
        char *tmp = getcwd(cwd, sizeof(cwd));
        strcat(tmp, "/process");
        p->args[0] = tmp;
        p->args[1] = NULL;

        if (!headi) {
            headi = p;
        } 
        else {
            enqPcb(&headi, p);
        }

    } 
```

为什么会这样？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T05:05:03.673

正在发生的事情是，当试图阅读结束时`feof`返回。`true`当您在文件末尾但还没有尝试阅读其他任何内容时，`feof`将返回`false`.

简单来说：`feof`不代表*is at the end of the file*，而是 for*已经试图访问超过文件的末尾*。

请注意，当您位于文件末尾并尝试读取该额外行时，`fscanf`将会失败。您可以检查它的返回值以查看它是否能够读取任何内容。

# android - 如何使用 setOnItemClickListener 内部的 Intent 调用及其重写方法 OnItemClick() 正确设置 startActivityForResult()？

> ID：10958515
> 
> 赞同：0
> 
> 时间：2012-06-09T05:04:38.263
> 
> 标签：android, android-intent, android-activity

希望没有很多代码，所以我为此道歉。我会尽量保持轻便，这意味着我不会提供所有东西（尽管如果需要我会提供）。但是我正在调试它，并将问题缩小到我提供的课程中的意图问题，但我可能是错的。我的错误如下：

```
6-09 00:47:15.992: E/AndroidRuntime(728): java.lang.RuntimeException: Failure delivering
result ResultInfo{who=null, request=2, result=-1, data=Intent { 
cmp=com.zeroe/.ListManagersActivity (has extras) }} to activity 
{com.zeroe/com.zeroe.MainDisplayActivity}: java.lang.ArrayIndexOutOfBoundsException:
length=2; index=2
java.lang.ArrayIndexOutOfBoundsException: length=2; index=2
06-09 03:27:42.732: E/AndroidRuntime(5076): at
com.zeroe.SmartCalDatabaseHelper.saveManagedEvent(SmartCalDatabaseHelper.java:106)
06-09 03:27:42.732: E/AndroidRuntime(5076): at 
com.zeroe.TimeManager.insertManagedEvents(TimeManager.java:100) 
```

所以我的错误出在 onActivityResult() 方法中，我假设问题在于它无法访问我放入其中的内容。我在这里完全是在猜测，但这与意图是如何在类范围之外创建的有关，并且当调用该方法时，它找不到它，就像我猜的意图不适合那个上下文一样. 我一直在经历它，我现在什么都没有。已经在这几个小时，所以任何提示将不胜感激！

编辑：如果不是很明显，我很抱歉，但是这个类是通过我的主要活动的意图调用的，然后我在 setOnItmClickListener 方法中调用了另一个意图。只是澄清。如果需要，请让我发布任何其他内容。我只是不想用代码过度膨胀。

最新编辑：好的，所以我的头让我看了这么久，但我已经准确地指出了问题所在。它在我的 DatabaseHelper 类中将最后一个“事件”插入数据库后立即挂起。我相信我已经评论了如果你能找到它在哪里，但问题是我不知道为什么它会这样失败。我查看了我的数据库，一切都正确插入了！！但我相信一旦完成，它会返回到 onActivityResult，它就会失败。那就是我无法回答问题的地方。所以看起来一切都正确完成，但它是最后一件事，即导致问题的意图结局？我在处理意图 onActivityResult 方法的结尾时是否遗漏了什么？

数据库助手.java

```
/*Omitting imports, but they are there*/

public class DatabaseHelper {

private static final int DATABASE_VERSION = 1;
private static final String DATABASE_NAME = "smartcal.db";

private OpenHelper openHelper;
private SQLiteDatabase database;

public DatabaseHelper(Context context) {
    openHelper = new OpenHelper(context);
    database = openHelper.getWritableDatabase();

}

...

public Cursor getEventId(String eventName, String timeStamp) {

    return database.rawQuery("SELECT * FROM events WHERE time_stamp='"+timeStamp+"' AND event='"+eventName+"'", null);
}

public Cursor getAgendaToEdit(long id) {
    return database.rawQuery("SELECT * FROM events_info WHERE _id='"+id+"'", null);
}//end of getAgendaToEdit method

public Cursor getAgendaInfo(String date) {

    String query = "SELECT _id, event_name, start_date, start_time, end_date, end_time, " +
    "location FROM events_info WHERE date('"+date+"') >= start_date and date('"+date+"') <= end_date"; //add WHERE clause to filter for current day
    return database.rawQuery( query, null);
}//end getAgendaInfo

public Cursor getNumOfSteps(String id) {
    return database.rawQuery("SELECT _id, steps FROM managers WHERE _id='"+id+"'", null);
}

public Cursor getSteps(String id) {
    return database.rawQuery("SELECT _id, name FROM manager_steps WHERE boss='"+id+"' ORDER BY step_num", null);
}

public void saveManagedEvent(String eventId, String singleEventName, String location, String startDate, String startTime, String endDate, String endTime) {
    String[] tempDate = startDate.split("-");
    startDate = "";
    startDate = tempDate[2] + "-" + tempDate[0] + "-" + tempDate[1];
    tempDate = endDate.split("-");
    endDate = "";
    endDate = tempDate[2] + "-" + tempDate[0] + "-" + tempDate[1];

    ContentValues toSecondDatabase = new ContentValues();
    toSecondDatabase.put("event_id", eventId);
    toSecondDatabase.put("event_name", singleEventName);
    toSecondDatabase.put("start_date", startDate);
    toSecondDatabase.put("start_time", startTime);
    toSecondDatabase.put("end_date", endDate);
    toSecondDatabase.put("end_time", endTime);
    toSecondDatabase.put("location", location);
    database.insert("events_info", null, toSecondDatabase);
    /*HANGS HERE FOR SOME REASON AND GIVES ME THE ABOVE ERROR*/
}

public String saveSingleEvent(String event) {
    String timeStamp = getTimeStamp();

    ContentValues toFirstDatabase = new ContentValues();
    toFirstDatabase.put("event", event);
    toFirstDatabase.put("time_stamp", timeStamp);
    database.insert("events", null, toFirstDatabase);

    Cursor eventCursor = getEventId(event, timeStamp);
    eventCursor.moveToFirst();
    int eventId = eventCursor.getInt(0);
    eventCursor.close();
    return String.valueOf(eventId);
}

public String getTimeStamp() {
    SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy h:mm:ss a");
    return sdf.format(new Date());
}
private static String pad(int c) {
    if (c >= 10)
        return String.valueOf(c);
    else
        return "0" + String.valueOf(c);
}

/*SQLITEOPENHLPER INNER CLASS HERE*/

}//end of SmartCalDatabaseHelper Class 
```

时间管理器.java

```
...
public void createStepsArray() {

    Cursor stepsInfo = databaseHelper.getSteps(managerId);
    for(int i=0; i < numOfSteps; i++ ) {
        stepsInfo.moveToPosition(i);
        stepHolder[i] = stepsInfo.getString(1);
    }
    stepsInfo.close();
}//end of createStepsArray method

public void insertManagedEvents() {
    Calendar now = Calendar.getInstance();
    String id = databaseHelper.saveSingleEvent(eventName);

    for(int i=0; i < numOfSteps; i++) {
        if(i == 0) now.add(Calendar.DAY_OF_MONTH, addBetweenEvents - 1); 
        else 
        now.add(Calendar.DAY_OF_MONTH, addBetweenEvents);

        if(i == numOfSteps-1) {
            databaseHelper.saveManagedEvent(id, stepHolder[i], location, 
                    new StringBuilder().append(eYear).append("-").append(pad(eMonth)).append(pad(eDay)).toString(), 
                    "00:00", 
                    new StringBuilder().append(eYear).append("-").append(pad(eMonth)).append(pad(eDay)).toString(), 
                    "00:00");
        } else { 
            databaseHelper.saveManagedEvent(id, stepHolder[i], location, 
                    new StringBuilder().append(now.get(Calendar.YEAR)).append("-").append(pad(now.get(Calendar.MONTH)+1)).append("-").append(pad(now.get(Calendar.DAY_OF_MONTH))).toString(), 
                    "00:00", 
                    new StringBuilder().append(now.get(Calendar.YEAR)).append("-").append(pad(now.get(Calendar.MONTH)+1)).append("-").append(pad(now.get(Calendar.DAY_OF_MONTH))).toString(), 
                    "00:00");
        }
    }

}//end of insertManagedEvents method 
```

MainActivity.java

```
...
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(requestCode == EVENT_ENTRY_REQUEST_CODE) {
        if(resultCode == RESULT_OK) {
            //send the database the info sent back from add event activity
            databaseHelper.saveSimpleEvent(data.getStringExtra("event"),data.getStringExtra("location"), 
                    data.getStringExtra("start_date"), data.getStringExtra("start_time"), 
                    data.getStringExtra("end_date"), data.getStringExtra("end_time"));

                agendaAdapter.changeCursor(databaseHelper.getAgendaInfo(getChosenDate()));

        }
    }
    if(requestCode == MANAGED_EVENT_LIST_REQUEST_CODE) {
        if(resultCode == RESULT_OK) {
            //Do stuff when managed list is working alright, and 
            //after user enters necessary info, in order to create the events into the database
            TimeManager timeManager = new TimeManager(databaseHelper, data.getStringExtra("manager_id"), 
                    data.getStringExtra("event_name"), data.getStringExtra("events_subject"), data.getStringExtra("location"), data.getStringExtra("end_time"));
            if(timeManager.checkValidManager()== false) {
                //tell user it failed due to the days not being correct in order to manage time
            } else {
                timeManager.createStepsArray();
                timeManager.insertManagedEvents();
                /*OR HANGS HERE MORE LIKELY SINCE THIS IS WHERE THE ERROR SAYS*/
            }
        }
    }
}//end of onActivityForResult Method
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:25:39.100

From your code I understand you are calling `AddManagedEventActivity` and sending extra `String.valueOf(id)` with tag `manager_id` . then in your `onActivityResult` you want to get data from `AddManagedEventActivity` ?? i think you should be using `intent.getExtra(..)` to get data from `AddManagedEventActivity` this answer is based on your code because you didnt give a short explanation of your purpose :P , sorry i couldnt comment, i dont have the rep :/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T05:32:10.180

Try limiting your loops to the size of the array:

```
Cursor stepsInfo = databaseHelper.getSteps(managerId);
for(int i=0; i < stepHolder.length; i++ ) { //Use stepHolder.length instead.
    stepsInfo.moveToPosition(i);
    stepHolder[i] = stepsInfo.getString(1);
}
stepsInfo.close(); 
```

Same with the for loop

```
for(int i=0; i < stepHolder.length; i++) { //stepHolder.length here too 
```

Notice that the error message is showing that you have an indexOutOfBounds, i.e., you're going too deep into the array. Restrict your loops to the array size or fix the way you get numOfSteps.

# java - 从另一个 java 进程调用 java 使其停止

> ID：10958522
> 
> 赞同：4
> 
> 时间：2012-06-09T05:06:18.170
> 
> 标签：java, multithreading, concurrency, parallel-processing

我有一个带有 2 个进程 java 的程序：processA 和 processB（2 个进程 java.exe 不是 2 个线程）。我使用下面的代码块从进程 A 调用 processB 此代码包含在下面的 RunTask 类中

```
public class RunTask implements Callable<Object> {

private String runParams;

public String getRunParams() {
    return runParams;
}

public void setRunParams(String runParams) {
    this.runParams = runParams;
}

@Override
public Object call() throws Exception {
    try {
        //System.out.println("run:" + runParams);
        Process procB = Runtime.getRuntime().exec("java -jar processB.jar);
        DataInputStream ls_in = new DataInputStream(procB.getInputStream());
        String ls_str;
        while ((ls_str = ls_in.readLine()) != null) {
            System.out.println(ls_str);
        }

    } catch (Exception exp) {
        exp.printStackTrace();
    }
    return null;
}
} 
```

和主类我使用执行器

```
 ExecutorService eservice = Executors.newSingleThreadExecutor();
        while (1 == 1) {
            String stringParams = getFilesNeedToImportAsString();
            if (stringParams.trim().isEmpty()) {
                long l1 = System.currentTimeMillis() - l;
                System.out.println("all time" + l1 / 1000);
                System.exit(100);
            }
            RunTask runTask = new RunTask();
            runTask.setRunParams(SystemInfo.RUN_COMMAND + stringParams);
            Future<Object> objectFuture = eservice.submit(runTask);
            while (!objectFuture.isDone()) {
                System.out.println("waiting the task running");
                Thread.sleep(500);
            }
        } 
```

但是当 processB 发生异常时，两个进程（processA，processB）似乎都被停止了，这是在 processB 上运行的代码

```
public Object call() {
    try {
        MutationResult result = mutator.execute();
        return "ok";
    } catch (Exception exp) {
        exp.printStackTrace();
        System.out.println("error on " + Thread.currentThread().getName() + "failed begin retry " + (++retryCount));
        call();
        System.out.println(retryCount + " completed");
        return "ok";
    }

} 
```

如果我单独运行processB（通过命令行）它永远不会发生，或者当这个问题发生时我使用taskmanager杀死proceesA（被调用者），processB继续运行

请任何人给我这个问题的解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:29:48.997

您等待`objectFuture` `isDone`方法完成。根据文档：

> isDone：如果此任务完成，则返回 true。完成可能是由于正常终止、异常或取消——在所有这些情况下，此方法将返回 true

发生异常时查看 processB 中的代码，您将`call()`再次递归执行。我知道您这样做是一种错误重试机制，但这是一个非常糟糕的主意，主要有两个原因： - 如果异常仍然存在，您最终会得到一个`StackOverflowException`. - 不满足任何条件`isDone`。

更好的选择是定义最大重试次数并尝试执行`mutator.execute()`。如果错误仍然存​​在，则抛出异常并完成执行。

另一种选择是等待 processB 完成最长时间，然后通过调用取消任务的执行`objectFuture.cancel(true)`。

关于 processA 的一些评论：在`RunTask`您不使用`runParams`这似乎是一些需要作为字符串导入的文件时。此外，您使用`readLine()`on `DataInputStream`which 是一种已弃用的方法。而是使用`InputStream`（例如`BufferedInputStream`）包裹在 an 中`InputStreamReader`，然后包裹在-`BufferedReader`然后调用`readLine()`.`BufferedReader`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T05:17:12.930

我在生成 exec 时遇到的一件事是，如果发生错误并且我没有设置线程来读取 ErrorStream，那么 ErrorStream 缓冲区可能会填满，此时一切都会停止等待我从 ErrorStream 缓冲区中清除一些文本。在我这样做之前，进程 B 不能再写任何错误，进程 A 正在等待进程 B 完成。

我的经验的最终结果：当你 exec() 时，总是设置一个线程来读取每个 InputStream 和 ErrorStream。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T05:18:23.663

`printStackTrace`将打印到标准错误，而不是标准输出。您还需要读取标准错误（这很棘手 - 您需要 2 个线程，每个流一个），或者改为打印到标准输出 ( `printStackTrace(System.out)`)。

# php - php中两个日期之间的差异

> ID：10958525
> 
> 赞同：0
> 
> 时间：2012-06-09T05:06:44.070
> 
> 标签：php, datetime

我将这两个日期存储在 mysql 中：

```
2012-10-05
2012-10-10 
```

我得到了使用 php/mysql 返回的日期，现在我需要找出将它们分开的天数。在本例中为 5 天。有什么建议最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:09:34.013

```
SELECT DATEDIFF(date1, date2)
FROM yourtable 
```

根据 MySQL 文档：[http ://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)

datediff() 返回`date1 - date2`天数之差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T05:11:42.367

```
$date1 = strtotime("2012-10-05");
$date2 = strtotime("2012-10-10");

$days = floor(abs($date2 - $date1)/ (60*60*24));

printf("%d days",$days); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T05:14:04.627

```
$date1 = new DateTime('2012-10-05');
$date2 = new Datetime('2012-10-10');
$interval = $date1->diff($date2);
echo $interval->format('%R%d days');  // +5 days 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T05:15:59.890

尝试这样的事情：

$date1 = "2007-03-24"; $date2 = "2009-06-26";

$diff = abs(strtotime($date2) - strtotime($date1));

$years = floor($diff / (365*60*60*24)); $months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24)); $days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));

printf("%d 年, %d 个月, %d 天\n", $years, $months, $days);

# iphone - iOS 5 的 Twitter 导致应用程序在 presentViewController 上崩溃：调用

> ID：10958528
> 
> 赞同：0
> 
> 时间：2012-06-09T05:07:05.647
> 
> 标签：iphone, twitter, crash

我有一个奇怪的问题。在模拟器上调用此方法没有任何问题，但在真实设备上它会兑现：

```
[self presentViewController:twitter animated:YES completion:nil]; 
```

这是方法：

```
- (IBAction)DeveloperTwitter:(id)sender {
    NSString* tweet = @"some tweet goes here..";
    if ([TWTweetComposeViewController canSendTweet]) {
        TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];        
        [twitter setInitialText:tweet];
        [self presentViewController:twitter animated:YES completion:nil];  
        twitter.completionHandler = ^(TWTweetComposeViewControllerResult res) {

            if(res == TWTweetComposeViewControllerResultDone) {

                UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"تم بنجاح" message:@"شكرا لك ، تم نشر التغريدة" delegate:self cancelButtonTitle:@"شكرًا" otherButtonTitles: nil];

                [alert show]; 
                alert = nil;   

            }
            [self dismissModalViewControllerAnimated:YES]; 
        };
    }    
    else {
        tweet = [NSString stringWithFormat:@"%@%@", @"http://twitter.com/home?status=", tweet];
        tweet = [tweet stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString: tweet]];
    }
    tweet=nil;
} 
```

我从普通的 UIViewController 调用该方法。我的设备正在运行：iOS 5.1

这是我设备的崩溃日志

```
Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x00000102, 0x2fe9ad14
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.CPLogging.settingsQueue
Thread 0 Crashed:
0   CoreFoundation                  0x3544ee4c 0x3544d000 + 7756
1   AppSupport                      0x366f5a28 0x366d5000 + 133672
2   libdispatch.dylib               0x343957e0 0x34393000 + 10208
3   libdispatch.dylib               0x34395640 0x34393000 + 9792
4   libdispatch.dylib               0x34395260 0x34393000 + 8800
5   libdispatch.dylib               0x3439590a 0x34393000 + 10506
6   libdispatch.dylib               0x34397618 0x34393000 + 17944
7   AppSupport                      0x366f6378 0x366d5000 + 136056
8   ManagedConfiguration            0x32673a7e 0x32670000 + 14974
9   libdispatch.dylib               0x34397618 0x34393000 + 17944
10  ManagedConfiguration            0x32673aca 0x32670000 + 15050
11  ManagedConfiguration            0x32674486 0x32670000 + 17542
12  ManagedConfiguration            0x32674b8a 0x32670000 + 19338
13  FTServices                      0x37baaae4 0x37b94000 + 92900
14  FTServices                      0x37baa85c 0x37b94000 + 92252
15  FTServices                      0x37baa7de 0x37b94000 + 92126
16  libdispatch.dylib               0x34397618 0x34393000 + 17944
17  FTServices                      0x37baa78c 0x37b94000 + 92044
18  IMAVCore                        0x34709372 0x34703000 + 25458
19  IMAVCore                        0x34728716 0x34703000 + 153366
20  IMAVCore                        0x347286a2 0x34703000 + 153250
21  libdispatch.dylib               0x34397618 0x34393000 + 17944
22  IMAVCore                        0x34728650 0x34703000 + 153168
23  UIKit                           0x332d09ce 0x32f37000 + 3774926
24  UIKit                           0x332d0b7e 0x32f37000 + 3775358
25  UIKit                           0x332d0e22 0x32f37000 + 3776034
26  UIKit                           0x331ecebe 0x32f37000 + 2842302
27  UIKit                           0x3302b666 0x32f37000 + 1001062
28  UIKit                           0x330295e8 0x32f37000 + 992744
29  UIKit                           0x330283a0 0x32f37000 + 988064
30  UIKit                           0x32fb7f5a 0x32f37000 + 528218
31  UIKit                           0x32f5d494 0x32f37000 + 156820
32  UIKit                           0x32f3f0f8 0x32f37000 + 33016
33  UIKit                           0x32f3ee54 0x32f37000 + 32340
34  UIKit                           0x32f3e990 0x32f37000 + 31120
35  UIKit                           0x330d7e9a 0x32f37000 + 1707674
36  UIKit                           0x33020a18 0x32f37000 + 956952
37  UIKit                           0x32f3ba80 0x32f37000 + 19072
38  UIKit                           0x32f3cd82 0x32f37000 + 23938
39  UIKit                           0x32f3d806 0x32f37000 + 26630
40  UIKit                           0x32f3d370 0x32f37000 + 25456
41  UIKit                           0x32fd3ff6 0x32f37000 + 643062
42  UIKit                           0x3301dbfe 0x32f37000 + 945150
43  UIKit                           0x3301c360 0x32f37000 + 938848
44  ع. المسلسلات                    0x000a397a 0x9a000 + 39290
45  UIKit                           0x33074614 0x32f37000 + 1299988
46  CoreFoundation                  0x354603f6 0x3544d000 + 78838
47  UIKit                           0x32f55e00 0x32f37000 + 126464
48  UIKit                           0x32f55dbc 0x32f37000 + 126396
49  UIKit                           0x32f55d9a 0x32f37000 + 126362
50  UIKit                           0x32f55b0a 0x32f37000 + 125706
51  UIKit                           0x32f56442 0x32f37000 + 128066
52  UIKit                           0x32f54924 0x32f37000 + 121124
53  UIKit                           0x32f54312 0x32f37000 + 119570
54  UIKit                           0x32f3a68e 0x32f37000 + 13966
55  UIKit                           0x32f39f34 0x32f37000 + 12084
56  GraphicsServices                0x370f9224 0x370f4000 + 21028
57  CoreFoundation                  0x354da51c 0x3544d000 + 578844
58  CoreFoundation                  0x354da4be 0x3544d000 + 578750
59  CoreFoundation                  0x354d930c 0x3544d000 + 574220
60  CoreFoundation                  0x3545c49e 0x3544d000 + 62622
61  CoreFoundation                  0x3545c366 0x3544d000 + 62310
62  GraphicsServices                0x370f8432 0x370f4000 + 17458
63  UIKit                           0x32f68cce 0x32f37000 + 203982
64  ع. المسلسلات                    0x0009ba7c 0x9a000 + 6780
65  ع. المسلسلات                    0x0009ba20 0x9a000 + 6688 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T03:28:28.920

经过几个小时的搜索，我终于找到了解决方案！

1.  这是 iOS 5.0 的 twiiter api 中的一个错误（如果您将应用程序定位到 5.1，它将解决它）
2.  但是，如果您仍想将您的应用程序定位到 iOS 5.0；您只需在 [product]-info.plist 的产品名称密钥中使用 ascii 字符
3.  如果您仍想使用非 ascii 标题作为产品名称，请改用捆绑名称（在同一个 plist 文件中）！

问题解决了！

经过数小时的搜索后，我“悲惨地”遇到了谷歌组中的解决方案。

[聊天记录的来源（&解决方案！）](https://groups.google.com/group/tapjoy-developer/browse_thread/thread/90fbeebc91109240/8ebc350a185c11e2?show_docid=8ebc350a185c11e2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T00:04:17.393

嗯....我认为这可能是一种更好的使用方式：

```
self presentModalViewController: 
```

比你现在正在做的事情。也不要使用完成处理程序/块尝试实现委托方法。[在此处](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html)查看文档。

# javascript - 如何处理跨度的更改文本

> ID：10958529
> 
> 赞同：39
> 
> 时间：2012-06-09T05:07:09.177
> 
> 标签：javascript, jquery

我正在使用jQuery ，我`span1`想在一个 span（称为 `span1`我如何处理跨度的文本更改？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-05-23T12:55:17.470

Span 默认没有 'change' 事件。但是您可以手动添加此事件。

监听 span 的 change 事件。

```
$("#span1").on('change',function(){
     //Do calculation and change value of other span2,span3 here
     $("#span2").text('calculated value');
}); 
```

无论您在哪里更改 span1 中的文本。手动触发更改事件。

```
$("#span1").text('test').trigger('change'); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-09T05:22:19.693

您可以使用更改 span1 文本的函数来更改其他文本。

作为一种解决方法，如果您真的希望它有一个`change`事件，那么不要将文本分配给 span 1。而是在 jQuery 中分配一个输入变量，向它写入一个更改事件，无论您更改 span1 的文本。而是更改输入变量的值，从而触发更改事件，如下所示：

```
var spanChange = $("<input />");
function someFuncToCalculateAndSetTextForSpan1() {
    //  do work
    spanChange.val($newText).change();
};

$(function() {
    spanChange.change(function(e) {
        var $val = $(this).val(),
            $newVal = some*calc-$val;
        $("#span1").text($val);
        $("#spanWhatever").text($newVal);
    });
}); 
```

虽然我真的觉得这种“变通方法”虽然在创建简单更改事件的某些方面很有用，但非常过度扩展，您最好在更改 span1 的同时对其他跨度进行更改。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-07-20T09:12:13.140

[在这里](https://stackoverflow.com/a/39233479/5912896)找到了解决方案

假设您有 span1，因为`<span id='span1'>my text</span>`
可以通过以下方式捕获文本更改事件：

```
$(document).ready(function(){
    $("#span1").on('DOMSubtreeModified',function(){
         // text change handler
     });

 }); 
```

# vb.net - HttpwebRequest 和响应需要时间

> ID：10958533
> 
> 赞同：0
> 
> 时间：2012-06-09T05:07:49.877
> 
> 标签：vb.net

**下面的代码需要 150 到 200 秒来读取数据（实际上我的响应数据非常大）请提供任何替代方案来解决此问题。**

```
Protected Function PostXml(ByVal url As String, ByVal xml As String) As String     
    Dim strResult As String = String.Empty   
    Dim bytes As Byte() = Encoding.UTF8.GetBytes(xml) 
    Dim request As HttpWebRequest = DirectCast(WebRequest.Create(url), HttpWebRequest)     
    request.Method = "POST"    
    request.ContentLength = bytes.Length    
    request.ContentType = "text/xml"   

    Using requestStream As Stream = request.GetRequestStream()    
            requestStream.Write(bytes, 0, bytes.Length)    
    End Using    

    Using response As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)   

         If response.StatusCode <> HttpStatusCode.OK Then   
                Dim message As String = [String].Format("POST failed. Received HTTP {0}", response.StatusCode)   
                Throw New ApplicationException(message)   

         Else   
                Dim reader As StreamReader = Nothing    
                Dim responseStream As Stream = response.GetResponseStream()    
                reader = New StreamReader(responseStream, Encoding.Default)    
                **strResult = reader.ReadToEnd()  'Here is taking to much time**     
                response.Close()    
                responseStream.Close()     
                reader.Close()     
          End If     
    End Using 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:13:58.673

如果您正在控制响应（url 指向您管理的服务器），您可以打开 GZIP 压缩。

[http://blog.arvixe.com/how-to-enable-gzip-on-iis7/](http://blog.arvixe.com/how-to-enable-gzip-on-iis7/)

# c# - （ext.net）如何在后面的代码中双击列表视图项

> ID：10958534
> 
> 赞同：1
> 
> 时间：2012-06-09T05:08:57.990
> 
> 标签：c#, ext.net

在 ext.net 库中，如何从服务器端代码中获取列表视图中的双击项目？我有一个多选列表视图，但我想添加额外的功能来双击和项目并显示有关它的一些详细信息。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:55:15.447

尝试使用这个：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <script runat="server">
        protected void Page_Load(object sender, EventArgs e) {
            if (!X.IsAjaxRequest) {
                this.Store1.DataSource = this.Data;
                this.Store1.DataBind();
            }
        }

        private object[] Data {
            get {
                return new object[]
            {
                new { header = "3m Co" },
                new { header = "Coca Cola" },
                new { header = "Pepsi Co" },
            };
            }
        }

        protected void ShowHello(object sender, DirectEventArgs e)
        {
            X.Msg.Alert("Hello", "Hello " + e.ExtraParams["SayHelloTo"]).Show();
        }

    </script>
</head>
<body>
    <form id="Form1" runat="server">
        <ext:ResourceManager ID="ResourceManager1" runat="server" />

        <ext:ListView 
                    ID="ListView1" 
                    runat="server"
                    MultiSelect="true"
                    ReserveScrollOffset="true">
            <DirectEvents>
                <DblClick OnEvent="ShowHello">
                    <ExtraParams>
                        <%--Sending Extra Params, which will contain header value, don't forget to set mode to Raw
                        All other properties you can find in item.getStore().data.items[index].data--%>
                        <ext:Parameter runat="server" Name="SayHelloTo" Value="item.getStore().data.items[index].data.header" Mode="Raw"></ext:Parameter>
                    </ExtraParams>
                </DblClick>
            </DirectEvents>
                    <Store>
                        <ext:Store ID="Store1" runat="server">
                            <Reader>
                                <ext:JsonReader IDProperty="header">
                                    <Fields>
                                        <ext:RecordField Name="header" />
                                    </Fields>
                                </ext:JsonReader>
                            </Reader>
                        </ext:Store>
                    </Store>
                    <Columns>
                        <ext:ListViewColumn 
                            Header="Header" 
                            Width="1" 
                            DataIndex="header"  
                            />
                    </Columns> 
                </ext:ListView>
   </form>
</body>
</html> 
```

# iphone - 每次加载 Navigator 视图控制器时如何执行一个函数？

> ID：10958537
> 
> 赞同：0
> 
> 时间：2012-06-09T05:09:35.747
> 
> 标签：iphone, xcode, uiviewcontroller, uinavigationcontroller

我的应用程序有第二个视图，显示在导航栏上。我想在第二个视图打开时执行一个函数。但是当我打开第二个视图并返回主视图并重新打开第二个视图时，它显示了最后的更改并且没有新的更改。每次显示第二个视图时如何执行功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T15:35:28.643

为什么不直接使用`-(void)viewWillAppear:(BOOL)animated`第二个视图控制器的（或 didAppear）方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T07:22:38.500

您可以编写一个在第二个视图中加载数据的方法。例如，如果您将数据存储在数组中，您可以通过以下方式执行：
- (void)loadDataInSecondView:(NSArray*)inputData { //写入逻辑以在第二个视图中加载数据 }

当您呈现第二个视图时，只需调用此方法即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T05:23:53.660

您应该全局初始化 mainView 上的第二个控制器。

```
- (void)functionSecondView:(BOOL)isReload {
        // Do something on your second contoller(object values)
         if(isReload) {
            [secondContoller reload];
         }
         [self.navigationController pushViewController:secondContoller animated:YES];
 } 
```

注意：reload函数如果要清除secondController上的数据

# windows-phone-7 - 如何通知视图属性已更改？

> ID：10958543
> 
> 赞同：2
> 
> 时间：2012-06-09T05:11:41.833
> 
> 标签：windows-phone-7, inotifypropertychanged

我有一个 PopUp 控件，其 IsOpen 属性绑定到实现 INotifyPropertyChanged 的​​ ViewModel 中名为 IsOpen 的属性，我希望 PopUp 控件根据 ViewModel 的 IsOpen 值自动关闭或打开，我使用 MVVM 模式，代码如下：

ViewModel 中的代码：

```
public class MainViewModel : ViewModelBase
{

    private  bool _isOpen;
    public bool IsOpen
    {
        get
        {

            return this._isOpen;
        }

        set
        {
            if (this._isOpen != value)
            {
                this._isOpen = value;
                RaisePropertyChanged("IsOpen");
            }
        }
    } 
```

}

视图中的代码：//Main是下面MainViewModel的一个实例

弹出窗口 x:Name="popUp" IsOpen="{Binding Main.IsOpen}"

当然，ViewModel 中有一个方法用于更改 IsOpen 属性，我可以清楚地看到它的更改，但它没有通知视图，我错过了什么吗？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:25:33.600

我将为该弹出窗口创建一个用户控件，并为该控件创建一个 VM。然后，我将创建该用户控件和 VM 的实例，并从我的主视图模型中显示它。这样你也可以控制弹出窗口的视图模型。

如果您只想显示一个基本的弹出窗口，则此解决方案过于工程化。

```
public class Popup: UserControl
{

     public Popup(PopupVM model)
     {
         this.DataContext = model;
     }
}

public class PopupVM
{
...
}

public class MainViewModel : ViewModelBase
{
....

// Called with an IAction
private void ShowPopup()
{
   PopupVM model = new PopupVM();
   this.popup = new Popup(model); // Control is a field in this VM.
   popup.Show();
}

private void ClosePopup()
{
    // Gather some info if you want
    this.popup.Close();
}
} 
```

# c++ - () 运算符重载示例

> ID：10958557
> 
> 赞同：0
> 
> 时间：2012-06-09T05:14:18.893
> 
> 标签：c++, operator-overloading

我试图理解 C++ 中的运算符重载，并且可以看到在 + 和 [] 等运算符上仔细使用时的用处。我现在对 () 的重载感兴趣。Boost 似乎将它与它的统计类一起使用，我可以使用它们，但并不真正了解我在做什么。

谁能提供一个简单的例子来说明重载 () 运算符何时有用？谢谢大家皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:32:20.007

重载 operator() 的常见用途是用于函数对象或`functors`. 您可以使用定义 operator() 的类的对象，并将其用作函数，如下例所示：

```
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

class multiply
{
private:
    int x;
public:
    multiply(int value):x(value) { }
    int operator()(int y) { return x * y; }
    int getValue() { return x; }
};

int main()
{
    multiply m(10); //create an object
    cout << "old value is " << m.getValue() << endl;
    int newValue = m(2); //this will call the overloaded () 
    cout << "new value is " << newValue << endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:53:59.903

简介： 在 C++ 类中重载 () 运算符可以让您实现具有不同类型和参数数量的类方法，为每个方法提供不同的功能。重载 () 时需要小心，因为它的用法没有提供关于正在做什么的线索。它的用途有限，但对于矩阵操作之类的事情可能很有效。

来自：[重载 () 运算符 (learncpp.com)](http://www.learncpp.com/cpp-tutorial/99-overloading-the-parenthesis-operator/ "重载 () 运算符")

# jquery - 计算所选单选值的总和以动画条形图

> ID：10958558
> 
> 赞同：0
> 
> 时间：2012-06-09T05:14:25.127
> 
> 标签：jquery

我有一组 5 个带有是/否单选按钮的问题。否按钮的值为 0，而是按钮的值为 20（表示 20%，因此 5 x 是答案 = 100%）。

```
<div id="test-questions">
<p>Question 1
  <input type="radio" id="r1" name="Set1" value="0" /><label for="r1"> No</label><br>
  <input type="radio" id="r2" name="Set1" value="20" /><label for="r2"> Yes</label>
</p>
<p>Question 2
  <input type="radio" id="r3" name="Set2" value="0" /><label for="r3"> No</label><br>
  <input type="radio" id="r4" name="Set2" value="20" /><label for="r4"> Yes</label>
</p>
<p>Question 3
  <input type="radio" id="r5" name="Set3" value="0" /><label for="r5"> No</label><br>
  <input type="radio" id="r6" name="Set3" value="20" /><label for="r6"> Yes</label>
</p>
<p>Question 4
  <input type="radio" id="r7" name="Set4" value="0" /><label for="r7"> No</label><br>
  <input type="radio" id="r8" name="Set4" value="20" /><label for="r8"> Yes</label>
</p>
<p>Question 5
  <input type="radio" id="r9" name="Set5" value="0" /><label for="r9"> No</label><br>
  <input type="radio" id="r10" name="Set5" value="20" /><label for="r10"> Yes</label>
</p>
<p><input id="total" type="hidden" name="total" value="" /></p>
</div> 
```

我有以下脚本来计算总数：

```
function setRadios(){
function sumRadios(){
    var total = 0, i = 1, oForm = this.form;
    while (radgrp = oForm.elements['Set' + (i++)]){
        j = radgrp.length;
        do
            if (radgrp[--j].checked){
                total += Number(radgrp[j].value);
                break;
            }
        while (j);
    }
    oForm.elements.total.value = total.toFixed(2);
}

var i = 0, input, inputs = document.getElementById('test-questions').getElementsByTagName('input');
while (input = inputs.item(i++))
    if (input.name.match(/^Set\d+$/))
        input.onclick = sumRadios;
}
onload = setRadios; 
```

这一切都正常工作（尽管如果您有更优雅的解决方案，请随意说）但我现在想做的是根据总数更改图形，因此如果总数为“20”，则显示div1，如果是 '40' 则显示 div2，依此类推。这个想法是动画条形图，即 0%、20%、40%、60%、80% 或 100%。

我以前从未使用过 jQuery，所以请善待我 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:48:40.090

您可以设置一个空的 Div，具有背景颜色和宽度 0，然后将该 Div 的 with 更改为“total”值：

```
<div id="showbar" style="background-color:blue;height:1em;width:0;"></div> 
```

在 sumRadios() 中：

```
document.getElementById('showbar').style.width = total+'px'; 
```

# ios - indexPath 处的行的高度抛出 EXC 错误访问错误

> ID：10958561
> 
> 赞同：3
> 
> 时间：2012-06-09T05:15:18.080
> 
> 标签：ios, objective-c, uitableview, heightforrowatindexpath

因此，当我输入下面的 if 语句时，我收到了 EXC Bad Access 错误。令人沮丧的是，我已经确认 indexPath 和 tableView 指向正确的位置。此外，完全相同的 if 语句在我的代码中的其他地方在同一个实现文件中使用，没有错误。

将不胜感激。

```
-(CGFloat)tableView:(UITableView *)tableView 
heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if([indexPath row] == ([tableView numberOfRowsInSection:[indexPath section]]-1))
    {
        return 44.0;
    } else {
        return 60.0;
    }                       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:54:25.317

**`[indexPath section]-1`对于索引为“0”的部分，您无法访问。**从此语句中删除 -1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:28:02.523

```
if([indexPath row] == ([tableView numberOfRowsInSection:[indexPath section]-1]))
    {
        return 44.0;
    } else {
        return 60.0;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T05:28:12.883

根据您的逻辑`[indexPath section]-1`，第 0 部分的第一部分中的行数应为 -1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T06:21:10.670

解决您的要求的更好解决方案不是询问 tableview 一个部分中有多少行，而是询问您的数据源有多少行。

因此，例如，如果您的数据源是一个数组，请检查 array.count （当然，您有一些其他数据源，因为您有部分，但您明白了）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-18T14:41:31.287

*我知道这是一个老问题，但将来可能对其他人有帮助。*

**解决方案：**

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSInteger numOfRowsInSection = [tableView.dataSource tableView:tableView numberOfRowsInSection:indexPath.section];
    if (indexPath.row == (numOfRowsInSection - 1))
        return 44.0;
    else
        return 60.0;
} 
```

**解释：**

发生的情况是系统再次调用的每个`[tableView numberOfRowsInSection:[indexPath section]]`调用都会`[tableView heightForRowAtIndexPath:indexPath]`创建一个无限循环，最终应用程序崩溃。

使用`dataSource`属性 of`tableView`来防止循环，如下所示：

```
[tableView.dataSource tableView:tableView numberOfRowsInSection:[indexPath section]] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-03-07T03:21:43.783

您正在使用 tableView 委托方法。试试这个：

```
 if([indexPath row] == ([self tableView:tableView numberOfRowsInSection:indexPath.section]-1)) 
```

# java - 从大表中读取时出现 java.lang.OutOfMemoryError

> ID：10958571
> 
> 赞同：3
> 
> 时间：2012-06-09T05:18:46.233
> 
> 标签：java, jdbc, out-of-memory

我正在尝试从 PostgreSQL 中的一个非常大的表（300GB）预先生成报告。我做这样的事情：

```
rs = stmt.executeQuery("SELECT * FROM tbl");
System.out.println("select all finished");
while (rs.next()) {
    /* generate report and save it in report table */
    /* generated reports are not in memory, 
     * They are saved in a summary table in each iteration */
} 
```

当我启动它给出的应用程序时`Exception in thread "main" java.lang.OutOfMemoryError: Java heap space`。我尝试使用`stmt.setFetchSize(1000)`但它并没有解决问题。

解决办法是什么？我在 Debian 6.0.5 和 openJDK 6 上使用 PostgreSQL 8.4.11。

**[更新]**

打印的堆栈跟踪显示`OutOfMemoryError`异常已`rs = stmt.executeQuery("SELECT * FROM tbl");`在线生成。也`System.out.println("select all finished");`从不显示。

1.  我正在运行`autocommit`模式。
2.  `stmt.getResultSetConcurrency()`返回 1007。
3.  `stmt.getResultSetHoldability()`返回 2。
4.  `rs.getType()`返回 1003。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T07:38:18.997

问题可能是 PostgreSQL 只`fetchSize`在少数情况下使用。请参阅：http: [//jdbc.postgresql.org/documentation/91/query.html#fetchsize-example](http://jdbc.postgresql.org/documentation/91/query.html#fetchsize-example)

> *   与服务器的连接必须使用 V3 协议。这是服务器 7.4 及更高版本的默认设置（仅受支持）。
> *   连接不得处于自动提交模式。后端在事务结束时关闭游标，因此在自动提交模式下，后端将在可以从中获取任何内容之前关闭游标。
> *   必须使用 ResultSet.TYPE_FORWARD_ONLY 的 ResultSet 类型创建语句。这是默认设置，因此无需重写代码即可利用这一点，但这也意味着您不能向后滚动或以其他方式在 ResultSet 中跳转。
> *   给出的查询必须是单个语句，而不是用分号串在一起的多个语句。

因此，如果您在自动提交中执行此操作，或者使用`TYPE_FORWARD_ONLY`PostgreSQL 以外的结果集类型将获取所有行。还查看 PostgreSQL JDBC 9.0-801 驱动程序的来源，看起来使用可保存的结果集也会使其获取所有行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:34:44.570

我不认为你有什么会导致那种错误。我相信垃圾收集器会随着您的迭代而出现`rs.next()`，因此您不应该遇到内存问题。它可能与您尝试对结果集执行的操作有关。在不确切知道你在做什么的情况下，我只能猜测你正在尝试将所有内容存储在内存中的对象中。因此，如果您将值存储到 a`StringBuilder`或其他东西中，那将是一个问题。我建议您将结果写入磁盘，而不是尝试将其全部收集到内存中的对象中（同样，我只是在猜测您在做什么，因为您没有提供那种信息）。在[Java Helper Library](https://github.com/kentcdodds/Java-Helper)中，有一个[`resultSetToCSVFile(ResultSet rs, String destination)`](https://github.com/kentcdodds/Java-Helper/blob/master/src/com/kentcdodds/javahelper/helpers/SQLHelper.java#L86)您可能会觉得有帮助的方法。以这种方式处理它可以防止您将其全部保存在内存中，但您可以编写您正在尝试的报告。顺便说一句，要做到这一点，您需要包含[opencsv 库](http://opencsv.sourceforge.net/)。或者您可以通过包含[Java Helper Library](https://github.com/kentcdodds/Java-Helper/tree/master/store)直接调用该方法。

```
 /**
   * Prints the given ResultSet to a comma separated file (the destination)
   *
   * @param rs
   * @param destination
   * @throws SQLException
   * @throws FileNotFoundException
   */
  public static void resultSetToCSVFile(ResultSet rs, String destination) throws SQLException, FileNotFoundException, IOException {
    ResultSetMetaData metaData = rs.getMetaData();
    int columnCount = metaData.getColumnCount();
    String[] header = new String[columnCount];
    for (int i = 0; i < columnCount; i++) {
      header[i] = metaData.getColumnName(i + 1);
    }
    File file = new File(destination);
    IOHelper.checkDirectory(file);
    try (PrintWriter pw = new PrintWriter(file); CSVWriter writer = new CSVWriter(pw)) {
      writer.writeNext(header);
      while (rs.next()) {
        String[] row = new String[columnCount];
        for (int i = 0; i < columnCount; i++) {
          String string = rs.getString(i + 1);
          if (string == null) {
            string = "";
          }
          row[i] = string;
        }
        writer.writeNext(row);
      }
    }
  } 
```

# c# - 如何按列的列值对数据表进行分组？

> ID：10958572
> 
> 赞同：0
> 
> 时间：2012-06-09T05:19:12.643
> 
> 标签：c#, asp.net

有人可以告诉我如何对数据表列值应用过滤器，如下所示是数据表的列值现在在我的网格标题中我有一个下拉列表，其中包含上述列（如 sd、tf、er）的唯一值。现在我希望数据表使表值按下拉列表选定值分组。

所以我的痛苦是我无法按列值对数据表的值进行分组。

分组值必须位于下表的顶部。

```
 protected void ddlSortBy_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownList ddl = (DropDownList)(sender);
        string ddlValue = ddl.SelectedValue;
        customerDetailGrid.Sort(ddlValue, SortDirection.Ascending);
    }
    protected void customerDetailGrid_Sorting(object sender, GridViewSortEventArgs e)
    {
        SqlCommand cmd = new SqlCommand("PopulateCustomer");
        cmd.CommandType = CommandType.StoredProcedure;
        DataTable dtSortTable = DB.ExecuteDataTableCommand(cmd);//customerDetailGrid.DataSource as DataTable;

        if (dtSortTable != null)
        {
            DataView dvSortedView = new DataView(dtSortTable);
            dvSortedView.Sort = e.SortExpression + " " + getSortDirectionString(e.SortDirection);
            customerDetailGrid.DataSource = dvSortedView;
            customerDetailGrid.DataBind();
        }
    }

    private static string getSortDirectionString(SortDirection sortDireciton)
    {
        string newSortDirection = String.Empty;
        if (sortDireciton == SortDirection.Ascending)
        {
            newSortDirection = "ASC";
        }
        else
        {
            newSortDirection = "DESC";
        }
        return newSortDirection;
    } 
```

# android - 两个带有单独 onTouch 事件的图像视图

> ID：10958574
> 
> 赞同：0
> 
> 时间：2012-06-09T05:19:46.517
> 
> 标签：android, android-layout

我有两个图像视图，我在其中使用 setImageBitmap 添加图像，并将 setOnTouchListener 应用于它们。但这里的问题是，第一次添加第一个 img 时，它通过触摸移动，但是当我添加第二个 img 时，第二个 img 移动，但之后我无法通过触摸移动第一个 img。对不起英语和提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:29:58.090

您必须分别为两个图像提供 onTouchListener

```
 ImageView first_image=new ImageView(this);
   first_image.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction()==MotionEvent.ACTION_UP)
                {

                }
                if(event.getAction()==MotionEvent.ACTION_DOWN)
                {

                }
                if(event.getAction()==MotionEvent.ACTION_MOVE)
                {
                    //Code for image moving
                }
            return false;
        }
    });

        ImageView second_image=new ImageView(this);
    second_image.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction()==MotionEvent.ACTION_UP)
                {

                }
                if(event.getAction()==MotionEvent.ACTION_DOWN)
                {

                }
                if(event.getAction()==MotionEvent.ACTION_MOVE)
                {
                    //code for image moving
                }
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:39:27.363

请为此尝试以下代码，它可能会对您有所帮助并使用 Imageview 而不是 Textview。

```
tv1 = (TextView)findViewById(R.id.text_view1);
tv1.setOnTouchListener(new View.OnTouchListener() {         

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        layoutParams1 = (RelativeLayout.LayoutParams) tv1.getLayoutParams();
        switch(event.getActionMasked())
        {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_MOVE:
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();
                if (x_cord > windowwidth) {
                    x_cord = windowwidth;
                }
                if (y_cord > windowheight) {
                    y_cord = windowheight;
                }
                layoutParams1.leftMargin = x_cord - 25;
                layoutParams1.topMargin = y_cord - 75;
                tv1.setLayoutParams(layoutParams1);
                break;
            default:
                break;
        }
        return true;
    }
});

tv2 = (TextView)findViewById(R.id.text_view2);
tv2.setTextColor(Color.MAGENTA);
tv2.setOnTouchListener(new View.OnTouchListener() {         

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        layoutParams2 = (RelativeLayout.LayoutParams) tv2.getLayoutParams();
        switch(event.getActionMasked())
        {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_MOVE:
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();
                if (x_cord > windowwidth) {
                    x_cord = windowwidth;
                }
                if (y_cord > windowheight) {
                    y_cord = windowheight;
                }
                layoutParams2.leftMargin = x_cord - 25;
                layoutParams2.topMargin = y_cord - 75;
                tv2.setLayoutParams(layoutParams2);
                break;
            default:
                break;
        }
        return true;
    }
}); 
```

# c - 第一个元素偏移

> ID：10958576
> 
> 赞同：3
> 
> 时间：2012-06-09T05:19:54.703
> 
> 标签：c, malloc, free, offset

是保证，结构的第一个元素的偏移量为 0？为了更准确，让我们考虑

```
struct foo {
int a;
double b;
};
struct foo *ptr=malloc(sizeof(struct foo));
int *int_ptr = &ptr->a;
free(int_ptr) 
```

是否保证它在任何操作系统或任何其他因素下始终有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T05:23:51.417

是的，这是有保证的。会给你一个标准的报价，让我查一下。

**C99 标准：§6.7.2.1**

**第 12 段**

> 在结构对象中，非位域成员和位域所在的单元的地址按声明顺序递增。**一个指向结构对象的指针，经过适当的转换，指向它的初始成员（或者如果该成员是位域，则指向它所在的单元），反之亦然。结构对象中可能有未命名的填充，但不是在其开头。**

# mysql - MySQL在没有自动增量的情况下获得下一个唯一值

> ID：10958577
> 
> 赞同：0
> 
> 时间：2012-06-09T05:20:05.940
> 
> 标签：mysql, unique-constraint, table-locking

我有一个 MySQL 数据库 (InnoDB)，我正在开发用于跟踪我组织中的工单。有多个“站点”，每个站点的工单编号从 100 开始。

```
WorkorderID    SiteID    SiteWorkorderNum
     1           1            100
     2           1            101
     3           2            100 
```

**WorkorderID**是自动增量字段。
**SiteID**和**SiteWorkorderNum**都设置为唯一约束。

每当要为特定站点插入新的工作订单时，应用程序都会检查登录者的 siteid 的 max(SiteWorkorderNum)，并将该值返回到插入语句。我要避免的问题是，如果同一站点的两个用户都同时输入新的工作订单。

我有几个可能的解决方案，但我想看看是否有更好的方法，因为每个都有它的缺点，但我确信一个会比另一个更好，当然我对新想法持开放态度。

**1)**锁定表以保证在我们检索并插入我们的值之前没有其他用户检索 SiteWorkorderNum 值（但是假设我们每分钟有成千上万的用户试图输入工作订单，表锁不会减慢速度吗？ )

**2）**不要锁定表，并检索下一个可用的 SiteWorkorderNum 并尝试插入到数据库中，如果我收到唯一约束错误，则捕获错误并重试，直到我成功。（这可能会释放表，但再次假设我们在同一个站点有数千个用户，多个数据库调用会有点低效吗？）

我是否对这些解决方案中的任何一个“可能”影响性能过于偏执？当然，我没有成千上万的用户，但我想在这个设计中应用最佳实践，以防我曾经从事过流量很大的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T06:14:14.207

One option is to use transactions. If you do the `SELECT MAX(SiteWorkorderNum) ... WHERE SiteID=...` together with the resulting insert, then everything should work. The only problem is that your transactions might fail, which could be bad for the user experience.

The other scheme which I've used before is to have an allocation table with `SiteId` and `NextWorkorderNum` columns. Just do `UPDATE SiteWorkorderAlloc SET @Num=NextWorkorderNum, NextWorkorderNum=NextWorkorderNum+1 WHERE SiteId=...`. Then grab @Num to use as your workorder number in a subsequent insert. It works fine, the only minor drawback being that if there is a crash between getting the workorder number and the insert, that workorder number is lost (never used).

# windows-phone-7 - Windows phone 7 中的各种设备发现方法

> ID：10958579
> 
> 赞同：0
> 
> 时间：2012-06-09T05:20:40.880
> 
> 标签：windows-phone-7, discovery

大家好，在 windows phone 7 中发现设备或桌面客户端的各种方法是什么？

我使用了 Udpanysourcemulticast 客户端，它只能在 wi-fi 中使用。wp7中不支持UDP广播。那我还能用什么来发现网络中的设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T22:38:57.307

您可以使用 udp 套接字发送 sspd 发现消息，然后侦听响应。我用过这种方法，效果很好。发布的代码太多，但如果你用谷歌搜索“wp7 ssdp:discover”，你应该会找到几个例子。

# ruby-on-rails - 如何在 collection_select 中小写选项文本？

> ID：10958583
> 
> 赞同：2
> 
> 时间：2012-06-09T05:21:14.270
> 
> 标签：ruby-on-rails

在 Rails 应用程序中，我试图在选择标记中格式化值。

就像是

```
<%= f.collection_select(:country_id, Country.order(:name), :id, :name.to_s.downcase) %> 
```

downcase 方法没有任何效果。我应该能够以这种方式使用它吗？如果没有，我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:35:04.897

您可以为模型添加一个方法并为其添加一个符号

见[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)

```
class Country
  def name_to_lower
    self.name.downcase
  end
end

<%= f.collection_select(:country_id, Country.order(:name), :id, :name_to_lower) %> 
```

或使用选择 - [http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)

```
<%= f.select(:country_id, Country.order(:name).map {|x| [x.name.downcase, x.id] } %> 
```

如果您的数据库区分大小写，您可能需要指定大小写排序

```
<%= f.select(:country_id, Country.order("UPPER(name)").map {|x| [x.name.downcase, x.id] } %> 
```

# php - 在 PHP 类中创建 cURL 方法

> ID：10958586
> 
> 赞同：0
> 
> 时间：2012-06-09T05:22:04.537
> 
> 标签：php, oop, curl

我正在尝试创建一个使用 cURL 向 Twitter API 发出请求的类。我已经对 PHP 中的面向对象编程进行了一些研究，但我不太清楚这应该如何工作。以下代码返回 NULL：

```
 <?php

    class twitter {

      public function curlQuery($url) {
      $ch = curl_init();

      curl_setopt($ch, CURLOPT_URL, $url);
      curl_setopt($ch, CURLOPT_HEADER, 0);
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, True);

      $json = curl_exec($ch);

      curl_close($ch);

      $array = json_decode($json);
      return var_dump($array);
      }
}

$object1 = new twitter;
$object1->url = "http://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=2";
$object1->curlQuery($object1->url);

 ?> 
```

另外，我有点不确定何时在 PHP 类中使用`$this->variable`vs。`$variable`一个类中提到的所有变量不应该被引用为`$this->variable`？为什么你不想引用当前对象的变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T05:30:17.897

那么，为什么要将 url 存储在对象中，然后将该变量作为参数传递给同一对象的方法？似乎毫无意义，因为那时你可以做一些事情，比如：

```
$object1->url = 'blahblahblah';
$object1->curlQuery(); // <---note, no parameter 
```

然后在 curlQuery 方法中：

```
curl_setopt($ch, CURLOPT_URL, $this->url); 
```

至于PHP 中的`$this->variable`vs `$variable`，`$this->variable`使该变量成为对象的成员。它将可用于对象中的所有方法。`$variable`其本身将只是单个方法中的局部变量。当该方法返回时，局部变量被销毁并且不再可用于其他方法。

简而言之，`$this->variable`用于您需要在对象内和多个方法调用中持久化的东西。用于`$variable`单一方法中的临时存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T05:29:24.660

当变量被定义为类的属性时，在成员函数中使用它们时，您应该使用 $this->variablename。但这**并不意味着**： **类中提到的所有变量都被引用为 $this->variable**

您可以通过其他方式在成员函数中使用局部变量。这将在定义的特定功能内具有范围。

喜欢

```
class twitter 
{
   var $apikey;

   function displayKey()
   {
     $k = 1;
     $this->apikey += $k;
     echo $this->apikey;
   }

 } 
```

对于引用 apikey，我们使用 $this->apikey，对于函数内部的本地变量，我们使用相反的方式。

# javascript - 如何在 Dynatree prog 中删除和添加节点

> ID：10958589
> 
> 赞同：2
> 
> 时间：2012-06-09T05:22:48.637
> 
> 标签：javascript, jquery, dynatree, jquery-dynatree

如何在不干扰其他节点的情况下从 Dynatree 删除和添加节点？

我有一个带有复选框的 Dynatree 用户可以在弹出窗口中从节点列表中添加/删除节点。在更新数据时应该添加/删除而不干扰先前检查的节点。

# java - 在众多组件中重绘单个组件

> ID：10958591
> 
> 赞同：3
> 
> 时间：2012-06-09T05:23:00.920
> 
> 标签：java, swing, awt, repaint, java-2d

我有一个关于在 Java 中重新绘制图形对象的问题。

我有一个`JPanel`在其上绘制多边形或矩形的。当我在一个多边形中双击时，该多边形被识别并以某种颜色呈现。但是，我这样做的方式似乎非常无效，因为我重新粉刷了整个面板，而只需要重新粉刷其中一个。现在我的问题是：

我们可以为`Rectangle`或`GeneralPath`（用作多边形）定义和调用绘制方法吗？如果是，请您推荐一个链接来解释这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T05:30:56.967

见[`repaint(Rectangle)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#repaint%28java.awt.Rectangle%29)。

> 如果组件正在显示，则将指定区域添加到脏区域列表。在所有当前挂起的事件都被调度后，组件将被重新绘制。

# c# - c# winforms如何获取最高的ColumnIndex

> ID：10958594
> 
> 赞同：0
> 
> 时间：2012-06-09T05:23:43.653
> 
> 标签：c#, winforms, datagridview

我需要在 DataGridView 中的 SelectedCells 中获得最高的 ColumnIndex。

int i = theHighestColumnIndexAmongSelectedCells。

或者

```
foreach (DataGridViewCell cell in dgv.SelectedCells)  
if cell.ColumnIndex is theHighest  
int i = cell.ColumnIndex. 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:28:50.310

使用 LINQ [Max()](http://msdn.microsoft.com/en-us/library/bb534962.aspx)函数的最简单方法：

```
int max = dgv.SelectedCells.Cast<DataGridViewCell>().Max(c => c.ColumnIndex); 
```

# php - 使用PHP在一行中获取所有数据而不重复

> ID：10958595
> 
> 赞同：1
> 
> 时间：2012-06-09T05:23:47.987
> 
> 标签：php, mysql, repeat

伙计们！我想知道如何在不重复的情况下连续获取所有数据。

例如，这是我在表格中的行

```
| category |
+----------+
|   HTML   |
|   HTML   |
|   HTML   |
|   CSS    |
|    JS    |
|    JS    | 
```

好的，例如，我想用重复来回显所有类别，所以结果必须是这样的

```
| HTML |
| CSS  |
|  JS  | 
```

代替...

```
| HTML |
| HTML |
| HTML |
| CSS  |
|  JS  |
|  JS  | 
```

我怎样才能在查询中做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:25:44.250

```
SELECT category
FROM yourtable
GROUP BY category 
```

或者

```
SELECT DISTINCT category
FROM yourtable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:25:42.783

`SELECT DISTINCT columnName FROM t1`

# iphone - 如何在 iphone 中设置表格视图单元格（基于导航的应用程序）的字体样式

> ID：10958599
> 
> 赞同：6
> 
> 时间：2012-06-09T05:24:08.257
> 
> 标签：iphone, xcode

请帮我。如何以编程方式为表格视图单元格设置不同的字体样式（表格视图单元格中的时尚句子）？？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-09T05:35:22.610

您可以按照本指南在您的应用程序上添加自定义字体。

[在 iphone 上添加自定义字体](https://stackoverflow.com/questions/10922002/adding-custom-font-on-iphone/10922060#10922060)

然后你可以调用这个代码来设置字体和字体大小

```
cell.textLabel.font = [UIFont fontWithName:@"custom" size:12.0f] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-09T05:37:39.217

您可以在 UIFont 的帮助下设置它，请参阅此代码 -

```
cell.textLabel.textColor=[UIColor whiteColor];
cell.textLabel.font=[UIFont fontWithName:@"Arial Rounded MT Bold" size:15.0];
cell.textLabel.numberOfLines=2;
cell.textLabel.lineBreakMode=UILineBreakModeMiddleTruncation;
cell.textLabel.backgroundColor=[UIColor clearColor]; 
```

这是 UITableViewCell 的许多属性，它们改变了它的外观。您还可以像这样在 UITableViewCell 上设置 UILabel -

```
[cell.contentView addSubview:lblView];
//lblView is your UILabel you can set its UIFont whatever you want 
```

谢谢你！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T05:30:43.637

如果您使用的是标准[UITableViewCell](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html)，则有一个[" `textLabel`" 属性](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableViewCell/textLabel)，您可以访问并设置其字体和大小（您可以通过 UILabel 的[`font`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instp/UILabel/font)属性执行此操作）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T05:29:58.803

从 iOS 4 开始，可以使用自定义字体。这篇文章展示了如何将它们包含到您的项目中以及如何在您的视图中设置它们：http: [//blog.beefyapps.com/2010/06/custom-fonts-in-ios-4/](http://blog.beefyapps.com/2010/06/custom-fonts-in-ios-4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T06:08:49.417

您可以通过以下方式添加字体

```
 cell.textLabel.font = [UIFont fontWithName:@"Arail" size:12.0f]; 
```

或者

根据需要提供字体名称

```
 cell.textLabel.font = [UIFont fontWithName:@"yourFontNameHere" size:12.0f]; 
```

# vb.net - 如何在 VB.Net 测试期间禁用 ping？

> ID：10958600
> 
> 赞同：0
> 
> 时间：2012-06-09T05:24:08.373
> 
> 标签：vb.net, visual-studio, ping

我有一个类用于`My.Computer.Network.Ping`获取有关 IP 地址或主机名是否可访问的布尔值。

但是，当我测试该类时，我想禁用 ping，以便在测试期间每当我运行`My.Computer.Network.Ping`它时，它总是会返回`false`或抛出某种异常。

我尝试了以下方法，但仍然收到`true`返回（意思是禁用 ping 的尝试无效）

```
Dim restricited As New System.Net.NetworkInformation.NetworkInformationPermission(System.Security.Permissions.PermissionState.None)
    Dim mySocketPermission1 As New SocketPermission(PermissionState.None)
    Dim myWebPermission As New WebPermission(PermissionState.None)
    myWebPermission.Demand()
    mySocketPermission1.Demand()
    Dim ping As New PingOptions()
    ping.DontFragment = True
    ping.Ttl = 1

*attempt to ping here*
*but doesn't return the "ping failed" I wanted* 
```

有任何想法吗？编辑：'我使用 VS2010 和 .Net 4.0 框架（完整）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:04:48.347

> 您也可以尝试修改主机文件（假设您使用的是主机名而不是 IP 地址），但这似乎是一种相当丑陋的方法...... – Paul B. Jun 9 at 15:02

保罗 B 的回答为我做了。我正在Win7和XP上进行测试，但是XP在使用主机文件方法时似乎很挑剔。在 Win7 上运行良好。

保罗就是那个人。

# html - CSS div 高度 100% 布局

> ID：10958602
> 
> 赞同：-1
> 
> 时间：2012-06-09T05:24:36.270
> 
> 标签：html, css, layout

我正在使用此代码来创建我的网站的布局。我的问题是“左”和“右” div 没有显示在屏幕上。（当我将它们的高度设置为像素而不是百分比时，它们会显示）我该怎么做才能显示

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <style type="text/css" media="screen">
    * { 
        margin: 0; 
    }

    html, 
    body { 
        height: 100%; 
    }

    #wrapper {
        min-height: 100%;
        height:     auto !important;
        height:     100%;
        margin:     0 auto -44px; /* -44px being the size of the footer */
    }

    #header { 
        height: 86px; 
    }

    #footer, 
    #push {
        height: 44px;   
    }

    #left
    {
      width:8px;
      width:100%;
      background-color:blue;
      float:left;
    }

    #right
    {
      width:8px;
      width:100%;
      background-color:blue;
      float:right;
    }

    #left: first,
    #right: first,
    {
    content: "";
    height: 0;
    clear: both;
    display: block;
    }
    </style>
</head>
<body>
    <div id="wrapper">
        <div id="header">header</div>
        <div id="content">
         <div id="left"></div>
         content
         <div id="right"></div>
        </div>
        <div id="push"></div>
    </div>
    <div id="footer">footer</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T05:38:24.180

工作方式：

您需要更改这些类：

```
#content {height: 80%;}
#left, #right {width: 30%; height: 100%;} 
```

我已经更新了下面的代码并发布了完整的文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <style type="text/css" media="screen">
    * { 
        margin: 0; 
    }

  html, 
  body { 
      height: 100%; 
  }

  #wrapper {
      min-height: 100%;
      height:     100%;
      margin:     0 auto -44px; /* -44px being the size of the footer */
  }

  #header { 
      height: 86px; 
  }

  #footer, 
  #push {
      height: 44px;   
  }

  #left
  {
    width:8px;
    width:30%;
    background-color:blue;
    float:left;
  height: 100%;
  }

  #right
  {
    width:8px;
    width:30%;
    background-color:blue;
    float:right;
  height: 100%;
  }

  #left: first,
  #right: first,
  {
  content: "";
  height: 0;
  clear: both;
  display: block;
  }
  #content {
  height: 80%;
  }
  </style>
</head>
<body>
  <div id="wrapper">
      <div id="header">header</div>
      <div id="content">
       <div id="left"></div>
       content
       <div id="right"></div>
      </div>
      <div id="push"></div>
  </div>
  <div id="footer">footer</div>
</body>
</html> 
```

我是这样的：

![布局](../Images/254df310d7d37cd44996b5eb0dcdf0af.png)

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:27:25.243

后

```
<div id="footer">footer</div> 
```

添加

```
<br style="clear:both;"> 
```

# multithreading - python多线程文件传输与套接字

> ID：10958604
> 
> 赞同：0
> 
> 时间：2012-06-09T05:25:19.763
> 
> 标签：multithreading, client-server, python-2.7, data-transfer, serversocket

我正在尝试通过线程从多个点读取源计算机（客户端）中的文件并将块发送到目标（服务器）。我已经完成了客​​户端程序，但在服务器端我有 3 个问题：1-我不能通过多线程同时将块加入文件。2-我不能增加超过 8KB 的缓冲区大小。3-我有尝试发送失败。请问您可以帮助完成我的代码吗？这是我的客户代码：

```
import socket
import Queue
import threading
import filechunkio,os.path
class VRCThread(threading.Thread):
    """Mostafa.Hadi"""
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue
    def Upload(self):
        file = self.queue.get()
        try:
            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            sock.connect(('172.32.60.45', 9999))
            chunk =filechunkio.FileChunkIO('piano.zip', offset=int(file)*8024, bytes=8024)
            k1=chunk.read()
            k1=k1[0:8024]+"piano.zip."+file
            sock.sendall(k1)
            sock.close()
        except Exception:
           print file+" UnSuccessful upload."
        else:
           print file+" Successful upload."
    def run(self):
        while True:
            self.Upload()
def main():
    queue = Queue.Queue()
    print "Connected to server"
    for i in range(8):
        t = VRCThread(queue)
        t.setDaemon(True)
        t.start()
    siz=os.path.getsize("piano.zip")
    num=siz/8024
    print num
    print siz
    for file in range(num):
        queue.put(str(file))
        print file
    queue.join()
if __name__=="__main__":
        main() 
```

服务器端代码：

```
import SocketServer
import threading
import Queue

class MyServerThread(threading.Thread):

    def __init__(self, channel, details):
        self.channel = channel
        self.details = details
        threading.Thread.__init__(self)

    def run(self):
        print 'Received connection:', self.details[0]
        self.k= self.channel.recv(8040)
        self.channel.close()
        namef=self.k[8024:]
        v=open(namef,"wb")
        v.write(self.k)
        v.close

        print 'Closed connection:', self.details[0]

class MyThreadedSocketServerHandler(SocketServer.BaseRequestHandler):

    def handle(self):
        thread1 = MyServerThread(self.request, self.client_address)
        thread1.start()
        thread1.join()
if __name__ == '__main__':
    server = SocketServer.TCPServer(('172.32.60.45', 9999), MyThreadedSocketServerHandler)
    server.serve_forever() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:33:41.120

Python中的线程是一种痛苦。由于全局解释器锁，一次只能运行一个线程。

[http://docs.python.org/glossary.html#term-global-interpreter-lock](http://docs.python.org/glossary.html#term-global-interpreter-lock)

看看这个： [http ://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)

就实际问题而言，为您完成程序的人完全降低了它的乐趣。另外，这只是家庭作业作弊的味道。

# ruby-on-rails - 如何在 Rails 中序列化整个 ActiveRecord 树？

> ID：10958606
> 
> 赞同：2
> 
> 时间：2012-06-09T05:25:24.527
> 
> 标签：ruby-on-rails, activerecord, serialization, tree

```
类节点 < ActiveRecord::Base
  attr_accessible ：名称

  belongs_to :parent_node, :class_name => "节点", :foreign_key => :parent_id
  has_many :child_nodes, :class_name => "节点", :foreign_key => :parent_id
结尾

```

对于根节点，parent_id 将为空。假设我有根节点的 id，并希望以 json 格式将整个树打印到输出流。

我该怎么做呢？

假设树不包含任何循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:40:45.720

听起来你需要[awesome_nested_set](https://github.com/collectiveidea/awesome_nested_set)。[wiki](https://github.com/collectiveidea/awesome_nested_set/wiki/Awesome-nested-set-cheat-sheet)有很好的文档记录，但如果您不知道它就很难找到它。

在您的情况下，您需要执行以下操作：

```
Node.root.self_and_descendants 
```

# java - 我从表中获得有限的记录

> ID：10958607
> 
> 赞同：-1
> 
> 时间：2012-06-09T05:25:30.447
> 
> 标签：java, jdbc, resultset

如何从表中获取前 40 条记录，我在 java 中使用结果集，是否可以获取前 40 条和下一条 40 条等，我没有使用分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:30:28.940

我认为从性能角度从结果集中提取*一些记录不是一个好主意，因为它每次都会加载整个表数据。*如果您触发分页查询以仅加载所需的数据（语法取决于数据库，例如 MySql 提供`Limit`子句），那将会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:23:04.153

我认为您正在寻找分页，每页包含 40 个数据项。

查询就像 -

```
select *
 from
  ( select rownum rnm, a.*
     from (your_query) a
     where rownum <= :M )
 where rnm >= :N; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T05:32:24.220

不确定你的问题到底是什么。但如果我理解正确，您一次只需要从数据库中获取 40 条记录，并在需要时分批获取 40 条记录。

如果以上为真，那么您可以使用[CachedRowSet](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sql/rowset/CachedRowSet.html)。在此，您可以使用**setPageSize()**设置批处理的大小。

如果这不是您想要的，请为您的问题添加更多解释。

# wpf - MenuItem.Click RoutedEvent 未在 WPF 中触发

> ID：10958612
> 
> 赞同：3
> 
> 时间：2012-06-09T05:25:49.943
> 
> 标签：wpf, menuitem, routed-events

我有一个`ContextMenu`，`DataGrid`我正在尝试捕获`MenuItem.Click`所有菜单项的事件。像这样：

```
<DataGrid Name="dataGridMembers" Grid.Row="1" Grid.ColumnSpan="15"
          AutoGenerateColumns="False" SelectionMode="Single"
          ItemsSource="{Binding MemberList}" RowHeaderWidth="5"
          MouseDoubleClick="dataGridMembers_MouseDoubleClick"
          MenuItem.Click="NewReservationContextMenuClick">
    <DataGrid.ContextMenu>
        <ContextMenu Name="GridMenu">
            <MenuItem 
                Name="AddSponsoredSingle"
                Header="Add Sponsored Single" />
            <Separator />
            <MenuItem 
                Name="EditNote"
                Header="Add/Edit Note" />
            <Separator />
            <MenuItem 
                Name="AddMale"
                Header="Add Male" />
            <MenuItem 
                Name="AddFemale"
                Header="Add Female"/>
            <MenuItem 
                Name="AddCouple"
                Header="Add Couple"/>
        </ContextMenu>
    </DataGrid.ContextMenu>
    <DataGrid.Columns>
     ...
    </DataGrid.Columns>
</DataGrid> 
```

问题是事件永远不会触发。`MenuItem.Click`应该是一个冒泡事件，我应该能够在视觉树的任何地方捕捉到它。

我究竟做错了什么？

编辑：在代码中添加处理程序工作正常。的构造函数中的以下行都`.xaml.cs`很好。

```
GridMenu.AddHandler(MenuItem.ClickEvent, new RoutedEventHandler(NewReservationContextMenuClick)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T07:25:20.727

在控件`ContextMenu`中打开，该`Popup`控件不是其逻辑父级的可视化树的一部分。

为了`Click`对 all 有一个共同的处理程序`MenuItems`，将处理程序移动到`ContextMenu`元素：

```
<DataGrid Name="dataGridMembers" Grid.Row="1" Grid.ColumnSpan="15" 
          AutoGenerateColumns="False" SelectionMode="Single" 
          ItemsSource="{Binding MemberList}" RowHeaderWidth="5" 
          MouseDoubleClick="dataGridMembers_MouseDoubleClick" 
          > 
    <DataGrid.ContextMenu> 
        <ContextMenu Name="GridMenu"
             MenuItem.Click="NewReservationContextMenuClick"> 
            ...
        </ContextMenu> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T11:08:02.970

您还可以对所有 s 使用样式`MenuItem`来分配事件处理程序：

```
<DataGrid.Resources>
    <Style TargetType="{x:Type MenuItem}">
        <EventSetter Event="Click" Handler="NewReservationContextMenuClick" />
    </Style>
</DataGrid.Resources> 
```

# servlets - 如何从 servlet 在 WEB-INF 文件夹中创建文件？

> ID：10958613
> 
> 赞同：1
> 
> 时间：2012-06-09T05:26:20.857
> 
> 标签：servlets

我是 servlet 世界的新手。我想在 servlet 的 WEB-INF（或 WEB-INF/some_folder）文件夹中创建一个文件。这应该在服务器启动时完成。请让我知道怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T05:31:35.733

**要点：**您可以从 servlet 访问文件，但不能从 Web 容器访问它们

```
String filename = "/WEB-INF/somefile.xml" ;
ServletContext context = this.getServlet().getServletContext();
String pathname =context.getRealPath(filename); 
```

# html - 页面在本地看起来不错。但是当推送到服务器时，一切都被放大了

> ID：10958615
> 
> 赞同：1
> 
> 时间：2012-06-09T05:27:11.963
> 
> 标签：html, css, node.js

所以这一直困扰着我一段时间，我似乎无法理解，所以我想在这里问。

基本上我正在开发一个节点应用程序，当我在本地查看它时它看起来很好，但是当我将它推送到我的服务器（linode）并在那里运行它时，一切都被放大了（见截图）。什么会/可能导致这种情况。谢谢。第一个是在服务器上和其他在本地时的外观。 ![服务器](../Images/6b663a603e6153047f4bb7ed994d354b.png)

![当地的](../Images/b383c87bbe9867a4543183f80539a0ff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:16:45.190

正如我之前的评论（在我不得不离开之前）......

`CTRL`尝试使用+ `0`（即零）在服务器站点的浏览器上重置缩放级别。

（最让你沮丧的总是那些愚蠢的人 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T06:02:38.367

应该是因为放大了！尝试按`CTRL`+ `0`，这样它现在应该可以工作了！:)

否则，`View`» `Zoom`» `100%`。

这应该工作！:)

# php - 使用 cURL 从其他网站读取 cookie

> ID：10958619
> 
> 赞同：0
> 
> 时间：2012-06-09T05:27:52.127
> 
> 标签：php, cookies

假设我有一个名为 somewebsite.com 的网站，它有 cookie，我如何使用 cURL 在我的域中获取这些 cookie，我确实尝试使用这种方法（来自 stackoverflow，但似乎没有用）

```
/* STEP 1\. let’s create a cookie file */
$ckfile = tempnam ("/tmp", "CURLCOOKIE");
/* STEP 2\. visit the homepage to set the cookie properly */
$ch = curl_init ("http://somedomain.com/");
curl_setopt ($ch, CURLOPT_COOKIEJAR, $ckfile); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
$output = curl_exec ($ch);

/* STEP 3\. visit cookiepage.php */
$ch = curl_init ("http://somedomain.com/cookiepage.php");
curl_setopt ($ch, CURLOPT_COOKIEFILE, $ckfile); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
$output = curl_exec ($ch); 
```

# php - php使用curl从url保存图像，但首先验证它

> ID：10958620
> 
> 赞同：0
> 
> 时间：2012-06-09T05:27:58.720
> 
> 标签：php, file-upload, curl

我发现以下功能搜索 SO

```
function grab_image($url,$saveto){
    $ch = curl_init ($url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
    $raw=curl_exec($ch);
    curl_close ($ch);
    if(file_exists($saveto)){
        unlink($saveto);
    }
    $fp = fopen($saveto,'x');
    fwrite($fp, $raw);
    fclose($fp);
} 
```

这应该可以保存图像，但我如何检查图像，`dimensions`首先是为了验证它是否有效？`size``filetype`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T05:39:48.980

像这样的东西？

```
$raw = curl_exec($ch);
if ($raw === FALSE) {
   die("Fetch failed");
}

// get size
$size = strlen($raw);

// get dimensions
$img = imagecreatefromstring($raw);
$x = imagesx($img);
$y = imagesy($img);

// get mime type
$finfo = new finfo(FILEINFO_MIME);
$type = $finfo->buffer($raw); // e.g. image/jpeg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:58:15.377

在触发 curl 之前，您可以使用直接读取图像

```
$url = 'http://exmaple.com/img/some.png';
$imgInfo = getimagesize($url);
print_r($imgInfo); 
```

# audio - 如何通过特定的声卡播放音频？

> ID：10958622
> 
> 赞同：1
> 
> 时间：2012-06-09T05:28:06.570
> 
> 标签：audio, vb6

我需要从 Visual Basic 6 应用程序播放声音（.WAV 文件）。但是，PC 配备了多个声卡，用户应该能够使用它。

到目前为止，支持默认声卡，我会播放这样的声音：

```
CommandString = "Open " & Chr$(34) & mstrFilename & Chr$(34) & " type waveaudio alias MediaFile"
mciSendString CommandString, vbNullString, 0, 0&

If PlayFromPercent <= 0 Then
    CommandString = "play MediaFile"
    lngRetcode = mciSendString(CommandString, vbNullString, 0, 0&)
Else
    CommandString = "play MediaFile from " & CLng(lngLength * (PlayFromPercent / 100))
    lngRetcode = mciSendString(CommandString, vbNullString, 0, 0&)
End If 
```

有没有办法让这个代码适应特定的声卡，或者我可以采取不同的方法（例如 DirectX 或商业 3rd Party Library）？

奖励，如果该方法支持从特定位置播放文件（如您所见，上面的代码支持它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:56:54.083

这可能有效；调用&设置所需的播放设备的 ID `mciSendCommand()`。`MCI_SET`[`MCI_WAVE_SET_PARMS`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd798435%28v=vs.85%29.aspx)`wOutput`

*   你可以`IDDevice`通过`mciSendCommand()``mciGetDeviceID("waveaudio")`
*   它不是 100% 清楚`wOutput`想要什么，它可能与返回的 ID 相同`waveOutGetDevCaps()`

# iphone - 如何使用 UIPinchGestureRecognizer 设置最小和最大缩放比例

> ID：10958624
> 
> 赞同：5
> 
> 时间：2012-06-09T05:28:36.087
> 
> 标签：iphone, objective-c, ios5, uipinchgesturerecognizer

我想放大和缩小图像视图，我不想为此使用 UIScrollView。所以为此我使用了 UIPinchGestureRecognizer ，这是我的代码 -

```
[recognizer view].transform = CGAffineTransformScale([[recognizer view] transform], [recognizer scale], [recognizer scale]);
recognizer.scale = 1; 
```

这适用于放大和缩小。但问题是我想放大和缩小特定比例，比如在 UIScrollView 中，我们可以设置 maxZoom 和 minZoom。我找不到任何解决方案，关于 UIPinchGestureRecognizer 的每个教程都只描述了相同的代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-09T08:07:24.783

`CGFloat __scale`在处理手势的类的接口中声明 2 个 ivars `CGFloat __previousScale`。通过覆盖其中一个函数设置`__scale`为（确保在此处调用超级构造函数）。`1.0``init`

```
- (void)zoom:(UIPinchGestureRecognizer *)gesture { 
    NSLog(@"Scale: %f", [gesture scale]);

    if ([gesture state] == UIGestureRecognizerStateBegan) {
        __previousScale = __scale;
    }

    CGFloat currentScale = MAX(MIN([gesture scale] * __scale, MAX_SCALE), MIN_SCALE);  
    CGFloat scaleStep = currentScale / __previousScale;
    [self.view setTransform: CGAffineTransformScale(self.view.transform, scaleStep, scaleStep)];

    __previousScale = currentScale;

    if ([gesture state] == UIGestureRecognizerStateEnded || 
        [gesture state] == UIGestureRecognizerStateCancelled ||
        [gesture state] == UIGestureRecognizerStateFailed) {
        // Gesture can fail (or cancelled?) when the notification and the object is dragged simultaneously
        __scale = currentScale;
        NSLog(@"Final scale: %f", __scale);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T09:15:54.180

```
 – (void)handlePinchGesture:(UIPinchGestureRecognizer *)gestureRecognizer 
    {
        if([gestureRecognizer state] == UIGestureRecognizerStateBegan) {
        // Reset the last scale, necessary if there are multiple objects with different scales
        lastScale = [gestureRecognizer scale];
        }

        if ([gestureRecognizer state] == UIGestureRecognizerStateBegan ||
        [gestureRecognizer state] == UIGestureRecognizerStateChanged) {

        CGFloat currentScale = [[[gestureRecognizer view].layer valueForKeyPath:@”transform.scale”] floatValue];

        // Constants to adjust the max/min values of zoom
        const CGFloat kMaxScale = 2.0;
        const CGFloat kMinScale = 1.0;

        CGFloat newScale = 1 –  (lastScale – [gestureRecognizer scale]); // new scale is in the range (0-1)
        newScale = MIN(newScale, kMaxScale / currentScale);
        newScale = MAX(newScale, kMinScale / currentScale);
        CGAffineTransform transform = CGAffineTransformScale([[gestureRecognizer view] transform], newScale, newScale);
        [gestureRecognizer view].transform = transform;

        lastScale = [gestureRecognizer scale];  // Store the previous scale factor for the next pinch gesture call
        }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T05:46:15.300

我有类似的情况。我的要求是，如果 imageView 小于最小尺寸或大于某个最大尺寸，则 imageView 将反弹回其最后一次转换。

```
if ((self.frame.size.width > IMAGE_MIN_SIZE) && (self.frame.size.height > IMAGE_MIN_SIZE) && (self.frame.size.width < IMAGE_MAX_SIZE) && (self.frame.size.height < IMAGE_MAX_SIZE)) {
    lastSizeTransform = self.transform;
}else {
    self.transform = lastSizeTransform;
} 
```

这里 self 是 imageView。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-20T08:42:44.167

如果您`view.transform`在捏合时登录，您可以看到放大和缩小的图像协调。所以，这个解决方案不能像我预期的那样工作。我做了这样的解决方案；

## Obj-C 版本

```
 - (void)handlePinchGesture:(UIPinchGestureRecognizer *)recognizer {

        [recognizer.view setTransform:CGAffineTransformScale(recognizer.view.transform, 
recognizer.scale, recognizer.scale)];

        if (recognizer.view.transform.a > 1.6) {

            CGAffineTransform fooTransform = recognizer.view.transform;
            fooTransform.a = 1.6; // this is x coordinate
            fooTransform.d = 1.6; // this is y coordinate
            recognizer.view.transform = fooTransform;
        }

        if (recognizer.view.transform.a < 0.95) {

            CGAffineTransform fooTransform = recognizer.view.transform;
            fooTransform.a = 0.95; // this is x coordinate
            fooTransform.d = 0.95; // this is y coordinate
            recognizer.view.transform = fooTransform;
        }
        recognizer.scale = 1.0;
    } 
```

## 斯威夫特版本

```
func handlePinchGesture(recognizer: UIPinchGestureRecognizer) {

        if let view = recognizer.view {
            view.transform = CGAffineTransformScale(view.transform,
                recognizer.scale, recognizer.scale)
            if CGFloat(view.transform.a) > 1.6 {
                view.transform.a = 1.6 // this is x coordinate
                view.transform.d = 1.6 // this is x coordinate
            }
            if CGFloat(view.transform.d) < 0.95 {
                view.transform.a = 0.95 // this is x coordinate
                view.transform.d = 0.95 // this is x coordinate
            }
            recognizer.scale = 1
        }
    } 
```

# android - 如何提高位图质量？

> ID：10958626
> 
> 赞同：1
> 
> 时间：2012-06-09T05:28:52.103
> 
> 标签：android, bitmap

在我正在开发的应用程序中，一个按钮会打开相机。当您拍照时，该图片会作为位图加载到应用程序中。图片非常像素化。将位图加载到我的应用程序后，如何提高位图的质量？

到目前为止的代码：

```
private static final int CAMERA_PIC_REQUEST = 2500;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button capture = (Button) findViewById(R.id.captureButton);
    Button flip = (Button) findViewById(R.id.flipButton);
    final TextView text = (TextView) findViewById(R.id.text);

    capture.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            text.setVisibility(View.GONE);
            startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
        }
    }); 

    flip.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data){
    if(requestCode == CAMERA_PIC_REQUEST){
        Bitmap image = (Bitmap) data.getExtras().get("data");
        ImageView imageView = (ImageView) findViewById(R.id.ImageView01);
        imageView.setImageBitmap(image);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T06:03:46.593

不要从数据中获取该图像，它始终是低质量的图像。尝试使用文件路径并从文件路径获取图像。

开放式摄像头

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(path));
startActivityForResult(intent, CAMERA_PIC_REQUEST); 
```

当您返回 onActivityResult 时，图像将存储到您定义的路径中。您可以从那里获得高分辨率图像。或者你也可以使用一个函数来获取最后捕获的图​​像......

```
 private String getLastImagePath() {
        final String[] imageColumns = { MediaStore.Images.Media._ID,
                MediaStore.Images.Media.DATA };
        final String imageOrderBy = MediaStore.Images.Media._ID + " DESC";
        Cursor imageCursor = managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, imageColumns,
                null, null, imageOrderBy);
        if (imageCursor.moveToFirst()) {
            int id = imageCursor.getInt(imageCursor
                    .getColumnIndex(MediaStore.Images.Media._ID));
            String fullPath = imageCursor.getString(imageCursor
                    .getColumnIndex(MediaStore.Images.Media.DATA));
            return fullPath;
        } else {
            return "";
        }
    } 
```

此函数将返回您最后捕获的图​​像路径。

# android - DatabaseHelper 无法解析为类型

> ID：10958634
> 
> 赞同：1
> 
> 时间：2012-06-09T05:30:44.103
> 
> 标签：android

我正在这样做..

私有DatabaseHelper mDbHelper；

错误：DatabaseHelper 无法解析为类型

我是 android 开发的新手并收到此错误，在导入 SQLitOpenHelper 后出现此错误....请帮帮我...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:58:47.967

为什么不试试 Android 的 ActiveRecords，它是一个轻松且易于实现的库。您也可以像我一样在该库中添加您的功能。[您可以从这里](http://code.google.com/p/android-active-record/)下载库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:32:54.810

您可以使用它来修复您的错误：

`mOpenHelper = new DatabaseHelper(getContext());`

# javascript - 在 Chrome 中单击复选框时总是调用 div 的事件

> ID：10958636
> 
> 赞同：0
> 
> 时间：2012-06-09T05:30:59.580
> 
> 标签：javascript, jquery, events

我在元素上绑定了两个事件，如下所示：

```
<div class="view">
    <input type="checkbox" class="edit">
</div>

$(function(){
    $(".view").bind('dblclick', show1);
    $(".edit").bind('click',show2);
});

function show1(){
    console.info('here');
}

function show2(){
    console.info('hi');
} 
```

在 Firefox 中这是正常的，但在 Chrome 中，div 的事件总是在单击复选框时调用。

仅供参考：http: [//jsfiddle.net/dMcnJ/1/](http://jsfiddle.net/dMcnJ/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T05:41:23.653

```
$(function(){
    $(".view").bind('dblclick', show1);
    $(".edit").bind('click',show2);
    // Disable event bubbling on dblclick
    $(".edit").bind('dblclick',function(e) { e.stopPropagation();});
});

function show1(){
    console.info('here');
}

function show2(event){  
    event.stopPropagation();
    console.info('hi');
} 
```

[http://jsfiddle.net/dMcnJ/9/](http://jsfiddle.net/dMcnJ/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T05:38:54.040

这称为事件冒泡。请执行下列操作：

```
function show2(e){
    e.stopPropagation();
    console.info('hi');
} 
```

# sharepoint - sharepoint 中有哪些开箱即用的功能

> ID：10958640
> 
> 赞同：-1
> 
> 时间：2012-06-09T05:31:34.927
> 
> 标签：sharepoint, sharepoint-2010

sharepoint 中有哪些开箱即用的功能。我们可以通过代码开发的功能称为开箱即用功能吗？我很困惑知道这件事。我想知道是否有人有解释。这些是Sharpeoint 2010 中的新功能还是WSS3.0 中也存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:18:30.697

SharePoint 2010 可用[的现成功能已在](http://en.wikipedia.org/wiki/Out_of_the_box)[SharePoint 网站](http://sharepoint.microsoft.com/en-us/product/Pages/Features.aspx)上明确说明。

我们开发的功能并非开箱即用。它们是使用 SDK 定制或开发的。WSS3.0 有其开箱即用的特性。WSS 3.0 的新版本是 SharePoint Foundation，[这里](http://sharepoint.microsoft.com/en-us/buy/pages/editions-comparison.aspx)是每个版本的 SharePoint 服务器的功能列表。

我希望，这将消除您的疑虑。开箱即用只是意味着您购买产品时附带的东西。

# android - 按返回时黑屏

> ID：10958643
> 
> 赞同：0
> 
> 时间：2012-06-09T05:31:52.137
> 
> 标签：android, facebook-graph-api, facebook-android-sdk

我希望我的应用程序使用 fb 登录（这是可选的）。所以首先我要启动我的基本活动，然后将 fb 活动作为子活动。我希望当用户按下后退按钮时，它应该返回其父活动。对于 facebook 活动，没有设置 contentview，它只是一个空白屏幕。我面临以下问题。

1.  当启动 fb 活动并按回时，会出现一个空白屏幕，这可能（我不确定）是我尚未设置的内容视图。我希望它指向父活动而不是这个空白屏幕。

以下是代码：

家长活动（启动器）

```
public class AccountSettingsActivity extends Activity {
    /** Called when the activity is first created. */
        Button registerButton;
        Button fbButton;

        AccountSettingsActivity ob ;
        final Context cont = this;
    @Override
    public void onCreate(Bundle savedInstanceState) {   
        super.onCreate(savedInstanceState);
        setContentView(R.layout.account);
        Log.i ("Location_settings", "In Account Settings Class");

        registerButton = (Button)this.findViewById(R.id.registerbutton);
        fbButton = (Button)this.findViewById(R.id.fbbutton);

        registerButton.setVisibility(1);

        //Toast.makeText(cont, "In Accounts Settings", Toast.LENGTH_LONG);

        fbButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {               
                 Log.i("Account-Settings","fb Button clicked");
                 Intent fb = new Intent(AccountSettingsActivity.this,facebookMain.class);
                 fb.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
                 startActivityForResult(fb,0);

            }
        });

        registerButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {               
                 Log.i("Account-Settings","Register Button clicked");
                 ProgressDialog dialog = ProgressDialog.show(AccountSettingsActivity.this, "Syncing with server", "Please wait...", true);
                 new initialsync(dialog).execute("");            

            }
        });

        fbButton.performClick();

    }

} 
```

儿童活动（脸书）

```
public class facebookMain extends Activity {

    String abc;
    Facebook facebook = new Facebook("1234567890");
    private SharedPreferences mPrefs;
        private Bundle parameters;
        facebookMain ob;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        /*
         * Get existing access_token if any
         */

        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);
        if(access_token != null) {
            facebook.setAccessToken(access_token);
        }
        if(expires != 0) {
            facebook.setAccessExpires(expires);
        }

        /*
         * Only call authorize if the access_token has expired.
         */
        if(!facebook.isSessionValid()) {

            facebook.authorize(this, new String[] { "read_friendlists", "read_mailbox", "email" }, new DialogListener() {
                @Override
                public void onComplete(Bundle values) {
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token", facebook.getAccessToken());

                    abc = facebook.getAccessToken();

                    editor.putLong("access_expires", facebook.getAccessExpires());
                    editor.commit();

                    Intent intent=new Intent();     
                    intent.putExtra("access token",abc);
                    setResult(RESULT_OK, intent);
                    finish();
                }

                @Override
                public void onFacebookError(FacebookError error) {}

                @Override
                public void onCancel() {
                finish();
                }

                @Override
                public void onError(DialogError e) {
                        // TODO Auto-generated method stub

                }
            });
        }

        if(facebook.isSessionValid())
        {
            SharedPreferences shared = mPrefs;

            abc = shared.getString("access_token", "");

            Intent intent=new Intent();     
            intent.putExtra("access_token",abc);
            setResult(RESULT_OK, intent);
            Toast.makeText(ob,"facebook session valid", Toast.LENGTH_SHORT);
            finish();
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);

        AppLog.logger("facebookmain, Back key pressed");
                    Intent intent=new Intent();     
                    intent.putExtra("abc",abc);
                    setResult(RESULT_OK, intent);
                    finish();
    }
} 
```

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:43:07.953

查看您的代码后，可能性很小。由于 FB 非常直截了当，但我不知道你为什么要这样做。根据你的代码...

*   如果会话有效，您将不处理。因此，如果会话有效，请完成活动。
*   您应该在 Listener 中处理所有事件。
*   您不应在 onActivityResult 中创建新意图，而应使用在该函数中传递的意图。

# c++ - 使用 Python 从 C++ 程序中获取输出（通过 cout）

> ID：10958645
> 
> 赞同：0
> 
> 时间：2012-06-09T05:32:18.753
> 
> 标签：c++, python

我在 Python 中有以下代码

```
import subprocess
import time

info = subprocess.STARTUPINFO()
info.dwFlags |= subprocess.STARTF_USESHOWWINDOW
info.wShowWindow = subprocess.SW_HIDE

t1 = time.clock()
h = subprocess.Popen([r"C:\Users\MyName\Desktop\test.exe"], startupinfo=info) 
h.communicate()
t2 = time.clock()-t1

print "Return Code:", h.returncode
print "Duration:", t2 
```

如果我正在寻找程序的返回码，这很有效，但是如果我想抓取程序简单地输出到屏幕上的东西并将它们作为 Python 中的变量进行操作怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:33:43.180

使用[来自的返回值`.communicate()`](http://docs.python.org/library/subprocess.html#subprocess.Popen.communicate)。

# c++ - 重载运算符函数

> ID：10958646
> 
> 赞同：0
> 
> 时间：2012-06-09T05:32:23.073
> 
> 标签：c++, operator-overloading, overloading

> **可能重复：**
> [如何区分（重载时）运算符++的前缀和后缀形式？(C++)](https://stackoverflow.com/questions/894804/how-to-differentiate-when-overloading-between-prefix-and-postfix-forms-of-oper)

假设我需要重载一个执行 2 个功能的运算符函数。

例如，第一个函数处理前缀增量，第二个函数处理后缀。这有什么不同的语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T05:40:21.573

这已经得到了回答：[如何区分（重载时）operator++ 的前缀和后缀形式？(C++)](https://stackoverflow.com/questions/894804/how-to-differentiate-when-overloading-between-prefix-and-postfix-forms-of-oper)

答案的要点是 prefix 不带参数， postfix 带一个未使用的 int 参数。

```
A &operator++()    { ... } //prefix
A  operator++(int) { ... } //postfix 
```

干杯，
亚伦

# objective-c - 指向指定数量值的指针

> ID：10958654
> 
> 赞同：1
> 
> 时间：2012-06-09T05:33:26.793
> 
> 标签：objective-c, pointers

如何指定方法应将指针作为参数，该指针指向内存中可以保存指定数量值的位置？例如，如果我有：

```
- (void)doSomethingWith:(int *)values; 
```

我想明确指出，`int *`传入的值应该指向内存中能够容纳 10 个这样的值的分配空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:43:03.703

`(int *)`当你有“ ”的权力（和“ `count`”）可以使用时，为什么要使用“ ” `NSArray`？

但无论如何，[看看这个可能相关的问题](https://stackoverflow.com/questions/2773328/how-to-find-the-size-of-integer-array)，你不能只做一个“ `sizeof(values)`”来获取静态/全局分配指针的大小吗？

如果这不起作用（在动态分配数组的情况下），你真的可能需要在你的“ `doSomethingWith:`”方法声明中使用某种“count:”参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T05:59:28.557

有几种方法。您可以适当地命名该方法：

```
- (void)doSomethingWithTenInts:(int *)tenInts; 
```

或者你可以使用一个结构：

```
typedef struct {
    int values[10];
} TenInts;

- (void)doSomethingWithTenInts:(TenInts *)tenInts; 
```

或者你可以让用户告诉你他给了你多少`int`s：

```
- (void)doSomethingWithInts:(int *)ints count:(int)count; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T10:05:43.273

要直接回答您的问题，请使用带边界的数组参数，例如：

```
- (void)takeTenInts:(int[10])array 
```

它*指定*该方法采用 10 个整数的数组。

唯一的问题是 C 系列语言不做边界检查，所以以下是有效的：

```
int a[10], b[5];

[self takeTenInts:a]; // ok
[self takeTenInts:b]; // oops, also ok according to the compiler 
```

因此，当您*指定*大小时，如您所愿，该规范并未被强制执行。

如果您希望*强制执行*大小，您可以使用`struct`：

```
typedef struct
{
   int items[10];
} TenInts;

- (void)takeTenInts(TenInts)wrappedArray 
```

现在这实际上根本没有*强制*大小[*]，但它与 C 系列一样接近（“强制”这个词是诅咒的）。

如果您只想*知道*大小，请将其作为附加参数传递或使用`NSArray`.

[*] C 中的结构遵循以下模式并不少见：

```
typedef struct
{
   // some fields
   int data[0];
} someStruct; 
```

这样的结构是根据它们的大小（`sizeof(someStruct)`）*加上*足够的额外空间来存储足够的整数（例如`n * sizeof(int)`）动态分配的。

In other words, specifying an array as the last field of a structure does **not** enforce in anyway that there is space for exactly that number of integers; there may be space for more, or fewer...

# opengl - OpenGL：为什么在正交投影中远近都是负数？

> ID：10958656
> 
> 赞同：2
> 
> 时间：2012-06-09T05:33:28.967
> 
> 标签：opengl, graphics, 3d, orthographic

为什么在正交投影中近坐标和远坐标被解释为负数？它只是习惯性的还是真的有任何好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-10-23T20:47:41.773

近处和远处的剪裁平面可以是你想要的任何东西，我认为这里的混淆是因为在 OpenGL 中“向前”或进入屏幕是 -Z。因此，如果我想看到从原点到我面前 100 个单位的东西，则近为 0，远为 -100。但我也可以说我想看到原点后面 30 个单位到前面 50 个单位的东西，在这种情况下，近是 30，远是 -50。

所有这一切的另一个困惑是 glOrtho 采用近距和远距剪切平面但反转它们上的符号以“帮助”您。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-09T07:55:30.547

我真的不认为有任何理由。使用正交投影，您可以将近/远平面设置为任何东西，它只定义您想要显示的 z 值。我想不出这有什么特别的好处。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T11:31:12.213

> 为什么在正交投影中近坐标和远坐标被解释为负数？

谁说他们是？没有规定近/远值在正交投影中*必须*为负。你的问题假设没有证据的事实。

# jquery - jQuery 和缓存 - 它是如何工作的，检测当前缓存和版本等

> ID：10958660
> 
> 赞同：0
> 
> 时间：2012-06-09T05:33:49.143
> 
> 标签：jquery, browser-cache

**症结：**浏览器如何利用缓存，它会加载网页特定的缓存内容，还是会访问其他页面的脚本？

**具体情况：** 如果我正在加载 jQuery，我假设最好在加载之前检查它是否在用户的缓存中，对吗？但是如果我用完缓存的副本，我需要确保它是兼容的版本。如果没有，我会加载我的 jquery 版本，但现在不是有两个副本然后加载了吗？除非在无冲突模式下，这自然会带来很多问题。

**The Broad Concetp：** 所以我想我的问题主要与浏览器缓存的工作原理有关。如果用户在另一个网站上从谷歌 CDN 加载了 jQuery，并且我使用的是谷歌 CDN 版本，它会从谷歌第二次加载吗？还是来自另一个 CDN（例如 Microsoft 或 jQuery CDN）的相同 jQuery 版本？或者浏览器是否只会访问它所获得的特定页面的缓存？

**类似情况：** 最后但并非最不重要。假设我在超低带宽上运行，或者我在 Peace Core 的朋友需要充分利用她有限的访问权限。如何将所有常用脚本库都存储在本地并进行访问，而不是每次都在线加载？当然，最好完全阻止 javascript，但万一它是功能所必需的。对我来说，opera 用户脚本功能、greasemonkey、html5 本地存储或一些缓存工具都是可能的，但在我的搜索中，我没有找到任何我知道如何运行的东西。而且我很确定我对这一切的了解还不够，无法真正知道如何进行。

太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T06:12:15.183

> How does the browser utilize the cache, does it load webpage specific cache content, or will it access scripts from other pages?

It's however each browser wants it to work. More often than not, each file hosted (regardless if it's script, html, images) can have an expire time to tell the browser when to re-download the file. Sometimes the browser overrides that as configured (by default or by user).

When you say *scripts from other pages* do you mean:

```
//Option 1 - remote script
<script src="somesource" type="javascript/text"></script>

//Option 2 - inline script
<script type="javascript/text">
$(document).ready(function()....);
</script> 
```

With Option 1, typically a browser will reuse the already downloaded *somesource* if the url exactly matches. With Option 2 the code is part of the page and must be downloaded each time because it's inline it the HTML code.

> If I'm loading jQuery, I'm assuming it's best practice to check if it's in the user's cache before I load it, right?

I'm assuming you're only writing pages from remote hosts and using standard web browsers (eg Chrome, IE, FireFox, etc). In this case you don't have access to the cache, nor can you detect if the browser has already cached the script. Not only that it doesn't matter, the browser will decide to redownload it or not (Option 1).

Also it seems like you're confusing how browsers work. On each request of a page, in general, the browser empties itself of any images, html, css, javascript or any other resource, and grabs the URL specified. If the specified primary request points to another secondary+ request (script/img/css etc) then it goes back to Option 1 and loads that secondary+ request as needed/configured. As far as I'm aware, web browsers don't keep secondary requests loaded for each request just because it loaded it for any request, as this would cause massive problems.

> So I guess my question primarily pertains to how browser caching works. If the user has loaded jQuery from Google CDN on another website, and I'm using the Google CDN Version, will it load a second time from Google? Or the same jQuery version from another CDN, such as Microsoft or the jQuery CDN?

Again this is up to each browser. Generally speaking, if two independant websites use the same request url (for example, jquery on googles CDN) then the browser will most likely use the cached version (Option 1).

If two independent websites request a filename that is the same name, but use a different URL, then most likely (generally) each one will be downloaded as the web browser can't be 100% certain the files are the same just based on name.

> How could all the common script libraries be stored locally and accessed rather than loading online every time?

I don't believe you can manually tell web browsers to use local resources out of the box (see my final comment). If you're truly intending to create as small bandwidth application I would recommend looking up resources on google on how to do that (mostly search for mobile internal products and solutions like jquery mobile).

*Loading Resources Locally*

You can certainly do this, although I still would not recommend it ever. What you can do is load a web server locally on a PC (IIS Express, ISS, Apache, whatever). You can then either load a DNS server locally or edit the hosts files. If you changed the host file to look like:

127.0.0.1 ajax.googleapis.com

This would make requests for `https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js` actually request the file from the local webserver. Your application running on the local webserver could determine if the file is local and use a local version, and if not use an external DNS to determine the IP and download it.

This is all well and good, **but it would almost be exactly what the web browser does**. This only advantage is to preload scripts on a local machine, but this seems like a lot of extra effort that shouldn't be necessary.

# iphone - iPhone Dev- Page Control - scrollViewDidScroll 没有触发

> ID：10958661
> 
> 赞同：1
> 
> 时间：2012-06-09T05:33:53.580
> 
> 标签：iphone, objective-c, ios, xcode4.3

我是 iPhone 开发的新手，正在编写本教程： http: [//www.iosdevnotes.com/2011/03/uiscrollview-paging/#comment-25166](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/#comment-25166) - 但我在 XCode 4.3.2 中进行。该示例非常简单，我理解代码，但由于某种原因，我的 ViewController.m 中的 scrollViewDidScroll 函数没有为我触发（因此这不会更改页面控件分页图标并将其更新到当前页面）。我在这个函数中放置了一个 NSLog() 以便我可以判断它是否正在激活 - 但在我的调试控制台中我从来没有看到这个文本

我的 ViewController.h 中的代码是：

```
 #import <UIKit/UIKit.h>

 @interface ViewController : UIViewController <UIScrollViewDelegate> {
     UIScrollView* scrollView;
     UIPageControl* pageControl;

 }

 @property (nonatomic, retain) IBOutlet UIScrollView* scrollView;
 @property (nonatomic, retain) IBOutlet UIPageControl* pageControl;

 @end 
```

我的 ViewController.m 中的代码是：

```
 #import "ViewController.h"
 @implementation ViewController
 @synthesize scrollView, pageControl;

 // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
 - (void)viewDidLoad {
     [super viewDidLoad];

NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor blueColor], nil];
for (int i = 0; i < colors.count; i++) {
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;

    UIView *subview = [[UIView alloc] initWithFrame:frame];
    subview.backgroundColor = [colors objectAtIndex:i];
    [self.scrollView addSubview:subview];
    [subview release];
}

self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * colors.count, self.scrollView.frame.size.height);

self.pageControl.currentPage = 0;
self.pageControl.numberOfPages = colors.count;
 }

 //!!!!!!!!!!!!!!
 //THIS IS WHERE MY PROBLEM IS -- THIS CODE DOESN'T SEEM TO EVER GET RUN EVEN WHEN I SCROLL!!!!!
 //!!!!!!!!!!!!!
 - (void)scrollViewDidScroll:(UIScrollView *)sender {
     NSLog(@"this just fired");

     // Switch the indicator when more than 50% of the previous/next page is visible
     CGFloat pageWidth = self.scrollView.frame.size.width;
     int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
     self.pageControl.currentPage = page;
 }

 - (void)didReceiveMemoryWarning {
     [super didReceiveMemoryWarning];
 }

 - (void)viewDidUnload {
    self.scrollView = nil;
    self.pageControl = nil;
 }

 - (void)dealloc {
     [scrollView release];
     [pageControl release];
     [super dealloc];
 }

 @end 
```

任何帮助将不胜感激。我一直在一遍又一遍地从他们在教程中的可下载文件到我自己的文件来回移动......我只是觉得当我开始滚动时这个东西应该会触发并且不知道为什么它不是......提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T05:41:11.203

在 Interface Builder 中，您没有将滚动视图的“委托”出口连接到您的视图控制器。但是您可以通过编程方式进行操作。

```
[self.scrollView setDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:48:53.107

**dianz 是对的，设置你的代表。**

```
[self.scrollView setDelegate:self]; 
```

或者

```
self.scrollView.delegate=self; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T05:58:42.413

你忘了设置你的委托：

```
 - (void)viewDidLoad {
 [super viewDidLoad];

// This is what you forgot to do, set the delegate of the scrollView.
scrollView.delegate = self;

NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor blueColor], nil];
for (int i = 0; i < colors.count; i++) {
CGRect frame;
frame.origin.x = self.scrollView.frame.size.width * i;
frame.origin.y = 0;
frame.size = self.scrollView.frame.size;

UIView *subview = [[UIView alloc] initWithFrame:frame];
subview.backgroundColor = [colors objectAtIndex:i];
[self.scrollView addSubview:subview];
[subview release];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T07:16:09.487

请确保您已将滚动视图委托设置为所需的视图控制器。如果在 xib 中添加了滚动视图，您还可以在 xib 文件中附加委托。

另外，不要忘记在视图控制器的头文件中实现滚动视图委托协议 UIScrollViewDelegate。

# c - 指向一个函数的指针，该函数将指向另一个函数的指针作为参数

> ID：10958662
> 
> 赞同：0
> 
> 时间：2012-06-09T05:34:00.530
> 
> 标签：c, function, pointers, functor

这应该是一个简单的问题，但我可能无法正确表达它，或者我可能因为缺乏经验而试图挑战 C 语言的原则。

我想要做的就是，给定一个指向函数的指针，将它包装在另一个函数中，该函数将指向函数的指针作为参数，并制作后者的指针。代码更好：

```
void do_nothing_1() {}
void do_nothing_2() {}

void wrapper(void(*f)()) { f(); }

int main() {

    // the following will call the function
    // but i just want a pointer of whats being called
    funcion_pointer_1 = wrapper(do_nothing_1);
    funcion_pointer_2 = wrapper(do_nothing_2);

    return 0;
} 
```

如果这个问题没有任何意义，我事先道歉，请帮助我澄清它，而不是简单地否决它。

编辑：鉴于由于要求的模糊性而获得所需结果的明显困难，我将对我正在寻找的内容进行更具体的说明。

在结构内部，我有一个指向函数的指针：

```
struct my_struct {
    int (* run)(void);
} 
```

我想做的是修改那个函数，这就是我使用包装器的原因。因此，例如，如果 foo 返回 void，则将其更改为 int。另外，在执行 foo 之前运行一些代码：

```
int wrapper(void (*foo)()) {

    // exec some stuff here

    foo();

    return 0;
} 
```

最终，我想要的是当我从我的结构中执行与 *run 指针对应的函数时，在执行 run() 之前执行一些东西并更改返回类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:41:38.447

在努力使用正确的语法时，使用 typedef 使事情更清晰会很有帮助。不仅是为你自己编写代码，还为任何需要维护它的人，或者只是想弄清楚它在做什么。

您需要一个函数指针，该函数指针指向一个将另一个函数指针作为参数的函数。从参数开始，一个没有参数且没有返回值的函数：

```
typedef void (*void_handler_t)( void); 
```

现在是包装函数指针，它接受一个函数指针参数并且没有返回值：

```
typedef void (*wrapper_handler_t)( void_handler void_fn); 
```

和代码：

```
void foo( void) {}
void wrapper( void_handler_t wrapped_fn)
{
    wrapped_fn();
}

int main( int argc, char *argv[])
{
    wrapper_handler_t function_pointer;

    function_pointer = &wrapper;
    function_pointer( &foo);

    return 0;
} 
```

# mysql - MySQL：如何测试我的数据库架构（外键一致性、存储过程等）

> ID：10958663
> 
> 赞同：5
> 
> 时间：2012-06-09T05:34:10.473
> 
> 标签：mysql, unit-testing, testing

我只是在设计一个更大的数据库架构。它将包含一组表、几个视图和相当多的存储过程。由于它是一个较大类型的数据库并且处于开发的早期阶段（实际上它还只是处于早期设计阶段），我觉得需要一个测试套件来验证重构过程中的完整性。

就应用程序逻辑而言，我非常熟悉测试概念，包括服务器端（主要是 PHPUnit）和客户端（Selenium 和 Android 测试基础设施）。

***但是如何测试我的数据库架构？***

*   一般数据库，特别是 MySQL，是否有某种类似的测试策略和工具？

*   在更改基础表后，如何验证我的视图、存储过程、触发器和天知道的内容是否仍然有效？

*   我是否必须使用 PHP 层来包装数据库以启用对数据库逻辑（存储过程、触发器等）的测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T06:28:45.857

数据库测试有两个方面。

*   **一种**是从**业务逻辑**的角度测试数据库，不应该关注持久化数据。在那个级别，有一种众所周知的技术**——ORM**。这种情况下的算法很简单：*描述一个模型*并创建一组*独特的案例*或*标准*来测试所有级联操作是否按应有的方式执行（*我的意思是，如果我们创建`Product`并将其链接到`Category`，那么在保存会话之后，我们将获得所有实体写在数据库中，具有所有必需的关系*）。多说一句：有些ORM已经提供了单元测试模块（例如***NHibernate***) 和其中一些更酷的工具：创建数据库方案、模型、测试用例的最简单、最快的方法：例如，***Fluent NHibernate***。

*   **其次**是面向测试**数据库模式**本身。为此，您可以查看一个好的库[DbUnit](http://dbunit.sourceforge.net/)。引用自官网：

> DbUnit 是针对数据库驱动项目的 JUnit 扩展（也可与 Ant 一起使用），其中包括**在测试运行之间将您的数据库置于已知状态**。DbUnit 能够将您的数据库数据导出和导入 XML 数据集。从 2.0 版开始，当在流模式下使用时，DbUnit 也可以处理非常大的数据集。DbUnit 还可以帮助您验证您的数据库数据是否**与预期的一组值匹配**。

最后，我强烈推荐您阅读[Martin Fowler 网站上的文章“](http://www.martinfowler.com)[进化数据库设计](http://www.martinfowler.com/articles/evodb.html#ADatabaseConsistsOfSchemaAndTestData)” 。它有点过时（2003 年），但确实值得一读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T06:24:53.367

要测试数据库，您需要做的一些事情是：

1.  包含所有数据测试用例、初始数据等的测试数据库。这将使您能够每次都从已知的起始位置进行测试。
2.  一组事务（INSERT、DELETE、UPDATE）使您的数据库通过您要测试的状态。这些本身可以存储在测试数据库中。
3.  您的一组测试 - 表示为对数据库的查询，对您的操作结果进行实际检查。这些结果将由您的测试套件进行测试。
4.  数据库可能会引发异常，但如果您遇到异常，您可能会对数据库和数据产生更严重的担忧。您可以以类似的方式测试数据库的操作，但除了“极端情况”之外，这应该不太必要，因为现代数据库引擎在其数据服务任务中非常健壮。

您不需要用 PHP 层包装您的数据库 - 如果您遵循上述结构，则应该可以在您的实际数据库的 DML 和 DDL 中与您的正常测试套件结合使用您的完整测试套件。

# mysql - 4 个主服务器复制到单个服务器 + 4 个实例

> ID：10958664
> 
> 赞同：0
> 
> 时间：2012-06-09T05:34:20.637
> 
> 标签：mysql

MYSQL 5.X 我想知道如何在 MYSQL 复制中将 5 个不同的主服务器复制到具有 5 个数据库实例的单个服务器。什么是优点和缺点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:32:28.163

如果你知道如何

*   在同一台机器上配置多个 MySQL 服务器 ( [http://dev.mysql.com/doc/refman/5.5/en/multiple-servers.html](http://dev.mysql.com/doc/refman/5.5/en/multiple-servers.html) )
*   配置主从之间的复制（[http://dev.mysql.com/doc/refman/5.5/en/replication-howto.html](http://dev.mysql.com/doc/refman/5.5/en/replication-howto.html)）

那你就可以走了，我相信。

这种复制的目的是什么？

如果仅用于备份目的，那么我认为没有任何缺点，特别是如果您在备份机器上运行 5 个单独的 MySQL 实例。只需确保您的硬件足够快，可以处理 5 个主节点的联合活动。

对于此设置，我没有看到任何其他有用的应用程序。

# java - 使用 string.split 时的 ArrayIndexOutOfBounds

> ID：10958666
> 
> 赞同：0
> 
> 时间：2012-06-09T05:34:24.960
> 
> 标签：java, regex, string, split, indexoutofboundsexception

这个问题让我沮丧了几天。我正在使用字符串拆分来查找字符串的后半部分。这是我的代码：

```
 String pieces[] = piece.split(before[x]);
   piece = piece.split(before[x])[1]; 
```

在调试模式下，我已经确定`piece =`

```
<area shape="circle" coords="329,152,13" href="#g35" alt="" onmouseover="return overlib\('&lt;b>Southeast False Creek&lt;/b>&lt;br>215 West 1st Avenue' , SNAPX, 20, SNAPY, 20\);" onmouseout="return nd\(\);"/> 
```

和`before[x] =`

```
<area shape="circle" coords="329,152,13" href="#g35" alt="" onmouseover="return overlib\('&lt;b> 
```

出于某种原因，我得到一个`ArrayIndexOutOfBounds`例外，`split`说索引无效。我不知道为什么会这样，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T05:53:47.497

如果您试图让字符串的后半部分使用`piece.split(before[x])[1]`并抛出异常，那么显然这意味着您的字符串数组`piece.split(before[x])`没有第二个元素。您应该做的是尝试使用`piece.split(Pattern.quote(before[x]))`然后检查数组中的字符串数。如果它大于 1，那么您可以使用`piece.split(Pattern.quote(before[x]))[1]`.

阅读此内容以获取更多详细信息[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html#quote(java.lang.String](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html#quote(java.lang.String) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T07:41:19.490

String.split 使用正则表达式将字符串拆分成片段。"before[x]" 包含常规的特殊字符（即 "\"），因此您需要对这些特殊字符进行转义。有关特殊字符列表，请参阅[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

# emacs - 如果我打开 doc.foo 文件，我希望 emacs 在同一文件夹中查找并打开 doc.bar 文件

> ID：10958672
> 
> 赞同：2
> 
> 时间：2012-06-09T05:35:34.863
> 
> 标签：emacs, elisp, auctex

具体来说，当我在 LaTeX (auctex) 中工作时会出现这个问题，但我认为它必须有一个通用的 emacs 解决方案。

对于每个 doc.tex 文件，我在同一个文件夹中都有一个关联且经常编辑的 doc.sty 文件。

有没有一种方法可以让我在打开 doc.tex 文件时让 emacs 打开该文件夹中的 doc.sty 文件？我一点也不精通 elisp，所以很简单——它不需要是健壮的代码：它可以在两个文件都命名为 doc.* 并且两者都存在的假设下工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T06:01:34.063

看看评论：
`M-x` `find-library` `RET` `find-file` `RET`

这不是您所要求的，但它是用于打开相关文件的内置解决方案。只需将一个键绑定到`ff-find-other-file`（或者`ff-find-related-file`如果您更喜欢该别名），您就可以轻松地在两个文件之间来回切换。

特别是，请参阅：

*   `C-h``v` `ff-other-file-alist` `RET`
*   `C-h``v` `ff-search-directories` `RET`

所以是这样的：

```
(add-hook 'latex-mode-hook 'my-latex-mode-hook)

(defun my-latex-mode-hook ()
  "My LaTeX customisations."
  (setq ff-search-directories '(".")
        ff-other-file-alist  '(("\\.tex$" (".sty"))
                               ("\\.sty$" (".tex"))))
  (local-set-key (kbd "C-c f") 'ff-find-other-file)) 
```

# java - 如何获取类数组的 .class 值？

> ID：10958673
> 
> 赞同：1
> 
> 时间：2012-06-09T05:35:43.743
> 
> 标签：java, reflection

假设我有一个名为 的对象`thisObject`，它可能是一个 int、String、Object 等，或者是此类类的数组。我希望将生成的类存储在一个`Class`名为`thisObjectArrayClass`.

这不会编译，但希望能解释我在找什么：

```
switch(thisObject.class) {
    case int.class:
        int[] tempObject;
        thisObjectArrayClass = tempObject.class;
        break;
    case float.class:
        float[] tempObject;
        thisObjectArrayClass = tempObject.class;
        break;
    case int[].class:
        int[][] tempObject;
        thisObjectArrayClass = tempObject.class;
        break;
} 
```

这样做的问题是它依赖于 switch/case 语句，这显然是不可接受的。我尝试使用反射来做到这一点失败了，但我是 Java 新手，所以也许我做错了什么。如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T05:39:37.587

您正在寻找`Array.newInstance`：

```
thisObjectArrayClass = Array.newInstance(thisObject.class, 0).getClass(); 
```

这将实例化一个*长度为 0*`thisObject.class`的es数组，并请求`class`此类对象的 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T05:41:56.953

对象有一个 getClass() 方法。

```
public Class getClass(Object thisObject) {  
    Class thisObjectArrayClass = obj.getClass();  
    System.out.println("The type of the object is: " + thisObjectArrayClass.getName());  
    return thisObjectArrayClass;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-09T05:48:00.377

您只能打开整数（或 Java7 中的字符串）。使用 if/else 序列或 7 中的开关。无论哪种方式，您可能正在寻找的方法是 thisObject.getClass()

```
switch(obj.getClass().getName()) {
    case "java.lang.String" :
        System.out.println("Found String");
        break;
    default:
        System.out.println("Found:" + obj.getClass().getName());
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-10T01:31:23.060

```
int array[] = new int[7];
array.getClass(); 
```

# ruby-on-rails-3 - Rails 3没有方法错误未定义的方法'current_page'

> ID：10958675
> 
> 赞同：1
> 
> 时间：2012-06-09T05:36:27.410
> 
> 标签：ruby-on-rails-3, pagination, kaminari

`Rails -v 3.2.3` 我`kaminari`用来做分页，但我一直收到一个**NO METHOD ERROR**，`undefined method 'current_page' for nil:NilClass`

在 第 7 行提出的**views/layouts/application.html.erb中：**

`<%= paginate @links, :remote => true %>`

这是因为我将它放在应用程序视图而不是我的链接提交视图上吗？将分页链接放在哪里重要吗？

在 /controllers/links_controllers.rb 中（在一个称为提交的方法中）

`@links = Link.page(params[:page]).per(20)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T20:51:41.670

我想通了......基本上我必须将我的`<%= paginate @links %>`代码移动到我的**submissions.html.erb**页面（这是我的链接视图的一部分）然后我运行`bundle`以确保`will_paginate`从我的gemsfile 和voilà 中消失，它工作。

# .net - WebClient Headers 属性缺少 Add 方法？

> ID：10958682
> 
> 赞同：4
> 
> 时间：2012-06-09T05:38:39.373
> 
> 标签：.net, windows-phone-7, webclient

在 .NET（用于 Windows Phone）中，我尝试使用 WebClient 类将 XML 发送到 Web 服务。我找到的示例使用 Add 方法修改了添加标头，但是我收到了一个错误，即找不到 Add 方法：

```
using System.Net;
...
WebClient wc = new WebClient();
wc.Headers.Add(HttpRequestHeader.ContentType, "text/xml"); 
```

我只是在某处缺少参考还是已更改？我也没有列出 Set 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T07:53:52.497

wc.Headers["ContentType"] = "text/xml";

# clojure - Clojure 中的多方法、多态性、大开关

> ID：10958686
> 
> 赞同：1
> 
> 时间：2012-06-09T05:39:13.697
> 
> 标签：clojure

我`(defmulti multi (fn [t] (cond (seq? t) :seq (map? t) :map (vec? t) :vec ...`在这里和那里阅读了很多 Clo​​jure 代码中的模式，这基本上是一个开关（如果我添加一个类型，我必须添加一个新子句）但更冗长。有没有办法说`(defmethod seq, (defmethod vec (defmethod map..`等？这一定是一件很平常的事情。我知道可以手动定义层次结构，但是常见的 Clojure 类型，如序列、向量、映射......是否必须为每个在 type 上调度的程序定义它们？请告诉我我是如何错过重点的！

编辑：好的，我想我可以说`(defmulti mymulti type)`然后`(defmethod clojure.lang.PeristantSomething...`等等，但这很笨拙，因为它指的是java类，但我想指的是“类型”的一些质量，比如它是顺序的还是关联的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T06:01:01.803

分派类型适用于此：

```
user> (import '[clojure.lang Associative Sequential])
user> (defmulti foo type)
#'user/foo

user> (defmethod foo Associative [x] :map)
#<MultiFn clojure.lang.MultiFn@7e69a380>

user> (foo {:x 1})
:map
user> (foo ())
; fails, a list is not associative

user> (defmethod foo Sequential [x] :seq)
#<MultiFn clojure.lang.MultiFn@7e69a380>
user> (foo ())
:seq
user> (foo [])
; fails, a vector is both sequential and associative

user> (prefer-method foo Sequential Associative)
#<MultiFn clojure.lang.MultiFn@7e69a380>
user> (foo [])
:seq 
```

请注意，顺序和关联都是接口而不是具体类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:44:32.557

选择调度函数是类型还是类。

# python - 如何使用python将html保存到mysql db

> ID：10958695
> 
> 赞同：0
> 
> 时间：2012-06-09T05:40:28.093
> 
> 标签：python, html

我想将以下 html 保存到 mysql 数据库中。

```
 <table border="0" cellpadding="2" cellspacing="7" style="vertical-align:top;"><tr><td     width="80" align="center" valign="top"><font style="font-size:85%;font-family:arial,sans-serif"><a href="http://news.google.com/news/url?sa=t&amp;fd=R&amp;usg=AFQjCNFJZ2wrps7WAV59VWbRP_g0aQ4oew&amp;url=http://www.usatoday.com/money/companies/story/2012-06-09/cost-lunch-warren-buffett/55476718/1"><img src="//nt3.ggpht.com/news/tbn/n9IJTSGY5UhSzM/6.jpg" alt="" border="1" width="80" height="80" /><br /><font size="-2">USA TODAY</font></a></font></td><td valign="top" class="j"><font style="font-size:85%;font-family:arial,sans-serif"><br /><div style="padding-top:0.8em;"><img alt="" height="1" width="1" /></div><div class="lh"><a href="http://news.google.com/news/url?sa=t&amp;fd=R&amp;usg=AFQjCNGyE1zK-V0YHEoCAnXZhUxElVsH_Q&amp;url=http://www.washingtonpost.com/national/private-lunch-with-investor-warren-buffett-sells-for-35-million-in-charity-auction/2012/06/08/gJQAEp07OV_story.html"><b>Private lunch with investor Warren Buffett sells for $3.5 million in charity <b>...</b></b></a><br /><font size="-1"><b><font color="#6f6f6f">Washington Post</font></b></font><br /><font size="-1">OMAHA, Neb. — The cost to dine with investor Warren Buffett has apparently spiked in value, with one deep-pocketed bidder forking over nearly $3.5 million during a charity auction Friday night. The annual auction for a private lunch with the Nebraska <b>...</b></font><br /><font size="-1"><a href="http://news.google.com/news/url?sa=t&amp;fd=R&amp;usg=AFQjCNHIe3njmIFMpS9E6-co2zswxEsBZQ&amp;url=http://www.google.com/hostednews/ap/article/ALeqM5jJKkBW1l-UDJC2cTIbtdsnf3HVPA?docId%3D83206c782d534f83ac832145ba2d9c1d">Cost to lunch with Warren Buffett: $3.5 million</a><link rel="syndication-source" href="www.ap.org/83206c782d534f83ac832145ba2d9c1d" /><font size="-1" color="#6f6f6f"><nobr>The Associated Press</nobr></font></font><br /><font size="-1"><a href="http://news.google.com/news/url?sa=t&amp;fd=R&amp;usg=AFQjCNEiOqIjoDlaluVXLlwIYI-_3wCABw&amp;url=http://www.sfgate.com/cgi-bin/article.cgi?f%3D/g/a/2012/06/08/bloomberg_articlesM4UMRV0D9L3701-M5BYZ.DTL">Buffett Lunch Auction Raises Record $3.46 Million for Charity</a><font size="-1" color="#6f6f6f"><nobr>San Francisco Chronicle</nobr></font></font><br /><font size="-1"><a href="http://news.google.com/news/url?sa=t&amp;fd=R&amp;usg=AFQjCNE07-nsDiD0R0w_g7Juy6bU_oPv7w&amp;url=http://money.cnn.com/2012/06/08/investing/buffett-auction-lunch/">Bidding for lunch with Buffett hits $400000</a><font size="-1" color="#6f6f6f"><nobr>CNN</nobr></font></font><br /><font size="-1" class="p"></font><br /><font class="p" size="-1"><a class="p" href="http://news.google.com/news/more?ned=us&amp;topic=b&amp;ncl=divwXhAe6uG0iLMj4RF1YfpKIhlsM"><nobr><b>all 446 news   articles&nbsp;&raquo;</b></nobr></a></font></div></font></td></tr></table> 
```

**没有错误报告，但数据库中没有数据。**

我正在使用以下代码来转义 html。我使用 Python 2.6.6

```
 def get_feeds():
    import time,datetime
    import MySQLdb
    import cgi
    import xml.etree.ElementTree as etree
    from urllib import urlopen
    db=MySQLdb.connect("localhost","test","test","headline")
    cursor = db.cursor()
    URL = "http://news.google.com/news?cf=all&ned=us&hl=en&topic=b&output=rss"
    tree = etree.parse(urlopen(URL))
    items = tree.findall('.//item')
    for item in items:
            link = item.find('link')

            title = item.find('title')
            title_text = title.text
            #print(title_text)
            desc = item.find('description')
            desc_text = cgi.escape(desc.text)
            #print(desc_text)
            timestamp = item.find('pubDate')
            timestamp2 = time.mktime(time.strptime(timestamp.text, '%a, %d %b %Y %H:%M:%S GMT'))
            guid = item.find('guid')
            guid_text = guid.text
            link = item.find('link')
            link_text = link.text
            #save item to DB
            sql = 'insert into headline(guid,title,link,description,timestamp) values ("%s","%s","%s","%s","%d")' % \
                     (guid_text,title_text,link_text,desc_text,timestamp2)

            #try:
            cursor.execute(sql)
            db.commit()
            #except:
            #       db.rollback()   

    db.close()

if __name__ == '__main__':
    get_feeds() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:30:57.173

我们一直在解决评论中的其他问题，但是这个问题太长了，无法发表评论......

您需要将数据作为第二个参数传递给`.execute()`.
这将允许 MySQLdb 为您适当地处理引用。
它还将使您的代码更能抵抗 SQL 注入攻击。

另外，请注意，所有参数占位符都`%s`与 DB-API 中指定的类型无关。
例子：

```
sql = '''insert into headline (guid,title,link,description,timestamp) 
                       values ("%s","%s","%s","%s","%s");'''
cursor.execute(sql, (guid_text,title_text,link_text,desc_text,timestamp2)) 
```

* * *

总结一下前面提到的几个问题：

1.  一个赤身裸体`except:`的人隐藏了真正的错误。
2.  MySQL 数据库的字符集已更改，调用时使用了适当的 charset kwarg `MySQLdb.connect()`。

# c++ - 重载运算符的意义 - () 作为自由函数而不是成员函数？

> ID：10958698
> 
> 赞同：13
> 
> 时间：2012-06-09T05:40:54.720
> 
> 标签：c++, operator-overloading

我正在阅读[C++ 常见问题解答](http://www.parashift.com/c++-faq-lite/operator-overloading.html)。在那里，我在运算符重载使用指南中找到了一点：

> 如果您提供构造运算符，它们应该允许提升左侧操作数（至少在类具有未使用显式关键字标记的单参数 ctor 的情况下）。例如，如果您的 Fraction 类支持从 int 到 Fraction 的提升（通过非显式 ctor Fraction::Fraction(int)），并且如果您允许两个 Fraction 对象使用 x - y，则还应该允许 42 - y。**实际上，这仅仅意味着您的 operator-() 不应该是 Fraction 的成员函数。通常，如果出于强制公开的原因，您会使其成为朋友：班级的一部分，但即使它不是朋友，也不应该成为会员。**

为什么作者写了 operator-() 不应该是成员函数？

如果我将 operator-() 作为成员函数会有什么不好的后果，还有什么其他后果？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-09T05:44:15.570

这是`Fraction`将运算符作为成员函数：

```
class Fraction
{
    Fraction(int){...}

    Fraction operator -( Fraction const& right ) const { ... }
}; 
```

有了它，这是有效的代码：

```
Fraction x;
Fraction y = x - 42; 
```

及其等价于`x.operator-( Fraction(42) )`; 但这不是：

```
Fraction z = 42 - x; 
```

因为它里面`42`没有成员函数*（当然，它甚至不是一个类）*。`operator -`

 *但是，如果您将运算符声明为自由函数，则转换操作适用于它的两个参数。所以这

```
Fraction z = 42 - x; 
```

变成了这个

```
Fraction z = Fraction(42) - x; 
```

这相当于`operator-( Fraction(42), x )`。*

# python - 需要用于混淆/应急矩阵的 Python 单线

> ID：10958702
> 
> 赞同：0
> 
> 时间：2012-06-09T05:41:29.993
> 
> 标签：python, numpy

我想编写一个单行代码来计算混淆/偶然矩阵 M（任一维度等于类数的方矩阵），它计算两个长度为 n 的向量中呈现的案例：Ytrue 和 Ypredicted。显然，以下内容在使用 python 和 numpy 时不起作用：

```
error = N.array([error[x,y]+1 for x, y in zip(Ytrue,Ypredicted)]).reshape((n,n)) 
```

创建单线矩阵混淆计算器的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T06:18:51.510

```
error = N.array([zip(Ytrue,Ypred).count(x) for x in itertools.product(classes,repeat=2)]).reshape(n,n) 
```

或者

```
error = N.array([z.count(x) for z in [zip(Ytrue,Ypred)] for x in itertools.product(classes,repeat=2)]).reshape(n,n) 
```

后者效率更高，但可能更令人困惑。

```
import numpy as N
import itertools

Ytrue = [1,1,1,1,1,1,1,1,
         2,2,2,2,2,2,2,2,
         3,3,3,3,3,3,3,3]
Ypred = [1,1,2,1,2,1,3,1,
         2,2,2,2,2,2,2,2,
         3,3,2,2,2,1,1,1]

classes = list(set(Ytrue))
n = len(classes)

error = N.array([zip(Ytrue,Ypred).count(x) for x in itertools.product(classes,repeat=2)]).reshape(n,n)
print error

error = N.array([z.count(x) for z in [zip(Ytrue,Ypred)] for x in itertools.product(classes,repeat=2)]).reshape(n,n)
print error 
```

哪个生产

```
[[5 2 1]
 [0 8 0]
 [3 3 2]]

[[5 2 1]
 [0 8 0]
 [3 3 2]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T10:44:53.950

如果 NumPy 更新或等于 1.6 并且 Ytrue 和 Ypred 是 NumPy 数组，则此代码有效

```
np.bincount(n * (Ytrue - 1) + (Ypred -1), minlength=n*n).reshape(n, n) 
```

# php - default_controller（在 routes.php 中）在生产中不起作用

> ID：10958707
> 
> 赞同：1
> 
> 时间：2012-06-09T05:42:48.343
> 
> 标签：php, codeigniter, routing

关于 codeigniter routes.php ：

我们在 C:\wamp\www\application\config\routes.php 中有以下条目

```
$route['default_controller'] = 'latestC';
$route['404_override'] = 'latestC'; 
```

latestC 是我们的默认控制器。这里 default_controller 在生产中不起作用。如果我们删除线 $route['404_override'] = 'latestC'; 从routes.php，我们在点击主url mozvo.com 及其404 时无法访问主页。基本上404_override 为我们工作，而不是default_controller 在点击mozvo.com 时进入主页。请求通过 404_override 控制器路由到主页。

但在 localhost 中，它运行良好。在 localhost 中，如果我们删除 404_controller，default_controller 会处理主 url（mozvo.com，此处为 localhost），其他不受支持的 url 是 404，这是正确的。但是在生产中 default_controller 没有正确地进入主页（mozvo.com），所以我们被迫使用 404_override 将默认请求带到主页。

附加信息 - C:\wamp\www\application\config\config.php 中的条目

```
$config['base_url']    = 'http://mozvo.com/';
$config['index_page'] = ''; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T13:22:07.283

我敢打赌，这个问题是由于文件区分大小写。您的本地主机在 WAMP 上 - Windows 不关心文件案例。

即 latestC.php = latestc.php = LASTESTC.php

但是在您的生产服务器上（我猜是 LAMP）-区分大小写很重要

即 latestC.php != latestc.php != LASTESTC.php

对于 Codeigniter，您的所有控制器都必须为小写。因此，将您的路线更改为

```
$route['default_controller'] = 'latestc'; // all lowercase
$route['404_override'] = 'latestc'; //all lowercase 
```

并确保你所有的文件都是小写的

# ios - App Store 拒绝：无法重现崩溃

> ID：10958708
> 
> 赞同：1
> 
> 时间：2012-06-09T05:42:56.690
> 
> 标签：ios, crash, app-store

App Store Review-Team 终于查看了我的新应用程序。可悲的是，他们发现我无法重现的关键功能崩溃。

他们正在使用我没有的 Retina-iPad，但该应用程序已在 Retina-iPad 上成功测试，所以我想这不是导致崩溃的原因。

我附上了已经符号化的两个崩溃报告（Xcode 是这样说的）：

```
Incident Identifier: FB200CAC-26C3-43BB-B382-5A959F19A26E
CrashReporter Key:   9b35521bd49c8385b22b5ce37201f5fb94cfb6ab
Hardware Model:      iPad3,3
Process:         VisitDenmark [3723]
Path:            /var/mobile/Applications/5EC8A7A0-0AD8-4C8C-A379-16836455B707/VisitDenmark.app/VisitDenmark
Identifier:      VisitDenmark
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-06-08 18:38:12.043 -0700
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGTRAP)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x35281848 __kill + 8
1   VisitDenmark                    0x000ce142 0x98000 + 221506
2   CoreFoundation                  0x32dab950 __handleUncaughtException + 68
3   libobjc.A.dylib                 0x34d5033e _objc_terminate + 122
4   libc++abi.dylib                 0x33f243be _ZL19safe_handler_callerPFvvE + 70
5   libc++abi.dylib                 0x33f2444a std::terminate() + 14
6   libc++abi.dylib                 0x33f2581e __cxa_rethrow + 82
7   libobjc.A.dylib                 0x34d502a2 objc_exception_rethrow + 6
8   CoreFoundation                  0x32d01506 CFRunLoopRunSpecific + 398
9   CoreFoundation                  0x32d01366 CFRunLoopRunInMode + 98
10  GraphicsServices                0x32e4e432 GSEventRunModal + 130
11  UIKit                           0x352e0cce UIApplicationMain + 1074
12  VisitDenmark                    0x00099f20 main (main.m:15)
13  VisitDenmark                    0x00099eb8 0x98000 + 7864

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x352723a8 kevent + 24
1   libdispatch.dylib               0x314d6f04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x314d6c22 _dispatch_mgr_thread + 30

Thread 2:
0   libsystem_kernel.dylib          0x35282cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32163f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32163cc8 start_wqthread + 0

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib          0x352820d8 __psynch_mutexwait + 24
1   libsystem_c.dylib               0x3215d674 pthread_mutex_lock + 376
2   WebCore                         0x359fc4e8 _ZL17_WebTryThreadLockb + 208
3   WebCore                         0x359fc7ec _ZL14WebRunLoopLockP19__CFRunLoopObservermPv + 24
4   CoreFoundation                  0x32d7fb14 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
5   CoreFoundation                  0x32d7dd50 __CFRunLoopDoObservers + 252
6   CoreFoundation                  0x32d7e16a __CFRunLoopRun + 946
7   CoreFoundation                  0x32d0149e CFRunLoopRunSpecific + 294
8   CoreFoundation                  0x32d01366 CFRunLoopRunInMode + 98
9   WebCore                         0x35a9fc9c _ZL12RunWebThreadPv + 396
10  libsystem_c.dylib               0x3216972e _pthread_start + 314
11  libsystem_c.dylib               0x321695e8 thread_start + 0

Thread 4:
0   libsystem_kernel.dylib          0x35282cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32163f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32163cc8 start_wqthread + 0

Thread 5 name:  com.apple.NSURLConnectionLoader
Thread 5:
0   libsystem_kernel.dylib          0x35272004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x352721fa mach_msg + 50
2   CoreFoundation                  0x32d7f3ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x32d7e124 __CFRunLoopRun + 876
4   CoreFoundation                  0x32d0149e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x32d01366 CFRunLoopRunInMode + 98
6   Foundation                      0x373ffbb2 +[NSURLConnection(Loader) _resourceLoadLoop:] + 302
7   Foundation                      0x373ffa7a -[NSThread main] + 66
8   Foundation                      0x3749358a __NSThread__main__ + 1042
9   libsystem_c.dylib               0x3216972e _pthread_start + 314
10  libsystem_c.dylib               0x321695e8 thread_start + 0

Thread 6:
0   libsystem_kernel.dylib          0x35282cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32163f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32163cc8 start_wqthread + 0

Thread 7:
0   libsystem_kernel.dylib          0x35272004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x352721fa mach_msg + 50
2   CoreFoundation                  0x32d7f3ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x32d7e124 __CFRunLoopRun + 876
4   CoreFoundation                  0x32d0149e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x32d01366 CFRunLoopRunInMode + 98
6   Foundation                      0x373f3b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Foundation                      0x3740d51c -[NSRunLoop(NSRunLoop) run] + 72
8   VisitDenmark                    0x000e31be 0x98000 + 307646
9   Foundation                      0x373ffa7a -[NSThread main] + 66
10  Foundation                      0x3749358a __NSThread__main__ + 1042
11  libsystem_c.dylib               0x3216972e _pthread_start + 314
12  libsystem_c.dylib               0x321695e8 thread_start + 0

Thread 8:
0   libsystem_kernel.dylib          0x35282cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32163f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32163cc8 start_wqthread + 0

Thread 9 name:  com.apple.CFSocket.private
Thread 9:
0   libsystem_kernel.dylib          0x35282570 __select + 20
1   CoreFoundation                  0x32d8363a __CFSocketManager + 726
2   libsystem_c.dylib               0x3216972e _pthread_start + 314
3   libsystem_c.dylib               0x321695e8 thread_start + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x3efc0fbc
    r4: 0x00000000    r5: 0x2fe963b1      r6: 0x2fe963b0      r7: 0x2fe96a80
    r8: 0x2fe963e0    r9: 0x00000000     r10: 0x2fe963b8     r11: 0x0000000d
    ip: 0x00000025    sp: 0x2fe9639c      lr: 0x000ce149      pc: 0x35281848
  cpsr: 0x00000010

Binary Images:
   0x98000 -   0x15efff +VisitDenmark armv7  <2db255fdcc333f7a922636327a0628f8> /var/mobile/Applications/5EC8A7A0-0AD8-4C8C-A379-16836455B707/VisitDenmark.app/VisitDenmark
0x2fe97000 - 0x2feb8e17  dyld armv7  <77eddfd654df393ba9c95ff01715fd08> /usr/lib/dyld
0x303bc000 - 0x303c7ff7  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x30515000 - 0x3055afff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x3055b000 - 0x305cbffb  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x305cc000 - 0x305e4ff1  ChunkingLibrary armv7  <c73a4b4b38ae3702bc1feae489d31634> /System/Library/PrivateFrameworks/ChunkingLibrary.framework/ChunkingLibrary
0x306b5000 - 0x306b6ffd  CoreSurface armv7  <97f871f09f503c98a6371c2b657430d8> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x306c3000 - 0x30720fff  StoreServices armv7  <6ce256d3cf433e4aa1af8d696bf1f75d> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x30721000 - 0x30721fff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x30734000 - 0x30745ff4  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x3075e000 - 0x307ddffd  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x307de000 - 0x30815fff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x30970000 - 0x309acff7  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x309b6000 - 0x309bcfff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x309bd000 - 0x309bdffe  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x309cb000 - 0x30b71eef  CoreData armv7  <b0215b6d4d143859a2b313ecade095ec> /System/Library/Frameworks/CoreData.framework/CoreData
0x30cdd000 - 0x30cecffc  MobileDeviceLink armv7  <70ac33720f513f0f97ea2279260678ca> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x30ced000 - 0x30d01ffb  PersistentConnection armv7  <54091a638f8731cd85ccf00fa06972c3> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x30d2a000 - 0x30d9eff7  MediaControlSender armv7  <87315c54b2293ab589950341ff91b45d> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x30d9f000 - 0x30da3fff  CertUI armv7  <f503892ef60e36108d28d8f9d6144d2a> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x30ebe000 - 0x30efaff7  iCalendar armv7  <f2836083051132d3aa40ad82d7f73aea> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x30efb000 - 0x30f30ffe  DataAccess armv7  <89fd0c22338b37538cf61803a0bca9e2> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x30f31000 - 0x30f32fff  libsystem_sandbox.dylib armv7  <6a8f2f33c7543808a0f4599101c3b61a> /usr/lib/system/libsystem_sandbox.dylib
0x31156000 - 0x311aeffb  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x311af000 - 0x311beff2  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x31428000 - 0x31440fff  Notes armv7  <724966ed5cd4395cb70f9c996b123f53> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x31441000 - 0x31443ffe  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x314d3000 - 0x314e9fff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x3151e000 - 0x31522ffd  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x31523000 - 0x31548ff9  OpenCL armv7  <f4b08361179a3f6bb033415b0d7c6251> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x31579000 - 0x3157afff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x315b6000 - 0x31678ffb  Celestial armv7  <19617260ee073e23b95e456d93930aea> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x316ec000 - 0x31709ff7  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x3170a000 - 0x3171bfff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x31bc5000 - 0x31bc5fff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x31d44000 - 0x31dfafff  AVFoundation armv7  <35cb7a0eb1dc3554a777c1cc11cb0415> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x31f49000 - 0x31f4bffd  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x31f4e000 - 0x31f4efff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x31f4f000 - 0x31f52ffe  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x31f6a000 - 0x31f81fff  WebBookmarks armv7  <696bb0630b19388da0d72e685bcf6e28> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x31ff0000 - 0x31ff7fff  MailServices armv7  <ab2388ce733e38b7a261273a401bbbf1> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x31ff8000 - 0x31ffdff7  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x3210d000 - 0x32157ff9  ManagedConfiguration armv7  <f1fbb825def23043830a095b953a9c94> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x3215b000 - 0x321e7ff3  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x321eb000 - 0x321ecfff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x321f4000 - 0x322e5ff3  QuartzCore armv7  <35d64a9da5523ae08c9e41511fd3061b> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x3250a000 - 0x325b7ff7  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x325b8000 - 0x325b9fff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x325f1000 - 0x325f1ffd  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x32887000 - 0x328d1ff3  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x32930000 - 0x32934fff  Marco armv7  <8dea3e558fe534ff868fc92e215ce53b> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x32938000 - 0x329beffc  CoreMotion armv7  <6a9355d5a8e238b5b8f193605d509e15> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x329bf000 - 0x32aadffa  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x32ab6000 - 0x32b04fff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x32b57000 - 0x32b60fff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x32c40000 - 0x32c6cfff  libtidy.A.dylib armv7  <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x32cf2000 - 0x32e09ff9  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x32e32000 - 0x32e36ffe  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x32e4a000 - 0x32e54fff  GraphicsServices armv7  <cb64e146a8ee3fda9e80ffae1ccc9c5a> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x32e58000 - 0x33119fff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x335c3000 - 0x3360cff7  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x336db000 - 0x336e3ffe  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x336ee000 - 0x33704ff3  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x33705000 - 0x33724fff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x33725000 - 0x3372affe  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x3372b000 - 0x33767fff  IMFoundation armv7  <253125b9103c3d13b66923ac6893c25b> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x33822000 - 0x33827ffe  CrashReporterSupport armv7  <dc11c5c2cbe73a6288a6094ebf5de673> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x33828000 - 0x3382eff3  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x33830000 - 0x33894fff  MessageUI armv7  <da7af4f9494b35558bf7892dfdb36ee3> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x33922000 - 0x33b4fff7  MediaToolbox armv7  <c3098478486032c6aff336fa711c4fc6> /System/Library/PrivateFrameworks/MediaToolbox.framework/MediaToolbox
0x33b71000 - 0x33c1bfff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x33c3e000 - 0x33d83ffb  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x33d86000 - 0x33de9ffb  IMCore armv7  <046b6b615a743057b59d4aaba8a91d61> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x33f20000 - 0x33f27ff7  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x33f42000 - 0x33f45ffc  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x33f46000 - 0x33f53ff7  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x33f90000 - 0x33fe1ff6  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x3409b000 - 0x340c4fff  AppleAccount armv7  <2ba44023410231fcb3f72f762ea3ce6e> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x340c5000 - 0x340efffe  Ubiquity armv7  <b6c22aaf6eaf3876b7ed3cf114c08539> /System/Library/PrivateFrameworks/Ubiquity.framework/Ubiquity
0x340f0000 - 0x340f0fff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x340f6000 - 0x3419cfff  AddressBookUI armv7  <da424fecc66e3628ab03378ae80b38fc> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x3419d000 - 0x341bdfff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x341c1000 - 0x34299ff6  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x3429c000 - 0x342a4fff  Librarian armv7  <aa068e49712d3af3884190a0e0cd557d> /System/Library/PrivateFrameworks/Librarian.framework/Librarian
0x342a7000 - 0x342adfff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x342c0000 - 0x342c8fff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x346d7000 - 0x34c1bff5  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x34c1c000 - 0x34c32ff7  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x34d47000 - 0x34e0dd63  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x34e39000 - 0x34e3ffff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x34e40000 - 0x34e4aff7  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x34e4c000 - 0x34e4cfff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x34e51000 - 0x34e99ffe  CoreMedia armv7  <e274e1b894753b2eb05cf7b22a36d0c1> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x34e9a000 - 0x34ea1fff  AssetsLibraryServices armv7  <38132ecfd74b325fb1a4142bab663c19> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x34ea2000 - 0x34ea5ffd  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x34f76000 - 0x34fc7fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x350ad000 - 0x350c6ff7  libRIP.A.dylib armv7  <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x350c7000 - 0x35105fff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x35106000 - 0x3510affd  IOSurface armv7  <443ac3aab9283da480dd9dcda3c5c88e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x35271000 - 0x35287ffd  libsystem_kernel.dylib armv7  <311f379a9fde305d80c1b22b7dd2e52a> /usr/lib/system/libsystem_kernel.dylib
0x35288000 - 0x3529eff5  EAP8021X armv7  <952fcfdec0633aff923768fca1a26fcb> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x3529f000 - 0x352a9ffb  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x352af000 - 0x35751ff3  UIKit armv7  <cd513a2f22f53d698c3e10f6fe48a63e> /System/Library/Frameworks/UIKit.framework/UIKit
0x358b3000 - 0x358f6fff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x35926000 - 0x35935fff  SpringBoardServices armv7  <a2363f8ed49932dba415d2d4cd32fb74> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x35936000 - 0x3593afff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x359f6000 - 0x361b5ffb  WebCore armv7  <2690c38c9c5f3c09975d619dd1dfbed7> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x361b6000 - 0x36286ffc  WebKit armv7  <3c5dd2ec46fe3e189c25bba78ad88fa1> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x36287000 - 0x362d3fff  CoreTelephony armv7  <b8f80d5d594c31d2b5d8fba9fdedb7e1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x362e3000 - 0x36327ffb  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x3632b000 - 0x3632efff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x3632f000 - 0x36378ff0  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x3638a000 - 0x363c2ff3  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x363c3000 - 0x364e8ff3  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x36a6e000 - 0x36b45ff1  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x36b46000 - 0x36b47fff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x36bc4000 - 0x36c3dfff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x36c75000 - 0x36cb4ff3  QuickLook armv7  <802b1092542a3017a0380632502610d4> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x36cb5000 - 0x36e72ff7  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x36e73000 - 0x36e96ff7  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x36e97000 - 0x36eccff7  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x370bd000 - 0x372a1ff7  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x37337000 - 0x3736bfff  MIME armv7  <d30292ea8f7e360fa5f5d5b1b62b602d> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x373d4000 - 0x373e0fff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x373ef000 - 0x3756dfff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x375dd000 - 0x3761afff  FTServices armv7  <3f23418319a03a589dd5cac7df20e238> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x37741000 - 0x37744fff  ActorKit armv7  <434c756a6b053f4ba3c954cfccddbf59> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x37757000 - 0x377f0fff  EventKit armv7  <d67aa1508ee7306b8e2a45c76ffddff0> /System/Library/Frameworks/EventKit.framework/EventKit
0x3781d000 - 0x37820ff8  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x378af000 - 0x378b3ffc  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x37949000 - 0x3794affe  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x3794b000 - 0x3798bffd  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x37a91000 - 0x37a97ffe  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x37af2000 - 0x37af5ffd  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x37af6000 - 0x37b02ff0  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x37b03000 - 0x37b3eff7  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x37b65000 - 0x37b69ffc  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x37c20000 - 0x37c50ffe  ContentIndex armv7  <7a64670bb2ff3ee39ddee1dc1c72f92d> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x37c51000 - 0x37c66fff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x37c67000 - 0x37c6bfff  FTClientServices armv7  <21de970d7ebb3e7fb502a0a5451b0806> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x37c6c000 - 0x37db5ff1  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x37db6000 - 0x37dd9ffd  MobileSync armv7  <e42604c550283f4aa517ae8f108b340f> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x37df7000 - 0x37e1bff7  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x37e1c000 - 0x37e21ffe  ApplePushService armv7  <f424c0340de637c08bbeb4f3bd8c6eaf> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x37e8c000 - 0x37e98fff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x37e99000 - 0x37ea8ff7  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x37f3e000 - 0x37fecffb  Message armv7  <573d0118246d3d9d8aed17e7ee2faec7> /System/Library/PrivateFrameworks/Message.framework/Message 
```

# android - Android 在特定设备上崩溃 - 由 int64 分配引起

> ID：10958719
> 
> 赞同：1
> 
> 时间：2012-06-09T05:44:39.483
> 
> 标签：android, c++, android-ndk

我遇到的问题似乎只发生在运行 Android OS 3.1 的联想 Thinkpad 平板电脑上。我正在使用 NDK 运行本机应用程序。该应用程序在模拟器和其他设备上运行良好。

每当我分配一个 int64_t（定义为 long long）时，我都会遇到带有信号 (4) 的 SIGILL 崩溃。例如，这些行将在设备上崩溃。

```
int64_t i = 0; 
long long j = 0; 
```

我应该注意，应用程序运行良好，我可以看到菜单呈现正确、动画和等待输入。当我触摸时，我为时间戳分配 int64 变量，这就是崩溃发生的时候。无论我在这个应用程序中分配 int64 的位置，我都会崩溃。

奇怪的是，我加载了 NDK 附带的本机活动示例并尝试分配上述数据类型，它工作正常。两个应用程序具有相同的 Application.mk 和非常相似的 Android.mk 文件。我也尝试过清理项目。

我真的不确定接下来要看什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:26:21.050

我已经解决了这个问题。这个项目是一个 iOS 项目的一个端口，里面有一些 NEON 数学类。我们使用以下标志来支持 NEON：

```
 -mfpu=neon -mfloat-abi=softfp 
```

我们在最初工作的 Android 项目中使用了相同的标志。尽管我们一拿到新的测试设备（联想 Thinkpad 平板电脑），就开始出现上述崩溃。由于 armeabi-v5 的构建工作并且不使用 NEON，我知道它是相关的。事实证明，为 NEON for Android 编译比使用上述标志更好的方法。我删除了上面的标志，所以我们的 Android.mk 看起来像这样：

```
ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)
     LOCAL_CFLAGS   += -DHAS_NEON=1
     MY_SRC_FILES   += myfile.cpp.neon
else
     LOCAL_CFLAGS   += -DHAS_NEON=0
     MY_SRC_FILES   += myfile.cpp
endif 
```

这意味着只有实际需要为 NEON 构建的文件才是。联想 Thinkpad 平板电脑（Nvidia Tegra 2）内部的处理器不支持 NEON，因此很明显，构建所有支持 NEON 的文件是以处理器不喜欢的方式生成指令。

感谢 Keith 建议我尝试其他架构，这让我找到了我的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T05:48:28.100

听起来您的编译器正在生成 64 位指令，这些指令未由您机器上的处理器实现。你是交叉编译吗？如果是这样，请确保您在平板电脑中使用正确版本的 ARM（x86？）芯片。

# grails - 子类对象不能删除

> ID：10958721
> 
> 赞同：3
> 
> 时间：2012-06-09T05:45:17.177
> 
> 标签：grails, grails-orm, grails-domain-class, grails-controller

我有一些领域类事件、问题、类别、影响、紧迫性等。

```
Class Incident
{
   Category category
   String subject
   Impact impact
}

Class Problem
{
     Urgency urgency
     Category category
     String title
}
Class Category
{
    String categoryName
    String description
} 
```

现在，一些行被插入到这个类中。现在，如果我要删除类别，它会引发错误，例如“grails 无法删除或更新父行”.. 那么我必须做什么才能删除？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T08:19:35.457

问题是 - 您在事件和问题类中引用了类别，因此这些类的数据库表将在类别表上具有外键，因此您无法删除类别，直到您删除这些事件/问题或更新这些事件问题和将类别设置为空（您必须在域约束中将它们设为可空）

所以要么你做

```
Problem.executeUpdate('update Problem p set category = null where category = ?', [category]) 
```

事件也一样

或者你可以使用 belongsTo 和 hasMany 对你的领域类建模，grails 会自动处理所有事情

就像是

```
class Problem {
    static belongsTo = [category:Category]
}

class Category {
  static hasMany = [
     problems: Problem
 ]
 static mappings = {
   problems cascade: "all-delete-orphan"
 }
} 
```

我更喜欢使用 belongsTo、hasMany、hasOne 来管理关系，而不是仅仅使用引用，这样可以更好地表达模型。

这也取决于您的领域模型，在您的业务中可能存在问题，事件存在没有类别！或者它们必须属于某个类别。如果您的答案是第一个选项，您不想级联删除，而是使用空类别更新这些事件/问题，如果您的答案是第二个选项 - 您需要级联 all-delete-orphan

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:40:05.603

您的类别如何，是否属于事件域类，如果类别属于某个域类，则不能删除它。参考：[见这里](http://grails.org/doc/latest/ref/Domain%20Classes/belongsTo.html)

# javascript - 如何在 Google 地图 v3 中的每个标记上添加编号？

> ID：10958722
> 
> 赞同：3
> 
> 时间：2012-06-09T05:45:27.570
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我想请教大家如何使用 JavaScript 在 Google Maps v3 中的每个标记上动态添加数字。例如，第一个标记是 1，第二个是 2，等等。在这种情况下，我有这样的位置数据：

```
[
 new google.maps.LatLng(1.3667, 103.8000),
 new google.maps.LatLng(1.3667, 103.8000), 
 new google.maps.LatLng(1.3667, 103.8000),
 new google.maps.LatLng(1.3667, 103.8000),
 new google.maps.LatLng(51.0000, 9.0000),
 new google.maps.LatLng(51.0000, 9.0000),
 new google.maps.LatLng(51.5142, -0.0931),
 new google.maps.LatLng(51.5142, -0.0931),
 new google.maps.LatLng(54.0000, -2.0000),
 new google.maps.LatLng(51.6000, -1.2500),
 new google.maps.LatLng(51.7500, -1.2500)
]; 
```

但是这些数据会动态变化。因此，对于第一个纬度/经度位置，我将在第一个标记上给出数字 1，在第二个标记上给出数字 2，等等。而且我还使用了每个标记的图标：

```
"http://chart.apis.google.com/chart?chst=d_map_xpin_letter_withshadow&chld=pin_star|%E2%80%A2|CC3300|000000|FF9900" 
```

我必须更改标记图标吗？我真的需要您的建议或示例代码来解决问题。请帮忙。非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:06:37.953

您可以通过多种方式执行此操作。更改标记图像是其中之一，但需要您制作所有这些标记图像。另一种是使用[StyledMarker 库](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/styledmarker/)，它是[Google Maps API Utility Library](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries)的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T15:37:50.473

您可以保留带星号的图钉图标，并在其旁边添加一个不显眼的标签。这个标签可以说任何东西，但我只保留了一个数字。它是[MarkerWithLabel 库](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.5/examples/basic.html)（[在此处下载](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.5/src/markerwithlabel_packed.js)）

**演示** [http://jsfiddle.net/yV6xv/21/](http://jsfiddle.net/yV6xv/21/)

![带数字的别针](../Images/1b0db7611f60674981ca9ca12670fe21.png)

您还需要为它定义一个 CSS。

```
 .labels {
     color: blue;
     background-color: white;
     font-family: "Lucida Grande", "Arial", sans-serif;
     font-size: 12px;
     font-weight: bold;
     text-align: center;
     width: 25px;
     border: 1px solid black;
     white-space: nowrap;
   }
​ 
```

并用 MarkerWithLabel 替换您的常规标记：

```
for (var i = 0; i < point.length; i++) {
    var marker = new MarkerWithLabel({
        map: map,
        position: point[i],
        icon: pinImage,
        shadow: pinShadow,
        labelContent: i,
        labelAnchor: new google.maps.Point(12, -5),
        labelClass: "labels"
    });
} 
```

包含在 HTML 文件中

```
 <head>
    <style type="text/css">
      html, body, #map_canvas { margin: 0; padding: 0; height: 100% }
      .labels {
        color: blue;
        background-color: white;
        font-family: "Lucida Grande", "Arial", sans-serif;
        font-size: 12px;
        font-weight: bold;
        text-align: center;
        width: 25px;
        border: 1px solid black;
        white-space: nowrap;
      }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.5/src/markerwithlabel_packed.js"></script>

    <script type="text/javascript">
      var map;
      var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
        mapTypeId: google.maps.MapTypeId.ROADMAP };
      ... 
```

# android - 尝试从我的应用程序下载 PDF 文件，但无法正常工作

> ID：10958724
> 
> 赞同：2
> 
> 时间：2012-06-09T05:45:52.613
> 
> 标签：android, android-asynctask, download, progressdialog

我是android开发的初学者，我正在做一个项目，为此我需要使用**异步任务**将PDF文件从URL下载到我的手机，我还需要在下载文件时显示**进度对话框**。

**这是我的 MainActivity.java 的运行方式..**

```
public class MainActivity extends Activity {

    String[] listItem;
    String[] listItemURLs;
    ProgressDialog mProgressDialog;
    ListView lv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.diff_view1);

        // instantiate it within the onCreate method
        mProgressDialog = new ProgressDialog(MainActivity.this);
        mProgressDialog.setMessage("Downloading file..please wait.");
        mProgressDialog.setIndeterminate(false);
        mProgressDialog.setMax(100);
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

        listItem = new String[] { "File 1", "File 2", "File 3", "File 4",
                "File 5", "File 6", "File 7" };
        listItemURLs = new String[] { "http://www.ztsinc.com/MBTLA2_ds.pdf",
                "http://www.ztsinc.com/MBT1_ds.pdf",
                "http://www.ztsinc.com/MINIMBT_ds.pdf",
                "http://www.ztsinc.com/MINI9R_ds.pdf",
                "http://www.ztsinc.com/MBTLA2_OI.pdf",
                "http://www.ztsinc.com/MBT1_OI.pdf",
                "http://www.ztsinc.com/MINIMBT_MINI9R_OI.pdf" };

        lv = (ListView) findViewById(R.id.listview1);
        lv.setAdapter(new ArrayAdapter<String>(MainActivity.this,
                android.R.layout.simple_list_item_1, listItem));
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, final View view,
                    final int position, long id) {

                AlertDialog.Builder da = new AlertDialog.Builder(
                        MainActivity.this);
                da.setMessage("Do you want to download this file?");
                da.setPositiveButton("YES", new OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {

                        downloadPDF downloadpdf = new downloadPDF(view,
                                position);
                        downloadpdf.execute(listItemURLs[position]);

                    }
                });

                da.setNegativeButton("No", new OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {

                    }
                });
                da.show();
            }

        });
    }

    public class downloadPDF extends AsyncTask<String, Integer, String> {

        private View mView;
        private int mPosition;

        public downloadPDF(View view, int position) {
            mView = view;
            mPosition = position;
        }

        @Override
        public void onPreExecute() {
            super.onPreExecute();
            mProgressDialog.show();
        }

        String fileName = listItem[mPosition];
        String fileExtension=".pdf";

        @Override
        protected String doInBackground(String... sUrl) {
            try {
                URL url = new URL(sUrl[mPosition]);
                HttpURLConnection connection =(HttpURLConnection) url.openConnection();
                connection.setRequestMethod("GET");
                connection.setDoOutput(true);
                connection.connect();

                String PATH = Environment.getExternalStorageDirectory() + "/download/";
                File file = new File(PATH);
                file.mkdirs();
                File outputFile = new File(file,fileName + fileExtension);
                FileOutputStream fos = new FileOutputStream(outputFile);
                InputStream is = connection.getInputStream();

                // this will be useful so that you can show a typical 0-100%
                // progress bar
                int fileLength = connection.getContentLength();

                // download the file

                byte buffer[] = new byte[1024];
                long total = 0;
                int len1 = 0;
                while ((len1 = is.read(buffer)) != -1) {
                    total += len1;
                    // publishing the progress....
                    publishProgress((int) (total * 100 / fileLength));
                    fos.write(buffer, 0, len1);
                }

                fos.flush();
                fos.close();
                is.close();
            } catch (Exception e) {
            }
            return null;
        }

        public void onPostExecute(Integer... progress) {
            super.onProgressUpdate(progress);
            mProgressDialog.setProgress(progress[0]);
            Toast.makeText(MainActivity.this, "Download Complete",
                    Toast.LENGTH_SHORT).show();
            mProgressDialog.dismiss();

        }

    }
} 
```

**我的 diff_view1.xml 是这样的......**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="1" >

    <ListView
        android:id="@+id/listview1"
        android:layout_width="fill_parent"
        android:layout_height="400dp" >

    </ListView>

    <Button
        android:id="@+id/btnDownload"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Download"
        android:layout_marginTop="30dp"/>

</LinearLayout> 
```

**我还在我的清单中添加了互联网、sdcard 写入等权限。**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.testProject.imageCheck"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MainActivity"
            android:label="Titles/Styled (via theme)"
            android:theme="@style/StyledIndicators" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我有一个列表视图，其中填充了一个数组适配器，其中包含“文件 1”、“文件 2”等元素。我正在以“URL”（存储在数组中的那些）作为参数来启动异步任务的对象，但是当我运行并单击任何列表视图项目时，进度条卡在 0% 处，然后什么也没有发生。谁能帮我？这样做了几个小时但没有成功:(

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:01:02.020

为此使用以下代码。

```
public class DownloaderThread extends Thread
{
        // constants
        private static final int DOWNLOAD_BUFFER_SIZE = 4096;

        // instance variables
        private AndroidFileDownloader parentActivity;
        private String downloadUrl;

        /**
         * Instantiates a new DownloaderThread object.
         * @param parentActivity Reference to AndroidFileDownloader activity.
         * @param inUrl String representing the URL of the file to be downloaded.
         */
        public DownloaderThread(AndroidFileDownloader inParentActivity, String inUrl)
        {
                downloadUrl = "";
                if(inUrl != null)
                {
                        downloadUrl = inUrl;
                }
                parentActivity = inParentActivity;
        }

        /**
         * Connects to the URL of the file, begins the download, and notifies the
         * AndroidFileDownloader activity of changes in state. Writes the file to
         * the root of the SD card.
         */
        @Override
        public void run()
        {
                URL url;
                URLConnection conn;
                int fileSize, lastSlash;
                String fileName;
                BufferedInputStream inStream;
                BufferedOutputStream outStream;
                File outFile;
                FileOutputStream fileStream;
                Message msg;

                // we're going to connect now
                msg = Message.obtain(parentActivity.activityHandler,
                                AndroidFileDownloader.MESSAGE_CONNECTING_STARTED,
                                0, 0, downloadUrl);
                parentActivity.activityHandler.sendMessage(msg);

                try
                {
                        url = new URL(downloadUrl);
                        conn = url.openConnection();
                        conn.setUseCaches(false);
                        fileSize = conn.getContentLength();

                        // get the filename
                        lastSlash = url.toString().lastIndexOf('/');
                        fileName = "file.bin";
                        if(lastSlash >=0)
                        {
                                fileName = url.toString().substring(lastSlash + 1);
                        }
                        if(fileName.equals(""))
                        {
                                fileName = "file.bin";
                        }

                        // notify download start
                        int fileSizeInKB = fileSize / 1024;
                        msg = Message.obtain(parentActivity.activityHandler,
                                        AndroidFileDownloader.MESSAGE_DOWNLOAD_STARTED,
                                        fileSizeInKB, 0, fileName);
                        parentActivity.activityHandler.sendMessage(msg);

                        // start download
                        inStream = new BufferedInputStream(conn.getInputStream());
                        outFile = new File(Environment.getExternalStorageDirectory() + "/" + fileName);
                        fileStream = new FileOutputStream(outFile);
                        outStream = new BufferedOutputStream(fileStream, DOWNLOAD_BUFFER_SIZE);
                        byte[] data = new byte[DOWNLOAD_BUFFER_SIZE];
                        int bytesRead = 0, totalRead = 0;
                        while(!isInterrupted() && (bytesRead = inStream.read(data, 0, data.length)) >= 0)
                        {
                                outStream.write(data, 0, bytesRead);

                                // update progress bar
                                totalRead += bytesRead;
                                int totalReadInKB = totalRead / 1024;
                                msg = Message.obtain(parentActivity.activityHandler,
                                                AndroidFileDownloader.MESSAGE_UPDATE_PROGRESS_BAR,
                                                totalReadInKB, 0);
                                parentActivity.activityHandler.sendMessage(msg);
                        }

                        outStream.close();
                        fileStream.close();
                        inStream.close();

                        if(isInterrupted())
                        {
                                // the download was canceled, so let's delete the partially downloaded file
                                outFile.delete();
                        }
                        else
                        {
                                // notify completion
                                msg = Message.obtain(parentActivity.activityHandler,
                                                AndroidFileDownloader.MESSAGE_DOWNLOAD_COMPLETE);
                                parentActivity.activityHandler.sendMessage(msg);
                        }
                }
                catch(MalformedURLException e)
                {
                        String errMsg = parentActivity.getString(R.string.error_message_bad_url);
                        msg = Message.obtain(parentActivity.activityHandler,
                                        AndroidFileDownloader.MESSAGE_ENCOUNTERED_ERROR,
                                        0, 0, errMsg);
                        parentActivity.activityHandler.sendMessage(msg);
                }
                catch(FileNotFoundException e)
                {
                        String errMsg = parentActivity.getString(R.string.error_message_file_not_found);
                        msg = Message.obtain(parentActivity.activityHandler,
                                        AndroidFileDownloader.MESSAGE_ENCOUNTERED_ERROR,
                                        0, 0, errMsg);
                        parentActivity.activityHandler.sendMessage(msg); 
                }
                catch(Exception e)
                {
                        String errMsg = parentActivity.getString(R.string.error_message_general);
                        msg = Message.obtain(parentActivity.activityHandler,
                                        AndroidFileDownloader.MESSAGE_ENCOUNTERED_ERROR,
                                        0, 0, errMsg);
                        parentActivity.activityHandler.sendMessage(msg); 
                }
        }

} 
```

以上代码从以下链接的项目中提取。

[现有项目](http://code.google.com/p/hassanpurcom/source/browse/trunk/android/AndroidFileDownloaderExample/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-27T10:06:16.580

之后`publishProgress(...)`，**`onProgressUpdate`**将在 AsyncTask 类中调用，您应该更新进度。

```
// Use this method in your downloadPDF class 
protected void onProgressUpdate(String... progress) {
    // setting progress percentage
    mProgressDialog.setProgress(Integer.parseInt(progress[0]));
} 
```

# opencart - 如何在opencart中添加货币？

> ID：10958725
> 
> 赞同：-1
> 
> 时间：2012-06-09T05:46:01.357
> 
> 标签：opencart

我在 opencart 的货币表中添加了一种货币，但它没有反映在前端。我将如何实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:25:57.057

管理面板中是否“启用”了货币？转到您在管理员中添加的货币并查看底部的“状态”选择字段。在此处禁用意味着它不会显示在店面。

# cakephp-1.3 - Cakephp 导入控制器

> ID：10958727
> 
> 赞同：2
> 
> 时间：2012-06-09T05:46:09.610
> 
> 标签：cakephp-1.3

我是 cakephp 的新手，我想在我的控制器中导入控制器，所以我使用下面的语法。这是我在其中导入用户控制器的控制器：

**users_controller.php**

```
 function api_work(){ $data = $this->User->find('all'); $this->set('data' , $data); } 
```

**播放控制器.php**

```
 function api_show()
        {
            $this->layout= false;
            App::import('Controller', 'Users');
            $Users = new UsersController;
            $Users->constructClasses();
            $data = $Users->api_work();
            pr($data); //it not display anything and shows error like undefined varia
ble
        } 
```

控制器已成功导入。问题是如何从 api_work() 函数返回数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T05:57:30.680

CakePHP 是一个 MVC（模型视图控制器）。users_controller 中的 api_work 函数应该位于 User 模型 (User.php) 中。或者，您可以`$this->User->find('all');`在 play_controller.php 中而不是`$Users->api_work()`.

以上建议意味着您需要删除所有这些行：

```
App::import('Controller', 'Users');
$Users = new UsersController;
$Users->constructClasses(); 
```

您还需要确保在 users_controller.php 的顶部添加以下内容（就在类声明下方）。

```
$uses = array([...], 'User'); OR $uses = array('User'); 
```

我真的推荐阅读 CakePHP 的书 ( [http://book.cakephp.org/](http://book.cakephp.org/) )。

# wpf - 在 WinRT 中播放无闪烁（无缝）的视频列表

> ID：10958729
> 
> 赞同：3
> 
> 时间：2012-06-09T05:47:12.917
> 
> 标签：wpf, silverlight, windows-runtime, mediaelement

我有一个视频列表，我需要创建一个播放列表来播放这个列表。我试图通过将源设置为事件`MediaElement`中的下一个视频来做到这一点。`MediaEnded`

```
mediaElement.Source = new Uri(first, UriKind.Relative);
mediaElement.MediaEnded += (s, ea) =>
             { 
                    ea.Handled = true; 
                    mediaElement.Source = new Uri(second, UriKind.Relative);
             }; 
```

第一个视频到第二个视频之间的转换需要 1 秒的问题。我想像一个长视频一样播放整个列表。那可能吗？

# sql-server - 如何在具有 NHibernate 持久性的另一个 sql 服务器上设计具有实体引用实体的域

> ID：10958732
> 
> 赞同：2
> 
> 时间：2012-06-09T05:48:04.447
> 
> 标签：sql-server, nhibernate, ddd-repositories, cross-database

我需要设计具有两个简单实体的域：

```
public class User
{
    public virtual int Id { get; protected set; }
    public virtual string Email { get; protected set; }
    public virtual Country Country { get; protected set; }
    ...
}

public class Country
{
    public virtual int Id { get; protected set; }
    public virtual string Name { get; protected set; }
    ...
} 
```

在域世界中一切都很好而且很清楚，但问题是 User 和 Country 在两个不同服务器上的两个不同数据库中持久存在（它们都是 MSSQL 2005 服务器）。

**那么，我应该如何正确地在 NHibernate 中跨不同的 sql 服务器实现实体的持久性？**

在引用中使用 ID 而不是对象？是的，这很简单，但它对整个域的影响很大，使域对象更像 DTO。并且它将要求 IUserRepository 掌握 ICountryRepository 以加载用户实体。

链接服务器？嗯...不知何故我不喜欢它（分布式事务和没有 XML 列）。在使用它们时我应该注意什么，更重要的是我应该如何配置 NHibernate 以有效地与链接服务器一起工作？

也许其他一些解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:54:01.760

您可以使用来自 NHContrib 的 NHibernate.Shards。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:59:45.917

我听说有人`schema`在类映射中使用该属性来包含链接的服务器名称（如`otherserver.dbo`），但我不知道有谁在这样做时没有遇到一个或另一个问题。

有一些 DDD 引导框架允许您透明地将实体映射到不同的数据库（产生多个`ISessionFactories`，它将​​为您管理）。[NCommon](https://github.com/riteshrao/ncommon)是我推荐的一种。然而，这假设`Country`它只存在于一个数据库中，并且`User`只存在于另一个数据库中。

至于事务...好吧，如果您使用`TransactionScope`并配置 DTS，那可能会起作用。NCommon 使用的`UnitOfWork`API 也封装了`TransactionScope`.

您必须进行更改`User`，以便这`Country`只是一个 ID。这就是为什么。你最终会得到两个会话工厂，一个有一个映射，`Country`另一个有一个映射`User`。如果您不进行更改，NHibernate 将抱怨`Country`您保存时没有映射`User`（因为它们存储在两个不同的数据库中）。

现在你可以指示 NHibernate 忽略`Country`属性，并保持`Country`你的域不会改变。但是，`User`下次从数据库加载时，Country 将为空。

# c - C编程语言，内存问题

> ID：10958742
> 
> 赞同：2
> 
> 时间：2012-06-09T05:50:42.407
> 
> 标签：c

我正在尝试读取由多行组成的文件文本（input.txt），例如 AB 120 CB 60 ...
好吧，现在我正在尝试将可能在该文件中重复多次的名称传输到一个双指针，它们应该只显示一次。在下面的代码中，我得到了其中的一些，但我也遇到了分段错误。我不知道我错过了什么或出了什么问题。你的任何一点帮助都会对我有很大帮助。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main(int argc, char *argv[]){
   int i=1, state=0, k, dist;
int** myMat;
char *city1, *city2, **matnames;
FILE* p;
    city1 = (char*) malloc(sizeof(char));
    city2 = (char*) malloc(sizeof(char));
    matnames = (char**) malloc(sizeof(char*));
    myMat = (int**) malloc(sizeof(int*));               
p = fopen(argv[1],"r");
/************************************************************/
    matnames[0] = (char*) malloc(sizeof(char));
    matnames[1] = (char*) malloc(sizeof(char));
    matnames[2] = (char*) malloc(sizeof(char));
    matnames[2] = NULL;
    fscanf(p, "%s %s %d", city1, city2, &dist);
        strcpy(matnames[0],city1);
        strcpy(matnames[1],city2);
/************************************************************/  
while( fscanf(p,"%s %s %d",city1,city2, &dist) != EOF){             
        for(k=0; matnames[k]!=NULL; k++){                   
            if( strcmp(matnames[k], city1) != 0){
                 state++;
                }               
        }       
        if(state  == k){
            matnames[k] = (char*) malloc(sizeof(char));
            strcpy(matnames[k], city1);
            matnames[k+1] = (char*) malloc(sizeof(char));
            matnames[k+1] = NULL;
            }
        state = 0;
        for(k=0; matnames[k] != NULL;k++){                  
                if( strcmp(matnames[k], city2) != 0){
                    state++;
                }               
        }
        if(state == k){
            matnames[k] = (char*) malloc(sizeof(char));
            matnames[k+1] = (char*) malloc(sizeof(char));
            strcpy(matnames[k], city2); 
            matnames[k+1] = NULL;   
            }
        state = 0;

}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:55:54.683

```
matnames = (char**) malloc(sizeof(char*)); 
```

您在这里只为一个分配了足够的内存`char*`。

然后你打电话

```
matnames[1] = (char*) malloc(sizeof(char)); 
```

而 matnames 只有一个空间`char*`，`matnames[1]`试图访问空间一秒钟`char *`。

你需要做的是

```
matnames = (char**) malloc(n * sizeof(char*)); 
```

`n`您希望存储的元素数量在哪里`matnames[]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T05:56:46.983

除其他事项外，您已经分配了足够的内存`matnames`来存储*one* `char *`，但您在其中存储了三个值。它也没有帮助你 malloc 一些内存`matnames[2]`，然后立即用它覆盖 malloc 的指针`NULL`——但这只是内存泄漏，因为你实际上并没有尝试将任何内容存储到`*(matnames[2])`. 可能还有其他问题，但让我们从最直接的问题开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T05:57:54.110

您可能还对“strdup()”感兴趣：

*   [http://linux.die.net/man/3/strdup](http://linux.die.net/man/3/strdup)

它将“malloc()”和“strcpy()”组合到一个操作中 - 并且让您不必担心您是否“malloc'ed”了正确的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T05:58:41.743

在 C 中，表达式`sizeof(char)`将始终返回`1`。这是根据定义：`sizeof()`可以在许多不同类型的计算机上工作，而不是每个都使用字节。

因此，您只为每个名称分配一个字节。如果城市名称可以有 20 个字符长，请使用`malloc(21)`（不要忘记`'\0'`在字符串中也有空格）。

对于`(char **)`指针，您应该计算出需要存储多少个指针，然后乘以`sizeof(char *)`. 因此，如果您需要存储 3 个`char *`指针，请使用`malloc(3 * sizeof(char *))`.

# jvm - 将虚拟机设计与其主要编程语言相匹配

> ID：10958748
> 
> 赞同：16
> 
> 时间：2012-06-09T05:52:10.300
> 
> 标签：jvm, language-design, vm-implementation

作为一个附带项目的背景，我一直在阅读不同的虚拟机设计，当然 JVM 受到的关注最多。我还研究了 BEAM (Erlang)、GHC 的 RTS（一种但不完全是 VM）和一些 JavaScript 实现。Python 也有一个字节码解释器，我知道它存在，但没有读过太多。

我还没有找到一个很好的解释，**为什么要为特定语言做出特定的虚拟机设计选择**。我对适合并发和/或非常动态（Ruby、JavaScript、Lisp）语言的设计选择特别感兴趣。

* * *

**编辑：**为了回应要求具体的评论，这里是一个例子。JVM 使用堆栈机而不是寄存器机，这在 Java 刚被引入时引起了很大争议。事实证明，设计 JVM 的工程师这样做是为了平台可移植性，将堆栈机器转换回寄存器机器比克服虚拟寄存器过多或过少的阻抗不匹配更容易和更有效。

这是另一个例子：对于 Haskell，要查看的论文是[在股票硬件上实现惰性函数式语言：Spineless Tagless G-machine](http://research.microsoft.com/en-us/um/people/simonpj/papers/spineless-tagless-gmachine.ps.gz)。这与我所知道的任何其他类型的 VM 都非常不同。事实上，GHC（Haskell 的首要实现）不会实时运行，而是用作编译的中间步骤。Peyton-Jones 列出了至少 8 个其他无法运行的虚拟机。我想了解为什么有些虚拟机成功而其他虚拟机失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T23:41:32.130

我将以不同的方式回答您的问题：什么是虚拟机？虚拟机只是比源语言低级语言的“解释器”规范。这里我使用“interpreter”这个词的黑盒含义。我不在乎 VM 是如何实现的（作为字节码 intepereter、JIT 编译器等等）。当这样表述时，从设计的角度来看，VM 并不是有趣的东西，它是低级语言。

理想的 VM 语言将做两件事。一，它将使将源语言编译到其中变得容易。第二，它还将使在目标平台上的解释变得容易（解释器可以非常天真地实现，或者可以是一些非常复杂的 JIT，如 Hotspot 或 V8）。

显然，这两个理想属性之间存在张力，但它们或多或少地形成了一条穿过所有可能 VM 的设计空间的线上的两个端点。（或者，也许是比线更复杂的形状，因为这不是一个平坦的欧几里得空间，但你明白了）。如果您在该行之外构建您的 VM 语言，那么它不会很有用。这就是限制 VM 设计的原因：把它放在理想的位置上。

这也是为什么高级虚拟机往往非常特定于语言，而低级虚拟机则与语言无关，但不提供很多服务。高级虚拟机本质上接近源语言，这使得它远离其他不同的源语言。低级 VM 本质上接近目标平台，因此接近许多语言理想线的平台端，但低级 VM 也远离理想线的“易于编译”端大多数源语言。

现在，更广泛地说，从概念上讲，任何编译器都可以看作是从源语言到中间形式的一系列转换，中间形式本身可以被视为 VM 的语言。中间语言的虚拟机可能永远不会被构建，但它们可能会被构建。编译器最终会发出最终形式。最终形式本身将成为 VM 的一种语言。我们可以称该虚拟机为“JVM”、“V8”……或者我们可以称该虚拟机为“x86”、“ARM”等。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:02:35.067

派生 VM 的技术之一是顺着编译链往下走，将源语言转换为越来越多的低级中间语言。一旦您发现了适合平面表示的足够低级别的语言（即可以序列化为一系列“指令”的语言），这几乎就是您的虚拟机。您的 VM 解释器或 JIT 编译器只会从您选择进行序列化的点继续您的转换链。

一些序列化技术非常常见 - 例如，使用表达式树的伪堆栈表示（如在 .NET CLR 中，它根本不是“真正的”堆栈机器）。否则，您可能希望使用 SSA 形式进行序列化，如 LLVM 中，或者只是一个具有无限数量寄存器的 3 地址 VM（如 Dalvik 中）。您采用哪种方式并不重要，因为它只是一个序列化，稍后会反序列化以继续您的正常编译方式。

如果您打算立即解释您的 VM 代码而不是编译它，那就有点不同了。目前对于哪种 VM 更适合解释尚未达成共识。基于堆栈（或者我敢说是 Forth）的 VM 和基于寄存器的 VM 都被证明是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:43:23.760

我发现这本书很有帮助。它讨论了您所询问的许多问题。（请注意，我与亚马逊没有任何关联，也不是在推广亚马逊；只是最容易链接的地方）。

[http://www.amazon.com/dp/1852339691/](https://rads.stackoverflow.com/amzn/click/com/1852339691)

# file - 随机存取文件 I/O

> ID：10958751
> 
> 赞同：-4
> 
> 时间：2012-06-09T05:52:23.280
> 
> 标签：file, io

我正在考虑编写文件 I/O 抽象。常见桌面操作系统的 API 是否支持从文件中的随机位置插入或擦除？或者，如果我的界面提供，我是否必须手动调整文件中的每个字节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:59:34.090

是的，您需要自己实现 shuffle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:59:54.613

不了解 API 本身。但是[Windows](http://msdn.microsoft.com/en-us/library/ms810613.aspx)和 Linux上的[内存映射文件](http://en.wikipedia.org/wiki/Memory-mapped_file)以一种迂回的方式提供了这种功能。所以你可以把它包装起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T06:00:38.483

使用 C 标准库，您可以打开具有写入权限的文件，然后调用`fseek()`移动到特定位置，然后在该位置写入。请参阅 的手册页`fseek()`或它的网页：http: [//linux.die.net/man/3/fseek](http://linux.die.net/man/3/fseek)

但是覆盖就是你所得到的。如果要插入或删除数据，则需要从该点重写整个文件。这效率不高。

因此，不要使用文件，而是使用某种数据库。您可以插入记录和删除记​​录，而无需重写文件：您只需重写一些索引。但是要读取数据，您需要使用数据库遍历索引并以正确的顺序提取记录。

在 PalmOS 上，我相信应用程序唯一可用的存储是数据库存储！但是在大多数环境中没有内置数据库；你需要安装一些东西。

我建议您从使用 SQLite 开始，因为它是公共领域（完全免费供任何使用）并且经过很好的调试。它的性能不会很惊人，但它会比完全重写文件来插入和删除东西要好。此外，由于 SQLite 非常流行，大多数编程语言都可以使用绑定。

[http://sqlite.org/](http://sqlite.org/)

# python - 比较 DatetimeField 和现在/今天的日期和时间值

> ID：10958756
> 
> 赞同：0
> 
> 时间：2012-06-09T05:53:27.673
> 
> 标签：python, django, datetime

我在课堂上添加了一个 DateTimeField。如果已达到 start_date，我想返回 True。但我的实现只适用于日期部分。例子：

```
Startdate = 2012-06-08 18:00:00
currentdate 2012-06-08 19:00:00 returns False
currentdate 2012-06-09 00:00:00 returns True

from django.utils.datetime_safe import datetime

class Game(models.Model):
    start_date = models.DateTimeField('date and time game is started')

    def is_started(self):
        return self.start_date <= datetime.today() 
```

所以我的问题是：如何比较我的字段的日期和时间值与当前日期和时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T05:58:10.253

尝试使用 datetime.now() 而不是 datetime.today()

```
class Game(models.Model):
    start_date = models.DateTimeField('date and time game is started')

    def is_started(self):
        return self.start_date <= datetime.now() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T07:13:17.553

如果我们谈论方便的存储时间，我认为以 ctime 整数存储时间会更好。使用整数，您可以执行所需的所有数学运算，而不会感到头疼。

```
import time
time.time() 
```

# php - 通过添加/删除外部脚本的链接以编程方式更新页面的源。

> ID：10958759
> 
> 赞同：0
> 
> 时间：2012-06-09T05:53:48.647
> 
> 标签：php, javascript, html

我有一些网页将链接到我服务器上的 javascript 文档，这将为这些页面提供一些功能。我需要能够随着时间的推移更改这个 js 文档的名称。我可以在该 js 文档中包含什么，以修改链接到它的页面，更新该链接？例如，一个页面链接到我的 js

```
<script type="text/javascript" src="http://www.mysite.com/directory.filename.js"></script> 
```

我在该文档中的 js 如何修改该页面的源代码，并用新的/正确的链接永久替换此链接？

我希望这一切都能自动运行，因此这些页面的网站管理员不需要不断地手动编辑他们的源代码。它们只包含一次第一个链接。它会定期自我更新，然后当网站管理员决定不再需要我的功能时，他们只需从源中手动删除链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T06:00:47.543

**这里有 3 个选项。**

**1\. 带有 URL 的 txt 文件。**

您可以存储一个包含 JS 文件路径的`.txt`常量**名称的文件。**然后执行以下操作：

`<script type="text/javascript" src="http://www.example.com/<?php echo file_get_contents("jsname.txt"); ?>"></script>`

额外信息：[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php) 如果这是跨域，此方法将不起作用。

**2\. PHP 重定向**

您可以在您的网站上有一个 PHP 文件，该文件会重定向到正确的文件，并且您可以随时更新它。例如：

`<script type="text/javascript" src="http://www.example.com/myjs_redirect.php"></script>`

每次更改`.php`文件的重定向以指向正确的 JS 文件。示例 PHP 代码：

`header("Location: myJS.js");`

**3\. Mod_Rewrite 重定向**

您可以使用它`.htaccess`来重定向它。将其与JS文件放在同一文件夹中，并添加以下代码：

```
RewriteEngine On
RewriteRule ^my_standard_js_URL\.js$ mynewJSfile.js [L] 
```

**如果您喜欢第三个选项（我推荐它），请考虑重新标记此问题。**

# phpmyadmin - phpmyadmin - ubuntu11.10 版本 - 无权限创建新数据库

> ID：10958763
> 
> 赞同：0
> 
> 时间：2012-06-09T05:54:05.753
> 
> 标签：phpmyadmin

我正在使用 ubuntu 11.10、apache2，当我打开 PHPMyadmin 时，我无法创建新数据库，它显示“无权限”。但是当我通过命令行（终端）创建时，我可以在 mysql 中创建 ..，为什么会出现这个错误，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:54:43.220

当您在 ubuntu 上安装 phpmyadmin 时，您创建了一个仅具有使用权限的用户。

要在 phpmyadmin 中创建数据库，您必须使用**mysql 密码以****root**身份登录。

# php - 关闭浏览器选项卡时销毁会话

> ID：10958769
> 
> 赞同：7
> 
> 时间：2012-06-09T05:55:05.653
> 
> 标签：php, session, login

我有用户登录/注销应用程序：我想销毁会话，当我关闭浏览器（（所有选项卡））、IE、Firefox 工作时，它工作正常。但是我想在用户关闭单个选项卡时销毁会话。我在用 ：

```
session_set_cookie_params(0);
session_start(); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-09T06:01:01.067

浏览器仅在退出整个浏览器进程时才销毁会话 cookie。没有可靠的方法来确定用户是否/何时关闭了选项卡。您可以附加一个`onbeforeunload`处理程序，并希望设法对服务器进行 ajax 调用以说明选项卡正在关闭，但这并不可靠。

如果用户在您的网站上打开了两个或更多表格怎么办？如果他们关闭一个选项卡，则另一个选项卡将被有效地注销，即使用户完全打算继续使用您的网站。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T06:05:52.390

解决方案是使用自己的方法实现会话超时。使用一个简单的时间戳来表示最后一个请求的时间，并在每个请求中更新它：

您需要编写与此类似的代码

```
if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > 1800)) {
    // request 30 minates ago
    session_destroy();
    session_unset();
}
$_SESSION['LAST_ACTIVITY'] = time(); // update last activity time 
```

您可以在此处找到有关此内容的更多信息，这类似于您的问题[Destroy or unset session when user close the browser without click on logout](https://stackoverflow.com/questions/2839988/php-how-to-destroy-or-unset-session-when-user-close-the-browser-without-clicki)。

它涵盖了您所需要的一切。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-09-18T11:41:39.607

[这个链接很有帮助](https://yuvrajingale.wordpress.com/2013/01/23/how-to-destroy-session-when-users-close-the-browser-tab-in-php/)

但是你需要在函数 endsession 中添加代码，它是 JavaScript 函数，你可以使用 ajax 来调用你的 logout.php。它对我有用：

```
$.ajax({
    url:"logout.php",
    method:'POST',
    contentType:false,
    processData:false,
    success:function(data)
    {
        alert("session destroyed");
    }
}); 
```

# android - 我们可以使用 Android 应用程序存储我手机的所有 http/https 请求吗？

> ID：10958770
> 
> 赞同：0
> 
> 时间：2012-06-09T05:55:46.540
> 
> 标签：android, httpwebrequest

我们可以使用 Android 应用程序存储我手机的所有 http/https 请求吗？

有什么方法可以存储我的 android 应用程序的流量吗？

# python - Generator Expression vs yield: Why isn't 'next()' working?

> ID：10958771
> 
> 赞同：7
> 
> 时间：2012-06-09T05:55:50.363
> 
> 标签：python

I know I must be missing something simple, but I am not seeing it.

If I have a generator expression like this:

```
>>> serializer=(sn for sn in xrange(0,sys.maxint)) 
```

I can generate, easily, individual integers like this:

```
>>> serializer.next()
0
>>> serializer.next()
1
>>> serializer.next()
2 
```

If I write a generator like this:

```
>>> def ser():
...    for sn in xrange(0,100000):
...       yield sn 
```

It is no bueno:

```
>>> ser().next()
0
>>> ser().next()
0
>>> ser().next()
0 
```

??? What am I missing ???

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-09T05:58:14.130

`ser()` creates the generator. So each time you call `ser()` it is sending you a new generator instance. You need to use it just like the expression:

```
serializer = ser()
serializer.next() 
```

Consider that, if it *didn't* work this way, you could only ever use the `ser()` function once and you could never reset it. Plus, you can change the ser function to accept a max integer, and make your program more flexible.

```
def ser(n=sys.maxint):
    for sn in xrange(0, n):
        yield sn 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T05:58:33.757

In your second example you keep creating a new instance, starting with a fresh generator.

```
g = ser()
g.next()
g.next() 
```

Create the generator once and reuse it.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T05:57:52.990

```
ser() 
```

initializes a **new** generator each time.

To fix it do something like this:

```
s = ser()
next(s) # next is preferred over .next which is why .next has been removed in Py3
next(s) 
```

# hadoop - 如何在 Hadoop 中找到 blockName 到 DataNode 的映射

> ID：10958774
> 
> 赞同：0
> 
> 时间：2012-06-09T05:55:55.280
> 
> 标签：hadoop, hdfs

是否有一个编程接口来找出给定的blockID是否存在于哪个数据节点上。即读取 fsImage 并返回此信息的能力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:57:18.167

我知道的粗略方法之一是在 dfs 数据目录中查找带有 blockName 的文件。然而，这是一个 O(n) 解决方案，我很确定会有一个 O(1) 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:20:03.383

与[如何在 HDFS hadoop 中从 blockName 中查找文件](https://stackoverflow.com/questions/10881449/how-to-find-file-from-blockname-in-hdfs-hadoop)类似，namenode 没有公共接口，这将允许您从块 Id 中查找信息（仅通过文件名）。

您可以查看打开 fsImage 但这只会为您提供从块 ID 到文件名的映射，因为承载块的实际位置（DataNodes）未存储在此文件中 - 数据节点树遍历其数据目录并向 NameNode 报告他们有什么积木。

我想如果您可以将调试器附加到名称节点，您可能可以检查块映射，但由于没有从 ID 到文件名的映射，它仍然是一个 O(n) 操作

# android - android用换行符替换分隔符

> ID：10958775
> 
> 赞同：0
> 
> 时间：2012-06-09T05:56:17.750
> 
> 标签：android, stringtokenizer

我有一个字符串，其中有分隔符。我想知道用新行替换分隔符的最佳方法。我在使用 String Tokenizer 时遇到了各种问题，主要问题是 NoSuchElementException。到目前为止，基本上我的方法是从数据库中检索数据一旦实现，我将每个记录存储在一个字符串中 `String question = c.getString(1);` 这是字符串标记器 `StringTokenizer st = new StringTokenizer(question,"<ENTER>");`我使用 while 循环遍历标记

```
 while (st.hasMoreTokens()) {
                        System.err.println(st.nextToken());
                       // quest.setText(String.valueOf(st.nextToken("<ENTER>")));

            } 
```

代码中的工作示例

```
String in = "What is the output of: <ENTER><ENTER>echo 6 % 4;"; 

            in=in.substring(in.indexOf("<ENTER>")+7,in.lastIndexOf("<ENTER>"));
            String[] mSplitted= in.replaceAll("<ENTER><ENTER>", "<ENTER>").split("<ENTER>");

            for(int i=0;i<mSplitted.length;i++)
            {
                System.out.println("values: "+mSplitted[i]);
                quest.setText(String.valueOf(mSplitted[i]));
} 
```

xml代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/quest"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="false"
        android:text="TextView" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.08"
        android:text="@string/hello" />

    <Button
        android:id="@+id/Next"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

输出

![在此处输入图像描述](../Images/8884ec9a1d105ec97ab0ae24b18f26cd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T06:02:09.800

你不能使用`split()`String*吗*？

```
String in = "<ENTER>title=Java-Samples<ENTER>" + 
            "<ENTER>author=Emiley J<ENTER>" + 
            "<ENTER>publisher=java-samples.com<ENTER>" + 
            "<ENTER>copyright=2007<ENTER>"; 

in=in.substring(in.indexOf("<ENTER>")+7,in.lastIndexOf("<ENTER>"));
String[] mSplitted= in.replaceAll("<ENTER><ENTER>", "<ENTER>").split("<ENTER>");
String mFinal="";

for(int i=0;i<mSplitted.length;i++)
{
   System.out.println("values: "+mSplitted[i]);
   mFinal= mFinal+ mSplitted[i];
}
quest.setText(mFinal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:20:37.033

背后的原因`NoSuchElementException`是您正在检查您的 Tokenizer 是否有更多的令牌，但如果有，那么您正在同时读取两个令牌。

文档说`hasMoreTokens`测试这个标记器的字符串是否有更多可用的标记。如果此方法返回 true，则**后续**不带参数的调用`nextToken()`将成功返回令牌。

这意味着`hasMoreTokens`只确定下一个令牌，而不是旁边的令牌！

你的情况应该是..

```
while(st.hasMoreTokens()) { 
              String key = st.nextToken(); 
              String val="";
              if(st.hasMoreTokens())
                val = st.nextToken();  
            System.out.println(key + "\n" + val); 
        } 
```

因为您的条件仅适用于偶数个元素。

# c# - 在 ASP.NET 中使用 C# 全局变量的正确方法？

> ID：10958781
> 
> 赞同：4
> 
> 时间：2012-06-09T05:57:32.017
> 
> 标签：c#, asp.net, webforms, global-variables

我在我的应用程序中使用 ASP.NET Web 窗体和 C#。我有一个名为 的类文件，我在其中使用和属性`Global.cs`定义变量。我通过实例化该类对象在任何页面上的任何位置使用这些变量。`set``get`

这是我的`Global.cs`文件：

```
using System;
using System.Data;
using System.Linq;
using System.Web;

/// <summary>
/// Contains my site's global variables.
/// </summary>
public static class Global
{
    /// <summary>
    /// Global variable storing important stuff.
    /// </summary>
    public static string gDate;
    public static string gMobLength;
    public static string gDateFormat;
    public static string gApplicationNo;
    public static string gBranchNo;
    public static string gMemId;
    public static string gIsEditable="false";
    public static string gLoggedInUserName;

    public static string ImportantData
    {
        get
        {
            return gDate;

        }
        set
        {
            gDate = value;

        }

    }
    public static string MobileLength
    {
        get
        {
            return gMobLength;
        }
        set
        {
            gMobLength = value;
        }
    }

    public static string DateFormat
    {
        get
        {
            return gDateFormat; 
        }
        set
        {
            gDateFormat = value; 
        }
    }
    public static string ApplicationNo
    {
        get
        {
            return gApplicationNo;
        }
        set
        {
            gApplicationNo = value; 
        }
    }
    public static string BranchNo
    {
        get
        {
            return gBranchNo; 
        }
        set
        {
            gBranchNo = value;
        }
    }

} 
```

这是在整个项目中使用变量的正确方法吗？这种方法可能有哪些优点和缺点，你们会采用什么方法来使用全局变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T06:04:34.197

首先，我建议使用自动实现的属性。

```
public static string BranchNo { get; set; } 
```

稍微简化你的代码。至于这是否是一个好方法，这取决于。有时简单直接会更好，这属于这一类。如果初始化后值不应更改，则可能需要使用适当的单例进行初始化：

```
public class Settings
{
   private static Settings _current;
   private static readonly object _lock = new object();

   public static Settings Current
   {
      get
      {
         lock(_lock)
         {
            if (_current == null) throw new InvalidOperationException("Settings uninitialized");
            return _current;
         }
      }
      set
      {
          if (value == null) throw new ArgumentNullException();
          if (_current != null) throw new InvalidOperationException("Current settings can only be set once.");

          if (_current == null)
          {
              lock(_lock)
              {
                 if (_current == null) _current = value;
              }
          }
      }
   }

   public string ImportantData { get; private set; }

   // etc. 
} 
```

初始化设置：

```
Settings.Current = new Settings{ ImportantData = "blah blah blah"}; 
```

访问：

```
var data = Settings.Current.ImportantData; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T06:03:05.150

在这两种[溴化物](http://en.wikipedia.org/wiki/Bromide_%28language%29)之外， “全局是坏的”和“[属性](http://msdn.microsoft.com/en-us/library/aa288470%28v=vs.71%29.aspx)是好的”......你的方法本质上没有任何问题。去吧！

恕我直言.. PSM

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T09:08:37.017

实例化该类对象后看不到变量的原因是变量被声明为静态。静态变量旨在由该庄园使用 ClassName.variableName 或 ClassName.PropertyName

# c - 写入堆内存时调用的系统调用

> ID：10958789
> 
> 赞同：1
> 
> 时间：2012-06-09T05:58:42.000
> 
> 标签：c, linux, memory-management, linux-kernel

我知道 malloc sbrk 是调用的系统调用，类似地，当我写入 malloed 内存（堆内存）时调用的系统调用是什么

```
int main

{

  /* 10 byte of heap memory allocated */
  char *ptr = malloc(5);

  ptr[0] = 10;  // **What is the system call invoked for 
                    writing into this heap memory** ?????

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T06:05:46.317

在这种情况下不涉及系统调用。让您的编译器生成程序集，以便您可以看到那里只有一些 MOV 指令。或者您可以使用调试器查看程序集

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T11:58:31.470

访问内存不需要系统调用。相反，访问内存是*大多数*代码大部分时间所做的事情！在现代操作系统上，您可以看到一个连续的虚拟内存范围，并且您通常只需要一个系统调用来将该内存的特定区域（“页面”）标记为有效；其他时候，连续增长的内存范围（例如调用堆栈）甚至不需要您的程序进行*任何*操作。*拦截对未映射到物理内存的内存的访问（通过页面错误*），执行一些内核魔术将所需的内存带入物理空间并将控制权返回给程序，这完全是操作系统内存管理器的工作。

偶尔需要执行系统调用的唯一原因`malloc`是因为它要求操作系统在中间某处随机获取一块虚拟内存。如果您的程序仅使用全局变量和局部变量（但没有动态分配）运行，则不需要任何系统调用来进行内存管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T06:33:59.560

“操作系统不会看到发生的每一次写入：对内存的写入仅对应于 STORE 汇编指令，而不是系统调用。它是负责 STORE 和必要的地址转换的硬件。操作系统唯一一次当页表中的地址转换失败时会看到内存写入，从而导致操作系统陷入陷阱。”

请阅读以下链接了解详情

[http://pages.cs.wisc.edu/~dusseau/Classes/CS537-F04/Questions/sol12.html](http://pages.cs.wisc.edu/~dusseau/Classes/CS537-F04/Questions/sol12.html)

# r - R中的R树和图形分区库

> ID：10958793
> 
> 赞同：4
> 
> 时间：2012-06-09T05:59:03.950
> 
> 标签：r, cluster-analysis, graph-theory, knn, r-tree

我需要进行有效的 d 维点搜索，还需要对 d 维中的点进行有效的 k-NN 查询。因此我需要一个 R-Tree 库。我需要一个库来构建 R-Tree 结构，我可以在需要时使用它来查询。

我还需要一些像[METIS](http://glaros.dtc.umn.edu/gkhome/metis/metis/overview)或[hMETIS](http://glaros.dtc.umn.edu/gkhome/metis/hmetis/overview)这样的库，尽管我的应用程序不涉及超图。我的要求是找到一个图的最小割集，它将图分成大致相等大小的两个图。

问题是我需要在 R 中支持这些的库。

我找到了一个库[RANN](http://cran.r-project.org/web/packages/RANN/index.html)，它具有基于 kd-tree 的 k-NN 查询，但问题是我必须一次进行所有 k-NN 查询并将结果存储在一个巨大的数组中，或者需要调用每次我需要时都使用函数（`nn`或），这会破坏 O(n lg n) 检索时间的增长。`nn2`

谁能告诉我R中是否有这样的库？

*注意：*我需要 R-Tree 库来有效地实现聚类算法，并且需要图形分区库来实现 CHAMELEON 聚类算法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:54:46.030

在对 R 及其库进行一些研究之后，我认为最好获得所需的库或用 C 或 C++ 编写我自己的代码，然后通过[.C()](http://cran.r-project.org/doc/manuals/R-exts.html#Interface-functions-_002eC-and-_002eFortran)或[.Call()](http://cran.r-project.org/doc/manuals/R-exts.html#Interface-functions-_002eCall-and-_002eExternal) R 到 C 语言接口使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-20T06:13:36.457

> 我还需要一些类似 METIS 或 hMETIS 的库，尽管我的应用程序不涉及超图。我的要求是找到一个图的最小割集，它将图分成大致相等大小的两个图。

尽管这是一个老问题，但我最近写了类似的东西。那是，

1.  类似 Kernighan-Lin 的算法。
2.  使用 Chlebíková (1996) 建议的方法找到近似连接的平衡分区的算法。
3.  一种算法，采用 2\. 中的方法找到的解决方案，并尝试使用类似 Kernighan-Lin 的算法来最小化降价，同时仍然要求分区中的两个集合是连接的。

从我正在使用的图表中，3\. 似乎经常为更大的图表找到一个非常好的解决方案（比如大约 1-4 百万条边和大约 100 万个顶点）。这需要几秒钟或几分钟。该实现位于[https://github.com/boennecd/pedmod](https://github.com/boennecd/pedmod)的 pedmod 包中。调用以下命令来安装软件包并找到包含更多详细信息的小插图：

```
remotes::install_github("boennecd/pedmod", build_vignettes = TRUE)
vignette("pedigree_partitioning", package = "pedmod") 
```

不过，我不确定我的实现在分区的速度和质量方面与其他软件相比如何。

## 参考

Chlebíková，扬卡。1996\. “在图中逼近最大平衡连通分区问题”。信息处理快报 60 (5): 225–30。

Kernighan、BW 和 S. Lin。1970.“划分图的有效启发式程序”。贝尔系统技术杂志 49 (2): 291–307

# java - 如何在同一 EAR/应用程序中动态获取另一个 Web 模块的上下文根

> ID：10958798
> 
> 赞同：0
> 
> 时间：2012-06-09T05:59:35.797
> 
> 标签：java, jakarta-ee, servlets, websphere

我的应用程序包含两个 Web 模块，如下所示：

```
<module>
    <web>
        <web-uri>myWeb1.war</web-uri>
        <context-root>/web1</context-root>
    </web>
</module>
<module>
    <web>
        <web-uri>myWeb2.war</web-uri>
        <context-root>/web2</context-root>
    </web>
</module> 
```

，我需要将“web1”模块的请求转发到“web2”，如下所示。

```
RequestDispatcher rd = getServletContext().getContext("/web2").getRequestDispatcher("/servlets/actReq");
        rd.forward(request, response); 
```

问题是，是否可以检索上下文根名称：“web2”，而不是在代码中对其进行编码。我不想硬编码上下文根的原因是因为这可能会在 EAR 包的部署过程中发生变化。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:27:04.410

我不知道有什么方法可以直接做到这一点。规范不鼓励这种直接的应用程序到应用程序，甚至 servlet 到 servlet 的通信。

您可以做的是向每个标记为 的应用程序添加一个简单的 servlet，该 servlet`load-on-startup`在其 init 方法中捕获上下文路径并将其存储在某处。您也许可以注入一个收集上下文路径的 EJB。像（非常粗略的草图！）：

```
@Singleton
public class ContextPaths extends HashMap<String, String> {}

public class RegisterContextPath extends HttpServlet {
    @EJB
    private ContextPaths contextPaths;

    public void init() {
        String contextPath = getServletContext().getContextPath();
        contextPaths.put("myWeb1", contextPath);
    }
} 
```

想要进行分派的 servlet 也可以被注入 EJB，并在其中进行查找。

请注意，您不能为此使用 CDI ，因为应用程序范围在（我认为）`@ApplicationScoped`期间不活动。`init()`

您可能可以使用某种生命周期侦听器来进行注册，而不是 servlet。

您也可能对地图键有点聪明 - 使用`getServletContextName()`然后依赖于`display-name`在 web.xml 中设置？使用初始化参数？理想情况下，您将拥有一个可以在所有 Web 应用程序中使用的类，只是配置不同。

# javascript - 验证数据 jQuery Handsontable 输入

> ID：10958805
> 
> 赞同：0
> 
> 时间：2012-06-09T06:00:54.983
> 
> 标签：javascript, jquery, jquery-plugins, handsontable

Q1：在发送到服务器之前验证用户在 jQuery Handsontable 中输入的数据的最佳方法是什么？

我已阅读这篇文章 [上传 jQuery Handsontable 输入](https://stackoverflow.com/questions/10831969/upload-jquery-handsontable-input)

有没有集成解决方案？等集成到 jquery 验证插件，如果没有，使用 onbeforechange() 方法怎么样？

Q2：另外，我已经启动了一个100行的表，但是如果我使用下面的代码，用户可能只会输入50行：

```
$('#btnGo').click(function() { 
  var rowList = $("#example9grid").handsontable("getData"); 
  $('#simple').val(JSON.stringify(rowList)); 
  console.log(rowList); 
});​ 
```

**rowList**将返回 50 个数据行和 50 个空行。

如何删除所有空行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:31:13.640

A1：感谢 Marcin 的回复，我已经通过使用以下代码解决了这个问题：

```
onBeforeChange: function (data) {
      for (var i = 0, ilen = data.length; i < ilen; i++) {
            if (data[i][0] > 0) { //if it is not first row
                if(data[i][1]==0){ //if it is the first column
                        //some validate logic here
            }else if(data[i][1]==1){//if it is the second column
                        //some validate logic here
                    }
            }
        }
      }; 
```

A2：我使用以下代码删除了空行：

```
rowList = $("#dataTable").handsontable("getData");
rowList = $.grep(rowList,function(array,index){
            ...write your logic here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:23:16.940

试图抓住问题。如果您只是想在使用“getData”之前删除空行并将其发送到服务器，那么...只需遍历 DOM 并删除所有空行。

```
$('#btnGo').click(function() { 
  $('rowSelector:empty').each(function(){
    $(this).remove(); 
  });
  var rowList = $("#example9grid").handsontable("getData"); 
  $('#simple').val(JSON.stringify(rowList)); 
  console.log(rowList); 
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T06:39:25.437

A1：在我看来，我会向数据服务器端发送`$.ajax`请求，然后在那里进行验证。

```
// your handsontable callback
    // i would use this callback
onChange : function(data){

    $.ajax({
        url : '/validate/',
        data : data,
        dataType : 'json',
        success : function(res){
            if(res.error){
                handleErrors(res.error);
            }else{
                successMsg(res);
            }
        }

    })

} 
```

这样，您就可以在服务器端建立一堵墙，以防有人尝试手动添加自己的数据，而您无需重写验证系统。

还有一件事要注意最好将json数据发回，例如在php中它是这样的。

```
<?php
// do validating here
    // store if everything is good
    // send back error if thing are not
header('Cache-Control: no-cache, must-revalidate');
header('Content-type: application/json');
echo json_encode($callbackobj);
?> 
```

这样，结果已经是 javascript 阅读的完美形式

A2：我会把它们留在那里，以便为新数据留出空间。如果您查看诸如 excel 或数字之类的程序，它们只会将表格留在那里。如果您以只读方式查看，我将使用您存储的数据重建数据。

# iphone - 变量超出范围

> ID：10958809
> 
> 赞同：2
> 
> 时间：2012-06-09T06:01:07.480
> 
> 标签：iphone, objective-c, ios, scope, avaudioplayer

我有一个子类，`AVAudioPlayer`在该子类中我有一个停止当前播放器的方法，并且（出于我不会解释的原因）`audioPlayerDidFinishPlaying`像这样手动调用：

```
// Handles stopping the player and calling audioPlayerDidFinishPlaying
- (void) stopPlayerForTimedRepeat {

    // Stop the player
    [self stop];

    // Manually call the audio player callback
    EditPlayListViewController *playlistController = [[EditPlayListViewController alloc] init];
    [playlistController audioPlayerDidFinishPlaying:self successfully:YES];
    [playlistController release];

} 
```

但是，当我`audioPlayerDidFinishPlaying`像这样手动调用时，我原来的所有变量`EditPlaylistViewController`都超出了范围。

如何避免这种情况，以便我仍然可以访问所有原始变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T06:38:18.563

我想出了一个更好的方法来做到这一点，而无需手动调用`audioPlayerDidFinishPlaying`，这样所有的变量仍然在范围内。

```
// Handles stopping the player and calling audioPlayerDidFinishPlaying
- (void) stopPlayerForTimedRepeat {

    // Fast forward the call to the end, which will also call audioPlayerDidFinishPlaying
    [self setCurrentTime:[self duration]];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:12:18.167

变量范围丢失，因为您 `EditPlayListViewController *playlistController = [[EditPlayListViewController alloc] init];`在停止方法后在方法中创建了一个新对象。

`.h`请在您的文件中声明播放器（像这样并在您的方法`EditPlayListViewController *playlistController;`中分配它（例如.`viewDidLoad``playlistController = [[EditPlayListViewController alloc] init];`

像这样改变你的方法，

```
- (void) stopPlayerForTimedRepeat
{
    // Stop the player
     [self stop];

    // Manually call the audio player callback
    [playlistController audioPlayerDidFinishPlaying:self successfully:YES];
    [playlistController release];

} 
```

希望它对你有用，如果没有，请告诉我。

# java - 如何在表格布局中更改/调整 EditText 的大小？

> ID：10958811
> 
> 赞同：4
> 
> 时间：2012-06-09T06:02:02.037
> 
> 标签：java, android, xml, android-edittext

我只想调整编辑文本的大小，使其与我的文本匹配。当我在第 3 列的表格布局中插入编辑文本时，它会填充第 3 列的整个空间并且看起来很大。我想改变尺寸。这怎么可能？下面是我的 .xml 编码：

```
<TableRow>
    <TextView
        android:layout_column="1"
        android:text="S"
        android:layout_width="150dp"
        />

    <TextView
        android:layout_column="2"
        android:text="C"
        android:layout_width="75dp" />

    <TextView
        android:layout_column="3"
        android:text="G"/>
</TableRow>

<View
    android:layout_height="2dip"
    android:background="#FF909090" />

<TableRow>
<TextView
    android:layout_column="1"
    android:id="@+id/s1"
    android:text="Medium Text"/>
<TextView
    android:layout_column="2"
    android:id="@+id/c1"
    android:text="Text"/>

<EditText
    android:id="@+id/g1"
    android:layout_column="3" />
</TableRow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:17:21.623

我理解你的问题......我尝试使用 wrap_content 等......但没有工作你必须手动设置 EditText 的高度......这是代码：

```
<?xml version="1.0" encoding="utf-8"?>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="3" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:text="TextView" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="15dp"
        android:layout_weight="1" />

</TableRow> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T18:28:37.557

试试这些，

```
1\. Set the "stretchColumn" property of table layout.

2\. Set the layout_width of the EditText to "wrap_content".

3\. If you want you can fix the size of the EditText by manually setting 
   the layout_width value in dp or dip. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T06:10:58.203

您不需要指定它自己选择的列号，如果您想编辑文本以适应空间，只需将其放置在那里，只需在表格布局中拉伸第 1 列和第 2 列

或者您可以将线性布局添加为表格行并分配权重

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T06:31:21.897

尝试

```
 <EditText 
        android:layout_width="fill_parent" 
        android:id="@+id/txthwdxml" 
        android:layout_height="wrap_content" /> 
```

# algorithm - 如何解决给定算法的递归？

> ID：10958813
> 
> 赞同：4
> 
> 时间：2012-06-09T06:02:30.757
> 
> 标签：algorithm, recursion

```
int gcd(n,m)
{
  if (n%m ==0) return m;
  n = n%m;
  return gcd(m,n);
} 
```

我解决了这个问题，我得到了

```
T(n, m) = 1 + T(m, n%m)  if n > m
        = 1 + T(m, n)    if n < m
        = m              if n%m == 0 
```

我很困惑如何进一步获得最终结果。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T06:52:47.687

这里的问题是 m 和 n 的下一个值的大小取决于之前的值，而不仅仅是它们的大小。Knuth 在“计算机编程的艺术”第 2 卷：半数值算法，第 4.5.3 节中对此进行了详细介绍。大约五页后，他证明了您可能已经猜到的内容，即最坏的情况是 m 和 n 是连续的斐波那契数。由此（或其他！）事实证明，在最坏的情况下，所需的除法次数在两个参数中较大的一个的对数中是线性的。

经过大量繁重的数学运算后，Knuth 证明了平均情况在参数的对数中也是线性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T10:36:14.133

mcdowella对此给出了完美的答案。

对于直观的解释，您可以这样想，

如果 n >= m，n mod m < n/2；

这可以表示为，

如果 m < n/2，则： n mod m < m < n/2

如果 m > n/2，则： n mod m = nm < n/2

因此，您有效地将较大的输入减半，并且在两次调用中，两个参数都将减半。

# c# - MailMessage.From 在 dotnet 中的使用

> ID：10958814
> 
> 赞同：0
> 
> 时间：2012-06-09T06:02:34.097
> 
> 标签：c#, .net, sendmail, smtpclient

```
 SmtpClient smtpClient = new SmtpClient("smtp.gmail.com");
                smtpClient.Credentials = new NetworkCredential("xxxxx@gmail.com", "password");
                smtpClient.Port = 587;
                smtpClient.EnableSsl = true;

                MailMessage mail = new MailMessage();
                //mail.From = new MailAddress("xxx1@gmail.com");
                mail.To.Add("XX2@gmail.com");
                mail.Subject = "Test mail";
                mail.Body = "This is test mail, with test content";
                smtpClient.Send(mail); 
```

在上面的代码中，为什么**mail.From**是强制性的？甚至我在 smtpClient.Credentials 中指定了邮件 ID。

即使我使用一些邮件 ID 指定了**mail.From**，收件人也不会从该邮件地址接收邮件，而是从我在**smtpClient.Credentials**中指定的**xxxxx@gmail.com**接收邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:26:03.493

From 应该是发送邮件的地址。这可能与您的 SMTP 凭据不同。有些服务器会允许您使用与您的邮件地址不同的用户名。

Gmail 会显示接收邮件的电子邮件地址。他们这样做是为了让用户不会错误地从没有真正发送邮件的人那里获取邮件。并非所有电子邮件客户端都这样做。

您不能将地址伪造为 gmail。他们将始终显示他们从哪里获得电子邮件。

# ruby-on-rails - 我该如何摆脱# 在调用 User.each 之后？

> ID：10958819
> 
> 赞同：1
> 
> 时间：2012-06-09T06:03:11.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

在 Rails 中遍历 User 模型并显示一些列后，在视图的末尾我得到：

```
 #<User:0x1095e07b8>#<User:0x1095dfed0>#<User:0x1095de080> 
```

关于如何摆脱这个的任何想法？还有什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T06:06:14.917

您可能正在将其用于您的循环：

```
<%= User.all.each do |user| %> 
```

等号将该函数的输出打印到页面。删除等号以省略输出：

```
<% User.all.each do |user| %> 
```

循环仍然会发生，但输出不会到达视图。

# google-places-api - 对于 Google Places API，如何添加支持的类型，例如“高尔夫球场”类型？

> ID：10958828
> 
> 赞同：0
> 
> 时间：2012-06-09T06:05:02.397
> 
> 标签：google-places-api

如何添加支持的类型，例如高尔夫球场类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T02:44:04.837

1.  浏览[支持的场所类型](https://developers.google.com/maps/documentation/places/supported_types)列表以确定您需要的支持类型是否存在。在这种情况下（“golf_course”），没有可以使用的现有类型。
2.  探索[Places API 问题列表](http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype%3aPlacesAPI%20type%3aEnhancement&sort=-stars&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Internal%20Stars)，了解是否有任何现有的增强请求将执行新 Places 类型的创建。
3.  在这种情况下，有。现有的[Issue 4197](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4197&q=golf&sort=-stars&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Internal%20Stars)请求新的“golf_course”支持类型。
4.  如果您愿意，可以对现有问题进行投票，以提高其在所有 Google Maps JavaScript API 增强功能列表中的优先级。

# python - 我的代数求解器哪里出错了？

> ID：10958829
> 
> 赞同：2
> 
> 时间：2012-06-09T06:05:29.553
> 
> 标签：python, linear-algebra

示例方程：`2x * 3x + 4x * 5x * 6x`

```
for k in equ:
        if k == '*':
            if equ[equ.index(k)-1] == 'x':
                extraEqu1.append('1x')
                del(equ[equ.index(k)-1])
            else:
                x = equ[equ.index(k)-1]
                if 'x' in x:
                    extraEqu1.append(equ[equ.index(k)-1]) #extraEqu1.append(x)
                    del(equ[equ.index(k)-1])              #del(x)
            if equ[equ.index(k)+1] == 'x':
                extraEqu1.append('1x')
                del(equ[equ.index(k)+1])
            else:
                x = equ[equ.index(k)+1]
                if 'x' in x:
                    extraEqu1.append(equ[equ.index(k)+1]) #extraEqu1.append(x)
                    del(equ[equ.index(k)+1])              #del(x)
            del(equ[equ.index(k)]) 
```

检查是否有任何 x 变量正在相乘，将它们取出并将它们放在不同的列表中。我一直在玩弄上述代码的变体，它总是要么忽略最后一项，要么包含运算符。我毫不怀疑这段代码有很多我没有看到（但应该）的错误，请指出。任何帮助表示赞赏。

对不起，我对输出不是很清楚。我希望 equ 丢失任何被相乘的 x 变量（例如：2x * 3x 都被删除），但留下任何没有被相乘的变量（例如：如果 4x 在它的两边都有一个 + ）。我希望 extraEqu1 拥有 equ 会丢失的所有 x 变量。

输入是示例方程，或类似的东西

我使用了 Jeff 的评论并更改了两个 else 语句中的 extraEqu1.append 和 del() （但不是底部的 del() ）以采用 x 变量而不是它的值，现在它可以完美运行。有什么理由吗？注释代码显示了我所做的更改

*注意：请不要说“使用 SymPy”或其中任何一个，我正在构建自己的版本作为项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:05:52.183

问题是你在一个列表上循环并且你在循环的中间改变了那个列表，所以循环最终会跳过一些元素，因为它们占据了一个已经通过的位置。看这个例子：

```
>>> l = ['a','b','c','d']
>>> for e in l:
...    print e,
...    del(l[l.index(e)])
... 
a c 
```

一个可能的解决方案是循环列表的副本：

```
for k in equ[:]: 
```

另请注意， `del(x)`在您的代码中不会做任何事情，例如：

```
>>> l = ['a', 'b', 'c', 'd']
>>> a = l[0]
>>> del(a)
>>> l
['a', 'b', 'c', 'd']
>>> a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined
>>> 
```

`del`只是删除一个变量，而不是该变量指向的对象（除非没有其他对该对象的引用，否则该对象也将被删除）

还要确保阅读 Corey Ogburn 评论中的内容。

编辑：编辑了我之前的答案，因为我对代码有错误的假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T06:31:01.933

我不清楚您的任务，但是如果您需要更好地反汇编数学表达式以使用正则表达式[python re](http://docs.python.org/library/re.html) 这是查找所有 x 的示例

```
import re

txt='2x * 3x + 4x * 5x * 6x'

re1='(\\d+)'    # Integer Number 1
re2='(x)'   # Any Single Character 1

rg = re.compile(re1+re2,re.IGNORECASE|re.DOTALL)
m = rg.search(txt)
if m:
    int1=m.group(1)
    c1=m.group(2)
print "("+int1+")"+"("+c1+")"+"\n" 
```

如果你不熟悉正则表达式，你可以尝试像[txt2re.com这样的正则表达式生成器](http://txt2re.com)

# java - 通过 java 在 Linux 上执行 aapt

> ID：10958832
> 
> 赞同：0
> 
> 时间：2012-06-09T06:05:49.553
> 
> 标签：java, android, linux, runtime.exec, aapt

我正在寻找一种在 Linux 中使用 Runtime.exec() 的方法。我有一个 aapt Linux 版本并尝试使用 aapt 获取 apk 文件的信息。我试过：

```
rt.exec(new String[] {"bash", "-c","." + new File(".").getCanonicalPath() + "dist/lib/aapt d badging \"" + files + "\""}); 
```

但这似乎是错误的。它不返回结果。终端中的正常命令有效：

```
$ ./home/codeblue/NetbeansProjects/APKTools/dist/lib/aapt d badging "Zing Mp3.apk" 
```

任何人请帮忙:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T16:43:12.503

哦，我发现使用绝对路径不起作用。使用“-c”我使用

```
Runtime.getRuntime().exec(new String[] { "/bin/bash", "-c", " ./lib/aapt d badging ZingMp3.apk"}); 
```

这工作正常。谢谢你帮助我。

# python - 补丁中的matplotlib颜色渐变？

> ID：10958835
> 
> 赞同：12
> 
> 时间：2012-06-09T06:05:55.687
> 
> 标签：python, matplotlib

我想在 matplotlib 中创建椭圆，其填充颜色具有取决于半径的 alpha（不透明度）值；

例如，二维高斯。

> 有没有办法做到这一点？

可以很容易地创建具有颜色渐变的矩形图（例如[Gradient facecolor matplotlib bar plot](https://stackoverflow.com/questions/5296335/gradient-facecolor-matplotlib-bar-plot)和[this](http://matplotlib.sourceforge.net/examples/pylab_examples/gradient_bar.html)），但我不知道如何对圆形/椭圆做同样的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T11:11:40.580

这是使用 Alex 帖子中的想法的函数示例

```
import matplotlib.pyplot as plt,numpy as np

def gauplot(centers, radiuses, xr=None, yr=None):
        nx, ny = 1000.,1000.
        xgrid, ygrid = np.mgrid[xr[0]:xr[1]:(xr[1]-xr[0])/nx,yr[0]:yr[1]:(yr[1]-yr[0])/ny]
        im = xgrid*0 + np.nan
        xs = np.array([np.nan])
        ys = np.array([np.nan])
        fis = np.concatenate((np.linspace(-np.pi,np.pi,100), [np.nan]) )
        cmap = plt.cm.gray
        cmap.set_bad('white')
        thresh = 3
        for curcen,currad in zip(centers,radiuses):
                curim=(((xgrid-curcen[0])**2+(ygrid-curcen[1])**2)**.5)/currad*thresh
                im[curim<thresh]=np.exp(-.5*curim**2)[curim<thresh]
                xs = np.append(xs, curcen[0] + currad * np.cos(fis))
                ys = np.append(ys, curcen[1] + currad * np.sin(fis))
        plt.imshow(im.T, cmap=cmap, extent=xr+yr)
        plt.plot(xs, ys, 'r-') 
```

这是你跑步时得到的

```
 gauplot([(0,0), (2,3), (5,1), (6, 7), (6.1, 6.1)], [.3,. 4, .5, 1, .4], [-1,10], [-1,10])
             #           centers of circles           # radii of circles# 
```

![阴谋](../Images/1aa4524f6a4916293ff53591c830699f.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T07:36:19.563

我认为`matplotlib`目前不支持补丁的渐变填充 - 请参阅[此电子邮件](http://osdir.com/ml/python.matplotlib.general/2005-03/msg00110.html)。

> john> 你好，我正在尝试使用填充图案而不是纯色设置一个条形图（一系列修补的矩形）。在 matplotlib 中是否有一种简单的方法可以做到这一点？
> john> 我在想像 Qt 的 QBrush 之类的东西，它有交叉、垂直、密集等模式。
> 
> 目前没有对此的支持——添加支持这种东西的后端不会太难。基本上，我们需要为其指定 API，并为后端添加支持。我一直想为补丁（例如多边形、矩形）添加渐变填充，最好同时做这两个。

* * *

您可以创建网格，而不是使用补丁，使用函数计算颜色，然后使用`imshow`插值：

```
# Taken from http://matplotlib.sourceforge.net/examples/pylab_examples/layer_images.html

def func3(x,y):
    return (1- x/2 + x**5 + y**3)*exp(-x**2-y**2)

# make these smaller to increase the resolution
dx, dy = 0.05, 0.05

x = arange(-3.0, 3.0, dx)
y = arange(-3.0, 3.0, dy)
X,Y = meshgrid(x, y)

xmin, xmax, ymin, ymax = amin(x), amax(x), amin(y), amax(y)
extent = xmin, xmax, ymin, ymax

fig = plt.figure(frameon=False)

Z2 = func3(X, Y)

im2 = imshow(Z2, cmap=cm.jet, alpha=.9, interpolation='bilinear', extent=extent)

show() 
```

这将导致以下结果（忽略方格背景）：

![http://matplotlib.sourceforge.net/_images/layer_images.png](../Images/aab711be49a11abfa228f9b1d036b202.png)

# vb.net - 在动态创建的子菜单项上添加点击事件

> ID：10958841
> 
> 赞同：2
> 
> 时间：2012-06-09T06:08:10.150
> 
> 标签：vb.net

如何将点击事件添加到动态创建的菜单项？

我以为我可以做类似的事情

遍历 Menu1.DropDownItems 中的所有项目，然后甚至在项目上创建 mousedown 并基于此执行操作。

我是 VB 新手，想知道使用什么逻辑。这甚至会起作用吗？在应用程序的整个生命周期中如何保存事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:59:36.963

您必须有一个适合事件签名的方法。然后，在创建 MenuItem 时，您可以向事件添加处理程序：

```
Dim item As New MenuItem(...)
'...
AddHandler item.Click, AddressOf myEventHandler

Sub myEventHandler(sender As Object, e As System.EventArgs)
    'Do something
End Sub 
```

您无法在您无权访问的课程中创建活动。唯一的选择是从中派生，但这仅在某些情况下有效。在 MenuItem 的情况下，这甚至不是必需的，因为它已经提供了一个 Click 事件。您只需为其添加一个处理程序。处理程序保存在项目的事件中，该事件维护一种处理程序列表。

# ruby-on-rails - Or & and 在 Rails ActiveRecord where 子句中

> ID：10958844
> 
> 赞同：16
> 
> 时间：2012-06-09T06:08:25.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在使用 Rails 3.2，并且我有一个数据库表，我想在其中找到所有符合以下条件的行：

a = true and b = true and ( 0< c <1 or d=1), a, b, c, d 是列。

我可以有类似的东西：

```
 Route.where(:a => true,
             :b => true,
             :c => 0..1 OR :d=1
             ).all 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-09T06:16:14.050

I may be wrong, but I don't think you could form that query using the Arel-based where function; you'd need to form up the database query string yourself.

Assuming you're using SQLite or Postgres:

```
Route.where("a = true and b = true and ((c > 0 and c < 1) or d = 1)").all 
```

I haven't tested this code, but I suspect that might do the job for you. Note this is less 'portable' code; if you change the database you're using the query may break.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-09-04T19:33:01.933

在 Rails 4 你也可以做

`Route.where(:a => true,:b => true,:c => [1,2]).all`

这将找到 c 为 1 或 2 的位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T21:53:50.207

我认为 Rob 关于 arel 不支持 OR 的说法是正确的。从[arel 网站](https://github.com/nkallen/arel)：

尚不支持 OR 运算符。它将像这样工作：

```
users.where(users[:name].eq('bob').or(users[:age].lt(25))) 
```

AND 运算符的行为类似。

# cmake - sqlite3 数据库的 config_file 工作错误

> ID：10958846
> 
> 赞同：0
> 
> 时间：2012-06-09T06:08:43.823
> 
> 标签：cmake

这是我在做什么：

```
#configure_file(${CMAKE_CURRENT_SOURCE_DIR}/xdb.db3 ${complex_BINARY_DIR}/) <-- works wrong
configure_file(${CMAKE_CURRENT_SOURCE_DIR}/armd.conf ${complex_BINARY_DIR}/) 
```

两个文件都正确移动到那里，但是当我尝试使用移动的 xdb.db3 时，我的程序和 sqlite 编辑器说`"xdb.db3 is not sqlite database or encrypted"`

我必须如何移动 sqlite 数据库以及为什么我不能使用 configure_file 来移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T08:57:04.553

尝试将`COPYONLY`标志添加到[configure_file](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3aconfigure_file)。

```
configure_file(${CMAKE_CURRENT_SOURCE_DIR}/xdb.db3 ${complex_BINARY_DIR} COPYONLY) 
```

# apache - 我的网站上安装了 SSL 证书。但浏览器仍然显示不安全的连接

> ID：10958849
> 
> 赞同：-2
> 
> 时间：2012-06-09T06:09:14.837
> 
> 标签：apache, ssl

我已经在我的网站上安装了 ssl 证书，但浏览器仍然显示不安全的连接。但是，我可以在站点 url 之前使用 https:// 访问安全连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:30:58.637

如果要*强制*使用https，则需要进行设置。

正如[apache wiki](http://wiki.apache.org/httpd/RedirectSSL)上所解释的，推荐的方法是设置 http 虚拟主机以重定向到 https 虚拟主机。或者，您可以使用 mod_rewrite 从 http 重定向到 https。

# python - python lx模块创建文件

> ID：10958851
> 
> 赞同：0
> 
> 时间：2012-06-09T06:09:26.863
> 
> 标签：python, scripting

我正在**python中处理****MODO**脚本。我创建了我的脚本，如下所示：

 **```
#python

import lx
import sys

layers = lx.evalN("query layerservice layers ? all")
oFile   = open('myfile.txt','w')

for layer in layers:

     lx.out('Hello World!')

     layerName = lx.eval1("query layerservice layer.name ? %s"%layer)
     lx.out("Layer Name : %s" %layerName)

     and so on..... 
```

当我在**MODO**中运行此脚本时，一切正常。我想同时创建一个文本文件并对其执行写操作。但是代码

```
oFile   = open('myfile.txt','w') 
```

不要创建文本文件。所以我无法继续。我如何创建我的文件并对其执行写操作。？？？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:26:04.417

听起来您正在意外的位置创建文件。

您可以将完整路径传递给`open`调用，也可以`os.chdir(...)`用于更改打开文件的目录。**

# java - 更新表错误

> ID：10958852
> 
> 赞同：0
> 
> 时间：2012-06-09T06:10:19.497
> 
> 标签：java, android, sql, sqlite

当我尝试更新表时，应用程序崩溃并返回此致命错误：

```
06-09 08:02:34.026: I/Database(342): sqlite returned: error code = 1, msg = no such column: username
06-09 08:02:34.034: E/Database(342): Error updating valore=1234 using UPDATE parametri SET valore=? WHERE _parametro=username
06-09 08:02:34.034: D/AndroidRuntime(342): Shutting down VM
06-09 08:02:34.034: W/dalvikvm(342): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-09 08:02:34.054: E/AndroidRuntime(342): FATAL EXCEPTION: main
06-09 08:02:34.054: E/AndroidRuntime(342): android.database.sqlite.SQLiteException: no such column: username: , while compiling: UPDATE parametri SET valore=? WHERE _parametro=username 
```

插入/更新的功能是这样的：

```
 String strFilter = ParametriMetaData.PARAMETRO+"=" + parametro;
    ContentValues args = new ContentValues();
    args.put(ParametriMetaData.VALORE, valore);

    System.out.println( strFilter );

    mDb.update(ParametriMetaData.TAB_PARAMETRI, args, strFilter, null); 
```

这是表的定义：

```
private static final String CREA_TAB_PARAMETRI = "CREATE TABLE IF NOT EXISTS "  //codice sql di creazione della tabella
                    + ParametriMetaData.TAB_PARAMETRI + " ("
                    + ParametriMetaData.PARAMETRO+ " text primary key, "
                    + ParametriMetaData.VALORE + " text not null);"; 
```

这是怎么回事？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T06:46:49.040

我会去 sqlite3（通过 adb shell）并验证有问题的表有一个名为“用户名”的列。您可以看到带有 的 SQL CREATE 语句`schema ?TABLE?`。我想你会存在表结构的问题。

`sqlite3`您可以通过在终端（unix）或命令提示符（windows）中执行来访问该命令`adb shell`，然后`sqlite3`. [sqlite3 的文档可以在这里找到。](http://www.sqlite.org/sqlite.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:14:16.003

Update query must have proper where clause `update(tablename, value, referenceField+"=?", value);`

```
String strFilter = ParametriMetaData.PARAMETRO+"=?";
    ContentValues args = new ContentValues();
    args.put(ParametriMetaData.VALORE, valore);

    System.out.println( strFilter );

    mDb.update(ParametriMetaData.TAB_PARAMETRI, args, strFilter, parametro); 
```

# php - 在php中读取带有用户IP地址的网页

> ID：10958853
> 
> 赞同：-1
> 
> 时间：2012-06-09T06:10:25.390
> 
> 标签：php, javascript, iframe

我想制作一个脚本来处理网页并将该页面上的一些变量返回给用户！但我想用用户的 ip 打开那个页面，因为该页面返回每个 ip 地址的特殊信息，所以我不能使用 curl 等
。换句话说，我想看到一个有他的 ip 的用户会看到的页面！
我认为可以使用 iframe 打开该页面并使用一些 Javascript 将该 html 页面上传到服务器。
任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T06:44:09.647

听起来您想欺骗 IP 地址。这通常是不可能的，因为 IP 地址是通过三次 TCP 握手来验证的，并且响应将被发送到经过验证的 IP。要欺骗 IP 地址，您至少需要一个提升的网络位置，而这通常是您没有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T15:08:45.923

如果幸运的话，您可以通过注入[的 X-Forwarded-For标头伪造 IP。](http://en.wikipedia.org/wiki/X-Forwarded-For)可能其他脚本就是愚蠢地落在这个上（就像大多数脚本一样）。

请查阅您使用的 HTTP 层（PHP、curl 等）的文档，了解如何指定请求标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T06:16:52.537

使用 php 服务器变量`$_SERVER['REMOTE_ADDR']`获取用户 IP 地址。

您可以使用它来完成所需的其余处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T06:20:13.257

当您使用`$_SERVER['REMOTE_ADDR']`它时，它会返回访问者的 IP 地址。

如果你想做一些基于 IP 地址的聊天，你可以将 IP 地址保存在 MySQL 表中，并在此基础上显示消息。:)

例如，我猜这段代码可以满足您的需求：

```
<?php echo "Hi User! Please open your IP Address @ {$_SERVER['REMOTE_ADDR']}"; ?> 
```

这对我来说显示为：

```
Hi User! Please open your IP Address @ 122.164.125.224 
```

对你来说：

```
Hi User! Please open your IP Address @ 127.0.0.1 
```

这是你正在尝试的吗？

在您的情况下，为了让用户看到这种方式，有一个 IP 地址列表，并基于该过程输出：

```
<?php
    $specialips = array('127.0.0.1', '122.164.122.164', '10.0.0.52');
    if(in_array($_SERVER['REMOTE_ADDR'], $specialips))
        echo 'Welcome Special User!';
    else
        echo 'Hello Normal User!';
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T06:22:00.523

PHP 是一种服务器端语言。您使用它发出的任何请求都将来自服务器的 IP。您可以使用 Javascript 之类的东西，并将结果传递给 PHP，但 PHP 本身不能直接发出请求。

# android - 禁用线性布局

> ID：10958854
> 
> 赞同：-1
> 
> 时间：2012-06-09T06:10:27.037
> 
> 标签：android, android-layout

在我的应用程序中，我动态生成两个线性布局并将它们添加到 ScrollView。

每个 LinearLayout 都有一个 Button 和一个 Edit Text，我希望当单击第二个 LinearLayout 的 Button 时，第一个 LinearLayout 会被禁用。

代码：

```
package com.integrated.mpr;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TextView;

public class Page1 extends Activity implements OnClickListener{

    int i;
    int[][] id = new int[pos][3];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        int p =0;
        Log.d("value of ", ""+pos);
        for(int i =0;i<2;i++){
            for(int j =0;j<3;j++){
                id[i][j] = p;
                p++;
            }
        }

        //In each row 1st column is the id for button
        //2nd column id for edittext
        //3rd column id for Linearlayout

        ScrollView sv = new ScrollView(this);

        LinearLayout ll = new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);

        for(i=0;i<2;i++){

            LinearLayout llay = new LinearLayout(this);
            llay.setOrientation(LinearLayout.VERTICAL);
            llay.setId(id[i][2]);

            EditText et = new EditText(this);
            et.setId(id[i][1]);

            Button stop = new Button(this);
            stop.setText("Submit");
            stop.setId(id[i][0]);
            stop.setOnClickListener(this);

            llay.addView(et);
            llay.addView(stop);
            ll.addView(llay);

        }

        sv.addView(ll);
        this.setContentView(sv);

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        if(v.getId()==id[1][0]){
            //when te second Button is clicked
            // now here disable the 1st linear layout
            //Can't think how to do it
        }

        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T06:17:33.147

将您的 Layouts 的引用保留为类成员，并在`OnClick`方法中设置您要禁用的布局的布局`visibility`。`View.GONE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:18:13.323

获取您的 LinearLayout 并将其设置为 View.GONE

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    if(v.getId()==id[1][0]){
        LinearLayout ll = (LinearLayout) findViewById(id);
        ll.setVisibility(View.GONE);
    }

    } 
```

# .htaccess - .HTACCESS Rewriting Issue

> ID：10958861
> 
> 赞同：1
> 
> 时间：2012-06-09T06:11:17.527
> 
> 标签：.htaccess, url-rewriting

Can any check given code of .htaccess file and let me know what's wrong with it and why it's not working?

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^itinerary/([a-zA-Z0-9_-]+)/([0-9]+)\$ itinerary-details.php?tId=$2 
```

I want to rewrite url as below:

> www.domain.com/itinerary-details.php?tId=2&tName=agra-delhi-tour

to

> www.domain.com/itinerary/2/agra-delhi-tour

* * *

and

> www.domain.com/itinerary-details.php?page=1&tId=2&tName=agra-delhi-tour

to

> www.domain.com/itinerary/2/agra-delhi-tour/1

Please help me in doing this.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T06:57:57.840

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^itinerary/([^/]+)/([^/]+)/?$ /itinerary-details.php?tId=$1&tName=$2 [L,QSA,NC]

RewriteRule ^itinerary/([^/]+)/([^/]+)/([^/]+)/?$ /itinerary-details.php?page=$3&tId=$1&tName=$2 [L,QSA,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:19:36.560

似乎您的正则表达式中的两个部分颠倒了。这应该适用于您的两种情况：

```
^itinerary/([0-9]+)/([a-zA-Z0-9_-]+)/?(.*) itinerary-details.php?tId=$1&tName=$2&page=$3 
```

我也刚刚注意到您正在逃避，`$`这也会导致问题。

# javascript - jquery - 获取尚未应用的类的 CSS 属性值

> ID：10958869
> 
> 赞同：11
> 
> 时间：2012-06-09T06:13:55.790
> 
> 标签：javascript, jquery, css, html, width

我在这里问了同样的[问题](https://stackoverflow.com/questions/9382858/get-css-properties-values-for-a-not-yet-applied-class#_=_)（无法对此发表评论，也许没有特权），我想获取样式表中定义的 CSS 宽度值，但尚未应用于 dom 中的任何元素，（它的引导 css 带有响应式网格媒体查询）

```
 .span6 {
 width: 570px;
 } 
```

然而，上面引用的问题中提供的解决方案返回 0，即像这样

```
$('<div/>').addClass('span6').width(); 
```

但是如果我做这样的事情就可以了

```
 $('<div/>').addClass('span6').hide().appendTo('body').width(); 
```

没有附加该div的任何简单方法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-09T06:36:40.740

为了从不存在的元素中读取 CSS 属性值，您需要将该元素（作为隐藏元素）动态插入 DOM，读取该属性并最终将其删除：

```
var getCSS = function (prop, fromClass) {

    var $inspector = $("<div>").css('display', 'none').addClass(fromClass);
    $("body").append($inspector); // add to DOM, in order to read the CSS property
    try {
        return $inspector.css(prop);
    } finally {
        $inspector.remove(); // and remove from DOM
    }
}; 
```

**[jsFiddle在这里](http://jsfiddle.net/ruisoftware/65bHm/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-17T21:37:05.293

何塞的回答很好。我对其进行了修改以帮助处理更复杂的 CSS 选择器。

```
var getCSS2 = function (prop, fromClass, $sibling) {

    var $inspector = $("<div>").css('display', 'none').addClass(fromClass);
    if($sibling != null){
        $sibling.after($inspector); //append after sibling in order to have exact 
    } else {
        $("body").append($inspector); // add to DOM, in order to read the CSS property
    }
    try {
        return $inspector.css(prop);
    } finally {
        $inspector.remove(); // and remove from DOM
    }
}; 
```

**[JSFiddle](http://jsfiddle.net/P2KX4/2/)**

# linux - 穆宁内存图缺失

> ID：10958870
> 
> 赞同：0
> 
> 时间：2012-06-09T06:13:57.887
> 
> 标签：linux, ubuntu, monitoring, munin

我刚刚在 Ubuntu 12.04 上安装了 Munin。我之前在另一台运行 10.04 的机器上使用过它，它有一个漂亮的内存图。由于某种原因，它没有出现在我的新安装中。任何想法在哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:18:01.560

好的，想通了。/usr/share/munin/plugins 中有大量的插件列表。我刚跑：

```
ln -s /usr/share/munin/plugins/memory memory
sudo restart munin-node 
```

马上就出现了。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-06-09T06:24:45.327

我不确定我是否理解您，但是您是在谈论可用内存还是总内存？

可用内存：`free -m`- 以兆字节显示统计信息。-g 表示千兆字节，-k 表示千字节，无或 -b 表示字节。

总内存：只需`Details`在仪表板上查找。

如果我没有按您的要求回复，请再次解释。:)

# python - "exists" keyword in Python?

> ID：10958874
> 
> 赞同：8
> 
> 时间：2012-06-09T06:14:31.790
> 
> 标签：python

I've recently made the following example for Pythons for ... else:

```
def isPrime(element):
    """ just a helper function! don't get religious about it! """
    if element == 2:
        return True
    elif element <= 1 or element % 2 == 0:
        return False
    else:
        for i in xrange(3, element, 2):
            print i
            if element % i == 0:
                return False
    return True

myList = [4, 4, 9, 12]

for element in myList:
    if isPrime(element):
        break
else:
    print("The list did not contain a prime.") 
```

A fellow student told me, that this task can be done with Scala like this:

```
List(4, 4, 9, 12) exists isPrime 
```

Which gets lazy evaluated.

Does something similar like the exists-keyword exist in Python? Or is there a PEP for that?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-09T06:17:46.810

```
myList = [4, 4, 9, 12]

if not any(isPrime(x) for x in myList):
    print("The list did not contain a prime") 
```

Python 也有`all()`which 曲柄通过任何序列并`True`在所有元素评估为 true 时返回。

`any()`并且`all()`两者都有短路评估：如果`any()`找到任何评估为真的元素，它就会停止并返回`True`；如果`all()`找到任何评估为 false 的元素，它会停止并返回`False`。

两者都很“懒惰”，因为它们使用 Python 迭代一次提取一个值。例如：

```
import random
def rand_sequence(n_max):
    while True:
        next_random = random.randint(0, n_max)
        print(next_random)
        yield next_random

all(isPrime(x) for x in rand_sequence(20)) 
```

这将迭代直到找到一个非素数，然后返回`False`。它将数字打印为副作用，因此您可以观看它的工作。我刚试过这个并得到：

```
17
3
0 
```

PS 我参加了一个 Python 会议的演讲，演讲者提到他通常使用`any()`作为一种非常有效的方式来做一个循环。循环为每个`for`循环重新绑定循环变量，但`any()`不这样做；它只是不断检查值。因此，如果您使用`any()`始终返回`None`或 false 值的函数，它将一直迭代到序列的末尾，根据那个家伙的说法，这是 Python 中最快的方法。（如果你的函数返回的值不是假的，也不`None`是假的，你可以使用`all()`同样的技巧。它唯一不起作用的情况是，有时函数返回一个真值，有时它返回一个假值。但是您可以强制它始终工作：

```
any(my_function(x) and False for x in sequence) 
```

PPS 让我们用`all()`重写`isPrime()`！我将更改名称以`is_prime()`符合 PEP 8。 [http://www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)

```
def is_prime(element):
    """ just a helper function! don't get religious about it! """
    if element == 2:
        return True
    elif element <= 1 or element % 2 == 0:
        return False
    else:
        return all(element % i for i in xrange(3, element, 2)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T06:19:23.677

```
[x for x in myList if isPrime(x)] 
```

# google-app-engine - Redirecting domain (not google apps) to appengine without Host records

> ID：10958876
> 
> 赞同：0
> 
> 时间：2012-06-09T06:15:10.290
> 
> 标签：google-app-engine, dns, google-apps, cname

I would like to redirect a domain to app engine, but my Domain provider only allows me to set information for Primary DNS and Secondary DNS. It means that there is no possibilities to set host records (cname, A, etc)

I think I do have to use a DNS Provider, but I'd like to know your opinion on what's the best way and where to do it.

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:06:19.470

我对 dns.he.net 很满意。它对 50 个域完全免费，并为您提供所需的控制。

# java - 如何清除 SpringSource Tool Suite 缓存？

> ID：10958877
> 
> 赞同：3
> 
> 时间：2012-06-09T06:15:20.370
> 
> 标签：java, eclipse, caching, maven, project

我已经安装了[SpringSource Tool Suite](http://www.springsource.com/developer/sts) (STS) 第 3 版。我创建了两个 Maven 项目：一个控制台应用程序和一个 Web Maven 应用程序。我试图`Main.java`在 Eclipse 中打开，但没有成功。我尝试重新启动 STS，但收到此错误：

```
!SESSION 2012-06-09 09:13:29.626 -----------------------------------------------
eclipse.buildId=3.0.0.201205010613-M1-e42
java.version=1.7.0_04
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product com.springsource.sts.ide
Command-line arguments:  -os win32 -ws win32 -arch x86 -product com.springsource.sts.ide

!ENTRY org.eclipse.osgi 4 0 2012-06-09 09:13:30.552
!MESSAGE FrameworkEvent ERROR
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.osgi.framework.internal.core.SystemBundleActivator.start() of bundle org.eclipse.osgi.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.resume(InternalSystemBundle.java:225)
    at org.eclipse.osgi.framework.internal.core.Framework.launch(Framework.java:657)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:274)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
Caused by: java.lang.IllegalStateException: Expected to find an object at table index: 1008 
```

我想我需要清除一些缓存。那是对的吗？它在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T08:54:19.583

`-clean`也许您可以使用选项启动 Eclipse 来解决它

[如何在干净模式下运行eclipse？如果我们这样做会发生什么？](https://stackoverflow.com/questions/2030064/how-to-run-eclipse-in-clean-mode-and-what-happens-if-we-do-so)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T07:01:21.010

编辑文件“ECLIPSE_HOME\configuration\config.ini”更改

```
osgi.bundles=reference\:file\:org.eclipse.osgi_3.6.2.R36x_v20110210.jar@4,reference\:file\:org.eclipse.equinox.simpleconfigurator_1.0.200.v20100503.jar@1\:start 
```

到

```
osgi.bundles=reference\:file\:org.eclipse.equinox.simpleconfigurator_1.0.200.v20100503.jar@1\:start 
```

更多细节可以在[这里](http://atealxt.appspot.com/article/20110309/eclipse_cannot_startup_when_update_to_helios_SR2.html)找到..

# c# - c# winforms DataGridViewRow.Index 和 Count

> ID：10958879
> 
> 赞同：0
> 
> 时间：2012-06-09T06:16:11.617
> 
> 标签：c#, winforms, datagridview

这段代码有什么问题

```
for (int i = 1; i < dgv.Rows.Count;)  
{
    MessageBox.Show(dgv.Rows[i].Index.ToString());
} 
```

我得到无穷无尽的 MsgBoxes 显示，只有值“1”
dgv 有六行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T06:18:11.107

你忘了放 i++

还有 i = 0; 如果 i = 1 你会错过 gridview 的第一行

```
for (int i = 0; i < dgv.Rows.Count;i++)  
{
    MessageBox.Show(dgv.Rows[i].Index.ToString());
} 
```

# excel - how to elimate commas from csv file connection manager while importing

> ID：10958882
> 
> 赞同：0
> 
> 时间：2012-06-09T06:16:19.633
> 
> 标签：excel, csv, ssis

Am loading flat file into my table, my flat file columns are comma delimiter. Last column in my flat file connection manager is been appended with commas(,,,,) automatically, i want to remove those commas from my last column. Attaching the smapshot of my last column.
![enter image description here](../Images/6a5c2826cbbf6cf70299ada50479f68a.png)

# android - 检查电子邮件意图在实际设备上也会返回 false

> ID：10958889
> 
> 赞同：0
> 
> 时间：2012-06-09T06:18:12.833
> 
> 标签：android, email, android-intent

我有以下代码来检查支持的意图。当我检查电子邮件支持时，代码在模拟器上的行为与预期一致。当我在我的实际设备 HTC Wildfire 和三星 Galaxy Nexus 上运行相同的程序时，**isEmailSupported**方法返回 false。

```
public static boolean isEmailSupported(Context context) {
    Intent emailIntent = new Intent(Intent.ACTION_SEND);
    emailIntent.putExtra(Intent.EXTRA_EMAIL, "example@example.com");
    emailIntent.putExtra(Intent.EXTRA_TEXT, "Lorem ipsum...");
    return isIntentSupported(context, emailIntent);
}

public static boolean isIntentSupported(Context context, Intent intent) {
    PackageManager packageManager = context.getPackageManager();
    List<ResolveInfo> intentActivities = packageManager.queryIntentActivities(
            intent, PackageManager.MATCH_DEFAULT_ONLY);
    return intentActivities != null && intentActivities.size() > 0;
} 
```

任何指针将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:16:57.933

尝试添加您忘记包含在`ACTION_SEND` `Intent`. 您必须`setType()`使用您要放入的内容的 MIME 类型进行调用`EXTRA_TEXT`（在这种情况下，显然是`text/plain`）。

# ipad - 在 UITableView 中添加一行直到最后

> ID：10958891
> 
> 赞同：0
> 
> 时间：2012-06-09T06:18:19.263
> 
> 标签：ipad, uitableview

嗨，我想在我的 UITableView 中添加一行，就像提醒应用程序红线一样。我尝试将它添加到我的自定义单元格中，但它只显示在使用的单元格中，而不是所有单元格中。我想要一个像下面这样的红色图像

![在此处输入图像描述](../Images/c0e3fdee2439963b67aabe974771e32d.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:53:22.703

您可以使用具有红色条纹大小的 UIView 并将其放置在您希望红线出现的 UITableView 上。将其 backgroundColor 设置为红线的颜色，并确保将`userInteractionEnabled`其设置`NO`为避免干扰 UITableView 的 scolling。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:00:13.017

尝试在 tableView 上添加 UIView 并使用图案图像设置它的背景颜色，然后在 tableview 上添加这样的视图。如下所示。

```
 lineView = [[UIView alloc] initWithFrame:CGRectMake(100, 0, 1,
 tblView.frame.size.height)];
 [lineView setBackgroundColor:[UIColor blackColor]]; //Change as per your req.
 lineView.userInteractionEnabled = NO;
 [tblView addSubview:lineView]; 
```

但是当你向上滚动然后在垂直反弹时你会遇到这个问题，你必须管理这个 UIView 的高度。所以你可以通过 ScrollViewDidScroll Delegate 方法来实现，这个方法调用是因为 UITableView 是从 UIScrollView 扩展而来的。

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView 
{
    lineView.frame = CGRectMake(100, 0, 1,    tblView.frame.size.height+scrollView.contentOffset.y); 
} 
```

# ruby-on-rails-3 - 服务器关闭时未释放端口

> ID：10958900
> 
> 赞同：0
> 
> 时间：2012-06-09T06:20:29.557
> 
> 标签：ruby-on-rails-3, macos, unicorn

每当我关闭我的开发服务器（独角兽）时，端口 8080 都不会被释放，直到我关闭终端并从头开始重新加载它。

```
→ unicorn_rails
I, [2012-06-09T09:56:05.919307 #6635]  INFO -- : listening on addr=0.0.0.0:8080 fd=3
I, [2012-06-09T09:56:05.919716 #6635]  INFO -- : worker=0 spawning...
I, [2012-06-09T09:56:05.921280 #6635]  INFO -- : master process ready
I, [2012-06-09T09:56:05.923884 #6636]  INFO -- : worker=0 spawned pid=6636
I, [2012-06-09T09:56:05.924617 #6636]  INFO -- : Refreshing Gem list
I, [2012-06-09T09:56:35.156762 #6636]  INFO -- : worker=0 ready
I, [2012-06-09T10:12:01.217846 #6635]  INFO -- : SIGWINCH ignored because we're not daemonized
^Z
[3]+  Stopped                 unicorn_rails 
```

当我尝试重新启动

```
→ unicorn_rails
E, [2012-06-09T11:48:24.172525 #9741] ERROR -- : adding listener failed addr=0.0.0.0:8080 (in use)
E, [2012-06-09T11:48:24.172783 #9741] ERROR -- : retrying in 0.5 seconds (4 tries left) 
```

我用 Control Z 关闭了服务器

我使用了错误的命令吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T06:22:43.753

是的 ctrl-z 将其发送到后台作业。要关闭它，请使用 ctrl-c。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T07:02:44.770

如果您已将其发送到后台作业，则可以使用`fg`将其返回到前台，或者使用 查找它的进程 ID，`ps`然后使用杀死它`kill -9 <pid>`（`<pid>`之前找到的进程 ID 在哪里）。

# .net - Windows azure 表日志记录、查询问题

> ID：10958902
> 
> 赞同：0
> 
> 时间：2012-06-09T06:20:38.653
> 
> 标签：.net, asp.net-mvc, c#-4.0, azure, azure-table-storage

我们正在使用 Windows azure 表来记录我们在工作角色或 Web 角色中托管的应用程序中的错误。我们在表中记录了足够的信息，以便于识别哪个角色、哪个类的组件记录了错误。

组件 ID（完全限定的类名）用作分区键，随机唯一 Guid 用作行键。

此日志信息显示在 ASP.NET MVC 网站上，管理员可以在其中根据组件 ID、日期范围、角色标识符、严重性等过滤条件搜索此日志。

这工作正常，直到桌子很小。一旦 azure table 包含大量记录（200000 或更多），则在 azure table 上进行过滤会花费太长时间并且超时。我们正在使用 .NET azure storage API 来查询表。

我们还希望对返回的结果集进行分页，但看起来在 azure table 中我们没有得到返回记录的准确计数。

我们尝试使用 azure storage API 来应用过滤器并根据当前页码获取数据，但它不起作用。我知道我们可能需要重新设计我们的表结构，尤其是 partitionkey 和 rowkey，但不知道如何进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:34:16.577

使用表存储时，您只有 2 个“索引”属性，即分区键和行键。如果您有大量数据，则在其他字段上搜索会非常慢。

在实现分页系统或想要对数据进行排序时，您应该使用行键。行键定义数据的顺序（排序顺序是字典顺序）。

我建议您查看 Steve 的博客文章，了解有关对数据进行排序和排序的更多信息：[在 Windows Azure 中使用数字作为键](http://blog.smarx.com/posts/using-numbers-as-keys-in-windows-azure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:20:08.597

如果您需要大量自定义过滤器，表存储可能无法提供最佳性能。如果可能，请考虑使用 SQL Azure。要提高表存储性能，您可以尝试：

1.  不要使用自定义过滤器。仅使用分区/行键过滤结果。这将为您提供最佳性能。

2.  使每个分区变小。扫描小分区比扫描大分区快。

至于分页，除非您有跨分区查询，否则分页应该按预期工作。如果您要求 20 个实体，则将返回正好 20 个实体（如果有这么多）。但如果遇到分区边界，则需要一个新页面。例如，如果在找到第 15 个匹配实体时遇到分区边界，则此请求中将仅返回 15 个实体。您必须创建一个新请求来查询下一个分区。如果您保持较小的分区，您可能会更频繁地遇到此问题。因此，您需要将系统设计为在需要时自动查询下一个分区。

还要记住，表存储的分页不是基于页码的。它基于延续令牌。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/dd135718.aspx](http://msdn.microsoft.com/en-us/library/dd135718.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T22:02:14.823

在这种情况下，我会建议我为在 Azure 表中存储日志而编写的记录器 - QLog。您可以通过 NuGet 获得它。它带有一个 QLogBrowser，允许您以您想要的方式查询日志。GitHub 项目站点在[这里](https://github.com/sobanieca/QLog)。

# python - 报告实验室无法处理希伯来语（unicode）

> ID：10958904
> 
> 赞同：6
> 
> 时间：2012-06-09T06:21:25.730
> 
> 标签：python, reportlab, non-ascii-characters

我正在尝试从以下 python 编程生成 pdf，但生成的输出无法正确显示希伯来字母

```
# -*- coding: utf-8 -*-
from reportlab.pdfgen import canvas
def hello(c):
    c.drawString(100,100, "מה שלומך")
c = canvas.Canvas("hello.pdf")
hello(c)
c.showPage()
c.save() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T10:20:30.350

此代码（见下文）有效！您需要做的就是将`ArialHB.ttf`（或任何其他支持希伯来字符的字体）放入`site-packages/reportlab/fonts`...

所需的输出将位于 pdf 页面的底部。

```
# -*- coding: utf-8 -*-

from reportlab.pdfgen import canvas 
from reportlab.pdfbase import pdfmetrics 
from reportlab.pdfbase.ttfonts import TTFont 

pdfmetrics.registerFont(TTFont('Hebrew', 'ArialHB.ttf'))

def hello(c):
    c.setFont("Hebrew", 14)
    c.drawString(10,10, u"מה שלומך".encode('utf-8'))

c = canvas.Canvas("hello.pdf") 
hello(c) 
c.showPage()
c.save() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T07:22:57.347

如果您使用正确的解码调用，就像`"מה שלומך".decode("utf-8")`它一样工作。

```
# -*- coding: utf-8 -*-
from reportlab.pdfgen import canvas
def hello(c):
    c.drawString(100,100, "מה שלומך".decode("utf-8"))
c = canvas.Canvas("hello.pdf")
hello(c)
c.showPage()
c.save() 
```

# linux - Linux内核rb树

> ID：10958906
> 
> 赞同：0
> 
> 时间：2012-06-09T06:21:35.623
> 
> 标签：linux, memory, tree, kernel, malloc

执行以下操作是否有效

```
struct foo {
int data;
struct rb_node node
};
struct rb_root root;
/* Filling tree with kalloc'ed foo nodes */
struct rb_node *node=rb_first(&root);
while (node)
{
 struct rb_node *next=rb_next(node);
 kfree(node);
 node = next;
}
root=RB_ROOT; 
```

事实上，我只想用线性时间同时做 foreach 和 clear 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:17:31.873

探索了 rb_next 实现。它在正确的孩子之前返回父母。因此，以这种方式清除列表是不可能的。

# java - 创建从 Matlab 实现接口的 Java 对象

> ID：10958909
> 
> 赞同：1
> 
> 时间：2012-06-09T06:22:15.183
> 
> 标签：java, class, matlab, interface

出于某种原因，我无法创建实现用户定义接口的 Java 对象。

我尝试创建一个实现预定义接口的 Java 对象，它运行良好。

我的界面：

```
public interface Speak 
{
    public void sayHello();
} 
```

我的课：

```
public class myPerson 
implements Speak
{
    public myPerson(String arg_firstName, int arg_age)
    {
        firstName = arg_firstName;
        age = arg_age;
    }

    public String firstName;
    public int age;

    @Override
    public void sayHello() {
        // TODO Auto-generated method stub
    }
} 
```

为了让我的课程在 Eclipse 中工作，我必须将我的界面导出为 .jar 文件，然后将其添加到项目库中——它工作得很好。

我的 Matlab 文件：

```
clc
clear

javaclasspath('/path/to/Speak.jar');
javaclasspath('/path/to/myPerson.jar');

driver_1 = myPerson('Bob', 39); 
```

我得到的错误是：

```
Undefined function or variable 'myPerson'. 
```

如果我删除`implements`接口，我可以很好地创建对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:26:35.950

我建议你试试

```
javaclasspath({'/path/to/Speak.jar', '/path/to/myPerson.jar'}); 
```

（您需要在`Speak.jar`类`myPerson.jar`路径上实例化 a `myPerson`。）

# android - for循环和while循环在android的asynctask doInBackground中不起作用？

> ID：10958910
> 
> 赞同：0
> 
> 时间：2012-06-09T06:22:22.943
> 
> 标签：android, for-loop, while-loop, android-asynctask, do-while

我在我的项目中面临一个非常愚蠢的问题，无法解决。我正在使用 AsyncTask 获取用户的当前位置。我使用一个计数器作为计时器。在 doInBackground 内部，我正在递增该计数器，如果它大于 x 值，则我取消异步任务。

**这是代码片段： -**

```
class CurrentPositionTask extends AsyncTask<String, Void, Void> {
        long counter = 0;
        boolean flag = true;

        @Override
        public void onPreExecute() {
            // TODO Auto-generated method stub
        }

        @Override
        public Void doInBackground(String... params) {
            // TODO Auto-generated method stub
            do {
                counter++;
                if (latitude != 0 && longitude != 0) {
                    flag = false;
                }
            } while (counter <= 100000);
            return null;
        }

        @Override
        public void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
        }

    } 
```

但是这里的while条件不起作用。我也尝试了 for 循环而不是 while 但这对我也不起作用。也面临着非常奇怪的问题，当我使用 sysout 打印计数器时，它工作正常，但没有它就无法工作..

欢迎所有建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T06:24:54.553

这个循环

```
while (counter <= 100000 || flag); 
```

will go on as long as any of the conditions hold, so it will continue *while counter <= 10000 or flag is true*. If `flag` is `false` but `counter` is less than `100000` it will continue. If you intend to terminate the loop when `flag` is `false`, then you need to do instead:

```
while (counter <= 100000 && flag); 
```

**Update:** It seems from your comments that you expect the hundred thousand incrementation of the `counter` variable to take roughly 20-30 seconds. Current day processors are **way** faster than that. I won't even mention the speed variation between processors, because its negligible anyway. You can wait for real 30 seconds with this loop, though is a *busy-waiting* loop (just like your original intent) and not something nice to do:

```
final long startTime = System.currentTimeMillis();
do {
    ...
} while( System.currentTimeMillis() - startTime <= 30 * 1000 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T06:51:36.963

Time bound task can be done using the TimerTask. Check the following:

```
boolean timeExpired = false;

        @Override
        protected Void doInBackground(Void... params) {

            Timer t =new Timer();

            TimerTask tk = new TimerTask() {

                @Override
                public void run() {
                    timeExpired = true;
                }
            };

            t.schedule(tk, 500);

            while(!timeExpired){
                if (latitude != 0 && longitude != 0) {
                    t.cancel();
                    tk.cancel();
                    break;
                }
            }

            return null;
        } 
```

Hope this helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-02T07:28:33.347

Just use

```
Looper.prepare(); 
```

before while loop in doInBackground method

# html - 避免在 Firefox 中单击只读文本框

> ID：10958915
> 
> 赞同：1
> 
> 时间：2012-06-09T06:23:23.890
> 
> 标签：html, firefox, browser, click

如何避免在 firefox 中单击只读文本框？

在 Firefox 中，可以单击具有 readOnly 属性的文本框，而其他浏览器则不能。它给用户一种可以编写文本框的意图。

如何在 Firefox 中避免它？

笔记：

我不想禁用该字段..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T06:38:16.837

使用 CSS

```
[readonly]{
    cursor: auto;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}​ 
```

**演示**：http: [//jsfiddle.net/rR6dk/2/](http://jsfiddle.net/rR6dk/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T07:04:11.520

you can use javascript to take focus out of input.

```
$("input").focus(function(){
       $(this).blur();
}); 
```

and use css to style your input so give the user intention that input has been disabled.

**EDIT:**

check this [fiddle](http://jsfiddle.net/MFCDeveloper/XzcuH/13/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T06:41:28.227

您只需添加此 CSS。仅适用于火狐：

```
[readonly]{
    cursor: default;
    -moz-user-select: none;
    user-select: none;
}​ 
```

有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T06:28:19.100

只需禁用文本框。

```
<input type='text' disabled='disabled' /> 
```

# security - 哈希和登录

> ID：10958916
> 
> 赞同：2
> 
> 时间：2012-06-09T06:23:24.823
> 
> 标签：security, login

当我通过一些登录表单进行设计时，我开始怀疑密码是否存储在哈希中，假设有人入侵了一个网站。

并假设该网站的用户在其他网站上使用完全相同的密码。

如果是这样，仅使用哈希，是否可以登录其他网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:27:55.190

通常网站使用随机盐，因此即使您的密码在两个网站上相同，不同的网站也会以不同的方式存储其哈希值。

即使网站不使用随机盐，并且密码总是散列到相同的东西，您仍然需要知道密码才能登录这些网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T06:43:56.637

不，您无法从哈希中推断出实际密码。这是[密码散列函数的主要属性](http://en.wikipedia.org/wiki/Cryptographic_hash_function#Properties)：

> 给定一个哈希*h*应该很难找到任何消息*m*使得*h* = hash( *m* )。这个概念与[单向函数](http://en.wikipedia.org/wiki/One-way_function)的概念有关。缺少此属性的函数很容易受到[原像攻击](http://en.wikipedia.org/wiki/Preimage_attack)。

您只能尝试使用适当的攻击（例如字典攻击或暴力破解）来猜测密码以找到[冲突](http://en.wikipedia.org/wiki/Collision_(computer_science))，即导致相同哈希值的输入值。

现在有一些技术可以帮助攻击者加快发现冲突的过程，例如将已知哈希值映射到输入值的预先计算的查找表。[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)是此类查找表的高级变体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T06:35:38.783

散列密码只是抵御黑客的第一道防线。如果黑客入侵您的网站并获取您的哈希密码数据库，他们可以使用映射到非常常用的密码的哈希“字典”。

一旦黑客知道您使用的散列方案（MD5 或 SHA-1 等），他就可以确定原始密码。这是因为这些散列方案对于输入和输出是 1 对 1 的。密码总是会产生相同的散列，并且可以反转散列以找到原始密码。

为了保护自己，您应该对密码加盐，然后对加盐+密码组合进行哈希处理。每个密码都应该与它自己唯一的盐配对。

在这里查看更多信息：http: [//codingmayhem.tumblr.com/post/24552289519/storing-passwords-securely](http://codingmayhem.tumblr.com/post/24552289519/storing-passwords-securely)

# r - 在 data.frame 中查找并合并重复行但忽略列顺序

> ID：10958918
> 
> 赞同：5
> 
> 时间：2012-06-09T06:24:25.337
> 
> 标签：r, duplicates, dataframe, plyr

我有一个包含 1,000 行和 3 列的 data.frame。它包含大量重复项，我使用 plyr 来组合重复的行并为每个组合添加一个计数，如[该线程](http://r.789695.n4.nabble.com/how-to-simplify-a-data-frame-and-add-the-counts-of-duplicate-rows-as-a-new-column-td3331655.html)中所述。

这是我现在拥有的一个示例（如果我需要从那里开始，我仍然拥有带有所有重复项的原始 data.frame）：

```
 name1    name2    name3     total
1  Bob      Fred     Sam       30
2  Bob      Joe      Frank     20
3  Frank    Sam      Tom       25
4  Sam      Tom      Frank     10
5  Fred     Bob      Sam       15 
```

但是，列顺序无关紧要。我只想知道有多少行有相同的三个条目，以任何顺序。如何合并包含相同条目的行，忽略顺序？在这个例子中，我想合并第 1 行和第 5 行，以及第 3 行和第 4 行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T07:03:14.597

Define another column that's a "sorted paste" of the names, which would have the same value of "Bob~Fred~Sam" for rows 1 and 5\. Then aggregate based on that.

Brief code snippet (assumes original data frame is `dd`): it's all really intuitive. We create a `lookup` column (take a look and should be self explanatory), get the sums of the `total` column for each combination, and then filter down to the unique combinations...

```
dd$lookup=apply(dd[,c("name1","name2","name3")],1,
                                  function(x){paste(sort(x),collapse="~")})
tab1=tapply(dd$total,dd$lookup,sum)
ee=dd[match(unique(dd$lookup),dd$lookup),]
ee$newtotal=as.numeric(tab1)[match(ee$lookup,names(tab1))] 
```

You now have in `ee` a set of unique rows and their corresponding total counts. Easy - and no external packages needed. And crucially, you can see at every stage of the process what is going on!

(Minor update to help OP:) And if you want a cleaned-up version of the final answer:

```
outdf = with(ee,data.frame(name1,name2,name3,
                           total=newtotal,stringsAsFactors=FALSE)) 
```

This gives you a neat data frame with the three all-important name columns, and with the aggregated totals in a column called `total` rather than `newtotal`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T07:05:01.207

Sort the index columns, then use `ddply` to aggregate and sum:

Define the data:

```
dat <- "   name1    name2    name3     total
1  Bob      Fred     Sam       30
2  Bob      Joe      Frank     20
3  Frank    Sam      Tom       25
4  Sam      Tom      Frank     10
5  Fred     Bob      Sam       15"

x <- read.table(text=dat, header=TRUE) 
```

Create a copy:

```
xx <- x 
```

Use `apply` to sort the columns, then aggregate:

```
xx[, -4] <- t(apply(xx[, -4], 1, sort))
library(plyr)
ddply(xx, .(name1, name2, name3), numcolwise(sum))
  name1 name2 name3 total
1   Bob Frank   Joe    20
2   Bob  Fred   Sam    45
3 Frank   Sam   Tom    35 
```

# asp.net - 我已经获取了我的网站访问者的 IP 地址，我怎样才能得到他们的地理位置呢？

> ID：10958926
> 
> 赞同：0
> 
> 时间：2012-06-09T06:25:55.703
> 
> 标签：asp.net, geolocation, ip-address

我想获取我的网站访问者的地理位置并将其存储在我的数据库中，已经获取了 IP 地址。

我正在使用 asp.net 3.0

```
protected void Page_Load( object sender, EventArgs e)
    {
        // Track Visitors
        string ipAddress = IpAddress();
        string hostName = Dns .GetHostByAddres(ipAddress).HostName;
        StreamWriter wrtr = new StreamWriter (Server.MapPath( "visitors.log" ), true );
        wrtr.WriteLine( DateTime .Now.ToString() + " | " + ipAddress + " | " + hostName + " | " + Request.Url.ToString());
        wrtr.Close();
    }

    private string IpAddress()
    {
        string strIpAddress;
        strIpAddress = Request.ServerVariables[ "HTTP_X_FORWARDED_FOR" ];
        if (strIpAddress == null )
            strIpAddress = Request.ServerVariables[ "REMOTE_ADDR" ];
        return strIpAddress;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:32:31.230

没有内置的方法。互联网上有提供此类映射的网络服务。此类数据库“GeoIP 数据库”也可供本地使用。

但最好订阅更新的网络服务并使用它来获取位置。 [Google 的 Client Location API](https://developers.google.com/loader/#ClientLocation)应该可以帮助您。

一些现代浏览器会向您发送用户位置。你可以用那个。但由于并非所有浏览器都遵循这一点，因此并不可靠。您可以查看w3.org 提供的[Geo Location API 。](http://dev.w3.org/geo/api/spec-source.html)

# visual-studio - 如何在 Visual Studio 2012 RC 中更改/禁用断点行的突出显示颜色？

> ID：10958928
> 
> 赞同：25
> 
> 时间：2012-06-09T06:26:20.183
> 
> 标签：visual-studio

我在编辑器中使用带有深色背景的 Visual Studio 2012 RC。我没有使用深色主题。我正在使用浅色主题。当我设置断点时，文本变为黑色，我看不到它。我取消选中“突出显示断点和当前语句的整个源代码行”。在“调试”下设置。在“字体和颜色”中，“断点”和“当前语句”的所有条目都没有前景色和背景色的深色。

这个设置在哪里或者这是VS中的一个错误？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-21T16:23:38.660

您可以将字体颜色更改为白色`Tools -> Options -> Environment -> Fonts and Colors -> Breakpoint (enabled)`。但是，这不会恢复语法突出显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-18T17:07:52.243

仍然无法在 VS2019 中正确关闭它，但以 github 问题的形式存在希望。点赞并订阅：[https ://github.com/dotnet/roslyn/issues/39114](https://github.com/dotnet/roslyn/issues/39114)

您可以如上所述更改颜色，但这将失去语法突出显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-03T17:45:25.180

检查选项 - 文本编辑器 - 常规 - 指标保证金。应该选中它，以便 Visual Studio 可以放置标记。

# php - 在某个字符串之后解析一个字符串

> ID：10958932
> 
> 赞同：0
> 
> 时间：2012-06-09T06:27:14.707
> 
> 标签：php, parsing

我有一个字符串 ($source)，其中包含以下数据：

```
{"Title":"War Horse","Year":"2011","Rated":"PG-13","Released":"25 Dec 2011","Runtime":"2 h 26 min","Genre":"Drama, War","Director":"Steven Spielberg","Writer":"Lee Hall, Richard Curtis","Actors":"Jeremy Irvine, Emily Watson, David Thewlis, Benedict Cumberbatch","Plot":"Young Albert enlists to serve in World War I after his beloved horse is sold to the cavalry. Albert's hopeful journey takes him out of England and across Europe as the war rages on.","Poster":"http://ia.media-imdb.com/images/M/MV5BMTU5MjgyNDY2NV5BMl5BanBnXkFtZTcwNjExNDc1Nw@@._V1_SX640.jpg","imdbRating":"7.2","imdbVotes":"39,540","imdbID":"tt1568911","Response":"True"} 
```

我正在使用以下方法提取标题、类型、情节等：

```
foreach(str_getcsv($source) as $item) {
    list($k, $v) = explode(':', $item);
    $$k = str_replace('"', '', $v);
    } 
```

到目前为止，这很好用，我可以使用 $Title、$Genre 等。唯一不起作用的是海报的 URL，因为我正在分解“：”并且 URL - 当然 - 包含“：”（在“http”之后）。

如何将海报 URL 放入变量中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T06:30:34.183

这看起来像 JSON 数据，为什么不简单：

```
$txt = '{"Title etc.....}';
$data = json_decode($txt);

$title = $data['Title'];
$genre = $data['Genre'];
etc... 
```

可变变量非常难看，并且您可能会通过使用 JSON 数据的内容覆盖其他一些变量来危及您的代码。

如果你真的坚持使用自动激活的变量来污染你的命名空间，你总是可以[`extract()`](http://ca.php.net/extract)用来拆开数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:37:07.210

它是一个json，

你应该使用[json_decode](http://php.net/json_decode)

```
$str = '{"Title":"War Horse","Year":"2011","Rated":"PG-13","Released":"25 Dec 2011","Runtime":"2 h 26 min","Genre":"Drama, War","Director":"Steven Spielberg","Writer":"Lee Hall, Richard Curtis","Actors":"Jeremy Irvine, Emily Watson, David Thewlis, Benedict Cumberbatch","Plot":"Young Albert enlists to serve in World War I after his beloved horse is sold to the cavalry. Albert\'s hopeful journey takes him out of England and across Europe as the war rages on.","Poster":"http://ia.media-imdb.com/images/M/MV5BMTU5MjgyNDY2NV5BMl5BanBnXkFtZTcwNjExNDc1Nw@@._V1_SX640.jpg","imdbRating":"7.2","imdbVotes":"39,540","imdbID":"tt1568911","Response":"True"}';
$arr = json_decode($str,true); 
print_r($arr);
echo $arr['Title'];
echo $arr['Year']; 
```

*注意，我已经正确地转义了字符串。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T06:35:42.867

使用**json_decode**

```
$str = '{"Title":"War Horse","Year":"2011","Rated":"PG-13","Released":"25 Dec 2011","Runtime":"2 h 26 min","Genre":"Drama, War","Director":"Steven Spielberg","Writer":"Lee Hall, Richard Curtis","Actors":"Jeremy Irvine, Emily Watson, David Thewlis, Benedict Cumberbatch","Plot":"Young Albert enlists to serve in World War I after his beloved horse is sold to the cavalry. Albert\'s hopeful journey takes him out of England and across Europe as the war rages on.","Poster":"http://ia.media-imdb.com/images/M/MV5BMTU5MjgyNDY2NV5BMl5BanBnXkFtZTcwNjExNDc1Nw@@._V1_SX640.jpg","imdbRating":"7.2","imdbVotes":"39,540","imdbID":"tt1568911","Response":"True"}';

$decode_string = json_decode($str);

print_r($decode_string);
echo $decode_string->Title; 
```

这是运行代码[点击这里](http://codepad.org/pvMYirMO)

# sql-server-2012 - SQL Server 2012 生成脚本产生与 2008 R2 不同的结果

> ID：10958940
> 
> 赞同：0
> 
> 时间：2012-06-09T06:28:59.307
> 
> 标签：sql-server-2012

SQL Server 2012 生成脚本产生与 2008 R2 不同的结果 空格已更改，例如使用 2008 R2

```
CREATE TABLE [dbo].[Table1](
    [ID] [nvarchar](50) NOT NULL,
    [Name] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Admin] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

例如，在 2012 年，多余的空格被消除

```
CREATE TABLE [dbo].[Table1](
    [ID] [nvarchar](50) NOT NULL,
    [Name] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Admin] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

此外，在 2012 年，一些创建表脚本以

```
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

而其他人没有 TEXTIMAGE_ON [PRIMARY]，这是什么？

外键约束的顺序也发生了变化。

我使用 SMO/SSMS 从 SQL Server 2012 和 2008 R2 编写脚本

这些更改使“diff”2 版本更加困难。有什么方法可以处理这种变化？

# html - 仅展开一个表格单元格

> ID：10958948
> 
> 赞同：2
> 
> 时间：2012-06-09T06:30:45.147
> 
> 标签：html, css

我有两个表格单元格，具有动态内容。

表格单元格 1 工作正常，当添加新内容使其大于表格单元格 2 时，表格单元格 2 的高度适合表格单元格 1 的高度，并且在宇宙中一切都很好。

但是，当新内容添加到表格单元格 2（隐藏了溢出，并且与 display: 块一起工作）时，它会扩展，溢出永远不会发生，并且表格单元格 1 的高度现在与表格单元格 2 匹配。

我想要的是当更多内容添加到表格单元格 2 时，它将显示内容到表格单元格 1，然后隐藏其余内容。我知道我可以在 javascript 中做到这一点，知道没有它怎么做吗？

这是一个 JSFiddle：http: [//jsfiddle.net/dYsNx/](http://jsfiddle.net/dYsNx/)

Col 2 的内容只能达到 col1 的高度，其余部分应溢出隐藏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:48:14.820

溢出：隐藏不应该以这种方式使用。但是，你明白了这个概念。

其他人，我看到你的代码不是很干净并且保持标准。所以，我会以我的方式修改它（希望它更好）

请参阅以下链接：http: [//jsfiddle.net/Edditoria/TGfzA/](http://jsfiddle.net/Edditoria/TGfzA/)

如您所见，`overflow: hidden;`在 中`#box`，然后在`position: relative;`没有顶部/左侧设置的情况下进行设置。

为避免 IE<7 的 display:table 兼容性问题，请保持 CSS 中默认的 div 显示设置。我也会使用 % 而不是固定的 px 宽度来避免 IE 的显示问题！

假设 col1 是动态高度的基础，则无事可做。

在 col2（和所有其他列）中，您需要添加`position: absolute; top: 0px; left: 50%;`.

我将 col-x 从 ID 更改为 class，因为您以后可能需要添加更多列。

*   更新：根据您的评论，添加滚动而不是隐藏额外信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:05:06.867

纯 CSS 是不可能的。这是来自 CSS 2.1 规范（[http://www.w3.org/TR/CSS2/tables.html#height-layout](http://www.w3.org/TR/CSS2/tables.html#height-layout)）：

**在 CSS 2.1 中，单元格框的高度是内容所需的最小高度。**

**'table-row' 元素框的高度**是在用户代理获得行中的所有单元格后计算的：它**是该行计算的“高度”的最大值，该行中每个单元格的计算“高度”，以及单元格所需的最小高度 (MIN)。**

# sql-server - 我的报告经理用户名/密码是什么？如何找出来？

> ID：10958957
> 
> 赞同：2
> 
> 时间：2012-06-09T06:32:40.843
> 
> 标签：sql-server, authentication, reporting-services, reportmanager

我有带有 BIDS 的 SQL Server 2008，我自己安装了 sql server，我是机器管理员。现在我可以使用 BIDS 制作报告，我还可以使用 SSMS 登录（Windows 身份验证）到报告服务器，但是当我尝试访问报告管理器 URL 时，它会询问我用户名/密码。到目前为止，我不确定从 SSMS 那里提供什么，我可以使用 Windows 身份验证来管理数据库引擎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T03:40:06.567

SSRS 始终使用 Windows 身份验证，因此您看到的用户名和密码就是您的 Windows 登录名。报告管理器没有单独的帐户。如果您看到提示，则可能是启用了 UAC，因此它会提示您。或者您的浏览器未启用 Windows 集成安全性。如果您使用的是 IE，则可以将报表管理器 URL 添加到受信任的站点或 Intranet 站点。

# mysql - 用 LIKE '%search%' 索引 mysql 中的文本是否可以改善搜索文本

> ID：10958958
> 
> 赞同：3
> 
> 时间：2012-06-09T06:33:03.587
> 
> 标签：mysql, performance, query-optimization, innodb

我在 mysql **version:5.1.61-community-log**中使用 InnoDB 引擎。要搜索的文本长度小于 100 个字符。**使用LIKE '%searchstring%'**的查询的性能是否会随着对文本的索引而提高？

编辑：
我将此查询用于 jquery 自动建议组件。
我正在使用 3rd 方虚拟主机服务。所以升级不是我的选择

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T06:34:44.410

不，添加索引不会帮助您的`LIKE '%foo%'`查询（很多*）。一个`LIKE`条件只有在你有一个常量前缀的情况下才能有效地使用索引，例如`LIKE 'foo%'`

您应该考虑使用[全文搜索](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)。如果您使用的是 MySQL 5.5 或更早版本，则仅支持 MyISAM 引擎。在 MySQL 5.6 或更新版本中，InnoDB 也支持全文搜索。

如果您使用的是旧版本的 MySQL，无法升级，并且无法更改存储引擎（因为您需要 InnoDB 的其他功能，例如外键约束），那么您可以考虑创建一个新的 MyISAM 表，它只存储主键和文本列。如果您还需要访问其他列，则可以使用此表执行快速全文搜索并连接到原始表。

您还可以考虑使用外部文本搜索引擎，例如：

*   [狮身人面像](http://sphinxsearch.com/)
*   [Lucene](http://lucene.apache.org/core/)

[(*) 如果您添加的索引是您查询的*覆盖索引*，您将通过添加索引获得小幅改进。由于索引的宽度较小，因此对索引进行全扫描会比全表全扫描要快。]

# wolfram-mathematica - 使用mathematica从微分方程计算特征函数的特征值

> ID：10958959
> 
> 赞同：-3
> 
> 时间：2012-06-09T06:33:17.817
> 
> 标签：wolfram-mathematica

假设，我有一个像这样的微分方程：

```
mu1 u1[x] - u1''[x] - 10 u1[x] == 0 
```

其中 mu1 是特征值，u1 是特征函数。现在，我怎样才能以数字方式计算特征值 mu1 ？？？谁能帮我解决这个问题？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T18:23:15.430

我假设你想解决类似的问题

```
u1''[x] + 10 u1[x] == mu1 u1[x] 
```

有边界条件

```
u1[x0] == 0; u1[x1] == 0; u1'[x0] =!= 0 
```

对于一些`x0 < x1`. 一种方法是首先求解微分方程加上 处的边界条件`x0`，例如

```
sol = DSolve[{mu1 u1[x] - u1''[x] - 10 u1[x] == 0, u1[x0] == 0, u1'[x0] == 1}, u1, x][[1]] 
```

作为输出

```
{u1 -> Function[{x}, -((E^(-Sqrt[-10 + mu1] x - Sqrt[-10 + mu1] x0) 
    (-E^(2 Sqrt[-10 + mu1] x) + E^(2 Sqrt[-10 + mu1] x0)))/(2 Sqrt[-10 + mu1]))]} 
```

然后我们可以使用这个解决方案来找到满足`mu1`边界条件的条件`x1`：

```
sol1 = Solve[{u1[x1] == 0 /. sol[[1]], x1 > x0}, mu1, MaxExtraConditions -> All] 
```

我们从中发现

```
{{mu1 -> ConditionalExpression[(10 x0^2 - 20 x0 x1 + 10 x1^2 - 4 \[Pi]^2 C[1]^2)/(
     x0^2 - 2 x0 x1 + x1^2), 
    x0 \[Element] Reals && C[1] \[Element] Integers && C[1] >= 1 && x1 > x0]}, 
 {mu1 -> ConditionalExpression[(-\[Pi]^2 + 10 x0^2 - 20 x0 x1 + 10 x1^2 - 
     4 \[Pi]^2 C[1] - 4 \[Pi]^2 C[1]^2)/(x0^2 - 2 x0 x1 + x1^2), 
    x0 \[Element] Reals && C[1] \[Element] Integers && C[1] >= 0 && x1 > x0]}} 
```

# asp.net - 自定义服务器控件 - 如何获得智能感知支持并消除 xhtml 错误？

> ID：10958963
> 
> 赞同：1
> 
> 时间：2012-06-09T06:34:57.150
> 
> 标签：asp.net, intellisense, custom-server-controls

我创建了一个采用自定义模板的自定义控件。但是没有智能感知支持，并且有这个 xhtml 错误。![自定义控件的标记](../Images/dfecbe939291efb09f72c6ef18119a32.png)

我检查了一些问题；[这篇](https://stackoverflow.com/questions/307514/custom-intellisense-for-server-controls)文章说我们必须默认获取它。但是我一直没有得到它。我错过了一些事情要做吗？

代码如下所示：

**服务器控制：**

```
[ToolboxData("<{0}:CustomTemplateControl runat=server></{0}:CustomTemplateControl>")]
[Description("My Custom Template Control")]
public class CustomTemplateControl : WebControl
{
    [TemplateContainer(typeof(CustomTemplateItem))]
    public ITemplate CustomHeader { get; set; }

    protected override void CreateChildControls()
    {
        if (CustomHeader != null)
        {
            CustomHeader.InstantiateIn(this);
        }
        base.CreateChildControls();
    }
    public override void RenderBeginTag(HtmlTextWriter writer)
    {
        writer.AddAttribute(HtmlTextWriterAttribute.Id, this.ClientID);
        writer.RenderBeginTag(HtmlTextWriterTag.Label);

        //base.RenderBeginTag(writer);
    } 
```

**模板：**

```
public class CustomTemplateItem : Control, INamingContainer
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:19:18.127

您将必须创建一个描述您的自定义控件的架构文件，并在任何 VS 项目中引用该架构文件。你用它。

xhtml 不喜欢大写字符。可能必须更改所有小写字符的自定义控件属性。

# c - 替换 C 中已打印的数字

> ID：10958967
> 
> 赞同：1
> 
> 时间：2012-06-09T06:36:10.337
> 
> 标签：c, replace, numbers

我正在用 C 语言编写一个名为 Thambola 的印度游戏（类似于 Bingo）。在这个游戏中，用户得到一张 3x9 的票，计算机要求用户输入第二个程序（从 1-90 中随机选择数字）选择的数字。如果输入的号码存在于车票中，则应将号码更改为“x”，表示该号码已被删除。我在这里需要帮助。如何用'x'替换已经打印的数字？我读了这个[C - 删除和替换打印的项目](https://stackoverflow.com/questions/5557076/c-remove-and-replace-printed-items)，但它没有帮助，因为我有 27 个数字要更改。请帮助我。这是代码的一部分：

```
int number,i,j;
const char x='x';

printf("\nEnter the number:");
scanf("%d",&number); // number entered by the user from the Picker

for (i=0;i<3;i++)
    for (j=0;j<9;j++)
        {if (ticket[i][j]==number)
            ticket[i][j]=x;
printf("%d",ticket[i][j]); //if the input number is present in the ticket, this should change it to 'x

    }

getchar(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:05:53.687

Main problem of your code snippet is your logic behind assigning values to variables.

As anyone can see, you have an array of integers but you want to assign a char to one of its elements. Actually you can do it by casting, but the result will be the ASCII value of the 'x'.

```
{if (ticket[i][j]==number) // number is an integer
            ticket[i][j]=x; // x is a char 
```

Since 'x' has the ASCII value of 120,which is out of range from the possible numbers in the ticket, you can safely cast 'x' to its integer value and then assign it to its array element. In printing, if you see 120 print 'x'.

In the situations where your char's integer value is in the range of the other possible integer values, pick another integer value and treat this value as 'x' in logic flow (for example, pick 0 for the corresponding integer, if 0 comes print 'x').

You can use ncurses or simply print a ticket state then clear the screen just before printing modified ticket for output.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T08:49:57.717

```
public class sample1 {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        List<int[]> outer = new ArrayList<int[]>(9);
        List<int[]> inner = new ArrayList<int[]>(9);
        int[][] final_arr = new int[9][18];
        int[][][] final_arr2 = new int[6][3][9];

        int[][] multi = new int[][]{
            {2,3,5,7,9,12,13,15,17},
            {1,3,4,5,6,7,11,14,16,18},
            {1,2,4,6,8,9,12,13,17,18},
            {3,5,7,9,10,11,12,14,15,16},
            {1,4,6,7,8,10,11,13,14,18},
            {2,3,5,8,9,12,13,15,16,17},
            {1,2,4,6,7,10,11,13,17,18},
            {1,3,5,8,9,12,13,15,16,18},
            {2,4,6,7,9,10,11,14,15,16,17}
        };

        for( int i=0;i<9;i++){
            outer.add(multi[i]);
        }

        for(int x=0;x<9;x++){
            int [] temp = new int[18];
                for(int k=0;k<outer.get(x).length;k++){
                    //System.out.print(outer.get(x)[k]-1 +" ");
                    int row = outer.get(x)[k]-1;
                    temp[row]=1;
                }
                //System.out.println();
            inner.add(temp);
            }
        System.out.println();
        int count=1;
        for(int i=0;i<9;i++){
            List<Integer> temp = new ArrayList<Integer>();
            for(int k=0;k<outer.get(i).length;k++){
                temp.add(count);
                count++;
            }
            Collections.shuffle(temp);
            int index_of_temp=0;
            for(int j=0;j<18;j++){
                if(inner.get(i)[j]==1){
                    inner.get(i)[j]=temp.get(index_of_temp);
                    index_of_temp++;
                }
                //System.out.print(inner.get(i)[j]+ " ");
            }
            //System.out.println();
        }

        for(int i=0;i<9;i++){
            for(int j=0;j<18;j++){
                final_arr[i][j]=inner.get(i)[j];
            }
        }
        System.out.println();

        for(int i=0;i<18;i++){
            for(int j=0;j<9;j++){
              //System.out.print(final_arr[j][i]+ " ");
                final_arr2[i/3][i%3][j]=final_arr[j][i];
            }

        }
        for(int k=0;k<6;k++){
            for(int i=0;i<3;i++){
                for(int j=0;j<9;j++){
                    System.out.print(final_arr2[k][i][j]+ " ");
                }
                System.out.println();
            }
            System.out.println();
        }
    }

} 
```

# android - 如何在Android中使用意图将活动之间的数据传递给片段

> ID：10958975
> 
> 赞同：5
> 
> 时间：2012-06-09T06:37:14.127
> 
> 标签：android, android-fragments

我可以将值存储在一个变量中，现在我想将该变量传递给片段。

使用以下代码，我可以加载片段。

```
 public class AndroidListFragmentActivity extends Activity {
Fragment2 f2;
public static String itemname;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.apetiserfragement);
    itemname=getIntent().getStringExtra("itemname");
    Bundle args=new Bundle();
    args.putString("itemname", itemname);
    f2=new Fragment2();
    f2.setArguments(args);

}
} 
```

（这里我使用 XML 页面加载片段） itemname

输出分为 2 个窗口，一个用于扩展 listfragment（用于 listview）。一个用于片段

片段2.xml

```
 public class Fragment2 extends Fragment {
String itemname;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    System.out.println(getArguments().getString("itemname"));

    return inflater.inflate(R.layout.fragment2, container, false);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

}

  } 
```

AndroidListFragmentActivity这个类itemname我想通过Fragment2.class。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T06:41:24.163

[使用片段构造函数](http://developer.android.com/reference/android/app/Fragment.html#instantiate%28android.content.Context,%20java.lang.String,%20android.os.Bundle%29)之一中提供的捆绑包，然后您应该能够通过正确执行您想要的位置来检索[捆绑包](http://developer.android.com/reference/android/os/Bundle.html)`getArguments()``onCreateView()`

例子：

```
YourFragment.instantiate(context,"fragName",yourBundleWithValue); 
```

然后，在您的片段中：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    getArguments().getStringValue("name"); //Returns your string value

    return inflater.inflate(R.layout.fragment2, container, false);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-19T01:59:51.153

您需要使用`FragmentManager`来显示您的`Fragment`.

# java - Properties.contains() 的意外输出

> ID：10958977
> 
> 赞同：1
> 
> 时间：2012-06-09T06:37:25.253
> 
> 标签：java, file, properties

我从`Properties.contains()`...得到意外的输出

这是我的代码...

```
File file = new File("C:\\ravi\\non-existing.no");
Properties pro = System.getProperties();
pro.put("file", file);
System.out.println(pro.contains(file)); //PRINTS TRUE , AS EXPECTED

File file2 = file;
System.out.println(pro.contains(file2)); //PRINTS TRUE , AS EXPECTED

File file3 = new File("C:\\ravi\\non-existing.no");
System.out.println(pro.contains(file3)); //EXPECTED FALSE , BUT PRINTS TRUE

File file4 = new File("C:\\ravi\\non.no");
System.out.println(pro.contains(file4)); //PRINTS FALSE , AS EXPECTED 
```

我期待`Properties`检查 的存在`File`，但这似乎不起作用。有人可以帮我解释为什么`file3`不能按我的预期工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T06:42:27.497

正如预期的那样，因为`Properties#contains()`will call `File#equals()`，它又委托`fs#compare()`which 按字典顺序比较两个抽象路径名。即，指向同一路径的两个文件确实是相等的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T06:45:33.973

我认为您的问题出在此处：

```
 pro.put("file", file); 
```

来自 Java 文档：

*因为 Properties 继承自 Hashtable，所以 put 和 putAll 方法可以应用于 Properties 对象。强烈建议不要使用它们，因为它们允许调用者插入键或值不是字符串的条目。应该改用 setProperty 方法。*

当你调用`contains()`它时，根据 Java 文档：

*当且仅当某些键映射到由 equals 方法确定的此哈希表中的 value 参数时，才返回 true；否则为假。*

你现在看到你的问题了吗？

进一步澄清：

当你这样做时：`System.out.println(pro.contains(file3));`你最终会这样做`file.equals(file3)`，因此`true`。

当你这样做时：`System.out.println(pro.contains(file4));`你最终会这样做`file.equals(file4)`，因此`false`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T06:49:25.967

请参阅属性类定义

```
public class Properties extends Hashtable<Object,Object> 
```

并且`contains`是[Hashtable](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html)的方法，它指出 -

```
 Tests if some key maps into the specified value in this hashtable.
    This operation is more expensive than the containsKey method.
    Note that this method is identical in functionality to containsValue,
   (which is part of the Map interface in the collections framework). 
```

*当且仅当某些键映射到此哈希表中的 value 参数时，它才返回 true，由 equals 方法确定；否则为假。*

# cakephp-1.3 - Cakephp 1.3 导入方法

> ID：10958979
> 
> 赞同：4
> 
> 时间：2012-06-09T06:37:52.967
> 
> 标签：cakephp-1.3

嘿，我是蛋糕 php 的新手。我想在另一个模型中使用一个模型，然后我们可以使用 $uses 方法。这个方法很简单。我们也可以用 App::import('Controller', 'Users'); ? 如果是，那么告诉我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:20:27.047

是的，您可以，但不能使用该`$uses`属性，因为该模型没有。

看看这个定义`$uses`：
*一个包含这个**控制器**使用的模型的类名的数组。*

所以这意味着这`$uses`是一个控制器属性，而不是一个模型。

现在当然可以在另一个模型中使用一个模型的功能。这就是[模型协会](http://book.cakephp.org/1.3/en/view/1039/Associations-Linking-Models-Together)的用途。例如，如果您有以下内容：
**Recipe belongsTo User**和相反的关联（例如）：**User hasMany Recipe**（一个用户可以有多个食谱。）从这两个模型中，您将能够调用对方的方法：
从用户模型：`$this->Recipe->find('all');`将在食谱表上进行查找。也可以调用其他模型中定义的任何自定义方法。

如果两个模型没有定义关联，您可以进行*“动态”绑定*。[您可以在 CakePHP Book - 1.3](http://book.cakephp.org/1.3/view/876/The-Manual)或[2.x](http://book.cakephp.org/2.0/en/index.html)中阅读所有关于这些功能的信息。

还有一个友好的建议 - 我看到你用 cakephp1.3 标签发布这个问题，如果你是新手，我强烈建议你开始学习 CakePHP 2.x，因为这个版本：
1\. 是最新的
2\. 有最“对象方法” "
3\. 是一个将被进一步开发的（不是说 1.3 没有被维护或任何东西）

# asp.net - 如何使用正则表达式在 asp.net 中仅输入不允许字母或特殊字符的数字？

> ID：10958980
> 
> 赞同：1
> 
> 时间：2012-06-09T06:38:16.367
> 
> 标签：asp.net

例如，我使用了这个 asp.net 代码，它将接受但不验证特殊字符。ValidationExpression="^[a-zA-Z0-9]*$"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:43:59.860

首先看一些[正则表达式基础知识](http://www.regular-expressions.info/)。尝试使用`^[0-9]*$`，这将只接受来自用户的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T12:44:43.833

试试这个...

```
 $('input').keyup( function() {
var $this = $(this);
$this.val($this.val().replace(/[^0-9]/*$, '')); 
```

});

# iphone - UIPrintInteractionController 返回 UIPrintUnknownImageFormatError

> ID：10958983
> 
> 赞同：1
> 
> 时间：2012-06-09T06:38:28.307
> 
> 标签：iphone, ios, ipad, pdf, printing

我正在尝试像这样打印通过 NSURLConnection 下载的 pdf 文档

```
 UIPrintInteractionController *pic = [UIPrintInteractionController sharedPrintController];
    NSData *PDFData = urlConnection.receivedData;
    if  (pic && [UIPrintInteractionController canPrintData:PDFData] ) {
        pic.printingItem = PDFData;
        ...
        [pic presentAnimated:YES completionHandler:completionHandler];
    } 
```

尽管pdf很好并且可以由任何pdf查看器打开，但我在completionHandler中收到UIPrintUnknownImageFormatError。它有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:32:14.337

这个技巧有帮助：

```
 [receivedData writeToFile:filePath atomically:YES];
    NSData *PDFData = [NSData dataWithContentsOfFile:filePath]; 
```

# linux - bash中的if语句错误

> ID：10958984
> 
> 赞同：3
> 
> 时间：2012-06-09T06:38:58.983
> 
> 标签：linux, bash

```
i=0
for f in `awk '{print $1}' config.list`
do
    echo "i value is $i"
    if ["$i" = "0"]
    then
        echo "here"
        i=$((i+1))
        continue 
    fi
    arr[i]=$f  
    i=$((i+1))
done 
```

在上面的 bash 脚本中，我收到一个错误，我使用了 if 语句，它看起来像这样

```
./script.sh: line 5: [0: command not found 
```

请指出我可能犯的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T06:40:05.677

利用`if [ "$i" = "0" ]`

在 bash 中，您需要在周围`[`和条件`]`中留出空格`if`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T06:41:01.977

您收到此错误，因为 Bash if 语句需要在操作数周围添加空格：

```
if [ "$i" = "0" ] 
```

# ruby-on-rails - 为什么当我添加更多模型时，突然没有分配 user_id？

> ID：10958989
> 
> 赞同：0
> 
> 时间：2012-06-09T06:40:12.693
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, cancan

这些是我的联想：

```
class User
 has_many :products
 has_many :prices
 has_many :businesses
 has_many :stores
end

class Price
 belongs_to :store
 belongs_to :user
 belongs_to :product
end

class Store
  belongs_to :user
  belongs_to :business
  has_many :prices
end

class Business
  belongs_to :user
  has_many :stores
end

class Product
  belongs_to :user
  has_many :prices
end 
```

这些是我所做的更改，以便关联正常工作：

1.  所有模型的表中都有 user_id。

2.  我像上面一样把关联放在里面。

3.  我让 CanCan 能力反映了这些变化

    ```
    def initialize(user)
      if user.role == "admin"
        can :manage, :all
      elsif user.role == "default"
        can :manage, [Price, Store, Business, Product], :user_id => user.id
        can :read, [Product, Store, Business, Price]
      end
    end 
    ```

如果有助于了解，我正在使用设计。

当我想创建一个企业时，它允许我，但他们没有分配用户。我不知道是什么问题。我认为它会自动分配自己，就像以前用户有很多价格时一样。你认为问题是什么？

**编辑**

* * *

```
class BusinessesController < ApplicationController
  before_filter :authenticate_user!
  load_and_authorize_resource

  def show
    @business = Business.find(params[:id])
  end

  def new
    @business = Business.new
  end

  def create
    @business = Business.new(params[:business])
    if @business.save
      redirect_to new_business_path, :notice => "Successfully added."
    else
      render :new, :notice => "It seems there was an error. Please try again."
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T06:50:41.923

您可能需要通过用户创建业务或在保存时在控制器中分配 user_id。

例如： `current_user.businesses.create(params[:business])` 而不是`Business.create(params[:business])`

或者

```
Business.create(params[:business].merge(:user => current_user)) 
```

为了确保您的所有属性都被传入，请使用以下行的验证

```
validates_presence_of :user_id 
```

在具有此数据列的模型上

# android - Android模拟器TTS数据文件？

> ID：10958998
> 
> 赞同：1
> 
> 时间：2012-06-09T06:42:54.923
> 
> 标签：android, android-emulator, text-to-speech

android**模拟器**TTS 数据文件在哪里？
我想测试我的应用程序，它将在目标设备上安装 TTS 文件。所以我想删除 TTS 文件并将我的数据文件安装在模拟器上，然后测试它们。但我在模拟器上找不到任何 TTs 文件（在 sdcard / svox），尽管我可以在模拟器中的文本到语音的设置屏幕中“收听示例”。

# javascript - 用于向 Google 地球插件地图添加/删除地标的 Javascript

> ID：10958999
> 
> 赞同：1
> 
> 时间：2012-06-09T06:43:16.447
> 
> 标签：javascript, google-maps-markers, google-earth-plugin

有谁知道在创建地标并通过javascript将它们添加到谷歌地球地图时是否有办法为地标分配唯一ID？这是我用来创建和添加地标的代码示例：

```
 var icon = ge.createIcon('');
    icon.setHref('<url here>');
    var style = ge.createStyle('');
    style.getIconStyle().setIcon(icon);
    style.getIconStyle().setScale(0.65);

    var pm = ge.createPlacemark('');
    pm.setStyleSelector(style);
    pm.setName("Type1");  // <-- NEED ANOTHER METHOD (ex. pm.SetId('uniqueId'))

    var pmPoint = ge.createPoint('');
    pmPoint.setLatitude(35.859545);
    pmPoint.setLongitude(-92.388783);

    pm.setGeometry(pmPoint);
    ge.getFeatures().appendChild(pm); 
```

*-------------------------------------------------- ------------*

我有多组要添加到地图的 KmlPlacemarks，我不想为每组分配一个唯一的名称以便能够删除它们（主要是因为我不希望名称显示在地图上）。我正在尝试使用以下（不完整的）代码块删除某些地标：

```
var children = ge.getFeatures().getChildNodes();
for(var i = 0; i < children.getLength(); i++) { 
    var child = children.item(i);
    if(child.getType() == 'KmlPlacemark') {
        if(... ??? ...) {  **// <-- don't want to use if(child.getName().indexOf('criteria') !== -1)**
            ge.getFeatures().removeChild(child);
        }
    }
} 
```

*-------------------------------------------------- ------------*

有人知道实现此目的的另一种方法吗？我尝试使用 child.getUrl() 但这并没有返回任何我可以用来识别我想从地图中删除的 KmlPlacemarks 的东西......

或者也许有一种方法可以将地图上的名称可见性设置为 false？

提前致谢。

布兰登

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T01:42:58.523

创建地标时

```
 var pm = ge.createPlacemark(''); 
```

使用它来设置它的'id'

```
 var pm = ge.createPlacemark('uniqueID'); 
```

那么当你想删除它时

```
 if(child.getType() == 'KmlPlacemark') {
    if(... ??? ...) {  **// <-- don't want to use if(child.getName().indexOf('criteria') !== -1)**
        ge.getFeatures().removeChild(child);
    }
} 
```

变成

```
 if(child.getType() == 'KmlPlacemark') {
    if(child.getId()=='uniqueID')
        ge.getFeatures().removeChild(child);
    }
} 
```