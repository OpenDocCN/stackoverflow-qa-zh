# StackOverflow 问答 10641000-10641999

# sqlite - 是否可以（模拟？）在 Sqlite 中的复合 PK 上进行 AUTOINCREMENT？

> ID：10641004
> 
> 赞同：2
> 
> 时间：2012-05-17T17:58:55.320
> 
> 标签：sqlite, auto-increment, compound-key

根据 SQLite[文档](http://sqlite.org/autoinc.html)，获取自动增量列的唯一方法是在主键上。

我需要一个复合主键，但我也需要自动递增。有没有办法在 SQLite 中实现这两者？

我将在 PostgreSQL 中编写的表的相关部分：

```
CREATE TABLE tstage (
    id                   SERIAL NOT NULL,
    node                 INT REFERENCES nodes(id) NOT NULL,
    PRIMARY KEY (id,node),
    -- ... other columns
); 
```

这个要求的原因是所有节点最终都将他们的数据转储到一个集中的节点上，在这个节点上，使用单列 PK，会有冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:41:55.170

文档是正确的。但是，可以在触发器中重新实现自动增量逻辑：

```
CREATE TABLE tstage (
    id    INT,  -- allow NULL to be handled by the trigger
    node  INT REFERENCES nodes(id) NOT NULL,
    PRIMARY KEY (id, node)
);

CREATE TABLE tstage_sequence (
    seq INTEGER NOT NULL
);
INSERT INTO tstage_sequence VALUES(0);

CREATE TRIGGER tstage_id_autoinc
AFTER INSERT ON tstage
FOR EACH ROW
WHEN NEW.id IS NULL
BEGIN
    UPDATE tstage_sequence
    SET seq = seq + 1;

    UPDATE tstage
    SET id = (SELECT seq
              FROM tstage_sequence)
    WHERE rowid = NEW.rowid;
END; 
```

`my_sequence`（或者如果有多个表，则使用带有表名的公共表。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T01:21:48.600

触发器有效，但很复杂。更简单地说，您可以避免使用序列号。一种方法，您可以使用[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)。不幸的是，我找不到让 SQLite 默认为您生成 GUID 的方法，因此您必须在应用程序中生成它。也没有 GUID 类型，但您可以将其存储为字符串或[二进制 blob](https://stackoverflow.com/questions/7815587/using-guid-in-sqlite-select-where-guid-is-stored-in-the-sqlite-db-as-binaries)。

或者，也许您的其他列中有一些东西可以作为合适的键。如果您知道插入不会比您选择的时间戳格式的分辨率更频繁（[SQLite 提供了几种，请参阅第 1.2 节](http://www.sqlite.org/datatype3.html)），那么也许`(node, timestamp_column)`是一个很好的主键。

或者，您可以使用 SQLite 的`AUTOINCREMENT`，但通过表[在每个节点上设置起始编号，](http://sqlite.org/autoinc.html)`sqlite_sequence`这样生成的序列就不会发生冲突。由于`rowid`SQLite 是一个 64 位数字，因此您可以通过为每个节点生成一个唯一的 32 位数字（IP 地址是一个方便的，可能是唯一的 32 位数字）并将其向左移动 32 位，或者等效地，将其相乘来做到这一点通过 4294967296。因此，64 位`rowid`实际上变成了两个连接的 32 位数字`NODE_ID, RECORD_ID`，保证不会发生冲突，除非一个节点生成超过 40 亿条记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T13:56:21.030

怎么样...

假设

*   只需要PK的唯一性，不需要顺序性
*   源表有PK

用一个额外的列创建中央表，节点号......

```
CREATE TABLE tstage (
    node  INTEGER NOT NULL,
    id    INTEGER NOT NULL,   <<< or whatever the source table PK is
    PRIMARY KEY (node, id)
       :
); 
```

当您将数据汇总到集中节点时，将源节点的编号插入“节点”并将“id”设置为源表的 PRIMARY KEY 列值...

```
INSERT INTO tstage (nodenumber, sourcetable_id, ...); 
```

无需在中央表上维护另一个自动递增列，因为 nodenumber+sourcetable_id 将始终是唯一的。

# windows-services - 混合模式程序集是针对运行时的“v1.1.4322”版本构建的，不能

> ID：10641006
> 
> 赞同：1
> 
> 时间：2012-05-17T17:59:03.807
> 
> 标签：windows-services, mode, mixed

我正在尝试让 Windows 服务工作，但我不断收到以下错误...混合模式程序集是针对运行时的版本“v1.1.4322”构建的，如果没有其他配置信息，则无法在 4.0 运行时中加载。

Windows 服务非常简单。它查看一些数据，进行一些组织并将一些信息发送到数据库。如果数据满足特定条件，服务会连接到 K2 Workflow，找到正确的项目，然后认领并完成项目。

我的问题是在尝试连接到使用 .NET 1.1 构建的程序集中的 K2 时出现的。我试过添加

```
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

到我项目中的所有配置文件，但它不起作用。奇怪的是，当我在调试模式下运行服务并单步执行时，我没有任何问题，一切正常，但是当我将它作为服务安装并运行时，就会出现这个问题。

我已经检查以确保在安装配置时已复制配置，但我现在很难过，因为我唯一能在任何地方找到的是配置添加，这似乎并不能解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:08:58.997

我发现了我的问题。事实证明，这与我使用的框架有关。我以为我的服务 exe 是 myservice.exe，所以我将我的配置文件命名为 myservice.exe.config。经过进一步调查，我发现该服务是从基础服务类继承的，并且可执行文件名为 serviceshell.exe，因此我的配置文件需要命名为 serviceshell.exe.config。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T06:46:39.153

您能否提供有关您正在使用的程序集的一些详细信息。您应该使用的 K2 程序集是 SourceCode.Workflow.Client，它应该适用于所有 .net 版本。

# javascript - 面向对象代码与 MVC 模式 - 初始化页面时要遵循哪个？

> ID：10641009
> 
> 赞同：1
> 
> 时间：2012-05-17T17:59:10.660
> 
> 标签：javascript, library-design

**回复：[1](https://stackoverflow.com/questions/10574496/library-design-initializing-pulling-elements-where-do-you-do-it-best-prac)**

[如本SO Post](https://stackoverflow.com/questions/72919/php-object-oriented-vs-mvc-codeigniter)所述，它们并不相互排斥

[这是与此更一般的SO Post](https://stackoverflow.com/questions/10574496/library-design-initializing-pulling-elements-where-do-you-do-it-best-prac)相关的特定问题

然而，控制器应该路由来自用户的所有呼叫。我通过初始化我的元素（设置 addEventListener）并让它们调用模型来做到这一点。

例如：（来自我的控制对象）

```
signin_input.addEventListener( "keypress", function( event )
{ 
    if( event.keyCode === 13 )
    {
        new ModelType( 'signin' ).invoke();
        return false; 
    }

}, false ); 
```

但是随着我的网站的增长，我的控制器变得越来越大。

我可以做的一件事是将初始化移动到它各自的模块中。例如，我的登录逻辑位于一个名为 ModelType 的对象中。初始化在对象 Control 中。

为了减小 Control 的大小，我可以将初始化移到 ModelSignIn 中。

或者我可以将我的控制器对象分解为多个对象 - ControlPage1、ControlPage2 等。

**哪种方式最好或其他方式最好？**

将初始化移动到相关对象的一个​​好处是，现在该对象是自包含的，您可以将其复制粘贴到其他应用程序中。缺点是这似乎打破了 MVC 模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:05:19.377

由于已经好几天了，没有其他人提供答案，我会试一试。虽然我没有尝试在 JavaScript 中使用 MVC 模式，但我已经将它用于 PHP，所以它也许也适用于你的框架。

对于我用 PHP 设计的 MVC，我使用 htaccess 通过加载默认控制器（基本控制器框架）的索引来路由所有 php 文件，然后使用请求的文件名查看是否有任何子控制器（可能有也可能没有覆盖默认的某些功能或属性）。

控制器将加载默认模型和视图（以及与请求页面相关的任何子模型/子视图）。

我用它来防止主控制器变得混乱。也许这不是真正的 MVC 模式，但在过去 5 年左右的时间里它对我很有帮助。

![在此处输入图像描述](../Images/14ef127fd92d2277cb35dc355deca029.png)

# java - Java 数组索引超出范围

> ID：10641013
> 
> 赞同：6
> 
> 时间：2012-05-17T17:59:20.957
> 
> 标签：java, arrays

我刚刚开始在 Arrays 中创建一个单元，并为我提供了一些示例代码来查看这个非常基本的 Arrays 介绍性程序。基本上我所要做的就是制作两个数组来询问一周中那一天的温度。收集信息后，它会简单地以这样的字符串将其吐回。

周一气温16度

周二气温18度

... ETC。

根据我从收到的示例代码中了解到的情况，我所做的一切都是正确的。但是当尝试运行程序（在 Netbeans 中）时，我得到了这个错误。

> “线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：温度为 7.Temperatures.main(Temperatures.java:27) Java 结果：1”

这是代码：

```
public static void main(String[] args)throws IOException {
        // TODO code application logic here
        BufferedReader br = new BufferedReader (new InputStreamReader (System.in));
        String temp[]= new String[7];
        String day[]= new String[7];
        day[1]=("Monday");
        day[2]=("Tuesday");
        day[3]=("Wednesday");
        day[4]=("Thursday");
        day[5]=("Friday");
        day[6]=("Saturday");
        day[7]=("Sunday");
        for (int i=0; i <7; i++){
            System.out.println("Please enter the temperature for" + day[i]);
            temp[i]=br.readLine();
        }
        for (int i=0; i <7; i++){
        System.out.println("The high temperature on " + day[i]+ " was "+ temp[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T18:01:34.373

[数组从零开始](http://developeronline.blogspot.com/2008/04/why-array-index-should-start-from-0.html)（<- 这是解释原因的文章的链接）。因此，将您的第一个值作为`day[1]=("Monday");`问题分配，应该是`day[0]=("Monday");`希望有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T18:01:19.017

Java 中的数组从位置 0 开始，而不是位置 1。因此，如果将其初始化为 7 的大小，则星期一为 0，星期日为 6。没有可用的索引 7。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:04:18.860

数组从 0 开始，

试试这个

```
 day[0]=("Monday");
    day[1]=("Tuesday");
    day[2]=("Wednesday");
    day[3]=("Thursday");
    day[4]=("Friday");
    day[5]=("Saturday");
    day[6]=("Sunday"); 
```

你应该改变这个循环

```
for(int i=0; i < 7; i++){
        System.out.println("Please enter the temperature for" + day[i]);
        temp[i]=br.readLine();
    } 
```

为了这

```
for(int i=0; i < day.length(); i++){
        System.out.println("Please enter the temperature for" + day[i]);
        temp[i]=br.readLine();
    } 
```

我希望能帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T18:06:21.617

那是因为您的数组从 1 开始，从 7 结束。如果您的数组长度为 7，则最后一个索引应该比数组长度小 1。在您的情况下，数组看到您已为 7 个元素声明它，但插入了 8 个位置。所以，数组从 0 开始，从 6 结束

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T12:15:57.587

如果数组是“N”，则该数组的边界是 0 和“N-1”。在您的情况下，数组边界是 0 和 6。但是您正在尝试将值写入不存在的数组 [7]。

# java - 您可以在 64 位 Linux 上为 32 位 Sun Java 6 JVM 设置的最大堆设置是多少？

> ID：10641015
> 
> 赞同：2
> 
> 时间：2012-05-17T17:59:34.727
> 
> 标签：java, jvm

> **可能重复：**
> [64 位操作系统上 32 位 JVM 的最大 Java 堆大小](https://stackoverflow.com/questions/1434779/maximum-java-heap-size-of-a-32-bit-jvm-on-a-64-bit-os)

我们有一个运行 32 位 JVM 的 64 位 Linux 服务器。由于各种内部原因，我们不想升级到 64 位 JVM。假设我的操作系统可以使用超过 32 位程序可以使用的方式，那么最大的 -xmx 值是多少？

到底是 4096 还是有一些必须更低的填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:11:42.977

3788.8 MB 是 64 位 Linux 上 32 位 JVM 的最大堆大小。资料来源： http: [//pauldone.blogspot.com/2008/08/is-jvms-maximum-heap-size-really-17-gb.html](http://pauldone.blogspot.com/2008/08/is-jvms-maximum-heap-size-really-17-gb.html) （对于较旧的 Java，Java 6 实际上可能或多或少）

# sql-server - Hiberante 和 SQL Server 列名

> ID：10641016
> 
> 赞同：0
> 
> 时间：2012-05-17T17:59:36.897
> 
> 标签：sql-server, hibernate, sql-server-2005

我有一个在其列名中使用“-”的数据库。

例子

```
system-test-id 
```

我在 Hibernate 中映射了表，但是当我尝试全选时，例如，我收到此错误：

```
Invalid column name "system" 
```

请注意，只有第一个单词被视为列名。

休眠中的选项 show_sql 向我展示了这一点：

```
select this_.system-test-id as system1_0_0_ (...) 
```

**编辑**

我必须在映射的列名中添加 \" ：

```
@Id
@Column(name="\"system-test-id\"")
private long systemTestId; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:58:34.703

@Column(name="\"system-test-id\"") is the JPA defined way to handle quoted identifiers.

Hibernate has a little more friendly syntax using batck-ticks: @Column(name="`system-test-id`")

The back-ticks (`) or embedded double-quotes indicate the identifier should be quoted and are replaced with dialect-specific identifier quoting.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:21:46.020

请检查两者之间的区别

```
create table #t
(
    [id-Column] int
) 
```

和

```
create table #t
(
    id-Column int
) 
```

# c - 如何重新加载 gdbinit？

> ID：10641029
> 
> 赞同：25
> 
> 时间：2012-05-17T18:00:13.913
> 
> 标签：c, debugging, gdb

有没有办法重新加载 .gdbinit 文件。

假设您已经在 gdb 中工作，并且您对 .gdbinit 进行了更改，并且希望在不影响当前 gdb 环境的情况下重新加载新的 .gdbinit。

这可能吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-17T18:06:47.767

您可以使用 source 命令执行 .gdbinit（或任何其他文件）中的命令。例如，“source .gdbinit”将执行当前目录中.gdbinit 中的命令。如果要使用另一个 .gdbinit，则需要指定路径，例如“source ~/.gdbinit”用于主目录中的那个。

这只会执行文件中当前的命令；它不会重置或撤消文件中先前的命令。因此它将更新当前命令所做的任何定义或设置，但不会删除或撤消任何旧定义或设置。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-17T18:05:28.857

```
source ~/.gdbinit 
```

[http://pirate.shu.edu/~minimair/assembler/](http://pirate.shu.edu/~minimair/assembler/)

# .net - SQL Server 2008 正则表达式 CLR 使用

> ID：10641032
> 
> 赞同：0
> 
> 时间：2012-05-17T18:00:26.397
> 
> 标签：.net, sql-server, regex, clr

好的，我意识到 SS 2008 没有本机正则表达式函数。我还看到可以使用 CLR 添加它们。[我在http://msdn.microsoft.com/en-us/magazine/cc163473.aspx](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)找到了正则表达式 CLR ，但我不知道如何处理它们。

所以我有2个问题。正则表达式仅在针对 2 个字段导入记录（一次最多 1,000,000 条，一年最多 50,000,000 条）时使用。

第一个问题。我可以在我的代码（ASP.NET）中一次手动完成 1 条记录，我知道这会影响性能，但不知道有多大。对此有任何意见吗？

第二个问题。有人可以向我指出有关如何安装我下载的 CLR 文件的简单分步说明吗？我尝试进行搜索，但要么没有显示我需要的信息，要么太埋没在其他信息中，我无​​法找到它。

谢谢

PS 我正在运行 SS 2008（不是 R2）和 VS.NET 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:12:16.567

请参阅[此处的文章](http://www.simple-talk.com/sql/t-sql-programming/clr-assembly-regex-functions-for-sql-server-by-example/)以获取完整的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:21:06.017

如果您只需要 REGEX 进行数据加载，那么您可以在 ASP.NET 中一次执行一条记录。即使使用 SQL CLR 集成，您也将一次执行一条记录，因为 SQL 一次将传递一条记录的值。如果您想在 where 子句中使用 REGEX 作为条件，那么 SQL CLR 集成将是唯一的选择。

我正在做的是一次解析一行。一行将导致 1 - 5 个 SQL 插入。然后我做那些 SQL 插入异步。如果下一个解析在插入之前完成，我会等待。在我的情况下，它是关于死气沉沉的，所以我得到了并行处理。如果 SQL 调用正则表达式，则您仅限于串行处理。

我解析和加载数据很多。如果您关心速度，请多关注 SQL 方面而不是解析。我什至禁用 SQL 索引解析和加载 1000 万条记录，然后重建索引。一次正则表达式一行通常比 SQL 插入快，除非 SQL 表没有索引。

# javascript - 在 jquery 代码中调用外部 javascript 函数

> ID：10641038
> 
> 赞同：1
> 
> 时间：2012-05-17T18:00:47.273
> 
> 标签：javascript, jquery

```
$(function(){

function f1(){}
function f2(){}

}

<Input type = radio Name = radiobutton Value = "something" checked=checked onClick= //here call f1()//> 
```

我尝试在 OnClick 中访问 f1 功能

像这样的代码不起作用：

```
$.function.f1()
$.function().f1() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T18:08:51.043

那是因为你**应该**这样做：

```
$(function () {

    function foo () { }
    function bar () { }

    // bind
    $('input').on('click', foo);

}); 
```

...而不是`onclick=`在您的 HTML 标记上放置一个属性。

### 编辑

根据要求，一些关于为什么你**应该**做 jQuery 绑定而不是`onclick`标记的快速注释。

1.  您已经在使用 jQuery，简单明了。用它。
2.  应该付出巨大的努力来分离您的 HTML、CSS 和 JS。HTML 文件中的 HTML，JS 文件中的 JS，等等。放入`onclick=do_backflips()`您的 HTML 标记违反了这一点，并且**会**在未来导致噩梦般的维护问题，等等。
3.  DOM0`onclick=`语法本质上是`1:1`. 这意味着自然地，对于每个元素的每个事件，您只能附加一个事件处理程序。那绝对是烂球。
4.  通过在处理程序函数中定义您的`f1`和函数，您可以限制它们在该函数中的范围。这意味着它们不能在该范围之外被引用，这意味着脚本解释器不会知道您的 HTML 标记在哪里。您必须在处理程序已知的地方附加事件处理程序，并且在内部（如果有意义的话）。`f2``document.ready``f1``document.ready`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:05:50.987

使用的重点`$( function(){ ... } )`是，只有在 DOM 完成加载后才能运行内部的任何内容。在那里定义函数没有任何好处，除非目标是保持命名空间干净并在本地范围内使用函数。

在这种情况下，您需要范围之外的函数，因此只需将它们移到匿名函数之外或将事件绑定到范围内的单选按钮。

# c# - 与 Sage Abra Suite 建立数据库连接

> ID：10641040
> 
> 赞同：2
> 
> 时间：2012-05-17T18:01:08.833
> 
> 标签：c#, visual-foxpro

我想使用 C# 从我们的 Sage Abra Suite 数据库创建一个 CSV 文件。在这一点上，我只是试图与它建立联系，并且难以创建和测试它。

我安装了 Visual Studio 2010，我要访问的表位于服务器上（称为 Server1）。据我所知，Sage Abra 使用的数据库是 VisualFoxPro

所以我现在需要帮助来了解如何在 C# 中创建数据库连接和测试连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:07:06.970

最终使用连接字符串

```
 // Build the connection string
      string connectionString = @"Provider=VFPOLEDB.1;Data Source= myServer;Collating Sequence=general";

      // Create the connection
      OleDbConnection connection = new OleDbConnection(connectionString);

      // Open the connection
      connection.Open(); 
```

# facebook - 是否可以隐藏 Facebook 应用活动，因此“X 朋友在过去一个月内使用过”不会在悬停时显示？

> ID：10641041
> 
> 赞同：0
> 
> 时间：2012-05-17T18:01:11.247
> 
> 标签：facebook, stream, privacy

Facebook 让应用程序开发人员可以控制应用程序活动是否在流中发布。是否也可以防止悬停弹出窗口显示使用过应用程序的朋友？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:37:51.480

您可以尝试几件事： 如果您有画布应用，请关闭“社交发现”： 1\. 转到[https://developers.facebook.com/apps](https://developers.facebook.com/apps)并选择您的应用。2\. 单击“编辑设置”。3\. 点击左侧的“高级”。4\. 向下滚动到画布设置并将“社交发现”设置为“禁用”。这旨在关闭诸如“约翰使用 GreatApp”之类的新闻提要故事。也许它也会关闭您描述的功能。我没有测试过这个。

当您对用户进行身份验证时：将默认隐私控制设置为“仅限我”。这使得从您的应用程序发布的任何故事都默认具有最严格的隐私设置。允许用户自行编辑此内容，但大多数人会将其保留为默认值。我不知道这是否会关闭应用程序悬停卡上的 facepile，但您可以对其进行测试以查看。

让我知道这些是否有效，我们可以编辑响应以描述正确的解决方案！

# java - 如何在表单和新的 Date 实例中实现多个图像

> ID：10641044
> 
> 赞同：1
> 
> 时间：2012-05-17T18:01:23.637
> 
> 标签：java, java-me, datepicker, midlet, lcdui

在`CalendarCanvas`课堂上，我们的想法是在日历中的任何一天按下，然后将显示一个表格，其中包含用户选择的当天的实际日期（不仅仅是今天的日期，因为它现在正在做）并且表格下方将是相关的图像到表格（例如 6 月 21 日 ( `image.jpg`)）。

我有两个问题。

第一，该程序只喜欢一张图片，即`Men.img`. 它将以所有三种形式显示该图像。其他两个图像根本不会显示。

我不明白，因为我一开始是从一种形式开始的，`images.jpg`图像和图像有效。我所做的只是创建 2 个新表单并切换图像的顺序。

我什至减小了尺寸（宽度/高度和 KB）以匹配，`Men.jpg`但它仍然没有显示。ImageItem 构造函数中的字符串甚至不显示。

最后，如何创建该`calendar.getSelectedDate().toString()`方法的新实例以显示新用户选择的日期，以便在用户选择不同的日期时将其放在图像上方？

在该`keyPressed`方法中，注释掉的 Alert 新实例将为我执行此操作，但我不想要警报，我希望它是与用户选择的日期有关的表单的标题。

下面是我的代码：

类 CalendarMidlet：

```
import java.io.IOException;
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;

/**
 * @author addylesson
 */
public class CalendarMidlet extends MIDlet {
    private Display mydisplay;
    private Command f;
    private Displayable d;

    public CalendarMidlet(){}

    public void startApp() {
        d = new CalendarCanvas(this);

        f = new Command("Exit", Command.EXIT, 0);
        d.addCommand(f);
        d.setCommandListener(new CommandListener()
        {
            public void commandAction(Command c, Displayable s)
            {

                if(c == f)

            notifyDestroyed();
            }
        } );

        mydisplay = Display.getDisplay(this);
        mydisplay.setCurrent(d);

    }

    public void startOver() {

        final Displayable d = new CalendarCanvas(this);

        d.addCommand(f);

        d.setCommandListener(new CommandListener()
        {
            public void commandAction(Command c, Displayable s)
            {

                if(c == f)

            notifyDestroyed();
            }
        } );
        mydisplay.setCurrent(d);
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
    }

} 
```

类日历画布：

```
import java.io.IOException;
import java.util.Date;

import javax.microedition.lcdui.*;
import javax.microedition.midlet.MIDlet;
import javax.microedition.midlet.MIDletStateChangeException;

public class CalendarCanvas extends Canvas
{
    CalendarWidget calendar = null;
    CalendarMidlet midlet = null;
        private Alert alert;
        private List mList;
        private Command f,e,n;
        private Display mydisplay;
        private Form form;
        private Form form2;
        private Form form3;
        private ImageItem imageItem;
        private ImageItem imageItem2;
        private ImageItem imageItem3;

    public CalendarCanvas(final CalendarMidlet m)
    {
        String day = calendar.getSelectedDate().toString();

                this.midlet = m;

        calendar = new CalendarWidget(new Date());

        calendar.headerFont = Font.getFont(Font.FACE_PROPORTIONAL, Font.STYLE_BOLD, Font.SIZE_LARGE);
        calendar.weekdayFont = Font.getFont(Font.FACE_PROPORTIONAL, Font.STYLE_BOLD, Font.SIZE_MEDIUM);
        calendar.weekdayBgColor = 0xccccff;
        calendar.weekdayColor = 0x0000ff;
        calendar.headerColor = 0xffffff;

                form = new Form(day);
                form2 = new Form("New Page");
                form3 = new Form("New Page");

                try 
                {
                    imageItem = new ImageItem(
                        "Men In Black 3: ",
                        Image.createImage("Men.jpg"),
                        ImageItem.LAYOUT_DEFAULT,
                        "DuKe");
                    form.append(imageItem);
                } catch(Exception s) {}

                try 
                {
                    imageItem2 = new ImageItem(
                        "Jordon vs Knicks: ",
                        Image.createImage("images.jpg"),
                        ImageItem.LAYOUT_DEFAULT,
                        "Not");
                    form2.append(imageItem2);
                } catch(Exception s) {}
                try 
                {
                    imageItem3 = new ImageItem(
                        "Horoscope: ",
                        Image.createImage("Men.jpg"),
                        ImageItem.LAYOUT_DEFAULT,
                        "DuKe");
                    form3.append(imageItem3);
                } catch(Exception s) {}

                alert = new Alert("Listen", "On this day "
                        +calendar.getSelectedDate().toString()+ "stuff happened", null, null);
                alert.setTimeout(Alert.FOREVER);

                n = new Command("Next", Command.SCREEN,0);
                f = new Command("Back", Command.BACK, 0);
                e = new Command("Exit", Command.EXIT, 1);
                form.addCommand(f);             
                form.addCommand(n);
                form2.addCommand(f);
                form2.addCommand(n);
                form3.addCommand(f);
                form3.addCommand(e);

                form.setCommandListener(new CommandListener()
                      {
                      public void commandAction(Command c, Displayable s)
                        {
                            if (c == f)

                            m.startOver();

                            if (c == e)
                                 m.notifyDestroyed();

                            if (c == n)
                                 Display.getDisplay(midlet).setCurrent(form2);
                        }
                      } );
                form2.setCommandListener(new CommandListener()
                      {
                      public void commandAction(Command c, Displayable s)
                        {
                            if (c == f)

                            m.startOver();

                            if (c == e)
                                 m.notifyDestroyed();

                            if (c == n)
                                 Display.getDisplay(midlet).setCurrent(form3);
                        }
                      } );
                form3.setCommandListener(new CommandListener()
                      {
                      public void commandAction(Command c, Displayable s)
                        {
                            if (c == f)

                            m.startOver();

                            if (c == e)
                                m.notifyDestroyed();
                        }
                      } );

        calendar.initialize();
    }

    protected void keyPressed(int key)
    {
        int keyCode = getGameAction(key);
        String day = calendar.getSelectedDate().toString();
        if(keyCode == FIRE)
        {
             /*Display.getDisplay(midlet).setCurrent(
                new Alert("Selected date", 
                                day, null, 
                                AlertType.CONFIRMATION)
            );*/
                       Display.getDisplay(midlet).setCurrent(form);
        }
        else
        {
            calendar.keyPressed(keyCode);

            repaint();
        }
    }

    protected void paint(Graphics g)
    {
        g.setColor(0xff0000);
        g.fillRect(0, 0, getWidth(), getHeight());

        calendar.paint(g);
    }

} 
```

类日历小部件：

```
import java.util.Calendar;
import java.util.Date;

import javax.microedition.lcdui.*;

public class CalendarWidget
{
    static final String[] MONTH_LABELS = new String[]{
        "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"
    };
    static final String[] WEEKDAY_LABELS = new String[]{
        "M", "T", "W", "T", "F", "S", "S"
    };
    /* starting week day: 0 for monday, 6 for sunday */
    public int startWeekday = 0;

    /* elements padding */
    public int padding = 2;

    /* cells border properties */
    public int borderWidth = 4;
    public int borderColor = 0x000000;

    /* weekday labels properties */
    public Font weekdayFont = Font.getDefaultFont();
    public int weekdayBgColor = 0xcccccc;
    public int weekdayColor = 0xffffff;

    /* header (month-year label) properties */
    public Font headerFont = Font.getDefaultFont();
    public int headerBgColor = 0xff0000;
    public int headerColor = 0xff0000;

    /* cells properties */
    public Font font = Font.getDefaultFont();
    public int foreColor = 0xffffff;
    public int bgColor = 0xcccccc;
    public int selectedBgColor = 0x000000;
    public int selectedForeColor = 0xff0000;

    /* internal properties */
    int width = 0;
    int height = 0;
    int headerHeight = 0;
    int weekHeight = 0;
    int cellWidth = 0;
    int cellHeight = 0;

    /* internal time properties */
    long currentTimestamp = 0;
    Calendar calendar = null;
    int weeks = 0;

public CalendarWidget(Date date)
{
    calendar = Calendar.getInstance();

    //we'll see these 2 methods later
    setDate(date);

    initialize();
}
public Date getSelectedDate()
{
    return calendar.getTime();
}
public void setDate(Date d)
{
    currentTimestamp = d.getTime();

    calendar.setTime(d);

    //weeks number can change, depending on week starting day and month total days
    this.weeks = (int)Math.ceil(((double)getStartWeekday() + getMonthDays()) / 7);
}
public void setDate(long timestamp)
{
    setDate(new Date(timestamp));
}
void initialize()
{
    //let's initialize calendar size
    this.cellWidth = font.stringWidth("MM") + 3 * padding;
    this.cellHeight = font.getHeight() + 15 * padding;

    this.headerHeight = headerFont.getHeight() + 2 * padding;
    this.weekHeight = weekdayFont.getHeight() + 2 * padding;

    this.width = 7 * (cellWidth + borderWidth) + borderWidth;
    initHeight();
}
void initHeight()
{
    this.height = 
        headerHeight + weekHeight + 
        this.weeks * (cellHeight + borderWidth) + borderWidth;
}
int getMonthDays()
{
    int month = calendar.get(Calendar.MONTH);

    switch(month)
    {
    case 3:
    case 5:
    case 8:
    case 10:
        return 30;
    case 1:
        return calendar.get(Calendar.YEAR) % 4 == 0 && calendar.get(Calendar.YEAR) % 100 != 0 ? 29 : 28;
    default:
        return 31;
    }
}
int getStartWeekday()
{
    //let's create a new calendar with same month and year, but with day 1
    Calendar c = Calendar.getInstance();

    c.set(Calendar.MONTH, calendar.get(Calendar.MONTH));
    c.set(Calendar.YEAR, calendar.get(Calendar.YEAR));
    c.set(Calendar.DAY_OF_MONTH, 1);

    //we must normalize DAY_OF_WEEK returned value
    return (c.get(Calendar.DAY_OF_WEEK) + 5) % 7;
}
public void keyPressed(int key)
{
    switch(key)
    {
    case Canvas.UP:
        go(-7);
        break;
    case Canvas.DOWN:
        go(7);
        break;
    case Canvas.RIGHT:
        go(1);
        break;
    case Canvas.LEFT:
        go(-1);
        break;
    }
}
void go(int delta)
{
    int prevMonth = calendar.get(Calendar.MONTH);

    setDate(currentTimestamp + 86400000 * delta);

    //we have to check if month has changed
    //if yes, we have to recalculate month height
    //since weeks number could be changed
    if(calendar.get(Calendar.MONTH) != prevMonth)
    {
        initHeight();
    }
}
public void paint(Graphics g)
{
    //painting background
    g.setColor(bgColor);
    g.fillRect(0, 0, width, height);

    //painting header (month-year label)
    g.setFont(headerFont);
    g.setColor(headerColor);
    g.drawString(MONTH_LABELS[calendar.get(Calendar.MONTH)] + " " + calendar.get(Calendar.YEAR), width / 2, padding, Graphics.TOP | Graphics.HCENTER);

    //painting week days labels
    g.translate(0, headerHeight);

    g.setColor(weekdayBgColor);
    g.fillRect(0, 0, width, weekHeight);

    g.setColor(weekdayColor);
    g.setFont(weekdayFont);

    for(int i = 0; i < 7; i++)
    {
        g.drawString(WEEKDAY_LABELS[(i + startWeekday) % 7],
            borderWidth + i * (cellWidth + borderWidth) + cellWidth / 2,
            padding,
            Graphics.TOP | Graphics.HCENTER
        );
    }

    g.translate(0, weekHeight);

    g.setColor(borderColor);

    for(int i = 0; i <= weeks; i++)
    {
        g.fillRect(0, i * (cellHeight + borderWidth), width, borderWidth);
    }
    for(int i = 0; i <= 7; i++)
    {
        g.fillRect(i * (cellWidth + borderWidth), 0, borderWidth, height - headerHeight - weekHeight);
    }

    int days = getMonthDays();
    int dayIndex = (getStartWeekday() - this.startWeekday + 7) % 7;

    g.setColor(foreColor);

    int currentDay = calendar.get(Calendar.DAY_OF_MONTH);

    for(int i = 0; i < days; i++)
    {
        int weekday = (dayIndex + i) % 7;
        int row = (dayIndex + i) / 7;

        int x = borderWidth + weekday * (cellWidth + borderWidth) + cellWidth / 2;
        int y = borderWidth + row * (cellHeight + borderWidth) + padding;

        if(i + 1 == currentDay)
        {
            g.setColor(selectedBgColor);
            g.fillRect(
                borderWidth + weekday * (cellWidth + borderWidth), 
                borderWidth + row * (cellHeight + borderWidth), 
                cellWidth, cellHeight);
            g.setColor(selectedForeColor);
        }

        g.drawString("" + (i + 1), x, y, Graphics.TOP | Graphics.HCENTER);

        if(i + 1 == currentDay)
        {
            g.setColor(foreColor);
        }
    }

    g.translate(0, - headerHeight - weekHeight);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:59:16.477

您发布的代码片段中没有明显的错误。

当您的 MIDlet 变得如此复杂时，为了更容易找出可能出现的问题，添加日志语句并在模拟器中运行它并观察控制台输出。

您**肯定**需要在`catch`块内添加日志记录。要找出我为什么要做出如此强烈的声明，请在 Web 上搜索*Java 燕子异常*之类的内容。

我建议记录的其他点是在`commandAction`调用`setCurrent`. 在开发时，请随意在您认为需要的地方添加更多内容（`keyPressed`看起来也是一个不错的候选者）。

```
public class Log {
    // utility class to keep logging code in one place
    public static void log (String message) {
        System.out.println(message);
        // when debugging at real device, S.o.p above can be refactored
        //  - based on ideas like one used here (with Form.append):
        //    http://stackoverflow.com/questions/10649974
        //  - Another option would be to write log to RMS
        //    and use dedicated MIDlet to read it from there
        //  - If MIDlet has network connection, an option is
        //    to pass log messages over the network. Etc etc...
    }
}

// ... other classes...
    // ...
    catch (Exception e) {
        Log.log("unexpected exception: [" + e + "]");
    }

    // ...
    public void commandAction(Command c, Displayable s) {
        Log.log("command: [" + c.getCommandLabel()
                + "] at screen: [" + d.getTitle() + "]");
        // ...
    }

    // ...
    Log.log("set current: [" + someDisplayable.getTitle() + "]");
    mydisplay.setCurrent(someDisplayable);
    // ...

    protected void keyPressed(int key) {
        Log.log("key pressed: [" + getKeyName(key) + "]");
        // ...
    } 
```

# python - 在linux中使用ctypes链接c++和python

> ID：10641054
> 
> 赞同：0
> 
> 时间：2012-05-17T18:02:05.007
> 
> 标签：python, ctypes, python-c-extension

我正在用python编写一个程序。现在我想使用 ctypes 来使用我在 c++ 中拥有的类的一些功能。所以基本上，我在 python 中有一个数据数组。我在 c++ 中有另一个程序，它应该使用该数组并将其转换为图像类。这是我在 C++ 中的程序。我已经在linux中制作了makefile并且可以编译。

文件名是“pclink.cpp”

```
 #include <stdio.h>
#include "MImage.h"
#include<stdlib.h>

#ifdef __cplusplus
extern "C" {
#endif
  int conv(double* data, int x,int y, int z, int len) {
    MImage M;
    //M.MLoadFromArray(data,x,y,z,len);    

    return 0;

  }
#ifdef __cplusplus
}
#endif 
```

我还制作了 .so 和 .o 文件，一切看起来都很好。但是当我在 python 中输入

```
 import numpy as np
import ctypes
import os

pclink = np.ctypeslib.load_library('pclink','.') 
```

这是我收到的信息

```
Traceback (most recent call last):
  File "<pyshell#10>", line 1, in <module>
    pclink=np.ctypeslib.load_library('pclink','.')
  File "/usr/lib/python2.7/dist-packages/numpy/ctypeslib.py", line 131, in load_library
    raise exc
OSError: /home/lucy94/pclink.so: undefined symbol: _ZN6MImage14MLoadFromArrayEPdiiii 
```

以前我试图将 c++ 和 python 与一个没有任何类的简单程序链接，它工作正常。似乎问题是当我尝试从另一个类定义对象时。所以有人知道如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T01:54:10.347

看起来您构建的 .so 文件依赖于另一个包含 MImage 内容的可共享库。我不认为 Python [ctypes](http://docs.python.org/py3k/library/ctypes.html)会自动为您加载依赖库，您必须自己将它们拉入。您需要指定 RTLD_GLOBAL 标志，以便该 MImage 库中的符号在加载时可用于 pclink.so。

# python - 将 PyQT 用于命令提示符 (Python) 程序

> ID：10641055
> 
> 赞同：-1
> 
> 时间：2012-05-17T18:02:07.003
> 
> 标签：python, pyqt

我该怎么做呢？任何建议都会有所帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T03:59:39.457

用一个[`QtGui.QCoreApplication()`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qcoreapplication.html)

它适用于不需要使用 QWidgets 的控制台应用程序。只需像创建普通应用程序一样创建它，使用 QObjects、信号和插槽正常创建应用程序的其余部分。正常启动事件循环。

当您编写基于控制台的应用程序时，除了您不能使用 QWidgets 之外，没有什么真正改变。

```
from PyQt4 import QtCore

class Hello(QtCore.QObject):

    def __init__(self, msg):
        super(Hello, self).__init__()
        self.msg = msg
        self.timer = QtCore.QTimer(self)
        self.timer.timeout.connect(self.say)
        self.timer.start(500)
        self.i = 0

    def say(self):
        print self.msg
        self.i += 1
        if self.i > 5:
            QtCore.QCoreApplication.instance().quit()

if __name__ == "__main__":
    import sys
    app = QtCore.QCoreApplication(sys.argv)
    hello = Hello("Hello World!")
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T23:21:53.113

通过打开文件选择器对话框 (QFileDialog) 来启动程序。

# f# - F# 中未键入/键入的代码引用与宏卫生之间是否存在关系？

> ID：10641057
> 
> 赞同：5
> 
> 时间：2012-05-17T18:02:19.863
> 
> 标签：f#, programming-languages, macros, lisp, metaprogramming

我想知道 F# 中无类型/有类型的代码引用与宏系统的卫生之间是否存在关系。他们是否用各自的语言解决了相同的问题，或者他们是不同的关注点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T21:38:14.660

The meta-programming aspect is the only similarity, and even in that regard, there is a big difference. You can think of the macro's transformer as a function from syntax to syntax like you can manipulate quotations, but the transformers are globally coordinated so that names used as binders follow a specific protocol:

1) Binders may not be the same as any free name in input to the macro (unless you use an unhygienic escape hatch)

2) Names bound in a macro definition's context that are free in the macro's expansion must point to the same thing at macro use time. (this needs global coordination)

Choices for names are made so that expansion does not fail if you used the wrong name (unless it turns out that name is unbound).

Transformers of typed quotations do not have this definition time context idea. You manipulate quotations to form a program that does not refer to any names in your program. They are not meant to provide a syntactic abstraction mechanism. Arbitrary shapes of syntax? Nope. It all has to be core AST shapes.

Open code in typed quotation systems can be closed with anything that fits the type structure of the expected context - there is no coordinated composition of several open components into a coherent structure.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T18:12:44.677

引用是元编程的一种形式。它们允许您以编程方式操作抽象语法树，然后可以将其拼接成代码并进行评估。

类型引用将 AST 的具体类型嵌入到宿主语言的类型系统中，因此它们确保您不会生成类型错误的代码片段。未键入的报价不提供这种保证（它可能会因运行时错误而失败）。

顺便说一句，键入的引文与 Template Haskell quasiquotations 非常相似。

类 Lisp 语言中的 Hygenic 宏是相关的，因为它们的存在是为了支持元编程。然而，卫生是为了简单的名称捕获混淆，键入准引号已经避免（以及更多）。

所以是的，它们是相似的，因为它们分别是有类型和无类型语言的元编程机制。类型化的准引号和卫生宏都为完全非类型化、不健全的元编程增加了额外的安全性。他们为程序员提供的保证水平是不同的。键入的引号更严格。

# firefox - Firefox 12.0 和 Selenium 2：不支持本机事件

> ID：10641059
> 
> 赞同：4
> 
> 时间：2012-05-17T18:02:27.487
> 
> 标签：firefox, selenium, automated-tests, selenium-webdriver

使用 webdriver 运行 Selenium 2.21.0 构建时，在 Firefox 12.0 上运行时出现以下错误：

```
org.openqa.selenium.InvalidElementStateException: Cannot perform native interaction: Could not load native events component.
Command duration or timeout: 20.08 seconds
Build info: version: '2.2.1', revision: '16551', time: '2012-04-11 21:42:35'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_26'
Driver info: driver.version: RemoteWebDriver
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:175)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:128)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:459)
    at org.openqa.selenium.remote.ExecuteMethod.execute(ExecuteMethod.java:47)
    at org.openqa.selenium.remote.RemoteMouse.mouseMove(RemoteMouse.java:89)
    at org.openqa.selenium.interactions.internal.MouseAction.moveToLocation(MouseAction.java:31)
    at org.openqa.selenium.interactions.ClickAndHoldAction.perform(ClickAndHoldAction.java:39)
    at org.openqa.selenium.interactions.CompositeAction.perform(CompositeAction.java:32)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:229)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:121)
    at isishelper.ActionHelper.placement_placeSampleOnContainer(ActionHelper.groovy:195)
... 
```

在这种情况下，我的代码如下：

```
List sourceSamples = sourceTable.findElements((By.className("x-grid-row")))
List poolTargets = driver.findElements(By.className("pool-box"))
target = poolTargets[0]    
def source = sourceSamples[0]
// Then drag and drop the sample to target
(new Actions(driver)).dragAndDrop(source, target).perform() 
```

我假设这是缺少功能，因为 Selenium 2.21 在 Firefox 12.0 之前发布，而不是我设置驱动程序时出错？

检查驱动程序属性：

```
driver.getCapabilities().asMap().each { 
             index, value -> println("$index : $value") 
} 
```

> ```
> browserName : firefox
> nativeEvents : false
> takesScreenshot : true
> version : 12.0 
> ```

但是在使用配置文件创建驱动程序时，我得到 nativeEvents = true ：

```
profile.setEnableNativeEvents(true); 
println profile.getProperties()
driver = new FirefoxDriver(profile) 
```

> ```
> [enableNativeEvents:true, 
> class:class org.openqa.selenium.firefox.FirefoxProfile,
> additionalPreferences:org.openqa.selenium.firefox.Preferences@82d37] 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:01:55.483

webdriver 2.21 尚不支持本机事件。根据[变更日志](http://selenium.googlecode.com/svn/trunk/java/CHANGELOG)，目前只有 FF10 和 11 实现了此功能。

我不知道这是否与问题有关，但是在代码的最后一行中，您不应该在调用 perform() 之前调用 build() 吗？（这必须在 Java 中完成）

更多堆栈跟踪可能会有所帮助。您在哪一行收到此错误？您是否尝试过将本机事件显式设置为 false？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:02:01.830

Selenium 2.29.0 发布时支持 FF18（用于原生事件）。这是更新的链接： http: [//selenium.googlecode.com/git/rb/CHANGES](http://selenium.googlecode.com/git/rb/CHANGES)。

可能正在更新到 FF18，selenium-webdriver (2.29.0) 可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:49:21.030

Selenium 2.22.0 已经发布，更新日志说他们现在支持 Firefox 12 中的原生事件。我已经对其进行了测试，它似乎运行良好。

# iphone - 以间隔调用函数，但直到经过一段时间 Iphone

> ID：10641061
> 
> 赞同：0
> 
> 时间：2012-05-17T18:02:35.303
> 
> 标签：iphone, nstimer, scheduler, intervals

我需要在 30 秒内每隔 0.025 秒打一次电话。这是我的 0.025 秒计时器。

```
NSTimer* myTimer = [NSTimer scheduledTimerWithTimeInterval: 0.025 target: self
                    selector: @selector(GetScreen:) userInfo: nil repeats:YES ]; 
```

如何将其限制为 30 秒的持续时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:10:31.170

**如果您试图等到满足某些条件，请不要使用计时器来执行此操作。**使用委托模式、通知/观察者或信号量等。

如果您想在 30 秒后调用一次`GetScreen:`（可能应该按照`getScreen:`正常的 Obj-C 约定），请使用以下命令：

```
[ NSTimer scheduledTimerWithTimeInterval:30.0 target:self selector:@selector( getScreen: ) userInfo:nil repeats:NO ] ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:11:39.667

如果您只想让它持续 30 秒，那么您只需让一个成员变量递增，直到它达到 30 秒，然后您关闭您的计时器：

```
CGFloat timerTotal_;

//initialize it where you create your timer
timerTotal_ = 0.0f;

//every time your GetScreen: is called
timerTotal_+= .025;

if(timerTotal_ > 30)
{
    [myTimer invalidate];
} 
```

# gwt - 来自 gwt 的 java 的 javascript 库

> ID：10641066
> 
> 赞同：0
> 
> 时间：2012-05-17T18:02:43.637
> 
> 标签：gwt

如何将 JavaScript 库添加到 GWT 项目并从 Java 代码调用其函数？
我想使用[node-uuid](https://github.com/broofa/node-uuid)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:45:15.957

[使用JS Overlay Types](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay)将库的函数调用包装在 GWT 中。然后方便地使用生成的 Java 调用并获得完整的 IDE 支持。

# vb.net - CPU 播放器 VB.NET

> ID：10641071
> 
> 赞同：1
> 
> 时间：2012-05-17T18:03:04.357
> 
> 标签：vb.net, game-development, game-ai

所以我正在开发一款扫雷旗游戏，多人版已经搭建完毕，但是单人版还在开发中。重要的是要提到我正在使用 DataGridView，并且我正在应用`r = tab1.CurrentCell.RowIndex + 1`并`c = tab1.CurrentCell.ColumnIndex + 1`查看玩家点击的位置。我想做的是让 AI 在轮到它时单击任何随机单元格，但我该怎么做。有什么想法吗？

最好的问候，乔奥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:28:38.600

你看过这篇文章吗： [创建一个人工智能来玩扫雷](http://www.h2g2.com/approved_entry/A337097)

本文讨论了使用信息数组、假设数组和隐藏数组，如下所示：

*   让我们将保存我们 AI 拥有的信息的数组称为信息数组，将保存假设情况的数组称为假设数组。当然，我们的程序无法立即访问存储地雷位置的数组……我们将其称为隐藏数组。

您可能需要执行以下操作：

1.  有一个信息数组，其中包含有关使用布局的地雷的信息
2.  有一个数组，提供有关玩家选择的位置
3.  根据 1) 和 2) 选择要选择的位置

# c# - 限制仅对一种属性类型使用属性验证 (ValidationAttribute)

> ID：10641072
> 
> 赞同：3
> 
> 时间：2012-05-17T18:03:04.487
> 
> 标签：c#, validationattribute

问题是：如何将验证属性限制为仅用于一种类型？，例如仅 DateTime。

目前我做这个控制方法“IsValid”：

```
protected override ValidationResult IsValid(object value, ValidationContext validationContext)
{
    if (value == null || value.GetType() != typeof(DateTime))
    {
        return ValidationResult.Success;
    }
    ...
} 
```

我想在构造函数中使用这个，但我不知道如何检测它所应用的属性的类型，或者诸如以下的属性：

```
[AttributeUsage(AttributeTargets.Property, ...)]
public class MyValidateDatesAttibute : ValidationAttribute, IClientValidatable
{
   ...
} 
```

它限制了我唯一的属性属性的使用。

谢谢你。

# javascript - LinkedIn 是否在其 iPhone 应用程序中使用了 PhoneGap 或 Trigger.IO？

> ID：10641073
> 
> 赞同：3
> 
> 时间：2012-05-17T18:03:10.300
> 
> 标签：javascript, cordova, backbone.js, linkedin, trigger.io

我一直在阅读所有这些文章，LinkedIn 如何使用 node.js 和backbone.js 来构建他们的移动应用程序。

见这篇文章：http: [//venturebeat.com/2011/08/16/linkedin-node/](http://venturebeat.com/2011/08/16/linkedin-node/)

他们在其中说 LinkedIn 仅使用了 5% 的本地电话功能。另外 95% 是跨平台的 HTML、JS 和 CSS。

我在文章中没有看到任何提到 PhoneGap 或 trigger.io。

那么，linkedin 是如何让他们的移动应用程序只使用 javascript 并访问“5%”的原生 api 的呢？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:44:53.947

实际上，他们使用 websockets 从 JavaScript 到本地层进行通信。

[http://engineering.linkedin.com/mobile/linkedin-ipad-nativeweb-messaging-bridge-and-websockets](http://engineering.linkedin.com/mobile/linkedin-ipad-nativeweb-messaging-bridge-and-websockets)

# sql-server-2008 - SQL Server 2008：案例矩阵？选择性案例？案例协会？

> ID：10641075
> 
> 赞同：0
> 
> 时间：2012-05-17T18:03:19.930
> 
> 标签：sql-server-2008, case, associative-array

在 SQL Server 2008 中，是否有一种简化的方式来匹配 CASE 布尔表达式，当表达式为真时，您想选择的值？

代替

```
CASE
    when item='a' then 'Apple'
    when item='b' then 'Ball'
    when item IN ('c','d') then 'Pet'
    when item !='zz' then 'object'
    else 'Bad_Item' 
```

我想要类似于以下之一的东西。这些当然是伪代码，但想法是使关联更紧密，而不是继续编写更多的 when/then 对

1.  这样的事情存在吗？

    ```
    CASE
        when item ;(=,'a','Apple')
            ;(=,'b','Ball') ;(=,'c' or 'd','Pet')
            ;(!='zz','object') ;'Bad item'
    END 
    ```

2.  这样的事情存在吗？

    ```
    CASE
        when item ;= ('a','b','c' or 'd' : 'Apple','Ball','Pet','Object')
                  ;!= ('zz' : 'Object')
                  ;'Bad item'
    END 
    ```

这些都是伪代码，但只是想知道是否有更快或更简单的东西，或者列出所有要检查的内容，然后是要选择的所有值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:58:14.063

结合简单表达式和搜索表达式的示例`CASE`是：

```
declare @item as VarChar(10) = 'c'

select case @item
  when 'a' then 'Apple' 
  when 'b' then 'Ball'
  else case
    when @item in ( 'c', 'd' ) then 'Pet' 
    when @item != 'zz' then 'object' 
    else 'Bad_Item' end
  end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:14:11.380

没有像你描述的那样的速记。您可以使用@sarwar026 提到的备用 CASE 语法稍微缩短代码，但`<>`他发布的行不起作用。除了相等之外，您不能使用该形式 - 没有不等式，没有使用 between 或 >=/<= 的范围，没有 IN()，甚至没有 null 检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:06:25.767

据我所知，以下工作

```
CASE item
    when 'a' then 'Apple'
    when 'b' then 'Ball'
    when 'c' then 'Pet'
    when 'd' then 'Pet'
    // the next line is not possible, so please discard the next line
    *when  <>'zz' then 'object' // not sure about this syntax*
    else 'Bad_Item'
END 
```

# performance - 活动与业务规则引擎 (BRE) 的 Windows Workflow Foundation 速度

> ID：10641077
> 
> 赞同：0
> 
> 时间：2012-05-17T18:03:28.367
> 
> 标签：performance, workflow-foundation, business-rules

Windows Workflow Foundation 活动的速度有多快？我知道这是一个无法回答的问题，所以让我给你一些背景知识：

该问题需要使用某种类型的业务规则引擎来解决。一次可能有多达 300 条规则需要实施。有些相关，有些不相关。

我们使用了一个便宜的 BRE ( [rulelab.net](http://www.rulelab.net) )，它声称它每秒可以运行超过 1000 条规则，而且它似乎运行得相当快，尽管我们只有少数规则。

我观看并使用了[在工作流中处理数据，](http://msdn.microsoft.com/en-us/netframework/ff803562)并且只有一个 if 语句，它似乎运行得很慢。

总而言之，我对 Microsoft WF 的性能不是很满意，使用传统的 BRE 会更好吗？有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T15:01:03.113

Windows Workflow Foundation 对于许多应用程序来说已经足够快了。在一个简单的 noop 活动的测试中，它每秒执行超过 350K 的操作。当然，您的应用程序将运行实际的业务逻辑，这将花费更长的时间，但显然值得评估。

有关详细信息，请参阅[Windows Workflow Foundation 4 性能](http://msdn.microsoft.com/en-us/library/gg281645.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T15:26:41.727

您的“每秒可以运行超过 1000 条规则”的示例有点奇怪。正常的业务规则引擎在吹嘘其性能时会说“每个时间间隔的事实对象数”。这是因为大多数时候（我在这个行业已经有很长一段时间了）一个系统接收到一个事实对象的集合（一百万或一个），并且需要过滤掉那些没有通过一个或几个规则。基于 RETE 的引擎会因为明显的原因而变慢 - 这就是为什么大多数时候您不需要 RETE 算法。但是即使以您的示例为例，对于可靠的 BRE 来说，这个数字也太低了。通常，您希望引擎每秒执行至少 50 万次规则评估，即使它不缓存规则并且必须在每次迭代时编译每个规则，前提是每个规则都不在外部执行任何操作并且不包含任何昂贵的计算。我不知道 rulelab.net 的内部结构，但速度如此之慢意味着它不会将其规则编译为本机对象，或者它以非常糟糕的方式评估其规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T06:28:50.833

从您的问题来看，您根本不清楚为什么需要工作流/BRE。工作流引擎和规则引擎旨在回答不同的问题/挑战。首先是从业务角度了解您的目标以及您要实现的目标。为什么需要工作流和/或业务规则引擎？您尝试使用 Workflow 和/或 BRE 回答的挑战/需求/要求是什么？从你的问题来看，根本不清楚。
[我有一篇文章向您展示您选择一个而不是另一个的真正原因和时间。](http://blog.flexrule.com/?workflow-engine-or-business-rule-engine)或者有时你最终会同时使用它们。关键是您要求比较两种不同事物的性能。

# html - 使用 Yahoo Pipes 删除表

> ID：10641078
> 
> 赞同：0
> 
> 时间：2012-05-17T18:03:32.370
> 
> 标签：html, joomla, rss, html-table, yahoo-pipes

我正在使用 Yahoo Pipes 导入 RSS 新闻源，它运行良好。我的问题是它有时会导入社交书签。然而，这些都封装在一个表中。那么我的问题是如何使用 Yahoo Pipes 删除表格（从而删除它包含的链接 - 社交书签）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:22:06.400

我使用了一个简单的解决方法：只需隐藏表格、带有社交书签的 div。在您的 CSS 中：

```
div#bookmarks, table#bookmarks2{display:none;visibility:hidden;} 
```

# gwt - JSNI 使用 Long 参数调用 Java 方法

> ID：10641088
> 
> 赞同：1
> 
> 时间：2012-05-17T18:04:13.373
> 
> 标签：gwt, jsni

我需要从 Javascript 调用 Java 方法。所以我定义了方法：

```
private native void registerMethod() /*-{
    var self = this;
    $wnd.test = function(longParam) {
        self.@mypackage.HomeView::test(Ljava/lang/Long;)(longParam);
    };
}-*/; 
```

Java方法：

```
private void test(Long longParam) {
    GWT.log("Call to test with longParam =  " + longParam);
} 
```

JS调用：

```
public static native void paypalClose() /*-{
    $wnd.alert(top.test);
    top.test(10);
    top.dgFlow.closeFlow();
    top.close();
}-*/; 
```

警报显示 Javascript 函数定义。如果我打电话`top.test()`，它可以工作，但没有传递任何参数。但是，如果我打电话`top.test(10)`，我会得到一个空警报窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:54:42.647

您的方法除外 a `java.lang.Long`，而不是 a `long`，因此您必须创建`Long`. 您可以使用`@java.lang.Long::new`or `@java.lang.Long::valueOf`，但您不能`long`在 JSNI 中使用 s ：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#important](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#important)

因为 JavaScript 数字与 Java 严格等价`double`，所以应该使用`double`or`java.lang.Double`作为参数。一旦进入 Java 世界，您可以根据需要将 double 类型转换为 long，但不能来自/在 JSNI 中。

# javascript - CSS 规则对象

> ID：10641091
> 
> 赞同：5
> 
> 时间：2012-05-17T18:04:21.917
> 
> 标签：javascript, css

根据这个站点[externalcss3](http://www.javascriptkit.com/dhtmltutors/externalcss3.shtml) styleSheet 对象的 CSS Rule 对象允许您访问样式表的各个规则。

所以如果我尝试在 stackoverflow 页面上运行这段代码（*），使用 javascript 控制台，我希望看到一些 CSS 规则写在这个页面[http://cdn.sstatic.net/stackoverflow/all.css?v =04e0337352b3](http://cdn.sstatic.net/stackoverflow/all.css?v=04e0337352b3)。

(*)

```
var mysheet=document.styleSheets[0]
var myrules=mysheet.cssRules? mysheet.cssRules: mysheet.rules
for (i=0; i<myrules.length; i++) {
     console.log(myrules[i].selectorText.toLowerCase());
} 
```

实际上，console.log 的结果与我所期望的有所不同：

```
object[type="application/x-shockwave-flash"], object[type="application/futuresplash"], object[data*=".swf"], object[src*=".swf"], embed[type="application/x-shockwave-flash"], embed[type="application/futuresplash"], embed[src*=".swf"] 
```

我错过了什么？对不起我的无知和你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:50:57.640

如果它们来自同一个域，您似乎只能访问 CSS 文件中的规则。

阅读本帖：[**Reading the rules of a cross domain CSS file in DOM**](https://stackoverflow.com/questions/4122265/reading-the-rules-of-a-cross-domain-css-file-in-dom)

# javascript - jquery 插件使用 Vimeo Froogaloop seeTo 跳转

> ID：10641094
> 
> 赞同：2
> 
> 时间：2012-05-17T18:04:27.357
> 
> 标签：javascript, jquery, jquery-plugins, vimeo, froogaloop

我正在开发一个交互式脚本插件，使用 froogaloop 作为依赖项。我几乎完全按照我想要的方式拥有它，但是我遇到了一个问题，当您单击一个句子时，视频 seekTo() 会转到正确的位置，然后向前跳几秒钟。跳转似乎与单击的第一个跨度标签的时间相关。

注意：如果您先按播放然后单击句子，则不会发生单击时间错误。但是，如果您按下暂停，然后单击一个句子或单击一个完全停止的句子，它确实会再次出现。

希望这会有所帮助，一旦我可以修复此错误，我将发布此插件。我是ui

谢谢！

[http://jsfiddle.net/r8FT2/1/](http://jsfiddle.net/r8FT2/1/)

# security - 是否有任何理由不在通过 http 提供的页面上提供 https 内容？

> ID：10641096
> 
> 赞同：13
> 
> 时间：2012-05-17T18:04:29.043
> 
> 标签：security, https

我目前在只能通过 https 访问的域上提供图像内容。在通过 http 访问的页面上使用 https 路径提供图像的缺点是什么？是否有任何缓存注意事项？我正在使用 HttpRuntime.Cache 对象来存储从数据库中检索的绝对图像路径。

*   如果图像只能通过 https 访问，我认为使用协议相关的 URL 没有任何好处？

*   是否有令人信服的理由为什么我应该设置一个单独的虚拟目录来通过 http 提供图像内容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T18:32:23.763

*   如果在 HTTP 页面中通过 HTTPS 提供的内容不是特别敏感，并且可以通过 HTTP 提供同样的服务，则没有缺点（可能是一些性能问题，[不一定很多](https://stackoverflow.com/a/548042/372643)，并且缺少缓存，具体取决于您的服务器的配置方式：您可以缓存一些 HTTPS 内容）。

*   如果 HTTPS 上的内容服务器足够敏感以激发 HTTPS 的使用，那么这确实是一种不好的做法。

    检查 HTTPS 是否被正确使用和使用完全是客户端及其用户的责任（这就是为什么[从 HTTP 到 HTTPS 的自动重定向只是部分有用](https://webmasters.stackexchange.com/a/28443/11628)的原因，例如）。尽管其中一些与证书验证的技术有关，但 HTTPS 提供的许多安全性来自以下事实：用户：

    1.  期望使用 HTTPS（否则它们很容易被降级），
    2.  能够验证证书的有效性：绿色/蓝色条，对应于他们期望的主机名。

    从技术角度来看，第一点可以通过 HTTP 严格传输安全来解决。

    第二个*需要*使用交互。如果您访问您银行的网站，它不仅必须是具有有效证书的网站，而且您还应该检查它是否确实是您银行的域名，例如。

    在 HTTP 页面中嵌入 HTTPS 内容会破坏这一点，因为用户无法检查正在使用哪个站点，而实际上根本就使用了 HTTPS。在某种程度上，在 HTTPS 页面中嵌入来自第三方的 HTTPS 内容也会出现这个问题（这是[3-D Secure](http://en.wikipedia.org/wiki/3-D_Secure)的问题之一，它很可能使用 HTTPS 提供服务，但使用 iframe 并不能确定哪个站点实际上是使用可见的。）

# vb.net - vb.net 读取带有文本限定符的分隔文件

> ID：10641099
> 
> 赞同：1
> 
> 时间：2012-05-17T18:04:41.640
> 
> 标签：vb.net, text-files

vb.net 中是否有一个 set 函数允许您读取带有文本限定符的分隔文件？过去我使用了 split 命令，但这不允许您考虑文本限定符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:06:27.867

[TextFieldParser 类](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)旨在直接处理此问题，前提是文本限定符是引号（请参阅[HasFieldsEnclosedInQuotes](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.hasfieldsenclosedinquotes.aspx)选项）。

# ruby - curl 从命令行运行，但不在 ruby 脚本中

> ID：10641110
> 
> 赞同：2
> 
> 时间：2012-05-17T18:05:21.797
> 
> 标签：ruby, windows, curl

以下命令（及其变体）在 mac 的终端中运行正常，在 mac 上执行的 ruby​​ 程序中运行正常，直接在 windows 命令提示符下运行正常，但是当我尝试在其中运行时失败并出现解析错误Windows 上的 ruby​​ 文件。

```
curl -u"user:pwd" -d"{\"name\":\"new_repo_beepo\"}" https://api.github.com/user/repos --insecure 
```

我试过用反引号、%x() 和 system. 我也尝试过替换字符串和 json'ing 片段，但没有任何运气。据我所知，故障点在该`-d"{\"name\":\"repo_name\"}"`部分中，但这只是在没有它的情况下尝试命令。无论如何，在 ruby​​ 中 Windows 上命令的每个变体中，我都会收到 JSON 解析错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:45:39.600

您是否尝试过使用[rest-client](https://github.com/archiloque/rest-client)？

它是一颗宝石，效果很好。它可能比使用`system()`or更好`%x()`，而且绝对更安全（您可以在其上注入恶意 bash 命令，`system()`因此需要谨慎使用）。

使用起来非常简单。只需安装 gem 并要求它成为您的 ruby​​ 文件。

注意：如果使用 Rails，只需将其添加到您的 Gemfile（无需在每个文件中都需要它）。

```
require 'rest_client'

RestClient.get 'https://api.github.com/user/repos', {params: {id: 50, foo: 'bar'}} 
```

您还可以为`--insecure`ssl 使用一些参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:22:34.040

这似乎是 ruby​​ 用于在 Windows 上运行命令的 shell 机制的解析/引用问题。您是否尝试过系统的标记化形式，例如：

```
system('curl', '-u"user:pwd"', '-d"{"name":"new_repo_beepo"}"', 'https://api.github.com/user/repos', '--insecure') 
```

在 posix 上，它将指定的 arg 向量直接发送到执行程序，而不会让 shell 妨碍；可能相同的语义适用于 Windows。

您不需要执行 curl 来执行此操作，因为 ruby​​ 具有 stdlib Net::HTTP。在评论中你提到你在 jruby 下这个模块有问题，但是我们这里有 jruby 服务，可以很好地执行 http[s] 请求，所以你可以尝试发布一个问题来解决你在使用 jruby 和本机 http 客户端时遇到的具体问题库。

# python - Python串行写入和套接字发送命令是否阻塞？

> ID：10641111
> 
> 赞同：0
> 
> 时间：2012-05-17T18:05:27.377
> 
> 标签：python

我的 python SocketServer 应用程序遇到了一个问题，它似乎间歇性地阻塞了一些线程。我猜这可能是因为网络中断，并且写入缓冲区以某种方式溢出，之后写入被阻止。

这些是我的问题 1）当我在串行端口上进行写入并且写入缓冲区已满时会发生什么？2）当套接字发送缓冲区已满时，发送会阻塞，直到缓冲区中有空间可以写入？

我的 Socket 服务器是非阻塞的，但我想知道在缓冲区溢出的情况下会发生什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:09:20.323

我不清楚你从你的帖子中到底经历了什么。您可能会考虑重新阅读它并查看是否可以进行编辑以使其清晰。

众所周知，使用 SocketServer 的东西并不健壮，使用 pyserial 进行双向通信可能会出现问题。对于并发（网络和串行），我可能会使用[twisted](http://twistedmatrix.com)，它可以更可靠和可调试。

# c++ - 如何从给定位置开始用另一个字符串覆盖一个字符串的一部分？

> ID：10641114
> 
> 赞同：0
> 
> 时间：2012-05-17T18:05:34.633
> 
> 标签：c++, string

我的意思是在编辑器中打开插入键的方式。

所以有这样的字符串：

```
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

效果将是：

```
~~~~~~~~~~Hello!~~~~~~~~~~~~~~~~~~ 
```

那就是不改变字符串的长度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:09:36.780

`std::string`使用的成员函数的几个重载之一来覆盖字符串的一部分[`replace`](http://www.cplusplus.com/reference/string/string/replace/)，例如：

```
 string str = "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~";
    string rep = "Hello!";
    cout << str.replace(5, rep.size(), rep) << endl; 
```

[你可以在 ideone [link]](http://ideone.com/Gzb60)上玩这个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:49:13.987

最简单的解决方案可能是使用`std::copy`适当的迭代器：

```
std::copy( newText.begin(), newText.end(), str.begin() + n ); 
```

只要确保目标字符串足够大。

# facebook - 链接回 facebook 标签 url

> ID：10641117
> 
> 赞同：0
> 
> 时间：2012-05-17T18:05:38.967
> 
> 标签：facebook, facebook-graph-api, facebook-like, zen-cart

我在我的 zencart 产品页面中添加了一个代码，该代码集成到了 facebook 选项卡中，以便用户可以“喜欢”产品，并将其与产品图片和返回产品的链接一起发布在他们的墙上（我复制了本网站的代码：http: [//www.navspan.com/ecommerce/facebook-like-twitter-google-zen-cart.htm#comment-305](http://www.navspan.com/ecommerce/facebook-like-twitter-google-zen-cart.htm#comment-305)）。

问题是返回产品的链接进入网站，但不在 facebook iframe（即选项卡）内......它进入我的托管帐户，我在网站上设置了正确的产品链接......但同样不在facebook内......

我希望它留在 facebook 中的两个原因是：首先，该网站的样式是在 iframe 中，并且在外部看起来很破碎；其次，我希望用户在他们在 facebook 上的活动和在 fanpages 选项卡上购买产品之间切换无缝...所以这是我不知道如何修改的代码：

```
<link rel="image_src" href="<?php echo "http://" . $_SERVER['HTTP_HOST'] . "/images/" . $products_image; ?>" /> 
```

我可以将“http://”替换为唯一的 Facebook 粉丝专页网址吗？但我不知道如何让粉丝页面 url 直接转到正确的产品...

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:00:40.390

要链接到 Facebook 应用程序中的其他页面，您的 URL 需要如下所示：

```
 http://facebook.com/YOUR_PAGE/YOUR_APP?app_data=UNIQUE_CONTENT_STRING 
```

每当 Facebook 请求页面时，此`app_data`数据和其他几条数据都会发布到您的服务器。您需要在您的终端创建一个处理程序来解码[signed_request](https://developers.facebook.com/docs/authentication/signed_request/)从中提取字符串`app_data`，然后在后端进行适当的查询以向您的用户显示正确的信息。

我发现[这个例子](http://labs.thesedays.com/blog/2011/06/23/query-strings-for-facebook-page-tabs/)可能会为你指明正确的方向。

我对 ZenCart 不太熟悉，但这看起来将是一个相当繁重的 hack。花一些时间寻找可以为您执行此操作的 Zen Cart 插件绝对是值得的。

如果你打算自己做，你需要在你的一个 url`url_encode`之后出现的所有内容，并将其传递给. 因此，要链接到显示您的[Queen Collar Necklace](http://firetreegraphics.com/zencart1/index.php?main_page=product_info&cPath=1_13&products_id=2&zenid=2e0d1920f964cc9887f74ea0c9b8903c#.T7VEZsXi1j1)的页面，您的 URL 将如下所示：`?``app_data`

```
 http://www.facebook.com/TracyLoganDesigns/app_422210754456200?app_data=main_page%3Dproduct_info%26cPath%3D1_13%26products_id%3D2%26zenid%3D2e0d1920f964cc9887f74ea0c9b8903c%23.T7VEZsXi1j1 
```

祝你好运。

# javascript - 无法订阅 onClick 事件

> ID：10641118
> 
> 赞同：1
> 
> 时间：2012-05-17T18:05:39.170
> 
> 标签：javascript, backbone.js, twitter-bootstrap

我有某种巫师。我尝试从 json 自动生成表。我想在用户点击表格行后进入下一步。但我无法订阅点击事件。没有事件发生。我可以订阅行点击吗？

```
 //table element view class
    var ObjectsTableView = Backbone.View.extend({
        tagName: 'tr',
        id: 'table-item',
        events:{
//no one works
            'click tr' : 'onClick',
            'click th' : 'onClick',
            'click #some' : 'onClick'
        },
        //configure underscore template
        template: _.template('<th id="some"><%= f1 %></th><th><%= f2 %></th><th><%= f3 %></th>'),    
        onClick: function(){
            alert("click");
        },
        render: function(){
            //use template and assign to html
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        }
    }); 
```

ObjectsTableView 在另一个视图中插入 DOM。像这样在 DOM 中出现：

```
<table class="table table-striped">
    <thead>
      <tr>
       <th>F1</th>
       <th>F2</th>
       <th>F3</th>
      </tr>
    </thead>
    <tbody>
       <tr id="table-item">
       <th id="some">f1</th>
       <th>f2</th>
       <th>f3</th>
      </tr>
     </tbody>
   </table> 
```

但是单击表格行不会引发事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:25:33.380

我认为您的问题在于您如何使用`id`和`tagName`. 当您指定[`id`、`tagName`、`className`或`attributes`properties](http://documentcloud.github.com/backbone/#View-el)时：

> `this.el`如果指定，则从视图的`tagName`、和属性创建。如果不是，则为空。`className``id``attributes``el``div`

因此，Backbone 将在视图中创建`<tr id="table-item"></tr>`您`this.el`的内容，但您不会将其插入到 DOM 的任何地方。您需要执行以下操作：

```
$('table').append(v.render().el); 
```

某个地方可以让您查看`el`DOM，然后您可以只使用一个`click`没有选择器的事件：

```
events: {
    'click': 'onClick'
} 
```

演示（请打开您的控制台）：http: [//jsfiddle.net/ambiguous/nLTGv/](http://jsfiddle.net/ambiguous/nLTGv/)

如果您已经`<tr id="table-item">`在 DOM 中有一个，那么您希望[`el`](http://documentcloud.github.com/backbone/#View-el)在您的视图定义中使用一个简单的无选择器`click`事件：

```
var ObjectsTableView = Backbone.View.extend({
    el: '#table-item',
    events: {
        'click': 'onClick'
    },
    //... 
```

那么你`this.el`将`#table-item`是已经在 DOM 中的那个。

演示：http: [//jsfiddle.net/ambiguous/7RYBJ/](http://jsfiddle.net/ambiguous/7RYBJ/)

# ruby-on-rails - Rufus 调度程序未运行

> ID：10641122
> 
> 赞同：1
> 
> 时间：2012-05-17T18:06:15.127
> 
> 标签：ruby-on-rails, cron, rufus-scheduler

我想用 gem rufus-scheduler 做一些简单的事情： [https ://github.com/jmettraux/rufus-scheduler](https://github.com/jmettraux/rufus-scheduler)

但是，我无法让它工作。

我有一个常规的 Rails 应用程序。我创建了一个 .rb 文件：

```
# test_rufus_scheduler.rb
require 'rubygems'
require 'rufus/scheduler'

scheduler = Rufus::Scheduler.start_new

scheduler.in '1s' do
  puts "hello world"
end 
```

然后，当我尝试 ruby​​ test_rufus_scheduler.rb 时，什么也没有发生。我做对了吗？gem 列表显示 rufus 调度程序。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:09:38.550

如果您的脚本立即退出，请尝试添加

`scheduler.join`

在末尾。请注意，单独运行脚本和通过 rails 运行脚本是不同的。有关详细信息，请参阅[自述](https://github.com/jmettraux/rufus-scheduler#schedulerjoin)文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T11:24:37.953

将以下行添加到您的 apache2 配置并重新启动您的 apache2 服务器

```
RailsAppSpawnerIdleTime 0
PassengerMinInstances 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-22T10:35:22.097

[在这里](https://richonrails.com/articles/background-tasks-with-rufus-scheduler)找到了解决方案（这也与[Ajet](https://stackoverflow.com/users/1589532/ajet)上面的回答同步）。

> 生产服务器需要一些额外的设置。在大多数生产 Web 服务器上，空闲的 Ruby 进程都会被杀死。为了让 Rufus 工作，您需要阻止这种情况发生。对于Passenger/Nginx，您可以将下面的代码复制到您网站的**nginx.conf**配置文件中，在**passenger_enabled on 行之后；**.

**nginx.conf：**

```
passenger_spawn_method direct;
passenger_min_instances 1;
passenger_pool_idle_time 0; 
```

# ember.js - Ember.js 有没有办法创建自定义#ID .class 名称而不是默认的 ember？

> ID：10641123
> 
> 赞同：4
> 
> 时间：2012-05-17T18:06:15.243
> 
> 标签：ember.js

有没有办法传入自定义类或 id 命名空间而不是默认的 ember？

例子：转动这个

```
 <body class="ember-application">
    <div class="ember-view"></div>
    </body> 
```

进入：

```
 <body class="myapp-application">
    <div class="myapp-view"></div>
    </body> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T22:07:47.080

您可以传入**自定义 id**，而不是默认的“ember-[numview]”。

只需设置类的`elementId`字段`Ember.View`

```
var mainView = Ember.View.create({
  tagName: "section",
  elementId: "main"
}) 
```

将产生：

```
<section id="main" class="ember-view">
</section> 
```

要删除/修改默认的 className“ember-view”，您需要在 View 类的 PrototypeMixin 上找到并编辑 classNames 字段...

```
Em.View.PrototypeMixin.mixins[2].properties.classNames = []

var mainView = Ember.View.create({
  tagName: "section",
  elementId: "main"
}) 
```

将产生：

```
<section id="main">
</section> 
```

不知道副作用...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T19:10:44.193

不。

“ember-application”在 Ember.EventDispatcher#setup 中硬编码，“ember-view”同样是 Ember.View 的 classNames 属性中的静态字符串。因为 'classNames' 是一个连接属性（这意味着子类组合它们的值，而不是替换它们），您可以将 'myapp-view' 添加到 classNames 数组，但不能（轻松）从超类中删除值。

# c# - LINQ 在简单操作中的效率

> ID：10641128
> 
> 赞同：4
> 
> 时间：2012-05-17T18:06:27.000
> 
> 标签：c#, performance, linq

我最近发现了 LINQ，我发现它使用起来非常有趣。目前我有以下功能，我不确定它是否会更高效，毕竟产生相同的输出。

你能告诉我你对此的看法吗？

该函数以一种非常简单的方式简单地删除标点符号：

```
private static byte[] FilterText(byte[] arr)
    {
        List<byte> filteredBytes = new List<byte>();
        int j = 0; //index for filteredArray

        for (int i = 0; i < arr.Length; i++)
        {
            if ((arr[i] >= 65 && arr[i] <= 90) || (arr[i] >= 97 && arr[i] <= 122) || arr[i] == 10 || arr[i] == 13 || arr[i] == 32)
            {
                filteredBytes.Insert(j, arr[i]) ;
                j++;
            }
        }

        //return the filtered content of the buffer
        return filteredBytes.ToArray();
    } 
```

LINQ 替代方案：

```
 private static byte [] FilterText2(byte[] arr)
    {
        var x = from a in arr
                where ((a >= 65 && a <= 90) || (a >= 97 && a <= 122) || a == 10 || a == 13 || a == 32)
                select a;

        return x.ToArray();
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T18:08:04.213

LINQ 通常比简单循环和过程代码效率略低，但差异通常很小，而且简洁易读通常值得将简单的投影和过滤转换为 LINQ。

如果性能真的很重要，请测量它并自行决定 LINQ 代码的性能是否足够。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T18:27:17.367

螺丝性能，LINQ 非常棒，正因为如此：

```
private static bool IsAccepted(byte b)
{
    return (65 <= b && b <= 90) || 
           (97 <= b && b <= 122) || 
           b == 10 || b == 13 || b == 32;
}

arr.Where(IsAccepted).ToArray(); // equivalent to FilterText(arr) 
```

即你不写如何，而只是写什么。此外，它与您提出的另一种方法一样快（慢）：`Where(..)`被懒惰地评估，`ToArray()`其中内部创建一个 List 并将其转换为 Array iirc。

顺便说一句，字符串在 C# 中是 Unicode，所以不要用它来做一些简单的字符串格式化（有更好的替代方案）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T18:14:38.230

LinQ 非常适合让事情变得简单。就性能而言，如果您开始对列表、数组等进行大量转换，这确实会成为一个问题。

```
MyObject.where(...).ToList().something().ToList().somethingelse.ToList(); 
```

这是众所周知的杀手锏，尽量晚点转换成最终名单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T18:28:37.707

在大多数情况下，我同意@MarkByers。Linq 的效率将低于过程代码。一般来说，不足之处可以追溯到表达式树的编译。尽管如此，在 99% 的情况下，可读性和时间改进是值得的。当您遇到性能问题时，进行基准测试、修改和重新基准测试。

话虽如此，LINQ 与 lambda 和匿名委托密切相关。这些功能经常被谈论，好像它们是同一个东西。在某些**情况下**，这些构造**可能**比过程代码更快。 *看起来*您的示例可能是其中一种情况。我会重写你的代码如下：

```
private static byte [] FilterText2(byte[] arr) {

   return arr.Where( a=> (a >= 65 && a <= 90)  || 
                         (a >= 97 && a <= 122) || 
                          a == 10 || a == 13   || a == 32
                  ).ToArray();
} 
```

同样，为您的特定场景做一些基准测试，如 YMMV。在什么场景下哪个速度更快，已经泼了很多墨水。这是一些墨水：

*   [http://blog.jerrynixon.com/2010/02/revisiting-c-loop-performance.html](http://blog.jerrynixon.com/2010/02/revisiting-c-loop-performance.html)
*   [http://blog.thijssen.ch/2009/02/linq-vs-lambda-vs-loop-performance-test.html](http://blog.thijssen.ch/2009/02/linq-vs-lambda-vs-loop-performance-test.html)
*   [在 .NET 中，哪个循环运行得更快，“for”还是“foreach”？](https://stackoverflow.com/questions/365615/in-net-which-loop-runs-faster-for-or-foreach)
*   [何时不使用 lambda 表达式](https://stackoverflow.com/questions/672918/when-not-to-use-lambda-expressions)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T20:27:40.967

[许多 LINQ 语句很容易并行化。](http://msdn.microsoft.com/en-us/library/dd460688.aspx) 只需添加`AsParallel()`到查询的开头。`AsOrdered()`如果您希望以牺牲一些性能为代价来保留原始订单，您也可以添加。例如，以下 LINQ 语句：

```
arr.Where(IsAccepted).ToArray(); 
```

可以写成：

```
arr.AsParallel().AsOrdered().Where(IsAccepted).ToArray(); 
```

你只需要确保[它的开销不会超过它的好处](http://msdn.microsoft.com/en-us/library/dd997399.aspx "PLINQ 性能")：

```
var queryA = from num in numberList.AsParallel()
             select ExpensiveFunction(num); //good for PLINQ

var queryB = from num in numberList.AsParallel()
             where num % 2 > 0
             select num; //not as good for PLINQ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-03T11:09:02.530

每个好的书面命令式代码都会比好的书面声明式代码更节省时间和空间，因为必须将声明式代码转换为命令式代码（除非你拥有一台 Prolog 机器......你可能没有，因为你在问。网 ：-） ）。

但是，如果您可以使用 LINQ 以比使用循环更简单、更易读的方式解决问题，那么它是值得的。当你看到类似的东西

```
var actualPrices = allPrices
    .Where(price => price.ValidFrom <= today && price.ValidTo >= today)
    .Select(price => price.PriceInUSD)
    .ToList(); 
```

它是“一条线”，第一眼就很明显它在做什么。声明一个新集合，遍历旧集合，写 if 并向新集合添加一些东西不是。因此，如果您不想保存每一毫秒（您可能不想保存，因为您使用的是.Net 而不是带有嵌入式 ASM 的 C），这是一个胜利。并且 LINQ 是高度优化的 - 有更多的代码库 - 一个用于集合，一个用于 XML，一个用于 SQL ...，因此它通常不会慢很多。没有理由不使用它。

一些 LINQ 表达式可以使用 Parallel LINQ 轻松并行化，几乎是“免费”的（= 没有更多代码，但并行开销仍然存在，所以算上它）。

# ios - 这是 CA 动画排序缝合

> ID：10641131
> 
> 赞同：0
> 
> 时间：2012-05-17T18:06:34.210
> 
> 标签：ios, core-animation

我问了一个问题（[动画有时不会发生](https://stackoverflow.com/questions/10056619/animation-sometimes-doesnt-occur)) 前段时间关于一个动画，显然，有时不会发生。我没有得到任何有用的答案。所以，经过大量的研究和玩耍，我发现有时应该第二个发生的动画，有时会先发生。另一种确实发生了，只是没有在预期发生的时候发生。两个动画分别是“翻转”和“消失”。例如，有四个图块。当触摸一个瓷砖时，它会翻转。当第二个瓷砖被触摸时，它应该翻转。如果瓷砖匹配，两个瓷砖都消失了。如果它们不匹配，则瓷砖会翻转回来。就我所知，翻转动画总是正确地发生。换句话说 - 第一个瓷砖被翻转。第二块瓷砖被翻转。瓷砖不匹配。两个瓷砖翻转。至于瓷砖什么时候匹配，第一个瓷砖正确翻转。有时第二个图块正确翻转然后它们都消失了（旋转和收缩动画组）。有时第二块瓷砖没有正确翻转，但它们都在第二块瓷砖翻转之前消失了。这是不可接受的。

这是我迄今为止尝试过的 - 我尝试过 NSThread 暂停。这不起作用，因为整个线程都被暂停了，这并没有让没有发生的动画发生。我查看了 NSTimer - 但是被调用的方法有两个参数，这意味着我必须执行 NSInvocation 并且我还没有弄清楚 - 并且不确定它是否会起作用。现在，我已经放置了一个标志来标记翻转动画何时完成。如果这种方法最终有效，我必须弄清楚如何在不增加完成计数的情况下反复翻转单个图块。无论如何 - 使用这种方法，我需要弄清楚如何告诉我的第二个动画等到第一个动画完成后再运行。

理想情况下，我希望能够告诉消失动画始终等到第二个图块完全翻转后再提交。

我想不通的是a）为什么有时动画以正确的顺序发生，有时却没有，以及b）当动画试图不以正确的顺序发生时，如何强制它们以正确的顺序发生命令。

不太确定哪些代码会对您有所帮助。问，我会提供！

这是调用动画的代码：

```
-(void)buttonPressed: (UIButton*)buttoni 
{
    [self flipTiles:(UIButton *)buttoni];
    [self twoTilesFlipped];
} 
```

显然，首先调用了flipTiles 动画。我不明白为什么有时直到在 twoTilesFlipped 中调用的代码之后才调用它。我认为编程是关于逻辑的，这对我来说没有逻辑意义。哦，我只是想到了......我将在这段代码中添加一个 NSTimer 延迟 - 也许这会成功！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:43:05.173

这似乎成功了。我现在显然需要修复一些调整，但至少每次都能正常工作。

这是我添加的：

```
[NSTimer scheduledTimerWithTimeInterval:2.0
                                     target:self
                                   selector:@selector(twoTilesFlipped)
                                   userInfo:nil
                                    repeats:NO]; 
```

所以该方法的最终代码是：

```
-(void)buttonPressed: (UIButton*)buttoni 
{
    [self flipTiles:(UIButton *)buttoni];
    [NSTimer scheduledTimerWithTimeInterval:2.0
                                     target:self
                                   selector:@selector(twoTilesFlipped)
                                   userInfo:nil
                                    repeats:NO];
} 
```

# android - OnTap 在 MapView 中的 PinPoint

> ID：10641133
> 
> 赞同：0
> 
> 时间：2012-05-17T18:06:44.010
> 
> 标签：android, google-maps, android-mapview

我有一个地图视图，可以在其中添加图钉。

这是 CustomPinPoint 类：

```
 public class CustomPinpoint extends ItemizedOverlay<OverlayItem>{

private ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>();
private Context c;

public CustomPinpoint(Drawable defaultMarker) {
    super(boundCenter(defaultMarker));
    // TODO Auto-generated constructor stub
}
public CustomPinpoint(Drawable m, Context context) {
    // TODO Auto-generated constructor stub
    this(m);
    c = context;
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return pinpoints.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return pinpoints.size();
}

public void insertPinpoint(OverlayItem item){
    pinpoints.add(item);
    this.populate();
}
  } 
```

这就是我添加引脚的方式：

```
 Touchy t = new Touchy();
   overlayList = map.getOverlays();
   overlayList.add(t);
   compass = new MyLocationOverlay(Map.this, map);
   overlayList.add(compass);
   controller = map.getController();
   OverlayItem overlayItem = new OverlayItem(ourLocation, "What's up", "2nd String");
   CustomPinpoint custom = new CustomPinpoint(d, Map.this);
   custom.insertPinpoint(overlayItem);
   overlayList.add(custom); 
```

一切都很好，但我不知道当我点击图钉时如何让气球（或其他类）出现。我有一个包含每个引脚描述的数据库，因此我需要为每次单击引脚显示描述。

# c# - 在 Silverlight 中使用 Web 服务进行自定义验证

> ID：10641137
> 
> 赞同：1
> 
> 时间：2012-05-17T18:06:49.620
> 
> 标签：c#, wcf, silverlight

我正在尝试使用带有自定义验证器的验证注释来验证文本框输入（在 Silverlight 中），该验证器应该验证服务器端的输入。我的问题是 Web 服务调用是异步的，所以我无法返回验证结果，因为验证方法在客户端是同步的。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:27:10.973

您应该查看 INotifyDataErrorInfo。这允许异步验证。

以下是一些可能有用的链接：http: [//mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2009/11/18/silverlight-4-rough-notes-binding-with-inotifydataerrorinfo.aspx](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2009/11/18/silverlight-4-rough-notes-binding-with-inotifydataerrorinfo.aspx)

[http://weblogs.asp.net/fredriknormen/archive/2009/11/22/silverlight-4-and-asynchronous-validation-with-inotifydataerrorinfo.aspx](http://weblogs.asp.net/fredriknormen/archive/2009/11/22/silverlight-4-and-asynchronous-validation-with-inotifydataerrorinfo.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:03:49.503

据我所知，Web服务是否异步实现对客户端没有任何影响。对于客户端，它将调用 Web 服务并等待响应。如果没有及时回复，就会有超时。Web 服务是否异步执行无关紧要。

# javascript - 儿童可见性变化时的Div高度过渡

> ID：10641138
> 
> 赞同：2
> 
> 时间：2012-05-17T18:06:50.370
> 
> 标签：javascript, jquery, css, height

```
<div id='parent'>
    <div class='children'></div>
    <div class='children'></div>
    <div class='children'></div>
    <div class='children'></div>
</div> 
```

以编程方式显示或隐藏子 div 会改变父元素的高度。如何动画化`#parent`高度的变化？我尝试使用 css 转换属性，但它没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:09:24.737

而不是使用`.hide()`和动画，它会产生一个很好的效果而不是那种摇晃的效果。`.show()``slideUp()``slideDown()`

**编辑：**添加>> [**DEMO**](http://jsfiddle.net/skram/phxEP/1/) <<

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:09:02.850

```
<div id='parent'>
    <div class='children'></div>
    <div class='children'></div>
    <div class='children'></div>
    <div class='children'></div>
</div>

// suppose hiding last .children
$('.children:last').hide(0, function() {
  var ph = $(this).parent().height(),
      ch = $(this).height();
  $(this).parent().animate({
     height: ph-ch
  });
}) 
```

或者就像@Vege 提到的那样：

```
$('.children:last').hide(); 
```

# asp.net - 打印多页网格视图

> ID：10641141
> 
> 赞同：0
> 
> 时间：2012-05-17T18:07:00.620
> 
> 标签：asp.net

我有一个多页网格视图，我想打印所有页面。

这是我的代码

```
<asp:GridView ID="verifiedsum" runat="server" AllowPaging="true" PageSize="20" AutoGenerateColumns="false" style="margin-left:100px;width:500px">
    <Columns><asp:BoundField HeaderText="RegNumber" DataField="RegNumber" /></Columns>
    <Columns><asp:BoundField HeaderText="Surname" DataField="Surname" /></Columns>
    <Columns><asp:BoundField HeaderText="Firstname" DataField="Givenname" /></Columns>
    <PagerSettings Visible="false" />
</asp:GridView>
<a style="margin-left:100px">Page: <asp:DropDownList id="PageSelect" runat="server" AutoPostBack="true" OnSelectedIndexChanged="PageSelect_SelectedIndexChanged"></asp:DropDownList></a> 
```

我正在考虑生成一个 word 文件来导出表格，但是从服务器端调用 word 应用程序也很复杂（我认为）。

有谁知道这是怎么做到的吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:16:52.640

您可以使用以下代码打印任何服务器控件，例如 GridView、DataGrid、Panel、TextBox 等。

[http://www.c-sharpcorner.com/uploadfile/rahul4_saxena/printing-in-Asp-Net/](http://www.c-sharpcorner.com/uploadfile/rahul4_saxena/printing-in-Asp-Net/)

您可以使用它来打印启用分页的 GridView：

[http://www.codeproject.com/Articles/20903/Printing-a-GridView-with-Paging](http://www.codeproject.com/Articles/20903/Printing-a-GridView-with-Paging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:02:48.847

这是我所做的

```
 int verifiedamount = 0;

            string line = "";
            List<CVerifiedList> VerifiedList = yourList
            for (int i = 0; i < VerifiedList.Count; i++)
                if (VerifiedList[i].Verified == "Verified")
                    verifiedamount++;
            Response.Buffer = true;
            Response.AddHeader("", "text/plain");
            Response.AddHeader("Content-Disposition", "attachment;filename=" + "tests.csv");

            foreach (CVerifiedList verified in VerifiedList)
            {
                line = verified.RegNumber.ToString() + ", " + verified.Givenname + ", " + verified.Surname + ", " + verified.Verified+",\""+verified.Reason+"\"\n";
                Response.Write(line);
            }
            Response.Write("Number of verified:" + ", " + verifiedamount + "\n");
            Response.Write("Total amount:" + ", " + VerifiedList.Count);
            Response.End(); 
```

# django - Django：如何在中间件中访问 session_key

> ID：10641142
> 
> 赞同：3
> 
> 时间：2012-05-17T18:07:06.517
> 
> 标签：django, django-middleware

我无法访问`session_key`我的自定义 Django 中间件。我尝试使用以下方式访问它：

```
session = Session.objects.get(pk=request.session._session_key) 
```

或者

```
session_key = request.COOKIES[settings.SESSION_COOKIE_NAME]
session = Session.objects.get(pk=session_key) 
```

我得到错误：

```
Session matching query does not exist. 
```

我已将中间件放在文件的末尾和`MIDDLEWARE_CLASSES`之后。`django.contrib.sessions.middleware.SessionMiddleware``settings.py`

我可以在中间件中设置会话密钥，但似乎 session_key 仅在显示完整页面后才生成/可访问。因为当页面第一次显示时`{{ request.session.session_key }}`返回`None`到我的模板中。当我刷新页面时，我可以看到`session_key`. 任何关于我如何访问的提示`session_key`都非常受欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T16:45:31.847

我设法让它工作。事实证明，通常只有在呈现完整页面后才会保存会话。

我设法使用以下方法过早地将会话保存在我的中间件中：

```
request.session.save() 
```

然后我可以保存我的模型（注意会话后的 _id，在我的情况下，它允许您[仅使用整数或 varchar 设置外键](https://stackoverflow.com/questions/2846029/django-set-foreign-key-using-integer)）：

```
visitor = Visitor()
visitor.session_id = request.session.session_key
visitor.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:56:31.787

我能够通过以下方式做到这一点，它对你有用吗？

```
Session.objects.get(session_key=request.session.session_key) 
```

如果不是，也许@ilvar 是正确的，您尝试在会话处于活动状态之前访问它。

# android - getContext() 、 getApplicationContext() 、 getBaseContext() 和“this”之间的区别

> ID：10641144
> 
> 赞同：628
> 
> 时间：2012-05-17T18:07:13.180
> 
> 标签：android, this, android-context

`getContext()`, `getApplicationContext()`, `getBaseContext()`, 和 " " 和有什么不一样`this`？

虽然这是一个简单的问题，但我无法理解它们之间的基本区别。如果可能，请举一些简单的例子。

* * *

## 回答 #1

> 赞同：578
> 
> 时间：2012-05-17T18:15:25.737

*   [`View.getContext()`](http://developer.android.com/reference/android/view/View.html#getContext%28%29)：返回视图当前运行的上下文。通常是当前活动的 Activity。

*   [`Activity.getApplicationContext()`](http://developer.android.com/reference/android/content/ContextWrapper.html#getApplicationContext%28%29)：返回整个应用程序的上下文（所有活动都在其中运行的进程）。如果您需要与整个应用程序的生命周期相关联的上下文，而不仅仅是当前的 Activity，请使用它而不是当前的 Activity 上下文。

*   [`ContextWrapper.getBaseContext()`](http://developer.android.com/reference/android/content/ContextWrapper.html#getBaseContext%28%29)：如果您需要从另一个上下文中访问上下文，则使用 ContextWrapper。从 ContextWrapper 内部引用的 Context 是通过 getBaseContext() 访问的。

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2017-02-13T18:24:07.880

大多数答案已经涵盖`getContext()`，`getApplicationContext()`但很少解释**getBaseContext() 。**

该方法`getBaseContext()`仅在您拥有`ContextWrapper`. Android 提供了一个`ContextWrapper`围绕现有`Context`使用创建的类：

```
ContextWrapper wrapper = new ContextWrapper(context); 
```

使用 a 的好处`ContextWrapper`是它可以让你“在不改变原始上下文的情况下修改行为”。例如，如果您有一个名为的活动，`myActivity`则可以创建一个`View`具有不同主题的活动`myActivity`：

```
ContextWrapper customTheme = new ContextWrapper(myActivity) {
  @Override
  public Resources.Theme getTheme() { 
    return someTheme;
  }
}
View myView = new MyView(customTheme); 
```

`ContextWrapper`非常强大，因为它允许您覆盖通过`Context`包含访问资源（例如`openFileInput()`，`getString()`）、与其他组件交互（例如`sendBroadcast()`，`registerReceiver()`）、请求权限（例如`checkCallingOrSelfPermission()`）和解析文件系统位置（例如`getFilesDir()`）的代码提供的大多数功能。`ContextWrapper`对于解决设备/版本特定问题或将一次性自定义应用于需要上下文的视图等组件非常有用。

**getBaseContext()**方法可用于访问`ContextWrapper`环绕的“基本”上下文。如果您需要例如检查它是 a还是`Service`，您可能需要访问“基本”上下文：`Activity``Application`

```
public class CustomToast {
  public void makeText(Context context, int resId, int duration) {
    while (context instanceof ContextWrapper) {
      context = context.baseContext();
    }
    if (context instanceof Service)) {
      throw new RuntimeException("Cannot call this from a service");
    }
    ...
  }
} 
```

或者，如果您需要调用方法的“未包装”版本：

```
class MyCustomWrapper extends ContextWrapper {
  @Override
  public Drawable getWallpaper() {
    if (BuildInfo.DEBUG) {
      return mDebugBackground;
    } else {
      return getBaseContext().getWallpaper();
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2017-03-09T16:31:38.313

“上下文是什么”这个问题是 Android 世界中最困难的问题之一。

上下文定义了访问系统资源、检索应用程序的静态资产、检查权限、执行 UI 操作等等的方法。本质上，`Context`是生产中的上帝对象反模式的一个例子。

当涉及到我们应该使用哪种时`Context`，它变得非常复杂，因为除了是上帝对象之外，`Context`子类的层次结构树粗暴地违反了里氏替换原则。

[这篇博文](https://web.archive.org/web/20150329210012/https://possiblemobile.com/2013/06/context/)（现在来自 Wayback Machine）试图总结`Context`类在不同情况下的适用性。

为了完整起见，让我从该帖子中复制主表：

> ```
> +----------------------------+-------------+----------+---------+-----------------+-------------------+
> |                            | Application | Activity | Service | ContentProvider | BroadcastReceiver |
> +----------------------------+-------------+----------+---------+-----------------+-------------------+
> | Show a Dialog              | NO          | YES      | NO      | NO              | NO                |
> | Start an Activity          | NO¹         | YES      | NO¹     | NO¹             | NO¹               |
> | Layout Inflation           | NO²         | YES      | NO²     | NO²             | NO²               |
> | Start a Service            | YES         | YES      | YES     | YES             | YES               |
> | Bind to a Service          | YES         | YES      | YES     | YES             | NO                |
> | Send a Broadcast           | YES         | YES      | YES     | YES             | YES               |
> | Register BroadcastReceiver | YES         | YES      | YES     | YES             | NO³               |
> | Load Resource Values       | YES         | YES      | YES     | YES             | YES               |
> +----------------------------+-------------+----------+---------+-----------------+-------------------+ 
> ```
> 
> 1.  应用程序可以从这里启动一个 Activity，但它需要创建一个新任务。这可能适合特定用例，但可能会在您的应用程序中创建非标准的回栈行为，通常不推荐或不被认为是好的做法。
> 2.  这是合法的，但膨胀将使用您正在运行的系统的默认主题完成，而不是您的应用程序中定义的主题。
> 3.  如果接收者为 null 则允许，用于获取粘性广播的当前值，在 Android 4.2 及更高版本上。

![截屏](../Images/5839c08fe124d6755bb9e36304022225.png)

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2014-03-10T08:51:02.770

> **getApplicationContext()** - 返回应用程序中运行的所有活动的上下文。
> 
> **getBaseContext()** - 如果你想从应用程序中的另一个上下文访问上下文，你可以访问。
> 
> **getContext()** - 仅返回当前正在运行的活动的上下文视图。

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2013-03-02T13:28:01.400

`Context`提供有关`Actvity`或`Application`新创建的组件的信息。

`Context`应该为新创建的组件提供相关信息（无论是应用程序上下文还是活动上下文）

由于`Activity`是 的子类`Context`，因此可以`this`用来获取该活动的上下文

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-08-11T11:46:13.777

**获取应用程序上下文（）**

> 这用于应用程序级别并引用所有活动。

**getContext() 和 getBaseContext()**

> 很可能是相同的。这些仅引用了当前的活动。

**这个**

> 总是引用当前类对象。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-03-24T06:08:12.327

this：当前类对象

getContext()：返回当前活动的上下文

getApplicationContext()：返回应用程序中正在运行的所有活动

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-15T06:54:34.597

从这个[文档](http://android-developers.blogspot.com.tr/2009/01/avoiding-memory-leaks.html)

我知道你应该使用：

> 尝试使用上下文应用程序而不是上下文活动

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-07T09:11:36.577

一个`Context`是：

*   一个抽象类，其实现由 Android 系统提供。
*   它允许访问特定于应用程序的资源和类，以及向上调用应用程序级操作，例如启动活动、广播和接收意图等。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-12T13:32:12.183

**getApplicationContext()**  - 它返回应用程序中运行的所有活动的上下文。

**getBaseContext()**  - 当您想从应用程序中的另一个上下文访问上下文时，您可以访问。

**getContext()**  - 它只返回当前正在运行的活动的上下文视图。

**this** - 它指的是当前的类对象

this指的是当前的activity类对象，activity继承了context，所以在context或者activity可以使用的地方必须使用this。

# java - 从 sdcard 上的目录读取文件

> ID：10641145
> 
> 赞同：0
> 
> 时间：2012-05-17T18:07:20.010
> 
> 标签：java, android, file, dir

我正在尝试读取一个目录，在这个目录中我有每个联系人的文件。我希望能够阅读这些联系人，然后将它们放入列表视图中。我已经尝试过，但是，我得到了一个 Java 错误，并试图对其进行更多研究，并在我尝试这样做时发现：

```
fileInputStream fi = fileInput(sdcard/contacts, 0);
fi.read();
//then the parse. 
```

正如我所说，我尝试了这个并得到一个错误，这意味着我无法使用上述方法访问目录，因为该方法正在寻找特定于应用程序的数据。

到目前为止我的代码：

```
private void checkFosImprtCtacs() {
        String FILENAME = "check";
        String RND = "LewisR";
        OutputStream out = null;
        // TODO Auto-generated method stub
        /*
         * Check if the dir exists, if it does we'll load the contacts, if it
         * doesn't the user will be presented with a dialog box and if they hit
         * yes the contacts will be written to the SD card see the
         * importcontacts theory file.
         */
        File dir = new File(Environment.getExternalStorageDirectory()
                + "/chckcontacts");
        if (dir.exists() && dir.isDirectory()) {
            dir.exists();
            dir.getPath().getBytes().toString(
                    //yes I KNOW THIS CODE IS WRONG, I JUST WANTED TO SHOW SOMETHING.
            BufferedReader inputReader = null;
            while (dir.getPath().getBytes() != null) {

            }

        } else {
            if (dir.exists())
                ;
            {
                dir.mkdir();
                // import contacts via dialog box.
                new AlertDialog.Builder(this)
                        .setTitle("Import Contacts")
                        .setMessage("Do you want to import your contacts?")
                        .setPositiveButton("Yes",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int which) {
                                        Cursor cursor = getContacts();
                                        while (cursor.moveToNext()) {
                                            String displayName = cursor.getString(cursor
                                                    .getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
                                            Log.e(displayName, displayName);
                                            // create a File object for the
                                            // parent directory
                                            File Contacts = new File(
                                                    Environment
                                                            .getExternalStorageDirectory()
                                                            + "/contacts");
                                            // have the object build the
                                            // directory structure, if needed.
                                            Contacts.mkdirs();
                                            // create a File object for the
                                            // output file
                                            File outputFile = new File(
                                                    Contacts,
                                                    displayName);
                                            // now attach the OutputStream to
                                            // the file object, instead of a
                                            // String representation
                                            try {
                                                FileOutputStream fos = new FileOutputStream(
                                                        outputFile);
                                            } catch (FileNotFoundException e) {
                                                // TODO Auto-generated catch
                                                // block
                                                e.printStackTrace();
                                            }
                                        }
                                    }
                                })
                        .setNegativeButton("No",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int which) {
                                        // do nothing
                                    }
                                }).show();

            }
        }
    }

    private Cursor getContacts() {
        // TODO Auto-generated method stub
        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        String[] projection = new String[] { ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME };
        String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = 1";
        String[] selectionArgs = null;
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
                + " COLLATE LOCALIZED ASC";
        return managedQuery(uri, projection, selection, selectionArgs,
                sortOrder);

    } 
```

# shell - VBA：如何从 MS Access 运行另一个应用程序

> ID：10641147
> 
> 赞同：12
> 
> 时间：2012-05-17T18:07:30.120
> 
> 标签：shell, ms-access, vba

我一直在努力解决这个问题，但似乎我无法在任何地方找到解决问题的方法。这是第一部分：[VBA Shell 命令总是返回“找不到文件”](https://stackoverflow.com/questions/10439024/vba-shell-command-always-returns-file-not-found)在那个问题中，由于某种奇怪的原因，它没有在 %APPDATA% 文件夹中找到应用程序，可能是安全设置。

此后，我将导入工具移到了存储数据库的同一目录中，希望它能够正常工作。

我的目标是单击 MS Access 中的按钮并让它直接运行我的导入工具。现在，我让它打开包含该工具的文件夹。这适用于我的具有管理员权限的开发机器，但不适用于没有管理员权限的其他机器。现在的代码如下所示：

```
Dim hProcess as Long
Dim myPath as String
Dim ex as String

ex = "C:\WINDOWS\explorer.exe "
myPath = Environ("ProgramFiles(x86)") & "\mytool\"

hProcess = Shell(ex & myPath, vbNormalFocus) 
```

这允许打开保存文件的文件夹，但仅限于具有完全管理员权限的计算机帐户。在没有完全权限的计算机帐户上运行它时，它根本什么都不做。

我还尝试了以下方法：

```
Dim hProcess As Long
Dim myPath as String

myPath = Environ("ProgramFiles(x86)") & "\mytool\mytool.exe"
hProcess = Shell(myPath, vbNormalFocus) 
```

这部分“似乎”起作用，因为当我查看进程管理器时它会加载应用程序“mytool.exe”。但是，几秒钟后（可能是 20 秒钟），会弹出一个对话框，说明应用程序“mytool.exe”已停止工作。

这里要注意的一件事是我在我的开发机器上拥有管理员权限，但我在我的家用机器上拥有所有权限。在我的家用机器上，第二个代码没有任何问题。在我的开发机器上，它崩溃了，而在受限制的用户机器上，它根本不做任何事情。

关于如何在使用低于管理员权限的情况下从 MS Access 打开此应用程序有什么建议吗？直接运行应用程序或至少打开所述应用程序所在的文件夹。

谢谢！

PS 我已经尝试过在 stackoverflow 上找到的 ShellAndWait 和 RunApplication 代码，但在这种情况下都不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-07T12:16:58.133

`ShellExecute`当我需要在 VBA 中执行某些操作时，我总是使用Windows API。
据我所知，它也可以在没有完全权限的机器上运行。

例子：

```
Declare Function ShellExecute Lib "shell32.dll" Alias "ShellExecuteA" (ByVal hwnd As Long, _
    ByVal lpOperation As String, ByVal lpFile As String, ByVal lpParameters As String, _
    ByVal lpDirectory As String, ByVal lpnShowCmd As Long) As Long

Public Sub ShellEx(ByVal Path As String, Optional ByVal Parameters As String, Optional ByVal HideWindow As Boolean)

    If Dir(Path) > "" Then
        ShellExecute 0, "open", Path, Parameters, "", IIf(HideWindow, 0, 1)
    End If

End Sub 
```

现在你可以调用`ShellEx`运行几乎任何东西：

```
'run executable
ShellEx "c:\mytool.exe"

'open file with default app
ShellEx "c:\someimage.jpg"

'open explorer window
ShellEx "c:\" 
```

请注意，它`ShellEx`也有两个可选参数。
我没有在上面的例子中展示这一点，但你可以：

*   将参数传递给可执行文件
*   隐藏被调用可执行文件的窗口

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-19T21:49:20.240

按照这个链接

[MS ACCESS：从 ACCESS 2003/XP/2000/97 启动应用程序](http://www.techonthenet.com/access/modules/other_app.php)

这是在 ms access 中运行应用程序的示例

```
Private Sub Command1_Click()
Dim myPath As String
myPath = "C:\Program Files\mytool\mytool.exe"
Call Shell(myPath , 1)
End Sub 
```

我希望它对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:59:50.010

只是弄乱[http://www.mombu.com/microsoft/scripting-wsh/t-vista-uac-problem-with-wscriptshell-run-method-1508617.html](http://www.mombu.com/microsoft/scripting-wsh/t-vista-uac-problem-with-wscriptshell-run-method-1508617.html)。我在 Windows 7 家用电脑上试过这个。

```
Set objShell = CreateObject("Shell.Application")
myPath = Environ("ProgramFiles(x86)") & "\mytool"
Set objFolder = objShell.Namespace(myPath)
Set objFolderItem = objFolder.ParseName("mytool.exe")
objFolderItem.InvokeVerb "runas" 
```

它可能会给你一些想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T07:38:20.640

查看

```
Shell szFileName, vbNormalFocus 
```

与其他一些可执行文件。你的工具可能有问题。

# android - Android中的rawQuery不显示数据库内容

> ID：10641151
> 
> 赞同：0
> 
> 时间：2012-05-17T18:07:53.457
> 
> 标签：android, sqlite

是的，这是家庭作业，但我尽职尽责，但我被困住了！希望有人可以提供帮助！

我的 rawQuery 有问题。它没有显示任何东西。我很确定数据库不是空的，因为我添加了几个插入语句进行测试（我也尝试过`put()`and `insert()`），但仍然没有任何结果。

问题是，当我运行我的代码时，我没有收到任何错误或异常，但它从未进入 logDatabase ( `while !c.moveToNext`) 中的 while 循环。

我做了相当多的研究，但我看到的所有书籍似乎都告诉我要这样做。也许我遗漏了一些明显的东西，但我一生都无法弄清楚它是什么。谢谢！

```
package jschuler.cs211d.hw06b;

    import android.app.Activity;
    import android.os.*;
    import android.widget.*;
    import android.util.Log;
    import android.view.*;
    import java.util.*;
    import java.io.*;
    import android.content.*;
    import android.database.*;
    import android.database.sqlite.SQLiteDatabase;

    public class play extends Activity 
                      implements RadioGroup.OnCheckedChangeListener
    {    
        private static final String DBNAME = "statesDB";
        static final String STATE = "state", CAPITAL = "capital";

    //*****************************onCreate()*****************************
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.play);

            // Check to see if SD card is available. If not, warn the user
            if(!sdCardAvailable())
            {
                Toast t = Toast.makeText(getApplicationContext(), 
                    "No SD card available.", 
                    Toast.LENGTH_SHORT);
                t.show();
            }
            else
            {
                Toast t = Toast.makeText(getApplicationContext(), 
                    "SD card is available.", 
                    Toast.LENGTH_SHORT);
                t.show();
            }

            loadDB();
        }
    //**************************onCheckChanged()**************************
    //  Set the variable that represents the type, depending on 
    //  what the user has selected in the radio group.    
        public void onCheckedChanged(RadioGroup g, int CheckedId)
        {

        }
    //******************************loadDB()******************************
    //  Create the data structures to hold the data
        public void loadDB()
        {
            SQLiteDatabase db;
            db = openOrCreateDatabase("statesDB", 
                SQLiteDatabase.CREATE_IF_NECESSARY, null);

            db.setVersion(1);
            db.setLockingEnabled(true);

            db.execSQL("CREATE TABLE if not exists states(_id integer primary key autoincrement, STATE text, CAPITAL text);");

            Scanner sc;

            try
            {
                File sdCard = Environment.getExternalStorageDirectory();
                File dir = new File(sdCard.getAbsolutePath());
                File f = new File(dir, "US_states");
                sc = new Scanner(f);

                // Skip the first line
                sc.nextLine();
                sc.nextLine();

                // Read in the names of the states and capitals. 
                while(sc.hasNextLine())
                {
                    String[] nextItem = sc.nextLine().split("\\s{2,}");
                    ContentValues cv = new ContentValues();
                    cv.put(STATE, nextItem[0]);
                    db.insert("states", STATE, cv);
                    cv.put(CAPITAL, nextItem[1]);
                    db.insert("states", CAPITAL, cv);
                }
            }
            catch (FileNotFoundException e)
            {
                Toast t = Toast.makeText(getApplicationContext(), 
                    "Error loading data.", 
                    Toast.LENGTH_SHORT);
                t.show();
            }

            db.close();

            logDatabase();
        }
    //***************************logDatabase()****************************
        public void logDatabase()
        {
            SQLiteDatabase db;
            db = openOrCreateDatabase("statesDB", 
                SQLiteDatabase.CREATE_IF_NECESSARY, null);

            db.execSQL("INSERT INTO states (STATE) values ('AB');");
            db.execSQL("INSERT INTO states (STATE) values ('CD');");
            db.execSQL("INSERT INTO states (STATE) values ('EF');");

            ContentValues cv = new ContentValues();
            cv.put(STATE, "AB");
            db.insert("states", STATE, cv);

            Cursor c = db.rawQuery("SELECT STATE, CAPITAL FROM states",null);

            while(!c.moveToNext())
            {
                Log.d("mtn","in moveToNext()");
                Log.d("state",c.getString(0));
                Log.d("capital",c.getString(1));
            }

            db.close();
        }
    //*************************sdCardAvailable()**************************
    //  Determine whether there is an SD card available and if it is 
    //  writable.
        public boolean sdCardAvailable()
        {
            boolean storageAvailable = false;
            boolean storageWritable = false;

            String state = Environment.getExternalStorageState();

            if(Environment.MEDIA_MOUNTED.equals(state))
            {
                storageAvailable = storageWritable = true;
            }
            else if(Environment.MEDIA_MOUNTED_READ_ONLY.equals(state))
            {
                storageAvailable = true;
                storageWritable = false;
            }
            else
            {
                storageAvailable = storageWritable = false;
            }

            return (storageWritable && storageAvailable);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:20:12.853

```
while(!c.moveToNext()) 
```

这一行，翻译成英文，变成“当你**不能**移动到下一个项目时，进入循环，否则退出”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:24:34.400

查看此代码并尝试以这种方式编写您的程序，我相信它会起作用....

```
import android.content.ContentValues;

import android.content.Context;

import android.database.Cursor;

import android.database.sqlite.SQLiteDatabase;

import android.database.sqlite.SQLiteDatabase.CursorFactory;

import android.database.sqlite.SQLiteOpenHelper;

public class TimeListDatabaseHelper {

    private static final String DATABASE_NAME = "timetracker.db";
    private static final int DATABASE_VERSION = 4;
    private static final String DATABASE_TABLE = "timerecords";

    public static final String COLUMN_ID = "_id";
    public static final String COLUMN_TIME = "note";
    public static final String COLUMN_NOTE = "time";

    private TimeTrackerOpenHelper openHelper;
    private SQLiteDatabase database;

    TimeListDatabaseHelper(Context context) {

        openHelper = new TimeTrackerOpenHelper(context);
        database = openHelper.getWritableDatabase();

    }

    public void saveTimeRecord(String time, String notes) {

        ContentValues contentValue = new ContentValues();

        contentValue.put(COLUMN_TIME, time);
        contentValue.put(COLUMN_NOTE, notes);

        database.insert(DATABASE_TABLE,null, contentValue);

        }

    public Cursor getAllTimeRecords() {
        return database.rawQuery(
        "select * from " + DATABASE_TABLE,
        null
        );
        }

public class TimeTrackerOpenHelper extends SQLiteOpenHelper {

    public TimeTrackerOpenHelper(Context context) {

        super(context,DATABASE_NAME, null , DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL("CREATE TABLE "+DATABASE_TABLE+"("+COLUMN_ID+" INTEGER PRIMARY KEY AUTOINCREMENT "+","+COLUMN_TIME+" TEXT "+","+COLUMN_NOTE+" NOTE"+")");

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

                   db.execSQL("DROP TABLE IF EXISTS "+ DATABASE_TABLE);
                   onCreate(db);

    }

}

} 
```

现在你需要在主活动中创建这个类的一个实例，并将活动（即“this”）传递给这个类的构造函数。然后在主活动中使用这个类的引用，尝试从这个类中获取数据..

例如：

```
In main activity class

   TimeListDatabaseHelper db = new TimeListDatabaseHelper(this);
    db.getAllTimeRecords(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:27:39.797

添加插入的事实并不意味着它将被插入到数据库中。这是一个参考[Android Insert 语句](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)...以确保您的数据库已填充，打开您的 DDMS，然后在设备上确保您选择了您的模拟器，然后单击文件资源管理器 > 数据 > 数据 > 然后拉数据库并使用数据库管理程序打开它并运行选择查询并确保其中包含数据。

正如@Alexander Lucas 所说，您的代码使其无法进入循环，因为您将“！”放入其中 `while(!c.moveToNext())`，尝试替换 for `while(c.moveToNext())`

# php - 来自数组的多个标题的 LoL API 查询

> ID：10641152
> 
> 赞同：0
> 
> 时间：2012-05-17T18:07:55.057
> 
> 标签：php, arrays, api

我有一个数组：

```
Array ( [0] => Ahri [1] => Akali [2] => Alistar [3] => Amumu [4] => Anivia [5] =>  Annie [6] => Ashe [7] => Blitzcrank [8] => Brand [9] => Caitlyn [10] => Cassiopeia [11] => Cho'Gath [12] => Corki [13] => Dr. Mundo [14] => Evelynn [15] => Ezreal [16] => Fiddlesticks [17] => Fiora [18] => Fizz [19] => Galio [20] => Gangplank [21] => Garen [22] => Gragas [23] => Graves [24] => Hecarim [25] => Heimerdinger [26] => Irelia [27] => Janna [28] => Jarvan IV [29] => Jax [30] => Karma [31] => Karthus [32] => Kassadin [33] => Katarina [34] => Kayle [35] => Kennen [36] => Kog'Maw [37] => LeBlanc [38] => Lee Sin [39] => Leona [40] => Lulu [41] => Lux [42] => Malphite [43] => Malzahar [44] => Maokai [45] => Master Yi [46] => Miss Fortune [47] => Mordekaiser [48] => Morgana [49] => Nasus [50] => Nautilus [51] => Nidalee [52] => Nocturne [53] => Nunu [54] => Olaf [55] => Orianna [56] => Pantheon [57] => Poppy [58] => Rammus [59] => Renekton [60] => Riven [61] => Rumble [62] => Ryze [63] => Sejuani [64] => Shaco [65] => Shen [66] => Shyvana [67] => Singed [68] => Sion [69] => Sivir [70] => Skarner [71] => Sona [72] => Soraka [73] => Swain [74] => Talon [75] => Taric [76] => Teemo [77] => Tristana [78] => Trundle [79] => Tryndamere [80] => Twisted Fate [81] => Twitch [82] => Udyr [83] => Urgot [84] => Varus [85] => Vayne [86] => Veigar [87] => Viktor [88] => Vladimir [89] => Volibear [90] => Warwick [91] => Wukong [92] => Xerath [93] => Xin Zhao [94] => Yorick [95] => Ziggs [96] => Zilean [97] => Lee Sin [98] => Orianna [99] => Yorick [100] => Leona [101] => Riven [102] => Lulu [103] => Hecarim [104] => Varus [105] => Malphite [106] => Morgana [107] => Ryze [108] => Annie [109] => Cho'Gath [110] => Taric [111] => Jax [112] => Teemo [113] => Warwick [114] => Poppy [115] => Garen [116] => Anivia [117] => Blitzcrank [118] => Corki [119] => Karthus [120] => Twitch [121] => Irelia [122] => Miss Fortune [123] => Galio [124] => Swain [125] => Kennen [126] => Malzahar ) 
```

我需要在以下函数中使用这些值中的每一个：

```
$input=file_get_contents("http://leagueoflegends.wikia.com/api.php?action=query&titles=$value&prop=revisions&rvprop=content&format=xml"); 
```

其中`$value`是数组中的一个值（例如`Ahri`）。

我怎样才能做到这一点？

**编辑：**我通过执行以下操作获得这些值：

```
$file = file_get_contents('http://leagueoflegends.wikia.com/api.php?action=query&titles=List_of_champions&prop=revisions&rvprop=content&format=xml');
preg_match_all('/{{ci\|([^}]*)}}/', $file, $matches); 
```

*（上面提到的数组在哪里`$matches`。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:23:10.940

或者，您可以使用[LeagueOfLegends API](http://www.mediawiki.org/wiki/API)`|`的内置方式，并通过将每个标题与字符分隔来同时检索所有值。像这样：

```
$values = array("Ahri","Akali","Alistar");
$input  = "";

while($pack = array_splice($values,0,49)){
    $concatValues = implode("|",$values); // Will return "Ahri|Akali|Alistar";
    $url   = "http://leagueoflegends.wikia.com/api.php?action=query&titles=$concatValues&prop=revisions&rvprop=content&format=xml";
    $input .= file_get_contents($url);
} 
```

对于代码的前三个元素，将返回以下内容，您可以一个一个地执行此操作，但 API 礼仪建议您执行最少数量的请求来获取所需的数据。

```
<api>
    <query>
    <pages>
        <page pageid="281432" ns="0" title="Ahri">
            <revisions>
                <rev xml:space="preserve">#REDIRECT [[Ahri the 9 Tails Fox]]</rev>
            </revisions>
        </page>
        <page pageid="5578" ns="0" title="Akali">
            <revisions>
                <rev xml:space="preserve">#REDIRECT [[Akali the Fist of Shadow]]</rev>
            </revisions>
        </page>
        <page pageid="2202" ns="0" title="Alistar">
            <revisions>
                <rev xml:space="preserve">#REDIRECT [[Alistar the Minotaur]]</rev>
            </revisions>
        </page>
        </pages>
    </query>
</api> 
```

请注意，结果是缓存的，因此如果您想两次获取相同的数据，请确保使用相同的请求并且不要更改元素的顺序，因为新的顺序会导致新的 url 并再次获取结果从他们的服务器而不是提供 API 缓存版本。

**更新**

查看数组中的值，我看到一些包含引号的“标题”，因此会破坏 url。`url encode`您应该在使用之前对url 进行编码。

# vb.net - 来自列表（十进制）值的 Excel 散点图 - VB.NET

> ID：10641153
> 
> 赞同：0
> 
> 时间：2012-05-17T18:07:55.567
> 
> 标签：vb.net, excel, charts, series

`List(Of Decimal)`是否可以使用 VB 从 Excel 中的值创建绘图？我想避免将数据直接转储到表格中，然后从中创建图表。到目前为止，这是我所拥有的，但是当我尝试分配`.XValues`和分配`.Values`给列表时，我遇到了数据类型不匹配的问题。是否需要进行某种转换才能将列表转换为系列？

```
 Dim Series As Excel.Series
    Dim xVals As New List(Of Decimal)(New Decimal() {1, 3, 4, 5})
    Dim yVals As New List(Of Decimal)(New Decimal() {2, 2, 2, 2})
    xlWorkSheet = CType(Globals.ThisAddIn.Application.Worksheets.Add(), Excel.Worksheet)

    xlWorkSheet.Activate()
    xlWorkSheet.Name = "My Sheet"
    xlCharts = xlWorkSheet.ChartObjects
    xlChartObj = xlCharts.Add(150, 30, 400, 250)
    xlChart = xlChartObj.Chart

    With xlChart
        .ChartType = Excel.XlChartType.xlXYScatterLines
        .HasLegend = True
        .Legend.Position = Excel.XlLegendPosition.xlLegendPositionRight
        .HasTitle = True
        .ChartTitle.Text = "Test Chart"
        For i = 0 To channels.Count - 1
            .SeriesCollection.NewSeries()
            Series = .SeriesCollection(i + 1)
            Series.XValues = xVals
            Series.Values = yvals
        Next
        .Location(Excel.XlChartLocation.xlLocationAsNewSheet)
    End With 
```

更新：

我似乎下面的代码可以工作，但它不是很理想。除了像我一样将数组转换为数组的字符串表示形式之外，还有更好的方法吗？

```
 Dim Series As Excel.Series
    Dim xVals As New List(Of Decimal)(New Decimal() {1, 3, 4, 5})
    Dim yVals As New List(Of Decimal)(New Decimal() {2, 2, 2, 2})
    Dim xString As String
    Dim yString As String
    xlWorkSheet = CType(Globals.ThisAddIn.Application.Worksheets.Add(), Excel.Worksheet)

    xlWorkSheet.Activate()
    xlWorkSheet.Name = "My Sheet"
    xlCharts = xlWorkSheet.ChartObjects
    xlChartObj = xlCharts.Add(150, 30, 400, 250)
    xlChart = xlChartObj.Chart

    With xlChart
        .ChartType = Excel.XlChartType.xlXYScatterLines
        .HasLegend = True
        .Legend.Position = Excel.XlLegendPosition.xlLegendPositionRight
        .HasTitle = True
        .ChartTitle.Text = "Test Chart"
        For i = 0 To channels.Count - 1
            .SeriesCollection.NewSeries()
            Series = .SeriesCollection(i + 1)

            xString = "={"
            xString += xVals(0).ToString
            For k = 1 To xVals.Count - 1
                xString += ","
                xString += xVals(k).ToString
            Next
            xString = "}"

            yString = "={"
            yString += yVals(0).ToString
            For k = 1 To yVals.Count - 1
                yString += ","
                yString += yVals(k).ToString
            Next
            yString = "}"

            Series.XValues = xString
            Series.Values = yString
        Next
        .Location(Excel.XlChartLocation.xlLocationAsNewSheet)
    End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:42:53.560

使用存储为对象的范围，我能够通过以下代码获得我想要的东西。我在第二个代码块中提到的字符串方法有 8000+ 个字符的限制（不确定实际数字，8192？）。

```
Dim Series As Excel.Series
Dim xVals As New List(Of Decimal)(New Decimal() {1, 3, 4, 5})
Dim yVals As New List(Of Decimal)(New Decimal() {2, 2, 2, 2})
Dim xRange As Object
Dim yRange As Object
Dim tempSheet as Excel.Worksheet

xlWorkSheet = CType(Globals.ThisAddIn.Application.Worksheets.Add(), Excel.Worksheet)
xlWorkSheet.Activate()
xlWorkSheet.Name = "My Sheet"
xlCharts = xlWorkSheet.ChartObjects
xlChartObj = xlCharts.Add(150, 30, 400, 250)
xlChart = xlChartObj.Chart

With xlChart
    .ChartType = Excel.XlChartType.xlXYScatterLines
    .HasLegend = True
    .Legend.Position = Excel.XlLegendPosition.xlLegendPositionRight
    .HasTitle = True
    .ChartTitle.Text = "Test Chart"
    For i = 0 To channels.Count - 1
        tempSheet = CType(Globals.ThisAddIn.Application.Worksheets.Add(), Excel.Worksheet)
        tempSheet.Activate()
        With tempSheet
            .Visible = False
            For k = 0 To xVals.Count - 1
                tempSheet.Cells(k + 1, 1).Value = xVals(k)
                tempSheet.Cells(k + 1, 2).Value = yVals(k) 'Assumes yVals.Count = xVals.Count
            Next
            xRange = tempSheet.Range("A1:A" + xVals.Count.ToString).Value
            yRange = tempSheet.Range("B1:B" + xVals.Count.ToString).Value
            Globals.ThisAddIn.Application.DisplayAlerts = False
            .Delete()
            Globals.ThisAddIn.Application.DisplayAlerts = True
        End With

        Series = .SeriesCollection.NewSeries()
        With Series
            .XValues = xRange
            .Values = yRange
        End With            
    Next
    .Location(Excel.XlChartLocation.xlLocationAsNewSheet)
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:12:15.623

FWIW，Excel 在从工作表中绘制数据时表现最好。是否有任何理由不将列表（或数组）转储到工作表中，并将这些范围用作图表系列源数据？

# javascript - Chrome 控制台错误：chromeHidden.Port.dispatchOnDisconnect

> ID：10641155
> 
> 赞同：18
> 
> 时间：2012-05-17T18:08:04.753
> 
> 标签：javascript, facebook, google-chrome, protocols, port

不知道那是什么意思。一直在开发一些 facebook 应用程序，并且出现了一些明显相关的 js 错误。

根据这个线程，这是一个延迟加载问题。不过，我正在使用默认设置运行 chrome。
[http://code.google.com/p/chromium/issues/detail?id=100977](http://code.google.com/p/chromium/issues/detail?id=100977)

偶尔（大约五分之一）这会破坏 Facebook 应用程序的身份验证。chromeHidden.Port.dispatchOnDisconnect 在控制台中按顺序显示了 8 次，没有任何代码被破坏的迹象。

其他人遇到过这种情况，或者确切地知道是什么原因造成的？是来自 Facebook 的 javascript 错误吗？某种协议错误？端口不匹配？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T16:19:31.377

我的是由于 chrome2phone 扩展

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T02:34:37.050

如果您禁用了扩展并且问题不再存在，请针对扩展（可能最相关）或 Chromium 论坛 (http://code.google.com/p/chromium/) 提交错误。

# google-docs - 谷歌可视化表。在单元格中插入图像（来自 GDocs）

> ID：10641159
> 
> 赞同：1
> 
> 时间：2012-05-17T18:08:39.153
> 
> 标签：google-docs, google-visualization

我正在尝试在 html 文档中插入 Google 电子表格并将其显示为表格。所以，我的来源是一个 Google Docs 文档，我用查询来调用它

```
(var query = new google.visualization.Query). 
```

我的表格是一个国家列表，其中包含一些关于它们的数据。Html可视化到此为止就OK了。

但我想添加一个带有图像（标志）的列。我不知道是否有可能做到这一点，如果可能的话，如何做到这一点。

我试图将链接放在 Google 电子表格的单元格中，复制粘贴图像和 img src="..."，但没有运气。我唯一拥有的是在 GDocs 和 html 可视化中的单元格内编写的代码。

我已经定义为一个选项

```
(var options = {allowHtml: true}; 
```

有什么建议吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:04:53.887

这是可能的，我不确定为什么您的选择不起作用。

这是从我的电子表格导出到 csv 的：

```
someContent,someImage
catz,<img src='http://1.bp.blogspot.com/-TzV-DfLU7jc/TagrymLT1HI/AAAAAAAABro/q4Jf1xNjxpk/s1600/ghoul.jpg' /> 
```

以及调用电子表格后的相关 javascript 代码：

```
var data = response.getDataTable();
visualization = new google.visualization.Table(document.getElementById('visualization'));
visualization.draw(data, {allowHtml: true}); 
```

如您所述，`allowHtml: true`是必需的。

# javascript - JavaScript isCurrency() 失败

> ID：10641161
> 
> 赞同：0
> 
> 时间：2012-05-17T18:08:51.857
> 
> 标签：javascript

嘿家伙应该是一个简单的...我有一些 javascript 将我的输入值转换为货币值。问题是如果我尝试输入 .5 它将失败这是我的代码：

```
function handleCurrency(formName,fieldName)
{
    var enteredValue = document.forms[formName].elements[fieldName].value;

    if ( enteredValue.isCurrency() )
    {
        alert("This is currency " + enteredValue )
        // Put the nicely formatted back into the text box.
        document.forms[formName].elements[fieldName].value = enteredValue.toCurrency();
    }
} 
```

jsp：

```
 <td><input type="text" name="replacementCost" onchange="handleCurrency('NsnAdd','replacementCost')" value="<ctl:currencyFormat currency='${form.replacementCost}'/>" onkeypress="javascript:return noenter();" <c:if test="${!lock.locked}">disabled="disabled"</c:if> /></td> 
```

我怎样才能使 .5 也可以被格式化？

自定义 JavaScript：

```
var patternWithCommas = new RegExp("^\\s*\\$?-?(\\d{1,3}){1}(,\\d{3}){0,}(\\.\\d{1,2})?\\s*$");
var patternWithoutCommas = new RegExp("^\\s*\\$?-?\\d+(\\.\\d{1,2})?\\s*$");

function stringIsCurrency()
{
if (patternWithoutCommas.test(this))
{
    return true;
}
else if (patternWithCommas.test(this))
{
    return true;
}
return false;
}

function stringToCurrency()
{
if (this == '') return this;

var str = this.replace(/[$,]+/g,'');

sign = (str == (str = Math.abs(str)));
str = Math.floor(str*100+0.50000000001);
cents = str%100;
str = Math.floor(str/100).toString();

if (cents<10) cents = "0" + cents;

for (var i = 0; i < Math.floor((str.length-(1+i))/3); i++)
{
    str = str.substring(0,str.length-(4*i+3))+','+
          str.substring(str.length-(4*i+3));
}

str = '$' + ((sign)?'':'-') + str + '.' + cents;

return str;
}

String.prototype.isCurrency = stringIsCurrency;
String.prototype.toCurrency = stringToCurrency; 
```

基本上它需要允许 0.5 而不仅仅是 0.5

这需要更新：

```
var patternWithCommas = new RegExp("^\\s*\\$?-?(\\d{1,3}){1}(,\\d{3}){0,}(\\.\\d{1,2})?\\s*$"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:14:33.523

您还没有显示您的代码`isCurrency`。

这是我的做法：

```
function isCurrency( val )
{
    return /^\$?(?:\d[\d,]*)?(?:.\d\d?)?$/.test( val );
} 
```

在此处查看实际操作：[http ://regexr.com?3103a](http://regexr.com?3103a)

* * *

现在您已经提供了代码，这是我提出的解决方案。

虽然有很多事情我会做不同的事情，但
为了保持代码的精神，只需更改以下内容：

```
var patternWithCommas = new RegExp("^\\s*\\$?-?(\\d{1,3}){1}(,\\d{3}){0,}(\\.\\d{1,2})?\\s*$");
var patternWithoutCommas = new RegExp("^\\s*\\$?-?\\d+(\\.\\d{1,2})?\\s*$"); 
```

对此：

```
var patternWithCommas = /^\s*\$?-?((\d{1,3}){1}(,\d{3})?)?(\.\d{1,2})?\s*$/;
var patternWithoutCommas = /^\s*\$?-?(\d+)?(\.\d{1,2})?\s*$/; 
```

这将使美元金额成为可选的。

# objective-c - 一遍又一遍地重复 UIAlert 代码

> ID：10641164
> 
> 赞同：0
> 
> 时间：2012-05-17T18:08:59.067
> 
> 标签：objective-c, xcode

我有这个代码：

```
-(IBAction)action2:(id)sender{

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Confirm" message:@"If you press of a new group with the name you have set will be created" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles: @"Ok", nil];
[alert show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

if([title isEqualToString:@"Ok"])
{

    NSString *destDir = [NSString stringWithFormat:@"/sandbox/%@/", namegroup.text];

    NSString *filename5 = namegroup.text;
    NSString *filename6 = @"group";
    NSString *filename7 = @"groupdata";

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,       NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *getImagePath5 = [documentsDirectory stringByAppendingPathComponent:   [NSString stringWithFormat:@"%@", filename7]];

    NSMutableArray *titles = [NSMutableArray array];
    [titles addObject:filename5];

    NSMutableArray *keys = [NSMutableArray array];
    [keys addObject:filename6];

    NSDictionary *dict = [NSDictionary dictionaryWithObjects:titles forKeys:keys];

    NSString *jsonString = [dict JSONRepresentation];
    NSData *jsonData = [jsonString dataUsingEncoding: NSUTF8StringEncoding];

    [jsonData writeToFile: getImagePath5 atomically: YES];

    [[self restClient] uploadFile:filename7 toPath:destDir
                    withParentRev:nil fromPath:getImagePath5];

}

} 
```

如果我按确定按钮，代码会一遍又一遍地重复。我怎样才能只重复1次？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:51:44.707

我发现有另一个具有相同取消标题的警报，当按下它时，它重新启动了相同的代码。不过感谢您的帮助。

# jquery - 单击复选框标签在 ajax 模式中不起作用

> ID：10641166
> 
> 赞同：0
> 
> 时间：2012-05-17T18:09:03.600
> 
> 标签：jquery, ajax, checkbox, label, modal-dialog

我有一个格式如下的复选框：

```
<label for="option1">
    <input type="checkbox" id="option1"> Foo
</label> 
```

该复选框出现在 jQuery 模式中。当从激活模态的同一页面中提取模态的内容时，然后按`<label>`预期单击选中复选框。

但是，当通过 Ajax 从外部文件中提取完全相同的模态内容时，单击`<label>`不再选中复选框。您必须直接单击复选框来检查它。

`<label>`如果通过 Ajax 拉取内容，为什么点击行为会发生变化？

（如果需要，我可以提供我用来提取外部文件的 JS，但我认为这可能是一个更广泛的问题/解决方案。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:06:38.733

我认为这个问题比简单地需要一个实时事件处理程序更深，因为提供这样一个事件处理程序并没有完全解决我同样的问题。jQuery 对话框最终克隆了 HTML 以创建/显示对话框，该对话框复制了克隆中的 id。在 click 事件处理程序中，如果我使用表单的简单 id 选择器`$('#'+id)`来查找相应的输入元素，它并没有在对话框中找到输入元素。我最终将选择器限制为我所处的当前形式，如`$(this).closest('form').find('#'+id)`，这对我有用。完整的处理程序如下所示：

```
$(document).on('click', 'form label', function(e) {
    var id = $(this).attr("for");
    if (id.length > 0) {
        // Because this is a dialog box, restrict our search to
        // the form we are currently on to avoid finding the same id
        // elsewhere.
        var $checkbox = $(this).closest('form').find('#'+id);
        $checkbox.attr("checked", !$checkbox.attr("checked"));
    }
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:10:11.663

您需要一个实时事件，因为您的元素稍后会出现在 DOM 中。

```
$(document).on('click', 'input[type=checkbox][id^=option]', function() {
  alert('clicked');
}); 
```

# php - BitSnoop.com 如何做到这一点？

> ID：10641167
> 
> 赞同：1
> 
> 时间：2012-05-17T18:09:03.773
> 
> 标签：php, magnet-uri

我很想知道 bitsnoop.com 是如何做到这一点的......

[http://bitsnoop.com/api/trackers.php?hash=98C5C361D0BE5F2A07EA8FA5052E5AA48097E7F6&json=1](http://bitsnoop.com/api/trackers.php?hash=98C5C361D0BE5F2A07EA8FA5052E5AA48097E7F6&json=1)

它可以接收任何magnet-uri，并在找到时返回跟踪器播种机、水蛭等列表...

有人可以详细说明这是如何完成的，也许是我如何开始这样做的第一步？！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:30:29.847

可以从跟踪器接收有关种子的统计信息。跟踪器可以使用 DHT 分布式哈希表进行集中式或分散式。每个跟踪器与其对等节点协商，向他们发送有关新客户端的信息，这就是收集统计信息的方式。我不知道该怎么做，但我会开始阅读有关 BitTorrent 协议的信息

# tfs - 为构建服务器指定 NuGet 源以与 NuGet 包还原一起使用？

> ID：10641169
> 
> 赞同：40
> 
> 时间：2012-05-17T18:09:04.027
> 
> 标签：tfs, nuget

我正在使用 NuGet 包还原。我想在 TFS 构建服务器过程中指定自定义源。

隐藏的“.nuget”文件夹中的 NuGet.targets 文件表明您可以指定源存储库，或者它将回退到 %APPDATA%\NuGet\NuGet.config 中的 NuGet.config。

然而，隐藏的“.nuget”文件夹中也有一个 NuGet.config。我假设如果您没有在 NuGet.targets 中指定源存储库，它将回退到隐藏的“.nuget”文件夹中的 NuGet.config。情况似乎并非如此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-07-02T09:40:52.717

使用当前版本的 NuGet，可以在解决方案的 NuGet.config 文件中指定自定义存储库并在构建期间启用包还原。有了这个 NuGet.config 文件，我们可以在 TFS 构建下自动从内部存储库恢复包，而无需在构建定义中执行任何其他操作：

```
<configuration>
  <solution>
    <add key="disableSourceControlIntegration" value="true" />
  </solution>

  <packageSources>
    <add key="Internal" value="http://MyInternalRepository/nuget" />
  </packageSources>

  <packageRestore>
    <add key="enabled" value="True" />
  </packageRestore>

</configuration> 
```

注意：TFS2013 的默认构建过程模板已经实现了 NuGet 包还原工作流，无需任何特殊配置，如下所述： http: [//docs.nuget.org/docs/reference/package-restore-with-team-build](http://docs.nuget.org/docs/reference/package-restore-with-team-build)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-17T18:28:59.183

如果启用包还原，您将在 $(SolutionDir)\.nuget 文件夹中找到 NuGet.targets MSBuild 文件。

您可以通过修改 <PackageSources>""</PackageSources> 元素来设置包源。

例子：

```
<!-- Package sources used to restore packages. By default will used the registered sources under %APPDATA%\NuGet\NuGet.Config -->
<PackageSources>"http://packages.nuget.org/api/v2/;http://myget.org/F/myfeed/"</PackageSources> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-17T20:37:06.670

根据 NuGet 开发人员之一 pranavkm 的说法，在撰写本文时，NuGet 包还原将不会使用隐藏的“.nuget”文件夹中的 NuGet.config 来获取源代码。它目前仅用于解决方案特定设置（忽略源代码控制绑定）。他说，NuGet 团队正在考虑利用 NuGet.config 的各个方面，但它的优先级不断提高。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-19T15:35:14.480

另一种选择是将源添加到构建服务器上的机器范围（不是特定于用户）的 nuget 配置中。

[https://stackoverflow.com/a/27569020/374837](https://stackoverflow.com/a/27569020/374837)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-15T19:37:54.297

在 tfs build 2017 中，当您使用 NuGet 还原任务版本 1.* 时，您可以选择在构建期间使用的 NuGet.Config 文件。[请参见NuGet 还原任务](https://i.stack.imgur.com/ka6Yu.png)下方的图片

# java - 使用 javascript 提交按钮登录网站（使用 Java）

> ID：10641172
> 
> 赞同：1
> 
> 时间：2012-05-17T18:09:28.327
> 
> 标签：java, javascript, authentication

VIA JAVA，我想登录一个网站。

身份验证：该站点有一个执行重定向到主页的 javascript 按钮。我的网络爬虫可以使用 Jsoup 以编程方式登录到具有 html 按钮的网站。但是，当我尝试登录一个在 javascript 中提交的网站时，我似乎无法以迄今为止发现的任何方式获得身份验证。

到目前为止，我已经尝试过：

*   我尝试使用本机 java api、使用 URLConnection 和 OutputWriter 登录。它用正确的值填充用户和密码字段，但是当我尝试执行 javascript 方法时，它根本不起作用；
*   汤。（它可以让我登录到任何包含 html 按钮的网站。但由于它不支持 javascript，所以没有多大帮助；
*   我试过 HtmlUnit。它不仅打印了无数行输出，还需要很长时间才能运行，最后仍然失败。
*   最后，我尝试使用 Rhino（基于 HtmlUnit），让它在一个长长的 javascript 方法列表中工作。但无法认证；
*   我已经尝试过 Selenium，但一无所获，也..

我的想法不多了。也许我还没有探索这些 API 中包含的所有解决方案，但我仍然无法登录到包含 javascript 按钮的网站。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:32:33.720

使用[Selenium Webdriver](http://seleniumhq.org/projects/webdriver/)，[向浏览器发送 javascript 命令](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q%3a_How_do_I_execute_Javascript_directly?)。我已经成功地使用它在客户端上对复杂的 javascript/ajax 程序进行了可靠且重复的数百次测试。

如果您以特定网页为目标，则可以自定义脚本并使其非常小。

```
WebDriver driver; // Assigned elsewhere
JavascriptExecutor js = (JavascriptExecutor) driver;

// This is javascript, but can be done through Webdriver directly
js.executeScript("document.getElementById('theform').submit();"); 
```

[填写表单](http://seleniumhq.org/docs/03_webdriver.html#user-input-filling-in-forms)假定已使用[Selenium Webdriver API](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example)处理。您还可以将命令发送到`click()`右键等。

使用 Selenium Webdriver，您还可以将`<script>`标签写入浏览器，以加载更大的库。请记住，您可能必须等待/休眠，直到浏览器加载脚本文件 - 您自己的脚本文件和原始网页用于登录过程的脚本文件。加载和执行所有这些可能需要几秒钟。为避免睡眠时间过长，请使用更可靠的方法，即注入一个小脚本来检查其他所有内容是否已加载（检查网页脚本的状态标志、浏览器状态）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T02:46:12.273

我建议[HtmlUnit](http://htmlunit.sourceforge.net/)：

> HtmlUnit 是“Java 程序的无 GUI 浏览器”。它对 HTML 文档进行建模并提供一个 API，允许您调用页面、填写表单、单击链接等……就像您在“普通”浏览器中所做的一样。
> 
> 它具有相当好的 JavaScript 支持（不断改进），甚至能够使用非常复杂的 AJAX 库，根据您要使用的配置模拟 Firefox 或 Internet Explorer。
> 
> 它通常用于测试目的或从网站检索信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:38:38.257

我有一个听起来相似的问题（我有一个称为 javascript 方法的登录按钮）。

当我通过网络浏览器手动单击登录按钮时，我使用 JMeter 观察传递了什么（但我想你也可以使用 WireShark 来做到这一点）。

在我的 Java 代码中，我创建了一个包含所有正在发送的参数的 PostMethod。

```
PostMethod post = new PostMethod(WEB_URL); // URL of the login page
// first is the name of the field on the login page,
// then the value being submitted for that field
post.addParameter(FIELD_USERNAME, "username");
post.addParameter(FIELD_PASSWORD, "password"); 
```

然后我使用 HttpClient (org.apache.commons.httpclient.HttpClient) 来执行 Post 请求。

需要注意的一件事是，通过手动查看登录页面，我没有看到正在传递的“隐藏”参数。这些是在我使用 JMeter 时向我透露的。

我很乐意澄清任何似乎不清楚的事情。

# c# - 防止网格视图中的冲突编辑

> ID：10641178
> 
> 赞同：0
> 
> 时间：2012-05-17T18:09:55.097
> 
> 标签：c#

我有一个设置为只读的 datagridview 窗口。用户有一个复选框可以取消选中，然后单元格是可编辑的。现在可以打开这个 datagridview 的另一个窗口。第二个以只读方式打开。用户取消选中只读框以进行编辑。

我应该确保只在一个datagridview窗口上允许只读，即：如果gridform的第一个实例未选中只读，那么在取消选中gridform的第二个实例上的只读之前，第一个

```
TO prevent situation of multiple conflicting eidts, editing should be enable for one DGVform. The user muct reset the currently enabled window to read only 
```

我不知道该怎么做

谢谢

# ios - 使用 ARC 的输出参数

> ID：10641180
> 
> 赞同：1
> 
> 时间：2012-05-17T18:10:00.837
> 
> 标签：ios, automatic-ref-counting

所以我读过[这个](https://stackoverflow.com/questions/7740420/out-parameters-in-arc-objective-c)问题，这似乎正是我遇到的那种问题，但那篇文章中的答案并没有解决我的问题。我正在尝试编写`NSMutableData`. 有问题的函数头如下所示：

```
-(void)readString:(__autoreleasing NSString **)str 
```

我在函数中进行了一些数据操作，以获取与数据流中的下一个字符串相对应的特定字节，然后调用此行：

```
*str = [[NSString alloc] initWithData:strData encoding:NSUTF8StringEncoding]; 
```

此代码中没有错误。但是当我尝试像这样调用函数时：

```
+(id) deserialize:(SerializableData *)data
{
    Program *newProgram = [[Program alloc] init];

    [data readString:&(newProgram->programName)]; 
```

在我实际调用该函数的行上，我收到以下错误：

> 将非本地对象的地址传递给 __autoreleasing 参数以进行回写

我尝试将 放在`__autoreleasing`声明`NSString`的前面，第一个前面`*`，以及两者之间`*`，但是所有配置都会产生错误。

我是在阅读另一个问题时错过了什么，还是自那篇帖子发布以来ARC编译器中的某些内容发生了变化？

编辑：

似乎问题出在我尝试访问字符串的方式上。我可以通过执行以下操作来解决它：

```
NSString* temp;
[data readString&(temp)];
newProgram.programName = temp; 
```

但我宁愿直接访问 ivar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:11:32.277

你不能。[您可能会从 LLVM 的文档Automatic Reference Counting](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership.restrictions.pass_by_writeback)中获得洞察，特别是第 4.3.4 节。“通过写回传递给输出参数”。但是，除了您无法做到这一点（具体而言，这未在“法律表格”中列出）之外，实际上并没有太多额外的细节，您已经弄清楚了。尽管也许您会发现其中的原理很有趣。

# jquery - onComplete div 移除

> ID：10641181
> 
> 赞同：1
> 
> 时间：2012-05-17T18:10:02.227
> 
> 标签：jquery, html, hyperlink

我正在尝试设置一个函数以在单击链接时在屏幕上为 div 设置动画。我已经设置了调用 div 的函数，以及一个在单击“X”按钮时将其关闭的函数，但我希望该函数在单击主链接时运行，然后继续为新内容设置动画。我我对 jQuery/JavaScript 相当陌生，所以请原谅我的任何无知

我当前的代码如下 -

单击函数将 div 调用到屏幕上

```
$("#market a").click(function(){
    $("#market_info").show();
}); 
```

并使用单独的“X”按钮清除 div

```
$("#fade_bg, .close").click(function(){
    $("#fade_bg").fadeOut("slow");
    $("#infobox").animate({left: '-1200px' }, "slow", function() {
        $("#infobox > div").css("display", "none");
    });
    return false;
}); 
```

最初我打算`onComplete`在 links 函数中使用 an 来运行后一个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:12:34.500

```
 $("#infobox").animate({left: '-1200px' }, "slow", function() {
        $(" > div", this).css("display", "none");
    }); 
```

# list - Python __init__ 函数的变量标识 - 谁能解释一下？

> ID：10641188
> 
> 赞同：4
> 
> 时间：2012-05-17T18:10:33.050
> 
> 标签：list, identity, init

我有一个关于Python 中的类**初始化函数的查询。**我正在尝试创建一个文本冒险游戏类型的环境，每个房间都有一个“项目”属性，存储为一个列表。我尝试了以下方法：

教室：

```
def __init__(self,items=[]):
    self.items=items 
```

但是我发现，每个在启动时没有定义项目的房间不仅会得到一个空列表，还会得到*相同*的空列表。现在，如果我创建一堆房间并将一个项目附加到其中一个，则该项目会出现在每个房间中。

很容易修复（手动为每个房间分配一个空列表），但我不明白为什么会发生这种情况。我会想象创建房间 a 会将 a.items 创建为一个空列表，而房间 b 将创建 b.items。但是谁能解释为什么这些会是相同的？有没有办法用默认值生成上述函数，每次都创建一个不同的列表？

干杯，

比利。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:31:44.400

您必须了解python中的默认参数。当您编写 items=[] 时，您创建了一个全局变量 []，当没有提供适当的参数时，您将其分配给 item。这意味着每次 items 采用默认值时，都会为其分配相同的 [] 对象。（记住，在 Java 中，变量只是对对象的引用。所有项目变量都是对同一个对象的引用）。

正式解释： [http ://effbot.org/zone/default-values.htm](http://effbot.org/zone/default-values.htm)

你可以做的是：

```
def __init__(self, items=None):
    if items is None:
        items = []
    self.items = items 
```

这样，默认值 None 永远不会改变。当发现时，会创建一个新列表（这次是一个真正的新列表，而不是全局列表）。

# matlab - matlab如何保存输出？

> ID：10641189
> 
> 赞同：2
> 
> 时间：2012-05-17T18:10:35.413
> 
> 标签：matlab

我对如何保存函数结果有疑问

我有函数返回两个输出，这个函数在 for 循环中，所以输出的值是变化的。我如何将这个输出保存在文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:40:33.443

```
for i=1:N
   [out1 out2] = myfun();
   name = ['mySaveNumber_' num2str(i)];
   save(name);
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:12:28.370

选择 -> 复制 -> 将您的输出粘贴到文本文件中（这意味着我不明白您的问题）

# html - HTML5 音频的状态

> ID：10641191
> 
> 赞同：1
> 
> 时间：2012-05-17T18:10:47.703
> 
> 标签：html, audio, html5-canvas, html5-audio

我最近一直在研究在网络浏览器中进行一些音频处理和可视化，作为一种宠物项目。当然，我立即用谷歌搜索看看其他人在这方面做了什么。大多数演示都是几年前的。许多软件包要么不再工作，要么（在我看来）不必要地复杂。该标签似乎不支持任何允许我**在播放音频数据时访问它的东西**。

有谁知道是否有一种简单的方法可以创建一个事件回调，该回调在每次新音频数据开始在给定波形内播放时触发？

不幸的是，Chrome（这是我喜欢使用的主要浏览器）似乎不支持[Mozilla Audio Data API 。](https://wiki.mozilla.org/Audio_Data_API)没有一个事件正确注册，它们永远不会触发。

当我想要做的只是创建一个非常简单的波形显示时，我真的更愿意不必对这样的东西进行逆向工程[。](http://www.grantgalitz.org/sound_test/)

对于我可能找不到的简单库或函数的任何建议/建议将不胜感激！我保证我已经用谷歌搜索了几天，但没有找到任何好的、明显的解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:27:34.637

您需要[网络音频 API](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)（[HTML5 摇滚教程），不幸的是，目前](http://www.html5rocks.com/en/tutorials/webaudio/intro/)[Firefox、Chrome 和 Safari](http://caniuse.com/audio-api)仅部分支持该API 。

毫无疑问，Mozilla 音频 API 帮助塑造了 W3 提案，但我猜想现在它已被[弃用，支持新兴的 W3 标准的实施。](https://developer.mozilla.org/en/Introducing_the_Audio_API_Extension)

# html - 标记链接在 Firefox 中不起作用，但在 IE 中起作用

> ID：10641193
> 
> 赞同：0
> 
> 时间：2012-05-17T18:11:04.253
> 
> 标签：html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:57:10.220

Your A tag is being created before the td. This is invalid HTML and will cause unexpected behaviour.

```
<a href="../homepage.aspx">
    <td id="myHeader_td0_a" class="Tab_White" width="61" align="center" valign="middle">Home</td>
</a> 
```

Needs to be

```
<td id="myHeader_td0_a" class="Tab_White" width="61" align="center" valign="middle">
     <a href="../homepage.aspx">Home</a>
</td> 
```

Whatever code is generating this needs to output the HTML correctly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:16:04.470

尝试这个

```
<td id="myHeader_td1_a" class="Tab_Blue" width="61" align="center" valign="middle" lock="true"> 
     <a href="../listing/summarytreemain.aspx">Plan</a>
</td> 
```

假设这实际上是在一个表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:13:39.453

那是因为您的 html 不正确，a`td`只能在表格中。这就是为什么您看到不一致的原因。

删除表格单元格并简单地使用这个

```
<a href="../listing/summarytreemain.aspx">
<span id="myHeader_td1_a" class="Tab_Blue" width="61" align="center" valign="middle" lock="true">Plan</span>
</a> 
```

# backbone.js - 谷歌喜欢搜索骨干集合

> ID：10641196
> 
> 赞同：0
> 
> 时间：2012-05-17T18:11:15.033
> 
> 标签：backbone.js, underscore.js

我希望能够搜索backbonejs集合中包含的模型属性。我现在就是这样做的...

```
wherePartial: function(attrs) {
      // this method is really only tolerant of string values.  you can't do partial
      // matches on objects, but you can compare a list of strings. If you send it a list
      // of values; attrs={keyA:[1,2,3],keyB:1}, etc the code will loop through the entire
      // attrs obj and look for a match. strings are partially matched and if a list is found
      // it's expected that it contains a list of string values.  The string values should be considered
      // to be like an OR operation in a query.  Non-list items are like an AND.
        if (_.isEmpty(attrs)) return [];
        var matchFound = false;
        return this.filter(function(model) {
          // this is in the outer for loop so that a function isn't created on each iteration
          function listComparator(value, index, list){
            return model.get(key).toLowerCase().indexOf(value.toLowerCase()) >= 0;
          }
          for (var key in attrs) {
            if (_.isArray(attrs[key])){
              matchFound = _.any(attrs[key],listComparator);
              if (matchFound !== true) return false;
            } else {
              matchFound = model.get(key).toLowerCase().indexOf(attrs[key].toLowerCase()) >= 0;
              if (matchFound === false) return false;
            }
          }
          return true;
        });
      } 
```

假设“C”是一个实例化的集合，这就是我使用它的方式：

姓名：joe（昵称：joe the man 昵称：joe 酷昵称：joey）

在文本框中输入并转换为：

C.wherePartial({name:"joe",nicknames:["joe the man","joe cool","joey"]})

上述方法返回所有名称为 joe 的模型，以及在该范围内，任何名称为 joe 的模型和任何昵称。它适用于我的用途。但是，我真的很想进行不需要键：值模式的搜索。我想在搜索框中执行此操作，例如在网络上使用搜索引擎时。我想过只查看每个模型的每个属性，但是当您拥有大量集合（160k+ 模型）时，这需要一段时间。

过去有没有人遇到过这样的需求？如果是这样，您是如何解决的？我想将搜索保留在客户端上，而不是对后端使用任何 ajax 调用。这样做的原因是整个集合已经加载到客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:44:43.637

我想了一个办法。在模型实例化期间将属性序列化为字符串。监听更新并更新序列化。

```
serializeAttr: function(){
 this.serializedAttr = "";
 var self = this;
 _.each(this.toJSON(),function(value, key, list){
   self.serializedAttr += value;
 });
} 
```

然后我可以对该缓存值进行简单搜索：

cc.serializedAttr.toLowerCase().indexOf("joe") >= 0

# c++ - 在模板特化中添加单个构造函数方法

> ID：10641198
> 
> 赞同：0
> 
> 时间：2012-05-17T18:11:18.730
> 
> 标签：c++, templates

我有以下课程：

```
template <typename T>
class Fixed2DContainer {

    T* ptr;

public:
    const int total_cols;
    const int total_rows;

    Fixed2DContainer(int cols, int rows);
    T& operator()(int col_n, int row_n);
    ~Fixed2DContainer();

private : //disallow copy
    Fixed2DContainer& operator=(const Fixed2DContainer&);
    Fixed2DContainer operator()(const Fixed2DContainer&);
}; 
```

现在我想为某个类专门化这个模板，这样唯一的改变就是我可以有另一个构造函数。基本上我希望能够做到：

```
Fixed2DContainer<Image>("filename.jpg"); 
```

有没有一种优雅的方式来做到这一点？我对模板还很陌生，所以我不知道难度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:16:30.347

如果您的编译器支持它，C++11 具有*继承构造函数*，几乎可以让您到达您想要的位置：

```
template <typename T>
class Base {};              // has all the implementation

template <typename T>
class Template {
   using Base::Base;
   //Template() = delete;   // You might need this if you don't want
                            // the default constructor
};

template <>
class Template<int> {
   using Base::Base;
   Template( std::string const & x ) {}
   //Template() = delete;   // You might need this if you don't want
                            // the default constructor
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:28:15.867

这是我在之前评论中的意思的一个简单示例...

```
template <typename T>
class Fixed2DContainerBase {

  T* ptr;

public:
  const int total_cols;
  const int total_rows;

  Fixed2DContainerBase(int cols, int rows);
  T& operator()(int col_n, int row_n);
  ~Fixed2DContainerBase();

private : //disallow copy
  Fixed2DContainerBase& operator=(const Fixed2DContainerBase&);
  Fixed2DContainerBase(const Fixed2DContainerBase&);
};

// primary template
template <typename T>
class Fixed2DContainer : public Fixed2DContainerBase<T> {

  Fixed2DContainer(int cols, int rows);
  ~Fixed2DContainer();
};

// explicit specialization
template <>
class Fixed2DContainer<Image> : public Fixed2DContainerBase<Image> {

  Fixed2DContainer(int cols, int rows);
  Fixed2DContainer(const std::string&);
  ~Fixed2DContainer();
}; 
```

注意，因为基类是不可复制的，派生类也是如此。如果所有清理都可以由基析构函数完成，则可能不需要在派生类中定义析构函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:39:37.923

我自己也有同样的问题。不幸的是，每个构造函数都必须存在于通用模板中。不过，您可以避免人们在运行时使用错误的构造函数；

```
template <typename T>
class Fixed2DContainer {

    // omitted

    Fixed2DContainer(string fileName)
    {
        // Do not allow construction of Fixed2DContainer with
        // string argument in general case
        ASSERT(false);
        // or
        throw new ExceptionType("Not implemented");
    }

    // omitted
};

template<>
class Fixed2DContainer<Image> {

    // omitted

    Fixed2DContainer(string fileName)
    {
        // Actual construction code
    }

    // omitted
}; 
```

断言是首选，因为您的代码将在断言上中断，而在异常情况下，它将在捕获时中断，从而使调试变得稍微困难​​。

# python - AttributeError：“模块”对象没有属性“pydebug”

> ID：10641201
> 
> 赞同：5
> 
> 时间：2012-05-17T18:11:28.627
> 
> 标签：python, python-2.6

尝试运行 python 脚本时，出现错误`AttributeError: 'module' object has no attribute 'pydebug'`。我正在使用 Python 2.6。

完整错误：

```
File "/lib/python2.6/distutils/sysconfig.py", line 238, in get_makefile_filename
    return os.path.join(lib_dir, "config" + (sys.pydebug and "_d" or ""), "Makefile")
AttributeError: 'module' object has no attribute 'pydebug' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T17:52:25.593

我在自己构建的 python 上尝试运行 Ubuntu 12.04.1 系统 gdb 时遇到了这个问题。我希望 Ubuntu 已经在系统 gdb 中构建了一些钩子，以便它使用 Python 的调试版本；但是这些钩子并没有抓住我自己的蟒蛇中的任何东西。我通过构建自己的 gdb 并运行它来解决这个问题。

这是命令行和完整的回溯：

```
price@neverland:~/LSST/ip_diffim[master] $ gdb --args python tests/SnapPsfMatch.py 
Traceback (most recent call last):
  File "/usr/lib/python2.7/site.py", line 562, in <module>
    main()
  File "/usr/lib/python2.7/site.py", line 544, in main
    known_paths = addusersitepackages(known_paths)
  File "/usr/lib/python2.7/site.py", line 271, in addusersitepackages
    user_site = getusersitepackages()
  File "/usr/lib/python2.7/site.py", line 246, in getusersitepackages
    user_base = getuserbase() # this will also set USER_BASE
  File "/usr/lib/python2.7/site.py", line 236, in getuserbase
    USER_BASE = get_config_var('userbase')
  File "/usr/lib/python2.7/sysconfig.py", line 577, in get_config_var
    return get_config_vars().get(name)
  File "/usr/lib/python2.7/sysconfig.py", line 476, in get_config_vars
    _init_posix(_CONFIG_VARS)
  File "/usr/lib/python2.7/sysconfig.py", line 337, in _init_posix
    makefile = _get_makefile_filename()
  File "/usr/lib/python2.7/sysconfig.py", line 331, in _get_makefile_filename
    return os.path.join(get_path('platstdlib').replace("/usr/local","/usr",1), "config" + (sys.pydebug and "_d" or ""), "Makefile")
AttributeError: 'module' object has no attribute 'pydebug' 
```

`/usr/lib`因此，尽管我已告诉系统不要这样做，但它似乎仍在寻找错误的 python (in )：

```
price@neverland:~/LSST/ip_diffim[master] $ which python
/home/price/eups/Linux/python/2.7.2/bin/python
price@neverland:~/LSST/ip_diffim[master] $ echo $PYTHONPATH | grep usr
price@neverland:~/LSST/ip_diffim[master] $ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-29T14:45:31.497

`gdb`在已安装 Python 的替代版本且链接器首选的 Ubuntu 系统上运行时，我收到错误消息。`ldd`您可以通过询问正在使用哪些库来验证您的情况是否发生了这种情况`gdb`：

```
# ldd $(which gdb)
...
        libpython2.7.so.1.0 => /usr/local/lib/libpython2.7.so.1.0 (0x00007ff75e044000)
... 
```

您可以看到运行的非品牌 Python 版本`/usr/local/lib`提供`libpython`给`gdb`而不是导致错误的官方 Ubuntu Python `/usr/lib`— 无论它是在哪个非品牌 Python 中，`/usr/local`都不能以与 Ubuntu Python 相同的方式编译被编译了，所以期望`gdb`是失望的。

解决方案是使用环境来控制链接器的行为并使其更喜欢系统`libpython`。为了更好地衡量，我还将我的`PATH`背部重新设置为完全标准的东西。我发现这有效：

```
PATH=/bin:/usr/bin LD_LIBRARY_PATH=/usr/lib gdb ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T19:49:58.853

我认为无论您尝试运行什么，都希望与 python 的特殊调试版本一起使用。`sys.pydebug`通常不会在 sys 模块的标准版本中找到，我相信如果你构建了一个调试 python，它就会在那里：

[http://docs.python.org/c-api/intro.html#debugging-builds](http://docs.python.org/c-api/intro.html#debugging-builds)

这也可能是 Debian/Ubuntu 发行版正在使用的特定构建的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-16T11:16:24.733

在 Ubunut-12.04 pyinstaller 构建的二进制文件中，从主机 python 安装调用“site.py”，调用跟踪试图获取“sys.pydebug”值。

```
$ python
Python 2.7.3 (default, Feb 27 2014, 19:58:35)
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more 
information.
>>> import sys
>>> sys.pydebug
False 
```

自定义构建的 python 缺少这个。

HACK：让 pyinstaller 二进制文件在 Ubuntu-12.04 上工作。在自定义构建的 python 中添加了以下代码更改，它为“sys.pydebug”返回零。

```
$ diff -Naur Python/sysmodule-org.c Python/sysmodule.c
--- Python/sysmodule-org.c      2018-03-15 09:37:26.539515000 -0700
+++ Python/sysmodule.c  2018-03-15 19:58:34.503031000 -0700
@@ -1106,6 +1106,7 @@
maxunicode -- the largest supported character\n\
builtin_module_names -- tuple of module names built into this 
interpreter\n\
version -- the version of this interpreter as a string\n\
+pydebug -- always return zero\n\
version_info -- version information as a named tuple\n\
hexversion -- version information encoded as a single integer\n\
copyright -- copyright notice pertaining to this interpreter\n\
@@ -1420,6 +1421,8 @@

     SET_SYS_FROM_STRING("version",
                      PyString_FromString(Py_GetVersion()));
+    SET_SYS_FROM_STRING("pydebug",
+                         PyInt_FromLong(0));
     SET_SYS_FROM_STRING("hexversion",
                      PyInt_FromLong(PY_VERSION_HEX));
  svnversion_init(); 
```

# intellij-idea - Resharper 中的 IntelliJ Idea F5 等效项

> ID：10641204
> 
> 赞同：1
> 
> 时间：2012-05-17T18:11:36.177
> 
> 标签：intellij-idea, resharper

在 IntelliJ Idea 中，当我使用 F5 键盘时，我可以使用新名称复制该类。我想知道Resharper中是否有任何等价物？

# java - 从java中的网站返回一些信息

> ID：10641206
> 
> 赞同：-1
> 
> 时间：2012-05-17T18:11:42.900
> 
> 标签：java, web

如何用 Java 打开一个网站并从中返回一些信息？例如我想去[http://xyz.com](http://xyz.com)，输入我的姓氏并返回我的国家代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:44:29.043

您可以使用`java.net.HttpURLConnection`连接到网站。要从加载的网站中抓取信息，您可以使用 Java HTML Parser 库（例如[JSoup](http://jsoup.org/)）来遍历 DOM 和/或从 DOM 中检索相关信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:15:06.577

使用[Selenium](http://seleniumhq.org/)，这是一个测试 Web 应用程序的工具，你可以做你所说的一切。尝试检查其文档

[这是java](http://seleniumhq.org/docs/05_selenium_rc.html#java)中的示例案例示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:35:07.053

如果该站点以 XML 格式返回信息，则可以进行 XML 解析以获得您想要的结果。

在这些情况下，SAX 在 XML 解析中非常方便。

# vb.net - 处理从 dll 内部抛出的异常

> ID：10641209
> 
> 赞同：1
> 
> 时间：2012-05-17T18:11:48.073
> 
> 标签：vb.net, visual-studio-2008, error-handling, ads

我正在为学校开发一个加载 dll 的项目。

加载的 dll 是我的程序和 Twincat 系统管理器之间的桥梁，它通过本地网络形成计算机和 PLC 之间的桥梁。

我需要通过从 plc 到我的程序的整个链来阅读变量。

这就是我这样做的方式：

```
Public Function adsReadReal(ByVal Variabelenaam As String) As Single
    Dim ds = New TwinCAT.Ads.AdsStream(4 * 8) ' new data stream
    Dim br = New System.IO.BinaryReader(ds) 'new binary
    Dim hVar = New Integer
    Try
        ConState(1) 
        tcclient = New TcAdsClient
        ConState(2)
        tcclient.Connect(Form1.amsAdress, 801) 'connects the tcclient to the PLC
        hVar = tcclient.CreateVariableHandle(Variabelenaam) 'creats a handle for the variable
        tcclient.Read(hVar, ds) 'read it
        ConState(5)
        Return br.ReadSingle() 'convert it from binary to readable for vb
    Catch ex As Exception
        ConState(0)
        PrintEx(ex) 'print out the exception
    finally
        tcclient.Dispose() 'make the object stop being used to prevent a lingering connection
    End Try
    Return False
End Function 
```

现在程序加载一个`TwinCAT.ADS.dll`在连接模块开始时调用的 dll。如果 Twincat 系统管理器正在运行程序正常结束，但当它不是时它崩溃并给我这个错误：

> System.DllNotFoundException 未处理
> Message="Kan DLL tcadsdll.dll niet laden: Kan opgegeven module niet vinden. (Uitzondering van HRESULT: 0x8007007E)"
> Source="TwinCAT.Ads"
> TypeName=""
> StackTrace:
> bij TwinCAT.Ads.Internal. TcAdsDllWrapper.TcAdsDll.AdsAmsUnRegisterRouterNotification()
> bij TwinCAT.Ads.Internal.TcAdsDllWrapper.AmsUnRegisterRouterNotification(Boolean throwAdsException)
> bij TwinCAT.Ads.Internal.TcLocalSystem.Dispose (Boolean disposing)
> bij TwinCAT.Ads.Internal.TcLocalSystem.Finalize()

大致翻译为：

> 无法加载 DLL tcadsdll.dll：找不到给定的模块。（HRESULT 异常：0x8007007E）

这不是我导入的dll，所以它必须来自`TwinCAT.ADS.dll`

如何防止程序向我抛出此错误，而是和平关闭程序？我试图捕获每个可能的 dll 相关操作的所有异常。

来源也在 Bitbucket 上。我会应要求将其公开。

官方但相当不方便的 Beckhoff 网站上的一些链接：

[http://infosys.beckhoff.com/espanol.php?content=../content/1034/tcquickstart/html/tcquickstart_samplevisualbasicnet.htm&id=10449](http://infosys.beckhoff.com/espanol.php?content=../content/1034/tcquickstart/html/tcquickstart_samplevisualbasicnet.htm&id=10449)

**编辑：** 显然使用 tcclient.dispose() 会导致错误，因为使用了 finnaly 语句而不是在 try 块之后

**编辑：**这当前捕获了异常，但它不处理它。

```
Dim currentDomain As AppDomain = AppDomain.CurrentDomain
AddHandler currentDomain.UnhandledException, AddressOf MyHandler
Dim tick As Byte = 0

Sub MyHandler(sender As Object, args As UnhandledExceptionEventArgs)
   Dim ex As Exception = DirectCast(args.ExceptionObject, Exception)
   MsgBox("exception tick" & Str(tick))
   tick = tick + 1
   PrintEx(ex)
End Sub 
```

**编辑：** 异常没有被正确捕获，因为在 vs2008 中发生了几个错误，但是在我按 F5 后出现了勾号（继续）

当程序直接运行时，我只看到 1 Tick。然后windows给出一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:11:56.300

您是否尝试过未处理的异常处理程序？

```
Dim currentDomain As AppDomain = AppDomain.CurrentDomain
AddHandler currentDomain.UnhandledException, AddressOf MyHandler

Sub MyHandler(sender As Object, args As UnhandledExceptionEventArgs)
   Dim e As Exception = DirectCast(args.ExceptionObject, Exception)
   Console.WriteLine("MyHandler caught : " + e.Message)
End Sub 
```

# c# - ListView 列最高值

> ID：10641215
> 
> 赞同：0
> 
> 时间：2012-05-17T18:12:19.933
> 
> 标签：c#

我不需要对 listView 进行排序我只需要从列中获取最高值，该列中的所有值都是数字。如果我能以`IEnumerable<int>`某种方式将其转换为然后我可以使用 LINQ，那就太好了。

**更新**

我现有的代码：DrawArray 是带有随机数的数组。我需要在`index.ToString()`不创建另一个列表或数组的情况下获取列的最大值。

```
for (int i = 0; i < Rounds; i++)
{
ListViewItem lvItem = new ListViewItem(i.ToString());

lvItem.SubItems.Add(new ListViewItem.ListViewSubItem(lvItem, index.ToString()));

int[] DrawArray = Draw(DrawsPerRound, RoundSize);

lvItem.SubItems.Add(new ListViewItem.ListViewSubItem(lvItem, DrawArray.Aggregate("", (s, t) => s + ", " + t.ToString()).TrimStart(new char[] { ',' })));

lvItem.SubItems.Add(new ListViewItem.ListViewSubItem(lvItem, "No"));

lvItem.BackColor = Color.PaleVioletRed;

listView1.Items.Add(lvItem);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:29:38.207

`ListView.Items`是`ListViewItemCollection`继承的`IList, ICollection, IEnumerable`

通过linq，你可以得到你想要的。

```
System.Nullable<int> max = (
              from m in listView1.Items.Cast<ListViewItem>() 
              select int.ParseInt(m.SubItems[0].Text)).Max(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:31:59.990

可能缺少一些演员或其他东西，而且有点难看，但这里有一个想法：

```
var max = listView1.Items.Cast<ListViewItem>().Max(x => int.Parse(x.SubItems[0].Text)); 
```

这使用 LINQ，因此请确保您`using System.Linq;`的文件中有并且使用的是 .NET >= 3.5。

# git - 使用 git branch -a 时隐藏或折叠以前缀/开头的分支

> ID：10641218
> 
> 赞同：0
> 
> 时间：2012-05-17T18:12:26.577
> 
> 标签：git, bash, colors

我们在一个被亲切地称为“文件夹”的“文件夹”中有大约十几个分支`zoo`（方便排序到最后，并不是一个完全不准确的描述符）。本质上，这是我们可能会在几个月后返回的工作，但不想阻塞我们的分支列表。

在可视化的 Git 客户端 Tower 中，有一个非常棒的功能，其中分支命名`zoo/branch-a`并`zoo/branch-b`表示为折叠在文件夹下`zoo`。我知道 Git 实际上并没有考虑并存在于`branch-a`文件`branch-b`夹中，但我想知道是否有办法将命令行`git`客户端配置为以类似方式运行。

最简单的解决方案是通过使用类似`gba`to的别名来隐藏这些分支`git branch -a | grep -v "zoo"`，但这会丢失我使用的分支类型（远程/本地/当前）的颜色编码`git branch -a`。有没有办法通过这些首选项传递`.gitconfig`或保留通过`git branch -a`管道输出时提供的颜色编码`grep`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:19:03.897

`git branch --color=always -a | grep --color=never -v "zoo"``git`应保留通过管道输出时提供的颜色编码`grep`。

# c# - AWS SES - 退回的邮件未送达 ReturnPath 地址

> ID：10641224
> 
> 赞同：5
> 
> 时间：2012-05-17T18:12:47.107
> 
> 标签：c#, asp.net, amazon-web-services, amazon-ses, email-bounces

我刚刚使用适用于 .Net 的 AWS 开发工具包编写了我的第一个应用程序，通过 SES 使用以下代码发送约 7500 封电子邮件：

```
AmazonSimpleEmailServiceClient client = new AmazonSimpleEmailServiceClient("awsKey", "awsSecret");

SendEmailRequest req = new SendEmailRequest()
    .WithDestination(new Destination() { ToAddresses = { "you@yourdomain.com" } })
    .WithSource("me@mydomain.com")
    .WithReturnPath("me@mydomain.com")
    .WithMessage(
        new Amazon.SimpleEmail.Model.Message(new Content("mySubject"),
        new Body().WithHtml(new Content("myBody"))));

var resp = client.SendEmail(req); 
```

我的 AWS 控制台显示约 7350 封电子邮件和约 150 封退回邮件的成功发送。

![在此处输入图像描述](../Images/7a443a9e43f29c5730349db0cc4174a4.png)

完成后已经超过 3 小时，我仍然没有收到任何退回电子邮件（“无法发送此电子邮件，因为地址不存在或其他什么......”）至 me@mydomain.com。

我如何找出这大约 150 封电子邮件中的哪些被退回，以便我可以更新我的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:34:56.940

退回邮件正在发送给我，它们只是被过滤为垃圾邮件。

我希望有更好的方法通过 SES 来处理这个问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T00:44:47.457

有更好的方法来处理它。在 SES 中，您可以将反弹配置为进入 SQS 队列，然后从从该队列读取的应用程序（或不同的专用反弹处理应用程序）以编程方式处理它们。

# zend-framework - Zend 框架：路由组合和 GET 参数

> ID：10641231
> 
> 赞同：3
> 
> 时间：2012-05-17T18:13:12.387
> 
> 标签：zend-framework, routes

在我的引导程序中，我有

```
$route = new Zend_Controller_Router_Route(
    ':language/:country/:controller/:action/*', 
    array(
        'language' => 'en',
        'country' => 'us',
        'controller' => 'bicycle',
        'action' => 'index'
    ),
    array(
        'language' => '[a-z][a-z]',
        'country' => '[a-z][a-z]'
    )
); 
```

在我看来，我有

```
echo $this->url(array('page'=>2));
//actually this translated to $route->assemble(array('page' => 2), null, false); 
```

问题是当我有一些 GET 参数时：在构建链接时不会考虑它们，这就是我真正想要的。

示例：我访问 URL（在浏览器中）

```
http://localhost/myproject/en/us/controller/action/?get1=gval1&get2=gval2&get3=gval3 
```

组装好的网址是

```
http://localhost/myproject/en/us/controller/action/page/2 
```

代替

```
http://localhost/myproject/en/us/controller/action/page/2/get1/gval1/get2/gval2/get3/gval3/ 
```

或（我更喜欢下一个）

```
http://localhost/myproject/en/us/controller/action/page/2/?get1=gval1&get2=gval2&get3=gval3 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:36:43.190

当然，一种解决方案（使用 Apache）在我看来是这样称呼的：

```
$this->url(array(page=>2)) . ($_SERVER['QUERY_STRING']?$_SERVER['QUERY_STRING']:"") 
```

但您不能确定这将始终包含在 $_SERVER 变量中。

# bash - 如果在 Bash 中，我该如何 sudo？

> ID：10641233
> 
> 赞同：14
> 
> 时间：2012-05-17T18:13:16.067
> 
> 标签：bash, shell, sudo

我需要检查另一个用户的主目录中的目录。通常我会 sudo 但这会分叉另一个进程，我也会失去我的环境。

例如，我有：

```
if [[ -d "/home/otheruser/svn" ]];
then
   echo "SVN exists"
else
   echo "SVN does not exist"
fi 
```

我需要测试条件以 root 权限运行。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-17T18:17:52.860

```
if sudo test -d "/home/otheruser/svn"; then 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T18:17:05.233

您需要在子外壳下运行它。例子：

```
if sudo bash -c '[[ -d "/home/otheruser/svn" ]]'
then
  echo "SVN exists"
else
  echo "SVN does not exist"
fi 
```

# scala - Scala：为什么我不能用占位符正确过滤我的 Int List？例如：myList.filter(_:Int => _ % 5 == 0)

> ID：10641241
> 
> 赞同：3
> 
> 时间：2012-05-17T18:14:02.410
> 
> 标签：scala, type-inference, placeholder, scala-collections

我有一个与 Scala 中的占位符语法相关的小问题。所以我有一个简单的数字列表：

```
myList = List(13, 24, 10, 35) 
```

首先，我尝试像这样过滤这个列表

```
myList.filter(_ => (_ % 5) == 0) 
```

并且编译器抱怨，因为它无法推断参数类型：

```
error: missing parameter type for expanded function ((x$2) => x$2.$percent(5)) 
```

好的，没问题：我为参数添加了一个类型

```
myList.filter(_:Int => _ % 5 == 0) 
```

现在编译器给了我这个：

```
identifier expected but integer literal found.
       someNumbers.filter(_:Int => _ % 5 == 0)
                                       ^ 
```

你们知道为什么我有这个奇怪的错误吗？我真的不明白...

提前致谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-18T00:06:41.277

你不知道，但是这个：

```
identifier expected but integer literal found.
       someNumbers.filter(_:Int => _ % 5 == 0)
                                       ^ 
```

是一个可怕的错误！好吧，不是人们想要的那种感觉，但是你设法写了一些语法正确的东西，并且与你的意图完全不同。首先，让我们看看重写有效的代码：

```
someNumbers.map(_: Int => _ <:< Any) 
```

现在，您会看到它与您编写的内容（直到错误位置）只有两个不同：`%`替换为`<:`和`5`替换为`Any`（如编译器所希望的那样——标识符而不是数字）。

你可以编译并运行上面的代码，它会返回一些东西，所以让我们试着分解它。首先，考虑以下两个陈述：

```
someNumbers.map(_ + 1)
someNumber.map(_) // does not compile 
```

它们各自的含义略有不同，可以这样重写：

```
someNumbers.map(x => x + 1)
x => someNumbers.map(x) 
```

第一个编译是因为在`x`声明参数时，编译器知道预期的类型。第二个没有编译，因为在编译器看到`x`时，它不知道将如何使用它。当然，这只是因为编译器重写了代码，但事情就是这样。

这里重要的是，当您添加 时`: Int`，编译器开始尝试编译您以第二种方式编写的内容。

你打算写的东西不是有效的代码。例如：

```
someNumbers.map(x => x + 1) // valid code
someNumbers.map((x: Int) => x + 1) // valid code
someNumbers.map(x : Int => x + 1) // "invalid" code 
```

更准确地说，第三个例子是“无效的”，因为编译器不知道类型*在哪里*结束！要了解原因，请查看以下语句：

```
val f: Int => Int = x => x 
```

在这里我们`=>`出现了两次，但每次都有不同的含义！第一种情况，`Int => Int`，是 的语法糖`Function1[Int, Int]`。换句话说，`=>`in`Int => Int`是类型的一部分。

在第二种情况下，`x => x`（大致）代表`new Function1[Int,Int] { def apply(x: Int) = x }`. 此`=>`代码中的 表示存在匿名函数，并将其参数与其主体分开。

现在我们可以理解编译器是如何解释的了`someNumbers.filter(_: Int => _ % 5 == 0)`。像这样：

```
someNumbers.filter(_: Int => _ % 5 == 0) // gets rewritten as
(x: Int => _ % 5 == 0) => someNumbers.filter(x) 
```

意思`Int => _ % 5 == 0`是假定为类型。我们已经看到了为什么`=>`不停止它，但是错误只发生在`5`！这里和那里之间发生了什么？

首先，我将回到我的可编译示例。它使用了一个不太容易理解的 Scala 构造，也不是很常见：中缀*类型*表示法。该示例可以重写如下：

```
someNumbers.map(_: Int => _ <:< Any)
someNumbers.map(_: Int => <:<[_, Any]) 
```

换句话说，就像`2 * 2`代表`2.*(2)`，`Int Map String`代表`Map[Int, String]`。这就解释了为什么编译器没有停下来`%`——它认为它代表一种类型——但它仍然给我们留下了`_`.

然而，在这一点上， 的含义`_`，尤其是重写后的形式，不应该看起来很神秘：它是一种存在类型！更具体地说，它是通配符存在类型。整个事情可以这样重写：

```
(x: Function1[Int,<:<[t, Any] forSome { type t }]) => someNumbers.map(x) 
```

或者，没有任何语法糖（但在实现上略有不同*）：

```
new Function1[Function1[Int, <:<[t, Any] forSome { type t }], List[<:<[q, Any] forSome { type q }]] { 
  def apply(x) = someNumbers.map(x) 
} 
```

现在，您不同意这与您想写的内容相去甚远吗？:-)

(*) 其实我觉得`t`和`q`原著是一样的，但是我还没有想出什么办法不用语法糖把它写出来。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T18:15:53.803

你的意思是：

```
val myList = List(13, 24, 10, 35)
myList.filter(x => (x % 5) == 0) 
```

在这种情况下，占位符`_`是`myList.map(_ + 5)`制作函数的简写`myList.map(x => x + 5)`。所以`myList.map(_ => _ + 5)`因为它有点说“将每个项目映射`myList`到一个函数`x => x`和 5 的总和”。

类似这样的占位符的另一种用法是忽略参数。所以`myList.map(_ => 1)`意味着“忽略该项目并将所有内容映射到 5”。在您的情况下，您需要该项目来决定是否过滤它，因此`_ =>`没有意义。

该表达式的`myList.filter(x => (x % 5) == 0)`意思是“对于每个`x`in `myList`，如果保留它`(x % 5) == 0`”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T19:48:29.057

关于什么：

```
myList.filter(_ % 5 == 0) 
```

# php - SSH2 返回“类型（流）的资源（2）”（PHP）

> ID：10641242
> 
> 赞同：1
> 
> 时间：2012-05-17T18:14:08.810
> 
> 标签：php, ssh, libssh2

我正在尝试使用该函数从带有 PHP`ssh2`库的远程服务器运行 SSH 命令。`ssh2_exec`

我没有得到我想要从 SSH 返回给我的东西，而是得到了这个：

```
resource(2) of type (stream) 
```

有时，如果这`2`很`3`重要。

这是我尝试使用的代码：

```
<?php

$connection = ssh2_connect('ssh.example.com', 22);

ssh2_auth_password($connection, 'root', 'password');

if($output = ssh2_exec($connection, 'uptime')) {

    var_dump($output);

} 
```

* * *

**工作解决方案**：

```
<?php

$connection = ssh2_connect('ssh.example.com', 22);

ssh2_auth_password($connection, 'root', 'password');

if($output = ssh2_exec($connection, 'uptime')) {

    stream_set_blocking($output, true);

    echo stream_get_contents($output);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:15:45.287

阅读[文档](http://php.net/manual/en/function.ssh2-exec.php)：

> 返回值
> 
> 成功时返回流，失败时返回 FALSE。

[流](http://php.net/manual/en/book.stream.php)是类似文件的对象。[您可以使用流函数或](http://us.php.net/manual/en/ref.stream.php)[fread](http://us.php.net/manual/en/function.fread.php)等文件句柄函数从中获取数据。

例如

```
$string = stream_get_contents($stream);

$line = stream_get_line($stream);

$fivebytes = fread($stream, 5); 
```

# python - 使用 *args 注入静态方法，接收类型作为第一个参数

> ID：10641248
> 
> 赞同：3
> 
> 时间：2012-05-17T18:14:35.733
> 
> 标签：python, static-methods, inject

我有几个类需要注入静态方法；这个静态方法应该以类型（而不是实例）作为第一个参数来调用，并将所有剩余的参数传递给实现（[ideone 的示例](http://ideone.com/lQXtS)）：

```
# function which takes class type as the first argument
# it will be injected as static method to classes below
def _AnyClass_me(Class,*args,**kw):
    print Class,str(args),str(kw)

 # a number of classes
class Class1: pass
class Class2: pass

# iterate over class where should be the method injected
# c is bound via default arg (lambda in loop)
# all arguments to the static method should be passed to _AnyClass_me
# via *args and **kw (which is the problem, see below)
for c in (Class1,Class2):
    c.me=staticmethod(lambda Class=c,*args,**kw:_AnyClass_me(Class,*args,**kw))

# these are OK
Class1.me()    # work on class itself
Class2().me()  # works on instance as well

# fails to pass the first (Class) arg to _anyClass_me correctly
# the 123 is passed as the first arg instead, and Class not at all
Class1.me(123)
Class2().me(123) 
```

输出是（前两行正确，另外两行不正确）：

```
__main__.Class1 () {}
__main__.Class2 () {}
123 () {}
123 () {} 
```

我怀疑 lambda 行存在问题，与默认参数混合使用，`*args`但我无法对其进行排序。

在存在其他参数的情况下，如何正确传递 Class 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:25:17.823

您需要使用[类方法](http://docs.python.org/library/functions.html#classmethod)而不是静态方法。

```
for c in (Class1,Class2):
    c.me = classmethod(_AnyClass_me)

>>> Class1.me()
__main__.Class1 () {}
>>> Class2().me()
__main__.Class2 () {}
>>> Class1.me(123)
__main__.Class1 (123,) {}
>>> Class2().me(123)
__main__.Class2 (123,) {} 
```

# java - iText Pdf 页面字节大小

> ID：10641250
> 
> 赞同：2
> 
> 时间：2012-05-17T18:14:48.657
> 
> 标签：java, pdf, itext

我有一个业务需求，需要我将 pdf 拆分为多个文档。假设我有一个 100MB 的 pdf，为了简单起见，我需要将其拆分为多个不超过 10MB 的 pdf。

我正在使用 iText。

我将获取原始 pdf，并循环浏览页面，但是如何确定每个页面的文件大小而不将其单独写入磁盘？

简单起见的示例代码

```
 int numPages = reader.getNumberOfPages();

PdfImportedPage page;
for (int currentPage = 0; currentPage < numPages; ){
    ++currentPage;
    //Get page from reader
    page = writer.getImportedPage(reader, currentPage);

// I need the size in bytes here of the page

} 

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:19:37.397

我认为最简单的方法是将其写入磁盘并在之后将其删除：

```
Document document = new Document();
File f= new File("C:\\delete.pdf");  //for instance
PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(f));
document.open();
document.add(page);
document.close();
long filesize = f.length();   //this is the filesize in byte
f.delete(); 
```

我承认，我不确定，但我不知道如果文件不存在，应该如何计算文件大小。

# java - 高效的编程技术

> ID：10641253
> 
> 赞同：0
> 
> 时间：2012-05-17T18:15:13.363
> 
> 标签：java, standards

我正在编写一个方法，并想知道附加代码是否有效，具体取决于它的编写方式：

```
 public boolean isThreeOfKind(PlayingCard[] hand)
    {
//            if(hand[0].getRank() == hand[2].getRank())
//                return true;
//            else if(hand[1].getRank() == hand[3].getRank())
//                return true;
//            else if(hand[2].getRank() == hand[4].getRank())
//                return true;

        return (hand[0].getRank() == hand[2].getRank() || 
                hand[1].getRank() == hand[3].getRank() || 
                hand[2].getRank() == hand[4].getRank());
    } 
```

所以你可以看到我有一个 if else if 语句被注释掉了，一个 return 语句基本上做同样的事情，这会更有效并且符合编码标准？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T18:17:46.330

效率上没有区别，但风格上肯定有区别，第二个要好得多。然而，这个特殊的逻辑真的只是

```
for (int i = 0; i < 3; i++) 
  if (hand[i].getRank() == hand[i+2].getRank()) return true;
return false; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T18:18:58.530

[这种类型的问题在CodeReview](http://codereview.stackexchange.com)上可能会更好，因为它更多的是一种意见。但是在我看来，阅读未注释的部分要容易得多，并且在它成为问题之前不应该担心性能（尤其是在这样的情况下）。有关更多信息，请参阅 Wikipedia 上的程序优化文章，尤其是[何时优化](http://en.wikipedia.org/wiki/Premature_optimization#When_to_optimize)部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:58:30.147

或者，如果您只喜欢方法和数组边界检查中的一个退出点：

```
boolean found = false;
for (int i = 0; !found && i < hand.length - 2; i++) 
    found = (hand[i].getRank() == hand[i + 2].getRank());
return found; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T18:26:16.240

正如杰弗里所说，在这种情况下，我会说可读性比效率更有价值（我不会说这是普遍规则）。

您可能对名为[Short-Circuit Evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)的概念感兴趣。请注意**|| 是 Java 中的短路运算符**。因此，如果第一个语句为真（其他两个不会被评估），您将获得与 if 语句相同的效果。

话虽如此，我不确定这两段代码是否编译成同一个函数（它们可能取决于编译器的实现）。**如果他们不编译相同，第二个可能会更快。**

# javascript - jQuery：选择不为空的数据属性？

> ID：10641258
> 
> 赞同：102
> 
> 时间：2012-05-17T18:15:26.280
> 
> 标签：javascript, jquery, jquery-selectors, custom-data-attribute

我正在尝试选择所有`data-go-to`属性不为空的元素。

我已经尝试过`$('[data-go-to!=""]')`了，但奇怪的是，如果我这样做，它似乎会选择页面上的每一个元素。

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2014-05-29T22:28:40.490

作为进一步参考，以及***最新的*** ^(*~~(may'14)~~ ~~(aug'15)~~ ~~(sep'16)~~ ~~(apr'17)~~ ~~(mar'18)~~ ~~(mar'19)~~ ~~(may'20)~~ ( **jan' 22** )*) ...
适用于的答案：

> ###Empty 字符串：如果***必须***存在 &***可以***有任何值*^(（或根本没有）)**`attr`*

 ****```
 jQuery("[href]"); 
```

> ###Missing 属性：如果***可以***存在&如果存在，***必须***有一些价值*`attr`*

 ****```
 jQuery("[href!='']"); 
```

> ###或两者兼有：如果***必须***存在且***必须具有***某些价值...*`attr`*

 ****```
 jQuery("[href!=''][href]"); 
```

* * *

^(***PS**：更多组合是可能的......*)

* * *

###在[jsFiddle](https://jsfiddle.net/)中检查此测试以获取示例：

*   `jQuery v1.9.1 ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/138/)
*   `jQuery v1.11.0 ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/37/)
*   `jQuery v2.1.0 ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/38/)
*   `jQuery v2.1.3 ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/39/)
*   `jQuery v2.2.4 ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/139/)
*   `jQuery v3.2.1 ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/42/)
*   `jQuery v3.3.1 ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/71/)
*   `jQuery v3.4.1 ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/137/) ^(*22 年 1 月 10 日在 jsFiddle 中提供的最后一个 jQuery 版本*)
*   `jQuery Edge ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/43/) ^(*[jQuery edge 版本](https://stackoverflow.com/questions/7035328/what-is-jquery-edge-in-jsfiddle-net)（慎用）*)
*   `jQuery v3.0.0-alpha1 ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/40/)
*   `jQuery v3.1.1 Slim ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/36/)
*   `jQuery v3.2.1 Slim ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/140/)
*   `jQuery v3.3.1 Slim ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/141/)
*   `jQuery v3.4.1 Slim ->` [`***jsFiddle online test***`](https://jsfiddle.net/gmolop/SPb84/142/) ^(*22 年 1 月 10 日在 jsFiddle 中提供的最后一个 jQuery Slim 版本*)

* * *

###Or here in SO with this [Code Snippet](https://blog.stackoverflow.com/2014/09/introducing-runnable-javascript-css-and-html-code-snippets/)。
^(** 代码片段正在运行 jQuery v2.1.1*)

```
jQuery('div.test_1 > a[href]').addClass('match');
jQuery('div.test_2 > a[href!=""]').addClass('match');
jQuery('div.test_3 > a[href!=""][href]').addClass('match');
```

```
div,a {
    display: block;
    color: #333;
    margin: 5px;
    padding: 5px;
    border: 1px solid #333;
}
h4 {
    margin: 0;
}
a {
    width: 200px;
    background: #ccc;
    border-radius: 2px;
    text-decoration: none;
}
a.match {
    background-color: #16BB2A;
    position: relative;
}
a.match:after {
    content: 'Match!';
    position: absolute;
    left: 105%;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="test_1">
    <h4>Test 1: jQuery('a[href]')</h4>
    <a href="test">href: test</a>
    <a href="#">href: #</a>
    <a href="">href: empty</a>
    <a>href: not present</a>
</div>
<div class="test_2">
    <h4>Test 2: jQuery('a[href!=""]')</h4>
    <a href="test">href: test</a>
    <a href="#">href: #</a>
    <a href="">href: empty</a>
    <a>href: not present</a>
</div>
<div class="test_3">
    <h4>Test 3: jQuery('a[href!=""][href]')</h4>
    <a href="test">href: test</a>
    <a href="#">href: #</a>
    <a href="">href: empty</a>
    <a>href: not present</a>
</div>
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2012-05-17T18:20:54.373

尝试

```
$(':not([data-go-to=""])') 
```

更新：

为了不让任何人误入歧途，这个答案将适用于旧版本的 jQuery，但不是面向未来的。由于@gmo 和@siva 的答案似乎都适用于以后的版本，所以我尊重（并鼓励你投票）他们的答案......当然希望你有一个美好的一天。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-05-17T18:28:59.950

```
$('[data-go-to!=""]:[data-go-to]').each(function() {
    // Do Your Stuff
});​ 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-30T18:02:02.927

有 'data-attributename' 并且它的值不为空：

```
$('[data-attributename]:not([data-attributename=""])') 
```

'data-attributename' 是否为空：

```
$('[data-attributename]') 
```

[JS 小提琴示例](http://jsfiddle.net/Jelgab/yjJu7/3/ "JS 小提琴示例")

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-17T18:18:37.340

我不确定一个简单的选择器，但你可以使用`filter()`：

```
$('[data-go-to]').filter(
    function(){
        return ($(this).attr('data-go-to').length > 0);
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GGt3u/)。

参考：

*   [`filter()`](http://api.jquery.com/filter/).

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-17T18:19:56.483

根据[文档](http://api.jquery.com/attribute-not-equal-selector/) ，这应该这样做

`:not([attr="value"])`

[演示](http://jsfiddle.net/dhirajbodicherla/BfQT5/)

希望这可以帮助

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-07-17T22:40:36.557

```
$('[data-go-to]:not([data-go-to=""])') 
```

[JSBIN](http://jsbin.com/yupere/2/edit)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-17T18:24:21.567

```
$('[data-go-to]').filter(function() {
    return $(this).data('go-to')!="";
}); 
```

使用`:not`,`.not()`等`:empty`只会检查元素本身是否为空，而不是数据属性。为此，您必须根据数据属性值进行过滤。

[小提琴](http://jsfiddle.net/adeneo/CmcJE/1/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-10-08T06:56:51.213

这对我有用

```
$('[attributename]').filter('[attributename!=""]') 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-17T18:19:10.520

试试这个 ：

```
$('[data-go-to:not(:empty)]') 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-01-14T13:15:24.190

这对我有用：

```
$('.data .title td[data-field!=""]') 
```************

# c# - 从数据库中检索用户并转换为用户对象

> ID：10641259
> 
> 赞同：1
> 
> 时间：2012-05-17T18:15:26.560
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在尝试这样做：

```
User user = (User)db.Users.Include("Sports").Where(a => a.UserId == currentUser.UserId); 
```

但是我遇到了演员错误。

如何从数据库中检索用户并转换为用户对象？

解决方案：

```
User user = db.Users.Include("Sports").Where(a => a.UserId == currentUser.UserId).FirstOrDefault(); 
```

或者

```
User user = db.Users.Include("Sports").SingleOrDefault(a => a.UserId == currentUser.UserId); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:24:47.653

您不需要显式转换。

```
User user = db.Users.Include("Sports").
              Where(a => a.UserId == currentUser.UserId).FirstOrDefault(); 
```

这应该可行， Asssumung`Users`是 Type 的属性`DbSet<User>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:20:19.263

你可以试试

```
 User user = (from U in db.Users.Include("Sports") where U.UserID == currentUser.UserID select U).FirstOrDefault() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:12:08.500

我会尝试

```
 var user = (from U in db.Users.Include("Sports") 
where U.UserID == currentUser.UserID select U).Single(); 
```

因为应该只有一个匹配的用户 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-22T13:50:14.390

var user = db.Users.Find(currentUser.UserId);

db.Entry(user).Reference("Sports").Load();

# bash - Unix 代码想要更改列值

> ID：10641262
> 
> 赞同：4
> 
> 时间：2012-05-17T18:15:41.807
> 
> 标签：bash, unix

我有一个看起来像这样的文件：

```
ID1 ID2 3
ID2 ID3 3
ID4 ID5 3
ID6 ID7 4
ID8 ID9 4
ID8 ID6 4 
```

我想将其更改为：

```
ID1 ID2 1
ID2 ID3 1
ID4 ID5 1
ID6 ID7 2
ID8 ID9 2
ID8 ID6 2 
```

所以我想将第三列中的所有 3 和 4 分别更改为 1 和 2。对于非常大的文件，最有效的方法是什么？提前谢谢了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T18:21:03.273

```
awk '{ $3 -= 2; print }' filename >new_filename 
```

或者，如果您真的只想触摸 3 和 4：

```
awk '{ if ( $3 == 3 ) { $3 = 1 } else if ( $3 == 4 ) { $3 = 2 }; print}' filename >new_filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:22:42.050

假设第三列始终是最后一列：

```
sed 's/\([^0-9]\)3$/\11/;s/\([^0-9]\)4$/\12/' 
```

# django - 无法完全理解 django mixins

> ID：10641265
> 
> 赞同：1
> 
> 时间：2012-05-17T18:15:50.433
> 
> 标签：django, dajaxice

我最近有一个 django 问题——其中一个答案让我很困惑：

[https://stackoverflow.com/a/10608687/1061426](https://stackoverflow.com/a/10608687/1061426)

我已经阅读了 django doco，但无法完全弄清楚 mixins 与所询问的内容或答案所指的内容之间的关系。

所以，我搜索了“django mixin tutorial”，偶然发现了一个叫做 dajax 和 dajaxice 的东西。好吧，我在撒谎，我偶然发现了这个博客：

[http://www.pythondiary.com/blog/Apr.15,2012/stay-tuned-django-ajax-tutorial.html](http://www.pythondiary.com/blog/Apr.15,2012/stay-tuned-django-ajax-tutorial.html)

我的问题是：什么是mixin？它们与 ajax 调用有何关系？它们是否用于 ajax 以外的东西？为什么我要使用 dajax 或 dajaxice 或其他一些 django 插件框架，而不仅仅是普通的 django 来使用 ajax？

此外，没有 dajax 标签，但有一个用于 stackoverflow 的 dajaxice 标签......这是否意味着 dajaxice 是要走的路？

干杯，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:26:21.147

Mixins 是一个通用的面向对象编程概念。它们与 Django 或 Dajax 等没有特别的关系。但是，Django 确实，而且 Dajax 也可能使用 mixins。

一般来说，“mixin”只是一个类，意在与另一个类混合。它通常不会自己做任何事情，而只是将功能添加到另一个类。Django 的“抽象”模型概念就是 mixin 的一个例子。你永远不会实例化一个抽象模型。相反，其他模型从抽象模型继承，获得了它的所有功能，并且实际上是那些子类被实例化。

Django 的基于类的视图（这就是将您带到这里的答案正在谈论的内容）也使用 mixins。例如，大多数基于类的视图都继承自`TemplateResponseMixin`. 这个类本身不是一个视图，除了基于类的视图继承之外，你永远不会将它用于任何事情。它只是将模板呈现为响应的所有功能的封装，因此可以在不违反 DRY（不要重复自己）的情况下将其功能“混合”到所有各种视图中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:27:06.160

不，mixin 与 Ajax 没有任何特别的关系。

mixin 只是一个类，可以用作另一个类的多重继承的一部分。Django 在其基于类的视图中广泛使用这些 - 一些类提供（例如）显示表单或模型列表的基本功能，并且您应该将它们与您自己的类混合：创建您自己的代码来实现您的拥有对该功能的扩展，同时从一个或多个 mixin 继承。

我从未使用过 Dajax，但我想它也使用 mixins 在您的视图中提供 Ajax 处理的基本实现。

# javascript - 如何使用 jquery 为 div 内的每个元素设置边距？

> ID：10641273
> 
> 赞同：1
> 
> 时间：2012-05-17T18:16:40.887
> 
> 标签：javascript, jquery, html, css

我看过：[如何使用 jquery 设置边距？](https://stackoverflow.com/questions/5314532/how-to-set-margin-with-jquery)

这就是我正在尝试的：

```
$(document).ready(function () {
    $(".content").each(function (el) {
        el.css('margin', '0px');
    })
}); 
```

但这不起作用；现在我必须在样式表中将边距设置为零。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:18:43.147

[`css`](http://api.jquery.com/css/)已经迭代了每个元素：

```
$('.content').css('margin', '0'); 
```

您遇到的问题是[`each`](http://api.jquery.com/each/)将 dom 节点本身传递给函数，但它是第二个参数：

```
$('.content').each(function (i, ele) {
    $(ele).css('margin', '0');
    //the context is also set to the element
    $(this).css('margin', '0');
}); 
```

* * *

重新阅读您的问题后，您似乎选择了错误的选择器，我不知道您是想要所有*children*还是 all *descendants*，选择器应该是：

```
$('.content > *') 
```

-或者-

```
$('.content *') 
```

分别

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T18:18:51.557

这应该可以解决问题。

```
$(document).ready(function () {
    $(".content *").css('margin', '0px');
}); 
```

问题是您在元素本身上设置边距，而不是在其子元素上。
选择器的`.content *`意思是“元素内具有类内容的任何东西”。（任何东西，而不仅仅是直接的孩子。）

# java - 我们什么时候使用接口扩展接口

> ID：10641277
> 
> 赞同：4
> 
> 时间：2012-05-17T18:16:54.187
> 
> 标签：java, interface

我想知道我们什么时候可以使用扩展另一个接口的接口。我想知道一个实际的例子以及我们何时使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T18:20:02.860

当子接口提供了超接口所提供的一切，并且做一些其他重要的事情时，你就扩展了一个接口。比如`SortedMap<K,V>`implements `Map<K,V>`，因为 sorted map 是一个 map，它支持 map 的所有操作，加上一些只适用于 sorted map 的操作。

这类似于类之间的继承，但它允许多种实现。例如，可以将 a 实现`SortedMap`为键的排序列表加上值的并行数组，而不是树。这将让用户在不更改其余代码的情况下交换更快或更好的实现。换句话说，接口之间的继承可以让您保留对接口进行编程的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:18:30.417

查看类似的接口`java.util.Collection`，`java.util.Set`了解这是如何完成的，以及如何收紧合约。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:54:12.673

1.  When we want to use multiple inheritance in our application then one interface should extends other interface.

2.  To make the parallel development of your application it is very necessary to write your code in such a way that you can incorporate newly discovered requirements into the existing code as painlessly as possible. So, if we implements the interface then concrete class names locks you into specific implementations, making down-the-line changes unnecessarily difficult. Therefore, we extends interface.

# java - Crystal Reports XI 中未找到 JDBC 驱动程序错误？

> ID：10641278
> 
> 赞同：1
> 
> 时间：2012-05-17T18:17:02.943
> 
> 标签：java, jdbc, crystal-reports, jndi, crystal-reports-xi

我为我的 Java 应用程序的报告安装了 Crystal Reports XI。当我尝试通过 JDBC(JNDI) 创建新的 mysql 连接时，出现错误“无法打开连接。详细信息：找不到 JDBC 驱动程序。” 所以我按照互联网上的教程编辑 CRConfig.xml 来路径我的 mysql 驱动程序。我将它放在其他 jar 文件所在的同一目录下，但仍然收到相同的错误消息。我也将它放在我的环境变量中，但仍然没有运气。请帮忙！我需要在明天之前完成这项工作。

编辑：顺便说一句，我在水晶报告中这样做。我正在尝试创建一个报告以在我的应用程序上进行预览。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:37:07.393

要检查的东西，如果您的文件夹或文件名中带有空格，则应将它们括在引号中。如果这不是问题，请将您的 CRconfig 类路径复制到您的问题中，这可能是其他问题。

# python - wxpython HtmlWindow：显示全部内容？

> ID：10641284
> 
> 赞同：0
> 
> 时间：2012-05-17T18:17:16.000
> 
> 标签：python, wxpython, wxhtmlwindow

如何显示 HtmlWindow 的全部内容？我在可滚动面板中有一些 HtmlWindows，我想在这些窗口中查看全文。我尝试将比例设置为 1 并将样式设置为 wx.EXPAND，但这不起作用。
目前它看起来像这样：
![控制板](../Images/1f466449651b11ca2876f36be0b808bc.png)
但我想在 windows 中看到全文：

```
some long text 
with multiple lines 
and another line 
```

* * *

示例代码：

```
import wx
from wx import html
from wx.lib.scrolledpanel import ScrolledPanel

class MyFrame(wx.Frame):
    def __init__(self, *args, **kwds):
        wx.Frame.__init__(self, *args, **kwds)
        self.notebook_1 = wx.Notebook(self, -1, style=0)
        self.notebook_1_pane_1 = ScrolledPanel(self.notebook_1, -1)

        sizer_1 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_2 = wx.BoxSizer(wx.VERTICAL)

        for _ in xrange(10):
            self.html = html.HtmlWindow(self.notebook_1_pane_1)
            self.html.SetPage('some long text<br />with multiple lines<br />' \
                              'and another line')
            self.html.SetBorders(0)
            self.sizer_3_staticbox = wx.StaticBox(self.notebook_1_pane_1, -1, 
                                                  'a')
            sizer_3 = wx.StaticBoxSizer(self.sizer_3_staticbox, wx.VERTICAL)
            sizer_3.Add(self.html, 1, wx.EXPAND, 0)
            sizer_2.Add(sizer_3, 0, wx.EXPAND, 0)

        self.notebook_1_pane_1.SetSizer(sizer_2)
        self.notebook_1.AddPage(self.notebook_1_pane_1, "tab1")
        sizer_1.Add(self.notebook_1, 1, wx.EXPAND, 0)
        self.SetSizer(sizer_1)

        self.notebook_1_pane_1.SetScrollRate(20, 20)

if __name__ == "__main__":
    app = wx.PySimpleApp()
    frame_1 = MyFrame(None, -1, size=(400, 300))
    app.SetTopWindow(frame_1)
    frame_1.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-17T18:44:08.643

您还需要为 sizer_2 提供 1 或更大的比例。

```
sizer_2.Add(sizer_3, 1, wx.EXPAND, 0) 
```

这使得 sizer_3 元素也可以适当地拉伸。否则，它只会向一个方向延伸。除非您使用高分辨率显示器，否则我也会减少您放入的 HTMLWindows 的数量。在这些低分辨率的宽屏幕上，将其扩展为所有 Windows 中的所有文本都可见是很困难的。

# php - 用户友好消息的方法错误处理

> ID：10641285
> 
> 赞同：2
> 
> 时间：2012-05-17T18:17:31.363
> 
> 标签：php, exception-handling

我有一个面向对象的应用程序（用 MVC 框架编写），而且我的错误处理过程通常是临时的。有时我返回 0 表示没有错误，有时返回 a`true`表示成功。一般来说，没有太多的一致性。

我的场景是我有一个控制器从我的模型中调用一个方法。如果该方法失败，我希望它返回一个人类可读的原因，说明错误无法完成的原因。此错误将传递给用户。例如 userDelete() 方法。我只想知道用户是否被删除，如果没有，为什么？

我以前的方法是如果删除则返回`true`，否则返回字符串。这使得`if`声明有点棘手，因为

```
if ($output = $this->someMethod()) 
```

将为字符串返回 true，所以这没有多大帮助。

我对替代方案的考虑是：

## 返回一个数组

```
array ('status'=>'error', 'message' => 'You did not specify an existing user') 
```

这将与上面显示的 if 语句兼容（即，当返回数组时将返回“false”）。我会返回`true`一个成功的函数调用。

## 使用 PHP 的 Exception 类和 try/catch 块

当代码出错时（即检查用户是否存在，结果是否定的）

```
if ($query->count == 0) {
   throw new Exception("User does not exist");
} 
```

然后在调用页面上我会写：

```
try {
   $this->someMethod();
} catch (Exception $e) {
   echo $e->getMessage() //Or some other way of handling the error
} 
```

如果我继续使用这种替代方法，那么 PHP 中的“错误形式”是什么？异常是否应该只用于实际的编码错误（即除以 0）而不是用于“更高级别”的应用程序错误处理/用户反馈？

请记住：我计划在执行期间的某个时间点将这些错误消息发送*回*用户……我是否应该担心 PHP 本身抛出的其他异常会返回给用户？我应该扩展 Exception 类来防止这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:31:07.857

就我个人而言，我使用类似于您的数组想法的东西，因为如果需要，我可以返回并存储该状态和所有其他有用的日志信息。如果一切顺利，我只需返回一个空数组以保持一致性，因为 if(someFunct()) 将在成功时为真（如果我使用 true 作为成功）或在非空数组上。这样，我只是将空数组 (!someFunc()) 等同于成功。

但是，请随意查看[这篇文章](https://stackoverflow.com/questions/5199146/when-to-use-try-catch-blocks)，我发现它对这个主题非常好。

# android - 谷歌翻译在 android webview 中不起作用

> ID：10641287
> 
> 赞同：0
> 
> 时间：2012-05-17T18:17:38.780
> 
> 标签：android, google-translate

我使用谷歌翻译将我的网页翻译成其他工作正常的语言。我在我的 android 应用程序 webview 中使用了相同的 url，但谷歌翻译没有显示在网站内。

请任何人帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:48:15.640

我得到了答案

我忘了在 web 视图中启用 javascript 现在工作正常

感谢所有答案

# javascript - jquery跳过具有特定css类的表

> ID：10641288
> 
> 赞同：1
> 
> 时间：2012-05-17T18:17:44.810
> 
> 标签：javascript, jquery, css, jquery-selectors

我正在使用表格遍历 `$("table").each(function()`

如何跳过具有 css 类“ **NotThisClass** ”的表

```
$("table").each(function(){
  if( $(this:not('.NotThisClass')))
    {
      // Do Stuff
    }
  } 
```

不工作，也不是这个，

```
if( $(this).not('.NotThisClass')) 
```

什么是正确的语法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T18:20:12.133

```
$("table").not('.NotThisClass').each(function() {
    //Do your stuff!
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T18:23:03.883

试试这个：

```
$("table:not(.NotThisClass)").each(function ()
{
  // Do Stuff
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:22:06.230

```
$("table").each(function(){
  if(!$(this).hasClass('NotThisClass')))
    {
      // Do Stuff
    }
  } 
```

# opencv - 如何遍历 JavaCV 中的 cvMat 矩阵？

> ID：10641292
> 
> 赞同：4
> 
> 时间：2012-05-17T18:17:55.640
> 
> 标签：opencv, matrix, loops, javacv

我有一个在矩阵中转换的 IplImage，现在我想逐个单元格地迭代。

```
CvMat mtx = new CvMat(iplUltima);
for (int i = 0; i < 100; i++) {
     //I need something like mtx[0][i] = someValue;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T02:19:44.730

我做到了！！我分享它：

```
CvMat mtx = new CvMat(iplUltima);   

for (int i = 0; i < 100; i++) {
    for (int j = 0; j < 100; j++) {
         opencv_core.cvSet2D(mtx, i, j, CvScalar.ONE);
    }
}
iplUltima = new IplImage (mtx); 
```

其中 i = 行和 j = 列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-26T16:09:03.170

首先，您需要从 JavaCV 导入以下内容：

导入 com.googlecode.javacv.cpp.opencv_core.CvMat；

导入静态 com.googlecode.javacv.cpp.opencv_core.CV_32F；

主程序：

```
int rows = 2;
int cols = 2;

CvMat Tab = CvMat.create( rows, cols, CV_32F );

// Manually fill the table
Tab.put(0, 0, 1);
Tab.put(0, 1, 2);
Tab.put(1, 0, -3);
Tab.put(1, 1, 4);

// Iterate through its elements and print them 
for(int i=0;i<rows;i++){
   for (int j =0;j<cols;j++){
    System.out.print(" "+ Tab.get(i,j) );
    }
   System.out.println("\n");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-18T00:04:14.887

我没有安装 Java，我无法检查此解决方案，但我认为它应该可以正常工作。

```
CvMat mtx = new CvMat(iplUltima);
val n     = mtx.rows * mtx.cols * mtx.channels

for (i <- 0 until n) {
    // Put your pixel value, for example 200
    mtx.put(i, 200)
} 
```

[这](http://code.google.com/p/javacv/wiki/OpenCV2_Cookbook_Examples_Chapter_2#Accessing_Pixel_Values)是有关 javaCV 中像素访问的参考。

# c# - 在 C# 中是否有等效于 java 的 setFocusable() 的方法？

> ID：10641293
> 
> 赞同：0
> 
> 时间：2012-05-17T18:18:04.880
> 
> 标签：c#, winforms, focus

`RichTextBox`当程序开始时，我有一个可聚焦的。在用户输入一定数量的字符后，我想阻止他们在文本框中更改/添加/等任何其他内容。

最初我将它作为 Java 应用程序编写并使用`userInputBox.setFocusable(false)`，但我找不到在 C# 中以编程方式更改它的等效方法。我正在构建一个 Windows 窗体应用程序。我没有希望用户与之交互的任何其他容器或对象，因此我无法`whatever.Focus()`将其从文本框中拉出。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:21:35.073

C# 有一个在 winforms 中广泛使用的事件模型。

您可以[`GotFocus`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.gotfocus)通过调用`Focus()`不同的控件来处理控件的事件以使其失去焦点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:28:57.507

设置`ReadOnly = true`or`Enabled = false`应该可以解决问题，除非您确实需要控件无法聚焦，在这种情况下，Oded 有一个很好的答案。

# scala - 为什么 Play 的 PushEnumerator 需要在迭代器完成之前 close()？

> ID：10641294
> 
> 赞同：3
> 
> 时间：2012-05-17T18:18:10.143
> 
> 标签：scala, playframework, playframework-2.0

以下示例改编自 Play Framework 的文档：

```
val enumerateUsers: Enumerator[String] = {
  Enumerator("Guillaume", "Sadek", "Peter", "Erwan")
}
val consumeOne = Cont[String, String](in =>
  in match {
    case Input.EOF =>
      Done("", Input.Empty)
    case Input.Empty =>
      Done("", Input.Empty)
    case Input.El(s) =>
      Done(s, Input.Empty)
  })
println((enumerateUsers |>> consumeOne).flatMap(_.run).await.get) 
```

打印出来`Guillaume`。

但是，如果我将其更改`Enumerator`为`PushEnumerator`：

```
val enumerateUsers: PushEnumerator[String] = Enumerator.imperative[String]()
// consumeOne as before
val i = enumerateUsers |>> consumeOne
enumerateUsers.push("Guillaume")
enumerateUsers.push("Sadek")
enumerateUsers.push("Peter")
enumerateUsers.push("Erwan")
println(i.flatMap(_.run).await.get)
// Timeout exception 
```

我得到了 iteratee 的承诺的超时异常。

为了让它和以前一样，我需要关闭`PushEnumerator`.

```
val enumerateUsers: PushEnumerator[String] = Enumerator.imperative[String]()
// consumeOne as before
val i = enumerateUsers |>> consumeOne
enumerateUsers.push("Guillaume")
enumerateUsers.push("Sadek")
enumerateUsers.push("Peter")
enumerateUsers.push("Erwan")
enumerateUsers.close() // <-- magic line
println(i.flatMap(_.run).await.get) 
```

这`Guillaume`和以前一样打印。

我找不到告诉我原因的文档，或者这里的语义差异是什么。有人可以指路吗？

**编辑**：我在 Play 源代码中找到了我的答案 - 花了一些时间寻找 :) 我会将 @huynhjl 的答案标记为正确，因为他回答了它，但我正在寻找的具体答案非常简单。Play 实现使用副作用来驱动套接字，这并非不合理 - 这不是我所假设的（假设会杀死一切：D）。里面`play.core.server.netty.Helpers`有一个函数叫做`socketOut[A](...)`. `socketOut[A](...)`有一个名为 的函数`step`，它返回一个 Iteratee。`e`当输入 case 匹配时，此 Iteratee 将写入输出通道`El(e)`。我的假设是 Iteratees 可以部分消耗 Enumerators 从中您可以获得一个值，但似乎唯一可能发生这种情况的方法是通过副作用......我认为:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:55:02.617

对象的作用`Enumerator`是以特定顺序将元素提供给迭代对象，直到没有更多元素或直到迭代对象完成然后返回该迭代对象。该`close()`调用指示何时没有更多输入，以便可以返回迭代结果。如果不调用*close*，可能还会有更多内容需要推送。所以我没有尝试过，但我希望这相当于你的例子：

```
val i = enumerateUsers |>> consumeOne
i.flatMap(_.run).onRedeem(println) // we will have a result we want to print
// now feed some data
enumerateUsers.push("Guillaume")
enumerateUsers.push("Sadek")
enumerateUsers.push("Peter")
enumerateUsers.push("Erwan")
// no more input, trigger promise computation
enumerateUsers.close() 
```

如果您应用于`enumerateUsers`无法提前知道需要多少元素才能获得结果的迭代对象（一般情况），则更有意义。

# nhibernate - 删除时 NHibernate KeyNotFoundException

> ID：10641297
> 
> 赞同：4
> 
> 时间：2012-05-17T18:18:22.523
> 
> 标签：nhibernate

当我尝试删除具有多对一复合键的对象时，NHibernate 抛出异常。保存对象正常工作。这是一个例外：

```
[KeyNotFoundException: The given key was not present in the dictionary.]
System.ThrowHelper.ThrowKeyNotFoundException() +28
System.Collections.Generic.Dictionary`2.get_Item(TKey key) +7455516
NHibernate.Engine.StatefulPersistenceContext.RemoveEntity(EntityKey key) in d:\CSharp\NH\nhibernate\src\NHibernate\Engine\StatefulPersistenceContext.cs:434
NHibernate.Action.EntityDeleteAction.Execute() in d:\CSharp\NH\nhibernate\src\NHibernate\Action\EntityDeleteAction.cs:87
NHibernate.Engine.ActionQueue.Execute(IExecutable executable) in d:\CSharp\NH\nhibernate\src\NHibernate\Engine\ActionQueue.cs:136
NHibernate.Engine.ActionQueue.ExecuteActions(IList list) in d:\CSharp\NH\nhibernate\src\NHibernate\Engine\ActionQueue.cs:126
NHibernate.Engine.ActionQueue.ExecuteActions() in d:\CSharp\NH\nhibernate\src\NHibernate\Engine\ActionQueue.cs:174
NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session) in d:\CSharp\NH\nhibernate\src\NHibernate\Event\Default\AbstractFlushingEventListener.cs:241
NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event) in d:\CSharp\NH\nhibernate\src\NHibernate\Event\Default\DefaultFlushEventListener.cs:19
NHibernate.Impl.SessionImpl.Flush() in d:\CSharp\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:1479 
```

这是我的域的样子：

```
public class Order : EntityBase {
    protected Order() {}
    public Order(Guid persistenceId) : base(persistenceId) {
        this.Lines = new List<OrderLine>();
    }
    public virtual int OrderId {get; private set;}
    IList<OrderLine> Lines {get; private set;}
}

public class OrderLine : EntityBase {
    protected OrderLine() {}
    public OrderLine(Guid persistenceId, Order order, int lineId) : base(persistenceId) {
        this.Order = order;
        this.LineId = lineId;
    }
    public virtual Order {get; private set;}
    public virtual LineId {get; private set;}
}

public abstart class EntityBase {
    protected EntityBase() {}
    protected EntityBase(Guid persistenceId) {
        this.PersistenceId = persistenceId;
    }
    public virtual Guid Persistenceid {get; private set;}
    public bool IsTransient {get {return Equals(this.PersistenceId, default(Guid)); }}
    public override bool Equals(object obj) {
        if(ReferenceEquals(null, obj))
            return false;
        if(ReferenceEquals(this, obj))
            return true;
        if(this.GetType() != obj.GetType())
            return false;
        return this.Equals((IEntity)obj);
    }
    public virtual bool Equals(IEntity other) {
        if(ReferenceEquals(null, other))
            return false;
        if(ReferenceEquals(this, other))
            return true;
        if(this.IsTransient || other.IsTransient)
            return false;
        return this.PersistenceId.Equals(other.PersistenceId);
    }
    public override int GetHashCode() {
        return this.IsTransient ? base.GetHashCode() : this.PersistenceId.GetHashCode();
    }
} 
```

这是我的映射文件的样子：

```
public class OrderClassMap : ClassMap<Order> {
    public OrderClassMap() {
        this.Table("Orders");
        this.Id(x => x.OrderId).Generated.Identity();
        this.Map(x => x.PersistenceId);
        this.HasMany(x => x.Lines).Inverse().KeyColumn("OrderId").Cascade.AllDeleteOrphan();
    }
}

public class OrderLineClassMap : ClassMap<OrderLine> {
    public OrderLineClassMap() {
        this.Table("OrderLines");
        this.CompositeId()
            .KeyReference(x => x.Order, "OrderId")
            .KeyProperty(x => x.LineId);
        this.Map(x => x.PersistenceId);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T17:49:02.003

我弄清楚是什么导致了错误。我的实体都有一个 PersistenceId 属性，它是一个用于唯一标识每个实体的 GUID。在我的基类 EntityBase 中，我重写了 GetHashCode 方法并返回基于 PersistenceId 的哈希码。这对 NHibernate 来说是错误的，因为我没有提供基于 Id NHibernate 预期 (OrderId) 的哈希码。我为所有实体实现了一个新的 GetHashCode 和 Equals 方法，并且删除工作正常。

# ruby-on-rails - 父窗体嵌套 Rails

> ID：10641304
> 
> 赞同：1
> 
> 时间：2012-05-17T18:18:32.813
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个`Subscription`嵌套到模型的`User`模型。

我正在尝试创建一个表单来添加新的订阅`/subscriptions/new`

此表单上显示的字段保存在父`User`模型中。

在我的`new`行动中，我只是有

```
@subscription = Subscription.new 
```

`User`问题是如何在订阅新 form_for中添加这个父级的字段？订阅表单以某种方式嵌套了父级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T23:31:22.983

如果您将用户和订阅模型中的代码包含到您的答案中，这将非常有帮助，以便我们可以看到关系。根据您的评论，听起来您正在执行以下操作：

```
class User < ActiveRecord::Base
  has_many :subscriptions
  accepts_nested_attributes_for :subscription 
end

class Subscription < ActiveRecord::Base
  belongs_to :user
end 
```

听起来您想以相同的形式为用户和订阅捕获数据。为此，您必须在嵌套表单上使用 fields_for 嵌套表单（注意`accepts_nested_attributes_for`上面的。

```
<%= form_for @user do |user_form|%> 
  <%= user_form.text_field :phone %>
  <%= user_form.fields_for :subscription @user.subscription.new do |subscription_form|%>
    <%= subscription_form.text_field :name %>
  <% end %>
<% end %> 
```

然后，在控制器的 create 方法中，您可以简单地调用：

```
@user = User.create(params[:user]) 
```

此代码未经测试，我对您的设置做了很多假设，但希望这足以让您入门。有关更多信息，fields_for 的文档在这里：[http ://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

# c# - 在 MeasureOverride（WPF 面板）中，当我没有内在所需的大小时，如何处理 availableSize 中的无穷大值？

> ID：10641308
> 
> 赞同：8
> 
> 时间：2012-05-17T18:18:43.477
> 
> 标签：c#, wpf, mvvm

我从处理 WPF 中的子类化 Panel 并实现自己的布局工作以及获取 Infinity 或 PositiveInfinity 的人那里发现了一些其他问题，该维度传递给 availableSize arg 中的 MeasureOverride。回答通常是，“这意味着您可以占用尽可能多的空间：忽略它，将所有孩子的所需尺寸相加并返回。”

就我而言，我正在制作一个动态调整大小以填充可用空间的控件，因此没有所需大小的内在概念。它只想使用整个可用大小。

当我构建 ControlTemplate 时，它​​最终嵌套在 StackPanel 中，并且它开始为可用高度获取 Infinity，即使控件没有滚动条。如果我只是将它限制在某个固定数字，它只会夹在窗口上。我尝试返回 ActualHeight，但这不起作用，因为它是周期性的：在我完成完整的布局传递之前没有 ActualHeight。所以那总是0.0。

刚开始不知道是StackPanel下Infinity，翻了一阵子参考源也没有用，最后用VisualTreeHelper跑遍了父母，看他们的ActualHeight，发现StackPanel是最深的高度非零。我把它改成了 DockPanel，因为我只需要两个控件，所以它和 StackPanel 一样有效。看哪，DockPanel 没有通过 Infinity 的可用高度。

但这只是一种解决方法。我想更深入地了解布局背后的理念以及为什么没有滚动条的标准容器之一会告诉我我可以拥有尽可能多的空间。对此的“正确”回应是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:32:09.850

这个：

> 我正在制作一个动态调整大小以填充可用空间的控件，

是一个不好的组合：

> 它最终嵌套在 StackPanel 中

“填充空间”的控件不应位于堆栈面板内。你认为它应该是多大的尺寸？

当然 ScrollPanel 也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:38:06.993

好吧，我也离线与其他人交谈过，这是我的最佳理解：

如果您想使用 LayoutTransform 或 RenderTransform 进行更复杂的布局，从而在控件的测量/排列通道和它出现的实际像素边界之间添加间接性，告诉所有堆叠控件它们可以占用尽可能多的空间的行为正如他们想要的那样是合理的，因为您只是试图布局到与屏幕上实际剪切区域分离的表面。

感觉这仍然属于“如果你将 StackPanel 包装在可滚动的东西中......”的类别，但不可否认，在我建议的版本中，一旦你开始弄乱 StackPanel 的 RenderTransform，availableSize 应该是什么。（尽管它比这更基本；RenderTransform 并没有在设计上与 MeasureOverride “玩得很好”，因为它的设计与性能的布局机制分开......所以仍然不清楚这是一个很好的论点。）

在任何情况下，一种获取 StackPanel 行为的方法，其中某些选定项目消耗其他元素未使用的剩余部分是使用 DockPanel，将 StackPanels 中的固定大小元素推到顶部或底部，动态调整大小的元素要么在顶部或底部或两个堆栈之间的中间。

我想如果我需要多个元素按比例消耗可用空间，这就是 Grid 的用途。

但是我不得不说，我仍然不明白为什么 StackPanel 在调用 MeasureOverride 时将 Infinity 向下传递给它的子元素；我看不出你为什么不传递 StackPanel 的父级传入的实际剩余无人认领的可用大小的论据，以及你为什么要传递的几个论据。

# java - 如何找出真正需要哪个包？

> ID：10641315
> 
> 赞同：1
> 
> 时间：2012-05-17T18:19:21.430
> 
> 标签：java, eclipse, package

例如，当前案例——我尝试在 Eclipse 中安装 GlassFish 适配器。它失败了，因为它需要“org.eclipse.jst.j2ee.web 0.0.0”。

如何从类（？）名称中找出我必须安装哪个包？当我选择 Eclipse 存储库并搜索“jst”时，我得到了 3 个命中（从内存中：JST Server Adapters、JST Server Adapters Extensions 和 JST Server UI——现在所有 3 个都已安装，但仍未满足要求）。

**请注意，这只是示例**——问题不是如何安装 GF，而是如何将类（？）名称解码到包中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:28:36.773

如果我理解正确，您可以使用[Jarfinder](http://www.jarfinder.com/)。该服务允许您键入类名并查找包含它的 JAR。您还可以按名称搜索 JAR

[这是](http://www.jarfinder.com/index.php/java/search/~org.eclipse.jst.j2ee.web~)您查询的结果`org.eclipse.jst.j2ee.web*`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:28:14.593

如果依赖项不是自动确定的，那么我最终会在 Google 上搜索插件所需的依赖项。另一种方法是搜索类名并确定该类所在的 Eclipse 包。我真的认为没有更好的方法，除了猜测。

* * *

比如我进入`org.eclipse.jst.j2ee.web`谷歌，在[WPT](http://www.eclipse.org/webtools/)项目页面结束。点击那里，我结束了[Java EE 工具](http://www.eclipse.org/webtools/jee/)页面，然后是[组件概述](http://www.eclipse.org/webtools/jst/components/j2ee/api/j2ee_componentoverview.html)页面，它最终显示了有问题的包。然后我会怀疑“Java EE 工具”是由于以下文本而需要安装的 Eclipse 插件：

> Java EE 项目由 jst.common 、 jst.j2ee 、 jst.servlet 、 jst.ejb 和 jst.web 子项目组成。下图可视化了这些组件之间的依赖关系，以及相关的 WST 子组件依赖关系。

但是，Eclipse 本身似乎将其称为“Eclipse Java EE Developer Tools”。

这是一个令人头疼的问题，我不打算争论。

# jsp - 如何在 JSP useBean 上设置完整对象

> ID：10641316
> 
> 赞同：0
> 
> 时间：2012-05-17T18:19:21.847
> 
> 标签：jsp, usebean

我的最终 html 由 4 个 jsp 的聚合组成（使用 jspInclude ）。我需要所有 4 个 jsp 中的用户对象。我不想将用户对象保留在会话中，因为这可能会导致潜在的内存泄漏。实现它的最佳方法是什么？我只想从数据库中查询一次。

我可以在范围请求中使用 jsp useBean 标记吗？如果是，那么如何......在 useBean 上我可以找到 setProperty() 之类的方法，但它用于设置对象的属性。如何在 useBean 上设置完整对象？

# java - 使用参数指定命名查询中的表达式

> ID：10641321
> 
> 赞同：2
> 
> 时间：2012-05-17T18:19:52.693
> 
> 标签：java, hibernate, named-query

我可以使用查询参数在命名查询中指定表（对象）、列名或表达式吗？

例如，我想使用一个查询，它允许我在选择整个对象或只选择计数之间切换。

```
select :param1
from TablePO t
where t.id = :param2 
```

并在java中设置参数，如：

```
query.setParameter("param1", "t");
query.setParameter("param2", "2"); 
```

我想通过设置来避免复制和`param1`粘贴

```
query.setParameter("param1", "t"); 
```

或者

```
query.setParameter("param1", "count(t)"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:23:47.427

不，你不能。最后，HQL 参数变成了 JDBC 准备好的语句参数，而你不能用准备好的语句来做到这一点。参数保存值，而不是查询的任意部分。数据库必须能够根据参数化查询计算出查询计划，如果你想做的事情被允许，那是不可能的。

顺便说一句，如果您刚刚尝试过，您会自己找到它。

# javascript - D3 d3.text 请求功能错误

> ID：10641325
> 
> 赞同：0
> 
> 时间：2012-05-17T18:20:06.697
> 
> 标签：javascript, text, callback, d3.js

更新后的 (mbostock-d3-dd2a424) d3.text() 函数不再成功读取我的本地文件。我看到“0”请求状态，所以下面的代码总是返回 null：

var s = req.status; 回调(s >= 200 && s < 300 || s === 304 ? req : null);

mbostock-d3-af2af6a 版本适用于我的本地文件读取： callback(req.status < 300 ? req : null);

这是一个错误吗？我可以用不同的方式调用 d3.text(fileNameList, callback) 来避免这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:14:12.493

[在pull request #632](https://github.com/mbostock/d3/pull/632)中有一个解决方法，但是，您不应该使用 d3.text（以及更普遍的 XMLHttpRequest）来读取本地文件。您应该改用本地 Web 服务器。例如，如果您运行：

`python -m SimpleHTTPServer 8000 &`

然后您可以访问`http://localhost:8000`查看您的文件。

# extjs4 - Extjs4，选择网格行和fireEvent rowClick？

> ID：10641327
> 
> 赞同：0
> 
> 时间：2012-05-17T18:20:12.427
> 
> 标签：extjs4

重新加载网格后，我需要为 rowClick 选择网格行和 fireEvent。

我试过这样

```
var orderNo = 777;
// do reload grid

var gridLen = mygrid.store.getCount(); // it return 10

for (var i = 0; i < gridLen; i++) {
    if (pickno == mygrid.store.getAt(i).get("orderNo").trim()) {
    //mygrid.getSelectionModel().selectRow(i);
    this.getOrderGrid().getSelectionModel().getSelection()[i];
    mygrid.fireEvent('itemclick', mygrid, i, mygrid.store.getAt(i));
    }
} 
```

但是，它不起作用。

有人知道如何选择网格行并运行fireEvent吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:01:52.400

而不是`this.getOrderGrid().getSelectionModel().getSelection()[i]`我认为你应该尝试

```
this.getOrderGrid().getSelectionModel().select(i); 
```

顺便说一句，为什么不显式使用命名函数来处理`itemclick`事件？如果以这种方式使用它，您可以调用该函数而不是手动触发事件。

# ruby-on-rails - 如何将 3 个变量插入同一个表格单元格并用“/”分隔它们

> ID：10641332
> 
> 赞同：0
> 
> 时间：2012-05-17T18:20:39.157
> 
> 标签：ruby-on-rails, ruby

我想将三个变量添加到同一个表格单元格中，并用 / 分隔它们，因此 BR/BA 列将有一个这样的条目：2/2/0，下面是我的微弱尝试，它当然会返回语法错误，怎么办我做吗？谢谢，亚当

```
<table class="listing" summary="Property list">
<tr class="header">

  <th>Property Address</th>
  <th>Price</th>
  <th>Sq Ft</th>
  <th>BR/BA</th>
  <th>Type</th>
</tr>
<% @properties.each do |property| %>
<tr>

  <td><%= link_to(property.address, {:action => 'show', :id => property.id}) %></td>
  <td class="center"><%= property.price %></td>
  <td class="center"><%= property.sq_ft %></td>
  <td class="center"><%= {property.bedrooms "/" property.bathrooms "/" property.half_bathrooms} %></td>
  <td class="center"><%= property.property_type %></td>
</tr>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:24:33.680

`[property.bedrooms,property.bathrooms,property.half_bathrooms].join("/")`

假设每个属性/方法返回一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:25:40.643

在 Ruby 中连接字符串是用`+`.

`property.bedrooms + "/" + property.bathrooms + "/" + property.half_bathrooms`

此外，一般来说，每当您在“我有语法错误”的问题中发布时，如果您发布了这些语法错误是什么，将会很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:30:10.187

您可以添加 3 个字段

```
attr_accessor :bedrooms, :bathrooms, :half_bathrooms

before_save :combine_cols

def combine_cols
    self.brba = "#{bedrooms}/#{bathrooms}/#{half_bathrooms}"
end

def brba=(val)
    bedrooms, bathrooms, half_bathrooms = val.split('/')
end 
```

这只是我的想法，所以可能无法完全按原样工作。

# java - java io ioexception 无法解析来自服务器地理编码器的响应

> ID：10641346
> 
> 赞同：11
> 
> 时间：2012-05-17T18:21:27.413
> 
> 标签：java, android, geolocation, gps, locationlistener

我正在使用此代码获取地理地址：

```
private String getAddress(Location location)
{
    try{
        List<Address>   addresses = new Geocoder(this,Locale.getDefault()).getFromLocation(location.getLatitude(), location.getLongitude(), 1);
        if(addresses!=null)
        {
            String address="Address not available";

            for(int i=0;i<addresses.size();i++) 
            {

                Address addre=addresses.get(i);

                String street=addre.getAddressLine(0);
                if(null==street)
                    street="";

                String city=addre.getLocality();
                if(city==null) city="";

                String state=addre.getAdminArea();
                if(state==null) state="";

                String country=addre.getCountryName();
                if(country==null) country="";

                address=street+", "+city+", "+state+", "+country;

            }
            return address;
        }

    }
    catch (Exception e) {
        return "Address not available";
    }
    return "Address not available";
} 
```

早些时候我得到了一个返回的地址列表，但现在我每次都得到这个异常：

```
java.io.IOException unable to parse response from server 
```

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T06:01:32.813

最后我得到了我的问题的解决方案。

如果您尝试非常频繁地（一分钟内多次）访问服务器以从 lat,long 获取地址，那么您可能会遇到此异常。此问题的解决方案可以是：

**1-请尽量避免在一分钟内多次点击地址。
2-在不同的设备上运行此代码。**

如果您想在同一设备上运行此代码，请清除您的应用数据（或卸载您的应用）并等待一段时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:41:11.987

我的三星 Galaxy Tab 10.1 也有同样的问题。我在几个小时内寻找解决方案，但没有任何帮助。要解决问题，请尝试以下操作：

转到位置设置并启用：

1.使用无线网络 2.使用 GPS 卫星

等待 GPS 定位修复

此后，地理编码器服务器响应。即使我禁用了无线和 GPS 定位，服务器仍在工作。我认为只有在您与 Google 共享您的位置时才能使用地理编码器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:48:47.467

我的解决方案是：

```
Settings > Date & Time > Automatic date & time (Use network-provided time) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:59:20.893

我的问题原因是没有地理编码器的适当权限

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-17T10:32:01.083

我遇到了同样的问题。我添加了这个权限

android.permission.WRITE_EXTERNAL_STORAGE

它运作良好。

# ruby-on-rails - Rails 错误 - 未找到属性

> ID：10641358
> 
> 赞同：0
> 
> 时间：2012-05-17T18:22:45.003
> 
> 标签：ruby-on-rails

我在一个名为 stream 的实例变量中使用了一些 JSON。我正在尝试像这样使用它：

```
user = stream.for_user # user model 
```

这是流的内容：

```
=> #<User _id: 4f8de8c40a5dcd0d1d00004c, agency_requested: [], encrypted_password: "$2a$10$FPVJDLkkD6AXd5SY/hL6KeuC6QR6vfU3OKI3oGCPxrTiEnAwvGOOu", avatar_file_size: nil, avatar_file_name: nil, agreed_to_terms: ["v1"], location: nil, last_name_first_initial: "Genadinik, A.", first_initial_last_name: "A. Genadinik", legacy_blogger_id: nil, created_at: Tue Apr 17 22:03:50 UTC 2012, active_advertiser_id: nil, avatar_source: :default, agency_roles: [], last_sign_in_ip: "127.0.0.1", confirmation_sent_at: Tue Apr 17 22:03:50 UTC 2012, created_via: "CMPLY-WEB", deleted_at: nil, updated_at: Fri May 11 16:37:16 UTC 2012, last_sign_in_at: Thu May 10 20:48:53 UTC 2012, display_welcome_help: true, program_influencers: [], agency_rep: true, account_type: :influencer, legacy_user_id: nil, sign_in_count: 44, _type: nil, avatar_content_type: nil, programs: [], active_agency_id: nil, account_status: :active, admin_roles: [], legacy_password: nil, gets_newsletter: false, full_name: "Alex Genadinik", last_name: "Genadinik", reset_password_token: nil, current_sign_in_ip: "127.0.0.1", authentication_token: "ViQ5q89n39zyyVUT3wLp", user_name: "me_n0_like_scrennames", time_zone: "Chihuahua", bio: nil, reset_password_sent_at: nil, current_sign_in_at: Fri May 11 16:37:16 UTC 2012, confirmation_token: nil, avatar_updated_at: nil, last_name_first_name: "Genadinik, Alex", agency_id: nil, first_name: "Alex", confirmed_at: Tue Apr 17 22:49:28 UTC 2012, email: "alex@cmp.ly"> 
```

我收到一个错误，指出我正在使用的属性未找到。

```
NoMethodError: undefined method `for_user' for #<User:0x138be12a0>
    from /Library/Ruby/Gems/1.8/gems/mongoid-2.4.5/lib/mongoid/attributes.rb:166:in `method_missing'
    from /Users/alexgenadinik/projects/cmply/cmply-app/lib/app/monitoring/parsers/linked_in_parser.rb:40:in `fetch!'
    from (irb):18 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:30:50.680

用户 = stream.try(:for_user)

try 方法在这种可能并不总是被填充的情况下很好。

# android - Android：发送短信并使其显示在短信收件箱中？

> ID：10641359
> 
> 赞同：5
> 
> 时间：2012-05-17T18:22:50.477
> 
> 标签：android, sms, send, inbox

我终于让我的应用程序能够发送短信 (SMS)，但现在的问题是，如果用户打开短信应用程序，我需要将消息显示在收件箱中。

有没有办法在收件箱中添加短信？

我目前正在使用以下代码，我可以以某种方式对其进行更改以使其显示在收件箱中吗？

```
private void sendSMS(String phoneNumber, String message)
{
    PendingIntent pi = PendingIntent.getActivity(ccc, 0, new Intent(), 0);
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, pi, null);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T18:29:29.720

[这个](http://java.dzone.com/tips/how-add-text-message-messages)链接有一个如何做的例子。

代码中的这个函数就是这样做的，完整的例子使用一个服务来完成任务：

```
private void addMessageToSent(String telNumber, String messageBody) {
    ContentValues sentSms = new ContentValues();
    sentSms.put(TELEPHON_NUMBER_FIELD_NAME, telNumber);
    sentSms.put(MESSAGE_BODY_FIELD_NAME, messageBody);

    ContentResolver contentResolver = getContentResolver();
    contentResolver.insert(SENT_MSGS_CONTET_PROVIDER, sentSms);
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T23:50:35.180

我必须在清单中添加所需的权限才能使其适用于任何有问题的人：

```
<uses-permission android:name="android.permission.WRITE_SMS"/> 
```

# git - 获取git分支中所有修改过的文件

> ID：10641361
> 
> 赞同：297
> 
> 时间：2012-05-17T18:22:58.750
> 
> 标签：git, branch

有没有办法查看分支中的哪些文件发生了变化？

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-05-17T18:53:56.150

@Marco Ponti 的答案的替代方案，并避免结帐：

```
git diff --name-only <notMainDev> $(git merge-base <notMainDev> <mainDev>) 
```

如果您的特定 shell 不理解 $() 构造，请改用反引号。

* * *

## 回答 #2

> 赞同：189
> 
> 时间：2012-05-17T18:26:35.983

您所要做的就是：

```
git checkout <notMainDev>
git diff --name-only <mainDev> 
```

这将只显示两个分支之间不同的文件名。

* * *

## 回答 #3

> 赞同：97
> 
> 时间：2017-01-05T13:19:54.383

很惊讶到目前为止还没有说过！

```
git diff main...branch 
```

所以只能看到变化`branch`

检查当前分支使用

```
git diff main... 
```

感谢 jqr

这是简写

```
git diff $(git merge-base main branch) branch 
```

所以合并基础（分支之间最近的共同提交）和分支提示

`origin/main`如果您的本地主要日期已过时，也使用而不是仅使用 master 将有所帮助

* * *

## 回答 #4

> 赞同：59
> 
> 时间：2016-12-01T10:26:05.803

我不敢相信有这么多方法可以做到这一点。我使用 whatchanged 作为某人之前发布的内容，只是带有以下论点：

```
git whatchanged --name-only --pretty="" origin..HEAD 
```

这仅列出文件名，并且仅列出在当前分支上更改的文件名。

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2017-01-04T06:29:21.033

我真的很喜欢@twalberg 的回答，但我不想一直输入当前的分支名称。所以我用这个：

```
git diff --name-only $(git merge-base master HEAD) 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2018-05-18T11:07:50.913

```
git diff --name-only master...branch-name 
```

我们要与之比较的。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2020-11-17T18:22:32.577

*2020 年 11 月更新：*

要获取当前分支中修改（和提交！）的文件列表，您可以使用标准[git](/questions/tagged/git "显示标记为“git”的问题")使用最短的控制台命令：

`git diff --name-only master...`

* * *

*   如果您的本地“master”分支已过时（在远程之后），请添加远程名称（假设它是“origin”）：

    `git diff --name-only origin/master...`

*   如果您还想包含未提交的更改，请删除`...`：

    `git diff --name-only master`

*   如果您使用不同的主分支名称（例如：“main”），请替换它：

    `git diff --name-only main...`

*   如果你想输出到标准输出（所以它是可复制的）：

    `git diff --name-only master... | cat`

*   如果您希望文件名可以在 VSCode 终端中单击，*无论您从哪个文件夹运行此命令*，请添加`--relative`：

    `git diff --name-only --relative master... | cat`

* * *

每个对不同选项的非常好的详细解释[https://blog.jpalardy.com/posts/git-how-to-find-modified-files-on-a-branch/](https://blog.jpalardy.com/posts/git-how-to-find-modified-files-on-a-branch/)

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2016-09-15T09:07:18.653

`git whatchanged`似乎是一个不错的选择。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2016-04-18T22:32:51.573

如果它可以像这样简单呢？

```
git changed 
```

如果您愿意假设主分支称为“master”，并且您从 master 创建其他分支，那么您可以将此别名添加到您的`~/.gitconfig`文件中以使其变得简单：

```
cbranch = !"git branch | grep '*' | cut -f2 -d' '"
changed = !"git diff --name-only $(git cbranch) $(git merge-base $(git cbranch) master)" 
```

在大多数情况下，这些假设适用于大多数人，但您必须意识到您正在做出这些假设。

此外，您必须使用支持`$()`. [您的 shell 很可能支持 this](https://unix.stackexchange.com/a/218065/3358)。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-01-07T09:26:58.677

```
git show --stat origin/branch_name 
```

这将为您提供已在此分支下添加或修改的文件的列表。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-11-21T10:05:22.697

由于某种原因没有人提到`git-tree`。见[https://stackoverflow.com/a/424142/1657819](https://stackoverflow.com/a/424142/1657819)

`git-tree`是首选，因为它是一个*管道*命令；意味着程序化（并且可能更快）

（假设基础分支是`master`）

```
git diff-tree --no-commit-id --name-only -r master..branch-name 
```

但是，这将向您显示分支中受影响的*所有*文件，如果您只想查看显式**修改**的文件，您可以使用`--diff-filter`：

```
git diff-tree --no-commit-id --name-only -r master..branch-name --diff-filter=M 
```

也可以使用`--name-status`代替`--name-only`来查看文件的状态（`A`/ `M`/`D`等等）

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-10-15T20:38:49.010

考虑到您在功能分支上，并且您想检查与 master 相比哪些文件发生了更改......只是这样：

```
git diff --name-only master 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-07-10T06:33:17.197

接受的答案 - `git diff --name-only <notMainDev> $(git merge-base <notMainDev> <mainDev>)`- 非常接近，但我注意到它的删除状态*错误*。我在分支中添加了一个文件，但是这个命令（使用`--name-status`）给了我删除“A”状态的文件和我添加“D”状态的文件。

我不得不改用这个命令：

```
git diff --name-only $(git merge-base <notMainDev> <mainDev>) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-11-10T05:09:02.657

我使用**grep**所以我只得到带有**diff --git**的行，它们是文件路径：

```
git diff branchA branchB | grep 'diff --git'
// OUTPUTS ALL FILES WITH CHANGES, SIMPLE HA :)
diff --git a/package-lock.json b/package-lock.json 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-06-02T13:41:46.343

扩展 @twalberg 和 @iconoclast 的功能，如果您出于任何原因使用 cmd，您可以使用：

```
FOR /F "usebackq" %x IN (`"git branch | grep '*' | cut -f2 -d' '"`) DO FOR /F "usebackq" %y IN (`"git merge-base %x master"`) DO git diff --name-only %x %y 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-12-14T10:18:53.507

以下批处理文件基于 twalberg 的回答，但适用于 Windows：

```
@ECHO OFF
C:                               :: <== OR USE A DIFFERENT DRIVE
CD \path\to\where\git\files\are  :: <== CHANGE TO THE ACTUAL PATH
SET /p b="Enter full path of an ALREADY MERGED branch to compare with origin/master: "
bash --login -i -c "git diff --name-only %b% $(git merge-base %b1% origin/drop2/master)"
PAUSE 
```

以上假设主分支是 origin/master 并且在安装 Git 时包含了 git bash（并且它的位置在路径环境中）。我实际上需要使用配置的差异工具（kdiff3）来显示实际差异，因此替换了上面的以下 bash 命令：

```
bash --login -i -c "git difftool --dir-diff %b% $(git merge-base %b1% origin/drop2/master)" 
```

# php - 目录 php

> ID：10641371
> 
> 赞同：0
> 
> 时间：2012-05-17T18:23:53.967
> 
> 标签：php, mysql, html

我有图像目录 mysite/2012/5/15/image.jpg，我的页眉和页脚位于 mysite/。然后我从数据库中获取 image.jpg 并与用户提交的标题和评论（如果有）一起显示在另一个页面中。在 header.php 和 footer.php 中，我指向一个 css 文件，该文件也位于 mysite/ 目录中。我的问题是：从我的图像目录访问页眉和页脚的最佳方法是什么？我这样做的方式如下：

```
include('../../../header.php');
include('../../../footer.php'); 
```

但是在我这样做并尝试显示页面之后，css文件不会加载，因为它不存在于图像目录中。为了解决这个问题，我在页眉和页脚中放了一堆 if 语句：

```
 if(!strcmp($thisPage,"images")) {
          echo "<link rel=\"stylesheet\" type=\"text/css\" href=\"../../../file.css\" media=\"screen,projection\" />";
          echo "<link rel=\"stylesheet\" type=\"text/css\" href=\"../../../file2.css\" media=\"print\" />;";
       }
       else
       {
          echo "<link rel=\"stylesheet\" type=\"text/css\" href=\"file.css\" media=\"screen,projection\" />";
          echo "<link rel=\"stylesheet\" type=\"text/css\" href=\"file2.css\" media=\"print\" />";
       } 
```

有没有更好的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:02:13.173

您可以使用常量，也可以简单地使用：

```
echo $_SERVER["HTTP_HOST"]; //outputs www.example.com 
```

它为您提供网站的域。

```
echo "<link rel=\"stylesheet\" type=\"text/css\" href=\"http://". $_SERVER["HTTP_HOST"] ."/css/file.css\" media=\"screen,projection\" />"; 
```

但是，当您链接到无法使用文件系统位置的样式表时，Travesty3 的一个正确方法是，您需要为 CSS 文件使用 URL。

```
define("CSS_PATH", "http://mysite.com/css"); 
```

通常，当我启动一个站点时，我做的第一件事就是设置常量，如下所示：

```
define('ROOT_DIR',$_SERVER['DOCUMENT_ROOT']);
define('SITE_URL','http://www.example.com/');
define('JS_DIR',SITE_URL . 'js/');
define('CSS_DIR',SITE_URL . 'css/'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:36:11.013

我建议您使用绝对路径而不是相对路径。

如果您担心您可能想要更改目录结构并且不想替换所有绝对路径的巨大麻烦，那么您可以将绝对路径存储在 PHP 变量或常量，甚至 Apache 服务器变量中，所以如果您的目录结构发生变化，您只需更新一个变量：

```
define("CSS_PATH", "http://mysite.com/css");

echo "<link rel=\"stylesheet\" type=\"text/css\" href=\"". CSS_PATH ."/file.css\" media=\"screen,projection\" />";

// OR

// add `SetEnv CSS_PATH "http://mysite.com/css"` to your Apache config file or envvars file

echo "<link rel=\"stylesheet\" type=\"text/css\" href=\"{$_SERVER["CSS_PATH"]}/file.css\" media=\"screen,projection\" />"; 
```

# mysql - 从不同的表中获取结果

> ID：10641372
> 
> 赞同：0
> 
> 时间：2012-05-17T18:24:05.580
> 
> 标签：mysql, sql, select

我想从table1 中获取application_id，其中genre_id = 123 和来自table2 的language_code = EN。

表格格式：

**表格1 ：**

export_date
流派_id
application_id

**表 2：**

export_date
application_id
language_code

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:30:28.050

试试这个

```
SELECT Table1.application_id
FROM Table1 
INNER JOIN Table2 ON Table2.application_id = Table1.application_id
WHERE Table1.genre_id = 123
AND Table2.language_code = 'EN' 
```

# java - 注入工厂 - 如何以及为什么？

> ID：10641375
> 
> 赞同：2
> 
> 时间：2012-05-17T18:24:23.327
> 
> 标签：java, factory, factory-pattern

在代码审查中，出现了以下评论：“我认为，您实际上是指将工厂作为实例注入，以便您可以在需要时重新绑定工厂。” 和“重要提示：工厂不应该是静态的，而应该是注入的。”

测试.java：

```
Foo foo = FooFactory.get(argument); 
```

FooFactory.java：

```
public final class FooFactory {
    public static Foo get(String argument) {
        return new Foo();
    }
} 
```

否则我应该怎么做？审稿人第一条评论中的“rebind”是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T18:33:17.027

通过做你所做的，你基本上忽略了依赖注入，而是使用了一个静态工厂。因此，如果在单元测试中，您希望您的工厂返回 Foo 的假实例而不是真实实例，那么您不能。

相反，您应该使用依赖注入（此处为 Spring 示例）：

```
public class SomeService
    private FooFactory fooFactory;

    @Autowired
    public SomeService(FooFactory fooFactory) {
        this.fooFactory = fooFactory;
    }

    public void someMethod(String arg) {
        Foo foo = fooFactory.create(arg);
        ...
    }
    ....
} 
```

现在，在单元测试中，您可以注入任何您想要的 FooFactory 实现（通常是模拟）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T18:29:11.467

对于大多数依赖注入框架，您可以在运行时绑定特定的对象实现。我敢打赌，这也是评论者所指的。当然，要利用这一点，您必须注入您的工厂，而不是静态创建它。

# sql - 子查询中的聚合

> ID：10641379
> 
> 赞同：1
> 
> 时间：2012-05-17T18:24:33.940
> 
> 标签：sql

我正在摆弄创建子查询只是为了习惯它们。如果某人的 ID 在联结表中出现 X 次，我正在尝试获取一个人的 ID# 和相关费用。我试过了

```
select id, charges from myTable
where id in
(
    select id from jxnTable
having (count(jxn.id> 10))
group by jxn.id 
```

这给了我错误`jxn.id is invalid in the select list because it is not contained in either an aggregate function of a group by clause.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:27:00.877

除了您的子句中的一些奇怪之外，您`GROUP BY`属于子查询。`()``HAVING`

```
select id, charges from myTable
where id in
(
    select id from jxnTable
    GROUP BY id
    having (count(id>) 10)
) 
```

这也可以通过`JOIN`针对子查询而不是`IN()`子句来完成，这可能更快：

```
SELECT m.id, charges
FROM myTable M
  INNER JOIN (
    SELECT id FROM jxnTable
    GROUP BY id
    HAVING COUNT(id) > 10
  ) cnt  ON m.id = cnt.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:27:13.877

三个错误：

*   GROUP BY 和 HAVING 必须是同一查询的一部分，并且 GROUP BY 必须以文本形式出现在相应的 HAVING 之前。
*   COUNT 表达式周围的括号不正确。
*   您没有名为 的表或别名`jxn`。

试试这个：

```
SELECT id, charges
FROM myTable
WHERE id IN
(
    SELECT id
    FROM jxnTable
    GROUP BY id
    HAVING COUNT(id) > 10
) 
```

# c# - 如何使用 regrx 解析 HTML 文件并删除所有注释掉的文本？

> ID：10641387
> 
> 赞同：-2
> 
> 时间：2012-05-17T18:25:12.170
> 
> 标签：c#, .net, regex, html

我需要解析一个 HTML 文件并删除由`<!--`HTML 注释注释掉的所有行，该文件可能包含多个部分`<!--`和`-->`.

有人知道如何使用正则表达式来删除HTML 文件`<!--`之间的注释吗？`-->`该文件有多行。

我有大约 1000 个文件要处理，我需要使用 C#。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:37:13.497

代替

```
<!--.*?--> 
```

使用空字符串

并设置选项，使点也匹配换行符。

在 C# 中，这变成

```
resultString = Regex.Replace(subjectString, "<!--.*?-->", "", RegexOptions.Singleline); 
```

# flash - 调整大小的背景在开始时不起作用，只有在调整页面大小时

> ID：10641390
> 
> 赞同：0
> 
> 时间：2012-05-17T18:25:53.937
> 
> 标签：flash, actionscript, actionscript-2

我有一个脚本（我不记得在哪里找到它），用于根据舞台宽度和高度调整图像大小。

我的问题是，当您打开网站时，背景图片很大，不适合舞台分辨率。当您调整页面大小时，脚本会工作并且图像会调整大小。最初访问网站时如何调整大小？

这是我的代码：

```
resizeImage = function (getResizeClip)
{
    //eval(getResizeClip);
    stageWidth = Stage.width;
    stageHeight = Stage.height;
    bgWidth = eval(getResizeClip)._width;
    bgHeight = eval(getResizeClip)._height;
    heightRatio = stageWidth / bgWidth;
    widthRatio = stageHeight / bgHeight;
    if (heightRatio < widthRatio)
    {
        eval(getResizeClip)._width = widthRatio * bgWidth;
        eval(getResizeClip)._height = widthRatio * bgHeight;
    }
    else
    {
        eval(getResizeClip)._width = heightRatio * bgWidth;
        eval(getResizeClip)._height = heightRatio * bgHeight;
    }
}; 
```

还有这个：

```
myListenerload = new Object();
myListenerload.onResize = function() {

loader._x = Stage.width / 2;
loader._y = Stage.height / 2;   

   resizeImage(eval(bkg_container));

};
Stage.addListener(myListenerload);
myListenerload.onResize(); 
```

我正在尝试`resizeImage(eval(bkg_container));`单独放置此代码，但没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:30:18.967

是什么`bkg_container`？电影剪辑？

不管是什么，你都应该绑定一个“onload”事件（`Loader`s有这个，也许这就是你用来加载图像的东西）然后调用那个方法。因为如果你在图片加载之前调用它，它的宽高都是`0`。所以调整大小什么都不做。

图像加载器实例中的类似内容可能是：

```
on (load) {
    _root.resizeMe(this);
} 
```

**更新**：如果`bkg_container`是影片剪辑，我想您正在使用`loadMovie`加载背景。如果是这种情况，您不能向它添加 onLoad 事件侦听器，您必须这样做`onEnterFrame`，或者可能使用`setTimeout`它不会在加载时减慢您的电影。

我建议您不要使用它，而是使用[`Loader`](http://livedocs.adobe.com/flash/9.0/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00003200.html)组件并附加一个完整的事件处理程序（对不起，我说过`load`，它应该是`complete`，并且仅适用于 Loader）。这样，您还可以添加进度事件处理程序来显示加载条等...

还有[`MovieClipLoader`](http://www.flash-creations.com/notes/dynamic_loadjpg.php)你可能想研究的，但我从来没有用过。想法是一样的。

# haskell - Haskell编译DLL“未定义引用”

> ID：10641391
> 
> 赞同：2
> 
> 时间：2012-05-17T18:25:54.073
> 
> 标签：haskell, linker

我正在按照指南在此处从其他语言调用 DLL：

[http://www.haskell.org/ghc/docs/7.0.4/html/users_guide/win32-dl​​ls.html](http://www.haskell.org/ghc/docs/7.0.4/html/users_guide/win32-dlls.html)

我首先编译 Haskell 模块和辅助 C 文件，如下所示：

> ghc -c SanitizeXSS.hs
> 
> ghc -c StartEnd.c

但是当我尝试像这样将它们链接在一起时：

> ghc -shared -o SanitizeXSS.dll SanitizeXSS IdsSanitizeXSS_stub.o StartEnd.o

我收到很多这样的错误消息：

> SanitizeXSS.o:fake<.data+0760>：未定义对“textzm0zi11zi1zi5_DataziText_zdf0rdText_closure”的引用

SanitizeXSS.o 是我编译 Haskell 模块时自动生成的目标文件。

我已经尝试过`-no-hs-main`其他线程中提到的技巧。

**上下文**：我正在尝试使用 FFI 导出一个 Haskell 函数，然后我希望在 C# 中调用托管包装器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:31:58.063

尝试传递`--make`给 ghc，以便它解析对缺少的 Haskell 库的引用。或者，列出您要明确链接的 Haskell 包。

# sed - 带递增数字的单词替换

> ID：10641392
> 
> 赞同：3
> 
> 时间：2012-05-17T18:25:59.580
> 
> 标签：sed, substitution

我有一个大文本文件，其中 DATA 一词出现超过 10000 次。我想知道如何进行条件替换，所以第一次出现在文档中时它被更改为 NO1，第二次更改为 NO2，依此类推，使用 bash。我正在考虑使用 bash 的一些复杂脚本，但我想肯定有更简单的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:08:49.217

```
perl -pe 's/DATA/ "NO" . ++$n /ge' file_in > file_out 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:32:28.150

```
 awk '{
     for (i=1;i<=NF;i++) { 
          if ($i == "DATA") printf("%s%s", "NO"++n, OFS); 
           else  printf("%s%s", $i, OFS)      
          if (i==NF) printf "\n"
     }      
  }' file > outFile 
```

或者正如格伦杰克曼正确指出的那样，这可以归结为

```
awk '{for (i=1; i<=NF; i++) if ($i=="DATA") $i = "NO" ++n} {print}' file > outFile 
```

我保留我的原始版本以展示另一种（但过度劳累）的方法;-)

我希望这有帮助。

# android - 如何在三星 Galaxy Ace 中长时间开启 LED？

> ID：10641393
> 
> 赞同：0
> 
> 时间：2012-05-17T18:26:04.540
> 
> 标签：android, samsung-mobile, led

在这一刻，我正在开发一个 Android 应用程序。这是手电筒，这个应用程序有一个打开和关闭的按钮。现在，我的问题出在三星王牌身上，它只打开了 5 秒。但我在其他帖子中找到了可能的解决方案： [三星手机中未启用闪光灯](https://stackoverflow.com/questions/8009378/flash-light-not-enabling-in-samsung-mobile)

```
AutoFocusCallback autoFocusCallback = new AutoFocusCallback();
autoFocusCallback.setHandler(handler, message); 
```

但我不知道什么是处理程序对象和消息对象。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:33:01.067

[您可以找到关于Android SDK](http://developer.android.com/reference/android/os/Handler.html)中 Handlers 的详细描述| [处理程序](http://developer.android.com/reference/android/os/Handler.html)。

基本上，您为回调提供了一个处理程序，该处理程序将在自动对焦消息被相机固件放入队列时处理它们。

# android - 拍了张照片并上传到 facebook 墙上让我出错

> ID：10641394
> 
> 赞同：0
> 
> 时间：2012-05-17T18:26:07.573
> 
> 标签：android, android-camera

这是我从我的 android 应用程序中拍照并将其上传到 facebook 墙上的代码。

```
photo_up=(Button)findViewById(R.id.camera_foto_button);
photo_up.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);              
        startActivityForResult(cameraIntent, CAMERA_REQUEST); 
    }
  });

switch(requestCode){
        case CAMERA_REQUEST:{
          Bitmap bmp = (Bitmap) data.getExtras().get("data");
          ByteArrayOutputStream stream = new ByteArrayOutputStream();        
          bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);         
          byteArray = stream.toByteArray(); // convert camera photo to byte array  
          Bundle params = new Bundle();       
          params.putByteArray("picture", byteArray);      
          params.putString("message", "Have fun");       
          Utility.mAsyncRunner.request("me/photos", params,"POST", new PhotoUploadListener(), null);
        break; 
```

拍照时，我在 2 秒后强制关闭。这是日志：

```
05-17 18:04:47.756: E/AndroidRuntime(272): Uncaught handler: thread Thread-8 exiting due to uncaught exception
05-17 18:04:47.756: E/AndroidRuntime(272): java.lang.NullPointerException
05-17 18:04:47.756: E/AndroidRuntime(272):  at com.myco.android.myapp.Gallery1$PhotoUploadListener.onComplete(Gallery1.java:368)
05-17 18:04:47.756: E/AndroidRuntime(272):  at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:254)
E/dalvikvm(272): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

此外，图像没有保存在 SD 卡中，我也想要。所有必需的权限都已添加到清单中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:29:15.867

试试这个代码，它对我有用

```
private void uploadImage() {

        if (facebook.isSessionValid()) {

            byte[] data = null;

            Bitmap bi = BitmapFactory.decodeFile(final_image_bitmap);
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
            data = baos.toByteArray();

            Bundle params = new Bundle();
            params.putString("method", "photos.upload");
            params.putByteArray("picture", data);

            AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
            mAsyncRunner.request(null, params, "POST",
                    new SampleUploadListener(), null);

        } else {
            Log.v("Session is not valid.", "");
        } 
```

# java - 分配值后将变量添加到 Map 值

> ID：10641395
> 
> 赞同：1
> 
> 时间：2012-05-17T18:26:08.333
> 
> 标签：java, map

```
public static void main(String[] args) throws FileNotFoundException {
    double agentID;
    String type;
    double price;
    Set<String> types = new TreeSet<String>();
    Map<Double, Double> agents = new TreeMap<Double, Double>();
    Scanner console = new Scanner(System.in);     
    String propertyID;
    double totalPrice = 0;

    System.out.print ("Please enter file name: ");
    String inputFileName = console.next();
    File inputFile = new File(inputFileName);
    Scanner in = new Scanner(inputFile);
    while (in.hasNextLine()) {
        propertyID = in.next();
        type = in.next(); 
        price = in.nextDouble();
        agentID = in.nextDouble();
        type = type.toUpperCase();   
        types.add(type);
        if (agents.containsValue(agentID)) {
            agents.put(agentID, agents.get(agentID)+price);
        }
        else {
            totalPrice = price;
            agents.put(agentID, totalPrice);
        }
    }
    in.close();
    System.out.println(types);
    System.out.println(agents);
} 
```

我正在尝试更新地图中`totalPrice`的值`agentID`是否已包含在`agents`地图中。当我运行程序时，它会输出分配给键的初始值，`agentID`但不会输出`totalPrice + price`. 我已经查看了这里的问题并查看了 API 文档，但我没有取得任何进展。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:28:41.533

您似乎正在尝试将 agentId 与价格映射。所以我认为你需要使用的是

```
if (agents.containsKey(agentID)) { ... } 
```

有关详细信息，请参阅[官方 containsKey javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#containsKey%28java.lang.Object%29)。

请尝试简化问题中的代码（删除文件读取和其他不需要的信息），以便更容易确定问题所在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T18:29:56.617

您正在检查价值，而不是您应该检查代理是否在地图中可用

改变

`if (agents.containsValue(agentID))`

到

```
if (agents.containsKey(agentID)) 
```

因为你`agentID`在这里用作关键

```
agents.put(agentID, agents.get(agentID)+price); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T19:19:38.260

在您的 TreeMap 中，您使用**agentID 作为键**，使用**totalPirce 作为值**，因此在您的代码中应该是

> agent.containsKey(agentID)

不是

> agent.containsValue(agentID)

问候伊苏鲁

# blackberry - 使用 WebWorks 为不同设备签署相同版本的 BlackBerry 应用程序

> ID：10641399
> 
> 赞同：1
> 
> 时间：2012-05-17T18:26:33.207
> 
> 标签：blackberry, blackberry-playbook, blackberry-webworks, blackberry-10

我正在使用 WebWorks 发布应用程序。

我希望它可以在使用 WebWorks 的 Playbook、BB10 和旧版本的 BB 上工作。

首先，我使用 Playbook Webworks SDK 构建了 .bar ......

```
bbwp C:\myapp\myapp.zip -gcsk password -gp12 password -buildId 2 
```

然后我去了BB10 SDK并运行

```
bbwp C:\myapp\myapp.zip -g password --buildId 2 
```

但我回来了'这个文件以前已经签名了。

如果我更改 buildId 它可以工作，但我想将这两个文件作为文件包提交为该应用程序的版本 2。

buildId 是否与 App World 上的应用程序版本有关，或者这些值完全无关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:21:45.473

据我所知，在这样做了几次之后......签名时使用的 buldID 与文件的版本号完全无关。

只需为 buildId 使用任何唯一编号，仅用于签名目的。

程序的版本号可以通过 config.xml 设置，也可以在将文件上传到 App World 时手动设置。

# c# - Dynamics CRM 2011，以编程方式设置货币字段

> ID：10641412
> 
> 赞同：1
> 
> 时间：2012-05-17T18:27:14.400
> 
> 标签：c#, dynamics-crm-2011, dynamics-crm, crm, currency

*如果我在 CRM 2011 中手动*创建新的联系人记录，货币字段会正确创建，“$”是可见的，我可以填充这些字段并保存记录。

如果我实例化一个 IOrganizationService 并以*编程*方式创建一个联系人记录，那么除了货币字段之外，一切正常。没有产生我可以看到的错误；记录已创建，所有其他字段都已填充，但货币字段留空。

如果我在以编程方式创建记录后尝试手动更新这些货币字段，我会收到此错误： **如果货币字段中存在值，则需要货币。选择一种货币，然后重试。**

我的用户记录设置为货币 = 美元。

为什么这在 CRM 中有效，但在 C# 中无效？我需要做什么才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-20T05:31:33.680

**设置货币**

**得到**： -

```
var totalValue = ((Money)item.Attributes[attributeName]).Value; 
```

**帖子**： -

```
newSalesOrder[attributeName] = new Money((decimal)totalValue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-20T17:48:41.977

Because of multi-currency support, you have to Explicitly set the currency for that particular record while creating using SDK.

```
EntityReference currencyType = new EntityReference();
currencyType.Id = “(The Guid Of The Currency Type Goes Here)”;
currencyType.LogicalName = “transactioncurrency”;

entity.Attributes.Add(“transactioncurrencyid”,currencyType); 
```

From CRM UI while creating, the lookup field **transactioncurrencyid** will be populated from user settings.

For the old records which got created already (when user settings was not set with default currency or in your case), you have to add that lookup into the form from Form editor, customize & publish. Then assign the currency in lookup for those records (may be bulk edit).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T13:34:38.217

交易 currencyid 类型是根据[http://msdn.microsoft.com/en-us/library/gg328530.aspx](http://msdn.microsoft.com/en-us/library/gg328530.aspx)上的联系人实体元数据进行的“查找” 。因为它是一种查找类型，所以您需要以不同的方式传递值。当您通过 Web 服务创建记录时，您必须在调用 CRM Web 服务上的 .create 命令之前为货币构建一个 EntityReference 以传递给联系人实体的属性。如果您尝试将其作为字符串传递，它将不会做任何事情，也不会像您描述的那样接受它。我还是 CRM 网络服务的新手，但试一试，看看它是否有效。

它可能是这样的：（元数据参考[http://msdn.microsoft.com/en-us/library/gg327883.aspx](http://msdn.microsoft.com/en-us/library/gg327883.aspx)）

```
EntityReference currencyType = new EntityReference();
currencyType.Id = "(The Guid Of The Currency Type Goes Here)";
currencyType.LogicalName = "transactioncurrency";

contactGoingToCrm.Attributes.Add(new keyvaluepair<string,object>("currencyid",currencyType)); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-04-23T10:36:00.960

C# 代码可能如下所示。

```
myEntity.Attributes["abc_transactionamount"] = new Money((decimal)obj.TotalAmountToPay); 
```

# xcode - 在不同的 Xcode 目标中包含不同的 PhoneGap 资产？

> ID：10641415
> 
> 赞同：1
> 
> 时间：2012-05-17T18:27:26.813
> 
> 标签：xcode, cordova

我正在尝试在一套 PhoneGap 应用程序的不同 Xcode 目标中包含不同的资产。这些应用程序都使用基本相同的代码，但每个应用程序都需要大量不同的图像和声音文件。

我了解如何在 Xcode (4.3.2) 中创建新目标，以及如何使用 Project 视图右侧的“Target Membership”窗格来包含/排除特定文件或包。

但是，此选项不适用于蓝色 PhoneGap **www**文件夹中的资产。

我可以给每个目标自己的**www**文件夹，但是我不确定如何在不同的目标中重用 html 和 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:28:05.747

这有点小技巧，而且不便携。**但是......对于每个具有单独资产的目标，在www**旁边创建一个同级文件夹。（使用 Target Membership 窗格将其分配给适当的目标。）要从 PhoneGap 应用程序访问这些资产，您需要知道此文件夹的完整路径。您可以通过检查 window.location.href 找到它。

# c#-4.0 - LINQ to Entities 无法识别方法“System.String ToString()”

> ID：10641425
> 
> 赞同：1
> 
> 时间：2012-05-17T18:28:19.953
> 
> 标签：c#-4.0, entity-framework-4, linq-to-entities

我正在尝试构建一个 Linq to Entities 查询，该查询将一个表与字符串的外键列连接起来，并且相关的表 ID 具有一个整数 ID。我知道，我知道，设计数据库架构的人搞砸了，但不幸的是，无论出于何种原因，在这种情况下我都无法更改数据库架构。

这是我得到的错误：

***LINQ to Entities 无法识别方法“System.String ToString()”方法，并且该方法无法转换为存储表达式。***

这是导致它的 linq (to Entities) 语句：

```
var query = from p in db.QBPOes
            join j in db.tblJobManagements on p.CustJob equals j.JobID
            join s in db.tblSuppliers on p.VendorID equals s.SupplierID.ToString()
            where p.ID == poID
            select new 
            {
                p.ID,
                p.Date,
                p.VendorID,
                p.FirstName,
                p.LastName,
                s.SupplierWorkPhone,
                s.SupplierFaxNumber,
                p.CompanyName,
            }; 
```

我加入这些表格是因为我想获得供应商的电话和传真号码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:31:56.343

为了将 p.VendorID 转换为`integer`您可以使用此解决方法。生成的 SQL 可能不漂亮，但它应该可以工作，除非 p.VendorID 不能转换为整数

```
var query = from p in db.QBPOes
            let vendorId = db.QBPOes.Select(x => p.VendorID).Cast<int>().FirstOrDefault()
            join j in db.tblJobManagements on p.CustJob equals j.JobID
            join s in db.tblSuppliers on vendorId equals s.SupplierID
            where p.ID == poID
            select new 
            {
                p.ID,
                p.Date,
                p.VendorID,
                p.FirstName,
                p.LastName,
                s.SupplierWorkPhone,
                s.SupplierFaxNumber,
                p.CompanyName,
            }; 
```

将 s.SupplierID 转换为字符串可能会更好，因此您可以像这样重新排列查询

```
var query = from s in db.tblSuppliers
            let supplierID = db.tblSuppliers.Select(x => s.SupplierID).Cast<string>().FirstOrDefault()
            join p in db.QBPOes on supplierID equals p.VendorID
            join j in db.tblJobManagements on p.CustJob equals j.JobID
            where p.ID == poID
            select new 
            {
              p.ID,
              p.Date,
              p.VendorID,
              p.FirstName,
              p.LastName,
              s.SupplierWorkPhone,
              s.SupplierFaxNumber,
              p.CompanyName,
            }; 
```

# .net - 如何将 XML 属性绑定到 MVC Web API 中的操作模型？

> ID：10641426
> 
> 赞同：1
> 
> 时间：2012-05-17T18:28:21.207
> 
> 标签：.net, xml-serialization, asp.net-mvc-4, asp.net-web-api

这可能是该框架的 beta 版本中的一个错误，或者我对我的类做了一些非常错误的事情。

我有一个基本模型，我试图通过 POST 接收我的服务上的操作。该模型包含一些作为 XML 元素的属性和一些作为 XML 属性的属性。元素已成功绑定到模型，但属性被忽略。

该模型的基本形式是：

```
[XmlRoot]
public class Entry
{
    [XmlAttribute]
    public string Label { get; set; }

    [XmlElement]
    public Link Parent { get; set; }

    [XmlElement]
    public string Data { get; set; }
}

public class Link
{
    [XmlElement]
    public string Href { get; set; }
} 
```

这成功地序列化为以下 XML 响应。

```
<Entry Label="Test">
  <Parent Href="http://service/entries/123" />
  <Data>WibblyWobblyTimeyWimey</Data>
</Entry> 
```

在使用相同的 XML 将请求发送回服务时，我可以看到只有 Data 元素成功持久化。

调查`HttpActionContext`显示该`RequestKeyValueModel`属性仅包含键“Data”和“Parent”，并且只有“Data”具有值。

我已经手动测试了条目的反序列化，并且可以使用由 提供支持的简单测试客户端成功反序列化响应，`System.Net.Http.HttpClient`以将请求作为对象读取（并`MediaTypeFormatter`在此过程中进行练习）。

是否有一些我错过的技巧，一些我忽略的设置？我确信问题在于`IActionBinder`尝试将反序列化的 XML 请求中的值绑定到操作的参数，但我没有更多关于原因的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:34:02.407

我了解到这是由框架的 Beta 版本实现的当前模型绑定的问题（并随后进行了改进）。

[本文建议解决方法是禁用模型绑定以支持更简单的“序列化”模型](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/27/disabling-model-binding-on-asp-net-web-apis-beta.aspx)，这听起来更接近我真正想要的。

不幸的是，作为副作用，这也丢弃了*所有*路由参数绑定，因此我不再从 URL 获取任何参数，并且如果没有缺失值，该操作将无法执行。

但是，我设法通过引入以下属性来解决该问题：

```
public class AddRouteParametersAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        var descriptor = actionContext.ActionDescriptor
            as ReflectedHttpActionDescriptor;
        var parameters = descriptor.MethodInfo.GetParameters();

        foreach (var key in actionContext.ActionArguments.Keys.ToList())
        {
            if (actionContext.ActionArguments[key] == null)
            {
                var parameter = parameters
                    .SingleOrDefault(param => param.Name == key);

                var valueProvider = new RouteDataValueProvider(
                    actionContext,
                    CultureInfo.InvariantCulture);

                var result = valueProvider.GetValue(key);

                if (result != null && parameter != null)
                {
                    actionContext.ActionArguments[key]
                        = result.ConvertTo(parameter.ParameterType);
                }
            }
        }

        base.OnActionExecuting(actionContext);
    }
} 
```

这有点笨拙（所有最好的解决方法都应该如此），但`RouteDataValueProvider`只要正常反序列化过程未填充参数，它就会使用现有类将路由信息作为正确的类型读取。我确信在某些情况下它不起作用，但到目前为止，它已经填补了我需要填补的空白，并为我解决了这个问题，而无需*深入*研究框架。

希望，如果您有类似的问题，您可以在 RC 之前参考此代码，此时我们确信这些问题会消失。

# android - android httpClient 在 2.1 中给了我一个语法错误，但在 2.2 中没有

> ID：10641447
> 
> 赞同：0
> 
> 时间：2012-05-17T18:30:10.537
> 
> 标签：android, httpclient

我的应用程序在 2.2 中，但我希望它在 2.1 中。我进行了目标更改，但这里出现错误：

```
import android.net.http.AndroidHttpClient; 
```

因为我读过它仅在 2.2 及更高版本中受支持。所以我做了以下替换：

```
import org.apache.http.client.HttpClient; 
```

但我在这里得到一个语法错误：

```
httpclient.close(); ## error states add cast 
```

整个代码在这里：

```
public static HttpClient httpclient = null;
try {
            URL aURL = new URL(url);
            URLConnection conn = aURL.openConnection();
            conn.connect();
            InputStream is = conn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            bm = BitmapFactory.decodeStream(new FlushedInputStream(is));
            bis.close();
            is.close();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (httpclient != null) {
                httpclient.close();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:44:57.043

那可能是因为`Httpclient`没有方法`close(),` 但是我建议你使用[DefaultHttpClient](http://developer.android.com/reference/org/apache/http/impl/client/DefaultHttpClient.html) ，这里有一个提示：

```
DefaultHttpClient mHttpClient = null; 
```

每当你想关闭它时，只需这样调用它：

```
mHttpClient.getConnectionManager().shutdown(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:45:14.703

`HttpClient`是一个没有定义`close()`方法的接口：http: [//developer.android.com/reference/org/apache/http/client/HttpClient.html](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)

# c# - 制作更好的阴影渐变问题

> ID：10641448
> 
> 赞同：0
> 
> 时间：2012-05-17T18:30:27.927
> 
> 标签：c#, .net, wpf, silverlight, xaml

我使用以下代码创建**阴影**。

但是我的影子看起来很丑。***我想要一些我们可以从 MS Windows 中看到的东西。***您可以在我附上的图片下确认两者。

怎么可能做到？

谢谢！

```
DropShadowEffect myDropShadowEffect = new DropShadowEffect();
myDropShadowEffect.Color = GetShadowColorValue();
myDropShadowEffect.ShadowDepth = 5;
myDropShadowEffect.BlurRadius = 70;
myDropShadowEffect.Opacity = 0.8;                  
this.Effect = myDropShadowEffect; 
```

![在此处输入图像描述](../Images/5f893e0615aff9ff66b64c1e3250b3a0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:35:38.973

将您的模糊半径降低到 5 到 7 左右，70 是巨大的。我也会把你的不透明度降低到 35% 到 50%

左边的那个是你现在得到的结果吗？或者你想要什么？

# terminal - “砰”或“！”是什么意思？在 git 命令之前？

> ID：10641451
> 
> 赞同：15
> 
> 时间：2012-05-17T18:30:30.047
> 
> 标签：terminal, git-add, git, git-alias

正如您从这段摘录中看到的那样，有一个“！” 在 git 命令之前。重点是什么？

```
[alias]
commitx = !git add . && git commit 
```

- [https://stackoverflow.com/a/8956546/1354543](https://stackoverflow.com/a/8956546/1354543)

我了解别名以及命令本身在做什么，但不是“！”的重点 在 git 命令之前。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-17T18:37:03.840

意思是“将`!`以下命令作为 shell 的命令运行”，所以在这种情况下，别名`git commitx`扩展为相当于运行`git add . && git commit`（这是一个可怕的可怕想法）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-03T20:15:49.097

接受的答案未涵盖的一个重要方面`!`是，对于 shell 命令，工作目录设置为工作副本的顶层。因此，`git commitx`将暂存然后提交工作副本中的所有新文件和更改文件，而`git add . && git commit`手动运行将暂存然后提交当前目录中的所有新文件和更改文件。

# php - mysql：优化sql查询和慢查询

> ID：10641456
> 
> 赞同：1
> 
> 时间：2012-05-17T18:30:42.953
> 
> 标签：php, mysql, performance

我的查询有很大的问题，执行时间超过 10 秒

**许多子查询和左连接**

这是我的查询

```
SELECT   tickets.tic_id,
         tickets.tic_title,
         tic_statue,
         tic_priority,
         tickets.tic_msg,
         customers.cus_name,
         employee.emp_name,
         count(comments.com_id),
         customers.cus_id ,
         (
            SELECT   comments.com_msg
            from     comments
            WHERE    tickets.tic_id = comments.tic_id
            order by com_id DESC
            limit    1
          ) AS last_comment,
          (
              SELECT customers.cus_name
              from   customers INNER JOIN comments on (customers.cus_id = comments.tic_uid)
              where  comments.com_msg = last_comment
              LIMIT  1
          )AS by_customer,
          (
            SELECT employee.emp_name
            from   employee INNER JOIN comments on (employee.emp_id = comments.tic_emp)
            where  comments.com_msg = last_comment
            LIMIT  1)AS by_employee,
         tic_date,
         (SELECT   comments.com_statue
          from     comments
          WHERE    tickets.tic_id = comments.tic_id
          order by com_id DESC
          limit    1)
           AS last_comment_color
FROM     tickets
         LEFT JOIN employee
           on (tickets.tic_emp = employee.emp_id)
         LEFT JOIN customers
           on (tickets.tic_cus = customers.cus_id)
         LEFT join cats
           on (tickets.tic_cat = cats.cat_id)
         LEFT JOIN comments
           on (tickets.tic_id = comments.tic_id)
GROUP by tickets.tic_id
ORDER BY tickets.tic_statue ASC, comments.com_time DESC
limit    50 
```

结果工作正常，但时间长

**索引**：tickets.tic_id comments.com_id comments.tic_id customers.cus_id

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:15:03.260

试试这个

```
SELECT   tickets.tic_id,
         tickets.tic_title,
         tic_statue,
         tic_priority,
         tickets.tic_msg,
         customers.cus_name,
         employee.emp_name,
         count(comments.com_id),
         customers.cus_id ,
         @cm := coalesce( last_comment.COM_MSG, 000000 ) as COM_MSG,
         @cn := coalesce( by_customer.CUS_NAME, 000000 ) as CUS_NAME,
         @be := coalesce( by_employee.EMP, 000000 ) as EMP,
         @cs := coalesce( last_comment_color.COM_STATUE, 000000 ) as COM_STATUE

        FROM
        ( select
          @cm := 0,
          @cn := 0,
          @be := 0,
          @cs := 0
        ) sqlvars,

        tickets

         LEFT JOIN (
            SELECT   com_msg AS COM_MSG
            from     comments
            order by com_id DESC
            limit 1
          ) AS last_comment
          ON tickets.tic_id = last_comment.tic_id

         LEFT JOIN (
              SELECT com_msg,cus_name AS CUS_NAME
              from   customers INNER JOIN comments on (cus_id = comments.tic_uid)
              LIMIT  1
          )AS by_customer,
          ON by_customer.com_msg = last_comment

          LEFT JOIN (
            SELECT com_msg,emp_name AS EMP
            from   employee INNER JOIN comments on (emp_id = comments.tic_emp)
            LIMIT  1)AS by_employee
            ON by_employee.com_msg = last_comment

         LEFT JOIN (SELECT tic_id ,com_statue AS COM_STATUE
          from     comments
          order by com_id DESC
          limit    1)
           AS last_comment_color   
         ON  tickets.tic_id = last_comment_color.tic_id

         LEFT JOIN employee
           on (tickets.tic_emp = employee.emp_id)
         LEFT JOIN customers
           on (tickets.tic_cus = customers.cus_id)
         LEFT join cats
           on (tickets.tic_cat = cats.cat_id)
         LEFT JOIN comments
           on (tickets.tic_id = comments.tic_id)
GROUP by tickets.tic_id
ORDER BY tickets.tic_statue ASC, comments.com_time DESC
limit    50 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:52:26.110

我之前用*类似*的表创建了一个大型票务系统。`tickets`我发现用一列更新主表要容易十倍`last_comment_id`，这样您就可以在没有子选择的情况下获得所有信息。目前，您必须扫描您的`comments`表格**五次**，因此取决于它的大小，这将需要一段时间。

# windows - 如何在 Windows 的 git-bash 中执行命令，这些命令位于带有空格的文件夹中，即“程序文件”？

> ID：10641458
> 
> 赞同：9
> 
> 时间：2012-05-17T18:30:47.737
> 
> 标签：windows, cmd, git-bash

当我使用 git bash 时，有时我想调用我的`$PATH`（实际上是我的`%PATH%`）上的命令，但是如果该命令位于带有空格的文件夹中的某个位置，则它无法运行。

例如，如果程序打开`C:\Program Files\whatever\aCmd.exe`并且我`aCmd`在 bash 上键入，它会说“程序”不是一个有效的程序等。

我所做的是在没有空格的文件夹中重新安装程序，但最近我的同事开始离开 git-gui 并使用 git-bash，经常出现的问题是“我如何执行 aCmd”以及当我告诉他们时要重新安装它，它们会像 ¬¬

问：如何在 git-bash 中执行位于带有空格的文件夹中的命令？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-17T19:31:57.650

只需将要执行的命令放在双引号之间，就像这样

```
"C:\Program Files\whatever\aCmd.exe" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-20T04:10:23.607

如果文件名中有**特殊字符**（空格、$、括号...），您需要在**字符前面放置一个反斜杠，**以便它按原样读取。

例如，如果您想直接从 Bash 运行程序 notepad++.exe，并且需要将路径指向：

```
C:\Program Files (x86)\Notepad++\ 
```

然后，您将在 bash.rc 文件中对路径进行编码，如下所示：

```
export PATH=$PATH:/c/Program\ Files\ \(x86\)/Notepad++:<path2>:<path3>:...<pathn>: 
```

注意引导空格和括号的反斜杠。

您甚至可以在 bash.rc 文件的下一行添加额外的一行：

```
alias npp=notepad++ 
```

这将**创建一个快捷方式**，允许您直接在 Bash 中输入**npp**，而不必每次都输入完整的程序名称**notepad++ 。**

我是个菜鸟，4 天前才开始编码，虽然我发现这个问题的最佳网站如下： **[http ://www.grymoire.com/unix/Quote.html](http://www.grymoire.com/unix/Quote.html)**

希望这可以帮助！:D

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-23T08:28:25.723

要到达路径中包含空格的目录，您只需将整个路径用引号括起来。它应该如下所示：

```
cd "/c/一些文件夹/一些其他文件夹/"
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-29T16:55:45.163

git-bash 中的命令接受双引号内的路径

`"C:\Program Files\whatever\aCmd.exe"`

或反斜杠以避开空白空间

`c/Program\ Files/whatever/aCmd.exe`

希望能帮助到你！

# javascript - 如何在客户端 javascriptCode 中获取验证器 ClientID？

> ID：10641461
> 
> 赞同：0
> 
> 时间：2012-05-17T18:30:59.943
> 
> 标签：javascript, asp.net, validation

我有客户端 javascript 代码。我需要根据一些选项禁用一些验证器。我这样做：

.ascx 文件

```
<asp:RangeValidator runat="server" ID="RangeValidator1" Text="*"  ... /> 
```

.js 代码

```
var validator = $get('<%=RangeValidator1.ClientID %>');
ValidatorEnable(validator, false); 
```

但变量验证器始终为空。为什么？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:18:21.137

验证器在`Page_Validators`数组中。在浏览器中检查源。您应该在 javascript 块中看到创建并添加到此数组的每个验证器。

有关详细信息，请参阅[ASP.NET 深度验证。](http://msdn.microsoft.com/en-us/library/aa479045.aspx#aspplusvalid_clientside)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:34:24.417

验证器不显示为控件。因此，您无法以这种方式访问​​它。验证器在渲染时将转换为一些 JS 代码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:11:45.753

[这里](http://www.jagregory.com/writings/how-to-use-clientids-in-javascript-without-the-ugliness/)有一篇不错的文章，它提供了一种在 jquery/javascript 中使用服务器端 ID 的简洁方法。我自己用过一次。我记得它需要一些调整才能正确使用它。

如果我没记错的话，'#' 没有放在可下载代码中的选择器中。

# java - Maven + FindBugs - 高优先级警告失败

> ID：10641467
> 
> 赞同：9
> 
> 时间：2012-05-17T18:31:20.750
> 
> 标签：java, maven, hudson, findbugs

我在一个大型项目中使用 Maven 和 FindBugs。*如果 FindBugs 产生任何高*优先级错误，我想导致 Maven 构建失败。可以在 pom.xml 中设置一个简单的参数以在*错误*时失败，但我需要它在高优先级警告时失败。任何建议都会很大！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:14:26.453

我怀疑您已经知道插件可用的 findbugs:check 目标。将阈值配置项设置为高应该将目标限制为仅在高优先级问题上失败。

这是您的 pom.xml 的示例配置片段

```
<build>
...
<plugins>
...
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>findbugs-maven-plugin</artifactId>
  <version>2.4.0</version>
  <executions>
    <execution>
      <id>failing-on-high</id>
      <phase>process-test-resources</phase>
      <goals>
        <goal>check</goal>
      </goals>
      <configuration>
        <threshold>High</threshold>
        <onlyAnalyze>com.example.-</onlyAnalyze>
      </configuration>
    </execution>
  </executions>
</plugin>
...
</plugins>
...
</build> 
```

在这个片段中，我对以“com.example”开头的包进行了有限的分析，并将阈值设置为高，并将 findbugs:check 配置为在自动化测试之前运行。

触发构建失败的示例：

```
[INFO] --- findbugs-maven-plugin:2.4.0:findbugs (findbugs) @ channels ---
[INFO] Fork Value is true
     [java] Warnings generated: 29
[INFO] Done FindBugs Analysis....
[INFO] 
[INFO] <<< findbugs-maven-plugin:2.4.0:check (failing-on-high) @ channels <<<
[INFO] 
[INFO] --- findbugs-maven-plugin:2.4.0:check (failing-on-high) @ pricing ---
[INFO] BugInstance size is 29
[INFO] Error size is 0
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------ 
```

另请参阅：http: [//mojo.codehaus.org/findbugs-maven-plugin/check-mojo.html](http://mojo.codehaus.org/findbugs-maven-plugin/check-mojo.html)以了解您可以包含的其他配置选项。您可能希望包含 xml 报告，以便 CI 服务器可以使用 xmlOutput 配置捕获它以便轻松报告故障。

# javascript - 如何替换此数组中的倍数？

> ID：10641471
> 
> 赞同：-1
> 
> 时间：2012-05-17T18:31:33.400
> 
> 标签：javascript, arrays

```
array = ['blue', 'red', 'green', 'green', 'red', 'blue', 'black', 'blue'] 
```

...我试图实现的输出将导致

```
output = ['blue x3', 'red x2', 'green x2', 'black'] 
```

我很难找出最有效的方法来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:37:58.753

```
 var array = ['blue', 'red', 'green', 'green', 'red', 'blue', 'black', 'blue'] 

 var hash = {};
 for( var i = 0; i < array.length; ++i){
     hash[array[i]] = (!hash.hasOwnProperty(array[i]) ? 1 : hash[array[i]]+1);
 }

 var output = [];
 for(var key in hash){
     output.push( key + (hash[key]>1 ? (" x"+hash[key]):"") );
 }
 console.log( output ); //["blue x3", "red x2", "green x2", "black"] 
```

[**演示**](http://jsfiddle.net/xRMAh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:36:21.143

```
var arr =  ['blue', 'red', 'green', 'green', 'red', 'blue', 'black', 'blue'];

var group = {};
for (var i = arr.length; --i >= 0;) {
  var value = arr[i];
  group[value] = 1 - -(group[value] | 0);
}
var result = [];
for (e in group) { 
  result.push(e + ' x' + group[e]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:36:31.687

这是我很快想出的一个俗气的解决方案；

```
var array = ['blue', 'red', 'green', 'green', 'red', 'blue', 'black', 'blue'],
    output = [], temp = {}, i;

// loop through array and count the values
array.forEach(function(a){
    temp[a] = temp[a] ? temp[a]+1 : 1;
});

// loop though temp and add "xN" to the values
for(i in temp){
    output.push(i + (temp[i] > 1 ? ' x'+temp[i] : ''));
}

console.log(output); 
```

注意：[`.forEach`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)在 IE 8（或更低版本）中不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T18:55:42.960

```
// You can use an object to group strings
var colourGroups = {};
var array = ['blue', 'red', 'green', 'green', 'red', 'blue', 'black', 'blue'];

// loop and group each colour. 
array.forEach(function(colourName) {

    if (colourGroups[colourName] )
        // increment the count
        colourGroups[colourName]++;
    else
        //initialize the property with 1
        colourGroups[colourName] = 1;

});    

// display results
var results = [];

for(var prop in colourGroups) {
    var colourCountStats = prop + " x " + colourGroups[prop];
    results.push(colourCountStats );
}

console.log(results);
document.write(results);​ 
```

JS 小提琴示例：http: [//jsfiddle.net/peterf/J7EUc/](http://jsfiddle.net/peterf/J7EUc/)

# php - 使用 KOHANA 2.x 在 PHP 的 MVC 模型中的 SQL JOIN 查询

> ID：10641473
> 
> 赞同：0
> 
> 时间：2012-05-17T18:31:41.247
> 
> 标签：php, kohana

我编写了一个查询，通过连接两个表从数据库中检索值，但它抛出了错误。

以下是我编写的 SQL 查询。

```
if ($selected_key_type != null ) {
    $o = ORM::factory('organization')->join_table('keywords_organization','keywords_organization.organization_id', 'organization.id')->where('keywords_organization.keyword_id',$selected_key_type);

    } 
```

以下是显示的错误

```
Fatal error: Call to a member function where() on a non-object in /var/www/xxxx/html/application/controllers/organizations.php on line 51 
```

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:16:26.810

您使用的语法不正确。

它应该是：

```
$o = ORM::factory('organization')
    ->join('keywords_organization','LEFT')
    ->on('keywords_organization.organization_id', '=', $selected_key_type)
    ->find_all(); 
```

来源：[https ://stackoverflow.com/a/5685379/604041](https://stackoverflow.com/a/5685379/604041)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T06:28:02.203

join_table 有一个参数 join_table('table_name') 用于创建数据透视表。所以我猜你正在尝试使用join（）而不是join_table（）。

[Kohana 2.3.4 ORM 数据透视表查询](https://stackoverflow.com/questions/2610047/kohana-2-3-4-orm-pivot-table-query)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T09:12:14.723

join_table() 不是您想要的。join() 是正确的方法，并且是 Kohana 2+ 中查询构建器的一部分。仅供参考 join_table() 使用字母比较来选择连接表的名称。因此，它是一个返回 $this 以外的值的方法。可链接的方法 $class->method1()->method2()->method3() 返回 $this，这就是使它们可链接的原因。我是 Kohana 3.2 用户，如果上面的原始代码是正确的减去连接部分，这应该可以工作。

```
if ($selected_key_type != null ) {
    $o = ORM::factory('organization')
        ->join('keywords_organization','keywords_organization.organization_id', 'organization.id')
        ->where('keywords_organization.keyword_id',$selected_key_type);
} 
```

您还可以向 join() 添加第四个参数，指定要创建的连接类型。有关详细信息，请参阅[http://docs.kohanaphp.com/libraries/database/builder#join 。](http://docs.kohanaphp.com/libraries/database/builder#join)

# ios - 插入笔尖加载过程

> ID：10641476
> 
> 赞同：0
> 
> 时间：2012-05-17T18:31:53.890
> 
> 标签：ios, loading, nib

我的 iOS 应用程序可以通过下载包含新图像和字符串的 zip 文件来重新命名。这可能随时发生。由于我无法替换应用程序包中的文件，因此每次加载 nib 时都必须检查是否有新的图像/字符串，然后替换 IB 中设置的内容。我宁愿让这个自动化。关于如何将自己插入笔尖加载过程以执行此操作的任何想法？我的大部分笔尖都由 UIViewController 子类加载。

我已经在 viewDidLoad: 中进行检查。但这意味着我必须记住在每个 UIViewController 子类中都这样做，并且我必须知道 nib 中的哪些插座需要旋转。我想要的是能够插入实际的笔尖加载过程，以便当系统获取笔尖中指定的“flower.png”图像时，我有机会返回“花.png”在应用程序包中。

以这种方式处理字符串可能更难，但理想情况下我也可以在那里破解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:12:02.423

geminiCoder 为我指明了正确的方向—— UIViewController 的一个子类，它是我所有“真实”视图控制器的父类。它有我想要调整的所有位的出口，并在其 -viewDidLoad 方法中进行调整。这样，所有“真正的”视图控制器都继承了 outlet，只需将它们连接到正确的 UI 元素，它们就会自动更新。

# java - OSGi 框架可以同时启动捆绑包吗？

> ID：10641479
> 
> 赞同：2
> 
> 时间：2012-05-17T18:31:57.673
> 
> 标签：java, osgi, bundle, system-properties

我们有两个包，都嵌入了同一个 3rd 方库的不同版本，我们必须以不同的配置使用它们。不幸的是，该库只能通过系统属性进行配置。

因此，我们尝试执行以下`Activator`课程：

1.  设置所需的系统属性，
2.  初始化库，
3.  取消设置以前的系统属性。

如果 OSGi 框架同时启动这两个包，它将无法工作。是否允许 OSGi 框架实现？这个解决方案安全吗？有没有其他方法可以为不同的捆绑包将相同的系统属性设置为不同的值？

（如果可能的话，我们希望避免为这些捆绑包设置不同的启动级别。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:10:00.217

允许 OSGi 框架实现在给定的启动级别内同时启动捆绑包。因此，您可以将捆绑包置于不同的启动级别，以确保一个在另一个之前启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:07:45.643

在 Felix 和 Equinox 中，bundle install/resolve/start/stop/uninstall 操作都发生在单个线程上。我无法确定激活器是否在同一线程上运行，但我认为它们确实如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T10:09:55.437

如何创建一个包装库初始化的 OSGi 服务。所以你只需要做一次。或者，服务可以同步初始化，因此确保它不会同时发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T10:45:44.093

将它们放在单独的捆绑包中是否有很强的要求？您如何处理这些库，是将它们导出为 java 包还是使用它们创建服务？如果您可以将两个库放在同一个包中，则您可以完全控制哪个首先初始化，哪个是第二个。

顺便说一句，如果您使用 Export-Package 在捆绑清单中导出它们，请记住，即使捆绑处于 RESOLVED 状态（即已安装但尚未启动），其他捆绑也可以使用导出的包。因此，即使在您的 Bundle Activator 已创建并已处理初始化之前，也可能有人调用 lib 的方法......

# vim - 显示整行 vim

> ID：10641483
> 
> 赞同：3
> 
> 时间：2012-05-17T18:32:05.293
> 
> 标签：vim, command-line, vi, macvim

假设我将整个 jquery 函数粘贴到一个文件中（仅作为示例..我知道那不切实际，但为了示例）。

当您尝试滚动过去时，它会显示其中的 1 行，然后“跳转”到它下面的代码。我希望它表现得像平常一样..如果 wordwrap 是打开的，那么当我滚动它时，它只会滚动一条大长线，而不是尝试在它之前和之后跳转，然后用大量空白填充它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:40:06.390

我不是 100% 肯定我理解您的问题，但是如果您希望能够使用普通方向键 (`j`和`k`) 来向上和向下导航换行而不是整行代码，您可以重新映射这些键：

```
map j gj
map k gk 
```

有关您的问题的更深入解决方案（包括附加映射，以及使用环绕模式更改映射的领导功能），请参阅[“环绕时按显示行移动光标”](http://vim.wikia.com/wiki/Move_cursor_by_display_lines_when_wrapping)。

# c# - 在表格列中生成使用html创建页面的链接

> ID：10641486
> 
> 赞同：0
> 
> 时间：2012-05-17T18:32:14.213
> 
> 标签：c#, asp.net, html

我有一个程序，我需要在其中创建一个链接，该链接将打开一个页面并显示存储在表格列中的 html 标记。我尝试将它传递到 html 页面的 url 中，然后对其进行解析，但这不起作用（并非所有的 html 都被传入）。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:26:36.670

据我了解，您是在说您在 URL 中传递 HTML 标记，是这样吗？如果是这种情况，您必须记住 URL 长度有限制，您将丢失数据。如果我理解错了，请详细说明并提供一些代码。

# c# - 在设计时代码中使用模拟框架的缺点

> ID：10641494
> 
> 赞同：2
> 
> 时间：2012-05-17T18:32:56.140
> 
> 标签：c#, .net, wpf, mocking, nsubstitute

我正在为我的公司制作 Prism 模板。我想让设计时数据尽可能简单。

为此，我正在制作一个从我的 ViewModel 继承的设计类。DesignViewModel 将调用我的 ViewModel 的构造函数。

我的 ViewModel 构造函数有时会调用 prism 方法和属性，例如`IRegionManager.Regions`. 我正在考虑为将使用 NSubstitute 的接口制作一个存根。像这样：

```
public class DesginRegionManager : IRegionManager
{
    public IRegionManager CreateRegionManager(){return this;}

    private readonly IRegionCollection regions;
    public DesginRegionManager()
    {
        regions = Substitute.For<IRegionCollection>();   <--------
    }                                                            |
                                                                 |
    public IRegionCollection Regions {get { return regions; }}   |
}                                                                |
                                                                 |
// Using NSubstitute here ---------------------------------------- 
```

我打算为`IUnityContainer`.

除了单元测试，我从来没有在任何东西中使用过 Mocking 框架。像这样使用它是一个坏主意吗？

虽然它永远不会在生产代码中被调用，但它会为我的实际应用程序添加对 NSubstitute 的依赖。

这有缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T06:27:17.233

在继续之前，尽管我以前使用过 caliburn，但我对 Prism 的经验很少，所以我假设它以类似的方式工作。但我确实对 nsubstitute 有一点经验。

**将替代品用于设计目的是不是一个坏主意？**

我的简短回答是*否定*的。

这并不完全理想，但是当您有一个设计部门（或在您继续编码时负责 UI 元素的人）时，将 UI 执行的代码与设计过程隔离开来是一种很好的做法，因为您将能够改进您的界面即使要实时执行的代码有问题。

当我说替代品时，我指的是由 Visual Studio 或 Blend 在设计时创建的真实（样本数据等）实例。（我将在最后提供一个样本）。

**模拟这些元素是个坏主意吗？**

也许不是，尽管您将在项目中包含更多对执行并不那么重要的依赖项。

它的积极方面是：

模拟定义意味着您将维护更少的代码，但您将无法在这些假实例上模拟数据（或者除非您开始为每个模拟返回样本数据）。

不利的一面：

首先，根据模拟框架，您将加载（在设计时）动态创建的代理或假货实例，以模拟某些行为拦截调用和其他内容。如果您创建大量不如实际代码轻量级的对象，这可能是一个痛苦的操作。

除了你的设计师（如果有一个混合大师）必须收集关于地狱 nsubstitute（或你喜欢的模拟框架）如何工作的知识。

如果我有一个设计师帽，并且您向我展示了一个具有特定定义的类，我可以复制该类与使用名为替代品的外部库定义的类，我可能会告诉您我更喜欢第一个选项，因为我不需要学习其他任何东西除了一点 c#。即使这样，我也不会尝试触及该代码。

**将 nsubstitute 添加到您的项目有什么缺点吗？**

只要您正确使用 DesignInstance 并且对带有模拟的代码的引用与实际功能隔离，并且您不尝试替换非虚拟属性或具有多个参数或密封类的实例（基本上 nsubstitute 对要替换的内容的任何限制）替代）你会没事的，因为设计属性将在你的代码的特殊模式下执行。

特别是 NSubstitute 可能会在尝试创建实例或访问某些属性时抛出异常，在这种情况下，**IDE**可能会在加载时崩溃或崩溃控件。

**有样品吗？**

你可能知道要写什么，但它就在这里（虽然不是棱镜）。

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/winfx/expression/blend/2008"
    xmlns:vm="clr-namespace:Project.Namespace.ViewModels.DataSamples"
    d:DataContext="{d:DesignInstance IsDesignTimeCreatable=True, Type={x:Type NationViewModelSampleData}}">

    <StackPanel DataContext="{Binding Leader}">
        <TextBlock Text="{Binding FirstName}" />
        <TextBlock Text="{Binding LastName}" />
    </StackPanel>
</UserControl> 
```

NationViewModel 在哪里实现了这样的接口

```
namespace Project.Namespace.ViewModels
{
    public interface INationViewModel
    {
        IPerson Leader { get; }
        IEnumerable<IPerson> Citizens { get; }
    }

    public interface IPerson
    {
        string FirstName { get; }
        string LastName { get; }
    }
} 
```

样本数据为：

```
namespace Project.Namespace.ViewModels.DataSamples
{
    public class NationViewModelSampleData : Project.Namespace.ViewModels.INationViewModel
    {
        public NationViewModelSampleData()
        {
            // You could have done something like this as well, but for this sample was more code to write.
            // Leader = Substitute.For<IPerson>();
            // Leader.FirstName.Returns("John");
            // Leader.LastName.Returns("Doe");
            // or just...
            Leader = new Person { FirstName = "John", LastName = "Doe" };

            Citizens = new IPerson[]
                       {
                           new Person { FirstName = "Malcolm", LastName = "Little" },
                           Leader
                       };
            // You could have applied the mock to this section as well... again, more code for this scenario than just a simple real instance.
        }

        public IPerson Leader { get; private set; }
        public IEnumerable<IPerson> Citizens { get; private set; } 
    }
} 
```

在这个示例中，我决定使用实际实例，因为我想象的 Person 实现非常小并且使用安全......但我希望它会变得越来越复杂如您之前所述，实例或模拟它。

希望这个评论有帮助。

干杯!

# rest - REST 和 SOAP 问题

> ID：10641500
> 
> 赞同：0
> 
> 时间：2012-05-17T18:33:26.590
> 
> 标签：rest, soap, service, web

我有几个关于 REST 和 SOAP 的问题，希望有人能帮忙。他们非常直截了当。

1.  今天哪些网站使用 SOAP？我总是发现网站主要使用 REST，但我需要使用 SOAP 的网站示例。到目前为止，我只能想到 PayPal。有人认识其他人吗？

2.  在什么情况下可以使用 SOAP 而不能使用 REST（至少没有实用性）？一个很好的例子是当您想与您的银行通信时，因为 SOAP 具有 REST 所没有的安全特性（如 WS-Security）？还有其他例子吗？

3.  您认为 SOAP 是否需要进行任何改进才能与 REST 更具竞争力？

任何答案或线索将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:46:48.900

> 您认为 SOAP 是否需要进行任何改进才能与 REST 更具竞争力？

*   目前，与 REST 相比，SOAP 的地位要强得多。
*   99% 的 REST Web 服务根本不是 REST
*   SOAP 有很好的工具并且更容易实现
*   公司已经成功部署了数千个在 SOAP 中实现的 Web 服务
*   像 Twitter 的 API 等 Web 服务使用起来更简单，但这并不意味着 SOAP 没有竞争力。
*   SOAP 不适合此类用途，尽管 Twitter 和其他类似的 API 都不是 RESTful 的……您可以称它们为面向资源的 API 或 HTTP API

# facebook - facebook阻止身份验证对话框

> ID：10641501
> 
> 赞同：0
> 
> 时间：2012-05-17T18:33:32.810
> 
> 标签：facebook, authentication

在我的 FB 画布应用程序中，我没有请求任何权限，也没有使用 scope 参数请求权限，但仍然显示身份验证对话框。我怎样才能让它不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:38:28.233

您没有在范围参数中请求任何*扩展*权限。实际上，您是在请求允许查看用户的用户 ID、姓名、头像图像以及用户可能希望或可能不想公开的其他基本信息

# javascript - 获取对象的长度

> ID：10641502
> 
> 赞同：5
> 
> 时间：2012-05-17T18:33:38.000
> 
> 标签：javascript

我有以下对象：

```
var l={"a":1,"b":2,"c":5}; 
```

我想得到这个的长度

```
alert(l.length); 
```

但这会返回`undefined`。显然，我正在寻找`3`答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T18:35:31.253

您可以使用 来计算对象中的条目数[`Object.keys()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)，它返回对象中键的数组：

```
var l = {a: 1, b: 2, c: 3};
Object.keys(l).length; 
```

但是，实现您自己的属性可能更有效（并且跨浏览器）：

```
Object.length = function(obj) {
    var i = 0;
    for(var key in obj) i++;
    return i;
}

Object.length(l); 
```

请注意，尽管我可以将函数定义为`Object.prototype.length`，允许您编写`l.length()`，但我没有，因为如果您的对象容器是 key ，那将失败`length`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:34:21.013

```
var l={"a":1,"b":2,"c":5};
Object.keys(l).length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:48:36.513

```
function count(O){
    for(var p in O){
        if(O.hasOwnProperty(p))++cnt;
    }
    return cnt;
}
count(l); 
```

# c# - 验证无法正常工作

> ID：10641506
> 
> 赞同：0
> 
> 时间：2012-05-17T18:33:44.360
> 
> 标签：c#, asp.net

我有一个在按下链接按钮时启用的文本框。每次我删除文本框的内容并点击取消时，我都希望它不进行任何验证。它执行客户端验证，当我第二次点击取消时，页面按原样返回。这是我的 HTML。我真的需要弄清楚这一点。谢谢。

```
<%@ Page Title="Account Activation Deactivation Reasoning" Language="C#" MasterPageFile="~/Forms/Site.master"
AutoEventWireup="True" CodeBehind="ActivationDeactivationReasons.aspx.cs" Inherits="AccountManagementAdmin.UserInterface.Forms.ActivateDeactivateReasons.ActivationDeactivationReasons" %>

<%@ MasterType VirtualPath="~/Forms/Site.Master" %>
<asp:Content ID="cphAccNumberLookup" runat="server" ContentPlaceHolderID="cphPageContent">
    <div class="ContentPage">
        <div class="ContentPageHeader">
            Activation/Deactivation Account Reasons
        </div>
            <asp:Panel runat="server" EnableViewState="false" ID="pnlMessage" Visible="false">
                    <asp:Label runat="server" ID="lblValidationMessage" EnableViewState="false" />
            </asp:Panel>
        <br />
        <div class="SubSection">
            <div class="SubSectionHeader">
                Add Activation/Deactivation Reason
            </div>
            <table>
                <tr>
                    <td>
                        <asp:Label ID="lblReason" runat="server" Text="Enter Reason:"></asp:Label>
                    </td>
                    <td>
                        <asp:TextBox ID="txtNewReason" runat="server" MaxLength="30" Width="206px"></asp:TextBox>
                    </td>
                    <td>
                        <asp:Button ID="btnAdd" runat="server" Text="Add" CssClass="Button" OnClick="btnAdd_Click">
                        </asp:Button>
                    </td>
                </tr>
            </table>
        </div>
        <br />
        <div>
            <table>
                <asp:Repeater runat="server" ID="rptReasons" 
                    onitemcommand="rptReasons_ItemCommand">
                    <HeaderTemplate>
                        <thead>
                            <tr>
                                <th class="GridHeader">
                                    Reason
                                </th>
                                <td class="GridHeader">
                                </td>
                            </tr>
                        </thead>
                    </HeaderTemplate>
                    <ItemTemplate>
                        <tr>
                            <td class="GridRow" style="text-align: left;">
                                <asp:Label runat="server" ID="lblValue" Text='<%# DataBinder.Eval(Container.DataItem, "Description") %>'/>
                                <asp:TextBox runat="server" ID="txtValue" ValidationGroup="validationGroup" Visible="false" Width="550" Text='<%# DataBinder.Eval(Container.DataItem, "Description") %>' />
                                <asp:RequiredFieldValidator ID="rfvReasons" runat="server" ValidationGroup="validationGroup" ControlToValidate="txtValue" Display="Dynamic"  ErrorMessage="Reason Cannot Be Empty"/>
                                <asp:RegularExpressionValidator runat="server" ID="regxValidator" ControlToValidate="txtValue" Display="Dynamic" ValidationExpression="^[A-Za-z0-9 *~!@#$%^&*()|\\?/<>=+_]+$" ErrorMessage="Reason Contains Invalid Characters"/>
                                </td>
                            <td class="GridRow" style="width: 80px;">
                                <asp:LinkButton runat="server" ID="lbtnEdit" Text="Edit" CommandName="Edit"/>
                                <%--<asp:Panel runat="server" ID="pnlUpdateRow" Visible="false" >--%>
                                    <asp:Button runat="server" ID="lbtnUpdate" Text="Update" CommandName="Update"  CommandArgument= '<%# DataBinder.Eval(Container.DataItem, "Id") %>' Visible="False" ValidationGroup="validationGroup" CausesValidation="True"/>
                                    <asp:Button runat="server" ID="lbtnCancel" Text="Cancel" CommandName="Cancel" Visible="False/>
                                <%--</asp:Panel>--%>
                            </td>
                        </tr>
                    </ItemTemplate>
                </asp:Repeater>
            </table>
        </div>
    </div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:59:41.257

您的取消按钮需要设置 CausesValidation="False"

# php - 是否可以启用 MySQL 本机驱动程序 (mysqlnd)？

> ID：10641509
> 
> 赞同：3
> 
> 时间：2012-05-17T18:34:09.857
> 
> 标签：php, mysqli, mysqlnd

> **可能重复：**
> [调用未定义的方法 mysqli_stmt::get_result](https://stackoverflow.com/questions/8321096/call-to-undefined-method-mysqli-stmtget-result)

我的网络主机有 PHP 5.3.10 并且我正在使用`mysqli`，但某些功能（例如`get_result()` ）不起作用，因为它需要`mysqlnd`.

我做了一些测试，似乎`mysqlnd`没有使用。可以启用它或需要重新安装 PHP（我不能这样做，因为它是一个网络托管）。

我不想改变我的代码在没有它的情况下工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T18:38:46.253

`mysqldnd`是一个提供 MySQL 连接的库`mysql_*`，`mysqli_*`以及 PDO 函数/方法。

这三个扩展是用`mysqlnd`或`libmysql`;编译的。并且不能同时使用两者进行编译：它们使用一个库，或者另一个。 这意味着在和
之间切换的唯一方法是重新编译 PHP *（或者，至少是 mysqli 扩展，在你的情况下）*；或安装针对您想要的库编译的版本。`libmysql``mysqlnd`

 *基本上，这只能由您的服务器的管理员来完成 - 所以，在您的情况下，您似乎被`libmysql`; 即使它缺少一些有趣的功能。

再一次，使用您不是管理员的托管服务具有优势*（为您减少维护，您可能支付更少的费用）*，但您无法使用“您的”服务器做任何您想做的事情。*

# r - 尽管 dbListTables 列出了我的表，但为什么我无法读取它？

> ID：10641519
> 
> 赞同：5
> 
> 时间：2012-05-17T18:34:54.383
> 
> 标签：r, postgresql, rpostgresql

我正在尝试使用 RPostgreSQL 和 R v2.14.2 将表读入 R。
我的 RPostgreSQL 版本列为 0.3-2，于 2012 年 5 月 16 日下载。
我的 DBI 版本列为 0.2-5，于 2012 年 5 月 16 日下载。

我可以打开数据库，并列出表。我要打开的表格显然存在，但是，当我尝试阅读它时，我收到一条错误消息。我不确定错误是在我的代码中还是在数据库的设置方式中。

```
library(RPostgreSQL)  
# Loading required package: DBI  
drv <- dbDriver("PostgreSQL")  
con <- dbConnect(drv, host = 'freda.freda.com', dbname = 'test', user = 'fredak', password = 'xxxx')  

dbListTables(con)  
# [1] "chemistry”                                               
# [2] "ecog”  
# [3] "hematology"                                        

dbExistsTable(con, "ecog")  
# [1] FALSE

MyTable <- dbReadTable(con, "ecog")    
# Error in postgresqlExecStatement(conn, statement, ...) :  
#   RS-DBI driver: (could not Retrieve the result : ERROR:  relation "ecog" does not exist  
# LINE 1: SELECT * from "ecog"  
#                       ^  
# )  
# Error in names(out) <- make.names(names(out), unique = TRUE) :   
#   attempt to set an attribute on NULL  
# In addition: Warning message:  
# In postgresqlQuickSQL(conn, statement, ...) :  
#   Could not create executeSELECT * from "ecog" 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-06T14:51:10.123

如果要与命名模式中的表进行交互，请使用以下（不直观的）语法：

```
dbExistsTable(con, c("schema_name", "table_name"))
[1] TRUE 
```

尽管`dbListTables(con)`返回所有表名而没有关联的模式，这仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:18:54.443

我怀疑是权限问题。请通过或其他场所尝试 SQL 命令`psql`以排除任何后端权限问题。

你的命令在这里对我很好：

```
R> library(RPostgreSQL)
Loading required package: DBI
R> drv <- dbDriver("PostgreSQL")
R> con <- dbConnect(drv, dbname="beancounter", user="edd", password="xxxxxx") 
R> dbListTables(con)
[1] "beancounter"   "cash"          "fxprices"      "indices"       "meta"
[6] "portfolio"     "portfoliosold" "stockinfo"     "stockprices"  
R> dbExistsTable(con, "cash")
[1] TRUE
R> dbExistsTable(con, 'cash')
[1] TRUE
R> dbExistsTable(con, 'Cash')
[1] FALSE
R> dbExistsTable(con, "Cash")
[1] FALSE
R> ccc <- dbReadTable(con, "cash")
R> dim(ccc)
[1] 24  7
R> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-10T04:03:28.313

等效`RPostgres`语法是

`dbExistsTable(con, Id(schema = "schema_name", table = "table_name"))`

# jasper-reports - JasperReports 服务器报告审计报告

> ID：10641524
> 
> 赞同：2
> 
> 时间：2012-05-17T18:35:07.833
> 
> 标签：jasper-reports, jasperserver

我需要创建一个报告来显示每个报告的最后执行时间以及谁运行它们。审计报告。我已经搜索了数据库以查看是否可以将这些信息记录到那里，但没有成功。有人尝试这样做吗？是否已经有审计报告可以通过一些调整来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:44:12.663

审计内置于 JasperReports Server 的商业版中。将其添加到 JasperReports Server 的 AGPL 社区版需要进行自定义开发工作。

编辑：鉴于您使用的是商业版，那么您需要在 applicationContext-audit.xml 中打开审核。搜索此行：

```
<entry key="com.jaspersoft.jasperserver.api.logging.audit.domain.AuditEvent" value="false"/> 
```

有关完整详细信息，请参阅《管理员指南》。

# objective-c - 将块传递给函数

> ID：10641527
> 
> 赞同：0
> 
> 时间：2012-05-17T18:35:25.147
> 
> 标签：objective-c, objective-c-blocks, block

我有以下功能

`- (void)loginWithCompletionBlock:(void (^)(BOOL))completion`

我怎么称呼它？如何将 BOOL 作为块传递？我尝试了几种方法，但我似乎不明白这是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:38:52.353

您不是在传递“a`BOOL`作为一个块”，而是在传递一个稍后将传递给 a 的块`BOOL`。

```
[thingy loginWithCompletionBlock:^(BOOL didSomethingInteresting){
    // Your code here, using didSomethingInteresting, such as:
    if( didSomethingInteresting ){
        // Do something even more interesting
    }
    else {
        // Do something boring
    }
}]; 
```

`loginWithCompletionBlock:`大概是要关闭并尝试登录某些服务。当尝试结束时，无论成功或失败，您的块（一段可执行代码）都将运行，并将`BOOL`通过`loginWithCompletionBlock:`

顺便说一句，`BOOL`您可以随意命名，尽管通常您使用的 API 会给它一个名称（例如`success`）来表示其含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:41:38.223

它被实现为：

```
- (void)loginWithCompletionBlock:(void (^)(BOOL))completion
{
    BOOL result = NO;

    // Do the login thing.

    completion(result);
} 
```

调用它会是这样的：

```
[object loginWithCompletionBlock:^(BOOL success) {
    if (success) {
        // It worked
    } else {
        // Oh No!!
    }
}]; 
```

希望这可以帮助。

# c# - 如何制作返回json的处理程序请求

> ID：10641528
> 
> 赞同：1
> 
> 时间：2012-05-17T18:35:31.260
> 
> 标签：c#, json, handler

我有一个返回 json 的处理程序

```
public void ProcessRequest (HttpContext context) {
    HttpResponse response = context.Response;
    response.ContentType = "application/json";

    string controlType = context.Request.QueryString["controlType"];
    JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();
    CmsManager cmsManager = new CmsManager();
    IDictionary<string, Guid> sitefinityPageDictionary = SitefinityUtilities.sitefinityPageDictionary;

    if (string.IsNullOrEmpty(controlType)) {
        response.Write("0");
    }
    else {
        var pagesWithControl = from page in sitefinityPageDictionary
                               from control in cmsManager.GetPage(page.Value).Controls
                               where control.TypeName == controlType
                               select page;
        response.Write(jsonSerializer.Serialize(pagesWithControl));
    }
} 
```

在一个单独的项目中，我想向处理程序发出请求以使用返回的 json 对象。

1.  `HttpRequest`将是用于向处理程序发出请求的适当对象吗？
2.  有人可以提供一个简单的例子来说明如何从另一个 c# 类（不是 javascript）请求和使用 json 对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:45:57.123

在这里，您可以使用 c# 中的 json 对象

```
IList<MyClass> myClassList = null;
var request = WebRequest.Create(url);
request.ContentType = "application/json; charset=utf-8";

string json;
using (var response = request.GetResponse())
{
    using (var sr = new StreamReader(response.GetResponseStream()))
    {
        json = sr.ReadToEnd();
        var javaScriptSerializer = new JavaScriptSerializer();
        myClassList = javaScriptSerializer.Deserialize<List<MyClass>>(json);
    }
} 
```

# python - 采用密钥“01234”并按索引（数字）的顺序替换它们的替换密码

> ID：10641531
> 
> 赞同：-2
> 
> 时间：2012-05-17T18:35:35.053
> 
> 标签：python, python-3.x

我不确定如何让'key'和'num'一起工作以获得最终答案。我正在考虑使用 .replace[] 但坦率地说，我对语言的理解不足以编写这种类型的代码。

例子：

```
encrypt('3924056871', '445566') 
```

应该返回`'005566'`。

```
def encrypt(key, num):
   lst=[]
   for i in key:
     for i in num: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:16:48.327

这里有两种方法。

1：使用内置`translate`和`maketrans`：

```
from string import maketrans
def encrypt1(key, numstr):
    trans = maketrans('0123456789', key)
    return numstr.translate(trans) 
```

2：手动：

```
def encrypt2(key, numstr):
    res = ""
    for ch in numstr:
        res += key[ord(ch) - ord('0')]
    return res 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:19:07.593

假设`key`有 10 个字符，plain_text 只有数字

```
def enc(key, plain_text):
    """
    >>> enc('3921056784', '445566')
    '005566'
    """
    return ''.join([key[int(x)] for x in plain_text]) 
```

# ruby-on-rails-3 - 奇怪的路由错误

> ID：10641532
> 
> 赞同：0
> 
> 时间：2012-05-17T18:35:35.340
> 
> 标签：ruby-on-rails-3, routing

我有一些非常奇怪的rails行为：

**路线.rb：**

```
resources :transactions, except: :show 
```

**rake 路由的相关输出：**

```
 transactions GET    /transactions(.:format)                  transactions#index
                    POST   /transactions(.:format)                  transactions#create
    new_transaction GET    /transactions/new(.:format)              transactions#new
   edit_transaction GET    /transactions/:id/edit(.:format)         transactions#edit
        transaction PUT    /transactions/:id(.:format)              transactions#update
                    DELETE /transactions/:id(.:format)              transactions#destroy 
```

**视图中的代码：**

```
<% if ( current_page?( new_transaction_path ) || current_page?( edit_transaction_path ) ) %>
  # Do something in here
<% end %> 
```

**错误：**

```
Completed 500 Internal Server Error in 20ms

ActionController::RoutingError (No route matches {:action=>"edit", :controller=>"transactions"}): 
```

当我卸下`|| current_page?( edit_transaction_path )`零件时它起作用。

我有什么问题还是这是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:23:01.987

尝试将事务对象传递给edit_transaction_path：`edit_transaction_path(@transaction)`

`current_page?( :action => "edit", :controller => "transactions")`- 是的，这是最好的方法，我相信。

# selenium - 如何避免“元素当前不可见，因此可能无法与” Selenium Webdriver

> ID：10641535
> 
> 赞同：15
> 
> 时间：2012-05-17T18:35:39.657
> 
> 标签：selenium, webdriver, selenium-webdriver

我正在使用 selenium webdriver 2.210 + JAVA 进行测试。我有一个示例代码用于选择 gmail 中的所有邮件。但是当我尝试延迟 5 秒时，代码会引发“元素当前不可见，因此可能无法与之交互”错误通过 webdriver 获取 URL 后。是否可以使此代码延迟工作？

```
 driver.get("https://mail.google.com/mail/u/0/?shva=1#all");
        delay(5);  ////*......Working fine without this...........*////
    driver.switchTo().frame(driver.findElement(By.id("canvas_frame")));
driver.findElement(By.xpath("//div[@class = 'T-Jo-auh']")).click(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T05:59:39.053

你确定你正在寻找正确的元素吗？我遇到了类似的问题，结果页面上有两个相似的元素，一个可见，另一个不可见。FindElement 函数正在返回不可见的那个。

我通过使用 FindElements 而不是 FindElement 解决了这个问题，然后使用 Linq 提取可见的那个。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-11T13:33:30.763

以下是您可以解决问题的摘要（Protractor/Javascript 中的示例）：

*   [最大化浏览器窗口](https://stackoverflow.com/questions/20023567/how-to-set-default-browser-window-size-in-protractor-webdriverjs)（在 Chrome+Mac 上，目前您[必须以不同的方式进行操作](https://stackoverflow.com/a/29857043/771848)）：

    ```
    browser.driver.manage().window().maximize(); 
    ```

*   验证*没有与 locator 匹配的其他元素*。如果存在与实际不可见的定位器匹配的另一个元素，则会出现此错误。

*   等待[元素可点击](http://angular.github.io/protractor/#/api?view=ExpectedConditions.prototype.elementToBeClickable)：

    ```
    var EC = protractor.ExpectedConditions,
        elm = element(by.id("myid"));

    browser.wait(EC.elementToBeClickable(elm), 5000); 
    ```

*   [滚动到](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView)元素的视图：

    ```
    var elm = element(by.id("myid"));
    browser.executeScript("arguments[0].scrollIntoView();", elm); 
    ```

*   [通过 javascript](https://stackoverflow.com/questions/34562061/webdriver-click-vs-javascript-click)点击：

    ```
    var elm = element(by.id("myid"));
    browser.executeScript("arguments[0].click();", elm); 
    ```

*   *移动到元素*并通过“浏览器操作”单击：

    ```
    var elm = element(by.id("myid"));
    browser.actions()
        .mouseMove(elm)
        .click()
        .perform(); 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-06T14:20:11.143

或者，您可以使用 Selenium 中提供的 JavascriptExecutor 类。完成此操作后，您可以执行任何 JavaScript 来操作网页上的 DOM。

参考：：[http ://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/JavascriptExecutor.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/JavascriptExecutor.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T19:00:25.110

我不确定，但每个 watir-webdriver 元素都有 - (Object) wait_until_present(timeout = 30) 方法。

如果此步骤是可选的，您应该检查可见性：

```
element = driver.findElement(By.xpath("//div[@class = 'T-Jo-auh']"));

if (element.isDisplayed()) {
  element.click();
} 
```

请注意，我不是 java 大师，上面的代码没有经过测试。试试看。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T19:42:09.443

Selenium 不会与隐藏或不向用户显示的 WebElement 交互。在这种情况下，用户点击与 div 元素或类似的东西进行交互的情况并不少见，这反过来又会触发实际的按钮，该按钮出于视觉目的而被隐藏。我建议在您的页面上运行 Firefox 中的 selenium IDE 中的步骤。查看当您单击“隐藏”元素时是否触发了多个事件。如果实际上触发了多个事件，请在您的 WebDriver 代码中遵循。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T12:22:52.387

如果您的应用程序使用 jQuery，您可以使用 Javascript 进行点击。我创建了这个简单的助手来单击 WebDriver 拒绝找到的元素：

```
public static void jqClick(String selector, JavascriptExecutor driver) {
    driver.executeScript("$('" + selector + "').click()");
} 
```

作为“驱动程序”，您可以使用例如`org.openqa.selenium.firefox.FirefoxDriver`.

这是唯一对我有用的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-29T12:26:17.820

尝试将 selenium webdriver 降级到 2.20.0。

我在 ruby​​ gem 版本 2.21.0 和 2.21.2 中遇到了类似的错误。

在我的情况下，Web 驱动程序总是`button.visible? = false`在通过 .Ajax 调用将按钮添加到页面的情况下返回。

我的测试以前工作了更长的时间，并且没有任何相关的改变。所以我认为这是当前版本的 webdriver 中的一个错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-04T09:17:44.350

```
JavascriptExecutor executor = (JavascriptExecutor)driver;
executor.executeScript("document.getElementById('id').setAttribute('visibility', 'true');");

driver.findElement(By.id("id")).click(); 
```

通过更改元素的可见性，您可以执行您的操作。您可以使用 selenium 或 JavascriptExecutor 单击

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-06T01:51:17.470

在我的情况下（在 c# 中从 Selenium WebDriver 调用 PhantomJSDriver）我必须将 Window Size 设置为足够大以使元素可见：

```
driver.Manage().Window.Size = new Size(1000, 800); 
```

我发现解决方法在这里阅读了这些问题： [https ://github.com/ariya/phantomjs/issues/11637](https://github.com/ariya/phantomjs/issues/11637)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-13T18:47:08.463

**PhantomJS**用户应该注意**最大化窗口的**答案。即使屏幕截图显示它完全可见，javascript 对话框也很有可能被认为位于视口之外。由于它清晰可见，因此某些滚动查看操作不会改变任何内容，并且所有其他操作也无用。（其他基于 WebKit 引擎的浏览器也是如此，例如 MacOS Safari 和旧版 Chrome）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-19T12:51:22.407

它很奇怪，但我必须在 Java 中明确设置浏览器大小。

> driver.manage().window().setSize(new Dimension(1000, 800));

# lucene - 在mac上安装Lucene的步骤是什么？

> ID：10641536
> 
> 赞同：3
> 
> 时间：2012-05-17T18:35:41.777
> 
> 标签：lucene

我正在尝试逐步学习Lucene。但是，我在网上找不到关于如何在 Mac 上安装 Lucene 的清晰教程。有谁知道？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T16:39:19.550

（从我上面的评论中复制）

对于 Lucene，我认为您不会“安装”它。相反，它出现在一个 JAR 文件中，您将其包含在应用程序的类路径中。通常您只需要二进制 JAR 文件。使用 Eclipse 之类的 Java 感知 IDE（它为您编译 Java 代码）可能是一个好主意。启动一个项目并告诉它把 Lucene JAR 文件添加到它的构建路径中，然后你就可以开始编写你的示例程序了。您是否尝试过像[这样](http://www.lucenetutorial.com/lucene-in-5-minutes.html)的一些 Lucene 教程？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T01:23:54.213

1.  在您的项目文件夹中创建一个名为 lib 的新文件夹。这代表“库”，将包含您将用于该项目的所有 JAR。复制您需要 lib 的 JAR。
2.  在 Eclipse 中展开 lib 并选择您需要的所有 JAR。
3.  右键单击 JAR 并导航到 Build Path。
4.  选择添加到构建路径。JAR 将从 lib 中消失并重新出现在 Referenced Libraries 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-07T00:07:40.773

我发现安装 lucene 的最短和最简单的方法是使用 Homebrew。做吧`brew install couchdb-lucene`。现在你的`lucene-home`会是这样的`\usr/local/Cellar/couchdb-lucene/2.0.0/libexec/`。欲了解更多信息，请查看[此处](http://brewformulas.org/Couchdb-lucene)。但是，在撰写本文时，我注意到，将安装 couchDB 1.6.1（一个依赖项）而不是 couchDB2（如果这是您想要使用的 couchDB 版本）。来自[couchdb 文档](http://docs.couchdb.org/en/2.1.0/install/mac.html#installation-with-homebrew)，“CouchDB 2.x 的 Homebrew 版本仍在开发中。”

# python - 从回调类外部向 GUI 传递更新

> ID：10641537
> 
> 赞同：0
> 
> 时间：2012-05-17T18:35:43.437
> 
> 标签：python, gtk, python-2.7

这是一个概念性的问题。

我正在学习 Python。我构建了一个 GUI 和一个回调类来处理事件。我想让回调类只处理事件，并在另一个 .py 文件中调用方法，所有繁重的工作实际上都完成了。

但是，我的 GUI 中有一个进度条和一个详细信息窗口，其中显示了该过程正在执行的所有工作。

如果我在回调类中拥有所有繁重的工作方法，我可以轻松更新进度条和详细信息窗口，然后调用：

```
while gtk.events_pending():
    gtk.main_iteration() 
```

在做更多工作之前更新 GUI。

但是，如果我的繁重工作方法（也更新了 GUI）被放置在它们自己的 .py 文件/自己的类中，我该怎么做呢？

这是我的例子：

这是我想放在回调类之外的方法：

```
#Some work before here

for root, subdirs, files in os.walk(directoryname, True):
    for fileName in files:
        totalFileCount = totalFileCount + 1

self.textBuffer.insert(self.textBuffer.get_end_iter(),
                       "Number of files and subdirs found for "
                       + directoryname + ": "
                       + str(totalFileCount) + "\n")
self.textViewDetail.scroll_to_iter(self.textBuffer.get_end_iter(),
                                   0,
                                   False,
                                   0,
                                   0)
self.walkProgress = progressbar.progressBar(0, totalFileCount)

while gtk.events_pending():
    gtk.main_iteration()

#some more work after here 
```

我认为，这是我对类应该如何工作的理解的脱节，而且我对文档的阅读并没有让我走得更远。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:34:31.550

试试这个技术：

[http://unpythonic.blogspot.com/2007/08/using-threads-in-pygtk.html](http://unpythonic.blogspot.com/2007/08/using-threads-in-pygtk.html)

# vim - 如何从两列之间的所有行中删除文本？

> ID：10641538
> 
> 赞同：8
> 
> 时间：2012-05-17T18:35:58.967
> 
> 标签：vim

我想删除两列之间所有行的内容。我该怎么做呢？

例如，我想要这个：

```
abcdefg
hijklmn
opqrstu 
```

如果我删除第 3 列到第 5 列之间的文本，就会变成这样：

```
abfg
himn
optu 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T19:23:19.740

将光标置于 d 中，然后按``Ctrl-V``、``l``和。``G````d``

*   `[`Ctrl-v`](http://vimdoc.sourceforge.net/htmldoc/visual.html#CTRL-V)`进入视觉阻挡模式；
*   ``l``将视觉选择向右扩展一个字符；
*   `[`G`](http://vimdoc.sourceforge.net/htmldoc/motion.html#G)`将选择扩展到最后一行；
*   ``d``删除选择。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-18T13:17:51.523

[您的问题与此](https://stackoverflow.com/questions/10514864/delete-a-specific-column-in-vim-gvim-with-out-using-visual-block-mode/10520817#10520817)问题非常相似。

**要删除文件中所有行的第**3 到 5 列：

```
:%normal 3|d6| 
```

要删除特定的行间隔（80 到 90），请使用以下命令：

```
:80,90normal 3|d6| 
```

如果您不熟悉普通命令也不熟悉 | “运动”有一个快速的解释：

1.  该`normal`命令在**正常**模式下执行以下命令；
2.  该| "motion" 将光标移动到指定列，因此`3|`将光标移动到第 3 列；
3.  然后我删除所有内容 ( `d`) 直到第 5 列 ( `6|`)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T19:29:08.427

对于自发编辑，我会通过 CTRL-V（通常映射到 Windows 上的 CTRL-Q）使用分块可视模式，然后`d`将其删除。

如果你经常这样做，对于一个大范围/整个缓冲区，或者重复，我会使用一个在虚拟列中开始匹配的替换，并延伸（向上）到最后一列，就像你的例子：

```
%s/\%3v.*\%<7v// 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T07:26:35.280

您可以使用搜索和替换：

```
:%s/..\zs...\ze 
```

或更一般的形式：

```
:%s/.\{2}\zs.\{3}\ze 
```

其中第一个数字 (2) 是列的索引（从零开始），第二个数字 (3) 是该列的字符数。

解释：

`:%s/`在整个缓冲区中搜索和替换。

`.\{2}\zs`找到两个字符并在此处设置匹配的开头。

`.\{3}\ze`找到三个字符并在此处设置匹配结束。

省略替换字符串，因为您要删除匹配项。

高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-18T13:02:51.690

我会按照以下方式进行：

```
:%s/^..\zs.*\ze..$//g 
```

这将在开始时删除前两列和最后两列之外的所有其他内容。

# xquery - Xquery 中的分词

> ID：10641546
> 
> 赞同：1
> 
> 时间：2012-05-17T18:36:18.070
> 
> 标签：xquery

如何标记特殊字符，如**“&”**和**“？”** 在 xquery 中。当我试图*标记*这些特殊字符时，我无法做到这一点。你能建议我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:58:43.623

您必须像在 XML 中那样转义 & 符号。

```
tokenize($string, "&amp;") 
```

或者，您也可以使用其 unicode 代码点：

```
tokenize($string, codepoints-to-string(38)) 
```

# c# - 我可以使用数据绑定格式化事件有条件地选中复选框吗？

> ID：10641552
> 
> 赞同：2
> 
> 时间：2012-05-17T18:36:35.713
> 
> 标签：c#, winforms, data-binding, formatting

此处有关格式化数据绑定控件的信息[是否有一种非笨拙的方式来使用绑定数据执行特殊情况格式化？](https://stackoverflow.com/questions/10639477/is-there-a-non-klunky-way-to-perform-special-case-formatting-with-bound-data)是很棒的。

现在，如果我想有条件地检查复选框怎么办 - 有没有办法使用格式化事件来完成它？目前我的代码是：

```
// if gender = "N" Index = -1, if "F", index = 0, if "M" index = 1;
if (platypusInfo.Gender.Equals("F")) {
    radioButtonFemale.Checked = true;
    radioButtonMale.Checked = false;
} else if (platypusInfo.Gender.Equals("M")) {
    radioButtonMale.Checked = true;
    radioButtonFemale.Checked = false;
} else { // (platypus.Gender == "N")
    radioButtonFemale.Checked = false;
    radioButtonMale.Checked = false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:03:08.133

除了`Binding.Format`事件之外，还有一个`Binding.Parse`事件可以用来反转信息。

每个单选按钮都需要自己的数据绑定设置：

```
Binding maleBind = new Binding("Checked", person, "Gender", true);
maleBind.Format += new ConvertEventHandler(maleBind_Format);
maleBind.Parse += new ConvertEventHandler(maleBind_Parse);
radioButtonMale.DataBindings.Add(maleBind);

Binding femaleBind = new Binding("Checked", person, "Gender", true);
femaleBind.Format += new ConvertEventHandler(femaleBind_Format);
femaleBind.Parse += new ConvertEventHandler(femaleBind_Parse);
radioButtonFemale.DataBindings.Add(femaleBind); 
```

然后是事件：

```
void femaleBind_Parse(object sender, ConvertEventArgs e) {
  if ((bool)e.Value)
    e.Value = "F";
}

void femaleBind_Format(object sender, ConvertEventArgs e) {
  e.Value = ((string)e.Value == "F");
}

void maleBind_Parse(object sender, ConvertEventArgs e) {
  if ((bool)e.Value)
    e.Value = "M";
}

void maleBind_Format(object sender, ConvertEventArgs e) {
  e.Value = ((string)e.Value == "M");
} 
```

# java - Java 整数类型的原始类型转换是否在转换类型的 MAX_INT 处“封顶”？

> ID：10641559
> 
> 赞同：8
> 
> 时间：2012-05-17T18:36:56.727
> 
> 标签：java, casting, int, double

我试图追踪一些非常奇怪的 Java 行为。我有一个涉及双精度的公式，但“保证”给出一个整数答案——特别是一个无符号的 32 位整数（唉，Java 做得不好）。不幸的是，我的回答有时不正确。

最终我发现了这个问题，但这种行为对我来说*仍然*很奇怪：`double`直接转换为 an`int`似乎被限制`MAX_INT`为有符号整数，而转换为`double`a*然后*转换为 an给了我预期的答案（ -1；无符号 32 位整数的 MAX INT，表示为有符号 32 位整数）。`long`*`int`*

 *我写了一个小测试程序：

```
public static void main(String[] args) {
    // This is the Max Int for a 32-bit unsigned integer
    double maxUIntAsDouble = 4294967295.00;
    long maxUintFromDoubleAsLong = (long)maxUIntAsDouble;
    long maxUintFromDoubleAsInt = (int)maxUIntAsDouble;
    int formulaTest = (int) (maxUintFromDoubleAsLong * 1.0);
    int testFormulaeWithDoubleCast =  (int)((long) (maxUintFromDoubleAsLong * 1.0));
    // This is a more-or-less random "big number"
    long longUnderTest = 4123456789L;
    // Max int for a 32-bit unsigned integer
    long longUnderTest2 = 4294967295L;
    int intFromLong = (int) longUnderTest;
    int intFromLong2 = (int) longUnderTest2;
    System.out.println("Long is: " + longUnderTest);
    System.out.println("Translated to Int is:" + intFromLong);
    System.out.println("Long 2 is: " + longUnderTest2);
    System.out.println("Translated to Int is:" + intFromLong2);
    System.out.println("Max UInt as Double: " + maxUIntAsDouble);
    System.out.println("Max UInt from Double to Long: " + maxUintFromDoubleAsLong);
    System.out.println("Max UInt from Double to Int: " + maxUintFromDoubleAsInt);
    System.out.println("Formula test: " + formulaTest);
    System.out.println("Formula Test with Double Cast: " + testFormulaeWithDoubleCast);
} 
```

当我运行这个小程序时，我得到：

```
Long is: 4123456789
Translated to Int is:-171510507
Long 2 is: 4294967295
Translated to Int is:-1
Max UInt as Double: 4.294967295E9
Max UInt from Double to Long: 4294967295
Max UInt from Double to Int: 2147483647
// MAX INT for an unsigned int
Formula test: 2147483647
// Binary: all 1s, which is what I expected
Formula Test with Double Cast: -1 
```

下面两行是我试图理解的。双重演员给了我预期的“-1”；但是直接转换给了我 MAX_INT 一个 32 位有符号整数。来自 C++ 背景，如果它给了我一个“奇数”而不是预期的 -1（又名“天真铸造”），我会理解，但这让我感到困惑。

那么，接下来的问题是：Java 中的这种“预期”行为（例如`double`，直接转换为 an 的任何转换`int`都将被“限制”为`MAX_INT`）？强制转换是否对任何意外类型执行此操作？例如，我希望它与`short`and相似`byte`；但是当将超大双精度转换为浮动时，“预期行为”是什么？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T19:12:55.113

这是预期的行为。请记住，Java 中没有原始 unsigned long 或 int 类型，用于 Narrowing Primitive Conversion (5.1.3) 的[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)(Java 7) 声明强制转换“太小或太大”的浮点值（无论是 double或 float) 到 int 或 long 的整数类型将使用有符号整数类型的最小值或最大值（强调我的）：

> 浮点数到整数类型 T 的窄化转换需要两个步骤：
> 
> 1.  第一步，浮点数转换为 long（如果 T 为 long）或转换为 int（如果 T 为 byte、short、char 或 int），如下所示：
>     
>     
>     *   如果浮点数是 NaN（第 4.2.3 节），则转换第一步的结果是 int 或 long 0。
>     *   否则，如果浮点数不是无穷大，则浮点值将四舍五入为整数值 V，使用 IEEE 754 向零舍入模式（第 4.2.3 节）向零舍入。那么有两种情况：
>         
>         
>         *   一种。如果 T 是 long，并且这个整数值可以表示为 long，那么第一步的结果就是 long 值 V。
>         *   湾。否则，如果这个整数值可以表示为 int，那么第一步的结果就是 int 值 V。
>     *   否则，以下两种情况之一必须为真：
>         
>         
>         *   **一种。该值必须太小（一个大的负值或负无穷大），第一步的结果是int或long类型的最小可表示值。**
>         *   **湾。该值一定是太大了（一个大的正值或正无穷大），第一步的结果是int或long类型的最大可表示值。***
> 2.  第二步： * 如果T是int或者long，转换的结果就是第一步的结果。* 如果 T 是 byte、char 或 short，则转换的结果是第一步结果的窄化转换为 T 类型（第 5.1.3 节）的结果。
>     
>     
> 
> 示例 5.1.3-1。缩小原始转换
> 
> ```
> class Test {
>     public static void main(String[] args) {
>         float fmin = Float.NEGATIVE_INFINITY;
>         float fmax = Float.POSITIVE_INFINITY;
>         System.out.println("long: " + (long)fmin + ".." + (long)fmax);
>         System.out.println("int: " + (int)fmin + ".." + (int)fmax);
>         System.out.println("short: " + (short)fmin + ".." + (short)fmax);
>         System.out.println("char: " + (int)(char)fmin + ".." + (int)(char)fmax);
>         System.out.println("byte: " + (byte)fmin + ".." + (byte)fmax);
>     }
> } 
> ```
> 
> 该程序产生输出：
> 
> ```
> long: -9223372036854775808..9223372036854775807
> int: -2147483648..2147483647
> short: 0..-1
> char: 0..65535
> byte: 0..-1 
> ```
> 
> char、int 和 long 的结果并不令人惊讶，它们产生了该类型的最小和最大可表示值。
> 
> byte 和 short 的结果会丢失有关数值的符号和大小的信息，并且还会丢失精度。通过检查最小和最大 int 的低位可以理解结果。十六进制的最小 int 为 0x80000000，最大 int 为 0x7fffffff。这解释了简短的结果，即这些值的低 16 位，即 0x0000 和 0xffff；它解释了 char 结果，也就是这些值的低 16 位，即 '\u0000' 和 '\uffff'；它解释了字节结果，即这些值的低 8 位，即 0x00 和 0xff。

因此，第一种情况通过乘法`int formulaTest = (int) (maxUintFromDoubleAsLong * 1.0);`提升`maxUintFromDoubleAsLong`为 double，然后将其转换为 int。由于该值太大而无法表示为有符号整数，因此该值变为 2147483647 (Integer.MAX_VALUE) 或 0x7FFFFFFF。

至于后一种情况：

> 有符号整数到整数类型 T 的窄化转换只会丢弃除 n 个最低位之外的所有位，其中 n 是用于表示类型 T 的位数。除了可能丢失有关数值大小的信息之外，这可能会导致结果值的符号与输入值的符号不同。

所以`int testFormulaeWithDoubleCast = (int)((long) (maxUintFromDoubleAsLong * 1.0));`首先将 maxUintFromDoubleAsLong 提升为双倍，回到 long（仍然合适），然后提升为 int。在最后一次转换中，多余的位被简单地丢弃，留下 0xFFFFFFFF，当解释为有符号整数时为 -1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T19:12:03.913

这就是语言规范的编写方式。将浮点数转换为整数类型，如果值对于目标而言太大，则替换最大值。在从一种整数类型到更小的整数类型的窄化转换中，高位被丢弃。

请参阅 JLS **[5.1.3。缩小原始转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)**

因此，标题中问题的答案是“是”。*

# php - 如何在PHP中检查StringB是否以StringA开头？

> ID：10641560
> 
> 赞同：0
> 
> 时间：2012-05-17T18:37:03.327
> 
> 标签：php, string, substring, match

***如果两者的长度都是可变的，***如何检查是否`StringB` **以开头**？`StringA`

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:41:02.507

在 PHP 中，没有像其他语言那样的 StartsWith()。作为替代方案，您可以使用[`mb_strpos()`](http://www.php.net/manual/en/function.mb-strpos.php)：

```
if(mb_strpos($source, $start) === 0) 
```

您可以创建自己的 StartsWith() 函数：

```
function StartsWith($source, $start)
{
    return (mb_strpos($source, $start) === 0);
} 
```

我强烈建议使用[多字节字符串函数](http://www.php.net/manual/en/ref.mbstring.php)。这样你就可以在 2025 年之前使用 Unicode 字符串，那时 PHP 已经完全支持 Unicode 了；-)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:40:40.167

```
substr($StringB, 0, strlen($StringA)) == $StringA 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T18:41:00.870

使用strpos怎么样？(http://php.net/strpos)

```
if (strpos($stringB, $stringA) === 0) {
    // matched
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T18:39:37.803

采用：

```
strcmp() / strcasecmp() 
```

它考虑了长度是否不同，并且只比较到最小长度。

[http://php.net/manual/en/function.strcmp.php](http://php.net/manual/en/function.strcmp.php)

或者：

```
substr_compare() 
```

如果您需要比较 StringB 是否以 StringA 开头并确定它不是另一种方式（其中 StringB 将是较短的）。

[http://www.php.net/manual/en/function.substr-compare.php](http://www.php.net/manual/en/function.substr-compare.php)

上述两个函数都很快，它们只遍历最短的字符串一次。

* * *

相对于：

```
strpos() 
```

它将尝试在 StringB 中的任何位置找到 StringA *，*以返回 StringA 开始的位置。

```
preg_match 
```

或其他更昂贵的操作的正则表达式，应该用于需要检查许多事情的情况

正则表达式引擎需要编译正则表达式字符串，并且它们使用大量回溯和大量循环字符串来找到它们的匹配项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T18:41:02.077

```
$pos = strpos($StringB, $StringA) 
```

如果 $pos 是 1 或 0（我忘了哪个），那么你知道字符串 B 以字符串 A 开头。

编辑：它是位置 0。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T18:42:58.610

为此使用[strpos](http://php.net/manual/ru/function.strpos.php) ...

```
if(strpos($stringB, $stringA) === 0) {
    // starts with stringA
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-18T15:21:22.403

答案已被接受，但以下方法 - 不幸的是，由于 php 的性质 - 唯一正确的方法：使用`strncmp()`or `===`。原因如下：

考虑以下示例输入（除了最后一个数字外，两个字符串都相等）：

```
$StringA = '9223372036854775808';
$StringB = '9223372036854775807'; 
```

现在，我们采取以下解决方案：

```
var_dump(substr($StringB, 0, strlen($StringA)) == $StringA); 
```

你能猜出返回值吗？它的：

```
true 
```

等等，什么，为什么？！原因如下：[https ://bugs.php.net/bug.php?id=54547](https://bugs.php.net/bug.php?id=54547)

PHP 通常从外部字符串中获取大部分数据，即使它们是数字。因此，如果您的代码读取`$_POST['key'] == 123`并且`$_POST['key']`实际上是`'123'`，它仍然可以工作，因为 PHP 会在计算相等性之前对字符串执行类型转换为整数。

也一样`$_GET['key'] == $_POST['key']`，假设两个字符串都有数字。这就是踢球者：

> PHP 在比较之前确定字符串是否首先看起来是数字。但是，如果数值变得太大，它们会溢出到 a 中`double`，从而失去精度；这会导致比较返回意外结果。

相反，要比较字符串，您必须非常明确：

```
// use strncmp() - the === here is not really necessary btw
var_dump(0 === strncmp($StringB, $StringA, strlen($StringA)));
// use === to perform the comparison in a strict manner
var_dump(substr($StringB, 0, strlen($StringA)) === $StringA); 
```

回报：

```
false
false 
```

恢复正常:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-17T18:38:55.900

你可以试试：

```
if(preg_match('/^'.preg_quote($stringA).'.*/', $stringB){ do some stuff } 
```

无论字符串大小如何，这将检查 B 是否以 A 开头。

编辑：提出了一个很好的观点。如果您想对可能包含正则表达式特殊字符的字符串使用 preg_match，请使用 preg_quote($string) 确保在使用正则表达式中的字符串之前将其转义。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-17T18:41:14.027

这样的事情怎么样？

```
if (strlen($b) < strlen($a)) {
   //does not match
}

$len = strlen($a);
if (substr($b, 1, $len) == $a) {
   //matches
} 
```*

# c# - 如何有效地对数组进行排序以利用多个 CPU？

> ID：10641563
> 
> 赞同：3
> 
> 时间：2012-05-17T18:37:07.647
> 
> 标签：c#, sorting, parallel-processing, task-parallel-library

我有一个包含 1 亿个条目的未排序列表。RAM 不是问题。我对 List.Sort 的速度并不满意，我想知道是否有一种可靠的技术可以对我的列表进行排序以利用多个处理器。

我查看了 Parallel.Invoke 但无法弄清楚如何实际使用它进行排序，也许它不可能。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:41:04.197

在[另一个 StackOverflow 问题](https://stackoverflow.com/questions/1897458/parallel-sort-algorithm)中，我发现了这个：

```
private void QuicksortSequential<T>(T[] arr, int left, int right)  
where T : IComparable<T> 
{ 
    if (right > left) 
    { 
        int pivot = Partition(arr, left, right); 
        QuicksortSequential(arr, left, pivot - 1); 
        QuicksortSequential(arr, pivot + 1, right); 
    } 
} 

private void QuicksortParallelOptimised<T>(T[] arr, int left, int right)  
where T : IComparable<T> 
{ 
    const int SEQUENTIAL_THRESHOLD = 2048; 
    if (right > left) 
    { 
        if (right - left < SEQUENTIAL_THRESHOLD) 
        { 

            QuicksortSequential(arr, left, right); 
        } 
        else 
        { 
            int pivot = Partition(arr, left, right); 
            Parallel.Do( 
                () => QuicksortParallelOptimised(arr, left, pivot - 1), 
                () => QuicksortParallelOptimised(arr, pivot + 1, right)); 
        } 
    } 
} 
```

来自同一问题的答案的不同（并且更完整，但不确定“更好”）实现：

```
/// <summary> 
/// Parallel quicksort algorithm. 
/// </summary> 
public class ParallelSort 
{ 
    #region Public Static Methods 

    /// <summary> 
    /// Sequential quicksort. 
    /// </summary> 
    /// <typeparam name="T"></typeparam> 
    /// <param name="arr"></param> 
    public static void QuicksortSequential<T>(T [] arr) where T : IComparable<T> 
    { 
        QuicksortSequential(arr, 0, arr.Length - 1); 
    } 

    /// <summary> 
    /// Parallel quicksort 
    /// </summary> 
    /// <typeparam name="T"></typeparam> 
    /// <param name="arr"></param> 
    public static void QuicksortParallel<T>(T[] arr) where T : IComparable<T> 
    { 
        QuicksortParallel(arr, 0, arr.Length - 1); 
    } 

    #endregion 

    #region Private Static Methods 

    private static void QuicksortSequential<T>(T[] arr, int left, int right)  
        where T : IComparable<T> 
    { 
        if (right > left) 
        { 
            int pivot = Partition(arr, left, right); 
            QuicksortSequential(arr, left, pivot - 1); 
            QuicksortSequential(arr, pivot + 1, right); 
        } 
    } 

    private static void QuicksortParallel<T>(T[] arr, int left, int right)  
        where T : IComparable<T> 
    { 
        const int SEQUENTIAL_THRESHOLD = 2048; 
        if (right > left) 
        { 
            if (right - left < SEQUENTIAL_THRESHOLD) 
            { 
                QuicksortSequential(arr, left, right); 
            } 
            else 
            { 
                int pivot = Partition(arr, left, right); 
                Parallel.Invoke(new Action[] { delegate {QuicksortParallel(arr, left, pivot - 1);}, 
                                               delegate {QuicksortParallel(arr, pivot + 1, right);} 
                }); 
            } 
        } 
    } 

    private static void Swap<T>(T[] arr, int i, int j) 
    { 
        T tmp = arr[i]; 
        arr[i] = arr[j]; 
        arr[j] = tmp; 
    } 

    private static int Partition<T>(T[] arr, int low, int high)  
        where T : IComparable<T> 
    { 
        // Simple partitioning implementation 
        int pivotPos = (high + low) / 2; 
        T pivot = arr[pivotPos]; 
        Swap(arr, low, pivotPos); 

        int left = low; 
        for (int i = low + 1; i <= high; i++) 
        { 
            if (arr[i].CompareTo(pivot) < 0) 
            { 
                left++; 
                Swap(arr, i, left); 
            } 
        } 

        Swap(arr, low, left); 
        return left; 
    } 

    #endregion 
} 
```

# css - 带边距的元素：自动重叠浮动元素，解决方案？

> ID：10641569
> 
> 赞同：1
> 
> 时间：2012-05-17T18:37:26.133
> 
> 标签：css, css-float, center, margin

我有一个 div，在我希望在我的内容区域居中的大多数页面上，我通过“ `margin:5px auto;`”来完成它。

在特定页面上，我想将图像和标题放在右侧（如`<div><img /><cite></cite></div>`），并将我的原始 div 放在剩余空间的中心。当我设置我的新 div 时，`float:right;`它只是与我原来的 div 重叠。

解决这个问题的最佳方法是什么，使我的原始 div 可以在大多数页面上居中，但如果我在它旁边放置一个元素，则调整到侧面？（或者我可以使用表格或内联样式:(

我在这里有一个 jsfiddle [http://jsfiddle.net/nhaskins/zjZth/](http://jsfiddle.net/nhaskins/zjZth/)

谢谢。

*编辑*

为了澄清我想要一些我可以有`#right`任意宽度的东西，`#left`将在剩余宽度的中心，并且文本将在下面清除`#left`并在`#right`. 如果我找不到解决方案，我的后备将是`#left`用内联样式覆盖边距，以便为任何给定页面正确定位它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:21:00.503

浮动的问题在于，它将该元素从正常的内容流中取出，它只是漂浮在那里，与其他元素不相配。您可能只需将其用作内联元素或使用`clear:both`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:25:22.293

**使用 jQuery 更新答案：**

[http://jsfiddle.net/zjZth/8/](http://jsfiddle.net/zjZth/8/)

```
$(document).ready(function(){
    var margin = (($('#content').width() - $('#right').width()) - $('#left').width() ) / 2;
    $('#left').css('margin-left', margin + 'px');
}); 
```

* * *

**原答案：**

我能想出的最简单的解决方案是将您的浮动右侧 div 放在您的内容之外，然后为您的内容提供与浮动 div 宽度相等的右边距。

更新小提琴：http: [//jsfiddle.net/zjZth/6/](http://jsfiddle.net/zjZth/6/)

HTML：

```
<div id="right"></div> 
<div id="content">
<div id="left"></div>
<p>Lorem ipsum etc. etc. hkf uhuhek jfhksd jhgklh wgeluih e d shd ed k uhue f vgkdgku  e fudu ghf ugefkiu gek fwioeugf i ghdsi gusdui djhfk uhuhek jfhksd jhgklh wgeluih e d shd ed k uhue f vgkdgku  e fudu ghf ugefkiu gek fwioeugf i ghdsi gusdui djhfk uhuhek jfhksd jhgklh wgeluih e d shd ed k uhue f vgkdgku  e fudu ghf ugefkiu gek fwioeugf i ghdsi gusdui djhfk</p>
</div> 
```

对于 CSS：

```
#content {
    padding: 5px; 
    margin-right:200px;
}

#right {
    background: rgba(0,0,255,0.8);
    float: right;
    width: 200px;
    height: 200px;
    margin: 5px;
}

#left {
    background: red;
    margin: 5px auto;
    width: 200px;
    height: 120px;
} 
```

# php - 为什么 echo() 输出的 base64_decode() 不能在浏览器中完全显示？

> ID：10641570
> 
> 赞同：0
> 
> 时间：2012-05-17T18:37:32.047
> 
> 标签：php, base64, decode, encode

请看下面的代码：

```
<?php
$str = 'PD9waHANCiRzdHJpbmcgPSAiYmVhdXRpZnVsIjsNCiR0aW1lID0gIndpbnRlciI7DQoNCiRzdHIg
PSAnVGhpcyBpcyBhICRzdHJpbmcgJHRpbWUgbW9ybmluZyEnOw0KZWNobyAkc3RyLiAiPGJyIC8+
IjsNCg0KZXZhbCgiXCRzdHIgPSBcIiRzdHJcIjsiKTsNCmVjaG8gJHN0cjsNCj8+IA==';
echo base64_decode($str);
?> 
```

这是一个简单的 php 代码，您可以使用以下 URL 解码 base64 字符串：
[http ://www.base64decode.org/](http://www.base64decode.org/)

为什么这个例子中的 base64_decode() 函数不能完成它的工作。输出如下：

```
"; eval("\$str = \"$str\";"); echo $str; ?> 
```

代替 ：

```
<?php
$string = "beautiful";
$time = "winter";

$str = 'This is a $string $time morning!';
echo $str. "<br />";

eval("\$str = \"$str\";");
echo $str;
?> 
```

有什么问题，我该如何解决大代码？

**编辑：**
输出有一个不可见的部分，我可以通过页面源找到它。
但为什么我们会有这种反应？
提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:39:59.077

问题是您将其视为 HTML。如果您查看源代码或传递标头以使浏览器将其解释为文本，您将看到整个内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:11:33.977

你添加了那些换行符吗？

如果你使用这样的代码：

```
<?php
$str = 'PD9waHANCiRzdHJpbmcgPSAiYmVhdXRpZnVsIjsNCiR0aW1lID0gIndpbnRlciI7DQoNCiRzdHIgPSAnVGhpcyBpcyBhICRzdHJpbmcgJHRpbWUgbW9ybmluZyEnOw0KZWNobyAkc3RyLiAiPGJyIC8+IjsNCg0KZXZhbCgiXCRzdHIgPSBcIiRzdHJcIjsiKTsNCmVjaG8gJHN0cjsNCj8+IA==';
echo base64_decode($str);
?> 
```

它工作得很好。

但是您在字符串中添加了换行符（“\n”）。为了在多条线路上制动它。这就是为什么它不起作用。

如果您需要在多条线路上制动它，您必须这样做：

```
<?php
$str = 'PD9waHANCiRzdHJpbmcgPSAiYmVhdXRpZnVsIjsNCiR0aW1lID0gIndpbnRlciI7DQoNCiRzdHIg'.
       'PSAnVGhpcyBpcyBhICRzdHJpbmcgJHRpbWUgbW9ybmluZyEnOw0KZWNobyAkc3RyLiAiPGJyIC8+'.
       'IjsNCg0KZXZhbCgiXCRzdHIgPSBcIiRzdHJcIjsiKTsNCmVjaG8gJHN0cjsNCj8+IA==';
echo base64_decode($str);
?> 
```

如果您想将这些换行符保留在字符串中，例如，如果您有一个已经自动换行的大型 base64 编码字符串（通常每行 70-80 个字符），您可以执行以下操作：

```
$str = 'PD9waHANCiRzdHJpbmcgPSAiYmVhdXRpZnVsIjsNCiR0aW1lID0gIndpb
        nRlciI7DQoNCiRzdHIgPSAnVGhpcyBpcyBhICRzdHJpbmcgJHRpbWUgbW
        9ybmluZyEnOw0KZWNobyAkc3RyLiAiPGJyIC8+IjsNCg0KZXZhbCgiXCR
        zdHIgPSBcIiRzdHJcIjsiKTsNCmVjaG8gJHN0cjsNCj8+IA==';
$str = implode('', preg_split('/\s*/', $str));
echo base64_decode($str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:41:42.290

eval 语句只执行命令并返回字符串....而您实际需要的是在 eval 内部进行 eval ，这有点荒谬..发生...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T18:41:42.450

尝试查看您的输出源 - 我很确定完整的内容在那里，但您的浏览器正在尝试将其读取为 HTML。

回显您的 base64 编码 PHP 脚本不会神奇地评估它；你必须自己做：

```
eval(base64_decode($str)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-18T13:37:27.097

试试这个它可能对你有帮助。

```
$bodyData = strtr($str, array('-' => '+', '_' => '/'));
$messagesDetail['body'] = base64_decode($bodyData); 
```

# javascript - Jquery循环在第一次加载时没有正确加载样式

> ID：10641572
> 
> 赞同：1
> 
> 时间：2012-05-17T18:37:38.263
> 
> 标签：javascript, jquery, html, css

使用 JQuery Cycle 插件时遇到问题。我正在使用它来调用（目前最终是 4 个）2 个内容代码块（图像、链接文本和底部导航）。当我加载页面进行测试时，它只会在第一张幻灯片上抛出第一次调用样式. 被抛出的元素有一个 position:relative 参数。这是HTML：

```
<div class="slide">
  <img src="images/cycle_img_test.jpg" />
  <figure class="slide_link">
  </figure>
  <p class="slidelink_text">1 View Our Reports</p>
  <img src="images/slider_arrow.png" class="link_arrow">
    <div class="slide_nav">
    </div>
      <div class="slidenav_content">
        <p class="nav_left">&lt;</p>
        <img src="images/slide_nav_current.png" />
        <img src="images/slide_nav_other.png" />
        <img src="images/slide_nav_other.png" />
        <img src="images/slide_nav_other.png" />
    <p class="nav_right">&gt;</p>
      </div>
</div> 
```

这是调用 .slideshow 的 Js：

```
<script src="js/cycle.js"></script>
<script type="text/javascript">
        $(document).ready(function() {
            $('.slideshow').cycle({
                fx: 'fade' // choose your transition type, ex: fade,     scrollUp, shuffle, etc...
            });
        });
</script> 
```

这是引用样式的 CSS：

```
.slide_link { width:217px; height:38px; background:#d2a709; opacity:.4; position:absolute; top:255px; z-index:10; }

.slidelink_text { vertical-align:center; font:bold 16px carto_bold, arial, helvetica, sans-serif; line-height:18px; letter-spacing:.01em; padding-left:35px; color:#fafafa; position:absolute; top:265px; z-index:11; }

.slide_nav { background:#3a4c5b; opacity:.6; width:605px; height:33px; position:relative; bottom:63px; left:25px; }

.slidenav_content { max-width:600; height:33px; position:relative; bottom:89px; left:35px; }

.slidenav_content img { position:relative; left:245px; }

.nav_left{ position:relative; float:left; color:#fff; }

.nav_right{ position:relative; float:right; right:395px; color:#fff; } 
```

如果您能就为什么循环仅在第一张幻灯片的第一个提示上错误地加载样式提供任何建议，我将不胜感激。或者即使您可以辨别错误是在 CSS 中还是在 Js 中，也肯定会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T21:34:27.050

由于没有人回应，我会试一试：

你的问题有点含糊。但是您可以[将此演示](http://jsfiddle.net/hellosze/HuNfz/)用作参考。

如您所见，它包含所有元素`relative`并使用非常清晰和简单的布局。

您的示例可能无法正常工作，因为调用函数时缺少连贯的参数`cycle`，从而干扰了您希望 HTML 显示的方式。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T20:33:14.077

如果您在幻灯片插件中使用“随机”和/或“超时”选项，您可能想尝试使用首先隐藏幻灯片然后显示并加载它的技巧。前任：

```
$('.slideshow').hide(); 
```

在盯着插件之前。所以它会像：

```
<script>
$('.slideshow').hide();
$(document).ready(function() {
$('.slideshow').show();
        $('.slideshow').cycle({
            fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
        });
    });
</script> 
```

如果样式只停留在第一个面板上而不是下面的面板上，那么很可能是 CSS 问题。

# ruby-on-rails - 我如何设计这个rails数据库关系？

> ID：10641573
> 
> 赞同：1
> 
> 时间：2012-05-17T18:37:52.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, many-to-many

好的，所以我有用户和公司。我有 95% 的用户将只有一家公司，所以我想做一对多。

### 用户表

```
create_table "users"
  string   "email",
  string   "first_name"
  string   "last_name"
  string   "phone_number"
  integer  "company_id" 
```

但问题是有些管理员需要与不止一家公司相关联，而系统中的一些用户则拥有两家公司。

因此，由于多对多关系，我假设了一个连接表

### 加入表

```
"company_users"
  t.integer  "company_id"
  t.integer  "user_id" 
```

但我必须如此频繁地评估用户公司，以至于我希望能够轻松访问公司并且讨厌为 5% 的用户提供连接表。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:22:24.077

除非您遗漏有关拥有多家公司的管理员的数据，否则无法使用链接表。我建议您同时跟踪多对多和主要公司。

```
 class User
   belongs_to :primary_company, :class_name => Company
   has_many :company_users
   has_many :companies, :through => :company_users
 end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:59:59.080

不幸的是，即使系统中只有一个用户拥有不止一家公司，它也会变成多对多。

1.  您可以要求用户有两条记录，每家公司一条，但这似乎并不理想。
2.  您可以将 2 个外键放在用户上的 Company 中，并`belongs_to :company, foreign_key: 'company1_id'`使用不同的外键声明两次。**一点都不理想**，但它*可以*工作。
3.  您可以使用支持数组并拥有一组 company_id 的数据库。不过，这并不容易与 ActiveRecord 一起使用。但是，如果使用 MongoDB 是一个选项，Mongoid 对此有很好的支持。
4.  最有可能的是，您只需要一个连接表。我会考虑为角色（管理员、员工等）放置另一个字段并调用模型位置。然后一个用户`has_many :positions`和`has_many :companies, through: :positions`. 如果这会导致大量连接，您将需要找到一种方法来缓存它。在 Rails 中缓存实际上非常简单。

[Rails 缓存 Rails](http://guides.rubyonrails.org/caching_with_rails.html)
[中的低级缓存](http://www.tmatthew.net/blog/rails-caching-example)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T13:49:33.237

我重新阅读了答案，现在觉得您的问题出在

“我希望能够轻松访问公司，并且讨厌为 5% 的用户提供连接表。”

你“讨厌”这个事实是什么？“只有 5%”实际上是如何影响应用程序架构或性能或可用性的？

专注于向您的用户显示的问题。如果他们发现 ui 令人困惑或太慢，则根据该问题进行工作。

试图消除“可能的”未来性能问题通常被认为是浪费时间。到那时，应用程序可能会发生很大变化。此外，解决性能问题可能意味着诸如非规范化之类的方法，在确定确切问题之前，您绝对不想使用此类方法。

此外，数据库在通过连接表查找记录时非常有效，所以我不会担心效率低下，除非它们现在引起实际问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T20:14:31.833

您可以非规范化。

添加一个布尔标志“ `only_1_company`”。

用触发器维护它。

# jquery - JQuery 更改链接标签的 href 属性

> ID：10641578
> 
> 赞同：0
> 
> 时间：2012-05-17T18:38:02.500
> 
> 标签：jquery, pinterest

我正在尝试用 Pinterest PinIt 按钮组合一个简单的概念证明。我们有一个产品页面，它以一种颜色显示一个项目的图像，但用户可以单击一个按钮并以另一种颜色查看相同的产品。单击按钮时，我需要更改 PinIt 按钮中的链接以反映当前颜色，因此如果用户尝试固定项目，它会固定当前选定的颜色。下面是我目前拥有的代码片段。当我删除名称和 url 或我们的测试服务器时，我可能错过了一个或两个转义字符。（名称已更改以保护无辜者）

当我单击 Show Black 按钮，然后单击 Pin It 时，它仍然显示白色图像。我对 JQuery 很陌生，所以任何帮助都将不胜感激。

**JS：**

```
$("#button").click(function () {
        var productPage = "http://myproductpage.com";
        var productImage = "http://MyproductimageBlack.jpg";
        var productDescription = "MyProduct";

        var linkValue = "http://pinterest.com/pin/create/button/?url=" + productPage + "&media=" + productImage + "&description=" + productDescription;

        $('#PinLink').attr('href', linkValue);
}); 
```

**标记：**

```
<a href="http://pinterest.com/pin/create/button/?url=http%3A%2F%2Fmyproductpage.com%3D524&amp;media=http%3A%2F%2myproductimagewhite.jpg&amp;description=MyProduct" id="PinLink" class="pin-it-button">
  <img src="//assets.pinterest.com/images/PinExt.png" title="Pin It!" alt="Pin It!" />
</a>

<input type="button" id="button" name="button" value="Show Black"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:44:31.150

```
$(function() {
    $("#button").on('click', function() {
        $('#PinLink')[0].href = $('#PinLink')[0].href.replace('myproductimagewhite' ,'MyproductimageBlack');
    });
}); 
```

如果它是动态的：

```
$(function() {
    $(document).on('click', '#button', function() {
        $('#PinLink')[0].href = $('#PinLink')[0].href.replace('myproductimagewhite' ,'MyproductimageBlack');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:44:38.090

您的代码似乎正确。但失败的原因可能有两个：

1.  `#button`如果稍后出现 dom，则需要实时事件。如果你想要这个然后使用

    ```
    $('body').on('click', '#button', function() {
      // your code
    }); 
    ```

2.  您没有将您的 jquery 代码包装在`$(function { })`或`$(document).ready(function() {..})`即准备好的功能中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:44:50.233

您的代码似乎还可以。也许按钮代码没有任何效果，因为它是在按钮实际存在于 DOM 之前运行的？尝试将其移至页面末尾，或包含在一个`$(document).ready(function() { // code here })`块中。此外，在将它们添加到 URL 之前，用于对和`encodeURIComponent`进行编码。`productPage``productImage`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T18:44:59.283

尝试`encodeURIComponent()`对 URL 进行编码。

```
$("#button").click(function ()
{
    var productPage = encodeURIComponent("http://myproductpage.com");
    var productImage = encodeURIComponent("http://MyproductimageBlack.jpg");
    var productDescription = encodeURIComponent("MyProduct");

    var linkValue = "http://pinterest.com/pin/create/button/?url=" + productPage + "&media=" + productImage + "&description=" + productDescription;

    $('#PinLink').attr('href', linkValue);
}); 
```

# xquery - 在 xQuery 中使用 CRUD

> ID：10641579
> 
> 赞同：0
> 
> 时间：2012-05-17T18:38:05.200
> 
> 标签：xquery, crud

我可以使用 XML 文件作为数据存储，使用 xQuery 进行创建、读取、更新和删除数据的操作吗？我在哪里可以读到它？xQuery 的哪些扩展提供了 CRUD 操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:48:33.777

XQuery Scripting 非常适合 CRUB 操作。这是一个例子：

```
variable $stores := doc("stores.xml")/stores;

(: Create :)
insert node <store><store-number>4</store-number><state>TX</state></store> into $stores;
(: Update :)
replace value of node $stores/store[state="TX"]/store-number with "5";
(: Delete :)
delete node $stores/store[state != "TX"];
(: Read :)
$stores 
```

[您可以在http://www.zorba-xquery.com/html/demo#J7reoq76cdLWeQR+MG9X0MuczwQ=](http://www.zorba-xquery.com/html/demo#J7reoq76cdLWeQR+MG9X0MuczwQ=)现场试用此示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T02:50:09.693

你绝对可以。有关介绍，请参阅[XRX 初学者指南](http://www.danmccreary.com/xrx/beginners-guide/beginners-guide-to-xrx.xhtml)。本指南使用免费的开源[eXist-db 本机 XML 数据库](http://exist-db.org/)提供存储和检索，以及用于访问 HTTP 请求数据的内置扩展。[Dan McCreary 的关于 XRX 和 CRUDS 的简短、插图良好的幻灯片也](http://www.danmccreary.com/training/xrx/11-XRX-CRUDS.ppt)提供了概述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:55:58.110

还有三本您可能会觉得有用的 Wikibooks：

```
http://en.wikibooks.org/wiki/XQuery
http://en.wikibooks.org/wiki/XForms
http://en.wikibooks.org/wiki/XRX 
```

我认为 XRX 可能是授权非程序员构建复杂 Web 应用程序的最简单和优雅的方式。一个好的 XRX 框架允许任何了解其数据的“路径”表达式 (XPath) 的人来构建和维护 Web 应用程序。不再需要对象-关系映射层。

# css - 如何让这个表单和按钮在响应式设计中正确调整大小？

> ID：10641582
> 
> 赞同：2
> 
> 时间：2012-05-17T18:38:17.443
> 
> 标签：css, widget, wordpress, responsive-design

我正在尝试创建一个自定义小部件，其中包括带有文本输入表单和按钮的背景图像。我使用的 wordpress 主题是基于 Twitter Bootstrap 的响应式设计。调整浏览器大小时，表单和按钮不会随背景图像一起调整大小。谁能帮我让它正常工作？[您可以在实时站点](http://noahsdad.com/)页面右侧的侧栏最底部查看小部件。

谢谢。

```
<form style="-webkit-background-size: cover;-moz-background-size: cover;
-o-background-size: cover;background-size: cover;padding: 3px;text-align: center;background: url(http://noahsdad.com/wp-content/uploads/2012/05/noahs-dad-side-bar.jpg) no-repeat center;
padding: 30% 0;" action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=noahsdad', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
    <p>
        <input type="text" style="width:170px;height:18px;margin-bottom:-110px;margin-left:-125px;" name="email" onblur="if (this.value == '') {this.value = 'Enter your email address';}" onfocus="if (this.value == 'Enter your email address') {this.value = '';}" value="Enter your email address"/>
    </p>
    <input type="hidden" value="noahsdad" name="uri"/><input type="hidden" name="loc" value="en_US"/>
    <input type="submit"  style="margin-bottom:-134px;margin-left:-220px;" value="Subscribe" /> 
```

这是我的styles.css（这是一个子主题）

```
/* ------------------------------------------------------------------------ Import Standard Styles */

@import url( '../standard3/style.css' );

/* ------------------------------------------------------------------------ Customizations */
#disqus_thread {
    clear: both!important;
    background: white;
    background: white;
    margin: 0 0 40px 0;
    position: relative;
    border-radius: 4px;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    -webkit-box-shadow: inset 0 1px 2px 0 rgba(0, 0, 0, 0.2),transparent 0 0 0,transparent 0 0 0,transparent 0 0 0,transparent 0 0 0;
    -moz-box-shadow: inset 0 1px 2px 0 rgba(0, 0, 0, 0.2),transparent 0 0 0,transparent 0 0 0,transparent 0 0 0,transparent 0 0 0;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.2),transparent 0 0 0,transparent 0 0 0,transparent 0 0 0,transparent 0 0 0;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    padding: 0 20px;
}

.dsq-comment-text p
{
color: black;
font-size: 13px;
font-weight: normal;
line-height: 18px;
}

.widget .signupForm {
    /* Box always has colour, pic always on right */
    background-color: #06d0d2;
    background-image: url(http://noahsdad.com/wp-content/uploads/2012/05/noahs-dad-side-bar.jpg);
    background-position: right bottom;
    background-repeat: no-repeat;

    /* height ensures full pic is shown  */
    height: 243px;    

    /* allow us to position contents */
    position: relative;
}

/* Absolutely position the form within the widget */
.widget .signupForm form {
 position: absolute;
 right: 160px;  
 bottom: 70px;
}

.widget .signupForm form input {
 display: block;
}

//* now just resize the widget box and move the form */

    .widget .signupForm {
        width: 300px; 
        height: 240px;
        background-size: 100%;    
    }

    .widget .signupForm form {
        right: 120px;   
        bottom: 50px;
    }
}

/* adjust slightly for larger sizes */
@media screen and (min-width: 980px) {
    .widget .signupForm {
        width: 343px; 
        height: 275px;
        background-size: 100%;    
    }

    .widget form .signupForm {
        right: 160px;   
        bottom: 70px;
    }
}​

/* ------------------------------------------------------------------------ Media Queries */

/* Smartphones */
@media (max-width: 480px) {

}

/* Tablet and Mobile */
@media (max-width: 979px) { 

}

/* Mobile to Tablet */
@media only screen and (max-width: 767px) {

}

/* Landscape Tablets */
@media (min-width: 768px) and (max-width: 979px) {

}

/* Desktop */
@media (min-width: 980px) {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:02:48.900

您正在错误地接近表单的位置。使用这样的小部件，您最好为小部件声明固定大小，然后使用绝对相对定位将表单定位在其中。然后您可以更改每个断点的框大小和表单位置。

这是一个可以做你想做的事情的小提琴，但是以一种更干净的方式。

** 更新的小提琴 ** [http://jsfiddle.net/andrewheins/9PrG2/5/](http://jsfiddle.net/andrewheins/9PrG2/5/)

顺便说一句，你儿子很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:01:25.633

在引导程序的 css 中找到`@media (min-width: 768px) and (max-width: 979px) {`或将其添加到您自己的。之后添加：如果屏幕宽度低于 979px，`form input {max-width: 10px !important;}` 它将设置输入（**所有输入！ ）的宽度为 10px；**

它可以工作，但它可能会使你的网站在某个地方崩溃，所以我建议在表单的代码中添加一些类/id，并将你现在内联的所有 CSS 移动到样式表中。它将允许不使用“！important”规则。

# c# - MVC 中的数据验证不起作用

> ID：10641583
> 
> 赞同：0
> 
> 时间：2012-05-17T18:38:17.647
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在尝试在我的 MVC 应用程序中使用不显眼的 js 执行字段验证。

```
I have the following in the ViewModel:

    [DataMember(EmitDefaultValue = false)]
    [Required(ErrorMessage="CompanyName is Required")]
    [StringLength(40, ErrorMessage = "Must be under 40 characters")]
    public string CompanyName { get; set; } 
```

网络配置：

```
<appSettings>
    <add key="Location" value="Test"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
</appSettings> 
```

看法：

```
<script src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.min.js"></script>

<div>
        <%= Html.TextBoxFor(c => c.CompanyName, new { style = "width:300px"})%>
        <%=Html.ValidationMessageFor (c=>c.CompanyName) %>
        </div> 
```

如果我将 CompanyName 留空并尝试保存页面，我不会看到任何错误。另外，我在页面源代码中看到以下内容：

```
<div>
<input id="CompanyName" maxlength="40" name="CompanyName" style="width:300px" type="text" value="" />
<span class="field-validation-valid" data-valmsg-for="CompanyName" data-valmsg-replace="true"></span> 
```

有人可以告诉我我错过了什么吗？

**编辑：** 这是控制器动作：

```
[HttpPost]
public ActionResult Save(EmailModel model)
{
    if (ModelState.IsValid)
    {
        Helper.Save(model);
        return Json(JsonEnvelope.Succes());
    }
    return View(model);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:29:25.777

这听起来很奇怪，但它对我有用，改变验证行的顺序，如下所示：

```
[DataMember(EmitDefaultValue = false)] 
[StringLength(40, ErrorMessage = "Must be under 40 characters")]
[Required(ErrorMessage="CompanyName is Required")] 
```

或像这样：

```
[Required(ErrorMessage="CompanyName is Required")]
[DataMember(EmitDefaultValue = false)] 
[StringLength(40, ErrorMessage = "Must be under 40 characters")] 
```

我不记得为什么，我认为这是一个错误尝试告诉我们；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:41:52.813

您需要在控制器中检查 ModelState.IsValid。如果状态无效（因此为假），您应该将视图模型返回到您的视图。

像这样的东西：

```
[HttpPost]
public ActionResult Save(EmailModel model)
{
    if (ModelState.IsValid)
    {
        Helper.Save(model);

        return Json(JsonEnvelope.Succes());
    }

    return View(model);
} 
```

检查您在帖子中未提及的其他一些事项：

*   确保您也包含 JQuery 库，而不仅仅是 jquery.validate。
*   确保将输入元素放置在表单中，并且表单设置为发布

# java - 方法参数扩展类实现接口

> ID：10641584
> 
> 赞同：74
> 
> 时间：2012-05-17T18:38:19.177
> 
> 标签：java

我有以下类和接口：

```
public class BasicObject{...}
public interface CodeObject{...} 
```

我想创建一个方法，其中参数需要是 BasicObject 类型并实现 CodeObject。我尝试了以下代码，但不能保证 clazz 是实现 CodeObject 的类。

```
myMethod(Class<? extends BasicObject> clazz){...} 
```

我想做这样的事情，但它不编译：

```
myMethod(Class<? extends BasicObject implements CodeObject> clazz){...} 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-05-17T18:58:12.123

您的模式类必须扩展`BasicObject`和扩展/实现`CodeObject`（实际上是一个接口）。您可以使用方法签名的通配符定义中声明的多个类来执行此操作，如下所示：

```
public <T extends BasicObject & CodeObject> void myMethod(Class<T> clazz) 
```

请注意，如果您使用以下任何一种方式，它将不起作用：

*   `public <T extends BasicObject, CodeObject> void myMethod(Class<T> clazz)`

    这是技术上有效的语法，但`CodeObject`未被使用；该方法将接受任何扩展类，`BasicObject`无论它们是否扩展/实现`CodeObject`。

*   `public void myMethod(Class<? extends BasicObject & CodeObject> clazz)`
    `public void myMethod(Class<? extends BasicObject, CodeObject> clazz)`

    根据 Java，这些只是错误的语法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T19:28:20.650

这是一种有点冗长但避免泛型头痛的方法。创建另一个进行扩展/实现的类：

```
public abstract class BasicCodeObject 
    extends BasicObject 
    implements CodeObject {...} 
```

那么你的方法可以是：

```
public <T extends BasicCodeObject> void myMethod(Class<T> clazz) {...} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-07-24T10:25:00.623

有两种方法可以解决您的问题，具体取决于您是要在扩展和实现的方法参数中传递**类类型**还是这样做的**类对象**。两者都有解决方案。`BasicObject``CodeObject`

 ****解决方案1：**

如果你想通过`Class`自己，你可以这样做，正如@bontade所解释的那样，

```
public <R extends BasicObject & CodeObject> void myMethod(Class<R> clazz) 
```

如果你想传递`class`对象，你可以写

```
public <R extends BasicObject & CodeObject> void myMethod(R clazz) 
```

以上是处理泛型的更复杂的方法。

**解决方案2：**

下面是比较简单的。您可以定义一个抽象类来扩展您要扩展的类并实现它：

```
public abstract class TargetClassType extends BasicObject implements CodeObject {

} 
```

现在如果你想通过类本身，做

```
public void myMethod(Class<TargetClassType> clazz) 
```

或者如果你想传递类对象，写

```
public void myMethod(TargetClassType clazz) 
```

上述任一解决方案都适合您的问题，但第二个更简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T18:47:26.937

如果不是所有 BasicObjects 都实现 CodeObject，那么您可以使用 instanceof / Class.isInstance() 检查您的方法（请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class .html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)）：

```
myMethod(Class<? extends BasicObject> clazz)
{
    if (!clazz.isInstance(CodeObject))
    {
        (indicate that the call was incorrect)
    }
    ...
} 
```**

# javascript - 如果用户选择留在页面上，请执行某些操作

> ID：10641585
> 
> 赞同：0
> 
> 时间：2012-05-17T18:38:25.777
> 
> 标签：javascript, browser-refresh

我正在使用[它](https://stackoverflow.com/questions/3527041/prevent-any-form-of-page-refresh-using-jquery-javascript)来确定用户是否单击了浏览器的刷新按钮。

它为用户提供了留在页面上或离开页面的选项。

如果用户选择留在页面上，我想做一些事情（调用一些方法）。那可能吗？

# sql-server - SQL Server 从平面文件匹配列导入

> ID：10641588
> 
> 赞同：0
> 
> 时间：2012-05-17T18:38:36.937
> 
> 标签：sql-server

我有一个有 12 列的平房。该表有 30 多列。通过 SQL Server 2008，如何导入数据，然后将平面文件中的字段与表中的实际字段进行匹配？我知道有一个向导可以做到这一点，但我看不出如何实际匹配这些字段。

```
 SQL Server 2008 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:44:07.940

右键单击数据库，任务->导入数据->源选择您的平面文件->目标选择您的数据库->下一个向导页面从平面文件中选择您的表作为目标（而不是默认的新表）->编辑高级属性并为平面文件列选择目标列。

然后启动和/或保存 SSIS 包。如果您的数据需要以任何方式进行转换，那么您创建一个 Visual Studio 商业智能 - 集成项目 -> 然后将您的 ssis.dtsx 包添加到项目中以修改列转换、错误处理等。实际上您可以尝试首先从向导启动 ssis 包。

# asp-classic - 如何清除所有 cookie？

> ID：10641592
> 
> 赞同：5
> 
> 时间：2012-05-17T18:38:46.423
> 
> 标签：asp-classic

我正在寻找在访问网站但未通过身份验证时清除/清除所有现有 cookie 的最佳方法。

我们不允许客户“记住我”保持登录状态。所以当他们再次访问时，使用 cookie 重新开始的最佳方式是什么？

是否将所有cookie设置为空字符串？是将cookies的日期设置为昨天吗？

任何例子将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T22:47:33.750

Daniel K 是正确的，使 cookie 过期是最好的选择，您的问题是要清除所有 cookie，您可以通过 Response 对象执行此操作：

```
For Each cookie in Response.Cookies
    Response.Cookies(cookie).Expires = DateAdd("d",-1,now())
Next 
```

将 cookie 设置为 "" 的问题 - 严格来说，cookie 仍然存在，如果您想让它们全部过期以便浏览器丢弃它们，请使用 .expires

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-21T14:20:50.447

asp.net c# 对我来说很好用

```
string[] ck = Request.Cookies.AllKeys;
foreach(string cookie in ck){
   Response.Cookies[cookie].Expires = DateTime.Now.AddDays(-1);
} 
```

# windows - 在 Windows 7 x64 系统上安装 jre-6u30-windows-i586.exe 时出现问题

> ID：10641596
> 
> 赞同：2
> 
> 时间：2012-05-17T18:39:06.007
> 
> 标签：windows, java, sccm-2007

当我尝试使用 NT Authority\System 帐户在 Windows 7 x64 系统上安装 jre-6u30-windows-i586.exe 时，我收到 1619 错误（[http://msdn.microsoft.com/en-us/library/ windows/desktop/ms681385(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681385(v=vs.85).aspx) ) 返回到启动进程。我已经使用 SCCM 和 PSEXEC -S 运行了安装，两种方式都返回相同的错误。

```
Command line used: jre-6u30-windows-i586.exe /s /v "/qn /norestart /lvx C:\temp\JRE630.log ADDLOCAL=ALL IEXPLORER=1  REBOOT=Suppress JAVAUPDATE=0 INSTALLDIR=\c:\Program Files (x86)\Java\jre6\"  SOURCEDIR=\"C:\temp\AppData\LocalLow\Sun\Java\jre1.6.0_30\"" 
```

当我启用详细日志记录时，我看到以下内容：

```
=== Verbose logging started: 5/16/2012  21:09:52  Build type: SHIP UNICODE 5.00.7601.00  Calling process: C:\Windows\SysWOW64\msiexec.exe ===
MSI (c) (D0:A4) [21:09:52:691]: Resetting cached policy values
MSI (c) (D0:A4) [21:09:52:691]: Machine policy value 'Debug' is 0
MSI (c) (D0:A4) [21:09:52:691]: ******* RunEngine:
           ******* Product: C:\Windows\system32\config\systemprofile\AppData\LocalLow\Sun\Java\jre1.6.0_30\jre1.6.0_30.msi          ******* CommandLine: **********
MSI (c) (D0:A4) [21:09:52:691]: Client-side and UI is none or basic: Running entire install on the server.
MSI (c) (D0:A4) [21:09:52:691]: Grabbed execution mutex.
MSI (c) (D0:A4) [21:09:52:706]: Cloaking enabled.
MSI (c) (D0:A4) [21:09:52:706]: Attempting to enable all disabled privileges before calling Install on Server
MSI (c) (D0:A4) [21:09:52:722]: Incrementing counter to disable shutdown. Counter after increment: 0
MSI (s) (38:04) [21:09:52:722]: Running installation inside multi-package transaction C:\Windows\system32\config\systemprofile\AppData\LocalLow\Sun\Java\jre1.6.0_30\jre1.6.0_30.msi
MSI (s) (38:04) [21:09:52:722]: Grabbed execution mutex.
MSI (s) (38:64) [21:09:52:737]: Resetting cached policy values
MSI (s) (38:64) [21:09:52:737]: Machine policy value 'Debug' is 0
MSI (s) (38:64) [21:09:52:737]: ******* RunEngine:
           ******* Product: C:\Windows\system32\config\systemprofile\AppData\LocalLow\Sun\Java\jre1.6.0_30\jre1.6.0_30.msi
           ******* Action: 
           ******* CommandLine: **********
MSI (s) (38:64) [21:09:52:737]: Note: 1: 2203 2: C:\Windows\system32\config\systemprofile\AppData\LocalLow\Sun\Java\jre1.6.0_30\jre1.6.0_30.msi 3: -2147287037 
MSI (s) (38:64) [21:09:52:737]: MainEngineThread is returning 3
MSI (s) (38:04) [21:09:52:737]: User policy value 'DisableRollback' is 0
MSI (s) (38:04) [21:09:52:737]: Machine policy value 'DisableRollback' is 0
MSI (s) (38:04) [21:09:52:737]: Incrementing counter to disable shutdown. Counter after increment: 0
MSI (s) (38:04) [21:09:52:737]: Note: 1: 1402 2: HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Installer\Rollback\Scripts 3: 2 
MSI (s) (38:04) [21:09:52:737]: Note: 1: 1402 2: HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Installer\Rollback\Scripts 3: 2 
MSI (s) (38:04) [21:09:52:737]: Note: 1: 1402 2: HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Installer\InProgress 3: 2 
MSI (s) (38:04) [21:09:52:737]: Note: 1: 1402 2: HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Installer\InProgress 3: 2 
MSI (s) (38:04) [21:09:52:737]: Decrementing counter to disable shutdown. If counter >= 0, shutdown will be denied.  Counter after decrement: -1
MSI (s) (38:04) [21:09:52:737]: Restoring environment variables
MSI (c) (D0:A4) [21:09:52:737]: Decrementing counter to disable shutdown. If counter >= 0, shutdown will be denied.  Counter after decrement: -1
MSI (c) (D0:A4) [21:09:52:737]: MainEngineThread is returning 3
=== Verbose logging stopped: 5/16/2012  21:09:52 === 
```

这看起来像是在尝试将 MSI 提取到“C:\Windows\system32\config\systemprofile\AppData\LocalLow\Sun\Java\jre1.6.0_30”，但它无法从可执行文件中提取 MSI，因此安装失败。有什么办法可以让它工作吗？

提前致谢，

基思

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:42:03.377

是的，您可以通过提前创建必要的目录，然后将 64 位配置文件的连接点添加到 32 位配置文件来实现此功能，如下所示：

```
mklink /J c:\windows\system32\config\systemprofile\AppData\LocalLow\Sun\Java\jre1.6.0_30 c:\windows\syswow64\config\systemprofile\AppData\LocalLow\Sun\Java\jre1.6.0_30 
```

更多细节可以在我的博客上[找到](http://harryjohnston.wordpress.com/2011/02/20/installing-32-bit-software-as-system-in-windows-7-x64/)。

（顺便说一句，如果您将此问题标记为“windows”，我会更快地回答它！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:03:33.203

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6995830](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6995830)

这是一个已知的问题。包解压到 syswow64 文件夹，但在 system32 文件夹中查找新创建的 msi。

显然，当他们说“i586”时，他们的意思是它只能安装在 32 位操作系统/系统上。

# .net - UnmarshalStructInfoFrom 错误，摩托罗拉 MC 2100 上的符号

> ID：10641597
> 
> 赞同：0
> 
> 时间：2012-05-17T18:39:13.077
> 
> 标签：.net, visual-studio-2008, mobile, windows-ce

我第一次涉足移动计算机应用程序。

我有一个 MC2100，刚刚下载了适用于 .Net v1.7 的 Symbol Mobility Dev Kit，显然是最新的套件。当我尝试运行代码示例（随开发工具包提供）时，只要我点击任何类型的扫描仪相关代码，我都会收到“UnmarshalStructInfoFrom”错误。有人确实在这个网站上报告了一个类似的问题，后来说更新 Symbol 和 Symbol.Barcode dll 解决了这个问题，不确定这是否意味着获得一个新版本的 dll（如果是的话，是哪个？）或者干脆删除并重新添加我所做的引用，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:41:33.300

您正在使用相当旧版本的开发工具包。最新版本是 2.6，并已更名为 EMDK。由于 MC2100 刚刚发布，早期的 EMDK 中不支持它。

[你可以在这里找到新版本](http://support.symbol.com/support/search.do?cmd=displayKC&docType=kc&externalId=13480&sliceId=&dialogID=343232338&stateId=1%200%20343200671)

# blackberry - 黑莓中的显示计时器

> ID：10641598
> 
> 赞同：0
> 
> 时间：2012-05-17T18:39:17.577
> 
> 标签：blackberry, timer

嗨，我正在尝试显示一个显示计时器的 labelField...当单击按钮时计时器应该启动，因此以下代码位于 fieldChanged 自动生成的方法中，因为我实现了 FieldChangeListener...这是代码：

```
Timer t = new Timer();
Date startTime = new Date();
LabelField courseTime = new LabelField()
t.schedule(new TimerTask(){

public void run() {
// TODO Auto-generated method stub
Date now = new Date();
SimpleDateFormat date = new SimpleDateFormat("HH:mm:ss");
courseTime.setText(date.formatLocal(now.getTime() - startTime.getTime()));
}}, 0, 10); 
```

这段代码有两个问题：当我单击按钮时，我有一个 IllegalStateException.. 不知道它来自哪里，但我已经评论了这个部分，它来自这里.. 然后，在我接受异常之后，计时器开始，但格式是 19:00:00，而不是我希望的 00:00:00……感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:57:21.190

Any operation involving the device's user interface must be done with the lock, [UiApplication.getEventLock()](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/system/Application.html#getEventLock%28%29) held.

Try following code for updating `LabelField` text.

```
synchronized (UiApplication.getEventLock()) {
    courseTime.setText("some text");
} 
```

# backbone.js - 通过 Chrome 扩展的 Backbone.js (model instanceof Model)

> ID：10641599
> 
> 赞同：0
> 
> 时间：2012-05-17T18:39:21.587
> 
> 标签：backbone.js, google-chrome-extension, coffeescript

大家好，

这是我第一次在这个网站上发帖，我要提出的问题很难说清楚，因为要达到它需要一组变量。让我快速解释一下我正在使用的框架。

我正在使用 jQuery、jQuery-ui 和 Backbone 构建 Chrome 扩展

扩展的整个 JS 套件是用 CoffeeScript 编写的，我正在使用 Rails 和资产管道来管理它。这意味着当我想部署我的扩展代码时，我会运行`rake assets:precompile`并将生成的压缩 JS 复制到我的扩展目录中。

这种方法的好处是我实际上可以通过包含库从我的 Rails 应用程序内部运行扩展 js。这与我的扩展 background.js 文件基本相同，它将 js 作为内容脚本注入。

无论如何，我最近遇到的问题是当我尝试在我的好友网站上测试我的扩展时，[whiskeynotes.com](http://www.whiskeynotes.com)。

我注意到的是，我的主干模型在将它们添加到各自的集合时被破坏了。所以像

`this.collection.add(new SomeModel)`

创建了我的模型的一些废话版本。

这段代码最终会跑到 Backbone 的 prepareModel 代码中

```
_prepareModel: function(model, options) {                                                                                                          
  options || (options = {});
  if (!(model instanceof Model)) {
    var attrs = model;
    options.collection = this;
    model = new this.model(attrs, options);
    if (!model._validate(model.attributes, options)) model = false;
  } else if (!model.collection) {
    model.collection = this;
  }
  return model;
}, 
```

现在，在我测试过扩展的大多数站点中，结果是正常的，但是在我好友的站点上`!(model instance Model)`，即使它实际上是正确类的实例，它的评估结果也为 true。结果是模型的超级混乱版本，其中模型的属性是对模型集合的引用（很奇怪吧？）。不用说，之后各种疯狂的事情都在发生。

为什么会发生这种情况超出了我的理解。但是，将此行更改`(!(model instanceof Model))`为`(!(model instanceof Backbone.Model))`似乎可以解决问题。我认为这可能与创建自己的“模型”版本的 Flot 库（jQuery 图形库）有关，但查看源代码并没有产生任何实例。我只是好奇为什么会发生这种情况。将这个小改动添加到 Backbone 源代码是否有意义？

**更新：**

我刚刚意识到“修复”实际上不起作用。我还可以补充一点，我的主干模型在包装对象中命名空间，因此声明看起来像`class SomeNamespace.SomeModel extends Backbone.Model`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:30:06.583

女士们和先生们 我相当肯定我已经解决了这个问题，这与我之前的任何假设都没有关系。对于那些对开发 chrome 扩展感兴趣的人，请继续阅读，因为这可以为您将来节省一些麻烦。

每当用户在最初初始化它的网站中导航时，我希望我的 chrome 扩展程序运行内容脚本（通过浏览器操作，也就是 url 栏旁边的小扩展程序图标）。为了达到这个效果，我使用了 chromes `chrome.webNavigation.onDOMContentLoaded.addListener(function(details)`api。

我不知道的是，这个东西实际上是在网页、推特按钮、g+、facebook 喜欢等加载的每一帧上触发的。所以基本上我的内容脚本是在这些帧中加载并导致各种破坏对象和事件。添加检查以`details.frameId === 0`解决我的问题。哇！谢谢收听！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:12:56.560

在 Chrome 扩展清单中，您还可以指定内容脚本仅在顶部框架中运行。只需在内容脚本上指定 all_frames 属性。IE，

```
{
    "name": "My extension",
    ...
    "content_scripts": [
    {
        "matches": ["http://www.google.com/*"],
        "css": ["mystyles.css"],
        "js": ["jquery.js", "myscript.js"],
        "all_frames": false
    }
    ],
 ...
} 
```

[Chrome 开发者文档参考](http://code.google.com/chrome/extensions/manifest.html)

# jquery - JQuery Tabs / Accordion 在 Chrome 中中断，但在 FF 或 IE 中没有

> ID：10641602
> 
> 赞同：1
> 
> 时间：2012-05-17T18:39:48.373
> 
> 标签：jquery, jquery-ui-accordion

我是大多数编程的新手，所以请原谅我的无知。

我在 JQuery 选项卡中使用 JQuery 手风琴。该页面在 Firefox v12 和 IE v9 上运行良好，但在 Chrome / Iron v12 中中断，特别是单击俱乐部名称以获取俱乐部的统计数据会导致选项卡垂直显示并且手风琴是一团糟。

该页面是：[http ://www.footballfanweb.com/ffwfootballstats/getclubs](http://www.footballfanweb.com/ffwfootballstats/getclubs)

如果您点击“英超联赛”，然后点击俱乐部名称，该网站会将一些统计数据发送到底部选项卡区域。

我首先使用这个加载：

```
$(document).ready(function() {

    $("#accordion").accordion({
        collapsible: true,
        active: 4
    });   

    $(function() {
        $( "#tabs" ).tabs();
    });

//  Populate the accordion with football teams for each of the divisions

    $.ajaxCall('myajaxclass.listclubs','div_id=1');
    $.ajaxCall('myajaxclass.listclubs','div_id=2');
    $.ajaxCall('myajaxclass.listclubs','div_id=3');
    $.ajaxCall('myajaxclass.listclubs','div_id=4');

}); /* end document ready */ 
```

上面的 ajax 调用用足球队名称填充面板，并将它们写入链接列表，如下所示：

```
while($row=mysql_fetch_assoc($result)){        
  $club = $row['club_name'];
  $divstring.='<li title=\"' . $club . '\"><a href=\"#\" >' . $club . '</a></li>'; 
} 
```

这将产生俱乐部列表。

我使用 ajax 调用获取统计信息，然后激活底部手风琴，以便统计信息如下所示：

```
 $("li[title]").live('click', function() {

        var selectedclub = $(this).attr('title');

        $.ajaxCall('myajxclass.getclubinfo', 'theclub=' + selectedclub );       
        $.ajaxCall('myajxclass.statssum','theclub=' + selectedclub );

        $("#accordion").accordion( 'activate' , 4);

    $(function() {
             $( "#tabs" ).tabs();
           });

    }); 
```

我已经围绕这个问题搜索了许多线程。一个建议是当我从 ajax 调用返回时调用 tabs 函数。我尝试了不同的方法，例如

```
$('#tabs').tabs('select', 0); // zero-based, i.e. 1 = tab 2

$("#accordion").accordion( 'activate' , 4);

$('#tabs').tabs('select', 0); 
```

虽然没有解决问题:(

html是这样的：

```
<div id="tabs">

   <ul>
     <li> flag image 1</li> 
     <li> flag image 2</li>
      ... 
   </ul>

   <div id="tabs-1">

      <div id="accordion">
         // data etc in here.
      </div>

   </div>

   <div id="tabs-2">
        <p> Italy ... Coming soon</p>
    </div>
    ....
</div> 
```

我想知道 Chrome 是否有无效 html 的问题，所以我在 w3.org 验证器中验证了该页面，并且有两个不重要且不相关的错误：

“未指定必需属性“alt””“没有属性“target””

FF firebug 中没有错误。

有没有人有什么建议 ？

感谢您的任何反馈！

托尼

# c++ - 在 QWidget 的子类上使用 setCentralWidget？

> ID：10641604
> 
> 赞同：2
> 
> 时间：2012-05-17T18:39:52.530
> 
> 标签：c++, qt, qmainwindow

不确定我是否正确地问了这个问题，因为我是 C++ 和 Qt 的新手。但是，假设我有一个 QWidget 的子类：

```
class childofqwidget : public QWidget 
```

我可以将指向子类对象的指针传递给 QMainWindow 的 setCentralWidget 成员函数吗？像这样的东西：

```
mainlayout = new childofqwidget;
setCentralWidget(mainlayout); 
```

我问的原因是因为我创建了一个 QWidget 的子类，它有一个带有文本框和一些按钮的布局。我想将它作为 QMainWindow 对象的中心小部件插入。这可能吗？如果没有，我应该这样做有更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:43:53.067

是的，这很好，这是通常的做法。

`layout`（虽然它是 a 时调用一个变量`widget`有点不寻常/令人困惑，但这只是命名。）

# iphone - 是否可以推送到另一个视图控制器，然后从该视图控制器中访问一个方法？

> ID：10641606
> 
> 赞同：0
> 
> 时间：2012-05-17T18:40:03.277
> 
> 标签：iphone, objective-c, ios, uiviewcontroller

是否可以（从 UIButton）推送到另一个视图控制器，然后从该视图控制器中访问一个方法？

我下面的代码将 RootViewController 推入堆栈。RootViewController 中有一个我想运行的方法。我可以通过以下代码以某种方式做到这一点吗？

```
RootViewController *rootViewController = [[RootViewController alloc]         
                                           initWithNibName:@"RootViewController" 
                                           bundle:nil];
[self.navigationController pushViewController:rootViewController animated:YES]; 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:44:41.357

是的，可以访问 RootViewController 标头中可见的任何方法，就像您在任何其他对象上调用任何方法一样。例如`[rootViewController someMethod]`.

如果你在 pushViewController 之后直接调用它，该方法将在视图控制器在下一次 runloop 迭代中实际动画到屏幕上之前运行。

尽管您最好在 RootViewController 的 、 或 方法中执行您想做的任何`viewDidLoad`事情`viewWillAppear:`，`viewDidAppear:`除非这是您通常不希望发生的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:42:52.813

您可以通过以下方式访问该功能：

```
[rootViewController functionName]; 
```

# .net - .Net- 定义 lambda 函数时避免闭包

> ID：10641612
> 
> 赞同：1
> 
> 时间：2012-05-17T18:40:35.133
> 
> 标签：.net, vb.net, serialization, lambda, closures

在 vb.net 中，这是可序列化的：

```
 <Serializable()>
Class FunctionHolder
    Private _F As Func(Of Double, Double)
    Sub New()
        Me._F = Function(d As Double) d * 5#
    End Sub
End Class 
```

而对于此序列化失败：

```
 <Serializable()>
Class FunctionHolder
    Private _F As Func(Of Double, Double)
    Sub New()
        Dim c = 5#
        Me._F = Function(d As Double) d * c
    End Sub
End Class 
```

大概是因为引用本地 var`c`意味着 lambda 表达式现在有一个闭包。我对此的了解是粗略的，所以如果这是错误的，请纠正我。

所以我在想，如果你想让 lambda 表达式可序列化，最好只给它们原始文字。但是我的代码使得在创建 lambda 时很难完全避免变量。有什么方法可以在 lambda 表达式中使用本地原始变量，但是为了序列化的目的，以某种方式让表达式将其“视为”简单的文字值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:49:52.443

通常 lambda 表达式被编译为与定义它们的函数相同的类中的函数。但是，如果 lambda 表达式访问周围函数的局部变量，则需要以某种方式使其可用。

编译器通过在围绕 lambda 表达式的函数类中创建嵌套类型来解决该问题。该类型包含 lambda 表达式函数和 lambda 表达式使用的任何局部变量的实例变量。

换句话说，为了调用访问周围局部变量的 lambda 表达式，您实际上创建了一个包含这些变量副本的对象。如果你想防止这种情况（这也可能防止你的序列化问题），你必须将值作为参数传递给 lambda 表达式。

**编辑：**自动生成的嵌套类型可能不可序列化，但需要序列化委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:09:19.703

对于这个大概简化的示例，使用 VB10 的多语句 lambda，您可以在`c`每次调用函数时重新计算：

```
<Serializable()>
Class FunctionHolder
    Private _F As Func(Of Double, Double)
    Sub New()
        Me._F = Function(d As Double)
                  Dim c = 5#
                  Return d * c
                End Function
    End Sub
End Class 
```

（未经测试）

# c# - pulling data from a SQL database table

> ID：10641627
> 
> 赞同：0
> 
> 时间：2012-05-17T18:41:13.600
> 
> 标签：c#, sql

I am pulling 25 random numbers between the range of 1-35 questions stored in SQL based on there ID number (1,2..20 etc) this is so a user taking the test will be given random questions from the question pool in SQL I am trying to get the SQL parameter to increment within the loop variable "a" is being used as the key to enter values into the respected arrays.

Sample code is below

```
 protected void Question_Fetch(int[] Mixed_Questions) 
    //this array is loaded with my mixed numbers between 1-35(no duplicates) the array length //is 25 
    {
        Question_String_list = new string[25];
        Question_Answers = new string[25];
        Num_Answers = new string[25];
        Types_Of_Question = new string[25];
        User_Answers = new string[25];
        isLocked = new string[25];

        using (SqlCommand Comd = new SqlCommand("SELECT Question_String, Question_Answer, Type_Of_Question, Possible_Answers FROM Question_Pool WHERE Question_ID = @Question_ID", Conn))
        {
            SqlParameter IDParam = Comd.Parameters.Add("@Question_ID", SqlDbType.Int);
            for (int a = 0; a < Mixed_Questions.Length; a++)
            {
                int Random_Number = Mixed_Questions[a];
                Comd.Parameters.AddWithValue("@Question_ID", Random_Number);
                Conn.Open();                                        
                SqlDataReader rdr = Comd.ExecuteReader();
                if (rdr.Read())
                {
                    IDParam = Mixed_Questions[a];
                    //Random_Number = Mixed_Questions[a];
                    //Comd.Parameters.AddWithValue("@Question_ID", Random_Number);
                    Question_String_list[a] = rdr.GetValue(0).ToString();
                    Question_Answers[a] = rdr.GetValue(1).ToString();
                    Types_Of_Question[a] = rdr.GetValue(2).ToString();
                    Num_Answers[a] = rdr.GetValue(3).ToString();
                    Conn.Close();
                }
            }
        }
        Answer_Controls();
        Init_Test_Details();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:02:04.487

A better way to pull 35 random questions might be to do something like this:

```
select top 35 * from Question_Pool order by (newid()) 
```

This effectively randomises the questions before taking 35 of them. This way you can do it all in a single query rather than 35 queries.

# python - 附有数字的重复单词

> ID：10641637
> 
> 赞同：1
> 
> 时间：2012-05-17T18:41:44.743
> 
> 标签：python, string

我是 python 新手，想以列表格式制作这样的东西，这样我就可以使用 csv writer。

```
["Structure1", "Structure2", ... "Structure50"] 
```

我知道我可以`"Structure "*50`用来让结构重复 50 次，但是如何将它放入列表并附加一个数字？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T18:43:54.143

使用列表理解和字符串格式：

```
["Structure%d" % i for i in xrange(1,51)] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T18:44:08.600

列表理解：

```
>>> ["Structure{0}".format(x) for x in range(1,51)]

['Structure1', 'Structure2', 'Structure3'... 'Structure50' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T19:03:11.410

为了完整起见，这里有一个功能风格的解决方案：

```
map("Structure{0}".format, xrange(1, 51)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T18:43:27.523

这个 Python 语句应该作为一个解决方案：

```
["Structure" + str(x) for x in xrange(51)] 
```

# php - 显示所有图像的 MongoDB gridFS

> ID：10641642
> 
> 赞同：1
> 
> 时间：2012-05-17T18:41:58.653
> 
> 标签：php, mongodb, gridfs

我目前正在使用两个文件，一个获取内容，第二个显示它（或也尝试）

我需要做的是遍历存储在gridFS中的图像以将它们全部显示，我可以获得要迭代的文件名，并且文件名在find的参数内，但它不起作用，我只是得到一个损坏的图像，这里是代码：

显示.php

```
 <?php
   // open connection to MongoDB server
  $conn = new Mongo;

  // access database
  $db = $conn->database;

  // get GridFS files collection
  $grid = $db->getGridFS();

  $cursor = $grid->find(); 

    foreach ($cursor as $obj) {                   // iterate through the results
        $filename = $obj->getFilename().'<br/>';
    echo "<img src='newupload.php?filename=".$filename."'>";
    echo $filename;
    }

?> 
```

这是进入gridFS的那个

```
<?php
  $filename = $_GET['filename'];
try {
  // open connection to MongoDB server
  $conn = new Mongo;

  // access database
  $db = $conn->database;

  // get GridFS files collection
  $grid = $db->getGridFS();

  // retrieve file from collection
  header('Content-type: image/png');
  $file = $grid->find(array('filename' => $filename ));

  // send headers and file data

  echo $file->getBytes();
  exit;  

  // disconnect from server
  $conn->close();
} catch (MongoConnectionException $e) {
  die('Error connecting to MongoDB server');
} catch (MongoException $e) {
  die('Error: ' . $e->getMessage());
}
?> 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:53:18.857

问题是对象的`find()`方法`MongoGridFS`返回的是游标，而不是`MongoGridFSFile`对象；游标没有`getBytes()`方法。您收到的实际输出可能是`die(...)`您的 catch 子句中的消息之一，浏览器无法将其显示为图像。

而不是`find(array('filename' => $filename))`，您可能应该使用`findOne(array('filename' => $filename))`.

注意，如果有多个文件名相同的文件，可能需要降到较低的级别，以确保找到你想要的（你想要哪个取决于你的需要；也许是第一个，也许是第一个）最新的，或者可能是基于其他一些标准）。在这种情况下，您可以手动查询 GridFS 集合（名为“fs.files”），找到您要返回的文件，并将其传递`_id`给`get()`.`MongoGridFS`

# c# - C# 字典中的 KeyNotFoundException

> ID：10641644
> 
> 赞同：0
> 
> 时间：2012-05-17T18:42:30.387
> 
> 标签：c#, .net, dictionary

我在这里有点困惑。我收到了这个异常，它告诉我这个密钥不存在。当我在监视窗口中查看字典中的所有键/值对时，有问题的键就在那里！！！我不认为我会发疯，但我可能会发疯。我在这里错过了什么吗？这是代码：

```
public static List<Quote> GetQuoteHistory(int id)
{
    List<Quote> quotes = DataAccess.GetQuoteHistory(id);
    SetAckCodeDescriptions(quotes);
    return quotes;
}

private static void SetAckCodeDescriptions(IEnumerable<Quote> quotes)
{
    Dictionary<string, string> ackData = GetAcknowlegementData();

    foreach (Quote quote in quotes)
    {
        quote.AckCodes = GetAckCodeHtml(quote.AckCodes, ackData);
    }
}

private static string GetAckCodeHtml(string ackCodes, IDictionary<string, string> ackData)
{
    string[] codes = ackCodes.Split(',');

    string html = string.Empty;
    foreach (string code in codes)
    {
        html += string.Format("<div title='#= {0} #'>#= {1} #</div>, ", ackData[code], code);
    }

    return html.TrimEnd(new []{',', ' '}); // remove extra comma and space
} 
```

**更新：**

```
public static Dictionary<string, string> GetAcknowlegementData()
{
    List<AckData> list = DataAccess.GetAcknowlegementData();
    return list.ToDictionary(o => o.AcknowledgementCode, o => o.Description);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:51:47.953

尝试遍历字典中的值/对。看看你是否真的有这个元素（眼睛会说谎）。

```
foreach (var pair in ackData)
{
    Console.WriteLine("{0},{1}", pair.Key, pair.Value);
} 
```

# c# - 拖放未按预期响应

> ID：10641645
> 
> 赞同：0
> 
> 时间：2012-05-17T18:42:35.480
> 
> 标签：c#, wpf

编辑：我简化了问题，因为即使是最基本的应用程序也在做同样的事情

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" AllowDrop="True" >
    <Canvas DragEnter="Grid_DragEnter" Drop="Grid_Drop" AllowDrop="True" Name="C1">
        <Image Height="42" HorizontalAlignment="Left" Margin="27,28,0,0" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="42" Source="/WpfApplication1;component/Images/BackgroundMan.PNG" MouseDown="image1_MouseDown" AllowDrop="False" Canvas.Left="-15" Canvas.Top="-16" />
    </Canvas>
</Window>

namespace WpfApplication1
{
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void image1_MouseDown(object sender, MouseButtonEventArgs e)
    {
        //added a breakpoint it does fire
        //C1 is the name of the canvas
        DragDrop.DoDragDrop(C1, sender, DragDropEffects.Move);
    }

    private void Grid_DragEnter(object sender, DragEventArgs e)
    {
         //added a breakPoint it never fires
        e.Effects = DragDropEffects.Move;
    }

    private void Grid_Drop(object sender, DragEventArgs e)
    {
        //added a breakPoint it never fires
        image1.Margin = new Thickness(e.GetPosition(this).X, e.GetPosition(this).Y, 0, 0);
    }

} 
```

}

DragEnter 或 Drop 事件都不会触发

**编辑：** 我添加了一个 Window_Drop 事件，这就是接受 Drop 事件的原因，Anyidea 为什么会这样，以及如何让 Canvas 接受它。我什至应该关心，我认为我可以使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:06:41.937

`Background`如果您设置画笔，事件将触发。

```
<Canvas Name="C1" AllowDrop="True"
        DragEnter="Grid_DragEnter" Drop="Grid_Drop"
        Background="Transparent"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T23:58:51.583

我并不完全清楚您想要做什么，但是如果您在图像上单击并拖动，将图像上的 AllowDrop 设置为 true 应该会导致您的 Grid_DragEnter 事件触发。

# jquery - Twitter Bootstrap 2 崩溃事件

> ID：10641646
> 
> 赞同：11
> 
> 时间：2012-05-17T18:42:45.933
> 
> 标签：jquery, css, twitter-bootstrap, dhtml, twitter-bootstrap-2

当折叠菜单出现（或用户单击折叠按钮时）有什么方法可以捕捉到？

我正在使用标准的引导 twitter 框架和类。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-01-25T17:25:54.203

在 bootstrap 3.x 中，您要查找的四个事件是：

```
show.bs.collapse
shown.bs.collapse
hide.bs.collapse
hidden.bs.collapse 
```

它们在数据目标 DOM 元素上触发，例如用于以下标记：

```
<div role="navigation" class="navbar navbar-inverse">
  <div class="container">
    <div class="navbar-header">
      <button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="#" class="navbar-brand">Title</a>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li id="item1"><a href="#item1">Menu Item 1</a></li>
      </ul>
    </div>
  </div>
</div> 
```

您可以通过以下方式收听（在 jQuery 中）：

```
$('.navbar-collapse').on('shown.bs.collapse', function() { alert('shown'); });
$('.navbar-collapse').on('hidden.bs.collapse', function() { alert('hidden'); }); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T23:50:34.710

使用“显示”事件处理程序：

```
$("#accordion").on("shown",function(event){
        collapse_element = event.target;
    }); 
```

参考： http: [//twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)查看支持的其他事件

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-18T23:57:13.697

如果您想在更改图标时使用缓动动画，您需要在显示/隐藏时执行此操作。

在这个例子中，我使用 bootstrap 2.3.2、jQuery 1.8.3 和 Font Awesome 3.2.1

HTML：

```
<div id="accordion" class="accordion">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a data-item-id="{id}" href="#something" data-parent="#accordion"
         data-toggle="collapse" class="accordion-toggle">
       <i class="icon icon-expand-alt"></i> {title}</a>
     </div>
     <div data-item-id="{id}" class="accordion-body collapse" id="something">
       <div class="accordion-inner">
         {Content}
       </div>
     </div>
  </div>
 ... {additional panels}
</div> 
```

js：

```
$('#accordion').on('show hide', function (e) {
  var oTarget = $(e.target);
  var oIcon = $('i', $('a[data-item-id="' + oTarget.attr('data-item-id') + '"]'));
  oIcon.toggleClass('icon-expand-alt icon-collapse-alt', 200);
 }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T18:53:36.540

**推特引导 2**

看起来插件正在将“in”类添加到活动折叠组中。所以也许你可以做类似的事情。

```
if( $('#collapseOne').hasClass('in') ){
..do something
} 
```

编辑：

好的，我现在没有任何测试，所以这些只是猜测。我相信您可以通过这样做轻松确定何时单击折叠链接。

```
$('.accordion-toggle').click(function(){
   console.log('clicked');
}); 
```

但是，如果您想确切地知道点击了哪一个，您可能必须将它们编入索引。

# ruby-on-rails - Rails first_or_create 中的竞争条件

> ID：10641647
> 
> 赞同：18
> 
> 时间：2012-05-17T18:42:46.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在尝试在我的一个表字段中强制执行值的唯一性。更换桌子不是一种选择。我需要使用 ActiveRecord 有条件地在表中插入一行，但我担心同步。

Rails ActiveRecord 中是否`first_or_create`防止竞争条件？

这是`first_or_create`来自 GitHub 的源代码：

```
def first_or_create(attributes = nil, options = {}, &block)
  first || create(attributes, options, &block)
end 
```

由于多个进程的同步问题，是否有可能导致数据库中出现重复条目​​？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-11-01T12:23:10.063

Rails 4[文档`find_or_create_by`](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-find_or_create_by)提供了一个可能对这种情况有用的提示：

> 请注意，*此方法不是原子*的，它首先运行 SELECT，如果没有结果，则尝试 INSERT。如果有其他线程或进程在两个调用之间存在竞争条件，那么您最终可能会得到两条相似的记录。
> 
> 这是否是一个问题取决于应用程序的逻辑，但在行具有 UNIQUE 约束的特定情况下，可能会引发异常，只需重试：
> 
> ```
> begin
>   CreditAccount.find_or_create_by(user_id: user.id)
> rescue ActiveRecord::RecordNotUnique
>   retry
> end 
> ```

类似的错误捕获可能对 Rails 3 有用。（不确定`ActiveRecord::RecordNotUnique`Rails 3 中是否抛出相同的错误，因此您的实现可能需要不同。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T18:51:22.907

是的，这是可能的。

您可以显着减少与[乐观](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Optimistic.html)或[悲观锁定](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html)发生冲突的机会。当然，乐观锁定需要向表中添加一个字段，而悲观锁定的扩展性也不好——另外，这取决于您的数据存储的能力。

我不确定您是否需要额外的保护，但它是可用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-02T11:07:30.103

我不认为 first_or_create 是原子的。从控制台我看到一个选择操作，然后创建。所以需要锁定。如果您使用悲观锁，则不需要额外的 col。使用advisory_lock。

```
SomeModel.with_advisory_lock("get_or_create_#{some_key}") do
    SomeModel.where(external_id: external_id).first_or_create
end 
```

# android - 每当发生变化时，如何阻止android重绘整个屏幕？

> ID：10641655
> 
> 赞同：7
> 
> 时间：2012-05-17T18:43:11.627
> 
> 标签：android

我有一个应用程序，它允许用户从一组预定义的控件构建复杂的屏幕布局。然后这些控件相互通信以生成最终功能。我看到的问题是，无论我做什么，似乎由一个控件的更改引起的任何重绘都会强制整个屏幕重绘（如启用“显示屏幕更改”所示）。因为我有很多自定义控件，它们背后没有太多的 XML，所以这种重绘可能会很慢。

例如，一个控件可能是由几个线性布局构建的计算器。另一个可能是从线性布局动态生成的命令网格构建。然后在加载屏幕时将这些中的每一个添加到父相对布局中。按下计算器上的一个键会强制命令网格重绘，即使它的任何视图都没有改变。

我尝试打开硬件加速并将所有视图的图层类型更改为 LAYER_TYPE_HARDWARE，但没有成功。

如何确保仅重绘屏幕的特定子部分？在这一点上，我没有做任何使自己无效的调用，但我有自己的按钮、布局和其他 UI 组件的主题版本，所以如果我需要降低到那个级别的控制，至少已经有一个框架到位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:54:32.187

this looks pretty much like this one.. [Moving Android View and preventing onDraw to be called over and over again](https://stackoverflow.com/questions/10251124/moving-android-view-and-preventing-ondraw-to-be-called-over-and-over-again) however if you just want to draw a section, try calling `invalidate(rect)` where rect is a `Rect` that you define an area that will be "redrawn", other than that afaik you can't.

# wordpress - Wordpress 博客：Firefox 中的社交媒体共享按钮周围没有环绕文本

> ID：10641656
> 
> 赞同：0
> 
> 时间：2012-05-17T18:43:14.363
> 
> 标签：wordpress, plugins, text, media, word-wrap

我正在开发一个 wordpress 博客，您可以在[http://bethematchblog.org](http://bethematchblog.org)查看。我添加了一个 pinterest 按钮插件，它似乎在除 firefox 之外的所有浏览器中都能正常工作。每个段落中的文本都不会环绕我添加的按钮。该插件称为“Pin-it”，我正在使用他们定制的 CSS 将其定位到页面中。我的代码如下：

```
 .pin-it-btn-wrapper{
     width: 60px;
     float: right;  
     padding-top: 140px;
     margin-right: -66px;
  } 
```

还有其他我应该包括的信息吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:00:43.363

我认为最简单的答案是将 pin 社交按钮放在 内部`.socialize-in-content`，或者将两者都包装在外部 div 中并放置包装器。

# haskell - 更改 Writer monad 中的写入数据

> ID：10641658
> 
> 赞同：6
> 
> 时间：2012-05-17T18:43:14.863
> 
> 标签：haskell, monads

给定一个`Writer`monad 动作，我想通过在 monad 动作内的写入数据上映射一个函数来修改它。

就像是：

```
retell :: (w -> w') -> Writer w a -> Writer w' a 
```

库中是否已经存在这样的功能？如果不是，如何定义？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T18:48:05.500

```
retell f = Writer . second f $ runWriter 
```

库还`mapWriter`提供了一个功能。所以你可以这样做：

```
retell = mapWriter . second 
```

该`second`函数位于 中`Control.Arrow`，但您可以自己定义一个不太通用的版本，如下所示：

```
second f (a, b) = (a, f b) 
```

# c# - 用剃刀检查复选框后复制值

> ID：10641660
> 
> 赞同：0
> 
> 时间：2012-05-17T18:43:16.860
> 
> 标签：c#, asp.net-mvc-3, razor

正如标题所示，我试图在单击复选框后将值从一个文本框复制到另一个文本框。我知道如何通过 javascript 做到这一点，唯一的问题是它需要在服务器端使用 razor 完成。我正在尝试使用下面的代码来完成此操作，但是它给了我臭名昭著的“对象引用未设置为对象的实例”。错误。但我不确定它指的是什么，任何帮助将不胜感激。

```
<div class="editor-field">
    @Html.CheckBoxFor(model => model.SameAddress, new { id = "chkAddress" })

    @{bool isChecked = false; 
        if (Boolean.TryParse(Request.Form.GetValues("chkAddress")[1], out isChecked) == true)
        {

        }
    }
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:47:24.570

Razor 不会在这方面为您提供帮助。有两种方法可以做到这一点。

**1）使用javascript**：监听复选框更改事件，如果选中，则读取第一个文本框的内容并将其粘贴到第二个。这是我会去的首选。

像这样的东西

```
$(function(){
    $("#chkCopy").change(function(){
        $("#address2").val("");
       if(this.checked)
       {
            $("#address2").val($("#address1").val())

            //Lets read city and paste it in the second place as well.
            $("#city2").val($("#city1").val())
       }                
    });
});​ 
```

假设您想在单击带有 id 的复选框时从带有 id`address1`的文本框复制到带有 id 的文本框`address2``chkCopy`

工作样本：http: [//jsfiddle.net/9fM89/4/](http://jsfiddle.net/9fM89/4/)

**2）使用表单**：让用户单击“复制”按钮，它会向您的操作方法提交表单，您可以在其中读取这些表单元素的值并将其设置在用于第二个复选框的那些属性上并将其返回给风景。

# ios - 如何在 iOS 上查看 PDF 文档的所有图层，特别是注释

> ID：10641664
> 
> 赞同：1
> 
> 时间：2012-05-17T18:43:21.917
> 
> 标签：ios, pdf, layer

我正在为我的公司开发一个应用程序，我们希望在其中查看在 iOS (5.0) 中对 PDF 文档所做的注释。问题是在 iOS 上查看 PDF 文档时，无论是在 UIWebView 还是 QLPreviewer 中，都不会出现注释。

我假设 iOS 没有选择 PDF 文档的图层或“子视图”。有谁知道如何让这些图层显示注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:16:01.017

使用本机 iOS API 来处理 PDF 文档确实没有一个好的方法。您将需要购买能够更好地正确阅读 PDF 文件的第三方解决方案。 [这是一个例子](http://fastpdfkit.com/)

# css - 使用 XSL-FO、CSS3 而不是 CSS2 来创建像 PDF 这样的分页文档？

> ID：10641667
> 
> 赞同：34
> 
> 时间：2012-05-17T18:43:35.347
> 
> 标签：css, xml, pdf, pagination, xsl-fo

有很多旧文本，比如[这本 2002 年的书](http://docstore.mik.ua/orelly/xml/xmlnut/ch13_05.htm)，声明我们必须使用“CSS for Web”和“XSL-FO for print”。我认为在今天（2012 年），我们终于可以将 CSS 与能够理解CSS2和[CSS3](http://www.w3.org/TR/css3-page/)[的分页媒体的](http://www.w3.org/TR/CSS2/page.html)渲染引擎一起使用……但是“新文本”、程序员的共识和软房的投资在哪里？

XSL-FO 或“XSL 格式化对象”（W3C 标准）是最常用的从 XML 或 XHTML 内容生成 PDF 文档的技术。[XSL-FO 1.1](http://www.w3.org/TR/2006/REC-xsl11-20061205/)版 于 2006 年发布，[1.0 版于 2001 年](http://www.w3.org/TR/2001/REC-xsl-20011015/)发布。

CSS2.1 是从 2011 年开始的，但 CSS2.0 是 1998 年的标准，在 2008 年修订……我认为标准年龄不是问题。**带有 HTML、XHTML 或 XML 的 CSS 具有“打印的力量”**：参见[PrinceXML](http://www.princexml.com/)、[WebKit 打印模块](http://www.webkit.org/projects/printing/index.html)（或[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)）、[ABCpdf](http://www.websupergoo.com/abcpdf-1.htm)等工具。

**在 CSS 和 XSL-FO 之间进行选择**：使用 CSS2，您可以将文本完全适合纸页等。这不是分页、多列布局、放置脚注、运行页眉或页边距的问题......两者， CSS（分页媒体）和 XSL-FO 是执行此操作的良好标准。

PS：对于这种情况，有一些相关的问题/答案，[关于 webkit 转换](https://stackoverflow.com/q/3849441/287948)，[使用 PHP 转换](https://stackoverflow.com/q/391005/287948)和关于[从 HTML 生成 PDF](https://stackoverflow.com/q/598980/287948)。没有人对这个提出的问题有好的答案。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-01-25T02:09:18.377

感谢所有评论和回答！

现在，2014 年，我的帖子已经过去了 1.5 年（2012 年 5 月 17 日），是时候巩固一下了：对我来说，没有答案是“完整的答案”，但所有答案（参见 Nenotlep 和 Alex 的）都有助于形成一个大的图片。我现在巩固的主要动机是[2013-11 年 @mzjn 的新闻（此处）](https://stackoverflow.com/a/19756449/287948)。

# XSL-FO 正式消亡

周六，2013 年 11 月 2 日，[Liam RE Quin](http://www.w3.org/People/Quin/) [写道](http://www.biglist.com/lists/lists.mulberrytech.com/xsl-list/archives/201311/msg00012.html)： *“我们已经关闭了工作组，因为没有足够的人参与”*，W3C XML 活动负责人，关于[XSL-FO 2.0](http://www.w3.org/TR/xslfo20/)连续性的失败。（[在此处查看更好的副本](http://markmail.org/thread/65j2ah2kulcp35fm#query:+page:1+mid:g3ai54wibdobqfh3+state:results)）。

工作草案的最后一次更新是在 2012 年 1 月，现在确认：**W3C 停止开发 XSL-2**。

为什么？它将被[CSS3-page](http://www.w3.org/TR/css3-page)取代，见下文。

PS：讨论“官方声明”，使用[https://stackoverflow.com/a/21345449/287948](https://stackoverflow.com/a/21345449/287948)

## CSS3 正式成长

标准[CSS3 页面](http://www.w3.org/TR/css3-page)是一个草案，但许多应用程序，如[PrinceXML v9](http://www.princexml.com/)和[AntennaHouse Formatter v6](http://www.antennahouse.com/CSSInfo/css_conformance.html) 证明它已经准备好了（！）；并且，预计 2014 年推出的[HTML5](http://dev.w3.org/html5/decision-policy/html5-2014-plan.html)将伴随着预测发布的 CSS3。

所以，我知道**对于 W3C，*CSS3-page*做了我们需要表达好的印刷品和好的 PDF**的一切。

# 其他动机

有一天，在遥远的未来…… PDF 将消亡——它很复杂，不属于 XML 家族或 W3C 投资——许多人声称 EPUB 将取代它。这是另一个很好的动机：平板电脑阅读器和 PC 浏览器将打印（HTML、XHTML 和 EPUB）以及 PDF。所以 PDF 将不是必需的......而且，对于这一天，唯一的标准需要，例如。[Webkit 打印项目](http://www.webkit.org/projects/printing/)，将是*CSS3 页面*标准。

**CSS3 是两个战略事务中的关键点：1）从 XML 或 HTML 内容生成好的 PDF；2）替换PDF。**

* * *

注意：问题链接的另一个 2014 年更新：[*wkHtmlToPDF*现在在这里](https://github.com/antialize/wkhtmltopdf)。关于“新文本”，现在我们有很多，见前。[使用 CSS3 构建书籍](http://alistapart.com/article/building-books-with-css3)。

* * *

* * *

程序员的更新答案，对于本页的问题，**为什么使用 XSL-FO 而不是 CSS2，将 HTML 转换为好的 PDF？**

如果您更进一步并为*XML-Publishing*实现一个新系统，**那么没有充分的理由使用*XSL-FO***。总结：

*   XSL-FO 今天是一种死技术，仅由小众公司使用，用于维护大型出版公司（如 Elsevier）的遗留系统...... Stackoverflow 的大多数作者/读者来自中小型公司。像[O'Reilly Media, Inc. 这样的公司已经使用 CSS3 进行印刷](http://www.toccon.com/toc2013/public/schedule/detail/26714)。

*   *CSS3将取代 CSS2，涵盖**CSS2*的所有空白（以及 @AlexS 的恐惧）。

*   *今天（2014 年），您可以通过 Google 或我的链接查看（参见 PrinceXML v9 和 AntennaHouse Formatter v6），我们有一些很好的软件可以使用CSS2*或*CSS3*呈现内容。

*   正如@bytebuster 所说，“CSS 更容易开发”（而且更容易学习！）。

*   正如我上面所说，CSS3 不是孤立的，它是“XML/HTML/SVG”家族的一部分。

*   开发“HTML+CSS 模板”（一个标准网页设计师完成一项简单任务的每小时成本）比“XSL-FO 模板”（一个罕见的专业人士完成一项复杂任务的每小时成本）要便宜得多。

*   ……

* * *

* * *

# 消息...

## 2016 年 1 月，权威的 CSS3 标准即将到来！

关于W3C标准：旧的*“css-page”*被*“css-break”*取代，*“paged media”*改为*“fragmentation”* ……现在是Candidate Recommendation，见[https://www.w3.org/ TR/css-break-3](https://www.w3.org/TR/css-break-3)

## 2020 年 4 月，Blimey，+4 年，什么都没有！...好的，需要更多测试

从问题的发布总共 8 年，从“css-break-3 Fineshed！”到 4 年 公告 ...

Chrome 是 2019 年第一个完善的，但在 W3C 的测试验证团队中出现了一些错误，并且在 2020 年又回来了......现在状态（在 23 次测试中）是：

*   Chrome 的**Blink**引擎未通过 1 次测试；
*   Firefox 的**Gecko**引擎未通过 3 次测试。

![xxx](../Images/78296a676b374a9351ba208aed8bee51.png)

[草案现在在这里](https://drafts.csswg.org/css-break-3/)，测试[在这里](https://test.csswg.org/harness/results/css-break-3_dev/grouped/)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-18T10:41:04.320

**2015 年 1 月 10 日更新**

我曾经做过 CSS to PDF (wkhtmltopdf) 和 XSL-FO to PDF，我更喜欢 CSS，但它有很多问题。IMO 最好的 CSS/HTML 到 PDF 渲染器是 wkhtmltopdf，但它存在大量问题，例如打印质量问题、分页问题、CMYK 着色、精确定位和全屏渲染。

诸如*“将盒子向右和向上移动 1.8 毫米以使其接触到纸的顶部”*和*“我们需要最后一页是 100% 宽的无边距表格”之*类的要求在 XSL-FO 中都非常可行，但在 CSS 中甚至考虑都太可怕了。在某些情况下，即使标签存在，CSS 也无法将其削减为足够好的软件来呈现它不存在。甚至 wkhtmltopdf（0.11，以后不确定）在渲染 TOC 时也使用 XSLT，并且并不真正支持`@page`.

我不能代表 PrinceXML，因为虽然它看起来很棒，但我事先知道价格标签是不可能的，所以这不是一个选择——我怀疑这对很多开发人员和公司来说都是正确的。

如果有更好的软件来进行渲染和更多的用户，我真的认为 CSS 通常会是一个更好的选择，因为它写起来更好（css 和源代码 (x)html），并且那里有大量的编辑器。这有点像旧的 Linux 与 Windows 辩论——IMO Linux 更好用，但缺乏通常需要的软件、现有专业知识和支持。

为了回应评论，源材料始终是 CSS 的问题。XML 的 CSS 是一个有点未知的领域，几乎所有地方都是 XML。很遗憾。我非常不喜欢 XML，尽管它实际上比 (X)HTML 更有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-03T18:32:15.863

未来依赖 CSS 而不是 XSL-FO 的一个可能原因是 W3C 的[XML 打印和页面布局工作组](http://www.w3.org/XML/XPPL/)不再活跃。没有足够的兴趣来维持这个工作组。该小组在 2012 年初发布了[XSL 2.0 工作草案](http://www.w3.org/TR/xslfo20/)，但现在似乎不太可能出现更新的 W3C 建议。

XSL-List 邮件列表上有一个最近的帖子，关于关闭工作组的原因以及关于 XSL-FO 与 CSS 的未来。请参阅[http://markmail.org/thread/65j2ah2kulcp35fm](http://markmail.org/thread/65j2ah2kulcp35fm)。

顺便说一句，尽管这是一个有趣的话题，但我不确定这个问题是否适合 Stack Overflow。恕我直言，这更像是一个开放式邀请来讨论某事，而不是一个关于[特定、实际、可回答问题的问题](https://stackoverflow.com/help/dont-ask)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-04T12:14:01.643

我同意@Nenotlep 发布的一些内容。但我不确定 CSS 标记对于分页文档是否还像 XSL-FO 一样广泛。但我不知道。

我还将这部分添加到他的答案中，因为我无法对答案“发表评论”。

整个问题有一些历史。

此外，XSL-FO 的丰富性及其过去 10 多年在 FO 渲染上的学习和老化曲线已经有相当长的时间来解决“更多”问题。

早在 2003 年，我就负责为财富 20 强的企业范围内的 XML 内容相关系统进行概念验证和原型设计。

当人们更改、添加和修改内容 XML 时，该系统的其中一个部分必须即时渲染 PDF、Word、X/HTML 版本的文档。

即使是 XSL-FO > PDF 和 Word-ML 在当时也有很多初期问题。

由于以下原因，这些是固有的：

*   标记和样式语言的原始和新目标和功能
*   最终渲染组件准确表示给定标记的能力和限制（即 XSL-FO 到 PDF 组件或 X/HTML 通过 Web 浏览器到屏幕）

自从我经常接触 XSL-FO/HTML/CSS 以来已经 10 年了，但是与当时的 XML/XSL 世界（Dave Pawson、Michael Kay、Wendell Piez 等）讨论上述问题很有趣。 )

XSL-FO 在 CSS 上用于分页输出的所有代表性标记很可能现在（2013 年）可能在 CSS3 中复制并正确呈现。

我希望这有帮助。

**2017年编辑：**

显然，CSS 在某些方面仍在追赶，我记得大部分时间都在 2003 年——那是 14 年，在网络技术领域，这太慢了 :)。

[https://twitter.com/t_machine_org/status/917025348646199297](https://twitter.com/t_machine_org/status/917025348646199297)

[![在此处输入图像描述](../Images/a1a20802a08b78b522d1fdb32f17e6b9.png)](https://i.stack.imgur.com/it8GS.png)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-13T08:53:44.530

据我所知，您无法使用 CSS 生成 SVG 图表或 SVG 条形码。

# objective-c - 如何确定在 iOS 中点击了哪个视图？

> ID：10641669
> 
> 赞同：0
> 
> 时间：2012-05-17T18:43:51.813
> 
> 标签：objective-c, ios, xcode

在我的手势识别器处理程序中，我需要知道识别器附加到/响应屏幕上的哪个项目。例如，如果用户点击图像，我的处理程序如何找出被点击的图像？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T19:43:53.480

在创建手势识别器时，您总是将它与视图联系起来。当检测到手势并调用与创建的手势相关的选择器时，您可以使用gesture.View 找出与手势关联的视图。

这是示例代码

```
UIImageView *imageView = self.someImageView;
UITapGestureRecognizer *singleTapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageSingleTapped:)];
[imageView addGestureRecognizer:singleTapGesture];

[singleTapGesture release]; 

- (void) imageSingleTapped:(UIGestureRecognizer*)recognizer
{
     UIView *viewTiedWithRecognizer = recognizer.view; // This is the view associated with gesture recognizer.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:53:01.790

我也有问题。我不知道我是否有正确的解决方案，但这就是我所做的。

```
CGPoint point = [gestureRecognizer locationInView:self];
CGPoint offset = self.scrollView.contentOffset;
CGPoint contentPoint = CGPointMake(point.x + offset.x, point.y + offset.y);

for (UIView *view in self.scrollView.subviews)
    if (CGRectContainsPoint(view.frame, contentPoint))
        return view;

return nil; 
```

也称为蛮力。

* * *

现在我看它，我看到了一个错误。如果用户直接触摸滚动条，滚动条可能是返回的视图。我从来没有发生过这种情况（至少据我所知），但我仍然应该对此进行测试并编写解决方案。

# list - 如何从序言中的列表中删除重复的元素？

> ID：10641675
> 
> 赞同：0
> 
> 时间：2012-05-17T18:44:00.200
> 
> 标签：list, prolog

我在序言中遇到了一些问题......我需要再次创建一个接收三个列表的函数： elementsToRemove fullList nonRepeatedElements 该函数应该如下所示：

```
removeRepeatedElements(elementsToRemove, fullList, nonRepeatedElements) 
```

其中 nonRepeatedElements 是一个列表，其中没有 elementsToRemve 和 fullList 中的任何元素。任何人都可以请帮助！这里有点绝望。啊啊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:23:37.243

SWI-Prolog 有[减法](http://www.swi-prolog.org/pldoc/doc_for?object=subtract/3)（+Set、+Delete、-Result）。

它是这样实现的：

```
%%  subtract(+Set, +Delete, -Result) is det.
%
%   Delete all elements from `Set' that   occur  in `Delete' (a set)
%   and unify the  result  with  `Result'.   Deletion  is  based  on
%   unification using memberchk/2\. The complexity is |Delete|*|Set|.
%
%   @see ord_subtract/3.

subtract([], _, []) :- !.
subtract([E|T], D, R) :-
    memberchk(E, D), !,
    subtract(T, D, R).
subtract([H|T], D, [H|R]) :-
    subtract(T, D, R). 
```

您可以在任何其他 Prolog 中使用该实现......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:27:02.567

好的，根据你的描述，这就是答案：

```
% base case
sto([],L,[]).

% item isn't found in the other list
sto([H|T],L,[H|T2]):-
\+member(H,L),sto(T,L,T2).

% item is present in the other list
sto([H|T],L,N):-
member(H,L),sto(T,L,N).

member(X,[X|_]).
member(X,[_|T]):-
member(X,T). 
```

所以，`sto`是主函数，`member`函数检查元素是否存在于给定列表中

# c# - ListView 在运行时不更新

> ID：10641679
> 
> 赞同：1
> 
> 时间：2012-05-17T18:44:11.760
> 
> 标签：c#, wpf, xaml, listview

我整天都在尝试这个，但没有任何运气。我能够显示 UserControl，但我无法弄清楚为什么即使我在 XAML 中设置了列也不会显示。另外，我不确定数据是否显示，因为表单打开为空白。

这是我从另一个程序调用的类库的一部分。但是，它总是显示一个空白表单，并且没有任何更新。

下面是我的用户控件代码。

```
public partial class DisplayData : UserControl
{
    ObservableCollection<Data> _DataCollection = new ObservableCollection<Data>();

    public DisplayData()
    {
        InitializeComponent();

        Window window = new Window();
        window.Content = new UserControl();
        window.Show();
    }

    public void AddDataToList(int ID, string Name)
    {
        _DataCollection.Add(new Data
        {
            StudentID = ID,
            StudentName = Name
        });
    }

    public ObservableCollection<Data> DataCollection { get { return _DataCollection; } }
}

public struct Data
{
    public int StudentID { get; set; }
    public string StudentName { get; set; }
} 
```

下面是我如何称呼它：

```
class Program
{
    [STAThread]
    static void Main(string[] args)
    {
        DisplayData displayData = new DisplayData();
        displayData.AddDataToList(2, "John");
        System.Threading.Thread.Sleep(5000);
    }
} 
```

和 xaml：

```
<UserControl x:Class="ConsoleApplication1.DisplayData"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="100" d:DesignWidth="210">
    <StackPanel>
        <ListView ItemsSource="{Binding DataCollection}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="100" Header="ID" DisplayMemberBinding="{Binding StudentID}"  />
                    <GridViewColumn Width="100" Header="Name" DisplayMemberBinding="{Binding StudentName}" />
                </GridView>
            </ListView.View>
        </ListView>
    </StackPanel>
</UserControl> 
```

编辑我还想补充一点：

1.  它不会显示正确的尺寸
2.  我什至看不到表格上的列标题
3.  也没有数据更新。

另外，不确定这是否有帮助，但我已将其作为 WPF UserControl 添加到我现有的项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:23:45.877

如果没有看到您的所有代码，我无法判断这是否是问题（或唯一问题），但您需要绑定`DataContext`属性。您的列表视图知道列绑定到某些属性，但他们不知道这些属性来自哪里（类）。

您还需要查看 INotifyPropertyChanged （可能不是这个项目，但一般来说）。这有点解释，所以你可以看看它做了什么，但它是 WPF 绑定的重要组成部分。

[http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)

你最好的办法是找到一个关于绑定和如何设置你的列表视图的好教程。如果没有一些背景知识，很难真正弄清楚。无论如何，这是给我的。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:49:54.193

我不是 XAML 专业人士，但在文档中他们有不同的绑定文本：http: [//msdn.microsoft.com/en-us/library/ms750972.aspx](http://msdn.microsoft.com/en-us/library/ms750972.aspx)

尝试

```
DisplayMemberBinding="{Binding Path=StudentID}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:09:42.067

正如其他几张海报指出的那样，您需要设置 DataContext （如千兆字节的答案）：

```
<UserControl x:Class="ConsoleApplication1.DisplayData"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         DataContext="{Binding RelativeSource={RelativeSource Self}}" 
         mc:Ignorable="d" 
         d:DesignHeight="100" d:DesignWidth="210"> 
```

另一个问题是您没有尝试显示控件。下面的代码创建一个窗口对象并将您创建的控件作为内容放置。之后，您只需调用 Show() 或 ShowDialog() 即可获得您的工作结果。

```
[STAThread]
static void Main(string[] args)
{
        DisplayData displayData = new DisplayData();
        displayData.AddDataToList(2, "John");

        Window window = new Window();
        window.Content = displayData;

        window.ShowDialog();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T19:04:52.013

你试过改变

```
public struct Data 
```

进入

```
public class Data 
```

我今天整天都在研究 ListView，如果我能说一件事，那就是它很挑剔。它可能只是不想接受结构。

编辑：这是我的工作 ListView

```
<ListView Grid.Column="2" HorizontalAlignment="Stretch" Margin="0" Name="listTableItem" VerticalAlignment="Stretch">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Name"
                DisplayMemberBinding="{Binding Name}"
                Width="75"
            />
            <GridViewColumn Header="Value"
                DisplayMemberBinding="{Binding Value}"
                Width="500"
            />
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T19:30:47.273

我认为您需要将 DataContext 绑定到代码隐藏。见下文。

```
<UserControl x:Class="ConsoleApplication1.DisplayData"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         DataContext="{Binding RelativeSource={RelativeSource Self}}" 
         mc:Ignorable="d" 
         d:DesignHeight="100" d:DesignWidth="210"> 
```

# objective-c - 何时调用 dealloc 以及它是如何工作的？

> ID：10641680
> 
> 赞同：-2
> 
> 时间：2012-05-17T18:44:15.980
> 
> 标签：objective-c, cocoa

> **可能重复：**
> [何时调用 dealloc 方法？](https://stackoverflow.com/questions/5630660/when-is-the-dealloc-method-called)

`dealloc`什么时候调用该方法？是自动调用还是不调用？

如果我写

```
UIButton *Btn = [UIButton alloc];
[Btn release]; 
```

那么`dealloc`现在被调用是因为引用计数为零？

如果没有，那么它何时以及如何工作？是什么`super`？

当它被调用时，我释放的所有内容都`dealloc`被释放了吗？例如，假设`dealloc`被调用，我们realese `btn1`and `btn2`，但是`btn2`的引用计数仍然是两个。当`dealloc`被调用时，它`btn2`也被释放并且它的引用计数为 1，还是变为零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:48:54.180

*   `dealloc`将自动发送到没有更多所有者的对象（即保留它的每个对象，`release`d it）
*   `[super dealloc]`调用超类（当前对象的父类）的 dealloc 方法。由于 Cocoa 框架中的几乎每个类都至少从 子类化`NSObject`，因此这一行对于适当的内存释放是必要的。

# excel - 在 Excel 中使用 VBA 更改 ActiveX 命令按钮的名称

> ID：10641683
> 
> 赞同：4
> 
> 时间：2012-05-17T18:44:17.483
> 
> 标签：excel, vba, command

[参考](https://stackoverflow.com/questions/10638620/reference-to-command-buttons-added-during-runtime-with-vba-in-excel)

我正在尝试使用以下代码使用 VBA 更改 ActiveX 命令按钮的名称属性：

```
Set shp = ActiveSheet.Shapes(Selection.Name)

With shp.OLEFormat.Object
    .Object.Caption = "Node" & Str(NumNodes)
    .Name = "Node" & Str(NumNodes)
End With 
```

我可以更改标题名称，但无法使用上述代码更改名称属性。我需要找到一种方法将字符串与 name 属性的 int (NumNodes) 连接起来。

**更新**

这是复制命令按钮并将其粘贴到特定单元格位置的完整子程序。创建按钮时也会更改名称和标题等属性。

```
Public Sub Node_Button_Duplication()
'
'Comments: Copies and pastes Node 1's button to the appropriate column

Dim shp As Shape

' Copy Node 1 button and paste in appropriate location

    ActiveSheet.Shapes("CommandButton1").Select
    Selection.Copy
    Cells(5, 10 + 7 * (NumNodes - 1) - 1).Select
    ActiveSheet.Paste
    Selection.ShapeRange.IncrementLeft 47.25
    Selection.ShapeRange.IncrementTop -13.5

    Set shp = ActiveSheet.Shapes(Selection.Name)

    With shp.OLEFormat.Object
        .Object.Caption = "Node" & Str(NumNodes)
        .Name = "Node" & Str(NumNodes)
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T19:04:57.077

这是你正在尝试的吗？

```
Set shp = ActiveSheet.Shapes(Selection.Name)
shp.Name = "Node" & Str(NumNodes)

With shp.OLEFormat.Object
    .Object.Caption = "Node" & Str(NumNodes)
End With 
```

**跟进**

刚试过这个，它工作......

```
Public Sub Node_Button_Duication()
    Dim shp As Shape
    Dim NumNodes As Long

    ActiveSheet.Shapes("CommandButton1").Select
    Selection.Copy
    Cells(5, 10 + 7 * (NumNodes - 1) - 1).Select
    ActiveSheet.Paste
    Selection.ShapeRange.IncrementLeft 47.25
    Selection.ShapeRange.IncrementTop -13.5

    NumNodes = 5

    Set shp = ActiveSheet.Shapes(Selection.Name)
    shp.Name = "Node" & Str(NumNodes)

    With shp.OLEFormat.Object
        .Object.Caption = "Node" & Str(NumNodes)
    End With
End Sub 
```

**更多跟进**

试试这个

```
 Set shp = ActiveSheet.Shapes(Selection.Name)

    With shp.OLEFormat.Object
        .Object.Caption = "Node" & Str(NumNodes)
        .Name = "Node" & NumNodes
    End With 
```

注意，我改成`Str(NumNodes)`了`NumNodes`?

ActiveX 控件名称不能有空格:)

现在试试。

**快照**

![在此处输入图像描述](../Images/88cc7fe0ca44f708ed7b45f53bfd8864.png)

# php - 如何下载包含所有依赖项的 HTML 页面？

> ID：10641684
> 
> 赞同：1
> 
> 时间：2012-05-17T18:44:18.323
> 
> 标签：php, javascript, web, download, copy

我正在做这个项目，我基本上需要能够在任何页面上放置一个 html 按钮（可以受登录保护），一旦用户点击该按钮，页面 html 和依赖项（css、js、图像等）应该发送到远程服务器。

最初，我通过使用 iframe 和隐藏表单并在用户单击按钮时将页面的 url 发布到远程服务器来使其工作。然后我在 exec 中使用 wget 来获取页面和依赖项。但是，这显然不适用于受保护的页面。

所以我的下一个方法是通过表单将页面的 innerHTML 发送到远程服务器上的 php 脚本。然后我尝试使用 simplehtmldom 运行 , 和 tags ，将相对 url 转换为绝对 url ，将它们存储在数组中，并将 url 替换为同一目录中的路径。然后我在所有数组上应用了 wget 并下载了这些依赖项。

但是，我再次陷入困境，因为 CSS 中有背景图像，而 javascript 中有嵌入的 html 代码。

有人可以提出更好的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:59:39.637

I'm not sure that this is ever going to work. The fact is that unless your site is very simple indeed (i.e. has very few dynamic parts) and exists on the click->load->static paradigm which really isnt the way any modern site works anymore, you're always going to have some missing pieces/dependencies.

If it's a super simple site you can perhaps just send the html and then add in a `<base>` href to the head of the duplicate?

As you know, these days sites are more like applications and your really need the whole site inclusive of all 'moving parts'

other things which might be worth looking at:

1.  Using ftp functions of PHP/.NET/Java/Ruby etc to fire template/css/img directories to a new location.
2.  perhaps looking at the HTML 2 PDF/Canvas tools which are out there and can show a visual representation of the current state of the site to another location.

# asp.net-mvc - 自定义 EditorTemplate 的模型绑定

> ID：10641685
> 
> 赞同：0
> 
> 时间：2012-05-17T18:44:20.507
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding, mvc-editor-templates

我正在尝试提供一个单选按钮列表来从 MVC 3 模型中的一小组字符串中选择一个选项。我正在研究的是调查中问题的编辑器模板。

到目前为止，我遵循了[Brad Christie 的建议](https://stackoverflow.com/a/9493584/37436)，这使我能够正确渲染视图。以下是相关代码：

**模型 - Question.cs**

*（注意，这实际上是一个模型优先的 EF 实体，但我认为这并不重要）*

```
public class Question {
    // snip unimportant properties
    public string QuestionType { get; set; }
} 
```

**查看 - Question.cshtml**

```
// snip unimportant view code

<div class="control-group">
    @Html.LabelFor(model => model.QuestionType, "Question Type")
    <div class="controls">
        @Html.EditorFor(model => model.QuestionType, "QuestionType")
        @Html.ValidationMessageFor(model => model.QuestionType)
    </div>
</div> 
```

**查看 - QuestionType.cshtml**

```
@model System.String

@{
    var questionTypes = new String[] { "PickOne", "PickMany", "OpenEnded" };
    var typesMap = new Dictionary<String, String> {
        { "PickOne", "Pick a single answer" },
        { "PickMany", "Pick several answers" },
        { "OpenEnded", "Open-ended answer" }
    };
}

@foreach (var questionType in questionTypes) {
    <label class="radio">
        @Html.RadioButtonFor(model => model, questionType)
        @typesMap[questionType]
    </label>
} 
```

尽管该视图创建了正确的 HTML，但当我为调查加载编辑器视图时，在页面加载时未预先选择与其问题类型对应的单选按钮。我假设这与模型绑定有关？

如何根据数据库中存在的选项预先选择正确的单选按钮？如果它很重要，我将使用模型优先实体框架 4 作为我的持久层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T00:29:11.677

Based on [RadioButtonFor not selecting value in editor templates](https://stackoverflow.com/questions/8357468/radiobuttonfor-not-selecting-value-in-editor-templates)

Your model binding is fine, the issue is just that

```
@Html.RadioButtonFor(model => model, questionType) 
```

corresponds to an empty name, and `RadioButtonFor` never checks radio buttons with empty names.

You should be able to do

```
@Html.RadioButton("", questionType, questionType == Model) 
```

# java - dbunit 测试失败并出现 NoSuchTableException，但表存在

> ID：10641687
> 
> 赞同：1
> 
> 时间：2012-05-17T18:44:28.043
> 
> 标签：java, junit, junit4, dbunit

# 错误

```
java org.junit.runner.JUnitCore TestCase
JUnit version 4.10
.E..
Time: 0.28
There was 1 failure:
1) testDbNoChanges(TestCase)
org.dbunit.dataset.NoSuchTableException: Did not find table 'EVENTS' in schema 'null' 
```

# 问题

这个错误是什么意思？我究竟做错了什么？为什么架构为空？

第二个测试，实际测试一个表，通过了。这个测试应该只是测试数据库，但失败了。这些表都存在于之前和之后。

```
mysql> show tables;
+---------------+
| Tables_in_cal |
+---------------+
| events        |
| guests        |
| test          |
+---------------+
3 rows in set (0.00 sec) 
```

# 资源

我相信这是有用的片段，但一切都在[https://bitbucket.org/djeikyb/simple_dbunit](https://bitbucket.org/djeikyb/simple_dbunit)

```
 36 public class TestCase
 37 {
 38 
 39   private IDatabaseTester database_tester;
 40 
 41 
 42   public IDataSet getDataSet() throws FileNotFoundException, DataSetException
 43   {
 44     return new FlatXmlDataSetBuilder().build(
 45         /*
 46         new FileInputStream("src/simple_dbunit/expected_dataset.xml"));
 47         new FileInputStream("dataset.xml"));
 48          */
 49         new FileInputStream("dataset.xml"));
 50   }
 51 
 52 
 53   @Before
 54   public void setUp() throws Exception
 55   {
 56     database_tester = new JdbcDatabaseTester("com.mysql.jdbc.Driver",
 57                                             "jdbc:mysql://localhost/cal",
 58                                             "cal",
 59                                             "cal");
 60     database_tester.setDataSet(getDataSet());
 61     database_tester.onSetup();
 62   }
 63 
 64   @Test
 65   public void testDbNoChanges() throws Exception
 66   {
 67     // expected
 68     IDataSet expected_data_set = getDataSet();
 69 
 70     // actual
 71     IDatabaseConnection connection = database_tester.getConnection();
 72     IDataSet actual_data_set = connection.createDataSet();
 73 
 74     // test
 75     Assertion.assertEquals(expected_data_set, actual_data_set);
 76   }
 77 
 78   @Test
 79   public void testTableNoChanges() throws Exception
 80   {
 81     // expected
 82     ITable expected_table = getDataSet().getTable("test");
 83 
 84     // actual
 85     IDatabaseConnection connection = database_tester.getConnection();
 86     IDataSet actual_data_set = connection.createDataSet();
 87     ITable actual_table = actual_data_set.getTable("test");
 88 
 89     // test
 90     Assertion.assertEquals(expected_table, actual_table);
 91   }
 92 
 93   @Test
 94   public void testTableNoChanges1() throws Exception
 95   {
 96     // expected
 97     ITable expected_table = getDataSet().getTable("test");
 98 
 99     // actual
100     IDatabaseConnection connection = database_tester.getConnection();
101     IDataSet actual_data_set = connection.createDataSet();
102     ITable actual_table = actual_data_set.getTable("test");
103 
104     // test
105     Assertion.assertEquals(expected_table, actual_table);
106   }
107 
108 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:03:09.053

[有关类似问题，请参见此处](https://stackoverflow.com/questions/5066201/org-dbunit-dataset-nosuchtableexception-did-not-find-table-xxx-in-schema-nul)

我很确定您还需要设置区分大小写的选项。您的数据库后端可能不喜欢大写表名请求！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:16:22.293

我目前没有MySql环境，所以无法确认。但我想我知道问题出在哪里。

当使用 DBUnit 处理不同的数据库时，有时您需要设置数据库指定的配置。这是 MySql 的示例：

```
IDatabaseConnection dbConn = getConnection();
dbConn.getConfig().setProperty(DatabaseConfig.PROPERTY_DATATYPE_FACTORY,
    new MySqlDataTypeFactory());
dbConn.getConfig().setProperty(DatabaseConfig.PROPERTY_METADATA_HANDLER, 
    new MySqlMetadataHandler()); 
```

MySql 中的目录/模式与其他数据库有些不同，所以如果你不使用`MySqlMetadataHandler`，你永远找不到正确的表。

如果你想`JdbcDatabaseTester`与 MySql 合作，你可以扩展它并覆盖这样的`getConnection()`方法：

```
public class MySqlDatabaseTester extends JdbcDatabaseTester {

  ...   

  @Override
  public IDatabaseConnection getConnection() throws Exception {
    IDatabaseConnection dbConn = super.getConnection();
    dbConn.getConfig().setProperty(DatabaseConfig.PROPERTY_DATATYPE_FACTORY,
        new MySqlDataTypeFactory());
    dbConn.getConfig().setProperty(DatabaseConfig.PROPERTY_METADATA_HANDLER, 
        new MySqlMetadataHandler());
    return dbConn;
  }
} 
```

或者只是`MySqlConnection`在`IDatabaseConnection`您的测试用例中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-07T14:59:26.440

在 datasets 文件夹中添加 dbunit.yml 文件。并设置下一个属性：

```
caseInsensitiveStrategy: !!com.github.database.rider.core.api.configuration.Orthography 'LOWERCASE'
properties:
  caseSensitiveTableNames: false 
```

它会禁用区分大小写的选项。

# c# - 如何删除 SendKeys.SendWait 上的延迟？

> ID：10641691
> 
> 赞同：1
> 
> 时间：2012-05-17T18:44:36.453
> 
> 标签：c#, wpf

你好，我想用我的应用程序按下一个按钮。所以我使用 SendKeys 类

```
SendKeys.SendWait("{RIGHT}"); 
```

问题是我需要在此行代码之后等待 3-4 秒才能得到系统的反应。如何加快速度或如何删除此延迟？

//更新1我也试过

```
SendKeys.SendWait("{RIGHT}");
SendKeys.Flush(); 
```

但是 id 没有帮助

//更新2

我希望在后台运行的应用程序在用户的实际活动状态下以编程方式按下按钮。因此，如果他在 excel 中，我希望右箭头移动活动单元格，如果他在游戏中，我想右转等。SendWait 做了我想要的事情，但有一些我不想要的延迟。

第二个重要的事情是这不是病毒或蠕虫或类似的东西。首先，正如您所看到的，我对此太愚蠢了，其次，我正在玩我的 KInect，所以这是一种 beetwen 用户和计算机的交互。这就是它在后台工作的原因，这就是为什么我需要将它发送到用户的活动应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:06:05.770

SendKeys 是 Windows 窗体应用程序的一个不错的小功能。根据您的标签，您似乎正在使用 Windows Presentation Foundation，它不支持`SendKeys.Send()`

[https://stackoverflow.com/a/1646568/340574](https://stackoverflow.com/a/1646568/340574)

查看上面的链接以使用 KeyEventArgs。我读过您还可以通过 Visual Studio 添加对 System.Windows.Forms.dll 的引用以使用 SendKeys，但我自己没有尝试过。

# python - 让 C++ stl 容器的 GDB 漂亮打印以在 Eclipse 上工作

> ID：10641706
> 
> 赞同：3
> 
> 时间：2012-05-17T18:45:18.277
> 
> 标签：python, gdb

当我输入“显示版本”时，gdb 显示以下内容：

```
GNU gdb (GDB) Red Hat Enterprise Linux (7.0.1-23.el5_5.2) 
```

我按照这个网站上的说明使用 Eclipse 设置漂亮的打印：

[http://wiki.eclipse.org/CDT/User/FAQ#How_can_I_inspect_the_contents_of_STL_containers.3F](http://wiki.eclipse.org/CDT/User/FAQ#How_can_I_inspect_the_contents_of_STL_containers.3F)

当我尝试使用新的 .gdbinit 文件启动 gdb 时，出现以下错误：

```
Error in sourced command file:
Python scripting is not supported in this copy of GDB 
```

因此，我四处研究了一种启用此功能的方法。我有超过 7.0 版，所以它应该能够支持 Python 脚本。GDB 的网站提到使用 --with-python 选项调用 GDB 配置脚本。但是，我在系统中的任何地方都看不到配置脚本。有多个开发人员使用这台机器，所以我不想重新安装 GDB 或类似的东西。有没有办法配置现有的 GDB 安装以启用 python 脚本？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:15:11.437

为了让你开始，你可以在一个单独的目录中编译 GDB，然后从那里运行它。

获取您想要的版本的来源：http: [//sources.redhat.com/gdb/](http://sources.redhat.com/gdb/)

`./configure`使用`--with-python`, 然后运行`make`，但不要将其安装在系统副本上。

此时，您应该能够调用 gdb 构建它的位置`./builddir/gdb`，而不是路径中的那个。（如果你想从那里调用它，你应该将 Eclipse 调试指向这里）

# perl - 发现语法错误 Bareword 使用包含正斜杠的变量从 Ubuntu Shell 运行 Perl

> ID：10641712
> 
> 赞同：0
> 
> 时间：2012-05-17T18:45:51.883
> 
> 标签：perl, bash, ubuntu

我正在使用 Ubuntu Natty。

我正在尝试使用命令行 perl 编辑文本文件。下面是我的代码片段：

```
path_to_php_exec="/usr/local/php/bin/php"
path_to_php_prog="/root/run/php_gearman_worker.php"
perl -0777 -i -pe "s/(command[ ]*=[ ]*)[^\n]+/\${1}=$path_to_php_exec $path_to_php_prog\n/g" /etc/supervisord_program_gearman.conf 
```

但是，当我运行它时，我收到以下错误

```
Bareword found where operator expected at -e line 1, near "s/(command[ ]*=[ ]*)[^\n]+/${1}=/usr"
Backslash found where operator expected at -e line 1, near "php\"
syntax error at -e line 1, near "s/(command[ ]*=[ ]*)[^\n]+/${1}=/usr"
Execution of -e aborted due to compilation errors. 
```

我觉得这与我的 shell 变量中的正斜杠有关，但我不太确定。仍然是命令行脚本的新手。

我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:22:51.207

是的，就是这样。您可以为 Perl 的`s///`命令选择不同的分隔符。此外，您的正则表达式是面向行的，那么为什么不逐行解析文件呢？

```
perl -i -pe \
    "$(printf 's{(command\s*=\s*).*}{$1 %s %s}g' "$path_to_php_exec" "$path_to_php_prog")" \
    /etc/supervisord_program_gearman.conf 
```

我假设您不想将输出文件中的等号加倍，因此我将其从替换块中删除。

# mysql - 替换mysql中的相关表，将数据存储到redis中

> ID：10641717
> 
> 赞同：0
> 
> 时间：2012-05-17T18:46:15.873
> 
> 标签：mysql, redis

我有一个竞赛表，每个竞赛都有承包商和客户（它们存储在另一个表中）。

要求展示与其承包商和客户的所有比赛。在 mysql 中，它是通过 join-s 完成的，这使查询变得复杂（在实际项目中，这些 join-s I 5-6）。查询执行时间长，尤其是记录很多的时候。

你是否认为，如果你做一个简单的比赛表，不连接数据库mysql中的表，而承包商和客户搬到Redis中，大大提高了数据样本的性能，同时考虑到以下事实使用 PHP 将数据组装和传输到模板中？谢谢！

编辑：这是一个示例查询（dql，我使用版本 2 的学说）：

```
SELECT t, o, p, c, w, m, f, parent, cparent, com, party FROM PortalTenderBundle:Tender t
                         LEFT JOIN t.organization o
                         LEFT JOIN o.parent parent
                         LEFT JOIN t.provision p
                         LEFT JOIN t.contractors c
                         LEFT JOIN c.parent cparent
                         LEFT JOIN t.contractors cf
                         LEFT JOIN t.winner w
                         LEFT JOIN t.manager m
                         LEFT JOIN t.files f
                         LEFT JOIN t.comments com
                         LEFT JOIN t.party party
                         LEFT JOIN t.party party_f
                         WHERE ((t.opening_at IS NULL) OR (t.opening_at IS NOT NULL AND t.opening_at <= CURRENT_TIMESTAMP())) 
```

# c++ - 复制数组和冒泡排序 C++

> ID：10641718
> 
> 赞同：0
> 
> 时间：2012-05-17T18:46:27.637
> 
> 标签：c++, arrays, sorting, bubble-sort

好的，除了排序的数据有时输出整数而不是十进制数之外，一切正常。这似乎是一个容易修复的错误，但我找不到它！

```
#include <iostream>

using namespace std;

void input (double x[], int length);
void copy (double source[], double dest[], int length);
void sort (double x[], int length);
void display (double x[], int length);
int main()
{
    double data[20];
    double sdata[20];
    int itemcount;

    cout << "Enter data item count <1-20>" << endl;
    cin >> itemcount;
    if ((itemcount < 1) || (itemcount > 20))
    {
        cout << "Class size is NOT within required range. The required range is 1 to 20." << endl;
        cout << "Bye." << endl;
        return (0);
    }
    input (data, itemcount);
    cout << "Original Data:" << endl;
    copy (data, sdata, itemcount);
    display (sdata, itemcount);
    sort (sdata, itemcount);
    cout << "Sorted Data" << endl;
    display (sdata, itemcount);

}

void input (double x[], int length)
{
    int i;
    for (i=0; i < length; i++)
    {
        cout << "Enter score" << endl;
        cin >> x[i];
    }
}

void copy (double source[], double dest[], int length)
{
    int i;
    for (i=0; i < length; i++)
    {
        dest[i] = source[i];
    }
}

void sort (double x[], int length)
{
    int i, temp;
    bool swapdone = true;
    while (swapdone)
    {
        swapdone = false;
        for (i=0; i < length-1; i++)
        {
            if (x[i] > x[i+1])
            {
                temp = x[i];
                x[i] = x[i+1];
                x[i+1] = temp;
                swapdone = true;
            }
        }
    }
}

void display (double x[], int length)
{
    int i;
    for (i=0; i < length; i++)
    {
        cout << x[i] << " ";
    }
    cout << endl;
} 
```

在示例运行中，结果是：

```
Enter data item count <1-20>
5
Enter score
30.41
Enter score
63.25
Enter score
62.47
Enter score
40.25
Enter score
310.41
Original Data:
30.41 63.25 62.47 40.25 310.41
Sorted Data
30.41 40.25 62 63 310.41 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:48:36.473

`temp`如果您不希望分配给它的东西变成整数，则应该是 a `double`，而不是a 。`int`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:52:04.880

如果您仅使用“i”作为计数器，那么您可以在 for 循环中声明它，例如

```
for (int i=0;i<length;i++) 
```

这将节省一些麻烦。反正，

改变 `int i, temp;`

至

```
int i;
double temp; 
```

Double表示它可以保存十进制数，integer表示整数。当您交换进行冒泡排序时，它会将您的双精度类型转换为整数类型。您的编译器应该给出类型转换错误，但应该编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:49:50.180

尝试这个：

```
 double tmp;
 std::cout << ios_base::setpercision(3) << tmp; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T18:51:56.607

查看

```
int i, temp; 
```

温度必须是两倍！

# c# - 无法捕获 Enter 键

> ID：10641721
> 
> 赞同：3
> 
> 时间：2012-05-17T18:46:47.063
> 
> 标签：c#, keyevent, enter

我有一个简单的表格，我可以通过它输入：

12 个按钮，1 个文本框（禁用和只读）

![在此处输入图像描述](../Images/96067360aa583627567e11759df578b0.png)

这就是我处理输入的方法

Login_KeyDown() 是我为每个 UI 组件和表单本身的所有**KeyDown**调用的常用方法。

```
private void Login_KeyDown(object sender, KeyEventArgs e)
{            
  if (e.KeyCode == Keys.Escape)
  {
    Application.Exit();
  }
  else if (e.KeyCode == Keys.NumPad9 || e.KeyCode == Keys.D9)
  {
    button3.BackgroundImage = Properties.Resources.button_hover;
    button3.ForeColor = Color.White;
    pin.Text = pin.Text + "9";
  }
  else if (e.KeyCode == Keys.Back)
  {
    button11.BackgroundImage = Properties.Resources.button_hover;
    button11.ForeColor = Color.White;
    if (pin.Text.Length > 0)
      pin.Text = pin.Text.Substring(0, pin.Text.Length - 1);
  }
  else if (e.KeyCode == Keys.Enter)
  {
    MessageBox.Show(pin.Text);
  }
} 
```

此代码在我启动应用程序时工作正常，但在我单击任何组件后，其余代码工作正常，但“输入关键条件”不起作用。

我的猜测是“输入关键条件”不适用于 UI 组件或类似的东西。

我也尝试过使用**“按键事件”**，它使用**KeyPressEventArgs**然后检查**KeyChar == 13**但这也不起作用。

**问题是什么，我该如何解决？**

ps 我没有为任何按钮设置任何按钮单击事件，该应用程序是 100% 基于 KBoard 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:06:20.953

查看 PreviewKeyDown。Return 在按钮控件上引发该事件。

```
 private void Form1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
    {
        if (e.KeyCode == Keys.Return)
            MessageBox.Show("I found return");

    } 
```

或者，您可以使用以下命令强制它在 KeyDown 事件中引发这些特殊键：

```
 private void Form1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
    {
        if (e.KeyCode == Keys.Return)
            e.IsInputKey = true;
    } 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.previewkeydown.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.previewkeydown.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:51:38.540

你试过用

```
Keys.Return 
```

反而

编辑：刚想到这个。您是否为主表单设置了接受按钮？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-02T16:18:48.887

这是因为您的表单已定义 AcceptButton。例如，您有一个“OK”、“Accept”或“Confirm”按钮，其中 DialogResult 设置为“OK”。这告诉它的父窗体有一个 AcceptButton，窗体上的 Enter 事件将转到这个按钮。

您应该做的是在表单级别捕获 Enter 键。将此代码添加到表单中：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if ((this.ActiveControl == myTextBox) && (keyData == Keys.Return))
    {
        //do something
        return true;
    }
    else
    {
        return base.ProcessCmdKey(ref msg, keyData);
    }
} 
```

# c# - 有没有办法折叠 TreeView 中的子树？

> ID：10641727
> 
> 赞同：0
> 
> 时间：2012-05-17T18:47:37.077
> 
> 标签：c#, wpf, user-interface

我正在尝试向我的 TreeView 添加功能，其中用户可以通过单击按钮让所有节点展开和折叠。Expand 使用 ExpandSubTree 可以很好地工作。无论出于何种原因，都没有 CollapseSubTree 函数。我怎样才能成功完成这项任务？

这是我当前的功能：

```
private void expand_collapse_children(TreeViewItem tvi, bool expand)
{
    if (tvi.Items.Count > 0)
    {
        foreach (TreeViewItem item in tvi.Items)
        {
            if (expand)
            {
                item.ExpandSubtree();
            }
            else
            {
                expand_collapse_children(item, expand);
                item.IsExpanded = false;
            }
        }
    }
} 
```

注意： isExpanded 比无用的高出半步。当它为真时，我可以将其设置为假，并且它不会折叠超过所选最高级别的任何内容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:43:56.503

```
private static void CollapseRecursive(TreeViewItem item)
{
    // Collapse item if expanded.
    if (item.IsExpanded)
    {
        item.IsExpanded = false;
    }

    // If the item has sub items...
    if (item.Items.Count > 0)
    {
        // ... iterate them...
        foreach (TreeViewItem subItem in item.Items)
        {
            // ... and if they themselves have sub items...
            if (subItem.Items.Count > 0)
            {
                // ... collapse the sub item and its sub items.
                CollapseRecursive(subItem);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:38:43.273

我实现了扩展 a 中的所有节点，`TreeView`如下所示（我有一个类似的功能来折叠所有节点）：

```
foreach (var treeViewItem in MyTreeView.FindVisualDescendants<TreeViewItem>(e => !e.IsExpanded, true)) {
  treeViewItem.IsExpanded = true;
} 
```

哪里`FindVisualDescendants`有一个方便的扩展方法：

```
public static IEnumerable<T> FindVisualDescendants<T>(this Visual parent, Func<T, bool> predicate, bool deepSearch) where T : Visual {
  var visualChildren = new List<Visual>();
  var visualChildrenCount = VisualTreeHelper.GetChildrenCount(parent);
  for (var childIndex = 0; childIndex < visualChildrenCount; childIndex++) {
    visualChildren.Add((Visual) VisualTreeHelper.GetChild(parent, childIndex));
  }

  foreach (var child in visualChildren) {
    var typedChild = child as T;
    if ((typedChild != null) && (predicate == null || predicate.Invoke(typedChild))) {
      yield return typedChild;
      if (deepSearch) {foreach (var foundVisual in FindVisualDescendants(child, predicate, true)) {
        yield return foundVisual;
      }
    } else {
      foreach (var foundVisual in FindVisualDescendants(child, predicate, deepSearch)) {
        yield return foundVisual;
      }
    }
  }

  yield break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:59:52.770

如果您有兴趣，这里`ExpandSubTree`是实际编写方式的实现（来自 Reflector）。我想你可以走相反的路。

```
public void ExpandSubtree()
{
    ExpandRecursive(this);
}

private static void ExpandRecursive(TreeViewItem item)
{
    if (item != null)
    {
        if (!item.IsExpanded)
        {
            item.SetCurrentValueInternal(IsExpandedProperty, BooleanBoxes.TrueBox);
        }
        item.ApplyTemplate();
        ItemsPresenter presenter = (ItemsPresenter) item.Template.FindName("ItemsHost", item);
        if (presenter != null)
        {
            presenter.ApplyTemplate();
        }
        else
        {
            item.UpdateLayout();
        }
        VirtualizingPanel itemsHost = item.ItemsHost as VirtualizingPanel;
        item.ItemsHost.EnsureGenerator();
        int index = 0;
        int count = item.Items.Count;
        while (index < count)
        {
            TreeViewItem item2;
            if (itemsHost != null)
            {
                itemsHost.BringIndexIntoView(index);
                item2 = (TreeViewItem) item.ItemContainerGenerator.ContainerFromIndex(index);
            }
            else
            {
                item2 = (TreeViewItem) item.ItemContainerGenerator.ContainerFromIndex(index);
                item2.BringIntoView();
            }
            if (item2 != null)
            {
                ExpandRecursive(item2);
            }
            index++;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T15:11:15.833

要获取 ItemHost 并调用 EnsureGenerator，您将需要反射，因为它们是内部的：

```
var panel = (Panel)typeof(MultiSelector).InvokeMember("ItemsHost", BindingFlags.NonPublic | BindingFlags.GetProperty | BindingFlags.Instance, null, item, null);

typeof (Panel).InvokeMember("EnsureGenerator", BindingFlags.NonPublic | BindingFlags.InvokeMethod | BindingFlags.Instance, null, panel, null); 
```

# ruby-on-rails - （409 冲突）响应 MKACTIVITY

> ID：10641729
> 
> 赞同：1
> 
> 时间：2012-05-17T18:47:46.707
> 
> 标签：ruby-on-rails, apache, svn

几个月来我们一直有一个问题，我找不到可能的解决方案。

我们有一个托管 web 应用程序的服务器 X。除其他外，此 web 应用程序处理托管在服务器 Y 中的 svn 存储库。该服务器（存储库）是使用 WeBDAV 通过`http://Y/svn/repository`

问题是，在尝试在存储库中创建新文件夹或提交文件时，有时完全随机出现以下错误（它基本上在需要提交某些内容的操作中失败）：

Svn::Error::RaDavRequestFailed: 服务器发送意外返回值 (409 Conflict) 以响应 '/svn/repository/certainPath' 的 MKACTIVITY 请求；

还有另一个服务 S 向 webapp 发出请求并导致 svn 操作，我可以看出该服务使用多个线程（我相信这会以某种方式导致问题，但不确定）。

我到处搜索，但没有真正找到任何有用的东西。我从另一个朋友那里知道他们也有这个问题，升级到 svn 1.7 解决了这个问题。就我而言，升级到新版本并不是那么简单，所以我更愿意解决这个问题，当然，最终了解到底发生了什么！

谢谢！

详细信息：服务器 X 和 Y 在 X 中有 Snow Leopard svn 版本是 1.6.17 (r1128011) YI 中的 apache 版本不知道（无法访问）

# neo4j - Neo4j 使用 Neography 自动索引

> ID：10641730
> 
> 赞同：2
> 
> 时间：2012-05-17T18:47:54.547
> 
> 标签：neo4j, neography

尝试使用从[该线程收集的详细信息来实现 auto_indexing](https://stackoverflow.com/questions/8048775/neo4j-auto-indexing-for-a-rest-server)

使用索引检索节点并没有真正取得任何成功。

我的 neo4j.properties：

```
node_keys_indexable=标题，bucket_type，用户名
node_auto_indexing=true
关系自动索引=真
relationship_keys_indexable=因为

```

这就是我创建节点的方法。节点创建工作。

```
user = Neo.create_node({:class_name => "User", :username => "foobar1"})

```

这是我使用索引查找节点的方法：

```
start user=node:node_auto_index(username = 'foobar1') 返回用户

```

不返回任何东西。任何想法为什么？有什么方法可以检查索引的内容？

# jquery - 如何将此cookie设置为永不过期

> ID：10641737
> 
> 赞同：22
> 
> 时间：2012-05-17T18:48:21.840
> 
> 标签：jquery, cookies, setcookie

我有一个函数来创建一个 cookie，传递 cookie 的名称、值和到期时间（以天为单位）。

这是功能：

```
function setCookie(c_name,value,exdays) {
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : ";
    expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name) {
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++) {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name) {
            return unescape(y);
        }
    }
} 
```

该功能按预期工作，但我需要做什么才能设置 cookie 永不过期？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-17T18:56:38.123

There is no way to set to `never expire` . It's not a javascript limitation, it's just not the part of the specification of the cookie [http://www.faqs.org/rfcs/rfc2965.html](http://www.faqs.org/rfcs/rfc2965.html).

You can set to a far date in the future. for example to set it for 20years from now call `setCookie` with `20*365` as `exdays` parameter as you `setCookie` function expect how many days before it expires. Like follows

```
setCookie('cookiename','cookie_val',20*365); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-17T18:49:49.540

变量`exdays`是 cookie 过期的时间，只需在函数调用中将该值设置为几千天。

```
setCookie('cookiename', 'cookievalue', 10000); //expires in 10k days 
```

# sql-server-2008 - Microsoft SQL Server Management Studio 是否有类似查询名称标题的功能？

> ID：10641742
> 
> 赞同：0
> 
> 时间：2012-05-17T18:48:43.593
> 
> 标签：sql-server-2008

因此 linqpad 允许您命名查询，这样当您运行查询时，它会在您单击运行时作为查询本身的标题出现 - 当您同时进行多个选择时，这会有所帮助：MSQL 上是否有类似的功能管理工作室？

所以，IE 查询时，而不是

```
 Query1Table1|Query1Table2|Query1Table3
 Query2Table1|Query2Table2|Query2Table3
 Query3Table1|Query3Table2|Query3Table3 
```

你可以看到

```
 'People'
 Query1Table1|Query1Table2|Query1Table3
    'Students'
 Query2Table1|Query2Table2|Query2Table3
    'class'
 Query3Table1|Query3Table2|Query3Table3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:00:23.620

不是我见过的。如果您正在寻找向结果添加一些详细/调试值的能力，您可以在实际选择之前进行一次性选择。您可以将这些语句包装在 If @debug 检查中，以便您可以轻松地有选择地打开/关闭它们。我对一些更复杂的查询执行此操作以帮助调试，尤其是在使用表变量时。举个简单的例子：

```
declare @debug bit;set @debug=1;

declare @t table (id int)
insert into @t select 1
insert into @t select 2
insert into @t select 3
insert into @t select 4
insert into @t select 5

-- Debugging
if (@debug=1) begin
select '@T contents:';
select * from @t
end

-- Actual select
select * from @t where id >3; 
```

# sql-server-2008 - 在 SQL Server 2008 Express 中创建 SSIS 包需要哪些工具？

> ID：10641743
> 
> 赞同：1
> 
> 时间：2012-05-17T18:48:44.860
> 
> 标签：sql-server-2008, ssis

在我的开发机器上，我有 Visual Studio 2010 和 SQL Server 2008 Express。在我们的生产服务器上，我们有 SQL Server 2008 Standard。我将创建一个驻留在生产 SQL 服务器上的 WCF 服务，该服务将在调用时触发我的 SSIS 包。

因为我的开发机器上有 SQL Express，所以我根本无法从这台机器上创建 SSIS 包。这是必需的，因此我可以首先编写 WCF 服务。

所以，我可以简单地从我们的 msdn 订阅中将 SQL Server 2008 Standard 下载到我的开发机器上，但由于我无法进入的原因，这不可能立即实现。它会在不久的将来，但还不够快。

我怎样才能完成这项工作？有工具可以下载吗？在哪里？我已经对此进行了详细研究，但似乎有 5 种不同的方式导致无处可去。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T03:03:45.187

由于您的网络上有 SQL Server 的许可版本，因此您可以根据需要在开发服务器或您自己的桌面上安装全套工具。这将使您能够访问[SliverNinja](https://stackoverflow.com/a/10643155/847990)提到的 BIDS 软件。

我会说，由于您仅限于可以做的事情，因此您唯一的选择是将简单/基本包部署到您的生产服务器。如果您的开发服务器可以与该服务器通信，我会说在开发框上创建您的 WCF 服务并让它简单地调用您的生产服务器上的包。该包不需要做任何花哨的事情来简单地验证您是否可以正确调用它。只需让包导入一个简单文件并将其输出到另一个文件即可；或者只是从数据库中导出一些目录数据。

我不认为，由于您无法在开发服务器上复制生产环境，因此在这种情况下这样做是不合理的。如果它必须完成，它必须完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:33:30.150

所以你想创建一个没有 BIDS 的包？

随意使用纯文本创建一个，你去:)

```
<DTS:Executable xmlns:DTS="www.microsoft.com/SqlServer/Dts" DTS:ExecutableType="MSDTS.Package.1">
    <DTS:Property DTS:Name="PackageFormatVersion">2</DTS:Property> 
    <DTS:Property DTS:Name="CreationDate" DTS:DataType="7">5/18/2012 1:21:47 PM</DTS:Property> 
    <DTS:Property DTS:Name="ProtectionLevel">1</DTS:Property> 
    <DTS:Property DTS:Name="DisableEventHandlers">0</DTS:Property> 
    .....a lot more properties.....
</DTS:Executable> 
```

我在开玩笑，当然。我的观点是：

*   dtsx 包只是由 BIDS 创建的 XML 文件
*   你可以创建你的包，如果你不能使用你的本地盒子，使用你拥有的，即使这意味着使用你的服务器（如果这是你唯一的选择，那就去做）
*   您不需要 BIDS 甚至 SSIS 服务来运行 pacakges。DTEXEC、DTEXECUI 和 SQl Server Agent 能够自行运行包（除非将包部署到包存储）
*   我不知道有任何工具可以构建除 BIDS 之外的软件包。这没有多大意义，就像问是否有一个工具可以构建除 Visual Studio 之外的 C# 应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:38:50.727

您需要**BIDS**（*商业智能开发工作室）来创建*[SQL Express 不提供](https://stackoverflow.com/a/1152288/175679)的 DTSX 包和 SSIS 。

您还需要**Visual Studio**来创建 WCF 服务，听起来您已经拥有了。

# android - 三星 Galaxy S II AVD（Android 虚拟设备）基本设置？

> ID：10641744
> 
> 赞同：41
> 
> 时间：2012-05-17T18:48:48.950
> 
> 标签：android, avd, galaxy

我想创建三星 Galaxy S II 的 AVD。唯一的目的是使用其默认 Web 浏览器测试网站，以查看它们在纵向和横向模式下的外观。

由于它现在是最受欢迎的 Android 智能手机，我想在我的网站上对其进行测试。

我只想知道最基本的设置，这样我至少可以大致了解一下。我正在使用带有 GUI 前端的 Andriod SDK。

我正在寻找您在 Andriod 虚拟设备管理器中单击“新建”后出现的那些设置。

例如：

目标：SD 卡：皮肤：硬件：抽象 LCD 密度 最大 VM 应用程序堆大小 设备 RAM 大小

等等。

我尝试了三星的在线远程测试实验室，但我发现它过于严格（似乎无法在某些端口关闭的 Internet 热点上使用它），启动速度很慢，而且我最终还是会出现黑屏。所以，我真的更喜欢将我自己的版本作为 AVD 运行。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-07T03:54:05.857

AVD 管理器的界面已更改。因此，需要对流程进行更改。现在有一个设备定义和一个虚拟设备定义，而不是单个文件。不幸的是，用户界面并不能完全控制两者的内容。

这些说明适用于 Android SDK 工具修订版 21。它们引用了 Windows 7 路径。如果您使用的是不同的操作系统，则需要确定文件所在的位置。

按照从 mwalter 到第 6 步的步骤进行操作（以获得适当的皮肤）。然后执行以下操作：

1.  在 Android 虚拟设备管理器中，单击“设备定义”选项卡，然后按“新设备”

2.  输入名称“Samsung Galaxy SII”（名称必须准确，以下文件才能正常工作。如果更改它，请务必对以下文件中的名称进行等效更改。）

3.  填写屏幕尺寸、分辨率和内存。我们将覆盖内容，因此值并不重要，但正确的值是： 屏幕尺寸：4.3 分辨率：480 x 800 内存：1024 密度：hdpi 按钮：硬件

4.  点击创建设备，然后关闭 AVD 管理器

5.  在您喜欢的 XML 编辑器中打开文件 C:\Users\[用户名]\.android\devices.xml

6.  将名为“Samsung Galaxy SII”的 <d:device>...</d:device> 元素替换为以下内容：

    ```
    <d:device>
      <d:name>Samsung Galaxy SII</d:name>
      <d:manufacturer>Samsung</d:manufacturer>
      <d:meta/>
      <d:hardware>
        <d:screen>
          <d:screen-size>normal</d:screen-size>
          <d:diagonal-length>4.30</d:diagonal-length>
          <d:pixel-density>hdpi</d:pixel-density>
          <d:screen-ratio>long</d:screen-ratio>
          <d:dimensions>
            <d:x-dimension>480</d:x-dimension>
            <d:y-dimension>800</d:y-dimension>
          </d:dimensions>
          <d:xdpi>216.97</d:xdpi>
          <d:ydpi>216.97</d:ydpi>
          <d:touch>
            <d:multitouch>jazz-hands</d:multitouch>
            <d:mechanism>finger</d:mechanism>
            <d:screen-type>capacitive</d:screen-type>
          </d:touch>
        </d:screen>
        <d:networking>
          Bluetooth
          <!--NFC (put this back in if you have an S2 model that supports NFC-->
          Wifi
        </d:networking>
        <d:sensors>
          Compass
          Accelerometer
          GPS
          ProximitySensor
          LightSensor
          Gyroscope
        </d:sensors>
        <d:mic>true</d:mic>
        <d:camera>
          <d:location>back</d:location>
          <d:autofocus>true</d:autofocus>
          <d:flash>true</d:flash>
        </d:camera>
        <d:keyboard>nokeys</d:keyboard>
        <d:nav>nonav</d:nav>
        <d:ram unit="GiB">1</d:ram>
        <d:buttons>hard</d:buttons>
        <d:internal-storage unit="GiB">16</d:internal-storage>
        <d:removable-storage unit="GiB">32</d:removable-storage>
        <d:cpu>Generic CPU</d:cpu>
        <d:gpu>Generic GPU</d:gpu>
        <d:abi>
          armeabi-v7a
          armeabi
        </d:abi>
        <d:dock/>
        <d:power-type>battery</d:power-type>
      </d:hardware>
      <d:software>
        <d:api-level>10-</d:api-level>
        <d:live-wallpaper-support>true</d:live-wallpaper-support>
        <d:bluetooth-profiles>
          HSP
          HFP
          A2DP
          AVRCP
          OPP
          PBAP
          HID
        </d:bluetooth-profiles>
        <d:gl-version>2.0</d:gl-version>
        <d:gl-extensions>
          <!-- No clue why the tool is unhappy declaring these, but it is.  (Doesn't complain about their presence in the 'official' devices.)  Comment them out for now.
          GL_OES_rgb8_rgba8
          GL_OES_depth24
          GL_OES_vertex_half_float
          GL_OES_texture_float
          GL_OES_texture_half_float
          GL_OES_element_index_uint
          GL_OES_mapbuffer
          GL_OES_fragment_precision_high
          GL_OES_compressed_ETC1_RGB8_texture
          GL_OES_EGL_image
          GL_OES_EGL_image_external
          GL_OES_required_internalformat
          GL_OES_depth_texture
          GL_OES_get_program_binary
          GL_OES_packed_depth_stencil
          GL_OES_standard_derivatives
          GL_OES_vertex_array_object
          GL_OES_egl_sync
          GL_EXT_multi_draw_arrays
          GL_EXT_texture_format_BGRA8888
          GL_EXT_discard_framebuffer
          GL_EXT_shader_texture_lod
          GL_IMG_shader_binary
          GL_IMG_texture_compression_pvrtc
          GL_IMG_texture_npot
          GL_IMG_texture_format_BGRA8888
          GL_IMG_read_format
          GL_IMG_program_binary
          GL_IMG_multisampled_render_to_texture
          -->
        </d:gl-extensions>
        <d:status-bar>true</d:status-bar>
      </d:software>
      <d:state default="true" name="Portrait">
        <d:description>The device in portrait orientation</d:description>
        <d:screen-orientation>port</d:screen-orientation>
        <d:keyboard-state>keyssoft</d:keyboard-state>
        <d:nav-state>nonav</d:nav-state>
      </d:state>
      <d:state name="Landscape">
        <d:description>The device in landscape orientation</d:description>
        <d:screen-orientation>land</d:screen-orientation>
        <d:keyboard-state>keyssoft</d:keyboard-state>
        <d:nav-state>nonav</d:nav-state>
      </d:state>
    </d:device> 
    ```

7.  重新打开 AVD 管理器并返回设备定义选项卡，选择三星 Galaxy SII 设备并选择创建 AVD。将其命名为您认为合适的名称并点击“确定”。（同样，我们将覆盖它，所以不要太担心设置。）

8.  关闭 AVD 管理器并在您喜欢的文本编辑器中打开文件 C:\Users\[user name]\.android\avd\[avd name]\config.ini

9.  将文件的内容替换为以下内容：

    ```
    avd.ini.encoding=ISO-8859-1
    abi.type=armeabi
    hw.accelerometer=yes
    hw.audioInput=yes
    hw.battery=yes
    hw.cpu.arch=arm
    hw.device.hash=-1902399403
    hw.device.manufacturer=Samsung
    hw.device.name=Samsung Galaxy SII
    hw.dPad=no
    hw.gps=yes
    hw.gsmModem=yes
    hw.keyboard=no
    hw.lcd.density=240
    hw.mainKeys=yes
    hw.ramSize=1024M
    hw.sdCard=yes
    hw.sensors.orientation=yes
    hw.sensors.proximity=yes
    hw.touchScreen=yes
    hw.trackBall=no
    image.sysdir.1=platforms\android-10\images\
    skin.dynamic=yes
    skin.name=galaxy_s2
    skin.path=platforms\android-10\skins\GALAXY_S2
    vm.heapSize=32
    disk.dataPartition.size=2G
    hw.camera.back=webcam0
    sdcard.size=200M 
    ```

10.  您可能需要编辑最后 3 个条目以更改可用存储空间以及如何/是否更改相机。我发现如果我将 disk.dataPartition.size 设置为应有的大小（16G），模拟器将无法正常启动。sdcard.size 也是一样，最大可以到 32G。如果您愿意，可以将 hw.camera.back 设置为“None”或“Emulated”。同样，检查 hw.device.hash 值是否与原始文件中的值相同。如果它不同，则该文件将不起作用。

祝你好运。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-07-10T20:33:44.800

执行以下操作来创建三星 Galaxy S2 皮肤：

1.  从三星页面下载皮肤（按照 anshumans 发布的链接）
2.  转到目录`[Android-SDK directory]/platforms/android-10/skins`
3.  创建一个名为 GALAXY_S2 的新目录
4.  将下载的 ZIP 文件中的所有文件解压缩到新目录
5.  编辑文件`manifest.ini`并将行更改`api=9`为`api=10`
6.  启动 AVD 并单击“新建...”
7.  在目标下选择“Android 2.3.3 - API Level 10”
8.  在皮肤下从下拉列表中选择“GALAXY_S2”
9.  单击“创建 AVD”

您可能已经注意到，AVD 将基于 Android API 10 级别。因此，例如，如果您选择目标 Android API 级别 16，则不会显示 Galaxy S2 皮肤。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-21T22:45:55.830

[三星在他们的](http://developer.samsung.com/android/tools-sdks/Samsung-GALAXY-S2-Skin-for-handset-emulation)开发者网站上有 S II 皮肤

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-12T05:33:23.077

您可以从三星的开发网站[http://developer.samsung.com/technical-doc/view.do?v=T000000075&pi=1&ps=10&pb=Y&ct=CT350000&sc=下载并添加 s2 模拟器](http://developer.samsung.com/technical-doc/view.do?v=T000000075&pi=1&ps=10&pb=Y&ct=CT350000&sc=)

还有关于如何使用它们的详细说明 - [http://developer.samsung.com/technical-doc/view.do?v=T000000095](http://developer.samsung.com/technical-doc/view.do?v=T000000095)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-27T09:17:45.800

*我不是盲目复制粘贴的忠实粉丝。此外，最佳答案引用了第二个，而第二个又引用了第三个；最后，SDK Tools v24.1.2 有一些新的变化，这意味着如果您不测试蓝牙，则**绝对不需要编辑文件。**因此，我想我会发布一个更新和整合的解决方案。完全归功于[anshumans](https://stackoverflow.com/users/1003412/anshumans)、[mwalter](https://stackoverflow.com/users/696839/mwalter)、[Lloyd](https://stackoverflow.com/users/1953978/lloyd)和评论者*

路径使用 Windows 约定。OS X/Linux 用户通常只需将反斜杠 (\) 切换为正斜杠 (/)，安装文件夹除外。这些环境变量可能会或可能不会在您的系统上设置：

`<ADT_HOME>`是`AVD Manager.exe`（默认为`C:\Program Files (x86)\Android\android-sdk`）的位置

`<ANDROID_SDK_HOME>``.android`是AVD 用来存储设备定义的文件夹的位置（默认为`HOMEPATH`[并且与您的 SDK 的位置无关 :)]）

* * *

### 三星皮肤

[三星的开发者网站](http://developer.samsung.com/technical-doc/view.do?v=T000000095)包含许多皮肤的链接，包括 S2；它还包含使用带有[ADT 插件的Eclipse 安装它们的说明，这是不必要的，已被](http://developer.android.com/tools/sdk/eclipse-adt.html)[Android Studio](http://developer.android.com/tools/studio/index.html)取代。要获得 S2 皮肤，请使用三星页面上的链接，然后单击带有软盘符号的 Zip 文件（[或单击此处](http://developer.samsung.com/technical-doc/view.do?v=T000000075#none)）。

如果您没有使用三星的 Eclipse 安装说明，则步骤如下：

1.  确定您所针对的 Android 版本。请注意，S2 是在 API 级别 9（姜饼）上发布的，并且皮肤反映了这一点。以后的版本和更新包括 API 级别 10、15 和 16。（根据[Wikipedia](http://en.wikipedia.org/wiki/Samsung_Galaxy_S_II#Software_and_services)）。
2.  您在上面步骤 1 中选择的目标在哪里`??`，将下载的 zip 文件的内容提取到新文件夹（例如`Galaxy_S2`）下

    ```
     <ADT_HOME>\platforms\android-??\skins 
    ```

3.  编辑提取的`manifest.ini`，更改行`api=9`以反映其当前位置（例如`api=15`）。（这实际上似乎没有必要，但在我确认之前留了下来。）
4.  对要测试的每个版本重复步骤 1-3。

* * *

### 设备定义

选择 AVD Manager 上的*Device Definitions*选项卡，然后单击*Create Device...*按钮。在创建新设备屏幕上，

*   *接受所有默认值，除非另有说明*
*   **名称**：三星 Galaxy SII（或其他）
*   **屏幕尺寸**：4.3（或 I9210 型号为 4.5）
*   **分辨率**：480x800
*   **内存**：1024 MiB（或 1 GiB）
*   **密度**：hdpi
*   **按钮**：硬件
*   点击*创建设备*

`<ANDROID_SDK_HOME>\.android\devices.xml`将使用您的新设备定义进行更新。

作为一般规则，除非您基于它创建大量 AVD，否则您不必*手动*编辑`devices.xml`. 另请注意，为匹配 SII 的硬件而提出的许多编辑实际上没有最终结果。如果您确实希望进行编辑，请首先关闭 AVD 管理器（以及 Eclipse IDE，如果适用）。

*   找到`d:device`您刚刚创建的节点`<d:name>Samsung Galaxy SII</d:name>`

    *   `d:manufacturer`（可选）将值从用户更改为三星
    *   `d:networking`（可选）删除/注释掉 NFC（例如`<!-- NFC -->`），除非您想针对包含它的稀有模型进行测试
    *   `d:sensors`删除气压计线
    *   `d:internal-storage`（可选）将值从 4 更改为 16（或 32），但在创建 AVD 时无论如何都会忽略它
    *   `d:removable-storage`不需要添加这个，因为它被忽略了
    *   `d:abi`无需削减它，因为它被忽略了
    *   `d:bluetooth-profiles`将自闭标签替换为

        ```
        <d:bluetooth-profiles>
            HSP
            HFP
            A2DP
            AVRCP
            OPP
            PBAP
            HID
        </d:bluetooth-profiles> 
        ```

    *   `d:status-bar`将值更改为真

    *   `d:nav-state`将两个条目（在纵向和横向下）更改为“nonav”

* * *

### Android 虚拟设备 (AVD) 定义（最终）

重新启动 AVD 管理器

1.  选择您刚刚创建的设备定义
2.  单击*创建 AVD...*

*或者*

1.  单击虚拟设备选项卡上的*创建...*
2.  选择您在**设备下创建的定义**

*然后*

3.  *除非另有说明，否则接受所有默认值*
4.  **AVD名称**：AVD_for_Samsung_Galaxy_SII（或其他）
5.  **设备**：已设置为您的设备定义的名称
6.  **目标**：选择适当的 API 级别——此时我通常也将其附加到 AVD 名称中
7.  **CPU/ABI**：ARM
8.  **键盘**：取消选中/禁用“存在硬件键盘”
9.  **皮肤**：Galaxy_S2（如果您在所选目标 API 下提取皮肤）
10.  **后置摄像头**：网络摄像头0（或其他任何东西；你在与它互动吗？）
11.  **RAM** : 如果在 Windows 上考虑降低到 768
12.  **内部存储**：虽然 SII 有 16GB 和 32GB 两种，但考虑保留 200MiB。
13.  **SD 卡大小**：留空，除非它是您测试的一部分。它越大，所需的资源就越多。（考虑 200MiB）

[要在 Windows 上进行更快的仿真，请](https://msdn.microsoft.com/en-us/library/dn757059.aspx#HAXM)考虑在 Windows 功能中禁用 HyperV 并启用 HAXM。如果这样做，请更改以下内容：

7.  **CPU/ABI**：选择任何英特尔

    **仿真**：选中/启用“使用主机 GPU”

单击确定。

`<ANDROID_SDK_HOME>\avd\<AVD_NAME>.avd\config.ini`反映了您上面的所有设置（`AVD_NAME`您在 4\. 中设置的内容在哪里）。[劳埃德](https://stackoverflow.com/users/1953978/lloyd)给出的例子只显示了一个区别`skin.dynamic=yes`- 我在运行时看不到区别。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-31T22:05:25.393

虽然票数最高的答案是正确的，但您很可能最终会遇到分辨率显示问题，这将损害您想要测试/开发的几乎所有应用程序。

为了解决该特定问题，您还需要更改此设置：

```
hw.lcd.density 
```

它位于 AVD 皮肤的 hardware.ini 中。你可以在这里找到它：

```
<ANDROID_SDK_PATH>\sdk\platforms\android-<APIversion>\skins\<YourSkin>\hardware.ini 
```

从**300**到**218**。

# c# - 如何将 Json 数组反序列化为不同的对象？

> ID：10641748
> 
> 赞同：2
> 
> 时间：2012-05-17T18:49:06.110
> 
> 标签：c#, asp.net, json, json.net

我正在尝试使用 json.net 将 json 字符串反序列化为 C# 上的新列表。

当我进行直接反序列化时，我得到一些属性为空，因为我的列表中有不同的对象。

所以我想为该任务创建一个“翻译器”，构建通用对象并设置我的对象的属性。

这是我的进步..

```
CitasProfesorWeb.JavaService.AgendaWSService service =
    new JavaService.AgendaWSService();
JsonTextReader reader;

private void cargaDatos()
{
    String lista = service.obtenerCitasNuevas(2);
    reader = new JsonTextReader(new StringReader(lista));

    while (reader.Read())
    {
        //here i want to read the attributes or objects
    }
} 
```

我曾尝试使用 JsonConvert.PopulateObject(reader,cita) 但我收到一条错误消息，指出我的参数无效。

- 编辑 -

这是我收到的字符串：

```
[{"idCita":6,"fechaSolicitud":"2012/4/20","fechaCita":"2012/4/19","horario":{"idHorario":1,"fechaInicio":"2012/1/16","fechaHoy":1337281297199,"fechaFin":"2012/5/30","nombre":"Enero-Mayo 2012","profesor":{"idProfesor":2, "nombre":"Guillermo", "apellido":"Salazar", "nomUsuario":"g.salazar", "email":"g.salazar@itson.mx", "ubicacion":"LV323", "descripcion":"Profesor Interino"}},"alumno":{"idAlumno":1, "nombre":"Jhonatan", "apellido":"Romero", "nomUsuario":" jromero", "email":"jhonatanromgggggh", "carrera":"LSIA" },"asunto":"asesorias","status":"0","horaCita":"10:0"}, {"idCita":7,"fechaSolicitud":"2012/4/20","fechaCita":"2012/4/27","horario":{"idHorario":1,"fechaInicio":"2012/1/16","fechaHoy":1337281297199,"fechaFin":"2012/5/30","nombre":"Enero-Mayo 2012","profesor":{"idProfesor":2, "nombre":"Guillermo", "apellido":"Salazar", "nomUsuario":"g.salazar", "email":"g.salazar@itson.mx", "ubicacion":"LV323", "descripcion":"Profesor Interino"}},"alumno":{"idAlumno":1, "nombre":"Jhonatan", "apellido":"Romero", "nomUsuario":" jromero", "email":"jhonatanromgggggh", "carrera":"LSIA" },"asunto":"asesorias","status":"0","horaCita":"11:0"}, {"idCita":11,"fechaSolicitud":"2012/4/20","fechaCita":"2012/4/20","horario":{"idHorario":1,"fechaInicio":"2012/1/16","fechaHoy":1337281297199,"fechaFin":"2012/5/30","nombre":"Enero-Mayo 2012","profesor":{"idProfesor":2, "nombre":"Guillermo", "apellido":"Salazar", "nomUsuario":"g.salazar", "email":"g.salazar@itson.mx", "ubicacion":"LV323", "descripcion":"Profesor Interino"}},"alumno":{"idAlumno":1, "nombre":"Jhonatan", "apellido":"Romero", "nomUsuario":" jromero", "email":"jhonatanromgggggh", "carrera":"LSIA" },"asunto":"asesorias","status":"0","horaCita":"17:0"}, {"idCita":12,"fechaSolicitud":"2012/4/27","fechaCita":"2012/5/3","horario":{"idHorario":1,"fechaInicio":"2012/1/16","fechaHoy":1337281297199,"fechaFin":"2012/5/30","nombre":"Enero-Mayo 2012","profesor":{"idProfesor":2, "nombre":"Guillermo", "apellido":"Salazar", "nomUsuario":"g.salazar", "email":"g.salazar@itson.mx", "ubicacion":"LV323", "descripcion":"Profesor Interino"}},"alumno":{"idAlumno":1, "nombre":"Jhonatan", "apellido":"Romero", "nomUsuario":" jromero", "email":"jhonatanromgggggh", "carrera":"LSIA" },"asunto":"tesis","status":"0","horaCita":"12:0"}, {"idCita":15,"fechaSolicitud":"2012/5/11","fechaCita":"2012/4/20","horario":{"idHorario":1,"fechaInicio":"2012/1/16","fechaHoy":1337281297200,"fechaFin":"2012/5/30","nombre":"Enero-Mayo 2012","profesor":{"idProfesor":2, "nombre":"Guillermo", "apellido":"Salazar", "nomUsuario":"g.salazar", "email":"g.salazar@itson.mx", "ubicacion":"LV323", "descripcion":"Profesor Interino"}},"alumno":{"idAlumno":1, "nombre":"Jhonatan", "apellido":"Romero", "nomUsuario":" jromero", "email":"jhonatanromgggggh", "carrera":"LSIA" },"asunto":"Tesis","status":"0","horaCita":"10:0"}] 
```

这是我的课：

```
public class Cita
    {
        Profesor profesor;

        public Profesor Profesor
        {
            get { return profesor; }
            set { profesor = value; }
        }

        Alumno alumno;

        public Alumno Alumno
        {
            get { return alumno; }
            set { alumno = value; }
        }

        DateTime inicioCita;

        public DateTime InicioCita
        {
            get { return inicioCita; }
            set { inicioCita = value; }
        }

        String asunto;

        public String Asunto
        {
            get { return asunto; }
            set { asunto = value; }
        }

        String lugar;

        public String Lugar
        {
            get { return lugar; }
            set { lugar = value; }
        }

        int status;

        public int Status
        {
            get { return status; }
            set { status = value; }
        }

        DateTime fechaSolicitud;

        public DateTime FechaSolicitud
        {
            get { return fechaSolicitud; }
            set { fechaSolicitud = value; }
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:12:40.330

我会`dynamic`像下面那样解析你的 json 字符串（不需要声明`cita`, `horario`, `profesor`,`alumno`类）

```
dynamic dynObj = JsonConvert.DeserializeObject(json);

foreach (var cita in dynObj)
{
    Console.WriteLine("{0} {1} {2}",
        cita.horario.profesor.apellido,
        cita.alumno.nombre,
        cita.fechaSolicitud
        );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:31:08.693

这是一个将 JSON 转换为对象的通用类（一定要包含`System.Web.Script.Serialization`）

```
 public static T JsonToObject<T>(string JsonData)
    {
        // Deserialize the JSON into the object
        JavaScriptSerializer jss = new JavaScriptSerializer();
        T rf = (T)jss.Deserialize(JsonData, typeof(T));

        return rf;
    } 
```

要将对象转换回 JSON，请使用此通用类

```
 public static string ObjectToJson<T>(T rf)
    {
        // Serialize the object as JSON
        StringBuilder sb = new StringBuilder();
        JavaScriptSerializer jss = new JavaScriptSerializer();
        jss.Serialize(rf, sb);

        return sb.ToString();
    } 
```

作为使用示例，您将使用

```
 string json = @"[{""idCita"":6,""fechaSolicitud"":""2012/4/20"",""fechaCita"":""2012/4/19"",""horario"":{""idHorario"":1,""fechaInicio"":""2012/1/16"",""fechaHoy"":1337281297199,""fechaFin"":""2012/5/30"",""nombre"":""Enero-Mayo 2012"",""profesor"":{""idProfesor"":2, ""nombre"":""Guillermo"", ""apellido"":""Salazar"", ""nomUsuario"":""g.salazar"", ""email"":""g.salazar@itson.mx"", ""ubicacion"":""LV323"", ""descripcion"":""Profesor Interino""}},""alumno"":{""idAlumno"":1, ""nombre"":""Jhonatan"", ""apellido"":""Romero"", ""nomUsuario"":"" jromero"", ""email"":""jhonatanromgggggh"", ""carrera"":""LSIA"" },""asunto"":""asesorias"",""status"":""0"",""horaCita"":""10:0""}, {""idCita"":7,""fechaSolicitud"":""2012/4/20"",""fechaCita"":""2012/4/27"",""horario"":{""idHorario"":1,""fechaInicio"":""2012/1/16"",""fechaHoy"":1337281297199,""fechaFin"":""2012/5/30"",""nombre"":""Enero-Mayo 2012"",""profesor"":{""idProfesor"":2, ""nombre"":""Guillermo"", ""apellido"":""Salazar"", ""nomUsuario"":""g.salazar"", ""email"":""g.salazar@itson.mx"", ""ubicacion"":""LV323"", ""descripcion"":""Profesor Interino""}},""alumno"":{""idAlumno"":1, ""nombre"":""Jhonatan"", ""apellido"":""Romero"", ""nomUsuario"":"" jromero"", ""email"":""jhonatanromgggggh"", ""carrera"":""LSIA"" },""asunto"":""asesorias"",""status"":""0"",""horaCita"":""11:0""}, {""idCita"":11,""fechaSolicitud"":""2012/4/20"",""fechaCita"":""2012/4/20"",""horario"":{""idHorario"":1,""fechaInicio"":""2012/1/16"",""fechaHoy"":1337281297199,""fechaFin"":""2012/5/30"",""nombre"":""Enero-Mayo 2012"",""profesor"":{""idProfesor"":2, ""nombre"":""Guillermo"", ""apellido"":""Salazar"", ""nomUsuario"":""g.salazar"", ""email"":""g.salazar@itson.mx"", ""ubicacion"":""LV323"", ""descripcion"":""Profesor Interino""}},""alumno"":{""idAlumno"":1, ""nombre"":""Jhonatan"", ""apellido"":""Romero"", ""nomUsuario"":"" jromero"", ""email"":""jhonatanromgggggh"", ""carrera"":""LSIA"" },""asunto"":""asesorias"",""status"":""0"",""horaCita"":""17:0""}, {""idCita"":12,""fechaSolicitud"":""2012/4/27"",""fechaCita"":""2012/5/3"",""horario"":{""idHorario"":1,""fechaInicio"":""2012/1/16"",""fechaHoy"":1337281297199,""fechaFin"":""2012/5/30"",""nombre"":""Enero-Mayo 2012"",""profesor"":{""idProfesor"":2, ""nombre"":""Guillermo"", ""apellido"":""Salazar"", ""nomUsuario"":""g.salazar"", ""email"":""g.salazar@itson.mx"", ""ubicacion"":""LV323"", ""descripcion"":""Profesor Interino""}},""alumno"":{""idAlumno"":1, ""nombre"":""Jhonatan"", ""apellido"":""Romero"", ""nomUsuario"":"" jromero"", ""email"":""jhonatanromgggggh"", ""carrera"":""LSIA"" },""asunto"":""tesis"",""status"":""0"",""horaCita"":""12:0""}, {""idCita"":15,""fechaSolicitud"":""2012/5/11"",""fechaCita"":""2012/4/20"",""horario"":{""idHorario"":1,""fechaInicio"":""2012/1/16"",""fechaHoy"":1337281297200,""fechaFin"":""2012/5/30"",""nombre"":""Enero-Mayo 2012"",""profesor"":{""idProfesor"":2, ""nombre"":""Guillermo"", ""apellido"":""Salazar"", ""nomUsuario"":""g.salazar"", ""email"":""g.salazar@itson.mx"", ""ubicacion"":""LV323"", ""descripcion"":""Profesor Interino""}},""alumno"":{""idAlumno"":1, ""nombre"":""Jhonatan"", ""apellido"":""Romero"", ""nomUsuario"":"" jromero"", ""email"":""jhonatanromgggggh"", ""carrera"":""LSIA"" },""asunto"":""Tesis"",""status"":""0"",""horaCita"":""10:0""}]";
        List<Cita> p = JsonToObject<List<Cita>>(json); 
```

**编辑：**您特别提到了 JSON.NET，因此如果您想继续使用，上面的代码可能对您没有帮助。但是，要解析 JSON 字符串的所有属性，您需要一个与 JSON 响应字符串匹配的类。从那里，您可以根据需要设置其他对象的属性。

# vb.net - DataGridView - 可以使用代码将焦点放在带有 (*) 的空白行上吗？

> ID：10641749
> 
> 赞同：0
> 
> 时间：2012-05-17T18:49:11.507
> 
> 标签：vb.net, datagridview, insert, row

在数据网格视图中有一个带有 (*) 的空白行，允许用户插入新的数据行。

即使数据网格视图中已经加载了许多行，是否有办法使用代码将注意力集中在该行上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:39:36.110

```
dgv2.CurrentCell = dgv2(0, dgv2.Rows.Count - 1) 
```

# android - 安卓中文手写识别库

> ID：10641752
> 
> 赞同：1
> 
> 时间：2012-05-17T18:49:23.453
> 
> 标签：android, ocr, cjk, handwriting

有人知道免费的中文手写引擎吗？我已经检查了这个问题：[我在哪里可以找到适用于 Android/iPhone 的免费中文手写识别引擎？](https://stackoverflow.com/questions/8783290/where-can-i-find-a-free-chinese-handwritten-recognition-engine-for-android-iphon)

在 tegaki 网站上，我看到支持 android。但是我找不到任何 *.jar 文件或可以导入到我的 android 项目的任何内容。（在日食中与 ADT）

现在我正在寻找 tegaki 或替代方法的小型入门指南。顺便说一句，我在谷歌翻译应用程序中找到了这个功能。[https://play.google.com/store/apps/details?id=com.google.android.apps.translate&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLnRyYW5zbGF0ZSJd](https://play.google.com/store/apps/details?id=com.google.android.apps.translate&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLnRyYW5zbGF0ZSJd)

类似的东西将是完美的。不知这部分android sdk 还是开源的。不幸的是，我在开发者网站上找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T02:21:49.933

谷歌翻译功能是专有的，实际识别是在谷歌的服务器上完成的，所以没有库。

您在哪里找到有关 Tegaki 支持 Android 的信息？顺便说一句，您可以在 Android 上使用底层识别引擎 ( [zinnia](http://zinnia.sourceforge.net) )，并且它的许可证是许可的。您只需使用 NDK 编译并编写 JNI 包装器。它适用于任何语言，您只需要针对中文进行培训。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-27T15:42:48.383

还有HanziLookup，一个不错的可以识别中文手写输入的ole'Java Swing组件：http: [//kiang.org/jordan/software/hanzilookup/](http://kiang.org/jordan/software/hanzilookup/)

最近有 HanziLookupJS，一个带有更新算法的 Javascript 端口，一个替代的新数据集：[https ://github.com/gugray/HanziLookupJS](https://github.com/gugray/HanziLookupJS)

两者都是开源的并且非常简单，以防您需要将它们移植到不同的平台。

# iphone - 在 iPhone 上跟踪 Facebook 应用程序

> ID：10641753
> 
> 赞同：0
> 
> 时间：2012-05-17T18:49:26.217
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我为我的 iphone 应用程序设置了 Facebook 连接，并且能够成功发送应用请求。我想要做的是跟踪 apprequest 收件人何时单击通知以安装我的应用程序或打开我的应用程序。

当收件人已经安装了应用程序时，我可以通过查看 AppDelegate 中“应用程序 openURL”方法中的 URL 来跟踪他们从 Facebook 打开了应用程序。但是，如果收件人没有安装我的应用程序，单击通知会将他们带到应用程序商店以安装我的应用程序。无论如何，我是否可以跟踪此安装来自 FB apprequest？或者假设他们没有安装我的应用程序，有没有办法让我跟踪它？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:33:52.890

截至 2012 年 5 月 22 日，无法准确跟踪来自 Facebook 的安装，因为 iTunes 会截断 URL。一位 FB 员工向我证实了这一点。

一个粗略的解决方法是保存过去 X 小时左右发送请求的所有 fbuid。如果使用您的应用程序 FB 的任何人在该时间范围内使用匹配的 fbuid 连接，您只需假设安装来自原始 FB 请求。

# emacs - Emacs 自动完成不会更新 C++ 建议

> ID：10641757
> 
> 赞同：2
> 
> 时间：2012-05-17T18:49:37.510
> 
> 标签：emacs, autocomplete

我为 Emacs 设置了自动完成功能，对于 elisp，它工作得非常好。我已将其设置为使用 ctags 在 C++ 文件中完成，并且建议按预期显示。但是，它不会在我输入时更新建议。例如，如果我输入：

```
vector<string> s;
s. 
```

它暗示“在”。但是，如果我添加它使其看起来像：

```
vector<string> s;
s.push 
```

该建议不会更新，并且仍然显示“at”作为第一个建议，而不是“push_back”。

我是 Emacs 新手，几乎没有 elisp 知识，我想知道如何配置自动完成功能，以便在我键入时更新 C++ 建议。

# ruby-on-rails - 什么 Rails Active Record Migration 数据类型用于合同的持续时间？

> ID：10641766
> 
> 赞同：1
> 
> 时间：2012-05-17T18:50:08.387
> 
> 标签：ruby-on-rails, postgresql, activerecord

我想在我的应用程序的数据库中捕获合同条款。我正在使用带有rails 3的postgres。期限是合同的期限。输入的一些示例可能是 5 年、3 年半或 2 年 3 个月。我通常希望能够以年和月为单位捕捉持续时间。我应该使用什么数据类型来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T00:18:42.010

Postgresql 支持一种`interval`数据类型。

[http://www.postgresql.org/docs/9.1/static/datatype-datetime.html](http://www.postgresql.org/docs/9.1/static/datatype-datetime.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:04:08.160

我认为您只需要捕获月份（作为整数），或者有 2 个单独的字段。一年和几个月各一个。您可以将月份实现为下拉菜单，以便只有 0 到 11 是可接受的值。

最后一个选项是使用 datetime，它比你想要的要精确得多，所以我不建议这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T19:16:56.427

我会使用两个日期时间属性，start_date 和 end_date，这样您以后可以决定如何以您想要的任何方式表达合同条款，年/月、日、分钟、秒，无论您想要什么。

您可以定义一个名为 term 的伪属性，即

```
class Contract < ActiveRecord::Base
  def term
    return self.end_date - self.start_date
  end
end 
```

term 会以秒为单位，你可以做一些简单的数学运算并返回月份、年份和月份等。你也可以使用 DateHelper，即

```
distance_of_time_in_words(@contract.start_date,@contract.end_date) 
```

将打印一个近似字符串，如“1 年”或“3 年”、“大约 1 年”等。

# sql - SQL同时选择和计数

> ID：10641768
> 
> 赞同：3
> 
> 时间：2012-05-17T18:50:14.033
> 
> 标签：sql, select, count

我正在尝试从 stuff 中选择所有内容并计算 morestuff 中的项目总数，其中 stuff id = morestuff id。

```
select *,
    COUNT(morestuff.items) as total
from stuff,
    morestuff
where stuff.id = '{$id}'
    and morestuff.id = stuff.id 
```

显然我的查询有问题，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:52:49.620

```
SELECT s.*, coalesce(ms.Count, 0) as Count
FROM stuff s
left outer join (
    select id, count(*) as Count
    from morestuff
    group by id
) ms on s.id = ms.id
WHERE s.id='{$id}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:37:34.670

这可能是另一种选择：

```
select
  *, (
    select count(*)
    from morestuff
    where morestuff.id = stuff.id
      ) as total
from stuff
where id = '{$id}' 
```

# html - 使用xsl填充html表格中的空行

> ID：10641769
> 
> 赞同：0
> 
> 时间：2012-05-17T18:50:16.823
> 
> 标签：html, css, xml, xslt, html-table

我想使用 XML 作为输入和 xsl 作为转换语言来创建多个 html 表格页面。现在这些表格应该总是有一个固定的高度，无论是一排还是十排。我无法让它与 CSS（最小高度）一起使用。所以我想知道，是否有可能让 xsl 始终输出十行并添加空行以防万一少于十行或添加行以防 XML 中存在多于十行并因此调整表的大小。

有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:30:02.503

你肯定能做到。当你没有足够的数据时，我可以向你展示如何将你的数据拆分为每张有十行的表，用虚拟行填充最后一行（或者可能是唯一一行）。它应该可以帮助你去你需要去的地方（没有示例 XML 输入和所需的 HTML 输出，这是我能做的）

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="html" encoding="UTF-8"/>

    <xsl:template match="/">
        <xsl:apply-templates select="data/row[position() mod 10 = 1]" mode="newtable"/>
    </xsl:template>

    <xsl:template match="row" mode="newtable">
        <table>
            <xsl:apply-templates select="."/>
            <xsl:apply-templates select="following-sibling::row[position() &lt; 10]"/>
            <xsl:call-template name="dummy-rows">
                <xsl:with-param 
                       name="how-many" 
                       select="9 - count(following-sibling::row[position() &lt; 10])"/>
            </xsl:call-template>
        </table>
    </xsl:template>

    <xsl:template match="row">
        <tr><td><xsl:value-of select="."/></td></tr>
    </xsl:template>

    <xsl:template name="dummy-rows">
        <xsl:param name="how-many" select="0"/>
        <xsl:if test="$how-many &gt; 0">
            <tr><td>dummy</td></tr>
            <xsl:call-template name="dummy-rows">
                <xsl:with-param name="how-many" select="$how-many - 1"/>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

这个想法是你从`table`每组 10 个节点的“第一个”节点开始。这就是`[position() mod 10 = 1]`谓词。当您掌握表的起点时，您将创建表边界并以正常模式再次处理该节点。然后你会得到它后面的九个数据行。最后，根据需要添加尽可能多的虚拟节点，以确保每个表中总共有 10 个。`dummy-rows`模板是一个递归。所以这里有两种技术：拆分集合`position() mod`并使用 a`recursion`来实现迭代。

**更新**如果您只需要确保表中至少有十行，那么您不需要拆分逻辑：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="html" encoding="UTF-8"/>

    <xsl:template match="/">
        <table>
            <xsl:apply-templates select="data/row"/>
            <xsl:call-template name="dummy-rows">
                <xsl:with-param 
                    name="how-many" 
                    select="10 - count(data/row)"/>
            </xsl:call-template>
        </table>
    </xsl:template>

    <xsl:template match="row">
        <tr><td><xsl:value-of select="."/></td></tr>
    </xsl:template>

    <xsl:template name="dummy-rows">
        <xsl:param name="how-many" select="0"/>
        <xsl:if test="$how-many &gt; 0">
            <tr><td>dummy</td></tr>
            <xsl:call-template name="dummy-rows">
                <xsl:with-param name="how-many" select="$how-many - 1"/>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

你可以用这样的输入试试这个：

```
<data>
  <row>1</row>
  <row>1</row>
  <row>3</row>
</data> 
```

或这样的输入：

```
<data>
    <row>1</row>
    <row>2</row>
    <row>3</row>
    <row>4</row>
    <row>5</row>
    <row>6</row>
    <row>7</row>
    <row>8</row>
    <row>9</row>
    <row>10</row>
    <row>11</row>
    <row>12</row>
</data> 
```

在这两种情况下，结果都符合预期。尝试一下。你应该可以从这里拿走它。

# python - 如何在随机 lxml.html.Element （与根相对）的上下文中使用 xpath() ？

> ID：10641772
> 
> 赞同：1
> 
> 时间：2012-05-17T18:50:42.020
> 
> 标签：python, xpath, lxml

stu@sente ~ $ ipython

```
In [1]: import lxml.html

In [2]: root = lxml.html.parse("http://docs.python.org/").getroot()

In [3]: print "there are %d links in the document" % len(root.xpath('//a'))
there are 40 links in the document

In [4]: for table in root.xpath('//table'):
   ...:     print "there are %d links found" % len(table.xpath('//a'))
   ...:
there are 40 links found
there are 40 links found
there are 40 links found

In [5]: print "but there are only %d links within the three tables" % len(root.xpath('//table//a'))
but there are only 21 links within the three tables

In [6]: # can I somehow get the 'table.xpath()' which starts the xpath() query at the table node?

In [7]: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:53:28.150

在 XPath 中，`.`表示上下文元素：

```
>>> for table in root.xpath('//table'):
...     print "%d links in this table" % len(table.xpath(".//a"))
...     
12 links in this table
5 links in this table
4 links in this table 
```

# android - 在 Seekbar 上注册 LongClick 侦听器

> ID：10641779
> 
> 赞同：5
> 
> 时间：2012-05-17T18:51:33.720
> 
> 标签：android

在android中，我可以在搜索栏上注册一个长按监听器吗？

我已经这样做了：

```
mySeekBar.setLongClickable(true);
mySeekBar.setOnLongClickListener(new OnLongClickListener() {
   public boolean onLongClick (View v) {
    Log.d("TEST", "Get a long click event!!!!!!!!!!!!");
 }
}); 
```

但我根本看不到我的调试打印语句。关于如何实现它的任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T01:39:47.807

虽然文档中没有提到，但我通过实验确定 SeekBars 不支持单击和长按侦听器。ProgressBars 支持它们。

挖掘源代码显示了原因：`SeekBar.onTouchEvent()`不调用`super.onTouchEvent()`. 它就在`View.onTouchEvent()`其中，`performClick()`并`performLongClick()`在适当的时候被调用。因此，处理长按 a 的唯一方法`SeekBar`是手动检测它们。

我自己的想法是，拥有一个长按处理程序 a`SeekBar`实际上没有意义。如果用户拖动“拇指”的时间超过了长按阈值/延迟，那么您突然长按可能并不意味着长按。您可以在每次移动拇指时取消和重置延迟，需要长按几秒钟才能恰好在一个位置。但是很少有完全静止的；事实上，握住拇指几秒钟不移动它是很困难的。因此，您可以对重置延迟的拇指位置进行最小更改。如果必须，我会这样做，但我必须说这是一种非常奇怪的用户体验。在 Android 中有很多地方，用户希望长按很重要，但 a`SeekBar`不是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:28:38.580

AFAICT 这不可能与`OnLongClickListener`. 文档并没有说它**不起作用**，但我从未见过任何这样的例子（我自己也从来没有让它起作用）。

一种可能的解决方法（取决于您想要实现的目标）可能是使用`OnSeekBarChangeListener`处理长点击`onStartTrackingTouch`/`onStopTrackingTouch`回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:58:22.933

或者，您可以继承 SeekBar 并实现您自己的 onLongClick 侦听器。这不是为胆小的人准备的，但[特里·朗](http://www.cnblogs.com/TerryBlog/archive/2010/08/31/1813481.html)似乎是绕道而行。（至少我*认为*他有，我的普通话很生疏。）他列出了四个步骤：

*   子类 SeekBar，覆盖 setOnLongClickListener 来杀死它
*   创建一个在所需的“长按”时间后终止的线程
*   创建线程终止时触发的“长按”事件
*   重写 SeekBar OnSeekBarChangeListener 事件处理程序来处理事件

我没有尝试过他的代码，但基本想法看起来很合理。我原以为他会尝试在 AbsSeekBar 中执行此操作以避免覆盖 SeekBar 的 OnSeekBarChangeListener，但他没有说明他为什么不这样做（再次，AFAICT）。

不过，对我来说听起来有点矫枉过正。ProgressBar*确实*支持长按；你能以某种方式使用它吗？

# sql - 我可以在where子句中添加if子句吗

> ID：10641783
> 
> 赞同：0
> 
> 时间：2012-05-17T18:51:40.210
> 
> 标签：sql, sql-server, tsql, stored-procedures

在存储过程中，我有：

```
@parameter int 
```

基于这个参数，我得到一些数据，它可以是 -1 或大于 0。

问题是，如果它是 -1，我根本不希望这个参数出现在 where 子句中。

所以我想做的是：

```
IF @parameter = -1 THEN
WHERE ...
ELSE
where ... AND Column = @parameter 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T18:54:03.407

通常，您会像这样应用该约束：

```
WHERE [...] AND (@parameter = -1 OR Column = @parameter) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:55:05.650

```
where 
  @parameter != - 1 AND Column = @parameter 
```

Dan J 和我的回答之间的区别在于，如果 @parameter 为 -1，则没有任何匹配项。Dan J 返回所有内容，并且是您可能想要的行为。

# c# - 如何在 MVC 中处理基于操作的权限

> ID：10641790
> 
> 赞同：1
> 
> 时间：2012-05-17T18:52:02.457
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, security, permissions

我是 MVC 的新手，我想获得有关如何在我的应用程序中最好地处理基于操作的权限的建议。

我目前在控制器级别检查了一些全局权限，这些权限可以很好地呈现当前用户可以访问的视图等。

但是，一旦呈现视图，我想做出诸如“启用删除按钮，仅当用户对当前选定的项目具有删除权限”之类的决定时，这些权限不再是全局的，而是基于上下文的选定的对象。

我应该如何编写代码来处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:17:45.827

默认情况下，您的视图可以访问用户对象。

如果 User.IsInRole("myDeleteRole")，您可以检查视图。

或者

```
@if(User.IsInRole("MyDeleteRole"))
{
<input type="subtmt" value="Delete">
} 
```

我不知道这是否是最好的方法，但这是我过去所做的

我想另一种方法是根据用户拥有的权限编写单独的视图。这样你就可以在控制器上执行逻辑并将用户发送到指定的视图

```
if(User.IsInRole("MyDeleteRole")
{
return View("MyDeleteView", vm)
}
else
{
return View("NoDeleteView", vm)
} 
```

# python - 如何对 django 的 ManyRelatedManager 进行验证？

> ID：10641791
> 
> 赞同：0
> 
> 时间：2012-05-17T18:52:13.000
> 
> 标签：python, django, django-related-manager

当我将实例添加到 M2M 关系时，我想更改行为，可能会覆盖，以便我可以执行以下操作：

```
try:
    my_instance.one_field_set.add( another_instance )
except ValidationError:
    # do something 
```

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T23:16:05.280

是的，但不要那样做。

1) 使用可以为您的 M2M 关系使用显式[`intermediate`](https://docs.djangoproject.com/en/1.4/topics/db/models/#intermediary-manytomany)模型，并为其提供自定义方法[`manager`](https://docs.djangoproject.com/en/1.4/topics/db/managers/#django.db.models.Manager)，您可以在其中替换`create`方法。

2) 不过，在我看来，最好的方法是在其中一个模型上使用一个实例方法`add_something`，该方法提供必要的验证和异常处理逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:41:12.793

我发现了一个类似的问题，这不是我想要的，但可以作为一种解决方法。

```
@receiver(m2m_changed, sender=MyModel.my_field.through)
def check(sender, **kwargs):
    if kwargs['action'] == 'pre_add':
        add = AnotherModel.objects.filter(pk__in=kwargs["pk_set"]) # instances being added
        # your validation here... 
```

感谢[mamachanko](https://stackoverflow.com/users/213000/mamachanko)提出的[问题](https://stackoverflow.com/questions/2881368/django-how-to-override-a-related-sets-add-method)。

# android - Android，如何显示来自 onBufferingUpdate 的缓冲百分比

> ID：10641793
> 
> 赞同：6
> 
> 时间：2012-05-17T18:52:19.617
> 
> 标签：android, stream, media-player, buffering

我有一个播放互联网流的媒体播放器服务，但我在如何在我的 xml 中显示缓冲百分比时遇到问题，目前我只是显示一条消息，因为我尝试过的所有方法都给了我一个静态长号。这是我的播放器服务中的代码：

```
@Override
public void onBufferingUpdate(MediaPlayer mp, int percent) {
    setBufferPosition(percent * getMusicDuration() / 100);
    myMain.EstadoRadio.setText(" Reproductor \n Buffering... ");
} 
```

正如你所知道的，EstadoRadio 是我的 xml 中的一个文本视图，它在我想要显示流的缓冲 % 的 myMain 活动中工作。谢谢你的帮助。

编辑：我看到在大多数情况下使用 onBufferingUpdate(MediaPlayer mp, int percent) 中的“百分比”，如下所示：

```
myMain.EstadoRadio.setText(" Reproductor \n" + percent + "%"); 
```

但在我的情况下，百分比总是-2147483648，我不知道为什么，或者为什么它没有改变或更新，这是我的日志猫的一点：

```
05-17 13:34:37.005: V/MediaPlayer(25382): message received msg=3, ext1=-2147483648, ext2=0
05-17 13:34:37.005: V/MediaPlayer(25382): buffering -2147483648
05-17 13:34:37.005: V/MediaPlayer(25382): callback application
05-17 13:34:37.005: V/MediaPlayer(25382): getDuration
05-17 13:34:37.015: V/MediaPlayer(25382): back from callback
05-17 13:34:38.016: V/MediaPlayer(25382): message received msg=3, ext1=-2147483648, ext2=0
05-17 13:34:38.016: V/MediaPlayer(25382): buffering -2147483648
05-17 13:34:38.016: V/MediaPlayer(25382): callback application
05-17 13:34:38.016: V/MediaPlayer(25382): getDuration
05-17 13:34:38.016: V/MediaPlayer(25382): back from callback 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:08:30.023

您看到的数字是带符号的 32 位 int 的最小值。我会猜测并说Android无法返回百分比，实际上是在给你垃圾数据。

我会用远程 mp3 URL 替换您的 Internet 流，以查看缓冲是否获得了真正的价值（因为这将确认您的代码的其余部分不应该受到责备。）

编辑：关于 OnBufferingUpdateListener 的 Android 文档解释了渐进式 http 下载的用例，而不是无尽的互联网流。

我不相信使用 Android 中的内置侦听器可以显示缓冲百分比。如果不打开 Android 源代码来查找 MediaPlayer 类决定开始播放流的时间（如果它们甚至提供回调），我怀疑这个问题会得到解决。

但是，如果有人可以提供解决方案/解决方法，我会对它感兴趣。

[http://en.wikipedia.org/wiki/Integer_(computer_science](http://en.wikipedia.org/wiki/Integer_(computer_science) )

[http://developer.android.com/reference/android/media/MediaPlayer.OnBufferingUpdateListener.html](http://developer.android.com/reference/android/media/MediaPlayer.OnBufferingUpdateListener.html)

# asp.net - asp.net mvc3，为什么我需要为我的控制器类构造函数

> ID：10641797
> 
> 赞同：2
> 
> 时间：2012-05-17T18:52:35.123
> 
> 标签：asp.net, asp.net-mvc-3, inversion-of-control

我正在学习asp.net mvc3。我在网上找到的一个例子是向我展示如何使用 IOC。

```
 public class HomeController : Controller
            {
                private IHelloService _service;
                public HomeController():this(new HelloService())
                {}

                public HomeController(IHelloService service)
                {
                    _service = service;
                }
            } 
```

此示例中有两个构造函数。我理解第二个。第一个我明白这是为了什么，但对我来说，这似乎是额外的代码，你永远不需要它。

有人可以向我解释添加第一个构造函数的意义。

```
 public HomeController():this(new HelloService())
                {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:55:22.670

当 MVC 框架实例化一个控制器时，它使用默认（无参数）构造函数。

默认情况下，您正在注入一个具体的`IHelloService`实现。这将在用户导航到操作时使用。

单元测试将使用重载并传入模拟`IHelloService`实现，而不是调用默认构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T18:54:47.653

如果您不使用为您注入它的依赖注入框架，它会很有用。通过这种方式，您不必手动注入对象，对象将自行处理。

当然，第二个构造函数对于在单元测试时注入自定义对象很有用。

通常需要这样做：

```
IFoo foo = new Foo();
IBar bar = new Bar(foo); 
```

当您的构造函数创建一个默认对象时，您可以这样做：

```
IBar bar = new Bar(); 
```

然后 Bar 将创建一个 Foo 并将其注入自身。

# php - 如何将 JQuery UI 可排序表位置保存到 MySQL 数据库？

> ID：10641807
> 
> 赞同：1
> 
> 时间：2012-05-17T18:53:45.760
> 
> 标签：php, javascript, jquery, jquery-ui

我的应用程序所做的是，通过 MySQL 将项目列表加载到表中。

我可以很好地加载表，但我需要这样做，以便可以重新排列表中的项目并将它们的位置存储回 MySQL 服务器。

这是主页（workshops.php）：

```
<?php
    require_once("connection.php");    
?>
<html>
    <head>
        <style type="text/css">
            body { position: relative; }
            #content { width: 742px; height: auto; position: relative; margin-left: auto; margin-right: auto; }
        </style>
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="js/jquery.js"></script>
  <script src="js/jquery-ui.js"></script>

  <script>
    $(document).ready(function() {
        var fixHelper = function(e,ui){
            ui.children().each(function() {
                $(this).width($(this).width());
            });
            return ui;
        };
        $("#sortable tbody.contenet").sortable({
            helper: fixHelper,
            stop: function(event, ui)
            {alert("something changed");
                 //create an array with the new order
                order = $.map($(this).find('input'), function(el){
                    for (j=0; j < $(el).length; j++){
                        return $(el).attr('id') + '=' + j;
                    }
                });
                var message = "";
                for(i=0; i < order.length; i++){
                    message = message + order[i];
                    message = message + " ";
                }
                alert(message);
                //sorder = order.serializeArray();
                //alert(sorder);

                    $.ajax({
                    url: "updateworkshops.php",
                    type: "post",
                    data: order,
                    error: function (){
                        alert("theres an error with AJAX");
                    },
                    success: function(){
                        //alert("Saved.");
                    }
                });

            }

        });
    });

  </script>
    </head>
    <body>
        <div id="content">
            <p>Click on "+ Create new workshop" to create a new workshop".</p>
            <p>Click on the name of a workshop to add dates and times for when it is available and/or to make changes to it.</p>
            <br />
            <table>
                <!--Create Workshop-->
                <tr>
                    <td width="25%" bgcolor="6BF26B"><a href="create.php">+ Create new workshop</a></td>
                </tr>
                <tr><td bgcolor="FFFF00"><a href="settings.php">~ Edit settings</a></td>
                </tr></table><br />
                <form id="pickles" action="updateworkshops.php" method="post">
                <table id="sortable"><tbody class="contenet">
                <!--List Workshops-->
                <?php
                    $query = "SELECT * FROM workshops ORDER BY position";
                    $result = mysql_query($query);
                    while ($row = mysql_fetch_assoc($result)) {
                        echo "<tr bgcolor='{$row['color']}'>"; echo "\r\n";
                        echo "<td><input type=\"hidden\" id=\"order_".$row['id']."\" name=\"order_".$row['id']."\" value=\"".$row['position']."\" /><label class=\"handle\">[X]</label></td>"; echo "\r\n";
                        echo "<td><a href='edit.php?workshop_id={$row['id']}'>{$row['name']}</a></td>"; echo "\r\n";
                        echo "<td>{$row['description']}</td>"; echo "\r\n";
                        echo "</tr>"; echo "\r\n";
                    }
                ?>
                </tbody>
            </table>
            <input type="submit" name="submit" value="Submit" />
            </form>
        </div>
    </body>
</html>
<?php mysql_close(); ?> 
```

这是将数据发布到的 updateworkshops.php 页面：

```
<?php
    require_once("connection.php");

if(isset($_POST['submit'])) {
    while(list($key,$value) = each($_POST)){
        if(substr($key,0,5) == "order_"){
            $id = trim($key,'order_');
            $sql = 'UPDATE workshops SET position = '.$value.' WHERE id = '.$id;
            if(!mysql_query($sql)) {
                echo "SOMETHING WENT WRONG";
            }
        }
    }
} 
mysql_close();
?> 
```

当表格完成移动项目时，我做了它，以便它提醒新数组它将发布到 updateworkshops.php 页面。当我这样做时，所有 order_# 都等于 0，并且这些值不会存储在数据库中。

我觉得我错过了一些东西，但在过去的几个小时里，我一直在尝试修改这段代码。也许我不熟悉Javascript并没有帮助......但我认为我有正确的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:17:33.120

尝试做这样的事情：

```
var sortable = $("#sortable tbody.contenet").sortable({
    helper: fixHelper,
    stop: function(event, ui) {
        //create an array with the new order
        order = $(this).find('input').map(function(index, obj) {
            var input = $(obj);
            input.val(index + 1);
            return input.attr('id') + '=' + (index + 1);
        });
        $.ajax({
            url: "updateworkshops.php",
            type: "post",
            data: order,
            error: function() {
                console.log("theres an error with AJAX");
            },
            success: function() {
                console.log("Saved.");
            }
        });
    }
});​ 
```

您需要做的就是使用 map 对输入进行循环，使用循环的索引作为顺序。此代码还更新了输入值以具有新的位置值。

也是学习[firebug](http://getfirebug.com)或[webkit 开发者工具](https://developers.google.com/chrome-developer-tools/docs/overview)和[console.log](http://getfirebug.com/logging)而不是使用警报的时候了。警报不是调试工具。

# java - Convert CAF file to WAV in Java?

> ID：10641813
> 
> 赞同：-1
> 
> 时间：2012-05-17T18:54:13.673
> 
> 标签：java, android, wav, caf

We have a large number of Apple Core Audio / CAF files that we'd like to use on our Android client, so it would be helpful to convert from CAF to WAV in Java.

Are there any existing libs or open source projects that can help with this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:05:17.527

是否有理由需要在 Java 中执行此操作？如果是静态转换为 WAV（即，您只打算将这些文件转换一次），则应使用[ffmpeg](http://www.ffmpeg.org/)进行转换。如果您出于某种原因需要实际转换 Android 应用程序中的文件，那么您可能不走运。看起来苹果在 5 年前就放弃了对 CAF的*唯一Java 支持。*

# php - php5.4 自动加载特征

> ID：10641824
> 
> 赞同：17
> 
> 时间：2012-05-17T18:55:00.223
> 
> 标签：php, autoload, traits

php5.4 中的特征是否会自动加载？

我还没有一个可以测试的环境，但我在 php.net 的 __autoload 或特征页面上看不到任何提及它，但似乎特征在某些方面表现得像类。

有没有人试过这个？

**更新：**

我在这里找到了一个请求： [https](https://bugs.php.net/bug.php?id=61265) ://bugs.php.net/bug.php?id= 61265（2012-03-03 13:10 UTC）

这似乎表明它确实有效，但没有明确表示。任何人都可以确认直接 __autoload() 将因缺少的特征而被调用吗？

**更新：**已确认 - 它按预期工作 - __autoload 将获取特征，尽管让 php5.4 第一次工作似乎是更大的挑战。

谢谢，我的流

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-17T19:04:09.423

根据手册，该[**`trait_exists()`**](http://fr.php.net/trait_exists)函数将布尔值作为第二个参数，与自动加载有关；这似乎表明特征和自动加载不是两个不相容的想法。

此外，如果您查看该[**`trait_exists()`**](http://lxr.php.net/opengrok/xref/PHP_5_4/Zend/zend_builtin_functions.c#1284)函数的源代码，您会看到一段代码，由第二个参数限定，看起来与您在[**`class_exists()`**](http://lxr.php.net/opengrok/xref/PHP_5_4/Zend/zend_builtin_functions.c#1200).
所以，我要第二次说特征和自动加载不是不兼容的想法;-)

*（我当前的计算机上没有安装 PHP 5.4，所以我无法自己测试——但是，查看代码......）*

* * *

**[编辑]**好的，我刚刚编译了**PHP 5.4.3**，当前的稳定版本：

```
$ /usr/local/bin/php --version
PHP 5.4.3 (cli) (built: May 17 2012 21:11:42)
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies 
```

让我们尝试以下一小段代码，它保存为`temp-2.php`，并尝试使用未在此文件中声明的特征：

```
spl_autoload_register(function ($name) {
    echo "AUTOLOAD :: ";
    var_dump($name);
});

class MyClass {
    use MyTrait;   // Let's try to use a trait that is not declared in this file
}

$obj = new MyClass();
$obj->plop(); 
```

基本上，如果自动加载适用于特征，`"AUTOLOAD"`则应该显示我的特征的名称。

所以，让我们尝试执行那部分代码——这是我得到的结果：

```
$ /usr/local/bin/php ./temp-2.php
AUTOLOAD :: string(7) "MyTrait"

Fatal error: Trait 'MyTrait' not found in /.../temp-2.php on line 13 
```

因此，调用了自动加载函数*（这里是一个匿名函数——但这不会改变任何事情）* ...
...这意味着**，在 PHP 5.4.3 中，特征受 autoloading 约束**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:24:39.160

也确认了：

```
PHP 5.4.3-1~dotdeb.0 (cli) (built: May  8 2012 20:49:26)

Fatal error: Trait 'x' not found in /.../index.php on line 12 
```

它们被视为类，因为它们被实现为（修改？）类。

例如，它们目前具有类的残留行为：它们可以拥有属性。

理论上他们不应该，你也不应该依赖他们拥有这种能力。未来很可能会被淘汰。

# objective-c - UILabel text from touchesbegan event

> ID：10641826
> 
> 赞同：0
> 
> 时间：2012-05-17T18:55:08.133
> 
> 标签：objective-c, uiview, uilabel, touchesbegan

By what method possible can I discover the text from a UILabel using the touchesBegan event?

The current code so far is...

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

     UITouch *touch = [touches anyObject];
     CGPoint locationPoint = [[touches anyObject] locationInView:self.view];
     UIView* viewYouWishToObtain = [self.view hitTest:locationPoint withEvent:event];

     ////
     //insert code here to get currentLabel - not using viewYouWishToObtain.tag
     ////

     NSLog(@"text: %@", currentLabel.text);

     } 
```

I wish I could simply write these... but these are all nefarious for different devious reasons

```
UILabel* currentLabel = [self.view hitTest:locationPoint withEvent:event];
NSLog(@"text: %@", currentLabel.text);

NSLog(@"text: %@",[self.view hitTest:locationPoint withEvent:event].text);

UILabel *newlabel = (UILabel*) event;
NSLog(@"text: %@", newlabel.text); 
```

This is almost functionally equivalent code, but the general functionality is now dependent on NSDictionary.

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSArray* myword=[NSArray arrayWithObjects:@"h",@"e",@"l",@"l",@"o",nil];

    NSDictionary *letterToNumber;
    letterToNumber = [NSDictionary dictionaryWithObjectsAndKeys:
                @"0", @"a", 
                @"1", @"b", 
                @"2", @"c", 
                @"3", @"d",
                @"4", @"e", 
                @"5", @"f", 
                @"6", @"g", 
                @"7", @"h", 
                @"8", @"i", 
                @"9", @"j", 
                @"10", @"k", 
                @"11", @"l", 
                @"12", @"m", 
                @"13", @"n", 
                @"14", @"o", 
                @"15", @"p", 
                @"16", @"q", 
                @"17", @"r", 
                @"18", @"s", 
                @"19", @"t", 
                @"20", @"u", 
                @"21", @"v", 
                @"22", @"w", 
                @"23", @"x", 
                @"24", @"y", 
                @"25", @"z", 
                nil];    

    NSUInteger characterCount = [myword count];

    for (int i=0;i<characterCount ;i++){
    UILabel*myLabel;
    myLabel=[[UILabel alloc] initWithFrame: CGRectMake((1+i)*35.0, 100.0, 30.0, 30.0)];
    myLabel.backgroundColor = [UIColor whiteColor];
    myLabel.text= [myword  objectAtIndex:i];
    myLabel.userInteractionEnabled = YES;
    myLabel.tag=100+[[letterToNumber objectForKey:[myword objectAtIndex:i]] integerValue];        
    [self.view addSubview:myLabel];     
    }
 }

   - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
      UITouch *touch = [touches anyObject];
      NSLog(@"1");

      CGPoint locationPoint = [[touches anyObject] locationInView:self.view];
      UIView* viewYouWishToObtain = [self.view hitTest:locationPoint withEvent:event];

      NSArray*myarray;
      myarray = [NSArray arrayWithObjects:@"a",@"b",@"c",@"d",@"e",@"f",@"g",@"h",@"i",@"j",@"k",@"l",@"m",@"n",@"o",@"p",@"q",@"r",@"s",@"t",@"u",@"v",@"w",@"x",@"y",@"z",nil];

      NSUInteger temp = viewYouWishToObtain.tag;
      if (temp >= 100){
      NSLog(@"text: %@",[myarray  objectAtIndex:temp-100]);
      }

      if ([touch view] != viewYouWishToObtain && (viewYouWishToObtain.tag >= 100)) {
          if ([touch tapCount] == 2) {
          }
          return;
      }
  } 
```

Help with this coding problem would be great

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:39:07.583

只是出于好奇，您是否可以从使用 UILabel 切换到仅使用 UIButton 和自定义类型。那时它应该看起来就像一个 UILabel ，您可以正常连接触摸事件而不需要命中测试。我认为这会让你的事情变得容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:29:06.580

```
UILabel * label = [[UILabel alloc] init];
UITapGestureRecognizer * tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTapped:)];
[label addGestureRecognizer:tapGestureRecognizer]; 
```

然后使用 labelTapped 函数追溯标签并获取文本；）

# hibernate - 使用 Hibernate InheritanceType.JOINED 覆盖 ID

> ID：10641829
> 
> 赞同：1
> 
> 时间：2012-05-17T18:55:19.260
> 
> 标签：hibernate

鉴于以下情况：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@Table(name="TOP_TABLE")
public class BaseClass implements Serializable {

    private Long id;

    @Id
    public Long getId() {

    }
}

// PrimaryKeyJoinColumns
@Entity
@Table(name="TABLE_A")
public class ClassA extends BaseClass {

    @Id
    public Long getId() {

    }
}

@Entity
@Table(name="TABLE_B")
// Primary Key Join Columns
public class ClassB extends BaseClass {

    @Id
    public Long getId() {

    }

} 
```

我有两个问题：

*   在 InheritanceType.JOINED 中，子类可以覆盖父类的 id 吗？这是因为：

*   如果 Id 是通过序列生成的，每个子类的 id 是否可以有单独的序列生成器？

谢谢你的帮助。

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:33:25.257

子类不能覆盖 id，因为 id 在层次结构中只能定义一次。在 JPA 2.0 规范中，这被告知如下：

> 必须在作为实体层次结构根的实体类或作为实体层次结构中所有实体类的（直接或间接）超类的映射超类上定义主键。主键必须在实体层次结构中只定义一次。

对此也没有 Hibernate 特定的支持。唯一的事情是，@Id 在继承层次结构的叶子中可以做不同的事情是通过[PrimaryKeyJoinColumn](http://docs.oracle.com/javaee/6/api/javax/persistence/PrimaryKeyJoinColumn.html)为 id 列定义不同的名称。

# vhdl - vhdl multiplicationof 2 numbers

> ID：10641836
> 
> 赞同：0
> 
> 时间：2012-05-17T18:55:45.870
> 
> 标签：vhdl

![My code](../Images/ae99ada75092aab9bf200c79cbd8960c.png)I am a new at vhdl and i have to multiplication two unsigned vectors like we all did in high scool

so i wrote the program and it dose compile but the result is not good.

The logic looks ok but still it dose not work can any one help. I could not get how to place code here so please see the image attached.

Thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:50:47.677

在编写 VHDL 时，您首先需要考虑硬件。尽管各种语句可能看起来与您从其他语言中知道的相似，但其中许多语句的行为不同，因为它们被映射到硬件并并行而不是按顺序进行评估。

例如，`for`VHDL 中的循环不会遍历循环，而是复制循环内容并并行评估所有这些内容。所以你积累的想法是`temp`行不通的，因为所有的值都`temp1`将同时可用，而不是一个接一个。

处理乘法的简单方法是只使用`*`运算符，因为许多合成器会选择它并自动实例化必要的硬件。我认为这是某种形式的练习，您需要自己实现功能 - 所以只需 `for`放弃循环并将中间结果存储在它们自己的变量中，然后最后将它们全部加起来。

# c# - 如何在 Monotouch 中创建多级表？

> ID：10641838
> 
> 赞同：1
> 
> 时间：2012-05-17T18:56:01.427
> 
> 标签：c#, .net, ios, xamarin.ios

我是单点触控 iOS/单点触控开发的新手。我想在我的应用程序中制作多级表，但不知道如何......我尝试搜索网页，但一无所获（除了 2009 年的古代样本不起作用）。

让我们有表：

*   第 1 行
*   第 2 行
*   第 3 行

用户点击 row2 并展开：

*   第 1 行
*   第 2 行
*   [子行1]
*   [subrow2]
*   第 3 行

如果用户再次点击 row2，它会折叠。

我知道，实现应该很容易，但我现在还没有这方面的经验。得到一些帮助会很棒！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:30:00.660

iOS中没有像 TreeView 一样的[内置/默认控件（例如在 System.Windows.Forms 中）。](https://stackoverflow.com/q/3762356/220643)这主要是因为这需要比 iPhone/iPod 更多的屏幕空间。

常见的解决方案是使用表格，例如在您的单元格中添加一个“>”（可以展开）并向新控制器显示数据（表格或其他内容）。

另一种选择是找到（并绑定）一些提供类似树视图的控件的自定义控件（在上一个链接中列出了一些），或者像@Jason 所说的那样，从 an`UITableView`和相关类型中实现类似的东西。

# android - Possible to make overlay view scree-wide over 2 different elements?

> ID：10641839
> 
> 赞同：0
> 
> 时间：2012-05-17T18:56:04.500
> 
> 标签：android, android-layout, overlay

I have a layout looking like this.

![](../Images/5d0d47c2f1287140394dbc82888ceecd.png)

The bottom part are the tabs and this is one of the tabs. It has a `LinerLayout` on the left and `ListView` on the right side. The list view goes beyond screen height and elements are scrollable.

Is it possible to locate red-colored `LayoutView` over these element at this specific location without much redesigning a layout?

# forms - div 上的可见性随时间变化（联系表 7）

> ID：10641842
> 
> 赞同：0
> 
> 时间：2012-05-17T18:56:18.697
> 
> 标签：forms, wordpress, contact

我正在使用 WordPress。我的联系表格插件是“联系表格 7”。如果您的电子邮件失败或成功，它会显示成功或不成功。我想将javascript附加到它并在我的联系人中间找到它，所以如果它失败了框打开说它失败并且它消失了，同样的成功。如果邮件发送成功，我也希望页面更改为主页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:09:09.600

似乎这可以很容易地用 jQuery 完成，不是吗？只需查找要单击的提交按钮，验证，然后运行您的操作。
您可以使用警报，或者在您更改为 display:block 的页面上有一个隐藏的 div，在其上抛出一个计时器以隐藏它（或关闭按钮），然后将 html 文本设置为“成功”或“分别失败。然后当 div 设置为关闭并成功时，抛出一个 url 重定向。
我知道这很模糊，但不确定您的专业水平。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:02:14.180

如果你想要这个只是为了表单的正常使用，而不是为了一些花哨的特殊功能——Contact form 7已经有了这个功能。

默认消息为（红框）“发送您的消息失败，请稍后再试或通过其他方式联系管理员。”

您可以在设置中更改此消息。

# css - 侧边栏中的填充问题

> ID：10641843
> 
> 赞同：0
> 
> 时间：2012-05-17T18:56:35.057
> 
> 标签：css, sidebar

我正在这个网站上工作。问题是我试图添加`padding-top`到侧边栏但它不起作用。请帮忙。谢谢

```
#sidebar{
    width:300px;
    display:inline;
    padding-top:400px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:58:56.850

填充不适用于`inline`元素 - 将其更改为`inline-block`

# php - 使用 header() 调用，用于选择目录，是否会导致 2 次往返服务器？

> ID：10641846
> 
> 赞同：2
> 
> 时间：2012-05-17T18:56:47.163
> 
> 标签：php

**回复：[1](https://stackoverflow.com/questions/10624791/is-there-a-way-to-make-transparent-invisible-php-redirects)**

```
<?php
    $uri = 'http://' . $_SERVER['HTTP_HOST'];
    $path = '/dev/source/class.ControlEntry.php';
    $string = $uri . $path;
    header('Location: '. $string ); 
```

我是否真的在访问我的服务器，然后重定向回客户端，然后调用新位置。这是访问位于上面 uri 和路径的我的网站的 2 次往返行程吗？

每个[php.net](http://www.php.net) header() 发送一个原始的 http 标头。

Xampp 使用与此类似的代码来指定源代码所在的目录。

但是，我正在考虑仅使用包含，这是相关[SO 帖子](https://stackoverflow.com/questions/10624791/is-there-a-way-to-make-transparent-invisible-php-redirects)中确定的最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:58:05.030

是的，发送“位置”标头会导致浏览器向该位置发出第二个请求。

有很多方法可以避免这种情况，包括使用您提到的包含。然而，重定向的优点是浏览器在地址栏中显示所需的 URL，而不是通过向他们发送数据来隐藏他们浏览到“错误”位置的事实。

家庭互联网连接的典型往返时间远低于 1 秒，因此如果您只这样做一次，用户不太可能注意到。也就是说，当人们的注意力持续时间很短并且只需点击几下即可访问 2000 万只猫的视频时，每一毫秒都很重要。

# javascript - js forward slash not printing

> ID：10641850
> 
> 赞同：0
> 
> 时间：2012-05-17T18:57:03.980
> 
> 标签：javascript, html, function

I want a javascript function to replace all the b's with an html `<br />` tag but it's only printing `<br>`. Here is the function:

```
var destination = source.replace(/b/g,"<br \/>"); 
```

It doesn't work, is it wrong? If so, could someone please show me how to do it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:00:36.030

**原来的**

没有理由`\`在字符串中。

```
var destination = source.replace(/b/g,"<br/>"); 
```

[jsFiddle 示例](http://jsfiddle.net/ATcpL/)

**编辑**

现在你用这段代码给出了一个示例小提琴

```
function gettext(){
    var input = document.getElementById("input").value;
    var value = input.replace("/b/g","<br/>");
    var output = document.getElementById("out").value = value;
} 
```

查看替换行

```
var value = input.replace("/b/g","<br/>"); 
```

它是一个字符串而不是正则表达式

```
"/b/g" 
```

它需要是

```
var value = input.replace(/b/g,"<br/>"); 
```

[带有您的代码的 jsFiddle 示例](http://jsfiddle.net/mVs9T/6/)

# php - MYSQL 按日期选择最后一个已知的行数据

> ID：10641852
> 
> 赞同：0
> 
> 时间：2012-05-17T18:57:14.620
> 
> 标签：php, mysql, database, select, charts

我一直在努力解决这个问题。我不确定 MYSQL 查询是做到这一点的最佳方式，但我不知所措。

我在某些日期为某些人输入了条目，但是他们并不总是在同一日期。例如：

```
Person     Date        Product
Mike     2012/12/1      Pants
Chris    2012/12/4      Shoes
Mike     2012/12/4      Pants
Julian   2012/12/5      Hat 
```

我将此表用于趋势报告，我需要选择一个日期范围，例如 2012/12/2 - 2012/12/10。我需要一张表格来显示每个人每天穿的衣服，这样我就可以看到任何一天的穿衣百分比。输出表看起来像这样：

```
Person     Date        Product
Mike     2012/12/1      Pants
Mike     2012/12/2      Pants
Mike     2012/12/3      Pants
Chris    2012/12/4      Shoes
Mike     2012/12/4      Shoes
Julian   2012/12/5      Hat
Mike     2012/12/5      Shoes
Chris    2012/12/5      Shoes
Julian   2012/12/6      Hat
Mike     2012/12/6      Shoes
Chris    2012/12/6      Shoes
Julian   2012/12/7      Hat
Mike     2012/12/7      Shoes
Chris    2012/12/7      Shoes 
```

等等....取决于日期范围。理想情况下，这样的表会更好：

```
 Date         Product   Worn    Total
2012/12/1      Pants      1        1
2012/12/1      Shoes      0        1
2012/12/1      Hat        0        1
2012/12/2      Pants      1        1
2012/12/2      Shoes      0        1
2012/12/2      Hat        0        1
2012/12/3      Pants      1        1
2012/12/3      Shoes      0        1
2012/12/3      Hat        0        1
2012/12/4      Pants      0        2
2012/12/4      Shoes      2        2
2012/12/4      Hat        0        2
2012/12/4      Pants      0        3
2012/12/4      Shoes      2        3
2012/12/4      Hat        1        3 
```

我目前正在使用 MySql DB 在 PHP 中工作。任何想法，建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:04:41.183

如果 Date 是 mysql 日期字段，则第一个表将是

```
SELECT * FROM table WHERE Date > start_range AND Date < end_range 
```

其中 start_range 和 end_range 是您想要的日期范围，格式为 YYYY/MM/DD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:20:26.563

伪代码主要是：

```
for(EACH day in date range){
 $query = SELECT COUNT(product) from table WHERE date="day" AND product = "hat";
 $getResults=mysql_query($query) or die(mysql_error());
 while($row = mysql_fetch_array($getResults))
 {
  $inventory_count = $row['COUNT(product)'];

 }
 echo 'Date'. $date.' - 'Product: hat - total = '. $inventory_count;
 $query = SELECT COUNT(product) from table WHERE date="day" AND product = "pants";

 $getResults=mysql_query($query) or die(mysql_error());
 while($row = mysql_fetch_array($getResults))
 {
  $inventory_count = $row['COUNT(product)'];

 }
  echo 'Date'. $date.' - 'Product: pants' - 'total = '. $inventory_count;
 $query = SELECT COUNT(product) from table WHERE date="day" AND product = "shoes";

 $getResults=mysql_query($query) or die(mysql_error());
 while($row = mysql_fetch_array($getResults))
 {
  $inventory_count = $row['COUNT(product)'];

 } 
 echo 'Date'. $date.' - 'Product: shoes' - 'total = '. $inventory_count;
} 
```

这可能不是获取它的最有效方法，但它应该可以为您提供所需的数据。放入一些 TR 和 TD，将其包在一张桌子上，您应该会找到您想要的东西。

# c# - System.Data.SqlClient 是否仅特定于 SQL Server？

> ID：10641853
> 
> 赞同：0
> 
> 时间：2012-05-17T18:57:15.157
> 
> 标签：c#, sql-server, repository-pattern

这可能是一个基本问题，但 System.Data.SqlClient 是否仅特定于 SQL Server？

我想使用 System.Data.SqlClient.SortOrder 作为我的存储库接口 IRepository.Find() 的方法参数，但不想使用 SQL Server 特定的参数。是否有 SortOrder 枚举的供应商中立版本？

现在，我只是使用一个名为 sortOrder 的字符串参数，它只接受值“asc”或“desc”，或者只是创建我自己的枚举。

以下是相关方法的实现：

```
public ICollection<T> Find(Expression<Func<T, bool>> predicate, int pageNumber, int size, Expression<Func<T, object>> orderBy, string sortOrder, out int count, params Expression<Func<T, object>>[] fetchSelectors)
{
    count = (this.DbSet as IQueryable<T>).Count(predicate);

    if (size < 1 || size > count)
    {
        throw new ArgumentOutOfRangeException("size");
    }

    var maxPageNumber = (count + size - 1) / size;
    if (pageNumber < 1 || pageNumber > maxPageNumber)
    {
        throw new ArgumentOutOfRangeException("pageNumber");
    }
    if (sortOrder != "asc" && sortOrder != "desc")
    {
        throw new ArgumentException("sortOrder");
    }

    var skipCount = pageNumber * size;
    var query = BuildQuery(predicate, fetchSelectors);
    query = sortOrder == "asc" ? query.OrderBy(orderBy) : query.OrderByDescending(orderBy);
    return query.Skip(skipCount).Take(size).ToList();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:01:45.687

从[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.aspx)，是的，这是特定于 SQL Server 的。

> System.Data.SqlClient 命名空间是 SQL Server 的 .NET Framework 数据提供程序。

尽管语义 (ASC/DESC) 很常见，但排序规则可能是特定于提供者的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:04:42.480

它是 SQL Server 特定的。

一般来说，我建议不要在`Find`方法中采用排序顺序。相反，我会提供一个单独的`OrderBy()`和`OrderByDescending()`方法，就像 LINQ 对`IQueryable<T>`. 此外，如果实现`IQueryable<T>`是一种选择，那将是我的首选：您将能够“搭载”您的库用户多年来使用 LINQ 积累的知识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T19:02:12.163

是的，它仅特定于 SQL Server。您可以轻松地进行自己的枚举，例如：

```
enum SortOrder
{
    Ascending,
    Descending
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T19:01:53.480

您可以使用`System.ComponentModel.ListSortDirection`.

# android - Creating new column in SQLite Android

> ID：10641854
> 
> 赞同：0
> 
> 时间：2012-05-17T18:57:16.057
> 
> 标签：android, database, sqlite

I have a DatabaseHandler class and within my table i have an id, name, and phonenumber. I want to add another column - "age", yet every time I try to add to that new column I get an error saying the column doesn't exist. How would I add another column to this?

Here's some code:

```
public class DatabaseHandler extends SQLiteOpenHelper {

// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "contactsManager";

// Contacts table name
private static final String TABLE_CONTACTS = "contacts";

// Contacts Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_PH_NO = "phone_number";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_PH_NO + " TEXT" + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}

/**
 * All CRUD(Create, Read, Update, Delete) Operations
 */

// Adding new contact
void addContact(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName()); // Contact Name
    values.put(KEY_PH_NO, contact.getPhoneNumber()); // Contact Phone

    // Inserting Row
    db.insert(TABLE_CONTACTS, null, values);
    db.close(); // Closing database connection
}

// Getting All Contacts
public List<Contact> getAllContacts() {
    List<Contact> contactList = new ArrayList<Contact>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Contact contact = new Contact();
            contact.setID(Integer.parseInt(cursor.getString(0)));
            contact.setName(cursor.getString(1));
            contact.setPhoneNumber(cursor.getString(2));
            // Adding contact to list
            contactList.add(contact);
        } while (cursor.moveToNext());
    }

    // return contact list
    return contactList;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T05:51:44.557

添加新列很有用：

```
db.execSQL(ALTER TABLE_CONTACTS ADD AGE INTEGER); 
```

或者你可以做另一件事，即

```
private static final int DATABASE_VERSION = 2;// change the database version    
private static final String KEY_AGE = "age";

// Creating Tables
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_PH_NO + " TEXT"
            + KEY_AGE + " TEXT" +")";
    db.execSQL(CREATE_CONTACTS_TABLE);
} 
```

这可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T23:02:21.657

当您尝试添加 KEY_AGE 时，您需要在文本后放置一个逗号！喜欢

```
" TEXT," 
```

所以你的代码需要看起来像`KEY_NAME + " TEXT," + KEY_AGE + " TEXT," + KEY_PH_NO + " TEXT"` 清除你的应用数据，它必须工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:28:51.440

您应该使用此处所述的 ALTER TABLE 命令：[http ://www.sqlite.org/lang_altertable.html](http://www.sqlite.org/lang_altertable.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-27T05:23:58.343

在需要添加列的位置使用此行：

```
db.execSQL(ALTER TABLE_CONTACTS ADD AGE INTEGER); 
```

# html - 解析此 HTML 页面的正确方法？

> ID：10641855
> 
> 赞同：-1
> 
> 时间：2012-05-17T18:57:20.710
> 
> 标签：html, perl, html-parsing

我正在尝试解析 HTML 页面的某些部分，但我的正则表达式有问题。我的代码如下所示：

```
... Download page using wget and some other stuff ...

$PAGE_REGEXP = "\<div class="col bg_dark clear">";

#Array HTMLLines
@HTMLLines = split(/\n/, $Page);
foreach $ThisOne (@HTMLLines) {
    if ( ($Team) = ($ThisOne =~ /$PAGE_REGEXP/) ) {
        $T{TranslateTeams($Team)}++;
        $LastTeam=TranslateTeams($Team);
    };
}; 
```

这是 HTML 页面：

```
<div class="col bg_dark clear">
    <div class="col_1 left">15:30</div>
    <div class="col_3_archive left">Team A - Team B</div>
    <div class="col_2_archive left">
            1:4 (0:2)&nbsp;
    </div>

    <div class="col_5 left ">2.4&nbsp;</div>
    <div class="col_5 left ">3.6&nbsp;</div>
    <div class="col_5 left bold">2.9&nbsp;</div>
    <div class="col_8 left">
</div>

<div class="col  clear">
    <div class="col_1 left">15:30</div>
    <div class="col_3_archive left">Team C - Team D</div>
    <div class="col_2_archive left">
            2:3 (1:1)&nbsp;
    </div>

    <div class="col_5 left ">2.7&nbsp;</div>
    <div class="col_5 left ">3.7&nbsp;</div>
    <div class="col_5 left bold">2.5&nbsp;</div>
    <div class="col_8 left">
</div> 
```

我需要解析的信息是球队名称、结束和半场结果以及 col_5_left 中的数字：2.4、3.6 和 2.9（对于比赛 Team A - Team B）。

如果我启动我的脚本，Perl 会给我以下错误： Bareword found where operator expected at parser.pl line 11, near ""\

我不熟悉 Perl 中的所有现有模块，也许我正在尝试做一些使用正确的模块很容易实现的事情。谁能给我一些提示/提示如何解析这个 HTML 页面？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:00:43.220

带有正则表达式的行可能看起来像这样：

```
$PAGE_REGEXP = '<div class="col bg_dark clear">'; 
```

# coldfusion - ColdFusion cfhttp strips out newline character from parameter

> ID：10641858
> 
> 赞同：1
> 
> 时间：2012-05-17T18:57:31.320
> 
> 标签：coldfusion

Before calling the function below, the `text1` value was encoded ie:

> ```
> http://example/exampleProxy.cfc?returnFormat=plain&method=update&id=443&blah=something&text1=bob+bob2%0Abob 
> ```

But the request that is sent has stripped out the newline character ie

```
http://example/test/id=443&blah=something&text1=bob+bob2bob 
```

**Function:**

```
<cffunction name="update" access="remote" output="yes" returntype="string">
        <cfargument name="id" required="yes" type="string" />
        <cfargument name="blah" required="yes" type="string" />
        <cfargument name="text1" required="yes" type="string" />   

        <cfhttp url="#variables.cString#" method="PUT"      timeout="#variables.HTTP_TIMEOUT#">
            <cfhttpparam name="id" type="url" value="#arguments.id#">
            <cfhttpparam name="blah" type="url" value="#arguments.blah#">
            <cfhttpparam name="text1" type="url" value="#arguments.text1#">
        </cfhttp>
        ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T02:51:27.160

根据您的描述，我怀疑新行字符在那里。但是您将无法通过简单的方式看到它，`<cfdump var="...">`因为它会显示结果 html。所以任何换行符都会显示为一个空格：

```
TEXT1: bob bob2 bob 
```

您要么需要使用`format="text"`要么`<pre>`标记。然后你应该在值中看到换行符：

**代码：**

```
<cfdump var="#arguments#" format="text">
<pre>TEXT1: #arguments.text1#</pre> 
```

**结果：**

```
BLAH: something
ID: 443
TEXT1: bob bob2   <--- new line
bob

TEXT1: bob bob2  <--- new line
bob 
```

我用 CF9 测试了你的代码，新行出现在函数内部和接收页面上。IE`CGI.QUERY_STRING`

```
 id=443&blah=something&text1=bob%20bob2%0Abob 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T06:08:09.253

确认是否有任何东西被剥离的另一种方法是运行[Fiddler](http://www.fiddler2.com/fiddler2/)并将 proxyserver="localhost" proxyport="8888" 添加到您的呼叫中。呼叫将通过提琴手进行路由，您可以从那里检查所有参数

# jquery - jQuery Colorbox 文档溢出：可见不适用

> ID：10641860
> 
> 赞同：0
> 
> 时间：2012-05-17T18:57:51.017
> 
> 标签：jquery, css, overflow, colorbox

我有一个使用 jQuery Colorbox 插件的页面。我的页面 JS 是：

```
<script type="text/javascript">
    $(document).ready(function(){

    $(document).bind('cbox_open', function() {
        $("html").css("overflow", "hidden");
    });
    $(document).bind('cbox_closed', function() {
        $("html").css("overflow", "visible");
    });

        $(".iframe").colorbox({innerWidth:780, innerHeight:"90%", iframe:true});
     });
</script> 
```

前两个代码片段的目的是在打开时禁用颜色框后面的父页面上的垂直滚动条。这没有问题。此外，当颜色框关闭时，垂直条应重新出现。后者适用于**除**IE 7 以外的所有浏览器。

我知道它可以在代码中没有任何错误的情况下到达代码，原因有两个：

1 - 在 "$(document).bind('cbox_closed', function() {" 中测试警报工作

2 - 它适用于所有其他浏览器和 IE 8+ 版本。

我已将溢出值更改为“滚动”，但这也为页面添加了不必要的水平滚动，这是不希望的。

是否有不同的方法使 ie7 中出现溢出或垂直滚动​​而不是列出的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:02:11.697

以我的经验，这在 ie7 中的 html 或 body 元素上不起作用。我建议将整个文档包装在 a 中`<div>`，并将其设置为`height:100%`and`width:100%`并使用该 div 控制溢出。此外，（这可能是一个口味问题）您应该`removeAttr('style')`在元素上使用以返回其状态，而不是将 css 更改为`overflow:visible`.

附带说明一下，此方法也解决了 iPad 的问题，它与 ie7 存在相同的滚动问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:06:39.920

注意：

```
overflow:auto 
```

似乎可以解决问题，但不确定为什么 :visible 属性在这种情况下不适用（因为它适用于所有其他浏览器）。IE7 是什么导致了这个问题？

# php - PHP Array - 将数组值转换为键

> ID：10641865
> 
> 赞同：14
> 
> 时间：2012-05-17T18:58:30.617
> 
> 标签：php, arrays, key

拥有一组值并将其转换为一组键的最有效方法是什么？我真的很想避免任何 foreach 循环......

```
$in = array(
    'red',
    'green',
    'blue'
); 
```

进入

```
$out = array(
    'red' => NULL,
    'green' => NULL,
    'blue' => NULL
); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-17T18:59:50.520

使用 PHP 的[`array_flip`](http://php.net/manual/en/function.array-flip.php)函数。

* * *

再想一想，如果您希望这些值为空，那么您可能需要使用[`array_fill_keys`](http://www.php.net/manual/en/function.array-fill-keys.php)：

```
$out = array_fill_keys($in, null); 
```

# mysql - 不完全匹配的全文搜索

> ID：10641871
> 
> 赞同：0
> 
> 时间：2012-05-17T18:59:05.127
> 
> 标签：mysql

我有一个名为“customers1”的 MySQL 表运行引擎 MyISAM。我已经在列名称、地址和 zip 上创建了一个全文索引。现在那张桌子上的一位顾客是我。我拼写我的名字“Gildebrand”。现在我不能指望用户可以正确拼写我的名字，很多人可能会写“Glidebrant”，但仍然想找到我的。我如何在 SQL 中进行搜索？

如果我现在运行以下查询

```
SELECT * FROM customers1 WHERE MATCH(name,adress,zip) AGAINST('Gildebrand') 
```

它当然会找到我。但如果我拼错了“Glidebrand”，它就找不到我。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:05:43.123

[如果使用http://www.w3resource.com/mysql/string-functions/mysql-soundex-function.php](http://www.w3resource.com/mysql/string-functions/mysql-soundex-function.php)，我会说你可以从这样的结果中得到最接近的结果`SOUNDEX()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:55:25.287

我有一个与您类似的通用搜索。这基本上是我所做的：

```
SELECT * FROM customers1 WHERE MATCH(name,adress,zip) AGAINST('?')
UNION
SELECT * FROM customers1 WHERE name LIKE ('?%') 
```

这也允许用户只输入前缀。

如果用户意识到他们不能拼写您的名字，但他们确定它以 开头`Gil`，那么他们可以直接输入。

如果您也想在其他列上支持前缀，则可以添加额外的 UNION 子句。

# oracle-sqldeveloper - Oracle SQL Developer 插入语句提示输入值

> ID：10641872
> 
> 赞同：0
> 
> 时间：2012-05-17T18:59:16.913
> 
> 标签：oracle-sqldeveloper

我正在测试一个删除 SQLDeveloper 中一系列值的脚本。为了安全起见，我让 SQLDeveloper 为所有现有数据生成 Insert 语句，因此如果出现问题，我可以恢复它。其中一种说法是：

```
Insert into MY_TABLE (KEY,VALUE) values ('key1','https://somewhere.com/index.html?param1=value1&param2=value2&param3=value3'); 
```

当我再次在 SQLDeveloper 中运行此语句时，它会提示我输入 param2 和 param3 的值，就好像 & 是交互信号一样。有没有办法关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:07:45.100

我认为您在脚本开头需要以下内容：

```
SET DEFINE OFF; 
```

我也看到过引用`SET SCAN OFF`，但关闭`DEFINE`对我来说一直有效。

# node.js - node.js app.get 没有被调用

> ID：10641873
> 
> 赞同：13
> 
> 时间：2012-05-17T18:59:17.113
> 
> 标签：node.js, express

总 node.js noobie，开始玩各种教程和网站的演示代码，我注意到一些我不明白的东西......

也就是说，如果我的 /public 文件夹中有 index.html，那么

```
app.get("/", function (req, res) {
    console.log("get /");
    res.redirect("/test.html");
}); 
```

根本就没有被调用。一旦我将 index.html 重命名为 index2.html，就会调用该方法并将我重定向到 /public/test.html

这就是我所拥有的：

```
var io = require('socket.io'),
    express = require('express'),
    MemoryStore = express.session.MemoryStore,
    app = express.createServer(),
    sessionStore = new MemoryStore();

app.configure(function () {
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.session({
        store: sessionStore,
        secret: 'secret',
        key: 'express.sid'
    }));
    app.use(express.static(__dirname + '/public'));
}); 
```

其余的几乎都取自本教程：[http ://www.danielbaulig.de/socket-ioexpress/](http://www.danielbaulig.de/socket-ioexpress/)

任何其他文件都会出现同样的问题。如果我有 /public/test.html，那么当我打电话时

```
http://localhost:8201/test.html 
```

这个 app.get 没有被调用：

```
app.get("/test.html", app.authenticateUser, function (req, res) {
    console.log("get /test.html");
    res.redirect("/test2.html");
}); 
```

当我删除 test.html 然后我被转发到 test2.html ......

我尝试重定向的原因是，如果用户未登录，我不希望他打开 index.html，而是希望将他转发到 login.html，如果 index.html 存在，这是不可能的。唯一的“解决方案”是做它糟糕的客户端，我不希望 index.html 在客户端浏览器中加载只是为了将他转发到 login.html，在我看来，服务器应该处理它。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-18T00:46:44.050

问题是您的静态文件中间件`app.use(express.static(__dirname + '/public'))`位于路由器的“前面”。当你写

```
app.configure(function () {
app.use(express.bodyParser());
app.use(express.cookieParser());
app.use(express.session({
    store: sessionStore,
    secret: 'secret',
    key: 'express.sid'
}));
app.use(express.static(__dirname + '/public'));
}); 
```

这相当于

```
app.configure(function () {
app.use(express.bodyParser());
app.use(express.cookieParser());
app.use(express.session({
    store: sessionStore,
    secret: 'secret',
    key: 'express.sid'
}));
app.use(express.static(__dirname + '/public'));
app.use(app.router); //Express implicitly appends router middleware!
}); 
```

因为如果您没有明确地将它添加到某个地方，Express 会在堆栈末尾隐式附加路由器中间件。现在您清楚地看到静态文件中间件在路由器前面。如果找到静态文件，则它由它提供服务，并且永远不会调用`app.use(express.static(__dirname + '/public'))`路由器。`app.use(app.router)`如果您希望您的请求始终通过路由器，您应该将其放在前面，例如

```
app.configure(function () {
app.use(express.bodyParser());
app.use(express.cookieParser());
app.use(express.session({
    store: sessionStore,
    secret: 'secret',
    key: 'express.sid'
}));
app.use(app.router); //Now router comes first and will be executed before static middleware
app.use(express.static(__dirname + '/public'));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:14:09.220

这是因为 express 会在请求到达您的代码之前对其进行过滤。它找到文件并将其返回给浏览器。

解决方案是通过 socket.io 发送一个事件，告诉用户浏览器中的代码重定向或将文件移动到私有空间（公共目录之外），并按照 CydGy 的建议通过“fs”提供它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:26:24.330

这个非常好的教程（http://www.danielbaulig.de/socket-ioexpress/）处理套接字。而且我认为对这种情况没有用。

所以，看看这个：

```
app.get("/test.html", app.authenticateUser, function (req, res) { 
```

但在哪里`app.authenticateUser`？挡路的肯定是他

因此，将其替换为：

```
app.get("/test.html", function (req, res) { 
```

或修改您的`app.authenticateUser`.

（并使用模块`fs`读取您的文件，然后，您可以`res.send(file);`）

不要忘记在你的 url 中写 .html ，否则你必须替换`"/test.html"`为`"/test"`)

我希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-26T11:43:45.853

这是因为下面的代码永远不会被调用！

```
 app.get("/", function (req, res) {
    console.log("get /");
    res.redirect("/test.html");
}); 
```

作为 app.use(app.router); 已折旧。您所要做的就是在此行上方编写代码

```
app.use(express.static(__dirname + '/public')); 
```

应该是这样的

```
 app.get("/", function (req, res) {
    console.log("get /");
    res.redirect("/test.html");
    app.use(express.static(__dirname + '/public')); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2020-10-07T06:37:37.777

app.get("/", 函数 (req, res)...

试试这个

app.get('/', 函数 (req, res)...

Uri 路径必须是 ' 单引号。

# javascript - Ajax ..如何隐藏div保持警觉

> ID：10641888
> 
> 赞同：1
> 
> 时间：2012-05-17T19:00:03.800
> 
> 标签：javascript, ajax

我是 ajax 新手，我做得很好，但问题是我让我的 ajax 向服务器发送一些数据，然后获取一些数据库。我希望它隐藏错误 div 然后发出警报，但是当我运行代码时，警报首先显示，然后该区域设置为隐藏

```
if(response.status == "SUCCESS"){
    $('#error').hide('fast');  
    alert("Thanks for submitting.  We will get back to you as asoon as possible.\n\n" + response.result);
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:03:56.270

听起来您想在显示警报之前等待动画完成。

`alert()`在回调中调用`hide()`：

```
$('#error').hide('fast', function() { alert(...); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:04:10.543

你需要一个回调函数，这里是：

```
if(response.status == "SUCCESS"){
    $('#error').hide('fast',function()
    {
         alert("Thanks for submitting.  We will get back to you as asoon as possible.\n\n" + response.result);
    });          
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:03:27.003

添加延迟。

```
window.setTimeout(function() { alert('...') },100) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T19:05:56.067

您可以向 hide() 提供回调，该回调在动画完成后发生：

```
$('#error').hide('fast', function() {
    alert("Your alert string");
}); 
```

从官方文档中阅读更多内容：http: [//api.jquery.com/hide/](http://api.jquery.com/hide/)

# c# - 如何阻止我的控件为我的数据列表生成资源文件？

> ID：10641889
> 
> 赞同：1
> 
> 时间：2012-05-17T19:00:06.997
> 
> 标签：c#, properties, resources, custom-controls

因此，我构建了很多自定义控件，并且在其中包含 System.Collections.Generics.Lists<>() 类型的控件时遇到了问题。基本上，他们将结果缓存到资源文件中，并保存我的主窗体的设计器代码以引用资源文件，而不是作为普通列表。

List<> 在运行后从 WCF 数据源中填充。

这已成为一个问题，因为我的代码填充了这些属性的 set 方法的列表视图。那么如何告诉我的控件不要缓存我的属性的结果。我想我必须先告诉它缓存结果，但我不是。

我的属性在控件中看起来像这样。

```
private List<Job> _jobs;

public List<Job> Jobs {
    get { return _jobs; }
    set { _jobs = value; }
} 
```

然后他们在我的 Main 的表单设计器代码中设置为这样。

```
this.customControl.Jobs = ((System.Collections.Generic.List<Jobs>)(resources.GetObject("customControl.Jobs"))); 
```

[我在这里](https://stackoverflow.com/questions/10639632/where-is-the-resources-getobject-executing-at)问了这个问题的前导

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:50:04.143

尝试在您的属性上添加此属性：

```
[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
public List<Job> Jobs {
   get { return _jobs; }
   set { _jobs = value; }
} 
```

# python - 将Javascript数组转换为python列表？

> ID：10641893
> 
> 赞同：4
> 
> 时间：2012-05-17T19:00:25.803
> 
> 标签：python

我想做谷歌翻译脚本。我正在向 translate.google.com 发出请求，谷歌返回一个数组，但该数组包含未定义的项目。您可以想象响应以字符串形式出现。如果有多个连续的正则表达式等，我可以删除逗号，但我正在寻找最佳解决方案:)

如何将此 javascript 数组转换为 python 列表？

```
["a","b",,,"e"] 
```

我的脚本：http: [//ideone.com/jhjZe](http://ideone.com/jhjZe)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T19:06:24.870

## JavaScript 部分 - 编码

在 Javascript 中，您可以：

```
var arr = ["a","b",,,"e"];
var json_string = JSON.stringify(arr); 
```

然后你以某种方式将`json_string`（现在等于“ `["a","b",null,null,"e"]`”字符串）从 JavaScript 传递到 Python。

## Python部分——解码

然后，在 Python 方面做：

```
json_string = '["a","b",null,null,"e"]'  # passed from JavaScript

try:
    import simplejson as json
except (ImportError,):
    import json

result = json.loads(json_string) 
```

结果你得到`[u'a', u'b', None, None, u'e']`了 Python。

## 更多链接

见下文：

*   [JavaScript 部分的演示](http://jsfiddle.net/Gtehr/)，
*   [Mozilla Developer Network 上有关 JSON.stringify() 的文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)，
*   [Python部分的演示](http://ideone.com/oqnQZ)，

## 依赖项

上述解决方案需要：

*   `JSON.stringify()`在 JavaScript 中，它在所有移动浏览器、Chrome、Firefox、Opera、Safari 和 IE 中，从 8.0 版开始（更详细的兼容浏览器列表在[这里](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Browser_compatibility)），
*   `json`Python 库（上面的代码将`simplejson`可选地使用，如果可用，但不是必需的），它在标准库中，

所以，简而言之**，没有外部依赖**。

# c# - 如何在 .NET 中正确处理代理

> ID：10641895
> 
> 赞同：1
> 
> 时间：2012-05-17T19:00:38.800
> 
> 标签：c#, .net, excel, proxy

我有一个用 C# 编写的 Excel 插件，它连接到服务器以通过 httpwebrequest 获取数据

一个客户端检查了代理设置“使用自动配置脚本”，并在那里使用了一些脚本。

在这种情况下，我的插件无法连接到服务器。

所以我打开提琴手来检查它为什么失败。然后我的插件开始工作。

我在 fiddler 打开的情况下检查了代理设置，看，它已更改为“为您的 LAN 使用代理服务器”

我想在我的代码中做同样的事情，使用 IE 设置中的代理设置并在我的代码中使用它。

你知道如何做到这一点吗？

我现在所拥有的如下，并且不起作用。谢谢

```
private static void SetProxyIfNeeded(HttpWebRequest request, Uri uri)
{
    var stopWatch = new Stopwatch();
    stopWatch.Start();            
    if (_proxy == null)
    {

        _proxyUri = WebRequest.GetSystemWebProxy().GetProxy(uri);
        _proxy = new WebProxy(_proxyUri, true)
                        {
                            Credentials = CredentialCache.DefaultNetworkCredentials
                        };
        if (_proxyUri != null && !string.IsNullOrEmpty(_proxyUri.AbsoluteUri) && !_proxy.Address.Equals(uri) && !IsLocalHost(_proxy))
        {
            _realProxy = true;
        }
        else
        {
            _realProxy = false;
        }
    }
    //if there is no proxy, proxy will return the same uri
    //do we need check if client.Proxy is null or not,
    if (_realProxy)
    {
        request.Proxy = _proxy;
    }
    stopWatch.Stop();
    Helper.LogError("\r\n Got proxy in " + stopWatch.ElapsedMilliseconds + "ms.\r\n");
} 
```

另外，我有一个配置文件

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="log4net" type="System.Configuration.IgnoreSectionHandler" />
  </configSections>
  <appSettings>
    <add key="log4net.Config" value="log4netConfig.xml" />
  </appSettings>
  <system.net>
    <defaultProxy enabled ="true" useDefaultCredentials = "true">
      <proxy usesystemdefault ="True" bypassonlocal="True"/>
    </defaultProxy>
  </system.net>
</configuration> 
```

编辑：来自他们的 IT 人员的客户端更新，看起来 pac 已下载但未使用我不知道为什么未使用它，我指定在每个请求中使用它，除了无法指定代理的 Cometd，也许就是这样问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:17:10.093

如果为您的插件使用 app.config 是一个选项（我知道这对于 Office 插件很棘手），您可以在那里处理所有代理配置：

```
<configuration>
    <system.net>
        <defaultProxy>
            <proxy
                usesystemdefault="true"
                bypassonlocal="true"
            />
        </defaultProxy>
    </system.net>
</configuration> 
```

有关详细信息，请参阅MSDN 上的[<defaultProxy> 元素（网络设置）](http://msdn.microsoft.com/en-us/library/kd3cf2ex.aspx)。

# node.js - 在 mongodb 和 nodejs 中查找两个给定值之间的 objectIds

> ID：10641897
> 
> 赞同：0
> 
> 时间：2012-05-17T19:00:42.870
> 
> 标签：node.js, mongodb, mongoose

我正在创建类似于新闻帖子的模式，用户可以选择喜欢和不喜欢它们。这是相同的模式

```
 Client= new mongoose.Schema({
        ip:String
    })

    Rates = new mongoose.Schema({
        client:ObjectId,
        newsid:ObjectId,
        rate:Number
    })

    News = new mongoose.Schema({
      title: String,
      body: String,
      likes:{type:Number,default:0},
      dislikes:{type:Number,default:0},
      created:Date,
      // tag:String,
      client:ObjectId,
      tag:String,
      ff:{type:Number,default:20}
    });

var newsm=mongoose.model('News', News);
var clientm=mongoose.model('Client', Client);
var ratesm=mongoose.model('Rates', Rates); 
```

为了检索给定一组新闻帖子的特定用户给出的评级，我尝试了，

```
newsm.find({tag:tag[req.params.tag_id]},[],{ sort:{created:-1},limit: buffer+1 },function(err,news){    
   ratesm.find({
        client:client._id,
        newsid:{$lte:news[0]._id,$gte:news.slice(-1)[0]._id}
        },
        function(err,ratings){
    })
}) 
```

无论如何，此查询都会返回空列表。我怀疑 $gte 和 $lte 是否用于比较 objectIds。我对吗？我如何才能在给定的一组新闻帖子中喜欢/不喜欢哪些帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:39:11.467

是的，可以使用 $gt/$lt 等范围查询来查询 ObjectIds。您可以发布所使用的确切值并且`news[0]._id`给`news.slice(-1)[0]._id`您空结果吗？

但是，我不确定 $gt/$lt 是你想要的。看起来您需要做的是提取`_id`新闻项目的 s，然后`$in`在您的查询中的过滤器中使用它`ratesm`。

# windows - 突然在 perl 中打破“睡眠”

> ID：10641903
> 
> 赞同：-1
> 
> 时间：2012-05-17T19:01:01.930
> 
> 标签：windows, perl, multiprocessing, signals, sleep

我想做以下事情 -

```
#starting code

sleep(1000);

#remaining code 
```

起始代码将运行并卡在“睡眠”状态。一段时间后（<<1000），其他一些进程会通过打破这个睡眠（可能通过发送信号）来唤醒这个进程，然后程序的其余部分将运行。

我必须*在 Windows*上使用 perl 5.6.1 ，它不支持警报。我尝试了一些信号，如 SIGINT、SIGFPE 等，但失败了。请提出一些替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:11:52.360

你在使用信号处理程序吗？如果没有，`SIGINT`它的同类将终止您的程序。

```
my $parent_pid = $$;

# schedule interruption
if (fork() == 0) {
    sleep 5;
    kill 'INT', $parent_pid;
    exit;
}

# trivial signal handler so SIGINT doesn't terminate the program
$SIG{INT} = sub { };
my $n = sleep 1_000_000;
print "Slept for $n seconds.\n"; 
```

在 Linux perl 5.6.2 上，这给出了输出：

```
Slept for 5 seconds 
```

* * *

就此而言，我不知道您为什么说 Perl 5.6 不支持警报（除非您可能在 Windows 上？）再次设置信号处理程序，否则您的程序将终止。

```
$SIG{ALRM} = sub {};
alarm 5;
$n = sleep 1_000_000;
print "slept for $n seconds\n"; 
```

在我的 Perl 5.6.2 上运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:39:38.657

好吧，如果我想效仿

```
$SIG{ALRM} = \&handle_alarm;
alarm(5);
...
sleep(10); 
```

我会从

```
use Time::HiRes qw( time sleep );  # Optional

my $alarm = time + 5;
...
my $timeout = $alarm - time;
if ($timeout <= 0) {
   handle_alarm();
} else {
   my $to_sleep = 10;
   $to_sleep = $timeout if $timeout < $to_sleep;
   sleep($to_sleep);
} 
```

# c# - 使用 Weka 的 MultiLayerPerceptron 和 IKVM.NET

> ID：10641905
> 
> 赞同：0
> 
> 时间：2012-05-17T19:01:08.567
> 
> 标签：c#, .net, weka, ikvm

我正在尝试使用 weka.classifiers.functions.MultilayerPerceptron 作为 Weka 上使用 IKVM.NET 的分类器，但我不断收到以下异常：“无法加载文件或程序集 'IKVM.OpenJDK.SwingAWT，版本 = 7.0.4335.0， Culture=neutral, PublicKeyToken=13235d27fcbfff58' 或其依赖项之一。系统找不到指定的文件。” 我引用了在 IKVM 文件夹中找到的每个 IKVM 程序集，包括 IKVM.OpenJDK.SwingAWT，这是一个非常简单的代码：

```
var classifier = new weka.classifiers.functions.MultilayerPerceptron();
classifier.setOptions(weka.core.Utils.splitOptions("weka.classifiers.functions.MultilayerPerceptron -L 0.7 -M 0.3 -N 75 -V 0 -S 0 -E 20 -H a")); 
```

并且每当运行第一行时都会引发异常，如果我创建另一个分类器，例如 NaiveBayes，它工作得很好。

有谁知道我可以尝试解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:51:43.943

罪魁祸首原来是类库，我有一个名为 IA 的类库，它存储了所有 weka 的东西，在里面我有一个名为 Analyzer 的类，它试图调用 MultiLayerPerceptron 分类器，所以我用“装饰”了这个类一个 [MTAThread()] 属性，它现在正在工作

# php - 使用 CodeIgniter 验证后使用 POST 数据

> ID：10641907
> 
> 赞同：5
> 
> 时间：2012-05-17T19:01:25.327
> 
> 标签：php, codeigniter, post, registration

我有一个注册表单，我正在验证用户输入。这是我的控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Register extends CI_Controller {

    public function index()
    {
        $this->load->model('Users_model');
        $this->load->helper('form');
        $this->load->library('form_validation');

        $data['page_title'] = 'Register';
        $this->load->view('header', $data);

        // Set form validation rules
        $this->form_validation->set_rules('username', 'Username', 'trim|required|min_length[5]|max_length[16]|xss_clean|callback_username_check');
        $this->form_validation->set_rules('email', 'Email', 'trim|required|min_length[5]|max_length[64]|valid_email|callback_email_check');
        $this->form_validation->set_rules('password', 'Password', 'required');
        $this->form_validation->set_error_delimiters('<span class="error">', '</span>');

        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('register', $data);
        }
        else
        {
            // Add the user to the database
            $this->Users_model->add_user();
            $this->load->view('register_success', $data);
        }

        $this->load->view('footer', $data);
    }

    /* Functions to check username and email */
}

/* End of file register.php */
/* Location: ./application/controllers/register.php */ 
```

问题出在这一行：`$this->Users_model->add_user();`. 我想将用户名、电子邮件和密码传递给我的用户模型以将用户添加到我的数据库中，但我不确定如何将 POST 数据获取到该方法中。通常我会使用`$_POST['username']`等，但 CodeIgniter 已经在输入值（等）上运行了一些`trim()`函数`xss_clean`。如何获取这些值并将它们传递到我的`add_user()`方法中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T19:05:04.300

[CodeIgniter 输入类](http://codeigniter.com/user_guide/libraries/input.html)允许您在表单验证库过滤后获取 POST 数据。在您的控制器中，您将执行以下操作：

```
$username = $this->input->post('username');
$email = $this->input->post('email');
$password = $this->input->post('password'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T14:47:47.523

更简单，创建一个数组并将数组发送到模型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:23:46.593

您可以使用输入类以及辅助函数`set_value('email')`

# python - 人类与机器井字游戏

> ID：10641909
> 
> 赞同：-2
> 
> 时间：2012-05-17T19:01:31.967
> 
> 标签：python, minimax

在这些天里，我一直在努力使用 minimax 算法，我可以说我终于明白了（感谢 stackoverflow 中的另一篇文章）。因此，我打开了我的编辑器，并尝试将其实现为极其简单的（请不要责怪我的代码：P）井字游戏，只是为了尝试一下。一切正常，但计算机移动功能总是检索我-1。我不是要你给我代码，只是要“为什么”这样做。我已经多次搜索代码，但一无所获。该代码可能与我在网上找到的另一个代码非常相似。这是我的代码：

```
# COMPUTER AI

def computer_move():
    best_move = minimax_recurse(game_board,active_player, 0)
    print "The best move is ", best_move
    make_move(game_board,best_move, active_player)

    print "COMPUTER MOVE DONE"

def minimax_recurse(game_board,player,depth):

    winner = is_winner(game_board)
    if winner == active_player  :
        return 1
    elif winner is not active_player :
        return -1
    elif len(get_move_list(game_board)) == 0 :
        return 0

    if player == player1 :
        other_player = player2
    other_player = player1

    if player == active_player :
        alpha = -1
    alpha = 1

    movelist = get_move_list(game_board)

    for move in movelist :
        board2 = game_board

        make_move(board2,move,player)

        subalpha = minimax_recurse(board2, other_player, depth + 1)

        if player == active_player :
            if depth == 0 and alpha <= subalpha:
                best_move = move

            alpha = max(alpha,subalpha)
            return alpha

        else :
            alpha = min(alpha,subalpha)
            return alpha

# BOARD FUNCTIONS
game_board = ([1,2,3],[4,5,6],[7,8,9])
def print_board(board) :

    for row in board :
        print row

def make_move(game_board,player_move,active_player):

    x = 0
    y = 0
    player_move = int(player_move)
    if player_move == 1 :
        x = 0
        y = 0
    elif player_move == 2 :
        x = 0
        y = 1
    elif player_move == 3 :
        x = 0
        y = 2
    elif player_move == 4 :
        x = 1
        y = 0
    elif player_move == 5 :
        x = 1
        y = 1
    elif player_move == 6 :
        x = 1
        y = 2
    elif player_move == 7 :
        x = 2
        y = 0
    elif player_move == 8 :
        x = 2
        y = 1
    elif player_move == 9 :
        x = 2
        y = 2
    elif player_move >= 10 :
        print "value is too high"
        skip = False
        return board

    if game_board[x][y] == "O" or game_board[x][y] == "X" :
        print "move not avaiable"
        return game_board

    game_board[x][y] = active_player
    return game_board

def is_winner(board):
    for i in range (0,3) :
        if board[i][0] == player1 and board[i][1] == player1 and board[i][2] == player1 :
            return player1

        if board[i][0] == player2 and board[i][1] == player2 and board[i][2] == player2 :
            return player2

    # checking for obliqual, that's quite bad and slow check but it works
    if board[0][0] == player1 and board[1][1] == player1 and board[2][2] == player1 :
        return player1
    if board[0][0] == player2 and board[1][1] == player2 and board[2][2] == player2 :
        return player2

    if board[2][0] == player1 and board[1][1] == player1 and board[0][2] == player1 :
        return player1
    if board[2][0] == player2 and board[1][1] == player2 and board[0][2] == player2 :
        return player2

    return None

def get_move_list (game_board) :

    move = [0]

    for row in game_board :
        for i in row :
            if isinstance(i,int) == True :
                move.append(i)
    move.remove(0)
    return move

# Main Loop
player1 = "X"
player2 = "O"
print_board(game_board)
while True :
    active_player = player1
    # this is for player move
    print get_move_list(game_board)
    player_move = int(raw_input("Please insert your move >>> "))
    make_move(game_board,player_move,active_player)
    print_board(game_board)

    if is_winner(game_board) == player1 :
        print "Player1 is the winner"
        break
    if is_winner(game_board) == player2 :
        print "Player2 is the winner"
        break
    print get_move_list(game_board)
    # computer time
    active_player = player2
    computer_move()
    print_board(game_board)

    if is_winner(game_board) == player1 :
        print "Player1 is the winner"
        break
    if is_winner(game_board) == player2 :
        print "Player2 is the winner"
        break 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:07:38.613

在不调试所有代码的情况下，似乎错误的一件事是您使用“best_move”变量（全局未初始化）作为移动的持有者以及 minimax_recurse 的 -1/0/+1 结果的持有者。所以它被你的 minmax 算法覆盖了。你需要更多的变量，更清晰的初始化，以及一致的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:18:51.960

-1 总是返回的根本原因是`winner is not active_player`返回`True`when `winner`is `None`。您可以使用变量来跟踪其他（非活动）玩家，或者您可以使用三元运算符：`elif winner is (player1 if player2 == active_player else player2)`

虽然这不是唯一的问题：

```
if player == active_player :      
    alpha = -1    
alpha = 1 
```

这将始终将 alpha 设置为 1。直接在上面的行有同样的问题。另一个答案中指出的变量命名问题也是如此。

# iphone - UIAlertView - 没有动作 为什么？

> ID：10641910
> 
> 赞同：0
> 
> 时间：2012-05-17T19:01:40.123
> 
> 标签：iphone, xcode, action, uialertview, uiactionsheet

单击我的 alterView 中的按钮后，我尝试启动一个操作 - 但没有任何反应；-( 在同一个 viewController 中，我使用了一个带有多个选项的 actionSheet - 这个 actionsSheet 工作得很好，但 alertView 没有。

这是我的代码。Dubug 没有错误。怎么了？？？？？谢谢！

在标题中：

```
#define alertWelcome 1
#define alertFacebook 2
#define alertRecommend 3 
```

在 ViewDidLoad 中：

```
if (! hasRanBefore) {
        NSLog(@"else has ran before");
        UIAlertView *alert = [[UIAlertView alloc]                     
                              initWithTitle:NSLocalizedString(@"Headline_firstLaunch", @"Headline")
                              message:NSLocalizedString(@"firstLaunch", @"1.Start - Hilfe") delegate:self 
                              cancelButtonTitle:NSLocalizedString(@"no",@"No")
                              //defaultButton:@"OK" 
                              //alternateButton:@"Cancel"                            
                              otherButtonTitles:/*NSLocalizedString(@"Facebook",@"Login"),*/ nil];
         alert.tag = alertWelcome;       
        [alert show];
        [alert release];

    }

    [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(fbLogin:) userInfo:nil repeats:NO]; 
```

我的方法：

```
- (void)fbLogin:(id)sender{
    NSLog(@"FB Login Alert");
    if (![facebook isSessionValid]) {

        UIAlertView *popupFacebook =  [[UIAlertView alloc]                     
                                      initWithTitle:NSLocalizedString(@"Headline_FacebookL", @"Headline")
                                       message:NSLocalizedString(@"Facebook-Text", @"1.Start - Hilfe") 
                                       delegate:self
                                       cancelButtonTitle:NSLocalizedString(@"no",@"No")
                                       //defaultButton:@"OK" 
                                       //alternateButton:@"Cancel"                            
                                       otherButtonTitles:NSLocalizedString(@"Facebook",@"Login"), nil];
   // [popupFacebook addButtonWithTitle:NSLocalizedString(@"Facebook",@"Login")];
     popupFacebook.tag = alertFacebook;
    [popupFacebook show];
    [popupFacebook release];

}
} 
```

我的方法：

```
//First View Alert
-(void)firstActionSheet:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSLog(@"clicking");
    //NSString *title = [actionSheet buttonTitleAtIndex:buttonIndex];

    if (alertView.tag == alertWelcome )  {
        if (buttonIndex == 0) {
            NSLog(@"close");
        }
    }  

    else if (alertView.tag == alertFacebook )  {

        if (buttonIndex == 0) {
            NSLog(@"später");
        }  

        if (buttonIndex == 1) {
            //self.label.text = NSLocalizedString(@"Facebook",@"Login"),
            [self fbActive:nil];
            NSLog(@"Login to FB");
        }  

    }
} 
```

* * *

完美的跑步动作表：

```
-(IBAction)inviteFriends:(id)sender {
    UIActionSheet *popupQuery = [[UIActionSheet alloc] 
                                 initWithTitle:NSLocalizedString(@"invite_Headline",@"Erzähle es Deinen Freunden:") 
                                 delegate:self 
                                 cancelButtonTitle:NSLocalizedString(@"invite_cancel",@"Abbrechen") 
                                 destructiveButtonTitle:nil
                                 otherButtonTitles:NSLocalizedString(@"invite_eMail",@"per E-Mail einladen"),
                                 NSLocalizedString(@"invite_SMS",@"per SMS einladen"),
                                 NSLocalizedString(@"vote",@"App bewerten"),
                                 /*NSLocalizedString(@"invite_Facebook",@"Facebook"),*/
                                 NSLocalizedString(@"invite_Twitter",@"Twitter"), nil];
    popupQuery.actionSheetStyle = UIActionSheetStyleBlackOpaque;
    popupQuery.tag = alertRecommend;
    [popupQuery showInView:self.view];
    [popupQuery release];

}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    UIDevice* currentDevice = [UIDevice currentDevice];
    if(currentDevice.userInterfaceIdiom == UIUserInterfaceIdiomPad)  {
        NSLog(@"oh its iPad");

        if (buttonIndex == 0) {
            self.label.text = NSLocalizedString(@"invite_eMail",@"per E-Mail einladen"),
            [self showMailPicker:nil];

        }  
        else if (buttonIndex == 1) {
            self.label.text = NSLocalizedString(@"vote",@"App bewerten"),
            [self bewerten:nil];   
        }
        else if (buttonIndex == 2) {
            self.label.text = NSLocalizedString(@"invite_Twitter",@"Twitter"),
            [self twitter:nil];
        } 
        /*else if (buttonIndex == 3) {
            self.label.text = NSLocalizedString(@"invite_cancel",@"Abbrechen");
        }*/

    }
    else{
        NSLog(@"This is iPhone");

        if (buttonIndex == 0) {
            self.label.text = NSLocalizedString(@"invite_eMail",@"per E-Mail einladen"),
            [self showMailPicker:nil];
            NSLog(@"Mail");

        } else if (buttonIndex == 1) {
            self.label.text =  NSLocalizedString(@"invite_SMS",@"per SMS einladen"),
            [self sendInAppSMS:nil];

        } else if (buttonIndex == 2) {
            self.label.text = NSLocalizedString(@"vote",@"App bewerten"),
            [self bewerten:nil];

        } //else if (buttonIndex == 3) {
        //self.label.text = NSLocalizedString(@"invite_Facebook",@"Facebook"),
        //[self facebook_invite:nil]; 
        //    } 
        else if (buttonIndex == 3) {
            self.label.text = NSLocalizedString(@"invite_Twitter",@"Twitter"),
            [self twitter:nil];

        } /*else if (buttonIndex == 4) {
            self.label.text = NSLocalizedString(@"invite_cancel",@"Abbrechen");
        }*/

    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:04:32.737

谢谢 - 我是个白痴;-)

这段代码工作正常;-)

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSLog(@"clicking");
    //NSString *title = [actionSheet buttonTitleAtIndex:buttonIndex];

    if (alertView.tag == alertWelcome )  {
        if (buttonIndex == 0) {
            NSLog(@"close");
        }
    }  

    else if (alertView.tag == alertFacebook )  {

        if (buttonIndex == 0) {
            NSLog(@"später");
        }  

        if (buttonIndex == 1) {
            //self.label.text = NSLocalizedString(@"Facebook",@"Login"),
            [self fbActive:nil];
            NSLog(@"Login to FB");
        }  

    }
} 
```

问候！

# javascript - 如何使跨度在单击时出现但在单击另一个链接时消失？

> ID：10641914
> 
> 赞同：3
> 
> 时间：2012-05-17T19:01:56.633
> 
> 标签：javascript, onclick

我是 javascript 的新手，所以请多多包涵。我试图让一个跨度出现在我已经完成的点击上，但是一旦点击另一个链接，我需要它返回隐藏状态。这就是我到目前为止所拥有的。

```
<html>
<head>
<style>
aside.apps{
    position:relative;
}

span.socialApp{
    visibility:hidden;
    position:absolute;
    top:20px;
    left: 0;
    background-color:#e9e9e9;
}
</style>

<script>
var state = 'hidden'; 

function showApp(a) { 

    if (state == 'visible') { 
        state = 'hidden'; 
    } 
    else { 
        state = 'visible'; 
    } 

    if (document.getElementById && !document.all) { 
        x = document.getElementById(a); 
        x.style.visibility = state; 
    } 
} 
</script>
</head>

<body>

        <aside class="apps">
            <a href="javascript://" onclick="showApp('app1');">link1</a>
                <span class="socialApp" id="app1">stuff goes here1</span>
            <a href="javascript://" onclick="showApp('app2');">link2</a>
                <span class="socialApp" id="app2">stuff goes here2</span>
            <a href="javascript://" onclick="showApp('app3');">link3</a>
                <span class="socialApp" id="app3">stuff goes here3</span>
            <a href="javascript://" onclick="showApp('app4');">link4</a>
                <span class="socialApp" id="app4">stuff goes here4</span>
        </aside>
</body>
</html> 
```

当前，当单击链接 1 时，会出现 app1，然后单击链接 2 后，应用 2 会出现在链接 1 的上方。当链接 2 关闭时，链接 1 仍然可见。我需要检查所有 4 个并隐藏当前选择之外的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:42:45.743

**Slight update; the function is now self-contained**.

[This should work how you want](http://jsfiddle.net/xzhRp/2/); it will pull up the correct span, and will hide it again if it is clicked again.

Here is the code again:

```
 <aside class="apps" id="aside">
        <a href="#" onclick="showApp('app1');">link1</a>
            <span class="socialApp" id="app1">stuff goes here1</span>
        <a href="#" onclick="showApp('app2');">link2</a>
            <span class="socialApp" id="app2">stuff goes here2</span>
        <a href="#" onclick="showApp('app3');">link3</a>
            <span class="socialApp" id="app3">stuff goes here3</span>
        <a href="#" onclick="showApp('app4');">link4</a>
            <span class="socialApp" id="app4">stuff goes here4</span>
    </aside> 
```

​</p>

```
function showApp(a) {
    var aside = document.getElementById('aside');
    var arr = aside.getElementsByTagName('span');
    for (i = 0; i < arr.length; i++) {
        if (arr[i].getAttribute('id') != a) {
            arr[i].style.visibility = 'hidden';
        }
    }
    var state;
    x = document.getElementById(a);
    if (x.style.visibility == 'visible') {
        state = 'hidden';
    }
    else {
        state = 'visible';
    }
    x.style.visibility = state;
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T20:05:28.340

I recommend using JQuery. It has cross browser support and makes simple work of things like this ;).

include the following in your tags

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

Here is the new script

```
<script type="text/javascript">
    function showApp(a) {
        $(".selected").removeClass("selected");
        $(a).addClass("selected");
    };
</script> 
```

change your html to this

```
<aside class="apps">
    <a href="#" onclick="showApp('#app1');">link1</a>
        <span class="socialApp" id="app1">stuff goes here1</span>
    <a href="#" onclick="showApp('#app2');">link2</a>
        <span class="socialApp" id="app2">stuff goes here2</span>
    <a href="#" onclick="showApp('#app3');">link3</a>
        <span class="socialApp" id="app3">stuff goes here3</span>
    <a href="#" onclick="showApp('#app4');">link4</a>
        <span class="socialApp" id="app4">stuff goes here4</span>
</aside> 
```

change your css to this

```
.apps{
    position:relative;
}

.socialApp{
    visibility:hidden;
    position:absolute;
    top:20px;
    left: 0;
    background-color:#e9e9e9;
}

.selected {
    visibility: visible;   
} 
```

JSFiddle Example: [http://jsfiddle.net/peterf/u2SFL/](http://jsfiddle.net/peterf/u2SFL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T19:23:58.567

我的错，编辑了答案，它会对你有所帮助。我不认为，有任何需要使用变量。只需隐藏所有跨度，然后显示您作为变量传递的跨度。

```
<html>
<head>
<style>
aside.apps{
    position:relative;
} 
span.socialApp{
    visibility:hidden;
    position:absolute;
    top:20px;
    left: 0;
    background-color:#e9e9e9;
}
</style>

<script>  
function showApp(a) { 
    var aside = document.getElementById('myaside');
    var spans = aside.getElementsByTagName('span');
    for(i=0,len=spans.length;i<len;i++){
     spans[i].style.visibility = 'hidden';
    }
    x = document.getElementById(a);  
    x.style.visibility = 'visible';  
}

</script>
</head>

<body>

        <aside class="apps" id="myaside">
            <a href="javascript://" onclick="showApp('app1');">link1</a>
                <span class="socialApp" id="app1">stuff goes here1</span>
            <a href="javascript://" onclick="showApp('app2');">link2</a>
                <span class="socialApp" id="app2">stuff goes here2</span>
            <a href="javascript://" onclick="showApp('app3');">link3</a>
                <span class="socialApp" id="app3">stuff goes here3</span>
            <a href="javascript://" onclick="showApp('app4');">link4</a>
                <span class="socialApp" id="app4">stuff goes here4</span>
        </aside>
</body>
</html> 
```

**更新：**

As you are new to javascript, just dont dive into jQuery because its easier for someone else and they will throw a code whenever you ask.

Not me, but all the great javascript developers suggest you to learn javascript before learning its framework.

Also, jQuery is there to ease things, to simply the code and to separate markup and javascript.

You should not **now** but if you are willing to try later, you should follow an approach like this. (No onclick in markup and a simpler code)

```
<html>
<head>
<style>
aside.apps{
    position:relative;
} 
span.socialApp{
    display:none;
    position:absolute;
    top:20px;
    left: 0;
    background-color:#e9e9e9;
}
</style>
<script src='http://code.jquery.com/jquery-latest.min.js'></script>
<script>
 $(document).ready(function(){
    $('aside').on('click','a',function(){      // This lines says that select aside and fire onclick even on click of anchor tag inside it
        $(this).parent().find('span').hide();    // $(this) is the clicked anchor
        $(this).next('span').show();    // Find the span next to clicked anchor and show it i.e. display:block
    })
 })

</script>
</head> 
<body> 
<aside class="apps">
    <a href="javascript:void(0);">link1</a>
        <span class="socialApp" id="app1">stuff goes here1</span>
    <a href="javascript:void(0);" >link2</a>
        <span class="socialApp" id="app2">stuff goes here2</span>
    <a href="javascript:void(0);" >link3</a>
        <span class="socialApp" id="app3">stuff goes here3</span>
    <a href="javascript:void(0);" >link4</a>
        <span class="socialApp" id="app4">stuff goes here4</span>
</aside> 
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T19:42:03.393

You should keep track of the currently visible item in a variable (which is initially `null`).

Every time `showApp` is called, hide the currently visible item.

Then make the span that has just been clicked visible and remember that it is now the currently visible item (unless the one that has just been clicked is the same one that has been visible until now - in that case you shouldn't make anything visible and there no longer is a currently visible item).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T20:04:55.633

and welcome to Stack Overflow!

First off, I am going to suggest you make use of [jQuery](http://jquery.com/) assist you with your JavaScript. jQuery (and other similar frameworks like Zepto, MooTools and Dojo) irons over some of the cracks in JavaScript such as [cross browser inconsistencies](https://developer.mozilla.org/en/Migrate_apps_from_Internet_Explorer_to_Mozilla#Attach_event_handlers) and will [make things a lot easier](http://www.paulund.co.uk/reasons-why-i-use-jquery-framework). To include jQuery in your project you just need to add the following in your page's `<head>` tag:

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

Now you've got access to jQuery you can remove all of the `onclick` attributes you added to your `<a>` tags. The use of `onclick` tags is discouraged as it dates back to the early days of web development before DOM Level 1 standard was (almost) agreed upon. Instead it's suggested you bind to the 'click' event - this will help to keep your HTML and JavaScript separated and in turn make your JavaScript easier to read and debug.

jQuery makes it really easy to bind a handler (function) to a click event, you just need to use the [`on`](http://api.jquery.com/on/) syntax:

```
// #id is the 'id' attribute of the element you want to add a click handler to.
$('#id').on('click', function () { alert("Clicked!"); }); 
```

jQuery also provides a quick and easy way to show and hide elements on the page via [`show`](http://api.jquery.com/show/) and [`hide`](http://api.jquery.com/hide/), here how it works:

```
// Again, #id is the id attribute of the element you want to show/hide.
$('#id').show();    // Make a hidden element visible.
$('#id').hide();    // Hide a visible element. 
```

The only thing to watch out for here is that when you 'hide' an element using jQuery it actually sets the `display` CSS attribute of the element. In your code above, you were hiding elements by toggling the `visibility` attribute.

The last part of the answer lies in how we the currently visible element; this can be achieved by adding a new variable which keeps track of which element is being displayed - you can see this in my modified code below.

```
<html>
    <head>
        <style>
span.socialApp {
    /* use display: none instead of visibilty: hidden */
    display: none;

    position:absolute;
    top:20px;
    left: 0;
    background-color:#e9e9e9;
}
        </style>

        <!-- include jQuery -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

        <!-- Script for toggle apps -->
        <script>
// Create an Array of all the app names.
var apps = [ 'app1', 'app2', 'app3' ];

// Variable which keeps track of which app is currently visible
var visibleAppName = null;

function onLinkClicked(event) {
    // Get the id of the link that was clicked.
    var linkName = event.target.id;

    // Strip off the '-link' from the end of the linkName
    var dashIndex = linkName.indexOf('-link');
    var appName = linkName.substr(0, dashIndex);

    // Call show app with the correct appName.
    showApp(appName);
}

function showApp(appNameToShow) { 
    // Hide the currently visible app (if there is one!)
    if (visibleAppName !== null) {
        $('#' + visibleAppName).hide();
    }

    // And show the one passed
    $('#' + appNameToShow).show();

    // Update the visibleApp property.
    visibleAppName = appNameToShow;
}

// $(document).ready waits for the page to finish rendering
$(document).ready(function () {
    // Walk through the Array of Apps and add a click handler to
    // it's respective link.
    apps.forEach(function(name) {
        $('#' + name + '-link').on('click', onLinkClicked);
    });
});         
        </script>
    </head>
    <body>
            <aside class="apps">
            <a href="#" id="app1-link">link1</a>
            <span class="socialApp" id="app1">stuff goes here1</span>

            <a href="#" id="app2-link">link2</a>
            <span class="socialApp" id="app2">stuff goes here2</span>

            <a href="#" id="app3-link">link2</a>
            <span class="socialApp" id="app3">stuff goes here3</span>            
        </aside>
    </body>
</html>​​​​​​​​​​​ 
```

If you're keen to learn more about JavaScript development then may I suggest reading [Object Orientation JavaScript](https://rads.stackoverflow.com/amzn/click/com/1847194141) which provides an excellent introduction to the language and some of it's quirks.

# android - 用于 2d 绘图的 OpenGL es 1.0 或 2.0

> ID：10641917
> 
> 赞同：0
> 
> 时间：2012-05-17T19:02:11.097
> 
> 标签：android, opengl-es, glsurfaceview

我使用 SurfaceView 编写了一个应用程序。似乎降低应用程序帧速率的一件事是绘制一些位图需要一些时间，并且使用画布绘制一些线条和圆圈也需要一些时间。我想尝试通过使用 GLSurfaceView 来改进这一点。与其说是因为较慢的帧速率是个问题，倒不如说是因为我只是想在 OpenGL ES 中涉猎一点。无论如何，对于 2D 绘图，我应该使用 OpenGL 1.0 还是 OpenGL 2.0？我还希望这个应用程序可以在尽可能多的设备上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:04:31.883

GLES 2 works on Android 2.2 and higher. If that supports all the devices you want I would go with GL2 as GL1 is simply going out the window more and more as time goes on. Fixed pipelines are NOT the way to go if your interested in graphics for the future. If you learn GLES2 you can carry your knowledge to more advanced things later.

# ruby-on-rails-3 - Dreamhost 噩梦！部署 Rails：无法从共享对象映射段

> ID：10641925
> 
> 赞同：0
> 
> 时间：2012-05-17T19:02:30.103
> 
> 标签：ruby-on-rails-3, deployment, bundler, dreamhost, gem-bundler

在过去的两周里，我一直在尝试将我的网站部署到 Dreamhost。我一直在阅读 2008、2009、2010、2011 年创建的博客。

好像我解决了一个问题，另一个问题又出现了！

我添加了 GEMHOME GEMPATH 等变量。

现在终于当我认为我已经让它工作时，我收到了这个错误：错误消息：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:05:39.623

你有VPS吗？如果没有 VPS，我不会费心去尝试。

我有一个 450mb 专用内存的 VPS，运行一个生产 Rails 2 站点和一个后台作业，应用程序大量使用页面缓存来节省资源。我目前“不”运行 Rails 3 站点。但是，我已经成功地在我的 VPS 上部署了 Rails 3 应用程序以进行测试。

很可能我将不得不增加一点内存来运行生产 Rails 3 站点。内存很快就会成为问题。

Dreamhost 将杀死占用过多内存的进程。当使用 VPS Dreamhost 将重置超出专用内存的服务器。

也许你只是想在内存中加载太多？我不确定，但无论如何，如果没有 VPS 和提高内存，我个人不会费心尝试。

# jquery - 一个适用于悬停的简单脚本，但为什么我不能让它适用于点击？

> ID：10641926
> 
> 赞同：0
> 
> 时间：2012-05-17T19:02:37.397
> 
> 标签：jquery

我有一个非常简单的适用于悬停的 js 脚本，但我想将悬停转换为点击功能。当我尝试将悬停切换为单击时，它不起作用。

这是完整的示例脚本，仅供参考。当有人将鼠标悬停在这个类上时，下面会出现一个带背景的小文本。 [http://pastebin.com/JMTfvDAa](http://pastebin.com/JMTfvDAa)

这是我尝试点击 [http://pastebin.com/M0X37APD](http://pastebin.com/M0X37APD)

如果有人可以帮助我将悬停转换为点击，我将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:17:59.453

```
 $(document).ready(function(){
            $(".menu a").toggle(function() {
                 $(this).next("em").animate({opacity: "show", bottom: "-155"}, "fast");
            }, function() {
                 $(this).next("em").animate({opacity: "hide", bottom: "-165"}, "fast");
            }); 
        }); 
```

Jquery 有一个内置的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:08:31.630

如果您想通过单击来切换元素的状态，则需要将其状态存储在其他地方——全局变量（不是一个好习惯）或`.data()`元素本身的变量中。

例子：

```
$(".menu a").bind('click', function () {
    $el = $(this).next('em');
    if ($el.data('switched')) {
        $el.data('switched',false)
           .animate({
            opacity: 1,
            bottom: "-155"
        }, "fast");
    } else {
        $el.data('switched',true)
           .animate({
            opacity: 0,
            bottom: "-165"
        }, "fast");
    };
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:09:26.143

尝试如下，

```
$(document).ready(function() {
    $(".menu a").click(function() {
        var $this = $(this);

        if (!$this.hasClass('clicked')) {
            $this.next("em").animate({
                opacity: "show",
                bottom: "-155"
            }, "fast");

            $this.addClass('clicked');
        } else {
            $this.next("em").animate({
                opacity: "hide",
                bottom: "-165"
            }, "fast");

            $this.removeClass('clicked');
        }

    });
}); 
```

[**演示**](http://jsfiddle.net/skram/6DYsS/1/)

# python - Python计算每秒/分钟写入文件的行数

> ID：10641927
> 
> 赞同：0
> 
> 时间：2012-05-17T19:02:38.880
> 
> 标签：python, count, line

我有兴趣构建一个 python 脚本，它可以为我提供关于每个间隔（可能是一分钟）写入文件的行数的统计信息。我有在数据进入时正在写入的文件，每个用户都有一个新行，通过外部程序传递数据。知道每个 x 有多少行给了我一个可以用于未来扩展计划的指标。输出文件由行组成，所有行的长度都相对相同，并且最后都带有行返回。我正在考虑编写一个脚本，该脚本执行以下操作：在特定点测量文件的长度，然后在未来的另一个点再次测量它，减去两者并得到我的结果......但我不知道如果这是理想的，因为测量文件的长度需要时间，这可能会扭曲我的结果。有没有人有任何其他想法？

根据人们所说的，我把它放在一起开始：

```
import os
import subprocess
import time
from daemon import runner
#import daemon

inputfilename="/home/data/testdata.txt"

class App():
    def __init__(self):
        self.stdin_path = '/dev/null'
        self.stdout_path = '/dev/tty'
        self.stderr_path = '/dev/tty'
        self.pidfile_path =  '/tmp/count.pid'
        self.pidfile_timeout = 5
    def run(self):
        while True:
            count = 0

            FILEIN = open(inputfilename, 'rb')
            while 1:
              buffer = FILEIN.read(8192*1024)
              if not buffer: break
              count += buffer.count('\n')
            FILEIN.close(  )
            print count
            # set the sleep time for repeated action here:
            time.sleep(60)

app = App()
daemon_runner = runner.DaemonRunner(app)
daemon_runner.do_action() 
```

它的工作是每 60 秒获取一次计数并将其打印到屏幕上，我的下一步是我猜的数学。

另一个编辑：我以一分钟的间隔添加了计数的输出：

```
import os
import subprocess
import time
from daemon import runner
#import daemon

inputfilename="/home/data/testdata.txt"

class App():
    def __init__(self):
        self.stdin_path = '/dev/null'
        self.stdout_path = '/dev/tty'
        self.stderr_path = '/dev/tty'
        self.pidfile_path =  '/tmp/twitter_counter.pid'
        self.pidfile_timeout = 5
    def run(self):
        counter1 = 0
        while True:
            count = 0

            FILEIN = open(inputfilename, 'rb')
            while 1:
              buffer = FILEIN.read(8192*1024)
              if not buffer: break
              count += buffer.count('\n')
            FILEIN.close(  )

            print count - counter1

            counter1 = count
            # set the sleep time for repeated action here:
            time.sleep(60)

app = App()
daemon_runner = runner.DaemonRunner(app)
daemon_runner.do_action() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:12:46.290

要评论您的想法（对我来说这似乎很合理），您需要测量的准确度如何？

我建议先测量*测量时间*。然后，给定您想要达到的相对精度，您可以计算连续测量之间的时间间隔，例如，如果测量需要***t毫秒并且您想要 1% 的精度，则不要在******100t*** ms 内进行多次测量。

虽然测量时间会随着文件的增长而增长，但您必须牢记这一点。

关于如何计算文件中的行数的提示：[是否有内置的 python 类比 unix 'wc' 来嗅探文件？](https://stackoverflow.com/questions/9855895/is-there-a-built-in-python-analog-to-unix-wc-for-sniffing-a-file/9855918#9855918)

关于如何测量时间的提示：[`time`](http://docs.python.org/library/time.html)模块。

PS 我刚刚尝试在 245M 文件上计时行计数器。第一次大约需要 10 秒（第一次运行时没有计时），但它总是低于 1 秒。也许在那里完成了一些缓存，我不确定。

# magento - Magento：Javascript未执行

> ID：10641928
> 
> 赞同：1
> 
> 时间：2012-05-17T19:02:42.113
> 
> 标签：magento

我在管理页面上插入了一个模板

```
<?xml version="1.0"?>
<layout>
<adminhtml_catalog_product_attribute_edit>
    <reference name="head">
        <action method="addJs"><js>extension/sctipt.js</js></action>
    </reference>
    <reference name="head">
        <block type="page/html" output="toHtml" name="custom_script" template="extension/script.phtml" before="-"/>

    </reference>

</adminhtml_catalog_product_attribute_edit> 
```

这会插入我的 phtml 文件，但它实际上并没有工作，如果目录输入类型是“custominput”（在新属性页面上），我想做的是显示选项面板我不知道为什么，这里是我的模板

```
<div>
<script type="text/javascript">
   alert('hallooooooo');

if($('frontend_input')){
    Event.observe($('frontend_input'), 'change', youBoxCheck);
}

function youBoxCheck(){
if($('matage-options-panel')){
    var panel = $('matage-options-panel');
    if($('frontend_input').value=='youbox')){
        panel.show();
    }
    else {
        panel.hide();
    }
}
}
</script> 
```

甚至没有执行警报，这是什么问题？

# asp.net-mvc-3 - 使用 Elmah、Log4Net 和健康监控的 MVC 日志记录

> ID：10641930
> 
> 赞同：0
> 
> 时间：2012-05-17T19:02:54.180
> 
> 标签：asp.net-mvc-3, log4net, asp.net-mvc-4, elmah, health-monitoring

我最近在 Darren 的博客 ( [http://dotnetdarren.wordpress.com/](http://dotnetdarren.wordpress.com/) ) 上找到了关于登录 MVC 的 6 部分文章系列。

这是一篇关于如何使用 Elmah、Log4Net、NLog 和健康监控以及使用单个 UI 来查看和管理条目的非常好的文章。

这篇文章写于 2010 年，但我已经在我正在开发的 MVC 4 应用程序上成功实现了它。日志记录工作正常，但在尝试查看组合 UI 中的条目时确实遇到了问题。

我收到以下错误：

***“System.Data.SqlClient.SqlException：无法解决 DISTINCT 操作的排序规则冲突。”***

如果我注释掉 Log4Net 的配置条目，我将不再收到错误消息，并且我能够看到 Elmah 和 Health Monitoring 的条目。此错误仅在尝试对 Log4Net 表中的条目进行 UNION 时发生。

有人对如何解决这个问题有任何想法吗？

提前感谢您的帮助。

**更新：** 这是出现问题的代码（VB.NET）：

```
For Each providerName As String In logProviders.Keys
    Dim logList As IQueryable(Of LogEventModel) = GetProvider(providerName).GetByDateRangeAndType(pageIndex, pageSize, startDate, endDate, logLevel)
    ' Error occurs on this line below, only when Log4Net is in use.
    list = If((list Is Nothing), logList, list.Union(logList))
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:30:31.987

我遇到了同样的问题（使用相同的博客系列）如果您还没有找到解决方案，这对我有帮助：

[无法解决等于操作中“SQL_Latin1_General_CP1_CI_AS”和“Latin1_General_CI_AS”之间的排序规则冲突](https://stackoverflow.com/questions/1607560/cannot-resolve-the-collation-conflict-between-sql-latin1-general-cp1-ci-as-and)

干杯

# c++ - 如何让 Rakefile 自动重建依赖文件？

> ID：10641934
> 
> 赞同：1
> 
> 时间：2012-05-17T19:03:13.917
> 
> 标签：c++, rake

我将 rake 用于 C++ 项目。我正在使用 gcc -MM -MF 自动生成依赖项，并使用“import”来导入它们。到目前为止，一切都很好。

然而，rake 并没有在应该重建“depends.mf”文件的时候重建它。Ruby 文档中的示例是错误的：

```
file ".depends.mf" => [SRC_LIST] do |t|
  sh "makedepend -f- -- #{CFLAGS} -- #{t.prerequisites} > #{t.name}" 
end

import ".depends.mf" 
```

*当 SRC_LIST包含*的任何文件也发生更改时，需要重建 .depends.mf 文件。例如，假设 SRC_LIST 是单个文件 a.cpp，并且 #includes a.hpp。如果我们修改a.hpp，我们可能会将其修改为#include new files，因此我们需要重新制作.depends.mf，但上面的行不会这样做。

所以我们真的希望 .depends.mf 依赖于源文件所依赖的相同的东西。这些东西都列在 .depends.mf 中。很容易破坏 .depends.mf 以提及它自己（gcc -MT 'foo.o foo.mf'），但这不起作用：rake 仅在阅读*之前*决定是否重建 .depends.mf 。它不会在阅读后重建它。

所以我该怎么做？切换到 SCONS？;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:01:09.483

答案很简单：

```
Rake::MakefileLoader.new.load(".depends.mf") if File.file?(".depends.mf") 
```

# python - 为什么 django 查询集不包含适合我的工作？

> ID：10641935
> 
> 赞同：1
> 
> 时间：2012-05-17T19:03:24.483
> 
> 标签：python, django

[根据本文档](https://docs.djangoproject.com/en/dev/topics/db/queries/)，我应该能够在我的 Django 对象变量上使用查询集“_contains”来过滤我的结果

但是当我实现这段代码时：

`cookbooks = Books.objects.filter (category_contains = 'cooking')`

我收到以下错误：

`Cannot resolve keyword 'category_contains' into field. Choices are: category, adder, date etc.`

为什么会这样？我还看到了[这个 StackOverflow 问题](https://stackoverflow.com/questions/687295/how-do-i-do-a-not-equal-in-django-queryset-filtering/1154977#1154977)，有人解释说只使用变量`category`意味着`category_exact`。但是，如果我写`category_exact`，我会得到一个类似的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:05:50.170

您需要使用双下划线`__`而不是单下划线`_`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T19:19:54.360

字段查找以两个下划线 ( `__`) 而不是一个 ( `_`) 为前缀。当您不熟悉语法时，一开始可能很难区分。

仔细检查一般的[字段查找](https://docs.djangoproject.com/en/dev/ref/models/querysets/#id4)文档，更具体地说是[包含](https://docs.djangoproject.com/en/dev/ref/models/querysets/#std%3afieldlookup-contains)文档。以下是 contains 文档中的示例，其中带有显示一两个下划线的注释：

```
Entry.objects.get(headline__contains='Lennon')
#                         __ <-- 2 _'s
#                     not _  <-- 1 _ 
```

# c# - 递归函数 C# 中的公共变量

> ID：10641939
> 
> 赞同：0
> 
> 时间：2012-05-17T19:03:52.843
> 
> 标签：c#, recursion, treeview, global-variables, treenode

我有一个在 C# 中递归的函数，我想编辑一个在函数外部声明的全局变量（我假设它是全局的，因为它之前是公共的）。由于某种原因，我不知道它无法在该特定函数中看到公共变量。它可以在我的代码的第一个函数中看到它，但不能在我需要访问它并更改它以节省大量时间打开大量文件的第二个函数中...

有什么理由无法访问它吗？如果是这样，我怎么能绕过它？

提前非常感谢！

```
public int[] timeInfo = new int[2];
   private void ListDirectory(TreeView treeView, string path) 
        {     
            treeView.Nodes.Clear();   
            var rootDirectoryInfo = new DirectoryInfo(path);    
            treeView.Nodes.Add(CreateDirectoryNode(rootDirectoryInfo)); 
        }

   private static TreeNode CreateDirectoryNode(DirectoryInfo directoryInfo) 

   {

       var directoryNode = new TreeNode(directoryInfo.Name);

       foreach (var directory in directoryInfo.GetDirectories())
            directoryNode.Nodes.Add(CreateDirectoryNode(directory));

       foreach (var file in directoryInfo.GetFiles())            
       {

           int check =0;                         
           try                
           {

               string s = "";                    
               s = directoryInfo.FullName + "\\" + file.Name;                    
               List<string> row, row2, row3 = new List<string>();

               using (StreamReader readFile = new StreamReader(s))
               {

                   row = (readFile.ReadLine().Split(',').ToList());
                   try 
                   {                           
                       row2 = (readFile.ReadLine().Split(',').ToList());
                       //timeInfo[0] = row2[0];
                   }
                   catch { check = 1; }
                   try
                   {
                       row3 = (readFile.ReadLine().Split(',').ToList());
                       //timeInfo[1] = row3[0];
                   }

                   catch { }
                }

                TreeNode[] headerNodes = new TreeNode[row.Count];

                for (int i = 0; i < row.Count; i++)
                {

                    headerNodes[i] = new TreeNode(row[i]);
                    if (check == 1)
                    {                       
                        headerNodes[i].BackColor = Color.Red;
                        headerNodes[i].ForeColor = Color.White;
                    }

                }
                directoryNode.Nodes.Add(new TreeNode(file.Name, headerNodes));
            }
            catch 
            {
                directoryNode.Nodes.Add(new TreeNode(file.Name));
            }
        }         
        return directoryNode; 
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T19:05:37.423

第二个函数是静态的，变量只存在于对象的上下文中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T19:06:00.557

该方法是静态的。变量不是。您不能从静态方法中访问类的非静态（实例）成员。类中的公共变量不是全局变量。您必须将其设为 public static 以使其成为全局变量（我不建议使用全局变量），例如：

```
public static int[] timeInfo = new int[2]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T19:06:05.567

您需要将其设为静态才能让您的静态函数看到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T12:59:26.430

由于您的方法，您的变量必须是静态的。因为方法是静态的，所以只能看到静态变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T19:07:07.967

您还需要将变量定义为静态：

```
public static int[] timeInfo = new int[2]; 
```

# sql-server - SQL Server 多表查询多个特定日期

> ID：10641941
> 
> 赞同：1
> 
> 时间：2012-05-17T19:03:56.260
> 
> 标签：sql-server

我有三张桌子：

表 1 - 成员

```
Id   Name
1    Member1
2    Member2 
```

表 2 - 活动

```
Id   Member_id   Activity    Date
 1      1        Activity1   2001-1-1
 2      1        Activity2   2001-2-1
 3      1        Activity3   2001-3-1
 4      2        Test        2010-4-1 
```

表 3 – 详细

```
Id  Activity_id Information
1   2       Information 
```

从以下可以看出，成员 id 1 具有三个活动：

```
SELECT Member.id, COUNT(*) AS number
FROM Member 
INNER JOIN Activity ON Activity.Member_ID = Member.id
GROUP BY Member.id 
```

我的问题是如何从表（1）中找到所有有 2 个活动的成员的第二个活动（表 2）的 ID 和日期，并从表 3 中检索与此活动 ID 相关的信息。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:36:03.183

行号功能将在这里为您提供帮助。

```
select *
from (
    select 
        *,
        rn = row_number() over (partition by member_id order by id)
    from
        activity
) activityWithRn
inner join detailed on detailed.activity_id = activityWithRn.id
where activityWithRn.rn = 2 
```

在这里，我按成员 ID 对数据进行了分区，并按其 ID 对活动进行了排序，但也许您想按日期排序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:42:45.490

同意@mouters，这个`ROW_NUMBER()`功能在这里确实很有帮助。但我认为排名的使用方式应该与@mouters 所建议的略有不同。

这是我的解决方案尝试：

```
WITH ranked AS (
  SELECT
    *,
    rn = ROW_NUMBER() OVER (PARTITION BY Member_id)
  FROM Activity
)
SELECT
  a.Member_id,
  number      = COUNT(*),
  Activity_id = MAX(d.Activity_id),
  Information = MAX(d.Information)
  Date        = MAX(CASE WHEN d.Id IS NOT NULL THEN a.Date)
FROM ranked a
  LEFT JOIN Detailed d ON a.Id = d.Activity_id AND a.rn = 2
GROUP BY a.Member_id 
```

# iphone - ios stretchableImageWithLeftCapWidth @2x 在右侧拧紧

> ID：10641943
> 
> 赞同：0
> 
> 时间：2012-05-17T19:04:05.207
> 
> 标签：iphone, objective-c, ios, uiimage

我正在尝试使用 stretchableImageWithLeftCapWidth 来制作一个按钮。我的代码如下所示：

```
UIImage* background = [self doHueAdjustFilterWithBaseImageName:@"green_btn_round" hueAdjust:hue];
background = [background stretchableImageWithLeftCapWidth:13 topCapHeight:13] ;
[self setBackgroundImage:background forState:UIControlStateNormal]; 
```

当我在 iphone 3gs 上运行它时，我得到了一个很好的结果：

![在此处输入图像描述](../Images/6fa4b46b47e368a4a50666152fcd1b21.png)

但是，当我在 iphone 4 上运行它时，结果在右侧搞砸了：

![在此处输入图像描述](../Images/e000b4c1fbe526e7ce3980e994eddccf.png)

我有一个普通版本的 green_btn_round 和一个 @2x 版本。普通版是：28x27，@2x 版是 56x54。

有人对这里可能发生的事情有任何想法吗？

提前致谢！

![在此处输入图像描述](../Images/964afbaf5da0158b93abf4e768e9fdd6.png)

![在此处输入图像描述](../Images/d98bd4244796f79b776510b8b324ce50.png)

# android - 只有背景的空心视图？如何调整自定义视图的大小？

> ID：10641949
> 
> 赞同：0
> 
> 时间：2012-05-17T19:04:11.563
> 
> 标签：android, view, resize

我已经用唯一的`onMeasure()`覆盖定义了我的自定义视图：

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    setMeasuredDimension((int)(iwidth * cellWidth), (int)(iheight * cellHeight));
} 
```

使用的变量是类成员，由一个名为`setStep()`.

我用按钮改变它：

```
button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            float step = hidingPanel.getStep();

            step += stepstep;

            hidingPanel.setStep(step);
            hidingPanel.invalidate();

            setTextButton();
        }

    }); 
```

布局如下

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<com.inthemoon.incubation.HidingPanel
    android:id="@+id/hidingPanel"
    android:background="@android:color/darker_gray"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:layout_marginTop="0dp"
    android:layout_marginLeft="0dp"
    />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentBottom="true"
    android:background="@android:color/black" 
    >
    <Button
        android:id="@+id/button"
        android:layout_width="200dp"
        android:layout_height="100dp" 
        />    
</LinearLayout>

</RelativeLayout> 
```

`HidingPanel`我的自定义视图在哪里。

我原以为我的观点会在按下按钮时增长，但事实并非如此。我发现 onMeasure() 在开始时只调用了几次，当维度为零时。如何在按钮点击后促进测量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:21:26.653

您需要调用 requestLayout(); 在视图的父级上。

# javascript - javascript匹配太多次

> ID：10641950
> 
> 赞同：2
> 
> 时间：2012-05-17T19:04:14.993
> 
> 标签：javascript, regex

我遇到了这个正则表达式的问题。我想返回这种模式的第一次出现`#2344....`。但不知何故，它正在返回所有事件。

```
var title = '#34 #24 pofejwopwefjopewfjpfeijefow'
pointsRegEx = /(#\d+){1}/;
points = title.match(pointsRegEx); 
```

JSFIDDLE：http: [//jsfiddle.net/KbGVU/1](http://jsfiddle.net/KbGVU/1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:09:36.767

您的正则表达式工作正常。在您的正则表达式中，您有`()`. 这将创建一个组。 `.match`返回一个数组。第一个元素是整个正则表达式匹配的结果，其他元素是您的正则表达式中的每个组。

`.match`正在返回您，`['#34','#34']`因为第一个是整个正则表达式，第二个是您的 regex 中的组`(#\d+)`。

注意：`{1}`不需要，因为它会默认匹配 1 个匹配项。

从这里返回的数组的属性`.match`记录在这里：[mozilla docs](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec#Description)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:21:19.860

得到了 chya ...您不需要将匹配项与 () 分组匹配...

[http://jsfiddle.net/KbGVU/3/](http://jsfiddle.net/KbGVU/3/)

`/#\d*/`应该这样做

# android - Android - 循环中的背景图像动画

> ID：10641951
> 
> 赞同：1
> 
> 时间：2012-05-17T19:04:16.293
> 
> 标签：android, animation

我正在尝试以一种从左到右但以循环方式移动的方式对图像（用作背景图像但它并不重要）进行动画处理。例如，如果图像大小与视图大小完全相同，则一旦最右侧的像素列超过右边缘，它将出现在视图的最左侧。

我已经想到了几种方法，但所有这些方法对我来说都太复杂了，我相信还有一种更“核心”的方法可以做到这一点。

谢谢，里奥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:18:39.530

如果`Bitmap`和 的`ImageView`像素大小完全相同，您可以根据需要手动移动像素。

```
int pixels[];
bitmap.getPixels(pixels, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());
shiftPixels(pixels, width, height);
bitmap.setPixels(pixels, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.setWidth()); 
```

只需创建原始位图的副本，但在`shiftPixels`复制像素时对像素应用线性移位。像这样的东西（未经测试的伪代码）；

```
void shiftPixels(int inPixels[], int bitmapHeight, int nPixHorizShift)
{

    int shift = bitmapHeight * nPixHorizShift;
    int outPixels[inPixels.size()];

    for i = 1:pixels.size()
       outPixels[(i + shift) % outPixels.size()] = inPixels[i];

    inPixels = outPixels;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:02:17.427

Could you use `canvas.drawBitmap(sourceRectangle,outputRectangle,null)` to cut a part from a strip bitmap background? This is a similar method that is used to animate a bitmap, but you would add one pixel to the sourceRectangle's left and right values until it hits the edge of the background strip.

# mongodb - 如何使用 mongo 存储和查询重复日期事件？

> ID：10641952
> 
> 赞同：4
> 
> 时间：2012-05-17T19:04:27.020
> 
> 标签：mongodb, mongodb-query

我想让我的用户为他们的活动设置一个时间表。这可能是一天，或者为了方便起见，我想让他们指定一个重复发生的事件（类似于 Outlook 约会）。

存储一天很容易，但我如何存储和查询重复发生的事件？我不需要做时间，因为我只是单独存储，如果他们需要不同的时间，我会让他们创建另一个事件。所以不：每周三 5 点和周四 3 点。

例子：

每周一、周二、周三、周四、周五、每周

每周的每个星期三

每个月的第二个星期二

几年前我问过这个问题：[如何存储和查询日程数据？](https://stackoverflow.com/questions/1804613/how-can-i-store-and-query-schedule-data)但它使用的是 SQL 解决方案（SQL Server）。我想使用 Mongo，所以一个端口是有序的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:38:25.247

如何存储原始日期和有关重复的信息？它是一个无限的实验领域，您可以发明自己的“重复事件格式”。例如：

```
event : {
   date: 17 May 2012 22.45, 
   recurring: "+2d"  # meaning, every second day after the date
} 
```

# php - 将 MySQL 数据库中的数据分布在多个表中

> ID：10641953
> 
> 赞同：0
> 
> 时间：2012-05-17T19:04:29.700
> 
> 标签：php, mysql, performance

假设我有一长串名称（大约 10 000 个）存储在 MySQL 数据库中。将它们分成多个表是否有任何用处，例如。按名称中的第一个字母？（表 A、表 B 等）它会加快查询速度吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:08:43.383

对于一个体面的硬件上的现代 RDBMS 来说，10k 条记录是相当小的数字。除非您显示更多细节，否则我会避免拆分表格 - 没有性能优势，而维护和开发将变得不必要的复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:15:58.270

我同意 10k 条记录根本不算多。确保使用索引来加快搜索速度。在编写查询和使用索引时学习使用[Explain 。](http://dev.mysql.com/doc/refman/5.5/en/explain.html)

另一个好主意是始终限制您的查询，除非您必须在一页上列出所有 10,000 个名称。例如，有一个列表并将显示一次限制为 100 个名称，并带有分页。

你会有更快的搜索速度，但我无法想象在你没有第一个字母的情况下搜索某些东西时必须编写会遍历 26 个不同表的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T19:09:54.047

我不这么认为。10 000 不算多。500万 是另一个故事。用好索引，让它们在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T19:09:21.130

no -对表进行[分区。](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)同一类型的数据属于一个表。您可以对多个索引进行分区 - 我将看看对列的子字符串进行分区只是为了我自己的利益，但它应该是可能的。

# javascript - JQuery 追加 AJAX

> ID：10641955
> 
> 赞同：9
> 
> 时间：2012-05-17T19:04:35.033
> 
> 标签：javascript, jquery, ajax, append

我正在使用以下脚本来加载一些 Wordpress 帖子。不幸的是，这取代了我的内容，我想附加到现有内容。

您对使用 AJAX 调用附加的建议是什么。

```
$('#load-posts a').click(function() { 
    if(pageNum <= max) {
        $('#content').load(nextLink + ' article',
            function() {            
                // Update page number and nextLink.
                // Update the button message.                   
                }
            }
        );          
    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T19:09:26.083

`load()`替换内容，但它基本上只是 $.get 的快捷方式，因此请改用它。

```
$('#load-posts a').click(function() { 
    if(pageNum <= max) {
        $.get(nextLink + ' article', function(data) {   
           $('#content').append(data);
        });
    }
}); 
```

如果使用 load() 过滤特定元素，则必须自己执行此操作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T19:09:14.183

load 替换父级的内容。一种方法是将内容加载到新的 div 中，然后将其附加到元素中。

```
$("<div>").load(nextLink + ' article', function() {
    $("#content").append($(this).html());
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T19:11:23.467

我会使用 getJson 方法来获取我有 3 个部分的 JSON 响应。一个用于 Content ，另一个用于 NextLink 和第三个用于 PateNumber。然后我将阅读 Json Result 并在相关位置使用它。

您可以像这样返回 JSON

```
{
    "Content": "<p>Some New Content</p>",
    "NextLink": "page.php?no=34",
    "PageNumber": "34"
} 
```

在您的 中`getJSON`，您可以阅读这些项目并使用它

```
$('#load-posts a').click(function() { 
   if(pageNum <= max) {
      $.getJSON(nextLink,function(jSonResult){         
          $('#content').append(jSonResult.Content);
          $("#nextLink").html(jSonResult.NextLink);
          $("#pageNumber").html(jSonResult.PageNumber);
      });           
   }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T19:00:50.403

从它的声音来看，您只想将带有新帖子信息的 div 添加到已经存在的 div 中，如下面的 html：

```
<div id="Posts">
  <!-- post -->
  <!-- post -->  
  <!-- post -->  
</div> 
```

你可以简单地做：

```
jQuery('#Posts').append(jQuery('<div>').load(...)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T19:17:37.080

我个人会使用[$.get()](http://api.jquery.com/jQuery.get/)

```
$('#load-posts a').click(function() { 
    if(pageNum <= max) {
        var nextArticles = $.get(nextLink + ' article')

        nextArticles.success(function() {
            // Update page number and nextLink.
            // Update the button message. 
        };
    }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T19:09:27.267

```
if(pageNum <= max) {
        $('body').append($('<div id="hiddenContainer" style="display:none"></div>')); // a hidden container to store response
        $('#hiddenContainer').load(nextLink + ' article',
            function() {            
                $('#content').append($('#hiddenContainer').html());                 
                }
            }
        );          
    } 
```

# lua - 从 C 中操作 Lua 变量

> ID：10641956
> 
> 赞同：0
> 
> 时间：2012-05-17T19:04:39.433
> 
> 标签：lua, inline

我正在尝试修改 C 中的 Lua 变量。我将 Lua 用户数据传递给 C 函数，C 函数使用它们并更改它们。我也希望在 Lua 中更改这些值。这是我的代码 -

卢阿 -

```
 t = require 'coroutines'
 function foo()
      bar = 0
      foo1 = t.colorHistogram(bar)
      print(bar)
 end 
```

C -

在这里我不知道该放什么。我读了两个如何交换数据。Lua 创建一个堆栈，它将参数推入其中，C 使用 lua_Object 访问这些参数。所以

```
 int foo = lua_tonumber(L,1);
 foo = 5; 
```

会将 foo 初始化为 0 并将其设置为 5。但是，Lua 中的 print 语句仍然显示 0 作为值，因为它不是存储 Lua 中的变量“bar”的内存正在被修改。我想知道是否有办法修改内存。我还尝试用修改后的值替换堆栈上的数据。那也不行。

任何帮助表示赞赏。谢谢你。

编辑**

我想我最初的问题不是很清楚。我试过对不起。反正我会努力的

我基本上想要做的是将一个值传递给内联 C，让 C 修改该值并能够按照在 Lua 中修改的方式读取它。我不太关心修改那个特定的内存位置或变量。只要有某种方法可以让我读取 C 在 Lua 中修改的值，我就会接受。

```
 foo1, bar = t.colorHistogram(bar) 
```

将不起作用，因为“t”是 lua 函数调用，而 colorHistogram 是该 Lua 函数中的内联 C 函数。如果我将 bar 传递给 t.colorHistogram，我需要 Lua 函数“t”才能返回 bar，这意味着我需要 Lua 函数“t”来读取修改后的 bar。这就是我不知道该怎么做。感谢您的回复顺便说一句。结束编辑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:16:20.220

变量不传递给函数；*值*被传递给函数。数字`0`是一个值。`local bar = 0; t.colorHistogram(bar);`在功能上与 没有什么不同`t.colorHistogram(0)`。

您不能在 Lua 函数中操作参数变量的内容，因为 Lua 函数不是传递变量。他们被传递了一个变量的*内容*。

请注意，它是 C 函数还是 Lua 函数都没有关系。这就是 Lua 参数传递的工作原理。参数只是*输入*；如果要修改“变量”，则它必须是全局变量或调用者存储到该变量中的输出：

```
bar = 0
foo1, bar = t.colorHistogram(bar) 
```

# c# - System.Data 程序集未找到

> ID：10641958
> 
> 赞同：9
> 
> 时间：2012-05-17T19:04:43.917
> 
> 标签：c#, .net-assembly, system.data

`System.Data`我在我的 Windows 服务项目中有一个参考。我不断收到`Exception`：

> 无法加载文件或程序集 'System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 或其依赖项之一。该系统找不到指定的文件。

我将其附加`FusionLog`到我的代码中并发现了以下内容。只有视觉工作室在`System.Data`看这里：

> 从以下位置加载程序集管理器：C:\windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll

它应该在这里看（所有其他程序集都是 System.Data）

> 从以下位置加载程序集管理器：C:\windows\Microsoft.NET\Framework\v4.0.30319\clr.dll

如何将我的`System.Data`文件指向正确的位置？

我的猜测是`Microsoft Commerce Server`dll 可能正在引用 2.0 文件夹。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T13:52:49.130

将此添加到 app.config..

```
 <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
  </startup> 
```

如果您需要在 Windows 服务中加载旧版本的 dll，您必须添加它。对于 Web 服务，iis 会自动处理它，但对于 Windows 服务则不然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:08:12.960

确保您的项目设置为 .Net Framework 4。如果不这样做，请将其设置为完整配置文件（不仅仅是客户端）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T14:52:20.693

如果您在解决方案资源管理器中选择引用的程序集，请验证运行时版本是否正确（参见下图）。如有必要，您可以删除引用并重新添加以修复它。

此外，如果您使用的是 app.config，请确保它以正确的运行时版本为目标。

![在此处输入图像描述](../Images/aae26668664ed3ec9b9c1a9396ded7c7.png)

# css - bundle exec rake 资产：预编译错误

> ID：10641962
> 
> 赞同：0
> 
> 时间：2012-05-17T19:05:02.887
> 
> 标签：css, ruby-on-rails-3, rake, css-float

当我运行 rake asset:precompile 时，出现以下错误：

```
Invalid CSS after "float:left": expected "{", was ";" 
```

我已经缩小了有问题的样式表文件。我已经经历了一百万次，似乎找不到问题所在。

谁能为我澄清这个错误？看起来很简单，但我搜索了所有 float:left 并没有发现任何问题。

它会抱怨这种格式吗？

```
.label img {
  float:left;
} 
```

我错过了什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:46:03.157

我发现了问题。在 float:left 上方缺少一个分号；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:49:09.577

（你应该先remvoe它，看看它是否修复了错误，然后你就会知道问题所在）

CSS 选择器语法错误。试试这个

```
img.label { /*all img tags with class label*/
  float: left;
} 
```

# c# - 使用动态设置不受控制（第三方）密封类型的不同属性

> ID：10641966
> 
> 赞同：5
> 
> 时间：2012-05-17T19:05:14.597
> 
> 标签：c#, .net, oop, c#-4.0, dynamic

给定以下程序：

```
using System;
using System.Collections.Generic;

namespace ConsoleApplication49
{
    using FooSpace;

    class Program
    {
        static void Main(string[] args)
        {
            IEnumerable<FooBase> foos = FooFactory.CreateFoos();

            foreach (var foo in foos)
            {             
                HandleFoo(foo);
            }
        }

        private static void HandleFoo(FooBase foo)
        {
            dynamic fooObject = foo;
            ApplyFooDefaults(fooObject);
        }

        private static void ApplyFooDefaults(Foo1 foo1)
        {
            foo1.Name = "Foo 1";

            Console.WriteLine(foo1);
        }

        private static void ApplyFooDefaults(Foo2 foo2)
        {
            foo2.Name        = "Foo 2";
            foo2.Description = "SomeDefaultDescription";

            Console.WriteLine(foo2);
        }

        private static void ApplyFooDefaults(Foo3 foo3)
        {
            foo3.Name    = "Foo 3";
            foo3.MaxSize = Int32.MaxValue;

            Console.WriteLine(foo3);
        }

        private static void ApplyFooDefaults(Foo4 foo4)
        {
            foo4.Name        = "Foo 4";
            foo4.MaxSize     = 99999999;
            foo4.EnableCache = true;

            Console.WriteLine(foo4);
        }

        private static void ApplyFooDefaults(FooBase unhandledFoo)
        {
            unhandledFoo.Name = "Unhandled Foo";
            Console.WriteLine(unhandledFoo);
        }
    }    
}

/////////////////////////////////////////////////////////
// Assume this namespace comes from a different assembly
namespace FooSpace
{
    ////////////////////////////////////////////////
    // these cannot be changed, assume these are 
    // from the .Net framework or some 3rd party
    // vendor outside of your ability to alter, in
    // another assembly with the only way to create
    // the objects is via the FooFactory and you
    // don't know which foos are going to be created
    // due to configuration.

    public static class FooFactory
    {
        public static IEnumerable<FooBase> CreateFoos()
        {
            List<FooBase> foos = new List<FooBase>();
            foos.Add(new Foo1());
            foos.Add(new Foo2());
            foos.Add(new Foo3());
            foos.Add(new Foo4());
            foos.Add(new Foo5());

            return foos;
        }
    }

    public class FooBase
    {
        protected FooBase() { }

        public string Name { get; set; }

        public override string ToString()
        {
            return String.Format("Type = {0}, Name=\"{1}\"", this.GetType().FullName, this.Name);
        }
    }

    public sealed class Foo1 : FooBase
    {
        internal Foo1() { }
    }

    public sealed class Foo2 : FooBase
    {
        internal Foo2() { }

        public string Description { get; set; }

        public override string ToString()
        {
            string baseString =  base.ToString();
            return String.Format("{0}, Description=\"{1}\"", baseString, this.Description);
        }
    }

    public sealed class Foo3 : FooBase
    {
        internal Foo3() { }

        public int MaxSize { get; set; }

        public override string ToString()
        {
            string baseString =  base.ToString();
            return String.Format("{0}, MaxSize={1}", baseString, this.MaxSize);
        }
    }

    public sealed class Foo4 : FooBase
    {
        internal Foo4() { }

        public int MaxSize { get; set; }
        public bool EnableCache { get; set; }

        public override string ToString()
        {
            string baseString =  base.ToString();
            return String.Format("{0}, MaxSize={1}, EnableCache={2}", baseString,
                                                                      this.MaxSize,
                                                                      this.EnableCache);
        }
    }

    public sealed class Foo5 : FooBase
    {
        internal Foo5() { }
    }
    ////////////////////////////////////////////////
} 
```

产生以下输出：

```
Type = ConsoleApplication49.Foo1, Name="Foo 1"
Type = ConsoleApplication49.Foo2, Name="Foo 2", Description="SomeDefaultDescription"
Type = ConsoleApplication49.Foo3, Name="Foo 3", MaxSize=2147483647
Type = ConsoleApplication49.Foo4, Name="Foo 4", MaxSize=99999999, EnableCache=True
Type = ConsoleApplication49.Foo5, Name="Unhandled Foo"
Press any key to continue . . . 
```

我选择在这里使用动态以避免以下情况：

1.  使用 switch/if/else 语句，例如`switch(foo.GetType().Name)`
2.  显式类型检查语句，例如`foo is Foo1`
3.  显式转换语句，例如`(Foo1)foo`

由于`dynamic`转换，正确的`ApplyFooDefaults`方法会根据传入的对象类型被调用`HandleFoo(FooBase foo)`。任何没有适当`ApplyFooDefaults`处理程序方法的对象都属于“catch all”方法，`ApplyFooDefaults(FooBase unhandledFoo)`.

这里的一个关键部分是 FooBase 和派生类代表了我们无法控制的类型，并且无法派生以添加额外的接口。

这是动态的“好”用途，还是可以在不增加额外复杂性的情况下以 OOP 方式解决这个问题，并且考虑到约束以及这只是在这些对象上设置默认属性值的事实？

****更新****

在 Bob Horn 的回答之后，我意识到我的场景并不完整。附加约束：

1.  你不能直接创建Foos，你必须使用FooFactory。
2.  您不能假设 Foo 类型，因为 Foo 类型是在配置中指定的并且是反射式创建的。

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:58:27.207

好吧，单独的对象初始化应该发生在类型的构造函数中。如果工厂未能做到这一点并且仅输出具有基本类型的对象，那么显然超出 OOP 模式来基于类型初始化对象。

唉，运行时类型检测是要走的路，而动态就是这样做的，所以是的，您的解决方案非常漂亮。（但第三方库不是，因为它强制您使用动态类型）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:05:44.057

做到这一点并避免动态的一种可能方法是制作 ApplyFooDefaults() 扩展方法：

```
public static class FooExtensions
{
    public static void ApplyFooDefaults(this Foo1 foo1)
    {
        foo1.Name = "Foo 1";

        Console.WriteLine(foo1);
    }

    public static void ApplyFooDefaults(this Foo2 foo2)
    {
        foo2.Name = "Foo 2";
        foo2.Description = "SomeDefaultDescription";

        Console.WriteLine(foo2);
    }

    public static void ApplyFooDefaults(this Foo3 foo3)
    {
        foo3.Name = "Foo 3";
        foo3.MaxSize = Int32.MaxValue;

        Console.WriteLine(foo3);
    }

    public static void ApplyFooDefaults(this Foo4 foo4)
    {
        foo4.Name = "Foo 4";
        foo4.MaxSize = 99999999;
        foo4.EnableCache = true;

        Console.WriteLine(foo4);
    }

    public static void ApplyFooDefaults(this FooBase unhandledFoo)
    {
        unhandledFoo.Name = "Unhandled Foo";
        Console.WriteLine(unhandledFoo);
    }
} 
```

在您的程序中的某个时刻，您必须创建每个 foo. 当你这样做时，调用扩展方法：

```
static void Main(string[] args)
{
    List<FooBase> foos = new List<FooBase>();

    Foo1 foo1 = new Foo1();
    foo1.ApplyFooDefaults();
    foos.Add(foo1);

    Foo2 foo2 = new Foo2();
    foo2.ApplyFooDefaults();
    foos.Add(foo2);

    Foo3 foo3 = new Foo3();
    foo3.ApplyFooDefaults();
    foos.Add(foo3);

    Foo4 foo4 = new Foo4();
    foo4.ApplyFooDefaults();
    foos.Add(foo4);

    Foo5 foo5 = new Foo5();
    foo5.ApplyFooDefaults();
    foos.Add(foo5);

    Console.WriteLine("Press any key to end.");
    Console.ReadKey();
} 
```

![在此处输入图像描述](../Images/9a430bed912c32e405035474c16939f0.png)

# c - c printf 用于宏定义类型

> ID：10641967
> 
> 赞同：1
> 
> 时间：2012-05-17T19:05:31.157
> 
> 标签：c

`if`我在宏中有一个 typedef ，例如：

```
#ifdef BLA_BLA
typedef int typeA
#elseif 
typedef double tyeA
#endif
printf("%d" , a); printf("%l" , a); 
```

我想知道当我为这种情况编写 printf 时最好的方法是什么？（`%d`或`%l`）。

我知道我也可以在宏中定义一个固定的字符串。但这是最好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T19:11:28.890

也可以使用宏来定义格式字符串。

```
#ifdef BLA_BLA
typedef int typeA;
#define FORMAT "%d"
#elseif 
typedef double typeA;
#define FORMAT "%f"
#endif

...
typeA a = ...;
printf("Hello " FORMAT " there", a); printf(FORMAT , a); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:01:51.840

您真的想将类型定义为整数或浮点数吗？它们都是数字的，但是它们的行为在很多方面都如此不同，以至于编写在任何一种情况下都能正常工作的代码都将变得很困难。

在许多情况下，您可以转换为足够宽以涵盖两种可能类型的范围的类型。一个简单的例子：

```
#include <stdio.h>

#ifdef BLA_BLA
typedef int num_type;
#else
typedef long num_type;
#endif

int main(void) {
    num_type x = 42;
    printf("x = %ld\n", (long)x);
    return 0;
} 
```

更一般地，您可以分别转换为`intmax_t`or ，在or`uintmax_t`中定义，使用or 。`<stdint.h>``<inttypes.h>``"%jd"``"%ju"`

您*几乎*可以通过将所有内容转换为 来做同样的事情`long double`，但是对于大整数值，这可能会失去精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:08:00.283

如果是我，我不会直接将`typeA`参数传递给`printf`；我将创建另一个返回值的字符串表示形式的`typeA`函数，并将该字符串传递给`printf`（或显示它所需的任何其他函数）。

```
char *formatTypeA(typeA val, char *buf, size_t len)
{
  #ifdef BLA_BLA
  #define FORMATCHAR d
  #else
  #define FORMATCHAR f
  #endif

  char formatStr[SIZE]; // where SIZE is large enough to handle the longest
                        // possible size_t value plus "%" plus the format
                        // character plus the 0 terminator
  sprintf(formatStr, "%%%zu" FORMATCHAR, len - 1); 
  sprintf(buf, formatStr, val);
  return buf;
}

int main(void)
{
  typeA foo;
  char output[10];
  ...
  printf("foo = %s\n", formatTypeA(foo, output, sizeof output));
  ...
} 
```

可能有更好的方法来做到这一点。

**编辑**

这是我倾向于不经常使用 typedef 的原因之一，顺便说一句；如果表示很重要（例如在这种情况下），那么您真的不想向使用它的人隐藏该信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T20:53:37.810

还有另一种选择 - 定义一个简短的辅助函数，这样您就不必在整个代码中到处使用 ifdef：

```
#ifdef BLA_BLA
typedef int typeA
#else
typedef double typeA
#endif

inline void print_typeA(const typeA val) {
#ifdef BLA_BLA 
  printf("%d" , val); 
#else
  printf("%e" , val);
#endif
}

somefunc()
{ typeA xyz;

  print_typeA(xyz);
} 
```

# c - Helgrind (Valgrind) 和 OpenMP (C)：避免误报？

> ID：10641972
> 
> 赞同：40
> 
> 时间：2012-05-17T19:05:48.077
> 
> 标签：c, openmp, valgrind, race-condition, false-positive

Valgrind 线程错误检测工具 Helgrind 的文档，可在[此处找到](http://valgrind.org/docs/manual/hg-manual.html)

警告说，如果你使用 GCC 编译你的 OpenMP 代码，GCC 的 OpenMP 运行时库 ( **libgomp.so** ) 将导致数据竞争的误报报告的混乱，因为它使用原子机器指令和 Linux futex 系统调用而不是 POSIX pthreads 原语。但是，它告诉您可以通过使用`--disable-linux-futex`配置选项重新编译 GCC 来解决此问题。

所以我尝试了这个。我使用配置选项编译并安装到本地目录（**~/GCC_Valgrind/gcc_install**）一个新的 GCC 版本 4.7.0（撰写本文时的最新版本）`--disable-linux-futex`。然后我创建了一个没有可见数据竞争的小型 OpenMP 测试程序 ( **test1.c )：**

```
/* test1.c */

#include <omp.h>
#include <stdio.h>
#include <stdlib.h>

#define NUM_THREADS 2

int a[NUM_THREADS];

int main(void) {
        int i;
#pragma omp parallel num_threads(NUM_THREADS)
        {
                int tid = omp_get_thread_num();
                a[tid] = tid + 1;
        }
        for (i = 0; i < NUM_THREADS; i++)
                printf("%d ", a[i]);
        printf("\n");
        return EXIT_SUCCESS;
} 
```

我编译这个程序如下

```
~/GCC_Valgrind/gcc_install/bin/gcc -Wall -fopenmp  -static -L~/GCC_Valgrind/gcc_install/lib64 -L~/GCC_Valgrind/gcc_install/lib -o test1 test1.c 
```

但是，我收到了 30 份误报数据竞争报告！——所有这些都发生在**libgomp**代码中。然后我编译了没有标志的**test1.c**`-static`，并再次运行 Helgrind。这一次，我只收到了 9 个误报数据竞争报告，但这仍然太多——而且，如果没有`-static`标志，我无法在**libgomp**代码中追踪假定的竞争。

有没有人找到一种方法来减少（如果不是消除）来自 Helgrind 的误报数据竞争报告的数量，该报告应用于使用 GCC 编译的 OpenMP 程序？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T18:10:09.133

很抱歉将其作为答案，因为它更像是评论，但是作为评论太长了，所以这里是：

从您引用的网站。

> GNU OpenMP（GCC 的一部分）的运行时支持库，至少对于 GCC 版本 4.2 和 4.3。GNU OpenMP 运行时库 (libgomp.so) 使用原子内存指令和 futex 系统调用的组合构建自己的同步原语，这会导致自 Helgrind 以来完全混乱，因为它无法“看到”那些。
> 
> 幸运的是，这可以使用配置时选项（对于 GCC）来解决。从源代码重建 GCC，并使用 --disable-linux-futex 进行配置。这使得 libgomp.so 改为使用标准的 POSIX 线程原语。请注意，这是使用 GCC 4.2.3 测试的，尚未使用更新的 GCC 版本重新测试。我们希望听到有关更新版本的任何成功或失败的信息。

正如您在帖子中提到的，这与`libgomp.so`，但这是一个共享对象，所以我不知道如何传递 -static 标志并仍然使用该库。我只是被误导了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T11:27:00.143

使其工作的步骤：

1.  使用重新编译 gcc（包括 libgomp）`--disable-linux-futex`
2.  确保在编译程序时使用 futex free gcc。
3.  确保系统在执行程序时会加载 futex free libgomp（该库通常位于`GCC-OBJ-DIR/PLATFORM/libgomp/.libs`. 例如通过设置`LD_LIBRARY_PATH`环境变量：

> 导出 LD_LIBRARY_PATH=~/gcc-4.8.1-nofutex/x86_64-unknown-linux-gnu/libgomp/.libs：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-01T13:40:12.990

另请注意，如果`omp_set_lock`在代码中使用，则`omp.h`必须替换路径，因为锁结构大小不同。见[https://xrunhprof.wordpress.com/2018/08/27/tsan-with-openmp/](https://xrunhprof.wordpress.com/2018/08/27/tsan-with-openmp/)

# css - IE 8,9 与 CSS3 不兼容

> ID：10641977
> 
> 赞同：0
> 
> 时间：2012-05-17T19:06:01.500
> 
> 标签：css, internet-explorer, scroll

我可能问得太多了，但我想知道是否有人可以帮助我处理这个网站的 CSS：http: [//parkoura.tk/a/sandbox/](http://parkoura.tk/a/sandbox/)

我看到很多关于 gow IE 呈现页面的不同之处。我意识到为什么@font-face 不起作用。

主要关注页面右侧的双滚动条（content.css 和 master.css），以及中央导航箭头的显示方式，以及中央列底部的列表。

以下是突出显示问题的屏幕截图：

![](../Images/af42ce0cbe67610ebbd4c1aaf64c7f25.png)

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:08:21.760

首先，我建议包括 Modernizr 库： http: [//modernizr.com/](http://modernizr.com/)

希望这可以解决大多数（如果不是全部）您的兼容性问题。请发布 Modernizr 无法解决的任何剩余问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:23:26.403

尝试使用 ID="container" 摆脱 Div 中的溢出属性。我也有一种感觉，让你的箭头坐在边缘可能是一个问题。希望这行得通。

# objective-c - 是否允许“更改”/滥用/覆盖 Objective C 中块的签名，如下所示？

> ID：10641980
> 
> 赞同：5
> 
> 时间：2012-05-17T19:06:11.013
> 
> 标签：objective-c, objective-c-blocks

这是允许的吗？为什么？

```
void (^bar)(NSNumber *) = ^(NSNumber *number) {
    NSLog(@"Value is %@, class is %@.", number, [number class]);
};
bar([NSNumber numberWithInt:10]);

void (^foo)(id) = bar;
foo([NSDate date]); 
```

输出是：

```
Value is 10, class is __NSCFNumber.
Value is 2012-05-17 18:54:14 +0000, class is __NSDate. 
```

我找不到任何相关的东西来解释这一点。您能否提供涵盖此内容的目标 c 块规范的链接？

目前我正在开发一个基于块的 UITableView 子类，如果我可以安全地使用它，它会让事情变得容易得多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T20:17:27.067

其工作原理的根本原因是：

[1] Objective-C（和 C）在编译时不是强类型的。虽然编译器可能会产生警告，但它们通常可以通过（有时是类型不安全的）强制类型转换来消除。在这种情况下，您的分配是无效的，因为您正在分配一个块引用，该块引用声明它*需要*一个与另一个块引用兼容的参数值，`NSNumber *`而另一个块引用只声明它需要一个与`id`. 这是类型不安全的，有时会产生*运行时*错误，见下文。

[2] Objective-C 运行时消息传递是动态的，即消息的目标代码在代码运行时确定。这意味着您`number`在块中的所有使用都不是特定于您在运行`NSNumber`时传递`NSDate`合适的方法时仍然动态定位的。但是将您的更改`bar`为：

```
void (^bar)(NSNumber *) = ^(NSNumber *number)
{
   NSLog(@"Value is %@, class is %@, int value is %d.", number, [number class], [number intValue]);
}; 
```

你会看到*运行时*错误。

[3]`[NSNumber numberWithInt:10]`和`[NSDate date`] 都被声明为返回 type 的值`id`，而不是你可能期望的`NSNumber *`& 。`NSDate *`这意味着您不需要`foo`，您只需键入：

```
bar([NSDate date]); 
```

并在没有任何警告的情况下获得相同的结果...作为另一个示例，请考虑以下内容：

```
NSNumber *num = [NSNumber numberWithInt:3];
NSDate *date = num;         // produces a warning
id erase = num;             // erase type info and do...
date = erase;               // effectively the same assignment, no warning 
```

**采取方式**：Objective-C**不是**一种类型安全的语言，编译器在许多情况下会警告你潜在的问题，但它**不会**在所有情况下都这样做。

# python - Google App Engine Python 错误：“Blob() 参数应该是 str 实例，而不是 unicode”

> ID：10641981
> 
> 赞同：2
> 
> 时间：2012-05-17T19:06:20.997
> 
> 标签：python, image, google-app-engine

我一直在尝试将图像保存在 GAE 数据存储中，但出现以下错误：

***“Blob() 参数应该是 str 实例，而不是 unicode”。***

任何想法如何克服这个问题？

我读取和（尝试）写入图像的方式是：

```
...
avatar_data = self.request.get('pic_input') # pic_input is the name of the form
artist.picture = db.Blob(avatar_data) # artist is an entity type that has a picture field of type db.Blob()
... 
```

我还尝试将 avatar_data 包装在 str() 中，它实际上将字符串保存在数据存储中，但我的文件没有显示！

先感谢您 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:39:43.703

你想做什么？

来自的响应`pic_input`是一个 unicode 字符串，但您试图将其存储为就好像它只是二进制位一样。这些是二进制位还是字符串？

如果它们是二进制位，那么它们首先不应该被编码为 un​​icode。

如果它是一个字符串，那么你不应该将它存储在 a 中，`Blob`而是 a `Text`or `String`。

表单上传发送编码字符串（unicode）的原因是，您没有在表单中使用正确的 enctype。

```
<form method = "post" enctype="multipart/form-data" > 
```

应该解决这个问题，您的代码就可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T19:32:36.760

编码吧！

```
avatar_data.encode('utf-8') 
```

将 utf-8 替换为您想要的编码，例如`'ascii'`.

# shell - 如何在 AIX 中创建一个空的 tar 文件

> ID：10641985
> 
> 赞同：2
> 
> 时间：2012-05-17T19:06:34.963
> 
> 标签：shell, tar, aix

*我的第一个问题...*

如何在AIX 中创建一个空的tar 文件，我已经尝试了好几次，但都不成功。

`$touch myfile.tar`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:09:33.420

尝试这个。在 Linux 中工作。

```
tar cvf your-empty-tar-filename.tar --files-from /dev/null 
```

# android - 安卓蓝牙服务禁用

> ID：10641986
> 
> 赞同：0
> 
> 时间：2012-05-17T19:06:36.820
> 
> 标签：android, bluetooth, telephony

我的应用程序的一小部分旨在与任何汽车收音机一起使用。我遇到的问题是，如果用户已经与汽车进行了蓝牙配对并且他们添加了新联系人，则除非重置蓝牙连接（地址簿已重新加载到汽车），否则它不会在汽车上同步。

我能够做到这一点的唯一方法是快速启用和禁用蓝牙，但这需要太长时间。是否有一项特定的服务，我可以禁用某种电话服务，然后重新启用它，以便汽车接收新的联系人？

顺便说一句，这发生在大多数汽车上。

如果有人有想法，请告诉我。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:35:36.950

也许蓝牙连接只需要轻推——唤醒连接的东西。

如何创建与汽车蓝牙列出的服务之一的虚拟连接。找出汽车服务之一的 UUID，然后通过 socket.connect 连接到该 UUID。

# math - 具有 3 个给定点的 3D 插值（等距）

> ID：10641991
> 
> 赞同：2
> 
> 时间：2012-05-17T19:07:00.410
> 
> 标签：math, computational-geometry, interpolation

我正在开发一个 3D 国际象棋游戏，我需要能够以该轨迹描述抛物线（用于棋子动画）的方式计算轨迹的 X、Y、Z 位置。

因此，对于给定的等距点 p1=(x1,y1,z1)、p2=(x2,y2,z2) 和 p3(x3,y3,z3)，我需要以下公式（或通式）：

```
x=f(y,z)=???  
y=f(x,z)=???   
z=f(x,y)=??? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:23:38.763

对于每个分量`x`，`y`并`z`考虑由 定义的单独抛物线

```
x(t) = x1 - t*(3*x1-4*x2+x3) + 2*t^2*(x1-2*x2+x3)     //t=0..1
y(t) = y1 - t*(3*y1-4*y2+y3) + 2*t^2*(y1-2*y2+y3)     //t=0..1
z(t) = z1 - t*(3*z1-4*z2+z3) + 2*t^2*(z1-2*z2+z3)     //t=0..1 
```

`t=0`那时`x=x1`，`t=0.5`那时`x=x2`，`t=1`那时`x=x2`。_ 同样对于`y(t)`和`z(t)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T20:20:24.877

如果开始和结束 y 值相同，您可以使用参数方程来描述抛物线，该方程可以通过几个步骤导出。

给定startingHeight和apexHeight，

```
y(t) = A(t^2) + B(t) + C
y(0) = startingHeight
y(0.5) = apexHeight
y(1) = startingHeight

y(0) = startingHeight = A*0 + B*0 + C
C = startingHeight
y(t) = A(t^2) + B(t) + startingHeight

y(1) = startingHeight = A + B + startingHeight
0 = A+B
A = -B
y(t) = -B(t^2) + B(t) + startingHeight

y(0.5) = apexHeight = -B(0.25) + B(0.5) + startingHeight
apexHeight = B(0.5 - 0.25) + startingHeight
apexHeight - startingHeight = B(0.25)
B = (apexHeight - startingHeight)/4.0 
```

现在您知道了 A、B 和 C，您可以为 y 编写方法：

```
function y(startingHeight, apexHeight, t){
    B = (apexHeight - startingHeight) / 4;
    A = -B;
    C = startingHeight;
    return A*t*t + B*t + C;
} 
```

x 和 z 更容易，因为它们只是从头到尾线性增加：

```
x(t) = At + B
x(0) = startX
x(1) = endX

x(0) = startX = A*0 + B
B = startX
x(t) = At + startX

x(1) = endX = A*1 + startX
A = endX - startX

x(t) = (endX - startX) * t + startX 
```

（z 有一个与 x 相同的公式 - 只需将所有 x 替换为 z）

```
function x(start, end, t){
    A = (end - start);
    B = start;
    return A*t + B;
}

function z(start, end, t){
    A = (end - start);
    B = start;
    return A*t + B;
} 
```

现在您可以在时间 t 找到棋子的 3d 位置：

```
function parabola(xBegin, xEnd, zBegin, zEnd, yStart, yApex, t){
    return [x(xBegin,xEnd,t), y(yStart,yApex,t), z(zBegin,zEnd,t)];
} 
```

# c# - 桥接器与适配器设计模式

> ID：10641999
> 
> 赞同：20
> 
> 时间：2012-05-17T19:08:06.720
> 
> 标签：c#, wcf, design-patterns, adapter, bridge

一位同事向我询问了我在 ASP.net 客户端应用程序中实现 WCF Windows 服务的设计模式，我真的不知道它是**Bridge**还是**Adapter**！

这是实现：

*   我已获得服务合同
*   定义了一个类似于我的 WCF 数据合约的新接口
*   我创建了一个 WCF 客户端并将其包装在新界面中
*   将新的接口操作映射到原来的 WCF 客户端（我在这里做了一些日志记录/错误处理）

我一直认为它是**适配器**模式的实现，但我真的不知道为什么不是**Bridge**！

我已经阅读了 SO、GoF 和维基百科中的所有帖子，但这真的毫无意义！

据我了解，这两种模式都**指向一个现有类型**，都**将抽象与其实现分离，**我错过了一点吗？

这是来自GoF的：

> 这些模式之间的主要区别在于它们的意图。适配器专注于解决两个现有接口之间的不兼容性。它不关注这些接口是如何实现的，也不考虑它们如何独立发展。这是一种让两个独立设计的类一起工作而无需重新实现一个或另一个的方法。另一方面，桥接了一个抽象及其（可能有很多）实现。它为客户端提供了一个稳定的接口，即使它允许您改变实现它的类。随着系统的发展，它还适应新的实现。

我不完全理解上面的说法，

1.  这是否意味着如果我在设计时改变适配者或更改原始接口的实现，那么它就是**桥接模式**？
2.  差异听起来微不足道，在实现/抽象方面还有其他差异吗？
3.  谁能知道开发**后**使用了什么实现 ？
4.  谁能给我一个很好的桥接模式示例以及如何在软件生命周期中更改它？

更新：

再次来自 GoF：

> 请记住，适配器使两个现有接口协同工作，而不是定义一个全新的接口。

这是否意味着更改现有接口以使其可以与另一个接口一起使用是**Adapter**的实现？

更新2：

刚刚发现这篇令人难以置信的文章：[Illustrated GOF Design Patterns in C#](http://www.codeproject.com/Articles/3151/Illustrated-GOF-Design-Patterns-in-C-Part-II-Struc)

这是真正的 Bridge Pattern 结构：

我错过了桥模式允许您组合不同的抽象和实现并独立**扩展**它们 的事实![在此处输入图像描述](../Images/5d13a5cbab216050cd8987776300a8c0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T19:37:22.563

我认为您这里没有纯 GoF 模式。这是装饰器和适配器之间的东西。您正在更改服务客户端的界面（使其适应您的需要）。但是您也在向客户端添加新职责（日志记录和错误处理） - 这是一个装饰部分。如果您要保留原始服务接口，那将是纯装饰器。

更新：任何继承的使用并不意味着我们正在使用一些 GoF 模式。您当前的架构缺少桥接功能：

*   实现的层次结构。您的服务接口应该定义一些低级操作。你应该有几个服务实现。
*   抽象应该定义高级接口。通常这些接口看起来与实现接口不相似（您的客户端接口类似于服务接口，它存在于同一抽象级别上）。
*   抽象实现应该使用服务接口来实现高级操作（即它们不向服务添加一些职责，它们实现不同的东西，高级的东西）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T19:33:44.980

我被解释为将两个具有不同目的的类层次结构结合起来的桥模式。例如，考虑您正在编写一个具有不同类型控件并支持不同窗口系统的窗口框架。您将拥有一个用于控件的类树，而另一个用于抽象出窗口系统之间的差异。现在，如果您想添加对另一个窗口系统的支持，只需将其添加到层次结构的那一侧，如果您想添加新控件，请将它们添加到它们的一侧。“桥梁”存在于两个层次结构的顶级类之间，您的控制类可以访问由实现对各种窗口系统的支持的类层次结构的基类定义的抽象函数。

使用适配器模式，您不想组合具有不同意图的两个类层次结构，而是调整一个类以使用您自己的接口。我想如果您在上面的示例中只支持单个窗口系统并且不将抽象类放在中间以保持可扩展性，那将是适配器而不是桥接器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-17T20:28:13.407

此处之前已对此进行过讨论-[桥接模式和适配器模式之间的区别](https://stackoverflow.com/questions/1425171/difference-between-bridge-pattern-and-adapter-pattern)-您希望从 GoF 获得的真正引用是“适配器使事情在设计后工作；桥使它们在设计之前工作。[GoF，p219]

您的最后一个问题是肯定的-适配器用于使系统的两个原本令人不快的元素很好地协同工作，而不会改变它们的基本功能，而不会改变它们的功能联合-

桥接模式通常用于处理初始设计中呈现给消费者的心理模型可能与实现消费者模型的模型大不相同的问题。考虑一个高性能数学库，它在各种处理器上看起来都一样——你只是想将矩阵相乘，但在幕后有各种各样的麻烦，包括混合、并行数据流、避免管道停顿的奇怪行为，等等。在 3+ 高性能超大规模内核的实现上有所不同——这只是英特尔 :-(