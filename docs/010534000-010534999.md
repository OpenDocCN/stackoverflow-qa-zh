# StackOverflow 问答 10534000-10534999

# c# - 是否有“如果（X 增加）”功能？

> ID：10534000
> 
> 赞同：0
> 
> 时间：2012-05-10T12:27:48.700
> 
> 标签：c#, xna

我正在用 XNA 制作游戏。我准备好了相机、背景和滚动课程。

我所缺少的只是在相机位置改变时告诉滚动工作。有没有这方面的声明？

像：

```
if (cameraposition.X ""Increases"")
{
    Scrolling.Update()
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T12:29:07.967

您必须跟踪旧的相机位置，看看它是否发生了变化。所以你的 if 将是：

```
if(cameraPosition.X != oldCameraPosition.X) 
```

在每一帧结束时，您要更新 oldCameraPosition 变量，如下所示：

```
oldCameraPosition = cameraPosition; 
```

两个位置之间的差异通常称为增量或速度。现在对于滚动，您可以使用相机 Delta 调用您的更新，因此您滚动相同（或修改的量）。例如：

```
//In Camera.cs
Scrolling.Update(oldCameraPosition - cameraPosition);

//In your scrolling class
void Update(Vector3 offset)
{
 background.Position += offset * .5f;
} 
```

这样，每次相机移动时，您的背景平面都会以半速移动。使用不同的修饰符将这个技巧重复 3 次，您将获得视差效果。

通常你会想为此使用事件，但是游戏开发可以例外。轮询通常是要走的路，因为你已经有了一个很像事件循环的游戏循环。`Scrolling.Update()`无论哪种方式，只要您首先更改相机的位置，就直接调用会更有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T12:31:16.937

这自然是性能选择，但如果您简单地说：

```
 Scrolling.Update(cameraPosition.X, cameraPosition.Y) 
```

如果滚动已经在有效位置，不会改变任何东西。

自然地，在使用前应进行测量。这样，您将避免存储*状态*变量或附加变量来存储“旧”信息。

# javascript - 如何使用 jQuery 获取自定义属性的名称？

> ID：10534002
> 
> 赞同：2
> 
> 时间：2012-05-10T12:27:56.860
> 
> 标签：javascript, jquery

我有一个可能看起来像这样的属性`abcjQuery12345`，这些数字只是一个例子。
有没有办法确定在 jQuery 中包含子字符串的属性？

例如`abcjQuery12344353452343452345="12"`

我唯一知道的是该属性将包含`abc`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:42:38.430

您可以遍历所有属性并检查它们是否包含您要查找的字符串。和：

```
​&lt;div customAttr="12" title="me"></div>
<div anotherAttr="Bear"></div>
<div yetAnotherAttr="Elephant"></div> 
```

你可以使用：

```
var m = /another/i; //will look for 'another' in the attribute name (i-flag for case-insensitive search)

$('div').each(function(){
    var $this = $(this);
    $.each(this.attributes,function(){
        if (this.name.match(m)){
            $this.addClass('selected'); //either select the matching element
            $this.text(this.name + ' : ' + this.value); //or use its custom-attribute's value
        }
    });
});​ 
```

看**[小提琴](http://jsfiddle.net/jyYCZ/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:32:29.947

你可以这样做，[JsFiddle 上的 Demo](http://jsfiddle.net/m3qKF/3/)

```
<div id="div1" myattr="hello" myAttr12342="hello1">Any text</div>​

el = document.getElementById('div1');
attrs=el.attributes
for (var i=0; i<attrs.length; i++)
{
    attrName = attrs.item(i).nodeName;
    attrValue = attrs.item(i).nodeValue; 
    //alert(attrs.item(i).nodeName);
    if(attrName.indexOf('myattr') != -1)
    {
        alert("Attr Name " + attrName + " Attr Value " + attrValue );
    }        
}
​ 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:21:47.413

```
var abcAttr, abcName;

​$.each($("#elementID")​[0].attributes, function(index, item) {
    if (item.nodeName.match(/^abc/)) {
        abcName = item.nodeName;
        abcAttr = item.nodeValue;
    }
}); 
```

[小提琴](http://jsfiddle.net/adeneo/JFgng/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:31:36.250

你可以这样做：

```
var customNum = 12345; // Switch this out as necessary.
var value = $('#element').attr('abcjQuery' + customNum); 
```

这是一个[工作示例](http://jsfiddle.net/e6aKM/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T13:04:33.893

给定属性名称中包含的字符串，获取属性值的简单函数：

```
function getVal(element,name){
   var pattern=new RegExp(name,'i');
   return $.grep($(element)[0].attributes, function(n){
       if (n.name.match(pattern)) return n.nodeValue;
   })[0].nodeValue;
} 
```

[演示](http://jsfiddle.net/EFYdT/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T12:34:44.377

[Jquery.attr()](http://api.jquery.com/attr/)方法应该可以解决问题

```
var value = $('#element').attr('abcjQuery' + someCustom); 
```

但我建议你使用**data- 属性**。像这样使用[Jquey.data()](http://api.jquery.com/data/)

```
<div id="div1" data-myattr="abcjQuery12345">Any text</div>​ 
```

检索：

```
var value = $('#div1').data('myattr');
alert(value): 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T12:43:22.487

你可以使用它：

```
$('a[@name^="abcjQuery"]') 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-10T13:00:16.597

如果我理解你的问题，这里就是你的答案；

工作示例：http: [//jsfiddle.net/gRsxM/](http://jsfiddle.net/gRsxM/)

```
/*!
 * listAttributes jQuery Plugin v1.1.0
 *
 * Copyright 2010, Michael Riddle
 * Licensed under the MIT
 * http://jquery.org/license
 *
 * Date: Sun Mar 28 05:49:39 2010 -0900
 */
if(jQuery) {
    jQuery(document).ready(function() {
        jQuery.fn.listAttributes = function(prefix) {
            var list = [];
            $(this).each(function() {
                var attributes = [];
                for(var key in this.attributes) {
                    if(!isNaN(key)) {
                        if(!prefix || this.attributes[key].name.substr(0,prefix.length) == prefix) {
                            attributes.push(this.attributes[key].name);
                        }
                    }
                }
                list.push(attributes);
            });
            return (list.length > 1 ? list : list[0]);
        }
    });
}

$(document).ready(function(){

    $('input').each(function(){
        var attrs = $(this).listAttributes();
         for(var i=0;i<attrs.length;i++){
            if(attrs[i].indexOf("abc")>-1) itemProccess($(this));
        }

    });
});

function itemProccess(item){
    console.log(item);
}
​ 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-04-25T05:18:53.310

```
var myAttr = $("#idOfElement").attr("your_custom_attribute_name"); 
```

# javascript - jshint：时髦的代码与分号；如何在这里消除 jshint 对分号的所有抱怨？

> ID：10534006
> 
> 赞同：0
> 
> 时间：2012-05-10T12:28:08.030
> 
> 标签：javascript, jshint

我不是 ASI 的粉丝。但是鉴于这是完全合法的 JavaScript，jshint（重复，8 次以上）期望找到分号的确切位置在哪里？

```
 script.addEventListener('load', function () {
        ++i !== requires.length ? loader(i) : (loadLocal(thirdParty), loadLocal(main))
    }, true); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:32:54.253

在你的三元表达式结束时。

IE

```
(loadLocal(thirdParty), loadLocal(main));
                                        ^ here 
```

# php - 转换为 PHP REST CURL POST

> ID：10534009
> 
> 赞同：3
> 
> 时间：2012-05-10T12:28:13.507
> 
> 标签：php, rest, post, upload, onedrive

我们如何将此代码转换为 PHP REST CURL POST？

```
POST https://apis.live.net/v5.0/me/skydrive/files?access_token=ACCESS_TOKEN

Content-Type: multipart/form-data; boundary=A300x

--A300x
Content-Disposition: form-data; name="file"; filename="HelloWorld.txt"
Content-Type: application/octet-stream

Hello, World!
--A300x-- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:36:22.773

```
$url = 'POST https://apis.live.net/v5.0/me/skydrive/files';
$ch = curl_init();
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POSTFIELDS, array('access_token' => TOKEN, 'name' => 'file', 'filename' => "@HelloWorld.txt"));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch);
curl_close($ch); 
```

Edit: Didn't read all of post, fixed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-13T16:01:07.843

I hope it is helpful:

```
 <?php
    $headers = array('token: pacexpressx1x2x3j' );
    $data = array(
    "STATUS" => "insert" ,
    "NAME"   =>  utf8_encode("Test integration 10"),
    "COD_AREA"   =>  "4",
    "DESC_AREA_"  =>   utf8_encode("info/IT"),
    "JOB" =>  utf8_encode("TEST job"),
    "COMPANY" => "4",
    "DESC_COMPANY" => utf8_encode("XPTO1"),
    "file" => '@/home/user/test.png');

    $url = 'your_link';
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

    $output = curl_exec($ch);
    echo($output) . PHP_EOL;
    curl_close($ch); 
```

In this example I am sending a header, and post fields.

$headers => I put a token value in a array, just to show how can you send a value.

$data => I used an array with some imaginary values.

In the curl I used this variebles here: curl_setopt($ch, CURLOPT_POSTFIELDS, **$data_string**); curl_setopt($ch, CURLOPT_HTTPHEADER, **$headers**);

CURLOPT_POSTFIELDS -> the full data to post in a HTTP "POST" operation. To post a file, prepend a filename with @ and use the full path. The filetype can be explicitly specified by following the filename with the type in the format ';type=mimetype'. This parameter can either be passed as a urlencoded string like 'para1=val1&para2=val2&...' or as an array with the field name as key and field data as value. If the value is an array, the Content-Type header will be set to multipart/form-data. As of PHP 5.2.0, the value must be an array if files are passed to this option with the @ prefix.

If you would want to learn more about curl_setopt, I suggest you this link: [http://php.net/manual/pt_BR/function.curl-setopt.php](http://php.net/manual/pt_BR/function.curl-setopt.php)

**To see what you send and to receive the file that you send, you can use this code below:**

```
 echo 'Here is some more debugging info:';
    echo "\n<hr />\n";
    print_r($_FILES);
    echo "\n<hr />\n";
    print_r($_POST);
    print "</pr" . "e>\n"; 
    echo "\n<hr />\n";
    // here you will record the file in your server... you can choose a directory if you want
    file_put_contents($_FILES['file']['name'],file_get_contents($_FILES['file']['tmp_name'])); 
```

# javascript - 带有一些固定像素的垂直滚动条

> ID：10534010
> 
> 赞同：1
> 
> 时间：2012-05-10T12:28:22.053
> 
> 标签：javascript, html, css

我有一个问题是我的 HTML 正文的宽度为`1600px`.
我想要垂直滚动条到`900px`.
当我缩放我的图像时，`900px`它会缩放，但垂直滚动条也会超过`900px`.

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:37:17.667

try with this

```
 <div style="left:0px;  position: absolute; top:0px ; overflow:hidden ; min-height:800px; min-width:1000px; max-width:500px; max-height:800px ">
     <object  data="Map3.svg" type="image/svg+xml" width="500" height="800" id="svgObj" style="background-color:#09C ; left:200px;  position: absolute; top:0px ; overflow:hidden ; "   >

        <param name="src" value="Map2.svg">

    </object>
    </div> 
```

# javascript - 检查按钮是否处于活动状态

> ID：10534012
> 
> 赞同：2
> 
> 时间：2012-05-10T12:28:30.540
> 
> 标签：javascript, jquery

我真的很努力处理这段代码。

*我想要实现的目标：我有一个“编辑按钮”。如果我按下它，它将变为活动状态并且编辑模式变为活动状态。我可以即时编辑列表，它会自动更新。*

**问题：我可以让它工作 50%。如果我尝试激活按钮，我可以编辑对象。但是当我再次停用按钮时，我仍然可以编辑对象。当然这应该是不可能的。**

这里有一些乱七八糟的代码。是的，大部分都是在网上找到的，我正在尝试自己编辑它......

```
$("#editButton").click(function() {
    $("#editButton").toggleClass("active");
    if ($("#editButton").hasClass("active")) {
        $(".moveLi").on("click", function() {
            var ID = $(this).attr('id');
            $("#move_"+ID).hide();
            $("#move_edit_"+ID).show();
        }).change(function() {
            var ID = $(this).attr('id');
            var first = $("#move_edit_"+ID).val();
            var dataString = 'id=' + ID + '&name=' + first;
            $("#move_"+ID).html('<p>Saving...</p>'); // Loading image

            if (first.length > 0) {
                $.ajax({
                    type: "POST",
                    url: "table_edit_ajax.php",
                    data: dataString,
                    cache: false,
                    success: function(html) {
                        $("#move_"+ID).html(first);
                    }
                });
            }
            else {
                alert('Enter something.');
            }
        });

        $(".editbox").mouseup(function()  {
            return false
        });

        $(document).mouseup(function() {
            $(".editbox").hide();
            $(".text").show();
        });
    } 
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:47:34.777

`.moveLi`当编辑应该停止时，您将一堆事件处理程序绑定到但从不删除它们：

```
if ($("#editButton").hasClass("active")) {
    $(".moveLi").on("click", function() {
        ...
    }).change(function() {
        ... 
```

用这样的东西补充这些：

```
$(".moveLi").off("click").unbind('change'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:39:06.950

这行代码给出了错误`$(".moveLi").on("click", function()`。

它应该是`$(".moveLi").click(function() {...})`

您也可以使用 Firefox 的 Firebug 插件在其他浏览器中进行调试或其他内置开发人员工具，这样您就可以看到所有的 JS（和 CSS）错误。

# yahoo - YQL（雅虎查询语言）按日期排序

> ID：10534013
> 
> 赞同：2
> 
> 时间：2012-05-10T12:28:30.557
> 
> 标签：yahoo, yql

我正在尝试使用 YQL 从 2005 年 1 月 1 日起检索特定的附件类型（例如存在 2500 封此类邮件）。搜索语句如下：

```
SELECT hits FROM ymail.search WHERE attachmenttypes="pdf" and date-start = 1104537600 
```

结果总是从最新的邮件开始。如果我按如下方式使用排序功能：

```
SELECT hits FROM ymail.search WHERE attachmenttypes="pdf" and date-start = 1104537600 | sort(field="hits.date", descending = "false") 
```

结果已排序，但仅返回总行数的一部分。所以2个问题：

1) 我如何请求按日期排序的行？

2）有没有办法一次检索所有行？文档说我们可以一次检索 5000 行 [http://developer.yahoo.com/yql/guide/paging.html](http://developer.yahoo.com/yql/guide/paging.html)。但这似乎不是真的。即使我在语句中添加“count = 3000”，仍然只返回总行数的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T17:52:22.713

> 如何请求按日期排序的行？

```
select * from {table} where query="apple" and order_by='relevance' 
```

> 有没有办法一次检索所有行？

```
select title from search.web(0) where query="pizza" limit 5000 
```

# clickonce - .net framework 2.0 中的 ClickOnce 部署

> ID：10534027
> 
> 赞同：-1
> 
> 时间：2012-05-10T12:29:14.067
> 
> 标签：clickonce, desktop-application

我正在.net framework 2.0 中开发一个基于窗口的应用程序。我想使用单击一次部署来部署它。如何为我的应用程序创建桌面快捷方式？

而且我还想知道部署后我的应用程序生成的文本文件将保存在哪里。

任何帮助将不胜感激！

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:35:45.653

至于桌面快捷方式：“旧”版本无法自动完成。在 Visual Studio 2010 中，部署属性中有一个复选框。更糟糕的是：当您手动创建快捷方式时，它会在 ClickOnce 更新后被删除。但是，我不确定这是您使用的 .NET Framework 还是您使用的 Visual Studio 的问题。很可能使用 Visual Studio 2010 部署 .NET 2.0 项目还允许您自动创建快捷方式。我没试过。我只知道它不适用于 VS 2005 和 VS 2008。

至于应用程序生成的文本文件：框架会自动为其选择一个文件夹，该文件夹位于用户配置文件的 Application Data 文件夹中的某个位置。找出它在哪里需要做很多工作。

建议：在用户的 Documents 文件夹中创建一个子文件夹，用于存储您的资料，或者在用户的个人资料中创建您自己的文件夹。

# python - 从'pyparsing.ParseResults'中得到一个纯粹的列表

> ID：10534035
> 
> 赞同：7
> 
> 时间：2012-05-10T12:29:30.603
> 
> 标签：python, pyparsing

我目前正试图从 pyparsing 中获得一个纯列表的结果，以便我可以将其展平。我在文档中读到

> ParseResults 也可以通过调用 asList() 转换为普通的字符串列表。请注意，这将删除为任何嵌入的解析元素定义的任何字段名称的结果。（pprint 模块特别擅长打印出由 asList() 给出的嵌套内容。）

所以我尝试定义一个`setParseAction`我在 ParseResult 上工作的地方

我得到的是：

```
>>> print type(tokens.args[0])
 <class 'pyparsing.ParseResults'>
>>> print type(tokens.args[0].asList)
 <type 'instancemethod'> 
```

但我期待/需要最后一个是列表类型。在这里使用时，我一定遗漏了一些重要的东西`asList()`。

迪特马尔

PS：这里是代币实际外观的 MTC：

```
>>> print tokens.args[0]
['foo1', ['xxx'], ',', 'graphics={', 'bar1', ['xxx,yyy'], ',', 'bar2', 
['xxx,yyy'], ',', 'bar3', ['xxx,yyy,', 'zzz=baz', ['xxx,yyy']], '}'] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T12:31:36.157

`tokens.args[0].asList`是一个函数。`tokens.args[0].asList()`是对该函数的调用（除了参数没有`self`参数）。您似乎想知道后一种表达式的类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T12:31:43.003

你能试一下吗

```
 print type(tokens.args[0].asList()) 
```

# php - 匿名函数和循环问题

> ID：10534036
> 
> 赞同：1
> 
> 时间：2012-05-10T12:29:40.197
> 
> 标签：php, loops, while-loop, anonymous-function

请参阅下面的匿名函数，我不想进入下一个`for`循环迭代，直到`$Connected`为 0

它没有按应有的方式工作...解决此问题的解决方案是什么？

```
 $Client = new Client();

for ($i = 1; $i <= 5; $i++) {

 $result = $Client->Action(rand(1,1000));

 if ($result->isSuccess()) {
     $Connected = 1;
  }

  // Stay in the loop until 'HangupEvent' received
  while ($Connected) {
    $Client->EventListener(function (EventMessage $event) {
        if ($event instanceof HangupEvent) {
            // Received Hangup Event - let terminate this while loop ..
            $Connected = 0;
         }
    });

   // If  $Connected = 0; then go to next `for` loop iteration
  }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:32:20.493

您需要将 $Connected 变量传递给您的函数`use`

```
$Client->EventListener(function (EventMessage $event) use (&$Connected) {
    if ($event instanceof HangupEvent) {
        // Received Hangup Event - let terminate this while loop ..
        $Connected = 0;
     }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:42:25.247

正如其他人所说以及[文档中显示的那样](http://php.net/manual/en/functions.anonymous.php)，为了修改闭包内变量的值，您必须使用`use (&$Conntected)`. 但你必须改变更多。

The `while` loop will be executed until `$Connected` is `1`, that means you end up adding many many event handlers to the client... this is not what you want though.

Now, I don't know how PHP handels these event callbacks (or concurrent function calls), but I think what you need is [`sleep`](http://php.net/manual/en/function.sleep.php):

```
$Client->EventListener(function (EventMessage $event) use (&$Conntected) {
    if ($event instanceof HangupEvent) {
        // Received Hangup Event - let terminate this while loop ..
        $Connected = false;
     }
});

while($Connected) {
    sleep(500); // delay execution for 500 milliseconds, then check again
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:36:43.460

PHP 处理闭包的方式与其他语言不同。您已经明确声明要关闭哪些变量。你可以在这里阅读：http: [//php.net/manual/en/functions.anonymous.php](http://php.net/manual/en/functions.anonymous.php)

尝试 $Client->EventListener(function(EventMessage $event) 使用 (&$Connected) {

# mobile - 移动版网站 - 我是不是在想这个？

> ID：10534039
> 
> 赞同：-1
> 
> 时间：2012-05-10T12:29:45.893
> 
> 标签：mobile, web

我希望我的网站支持手机，但这不是“如何做”的问题。我已经阅读了所有相关内容，并总结了我的发现、@media 标签和最小/最大宽度。

现在对于我的实际问题。一些网站页面变得非常大，包括内容、侧边菜单、顶部菜单、页脚、JS、CSS（用于非移动版本）等。

但是....对于移动版本，我需要切断至少 50% 的内容（例如，不应显示侧边菜单，页脚应该更小等）。

现在，再一次，这不是 css 的问题（只是隐藏那些使用 @media 的人不需要的元素）真正的问题是，为什么我必须提供一个完整的页面，并且只显示它的一部分？这不是浪费带宽吗？加载速度也会受到影响（加载专为移动设备设计的页面，没有所有“额外”功能，总和为 10kb，而完整页面可以达到 100kb）。

我想太多了吗？我应该只使用@media 查询而不关心浪费的带宽吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:36:20.443

这取决于您的用例。

制作单独的移动页面需要很长时间吗？如果不是那么是的，那会更好，为什么要浪费带宽（对可能使用他们将要付费的 3 / 4g 的移动设备的重大考虑）。

请记住，许多较大的网站在移动设备上执行重定向到 m."websitename" 的传统方式，因此人们确实投资于拥有移动网站和完整的基于 Web 的网站。

长话短说，两者都很好，但它适合你，你有时间做什么

# xcode - Xcode：确保标题注释中的文件名正确？

> ID：10534042
> 
> 赞同：3
> 
> 时间：2012-05-10T12:29:57.450
> 
> 标签：xcode, xcode4, comments

是否有快速修复/检查以确保标题注释中的文件名实际上与文件名匹配？

我刚刚进行了巨大的重构/约定更改，发现有些我忘记更新某些文件的标题注释。

我知道[关于标题注释的另一个问题](https://stackoverflow.com/questions/7791453/how-to-keep-the-header-comments-up-to-date-in-xcode)。但我不想更改任何模板。我*喜欢*Xcode 给我的模板。我只是想确保它匹配。

* * *

### 例子

```
//
//  XXShim.h
//  ProjectX
//
//  Created by Me Myself on 3/15/12.
//  Copyright (c) 2012 My Company Ltd. All rights reserved.
//

#import <CoreData/CoreData.h>

@interface YYProxy : NSObject 
```

看，`XXShim`现在是`YYProxy`在一个文件中现在调用`YYProxy.h`但标题注释仍然是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-12T23:24:26.613

我整理[了一条](https://gist.github.com/frankus/5ce28924819a812a2035)至少可以帮助您找到它们的单线。

```
find . -iname "*.[mh]" -exec sed -n "2s|^//  ||p" "{}" \; -exec basename "{}" \; | uniq -u 
```

您需要打开终端窗口并打开`cd`项目的根目录。在它们不匹配的情况下，您将在实际文件名上方打印的注释中获得带有文件名的成对行。

编辑：这个脚本（确保你有备份）实际上应该将每个文件的第二行更新为正确的注释：

```
find . -iname '*.[mh]' -print0 | while IFS= read -r -d '' file; do basename=`basename "$file"`; sed -i '' "2s|//  .*\$|//  $basename|" "$file"; done 
```

# java - 自动装配两个实现相同接口的 bean - 如何将默认 bean 设置为自动装配？

> ID：10534053
> 
> 赞同：146
> 
> 时间：2012-05-10T12:30:43.317
> 
> 标签：java, spring, spring-mvc, autowired

## 背景：

我有一个 Spring 2.5/Java/Tomcat 应用程序。有以下bean，在很多地方的整个应用程序中都会用到

```
public class HibernateDeviceDao implements DeviceDao 
```

以及以下新的bean：

```
public class JdbcDeviceDao implements DeviceDao 
```

第一个 bean 是这样配置的（包中的所有 bean 都包括在内）

```
<context:component-scan base-package="com.initech.service.dao.hibernate" /> 
```

第二个（新）bean 单独配置

```
<bean id="jdbcDeviceDao" class="com.initech.service.dao.jdbc.JdbcDeviceDao">
    <property name="dataSource" ref="jdbcDataSource">
</bean> 
```

这会导致（当然）在启动服务器时出现异常：

> 嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义类型 [com.sevenp.mobile.samplemgmt.service.dao.DeviceDao] 的唯一 bean：预期单个匹配 bean，但找到 2：[deviceDao，jdbcDeviceDao]

从一个试图像这样自动装配bean的类

```
@Autowired
private DeviceDao hibernateDevicDao; 
```

因为有两个 bean 实现了相同的接口。

## 问题：

**是否可以配置bean，以便**

**1.**我不必对已经`HibernateDeviceDao`自动装配的现有类进行更改

**2.**仍然可以像这样使用第二个（新）bean：

```
@Autowired
@Qualifier("jdbcDeviceDao") 
```

即，我需要一种方法将`HibernateDeviceDao`bean 配置为要自动装配的默认 bean，同时允许在使用注释`JdbcDeviceDao`明确指定时使用 the 。`@Qualifier`

## 我已经尝试过的：

我尝试设置属性

```
autowire-candidate="false" 
```

在 JdbcDeviceDao 的 bean 配置中：

```
<bean id="jdbcDeviceDao" class="com.initech.service.dao.jdbc.JdbcDeviceDao" autowire-candidate="false">
    <property name="dataSource" ref="jdbcDataSource"/>
</bean> 
```

因为 Spring 文档说

> 指示在寻找匹配的候选者以满足另一个 bean 的自动装配要求时是否应考虑此 bean。**请注意，这不会影响按名称的显式引用，即使指定的 bean 未标记为自动装配候选者，也会得到解决。***

我将其解释为我仍然可以`JdbcDeviceDao`使用`@Qualifier`注释自动装配并将其`HibernateDeviceDao`作为默认 bean。但是，显然我的解释是不正确的，因为这会在启动服务器时导致以下错误消息：

> 类型 [class com.sevenp.mobile.samplemgmt.service.dao.jdbc.JdbcDeviceDao] 的不满足依赖性：预计至少有 1 个匹配 bean

来自我尝试使用限定符自动装配 bean 的课程：

```
@Autowired
@Qualifier("jdbcDeviceDao") 
```

## 解决方案：

[skaffman](https://stackoverflow.com/users/21234/skaffman) [建议](https://stackoverflow.com/questions/10534053/autowiring-two-beans-implementing-same-interface-how-to-set-default-bean-to-au#10534137)尝试使用 @Resource 注释有效。因此，jdbcDeviceDao 的配置将 autowire-candidate 设置为 false，并且在使用 jdbcDeviceDao 时，我使用 @Resource 注释（而不是 @Qualifier）来引用它：

```
@Resource(name = "jdbcDeviceDao")
private JdbcDeviceListItemDao jdbcDeviceDao; 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-05-10T12:35:52.893

我建议用 标记 Hibernate DAO 类[`@Primary`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/Primary.html)，即（假设你`@Repository`在 上使用`HibernateDeviceDao`）：

```
@Primary
@Repository
public class HibernateDeviceDao implements DeviceDao 
```

这样，它将被选为默认的自动装配候选者，而无需`autowire-candidate`在其他 bean 上。

另外，比起使用，我发现用于挑选特定的豆子`@Autowired @Qualifier`更优雅，即`@Resource`

```
@Resource(name="jdbcDeviceDao")
DeviceDao deviceDao; 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-10T12:37:01.490

怎么样[`@Primary`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/annotation/Primary.html)？

> **指示当多个候选者有资格自动装配**单值依赖项时，应优先考虑 bean。如果候选中恰好存在一个“主”bean，则它将是自动装配的值。这个注解在语义上等同于 Spring XML 中`<bean>`元素的`primary`属性。

```
@Primary
public class HibernateDeviceDao implements DeviceDao 
```

或者，如果您希望默认使用您的 Jdbc 版本：

```
<bean id="jdbcDeviceDao" primary="true" class="com.initech.service.dao.jdbc.JdbcDeviceDao"> 
```

`@Primary`当您可以通过注释轻松地将生产 bean 替换为存根版本时，它也非常适合集成测试。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-10T12:46:50.970

对于 Spring 2.5，没有`@Primary`. 唯一的方法是使用`@Qualifier`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-07T17:08:42.853

```
The use of @Qualifier will solve the issue.
Explained as below example : 
public interface PersonType {} // MasterInterface

@Component(value="1.2") 
public class Person implements  PersonType { //Bean implementing the interface
@Qualifier("1.2")
    public void setPerson(PersonType person) {
        this.person = person;
    }
}

@Component(value="1.5")
public class NewPerson implements  PersonType { 
@Qualifier("1.5")
    public void setNewPerson(PersonType newPerson) {
        this.newPerson = newPerson;
    }
}

Now get the application context object in any component class :

Object obj= BeanFactoryAnnotationUtils.qualifiedBeanOfType((ctx).getAutowireCapableBeanFactory(), PersonType.class, type);//type is the qualifier id

you can the object of class of which qualifier id is passed. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-03T03:17:07.147

@Resource(name = "{your child class name}") 有效但@Autowired 有时不起作用的原因是因为它们的匹配顺序不同

@Autowire类型、限定符、名称的匹配顺序

@Resource Name, Type, Qualifier的匹配顺序

更详细的解释可以在这里找到：
[Inject and Resource and Autowired annotations](https://stackoverflow.com/questions/20450902/inject-and-resource-and-autowired-annotations)

在这种情况下，从父类或接口继承的不同子类会混淆@Autowire，因为它们来自同一类型；由于 @Resource 使用 Name 作为第一个匹配优先级，它可以工作。

# background - jqplot 背景颜色区域？

> ID：10534056
> 
> 赞同：1
> 
> 时间：2012-05-10T12:30:51.210
> 
> 标签：background, jqplot

我希望能够在我的 jqplot 条形图的背景上显示几个不同的“区域”。

我查看了文档，但无法轻松确定执行此操作的方法。

是否有一个简单的“填充”函数或参数可以让我将背景设置为多个水平颜色（不同高度）？

提前致谢。

FG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:51:22.450

您还可以使用 Bruno Harbulot 开发的矩形叠加层：[https ://bitbucket.org/harbulot/jqplot](https://bitbucket.org/harbulot/jqplot)

这是一个 jsFiddle 示例：http: [//jsfiddle.net/K2cVL/1/](http://jsfiddle.net/K2cVL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:52:53.883

我将使用与我在[此处回答不同问题时建议的类似方法。](https://stackoverflow.com/a/10428034/613495)

[代码示例的直接链接。](http://jsfiddle.net/Boro/XzdHt/)

然后，您将相应地设置基础线的大小以突出显示您的区域。例如，@Katya 在上述答案的评论之一下的链接中使用了这种方法。

[直接链接到 Katya 的代码示例。](http://jsfiddle.net/buzyonok/WdLnm/5/)

# lucene.net - Lucene 索引更新

> ID：10534058
> 
> 赞同：0
> 
> 时间：2012-05-10T12:30:57.310
> 
> 标签：lucene.net, lucene

考虑到我有两组对象“问题”和“用户”，它们共享一个关系。

在构建我的 lucene 索引时，我可以单独索引这两个对象，即每个问题的文档和每个用户的文档。

或者我可以有一个数据传输对象，该对象将具有来自问题的属性，并且用户在单个对象中展平并索引此数据传输对象。

在执行搜索时，假设我们可以按问题标题和问题作者进行搜索，这只是一个用户。

出于某种原因，假设我的系统允许用户更改他的显示名称。

索引我的对象以允许在 lucene idex 中反映最新更改的最佳方法是什么？

1.  我是否应该为用户和问题提供单独的文档，并让 lucene 根据需要获取所需的问题/用户详细信息？
2.  或者，采用数据传输对象方式？当有更改时，只需删除这些文档并重新索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T03:13:04.240

我会减少两个索引——一个是针对用户的问题，一个是针对用户的问题。根据您需要进行的搜索，两者都可以派上用场。

重新阅读您的问题，当用户更新其姓名时您需要做的是执行 lucene 查询以获取用户拥有的文档并更新它们。根据您进行索引的方式，这种变化可能会很快反映出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:44:21.767

最初导入/索引时，主要对象 ID 将与该项目相关联。如果用户在下次将该记录导入 lucene 时更改了他们的名称或其他字段值，如果没有逻辑来管理/检查对索引记录的更新，那么将创建一条新记录。你的名字例子是一个完美的场景。

采用第一种方法，您将保留系统中的所有用户。如果此人输入他们的名字为 Bob，然后将其更改为 William，那么您最终会在索引中始终有两个名字悬而未决问题，因为索引器将始终将它们视为不同的记录。

如果您想最大程度地减少重复，我建议您删除索引并重新索引数据，这将确保数据完整性。否则，您可能会看到具有不同对象 ID 的重复记录（即新的索引记录）

# django - 设置 cookie 上的 Django 错误，test_cookie 为 false

> ID：10534065
> 
> 赞同：1
> 
> 时间：2012-05-10T12:31:36.970
> 
> 标签：django, firebug

问题解决了！抱歉，我没有提到我正在使用`dotcloud`. 这是由于dotcloud的git。dotcloud 上的项目需要`postinstall`运行脚本，但使用其内置 git，它将忽略可执行位。所以我按照 url[警告：postinstall 文件存在，但它不可执行。无视。](http://answers.dotcloud.com/question/436/warning-postinstall-file-exists-but-it-is-not). 并再次在我的项目中上传总文件。问题解决了。我认为这是因为我没有创建会话数据库。但是还有一个问题。默认会话不使用数据库作为后端对吗？即使使用后端，我项目的后端是MongoDB，它有一个惰性操作方法，我的意思是它会在使用时创建数据库。那么为什么没有`syncdb`，它可能会导致这个问题呢？

我`response.set_cookie`用来设置cookies。但它不能在上面显示`firefox`。`firebug`

我试过`request.session.set_test_cookie()`了，但是显示我的浏览器不支持cookie。这不可能。我也试过了`Safari`，也不能设置cookie。

这是怎么回事？我确定我的浏览器支持 cookie，我可以看到 cookie 从其他站点通过`firebug`.

代码如下： if request.method == 'POST': username = request.POST.get('username','') password = request.POST.get('password','')

```
if username != '' and password != '':
    if len(username) > 20:
        returnmsg = 'USR LEN'

    else:
        password = md5(password).hexdigest()
        user_exist = User.objects(username=username)
        if not user_exist:  #if the list is empty
            returnmsg = 'LOG ERR'
        else:
            for user in User.objects(username=username):
                if user.password == password:
                    returnmsg = 'LOG OK'
                    #add session information
                    response = HttpResponse(returnmsg) 
```

`#Try 1`

```
 response['Cookie-Set']='username='+username 
```

`#try 2`

```
 response.set_cookie(key="username", value=username) 
```

`#try 3`

```
 request.session['username'] = username

                    user.log.append(UserLog(time=datetime.now(), ip=request.META['REMOTE_ADDR'], login=True))
                    user.save()
                    return response
                else:
                    returnmsg = 'LOG ERR'
                    user.log.append(UserLog(time=datetime.now(), ip=request.META['REMOTE_ADDR'], login=False))
                    user.save()
else:
    returnmsg = 'USR EPT' 
```

# android - 如何覆盖 webviews ontouch 方法

> ID：10534071
> 
> 赞同：0
> 
> 时间：2012-05-10T12:31:58.700
> 
> 标签：android, webview

每当触摸事件时，我想做的就是将用户引导到页面。

所以我有两个网络视图。横幅和其上方的另一个 web 视图。我想让横幅 webview 打开一个带有我将给它的链接的浏览器，或者用另一个 webview 开始另一个活动，.. 没关系.. 但我想知道的是如何捕捉 ontouch 事件webview ..这是我的 webview 到目前为止：

```
 banner = (WebView) findViewById(R.id.banner);
        domainUrl = bannerUrl;

    android_id = Secure.getString(getApplicationContext().getContentResolver(), Secure.ANDROID_ID);
    banner.getSettings().setJavaScriptEnabled(true);
    banner.getSettings().setAllowFileAccess(true);
    banner.getSettings().setPluginsEnabled(true);
    banner.clearHistory();
    banner.clearFormData();
    banner.clearCache(true);
    webSettings = mWebView.getSettings();
    webSettings.setCacheMode(WebSettings.LOAD_NO_CACHE);
    banner.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    webViewClient = new MyWebViewClient();
    banner.setWebViewClient(webViewClient);
    banner.loadUrl(domainUrl); 
```

我想添加这段代码：

```
 banner.setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            //How to open a browser here?
            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T16:01:16.263

尝试这个。

```
 banner.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            //How to open a browser here?
            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setData(Uri.parse(domainUrl));
            startActivity(i);
            return true;
        }
    });
} 
```

# java - 使用 JSTL c:out ${expression} 动态评估表达式

> ID：10534073
> 
> 赞同：2
> 
> 时间：2012-05-10T12:31:59.887
> 
> 标签：java, jakarta-ee, spring-mvc, jstl

我正在使用 Spring MVC 并寻找一种评估 bean 属性并将其显示到 UI 的方法。

我可以用

```
<form:input path="${dynamicExpression}.prop.prop" disabled="true" /> 
```

但宁愿使用类似：JSTL c:out

```
<c:out value="${dynamicExpression}.prop.prop"/> 
```

这不起作用，因为 is 只是连接表达式但不评估它。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:51:48.320

假设你的 bean 在请求中，你应该能够做你想做的事

```
${requestScope[dynamicExpression].prop.prop} 
```

# dojo - 通过继承 _HasDropdown 和 _AutoCompleterMixin 自定义 dojo Dropdown 小部件

> ID：10534076
> 
> 赞同：0
> 
> 时间：2012-05-10T12:32:13.537
> 
> 标签：dojo

我正在尝试做一个自定义下拉菜单，它将查询一些我自己的服务并相应地更新其下拉菜单。我正在关注[`http://livedocs.dojotoolkit.org/dijit/_HasDropDown`](http://livedocs.dojotoolkit.org/dijit/_HasDropDown)但没有描述如何为下拉容器创建 dom 的示例。

我需要设置`this.dropDown`一些`dijit._Widget`吗`ctor`？如果`dijit._widget`需要先创建另一个？如果是，我知道如何更新值，`data-dojo-attach-point`但如果出现下拉，则`collection`需要更新。dojo 中有没有这样的工具可以处理这种情况下的集合？否则手动处理`clearing/filling/event-handleing`每个下拉元素很容易变得混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:34:56.250

我创建了一个自定义小部件，它显示在表单上。在这个小部件中，我覆盖了`openDropDown`and`closeDropDown`函数。在我的情况下，下拉列表足够复杂，以至于每次用户关闭时都更容易将其销毁并重新创建

```
dojo.declare("TextboxWithCustomDropdown", 
    [dijit.form.ValidationTextBox, dijit._HasDropDown], {

    openDropDown: function() {  
        if(!this.dropDown) {
            var _s = this;

            this.dropDown = new MyCustomDropDown({...});
            this.dropDown.connect(this.dropDown, 'onChange', function(val) {
                _s.closeDropDown();
                _s.attr('value', val);              
            });
        }
        this.inherited(arguments);
    },
    closeDropDown: function() {
        this.inherited(arguments);
        if (this.dropDown) {
            this.dropDown.destroy();
            this.dropDown = null;
        }
    }
});

dojo.declare("MyCustomDropDown", [dijit._Widget, dijit._Templated], {

    templateString: ...

    // when the user makes their selection in the dropdown, I call the onChange 
    // function, and the textbox is listenting on this
    onChange: function(/*Object*/ value) {}
} 
```

# ruby-on-rails - 我的 Ruby Gemfile 的问题

> ID：10534082
> 
> 赞同：0
> 
> 时间：2012-05-10T12:32:26.080
> 
> 标签：ruby-on-rails, ruby

在我的 rails 应用程序中查看主页时遇到问题。当我运行它时，我收到以下错误：

在 gemfile 中列出的任何 gem 源中找不到 gem 'rails =3.1.0 x86-ming32

我的gem文件的内容如下：

```
source 'http://rubygems.org'

gem 'rails', '3.1.0'

# Bundle edge Rails instead:
# gem 'rails',     :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails', "  ~> 3.1.0"
  gem 'coffee-rails', "~> 3.1.0"
  gem 'uglifier'

end

gem 'jquery-rails'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug'

group :test do
  # Pretty printed test output
  gem 'turn', :require => false
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:37:56.660

> When I run it

May I ask how you are running it?

Instead of assuming, you are running `bundle exec rails g model Somthing`. Or whatever command you were running.

also what does `bundle list` say? can you see all the rails gems from the list that this command gives you?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:03:02.427

```
 rails (= 3.1.0) ruby depends on
  railties (3.1.0) 
```

因此，除非您拥有提供所需依赖项的源，否则它不会捆绑。

我建议安装 rails 3.2.3 并使用它。

```
gem install rails   #will install the newest rails 
```

在宝石文件中：

```
gem 'rails', '3.2.3' 
```

然后运行

```
$:.bundle update. 
```

# jquery - $(this).qtip 不是函数

> ID：10534083
> 
> 赞同：4
> 
> 时间：2012-05-10T12:32:29.773
> 
> 标签：jquery, jquery-ui-dialog, qtip, thickbox

我在我的页面中遵循了在图像上应用 qtip 的代码。它通过 ajax post 显示每个图像的动态内容。但是在Thickbox / Jquery UI对话框关闭并引发错误后它不显示qtip：**$（this）.qtip不是函数**

```
<script src="<%= Config.VirtualDir %>js/jquery.js?v=2" type="text/javascript"></script>
<script src="<%= Config.VirtualDir %>js/jquery.qtip-1.0.0-rc3.min.js?v=2" type="text/javascript"></script>

<script type="text/javascript" language="javascript">

$(document).ready(function() {
     BindQtip();
});
 function BindQtip()
 {
$('image').each(function(){
                        $(this).live('click',function() {
                            var $img = $(this);
                            if('<%= objAdminAuth.GetUserID() %>' == $img.attr('data-uid').split('|')[0])
                            {                                        
                                return false;
                            }
                           if ($img.data('qtip')) {return false;} 
                            $(this).qtip({
                                content: 'Loading...',
                                style: {
                                    border: {
                                        width: 5,
                                        radius: 10
                                    },
                                    padding: 0,
                                    textAlign: 'center',
                                    tip: true, // Give it a speech bubble tip with automatic corner detection
                                    name: 'dark' // Style it according to the preset 'cream' style
                                },
                                hide: 'unfocus',
                                show: {
                                    when: 'click', // Don't specify a show event
                                    ready: true, // Show the tooltip when ready
                                    solo: true
                                },
                                position: {
                                    corner: {
                                        tooltip: 'rightMiddle', // Use the corner...
                                        target: 'bottomLeft' // ...and opposite corner
                                    }
                                },
                                api: {
                                    // Retrieve the content when tooltip is first rendered
                                    onRender: function() {

                                        var self = this;
                                        self.content = '';
                                        $.ajax({
                                            url: window.location.href,
                                            type: 'POST',
                                            data: 'call=ajax&uid=' + $img.attr('data-uid'),
                                            success: function(resp) {
                                                self.updateContent(resp);
                                            }
                                        });

                                    },
                                    onContentUpdate: function() {
                                        var self = this;
                                    }
                                }
                            });
                        });
                        });
}
</script> 
```

所有路径都是正确的，其他事情都很好。我错过了什么吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:36:43.377

看起来您正在使用 AJAX 在当前文档中插入 HTML，并且此 HTML 也是由显示初始页面的脚本生成的。这意味着`<script>`jQuery 和 qTip 等标签很有可能不仅包含在您的初始页面中，还包含在您的 AJAX 响应中。如果这是真的，这些“稍后”的脚本将覆盖里面`window.$`的东西，结果与你描述的相同。

因此，请检查您的 AJAX 是否包含脚本，如果包含，请将其删除。然后一切都应该正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:37:59.867

我认为这可能是可疑行：

```
$(this).live('click',function() { 
```

再看一下[`live`](http://api.jquery.com/live/)文档，想法是给它一个*选择器*，而不是一个元素，然后它将该选择器与到达文档的给定类型的所有事件匹配。

这种奇怪而令人困惑的语法是在 v1.7 或更高版本`live`中被弃用的原因之一[`on`](http://api.jquery.com/on)（或者我的偏好，[`delegate`](http://api.jquery.com/delegate)从 v1.4.2 开始可用）。使用`on`and `delegate`，您可以指定要监视事件的实际元素，然后指定一个选择器来匹配委托位的后代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:50:23.917

您的选择器`$('image')`将选择所有标记的 HTML 元素`<image>`，我不相信有任何...

# postgresql - Yii 框架和 PostgreSQL 分区表 - 0 行受影响

> ID：10534086
> 
> 赞同：6
> 
> 时间：2012-05-10T12:32:52.130
> 
> 标签：postgresql, triggers, yii, partitioning

*   PostgreSQL 9.1
*   分区表
    *   tbl_master
    *   tbl_slave1（继承主人）
    *   tbl_slave2（继承主人）
*   Yii 框架 1.1.10

也许有人可以感谢他对 Yii + PostgreSQL 分区表的经验。带有分区表、检查和触发器的 PostgreSQL 部分效果很好，但我无法让 Yii*喜欢*这些表..

问题是在插入到 PostgreSQL 给出的分区表`0 rows affected`时，我不知道如何解决这个问题。Yii 模型认为新记录没有保存（但它是）并`$Model->save();`返回 false ，所以`afterSave()`不工作等等。

所有其他方法`->find()`都`->findAll()`运行良好。即使我更新刚刚保存的记录 throw yii 一切正常，我`afterSave`也被执行。问题只是`->save()`部分。 *更新工作，因为我只有在插入新行时才触发*。

我正在使用触发器按表拆分新数据。也许我需要修改触发器，以便 postgres 知道我将新数据转发到`slave`表而不是`master`什么？

还有一件事。我在表中添加了主键，`master`所以 Yii 模型（CActiveRecord）不会在没有 pk 的情况下抛出关于表的错误。我知道文档没有建议这一点，但我让它以这种方式工作。只是想*大致了解*我的情况。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T06:40:04.287

您可以尝试使用规则作为替代方案。当它重写查询时，我希望它返回正确数量的受影响行。虽然在大多数情况下触发器更好，但我认为规则比在主表中插入数据并不得不再次删除它更好。

[这在本手册页](http://www.postgresql.org/docs/9.2/static/ddl-partitioning.html)的第 5.9.5 段中有所介绍。

# python - 如何在 Python 中不使用 mysqldump 转储 MySQL 数据库

> ID：10534087
> 
> 赞同：10
> 
> 时间：2012-05-10T12:32:52.867
> 
> 标签：python, mysql

如何在不使用 mysqldump 的情况下转储 MySQL 数据库，仅使用包含表结构的 Python？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-12T18:50:01.813

我已经解决了这个问题。

```
import MySQLdb
import os
import datetime

con = MySQLdb.connect(host='localhost', user='root', passwd='password', db='test')
cur = con.cursor()

cur.execute("SHOW TABLES")
data = ""
tables = []
for table in cur.fetchall():
    tables.append(table[0])

for table in tables:
    data += "DROP TABLE IF EXISTS `" + str(table) + "`;"

    cur.execute("SHOW CREATE TABLE `" + str(table) + "`;")
    data += "\n" + str(cur.fetchone()[1]) + ";\n\n"

    cur.execute("SELECT * FROM `" + str(table) + "`;")
    for row in cur.fetchall():
        data += "INSERT INTO `" + str(table) + "` VALUES("
        first = True
        for field in row:
            if not first:
                data += ', '
            data += '"' + str(field) + '"'
            first = False

        data += ");\n"
    data += "\n\n"

now = datetime.datetime.now()
filename = str(os.getenv("HOME")) + "/backup_" + now.strftime("%Y-%m-%d_%H:%M") + ".sql"

FILE = open(filename,"w")
FILE.writelines(data)
FILE.close() 
```

通过一些测试似乎效果很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T12:58:11.933

我会建议[MySQLdb](http://mysql-python.sourceforge.net/MySQLdb.html) - 它为 Python 提供了一个 MySQL API。

但是，API 很可能会间接调用`mysqldump`. 您不想`mysqldump`直接打电话还是根本不想打电话？

您可能还想查看[转储表和数据](http://bytes.com/topic/python/answers/24635-dump-table-data-mysqldb)，其中显示了在没有 MySQLdb 的情况下转储表结构和数据（页面下方）的确切过程。

# excel - 使用 Apache POI 的 Excel 下拉列表

> ID：10534095
> 
> 赞同：17
> 
> 时间：2012-05-10T12:33:11.537
> 
> 标签：excel, apache-poi, xssf

我需要使用 Apache POI 在 excel 文件中创建一个下拉列表。我可以这样做但是我无法将下拉列表中的第一项设置为默认项。

```
public class sd {

/**
 * @param args
 * @throws IOException 
 */
public static void main(String[] args) throws IOException {

DataValidation dataValidation = null;
DataValidationConstraint constraint = null;
DataValidationHelper validationHelper = null;

 XSSFWorkbook wb = new XSSFWorkbook();
 XSSFSheet sheet1=(XSSFSheet) wb.createSheet("sheet1");

    validationHelper=new XSSFDataValidationHelper(sheet1);
    CellRangeAddressList addressList = new  CellRangeAddressList(0,5,0,0);
    constraint =validationHelper.createExplicitListConstraint(new String[]{"SELECT","10", "20", "30"});
    dataValidation = validationHelper.createValidation(constraint, addressList);
    dataValidation.setSuppressDropDownArrow(true);      
    sheet1.addValidationData(dataValidation);

    FileOutputStream fileOut = new FileOutputStream("c:\\temp\\vineet.xlsx");
    wb.write(fileOut);
    fileOut.close();
}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T05:47:03.323

要设置默认值，只需 setCellValue("first_item_value");

```
sheet.getRow(1).getCell(index).setCellValue("my_default_value"); 
```

我这样做是因为面临同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-19T14:23:42.323

这是我的代码：

```
Cell cell = row.createCell(2);
cell.setCellValue("SELECT");

//2 is the 2nd cell in my case 
```

# sql - SQL 计数函数工作原理

> ID：10534106
> 
> 赞同：0
> 
> 时间：2012-05-10T12:33:59.947
> 
> 标签：sql

当您运行查询时，`select count(*) from myTable where (myVariable =1)`您会得到一个符合该条件的数字。如果你用任何数字替换星号，你会得到相同的答案。这里的 SQL 是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:38:06.277

它的等价物。

您在询问表格中有多少行，数字 n 将引用表格中的第 n 列。即使您没有 n 列，这也可以。

但它会变得更好，你甚至不需要放入任何与表格相关的东西 `SELECT ('X') from Table`都是有效的

有一种观点认为 SELECT(1) 性能更好，但 MSSQL 至少查询优化器会通过选择正确的[计划来解决这个问题](http://thehobt.blogspot.co.uk/2008/12/debunking-myth-select-count-vs-select.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:39:27.183

计数检查非空值，因此您可以传递任何具有非空值的值，例如 *、字段名称、静态值。

`COUNT(*)`将计算每一行。`COUNT(yourColumn)`不会包含 yourColumn 为 NULL 的行

[参考多种使用计数功能的方法](http://www.techonthenet.com/sql/count.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:40:43.720

> 由于 COUNT 函数将返回相同的结果，无论您包含哪些 NOT NULL 字段作为 COUNT 函数参数（即：在括号内），您可以将 COUNT 函数的语法更改为 COUNT(1) 以获得更好的性能，因为数据库引擎不必取回数据字段。

来源：[SQL：COUNT 函数](http://www.techonthenet.com/sql/count.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:41:53.027

鲜为人知的功能是您可以查询`select count(distinct someColumn) from SomeTable`以获取特定列的唯一计数。然后，您显然选择哪一列确实很重要。

否则其他答案已经解释过了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T12:43:50.000

`count(expression)`计算 `expression is not null`.

如果您尝试`count(1)`，那么您将获得所有行，因为 1 永远不会为空。

如果您尝试`count(column_name)`，那么您将计算`column_name is not null`.

[http://docs.oracle.com/cd/B10500_01/server.920/a96540/functions26a.htm#82699](http://docs.oracle.com/cd/B10500_01/server.920/a96540/functions26a.htm#82699)

# python - 舍入整数

> ID：10534107
> 
> 赞同：0
> 
> 时间：2012-05-10T12:34:02.020
> 
> 标签：python, list

我有*15个*号码，

```
[1, 5, 10, 20, 30, 50, 70, 100, 150, 200, 500, 1000, 2000, 5000, 10000] 
```

我有人输入数量，我想要的是四舍五入到最低数字。因此，如果有人进入`36`，它将四舍五入`30`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T12:35:55.567

`bisect`将在 O(log N) 中完成：

```
>>> import bisect
>>> L = [1, 5, 10, 20, 30, 50, 70, 100, 150, 200, 500, 1000, 2000, 5000, 10000]
>>> L[bisect.bisect(L, 36) - 1]
30 
```

或使用纯 python 和 O(N)：

```
>>> L = [1, 5, 10, 20, 30, 50, 70, 100, 150, 200, 500, 1000, 2000, 5000, 10000]
>>> next(elem for elem in reversed(L) if elem <= 36)
30 
```

假设`L`列表已排序。否则`L.sort()`之前。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T12:41:17.550

使用纯python：

```
>>> numbers = [1, 5, 10, 20, 30, 50, 70, 100, 150, 200, 500, 1000, 2000, 5000, 10000]
>>> x = 36
>>> max(n for n in numbers if n <= x)
30 
```

*注意：*不依赖于排序的数字列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T13:00:53.723

这是一个递归解决方案。它应该是 O(log n); 它依赖于列表已排序的事实。

```
L = [1, 5, 10, 20, 30, 50, 70, 100, 150, 200, 500, 1000, 2000, 5000, 10000]

def roundit(x,n):
    if len(x) == 1:
        return x[0]
    elif x[len(x)/2] > n:
        return roundit(x[0:len(x)/2],n)
    else:
        return roundit(x[len(x)/2 :],n) 
```

结果：

```
>>> roundit(L,36)
30
>>> roundit(L,77)
70
>>> roundit(L,150)
150 
```

# android - 在 Android Galaxy Tab 10.1 上未正确卸载时，外部 USB 设备上的 0Byte 文件

> ID：10534109
> 
> 赞同：0
> 
> 时间：2012-05-10T12:34:09.873
> 
> 标签：android, file-io, galaxy-tab

我的应用程序使用 Galaxy 选项卡的三星适配器写入外部 SD 卡。当 USB 设备被“安全移除”时，文件都是好的，但是当设备被不安全地移除时，所有新写入的文件都是 0 字节。

这是代码的精简版本：

```
 String json = "{some data to export}";

    String folderPath = Environment.getExternalStorageDirectory().toString() + File.separator + "Storages" + File.separator + "usb" + File.separator + "sda";
    File outputFile = new File(folderPath, "export.txt");

    FileWriter writer = new FileWriter(outputFile);
    BufferedWriter out = new BufferedWriter(writer);
    out.write(json);
    out.flush();
    out.close(); 
```

如您所见，我正在刷新和关闭文件，但是在我看来，Android 在卸载 USB 之前实际上并没有费心刷新内容。

显而易见的解决方案是告诉用户安全卸载，但是我们都知道用户是什么样的。那么有没有办法强制Android以编程方式将文件内容刷新到sd卡？（除了 BufferedWriter.flush / BufferedWriter.close）

该设备是运行 Android 3.1 的三星 Galaxy Tab 10.1 GT-P7510

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:03:25.250

您需要`sync()`在关闭文件之前对其进行处理。

```
 FileOutputStream fos=new FileOutputStream(someLikelyFileObject);
  BufferedOutputStream out=new BufferedOutputStream(fos);

  try {
    // write stuff to out

    out.flush();
  }
  finally {
    fos.getFD().sync();
    out.close();
  } 
```

阅读[这篇 Android 开发者博客文章](http://android-developers.blogspot.com/2010/12/saving-data-safely.html)了解更多信息。

# java - 如何使用 CDI 创建验证器

> ID：10534111
> 
> 赞同：1
> 
> 时间：2012-05-10T12:34:15.983
> 
> 标签：java, jsf, jsf-2

我想实现自定义验证器，我可以在其中使用 CDI 和数据源。我测试了这段代码：

```
<h:panelGroup>Session ID</h:panelGroup>
<h:panelGroup>
    <h:inputText id="sessionid" value="#{DatabaseController.formMap['sessionid']}" >
        <f:validateLength minimum="0" maximum="15"/>
        <f:validator validatorId="ValidatorController" >
        </f:validator>
        <f:ajax event="blur" render="sessionidMessage" />                                          
    </h:inputText>
    <h:message id="sessionidMessage" for="sessionid" />
</h:panelGroup> 
```

这是验证器：

```
 @FacesValidator("ValidatorController")

    public class FormValidator implements Validator {

        public FormValidator() {
        }

        @Override
        public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
            if (value.equals("test")) {
                throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "  Session ID is already in use, please choose another.", null));
            }
        }
} 
```

这段代码工作正常。我还尝试实现此代码，以便在验证器中使用 CDI：

```
<h:panelGroup>Session ID</h:panelGroup>
<h:panelGroup>
    <h:inputText id="sessionid" value="#{DatabaseController.formMap['sessionid']}" >
        <f:validateLength minimum="0" maximum="15"/>
        <f:validator binding="#{ValidatorController}" >
            <f:attribute name="type" value="sessionid" />
        </f:validator>
        <f:ajax event="blur" render="sessionidMessage" />                                          
    </h:inputText>
    <h:message id="sessionidMessage" for="sessionid" />
</h:panelGroup> 
```

这是验证器：

```
@Named("ValidatorController")

public class FormValidator implements Validator {

    public FormValidator() {
    }

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        if (value.equals("test")) {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                    "  Session ID is already in use, please choose another.", null));
        }
    }

} 
```

由于某种原因，第二个示例不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:15:35.680

你应该更具体，什么失败了？它不编译？它不运行？有什么例外，等等。而且在第二种情况下你想达到什么目的也不清楚。

通常，您不能通过将 f:attribute 嵌套在内部来将属性传递给 f:validator。使您的代码如下所示：

```
<f:validator binding="#{ValidatorController}" (session id in your case) />
<f:attribute name="type" value="sessionid" /> 
```

稍后您可以在组件参数映射中搜索**组件参数：**

```
context.getExternalContext().getRequestParameterMap(); 
```

# java - android/java - 寻找一个高效的并发循环队列

> ID：10534115
> 
> 赞同：4
> 
> 时间：2012-05-10T12:34:39.263
> 
> 标签：java, android, queue, cyclic

有谁知道有界并发循环队列的（开源）实现，或内置于 android/java 的可用 API 类？

我需要这个集合的并发（非同步或基于锁）操作至少是 enqueue 和 dequeue ，但 enqueue 也足够了。

对于那些不确定我需要的收藏的人，这里有更多信息：

*   有界 - 可以包含的最大项目数。
*   并发 - 允许多个线程在没有任何锁定的情况下有效地运行操作。这与同步解决方案相反，它只允许单个线程运行操作。
*   循环 - 如果我们将项目放入已填充的集合中，新项目将替换最旧的项目。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:25:53.563

你描述的听起来很像[disruptor](http://code.google.com/p/disruptor/)，但它是一个外部库，不是内置的。据我所知，Java标准库中没有内置的环形缓冲区数据结构。

# xml - 使用 xsl 文件的 xml 输出

> ID：10534116
> 
> 赞同：0
> 
> 时间：2012-05-10T12:34:41.740
> 
> 标签：xml, xslt

我接到了一项任务，其中一个问题要求我们基于新模式通过 XSLT 生成新的 XML 输出。我已经做到了。这个问题的好处是，生成一个新的 xsl 文件来构建一个 HTML 表，以根据前一个 xsl 文件输出的标准对结果进行排名。

例如，在原始 XML 中：

```
<PROPERTY>
<NAME>Abvc</NAME>
</PROPERTY> 
```

在第一个 xsl 文件中，我已将其更改为 xml 输出并重命名标签：

```
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
  <xsl:element name="pro">
    <xsl:apply-templates select="PROPERTY"/>
  </xsl:element>
</xsl:template>

<xsl:template match="PROPERTY">
  <xsl:attribute name="name">
    <xsl:value-of select="NAME"/>
  </xsl:attribute>
</xsl:template> 
```

所以我的问题是我是否喜欢在**另一个 xsl中使用****上述 xsl**文件的输出，例如：

 **```
<xsl:template match="pro">
  //do something here...
</xsl:template> 
```

可能吗？顺便说一句，我必须使用默认的 xslt 1.0 版本。这是要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:59:40.690

是的，总是可以使用另一个样式表来处理一个样式表的输出。在大型应用程序中，它是创建模块化结构和可重用组件的重要方式，通常称为“流水线”。

您如何构建管道的机制取决于您使用的技术。您可以使用 Java 程序、使用 XProc、使用 Ant 或使用 shell 脚本来控制它。你甚至可以用手来做。有许多应用程序框架（例如 Orbeon）提供流水线支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:09:25.837

我在这里有一个简单的 HTML 输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output method="html" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
    doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN" indent="yes"/>

<xsl:template match="/">
    <xsl:apply-templates select="pro"/>
</xsl:template>

<xsl:template match="pro">
    <html>
        <body>
            <table border="1">
                <th>
                    <xsl:value-of select="'Header'"/>
                </th>
                <tr>
                    <td><xsl:value-of select="./@name"/></td>
                </tr>
            </table>    
        </body>
    </html>
</xsl:template>

</xsl:stylesheet> 
```**

# android - 如何在 iPhone 和 Android 手机中使用“日期”占位符

> ID：10534117
> 
> 赞同：1
> 
> 时间：2012-05-10T12:34:42.727
> 
> 标签：android, iphone, html

我正在尝试在移动网站中获取日期字段的占位符。但它显示为空文本框。

我曾经使用占位符来跟踪代码，还有其他方法吗？

```
<li><input type="date" name="" value="" placeholder="Date of Birth"/></li> 
```

# java - 在格式化 JAXB 输出方面需要帮助

> ID：10534126
> 
> 赞同：4
> 
> 时间：2012-05-10T12:35:16.233
> 
> 标签：java, xml, jaxb2, xml-formatting

我有一些对象，比如说两个，A 和 B。这些对象来自同一个类。我需要使用 JAXB 编组这些对象，输出 XML 应采用以下形式：

```
<Root>
    <A>
        <ID> an id </ID>
    </A>
    <B>
        <ID> an id </ID>
    </B>
</Root>

<!-- Then all A and B attributes must be listed !-->
<A>
    <ID> an id </ID>
    <attribute1> value </attribute1>
    <attribute2> value </attribute2>
</A>
<B>
    <ID> an id </ID>
    <attribute1> value </attribute1>
    <attribute2> value </attribute2>
</B> 
```

如何在 JAXB 中生成这种格式？任何帮助表示赞赏。

**更新：** 更具体地说，假设我们有这样的 Human 类：

```
@XmlRootElement
public class Human {
    private String name;
    private int age;
    private Integer nationalID;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public Integer getNationalID() {
        return nationalID;
    }

    public void setNationalID(Integer nationalID) {
        this.nationalID = nationalID;
    }
} 
```

我们的主要课程是：

```
public class Main3 {

    public static void main(String[] args) throws JAXBException {
        Human human1 = new Human();
        human1.setName("John");
        human1.setAge(24);
        human1.setNationalID(Integer.valueOf(123456789));

        JAXBContext context = JAXBContext.newInstance(Human.class);
        Marshaller m = context.createMarshaller();
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

        StringWriter stringWriter = new StringWriter();

        m.marshal(human1, stringWriter);

        System.out.println(stringWriter.toString());
    }

} 
```

然后输出将是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<human>
    <age>24</age>
    <name>John</name>
    <nationalID>123456789</nationalID>
</human> 
```

现在我需要输出是这样的：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<human>
    <nationalID>123456789</nationalID>
</human>
<human>
    <nationalID>123456789</nationalID>
    <age>24</age>
    <name>John</name>
</human> 
```

这将帮助我绘制一个没有属性（仅按 ID）的 XML 对象树，然后是树下的所有定义。这可能使用 JAXB 或任何其他实现吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T12:46:51.593

尝试这个：

```
import java.io.StringWriter;
import javax.xml.bind.Marshaller;

...

Object requestObject = ...  // This is the object that needs to be printed with indentation
Marshaller marshaller = ...
marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
StringWriter stringWriter = new StringWriter();
marshaller.marshal(requestObject, stringWriter);

System.out.println(stringWriter.toString()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T08:53:57.370

```
package com.namasoft.dms.gui.common.utilities;

import java.io.StringWriter;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.annotation.XmlAccessorOrder;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElementWrapper;
import javax.xml.bind.annotation.XmlID;
import javax.xml.bind.annotation.XmlIDREF;
import javax.xml.bind.annotation.XmlRootElement;

public class JAXB
{

    public static class Human
    {

        @XmlID
        String id;
        @XmlElement
        String name;
        @XmlElement
        int age;

        public Human()
        {
        }

        public Human(String name)
        {
            this.id = this.name = name;
            age = new Random().nextInt();
        }
    }

    @XmlRootElement
    public static class HumansList
    {
        @XmlElementWrapper(name = "humanObjects")
        @XmlElement(name = "human")
        List<Human> humanObjects = new ArrayList<>();

        @XmlIDREF
        @XmlElementWrapper(name = "humanIds")
        @XmlElement(name = "id")
        List<Human> humanIds = new ArrayList<>();

        void addHuman(Human human)
        {
            humanObjects.add(human);
            humanIds.add(human);
        }
    }

    public static void main(String[] args) throws JAXBException
    {
        HumansList list = new HumansList();
        Human parent1 = new Human("parent1");
        list.addHuman(parent1);
        Human child11 = new Human("child11");
        list.addHuman(child11);
        Human child12 = new Human("child12");
        list.addHuman(child12);

        Human parent2 = new Human("parent2");
        list.addHuman(parent2);
        Human child21 = new Human("child21");
        list.addHuman(child21);
        Human child22 = new Human("child22");
        list.addHuman(child22);

        JAXBContext context = JAXBContext.newInstance(HumansList.class);
        Marshaller m = context.createMarshaller();
        StringWriter xml = new StringWriter();
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
        m.setProperty(Marshaller.JAXB_ENCODING, "UTF-8");

        m.marshal(list, xml);
        System.out.println(xml);
    }
} 
```

输出将是

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<humansList>
    <humanObjects>
        <human>
            <id>parent1</id>
            <name>parent1</name>
            <age>-486071665</age>
        </human>
        <human>
            <id>child11</id>
            <name>child11</name>
            <age>920318383</age>
        </human>
        <human>
            <id>child12</id>
            <name>child12</name>
            <age>-1355111983</age>
        </human>
        <human>
            <id>parent2</id>
            <name>parent2</name>
            <age>-314154051</age>
        </human>
        <human>
            <id>child21</id>
            <name>child21</name>
            <age>983544381</age>
        </human>
        <human>
            <id>child22</id>
            <name>child22</name>
            <age>748252616</age>
        </human>
    </humanObjects>
    <humanIds>
        <id>parent1</id>
        <id>child11</id>
        <id>child12</id>
        <id>parent2</id>
        <id>child21</id>
        <id>child22</id>
    </humanIds>
</humansList> 
```

# vim - 如何在光标下*直接*增加一个数字？

> ID：10534130
> 
> 赞同：44
> 
> 时间：2012-05-10T12:35:25.800
> 
> 标签：vim, keyboard-shortcuts

在 vim 等中，您可以使用`CTRL``A`and来增加或减少光标所在的数字`CTRL``X`。但是，这会增加整数，但我想直接增加光标下的数字。这有点难以描述，所以这就是我的意思：

```
Ctrl+A usage, cursor is over the "6":
[6]5 -> 66

What I need:
[6]5 -> 75

or:
3[8]90 -> 3990 
```

我希望这是有道理的。

我用谷歌搜索了一下，但我不确定是否存在这样的快捷方式，因此非常感谢任何提示！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-10T12:59:11.433

`<C-a>`并`<C-x>`处理整数（一位或多位数字），但不能处理数字的“部分”。然而，它需要一个“计数”，所以`10<C-a>`变成.`[6]5``75`

另一种选择是，因为您只想更改一位数字，所以要`r7`变成.`[6]5``75`

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-10T12:57:58.530

在这种情况下，我通常输入`r`然后输入我想要的数字。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-10T17:02:52.393

我猜 3[9]42 应该变成 4042（否则，[Xavier 的解决方案](https://stackoverflow.com/a/10534509/15934)几乎是完美的（*）），我会使用以下内容：

```
s/\d*\%#\d/\=(submatch(0)+1) 
```

可以映射成：

```
nnoremap <silent> µ :<c-u>s/\d*\%#\d/\=(submatch(0)+v:count1)<cr>`` 
```

为了接受计数。我看到的唯一问题是它不能支持重复（如`:h .`）

(*) 从某种意义上说，重复该命令不会帮助我们将一系列不同的数字增加相同的数量。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-10T12:54:07.097

可能有更好的方法，但你可以制作一个宏或映射到这个的东西：

```
noremap <LEADER>a a <ESC>h<C-a>lxh
noremap <LEADER>z a <ESC>h<C-z>lxh 
```

它基本上使“65”“6 5”，增加 6 并删除空间。可能还有一个更短的版本也可以。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-11T14:05:06.533

在全局命令中用于`Ctrl``v`插入文字`Ctrl``a`，这意味着在正常模式下将每个数字增加`\d\+`10

```
:g/\d\+/norm! 10 Ctrl-v Ctrl-a 
```

我们还可以避免键入“Ctrl-v Ctrl-a”，只需使用带双引号的“exec”，如下行所示。如果您尝试使用单引号，则此解决方案不起作用。

```
:g/\d\+/exec "norm! 10\<C-a>" 
```

在正常模式下，您可以简单地执行以下操作：

```
10 Ctrl-a 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-10T13:10:52.847

你可以这样做（使用任何 intead `F9`）：

```
:nnoremap <F9> :exec 's@^\(.\{' . (col(".")-1) . '\}\)\(.\)\(.*\)@\1' . (getline(".")[col(".")-1]+1) . '\3@'<CR> 
```

基本上它只是在行中找到光标位置，在其上构建一个正则表达式字符串并使用该位置上的字符加 1。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-14T20:14:49.820

你可以这样`v11<C-A>x`做`(digit + 11) modulo 10` 如果你经常这样做，那么你可以将它映射到你想要的任何东西（`<leader>a`？）。

注意：如果数字不是 9 则`v<C-A>`有效。我从[vimgolf](http://www.vimgolf.com/challenges/5c645526fa8ae200061757ad)得到这个提示，我推荐这个网站：D

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-10T13:56:25.117

如果你不介意弄乱`"`寄存器，下面是另一个序列：

```
s<C-R>=<C-R>"+1<CR> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-27T08:13:44.637

`v <C-A/X>`效果很好，因为`<C-A/X>`适用于光标所在的单词（即数字）或视觉选择（即数字）。

# c++ - c++ 可变参数模板，错误的参数包长度？

> ID：10534132
> 
> 赞同：4
> 
> 时间：2012-05-10T12:35:36.950
> 
> 标签：c++, c++11, variadic-templates

这是 gcc 错误还是参数包的某种错误使用？

（用 gcc 4.6.3 编译 :)

```
#include <iostream>
template<class...Ts> struct tuple{};
template<class...>class test;

template< template <class...> class tp,
  class...arg1Ts,
  class...arg2Ts> 
class test<tp<arg1Ts...>,tp<arg2Ts...>>{
  public:
  void test1(arg1Ts... arg1s,arg2Ts... arg2s){
  std::cout<<sizeof...(arg1s);  //Why is this 2? Why not 0?
  std::cout<<sizeof...(arg2s);  //2 ok
 }
};
int main(){
 test<tuple<>,tuple<char,int>> t1; //(arg1Ts... = empty), (arg2Ts... = char,int)
 t1.test1('a',2); //prints 22, not 02
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:51:57.083

我在这里放了一个可编译的例子：

```
#include <iostream>

template <class...> class test;

template <
    template <class...> class tp,
    class...arg1Ts,
    class...arg2Ts
> 
class test < tp<arg1Ts...>, tp<arg2Ts...> > {
public:
    void test1(arg1Ts..., arg2Ts...) {
        std::cout << sizeof...(arg1Ts) << ' ' << sizeof...(arg2Ts) << '\n';
    }
};

template <typename...> class Pack;

int main(){
   test< Pack<>, Pack<char,int>> t1;
   t1.test1('a', 2);
} 
```

（与你的没有太大不同，但它编译干净）

使用 clang 3.0，这给出了：

```
0 2 
```

这正是预期的。所以我会想出你正在使用的 gcc 版本的错误。是时候升级到 4.7 了吗？

# ssl - 在 Heroku 上获得 256 位 AES SSL？

> ID：10534133
> 
> 赞同：1
> 
> 时间：2012-05-10T12:35:37.963
> 
> 标签：ssl, heroku, aes

我正在尝试移植我现有的 Heroku 应用程序以在整个过程中使用 SSL。客户*只需要*256 位 AES SSL。我在 Heroku 上没有看到任何关于他们提供什么密码的文档，甚至没有看到在哪里配置这个设置。

是否可以更改设置？Heroku 会自动处理所有这些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T16:10:15.310

目前 Heroku 支持以下密码套件：

您可以通过使用 ssllab.com 的 SSL 测试来发现这一点： [https ://www.ssllabs.com/ssltest/analyze.html?d=heroku.com&s=23.21.198.2](https://www.ssllabs.com/ssltest/analyze.html?d=heroku.com&s=23.21.198.2)

```
TLS_RSA_WITH_RC4_128_SHA (0x5) 128
TLS_RSA_WITH_AES_128_CBC_SHA (0x2f) 128
TLS_DHE_RSA_WITH_AES_128_CBC_SHA (0x33) DH 1024 位 (p: 128, g: 128, Ys: 128) FS 128
TLS_RSA_WITH_CAMELLIA_128_CBC_SHA (0x41) 128
TLS_DHE_RSA_WITH_CAMELLIA_128_CBC_SHA (0x45) DH 1024 位 (p: 128, g: 128, Ys: 128) FS 128
TLS_ECDHE_RSA_WITH_RC4_128_SHA (0xc011) ECDH 233 位 (eq. 2048 位 RSA) FS 128
TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA (0xc013) ECDH 233 位 (eq. 2048 位 RSA) FS 128
TLS_RSA_WITH_3DES_EDE_CBC_SHA (0xa) 168
TLS_DHE_RSA_WITH_3DES_EDE_CBC_SHA (0x16) DH 1024 位 (p: 128, g: 128, Ys: 128) FS 168
TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA (0xc012) ECDH 233 位 (eq. 2048 位 RSA) FS 168
TLS_RSA_WITH_AES_256_CBC_SHA (0x35) 256
TLS_DHE_RSA_WITH_AES_256_CBC_SHA (0x39) DH 1024 位 (p: 128, g: 128, Ys: 128) FS 256
TLS_RSA_WITH_CAMELLIA_256_CBC_SHA (0x84) 256
TLS_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA (0x88) DH 1024 位 (p: 128, g: 128, Ys: 128) FS 256
TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA (0xc014) ECDH 233 位 (eq. 2048 位 RSA) FS

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:56:41.763

Heroku SSL 只有一种风格。您需要就具体细节[寻求支持](https://support.heroku.com/home)。

但是，如果您的客户端有一组非常具体的要求，则没有什么可以阻止您创建自己的 SSL 端点来代理到 Heroku 的流量。

# javascript - Webkit 呈现动态内容的错误

> ID：10534136
> 
> 赞同：2
> 
> 时间：2012-05-10T12:35:51.113
> 
> 标签：javascript, google-chrome, safari, webkit, rendering

当我使用 javascript 更改跨度的内容时，此更改不会在 Webkit 浏览器中呈现。

这仅适用于包装器跨度定位相对包含内部跨度的情况，该内部跨度定位绝对并具有固定的宽度和高度。

这是最简单的错误示例（在 Chrome 或 Safari 等 webkit 浏览器中检查）

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Webkit render bug</title>
        <style type="text/css">
            .wrapper {
                position: relative;
            }

            #absolute-block {
                display: block;
                position: absolute;
                width: 152px;
                height:42px;
                background-color: #EEEE00;
                color: #FF0000;
            }

        </style>
    </head>
    <body>
        <h1>Webkit render bug</h1>
        <button onclick="document.getElementById('absolute-block').innerHTML = 'Update test';">Update test</button>
        <span class="wrapper">
            Some content
            <span id="absolute-block">Absolute-block</span>
        </span>
    </body>
</html> 
```

单击按钮将替换 DOM 树中 span 的内容，但这不会由基于 webkit 的浏览器（如 Chrome 和 Safari）呈现。其他浏览器没有这个渲染错误。

有谁知道这是否会在不久的将来得到解决？还是解决此浏览器问题更好？

# c# - 如何从 DataGridView 为 ComboBox 赋值？

> ID：10534141
> 
> 赞同：0
> 
> 时间：2012-05-10T12:36:15.327
> 
> 标签：c#, winforms

我有一个 datagridview，我想从它的一个单元格中填充一个组合框。
我试过这个，但它不起作用。

```
comboBox1.SelectedItem = dataGridView1.SelectedRows[0].Cells[1].Value.ToString(); 
```

注意组合框不在datadgrid中；它在它的外部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:40:08.510

```
comboBox1.SelectedText = dataGridView1.SelectedRows[0].Cells[1].Value.ToString(); 
```

如果 Datagrid 的列 [1] 包含值成员并且组合框也与值和显示成员绑定，则可以使用

```
comboBox1.SelectedValue  = dataGridView1.SelectedRows[0].Cells[1].Value.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:42:01.020

改为使用`comboBox1.SelectedText`属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:59:34.217

关于[**MSDN**](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedtext.aspx)**上的ComboBox.SelectedText**属性：[](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedtext.aspx)

 **> **获取或设置在ComboBox的*可编辑部分*中选择的文本**。

如果您的 ComboBox 项是字符串，则以下行就足够了：

```
 ComboBox1.SelectedItem = dataGridView1.SelectedRows[0].Cells[1].Value.ToString().Trim(); 
```

请注意，DataGridView 单元格中字符串的大小写必须与 ComboBox 字符串项的大小写匹配，这样才能正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T12:59:59.373

```
cmb1.SelectedText = Convert.ToString(dataGridView1.SelectedRows[0].Cells["cellName"].Value); 
```

或者试试这个

```
cmb1.SelectedValue  = Convert.ToString(dataGridView1.SelectedRows[0].Cells["cellName"].Value); 
```**

# c# - How to underline $10 and $50.58

> ID：10534145
> 
> 赞同：3
> 
> 时间：2012-05-10T12:36:24.903
> 
> 标签：c#, asp.net

> All Customers Take $10 off $50.58 in ccc.com's Home Decor, Home Appliances and Outdoor Store! Valid through 5/31/2012"

I am getting above type of string from db,the string may or may not contain $.If it contains $ then the numbers after the $ should be underlined.The string is completely dynamic.It also may not contain $

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T12:42:35.927

尝试正则表达式：

```
Regex.Replace(str, @"(?<=\$)\d+(\.\d+)?", "<u>$0</u>"); 
```

一些示例输出：

```
"4.5"     -> "4.5"         (untouched)
"4"       -> "4"           (untouched)
"$4.5"    -> "$<u>4.5</u>"
"$4"      -> "$<u>4</u>" 
```

虽然，因为`u`已弃用，但您可能应该考虑`<span>`使用类或内联样式与`text-decoration: underline`指令：

```
Regex.Replace(str, @"(?<=\$)\d+(\.\d+)?", 
  "<span style=""text-decoration: underline"">$0</span>"); 
```

这取决于您要将此文本放入的封闭元素是什么：如果它也是 a `span`，那么您不能嵌套它们，因此您必须关闭第一个（只需`"</span>"`坚持替换字符串的开头（第三个参数）和`"<span>"`结尾）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:36:17.367

以上面使用跨度的例子为例......可能比正则表达式更容易阅读的东西只是 indexOf 方法

```
 string s = "$10";
        string t =  (s.IndexOf('$') > 0) ? "<span style=\"text-decoration: underline\">#</span>".Replace("#",s):"<span>{0}</span>".Replace("#",s); 
```

# c# - 如何检测是否安装了 SQL Server CE 4.0

> ID：10534158
> 
> 赞同：4
> 
> 时间：2012-05-10T12:36:50.880
> 
> 标签：c#, windows-installer, sql-server-ce-4

我开发了一些需要安装 SQL Server CE 4.0 的应用程序。

我在 Windows 7 64 位下完成所有工作，所以我安装了 SQL Server CE 4.0 64 位。

当我启动应用程序/或安装程序时，如何检查是否安装了 SQL Server CE 4.0 32 位/64 位？

一般采用哪种方法？

任何线索，文章等？

谢谢！！

PS 我读了这个链接[How can InstallShield check if SQL Server 2005 (3.1) Compact Edition (CE) 已安装](https://stackoverflow.com/questions/3969855/how-can-installshield-check-if-sql-server-2005-3-1-compact-edition-ce-is-ins)但它没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T14:52:09.177

只需在您的应用程序中包含所有必需的文件，它将在 x86 和 x64 上运行 - 请参阅我的博客文章：http: [//erikej.blogspot.com/2011/02/using-sql-server-compact-40- with.html](http://erikej.blogspot.com/2011/02/using-sql-server-compact-40-with.html)

您还可以使用下面的代码来检测您的应用程序是否可以使用运行时，但如果您在上面实现，则不需要：

```
 public bool IsV40Installed()
    {
        try
        {
            System.Reflection.Assembly.Load("System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91");
        }
        catch (System.IO.FileNotFoundException)
        {
            return false;
        }
        try
        {
            var factory = System.Data.Common.DbProviderFactories.GetFactory("System.Data.SqlServerCe.4.0");
        }
        catch (System.Configuration.ConfigurationException)
        {
            return false;
        }
        catch (System.ArgumentException)
        {
            return false;
        }
        return true;
    } 
```

# java - Why do we need contexClassLoader

> ID：10534160
> 
> 赞同：1
> 
> 时间：2012-05-10T12:36:54.360
> 
> 标签：java, contextclassloader

I'm wondering why Java introduced contexClassLoader for threads. I know that it is usualy used by frameworks and application servers which have to dynamically find and load classes.

However I don't understand why Java introduced contexClassLoader when we can achieve the same functionality simply by adding field that will hold necessary class loader.

```
class ThreadWithCustomClassloader extends Thread
{
    ClassLoader threadClassLoader;

    public void run()
    {
       //use threadClassLoader to dynamically find and load classes
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:11:39.460

我很困惑 - 类加载器的实例变量正是 Thread 类用来实现它的。你的解决方案有什么不同？

你介意二传手吗？设置类加载器对于能够为完全不同的环境（Web 应用程序）重用相同的线程（例如，在 servlet 容器中）非常重要。线程实例被认为是昂贵的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T10:40:24.880

**JVM 中默认的类加载器机制是父委托，线程上下文类加载器围绕类加载委托方案提供了一个后门。** 以 JNDI 为例：它的核心由 rt.jar 中的引导类实现（从 J2SE 1.3 开始），但这些核心 JNDI 类可能会加载由独立供应商实现的 JNDI 提供程序，并可能部署在应用程序的 -classpath 中。这种情况需要一个父类加载器（在这种情况下是原始类加载器）加载一个对其子类加载器之一可见的类（例如，系统类加载器）。**正常的 J2SE 委派不起作用，解决方法是让核心 JNDI 类使用线程上下文加载**器，从而有效地通过类加载器层次结构在与正确委派相反的方向“隧道”。

有关更多信息，请检查[您应该使用哪个类加载器](http://www.javaworld.com/article/2077344/core-java/find-a-way-out-of-the-classloader-maze.html)

# php - 我的选择菜单每次为每条记录显示每个端口（伦敦、利物浦、都柏林），我只想要每个端口一次

> ID：10534165
> 
> 赞同：0
> 
> 时间：2012-05-10T12:37:11.750
> 
> 标签：php, mysql

这是查询，它返回对我的游轮和票价表的搜索：

```
SELECT *, MIN(fares.offered) FROM cruises,fares 
WHERE cruises.departs > CURDATE() AND (cruises.destination LIKE %s OR 
  cruises.second_destination LIKE %s) AND 
  EXTRACT(YEAR_MONTH from cruises.departs) LIKE %s 
  AND cruises.fromport LIKE %s 
  AND cruises.ship LIKE %s AND cruises.live = 'Y' 
  AND fares.cruise_id = cruises.id 
GROUP BY fares.cruise_id ORDER BY cruises.departs, cruises.fromport" 
```

我有一些跳转菜单，以便用户可以缩小搜索范围，例如上面的查询返回 2012 年 7 月的所有游轮，有一些，一些从伦敦出发，一些从利物浦出发。

我的港口选择菜单填充了所有航次，像这样

```
London
Liverpool
London
London
Liverpool 
```

7 月份每返回一次航行记录。

我只想要

```
London
Liverpool 
```

这是选择代码：

```
<select name="jumpMenu3" id="jumpMenu3" onchange="MM_jumpMenu('parent',this,0)">
    <option value="">Select a port</option>
    <?php
    $port = ''; 
    mysql_data_seek($cruises, 0);
    while ($row_cruises = mysql_fetch_assoc($cruises)) { 
        if ($row_cruises['fromport'] != $port) {
            $port = $row_cruises['fromport'];
    ?>
    <option value="index.php?subj=2&destination=<?php 
       echo urlencode($row_cruises['destination']);
    ?>&departs=<?php 
      echo date('Ym',strtotime($row_cruises['departs']));
    ?>&port=<?php 
      echo urlencode($port);?>"<?php 
    if ($_GET['port'] == $row_cruises['fromport']) {
      echo "selected=\"selected\"";
    } 
    ?>><?php echo $port; ?></option>
    <?php } ;
    }
    if(mysql_num_rows($cruises) > 0) {
        mysql_data_seek($cruises, 0);
        $row_cruises = mysql_fetch_assoc($cruises);
    }
    ?>
    </select> 
```

我想过 GROUP BY 但我不能在我的港口搜索查询中使用它，因为显然每个港口都有不止一个航次，也许我需要单独查询月份选择选项 - 或者我可以用 php 分组?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:44:29.810

最好的方法是另一个查询来检索端口名称，如下所示：

```
SELECT DISTINCT fromport FROM cruises WHERE cruises.departs > CURDATE() 
```

您可以添加其他应适用的条件。

第二种方法可以在 PHP 中完成：

```
$ports = array(); 
mysql_data_seek($cruises, 0);
while ($row_cruises = mysql_fetch_assoc($cruises)) { 
    if (!in_array($row_cruises['fromport'], $ports)) {
        $ports[] = $row_cruises['fromport'];
?>
<option value="index.php?subj=2&destination=<?php echo urlencode($row_cruises['destination']);?>&departs=<?php echo date('Ym',strtotime($row_cruises['departs']));?>&port=<?php echo urlencode($row_cruises['fromport']);?>"<?php if ($_GET['port'] == $row_cruises['fromport']) {echo "selected=\"selected\"";}?>><?php echo $row_cruises['fromport']; ?></option>
<?php
    }
}
if(mysql_num_rows($cruises) > 0) {
    mysql_data_seek($cruises, 0);
    $row_cruises = mysql_fetch_assoc($cruises);
} 
```

# javascript - 具有 D3 JS 并行集的动态新维度

> ID：10534168
> 
> 赞同：1
> 
> 时间：2012-05-10T12:37:18.713
> 
> 标签：javascript, parallel-processing, d3.js

您好我正在尝试动态更改我的并行集图表的尺寸。

[http://www.jasondavies.com/parallel-sets/](http://www.jasondavies.com/parallel-sets/)

```
var chart = d3.parsets()
  .dimensions(["Survived", "Sex", "Age", "Class"]);

var vis = d3.select("#vis").append("svg")
.attr("width", chart.width())
.attr("height", chart.height());

d3.csv("titanic.csv", function(csv) {
vis.datum(csv).call(chart);
}); 
```

我想用一个简单的复选框将“Survived”、“Sex”、“Age”、“Class”动态更改为“Survived”、“Age”、“Class”。

我现在拥有的是：

```
<form name="myform">
<label for="dimensions1"><input type="checkbox" id="dimensions1" 
onClick="changedimensions()">Survived, Age, Class</label> </form> 
```

功能

```
function changedimensions(){

        var chart = d3.parsets()
                    .dimensions(["Survived", "Age", "Class"])
                    .width(1300);

        var vis = d3.select("#vis").append("svg")
                    .attr("width", chart.width())
                    .attr("height", chart.height());

    d3.csv("data.csv", function(csv) {
            vis.datum(csv).call(chart);
                }); 
```

问题是这种方法只会在旧图表下方生成一个全新的图表（具有新维度）:(

这是在未选中复选框的情况下首次加载的整个脚本：

```
var chart = d3.parsets()
    .dimensions(["Survived", "Sex", "Age", "Class"]);

var vis = d3.select("#vis").append("svg")
    .attr("width", chart.width())
    .attr("height", chart.height());

var partition = d3.layout.partition()
    .sort(null)
    .size([chart.width(), chart.height() * 5 / 4])
    .children(function(d) { return d.children ? d3.values(d.children) : null; })
    .value(function(d) { return d.count; });

var ice = false;

function curves() {
  var t = vis.transition().duration(500);
  if (ice) {
    t.delay(1000);
    icicle();
  }
  t.call(chart.tension(this.checked ? .5 : 1));
}

d3.csv("titanic.csv", function(csv) {
  vis.datum(csv).call(chart);

  window.icicle = function() {
    var newIce = this.checked,
        tension = chart.tension();
    if (newIce === ice) return;
    if (ice = newIce) {
      var dimensions = [];
      vis.selectAll("g.dimension")
         .each(function(d) { dimensions.push(d); });
      dimensions.sort(function(a, b) { return a.y - b.y; });
      var root = d3.parsets.tree({children: {}}, csv, dimensions.map(function(d) { return d.name; }), function() { return 1; }),
          nodes = partition(root),
          nodesByPath = {};
      nodes.forEach(function(d) {
        var path = d.data.name,
            p = d;
        while ((p = p.parent) && p.data.name) {
          path = p.data.name + "\0" + path;
        }
        if (path) nodesByPath[path] = d;
      });
      var data = [];
      vis.on("mousedown.icicle", stopClick, true)
        .select(".ribbon").selectAll("path")
          .each(function(d) {
            var node = nodesByPath[d.path],
                s = d.source,
                t = d.target;
            s.node.x0 = t.node.x0 = 0;
            s.x0 = t.x0 = node.x;
            s.dx0 = s.dx;
            t.dx0 = t.dx;
            s.dx = t.dx = node.dx;
            data.push(d);
          });
      iceTransition(vis.selectAll("path"))
          .attr("d", function(d) {
            var s = d.source,
                t = d.target;
            return ribbonPath(s, t, tension);
          })
          .style("stroke-opacity", 1);
      iceTransition(vis.selectAll("text.icicle")
          .data(data)
        .enter().append("text")
          .attr("class", "icicle")
          .attr("text-anchor", "middle")
          .attr("dy", ".3em")
          .attr("transform", function(d) {
            return "translate(" + [d.source.x0 + d.source.dx / 2, d.source.dimension.y0 + d.target.dimension.y0 >> 1] + ")rotate(90)";
          })
          .text(function(d) { return d.source.dx > 15 ? d.node.name : null; })
          .style("opacity", 1e-6))
          .style("opacity", 1);
      iceTransition(vis.selectAll("g.dimension rect, g.category")
          .style("opacity", 1))
          .style("opacity", 1e-6)
          .each("end", function() { d3.select(this).attr("visibility", "hidden"); });
      iceTransition(vis.selectAll("text.dimension"))
          .attr("transform", "translate(0,-5)");
      vis.selectAll("tspan.sort").style("visibility", "hidden");
    } else {
      vis.on("mousedown.icicle", null)
        .select(".ribbon").selectAll("path")
          .each(function(d) {
            var s = d.source,
                t = d.target;
            s.node.x0 = s.node.x;
            s.x0 = s.x;
            s.dx = s.dx0;
            t.node.x0 = t.node.x;
            t.x0 = t.x;
            t.dx = t.dx0;
          });
      iceTransition(vis.selectAll("path"))
          .attr("d", function(d) {
            var s = d.source,
                t = d.target;
            return ribbonPath(s, t, tension);
          })
          .style("stroke-opacity", null);
      iceTransition(vis.selectAll("text.icicle"))
          .style("opacity", 1e-6).remove();
      iceTransition(vis.selectAll("g.dimension rect, g.category")
          .attr("visibility", null)
          .style("opacity", 1e-6))
          .style("opacity", 1);
      iceTransition(vis.selectAll("text.dimension"))
          .attr("transform", "translate(0,-25)");
      vis.selectAll("tspan.sort").style("visibility", null);
    }
  };
  d3.select("#icicle")
      .on("change", icicle)
      .each(icicle);
});

function iceTransition(g) {
  return g.transition().duration(1000);
}

function ribbonPath(s, t, tension) {
  var sx = s.node.x0 + s.x0,
      tx = t.node.x0 + t.x0,
      sy = s.dimension.y0,
      ty = t.dimension.y0;
  return (tension === 1 ? [
      "M", [sx, sy],
      "L", [tx, ty],
      "h", t.dx,
      "L", [sx + s.dx, sy],
      "Z"]
   : ["M", [sx, sy],
      "C", [sx, m0 = tension * sy + (1 - tension) * ty], " ",
           [tx, m1 = tension * ty + (1 - tension) * sy], " ", [tx, ty],
      "h", t.dx,
      "C", [tx + t.dx, m1], " ", [sx + s.dx, m0], " ", [sx + s.dx, sy],
      "Z"]).join("");
}

function stopClick() { d3.event.stopPropagation(); }

// Given a text function and width function, truncates the text if necessary to
// fit within the given width.
function truncateText(text, width) {
  return function(d, i) {
    var t = this.textContent = text(d, i),
        w = width(d, i);
    if (this.getComputedTextLength() < w) return t;
    this.textContent = "…" + t;
    var lo = 0,
        hi = t.length + 1,
        x;
    while (lo < hi) {
      var mid = lo + hi >> 1;
      if ((x = this.getSubStringLength(0, mid)) < w) lo = mid + 1;
      else hi = mid;
    }
    return lo > 1 ? t.substr(0, lo - 2) + "…" : "";
  };
}

d3.select("#file").on("change", function() {
  var file = this.files[0],
      reader = new FileReader;
  reader.onloadend = function() {
    var csv = d3.csv.parse(reader.result);
    vis.datum(csv).call(chart
        .value(csv[0].hasOwnProperty("Number") ? function(d) { return +d.Number; } : 1)
        .dimensions(function(d) { return d3.keys(d[0]).filter(function(d) { return d !== "Number"; }).sort(); }));
  };
  reader.readAsText(file);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:48:35.213

你的问题在这里：

```
var vis = d3.select("#vis").append("svg") 
```

这会附加一个*新* `<svg>`元素。因此，如果您每次更改维度时都这样做，您将获得*另一个*图表。

相反，您可以将其移到函数`append`之外，并在更新图表时`changedimensions`简单地引用变量：`vis`

```
var vis = d3.select("#vis").append("svg")
// …

function changedimensions() {
  // …
  vis.call(chart);
} 
```

我还没有测试过就地更新图表，但是如果您遇到任何进一步的问题，请告诉我。

# c# - 如何在 Lambda .NET 语法中调用用户定义的函数

> ID：10534169
> 
> 赞同：0
> 
> 时间：2012-05-10T12:37:21.567
> 
> 标签：c#, .net, linq, linq-to-sql, lambda

好的，这是我的问题。我有数据库表`BloodCenters`，其中有`latitude`和`longitude`字段。我想使用 Linq Lambda 语法通过检索相对于某个点在给定半径内的 BloodCenters 来查询这些表。

我正在使用这段代码，但它仍然给我错误（在 Where 谓词内）：

```
public static List<BloodCenter> GetAllNearby(int latitude, int longitude, int radius, int limit){
    List<BloodCenter> res = null;
    res = new DBEntities().BloodCenters.Where(b =>
        Util.distance(latitude, longitude, b.Latitude, b.Longitude, "K") <= radius).Take(limit);
    return res;
} 
```

Util.distance 是一个返回纬度和经度 2 点之间距离的函数。 **编辑** 所以，我不能把我自己的函数放在 Where 谓词中。但是我可以使用 SQL 语法计算距离吗？这是我的`Util.Distance`实现：

```
public static double distance(double lat1, double longi1, double lat2, double longi2, string unit){
    var theta = longi1 - longi2;
    var dist = Math.Sin(DegreeToRadian(lat1)) * Math.Sin(DegreeToRadian(lat2)) +
        Math.Cos(DegreeToRadian(lat1)) * Math.Cos(DegreeToRadian(lat2)) * Math.Cos(DegreeToRadian(theta));
    dist = Math.Acos(dist);
    dist = RadianToDegree(dist);
    var miles = dist * 60 * 1.1515;
    unit = unit.ToUpper();
    if (unit.Equals("K"))
        return miles * 1.609344;
    else if (unit.Equals("N"))
        return miles * 0.8684;
    else
        return miles;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:39:07.120

这将不起作用，因为`Util.distance`在您的 C# 代码中实现，并且查询表面不知道如何将其转换为 SQL（或者即使这可能）。

一个直接的解决方法是从数据库中获取所有记录并将谓词应用于实例，如下所示：

```
res = new DBEntities().BloodCenters.ToList()
          .Where(b => Util.distance(latitude, longitude, b.Latitude, b.Longitude, "K") <= radius)
          .Take(limit);
return res; 
```

当然，获取所有记录也不是最好的主意，但有时根本没有其他办法。

您可以尝试的是内联谓词`Util.distance`内部的逻辑。`Where`如果逻辑可以仅使用“简单”操作（如基本数学）来表达，则查询表面将能够将其转换为 SQL，并且一切都会顺利进行。

[以下](http://msdn.microsoft.com/en-us/library/bb738681.aspx)是可以自动转换为 SQL 的所有方法的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:44:26.633

您必须转换`DBEntities().BloodCenters`为本地存储的`IEnumerable`or`List`或其他内容。Linq to SQL 将 C# 转换为 SQL - 因此您只能使用 SQL 服务器提供的函数。

另一种方法是用可翻译的语句模拟函数或在数据库中实现它（存储过程或类似的）

# primary-key - Undefined offset 0 in ActiveRecord/lib/Model.php on line 573

> ID：10534173
> 
> 赞同：0
> 
> 时间：2012-05-10T12:37:47.743
> 
> 标签：primary-key, phpactiverecord

I am using `phpactiverecord`. We have a table without a primary key and method `save()` generated this error:

`Notice: Undefined offset: 0 in /home/vasiliy/sites/api/lib/ActiveRecord/lib/Model.php on line 573`

In `line 573` `phpactiverecord`, it tries to use the primary key value, but it is not set because the table does not have a `primary key`.

What can I do if my table has no `primary key`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:13:07.377

php-activerecord 需要主键，你无能为力。因此，要么将主键添加到表中（这可能是一个非常好的主意），要么不使用 activerecord 来完成这项工作。

# php - 如何让这个插件在主页上工作

> ID：10534175
> 
> 赞同：0
> 
> 时间：2012-05-10T12:37:59.070
> 
> 标签：php, wordpress, plugins

首先，我不是程序员，但我可以按照说明进行操作；-)
我下载了一个名为 TF Social share 的 wordpress 插件。
现在我希望这个社交按钮也可以在我的主页上使用，所以我`<?php if(function_exists('kc_add_social_share')) kc_add_social_share(); ?>`在标题中添加了自定义代码。

现在的问题是当有人想要喜欢我的主页时，他们喜欢我的第一篇文章。不知何故，这个插件使用了我在主页上的最新文章，而不是主页本身。这可能是因为主题本身有一个静态主页，而不是设置区域中使用的主页？

在我的标题中是否有一行额外的代码可以工作？
任何帮助，将不胜感激。
顺便说一句，这是[网站](http://www.ipadabonnement4u.nl)

这里是与主页上的社交按钮一起[使用的文章](http://www.ipadabonnement4u.nl/ipad-mini-deze-zomer-leverbaar/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:39:41.690

我会从 Facebook API 制作 Facebook Like 按钮......它也只是以下步骤......

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:55:35.363

看起来该插件主要用于在包含文章或博客文章的每个页面上显示，但创建者有一个托管的常见问题解答并在那里回答可能有用的问题：[http ://www.searchtechword.com/2012/ 01/faq-for-wordpress-plugin-twitter-facebook-google-plus-one-social-share/](http://www.searchtechword.com/2012/01/faq-for-wordpress-plugin-twitter-facebook-google-plus-one-social-share/)

一位用户 Jimmy 说：“好的，我想通了。在 TF 社交分享设置中：

在这些页面中显示按钮：我未选中主页。

它摆脱了“推文”这个词并解决了我的问题。**我想无论哪个页面是您的文章摘录页面都被视为您的主页！**[强调我的]希望这对其他人有帮助！！！”

听起来他可能遇到了同样的问题（但我没有看到问题所在的原始帖子。）

如果使用 WordPress 控件中的设置不起作用，插件的作者会在这里提出问题：[http ://www.searchtechword.com/about-searchtechword/](http://www.searchtechword.com/about-searchtechword/)

# ios - How can I set the VoiceOver language in the navigation bar?

> ID：10534178
> 
> 赞同：1
> 
> 时间：2012-05-10T12:38:05.887
> 
> 标签：ios, accessibility

I am writing an iOS app, which operates in a multi-language environment. As a consequence the program can operate in a language different than the system language. Example: my phone is running in English and the program runs in German or French. All texts are displayed in the correct language.

Now I want, that VoiceOver speaks the texts in the correct language, which works most times fine by using the following method:

```
- (void)setVoLanguage:(NSObject*)object
{
  if (prefLanguage == 0){
    [object setAccessibilityLanguage:@"de-DE"];
  } else {
    [object setAccessibilityLanguage:@"fr-FR"];
  }
} 
```

I am trying to let VoiceOver speak the texts in the navigation controller in the correct language using one of the following approaches:

```
[self setVoLanguage:navController];
[self setVoLanguage:navController.title];
[self setVoLanguage:navController.navigationBar.topItem];
[self setVoLanguage:navController.navigationBar.backItem];
[self setVoLanguage:navController.navigationBar.topItem.title];
[self setVoLanguage:navController.navigationBar.backItem.title];
[self setVoLanguage:navController.navigationBar.topItem.titleView];
[self setVoLanguage:navController.navigationBar.backItem.titleView]; 
```

But the result is, that the german or french texts in the navigation bar are always spoken using the English voice.

Does anybody know how to switch the VoiceOver language in the navigation bar?

Thank you.

* * *

Update: here is a work around, which works for me using iOS 5.1.1:

```
- (NSString *)accessibilityLanguage {
    cnlAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    if (appDelegate != nil) {
        if ([appDelegate prefLanguage] == 0) {
            return @"de-DE";
        } else {
            return @"fr-FR";
        }
    }
    return @""; // this line should never be reached
} 
```

My appDelegate object is the object, which stores the current language. Overwriting accessibilityLanguage for all objects seems to resolve the problem.

I hope this might be of use for someone out there.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:55:51.843

翻看 iOS 开发者库，看起来它被称为 navigationController 与 navController。你试过吗？

# java - 具有 WebService 的 Tomcat 服务器中的错误处理

> ID：10534181
> 
> 赞同：0
> 
> 时间：2012-05-10T12:38:26.310
> 
> 标签：java, tomcat, tomcat6

我已经为 tomcat 服务器实现了一个具有客户端身份验证的 web 服务。每当未经授权的客户端访问服务器时，tomcat 就会向客户端抛出 SSLHandshakeException。但我想将这些异常处理为 Http 错误代码或某种消息。我该如何处理这些异常？因为我的网络服务可能会被 .NET 或任何其他客户端访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:37:24.430

你不能。SSL 握手发生在任何 HTTP 请求发生之前，因此如果 SSL 握手失败，则无法返回 HTTP 响应。

# function - Dependence of variables in Mathematica 7.0

> ID：10534182
> 
> 赞同：1
> 
> 时间：2012-05-10T12:38:30.427
> 
> 标签：function, wolfram-mathematica

How can i get from equation one variable as a function of other variables? For example we have A*x^2 + R1*V*x + R2*v + z = 0; and i must get result V(R1,R2) = -(A*x^2 + z)/ (R1*x+R2). This is ofcourse simple example.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:55:05.963

调查`Solve`和`Reduce`。当然，这是一个简单的答案，但应该可以帮助您入门。

# c# - Auto updates OPC server

> ID：10534183
> 
> 赞同：0
> 
> 时间：2012-05-10T12:38:30.770
> 
> 标签：c#, configuration, updates, opc

I have a C# source code for OPC server. The code is working and I connect successfully but I have one big problem, the data auto update does not work, in other words, I need to restart the server so it will take the new data from the data base.

The code has an attribute named "updatePiriod", initialaized to 60000 ms and still, no auto updates.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:20:54.953

获取数据更新不仅仅是连接到服务器。你有没有 1) 创建了一个组；2) 已创建项目；3) 激活物品；4) 订阅回调？

# bash - 意外标记“完成”附近令人困惑的语法错误

> ID：10534186
> 
> 赞同：6
> 
> 时间：2012-05-10T12:38:52.483
> 
> 标签：bash, shell, syntax, for-loop, syntax-error

我正在尝试学习 shell 脚本，所以我创建了一个简单的脚本，其中包含一个不执行任何操作的循环：

```
#!/bin/bash
names=(test test2 test3 test4)
for name in ${names[@]}
do
        #do something
done 
```

但是，当我运行此脚本时，出现以下错误：

> ./test.sh：第 6 行：意外标记附近的语法错误完成'
> ./test.sh：第 6 行：完成'

我在这里错过了什么？shell 脚本是“标签敏感的”吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T12:51:16.840

不，shell 脚本对制表符不敏感（除非你做了一些非常疯狂的事情，在这个例子中你没有这样做）。

你不能有一个空`while do done`块，（评论不计）尝试`echo $name`替换

```
#!/bin/bash
names=(test test2 test3 test4)
for name in ${names[@]}
do
       printf "%s " $name
done
printf "\n" 
```

**输出**

```
test test2 test3 test4 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T12:52:18.940

`dash`并且`bash`在这种情况下有点脑残，它们不允许空循环，因此您需要添加 no op 命令以使其运行，例如`true`or `:`。我的测试表明`:`速度要快一些，[尽管它们应该是相同的](https://unix.stackexchange.com/q/34677/17666)，但不知道为什么：

```
time (i=100000; while ((i--)); do :; done) 
```

n 平均需要`0.262`几秒钟，而：

```
time (i=100000; while ((i--)); do true; done) 
```

需要`0.293`几秒钟。有趣的是：

```
time (i=100000; while ((i--)); do builtin true; done) 
```

需要`0.356`几秒钟。

所有测量都是 30 次运行的平均值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T13:16:10.503

Bash 有一个内置的 no-op，即冒号 (:)，它比生成另一个进程来运行更轻量级`true`。

```
#!/bin/bash
names=(test test2 test3 test4)
for name in "${names[@]}"
do
    :
done 
```

编辑：威廉正确地指出这`true`也是一个内置的外壳，所以把这个答案作为另一个选项仅供参考，不是比使用 true 更好的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T12:42:49.130

你可以用'true'代替nothing。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T12:52:39.143

你需要在你的循环中有一些东西，否则 bash 会抱怨。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-18T12:27:32.930

某些版本的 bash 预期会出现此错误，其中脚本是在 Windows 上编辑的，因此脚本实际上如下所示：

```
#!/bin/bash^M
names=(test test2 test3 test4)^M
for name in ${names[@]}^M
do^M
       printf "%s " $name^M
done^M
printf "\n"^M 
```

其中 ^M 表示回车符 (0x0D)。这可以通过使用二进制选项在 vi 中轻松看到，如下所示：

```
vi -b script.sh 
```

要删除这些回车符，只需使用 vi 命令：

```
1,$s/^M// 
```

（注意上面的 ^M 是单个回车符，要在编辑器中输入它使用序列 Control-V Control-M）

# jsf - 为什么使用 JSF ExceptionHandlerFactory 而不是 重定向？

> ID：10534187
> 
> 赞同：26
> 
> 时间：2012-05-10T12:38:55.927
> 
> 标签：jsf, exception-handling, web.xml

`ExceptionHandlerFactory`到目前为止，我遇到的所有示例都会在捕获a 时将用户重定向到`viewExpired.jsf`页面：`ViewExpiredException`

```
public class ViewExpiredExceptionExceptionHandler extends ExceptionHandlerWrapper {
    private ExceptionHandler wrapped;

    public ViewExpiredExceptionExceptionHandler(ExceptionHandler wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public ExceptionHandler getWrapped() {
        return this.wrapped;
    }

    @Override
    public void handle() throws FacesException {
        for (Iterator<ExceptionQueuedEvent> i = getUnhandledExceptionQueuedEvents().iterator(); i.hasNext();) {
            ExceptionQueuedEvent event = i.next();
            ExceptionQueuedEventContext context = (ExceptionQueuedEventContext) event.getSource();

            Throwable t = context.getException();
            if (t instanceof ViewExpiredException) {
                ViewExpiredException vee = (ViewExpiredException) t;
                FacesContext facesContext = FacesContext.getCurrentInstance();
                Map<String, Object> requestMap = facesContext.getExternalContext().getRequestMap();
                NavigationHandler navigationHandler = facesContext.getApplication().getNavigationHandler();
                try {
                    // Push some useful stuff to the request scope for use in the page
                    requestMap.put("currentViewId", vee.getViewId());
                    navigationHandler.handleNavigation(facesContext, null, "/viewExpired");
                    facesContext.renderResponse();
                } finally {
                    i.remove();
                }
            }
        }

        // At this point, the queue will not contain any ViewExpiredEvents. Therefore, let the parent handle them.
        getWrapped().handle();
    }
} 
```

在我看来，下面的简单`web.xml`配置基本上是相同的，而且要简单得多：

```
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/viewExpired.jsf</location>
</error-page> 
```

这就提出了一个问题——为什么要使用`ExceptionHandlerFactory`?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-12T14:22:32.107

这个特定的例子只做了一件有用的事情：它将视图 ID 保存为请求属性，以便您可以使用例如

```
<h:link value="Go back to previous page" outcome="#{currentViewId}" /> 
```

但这并不是非常有用，因为原始请求 URI 已经可以通过`<error-page>`默认请求属性获得`javax.servlet.error.request_uri`。

```
<h:outputLink value="#{requestScope['javax.servlet.error.request_uri']}">Go back to previous page</h:outputLink> 
```

然而，自定义真正有用的一件事是它允许您在**ajax 请求**`ExceptionHandler`期间处理异常。默认情况下，他们在客户端没有单一形式的有用反馈。只有在项目阶段设置为“开发”的 Mojarra 中，您才会看到带有异常消息的纯 JavaScript 警报消息。但就是这样。“生产”阶段没有单一形式的反馈。使用自定义，您将能够解析以查找错误页面位置，使用它创建一个新页面并强制 JSF 将 ajax 渲染设置为.**`ExceptionHandler``web.xml``UIViewRoot``@all`**

 **所以，*基本上*：

```
String errorPageLocation = "/WEB-INF/errorpages/500.xhtml";
context.setViewRoot(context.getApplication().getViewHandler().createView(context, errorPageLocation));
context.getPartialViewContext().setRenderAll(true);
context.renderResponse(); 
```

另请参阅此相关问题：[处理 AJAX 化组件的 JSF 2.0 异常的正确方法是什么？](https://stackoverflow.com/questions/10449862/what-is-the-correct-way-to-deal-with-jsf-2-0-exceptions-for-ajaxified-components)和这个博客：[完整的 Ajax 异常处理程序](http://balusc.blogspot.com/2012/03/full-ajax-exception-handler.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T07:35:28.993

这取决于您在接受时想做什么`ViewExpiredException`。

如果您只想向用户显示错误页面，您可以按照您所说的进行操作。

这篇[文章](https://community.oracle.com/blogs/edburns/2009/09/03/dealing-gracefully-viewexpiredexception-jsf2)向您展示了如何以编程方式拦截 `ViewExpiredException`并用它做一些好事。**

# javacpp - 编译示例的 JavaCPP 问题

> ID：10534191
> 
> 赞同：0
> 
> 时间：2012-05-10T12:39:01.127
> 
> 标签：javacpp

我只是想测试 JAVACPP 并尝试了 Eclipse 中网页中的第一个示例：

[http://code.google.com/p/javacpp/（LegacyClass](http://code.google.com/p/javacpp/) 和 LegacyLibrary）

我一输入：

> javac -cp 库\javacpp.jar:。src\LegacyLibrary.java

进入命令行我收到以下错误消息：

> src\LegacyLibrary.java:1: 错误： com.googlecode.javacpp 包不存在 import com.googlecode.javacpp.*;
> 
> src\LegacyLibrary.java:2: 错误： com.googlecode.javacpp.annotation 包不存在 import com.googlecode.javacpp.annotation.*;
> 
> src\LegacyLibrary.java:4: 错误: 找不到符号 @Platform(include="LegacyLibrary.h")
> 
> 符号：类平台 src\LegacyLibrary.java:5：错误：找不到符号 @Namespace（“LegacyLibrary”）
> 
> 符号：类命名空间 src\LegacyLibrary.java:7：错误：找不到符号公共静态类 LegacyClass 扩展指针 { 符号：类指针位置：类 LegacyLibrary src\LegacyLibrary.java:13：错误：找不到符号公共本机 @ByRef 字符串获取属性（）；public native void set_property（字符串属性）；符号：类 ByRef 位置：类 LegacyClass src\LegacyLibrary.java:16：错误：找不到符号 public native @ByRef String property(); 公共本机无效属性（字符串属性）；符号：类 ByRef 位置：类 LegacyClass src\LegacyLibrary.java:8：错误：找不到符号静态 { Loader.load(); }
> 
> 符号：变量加载器位置：类 LegacyClass 8 错误

为什么我会得到它？

是否可以使用没有 *.cpp 和 *.h 文件但只有 *.dll 文件的 JavaCPP？或者我到底需要什么来使用这个库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:53:02.043

您正在使用 Windows。将冒号 ':' 替换为分号 ';'。

# xml - 如何在 Marklogic 中返回过滤后的结果集？

> ID：10534193
> 
> 赞同：2
> 
> 时间：2012-05-10T12:39:04.733
> 
> 标签：xml, search, xquery, marklogic

考虑以下 xml：-

```
<?xml version="1.0"?>
<catalog>
   <book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications 
      with XML.</description>
   </book>
</catalog> 
```

现在我想针对这个文档运行一个搜索查询并想要返回一个过滤的结果集（例如作者姓名）。

一种方法是：-

```
xquery version "1.0-ml";
import module namespace search="http://marklogic.com/appservices/search" 
at "/Marklogic/appservices/search/search.xqy";

declare variable $options:=
<options xmlns="http://marklogic.com/appservices/search">
<transform-results apply="raw"/>
</options>;

for $x in search:search("", $options)/search:result
return $x//author/text() 
```

但是`search:search`API 首先将整个结果缓存在其缓存中，然后我们使用**xpath**找到我们想要的节点。我不想要这个。我希望`search:search`API 只返回所需的元素，以便整个结果集不会缓存在`marklogic`服务器中。谁能告诉我，我怎样才能做到这一点`Marklogic`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:11:01.803

据我所知，该`search:search`函数实际上并没有自己的缓存。`search:parse`使用and可能会更愉快`search:resolve-nodes`，但 XQuery 求值器仍会将 XML 带入内存以提取作者文本。

远离搜索 API，您可以创建一个范围索引`author`并使用`cts:element-values`它直接从索引中获取其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:22:17.407

Puneet，如果您使用的是 MarkLogic 5.0 版，您可以配置一个称为“元数据片段”的东西来获取您想要的元素*而不是*默认片段。

这是一个示例配置：

```
<options xmlns="http://marklogic.com/appservices/search">
    <transform-results  apply="metadata-snippet">
        <preferred-elements>
            <element name='ordinal' ns='http://marklogic.com/ns'/>
        </preferred-elements>
    </transform-results>
</options> 
```

还有一个：

```
<options xmlns="http://marklogic.com/appservices/search">
    <transform-results  apply="metadata-snippet">
        <preferred-elements>
            <element name='author' ns=''/>
            <element name='title' ns=''/>
        </preferred-elements>
    </transform-results>
</options> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T13:14:47.300

如果您想要非常苗条的结果，请使用 Cts:search 而不是 search:search。

```
xquery version "1.0-ml";
import module namespace search="http://marklogic.com/appservices/search" 
 at "/Marklogic/appservices/search/search.xqy";

  declare variable $options:=
    <options xmlns="http://marklogic.com/appservices/search">
     <grammar xmlns="http://marklogic.com/appservices/search">
      <quotation>"</quotation>
       <implicit>
     <cts:and-query strength="20" xmlns:cts="http://marklogic.com/cts"/>
      </implicit>
     <starter strength="30" apply="grouping" delimiter=")">(</starter>
      <starter strength="40" apply="prefix" element="cts:not-query">- </starter>
  <joiner strength="10" apply="infix" element="cts:or-query" 
  tokenize="word">OR</joiner>
 <joiner strength="20" apply="infix" element="cts:and-query" 
  tokenize="word">AND</joiner>
 <joiner strength="30" apply="infix" element="cts:near-query" 
  tokenize="word">NEAR</joiner>
 <joiner strength="30" apply="near2" element="cts:near-query">NEAR/</joiner>
 <joiner strength="50" apply="constraint">:</joiner>
 <joiner strength="50" apply="constraint" compare="LT"
  tokenize="word">LT</joiner>
 <joiner strength="50" apply="constraint" compare="LE" 
  tokenize="word">LE</joiner>
 <joiner strength="50" apply="constraint" compare="GT" 
  tokenize="word">GT</joiner>
 <joiner strength="50" apply="constraint" compare="GE" 
  tokenize="word">GE</joiner>
 <joiner strength="50" apply="constraint" compare="NE" 
  tokenize="word">NE</joiner>
       </grammar>
       <transform-results apply="raw"/>
    </options>;

 let $query := cts:query(cts:parse("in-depth look",$options))
  let $searchresult := cts:search(fn:doc()//book,$query)
  for $each in $searchresult 
    return $each/author 
```

这会给你一个比 Search:search 更苗条的结果，应该避免使用 search:search 并通过这条路线。这提供了更大的灵活性和苗条的结果集。

# xslt - XSLT 匹配记录长度 < 8

> ID：10534197
> 
> 赞同：0
> 
> 时间：2012-05-10T12:39:16.223
> 
> 标签：xslt

我创建了以下 XSLT，它将确保发送的字段仅填充数字，但是我不确定如何调整它以包含额外的语句以确保其长度不超过 8 个字符。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="record[translate(employeeNumber, '0123456789', '')]"/>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:53:20.780

您是说您希望忽略employeeNumbers 大于8 个字符的记录吗？如果是这样，您可以像这样添加另一个匹配的模板来忽略它们

```
<xsl:template match="record[string-length(employeeNumber) > 8]"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:57:41.713

这是一个可用于截断字符串的模板......希望它能完成工作！

```
<xsl:template name="fullortruncate">
    <xsl:param name="input" />
    <xsl:choose>
        <xsl:when test="string-length($input)>8">
            <xsl:value-of select="substring($input, 0, 8)"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$input"/>
        </xsl:otherwise>
    </xsl:choose> 
</xsl:template> 
```

您可以使用 call-template 调用模板

```
<xsl:call-template name="fullortruncate">
<xsl:with-param name="input" select="[your input]"/>
</xsl:call-template> 
```

# search - API 搜索过滤错误

> ID：10534200
> 
> 赞同：1
> 
> 时间：2012-05-10T12:39:22.847
> 
> 标签：search, soundcloud

API跟踪过滤存在问题：

这将返回一个 JSON：

[https://api.soundcloud.com/tracks.json?offset=0&filter=public,streamable&tags=electonica&duration[from]=0&order_by=hotness&consumer_key=ZbOZAiYTx8wbuIaqRhfubg](https://api.soundcloud.com/tracks.json?offset=0&filter=public,streamable&tags=electonica&duration%5Bfrom%5D=0&order_by=hotness&consumer_key=ZbOZAiYTx8wbuIaqRhfubg)

并且从持续时间中删除零只返回一个 [] 空数组 [https://api.soundcloud.com/tracks.json?offset=0&filter=public,streamable&tags=electonica&duration[from]=&order_by=hotness&consumer_key=ZbOZAiYTx8wbuIaqRhfubg](https://api.soundcloud.com/tracks.json?offset=0&filter=public,streamable&tags=electonica&duration%5Bfrom%5D=&order_by=hotness&consumer_key=ZbOZAiYTx8wbuIaqRhfubg)

更大的问题是这些参数也不起作用，它们应该返回结果。我希望曲目（实际上是混音）超过 25 分钟。 [http://api.soundcloud.com/tracks.json?offset=0&filter=public,streamable&tags=lounge&created_at[from]=2012-04-01%2023:29:12&duration[from]=1500000&order_by=hotness&consumer_key=ZbOZAiYTx8wbuIaqRhfubg](http://api.soundcloud.com/tracks.json?offset=0&filter=public,streamable&tags=lounge&created_at%5Bfrom%5D=2012-04-01%2023:29:12&duration%5Bfrom%5D=1500000&order_by=hotness&consumer_key=ZbOZAiYTx8wbuIaqRhfubg)

# c# - 使用 Visual Studio 2010 的 SharePoint 2010 自定义列表表单

> ID：10534202
> 
> 赞同：0
> 
> 时间：2012-05-10T12:39:23.807
> 
> 标签：c#, sharepoint

任何人都可以指导如何创建一个自定义表单，我可以使用它仅使用 Visual Studio 2010 将项目添加到列表中吗？没有 SPD 也没有 InfoPath？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:42:27.470

简单的过程：

*   使用 asp.net webforms 做你的页面
*   使用 SharePoint 对象模型在您的 SharePoint 列表中创建项目：[SPListItem](http://msdn.microsoft.com/en-us/library/ms467435.aspx)

示例：

```
SPWeb mySite = SPContext.Current.Web;
SPListItemCollection listItems = mySite.Lists[TextBox1.Text].Items;

SPListItem item = listItems.Add();

item["Title"] = TextBox2.Text;
item["Stock"] = Convert.ToInt32(TextBox3.Text);
item["Return Date"] = Convert.ToDateTime(TextBox4.Text);
item["Employee"] = TextBox5.Text;

item.Update(); 
```

# asp.net-mvc-3 - ExpressionHelper.GetExpressionText(expression) 不返回我的属性的名称

> ID：10534206
> 
> 赞同：6
> 
> 时间：2012-05-10T12:39:45.950
> 
> 标签：asp.net-mvc-3, lambda

我已经实现了一个 MVC 扩展来格式化我的应用程序中的数字。它基于[此处](https://stackoverflow.com/a/7766382/455492)找到的代码。如下

```
public static MvcHtmlString DecimalBoxFor<TModel>(this HtmlHelper<TModel> html, Expression<Func<TModel, double?>> expression, string format, object htmlAttributes = null)
{
    var name = ExpressionHelper.GetExpressionText(expression);   
    double? dec = expression.Compile().Invoke(html.ViewData.Model);
    var value = dec.HasValue ? (!string.IsNullOrEmpty(format) ? dec.Value.ToString(format) : dec.Value.ToString()): "";
    return html.TextBox(name, value, htmlAttributes);
} 
```

当我使用以下 Razor 语法行调用它时

```
@Html.DecimalBoxFor(model => Model.PointAttributes[i].Data.Y,"0.000", new { @class = "span1 number" }) 
```

我得到一个例外，因为我的扩展中的变量“名称”是一个空字符串。我尝试将 var name 行更改为此，但它只给了我“Y”的属性名称，而不是我需要将模型绑定回 MVC 的完整“Model.PointAttributes[i].Data.Y”。

```
var name = ((expression.Body is MemberExpression ?((MemberExpression)expression.Body).Member : ((MemberExpression)((UnaryExpression)expression.Body).Operand).Member)).Name; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T13:59:48.477

尝试使用此功能：

```
 static public string GetExpressionText(LambdaExpression p)
    {
        if (p.Body.NodeType == ExpressionType.Convert || p.Body.NodeType == ExpressionType.ConvertChecked)
        {
            p = Expression.Lambda(((UnaryExpression)p.Body).Operand,
                p.Parameters);
        }
        return ExpressionHelper.GetExpressionText(p);
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T14:35:45.733

这是一种已知行为。我已经想出编写自己的版本[`ExpressionHelper`](https://github.com/rmariuzzo/Mariuzzo.Web.Mvc.Extras#expressionhelper)来处理该特定情况。现在你有两个选择：

1.  使用 NuGet 包：

    ```
    Install-Package Mariuzzo.Web.Mvc.Extras 
    ```

2.  或者只是获取[上述 ExpressionHelper 的源代码](https://github.com/rmariuzzo/Mariuzzo.Web.Mvc.Extras/blob/master/Mariuzzo.Web.Mvc.Extras/ExpressionHelper.cs)并将其粘贴到您的项目中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-06T09:34:23.313

这是一个“混合”的:)

```
 public static void AddModelError<TModel>(this ModelStateDictionary state, Expression<Func<TModel, object>> expression, string message)
    {
        LambdaExpression lambdaExpression = null;
        string fieldName = string.Empty;

        if (expression.Body.NodeType == ExpressionType.Convert || expression.Body.NodeType == ExpressionType.ConvertChecked)
        {
            lambdaExpression = Expression.Lambda(((UnaryExpression)expression.Body).Operand, expression.Parameters);
            fieldName = ExpressionHelper.GetExpressionText(lambdaExpression);
        } else {
            fieldName = ExpressionHelper.GetExpressionText(expression);
        }

        state.AddModelError(fieldName, message);
    } 
```

这个更紧凑，可能是更好的解决方案：

[https://stackoverflow.com/a/12689563/951001](https://stackoverflow.com/a/12689563/951001)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T05:43:33.127

如果您可以在不使用可为空类型的情况下逃脱，它似乎可以工作（即删除 ? 在双精度后，或者在我的情况下为十进制）。所以

```
Expression<Func<TModel, double?>> 
```

变成

```
Expression<Func<TModel, double>>. 
```

如果您使用可空类型逐步完成它，您会看到表达式中有一个 convert() 函数，这似乎是“问题”。我相信您会像我一样对如何使此函数也适用于可空类型感兴趣。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-23T11:29:55.140

我知道它已经关闭，但为了记录在案；

这最好由模板处理，因此您可以指定您在模型中使用的数据类型以及它在模板中的表示方式（单一责任）。此外，您不需要修改 MVC 框架。

[MSDN UiHint 属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.uihintattribute.uihint.aspx)

# .net - 为 SSL HTTPS 创建 asp.net 网络服务

> ID：10534209
> 
> 赞同：3
> 
> 时间：2012-05-10T12:39:56.760
> 
> 标签：.net, web-services, iis, ssl, https

我使用 Visual Studio 2008... 并创建了一个 ASP.NET 网站。在这个网站项目中，我有一个 Web 服务文件 .asmx。通过 HTTP 调用此服务就可以了。但是现在需要通过 SSL / HTTPS 调用它。

当我通过 HTTP 浏览到 URL 时，.asmx 和 WSDL 显示得很好。但是一旦我输入 HTTPS，浏览器就会显示消息“Internet Explorer 无法显示网页”

我们在带有 IIS 的 Windows 2003 服务器上运行此站点。

如果可能的话，我只想通过 HTTPS 调用此服务......并让该项目中的其余页面通过 HTTP 可用。如果那非常困难，我仍然可以为该服务创建一个新项目......但我仍然不知道如何允许通过 HTTPS 访问它。

提前感谢您的帮助！

```
Imports System.Web
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.Data

<WebService(Namespace:="http://services.vm.vmc/InstantAccount/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class MyWebService
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function doSomething(ByVal p_String As String) As String
          Return "Test"
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-16T20:56:49.610

对于将来可能想知道同样事情的任何人......完成此任务的三个步骤

1) 将代码文件顶部的 Namespace 更改为 https

2) 更改 IIS 以通过必要的端口启用 HTTPS

3）通过IIS创建一个签名证书（我们做了一个自签名的）

# matlab - Matlab - 神经网络模拟（for Loop）

> ID：10534219
> 
> 赞同：0
> 
> 时间：2012-05-10T12:40:25.123
> 
> 标签：matlab, loops, neural-network

我对 matlab NN 工具箱很陌生，并创建了以下 NN 网络：

```
val.P=Exp;

net =newff(minmax(p),[20,3],{'tansig','purelin'},'trainlm');

net.trainParam.epochs = 5000;    %Max Ephocs
net.trainParam.goal = 1e-5;     %Training Goal in Mean Sqared Error
net.trainParam.min_grad = 0.05e-3;
net.trainParam.show = 50;       %# of ephocs in display
net.trainParam.max_fail =20;
net = init(net);

[net,tr]=train(net,p,t,[],[],val);
o1 = sim(net,Exp) 
```

我怎样才能运行上述 20 次并将数据存储在一个变量（o1）中？很感谢任何形式的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:47:39.803

```
for iteration=1:20
  % Your NN code
  [net, tr]=train(net,p,t,[],[],val);
  o1(:,iteration) = sim(net,Exp);
end 
```

之后，`o1`将是一个包含所有结果的数组。

注意：由于我不知道您数据的维度，您可能需要将 o1(iteration) 修改为 o1(:,iteration) 或 o1(:,:,iteration) 等。无论您需要什么。

# c++ - C++11 将“this”作为 std::make_shared 的参数传递

> ID：10534220
> 
> 赞同：11
> 
> 时间：2012-05-10T12:40:29.380
> 
> 标签：c++, constructor, c++11, this, make-shared

我正在尝试使用 std::make_shared 将“this”传递给构造函数

例子：

```
// headers
class A 
{
public:
   std::shared_ptr<B> createB();
}

class B 
{
private:
   std::shared_ptr<A> a;

public:
   B(std::shared_ptr<A>);
}

// source
std::shared_ptr<B> A::createB()
{
   auto b = std::make_shared<B>(this); // Compiler error (VS11 Beta)
   auto b = std::make_shared<B>(std::shared_ptr<A>(this)); // No compiler error, but doenst work
   return b;
} 
```

但是，这不能正常工作，有什么建议我可以正确地将其作为参数传递吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T12:44:04.910

我想你可能想要的是[`shared_from_this`](http://en.cppreference.com/w/cpp/memory/enable_shared_from_this).

```
// headers
class A : std::enable_shared_from_this< A >
{
public:
   std::shared_ptr<B> createB();
}

class B 
{
private:
   std::shared_ptr<A> a;

public:
   B(std::shared_ptr<A>);
}

// source
std::shared_ptr<B> A::createB()
{
   return std::make_shared<B>( shared_from_this() );
} 
```

* * *

更新以包含[来自 David Rodriguez 的评论](https://stackoverflow.com/questions/10534220/c11-passing-this-as-paramenter-for-stdmake-shared#comment13628496_10534285)：

请注意，*永远*`shared_from_this()`不应在尚未由. 这是有效的：*`shared_ptr`*

 *```
shared_ptr<A> a( new A );
a->createB(); 
```

虽然以下导致未定义的行为（尝试调用`delete`on `a`）：

```
A a;
a.createB(); 
```*

# sql-server - 使用 SQL Server 和 Coldfusion 优化查询结果

> ID：10534223
> 
> 赞同：1
> 
> 时间：2012-05-10T12:40:46.620
> 
> 标签：sql-server, coldfusion

我有一个查询，它提供像这样的数据

```
ID  Value   AttributeID     IDParent
286 Fleet   9               284         
286 239     10              284         
286 1       12              284         
208 Rivers  9               -1          
208 319     10              -1          
208 0       12              -1 
```

这个结果需要细化。有没有办法使用“查询查询”它可以转换为

```
ID  Value   PageID     Show IDParent
286 Fleet   239         1    284
208 Rivers  319         0   -1 
```

或者有什么更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:53:15.060

你可以这样做：

```
select t.ID,
       t.Value,
       aux1.Value as 'PageID'
       aux2.Value as 'Show'
       t.IDParent
from tablename t
inner join tablename aux1 on aux1.IDParent = t.IDParent and aux1.AttributeID = 10
inner join tablename aux2 on aux2.IDParent = t.IDParent and aux2.AttributeID = 12
where t.AttributeID = 9 
```

# javascript - 鼠标离开 div 时删除图像

> ID：10534225
> 
> 赞同：1
> 
> 时间：2012-05-10T12:40:49.443
> 
> 标签：javascript, jquery-ui

我有一个 3X3 的盒子，目前我有它，所以当你将鼠标悬停在任何一个正方形上时，背景会变成蓝色，然后当你将鼠标悬停在外面时，盒子会恢复为空。我也有它，这样当单击任何框时都会出现图像。我现在要完成的是使它在单击该框时会出现图像，而当再次单击该框时，该图像将消失，依此类推。

这是我所拥有的：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    <script type="text/javascript">

        $(function () {
            $('.divs').hover(function () {
                $(this).css("background-color", "#0000EE");
                console.log('hover');

            }, function () {
                $(this).css("background-color", "");
                console.log('hoverout');
            });

            $('.divs').click(function () {
                $(this).prepend("<img class='divimg' src=http://upload.wikimedia.org/wikipedia/commons/thumb/0/08/SMirC-cool.svg/320px-SMirC-cool.svg.png>");
                console.log('divclicked');
            });
        }); 
```

![我的页面目前的样子](../Images/040a2e8a65c17755e67fc1d7b000044b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:42:58.117

你试过 jQuery().hide() 和 jQuery().show()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:46:35.633

只需检查那里是否已经有图像

```
var $img = $("img", this);
if ($img.length > 0)
    $img.remove();
else
    $(this).prepend("<img class='divimg' src=http://upload.wikimedia.org/wikipedia/commons/thumb/0/08/SMirC-cool.svg/320px-SMirC-cool.svg.png>"); 
```

如果您不想删除图像，只需切换可见性

```
var $img = $("img", this);
if ($img.length > 0) {
    $img.toggle();
} else {
    $(this).prepend("<img class='divimg' src=http://upload.wikimedia.org/wikipedia/commons/thumb/0/08/SMirC-cool.svg/320px-SMirC-cool.svg.png>");

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:47:37.567

另一种选择是使用 CSS`:hover`属性。

```
.divs:hover {
    background-color: #0000ee;
} 
```

关于点击，您可以将图像添加到您`div`的 s 并使用 jQuery 切换。

*HTML：*

```
<div class="divs"><img src="..." alt=""></div> 
```

*JavaScript：*

```
$('.divs').click(function () {
    $(this).children("img").toggle();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T13:01:25.423

在单击功能中尝试以下代码

```
if($('img.divimg').length == 0){
  $('img.divimg').fadeOut(function(){
    $(this).remove()
  });
}else{
  $(this).prepend("<img class='divimg' style='display:none;' src=http://upload.wikimedia.org/wikipedia/commons/thumb/0/08/SMirC-cool.svg/320px-SMirC-cool.svg.png>").fadeIn();
} 
```

另一种选择是对添加的图像进行删除操作（单击时）。

```
var img = $('<img>')
            .attr('src', 'http://upload.wikimedia.org/wikipedia/commons/thumb/0/08/SMirC-cool.svg/320px-SMirC-cool.svg.png')
            .addClass('divimg')
            .css('display', 'none')
            .bind('click', function(){
                $(this).remove();
            });
$(this).prepend(img); 
```

# c++ - 虚拟继承中的构造函数调用顺序

> ID：10534228
> 
> 赞同：23
> 
> 时间：2012-05-10T12:40:56.527
> 
> 标签：c++, constructor, virtual-inheritance

```
class A {
        int i;
public: 
        A() {cout<<"in A's def const\n";};
        A(int k) {cout<<"In A const\n";  i = k; }
        };

class B : virtual public A {
public:
        B(){cout<<"in B's def const\n";};
        B(int i) : A(i) {cout<<"in B const\n";}
        };

class C :   public B {
public:
        C() {cout<<"in C def cstr\n";}
        C(int i) : B(i) {cout<<"in C const\n";}
        };

int main()
{
        C c(2);
        return 0;
} 
```

这种情况下的输出是

```
in A's def const
in B const
in C const 
```

为什么这不进入`in A const`

`它应该遵循 1 arg 构造函数调用的顺序。但是使用 virtual 关键字从 A 派生 B 实际发生了什么。

还有几个问题

即使我删除了上述程序中的 virtual 关键字并删除了所有默认构造函数，它也会出错。那么，为什么它需要 def 构造函数

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-10T12:44:39.123

虚拟基类的构造函数总是从最派生类调用，使用它可能传入的任何参数。在您的情况下，最派生类没有为 指定初始化程序`A`，因此使用默认构造函数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T13:11:57.243

正如[JamesKanze 所解释](https://stackoverflow.com/a/10534300/241631)的，在`virtual`继承的情况下，它是调用虚拟基类的构造函数的最派生类。因此，如果您想要`A`调用整数的构造函数，则需要将其添加到`C`的初始化列表中。

```
C(int i) : A(i), B(i) {cout<<"in C const\n";} 
```

对于您问题的第二部分，不需要默认构造函数，但是派生类必须显式调用非默认构造函数，因为在没有非默认构造函数的情况下编译器无法为您执行此操作。

```
#include <iostream>
using namespace std;

class A {
  int i;
public:
  // A() {cout<<"in A's def const\n";};
  A(int k) {cout<<"In A const\n";  i = k; }
};

class B : virtual public A {
public:
  // B(){cout<<"in B's def const\n";};
  B(int i) : A(i) {cout<<"in B const\n";}
};

class C :   public B {
public:
  C() : A(42), B(42) {cout<<"in C def cstr\n";}
  C(int i) : A(i), B(i) {cout<<"in C const\n";}
};

int main()
{
  C c(2), c2;
  return 0;
} 
```

这打印出来

```
In A const
in B const
in C const
In A const
in B const
in C def cstr 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T13:15:39.340

这里有两个问题。

> 为什么这不进入A const？

因为您使用的是虚拟继承。

使用虚拟继承时，[最派生类的ctor的初始化列表直接调用虚拟基类的ctor。](http://www.parashift.com/c++-faq-lite/multiple-inheritance.html#faq-25.11). 在这种情况下，这意味着' 构造函数*直接*`C`调用`A`' 构造函数。由于您没有指定在 的初始化列表中调用哪个构造函数，因此调用了默认构造函数。*`A``C`*

 *这可以通过将您的实现更改`C::C(int)`为：

```
C(int i) : A(i), B(i) {cout<<"in C const\n";} 
```

> 如果我删除上述程序中的 virtual 关键字并删除所有默认构造函数，则会出错。那么，为什么它需要 def 构造函数呢？

因为`B`也没有指定`A`调用哪个ctor，所以使用了默认的构造函数。如果去掉`A`s def ctor，`B`就不能编译。*

# google-maps - 如何在自定义 Google 地图上隐藏某些位置标签？

> ID：10534229
> 
> 赞同：1
> 
> 时间：2012-05-10T12:41:06.223
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有一个自定义的谷歌地图，带有弹出信息窗口的某些点的自定义标记。我目前将其设置为显示所有位置标签（例如城市/区域标签），但是客户询问我们是否可以隐藏某些位置而不是其他位置（以便相关的感兴趣区域始终可见，但不相关的区域不可见）。您显然可以将其设置为隐藏所有地点（或地图上的其他项目），但无论如何我都看不到只显示某些地点？有谁知道显示某些而不显示其他？

如果这是不可能的，那么可能唯一的选择是隐藏所有位置标签并设置两种不同样式的标记，一种是带有弹出窗口的普通标记，另一种实际上只是没有关联弹出窗口的文本标签，然后可以使用列出相关的位置标签？大概这是可能的，但有没有更好的方法，因为这似乎不正确？

非常感谢，

戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:30:39.533

我从您的描述中假设您已经创建了一个`MapTypeStyle`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyle)。不，没有简单的方法，使用 Styled Map [^(dev-guide)](https://developers.google.com/maps/documentation/javascript/styling)将样式应用于特定地理区域；它只是提供样式规则的层次模型。

为了回答您关于如何创建本质上用作标签的标记的具体问题，[MarkerWithLabel 实用程序库](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#MarkerWithLabel)将为您提供一个执行您所描述的工具。也就是说，我不建议尝试使用标记为区域或区域重新创建一组地图标签。您在问题中对这种方法表达的疑虑是有效的。

如果您需要按照这些方式实现某些东西，我建议您查看以下两个选项，并考虑其中任何一个是否适合您想要实现的目标：

1.  [自定义叠加层](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)
2.  [KML 图层](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)

# objective-c - 在objective-c中动态地为变量赋值

> ID：10534232
> 
> 赞同：1
> 
> 时间：2012-05-10T12:41:15.527
> 
> 标签：objective-c

我想知道当您需要为变量分配大量值时，是否可以创建一个 for 循环或类似的东西？

```
store.item1 = @"asdasd"; 
store.item2 = @"asdasd"; 
store.item3 = @"asdasd"; 
store.item4 = @"asdasd"; 
store.item5 = @"asdasd"; 
store.item6 = @"asdasd"; 
store.item7 = @"asdasd"; 
store.item8 = @"asdasd"; 
store.item9 = @"asdasd"; 
```

就像是：

```
for (int i = 0; i < 10; i++)
{
    store.item%i = @"asds"; 
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:48:22.157

您可以使用键值编码来做到这一点：

```
for (int i = 0; i < 10; i++)
{
    [store setValue:@"asdfasd" forKeyPath:[NSString stringWithFormat:@"item%d", i]];
} 
```

但是正如其他答案所建议的那样……如果您确实在商店工作，这可能不是您真正想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:51:26.257

正如JiaYow 所说，使用KVC。

这是一个工作示例：

```
#import <Foundation/Foundation.h>

@interface Store : NSObject
@property (nonatomic, copy) NSString *item1;
@property (nonatomic, copy) NSString *item2;
@property (nonatomic, copy) NSString *item3;
@property (nonatomic, copy) NSString *item4;
@property (nonatomic, copy) NSString *item5;
@property (nonatomic, copy) NSString *item6;
@end

@implementation Store
@synthesize item1, item2, item3, item4, item5, item6;
@end

int main(int argc, char *argv[]) {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

    Store *store = [[Store alloc] init];

    for (int i = 1; i < 7; i++)
    {
        [store setValue:@"asdfasd" forKeyPath:[NSString stringWithFormat:@"item%d", i]];
    }

    [p release];
} 
```

干杯，

约翰内斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:46:22.203

如果您有一系列变量，请用于`NSArray`存储它们，而不是单个实例变量。

# java - 如何使用正在扫描的条形码创建 actionPerformed 事件？

> ID：10534234
> 
> 赞同：1
> 
> 时间：2012-05-10T12:41:20.357
> 
> 标签：java, barcode, barcode-scanner

我的 java 应用程序中有一个条形码扫描仪。扫描条形码时，我们会在具有焦点的表格中显示除条形码本身之外的所有相关信息。GUI 现在只有一个包含名称和价格列的表格，仅此而已。它用于显示信息。当用户喜欢他看到的内容时，他可以扫描另一个条形码，该条形码用于将数据发送到数据库。

现在，如何从 GUI 中的条码扫描仪获取数据，以及如何通过扫描特定条码将这些数据发送到数据库？这是我第一次使用条形码扫描仪执行操作。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:46:27.787

据我所知，大多数条形码扫描仪都模拟键盘按键，因此您可以将焦点设置到输入字段，扫描条形码并将字段中的文本数据保存在您想要的任何位置。您可以使用按键侦听器来确定用户是否扫描了条形码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T21:26:04.053

我发现很多条码扫描器也可以模拟串口输入。

我建议任何时候都将串行端口数据读入您的 Java 应用程序而不是键盘挂钩。我不久前实现了一个，并在此处发布了源代码以回答[**问题**](https://stackoverflow.com/a/8621266/1062992)。

# c# - DUKPT 算法是否生成弱 DES 密钥？

> ID：10534235
> 
> 赞同：2
> 
> 时间：2012-05-10T12:41:26.150
> 
> 标签：c#, .net, des, weak

我正在使用 DUKPT 算法为 DES 加密算法生成密钥。当您尝试使用弱密钥时，DES 的 C# 实现会引发异常。

DUKPT 算法是否有可能生成弱密钥，还是避免它们？如果它确实生成了弱密钥，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:59:38.453

有可能，但可能性很小。DUKPT 算法为每笔交易提供一个唯一的密钥，并且任何时候的所有位都可以设置或不设置，因此它有可能生成一个全 0 的“弱”密钥。当然，根据您的密钥的大小，发生这种情况的可能性要小得多，并且您要小心随意丢弃“弱”密钥，因为这也会削弱其他密钥。

全零密钥在 2^(N) 中发生 1 次，其中 N 是密钥中的位数，因此对于 64 位密钥：1/(2^64)...不用说，不是很频繁。由于 DUKPT 为每个事务生成一个唯一密钥，因此您应该可以使用它而无需在 DES 中检查这种情况，因为无论如何您可能都会进行所有 16 轮。

# grails - Grails 2 - 如何动态调用多个数据源

> ID：10534238
> 
> 赞同：3
> 
> 时间：2012-05-10T12:41:42.470
> 
> 标签：grails, grails-orm

我的 Grails 应用程序 (Grails 2.0.3) 中有两个命名数据源...

```
dataSource_a {
   // ...
}

dataSource_b {
   // ...
} 
```

我希望能够根据某种参数动态更改我正在访问的数据源。我*可以*做这样的事情......

```
def findPeople(datasource) {
    if (datasource == 'a') {
        return Person.a.list()
    } else if (datasource == 'b') {
        return Person.b.list()
    }
} 
```

然而，我真正希望能够做的是这样的事情......

```
def findPeople(datasource) {
    return Person."$datasource".list()
} 
```

不幸的是，当我尝试这样做时出现错误。“发生致命错误，应用查询转换：null 1 错误”。

关于如何做到这一点的任何想法？还是我只是坚持使用 if/switch 块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:10:45.330

我想通了，这就是你必须这样做的方式。

```
def findPeople(datasource) {
    def p = People.class
    p."${datasource}".list()
} 
```

出于某种原因，如果你这样称呼它，它就可以工作。

# php - 如何在不使用 url 的情况下将数组值从 ajax 发送到 php

> ID：10534240
> 
> 赞同：-1
> 
> 时间：2012-05-10T12:41:49.177
> 
> 标签：php, ajax

基本上我在做搜索。并且此搜索发生输入字段的模糊事件。搜索的所有结果都是通过 XML 从 php 页面检索的，有一个弹出窗口，我通过 URL 接收到值，但由于数组的大小很大我们无法将此系统访问到任何其他系统的 URL。所以请告诉我如何在不使用 Ajax 的 URL 的情况下将值发送到 php 弹出窗口，现在我正在使用此函数通过 url 将值从 Ajax 发送到 php ,,,任何人都给我适当的解决方案。对于不使用 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:50:25.123

要么你可以打电话

```
$.post({...}); 
```

或更好

```
$.ajax({
    type: 'POST',
    ...
}); 
```

这样，数据通过 HTTP 的 POST 方法发送，并且不存在于 URL 中。

# algorithm - 找到最大数 k 使得对于 k 对的所有组合，我们在每个组合中有 k 个不同的元素

> ID：10534241
> 
> 赞同：13
> 
> 时间：2012-05-10T12:41:50.487
> 
> 标签：algorithm

我们有 N 对。每对包含两个数字。我们必须找到最大数 K，这样如果我们从给定的 N 对中取出 J (1<=J<=K) 对的任意组合，那么在所有选定的 J 对中我们至少有 J 个不同的数。我们可以有不止一对相同的。

例如，考虑对 (1,2) (1,2) (1,2) (7,8) (9,10) 对于这种情况 K = 2，因为对于 K > 2，如果我们选择三对(1,2)，我们只有两个不同的数字，即 1 和 2。

从一个开始检查每个可能的组合将花费大量时间。什么是解决问题的有效算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:04:21.323

似乎与 MinCut/MaxFlow 有关。这是一个尝试将其减少到 MinCut/MaxFlow：

```
- Produce one vertex for each number
- Produce one vertex for each pair
- Produce an edge from number i to a pair if the number is present in the pair, weight 1
- Produce a source node and connect it to all numbers, weight 1 for each connection
- Produce a sink node and connect it to all numbers, weight 1 for each connection 
```

在此运行 MaxFlow 应该给你 number `K`，因为任何三对的集合，总共只包含两个数字，将被来自数字的传出边上的约束“阻塞”。

我不确定这是否是最快的解决方案。我想，那里的某个地方可能还隐藏着一个拟阵。在这种情况下，有一种贪婪的方法。但是我找不到您正在构建的集合的拟阵属性的证据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:44:19.870

我在这方面取得了一些进展，但还不是一个有效的解决方案。然而，它可能会指明方向。

制作一个点成对的图形，如果它们共享一个数字，则连接任意一对点。那么对于任何子图，其中的数字的数量是顶点的数量减去边的数量。因此，您的问题与定位边数多于顶点数的最小子图（如果有）相同。

具有相同数量的边和顶点的最小子图是一个循环。因此，我们正在寻找的图要么是共享一个或多个顶点的 2 个循环，要么是通过路径连接的 2 个循环。没有其他可能的最小类型。

您可以使用广度优先搜索相当容易地定位和枚举循环。可能有很多，但这是可行的。有了它，您可以查找这些子类型的子图。（枚举最小循环，寻找共享点或连接的对。）但这不能保证是多项式的。我怀疑这将是平均而言相当不错的情况，但最坏的情况是非常糟糕的。但是，这可能比您现在正在做的更有效。

我一直认为某种广度优先搜索可以在多项式时间内找到这些，但我一直无法确切地知道如何做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:24:51.480

创建一个图，每个数字有一个顶点，每对有一个边。

如果这个图是一个链或树，我们有“数字”的数量，等于“对”的数量加一，在从这个图中删除任意数量的边之后，我们得到的顶点永远不会少于边。

现在向这个链/树添加一个循环。顶点和边的数量相等。从该图中删除任意数量的边之后，我们再一次得到的顶点永远不会少于边。

现在添加任意数量的断开连接的组件，每个组件不应包含超过一个循环。再一次，在删除任意数量的边之后，我们得到的顶点永远不会少于边。

现在为任何断开的组件添加第二个循环。移除所有其他组件后。最后我们有比顶点更多的边（比数字更多的对）。

所有这些都得出这样的结论，即 K+1 恰好是最小可能子图中的边数，由两个循环组成，可能还有一条连接这些循环的链。

### 算法：

对于每个连接的组件，使用 Floyd-Warshall 算法找到通过每个节点的最短循环。

然后对于每个不重叠的循环对（在单个组件中），使用 Dijkstra 算法，从一个循环中至少有 3 条边的任何节点开始，找到到另一个循环的最短路径；并计算两个循环的长度之和和一条最短路径，将它们连接起来。对于每对重叠的循环，只需计算它们的边数。

现在找到所有这些子图的最小长度。并减去 1。

如果图中至少有一个双循环分量，则上述算法计算 K。如果没有这样的组件，K = N。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T21:12:46.760

这相当于在图中找到和最小循环的和弦。一个非常幼稚的算法是：

检查删除一条边是否会导致包含对应于该边的顶点的循环。如果是，则记下最小循环的长度。

# ruby-on-rails - 有一个“SendEmail”机架中间件或其他类似的后台作业中间件可以吗？

> ID：10534242
> 
> 赞同：0
> 
> 时间：2012-05-10T12:41:50.893
> 
> 标签：ruby-on-rails, ruby, rack, eventmachine, goliath

我读到机架中间件是为了修改当前的请求/响应，但是如果有一个 SendEmail 中间件可以`env['user_id']`用来发送电子邮件呢？

让我们假设整个过程（请求 + 发送电子邮件）将是异步的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:37:47.197

如果您真的想在 Goliath 中执行此操作，我建议您创建一个插件并在其中执行此操作。在配置中创建一个队列，让插件从队列中弹出项目并发送邮件。

# android - 将 FrameLayout 转换为位图

> ID：10534247
> 
> 赞同：4
> 
> 时间：2012-05-10T12:42:07.023
> 
> 标签：android, android-framelayout

我有一个 FrameLayout，其中包含一些图像视图和一个 EditText。我将此布局保存为内存中的图像（外部）。第一次我在 imageviews 中设置图像时一切正常，即正在保存确切的图像（与在屏幕上显示相同）但是在第一次保存后，如果我更改任何内容（文本、图像），它会在屏幕上正确显示但已保存图像它显示较早的图像（第一张图像）。

布局的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
<FrameLayout 
    android:id="@+id/imageWithoutFrame"
    android:layout_height="match_parent"
    android:layout_width="match_parent"
    android:layout_centerInParent="true" >

    <ImageView
        android:id="@+id/withoutFrame_background"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/background" />

    <ImageView
        android:id="@+id/withoutFrame_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:adjustViewBounds="true"
        android:layout_gravity="center" />

    <EditText 
        android:id="@+id/withoutFrame_editableText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|bottom"
        android:layout_marginBottom="30dip"
        android:hint="Write here"
        android:maxLength="60" />

</FrameLayout>
</RelativeLayout> 
```

在位图中更改它的代码是：

```
Bitmap bm = null;
FrameLayout savedImage = null;
savedImage = (FrameLayout)findViewById(R.id.imageWithoutFrame);
savedImage.setDrawingCacheEnabled(true);
savedImage.buildDrawingCache();
bm = savedImage.getDrawingCache(); 
```

我用这个bm来保存。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T05:00:14.080

为了克服这个问题，我在保存图像后销毁了绘图缓存。

```
savedImage.destroyDrawingCache(); 
```

# jquery - 使用 JQuery 更新 MVC 模型

> ID：10534248
> 
> 赞同：1
> 
> 时间：2012-05-10T12:42:11.863
> 
> 标签：jquery, asp.net-mvc, model-view-controller

我有许多级联下拉框，允许用户在数据显示给他们之前过滤数据。我已经使用 JQuery 完成了这项工作，并使用 JsonResults 返回了一个列表。但是在最后的下拉框更改中，我想检索与他们应用的过滤器匹配的数据并将其显示在表格中。

为了呈现表格，我想使用 MVC 中内置的模型和 htmlhelpers。我不确定如何（或是否有可能）将这些数据放入模型中而不使其回发页面（并从级联下拉列表中丢失数据）。我想要以某种方式从 Jquery 更新模型，这将允许我将数据作为 Jsonresult 发送回动态创建表。

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:49:29.813

除了通过 JSON 返回结果之外，您还可以从控制器返回部分视图：

```
 $('#lastDDL').change(function () {
     var ddlX= $('#ddlX').val();
     var ddlY= $('#ddlY').val();
     ...etc
     $('#results').load('/Controller/FinalResults/' + '?ddlX=' + ddlX + ... etc ...;
  }); 
```

有多种方法可以创建一个 JSON 对象以传回您的控制器，但这应该足以让您入门。

在您的控制器中：

```
 public ActionResult FinalResults(int ddlX, int ddlY, etc)
  {
     var myModel = new myModel(ddlX, ddlY, etc);
     return PartialView("finalResults",myModel);
  } 
```

# android - 带有 SimpleCursorList 的异步任务（Android sql 选择）

> ID：10534257
> 
> 赞同：0
> 
> 时间：2012-05-10T12:42:41.107
> 
> 标签：android, listactivity, simplecursoradapter

我对 Android 比较陌生，但我不能用谷歌搜索。我有以下情况：

1.  android 上相当大的 SQL 数据库（需要选择并加载大约 2000 条记录到 ListActivity）

2.  到目前为止，我使用 SimpleCursorAdapter 但是......它不允许我使用 AsyncTask 异步加载数据（SimpleCursorAdapter 没有像 ArrayAdapter 那样的“add()”）

3.  我知道如何使它与 ArrayAdapter 一起工作，但是每次单击时我都会丢失 ID 属性，我想以“干净”的方式进行操作并保持 id（而不是将其保存在某个隐藏的地方）

===> 现在用户必须等到所有 db 输出都被解析到 GUI 中，这需要一些时间。如何修复它以使其运行得更快？我需要类似 SimpleCursorAdapter.add(item) 或扩展它但不确定... thnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:57:04.193

您应该考虑使用一些分页机制，而不是将所有内容加载到 ArrayAdapter 中，但更好的是，返回一个 simpleCursorAdapter，其中只有一个大小为 N 的记录的子集。当用户到达最后一行时，显示一个按钮来增加 N 并从数据库中重新获取数据。

# html - div 宽度("%s") 与 firefox 对齐

> ID：10534258
> 
> 赞同：0
> 
> 时间：2012-05-10T12:42:43.967
> 
> 标签：html

当我使用标签通过以百分比传递宽度值将页面分成列时，即我将主体的 div 宽度声明为 100%，其中两个 div 被声明为 20% 和 80% 宽度，它在 IE8 中工作正常，但在 Firefox 中没有除非我将第二个宽度从 80% 更改为 79%。你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:57:57.953

1.  定义一个合适的文档类型：`<!doctype html>` **这对 IE 来说非常重要，因为如果你不这样做，他会使用另一个 boxmodel！**

2.  请注意，当前的 w3c-boxmodel 仅考虑内容宽度。这意味着，如果您声明了边距、边框和/或填充，这会弄乱您的宽度。

如果你定义了 80%/20% 的列，但是它们`border:1px ...`会弄乱你的设计，因为这实际上意味着 80+20 = 100% + 4px 的边框 -> 你的页面将会中断。

您可以在较新的浏览器中切换 boxmodel [（称为 box-sizing：从 IE8 开始）](http://caniuse.com/#search=box-sizing)以使用“更好”的 boxmodel，它将填充和/或边框计入您的宽度声明。

编辑：

[MDN-Link 关于 box-sizing](https://developer.mozilla.org/En/CSS/Box-sizing)

# mysql - rails mysql记录页面的印象

> ID：10534262
> 
> 赞同：0
> 
> 时间：2012-05-10T12:42:58.757
> 
> 标签：mysql, ruby-on-rails, impressions

**我会让我的问题很简单。**

我有一个 ruby​​ on rails 应用程序，支持 mysql。

1.  我将单击第 1 页中的一个按钮，它将转到第 2 页并列出一个包含 10 个公司名称的表格。

2.  现在，这十家公司的列表是从具有 10k 个公司名称的 COMPANIES 表中随机生成的（基于第 1 页中单击按钮背后的逻辑）。

3.  如何计算一天中公司名称在第 2 页上显示的次数。

    示例：一天结束时 - 1
    **COMPANY_NAME | 数个**
    | 2300
    乙 | 100
    ℃ | 500
    D | 10000

*现在，根据我所做的研究，原始插入物会很昂贵，我了解到有两种常见的方法可以做到这一点。*

1.  打开一个unix文件，写入它。在一天结束时，将内容插入数据库。负面：文件系统如果同时访问，会导致锁问题。

2.  Memcache 将计数和批量插入到数据库中。

## 在rails中最好的方法是什么？

## 还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T02:26:57.390

使用redis。redis 有利于维护内存中的数据。它具有原子增量（其他数据结构）

# performance - 如何对单个 TypoSript 对象生成进行基准测试？

> ID：10534263
> 
> 赞同：3
> 
> 时间：2012-05-10T12:43:00.037
> 
> 标签：performance, benchmarking, typo3, typoscript

我想对单个 TypoScript 对象生成进行基准测试以控制性能，是否有可能使用一些 stdWrap 方法？

TS 对象的示例，我想对其进行基准测试：

**测试 1**

```
 page.10 = RECORDS
    page.10 {
        tables = pages
        source = 1
        dontCheckPid  = 1
        conf.pages = TEXT
        conf.pages.field = title
    } 
```

**测试 2**

```
page.20 = CONTENT
page.20 {
   table = tt_content
   select {
       pidInList = 0
       recursive = 99
       where = uid = 1
   }
} 
```

我需要每个对象生成时间和触发查询的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:47:49.620

我想这可以通过扩展来完成。我想有可能挂钩（或 xclass）数据库层（就像 DBAL 一样）。在您的扩展中，您可以通过以下方式测试不同的 TypoScript 设置`$this->cObj->cObjGetSingle($this->conf['test1'],$this->conf['test1.'],'test1');`

也许看看 t3lib_timeTrack，可能那里跟踪的内容就足够了。但是 AFAIK 跟踪的所有内容都可以通过管理面板获得（选中所有复选框）。

# .net - 缺少 pdb 文件

> ID：10534266
> 
> 赞同：4
> 
> 时间：2012-05-10T12:43:15.167
> 
> 标签：.net, multithreading, debugging, windows-ce, pdb

我正在 wince7 设备上调试我的应用程序。

几分钟后，我收到一条错误消息：“没有为任何调用堆栈帧加载任何符号。无法显示源代码。”

我在模块列表中注意到我有 1 个缺少 pdb 文件的 dll。它的名字是 System.Drawing.dll 。我注意到在创建某个线程（我没有创建并且我不知道是谁）之后添加到模块列表的模块。

只有在线程运行后我才会收到错误消息。

有人知道我在哪里可以找到所需的 pdb 文件吗？（我已经尝试修复 .net compact 框架）

我怎样才能找出线程从哪里开始？（我在代码中找不到它）

接下来我该怎么办？

请帮忙

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T07:45:40.497

视觉工作室内部

工具 -> 选项 -> 调试 -> 符号 -> 选中 Microsoft 符号服务器作为从中获取符号的位置。

同样在“调试”的“常规”选项卡中，取消选中“仅启用我的代码”，这将允许调试到其他程序集。

还要启用 .NET Framework 源单步执行复选框。

但我建议从符号服务器下载所有符号并将它们保存在本地。

然后在 Visual Studio 中的 Symbols 中添加本地目录路径作为符号路径。

下载符号 ->

在调试中的符号选项卡中，检查 Microsoft 符号服务器并按确定。Visual Studio 将自动将符号下载到缓存目录

```
 C:\Users\[UserName]\AppData\Local\Temp\SymbolCache 
```

下载完成后，您可以添加另一个路径并指向此目录并取消选中 Microsoft Symbol Server 或将本地路径移至 Symbol Server 路径上方。

现在您应该能够加载符号并获取方法名称。

您可能还想看看[http://msdn.microsoft.com/en-us/library/windows/hardware/ff558829(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff558829(v=vs.85).aspx)

希望这可以帮助。

# ruby-on-rails - 如何实现具有 3 个固定类别的职位发布功能

> ID：10534270
> 
> 赞同：0
> 
> 时间：2012-05-10T12:43:27.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, associations, model-associations

我想要做的是创建安置模型，该模型将用于发布 3 个固定类别的工作，即实习、企业和自由职业者。将有一个安置菜单，其中包括实习、企业和自由职业者 3 个菜单，并基于用户选择，对于这 3 个类别，将显示相同的职位表以创建职位。在显示职位发布时，将根据类别显示不同的视图。

我不知道我应该如何实现这一点。我是否应该将展示位置和类别创建为不同的模型，并将关联作为展示位置中的多个类别和属于类别中的展示位置，但如果我这样做，在类别模型中我有 3固定的选择，我不会接受用户的选择，那么我怎样才能在模型中添加这三个选择，这将是固定的，并为他们添加职位类别呢？

我怎样才能实现这个放置的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:54:10.767

这很简单，您可以通过各种方式实现一种方法是创建具有 3 个类别之一的 job_type，并在创建职位发布时提供下拉菜单。

为了便于找出 3 个类别的创建范围，例如

```
scope :freelance,where("job_type = ?",'freelance') .... 
```

`JobPost.freelance`提供自由职业职位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:03:36.103

将模型定义为

```
Class Jobpost
  belongs_to :resource, :polymorphic => true, :dependent => :destroy
  accepts_nested_attributes_for :resource
  def resource_attributes=(params = {})
    self.resource = spec_type.constantize.new unless self.resource
    self.resource.attributes = params.select{|k| self.resource.attribute_names.include?(k) || self.resource.class::ACCESSOR.include?(k.to_sym)}
   end
end

class Freelancer
  has_one :jobpost, :as => :resource
end 
```

将字段添加到 Jobpost 以创建字段（resource_id：整数，resource_type：字符串）

```
#jobposts table
t.references :resource, :polymorphic => true 
```

观点为

```
= form_for(@jobpost, :url => jobposts_path, :method => :post) do |f|
   = fields of Jobpost
   = f.fields_for :resource, build_resource('freelancer') do |freelancer|
     = fields of Freelancer 
```

Jobpost 助手作为

```
module JobpostsHelper
  def build_resource(klass)
    klass  = "{klass.capitalize}"
    object = eval("#{klass}.new")
    if @jobpost.resource.class.name == klass
      object = @jobpost.resource
    end
    return object
  end
end 
```

单击 Freelancer 的链接时，使用 javascript 显示子类别（freelancer 等）的字段。提交表单时，所有子类别的所有字段都已提交，但它们在“resource_attributes=”方法中被过滤掉。

# python - 导入不起作用？

> ID：10534274
> 
> 赞同：1
> 
> 时间：2012-05-10T12:43:36.383
> 
> 标签：python, unit-testing, import

我正在用 python 做一些单元测试，一切都很好，但是我遇到了一个很奇怪的问题，我认为有一个导入，请遵循问题：

我正在尝试在我的测试中创建一个对象 GlanceApi，就像我已经完成的另一个测试一样，但是我收到了这个错误：

```
======================================================================
ERROR: setUpClass (__main__.TestGlance)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "glance_tests.py", line 22, in setUpClass
    self.glnce = glance.GlanceApi("")
AttributeError: 'module' object has no attribute 'GlanceApi' 
```

这是我的代码：

```
import unittest
import json
import time
import sys
sys.path.append("../src")
import glance
import novaapiclient

class TestGlance(unittest.TestCase):

    @classmethod
    def setUpClass(self):
        confFile = file('config.txt', 'r+w')
        configs = ""
        for line in confFile:
            if not (line.startswith('#')) and len(line) != 0:
                configs  = line.split(';')

        novaAPI = novaapiclient.NovaApiClient(str(configs[0]))
        novaAPI.make_auth(configs[1], configs[2], configs[3])

        self.glnce = glance.GlanceApi() # << HERE ERROR
        self.glnce.set_auth_obj(novaAPI.get_auth_obj()) 
```

它看起来像我已经完成的另一个测试，但不适用于这种情况。提前致谢。

这是一目了然的来源：

```
import pycurl
import cStringIO
import os

class GlanceApi:

    def __init__(self):
        self.auth = ""
        self.http_handler = ""

    def set_auth_obj(self, authenticate):
        self.auth = authenticate

    def list_images(self, is_public=False, with_details=False):

        if self.auth.is_authed() == False:
            return False

        self.http_handler = pycurl.Curl()
        printer = cStringIO.StringIO()

        if with_details == False:
            url_complement = "/images"
        else:
            url_complement = "/images/detail"

        if is_public == False:
            full_url = str(self.auth.get_image_URL() + url_complement)
        else:
            full_url = str(self.auth.get_image_URL()[:30] + url_complement)

        headers = ["X-Auth-Token:%s" % str(self.auth.get_auth_token())]

        self.http_handler.setopt(pycurl.URL, full_url)
        self.http_handler.setopt(pycurl.HTTPGET, 1)
        self.http_handler.setopt(pycurl.HTTPHEADER, headers)
        self.http_handler.setopt(pycurl.WRITEFUNCTION, printer.write)
        self.http_handler.perform()

        http_code = int(self.http_handler.getinfo(pycurl.HTTP_CODE))
        self.http_handler.close()

        return printer.getvalue()

    def get_image_metadata(self, id, is_public=False):

        if self.auth.is_authed() == False:
            return False

        self.http_handler = pycurl.Curl()
        printer = cStringIO.StringIO()

        url_complement = "/images/%s" % id

        # Setting the request url according the is_public parameter.
        if is_public == False:
            full_url = str(self.auth.get_image_URL() + url_complement)
        else:
            full_url = str(self.auth.get_image_URL()[:30] + url_complement)

        headers = ["X-Auth-Token:%s" % str(self.auth.get_auth_token())]

        self.http_handler.setopt(pycurl.URL, full_url)
        self.http_handler.setopt(pycurl.CUSTOMREQUEST, 'HEAD')
        self.http_handler.setopt(pycurl.HTTPHEADER, headers)
        self.http_handler.setopt(pycurl.WRITEFUNCTION, printer.write)
        self.http_handler.perform()

        http_code = int(self.http_handler.getinfo(pycurl.HTTP_CODE))
        self.http_handler.close()

        return printer.getvalue()

    def add_image(self,  file_path, name, is_public=False):
        # Verifying if the user is authenticated.
        if self.auth.is_authed() == False:
            return False

        self.http_handler = pycurl.Curl()
        printer = cStringIO.StringIO()

        url_complement = "/images"

        if is_public == False:
            full_url = str(self.auth.get_image_URL() + url_complement)
        else:
            full_url = str(self.auth.get_image_URL()[:30] + url_complement)

        size = os.path.getsize(file_path)

        image = [(str(name), (pycurl.FORM_FILE, str(file_path)))]

        headers = ["X-Auth-Token:%s" % str(self.auth.get_auth_token()), "x-image-meta-name:%s" % name, "x-image-meta-size:%s" % str(size)]
        if is_public == True:
            headers.append("x-image-meta-is-public:true")

        self.http_handler.setopt(pycurl.URL, full_url)
        self.http_handler.setopt(self.http_handler.HTTPPOST, image)
        self.http_handler.setopt(pycurl.HTTPHEADER, headers)
        self.http_handler.setopt(pycurl.WRITEFUNCTION, printer.write)
        self.http_handler.perform()

        http_code = int(self.http_handler.getinfo(pycurl.HTTP_CODE))
        self.http_handler.close()

        return printer.getvalue() 
```

这是目录结构：

```
Project
   + src/
      - glance.py
      - ...
   + Tests/
      - glance_tests.py
      - ... 
```

**编辑** 已解决，如何？我不知道，但我已经这样做了，我创建了一个名为glanceapi.py的新文件，并将内容复制到glance.py文件中，在导入时更改名称并且它可以工作，我不知道是什么问题，可能是一些 python 错误，好吧，我想感谢那些试图帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:31:52.290

转到 IDLE，看看 PYTHONPATH 是什么。

```
import sys
sys.path 
```

如果在路径中找不到 Glance 所在的位置，我想您必须使用 sys.path.append() 插入/附加它。看看如何在这里做你的参数和东西：http: [//effbot.org/librarybook/sys.htm](http://effbot.org/librarybook/sys.htm)

编辑：如果这不起作用，请告诉我。

# php - 避免在 codeigniter 中验证表单的下拉菜单

> ID：10534283
> 
> 赞同：0
> 
> 时间：2012-05-10T12:43:59.373
> 
> 标签：php, forms, validation, codeigniter, drop-down-menu

我有这个搜索功能：

```
public static function search_form()
{
    $form = new Form('search_form');

    $form->field('keyword', 'text', array
    (
        'min_length'    =>  4,
        'max_length'    =>  15,
        'alphanumeric'  =>  lang('alphanumeric')
    )); 
    $form->field('category', 'select', array
    (
        'cat1'  =>  'Category 1',
        'cat2'  =>  'Category 2',
        'cat3'  =>  'Category 3'

    ), $value);

    if($data = $form->validate())
    {           
        header('Location: '.WEB.sprintf('search/'.$data['keyword'].'/'.$data['category']));
    }

    return $form;
} 
```

还有可选的验证，它适用于输入，但不适用于下拉菜单：

```
// Validate
public function validate()
{
    $this->script();

    if(!$this->submitted)
    {
        return false;
    }

    $this->valid = true;

    foreach($this->fields as $field)
    {
        $value = $this->request[$field[0]];

        if(isset($field[2]['optional']) && $field[2]['optional'])
        {
            if($value == '') continue;
        }

        foreach($field[2] as $validator=>$data)
        {
            if($validator == 'optional') continue;

            $custom = !method_exists($this, $validator);

            if((!$custom && !$this->$validator($value, $data)) || ($custom && !$this->custom($data, $value)))
            {
                $this->valid = false;

                $this->errors[$field[0]] = $this->error_message($field[0], $validator, $data);

                break;
            }
        }
    }

    return $this->valid?$this->request:false;
} 
```

当我在文本输入中添加可选参数时，它可以工作，但不能在选择输入中：

```
 $form->field('category', 'select', array
    (
        'optional'      =>  true,
  ................. 
```

它被转换为 HTML 中的值 这是选择案例：

```
 # Input
        switch($field[1])
        {
            case 'text':
            case 'password':
                if($this->submitted)
                {
                    echo '<input id="'.$this->id.'_'.$field[0].'" class="text" type="'.$field[1].'" name="'.$field[0].'" value="'.htmlentities(utf8_decode($this->request[$field[0]]), ENT_QUOTES).'"/>';
                } else
                {
                    echo '<input id="'.$this->id.'_'.$field[0].'" class="text" type="'.$field[1].'" name="'.$field[0].'"'.(isset($field[3])?' value="'.$field[3].'"':'').'/>';
                }
                break;
            case 'textarea':
                echo '<textarea type="text" id="'.$this->id.'_'.$field[0].'" name="'.$field[0].'">';
                echo '</textarea>';
                break;
            case 'select':
                echo '<select id="'.$this->id.'_'.$field[0].'" name="'.$field[0].'">';

                foreach($field[2] as $key=>$value)
                {
                    echo '<option value="'.$key.'"';

                    if($this->submitted && $this->request[$field[0]] == $key)
                    {
                        echo ' selected="selected"';
                    } elseif(isset($field[3]) && $field[3] == $key)
                    {
                        echo ' selected="selected"';
                    }

                    echo '>'.$value.'</option>';
                }

                echo '</select>';
                break;
        } 
```

问题是我需要第一个输入（关键字）的验证器而不是下拉列表，而且似乎我必须验证两个字段，这是我不想要的。有没有办法绕过第二次验证？

编辑：实际上，我不知道为什么下拉列表没有通过验证，我只是在尝试提交表单时得到“error_category”。

**问题解决了 ：**

验证函数实际上是在尝试验证第二个字段 ($field[2]) 并寻找 ['optional'] 值，但找不到它，因为我的第二个字段实际上是类别数组。为了解决这个问题，我只是在第二个位置添加了一个新数组，其中包含“可选 = true”并将我的实际数组移动到第三个位置。然后验证没问题，但选项值没有出现，所以我只需要更改：

```
 foreach($field[2] as $key=>$value)
            {
                echo '<option value="'.$key.'"'; ... 
```

并将 $field[2] 替换为 $field[3] 然后只需将值字段（以前为 $field[3]）移动到 $field[4]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:28:34.780

**问题解决了 ：**

验证函数实际上是在尝试验证第二个字段 ( **$field[2]** ) 并寻找 [' **optional** '] 值，但找不到它，因为我的第二个字段实际上是类别数组。为了解决这个问题，我只是在第二个位置添加了一个新数组，其中包含“ **optional = true** ”并将我的实际数组移动到第三个位置。

然后验证没问题，但选项值没有出现，所以我只需要更改：

```
 foreach($field[2] as $key=>$value)
        {
            echo '<option value="'.$key.'"'; ... 
```

**并将$field[2]**替换为**$field[3]**然后只需将值字段（以前为 $field[3]）移动到 $field[4]

# ruby - 如何解析存储在数组元素中的 Nokogiri 元素？

> ID：10534284
> 
> 赞同：1
> 
> 时间：2012-05-10T12:44:00.783
> 
> 标签：ruby, nokogiri

我爬取了一个页面并将页面中的元素存储到一个数组中。

如果我检查第一个元素：

```
puts "The inspection of the first my_listing: "
puts my_listing.first.first.inspect 
```

输出是：

```
The inspection of the first my_listing: 
#<Nokogiri::XML::Element:0x80c58764 name="p" children=[#<Nokogiri::XML::Text:0x80c584e4 " May  4 - ">, #<Nokogiri::XML::Element:0x80c58494 name="a" attributes=[#<Nokogiri::XML::Attr:0x80c58340 name="href" value="http://auburn.craigslist.org/web/2996976345.html">] children=[#<Nokogiri::XML::Text:0x80c57f08 "residual income No experience is needed!!!">]>, #<Nokogiri::XML::Text:0x80c57da0 " - ">, #<Nokogiri::XML::Element:0x80c57d50 name="font" attributes=[#<Nokogiri::XML::Attr:0x80c57bfc name="size" value="-1">] children=[#<Nokogiri::XML::Text:0x80c577c4 " (online)">]>, #<Nokogiri::XML::Text:0x80c5765c " ">, #<Nokogiri::XML::Element:0x80c5760c name="span" attributes=[#<Nokogiri::XML::Attr:0x80c574b8 name="class" value="p">] children=[#<Nokogiri::XML::Text:0x80c57080 " img">]>]> 
```

如何访问每个元素？例如，如何访问`Text`该对象中的第一个元素，即“May 4 -”？

如果我做：

```
puts my_listing.first.first.text, 
```

我得到这个输出：

```
May  4 - residual income No experience is needed!!! -  (online)  img 
```

另外，我如何访问该`href`属性？

```
my_listing.first.first[:href] 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:24:22.220

请注意，Nokogiri 将所有内容都视为节点——无论是文本、属性还是元素。您的文档有一个孩子：

```
irb(main):014:0> my_listing.children.size
=> 1
irb(main):015:0> puts my_listing.children
<p> May 4 - <a href="http://auburn.craigslist.org/web/2996976345.html">residual income No
experience is needed</a> - <font size="-1"> (online)</font> <span class="p">
img</span></p>
=> nil 
```

顺便说一句， puts 使用 to_s 方法，并且该方法组装了来自所有孩子的文本 - 这就是为什么您看到的文本比您想要的更多。

如果您更深入地查看该单个元素的子元素，您将拥有：

```
irb(main):017:0> my_listing.children.first.children.size
=> 6
irb(main):018:0> puts my_listing.children.first.children
 May 4 - 
<a href="http://auburn.craigslist.org/web/2996976345.html">residual income No
experience is needed</a>
 - 
<font size="-1"> (online)</font>

<span class="p"> img</span>
=> nil 
```

要获得您所询问的内容，请继续沿层次结构向下走：

```
irb(main):022:0> my_listing.children.first.children[0]
=> #<Nokogiri::XML::Text:0x..fd9d1210e " May 4 - ">
irb(main):023:0> my_listing.children.first.children[0].text
=> " May 4 - "
irb(main):024:0> my_listing.children.first.children[1]['href']
=> "http://auburn.craigslist.org/web/2996976345.html" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:07:24.973

如果我拉下一个网页并有一个元素，就像你做的那样：

```
p c
> => #<Nokogiri::XML::Element:0x3ff9d9c6b660 name="a" ... 
```

你可以得到孩子：

```
c2 = c.children 
```

然后得到他们的文字：

```
c2.text # or
c2[0].text  =>   => "Watch video! " 
```

href 可以像这样得到：

```
c["href"] # -> "http://example.com/video/" 
```

# jquery - 当我移动鼠标或按键时如何停止 jQuery 效果

> ID：10534286
> 
> 赞同：-2
> 
> 时间：2012-05-10T12:44:05.230
> 
> 标签：jquery

当我移动鼠标或按键盘上的键时如何停止 Jquery 效果，任何建议将不胜感激。

```
function dream(){
    //calculating random color of dream
    var color = 'rgb(' + Math.floor(Math.random() * 255) + ',' + Math.floor(Math.random() * 255) + ',' + Math.floor(Math.random() * 255) + ')';

    //calculating random X position
    var x = Math.floor(Math.random() * $(window).width());

    //calculating random Y position
    var y = Math.floor(Math.random() * $(window).height());

    //creating the dream and hide
    drawingpix = $('<span>').attr({ class: 'drawingpix' }).hide();

    //appending it to body
    $(document.body).append(drawingpix);

    //styling dream.. filling colors.. positioning.. showing.. growing..fading
    drawingpix.css({
        'background-color':color,
        'border-radius':'100px',
        '-moz-border-radius': '100px',
        '-webkit-border-radius': '100px',
        top: y-14,    //offsets
        left: x-14 //offsets
    }).show().animate({
        height:'500px',
        width:'500px',
        'border-radius':'500px',
        '-moz-border-radius': '500px',
        '-webkit-border-radius': '500px',
        opacity: 0.1,
        top: y-250,    //offsets
        left: x-250
    }, 3000).fadeOut(2000);

    //Every dream's end starts a new dream
    window.setTimeout('dream()',200);
}

$(document).ready(function() {  
    //calling the first dream
    dream();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:47:03.947

[stop](http://api.jquery.com/stop/)表示它停止在匹配元素上传播动画。

如果你想停止动画然后找到它并`stop()`像这样调用它：

```
$("span").on("keypress", function() {
    $(this).stop(true, true);
}); 
```

为鼠标添加第二个事件捕获，您应该会看到动画停止。

您将不得不使用选择器来准确捕捉正在动画的对象。我不确定按键是否会被捕获，`span`或者您是否需要在特定情况下更通用/更广泛。

要停止生成 的新实例`dream`，您需要调用`clearTimeout()`. [这是如何使用它的一个很好的解释](https://stackoverflow.com/a/3823201/469643)。

**更新**：[这是一个 jsfiddle](http://jsfiddle.net/9GYdn/)，它在涉及时显示其中一些想法`mouseover`。将鼠标悬停在动态创建的圆圈上（这就是您必须使用 捕获事件的原因`on`）将停止当前动画并清除创建的 setTimeout。您应该能够接受这些想法并操纵它们以产生您正在寻找的行为。

# iphone - 将 2 小时设置为结束时间日期

> ID：10534287
> 
> 赞同：1
> 
> 时间：2012-05-10T12:44:05.913
> 
> 标签：iphone, objective-c, cordova

我第一次尝试编辑一些objective-c。
我正在尝试编辑将日期添加到 iPhone 日历中的 phonegap 日历插件，但由于我的日期没有结束时间，我想对其进行编辑，以便它会**在开始时间后 2 小时自动设置结束时间**：

```
NSString* title      = [arguments objectAtIndex:1];
NSString* location   = [arguments objectAtIndex:2];
NSString* message    = [arguments objectAtIndex:3];
NSString *startDate  = [arguments objectAtIndex:4];
//NSString *endDate    = [arguments objectAtIndex:5];

//creating the dateformatter object
NSDateFormatter *sDate = [[[NSDateFormatter alloc] init] autorelease];
[sDate setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *myStartDate = [sDate dateFromString:startDate];

//NSDateFormatter *eDate = [[[NSDateFormatter alloc] init] autorelease];
//[eDate setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
//NSDate *myEndDate = [eDate dateFromString:endDate];
NSDate *myEndDate = [myStartDate dateByAddingTimeInterval:  2*60*60];

myEvent.title = title;
myEvent.location = location;
myEvent.notes = message;
myEvent.startDate = myStartDate;
myEvent.endDate = myEndDate;
myEvent.calendar = store.defaultCalendarForNewEvents; 
```

我没有收到任何错误，但是当我测试我的应用程序时，它不再将日期添加到日历中。

# c# - 当 Dispatcher.BeginInvoke 或 Task.StartNew 时 GUI 冻结

> ID：10534290
> 
> 赞同：1
> 
> 时间：2012-05-10T12:44:16.333
> 
> 标签：c#, wpf, multithreading, dispatcher, taskfactory

**注意：取决于[这个问题](https://stackoverflow.com/questions/10523677/wpf-how-to-invoke-a-method-in-a-separate-thread-with-a-delay-time/10525847)**

你好。我有一个像这样的视图模型：

```
public class ViewModel {
    private readonly IPersonService _personService;
    private readonly ObservableCollection<SearchPersonModel> _foundedList;
    private readonly DispatcherTimer _timer;
    private readonly Dispatcher _dispatcher;
    private CancellationTokenSource _tokenSource;

    public SearchPatientViewModel(IPersonService personService) {
        _personService = personService;
        _foundedList = new ObservableCollection<SearchPersonModel>();
        _dispatcher = (/*CurrentApplication*/).Dispatcher;
        _timer = new DispatcherTimer(
            TimeSpan.FromMilliseconds(1000),
            DispatcherPriority.Normal,
            TimerCallBack,
            _dispatcher);
        _tokenSource = new CancellationTokenSource();
    }

    public string Term {
        get { return _term; }
        set {
            // implementing INotifyPropertyChanged
            if(_term== value)
                return;
            _term= value;
            OnPropertyChanged(() => Term);
            tokenSource.Cancel(); // canceling prev search query
            _timer.Stop(); // stop the timer to reset it
            // start it again to do a search query if user change not the term for 1000ms
            _timer.Start(); 
        }
    }

    private void TimerCallBack(object sender, EventArgs e) {
        _timer.Stop();
        _tokenSource = new CancellationTokenSource();
        var task = Task<IEnumerable<SearchPersonModel>>.Factory
            .StartNew(Search, _tokenSource.Token);
        _dispatcher.BeginInvoke((Action)(() => {
            _foundedList.Clear();
            foreach(var item in task.Result)
                _foundedList.Add(item);
        }), DispatcherPriority.Background);
    }

    private IEnumerable<SearchPersonModel> Search() {
        return _personService.DoSearch(this.Term);
    }

} 
```

在`IPersonService`实现中我这样做：

```
public class PersonService : IPersonService {
    public IEnumerable<SearchPersonModel> DoSearch(string term){
        System.Threading.Thread.Sleep(10000);
        return some-search-result;
    }
} 
```

但是，我希望在执行搜索查询时，GUI 是免费的。但它冻住了！你知道我的错误在哪里吗？你能帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:50:06.647

问题是评估`task.Result`将阻塞，直到查询完成。

最简单的选择可能是让`Search`方法在最后执行`_dispatcher.BeginInvoke`调用。

另一个选项 - 使用 C# 5 会变得更容易 - 将继续添加到任务中，以便在完成后您可以更新 UI。目前你会使用`Task.ContinueWith`; 对于 C# 5，您将使用`async`and `await`。

# c - 如何使用“offsetof”在不同结构之间进行“memcpy”？

> ID：10534292
> 
> 赞同：1
> 
> 时间：2012-05-10T12:44:18.007
> 
> 标签：c, memcpy, offsetof

我有以下两种结构。我需要从`d, e, f`复制`source`到`destination`使用`memcpy`and `offsetof`。我怎样才能做到这一点？

```
struct source
{
    int a;
    int b;
    int c;
    int d;
    int e;
    int f;
};

struct destination
{
    int d;
    int e;
    int f;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:47:14.103

通常，您不能使用 可靠地做到这一点`memcpy`，因为允许编译器以不同的方式*填充*这两个结构。因此，执行部分复制的最安全方法是分别分配三个字段。

但是，由于编译器仅在具有不同对齐要求的成员之间插入填充，因此在您的特定情况下，您可以`memcpy`像这样使用：

```
struct source s {1,2,3,4,5,6};
struct destination d = {100, 200, 300};
memcpy(&d, ((char*)(&s))+offsetof(struct source,d), offsetof(struct source,f)-offsetof(struct source,d)+sizeof(int)); 
```

`destination`'s的偏移量`d`保证为零，因为它是结构的初始成员。由于成员`d`、`e`和`f`具有相同的对齐要求，因此填充（如果有）将在 中位于它们之后，在`struct destination`中位于它们之前或之后`struct source`。

强制转换为`char*`是必需的，因为偏移量以字节表示。

表达方式

```
offsetof(struct source,f)-offsetof(struct source,d)+sizeof(int) 
```

`d`是和之间的运行长度`f`，包括在内。请注意， using`sizeof(struct destination)`是不安全的，因为它可能在末尾有填充，而不存在于 中`struct source`，从而导致读取分配的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:54:11.827

`memcpy`正如“dasblinkenlight”所说，由于可能的填充，这不能可靠地完成。但是，您可以执行以下操作：

```
struct Part1
{
    int a;
    int b;
    int c;
};

struct Part2
{
    int d;
    int e;
    int f;
};

struct source
{
    struct Part1 p1;
    struct Part2 p2;
};

struct destination
{
    struct Part2 p2;
};

// ...
src.p2 = dst.p2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:52:51.483

对于这种情况，您还可以使用指向源和目标结构的 int 指针，然后在目标指针中分配值并减少源和目标 int 指针。

代码片段如下：-

```
struct destination * my_copy (struct source *pfSrc, struct destination *pfDes)
{
  int *pSrc = (int *)pfSrc;
  int *pDes = (int *)pfDes;
  pSrc += (sizeof (struct source)/sizeof (int)) - 1;
  pDes += (sizeof (struct destination)/sizeof (int)) - 1;
  do
  {
    *pDes = *pSrc;
    pSrc--;
  }while (pDes-- != (int *)pfDes);
return pfDes;
} 
```

# java - 使用 Set 填充数据表

> ID：10534299
> 
> 赞同：0
> 
> 时间：2012-05-10T12:44:31.810
> 
> 标签：java, hibernate, jsf

我正在调用这个方法：

```
public Set<RequestVO> getRequestBySupplier(SupplierVO objectVO) 
```

我有一个`OrderController`带有此属性和方法的，在单击按钮时调用：

```
public Set<RequestVO> requestList

public void listOrders()
{
     requestList = requestBO.getRequestBySupplier(supplierVO);
} 
```

调试我可以看到`requestList`已经填充了正确的信息。在我的`orderSearch.html`我有这个数据表：

```
<ui:fragment rendered="#{not empty orderController.requestList}">
     <h:dataTable value="#{orderController.requestList}" var="order">
          <h:column>
               <f:facet name="header">#</f:facet>
               <h:outputText value="#{order.id}" escape="false" />
          </h:column>
     </h:dataTable>
</ui:fragment> 
```

我有我`orderController`的`requestList`get 和 set 方法。

当我运行代码时，我收到此错误：

> /views/fornecedor/orderSearch.xhtml @34,84 value="#{order.id}"：类 'java.util.HashSet' 没有属性 'id'。

和`Stack Trace`：

> javax.el.PropertyNotFoundException：/views/fornecedor/orderSearch.xhtml @34,84 value="#{order.id}"：类'java.util.HashSet'没有属性'id'。在 com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:111) 在 javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) 在 javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper .java:182) 在 javax.faces.component.UIOutput.getValue(UIOutput.java:169) 在 com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205) 在 com.sun.faces。 renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355) 在 com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164) 在 javax.faces。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:52:47.880

`h:datatable`不支持`Set`，可以转换成`List`

例如

```
public List <RequestVO> getListAsSet(Set<RequestVO> set) {
  return new ArrayList<RequestVO>(set);
} 
```

btw`ui:repeat`也不`Set`支持

# ruby-on-rails - 我不确定参数哈希

> ID：10534301
> 
> 赞同：2
> 
> 时间：2012-05-10T12:44:46.850
> 
> 标签：ruby-on-rails, params

我正在尝试掌握 RoR 中的参数哈希。我不确定我是否遗漏了一些东西，但到目前为止我的理解是 params 哈希是一个包含表单输入数据或与 POST 请求相关的查询字符串数据的哈希。Where`params[:item]`创建一个存储相关 POST 数据/查询的符号。再次不确定我是否正确，任何启示将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:33:01.447

参数哈希在[Action Controller Overview](http://guides.rubyonrails.org/action_controller_overview.html#parameters)中有详细描述。TL;DR：params 散列包含所有传递给控制器​​的 GET 或 POST 参数，以及 :controller 和 :action 键。

# html - 触摸输入时虚拟键盘消失：text iscroll4

> ID：10534305
> 
> 赞同：0
> 
> 时间：2012-05-10T12:44:56.507
> 
> 标签：html, cordova, iscroll4

单击输入文本时，键盘会弹出并下降。我使用 iscroll 4 cordova 1.6 技术。当用户触摸文本输入时，键盘会弹出并从屏幕上消失，是否有任何解决方案提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:36:50.927

问题是 ....app 无法专注于文本区域 ....每当用户单击文本区域时 ...

解决方案是 `document.getElementById('id').focus();`

文本字段的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:27:19.647

好吧，你需要修改 iScroll.js

1) 采用 iScroll v4.1.9 2) 将“onBeforeScrollStart”第 100 行的代码更改为此

var 目标 = e.target; 而 (target.nodeType != 1) 目标 = target.parentNode; if (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA') e.preventDefault();

3) 更改“_start”行 #317 的代码添加此代码

```
_start: function (e) {

    if (e.target && e.target.type != undefined) {
        var tagname = event.target.tagName.toLowerCase();
        if (tagname == "input" || tagname == "button" || tagname == "textarea") {// stuff we need to allow
            return;
        }
    }

    var that = this,
        point = hasTouch ? e.touches[0] : e,
        matrix, x, y,
        c1, c2; 
```

# asp.net-mvc-3 - asp.net mvc3中文件上传控制的验证消息

> ID：10534306
> 
> 赞同：-1
> 
> 时间：2012-05-10T12:44:58.673
> 
> 标签：asp.net-mvc-3

当我在 mvc3 项目中上传文件时，我需要验证 sicze 限制并且用户只上传图像、doc 和 xls 文件。应该有像必填字段，文件选择错误，asp.net mvc3中的大小限制

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:04:20.433

就个人而言，我使用 Telerik 上传器控件，并将其设置为在选择文件时运行的方法，但它也可以与标准文件上传器一起使用

```
function onSelect(e) {
    if (e.files[0].size > 256000) {
        alert('The file size is too large for upload');
        e.preventDefault();
        return false;
    }
    // Array with information about the uploaded files
    var files = e.files;
    var ext = $('#logo').val().split('.').pop().toLowerCase();
    if ($.inArray(ext, ['gif', 'jpeg', 'jpg', 'png', 'tif', 'pdf']) == -1) {
        alert('This type of file is restricted from being uploaded due to security reasons');
        e.preventDefault();
        return false;
    } 
    return true;
} 
```

基本上，它说如果文件超过 256k，它就太大了，只允许 gif、jpeg、jpg、png、tif 和 pdf 文件......

# vlc - VLC 2.0.1 调整字幕调整

> ID：10534309
> 
> 赞同：11
> 
> 时间：2012-05-10T12:45:13.513
> 
> 标签：vlc

如何在 VLC 2.0.1
我的字幕晚 2 分钟时调整字幕时间。

已经尝试过google，大部分教程都是为版本1编写的，版本2有不同的配置界面，这让我更加困惑。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T13:02:19.543

在 Windows 中，转到工具 --> 轨道同步

或单击 ![扩展设置图标](../Images/a8a30f84af21940224e3a4aded720ff6.png)VLC 皮肤中的按钮以打开扩展设置

在 Mac 中，转到 Window --> Track Synchronization

# apache-flex - flex 4.6 中的软键盘问题

> ID：10534310
> 
> 赞同：2
> 
> 时间：2012-05-10T12:45:19.877
> 
> 标签：apache-flex

我正在构建一个包含登录表单的平板电脑应用程序。我正在使用软键盘输入凭据，并且正在执行“stage.focus=null”来隐藏软键盘，之后如果我打开一个弹出窗口，它将进入屏幕的一半。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:54:37.883

我找到了解决问题的方法，在将*resizeForSoftKeyboard*属性设置为*SkinnablePopUpContainer*后解决了这个问题。

Thakns，戈皮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T03:13:37.847

这篇文章给了我一些提示[http://forums.adobe.com/message/4068144](http://forums.adobe.com/message/4068144)但没有解决我的问题。最终对我有用的是通过重置焦点并将我的状态更改推迟到之后来“强制”关闭键盘。

```
callLater(setFocus); // set focus to current view

callLater(function():void { /*.. my state change code ..*/ }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T23:16:29.217

我们解决此问题的方法是在 TextInput 上触发我们自己的停用事件。

```
callLater(function():void {
    myTextInput.dispatchEvent(new SoftKeyboardEvent(SoftKeyboardEvent.SOFT_KEYBOARD_DEACTIVATE, true, false, null, "contentTriggered"));
}); 
```

# apache - ajaxfilemanager 出现 403 禁止错误

> ID：10534313
> 
> 赞同：1
> 
> 时间：2012-05-10T12:45:29.433
> 
> 标签：apache, http-status-code-403

如何修复 403 禁止错误？我一直在许多服务器中使用 ajaxfilemanager 和 tinymce，但在这台服务器上出现 403 错误。我不知道如何修复 403 禁止错误。非常感谢并很快需要帮助。

ps 我无权访问 php.ini 文件。Ans 服务器是 Apache/2.2.21 (Unix)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:31:21.323

1&1 托管服务器？

阅读： [https ://www.vbulletin.com/forum/showthread.php/400928-Before-ok-but-today-Erro-403-with-friendly-url](https://www.vbulletin.com/forum/showthread.php/400928-Before-ok-but-today-Erro-403-with-friendly-url)

[http://xenforo.com/community/threads/error-403-forbidden.31398/](http://xenforo.com/community/threads/error-403-forbidden.31398/)

# c# - 我们可以保存 KeyValuePair 在用户资料中？

> ID：10534317
> 
> 赞同：9
> 
> 时间：2012-05-10T12:46:10.533
> 
> 标签：c#, .net, asp.net-mvc-3, asp.net-profiles

```
[Serializable]
public class KeyValue : ProfileBase
{
    public KeyValue() { }

    public KeyValuePair<string, string> KV
    {
        get { return (KeyValuePair<string, string>)base["KV"]; }
        set { base["KV"] = value; }
    }            
}

public void SaveProfileData()
{
    KeyValue profile = (KeyValue) HttpContext.Current.Profile;
    profile.Name.Add(File);
    profile.KV = new KeyValuePair<string, string>("key", "val"); 
    profile.Save();
}   

public void LoadProfile()
{
    KeyValue profile = (KeyValue) HttpContext.Current.Profile;
    string k = profile.KV.Key;
    string v = profile.KV.Value;
    Files = profile.Name;          
} 
```

我正在尝试保存`KeyValuePair<K,V>`在 asp.net 用户配置文件中，它也保存了，但是当我访问它时，它显示键和值属性都为空，有人可以告诉我哪里错了吗？

在`LoadProfile()`k 和 v 中为空。

**网页配置**

```
<profile enabled="true" inherits="SiteBuilder.Models.KeyValue">
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
  </providers>
</profile> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:53:35.753

C#`KeyValuePair`没有 Key / Value 属性的公共设置器。所以它可能会序列化，但它会反序列化为空。

您必须创建自己的类的小实现，例如：

```
[Serializable]
[DataContract]
public class KeyValue<K,V>
{
    /// <summary>
    /// The Key
    /// </summary>
    [DataMember]
    public K Key { get; set; }

    /// <summary>
    /// The Value
    /// </summary>
    [DataMember]
    public V Value { get; set; }
} 
```

然后在您的示例中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:27:08.453

尝试将**[DataContract]**和**[DataMember]**属性放在您的类和 KeyValuePair 属性上。您需要添加对**System.Runtime.Serialization**的引用。请记住，您可能还需要在基类级别应用这些属性才能使序列化工作。

```
[DataContract]
public class KeyValue : ProfileBase
{
    public KeyValue() { }

    [DataMember]
    public KeyValuePair<string, string> KV
    {
        get { return (KeyValuePair<string, string>)base["KV"]; }
        set { base["KV"] = value; }
    }            
} 
```

# python - 通过谷歌代码 api 获取完整的用户电子邮件

> ID：10534318
> 
> 赞同：0
> 
> 时间：2012-05-10T12:46:12.093
> 
> 标签：python, google-code

我正在使用这个（http://code.google.com/p/support/wiki/IssueTrackerAPIPython）python 库从谷歌代码项目中获取数据。当我得到问题列表时，一些问题报告者的电子邮件被隐藏（fe“exam...@gmail.com”而不是“example@gmail.com”）。如何获得此类用户的完整电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:23:08.367

我不相信有办法获得完整的电子邮件。它被隐藏以减少垃圾邮件的数量。

**编辑：** 从您链接的网址中，我找到了指向完整 API 参考的链接[http://code.google.com/p/support/wiki/IssueTrackerAPIReference](http://code.google.com/p/support/wiki/IssueTrackerAPIReference)，如果您能够获取用户的电子邮件，它将在这里。

# ruby - 间接调用的方法内部的黄瓜和变量

> ID：10534320
> 
> 赞同：1
> 
> 时间：2012-05-10T12:46:17.623
> 
> 标签：ruby, tdd, cucumber

请注意：我是 TDD 和黄瓜的新手，所以答案可能很简单。

我正在为测试创建一个基本的图像编辑器（图像只是一个字母序列）。我写了一个黄瓜的故事：

```
Scenario Outline: edit commands
    Given I start the editor
    And a 3 x 3 image is created
    When I type the command <command>
    Then the image should look like <image> 
```

步骤

```
Scenarios: colour single pixel
    | command   | image     |
    | L 1 2 C   | OOOCOOOOO | 
```

总是失败，返回

```
 expected: "OOOCOOOOO"
       got: " OOOOOOOO" (using ==) (RSpec::Expectations::ExpectationNotMetError) 
```

这是步骤代码：

```
When /^I type the command (.*)$/ do |command|
  @editor.exec_cmd(command).should be
end 
```

程序中的函数 exec_cmd 识别命令并启动适当的操作。在这种情况下，它将启动以下

```
def colorize_pixel(x, y, color)
  if !@image.nil?
    x = x.to_i 
    y = y.to_i
    pos = (y - 1) * @image[:columns] + x
    @image[:content].insert(pos, color).slice!(pos - 1)
  else
    @messenger.puts "There's no image. Create one first!"
  end
end 
```

但是，除非我在程序本身的函数中硬编码两个局部变量（pos 和 color）的值，否则这总是失败。

为什么？我似乎在程序本身做错了什么：函数做了它应该做的事情，这两个变量只在本地有用。所以我认为这是我使用黄瓜的问题。我该如何正确测试这个？

- -编辑 - -

```
def exec_cmd(cmd = nil)
  if !cmd.nil? 
    case cmd.split.first
      when "I" then create_image(cmd[1], cmd[2])
      when "S" then show_image
      when "C" then clear_table
      when "L" then colorize_pixel(cmd[1], cmd[2], cmd[3])
    else
      @messenger.puts "Incorrect command. " + "Commands available: I C L V H F S X."
    end
  else 
    @messenger.puts "Please enter a command."
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:25:02.027

```
When /^I type the command (.*)$/ do |command|
  @output = @editor.exec_cmd(command)
end
Then /^the image should look like (.)*$/ do |expected_image|
  @output.should == expected_image 
end 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:11:59.370

不是黄瓜的问题。

问题是，在 exec_cmd 中，split 仅在“case”子句中调用，而不是在“when”中。这意味着，由于命令的格式是“a 1 2 b”，“when”中的 cmd[1] 将调用字符串的第二个字符，一个空格，而不是数组的第二个值，而其他函数将将其转换为 to_i，返回 0。

我像这样更改了 exec_cmd：

```
def exec_cmd(cmd = nil)
  if !cmd.nil?
    cmd = cmd.split
    case cmd.first
    when "I" then create_image(cmd[1], cmd[2])
    [...]
end 
```

这解决了这个问题。

# debugging - 如何找出谁调用了 SendMessage？

> ID：10534322
> 
> 赞同：5
> 
> 时间：2012-05-10T12:46:25.963
> 
> 标签：debugging, winapi, windbg

我正在尝试调试我的 Windows 安装问题。细节并不特别重要，但我正在寻找以下问题的答案：

> explorer.exe 收到 WM_SETTINGCHANGE 消息。在 WinDbg 中，我可以在适当的 WndProc 处中断。我如何知道谁发送了消息？那就是：有没有办法将其追溯到调用的过程`SendMessage(HWND_BROADCAST, WM_SETTINGCHANGE, ...)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:15:12.767

Windows 消息是匿名的。除非消息定义了某种方式来识别发件人（这很容易被伪造），否则您的呼叫应用程序无法确定它们来自哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:56:29.460

这篇博文可以帮助您执行 RPC 调试： http: [//kobyk.wordpress.com/2008/06/07/remote-procedure-call-debugging/](http://kobyk.wordpress.com/2008/06/07/remote-procedure-call-debugging/)

您需要启用 RPC 状态收集：http: [//msdn.microsoft.com/en-us/library/ff542974.aspx](http://msdn.microsoft.com/en-us/library/ff542974.aspx)

# mysql - mySQL 查询无法正常工作

> ID：10534326
> 
> 赞同：-1
> 
> 时间：2012-05-10T12:46:38.083
> 
> 标签：mysql

我需要从博客作者为一定数量的数据库中获取所有评论。除了我的 SQL 查询没有使用正确的作者 ID。

这是我的查询：

```
SELECT em_comments.*, em_users.nickname
FROM em_comments
INNER JOIN em_posts ON em_posts.id = em_comments.post
INNER JOIN em_users ON em_users.id = em_comments.author
WHERE em_posts.author = 1
ORDER BY date DESC 
```

如您所见，它应该只获取帖子作者为1的帖子的评论。我返回的结果是4条评论，但总共有6条评论应该从数据库中恢复。

我知道问题出在某个地方

```
WHERE em_posts.author = 1 
```

因为这个查询如何只返回评论作者为 1 的评论。但它应该返回帖子作者为 1 的所有帖子的所有评论。

有人对我如何解决这个问题有任何想法吗？

提前致谢，马克

编辑：

评论表结构+数据

```
id | post | author | date                 | content
6    7      1       2012-05-10 12:30:25     Dat weet hij zelf ook xD
5    6      1       2012-05-10 12:30:12     yup
1    1      1       2012-05-09 13:39:34     Whoop Whoop! Eerste comment test! xD
2    1      1       2012-05-10 12:27:49     Nice. tweede comment werkt nu ook
3    1      1       2012-05-10 12:29:45     Nice. tweede comment werkt nu ook 
4    1      1       2012-05-10 12:30:00     Nice. tweede comment werkt nu ook 
```

帖子表结构+数据

```
id | author | date                | content                                                 | title    
7    1        2012-05-09 19:42:33   Mark is nog topper geworden vandaag. xD                   Mark is nog cooler
6    1        2012-05-09 19:30:27   Mark is top!                                              Mark
1    1        2012-05-07 19:21:03   lol test met &#039;quotes&#039; en &quot;dubbele q...     Whoop Whoop! 
```

users表结构+数据

```
id | nickname
1    Mark
2    Kevin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:03:55.907

内连接排除在 ON 子句中具有 NULL 值的行。检查列中行的值以查看是否有任何出现 NULL。

# css - 更改活动菜单项的背景

> ID：10534332
> 
> 赞同：1
> 
> 时间：2012-05-10T12:47:00.797
> 
> 标签：css, hover, stylesheet

我正在创建简单的侧边菜单，这样当用户将鼠标悬停在项目背景颜色更改上并单击它时，应保持悬停效果，直到用户单击其他项目

我的代码：

```
 ul#nav {
    padding: 0;
    margin: 0 0 10px 0;
    -moz-appearance: menubar;
        -webkit-appearance: menubar;
    background-position: left;
    font-size: larger;
}

.mmenu{ width: 190px;
       position: fixed;
}
.mmenu a{
    font-size:14px;
    font-family: Arial, sans-serif;
    font-style: normal;
    font-weight:bold;
    display: block;
}

.mmenu a:hover{ color: white;
background-color: #003366;
font-style: oblique;
border-top: 0px outset #003366;
border-bottom: 0px inset #003366;
border-right:0px outset #003366;
border-left: 0px inset ;
} 
```

悬停效果工作正常，但是当我单击任何项​​目时，样式不会保持，我尝试激活，访问但没有运气。有谁知道问题出在哪里？

html

```
<div id="nav" class="mmenu" style="border: 2px double #f2f2f2; left: 25px; width: 200px; border-radius: 6px;">
                            <ul type="none">        
                                        <li><a  href="another example.php">Messages</a></li>
                                        <li><a  href= "example.php">My Conferences</a></li>

                                    </ul>
                                </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:57:54.990

只需添加属性

```
Onclick="this.style.background='#003366'" 
```

到菜单项（“.mmenu a”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:14:57.557

当您单击导航项时，它是否链接到另一个页面？在这种情况下，您需要为导航项和样式添加一个类。

```
<style>
body.page-name-1 #nav li.page-name-1 a, body.page-name-2 #nav li.page-name-2 a
{
    background-color: #003366;
}
</style>

<body class='<?php echo $page_name ?>'> 
<!-- If you are using PHP, and every page has a $page_name -->
<div id='nav' class='mmenu'>
<ul>
<li class='page-name-1' ><a href="another example.php">Messages</a></li>
<li class='page-name-2' ><a href= "example.php">My Conferences</a></li>
</ul>
</div>
...
</body> 
```

# java - 每当其中发生异常时立即停止线程

> ID：10534335
> 
> 赞同：-3
> 
> 时间：2012-05-10T12:47:05.993
> 
> 标签：java, multithreading, exception

如果`Exception`在 Java 代码中的某个点出现，则控制转到该`catch`块。但是，如果此代码实际上是在多线程`run()`方法中，我如何指示代码在发生`run()`时完成该方法`Exception`？

换句话说，我怎样才能指示线程该`run()`方法已经完成，因为它知道`Exception`已经发生了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:52:26.210

> ...当发生此异常时，我如何指示代码使用 run() 方法结束，即代码如何自动指示线程 run() 方法已完成，因为它知道有异常发生发生了？

如果我对您的理解正确，请将代码放在`catch`块中`return`或设置终止条件。这终止了线程。

有几种情况：

如果您使用的是 external `try/catch`，则不需要显式`return`：

```
public void run() {

    try {
        while (!someExitCondition) {
            doSomethingUseful();
        }
    }
    catch (Exception e) {
        doSomethingWithTheException(e);
        // Just falling through ends the thread, because
        // `run` returns
    }
} 
```

如果您使用的是 inner `try/catch`，则可以使用显式`return`或（可能更好）设置终止条件：

```
public void run() {

    while (!someExitCondition) {
        try {
            doSomethingUseful();
        }
        catch (Exception e) {
            doSomethingWithTheException(e);
            return; // Terminates the thread; alternately, set a termination condition
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:06:48.883

如果你在你的`run()`方法中`Thread`，你可以简单地`return`，它以与在任何其他方法`Thread`中调用`return`结束方法处理相同的方式终止。

也许像这样，如果发生这种情况，您会在其中观察`Exception`并打电话......`return``Exception`

```
public void run() {
    try {
        // your code goes here
    }
    catch (Exception e) {
        return;
    }
} 
```

但是，如果您`Thread`有多个方法，最好的方法可能是让每个方法声明它可以抛出一个`Exception`. 例如，如果你`Thread`是这样的......

```
public MyThread extends Thread {

    public void run() {
        try {
            runLongTask1();
            runLongTask2();
        }
        catch (Exception e) {
            return;
        }
    }

    public void runLongTask1() throws Exception {
        // your code here
    }

    public void runLongTask2() throws Exception {
        // your code here
    }
} 
```

看看其他每个方法如何抛出一个`Exception`. 因此，如果`Exception`在 this 的任何方法中抛出an `Thread`，它将触发该`try-catch`方法的`run()`，并`return`退出`Thread`，从而终止它。

当然，如果`try-catch`你的`run()`方法中的 覆盖了方法的所有代码，你实际上不需要，因为无论如何`return`它到达方法的末尾时它是隐式的。`run()`

# php - 如何在自定义模块的 activecollab 中链接 css 文件？

> ID：10534347
> 
> 赞同：0
> 
> 时间：2012-05-10T12:48:06.507
> 
> 标签：php, module, content-management-system, project, activecollab

我正在研究 activecollab 自定义模块，所以在 css 文件放置方面有一些问题，我在其中放置了一个文件

```
mymodule\assets\default\stylesheets\frontend\main.css 
```

但是在安装“mymodule”之后，activecollab 没有在运行时加载页面上获取该 css 文件..

如果有人这样做请帮助我，是否需要添加一行来将该 CSS 与模块链接？还是css文件夹问题？

**更新：**

此外，我想知道模块的 assets/default/stylesheets/ 文件夹中的 FRONTEND 和 BACKEND 是什么？

我需要将我的普通 main.css 文件放在前端文件夹中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:49:41.363

前端和后端是使用资产的上下文：

1.  前端是应用程序的公共部分，不需要登录。它用于提供共享页面、公共请求表单等
2.  后端是登录屏幕后面的一切（基本上是activeCollab的主界面）

根据您的描述，我的猜测是您将样式表置于错误的上下文中。尝试后端，而不是前端。

# mysql - 如何让sql在一段时间之间？

> ID：10534350
> 
> 赞同：1
> 
> 时间：2012-05-10T12:48:27.943
> 
> 标签：mysql

我的数据库记录部分如下所示，我想使用 sql 来获取每天一段时间之间的记录。比如我想进入`01:00 - 03:00`下面的记录，我希望得到`2004/8/7 01:54`，，`2004/8/11 02:41`我该怎么办？谢谢：）

```
2004/8/7 01:54
2004/8/7 16:44
2004/8/7 22:26
2004/8/9 16:26
2004/8/9 16:26
2004/8/9 18:36
2004/8/9 18:36
2004/8/9 18:36
2004/8/9 18:36
2004/8/10 23:22
2004/8/10 23:23
2004/8/11 02:41
2004/8/12 21:05 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:53:49.407

该[`HOUR()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_hour)功能为您提供一天中的时间。剩下的很简单：

```
select * from mytable
where (hour(datetime_column) between 1 and 2
  or (hour(datetime_column) = 3 
    and minute(datetime_column) = 0
    and second(datetime_column) = 0)) 
```

### 编辑：

请注意，`hour(datetime_column) between 1 and 2`匹配`... 01:00:00`到`... 02:59:59`，其余的匹配剩余的一秒 - 完全匹配`03:00:00`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:53:41.533

您可以使用 MySQL `HOUR()`：

MySQL`HOUR()`返回时间的小时。对于时间值，返回值在 0 到 23 的范围内。时间值的范围可能大于 23。

```
SELECT * 
FROM your_table 
WHERE HOUR(your_date_field) > 1 AND HOUR(your_date_field) < 3 
```

# java - 抑制 Apache Tomcat 标准输出上的警告

> ID：10534354
> 
> 赞同：0
> 
> 时间：2012-05-10T12:48:40.517
> 
> 标签：java, apache, tomcat

我在 apache tomcat 上运行一个网络应用程序，它从网络上获取数据，然后写入一个 excel 表。我在 tomcat 标准输出上收到了几个警告，这使得整个工作流程看起来很丑陋。

如何抑制 apache tomcat 标准输出的警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:53:52.360

看看[How to set level logging to DEBUG in Tomcat?](https://stackoverflow.com/questions/4119213/how-to-set-level-logging-to-debug-in-tomcat-6) 或关于 Logging 的 tomcat 文档：http: [//tomcat.apache.org/tomcat-6.0-doc/logging.html](http://tomcat.apache.org/tomcat-6.0-doc/logging.html)

您本质上希望将日志记录缩减为仅（严重）错误。

矮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:40:04.773

鉴于 Tomcat 不直接写入 STDOUT，我假设您正在使用的某些库可以。您可以使用上下文的[swallowOutput](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Common_Attributes)属性重定向此输出。

# jquery - 用于图库/全屏的 jQuery 插件（带缩略图）

> ID：10534355
> 
> 赞同：0
> 
> 时间：2012-05-10T12:48:57.147
> 
> 标签：jquery, jquery-plugins, image-gallery

我正在寻找一个 jQuery 插件，或者如果需要的话，另一个 JS 库，它的功能类似于：

[http://www.yoox.com/item.asp?cod10=34249005&tskay=768BABE2](http://www.yoox.com/item.asp?cod10=34249005&tskay=768BABE2)

当您单击大图像时，它会打开图像的全屏弹出窗口。

有谁知道这样的画廊插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:52:13.723

你见过灯箱插件吗？

[http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)

# javascript - 使用 Eclipse 和 Chromium Dev Tools V8 进行 Node.JS 调试

> ID：10534356
> 
> 赞同：2
> 
> 时间：2012-05-10T12:48:58.660
> 
> 标签：javascript, eclipse, debugging, v8, google-chrome-devtools

Eclipse 是一个你喜欢它或你讨厌它的工具，用于编辑 Javascript 文件。对我来说，两者兼而有之。

无论如何，我通常更喜欢 Eclipse 的[SPKET JS 编辑器插件](http://www.spket.com/download.html)而不是默认插件，因为[对象知识](https://stackoverflow.com/questions/6006421/eclipse-javascript-code-highlighting-json-style-js-does-half-a-job)和[包含文件代码完成](https://stackoverflow.com/questions/6256636/eclipse-galileo-supports-javascript-cross-file-code-completion-but-eclipse-heli)等小细节。

但是，当使用[Chrome Dev Tools](http://chromedevtools.googlecode.com/svn/update/dev/)中的 V8 调试器来处理 Node.JS 等服务器端 JavaScript 时，它会打开第三个编辑器 Chromium（来自浏览器）以进行代码单步执行。

我想要一个选项卡中的所有内容，因此我尝试使用 V8 工具中的 JS 编辑器打开我的文件，但是选项卡中的名称现在已隐藏（尝试以这种方式编辑多个文件）并且无论如何都会在调试时打开一个新文件* .

（* 注意 PHP 调试也有类似的问题，但它会从同一个 PHP 编辑器打开一个新实例）

*Chromium JS 编辑器 | SPKET JS 编辑器 | Eclipse JS 编辑器* ![在此处输入图像描述](../Images/61c8f58739b16a7768e345a81d4a2b77.png)

另外，我不知道这是特定于节点的还是特​​定于 Eclipse 的，但`node --debug`不接缝做任何事情，没有变量大纲，没有断点。而`node --debug-brk`正如预期的那样。因此，要么 Node.js 很奇怪，要么 Eclipse 很奇怪，要么我错过了重点，要么我设置了错误的调试。

谁能详细说明在 Eclipse 中调试服务器端 JS 并使用最完整的 JS 编辑器，以便：

*   JS 编辑器知道对象内部的函数和单独的文件，如 SPKET（在 Node.js 等现代实现中经常出现这种情况），但最好免费用于任何用途（如 Chromium 开发工具）
*   Eclipse 将代码和调试保留在同一个选项卡中（如果可能的话）
*   选项卡保留文件的名称（错误或错误设置？）

我在 Ubuntu 12.04 x64 上运行带有 Google Chrome 开发工具 SDK WIP + 远程调试 + JSDT 桥的 Eclipse Indigo 3.7.2 和 - 如果相关 - 可选的 SPKET 1.6.20 IDE。

- 编辑 -

至少我知道在哪里放置断点。不在编辑器中，而是在调试器中。打开`Project Explorer`：

窗口 -> 显示视图 -> 其他... -> 常规 -> 项目资源管理器

在项目资源管理器中 -> 选择您的调试项 -> 打开正确的 JS 文件 -> ![在此处输入图像描述](../Images/c078f2a4d83b79639d585d0ea1c9081c.png) 这是您要添加断点的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:00:29.203

默认情况下，ChromeDevTools 有自己单独的 .js 文件用于调试。如果您想让调试器单步执行您的文件，则需要进行设置： [http ://code.google.com/p/chromedevtools/wiki/FeatureDebugOnRealFiles](http://code.google.com/p/chromedevtools/wiki/FeatureDebugOnRealFiles)

# android - Android App Widget按钮单击无法正常工作

> ID：10534357
> 
> 赞同：1
> 
> 时间：2012-05-10T12:49:00.967
> 
> 标签：android, android-appwidget

我正在制作一个简单的应用程序小部件，当触摸小部件中的按钮时，它会显示一条吐司消息。我遇到的问题是单击按钮时吐司永远不会出现。事实上，当按钮被触摸时，onReceive 事件永远不会被触发。我怀疑这个问题与我的清单有关，但对我来说看起来没问题。

这是我的清单的相关部分：

```
<receiver android:name=".GPSWidget" android:label="GPS Receiver">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <action android:name="luke.app.steal.GPSWidget.ACTION_WIDGET_RECEIVER"/>
        </intent-filter>
        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_provider" />
</receiver> 
```

这是将按钮“连接”到事件侦听器的代码，以及它位于名为 GPSReceiver 的类中的 onReceive 事件。

```
public static String ACTION_WIDGET_RECEIVER = "ActionReceiverWidget";

@Override
public void onReceive(Context context, Intent intent) {
    if(intent.getAction().equals(ACTION_WIDGET_RECEIVER)) {
        Toast.makeText(context, "Button hit", Toast.LENGTH_SHORT).show();
    }
    super.onReceive(context, intent);
}

@Override
public void onUpdate( Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds )
{
        RemoteViews remoteViews;

        remoteViews = new RemoteViews( context.getPackageName(), R.layout.gpswidget );
        remoteViews.setTextViewText( R.id.widgetTexts, "Click Me!");

        Intent inte = new Intent(context, lukeService.class);
        inte.setAction(ACTION_WIDGET_RECEIVER);

        PendingIntent configPendingIntent = PendingIntent.getBroadcast(context, 0, inte, 0);

        remoteViews.setOnClickPendingIntent(R.id.widgetTexts, configPendingIntent);
        appWidgetManager.updateAppWidget(appWidgetIds, remoteViews );
} 
```

widgetTexts 是应该启动 toast 的按钮，但就像我说的那样，当按下按钮时什么都没有发生。我认为我在清单中的路径是错误的，luke.app.steal，但同样的路径适用于我的所有其他活动。

有人有什么想法吗？或需要更多信息？

# objective-c - EXC_BAD_ACCESS 奇怪的十六进制到字符串的转换

> ID：10534358
> 
> 赞同：0
> 
> 时间：2012-05-10T12:49:02.217
> 
> 标签：objective-c, macos, cocoa

我被困住了。我给你我使用的确切代码，而不是示例：

所以，我做了两个这样的字符串：

```
DestChoice = [NSString stringWithFormat:@"%lX", [DestField integerValue]];
SourceChoice = [NSString stringWithFormat:@"%lX", [SourceField integerValue]]; 
```

因此，用户以十进制值写入源/目标，但它们以十六进制存储在字符串中，然后我有一个按钮可以重新格式化源和目标，如下所示：

```
NSString * CommandReadyToSend  = [NSString stringWithFormat:@"X:0/%@,%@\r", DestChoice, SourceChoice]; 
```

我的代码正在工作，但是，奇怪的是，某些值在 CommandReadyToSend 部分产生了 EXC_BAD_ACCESS ... 示例：如果我在我的文本字段中写 1 => 我在 DestChoice 中收到 1（十六进制值）如果我在我的文本中写 10 field => 我在 DestChoice 中收到 A

但是如果我在文本字段中写 31，我应该得到 1F，但我得到一个 EXC_BAD_ACCESS... 与 29 相同（十进制值）

似乎某些十六进制值无法重新格式化为字符串，我不明白......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:57:42.320

似乎对我有用，原因一定在别处。

```
 NSString *destChoice = [NSString stringWithFormat:@"%lX", 1];
    NSString *sourceChoice = [NSString stringWithFormat:@"%lX", 31];
    NSString *commandReadyToSend  = [NSString stringWithFormat:@"X:0/%@,%@\r", destChoice, sourceChoice];
    NSLog(@"%@", commandReadyToSend); 
```

`2012-05-10 13:56:29.092 test[9383:707] X:0/1,1F`

-

顺便提一句; 如果`DestField`是 a`UITextField`那么你应该使用`[DestField.text integerValue];`- 这是你的问题的可能性。

# c# - 使用 C# 防止基于 Sharepoint 列表中的两列或多列的重复？

> ID：10534359
> 
> 赞同：0
> 
> 时间：2012-05-10T12:49:07.037
> 
> 标签：c#, visual-studio-2010, sharepoint-2010

我在防止基于 Sharepoint Foundation 环境中的两个或更多列的重复时遇到问题。我的想法是在 C# 中创建一个事件处理程序来拦截列表中项目的创建，检查列表中是否已经存在两列的组合，如果存在则发送错误。

所以基本思想是：在列表 A 中，一个预订列表，我有 A 列（时间）和 B 列（日期）。当要创建项目时，我希望有一个事件处理程序来拦截创建并检查列表中是否已经存在时间+日期，因此不会发生双重预订。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:18:39.623

更改查询参数，如下所示：

```
query.Query = @"<Where><And><Eq><FieldRef Name='Time' /><Value Type='Choise'>" +
                                 properties.AfterProperties["Time"] + "</Value></Eq><Eq><FieldRef Name='Date' /><Value Type='Choise'>" +
                                  properties.AfterProperties["Date"] + "</Value></Eq></And></Where>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:49:47.180

听起来您在实现[ItemAdding](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemadding.aspx)事件接收器方面走在了正确的轨道上。

有关如何创建事件接收器的示例，请参见：

*   [示例：创建列表项事件处理程序](http://msdn.microsoft.com/en-us/library/ms437502.aspx)
*   [如何：创建事件处理程序功能](http://msdn.microsoft.com/en-us/library/ms453149.aspx)

# php - 静态方法上的 PHP call_user_func

> ID：10534360
> 
> 赞同：9
> 
> 时间：2012-05-10T12:49:07.817
> 
> 标签：php, symfony, runtime

我正在 Symfony2 上开发，我需要调用一个类的方法，这两个方法都只在运行时知道。

我已经在项目中成功使用了[变量函数](http://php.net/manual/en/functions.variable-functions.php)，[`call_user_func`](http://www.php.net/manual/en/function.call-user-func.php)但是这次他们给我带来了问题......

我的代码看起来像这样

```
namespace MyBundleNamespace;

use MyBundle\Some\Class;

class MyClass
{
    public static function myFunction() { ... }
} 
```

在其他一些文件中我需要这样做

```
MyClass::myFunction(); 
```

但动态的，所以我都尝试了

```
$class = "MyClass";
$method = "myFunction";

$class::$method(); 
```

和

```
$class = "MyClass";
$method = "myFunction";
call_user_func("$class::$method"); 
```

但我得到一个`class MyClass not found`错误。当然，该课程已正确包含在内，`use`并且如果我这样称呼`MyClass::myFunction()`它，它就可以工作。

我还尝试按照[此问题](https://stackoverflow.com/questions/1120779/call-user-func-array-vs-call-user-func)答案评论中的建议手动触发自动加载器，但它不起作用。此外，`class_exists`返回`false`.

我错过了什么？有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-10T13:12:40.550

您缺少名称空间：

```
$class = '\\MyBundleNamespace\\MyClass';
$method = 'myFunction'; 
```

两个电话都应该工作：

```
call_user_func("$class::$method");
call_user_func(array($class, $method)); 
```

# ruby-on-rails - 如何将多个表连接到单个模型？

> ID：10534364
> 
> 赞同：1
> 
> 时间：2012-05-10T12:49:25.837
> 
> 标签：ruby-on-rails, activerecord

我有一个相当复杂的模型，它有许多附加列 - 大约 40 个，所以我将它们分成多个表：

```
business
business_details 
```

我希望我不必创建 BusinessDetails 模型并使用关系 Business has_one BusinessDetails。

如何将业务连接到 business_details 并通过模型业务访问两者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:17:20.643

你在寻找这样的东西吗？

```
class BusinessDetails < ActiveRecord::Base
  belongs_to :business
end

class Business < ActiveRecord::Base
  has_one :business_details

  delegate :bd_field1, :bd_field2, :to => :business_details, :allow_nil => true
end 
```

# android - 如何让 ndk-gdb 在 Android 上运行？

> ID：10534367
> 
> 赞同：39
> 
> 时间：2012-05-10T12:49:32.940
> 
> 标签：android, android-ndk, gdb, symbols

我试图让 NDK 调试器工作，但到目前为止没有成功。

为了确保我的调试符号存在且有效，我使用编译器选项 -O0 和 -g，以及 ndk-build 参数 NDK_DEBUG=1。

ndk-gdb 脚本运行没有问题并启动 GDB。当执行“共享库”命令时，我得到这个：

```
Symbols already loaded for /bla/bla/libMySharedLib.so 
```

但是，当我尝试中断执行或添加段错误进行测试时，我从未在调用堆栈中从该库中获得任何符号。我得到的唯一符号来自 libc，例如，如果我在等待互斥锁时中断执行。还尝试添加断点但没有运气。GDB 让我添加断点，代码运行良好，但断点从未被触发。

我正在使用 API 级别 8，因为我需要支持 Android 2.2 (Froyo)。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-10T18:13:09.120

您不需要使用 -O0 或 -g 开关。您需要执行以下操作之一：

1.  放入文件`android:debuggable="true"`中的`<application>`标签`AndroidManifest.xml`
2.  `NDK_DEBUG=1`在 ndk-build 之后使用
3.  放入`APP_OPTIM := debug`Application.mk文件

执行这三件事中的任何一件都会自动使用 -O0 和 -g 开关。

您可以尝试手动运行 gdb，而不使用 gdb 脚本吗？它涉及以下步骤：

1.  将文件推`gdbserver`送到`/data/local`设备上的文件夹
2.  `adb shell`运行您的应用程序并在以下命令中调用`gdbserver :5055 --attach PID`，其中 PID 是您的应用程序进程 ID。
3.  `adb forward tcp:5055 tcp:5055`在主机上运行
4.  `arm-linux-androideabi-gdb.exe`从您的应用程序文件夹运行
5.  在 gdb 中输入以下命令
6.  `set solib-search-path obj/local/armeabi`
7.  `file obj/local/armeabi/libMySharedLib.so`
8.  `target remote :5055`

然后看看你是否可以调试。

如果您想查看您的库正在使用的其他共享库的符号`libc.so`，则将它们从设备（从`/system/lib`文件夹）拉到您的`obj/local/armeabi`文件夹。

# java - 如何允许选择多行而不允许在 JTable 中选择多列？

> ID：10534371
> 
> 赞同：0
> 
> 时间：2012-05-10T12:49:58.533
> 
> 标签：java, swing, jtable

我有一个问题，现在我可以选择多行和多列，效果很好，但我想禁用 JTable 中的多列选择。

**例子：**

我有两列，四行。ColumnA 和 ColumnB，我选择了 columnA 和前两行，用户不能选择 ColumnB 的行，直到他/她取消选择 columnsA 的行，否则另一种情况是 ColumnA 的行被取消选择并且它选择 ColumnB 的行。

我希望我很清楚。

# google-sheets - 带有自定义脚本的公式不会在 Google 电子表格中更新

> ID：10534376
> 
> 赞同：4
> 
> 时间：2012-05-10T12:50:16.100
> 
> 标签：google-sheets, google-apps-script

我在使用电子表格时遇到了一些问题：如标题所述，我在一列中放入了一个公式，该公式根据另一个单元格的值调用自定义脚本，但是当我修改另一个单元格时，公式不会更新.. . 这似乎适用于标准公式，但是，在我的单元格中调用我的脚本：

*   如果我尝试在公式单元格中添加一个空白，结果仍然没有更新。
*   如果我清除公式单元格并重新输入公式，它仍然显示旧值。
*   如果我将公式单元格复制粘贴到另一个单元格中，则新单元格是最新的。

这是我的脚本。如果单词很少：对于给定的 'company' 参数，它搜索所有符合此条件的行并将第三列单元格存储在一个变量中，最后返回（所以返回最后一个值）：

```
function getLastStatut(company) {
  var values = SpreadsheetApp.getActiveSheet().getDataRange().getValues();

  var out = "not found";
  var row;
  for(i in values){
    row = values[i];
    if(row[1]==company){
      out = row[2];
    }
  }
  return out;
} 
```

例如：

*   A1 : 日期
*   A2：测试
*   A3 : 跑步
*   A4 : =getLastStatut(B1)

所以 A4 显示“正在运行”，但如果我更改 A3，它仍然显示“正在运行”，而它应该显示 A3 的值。

这是一个错误还是我做错了什么？欢迎任何帮助。

亚历克西斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T21:07:17.353

问题在于自定义函数的缓存“功能”。[我在另一个线程](https://stackoverflow.com/questions/9022984/google-apps-script-to-summarise-data-not-updating/9023954#9023954)中解释它，请阅读。

但这里的底线是，自定义函数不应该访问非静态数据，所有变量信息都应该作为参数传递。在您的情况下，整个数据集应该是您脚本的参数。自定义函数根本不应该得到任何范围。

```
//getting values like this is wrong (for a custom function)
var values = SpreadsheetApp.getActiveSheet().getDataRange().getValues(); 
```

# javascript - JQUERY - 淡出特定的 div，等待，淡入 div

> ID：10534382
> 
> 赞同：4
> 
> 时间：2012-05-10T12:50:30.517
> 
> 标签：javascript, jquery

我目前有这个工作小提琴 - [http://jsfiddle.net/B8Abd/](http://jsfiddle.net/B8Abd/)

我想在函数期间使用 jquery 淡出然后淡入。目前的代码是这样的：

```
 function changetoYellow() {
//change the color of the div
       createGradientV([0, 0, 0], [255, 255, 0], 7, 200);
       } 
```

我想要这样的东西：

```
 function changetoYellow() {
 //fade to black: 
       $("#fadeBandsV").fadeOut(1000);
//change the color of the div
       createGradientV([0, 0, 0], [255, 255, 0], 7, 200);
 //fade from black: 
       $("#fadeBandsV").fadeIn(1000);
       } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T12:53:43.493

这个怎么样：

```
function changetoYellow() {
    $("#fadeBandsV").fadeOut(1000, function() {
        createGradientV([0, 0, 0], [255, 255, 0], 7, 200);
        $("#fadeBandsV").fadeIn(1000);
    });
} 
```

**演示：http:** [//jsfiddle.net/B8Abd/1/](http://jsfiddle.net/B8Abd/1/)

# wcf - 使用来自外部 dll 的类时，WCF 服务找不到元数据

> ID：10534383
> 
> 赞同：0
> 
> 时间：2012-05-10T12:50:30.890
> 
> 标签：wcf, wcf-hosting

我正在创建一个 WCF 服务，该服务将用于将数据插入数据库。

WCF 服务在使用本地限定在服务本身的接口和类内的函数时正常运行，但是，当我使用外部 DLL 中的类时，它无法启动。

我确保 DLL 中的类具有所有必需的属性，但仍然无法运行该服务。

有任何想法吗？

编辑：这是错误的功能

```
 public Dal_Users createProfile(DateTime dateOfBirth, string email, string firstname, bool genderIsMale, string lastname, string mphoneno, string nickname, string password, string pictureURL)
    {
        try
        {
            //generate new user object
            /////////////////////////start user metadata/////////////////////////////////////////
            Dal_Users newUser = new Dal_Users();
            newUser.DateOfBirth = dateOfBirth;
            newUser.Email = email;
            newUser.FirstName = firstname;
            newUser.GenderIsMale = genderIsMale;
            newUser.LastName = lastname;
            newUser.MPhoneNo = mphoneno;
            newUser.NickName = nickname;
            newUser.Password = password;
            newUser.ProfilePicture = pictureURL;
            //////////////////////////////end user metadata///////////////////////////////////////

            //insert user in database, call updateUsers without an ID
            newUser.UpdateUsers();

            return newUser;
        }
        catch (Exception ex)
        {
            return new Dal_Users();
        }
    } 
```

DAL_Users 类来自 DLL，并被标记为`DataContract`

```
/// <summary>
/// this is the data access class for the table Users
/// </summary>
[DataContract]
public class Dal_Users 
```

编辑2：

```
My app.config looks like this 
```

```
 <system.serviceModel>
    <services>
      <service name="ProfileService.ProfileMgr">
        <endpoint address="" binding="wsHttpBinding" contract="ProfileService.IProfileMgr">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/ProfileService/Service1/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

我收到的错误是

> 错误：无法从[http://localhost:8732/Design_Time_Addresses/ProfileService/Service1/mex](http://localhost:8732/Design_Time_Addresses/ProfileService/Service1/mex)获取元数据如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布. 有关启用元数据发布的帮助，请参阅位于[http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange Error URI: [http://localhost:8732/Design_Time_Addresses/ProfileService/Service1的 MSDN 文档/mex](http://localhost:8732/Design_Time_Addresses/ProfileService/Service1/mex) 元数据包含无法解析的引用：“http://localhost:8732/Design_Time_Addresses/ProfileService/Service1/mex”。 `Receivera:InternalServiceFault`由于内部错误，服务器无法处理请求。有关错误的详细信息，请在服务器上打开 IncludeExceptionDetailInFaults（来自 ServiceBehaviorAttribute 或来自 <serviceDebug> 配置行为）以便将异常信息发送回客户端，或者根据 Microsoft .NET Framework 打开跟踪3.0 SDK 文档并检查服务器跟踪日志。HTTP GET 错误 URI：[http://localhost:8732/Design_Time_Addresses/ProfileService/Service1/mex](http://localhost:8732/Design_Time_Addresses/ProfileService/Service1/mex) 下载“http://localhost:8732/Design_Time_Addresses/ProfileService/Service1/ 时出错”墨西哥'。请求失败，HTTP 状态为 400：错误请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:18:52.127

尝试在您的设置中设置[`includeExceptionDetailInFaults`](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.includeexceptiondetailinfaults.aspx)为，以便您可以看到请求 MEX 端点时生成的错误消息。`true``web.config`

请参阅[此 SO 帖子](https://stackoverflow.com/q/511793/175679)，该帖子似乎与您收到的错误相同（*HTTP status 400: Bad Request*）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:10:49.977

如果您尝试将服务和服务合同移至外部程序集，则需要修改 .svc 文件以指向该程序集。

```
<%@ ServiceHost Language="C#" Debug="true" Service="FULLASSEMBLYNAMEHERE" %> 
```

# c++ - 面向对象编程：

> ID：10534388
> 
> 赞同：-3
> 
> 时间：2012-05-10T12:50:48.893
> 
> 标签：c++, oop

我需要编写一个完全 oop 的程序。（域、存储库、控制器、UI（TUI））但是我在创建菜单 > 控制器 > 存储库功能之间的链接时遇到了一些问题。我应该如何创建控制器的构造函数？我有一个例子，但我没有从中得到太多，谁能解释我这个构造函数？

```
class ConsoleUI {
public:
    ConsoleUI(MusicStore* store) : musicStore(store) {}
    void run();

private:
    MusicStore* musicStore;

    void showMenu();
    int readOption();
           .
           .
           .
    void showMenu();
    int readOption();

    void printBestSoldAlbums();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:54:01.433

此类具有带有一个参数的构造函数 - 指向`MusicStore`对象的指针。它唯一做的事情 - 将`musicStore`成员设置为传递的参数。

# oracle - 克服通过数据库链接进行批量插入的限制

> ID：10534390
> 
> 赞同：2
> 
> 时间：2012-05-10T12:50:57.003
> 
> 标签：oracle, plsql, oracle11g, oracle9i

`forall .. insert`当通过数据库链接使用时，似乎存在禁止在 Oracle 上使用的实现限制。这是一个简单的示例来演示：

```
connect schema/password@db1

create table tmp_ben_test (
   a number
 , b number
 , c date
 , constraint pk_tmp_ben_test primary key (a, b)
    );

Table created.

connect schema/password@db2
Connected.

declare

   type r_test is record ( a number, b number, c date);
   type t__test is table of r_test index by binary_integer;
   t_test t__test;

   cursor c_test is
    select 1, level, sysdate
      from dual
   connect by level <= 10
           ;

begin

   open c_test;
   fetch c_test bulk collect into t_test;

   forall i in t_test.first .. t_test.last
     insert into tmp_ben_test@db1
     values t_test(i)
            ;

   close c_test;

end;
/ 
```

*非常*令人困惑的是，这在 9i 中失败并出现以下错误：

> 第 1 行的错误：ORA-01400：无法将 NULL 插入 ("SCHEMA"."TMP_BEN_TEST"."A") ORA-02063：DB1 的前一行 ORA-06512：第 18 行

如果只有在签入 11g 之后，我才意识到这是一个实现限制。

> 第 18 行出现错误：ORA-06550：第 18 行，第 4 列：PLS-00739：远程表不支持 FORALL INSERT/UPDATE/DELETE

真正明显的解决方法是更改`forall ..`​​为：

```
for i in t_test.first .. t_test.last loop
    insert into tmp_ben_test@db1
    values t_test(i);
end loop; 
```

但是，如果可能的话，我宁愿将其保留为单个插入。[Tom Kyte 建议使用全局临时表](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1001450700346544769)。将数据插入 GTT，然后通过 DB 链接，对于已经属于用户定义类型的一组数据来说似乎是一种过度杀伤。

只是为了澄清这个例子与实际发生的事情相比*非常简单。*我们不可能做一个简单的事情`insert into`，也不可能所有的操作都可以在 GTT 上完成。大部分代码必须以用户定义的类型完成。

是否有另一种更简单或更少 DMLy 的方法来绕过这个限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:06:22.833

您在远程数据库上面临哪些限制？如果您可以在那里创建对象，那么您有一个解决方法：在远程数据库上创建集合类型和一个将集合作为参数并执行 FORALL 语句的过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:40:20.060

如果您在 db2 中创建 t__test/r_test 类型，然后在 db1 上为它们创建公共同义词，那么您应该能够调用从 db1 到 db2 的过程来填充 t_table 并返回到 db1。然后你应该能够插入到你的本地表中。

我假设您将在现实世界中使用打包类型和过程，而不是匿名块。

此外，它不是大数据集的理想解决方案，那么 GTT 或类似的会更好。

# php - 在 PHP 中加密，在 Python 中解密

> ID：10534393
> 
> 赞同：5
> 
> 时间：2012-05-10T12:51:14.543
> 
> 标签：php, python, encryption, cross-language

PHP代码：

```
$key = "12345678abcdefgh12345678abcdefgh";
$iv = "12345678abcdefgh";
$plaindata = "This is a test string.";

$enc = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $plaindata, MCRYPT_MODE_CBC, $iv));

echo($enc); 
```

结果：

```
QBN0Yue3D9hBrBuD01n5KWG+lv2doMf97cKm/AeusAI= 
```

如何在 Python 中解密？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T13:27:41.340

尝试这样的事情（尽管我确实安装了 PyCrypto）

```
from Crypto.Cipher import AES
import base64

AES.key_size=128
iv="your iv"
key="your key"
crypt_object=AES.new(key=key,mode=AES.MODE_CBC,IV=iv)

decoded=base64.b64decode(plain) # your ecrypted and encoded text goes here
decrypted=crypt_object.decrypt(decoded) 
```

这将带来解码后的文本，但它将用字节填充，使其大小为 16 的倍数。

您可能应该决定一个适当的填充方案，然后相应地删除它

* * *

## 回答 #2

> 赞同：-9
> 
> 时间：2012-05-10T12:54:29.123

阅读[手册](http://docs.python.org/library/base64.html)，它的文档很好。

```
data = base64.b64decode('QBN0Yue3D9hBrBuD01n5KWG+lv2doMf97cKm/AeusAI=') 
```

# extjs - ExtJs 窗口自动滚动不起作用

> ID：10534398
> 
> 赞同：0
> 
> 时间：2012-05-10T12:51:52.027
> 
> 标签：extjs, window, scroll

我的 Window 有 2 个对象：gridPanel 和 formPanel。formPanel 始终处于显示状态，而 gridPanel（位于其上方）仅偶尔显示。

我遇到的问题是 autoScroll 根本不起作用。

```
#Window Config#
UserSelection = Ext.extend(Ext.Window, {
id: 'comWin',
title: 'User Selection',
width: 700,
height: 300,   
autoScroll: true,
maximizable: true,
autoDestroy: false,
closeAction: 'hide'

#Items added to config at creation#
this.add(comGrid);            
this.add(comForm);

#When Grid is shown#
comGrid.show();
comWin.doLayout(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:46:00.243

autoScroll 只是溢出的 CSS 包装器：auto。

[http://jsfiddle.net/HpDAm/](http://jsfiddle.net/HpDAm/)在此示例代码中将 autoScroll 更改为 true/false 将显示/隐藏滚动条。

# c - 在c中使用套接字重新连接

> ID：10534399
> 
> 赞同：4
> 
> 时间：2012-05-10T12:51:52.060
> 
> 标签：c, sockets, tcp-ip

我在 c 中使用套接字并在发送/接收上取得了成功。但是，问题是当我的服务器崩溃时，客户端必须重新连接服务器（服务器在一段时间后运行）。所以在这里我做了什么：

1.  创建一个套接字
2.  连接
3.  接收/发送
    *   如果 recv size == 0 转到第 2 步。

这个算法对我不起作用。有什么想法吗？

代码：

```
int initSocket(char *servIP, unsigned short serverPort)
{
    portNum = serverPort;
    ipAddr = servIP;
                            /* Socket descriptor */
    struct sockaddr_in echoServAddr; /* Echo server address */

    if ((sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) < 0)
    {
        printf("socket() failed");
        bConnected = -1;
        return -1;
    }

    /* Construct the server address structure */
    memset(&echoServAddr, 0, sizeof(echoServAddr));     /* Zero out structure */
    echoServAddr.sin_family      = AF_INET;             /* Internet address family */
    echoServAddr.sin_addr.s_addr = inet_addr(ipAddr);   /* Server IP address */
    echoServAddr.sin_port        = htons(portNum);      /* Server port */

    struct timeval timeout;
    timeout.tv_sec = 0;
    timeout.tv_usec = 20000;

    if (setsockopt (sock, SOL_SOCKET, SO_RCVTIMEO, (char *)&timeout, sizeof(timeout)) < 0)
        error("setsockopt failed\n");

    /*if (setsockopt (sock, SOL_SOCKET, SO_SNDTIMEO, (char *)&timeout, sizeof(timeout)) < 0)
         error("setsockopt failed\n");
    */
    /* Establish the connection to the echo server */
    if (connect(sock, (struct sockaddr *) &echoServAddr, sizeof(echoServAddr)) < 0)
    {
        printf("connect() failed\n");
        bConnected = -1;
        //close(sock);
        return -1;
    }

    bConnected = 0;
    return 0;
}

--------------- if server crashes ------------
if(recv_size == 0)
            {
            // server crashed
                while(initSocket(ipAddr, portNum) < 0)
                {
                    printf("IP : %s\v", ipAddr);
                    printf("Port : %d\v", portNum);                 
                }

            } 
----------------------------- 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T13:31:18.403

> 1.  创建一个套接字
> 2.  连接
> 3.  如果 recv size == 0，则 recv/send 转到步骤 2。

您无法重新连接 TCP 套接字，您必须创建一个新套接字。您还想处理 recv 或 send 错误的情况。

所以这必须是：

1.  创建一个套接字
2.  连接
3.  recv/send 如果 recv 返回 <= 0 或 send 返回 -1（这不是超时）：关闭套接字，转到第 1 步

不过，您的代码似乎已经完成了所有这些步骤，而不仅仅是重复第 2 步和第 3 步，所以有点不清楚您观察到的实际问题是什么。

此外，当 connect() 失败时，您的 initSocket() 代码不会 close() 套接字，因此一旦服务器失败，您将很容易泄漏套接字并在不到一秒的时间内用完文件描述符，您必须 close()如果您不打算使用它，您刚刚创建的套接字。

# git - 通过 GIT 同步两个 svn 存储库

> ID：10534405
> 
> 赞同：0
> 
> 时间：2012-05-10T12:52:04.133
> 
> 标签：git, svn, git-svn

使两个 SVN 存储库与 git 保持同步的最佳方法是什么？一个是“主”，另一个仅使用来自主的信息进行更新，没有人计划签入“从”SVN 存储库。我无权访问 SVN 服务器本身意味着我应该仅作为“SVN 客户端”找到解决方案，并且我无权访问 svn 管理工具或类似工具。

第一种方法：一个 git 存储库从一个 svn 存储库中提取并推送到另一个 SVN 存储库。如果这种方法似乎是最好的，怎么能达到。

第二种方法：两个 git repos，每个 svn 一个 git repos 并将 git repos 同步在一起。如果这是最好的方法，怎么能做到这一点。

第三种我从未想过的方法;-)

我对 SVN 比较坚定，但我是 git 的真正新手，因此我需要一些具体的命令行命令才能实现所需的方法。

目前我不知道如何做到最好。有什么建议吗？

# mysql - SQL 选择满足条件的最大 ID

> ID：10534410
> 
> 赞同：2
> 
> 时间：2012-05-10T12:52:20.363
> 
> 标签：mysql, sql, select

我有一张有 50-100k 行的表。我有一个自动增量 ID 字段和另一个名为 Main_Port 的字段。

我想选择 Main_Port = x 的最后一个 ID。我希望它高效。

我现在使用的是：

```
SELECT max(MANIFEST_ID)FROM MANIFEST_MSS.dbo.Manifest where Main_Port = x 
```

这是最好的方法吗？

该表有可能增长到 500k+ 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:56:19.427

在不了解您的数据结构和索引结构的情况下，很难说“这将是有效的。您使用的查询：

```
SELECT max(MANIFEST_ID)
FROM   MANIFEST_MSS.dbo.Manifest 
WHERE  Main_Port = x 
```

可能非常有效，具体取决于....

*   Manifest.MainPort 上有索引吗？或 (Manifest.MainPort, ManifestID desc) ？
*   我们在 Main_Port 上谈论什么样的密度？意思是，对于给定的 main_port，有多少不同的清单 ID？

为了增加一些观点，500k 行在数据库方面并没有那么大。您已经在这里看到了查询的一些变化，其中一个可能比另一个稍快，但真正的速度将归结为拥有一个良好的索引（Main_Port，ManifestID desc）。Alternatley，如果你真的想深入挖掘，你会想要具体化一个摘要视图。这是对物化视图机制的一个[不错的解释](http://www.fromdual.com/mysql-materialized-views)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:55:50.313

```
SELECT MANIFEST_ID FROM MANIFEST_MSS.dbo.Manifest where Main_Port = x ORDER BY MANIFEST_ID DESC LIMIT 1 
```

似乎是另一种方式，但我不知道它是否会比你的更有效

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T12:55:51.860

如果需要，您可以使用 Order By 来完成，尽管使用 MAX 很好。

```
SELECT MANIFEST_ID FROM MANIFEST_MSS.dbo.Manifest where Main_Port = x ORDER BY MANIFEST_ID DESC LIMIT 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T12:56:43.773

MAX不给你最后，它给你更大的价值。这很糟糕，因为它必须扫描所有行才能获得更大的值。

我会这样做：

```
SELECT *
FROM MANIFEST_MSS.dbo.Manifest
where Main_Port = x limit 1
order by ID desc 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T12:56:56.240

如果您的 Manifest_ID 列是自动增量列，那么您也可以实现以下查询：

```
 SELECT TOP 1 MANIFEST_ID FROM MANIFEST_MSS.dbo.Manifest WHERE Main_Port = X order by    MANIFEST_ID DESC 
```

# objective-c - 如何在一条线的路径中找到一个点

> ID：10534420
> 
> 赞同：0
> 
> 时间：2012-05-10T12:53:10.200
> 
> 标签：objective-c, ios, math

我在两个点​​之间画了一条线（`x1,y1`和`x2,y2`），但我需要知道它的坐标`x3,y3`远离`gapSize`点`x2,y2`。关于如何解决这个问题的任何想法（如果有帮助，程序是用objective-c编写的）？

![例子](../Images/f073c81d090dd359f1de891741fc7581.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T12:59:47.220

您可以简单地将弧度计算为

```
double rads = atan2(y2 - y1, x2 - x1); 
```

然后得到如下坐标：

```
double x3 = x2 + gapSize * cos(rads);
double y3 = y2 + gapSize * sin(rads); 
```

这是你的意思吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:59:19.070

计算 P1 和 P2 之间的距离：`d=sqrt( (y2-y1)^2 + (x2-x1)^2)`

然后`x2 = (d*x1 + gapSize*x3) / (d+gapSize)`

所以`x3 = (x2 * (d+gapSize) - d*x1) / gapSize`

相似地，`y3 = (y2 * (d+gapSize) - d*y1) / gapSize`

对不起数学。我没有尝试对其进行编码，但听起来不错。我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:14:28.113

有很多方法可以做到这一点。最简单的（对我来说）如下。我会用数学来写它，因为我什至不会拼写 C。

因此，我们希望找到点 C = {x3,y3}，给定点 A = {x1,y1} 和 B = {x2,y2}。

点之间的距离是

```
d = ||B-A|| = sqrt((x2-x1)^2 + (y2-y1)^2) 
```

沿线指向的单位向量由下式给出

```
V = (B - A)/d = {(x2 - x1)/d, (y2-y1)/d} 
```

一个距离 B 距离为 gapSize 的新点，在该单位向量的方向上是

```
C = B + V*gapSize = {x2 + gapSize*(x2 - x1)/d, y2 + gapSize*(y2 - y1)/d} 
```

# windows - TortoiseSVN 和本地网络代理

> ID：10534434
> 
> 赞同：0
> 
> 时间：2012-05-10T12:53:55.070
> 
> 标签：windows, svn, proxy, tortoisesvn

我已成功配置 TortoiseSVN 以通过 https 访问本地 Apache 服务的 Subversion 存储库。从我的 Windows 客户端配置这个场景的最初问题被发现是我在 TortoiseSVN 设置中建立的代理服务器，这在我们的本地环境中是不必要的。

但是，对于外部存储库，Web 代理是必需的。结果，我希望在 TortoiseSVN 中找到一个选项，相当于“绕过本地 Intranet 站点的代理”或建立代理绕过列表的方法，但我没有找到，也没有找到解决方法到目前为止我所做的研究。在 SO 上遇到了一些听起来很有希望的帖子，但相当于根据需要手动禁用/启用 Web 代理。

我是否遗漏了一些明显的东西，或者我只需要根据存档的位置从 TortoiseSVN 启用/禁用代理？当然，这不是不可克服的，只是有点麻烦。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:59:49.607

您应该尝试下载冻结的方式，这对我有用，您只需要在要提交/上传时启动它并且它是免费的。

# vb.net - 数据集行添加/导入无

> ID：10534437
> 
> 赞同：0
> 
> 时间：2012-05-10T12:54:03.617
> 
> 标签：vb.net, dataset, datarow

因此，当对数据库进行查询（两次）并在数据集中返回结果时，我有一个函数。它检查结果（以确保有一些结果）然后循环并从返回的数据集中抓取每一行并将其导入（复制）到不同的数据集。

我还将主键添加到列表中，因此我不会将相同的项目两次（来自第二个查询）添加到数据集中。

然后我返回数据集。

问题？查询有效并且有一个返回值。但是我打算将行导入到的数据集不保留导入的行。

请就我的方法和手头的问题提出任何建议；我一直在寻求改进！

```
Public Function GetClientsWithMonitors(ByVal argHost As FOO.Interfaces.BAR) As DataSet
    Try
        Dim localDataSet As New DataSet()
        Dim clientsWithMonitors As New DataSet()
        Dim tempList As New List(Of Integer)

        clientsWithMonitors.Clear()
        localDataSet.Clear()
        tempList.Clear()
        clientsWithMonitors.Tables.Add()

        'SQL getting monitors applied to clients
        Dim clientSQL As String = "SELECT DISTINCT c.ClientID, c.Name FROM agents a LEFT JOIN clients c ON c.ClientID = a.ClientID WHERE a.ClientID > 0"
        'SQL getting monitors applied directly to an agent
        Dim agentSQL As String = "SELECT DISTINCT c.ClientID, c.Name FROM clients c LEFT JOIN computers comp ON c.ClientID = comp.ClientID LEFT JOIN agents a ON comp.ComputerID = a.ComputerID  WHERE a.LocID = 0 AND a.ClientID = 0 AND a.ComputerID > 0"
        localDataSet = argHost.GetDataSet(clientSQL)
        If localDataSet.Tables.Count > 0 AndAlso localDataSet.Tables(0).Rows.Count > 0 Then
            For Each row As DataRow In localDataSet.Tables(0).Rows
                If Not tempList.Contains(CInt(row("ClientID").ToString())) Then
                    Dim clientID As Integer = CInt(row("ClientID").ToString())
                    clientsWithMonitors.Tables(0).ImportRow(row)
                    tempList.Add(clientID)
                End If
            Next
        End If
        If localDataSet.Tables.Count > 0 AndAlso localDataSet.Tables(0).Rows.Count > 0 Then
            localDataSet.Clear()
            localDataSet = argHost.GetDataSet(agentSQL)
            For Each row As DataRow In localDataSet.Tables(0).Rows
                If Not tempList.Contains(CInt(row("ClientID").ToString())) Then
                    Dim clientID As Integer = CInt(row("ClientID").ToString())
                    clientsWithMonitors.Tables(0).ImportRow(row)
                    tempList.Add(clientID)
                End If
            Next
        End If
        Return clientsWithMonitors
    Catch ex As Exception
        LogEventViaHost(argHost, "Error Getting dataset of clients with a specified monitor" & ex.StackTrace & " " & ex.Message)
        Return Nothing
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:14:08.273

列名必须明确说明；出于某种原因，我认为数据集会隐式地从导入的数据行中继承列名。

```
clientsWithMonitors.Tables(0).Columns.Add("Foo")
clientsWithMonitors.Tables(0).Columns.Add("Bar") 
```

# web-services - Salesforce 网络服务错误

> ID：10534440
> 
> 赞同：0
> 
> 时间：2012-05-10T12:54:13.243
> 
> 标签：web-services, soap, salesforce, apex-code

我从调用 Web 服务的类中收到以下错误。

```
"You have uncommitte​d work pending. Please commit or rollback before calling out" 
```

这是调用 Web 服务的类：

```
global class myWS   
{   

   WebService static string invokeExternalWs(string childValue, string parentValue)   
    {   
        HttpRequest req = new HttpRequest();   
        req.setEndpoint('https://externalURL/Services');   
        req.setMethod('POST');   
        req.setHeader('Content-Type', 'text/xml; charset=utf-8');   
        req.setHeader('SOAPAction', 'http://externalService/externalMethod');  
        string b = '--soap request goes here--';   
        req.setBody(b);   
        Http http = new Http();   
        try {   
          //Execute web service call here 
          String xObjectID ='';   
          HTTPResponse res = http.send(req);
          Dom.Document doc = res.getBodyDocument();
          String soapNS = 'http://schemas.xmlsoap.org/soap/envelope/'; 
          Dom.XmlNode root = doc.getRootElement();
          for(dom.XmlNode node1 : root.getChildElements()) {
               for(dom.XmlNode node2 : node1.getChildElements()) {
                   for(dom.XmlNode node3 : node2.getChildElements()) {
                      for(dom.XmlNode node4 : node3.getChildElements()) {
                          xObjectID = node4.getText();
                       }
                   }
               }
             }

         return xObjectID;
       } catch(System.CalloutException e){   
          return 'ERROR:' + e;   
     }          
}   
} 
```

更新：这是我正在执行 myWS 的课程

```
public void applyURLString(ID ArgBuildID) {

    Builder__c current_build = [SELECT id, name, LLURL__c, column1, column2, Opportunity__c
                FROM Builder__c
                WHERE id = :ArgBuildID];

        if(current_build.LLURL__c == null || current_build.LLURL__c.trim().length() == 0)
            {

                String tmpFolderName = current_build.column1 + ' - ' + current_build.column2;

                String LLWSResultPattern = '[0-9]{2,}';

                String myWSXMLResult = myWS.invokeExternalWs(tmpFolderName,'test');

                Boolean LLWSPatternMatched = pattern.matches(LLWSResultPattern,myWSXMLResult);
                if(LLWSPatternMatched)
                {
                    Opportunity oppt = [SELECT Id,Name 
                                        FROM Opportunity 
                                        WHERE Id = :current_build.Opportunity__c
                                        LIMIT 1];   
                    oppt.LLURL__c = 'https://someService/' + myWSXMLResult;
                    update oppt;
                } 
            } 
    } 
```

更新 #2 - 这里是 applyURLString() 被执行的地方。这是在我的 HTTP 请求之前执行 DML 的唯一位置。但是我需要新的 Builder 记录的 ID。

```
Builder__c insertBuild = new Builder__c();      
insertBuild.Opportunity__c = opportunityId;
insertBuild.Product_Group__c = selectedBuild.Product_Group__c;
insertBuild.Manual_Build_Product__c = selectedBuild.Manual_Build_Product__c;

insert insertBuild;

applyURLString(insertBuild.Id); 
```

任何想法为什么会发生此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:59:00.177

@JCD 使用 @future 注释的建议解决了我的问题。再次感谢！

# php - JavaScript Ajax 请求与 jQuery $.ajax

> ID：10534441
> 
> 赞同：3
> 
> 时间：2012-05-10T12:54:16.973
> 
> 标签：php, javascript, ajax, json, zend-framework

**注意**：我粘贴了更多的代码，而不仅仅是 ajax 调用，因为代码是（部分）导致问题的原因。但是，我不认为是这样，因此您最好将注意力集中在`ajax`and`jAjax`功能上。
另请注意，由于对此问题有评论（带有赞成票）说我的代码很难破译，我很乐意澄清需要澄清的内容，如果这可以证明是找到问题的关键。
谢谢。

* * *

事情就是这样。我正在尝试抛弃 jQuery，因为我唯一使用的是`$.ajax()`方法，并且包含一个像 jQuery 这样的整个库仅用于 1 个功能是 IMO 疯狂的。无论如何，我什至不需要该`$.ajax`方法的全部功能，因此我编写了自己的`ajax`函数。

问题是：它不起作用，我似乎无法弄清楚为什么。我正在尝试将对象发送到服务器（特别是：控制器中的 ajaxAction - 使用 Zend FW）。下面是 javascript 代码，以及 firebug 控制台告诉我的摘要。

```
if (!String.prototype.trim)
{
    String.prototype.trim = function()
    {
        "use strict";
        return this.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
    };
}

function getUrl(action,controller)
{
    var base,uri;
    base = window.location.href.replace('http://'+window.location.host,'');
    if (base.length > 1)
    {
        base = base.substring(1,base.length).split('/');
        controller = controller || base[0];
        base[0] = controller || base[0];
        base[1] = action || base[1];
        return '/'+base.join('/');
    }
    controller = controller || 'index';
    action = action || 'ajax';
    return base+controller+'/'+action;
}

function formalizeObject(obj,recursion)
{
    recursion = recursion || false;
    if (typeof obj !== 'object')
    {
        throw new Error('no object provided');
    }
    var ret = '';
    for (var i in obj)
    {
        if (!obj.hasOwnProperty(i) || typeof obj[i] === 'function')
        {
            continue;
        }
        if (recursion)
        {
            ret +='['+i+']';
        }
        else
        {
            ret += (ret.length > 0 ? '&' : '') + i.toString(); 
        }
        if (typeof obj[i] === 'object')
        {
            ret += formalizeObject(obj[i],true);
            continue;
        }
        ret += '='+obj[i].toString();
    }
    if (recursion)
    {
        return ret;
    }
    return encodeURI(ret);
}

function success()
{
    if (this.readyState===4 && this.status===200)
    {
        console.log(this.responseText);
    }
}

function ajax(str,url,method,json)
{
    var ret;
    json = json || false;
    str = str || {};
    method = method || 'POST';
    url = url || getUrl();
    str = 
    str = (typeof str === 'object' ? str : {data:str});
    try
    {
        ret = new XMLHttpRequest();
    }
    catch (error)
    {
        try
        {
            ret= new ActiveXObject('Msxml2.XMLHTTP');
        }
        catch(error)
        {
            try
            {
                ret= new ActiveXObject('Microsoft.XMLHTTP');
            }
            catch(error)
            {
                throw new Error('no Ajax support?');
            }
        }
    }
    if (typeof ret !== 'object')
    {
        throw new Error('No Ajax, FFS');
    }
    ret.open(method, url, true);
    ret.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    ret.setRequestHeader('Content-type', (json ? 'application/json' : 'application/x-www-form-urlencode'));
    ret.onreadystatechange = success;
    ret.send((json ? JSON.stringify(str) : formalizeObject(str)));
    return true;
}

function jAjax(str,url)
{
    $.ajax(
    {
        url : url,
        data: str,
        type: 'POST',
        success: function(res)
        {
            console.log(res);
        }
    });
} 
```

我尝试发出 Ajax 请求的四种方式：

```
jAjax({data:{foo:'bar'}},getUrl());//1
jAjax({data:{foo:'bar'}},getUrl(),true);//2
ajax({data:{foo:'bar'}},getUrl());//3
ajax({data:{foo:'bar'}},getUrl(),true);//4 
```

1.  `jAjax({data:{foo:'bar'}},getUrl());`：这工作得很好：

    > []{"ajax":true,"controller":"index","action":"ajax","module":"default","identity":{},"data":{"foo":" Bar"}} 参数：data[foo] 'bar' 和来源：data%5Bfoo%5D=Bar（来自 FB 控制台中的 POST 选项卡）标题：application/x-www-form-urlencoded; charset=UTF-8
    > 所有这些都发送到以下网址：[http ://www.foo.bar/index/ajax?data%5Bfoo%5D=bar](http://www.foo.bar/index/ajax?data%5Bfoo%5D=bar)

2.  但是，这不起作用：

    > []{"ajax":true,"controller":"index","action":"ajax","module":"default","identity":{}} 是 FB 中的响应 POST 选项卡：JSON 数据: {foo:'Bar'} source: {"data":{"Foo":"Bar"}} （但相同的 url 是 case 1） Header: json; 字符集=UTF-8

3.  ***这是一个大问题***：完整的请求 url 与案例 1 中的 url 相同，但是当我查看 FB 控制台中的 POST 选项卡（检查请求）时，标题也是如此（检查请求）这是我能找到的唯一区别：

    > 案例1：参数：data[foo] 'bar' 来源：data%5Bfoo%5D=Bar
    > 在这种情况下，我看不到参数部分，只有： 来源：data%5Bfoo%5D=Bar

4.  与case2相同，除了url，我想我忘记通过了`encodeURI`。这个案子现在不那么重要了。我想/希望在我弄清楚案例 3 有什么问题的那一刻，我就能解决这个问题。

在所有 4 种情况下，请求都被发送和接收。控制器动作如下：

```
public function ajaxAction()
{
    $this->_helper->layout->disableLayout();
    $this->getHelper('viewRenderer')->setNoRender();
    $this->_helper->getHelper('AjaxContext')->addActionContext( 'ajax' , 'json' )
                                            ->initContext('json');
    if($this->getRequest()->isPost() && $this->getRequest()->isXmlHttpRequest())
    {
        echo json_encode(array_merge(array('ajax'=>true),$this->_getAllParams()));
    }
    else
    {
        throw new Exception('no ajax call made??');
    }
} 
```

由于我收到一个 JSON 字符串，我确定请求已发布，并且具有正确的`XMLHttpRequest`标头。那么，为什么我不能发布 JSON 对象？更重要的是：为什么案例 3 不起作用？jQuery 做了什么我不知道的事情？是什么让案例 1 起作用，但不是案例 3？

PS：这可能无关紧要，但在疯狂的时刻，我尝试将这个：添加`ret.setRequestHeader('Connection','close');`到`ajax`函数中，但我注意到，在发出的标头中，`Connection`设置为保持活动状态。也许这会给某人一个关于出了什么问题的线索？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:19:00.203

如果有人想知道出了什么问题：

```
ret.setRequestHeader('Content-type', 'application/x-www-form-urlencode'); 
```

应该是“x-www-form-urlencoded”，最后是“d”：

```
ret.setRequestHeader('Content-type', 'application/x-www-form-urlencoded'); 
```

发送一个*形式化*的对象现在可以工作了，我可以摆脱 jQuery :-)

# c# - 如何为 SQL 创建 CLR 函数？

> ID：10534444
> 
> 赞同：-3
> 
> 时间：2012-05-10T12:54:20.403
> 
> 标签：c#, sql, sql-server-2008, tsql

我必须编写一个 CLR 函数来转换旧数据。我真的对做这样的事情一无所知。我真的不知道从哪里开始。有人可以帮助我并告诉我步骤吗？我需要创建一个 C 函数项目等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:59:16.267

1.  你想要一个新的 SQLProject（来自 vs）
2.  添加存储过程
3.  编码您的更改
4.  部署。

[http://msdn.microsoft.com/en-us/library/5czye81z(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/5czye81z(v=VS.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:01:13.427

您可以在 C# 中执行此操作。

阅读 Microsoft 网站上有关 CLR 函数的 MSDN 文档。

创建 CLR 函数：http: [//msdn.microsoft.com/en-us/library/ms189876.aspx](http://msdn.microsoft.com/en-us/library/ms189876.aspx)

如何：创建和运行 CLR SQL Server 用户定义函数[http://msdn.microsoft.com/en-us/library/w2kae45k%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/w2kae45k%28v=vs.80%29.aspx)

这些站点提供了 C# 示例和解释。

# sql - 选择一个值到一个变量中

> ID：10534445
> 
> 赞同：0
> 
> 时间：2012-05-10T12:54:23.353
> 
> 标签：sql, sql-server, tsql

我正在玩 t-sql 并希望能够选择一些变量。

目前我只想为数据库中的每个表获取一个计数（*）并打印它。

当我尝试以下操作时：

> EXEC('SELECT COUNT(*) FROM '+ @table_name)

这给出了所有行的计数，现在，我想将 COUNT(*) 存储到一个变量中。为了实现这一点，我已经宣布。我尝试了几种不同的方法，其中包括：

> EXEC('SELECT' + @row_count +' = COUNT(*) FROM '+ @table_name)

这会产生错误（消息 102，级别 15，状态 1，行 1 '=' 附近的语法不正确。）。

知道如何正确表达这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:57:27.613

你必须使用`sp_executesql`.

查看[这篇文章](http://msdn.microsoft.com/en-us/library/ms188001.aspx)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:59:33.617

您需要从查询中提供输出变量并指定它用于输出：

```
declare @table_name nvarchar(100)
declare @row_count int
declare @sql nvarchar(max)

set @table_name = 'YOUR TABLE NAME'

set @sql = N'SELECT @row_count = COUNT(*) FROM '+ @table_name
exec sp_executesql @sql, N'@row_count int output', @row_count = @row_count output
print @row_count 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:13:07.990

通过查看数据库元数据，有一种更有效的方法来获取表中的行数。这是一个替代解决方案：

```
declare @NumRows int;
select @NumRows = sum(rows)
from <database>.sys.partitions P join
     <database>.sys.tables T
      on T.[object_id] = P.[object_id]
where index_id IN (0,1) AND T.[type] = 'U' and t.name = '<table>' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:58:34.337

可能会这样做：

```
declare @rowcount int  
declare @table_name nvarchar(10)
declare @sql nvarchar(max);
set @table_name = N'test';
set @sql = N'SELECT COUNT(*) FROM '+@table_name;
execute sp_executesql @sql,N'@rowcount int output',@rowcount = @rowcount output; 
select @rowcount; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T13:01:21.273

变量必须在适当的上下文中声明。尝试

```
declare @table_name varchar(50)

set @table_name ='users'
EXEC('declare @rcnt int;SELECT @rcnt = COUNT(*) FROM '+ @table_name+';select @rcnt ') 
```

# stream - cherrypy 服务多个请求/每个连接

> ID：10534449
> 
> 赞同：2
> 
> 时间：2012-05-10T12:54:34.217
> 
> 标签：stream, zip, cherrypy

我有这个代码（动态压缩和流）

```
@cherrypy.expose
def backup(self):
    path = '/var/www/httpdocs'
    zip_filename = "backup" + t.strftime("%d_%m_%Y_") + ".zip"

    cherrypy.response.headers['Content-Type'] = 'application/zip'
    cherrypy.response.headers['Content-Disposition'] = 'attachment; filename="%s"' % (zip_filename,)

    #https://github.com/gourneau/SpiderOak-zipstream/blob/3463c5ccb5d4a53fc5b2bdff849f25bae9ead761/zipstream.py
    return ZipStream(path)

backup._cp_config = {'response.stream': True} 
```

我面临的问题是当我下载文件时，我无法浏览任何其他页面或发送任何其他请求，直到下载完成......我认为问题是cherrypy一次不能服务多个请求/每个用户

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T12:57:56.883

当您说“每个用户”时，您的意思是另一个请求可能会进入不同的“会话”并且可以继续吗？

在这种情况下，您的问题几乎可以肯定是由于cherrypy 中的会话锁定。您可以阅读更多关于它的[会话代码](https://bitbucket.org/cherrypy/cherrypy/src/b0c48210b250/cherrypy/lib/sessions.py)。由于默认情况下会话解锁较晚，因此在仍在处理备份时会话不可用于其他线程（连接）。

尝试`tools.sessions.locking = 'explicit'`在 _cp_config 中为该处理程序设置。由于您没有向会话写入任何内容，因此根本不锁定可能是安全的。

祝你好运。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:07:12.460

此外，从[常见问题解答](http://docs.cherrypy.org/stable/appendix/faq.html#server-features-and-configuration)：

“CherryPy 当然可以处理多个连接。罪魁祸首通常是你的浏览器。例如，Firefox 一次只会打开两个到同一主机的连接（如果其中一个是用于 favicon.ico，那么你”减少到一个）。尝试增加浏览器建立的并发连接数，或者使用不是浏览器的工具测试您的站点，例如 siege、Apache 的 ab 甚至 curl。

# wcf - receiveTimeout 在不活动后中断通信通道？

> ID：10534452
> 
> 赞同：1
> 
> 时间：2012-05-10T12:54:43.790
> 
> 标签：wcf, timeout

**你好，**

我有一个托管在 IIS 中的 WCF 服务，它具有以下绑定配置：

```
 <binding name="netTcpRegular" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:00:20" sendTimeout="00:20:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="10" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          <reliableSession ordered="true" inactivityTimeout="infinite" enabled="false"/>
          <security mode="None">
            <transport clientCredentialType="None" />
          </security>
        </binding> 
```

当客户端（保持通道打开）登录到 WCF 服务时，通道将在 20 秒后抛出错误异常，而我什么也不做，甚至没有与服务通信？因此，在 20 秒不活动后，通信将失败。

receiveTimeout 应该只影响通话进行的时间，对吗？那么，除了让通道打开并准备好进行服务调用之外什么都不做时，它怎么会超时呢？

**编辑：**

通过使用 WCF 日志，我得到了以下异常：

```
<DataItem>
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Error">
<TraceIdentifier>http://msdn.microsoft.com/sv-SE/library/System.ServiceModel.Diagnostics.ThrowingException.aspx</TraceIdentifier>
<Description>Throwing an exception.</Description>
<AppDomain>/LM/W3SVC/1/ROOT/MyTest-1-129811288584315020</AppDomain>
<Exception>
<ExceptionType>System.ServiceModel.CommunicationException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '10675199.02:48:05.4775807'.</Message>
<StackTrace>
at System.ServiceModel.Channels.SocketConnection.EndRead()
at System.ServiceModel.Channels.PreReadConnection.EndRead()
at System.ServiceModel.Channels.DelegatingConnection.EndRead()
at System.ServiceModel.Channels.DelegatingConnection.EndRead()
at System.ServiceModel.Channels.TracingConnection.EndRead()
at System.ServiceModel.Channels.SessionConnectionReader.OnAsyncReadComplete(Object state)
at System.ServiceModel.Channels.TracingConnection.TracingConnectionState.ExecuteCallback()
at System.ServiceModel.Channels.TracingConnection.WaitCallback(Object state)
at System.ServiceModel.Channels.SocketConnection.FinishRead()
at System.ServiceModel.Channels.SocketConnection.AsyncReadCallback(Boolean haveResult, Int32 error, Int32 bytesRead)
at System.ServiceModel.Channels.OverlappedContext.CompleteCallback(UInt32 error, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.ServiceModel.CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '10675199.02:48:05.4775807'. ---&gt; System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host
   --- End of inner exception stack trace ---</ExceptionString>
<InnerException>
<ExceptionType>System.Net.Sockets.SocketException, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>An existing connection was forcibly closed by the remote host</Message>
<StackTrace>
at System.ServiceModel.Channels.SocketConnection.EndRead()
at System.ServiceModel.Channels.PreReadConnection.EndRead()
at System.ServiceModel.Channels.DelegatingConnection.EndRead()
at System.ServiceModel.Channels.DelegatingConnection.EndRead()
at System.ServiceModel.Channels.TracingConnection.EndRead()
at System.ServiceModel.Channels.SessionConnectionReader.OnAsyncReadComplete(Object state)
at System.ServiceModel.Channels.TracingConnection.TracingConnectionState.ExecuteCallback()
at System.ServiceModel.Channels.TracingConnection.WaitCallback(Object state)
at System.ServiceModel.Channels.SocketConnection.FinishRead()
at System.ServiceModel.Channels.SocketConnection.AsyncReadCallback(Boolean haveResult, Int32 error, Int32 bytesRead)
at System.ServiceModel.Channels.OverlappedContext.CompleteCallback(UInt32 error, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.Net.Sockets.SocketException (0x80004005): An existing connection was forcibly closed by the remote host</ExceptionString>
<NativeErrorCode>2746</NativeErrorCode>
</InnerException>
</Exception>
</TraceRecord>
</DataItem> 
```

* * *

```
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Error">
<TraceIdentifier>http://msdn.microsoft.com/sv-SE/library/System.ServiceModel.Diagnostics.ThrowingException.aspx</TraceIdentifier>
<Description>Throwing an exception.</Description>
<AppDomain>/LM/W3SVC/1/ROOT/MyTest-1-129811288584315020</AppDomain>
<Exception>
<ExceptionType>System.ServiceModel.CommunicationException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '10675199.02:48:05.4775807'.</Message>
<StackTrace>
at System.ServiceModel.Channels.SocketConnection.EndRead()
at System.ServiceModel.Channels.PreReadConnection.EndRead()
at System.ServiceModel.Channels.DelegatingConnection.EndRead()
at System.ServiceModel.Channels.DelegatingConnection.EndRead()
at System.ServiceModel.Channels.TracingConnection.EndRead()
at System.ServiceModel.Channels.SessionConnectionReader.OnAsyncReadComplete(Object state)
</StackTrace>
<ExceptionString>System.ServiceModel.CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '10675199.02:48:05.4775807'. ---&gt; System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host
   --- End of inner exception stack trace ---
   at System.ServiceModel.Channels.SocketConnection.EndRead()
   at System.ServiceModel.Channels.PreReadConnection.EndRead()
   at System.ServiceModel.Channels.DelegatingConnection.EndRead()
   at System.ServiceModel.Channels.DelegatingConnection.EndRead()
   at System.ServiceModel.Channels.TracingConnection.EndRead()
   at System.ServiceModel.Channels.SessionConnectionReader.OnAsyncReadComplete(Object state)</ExceptionString>
<InnerException>
<ExceptionType>System.Net.Sockets.SocketException, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>An existing connection was forcibly closed by the remote host</Message>
<StackTrace>
at System.ServiceModel.Channels.SessionConnectionReader.GetPendingMessage()
at System.ServiceModel.Channels.SessionConnectionReader.EndReceive()
at System.ServiceModel.Channels.SynchronizedMessageSource.ReceiveAsyncResult.OnReceiveComplete(Object state)
at System.ServiceModel.Channels.SessionConnectionReader.OnAsyncReadComplete(Object state)
at System.ServiceModel.Channels.TracingConnection.TracingConnectionState.ExecuteCallback()
at System.ServiceModel.Channels.TracingConnection.WaitCallback(Object state)
at System.ServiceModel.Channels.SocketConnection.FinishRead()
at System.ServiceModel.Channels.SocketConnection.AsyncReadCallback(Boolean haveResult, Int32 error, Int32 bytesRead)
at System.ServiceModel.Channels.OverlappedContext.CompleteCallback(UInt32 error, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.Net.Sockets.SocketException (0x80004005): An existing connection was forcibly closed by the remote host</ExceptionString>
<NativeErrorCode>2746</NativeErrorCode>
</InnerException>
</Exception>
</TraceRecord> 
```

**编辑：**

客户端绑定：

```
<binding name="NetTcpBinding_IMyClientServiceRegular" closeTimeout="00:01:00" openTimeout="00:00:30" receiveTimeout="00:00:30" sendTimeout="00:00:30" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="10" maxReceivedMessageSize="2147483647">
  <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
  <reliableSession ordered="true" inactivityTimeout="infinite" enabled="false"/>
  <security mode="None">
    <transport clientCredentialType="None"/>
  </security>
</binding> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:15:15.543

您误解了 ReceiveTimeout 的[含义](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.binding.receivetimeout.aspx)。它是“连接可以保持非活动状态的时间间隔，在此期间没有收到应用程序消息，然后断开连接”。要将其扩展到无穷大，您需要[启用可靠会话](http://nogeekhere.blogspot.co.uk/2009/04/why-will-wcf-client-be-disconnected.html)。希望这可以清除它。

编辑： [这](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/84551e45-19a2-4d0d-bcc0-516a4041943d/)是进一步的描述，我认为您所追求的属性是 sendtimeout

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:16:38.757

接收超时是等待接收所有数据的时间。

通道一打开，时间就开始运行，它不会检测到您发送的第一个字节，然后启动计时器。

这有点像出租车，在你挥手时启动计程器，而不是在你上车时。

# ssis - 如何从 dtexec 输出中删除 unpivot 转换的未使用列警告？

> ID：10534453
> 
> 赞同：1
> 
> 时间：2012-05-10T12:54:48.843
> 
> 标签：ssis, warnings

`Pivot key value column name`使用 Unpivot 数据流项时，如何删除列中出现的有关“未使用列”的警告...

```
Warning: 2012-05-10 13:30:19.97
   Code: 0x80047076
   Source: Import Client_Categories Table SSIS.Pipeline
   Description: The output column "Client_Categories" (442) on output 
   "Unpivot Output" (224) and component "Unpivot" (222) is not 
   subsequently used in the Data Flow task. Removing this unused output 
   column can increase Data Flow task performance.
End Warning 
```

我的意思是实际上删除警告，而不是仅仅不在输出中显示它......我们想`DTEXEC`使用该`/WarnAsError`选项运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:18:59.070

我发现摆脱似乎有效的“未使用列”警告的一种破解解决方案是将 a 添加`Script Component`到`Data Flow`并让它使用未使用的枢轴键值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:34:53.943

我认为这是一个全局配置（警告），与特定组件无关，就我而言，它无法完成。

检查此[链接](https://stackoverflow.com/questions/9670381/ssis-warning-level)

它提到了“日志”，但我认为原理是一样的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:19:57.730

另一种解决方案是在使用`Union All`列的最新组件之后使用组件，并删除组件中的列`Union All`。

这样，该列在管道的其余部分中就真的消失了。

# asp.net - 与会话状态关闭相关的问题

> ID：10534458
> 
> 赞同：1
> 
> 时间：2012-05-10T12:55:30.997
> 
> 标签：asp.net, .net, c#-4.0, session-state

在我的网络配置中，我关闭了会话状态

```
<sessionState mode="Off" /> 
```

当我运行我的应用程序时，我看到生成的*ASP.net_sessionid cookie 带有**“当我关闭浏览器时”*到期。 *![在此处输入图像描述](../Images/292be0e515c7ef5c1a657e1308a4aaa8.png)*

 *1 .如果我的会话状态关闭，这个cookie是如何生成的？

2.  在这种情况下（会话状态关闭时）如何更改会话超时？

3.  *会话超时和ASP.net_sessionid* cookie 过期时间之间有什么关系？

4.  如果我的会话状态关闭，我在 Global.asax.cs 中的 Session End 事件会触发吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:34:07.237

我的猜测是浏览器正在显示页面的缓存版本。如果是 IE 检查工具 - 选项 - 常规 - 浏览历史并单击“设置”按钮。确保“检查更新版本的商店页面”设置为“每次访问网页时”。*

# asp.net-mvc-3 - DbContext 声明 - 框架 4.1 - MVC 3.0

> ID：10534464
> 
> 赞同：0
> 
> 时间：2012-05-10T12:55:53.587
> 
> 标签：asp.net-mvc-3, controller, entity-framework-4.1, ado.net-entity-data-model, dbcontext

在控制器中声明“DBContext”的全局变量然后将其用于所有数据库操作是否正确？

例子：

```
public class ProductController : Controller
{
    private readonly DBContextEntities _db = new DBContextEntities();

    public ActionResult Index()
    {
     var products = _db.Products.ToList();
     return View(products);
    }

    public ActionResult Create()
    {
     _db.Products.AddObject(new Product{Name="x",Price="5.2"});
     _db.SaveChanges();
     return View(products);
    } 
```

}

请指教，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:05:55.220

我曾多次尝试权衡这一点。我得出的结论是，在大多数情况下应该没问题。这就是我认为应该没问题的“原因”。

所有建议都建议尽可能短地保持上下文打开，这是为了避免大量实体被加载并保存在内存中。这会导致您认为应该在每个方法中创建和处置上下文，而不是在类中全局。

由于 HTTP 请求的持续时间很短，因此具有全局可用的上下文不应该是主要开销，每次创建上下文所需的资源将超过在请求期间保持其打开的好处。

这个答案是从 webforms 的角度来看的，如果 MVC 控制器的存活时间超过请求并且恐怕需要不同的响应，我不是 100%。

我认为关键是不要将上下文设置为任何静态的东西，或者打算在应用程序期间存在的东西，因为随着内存中实体数量的增加，这将导致您消耗大量内存。

您可能会争辩说，不明确地将实现 IDisposable 的东西放在 using 块中是一个坏主意，我同意这一点。

（免责声明：猜测段落！）如果页面抛出异常或类似情况，我不确定资源是否可能保持打开状态。我认为 99.9% 的时间你会没事的，但在极少数情况下资源没有被正确处理

# c# - 使用 NUnit 进行调试；忽略异常，只在断点处暂停

> ID：10534468
> 
> 赞同：0
> 
> 时间：2012-05-10T12:56:14.663
> 
> 标签：c#, visual-studio-2010, unit-testing, nunit

我正在通过附加`nunit-x86.exe`流程来调试我的单元测试，该流程运行良好。我的一些测试断言抛出异常，调试暂停并让我知道*出了点问题*。对于任何正常的调试过程，这都会很方便，但是在单元测试时会有点痛苦。所以我问：

**有什么办法，在调试时，只在断点处暂停，并忽略异常？**

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:58:31.377

试用 Visual Studio 菜单`Debug > Exceptions...`

取消选中列中的所有项目`Break when an exception is Thrown`。您还可以在此处禁用未处理异常的中断。

# algorithm - 使用附加条件查找数组中可能的序列数

> ID：10534471
> 
> 赞同：5
> 
> 时间：2012-05-10T12:56:24.693
> 
> 标签：algorithm, data-structures

有一个序列{a1，a2，a3，a4，...... aN}。运行是序列的最大严格递增或严格递减的连续部分。例如。如果我们有一个序列 {1,2,3,4,7,6,5,2,3,4,1,2} 我们有 5 次可能的运行 {1,2,3,4,7}, {7, 6,5,2}、{2,3,4}、{4,1} 和 {1,2}。

给定四个数字 N、M、K、L。计算 N 个数字的可能序列的数量，其中恰好有 M 次运行，序列中的每个数字小于或等于 K，并且相邻数字之间的差小于等于到 L

这个问题是在一次采访中被问到的。

我只能想到一个蛮力解决方案。**这个问题的有效解决方案是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:26:18.447

这可以改写为重复问题。将您的问题视为找到 #(N, M) （假设 K 和 L 是固定的，它们用于重复条件，因此相应地传播）。现在从更受限制的计数函数 A(N, M; a) 和 D(N, M, a) 开始，其中 A 对最后一次运行升序的集合进行计数，D 对最后一次运行降序的集合进行计数，a 是集合中的最后一个元素。

用 A(N, M; a) 和 D(N, M; a) 表示 #(N, M) （它是所有允许的 a 的总和）。您可能会注意到两者之间存在关系（例如反射 A(N, M; a) = D(N, M; Ka)），但这对于计算来说并不重要，除了加快表格填充速度。

现在 A(N, M; a) 可以表示为 A(N-1, M; w), A(N-1, M-1; x), D(N-1, M; y) 和D（N-1，M-1；z）。这个想法是，如果你从一组大小 N-1 开始，并且知道最后一次运行的方向和最后一个元素的值，你就知道添加元素 a 是添加到现有运行还是添加运行。因此，您可以计算从前一个案例的可能性中获得您想要的东西的可能方法的数量。

我会让你把这个递归写下来。请注意，这是您考虑 L（仅将遵守 L 距离限制的那些）和 K（寻找最终情况）的地方。

使用 A(1, 1; a) = 1, A(1, x>1; a) = 0 的事实终止递归（对于 D 也是如此）。

现在，由于这是一个多重递归，请确保您的实现将结果存储在一个表中，并从尝试查找开始（通常称为动态编程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:20:50.413

使用动态规划。对于子字符串中的每个数字，维护最大增加和最大减少子序列的单独计数。当您将新数字增量添加到末尾时，您可以使用这些计数来更新新数字的计数。复杂度：O(n^2)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T13:33:01.730

我想您所说的“蛮力解决方案”是指“涉及 N、M、K、L 上的嵌套循环的直接解决方案”？有时，简单的解决方案就足够了。直接解决方案足够好的情况之一是您没有更好的解决方案。另一个时候是数字不是很大的时候。

有了这个，我会以相反的方向写循环，或者类似的东西。我是说：

1.  创建 2 个辅助数据结构，一个包含数字 <=K 的索引，一个用于与邻居差 <=L 的数字的索引。
2.  遍历数字列表并填充上述辅助数据结构。
3.  找到这两个数据结构中值的交集；这些将是开始搜索跑步的有趣地点的索引。
4.  看看每个有趣的地方。

除非有人证明，否则这是最有效的解决方案。

# jquery - 使用 preventDefault() 时如何提交表单？

> ID：10534474
> 
> 赞同：0
> 
> 时间：2012-05-10T12:56:34.443
> 
> 标签：jquery, ajax, codeigniter

我有一个表格，我试图实现它的 tinuy jquery ajax 代码。但问题是我使用 preventDefault() 来阻止表单自动提交。现在我不能让它提交，即使我想要它。

```
//after user clicks submit buttons
    $('.submit').click(function(event){
        data =  {
                    country: $('.country').val(),
                    tel_country_code: $('.country_code').val(),
                    tel_no: $('.tel_no').val()
                }

        $.ajax({
            type: 'POST',
            url: "<?php echo site_url('listings/does_business_exists');?>",
            data: data,
            dataType: "json",
            success: function(json_data){
                    if(json_data.result == false){
                        $('.error-position').html(json_data.errors);
                        $('.error-position').show();
                    }
                    else{
                        return true;
//i want form to submit here

                    }

            }

        });

        event.preventDefault();
    }) 
```

有什么建议的朋友吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:58:09.920

只需获取表格并提交即可

```
document.forms["formName"].submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:58:17.650

```
$('.submit').click(function(event){
    var $this = $(this);

    data =  {
                country: $('.country').val(),
                tel_country_code: $('.country_code').val(),
                tel_no: $('.tel_no').val()
            }

    $.ajax({
        type: 'POST',
        url: "<?php echo site_url('listings/does_business_exists');?>",
        data: data,
        dataType: "json",
        success: function(json_data){
                if(json_data.result == false){
                    $('.error-position').html(json_data.errors);
                    $('.error-position').show();
                }
                else{
                    $this.parents('form:first').trigger('submit');
                }

        }

    });

    return false;
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:58:53.600

像这样添加，遍历文档，获取表单对象，然后在上面调用提交方法。检查此链接[Document.forms](https://developer.mozilla.org/en/DOM/HTMLFormElement)

```
var obj= document.forms["yourForm"];
    obj.submit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:00:35.747

删除`event.preventDefault();`并尝试：

```
<form onsubmit = "return false;"> ... </form> 
```

# c++ - 为什么项目在 NetBeans 内部终端中的“运行”速度比在 Windows 命令提示符中快？

> ID：10534477
> 
> 赞同：3
> 
> 时间：2012-05-10T12:56:43.977
> 
> 标签：c++, performance, dll, netbeans, g++

我是这个论坛的新手，所以如果我不是第一次问的问题，请原谅。我认为这里没有必要提供代码，因为我认为它与代码无关，而且问题可能更笼统。

我在 Windows XP 中使用 MinGW (g++) 在 NetBeans 7.1.2 中编写并构建了一个 C++ 项目。Debug 版本和 Release 版本都可以正常工作并提供所需的计算输出。但是，如果我在 NetBeans 的内部终端中“运行”该项目（任一项目），我可以测量 115 到 130 微秒之间的计算时间。如果我在 Windows 命令提示符下执行 exe 文件，我测量的计算时间在 500 到 3000 微秒之间。（在具有 2 GB Ram 的 2.2 GHz Intel Core 2 Duo 上。我通过读取自复位后的 cpu 时钟滴答数并除以 cpu 频率来测量时间。）
我在另一台计算机（包括构建项目）上尝试了相同的操作，也是 2.2 GHz 和 16 GB Ram 和 Windows7。程序运行得快一点，但模式是一样的。当我从 NetBeans 但在外部终端（也是 Windows 终端）中运行项目时，情况也是如此。它适用于两个版本，调试版和发布版。

其中一项计算（不是最关键的）是快速傅立叶变换，它依赖于 fftw（[http://www.fftw.org/](http://www.fftw.org/)）“libfftw3-3.dll”库。在 NetBeans 中，它的位置是已知的，在 windows 命令提示符下，dll 必须与可执行文件位于同一目录中。

为什么程序在 NetBeans 的内部终端窗口中比在 Windows 命令提示符窗口中运行得快得多？

它可能与加载时库的动态链接有关吗？
但是，实际上在 Windows 命令提示符中比在 NetBeans 终端中花费更长的计算步骤并不依赖于 dll 中的函数（两个复数相乘）。

程序中*最耗时*和最关键的计算是两个复数类型数组的乘法，`fftw_complex`即`double[2]`：

```
for(int i = 0; i < n; ++i) {  

    double k1 = x[i][0] * (y[i][0] - y[i][1]);  
    double k2 = (y[i][1] * -1) * (x[i][0] + x[i][1]);  
    double k3 = y[i][0] * (x[i][1] - x[i][0]);  

    result[i][0] = k1 - k2;  
    result[i][1] = k1 + k3;  
} 
```

`x`并且`y`是两个复数数组，其中`[i][0]`包含实部和`[i][1]`虚部。`result`是相同类型的预分配数组。
当程序在 NetBeans 的内部终端中执行时，对于长度为 513 的数组，这个循环大约需要 5 微秒，而当我在 Windows 命令提示符下运行程序时，需要 100 微秒。我无法在 sehe 的答案中找到所有真正有用的建议的解释。

请让我知道，如果您认为它与实际代码有关，那么我会提供一些。

我一直在寻找类似的问题，但找不到任何问题。感谢您对我可能错过的其他问题和答案的任何提示或要点。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:05:25.343

根据我的评论：

> [你做很多控制台 IO 吗？微软的控制台窗口是出了名的慢]

还要查看 ENVIRONMENT 变量，特别是：

*   小路

    定义搜索路径。*搜索位置的顺序可能会影响加载时间*。要真正掌握正在做的事情，请考虑启用融合日志：

    ```
    Windows Registry Editor Version 5.00

    [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion]
    "ForceLog"=dword:00000001
    "LogFailures"=dword:00000001
    "LogPath"="C:\\Temp\\Fusion" 
    ```

    （有关重要​​提示，请参阅[如何在 .NET 中启用程序集绑定失败日志记录 (Fusion) ）](https://stackoverflow.com/questions/255669/how-to-enable-assembly-bind-failure-logging-fusion-in-net/1527249#1527249)

    这将为您提供有关搜索的位置以及搜索顺序的详细信息。

*   朗

    可能会覆盖系统语言环境（尝试从您的代码中将语言环境设置为 C）

    有关语言环境设置背后的思考的解释，请参阅[Unix 排序命令需要更长的时间，具体取决于它的执行位置？！（从 IDE 运行的程序中 ProcessBuilder 最快，终端最慢）](https://stackoverflow.com/questions/7124489/unix-sort-command-takes-much-longer-depending-on-where-it-is-executed-fastest)

    要将语言环境设置为 C ：

    ```
    std::locale::global(std::locale("")); 
    ```

    另请参阅[http://msdn.microsoft.com/en-us/library/9dzxxx2c(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/9dzxxx2c(v=vs.80).aspx)

*   家，温度

    可能会影响临时文件的位置

# jenkins - 在 Jenkins 中聚合下游参数化作业的结果

> ID：10534480
> 
> 赞同：12
> 
> 时间：2012-05-10T12:56:52.477
> 
> 标签：jenkins

我有一个 Jenkins Build 作业，它使用 Jenkins Parameterized Trigger Plugin 以测试名称作为参数触发多个 Test 作业。这会在多个执行器上启动许多测试构建，这些执行器都运行正确。

我现在想使用“聚合下游测试结果->自动聚合所有下游测试”来聚合结果。我已在 Build 作业中启用此功能并设置了指纹识别，以便将它们识别为下游作业。在 Build jobs lastBuild 页面中，我可以看到它们被识别为下游构建：

> 下游构建
> 
> 测试#1-#3

当我点击“聚合测试结果”时，它只显示最新的（测试#3）。如果作业总是运行相同的测试但我的所有测试都运行我的测试套件的不同部分，这可能是一个很好的行为。

有什么方法可以让我聚合所有相关的下游测试版本吗？

附加：如果您复制测试作业，聚合测试结果确实有效。这并不理想，因为我有大量的测试套件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T18:06:37.533

我将概述手动解决方案（如评论中所述），并在以后需要时提供更多详细信息：

让*P*为父作业，*D*为下游作业（您可以轻松地将方法扩展到多个下游作业）。

1.  *P*的实例（构建）通过构建步骤（**而不是**构建后步骤）通过[参数化触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)调用*D*并等待*D*完成。连同其他参数，*P*将一个参数传递给*D* - 我们称之为*PARENT_ID* - 基于*P*的构建的*BUILD_ID*。
******   *D*执行测试并将它们存档为工件（连同 jUnit 报告 - 如果适用）。*   *然后P*执行一个外部 Python（或内部 Groovy）脚本，该脚本通过*PARENT_ID找到**D*的适当构建（您迭代*D*的构建并检查*PARENT_ID*参数的值）。然后，该脚本将工件从*D*复制到*P*，然后*P*发布它们。*****

 *****如果使用 Python（这就是我所做的） - 使用[Python JenkinsAPI wrapper](http://pypi.python.org/pypi/jenkinsapi)。如果使用 Groovy - 利用[Groovy 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)并将您的脚本作为系统脚本运行。然后，您可以通过其[Java API](http://javadoc.jenkins-ci.org/)访问 Jenkins 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-25T07:32:22.037

我使用声明性管道提出了以下解决方案。

它需要安装“复制工件”插件。

**在下游作业**中，将带有路径（或模式路径）的“env”变量设置为结果文件：

```
post {
  always {
    steps {
      script {
        // Rem: Must be BEFORE execution that may fail   
        env.RESULT_FILE='Devices\\resultsA.xml'
      }
      xunit([GoogleTest(
        pattern: env.RESULT_FILE,
      )])
    }
  }
} 
```

请注意，我使用 xunit，但同样适用于 junit

**在父作业**中，保存构建变量，然后在后期处理中，我使用以下代码汇总结果：

```
def runs=[]

pipeline {
  agent any
  stages {
    stage('Tests') {
      parallel {
        stage('test A') {
          steps {
            script {
              runs << build(job: "test A", propagate: false)
            }
          }
        }
        stage('test B') {
          steps {
            script {
              runs << build(job: "test B", propagate: false)
            }
          }
        }
      }
    }
  }
  post {
    always {
      script {
        currentBuild.result = 'SUCCESS'
        def result_files = []
        runs.each {
          if (it.result != 'SUCCESS') {
            currentBuild.result = it.result
          }
          copyArtifacts(
            filter: it.buildVariables.RESULT_FILE,
            fingerprintArtifacts: true,
            projectName: it.getProjectName(),
            selector: specific(it.getNumber().toString())
          )
          result_files << it.buildVariables.RESULT_FILE
        }
        env.RESULT_FILE = result_files.join(',')
        println('Results aggregated from ' + env.RESULT_FILE)
      }
      archiveArtifacts env.RESULT_FILE
      xunit([GoogleTest(
        pattern: env.RESULT_FILE,
      )])
    }
  }
} 
```

请注意，父作业还设置了“env”变量，因此它本身可以由父作业聚合。*****

# visual-studio-2010 - 使用 wss 3.0 获取电子邮件管理员

> ID：10534491
> 
> 赞同：0
> 
> 时间：2012-05-10T12:57:18.610
> 
> 标签：visual-studio-2010, sharepoint-2010, wss

使用 wss 3.0 如何从网站集的管理员那里获取所有电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:04:26.597

尝试：

```
 private string[] GetEmails(SPWeb web)
   {
       List<string> emails = new List<string>();
       Guid siteID = web.Site.ID;
       Guid webID = web.ID;
       using (SPSite site = new SPSite(siteID, SPUserToken.SystemAccount))
       {
           using (SPWeb web1 = site.OpenWeb(webID))
           {
               SPUserCollection admins = web1.SiteAdministrators;
               foreach (SPUser admin in admins)
               {
                   emails.Add(admin.Email);
               }
           }
       }
       return emails.ToArray();
   } 
```

请注意，[SiteAdministrators](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.siteadministrators.aspx)要求上下文用户是[网站集审核员](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spuser.issiteauditor.aspx)。

# java - 将具有托管属性的 JSF 转换为 CDI

> ID：10534494
> 
> 赞同：3
> 
> 时间：2012-05-10T12:57:26.167
> 
> 标签：java, jsf, cdi, managed-bean, jboss-weld

我们有一个非常复杂的 JSF 托管 bean 配置文件，如下所示。
有什么方法可以将其转换为某种 CDI 配置？
现在，当我们使用它时`@Inject`，`AbcConfigFactory`它不会初始化配置文件中的值。我想这是因为我们使用 CDI 来初始化它，而不是 JSF ......或类似的东西。:)

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="1.2"
   xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd">

   <managed-bean>
      <managed-bean-name>AbcConfig</managed-bean-name>
      <managed-bean-class>com.a.b.c.AbcConfigFactory</managed-bean-class>
      <managed-bean-scope>application</managed-bean-scope>
      <managed-property>
         <property-name>abcSites</property-name>
         <list-entries>
            <value-class>com.a.b.c.SiteConfigBean</value-class>
            <value>#{SiteConfig$A}</value>
            <value>#{SiteConfig$B}</value>
         </list-entries>
      </managed-property>
   </managed-bean>

   <managed-bean>
      <managed-bean-name>SiteConfig$A</managed-bean-name>
      <managed-bean-class>com.a.b.c.SiteConfigBean</managed-bean-class>
      <managed-bean-scope>none</managed-bean-scope>
      <managed-property>
         <property-name>siteName</property-name>
         <value>A</value>
      </managed-property>

      <managed-property>
         <property-name>starConfig</property-name>
         <property-class>com.a.b.c.StarConfigBean</property-class>
         <value>#{StarConfig$A}</value>
      </managed-property>
   </managed-bean>

   <managed-bean>
      <managed-bean-name>SiteConfig$B</managed-bean-name>
      <managed-bean-class>com.a.b.c.SiteConfigBean</managed-bean-class>
      <managed-bean-scope>none</managed-bean-scope>
      <managed-property>
         <property-name>siteName</property-name>
         <value>B</value>
      </managed-property>

      <managed-property>
         <property-name>starConfig</property-name>
         <property-class>com.a.b.c.StarConfigBean</property-class>
         <value>#{StarConfig$A}</value>
      </managed-property>
   </managed-bean>

   <managed-bean>
      <managed-bean-name>StarConfig$A</managed-bean-name>
      <managed-bean-class>com.a.b.c.StarConfigBean</managed-bean-class>
      <managed-bean-scope>none</managed-bean-scope>
      <managed-property>
         <property-name>siteName</property-name>
         <value>A</value>
      </managed-property>
   </managed-bean>
</faces-config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:26:44.070

CDI 规范的初始版本中包含 XML 配置 bean，但后来被删除，只是为了在最近的规范的未来版本中重新包含 (AFAIK)。

**所以，简短的回答是**：不，你不能使用 XML 来配置 CDI bean（因为 CDI 和 JSF 是两个不同的东西，你不能在不改变的情况下重用 JSF 配置文件 - 显然）。

**您的问题的解决方案**来自[Seam Solder](http://www.seamframework.org/Seam3/SolderHome)，它使用 CDI 的扩展机制来准确添加该功能（以及更多）。但是您仍然需要重新配置您的配置以适合您的 CDI bean。

在不了解您的问题域的情况下：

如果 XML 配置是某种历史遗留问题，而*不是*由现实世界的需求所强制（例如针对不同的部署场景有不同的布线），我强烈建议转储 XML 并切换到 CDI 的基于类型安全注释的方法。有适用于所有主流用例的概念（例如用于测试的不同接线），并且您可以从使用 XML 进行“编码”的负担中解脱出来。

如果您确实需要（或仍然想要）基于 XML 的配置，Seam Solder 是您的不二之选。

# extjs - Extjs 组件查询 .down()

> ID：10534500
> 
> 赞同：2
> 
> 时间：2012-05-10T12:57:43.093
> 
> 标签：extjs, components, textfield, traversal

我似乎在为我用过一百万次的东西而苦苦挣扎！我不明白为什么突然它不再起作用了:)

我的布局

```
an accordion 
    > toolbar
    > tabs
        >tab 1
            > form.panel 1
                > textfield (alias: 'widget.mytextfield')
            > form.panel 2
        >tab 2
            > form.panel 1 
```

现在问题出在...当我在面板 1 时，我尝试访问文本字段（mytextfield）

```
//panel, being 'tab 1 > panel 1'
var textfield = panel.down('mytextfield') 
```

它只是返回空值。

我的输出

```
console.info(panel.down()); 
```

是面板的标题（所以我在正确的位置定义）->似乎找不到面板的主体

有任何想法吗？完全卡住了！

我得到'mytextfield'的唯一方法是

```
var textfield = panel.items.items[0]; 
```

但是，如果文本字段更改顺序，那么上面的代码当然不再起作用

提前致谢！

**更新**

好吧，我想通了……这很奇怪

如果我将文本字段从面板中取出并将其放在单独的文件中。然后使用`requires`. 我可以访问文本字段`.down()`

例如在我的主表单面板中

```
...
requires:['App.view.MyTextField'],
items:[{
    xtype:'mytextfield' //i can access you with .down()
},{
    xtype:'textfield',
    alias:'widget.mytextfield2' //you are showing up - but I CANT access you with .down() - only panel.items.items[0]
}]
... 
```

我的文本字段

```
Ext.define('App.view.MyTextField', {
    extend:'Ext.form.field.Textfield',
    alias:'widget.mytextfield'
}); 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:16:16.480

您如何以及在哪里获得您的父面板组件？

[http://jsfiddle.net/UBb8n/1/](http://jsfiddle.net/UBb8n/1/) — 适合我。

**更新**：

根据[文件](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Class-cfg-alias)：

> **alias**：类名的短别名列表。对于为小部件定义 xtypes 最有用。

所以请记住`items: {xtype: 'blah'}`!= `Ext.define('My.Class.Blah', {alias: 'widget.blah'})`。首先，它只是第二个的实例化。

并且`alias: 'widget.mycoolpanel'`只是用 .`Ext.widget`搜索组件的辅助函数的简写`xtype: 'widget.<…&gt;'`。

# packaging - 使用 CDBS 打包：构建包时从源包中删除 png 文件（debian）

> ID：10534501
> 
> 赞同：1
> 
> 时间：2012-05-10T12:57:46.287
> 
> 标签：packaging, deb, cdbs

我正在尝试打包一个源 tarball，其中包含带有 5 个 png 文件的 help/C/figures 目录。我想从此目录中删除 2 个 png 文件。将删除放在干净的目标中可能是一种选择，但我真的很讨厌在打包时修改我的源树。

如果我删除这两个文件，当我运行时：

```
bzr builddeb -- -S -us -uc 
```

出现此警告：

```
dpkg-source: warning: ignoring deletion of file help/C/figures/mp3.png
dpkg-source: warning: ignoring deletion of file help/C/figures/wav.png 
```

这些文件在构建时重新生成。所以我想让他们删除。

所以没有办法在 debian/rules 中使用 CDBS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:07:52.230

我没有设置任何使用 bzr-builddeb 的东西，所以我无法测试，但我猜它会将额外的参数不变地传递给 dpkg-buildpackage。如果是这样，您应该能够添加如下内容：

```
--source-option=--include-removal 
```

到`bzr builddeb`论点。那能解决你的问题吗？

# c++ - 派生类和基类之间构造函数的调用顺序

> ID：10534512
> 
> 赞同：1
> 
> 时间：2012-05-10T12:58:09.077
> 
> 标签：c++

我知道如果 B 是从 A 派生的，那么当我创建 B 的新对象时，例如 b，A 的构造函数将首先调用。当我销毁对象 b 时，B 的析构函数将首先调用。那么我这里有个问题，如果Base类中有多个构造函数，会调用哪个构造函数？为什么？

我在下面写了一个测试程序，我猜它会调用Base类中的默认构造函数，但我不确定这是否只是巧合？

```
#include <iostream>
using namespace std;

class A{
    public:
    A(int i){cout<<"A con with param"<<endl;}
    A(){cout<<"A con"<<endl;}
    ~A(){}
};

class B : public A
{
    public:
    B(int i){cout<<"B con with param"<<endl;}
    B(){cout<<"B con"<<endl;}
    ~B(){}
};

int main()
{
    B b(5);
    return 0;
} 
```

不知哪位大佬能告诉我这个问题的原因或建议解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:01:30.930

如果你写：

```
B(int i) { cout<<"B con with param"<<endl; } 
```

`A()`然后将调用构造函数（不带参数）。

如果你写：

```
B(int i): A(i) { cout<<"B con with param"<<endl; } 
```

然后`A(int)`将调用构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:02:34.317

编程中没有什么是巧合。
调用默认构造函数是因为您没有将`int`参数显式传递给基类。

要调用基类的其他构造函数，派生类构造函数需要将参数传递给基类构造函数。
所以`A(int)`要被调用，你需要有`B():A(some_int)`或`B(int):A(some_int)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:03:03.847

除非您在初始化列表中显式调用其他构造函数，否则将调用父类的空构造函数。

编辑：这是显式调用构造函数的方式：

```
B(int i) : A(i) {
  ... do stuff ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:27:10.247

初始化的顺序比这更复杂一些。*从技术上讲，它从最派生*对象的初始化列表开始。该构造函数是从创建对象的位置以常规重载分辨率选择的。*最派生*类型构造函数的初始化列表（显式或隐式）列出了基类的构造函数，并且基类的构造函数将再次使用初始化列表中调用的重载决策来选择。如果初始化列表中没有明确说明基数，编译器将注入对默认构造函数的调用。

构造的确切顺序也有点复杂，因为初始化的第一个子对象是虚拟基，按特定顺序（深度优先，从左到右，从左到右是声明的顺序）基类声明）。一旦所有虚拟基都被初始化，那么最派生类型的直接非虚拟基会被初始化，同样是按照声明的顺序（从左到右）。一旦所有的基都被初始化，成员就会按照类中的声明顺序进行初始化。

请注意，在所有情况下，代码都可以在初始化列表中显式列出子对象，并且将使用其中列出的构造函数，如果实体未列出，则使用默认构造函数。

# android - Activity 作为 ProgressDialog

> ID：10534515
> 
> 赞同：0
> 
> 时间：2012-05-10T12:58:15.847
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/75e5458305736c96b259568e3e3a6b13.png)我需要将活动作为对话框（不是警报对话框，而是进度对话框）。此活动中没有 ui 组件，因为此活动进行服务器交互，根据服务器响应启动下一个活动。此活动中只需要显示一个带有取消按钮的进度对话框。现在的问题是，在显示进度对话框之前启动此活动时，一个小的黑色矩形可见一秒钟或更长时间，当此活动完成时，它也是可见的。如何摆脱这个？或者有没有更好的方式让进度对话框作为活动？-谢谢和问候，曼朱

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ActivityAsDialogActivity.this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.main);
    String str ="Hellow World";

    txtView = (TextView)findViewById(R.id.txtview);
    this.setFinishOnTouchOutside(false);
    txtView.setText(R.string.select_dialog);

    ActivityAsDialogActivity.this.setTitle(R.string.app_name);

    mProgressHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            if (mProgress >= MAX_PROGRESS) {
                mProgressDialog.dismiss();
                Intent intent = new Intent(ActivityAsDialogActivity.this, ActivityOne.class);
                startActivity(intent);
                finish();
            } else {
                mProgress++;
                mProgressDialog.incrementProgressBy(1);
                mProgressHandler.sendEmptyMessageDelayed(0, 100);
            }
        }
    };//end of handler

    showDialog(DIALOG_PROGRESS);
    mProgressDialog.setProgress(0);
    mProgressHandler.sendEmptyMessage(0);

}//end of onCreate()

@Override
public void onBackPressed(){
    Log.d("Manju ==>"," back key pressed");
    finish();
}

@Override
public void finish(){
    Log.d("Manju ==>", " inside finish()");
    super.finish();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:04:11.540

在[创建全局对话框](http://sherifandroid.blogspot.com/2011/08/creating-global-dialogs.html)中，我使用了一个透明的活动，里面有一个对话框。我认为你可以做同样的事情。我不记得遇到过您所面临的问题，而且效果很好。

[一探究竟](http://sherifandroid.blogspot.com/2011/08/creating-global-dialogs.html)

# git - Git 分歧分支 - 还原更改

> ID：10534518
> 
> 赞同：2
> 
> 时间：2012-05-10T12:58:22.673
> 
> 标签：git, merge, conflict

一位新开发人员在一个大型 git 存储库上发疯了，真的把它搞砸了，然后推。他所有的改变都可以扔掉。

我的问题：我们的 git 主机不允许 push --force，所以我必须先拉。

如果我这样做，我有很多合并和冲突，解决它们毫无意义。恢复其他人所做的所有更改以便我可以推送当前版本的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:55:00.147

我找到了一种方法来做我需要的事情。

我在这里为处于相同情况的其他人发布我的解决方案。很可能有一种更简单的方法，所以如果您知道，请不要犹豫发布。

* * *

首先，提交所有更改，以便您拥有一个干净的工作目录。检查 git status 是否有任何更改。

然后，创建一个新的临时分支来存储您的更改。

```
git branch tmp 
```

现在你应该找到你和远程分支分歧的最后一次提交。您将需要提交哈希，例如 63da978a9a4620790b75dfbae86d658a65dc3e25。

当您找到它时，将您的主分支重置为该提交。

```
git reset --hard COMMIT 
```

现在从您的遥控器中提取更改。不应发生冲突。

```
git pull origin master 
```

现在您可以恢复应该被丢弃的提交。

```
git revert COMMIT1 
```

如果您做对了所有事情，那么只需最后一步即可完成该过程：将您的 tmp 分支与所有更改合并。

```
git merge tmp 
```

同样，不应该发生任何冲突。

您现在有一个可以再次推送的最新分支。欢呼！

```
git push origin master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:29:38.597

有一个技巧你可以试试。

```
git push origin :master 
```

这有效地删除了名为 master 的分支。好消息是，您不需要任何许可即可执行此操作（是的，我知道，很奇怪）。

一旦完成，你就可以做到

```
git push origin master:master 
```

这将完全按照您的存储库中的方式重新创建主分支。

无需处理任何冲突/合并。**这不应该**被使用（除非你的情况，这是一个简单的出路）。

该技巧允许仅删除该开发人员所做的每个提交（根本不会有任何痕迹）。

* * *

有一种“正常”的方法可以做到这一点：

*   获取分支
*   还原分支顶部的错误提交
*   推动回归
*   在分支上重新定位您的工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:14:18.400

为避免冲突，请勿合并（通过`git pull`ing），只需使用`git fetch`.

无论如何，如果您不能使用 push --force，唯一的选择是`git revert`

# sql-server - SSIS - 在数据流任务失败时杀死 Excel.exe

> ID：10534519
> 
> 赞同：0
> 
> 时间：2012-05-10T12:58:25.410
> 
> 标签：sql-server, vb.net, excel, ssis

数据流任务失败时如何在SSIS中杀死excel.exe进程？可能有多个 Excel.exe 实例从完全有效的其他程序包运行，因此我不想遍历所有实例来杀死它们。

我的问题是，在数据流任务期间，由于工作表名称不正确或缺少列，该过程有时会失败。这使 excel.exe 的实例保持运行，该实例现在是一个占用资源的孤儿任务，因此需要将其杀死。

同时，还有其他正在运行的 SSIS 包正在访问它们自己的 excel.exe 进程并且没有任何问题。

那么如何在不影响其他 excel.exe 进程的情况下杀死孤立的 excel.exe 进程呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:01:33.690

在这种情况下，您需要从 sysprocesses 获取主机的 processID 并运行 taskkill 以摆脱该进程。在 TSQL 中是这样的：

```
DECLARE @cmd VARCHAR(50)
SELECT @cmd = 'taskkill /pid ' + 
    CAST(hostprocess AS VARCHAR(10)) 
FROM sys.sysprocesses 
WHERE program_name = 'Microsoft® Excel'
AND status = 'sleeping'

xp_CmdShell (@cmd); 
```

如果您可以在生成 Excel 进程时立即获得它的 SPID，那么您可以将其存储并将其插入到上面的命令中，这会更好。阅读[taskkill](http://www.computerhope.com/taskkill.htm)功能，因为它还有一些其他可能有用的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:25:09.393

您可以使用以下脚本停止 Windows 服务

```
Public Sub Main()
    Dim controller As New ServiceController
    controller.MachineName = "."
    controller.ServiceName = "ReportServer"

    Dim status As String = controller.Status.ToString

    If status.ToLower = "running" Then
        controller.Stop()
    End If

    Dts.TaskResult = Dts.Results.Success
End Sub 
```

[ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)类上有 Finalize 方法。也许它可以杀死一个进程。

# windows - 双处理器、单工作进程上的 IIS

> ID：10534521
> 
> 赞同：0
> 
> 时间：2012-05-10T12:58:27.197
> 
> 标签：windows, iis, multiprocessing

我有一台双处理器计算机。如果我只运行一个工作进程，这个单一进程的线程会在两个处理器上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:38:12.207

是的，除非您将处理器关联配置为不这样做

# asp.net - web.config 中的 Azure ASP.NET 位置元素

> ID：10534522
> 
> 赞同：3
> 
> 时间：2012-05-10T12:58:27.813
> 
> 标签：asp.net, azure

在 Azure 模拟器中运行时，ASP.NET 项目的 web.config 功能是否有所不同？

默认情况下，即使在我的 web.config 文件中有以下内容，azure 也允许我的 Images 文件夹在事先登录的情况下提供服务：

```
<authentication mode="Forms">
  <forms loginUrl="~/login.aspx"
         name=".ASPXFORMSAUTH"
         cookieless="UseCookies"
         timeout="30"
         path="/"
         slidingExpiration="true"/>
</authentication>
<authorization>
  <allow users="?"/>    
</authorization> 
```

我的 web.config 中没有 <location> 标记。在 IIS 下单独运行 ASP 项目时，不会提供任何服务，但在 Azure 模拟器映像下运行时，仍会提供服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:44:40.067

如果您允许匿名访问该站点。然后，即使用户未通过身份验证，他仍然可以访问您网站中的页面。

> > 在 Azure 模拟器下运行时，图像仍然会得到服务。

Windows Azure 模拟器行为是正确的。如果要拒绝匿名访问，请将授权标签配置为：

```
<authorization>
  <deny users="?"/>    
</authorization> 
```

看看它是否有帮助。

此致，

明旭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:06:00.507

您是否强制刷新浏览器 ( `ctrl`+ `F5`) 或尝试不同的浏览器？浏览器喜欢缓存图像，因此它们可能仍然无法在模拟器中提供 - 它们可能是缓存版本。

使用像[Fiddler](http://www.fiddler2.com/fiddler2/)这样的工具来查看图像请求是否真正得到了服务。

# visual-studio-2010 - 为 Visual Studio 应用程序设置平台目标的目的是什么？

> ID：10534525
> 
> 赞同：30
> 
> 时间：2012-05-10T12:58:38.367
> 
> 标签：visual-studio-2010, x86, 64-bit

对于任何 VS 项目，都可以在该项目的构建属性中设置平台目标。您可以将其设置为任何 CPU、x86、x64 或 Itanium。我的问题是，如果我将此值设置为 x86，这是否意味着我无法在 x64 机器上运行该项目？如果是这样，为什么还要使用它？总是使用任何 CPU 不是更好吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-10T14:05:28.920

> 如果我将此值设置为 x86 是否意味着我无法在 x64 机器上运行该项目？

不，32 位应用程序 (x86) 在 64 位 Windows (x64) 上运行良好。所有 64 位版本的 Windows 都包含一个名为 Windows on Windows 64 (WOW64) 的 32 位兼容层。事实上，这*通常*是您想要的，因为大多数应用程序不会从 64 位编译中受益。

但是，为 64 位 (x64) 编译*确实*意味着您的应用程序不会在 32 位 (x86) 机器上运行。你可以*往回*走（64 位可以运行 32 位），但你不能往前走*（* 32 位不能运行 64 位）。

`Any CPU`正如您所指出的，编译始终是一种选择。这将允许应用程序在 32 位机器上作为 32 位应用程序 (x86) 运行，并在 64 位机器上作为 64 位应用程序 (x64) 运行。这听起来像是灵丹妙药，但也是有代价的。最值得注意的是，您需要在 32 位和 64 位环境中广泛测试您的应用程序*，*而如果您只针对 32 位环境（包括 64 位主机上的 32 位环境），您只需测试一个版本。而且额外的工作负载很少值得——大多数业务应用程序无法从 64 位环境的额外内存空间中受益，并且最终可能会因 64 位指针开销的增加而抵消任何潜在收益。

Visual Studio 本身就是完全 32 位应用程序的一个很好的例子。没有 64 位版本，但它在 64 位主机上运行良好。[这篇博](http://blogs.msdn.com/b/ricom/archive/2009/06/10/visual-studio-why-is-there-no-64-bit-version.aspx)文有助于阐明为什么决定保留 VS 32 位。您可能会发现推理有助于您自己做出决定。

同样，尽管 Microsoft Office 现在提供 64 位软件包，但 Microsoft 仍然建议*大多数*客户坚持使用 32 位版本。64 位版本存在兼容性问题，而且没有太多好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-31T21:07:49.253

如果您未指定 32 位平台，则 Microsoft 应用程序兼容性工具包无法确定应用程序是 32 位的，并且不允许您创建 32 位解决方案文件以允许应用程序在打开用户帐户控制时无需管理员凭据即可运行

# wordpress - wp_nav_menu 自定义 walker 在 li 类中添加顺序选项卡编号

> ID：10534526
> 
> 赞同：1
> 
> 时间：2012-05-10T12:58:51.213
> 
> 标签：wordpress, function, taxonomy

我想知道是否有一种方法可以通过 wp_nav_menu 为每个 li 的输出添加自动顺序 ID - 所以它们本质上是

```
 <ul>
     <li><a href="#tab1" class="tabclick active">Overview</a></li>
     <li><a href="#tab2" class="tabclick">Specs</a></li>
     <li><a href="#tab3" class="tabclick">More Info</a></li>
 </ul> 
```

我想我已经读过关于使用助行器的文章——但它超出了我的范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:47:06.160

好的 - 找到了一个解决方案，基本上是它自己构建菜单 - 主要来自这里[http://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items](http://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items)使用 wp_get_nav_menu_items

请注意，这只是链接到顺序哈希锚点 - 但您上面的页面显示了如何链接到 URL

我已经注释了进行计数的位

```
 <?php
   // Get the nav menu based on $menu_name (same as 'theme_location' or 'menu' arg to wp_nav_menu)
 // This code based on wp_nav_menu's code to get Menu ID from menu slug

$menu_name = 'yourmenuslug';
if ( ( $locations = get_nav_menu_locations() ) && isset( $locations[ $menu_name ] ) ) {
$menu = wp_get_nav_menu_object( $locations[ $menu_name ] );
$menu_items = wp_get_nav_menu_items($menu->term_id);
$menu_list = '<ul id="menu-' . $menu_name . '">';

// this bit adds the counter
$menu_counter = 0;
global $menu_counter;
foreach ( (array) $menu_items as $key => $menu_item ) {
$menu_counter++;

    $title = $menu_item->title;
    $url = $menu_item->url;

// this bit builds the item with the sequential numbering
    if ($menu_counter < 2) {
            $menu_list .= '<li><a href="#tab' . $menu_counter .'" class="tabclick   active"  >' . $title . '</a></li>';
} else {
    $menu_list .= '<li><a href="#tab' . $menu_counter .'" class="tabclick"  >' . $title . '</a></li>';
}

}
$menu_list .= '</ul>';
} else {
$menu_list = '<ul><li>Menu "' . $menu_name . '" not defined.</li></ul>';
}
// $menu_list now ready to output
echo $menu_list;
?> 
```

# javascript - 使用 JSON 进行数组推送

> ID：10534533
> 
> 赞同：0
> 
> 时间：2012-05-10T12:59:05.480
> 
> 标签：javascript, json

有人能告诉我为什么这会打印从 117 到 300 的数字吗？

```
var x = [12, 55, 177];
var y = [25, 75, 255];
var value = [];

for (var i = 1; i <= 300; i++) {
    value.push(JSON.stringify(i));
    document.write(value);
} ​ 
```

结果：

```
117, 118, ..., 299, 300 
```

（jsFiddle [http://jsfiddle.net/minagabriel/6crZW/](http://jsfiddle.net/minagabriel/6crZW/)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T13:03:34.893

这样做是因为这`document.write()`是一个不应该使用的旧的讨厌的 hack，并且与 jsfiddle 不兼容。

如果从循环中删除它并添加：

```
console.log(value); 
```

最后，您会看到数组已正确累积。

此外，您*可能*只想在构建数组*后对其进行 JSON 编码：*

```
var value = [];
for (var i = 1; i <= 300; i++) {
    value.push(i);
} 
console.log(JSON.stringify(value)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:04:05.670

只需将您的数组打印移到循环之外，它就会起作用：

```
var x = [12, 55, 177];
var y = [25, 75, 255];
var value = [];

for (var i = 1; i <= 300; i++) {
    value.push(JSON.stringify(i));             
} 

document.write(value);
​ 
```

[http://jsfiddle.net/6crZW/8/](http://jsfiddle.net/6crZW/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:43:29.960

`array.push`首先，这与JSON无关。:-)

您的代码首先不会输出`117,118`等。这就是 Chrome 为您显示它的方式。您似乎遇到了与其中没有空格的行相关的 Chrome 中的一些内部限制或错误。在 Firefox 中，它不会那样做。

从根本上说，您的代码会重复输出数组而没有任何换行符。所以在你的循环的第一次迭代中，你输出

```
1
```

...没有换行符。在第二次迭代中，你输出`1,2`没有换行，所以我们有：

```
11,2
```

...第三个，你输出`1,2,3`：

```
11,21,2,3
```

...依此类推，直到您排长队为止。由于某种原因，Chrome 最终会丢失它并显示一堆空格，然后是文本，有点混乱。

您可能希望通过移动`document.write`语句在最后输出最终数组。或者，您可以使用`document.writeln`which 将在每行的末尾放置一个换行符（这似乎让 Chrome 很高兴；但输出对于人类来说仍然很难阅读，因为当然 HTML 中的换行符只会导致空格，而不是实际的换行符）。

但到目前为止，最好使用比 更现代的东西`document.write`，例如（例如）附加到：http `document.body`: [//jsfiddle.net/CLmYW/](http://jsfiddle.net/CLmYW/)

```
var value = [];

for (var i = 1; i <= 300; i++) {
    value.push(i);
    display(value);
}

function display(msg) {
    var p = document.createElement('p');
    p.innerHTML = msg;
    document.body.appendChild(p);
} 
```

...很好地输出

```
1
1,2
1,2,3
1,2,3,4
1,2,3,4,5
1,2,3,4,5,6
1,2,3,4,5,6,7
1,2,3,4,5,6,7,8
1,2,3,4,5,6,7,8,9
```

...等等。

`console.log`在处理事物时仅查看事物的状态也非常有用。所有最新的主流浏览器的开发工具都支持它。

另请注意，我已删除`JSON.stringify`; 所做的只是返回索引计数器的字符串版本，并且在输出中，数组中的数字是真正的数字还是字符串并不重要。

# asp.net - 如何根据用户角色使asp.net控件有条件地显示？

> ID：10534534
> 
> 赞同：0
> 
> 时间：2012-05-10T12:59:08.653
> 
> 标签：asp.net, role

我查看了有关此主题的其他问题，但无法使解决方案起作用，这是我从其他答案中得到的：

```
<asp:Panel ID="userOptionsPan" runat="server" Visible='<%# User.IsInRole("User") %>'>
    User options pan test
</asp:Panel>
<asp:Panel ID="employeeOptionsPan" runat="server" Visible='<%# User.IsInRole("Employee") %>'>
    Employee options pan test
</asp:Panel> 
```

我只使用用户角色登录，但两个面板仍然可见。我该如何解决？

我没有收到任何错误消息，它只是不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:09:06.263

您正在对服务器属性使用服务器调用。这不起作用，通常你使用 <%# %> 标签来设置 html 或 javascript 数据，而不是服务器数据。
您可以设置 Style 属性（这是一个 html 属性），也可以像这样设置 page_load 上的可见性：

```
userOptionsPan.Visible = user.IsInRole("User"); 
```

# c# - 获取/设置访问器正确的范围

> ID：10534535
> 
> 赞同：1
> 
> 时间：2012-05-10T12:59:08.780
> 
> 标签：c#

我创建了一个名为 ProfileHelper 的类，但我似乎无法正确获取我的 get/set 访问器；相反，我在 get 和 set 上都出现了红线。这是我尝试使用的代码：

```
public static String UserName(string columnName)
{ 
    get
    {
        using (SqlConnection cn = new SqlConnection(SiteConfig.ConnectionString))
        {
            string sSql = ("SELECT UserName , LoweredUserName FROM  aspnet_Users  WHERE UserId = @UserId");

            using (SqlCommand cm = new SqlCommand(sSql, cn))
            {
                cm.Parameters.AddWithValue("@UserId", Membership.GetUser().ProviderUserKey.ToString());
                cn.Open();
                using (SqlDataReader rd = cm.ExecuteReader())
                {
                    while (rd.Read())
                    {
                        return columnName;
                    }
                    rd.Close();
                }
                cn.Close();
            }         
        }            
        return columnName;
    }
    set
    {
        using (SqlConnection cn = new SqlConnection(SiteConfig.ConnectionString))
        {
            string sSql = ("UPDATE [aspnet_ Users] SET UserName = @UserName, LoweredUserName = @LoweredUserName WHERE UserId = @UserId");

            using (SqlCommand cm = new SqlCommand(sSql, cn))
            {
                cm.Parameters.AddWithValue("@UserId", Membership.GetUser ().ProviderUserKey.ToString());
                cn.Open();
                cm.ExecuteNonQuery();
                cn.Close();
            }    
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T13:02:14.690

那是一种方法，而不是一种属性。只有属性有 get 和 set 访问器。选一个。

```
public static String UserName(string columnName) // this implies a method
     { 
      get // this implies a property
      { 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T13:04:13.193

语法基本上是：

```
private string userName;
public string UserName // no parameter here!
{
  get { return this.userName; }
  set { this.userName = value; } // value is a keyword
} 
```

或者，自动属性为您提供支持字段：

```
public string UserName { get; set; } // equivalent
public string MyExternallyReadOnly { get; private set; } // setter is private 
```

您不应该*在*属性中摆弄 SQL 连接。访问属性应该是快速和可靠的。考虑用方法替换它，以明确这实际上是一个具有外部依赖关系的更持久的操作（这更有可能失败）：

```
public string GetUserName() { }
public void UpdateUserName() {} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T13:07:00.180

您应该制作一对方法，`GetUserName(string columnName)`并且`SetUserName(string columnName, string value)`. 当它可能需要一段时间时，这是首选方法，例如因为您正在建立数据库连接，并且可以让您轻松获得参数。

`public static String UserName(string columnName)`是方法的签名。 `public static String UserName`将是一个财产。属性有 get/set 访问器，方法没有。你需要改变这一点。属性不允许参数，除了[索引属性](http://msdn.microsoft.com/en-us/library/aa288464%28v=vs.71%29.aspx)，它不能是静态的（例如使用 like `myObj[someColumnName]`，声明 like `public string this[string columnName]`）。如果您希望访问类似 的属性`var something = ProfileHelper.UserName;`，只需使用属性。

# ruby-on-rails - 首次登录后打开模态框

> ID：10534540
> 
> 赞同：1
> 
> 时间：2012-05-10T12:59:21.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, modal-dialog

我想在人们第一次登录时启动一个模式框，我可以使用登录计数器，但是在第一次登录后我有特殊的重定向，因为人们来自确认 url 并且在他们自动登录之后。

现在的问题是启动这个模态框的最佳方式是什么？设置要显示模式框的 cookie 或执行 redirect_to root_path(:first_login => true )？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:30:35.347

`index.html.erb`会话变量与模板中的类似内容结合起来怎么样？

```
<%= unless session[:first_login].nil? %>
  <div id="my-modal-box">...</div>
<% end> 
```

# windows-phone-7 - 在另一个页面上固定辅助磁贴

> ID：10534546
> 
> 赞同：0
> 
> 时间：2012-05-10T12:59:43.220
> 
> 标签：windows-phone-7

我想创建辅助磁贴。但它应该固定在不在起始页上的其他位置。我可以控制我想将链接固定在其他页面上的位置。可能吗。如果是，你能告诉我我们该怎么做。

感谢期待锦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:09:48.433

对的，这是可能的。您需要在创建via方法`navigationUri`时使用该参数。标准模式是；`ShellTile``Create`

```
Uri mySecondaryPage = new Uri("/MySecondaryPage.xaml", UriKind.Relative)
ShellTile tile = ShellTile.ActiveTiles.Where(x => x.NavigationUri == mySecondaryPage).FirstOrDefault();
if (tile != null) {
  tile.Delete();
}

StandardTileData data = new StandardTileData() {
  Title = "Appears on the front",
  // Whatever number badge you want to appear 
  Count = 1, 
  // Front image
  BackgroundImage = new Uri("/Image.png", UriKind.Relative), 
  // Image for flip side
  BackBackgroundImage = new Uri("/AnotherImage.png", UriKind.Relative), 
  BackTitle = "Appears on the back",
  BackContent = "As does this"
};

ShellTile.Create(mySecondaryPage, data); 
```

当用户点击此图标时，它将直接导航到“MySecondaryPage.xaml”

MSDN 的[How to: Create, Delete, and Update Tiles for Windows Phone](http://msdn.microsoft.com/en-us/library/hh202979%28v=vs.92%29.aspx "如何：为 Windows Phone 创建、删除和更新磁贴")文章中提供了一些很好的文档。

# php - 随机数和时间戳，最好保护 POST 值？

> ID：10534548
> 
> 赞同：0
> 
> 时间：2012-05-10T12:59:46.993
> 
> 标签：php, security, post, https, md5

我的网络服务器上有一个脚本，用于启动与安全支付解决方案的 HTTPS 连接。支付解决方案允许用户存储其信用卡凭证，因此脚本的完整性是强制性的。

该脚本是从 Web 和由 iPhone 应用程序启动的 Web 浏览器调用的。它在条目中需要几个 POST 值：

*   用户身份
*   价值
*   货币...等

使用支付解决方案生成初始请求。

我的目标是尽可能保护发送到脚本的 POST 值以避免攻击，本质上是因为任何人都可以通过一个简单的 Firebug 看到它输入的 POST 变量。

该脚本是通过 HTTPS 协议访问的，这是我为了保护内容数据而提出的：

```
if (!empty($_POST)) {

    $uid = $_POST['uid'];
    $nonce = $_POST['nonce'];
    $request_timestamp = $_POST['time'];

    //other useful values ...
}

/*
 * Test 1 : is the nonce correct ? (Example of possible hash)
 */
if (strcmp(md5($uid . $request_timestamp . 'mygrE4TpassPhraZ'), $nonce) !== 0) {
    echo 'Bad nonce';
    exit;
}

/*
 * Test 2 : is the timestamp value acceptable ? 10 seconds maximum here.
 */
if (time() - $request_timestamp > 10) {
    echo 'Request too old';
    exit;
}

/*
 * Test 3 : is this request is the first valid one that I receive with those credentials for this user ?
 */
if (strcmp(User::getOnGoingNonce($uid), $nonce) === 0) {
    echo 'Request already registered';
    exit;
}

//direct database access
User::setOnGoingNonce($uid,$nonce);

/*
 * Finally, chat granted with the payment solution ...
 */ 
```

你认为这足够安全吗？你有更清洁的解决方案吗？

输入将不胜感激，在此先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:18:12.703

清理和过滤每个用户输入是开发人员的好习惯。为此目的有一个特殊的 PHP 函数，可以使程序员的生活更轻松。它被称为`filter_var()`。如果您使用数组，则可以使用`filter_var_array()`. 有关详细信息，请参见[此处](http://php.net/manual/en/function.filter-var.php)。

因此，您的代码的实际解决方案应该是这样的：

```
$uid = filter_var($_POST['uid'], FILTER_SANITIZE_NUMBER_INT);
$nonce = filter_var($_POST['nonce'], FILTER_SANITIZE_STRING);
$request_timestamp = filter_var($_POST['time'], FILTER_SANITIZE_STRING); 
```

我假设，'uid' 是一个整数，其他变量是字符串。但是你可以选择你需要的任何过滤器。有关过滤器的类型，请参见[此处](http://www.php.net/manual/en/filter.filters.sanitize.php)。

在清理用户输入时，您确保您的脚本不会允许 SQL 注入攻击，例如，或 XSS 攻击。

# jquery - 关于 _Layout 脚本和样式，IFrame 在 MVC 中无法正常工作

> ID：10534553
> 
> 赞同：1
> 
> 时间：2012-05-10T13:00:06.080
> 
> 标签：jquery, asp.net-mvc-3, iframe

**设置：**

1.  我的 _layout 页面在跨度中具有 @Render 标记，显示为无。
2.  @Render 标记上方有一个 Iframe。
3.  我的菜单导航（作为 _Layout 中的部分）有一个 jquery.click 事件，该事件使用相应的视图填充 iframe。

**问题：**

1.  尽管在任何页面上执行“查看源代码”时，我从菜单导航中“单击”进入 IFrame，但我可以看到在 _Layout 中编码的脚本和样式文件，它们对嵌入在 IFrame 上的任何视图都没有影响。

2.  如何在保持 IFrame 结构的同时让我的脚本和样式文件再次工作？

# iphone - 带有 setDelegate 和 action 的 UIGestureRecognizer

> ID：10534555
> 
> 赞同：1
> 
> 时间：2012-05-10T13:00:14.087
> 
> 标签：iphone, ios, xcode, uitableview, uigesturerecognizer

我正在尝试将 UIPanGestureController 添加到我的 UITableView 中，以便我可以**检测用户是手动平移还是他们只是进行了初始踢球**并自行观察视图滚动。原因是我想在滚动减慢时立即捕捉到一个单元格（想象一个命运之轮）。当然，我不想在用户手动平移时捕捉。

但是，我可以使用手势控制器（并相应地设置我的“手动滚动”变量）或滚动视图。使用 TouchBegin 事件而不是手势识别器会引入新问题，所以这不是一个真正的选择。

首先，我更改了表格视图以包含 UIGestureRecognizerDelegate。

初始化视图后，我然后...

```
panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panTableView:)];
[panGestureRecognizer setDelegate:self];
[self.view addGestureRecognizer:panGestureRecognizer]; 
```

我实现了 Begin 函数，以设置一个 BOOL：

```
- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)gestureRecognizer
{
  isPanning = YES;
  return NO;
} 
```

总是返回 NO 应该确保手势识别器永远不会处于活动状态，因为我想要（并且需要）使用表格视图自己的滚动方法。

**问题：我的操作“panTableView”从未被调用。** 如果我*不*设置委托，则会调用该操作，但我无法滚动，因为手势识别器会捕获我的所有触摸。

我已经调查了目标。设置代理后，手势识别器的视图和代理指针与 self.view 相同，动作仍然以右选择器为目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:17:47.493

尝试

```
- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)gestureRecognizer
{
  isPanning = YES;
  return YES;
} 
```

并实施这个

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
  return YES
} 
```

# ios - 如何更多地利用分隔线？例如，让它成为一个细胞？

> ID：10534557
> 
> 赞同：0
> 
> 时间：2012-05-10T13:00:21.243
> 
> 标签：ios, click, tableview

我想知道，你怎么能做这样的事情，例如使分隔线可用，在这个例子中作为投票的显示。我认为分隔线在这里是一个单元格。当您单击它时，会出现一个弹出菜单，您可以单击要投票的内容。我的问题是：有人知道怎么做或者有一个有用的解释的链接吗？

![分隔器](../Images/cf6df46c7c38d958866ae22516bbe884.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:04:06.687

我不认为“分隔符”是实际的单元格，而是前一个单元格的一部分。您可以看到指示器视图似乎没有垂直居中（我个人什至觉得马虎）。

因此，只需使用您想要的行为制作一个自定义单元格。也许谷歌搜索“Accordeon cell”或类似的东西，我想我记得他们在以前的 WWDC 中谈到过类似的细胞。

# c# - 从磁盘解析大数据文件比在内存中解析慢得多？

> ID：10534558
> 
> 赞同：4
> 
> 时间：2012-05-10T13:00:26.893
> 
> 标签：c#, .net, .net-3.5

在编写一个简单的库来解析游戏的数据文件时，我注意到将整个数据文件读入内存并从那里解析明显更快（高达 15 倍，106 秒 v 7 秒）。

解析通常是顺序的，但会不时进行查找以读取存储在文件中其他位置的一些数据，这些数据由偏移量链接。

我意识到从内存中解析肯定会更快，但是如果差异如此显着，那就错了。我写了一些代码来模拟这个：

```
public static void Main(string[] args)
{
    Stopwatch n = new Stopwatch();

    n.Start();
    byte[] b = File.ReadAllBytes(@"D:\Path\To\Large\File");
    using (MemoryStream s = new MemoryStream(b, false))
        RandomRead(s);
    n.Stop();
    Console.WriteLine("Memory read done in {0}.", n.Elapsed);
    b = null;
    n.Reset();
    n.Start();
    using (FileStream s = File.Open(@"D:\Path\To\Large\File", FileMode.Open))
        RandomRead(s);
    n.Stop();
    Console.WriteLine("File read done in {0}.", n.Elapsed);
    Console.ReadLine();
}
private static void RandomRead(Stream s)
{
    // simulate a mostly sequential, but sometimes random, read
    using (BinaryReader br = new BinaryReader(s)) {
        long l = s.Length;
        Random r = new Random();
        int c = 0;
        while (l > 0) {
            l -= br.ReadBytes(r.Next(1, 5)).Length;
            if (c++ <= r.Next(10, 15)) continue;
            // simulate seeking
            long o = s.Position;
            s.Position = r.Next(0, (int)s.Length);
            l -= br.ReadBytes(r.Next(1, 5)).Length;
            s.Position = o;
            c = 0;
        }
    }
} 
```

我使用游戏的一个数据文件作为输入。该文件大约 102 MB，它产生了这个结果 ( `Memory read done in 00:00:03.3092618\. File read done in 00:00:32.6495245.`)，它的内存读取速度比文件快 11 倍。

内存读取是在文件读取之前完成的，以尝试通过文件缓存提高其速度。它仍然慢得多。

我试过增加或减少`FileStream`的缓冲区大小；没有什么能产生明显更好的结果，过多地增加或减少它只会使速度变差。

我做错了什么，还是可以预料到的？有什么办法至少可以使经济放缓不那么明显？

为什么一次读取整个文件然后解析它比同时读取和解析要快得多？

我实际上比较了一个用 C++ 编写的类似库，它使用 Windows 本机`CreateFileMapping`和`MapViewOfFile`读取文件，而且速度非常快。是否是从托管到非托管的不断切换以及导致这种情况的相关编组？

我还尝试`MemoryMappedFile`了 .NET 4 中的 s；速度增益只有大约一秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:03:21.913

> 我做错了什么，还是可以预料到的？

不，没有错。这*完全是*意料之中的。访问磁盘比访问内存慢一个数量级是非常合理的。

* * *

更新：

对文件的单次读取然后进行处理比在读取时进行处理更快也是预期的。

在内存中进行大型 IO 操作和处理将比从磁盘获取位、处理它、再次调用磁盘（等待 IO 完成）、处理该位等更快...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:04:57.683

> 我做错了什么，还是可以预料到的？

与 RAM 相比，硬盘具有巨大的访问时间。顺序读取非常快，但是一旦磁头必须移动（因为数据是碎片化的），获取下一位数据需要很多毫秒，在此期间您的应用程序处于空闲状态。

> 有什么办法至少可以使经济放缓不那么明显？

购买固态硬盘。

您还可以查看[.NET的](http://msdn.microsoft.com/en-us/library/dd997372.aspx)[内存映射文件](http://msdn.microsoft.com/en-us/library/ms810613.aspx) ：

[`MemoryMappedFile.CreateFromFile()`](http://msdn.microsoft.com/en-us/library/dd988186.aspx).

* * *

至于您的编辑：我会选择@Oded 并说事先阅读文件会增加处罚。但是，这不应该导致首先读取整个文件的方法比“process-as-you-read”慢七倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:42:21.990

我决定做一些基准测试，比较在 C++ 和 C# 中读取文件的各种方式。首先我创建了一个 256mb 的文件。在 c++ 基准测试中，缓冲意味着我首先将整个文件复制到缓冲区，然后从缓冲区读取数据。所有基准测试都直接或间接地按字节顺序读取文件并计算校验和。所有时间都是从我打开文件到我完全完成并关闭文件的那一刻开始计算的。所有基准测试都运行多次以保持一致的操作系统文件缓存。

C++
无缓冲内存映射文件：300ms
缓冲内存映射文件：500ms
无缓冲 fread：23,000ms
缓冲 fread：500ms
无缓冲 ifstream：26,000ms
缓冲 ifstream：700ms

C#
MemoryMappedFile: 112,000ms
FileStream: 2,800ms
MemoryStream: 2,300ms
ReadAllBytes: 600ms

根据需要解释数据。C# 的内存映射文件甚至比最坏情况下的 c++ 代码还要慢，而 c++ 的内存映射文件是最快的。C# 的 ReadAllBytes 相当快，仅比 c++ 的内存映射文件慢两倍。因此，如果您想要获得最佳性能，我建议您使用 ReadAllBytes，然后直接从数组中访问数据，而不使用流。

# java - 使用 JPA QueryDSL 更新 @ElementCollection 属性

> ID：10534561
> 
> 赞同：2
> 
> 时间：2012-05-10T13:00:50.997
> 
> 标签：java, hibernate, jpa, querydsl

我想从与集合表映射的字段中删除特定的用户 ID。单个 QueryDSL JPA 更新语句怎么可能做到这一点？

需要的是这样的：

```
new JPAUpdateClause(getEntityManager(), sharing).where(sharing.key.eq(sharingKey))
                        .set(sharing.userIds, ***sharing.userIds - userId***).execute(); 
```

映射类：

```
public class Sharing {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;
    @Column(name = "naturalid", unique = true)
    private String key;
    private int creatorUserId;
    @ElementCollection
    @CollectionTable(name = "pla_sharing2users", joinColumns = @JoinColumn(name = "sid"))
    @Column(name = "uid")
    private Set<Integer> userIds;
...
} 
```

# java - 线程以保持 Web 服务会话处于活动状态

> ID：10534564
> 
> 赞同：0
> 
> 时间：2012-05-10T13:00:56.937
> 
> 标签：java, web-services, axis, httpsession

我有一个客户端应用程序，它使用 apache 轴访问 Web 服务 api。

我的客户端是一个随机调用网络服务的服务。所以我不知道交互到底是什么时候发生的。

我想在 Web 服务调用之间保持会话处于活动状态。

**我正在考虑有一个单独的线程，它会定期调用一个虚拟方法，以便会话永远不会超时？这是一个正确的想法还是有任何缺点？**

另一种方法是在访问 Web 服务时抛出“会话超时”异常时重新登录。但是由于许多对象可以与 Web 服务交互，这将产生新的问题，例如需要处理的同步。

# java - 检测空白字符串

> ID：10534565
> 
> 赞同：1
> 
> 时间：2012-05-10T13:01:01.767
> 
> 标签：java, file, dom, whitespace

考虑到我们有以下字符串，我们将把它们写入一个文本文件：

```
String a="        "
String b="  "
String c="java "
String d=" java"
String e="java" 
```

但是因为`a and b`没有字符，我们没有兴趣将它们插入到文件中。也许在这里很容易看到它们并忽略它们，但是如果有一`DOM`棵树并且我们一个接一个地获取节点文本并且由于页面中有很多空格，那么会有很多空格字符串`[#text: ]`，例如`DOM`. 找出像 `a and b`空格这样的字符串然后忽略它们以将其正确转换为文本的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:02:08.517

```
s.trim().length() == 0; 
```

或者

```
s.trim().isEmpty(); 
```

或者

```
s.matches("\\s*"); 
```

或者

```
StringUtils.isBlank(s); 
```

（需要 Jakarta Commons Lang）。我个人选择最后一个，因为它`null`可以安全启动。

# python - UnboundLocalError：分配前引用的局部变量“full_path”

> ID：10534566
> 
> 赞同：5
> 
> 时间：2012-05-10T13:01:07.330
> 
> 标签：python, windows, django

在 Python 2.7 和 Django 1.4 中使用 Window 7 64Bit。

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Django-1.4\django\bin\cms2>manage.py syncdb
Creating tables ...
Installing custom SQL ...
Installing indexes ...
Traceback (most recent call last):
  File "C:\Django-1.4\django\bin\cms2\manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
443, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 196,
 in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 232,
 in execute
    output = self.handle(*args, **options)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 371,
 in handle
    return self.handle_noargs(**options)
  File "C:\Python27\lib\site-packages\django\core\management\commands\syncdb.py"
, line 164, in handle_noargs
    call_command('loaddata', 'initial_data', verbosity=verbosity, database=db)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
150, in call_command
    return klass.execute(*args, **defaults)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 232,
 in execute
    output = self.handle(*args, **options)
  File "C:\Python27\lib\site-packages\django\core\management\commands\loaddata.p
y", line 239, in handle
    (full_path, ''.join(traceback.format_exception(sys.exc_type,
UnboundLocalError: local variable 'full_path' referenced before assignment 
```

**错误**

```
UnboundLocalError: local variable 'full_path' referenced before assignment 
```

我自己安装了它，但它给了我错误。它有什么问题？我试图谷歌，但没有出现。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T09:53:05.367

我也有这个问题。这是由（其他人）将其添加到我的`settings.py`：

```
SERIALIZATION_MODULES = {
    'json': 'wadofstuff.django.serializers.json'
} 
```

而且我没有安装那个东西。您可以使用以下方式安装它：

```
pip install wadofstuff-django-serializers 
```

我想其他丢失的软件也会发生类似的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T05:40:11.297

这是 Django 吃掉你原来的异常，做错事，给你一个完全没有信息的错误的又一个例子。

查看逻辑流程，您应该能够绕过此错误并查看如果您这样做的实际错误是什么

```
manage.py syncdb --traceback 
```

或者可能

```
manage.py --traceback syncdb 
```

那应该回答这个特定的问题，并告诉你 Django 内部出了什么问题。找到后，如果您仍然无法弄清楚出了什么问题，我建议您在新问题中发布该回溯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T01:39:58.937

如果您查看 loaddata.py 的代码，您可以看到在第 163 行为 full_path 分配值之前必须发生异常，这使得异常句柄引发了另一个异常，从而掩盖了实际错误。我的建议是在 handle() 函数的开头添加“full_path = ''”，这样你至少可以看到真正的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T17:50:48.137

这似乎是 Django 1.4.1 中的一个漏洞。我们没有足够的信息来告诉你究竟是什么导致你掉进了这个洞，但看起来[最新的 git 版本](https://github.com/django/django/blob/master/django/core/management/commands/loaddata.py)没有这个洞。我认为如果您更新到最新的 repo 代码，您将不会出现此错误。

我认为您还会发现其他东西正在引发错误以使该错误成为可能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T13:05:51.320

问题是 windows 不知道如何处理 python 文件。要么更改您的 Windows 设置，要么显式调用 python: `python manage.py`。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-23T23:07:28.873

[Django 1.4 与 Python 3.x 不兼容](https://docs.djangoproject.com/en/dev/releases/1.4/#python-compatibility)。

可能值得再次尝试使用 Python 2.7，看看是否遇到了同样的问题。

# android - 如何在android中执行禁用imageButton？

> ID：10534570
> 
> 赞同：0
> 
> 时间：2012-05-10T13:01:22.303
> 
> 标签：android

我想在android中禁用ImageButton（表示物理按钮显示但用户不能点击那里），我知道Invisible但是通过哪个ImageButton不会显示在屏幕上，你能告诉我它在android中是可行的吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:05:22.350

> 你能告诉我它在android中是可行的吗？

是的，在android中是可能的。

喜欢，

```
ImageButton imgButton  = new ImageButton(this);
imgButton.setEnabled(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:05:39.853

例如，您可以指定`myImageButton.setEnabled(false);`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:40:21.063

这是可能的

只需将其添加到您的 xml 文件中的图像按钮中

```
 android:clickable="false" 
```

# ruby-on-rails - 使用 Rails 在 PaperClip 中文件上传 Base64 编码的字符串

> ID：10534575
> 
> 赞同：8
> 
> 时间：2012-05-10T13:01:35.610
> 
> 标签：ruby-on-rails, ruby, file-upload, paperclip, stringio

我有一个图像文件的base64编码字符串。我需要使用回形针保存它

我的控制器代码是

```
 @driver = User.find(6)
 encoded_file = Base64.encode64(File.open('/pjt_path/public/test.jpg').read)
 decoded_file = Base64.decode64(encoded_file)

 @driver.profile_pic =  StringIO.open(decoded_file)
 @driver.save 
```

在我的用户模型中

```
 has_attached_file :profile_pic, :styles => { :medium => "300x300>", :thumb => "100x100>" }, :default_url => '/icon.jpg' 
```

目前该文件保存为文本文件（stringio.txt）。但是当我将扩展名更改为 JPG 时，我可以将其视为图像。如何使用 StringIO 正确命名图像。

我有rails 3.2，ruby 1.9.2，回形针3.0.3

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-14T14:34:07.307

我通过使用解决了这个问题

```
encoded_file = Base64.encode64(File.open('/pjt_path/public/test.jpg').read)
decoded_file = Base64.decode64(params[:encoded_image])
begin
  file = Tempfile.new(['test', '.jpg']) 
  file.binmode
  file.write decoded_file
  file.close
  @user.profile_pic =  file
  if @user.save
    render :json => {:message => "Successfully uploaded the profile picture."}
  else
    render :json => {:message => "Failed to upload image"}
  end
ensure
  file.unlink
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:19:43.573

尝试设置`:path`/`:url`选项`has_attached_file`并显式覆盖扩展名：

[http://rdoc.info/gems/paperclip/Paperclip/ClassMethods#has_attached_file-instance_method](http://rdoc.info/gems/paperclip/Paperclip/ClassMethods#has_attached_file-instance_method)

分别

[http://rdoc.info/gems/paperclip/Paperclip/Storage/Filesystem](http://rdoc.info/gems/paperclip/Paperclip/Storage/Filesystem)

# c# - JSON.net 反序列化

> ID：10534576
> 
> 赞同：3
> 
> 时间：2012-05-10T13:01:40.697
> 
> 标签：c#, json, json.net, deserialization

我有一个 JSON 编码的字符串。我也有 C# 类：

```
class Pupu{
    public static List<Pupu> plist = new List<Pupu>();
    public string user {get; set;}
    public string number {get; set;}
}

[{"user":"27FFBADD7284E5CB98EAC45559589E28FDDDC3AD","number":"62827"},{"user":"27FFBADD7284E5CB98EAC45559589E28FDDDC3AD","number":"30460"}, {"user":"0D27D44D40C5185423078B3C93B3E6B596AD21A0","number":"25143"}, {"user":"0D27D44D40C5185423078B3C93B3E6B596AD21A0","number":"22776"}, {"user":"27FFBADD7284E5CB98EAC45559589E28FDDDC3AD","number":"19755"}] 
```

我用以下方式对其进行反序列化：

```
 plist = JsonConvert.DeserializeObject<List<Pupu>>(stringAbove); 
```

我不断得到：

```
 Attempt to access the method failed: System.Collections.Generic.List`1..ctor(); 
```

谢谢，我正在寻找这个几个小时。（我对 C# 很陌生）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T13:05:05.080

让我们尝试清理您的代码：

```
public class Score
{
    public string user { get; set; }
    public string number { get; set; }
} 
```

现在您可以将 JSON 反序列化为分数列表：

```
List<Score> plist = JsonConvert.DeserializeObject<List<Score>>(stringAbove); 
```

这是一个完整的例子：

```
public class Score
{
    public string user { get; set; }
    public string number { get; set; }
}

class Program
{
    static void Main()
    {
        var json = "[{\"user\":\"27FFBADD7284E5CB98EAC45559589E28FDDDC3AD\",\"number\":\"62827\"},{\"user\":\"27FFBADD7284E5CB98EAC45559589E28FDDDC3AD\",\"number\":\"30460\"}, {\"user\":\"0D27D44D40C5185423078B3C93B3E6B596AD21A0\",\"number\":\"25143\"}, {\"user\":\"0D27D44D40C5185423078B3C93B3E6B596AD21A0\",\"number\":\"22776\"}, {\"user\":\"27FFBADD7284E5CB98EAC45559589E28FDDDC3AD\",\"number\":\"19755\"}]";
        List<Score> plist = JsonConvert.DeserializeObject<List<Score>>(json);

        foreach (Score score in plist)
        {
            Console.WriteLine("user: {0}, number: {1}", score.user, score.number);    
        }
    }
} 
```

# .net - 应用程序启动时的运行对话框

> ID：10534578
> 
> 赞同：0
> 
> 时间：2012-05-10T13:01:53.363
> 
> 标签：.net, vb.net, dialog

我想启动一个对话框来提示用户输入网站凭据，我可以像普通的 VB 窗口一样设计对话框吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:48:43.437

您需要在项目属性中关闭 Windows 应用程序框架。然后将您的启动对象设置为`Sub Main`. 然后在一个模块（不是一个类）中创建一个“公共子主”。这将是你的应用程序的入口点。然后做这样的事情：

```
Module Main
    Public Sub Main()
        Application.EnableVisualStyles()
        Dim login as LoginForm = New LoginForm()
        Application.Run(login)
        If login.Sucessful Then
            Application.Run(New MainForm())
        End If
    End Main
End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:44:31.973

使用您想要的设计器创建您的表单。

在您的应用程序中调用它，例如：

```
myForm.ShowDialog(Me) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:46:35.823

右键单击您的项目，`Add > New Item...`在菜单中选择。

然后`Dialog`在列表中选择。

您可以将任何您喜欢的控件添加到对话框中，正如 Mark 所说，您可以使用`ShowDialog`.

# jquery - 多个事件触发同一个功能（具体案例）

> ID：10534579
> 
> 赞同：0
> 
> 时间：2012-05-10T13:01:54.193
> 
> 标签：jquery, triggers, bind

我读到过，您显然可以使用 bind() 函数绑定不同的事件。但是我在理解语法时遇到了麻烦，尤其是当有像 keydown 这样的特定函数需要参数时。这是我的代码示例：

```
 $('#closePopup').click(function(){
                popupbg.add(popup).fadeOut();
            });
            $(document).keydown(function(e){
                if(e.keyCode==27){
                    popupbg.add(popup).fadeOut();
                }
            }); 
```

有没有办法绑定/在这两个触发器上，所以我可以避免重复 popupbg.add(popup).fadeOut(); 陈述？喜欢（点击和按键（e））这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:15:57.467

不幸的是，您不能在一个语句中将不同的事件绑定到不同的对象。

您可以将该代码放在一个函数中并在两个事件中调用该函数以避免重复代码：

```
function closePopupbg(){
    popupbg.add(popup).fadeOut();
}

$('#closePopup').click(closePopupbg);
$(document).keydown(function(e){
    if(e.keyCode==27){
        closePopupbg();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:15:41.830

在我看来，您想`popupbg.add(popup).fadeOut();`在一个函数中定义，然后从您定义的许多事件中调用它：

```
 var someFunctionName = function(){
         popupbg.add(popup).fadeOut();
    };

    $('#closePopup').click(function(){
        someFunctionName();
    });
    $(document).keydown(function(e){
        if(e.keyCode==27){
            someFunctionName();
        }
    }); 
```

*** 编辑 **** 我没有以任何方式测试此代码，它仅用于演示目的，所以请不要就准确性、范围或任何类似问题给我打电话:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:20:25.477

您还可以触发`click`事件：

```
$('#closePopup').click(function() {
    popupbg.add(popup).fadeOut();
});

$(document).keydown(function(e) {
    if (e.keyCode == 27) {
        $('#closePopup').trigger('click');
    }
});​ 
```

# linux - 查找中的排除

> ID：10534580
> 
> 赞同：3
> 
> 时间：2012-05-10T13:01:59.527
> 
> 标签：linux, bash, shell

我正在使用 bash 以下脚本在文件中查找字符串：

```
find $1 -name "$2" -exec grep -Hn "$3" {} \; 
```

有时这个脚本失败了

```
grep: /proc/sysrq-trigger: Input/Output error 
```

为了解决这个问题，我首先考虑从查找结果中排除这个文件。这是一个好主意，如果是的话，我该怎么做？有没有其他解决方案可以避免我的脚本失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:10:07.060

您可以像这样排除`/proc`find 中的所有目录：

```
find $1 -path /proc -prune -o -name "$2" -print -exec grep -Hn "$3" {} \; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:11:01.007

您遇到的问题是，`--exclude-dir`当 grep 它自己正在执行文件系统递归（`grep -r`）时，它被设计为工作，而不是在 grep 与 find 一起使用时工作。为什么不将它与 xargs 结合使用，并用另一个 grep 过滤掉 proc 条目？

```
find $1 -name "$2" | grep -v '/proc' | xargs grep -Hn "$3" {} \; 
```

# ruby-on-rails - 你如何确保你的 Rails 服务器运行

> ID：10534591
> 
> 赞同：2
> 
> 时间：2012-05-10T13:02:37.197
> 
> 标签：ruby-on-rails, nginx, production-environment, thin

确保 Rails 服务器在严重崩溃或进程终止后自动重启的常用方法是什么？你如何处理挂起的进程？我的生产服务器上运行着 nginx 和瘦 - 你会建议在它们之间放置一些东西吗？还是使用其他服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:50:21.457

首先：

您应该确定进程挂起或终止的原因。这些不是正常行为，表明某处存在故障。

寻找：

*   崩溃前内存不足或负载过高 - 表明存在配置问题。
*   太新的 nginx 版本。
*   如果您正在虚拟化，这可能会导致 linux 内核出现许多微妙的问题，这些问题可能会导致段错误。如果您使用的是 EC2，最好使用 Amazon Linux。Ubuntu 服务器为此目的太前沿了。

为了重新启动，我建议您使用 monit，因为它快速、简单且可靠 - 这是执行此操作的正常方法。

最后，我建议您设置外部监控以及使用 Pingdom 之类的东西，因为即使 monit 也无法捕获所有类型的故障，例如硬件故障。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:39:32.350

如果您只想监控应用程序，我总是将 Nagios 与 Centreon 一起使用。您可以在 Rails 服务器关闭时设置电子邮件警报。您必须在要监控的每台机器上设置 NRPE。

当检测到错误时，您可以运行 bash 文件来终止挂起的进程并自动重新启动服务器。就个人而言，我从不使用它，因为崩溃意味着出现问题。所以我手动进行以检查所有内容。

试试看这里：[http ://www.centreon.com/](http://www.centreon.com/)

# java - 在 sun solaris 8 上安装 java 1.6.31

> ID：10534594
> 
> 赞同：1
> 
> 时间：2012-05-10T13:02:50.350
> 
> 标签：java, installation, solaris, sparc

我已经在 Solaris 8 Sparc 上安装了 java 1.6.0.31，但是当我输入命令时：

```
Ingres > java -jar Monitor.jar c

Exception in thread "main" java.lang.StackOverflowError

at sun.font.FontManager.getDefaultPhysicalFont (Unknown Source)

at sun.font.NativeFont.getMapper(Unknown Source)

at sun.font.NativeFont.getMapper(Unknown Source)

at sun.font.NativeFont.getMapper(Unknown Source)

at sun.font.NativeFont.getMapper(Unknown Source)

at sun.font.NativeFont.getMapper(Unknown Source) 
```

我的安装出了什么问题...？

# android - 如何删除微调器的元素并更新微调器列表和数据库 SQLite

> ID：10534595
> 
> 赞同：1
> 
> 时间：2012-05-10T13:02:53.287
> 
> 标签：android

我有一个微调器，它显示来自数据库 SQLite 的数据列表。我想在选择时从 Spinner 和 db 中删除一行，然后单击按钮 btn。我怎样才能做到这一点？谢谢

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.remove_wf2);

        mDB = new MyDatabase(getApplicationContext()); 
        mDB.open();
        spin = (Spinner)findViewById(R.id.wf_spinner);

        c = mDB.fetchWfs();
        startManagingCursor(c);

        // create an array to specify which fields we want to display
        String[] from = new String[]{WfMetaData.WF_NAME_KEY};
        // create an array of the display item we want to bind our data to
        int[] to = new int[]{android.R.id.text1};
        // create simple cursor adapter
        adapter =
          new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to );
        adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
        // get reference to our spinner
        spin.setAdapter(adapter);

        spin.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onNothingSelected(AdapterView<?> parent) {

            }

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id) {
                spinnerPos = pos;
                mRowId = id;  // database row id
            }
        });

        //fillSpinner(spin);

        Button btn = (Button)findViewById(R.id.button11);
        btn.setText("Rimuovi");
        btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                mDB.delete_byID(mRowId);
                c.requery();

            }
        });
        /*
        Spinner spin = (Spinner)findViewById(R.id.wf_spinner);
        Cursor cur = mDB.fetchWfs();
        startManagingCursor(cur);

        String[] from = new String[] { WfMetaData.WF_NAME_KEY };
        int[] to = new int[] { android.R.id.text1 };
        SimpleCursorAdapter spinAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cur, from, to);
        spinAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spin.setAdapter(spinAdapter);

        spin.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                Cursor c = (Cursor)parent.getItemAtPosition(pos);
                mSpinnerWF = c.getInt(c.getColumnIndexOrThrow(WfMetaData.WF_NAME_KEY));
            }
            @Override
                public void onNothingSelected(AdapterView<?> parent) {
            }
        });*/
        //mDB.close();
    } 
```

我的删除方法是这样的：

```
public boolean delete_byID(long rowId) {
        return mDb.delete(WfMetaData.WF_TABLE, WfMetaData.WF_NAME_KEY + "=" + rowId, null) > 0;

    CharSequence text = "Il Workflow "+ n +" è stato rimosso con successo!";
    int duration = Toast.LENGTH_SHORT;

    Toast toast = Toast.makeText(mContext, text, duration);
    toast.show();
    } 
```

我没有从 ID 中找到任何删除方法。这是一种数据库方法吗？

我已经像这样修改了我的应用程序：

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.remove_wf2);

        mDB = new MyDatabase(getApplicationContext()); 
        mDB.open();
        spin = (Spinner)findViewById(R.id.wf_spinner);

        c = mDB.fetchWfs();
        startManagingCursor(c);

        // create an array to specify which fields we want to display
        String[] from = new String[]{WfMetaData.WF_NAME_KEY};
        // create an array of the display item we want to bind our data to
        int[] to = new int[]{android.R.id.text1};
        // create simple cursor adapter
        adapter =
          new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to );
        adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
        // get reference to our spinner
        spin.setAdapter(adapter);

        spin.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onNothingSelected(AdapterView<?> parent) {

            }

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id) {
                spinnerPos = pos;
                mRowId = id;  // database row id
            }
        });

        //fillSpinner(spin);
        mDB.close();

        Button btn = (Button)findViewById(R.id.button11);
        btn.setText("Rimuovi");
        btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                adapter.getItem(spinnerPos);
                mDB.delete_byName((String)adapter.getItem(spinnerPos));
                c.requery();

            }
        }); 
```

但我在 LogCat（Cast 异常）中收到此错误：

```
05-10 15:46:38.586: D/RadioSignalLevel(1758): Gsm Radio Signal level: 4
05-10 15:46:38.586: D/StatusBarPolicy(1758): ERI alert sound is disabled.
05-10 15:46:38.606: D/NetworkService(1939): handle message:800
05-10 15:46:38.606: D/NetworkService(1939): getRawGPRSRegistrationState
05-10 15:46:38.616: I/TransactionService(29090): MMS-STATUS - start transaction service, app version=STABLE4.5.user.4.5.2A-74_OLE-31.2.3.4.Blur_Version.45.31.0.MB860.TIM.en.IT.Thu Sep 22 04:02:02 CST 2011 (log=false) (apn=false) (config=false)
05-10 15:46:38.626: I/SmsReceiverService(29090): MMS-STATUS - start sms receiver service, app version=STABLE4.5.user.4.5.2A-74_OLE-31.2.3.4.Blur_Version.45.31.0.MB860.TIM.en.IT.Thu Sep 22 04:02:02 CST 2011 (log=false) (apn=false) (config=false)
05-10 15:46:38.636: I/TelephonyRegistry(1610): notifyDataConnection: state=0 isDataConnectivityPossible=false reason=nwTypeChanged interfaceName=null networkType=10
05-10 15:46:38.636: I/SYS_MPP(1965): WebtopStatusHandler    updateDataIcon()
05-10 15:46:38.646: D/NetworkService(1939): handle message:800
05-10 15:46:38.646: D/NetworkService(1939): getRawGPRSRegistrationState
05-10 15:46:38.646: I/CBStartup(1939): onServiceStateChanged
05-10 15:46:38.656: I/CBSettings(1939): Reading database: KEY_NAME= db_key_language
05-10 15:46:38.656: I/CBSettings(1939): Reading database: KEY_NAME= db_key_channel

public class MyDatabase {  

    SQLiteDatabase mDb;
    DbHelper mDbHelper;
    Context mContext;
    private static final String DEBUG_TAG = "WFListDatabase";
    private static final String DB_NAME="WFListdb";//nome del db
    private static final int DB_VERSION=1; //numero di versione del nostro db

    public MyDatabase(Context ctx) {
        mContext = ctx;
        mDbHelper = new DbHelper(ctx, DB_NAME, null, DB_VERSION);   //quando istanziamo questa classe, istanziamo anche l'helper (vedi sotto)     
    }

   public void open(){  //il database su cui agiamo è leggibile/scrivibile
            mDb=mDbHelper.getWritableDatabase();

    }

    public void close(){ //chiudiamo il database su cui agiamo
            mDb.close();
    }

    public void insertWf(String name,String cls){ //metodo per inserire i dati
            ContentValues cv=new ContentValues();
            cv.put(WfMetaData.WF_NAME_KEY, name);
            cv.put(WfMetaData.WF_CLASS_KEY, cls);
            mDb.insert(WfMetaData.WF_TABLE, null, cv);
    }

    /*public void removeWf(String name,String cls){ //metodo per inserire i dati
        ContentValues cv=new ContentValues();
        cv.remove(WfMetaData.WF_NAME_KEY);
        cv.remove(WfMetaData.WF_CLASS_KEY);
        mDb.(WfMetaData.WF_TABLE, null, cv);
}*/

    public Cursor fetchAllWfs(){ //metodo per fare la query di tutti i dati
        return mDb.query(WfMetaData.WF_TABLE, new String[]{WfMetaData.WF_NAME_KEY, WfMetaData.WF_CLASS_KEY},null,null,null,null,null);               
    }

    static class WfMetaData {  // i metadati della tabella, accessibili ovunque
    static final String WF_TABLE = "wfs";
    static final String ID = "_id";
    static final String WF_NAME_KEY = "name";
    static final String WF_CLASS_KEY = "class";
    }

    private static final String WF_TABLE_CREATE = "CREATE TABLE IF NOT EXISTS "  //codice sql di creazione della tabella
                    + WfMetaData.WF_TABLE + " (" 
                    + WfMetaData.ID+ " integer primary key autoincrement, "
                    + WfMetaData.WF_NAME_KEY + " text not null, "
                    + WfMetaData.WF_CLASS_KEY + " text not null);";

    public Cursor fetchWfs(){ //metodo per fare la query di tutti i dati
        return mDb.query(WfMetaData.WF_TABLE, null,null,null,null,null,null);               
}

    public void delete_byName(String n){
     mDb.delete(WfMetaData.WF_TABLE, WfMetaData.WF_NAME_KEY + "='" +n + "'", null);
     //mDb.delete(WfMetaData.WF_TABLE, WfMetaData.WF_NAME_KEY + "=?", new String[] { n });

    CharSequence text = "Il Workflow "+ n +" è stato rimosso con successo!";
    int duration = Toast.LENGTH_SHORT;

    Toast toast = Toast.makeText(mContext, text, duration);
    toast.show();
    }

    public void delete_byID(long rowId) {
        mDb.delete(WfMetaData.WF_TABLE, WfMetaData.WF_NAME_KEY + "=" + rowId, null);

        CharSequence text = "Il Workflow è stato rimosso con successo!";
        int duration = Toast.LENGTH_SHORT;

        Toast toast = Toast.makeText(mContext, text, duration);
        toast.show();
    }

   private class DbHelper extends SQLiteOpenHelper { //classe che ci aiuta nella creazione del db

        public DbHelper(Context context, String name, CursorFactory factory,int version) {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase _db) { //solo quando il db viene creato, creiamo la tabella
            _db.execSQL(WF_TABLE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase _db, int oldVersion, int newVersion) {
            Log.w(DEBUG_TAG, "Upgrading database. Existing contents will be lost. ["
                    + oldVersion + "]->[" + newVersion + "]");
            _db.execSQL("DROP TABLE IF EXISTS " + WF_TABLE_CREATE);
            onCreate(_db);
        }       

    }

    public boolean isEmpty(){
        boolean isEmpty = true;
        Cursor cursor = mDb.query(WfMetaData.WF_TABLE, new String[] { WfMetaData.WF_NAME_KEY }, null, null, null, null, null);
        if (cursor != null && cursor.getCount() > 0)
        {
           isEmpty = false;
        }
        return isEmpty;
    }
} 
```

* * *

```
public class RemoveWorkflow2 extends Activity {

    private EditText nameEditText;
    private EditText classEditText;
    //private EditText idEditText;
    //private int mSpinnerWF;
    Spinner spin;
    WorkflowChoice wf = new WorkflowChoice();

    MyDatabase mDB;
    SimpleCursorAdapter adapter;
    private long mRowId;
    private int spinnerPos;
    private String delString;
    Cursor c;
    //MyDatabase mDB = wf.getDb();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.remove_wf2);

        mDB = new MyDatabase(getApplicationContext()); 
        mDB.open();
        spin = (Spinner)findViewById(R.id.wf_spinner);

        c = mDB.fetchWfs();
        startManagingCursor(c);

        // create an array to specify which fields we want to display
        String[] from = new String[]{WfMetaData.WF_NAME_KEY};
        // create an array of the display item we want to bind our data to
        int[] to = new int[]{android.R.id.text1};
        // create simple cursor adapter
        adapter =
          new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to );
        adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
        // get reference to our spinner
        spin.setAdapter(adapter);

        spin.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onNothingSelected(AdapterView<?> parent) {

            }

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id) {
                Cursor c = (Cursor)(parent.getAdapter().getItem(pos));
                delString = c.getString(c.getColumnIndex(mDB.);
                //spinnerPos = pos;
                //mRowId = id;  // database row id
            }
        });

        //fillSpinner(spin);

        Button btn = (Button)findViewById(R.id.button11);
        btn.setText("Rimuovi");
        btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                mDB.delete_byID(mRowId);
                mDB.delete_byName(delString);
                c.requery();

            }
        });

    }

    private void fillSpinner(Spinner s){

        Cursor c = mDB.fetchWfs();
        startManagingCursor(c);

        // create an array to specify which fields we want to display
        String[] from = new String[]{WfMetaData.WF_NAME_KEY};
        // create an array of the display item we want to bind our data to
        int[] to = new int[]{android.R.id.text1};
        // create simple cursor adapter
        SimpleCursorAdapter adapter =
          new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to );
        adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
        // get reference to our spinner
        s.setAdapter(adapter);
        }

} 
```

我的方法有问题：

```
@Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id) {
                Cursor c = (Cursor)(parent.getAdapter().getItem(pos));
                delString = c.getString(c.getColumnIndex(mDB.);
                //spinnerPos = pos;
                //mRowId = id;  // database row id
            } 
```

如何设置 delString？我没有 YOUR_COLUMN_ID .. 我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:17:49.847

我假设按钮在微调器之外......

你真的不需要这个职位。设置类变量：

```
private int spinnerPos;     
private long mRowId; 
```

为你的微调器添加这个：

```
spin.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onNothingSelected(AdapterView<?> parent) {

    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View view,
            int pos, long id) {
        spinnerPos = pos;
        mRowId = id;  // database row id
    }
}); 
```

然后为您的按钮：

```
btn.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {

        // Your code to get the string from the adapter
        mDB.delete_byName(yourString);
        c.requery();
}); 
```

顺便说一句，您应该让您的数据库保持打开状态，直到您退出应用程序。

我看到你问一个关于按 id 删除的问题。在您的数据库类中，您将拥有如下内容：

```
public boolean delete(long rowId) {
    return mDb.delete(TABLE_NAME, TABLE_ROWID + "=" + rowId, null) > 0;
} 
```

希望这可以帮助！

**编辑**

更好的方法：

```
Private String delString; 
```

为你的 spinnerListener 添加这个

```
spin.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onNothingSelected(AdapterView<?> parent) {

    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View view,
            int pos, long id) {
            Cursor c = (Cursor) (parent.getAdapter().getItem(pos));
            delString = c.getString(c.getColumnIndex(YourDB.YOUR_COLUMN_ID));       }
}); 
```

按钮：

```
btn.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        mDB.delete_byName(delString);
        c.requery();
}); 
```

**编辑 2**

第一种删除方法（按 RowId）：

```
public boolean delete_byID(long rowId) {
    return mDb.delete(WfMetaData.WF_TABLE, WfMetaData.ID + "=" + rowId, null) > 0;
} 
```

第二种删除方法（按名称）：

```
public boolean delete_byName(String name) {
    return mDb.delete(WfMetaData.WF_TABLE, WfMetaData.WF_NAME_KEY + "= '" + name + "'", null) > 0;
} 
```

# php - 数据库数据更改时向所有活动会话发送响应

> ID：10534606
> 
> 赞同：0
> 
> 时间：2012-05-10T13:03:49.717
> 
> 标签：php, javascript, ajax

当数据库数据更改时，我想向所有当前处于活动状态的用户（记录或查看内容）发送响应。

**例子**

一些用户正在查看“数据”表。

目前我每 5 秒执行一次 AJAX 调用，如果数据数据库响应发生变化，将通知客户端。

但是我不再想这样做了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:10:15.920

ajax 轮询的替代方案（如您所做的那样）是使用彗星/服务器端推送。

换句话说，您将使用 WebSockets、Ajax 长轮询、服务器发送事件等来向客户端发送消息，而不是客户端轮询。

为了这个例子，我将使用 WebSockets。不过，我在下面描述的内容也适用于其他方法。

如果您已经有一个现有的 PHP 应用程序，那么最简单的方法可能是编写一个单独的“守护程序”脚本来处理套接字。每当您的应用程序更改数据库中的某些数据时，您将向守护程序脚本发送一条消息，然后它将通知连接的客户端更改。

您可以使用 ZeroMQ 之类的东西在主应用程序和套接字守护程序之间进行消息传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:11:15.653

您可以使用轮询或 websockets，也许[Pusher.com](http://pusher.com/)是您的解决方案。

# c# - 树视图混乱

> ID：10534610
> 
> 赞同：0
> 
> 时间：2012-05-10T13:04:02.630
> 
> 标签：c#, asp.net, .net, treeview, web-parts

基本上我有组列表，组中的另一个用户列表 &&& 个人用户列表。现在我想从用户列表中创建（不可扩展的）树节点，然后是组的另一个可扩展节点（其中包含用户列表），但我对树视图真的很糟糕，教程也无济于事：/这是代码

```
 TreeView tree = new TreeView();
            List<string> GroupList = new List<string>();
            List<KeyValuePair<string, string>> UserList = new List<KeyValuePair<string, string>>();
            List<string> IndividualUserList = new List<string>();

            GroupList.Clear();
            UserList.Clear();
            IndividualUserList.Clear();

            foreach (string GroupListItem in GroupList)
            {
                TreeNode groupNode = new TreeNode();
                foreach (string Item in IndividualUserList)
                {
                    groupNode = new TreeNode(Item);
                }

                groupNode = new TreeNode(GroupListItem);
                foreach (KeyValuePair<string, string> UserPair in UserList)
                {
                    if (UserPair.Key == GroupListItem)
                    {
                        groupNode.ChildNodes.Add(new TreeNode(UserPair.Value));
                    }
                }
                tree.Nodes.Add(groupNode);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:42:20.443

大致这样的事情应该允许您在这些组中添加组和用户。

```
TreeView tree = new TreeView();

foreach(string groupName in Groups) 
{ 
    var groupNode = new TreeNode(groupName); 
    foreach(KeyValuePair user in UserList) 
    {
        if(user.Key == groupNode)
        {
            var userNode = new TreeNode(user);
            groupNode.Add(userNode);
        }
    }
    tree.Add(groupNode);
} 
```

# android - 安卓应用安全

> ID：10534616
> 
> 赞同：-1
> 
> 时间：2012-05-10T13:04:29.307
> 
> 标签：android, android-emulator, uninstallation, device-admin

我正在开发一个家长应用程序，它将拨出电话限制为有限的定义号码。

我需要为应用程序登录设置密码，是否可以设置一个密码来控制该应用程序的卸载过程。

我已经浏览了一些链接，但还没有得出任何结论。

[链接 1](https://stackoverflow.com/questions/3947847/how-to-assign-uninstallation-password-when-we-are-uninstalling-the-application)

[链接 2](https://stackoverflow.com/questions/1221534/require-a-password-to-uninstall-remove-application)

这些不能满足我的目的……这也不是解决方案。

谁能告诉我究竟如何添加一个观察者来达到这个目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:20:17.187

> 是否可以设置一个密码来控制该应用程序的卸载过程。

欢迎您创建包含您的应用程序的自定义固件，并将该固件安装在您允许的任何设备上。然后无法卸载您的应用程序。

Android SDK 应用程序无法“控制卸载过程”。

# ajax - Google 会在搜索中显示基于 AJAX 的网站结果吗？

> ID：10534627
> 
> 赞同：0
> 
> 时间：2012-05-10T13:05:43.797
> 
> 标签：ajax, database, search

我想知道我正在制作一个网站，它在首页上显示所有最新信息......该网站完全是 AJAX 工作，所以所有数据都在服务器数据库中，如果有人搜索我的可用的特定数据网站通过搜索引擎那么搜索引擎会搜索数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:09:59.913

默认情况下，不，仅 AJAX 可访问的内容不会被 Google 抓取。但是，您可以使用一个约定来确保它确实被抓取 - “Hash Wallop”。

当 Google（和其他搜索引擎）遇到以“#!”开头的链接时，它会“抓取”从 AJAX 调用返回的动态内容。为了利用这一点，而不是拥有类似的东西：

```
<a href="#">trigger ajax</a> 
```

...你会想要使用类似的东西：

```
<a href="#!some-ajax-content">trigger ajax</a> 
```

这里有一些关于该技术的更多信息（还有很多其他网站，只是谷歌它）：[http ://www.seomoz.org/blog/how-to-allow-google-to-crawl-ajax-content](http://www.seomoz.org/blog/how-to-allow-google-to-crawl-ajax-content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:10:10.677

一些见解：[http ://coding.smashingmagazine.com/2011/09/27/searchable-dynamic-content-with-ajax-crawling/](http://coding.smashingmagazine.com/2011/09/27/searchable-dynamic-content-with-ajax-crawling/)

此外，您可能想研究 HTML 缓存，它会提高您的 SEO 性能。

# c++ - 一个阻塞但非模态的QDialog？

> ID：10534628
> 
> 赞同：4
> 
> 时间：2012-05-10T13:05:45.157
> 
> 标签：c++, qt, modal-dialog, qdialog, qmessagebox

我有一堆图像，我想在上面执行一些操作。处理完每个图像后，我的程序应该会弹出一个对话框，提示用户是否要继续处理下一个图像或中止。在此之前，他们应该有机会对图像或参数进行一些手动更改。无论如何，他们必须能够访问应用程序的窗口，而调用对话框的方法的执行应该被阻止，直到对话框关闭。

我试图用 QMessageBox 解决这个问题，但是如果我通过 exec() 打开它，它会阻塞整个应用程序，如果我使用 show()，程序的执行会继续执行，而无需等待用户的反应。

有没有一种方便的方法可以通过对话框阻止调用方法或函数，但允许用户与其他窗口交互？

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T13:13:28.290

您应该将要阻止的方法分成两部分。在第一部分结束时，您需要在不阻塞的情况下显示对话框，并将对话框的“下一步”按钮（例如）连接到必须包含旧方法第二部分的插槽。只有当用户按下按钮时才会执行此插槽。

这是在 Qt 中执行此操作的正确方法。您可能需要更改代码逻辑来实现这一点。

另外，你真的需要第二个对话框吗？您可以将“下一步”按钮放置在您的主小部件上。您还可以创建另一个模式对话框，其中将包含一些设置和“下一步”按钮。

# c# - 使用 c# 获取 USB 硬件或实例 ID

> ID：10534632
> 
> 赞同：1
> 
> 时间：2012-05-10T13:05:54.237
> 
> 标签：c#, asp.net, c#-4.0, operating-system, hardware

我正在尝试从过去 2 天使用 devcon 获取用于弹出 USB 的 USB 大容量存储实例 ID，但无法获取。我尝试了很多解决方案，但仍然失败。

```
 ManagementObject dsk = new ManagementObject(@"win32_logicaldisk.deviceid=""j:""");
    dsk.Get();
    string id = dsk["VolumeSerialNumber"].ToString(); 
    Console.WriteLine(id); 
```

它返回实例 ID。当我将此 id 传递给 devcon 时，它不会删除任何设备。以这种方式将 id 传递给 devcon

```
Devcon remove usbstor\deviceID 
```

有没有办法使用设备名称（如 G、H 或 I 等）删除 USB 或获取所需的实例 ID。任何帮助都将得到应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:58:03.230

我认为*#usblib*对你有帮助，它可以让你玩转usb 设备[#usblib](http://www.icsharpcode.net/OpenSource/SharpUSBLib/default.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:35:15.333

尝试禁用 UAC 并在管理员凭据下运行 devcon.exe。

# asp.net - 使用 IIS 工具创建 SEO 友好的超链接

> ID：10534634
> 
> 赞同：1
> 
> 时间：2012-05-10T13:05:58.043
> 
> 标签：asp.net, url-rewriting, routing, iis-7.5

我使用 Asp.net 4。

我在 C# 中有一些代码可以在网页上生成 html 超链接，我想使用**IIS 7.5 中的 URL Rewrite Tool**使这些超链接对 SEO 友好。

是否可以？或者我应该使用 URL 路由机制吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:55:11.980

看来我在这里找到了我的问题的答案：

IIS 7.5 可以修改由反向代理后面的 Web 应用程序生成的 HTML 标记中的链接。 [http://learn.iis.net/page.aspx/664/using-url-rewrite-module-20/](http://learn.iis.net/page.aspx/664/using-url-rewrite-module-20/)

[http://learn.iis.net/page.aspx/665/url-rewrite-module-20-configuration-reference/#Tag_Filters](http://learn.iis.net/page.aspx/665/url-rewrite-module-20-configuration-reference/#Tag_Filters)

# xml - 有效的已解析字符 XML 数据

> ID：10534639
> 
> 赞同：0
> 
> 时间：2012-05-10T13:06:25.250
> 
> 标签：xml, dtd

如果我在 DTD 中定义这样的元素

```
<!ELEMENT ud (#PCDATA)> 
```

以下都有效吗？

```
<ud>foo &amp; bar</ud>
<ud><![CDATA[foo & bar]]></ud> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:09:26.933

两者都是有效的。

将内容`<![CDATA[]]>`有效地放在一个部分中意味着解析器将忽略其中的任何内容。

`PCDATA`表示只允许字符数据。`CDATA`表示字符数据，因此在`PCDATA`上下文中是允许的。

# maven - 使用 Maven 从文件中读取

> ID：10534648
> 
> 赞同：1
> 
> 时间：2012-05-10T13:07:02.410
> 
> 标签：maven, package, filenotfoundexception, filereader

我正在尝试使用从文件读取的 MAVEN 构建一个非常小的程序，但我显然做错了，因为它给了我 FileNotFoundException。

这是我的目录结构的样子：

```
my-app
      src
         main|
             |
             |--java|
             |      |
             |      Main.java
             |
             |--resources|
                         |
                         res.txt 
```

res.txt 包含一些我想从 Main.java 读取的字符串

```
...
File file = new File("res.txt");
FileReader fr= new FileReader(file);
BufferedReader br = new BufferedReader( fr);
... 
```

我编译它： C:\my-app mvn package

它在目标下创建 jar。当我在罐子里窥视时，我看到它包含 Main.class 和 res.text*彼此相邻*。（在同一目录下）

尽管如此，当我尝试运行它时：
java -cp target/my-app-1.0-SNAPSHOT.jar Main

我给了我的 FileNotFoundException，Main.class 不知何故看不到 res.txt 文件。为什么？我应该把 res.txt 放在哪里？我还应该配置什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:17:02.547

我假设 .txt 文件被复制到目标文件夹和 jar 文件的一部分？

在这种情况下，使用资源加载器从类路径而不是文件系统中检索它。

有关如何加载文件的一些示例，请参阅[类路径中的读取文件。](https://stackoverflow.com/questions/734671/read-file-in-classpath)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:19:43.747

你可以试试

```
File file = new File(this.getClass().getResource("/res.txt").getFile()); 
```

甚至

```
File file = new File(this.getClass().getResource("/res.txt").toURI()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-20T20:32:33.673

InputStream TokenStream = this.getClass().getResourceAsStream("/files/Token.xlsx");

XSSFWorkbook wb = new XSSFWorkbook(TokenStream);

XSSFSheet 表 = wb.getSheetAt(0);

这适用于读取excel文件

# c# - 使用结构映射 IoC 解决应用程序核心内的常见路由

> ID：10534649
> 
> 赞同：0
> 
> 时间：2012-05-10T13:07:16.170
> 
> 标签：c#, asp.net-mvc-3, structuremap, webforms, asp.net-routing

我们已经着手对我们的框架站点进行 Mvc3 实现，目前使用我们现有的 WebForms 实现。

这项任务使我们能够将 IoC 和 DI 与 Structuremap 集成以实现灵活性。

为了给您一些背景知识，我们有以下项目结构：

App.Core <- 核心类库

App.Mvc <- Mvc 类库
App.Mvc.Web <- Mvc3 APP

App.WebForms <- Webforms 类库
App.WebForms.Web <- Webforms 应用程序或站点

我们在 Mvc 和 WebForms 实现上都使用了 Mvc 的路由，我们使用与 Orchard 项目中相同的方法进行路由发布，使用 IRouteProvider，其中可以创建 N 个 IRouteProvider 实现来添加路由以供发布者注册并按他们的优先级排序。

这工作正常，我们可以使用 MVC 中的 UrlHelper 或 WebForms 中的 Page.GetRouteUrl 注册和使用路由。

问题是我们现在要求 App.Core 也能够解析这些路由（不是所有路由，而是一些最常见的路由），并且这些路由可以根据正在实施的站点而改变。

例如，产品详细信息默认路由可能是“/{category}/{product_name}/{product_id}”，但我们希望能够覆盖它，并且对于某个站点具有“/{brand}/{product_name}/{product_id” }“ 反而。

这意味着在核心中我们不能简单地使用带有一组固定参数的 RouteTable.Routes.GetVirtualPath，因为这些参数可能会因站点而异。

我们创建了一个 IRouteResolver 接口，其中包含最常见路由的方法，该接口具有在每个类库（Mvc 或 Webforms）中向 SM 注册的默认实现，但也可以在每个站点上被覆盖。

界面如下：

```
public interface IRouteResolver
{
    string GetRouteUrl(object routeParameters);
    string GetRouteUrl(RouteValueDictionary routeParameters);
    string GetRouteUrl(string routeName, object routeParameters);
    string GetRouteUrl(string routeName, RouteValueDictionary routeParameters);

    string GetUrlFor(Product product);
    string GetUrlFor(Category category);
    string GetUrlFor(Brand brand);
} 
```

接口的默认 Mvc 实现如下所示：

```
public class MvcRouteResolver : IRouteResolver
{
    UrlHelper _urlHelper;
    ICategoryModelBroker _categoryModelBroker;
    IBrandModelBroker _brandModelBroker;
    IProductModelBroker _productModelBroker;
    public MvcRouteResolver(UrlHelper urlHelper)
    {
        _urlHelper = urlHelper;
        _categoryModelBroker = ObjectFactory.GetInstance<ICategoryModelBroker>();
        _brandModelBroker = ObjectFactory.GetInstance<IBrandModelBroker>();
        _productModelBroker = ObjectFactory.GetInstance<IProductModelBroker>();
    }

    public string GetRouteUrl(object routeParameters)
    {
        return GetRouteUrl(new RouteValueDictionary(routeParameters));
    }
    public string GetRouteUrl(System.Web.Routing.RouteValueDictionary routeParameters)
    {
        return GetRouteUrl(null, new RouteValueDictionary(routeParameters));
    }
    public string GetRouteUrl(string routeName, object routeParameters)
    {
        return GetRouteUrl(routeName, new RouteValueDictionary(routeParameters));
    }
    public string GetRouteUrl(string routeName, System.Web.Routing.RouteValueDictionary routeParameters)
    {
        return _urlHelper.RouteUrl(routeName, routeParameters);
    }
    public string GetUrlFor(Product product)
    {
        string category = string.Empty;
        if (product.Categories.Count > 0)
            category = product.Categories[0].Breadcrumb.Replace("@@", "-");
        else if (product.Brands.Any())
            category = product.Brands.FirstOrDefault().Name;
        else
            category = "detail";

        return GetRouteUrl(new { controller="Product", action="Detail", productId = product.Id, brandName = _productModelBroker.GetSlug(product), productName = _productModelBroker.GetSluggedName(product) });
    }
    public string GetUrlFor(Category category)
    {
        return GetRouteUrl(new { controller = "Product", action = "ListByCategory", id = category.Id, name = _categoryModelBroker.GetSlug(category) });
    }
    public string GetUrlFor(Brand brand)
    {
        return GetRouteUrl(new { controller = "Product", action = "ListByBrand", id = brand.Id, name = _brandModelBroker.GetSlug(brand) });
    }
} 
```

默认的 WebForms 实现如下所示：

```
public class WebRouteResolver : IRouteResolver
{
    Control _control;
    HttpContext _context;
    public WebRouteResolver()
        :this(HttpContext.Current)
    {

    }
    public WebRouteResolver(HttpContext context)
    {
        _context = context;
    }
    public WebRouteResolver(Control control)
    {
        _control = control;
    }
    public WebRouteResolver(Page page)
    {
        _control = page as Control;
    }

    public string GetRouteUrl(object routeParameters)
    {
        return GetRouteUrl(new RouteValueDictionary(routeParameters));
    }
    public string GetRouteUrl(System.Web.Routing.RouteValueDictionary routeParameters)
    {
        return GetRouteUrl(null, new RouteValueDictionary(routeParameters));
    }
    public string GetRouteUrl(string routeName, object routeParameters)
    {
        return GetRouteUrl(routeName, new RouteValueDictionary(routeParameters));
    }
    public string GetRouteUrl(string routeName, System.Web.Routing.RouteValueDictionary routeParameters)
    {
        VirtualPathData virtualPath = null;
        if(_control.IsNotNull())
            virtualPath = RouteTable.Routes.GetVirtualPath(_control.Page.Request.RequestContext, routeName, routeParameters);
        else
            virtualPath = RouteTable.Routes.GetVirtualPath(_context.Request.RequestContext, routeName, routeParameters);

        if (virtualPath != null)
        {
            return virtualPath.VirtualPath;
        }
        return null;
    }
    private string ResolveUrl(string originalUrl)
    {
        if(_control.IsNotNull())
            return _control.ResolveUrl(originalUrl);

        // *** Absolute path - just return
        if (originalUrl.IndexOf("://") != -1)
            return originalUrl;

        // *** Fix up image path for ~ root app dir directory
        if (originalUrl.StartsWith("~"))
        {
            string newUrl = "";
            if (_context != null)
                newUrl = _context.Request.ApplicationPath +
                      originalUrl.Substring(1).Replace("//", "/");
            else
                // *** Not context: assume current directory is the base directory
                throw new ArgumentException("Invalid URL: Relative URL not allowed.");

            // *** Just to be sure fix up any double slashes
            return newUrl;
        }

        return originalUrl;
    }

    public string GetUrlFor(Product product)
    {
        string category = string.Empty;
        if (product.Categories.Count > 0)
            category = product.Categories[0].Breadcrumb.Replace("@@", "-");
        else if (product.Brands.Any())
            category = product.Brands.FirstOrDefault().Name;
        else
            category = "detail";

        if (Config.RoutingEnabled)
        {
            return GetRouteUrl(new { @category = CommonHelper.ToFriendlyUrl(category), name = CommonHelper.ToFriendlyUrl(product.Name), id = product.Id });
        }
        return ResolveUrl(Config.GetStoreSetting("productDetailUrl")) + "?id={0}&name={1}&category={2}".Fill(product.Id, CommonHelper.ToFriendlyUrl(product.Name), CommonHelper.ToFriendlyUrl(category));
    }
    public string GetUrlFor(Category category)
    {
        string breadcrumb = category.Breadcrumb.Replace("@@", "-");
        if (Config.RoutingEnabled)
            return GetRouteUrl(new { @category = CommonHelper.ToFriendlyUrl(breadcrumb), category_id = category.Id});

        return ResolveUrl(Config.GetStoreSetting("productListingUrl") + "?category_id={0}&category={1}".Fill(category.Id, CommonHelper.ToFriendlyUrl(category.Name)));
    }
    public string GetUrlFor(Brand brand)
    {
        if (Config.RoutingEnabled)
            return GetRouteUrl(new { @brand = CommonHelper.ToFriendlyUrl(brand.Name), brand_id = brand.Id });

        return ResolveUrl(Config.GetStoreSetting("productListingUrl") + "?brand_id={0}&brand={1}".Fill(brand.Id, CommonHelper.ToFriendlyUrl(brand.Name)));
    }
} 
```

现在的问题是，由于构造函数参数（Mvc 上的 UrlHelper 和 Webform 上的 Page 或 Control），我们被迫使用具体类型而不是使用 SM 来获取 IRouteResolver 插件的实例。

例如，我有以下扩展来使解析器在页面或控件上可用

```
public static IRouteResolver RouteResolver(this Control control)
{
    return new WebRouteResolver(control);
}
public static IRouteResolver RouteResolver(this Page page)
{
    return new WebRouteResolver(page);
} 
```

这涵盖了 Web 或 Mvc 的默认行为，但不包括我们想要基于每个站点专门覆盖解析器的情况。

问题是，将这些构造函数参数作为插件添加到 SM 中是否安全？

您可以为此功能请求推荐另一种方法/模式吗？

任何想法/建议将不胜感激。

非常感谢，P。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:35:41.433

我想我[在使用 StructureMap 时传递构造函数参数中找到了答案](https://stackoverflow.com/questions/2824088/passing-constructor-arguments-when-using-structuremap)

只要覆盖具有相同的构造函数，我认为：

```
public static IRouteResolver RouteResolver(this Control control)
{
    return ObjectFactory.With("control").EqualTo(control).GetInstance<IRouteResolver>();
}
public static IRouteResolver RouteResolver(this Page page)
{
    return ObjectFactory.With("page").EqualTo(page).GetInstance<IRouteResolver>();
} 
```

可能会工作，出去做一些测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:39:20.327

我采取了另一种方法，上述方法在核心上不起作用。我现在只依靠 RouteCollection 和 HttpContext 来解析路由：

```
 public abstract class BaseRouteResolver : IRouteResolver
{
    protected HttpContext _context;
    protected RouteCollection _routeCollection;
    public BaseRouteResolver()
        :this(RouteTable.Routes, HttpContext.Current)
    {

    }
    public BaseRouteResolver(RouteCollection routeCollection, HttpContext context)
    {
        _routeCollection = routeCollection;
        _context = context;
    }

    public string GetRouteUrl(object routeParameters)
    {
        return GetRouteUrl(new RouteValueDictionary(routeParameters));
    }
    public string GetRouteUrl(System.Web.Routing.RouteValueDictionary routeParameters)
    {
        return GetRouteUrl(null, new RouteValueDictionary(routeParameters));
    }
    public string GetRouteUrl(string routeName, object routeParameters)
    {
        return GetRouteUrl(routeName, new RouteValueDictionary(routeParameters));
    }
    public string GetRouteUrl(string routeName, System.Web.Routing.RouteValueDictionary routeParameters)
    {
        VirtualPathData virtualPath = _routeCollection.GetVirtualPath(_context.Request.RequestContext, routeName, routeParameters);
        if (virtualPath != null)
            return virtualPath.VirtualPath;
        return null;
    }

    public abstract string GetUrlFor(Product product);

    public abstract string GetUrlFor(Category category);

    public abstract string GetUrlFor(Brand brand);
} 
```

# java - xml DSL 中的骆驼谓词示例

> ID：10534654
> 
> 赞同：8
> 
> 时间：2012-05-10T13:07:32.473
> 
> 标签：java, spring, apache-camel

如何实现Spring DSL 中[给出的以下谓词示例：](http://camel.apache.org/predicate.html)

```
Predicate isWidget = header("type").isEqualTo("widget");

from("jms:queue:order")
   .choice()
      .when(isWidget).to("bean:widgetOrder")
      .when(isWombat).to("bean:wombatOrder")
   .otherwise()
      .to("bean:miscOrder")
   .end(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T13:24:23.870

像这样：

```
<route>
  <from uri="jms:queue:order"/>
  <choice>
    <when>
       <simple>${header.type} == 'widget'</simple>
       <to uri="bean:widgetOrder"/>
    </when>
    <when>
      <simple>${header.type} == 'wombat'</simple>
      <to uri="bean:wombatOrder"/>
    </when>
    <otherwise>
      <to uri="bean:miscOrder"/>
    </otherwise>
  </choice>
</route> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T04:02:15.293

所需的简单元素（见[接受的答案](https://stackoverflow.com/a/10534955/1507014)）是

```
<simple>${header.type} == 'widget'</simple> 
```

请注意字段表达式是如何被 ${} 包围的，然后是用于比较的 OGNL 语法，这不是字段表达式本身的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-28T01:37:48.657

如果目标是在 Spring XML DSL 中使用谓词，那么这将更合适 -

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:camel="http://camel.apache.org/schema/spring"
xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

<camel:camelContext trace="true">
    <camel:route>
        <camel:from uri="jms:queue:order" />
        <camel:filter>
            <camel:method ref="myPredicate" />
            <to uri="bean:widgetOrder"/>
        </camel:filter>
    </camel:route>
</camel:camelContext>

<bean id="myPredicate" class="MyPredicate"/>
</beans> 
```

# ruby-on-rails - 覆盖 twitter-bootstrap-rails gem 中的引导变量

> ID：10534658
> 
> 赞同：5
> 
> 时间：2012-05-10T13:07:48.713
> 
> 标签：ruby-on-rails, twitter-bootstrap, twitter-bootstrap-rails

[使用twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails) gem时如何使用自定义变量？我想更改网格系统的默认宽度，并将以下行添加到我的**bootstrap_and_overrides**文件中，但没有任何反应......

```
@gridColumnWidth: 50px; 
```

我究竟做错了什么？

这是我的**bootstrap_and_overrides**文件：

```
 3 @import "twitter/bootstrap/bootstrap";
  4 body { padding-top: 60px; }
  5     
  6 @import "twitter/bootstrap/responsive";
  7     
  8 // Set the correct sprite paths
  9 @iconSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings.png');
 10 @iconWhiteSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings-white.png');
 11     
 12 // Set the Font Awesome (Font Awesome is default. You can disable by commenting below lines)
 13 @fontAwesomeEotPath: asset-path('fontawesome-webfont.eot');
 14 @fontAwesomeWoffPath: asset-path('fontawesome-webfont.woff');
 15 @fontAwesomeTtfPath: asset-path('fontawesome-webfont.ttf');
 16 @fontAwesomeSvgzPath: asset-path('fontawesome-webfont.svgz');
 17 @fontAwesomeSvgPath: asset-path('fontawesome-webfont.svg');
 18 
 19 // Font Awesome
 20 @import "fontawesome";
 21 
 22 // Your custom LESS stylesheets goes here
 23 //
 24 // Since bootstrap was imported above you have access to its mixins which
 25 // you may use and inherit here
 26 //
 27 // If you'd like to override bootstrap's own variables, you can do so here as well
 28 // See http://twitter.github.com/bootstrap/less.html for their names and documentation
 29 //  
 30 // Example:
 31 // @linkColor: #ff0000;    
 32 
 33 // -----------------------------------------------------
 34     
 35 @gridColumnWidth: 50px; 
```

这是我的**applicaiton.css**文件：

```
 1 /*
  2  * This is a manifest file that'll be compiled into application.css, which will include all the files
  3  * listed below.           
  4  *
  5  * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
  6  * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
  7  *
  8  * You're free to add application-wide styles to this file and they'll appear at the top of the
  9  * compiled file, but it's generally better to create a new file per style scope.
 10  *
 11  *= require_self
 12  *= require_tree .         
 13  *= require bootstrap_and_overrides
 14 */  
 15     
 16     
 17 .my_background_plate {     
 18   background-color: #eee;
 19   border: 1px #ddd solid;
 20   -moz-border-radius: 5px; 
 21   border-radius: 5px;
 22   padding: 15px;
 23   margin-bottom: 15px;
 24   margin-top: 15px;        
 25 }
 26 
 27 .my_crud_btn {             
 28   margin-top: 5px;         
 29   margin-left: 15px;       
 30 }
 31 
 32 #footer {                  
 33   margin: 15px 0;          
 34   background-color: black; 
 35 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T02:42:41.363

尝试删除此行：

```
@import "twitter/bootstrap/responsive"; 
```

我相信当您的视口与默认值不匹配时，响应式媒体查询会覆盖 @gridColumnWidth。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T13:14:47.210

您的 application.css 文件是否包含这一行？

```
*= require bootstrap_and_overrides 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T01:20:27.850

我正在使用 twitter 引导程序，我将列宽设置如下：

引导程序.scss

```
/*
*= require bootstrap-colorpicker/bootstrap-colorpicker
*/

$gridColumns: 24;
$gridColumnWidth: 30px;
$gridGutterWidth: 10px;
$linkColorHover: #08c;

@import "colors";
@import "bootstrap";
@import "compass";
@import "mixins";
@import "common_bootstrap";
@import "admin/bootstrap/main_layout";
@import "admin/bootstrap/devise"; 
```

然后我的布局只有：

```
= stylesheet_link_tag "admin_bootstrap" 
```

列都很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T03:01:53.320

虽然我使用的是 sass 转换版本，但我可能错了，但是由于引导程序由较少的引擎处理，我想您需要在导入引导程序本身之前定义覆盖。

移动：

```
@gridColumnWidth: 50px; 
```

到文件的第一行可能会解决问题。据我了解，使用了变量的第一个声明（这些被视为常量）。

与上面的定义相反，如果你想覆盖 CSS 定义，你需要定义你想要覆盖的所有导入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T18:35:21.020

我不确定这笔交易会是什么，因为这对我有用。我在与您的示例相同的行上添加了确切的变量。

在我的 Gemfile 中：

```
 group :assets do
    gem "twitter-bootstrap-rails"
    gem "therubyracer"
  end 
```

我已按照[指南](https://github.com/seyhunak/twitter-bootstrap-rails#installing-to-app-using-generators)进行操作。

您没有运行生成器，还是使用了不同的 gem？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-24T07:46:20.013

要覆盖`bootstrap_and_overrrides.css.less`，请运行以下 Rake 任务：

```
rake assets:clean 
rake assets:precompile 
```

# android - 从 HTML5 页面导航到 Android 应用程序

> ID：10534659
> 
> 赞同：0
> 
> 时间：2012-05-10T13:07:49.460
> 
> 标签：android, html

是否可以从网络浏览器中的 html5 应用程序导航到手机上安装的 android 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:13:43.690

user247245 在他的评论中提到的问题提供了一种方法。另一种方法是使用 Java 类和 HTML5 应用程序来处理应用程序活动的启动。

看看这篇文章：[http](http://satishbellapu.blogspot.co.uk/2011/09/launching-android-native-application.html) ://satishbellapu.blogspot.co.uk/2011/09/launching-android-native-application.html - 虽然作者的英语不是很好，但它确实解释了（或多或少） 这该怎么做。

# java - 如何解决“.class”预期错误？

> ID：10534660
> 
> 赞同：0
> 
> 时间：2012-05-10T13:08:01.333
> 
> 标签：java

目前我在第 40 行有一个错误 - 预期为“.class”。非常感谢任何帮助。

```
 import java.io.*; // For File class and FileNotFoundException
import java.util.Scanner; //For the Scanner class
import javax.swing.JOptionPane; // For the JOptionPane class
/**
 * Write a description of class PartB here.
 * 
 * @Hubble, Kieran 
 * @Version 0.1
 */
public class PartB
{
    public static void main(String[] args) throws FileNotFoundException
    {
        File file; //for file input
        Scanner inputFile; //for file input
        String fileName; //to hold a file name
        String paragraph; //to extract the letter frequencies

        //get a file name from the user.
        fileName = JOptionPane.showInputDialog("enter " + " the name of the file");

        //attempt to open the file.
        try
        {
            file = new File(fileName);
            inputFile = new Scanner(file);
            JOptionPane.showMessageDialog(null, "the file was found.");

            // read the input file, processing data one line at a time
            while(inputFile.hasNext())
            { 
                String str = inputFile.nextLine();
                System.out.println(str);
            }

            //create an Output file
            PrintWriter outputFile = new PrintWriter("crackedcode.txt");

            while(paragraph.length() > 0)
            // error is occurring on the next line (line 40)
            int[]; letterCount = new int[26];
            for (int count = 0; count < paragraph.length; count++) {
                String current = paragraph[count];
                char[] letters = current.toCharArray();
            }  

            for (int count2 = 0; count2 < letters.length; count2++) { char lett = letters[count2]; if ( (lett >= 'A') & (lett <= 'Z') ) {
                        letterCount[lett - 'A']++;
                    }
                }

            for (char count = 'A'; count <= 'Z'; count++) {
                System.out.print(count + ": " +
                    letterCount[count - 'A'] +
                    " ");
            }
            System.out.println();

            // close the input file
            inputFile.close();
        }

    catch (FileNotFoundException e)
    {
        JOptionPane.showMessageDialog(null, "file not found.");
    }

    JOptionPane.showMessageDialog(null, "done.");
    System.exit(0); //terminate program
}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T13:10:57.747

去掉分号

```
int[]; letterCount = new int[26]; 
```

应该

```
int[] letterCount = new int[26]; 
```

此外，您需要用`{}`

# c# - 我如何打开/关闭大写锁定键

> ID：10534664
> 
> 赞同：0
> 
> 时间：2012-05-10T13:08:24.390
> 
> 标签：c#, javascript, jquery

我们可以使用 Jquery 检测 Caps lock 键是 ON/OFF。我的问题是

“我们可以在 Keypress 事件中使用 Jquery 或 Javascript 打开/关闭 Caps lock 键吗”。

并且还使用C#，如何实现这一点？

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:10:41.520

您无法更改大写锁定键是打开还是关闭。但是，您可以根据大写锁定键是打开还是关闭，使用 Javascript 更改输入字符串是小写还是大写。

```
for (char in inputString) {
    if(capslock) { // do your caps lock detection here
        if(char === char.toUpperCase()) { // it's upper case
            char = char.toLowerCase();
        } else {
            char = char.toUpperCase();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:09:54.453

你不能像 javascript 那样做这个 jquery 将在浏览器中被沙盒化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:13:14.767

**仅检测：**

```
$('#id').keypress(function(e) { 
    var s = String.fromCharCode( e.which );
    if ( s.toUpperCase() === s && s.toLowerCase() !== s && !e.shiftKey ) {
        alert('caps is on');
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:13:50.130

如果可以的话，我就可以控制用户的音量，或者检查他的硬盘里有什么，我可能会更好奇并窥探他的网卡流量......
我会用一个简单的JavaScript拥有世界文件 ：）

# css - 有这样的CSS框架吗？

> ID：10534667
> 
> 赞同：6
> 
> 时间：2012-05-10T13:08:39.557
> 
> 标签：css, responsive-design, css-frameworks

我正在寻找一个响应迅速、大（超过 1000 像素）的 CSS 框架，并且我可以在其中执行以下操作：

大型设计：

![大型设计](../Images/59744d73472525651cca58490b3a0f20.png)

正常设计：

![正常设计](../Images/615b6ca85dfac463feff0c92b8e81356.png)

手机设计：

![移动设计](../Images/7470700e44848787fe7dc053f5fcfbaf.png)

有什么建议么 ？我已经尝试过[960.gs](http://960.gs/)、[Titan framework](http://titanthemes.com/titan-framework-a-css-framework-for-responsive-web-designs)、[1140 css grid](http://cssgrid.net/)和[Golden Grid System](http://goldengridsystem.com/)，但我不确定我能在其中做任何我想做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:12:37.263

哦，你需要的是 Css3 媒体查询..

[http://ie.microsoft.com/testdrive/HTML5/CSS3MediaQueries/](http://ie.microsoft.com/testdrive/HTML5/CSS3MediaQueries/)

检查链接

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T13:16:08.490

您想通过检测屏幕尺寸来提供不同的 css。

这个工具可以做到：[Adapt.js](http://adapt.960.gs/)（也看一下[Less](http://lesscss.org/)）

使用 Adapt.js，您可以执行以下操作：

```
// Edit to suit your needs.
var ADAPT_CONFIG = {
  // Where is your CSS?
  path: 'assets/css/',

  // false = Only run once, when page first loads.
  // true = Change on window resize and page tilt.
  dynamic: true,

  // Optional callback... myCallback(i, width)
  callback: myCallback,

  // First range entry is the minimum.
  // Last range entry is the maximum.
  // Separate ranges by "to" keyword.
  range: [
    '0px    to 760px  = mobile.css',
    '760px  to 980px  = 720.css',
    '980px  to 1280px = 960.css',
    '1280px to 1600px = 1200.css',
    '1600px to 1920px = 1560.css',
    '1940px to 2540px = 1920.css',
    '2540px           = 2520.css'
  ]
}; 
```

# android - 多选列表视图复选标记大小

> ID：10534670
> 
> 赞同：0
> 
> 时间：2012-05-10T13:08:52.160
> 
> 标签：android, listview

如何编辑 ListView 的复选标记的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:16:03.200

复选标记是一张图片。设置复选标记的另一个图像。

# oracle - Oracle 从包含日期类型值的列中计算中位数

> ID：10534675
> 
> 赞同：1
> 
> 时间：2012-05-10T13:09:06.873
> 
> 标签：oracle, median

我需要计算一列的中值，该列的数据类型为 date。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:12:15.470

As simple as selecting the median...

```
select median(a) from (
  select date '2010-01-01' a from dual union all
  select date '2010-01-02' a from dual union all
  select date '2010-01-05' a from dual
) 
```

... which yields

```
2010-01-02 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:11:49.443

使用该`MEDIAN()`功能。

[文档链接](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions086.htm)

# c# - 计算节点匹配列表框项的子节点

> ID：10534676
> 
> 赞同：1
> 
> 时间：2012-05-10T13:09:07.167
> 
> 标签：c#, xml, visual-studio-2010, selectedindexchanged

我在选择索引更改时遇到问题。我的 xml 文件包含模块编号、模块名称、评估、学分等。我想在这里实现的是 - 一些课程详细信息从 xml（模块名称和代码）加载到列表框中，但是当用户选择一个模块时，标签应该显示多少该模块的评估。这是我的 XML 文件示例

```
<module>
    <moduleCode>ECWM618</moduleCode>
    <moduleTitle>Semantic and Social Web</moduleTitle>
    <credits>15</credits>
    <semester>2</semester>
    <assessmentDetails>
      <assessment>
        <assessmentName>Coursework1</assessmentName>
        <assessmentType>Coursework</assessmentType>
        <assessmentWeighting>25</assessmentWeighting>
      </assessment>
      <assessment>
        <assessmentName>Coursework2</assessmentName>
        <assessmentType>Coursework</assessmentType>
        <assessmentWeighting>25</assessmentWeighting>
      </assessment>
      <assessment>
        <assessmentName>Exam</assessmentName>
        <assessmentType>Exam</assessmentType>
        <assessmentWeighting>50</assessmentWeighting>
      </assessment>
    </assessmentDetails>
  </module> 
```

这是我得到的代码

```
private void moduleSummaryBox_SelectedIndexChanged(object sender, EventArgs e)
        {
            // when module from modulelist is selected, it read all indicies assigned to the module.
            //!!!!!!!! it reads last node only :(?  wtf im tired ...lol 
            //            
                // read data from modulelist
                string path = Directory.GetCurrentDirectory();
                FileStream fs = new FileStream(@"myCourse.xml", FileMode.OpenOrCreate, FileAccess.Read, FileShare.Read);
                XmlReader moduleReader = XmlReader.Create(fs);
                moduleReader.Read();
                while (moduleReader.Read())
                {
                    int assessmentNo = 0;
                    bool match = false;
                    moduleReader.MoveToElement();

                    if (moduleReader.Name == "assessmentName")
                    {
                        moduleReader.Read();// reads xml file.
                        XmlNodeType nType = moduleReader.NodeType; //XmlNodeType Specifies the type of node. If node matches specified name = true.
                        if (nType == XmlNodeType.Text)// if node type match XmlNodeType ( and there is some text in it) statement becomes true
                        {
                            this.assno.Text = (moduleReader.Value.ToString()); //set mcode label to matched node.                            
                        }
                    }

                    if (moduleReader.Value.ToString() == moduleSummaryBox.Items[moduleSummaryBox.SelectedIndex].ToString())
                    {
                        match = true;
                    }

                    if (match == true)
                    {
                        break;                        
                    }

            }
        } 
```

帮助感谢谢谢:)

编辑：这是进入列表框的内容

```
moduleSummaryBox.Items.Clear();
            XmlDocument doc = new XmlDocument();
            doc.Load(@"myCourse.xml");

            XmlNodeList levelList = doc.GetElementsByTagName("level"+l_level);
            foreach (XmlNode node in levelList)
            {
                XmlElement moduleElement = (XmlElement)node;
                XmlNodeList modules_individ = moduleElement.GetElementsByTagName("module");
                foreach (XmlNode nodes in modules_individ)
                {
                    XmlElement moduleSeperator = (XmlElement)nodes;
                    string ll_moduleCode = moduleSeperator.GetElementsByTagName("moduleCode")[0].InnerText;
                    string ll_moduleTitle = moduleSeperator.GetElementsByTagName("moduleTitle")[0].InnerText;                    
                    moduleSummaryBox.Items.Add(ll_moduleCode+" : " + ll_moduleTitle+" ");
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:04:14.500

你可以试试下面的代码示例： -

```
const string xmlString =
                "<module><moduleCode>ECWM618</moduleCode><moduleTitle>Semantic and Social Web</moduleTitle><credits>15</credits>" +
                "<semester>2</semester><assessmentDetails><assessment><assessmentName>Coursework1</assessmentName><assessmentType>Coursework</assessmentType>" +
                "<assessmentWeighting>25</assessmentWeighting></assessment><assessment><assessmentName>Coursework2</assessmentName><assessmentType>Coursework</assessmentType>" +
                "<assessmentWeighting>25</assessmentWeighting></assessment><assessment><assessmentName>Exam</assessmentName><assessmentType>Exam</assessmentType><assessmentWeighting>50</assessmentWeighting></assessment></assessmentDetails></module>";

            var xml = XElement.Parse(xmlString);
            var qry =
                xml.Descendants()
                    .Where(e => e.Name == "moduleCode" && e.Value == "ECWM618")
                    .Ancestors()
                    .Descendants()
                    .Where(e => e.Name == "assessmentDetails")
                    .Elements("assessment").Count(); 
```

# sql - SQL Server - 将一组特定的行从一个表插入到另一个表

> ID：10534677
> 
> 赞同：1
> 
> 时间：2012-05-10T13:09:11.707
> 
> 标签：sql, sql-server, sql-server-2005

我有一个名为 table_one 的表。（7 百万）行

我想在新表（table_two）上插入 0 - 1 Mil，然后将 1Mil 一 - 2mil 插入同一张表。

```
SET ROWCOUNT 1000000 
```

如何做到这一点？有没有办法指定要插入的行范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:14:43.437

您可以使用[row_number](http://msdn.microsoft.com/en-us/library/ms186734.aspx)：

```
;with cte as (
   select 
      *, 
      row_number() over(order by some_field ) as rn
   from table_one
)
insert into table_two ( fields )
  select fields from cte
   where rn < 1000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:13:33.123

如果您可以在旧表中获取开始和结束 ID，则可以执行以下操作：

```
INSERT INTO NewTable (...)
SELECT ... FROM OldTable
WHERE OldTableID BETWEEN @StartID AND @EndID 
```

如果您还没有有用的 ID，请使用**danihp**使用[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:16:24.773

如果您没有一系列 id，您可以使用 row_number() 生成它们：

```
with toinsert (
    select *, row_number() over (partition by NULL order by <whatever>) as rownum
    from OldTable
)
insert into NewTable(...)
    select ... from toinsert 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:17:57.617

如果您有兴趣获得确切的行数，您可以使用[TOP](http://msdn.microsoft.com/en-us/library/ms189463.aspx)：

```
insert into Table2
select top 1000000 *
  from Table1
 order by ... ID? or newid() if you want random rows. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T13:22:08.863

您最好以[批量导入格式](http://msdn.microsoft.com/en-us/library/ms175937.aspx)导出整个表，将其[拆分](http://www.computerhope.com/unix/usplit.htm)为文本文件，然后将七个左右的部分[批量导入到多个表中。](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

当然，原始表中可能有一些键可以进行 SQL INSERT 操作，但这需要发布的问题中未提供的信息。

# java - java android - 在具有不同屏幕尺寸的图像背景上适合项目

> ID：10534678
> 
> 赞同：0
> 
> 时间：2012-05-10T13:09:12.660
> 
> 标签：java, android, eclipse, button, background

这是我的第一篇文章，我有（我认为）一个不常见的请求......

我正在为每个 android SDK 在最后一个 Eclipse Mac 上编程，并且我使用的 XML 布局比运行时更多……所以如果可能的话，我会在 XML 中搜索解决方案。

情况如下：我使用图像背景来模拟按钮，图像，文本......等项目。在这张图片上，我放置按钮，图像和文本（buttonview textview等......）并将其精确放置在他们在图像上的位置。这个解决方案非常强大，具有良好的设计，但是，如果我更改屏幕的分辨率和/或其大小，每个项目都不会在它的位置，并且会被翻译（水平和/或垂直）一些“ dp”...（是的，我使用 dp，而不是 mm 或 px 或其他）

我真的很尴尬，因为我认为多亏了“dp”，它才能保持相称，但是……不是！

我的问题是如何将我的物品固定在图像背景上的位置，以适应不同的屏幕尺寸/分辨率！

提前感谢大家，我最好的来自法国里昂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:56:09.583

首先要意识到，如果你想让它适合所有屏幕尺寸的像素，那你就不走运了。

其次，接受您无法使其完美适用于所有屏幕尺寸。

第三，您可以为不同的屏幕尺寸创建不同的布局。[您可以在此处](http://developer.android.com/guide/practices/screens_support.html)阅读很多关于支持多种屏幕尺寸的信息。从这里需要做的一件重要的事情是，您可以为不同的屏幕尺寸或不同的密度尺寸进行布局。

# java - 如何在 Hibernate 中映射父级的 bean 类变量？

> ID：10534679
> 
> 赞同：1
> 
> 时间：2012-05-10T13:09:23.423
> 
> 标签：java, hibernate

我有一个名为 Bean_A 的 Bean 类，它映射到 table_A，并且这个 Bean_A 类继承自一个基 bean 类，并且基 bean 类将有一个 unique_reference_key 变量，它将与 Bean_A 类一起保存到数据库中。我已经为 Bean_A 和 table_A 中的 unique_reference_key 字段准备好了休眠文件。

我可以知道如何在 hibernate 中映射基 bean 类以确保在保存 Bean_A 对象时将这个 unique_reference_key 变量保存到数据库中？请注意，这个基 bean 类没有映射到数据库中的任何表，并且没有这样的表来“表示”基 bean。

在我抛出这个问题之前，我已经查阅了以下文章，但仍然无法获得任何线索。

1.  [Hibernate 简化了继承映射](http://www.ibm.com/developerworks/java/library/j-hibernate/)
2.  [Hibernate Chapter 5.Basic O/R Mapping](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-types-anymapping)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:45:28.337

如果您添加一些代码，您的描述会更加清晰。但我认为您只是在寻找[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e7287)中描述的 MappedSuperclass 注释：

> 5.1.6.4。从超类继承属性
> 
> 这有时有助于通过技术或业务超类共享公共属性，而不将其作为常规映射实体（即该实体没有特定表）。为此，您可以将它们映射为@MappedSuperclass。

```
@MappedSuperclass
public class BaseEntity {
    @Basic
    @Temporal(TemporalType.TIMESTAMP)
    public Date getLastUpdate() { ... }
    public String getLastUpdater() { ... }
    ...
}

@Entity class Order extends BaseEntity {
    @Id public Integer getId() { ... }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:24:10.857

我找到了如何在休眠中将基本 bean 属性映射到 Bean_A 的解决方案。

休眠状态：

```
<class name="com.dao.pojo.BaseBean" abstract="true">
   <id name="theId" type="string">
      <column name="primary_key" length="15" />
   </id>
   <property name="unique_ref_key" type="java.lang.String" column="unique_ref_key"/>

   <union-subclass name="com.dao.pojo.Bean_A" table="table_A" lazy="false">
      ...
   </union-subclass>
</class> 
```

请注意，**theId**最初来自 Bean_A，并且已移至 BaseBean。在 table_A 中创建了一个新字段 unique_ref_key。

在 JAVA 中：

```
public abstract class BaseBean {
   private String theId;
   private String unique_ref_key;

   // getter and setter
}

public class Bean_A extends BeseBean {
   ...
} 
```

希望这个解决方案可以帮助其他人。

# makefile - 如何避免多次运行 Virtual Makefile 目标？

> ID：10534680
> 
> 赞同：1
> 
> 时间：2012-05-10T13:09:23.533
> 
> 标签：makefile

我想依赖一个只运行一次的虚拟目标。

`Makefile`到目前为止我尝试过的：

```
a: b

b: c d
    touch b

c:
    # time consuming task that only needs to run once

d:
    # time consuming task that only needs to run once 
```

有没有办法在`b`已经存在时停止依赖链？我可以手动清理以摆脱`b`触发重新运行`c`and `d`。如果存在，我希望能够运行`a`多次而不触发长时间运行的任务`b`。

我有很多任务，比如`c`and `d`，所以我想避免在每个单独的任务中接触一个文件，我不希望文件系统被不必要的文件弄得乱七八糟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:14:44.263

您可以将 Makefile 编写为：

```
a: b

b c:
    # time consuming task that only needs to run once
    touch b 
```

`make c`将无条件地调用你的任务。

`make b`仅在文件 b 不存在时执行您的任务。

`make a`依赖于b，所以任务只在b不存在时执行，

# ruby-on-rails-3 - 如何在迁移的帮助下将数据插入表中，并且该表是先前通过另一个迁移生成的

> ID：10534682
> 
> 赞同：3
> 
> 时间：2012-05-10T13:09:40.507
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1

我有一个包含用户名、角色和公司的角色表。我想通过一个新的迁移文件将数据插入到该表中，那么我该怎么做呢？

我得到了这样的代码，但我该如何使用它以及我无法理解的地方。

```
class Foo < ActiveRecord::Migration
  def self.up
    Users.new(:username => "Hello", :role => "Admin")
  end
  def self.down
    Users.delete_all(:username => "Hello")
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T05:39:18.267

这个：

```
Users.new(:username => "Hello", :role => "Admin") 
```

不会将数据插入到您的表中。它只是创建一个用户对象。要插入数据，您必须调用`save`您创建的对象：

```
Users.new(:username => "Hello", :role => "Admin").save 
```

或者更好的是，使用`create`代替`new`：

```
Users.create(:username => "Hello", :role => "Admin") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T05:27:46.353

您似乎仅使用此数据库迁移来填充数据。

数据库迁移旨在更改数据库架构，而不是填充数据库（尽管您可以添加一些逻辑来在更改后填充数据库；例如，如果您向 users 表添加列 - 角色，您可以添加一些自定义逻辑为用户表中的现有条目填充新添加的字段）。有关详细信息，请参阅 rails api -[迁移](http://guides.rubyonrails.org/migrations.html)。

如果您忘记在之前的数据库迁移中添加代码来填充数据库，您可以撤消之前的迁移并使用以下命令再次应用它：

```
rake db:rollback
... Edit the previous migration ..Add the code to populate
rake db:migrate 
```

如果您只想填充数据库，则应改为为数据库播种。观看[此 railscast](http://railscasts.com/episodes/179-seed-data)以获取更多信息。

编辑：播种数据库：

创建一个名为 db/seeds.rb 的文件
添加记录创建代码，如下所示：

```
['Sampath', 'Suresh'].each do |name|
  User.create(role: 'admin', username: name)
end 
```

然后，

```
rake db:seed 
```

这将读取 seed.rb 并填充数据库。

# c# - VB.NET 中 Program.cs 的等价物是什么

> ID：10534683
> 
> 赞同：16
> 
> 时间：2012-05-10T13:09:44.717
> 
> 标签：c#, vb.net, winforms

VB.NET WinForms 应用程序中 Program.cs 的等价物是什么？

我需要将我的 .CS 应用程序移至 VB.NET。

由于我在 Program.cs 中的 WinForms 项目中没有表单，因此我执行以下操作：

```
Application.Run(new MyForm(parm1, parm2); 
```

如何在 VB.NET 中移动此代码？

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-10T13:15:23.753

默认情况下，VB.NET 应用程序使用神秘的**Windows 应用程序框架**，这意味着构建过程会为您添加一个入口点，该入口点会自动运行您用作主窗体的任何窗体。您可以通过**Project Properties** > **Application** > **Windows application framework properties**访问这些设置。

如果您不想使用该框架，请取消选中**Enable application framework**复选框，然后选择您要`Sub Main`用作**Startup object**的那个。然后，您可以创建一个带有`Public Sub Main`方法的模块，该方法将成为应用程序的入口点，就像在 C# 中的 Program.cs 中一样。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-10T13:13:17.433

不管是 Program.cs 还是 YouNameIt.cs。

默认入口点是`Main()`.

此代码应该可以工作，除非您有另一个入口点（可以在项目设置中指定）。

```
Shared Sub Main()     
   ' Starts the application.
     Application.Run(New Form1())
End Sub 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-14T18:28:56.003

正如[史蒂文的回答](https://stackoverflow.com/a/10534791/4794)所说，默认情况下，您不需要像`Program.cs`VB.NET 应用程序中的任何东西。但是，如果您想替换标准启动代码，您可以添加一个新模块并将其选为启动对象。

首先，右键单击项目并选择添加：模块...。您可以为模块命名任何您喜欢的名称，但我将其命名为 Program.vb 以与 C# 默认值保持一致。粘贴以下代码：

```
Module Program
    Public Sub Main()
        Application.Run(New Form1()) ''//Use your main form here
    End Sub
End Module 
```

接下来，右键单击项目并选择属性。在“应用程序”选项卡上，取消选中“启用应用程序框架”。然后将启动对象更改为Program。还有一个名为 Sub Main 的选项，我认为它可以在`Main()`任何地方运行子例程。

现在您已经替换了标准启动代码，您可以将其他内容添加到您的`Main()`子例程中。我注意到 MSDN 上的另一件事[（如何：更改应用程序的启动对象）](https://msdn.microsoft.com/en-us/library/17k74w0c%28v=vs.100%29.aspx)：

> 当使用自定义 Sub Main 过程作为 Startup 对象时，不会执行应用程序事件（ `Startup`、`Shutdown`、`StartupNextInstance`和）中的代码。`UnhandledException`

# ssl - SSL_accept() 失败并显示“SSL 例程：SSL_GET_NEW_SESSION:ssl 会话 ID 回调失败”

> ID：10534685
> 
> 赞同：0
> 
> 时间：2012-05-10T13:09:47.997
> 
> 标签：ssl, openssl, hp-ux

我在尝试接受来自客户端应用程序的 SSL 连接时收到以下错误。我在 HP-UX IA 上使用 openssl 版本 0.9.8。

> SSL_accept(40107e50) -1 err: 336285997 'error:140B512D:SSL routines:SSL_GET_NEW_SESSION:ssl session id callback failed'

我检查了 /dev/random 和 /dev/urandom。它存在并正常运行。

```
 ls -l /dev/random
cr--r--r-- 1 root sys 144 0x000000 Mar 10 2010 /dev/random

cr--r--r-- 1 root sys 144 0x000001 Mar 10 2010 /dev/urandom 
```

请帮助我确定问题的根本原因。

如果您需要更多信息，请与我们联系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:25:09.187

当 OpenSSL 的 PRNG 未充分播种时，可能会发生这种情况。使用 RAND_status() 检查它，并根据需要使用 RAND_add() 或 RAND_seed() 播种。 [http://www.openssl.org/docs/crypto/RAND_add.html](http://www.openssl.org/docs/crypto/RAND_add.html)

# javascript - 当变量的值已更新时，将 JavaScript 变量重写到 HTML5 画布

> ID：10534687
> 
> 赞同：0
> 
> 时间：2012-05-10T13:09:52.130
> 
> 标签：javascript, html5-canvas, dom-events

我想知道当用户更新变量的实际值时，是否有一种简单的方法可以在 HTML5 画布上“重写”由 JavaScript 变量显示的值？

例如，我正在使用 HTML5 画布和 JavaScript 编写一个非常简单的游戏来教用户一些基本的威尔士语。

目前，我有两个数组：一个包含数字 1-10 的 10 个 .png 图像，另一个包含数字 1-10 的 10 个威尔士单词字符串。

当用户查看页面时，画布会显示一个“开始游戏”按钮，单击该按钮时，会从 images 数组中随机抽取一个元素，从 words 数组中随机抽取一个元素，以及勾号和十字的图像.

如果图像和单词代表相同的数字，用户应该点击勾号，如果不是，用户应该点击叉号。如果用户做出了正确的选择——我有一个 currentScore 变量，其值增加了 5（从 0 开始），如果他们做出错误的选择，currentScore 的值保持不变。

当我在浏览器中查看页面，玩游戏时，如果我在图片和文字代表数字时点击勾号，我可以看到在控制台中 currentScore 的值增加了 5，但是 currentScore 的值画布上显示的内容保持不变。同样，如果我在它们不匹配时单击十字，则控制台中的分数会增加，但画布上的分数不会增加。

所以代码背后的逻辑是正确的，并且它有效，我只是不确定如何在每次更新其实际值时在画布上更新显示的 currentScore 值。

我用来执行此操作的功能如下：

```
function drawLevelOneElements(){
            /*First, clear the canvas */ 
            context.clearRect(0, 0, myGameCanvas.width, myGameCanvas.height);
            /*This line clears all of the elements that were previously drawn on the canvas. */
            /*Then redraw the game elements */
            drawGameElements(); 

            /*Create an array of words for numbers 1-10 */
            var wordsArray = new Array();
            wordsArray[0] = "Un";
            wordsArray[1] = "Dau";
            wordsArray[2] = "Tri";
            wordsArray[3] = "Pedwar";
            wordsArray[4] = "Pump";
            wordsArray[5] = "Chwech";
            wordsArray[6] = "Saith";
            wordsArray[7] = "Wyth";
            wordsArray[8] = "Naw";
            wordsArray[9] = "Deg";

            /*Use Math.random() to generate a random number between 1 & 10 to draw the word and image to the canvas */
            var drawnImage = Math.floor(Math.random()*10);
            var drawnWord = Math.floor(Math.random()*10);

            /*Draw an image and a word to the canvas just to test that they're being drawn */
            context.drawImage(imageArray[drawnImage], 100, 30, 30, 30);
            context.strokeText(wordsArray[drawnWord], 500, 60);

            /*Now draw the tick and cross to the canvas */
            context.font = "30pt Calibri"; /*Set text font and size */
            context.drawImage(tick, 250, 200, 50, 50);
            context.drawImage(cross, 350, 200, 50, 50);

            /*Add an event listener to the page to listen for a click on the tick or the cross, if the user clicks
                the right one to indicate whether the image and word relate to the same number or not, increase the
                user's score*/
            myGameCanvas.addEventListener('click', function(e){
                console.log('click: ' + e.pageX + '/' + e.pageY);
                var mouseX = e.pageX - this.offsetLeft;
                var mouseY = e.pageY - this.offsetTop;
                /*If the tick is clicked, check whether or not the image and word represent the same number, if they do,
                    increase the score, if not, leave the score as it is*/
                if((mouseX > 250 && mouseX < 300) && (mouseY > 200 && mouseY < 250) && (drawnImage == drawnWord)){ 
                    currentScore = currentScore + 5;
                    console.log('Current Score = ' + currentScore);
                } else if((mouseX > 250 && mouseX < 300) && (mouseY > 200 && mouseY < 250) && (drawnImage != drawnWord)){
                    currentScore = currentScore; 
                    console.log('Current Score = ' + currentScore);

                /*If the cross is clicked, check whether or not the image and word represent the same number, if they 
                    don't, increase the score, otherwise, leave the score as it is*/
                } else if((mouseX > 350 && mouseX < 400) && (mouseY > 200 && mouseY < 250) && (drawnImage != drawnWord)){
                    currentScore = currentScore + 5;
                    console.log('Current Score = ' + currentScore);
                } else if ((mouseX > 350 && mouseX < 400) && (mouseY > 200 && mouseY < 250) && (drawnImage == drawnWord)){
                    currentScore = currentScore; 
                    console.log('Current Score = '+ currentScore); 
                } else {
                    console.log('The click was not on either the tick or the cross.');
                }
            }, false); 
```

我不会认为这样做需要太多代码，但我就是不知道该怎么做。任何帮助将非常感激。谢谢！

****编辑****

我已按照您的建议添加了代码，但由于某种原因，画布上显示的分数仍未更新...

```
if((mouseX > 250 && mouseX < 300) && (mouseY > 200 && mouseY < 250) && (drawnImage == drawnWord)){ 
                    currentScore = currentScore + 5;
                    context.clearRect(currentScorePositionX, currentScorePositionY, 20, 20); /*Clear the old score from the canvas */
                    context.strokeText(currentScore, 650, 15); /*Now write the new score to the canvas */
                    console.log('Current Score = ' + currentScore);
                } else if((mouseX > 250 && mouseX < 300) && (mouseY > 200 && mouseY < 250) && (drawnImage != drawnWord)){
                    currentScore = currentScore; 
                    console.log('Current Score = ' + currentScore); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:13:38.490

您可能没有想到的是，画布元素可以是透明的，并且可以相互堆叠。这样，您可以拥有一个仅 GUI 的画布和一个动作画布，并将它们分开。如果您对 css 没有信心，并且想要一个示例，那么绝对定位将使这项工作发挥作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:09:53.577

我对我的函数进行了一些更改，现在有以下代码：

```
/*Add an event listener to the page to listen for a click on the tick or the cross, if the user clicks
                the right one to indicate whether the image and word relate to the same number or not, increase the
                user's score*/
            myGameCanvas.addEventListener('click', function(e){
                console.log('click: ' + e.pageX + '/' + e.pageY);
                var mouseX = e.pageX - this.offsetLeft;
                var mouseY = e.pageY - this.offsetTop;
                /*If the tick is clicked, check whether or not the image and word represent the same number, if they do,
                    increase the score, if not, leave the score as it is*/
                if((mouseX > 250 && mouseX < 300) && (mouseY > 200 && mouseY < 250) && (drawnImage == drawnWord)){ 
                    currentScore = currentScore + 5;
                    var scorePositionX = currentScorePositionX;
                    var scorePositionY = currentScorePositionY;
                    context.clearRect(scorePositionX, scorePositionY, 30, 30); /*Clear the old score from the canvas */
                    context.strokeText(currentScore, 650, 50); /*Now write the new score to the canvas */
                    console.log('Current Score = ' + currentScore);
                } else if((mouseX > 250 && mouseX < 300) && (mouseY > 200 && mouseY < 250) && (drawnImage != drawnWord)){
                    currentScore = currentScore; 
                    console.log('Current Score = ' + currentScore);

                /*If the cross is clicked, check whether or not the image and word represent the same number, if they 
                    don't, increase the score, otherwise, leave the score as it is*/
                } else if((mouseX > 350 && mouseX < 400) && (mouseY > 200 && mouseY < 250) && (drawnImage != drawnWord)){
                    currentScore = currentScore + 5;
                    context.clearRect(currentScorePositionX, currentScorePositionY, 20, 20); /*Clear the old score from the canvas */
                    context.strokeText(currentScore, 500, 50); /*Now write the new score to the canvas */
                    console.log('Current Score = ' + currentScore);
                } else if ((mouseX > 350 && mouseX < 400) && (mouseY > 200 && mouseY < 250) && (drawnImage == drawnWord)){
                    currentScore = currentScore; 
                    console.log('Current Score = '+ currentScore); 
                } else {
                    console.log('The click was not on either the tick or the cross.');
                }
            }, false); 
```

现在显示当前分数，并在每次用户正确选择刻度线或叉号时更新它，但是，每次将新分数绘制到画布时，而不是删除先前绘制的分数并写入新分数取而代之的是，它只是将其写在顶部，因此旧乐谱和新乐谱都显示在同一位置——这有点混乱，而且难以阅读。

此外，乐谱的位置、字体和大小也不是我想要的——我原本打算将它显示在我的“乐谱”中，但是，它现在显示在乐谱下方的主“乐谱”上画布的显示部分。字体也不同——数字不显示为通常的字符，即 5、10 等，但字体更大，就像“泡泡书写”，数字中间有空格。字体也大得多——至少是我在“得分栏”中显示的文本大小的两倍。

有人可以向我指出我在这里做错了什么吗？非常感谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:24:53.697

您需要清除部分或全部画布并重新绘制它以更新画布显示。您已经在 drawLevelOneElements() 的第一行执行此操作 - 您清除了整个屏幕。要清除一个部分，您可以执行以下操作：

```
context.clearRect(x, y, scoreDigitWidth, scoreDigitHeight); 
```

x 和 y 是您的分数数字的坐标， scoreDigitWidth 和 scoreDigitHeight 是宽度和高度。然后你可以使用 context.drawImage() 填充这个被清除的区域。您可以使用不断循环更新框架来启动该过程，或者如果它不需要经常更新，只需在行后运行它：

```
currentScore = currentScore; 
```

即当你知道新的分数时。

您通常最好清除和重绘画布上发生的变化，而不是全部。这是一篇关于性能的好文章。[http://www.html5rocks.com/en/tutorials/canvas/performance/](http://www.html5rocks.com/en/tutorials/canvas/performance/)。

它看起来像一个非常简单的动画，你最好只使用 html 元素（divs、imgs 等）而不是画布，这将允许使用不支持画布元素的浏览器的用户仍然使用它，即 IE8 <.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:28:34.973

基于**Ed Kirk**所说的，您可以通过每隔一段时间将其与自身进行比较来检测分数变量何时发生变化（例如，对于初学者来说，50 毫秒）。

**例子：**

```
var myScore = 0;
var myOldScore = myScore;

setInterval(function() { 
    if(myScore != myOldScore) {
        myOldScore = myScore;
        // the variable has changed, write it to the canvas
    }
}, 50); // will execute every 50 milliseconds 
```

# css - :hover 仅适用于 rotateX 转换 div 的下部

> ID：10534697
> 
> 赞同：3
> 
> 时间：2012-05-10T13:10:17.963
> 
> 标签：css, hover, css-transforms

我有 div 应用了 CSS rotateX 变换：

```
-webkit-transform: perspective(500px)  rotateX(60deg) rotateY(60deg) ; 
```

和一堆较小的 div 漂浮在其中，并应用了 :hover 规则。问题是只有一半的内部 div 对 :hover 事件做出反应。

JsFiddle：http: [//jsfiddle.net/fNxgn/4/](http://jsfiddle.net/fNxgn/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:26:03.510

如果您在 css 中删除`height: 200px`所有块将响应悬停事件

# javascript - Jquery - 背景淡化。

> ID：10534698
> 
> 赞同：0
> 
> 时间：2012-05-10T13:10:19.960
> 
> 标签：javascript, jquery, jquery-ui, mouseover, fade

当您将鼠标悬停在框上时，我正在尝试使背景淡入。

Box1 是我鼠标悬停的盒子，hover1 是进来的新背景。这实际上工作得很好。但是，它会加载 acript，这意味着，如果我将鼠标悬停在盒子上而发疯，即使我的鼠标静止不动，褪色也会无休止地继续下去。我需要添加某种停止功能。内容是当我将鼠标悬停在内容框中时会更改的文本。这工作正常。

```
$("#box1").mouseover(function(){
    $("#background").switchClass("nohover", "hover1", 500);
    $("#content").html(box1);

});

$("#box1").mouseout(function(){
    $("#background").switchClass("hover1", "nohover", 150);
    $("#content").html(content);

}); 
```

我也尝试过使用 var，但我仍然遇到同样的问题。如果我将鼠标快速悬停，则褪色会继续运行。

```
 var goeft = 0;
$("#box1").mouseover(function(){
 if(goeft == 0) {
   $("#background").switchClass("nohover", "hover1", 500);
  $("#content").html(box1);
   goeft = 1;
 }
});

$("#box1").mouseout(function(){
    $("#background").switchClass("hover1", "nohover", 150);
   $("#content").html(content);

   goeft = 0;
}); 
```

CSS代码-v-

```
 /* CSS Document */
       body
      {
      background-color:#B1EB78;
      }

     #wrapper
     {
     border:5px white solid;
     border-radius:15px;
     background-image:url(../images/mill.jpg);
     }

     #header
     {
     height:120px;
     background-image:url(../images/logo.png);
     background-repeat:no-repeat;
     }

     #content
     {
     height:250px;
     background-image:url(../images/trans_white.png);
     border:1px black solid;
     border-radius:5px;
     }

     #space
     {
     height:40px;
     }

     #space2
     {
     height: 10px;
     }

     #box1
     {
     height:250px;
     background-image:url(../images/trans_green.png);
     }

     #background
     {
     width:100%;
     height:100%;
     border-radius:9px;
     }

    .hover1
    {
    background-color:red;

    }

   .nohover
   {

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:15:27.087

```
 var goeft = 0;
$("#box1").mouseenter(function(){
 if(goeft == 0) {
   $("#background").switchClass("nohover", "hover1", 500);
  $("#content").html(box1);
   goeft = 1;
 }
});

$("#box1").mouseleave(function(){
    $("#background").switchClass("hover1", "nohover", 150);
   $("#content").html(content);

   goeft = 0;
}); 
```

我不知道这些类，但我认为 mouseenter 和 mouseleave 是 mouseout 和 mouseover 的更好选择

# security - 银行网站上经常使用的个性化安全图像背后的目的是什么？

> ID：10534707
> 
> 赞同：15
> 
> 时间：2012-05-10T13:10:57.010
> 
> 标签：security

许多银行网站让您在创建帐户时选择自己的安全图像。对于后续登录，图像会与标题一起显示，如果您没有看到您选择的图像和标题，则会指示您不要登录。

这个添加步骤的目的是什么，它可以防止哪种类型的攻击？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T13:18:12.017

简短的回答：

[网络钓鱼](http://en.wikipedia.org/wiki/Phishing#Augmenting_password_logins)。

很长的故事：

如果您收到一封虚假电子邮件，指示您通过以下链接登录您的银行账户：http: [//i.am.an.cyber.pirate.com/give/me/your/money/paypal/official/site/ultra /安全/网站/](http://i.am.an.cyber.pirate.com/give/me/your/money/paypal/official/site/ultra/secured/website/)

而且因为你不知道那种人，你点击它，但由于你没有看到你的自定义图像，你**知道**你不在官方网站上，因为你，只有你应该知道这个图片。

假设您选择了一张您的狗的照片并看到了您的邻居猫，那么请不要登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:20:36.937

任何第三方都可以复制网页..并将其展示给您..您最终将提供您的数据，因为对您来说页面上没有什么不同，
但如果他们有您最初上传的图像，则第三方黑客不会能够知道那是什么图像，因此无法复制整页

# webdriver - WebDriver URL Timeout 似乎不起作用

> ID：10534711
> 
> 赞同：0
> 
> 时间：2012-05-10T13:11:10.817
> 
> 标签：webdriver, selenium-webdriver, selenium-firefoxdriver

我的测试类（java）中有以下代码，但超时似乎不起作用（它根本没有效果）。我已经用非常慢的连接对其进行了测试，我预计它会在 5 秒后失败，但它会无限期地等待页面加载，有时它会在 8-10 秒内返回，并且测试通过，因为页面实际加载但不在我指定的时间。知道为什么页面超时命令没有做它应该做的事情吗？

`protected static WebDriver driver; driver = new FirefoxDriver(); driver.manage().timeouts().pageLoadTimeout(5,TimeUnit.SECONDS); driver.get("http://www.google.com");`

我正在使用 Selenium 2.20.0。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:58:31.263

pageLoadTimeOut makes no sense without "unstable" Firefox profile.

Probably, you will have to either download the plugin been mentioned at the selenium download page OR write a while loop that would run indefinitely and break only when the element is found. Make use of try-catch blocks as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:06:35.227

然后将其报告为问题

[http://code.google.com/p/selenium/issues/list](http://code.google.com/p/selenium/issues/list)

# javascript - 输入数据时使用 jQuery 更新 div

> ID：10534712
> 
> 赞同：0
> 
> 时间：2012-05-10T13:11:12.707
> 
> 标签：javascript, jquery

我有一个包含四个文本输入元素的表单。每次更新其中一个时，我希望四个文本输入框的总和显示在下面的 div 中，而无需用户按下按钮。这是我到目前为止所拥有的（我从[这里](https://stackoverflow.com/questions/628508/how-to-update-div-when-on-select-change-in-jquery)得到了这个想法[这仅适用于 select 吗？]）：

```
var getSum = function() {
    var email = $('#emailDown').val();
    var internet = $('#internetDown').val();
    var server = $('#serverDown').val();
    var desktop = $('#pcDown').val();
    //TODO:Check for integers (not needed with sliders)
    var sum = email + internet + server + desktop;
    $('totalHoursDown').html(sum);
}
$('#emailDown').change(getSum(event));
$('#internetDown').change(getSum(event));
$('#serverDown').change(getSum(event));
$('#pcDown').change(getSum(event)); 
```

目前，它没有更新。（不用担心验证）。我是 PHP 新手，所以我不确定是否应该在这种情况下使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T13:12:59.307

您的选择器中缺少`#`or `.`，具体取决于`totalHoursDown`是类还是 ID：

```
$('totalHoursDown').html(sum);

// Should be this if ID
$('#totalHoursDown').html(sum);
// or this if class
$('.totalHoursDown').html(sum); 
```

**更新：**

**我通过jmar777**稍微修改了代码以使其工作。试试这个：

```
$(function(){
    var $fields = $('#emailDown, #internetDown, #serverDown, #pcDown'),
    $totalHoursDown = $('#totalHoursDown');
    $fields.change(function() {
        var sum = 0;
        $fields.each(function() 
                 { 
                     var val = parseInt($(this).val(), 10);
                     sum += (isNaN(val)) ? 0 : val; 
                 });
        $totalHoursDown.html(sum);
    });
}); 
```

这里也是一个工作小提琴：http: [//jsfiddle.net/mSqtD/](http://jsfiddle.net/mSqtD/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:15:20.680

尝试这个：

```
var $fields = $('#emailDown, #internetDown, #serverDown, #pcDown'),
    $totalHoursDown = $('#totalHoursDown');
$fields.change(function() {
    var sum = 0;
    $fields.each(function() { sum += $(this).val(); });
    $totalHoursDown.html(sum);
}); 
```

此外，在您的示例中，您有`$('totalHoursDown').html(sum);`，我假设它是一个 ID 选择器（即`$('#totalHoursDown').html(sum);`.

# c - C中非常简单的服务器

> ID：10534713
> 
> 赞同：5
> 
> 时间：2012-05-10T13:11:15.293
> 
> 标签：c, client-server

作为一项任务，我们必须用 C 语言实现带有一些客户端的非常简单的服务器。这个想法是，使用系统 V IPC 队列，我们​​创建一个客户端注册的队列，然后对于每个客户端，都有一个带有消息的队列。我想知道服务器部分。我应该有这样的事情：

```
while(1)
{
  //some queue using code
  sleep(100);
} 
```

因此，对于每个时间间隔，我都会检查每个队列并做我必须做的事情，或者我应该使用信号通知服务器至少有一个队列已准备好进行管理。

它是如何在普通服务器中完成的，他们是否有一段时间检查他们需要做的一切，或者有更合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T21:08:09.667

您必须按照以下方式做一些事情：

这是一个非常基本的答案，需要定义和原型到位，但这应该给你一个基本的选择，例如。

这段代码在freebsd、ubuntu和我的windows计算机上都有效（假设你有正确的头文件）它也被缩小并删除了一些定义，就像套接字描述符defs一样糟糕，因为那些几乎是——它就是这样。

```
struct timeval timeout;
int rc
fd_set wfdset,rfdset,errfdset;
//Do some checks put them in either read fdset or write fdset or error fdset 
FD_SET (socket_sd, &rfdset);
timeout.tv_sec = 0;
timeout.tv_usec = 250 * 1000;
rc = select (maxfds + 1, &rfdset, &wfdset, NULL, &timeout);
//loop through the sockets and read from them at this point. 
```

Select 可移植到 Win32 和 UNIX，但如果您在 unix IE：FreeBSD 中对套接字进行任何繁重的工作，则不推荐选择它。如果您需要更深入并更好地管理您的套接字，请使用 kqueue 或 epoll 等。

# sas - SAS：数据步骤和密钥 - 选项

> ID：10534715
> 
> 赞同：0
> 
> 时间：2012-05-10T13:11:18.307
> 
> 标签：sas

我不确定此代码是否会在没有警告或错误的情况下运行。我已经用修饰符设置了`key`选项。`UNIQUE`

排队会发生什么`set`？

```
data One(keep= f1 f2);  
   attrib f2 length = $4;
   set Two key = f3 / unique;   /* Unexpected behaviour? */
   if (f1=0) then do; 
       f2 = 'Zero';
       output;
   end;
run; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:13:09.887

KEY= 选项用于已索引的查找数据集，其值在第二个数据集中查找。因此，数据步骤需要 2 个集合语句。在您的代码中，没有数据集可以从“Two”中查找值，这会导致所有变量都具有缺失值的无限循环。如果您在单独的 SET 语句中添加了“Two”数据集，那么它只会返回它的副本（没有 f3 变量和您输入的转换）。你显然不想这样做，我只是建议它使代码工作。

网上有很多关于如何执行索引键合并的示例，如果您在大型数据集中查找少量值，这是一种有效的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:41:59.340

不知道你在问什么。只要您的数据集 TWO 有一个名为 F3 的索引，它在语法上就是正确的。该索引可能是复合索引（多个变量）或名为 F3 的变量的单个索引。变量 F1 可能在数据集 TWO 中，但如果不是，它将丢失。

# zen-cart - 如何编辑 Zen Cart 中显示产品的视图？

> ID：10534716
> 
> 赞同：1
> 
> 时间：2012-05-10T13:11:19.833
> 
> 标签：zen-cart

我有一个名为“Fashion & Jewellery,Bag”的产品类别，它有两个子类别“男士”和“女士”，这两个子类别也有一些子类别。

[http://24sevensale.com.au/index.php?main_page=index&cPath=66](http://24sevensale.com.au/index.php?main_page=index&cPath=66)

现在我想在同一页面中查看男人和女人的子类别，男人和女人的子类别只会超链接。

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T19:38:58.627

您将需要创建一个或多个自定义页面，因为产品类别页面每页显示一个类别。Zen Cart 有一个覆盖系统，允许在您想要使用的核心文件之外进行自定义，以便您可以在需要时更新核心而不覆盖您的自定义。它在这里描述：[http ://www.zen-cart.com/content.php?228-understanding-the-override-system](http://www.zen-cart.com/content.php?228-understanding-the-override-system)

# sencha-touch - Sencha Touch - 添加到视口时生成一个面板的多个实例

> ID：10534717
> 
> 赞同：0
> 
> 时间：2012-05-10T13:11:23.890
> 
> 标签：sencha-touch, sencha-touch-2

我在面板内生成了字段集（文本框、选择字段等）。登录完成后，我使用来自我的 controller.js 的波纹管代码显示此面板

```
Ext.Viewport.add({xtype: 'IntakePanel'});
Ext.Viewport.setActiveItem({xtype: 'IntakePanel'}); 
```

但是在此之后，如果我尝试检查，我会发现那里有两个面板

![如下图所示](../Images/fb09aafe753260bbcb82cdab2f8a036b.png)

因此，如果我尝试访问面板的字段，我会得到长度为 2/4 的数组等。我尝试使用删除它

```
 Ext.Viewport.remove(Ext.Viewport.getActiveItem(), true); 
```

但没有多大帮助。

请帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:28:15.583

我认为框架正在重新实例化您的组件，因为当您仅传递 xtype 时，它​​无法知道您正在尝试引用与以前相同的实例。尝试将 id 添加到您的实例，而不是将 xtype 传递给 setActiveItem，而是为其提供组件查询的结果。

```
Ext.ComponentQuery.query('#yourCompoId'): 
```

# sql-server - 如何通过 Getdate() 进行选择

> ID：10534719
> 
> 赞同：0
> 
> 时间：2012-05-10T13:11:31.957
> 
> 标签：sql-server, sql-server-2008

`Getdate()`我想在这段代码中通过 dte 进行选择

```
 select a.Dte,
  SUM ( p.IMoney - p.OMoney) from Daily a 
  cross join 
  Daily p 
  where a.Dte >= p.Dte 
  group by a.Dte 
```

# jquery-mobile - jquery-mobile phonegap 简单对话框

> ID：10534720
> 
> 赞同：0
> 
> 时间：2012-05-10T13:11:35.203
> 
> 标签：jquery-mobile, cordova, jquery-ui-dialog

想在 phonegap 上用 jquery-mobile 实现简单的对话框：http: [//dev.jtsage.com/jQM-SimpleDialog/demos/string.html](http://dev.jtsage.com/jQM-SimpleDialog/demos/string.html)

但我的 LogCat 告诉我（当我按下按钮时）：

> 05-10 15:02:37.960: V/webview(10536): singleCursorHandlerTouchEvent-getEditableSupport FASLE

```
<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=600; user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Prototyp_V.2.0</title>
    <link rel="stylesheet" href="js/master.css" type="text/css" media="screen"   title="no title" charset="utf-8">
    <link rel="stylesheet" href="js/jquery.mobile-1.0a3.min.css" type="text/css" charset="utf-8">  
    <script type="text/javascript" charset="utf-8" src="js/main.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.0.min.js"></script>
    <style type="text/css">
     .ui-page {
      background: #ffffff;
      }
    </style>  
</head>
<body onload="init();" id="stage" class="theme">        
<script type="text/javascript">     
  function test() {         
    alert("test");      
    $(document).delegate('#simplestring', 'click', function() {
      $(this).simpledialog({
        'mode' : 'string',
        'prompt' : 'What do you say?',
        'buttons' : {
        'OK': {
           click: function () {
             $('#dialogoutput').text($('#dialoglink').attr('data-string'));
           }
        },
        'Cancel': {
           click: function () { },
             icon: "delete",
             theme: "c"
           }
        }
      })
    })
  }
</script>   

<div data-role="page" id="id0">
    <div data-role="header" data-theme="c">
        <h1>Heading</h1>
    </div>
    <div data-role="content">  
       <div id="twitter_"><center>Dialog Box</center>   
          <p>You have entered: <span id="dialogoutput"></span></p>
          <a href="#" id="dialoglink" onClick=test(); data-role="button">Open  Dialog</a>   
       </div>               
    </div>
</body>
</html> 
```

警报“测试”被调用，但我总是得到这个光标事件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:02:32.513

你是什​​么意思“光标事件”？和

像这样使用按钮：

```
<a href="#" id="dialoglink"  data-role="button">Open  Dialog</a> 
```

和

你的功能应该是这样的

```
$(document).delegate('#dialoglink, 'click', function() { 
```

/// 你的其他代码在这里

});

在测试功能之外使用

# oracle - 如何在高负载下在 Oracle DB 服务器中部署新版本的 PL/SQL 包？

> ID：10534722
> 
> 赞同：5
> 
> 时间：2012-05-10T13:11:44.373
> 
> 标签：oracle, deployment, plsql, package

有一个基于 Oracle DB Server 的高负载 24/7 系统。
许多客户端应用程序都使用该包`pkg1`。
是否有可能（Oracle 实施或最佳实践）`pkg1`即时安装新版本的软件包？
我的意思是没有出现“资源繁忙”错误并丢失当前会话等？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T13:14:49.380

如果您使用的是 Oracle 11，请查看[基于版本的重新定义](http://docs.oracle.com/cd/E11882_01/appdev.112/e41502/adfns_editions.htm#ADFNS020)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-29T10:59:25.080

如果您记住一些规则，即使在生产中部署新版本的数据库包也不是问题：

*   如果某些会话当前正在使用它，则无法部署更新的包主体。为此，您将需要基于版本的重新定义，但根据我的经验，这不应该过于频繁，而可能是您的应用程序的设计缺陷。此外，即使 EBR 也需要启动新会话，afaik。
*   部署包头会影响其他部分，但通常你会在主体中拥有 99% 的包更新。
*   为了避免丢失会话信息，创建没有任何包会话数据的包：没有包体代码，没有包变量，既不在标头或正文中，也没有常量（是的，没错，没有 CONSTANT 定义，它们为一些奇怪的东西创建状态原因），没有表功能。最简单的解决这些限制的方法是拥有一个单独的“状态”包，它具有所有这些特性和尽可能少的业务逻辑。

考虑到这一点，您可以创建即使在生产中也可以更新而不会造成任何伤害的包体。如果确实使用了包，则重新编译将等待包上的锁定，在最坏的情况下可能会超时，您需要重试。

同样，如果这一切都无济于事，重新设计可能是必要且有帮助的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T20:14:50.250

只要您的包不保持状态（没有全局变量）并且系统可以在包上锁定一毫秒（操作将在 1500（？）秒后超时），您就可以实时部署 PL/SQL 包系统。

# php - 使用 PHP 连接到 Active Directory 时是否需要 ldap.conf？

> ID：10534724
> 
> 赞同：2
> 
> 时间：2012-05-10T13:11:48.993
> 
> 标签：php, apache, ldap

我正在尝试使用 PHP (5.3.2)/Apache (2.0.59)/Windows (2003) 对 Active Directory 进行身份验证。

但是，我收到以下错误：

**ldap_start_tls() [function.ldap-start-tls]：无法启动 TLS：第 15 行 E:\my_page.php 中的连接错误**

这是我当前的脚本：

```
putenv('LDAPTLS_REQCERT=never');

$resource = ldap_connect("xxx") 
    or die("Failed to connect to LDAP server."); 

echo "Connected to LDAP server.<br />"; 

//these options may not be necessary in all environments 
ldap_set_option($resource, LDAP_OPT_PROTOCOL_VERSION, 3);    
ldap_set_option($resource, LDAP_OPT_REFERRALS, 0); 

$result = ldap_start_tls($resource) or die("Failed to start TLS.<br />"); 

echo "Started TLS.<br />"; 

$result = ldap_sasl_bind($resource, NULL, '', 'GSSAPI', 'xxx', '', '') 
    or die("Failed to GSSAPI bind.<br />"); 

echo "GSSAPI bound."; 
```

我已经查看了[这个问题以寻求帮助](https://stackoverflow.com/questions/2689629/how-do-i-solve-ldap-start-tls-unable-to-start-tls-connect-error-in-php)，但是，我一直看到对 ldap.conf 的引用。

这是您连接到的 LDAP 服务器中的 OpenLDAP 吗？如果是，由于使用现有的企业 Active Directory，我可以忽略它吗？

或者这适用于连接到 LDAP 服务器的 PHP 库（即 ldap_connect()）？

**编辑#1**

Wireshark的截图...

![Wireshark 截图](../Images/c0f91f717b8faf1f9552a4dc35294290.png)

我在那里看到，未知的 CA ......我将如何解决这个问题（寻找在线 ATM）。

**编辑#2**

更新，我现在得到一个不同的错误。我在 c:\ 和 c:\openldap\sysconf 上创建了 ldap.conf

ldap.conf 的内容：

```
#
# LDAP Defaults
#

TLS_REQCERT never 
```

现在，它卡在了正常的 ldap_sasl_bind 方法 - 它没有安装。

**编辑#3**

完成品：

```
function isAuthenticated($user, $pass){
    //init
    $ldap_server = "";
    $ldap_user = "";
    $ldap_pass = "";
    $ldap_dn = "";
    $ldap_filter_fields = array("dn","cn","samaccountname");
    //establish connection
    $ldap_conn = ldap_connect($ldap_server) 
        or die("Failed to connect to LDAP server."); 

    //these options may not be necessary in all environments 
    ldap_set_option($resource, LDAP_OPT_PROTOCOL_VERSION, 3);    
    ldap_set_option($resource, LDAP_OPT_REFERRALS, 0); 

    //Magic happens here, encrypted tunnel starts!
    $result = ldap_start_tls($ldap_conn) or die("Failed to start TLS.<br />"); 

    $out = 0;
    //connect using our known user
    if($bind = ldap_bind($ldap_conn, $ldap_user, $ldap_pass)){  
        //search for the user
        $ldap_search_results = ldap_search($ldap_conn, $ldap_dn, "samaccountname=".$user, $ldap_filter_fields) or die ("Failed to search LDAP");
        //get entry
        $ldap_record = ldap_get_entries($ldap_conn, $ldap_search_results);
        debug($ldap_record);
        if($ldap_record["count"] > 0){
            //try to authenticate user here
            if($bind2 = @ldap_bind($ldap_conn, $ldap_record[0]["dn"], $pass))
                $out = 1;
            else
                //wrong password
                $out = 0;
        }
        else
            //user wasn't found
            $out = 3;       
    }
    else
        //something happened when connecting with our ldap_user
        $out = 2;

    return $out;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:59:08.883

您与未知的 CA 走在正确的轨道上。我在 CentOS 上连接到 AD 时遇到了类似的问题。我必须从 AD 服务器导出 CA 证书并将其配置为在 CentOS 系统上受信任，这涉及将证书复制到`/etc/openldap/cacerts`并运行 OpenSSL 的 `c_rehash`. 不幸的是，我不确定如何告诉您在 Windows 下使用相同的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-06T13:18:49.177

是的，如果您尝试连接尚未在运行 Apache 的主机上建立信任的 AD，则需要更改 ldap.conf 文件并将 TLS_REQCERT 的值更改为要求。如果您有来自受信任 CA 的证书，即已安装在机器操作系统密钥库上，那么它可能会在 TLS_REQCERT 设置为 never 的情况下运行，否则您将必须显式提供证书并更改变量 TLS_REQCERT。

# mingw - 使用 MinGW 在 Windows 上构建 GLEW 1.7.0

> ID：10534726
> 
> 赞同：7
> 
> 时间：2012-05-10T13:11:52.690
> 
> 标签：mingw, glew

之前有人问过很多问题：**如何在 Windows 上使用 MinGW 编译 GLEW 1.7.0 源代码？**目标是从 c++ 项目动态链接库。

更多信息：我正在使用 QtCreator，因此使用 qmake 进行构建。我在 Windows 7 上。到目前为止，我已经尝试/查看了以下链接。

[使用发布的批处理文件也尝试用 g++ 替换 gcc](https://stackoverflow.com/questions/6005076/building-glew-on-with-mingw)

[使用 vc++ 库静态，构建 dll.a 重用 vc++ .dll](http://sourceforge.net/mailarchive/forum.php?thread_name=20110924150401.GA22607@perso.beuc.net&forum_name=glew-users)

[获取 MSYS 运行附带的 makefile](http://www.gamedev.net/topic/548295-compiling-glew-with-mingw/)

[有关初始问题的信息](https://stackoverflow.com/questions/8870793/how-to-use-glew-with-mingw)

[使用 GLEW msvc++ 二进制文件的简单东西，适用于我的桌面](https://stackoverflow.com/questions/17370/using-glew-to-use-opengl-extensions-under-windows)

不幸的是，当我在项目中使用编译结果时，所有发布的解决方案都以以下错误消息结尾：

```
undefined reference to `glDrawElements@16'
debug/Ex04.o: In function `Z6initGLv':
undefined reference to `glClearColor@16'
undefined reference to `glEnable@4'
debug/Ex04.o: In function `Z8updateGLv':
undefined reference to `glClear@4'
undefined reference to `glViewport@16'
collect2: ld returned 1 exit status
mingw32-make.exe[1]: *** [debug/ecg4.exe] Error 1
mingw32-make.exe: *** [debug] Error 2 
```

我对这个问题束手无策。我已经两次和三次检查了 qmake 中的 LIBS 路径和​​ Windows 路径变量，以包含 glew dll 所在的目录。qmake 的 INCLUDEPATH 也应该没问题。无论如何，这里是 .pro 文件中的路径：

```
LIBS += -L$$quote(C:/mypath/freeglut/lib/) -lfreeglut
LIBS += -L$$quote(C:/mypath/glew-1.7.0/lib/) -lglew32 -lglew32mx
#LIBS+= C:/mypath/glew-1.7.0/lib/libglew32.dll.a
#LIBS+= C:/Programming/glew-1.7.0/lib/libglew32mx.dll.a

#includepath for project and the required libraries
INCLUDEPATH += ./include
INCLUDEPATH += "C:/mypath/glew-1.7.0/include"
INCLUDEPATH += "C:/mypath/freeglut/include" 
```

那么有没有人可以提供一套关于如何使用 MinGW 编译 GLEW 1.7.0 源代码的万无一失的说明？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T22:18:08.073

好的，我解决了。

据我所知，基本上我正确编译了 GLEW。我忘记将**-lopengl32 -lglu32**添加到我项目的 LIBS 路径中。出于某种原因，我需要在我的 Qt/MinGW/Windows 系统上执行此操作。在我的桌面上：Qt/VC++/Windows 我不必这样做。有人对此有解释吗？

对于遇到同样问题的任何人：

1.  [从GLEW 主页](http://glew.sourceforge.net/)下载源代码 (.zip)
2.  编译源代码，有不同的方法（参见初始问题中的链接）
    -> 见底部（旧的批处理文件不再出现在 github 上）
3.  将 .dll.a 文件放在一个目录中，该目录将成为 qmake 中 LIBS 路径的一部分
4.  将 .dll 文件放入作为系统变量 PATH 一部分的目录中
5.  不要忘记在你的 qmake 项目文件中链接 opengl、glu、glew

这是我的项目文件的片段：

```
#Required Libraries, replace with your path
# $$quote(...) for quoting pathes with spaces

LIBS += -L$$quote(C:/Programming/freeglut/lib/) -lfreeglut
LIBS += -L$$quote(C:/Programming/glew-1.7.0/lib/) -lglew32 -lglew32mx
# the following line is not necessary when working with VS compiler, odd
LIBS += -lopengl32 -lglu32

#includepath for project and the required libraries
INCLUDEPATH += ./include
INCLUDEPATH += "C:/Programming/glew-1.7.0/include"
INCLUDEPATH += "C:/Programming/freeglut/include" 
```

无论如何，非常感谢，也许这有助于一些人不要忘记依赖:)

干杯，莫里茨

* * *

***编辑：*** 批处理文件不再出现，我只需要编译 glew 1.9.0。所以这里有一些进一步的说明：

1.  确保 ar.exe 和 gcc.exe 在您的路径上。对于“QtSDK 标准安装”，这些程序可以在 C:\QtSDK\mingw\bin 找到；
2.  将以下行放入 glew-1.xy 文件夹中的批处理文件中。这是[LightningIsMyName 的答案的精简版](https://stackoverflow.com/a/6005262/1387061)

    ```
    gcc -DGLEW_NO_GLU -O2 -Wall -W -Iinclude  -DGLEW_BUILD -o src/glew.o -c src/glew.c
    gcc -shared -Wl,-soname,libglew32.dll -Wl,--out-implib,lib/libglew32.dll.a    -o lib/glew32.dll src/glew.o -L/mingw/lib -lglu32 -lopengl32 -lgdi32 -luser32 -lkernel32
    ar cr lib/libglew32.a src/glew.o

    gcc -DGLEW_NO_GLU -DGLEW_MX -O2 -Wall -W -Iinclude  -DGLEW_BUILD -o src/glew.mx.o -c src/glew.c
    gcc -shared -Wl,-soname,libglew32mx.dll -Wl,--out-implib,lib/libglew32mx.dll.a -o lib/glew32mx.dll src/glew.mx.o -L/mingw/lib -lglu32 -lopengl32 -lgdi32 -luser32 -lkernel32
    ar cr lib/libglew32mx.a src/glew.mx.o 
    ```

3.  运行批处理文件。结果将在 lib/ 文件夹中。生成的 .dll 和 .dll.a 文件放在一起（.dll.a 是您要告诉链接器的内容，.dll 应该在运行时对系统可用）。.a 文件用于静态链接。

# c# - 演员表 列出 Is there any shortcut or better way to typecast List <bool>to List? I know i can do that by looping and casting individual item but i want to know is this possible 问问题 问问题 2012-05-10T13:11:59.490 1568 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Is there any shortcut or better way to typecast List <bool>to List? I know i can do that by looping and casting individual item but i want to know is this possible to cast entire list in one statement. Eclipse: Change the block comment style of ctrl+shift+/ The keyboard shortcut ctrl+shift+/ produces comments in the format of: /*comment*/ How can I change the shortcut so that it adds a space before and after the asterisk? /* comment */ Many thanks! c#.netgenericscovariance 4 3 回答 3 This answer is useful 9 您可以使用以下Enumerable.Cast<t>方法执行此操作： List <bool>bools= GetBoolList(); IList objects= bools.Cast().ToList(); 于 2012-05-10T13:14:00.273 回答 This answer is useful 6 执行此操作的非 LINQ 方法是List.ConvertAll： List <bool>b = new List <bool>{ true, false, true }; List o = b.ConvertAll(x => (object)x); 由于此方法知道创建新列表的大小，因此对于大型列表，它可能比 LINQ 版本更快。 于 2012-05-10T13:20:07.567 回答 This answer is useful 3 List <bool>list = new List<bool>{true,true,false,false,true}; List listObj1 = list.Select(i=> (Object)i).ToList();// First way List listObj2 = list.Cast().ToList();// Second way List listObj3 = list.OfType().ToList();// Third way 以下是在linqpad中快速测试 list.Dump(); listObj1.Dump(); listObj2.Dump(); listObj3.Dump(); 于 2012-05-10T13:18:08.797 回答 Related 2 c# - 使用枚举器在数组中显示结构 1 memory - 如何同时在多个精灵上运行动作 1 shell - play框架，为什么安装脚本会报python语法错误？ 2 html - 更改字体颜色 1 javascript - HTML 如何处理 Esc 键与其他键 2 javascript - jquery“如果”某事和“其他”某事 1 regex - JavaTokenParser Parser 在我创建的两种类型之间感到困惑 2 java - 在 IntelliJ IDEA 中更改 VM 设置：VM 初始化期间发生错误 1 c - POSIX 文件锁是可重入的吗？ 1 c# - 如何重新打开或重置 WebBrowser 控件？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10534729
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c#, .net, generics, covariance

Is there any shortcut or better way to typecast `List<bool>` to `List<object>`?

I know i can do that by looping and casting individual item but i want to know is this possible to cast entire list in one statement.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T13:14:00.273

您可以使用以下[`Enumerable.Cast<T>`](http://msdn.microsoft.com/en-us/library/bb341406.aspx)方法执行此操作：

```
List<bool> bools= GetBoolList();
IList<Object> objects= bools.Cast<Object>().ToList(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T13:20:07.567

执行此操作的非 LINQ 方法是`List.ConvertAll`：

```
List<bool> b = new List<bool> { true, false, true };
List<object> o = b.ConvertAll(x => (object)x); 
```

由于此方法知道创建新列表的大小，因此对于大型列表，它可能比 LINQ 版本更快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T13:18:08.797

```
List<bool> list = new List<bool>{true,true,false,false,true};
List<Object> listObj1 = list.Select(i=> (Object)i).ToList();// First way
List<Object> listObj2 = list.Cast<Object>().ToList();// Second way 
List<Object> listObj3 = list.OfType<Object>().ToList();// Third way 
```

以下是在[linqpad中快速测试](http://www.linqpad.net/)

```
 list.Dump();
 listObj1.Dump();
 listObj2.Dump();
 listObj3.Dump(); 
```</bool></bool></bool></bool></bool></t></bool></bool>

# java - Eclipse：更改ctrl+shift+/的块注释样式

> ID：10534730
> 
> 赞同：5
> 
> 时间：2012-05-10T13:12:06.213
> 
> 标签：java, eclipse

键盘快捷键`ctrl`++生成以下格式的注释`shift`：`/`

```
/*comment*/ 
```

如何更改快捷方式以便在星号前后添加一个空格？

```
/* comment */ 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:53:51.467

恐怕您永远无法重新应用代码格式化（`ctrl`++ `shift`）`f`，它会用空格重新格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:19:28.043

要格式化值，您应该尝试以下操作。

`Ctr`+ `Shift`+`F`

希望这会帮助你。

# haskell - 静态类型、多态性和特化

> ID：10534744
> 
> 赞同：29
> 
> 时间：2012-05-10T13:13:09.260
> 
> 标签：haskell, types

当我第一次学习 Haskell 时，我很快就喜欢上了参数多态。这是一个令人愉快的简单想法，效果非常好。整个“如果它编译它通常工作正常”的事情主要是由于参数多态性，恕我直言。

但是前几天，我发生了一些事情。我可以写成`foo`一个多态函数。但是当`bar`调用时`foo`，它会使用一组特定的参数类型。或者，如果`bar`它本身是多态的，那么*它的*调用者将分配明确的类型。通过归纳，似乎如果您要使用任何有效的 Haskell 程序并分析*整个代码库*，您就可以静态地确定整个程序中每个事物的类型。

从某种意义上说，这有点像 C++ 模板。没有*运行时*多态，只有*编译时*多态。Haskell 编译器可以选择为调用每个多态函数的每种类型生成单独的机器代码。大多数 Haskell 编译器没有，但如果你愿意，你可以实现一个。

只有当你开始添加 Haskell 扩展（`ExistentialQuantification`很明显）时，你才会开始获得真正的*运行时*多态性，其中你的值的类型不能被静态计算。

哦，是的，我的问题？

1.  上面的说法真的正确吗？

2.  这个属性有一个广泛使用的*名称吗？*

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-10T14:00:54.470

Haskell（没有扩展）允许多态递归，仅此功能就不可能将程序静态特化为完全单态的程序。这是一个将打印 N 深嵌套列表的程序，其中 N 是命令行参数：

```
import System

foo :: Show a => Int -> a -> IO ()
foo 0 x = print x
foo n x = foo (n-1) [x]

main = do [num_lists] <- getArgs
          foo (read num_lists) 0 
```

在第一次调用时`foo`，`a`有类型`Int`。在下一个递归调用中，它的类型为`[Int]`，然后`[[Int]]`，依此类推。

如果禁止多态递归，那么我相信可以对程序进行静态特化。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-10T16:03:25.197

是的，我也想过这个问题。基本上，这个想法是你似乎可以实现 Haskell 98，但不能实现它的一些语言扩展，使用多态多实例化而不是多态多态。

您可以通过尝试将一些 Haskell 功能实现为 C++ 库来对此有所了解（正如您所注意到的，C++ 执行多态化多态化）。你发现你可以做 Haskell 能做的所有事情，除了不可能有多态值，包括对多态函数的引用。

这看起来像，如果你有

```
template<typename T>
void f(T);           // f :: a -> IO () 
```

您可以在运行时将特定实例化的地址作为函数指针传递：

```
&f<int> 
```

但您不能获取模板的地址 ( `&f`)。这是有道理的：模板是纯粹的编译时构造。同样有意义的是，如果您通过多实例化进行多态性，则可以拥有指向任何特定实例化的指针，但不能拥有指向多态函数本身的指针，因为在机器代码级别，没有一个。

那么 Haskell 在哪里使用多态值呢？乍一看，一个好的经验法则似乎是“任何地方你必须写一个明确的 forall”。所以`PolymorphicComponents`, `Rank2Types`, `RankNTypes`, 和`ImpredicativeTypes`是明显的禁忌。你不能把它翻译成 C++：

```
data MkList = MkList (forall a. a -> [a])
singleton = MkList (\x -> [x]) 
```

另一方面，`ExistentialQuantification`至少在某些情况下是可行的：这意味着拥有一个带有模板构造函数的非模板类（或者更一般地说，一个类的构造函数模板化了比类本身更多的东西）。

如果在 Haskell 中你有：

```
data SomeShow = forall a. Show a => SomeShow a
instance Show SomeShow where show (SomeShow a) = show a 
```

您可以在 C++ 中将其实现为：

```
// a function which takes a void*, casts it to the given type, and
// calls the appropriate show() function (statically selected based
// on overload resolution rules)
template<typename T>
String showVoid(void *x)
{
    show(*(T*)x);
}

class SomeShow
{
    private:
        void *m_data;
        String (*m_show)(void*); // m_show :: Any -> String

    public:
        template<typename T>
        SomeShow(T x)
            : m_data(new T(x)) // memory management issues here, but that's orthogonal
            , m_show(&showVoid<T>)
        {
        }

        String show()
        {
            // alternately we could declare the top-level show() as a friend and
            // put this there
            return m_show(m_data);
        }
};

// C++ doesn't have type classes per se, but it has overloading, which means
// that interfaces are implicit: where in Haskell you would write a class and
// instances, in C++ you just write a function with the same name for each type
String show(SomeShow x)
{
    return x.show();
} 
```

在这两种语言中，您都有一个带有多态构造函数的非多态类型。

所以我们已经证明了有些语言扩展可以实现，有些则不能，但是硬币的另一面呢：Haskell 98 中有什么是你不能实现的吗？从您甚至需要语言扩展 ( ) 来编写 forall 的事实来看`ExplicitForAll`，您会认为答案是否定的。你几乎是对的，但有两个问题：类型类和多态递归。类型类通常使用字典传递来实现：每个实例声明都会产生一个函数记录，这些函数会在需要它们的地方隐式传递。

因此，例如，对于 Monad，您将拥有：

```
data MonadDict m = MonadDict { 
    return :: forall a. a -> m a,
    (>>=)  :: forall a b. m a -> (a -> m b) -> m b
} 
```

那么你会看看那些foralls！您不能明确地编写它们，但是在字典传递实现中，即使在 Haskell 98 中，具有多态方法的类会导致包含多态函数的记录。如果您尝试使用多实例来实现整个事情，这显然会成为一个问题。您几乎可以不用字典传递就可以逃脱，因为如果您坚持使用 Haskell 98，实例几乎总是全局且静态已知的。每个实例都会产生一些多态函数，但是因为在编译时几乎总是知道要调用哪个函数，所以您几乎不需要在运行时传递对它们的引用（这很好，因为您不能）。权衡是您需要进行整个程序编译，否则实例不再是静态已知的：他们可能在不同的模块中。一个例外是多态递归，它实际上需要你在运行时建立一个字典。见[其他答案](https://stackoverflow.com/a/10535629/626288)以获取更多详细信息。即使没有类型类，多态递归也会杀死多实例化方法：请参阅关于`BTree`s 的评论。（此外`ExistentialQuantification`，具有多态方法的 *plus* 类不再可行，因为您将不得不再次开始存储指向多态函数的指针。）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-10T13:28:32.057

[正如您在上面所描述的，整个程序编译器](http://mirror.seize.it/papers/Code%20Optimization%20Techniques%20for%20Lazy%20Functional%20Languages.pdf)利用对类型信息的全局访问来进行非常积极的优化。示例包括[JHC](http://repetae.net/computer/jhc/)和[MLton](http://www.mlton.org/)。出于类似的原因，具有内联的 GHC 也是部分“整个程序”。其他利用全局信息的技术包括[超级编译](http://community.haskell.org/~ndm/downloads/slides-rethinking_supercompilation_29_sep_2010.pdf)。

请注意，您可以通过将多态函数专门用于它们所使用的所有类型来大幅增加代码大小——这需要大量内联以将代码减少回正常值。管理这一点是一项挑战。

# android - 通用应用偏好和用户会话标识符的 SharedPreferences

> ID：10534755
> 
> 赞同：0
> 
> 时间：2012-05-10T13:13:36.667
> 
> 标签：android, sharedpreferences

我`SharedPreferences`用来保存两种偏好信息。

1) 一般应用偏好，如每页结果`sessionTime`等，只有在您登录后才能访问。

2）会话标识符，如用户名和姓氏。可以在每个活动/页面上看到名称，以便知道会话是否正常。

`sharedPreferences`我可以使用2 个单独的字符串标识符吗？一个用于常规设置，另一个用于会话信息，并通过我的全局应用程序类管理这些设置的使用，还是我的方法完全错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:12:54.483

按照设计，Android 在应用程序/用户偏好之间没有区别。不要费心创建 2 个不同的首选项文件，只需`PreferenceManager.getDefaultSharedPreferences(yourContext)`在任何地方使用

# java - 以特定于类型的方式处理子类的正确模式是什么？

> ID：10534756
> 
> 赞同：3
> 
> 时间：2012-05-10T13:13:38.197
> 
> 标签：java, design-patterns, subclass

我有一个 Animal 对象的集合。

我的核心代码希望将所有这些都视为动物，都一样。每个动物都需要以某种方式进行处理。处理的性质取决于动物的子类型（鸟类、哺乳动物等）。

我的代码目前如下所示。

```
public interface Animal {
    public String getTaxonomyClass(); 
} 
```

```
public abstract class Bird implements Animal {

    @Override
    public String getTaxonomyClass() {
        return "aves";
    }

    // Specific to birds
    public abstract float getWingspan();

} 
```

```
public abstract class Mammal implements Animal {

    @Override
    public String getTaxonomyClass() {
        return "mammalia";
    }

    // Specific to mammals
    public abstract int getToothCount();

} 
```

```
public interface AnimalProcessor {
    public String getSupportedTaxonomyClass();
    public void process(Animal a);
} 
```

```
public class MammalProcessor implements AnimalProcessor {

    @Override
    public String getSupportedTaxonomyClass() {
        return "mammalia";
    }

    @Override
    public void process(Animal a) {
        System.out.println("Tooth count is " + ((Mammal)a).getToothCount());
    }

} 
```

```
public class BirdProcessor implements AnimalProcessor {

    @Override
    public String getSupportedTaxonomyClass() {
        return "aves";
    }

    @Override
    public void process(Animal a) {
        System.out.print("Wingspan is " + ((Bird)a).getWingspan());
    }

} 
```

```
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class ZooKeeper {

    Map<String, AnimalProcessor> registry = new HashMap<String, AnimalProcessor>();

    public void registerProcessor(AnimalProcessor ap)
    {
        registry.put(ap.getSupportedTaxonomyClass(), ap);
    }

    public void processNewAnimals(List<Animal> newcomers)
    {
        for(Animal critter : newcomers)
        {
            String taxonomy = critter.getTaxonomyClass();
            if(registry.containsKey(taxonomy))
            {
                // if I can process the animal, I will
                AnimalProcessor ap = registry.get(taxonomy);
                ap.process(critter);
            }

        }
    }
} 
```

```
import java.util.LinkedList;
import java.util.List;

public class MainClass {

    public static void main(String[] args) {

        ZooKeeper keeper = new ZooKeeper();
        keeper.registerProcessor(new MammalProcessor());
        keeper.registerProcessor(new BirdProcessor());

        List<Animal> animals = new LinkedList<Animal>();

        animals.add(new Mammal() {  // badger

            @Override
            public int getToothCount() {
                return 40;
            } } 
        );

        animals.add(new Bird() {  // condor

            @Override
            public float getWingspan() {
                return 2.9f;
            } }
        );

        keeper.processNewAnimals(animals);

    }
} 
```

一般来说，这很容易理解并且效果很好！我可以在闲暇时添加插件新处理器和动物类型，而无需更改 ZooKeeper 类或任何接口。你可以想象一个更高级的主类，从数据库中加载 Animals，然后依次处理它们。

但是，我担心 AnimalProcessor 子类中的向下转换！这让我觉得不应该存在，并且可能违反了 OO 原则。毕竟，此刻我可以将 Bird 传递给 MammalProcessor 的 process() 方法，并且会出现 ClassCastException。

任何人都可以提出一个设计模式来解决这个问题吗？我查看了访问者模式，但不太清楚如何在这种情况下应用它！关键是让核心代码 (ZooKeeper) 对所有动物一视同仁，并使其能够轻松添加对新动物的支持。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:34:25.307

我建议如下：

```
public interface Animal {
    public AnimalProcessor<? extends Animal> getProcessor();
} 
```

所以每只动物都会返回它的匹配处理器。

```
public interface AnimalProcessor<T extends Animal> {
     public void process(T a);
} 
```

因此处理器将使用它应该处理的匹配类型输入。所以植入将是这样的：

```
public abstract class Bird implements Animal {
    private BirdProcessor processor = new BirdProcessor();
    public abstract float getWingspan();
    @Override
    public AnimalProcessor<Bird> getProcessor() {
        return processor; 
    }
}

public class BirdProcessor implements AnimalProcessor<Bird> {
    @Override
    public void process(Bird b) {
        System.out.print("Wingspan is " + b.getWingspan());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:51:11.670

这就是[泛型](http://docs.oracle.com/javase/tutorial/java/generics/index.html)发挥作用的地方。

首先，您需要使 AnimalProcessor 通用：

```
public interface AnimalProcessor <T extends Animal> {
    public String getSupportedTaxonomyClass();
    public void process(T a);
} 
```

接下来，在您的特定处理器中，您指定通用类型 - 例如对于哺乳动物：

```
public class MammalProcessor implements AnimalProcessor<Mammal> {

    public String getSupportedTaxonomyClass() {
        return "mammalia";
    }

    public void process(Mammal a) {
        System.out.println("Tooth count is " + a.getToothCount());
    }

} 
```

现在， process 方法只接受 Mammal 对象，这里不接受鸟类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:24:05.960

我建议如下：

```
public interface Animal {
    public String getTaxonomyClass(); 
    public void process();
} 
```

现在每个实现 Animal 的动物类都应该实现自己的处理逻辑。例如 ：

```
public class Bird implements Animal {

    public Bird(float wingSpan) {
        this.wingSpan = wingSpan;
    }

    @Override
    public String getTaxonomyClass() {
        return "aves";
    }

    @Override
    public void process() {
         System.out.print("Wingspan is " + wingSpan);
    }

    // Specific to birds
    private float wingspan;
} 
```

现在您只能拥有一个 AnimalProcessor 处理如下：

```
 public void process(Animal a) {
      a.process();
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T13:53:11.920

让你`AnimalProcessor`通用；

```
public interface AnimalProcessor<T extends Animal> {
    public String getSupportedTaxonomyClass();
    public void process(T a);
}

public class MammalProcessor implements AnimalProcessor<Mammal> {

    @Override
    public String getSupportedTaxonomyClass() {
        return "mammalia";
    }

    @Override
    public void process(Mammal a) {
        System.out.println("Tooth count is " + a.getToothCount());
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T13:19:27.593

所以你有这样的课......

```
public abstract class Bird implements Animal {

    @Override
    public String getTaxonomyClass() {
        return "aves";
    }

    // Specific to birds
    public abstract float getWingspan();

} 
```

所有人`Birds`都会有一个翼展，即使翼展是`0`. 所以，你为什么不把课程改成这样......

```
public class Bird implements Animal {

    float wingspan = 0.0f;

    public Bird(float wingspan){
        this.wingspan = wingspan;
    }

    @Override
    public String getTaxonomyClass() {
        return "aves";
    }

    // Specific to birds
    public float getWingspan(){
        return wingspan;
    }

} 
```

所以，要创建一个新的`Bird`，而不是这样做......

```
 animals.add(new Bird() {  // condor

        @Override
        public float getWingspan() {
            return 2.9f;
        } }
    ); 
```

你只会这样做...

```
animals.add(new Bird(2.9f)); // condor 
```

对于您的目的，这似乎会使整个事情变得更简单和更好。`Mammal`你也会为你的班级做类似的改变。

现在，对于动物的处理......如果`Animals`要处理所有动物，您可以只实现`process()`而不`Bird`需要单独的`BirdProcessor`类。为此，请在`Animal`中声明一个方法`public void process();`。你`Bird`会像这样实现它......

```
public void process() {
     System.out.print("Wingspan is " + getWingspan());
} 
```

你会改变你`AnimalProcessor`的简单地做到这一点（注意：不再是一个界面）......

```
public class AnimalProcessor {
    public void process(Animal a) {
        a.process();
    }
} 
```

然后，您的`AnimalProcessor`班级将能够处理所有`Animals`.

或者，如果您想保持`AnimalProcessor`原样，最好更改以下内容，以避免`ClassCastException`（这里的代码用于`BirdProcessor`）...

```
public void process(Animal a) {
    if (a instanceof Bird){
        System.out.print("Wingspan is " + ((Bird)a).getWingspan());
    }
} 
```

这有点像你要找的吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T13:26:48.393

您的问题是诸如

```
 public abstract int getToothCount(); 
```

...未在动物中定义。相反，它们是在 Animal 的特定子类中定义的。这意味着您不能笼统地对待动物，因为它们根本不同。

为了克服这个问题，一种方法是在 Animal 类中为所有这些创建抽象方法。

Bird 可能会以“0”响应 getToothCount()。

由于所有动物都可以响应 getWingspan()、getTootCount() 等，因此您不必执行任何特定于类型的检查。如果这还不够好，请在 Animal 中创建“boolean hasWings()”、“boolean hasTeeth()”等的抽象实现。

现在你可以说，对于一些动物：

```
if (a.hasWings()) System.out.println("My wingspan is "+a.getWingSpan()); 
```

这对*任何*动物都有效。当然，Animal 的每个子类都必须实现所有不同的方法。

另一种选择是向 Animal 添加非抽象方法。这些方法将提供默认答案。例如，getWingSpan() 将返回 0，getToothCount() 将返回 0，等等。Shark 将覆盖 getToothCount()。Eagle 将覆盖 getWingSpan()...

然后你的子类只需要覆盖（甚至知道）与它们直接相关的方法。

# django - 密码格式无效或哈希算法未知

> ID：10534758
> 
> 赞同：7
> 
> 时间：2012-05-10T13:13:44.450
> 
> 标签：django

我网站上的一位用户最近在尝试登录时成功触发了此回溯。在 Django Admin 中，他的密码为`Invalid password format or unknown hashing algorithm.`

我不知道是什么原因造成的。到目前为止，这是一个孤立的案例，我和其他用户已成功注册并登录该站点。

**追溯**

```
Traceback (most recent call last):

 File "/home/gituser/.virtualenvs/bbox/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
   response = callback(request, *callback_args, **callback_kwargs)

 File "/var/git/bbox/userprofile/views.py", line 67, in login_view
   if form.is_valid():

 File "/home/gituser/.virtualenvs/bbox/lib/python2.7/site-packages/django/forms/forms.py", line 124, in is_valid
   return self.is_bound and not bool(self.errors)

 File "/home/gituser/.virtualenvs/bbox/lib/python2.7/site-packages/django/forms/forms.py", line 115, in _get_errors
   self.full_clean()

 File "/home/gituser/.virtualenvs/bbox/lib/python2.7/site-packages/django/forms/forms.py", line 271, in full_clean
   self._clean_form()

 File "/home/gituser/.virtualenvs/bbox/lib/python2.7/site-packages/django/forms/forms.py", line 299, in _clean_form
   self.cleaned_data = self.clean()

 File "/var/git/bbox/userprofile/forms.py", line 83, in clean
   self.user_cache = authenticate(username=username, password=password)

 File "/home/gituser/.virtualenvs/bbox/lib/python2.7/site-packages/django/contrib/auth/__init__.py", line 45, in authenticate
   user = backend.authenticate(**credentials)

 File "/home/gituser/.virtualenvs/bbox/lib/python2.7/site-packages/django/contrib/auth/backends.py", line 15, in authenticate
   if user.check_password(password):

 File "/home/gituser/.virtualenvs/bbox/lib/python2.7/site-packages/django/contrib/auth/models.py", line 304, in check_password
   return check_password(raw_password, self.password, setter)

 File "/home/gituser/.virtualenvs/bbox/lib/python2.7/site-packages/django/contrib/auth/hashers.py", line 42, in check_password
   hasher = get_hasher(algorithm)

 File "/home/gituser/.virtualenvs/bbox/lib/python2.7/site-packages/django/contrib/auth/hashers.py", line 115, in get_hasher
   "setting?" % algorithm)

ValueError: Unknown password hashing algorithm ''. Did you specify it in the PASSWORD_HASHERS setting? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T03:04:31.557

不要将密码设置为空字符串，而是使用[model](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.set_unusable_password)[`set_unusable_password()`的方法`User`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.set_unusable_password)将密码设置为不可用：

```
user.set_unusable_password() 
```

在文档中查看更多信息：[https ://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.set_unusable_password](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.set_unusable_password)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T02:36:07.613

原来该用户是“受邀”用户。在我的邀请代码中，我正在使用以下代码块创建用户：

```
 user = User.objects.create(
            username=cd['email'],
            email=cd['email'],
            first_name=cd['first_name'],
            last_name=cd['last_name'],
            is_active=False) 
```

如您所见，我没有设置密码。解决方法是应用一个临时密码，因为一旦用户到达电子邮件中发送给他的验证链接，他将被要求创建一个新密码。

```
 # set a random pw. user will be prompted to change
    # on log in
    user.set_unusable_password()
    user.save() 
```

所以基本上，如果您在没有设置密码的情况下创建用户对象并尝试将他登录到您的站点（使用 django 的身份验证系统），您将获得此回溯。

# java - 7Zip-JBinding UnsatisfiedLinkError

> ID：10534767
> 
> 赞同：1
> 
> 时间：2012-05-10T13:14:08.600
> 
> 标签：java, unsatisfiedlinkerror

我在这里查看了许多 UnsatisfiedLinkError 线程，似乎没有什么适合我的问题。

我正在尝试让这个 api 工作：[7ZipBind](http://sevenzipjbind.sourceforge.net/index.html)

但是我遇到了一个问题，无法让事情正常工作。我正在从命令行运行它的一些示例代码，如下所示：

> C:>java -classpath "/sevenzipTest.jar;/sevenzipjbinding-AllWindows.jar;\sevenzipjbinding.jar" com.poc.sevenzip.SevenZipSimple c:\archive\test.zip

但是，当我尝试运行它时，出现错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: D:\Users\XXXX\AppData\Local\Temp\SevenZipJBinding-9640553\lib7-Zip-JBinding.dll: Can't
find dependent libraries
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary0(Unknown Source)
        at java.lang.ClassLoader.loadLibrary(Unknown Source)
        at java.lang.Runtime.load0(Unknown Source)
        at java.lang.System.load(Unknown Source)
        at net.sf.sevenzipjbinding.SevenZip.initSevenZipFromPlatformJARIntern(SevenZip.java:428)
        at net.sf.sevenzipjbinding.SevenZip.initSevenZipFromPlatformJAR(SevenZip.java:235)
        at net.sf.sevenzipjbinding.SevenZip.ensureLibraryIsInitialized(SevenZip.java:578)
        at net.sf.sevenzipjbinding.SevenZip.openInArchive(SevenZip.java:567)
        at com.poc.sevenzip.SevenZipSimple.runZip(SevenZipSimple.java:25)
        at com.poc.sevenzip.SevenZipSimple.main(SevenZipSimple.java:64 
```

我感到困惑的是，为什么它说它无法找到库（dll 文件），当库存储在`<file_path>/sevenzipjbinding-AllWindows.jar`文件中时......我显然在这里没有做正确的事情，并希望 some1 可以给我一些指示。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:14:30.870

以下说明适用于 Windows x86 和 7 Zip JBinding 版本 4.65-1.05 RC。下载以下 DLL。

*   [libstdc++-6.dll](http://code.google.com/p/wtfu/downloads/detail?name=libstdc%2B%2B-6.dll&can=2&q=)
*   [libgcc_s_dw2-1.dll](http://pt.sourceforge.jp/projects/sfnet_openmarias/downloads/libgcc_s_dw2-1.dll/)
*   [gpsvc.dll](http://www.dllme.com/dll/download/3948/gpsvc.dll)
*   [sysntfy.dll](http://www.dllme.com/dll/download/4568/sysntfy.dll)

将 DLL 添加`Windows-x86`到`sevenzipjbinding-AllPlatforms.jar`. 然后将以下行追加到jar`sevenzipjbinding-lib.properties`的目录中。`Windows-x86`

```
sevenzipjbinding.libname.3=gpsvc.dll
sevenzipjbinding.libname.4=libgcc_s_dw2-1.dll
sevenzipjbinding.libname.5=libstdc++-6.dll
sevenzipjbinding.libname.6=sysntfy.dll 
```

可以将 DLL 放在 PATH（不是类路径）中，而不是修改 jar 文件。

为了弄清楚这一点，我`lib7-Zip-JBinding.dll`从[Sevenzipjbinding-AllPlatforms.jar](http://sourceforge.net/projects/sevenzipjbind/files/7-Zip-JBinding/4.65-1.05rc-extr-only/sevenzipjbinding-4.65-1.05-rc-extr-only-AllPlatforms.zip/download)中提取。[然后我在Dependency Walker](http://www.dependencywalker.com/depends22_x86.zip)中打开了该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:48:46.143

错误修复已发布。请使用 1.06rc 或更高版本。

下载地址：

*   [所有版本](https://sourceforge.net/projects/sevenzipjbind/files/7-Zip-JBinding/)
*   [4.65-1.06rc-extr-only](https://sourceforge.net/projects/sevenzipjbind/files/7-Zip-JBinding/4.65-1.06rc-extr-only/)

# php - 每 10 次循环迭代递增 int var

> ID：10534768
> 
> 赞同：5
> 
> 时间：2012-05-10T13:14:14.747
> 
> 标签：php

我正在构建一个长的虚拟数据查询。我有一个 for 循环运行了几千次，在每个循环中，它向查询添加一个新行，增量变量用于虚拟文件名、1.png、2.png 等。我还需要增加一个单独的外键 id，但它只需要每 10 次循环迭代。谁能帮忙？谢谢。

```
$var = '';
for($i=0;$i<100;$i++){
    $path = '/test' . $i . '.pdf';
    $mess = 'Test message '. substr(md5($i), 0, 10);
    $did = 0;//How to increment this var by 1 every 10 iterations?
    $var .= "INSERT INTO `message` (`design_id`, `path`, `message`) VALUES ('$did', '$path', '$mess');"."<br />";
}
echo $var; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-01-28T10:11:50.497

$i+=10

例子：

```
for ($i=0; $i<100; $i+=10) {
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T13:16:18.350

您可以使用[模运算符](http://php.net/manual/en/language.operators.arithmetic.php)：

```
$did = 0;
for($i=0;$i<100;$i++){
    $did += $i % 10 == 9;
} 
```

表达式`$i % 10`从 0 开始，增加到 9 (10 - 1)，然后无限期地“环绕”。`$did`每次评估到 9 时都会增加，即每 10 次迭代。

有趣的是，您可以使用[0, 9] 范围内的*任何*值进行比较，它仍然会`$did`以相同的速率增加；不同之处在于第*一次*增加的时间。通过选择 9 增加发生在第 10 次、第 20 次等迭代。如果您选择 0，则会在 1 日、11 日、21 日等发生增加。

最后，如果这种技术是新的，使用额外的括号可能会感觉更舒服，例如

```
$did += ($i % 10 == 9); 
```

甚至是一个独立的`if`声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:19:20.720

分和地板。

$did = 楼层(i / 10);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:19:45.387

```
$var = '';
$did = 0;
for($i=1;$i<=100;$i++){
    $path = '/test' . $i . '.pdf';
    $mess = 'Test message '. substr(md5($i), 0, 10);
    if((i % 10) == 0){
          $did++;
     }
    $var .= "INSERT INTO `message` (`design_id`, `path`, `message`) VALUES ('$did', '$path', '$mess');"."<br />";
}
echo $var; 
```

# apache-flex - 如何使用 SplitViewNavigator Flex 4.6 更改右侧视图的视图

> ID：10534773
> 
> 赞同：0
> 
> 时间：2012-05-10T13:14:33.280
> 
> 标签：apache-flex, view, split, views, navigator

我正在使用 Flex 4.6 创建一个移动应用程序，并且正在使用带有选项卡式应用程序的 SplitViewNavigator。我有一个永远不会改变的左视图，它有一个与之关联的静态列表。我有多个视图的右侧面板`SplitViewNavigator`。我可以加载左视图和第一个右视图，但不知道在从左视图的列表中进行选择后如何更改右视图的视图。

我的主应用程序文件具有以下代码来加载拆分视图并显示左视图和右视图。

```
<s:SplitViewNavigator id="svn" width="100%" height="100%">
    <s:ViewNavigator id="leftNav" width="30%" height="100%" firstView="views.LeftView"/>
    <s:ViewNavigator id="rightNav" width="70%" height="100%" firstView="views.RightView1"/>
</s:SplitViewNavigator> 
```

我的左视图只有一个简单的列表，我可以确定选择了哪个项目，但我不知道如何更改右视图。假设右视图仅称为 RightView1、RightView2 等。

我假设我需要使用一种`pushView`方法，但不知道如何从 leftView 视图引用主应用程序文件中的右视图 id (rightNav)。但我可能会离开这里，所以任何帮助将不胜感激。

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:16:29.943

你可以尝试做这样的事情：

**主要.mxml**：

```
<?xml version="1.0" encoding="utf-8"?>
<s:TabbedViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                                  xmlns:s="library://ns.adobe.com/flex/spark"
                                  applicationDPI="160"
                                  creationComplete="this_creationCompleteHandler(event)"
                                  >
    <fx:Script>
        <![CDATA[
            import events.ViewEvent;

            import mx.events.FlexEvent;

            import views.RightView1;

            protected function this_creationCompleteHandler(event:FlexEvent):void
            {
                leftNav.addEventListener(ViewEvent.CHANGE_VIEW, leftNav_changeViewHandler);
            }

            protected function leftNav_changeViewHandler(event:ViewEvent):void
            {
                rightNav.pushView(event.view);
            }

        ]]>
    </fx:Script>

    <s:SplitViewNavigator id="svn" width="100%" height="100%">
        <s:ViewNavigator id="leftNav" width="30%" height="100%" firstView="views.LeftView"  />
        <s:ViewNavigator id="rightNav" width="70%" height="100%" firstView="views.RightView1"/>
    </s:SplitViewNavigator>
</s:TabbedViewNavigatorApplication> 
```

**左视图.mxml**：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark"
        title="LeftView">

    <fx:Script>
        <![CDATA[
            import events.ViewEvent;

            import mx.collections.ArrayCollection;

            import spark.events.IndexChangeEvent;

            private function labelFunc(item:Object):String
            {
                return getQualifiedClassName(item).split("::")[1];
            }

            protected function list_changeHandler(event:IndexChangeEvent):void
            {
                dispatchEvent(new ViewEvent(ViewEvent.CHANGE_VIEW, list.selectedItem as Class, true));
            }

        ]]>
    </fx:Script>
    <s:List id="list" height="100%" width="100%"
            dataProvider="{new ArrayCollection([RightView1, RightView2, RightView3])}"
            labelFunction="labelFunc"
            change="list_changeHandler(event)">

    </s:List>
</s:View> 
```

**ViewEvent.as**：

```
package events
{
    import flash.events.Event;

    public class ViewEvent extends Event
    {

        public static const CHANGE_VIEW:String = "changeView";

        public function ViewEvent(type:String, view:Class, bubbles:Boolean=false, cancelable:Boolean=false)
        {
            super(type, bubbles, cancelable);

            this.view = view;
        }

        public var view:Class;

        override public function clone():Event
        {
            return new ViewEvent(type, view, bubbles, cancelable);
        }
    }
} 
```

这对我有用，但我不喜欢`this_creationCompleteHandler`参与`Main.mxml`，这取决于你如何捕捉`ViewEvent`。希望这能有所帮助。

# javascript - Base64 png到画布

> ID：10534780
> 
> 赞同：1
> 
> 时间：2012-05-10T13:14:52.873
> 
> 标签：javascript, html

我正在努力在画布上绘制图像。到目前为止，我所做的是我已将 Canvas 中的图像数据插入到数据库中。问题是，当我尝试创建数据图像并将其绘制回画布上时，它不会绘制相同的图像，可能只绘制了一些像素，而其余的只是空白，就像不应该在那里绘制任何东西一样。

我得到这样的图像数据：

```
var CanvasData = document.getElementById('canvas'); 
CanvasData = CanvasData.toDataURL("image/png"); 
```

然后像这样在画布上绘制图像（数据存储在数据库中）：

```
var result = xmlhttp.responseText;
var CanvasDraw = document.getElementById('canvas'); 
var ctxChange = CanvasDraw.getContext('2d');        

imagedata = new Image();
imagedata.src = result;
imagedata.onload = function(){
    ctxChange.drawImage(imagedata, 0, 0);
} 
```

这是一个指向 pastebin 的链接，以获取图像数据的示例：http://pastebin.com/XGmV49k9[结果](http://pastebin.com/XGmV49k9) 是从 AJAX 调用返回的数据，与存储在数据库中的数据相同。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:17:41.220

似乎这一行中的错误：

```
imagedata.src = result; 
```

应该：

```
imagedata.src = CanvasData; 
```

# c# - WPF Listbox 在运行时更改容器

> ID：10534781
> 
> 赞同：0
> 
> 时间：2012-05-10T13:14:53.987
> 
> 标签：c#, wpf, pixelsense

对于我的项目，我需要一个 scatterview，但我们称它为一个列表框，供不使用表面 sdk 的人使用：)，它绑定到我的视图模型中的一个 observablecollection。根据对象的类型，我使用不同的数据模板（图像，视频，...）

这些项目的容器默认是一个列表框项目。

但是有一个特殊的对象，我需要的不仅仅是普通的 listboxitem 作为容器，所以我创建了我的 customlistboxcontainer。在这里如果找到如何使用该容器：

[让数据绑定 WPF Listbox 生成子类 ListboxItems](https://stackoverflow.com/questions/1581934/have-a-databound-wpf-listbox-generate-subclassed-listboxitems)

但这还不够。我需要在运行时检查将哪些项目添加到集合中，并为其选择正确的容器（listboxitem、customlistboxitem）。我似乎无法得到工作。

有没有人对此有一些经验？

谢谢，

比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:35:35.507

如果您需要为不同类型的项目提供不同的模板，我建议为您的 ListBox 提供[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)。我认为 MSDN 示例非常清楚如何实现它，但如果您需要进一步的帮助，请告诉我们。

**更新：** 这是另一个帮助您入门的[教程。](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)

# c# - 将字符串拆分为字典

> ID：10534783
> 
> 赞同：0
> 
> 时间：2012-05-10T13:14:59.100
> 
> 标签：c#, string, dictionary, split

我有这样的字符串“0 0.014E5”，我需要将它拆分成一个字典（在c＃中）。其中第一个零是键，exp 格式的数字是值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:17:06.110

在 Python 中：

```
s = "0 0.014E5".split(' ')
d = {}
d[s[0]] = s[1] 
# alternatively you can use:
d[s[0]] = float(s[1]) 
```

在 Java 中：

```
String[] s = "0 0.014E5".split(" ");
Map<String, double> d = new HashMap<String, double>();
d.put(s[0], Double.parseDouble(s[1])); 
```

在 C# 中：

```
string[] s = "0 0.014E5".Split(' ');
var d = new Dictionary<string, string>();
d.Add(s[0], s[1]); 
```

# c# - C# 和 WinForms：Form.Show() 调用的“完整性”

> ID：10534784
> 
> 赞同：1
> 
> 时间：2012-05-10T13:15:02.237
> 
> 标签：c#, .net, winforms

在 UI 线程中，我有一段代码如下所示：

```
SomeForm form = new SomeForm();
(...)
form.Show(); 
```

SomeForm 类特别有一个`System.Windows.Forms.Timer`实例作为成员，该成员由自动生成的代码初始化，`InitializeComponent()`如下所示：

```
this.UploadStatusTimer.Enabled = true;
this.UploadStatusTimer.Interval = 1000;
this.UploadStatusTimer.Tick += new System.EventHandler(this.UploadStatusTimer_Tick); 
```

`form.Show()`最终将引发`Form.Load`由`SomeForm_Load(object sender, EventArgs e)`.

我的问题是：是否有可能`UploadStatusTime_Tick`之前正在处理`SomeForm_Load`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:22:26.720

`InitializeComponent()`由 Form 的构造函数调用，因此`UloadStatusTimer_Tick`在调用之前可能已经调用了`form.Show()`.

如果您希望计时器在您调用后启动，请在设计器`form.Show()`中设置`UploadStatusTimer.Enabled = false`，覆盖`OnShow`并使用此方法设置`this.UploadStatusTimer.Enabled = true`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:23:13.713

您要问的是“从我构建表单到触发 Load 事件的时间是否超过一秒钟？”

除了“是的，这总是可能的”的理论答案之外，它实际上归结为 (...) 在您的示例代码中花费了多长时间。一旦 Enabled 设置为 true（当它被构造时），计时器就会开始倒计时。

重要的是要注意 UI 交互是通过消息泵处理的。因此，考虑到 winforms 计时器，计时器本身在后台运行（甚至在 .net 之外；它正在使用本机 Windows 计时器），当计时器到期时，它会向您的应用程序发送一条消息，然后将一条消息排队显示“嘿，计时器滴答”的消息泵。同样的事情也适用于您的表单加载事件，它是通过消息泵上的消息触发的。因此，如果计时器在表单“加载”之前到期，那么计时器消息将在队列中的“表单加载”消息之前并首先得到处理。

如果您有兴趣了解更多信息，请参阅有关 winforms 消息泵（或某些人可能称之为消息循环）的许多文章或堆栈溢出问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:24:34.160

To ensure that the timer does NOT go off before `Form_Load`, disable it in the designer and call `timer.Start();` in the `Form_Load` event.

To ensure that it does go off before `Form_Load`, move the code in the `timer_Tick` function to a central method and call that from the constructor.

# java - 运行 Axis2 Web 服务客户端在客户端和服务器端生成错误

> ID：10534787
> 
> 赞同：2
> 
> 时间：2012-05-10T13:15:12.670
> 
> 标签：java, eclipse, web-services, axis2

客户端错误是：

```
 0 [main] INFO org.ws.call.BankWSCallClass - callChequeCertificationWS...
702 [main] INFO org.ws.call.BankWSCallClass - callChequeVerificationWS... serviceCreated
702 [main] INFO org.ws.call.BankWSCallClass - callChequeVerificationWS... portCreated
Exception in thread "main" org.apache.axis2.AxisFault: Exception occurred while trying to invoke service method chequeCertification
    at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at org.ws.server.implementation.ChequeProcessingServiceStub.chequeCertification(ChequeProcessingServiceStub.java:911)
    at org.ws.call.BankWSCallClass.callChequeCertificationWS(BankWSCallClass.java:53)
    at org.ws.call.BankWSCallClass.main(BankWSCallClass.java:106) 
```

虽然服务器端错误是

```
 [#|2012-05-10T15:52:32.390+0300|INFO|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=79;_ThreadName=Thread-2;|[ERROR] Exception occurred while trying to invoke service method chequeCertification
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
    at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
    at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at org.ws.server.implementation.ChequeProcessingService.chequeCertification(ChequeProcessingService.java:18)
    ... 37 more
|#] 
```

概述：我使用springsourcetool（类似于eclipse）作为开发IDE。Glassfish 作为应用服务器。Web 服务是 ChequeProcessingService，我生成了 .aar 文件并将其部署在 glassfish 的axis2 Web 项目下。客户端代码是使用axis2代码生成器工具生成的，它只是调用具有javabean请求参数并返回另一个javabean响应对象的Web服务方法'chequeCertification'。

使用的 Axis2 版本是 1.6.2 和 JDK 1.7

请从哪里得到这个问题的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T17:47:07.660

真正的问题是服务器中的这个 NullPointerException：

```
Caused by: java.lang.NullPointerException
    at org.ws.server.implementation.ChequeProcessingService.chequeCertification
       (ChequeProcessingService.java:18) 
```

这可能在您编写的某些代码中，因此无法准确说出问题所在。

当服务器抛出异常时，客户端错误可能只是对服务器返回的错误响应的反应。您应该考虑添加一些逻辑来捕获调用 Web 服务时抛出的 AxisFaults，以便您可以打印更合适的错误消息。

# drupal - Drupal 7将contact_site_form添加到一个块但只有一个类别

> ID：10534793
> 
> 赞同：1
> 
> 时间：2012-05-10T13:15:25.517
> 
> 标签：drupal, drupal-7

我在站点范围的联系表单中设置了两个类别：

*   一般的
*   技术的

我想将一般形式嵌入到一个块中。我有这段代码可用于加载表单：

```
<?php
  require_once drupal_get_path('module', 'contact') .'/contact.pages.inc';
$form = drupal_get_form('contact_site_form');
  print render($form);
?> 
```

但我只想加载`General`表单而没有下拉选择列表。

我安装了`Contact Forms`模块，这些模块让我可以单独访问表单，所以我知道它可以完成。这个模块对这种情况没有帮助，因为表单仍然具有相同的 ID。

在这里的任何帮助将不胜感激。

C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T23:16:55.643

我认为您可以为此使用表单中的其他变量。基于一些变量，我们只能在特定情况下改变给定的形式。例如，联系页面的 $_GET['q'] 是 'contact'。您可以检查这一点并仅在 时为表单类别选择列表设置默认值 `$_GET['q'] != 'contact'`，然后使用 隐藏选择列表`'#type' => 'hidden'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:03:12.693

好的，这个模块完成了工作......

[http://drupal.org/project/contact_form_blocks](http://drupal.org/project/contact_form_blocks)

# .net - xml 标签可以包含整数值还是可以包含特殊字符？

> ID：10534796
> 
> 赞同：2
> 
> 时间：2012-05-10T13:15:27.803
> 
> 标签：.net, xml

例如。这些 xml 标签是否可以接受。

```
<xml>
<3333>abc</3333>
<ab#$3>def</ab#$3>
</xml> 
```

我的问题是我可以创建整数值标签或带有特殊字符的标签吗？

我试过这个

```
FileStream fs = new FileStream((filename), FileMode.Append);
XmlWriter w = XmlWriter.Create(fs);
w.WriteStartElement("3454"); 
```

并得到以下错误 `{System.ArgumentException: Invalid name character in '3454'. The '3' character, hexadecimal value 0x33, cannot be included in a name. at System.Xml.XmlWellFormedWriter.CheckNCName(String ncname) at System.Xml.XmlWellFormedWriter.WriteStartElement(String prefix, String localName, String ns) at System.Xml.XmlWriter.WriteStartElement(String localName) at WindowsFormsApplication1.Form1.fn_setMapping(SqlString keyString, SqlString column, SqlString value)`

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T13:17:52.547

XML 元素名称不能以数字开头，因此`<3333>`无效。

至于哪些特殊字符是有效的......请参阅[元素名称规范](http://www.w3.org/TR/REC-xml/#NT-Name)。

```
NameStartChar      ::=      ":" | [A-Z] | "_" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]
NameChar       ::=      NameStartChar | "-" | "." | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]
Name       ::=      NameStartChar (NameChar)* 
```

有效名称应以 a 开头，`NameStartChar`后跟任意数量的`NameChar`.

# gdb - 使用 gdb 在 xv6 上调试用户代码

> ID：10534798
> 
> 赞同：11
> 
> 时间：2012-05-10T13:15:31.257
> 
> 标签：gdb, qemu, xv6

我正在做一个基于 xv6 的操作系统类，并且我编写了一个需要在其上运行的程序。

我知道我可以调试内核代码，`make qemu-gdb`但我不确定如何调试我自己的用户程序。

假设我想调试`cat`，我该怎么做？

谢谢

PS不是有xv6标签吗？这个问题甚至应该去这里吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-09-28T08:36:40.217

从 xv6 顶级目录：

1.  在调试模式下运行模拟器（假设没有 X11）：`make qemu-nox-gdb`

2.  在其他终端运行调试器加载内核符号： `gdb kernel` *这很重要，否则调试器将混淆内核和用户程序符号，例如`main()`*

3.  从 gdb 接口运行：`(gdb) target remote localhost:26000` *其中 26000 是第 1 步最后报告的 TCP 端口（这可能会改变）。*

4.  加载用户 exec`(gdb)file user_program`

5.  放置断点`(gdb) break main` 并继续`(gdb) continue`

6.  ETC...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T20:28:25.930

`file cat`, `break main`,`continue`

半参考[运行和调试 xv6](https://web.archive.org/web/20190308091152/http://zoo.cs.yale.edu:80/classes/cs422/2011/lec/l2-hw)

# if-statement - 简化 jQuery - 简单

> ID：10534799
> 
> 赞同：0
> 
> 时间：2012-05-10T13:15:31.643
> 
> 标签：if-statement, simplify

我不是最擅长编译java，但这是我能想到的最好的：

[http://jsfiddle.net/p77wC/](http://jsfiddle.net/p77wC/)

我只是在考虑简化以下脚本：

```
$('#about')
  .hover(function() {
    $('#bg_mask').stop().animate({ "height": "100px", }, '1500');
  }, function() {
    $('#bg_mask').stop().animate({ "height": "40px", }, '1500');
  });

$('#blog')
  .hover(function() {
    $('#bg_mask').stop().animate({ "height": "180px", }, '1500');
  }, function() {
    $('#bg_mask').stop().animate({ "height": "40px", },'1500');
  });
$('#contact')
  .hover(function() {
    $('#bg_mask').stop().animate({ "height": "250px", }, '1500');
  }, function() {
    $('#bg_mask').stop().animate({ "height": "40px", },'1500');
  }); 
```

我确信有一个 if 和 else 语句可以用来总结/简化我正在做的事情。

基本上这就是我要找的：

如果将鼠标悬停在#about 然后 -> 动画宽度：x，如果将鼠标悬停在 #blog 然后 -> 动画宽度：xx 等，否则如果 -> 动画宽度：40px

我很想学习，所以即使你不愿意编译代码，即使你只是给我指出了正确的方向，我也会很感激。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:22:28.300

```
function process(id, height) {  
  $("#" + id).hover(function() {
    $('#bg_mask').stop().animate({ "height": height + "px", }, '1500');
  }, function() {
    $('#bg_mask').stop().animate({ "height": "40px", }, '1500');
  });
}

process("about",   100);
process("blog",    100);
process("contact", 250); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:36:39.963

好的，这是一个不需要任何额外代码的版本，循环遍历每个代码并根据粗略的数学为它们提供动画。

```
$('#menu_wrapper div:not(#bg_mask)').each(function(i) {
    $(this).data('animID',i-1);
    $(this).hover(function() {           
        $('#bg_mask').stop().animate({ "height": ((($(this).data('animID')*80)+100)-10)+"px" }, '1500');
      }, 
      function() {
            $('#bg_mask').stop().animate({ "height": "40px" },'1500');
      });
}); 
```

​</p>

[小提琴](http://jsfiddle.net/u4SW4/2/)

# php - 寻找建议以更好地解决 PHP 5.3 和 Apache 2 中不允许的短标记

> ID：10534804
> 
> 赞同：0
> 
> 时间：2012-05-10T13:15:44.170
> 
> 标签：php, apache, debugging, php-5.3

我正在将包含数千个网页的庞大代码库从早期版本升级到 PHP 5.3。我们已经放弃使用短标签（<%、<\?= 等...），并在 php.ini 中禁用它们，并尽合理努力在代码中查找并替换它们。

但是，当有人创建带有或短标签的东西或某些遗留代码仍然遗漏了一个时，Apache 会返回一个状态为 200 的空白文档。问题是，PHP 没有抛出错误（显然因为它没有解析它们）并且 Apache 似乎也没有记录它是一个错误。这就产生了一个问题，无法在没有目视检查所有页面的情况下检测这些内容（一个简单的爬虫对 url 返回的 200 感到满意）。

有没有人知道有什么方法可以让 Apache 或 PHP 在抓取网站时遇到短标签时抛出错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:18:38.800

无法真正找到让 PHP 或 Apache 发出某种与带有短标签的文档相关的警告的方法，但您可以设置一个 cron 作业来搜索服务器的 web 文件夹下的所有文件，例如发送一封带有结果，因此至少指出了带有短标签的文件：

**简单示例：** ^(cron 作业)

```
<?php

// run grep command for '<?' that don't have an immediately p
$found = shell_exec('grep -rn "<?[^p]" *');

if ($found!='') {
  // email or any other action...
}

?> 
```

# jquery - jquery选择器性能？

> ID：10534811
> 
> 赞同：0
> 
> 时间：2012-05-10T13:16:04.760
> 
> 标签：jquery, jquery-selectors

只是好奇其中哪一个会更快？

```
$('ul.dropdown a').first().click(function(event) {
    event.stopPropagation();
    return false;
}); 
```

或者

```
$('.dropdown > li > a').click(function(event) {           
    event.preventDefault();
}); 
```

有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:18:40.423

**他们做两种不同的事情。**

我猜你问的是`>`VS 空间：
`>`是胖子然后是空间，因为它只有一层深。

带有选择器的提示是使其右侧比左侧更精确。
[在这里阅读更多](http://www.google.co.il/url?sa=t&rct=j&q=sizzle%20selector%20tip%20right&source=web&cd=1&ved=0CG4QFjAA&url=http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-think-right-to-left-with-jquery/&ei=ysGrT8e1G6Oy2wXH1cimAg&usg=AFQjCNHTFeLgTQLY28twIrDRyhkE0eVx6Q)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:39:55.873

```
$('.dropdown').find('a').on('click', function(e) {           
    e.preventDefault();
}); 
```

# jquery - 更改按钮以更改选择框代码

> ID：10534819
> 
> 赞同：2
> 
> 时间：2012-05-10T13:16:26.760
> 
> 标签：jquery

我有我的脚本工作，但目前它使用按钮输入，我想将其更改为选择框输入，但我似乎无法让代码工作，请帮助

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<script type="text/javascript" src="jquery.js"></script>          
<script type="text/javascript">
$(function() {
var fuel = ''; // Keep track of selections
var drive = '';
var type = '';
$('#fuel button').click(function() { // Choose a fuel
    fuel = (this.id ? '.' : '') + this.id;
    selectModels();
});
$('#drive button').click(function() { // Choose a drive
    drive = (this.id ? '.' : '') + this.id;
    selectModels();
});
$('#type button').click(function() { // Choose a colour
    type = (this.id ? '.' : '') + this.id;
    selectModels();
});
function selectModels() { // Select matching models
    $('div.modelContainer').hide(). // Hide all
        filter((fuel + drive + type) || '*').show(); // Show matches
}
});
</script>
</head>
<body>
<div id="fuel" class="controller">
<span class="controllerLabel">fuel:</span>
<button>All</button>
<button id="petrol">petrol</button>
<button id="diesel">diesel</button>
</div>
<div id="drive" class="controller">
<span class="controllerLabel">drive:</span>
<button>All</button>
<button id="man">manual</button>
<button id="auto">auto</button>

</div>
<div id="type" class="controller">
<span class="controllerLabel">type:</span>
<button>All</button>
<button id="car">car</button>
<button id="4">4x4</button>
<button id="7">people</button>
<button id="van">van</button>

</div>

<div class="modelContainer petrol manual car">

pmc

</div>

<div class="modelContainer petrol manual 4">

pm4

</div>

<div class="modelContainer petrol auto car">

pac

</div>

<div class="modelContainer diesel manual car">

dmc

</div>

<div class="modelContainer diesel manual van">

dmv

</div>

<div class="modelContainer diesel auto car">

dac

</div>

<div class="modelContainer diesel auto 4">

da4

</div>

<div class="modelContainer diesel auto 7">

da7

</div>

<div class="modelContainer diesel auto 7 4">

sor

</div>
</body>
</html> 
```

并将“燃料”按钮更改为

```
<div id="fuel" class="controller">
<span class="controllerLabel">fuel:</span>
<select>
<option value="all">all</option>
<option value="petrol">petrol</option>
<option value="diesel">diesel</option>
</select>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:24:32.167

这个问题有很多需要改进的地方，但这应该会给你立竿见影的结果：

```
$('#fuel select').on("change", function() {
    fuel = (this.value ? '.' : '') + this.value;
    selectModels();
}); 
```

您还需要对其他`select`元素重复相同的操作。

*更新一些更改：*

这段代码有几个问题，将来可能会给您带来一些挫败感。我冒昧地重写了一下。当然，可能仍有一些改进的空间，但我认为它会让你更接近更容易处理和理解的东西。

我首先将所有可过滤条件存储在单个对象中，而不是多个变量中。这为我们提供了一个推动和拉动价值观的地方。

```
var fType = { 'fuel' : 'all', 'drive' : 'all', 'type' : 'all' }; 
```

接下来，我将创建一个小的正则表达式模式，它将在预定义的 CSS 选择器中查找关键字。函数 ,`partsMapper`将负责将正则表达式发现的关键字与来自上述`fType`对象的实际值交换。

```
var partsRegex = /([a-z]+)/g;

function partsMapper ( s, p ) {
  return fType[p];
} 
```

接下来，我将您的所有`select`元素归为一个`<div class='controller'>`，以便我们可以更轻松地从一个位置捕获它们的更改事件。

```
$(".controller").on("change", "select", function(){ 
```

当 a 的 change 事件`select`从 inside 触发时`.controller`，我们首先更新`fType`对象中该 change 事件的值。因此，如果`#fuel`已更改，我们将更新`fType[fuel]`为新值。

```
 // Set new value
  fType[ this.id ] = this.value; 
```

随着我们的`fType`对象刚刚更新，我们可以更新我们的项目列表。我们首先隐藏所有列表项（是的，我在这里也进行了重组）。接下来，我们只选择与选择器匹配的列表项`.fuel.drive.type`，其中每个关键字都被我们的正则表达式/函数组合替换为`fType`对象中的当前值。

所以如果`fType.fuel`是`"petrol"`，那么我们的选择器将以 开头`.petrol`。默认情况下，所有条件都设置为`"all"`，因此一旦您更改`#fuel`为`petrol`，我们的选择器将立即变为`.petrol.all.all`，显示所有`.petrol`项目。

```
 // Update filtered items
  $(".modelList li")
    .hide()
  .filter('.fuel.drive.type'.replace( partsRegex, partsMapper ))
    .show(); 
```

最后我们关闭我们的`$.on`方法。

```
}); 
```

演示：http: [//jsbin.com/imezez/edit#javascript,html](http://jsbin.com/imezez/edit#javascript,html)

# java - javax.naming.NamingException：无法创建资源实例

> ID：10534826
> 
> 赞同：2
> 
> 时间：2012-05-10T13:16:50.877
> 
> 标签：java, oracle, datasource

我已经尝试了下面的大量变体来让数据源工作，但无济于事。我已经研究/尝试了几天，所以我认输并寻求帮助。不过，首先，我很难在这篇文章中格式化我的代码。什么都没有缩进，某些 xml 标记正在消失。可能是愚蠢的 IE 工作迫使我们使用....

## web.xml

```
<resource-ref>
    <res-ref-name>jdbc/nalabor</res-ref-name>
    <res-type>oracle.jdbc.pool.OracleDataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref>

<resource-ref>
    <res-ref-name>jdbc/navarch</res-ref-name>
    <res-type>oracle.jdbc.pool.OracleDataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

## 上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<Context>
  <Resource
    name="jdbc/nalabor" type="oracle.jdbc.pool.OracleDataSource"
    maxActive="1" maxIdle="1" maxWait="10000" 
    factory="oracle.jdbc.pool.OracleDataSourceFactory"
    url="jdbc:oracle:thin:@####.com:1521:SID"
    driverClassName="oracle.jdbc.driver.OracleDriver"
    username="###" password="###"/>

  <Resource
    name="jdbc/navarch" type="oracle.jdbc.pool.OracleDataSource"
    maxActive="1" maxIdle="1" maxWait="10000"
    factory="oracle.jdbc.pool.OracleDataSourceFactory"
    url="jdbc:oracle:thin:@####.com:1521:SID"
    driverClassName="oracle.jdbc.driver.OracleDriver"
    username="###" password="###"/>
</Context> 
```

## 道

```
try {      
  Context initContext = new InitialContext();
  NamingEnumeration list = initContext.list("java:/comp/env");
  System.out.println("Listing NamingEnumeration For java:/comp/env");
  while (list.hasMore()) {
    NameClassPair nc = (NameClassPair)list.next();
    System.out.println("Name Class Pair = " + nc);
  }

  list = initContext.list("java:/comp/env/jdbc");
  System.out.println("Listing NamingEnumeration java:/comp/env/jdbc");
  while (list .hasMore()) {
    NameClassPair nc = (NameClassPair)list .next();
    System.out.println("Name Class Pair = " + nc);
  }

  Context envContext = (Context) initContext.lookup("java:/comp/env");
  ods = (OracleDataSource) envContext.lookup("jdbc/nalabor");
} catch (Exception ex) {
  System.out.println("ERORRRRRRRR AGAIN!");
  ex.printStackTrace();
} 
```

## 堆

```
Listing NamingEnumeration For java:/comp/env
Name Class Pair = mailClient: java.lang.String
Name Class Pair = siteConnCache: java.lang.String
Name Class Pair = jdbc: org.apache.naming.NamingContext
Name Class Pair = sitePOCEmail: java.lang.String
Name Class Pair = siteFilePrefix: java.lang.String
Name Class Pair = siteName: java.lang.String
Name Class Pair = siteEmail: java.lang.String

Listing NamingEnumeration java:/comp/env/jdbc
Name Class Pair = nalabor: org.apache.naming.ResourceRef
Name Class Pair = navarch: org.apache.naming.ResourceRef
ERORRRRRRRR AGAIN!
javax.naming.NamingException: Cannot create resource instance    
at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:167)
at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:314)
at org.apache.naming.NamingContext.lookup(NamingContext.java:834)
at org.apache.naming.NamingContext.lookup(NamingContext.java:181)
at org.apache.naming.NamingContext.lookup(NamingContext.java:822)
at org.apache.naming.NamingContext.lookup(NamingContext.java:194)
at com.gdebI.rozycki.bsc.data.LaborDAO.getWeightedLabor(LaborDAO.java:91)
at com.gdebI.rozycki.bsc.controller.action.WeightedLabor.getList(WeightedLabor.java:66)
at com.gdebI.rozycki.controller.action.ListAction.service(ListAction.java:38) 
```

## WEB-INF/库

```
ojdbc14.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:54:21.580

我不确定您为什么在 web.xml 中列出您的资源，但我认为您包含了导致问题的额外 / 。当找不到名称时，我遇到了这个异常。试试这个（Java 6+）：

```
OracleDataSource ods = InitialContext.doLookup("java:comp/env/jdbc/nalabor"); 
```

或者对于 Java 5 及以下版本：

```
InitialContext ic = new InitialContext();
OracleDataSource ods = (OracleDataSource)ic.lookup("java:comp/env/jdbc/nalabor"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T13:13:37.133

我遇到了这个问题，我解决了它。注意 web.xml 中元素的顺序。[正如http://wiki.apache.org/tomcat/Specifications](http://wiki.apache.org/tomcat/Specifications)所说，我在我的 web 应用程序的 web.xml 中使用元素的顺序，它可以工作。

# java - EJB 中的资源注入问题

> ID：10534830
> 
> 赞同：4
> 
> 时间：2012-05-10T13:17:15.777
> 
> 标签：java, jboss, ejb, jms

我无法使用注释资源获取我的连接工厂。它适用于 JNDI 查找，但不适用于注释，我的连接工厂为空。

这是我的 JNDI 查找代码（有效）：

```
ConnectionFactory factory = (ConnectionFactory)context.lookup("/ConnectionFactory"); 
```

这是我带有注释的代码：

```
@Resource(mappedName = "java:/ConnectionFactory")
private ConnectionFactory factory; 
```

我尝试使用不同的 mappedName 作为：/ConnectionFactory、java:/JmsXA、JmsXA 等，但仍然是 nullpointerexception :-/。

如果有人有想法...

谢谢 ！

这是我的课：

```
@Stateless
public class ModuleCommunicationHandler implements IModuleCommunicationHandler
{

  /** The connection factory. */
  @Resource(mappedName = "java:/ConnectionFactory")
  private ConnectionFactory factory;

...........

/**
* {@inheritDoc}
*/
@Override
public void sendMessage(JMSMessage jmsMessage, int deliveryMode, int acknowledgeMode) throws TechnicalException
{

try
{
  context = new InitialContext();

  factory = (ConnectionFactory)context.lookup("/ConnectionFactory");

  // Setting the destination - Topic or Queue
  destination = (Destination)context.lookup(jmsMessage.getDestination());

  connection = factory.createConnection();
  session = connection.createSession(false, acknowledgeMode);

  sender = session.createProducer(destination);
  connection.start();

  // Creating the message
  message = session.createTextMessage();
  message.setText(jmsMessage.getBodyMessage());

  // Sending the message
  sender.setDeliveryMode(deliveryMode);
  sender.send(message);

..... 
```

这是日志：

```
15:05:32,609 ERROR [STDERR] com.*.*.*.server.exception.ModuleCommunicationException: java.lang.NullPointerException
15:05:32,609 ERROR [STDERR]     at com.*.*.*.server.service.ModuleCommunicationHandler.sendMessage(ModuleCommunicationHandler.java:147)
15:05:32,664 ERROR [STDERR] Caused by: java.lang.NullPointerException
15:05:32,664 ERROR [STDERR]     at com.*.*.*.server.service.ModuleCommunicationHandler.sendMessage(ModuleCommunicationHandler.java:108) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:37:02.107

没有看到你所有的代码（对于有问题的类）很难说，但这里有一些常见的嫌疑人：

1.  @Resource 注解实例没有指定类型，所以它会默认为字段的类型。如果实际资源是*abcConnectionFactory*，但您的字段是*xyzConnectionFactory*，您会收到某种错误。
2.  您的注释类可能未部署为托管（注入）类。换句话说，如果您不确保在部署该类时将其视为 EJB，则注入注释将不会被接受。[有关示例，](https://stackoverflow.com/questions/10438475/how-can-i-include-a-jms-producer-in-a-transaction-when-the-jms-prod-lives-in-a-h)请参阅此帖子。

发生这种情况时，您的日志中没有任何堆栈跟踪吗？

# javascript - 在javascript中调用prototype.call函数

> ID：10534833
> 
> 赞同：0
> 
> 时间：2012-05-10T13:17:20.827
> 
> 标签：javascript, oop

问题是，当我使用 test.call() 时，它会调用原型的调用实现，但是当我使用 test() 时，它不会调用 call()。我希望能够使用测试来触发prototype.call()。下面的代码：

```
 Function.prototype.call = function () {
            //do something...
            return this(); // call original method
        }

        function test() {
            alert("test");
        }

 test.call(); //calls prototype.call()
    test(); //doesnt call prototype.call() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:34:45.720

你为什么希望`test()`调用`Function.prototype.call`？它们是不同的功能。

`.call()`每次调用函数时都不会调用您要覆盖的本机方法。只有在*您*调用它时才会调用它。

调用`.call()`确实调用`test()`，因为这是它的设计目的。它期望一个函数作为其上下文（`this`值），并调用该函数。但这并不意味着`.call()`与任何其他函数调用有任何关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:27:29.517

这是我刚刚提出的一个解决方案（**感谢悬崖金融**指出了代码中的一个关键错误并进行了纠正）。它按调用顺序记录在某个点之后调用的所有非标准函数。

```
// array of all called functions
var calledFunctions = [];

// custom func object that has name of function and 
// and the actual function on it.

function func(_func, name) {
    return function() {
        calledFunctions.push(name)
        return _func.apply(this, arguments);
    };
}

test = function() {
    alert("hi");
}

otherTest = function() {
    alert("hello");
}

// put this bit somewhere after you've defined all your functions
// but *before* you've called any of them as all functions called
// after this point are logged. It logs all non-standard functions
// in the order that they are called.
for (prop in window) {
    if (window.hasOwnProperty(prop) && typeof window[prop] === 'function' && window[prop].toString().indexOf('[native code]') < 0) {
        window[prop] = func(window[prop], prop);
    }
}

otherTest();
test();
otherTest();

console.log(calledFunctions);​ 
```

工作演示可以在[这里](http://jsfiddle.net/TkZ6d/10/)找到。

# python - Python 测试 / TeamCity 集成 / 健全的包管理

> ID：10534834
> 
> 赞同：2
> 
> 时间：2012-05-10T13:17:24.137
> 
> 标签：python, windows, version-control, teamcity, package-managers

我和我的同事们目前正在采取一些步骤来自动化一个胚胎 python 代码库的测试，但是我们在环境设置和包管理方面遇到了一些问题。感谢您提供任何帮助，因为我们以前没有使用 Python 做过这件事（而且看起来[有点……断裂](http://blog.ianbicking.org/2008/12/14/a-few-corrections-to-on-packaging/)）。

**要求：**

*   测试可以通过脚本运行（[鼻子](http://readthedocs.org/docs/nose/en/latest/)看起来不错）
*   它在windows机器上运行
*   它可通过[TeamCity](http://www.jetbrains.com/teamcity/)以及标准开发人员机器运行。良好的 TeamCity 报告/集成将是一个奖励。
*   我们应该能够调用脚本并在多台机器上获得正确、可重复的结果。
*   所有依赖项/包要求都以一种简单、可重复的方式得到满足（我们使用 ruby​​ 和 bundler 对我们的主代码库执行此操作，并且正在努力使用 python 重复这个技巧）。如果人们不得不手动安装鸡蛋/使用easy_install等，那将是地狱般的。您应该能够调用一个脚本，上面写着“请确保考虑到这些依赖关系，然后运行我们的测试”。

理想情况下，工作流程应该像这样工作（暂时忽略我们如何安装/获取 python）：

*   Windows 机器同步到我们的 SCM
*   机器运行一个脚本以确保所有 python 依赖项（Shapely 等）都被考虑在内
*   机器能够调用运行nose或其他一些测试运行器的脚本
*   脚本返回一个值来指示构建是否失败

**积分问题**：

我们愿意在每台开发机器/构建代理上安装 python，而不是将其签入源代码控制，尽管如果我们可以将其签入并忘记它会很好。到目前为止，我们在这方面最好的选择是将 python 安装目录与 Windows/System32 中的 pythonxx.dll 一起检查到 SCM 中，但我不确定这是否是一种有缺陷的方法。

我们发现[了 Movable Python](http://www.voidspace.org.uk/python/movpy/)和[Portable Python](http://www.portablepython.com/)。知道最好的方法是什么吗？就像我说的，如果这不可行，我们愿意硬着头皮在每台机器上使用 .msi 安装 python。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:01:22.313

在没有更好的情况下，我们通过反复试验来解决这个问题。目前，我们的代码库很小，因此这种方法可能存在尚未暴露的缺陷，但我们目前正在使用它。

最后，我们：

*   [将PortablePython](http://www.portablepython.com/) 2.7添加到 SCM。这只是工作（tm）。
*   向 SCM添加[curl](http://curl.haxx.se/)
*   创建了一个调用 curl 并下拉并安装 python 设置工具的 windows .bat 文件。然后我们通过安装工具（元打包 ahoy）安装 pip。然后针对需求文件运行 Pip。pip 需求文件包含nose（一个python 测试运行器）和teamcity-nose（用于nose 的TeamCity CI 集成）等等。

然后我们调用测试运行器，它会自动将我们的测试挂起来，没有任何麻烦。不错！

将来还要检查[virtualenv](http://pypi.python.org/pypi/virtualenv)。

**编辑**（未来 N 年）：

Pip 在 Python 2.7.9 及更高版本中成为标准。这些天（imo）最简单的做事方式是：

1.  使用 pip 开箱即用
2.  安装虚拟环境
3.  为项目创建一个 virtualenv 并激活它
4.  使用 pip 安装依赖项（不幸的是，有时不得不回退到 easy_install）
5.  迪斯科。

另外，除非你真的需要它，否则不要使用便携式 python。真希望我们不要就此安定下来。

# mysql - MySQL 5.5 - 通过命令行导入大型 sql 文件的问题

> ID：10534839
> 
> 赞同：1
> 
> 时间：2012-05-10T13:17:38.333
> 
> 标签：mysql, import

我一直在尝试使用 MySQL 命令行导入一个大的（4GB）sql 转储文件。我总是在特定行收到“MySQL 服务器已消失”错误，或者如果我将文件拆分为较小的块（约 512 MB），我会收到有关超出最大允许数据包大小的错误，再次出现在同一行附近。根据我的阅读，解决方案是将 my.ini 中的 max_allowed_pa​​cket 大小更改为一个大数字并重新启动，但我这样做没有运气。我还尝试使用命令行参数 --max_allowed_pa​​cket=2147483648 进行导入，但也没有运气。还有什么我在这里想念的吗？我已经用尽了所有其他论坛的建议，也许有人有另一个想法我可以尝试。谢谢，

JW

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:28:00.997

此外，您必须为客户端和守护进程 mysqld 服务器更改它。更改部分下的 my.cnf 或 my.ini 文件`[mysqld]`并设置`max_allowed_packet=1000M`，或者您可以在连接到同一服务器的 MySQL 控制台中运行这些命令：

```
set global net_buffer_length=1000000000; 
set global max_allowed_packet=1000000000; 
```

为数据包大小使用一个非常大的值，因为它们以字节为单位，然后重新启动您的 MySQL 服务器。

# linux - 在 Linux 中创建远程线程

> ID：10534841
> 
> 赞同：11
> 
> 时间：2012-05-10T13:17:39.800
> 
> 标签：linux, pthreads, posix, ptrace

我在 Windows 中使用[CreateRemoteThread](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682437%28v=vs.85%29.aspx)，想知道在 Linux 中是否有可能。在Linux中可以做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T17:36:26.470

在 Linux 上执行此操作的传统方法是创建一个包含您的代码的动态库 (.so)，然后单独强制将您的库加载到正在运行的应用程序中。没有`CreateRemoteThread`Windows 上的一站式商店。

所以这里是基本步骤：

1.  创建一个包含您希望在远程进程中执行的代码的 dylib/so。
2.  在程序集中编写一些非常简单的代码来加载指定的 so 文件（主要是从[这个链接](http://www.ars-informatica.com/Root/Code/2010_04_18/LinuxPTrace.aspx)复制和粘贴，第 1 部分）。
3.  将所述加载程序 ASM 作为二进制有效负载嵌入到第二个代码文件/应用程序的缓冲区中。在这里，您将使用[`ptrace`](http://linux.die.net/man/2/ptrace)在步骤 2 中编写的二进制有效负载运行，这将触发目标应用程序调用`_dl_open()`在步骤 1 中创建的 .so，其中包含您希望运行的实际代码。[（在同一链接](http://www.ars-informatica.com/Root/Code/2010_04_18/LinuxPTrace.aspx)中给出的示例，第 2 部分。）

如果您需要您的代码在与主泵不同的线程中运行，那么您应该`pthread_create`在步骤 1 的代码中使用。

希望这能回答你的问题。是的，它比 Windows 更复杂。但它应该同样有效。此外，您可以将第 2 步和第 3 步中的几乎整个代码重用于未来的远程代码注入项目。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-02-20T15:05:02.960

`#include pthread.h

int pthread_create(pthread_t *thread, const pthread_attr_t *attr, void *(*start_routine) (void *), void *arg);` 使用 -pthread 编译和链接。

有关详细信息，请参见 man pthread_create

# java - Swing：启用延迟按钮

> ID：10534844
> 
> 赞同：2
> 
> 时间：2012-05-10T13:17:49.223
> 
> 标签：java, swing, delay, jbutton

```
private void OptionsActionPerformed(java.awt.event.ActionEvent evt) 
{ 
 // After clicking on button X, I want 4 other buttons to show up
 // in a sequential order

ButtonTrue(); 
} 

public void ButtonTrue() 
{
    Audio_Options.setVisible(true);
    letsSleep();
    Control_Options.setVisible(true);
    letsSleep();
    Display_Options.setVisible(true);
    letsSleep();
    Network_Options.setVisible(true);
}

 public void letsSleep()
{
    try {
        Thread.sleep(10000);
    } catch (InterruptedException ex) {
        Logger.getLogger(MainMenu.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

我有 4 个按钮。我希望它们按顺序出现，例如：Button1 - 10seconds - Button2 - 10 seconds - Button3 - 10seconds - Button 4

问题：每当我调用函数“ButtonTrue()”时，它们都会在等待 30 秒后一起出现。什么会导致此问题发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T13:23:19.843

*   不要`Thread.sleep(int)`用于[Swing JComponent](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)，因为阻塞[当前 EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

*   你看过[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:26:03.150

您应该为此使用不同的线程：

```
javax.swing.Timer timer = new Timer(10000, new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
    //...Update the progress bar...
        Control_Options.setVisible(true);

        timer.stop();

    }    
});
timer.start(); 
```

您的按钮必须是最终的，才能在匿名 ActionListener 的范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:27:20.247

我认为问题在于所有 setVisble 调用都在一个线程中，而不是 EventDispatchThread。您可以尝试调用：

```
if(EventQueue.isDispatchThread()) {
    ButtonTrue();
} else {
    EventQueue.invokeAndWait(new Runnable() {
        ButtonTrue();
    });
} 
```

# javascript - JQuery - 删除部分字符串并保留其余部分

> ID：10534851
> 
> 赞同：0
> 
> 时间：2012-05-10T13:18:05.397
> 
> 标签：javascript, jquery, regex, string, dynamic-variables

我从 API 接收多个字符串，有时我有一个看起来像这样的字符串。

```
first part <!-- Slut på Mall: variable --> second part 
```

我想使用 jQuery 来排除之前的部分和“ *Slut ...**变量**-->* ”。第二部分留给我。

需要明确的是，变量是动态的并且会发生变化。

我一直在玩**replace**和**match**但到目前为止我失败了。我知道正则表达式是要走的路

```
regex = /Mall:.*\s+-->(.*)\z/ 
```

但我不知道该使用什么功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:21:20.873

```
var secondPart = "<!--" + yourApiString.split("<!--")[1]; 
```

将返回 `<!-- Slut på Mall: variable --> second part`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:34:50.327

如果您仍想使用正则表达式并替换，[那么](http://jsfiddle.net/9GYdn/4/)您*可以*这样做。

```
var x = "first part <!-- Slut på Mall: variable --> second part";
var y = x.replace(/.*<!--/, "<!--"); 
```

这将替换`<!--`包括这四个字符之前的所有内容，但最终将它们放回原处。

如果您只想要“第二部分”，那么您可以执行以下操作：

```
var y = x.replace(/.*-->/, ""); 
```

从而删除导致其`-->`自身的每个字符。

# c# - 将方法传递给 C# 中具有多个参数的 Thread

> ID：10534853
> 
> 赞同：0
> 
> 时间：2012-05-10T13:18:10.313
> 
> 标签：c#

我想在线程中执行一个方法。该方法有多个参数并期望返回值。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:19:50.557

```
Thread thread = new Thread(() => 
       {
          var result = YourMethod(param1, param2);
          // process result here (does not invoked on your main thread)
       }); 
```

如果您需要将结果返回到主线程，请考虑改用 Task (C# 4)：

```
var task = new Task<ReturnValueType>(() => YourMethod(param1, param2));
task.Start();

// later you can get value by calling task.Result; 
```

或者使用以前版本的 C#

```
Func<Param1Type, Param2Type, ReturnValueType> func = YourMethod;            
IAsyncResult ar = func.BeginInvoke(param1, param2, null, null);
ar.AsyncWaitHandle.WaitOne();
var result = func.EndInvoke(ar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:20:44.230

```
Func<string, int, bool> func = SomeMethod;
AsyncCallback callback = ar => { bool retValue = func.EndInvoke(ar); DoSomethingWithTheValue(retValue };
func.BeginInvoke("hello", 42, callback, null);

...

bool SomeMethod(string param1, int param2) { ... } 
```

# google-maps - 谷歌地图中的自定义图层/叠加层

> ID：10534858
> 
> 赞同：1
> 
> 时间：2012-05-10T13:18:19.270
> 
> 标签：google-maps

是否可以在谷歌地图中创建自定义图层/叠加层？

举个例子，是否有可能有一个带有多边形的图层，另一个带有圆形，第三个带有标记？然后单独隐藏/显示这些图层？

我尝试查看文档，但这些层似乎只是一组固定的预定义层。叠加层似乎只支持图像叠加层。

对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:13:42.527

我不确定是否存在更好的方法来做到这一点，但我找到了解决类似问题的方法。我的示例使用了标记和折线，但也应该很容易将功能扩展到圆形和多边形。

[链接到 JSFiddle](http://jsfiddle.net/ferian/EeLQn/)

基本上它是这样工作的：

1.  初始化地图。
2.  用户选择他想在地图上看到的选项。
3.  单击在地图对象中触发一个方法（参见小提琴的 HTML 部分），该方法首先清除地图，然后在地图上推送新的叠加层。

当前显示在地图上的数据存储在数组中，地图清除方法只是遍历这些数组并检查地图上是否存在任何内容，如果存在则将其删除。

希望这可以帮助。干杯!

# c++ - C++中的LU分解

> ID：10534859
> 
> 赞同：1
> 
> 时间：2012-05-10T13:18:26.587
> 
> 标签：c++, arrays

我目前的代码有一些问题，无法将数组分解为上（u）和下（l）数组。

我正在使用 doolittle 方法

我的代码：

```
#include <iostream>

using namespace std;

int main(){

    double a[10][10];
    double l[10][10];
    double u[10][10];
    double som=0;
    int RANG;
    cin >> RANG;
    for(int i=0; i<RANG; i++){
            for(int j=0; j<RANG;j++){
                    cin >> a[i][j];
            }
    }
    for(int i=0; i<RANG; i++){
            for(int j=0; j<RANG;j++){
                    u[i][j]=0;
                    l[i][j]=0;
            }
    }

    for(int i=0;i<RANG;i++) {
    l[i][i]=1;

        for(int j=i;j<RANG;j++) {
            for(int s=0;s<i-1;s++) {
                som+= l[i][s]*u[s][j];
            }
            u[i][j]=a[i][j]-som;
        }

        for(int k=i+1;k<RANG;k++) {
            double som=0;
            for(int s=0;s<i-1;s++) {
                som+=l[k][s]*u[s][i];
            }
            l[k][i]=(a[k][i]-som)/u[i][i];
        }
     }
     cout << "l:" << endl;
    for(int i=0; i<RANG; i++){
            for(int j=0; j<RANG;j++){
                    cout << l[i][j] << "\t";
            }
            cout << endl << endl;
    }
    cout << "u: " << endl;
        for(int i=0; i<RANG; i++){
            for(int j=0; j<RANG;j++){
                    cout << u[i][j] << "\t";
            }
            cout << endl << endl;
    }
    return 0;
} 
```

如果可以的话请帮忙...

PS：不确定是否属于这里，在数学网站上可能会更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:38:49.133

看看[http://download.intel.com/design/PentiumIII/sml/24504601.pdf](http://web.archive.org/web/20150701223512/http://download.intel.com/design/PentiumIII/sml/24504601.pdf)它得到了完整的解决方案和源代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:23:52.713

您可能想查看 QuantLib。 [http://quantlib.org/index.shtml](http://quantlib.org/index.shtml)

下面是一个使用 QuantLib 库分解 3x3 数组的代码示例。它使用 Cholesky 分解，但也许会有所帮助。 [http://quantcorner.wordpress.com/2011/02/20/matrix-decomposition-with-quantlib/](http://quantcorner.wordpress.com/2011/02/20/matrix-decomposition-with-quantlib/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2017-09-12T13:41:29.017

检查你的's'迭代它应该是 for(int s=0;s

# node.js - 在 node.js amqp 中发出请求后如何保持队列处于活动状态？

> ID：10534866
> 
> 赞同：0
> 
> 时间：2012-05-10T13:18:54.217
> 
> 标签：node.js, rabbitmq, amqp

每次我想使用队列“queue = connection.queue(...)”时，我真的需要实例化它吗？

服务器（node.js）：

```
 queue = connection.queue('incoming', { // <--- DO I REALLY NEED THAT FOR EVERY REQUEST?
        durable : true,
        exclusive : false }, function() {});

 queue.subscribe(function(msg) {
      // Unsubcribe here. Maybe there is something like a once listener?
     console.log("RECEIVED: "+msg)
      //res.send(msg.data);
      queue.unsubscribe(ctag);
     res.redirect('/home');

   }).addCallback(function(ok) { ctag = ok.consumerTag; });

   exchange.publish('msg_queue', 'functional!', {  // request
      replyTo: 'incoming'
   }); 
```

如果`queue = connection.queue(...);`用服务端实例化，第一个使用队列的请求是成功的，但是下面的请求会抛出错误：

```
Error: NOT_FOUND - no queue 'incoming' in vhost '/'
at Queue._onMethod (/Users/cassiomelo/code/cubix/cubix_nodejs/node_modules/amqp/amqp.js:1720:15) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:56:32.573

对于一个 rpc 示例，它可以保持回复队列挂起，请查看[如何在 Rabbit.js 上创建 REP/REQ](https://stackoverflow.com/questions/10524613/how-to-create-rep-req-on-rabbit-js)

# mysql - MySQL 视图的优化

> ID：10534868
> 
> 赞同：1
> 
> 时间：2012-05-10T13:19:00.050
> 
> 标签：mysql, database, optimization, query-optimization

我想连接两个 MySQL 表并将其存储为一个视图，因此我可以在应用程序中处理此视图，而不是查询两个表。但这种观点发生得极其缓慢。

这是我的桌子：

```
CREATE TABLE spectrumsets (
    setid INT(11) NOT NULL,
    timestampdt INT(11) NULL DEFAULT NULL,
    timestampd INT(10) UNSIGNED NOT NULL,
    timestampt INT(10) UNSIGNED NOT NULL,
    device INT(11) NOT NULL,
    methodname VARCHAR(50) NOT NULL,
    PRIMARY KEY (setid),
    UNIQUE INDEX setid_idx (setid),
    UNIQUE INDEX timestamp_device_idx (timestampd, timestampt, device),
    INDEX device_fk (device),
    INDEX timestampd_idx (timestampd),
    CONSTRAINT device_fk FOREIGN KEY (device)
        REFERENCES spectrumdevices (deviceid)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB

CREATE TABLE spectrumdata (
    valueid INT(11) NOT NULL AUTO_INCREMENT,
    spectrumset INT(11) NOT NULL,
    wavelength DOUBLE NULL DEFAULT NULL,
    intensity DOUBLE NULL DEFAULT NULL,
    PRIMARY KEY (valueid),
    INDEX spectrumset_idx (spectrumset),
    CONSTRAINT spectrumset_fk FOREIGN KEY (spectrumset)
        REFERENCES spectrumsets (setid)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB 
```

这是我的观点：

```
SELECT spectrumsets.timestampd,spectrumsets.timestampt,spectrumsets.device,
    spectrumdata.wavelength,spectrumdata.intensity
FROM spectrumdata INNER JOIN spectrumsets ON spectrumdata.spectrumset=
    spectrumsets.setid
WHERE spectrumdata.wavelength>0 
ORDER BY spectrumsets.timestampd,spectrumsets.timestampt,spectrumsets.device,
    spectrumdata.wavelength 
```

我的机器上的A`select count(*)`需要 385.516 秒并生成 82923705 条记录，因此数据集相当大

我已经找到了这个[链接](http://www.mysqlperformanceblog.com/2007/08/12/mysql-view-as-performance-troublemaker/)，但仍然不完全明白出了什么问题。

更新：

`EXPLAIN`给出了这个结果：

```
"id","select_type","table","type","possible_keys","key","key_len","ref","rows","Extra"
"1","SIMPLE","spectrumsets","index","PRIMARY,setid_idx","timestamp_device_idx","12",NULL,"327177","Using index; Using temporary; Using filesort"
"1","SIMPLE","spectrumdata","ref","spectrumset_idx","spectrumset_idx","4","primprod.spectrumsets.setid","130","Using where" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:54:22.387

解释表明查询正在命中连接的索引（这很好），但随后对查询的其余部分使用临时表和文件排序。

这有两个原因：

*   where 子句没有命中索引
*   order by 子句没有达到索引

在评论中，您说删除 where 子句带来了很大的改进；这表明您需要光谱集，波长的复合索引，假设波长具有相当数量的可能值（如果它只有 10 个值，则索引可能不会做任何事情）。

如果您将“order by”子句排除在视图之外，它应该会更快 - 并且有一个很好的案例让排序顺序由查询提取数据而不是视图来确定。我猜大多数查询都会对数据非常有选择性 - 仅限于几个时间戳；通过在视图中嵌入 order by，您每次都需要为排序付出代价。

如果您确实必须在视图中具有“order by”，请创建一个索引，其中包含按“order by”顺序排列的所有字段，连接位于最前面。例如：

UNIQUE INDEX timestamp_device_idx (set_id, timestampd, timestampt, device),

# php - Jquery AJAX实时获取新的mysql记录

> ID：10534870
> 
> 赞同：1
> 
> 时间：2012-05-10T13:19:12.780
> 
> 标签：php, jquery, mysql, ajax, twitter

是否有任何类似 twitter 的解决方案可以使用 PHP 实时检索新的 mysql 记录并让它们向下滑动

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:36:43.363

像这样试试

```
$(function() {
    setInterval(function() {
        $.ajax({
            type: "GET",

            url: "location/of/server/script.php",
            success: function(html) {
                 // html is a string of all output of the server script.
                $("#element").html(html);
           }

        });
    }, 5000);
}); 
```

它将每 5 秒更新一次。

这只是一个示例脚本，成功后可以添加淡入淡出效果。希望对您有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:24:07.333

如果您真的想要实时更新，我建议您阅读有关 websockets 的信息。否则你可以使用 jquery setInterval。

**网络套接字：**

[可能是最好的](http://nodejs.org/)

你可以在网上找到很多 tuts：

[结果](https://www.google.de/webhp?sourceid=chrome-instant&ix=sea&ie=UTF-8#hl=de&output=search&sclient=psy-ab&q=websocket%20tutorial&oq=&aq=&aqi=&aql=&gs_l=&pbx=1&fp=5e4b47d4c544e1de&ix=sea&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&biw=1280&bih=963)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:55:01.357

如果你真的想要实时，你会希望通知被“推送”到客户端，而不是轮询。为此，在客户端，您可能希望使用 HTML5 的“事件源”之类的东西来侦听事件并更新 UI。

在服务器端，mysql 无法将新记录通知 PHP，因此您可能希望使用某种消息队列（如 RabbitMQ 或 ActiveMQ）。您必须修改插入数据库的代码，以便它也通知您的消息队列。

# asp.net-mvc - 在 ASP MVC3 中的视图中重复视图

> ID：10534876
> 
> 赞同：0
> 
> 时间：2012-05-10T13:19:29.870
> 
> 标签：asp.net-mvc, asp.net-mvc-3

如果我有一个精心设计的重复布局，我只想定义一次，比如说一些花哨的盒子网格，但是这些盒子的内容在视图和模型中会因网格而异（但不在网格内），例如一个页面有一个fancygrid的产品摘要，另一个页面有一个fancygrid的类别介绍。实现 MVC3 的最明智的模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:21:46.820

您可以使用显示模板。例如，在您的视图模型上定义一个类型为`Enumerable<SomeViewModel>`：

```
public class MyViewModel
{
    public IEnumerable<SomeViewModel> Models { get; set; }
} 
```

并在视图中使用 DisplayFor 助手：

```
@model MyViewModel
@Html.DisplayFor(x => x.Models) 
```

然后定义一个自定义显示模板，该模板将自动为 Models 集合 () 的每个元素呈现`~/Views/Shared/DisplayTemplates/SomeViewModel.cshtml`：

```
@model SomeViewModel
<div>
    @Html.DisplayFor(x => x.SomeProperty)
    ...
</div> 
```

模板化助手按惯例工作。默认情况下，它将首先在`~/Views/CurrentController/DisplayTemplates`文件夹中查找，然后在`~/Views/Shared/DisplayTemplates`文件夹中查找模板，该模板的命名方式与集合属性的类型 ( `SomeViewModel.cshtml`) 相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:35:57.773

Action GenreMenu in Store Controller:

```
 [ChildActionOnly]
    public ActionResult GenreMenu()
    {
        var genres = storeDB.Genres.ToList();

        return PartialView(genres);
    } 
```

in the View this will repeat the partial view three times:

```
@for (int i = 0; i < 3; i++)
{
 Html.RenderAction("GenreMenu", "Store");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:24:35.693

您可以将重复部分移动到局部视图中。然后可以在任何地方重用该部分视图

# java - 如何对使用 HTTPConnection 的辅助函数进行单元测试

> ID：10534878
> 
> 赞同：1
> 
> 时间：2012-05-10T13:19:30.393
> 
> 标签：java

我编写了一个**辅助函数**，可以从 url 检索内容。此函数还可以解析`Map`参数并根据`GET`或`POST`方法根据请求提供 url 或正文。假设这个函数还做其他事情（更改标题、cookie 等）。如何针对 http(s) 服务器测试此功能？如何模拟一个假的 servlet 来响应这个函数的请求？我已经看到我们可以使用模拟对象或其他专门用于 servlet 单元测试的库。但这似乎不符合我的需求，因为我确实需要在不更改功能内容的情况下测试请求及其答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:26:54.413

我会说在您的测试中以嵌入式模式启动 Jetty。
将其配置为接受请求、验证请求并返回适当的响应。
请参阅此处的文档：http: [//wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)

# javascript - 产生一个每次都不同的随机数

> ID：10534879
> 
> 赞同：0
> 
> 时间：2012-05-10T13:19:35.040
> 
> 标签：javascript, random

我需要生成一个介于 2 到 5 之间的随机数，每次都不同。例如，我不想连续出现两个 3，或者连续出现两个 5。然后我必须将其输入 for() 循环，如下所示：

```
for(var i = 0; i < noBoxes.length; i+=randNumber) {
    //....
} 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:21:09.440

生成一个最多 n-1 的随机数并将其相加，对原始范围取模（因为最小值不为 0 而移动）：

```
i = some random int from 2 to 5
delta = randInt(3) // range of possible values from 2 to 5 is 4, minus 1 to
                   // prevent getting all the way round to i again
nextval = (i-2+delta)%4+2  // shift i down by the minimum, add the
                           // delta and modulo the range 
```

这是有效的，因为它在范围以下加起来为 1，因此它永远无法恢复到原始数字。比如i=3，随机int 0到2，所以最大值为(i-2+2)%3+2=3%3+2=0+2=2。

```
function differentRandInt(min,max,current) {
    var shiftedcurrent = current-min;
    var range = max-min+1;
    var delta = Math.floor((Math.random()*(range-1))+1);
    return (shiftedcurrent + delta)%range + min;
} 
```

所以如果 i=3，那么 i-min 是 1，加上 delta 后的范围是 2,3,4，模 4 得到 2,3,0，所以加上 min 得到 4,5,2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:21:17.360

编辑：更完整的解决方案，并修复了一个错误：

```
var prev, randNumber;
for(var i = 0; i < noBoxes.length; i+=randNumber) {
    do {
        randNumber = 2 + Math.floor(Math.random() * 4);
    } while(randNumber === prev);
    prev = randNumber;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:28:38.967

像这样：http: [//jsbin.com/eyitav/](http://jsbin.com/eyitav/)

```
var loopingValues = [2, 3, 4, 5],
    len,
    value,
    rand;

while ( (len=loopingValues.length) ) {
  rand = ~~( ( Math.random() % 1 ) * len);
  value = loopingValues.splice(rand, 1)[0];
  //alert( value )
} 
```

现在你有你的循环`value`作为`2, 3, 4 and 5`随机顺序的值。

* * *

或者更容易阅读：http: [//jsbin.com/ejizuw/](http://jsbin.com/ejizuw/)

```
var loopingValues = [2, 3, 4, 5],
    value,
    rand;

while ( loopingValues.length ) {
  rand = Math.random();
  if ( rand === 1 ) {
    rand = 0;
  }
  rand = rand * loopingValues.length;
  rand = Math.floor(rand);

  value = loopingValues[rand];

  loopingValues.splice(rand, 1);

  alert(value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:45:31.750

您可以在开始循环之前将您的系列放在一个数组中 -

```
var noBoxes={length:100};
var R= [2], r= 2, n= 2;
while(R.length<noBoxes.length){
    n= R[R.length-1];
    while(r== n) r= 2+Math.floor(Math.random()*4)
    R.push(r);
}

And then loop through the array-

for(var i = 0; i < noBoxes.length; i+=R[i]) {
    ....
} 
```

# xslt - 比较 XSLT 中的字符串时如何指定“不等于” ?

> ID：10534882
> 
> 赞同：71
> 
> 时间：2012-05-10T13:19:44.333
> 
> 标签：xslt, xpath

目前我有一个带有以下代码的 xsl，我正在尝试打印出“count”，只有当它不等于`N/A`. 但似乎`"!="`不起作用。

```
<xsl:for-each select="Directory/Match">
    <xsl:if test = "Count != N/A">
        <tr>
            <td><xsl:value-of select="@bookName" /></td>
            <td><xsl:value-of select="@AuthorName" /></td>
            <td><xsl:value-of select="Count" /></td>
        </tr>
    </xsl:if>
</xsl:for-each> 
```

但是，如果我尝试将它与数值进行比较，它会起作用。

例子：

```
<xsl:if test = "Occurrances != 0"> 
```

有人可以告诉我：如果我想比较字符串，我可以使用什么？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-05-10T15:02:55.117

正如菲尔伯特所说；但还要注意，通常最好写

```
test="not(Count = 'N/A')" 
```

如果只有一个 Count 元素，它们的含义相同，但如果没有 Count，或者有多个，则含义不同。

**6年后**

由于这个答案似乎已经变得流行，但对某些读者来说可能有点神秘，让我扩展它。

XPath 中的“=”和“!=”运算符可以比较两组值。一般来说，如果 A 和 B 是一组值，那么如果 A 和 B 中存在任何相等的值对，则“=”返回 true，而如果存在任何不相等的对，则“!=”返回 true。

在 A 选择零或一节点且 B 是常量（例如“NA”）的常见情况下，这意味着`not(A = "NA")`如果 A 不存在或具有不等于“NA”的值，则返回 true。相反，`A != "NA"`如果 A 存在且不等于“NA”，则返回 true。通常您希望将“不存在”的情况视为“不相等”，这意味着这`not(A = "NA")`是适当的表述。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-10T13:35:01.163

如果要与字符串文字进行比较，则需要将其放在（单）引号中：

```
<xsl:if test="Count != 'N/A'"> 
```

# extjs - Sencha 构建 MVC3 文件

> ID：10534889
> 
> 赞同：0
> 
> 时间：2012-05-10T13:20:24.743
> 
> 标签：extjs

我无法在 ExtJs 中为我的 MVC 应用程序运行 sencha build 命令。但是 sencha create jsb 命令已经成功生成了文件

```
{
"projectName": "Project Name",
"licenseText": "Copyright(c) 2011 Company Name",
"builds": [
    {
        "name": "All Classes",
        "target": "all-classes.js",
        "options": {
            "debug": true
        },
        "files": []
    },
    {
        "name": "Application - Production",
        "target": "app-all.js",
        "compress": true,
        "files": [
            {
                "path": "",
                "name": "all-classes.js"
            },
            {
                "path": "",
                "name": "app.js"
            }
        ]
    }
],
"resources": []
} 
```

有人能帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:40:16.900

似乎没有成功创建 jsb 文件，您的应用程序的文件应该在构建部分的“文件”中，但事实并非如此。像这样：

```
...
"builds": [
    {
        "name": "All Classes",
        "target": "all-classes.js",
        "options": {
            "debug": true
        },
        "files": [{
                "path": "app/controller",
                "name": "MyController.js"
            }, {
              ... etc
            }]
    },
... 
```

你用的是什么版本的sdk？

# php - 处理数据库中的300个字段表单

> ID：10534892
> 
> 赞同：2
> 
> 时间：2012-05-10T13:20:26.673
> 
> 标签：php, mysql

所以，我现在正在处理一个巨大的在线表格。它在视觉上分为不同的部分，但这些部分往往会发生变化。大约有 300 个字段，将它们放在一个表中几乎看起来很荒谬，但是如果我将它们分开并且有人决定在几个不同的场合将一个字段移动到前端的不同部分，它将在数据库中变得一团糟和字段将不匹配它们的前端部分。

我本质上是在问：***以标准化方式组织这样的事情的最佳方式是什么？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:28:26.003

您可以将字段名称移动到另一个表并在值表中引用它们。

例子

```
field_id   | field_name
------------------------
1          | first_name
2          | last_name 
```

然后从值中引用：

```
value_id  | field_id   | value
--------------------------------
1         | 1          | John
2         | 2          | Doe
3         | 1          | Max
4         | 2          | Jefferson 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:48:34.140

如果您要使用 SQL 数据库，那么上面描述的实体-属性-值模型 (EAV) 可能是一个不错的答案。您可能还希望将几个非规范化表与通用或专用数据混合在一起。

另一个选择可能是文档存储；这听起来就像是启发 MongoDB 等数据存储的问题。在 MongoDB 中，您只需将所有内容存储为一个巨大的 json 文档。如果某些记录不需要某些数据并且被遗漏，则不会像稀疏填充的宽 SQL 数据库表那样将其视为“坏”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:25:34.970

您可以对字段进行分组。将它们作为组件分开，您可能会注意到，您可以从该表中创建多个表。也可以通过分隔表格来制作表格，例如：

*   字段集标签
*   将它分成多个步骤（它认为最好的解决方案）
*   填写前一个表单后，每个表单的多个 ajax 请求
*   由打开/关闭 javascript 窗口分隔的表单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:49:38.130

数据库设计、对象设计和表单设计是三个非常不同的元素。如果数据之间存在一对一的关系，则应该使用不同的表来规范化数据。但是，如果一切都是一对一的关系，那么将所有 300 个都放在同一个表中是完全可以接受的。我很难相信有一个逻辑甚至物理结构本身就包含 300 个元素。但这是可能的。如果您开始了解某物的属性数据，可以说我们正在谈论车辆。我们可以谈论汽车、卡车、半挂车、摩托车、自行车等……每种类型的车辆都有不同的属性，这些属性将在单独的表中进行管理以规范化数据。将它们中的元素移动到不同的页面并没有多大意义；但移动共同属性可能。例如，我不会在第 1 部分和第 4 部分再次询问颜色。但我可能会分开描述品牌、型号和自定义属性。

# java - 如何使用 Spring @Configuration 覆盖导入的资源？

> ID：10534893
> 
> 赞同：6
> 
> 时间：2012-05-10T13:20:27.313
> 
> 标签：java, spring, configuration, dependency-injection

是否可以使用 Spring 注释配置覆盖导入的资源？

**配置类：**

```
@Configuration
@ImportResource({"classpath:applicationContext.xml"})
public class CoreConfiguration {

    @Resource(name = "classA")
    private ClassA classA;

    @Bean(name = "nameIWantToOverride")
    private ClassB classB() {
       return new ClassB("different setting");
    }

} 
```

**applicationContext.xml 包括：**

```
<bean name="classA" class="a.b.c.ClassA">
     <property name="nameIWantToOverride" ref="classB" />
</bean> 
```

如果 classA 有一个 classB 字段，但我希望它使用我在配置类中定义的 ClassB，这可能吗？我尝试切换顺序，但没有帮助。似乎 XML 优先，因为当我运行一个简单的实例化配置测试时，它永远不会到达 classB 方法。如果我更改名称使其与 xml 文件中的 bean 不匹配，那么它确实会到达 classB 方法。

我已经看到它在哪里可以以其他方式工作：[Spring 框架可以用基于 XML 的配置覆盖基于注释的配置吗？](https://stackoverflow.com/questions/4943475/can-spring-framework-override-annotation-based-configuration-with-xml-based-conf)但是这个方向呢？由于这是较新的做事方式，我认为您可以做到这一点。

我能做些什么来解决这个问题？

编辑：用 XML 更新。假设 classA 有多个字段，但我只想替换一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T14:42:52.753

您不能使用注释覆盖 spring xml 配置。

Spring XML 配置总是优先于注解配置

# java - Eclipse 相对 ClassPath？

> ID：10534896
> 
> 赞同：0
> 
> 时间：2012-05-10T13:20:43.013
> 
> 标签：java, eclipse, ant, rad

有人已经问过这个问题但没有得到要求的答案，因为我现在面临这个问题，所以我问同样的问题..

我尝试在我的工作区 .classpath 文件中更改以下行以解决无法找到引用项目的构建错误。

```
<classpathentry exported="true" kind="lib" path="/axis212.jar" sourcepath="/axis212.jar"/> 
```

至

```
 <classpathentry exported="true" kind="lib" path="/PREVIOUS_DIR/axis212.jar" sourcepath="/PREVIOUS_DIR/axis212.jar"/> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T23:44:28.943

您可以通过从不`.classpath`直接编辑文件并使用 Java Build Path 对话框来解决该问题（以及可能的其他潜在问题）。尝试这样做，然后将生成的`.classpath`文件与您上面引用的文件进行比较，并见证差异。

# com - 无法使用 System.IO.Packaging 确定域的身份

> ID：10534899
> 
> 赞同：4
> 
> 时间：2012-05-10T13:20:48.590
> 
> 标签：com, interop, appdomain, system.io.packaging

通过 COM 互操作使用 System.IO.Packaging 时，我收到“无法确定域的身份”，有几篇文章描述了为什么会发生这种情况，解决方案是在其自己的 AppDomain 中运行有问题的函数。

所以我采用了示例代码，如下所示，但我仍然收到错误，我想知道我做错了什么，而且，对于 VS 2010，它说 AddAssembly 和 AddHost 已过时 - 我想知道这是否意味着它们不再已实现，但如果是这样的话，我真的不明白如何使用新方法（AddAssemblyEvidence 和 AddHostEvidence）？

```
 AppDomainSetup setup = new AppDomainSetup();
 setup.ApplicationBase = AppDomain.CurrentDomain.BaseDirectory;

 Evidence evidence = new Evidence(AppDomain.CurrentDomain.Evidence);
 evidence.AddAssembly(Assembly.GetExecutingAssembly().FullName);
 evidence.AddHost(new Zone(SecurityZone.MyComputer));

 AppDomain domain = AppDomain.CreateDomain("BlobPackage", evidence, setup);

 BlobPackage blob_interal = (BlobPackage)domain.CreateInstanceAndUnwrap(typeof(BlobPackage).Assembly.FullName, typeof(BlobPackage).FullName);

 blob_interal.pack(FilePath, RootPath, m_source_files); <-- STILL FAILS

 AppDomain.Unload(domain); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:37:00.750

我自己解决了这个问题，我忘了从 MarshalByRefObject 继承我的类。

它有点愚蠢，它允许您创建一个实例并调用它，除非它仍在默认域中运行，您会认为它会抛出异常或其他东西，无论如何通过将类标记为 [Serializable()] 并派生自 MarshalByRefObject修复它。

# metaweblog - 如何将带有 metaWeblog 的文件附加到博客文章中？

> ID：10534900
> 
> 赞同：1
> 
> 时间：2012-05-10T13:21:01.687
> 
> 标签：metaweblog

我正在尝试将图片发布到我的博客。是的，我可以上传图片，我可以在帖子的内容中看到这些图片，但它不在附件列表中。

如何将我上传的图片放入附件列表中？

当我将 MS word 2010 发布到我的博客时，我放在 word 上的图像总是在附件列表中更新。但我的 php 源代码没有。

有没有办法将文件附加到博客文章中？

* * *

```
$cBlog = new blog;
$title = "This is a article's title";
$desc = "IT will be the content";
$return = $cBlog->writePost($title, $desc);

class blog
{       
    public $g_blog_url;
    public $user_id;
    public $blogid;
    public $password;
    public $publish;

    function __construct()
    {           
        $this->g_blog_url = "https://api.blog.naver.com/xmlrpc";
        $this->user_id = "globeseen";
        $this->blogid = "globeseen";
        $this->password = "password";
        $this->publish = true; 
    }

    function writePost($title, $description, $category="") 
    { 
        $client = new xmlrpc_client($this->g_blog_url); 
        $client->setSSLVerifyPeer(false); 
        $GLOBALS['xmlrpc_internalencoding']='UTF-8';

        $img = $this->upload_image("D:\\1.jpg");

        $struct = array(
        'title' => new xmlrpcval($title, "string"), 
        'description' => new xmlrpcval($description."<img src=$img>", "string"),
        'categories' => new xmlrpcval($category, "string"),
        'tags' => new xmlrpcval('clothing', "string")
        );

        $f = new xmlrpcmsg("metaWeblog.newPost", 
        array( 
        new xmlrpcval($this->blogid, "string"),
        new xmlrpcval($this->user_id, "string"),
        new xmlrpcval($this->password, "string"),
        new xmlrpcval($struct , "struct"), 
        new xmlrpcval($this->publish, "boolean")
             ));

        $f->request_charset_encoding = 'UTF-8';
        return $response = $client->send($f);
    }

    function upload_image($fpath) {
  global $api_url, $blog_user, $blog_passwd;

  $api_url = $this->g_blog_url;
  $blog_user = $this->user_id;
  $blog_passwd = $this->password;

  $imgbit = file_get_contents($fpath, FILE_BINARY);
      $img = new xmlrpcval(
       array (
        'bits' => new xmlrpcval($imgbit, 'base64'),
        'type' => new xmlrpcval('image/jpeg', 'string'),
        'name' => new xmlrpcval(basename($fpath), 'string')
       ), 'struct');

      $c = new xmlrpc_client($api_url);

      $c->setSSLVerifyPeer(false);
      $x = new xmlrpcmsg("metaWeblog.newMediaObject");
      $x->addParam(new xmlrpcval($blog_user, 'string'));
      $x->addParam(new xmlrpcval($blog_user, 'string'));
      $x->addParam(new xmlrpcval($blog_passwd, 'string'));
      $x->addParam($img);

      $c->return_type = 'phpvals';
      $r =$c->send($x);
      if ($r->errno=="0") {
          return $r->val['url'];
      } else {
          echo "There was an error<pre>";
          print_r($r);
          echo "</pre>";
          return null;
      }
     } 

} 
```

# c# - Linq to Objects 通用复制方法

> ID：10534902
> 
> 赞同：1
> 
> 时间：2012-05-10T13:21:07.677
> 
> 标签：c#, linq

我正在尝试制作一个通用的 Duplicate linq 扩展方法。但是我不能正确地得到表达式树。这是我试图模仿的 linq 语句。

```
var query = cars.AsQueryable().GroupBy(x => new { x.Color, x.Length }).Where(g => g.Count() > 1).SelectMany(p => p); 
```

但我想这样称呼我的分机。请注意，我可以发送任意数量的属性。（颜色、长度）等等……</p>

```
var test = cars.AsQueryable().GetDuplicates2(new[] { "Color", "Length" }); 
```

当我试图计算匿名类型时，我陷入了 where 表达式中。groupby 表达式已经按预期工作。

请注意，我知道还有很多其他方法可以做到这一点，但是我正在尝试使用这些表达式来获得经验。所以请保持针对此的答案。

这是我当前的代码：

```
 public static IEnumerable<TSource> GetDuplicates2<TSource>(this IQueryable<TSource> source, IEnumerable<string> fieldNames)
    {

        IQueryable groups = null;
        try
        {
            Dictionary<string, PropertyInfo> sourceProperties = fieldNames.ToDictionary(name => name, name => source.ElementType.GetProperty(name));
            Type dynamicType = LinqRuntimeTypeBuilder.GetDynamicType(sourceProperties.Values);

            ParameterExpression sourceItem = Expression.Parameter(typeof(TSource), "x");
            IEnumerable<MemberBinding> bindings = dynamicType.GetFields().Select(p => Expression.Bind(p, Expression.Property(sourceItem, sourceProperties[p.Name]))).OfType<MemberBinding>();

            Expression e1 = Expression.Lambda(Expression.MemberInit(
                Expression.New(dynamicType.GetConstructor(Type.EmptyTypes)), bindings), sourceItem);

            MethodCallExpression groupByExpression = Expression.Call(typeof(Queryable), "GroupBy", new Type[] { source.ElementType, dynamicType },
                            Expression.Constant(source), e1);

            sourceItem = Expression.Parameter(source.ElementType, "group");
            Expression left = Expression.Call(sourceItem, typeof(Queryable).GetMethods().FirstOrDefault(p => p.Name == "Count"));
            Expression right = Expression.Constant(0);
            Expression e2 = Expression.GreaterThan(left, right);

            MethodCallExpression whereCallExpression = Expression.Call(
            typeof(Queryable),
            "Where",
            new Type[] { typeof(TSource) },
            groupByExpression,
            Expression.Lambda<Func<TSource, bool>>(e2, new ParameterExpression[] { sourceItem }));

            sourceItem = Expression.Parameter(typeof(TSource), "p");

            MethodCallExpression selectManyCallExpression = Expression.Call(
                typeof(IQueryable<TSource>),
                "SelectMany",
                null,
                whereCallExpression,
                Expression.Lambda<Func<TSource, TSource>>(sourceItem, new ParameterExpression[] { sourceItem }));

            groups = source.Provider.CreateQuery(selectManyCallExpression);

        }
        catch (Exception ex) { }

        if (groups != null)
            foreach (var group in groups)
                foreach (var item in @group)
                    yield return item;
    }

    public static IQueryable SelectDynamic(this IQueryable source, IEnumerable<string> fieldNames)
    {
        Dictionary<string, PropertyInfo> sourceProperties = fieldNames.ToDictionary(name => name, name => source.ElementType.GetProperty(name));
        Type dynamicType = LinqRuntimeTypeBuilder.GetDynamicType(sourceProperties.Values);

        ParameterExpression sourceItem = Expression.Parameter(source.ElementType, "t");
        IEnumerable<MemberBinding> bindings = dynamicType.GetFields().Select(p => Expression.Bind(p, Expression.Property(sourceItem, sourceProperties[p.Name]))).OfType<MemberBinding>();

        Expression selector = Expression.Lambda(Expression.MemberInit(
            Expression.New(dynamicType.GetConstructor(Type.EmptyTypes)), bindings), sourceItem);

        return source.Provider.CreateQuery(Expression.Call(typeof(Queryable), "Select", new Type[] { source.ElementType, dynamicType },
                     Expression.Constant(source), selector));
    }

    public static class LinqRuntimeTypeBuilder
    {
        private static AssemblyName assemblyName = new AssemblyName() { Name = "DynamicLinqTypes" };
        private static ModuleBuilder moduleBuilder = null;
        private static Dictionary<string, Type> builtTypes = new Dictionary<string, Type>();

        static LinqRuntimeTypeBuilder()
        {
            moduleBuilder = Thread.GetDomain().DefineDynamicAssembly(assemblyName, AssemblyBuilderAccess.Run).DefineDynamicModule(assemblyName.Name);
        }

        private static string GetTypeKey(Dictionary<string, Type> fields)
        {
            //TODO: optimize the type caching -- if fields are simply reordered, that doesn't mean that they're actually different types, so this needs to be smarter
            string key = string.Empty;
            foreach (var field in fields)
                key += field.Key + ";" + field.Value.Name + ";";

            return key;
        }

        public static Type GetDynamicType(Dictionary<string, Type> fields)
        {
            if (null == fields)
                throw new ArgumentNullException("fields");
            if (0 == fields.Count)
                throw new ArgumentOutOfRangeException("fields", "fields must have at least 1 field definition");

            try
            {
                Monitor.Enter(builtTypes);
                string className = GetTypeKey(fields);

                if (builtTypes.ContainsKey(className))
                    return builtTypes[className];

                TypeBuilder typeBuilder = moduleBuilder.DefineType(className, TypeAttributes.Public | TypeAttributes.Class | TypeAttributes.Serializable);

                foreach (var field in fields)
                    typeBuilder.DefineField(field.Key, field.Value, FieldAttributes.Public);

                builtTypes[className] = typeBuilder.CreateType();

                return builtTypes[className];
            }
            catch (Exception ex)
            {

            }
            finally
            {
                Monitor.Exit(builtTypes);
            }

            return null;
        }

        private static string GetTypeKey(IEnumerable<PropertyInfo> fields)
        {
            return GetTypeKey(fields.ToDictionary(f => f.Name, f => f.PropertyType));
        }

        public static Type GetDynamicType(IEnumerable<PropertyInfo> fields)
        {
            return GetDynamicType(fields.ToDictionary(f => f.Name, f => f.PropertyType));
        }
    }
}

public class Car
{
    public int Length { set; get; }
    public int Width { set; get; }
    public string Color { set; get; }
    public string Model { set; get; }
    public string Make { set; get; }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:27:05.490

你把事情弄得太复杂了。说啊：

```
 public static IEnumerable<TSource> GetDuplicatesByKey<TSource, TKey>(
     this IEnumerable<TSource> source,
     Func<TSource, TKey> keySelector
 ) {
     return source.GroupBy(keySelector)
                  .Where(g => g.Skip(1).Any())
                  .SelectMany(g => g);
 } 
```

你甚至可以有一个带`IEqualityComparer<TKey>`等的重载。

# c# - 指定“已编译”选项时，正则表达式“忽略大小写”选项不起作用

> ID：10534910
> 
> 赞同：5
> 
> 时间：2012-05-10T13:21:26.693
> 
> 标签：c#, regex

我有以下非常简单的正则表达式，它匹配字符串中的 HTML 标记。我设置了不区分大小写的选项，因此标签的大小写无关紧要。但是，当设置了 'compiled' 选项时，'IgnoreCase' 选项似乎被忽略了。

示例代码：

```
string text = "<SPAN>blah</SPAN><span>blah</span>";
Regex expr1 = new Regex("</*span>", RegexOptions.IgnoreCase);
Regex expr2 = new Regex("</*span>", RegexOptions.IgnoreCase & RegexOptions.Compiled);

MatchCollection result1 = expr1 .Matches(text); 
//gives 4 matches- <SPAN>,</SPAN>,<span> & </span>
MatchCollection result2 = expr2 .Matches(text);
//only gives 2 matches- <span> & </span> 
```

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-10T13:23:09.453

您对标志使用按位与，您应该使用按位或。

这一点：

```
RegexOptions.IgnoreCase & RegexOptions.Compiled 
```

应该：

```
RegexOptions.IgnoreCase | RegexOptions.Compiled 
```

[这是一篇关于标志和枚举如何在 C# 中工作的好文章。](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/07/22/c-fundamentals-combining-enum-values-with-bit-flags.aspx)

# batch-file - 如何从函数中退出批处理文件？

> ID：10534911
> 
> 赞同：15
> 
> 时间：2012-05-10T13:21:32.053
> 
> 标签：batch-file, exit, goto

我编写了一个简单的函数来检查目录：

```
:direxist
if not exist %~1 (
    echo %~1 could not be found, check to make sure your location is correct.
    goto:end
    ) else (
    echo %~1 is a real directory
    goto:eof
    ) 
```

:end 写成

```
:end
endlocal 
```

我不明白为什么程序在 goto:end 被调用后不会停止。我有另一个函数使用相同的方法来停止程序并且它工作正常。

```
:PRINT_USAGE
echo Usage:
echo ------
echo <file usage information>
goto:end 
```

在这种情况下，程序在调用 :end; 后停止。为什么这在 :direxist 中不起作用？感谢您的帮助！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-10T13:44:45.903

我想你在这里混合`call`和`goto`陈述。

批处理文件中的标签可以与 a`call`或 a一起使用`goto`，但行为不同。
如果您使用`call`这样的*函数*，它将在函数到达文件末尾或显式`exit /b`或`goto :eof`（如您的`goto :end`）时返回。

*因此，如果您将标签用作函数*，则无法取消您的批次。

但是，`goto`给一个标签，不会*返回*给调用者。

**使用语法错误：**

但也有一种方法可以从*函数*中退出批处理。
您可以创建语法错误，这会强制批处理停止。
但它有副作用，本地（setlocal）变量不会被删除。

```
@echo off
call :label hello
call :label stop
echo Never returns
exit /b

:label
echo %1
if "%1"=="stop" goto :halt
exit /b

:halt
call :haltHelper 2> nul

:haltHelper
() 
exit /b 
```

**使用 CTRL-C：**

创建类似于 CTRL-C 错误代码的错误代码也会停止批处理。
退出后，setlocal 状态是*干净*的！
请参阅@dbenham 的回答[Exit batch script from inside a function](https://stackoverflow.com/a/25474648/463115)

**使用高级异常处理：**

这是最强大的解决方案，因为它能够删除任意数量的堆栈级别，它可用于仅退出当前批处理文件并显示堆栈跟踪。
它使用了这样一个事实，即`(goto)`不带参数从堆栈中删除一个元素。
请参阅[Windows 批处理是否支持异常处理？](https://stackoverflow.com/a/31445372/463115)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T15:33:17.067

jeb 的解决方案效果很好。但这可能并不适用于所有情况。它有两个潜在的缺点：

1) 语法错误将停止**所有**批处理。因此，如果批处理脚本调用了您的脚本，并且您的脚本因语法错误而停止，则控制权不会返回给调用者。那可能很糟糕。

2) 通常，当批处理终止时，每个 SETLOCAL 都有一个隐式 ENDLOCAL。***但是致命的语法错误会在没有隐式 ENDLOCAL 的情况下***终止批处理！这可能会产生令人讨厌的后果 :-( 请参阅我的 DosTips post [SETLOCAL 在批处理终止后继续！](http://www.dostips.com/forum/viewtopic.php?t=1934)了解更多信息。

***更新 2015-03-20*** *请参阅[https://stackoverflow.com/a/25474648/1012053](https://stackoverflow.com/a/25474648/1012053)，了解立即终止所有批处理的干净方法。*

在函数中停止批处理文件的另一种方法是使用 EXIT 命令，该命令将完全退出命令 shell。但是稍微创造性地使用 CMD 可以使它对解决问题很有用。

```
@echo off
if "%~1" equ "_GO_" goto :main
cmd /c ^""%~f0" _GO_ %*^"
exit /b

:main
call :label hello
call :label stop
echo Never returns
exit /b

:label
echo %1
if "%1"=="stop" exit
exit /b 
```

在我的 PC 上，我的版本名为“daveExit.bat”，jeb 的版本名为“jebExit.bat”。

然后我使用这个批处理脚本测试它们

```
@echo off
echo before calling %1
call %1
echo returned from %1 
```

这是结果

```
>test jebExit
before calling jebExit
hello
stop

>test daveExit
before calling daveExit
hello
stop
returned from daveExit

> 
```

EXIT 解决方案的一个潜在缺点是不会保留对环境的更改。这可以通过在退出之前将环境写入临时文件，然后再读回来部分解决。

```
@echo off
if "%~1" equ "_GO_" goto :main
cmd /c ^""%~f0" _GO_ %*^"
for /f "eol== delims=" %%A in (env.tmp) do set %%A
del env.tmp
exit /b

:main
call :label hello
set junk=saved
call :label stop
echo Never returns
exit /b

:label
echo %1
if "%1"=="stop" goto :saveEnvAndExit
exit /b

:saveEnvAndExit
set >env.tmp
exit 
```

但是值中带有换行符 (0x0A) 的变量将无法正确保留。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-06T10:34:19.053

如果您使用`exit /b X`退出函数，那么它将设置`ERRORLEVEL`为 的值`X`。然后，如果不为零，您可以使用`||` [条件处理符号](https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx?mfr=true?mfr=true "微软：命令外壳概述")来执行命令。`ERRORLEVEL`

```
@echo off
setlocal
call :myfunction PASS || goto :eof
call :myfunction FAIL || goto :eof
echo Execution never gets here
goto :eof

:myfunction
    if "%1"=="FAIL" ( 
        echo myfunction: got a FAIL. Will exit.
        exit /b 1
    )
    echo myfunction: Everything is good.
    exit /b 0 
```

此脚本的输出为：

```
myfunction: Everything is good.
myfunction: got a FAIL. Will exit. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T19:29:50.093

这是我的解决方案，如果所有都检查了错误级别，它将支持嵌套例程我在所有调用（内部或外部）中添加了错误级别的测试

```
@echo off
call :error message&if errorlevel 1 exit /b %errorlevel%<
@echo continuing
exit /b 0
:error
@echo in %0
@echo message: %1
set yes=
set /p yes=[no]^|yes to continue
if /i "%yes%" == "yes" exit /b 0
exit /b 1 
```

# ajax - Edge.remove 返回的错误

> ID：10534916
> 
> 赞同：-1
> 
> 时间：2012-05-10T13:21:53.943
> 
> 标签：ajax, facebook, facebook-like

我向您发送此消息是因为我的竞赛应用程序中的 subscribe 的 edge.remove 功能有一点问题。

在我的应用程序中，我想听按钮上的喜欢和不喜欢，以便将其保存在数据库中以建立比赛排名。但是我的不喜欢功能有问题，它扭曲了我的排名。当我喜欢图像时，它可以工作，但是当我不喜欢以前的喜欢按钮时，它会返回一个名为“错误”的链接（红色）女巫链接出现以下错误：

[“点赞页面时出错。如果您是页面所有者，请尝试通过 Facebook 开发网站 ( https://developers.facebook.com/tools/lint/](https://developers.facebook.com/tools/lint/) )上的 linter 运行您的页面并修复任何错误。” .

[在 firebug 中，Facebook 通过 url POST http://www.facebook.com/ajax/connect/external_node_connect.php?__a=1](http://www.facebook.com/ajax/connect/external_node_connect.php?__a=1)调用返回以下代码：

> 对于 (;;);{"__ar":1,"payload":{"requires_login":false,"success":false,"already_connected" :false,"is_admin":false,"show_error":true,"error_info ": {"brief":"发生错误。","full":"点赞页面时出错。如果您是页面所有者，请尝试通过 Facebook devsite 上的 linter 运行您的页面（https:// /developers.facebook.com/tools/lint/) 并修复任何错误。", "errorUri":"/connect/connect_to_node_error.php?title=An+error+occurred.&body=There+was+an+error+like +the+page.+If+you+are+the+page+owner\u00252C+请+try+running+your+page+through+the+linter+on+the+Facebook+devsite+\u002528https\u00253A\u00252F\ u00252Fdevelopers.facebook。com\u00252Ftools\u00252Flint\u00252F\u002529+and+fixing+any+errors.&hash=AQBOwKwXHdofUaSJ"}}}

我的代码是：

```
 window.fbAsyncInit = function() {

    FB.init({
            appId  : '<?= APP_ID; ?>',
            status : true, 
            cookie : true, 
            xfbml  : true  
           }); 

           FB.Canvas.setAutoResize();

           FB.Event.subscribe('edge.create',
                function(href, widget) {
                    alert(href);
                    //$('a').bind('click',false);
                    //liketoggle(href);
                }
            );

            FB.Event.subscribe('edge.remove',
                function(href, widget) {
                    alert('href');
                    //$('a').bind('click',false);
                    //liketoggle(href);
                }
            );

        };

        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/fr_FR/all.js#xfbml=1&appId=<?= APP_ID; ?>";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:21:52.857

您不是向该函数传递了太多参数吗？应该只有一个。

下面一个对我有用：

```
FB.Event.subscribe('edge.remove',
    function(response) {
        alert('You unliked the URL: ' + response);
    }
); 
```

这是文档：

[http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe)

# c# - 按下时切换按钮更改背景（但只有一次）

> ID：10534921
> 
> 赞同：0
> 
> 时间：2012-05-10T13:22:18.970
> 
> 标签：c#, wpf, styles

按下按钮时，按钮的背景 ( `Rectangle Fill`) 会发生变化。所以用户可以看到哪些按钮被按下，哪些没有被按下。

**问题：**

我使用触发器和 a`Togglebutton`来执行`"IsChecked"`更改背景。但背景变化可能只发生 1 次。

*例如：*

按钮背景 = 黑色 --> `PRESS`--> 按钮背景 = 蓝色

但是当我再次按下按钮时，按钮背景变回黑色（因为它是一个切换按钮）。

***我怎样才能确保背景只改变 1 次？***

**编辑：**按钮必须保持启用状态，因为用户在按下按钮时会给出一个理由。这意味着如果他们选择了错误的原因，他们就能够改变它。

```
<Style x:Key="ButtonStyleReg" TargetType="{x:Type myClasses:RegButton}">
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type ToggleButton}">
            <Grid x:Name="registrationButton">
                <Rectangle Name="rectangleBtn" Fill="#FF89959A" Height="Auto" RadiusY="15" RadiusX="15" Stroke="White" Width="Auto"/>

                <TextBlock x:Name="reason" TextWrapping="Wrap" 
                           Text="{Binding Reason, StringFormat=\{0\}}"
                           HorizontalAlignment="Center" Margin="0,7.5,0,0" Height="Auto" 
                           VerticalAlignment="Top" FontWeight="Bold" >
                </TextBlock>                                                                                   
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsFocused" Value="True"/>
                <!--<Trigger Property="IsDefaulted" Value="True"/>-->

                <Trigger Property="IsChecked" Value="True">
                    <Setter TargetName="rectangleBtn" Property="Fill" Value="blue" />
                </Trigger>                                                     
                <Trigger Property="IsEnabled" Value="False"/>
            </ControlTemplate.Triggers>
        </ControlTemplate>

    </Setter.Value>
</Setter>
<Setter Property="FontSize" Value="10.667"/> 
```

实现样式的列表框：

```
<ListBox x:Name="lbRegistration" ItemsSource="{Binding RegBtns, ElementName=Window}" Background="{x:Null}" 
            BorderBrush="{x:Null}" Grid.Column="1" 
            ScrollViewer.HorizontalScrollBarVisibility="Hidden" ScrollViewer.VerticalScrollBarVisibility="Disabled" Height="75">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>

            <ListBox.ItemTemplate>
                <DataTemplate>
                    <myClasses:RegistrationButton x:Name="RegistrationButton" HorizontalAlignment="Center" Height="71" Width="148" 
                                                  Margin="10,0,5,0" 
                                                  Style="{DynamicResource ButtonStyleRegistration}"
                                                  Click="RegistrationButton_Click"
                                                  Title="{Binding Title}"
                                                  Oorzaak="{Binding Oorzaak}"     

                                                  DuurStilstand="{Binding DuurStilstand, 
                                                        Converter={StaticResource  DateTimeConverter}}"

                                                  BeginStilstand="{Binding BeginStilstand}"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

最好的问候，皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:32:30.403

如果您可以从后面的代码访问矩形，则非常简单：

```
rectangleBtn.Fill = Brushes.Blue; 
```

如果您无法访问它 - 让自己有两种风格。一个是原始样式，另一个是用户点击时应用的蓝色样式。

在后面的代码中，在事件 Click="RegistrationButton_Click" 上将 Style 设置为 BlueStyle。

```
RegistrationButton.Style = this.FindResource("ButtonStyleRegistration") as Style; 
```

由于您总是希望它是蓝色的，因此此代码就足够了。它将永远为您打造蓝色。第一次，其他任何时候。这样您就可以满足您的要求，并且样式只会更改一次。当窗口被加载时，它会加载到原来的样式（第一个样式）。因此，在您的 XAML 中添加样式“Black”并在后面的代码中显示如上所示。

然后必须将其删除：

```
<Trigger Property="IsChecked" Value="True"> 
    <Setter TargetName="rectangleBtn" Property="Fill" Value="blue" /> 
</Trigger> 
```

然后这个：

```
<myClasses:RegistrationButton x:Name="RegistrationButton" HorizontalAlignment="Center" Height="71" Width="148"  
Margin="10,0,5,0"  
Style="{DynamicResource ButtonStyleRegistration}" 
Click="RegistrationButton_Click" 
```

应该：

```
<myClasses:RegistrationButton x:Name="RegistrationButton" HorizontalAlignment="Center" Height="71" Width="148"  
Margin="10,0,5,0"  
Style="{DynamicResource ButtonStyleRegBlack}" 
Click="RegistrationButton_Click" 
```

就这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:48:52.750

如果您使用的是 MVVM 方法，我建议将背景和 Click 命令绑定到 ViewModel 中的成员。第一次单击按钮时，它会设置一个标志并更改背景颜色。下次单击按钮时，如果设置了标志，则命令返回而不更改背景。

XAML：

```
<ToggleButton Background="{Binding MyBackground}" Command="{Binding OnClickCmd}"/> 
```

视图模型

```
public class ViewModel : INotifyPropertyChanged
{
     public Brush MyBackground 
     { 
          get { return background_; } 
          set {
                background_ = value;
                PropertyChanged(this, new PropertyChangedEventArg("MyBackground");
          }
     }

     public ICommand OnClickCmd
     {
          get {
               return new DelegateCommand(()=>{ // DelegateCommand implements ICommand
                  if(!isBackgroundSet) {
                      background = Brushes.Red;
                      isBackgroundSet_ = true;    
                  }
               });
          }
     }

     private Brush background_;
     private bool isBackgroundSet_;
     private event PropertyChangedEventHandler PropertyChagned;
 } 
```

# asp.net-mvc-3 - EF 4.3.1 代码优先更新相关表

> ID：10534922
> 
> 赞同：1
> 
> 时间：2012-05-10T13:22:19.077
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4, entity-framework-4.1

## 更新：

这让我快疯了！

经过多次谷歌搜索等。我真的离解决方案更近了......

然而，我发现了一件更让我困惑的事情——在 m_dbContext.SaveChanges() 调用之前实体的“状态”。（请参阅下面的完整存储库代码）

```
var updateInfoState = m_dc.Entry(oldPage.UpdateInfo).State; // State is 'Modified'
var oldPageState = m_dc.Entry(oldPage).State;               // State is 'Detached' 

this.m_dc.SaveChanges(); 
```

为什么“oldPage”是分离的？

现在好绝望！！;)

## 原来的：

我似乎遇到了 EF Code-First 正确更新相关表的问题。

在这个简化的示例中，“UpdateInfo”表正在使用新的 DateTime ... 进行更新，但“Pages”表并未使用新的“Name”值进行更新。

我正在通过 DropCreateDatabaseAlways / override Seed 播种代码优先 POCO ... 并且 EF 正在正确创建测试表 - 所以此时它似乎知道它在做什么......

我确信这是我想念的简单/明显的东西！

非常感谢所有帮助！

*我的班级定义：*

```
public class Page
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual UpdateInfo UpdateInfo { get; set; }  // virtual For Lazy loading
}

[Table("UpdateInfo")]                                   // much better than EF's choice of UpdateInfoes! 
public class UpdateInfo
{
    public int Id { get; set; }
    public DateTime DateUpdated { get; set; }
}

public class DomainContext : DbContext
{
    public DbSet<Page> Pages { get; set; }
    public DbSet<UpdateInfo> UpdateInfo { get; set; }
} 
```

*由 Code-First 创建的表*

```
Pages Table
===========

    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](max) NULL,
    [UpdateInfo_Id] [int] NULL,

UpdateInfo Table
================

    [Id] [int] IDENTITY(1,1) NOT NULL,
    [DateUpdated] [datetime] NOT NULL, 
```

*我的存储库代码：*

```
public Page Get(int id)
{
    Page page = m_dbContext.Pages.Single(p => p.Id == id);
    return page;
}

public void Update(PagePostModel model)
{
    Page oldPage = Get(model.PageModel.Id);                         // on oldPage Name = "Hello", DateUpdated = "Last Year"

    Page newPage = Mapper.Map<PageModel, Page>(model.PageModel);    // on newPage Name = "Goodbye"  (AutoMapper)
    newPage.UpdateInfo = oldPage.UpdateInfo;                        // take a copy of the old UpdateInfo since its not contained in the model

    newPage.UpdateInfo.DateUpdated = DateTime.UtcNow;               // update to now

    oldPage = newPage;                                              // copy the updated page we grabbed from dbContext above (NB Everything looks great here..oldPage is as expected)

    m_dbContext.SaveChanges();                                      // update - only the 'UpdateInfo' table is being updated - No change to 'Pages' table :(((
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:44:12.247

如您所知，Entity Framework 中有一个更改跟踪器 api。

为了跟踪您从数据库中检索到的实体的更改，DbContext 使用它的参考值。

您上面的“更新”功能将 newPage 插入 oldPage。因此，DbContext 永远不会知道 oldPage 是 newPage。所以，它是“分离的”。

但是，对于 UpdateInfo，它是 oldPage 中引用的副本，因此 DbContext 可以跟踪它的变化。所以，它被“修改”了。

要解决这个问题，使用下面的代码怎么样？

```
Page newPage = Mapper.Map<PageModel, Page>(model.PageModel);
oldPage.UpdateInfo = newPage.UpdateInfo; 
oldPage.UpdateInfo.DateUpdated = DateTime.UtcNow;
m_dbContext.SaveChanges(); 
```

**更新**

然后，使用 Attach & Detach 方法。

这些方法可帮助您从 DbContext 附加和分离实体。

```
Page newPage = Mapper.Map<PageModel, Page>(model.PageModel);
// if you attach first, there will be an exception, 
// because there is two entities having same id.
m_dbContext.Entry(oldPage).State = EntityState.Detached; 
m_dbContext.Pages.Attach(newPage);
// if you don't set IsModified = true,
// DbContext cannot know it is changed.
m_dbContext.Entry(newPage).State = EntityState.Modified;
m_dbContext.SaveChanges(); 
```

# objective-c - 光滑的油漆刷

> ID：10534928
> 
> 赞同：1
> 
> 时间：2012-05-10T13:22:30.547
> 
> 标签：objective-c, core-graphics, quartz-graphics, paint

我正在开发一个 iPad 应用程序，它允许用户选择 Air Brush ，这是通过在当前上下文中绘制图像纹理来实现的。

但是当我绘制图像时，我得到了这个效果之王 -![在此处输入图像描述](../Images/a4e13f193309df3e4ba9bf050f92d349.png)

为了避免这种情况，我尝试使用 blendmodeLighten ，这给了我如下正确的方法 ![在此处输入图像描述](../Images/8488561a7f6f0b017be87d2346e89660.png)

但是使用这个我遇到了另一个问题，当我在一种颜色的顶部绘制另一种颜色时，由于混合，我没有得到实际的颜色。

谁可以帮我这个事 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:01:27.387

我不确定这是否是你想要的。

您可以使用 创建另一个位图上下文`CGBitmapContextCreate`，并在该上下文上绘制笔划。

并且使用混合模式`kCGBlendModeColor`，您可以结合当前上下文和位图上下文。

希望能帮助到你。

# box-api - v2 API 中的 public_share？

> ID：10534929
> 
> 赞同：1
> 
> 时间：2012-05-10T13:22:30.890
> 
> 标签：box-api

Box v1 API 有一个 public_share 函数，可以使文件或文件夹可共享给公众。(http://developers.box.net/w/page/12923943/ApiFunction_public_share)

V2中有类似的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:14:05.113

还没有，但是已经计划好了。V2 API 仍处于测试阶段，我们将每周对其进行更改，直到我们宣布它退出测试阶段（又名 GA）。

# php - 如何在 JavaScript 中显示多个结果？

> ID：10534932
> 
> 赞同：2
> 
> 时间：2012-05-10T13:22:59.200
> 
> 标签：php, javascript

我想显示多个选定选项的多个结果，这里我显示我的 PHP 和 JavaScript 代码。

```
function save() {
    if (!validateSave())
        return;
    var e;
    var result;
    e = document.getElementsByName("q1[]");
    for (var j = 0; j <= e.length - 1; j++) {
        if (e[j].checked) {
            result = "1:" + e[j].value;
            //break;
        }
} 
```

HTML 代码

```
 <div class="qright">
        <!-- multioption handler --------------------------------------------------->
        <input type="hidden" name="multioption" value="true"  />
                    <!-- end ------------------------------------------------------------------->
        <label for="q1"><input type="checkbox" name="q1[]" value="1" class="styled" />Reducing cost</label>
        <label for="q1"><input type="checkbox" name="q1[]" value="2" class="styled" />Upgrading your hardware and software infrastructure</label>
        <label for="q1"><input type="checkbox" name="q1[]" value="3" class="styled" />Aligning the IT goals with the overall business strategy</label>
        <label for="q1"><input type="checkbox" name="q1[]" value="4" class="styled" />Enabling agile working</label>
        <label for="q1"><input type="checkbox" name="q1[]" value="5" class="styled" />Streamlining supplier management</label>
        <label for="q1"><input type="checkbox" name="q1[]" value="6" class="styled" />Improving network availability/access</label>
        <label for="q1"><input type="checkbox" name="q1[]" value="7"class="styled"  />Improving the utilisation of your network</label>
    </div> 
```

如果我选择多个选项，那么它也只显示一个值，我应该在 JavaScript 函数中更改什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:26:08.997

替换`document.getElementsByName("q1[]");`为`document.getElementsByName("q1");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:26:40.063

```
result = "1:" + e[j].value; 
```

这看起来就像您每次找到匹配项时都会初始化结果。（即您删除以前的查找并用新查找覆盖它）

你应该使用

```
result += j+":" +e[j].value; 
```

虽然我不明白这如何成为存储多个数据元素的好方法。

也许你应该使用一个数组？

```
result.push(e[j].value); 
```

（在数组情况下，您需要将结果 var 初始化为数组`var result = new Array;`

# string - 通过哈希值比较长字符串

> ID：10534937
> 
> 赞同：11
> 
> 时间：2012-05-10T13:23:16.220
> 
> 标签：string, hash, compare

为了提高比较字符串的函数的性能，我决定通过比较它们的哈希值来比较它们。那么是否可以保证 2 个非常长的字符串的哈希值彼此相等，那么这些字符串也彼此相等？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T22:08:35.033

虽然可以保证 2 个相同的字符串会给您相同的哈希值，但反之则不然：对于给定的哈希值，总会有几个可能的字符串产生相同的哈希值。由于[PigeonHole 原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)，这是正确的。

话虽如此，两个不同的字符串产生相同哈希的机会可以变得非常小，以至于被认为等同于 null。

这种散列的一个相当经典的例子是[MD5](http://en.wikipedia.org/wiki/MD5)，它具有近乎完美的 128 位分布。这意味着您在 2^128 中有一次机会 2 个不同的字符串产生相同的哈希值。嗯，基本上，几乎和不可能一样。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-10-13T07:34:44.637

在比较两个长字符串以确定它们是否相同的简单常见情况下，出于两个原因，简单比较将比散列更可取。首先，正如@wildplasser 所指出的，哈希要求必须遍历两个字符串的所有字节才能计算两个哈希值，而简单比较速度很快，只需要遍历字节直到找到第一个差异，这可能远小于完整的字符串长度。其次，一个简单的比较可以保证检测到任何差异，而哈希只给出了它们相同的高概率，正如@AdamLiss 和@Cyan 所指出的那样。

然而，有几个有趣的情况可以使用哈希比较来获得很大的优势。正如@Cyan 所提到的，如果要进行多次比较，或者必须存储以供以后使用，那么散列可能会更快。其他人未提及的情况是字符串是否位于通过本地网络或 Internet 连接的不同机器上。在两台机器之间传递少量数据通常会快得多。最简单的第一个检查是比较两者的大小，如果不同，你就完成了。否则，计算散列，每个都在自己的机器上（假设你能够在远程机器上创建进程），如果不同，你就完成了。如果哈希值相同，并且您必须有绝对的确定性，那么就没有简单的捷径可以达到确定性。在两端使用无损压缩将允许传输较少的数据以进行比较。最后，如果这两个字符串按时间分隔，正如@Cyan 所暗示的那样，如果您想知道一个文件自昨天以来是否已更改，并且您已经存储了昨天版本的哈希，那么您可以将今天的哈希与它进行比较.

我希望这将有助于激发某人的一些“开箱即用”的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-12T21:34:05.643

我不确定，如果你的表现会有所改善。两者：构建哈希 + 比较整数和使用 equals 简单地比较字符串具有相同的复杂性，即 O(n)，其中 n 是字符数。

# php - 使用 PHP 从多选下拉列表中获取数据以插入 MySQL

> ID：10534939
> 
> 赞同：1
> 
> 时间：2012-05-10T13:23:22.210
> 
> 标签：php, mysql, html

我的数据库中有一个使用该`SET`数据类型创建的天数列表。

```
SET('Mon','Tue','Wed','Thr','Fri','Sat','Sun') 
```

我希望用户能够使用多选下拉菜单选择多天放入数据库：

```
<select name='days' id='days' size=4 multiple>
<option name=Mon value=Mon> Mon </option>
<option name=Tue value=Tue> Tue </option>
<option name=Wed value=Wed> Wed </option>
<option name=Thr value=Thr> Thr </option>
<option name=Fri value=Fri> Fri </option>
<option name=Sat value=Sat> Sat </option>
<option name=Sun value=Sun> Sun </option>
</select> 
```

如何从该下拉列表中获取数据以插入到我的 mysql 查询中？

现在我的查询是这样的：

```
$sql2 = " UPDATE tblFacilityHrsDateTimes SET `startEventDate`='{$_POST['startEventDate']}',`endEventDate`='{$_POST['endEventDate']}', `startTime`='{$_POST['startTime']}',`endTime`='{$_POST['endTime']}',`recurrence`='{$_POST['recurrence']},`finalDate`='{$_POST['finalDate']}' WHERE `id` = '$id' "; $mysqli->query($sql2) or die($mysqli->error); 
```

目前使用选择框，它只抓取用户选择的日期之一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:29:56.230

首先，您的选择应该有方括号的名称：

```
<select name='days[]' id='days' size=4 multiple="multiple"> 
```

这样，当用户选择更多值（选项）并提交表单时，您将收到他选择的值数组。

然后你必须遍历这个数组并插入每条记录：

```
foreach($_POST['days'] as $k => $v) {
    // here do the INSERT query with value $v
} 
```

但是您在选择框下的查询告诉我们这不是故事的结局......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:30:39.997

```
foreach ($_POST['days'] AS $key => $value) {
  // INSERT ... where $value is one of the values
} 
```

# c - C中的strcat函数

> ID：10534941
> 
> 赞同：-2
> 
> 时间：2012-05-10T13:23:38.783
> 
> 标签：c, string

我有以下代码。

```
#include<stdio.h>
#include<string.h>

int main()
{
    char str1[1000]="/";
    char unit[1000]="Hai";
    strcat(str1,unit);
    printf("\nvalue of unit: %s\n", unit);
    return 0;
} 
```

`strcat`应该附加`"/"`到`"Hai"`. 所以预期的输出`printf`是“单位价值：Hai/”，但我得到的输出是“单位价值：Hai”

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:26:34.203

只需阅读 的文档`strcat()`：它会告诉您它是用`strcat(dest, src)`.

所以在你的情况下，`str1`将包含`"/Hai"`. 如果你想`unit`成为`"Hai/"`，你应该打电话`strcat(unit, str1)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:26:37.783

```
strcat(str1,unit);
//     ^dst  ^src

printf("\nvalue of unit: %s\n", unit);
//                              ^src 
```

采用：

```
strcat(unit,str1); 
```

注意：大多数 C 函数首先需要目标，然后是源。

# templates - 使用 Jinja2，是否可以禁用标签和/或过滤器？

> ID：10534946
> 
> 赞同：3
> 
> 时间：2012-05-10T13:23:51.373
> 
> 标签：templates, jinja2

我有保存在数据库中的模板（我的客户将创建它们）。我不希望我的客户能够扩展他们的模板（我知道，我知道，这是非常邪恶的）。我确实希望他们能够包含片段，但不能扩展模板。如果我以后也选择这样做，我如何禁用或删除`{% extends %}`标签，以及如何删除过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:38:51.147

如果模板保存在数据库中，您必须能够在保存之前过滤扩展。

# python - 如何在 Python 中的折线图上有多个 y 轴

> ID：10534950
> 
> 赞同：0
> 
> 时间：2012-05-10T13:24:07.003
> 
> 标签：python, graph

我想在同一个图表上制作一个包含多组数据的折线图。但它们的比例都不同，因此需要单独的 y 轴比例。

什么代码会将每个变量放在单独的轴上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:30:09.280

通用答案是编写一个方法，允许您缩放每个数据集的 y 值，以按照您想要的方式放置在图表上。然后，您的所有数据点都将具有相同比例的 y 值，并且您可以根据您为每个数据集定义平移的方式来标记 Y 轴。

# soap - 手卷 SOAP 请求

> ID：10534954
> 
> 赞同：4
> 
> 时间：2012-05-10T13:24:18.003
> 
> 标签：soap, wsdl, http-headers

我正在尝试构建一个手动 HTTP 请求，以便从我认为是相当简单的 SOAP Web 服务调用中返回响应。但是，我无法正确构建请求，并且没有得到我期望的响应。

* * *

### 适用`wsdl`语句：

*wsdl 目标命名空间：*

```
targetNamespace="http://tempuri.org/" 
```

*wsdl 服务*

```
<wsdl:service name="TrackerService">
  <wsdl:port name="BasicHttpBinding_ITrackerService" binding="tns:BasicHttpBinding_ITrackerService">
    <soap:address location="http://mydomain.com/TrackerServiceSite/wctest2.TrackerService.svc"/>
  </wsdl:port>
</wsdl:service> 
```

*wsdl 消息*

```
<wsdl:message name="ITrackerService_GetStub_InputMessage">
  <wsdl:part name="parameters" element="tns:GetStub" /> 
</wsdl:message>
<wsdl:message name="ITrackerService_GetStub_OutputMessage">
  <wsdl:part name="parameters" element="tns:GetStubResponse" /> 
</wsdl:message> 
```

*wsdl 绑定和 SOAP 操作*

```
<wsdl:binding name="BasicHttpBinding_ITrackerService" type="tns:ITrackerService">
  <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
        .
        . <!—- Omitted for brevity --> 
        .
  <wsdl:operation name="GetStub">
    <soap:operation soapAction="http://tempuri.org/ITrackerService/GetStub" style="document"/>
    <wsdl:input>
        <soap:body use="literal"/>
    </wsdl:input>
    <wsdl:output>
        <soap:body use="literal"/>
    </wsdl:output>
  </wsdl:operation>
</wsdl:binding> 
```

* * *

### 预期返回响应

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header />
  <s:Body>
      <GetStubResponse xmlns="http://tempuri.org/">
        <GetStubResult xmlns:a=http://schemas.datacontract.org/2004/07/wctest2 xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
          <a:Password>SOMEPASS</a:Password>
          <a:Username>SOMEUSER</a:Username>
        </GetStubResult>
      </GetStubResponse>
  </s:Body>
</s:Envelope> 
```

* * *

### 到目前为止的 HTTP 请求：

```
POST http://mydomain.com/TrackerServiceSite/wctest2.TrackerService.svc HTTP/1.1
Content-Type: text/xml; charset="utf-8"
Content-Length: 297
Host: mydomain.com

<soap:Envelope
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
       <GetStub xmlns="http://tempuri.org/"/>
   </soap:Body>
</soap:Envelope> 
```

### HTTP 响应

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
    <s:Fault>
      <faultcode xmlns:a="http://schemas.microsoft.com/ws/2005/05/addressing/none">a:ActionNotSupported</faultcode>
      <faultstring xml:lang="en-US">
          The message with Action '' cannot be processed at the receiver, due to a 
          ContractFilter mismatch at the EndpointDispatcher. This may be because of 
          either a contract mismatch (mismatched Actions between sender and receiver) 
          or a binding/security mismatch between the sender and the receiver.  Check 
          that sender and receiver have the same contract and the same binding 
          (including security requirements, e.g. Message, Transport, None).
      </faultstring>
    </s:Fault>
  </s:Body>
</s:Envelope> 
```

* * *

我很确定我需要`soapAction`在我的请求中的某处包含来自 wsdl 文件的一个，但我不确定在哪里包含它。我还缺少什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T13:28:03.523

将您的肥皂动作放在[SOAPAction](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383528) HTTP 标头中

# java - 如何检查从哪个 optgroup 中选择选项我正在使用带有 .html 的 struts 标签。有两个 opt 组具有相同的键但不同的值。当我提交表单时，密钥会转到服务器进行保存。现在在服务器端我想检查它与哪个 optgroup 关联我该怎么做？以下是html代码 <optgroup label="Group1"><option value="1">opt1</option> <option value="3">opt2

> ID：10534960
> 
> 赞同：2
> 
> 时间：2012-05-10T13:24:38.720
> 
> 标签：java, html, struts2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:27:04.210

使用不同的值，例如：

```
<option value="grp1_1">opt1</option> 
```

...

```
<option value="grp2_1">opt1</option> 
```

然后在提交for之后解析出服务器上的值。</option></optgroup>

# jquery - 提交表单后打开灯箱

> ID：10534962
> 
> 赞同：0
> 
> 时间：2012-05-10T13:24:44.320
> 
> 标签：jquery, ajax, forms, popup, lightbox

我目前在我的网站上使用 jQuery。

我想在提交表单时弹出一个灯箱。它会说“正在加载...”

网上有这方面的例子吗？

谢谢！！

# android - 如何在 android 应用程序中创建通知数量？

> ID：10534963
> 
> 赞同：1
> 
> 时间：2012-05-10T13:24:45.250
> 
> 标签：android

海我想动态创建数字通知，我只能创建单个通知。我在这个论坛中搜索并获得答案[如何在 android 中创建多个状态栏通知，](https://stackoverflow.com/questions/6224178/how-to-create-multiple-statusbar-notifications-in-android)但这里的通知是提及的。但我需要动态的多个通知取决于数字.

假设我有 number=1 我需要 1 个通知，如果 number=2 我需要 2 个通知怎么做。请指导我？如果有人不理解我的问题，请查看我的图片请问我？

![在此处输入图像描述](../Images/c9e3dbdd00fb1f08f40ef4dcb8a29c96.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:48:33.390

上面的链接显示了如何发送通知：

`mNotificationManager.notify(id, notifyDetails);`

并将 id 设置为每次都不同，例如，如果您想要 5 个通知，您可以尝试以下操作：

`for(int id = 0; id < 5; id++){mNotificationManager.notify(id, notifyDetails);}`

# jsf-2 - JSF：FacesMessage 显示两次

> ID：10534964
> 
> 赞同：1
> 
> 时间：2012-05-10T13:24:47.100
> 
> 标签：jsf-2, facescontext

这是场景。在我的托管 bean 中，我创建了一个新的 FacesMessage 对象并将其添加到 FacesContext 中，而不将它与任何 UI 组件相关联，如下所示：

```
FacesContext context = FacesContext.getCurrentInstance();
FacesMessage message = new FacesMessage();
message.setSummary("Hi there!");
context.addMessage(null, message); 
```

在我的 xhtml 页面中，我像这样输出我的消息：

```
<h:messages id="someId" globalOnly="true" showSummary="true" showDetail="false" styleClass="startUpMessages"/> 
```

但是，生成的 html 会显示消息摘要两次，如下所示：

```
<ul id="mainForm:someId" class="startUpMessages"><li>   Hi there! </li><li> Hi there! </li></ul>
<ul id="javax_faces_developmentstage_messages" title="Project Stage[Development]: Unhandled Messages"></ul> 
```

谁能解释这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:06:39.110

原来这个问题是由应用程序中的阶段侦听器的疏忽引起的，问题中没有提到。

此阶段侦听器旨在解决在应用程序的一个特定实例中跨两个相邻请求持久化 FacesMessage 的问题。它将在请求范围 bean 中创建的所有 FacesMessage 临时存储到会话中。

然而，阶段监听器被错误地实现为在每个请求期间执行。因此，在会话范围的 bean 中创建的 FacesMessages（就像有问题的那个）最终被复制了，这解释了为什么我看到消息的摘要显示了两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:13:05.200

尝试更改您的 Web.xml。从
更改为`PROJECT_STAGE``Development``Production`

```
<!-- Web application context parameters -->
<context-param>
    <description>One of Production, Development, UnitTest, SystemTest, Extension
        Default is Production.
    </description>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
</context-param> 
```

# android - Android Service 被强行杀死后重启所用的时间

> ID：10534965
> 
> 赞同：2
> 
> 时间：2012-05-10T13:24:51.100
> 
> 标签：android

当我使用诸如“Go Power Master”之类的应用程序强行终止在我的 Android 手机上运行的服务时，并非所有服务都以相同的延迟重新启动。为什么会这样？如何减少服务重启所需的时间？

Facebook 服务就是一个很好的例子。下面是它的 LogCat 输出，它被连续杀死了 3 次。注意粗体的重启时间：14992ms、5000ms、14963ms。

我的服务没有得到很好的对待。下面是它的 LogCat 输出，它被连续杀死了 3 次。请注意以粗体显示的更大的重启时间：23358ms、93432ms、373728ms。

该项目的完整源代码在 GitHub 上。 [https://github.com/ccoffey/NUIMWiFi](https://github.com/ccoffey/NUIMWiFi)

***脸书日志猫***

05-10 14:09:33.381: I/ActivityManager(192): Killing proc 7280:com.facebook.katana/10077: kill background 05-10 14:09:33.381: W/ActivityManager(192): 计划重启崩溃服务 com.facebook.katana/.service.MediaUploadService 在**14992 毫秒** 05-10 14:09:48.412: I/ActivityManager(192): 为服务 com.facebook.katana/.service.MediaUploadService 启动 proc com.facebook.katana: pid=7847 uid=10077 gids={3003, 1006, 1015 } 05-10 14:09:48.568: I/ActivityThread(7847): Pub com.facebook.katana.provider.LoggingProvider: com.facebook.katana.provider.LoggingProvider 05-10 14:09:48.592: I/ActivityThread( 7847）：Pub com.facebook.katana.provider.KeyValueProvider：com.facebook.katana.provider.KeyValueProvider 05-10 14:09:48.592：I/ActivityThread（7847）：Pub com.facebook.katana.provider.CacheProvider： com.facebook.katana.provider.CacheProvider 05-10 14:09:48.592: I/ActivityThread(7847): Pub com.facebook.katana.provider.MailboxProvider: com.facebook.katana.provider.MailboxProvider 05-10 14: 09:48.599: I/ActivityThread(7847): Pub com.facebook.katana.provider.UserStatusesProvider: com.facebook.katana。provider.UserStatusesProvider 05-10 14:09:48.599: I/ActivityThread(7847): Pub com.facebook.katana.provider.EventsProvider: com.facebook.katana.provider.EventsProvider 05-10 14:09:48.607: I/ ActivityThread（7847）：Pub com.facebook.katana.provider.NotificationsProvider：com.facebook.katana.provider.NotificationsProvider 05-10 14:09:48.607：I/ActivityThread（7847）：Pub com.facebook.katana.provider。 UserValuesProvider: com.facebook.katana.provider.UserValuesProvider 05-10 14:09:48.607: I/ActivityThread(7847): Pub com.facebook.katana.provider.PagesProvider: com.facebook.katana.provider.PagesProvider 05-10 14:09:48.607: I/ActivityThread(7847): Pub com.facebook.katana.provider.MobileEventLogProvider: com.facebook.katana.provider.MobileEventLogProvider 05-10 14:09:48.607: I/ActivityThread(7847): Pub com.facebook.katana.provider.PushNotificationsProvider：com.facebook.katana.provider.PushNotificationsProvider 05-10 14:09:48.615: I/ActivityThread(7847): Pub com.facebook.katana.provider.PhotosProvider: com.facebook.katana.provider.PhotosProvider 05-10 14:09: 48.615: I/ActivityThread(7847): Pub com.facebook.katana.provider.ConnectionsProvider: com.facebook.katana.provider.ConnectionsProvider 05-10 14:09:48.623: I/ActivityThread(7847): Pub com.facebook。 orca.notify.FbandroidMessagesForegroundProvider：com.facebook.orca.notify.FbandroidMessagesForegroundProvider 05-10 14:09:48.639：D/ACRA(7847)：为 com.facebook.katana 启用 ACRA，正在初始化... 05-10 14： 09:48.654: D/ACRA(7847): 在 /data/data/com.facebook.katana/app_acra-reports 中寻找错误文件 05-10 14:09:48.701: W/nalizableReferenceQueue(7847): at com.facebook .orca.inject.binder.AnnotatedBindingBuilderImpl.a（AnnotatedBindingBuilderImpl.java：22) 05-10 14:09:48.701: W/nalizableReferenceQueue(7847): 在 com.facebook.orca.app.FbBaseModule.a(FbBaseModule.java:73) 05-10 14:09:48.701: W/nalizableReferenceQueue( 7847): 在 com.facebook.orca.inject.AbstractModule.a(AbstractModule.java:19) 05-10 14:09:48.701: W/nalizableReferenceQueue(7847): 在 com.facebook.orca.inject.FbInjectorImpl.a (FbInjectorImpl.java:61) 05-10 14:09:48.701: W/nalizableReferenceQueue(7847): 在 com.facebook.orca.inject.FbInjectorImpl.(FbInjectorImpl.java:41) 05-10 14:09:48.701: W/nalizableReferenceQueue(7847): 在 com.facebook.orca.inject.FbInjector.a(FbInjector.java:40) 05-10 14:09:48.701: W/nalizableReferenceQueue(7847): 在 com.facebook.katana.FacebookApplication .onCreate(FacebookApplication.java:75) 05-10 14:09:48.928: I/SqliteDatabaseCpp(7847): sqlite 返回：错误代码 = 21，msg = [8609a15dfa] 第 105099 行的误用，db=/data/data/com.facebook.katana/databases/prefs_db 05-10 14:09:53.810: I/ActivityManager(192): Killing proc 7847:com.facebook .katana/10077：杀死背景 05-10 14:09:53.810：W/ActivityManager(192)：计划重启崩溃的服务 com.facebook.katana/.service.MediaUploadService**5000毫秒** 05-10 14:09:58.842: I/ActivityManager(192): 为服务 com.facebook.katana/.service.MediaUploadService 启动 proc com.facebook.katana: pid=7890 uid=10077 gids={3003, 1006, 1015 } 05-10 14:09:59.053: I/ActivityThread(7890): Pub com.facebook.katana.provider.LoggingProvider: com.facebook.katana.provider.LoggingProvider 05-10 14:09:59.060: I/ActivityThread( 7890）：Pub com.facebook.katana.provider.KeyValueProvider：com.facebook.katana.provider.KeyValueProvider 05-10 14:09:59.060：I/ActivityThread（7890）：Pub com.facebook.katana.provider.CacheProvider： com.facebook.katana.provider.CacheProvider 05-10 14:09:59.076: I/ActivityThread(7890): Pub com.facebook.katana.provider.MailboxProvider: com.facebook.katana.provider.MailboxProvider 05-10 14: 09:59.076：I/ActivityThread(7890)：Pub com.facebook.katana.provider.UserStatusesProvider：com.facebook.katana。provider.UserStatusesProvider 05-10 14:09:59.076: I/ActivityThread(7890): Pub com.facebook.katana.provider.EventsProvider: com.facebook.katana.provider.EventsProvider 05-10 14:09:59.076: I/ ActivityThread(7890): Pub com.facebook.katana.provider.NotificationsProvider: com.facebook.katana.provider.NotificationsProvider 05-10 14:09:59.076: I/ActivityThread(7890): Pub com.facebook.katana.provider。 UserValuesProvider: com.facebook.katana.provider.UserValuesProvider 05-10 14:09:59.076: I/ActivityThread(7890): Pub com.facebook.katana.provider.PagesProvider: com.facebook.katana.provider.PagesProvider 05-10 14:09:59.084: I/ActivityThread(7890): Pub com.facebook.katana.provider.MobileEventLogProvider: com.facebook.katana.provider.MobileEventLogProvider 05-10 14:09:59.084: I/ActivityThread(7890): Pub com.facebook.katana.provider.PushNotificationsProvider：com.facebook.katana.provider.PushNotificationsProvider 05-10 14:09:59.084: I/ActivityThread(7890): Pub com.facebook.katana.provider.PhotosProvider: com.facebook.katana.provider.PhotosProvider 05-10 14:09: 59.084: I/ActivityThread(7890): Pub com.facebook.katana.provider.ConnectionsProvider: com.facebook.katana.provider.ConnectionsProvider 05-10 14:09:59.092: I/ActivityThread(7890): Pub com.facebook。 orca.notify.FbandroidMessagesForegroundProvider：com.facebook.orca.notify.FbandroidMessagesForegroundProvider 05-10 14:09:59.154：D/ACRA(7890)：为 com.facebook.katana 启用 ACRA，正在初始化... 05-10 14： 09:59.185: D/ACRA(7890): 在 /data/data/com.facebook.katana/app_acra-reports 中寻找错误文件 05-10 14:09:59.232: W/nalizableReferenceQueue(7890): at com.facebook .orca.inject.binder.AnnotatedBindingBuilderImpl.a（AnnotatedBindingBuilderImpl.java：22) 05-10 14:09:59.232: W/nalizableReferenceQueue(7890): 在 com.facebook.orca.app.FbBaseModule.a(FbBaseModule.java:73) 05-10 14:09:59.232: W/nalizableReferenceQueue( 7890): 在 com.facebook.orca.inject.AbstractModule.a(AbstractModule.java:19) 05-10 14:09:59.232: W/nalizableReferenceQueue(7890): 在 com.facebook.orca.inject.FbInjectorImpl.a (FbInjectorImpl.java:61) 05-10 14:09:59.232: W/nalizableReferenceQueue(7890): 在 com.facebook.orca.inject.FbInjectorImpl.(FbInjectorImpl.java:41) 05-10 14:09:59.232: W/nalizableReferenceQueue(7890): 在 com.facebook.orca.inject.FbInjector.a(FbInjector.java:40) 05-10 14:09:59.232: W/nalizableReferenceQueue(7890): 在 com.facebook.katana.FacebookApplication .onCreate(FacebookApplication.java:75) 05-10 14:10:44.826: I/ActivityManager(192): Killing proc 7890:com.facebook.katana/10077:杀死背景 05-10 14:10:44.826：W/ActivityManager(192)：计划重启崩溃的服务 com.facebook.katana/.service.MediaUploadService**14963毫秒**

***我的服务日志猫***

I/ActivityManager（192）：杀死 proc 8556：ie.cathalcoffey.android/10033：杀死背景 I/ActivityManager（192）：杀死 proc 8606：ie.cathalcoffey.android：remote/10033：杀死背景 W/ActivityManager（192） : 计​​划在 23358 毫秒内重新启动崩溃的服务 ie.cathalcoffey.android/.MyService **I** /ActivityManager(192): 启动 proc ie.cathalcoffey.android:remote for service ie.cathalcoffey.android/.MyService: pid=8726 uid=10033 gids ={3003} I/ActivityManager(192): Killing proc 8726:ie.cathalcoffey.android:remote/10033: kill background W/ActivityManager(192): 计划在 93432ms 内重启崩溃的服务**ie.cathalcoffey.android/.MyService** I/ActivityManager(192): 启动 proc ie.cathalcoffey.android:remote for service ie.cathalcoffey.android/.MyService: pid=9063 uid=10033 gids={3003} I/ActivityManager(192): Killing proc 9063:ie .cathalcoffey.android:remote/10033：杀死后台W/ActivityManager（192）：计划在373728ms内重新启动崩溃的服务**ie.cathalcoffey.android/.MyService**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:34:10.740

这个问题的解决方案似乎如下。使操作系统相信它已经杀死了正在工作的服务。然后似乎以较小的延迟重新启动该服务。

我现在已经编辑了我的服务以启动一个 AsyncTask，它只是永远循环并调用 Thread.sleep(100)

现在，当我强行终止我的服务时，我看到与 Facebook 服务非常相似的重启时间：5000 毫秒、24713 毫秒、14997 毫秒、54912 毫秒、14988 毫秒。

请证明我是对还是错，但就目前而言，这似乎解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:35:01.153

我相信这在很大程度上取决于被杀死的进程的重要性。当您使用任务杀手杀死应用程序时，Android 操作系统会以与系统内存不足时相同的方式杀死它。由于以同样的方式被杀死，Android OS 会根据应用程序的“重要性”重新启动应用程序或服务。

要使服务更重要（从而更快地重新启动），您可以向服务添加通知。此通知将在通知栏中可见。由于该服务对用户可见，因此它将比不可见的应用程序或其他服务更快地重新启动。

此外，绑定到 Activity 的服务将比无边界服务更重要。

有关更多信息，请查看此[http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)（流程生命周期部分）

编辑获取所有正在运行的进程的重要性。

```
List<RunningAppProcessInfo> procInfo = activityManager.getRunningAppProcesses();
for(int i = 0; i < procInfo.size(); i++){
    int importance = procInfo.get(i).importance;
    //Print importance and Package name to log
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-05T14:37:09.003

```
 W/ActivityManager: Scheduling restart of crashed service com.faceopen.edgedevice/.service.FaceOpenRemoteService in 1000ms
        W/ActivityManager: Scheduling restart of crashed service com.faceopen.edgedevice/.service.FaceOpenRemoteService in 4000ms
        W/ActivityManager: Scheduling restart of crashed service com.faceopen.edgedevice/.service.FaceOpenRemoteService in 16000ms
        W/ActivityManager: Scheduling restart of crashed service com.faceopen.edgedevice/.service.FaceOpenRemoteService in 64000ms
        W/ActivityManager: Scheduling restart of crashed service com.faceopen.edgedevice/.service.FaceOpenRemoteService in 256000ms 
```

在重新启动终止进程时，我在 Galaxy Tab 中遇到了类似的问题。上面的日志描述了 Android OS 内核分配的重启进程的时间段。当进程在重新启动时被反复杀死时，上述情况下的调度周期呈指数增长。

然而，通过分析操作系统的进程调度模式，我们得出的结论是，在一段固定的时间后，操作系统停止对被杀死进程的调度进行优先级排序。

在我们的例子中，固定时间是 60000 毫秒（60 秒）。因此，换句话说，如果我们在 60 秒后重新启动 kill 进程，它会在 1000 毫秒后启动。因此操作系统不会在那之后以指数方式调度该过程。

# android - 如何截屏？

> ID：10534969
> 
> 赞同：0
> 
> 时间：2012-05-10T13:25:18.283
> 
> 标签：android, screenshot

我正在截取相对布局的屏幕截图，但它会导致错误。

**错误：**

```
 05-10 17:43:44.249: ERROR/AndroidRuntime(7721): Caused by: java.lang.NullPointerException
05-10 17:43:44.249: ERROR/AndroidRuntime(7721):     at android.graphics.Bitmap.createBitmap(Bitmap.java:358)
05-10 17:43:44.249: ERROR/AndroidRuntime(7721):     at com.API.Connect.share(FacebookConnect.java:110) 
```

**代码：**

```
public class Connect extends Activity implements LoginListener {

    public static String news = " ";

    RelativeLayout bitmapimage;

    Bitmap bitmap;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.image);
        bitmapimage = (RelativeLayout) findViewById(R.id.bitmapimg);
        TextView txtlove = (TextView) findViewById(R.id.txtlove);
        txtlove.setText(news.toString());
        share();

    }

    public void share() {

        View v1 = bitmapimage;
        v1.setDrawingCacheEnabled(true);

        bitmap = Bitmap.createBitmap(v1.getDrawingCache());

        v1.setDrawingCacheEnabled(false);

        saveImage();

        // TODO Auto-generated method stub

    }

    void saveImage() {
        String state = Environment.getExternalStorageState();
        Environment.MEDIA_MOUNTED.equals(state);

        File myDir = new File("/mnt/sdcard/DCIM/Camera");
        myDir.mkdirs();

        String fname = "mytry.jpg";
        File file = new File(myDir, fname);
        if (file.exists())
            file.delete();
        try {
            FileOutputStream out = new FileOutputStream(file);
            // create a Bitmap object from our image path.
            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);
            out.flush();
            out.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T13:37:09.917

您正在尝试做的事情是正确的。但是在 onCreate() 你的视图不会被绘制。它只是膨胀了。所以你可能不得不考虑使用下面的方法。试试这个。

```
@Override 
public void onWindowFocusChanged(boolean hasFocus) 
{ 
     super.onWindowFocusChanged(hasFocus);
    share();  //Call your share() here. 
} 
```

一旦你的视图被绘制，这个方法就会被调用，因此你将能够通过覆盖这个方法来获取位图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:34:28.487

我想我发现了你的错误。getdrawingcache 已经返回一个位图，因此您不必创建一个可能导致空指针异常的新位图。

所以你应该试试

`bitmap = v1.getDrawingCache();`

代替

`bitmap = Bitmap.createBitmap(v1.getDrawingCache());`

让我知道这个是否奏效。

问候，沃塔

# php - 如何在这个“点击显示”脚本上使 ID 独一无二

> ID：10534972
> 
> 赞同：0
> 
> 时间：2012-05-10T13:25:24.767
> 
> 标签：php, jquery, click

我正在尝试将此脚本添加到我的网站，但有一个由脚本“voucherCode”生成的相同元素的列表，所以我在这里苦苦挣扎，因为当我测试它时，只有第一个元素会“显示”，无论哪个是点击...

```
 <!--EDIT--> 
```

尝试使用有效的类调用脚本，但现在所有这些都显示：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:44:22.457

正如 Blazemonger 所说，浏览器不会选择具有相同 ID 的多个元素。Id 应该是唯一的，如果您需要重复的内容，请使用类。

首先更新好你需要添加类而不是ID

```
<div class="voucherCode"> 
```

如果您使用 jquery（首先在标题中调用它，google jquery）

```
$('.trigger_class').click(function(){
    //do what you need to do here when clicked
    //to access all of the voucherCode class you use $('.voucherCode').css('display', 'block');
}); 
```

更新 2：如果您只想显示特定的，那么您需要那些（类（2 或更多）或 id（只有 1））上的标识符，然后定位您要显示的那些。为了使其更具动态性，您可以将 rev 或 title 属性添加到触发器锚标记，并使用 jquery 获取该属性并将其用作要显示的元素

```
<a class="trigger_class" rev="reveal_class_or_ID">....</a> 
```

然后在javascript中

```
$('.trigger_class').click(function(){
    //grab the rev from the a, this is use a class (hence the .  if it is using id it would be #)
    $("." + $(this).attr("rev")).css('display','block');
}); 
```

最后不要忘记将reveal_class_or_ID添加到您的物品中

更新：

我不擅长 php，但似乎您可以选择将迭代器或索引添加到

```
<div class="revealVoucher" id="reveal_dynamicID">
    <a href="<?=$affiliate_url?>" target="_blank">Reveal Code</a>
</div>

<div class="voucherCode" id="show_dynamicID">
    <a href="<?=$affiliate_url?>"><?=$voucher_code?></a>
</div> 
```

我不知道迭代器在 php 中是如何工作的，但如果你知道 php，这应该是有意义的

# .net - 无法使用 Linq 将存储过程的输出绑定到 gridview

> ID：10534973
> 
> 赞同：1
> 
> 时间：2012-05-10T13:25:26.520
> 
> 标签：.net, linq, c#-4.0

DBML 设计器中的代码

```
 [global::System.Data.Linq.Mapping.FunctionAttribute(Name="dbo.uspCalculateRiskMatrix")]   
      public int uspCalculateRiskMatrix([global::System.Data.Linq.Mapping.ParameterAttribute(Name="CashPrice", DbType="Float")] System.Nullable cashPrice,     [global::System.Data.Linq.Mapping.ParameterAttribute(Name="InputAPH", DbType="Int")] System.Nullable inputAPH,    [global::System.Data.Linq.Mapping.ParameterAttribute(Name="Bushels", DbType="Int")] System.Nullable bushels,     [global::System.Data.Linq.Mapping.ParameterAttribute(Name="PercentageCover", DbType="Float")] System.Nullable percentageCover,    [global::System.Data.Linq.Mapping.ParameterAttribute(Name="BasicEstimate", DbType="Float")] System.Nullable basicEstimate,     [global::System.Data.Linq.Mapping.ParameterAttribute(Name="CallStrike", DbType="Float")] System.Nullable callStrike,     [global::System.Data.Linq.Mapping.ParameterAttribute(Name="CallBu", DbType="Int")] System.Nullable callBu,     [global::System.Data.Linq.Mapping.ParameterAttribute(Name="CallPremium", DbType="Float")] System.Nullable callPremium,     [global::System.Data.Linq.Mapping.ParameterAttribute(Name="PutStrike", DbType="Float")] System.Nullable putStrike,     [global::System.Data.Linq.Mapping.ParameterAttribute(Name="PutBu", DbType="Int")] System.Nullable putBu,    [global::System.Data.Linq.Mapping.ParameterAttribute(Name="PutPremium", DbType="Float")] System.Nullable putPremium,    [global::System.Data.Linq.Mapping.ParameterAttribute(Name="TotalAcres", DbType="Float")] System.Nullable totalAcres,     [global::System.Data.Linq.Mapping.ParameterAttribute(Name="AvgPrice", DbType="Float")] System.Nullable avgPrice,     [global::System.Data.Linq.Mapping.ParameterAttribute(Name="PerAcreProductionCost",     DbType="Float")] System.Nullable perAcreProductionCost,    [global::System.Data.Linq.Mapping.ParameterAttribute(Name="SpringPrice", DbType="Float")] System.Nullable springPrice)   
      {
            IExecuteResult result = this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())), cashPrice, inputAPH, bushels, percentageCover, basicEstimate, callStrike, callBu, callPremium, putStrike, putBu, putPremium, totalAcres, avgPrice, perAcreProductionCost, springPrice);
            return ((int)(result.ReturnValue));
      } 
```

==================================================== ========================

我将 SP 与 gridview 绑定的代码

```
 var a = from risk in HRM_dc.uspCalculateRiskMatrix(CashPrice, InputAPH, Bushels, PercentageCover, BasicEstimate, CallStrike, CallBu, CallPremium,
                                                                 PutStrike, PutBu, PutPremium, TotalAcres, AvgPrice, PerAcreProductionCost, SpringPrice)
                        select risk;

                GridView gvRisk = new GridView();
                gvRisk.DataSource = a;
                gvRisk.DataBind(); 
```

错误：错误 2 找不到源类型“int”的查询模式的实现。未找到“选择”。

请帮助快速TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:46:07.213

> > 这种错误（未找到查询模式）通常发生在您缺少命名空间...或源对象未实现 IEnumerable 时。

检查存储过程的返回类型，它是`Integer`类型并且它没有实现`IEnumerable<T>`也不是集合类型。如果您使用整数数组，`int[] intArray = {10, 20};`那么您可以使用 linq。

你不能像这样实现它。更多 Gridview 的[`DataSource`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource.aspx)属性不支持显示这种类型的数据..

参考：
[找不到查询模式](https://stackoverflow.com/questions/8215773/could-not-find-an-implementation-of-the-query-pattern)
[Linq 错误的实现“找不到源类型‘System.Linq.IQueryable’连接未找到的查询模式的实现’](https://stackoverflow.com/questions/1127767/linq-error-could-not-find-an-implementation-of-the-query-pattern-for-source-typ)

**编辑：**根据评论：检查这个[Accessing dynamic created stored procedure from LINQ](https://stackoverflow.com/questions/266761/accessing-dynamically-created-stored-procedure-from-linq)，它可能是你的解决方案..

# grails - 在设置方法执行之前“哪里”加载数据？

> ID：10534977
> 
> 赞同：0
> 
> 时间：2012-05-10T13:25:39.717
> 
> 标签：grails, groovy, spock

我想根据设置数据构建 where 条件。但似乎在设置方法之前执行，所以我得到了`null`对象。我是对的，如何`where`根据我的数据构建`setup`数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:57:11.527

简而言之，你不能。由于邮件列表 (http://forum.spockframework.org) 中讨论的原因，该`where`块*必须*在块/方法之前运行。`setup`但是，`where`块可以引用`@Shared`变量，这些变量可以直接初始化，也可以在`setupSpec()`. 如有必要，您可以使用不同的方法编写多个规范类`setupSpec()`并将它们全部保存在同一个文件中。

通常，另一种选择是扭转局面并在块中使用简单的值（例如字符串和数字），从而在`where`块中构造更复杂的对象`setup`。

# matlab - Matlab中不同类型数组的比较

> ID：10534978
> 
> 赞同：0
> 
> 时间：2012-05-10T13:25:42.070
> 
> 标签：matlab

> **可能重复：**
> [如何将数组与 matlab 进行比较](https://stackoverflow.com/questions/10533761/how-to-compare-array-with-matlab)

这是我正在寻找的示例：

```
[a,b,c,d] = getVal(x); 
```

这将给出：

```
a =
    a

b=
    0

c =
    10

d =
    [] 
```

我有：

```
expected = {'a','0','10',[]}; 
```

我怎么能在`[a,b,c,d]`和预期之间进行比较？当我调用 only`getVal(x)`时，它只给我第一个值，当我写时：

```
[a,b,c,d] = getVal(x) 
```

然后我得到了日志中的所有值。为什么我打电话时不是这种情况
`getVal(x)`？为了比较，我尝试了：

```
isequal([a,b,c,d], expected {1:end}) 
```

但它不起作用，知道如何解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:36:09.557

不要试图将`a`, `b`, `c`,`d`放入矩阵中。那会附加空格。相反，使用单元格数组，就像你有 for `expected`：

```
>> a='a'; b='0'; c='10'; d=[];
>> expected = {'a','0','10',[]};
>> isequaln({a,b,c,d}, expected)

ans =

     1 
```

您还问为什么简单地调用`getVal(x)`并不能给出所有值。这是因为在 MATLAB 中，函数可以（并且经常）对输出参数的数量做出反应，即赋值左侧的变量数量。如果使用四个输出参数调用您的`getVal`函数，则返回四个值；如果它没有做任何特别的事情，那么用零个或一个输出参数调用它将只返回这些值中的第一个，在你的例子中，`'a'`. 如果您想要一个包含所有这四个值的单元格数组，请执行以下操作

```
[a, b, c, d] = getVal(x)
{a, b, c, d} 
```

# python - Neo4J 的简单教程并将其与 django + python 一起使用

> ID：10534979
> 
> 赞同：15
> 
> 时间：2012-05-10T13:25:44.587
> 
> 标签：python, django, neo4j

有没有学习 Neo4J 的简单教程。我浏览了它的官方手册，发现我很困惑，因为我来自 mysql 背景。我只是想学习 Neo4J，但我真的很难。Neo4J 的书籍也不多

请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T16:08:30.800

我刚刚更新[了 neo4django 的文档](http://neo4django.readthedocs.org/en/latest/)，并且觉得它读起来像一个教程。我很感激反馈！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T09:17:38.460

查看灯泡快速入门教程 ( [http://bulbflow.com/quickstart/](http://bulbflow.com/quickstart/) )。Bulbs 适用于任何 Python Web 框架，包括 Django、Flask 和 Pyramid。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T16:40:10.250

Neo4j+Django 有一个很好的集成：[https](https://github.com/scholrly/neo4django) ://github.com/scholrly/neo4django ，我注意到 github 上有一个教程：[https ://github.com/johanlundberg/neo4j-django-tutorial](https://github.com/johanlundberg/neo4j-django-tutorial)

有几本书正在编写中，涵盖有关使用图形数据库和 Neo4j 细节的一般概念。但它们还没有上架。

目前，Neo4j 手册是可供学习的最佳材料。

-安德烈亚斯

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-12T00:02:18.867

neo4django 已经过时了。检查更新的选项：

[https://neo4j.com/developer/python/](https://neo4j.com/developer/python/)

关于教程，您可以在网站上找到许多免费资源。您也可以从查询语言 Cypher 开始：

[https://neo4j.com/developer/cypher/](https://neo4j.com/developer/cypher/)

# powershell - powershell：get-winevent 没有消息数据？

> ID：10534982
> 
> 赞同：5
> 
> 时间：2012-05-10T13:25:59.233
> 
> 标签：powershell, event-log, event-viewer

当我运行下面的脚本来检索日志文件时，get-winevent“消息”字段是空白的，但如果我运行 get-eventlog，就会有数据。任何想法为什么？

```
#has message data 
Get-Eventlog -LogName application -Newest 10

 #date 10 days ago 
$EventStartDate = get-date("10 May 2012") 
$EventEndDate = get-date("11 May 2012") 
$EventLogNames = @("Application", "system")

#critea for winevent 
$EventCritea = @{logname = $EventLogNames; StartTime=$EventStartDate; EndTime=$EventEndDate}

#Retrieves the event log 
$RetreivedEvents = Get-WinEvent -computername localhost -FilterHashtable $EventCritea
$RetreivedEvents | fl id, logname, MachineName, Message, TimeCreated 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T14:44:57.283

What locale are you running under?

There is a .NET bug where the underlying .NET method (that `Get-WinEvent` uses) fails to populate localised fields (like `Message`) in some locales (like `en-GB`).

Fix is to switch to `en-US` for the command:

```
$orgCulture = Get-Culture
[System.Threading.Thread]::CurrentThread.CurrentCulture = New-Object "System.Globalization.CultureInfo" "en-US"
# Perform Get-WinEvent
[System.Threading.Thread]::CurrentThread.CurrentCulture = $orgCulture 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-27T09:29:38.220

我相信这是因为消息隐藏在属性值中。要显示所有消息，请使用以下表达式将 get-winevent 传递给 select 语句：

```
@{Label='Messages';Expression={$_.properties.Value}} 
```

如果您希望显示特定消息，例如登录过程（在安全日志中），请使用以下表达式：

```
@{Label='Logon Process';Expression={$_.properties.Value[3]}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:19:18.217

你在什么 PSHost 下运行？

我在访问 W2k8 的 Windows 7 上运行的 PS V2.0 上遇到问题。如果在 Powershell 控制台或 Powershell ISE 中运行，它会检索所有数据。但是，如果在运行空间内或从 PowerGUI (pro) 中运行，它只返回不包括 Message 属性的部分子集。

[编辑] Richard 的帖子让我可以解决这个问题，但这很奇怪，因为工作 PS 控制台中的文化是“en-GB”，而非工作 PowerGui 脚本编辑器中的文化是“en-GB”，它只有效如果我将文化更改为“en-US”。

怪异的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T01:18:13.960

我知道过去我在尝试过 get-winevent 时看到它在 Windows Server 2003 上不起作用。基本上 PS 环境说 get-winevent 不适用于 2003 年。那可能是 PS v1，所以我不确定是否可以通过更新版本的 PS 解决这个问题：我现在在 2K8 R2 上。

在我的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-02T16:45:55.793

在我的脚本顶部添加以下行对我有用（取自 Richards 代码片段）；

```
[System.Threading.Thread]::CurrentThread.CurrentCulture = New-Object "System.Globalization.CultureInfo" "en-US" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-13T16:34:04.973

[PS 2.0] 请注意，文化更改仅对当前管道有效。见[文化陷阱](http://www.xipher.dk/WordPress/?p=706)

因此，临时更改区域性 + get-winevent 的命令需要组合在一个脚本块中（包含在“{...}”中）或用“;”分隔的一行。

我在尝试在 Server 2008 上的系统日志上使用 get-winevent 时发现了这一点。消息是空的，我需要将文化从 nl-BE 更改为 en-US。

# c# - 使用 devcon.exe 删除 USB

> ID：10534983
> 
> 赞同：2
> 
> 时间：2012-05-10T13:26:01.450
> 
> 标签：c#, winapi, operating-system, usb

是否可以使用 devon.exe 按名称删除 USB 大容量存储设备？以下代码用于删除所有设备：

```
Devcon remove usbstor\* 
```

但现在我想删除一个特定的设备。例如，如果插入了 5 个 USB，`A`，`B`，`C`，`D`，`E`和`F`，我现在只想移除`B`。我知道实例 id 用于此目的，但是否可以使用设备名称删除？例如，像

```
Devcon remove usbstor\B 
```

我试过这个，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:45:41.300

您可以通过硬件 ID 删除单个设备。如果你知道 id，你可以使用 remove 命令，否则你必须找出硬件 id。有关更多信息，请参阅帮助：

```
Devcon Remove Command
Removes devices with the specified hardware or instance ID. Valid only on
the local computer. (To reboot when necesary, Include -r .)
Devcon.exe [-r] remove <id> [<id>...]
Devcon.exe [-r] remove =<class> [<id>...]
<class>      Specifies a device setup class.
Examples of <id>:
 *              - All devices
 ISAPNP\PNP0501 - Hardware ID
 *PNP*          - Hardware ID with wildcards  (* matches anything)
 @ISAPNP\*\*    - Instance ID with wildcards  (@ prefixes instance ID)
 '*PNP0501      - Hardware ID with apostrophe (' prefixes literal match - matches exactly as typed,
                                               including the asterisk.) 
```

# c++ - 跨文件共享静态变量：命名空间与类

> ID：10534991
> 
> 赞同：10
> 
> 时间：2012-05-10T13:26:11.810
> 
> 标签：c++, class, static, namespaces

这里有很多关于静态与全局的问题，但我认为我的问题有点不同。

我想知道是否有一种方法可以像类中的静态变量那样跨文件共享放置在命名空间中的变量。

例如，我这样编码：

```
//Foo.h
class Foo
{
  public:
  static int code;
  static int times_two(int in_);
};

namespace bar
{
  static int kode;
} 
```

-

```
//Foo.cpp
int Foo::code = 0;

int Foo::times_two(int in_)
{
  bar::kode++;
  code++;
  return 2*in_;
} 
```

-

```
//main.cpp
int main()
{
  cout << "Foo::code = " << Foo::code << endl;

  for(int i=2; i < 6; i++)
  {
    cout << "2 x " << i << " = " << Foo::times_two(i) << endl;
    cout << "Foo::code = " << Foo::code << endl;
    cout << "bar::kode = " << bar::kode << endl;

    if(i == 3)
    {
      bar::kode++;
    }
  }
} 
```

所有这一切都产生了代码和kode：

```
Foo::code = 1,2,3,4
bar::kode = 0,0,1,1 
```

再一次，有没有办法像类中的静态变量一样跨文件共享放置在命名空间中的变量？我问的原因是因为我认为我可以通过使用 :: 表示法来保护自己免受全局变量的冲突，但我发现我做不到。和任何不尊重自己的程序员一样，我相信我做错了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T13:29:02.853

是的：

```
//bar.h
namespace bar
{
  extern int kode;
} 
```

在`class`or之外`struct`，`static`具有完全不同的含义。它提供了符号内部链接。因此，如果您声明与 相同的变量`static`，您实际上将获得所有翻译单元的不同副本，而不是唯一的全局。

请注意，您需要将变量初始化**一次**：

```
//bar.cpp
namespace bar
{
   int kode = 1337;
} 
```

# php - MySQL 查询在 phpMyAdmin 中有效，但在站点中无效。'where 子句'中的未知列'zone'

> ID：10534992
> 
> 赞同：0
> 
> 时间：2012-05-10T13:26:16.893
> 
> 标签：php, mysql, phpmyadmin

以下查询在 phpMyAdmin 中有效，但在我通过 PHP 中的网站运行时无效。

```
SELECT * FROM 
      (SELECT name, zone FROM staff 
        LEFT OUTER JOIN zones 
          ON staff.suburb=zones.suburb
      ) A WHERE zone='2' 
```

以下查询在网站上也不起作用，但在 phpMyAdmin 中起作用：

```
SELECT name, zone FROM staff 
  LEFT OUTER JOIN zones 
    ON staff.suburb=zones.suburb 
  WHERE zone='2' 
```

两者都给出错误：

> “where 子句”中的未知列“区域”。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:43:35.247

尝试这个 ：

```
SELECT `name`, `zone`
FROM `staff` AS s
LEFT OUTER JOIN `zones` AS z ON `s`.`suburb`=`z`.`suburb`
WHERE `s`.`zone`='2'; 
```

假设该列`zone`在表中`staff`。如果它在表中`zones`，请将 WHERE 更改为：

```
WHERE `z`.`zone`='2'; 
```

这里的关键部分是 WHERE 子句中的精度。也许 MySQL 不知道在哪里查找（在哪个表中），因此在表上添加精度会降低风险。此外，请确保此列存在于该表中（并且带有该错字。`zones`或`Zone`可能导致错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:37:53.243

如果您想按照您提供的方式运行第一个查询，它应该更像这样：

```
SELECT * 
FROM (
    SELECT name,zone 
    FROM staff 
    LEFT OUTER JOIN zones ON staff.suburb=zones.suburb
) A 
WHERE A.zone='2' 
```

但是我完全不明白您为什么要进行 SUB-SELECT，这完全没有必要。除非您犯了印刷错误，否则第二个查询应该可以工作。此外，最好对查询中使用的每一列或表名进行转义，如下所示：

```
SELECT `name`, `zone` 
FROM `staff` s 
LEFT OUTER JOIN `zones` z 
    ON s.`suburb` = z.`suburb` 
WHERE z.`zone` = '2' 
```

# c# - 替换字符串正则表达式

> ID：10534996
> 
> 赞同：1
> 
> 时间：2012-05-10T13:26:27.393
> 
> 标签：c#, html, regex

我试图让用户能够在 CMS 中使用一些额外的“标签”来“标记”某些内容部分，然后在页面上呈现内容时将其翻译，例如粗体。

类似于`{strong:Lorum ipsum dolar}`文本将用`<strong>Lorum ipsum dolar</strong>`.

我试图为此找出正则表达式，但我不好。我从网站上抓取了一些 html 替换脚本，它们不是很有帮助，至少，我不知道要改变什么：$。

任何帮助，将不胜感激。

**笔记**

我在 C# 中这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T01:08:01.053

因此，这将为您提供您正在寻找的标签和部分，但是，我将这些结果转换为最终字符串的方式非常难看。它实际上只是最重要的正则表达式。享受！

```
string test = "{strong:lorem ip{i:su{b:m}m}m dolar} {strong:so strong}";
Regex tagParse = new Regex(
    @"\{(?<outerTag>\w*)
        (?>
            (?<DEPTH>\{(?<innerTags>\w*))
            |
            (?<-DEPTH>\})
            |
            :?(?<innerContent>[^\{\}]*)
        )*
        (?(DEPTH)(?!))

        ", RegexOptions.IgnorePatternWhitespace | RegexOptions.Singleline);

MatchCollection matches = tagParse.Matches(test);
foreach (Match m in matches)
{
    StringBuilder sb = new StringBuilder();
    List<string> tags = new List<string>();
    tags.Add(m.Groups["outerTag"].Value);
    foreach (Capture c in m.Groups["innerTags"].Captures)
        tags.Add(c.Value);
    List<string> content = new List<string>();
    foreach (Capture c in m.Groups["innerContent"].Captures)
        content.Add(c.Value);
    if (tags.Count > 1)
    {
        for (int i = 0; i < content.Count; i++)
        {
            if (i >= tags.Count)
                sb.Append("</" + tags[tags.Count - (i - tags.Count + 1)] + ">");
            else
                sb.Append("<" + tags[i] + ">");
            sb.Append(content[i]);
        }
        sb.Append("</" + tags[1] + ">");
    }
    else
    {
        sb.Append("<" + tags[0] + ">");
        sb.Append(content[0]);
    }
    sb.Append(m.Groups["outerContent"].Value);
    sb.Append("</" + m.Groups["outerTag"].Value + ">");
    Console.WriteLine(sb.ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T22:26:34.020

这看起来很像 json 到 XML 的转换。

```
{"strong":"Lorum ipsum dolar"} 
```

会成为

```
<strong>Lorum ipsum dolar</strong> 
```

和

```
{"strong":{italic:"Lorum ipsum dolar"}} 
```

会成为

```
<strong>
<italic>Lorum ipsum dolar</italic>
</strong> 
```

我不是说这就是答案，但你可能想看看。基本思想是将您的标签解析为分层结构，然后将其解析回 HTML 或您使用的任何输出语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T22:15:32.643

**编辑：**要使用嵌套标签，每个输入字符串有多个匹配项。限制：标签对内的文本不能包含“{”或“}”。

```
private string FormatInput(string input)
{
    const string patternNonGreedy = @"\{(?<tag>.+?):(\s*)(?<content>.*?)(\s*)}";
    const string patternGreedy = @"\{(?<tag>.+?):(\s*)(?<content>.*)(\s*)}";

    Match mtc = Regex.Match(input, patternGreedy);
    if (!mtc.Success)
        return input;

    string content = mtc.Groups["content"].Value;
    int braces = 0;
    foreach (char c in content)
    {
        if (c == '{')
            braces++;
        else if (c == '}')
        {
            if (braces > 0)
                braces--;
        }
    }

    if (braces == 0)
        return input.Substring(0, mtc.Index)
            + string.Format("<{0}>{1}</{0}>", mtc.Groups["tag"].Value, FormatInput(content))
            + input.Substring(mtc.Index + mtc.Length);

    mtc = Regex.Match(input, patternNonGreedy);
    Debug.Assert(mtc.Success);

    content = mtc.Groups["content"].Value;
    return input.Substring(0, mtc.Index)
        + string.Format("<{0}>{1}</{0}>", mtc.Groups["tag"].Value, content)
        + FormatInput(input.Substring(mtc.Index + mtc.Length));
} 
```

测试示例：

```
string output1 = FormatInput("{strong:Lorum ipsum dolar}");
// output1: <strong>Lorum ipsum dolar</strong>

string output2 = FormatInput("{strong:{italic:Lorum ipsum dolar}}");
// output2: <strong><italic>Lorum ipsum dolar</italic></strong>

string output3 = FormatInput("{strong:Lor{i:e}m ipsum dol{i:o}r}");
// output3: <strong>Lor<i>e</i>m ipsum dol<i>o</i>r</strong> 
```

# c++ - SQLBrowseConnect 似乎没有枚举本地域上的服务器

> ID：10534997
> 
> 赞同：2
> 
> 时间：2012-05-10T13:26:29.750
> 
> 标签：c++, sql-server, active-directory

我正在尝试使用 SQLBrowseConnect 枚举本地 SQL 实例。一般来说，这工作正常，但我们有一个设置导致 SQLExpress 实例未被发现。这是有问题的代码：

```
SQLSetConnectAttr(hSQLHdbc, 
                  SQL_COPT_SS_BROWSE_SERVER,
                  _T("(local)"), 
                  SQL_NTS);

CString inputParam = _T("Driver={SQL Server}");
SQLBrowseConnect(hSQLHdbc, 
                 inputParam, 
                 SQL_NTS, 
                 szConnStrOut, 
                 MAX_RET_LENGTH, 
                 &sConnStrOut); 
```

在失败的实例中，代码在域控制器上运行。缺少的本地 SQL 实例是 SQLExpress 实例（版本 9）。然而，令人费解的是，运行 sqlcmd -L 显示丢失的实例没有任何问题。

我错过了什么真的很傻吗？请记住，在其他系统和设置上没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:50:29.933

经过大量调查，我无法真正找出问题所在。这台机器不会使用 SQLBrowseConnect 发现它自己的 SQL 实例。因此，我决定编写自己的版本。发现 SQL 实例非常容易。您只需将广播 UDP 数据包发送到端口 1434，其中包含有效负载 0x02（1 个字节）并等待 SQL 服务器响应。它们以每个服务器的一个数据包响应，其中详细说明了该机器上的所有实例。执行此操作所需的代码如下所示：

```
// to enumerate sql instances we simple send 0x02 as a broadcast to port 1434.
// Any SQL servers will then respond with a packet containing all the information
// about installed instances. In this case we only send to the loopback address

// initialise
WSADATA WsaData;
WSAStartup( MAKEWORD(2,2), &WsaData );

SOCKET udpSocket;
struct sockaddr_in serverAddress;       

if ((udpSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) < 0) 
{   
    return;
}

// set up the address
serverAddress.sin_family = AF_INET; 
serverAddress.sin_addr.s_addr = htonl(INADDR_LOOPBACK);
serverAddress.sin_port = htons(1434);

// the payload
char payload = 0x02;  

// config the port for broadcast (not totally necessary right now but maybe in the future)
BOOL broadcast = TRUE;
setsockopt(udpSocket, SOL_SOCKET, SO_BROADCAST, reinterpret_cast<const char*>(&broadcast), sizeof(BOOL));

// receive address info
sockaddr_in RecvAddr;
RecvAddr.sin_family = AF_INET;
RecvAddr.sin_addr.s_addr = htonl(INADDR_ANY);

sockaddr_in SenderAddr;
int SenderAddrSize = sizeof (SenderAddr);

// bind the socket to the receive address info
int iResult = bind(udpSocket, (SOCKADDR *) & RecvAddr, sizeof (RecvAddr));
if (iResult != 0) 
{
    int a = WSAGetLastError();
    return;
}

if (sendto(udpSocket, &payload, 1, 0, (struct sockaddr *) &serverAddress, sizeof(serverAddress)) < 0) 
{
    int a = WSAGetLastError();
    return;
}

// set up a select so that if we don't get a timely response we just bomb out.
fd_set fds ;
int n ;
struct timeval tv ;

// Set up the file descriptor set.
FD_ZERO(&fds) ;
FD_SET(udpSocket, &fds) ;

// Set up the struct timeval for the timeout.
tv.tv_sec = 5 ;
tv.tv_usec = 0 ;

// Wait until timeout or data received.
n = select ( (int)udpSocket, &fds, NULL, NULL, &tv ) ;
if ( n == 0)
{ 
    // timeout
    return;
}
else if( n == -1 )
{
    // error
    return;   
}

// receive buffer
char RecvBuf[1024];
int BufLen = 1024;
memset(RecvBuf, 0, BufLen);

iResult = recvfrom(udpSocket,
                   RecvBuf, 
                   BufLen, 
                   0, 
                   (SOCKADDR *) & SenderAddr, 
                   &SenderAddrSize);

if (iResult == SOCKET_ERROR) 
{
    int a = WSAGetLastError();
    return;        
}

// we have received some data. However we need to parse it to get the info we require
if (iResult > 0)
{
    // parse the string as required here. However, note that in my tests, I noticed
    // that the first 3 bytes always seem to be junk values and will mess with string
    // manipulation functions if not removed. Perhaps this is why SQLBrowseConnect
    // was having problems for me???
} 
```

# java - JVM 命令行选项

> ID：10534998
> 
> 赞同：11
> 
> 时间：2012-05-10T13:26:31.950
> 
> 标签：java, jvm-arguments

> **可能重复：**
> [JVM 选项列表 - 在 Oracle 之后仍在维护？](https://stackoverflow.com/questions/7833209/jvm-options-list-still-being-maintained-post-oracle)

是否有任何页面包含可用于运行 JVM 的命令行选项的**完整列表？**在我所见的任何地方，我都被提到[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)，这是非常不完整的。甚至[Java 7 上的 Oracle 页面](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/index.html)也只是指上面的页面。

对于这样一个基本问题，我深表歉意，但我不断遇到人们提出有用的外观选项来调整我在任何地方都找不到的 JVM！例如 CMSInitiatingOccupancyFraction

编辑：按照下面 MicTech 引用的链接，然后是 Q 中的链接，看来：[http ://stas-blogspot.blogspot.co.uk/2011/07/most-complete-list-of-xx- options-for.html](http://stas-blogspot.blogspot.co.uk/2011/07/most-complete-list-of-xx-options-for.html)是迄今为止最好的参考。叹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:45:45.323

您可能会发现一个关于 GC 标志有用的常见问题解答：

[http://java.sun.com/docs/hotspot/gc1.4.2/faq.html](http://java.sun.com/docs/hotspot/gc1.4.2/faq.html)

要考虑的一件事是这些标志不是“标准的”，因此 JVM 实现不必遵守。这就是为什么它没有在您的链接中列出的原因。它们是特定于实现的标志。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-10T13:48:43.733

Oracle 热点特定选项 [http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)