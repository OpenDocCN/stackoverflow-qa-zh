# StackOverflow 问答 10393000-10393999

# php - 将孤立的 CSS 应用到 PHP

> ID：10393001
> 
> 赞同：0
> 
> 时间：2012-05-01T02:52:04.577
> 
> 标签：php, html, css

我已将我当前的站点构建为 HTML 和 PHP 的混搭。我最初将 CSS 嵌入到每个单独的页面中。我正在为单独的页眉和页脚 PHP 文件使用 PHP 包含。我已经将 footer.php 和 header.php 链接到它们各自的 .css 文件，并且它在一定程度上起作用，但似乎 CSS 正在“渗透”到页眉和页脚 PHP 文件。

例如，我会将深灰色应用于我的正文文本和指向我的 footer.css 文件的链接：

```
<style type="text/css">
<!--
body,td,th {
font-family: Verdana, Arial, Helvetica, sans-serif;
font-size: 12px;
color: #808080;
}
a:link {
color: #808080 ;
}
a:visited {
color: #808080 ;
}
body {
background-image: url();
background-repeat:repeat-x;
background-color: #000000;
}
.style4 {font-size: 13px}
-->

#footer { width: 100%; height: 20%; background: #181818   ; }

//footer-nav style

#footer-nav {
list-style-type: none;
padding: 0;
float: center;

}

#footer-nav li {
display: inline;

}

#footer-nav li a {
float: center;  
text-align: center;
background: none;
margin-left: 15px;
margin-right: 15px;
text-decoration: none;
height: 23px;
line-height: 23px;
}

</style> 
```

`

然后转移到我的 header.php 文件并将链接更改为深灰色（这不应该发生，因为我将 header.php 链接到它自己的 header.css 文件）。

我本质上想要实现的是我网站上的动态页眉和页脚链接系统，以便在添加链接、服务等的情况下，我可以通过仅替换一个文件来轻松更新站点范围内的所有页眉和页脚。

如果有更有效的方法，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T02:57:20.497

从技术上讲，应该只属于您的页面，而不是内联块（尽管它确实有效）。

您需要更改 CSS 以在每种情况下仅选择要应用样式的区域。例如，标题的所有 CSS 都应以顶级标题元素 #header 为前缀。

现在，您只是在设置顶级元素的样式，最后加载的元素正在生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T02:58:05.347

您可以尝试将这样的内容放在特定 css 的背景上。前任。

背景：#181818 ！重要；

# javascript - 单页 JavaScript 应用程序的唯一 URL？

> ID：10393003
> 
> 赞同：1
> 
> 时间：2012-05-01T02:52:29.017
> 
> 标签：javascript

如何为单页 JavaScript 应用程序生成唯一 URL。

URL 的行为应该像一个普通的 URL，即将它粘贴到浏览器中，如果用户有权限，应用程序应该加载显示的特定视图。Gmail 会这样做，许多其他人也是如此。

我猜这将涉及读取位置哈希值并适当地执行操作。

对于未来的项目，是否有任何框架可以内置此功能？

谢谢， 斯里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T02:55:32.510

你可以试试 BackboneJs，我敢肯定有数百万个你想要的功能[http://documentcloud.github.com/backbone/](http://documentcloud.github.com/backbone/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:09:28.930

我不会在哈希值上构建它。使用`history.pushState`等用真实的自然 URL 构建它。使用重写请求站点上的任何正常资源都由单个处理器处理。然后 onload，只需检查 URL 中的内容与包含用于构建该资源的控制器的某种散列。此外，您可以构建 URL，因此它们实际上是正则表达式值，以允许在单页场景中使用半动态 URL。

```
urls = {
  { url : "/content/id/(\d)*?/", controller : controllers.blah }
  { url : "/home/", controller : controller.home }
}
controllers : {
  blah : function() {
    // do stuff
  },
  home : function() {
    // do stuff
  }
} 
```

显然它变得更加复杂，但这是我用来创建我的 javascript one pager 的方法。此外，在页面加载时，我将运行一个 jQuery 调用，该调用具有所有内部链接点击，以通过页面在页面加载时使用的完全相同的处理器运行，从而有效地劫持它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:23:50.133

有一个名为 DerbyJS ( [http://derbyjs.com](http://derbyjs.com) ) 的 JavaScript 框架，它完全支持你想要的。

# php - 意外的括号 - PHP

> ID：10393009
> 
> 赞同：0
> 
> 时间：2012-05-01T02:53:50.090
> 
> 标签：php, syntax-error, brackets

这是一些与 HTML 混合的 PHP，我很抱歉它很混乱。

```
 <div class="media"><?php echo ($inf['post_url']) ?><img src="<?php echo($inf['photos'][0]['alt_sizes'][0][url]); ?>" /></div>
  {block:Caption}<?php if (array_key_exists('caption', $inf))?><div class="copy"><?php Echo ($inf['caption']);?></div><?php }; ?>
  <?php }; ?> 
```

第二行产生此错误

```
Parse error: syntax error, unexpected '}' on line 1708 
```

我看不出括号有什么问题。是什么产生了这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T02:57:55.940

如果您正确地格式化您的代码以便它实际上是可读的，那么多余的括号（和缺少的左括号）将很容易发现：

```
 <div class="media">
        <?php echo ($inf['post_url']) ?>
        <img src="<?php echo($inf['photos'][0]['alt_sizes'][0][url]); ?>" />
    </div>
    {block:Caption}
    <?php if (array_key_exists('caption', $inf))?>
        <div class="copy">
            <?php Echo ($inf['caption']);?>
        </div>
    <?php }; ?>
<?php }; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T02:59:13.390

如果你正确缩进你的代码，它会很有帮助。

```
 <div class="media">
        <?php echo ($inf['post_url']) ?>
        <img src="<?php echo($inf['photos'][0]['alt_sizes'][0][url]); ?>" />
    </div>
    {block:Caption}
    <?php if (array_key_exists('caption', $inf)) ?>
        <div class="copy">
        <?php Echo ($inf['caption']);?>
        </div>
    <?php }; ?>
<?php }; ?> 
```

非常基本，右括号没有相应的左括号。

一些更具风格的建议：echo 是一个 PHP 结构，所以你不需要像函数一样调用它，这`echo something`相当于`echo(something)`但前者是首选。此外，与保留字的大小写保持一致是值得的，即如果您使用小写，请**始终**使用小写作为保留字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T03:00:00.003

结尾多了一个括号和一些多余的分号，“echo”大写。试一试：

```
<div class="media">
   <?php echo ($inf['post_url']); ?>
   <img src="<?php echo($inf['photos'][0]['alt_sizes'][0][url]); ?>" />
</div>
   {block:Caption}
   <?php if (array_key_exists('caption', $inf)) {?>
     <div class="copy">
     <?php echo ($inf['caption']);?>
     </div>
   <?php } ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T03:00:18.427

如果你把所有的 HTML 都蒸发掉，第 2 行和第 3 行就变成了这样：

```
if (array_key_exists('caption', $inf)) Echo ($inf['caption']); };  }; 
```

你不需要那些右花括号中的任何一个。

# python - 尝试运行 Scrapy Dmoz 演示代码时出现 libxml2 或 lxml 错误

> ID：10393010
> 
> 赞同：1
> 
> 时间：2012-05-01T02:53:52.403
> 
> 标签：python, scrapy

```
File "/root/my_new_env/lib/python2.6/site-packages/scrapy/selector/dummysel.py", line 16, in _raise
    raise RuntimeError("No selectors backend available. " \
exceptions.RuntimeError: No selectors backend available. Please install libxml2 or lxml 
```

我安装了 libxml2 和 lxml。任何想法为什么我会收到这个错误？

# mysql - 如何删除索引？

> ID：10393016
> 
> 赞同：1
> 
> 时间：2012-05-01T02:54:42.170
> 
> 标签：mysql

继[我之前的问题](https://stackoverflow.com/questions/10293273/why-is-ths-a-duplicate-key)（qv）之后......

我已经创建了表并填充了数据。如何将前缀长度设置为一个非常大的值或将其全部删除，这样我就没有这个问题了？永远不会超过几千行，并且只有这个应用程序在专用 PC 上运行，因此性能不是问题。

解决方案，请使用 PhpMyAdmin，或者只是 MySQL 命令行。

* * *

更新：我可以删除这个索引（或让它无限长）吗？

嗯，如果可以的话，我宁愿保留唯一索引。那么，如何让它无限长呢？

或者我应该将我的文本字段重新定义为 var_char 并限制长度？（我确实知道主键的最大可能长度）

```
mysql> describe tagged_chemicals;
+-------------+---------+------+-----+---------+-------+
| Field       | Type    | Null | Key | Default | Extra |
+-------------+---------+------+-----+---------+-------+
| bar_code    | text    | NO   |     | NULL    |       |
| rfid_tag    | text    | NO   | UNI | NULL    |       |
| checked_out | char(1) | NO   |     | N       |       |
+-------------+---------+------+-----+---------+-------+
3 rows in set (0.04 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:45:26.423

可能会是这样的

```
CREATE INDEX part_of_name ON customer (name(10)); 
```

来自创建索引文档[http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

在您的情况下，rfid_tag 的长度为 20。

# recursion - 在序言中递归时，一个人可以访问n个级别的变量吗？

> ID：10393019
> 
> 赞同：1
> 
> 时间：2012-05-01T02:55:22.297
> 
> 标签：recursion, prolog

为了澄清我的意思，让我们举这个递归的例子：

```
statement([]). 
statement([A|B]):- A, statement(B). 
```

头部A被我的规则检查，尾部B被送去递归，然后成为第2级的头部。当它递归并且在第二级时，我怎样才能访问之前的A？我想这一切都错了吗？如果需要任何澄清，请询问，我会这样做。提前致谢。

我想测试的（类型检查器）：

```
String s; int i; i = s.length(); // OK 
```

或者

```
String s; int i; s = i.length(); // fails 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:14:33.137

您必须明确记录前面的语句，以便在每次迭代时您都可以访问前面的步骤。如何记录这些陈述取决于您。一种解决方案是：

```
statement(L) :- statement(L,[]).
statement([], _). 
statement([A|B], L):- check(A), statement(B,[A|L]). 
```

L 记录前面的语句（以相反的顺序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:55:45.623

当然..使用序言数据库，断言和撤回。这证明了这一点：

```
% Declare the lasthead fact as dynamic, so facts can change
:-dynamic lasthead/1.

% Set a starting value for the first iteration
lasthead(null).

statement([]).
statement([A|B]) :-

    % Show the previous head
    lasthead(LH),
    writeln(['Last head was', LH]),

    % Retract last head. ie. remove from the database
    retract(lasthead(_)),

    % Store the current head in the database
    assertz(lasthead(A)),

    % Recurse around
    statement(B).

?- statement([a,b,c,d,e]).
[Last head was,null]
[Last head was,a]
[Last head was,b]
[Last head was,c]
[Last head was,d] 
```

上面的示例使用retract 来确保只有一次lasthead(X) 事实，但您可以删除retract，这将确保有多个lasthead(X) 事实，每个列表项一个。

然后，您可以使用例如访问/处理多个 lasthead(X) 事实。findall(X, lasthead(X), Y)，它将为您提供您在此过程中断言的任何 lasthead(X) 值。

# iphone - 进入/退出编辑模式时重绘 UITableViewCell

> ID：10393026
> 
> 赞同：7
> 
> 时间：2012-05-01T02:56:22.650
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我有一个表格视图，其中单元格的构建方式不同，具体取决于表格是否正在编辑。具体来说，选择样式在编辑模式下为无，在非编辑模式下为蓝色。

当我从一个转换到另一个时，我注意到一些单元格没有更新。快速记录一下告诉我，即使单元格的外观发生了很大变化（例如，正确添加/删除了辅助视图），表格视图也不会刷新选择样式（也不会刷新文本）。

这里发生了什么？调用 setEditing 时是否仅更新单元格的某些属性？大概只有那些具有特定方法允许分配单独的视图样式（例如 EditingAccessoryType）的人？我想我会从 EditingSelectionStyle 中受益。

我应该如何解决？通过自定义 setEditing 来更改每个单元格的 selectionStyle？我什至不确定我将如何遍历表视图来做到这一点。reloadData 不是一个选项，因为我正在使用一些动画。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T18:58:20.937

我发现自定义 setEditing: 来遍历可见单元格并为每个单元格设置 selectionStyle 可以正常工作。

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated{   
    [super setEditing:editing animated:animated];

    for (UITableViewCell *cell in [self.tableView visibleCells]) {
            NSIndexPath *path = [self.tableView indexPathForCell:cell];
            cell.selectionStyle = (self.editing && (path.row > 1 || path.section == 0)) ? UITableViewCellSelectionStyleNone : UITableViewCellSelectionStyleBlue;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T09:23:21.410

如果您查看[UITableViewDelegate 文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)，您会看到有五种方法可以自定义编辑行为。还有方法

```
 - (BOOL)tableView:(UITableView *)tableView 
canEditRowAtIndexPath:(NSIndexPath *)indexPath 
```

在进入编辑模式之前将在每个单元格上调用的[UITableViewDataSource 文档中。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)对于

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView 
           editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath 
```

这将被调用所有可编辑的单元格。如果您想更改单元格的外观，您可以在其中任何一个中进行。（未实现`canEditRow..`假定所有行都是可编辑的。）

* * *

另请注意，可能还有其他方法可以进入编辑模式，例如在单元格上滑动，在这种情况下

```
 - (void)tableView:(UITableView *)tableView 
willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath 
```

将为您滑动的单元格调用：

> 当进入这种“滑动删除”编辑模式时，表格视图会向代理发送一个 tableView:willBeginEditingRowAtIndexPath: 消息，以允许它调整其用户界面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-20T03:22:11.037

这适用于 Swift 2.3，只需覆盖自定义单元子类中的 setEditing 方法：

```
class MyCell: UITableViewCell {

    override func setEditing(editing: Bool, animated: Bool) {
        super.setEditing(editing, animated: animated)
        //Place your code here...
    }

} 
```

# firefox - 如何将 Aptana 测试保存在单个选项卡中？

> ID：10393036
> 
> 赞同：1
> 
> 时间：2012-05-01T02:57:47.100
> 
> 标签：firefox, testing, aptana, aptana3

每次我在 Aptana 中运行或调试网页时，它都会在 Firefox 中打开一个新选项卡或窗口。多次运行后，会出现一个带有多个选项卡的 Firefox 窗口或多个 Firefox 窗口。

我怎么能让 Firefox 为每次测试运行重新加载一个选项卡，而不是每次都打开一个新的选项卡/窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:24:25.450

您可以只“保存所有更改”而不是进行测试运行。然后在firefox上重新加载页面。

# c++ - 在 C++ 中访问基类私有成员

> ID：10393040
> 
> 赞同：2
> 
> 时间：2012-05-01T02:58:20.073
> 
> 标签：c++, class, inheritance

我已经很长时间没有使用 C++ 了，这个问题可能很愚蠢，但我真的可以使用一些帮助。

如果我的基类有一个私有数据成员并且我的派生类是公开派生的，则基类的私有成员不会被继承。但是，它们仍然可以通过继承的公共函数访问。例如：

```
class B{
int a,b;

public:
void SetA(int);
int GetA();
};

class D:public B{

public:
SetAAttribute(int x)
{ SetA(x); }

} 
```

现在，我的问题如下：从技术上讲，派生类对象上没有定义“a”属性。用外行的话来说，我基本上是在一个实体上设置一个属性，而这些属性甚至根本不存在。想象这样一个概念似乎不直观。我理解正确吗？

任何额外的解释或更正将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T03:01:04.793

不是属性不存在了，只是对你隐藏了。基类方法仍然可以访问基类成员，因为它们没有相互隐藏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T03:01:54.143

私有基成员是继承的，如果您尝试访问它们，编译器只会给您一个错误，因为您不应该直接访问它们。

# java - Java JTable 数据加载

> ID：10393041
> 
> 赞同：1
> 
> 时间：2012-05-01T02:59:00.827
> 
> 标签：java, swing, jtable, event-dispatching

所以我有一个大型卡片布局，其中一个面板作为 JTable：

```
tbm = new DefaultTableModel();  
tbm.addColumn("Account Number"); 
tbm.addColumn("PIN"); 
tbm.addColumn("Access Level"); 
tbm.addColumn("Balance");
table = new JTable(tbm);
JScrollPane scrollPane = new JScrollPane(table); 
```

在actionPerformed下，我试图将一些数据加载到表中，如下所示：

```
else if(event.getSource() == listallButton) {
      String query = "SELECT * FROM ATM";
      String delimiter = ",";
      String input = "go";
      int count=0;
      al = new ArrayList<String>();

          try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              input = communicationObject.getMessage();
              if (input != "stop") {
                  al.add(input);
                  data[count] = input;
                  count++; }

              for (int i=0;i<data.length;i++) {
                  row = data[i];
                  temp = row.split(delimiter);
                  tbm.addRow(new String[] {temp[0],temp[1],temp[2],temp[3]}); } 
              tbm.fireTableDataChanged();
              table.repaint(); 
```

现在我的问题是在加载所有行后表格没有重新绘制......有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T03:42:44.270

`tbm.addModel`应该是触发表更改事件，所以`tbm.fireTableDataChanged`没有必要。

您可以尝试这样做以在添加所有行后强制它自行绘制。

```
table.setModel(tbm); 
```

无关：

Swing 是单线程事件模型，这意味着您正在执行的任务将阻止 UI 更新。

我建议您将数据加载移动到 SwingWorker，一旦完成更改，将数据推送到 UI 上。看看这个[教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T03:20:00.430

没有必要打电话`tbm.fireTableDataChanged();`。模型本身将通知表以响应[addRow()](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5B%5D%29)。如果表格和模型连接正确，表格将自行刷新。

您可能会发现此[示例](http://www.java2s.com/Code/JavaAPI/javax.swing.table/DefaultTableModeladdRowObjectrowData.htm)很有帮助，它演示了`DefaultTableModel`.

由于此代码不可见，请确保表格和滚动窗格设置正确。此外，请确保您的查询实际返回数据。

# vb.net - 调试期间的 Visual Studio 2010 代码分析

> ID：10393044
> 
> 赞同：2
> 
> 时间：2012-05-01T02:59:31.233
> 
> 标签：vb.net, visual-studio-2010, debugging, profiling, profiler

我正在 VS2010 Professional 中开发 Visio 插件，并在调试应用程序时寻找热点（特别是在 COM 对象周围）。我发现了许多可以分析现有 .NET 应用程序的分析器，但没有一个（我见过的）支持调试。此外，因为这是一个 .NET 加载项，而不是一个完整的独立可执行文件，所以我不确定它们是否公平。

我研究过的分析器：

1.  [EQATEC](http://www.eqatec.com/tools/profiler/)
2.  [瘦身](http://code.google.com/p/slimtune/)
3.  [CLR](http://www.microsoft.com/en-us/download/details.aspx?id=16273)
4.  [nprof](http://code.google.com/p/nprof/)
5.  [VS2010 Performance Profiler](http://msdn.microsoft.com/en-us/library/ms182372.aspx) -- 请注意，当我使用 Professional 时，这个需要 Ultimate 或 Premium。

**有没有人找到可以在 VS2010 调试会话期间使用的分析器？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T16:09:02.890

我之前已经在 SO 上提出过这一点，其他人也是如此。

如果您的目标是提高性能（以挂钟时间衡量），那么到目前为止，最好的工具就是调试器本身及其“暂停”按钮。让我告诉你为什么。

**首先，让我们看一个好的 Profiler**

在分析器中，ANTS 可能和他们来的一样好。当我在应用程序上运行它时，屏幕顶部如下所示：

![在此处输入图像描述](../Images/5ef7c6b9f53ac0318d13d5840f2e9d09.png)

请注意，您必须选择要查看的时间跨度，并且您必须选择要查看 CPU 时间还是文件 I/O 时间。在该时间范围内，您会看到如下内容：

![在此处输入图像描述](../Images/0edb54e246dc8ac15a2cf3a40f63fe12.png)

它试图展示 ANTS 认为的“热路径”，仅考虑 CPU 时间。当然，它强调包容性的“与孩子相处的时间（％）”，这很好。在这样的大型代码库中，请注意自时间“时间 (%)”有多小？这是典型的，你可以明白为什么。

这就是说，您当然应该忽略包含百分比较低的函数，因为即使您可以将它们减少到无操作，您在该间隔内的总时间也不会超过它们的包含百分比。

因此，您查看具有高包容性百分比的函数，并尝试在其中找到一些东西以减少它们花费的时间，通常是通过 a) 让它们对子函数进行更少的调用，或者 b) 让函数本身被调用较少的。

如果您找到并修复它，您将获得一定百分比的加速。然后你可以再试一次。当你找不到任何可以修复的东西时，你就宣布胜利并把你的分析器放在另一天。

请注意，您可能已经修复了其他问题以加快速度，但如果分析器没有帮助您找到它们，您就认为它们不存在。这些可以是真正的大睡眠者。

**现在让我们来一些手动样本**

在困扰我的阶段，我只是随机暂停了应用程序六次，因为它让我等待。每次我拍摄调用堆栈的快照时，*我*都会仔细查看程序在做什么以及为什么这样做。其中三个样本如下所示：

外部代码
Core.Types.ResourceString.getStringFromResourceFile 第 506
行 Core.Types.ResourceString.getText 第 423
行 Core.Types.ResourceString.ToString 第 299 行
外部代码
Core.Types.ResourceString.getStringFromResourceFile 第 528
行 Core.Types.ResourceString.getText 第 423 行
核心.Types.ResourceString.ToString Line 299
Core.Types.ResourceString.implicit operator string Line 404
SplashForm.pluginStarting Line 149
Services.Plugins.PluginService.includePlugin Line 737
Services.Plugins.PluginService.loadPluginList Line 1015
Services.Plugins.PluginService.loadPluginManifests Line 1074
Services.Plugins.PluginService.DoStart 第 95 行
Core.Services.ServiceBase.Start 第 36
行 Core.Services.ServiceManager.startService 第 1452
行 Core.Services.ServiceManager.startService 第 1438
行 Core.Services.ServiceManager.loadServices 第 1328
行 Core.Services.ServiceManager.Initialize 第 346 行
Core.Services.ServiceManager .Start Line 298
AppStart.Start Line 95
AppStart.Main Line 42

这就是它正在做的事情。它正在读取资源文件（即 I/O，因此查看 CPU 时间不会看到它）。它读取它的原因是获取插件的名称。插件名称在资源文件中的原因是将来*可能*需要将该字符串国际化。无论如何，获取它的原因是在加载插件期间名称可以显示在启动屏幕上。大概原因是，如果用户想知道什么花了这么长时间，启动画面会告诉他们正在发生的事情。

这六个样本证明，如果名称不显示，或者显示但以更有效的方式获取，则应用程序的启动速度大约会*增加一倍*。

我希望你能看到，没有任何一个通过显示测量值来工作的分析器能够如此迅速地产生这种洞察力。

即使分析器通过挂钟时间而不是 CPU 显示包含百分比，它仍然会让用户试图弄清楚发生了什么，因为在总结例程的时间时，它几乎失去了所有解释性上下文如果它正在做的事情是*必要*的。

仅查看汇总统计数据和查看代码时，人类的倾向是说“我可以看到它在做什么，但我看不到任何改进它的方法”。

**那么“统计意义”呢？**

我一直听到这个，它来自对统计的天真。

如果六分之三的样本显示有问题，这意味着问题使用的最有可能的实际百分比是 3/6=50%。这也意味着如果您多次这样做，平均成本将为 (3+1)/(6+2)，这也是 50%。如果您节省 50% 的时间，则可以将速度提高 2 倍。成本有可能低至 20%，在这种情况下，加速只有 1.25 倍。成本可能高达 80% 的可能性相同，在这种情况下，加速将是 5 倍（！）。所以，是的，这是一场赌博。加速可能小于估计值，但不会为零，而且同样可能非常大。

如果需要更高的精度，则可以采集更多的样本，但如果牺牲了通过检查样本获得的洞察力来获得统计精度，那么很可能找不到加速。

PS[这个链接显示了找到](https://scicomp.stackexchange.com/a/1870/1262)*所有*问题的关键重要性——不要遗漏任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:54:31.540

在 VS2010 中挖掘扩展管理器后，我找到了[dotTrace](http://visualstudiogallery.msdn.microsoft.com/355483FF-4B8E-43F8-86A2-2DC7BE9B3623)。这使得在调试期间能够附加到正在运行的进程（在我的例子中是 Visio）。

这个工具的 10 天试用版有所帮助，但 400 美元的价格仍然感觉有点陡峭。我仍然希望找到一种更便宜的方法来完成同样的任务。

# facebook - facebook graph api检查用户是否是使用PHP的组的成员

> ID：10393045
> 
> 赞同：4
> 
> 时间：2012-05-01T02:59:33.660
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-group

我想检查用户是否是使用 facebook graph api 的组的成员...

我有这个：

```
$group = file_get_contents("https://graph.facebook.com/177129325652421/members?access_token=XXXXXXXX");
$group = json_decode($group);

$checkuser = $group->data; 
```

`facebook id`并通过使用他的和检查用户是否是成员`in_array()`

```
if(in_array($_GET["fid"],$checkuser)){

echo "yes";

} else {

echo "no";
} 
```

有人可以帮我纠正这个问题...我的代码不起作用...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T03:04:37.903

**参考：** [https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

使用 API 网址：

```
https://graph.facebook.com/me/groups 
```

获取用户的组。在上面的链接中，将 更改`me/`为用户的 FB ID。您还必须传入访问令牌。

回复将采用 JSON 编码。[`json_decode`](http://php.net/manual/en/function.json-decode.php)使用PHP 关联数组将其解码。遍历它并检查您想要的组。

Graph API 不会一次返回所有组。您必须使用每个响应末尾的分页链接来获取更多信息，或者使用`limit`参数来请求尽可能多的信息。

以下代码示例将发布您所属的组的 ID

```
<?php

$url = "https://graph.facebook.com/me/groups?access_token=AAAAAAITEghMBAMDc6iLFRSlVZCoWR0W3xVpEl1v7ZAxJRI3nh6X2GH0ZBDlrNMxupHXWfW5Tdy0jsrITfwnyfMhv2pNgXsVKkhHRoZC6dAZDZD";
$response = file_get_contents($url);

$obj = json_decode($response);

foreach($obj->data as $value) {
    echo $value->id;
    echo '<br>';
}

/* to check for existence of a particular group 

foreach($obj->data as $value) {
    if ($value->id == $yourID) {
        //found
        break;
    }

    //not found. fetch next page of groups
}

*/ 
```

PS - 如果运行上面的代码给你一个错误说明`Could not find wrapper for "https"`，你需要取消注释/添加 PHP 扩展`extension=php_openssl.dll`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-01T21:48:25.037

正在调查这个并发现这是谷歌的第一个答案，但答案似乎很麻烦，所以我挖得更深一些。

我发现的最快答案不需要遍历所有组的成员使用`FQL`.

`SELECT gid, uid FROM group_member WHERE uid = (user id) AND gid = (group id)`

这要么返回一个空的“数据”对象，要么返回一个带有 UID 和 GID 的“数据”对象。

它也（从我目前所见）不需要`user_groups`许可。

[https://developers.facebook.com/tools/explorer?fql=SELECT%20gid%2C%20uid%20FROM%20group_member%20WHERE%20uid%20%3D%20551549780%20AND%20gid%20%3D%20282374058542158](https://developers.facebook.com/tools/explorer?fql=SELECT%20gid%2C%20uid%20FROM%20group_member%20WHERE%20uid%20%3D%20551549780%20AND%20gid%20%3D%20282374058542158)

此 FQL 查询为我返回：

```
{
  "data": [
    {
      "gid": "282374058542158", 
      "uid": "551549780"
    }
  ]
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-19T16:47:06.210

在 Graph API v2.4 之后，这似乎是不可能的，因为 Facebook 决定禁止它： [https ://developers.facebook.com/docs/apps/changelog#v2_4](https://developers.facebook.com/docs/apps/changelog#v2_4)

“user_groups 权限已被弃用。开发人员可以继续使用 user_managed_groups 权限来访问一个人作为管理员的组。此信息仍可通过 /v2.4/{user_id}/groups 边缘访问，该边缘在v2.4。”

它还指出“从 2015 年 10 月 6 日起，在所有以前的 API 版本中，这些端点将返回空数组。” 但在我看来，它仍然适用于 v2.2 和 v2.3。

# perl - 如何获取 PPP 连接的服务器 ip

> ID：10393054
> 
> 赞同：2
> 
> 时间：2012-05-01T03:02:39.470
> 
> 标签：perl

使用 rasdial 建立 PPP 连接（拨打拨号电话）后，如何获取给我的“服务器 ip”地址。它通常是本地 ip，但是当我执行 ipconfig 时似乎无法获得它。

但是，如果我右键单击连接并选择状态，我可以看到这个 IP 地址。

过去曾提出过这个问题，但.NET 和 C# 用户和他们的解决方案是使用某个可用的库，而我没有。

有谁知道如何获取 PPP 服务器 ip？我需要该 IP 地址来启动与调制解调器的 FTP 通信。

我以这种方式建立了连接：

```
system (rasdial [connection_name]);  # in perl. 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:19:00.837

我认为最好的方法是使用[Win32::API连接到](http://search.cpan.org/~cosimo/Win32-API-0.68/API.pm)[Windows API 调用](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446739%28v=vs.85%29.aspx)。您可能想从[RasEnumConnections](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377284%28v=vs.85%29.aspx)开始。

# java - 在 Java 中使用 DOM 从 XML 文件中检索信息

> ID：10393056
> 
> 赞同：0
> 
> 时间：2012-05-01T03:02:52.130
> 
> 标签：java, android, xml, dom

我一直在为此苦苦挣扎。我试图弄清楚如何从使用 DOM for Java 的任何类别中获得“犯罪、戏剧和惊悚片”。我也无法理解我应该如何深入研究这个。（例如，我应该先将类别拉出，然后将每个类别作为子项引用，还是立即按属性引用。

```
<movie>
<homepage>http://www.sincitythemovie.com/<;/homepage>
<trailer>http://www.youtube.com/watch?v=80<;/trailer>
<categories>
<category type="genre" name="Crime" url="http://themoviedb.org/genre/crime" id="80"/>
<category type="genre" name="Drama" url="http://themoviedb.org/genre/drama" id="18"/>
<category type="genre" name="Thriller" url="http://themoviedb.org/genre/thriller" id="53"/>
</categories>
</movie> 
```

这是我一直在使用的 < open > somthing </ open >

```
private String getTextValue(Element ele, String tagName) {
String textVal = null;
NodeList nl = ele.getElementsByTagName(tagName);
if (nl != null && nl.getLength() > 0) {
Element el = (Element) nl.item(0);
textVal = el.getFirstChild().getNodeValue();
}
return textVal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:20:15.703

利用

```
 textVal= e1.getAttribute("name"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T03:49:30.950

You can reference immediately by attribute. e1.getAttribute("name") will give you the attribute of the category tag.

# svn - TortoiseSVN 设置与 Windows 服务器

> ID：10393062
> 
> 赞同：1
> 
> 时间：2012-05-01T03:04:39.163
> 
> 标签：svn, tortoisesvn, windows-server-2008, installation

我有一个 Windows Server 2008，我想使用 TortoiseSVN 作为我的源代码控制。我在设置所有内容时遇到了一些麻烦。我假设我需要在服务器上安装 TortoiseSVN，也需要为每个将更改推送到服务器的用户安装 TortoiseSVN。

我的问题是，我是否还需要在服务器和用户计算机上安装颠覆？任何有关如何设置的指南都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T03:06:47.943

SVN 的服务器端不在 TortoiseSVN 中。相反，安装 VisualSVN 服务器[http://www.visualsvn.com/server/](http://www.visualsvn.com/server/)或任何其他 Subversion Windows 构建，如 CollabNet 的。几乎所有这些都是免费的。

# php - 如何使用 coder 对所有 Drupal 模块进行 coder review？

> ID：10393065
> 
> 赞同：0
> 
> 时间：2012-05-01T03:05:18.820
> 
> 标签：php, bash, drupal, drupal-modules

我正在使用 bash 脚本并尝试循环浏览模块，但它不起作用。那就是创建的日志是空的。

```
for MOD in {space separated list of modules to run coder against};
 do drush coder checkstyle ${MOD} > logs/coder- ${MOD}.xml 2>/dev/null
 done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:22:55.027

您可以在此处访问 drupal 模块页面，这里有带有描述的代码审查链接，或者您可以在此处阅读整个文档[http://drupal.org/node/144172](http://drupal.org/node/144172)

# iphone - 如何从 GCDAsyncUdpSocket 初始化和实例化

> ID：10393068
> 
> 赞同：3
> 
> 时间：2012-05-01T03:06:11.547
> 
> 标签：iphone, objective-c, udp

我只需要通过 UDP 发送一条基本消息。我已经放弃了，我想我必须使用那里的一些库。正如我研究的那样，有 AsyncUdpSocket 库的示例。我不知道在哪里可以下载该类，最终找到了[GCDAsyncUdpSocket](http://code.google.com/p/cocoaasyncsocket/)。Aparently 他们有一个不同的构造函数，这就是我无法实例化一个新对象以发送 udp 消息的原因。我知道目标 c 的基础知识，如果有人可以向我展示如何广播消息的简短示例，我将不胜感激。我已经得到的服务器部分我只对客户端部分感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:54:52.077

[首先从这里](https://github.com/robbiehanson/CocoaAsyncSocket)下载 GCDAsyncUdpSocket 。然后你可以发送数据包：

```
 GCDAsyncUdpSocket *udpSocket ; // create this first part as a global variable
 udpSocket = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

 NSData *data = [[NSString stringWithFormat:@"Hello World"] dataUsingEncoding:NSUTF8StringEncoding];

[udpSocket sendData:data toHost:@"192.168.10.111" port:550 withTimeout:-1 tag:1]; 
```

# objective-c - 从推送通知打开特定视图

> ID：10393072
> 
> 赞同：1
> 
> 时间：2012-05-01T03:06:51.177
> 
> 标签：objective-c, ios, xcode

我已经在我的应用程序上成功设置了推送通知，但我希望用户在滑动通知（iOS 5）而不是仅仅启动应用程序时转到某个视图。

视图控制器称为 statsViewController

有谁知道如何做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T04:14:58.727

您可以将自定义字典添加到您的推送通知负载中。请参阅 Apple 的[推送通知指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)。当您收到通知时，获取有效负载并根据内部内容加载视图控制器。

# r - 在 r 中抑制绘图中的刻度

> ID：10393076
> 
> 赞同：26
> 
> 时间：2012-05-01T03:07:48.187
> 
> 标签：r, plot, axis, axis-labels

我想从 X 轴上删除标签和轴，但是添加新的刻度。

```
plot(1:10, ylab = "")
at1 <- seq(1, 10, 0.1)
axis(side = 1, at = at1, labels = FALSE) 
```

我无法摆脱 y 标签。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-01T03:20:48.463

见`?par` 你需要`xaxt`论据

```
plot(1:10, ylab = "", xaxt='n') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T03:19:55.217

我不确定您想要什么，但这会删除 x 标签并使用您使用 at1 生成的刻度线：

```
plot(1:10, ylab = "", xlab="")
at1 <- seq(1, 10, 0.1)
axis(side =1, at1, labels = F) 
```

如果您也想这样做，我接受了 GSee 的建议以删除 y 刻度线。

```
plot(1:10, xlab = "", ylab = "", yaxt='n')
at1 <- seq(1, 10, 0.1)
axis(side =1, at1, labels = F) 
```

# javascript - 使用 Javascript 从 Twitter 示例中读取内容

> ID：10393081
> 
> 赞同：0
> 
> 时间：2012-05-01T03:08:23.713
> 
> 标签：javascript, twitter

我对编程很陌生，最近一直在玩 Twitter API。从 statuses/sample 方法中，您将如何使用 Javascript 读取以下 URL 的内容？

[https://stream.twitter.com/1/statuses/sample.json](https://stream.twitter.com/1/statuses/sample.json)

编辑：也许我会解释我的意图。我正在尝试读取 Twitter 示例数据，每 30 秒读取一次主题标签，然后每 30 秒按升序对前 10 个主题标签进行排序。

问题是，我什至不知道如何首先读取 Twitter 数据..

不寻找解决方案，但绝对可以使用一些想法..尤其是入门。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:19:48.307

您应该能够使用 JSONP，这是一种从服务器返回的特殊类型的响应。

它基本上接受响应，将其包装在一个匿名函数回调中，然后在脚本标签内将其返回给客户端，从而在响应返回浏览器时调用它。

```
​$.ajax({
    type: 'post',
    dataType: 'jsonp',
    url: 'http://twitter.com/status/user_timeline/msdn.json?count=10&callback=?',
    success: function (data) {
        console.log(data);
    }    
});​ 
```

在 Chrome 的调试器中检查请求 url，您会看到请求...

[https://twitter.com/status/user_timeline/msdn.json?count=10&callback=jQuery1706531336647458375_1335842234009&_=1335842234045](https://twitter.com/status/user_timeline/msdn.json?count=10&callback=jQuery1706531336647458375_1335842234009&_=1335842234045)

回复是……

```
jQuery1706531336647458375_1335842234009( /* data */ ); 
```

然后 jQuery 将数据包装在 script 标签中并将其附加到正文中。

注意请求中的回调如何匹配响应中的函数调用。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:09:52.717

你不能。阅读跨站点脚本。

基本上，您将需要通过托管服务器代理您的请求。

# batch-file - 如何使用 cmd/批处理文件删除目录中名称为 x 的所有文件夹

> ID：10393082
> 
> 赞同：9
> 
> 时间：2012-05-01T03:08:24.397
> 
> 标签：batch-file, cmd

我有一个名为 x 的文件夹，其中包含许多子文件夹和文件。我想删除 x 中存在的名为 y 的文件夹及其所有子文件夹。必须删除的所述文件夹可能包含也可能不包含任何文件。我相信我可以使用 cmd 或某种批处理文件来做到这一点，但我是一个命令行新 bi，真的可以使用一些帮助。

一个简单的事情是 rd 文件夹的名称，它可以工作，但我相信有比单独删除每个文件夹更好的方法......就像遍历所有文件夹的循环一样。

谢谢

编辑：澄清一下，我在 x 中有 y（需要删除的文件夹），它可以在 x 的任何子文件夹中，并且可以处于任何深度。我也在看答案，我可能需要一些时间才能接受任何答案。请多多包涵 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T15:09:59.110

这是另一个解决方案，用于描述脚本的每个部分：

```
@Echo OFF
REM Important that Delayed Expansion is Enabled
setlocal enabledelayedexpansion
REM This sets what folder the batch is looking for and the root in which it starts the search:
set /p foldername=Please enter the foldername you want to delete: 
set /p root=Please enter the root directory (ex: C:\TestFolder)
REM Checks each directory in the given root
FOR /R %root% %%A IN (.) DO (
    if '%%A'=='' goto end   
    REM Correctly parses info for executing the loop and RM functions
    set dir="%%A"
    set dir=!dir:.=!
    set directory=%%A
    set directory=!directory::=!
    set directory=!directory:\=;!   
    REM Checks each directory
    for /f "tokens=* delims=;" %%P in ("!directory!") do call :loop %%P
)
REM After each directory is checked the batch will allow you to see folders deleted.
:end
pause
endlocal
exit
REM This loop checks each folder inside the directory for the specified folder name. This allows you to check multiple nested directories.
:loop
if '%1'=='' goto endloop
if '%1'=='%foldername%' (
    rd /S /Q !dir!
    echo !dir! was deleted.
)
SHIFT
goto :loop
:endloop 
```

如果您不想被提示，您可以`/p`从初始变量前面取出并在后面输入它们的值：`=`

```
set foldername=
set root= 
```

您还可以删除`echo`循环部分和`pause`末尾部分，以便批处理以静默方式运行。

它可能有点复杂，但代码可以应用于许多其他用途。

我测试了它在以下位置寻找相同文件夹名称的多个`qwerty`实例`C:\Test`：

```
C:\Test\qwerty
C:\Test\qwerty\subfolder
C:\Test\test\qwerty
C:\Test\test\test\qwerty 
```

剩下的就是：

```
C:\Test\
C:\Test\test\
C:\Test\test\test\ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T03:14:22.717

```
FOR /D /R %%X IN (fileprefix*) DO RD /S /Q "%%X" 
```

小心使用它...

对于 RD 命令：

```
/S      Removes all directories and files in the specified directory
        in addition to the directory itself.  Used to remove a directory
        tree.
/Q      Quiet mode, do not ask if ok to remove a directory tree with /S 
```

FOR命令用于循环遍历文件或变量的列表，选项很容易记住，仅目录递归。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T18:14:56.087

此类主题的一个常见问题是，如果目标文件夹存在多个级别的实例，大多数方法都会导致错误，因为当删除高级文件夹时，它下面的所有文件夹都会消失。例如：

```
C:\X\Y\subfolder
C:\X\Y\subfolder\one\Y
C:\X\Y\subfolder\two\Y
C:\X\Y\subfolder\three\Y
C:\X\test
C:\X\test\test 
```

上一个示例生成了一个包含 4 个名为 Y 的文件夹的列表，这些文件夹将被删除，但在第一个文件夹被删除后，其余三个名称不再存在，在尝试删除它们时会导致错误消息。我了解在您的情况下这是一种可能性。

为了解决这个问题，文件夹必须按*自下而上的顺序*删除，即最里面的文件夹必须先删除，最顶层的文件夹必须最后删除。实现这一点的方法是通过*递归子程序*：

```
@echo off
rem Enter into top level folder, process it and go back to original folder
pushd x
call :processFolder
popd
goto :EOF

:processFolder
rem For each folder in this level
for /D %%a in (*) do (
   rem Enter into it, process it and go back to original
   cd %%a
   call :processFolder
   cd ..
   rem If is the target folder, delete it
   if /I "%%a" == "y" (
      rd /S /Q "%%a"
   )
)
exit /B 
```

尽管在这种特殊情况下，由其他方法引起的问题只是多个错误消息，但在其他情况下，这种处理顺序是基本的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-25T11:10:30.057

使用以下命令制作 .bat：

```
del /q "C:\Users\XXX\AppData\Local\Temp\*"

FOR /D %%p IN ("C:\Users\XXX\AppData\Local\Temp\*.*") DO rmdir "%%p" /s /q 
```

# regex - 将基本 Access 查询条件表示为正则表达式

> ID：10393087
> 
> 赞同：3
> 
> 时间：2012-05-01T03:09:30.583
> 
> 标签：regex, ms-access, vba

我熟悉 Access 的查询和过滤条件，但我不确定如何将类似的语句表达为正则表达式模式。我想知道是否有人可以帮助将它们与我理解的一些简单示例联系起来。

如果我使用正则表达式来匹配 Access 等字段，我将如何表达以下语句？示例与此[访问查询和过滤条件](http://www.fontstuff.com/access/acctut06.htm)网页上的示例类似。与 Access 一样，不区分大小写。

1.  “伦敦”

    与单词 London 完全匹配的字符串。

2.  “伦敦”或“巴黎”

    与单词 London 或 Paris 完全匹配的字符串。

3.  不是“伦敦”

    任何字符串，但伦敦。

4.  像“S*”

    任何以字母 s 开头的字符串。

5.  像“*st”

    任何以字母 st 结尾的字符串。

6.  像“*the*dog*”

    任何包含单词 'the' 和 'dog' 以及之前、中间或结尾的任何字符的字符串。

7.  像“[AD]*”

    任何以字母 A 到 D 开头的字符串，后跟任何其他字符串。

8.  不像“*伦敦*”

    任何不包含单词 London 的任何字符串。

9.  不像“L*”

    任何不以 L 开头的字符串。

10.  像“L*”而不像“London*”

    任何以字母 L 开头但不是单词 London 的字符串。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-01T08:37:30.957

正则表达式比您在 Access SQL 中用于创建条件的任何模式都强大得多。如果您将自己局限于这些类型的模式，您将错过正则表达式的大部分真正有趣的功能。

例如，您无法搜索日期或提取 IP 地址、简单的电子邮件或 URL 检测或验证、基本参考代码验证（例如询问订单参考代码是否遵循强制编码结构，例如类似的内容`PO123/C456`）等内容， ETC。

正如@Smandoli 所提到的，您最好忘记对模式匹配的先入之见，并深入研究正则表达式语言。

[我发现Mastering Regular Expressions](http://shop.oreilly.com/product/9780596528126.do)这本书非常宝贵，但工具是自由尝试正则表达式模式的最佳工具；我使用[RegexBuddy](http://www.regular-expressions.info./regexbuddy.html)，但还有[其他可用的工具](http://alternativeto.net/software/regexbuddy/)。

### 基本匹配

现在，关于您的列表，并使用相当标准化的正则表达式语法：

1.  “伦敦”

    与单词 London 完全匹配的字符串。

    `^London$`

2.  “伦敦”或“巴黎”

    与单词 London 或 Paris 完全匹配的字符串。

    `^(London|Paris)$`

3.  不是“伦敦”

    任何字符串，但伦敦。

    您匹配`^London$`并反转结果 ( `NOT`)

4.  像“S*”

    任何以字母 s 开头的字符串。

    `^s`

5.  像“*st”

    任何以字母 st 结尾的字符串。

    `st$`

6.  像“*the*dog*”

    任何包含单词 'the' 和 'dog' 以及之前、中间或结尾的任何字符的字符串。

    `the.*dog`

7.  像“[AD]*”

    任何以字母 A 到 D 开头的字符串，后跟任何其他字符串。

    `^[A-D]`

8.  不像“*伦敦*”

    任何不包含单词 London 的任何字符串。

    反转匹配结果`London`（您可以使用[负前瞻](http://www.regular-expressions.info./lookaround.html)，例如：
    `^(.(?!London))*$`，但我认为它不适用于 Access 可用的更基本的 Regex 引擎）。

9.  不像“L*”

    任何不以 L 开头的字符串。

    `^[^L]`正如我们在上面看到的，单个字符的否定匹配比整个单词的否定匹配更容易。

10.  像“L*”而不像“London*”

    任何以字母 L 开头但不是单词 London 的字符串。

    `^L(?!ondon).*$`

### 在 SQL 标准中使用正则表达式

在 Access 中，创建可直接在 SQL 查询中使用的用户定义函数很容易。
要在查询中使用正则表达式匹配，请将此函数放在模块中：

```
' ----------------------------------------------------------------------'
' Return True if the given string value matches the given Regex pattern '
' ----------------------------------------------------------------------'
Public Function RegexMatch(value As Variant, pattern As String) As Boolean
    If IsNull(value) Then Exit Function
    ' Using a static, we avoid re-creating the same regex object for every call '
    Static regex As Object
    ' Initialise the Regex object '
    If regex Is Nothing Then
        Set regex = CreateObject("vbscript.regexp")
        With regex
            .Global = True
            .IgnoreCase = True
            .MultiLine = True
        End With
    End If
    ' Update the regex pattern if it has changed since last time we were called '
    If regex.pattern <> pattern Then regex.pattern = pattern
    ' Test the value against the pattern '
    RegexMatch = regex.test(value)
End Function 
```

然后您可以在查询条件中使用它，例如在*PartTable*表中查找所有匹配`screw 18mm`类似`Pan Head Screw length 18 mm`或什至`SCREW18mm`等变体的部分。

```
SELECT PartNumber, Description
FROM   PartTable
WHERE  RegexMatch(Description, "screw.*?d+\s*mm") 
```

### 警告

*   因为正则表达式匹配使用旧的脚本库，所以正则表达式语言的风格比 .Net 中可用于其他编程语言的语言更受限制。
    它仍然相当强大，因为它或多或少与 JavaScript 使用的相同。
    阅读有关[VBScript 正则表达式引擎](http://www.regular-expressions.info/vbscript.html)的信息，以检查您能做什么和不能做什么。

*   更糟糕的是，使用这个库的正则表达式匹配可能相当慢，你应该非常小心不要过度使用它。

也就是说，它有时非常有用。例如，我使用正则表达式来清理来自用户的数据输入，并检测具有相似模式的条目，这些模式应该被规范化。
使用得当，正则表达式可以增强数据一致性，但要谨慎使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T03:31:36.147

正则表达式最初很难闯入。老实说，寻找用勺子喂的例子并没有像“弄脏你的手”那样有帮助。此外，MS Access 也不是一个好的跳板。正则表达式不能很好地与 SQL 查询过程“同源”——不是在应用程序中，也不是在心理方面。您需要使用文本编辑器处理一些文本文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-15T18:55:05.153

[我们的解决方案是在 OpenCalc（Apache OpenOffice 的一部分， https:](https://www.openoffice.org/) //www.openoffice.org/）中打开 Excel 文件，它为查找和替换提供了看似完整的正则表达式。

[我们在http://regexr.com/](http://regexr.com/)测试正则表达式

# iphone - cellForRowAtIndexPath 的问题：

> ID：10393089
> 
> 赞同：-3
> 
> 时间：2012-05-01T03:09:51.000
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我收到以下错误：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '-[__NSCFArray objectAtIndex:]: index (0) beyond bounds (0)'
*** First throw call stack:
(0x372df88f 0x357e5259 0x372df789 0x372df7ab 0x372379c3 0x2a815d 0x2a6dad 0x339ec0a3 0x339eb181 0x339ea90b 0x3398f0df 0x3723e1fb 0x34216aa5 0x342166bd 0x3421a843 0x3421a57f 0x342124b9 0x372b3b1b 0x372b1d57 0x372b20b1 0x372354a5 0x3723536d 0x32142439 0x339b9e7d 0x3bf7 0x3ba8)
terminate called throwing an exceptionkill 
```

这是我的代码：

```
#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    if (tableView.tag == kTableViewCatalog){
        NSLog(@"CATALOG IMAGES IS %d",[self.catalogImages_ count] );
        return [self.catalogImages_ count];
    } else if (tableView.tag == kTableViewFriends){
         NSLog(@"USER IMAGES IS %d",[self.userProfileImages_ count] );
        return [self.userProfileImages_ count];
    } else if (tableView.tag == kTableViewNews) {
         NSLog(@"STORIES IMAGES IS %d",[self.stories_ count] );
        return [self.stories_ count];
    }

    NSLog(@"OH NOO");
    return 0;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSInteger row = [indexPath row];

    NSString *CellIdentifier = @"NewsItemCellIdentifier";
    NewsItemCell *cell = (NewsItemCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[NewsItemCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        //cell.newsRackController = self.newsRackController;
    }

    if (tableView.tag == kTableViewNews){
         NewsStory *story = [self.stories_ objectAtIndex:row];
        [cell setNewsStory:story];
        return cell;
    } else if (tableView.tag == kTableViewCatalog || tableView.tag == kTableViewFriends){
        [cell setNewsStory:nil];
        NewsStory *story = [NewsStory new];
        if (tableView.tag == kTableViewCatalog){
             NSLog(@"SETTING CELL FOR CATALOG");
            [cell setImageWithURL:[self.catalogImages_ objectAtIndex:indexPath.row]];
        } else if (tableView.tag == kTableViewFriends){
            NSLog(@"SETTING CELL FOR FRIENDS");
            [cell setImageWithURL:[self.userProfileImages_ objectAtIndex:indexPath.row]];
        }

        [story release];
        return cell;
    } 

    return nil;
}

#pragma mark -
#pragma mark Table view delegate

- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    return indexPath;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
//    self.currentIndexPath = indexPath;
//    [self tappedAtNewsItem:[self.stories_ objectAtIndex:[indexPath row]]];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if([indexPath row] < [self.stories_ count]) {
        return pageHeight;
    }
    return 0;
} 
```

所以我在 UITableViewCell 子类中有一个 tableView，由于某种原因，当我滚动时，我得到了上面的错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:51:22.890

```
#pragma mark -
#pragma mark Table view data source

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    if (tableView.tag == kTableViewCatalog){
        NSLog(@"CATALOG IMAGES IS %d",[self.catalogImages_ count] ); 
//Check here how many elements in this array [self.catalogImages_] ?

        return [self.catalogImages_ count];
    } else if (tableView.tag == kTableViewFriends){
         NSLog(@"USER IMAGES IS %d",[self.userProfileImages_ count] );
//Check here how many elements in this array [self.userProfileImages_] ?

        return [self.userProfileImages_ count];
    } else if (tableView.tag == kTableViewNews) {
         NSLog(@"STORIES IMAGES IS %d",[self.stories_ count] );
//Check here how many elements in this array [self.stories_] ?

        return [self.stories_ count];
    }

else{
    NSLog(@"OH NOO");
    return 0;
}

}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSInteger row = [indexPath row];

    NSString *CellIdentifier = @"NewsItemCellIdentifier";
    NewsItemCell *cell = (NewsItemCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[NewsItemCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        //cell.newsRackController = self.newsRackController;
    }

    if (tableView.tag == kTableViewNews){
         NewsStory *story = [self.stories_ objectAtIndex:row];
//Check here how many elements in this array [self.stories_] ?

        [cell setNewsStory:story];
        return cell;
    } else if (tableView.tag == kTableViewCatalog || tableView.tag == kTableViewFriends){
        [cell setNewsStory:nil];
        NewsStory *story = [NewsStory new];
        if (tableView.tag == kTableViewCatalog){
             NSLog(@"SETTING CELL FOR CATALOG");
            [cell setImageWithURL:[self.catalogImages_ objectAtIndex:indexPath.row]];
//Check here how many elements in this array [self.catalogImages_] ?

        } else if (tableView.tag == kTableViewFriends){
            NSLog(@"SETTING CELL FOR FRIENDS");
            [cell setImageWithURL:[self.userProfileImages_ objectAtIndex:indexPath.row]];
//Check here how many elements in this array [self.userProfileImages_] ?

        }

        [story release];
        return cell;
    } 

    return nil;
}

#pragma mark -
#pragma mark Table view delegate

- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    return indexPath;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
//    self.currentIndexPath = indexPath;
//    [self tappedAtNewsItem:[self.stories_ objectAtIndex:[indexPath row]]];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if([indexPath row] < [self.stories_ count]) {
        return pageHeight;
    }
    return 0;
}

// Check every where the size of each array. Actually the problem with you is this, the size is low of given array and you are trying to access beyond size. 

// numberOfRowsInSection ---> fixed with hard coded -- return 5; in each case.
 and fill your all arrays at least with 6 or 7 or more elements and then try .
I think you will get the main point. 
```

# c++ - CPU时间始终为零:(

> ID：10393093
> 
> 赞同：1
> 
> 时间：2012-05-01T03:10:51.640
> 
> 标签：c++, c, time, cpu

我正在尝试使用以下代码测量 CPU 时间。

```
timespec time1, time2, temp_time;

clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time1);
 int i;
 int cpu_sum = 0;

 for (i = 0; i < nelements; i++) {

  cpu_sum += array[i];

 }    
clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time2);
temp_time.tv_sec = time2.tv_sec - time1.tv_sec;
printf( sum: %d using CPU in %lf ms \n",cpu_sum, temp_time.tv_sec); 
```

但我总是得到 0.000 毫秒的时间。知道这里出了什么问题。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T03:24:08.743

1.  您通过将错误的参数类型传递给`printf`( `time_t`，这可能是`long`，而不是`double`) 来调用未定义的行为。

2.  `tv_sec`只包含时间的整个秒部分。您还需要使用`tv_nsec`来获取纳秒部分。

尝试类似：

```
temp_time.tv_sec = time2.tv_sec - time1.tv_sec;
temp_time.tv_nsec = time2.tv_nsec - time2.tv_nsec;
if (temp_time.tv_nsec < 0) {
    temp_time.tv_nsec += 1000000000;
    temp_time.tv_sec--;
}
printf("%lld.%.9ld\n", (long long)temp_time.tv_sec, (long)temp_time.tv_nsec); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T03:24:23.737

以上内容不会按原样编译，但有一个明显的问题：您只查看`tv_sec`字段而不是`tv_nsec`字段。这两个`tv_sec`测量整秒的值很可能是相同的，因为经过的 CPU 时间不到整整一秒。

减去两个 timespec 结构值（未经测试）：

```
void ts_delta(struct timespec *result, struct timespec *a, struct timespec *b) {
    int borrow = 0;
    long n = a->tv_nsec - b->tv_nsec;

    if (n < 0) { /* nsec underflow; borrow 1 from seconds */
        n += 1000000000L;
        borrow = 1;
    }
    result->tv_nsec = n;
    result->tv_sec = a->tv_sec - b->tv_sec - borrow;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:23:22.830

我假设您正在尝试使用 Linux。

在我的系统中，它打印如下。你可以检查并让我知道它是否有效。

```
ayub@gentux ~ $ cat cputime.c
#include <stdio.h>
#include <time.h>

int main(void)
{
  struct timespec time1, time2, temp_time;

  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time1);
  int i;
  int cpu_sum = 0;
  static int array[1000]; /* 'static' to make the array initialized to zero by default (for demo) */
  int nelements = 1000;
  long diff = 0;

  array[0] = 10;
  for (i = 0; i < nelements; i++) {
    cpu_sum += array[i];
  }    
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time2);
  temp_time.tv_sec = time2.tv_sec - time1.tv_sec;
  temp_time.tv_nsec = time2.tv_nsec - time1.tv_nsec;
  diff = temp_time.tv_sec * 1000000000 + temp_time.tv_nsec; /* total ns */
  printf("Sum: %d using CPU in %lf ms \n", cpu_sum, (double) diff/1000000); /* now we print as milisecond */

  return 0;
}

ayub@gentux ~ $ gcc -o cputime cputime.c -lrt
ayub@gentux ~ $ time ./cputime
Sum: 10 using CPU in 0.003197 ms 

real    0m0.001s
user    0m0.000s
sys     0m0.000s
ayub@gentux ~ $ ./cputime 
Sum: 10 using CPU in 0.002599 ms 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-10T10:31:44.407

gnu libc 手册有一些很好的信息，甚至包括一个示例减法函数

[http://www.gnu.org/software/libc/manual/html_node/Elapsed-Time.html](http://www.gnu.org/software/libc/manual/html_node/Elapsed-Time.html)

# java - 如何在java中使用正则表达式获取子字符串？

> ID：10393095
> 
> 赞同：1
> 
> 时间：2012-05-01T03:11:16.103
> 
> 标签：java, regex

```
String str = "#aaa# #bbb# #ccc#   #ddd#" 
```

谁能告诉我如何使用常规获取子字符串“aaa”，“bbb”，“ccc”，“ddd”（“##”对中的子字符串，“##”的数量未知）表达？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T03:21:10.890

使用[正则表达式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)：

```
Pattern p = Pattern.compile("#(\\w+)#");
String input = "#aaa# #bbb# #ccc#   #ddd#";
Matcher m = p.matcher(input);

List<String> parts = new ArrayList<String>();
while (m.find())
{
    parts.add(m.group(1));
}

// parts is [aaa, bbb, ccc, ddd] 
```

[http://ideone.com/i1IAZ](http://ideone.com/i1IAZ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T03:14:20.930

试试这个：

```
String str = "1aaa2 3bbb4 5ccc6   7ddd8";
String[] data = str.split("[\\d ]+"); 
```

结果数组中的每个位置都将包含一个子字符串，但第一个为空的除外：

```
System.out.println(Arrays.toString(data));
> [, aaa, bbb, ccc, ddd] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T03:54:12.063

这是另一种使用方法`StringTokenizer`

```
 String str="#aaa# #bbb# #ccc#   #ddd#";
    //# and space are the delimiters
    StringTokenizer tokenizer = new StringTokenizer(str, "# ");
    List<String> parts = new ArrayList<String>(); 
    while(tokenizer.hasMoreTokens())
       parts.add(tokenizer.nextToken()); 
```

# python - 函数 vs lambda 语句

> ID：10393096
> 
> 赞同：0
> 
> 时间：2012-05-01T03:11:16.570
> 
> 标签：python

Lambda让我有点困惑，这就是我所拥有的：

```
lmb = lambda d: datetime.datetime.strptime(d["Date[G]"]+"-"+d["Time[G]"], "%d-%b-%Y-%H:%M:%S.%f") 
```

如果我写一个这样的函数：

```
def time(d):
    t = datetime.datetime.strptime(d["Date[G]"]+"-"+d["Time[G]"], "%d-%b-%Y-%H:%M:%S.%f")
    return t.strftime("%d-%b-%Y-%H") 
```

我可以`return t.strftime("%d-%b-%Y-%H")`。

`t.strftime("%d-%b-%Y-%H")`我可以在我的 lambda 语句中嵌入类似的东西吗？

**编辑**

我试过这个：

```
lmb = lambda d: datetime.datetime.strptime(d["Date[G]"]+"-"+d["Time[G]"], "%d-%b-%Y-%H:%M:%S.%f").strftime("%d-%b-%Y-%H") 
```

但它返回：

> AttributeError：“str”对象没有属性“strftime”

使用该功能不会发生这种情况..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T03:16:45.673

是的，你可以这样做：

```
lmb = lambda d: datetime.datetime.strptime(d["Date[G]"]+"-"+d["Time[G]"], "%d-%b-%Y-%H:%M:%S.%f").strftime("%d-%b-%Y-%H") 
```

我在 Python 2.7 上对此进行了测试：

```
>>> lmb = lambda d: datetime.datetime.strptime(d["Date[G]"]+"-"+d["Time[G]"], "%d-%b-%Y-%H:%M:%S.%f").strftime("%d-%b-%Y-%H")
>>> lmb({"Date[G]": "22-Apr-2012", "Time[G]": "07:23:24.123"})
'22-Apr-2012-07' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T03:16:55.750

当然：

```
lmb = lambda d: datetime.datetime.strptime(d["Date[G]"]+"-"+d["Time[G]"], "%d-%b-%Y-`%H:%M:%S.%f").strftime("%d-%b-%Y-%H") 
```

但是使用函数很快就有意义了。

# jquery - 在等待服务器处理代码时显示 Modalbox

> ID：10393097
> 
> 赞同：0
> 
> 时间：2012-05-01T03:11:23.570
> 
> 标签：jquery, asp.net, modal-dialog

我想要的是在单击按钮时，代码必须显示模态框，然后代码隐藏继续处理其余部分。

按钮：

```
<asp:Button ID="Button1" runat="server" Text="Start"></asp:Button> 
```

然后在代码隐藏 - 添加`onclick`到 Button1：

```
Generate_Button.Attributes.Add("onclick", "shopModalPopup(); return false;") 
```

我有一个 Button1.click 的事件处理程序：

```
Protected Sub Button1_Click(sender As Object, e As System.EventArgs) Handles Button1.Click
    'The process goes here
End Sub 
```

javascript和模态框：

```
<script>
var grid_modal_options = {
    height: 200,
    width: 500,
    resizable: false,
    modal: true
};

function shopModalPopup() {
    $("#dialog-form").dialog(grid_modal_options);
    $("#dialog-form").parent().appendTo('form:first');
}
</script>

<div id="dialog-form" title="Processing Request" style="display: none;">
    <div class="in">
        <center><h2> Please wait while we're processing your request. </h2></center>
    </div>
</div> 
```

上面的代码确实显示了模态框，但不处理按钮单击处理程序上的下一个代码。我怎样才能做到这一点？非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:22:45.660

在`return false`您的 JS onclick 处理程序中，将停止执行默认表单操作，因此您的服务器端 ASP.NET 方法将永远不会被调用。

如果删除`return false`，则将显示模式对话框并进行服务器端调用。但是，它不会是一个适当的异步调用，它将是一个完整的回发。因此，每当服务器方法完成其业务时，页面都会进行完全刷新。这将具有删除您的模态对话框的效果（因为页面将再次完全呈现），但我想这可能不是您想要的。您可能希望模式对话框在异步调用完成时向用户显示一些消息，而不刷新页面，对吧？

如果您确实需要适当的异步调用，我建议`[WebMethod]`您在代码隐藏中使用 jQuery 和页面方法。查看[Dave Ward](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)的这篇文章，了解如何执行此操作的精彩教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T05:07:55.800

为什么不直接放在一个OnClientClick中，如图：

```
<asp:Button ID="Button1" runat="server" Text="Start" OnClientClick="shopModalPopup"></asp:Button> 
```

# c# - 在 C# 中使用下拉列表计算可变折扣

> ID：10393098
> 
> 赞同：1
> 
> 时间：2012-05-01T03:11:24.363
> 
> 标签：c#, asp.net, drop-down-menu, operators

嗨，我有一个下拉列表，可以选择其中的项目数量。1-8。以每件商品为例，如果他们购买一件，他们将获得 25% 的折扣。如果他们买了 2 件，他们得到 30% 3 35%，（所以每次他们购买一件商品时，它会上涨 5%。

有什么更简单的方法可以做到这一点？我的似乎很乏味。你能提供一个示例代码吗？

这就是我所拥有的，但我必须做很多 if 语句。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (DropDownList1.SelectedValue == "1")
    {
        int test = Convert.ToInt32(DropDownList1.SelectedValue);
        TextBox1.Text = Convert.ToString(test * (199 * (1 - 0.25)));
    }
    else if (DropDownList1.SelectedValue == "2")
    {
        int test = Convert.ToInt32(DropDownList1.SelectedValue);
        TextBox1.Text = Convert.ToString(test * (199 * (1 - 0.30)));
    }
    else if (DropDownList1.SelectedValue == "3")
    {
        int test = Convert.ToInt32(DropDownList1.SelectedValue);
        TextBox1.Text = Convert.ToString(test * (199 * (1 - 0.35)));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T03:16:41.977

您应该在选定索引上工作。因为它给出了一个数字。

将该数字乘以`0.05 (0.35 -0.30 = 0.05, 0.30-0.25 = 0.05)`并添加`0.25`

比方说`Selected Index`那时`0``(0 * 0.05) + 0.25 = 0.25`

如果是`1`那么`(1 * 0.05) + 0.25 = 0.30`

等等....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T03:19:23.330

试试这个，但一定要检查选择的值不是 0

```
int test = Convert.ToInt32(DropDownList1.SelectedValue);
if(test!=0)
{
    TextBox1.Text = Convert.ToString(test * (199 * (1 - (0.25+(5*(test-1))))))
} 
```

# windows - 如果我调用 GetOpenFileNameA，GetOpenFileNameW 会导致 FNERR_INVALIDFILENAME 或 CDERR_INITIALIZATION

> ID：10393102
> 
> 赞同：5
> 
> 时间：2012-05-01T03:12:28.793
> 
> 标签：windows, d

这是使用的代码`GetOpenFileNameW`：

```
import core.sys.windows.windows;
import std.stdio, std.string, std.utf;

pragma(lib, "comdlg32");

// Fill in some missing holes in core.sys.windows.windows.
extern (Windows) DWORD CommDlgExtendedError();
enum OFN_FILEMUSTEXIST = 0x001000;

void main()
{
    auto buf = new wchar[1024];

    OPENFILENAMEW ofn;
    ofn.lStructSize = ofn.sizeof;
    ofn.lpstrFile = buf.ptr;
    ofn.nMaxFile = buf.length;
    ofn.lpstrInitialDir = null;
    ofn.Flags = OFN_FILEMUSTEXIST;

    BOOL retval = GetOpenFileNameW(&ofn);
    if (retval == 0) {
        // Get 0x3002 for W and 0x0002 for A. ( http://msdn.microsoft.com/en-us/library/windows/desktop/ms646916(v=vs.85).aspx )
        throw new Exception(format("GetOpenFileName failure: 0x%04X.", CommDlgExtendedError()));
    }

    writeln(buf);
} 
```

这导致`FNERR_INVALIDFILENAME`，但我没有看到任何我没有填写的非可选字符串。这是代码（仅显示差异）`GetOpenFileNameA`：

```
auto buf = new char[1024];

OPENFILENAMEA ofn;
// ...
BOOL retval = GetOpenFileNameA(&ofn); 
```

这导致`CDERR_INITIALIZATION`，而 MSDN 给我的唯一详细说明是

```
The common dialog box function failed during initialization. 
This error often occurs when sufficient memory is not available. 
```

这是在 Windows 7 64 位 DMD v2.059 上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T03:29:30.290

`buf`必须完全归零。这里的问题是`wchar.init == wchar.max`（出于错误检测的原因），所以您的数组本质上是 1024 个`wchar.max`. 一个简单的`buf[] = 0;`应该解决这个问题。

# django - _meta.get_field_by_name(django) 中的 direct 是什么意思

> ID：10393103
> 
> 赞同：1
> 
> 时间：2012-05-01T03:12:31.340
> 
> 标签：django, meta

我不明白“直接”是用来做什么的。

我做了一些关于 _meta.get_field_by_name 的谷歌研究，发现 [给定一个 QS 字段查找键，如何跨连接查找字段类型？](https://stackoverflow.com/questions/7260539/given-a-qs-field-lookup-key-how-to-find-fields-type-across-joins)

但是“ORM 的查找”在 django 中是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T09:39:17.633

`_name_map`从Django`Options`对象中属性的填充来看`django.db.models.options`，它看起来与您使用的字段名称是在您的字段中声明的字段还是从设置中`Model`创建的名称有关。`related name`恐怕我不熟悉相关名称的东西，但代码看起来像：

```
for f, model in self.get_all_related_m2m_objects_with_model():
    cache[f.field.related_query_name()] = (f, model, False, True)
for f, model in self.get_all_related_objects_with_model():
    cache[f.field.related_query_name()] = (f, model, False, False)
for f, model in self.get_m2m_with_model():
    cache[f.name] = (f, model, True, True)
for f, model in self.get_fields_with_model():
    cache[f.name] = (f, model, True, False)
for f in self.virtual_fields:
    if hasattr(f, 'related'):
        cache[f.name] = (f.related, None if f.model == self.model else f.model, True, False) 
```

因此，您只能看到前两个 for 循环使用具有`direct`as`False`和使用的条目填充缓存`related_query_name`。也许其他人可以在您询问后的 2 年和 1/2 年内更清楚地了解它，或者更有可能，您已经自己弄清楚了:)

# android - ListView Onclick？

> ID：10393106
> 
> 赞同：1
> 
> 时间：2012-05-01T03:13:25.660
> 
> 标签：android, android-listview

我有一个关于将 onClick 添加到 ListView 的问题，我尝试尽可能多地遵循 Android NotePad 教程，但是对于我的布局，我不太明白如何添加它。

这是活动类，它简单地填充视图

```
 public class RemoveForm extends ListActivity {
private DB_Conn DB_Handler;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        DB_Handler = new DB_Conn(this);
        DB_Handler.open();
        fillData();

}

protected void onListItemClick(View view) {
    Context context = getApplicationContext();
    CharSequence text = "Hello toast!";
    int duration = Toast.LENGTH_SHORT;

    Toast toast = Toast.makeText(context, text, duration);
    toast.show();

}

private void fillData() {
    // Get all of the notes from the database and create the item list
    Cursor c = DB_Handler.fetchAll();
    startManagingCursor(c);
    String[] from = new String[] { DB_Conn.KEY_MODULECODE,
        DB_Conn.KEY_DAY,
        DB_Conn.KEY_TIME,
        DB_Conn.KEY_DURATION,
        DB_Conn.KEY_TYPE,
        DB_Conn.KEY_ROOM,DB_Conn.KEY_ROWID };
int[] to = new int[] { R.id.MODULECODE,
        R.id.DAY,
        R.id.TIME,
        R.id.DURATION,
        R.id.TYPE,
        R.id.ROOM,
        R.id.ROWID};

// Now create an array adapter and set it to display using our row
    SimpleCursorAdapter entry =
    new SimpleCursorAdapter(this, R.layout.list, c, from, to);
    setListAdapter(entry);
}
} 
```

这是每条记录的 xml。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:orientation="vertical">
    <LinearLayout android:id="@+id/linearLayout1" 
        android:layout_height="wrap_content"
        android:layout_width="match_parent" 
        android:layout_weight="1"
        android:baselineAligned="false">
    </LinearLayout>
    <LinearLayout android:id="@+id/linearLayout2" android:layout_height="wrap_content"
    android:layout_width="match_parent" android:layout_weight="1"
    android:baselineAligned="false">
    </LinearLayout>
    <RelativeLayout 
        android:layout_height="wrap_content" 
        android:id="@+id/relativeLayout1" android:layout_width="match_parent">
        <TextView android:id="@+id/ROWID" 
                android:text="TextView"
                 android:layout_marginRight="5dip"
                  android:layout_alignParentLeft="true"
                   android:layout_height="wrap_content" 
                   android:layout_width="wrap_content"></TextView>
        <TextView android:id="@+id/MODULECODE" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:text="TextView" 
                android:layout_toRightOf="@+id/ROWID" 
                android:layout_alignTop="@+id/ROWID"></TextView>
        <TextView android:layout_marginLeft="25dip" 
                android:id="@+id/DAY" 
                android:layout_width="50dip" 
                android:layout_height="wrap_content" 
                android:text="TextView" 
                android:layout_below="@+id/MODULECODE" 
                android:layout_alignLeft="@+id/MODULECODE"></TextView>
        <TextView android:id="@+id/TIME" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="TextView" 
        android:layout_toRightOf="@+id/DAY" 
        android:layout_alignTop="@+id/DAY" 
        android:layout_alignBottom="@+id/DAY"></TextView>
        <TextView android:id="@+id/DURATION" 
        android:layout_width="wrap_content"
         android:layout_height="wrap_content" 
         android:text="TextView" 
         android:layout_toRightOf="@+id/TIME" 
         android:layout_alignTop="@+id/TIME" 
         android:layout_alignBottom="@+id/TIME"></TextView>
        <TextView android:id="@+id/ROOM" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="TextView" 
        android:layout_toRightOf="@+id/MODULECODE" 
        android:layout_alignTop="@+id/MODULECODE"
        android:layout_alignBottom="@+id/MODULECODE"></TextView>
        <TextView android:id="@+id/TYPE" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="TextView" 
        android:layout_toRightOf="@+id/ROOM" 
        android:layout_alignTop="@+id/ROOM" 
        android:layout_alignBottom="@+id/ROOM"></TextView>
    </RelativeLayout> 
```

如果有人可以提供帮助，我现在将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T03:19:48.910

你必须[覆盖](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)，

```
 @Override
 protected void onListItemClick(ListView l, View v, int position, long id) {

 } 
```

# php - 查找具有特定文本的文件并删除该文本

> ID：10393107
> 
> 赞同：0
> 
> 时间：2012-05-01T03:13:48.090
> 
> 标签：php, linux, command-line, ssh

是否可以使用包含已定义文本的命令行在服务器中搜索文件。例如“这是被 slacker 破解的！” 只删除那句话？

此外，将来如何防止这种情况，不确定他们如何在每个文件中添加文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:19:15.560

使用 sed

[http://www.brunolinux.com/02-The_Terminal/Find_and%20Replace_with_Sed.html](http://www.brunolinux.com/02-The_Terminal/Find_and%20Replace_with_Sed.html)

# c++ - 表达式必须有一个常量值

> ID：10393123
> 
> 赞同：0
> 
> 时间：2012-05-01T03:16:27.833
> 
> 标签：c++, arrays, input

我正在尝试从字符串输入中创建一个数组。

```
string input;
getline(cin,input);
string inputarray1[100];
istringstream pp(input);
int* inputPosition=0;
while (!pp.eof())
{
    getline( pp, inputarray1[*inputPosition], ' ' );
    inputPosition++;
}
int* a = inputPosition;
string halp[a]; 
```

我正在使用 getline 解析我的输入（连同 istringstream）并将其放入一个数组中，但是如何创建一个没有额外空位置的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T03:23:14.093

使用来自标题的向量`<vector>`

```
vector<string> inputArray;
while (getline(pp, input, ' '))
    inputArray.push_back(input); 
```

可以使用 获取字符串的数量`inputArray.size()`，并且您可以访问单个元素，就像使用数组一样，`inputArray[index]`。

请注意，`operator>>`它以空格分隔，因此您也可以这样做（除非您出于某种原因想要以不同的方式处理制表符）

```
while (pp >> input)
    inputArray.push_back(input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:18:48.777

我不是 100% 清楚你的问题，但听起来你真的想使用[哈希表](http://en.wikipedia.org/wiki/Hash_table)而不是数组。这将使您可以将用户输入映射到其他内容，而无需您提到的空数组位置。

# asp.net - Asp.Net App_Code 类在 Visual Studio 中突出显示为“未声明”，但仍可编译

> ID：10393124
> 
> 赞同：0
> 
> 时间：2012-05-01T03:16:27.937
> 
> 标签：asp.net

我继承了可疑血统的 VB.Net ASP.Net 网站（不是 Web 应用程序）。

在 Visual Studio 中编辑时：当 App_Code 中的类 ('App_Code\EditClass.vb') 引用同样位于 App_Code 中的类 ('App_Code\RefClass.vb') 时，Visual Studio 会用蓝色波浪线标记类引用和错误：未声明名称“RefClass”。

Intellisense 也没有处理这些参考资料。

我有数百个来自 App_Code 中的类的错误。但是，一切都编译得很好，并且可以正常工作。

如果在页面后面的普通网页代码 (webpage.aspx.vb) 中引用了 RefClass，我不会收到蓝色曲线或错误，但 Intellisense 不适用于该类。

如何摆脱这些幻像错误并让 Intellisense 正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T01:26:24.813

看起来问题出在目录结构上。该网站位于 C:\Site.com\Httpdocs 中，所有正常的 ASP.Net 目录都位于此目录下。因此，App_Code 位于 C:\Site.com\Httpdocs\App_Code。

由于该网站是在 C:\Site.com 的 VS 中打开的，因此 App_Code 的额外级别令人困惑。

将 VS 'Open Website' 更改为 C:\Site.com\Httpdocs 解决了这个问题。

啊，继承的乐趣……

# audio - 将每个音符的 SoundFont 转换为 .wav 文件

> ID：10393129
> 
> 赞同：7
> 
> 时间：2012-05-01T03:17:06.793
> 
> 标签：audio, wav, sampling, soundfont

有没有一种简单的方法可以将声音字体文件转换为`.wav`文件（或任何常见的音乐格式，真的），为每个音符分开？

所以假设我有一个健全的字体`a.sfz`；我想从中得到一个文件列表`A0.wav`, `A#0.wav`, `B0.wav`, `C1.wav`,`C#1.wav`等。

特别是，我希望`.wav`每个音符都有一个，在我看来这不是声音字体本身所具有的（似乎它只有几个音符分开的样本——我假设软件应该改变音高声音字体中包含的样本以获得剩余音符的声音，但我想以某种方式`.wav`直接为所有音符生成文件，这样我就不需要以任何方式改变样本的音高）。

如果有一些软件可以做到这一点，完美，请提供一个链接，但我没有找到任何（我发现的所有这些只生成`.wav`文件，除了几个注释）。如果没有，我将如何以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-02T10:02:08.593

在 Linux 下，您可以使用 SWAMI ( [http://www.swamiproject.org/](http://www.swamiproject.org/) ) 来管理 soundfont 文件（SF2 格式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-01T16:39:59.397

在 Ubuntu 上，[`sf2extract`](http://manpages.ubuntu.com/manpages/bionic/man1/sf2extract.1.html)包`gigtools`中可以将所有样本从 SF2 文件中提取为 WAV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T05:36:30.530

您可以编写一个程序来执行此操作。使用 RtAudio 库和 Fluidsynth 以编程方式生成您想要演奏的所有音高。生成这些音高后，将它们写为波形文件。从那时起，该程序可以用于任何声音字体。您可以使用 google 找到这些库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-16T02:32:00.333

将您的 sf 文件导入 Audacity，如 Import>Raw Data。

然后，您可以将其导出为音频文件，例如 wav 或 mp3

我得到了一些新的 sf2 音频补丁，但我的作曲软件无法识别它们。做了一个互联网搜索，并没有想出任何东西。所以我做了这个大胆的事情，它对我有用。具体到你所问的，我的文件是一个吹奏音阶的小号。我删除了除第一个之外的所有笔记并导出了该单个笔记。我将导出 (wav) 复制到我的音库文件夹中，并且能够通过一个小文件以不同的音高进行创作。现在......大约有 30 种其他乐器可以应用它！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-25T18:55:24.513

我为此编写了一个简单的工具。需要安装 Node.js。

Linux使用说明（适配其他操作系统）：

1.  创建新的 nodejs 模块：

    ```
    mkdir midigen && cd midigen && npm init -y && npm i --save midi-writer-js 
    ```

2.  `index.js`使用以下内容 创建：

    ```
    const fs = require('fs');
    const MidiWriter = require('midi-writer-js');

    for (let octave = 0; octave <= 8; octave++) {
      for (const note of ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#',  'G', 'G#', 'A', 'A#', 'B']) {
        const track = new MidiWriter.Track();
        track.addEvent(new MidiWriter.ProgramChangeEvent({ instrument: 10 }));
        track.addEvent(new MidiWriter.NoteEvent({ pitch: [`${note}${octave}`], duration: '8', velocity: 100 }));
        fs.writeFileSync(`${note}${octave}.mid`, new MidiWriter.Writer(track).buildFile());
      }
    } 
    ```

3.  随意修改八度范围、乐器类型（以匹配您的 SoundFont）、持续时间和音量（力度）
4.  跑`node .`
5.  [安装你的 SoundFont](https://wiki.archlinux.org/index.php/Timidity#SoundFonts)
6.  将生成的 midi 文件转换为 wav 文件：

    ```
    for f in *.mid; do timidity $f -Ow -o ${f%.mid}.wav; done 
    ```

# php - 需要只显示每个ID的最新记录，并使用php & mysql显示每个类别的总和

> ID：10393130
> 
> 赞同：0
> 
> 时间：2012-05-01T03:17:18.887
> 
> 标签：php, mysql

我已经尝试了一切来解决这个问题，但我无法得到正确的总数。我的尝试要么添加所有记录，而不仅仅是最新记录，要么我只获得第一条记录。

我的第一张桌子：集线器

```
hubID    hubName
1           hub1
2           hub2 
```

我的第二张表：hub_reports

```
reportID    hubID          date          health         school 
1               1          2012-04-27    467            322 
2               2          2012-04-23    267            22 
3               1          2012-01-20    176            623 
```

因此，您看到的是 2 个表格，一个包含组织名称和其他信息，第二个包含每个组织每季度提交的报告。我想列出所有组织及其最新报告。在表格的底部，我想添加当前可用的所有可用的健康包和学校包。

这是我现在用来显示所有组织及其最新报告的代码。

```
SELECT * FROM (SELECT hubName, date, health, school FROM hub_reports,
hubs WHERE hub_reports.hubID = hubs.hubID ORDER BY date DESC) AS Total
GROUP BY hubName 
```

这似乎可行，但是当我尝试相同的策略来获得健康和学校专栏的总和时，我没有得到正确的答案。

```
SELECT SUM(health) FROM (SELECT hubName, date, health FROM
hub_reports, hubs WHERE hub_reports.hubID = hubs.hubID ORDER BY date
DESC) AS Total GROUP BY hubName 
```

我尝试了其他使用我在另一个论坛上找到的 LEFT JOIN 方法，但它似乎并没有更好地工作。但我可能做得不对。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:02:42.340

我刚刚在我的一个项目中遇到了类似的问题。这个查询的一个变体对我有用。希望对您有所帮助。

```
SELECT hubs.hubName, hub_reports.*, 
SUM(hub_reports.health) AS ttl_health, 
SUM(hub_reports.school) AS ttl_school
FROM hubs, hub_reports 
WHERE hub_reports.hubID = hubs.hubID 
GROUP BY hub_reports.hubID
ORDER BY hub_reports.date DESC 
```

这是PHP：

```
$rs = mysql_query( 'SELECT hubs.hubName, hub_reports.*, 
    SUM(hub_reports.health) AS ttl_health, 
    SUM(hub_reports.school) AS ttl_school
    FROM hubs, hub_reports 
    WHERE hub_reports.hubID = hubs.hubID 
    GROUP BY hub_reports.hubID
    ORDER BY hub_reports.date DESC' );

$grand_total['school']=0;
$grand_total['health']=0;

while ( $row = mysql_fetch_assoc( $rs ) ){ // Step through each hub
    echo "{$row['hubName']} shows {$row['ttl_school']} total school, {$row['ttl_health']} total health";
    $grand_total['school'] += $row['ttl_school'];
    $grand_total['health'] += $row['ttl_health'];
}

echo "Grand Total School: {$grand_total['school']}, Grand Total Health: {$grand_total['health']}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:54:45.323

您可能正在寻找该`MAX()`功能。

试试这个：

```
SELECT h.hubID, h.hubname, MAX(hr.date) as hrdate, SUM(hr.health) as health, SUM(hr.school) as school
FROM hubs h
LEFT JOIN hub_reports hr ON hr.hubID = h.hubID
GROUP BY h.hubID 
```

**编辑**

您需要 MAX 日期，因此它只返回最近的条目（当然，假设您的条目是按日期输入的）。

# lua - 将 HSL 转换为 RGB

> ID：10393134
> 
> 赞同：1
> 
> 时间：2012-05-01T03:18:02.173
> 
> 标签：lua, rgb

这应该采用一组 HSL 颜色代码并以 RGB 格式打印出它的等价物。
它应该打印出 97、153、194。
相反，它会打印出 0.3808、0.60153333333333、0.7592。

```
function HSL(hue, saturation, lightness, alpha)
    if hue < 0 or hue > 360 then
        return 0, 0, 0, alpha
    end
    if saturation < 0 or saturation > 1 then
        return 0, 0, 0, alpha
    end
    if lightness < 0 or lightness > 1 then
        return 0, 0, 0, alpha
    end
    local chroma = (1 - math.abs(2 * lightness - 1)) * saturation
    local h = hue/60
    local x =(1 - math.abs(h % 2 - 1)) * chroma
    local r, g, b = 0, 0, 0
    if h < 1 then
        r,g,b=chroma,x,0
    elseif h < 2 then
        r,b,g=x,chroma,0
    elseif h < 3 then
        r,g,b=0,chroma,x
    elseif h < 4 then
        r,g,b=0,x,chroma
    elseif h < 5 then
        r,g,b=x,0,chroma
    else
        r,g,b=chroma,0,x
    end
    local m = lightness - chroma/2
    return r+m,g+m,b+m,alpha
end

print(HSL(205, .44, .57)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T08:03:56.747

您的函数给出范围内的值`0-1`；乘以 256 使其在范围内`0-256`。

# iphone - iPhone 应用程序：在 Google 地图中计算路径距离

> ID：10393138
> 
> 赞同：0
> 
> 时间：2012-05-01T03:18:46.900
> 
> 标签：iphone, objective-c, google-maps, mapkit

我正在开发一个 iPhone 应用程序。在我的应用程序中，我包含了谷歌地图。我在地图中显示了突出显示的路径。

现在我的问题是如何根据路径计算两点之间的距离，因为 Apple 的本地地图应用程序正在显示具有距离的路线。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:23:15.857

```
 CLLocation *loc1 = [[CLLocation alloc] initWithLatitude:oldLocation.coordinate.latitude longitude:oldLocation.coordinate.longitude];
    CLLocation *loc2 = [[CLLocation alloc] initWithLatitude:newLocation.coordinate.latitude longitude:newLocation.coordinate.latitude];

    CLLocationDistance distance = ([loc2 distanceFromLocation:loc1]) * 0.000621371192; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:47:44.397

这可能会对您有所帮助。

在模拟器中运行时，Core Location 会为该属性分配一组固定的坐标值。您必须在基于 iOS 的设备上运行您的应用程序才能获得真实的位置值。

```
CLLocation *loc2 = [[CLLocation alloc] initWithLatitude:newLocation.coordinate.latitude longitude:newLocation.coordinate.latitude]; 
```

# .net - Box API 2.0 下载文件

> ID：10393139
> 
> 赞同：2
> 
> 时间：2012-05-01T03:18:47.780
> 
> 标签：.net, rest, box-api

尝试使用新 API 下载文件。但我收到一个错误（未找到）

使用旧 API，我下载得很好：

```
wcGetFile.DownloadStringAsync(new Uri("https://www.box.net/api/1.0/download/" + auth_token + "/2111821875")); 
```

使用新 API，这是我的代码：

```
wcGetFile.Headers[HttpRequestHeader.Authorization] = "BoxAuth api_key=" + api_key + "&auth_token=" + auth_token;
        wcGetFile.DownloadStringAsync(new Uri("https://api.box.com/2.0/files/2111821875/data")); 
```

该文件确实存在，因为如果我从通话结束时删除“数据”，我将获得没有错误的文件信息。

```
wcGetFile.Headers[HttpRequestHeader.Authorization] = "BoxAuth api_key=" + api_key + "&auth_token=" + auth_token;
        wcGetFile.DownloadStringAsync(new Uri("https://api.box.com/2.0/files/2111821875")); 
```

根据文档，信息和实际文件之间的唯一区别是 url 的“数据”部分。但这似乎对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T23:06:22.647

看起来我们遇到了一个阻止下载的小错误。如果您使用“https://www.box.com/”而不是“https://api.box.com/”，则下载应该可以工作。不过，我们现在正在努力修复这个错误！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T04:23:32.190

我不确定您是否仍然对答案感兴趣，但这段代码对我来说效果很好：

```
public static Task DownloadFile(string fileId, string location, string authToken) {
    var auth = string.Format("Authorization: BoxAuth api_key={0}&auth_token={1}", ApiKey, authToken);
    var uri = new Uri(string.Format("https://api.box.com/2.0/files/{0}/data", fileId));

    var client = new WebClient();
    client.Headers.Add(auth);
    return client.DownloadFileTaskAsync(uri, location);
} 
```

# php - 获取运行 PHP 的文件的文件名包括

> ID：10393145
> 
> 赞同：26
> 
> 时间：2012-05-01T03:19:14.800
> 
> 标签：php, include

使用 PHP`include`时，如何找出调用的是哪个文件`include`？简而言之，父文件的文件名是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-01T03:28:41.827

一种简单的方法是在父文件中分配一个变量（在包含之前），然后在包含的文件中引用该变量。

**父文件：**

```
$myvar_not_replicated = __FILE__; // Make sure nothing else is going to overwrite
include 'other_file.php'; 
```

**包含文件：**

```
if (isset($myvar_not_replicated)) echo "{$myvar_not_replicated} included me";
else echo "Unknown file included me"; 
```

* * *

您也可以乱搞[`get_included_files()`](http://php.net/get_included_files)or[`debug_backtrace()`](http://php.net/debug_backtrace)并找到包含文件的时间和位置的事件，但这可能会变得有点混乱和复杂。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-01T04:06:53.980

```
$fileList = get_included_files();
$topMost = $fileList[0];
if ($topMost == __FILE__) echo 'no parents';
else echo "parent is $topMost"; 
```

我认为当有单亲时这应该给出正确的结果。

我的意思是父文件本身不是必需的或包含的文件的情况。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-02-25T02:00:23.490

迟到的答案，但是...

我使用以下方法检查正在运行的父文件名：

```
$_SERVER["SCRIPT_NAME"] // or 
$_SERVER["REQUEST_URI"] // (with query string) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-03-20T03:38:31.310

您可以直接使用 debug_backtrace() ，而无需从包含的文件中进行其他更改：

```
$including_filename = pathinfo(debug_backtrace()[0]['file'])['basename']; 
```

这将为您提供包含您的文件的名称。

要从包含的文件中查看您可以访问的所有内容，请在其中运行：

```
print_r(debug_backtrace()); 
```

你会得到类似的东西：

```
Array
(
    [0] => Array
        (
            [file] => /var/folder/folder/folder/file.php
            [line] => 554
            [function] => include
        )

) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-27T19:14:02.980

从这里得到这个：[https ://stackoverflow.com/a/35622743/9270227](https://stackoverflow.com/a/35622743/9270227)

```
echo "Parent full URL: ";
echo $_SERVER["SCRIPT_FILENAME"] . '<br>'; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-24T03:14:22.297

我在网上搜索相同的信息以补充我关于 php 的在线课程，并找到了两种方法。第一个是

```
$file = baseline($_SERVER['PHP_SELF']);
echo $file;  //that outputs file name 
```

**但是**，在包含或需要的情况下，它会获得包含或需要的最终文件。也发现了这个，第二个

```
$file = __FILE__;
echo $file; //that outputs the absolute way from file 
```

**但**我只是在寻找文件名。所以......我把它混合起来，它值得！

```
$file = basename(__FILE__);
echo $file; //that outputs the file name itself (no include/require problems) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-01-16T03:56:10.220

尝试：

```
$current_filename = basename(get_included_files()[0], '.php'); 
```

如果您想要带有`.php`扩展名的文件名，请尝试以下操作：

```
$current_filename = basename(get_included_files()[0]); 
```

如果您想检查此文件是否包含在内？然后：

```
if(get_included_files()[0] == __FILE___) {
    // This File Was Not Included
} else {
   // This File Was Included
} 
```

希望它有效！

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-10-06T12:01:41.660

在父文件中，在包含子文件之前添加此行：

```
$_SESSION['parent_file'] = $_SERVER['PHP_SELF']; 
```

然后在子文件中，读取会话变量：

```
$parent_file = $_SESSION['parent_file'] 
```

# ruby-on-rails - 多个子模型和嵌套 RABL——在 HTML 中工作

> ID：10393149
> 
> 赞同：2
> 
> 时间：2012-05-01T03:19:47.103
> 
> 标签：ruby-on-rails, json, rabl

我正在尝试使用 RABL 为以下 index.html.erb 文件构建 JSON 输出：

```
<% @halls.each do |hall| %>
<%= hall.name.capitalize %><br><br>
<% hall.days.each do |day| %>
    <%= day.date.capitalize %>
    <br><br>    
    <% day.meals.each do |meal| %>
        <%= meal.name.capitalize %><br><br>
        <% meal.foods.each do |food| %>
            <%= food.name %> <br>
        <% end %>
     <br>
    <% end %>
<% end %>
   <% end %> 
```

在这一点上，我已经尝试了一百万种不同的方法，我希望有人可以帮助我为 index.json.rabl 文件生成代码，因为我完全被卡住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:25:35.863

如果你想对子节点进行“深度嵌套”，试试这个：

```
collection @halls

# Use a custom node to get capitalized name
node :name do |hall|
  hall.name.capitalize
end

# Child list of days
child :days do
  node :date do |day|
    day.date.capitalize
  end

  child :meals do
    node :name do |meal|
      meal.name.capitalize
    end
    child :foods do
      # No need to use custom node because we don't need to do extra processing on the value (i.e capitalization is not required) and 'name' is a simple attribute on the model.
      attribute :name
    end
  end
end 
```

否则，如果您希望所有子节点都在同一级别，则不要嵌套 do 块。

另外，请查看[RABL 上的 RailsCast](http://railscasts.com/episodes/322-rabl)。我花了一段时间才知道的最大概念之一是哪个对象在各种 RABL 块（即子块、节点块等）的“范围”内。RailsCast 在解释对象的范围方面做得很好。

# web-services - 如何找出我收到 EOSError 代码 5 - Access Denied 注册服务的原因？

> ID：10393154
> 
> 赞同：1
> 
> 时间：2012-05-01T03:20:11.927
> 
> 标签：web-services, delphi, service, nt

当 TServiceApplication 尝试向 ServiceManager 注册服务时，我收到 EOSError 代码 5 - Access Denied。

我正在使用 XE2 Win7 64 位。32 位和 64 位目标都会出现该错误。

我有一个使用 ADO 连接到数据库的数据模块和 Web 服务服务器代码。所有代码都在一个有效的 WinUI 项目中使用。我还有一个基于相同核心代码的未经测试的 ISAPI DLL。

这是我第一次尝试将 Web 服务服务器合并到 NT 服务中。

我已经跟踪了在 Vcl.SvcMgr 的第 1027 行产生错误的 VCL 代码，但我不知道为什么会收到 Access Denied 错误。我写过其他通过ADO连接数据库的NT Services，没有遇到过这样的错误（虽然是用XE写的）。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T04:17:08.920

您可能会遇到 UAC 权限问题，该问题需要您在提升的状态下运行服务安装过程，例如从通过“以管理员身份运行”选项启动的 cmd.exe 实例，但您实际上并没有这样做。如果您仅对某些服务而不是其他服务有此问题，则受影响的服务可能不包含 UAC 清单，但包含触发 UAC 安装程序检测功能的特征，通常（但不限于）在您的服务文件名中包含保留关键字或版本资源。

# arrays - vb.net我如何找到数组中的索引#

> ID：10393155
> 
> 赞同：0
> 
> 时间：2012-05-01T03:20:12.387
> 
> 标签：arrays

在 vb.net 中，我想将一个字符串拆分为一个数组，我还希望能够知道数组中有多少个索引。

在vb6中我会这样写

```
 dim v1, arrIN(), idcCount
    v1 = "1,2,3,4,5"
    arrin() = split(v1,",")
    idcCount = ubound(arrin)) 
```

我可以使用以下方法将这些值实际放入数组中：

```
 Dim arrIN() = Split(v1, ",") 
```

但我无法弄清楚如何获取索引计数当我尝试在即时窗口中测试它时，我收到以下消息

```
 ?UBound(arrIN()) 
```

索引数小于索引数组的维数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:45:47.077

```
 Dim v1 As String = "1,2,3,4,5"
    Dim arrIN() As String = Split(v1, ",")

    'Gets the total number of elements in the array
    Dim a As Integer = arrIN.Length

    'Gets the index of the last element
    Dim b As Integer = arrIN.GetUpperBound(0) 
```

在这种情况下：

arrIN.Length = 5

arrIN.GetUpperBound(0)=4

GetUpperBound(0) 中的零是您想要上索引的维度。

AVD 给了你正确的答案。我只是添加了 arrIN.Length 以防万一你需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T03:23:36.863

你可以使用`arrVar.GetUpperBound(0)`和`arrVar.GetLowerBound(0)`方法。

看看 MSDN 参考：[Array.GetUpperBound(dimension)](http://msdn.microsoft.com/en-us/library/system.array.getupperbound.aspx)

# python - 在 Python 中拆分具有多个分隔符的字符串

> ID：10393157
> 
> 赞同：13
> 
> 时间：2012-05-01T03:20:19.743
> 
> 标签：python, string, split, delimiter

我正在使用正则表达式使用多个分隔符拆分字符串。但是，如果我的两个分隔符在字符串中相邻出现，则会在结果列表中放置一个空字符串。例如：

```
re.split(',|;', "This,is;a,;string") 
```

结果是

```
['This', 'is', 'a', '', 'string'] 
```

有没有办法避免`''`在不添加`,;`分隔符的情况下进入我的列表？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-01T03:22:27.057

试试这个：

```
import re
re.split(r'[,;]+', 'This,is;a,;string')
> ['This', 'is', 'a', 'string'] 
```

# javascript - 如何用同步调用而不是异步替换 setCallbackHandler()？

> ID：10393159
> 
> 赞同：0
> 
> 时间：2012-05-01T03:20:56.170
> 
> 标签：javascript, jquery, ajax, coldfusion

我有一些 Javascript 的问题，我在其中设置了 setCallbackHandler()，我需要在继续执行其余代码之前完成它。下面是一个示例，当我到达警报（计数）时，setCallbackHandler 仍在处理中。

我相信我需要一个 Sync 调用而不是 Async，但我没有任何运气来实现任何......有什么建议吗？提前致谢。

```
 function checkPerson(r){
        if(r){
        count++
        }
        else{
        alert("None Found");
        }
    }

    var g = new cfc_method();
    g.setCallbackHandler(checkPerson);
    g.returnIds(user_id);

alert(count); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:53:25.633

请求完成后必须运行的任何代码都应该在回调处理程序中。我不建议将 cfajax 调用更改为同步，但是，如果必须，您可以调用`g.setSyncMode()`将调用模式设置为同步。请注意，在同步模式下，数据直接从 cfc 方法调用返回，而不是返回到回调处理程序。

# php - 使用 preg_match 获取价值

> ID：10393162
> 
> 赞同：0
> 
> 时间：2012-05-01T03:21:22.473
> 
> 标签：php, regex

这就是我到目前为止所拥有的：

```
$data = "Hello this is on1";
if (preg_match("/n/", $data)){
  $status = "it contains n";
}
if (preg_match("/n1/", $data)){
  $status1 = "it contains n1";
}
echo $status;
echo $status1; 
```

这将说它`$data`包含“n”然后`$data`包含“n1”我遇到的问题是我如何单独抓住“n”。只有在以下情况下，它才应该返回“它包含 n” `$data="Hello this contains n"`；换句话说，字母“n”不应该附加到任何数字上，如果它附加到其他很好的东西上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:27:57.990

您可以调整正则表达式以绕过“n”后跟数字的任何组合，如下所示：

```
/n[^\d]/ 
```

请注意，它`\d`代表一个数字，语法将匹配*不在*字符组内的`[^...]`任何内容。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T03:33:27.873

像这样使用单词边界`\b`和负前瞻：

```
if (preg_match("/\b(n(?!\d+)[^\b]*)/", $data)){
  $status = "it contains n";
} 
```

`\b`将确保`n`与单词边界匹配，因此`on1`不会匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T03:52:57.700

其他 2 个响应的半组合：

```
/\bn\D*/ 
```

*   `\b`表示单词边界
*   `\D`表示任何非数字字符
*   `*`表示出现 0 次或多次（非数字字符）

**编辑：**感谢艾伦，这是一个更好的版本：

```
/\bn[^\d\s]*\b/ 
```*

# bash - 创建接受拖放的可执行 bash 脚本

> ID：10393164
> 
> 赞同：10
> 
> 时间：2012-05-01T03:21:37.400
> 
> 标签：bash, ubuntu, drag-and-drop, exe

我在 Ubuntu 上从源代码编译了 mplayer。我不想使用 GUI，但我想制作一个可执行的 bash 文件，该文件从拖放到 bash 文件中的文件中获取路径。我怎样才能使这样的事情成为可能？

我想让它看起来像这样： `mplayer <get full path to file`.`file-ending>`

我希望可执行的 bash 文件放在我的桌面上；）

* * *

如果可能的话，我只是想要一个`rightclick -> start with mplayer`功能，但我不知道如何制作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-03-26T20:45:38.743

您可以访问传递给脚本`$1`的参数（对于第一个参数）。而且您还应该创建一个`.desktop`文件，以便 Nautilus（或您的桌面管理器）知道该做什么并使用该文件`%u`将删除的路径传递给脚本。

例如，您可以创建一个名为`DropOverMe.desktop`：

```
[Desktop Entry]
Encoding=UTF-8
Name=Drop Over Me
Comment=Execute the script with the file dropped
Exec=gnome-terminal -e "/folder/to/the/script/launchme.sh \"%u\""
Icon=utilities-terminal
Type=Application 
```

我`gnome-terminal`在我的 PC 上使用 Ubuntu，使用您喜欢的终端应用程序。

脚本可能类似于：

```
#! /bin/bash

echo "Launched with $1" >> /tmp/history.log 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T03:28:45.070

尝试：

```
#!/bin/bash
mplayer "$1" 
```

删除文件的文件路径将作为第一个命令行参数传递给脚本文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-08T17:19:05.537

## 在打开的终端中

通过使用*mate-terminal*、*gnome-terminal*或*konsole*，您可以使用拖放到打开的窗口中。

这将发送 URL 作为提示，添加一个空格，但没有*endline*。

为此，运行*mplayer*，我编写了这个小循环函数：

```
while IFS=$' \t\r\n' read -d '' -p "Wait for URL to play: " -rsn 1 str &&
    [ "$str" ];do
    while IFS= read -d '' -rsn 1 -t .02 char
    do str+="$char"
    done
    if [ "$str" ] ;then
        read -a req <<<"$str"
        echo $req
        mplayer $req
    fi
  done 
```

*   第一次阅读将确定是否有事情发生或结束循环。
*   超时时间很短的第二个循环会将*丢弃*的 URL 读取为单个字符串
*   `read -a req`将拆分字符串以仅考虑第一部分

# php - 代码不会填充电子邮件

> ID：10393165
> 
> 赞同：0
> 
> 时间：2012-05-01T03:21:48.230
> 
> 标签：php, html, forms, post, html-email

创建了一个简单的小 php 代码，用表单上的文本框中的电子邮件地址和信息填充电子邮件。它最初在我从 html 表单调用脚本时工作，但是一旦我将我的网站转换为 PHP，它就停止工作了。最终，我想将相同的信息放入数据库表中，但现在我会满足于让电子邮件正常工作。

提交表单后，我从客户那里获得了电子邮件地址，但我没有从文本框中获得信息。这是我的代码。

```
<?php
$email = $_POST['email'];
$message = $_POST['message'];
mail( "sales@sixtoed-design.com", "Service Request", "From: $email",
$message );
header( "Location: http://www.sixtoed-design.com/thankyou.php" );
?> 
```

就像我说的那样，这是一个非常简单的代码，并且在我将我的网站完全转换为 PHP 之前运行良好。如果您需要，下面是我的表单代码。

```
<form method="POST" action="sendmail.php" enctype="multipart/form-data">
  Email: <input name="email" type="text" /><br />
  Message:<br />
  <textarea name="message" rows="15" cols="40">
  </textarea><br />
  <input name="" type="submit" value="Send Email">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:36:11.887

您使用错误的邮件功能。[请参阅文档](http://au2.php.net/manual/en/function.mail.php)。

第三个参数应该是消息，并且您作为第 4 个参数中的标头发送，因此：

`mail( "sales@sixtoed-design.com", "Service Request", $message, "From: $email" );`

请参阅文档中的[示例 2](http://au2.php.net/manual/en/function.mail.php#example-3144)

# c# - 如何根据选定的 ComboBox 项在 DataGridView 中显示记录？

> ID：10393167
> 
> 赞同：1
> 
> 时间：2012-05-01T03:23:00.693
> 
> 标签：c#, datagridview, combobox

我正在制作 Windows 应用程序并被困在一个地方。我的问题是我想`DataGridView`通过选择一个`ComboBox`项目来显示记录，但我不明白正确的方法。请帮助我克服这个问题。

```
private void grid_Load(object sender, EventArgs e)
{
con = new SqlConnection(constr);

    try
    {
        con.Open();
        //this.studTableAdapter.Fill(this.pRJTestDBDataSet.stud);
        //above line show error for connection to database

        da = new SqlDataAdapter("SELECT stud_no FROM stud", con);
        DataTable dt = new DataTable();
        da.Fill(dt);
        comboBox1.DataSource = dt;
        comboBox1.DisplayMember = "stud_no";
        comboBox1.ValueMember = "stud_no";
        comboBox1.DataSource = dt;
        comboBox1.SelectedIndex = -1;
        comboBox1_SelectedIndexChanged(sender, e);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
    finally
    { con.Close(); }
}

private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    this.studTableAdapter.Fill(pRJTestDBDataSet.stud);
    //above line show error for connection to database
} 
```

我已经尝试了上面的代码，但它在那里不起作用，例如登录失败用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:30:16.823

```
 cmd = new SqlCommand("SELECT stud_no FROM stud", con);
    da = new SqlDataAdapter(cmd);

    da.Fill(dt);
    Combobox1.DataSource = dt;
    Combobox1.DisplayMember = dt.Columns("Stud_no").ToString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:31:21.617

通过要绑定的数据在 Combo Box 的每个 SelectedItemIndex 更改事件处重新绑定 DataGrid。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-07-09T08:54:52.553

```
 private void button2_Click(object sender, EventArgs e)//button 2 is a show data button
    {
        if (combo_floor.Text != "")
        {

            DataSet ds = new DataSet();
            string sql = "select floor_id,floor_no,floor_remark,floor_entrydate from Floorinfo where floor_no='"+combo_floor.Text+"'";
            ds = c.select_query(sql);
            dataGridView1.DataSource = ds.Tables["a"];
            combo_floor.Text = "";
        }

        else
        {
            showdata();
            //showdata()is made for show all data from the given table name
        }

    } 
```

//连接在不同的类所以请不要介意

# php - CakePHP 可以从模型上的 _schema 属性生成我的数据库表吗？

> ID：10393168
> 
> 赞同：2
> 
> 时间：2012-05-01T03:23:09.680
> 
> 标签：php, mysql, database, cakephp

当我编写 CakePHP 应用程序时，我的一个常见任务是在运行 bake 以生成一些脚手架之前键入一个 SQL 文件并将其写入数据库。这是我对 CakePHP 的极少数抱怨之一——这样做将我与 MySQL 联系在一起，我想知道是否有更好的方法通过代码来完成。例如，在某些框架中，我可以定义模型使用的列以及数据类型等，然后通过管理界面运行命令以根据代码中呈现的内容“构建”数据库。它将在框架后面的任何数据库上执行此操作。

CakePHP 2.x 有没有办法可以做这样的事情？我想在我的模型代码中写出数据库模式并运行像 bake 这样的命令来自动生成我需要的表和列。在深入研究食谱文档后，[_schema 属性](http://book.cakephp.org/2.0/en/models/model-attributes.html#schema)似乎做了我想做的事情：

```
class Post{
  public $_schema = array(
    'title' => array('type'=>'text'),
    'description' => array('type'=>'text'),
    'author' => array('type'=>'text')
  );
} 
```

但是没有例子可以解释我会从那里做什么。_schema 属性是否有不同的用途？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T10:47:46.233

不是来自您的 $_schema 数组本身。`schema.php`但是在 /APP/Config/Schema 中创建和使用模式文件。

然后，您可以运行烘焙命令“cake schema create”，然后该命令将“根据模式文件删除并创建表”。

我可能看起来像这样：

```
class YourSchema extends CakeSchema {

    public $addresses = array(
        'id' => array('type' => 'integer', 'null' => false, 'default' => NULL, 'length' => 10, 'key' => 'primary'),
        'contact_id' => array('type' => 'integer', 'null' => false, 'default' => '0', 'length' => 10),
        'type' => array('type' => 'integer', 'null' => false, 'default' => '0', 'length' => 2),
        'status' => array('type' => 'integer', 'null' => false, 'default' => '0', 'length' => 2),
        'email' => array('type' => 'string', 'null' => false, 'default' => NULL, 'length' => 50, 'collate' => 'utf8_unicode_ci', 'comment' => 'redundant', 'charset' => 'utf8'),
        'created' => array('type' => 'datetime', 'null' => false, 'default' => NULL),
        'modified' => array('type' => 'datetime', 'null' => false, 'default' => NULL),
        'indexes' => array('PRIMARY' => array('column' => 'id', 'unique' => 1)),
        'tableParameters' => array('charset' => 'utf8', 'collate' => 'utf8_unicode_ci', 'engine' => 'MyISAM')
    )

    // more tables...
} 
```

# python - 有没有办法读取 .txt 文件并将每一行存储到内存中？

> ID：10393176
> 
> 赞同：9
> 
> 时间：2012-05-01T03:24:26.710
> 
> 标签：python, file

我正在制作一个小程序，它将读取和显示文档中的文本。我有一个看起来像这样的测试文件：

```
12,12,12
12,31,12
1,5,3
... 
```

等等。现在我希望 Python 读取每一行并将其存储到内存中，因此当您选择显示数据时，它将在 shell 中显示如下：

```
1\. 12,12,12
2\. 12,31,12
... 
```

等等。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-01T10:24:36.150

我知道它已经回答了:) 总结以上内容：

```
# It is a good idea to store the filename into a variable.
# The variable can later become a function argument when the
# code is converted to a function body.
filename = 'data.txt'

# Using the newer with construct to close the file automatically.
with open(filename) as f:
    data = f.readlines()

# Or using the older approach and closing the filea explicitly.
# Here the data is re-read again, do not use both ;)
f = open(filename)
data = f.readlines()
f.close()

# The data is of the list type.  The Python list type is actually
# a dynamic array. The lines contain also the \n; hence the .rstrip()
for n, line in enumerate(data, 1):
    print '{:2}.'.format(n), line.rstrip()

print '-----------------'

# You can later iterate through the list for other purpose, for
# example to read them via the csv.reader.
import csv

reader = csv.reader(data)
for row in reader:
    print row 
```

它打印在我的控制台上：

```
 1\. 12,12,12
 2\. 12,31,12
 3\. 1,5,3
-----------------
['12', '12', '12']
['12', '31', '12']
['1', '5', '3'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T03:28:18.510

尝试将其存储在数组中

```
f = open( "file.txt", "r" )
a = []
for line in f:
    a.append(line) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-09T01:19:23.953

感谢@PePr 出色的解决方案。此外，您可以尝试使用内置方法打印 .txt 文件`String.join(data)`。例如：

```
with open(filename) as f:
    data = f.readlines()
print(''.join(data)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T03:39:40.790

您可能也对该`csv`模块感兴趣。它允许您解析、读取和写入逗号分隔值（csv）格式的文件......您的示例似乎在其中。

例子：

```
import csv
reader = csv.reader( open( 'file.txt', 'rb'), delimiter=',' )
#Iterate over each row
for idx,row in enumerate(reader):
    print "%s: %s"%(idx+1,row) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T03:42:00.160

```
with open('test.txt') as o:
    for i,t in enumerate(o.readlines(), 1):
        print ("%s. %s"% (i, t)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T19:15:15.140

```
#!/usr/local/bin/python

t=1

with open('sample.txt') as inf:
    for line in inf:
        num = line.strip() # contains current line
        if num:
            fn = '%d.txt' %t # gives the name to files t= 1.txt,2.txt,3.txt .....
            print('%d.txt Files splitted' %t)
            #fn = '%s.txt' %num
            with open(fn, 'w') as outf:
                outf.write('%s\n' %num) # writes current line in opened fn file
                t=t+1 
```

# node.js - cluster.fork 和 childprocess.fork 有什么区别

> ID：10393182
> 
> 赞同：13
> 
> 时间：2012-05-01T03:25:43.633
> 
> 标签：node.js

简单问题：cluster.fork 和 child_process.fork 有什么区别

细节：

1.  我可以将参数传递给 cluster.fork

2.  我可以在相同的端口或 unixsock 上监听由 child_process.fork 创建的 ChildProcess

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T03:32:06.390

阅读文档：[`child_process.fork`](http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options)vs [`cluster.fork`](http://nodejs.org/api/cluster.html#cluster_cluster_fork)。

> `cluster.fork()`和之间的区别`child_process.fork()`只是集群允许在工作人员之间共享 TCP 服务器。`cluster.fork`是在`child_process.fork`.

[http://nodejs.org/api/cluster.html](http://nodejs.org/api/cluster.html)

* * *

> 1\. 我可以将参数传递给 cluster.fork

不是根据文档，并且：

```
> var cluster = require('cluster')
undefined
> cluster
{ isWorker: false,
  isMaster: true,
  fork: [Function],
  _startWorker: [Function],
  _getServer: [Function] }
> cluster.fork.length
0 
```

（一个[函数`length`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/length)是它的形式参数的数量）。改用[消息传递](http://nodejs.org/api/child_process.html#child_process_child_send_message_sendhandle)。

> 2\. 我可以在同一个端口或 unixsock 上监听由 child_process.fork 创建的 ChildProcess

大概是的，因为`cluster.fork`是在`child_process.fork`. 但是，如果您想在同一个端口上侦听，则已经存在一个*原因。*`cluster.fork`

# javascript - Access-Control-Allow-Origin 不允许 http://example.com

> ID：10393183
> 
> 赞同：1
> 
> 时间：2012-05-01T03:26:14.157
> 
> 标签：javascript, jquery, ajax

但它适用于：

```
http://www.example.com 
```

..并且此`$.post`方法正在同一服务器上请求资源..？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T03:28:25.113

这两个名称`example.com`和`www.example.com`是*不同*的，即使它们可能指向相同的网页。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T05:19:59.937

或者您可以在这些资源上设置 CORS 标头以允许从`http://www.example.com:80`和访问`http://example.com:80`：

```
Access-Control-Allow-Origin: http://example.com:80 http://www.example.com:80 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T03:28:13.450

子域与它的兄弟子域不同，也不是顶级域。一定`www`是影响它的那个`www`被认为是“子域”`example.com`

# twitter-bootstrap - twitter bootstrap prepend，追加垂直错位

> ID：10393188
> 
> 赞同：3
> 
> 时间：2012-05-01T03:27:36.627
> 
> 标签：twitter-bootstrap

前置和附加大约 3 个像素（前置和附加跨度较低）

这是我的标记：

```
<div class="container">
    <div class="row">
        <div class="span12">
            <form class="well">
                <div class="control-group">
                    <label class="control-label" for="txtLot_Original_Cost">Original Cost</label>
                    <div class="controls">
                        <div class="input-prepend">
                            <span class="add-on">$</span><input class="span2 numAlign" name="txtLot_Original_Cost" id="txtLot_Original_Cost" size="16" type="text">
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div> 
```

标记位于一个非常简单的页面中：

```
<!DOCTYPE html>
<html>
    <head>
        <title><%= title %></title>
        <link rel='stylesheet' href='/stylesheets/bootstrap.css' />
    </head>
    <body>
        <%- body %>
    </body>
</html> 
```

我可以用以下 css 覆盖问题：

```
.input-prepend .add-on {
    margin-right: -1px;
    position:relative;
    bottom:2px;
} 
```

但我想知道这会产生什么其他副作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:23:40.700

自 twitter boostrap 2.0.3 以来，它已被修复。您不再需要使用 css 覆盖。

# mysql - mySql 是否有一个更新/插入组合，如果更新失败则插入？

> ID：10393189
> 
> 赞同：0
> 
> 时间：2012-05-01T03:27:40.123
> 
> 标签：mysql

我并不乐观，这可以在没有存储过程的情况下完成，但我很好奇以下是否可能。

我想编写一个查询插入/更新，如果它找到匹配项，则更新一行，如果没有，则将其更新的值插入到表中。

所以......像

```
updateInsert into  table_a set n = 'foo' where p='bar'; 
```

如果没有 p='bar' 的行，它将自动插入 table_a set n = 'foo';

编辑：基于几条评论，我看到我需要澄清 n 不是 PRIMARY KEY 并且表实际上需要有重复行的自由。我只是有一个特定条目需要唯一的情况......也许我只是在以一种不好的方式混合隐喻，应该把它拉到一个单独的表中，这个键是唯一的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:31:32.540

我将使用表模式强制执行此操作 - 在目标表上使用唯一的多列键并使用`INSERT IGNORE INTO`- 它应该在重复键上引发错误，但插入将在错误时忽略。

# http - 在 VB6 中发出带有大量数据的 POST 请求失败

> ID：10393197
> 
> 赞同：1
> 
> 时间：2012-05-01T03:29:11.027
> 
> 标签：http, post, vb6, msxml, xmlhttprequest

我有一个非常标准的函数可以将一些 XML 字符串数据发布到远程 WCF 服务并提取结果。它工作正常，但无法扩展到“大量”数据（在这种情况下为 138KB。）

```
' performs a HTTP POST and returns the resulting message content
Function HttpPost(sUrl As String, sSOAPAction As String, sContent As String) As String
  Dim oHttp As Object
  'Set oHttp = CreateObject("Microsoft.XMLHTTP")
  Set oHttp = CreateObject("MSXML2.XMLHTTP.6.0")
  oHttp.open "POST", sUrl, False
  oHttp.setRequestHeader "SOAPAction", """http://conducive.com.au/IXpacManagement/" & sSOAPAction & """"
  oHttp.setRequestHeader "Content-Type", "text/xml; charset=utf-8"
  oHttp.setRequestHeader "Content-Length", Len(sContent)
  oHttp.send Str(sContent)

  If oHttp.status = 200 Then
    HttpPost = oHttp.responseText
  Else
    MsgBox "An error (" & LTrim(Str(oHttp.status)) & ") has occurred connecting to the server."
    HttpPost = ""
  End If

  Set oHttp = Nothing

End Function 
```

当我使用`Microsoft.XMLHTTP`我得到`error 7 out of memory`.
当我使用`MSXML2.XMLHTTP.6.0`我得到`object doesn't support this property or method`.
在任何一种情况下，发送一个少于一千个字符的小字符串都可以完美地工作。

* * *

这是我尝试不同方式发送字符串时得到的结果：

*   使用`oHttp.send(sContent)`：即使是小的 POST 也会失败`Invalid procedure call or argument Runtime error 5`。
*   使用`oHttp.send sContent`：即使是小的 POST 也会失败`Invalid procedure call or argument Runtime error 5`。

* * *

最后`oHttp.send CStr(sContent)`奏效了。谢谢大家的建议，因为我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:02:34.437

尝试取出 sContent 周围的 Str() 并仅使用括号按值传递它，例如

oHttp.send (sContent)

或者至少使用 CStr() 失败 - Str() 应该将数字转换为字符串。

# php - 将 csv 文件中的数据动态显示到下拉列表中

> ID：10393198
> 
> 赞同：0
> 
> 时间：2012-05-01T03:29:13.253
> 
> 标签：php

我有一个 csv 文件，该文件在其表的一列中包含一堆状态。我需要获取这些状态并用它们填充一个下拉列表，*而不要重复*

我的代码是

```
//make unique array
for ($i=0; $i<count($array); $i++)
 {
 $state_array[$i]=$array[$i][1];
 }

//display in drop down list
$state_array=array_unique($state_array); 
$state_array=array_values($state_array); 

for ($i=0; $i<count($state_array); $i++)
    {
    echo "<option value='".$state_array[$i]."'>".$state_array[$i]."</option>";
    }

?>
</select> 
```

csv 文件被输出到一个多维数组，状态的索引是 $array[$i][1]

我的代码有问题，因为选择框保持空白。请问有人能看出什么问题吗？任何帮助表示赞赏。

**注意：**如果重要的话，我只会提到我不能使用 SQL、Java 等。只有php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:59:39.937

```
$state_array = array();
//make unique array
for ($i=0; $i<count($array); $i++)
{
    $state_array[$i]=$array[$i][1];
} 
```

# android - 安卓相机程序

> ID：10393202
> 
> 赞同：0
> 
> 时间：2012-05-01T03:29:35.137
> 
> 标签：android, android-camera

我是 Android 新手，我写了一个小程序来拍照并将它们保存在内部存储磁盘中。我的程序成功启动，但是当我拍照时，没有数据写入内存磁盘。

下面是我的代码。我错过了什么？

```
package com.lab2;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.app.Activity;
import android.hardware.Camera;
import android.hardware.Camera.AutoFocusCallback;
import android.hardware.Camera.PictureCallback;
import android.hardware.Camera.ShutterCallback;
import android.os.Bundle;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;
import android.os.Environment;

public class Lab2_cameraActivity extends Activity implements SurfaceHolder.Callback {
/** Called when the activity is first created. */
private Camera mCamera;
private SurfaceHolder mHolder;
private SurfaceView mSurfaceView;
private Button mbutton1;
private ShutterCallback shutter;
private PictureCallback raw;
private PictureCallback postview;

AutoFocusCallback AFCallback = new AutoFocusCallback(){ 
    @Override 
    public void onAutoFocus(boolean success, Camera camera) { 
        // TODO Auto-generated method stub 
        if (success){               
            mCamera.takePicture(shutter, raw, postview, jpeg);//take photo 
        }else{ 
            Toast.makeText(Lab2_cameraActivity.this, "in else...",Toast.LENGTH_LONG).show();
        } 
    } 
   };

   /*jpeg callback occurs when the compressed image is available*/ 
        PictureCallback jpeg = new PictureCallback(){ 
            @Override 
            public void onPictureTaken(byte[] data, Camera camera) { 
                // TODO Auto-generated method stub 
                FileOutputStream outStream = null;                                        
                File file = new File("/mnt/sdcard/");              
                try {                       
                    outStream = new FileOutputStream(file.toString()+"photo.jpg");                                              
                    outStream.write(data);              
                    outStream.close(); 
                    Toast.makeText(Lab2_cameraActivity.this, "Photo Saved...",Toast.LENGTH_LONG).show();                 
                    mCamera.startPreview();              
                } catch (FileNotFoundException e) { 
                    // TODO Auto-generated catch block 
                    e.printStackTrace(); 
                } catch (IOException e) { 
                    // TODO Auto-generated catch block 
                    e.printStackTrace(); 
                } 
            } 
           };

   public void surfaceDestroyed(SurfaceHolder holder) { 
        // TODO Auto-generated method stub 
        /*when surface destroyed, stop preview*/ 
        if(mCamera != null){ 
            mCamera.stopPreview(); 
            mCamera.release();//release camera resources 
            mCamera = null; 
        } 

       } 

public void surfaceCreated(SurfaceHolder holder) { 
    // TODO Auto-generated method stub 
    mCamera = Camera.open();//open camera 
    try { 
        mCamera.setPreviewDisplay(holder);//set surface to display 
    } catch (IOException e) { 
        // TODO Auto-generated catch block 
        e.printStackTrace(); 
    } 
   } 

public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) { 
    // TODO Auto-generated method stub
    /*when surface changed, reset camera parameters for preview*/ 
    mCamera.getParameters();//get default parameters
    Camera.Parameters parameters= mCamera.getParameters(); 
    /*you can set your own parameters in there*/ 
    mCamera.setParameters(parameters);//set parameters if parameters has been changed 
    mCamera.startPreview(); 
   }

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);       
    mbutton1 = (Button)findViewById(R.id.button1);
    mSurfaceView = (SurfaceView)findViewById(R.id.surfaceView);
    mHolder = mSurfaceView.getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    mbutton1.setOnClickListener(new Button.OnClickListener() 
    { 
        @Override 
        public void onClick(View v) { 
            mCamera.autoFocus(AFCallback); 
        } 
    }); 

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:49:14.623

1.  您不应指定 '/mnt/whatever/' 到您的 sdcard 的路径，`getExternalFilesDir()`用于获取正确的路径。

2.  你的回调不会被调用，除非你在`mCamera.takePicture(null, null, jpeg);`

3.  你真的有吗

    ```
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"> 
    ```

在您的 AndroidManifest.xml 文件中？

# post - 错误：读取上游时 readv() 失败（104：对等方重置连接）

> ID：10393203
> 
> 赞同：8
> 
> 时间：2012-05-01T03:29:37.040
> 
> 标签：post, wsgi, flask, dotcloud

我有带有 nginx 和 uwsgi 的烧瓶的 facebook 应用程序。当它从 facebook 收到 POST 时，它总是有错误：

```
readv() failed (104: Connection reset by peer) while reading upstream 
```

但是当我直接访问我的应用程序（使用 GET 方法）时，它运行顺利。我做了什么：

1.  仅使用方法限制@app.route `POST`- 不起作用。
2.  在 wsgi 中添加限制：（`uwsgi_buffer_size`如果来自 facebook 的请求很大），并且`uwsgi_harakiri`（如果 uwsgi 在完成请求之前提供超时） - 不起作用。

我在[django](https://stackoverflow.com/questions/3970495/nginx-connection-reset-response-from-uwsgi-lost)中有解决方法，但还不知道如何在烧瓶中实现。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:52:54.930

这是uwsgi的错误。您可以从[[uWSGI]](http://lists.unbit.it/pipermail/uwsgi/2010-June/000448.html)中获得更多信息。

简单的解决方案是您必须通过 wsgi.input 读取 POST 正文，即使 POST 正文为空或者您不需要 POST 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-10T15:48:42.287

问题是“上游”（nginx 正在代理的实际进程）正在关闭连接。

就我而言，`Django`是我的网络服务器，我需要设置`DATA_UPLOAD_MAX_NUMBER_FIELDS`更大，因为 POST 请求中的字段太多。

# javascript - 有没有替代品 in HTML5 without using JS or CSS trick?

> ID：10393205
> 
> 赞同：0
> 
> 时间：2012-05-01T03:29:48.323
> 
> 标签：javascript, html, iframe

I'm trying to create system where anyone can embed a piece of HTML code without using `<iframe>`. Is there anything out there that only uses HTML5?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:34:39.123

我假设您希望用户在您的页面上放置任意 HTML。

在实践中，是的：

### 没有JS

*   允许用户直接将 HTML 插入页面
*   允许用户提供预定义的 url `<iframe>`（我假设这就是你的意思）

### JS

*   AJAX，假设内容源来自同一个域
*   跨域 AJAX，如果服务器允许[跨域资源共享 (CORS)](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)
*   脚本加载器 + JS 模板解析器 + JS 编写的模板。基本上一切都是用 JS 编写的，因为脚本加载器绕过了[Same-Origin Policy SOP](http://en.wikipedia.org/wiki/Same_origin_policy)。

但是注入任意内容**会产生安全后果**，因此请做好最坏的打算。

# eclipse - error in Struts framework settings

> ID：10393206
> 
> 赞同：0
> 
> 时间：2012-05-01T03:29:53.640
> 
> 标签：eclipse, tomcat, struts

I downloaded tomcat, eclipse, Struts framework. Tomcat is working. Where to place eclipse and Struts? I placed eclipse and Struts outside tomcat folder. The needed jar files are stored inside eclipse current folder. I'm getting error.

```
 <%@taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Hello World</title>
</head>
<body>
<bean:write name="helloWorldForm" property="message"/>
</body>
</html>
unknown tag:bean.write 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:39:13.077

Eclipse 是一个 IDE。它用于开发 Java 应用程序。不只是一个应用程序，而是几个应用程序。您不应将任何特定于应用程序的 jar 放入 eclipse 文件夹中。

Struts（而不是 strut 或 struct）是一个 Web 框架。它的 jar 必须放在已部署应用程序的 WEB-INF/lib 文件夹中。在 Eclipse Web 项目中，它们的位置（通常）是`<yourProjectDirectory>/WebContent/WEB-INF/lib`.

# php - AJAX 无法打开对目标文件的请求

> ID：10393219
> 
> 赞同：0
> 
> 时间：2012-05-01T03:32:04.007
> 
> 标签：php, ajax, forms, submit

我有一个调用 javascript onclick 的图像。验证后，我调用一个将记录添加到数据库并返回的目标文件。我的代码看起来像这样

......

```
xmlhttp.open("GET","addrecord.php?iddesc=gold&tid=t_id&pid=p_id",true);
xmlhttp.send(); 
```

插入记录后，它返回 echo "insert done"；我的xmlhttp.open()上面的代码是这样的

```
xmlhttp.onreadystatechange=function()
                {
                  if (xmlhttp.readyState==4 && xmlhttp.status==200)
                  {
                    //alert("id is "+id);
                    document.getElementById(id).innerHTML=xmlhttp.responseText;
                }
            } 
```

当我在浏览器上执行此代码时，会调用 js。我在所有地方都有警报，我能够跟踪代码流，直到 xmlhttp.open(); 但什么也没发生。我可以通过其他测试程序独立调用目标 php 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:00:06.157

好的，我发现这是由我的图像所在的锚点上的 href 引用引起的。当我删除 href 时，我可以访问 ajax GET 或 POST。

现在我必须弄清楚如何拥有 href 和 ajax。我相信一定有办法。

不知道为什么 href 优先于 ajax 的 xmlhttp.request()。

# jquery - jQuery 无法捕获 提交事件

> ID：10393224
> 
> 赞同：1
> 
> 时间：2012-05-01T03:32:44.833
> 
> 标签：jquery, html, ajax, forms, post

我有一个带有名为 Apply 的提交按钮的表单，

### 视觉的

![在此处输入图像描述](../Images/c74fea2f9af9e847129be9cdb86672a3.png)

### HTML

```
<div id="accordion">
    <div>
       <h3><a href="#">Theme color and layout</a></h3>
       <div>
       <!-- Colour picker code -->
        <form id="applyColor">
           <input class='simple_color' value='#cc3333'/>     
           <input type='submit' value='Apply'/>
        </form>
        </div>
    </div>
<div> 
```

### Javascript

```
//Colour picker
$(document).ready(function(){
    $('.simple_color').simpleColor();

    $("#applyColor").submit(function() {
        alert($('input.simple_color')[0].value);
    });
}); 
```

## 问题 ：

现在，每当我单击提交按钮时，它都不会执行我的警报语句。我曾尝试使用简单的警报语句，`alert('Hello World!');`但效果不佳。

我不确定出了什么问题，我做错了什么吗？

* * *

### 链接的jQuery

```
<script type="text/javascript" src="jquery-1.7.2.min.js"></script> 
```

### 我用来创建颜色选择器和关于通过 ajax 发布的教程的资源，

*   [选色器](http://recursive-design.com/blog/2007/12/18/jquery-simplecolor-color-picker/)
*   [如何通过 jquery ajax 发布表单](http://www.youtube.com/watch?v=FyXeOX-uYMc)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T03:44:56.420

当我没有正确引用颜色选择器时，我只能重现您的问题。当我确实引用它时，该解决方案按预期工作：

```
$(".simple_color").simpleColor();

$("#applyColor").on("submit", function(event){
    event.preventDefault();
    alert( 'Submitted' );
}); 
```

工作： http: [//jsbin.com/ejovir/2/edit](http://jsbin.com/ejovir/2/edit)
不工作（插件未引用）：http: [//jsbin.com/ejovir/3/edit](http://jsbin.com/ejovir/3/edit)

检查您的控制台以获取类似于以下内容的消息：

> 未捕获的类型错误：对象 [object Object] 没有方法“simpleColor”

# c# - 当使用 jQuery $.ajax 调用时，如果一切正常，从 Action 方法返回什么？

> ID：10393225
> 
> 赞同：0
> 
> 时间：2012-05-01T03:32:45.463
> 
> 标签：c#, jquery, ajax, asp.net-mvc-3, actionmethod

这是我的代码：

```
 [HttpPost]
    public ActionResult VoteChampionStrongAgainst(string championStrong, string againstChampion)
    {
        int champStrongId = int.Parse(championStrong);
        int againstChampId = int.Parse(againstChampion);

        string ip = System.Web.HttpContext.Current.Request.UserHostAddress;

        using (EfCounterPickRepository counterPickRepository = new EfCounterPickRepository())
        {
            var existingCounterPick = counterPickRepository.FindAll()
                                                           .SingleOrDefault(x => x.ChampionStrong == champStrongId && x.AgainstChampion == againstChampId);

            //Does this counterpick combination already exist?
            if (existingCounterPick != null)
            {
                //Has this user already voted?
                var existingVote = counterPickRepository.FindVoteForUser(ip, existingCounterPick.CounterPickVoteId);

                //He hasn't voted, add his vote history.
                if (existingVote == null)
                {
                    StrongCounterHistory history = new StrongCounterHistory();
                    history.IPAddress = ip;
                    history.VoteType = true;
                    history.StrongCounterPickVoteId = existingCounterPick.CounterPickVoteId;

                    counterPickRepository.AddStrongPickHistory(history);
                    counterPickRepository.SaveChanges();

                    //Add a total vote the pick.
                    existingCounterPick.TotalVotes++;
                    counterPickRepository.SaveChanges();
                }
                else
                {
                    //Will use this to display an error message.
                    //How to return an "error" that jquery understands?
                }
            }
            else //This combination doesn't exist. Create it.
            {
                //Create it....
                StrongCounterPickVote newCounterPick = new StrongCounterPickVote();
                newCounterPick.ChampionStrong = champStrongId;
                newCounterPick.AgainstChampion = againstChampId;
                newCounterPick.TotalVotes = 1;

                counterPickRepository.CreateNewCounterPick(newCounterPick);
                counterPickRepository.SaveChanges();

                //Assign a vote history for that user.
                StrongCounterHistory history = new StrongCounterHistory();
                history.IPAddress = ip;
                history.VoteType = true;
                history.StrongCounterPickVoteId = newCounterPick.CounterPickVoteId;

                counterPickRepository.AddStrongPickHistory(history);
                counterPickRepository.SaveChanges();
            }

            return View();
        }
    } 
```

这是我的 jQuery 代码：

```
$(".pick .data .actions .btn-success").click(function () {
    var champStrongId = $(this).data("champstrongid");
    var againstChampId = $(this).data("againstchampid");

    $.ajax({
        type: 'POST',
        url: "/Counterpicks/VoteChampionStrongAgainst",
        data: { championStrong: champStrongId, againstChampion: againstChampId },
        success: function () {
            alert("Great success!");
        },
        error: function (e) {
            alert("Something bad happened!");
            console.log(e);
        }
    });
}); 
```

我需要从我的 ActionMethod 返回什么，以便在`success:`一切正常或`error:`出现问题时进入代码执行（例如，他已经对这个特定的计数器选择进行了投票？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:39:25.157

Servlet 应该回答一个“200 OK”的 HTTP 响应。

不知道你的'View' api，但 HttpServletResponse.setStatus(200) 会在 Java 端做。不要忘记，您可以在浏览器中手动请求 AJAX url 以查看它返回的内容..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:53:40.850

这是我要做的一些事情...

```
public JsonResult VoteChampionStrongAgainst(string championStrong, string againstChampion)    {
    var success = true;

    // Do all of your data stuff

    return Json(new { success = success, error = 'Some error message'});

} 
```

JsonResult 是返回 Json 的特殊 ActionResult。它会自动为浏览器设置正确的标题。将`Json()`使用 ASP.NET 的内置序列化程序来序列化匿名对象以返回给客户端。

然后用你的jQuery代码......

```
$.ajax({
        type: 'POST',
        url: "/Counterpicks/VoteChampionStrongAgainst",
        data: { championStrong: champStrongId, againstChampion: againstChampId },
        success: function (json) {
            if (json.success) {
                alert("Great success!");
            }
            else if(json.error && json.error.length) {
                alert(json.error);
            }
        },
        // This error is only for responses with codes other than a 
        // 200 back from the server.
        error: function (e) {
            alert("Something bad happened!");
            console.log(e);
        }
    }); 
```

为了让错误触发，您必须返回一个不同的响应代码`Response.StatusCode = (int)HttpStatusCode.BadRequest;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T04:01:33.903

如果您的服务器上有任何错误，您可以返回 500 内部服务器错误，例如

```
Response.StatusCode = (int)HttpStatusCode.InternalServerError;
Response.ContentType = "text/plain";
return Json(new { "internal error message"}); 
```

# objective-c - NSObject 上的类别以获取 AppDelegate 的实例？

> ID：10393227
> 
> 赞同：1
> 
> 时间：2012-05-01T03:32:57.163
> 
> 标签：objective-c, ios, cocoa-touch

我需要经常访问我的核心数据托管对象上下文，而不是`[[UIApplication sharedApplication] delegate]`每次在每个类中获取一个实例并将其存储在一个变量中，我想知道这样做是否可以：

```
@interface NSObject(DelegateExtension)
- (AppDelegate*)appDelegate;
@end

@implementation 
NSObject(DelegateExtension)
- (AppDelegate*)appDelegate
{
    return (AppDelegate*)[[UIApplication sharedApplication] delegate];
}
@end 
```

所以我可以`self.appDelegate`在我的代码中的任何地方做。

这样做有什么问题吗？这是不好的编程习惯吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T03:48:42.040

或者，您可以将预处理器宏（或静态 C 函数）添加到`Prefix.pch`文件中：

```
#define AppDelegateInstance() (AppDelegate *)[[UIApplication sharedApplication] delegate] 
```

这将使您的应用程序委托可以从代码中的任何位置访问，并且不会与任何名为`appDelegate`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T04:08:48.277

`NSObject``UIApplication`与其委托人没有任何有意义的联系。从设计的角度来看，我认为这样做是一种糟糕的黑客行为。我可以想到其他三种解决方案，我认为它们会好几百万倍：

1.  函数，其声明位于由您的前缀标头导入的标头中。

2.  类别 on `UIApplication`，它实际上是一个与您尝试执行的操作有关的类。

3.  全局指针，就像`NSApp`在 OS X* 上一样，它被设置为程序中指向`UIApplication`实例的第一件事。

4.  （四种解决方案！）指向应用程序委托的全局指针。

有关实现 3 或 4 的信息，请参阅[关于延迟实例化和便利方法](https://stackoverflow.com/questions/8497966/on-lazy-instantiation-and-convenience-methods/8498400#8498400)。

* * *

*真的不明白他们为什么不在 iOS 上这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T04:15:12.537

我通常使用全局变量来指向应用程序委托。

在 MyAppDelegate.h 中：

```
extern MyAppDelegate* AppDelegate; 
```

在 MyAppDelegate.m 中：

```
MyAppDelegate* AppDelegate = nil;

- (id)init {
    if (self = [super init]) {
        AppDelegate = self;
        …
    }
} 
```

现在任何导入“MyAppDelegate.h”的人都可以使用该`AppDelegate`变量来访问您的应用程序委托。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T03:40:31.417

当然它是安全的，只要你*知道*苹果在不久的将来不会或不会有一个名为 appDelegate 的方法。子类化是首选方法，尤其是因为 NSObject 是根类。但是，这需要课堂摆姿势，这在 OSX 10.5+ 中已完全弃用，甚至在 iOS 设备上也不是可行的选择。

# php - SQL/PHP 查询在 PHPmyAdmin 中有效，但在站点中无效

> ID：10393230
> 
> 赞同：4
> 
> 时间：2012-05-01T03:33:28.327
> 
> 标签：php, sql, phpmyadmin

**SQL/PHP 查询在 PHPmyAdmin 中有效，但在站点中无效。**

我注意到很多人都遇到过这个问题，但我承认我没有这个网站上的一些编码员那么先进......但是。=）我谦虚地请求您有任何经验：P 谢谢。

```
<?php
// session_start();
// ob_start();

ini_set("display_errors", true);
error_reporting(-1);

// Connection to database.
mysql_connect('localhost', 'root', '') or die(mysql_error());
mysql_select_db('') or die(mysql_error());
?>

<?php
// Maintenance page.

$maintenance = 1; // 1 = Site Online || 0 = Site Offline 

if ($maintenance == 0) {
    ?>
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <head>
            <style type="text/css">
                body {
                    color:#ffffff;
                    background-color: #000000;
                    font-family: Arial, Helvetica, sans-serif;
                }
            </style>
        </head>
        <title></title>
    </head>
    <body>  
    <center><img src="images/p4flogo.png" /></center><br /> 
    <?php
    echo "<br/><br /><center>This site is currently under maintenance.</center>";
} else {

// Start of main website.
    ?>
<html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <head>
            <style type="text/css">
                body {
                    color:#ffffff;
                    background-color: #000000;
                    font-family: Arial, Helvetica, sans-serif;
                }    
                a:link {color: orange; text-decoration: underline; }
                a:active {color: red; text-decoration: underline; }
                a:visited {color: orange; text-decoration: underline; }
                a:hover {color: red; text-decoration: none; }
                table { 
                    border-color: #333333;
                }
                th { 
                    background-color:#ffffff;
                    color:#000000;
                    font-family: Arial, Helvetica, sans-serif; 
                    height:30px;
                }
                td { font-family: Arial, Helvetica, sans-serif; 
                     color:#ffffff;
                     height:35px;
                }
            </style>
        </head>
        <title></title>
    </head>
    <body>
        <table border="0" cellspacing="1" align="center">
            <tr><td>
            <center><img src="images/p4flogo.png" /></center><br /><br />
            <form action="" method="post">
                Search for a soldier: <input type="text" name="value" size="35" /><input type="submit" value="search" /><br />
                <?php
                if (isset($_POST['value']) && !empty($_POST['value'])) {
                    $value = mysql_real_escape_string($_POST['value']);
                    // query to database for soldier stats
                    // query works in phpmyadmin but not on site.
                         $sql = "
                               SELECT
                                `Name`,
                                 MAX(`Level`),
                                `Class`,
                                 SUM(`Kills`),
                                 SUM(`Deaths`),
                                 SUM(`Points`),
                                 SUM(`TotalTime`),
                                 SUM(`TotalVisits`),
                                 `CharacterID`
                               FROM
                                 `Characters`
                               WHERE
                                 `Name` LIKE '$value%' OR `CharacterID` LIKE '$value'
                               GROUP BY
                                 `Name`,
                                 `Class`,
                                 `CharacterID`
                               ORDER BY
                                 `Name` ASC;";
                    $query = mysql_query($sql);
                    $numrow = mysql_num_rows($query);
                    if ($numrow >= 1) {
                        echo "<br /><a href=\"index.php\"><b>View TOP 100 Players!</b></a><br />";
                        echo "<table border=\"1\" cellspacing=\"0\" cellpadding=\"5\">  ";
                        echo "<th>Soldier Name</th><th>Level</th><th>Class</th><th>KDR</th><th>Kills</th><th>Deaths</th><th>Points</th><th>Hours Played</th><th>Total Visits</th><th>CharacterID</th>";

                        echo "<br />";
                        WHILE ($row = mysql_fetch_assoc($query)) {

                            $SoldierName = $row['Name'];
                            $Level = $row['Level'];
                            $Class = $row['Class'];
                            if ($Class == NULL | empty($Class)) {
                                $Class = '<center>n / a</center>';
                            }
                            if ($Class == 1) {
                                $Class = 'Assault';
                            }
                            if ($Class == 2) {
                                $Class = 'Recon';
                            }
                            if ($Class == 3) {
                                $Class = 'Medic';
                            }
                            if ($Class == 4) {
                                $Class = 'Engineer';
                            }
                           echo $Kills = $row['Kills'];
                              if ($Kills == 0) {
                                  $Kills = 1;
                              }
                            $Deaths = $row['Deaths'];
                            if ($Deaths == 0) {
                                $Deaths = 1;
                            }
                            $Kdr = round($Kills / $Deaths, 2);
                            $Points = $row['Points'];

                            $TimePlayed = $row['TotalTime'];
                            if ($TimePlayed == 0) {
                                $TimePlayed = 1;
                            } else {
                                $TimePlayed = round(($TimePlayed / 3600), 0);
                            }

                            $TotalVisits = $row['TotalVisits'];
                            $CharacterID = $row['CharacterID'];

                            echo "<tr>";
                            echo "<td><b>$SoldierName</b></td>";
                            echo "<td>$Level</td>";
                            echo "<td>$Class</td>";
                            if ($Kdr > 3.9) {
                                echo "<td><font color=\"red\"><b>$Kdr</b></font></td>";
                            } else if ($Kdr > 2.5 && $Kdr < 4) {
                                echo "<td><font color=\"orange\"><b>$Kdr</b></font></td>";
                            } else {
                                echo "<td><font color=\"limegreen\">$Kdr</font></td>";
                            }
                            echo "<td>$Kills</td>";
                            echo "<td>$Deaths</td>";
                            echo "<td>$Points</td>";
                            echo "<td>$TimePlayed</td>";
                            echo "<td>$TotalVisits</td>";
                            echo "<td>$CharacterID</td>";
                            echo "</tr>";
                        }
                        echo "</table>";
                    } else {
                        echo "No player found with that name. Please try again.";
                    }
                } else {
                    if (empty($_POST['value'])) {
                        echo "<font color=\"red\">You must enter a search value.</font>";
                    }
                    // query to p4f database for top 100 players.
                    $sql = "SELECT * FROM `Characters` WHERE `Points` > 1 GROUP BY `Name` ORDER BY `Points` DESC LIMIT 100;";
                    $query = mysql_query($sql);
                    echo "<h3>TOP 100 PLAYERS</h3>";
                    echo "<table border=\"1\" cellspacing=\"0\" cellpadding=\"5\">  ";
                    echo "<th></th><th>Soldier Name</th><th>Level</th><th>Class</th><th>KDR</th><th>Kills</th><th>Deaths</th><th>Points</th><th>Hours Played</th><th>Total Visits</th><th>CharacterID</th>";
                    // echo "Made it to loop!";
                    $Rank = 1;
                    WHILE ($row = mysql_fetch_assoc($query)) {

                        $SoldierName = $row['Name'];
                        $Level = $row['Level'];
                        $Class = $row['Class'];
                        if ($Class == NULL | empty($Class)) {
                                $Class = '<center>n / a</center>';
                            }
                        if ($Class == 1) {
                            $Class = 'Assault';
                        }
                        if ($Class == 2) {
                            $Class = 'Recon';
                        }
                        if ($Class == 3) {
                            $Class = 'Medic';
                        }
                        if ($Class == 4) {
                            $Class = 'Engineer';
                        }
                        $Kills = $row['Kills'];
                        if ($Kills == 0) {
                            $Kills = 1;
                        }
                        $Deaths = $row['Deaths'];
                        if ($Deaths == 0) {
                            $Deaths = 1;
                        }
                        $Kdr = round($Kills / $Deaths, 2);
                        $Points = $row['Points'];

                        $TimePlayed = $row['TotalTime'];
                        if ($TimePlayed == 0) {
                            $TimePlayed = 1;
                        } else {
                            $TimePlayed = round(($TimePlayed / 3600), 0);
                        }

                        $TotalVisits = $row['TotalVisits'];
                        $CharacterID = $row['CharacterID'];

                        echo "<tr>";
                        echo "<td>$Rank</td>";
                        echo "<td><b>$SoldierName</b></td>";
                        echo "<td>$Level</td>";
                        echo "<td>$Class</td>";
                        if ($Kdr > 3.9) {
                            echo "<td><font color=\"red\"><b>$Kdr</b></font></td>";
                        } else if ($Kdr > 2.5 && $Kdr < 4) {
                            echo "<td><font color=\"orange\"><b>$Kdr</b></font></td>";
                        } else {
                            echo "<td><font color=\"limegreen\">$Kdr</font></td>";
                        }
                        echo "<td>$Kills</td>";
                        echo "<td>$Deaths</td>";
                        echo "<td>$Points</td>";
                        echo "<td>$TimePlayed</td>";
                        echo "<td>$TotalVisits</td>";
                        echo "<td>$CharacterID</td>";
                        echo "</tr>";
                        $Rank++;
                    }
                    echo "</table>";
                }
            }
            ?>
            </td></tr>             
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T03:40:30.897

我不确定 MySQL，但我知道在 SQL 中，当您执行聚合函数（如 SUM( `Kills`)）时，您无法通过 $row['kills'] 引用该行。我不知道这是否是您的问题，但您可以尝试`Kills`在 SELECT 语句中将 SUM( ) 作为“kills”。为您的聚合 SELECT 执行此操作将允许您以这种方式引用它们。

# iphone - 如何从 controller.m 更新情节提要 uiviewcontroller 的标签/文本字段？

> ID：10393231
> 
> 赞同：3
> 
> 时间：2012-05-01T03:33:53.650
> 
> 标签：iphone, objective-c

我是 iphone 开发新手，我目前正在使用 xcode 4.2。

我在情节提要中画了一个 UIViewController。我在 UIViewController 中放了一些标签。它与一个controller.m 文件相关联。

如何从 controller.m 文件的 viewdidload 函数更新标签中的文本？

我不知道如何获取情节提要上 uiviewcontroller 中元素的变量名称或句柄名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T03:59:49.457

如果您通过情节提要创建事物，最简单的方法是为每个 UI 元素创建一个 IBOutlet 属性。这会为 UIElement 创建一个实例属性，然后您可以在代码中引用该属性 - 设置状态、获取值等。

您可以通过在 UIElement 上按住 Control 单击并拖动到您的 UIViewController.h 文件来执行此操作（拆分视图：RETURN-Command-Option：显示对应项）。XCode 将弹出一个对话框，让您可以命名它（同样的手势也可以让您创建 IBActions - UIElement 与之交互时调用的函数）。如果这更容易，您还可以在 ViewController 中 UIElements 的左侧边栏列表上按住 Control 单击并拖动。

有 YouTube 视频比我的弱解释更能说明这一点。起初我对 @storyboard/IB 持怀疑态度，因为我不喜欢 UI*魔术*，更喜欢通过代码来做事，或者至少看到魔术产生的代码，但它确实工作得很好并且节省了一些乏味UI 编码。

需要注意的一个问题：如果您创建一个 IBOutlet 然后删除 UIElement，您将因为错误的引用而出现代码错误。这些很容易找到和修复。UIViewController 对象也将包含这些引用，并会导致令人不快的崩溃 - 所以按住 Control 键单击 UIViewController 对象（或使用 Inspector 面板）以及任何具有橙色三角形 == 损坏的元素。

# python - 用户注册导致 IntegrityError

> ID：10393232
> 
> 赞同：0
> 
> 时间：2012-05-01T03:33:54.600
> 
> 标签：python, django

用户注册后，会显示以下 IntegrityError：

```
IntegrityError at /users/signup
(1062, "Duplicate entry '1' for key 2") 
```

即使用户收到错误，他也可以定期登录。用户与用户配置文件一起创建。

这是导致错误的 /users/signup 视图：

```
def signup(request):
  signup_form = SignupForm(request.POST)
  #goal = request.POST.get('goal')
  goal = None
  if signup_form.is_valid():
    username = signup_form.cleaned_data['username']
    email = signup_form.cleaned_data['email']
    password = signup_form.cleaned_data['password']
    user = User.objects.create_user(username, email, password)
    user = authenticate(username=username, password=password)
    login(request, user)
    return HttpResponseRedirect("/")
  else:
    return render_to_response("authorize.html", {'signup_form': signup_form, 'goal': goal}, context_instance=RequestContext(request)) 
```

这是我的 /user/models.py：

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save
from main.models import Goal

class UserProfile(models.Model):
  user = models.OneToOneField(User)
  joined_goals = models.ManyToManyField(Goal, related_name="joined_goals")
  followingGoals = models.ManyToManyField(Goal, related_name="following_goals")

  def __unicode__(self):
    return self.user.username

  def get_goals(self):
    try:
      goals = Goal.objects.filter(user=self.user)
      return goals
    except Goal.DoesNotExist:
      return []

def create_user_profile(sender, instance, created, **kwargs):
  if created:
    userProfile = UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

我已多次删除 MySQL 数据库中的所有表并运行 python manage.py syncdb，但每次创建新用户后我仍然会遇到相同的错误。

编辑：我没有在我的本地主机上收到此错误，仅在我的远程主机上。我在本地主机上使用 sqlite，在远程主机上使用 mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:42:34.303

我将猜测一下，并建议它可能是您的 post_save 信号被多次注册，因为 models.py 被多次加载。您没有以安全的方式注册您的信号。也许它试图在 save() 上多次快速创建配置文件并收到错误。

查看有关[防止重复信号的文档](https://docs.djangoproject.com/en/dev/topics/signals/#preventing-duplicate-signals)

尝试将最后一行更改为：

```
post_save.connect(create_user_profile, sender=User, 
                    dispatch_uid="user_create_profile") 
```

拥有调度 uid 将导致它只注册一次，即使它由于导入而被多次调用。

# jquery - jquery ajax 调用不会运行 php 脚本

> ID：10393233
> 
> 赞同：0
> 
> 时间：2012-05-01T03:34:34.260
> 
> 标签：jquery, ajax, database

我正在尝试为用户进行简单的名称更改，这会将他们的新名称保存到数据库中。对于ajax调用，我正在运行这样的东西

```
var new_name = prompt("Enter your new name" , "Charlie Murphy");

  if(new_name == "" || new_name == null){
    alert("Please actually enter a name");
  }

  else{

    $.ajax({

       url : "./db_scripts/change_name.php",
       type : "POST",
       data : {name : new_name}

    }); 
```

我的php去了

```
<?php

$new_name = $_POST['name'];
echo $new_name;

?> 
```

只是为了尝试让帖子正常工作，但名称没有打印到浏览器。我很肯定我的路径名适合 db_script，因为我还有其他正在运行的脚本。

帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T03:37:12.227

使用`success`处理程序从您的服务器页面接收数据

```
$.ajax({
       url : "./db_scripts/change_name.php",
       type : "POST",
       data : {name : new_name},
       success: function(data){
         alert(data);
       }
    }); 
```

# drupal-7 - 如何在 drupal 主页添加新的内容类型条目链接？

> ID：10393235
> 
> 赞同：0
> 
> 时间：2012-05-01T03:35:08.890
> 
> 标签：drupal-7

我正在创建一个 Drupal-7.12 测试站点。添加新的内容类型“著名飞机”后，如何在我们的用户登录首页的“添加内容”菜单下添加类似于“博客条目”链接的“著名飞机条目”链接？

自己的答案：

主页 » 管理 » 人员 >> 权限选项卡

节点

*   著名飞机：创造新内容
*   著名飞机：编辑自己的内容
*   著名飞机：编辑任何内容
*   著名飞机：删除自己的内容
*   著名飞机：删除任何内容

检查上面的经过身份验证的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:56:26.690

如果您已成功创建内容类型，则链接将自动出现在节点/添加链接下。但我不确定你是指顶部的黑色工具栏还是其他地方。

如果您需要在工具栏顶部添加链接，然后转到创建内容，然后到您著名的飞机添加内容表单，在顶部您会看到一个黑色加号图标，它将帮助您在顶部添加链接黑色工具栏中的也称为快捷栏。

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:21:20.733

如果你想让普通用户添加内容，那么你需要设置权限。在“人员”>“权限”下，您将找到节点。您必须在此处添加权限，以便用户可以添加内容。但是，是的，向直接添加内容的用户授予权限会带来很多安全隐患。

所以采取相应的行动。希望这能解决您的问题。

# c++ - HID 设备编程 - 它是否适用于 C++（SETUPAPI.dll 和 HID.dll）

> ID：10393237
> 
> 赞同：3
> 
> 时间：2012-05-01T03:36:07.660
> 
> 标签：c++, dll, device-driver, hid, setupapi

我在问@Stackoverflow 时有点新意，但是在我大多数科目的最终项目的这些日子里，它是我作为圣经（除了 Ritchie 的 C 书）最接近的东西。无论如何，我的问题是关于与 HID 设备通信的应用程序所需的库以及使用 C++ 进行通信的可能性。

我不需要固件方面的帮助，我的设备已经按照我期望的方式工作。然而，我对 HID 设备编程的唯一经验是使用**C**（Windows - VS2010），现在我正处于编译器类的最终项目中，我们将信息发送到带有矩阵屏幕的设备以显示“东西”。然而，我的搭档需要在**C++**中做一些事情，这可以为我们节省大量时间（考虑到它在两天内到期，这很好）。

这样做的全部意义在于询问它是否可以像我在**C中已经拥有的方式（具有明显的调整）和****C++**中的某些部分代码一样完成，并且仍然与 SetupApi.DLL 和 HID.DLL 兼容

任何形式的建议、指示或指示都深表感谢。我包括到目前为止我使用的代码。

***请原谅我可能有西班牙语和混乱的所有评论***

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <windows.h>
#include <SETUPAPI.H>

//----------------------------------------------

#define RICH_VENDOR_ID      0x0000
#define RICH_USBHID_GENIO_ID    0x2012

#define INPUT_REPORT_SIZE   5
#define OUTPUT_REPORT_SIZE  2
//----------------------------------------------
char c=0x0;
DWORD BytesRead = 0;
DWORD BytesWritten = 0;
unsigned char reporteEntrada[INPUT_REPORT_SIZE+1];
unsigned char reporteSalida[OUTPUT_REPORT_SIZE+1];
int status = 0;
static unsigned char dato = 0x01;
static unsigned char numLED = 1;
unsigned char palabra[192]={0};
int desplegar,valorled;
desplegar=0;
valorled=0;
unsigned char temporal;
//unsigned char ch;
//unsigned int index;
typedef struct _HIDD_ATTRIBUTES {
    ULONG   Size; // = sizeof (struct _HIDD_ATTRIBUTES)
    USHORT  VendorID;
    USHORT  ProductID;
    USHORT  VersionNumber;
} HIDD_ATTRIBUTES, *PHIDD_ATTRIBUTES;

typedef VOID    (__stdcall *PHidD_GetProductString)(HANDLE, PVOID, ULONG);
typedef VOID    (__stdcall *PHidD_GetHidGuid)(LPGUID);
typedef BOOLEAN (__stdcall *PHidD_GetAttributes)(HANDLE, PHIDD_ATTRIBUTES);
typedef BOOLEAN (__stdcall *PHidD_SetFeature)(HANDLE, PVOID, ULONG);
typedef BOOLEAN (__stdcall *PHidD_GetFeature)(HANDLE, PVOID, ULONG);

//----------------------------------------------

HINSTANCE                       hHID                    = NULL;
PHidD_GetProductString          HidD_GetProductString   = NULL;
PHidD_GetHidGuid                HidD_GetHidGuid         = NULL;
PHidD_GetAttributes             HidD_GetAttributes      = NULL;
PHidD_SetFeature                HidD_SetFeature         = NULL;
PHidD_GetFeature                HidD_GetFeature         = NULL;
HANDLE                          DeviceHandle            = INVALID_HANDLE_VALUE;

unsigned int moreHIDDevices=TRUE;
unsigned int HIDDeviceFound=FALSE;

unsigned int terminaAbruptaEInstantaneamenteElPrograma=0;

void Load_HID_Library (void) {
    hHID = LoadLibrary("HID.DLL");
    if (!hHID) {
        printf("Failed to load HID.DLL\n");
        return;
    }

    HidD_GetProductString = (PHidD_GetProductString) GetProcAddress(hHID, "HidD_GetProductString");
    HidD_GetHidGuid       = (PHidD_GetHidGuid) GetProcAddress(hHID, "HidD_GetHidGuid");
    HidD_GetAttributes    = (PHidD_GetAttributes) GetProcAddress(hHID, "HidD_GetAttributes");
    HidD_SetFeature       = (PHidD_SetFeature) GetProcAddress(hHID, "HidD_SetFeature");
    HidD_GetFeature       = (PHidD_GetFeature) GetProcAddress(hHID, "HidD_GetFeature");

    if (   !HidD_GetProductString
        || !HidD_GetAttributes
        || !HidD_GetHidGuid
        || !HidD_SetFeature
        || !HidD_GetFeature ) {
        printf("Couldn't find one or more HID entry points\n");
        return;
    }
}

int Open_Device(void) {
    HDEVINFO                            DeviceInfoSet;
    GUID                                InterfaceClassGuid;
    SP_DEVICE_INTERFACE_DATA            DeviceInterfaceData;
    PSP_DEVICE_INTERFACE_DETAIL_DATA    pDeviceInterfaceDetailData;
    HIDD_ATTRIBUTES                     Attributes;  
    DWORD                               Result;
    DWORD                               MemberIndex = 0;
    DWORD                               Required;

    //Validar si se "cargó" la biblioteca (DLL)
    if (!hHID)
        return (0);

    //Obtener el Globally Unique Identifier (GUID) para dispositivos HID
    HidD_GetHidGuid (&InterfaceClassGuid);
    //Sacarle a Windows la información sobre todos los dispositivos HID instalados y activos en el sistema
    // ... almacenar esta información en una estructura de datos de tipo HDEVINFO
    DeviceInfoSet = SetupDiGetClassDevs(&InterfaceClassGuid, NULL, NULL, DIGCF_PRESENT|DIGCF_INTERFACEDEVICE);
    if (DeviceInfoSet == INVALID_HANDLE_VALUE)
        return (0);

    //Obtener la interfaz de comunicación con cada uno de los dispositivos para preguntarles información específica
    DeviceInterfaceData.cbSize = sizeof(SP_DEVICE_INTERFACE_DATA);
    while (!HIDDeviceFound) {
        // ... utilizando la variable MemberIndex ir preguntando dispositivo por dispositivo ...
        moreHIDDevices = SetupDiEnumDeviceInterfaces (DeviceInfoSet, NULL, &InterfaceClassGuid,
                                                                        MemberIndex,&DeviceInterfaceData);
        if (!moreHIDDevices) {
            // ... si llegamos al fin de la lista y no encontramos al dispositivo ==> terminar y marcar error
            SetupDiDestroyDeviceInfoList(DeviceInfoSet);    
            return (0); //No more devices found
        } else {
            //Necesitamos preguntar, a través de la interfaz, el PATH del dispositivo, para eso ...
            // ... primero vamos a ver cuántos caracteres se requieren (Required)
            Result = SetupDiGetDeviceInterfaceDetail(DeviceInfoSet,&DeviceInterfaceData,NULL,0,&Required,NULL);
            pDeviceInterfaceDetailData = (PSP_DEVICE_INTERFACE_DETAIL_DATA)malloc(Required);
            if (pDeviceInterfaceDetailData == NULL) {
                printf("Error en SetupDiGetDeviceInterfaceDetail\n");
                return (0);
            }
            //Ahora si, ya que el "buffer" fue preparado (pDeviceInterfaceDetailData{DevicePath}), vamos a preguntar PATH
            pDeviceInterfaceDetailData->cbSize = sizeof(SP_DEVICE_INTERFACE_DETAIL_DATA);
            Result = SetupDiGetDeviceInterfaceDetail (DeviceInfoSet,&DeviceInterfaceData,pDeviceInterfaceDetailData,
                                                                                                    Required,NULL,NULL);
            if (!Result) {
                printf("Error en SetupDiGetDeviceInterfaceDetail\n");
                free(pDeviceInterfaceDetailData);
                return(0);
            }
            //Para este momento ya sabemos el PATH del dispositivo, ahora hay que preguntarle ...
            // ... su VID y PID, para ver si es con quien nos interesa comunicarnos
            printf("Found? ==> ");
            printf("Device: %s\n",pDeviceInterfaceDetailData->DevicePath);

            //Obtener un "handle" al dispositivo
            DeviceHandle = CreateFile (pDeviceInterfaceDetailData->DevicePath,
                                    GENERIC_READ|GENERIC_WRITE,
                                    FILE_SHARE_READ|FILE_SHARE_WRITE,
                                    (LPSECURITY_ATTRIBUTES)NULL,
                                    OPEN_EXISTING,
                                    0,
                                    NULL);

            if (DeviceHandle == INVALID_HANDLE_VALUE) {
                printf("¡¡¡Error en el CreateFile!!!\n");
            } else {
                //Preguntar por los atributos del dispositivo
                Attributes.Size = sizeof(Attributes);
                Result = HidD_GetAttributes (DeviceHandle,&Attributes);
                if (!Result) {
                    printf("Error en HIdD_GetAttributes\n");
                    CloseHandle(DeviceHandle);
                    free(pDeviceInterfaceDetailData);
                    return(0);
                }
                //Analizar los atributos del dispositivo para verificar el VID y PID
                printf("MemberIndex=%d,VID=%04x,PID=%04x\n",MemberIndex,Attributes.VendorID,Attributes.ProductID);
                if ((Attributes.VendorID == RICH_VENDOR_ID) && (Attributes.ProductID == RICH_USBHID_GENIO_ID)) {
                    printf("USB/HID GenIO ==> ");
                    printf("Device: %s\n",pDeviceInterfaceDetailData->DevicePath);
                    HIDDeviceFound=TRUE;
                } else
                    CloseHandle(DeviceHandle);    

            }
            MemberIndex++;
            free(pDeviceInterfaceDetailData);
            if (HIDDeviceFound) {
                printf("Dispositivo HID solicitado ... ¡¡¡localizado!!!, presione <ENTER>\n");
                getchar();
            }
        }
    }
    return(1);
}

void Close_Device (void) {
    if (DeviceHandle != NULL) {
        CloseHandle(DeviceHandle);
        DeviceHandle = NULL;
    }
}

int chToIndex(unsigned char ch){
    if((ch>='0')&&(ch<='9')){
        return ch-48;
    }else if((ch>='A')&&(ch<='Z')){
        return ch-55;
    }else if((ch>='a')&&(ch<='z')){
        return ch-61;
    }else{
        switch (ch){
        case '*': return 62;
        //  break;
        case '+': return 63;
        //  break;
        case '-': return 64;
            //break;
        case '/': return 65;
            //break;
        case '=': return 66;
        //  break;
        case '>': return 67;
        //  break;
        case '<': return 68;
        //  break;
        case '!': return 69;
        //  break;
        case '.': return 70;
        //  break;
        case '&': return 71;
        //  break;
        case '^': return 72;
        //  break;
        case '(': return 73;
        //  break;
        case ')': return 74;
        //  break;
        case '[': return 75;
        //  break;
        case ']': return 76;
        //  break;
        case ',': return 77;
        //  break;
        case ';': return 78;
        //  break;
        case ':': return 79;
        //  break;
        case 0x20: return 80;
        default: return 81;
        //  break;
        }
    }

}
int Touch_Device (void) {
    int z;
    int index;
    int col,lin;
    unsigned char ch;

    if (DeviceHandle == NULL)   //Validar que haya comunicacion con el dispositivo
        return 0;

        if(c != '27' )
        {
            printf("Selecciona accion:\n1) Limpiar Pantalla\n2) Imprimir todos caracteres\n3) Escribir caracter\n4) Escribir string\n5) Salir\n");
            desplegar=getch();
            desplegar=getch();
            if((desplegar=='5')||(desplegar==(char)'27')){
                terminaAbruptaEInstantaneamenteElPrograma=1;
            }
            else if(desplegar=='4'){
                lin=0;
                col=0;
                index=0;
                printf("Escribe texto (termina con Enter):\n");
                scanf("%s",palabra);
                while(palabra[index]!='\0'){
                    z++;
                }
                printf("Longitud de palabra: %d",z);
                while((palabra[index]!='\0')){
                    if((palabra[index]==NULL)&&(palabra[index+1]!=NULL))
                        palabra[index]=0x20;
                    reporteSalida[0]=0x00;
                    reporteSalida[1]=0x04;
                    reporteSalida[2]=(char)chToIndex(palabra[index]);
                    reporteSalida[3]=(char)lin;
                    reporteSalida[4]=(char)col;
                    status = WriteFile(DeviceHandle,reporteSalida,INPUT_REPORT_SIZE+1,&BytesWritten,NULL);
                    if (!status)
                        printf("Error en el WriteFile %d %d\n",GetLastError(),BytesWritten);
                    else
                        printf("Se enviaron %d bytes al dispositivo (posX=%d, posY=%d, dato=%d)\n",BytesWritten,reporteSalida[4],reporteSalida[3],reporteSalida[2]);
                    if(col>=23){
                        lin++;
                        col=0;
                    }
                    if(lin>=7){
                        lin=0;
                    }
                    col++;
                    index++;
                }
            }
            else if (desplegar=='3'){
                reporteSalida[0]=0x00;
                reporteSalida[1]=0x04;
                printf("Que caracter deseas desplegar: ");
                ch=getch();
                printf("\n");
                z=chToIndex(ch);
                reporteSalida[2]=(char)z;
                do{
                printf("En que renglon en y (0-7): ");
                scanf("%d",&desplegar);
                printf("\n");
                }while((desplegar<0)&&(desplegar>7));
                reporteSalida[3]=(char)desplegar;
                do{
                printf("En que columna en x (0-23): ");
                scanf("%d",&desplegar);
                printf("\n");
                }while((desplegar<0)&&(desplegar>23));
                reporteSalida[4]=(char)desplegar;
                printf("ReporteSalida: %02X %02X %02X %02X %02X \n",(unsigned char)reporteSalida[0],
                    (unsigned char)reporteSalida[1],
                    (unsigned char)reporteSalida[2],
                    (unsigned char)reporteSalida[3],
                    (unsigned char)reporteSalida[4]);

                status = WriteFile(DeviceHandle,reporteSalida,INPUT_REPORT_SIZE+1,&BytesWritten,NULL);
                if (!status)
                    printf("Error en el WriteFile %d %d\n",GetLastError(),BytesWritten);
                else
                    printf("Se enviaron %d bytes al dispositivo (posX=%d, posY=%d, dato=%d)\n",BytesWritten,reporteSalida[4],reporteSalida[3],reporteSalida[2]);

            }
            else if (desplegar=='2'){
                lin=0;
                col=0;
                for (index=0;index<=80;index++){
                    reporteSalida[0]=0x00;
                    reporteSalida[1]=0x04;
                    reporteSalida[2]=(char)index;
                    reporteSalida[3]=(char)lin;
                    reporteSalida[4]=(char)col;
                    status = WriteFile(DeviceHandle,reporteSalida,INPUT_REPORT_SIZE+1,&BytesWritten,NULL);
                    if (!status)
                        printf("Error en el WriteFile %d %d\n",GetLastError(),BytesWritten);
                    else
                        printf("Se enviaron %d bytes al dispositivo (posX=%d, posY=%d, dato=%d)\n",BytesWritten,reporteSalida[4],reporteSalida[3],reporteSalida[2]);
                    if(col>=23){
                        lin++;
                        col=0;
                    }
                    if(lin>=7){
                        lin=0;
                    }
                    col++;
                }
            }
            else if(desplegar=='1'){
                printf("Limpiando pantalla ...\n");
                reporteSalida[0]=0x00;
                reporteSalida[1]=0x03;
                reporteSalida[2]=0;
                status = WriteFile(DeviceHandle,reporteSalida,INPUT_REPORT_SIZE+1,&BytesWritten,NULL);
                if (!status)
                    printf("Error en el WriteFile %d %d\n",GetLastError(),BytesWritten);
                else
                    printf("Escritos %d\n",BytesWritten);
            }
            else{
                Touch_Device();
            }
        }
    return status;
}

void main () {
    Load_HID_Library();
    if (Open_Device()) {
        printf("Vamos bien\n");
        while ((c=getch()!=27)
            &&(!terminaAbruptaEInstantaneamenteElPrograma)) {
                Touch_Device();
                Sleep(500);
        }

    } else {
        printf(">:(\n");
    }
    Close_Device();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:58:19.360

总的来说，您可以将任何 C 代码编译为 C++。您是否尝试过将其编译为 C++ 并遇到任何错误？

您的问题的答案是，是的，您可以像使用 C 一样使用 C++ 中的 SETUPAPI.DLL 和 HID.DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:52:03.830

将您的 C 源文件更改为 C++。如果您使用的是 VS，它可以像更改文件扩展名 (.c -> .cpp) 并修复一些警告问题一样简单。

* * *

C++ 程序可以使用 setupapi.dll（C 库），因为 API 声明如下。

（在头文件中）

```
#ifdef __cplusplus
extern "C" {
#endif

int declaration_of_c_function(...);

#ifdef __cplusplus
}
#endif 
```

extern "C" 是 C++ 中引入的用于启用 C/C++ 集成的新语法。

也就是说，如果你不会 C++，这并不简单。

# php - 为什么我的日期格式功能只有在使用单引号时才有效？

> ID：10393242
> 
> 赞同：0
> 
> 时间：2012-05-01T03:36:23.113
> 
> 标签：php

这是PHP中的日期格式函数。

```
function formatMyDateNicely($strTimeString) {
    return date('F j, y \a\t g:iA', strtotime($strTimeString));   
} 
```

它输出类似于“4 月 23 日，12 日下午 12:01”的日期。

但是，这个使用双引号的函数不起作用。

```
function formatMyDateNicely($strTimeString) {
    return date("F j, y \a\t g:iA", strtotime($strTimeString));   
} 
```

此函数输出类似于“April 23, 12 a 12:01PM”的日期。

为什么更改引号类型很重要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T03:38:08.793

`\t`是一个制表符。单引号禁止解释转义序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T03:39:55.210

由于双引号，它将`\t`视为制表符。另一种选择是“双重转义” `t`：

```
return date("F j, y \a\\t g:iA", strtotime($strTimeString)); 
```

# string - 从字符串路径获取文件名？

> ID：10393248
> 
> 赞同：35
> 
> 时间：2012-05-01T03:37:30.890
> 
> 标签：string, batch-file, filenames

如何从此字符串中获取文件名？

```
"C:\Documents and Settings\Usuario\Escritorio\hello\test.txt" 
```

输出：

```
"test.txt" 
```

我真的想在发布之前找到这个，但所有结果都被污染了，他们谈论从当前目录获取文件名（我必须只使用字符串）

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-01T03:55:54.680

**方法一**

```
for %%F in ("C:\Documents and Settings\Usuario\Escritorio\hello\test.txt") do echo %%~nxF 
```

键入`HELP FOR`以获取更多信息。

**方法二**

```
call :sub "C:\Documents and Settings\Usuario\Escritorio\hello\test.txt"
exit /b

:sub
echo %~nx1
exit /b 
```

键入`HELP CALL`以获取更多信息。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-01-18T12:38:20.937

如果您的路径作为参数出现，只需使用：

`%~nx1`（1 是第一个参数，我们假设它是第一个）

`echo %~nx1`会直接返回 test.txt

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-01T04:14:56.873

假设您需要“c:\temp”目录树下的文件名（包括子目录）：

```
FOR /R c:\temp %i in (*.*) do echo %~nxi 
```

# ajax - AJAC MVC3 请求对象和原始 Ajax 数据，到底在哪里？

> ID：10393250
> 
> 赞同：2
> 
> 时间：2012-05-01T03:37:53.413
> 
> 标签：ajax, asp.net-mvc-3, httpresponse

如果这是表单的常规帖子，我可以转到 Request.Form['somevalue'] 并获取值。如果这是一个带有查询字符串的 get，我可以转到 Request.QueryString["somevalue"] 并获取该值。

发布 ajax 请求时原始数据在哪里。我需要过滤方法中原始数据字符串中的一个值。

任何帮助将不胜感激！！

以下编辑：

```
public class ValidateAntiForgeryId : FilterAttribute, IAuthorizationFilter {
    public void OnAuthorization(AuthorizationContext filterContext) {
        if (filterContext == null) {
            throw new ArgumentNullException("filterContext");
        }

        Guid filterGuid;
        Guid.TryParse(filterContext.RequestContext.HttpContext.Request.Form["__sessionId"], out filterGuid);

        if (filterGuid == Guid.Empty)
            throw new AuthenticationException("Authentication failure");
        try {
            var cookieGuid = (Guid)filterContext.RequestContext.HttpContext.Items["SessionId"];
        } catch {
            throw new AuthenticationException("Authentication failure");
        }
    } 
```

发布的数据如下所示：

```
{"SsnLastFour":"2222","AccountNumber":"B112233","__sessionId":"dca0a504-3c40-4118-ae19-afefb9bfc8bd"} 
```

我需要访问过滤器内的 __sessionId 块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T03:57:35.710

AJAX 帖子没有什么神奇之处。它们只是普通的旧 HTTP。这意味着您拥有普通的旧 HTTP post 值和/或普通的 HTTP Get 值。

如果您没有看到它们，则可能意味着您实际上并未提交它们。

编辑：

您在原始问题中未包含的两个问题：1）这是 JSON，以及 2）这是在 AuthorizationFilter（而不是操作方法）中。

两者都改变​​了答案。由于 ASP.NET 本身不理解 JSON 后的值，因此您必须通过 Request.InputStream 解析它们。MVC3 默认有一个 JSON 模型绑定器，但 AuthorizationFilters 在模型绑定器执行之前执行，因此您将在模型绑定器执行之前访问事物，因此不会填充 FormsCollection（Request.Form[] 不起作用或者，因为正如我所说，asp.net 本身并不理解 JSON）。

您可能会发现通过 nuget 安装 JSON.net 可能有助于完成此任务。或者您可能只是编写一个简单的解析例程，因为您确切地知道您在寻找什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:44:19.187

您可以像在普通形式的帖子中一样接受参数值。

前任 ：

```
$.get("User/Get", { userId : "24"} ,function(data){
  alert(data);
}); 
```

或者

```
$("#yourDivId").load("User/Get?userId=23"); 
```

您的操作方法应如下所示

```
public ActionResult Get(int userId)
{
 // you have value present in userId
  if(Request.IsAjax())
  {
     return View("Partial/MyPartialView");
  }
  return View();
} 
```

您必须记住的一件事是，您的操作方法的参数名称应该与您的参数/查询字符串名称相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:07:29.163

fitlerContext 有一个 ActionParameters 集合，它应该具有解析的 JSON 属性（以防万一）。这可能比解析 InputStream 更容易。

```
var sessionId = filterContext.ActionParameters["__sessionId"]; 
```

# html - 如何在内联元素上使用 ::first-letter

> ID：10393252
> 
> 赞同：5
> 
> 时间：2012-05-01T03:38:14.813
> 
> 标签：html, css

```
p{display:inline;...}
<p>Hello</p>
p::first-letter{color: red;} 
```

我想在那个 p 上使用 ::first-letter。但它是一个内联元素，根据 W3C，它不起作用。怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T03:49:59.163

The `:first-letter` as defined in the spec [http://www.w3.org/TR/CSS2/selector.html#first-letter](http://www.w3.org/TR/CSS2/selector.html#first-letter) only applies to a **block** element.

If you want you could use `display:inline-block` to make it work. Refer to [http://jsfiddle.net/fZGFH/1/](http://jsfiddle.net/fZGFH/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T04:59:41.343

你可以给`display:inline-block;` 你的**p**标签

使用 css display:block; 和 display:inline;，我们可以将元素的属性从块更改为内联或从内联更改为块......

这是您如何执行此操作的代码

```
 <!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>

  p {
      background:red;
      display:inline-block;
  }

p:first-letter
{
color:black;
    font-size:50px;

}
</style>
</head>
<body>
<p>CSS, short for Cascading Style Sheets, is a language used to control the presentation of HTML and XML documents. A basic CSS document is made out of rule sets. Each rule set starts with a selector, a pattern that matches elements in an HTML or XML document. The selector is followed by a block of ...</p>
</body>
</html> 
```

演示：- [http://jsbin.com/eponir/4/edit](http://jsbin.com/eponir/4/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T03:58:38.410

这是内联和首字母大小写的样式：

```
p{display:inline-block;}
p:first-letter {color:red} 
```

# jquery - jqGrid 无法正常显示

> ID：10393256
> 
> 赞同：0
> 
> 时间：2012-05-01T03:38:37.177
> 
> 标签：jquery, jqgrid

我正在使用 jQuery 网格插件 jqGrid 来显示数据数组。

我想要实现的是 1\. 默认情况下，该网格是空的。2\. 当用户点击搜索按钮时，它将使用 AJAX 加载数据 3\. 数据将加载到网格中。

从附件中，我有这个错误

1.  网格宽度不是 100% px，它是两个小
2.  寻呼机不显示。如何使用方法来控制寻呼机？

如何解决？有样品吗？

谢谢

![截屏](../Images/98f71c7a501d2b51bdc23cf7db9d53da.png)

```
<h2>Search</h2>
<form id="project_search_form">
<table class="grid">
...
    <tr>        
        <td><a  class="form_button" onclick="searchProject();" href="#">search</a></td> 
    </tr>
</table>
</form>

<table id="projectList"></table> 
<div id="projectPager"></div>

<script type="text/javascript">

$(document).ready(function(){

    jQuery("#projectList").jqGrid({ 
        url:'server.php?q=2', 
        datatype: "json", 
        colNames:['ID','Name'], 
        colModel:[ {name:'projectId',index:'id', width:55} , {name:'name',index:'name', width:55}], 
        rowNum:10, 
        rowList:[10,20,30], 
        pager: '#pager5', 
        sortname: 'id', 
        viewrecords: true, 
        sortorder: "desc", 
        caption:"Simple data manipulation", 
        editurl:"someurl.php" }).navGrid("#projectPager",{edit:false,add:false,del:false}); 
});

function searchProject(){
    var param =  $('#project_search_form').serialize();
     BaseAjaxUtil.object_search(param, 
              {
                 callback:function(data){                        
                     var jsongridRows = eval("("+data+")");

                     for(var i = 0; i < jsongridRows.length; i++) {
                        var datarow = jsongridRows[i];      
                        var su=jQuery("#projectList").jqGrid('addRowData',i+1, datarow); 
                        // if(su) alert("Succes. Write custom code to add data in server"); else alert("Can not update");
                     }

                 },
                 errorHandler:function(errorString) { alert("error:"+errorString); }            
                }
              );        
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:10:12.547

您可以使用该`autowidth: true`选项来控制宽度。从[jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)：

> 设置为 true 时，网格宽度会自动重新计算为父元素的宽度。这仅在最初创建网格时完成。为了在父元素更改宽度时调整网格大小，您应该应用自定义代码并为此使用 setGridWidth 方法

然后你只需要确保你的父元素具有适当的宽度。

# c - C结构代码编译但不运行

> ID：10393258
> 
> 赞同：0
> 
> 时间：2012-05-01T03:38:58.777
> 
> 标签：c, structure

我今天学习了（自学）C语言结构的基础知识，并编写了这个简单的代码。它正在编译没有任何错误。我知道成功编译并不能保证软件没有错误。执行时，它仅扫描两个结构变量的输入并给出错误显示。为了简单起见，我选择了一个字符来存储书名。我无法找出这里的错误。你能找到一个吗？

```
#include<stdio.h>

int main(void)
{
    struct book
    {   char name;
        float price;
        int pages;
    };

    struct book b[3];

    int i;

    for (i = 0; i <= 2; i++){
        printf("\nEnter name, price and pages ");
        scanf("%c %f %i", &b[i].name, &b[i].price, &b[i].pages);
    }

    for (i = 0; i <= 2; i++)
        printf("\n%c %f %i",b[i].name, b[i].price, b[i].pages);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:57:33.867

您需要通过添加`while((ch=getchar())!='\n');`( 刷新输入缓冲区) 删除“额外”输入（请声明`char ch;`）：

```
for (i = 0; i <= 2; i++){
   printf("\nEnter name, price and pages ");
   scanf("%c %f %i",&b[i].name,&b[i].price, &b[i].pages);
   while((ch=getchar())!='\n'); //eat the chars
 } 
```

教程/帖子：

1.  [“刷新”输入流](http://www.daniweb.com/software-development/cpp/threads/90228/flushing-the-input-stream)
2.  [如何从控制台获取用户输入——安全。](http://www.daniweb.com/software-development/c/code/268836/how-to-get-user-input-from-console-safely)

# php - 从会话数据生成的临时 PDF 创建临时 URL

> ID：10393263
> 
> 赞同：0
> 
> 时间：2012-05-01T03:40:23.633
> 
> 标签：php, javascript, session, url, session-storage

我有一个网站可以创建一个 PDF，该 PDF 在用户将图像添加到购物车后生成。

您可以通过将鼠标悬停在图像上并单击“添加到 pullsheet”，然后单击侧栏中的“创建 PDF”来尝试： [https ://s140452.gridserver.com/property/4118](https://s140452.gridserver.com/property/4118)

因此，这会将您带到[https://s140452.gridserver.com/create-pdf/](https://s140452.gridserver.com/create-pdf/)这是从购物车生成的 pdf，它是仅存储在用户机器上的临时数据……换句话说，您不能分享它而不下载它并通过电子邮件发送给某人。

有没有办法将生成的 PDF 存储在临时 URL 中，以便用户在创建后直接共享它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:45:02.710

要么直接使用 URL 在 GET 请求中生成 PDF 并让他们共享该 URL，要么将 PDF 存储在文件系统中，将 ID 与其关联，并为用户提供包含该 ID 的 URL。

# ios - 在 ios 中处理 inapp 电子邮件

> ID：10393264
> 
> 赞同：0
> 
> 时间：2012-05-01T03:40:29.357
> 
> 标签：ios

我是 iOS 的新手，正在尝试在我的应用中添加不合适的电子邮件。我有一个屏幕，在该屏幕中按下电子邮件图标应该会打开 inapp 电子邮件。我有 inapp 电子邮件的代码。但是，该按钮已经是控制器上的一个插座。所以，我不知道如何将同一个按钮链接到具有 inapp 电子邮件代码的不同类/文件。我正在考虑设置一个委托，但不知道如何在邮件类中初始化委托。已经苦苦挣扎了几天...请帮助！

苏米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:17:03.780

试试 MFMailComposeViewController.... 这里是一些示例代码：确保导入 MEssageUI 框架并在 .h 中导入 MFMailComposeViewController/MessageUI 并符合其委托

```
 MFMailComposeViewController *mailView = [[MFMailComposeViewController alloc] init];

        [mailView setMailComposeDelegate:self];
    if ([MFMailComposeViewController canSendMail]) {
        [mailView setSubject:@"Interesting Apple News Article!"];
        NSString *mailString = [[NSString alloc] initWithFormat:@"Test!"]; 
        [mailView setMessageBody:mailString isHTML:NO];
        [mailView setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
        [self presentModalViewController:mailView animated:YES];
        [mailString release];
        [mailView release];
    } else 
        [mailView release];

    }

   -(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error {

if (error) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Mailing Error" message:[error localizedDescription] delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
    [alert show];
    [alert release];
    [self dismissModalViewControllerAnimated:YES];
} else {
    [self dismissModalViewControllerAnimated:YES];
}

  } 
```

# sql-server - SQL server refusing to cache plan for a fixed length parameterized IN clause

> ID：10393268
> 
> 赞同：0
> 
> 时间：2012-05-01T03:40:52.160
> 
> 标签：sql-server, ado.net

Using .NET 4.0, I have defined the following sqlcommand. When I execute the sqlcommand multiple times consecutively without making any changes, SQL Server refuses to cache the query plan.

```
string[] colors = new string[] { "red", "blue", "yellow", "green" };
string cmdText = "SELECT * FROM ColoredProducts WHERE Color IN ({0})";

string[] paramNames = tags.Select(
    (s, i) => "@color" + i.ToString()
).ToArray();

string inClause = string.Join(",", paramNames);
using (SqlCommand cmd = new SqlCommand(string.Format(cmdText, inClause))) {
    for(int i = 0; i < paramNames.Length; i++) {
       cmd.Parameters.AddWithValue(paramNames[i], tags[i]);
    }
    //Execute query here
} 
```

I know it's refusing the cache the plan because the following query was running at a fraction of the time after consecutive runs:

```
string[] colors = new string[] { "red", "blue", "yellow", "green" };
string cmdText = "SELECT * FROM ColoredProducts WHERE Color IN ({0})";

string inClause = string.Join(",", colors);
using (SqlCommand cmd = new SqlCommand(string.Format(cmdText, inClause))) {
       //Execute query here
} 
```

In my actual test case the param list is fixed at a size of exactly 2000\. The scenario I am attempting to optimize is selecting a specific set of 2000 records from a very large table. I would like for the query to be as fast as possible so I really want it to cached.

Sleepy post Edit: The question is, why wouldn't this plan get cached? And yes, I have confirmed that the query is not in the cache using sys.dm_exec_cached_plans and sys.dm_exec_sql_test.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:11:57.453

这是一个使用表值参数的想法。请让我们知道这种方法是否比您的大字符串执行得更好。还有其他想法，但这是最接近将您的颜色集视为数组的方法。

在 SQL Server 中：

```
CREATE TYPE dbo.Colors AS TABLE
(
  Color VARCHAR(32) -- be precise here! Match ColoredProducts.Color
     PRIMARY KEY
);
GO

CREATE PROCEDURE dbo.MatchColors
  @colors AS dbo.Colors READONLY
AS
BEGIN
  SET NOCOUNT ON;

  SELECT cp.* -- use actual column names please!
  FROM dbo.ColoredProducts AS cp -- always use schema prefix
  INNER JOIN @colors AS c
  ON cp.Color = c.Color; 
END
GO 
```

现在在 C# 中：

```
DataTable tvp = new DataTable();
tvp.Columns.Add(new DataColumn("Color"));

tvp.Rows.Add("red"); 
tvp.Rows.Add("blue"); 
tvp.Rows.Add("yellow"); 
tvp.Rows.Add("green"); 
// ...

using (connectionObject)
{
    SqlCommand cmd = new SqlCommand("dbo.MatchColors", connectionObject);
    cmd.CommandType = CommandType.StoredProcedure;
    SqlParameter tvparam = cmd.Parameters.AddWithValue("@colors", tvp);
    tvparam.SqlDbType = SqlDbType.Structured;
    // execute query here
} 
```

我几乎可以保证这将比`IN`具有大量参数的列表执行得更好，而不管 C# 代码中实际字符串的长度如何。

# r - 使用 ggplot2 创建非重叠堆积面积图

> ID：10393269
> 
> 赞同：7
> 
> 时间：2012-05-01T03:40:53.427
> 
> 标签：r, ggplot2

我以这种形式从网上抓取和处理了一些数据：

```
>head(dat)
  count  name          episode    percent
1   309   don 01-a-little-kiss 0.27081507
2   220 megan 01-a-little-kiss 0.19281332
3   158  joan 01-a-little-kiss 0.13847502
4   113 peggy 01-a-little-kiss 0.09903593
5   107 roger 01-a-little-kiss 0.09377739
6    81  pete 01-a-little-kiss 0.07099036 
```

我正在尝试创建一个堆积面积图，类似于这里的：[使用 ggplot2 制作堆积面积图](https://stackoverflow.com/questions/4651428/making-a-stacked-area-plot-using-ggplot2)

当我做一个

```
require(RCurl)
require(ggplot2)
link <- getURL("http://dl.dropbox.com/u/25609375/so_data/final.txt")
dat <- read.csv(textConnection(link), sep=' ', header=FALSE, 
             col.names=c('count', 'name', 'episode'))

dat <- ddply(dat, .(episode), transform, percent = count / sum(count))

ggplot(dat, aes(episode, percent, group=name)) + 
     geom_area(aes(fill=name, colour=name), position='stack') 
```

![在此处输入图像描述](../Images/e7636240c5673c2e2ec731057bd02132.png)

我得到了这个奇怪的图表。

我希望这些区域不要相互交叉，并填充整个画布，因为每个`episode`因素的总百分比等于 100%。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T04:21:43.970

那很有趣。你错过了一行（Lane 没有出现在 Tea Leaves...？），所以

```
dat2 <- rbind(dat,data.frame(count = 0,name = 'lane',
                    episode = '02-tea-leaves',percent = 0))

ggplot(arrange(dat2,name,episode), aes(x = episode,y = percent)) + 
  geom_area(aes(fill=name,group = name), position='stack') 
```

![在此处输入图像描述](../Images/8f5f240d908f0e0bcc2d6be2f4b69987.png)

似乎工作。但它也必须以正确的顺序排列，我不完全确定为什么。

# wolfram-mathematica - 在 Mathematica 中编写原始数据文件

> ID：10393271
> 
> 赞同：0
> 
> 时间：2012-05-01T03:41:41.037
> 
> 标签：wolfram-mathematica, hex

我在 Mathematica 中有一个数字，一个很大的数字。我什至用 16 进制得到了这个数字`OutputForm[]`。我基本上是在尝试以十六进制格式将数字写入文件。

请记住，我在这些示例中使用的是 123456 而不是我的 70,000 位数字。

每当我使用一个简单的`Put[123456, "file.raw"]`命令编写文件时，我都会得到一个原始数据文件，其中`3132333435360A`包含以行结尾的实际数据。

如果我使用`Put[OutputForm[BaseForm[123456, 16]], "file.raw"]`命令，我会得到一个原始数据文件，其中包含十六进制格式的数据，`31653234300A202020202031360A`但仍未写入原始数据。

我想要作为数据转储的数字的十六进制形式。

我尝试过`Export`,`BinaryWrite`和`DumpSave`, 但无法弄清楚。

我只是觉得头疼，我猜是因为我看不到我需要做的事情。

我尝试过的一件事是：

```
Export["file.raw", 123456]; 
```

但是文件不够原始。我的意思是有标题数据和额外的废话。

很想得到这个工作谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:40:40.240

请让我们知道您希望在输出文件中看到什么，以及您想用它做什么。您想要人类可以阅读的东西，还是计算机可以使用的特定格式的东西？请举个例子。

这两个正确使用的示例`Put[]`提供了包含与您的输入的文本表示相对应的 ASCII 字符的文件，并且这些文件是人类可读的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:33:05.163

我认为您正在寻找的是 IntegerString[_,16]：

```
In[33]:= IntegerString[123456, 16]

Out[33]= "1e240"

str = OpenWrite[];
WriteString[str, IntegerString[123456, 16]];
Close[str];

FilePrint[%]

1e240 
```

（使用 WriteString 而不是 Put 避免了字符串字符

# android - 跨多个类使用 SharedPreferences？

> ID：10393273
> 
> 赞同：2
> 
> 时间：2012-05-01T03:42:09.467
> 
> 标签：android, dialog, preferences, sharedpreferences

我有一个 SharedPreferences 目前在一类中工作但在第二类中不起作用。我想我可能说错了，因为我得到的错误是：

```
The method getSharedPreferences(String, int) is undefined for the type CheckPreferences 
```

与 SharedPrefernces 一起正常工作的代码是这样的：

```
public void loadApp()
{
    setContentView(shc_BalloonSat.namespace.R.layout.main);
    alert = new AlertDialog.Builder(this).create();
    //String returned = "";
    lastpacketsPHP = "";
    pref = getSharedPreferences("shared_prefs", 1);
    prefEditor = pref.edit();
    //prefEditor.putString(lastpacketsPHP, "/* Insert PHP file location here */");
    //prefEditor.commit();

    // These next two lines are used to test the PHP files on the SHC server by determining if PHP is set up correctly.
    prefEditor.putString(lastpacketsPHP, "/* Insert PHP file location here */");
    prefEditor.commit();   

    if (!isNetworkConnected(this))
    {
    showAlert();
    }

    else
    {
    api = new httpAPI(this);
        map = new mapAPI(this);
        dialog = new runDialog(this, api, new runDialog.OnDataLoadedListener()
        {

            public void dataLoaded(String textViewString)
            {
            infoTV = (TextView)findViewById(shc_BalloonSat.namespace.R.id.info);
                infoTV.setText(textViewString);
                assignInfoToInfoTextView();
                assignInfoToHistoryTextView();
            }
        });

        dialog.execute();
    }

    CheckPreferences cp = new CheckPreferences(this, new CheckPreferences.CheckPreferencesListener()
    {

        public void onSettingsSaved()
        {
            // This function let's the activity know that the user has saved their preferences and
            // that the rest of the app should be now be shown.
            check.saveSettings();               
        }

        public void onCancel()
        {
            Toast.makeText(getApplicationContext(), "Settings dialog cancelled", Toast.LENGTH_LONG).show();
        }
    });

    cp.show();
} 
```

在我的另一堂课上，我不知道我是不是叫错了，还是完全看错了。类如下图所示：

```
package shc_BalloonSat.namespace;
import android.app.Dialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.view.View;
import android.widget.CheckBox;

public class CheckPreferences extends Dialog
{
Context shc;
private CheckBox altitudeCheckBox = (CheckBox) findViewById(R.id.altitudeCheckbox);
private CheckBox latitudeCheckbox = (CheckBox) findViewById(R.id.latitudeCheckbox);
private CheckBox longitudeCheckbox = (CheckBox) findViewById(R.id.longitudeCheckbox);
private CheckBox velocityCheckbox = (CheckBox) findViewById(R.id.velocityCheckbox);
private CheckPreferencesListener listener;
SharedPreferences pref;
Editor prefEditor;
String userAltitudePreference;
String userLatitudePreference;
String userLongitudePreference;
String userVelocityPreference;
String userAltitudeChoice;
String userLatitudeChoice;
String userLongitudeChoice;
String userVelocityChoice;

public interface CheckPreferencesListener 
{
public void onSettingsSaved();
public void onCancel();
}

public CheckPreferences(Context context, CheckPreferencesListener l)
{
super(context);
this.setContentView(R.layout.custompreferences);
this.setCancelable(false);
this.setCanceledOnTouchOutside(false);
this.setTitle("Data View Settings");
pref = getSharedPreferences("shared_prefs", 1);
prefEditor = pref.edit();
initOnClick();
}

private void initOnClick()
{
View.OnClickListener click = new View.OnClickListener()
{
    public void onClick(View v)
    {
    switch (v.getId())
    {
            case R.id.saveBtn:
            {
                saveSettings();
                listener.onSettingsSaved();
                dismiss();
                break;
            }

            case R.id.cancelBtn:
            {
                listener.onCancel();
                dismiss();
                break;
            }
    }
    }
};

    // Save Button
    this.findViewById(R.id.saveBtn).setOnClickListener(click);

    // Cancel Button
    this.findViewById(R.id.cancelBtn).setOnClickListener(click);
}

public void saveSettings()
{
// This function is called when the user chooses the save their preferences

if (altitudeCheckBox.isChecked())
{
    userAltitudeChoice = "true";
    prefEditor.putString(userAltitudePreference, userAltitudeChoice);
    prefEditor.commit();   
}

else if (latitudeCheckbox.isChecked())
{
    userLatitudeChoice = "true";
    prefEditor.putString(userLatitudePreference, userLatitudeChoice);
    prefEditor.commit();  
}

else if (longitudeCheckbox.isChecked())
{
    userLongitudeChoice = "true";
    prefEditor.putString(userLongitudePreference, userLongitudeChoice);
    prefEditor.commit();  
}

else if (velocityCheckbox.isChecked())
{
    userVelocityChoice = "true";
    prefEditor.putString(userVelocityPreference, userVelocityChoice);
    prefEditor.commit();  
}

else
{

}

}
} 
```

我上面提到的错误发生在这一行：

```
pref = getSharedPreferences("shared_prefs", 1); 
```

任何帮助将不胜感激。我很想知道我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:00:20.557

当然 SharedPreferences 在多个类中是相同的。它允许您在应用程序中保存和检索原始数据类型的持久键值对。

标准做法是拥有一个具有所有静态方法的 Helper 类来保存和检索每种类型的键值对。此外，将所有密钥放在一个静态类 SharedPreferenceKeys 中。它避免了愚蠢的印刷错误。以下是您可以使用的示例类：

```
 package com.mobisys.android;

import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.preference.PreferenceManager;

public class HelperSharedPreferences {

    public static class SharedPreferencesKeys{
        public static final String key1="key1";
        public static final String key2="key2";
    }

    public static void putSharedPreferencesInt(Context context, String key, int value){
        SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
        Editor edit=preferences.edit();
        edit.putInt(key, value);
        edit.commit();
    }

    public static void putSharedPreferencesBoolean(Context context, String key, boolean val){
        SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
        Editor edit=preferences.edit();
        edit.putBoolean(key, val);
        edit.commit();
    }

    public static void putSharedPreferencesString(Context context, String key, String val){
        SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
        Editor edit=preferences.edit();
        edit.putString(key, val);
        edit.commit();
    }

    public static void putSharedPreferencesFloat(Context context, String key, float val){
        SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
        Editor edit=preferences.edit();
        edit.putFloat(key, val);
        edit.commit();
    }

    public static void putSharedPreferencesLong(Context context, String key, long val){
        SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
        Editor edit=preferences.edit();
        edit.putLong(key, val);
        edit.commit();
    }

    public static long getSharedPreferencesLong(Context context, String key, long _default){
        SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
        return preferences.getLong(key, _default);
    }

    public static float getSharedPreferencesFloat(Context context, String key, float _default){
        SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
        return preferences.getFloat(key, _default);
    }

    public static String getSharedPreferencesString(Context context, String key, String _default){
        SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
        return preferences.getString(key, _default);
    }

    public static int getSharedPreferencesInt(Context context, String key, int _default){
        SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
        return preferences.getInt(key, _default);
    }

    public static boolean getSharedPreferencesBoolean(Context context, String key, boolean _default){
        SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
        return preferences.getBoolean(key, _default);
    }
} 
```

要设置值（例如布尔值），请从活动中调用以下内容：

```
HelperSharedPreferences.putSharedPreferenceBoolean(getApplicationContext(),HelperSharedPreferences.SharedPreferenceKeys.key1, true); 
```

要获得相同的值，请调用以下命令：

```
HelperSharedPreferences.getSharedPreferenceBoolean(getApplicationContext(),HelperSharedPreferences.SharedPreferenceKeys.key1, true); 
```

最后一个值是默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T03:47:21.300

您应该必须通过`context`引用变量调用此方法。

```
public CheckPreferences(Context context, CheckPreferencesListener l)
{
 super(context);
 shc=context;
 ...
 pref = shc.getSharedPreferences("shared_prefs", 1);
 ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T03:46:42.193

该类`Dialog`没有定义 getSharedPreferences 方法。你可能想要：

```
getContext().getSharedPreferences(...) 
```

# html - IE 中的 CSS 样式表

> ID：10393274
> 
> 赞同：0
> 
> 时间：2012-05-01T03:42:10.463
> 
> 标签：html, css, internet-explorer-7, css-tables

我正在使用一个表格作为我网页的页脚。我真的不太了解表格，因为我一直使用 CSS。以下是我做过的唯一一张桌子。它似乎在 Opera、Chrome 和 Firefox 中工作，但在 IE 中一切都在左边。我不确定我在这张桌子上做错了什么，因为我对桌子不太了解。这是HTML：

```
<div id="framecontentBottom">
<div id="container">
        <div id="row">
<div id="left">

<!-- Counter Code START --><a href="http://www.e-zeeinternet.com/" target="_blank"><img src="http://www.e-zeeinternet.com/count.php?page=760915&style=LED_g&nbdigits=4&reloads=1" alt="Web Counter" border="0" ></a><br><a href="http://www.e-zeeinternet.com/" title="Web Counter" target="_blank" style="font-family: Geneva, Arial, Helvetica, sans-serif; font-size: 10px; color: #000000; text-decoration: none;">Page Views</a><!-- Counter Code END -->

</div>

    <div id="middle">

Contact me at jacksterdavis<img src="images/@white.png">gmail.com

        </div>
            <div id="right">

            <!-- AddThis Button BEGIN -->
            <div class="addthis_toolbox addthis_default_style ">
            <a class="addthis_button_preferred_1"></a>
            <a class="addthis_button_preferred_2"></a>
            <a class="addthis_button_preferred_3"></a>
            <a class="addthis_button_preferred_4"></a>
            <a class="addthis_button_compact"></a>
            <a class="addthis_counter addthis_bubble_style"></a>
            </div>
            <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f302421558e3fc2"></script>
            <!-- AddThis Button END -->

            </div>
        </div>
<div id="row">
<div id="left">
</div>
    <div id="middle">
    <p>The internet is the printing press of the 21'st century.</p>
    </div>
<div id="right">
</div>
</div> 
```

这是CSS：

```
#container {
    display: table;
    width: 100%;
    }

  #row  {
    display: table-row;   
    }

#middle {
    width:50%;
    text-align:center;
    display: table-cell;
    }

}
#left
{
   width:25%;
   text-align:left; 
   display: table-cell;
}
#right
{
   width:25%;
   text-align:right; 
   display: table-cell;
   padding: 5px;
}
#quote
{
    text-align:center;
    width:100%;
}
#logoBtm
{
    align:middle;
    text-align:center;
}
#logoBtmLeft
{
    align:left;
}
#logoBtmRight
{
    align:right;
}
#framecontentBottom{
    clear: both;
    position: relative;
    z-index: 10;
    margin-top: -3em;
    top: auto;
    bottom: 0; 
    height: 80px; /*Height of bottom frame div*/
    overflow: hidden; /*Disable scrollbars. Set to "scroll" to enable*/
    background-color: #585858;
    color: white;
    width: 100%;
} 
```

如果您指出我的表的所有问题，我们将不胜感激，谢谢。CSS 修复将是最好的，但如果必须编辑 HTML 也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T03:58:30.643

~~问题很可能在于您有两个具有相同 ID 的 div。改为使用类作为行。~~为了他人的舒适而删除。这条线对手头的解决方案没有帮助。

另外，在参考您的评论时，ie 7 不支持表格显示CSS。

[http://caniuse.com/#search=table-cell](http://caniuse.com/#search=table-cell)

使用内联块或浮点数的组合。但要注意，因为内联块在 ie7 中存在自己的问题

[http://flipc.blogspot.com/2009/02/damn-ie7-and-inline-block.html](http://flipc.blogspot.com/2009/02/damn-ie7-and-inline-block.html)

这是一个有效的有效示例。

[http://jsfiddle.net/mRHnW/2/](http://jsfiddle.net/mRHnW/2/)

一些变化：我已经对其中的每个 div 进行了样式设置，`.row`以便它被应用一次（如果需要修复它，它可以在一个地方。即使在 CSS 中，它也需要是[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

我`margin-top`从`#frameContentBottom`选择器中删除了 ，因为它与 jsfiddle 搞砸了，给了我可见的结果。如果它对您的布局很重要，请随时重新设置它。

我将“列”的宽度调整为略小于 100%，因为您还包括了填充。[W3C 指定](http://www.quirksmode.org/css/box.html)的 CSS盒模型的工作方式是宽度声明*不包括填充、边框和边距*。因此，如果您正在创建一个 100% 的 div，并且想要 5 像素的填充，那么您需要指定小于 100% 以使填充在 100% 范围内。

在足够宽的屏幕上（比 jsfiddle 默认窗格大），您的页脚应该符合您的预期。

# ruby-on-rails - Rails：在服务器的内存中缓存一棵树

> ID：10393275
> 
> 赞同：0
> 
> 时间：2012-05-01T03:42:34.957
> 
> 标签：ruby-on-rails, caching, optimization

我有一个包含多维数据的 postgresql 数据库。我所做的是我编写了一个将所有数据库行排序为树格式的数据结构。现在数据库很大，所以我不想每次从浏览器发出请求时都生成树。我想做的是在某个时间段内构建一次树并将其持久保存在服务器的内存中。

顺便说一下，树是只读的。所以现在每次树中的请求都不需要生成新的，它已经在那里了。

我怎样才能做到这一点。我不是专家程序员，只是初学者，对网络编程绝对是新手。所以其中一些概念对我来说是新的。

但是，如果您能就此处涉及的概念指出我正确的方向，我可以用谷歌搜索其余的内容。

或者，如果您有实际的链接或示例，那就太棒了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:51:34.750

有几种方法可以解决这个问题。这取决于您希望变量与应用程序的距离。如果您真的希望将它们放在应用程序的“顶部”，以尽可能快地使用，那么您可以考虑使用全局变量“$tree”并连接到应用程序流。其他选项可能包括[memcached](http://nubyonrails.com/articles/memcached-basics-for-rails)，它仍然非常接近应用程序。[Redis](http://redis.io/)对于可以在应用程序实例之间共享的内存数据库来说是一个不错的选择，因为它是您查询的 NoSQL 数据库。虽然不太接近应用程序。

通常，这些是您的主要选择。在请求中存活的应用程序内变量。帮助变量在请求中存活并为您提供查询机制的应用程序框架。或者，允许您从多个实例快速存储和查询的内存数据库。每一个都是一个可行的选择，尽管我很确定你会因为使用一个直接的全局变量而得到很多“社区”的批评（这种做法被认为是不干净的，因为它们缺乏线程安全和其他类似的问题）。

# optimization - “静态”循环的优化

> ID：10393280
> 
> 赞同：8
> 
> 时间：2012-05-01T03:43:05.880
> 
> 标签：optimization, language-agnostic, compiler-construction, theory

我正在编写一种编译语言是为了好玩，而且我最近因为使我的优化编译器非常健壮而受到鼓舞。我想出了几种优化某些东西的方法，例如，2 + 2 总是 4，所以我们可以在编译时进行数学运算， if(false){ ... } 可以完全删除等等，但是现在我已经开始循环了。经过一些研究，我认为我正在尝试做的并不是完全循环展开，但它仍然是一种优化技术。让我解释。

采取以下代码。

```
String s = "";
for(int i = 0; i < 5; i++){
    s += "x";
}
output(s); 
```

作为一个人，我可以坐在这里告诉你，这 100% 的时间相当于

```
output("xxxxx"); 
```

所以，换句话说，这个循环可以完全“编译”出来。这不是循环展开，而是我所说的“完全静态”，也就是说，没有输入会改变段的行为。我的想法是，任何完全静态的东西都可以解析为单个值，任何依赖输入或产生条件输出的东西当然不能进一步优化。那么，从机器的角度来看，我需要考虑什么？是什么让循环“完全静态”？

我想出了三种类型的循环，我需要弄清楚如何分类。每次运行后总是以相同的机器状态结束的循环，无论输入如何，循环永远不会完成，以及我无法找出一种或另一种方式的循环。如果我无法弄清楚（它会根据动态输入有条件地改变它将运行的次数），我并不担心优化。除非程序员特别禁止，否则无限循环将是编译错误/警告，并且每次都相同的循环应该直接跳过以使机器处于正确状态，而不循环。

当然要优化的主要情况是静态循环迭代，此时内部的所有函数调用也是静态的。确定循环是否具有动态组件很容易，如果它不是动态的，我想它必须是静态的。我无法弄清楚的是如何检测它是否会是无限的。有人对此有任何想法吗？我知道这是停机问题的一个子集，但我觉得它是可以解决的；停止问题是一个问题，因为对于某些程序子集，您无法判断它可能会永远运行，也可能不会，但我不想考虑这些情况，我只想考虑这些情况它会在哪里停止，或者它不会停止，但首先我必须区分这三种状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:23:37.283

这看起来像是一种可以为多个类定义的符号求解器，但不是一般的。

让我们稍微限制一下要求：没有数字溢出，只有 for 循环（while 有时可以转换为完整的 for 循环，除非使用 continue 等），没有中断，没有修改 for 循环内的控制变量。

`for (var i = S; E(i); i = U(i))`...

其中 E(i) 和 U(i) 是可以符号操作的表达式。有几个类相对容易：

`U(i) = i + CONSTANT`: `n`-th 周期的`i`值为`S + n * CONSTANT`

`U(i) = i * CONSTANT`: `n`-th 周期的`i`值为`S * CONSTANT^n`

`U(i) = i / CONSTANT`: `n`-th 周期的`i`值为`S * CONSTANT^-n`

`U(i) = (i + CONSTANT) % M`: `n`-th 周期的`i`值为`(S + n * CONSTANT) % M`

和其他一些非常简单的组合（和一些非常困难的组合）

确定循环是否终止是搜索`n`where `E(i(n))`is false。对于很多情况，这可以通过一些符号操作来完成，但是在制作求解器时需要做很多工作。

例如

*   `for(int i = 0; i < 5; i++)`,
*   `i(n) = 0 + n * 1 = n`, `E(i(n))`=> `not(n < 5)`=>
*   `n >= 5`=> 停止`n = 5`

* * *

*   `for(int i = 0; i < 5; i--)`,
*   `i(n) = 0 + n * -1 = -n`, `E(i(n))`=> `not(-n < 5)`=> `-n >= 5`=>
*   `n < -5`- 因为`n`是一个非负整数，所以这永远不是真的 - 永远不会停止

* * *

*   `for(int i = 0; i < 5; i = (i + 1) % 3)`,
*   `E(i(n))`=> `not(n % 3 < 5)`=> `n % 3 >= 5`=> 这永远不会是真的 => 永远不会停止

* * *

*   `for(int i = 10; i + 10 < 500; i = i + 2 * i)`=>
*   `for(int i = 10; i < 480; i = 3 * i)`,
*   `i(n) = 10 * 3^n`,
*   `E(i(n))`=> `not(10 * 3^n < 480)`=> `10 * 3^n >= 480`=> `3^n >= 48`=> `n >= log3(48)`=> `n >= 3.5...`=>
*   因为 n 是完整的 => 它会停止`n = 4`

对于其他情况，如果它们可以转换为您已经可以解决的情况会很好......

符号操作的许多技巧都来自 Lisp 时代，而且并不难。尽管所描述的（或变体）是最常见的类型实践，但还有许多更难和/或不可能解决的场景。

# stress-testing - 解析FIX消息，压力测试

> ID：10393292
> 
> 赞同：-1
> 
> 时间：2012-05-01T03:45:30.527
> 
> 标签：stress-testing, fix-protocol

我正在对 GPU 上的 FIX 消息解析进行一些压力测试。我应该每秒解析多少条合理的消息？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:28:16.060

FIXAntenna - 我使用的引擎 - 以每个实例 60k-115k 消息/秒的速度进行广告宣传。

这完全取决于您的需求。如果您这样做是为了进行实验，那么我的回答是“尽可能快，即使那样，这还不够快”。

如果您正在连接纳米比亚证券交易所，那么合理的数量是每天 1000 笔 - 去年 NSX 上有 250 笔交易。

我要走一条非常平淡无奇的路线，说 1/sec。

# algorithm - 复制一个字符串 n 次所需的最少操作数是多少？

> ID：10393295
> 
> 赞同：4
> 
> 时间：2012-05-01T03:46:12.600
> 
> 标签：algorithm

最近，我不得不重复一个字符串指定的次数。假设我必须有 5 个字符串“ `bacon`”副本，并且我的编辑器中有 1 行“ `bacon`”。所以我会从这个开始：

```
bacon 
```

并以此结束：

```
bacon
bacon
bacon
bacon
bacon 
```

让我们也定义三个“原子”操作：复制、粘贴和删除。“复制”允许您复制**任意**数量的行，“粘贴”粘贴最近复制的任何内容，“删除”删除一行。所以如果我有 3 行“ `bacon`”：

```
bacon
bacon
bacon 
```

我想要 10 行“ `bacon`，”，我可以这样做：

```
copy 2  | lines of bacon: 3
paste 2 | lines of bacon: 5
copy 5  | lines of bacon: 5
paste 5 | lines of bacon: 10 
```

但是，在*i* ≤ *j的情况下，给定**i*行和*j*行所需的“原子”操作的最小数量是多少？是否有适用于这个问题的算法技术？还是我忽略了一些明显的东西？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T04:17:10.973

考虑一个序列删除然后粘贴。请注意，这会产生与粘贴后删除相同的状态。所以这些操作可以来回交换。

接下来考虑一个序列删除，然后是“副本 N”。请注意，这与“复制 N”后删除的状态相同，因此这些序列可以交换（但只能在一个方向上）。

因此，在任何操作序列中，我们都可以在不改变最终结果的情况下将任何删除操作与其后面的操作交换。因此，我们可以在不改变结果的情况下将所有删除操作移到最后。

由此可以得出，如果任何删除出现在最佳序列中，它们可以移动到序列的末尾：

```
XXXXXXXXDDDD 
```

（其中 X 是 C 或 P）

但是没有后续粘贴的副本并不是最佳选择，因此序列实际上如下所示：

```
XXXXXXPDDDD 
```

现在，观察到任何粘贴 + 删除 (PD) 序列都可以替换为复制 + 粘贴 (CP) 序列，其中副本只需少一行。这将两个操作替换为另外两个操作，因此它不会丢失任何内容。所以我们可以将我们的最优序列转化为：

```
XXXXXXCPDDD 
```

我们可以再做三遍来消除所有的删除：

```
XXXXXXCCCCP 
```

当然，副本序列是次优的，所以我们的答案必须如下所示：

```
XXXXXXCP 
```

换句话说，删除永远不需要作为最佳序列的一部分。

从来不需要连续四次粘贴，因为它们总是可以用复制+粘贴+复制+粘贴代替。（不过，可能需要连续三个粘贴；例如从 4 到 13）

这就是我现在所能得到的。在这一点上，我可能只是做一个 Dijkstra 风格的广度优先搜索最短路径......

[更新]

正如马克彼得斯在评论中指出的那样，也永远不需要连续三个粘贴。证明：

Copy(N) 要求 N 小于行数。所以 Copy(N) + Paste + Paste + Paste 总是可以替换为 Copy(N) + Paste + Copy(2N) + Paste。

因此可以形成一个最佳序列，没有删除，连续没有两个副本，连续不超过两个粘贴。嗯，这是一个开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:57:34.753

让我们规范化我们正在寻找的序列。这就像尼莫的回答一样。

1.  有效序列由 D*(C[DP]*)* 匹配。重写 DC(n) → C(n) D 和 DP(n) → P(n) D。

2.  有效序列由 (CP*)*D* 匹配。重写 C(n) D → D 和 P(n) D → C(n-1) P(n-1)。新副本是可以的，因为作为时间函数的缓冲区长度是单峰的。

3.  有效序列由 (CP*)*|D* 匹配。

由于 i ≤ j，我们正在寻找的序列匹配 (CP*)*。

1.  有效序列由 (CP*)* 匹配。重写 C(n) P(n) P(n) P(n) P(n) P(n) → C(n) P(n) C(2n) P(2n) P(2n) C(n) .

2.  有效序列由 (CP{0,4})* 匹配。重写 C(n) C(n') → C(n')。

3.  有效序列由 (CP{1,4})* 匹配。重写 C(n) P(n) P(n) P(n) P(n) → C(n) P(n) P(n) C(2n) P(2n)。我们不需要恢复副本，因为下一个命令（如果存在）是一个副本。

4.  有效序列由 (CP{1,3})* 匹配。重写 C(n) P(n) P(n) P(n) → C(n) P(n) C(2n) P(2n)。我们不需要恢复副本。

我们正在寻找匹配的序列 (CP{1,2})*。缩写 2(n) = C(n) P(n) 和 3(n) = C(n) P(n) P(n)。如果它复制整个缓冲区，则调用复制*整体，否则调用**部分*复制。如果它复制除一行之外的整个缓冲区，则调用*几乎完整的副本。*我将使用 w 和 p 以及 a 来注释命令。

让我们努力减少部分副本的数量。假设我们有 2p(n) … 2?(n')。我们可以重写为 2w(n+δ) ... 2p(n'-δ) 或 2w(n+n') ... ，减少部分副本的数量。我们可以对 3p(n) … 3?(n') 做同样的事情。假设最优，我们可以做 3p(n) … 2?(n')。我们不能被 3p(n+δ) … 2p(1) 困住，因为 3?(n+δ+1) … D 是等价的并且更短。我们可以做 2p(n) … 3?(n')，但 2 最终可能只是几乎完整的。

如果我们总是与伴侣一起处理最左边的部分副本，那么这种重写就会收敛。进一步改写后 2w(n) 3w(2n) → 3w(n) 2w(3n) 和 2w(n) 2w(2n) 2w(4n) 2w(8n) → 2w(n) 3w(2n) 3p(5n) ，有效序列由 2w{0,3} 3w* ( | 2p | 2a?3w* 3p ) 匹配。

## log(n)-时间算法

显然，最优解的长度为 O(log(n))。我们可以计算每个解决方案中与上面的正则表达式匹配的 3w 个命令数量的下限和上限；这些界限相差一个统一的常数。尝试*所有*可能的短命令序列，其中有 O(log(n))。最多一份拷贝数量未指定；如果模式有效，很容易计算出它应该是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T04:08:22.793

复制+粘贴这两个操作最多可以使行数翻倍。操作与大小的比率为 2:2。如果您连续执行两次，您将获得 4 次操作的 4 倍。

三个操作，复制+粘贴+粘贴，最多可以使行数增加三倍。操作与行的比例为 3:3，或与之前相同。但是，如果您连续执行两次操作，您将获得 6 次操作的 9 倍，这是一个改进。

四种操作，复制+粘贴+粘贴+粘贴，可以使行数翻两番。再次，比例是相同的 4:4。如果您连续执行两次，则 8 次操作获得 16 倍。

五个操作，复制 + 4*粘贴，可以将行数乘以 5。但是结合两个和三个操作序列可以将行数乘以 6，以获得相同的操作数。如果您将这些推断出来，您会发现没有办法击败 2、3 和 4 操作序列的组合。

我的建议是使用 4 操作序列，直到结果在目标的 4 倍范围内，然后切换到 3 或 2 操作序列完成。**

# android - 活动未开始

> ID：10393305
> 
> 赞同：0
> 
> 时间：2012-05-01T03:47:47.687
> 
> 标签：android

我可以让进度对话框停止，但 TabbedView 活动永远不会启动，只是进入黑屏。有任何想法吗？

```
 class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    private final ProgressDialog dialog = new ProgressDialog(MainScreen.this);
     @Override
        protected void onPreExecute() {
            dialog.setMessage("Gathering data for\n"+selectedSportName+".\nPlease wait...");
            dialog.show();
        }

    @Override
    protected String doInBackground(String... urls) {
        String response = "";
        updateMaps();
        return response;
    }

    @Override
    protected void onPostExecute(String result) {
      dialog.dismiss();
      startTabbedViewActivity();
    }
}

private void startTabbedViewActivity(){
    Intent intent = new Intent(this, TabbedView.class);
    intent.putExtra(SPORT_NAME_EXTRA, selectedSportName);
    intent.putExtra(HEADLINES_FOR_SPORT_EXTRA,         existingSportHeadlines.get(selectedSportName));
    intent.putExtra(SCORES_FOR_SPORT_EXTRA, existingSportScores.get(selectedSportName));
    intent.putExtra(SCHEDULE_FOR_SPORT_EXTRA, existingSportSchedule.get(selectedSportName));
    startActivity(intent);
} 
```

我查看了 Manifest 文件，并没有看到任何奇怪的外观。想不通这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T23:10:06.937

您忘记在“onPostExecute”方法上方添加@Override，因此根本不会执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:16:13.353

活动的布局方向是否正确

```
 android:orientation="vertical" 
```

# c# - 第 2 轮：HttpListener 未收到外部请求

> ID：10393306
> 
> 赞同：1
> 
> 时间：2012-05-01T03:47:48.677
> 
> 标签：c#, amazon-ec2, windows-server-2008-r2, httplistener, http.sys

与此问题相同的情况，[HttpListener 未接收远程请求，即使防火墙关闭并且所有前缀都已注册](https://stackoverflow.com/questions/9985644/httplistener-not-receiving-remote-requests-even-with-the-firewall-down-and-all)，即：

*   HttpListener 只接收来自同一台机器的请求
*   该应用程序在 Windows EC2 实例上运行（与另一个问题的规格相同）
*   正在使用的端口已在防火墙中注册并打开（我还暂时关闭了防火墙以确保不是问题）
*   我使用的前缀是 http://*:8080/

与其他问题的区别：

*   EC2的安全组配置正确
*   它一直在接受外部请求，直到今天（据我所知），我不知道有任何系统更改（但我对所有想法都持开放态度）

附加信息：

*   EC2 实例和系统正在通过所有状态检查
*   我重新启动了实例；不用找了
*   发回（不是从我的服务器应用程序，从系统）到远程客户端的 http 状态代码是 503（服务不可用）
*   我已经检查并重新检查了 url 是否正确（我有一个弹性 IP 地址，并且在 url 中使用实例的公共 DNS）
*   我运行 netstat 以确保该端口没有被其他进程使用

任何关于检查或尝试的想法都是完全欢迎的；我几乎没有想法了......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-25T13:23:13.210

如果您在同一个端口上有多个 urlacl，例如：

```
$ netsh http show urlacl

Reserved URL            : http://+:8080/
    User: PUBEN\myself
        Listen: Yes
        Delegate: No
        SDDL: D:(A;;GX;;;S-1-5-21-436374069-1547161642-1177238915-5114)

Reserved URL            : http://192.168.47.120:8080/
    User: \Everyone
        Listen: Yes
        Delegate: No
        SDDL: D:(A;;GX;;;WD)

Reserved URL            : http://127.0.0.1:8080/
    User: \Everyone
        Listen: Yes
        Delegate: No
        SDDL: D:(A;;GX;;;WD) 
```

由于列表中的第一个预订，您将获得 ServiceUnavailable。修理，

```
netsh http delete urlacl url=http://+:8080/ 
```

或者只是使用[Suave.io](https://suave.io/)并省去自己的头痛。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T04:06:33.710

几个想法，有些你可能已经检查过：

*   确保您仍然可以在机器上本地访问侦听器 - 只是为了找出代码本身的问题

*   确保该机器上的该端口上没有其他任何东西在运行

*   检查事件查看器 - 那里可能存在任何错误？其他活动？最近的 Windows 更新 - 什么？

*   尝试另一个端口 - 要排除端口冲突，请尝试另一个端口

*   确保您绑定到前缀：http://*:{your-port-#-here}/ - 另外，当您拨打电话时，HttpListener 可以非常具体，如果您在注册的前缀中包含斜杠确保将其包含在通话中，等等。

*   当您尝试访问机器时 - 您使用的是什么地址：EC2 弹性 IP 地址、EC2 公共 dns、您已路由到该机器的一些 DNS 名称？我已经看到 EC2 机器在重启后更改了公共 IP/DNS，也许你的机器已经改变了？

这就是我现在能想到的。祝你好运。

# nhibernate - 如何在不将鉴别器传递给构造函数的情况下映射 Enumeration 类？

> ID：10393311
> 
> 赞同：3
> 
> 时间：2012-05-01T03:48:22.713
> 
> 标签：nhibernate, orm

基于[Jimmy's Enumeration classes 的](http://lostechies.com/jimmybogard/2008/08/12/enumeration-classes/)想法，我想看看我是否可以避免[使用构造函数来实例化我的类型](http://lostechies.com/jimmybogard/2008/08/27/strategies-and-discriminators-in-nhibernate/)（我假设发生`discriminator-value`在.

这是我的类型：

```
public class Impact : Enumeration
{
    public static readonly Impact Carbon
        = new Impact(1, "Carbon dioxide equivalent", CommonUnit.CO2e);
    public static readonly Impact Energy
        = new Impact(2, "Energy", CommonUnit.MJ);
    public static readonly Impact Cost
        = new Impact(3, "Cost", CommonUnit.Dollars);

    public Impact(int index, string name, CommonUnit unit)
        : base(index, name)
    {
        this.Unit = unit;
    }

    public CommonUnit Unit { get; private set; }

} 
```

这是 的定义`Enumeration`：

```
public class Enumeration : ValueObject
{
    public Enumeration(int index, string displayName)
    {
        this.Index = index;
        this.DisplayName = displayName;
    }

    public int Index { get; private set; }
    public string DisplayName { get; private set; }

    public override string ToString()
    {
        return this.DisplayName;
    }

    public static IEnumerable<T> GetAllFor<T>() where T : Enumeration
    {
        foreach (var publicStatic in typeof(T).GetFields(BindingFlags.Static | BindingFlags.Public | BindingFlags.DeclaredOnly))
        {
            Enumeration item = null;
            item = (Enumeration)publicStatic.GetValue(null);
            yield return item as T;
        }
    }

    public static T With<T>(int index) where T : Enumeration
    {
        return GetAllFor<T>().SingleOrDefault(i => i.Index == index);
    }
} 
```

`ValueObject`简单地涵盖了平等功能。

在其他地方，我使用静态方法从这个枚举中获取项目（有点像你如何使用核心枚举静态方法）：

```
impact = Impact.With<Impact>(index.ImpactId.Value); 
```

这非常方便，但我想知道是否可以让 NHibernate 在为对象补水时也这样做。

可以做到吗？怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T12:26:47.630

使用 NHibernate 自定义类型：

```
public class EnumerationType<T> : PrimitiveType where T : Enumeration
{
    public EnumerationType()
        : base(new SqlType(DbType.Int32))
    {
    }

    public override object Get(IDataReader rs, int index)
    {
        object o = rs[index];
        var value = Convert.ToInt32(o);
        return Enumeration.With<T>(value);
    }

    public override object Get(IDataReader rs, string name)
    {
        int ordinal = rs.GetOrdinal(name);
        return Get(rs, ordinal);
    }

    public override Type ReturnedClass
    {
        get { return typeof(T); }
    }

    public override object FromStringValue(string xml)
    {
        return int.Parse(xml);
    }

    public override string Name
    {
        get { return "Enumeration"; }
    }

    public override void Set(IDbCommand cmd, object value, int index)
    {
        var parameter = (IDataParameter)cmd.Parameters[index];

        var val = (Enumeration)value;

        parameter.Value = val.Value;
    }

    public override string ObjectToSQLString(object value, Dialect dialect)
    {
        return value.ToString();
    }

    public override Type PrimitiveClass
    {
        get { return typeof(int); }
    }

    public override object DefaultValue
    {
        get { return 0; }
    }
} 
```

如果您正在执行基于 HBM.xml 的映射，则可以像这样设置自定义类型：

```
<property name="Impact" column="Impact" type="Namespace.To.EnumerationType`1[[Impact, AssemblyWithDomainEnum]], AssemblyWithNHibCustomType"/> 
```

或者，如果您使用 Fluent NHibernate，您可以创建一个约定来映射所有枚举类型，而无需单独配置每个枚举类型：

```
public class EnumerationTypeConvention : IPropertyConvention, IPropertyConventionAcceptance
{
    private static readonly Type _openType = typeof(EnumerationType<>);

    public void Apply(IPropertyInstance instance)
    {
        var closedType = _openType.MakeGenericType(instance.Property.PropertyType);

        instance.CustomType(closedType);
    }

    public void Accept(IAcceptanceCriteria<IPropertyInspector> criteria)
    {
        criteria.Expect(x => typeof(Enumeration).IsAssignableFrom(x.Property.PropertyType));
    }
} 
```

然后在 Fluent NHibernate 配置中添加您喜欢的约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:28:48.053

这似乎也有效，但也许[吉米的方式](https://stackoverflow.com/a/10397608/56145)似乎更容易：

```
public class ImpactEnumType : IUserType
{
    public SqlType[] SqlTypes
    {
        get
        {
            //We store our Impact in a single column in the database that can contain a int (for the index value)
            SqlType[] types = new SqlType[1];
            types[0] = new SqlType(DbType.Int32);
            return types;
        }
    }

    public Type ReturnedType
    {
        get { return typeof(Impact); }
    }

    public bool Equals(object x, object y)
    {
        // Impact is derived from ValueObject which implements Equals
        return x.Equals(y);
    }

    public int GetHashCode(object x)
    {
        // as above
        return x.GetHashCode();
    }

    public object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        //We get the string from the database using the NullSafeGet used to get ints
        int impactIndex = (int)NHibernateUtil.Int32.NullSafeGet(rs, names[0]);

        // then pull the instance from the Enumeration type using the static helpers
        return Impact.With<Impact>(impactIndex);
    }

    public void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        //Set the value using the NullSafeSet implementation for int from NHibernateUtil
        if (value == null)
        {
            NHibernateUtil.Int32.NullSafeSet(cmd, null, index);
            return;
        }
        value = (value as Impact).Index;
        NHibernateUtil.Int32.NullSafeSet(cmd, value, index);
    }

    public object DeepCopy(object value)
    {
        //We deep copy the Impact by creating a new instance with the same contents
        if (value == null) return null;
        return Impact.With<Impact>((value as Impact).Index);
    }

    public bool IsMutable
    {
        get { return false; }
    }

    public object Replace(object original, object target, object owner)
    {
        //As our object is immutable we can just return the original
        return original;
    }

    public object Assemble(object cached, object owner)
    {
        //Used for casching, as our object is immutable we can just return it as is
        return cached;
    }

    public object Disassemble(object value)
    {
        //Used for casching, as our object is immutable we can just return it as is
        return value;
    }
} 
```

我的 HBM XML：

```
<property name="Impact" column="ImpactIndex" type="namespace.childnamespace.ImpactEnumType, namespace.childnamespace" /> 
```

# ruby - 使用 Ruby 通过 Url 发布数据

> ID：10393314
> 
> 赞同：0
> 
> 时间：2012-05-01T03:48:45.143
> 
> 标签：ruby, api, post, sinatra

我正在开发一个类似 api 的应用程序，它允许其他应用程序发送请求，这些请求会在类似 api 的应用程序中触发一系列操作。我需要找到一种通过 url 发送大参数（嵌入代码）的方法。我正在使用 Sinatra。

我的第一次尝试：（不起作用，因为嵌入代码不是可接受的 url 参数）

```
get '/grab/:name/:bucket/:embed_code' do
  @video = Video.create(
    :name => params[:name],
    :bucket => params[:bucket],
    :embed_code => params[:embed_code],
    :created_at => Time.now
  )
  redirect "/video/#{@video.id}"
end 
```

我的第二次尝试：（`Connection refused - connect(2) (Errno::ECONNREFUSED)`错误）

```
# (get '/video_form') points to (post '/video') and post_form was supposed to trigger it

get '/video_form' do
  erb :new_video
end

post '/video' do
  @video = Video.create(
    :name => params[:name],
    :bucket => params[:bucket],
    :embed_code => params[:embed_code],
    :created_at => Time.now
  )
  redirect "/video/#{@video.id}"
end

Net::HTTP.post_form(URI.parse('http://localhost:4567/video_form'),{'name'=>'example_2', 'bucket' => 'bucket_name', 'embed_code' => '<iframe width="560" height="315" src="http://www.youtube.com/embed/ncL1UlvjiMQ" frameborder="0" allowfullscreen></iframe>'}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:47:25.360

正确的 GET 请求可能如下所示`http://localhost/getit?embed=%3Ciframe%20width%3D%22560%22%20height%3D%22315%22%20src%3D%22youtube.com/embed/ncL1UlvjiMQ%22%3B%20frameborder%3D%220%22%20allowfullscreen%3E%3C/iframe%3E`。有关更多信息，请阅读[编码查询字符串参数](http://en.wikipedia.org/wiki/Query_string#URL_encoding)。报价：

> 一些字符不能成为 URL 的一部分（例如空格），而另一些字符在 URL 中具有特殊含义：例如，字符 # 可用于进一步指定文档的小节（或片段）；字符 = 用于将名称与值分开。可能需要转换查询字符串以满足这些约束。这可以使用称为 URL 编码的模式来完成。
> 
> 特别是，对查询字符串进行编码使用以下规则：
> 
> *   字母 (`A-Z`和`a-z`)、数字 ( )和`0-9`字符`.`、`-`和保持原样`~``_`
> *   SPACE 被编码为`+`或`%20`
> *   所有其他字符都编码为`%FF`十六进制表示，任何非 ASCII 字符首先编码为 UTF-8（或其他指定的编码）

您可以通过以下方式自己尝试：

```
<form method="get" action="/getit">
  <input type="hidden" name="embed" value='<iframe width="560" height="315" src="youtube.com/embed/ncL1UlvjiMQ"; frameborder="0" allowfullscreen></iframe>'>
  <button>GO</button>
</form> 
```

请注意，您不必自己对值进行编码；Web 浏览器在发送表单时会执行此操作。或者，您可以通过 JavaScript 发出此 GET 请求：

```
var embed = '<iframe width="560" height="315" src="youtube.com/embed/ncL1UlvjiMQ"; frameborder="0" allowfullscreen></iframe>';
location.href = "http://localhost/getit?embed="+escape(embed); 
```

POST 请求不会显示在查询字符串上，而是由浏览器编码。取与上面相同的 HTML 并更改方法，然后观察 Sinatra 接收它。

要在 Sinatra 中接收复杂参数，不要尝试将其作为路径的一部分，将其作为查询字符串中的适当参数接收：

```
get "/getit" do
  p params['embed']
end 
```

# c++ - 设置 cl.exe 的输出路径

> ID：10393315
> 
> 赞同：7
> 
> 时间：2012-05-01T03:48:52.320
> 
> 标签：c++, c, visual-c++

我正在使用命令行参数 Fo，命令行是这样的：

```
file1.c  /ZI /nologo /W3 /WX- /Od /Oy- /D "WIN32" /D "_DEBUG" /D "_CONSOLE" /D "_UNICODE" /D "UNICODE" /Gm /EHsc /RTC1 /GS /fp:precise /Zc:wchar_t /Zc:forScope /Gd /analyze- /errorReport:queue /bigobj /FdDebug\vc100.pdb /FoDebug\ /FaDebug\ 
```

但是仍然在 Debug 文件夹之外生成了一些文件（exe、ilk、pdb）
我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T04:28:14.700

这些是*链接器*生成的文件。您需要单独运行它或使用 /link 编译器选项，以便控制其输出。使用 /OUT 选项设置 .exe 和 .ilk 位置，使用 /PDB 选项设置 .pdb 位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-07T11:21:52.337

因为（如[DCoder 所说](https://stackoverflow.com/questions/10393315/setting-output-path-for-cl-exe#comment13403400_10393553)）`cl.exe`将任何命令行选项传递`/link`给链接器，您可以在一行中完成：

```
cl.exe <all your cl arguments here> /link user32.lib <and other lib here> /libpath:"C:\Program Files\Microsoft SDKs\windows\v7.0A\Lib\" /out:files\newfilename.exe 
```

你可以改变`files\newfilename.exe`成为你想要的任何东西。如果您从批处理文件运行，您可以执行诸如此类的操作`files\%1.exe`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-08T05:47:01.227

好吧，我一直在寻找同样的东西，我在[cl 文档](https://docs.microsoft.com/en-us/cpp/build/reference/output-file-f-options?view=msvc-160)中找到了所有内容。然而这个页面是我搜索时谷歌的第一个页面，所以我把参考放在这里

*   /FA, /Fa（清单文件）
*   指定路径名
*   /Fd（命名 PDB 文件）
*   /Fe（命名 EXE 文件）
*   /FI（名称强制包含文件）
*   /Fm（名称映射文件）
*   /Fo（名称对象文件）
*   /Fp（名称 .pch 文件）
*   /FR、/Fr（创建 .sbr 文件）
*   /FU（名称强制#使用文件）
*   /Fx（合并注入代码）

# c# - C++ 为另一个程序集创建一个 WPF 窗口并处理事件

> ID：10393316
> 
> 赞同：3
> 
> 时间：2012-05-01T03:49:26.453
> 
> 标签：c#, c++, .net, wpf

我一直无法完成这项工作，因为我认为这是 Visual Studio 中的一个小故障，所以如果有人可以尝试这种情况并分享发生了什么，我将非常感激。

我在解决方案 2 项目中进行了设置： - 已启用 CLI 的 C++ 应用程序 (.exe) - C#/WPF 类库，其内部有一个 .xaml 表单和一个匹配的 .cs 窗口类 (.dll)

我想在我的 C++ 应用程序中生成 WPF 窗口，因此我导入它的引用并创建窗口的新实例并在新的应用程序上下文下运行。那很好用。

我现在想在这个窗口之外创建类并处理从 C# 窗口中的受保护函数继承的不同事件，因此在 C++ 程序集中创建一个公共 ref 类，其子类是 .xaml 驱动窗口的 .cs 类。这编译得很好。

IE：

```
public ref class myCPPWindow : myWPFWindow { ... }; 
```

然后，我将生成的窗口更改为位于 C++ 程序集中的父类，而不是位于 C# 程序集中的基类。现在，在加载 .xaml 窗口时，我在 C# 基类的 InitializeComponent() 部分收到一个错误，我需要说它无法从 C# 程序集加载 .xaml 窗口源，即使基类工作。任何人都可以对此给出解释/修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:27:38.920

它看起来像是 WPF 中常见的 [库；用户控件]-[应用程序；派生控件] 问题——即使没有 C++，我也重现了该问题。在不深入解释的情况下，一般的解决方法是聚合“基”类或将基类重新设计为模板控件而不是用户控件（例如，没有 .xaml 文件）。如果我理解正确，您的问题与[组件没有由 uri](https://stackoverflow.com/questions/7646331/the-component-does-not-have-a-resource-identified-by-the-uri)问题标识的资源相同。

# android - how to get browser history in android?

> ID：10393318
> 
> 赞同：7
> 
> 时间：2012-05-01T03:49:32.137
> 
> 标签：android, browser-history

I would like to implement an application to get android default browser history and saving the browser history to an xml file.But the browser history is not saving in some devices into an xml file.

I have implemented my application for get the browser history info to save to xml file as follows:

```
private void browserHistoryDOM() {
    try{
        File newxmlfile = new File("/sdcard/Xmlfiles/briwserHistory.xml");
        newxmlfile.createNewFile();
        DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();
        Document document = documentBuilder.newDocument();
        Element rootElement = document.createElement("root");
        document.appendChild(rootElement);

        Cursor mCur = managedQuery(Browser.BOOKMARKS_URI,Browser.HISTORY_PROJECTION, null, null, null);
        mCur.moveToFirst();

        if (mCur.moveToFirst() && mCur.getCount() > 0) {
            while (mCur.isAfterLast() == false) {
                Element em = document.createElement("bookmarkIdx");
                em.appendChild(document.createTextNode(mCur.getString(Browser.HISTORY_PROJECTION_BOOKMARK_INDEX)));
                rootElement.appendChild(em);

                long callDate = Long.parseLong(mCur.getString(Browser.HISTORY_PROJECTION_DATE_INDEX));
                SimpleDateFormat datePattern = new SimpleDateFormat ("dd-MM-yyyy/h:m:s:a");
                datePattern.setTimeZone(TimeZone.getTimeZone("GMT"));
                String date_str = datePattern.format(new Date(callDate));

                Element em1 = document.createElement("dateIdx");
                em1.appendChild(document.createTextNode(date_str));
                rootElement.appendChild(em1);

                Element em2 = document.createElement("idIdx");
                em2.appendChild(document.createTextNode(mCur.getString(Browser.HISTORY_PROJECTION_ID_INDEX)));
                rootElement.appendChild(em2);

                Element em3 = document.createElement("titleIdx");
                em3.appendChild(document.createTextNode(mCur.getString(Browser.HISTORY_PROJECTION_TITLE_INDEX)));
                rootElement.appendChild(em3);

                Element em4 = document.createElement("urlIdx");
                em4.appendChild(document.createTextNode(mCur.getString(Browser.HISTORY_PROJECTION_URL_INDEX)));
                rootElement.appendChild(em4);

                Element em5 = document.createElement("visitsIdx");
                em5.appendChild(document.createTextNode(mCur.getString(Browser.HISTORY_PROJECTION_VISITS_INDEX)));
                rootElement.appendChild(em5);

                long searchDate = Long.parseLong(mCur.getString(Browser.SEARCHES_PROJECTION_DATE_INDEX));
                SimpleDateFormat datePattern1 = new SimpleDateFormat ("dd-MM-yyyy/h:m:s:a");
                datePattern1.setTimeZone(TimeZone.getTimeZone("GMT"));
                String date_str1 = datePattern.format(new Date(searchDate));

                Element em6 = document.createElement("searchDateIdx");
                em6.appendChild(document.createTextNode(date_str1));
                rootElement.appendChild(em6);

                Element em7 = document.createElement("searchIdx");
                em7.appendChild(document.createTextNode(mCur.getString(Browser.SEARCHES_PROJECTION_SEARCH_INDEX)));
                rootElement.appendChild(em7);

                Element em8 = document.createElement("truncateIdIdx");
                em8.appendChild(document.createTextNode(mCur.getString(Browser.TRUNCATE_HISTORY_PROJECTION_ID_INDEX)));
                rootElement.appendChild(em8);

                Element em9 = document.createElement("truncateOldest");
                em9.appendChild(document.createTextNode(mCur.getString(Browser.TRUNCATE_N_OLDEST)));
                rootElement.appendChild(em9);

                mCur.moveToNext();
            }
        }

        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        DOMSource source = new DOMSource(document);
        StreamResult result = new StreamResult(newxmlfile);
        transformer.transform(source, result);

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

By using the above method i can get the browser history and able to save the data into xml file on sdcard.But in some kind of android devices are not getting browser history completly and not saving into xml file.If I test the app on Motorola Droid device then it is working fine.But If I test the same app on I have tested app on npm702 NOVO7PALADIN then i am not able to get browser history in my xml file.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T11:44:52.393

首先，永远不要硬连线`/sdcard`。用于`Environment.getExternalStorageDirectory()`获取外部存储的根目录。

其次，`Browser.BOOKMARKS_URI`最多可以为作为 Android 开源项目一部分的开源浏览器应用程序工作。欢迎设备制造商将该应用程序替换为不会记录其历史记录、书签或其他任何内容的其他应用程序`ContentProvider`。同样，允许用户下载第三方浏览器，这些浏览器可能不会在`ContentProvider`.

第三，NOVO7PALADIN 可能没有通过兼容性测试套件，特别是如果它没有预装 Google Play Store（以前的 Android Market）。这意味着欢迎设备制造商破坏他们想要的任何东西，包括开源浏览器应用程序是否在`ContentProvider`.

您需要联系 NOVO7PALADIN 制造商以了解更多信息。

# ios - What's the formula of kCGBlendModeColorDodge

> ID：10393319
> 
> 赞同：3
> 
> 时间：2012-05-01T03:49:38.810
> 
> 标签：ios, graphics, quartz-graphics

I am using “CGContextSetBlendMode” function in Quartz2D,but I don't understand the meaning of "kCGBlendModeColorDodge" constant.What's the formula of kCGBlendModeColorDodge?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:10:24.473

这是“颜色减淡”的公式：

```
// v1 and v2 are the RGBA pixel values for the two pixels 
// "on top of each other" being blended
void someFunction(v1,v2) {
    return Math.min(v1 + v2, 255);
} 
```

来源是这个页面：

[http://jswidget.com/blog/2011/03/11/image-blending-algorithmpart-ii/](http://jswidget.com/blog/2011/03/11/image-blending-algorithmpart-ii/)

**编辑：**

有两个闪避功能。一种是线性的，另一种是简单地称为“闪避”。以下是不同混合模式的更广泛列表：

[Photoshop如何将两张图片融合在一起？](https://stackoverflow.com/questions/5919663/how-does-photoshop-blend-two-images-together)

混合模式公式在此页面上确认：

[http://www.pegtop.net/delphi/articles/blendmodes/dodge.htm](http://www.pegtop.net/delphi/articles/blendmodes/dodge.htm)

...但在这个页面上，他们似乎通过反转公式来得到它：

[http://www.simplefilter.de/en/basics/mixmods.html](http://www.simplefilter.de/en/basics/mixmods.html)

您可能仍然需要弄清楚特殊情况，并记住“1”实际上是“255”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:06:08.947

尝试：

```
// t_component's range is [0...1]
t_component dodge_component(const t_component& a, const t_component& b) {
  // note: saturate and limit to range
  return a / (1.0 - b);
}

t_color dodge_color(const t_color& a, const t_color& b) {
  t_color result;
  for (each component in color_model) {
    result.component[i] = dodge_component(a.component[i], b.component[i]);
  }
  return result;
} 
```

# ruby-on-rails - 从 rails 访问静态文件/文件夹

> ID：10393323
> 
> 赞同：1
> 
> 时间：2012-05-01T03:50:20.590
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有几个生成的页面，我希望 Rails 路由到这些页面。

例如，在我的 Rails 根目录中，我有一个“生成”文件夹，其中包含许多生成的网页（静态 html，具有自己的样式表和相对于其路径的图像）。

我想告诉 Rails 允许它们路由，就像 apache、nginx 允许你这样做一样。顺便说一句，这仅适用于开发模式。我知道这可以很容易地在生产中使用 nginx/apache 来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:52:21.890

选项1。

您可以将这些“生成”文件夹放在您的公共目录中，并在您的视图中链接到它

选项 2。

直接在 app/views 中移动那些“生成”的文件夹，添加一个 StaticPage 控制器并渲染它们。看[这个例子](http://ruby.railstutorial.org/chapters/static-pages#sec%3astatic_pages)

# css - 如何在 Twitter Bootstrap 中添加自定义图标？

> ID：10393325
> 
> 赞同：38
> 
> 时间：2012-05-01T03:50:25.357
> 
> 标签：css, xhtml, twitter-bootstrap

我用 Twitter Bootstrap 添加图标没有问题。他们有很多选择。

> [http://twitter.github.com/bootstrap/base-css.html#icons](http://twitter.github.com/bootstrap/base-css.html#icons)

但是，我找不到菜单项之一的合适图标。这是关于“汽车”的。我想要的是我想添加我的自定义图标。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-01T11:09:53.717

您可以通过在自己的类中定义它来创建自己的图标，例如 s：

```
.icon-car {
    background-image: url("http://cdn5.iconfinder.com/data/icons/Symbolicons_Transportation/24/Car.png");
    background-position: center center;
} 
```

当然要记住使用前缀`.icon-*`，因为它是由引导程序设置的属性选择器定位的，以应用所有样式（宽度/高度/行高等...）。

只需尝试保持与原始图标（14x14）相同的宽度和高度，这样您就不必定义自己的宽度和高度，也不会与`line-height`您的元素混淆。这是一个带有这种情况的演示：http: [//jsfiddle.net/RwFeu/](http://jsfiddle.net/RwFeu/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-03T15:29:59.640

这就是我们所做的，以便所有图标都在一个 sprite 文件中，并且您可以允许任意大小的图标。

创建一个 CSS 文件，如

```
[class^="icon-custom-"],
[class*=" icon-custom-"] {
  background-image: url("https://app.10000ft.com/images/compSpritesButtonsIcons.png?8");
}

.icon-custom-logo { background-position : -530px -700px; width : 142px; height : 158px;  }
.icon-custom-intheoffice { background-position: -395px -60px; width: 24px; height: 24px  } 
```

然后在你的标记中，

```
<i class="icon-search"></i> a standard bootstrap icon
<i class="icon-custom-intheoffice"></i> a custom icon, using our own sprite file.
<i class="icon-custom-logo"></i> a logo, an even bigger sprite icon
<!-- spritefile from www.10000ft.com. not for reuse, please --> 
```

请注意，这假设一个包含所有图标的 sprite 文件。如果您有多个精灵文件，则`background-image`需要为每个图标设置相应的。

JSFiddle 在[http://jsfiddle.net/shyamh/cvHdt/](http://jsfiddle.net/shyamh/cvHdt/)

该解决方案基于[Kevin发布的示例](http://favbulous.com/post/1006/create-custom-icons-for-twitter-bootstrap-easily)

# jquery - jQuery UI Datepicker 使用 onChangeMonthYear 更新日期

> ID：10393332
> 
> 赞同：18
> 
> 时间：2012-05-01T03:51:42.373
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我有很多客户抱怨当他们在 JQuery Datepicker 上更改日期时，它不会更新日期......这是因为他们更改了月份/年份并希望它在不选择日期的情况下更新日期。

所以我想我会帮助他们并使用 onChangeMonthYear() 函数自动更新他们的日期。

我的代码如下。当我更改月份或年份时，它会带我到 2017 年或 1987 年......我不明白出了什么问题。我错过了什么吗？

```
$('#member_birthday_full').datepicker({ 
    altField: '#member_birthday',
    altFormat: 'yy-mm-dd',
    changeMonth: true,
    changeYear: true,
    dateFormat: 'DD, d MM yy',
    showAnim: 'slideDown',
    yearRange: '-125:+0',
    onChangeMonthYear:function(y, m, i){                                
        var d = i.selectedDay + '';                       
        if (d.length < 2) 
            d = '0' + d;                       
        var m = m + '';                       
        if (m.length < 2) 
            m = '0' + m;   
        $(this).datepicker( "setDate", y + '-' + m + '-' + d ); 
    }
});​ 
```

[http://jsfiddle.net/3YQZV/](http://jsfiddle.net/3YQZV/)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-01T04:29:53.510

最简单的解决方案（参见[演示](http://jsfiddle.net/ambiguous/JGrVp/)）是使用 Date 对象设置新日期：

```
onChangeMonthYear:function(y, m, i){                                
    var d = i.selectedDay;
    $(this).datepicker('setDate', new Date(y, m - 1, d));
} 
```

* * *

来自[精美手册](http://api.jqueryui.com/datepicker/#method-setDate)：

> **setDate(date)**
> [...]
> **date**
> 类型：*字符串*或*日期*
> 新日期。

但是您在`altFormat`. 然后日期选择器尽最大努力`yy-mm-dd`使用该`DD, d MM yy`格式解析日期，而您最终在 1887 年感到茫然和困惑，想知道您的 DeLorean 在哪里。

您还需要决定如果他们试图从 1 月 31 日到 2 月搬家，您将要做什么。您可能想去 2 月 28 日（或闰年的 29 日）。如果你从 1 月 29 日、1 月 30 日、5 月 31 日开始，……然后再往前一个月，就会出现类似的问题；如果您从 6 月 30 日开始并尝试返回一个月，则会出现稍微不同的问题。我将把它作为练习留给读者。

# c - Berkeley DB segfault - __bamc_put 参数未对齐？

> ID：10393334
> 
> 赞同：0
> 
> 时间：2012-05-01T03:52:45.500
> 
> 标签：c, segmentation-fault, parameter-passing, berkeley-db

我正在尝试在一个简单的程序中使用 BDB，但遇到了段错误问题。

```
Program received signal SIGSEGV, Segmentation fault.
__bamc_put (dbc=0x60e7f0, key=0x0, data=0x60b240, flags=6337152, pgnop=0x0)
    at ../src/btree/bt_cursor.c:2077
2077    ../src/btree/bt_cursor.c: No such file or directory. 
```

gdb 回溯：

```
#0  __bamc_put (dbc=0x60e7f0, key=0x0, data=0x60b240, flags=6337152, pgnop=0x0)
    at ../src/btree/bt_cursor.c:2077
#1  0x0000000000404152 in bzing_inv_add (hnd=0x60c010, hash=..., data=80)
    at /atlas/www/libbzing/src/bzing.c:189
#2  0x00000000004041fa in bzing_block_add (hnd=0x60c010, 
    data=0x7fffb0d7d000 "\001", max_len=1163428803, actual_len=0x7fffffffe458)
    at /atlas/www/libbzing/src/bzing.c:217
#3  0x00000000004044d4 in bzing_index_regen (hnd=0x60c010, 
    data=0x7fffb0d7d000 "\001", len=1163428803)
    at /atlas/www/libbzing/src/bzing.c:269
#4  0x000000000040301c in main (argc=1, argv=0x7fffffffe628)
    at /atlas/www/libbzing/test/bzing_test.c:75 
```

使用 valgrind memcheck 运行时，段错误消失，程序正常完成，没有来自 valgrind 的任何警告。

请注意，根据 gdb，__bamc_put 如何传递一个 NULL 指针作为关键参数。这似乎是造成段错误的明显罪魁祸首。但事情是这样的，DB->put 的第二个参数实际上应该是事务或非事务插入的 NULL。

这是我的代码：

```
DBT bdb_key, bdb_data;

memset(&bdb_key, 0, sizeof(DBT));
memset(&bdb_data, 0, sizeof(DBT));
bdb_key.data = hash.d8;
bdb_key.size = 32;
bdb_data.data = (char *) &data;
bdb_data.size = 8;

result = hnd->bdb_inv->put(hnd->bdb_inv, NULL, &bdb_key, &bdb_data, 0); 
```

来自：[https ://github.com/justmoon/bzing/blob/master/src/bzing.c](https://github.com/justmoon/bzing/blob/master/src/bzing.c)

这是出现在文档和我找到的所有示例中的签名。

```
DB->put(DB *db, DB_TXN *txnid, DBT *key, DBT *data, u_int32_t flags); 
```

请参阅[http://docs.oracle.com/cd/E17076_02/html/api_reference/C/dbput.html](http://docs.oracle.com/cd/E17076_02/html/api_reference/C/dbput.html)

如果我尝试使用 gdb 指示的签名（省略 DB_TXN 参数），我只会收到编译器警告，因为编译器根据文档使用正确的签名。

所以我想也许我链接到了错误的库？但：

```
$ ldd build/test/bzing_test | grep libdb
    libdb-5.1.so => /usr/lib/x86_64-linux-gnu/libdb-5.1.so (0x00007f28dd7ec000)
$ dpkg -L libdb5.1-dev
/.
/usr
/usr/share
/usr/share/doc
/usr/include
/usr/include/db.h
/usr/include/db_185.h
/usr/lib
/usr/lib/x86_64-linux-gnu
/usr/lib/x86_64-linux-gnu/libdb-5.1.a
/usr/share/doc/libdb5.1-dev
/usr/lib/x86_64-linux-gnu/libdb.a
/usr/lib/x86_64-linux-gnu/libdb.so
$ dpkg -L libdb5.1
/.
/usr
/usr/share
/usr/share/doc
/usr/share/doc/libdb5.1
/usr/share/doc/libdb5.1/build_signature_amd64.txt
/usr/share/doc/libdb5.1/copyright
/usr/share/doc/libdb5.1/changelog.Debian.gz
/usr/share/lintian
/usr/share/lintian/overrides
/usr/share/lintian/overrides/libdb5.1
/usr/lib
/usr/lib/x86_64-linux-gnu
/usr/lib/x86_64-linux-gnu/libdb-5.1.so 
```

编译器肯定在使用`/usr/include/db.h`，头文件和库都是 Ubuntu 包中的原始文件。我首先在 Ubuntu 11.10 上遇到了这个问题，升级到 Ubuntu 12.04 后它仍然存在。

我正在使用 CMake 和这些标志进行编译：

```
cd /atlas/www/libbzing/build/src && /usr/bin/gcc  -DBZING_BUILD -Wall -fvisibility=hidden -std=c99 -pedantic -DDEBUG -g -I/atlas/www/libbzing/build/src/../bzing-0.1.0/include/bzing/..    -o CMakeFiles/bzing_s.dir/bzing.c.o   -c /atlas/www/libbzing/src/bzing.c
...
/usr/bin/ar cr ../bzing-0.1.0/lib/libbzing_s.a  CMakeFiles/bzing_s.dir/bzing.c.o CMakeFiles/bzing_s.dir/bzing_parser.c.o CMakeFiles/bzing_s.dir/util.c.o
/usr/bin/ranlib ../bzing-0.1.0/lib/libbzing_s.a
...
/usr/bin/gcc   -Wall -fvisibility=hidden -std=c99 -pedantic -DDEBUG -g    CMakeFiles/bzing_test.dir/bzing_test.c.o  -o bzing_test -rdynamic -L/atlas/www/libbzing/build/test/../bzing-0.1.0/lib ../bzing-0.1.0/lib/libbzing_s.a -llmc -lpthread -lrt -lcrypto -ltokyocabinet -ldb -Wl,-rpath,/atlas/www/libbzing/build/test/../bzing-0.1.0/lib 
```

如果我运行相同的程序，但选择哈希表数据库类型，我会遇到与 __hamc_put 相同的问题：

```
Program received signal SIGSEGV, Segmentation fault.
__hamc_put (dbc=0x60e7f0, key=0x0, data=0x60b240, flags=6337152, pgnop=0x0)
    at ../src/hash/hash.c:1068 
```

我试过`-fPIC`了，但得到了相同的结果。

任何帮助将不胜感激。也许我走错了路，而 gdb 只是出于某种原因显示了错误的签名，但问题出在其他地方？

**更新：**

看起来 ->put 指针是错误的。它应该指向 __db_put_pp：

```
dbp->put = __db_put_pp; 
```

（db_method.c 第 248 行）

但指向`__bamc_put`/`__hamc_put`代替：

```
Breakpoint 3, bzing_inv_add (hnd=0x60c010, hash=..., data=80)
    at /atlas/www/libbzing/src/bzing.c:189
189     result = hnd->bdb_inv->put(hnd->bdb_inv, NULL, &bdb_key, &bdb_data, 0);
(gdb) print hnd->bdb_inv->put
$1 = (int (*)(DB *, DB_TXN *, DBT *, DBT *, 
    u_int32_t)) 0x7ffff7034d00 <__hamc_put> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:31:06.410

“缺失”参数是因为当您到达`__bamc_put`（或`__hamc_put`）时，事务已移至`dbc`参数中。（这是一个“数据库游标”。）我不太明白为什么上面没有框架`__bamc_put`，因为它是通过另一层调用的（实际上是两个：`__db_put_pp`然后`__db_put`）。

尤其奇怪的是它会与 valgrind 一起工作，而没有它就会失败。

# windows-phone-7 - 即使开发机器上的硬件有限，我还能设法在 Windows Phone 上进行开发吗？

> ID：10393338
> 
> 赞同：1
> 
> 时间：2012-05-01T03:53:01.320
> 
> 标签：windows-phone-7, windows-phone

我一直有兴趣在这个平台上进行开发。我什至已经在我的桌面上安装了这些工具，但我无法将我的 WDDM 从 1.0 升级到 1.1。为了简单起见：我的图形芯片无法胜任运行模拟器的任务。

如果我仍然出于开发目的购买 Windows Phone（例如诺基亚 Lumia），我可以在那里有效地侧载和测试我的应用程序，而不是与模拟器对抗吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T03:58:34.327

> 如果我仍然出于开发目的购买 Windows Phone（例如诺基亚 Lumia），我是否可以在那里有效地侧载和测试我的应用程序，而不是与模拟器对抗

是的当然。这非常简单方便。你有调试器和所有的好东西。模拟器的优势在于 256MB 设备的测试选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:56:41.083

这正是我在升级我的 devstation 之前所做的。名义上的最低规格说是 3G，但使用真正的手机，它在 2G 下运行良好，正如你所说，这也解决了图形限制。

请注意，使用仿真器还是物理设备的设置存储在项目中，因此如果您接受其他人的项目，则必须在调试前设置一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:20:28.213

那么硬币有两个面。使用物理设备，您可以测试大部分内容，但有一些限制

1.  您将无法测试与互联网相关的测试用例 - 例如，如果您有一个使用互联网连接的应用程序，那么您将无法在设备上轻松对其进行测试，因为

    *   设备不使用机器互联网连接
    *   当连接到 PC 时，设备的互联网连接（数据连接 3G/wifi/GPRS）断开。
2.  从要测试应用的第一天起，您就必须购买一个帐户。如果您有模拟器工作，那么您可以将其推迟至少几天。

# jquery - 如何访问脚本外部的 jQuery 变量？

> ID：10393350
> 
> 赞同：1
> 
> 时间：2012-05-01T03:55:26.647
> 
> 标签：jquery

我是 jquery 的绝对新手。所以这可能是一个非常基本的问题，请多多包涵。

我已经定义了一个 jQuery 函数，它创建了一个二维数组。

```
 <script type="text/javascript">
        $(document).ready(function() {
            $.ajax({
                url: '/testdata.txt',
                dataType: 'text',
                success: function(data) {
                    var datatable = [];
                            // Populate datatable[]. This is a 2-d array.
                            $('#myTestDiv').text(datatable[2][0]);
                        },
                        error: function(){
                            alert('error!');
                        }
                    })
                });
    </script>

<body>
    <table>
        <thead>
        </thead>
    </table>
</body> 
```

现在，我想在 HTML 表中打印二维数组“datatable”，最好使用 JSTL。但似乎无法在外部访问“数据表”变量。我知道表格已正确填充，`$('#myTestDiv').text(datatable[2][0]);`正在打印预期输出。

如何做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T03:59:05.773

`var`从变量声明的前面删除。这将导致变量被放置在全局`window`对象上，使其可以从各处访问。但是要小心这种做法，因为污染你的全球环境是不受欢迎的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:59:28.377

我建议您应该`datatable`在函数外部声明变量，`.ajax()`以便它在代码的其他部分可见。

如果您知道它被正确填充，那么这只是一个范围界定问题。

**更新**

```
 $(document).ready(function() {
            var datatable = [];
            $.ajax({
                url: '/testdata.txt',
                dataType: 'text',
                success: function(data) {
                    var lines = data.split('\n');
                    $.each(lines, function(i, val) { 
                        datatable[i] = [];
                    });
                    $.each(lines, function(j, val) { 
                        datatable[j] = lines[j].split(',');
                    });
                    $('#myTestDiv').text(datatable[2][1]);
                },
                error: function(){
                    alert('error!');
                }
            })
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T04:12:01.747

您可以将`datatable`其设为全局变量，以便在任何地方都可用，但这通常不是真正实现正确实现的原因，因为您的其余代码不知道数据何时在该变量中。ajax 函数是异步的，所以你不能仅仅假设数据在`datatable`你的 ajax 函数运行之后就存在。事实上，直到稍后调用成功处理程序时，它才会真正可用。

相反，一个典型的实现是从你的成功函数中调用一个函数，并将数据表变量作为参数传递给它。这解决了（异步 ajax 调用的）时间问题和数据可用性问题（作为参数传递给函数）。看起来像这样：

```
 success: function(data) {
                var datatable = [];
                // Populate datatable[]. This is a 2-d array.
                // call function to process the data
                processData(datatable);

            }, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T04:12:26.770

我不认为您可以访问 JSTL 中的数据表**变量**。JSTL 的角色或动作将在服务器端，而数据**表**是客户端 javascript 变量。您可以尝试的是，将此数据**表**值分配给隐藏的 bean 属性，`$('elementId').val(datatable)`然后在对服务器的进一步请求中在服务器端访问它

# c# - 如何在 asp.net MVC 上初始化网站配置

> ID：10393356
> 
> 赞同：0
> 
> 时间：2012-05-01T03:56:43.830
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我是如何在 asp.net 中使用 MVC 模式的新手。在一般的网络应用程序中，我已经初始化了网站级别常见的配置

喜欢，

```
public partial class Default : MyBaseClass
{
}

public class MyBaseClass : System.Web.UI.Page
{

 public override OnDo()
{

}
} 
```

如有拼写错误请忽略。在 OnDo() 函数中，我初始化 StoreClass 哪些属性可以访问整个应用程序。

这个场景我是如何在 asp.net MVC 中实现的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:29:25.410

您可以使用 global.asax 事件

[http://www.techrepublic.com/article/working-with-the-aspnet-globalasax-file/5771721](http://www.techrepublic.com/article/working-with-the-aspnet-globalasax-file/5771721)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:37:39.007

对于要在每个操作之前触发的事件，您可以执行此操作。

定义一个基本控制器并将其用于所有控制器。

```
public class BaseController : Controller
{
    protected override void OnActionExecuting(ActionExecutingContext context)
    {
    }
} 
```

您的控制器将如下所示：

```
public class MyController : BaseController 
```

`OnActionExecuting`将在每个动作之前被解雇

对于会话级别或应用程序级别事件，您应该使用 global.asax

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T04:18:43.347

在 ASP.Net 项目中，您可以将配置信息放在 web.config 中。但是，我更喜欢将我的配置放在一个 XML 文件中，并使用 ASP.Net 将其部署到网站。这是定义我的配置类的一个示例：

```
public class MyAppConfig {
  private static _config = null;
  // Configuration is a simple class with a list of properties
  public static Configuration Configuration {
     if (_config == null ) {
         _config = new Configuration();
         // parse XMl file and set properties
     }
     return _config;
  }
} 
```

在您的情况下，您可以使用 MyAppConfig 获取 Web 应用程序级别的配置属性：

```
public class MyBaseClass : System.Web.UI.Page
{

  public override OnDo()
  {
      Configuration myConfig = MyAppConfig.Configuration;
      // use properties ....
  }
} 
```

将配置放在您自己的 XML 文件中的好处是该组件可以在其他应用程序中使用，例如控制台应用程序，只需很少的更改。但是，您不能将更改写入 Web 应用程序中的 XML 文件。通常，我将可写信息放在数据库中以解决问题。

# html - Twitter-bootstrap 标头标签在 safari 中出现乱码

> ID：10393357
> 
> 赞同：2
> 
> 时间：2012-05-01T03:56:50.560
> 
> 标签：html, css, cross-browser, twitter-bootstrap

> **可能重复：**
> [为什么在 Windows 上的 Chrome 或 Safari 上查看时，html 文本有时会出现乱码？](https://stackoverflow.com/questions/7327525/why-would-html-text-sometimes-appear-garbled-when-viewing-on-chrome-or-safari-on)

我在设计时在浏览器中测试了我的页面一段时间。而且我注意到标头标签`<h1>`在`<h6>`safari 中没有正确呈现……就像缺少字体一样。我正在运行 twitter-bootstrap，由于某种原因我无法解决这个问题。

![在此处输入图像描述](../Images/0826bc01171b47991478341582d57472.png)

老实说，我认为这是我的电脑字体，而不是浏览器。

如果我在 CSS 中禁用`optimizelegibility`它，它在 Safari 中可以正常工作，但是，我尝试过的所有其他计算机都可以正常工作。

```
body {
    margin: 0;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 13px;
    line-height: 18px;
    color: #333333;
    background-color: #222222;
}

h1, h2, h3, h4, h5, h6 {
    margin: 0;
    font-family: inherit;
    font-weight: bold;
    color: inherit;
    text-rendering: optimizelegibility; /*Causing problems */
} 
```

我的 Windows 电脑上什至没有 helvetica Neue，但是我有所有的 Neue LT 字体。

**更新**

好的，我使用了字体狂热并将我的字体恢复为安装了 Windows 的手机。我从未有过 Helvetica Neue 只有 Helvetica Neue LT。

我让它显示正常，但这提出了一个很好的问题。安装这些字体的人会遇到和我一样的问题吗？

我应该尝试使用字体来解决这个问题吗？我如何诚实地做到这一点，所以没有人会遇到和我一样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:54:15.877

这本质上是同一个问题吗？[为什么在 Windows 上用 Chrome 或 Safari 浏览时 html 文本有时会出现乱码？](https://stackoverflow.com/questions/7327525/why-would-html-text-sometimes-appear-garbled-when-viewing-on-chrome-or-safari-on)

答案（来自链接）：

使用旧版本的 Windows 和旧的 Chrome 分支轻松重新创建。似乎 Chrome 4-8 有这个问题。出于测试目的，请使用 Chrome 4 启动 XP。问题在于`text-rendering: optimizelegibility`. 这是在旧版 Chrome 中使用优化易读性和`@font-face`使用 woff 字体时报告的错误。如果可以重现问题，请尝试取出`vertical-align: baseline`并查看渲染是否仍然是乱码。

* * *

这里的这个链接也有一个关于这个问题的有趣评论：[http ://code.google.com/p/chromium/issues/detail?id=39017](http://code.google.com/p/chromium/issues/detail?id=39017)

# windows-phone-7 - windows phone 在瓷砖上推送通知

> ID：10393363
> 
> 赞同：1
> 
> 时间：2012-05-01T03:58:30.787
> 
> 标签：windows-phone-7, push-notification, live-tile, mpns

我希望我在 wp7 上创建的应用程序在活动磁贴上显示警报。我打算使用推送通知来做到这一点。因此，只要有警报，应用程序就会生成推送通知，然后活动磁贴会显示推送通知警报。我试图在 msdn 上找到示例代码，但没有找到太多。有谁知道任何有助于 wp7 的代码示例。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:30:41.460

MSDN 有[大量的howto 文章](http://msdn.microsoft.com/en-us/library/ff402558%28v=vs.92%29.aspx)和示例代码；甚至还有一个[How to: Send and Receive Tile Notifications for Windows Phone](http://msdn.microsoft.com/en-us/library/hh202970%28v=vs.92%29.aspx)，听起来应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:03:30.643

这可能对您有所帮助：[Windows Phone 7 通知](http://windowsphone.interoperabilitybridges.com/articles/chapter-8-introduction-to-windows-phone-7-notifications-for-iphone-developers)。我参加了一个 Windows Phone 训练营，并在离开时觉得实际上有非常不同的通知，你必须确保你使用正确的类型来完成正确的工作。该链接涵盖了类型及其用途，但确实想让您提前了解一下。

# python - Python CGI 表单（名称错误：未定义名称“表单”）

> ID：10393369
> 
> 赞同：0
> 
> 时间：2012-05-01T03:59:19.923
> 
> 标签：python, html, forms, cgi

我不确定为什么这个 cgi 表单不能正常工作。问题出在 main() 函数的某个地方，但我不太确定如何解决它。通过解释器运行时的错误为：

文件“ptest.py”，第 48 行，在 if (form.has_key("action") 和 form.has_key("name") \ NameError: name 'form' is not defined

假设适当的缩进。

```
# Import the CGI module
import cgi, cgitb

# Required header that tells the browser how to render the HTML.
print "Content-Type: text/html\n\n"

# Define function to generate HTML form.
def generate_form():
    print "<HTML>\n"
    print "<HEAD>\n"
    print "\t<TITLE>Info Form</TITLE>\n"
    print "</HEAD>\n"
    print "<BODY BGCOLOR = white>\n"
    print "\t<H3>Please, enter your name and age.</H3>\n"
    print "\t<TABLE BORDER = 0>\n"
    print "\t\t<FORM METHOD = post ACTION = \
                \"example_7.1.cgi\">\n"
    print "\t\t<TR><TH>Name:</TH><TD><INPUT type = text \
                name = \"name\"></TD><TR>\n"
    print "\t\t<TR><TH>Age:</TH><TD><INPUT type = text name = \
                \"age\"></TD></TR>\n"
    print "\t</TABLE>\n"
    print "\t<INPUT TYPE = hidden NAME = \"action\" VALUE = \
            \"display\">\n"
    print "\t<INPUT TYPE = submit VALUE = \"Enter\">\n"
    print "\t</FORM>\n"
    print "</BODY>\n"
    print "</HTML>\n"

# Define function display data.
def display_data(name, age):
    print "<HTML>\n"
    print "<HEAD>\n"
    print "\t<TITLE>Info Form</TITLE>\n"
    print "</HEAD>\n"
    print "<BODY BGCOLOR = white>\n"
    print name, ", you are", age, "years old."
    print "</BODY>\n"
    print "</HTML>\n"

# Define main function.

def main():
    form = cgi.FieldStorage()
    if (form.has_key("action") and form.has_key("name") \
        and form.has_key("age")):
            if (form["action"].value == "display"):
                display_data(form["name"].value, form["age"].value)
    else:
        generate_form()

if __name__ == '__main__':
    main() 
```

# java - 使用 html 监听队列

> ID：10393379
> 
> 赞同：0
> 
> 时间：2012-05-01T04:01:47.977
> 
> 标签：java, applet

我有一个侦听器代码，它正在侦听队列并在控制台上打印消息。这是实时发生的。（这意味着，一旦消息进入队列，它就会被侦听器消费并同时显示在控制台上）

现在的要求：我想在 html 上显示消息并且它应该实时发生。（即不使用轮询或刷新 (F5)）。

是否可以使用小程序？（我想将我的侦听器代码创建为小程序并更新 html，但不确定是否可以从小程序更新 html）

有没有其他选择来实现这个要求？

我希望我能够传达要求！

Oracle 论坛中发布了相同的查询：[https ://forums.oracle.com/forums/thread.jspa?threadID=2382740&stqc=true](https://forums.oracle.com/forums/thread.jspa?threadID=2382740&stqc=true)

提前致谢。钱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:08:21.463

您可以从小程序调用 javascript 函数来更新您的页面。

教程：[http ://www.rgagnon.com/javadetails/java-0172.html](http://www.rgagnon.com/javadetails/java-0172.html)

# java - Java：未找到主要类 - 以下书籍示例

> ID：10393380
> 
> 赞同：0
> 
> 时间：2012-05-01T04:02:28.067
> 
> 标签：java

我目前在使用*[Java 的 Java 类：如何编程，第九版](http://www.isbnsearch.org/isbn/0132575663)*

我在创建 GradeBook 时遵循这本书，但遇到了一个错误，指出没有找到主要课程。

这是我的项目文件夹中两个文件的代码：

GradeBook.java

```
// Fig. 2.1: GradeBook.java
// Class declaration with one method.
public class GradeBook
{
    // display a welcome message to the GradeBook user
    public void displayMessage()
    {
        System.out.println ( "Welcome to the Grade Book!");
    } // end method displayMessage
} // end class GradeBook 
```

GradeBookTest.java

```
// Fig. 3.2: GradeBookTest.java
// Creating a GradeBook object and calling its displayMessage method.

public class GradeBookTest
{
    // main method begins program execution
    public static void main( String[] args )
    {
        // create a GradeBook object and assign it to myGradeBook
        GradeBook myGradeBook = new GradeBook();

        // call myGradeBook's displayMessage method
        myGradeBook.displayMessage();
    } // end main
} // end class GradeBookTest 
```

我正在使用 NetBeans IDE 创建和运行我的项目。这只是我上 Java 课程的第二周，所以我仍在学习和围绕 NetBeans 和 Java 工作。任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:05:13.027

如果是 eclipse，我会在 GradeBookTest 中运行 main 方法。您是否正在尝试运行该项目？或者只是 GradeBookTest 主要的？尝试运行 GradeBookTest。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:07:23.650

在项目属性中，在“运行”下选择`GradeBookTest`要运行的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T04:19:34.340

尝试选择文件并按 Ctrl+Shift+F10。如果这不起作用，请检查 JAVA_HOME 是否设置正确，并且您在 Settings->Compiler->Java Compiler 下使用了正确的编译器 (javac)。我没有足够的积分来发布屏幕截图，否则我的机器上正在运行确切的东西，我可以分享屏幕截图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T17:20:33.107

有解决这个问题的原因和方法

1.  该类不在项目的正确 src 目录中。

2.  其次，如果您创建了类，则必须先编译它们，然后才能将它们用作主类。

右键单击左侧树菜单上的文件名，然后选择编译。否则编译类的快捷键是 F9 。

这肯定会解决你的问题:)。

# php - 弹出窗口后如何对齐弹出窗口？（显示弹出页面的特定部分）

> ID：10393383
> 
> 赞同：0
> 
> 时间：2012-05-01T04:02:44.557
> 
> 标签：php, javascript, popup

我有一个 js 代码来制作一个简单的弹出窗口，但我试图在弹出页面后对齐页面。这意味着一旦用户单击弹出链接，我只想显示页面的一部分。我不需要标题和侧边栏来显示页面的内容。

这可能吗？

这是我当前的代码。

```
<script type="text/javascript">
    // Popup window code
    function newPopup(url) {
            popupWindow = window.open(url,'popUpWindow','height=700,width=700,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
    }
</script>

<a href="javascript:newPopup('<?php the_permalink() ?>');">Click here to Player</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:50:16.157

使用锚，例如

```
http://example.com/somepage.html#jump_to_here
                                ^^^^^^^^^^^^^ 
```

并在页面内：

```
<a name="jump_to_here">Yoohoo, here I am!</a> 
```

# initialization - 初始化哈希表的大小

> ID：10393384
> 
> 赞同：0
> 
> 时间：2012-05-01T04:02:46.897
> 
> 标签：initialization, size, hashtable, load-factor

如果我有一个我知道将存储 13 个项目的哈希表，我如何将我的表初始化为适当的大小？我在我的书中读到负载系数应该在 2/3 或以下。这是否意味着如果我已经知道在任何时候我的表中的最大项目数将是 13，我可以执行以下操作：

```
tableSize = nextPrime((numEntries * 3)/2); 
```

我对上述分配的想法是 numEntries 代表数字 13，因为我知道负载因子必须低于 2/3，所以我找到了使比率为 2/3 所需的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:16:07.673

您可以将哈希表初始化为`new Hashtable(initialSize, loadFactor)`

简单来说，负载因子决定了何时为哈希表分配更多内存

您必须知道，与数组不同，您不需要在初始化哈希表时指定内存。适当的负载因子有助于减少重复内存分配的开销。

AFAIK 2/3 的负载因子表示哈希表在 2/3 满时分配内存。

查看：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html)

如果您知道哈希表将存储 13 个条目，为什么不将其初始化为

`new Hashtable(13)`并且不用担心在需要新分配时出现的**负载因子。**

# python - Python ...静态变量？

> ID：10393385
> 
> 赞同：1
> 
> 时间：2012-05-01T04:02:56.477
> 
> 标签：python

> **可能重复：**
> [Python 中的实例变量与类变量](https://stackoverflow.com/questions/2714573/instance-variables-vs-class-variables-in-python)

这两种情况有什么区别，在 Python 中如何处理？

防爆1

```
class MyClass:
     anArray = {} 
```

Ex2

```
class MyClass:
     __init__(self):
          self.anArray = {} 
```

似乎在第一个示例中，数组被视为静态变量。Python如何处理这个问题，这是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T04:06:46.007

在第一个示例中，`anArray`（在 Python 中称为字典，而不是数组）是类属性。可以使用`MyClass.anArray`. 一旦定义了类，它就存在。

在第二个示例中，`anArray`是一个实例属性。可以使用`MyClass().anArray`. （但请注意，这样做只会丢弃`MyClass`创建的实例；更明智的示例是`mc = MyClass(); mc.anArray['a'] = 5`。）在创建类的实例之前它不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:08:11.290

它被宣布为不同的区域。Ex1 类似于全局或静态变量。

```
obj = MyClass()
obj2 = MyClass()
print "IS one instance ", id(obj.anArray) == id(obj2.anArray) 
```

Ex2 是本地属性。

```
obj = MyClass()
obj2 = MyClass()
print "IS one instance ", id(obj.anArray) == id(obj2.anArray) 
```

# algorithm - 算法找出可以在没有干扰的情况下打开多少个雷达塔

> ID：10393387
> 
> 赞同：0
> 
> 时间：2012-05-01T04:03:32.250
> 
> 标签：algorithm, complexity-theory, graph-theory, puzzle

我想到了一个有趣的问题，想知道是否有人知道如何解决它：

> 地球上有许多城市。鲍勃在每个城市都建了一座雷达塔。每个城市都应该能够播放当地的音乐。
> 
> 不可原谅的是，所有的雷达塔都互相干扰，所以鲍勃不得不把它们都关掉。
> 
> 幸运的是，鲍勃发明了他放置在城市之间的盾牌（有些放置在地球核心附近，有些放置在城市边界）。
> 
> 对于 N 个城市，有 N*(N-1)/2 个盾牌。
> 
> 遗憾的是，许多护盾被破坏了。
> 
> 你会得到一对没有盾牌的城市。

任务是**找出最大数量的雷达塔可以打开而不会造成任何干扰**。

到目前为止，我已经尝试将其表示为一个图形（如果城市之间没有屏蔽，则城市是相连的），并找到一个使最常见颜色的数量最大化的图形着色。基本上我选择一个起始节点，将其设为红色，然后所有周围的节点变为蓝色，然后变为红色，等等。我想知道是否有更快的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:47:40.753

这不是关于[http://en.wikipedia.org/wiki/Independent_set_%28graph_theory%29#Finding_maximum_independent_sets](http://en.wikipedia.org/wiki/Independent_set_%28graph_theory%29#Finding_maximum_independent_sets)中的最大独立集的问题吗？（NP-complete，但指数时间算法比简单的蛮力搜索更快）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T04:14:14.867

如果两个雷达塔在提供的对中且它们之间没有屏蔽，则它们不能同时打开。通过找到节点指示雷达塔已打开的树的最长深度，您可以通过采用具有最长深度的分支找到可以在不受干扰的情况下打开的塔的最大数量。一旦你采取了一个节点（即打开一个塔），你必须禁用所有其他没有与该塔盾的塔。

# cuda - OpenCl 相当于在 CUDA 中查找连续索引

> ID：10393390
> 
> 赞同：2
> 
> 时间：2012-05-01T04:04:34.417
> 
> 标签：cuda, opencl, cuda.net, opencl.net

在 CUDA 中，为了覆盖多个块，从而增加数组的索引范围，我们执行以下操作：

主机端代码：

```
 dim3 dimgrid(9,1)// total 9 blocks will be launched    
 dim3 dimBlock(16,1)// each block is having 16 threads  // total no. of threads in  
                   //   the grid is thus 16 x9= 144\. 
```

设备端代码

```
 ...
 ...     
 idx=blockIdx.x*blockDim.x+threadIdx.x;// idx will range from 0 to 143 
 a[idx]=a[idx]*a[idx];
 ...
 ... 
```

OpenCL 中实现上述情况的等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:25:47.090

在主机上，当您使用 将内核排入队列时`clEnqueueNDRangeKernel`，您必须指定全局和本地工作大小。例如：

```
size_t global_work_size[1] = { 144 }; // 16 * 9 == 144
size_t local_work_size[1] = { 16 };
clEnqueueNDRangeKernel(cmd_queue, kernel, 1, NULL,
                       global_work_size, local_work_size,
                       0, NULL, NULL); 
```

在您的内核中，使用：

```
size_t get_global_size(uint dim);
size_t get_global_id(uint dim);
size_t get_local_size(uint dim);
size_t get_local_id(uint dim); 
```

分别检索全局和局部工作大小和索引，其中`dim`是`0`for `x`、`1`for`y`和`2`for `z`。

因此，相当于您的`idx`遗嘱`size_t idx = get_global_id(0);`

请参阅[OpenCL 参考页](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T02:37:35.023

CUDA 和 OpenCL 之间的等价关系是：

```
blockIdx.x*blockDim.x+threadIdx.x = get_global_id(0)

LocalSize = blockDim.x

GlobalSize = blockDim.x * gridDim.x 
```

# emacs - 当我从桌面会话恢复时发出警告。Emacs

> ID：10393391
> 
> 赞同：2
> 
> 时间：2012-05-01T04:04:40.777
> 
> 标签：emacs, advising-functions, defadvice

昨天我从 EmacsWiki 找到了桌面模式，然后我为我的 Emacs 24 配置了它：

```
;; Desktop
(require 'desktop)

;; save the desktop file automatically if it already exists
(desktop-save-mode 1)

;; use only one desktop
(setq desktop-path '("~/.emacs.d/tmp/"))
(setq desktop-dirname "~/.emacs.d/tmp/")
(setq desktop-base-file-name "desktop.cache") 
```

*但是当我重新启动 Emacs 时，我在*Compile-Log**缓冲区中收到警告：

```
Warning: ad-Orig-kill-region called with 3 arguments, but accepts only 2 
```

其他人在使用桌面时遇到此警告？或者，还有比桌面模式更好的附加组件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:20:39.360

`ad-Orig-`前缀告诉您建议使用该功能`kill-region`。可能该建议引起了问题？

`C-h``f` `kill-region` `RET`应该告诉您建议的名称；很有可能它是你自己的配置中的东西，所以我会先在那里寻找它。

查看禁用建议是否可以解决问题。

我确实注意到 Emacs 24 中的这个函数有点奇怪。的源代码`kill-region`显然采用了可选的第三个参数，但该`*Help*`屏幕仅提到了两个必需的参数。

我检查了 Emacs 23，那里的帮助提到了所有三个参数。

也许 Emacs 24 中存在一个错误，它导致帮助输出中的差异以及您看到的错误？

# sql - SQL 存储过程转换失败

> ID：10393393
> 
> 赞同：0
> 
> 时间：2012-05-01T04:05:00.313
> 
> 标签：sql, stored-procedures

我在使用存储过程时遇到问题，该存储过程将信息从内置的 C# 角色和成员管理表中提取到我自己的自定义表中。该过程在最后一个 Update 语句之前运行良好。

```
ALTER PROCEDURE [dbo].[GetPerpsectiveMemberList]
AS
DECLARE @Members TABLE
(
RowNumber INT,
PerspectiveMemberID INT,
FirstName varchar(MAX),
LastName varchar(MAX),
[Address] varchar(MAX),
City varchar(MAX),
[State] varchar(MAX),
Zip varchar(MAX),
Email varchar(MAX),
ASPMemberID varchar(MAX),
ASPUsername varchar(MAX),
RoleID2 varchar(MAX),
RoleName2 varchar(MAX)
)
INSERT INTO @Members
SELECT ROW_NUMBER() OVER (ORDER BY Perspective_Member.PerspectiveMemberID), PerspectiveMemberID, Perspective_Member.FirstName, Perspective_Member.LastName, 
Perspective_Member.[Address], Perspective_Member.City, Perspective_Member.[State],   Perspective_Member.[State], Perspective_Member.Zip, Perspective_Member.ASPMemberID, 
Perspective_Member.ASPUsername,PerspectiveMemberID, ASPMemberID
FROM Perspective_Member
UPDATE @Members
SET RoleID2 = aspnet_UsersInRoles.RoleId
FROM aspnet_UsersInRoles
WHERE ASPMemberID = UserId
UPDATE @Members
SET RoleName2 = RoleName
FROM aspnet_Roles
WHERE RoleID2 = RoleID
SELECT * FROM @Members 
```

当程序失败时，我收到此消息

```
Conversion failed when converting from a character string to uniqueidentifier. 
```

当我搜索此错误消息时，我发现每个人都在从字符串到唯一标识符时遇到问题，但让我发疯的是最后一个块中使用的唯一唯一标识符正在 WHERE 子句中使用，并且我之前说过，只要最后一次 UPDATE bl，程序就会完美运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T04:11:46.657

您已将 Perspective_Member.[State] 列出两次：

```
Perspective_Member.[State],   Perspective_Member.[State] 
```

这是更正的 INSERT 语句：

```
INSERT INTO @Members
    SELECT ROW_NUMBER() OVER (ORDER BY Perspective_Member.PerspectiveMemberID), 
        PerspectiveMemberID, 
        Perspective_Member.FirstName, 
        Perspective_Member.LastName,
        Perspective_Member.[Address], 
        Perspective_Member.City,
        Perspective_Member.[State], 
        Perspective_Member.Zip,
        Perspective_Member.Email, 
        Perspective_Member.ASPMemberID,
        Perspective_Member.ASPUsername,
        PerspectiveMemberID, 
        ASPMemberID
    FROM Perspective_Member 
```

此外，您应该将 @Members 表中的 ASPMemberID 和 RoleID2 字段的数据类型更改为`uniqueidentifier`.

更新：似乎错误是由于`PerspectiveMemberID`值（INT）被插入到 RoleID2 列（唯一标识符）中。

# c - 适用于 Windows 的 UTF-8 到 UTF-16 API 包装库？

> ID：10393396
> 
> 赞同：7
> 
> 时间：2012-05-01T04:05:34.997
> 
> 标签：c, winapi, unicode

是否有任何包装库可以模仿 Windows“ANSI”函数名称（例如`CreateFileA`），假设输入是 UTF-8，将它们转换为 UTF-16，调用函数的 UTF-16 版本（例如`CreateFileW`），以及将程序的输出转换回 UTF-8？

它将允许 ASCII 程序几乎无缝地使用 UTF-8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:49:47.517

与包装 API 函数相比，将字符串包装在转换函数中更容易。然后，当下一版本的 Windows 添加更多 API 功能时，您将面向未来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:56:11.960

正如其他人所说，有太多的 WinAPI 函数使这样的库变得可行。但是，可以在工具链级别上破解它，或者使用[http://research.microsoft.com/en-us/projects/detours/](http://research.microsoft.com/en-us/projects/detours/)之类的东西。

**编辑：** [Windows 10 在 ANSI API 中添加了对 UTF-8 代码页的支持](https://docs.microsoft.com/en-us/windows/uwp/design/globalizing/use-utf8-code-page)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T05:19:38.637

有一个叫做[WDL](http://www.cockos.com/wdl/)的东西，它有一些 UTF-8 包装器（win32_utf8）。我从未尝试过，所以我不知道支持有多完整。

# selenium - 如何将 seleniumserver 日志级别设置为信息？

> ID：10393397
> 
> 赞同：2
> 
> 时间：2012-05-01T04:05:57.593
> 
> 标签：selenium, logging

我正在尝试在同一实例中启动 selenium 和 selenium 服务器。我使用 RemoteControlConfiguration.setLogOutFileName($myFileName) 来指定我的日志文件，但我总是在调试模式下获取日志。我需要的级别是信息，有什么建议吗？

protected static RemoteControlConfiguration rcc = new RemoteControlConfiguration(); 受保护的静态 SeleniumServer 服务器；

protected void startServer(String portList, String logPath) 抛出异常{

```
String portStr[] = portList.split(";");
int portNum = 0;

for (int i = 0; i < portStr.length; i ++){
    portNum = Integer.parseInt(portStr[i]);
    String logName = "selenium-server-" + portStr[i] + ".log";
    try{
        rcc.setPort(portNum);
        rcc.setBrowserSideLogEnabled(false);
        rcc.setDontTouchLogging(false);
        rcc.setDebugMode(false);
        rcc.setEnsureCleanSession(true);
        rcc.setReuseBrowserSessions(true);
        rcc.setLogOutFileName(logPath + logName);
        server = new SeleniumServer(false, rcc);
        server.start(); 
        server.getServer().start();
        break;
    }catch(Exception e){
        Thread.sleep(1000);
    }
} 
```

}

# php - 限制用户从同一 IP 访问多个页面

> ID：10393398
> 
> 赞同：0
> 
> 时间：2012-05-01T04:06:12.100
> 
> 标签：php, mysql, ip

我正在编写一个脚本，它将限制来自给定 IP 地址的特定用户的多次访问。换句话说，给定用户将只能从同一 IP 地址访问/查看页面一次。

但是我如何比较传入的 IP 来检测这种访问呢？

我想最多跟踪 60 天的 IP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:11:58.420

首先，不同的计算机/用户可以并且确实共享一个 IP 地址。您可能会阻止很多人访问您的网站，因为他们工作场所的某个人也访问了您的网站。话虽如此，这是我的答案。

你标记`MySQL`了 ，所以创建一个名为“ips”的表 - 或类似的东西。

*   ID
*   知识产权
*   最后访问

每当有人访问您的站点时，请检查是否在此表中找到了他们的 IP 地址，以及 lastAccess 日期是否在今天的 60 天内。如果是，则拒绝或重定向请求。如果他们的 IP 不在表中，或者日期从今天起超过 60 天，则插入/更新表以包含他们的 IP 和当前时间，然后允许他们查看请求的页面。

这不需要在数据库中完成，您可以在平面文件系统中执行类似的逻辑。但是，您将有很多文件打开、读取、写入，这可能有点令人沮丧，因为您可能会尝试写入文件，因为您当前正在尝试读取文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T04:15:51.180

您需要将 IP 存储在某个数据库或平面文件中以进行比较。

假设你有一个`visits`这样的 MySQL 表：

```
`ip` varchar(255) NOT NULL,
`date_created` datetime NOT NULL,
`last_visit` datetime NOT NULL,
`visits` int(255) NOT NULL,
PRIMARY KEY (`ip`) 
```

使用PHP我们可以获取用户的IP，在数据库中创建或更新表记录，然后做一些比较。

```
<?php

// Get the user's IP
$ip = getenv('REMOTE_ADDR');

// Create a database record, or update if they're been here before
$dblink = mysql_connect( 'localhost', 'username', 'password' );
mysql_select_db( 'database', $dblink );
$rs = mysql_query( "INSERT INTO visits (ip, date_created, last_visit, visits) VALUES( '$ip', NOW(), NOW(), 1 ) ON DUPLICATE KEY UPDATE `last_visit` = NOW(), visits=visits+1 ", $dblink );

// Compare database record for last visit and first visit
$rs = mysql_query( "SELECT visits, DATEDIFF( last_visit, date_created ) as sincelast FROM visits WHERE `ip` = '$ip' ");
$row = mysql_fetch_assoc( $rs );

// If this is their first visit, do one thing, otherwise, do another.
if ( $row['sincelast'] > 59 || $row['visits'] < 2 ) {
    // They visited 60+ days ago, or this is their first visit
} else {
    // This is not their first visit
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T01:05:06.730

如果您坚持这样做并且不使用数据库，那么您可能希望将访问数据存储在文件中并访问它以检查 ip 的首次访问时间。当然，这与理论上使用数据库几乎相同。

执行我上面建议的示例函数：（请注意，按原样使用它非常粗糙且不可靠）

```
function allowedIP() {
    $vFile = 'vfile'; // file to store visitor data
    $revisit = 3600*24*60; // not allowed time in seconds
    $now = time(); // visit time
    $vIP = ip2long( $_SERVER['REMOTE_ADDR'] ); // get the ip and convert to long
    $vData = ( file_exists( $vFile ) ) ? 
        unserialize( file_get_contents( $vFile ) ) : array(); // get the visit data
    if( ! isset( $vData[$vIP] ) || $now - $vData[$vIP] > $revisit ) {
        // first visit or 60 days passed since the first visit
        $vData[$vIP] = $now; // store the visit time
        file_put_contents( $vFile, serialize( $vData ) ); // save to file
        return true;
    }
    return false;
} 
```

此功能的用法如下：

```
if( ! allowedIP() ) { /* ip is not allowed, notify the visitor and don't proceed */  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T04:31:20.507

这是一个很大的问题 - IP 并不是机器或人所独有的。那么逻辑是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T04:11:51.790

好吧，您需要在某处查找 IP 列表，因此您可以使用表或将其写入文件，然后相应地读取

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T04:12:38.163

用户`$_SERVER['REMOTE_ADDR']`获取用户的 IP，但这不是最好的方案，因为使用同一个代理的多个用户将在您的服务器上显示为一个 IP = 一个用户。然后将其存储在数据库中。

一个更好的主意是在用户的浏览器上设置一个 cookie，告诉您他们已经访问过。不过，他们可以作弊。但他们也可以通过使用不同的代理来欺骗 IP。

# jquery - 从 Rails 解析 json 到 jquery ajax 自动完成列表

> ID：10393401
> 
> 赞同：0
> 
> 时间：2012-05-01T04:06:31.997
> 
> 标签：jquery, ruby-on-rails

我以前从未这样做过，我正在尝试为每个自动完成列表项显示多个 ldap 属性。

例如，我在 ldap 中将“admin”搜索为 sAMAccountName，我的搜索函数为每个匹配项返回两个值。sAMAccountName 和 idnumber，所以我的列表项必须同时包含 sAMAccountName 和 idnumber。而不仅仅是在文本字段中键入的 sAMAccountName “admin”。如何让 jQuery 为每个列表项读取多个属性？

```
def search
  if (params[:term] =~ /[a-zA-Z]/)
    @result = User.FindLdap("sAMAccountName", params[:term])
  else
    @result = User.FindLdap("idnumber", params[:term])
  end

  respond_to do |format|
    format.json { render :json=> @result.to_json }
    format.js
  end
end 
```

```
$(function() {
  $("#term").autocomplete({
    source: function (request, response) {
      $.post("/users/search", request, response);
    },
    minLength: 2,
    select: function () {}
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T20:59:35.373

很难分辨用户模型中的属性是什么，但我认为它们是 sAMAccountName 和 idnumber，所以这里是jQuery 自动完成中**源方法的替换**

```
source: function( request, response ) {
    $.ajax({
        url: "/users/search",
        dataType: "json",
        data: {
            term: request.term
        },
        success: function( data ) {
            // remove users in line below if JSON is not prepanded with users attribute 
            response( $.map( data.users, function( user ) {
                return {
                    // this is formated string which will be visible in autocomplete list
                    // example "123213, admin"
                    label: user.idnumber + ", " + user.sAMAccountName, 
                    value: user.idnumber
                }
            }));
        }
    });
}, 
```

上面的代码会将服务器的响应（映射）转换为格式

```
[ { label: "<idnumber>, <sAMAccountName>" , value: "<idnumber>" }, .....] 
```

不用担心 jQuery 自动完成知道如何处理这个数组；）

# java - 使 maven 在构建 jar 中复制其他文件（不是资源，而是任何包中的任何文件）？

> ID：10393404
> 
> 赞同：6
> 
> 时间：2012-05-01T04:06:52.370
> 
> 标签：java, maven, maven-2, build

我有一个`org.myapp.mypackage`包含一些 ruby​​ 文件 ( `*.rb`) 的包，我需要将它们与 java 类文件一起包含*在同一个包中生成的构建 jar 中。*

我如何告诉我的朋友 Maven 这样做？

*注意：不，我不能复制到其他任何地方，但感谢您的建议。:)*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T07:36:30.387

`<build>`您可以修改POM 位的资源部分：

```
<resources>
  <resource>
    <directory>src/main/resources</directory>
  </resource>
  <resource>
    <filtering>false</filtering>
    <directory>src/main/java</directory>
    <includes>
      <include>*.rb</include>
    </includes>
    <excludes>
      <exclude>**/*.java</exclude>
    </excludes>
  </resource>
</resources> 
```

或者，另一个答案（在 中创建相同的包结构`src/main/resources`）也可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T10:17:02.073

不确定我是否正确理解了这个问题，但是如果您的 Ruby 文件由 maven 打包并声明为依赖项，则可以使用[shade 插件](http://maven.apache.org/plugins/maven-shade-plugin/)将内容包含到生成的 jar 文件中：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version>1.4</version>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>shade</goal>
            </goals>
            <configuration>
                <artifactSet>
                    <includes>
                        <include>org.myapp.mypackage:mypackage</include>
                    </includes>
                </artifactSet>
                <filters>
                    <filter>
                        <artifact>org.myapp.mypackage:mypackage</artifact>
                        <includes>
                            <include>org/my/package/*.rb</include>
                        </includes>
                    </filter>
                </filters>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-01T04:16:13.057

将它们放在正确的目录中（通常是 src/main/resources），它们应该被正确地捆绑到 Jar 中。放置 *.rb 文件在 src/main/resources 文件夹下创建相同的 dir 结构。

# sorting - 骨干复杂排序问题

> ID：10393406
> 
> 赞同：0
> 
> 时间：2012-05-01T04:07:01.000
> 
> 标签：sorting, backbone.js

我想按两个属性对集合进行排序，一个是“完整”，它返回 true 或 false，第二个是按 id，除了我需要那个是降序的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:03:13.557

是的，你可以做那种事情。集合[`comparator`](http://documentcloud.github.com/backbone/#Collection-comparator)接受一个参数或两个参数的函数：

> 比较器函数可以定义为[sortBy](http://underscorejs.org/#sortBy)（传递一个接受单个参数的函数）或[排序](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)（传递一个需要两个参数的比较器函数）。

你会想要使用两个参数的形式，像这样：

```
comparator: function(a, b) {
    var ac = a.get('complete');
    var bc = b.get('complete');
    if(ac && !bc)
        return 1;
    if(!ac && bc)
        return -1;

    var as = a.get('seconds');
    var bs = b.get('seconds');
    if(as > bs)
        return -1;
    if(bs < as)
        return 1;

    return 0;
} 
```

如果你有一个不理解两个参数`comparator`函数的旧版本的 Backbone，那么你将不得不升级或找出一种方法来混合`complete`并`seconds`组合成一个排序键，该排序键将使用[Underscore`sortBy`](http://documentcloud.github.com/underscore/#sortBy)正确排序。

# ios - 当我尝试在 Xcode 中重构时，出现将文件添加到此工作区中目标的构建阶段的警告

> ID：10393413
> 
> 赞同：3
> 
> 时间：2012-05-01T04:07:55.583
> 
> 标签：ios, xcode, refactoring

当我尝试通过重命名来重构代码时，我经常看到此消息：

`***.h is not part of the build phase of any targets in this workspace and so can’t be refactored. Add the file to the build phase of a target in this workspace, or make a selection in another file.`

有时，重构仅在重新启动 Xcode 并重新打开项目后才有效。但是之后就不行了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:59:30.187

没有成功找到正确的解决方案，我通过在 Organizer > Projects 中反复删除 Derived Data 来处理这种情况

# twitter - 通过 twitter API 获取我的第 N 条推文

> ID：10393414
> 
> 赞同：2
> 
> 时间：2012-05-01T04:08:02.587
> 
> 标签：twitter

查看[Twitter API](https://dev.twitter.com/docs/api/1/get/statuses/show/%3Aid)，我正在努力了解如何获得我的`N`推文。我知道我们可以返回的最大数量（大约 3200 条最新推文），但我想访问我知道的特定推文`N`（即这是我的`789th`推文（请注意，它真的不是那个特定的 N))。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:03:54.013

你不能。该推文不包含有关其流中编号的信息。你所能做的就是倒数：你知道你当前的推文编号（`statuses_count`），然后倒数`statuses/user_timeline`（分页不是太难，但他们很快就会禁用它）。

# javascript - 第二次单击时关闭水平下拉菜单

> ID：10393415
> 
> 赞同：1
> 
> 时间：2012-05-01T04:08:07.513
> 
> 标签：javascript, jquery, ajax

我正在为我在堆栈溢出中找到的下拉菜单处理一些代码：http: [//jsfiddle.net/jhoffm34/VbtuC/](http://jsfiddle.net/jhoffm34/VbtuC/)

我有一个在点击时展开的 jquery 下拉菜单。当我第二次单击“类别”时，我正在尝试使用 document.onmousedown 关闭菜单，但它只是立即重新打开菜单。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:14:40.103

**工作演示**
[http://jsfiddle.net/RguMu/show](http://jsfiddle.net/RguMu/show)
[http://jsfiddle.net/RguMu/](http://jsfiddle.net/RguMu/)
[http://jsfiddle.net/UK9Qt/](http://jsfiddle.net/UK9Qt/) - 仅当点击类别时显示和隐藏

因此，在第二次单击时，您的菜单现在将关闭：

利用`is(':visible')`

另一个建议，你不需要这么多属性。只需做`show`和`hide`，让您更好地了解您的需求。

**jQuery代码**

```
if(submenu.is(':visible')){
    submenu.hide();
    return false;
} 
```

**完整代码**

```
var timeout = 999999;
var closetimer = 0;
var ddmenuitem = 0;

function jsddm_open(event) {
    jsddm_canceltimer();
    jsddm_close();
    var submenu = $(this).find('ul');

    if(submenu.is(':visible')){
        submenu.hide();
        return false;
    }

    if (submenu) {
        ddmenuitem = submenu.css('visibility', 'visible');
        ddmenuitem = submenu.css('position', 'relative');
        submenu.show();
        return false;
    }

    return true;
}

function jsddm_close() {
    if (ddmenuitem) ddmenuitem.css('visibility', 'hidden');
    if (ddmenuitem) ddmenuitem.css('position', 'fixed');
}

function jsddm_timer() {
    closetimer = window.setTimeout(jsddm_close, timeout);
}

function jsddm_canceltimer() {
    if (closetimer) {
        window.clearTimeout(closetimer);
        closetimer = null;
    }
}

$(document).ready(function() {
    $('#jsddm li').bind('click', jsddm_open);
    $('#jsddm > li').bind('mouseout', jsddm_timer);
    $('#jsddm > li').bind('mouseover', jsddm_canceltimer);
    $('#jsddm li').find('ul').hide();

});

document.onmousedown = jsddm_close; 
```

# c - 如何运行命令而不等待应用程序退出？

> ID：10393417
> 
> 赞同：0
> 
> 时间：2012-05-01T04:08:10.867
> 
> 标签：c, linux, process

我需要运行一个命令，但在退出之前不会锁定我的应用程序，就像 do`system()`函数一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T04:09:19.817

用于`fork()`创建新进程，并`exec*()`用新应用程序替换它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T04:12:18.327

```
pid_t pid;

if ((pid = fork()) < 0)
    ...fork failed...
else if (pid == 0)
{
     ...create command line in array of char pointers argv...
     ...sort out I/O -- redirect stdin from /dev/null?...
     execvp(argv[0], argv);
     ...report exec failed on stderr...
     _exit(126);
}
...parent process...gets on with life... 
```

# javascript - JavaScript 和 jQuery，匿名函数中的“this”

> ID：10393429
> 
> 赞同：1
> 
> 时间：2012-05-01T04:09:29.513
> 
> 标签：javascript, closures, this, anonymous-function

我有这个代码：

```
PageList: function(url, index, classes){
    this.url = url;
    this.index = index;
    ...
};

PageList.prototype.toHTML = function(){
    var div = $('<div class="container"></div>');
    var p = $('<p></p>');
    var link = $('<a></a>');
    $.each(this.elements, function(index, array_value){
          console.log(this.url);
          ...
    }
} 
```

它按预期工作。

问题是`console.log(this.url)`正在打印`undefined`，所以我将代码修改为如下所示：

```
PageList.prototype.toHTML = function(){
    var div = $('<div class="container"></div>');
    var p = $('<p></p>');
    var link = $('<a></a>');
    var instance = this;
    $.each(this.elements, function(index, array_value){
               console.log(instance.url);
        }
} 
```

我知道问题出在闭包上，没有将`this`实例的值作为实例的值，但据我所知`this`，对没有绑定实例的函数内部的引用必须引用窗口对象，而不是`undefined`,至少在许多浏览器上都是这样。

那么我的代码到底发生了什么。

注意：我正在使用 jQuery 并且`this.elements`已经定义。

编辑：现在我发现这`$.each`是一个非实例函数，所以我的回调被调用，`$.each`但它必须是`window`对 的引用`this`，仍在考虑它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T04:50:11.570

根据[jQuery](http://api.jquery.com/jQuery.each/)`$.each`文档：

> *[当前元素的]*值也可以通过`this`关键字访问...

在 JavaScript 中，当您将回调函数交给[高阶函数](http://en.wikipedia.org/wiki/Higher-order_function)（在本例中为`$.each`）时，高阶函数可以决定`this`回调运行时的值。你无法控制这种行为——只是不要使用`this`（例如，通过使用`instance`你的示例中的引用或通过闭包）。

查看上下文设置函数[`Function.call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)并[`Function.apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)了解高阶函数如何`$.each`设置`this`回调的上下文。一旦你阅读了那些 MDN 页面，它可能会弄清楚一些事情。

这是一个简单的例子：

```
Array.prototype.forEachWithContext(callback, this_in_callback) {
    for(var i = 0; i < this.length; ++i) {
        callback.call(this_in_callback, i, this[i]);
    }
} 
```

并使用它：

```
PageList.prototype.toHTML = function(){
    //...
    this.elements.forEachWithCallback(function(index, array_value){ ... }, this);
} 
```

我的示例`Array.forEachWithContext`类似于`Array.forEach`. 但是，它需要一个回调*和*`this`第二个参数，该参数在执行期间用作每个回调的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T04:12:59.687

尝试`$.each`用这样的包装你的功能`$.proxy`......

```
$.each(this.elements, $.proxy(function(index, array_value){
    console.log(this.url);
},this)); 
```

这`$.proxy`将确保`this`引用您的`PageList`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T04:29:17.117

> 我知道问题出在闭包上，没有将 this 作为实例的值，但据我所知，在没有绑定实例的函数内部对 this 的引用必须引用 window 对象，而不是未定义的，至少在许多浏览器上都是这样。

`this` *是* `window`。您正在打印`window.url`，这是未定义的。试一试`console.log(this)`，它应该会屈服`window`。

# visual-c++ - 任何库来操作 COFF 文件？

> ID：10393430
> 
> 赞同：1
> 
> 时间：2012-05-01T04:09:49.393
> 
> 标签：visual-c++, coff

是否有任何允许读取、修改和写入 COFF 文件的库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:58:04.507

[EDITBIN](http://msdn.microsoft.com/en-us/library/xd3shwhf%28v=vs.100%29.aspx)这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:58:17.377

您可以从[http://en.wikipedia.org/wiki/GNU_Binutils尝试](http://en.wikipedia.org/wiki/GNU_Binutils)**libbfd**。或者手动进行，只需阅读规范。

# java - apache pivot - 桌面应用程序

> ID：10393431
> 
> 赞同：1
> 
> 时间：2012-05-01T04:09:51.397
> 
> 标签：java, swing, apache-pivot

我想了解 apache pivot。是否可以使用 apache pivot 开发桌面应用程序。哪个更好的 swing 或 apache pivot？请帮我选择一个.. 提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T17:35:29.460

我们已经使用 Apache Pivot 实现了一个巨大的桌面应用程序（> 200,000 行代码），它也可以用作小程序。对我来说，Pivot 与 Swing 相比的一大优势在于，Pivot 允许使用 XML 声明定义您的应用程序（或其中的一部分），从而大大减少了代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:07:42.920

是的，可以使用 Apache Pivot 2.0.2 版开发桌面应用程序。

至于 Swing 在桌面开发方面是否比 Pivot 更好，这将取决于您的需求。我在 Swing 中开发了几个桌面应用程序。

需要考虑的一件事是，Swing 并未受到 Oracle 的积极开发，而 Pivot 正在积极开发中。Pivot 有更多的原生组件。

Swing 使从 GUI（视图）中分离数据（模型）变得更加容易。

# php - 使用oops从函数php获取返回值

> ID：10393432
> 
> 赞同：0
> 
> 时间：2012-05-01T04:10:37.067
> 
> 标签：php, oop

我有下面的代码，我需要在类外部的变量中获取返回值，并使用相应的代码打印它。

[http://codepad.org/mAlhYBll](http://codepad.org/mAlhYBll)

以下是原始代码。

```
<?php
    class test {
        public function kk() {
            echo "Whats up :";
            return "Hello";
        }
    }

    $obj = new test();
    $obj->kk();

    $abc = $obj->kk();
?> 
```

现在我如何获得从函数返回的值添加了下面的图像

![在此处输入图像描述](../Images/4e5af404a8064c0b70d357244213c7b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:12:28.730

你需要`echo $abc`。该程序正在打印其他内容，因为您`What's up`在该方法中回显，请将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T04:13:21.767

就像你所做的那样——尽管你调用了两次“kk()”，这不是必需的，所以删除第 13 行。

# opengl - OpenGL：细胞分裂效果

> ID：10393433
> 
> 赞同：0
> 
> 时间：2012-05-01T04:10:38.630
> 
> 标签：opengl, animation, glut

我想模拟（生物）细胞分裂过程。我已经能够创建一个 3D 单元模型并加载模型（使用 glm 库）。但是，我不知道如何划分，也不知道从哪里开始。

有谁知道如何使事物在OpenGL中复制的效果？（如果我可以使用 glut 和 glm 那就太好了）。也许你可以告诉我如何复制一个球体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:39:12.383

我认为您正在[寻找的](http://www.youtube.com/watch?v=rgLJrvoX_qo)是所谓[的元粒子](http://www.youtube.com/watch?v=3XBhkCYVkII)或[元球](http://en.wikipedia.org/wiki/Metaballs)。我认为通过调整阈值函数可以获得细胞分裂效果，但这并不能保证 - 元球通常看起来更像水银，用于从粒子中产生水。

对于新手来说，它们很难在 3d 中实现 - 您需要能够从数学定义的曲面（[行进立方体](http://en.wikipedia.org/wiki/Marching_cubes)算法）中制作三角形网格，并且不能保证结果完全真实。

我建议尝试其他方法或使用更便宜的方法 - 在彼此顶部绘制两个半透明的球体，然后将它们分开或类似的东西。

当然，获得所需结果的某些方法是使用建模包（如搅拌机）和熟练的艺术家，但在您的应用程序中显示建模结果会很困难，因为对象拓扑会每帧都在变化，加上获得令人满意的结果需要时间和技能。

# python - 如何使用 lxml 解析包含前缀但没有命名空间声明的 XML？

> ID：10393435
> 
> 赞同：6
> 
> 时间：2012-05-01T04:11:12.130
> 
> 标签：python, xml, lxml, xml-namespaces

我有一堆使用前缀但没有相应命名空间声明的 XML 文件。

像这样的东西：

```
<tal:block tal:condition="foo">
...
</tal:block> 
```

或者：

```
<div i18n:domain="my-app">
... 
```

我知道这些前缀来自哪里，我尝试了以下方法，但没有成功：

```
from lxml import etree as ElementTree

ElementTree.register_namespace("i18n", "http://namespaces.zope.org")
ElementTree.register_namespace("tal", "http://xml.zope.org/namespaces/tal")

with open(path) as fp:
    tree = ElementTree.parse(fp) 
```

但 lxml 仍然窒息：

```
lxml.etree.XMLSyntaxError: Namespace prefix i18n for domain on div is not defined, line 4, column 20 
```

我知道我可以使用`ElementTree.XMLParser(recover=True)`，但无论如何我都想保留前缀，而这种方法不会。

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T04:27:29.507

它不是有效的 XML，使用未定义的前缀，因此没有 XML 解析器能够处理它。

您最好的选择（除了修复 XML）是以编程方式修改 XML 源以将名称空间属性添加到根元素（仅使用您的语言中的字符串支持）。`xmlns:tal="http://xml.zope.org/namespaces/tal"`在将 XML 提供给解析器之前，将等添加到根元素。然后 XML 解析器应该毫无怨言地处理它，并且没有任何注册名称空间。

# jquery - JQuery 调整浏览器宽度，隐藏 Div > 1024

> ID：10393436
> 
> 赞同：1
> 
> 时间：2012-05-01T04:11:12.890
> 
> 标签：jquery, browser, resize, width, hide

我想要完成的事情很简单。假设您正在查看一个网站，然后您在 iPod Touch、小型平板电脑上查看它，或者您自己调整了浏览器的大小，但浏览器的宽度要么为 1024 像素或更低，并且 div 内的文本被填充在所有额外的内容。所以对我来说，基本构造的答案很简单。当浏览器达到 1024 像素或更低时隐藏文本。

我试过这个，但它似乎不起作用。这里有什么帮助吗？

```
$(window).resize(function(){
    if($(window).width() < 1024 ) {
        $('h2#head1').hide();}
    else {
        $('h2#head1').show();};
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:32:07.960

在这种情况下，这是因为您的选择器已关闭（应该是 'h2 #head1' 或只是 '#head1'，而不是 h2#head1）。见[http://jsfiddle.net/ERBKU/](http://jsfiddle.net/ERBKU/)

但是，我还有其他一些观察：

1.  在实际调整窗口大小之前，这不会处理，这意味着在加载时它不会被处理。因此，您需要在加载时加倍关注此逻辑。然而，这导致我第2点......
2.  我认为结合一点 jQuery 和 CSS，你会得到更好的结果。我引用了 Modernizr 和早期 jQuery Mobile 中使用的方法。基本上，在加载和调整大小时，您想要检测视口宽度，如果它满足宽度阈值，则将特定的 CSS 选择器添加到`html`元素。如果满足阈值，此选择器可以影响目标元素的 CSS 属性。看到这个小提琴：http: [//jsfiddle.net/b5LYq/1/](http://jsfiddle.net/b5LYq/1/)这条路线的好处是您只需要一小段 jQuery，并且您可以通过在 CSS 中添加更多布局规则来轻松调整其他元素的显示属性。比维护一大块 jQuery 来操作页面以使其以您想要的方式显示要容易得多。此外，您可以添加额外的布局阈值，它仍然可以正常工作。

# java - 如何在java中使用lightcouch api从couchdb获取所有文档

> ID：10393440
> 
> 赞同：5
> 
> 时间：2012-05-01T04:11:54.067
> 
> 标签：java, couchdb

**有什么方法可以从数据库中获取所有文档，而不是指定一个 ID 并使用 Java 中的 lightcouch api**检索单个文档。目前我正在使用该方法

JsonObject json = dbClient.find(JsonObject.class, "some-id") 检索单个文档。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T05:10:23.110

景色怎么样[`_all_docs`](http://wiki.apache.org/couchdb/HTTP_Document_API#all_docs)？这将返回数据库中所有文档的列表。或者，如果您包含`include_docs=true`在请求中，您还将获得文档的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:13:15.683

试试这个......使用发出文档的视图，但不发送任何键值。您有机会获得您指定类型的所有文档。另外，一个警告......如果您使用 LightCouch 视图，您可能需要检索文档的 ID，然后通过使用这些 ID“查找”它来获取您的实际数据。

# iphone - 暂时使单元格可选

> ID：10393443
> 
> 赞同：3
> 
> 时间：2012-05-01T04:11:57.853
> 
> 标签：iphone, ios, uitableview

我在表格视图中有一些通常不可选择的单元格。用户必须使用详细信息披露附件来推送带有项目详细信息的新控制器。

但是，在返回表格视图时，我想突出显示该行，以便清楚他/她来自哪里。为此，我暂时将 selectionStyle 设置为蓝色，选择/取消选择行，然后将 selectionStyle 设置回无。

但是，因为单元格立即返回到 selectionStyleNone，所以最终结果是灰色的选择/取消选择，而不是蓝色的。

1）我怎样才能延迟这个 selectionStyle 的设置，直到取消选择完成？2) 同时，我的单元格将暂时选择快速手指——我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:34:52.087

您可以使用简单的 NSTimer 在设置的时间范围后将选择样式设置为无，如下所示...

```
[NSTimer scheduledTimerWithTimeInterval:1.0f
             target:self
             selector:@selector(methodToSetSelectionStyleToNone:)
             userInfo:nil
             repeats:NO]; 
```

...或者您可以使用自定义动画优雅地淡出它

```
[UIView animateWithDuration:1.0f delay: 0.0f
    animations:^{
        // set your selectionStyleNone here
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }
    completion:^{

    }
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:07:35.753

保存您的索引路径并随时使用以下代码（viewWillAppear 或其他方法）

// 通过保存`NSIndexPath`在下面的代码中。通过这种方式，即使用户从详细视图返回，在他可以知道他/她选择了哪一行之后..

```
-(void)viewWillAppear:(BOOL)animated
{
[tableView1 selectRowAtIndexPath:[NSIndexPath indexPathForRow:4 inSection:0] animated:NO scrollPosition:0]; // you can use this line according your requirements.
} 
```

希望对你有帮助..

# python - 如何在 Python 中删除文件

> ID：10393446
> 
> 赞同：1
> 
> 时间：2012-05-01T04:12:01.867
> 
> 标签：python

我在一个文件夹中有几个 *.dbf 文件。它们的名称为8位数字，例如00043232.dbf、00458283.dbf、32349999.dbf、83721092.dbf、12139999.dbf、48729999.dbf、...

我想删除以 9999 结尾的文件。因此，在这种情况下，我想删除 32349999.dbf、12139999.dbf、48729999.dbf。

我可以在 Python 中做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T04:15:00.613

一个简单的方法是让我们 glob.glob 找到相关文件，然后在其上使用 os.unlink() ：

```
import glob
import os

for file_path in glob.glob('*9999.dbf'):
    os.unlink(file_path) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T04:13:40.630

[`glob`](http://docs.python.org/library/glob.html),[`os.unlink()`](http://docs.python.org/library/os.html#os.unlink)

# python - 在循环中动态添加方法时的范围陷阱

> ID：10393447
> 
> 赞同：0
> 
> 时间：2012-05-01T04:12:13.397
> 
> 标签：python, pandas

我有一个用于分析我的锻炼数据的 API（我[*从 runkeeper*](http://runkeeper.com/)的网站上抓取）。

我的主类是 a 的子类`pandas.DataFrame`，它基本上是表格数据的容器。它支持按列名索引，返回列值的数组。

我想根据数据中存在的“健身活动”类型添加一些便利属性。因此，例如，我想添加一个属性“正在运行”：

```
@property
def running(self):
    return self[self['type'] == 'running'] 
```

这将返回`DataFrame`在“类型”列中具有“正在运行”的所有行。

我尝试对数据中存在的所有类型动态地执行此操作。这是我天真地做的事情：

```
class Activities(pandas.DataFrame):
    def __init__(self,data):
        pandas.DataFrame.__init__(self,data)
        # The set of unique types in the 'type' column:
        types = set(self['type'])
        for type in types:
            method = property(lambda self: self[self['type'] == type])
            setattr(self.__class__,type,method) 
```

结果是所有这些属性最终都返回了相同类型活动（“步行”）的数据表。

发生的事情是，当访问属性时，会调用 lambda，它们会在为名称“type”定义的范围内查找。他们发现它绑定到字符串 'walking'，因为那是 for 循环的最后一次迭代。for 循环的每次迭代都没有自己的命名空间，因此所有 lambda 只看到最后一次迭代，而不是 'type' 实际定义时的值。

任何人都可以解决这个问题吗？我可以想到两个，但它们似乎并不特别理想：

1.  定义`__getattr__`以检查属性是否为活动类型并返回适当的行。

2.  使用递归函数调用而不是 for 循环，以便每一级递归都有自己的命名空间。

这两个对我的口味来说都太聪明了，而且`pandas.DataFrame`已经有了一个`__getattr__`，如果我也做了一个，我必须小心翼翼地与之互动。并且递归会起作用，但感觉非常错误，因为类型集没有任何内在的树状结构。它是平坦的，在代码中应该看起来平坦！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:15:00.973

修改`lambda`以将值拉入新范围。

```
method = property(lambda self=self, type=type: self[self['type'] == type]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:17:26.173

老实说，如果可以避免的话，我建议*不要*创建 DataFrame 的子类。根据我的经验，古老的 Java 格言“偏好组合胜于继承”往往更可取。

# segmentation-fault - 删除二叉搜索树中的所有值时出现分段错误

> ID：10393448
> 
> 赞同：0
> 
> 时间：2012-05-01T04:12:17.437
> 
> 标签：segmentation-fault, binary-search-tree

所以我在运行这个函数时遇到了麻烦，因为它一直返回一个分段错误。我已将其缩小到“删除根目录”；行，但不知道如何解决此错误。

有什么建议么？

这是作业中包含的前置条件和后置条件：

> // 前置条件：root 是一个指向二叉搜索树根的指针。
> 
> // 后置条件：该函数删除二叉搜索树的所有节点并将 // root 设置为 NULL。

```
template<class Key, class Item>
void tree_clear(bstNode<Item, Key>*& root)
{
bstNode<Item, Key>* child;
if(root != NULL)
{
    child = root->left();
    tree_clear(child);
    child = root->right();
    tree_clear(child);
    delete root;
    root = NULL;
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:58:15.843

好吧，如果您无法更改签名，请尝试

```
template<class Key, class Item>
void tree_clear(bstNode<Item, Key>*& root)
{
  bstNode<Item, Key>* child;
  if(root != NULL)
  {
    if (child = root->left()) {
       tree_clear(child);
    }
    if (child = root->right()) {
       tree_clear(child);
    }
    delete root;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:17:59.807

您的参数是指向引用的指针......我认为它应该是指向指针的指针：

```
void tree_clear(bstNode<Item, Key>** root) 
```

# iphone - 在 iPad 上运行的 iPhone 应用程序：rootViewController 不是在 iPhone 上运行时的 tabBarController

> ID：10393450
> 
> 赞同：0
> 
> 时间：2012-05-01T04:12:26.237
> 
> 标签：iphone, ios, xcode, ipad

祝你有美好的一天，

我有一个我想在 iPad 上运行的 iPhone 应用程序。但是，与在 iPhone 上运行相比，在 iPad（sim 或设备）上运行时，我遇到了不同的行为。注意：我不想让它成为一个通用应用程序，它被设置为一个 iPhone 应用程序。

初始视图控制器是 tabBarController - 见下文（取自 iPhone 故事板 - 没有 iPad 故事板）：

![在此处输入图像描述](../Images/4a2959b014e8b6ec7f1d19d59c5f0ade.png)

我在 appDidFinishLaunchingWithOptions 中有一些代码，它为我提供了我稍后使用的 tabBarController 的句柄。在 iPhone 上运行时，我使用的代码行（如下面的第 53 行所示）可以正常工作并返回 tabBarController 对象，即初始视图控制器。

![在此处输入图像描述](../Images/debb1243ecfc5c01075df9f5b80e34c9.png)

我的问题：在 iPad（模拟器或设备）上运行时，应用程序委托中的 self.window.rootViewController 向我返回“Alert Central View Controller”对象 - 您可以从上面的故事板片段中看到，它位于视图层次结构的更下方，并且绝对不是初始视图控制器。

这里发生了什么？我会认为因为它是在 iPhone 模式而不是 iPad 模式下运行的，所以在 iPad 上运行时视图的层次结构应该没有变化。显然我错了！

我应该尝试以不同的方式访问初始视图控制器吗？

有人可以教我有什么区别吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:11:41.610

检查您的 Info.plist 文件中的*Main storyboard file base name*键，并确保只有一个具有正确 Storyboard 文件名的 iPhone 条目。我遇到了同样的问题，发现 plist 有两个故事板条目。删除附加密钥后，我的应用程序不再崩溃。还[可以查看 UIStoryboard 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIStoryboard_Class/Reference/Reference.html)。

# python - 这个pythonic技巧是如何工作的：a[::-1]

> ID：10393453
> 
> 赞同：3
> 
> 时间：2012-05-01T04:12:29.447
> 
> 标签：python

```
>> a = range(10)
>> print a[::-1]
[9, 8, 7, 6, 5, 4, 3, 2, 1, 0] 
```

这个切片给出了反向列表。它是如何工作的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T04:14:13.660

第三个参数是一个步进修饰符。在这种情况下，您使用的是`-1`.

您还可以使用一个步骤`2`来打印每个偶数索引。

```
>>> a = range(10)
>>> a[::2]
[0, 2, 4, 6, 8]
>>> a[::-2]
[9, 7, 5, 3, 1] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T06:00:42.363

一旦你*了解*了扩展切片，一定要欣赏被低估的 [slice()](http://docs.python.org/library/functions.html#slice)函数：

```
>>> for sl in [(1,-1),(0,20,3),(10,),(None,None,-3),(None,None,4)]:
...    print range(20)[slice(*sl)]
... 
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18]
[0, 3, 6, 9, 12, 15, 18]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[19, 16, 13, 10, 7, 4, 1]
[0, 4, 8, 12, 16] 
```

它对于[固定长度的数据](https://stackoverflow.com/questions/3911483/python-slice-how-to-i-know-the-python-slice-but-how-can-i-use-built-in-slice-ob)格式特别有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T04:55:02.347

这是扩展的切片语法。[请参阅文档](http://docs.python.org/release/2.3.5/whatsnew/section-slices.html)。

因为`range(x,y,z)`x 是起点，y 是终点，z 是步幅。

[这个 SO post](https://stackoverflow.com/a/509295/455276)已经很好地介绍了这一点。

# php - 如何使用 Zend_Filter_Input 验证值是否为数组？

> ID：10393455
> 
> 赞同：2
> 
> 时间：2012-05-01T04:12:45.333
> 
> 标签：php, zend-framework

Zend 递归地对 Zend_Filter_Input 执行验证，所以代码：

```
 $data = array(
        'update' => array(1, 2, 3)
    );

    $validators = array(
        'update' => array(
            new Zend_Validate_Callback('is_array'),
            'presence' => 'required'
        )
    );

    $filter = new Zend_Filter_Input(array(), $validators, $data);
    var_dump($filter->isValid());
    var_dump($filter->getMessages()); 
```

返回`false`和消息 1、2 和 3 不是有效值。

有什么方法可以验证一个值是否是数组，而不应用递归规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T12:32:39.823

正如@zerkms 所说：

> Zend_Filter_Input 执行递归遍历，因此特定的验证器与它无关。

为了解决这个问题，我使用了“durty”方式：

```
$input = new Zend_Filter_Input(
    array(
        'the_field_should_be_array'=> array(
             new MyPersonalValidator($this->_request->getParam('the_field_should_be_array')),
         )
    )
);

 class MyPersonalValidator extends Zend_Validate_Abstract{

    private $_paramIsValid;

public function __construct($param)
{
    $this->_paramIsValid = is_array($param);
}

public function isValid($not_usefull)
{
    if(!$this->_paramIsValid)
    {
        return false;
    }

    return true;
}} 
```

代码说明：我在验证器的构造函数中执行字段的验证。为此，需要将字段传递给构造函数，这不是一个好的做法，但我没有找到另一种方法。

编辑：干净的方法是扩展 Zend_Filter_Input 以支持上下文。我从来没有新的为什么它以前没有实施过。

# arduino - 连接 Arduino 独立芯片和 XBee

> ID：10393457
> 
> 赞同：1
> 
> 时间：2012-05-01T04:12:55.677
> 
> 标签：arduino, xbee

我从我的电路板上取出我的 arduino 芯片并按照说明将其放在面包板上：http: [//itp.nyu.edu/physcomp/uploads/arduinobb_09.jpg](http://itp.nyu.edu/physcomp/uploads/arduinobb_09.jpg) 一切正常，但是当我插入 XBee 时，代码没有按应有的方式工作。

`setup()`我使用的代码是函数中的两个简单语句

1.  启动串口：

    `Serial.begin(9600);`

2.  打印一行：

    `Serial.println("Hello World");`

问题是它通过 XBee 反复发送此消息，我可以从接收器 XBee 看到它`"Hello World"`一遍又一遍地快速发送。另外，如果我检查稳压器提供的电压，它只有 3.7 伏而不是 5 伏。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:30:24.310

`setup()`关于为什么不断执行的可能解释是芯片被反复重置。这可能与您看到的低电压有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:32:35.533

是的，对不起这些家伙。我终于弄清楚了问题所在。我使用的电池没有提供足够的电流和电力来为 arduino 和 xbee 供电。问题是，由于电池很便宜，它们很快就用完了，我认为这是个问题。然而，更好的电池是解决方案。

# javascript - 如何在 Adob e Air Extension for Dreamweaver 3.3 下的 Javascript 中获取鼠标坐标？

> ID：10393460
> 
> 赞同：0
> 
> 时间：2012-05-01T04:13:11.990
> 
> 标签：javascript, css, html, air

这是我在这里的第一篇文章，但我很绝望。我用谷歌搜索，谷歌搜索，再用谷歌搜索，没有成功。我将非常感谢任何帮助或提示。

我正在开发一个 Adob​​e Air 应用程序（一个 2D 拼图/动作 HTML4 + CSS + Javascript 游戏，带有嵌入式关卡编辑器，适用于 Windows）。事实上，我的游戏快完成了，它在 IE9 和 Chrome 中运行得都很好；但是，我想将它移植到 Air（出于多种原因），因此我为 Dreamweaver 安装了 Adob​​e Air Extension v.3.3，并按照 Adob​​e 教程开始从 HTML 项目创建 Air 应用程序。

我可以毫无问题地生成 .air 文件，但是我的游戏似乎一开始就冻结了。我验证了很多很多很多东西（不是说全部）；我还放了各种警报（“works-check_1”）；通过我的代码的所有位，它在 Dreamweaver 中运行良好（但速度很慢）......但是 .air 文件将所有内容加载到页脚，然后在能够绘制第二帧之前冻结。*我得出的结论是，问题很可能源于我在 .html 文件中用于获取鼠标坐标的当前脚本（允许在关卡编辑器中拖放）。*

这是我目前在 .html 文件部分中的脚本：

```
<script language="JavaScript1.2">
var IE = document.all?true:false;
if (!IE) document.captureEvents(Event.MOUSEMOVE)
document.onmousemove = getMouseXY;
var tempX = 0;
var tempY = 0;
function getMouseXY(e) {
if (IE) { // grab the x-y pos.s if browser is IE
tempX = event.clientX;
tempXb = event.clientX + document.body.scrollLeft;
tempY = event.clientY + document.body.scrollTop;
}
else {  // grab the x-y pos.s if browser is NS
tempX = e.pageX;
tempY = e.pageY;
}
document.getElementById("xcoord").value = tempX;
document.getElementById("ycoord").value = tempY;
return true;
}
</script> 
```

Adobe Air 似乎无法使用它，并且中断了。**在 HTML/Javascript 中有没有其他简单的方法可以让我在 document.mousemove 上获取 X 和 Y 鼠标坐标，Air 会允许吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:14:42.850

好吧，没关系，这段代码就像 Air 中的魅力一样。我的游戏死机了，因为我不得不使用以下语法：

```
setTimeout(alert('Timeout'), 10); 
```

而不是这个：

```
setTimeout("alert('Timeout')", 10); 
```

**("") 不受航空安保措施的支持；它更喜欢传递一个函数，而不是一个字符串。**

法语参考：[http ://help.adobe.com/fr_FR/AIR/1.5/devappsflash/WS5b3ccc516d4fbf351e63e3d118666ade46-7f0e.html](http://help.adobe.com/fr_FR/AIR/1.5/devappsflash/WS5b3ccc516d4fbf351e63e3d118666ade46-7f0e.html)

嗯！但是，即使我的游戏现在可以在 .air 中编译并且运行良好，它的运行速度也比直接在 IE9、Chrome 或 Safari 中运行要慢得多。不过，在 Safari 上，为了获得闪电般的 Javascript 性能，我必须禁用“首选项”>“安全”中的所有内容，除了“允许 Javascript”。Air 性能非常非常类似于我在禁用这些安全选项之前在 Safari 上的性能。顺便说一句，Titanium Appcelerator 为我的游戏提供了与 Adob​​e Air 完全相同的 Javascript 性能（帧率）。我更喜欢 Air 而不是 Titanium，但我必须找到另一个 IDE 解决方案才能使用快速和嵌入式 Javascript 引擎编译我的游戏，并且能够移植到其他平台......我很绝望！我想**至少移植到其他平台上**与 IE9、Chrome 或调整过的 Safari 中的速度相同......没有什么能达到我的期望，所有 IDE 目前都比我直接在浏览器中获得的结果要慢，这应该是等效的 :(

# css - 在 CSS 内容值中放置 Unicode 字符

> ID：10393462
> 
> 赞同：366
> 
> 时间：2012-05-01T04:13:25.583
> 
> 标签：css, unicode, symbols, unicode-escapes

我有个问题。我找到了向下箭头的 HTML 代码，`&darr;`(↓)

凉爽的。现在我需要像这样在 CSS 中使用它：

```
nav a:hover {content:"&darr";} 
```

这显然是行不通的，因为`&darr;`它是一个 HTML 符号。关于 css 中使用的这些“转义的 unicode”符号的信息似乎较少。`\2020`我发现还有其他类似的符号，但没有箭头。什么是箭头代码？

* * *

## 回答 #1

> 赞同：567
> 
> 时间：2012-05-01T04:21:41.627

为什么不将 CSS 文件保存/提供为 UTF-8 格式？

```
nav a:hover:after {
    content: "↓";
} 
```

如果这还不够好，并且您希望将其全部保留为 ASCII：

```
nav a:hover:after {
    content: "\2193";
} 
```

字符串中 Unicode 字符的一般格式是`\000000`to `\FFFFFF`– 一个反斜杠后跟六个十六进制数字。`0`当 Unicode 字符是字符串中的最后一个字符或在 Unicode 字符后添加空格时，您可以省略前导数字。有关完整详细信息，请参阅下面的规范。

* * *

[CSS2 规范的相关部分](http://www.w3.org/TR/CSS2/syndata.html#characters)：

> 第三，反斜杠转义允许作者引用他们不能轻易放入文档中的字符。在这种情况下，反斜杠后跟最多六个十六进制数字 (0..9A..F)，它们代表带有该数字的 ISO 10646 ( [[ISO10646]](http://www.w3.org/TR/CSS2/refs.html#ref-ISO10646) ) 字符，该数字不得为零。（在 CSS 2.1 中未定义如果样式表*确实*包含 Unicode 代码点为零的字符会发生什么。）如果 [0-9a-fA-F] 范围内的字符跟在十六进制数字后面，则数字的结尾需要说清楚。有两种方法可以做到这一点：
> 
> 1.  带有空格（或其他空白字符）：“\26 B”（“&B”）。在这种情况下，用户代理应将“CR/LF”对 (U+000D/U+000A) 视为单个空白字符。
> 2.  通过提供正好 6 个十六进制数字：“\000026B”（“&B”）
> 
> 事实上，这两种方法可以结合使用。十六进制转义后仅忽略一个空格字符。请注意，这意味着转义序列后的“真实”空格必须加倍。
> 
> 如果数字超出 Unicode 允许的范围（例如，“\110000”高于当前 Unicode 允许的最大 10FFFF），UA 可以用“替换字符”（U+FFFD）替换转义。如果要显示字符，UA 应该显示一个可见符号，例如“缺失字符”字形（参见[15.2，](http://www.w3.org/TR/CSS2/fonts.html#algorithm)第 5 点）。
> 
> *   注意：反斜杠转义总是被认为是[标识符](http://www.w3.org/TR/CSS2/syndata.html#value-def-identifier)或字符串的一部分（即，“\7B”不是标点符号，即使“{”是，并且“\32”允许在类名的开头，即使虽然“2”不是）。
>     标识符“te\st”与“test”完全相同。

* * *

综合列表：[Unicode 字符 'DOWNWARDS ARROW' (U+2193)](http://www.fileformat.info/info/unicode/char/2193/index.htm)。

# matlab - Octave/MATLAB：变量范围和名称查找？

> ID：10393467
> 
> 赞同：0
> 
> 时间：2012-05-01T04:14:08.103
> 
> 标签：matlab, octave

所以我有一个向量 X 的单元格数组：

```
octave:149> X
X = 
{
  [1,1] =

      1   17   20

  [2,1] =

      5   20   22   27

  [3,1] =

      2   17   18   21

} 
```

我创建一个空向量 Y：

```
octave:150> Y = []
Y = [](0x0) 
```

然后我用“Y = unique([Y x])”对 X 的每个值调用一个匿名函数：

```
octave:151> cellfun(@(x)(Y = unique([Y x])),X,'UniformOutput',false)
ans = 
{
  [1,1] =

      1   17   20

  [2,1] =

      1    5   17   20   22   27

  [3,1] =

      1    2    5   17   18   20   21   22   27

} 
```

好的，但现在 Y 仍然是空的：

```
octave:152> Y
Y = [](0x0)
octave:153> 
```

显然，匿名函数中的 Y 名称为其自己的 Y 版本创建并绑定了一个新存储。

Octave/MATLAB 中的存储和名称解析规则是什么？何时为变量分配存储空间？什么时候两个相同的名称绑定到同一个变量？（有什么方法可以影响上述匿名函数中 Y 的值吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:58:01.047

在 Matlab 中，函数有自己的作用域。当你传递一个变量时，除非该变量也在输出列表中，否则它不会被调用函数修改；该函数制作变量的副本，并且该副本是该函数修改的内容。

对于匿名函数，变量在函数声明时被复制。请参阅[此 Matlab 文档](http://www.mathworks.com/help/techdoc/matlab_prog/f4-70115.html)。这就是你在 Y 中看到的。

另外，我认为您使用 cellfun 不正确。您不应该在对 cellfun 的调用中返回匿名函数的值，而是作为 cellfun 的结果。

所以，也许这更接近你想要的：

```
octave:151> Y = cellfun(@(x, y)(unique([y x])),X,Y,'UniformOutput',false) 
```

我不知道您是否希望每次调用匿名函数的结果都更改 Y 并在下一次调用中使用该结果。如果这是你想要的，那就更难了。

# javascript - javascript：站点将对象传递给 setinterval

> ID：10393477
> 
> 赞同：1
> 
> 时间：2012-05-01T04:15:32.570
> 
> 标签：javascript, greasemonkey

我正在尝试`setInterval`使用 Greasemonkey 在网站上进行修改。我的代码如下所示：

```
// @run-at         document-start

(function() {
    var clearIntervalOriginal = unsafeWindow.clearInterval;
    unsafeWindow.clearInterval = function(foo) {
        GM_log(typeof foo + ":" + foo)
        clearIntervalOriginal(foo);
    }
}()); 
```

示例[网站](http://tv.yahoo.com/news/former-miss-new-hampshire-usa-faces-assault-charge.html)。

如果您查看控制台日志，您会发现间隔 ID 号不存在，而是`foo`有时是一个对象。查看站点源代码，我认为这是正在使用的相关代码：

```
//yahoo code
i.tid=c.setInterval(function(){
    if(i.done){
        c.clearTimeout(i.tid);
        i.rec=[i.t_render-h,i.t_jsload-h,i.t_jsinit-h,i.t_jsend-h,i.t_jsend-i.t_jsinit]
    }
},f); 
```

如何从`foo`对象中获取间隔 ID 号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:11:20.937

我是不是读错了你的代码，还是你的 clearIntervalOriginal 函数递归地无限调用自己？

在 Yahoo 代码中，i.tid 是区间 id。如果要取消间隔，则需要提供该 ID。例如：

```
clearInterval(i.tid); 
```

[https://developer.mozilla.org/en/DOM/window.clearInterval](https://developer.mozilla.org/en/DOM/window.clearInterval)

# php - 面子书墙贴无法正常工作

> ID：10393480
> 
> 赞同：1
> 
> 时间：2012-05-01T04:16:06.793
> 
> 标签：php, facebook

尝试使用 PHP 作为脚本语言在 facebook 上发布墙帖时，脚本在成功通过 facebook 身份验证后停止。使用的代码如下所示。请帮我解决这个问题。

```
$facebook = new Facebook(array(
         'appId' => $app_id,
         'secret' => $app_secret,
         'cookie' => true
        ));
        $fbcheck= $facebook->getUser();

        if(is_null($fbcheck) or !$fbcheck or $fbcheck==0)
        {
         header("Location:{$facebook->getLoginUrl(array('scope' => 'user_status,publish_stream,user_photos,photo_upload'))}");

        }

        $attachment = array(
        'message' => 'Hello friends , try this job :)',
        'name' => "Jobslanda - The perfect job information system. ",
        'caption' => "My Caption",
        'link' => 'google.com',
        'description' => 'Jobslanda is one of the perfect job sharing system.',
        //'picture' => $urlParser->fbpostpic($input['ik']),
        'actions' => array(array(
            'name' => 'Get Search',
            'link' => 'http://www.google.com'
        ))
    );
        $result = $facebook->api(
        '/me/feed/',
        'post',
        $attachment
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:12:47.650

print_r($结果); 检查它是否返回带有数字的 id。

# html - 这个提交值让我感到困惑

> ID：10393487
> 
> 赞同：-1
> 
> 时间：2012-05-01T04:16:22.440
> 
> 标签：html

使用提交时遇到一些问题。

这是使用一些模板的代码：

```
{% for art in arts %}
    <div class="art">
        <div class="art-title">{{art.title}}</div>
        <div class="art-created">{{art.created}}</div>
        <pre class="art-art">
            {% autoescape on %}
                {{art.art}}
            {% endautoescape %}
        </pre>
        <form action="editArt.html">

            <input type="submit" name="edit" value={{art.title}}>
        </form>
        <hr>
    </div>
{% endfor %} 
```

在表单中，我想要一个“编辑”按钮，它可以保存我将用来查询数据库的 art.title 的值，为此，我设置了 value={{art.title}}。但这改变了我希望它显示的按钮的名称。我希望当这个按钮显示时它可以显示“编辑”，但保留 art.title 的值。如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:19:35.203

```
 <form action="editArt.html">
        <input type="hidden" name="title" value="{{art.title}}">
        <input type="submit" name="edit" value="Edit">
    </form> 
```

然后，在您的服务器代码中，您将能够访问随表单提交的“标题”值，但用户将无法看到它，因为`type="hidden"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:20:10.907

你需要把art.title的值塞进表单内一个隐藏的输入域中，按钮的值不是传统意义上的值，而是按钮被标记的内容。

# c++ - C++ 线程中的分段错误

> ID：10393488
> 
> 赞同：4
> 
> 时间：2012-05-01T04:16:31.863
> 
> 标签：c++, pthreads, segmentation-fault

我正在尝试在 C++ 中设置一个基本的线程类，但是当我尝试创建线程时遇到了段错误。以下是 GDB 报告的内容：

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000401b68 in StartThread (pFunction=
    0x401ad2 <FindPrimesThread(void*)>, pLimit=5000000) at Thread.cpp:35
35          state->mLimit = pLimit; 
```

当我尝试这样称呼它时：

```
ThreadState *primesState = StartThread(FindPrimesThread, 5000000); 
```

这是我的代码：

线程.hpp

```
#ifndef THREAD_HPP
#define THREAD_HPP

#include <pthread.h>
#include "Types.hpp"

typedef struct {
    ulong       mLimit;     // Upper limit of numbers to test 
    int         mStarted;   // True if the thread started successfully
    int         mExitCode;  // Thread exit code
    pthread_t   mThreadId;  // Thread ID
} ThreadState;

// Defines a type named ThreadFunction which is a pointer to a function with void * as the parameter and
// void * as the return value.
typedef void *(*ThreadFunction)(void *);

ThreadState *StartThread
    (
    ThreadFunction const pFunction,  // Pointer to the thread function
    ulong const          pLimit      // Upper limit of numbers to test
    );

#endif 
```

线程.cpp

```
#include "Amicable.hpp"
#include "Keith.hpp"
#include "Main.hpp"
#include "Prime.hpp"
#include "Thread.hpp"

ThreadState *StartThread
    (
    ThreadFunction const pFunction,  // Pointer to the thread function
    ulong const          pLimit      // Upper limit of numbers to test
    ) {
        ThreadState *state;
        state->mLimit = pLimit;
        pthread_t threadId;
        state->mStarted = pthread_create(&threadId, NULL, pFunction, (void *)state);
        if(state->mStarted == 0){
            state->mThreadId = threadId;
        }
        return state;
    } 
```

知道这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T04:22:00.083

```
ThreadState *state;
state->mLimit = pLimit; 
```

您正在写入尚未分配的内存

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T04:24:35.437

您在 ThreadState 中有一个未初始化的指针。在第 35 行，您创建了一个指向 ThreadState 的指针，但您从未将该指针指定为指向任何 ThreadState 对象。

请记住，指针只是一个内存地址。“ThreadState*”只是意味着，“这是一个内存地址，我们可以将内存中我持有的地址处的数据解释为一个ThreadState对象。”

也许您打算执行“ThreadState *state = new ThreadState();”？不要忘记，有人在使用完 ThreadState 对象后需要去删除它，以免内存泄漏！

# java - 正则表达式确定文本是否出现不超过 n 个单词

> ID：10393489
> 
> 赞同：0
> 
> 时间：2012-05-01T04:16:37.277
> 
> 标签：java, regex

我有一个日志文件，我正在尝试检测单词“警告：”的出现次数是否高于某个数字，比如 1000。

我已经尝试了几次类似于以下的尝试，但我没有得到我期望的匹配

```
"\\bWarning:{1000,}+ " 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:32:33.590

如果您愿意考虑非 java/regex 解决方案，您可以在 *NIX 中获得**行数：**

```
grep "Warning:" YOURFILE.LOG | wc -l 
```

Windows 命令行版本将是：

```
find /c "Warning:" YOURFILE.log 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T04:22:28.793

现在您的 {1000,} 仅匹配 : 字符。此外，这种情况下的“+”是多余的。你希望它匹配“警告”和介于两者之间的东西，所以你必须指定所有这些：

```
"(?:\\bWarning:.*?){1000,}" 
```

其内容为：*“从非单词标记开始，查找字符‘警告：’和零个或多个字符，直到下一次允许的匹配，1000 次或更多次。”*

请注意使用非捕获组（`(?: )`构造）来指定要匹配 N 次的内容。

您还需要打开单行匹配（`.`包括`\n`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T07:24:38.677

我怀疑你让这比它需要的更难。为什么不只是`find()`循环调用并记录点击数呢？

```
Pattern p = Pattern.compile("\\bWarning:")
Matcher m = p.matcher(source);
int hits = 0;
while (m.find())
{
  hits++;
} 
```

我假设整个文档都在一个字符串中。另一种可能性是使用扫描仪打开文件并使用其[`findWithinHorizon()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#findWithinHorizon%28java.util.regex.Pattern,%20int%29)方法：

```
while (scanner.findWithinHorizon(p, 0) != null)
{
  hits++;
} 
```

# ios - JQuery Mobile 在 UIWebView 中不起作用

> ID：10393490
> 
> 赞同：12
> 
> 时间：2012-05-01T04:16:46.980
> 
> 标签：ios, xcode, jquery-mobile, uiwebview, fusioncharts

在寻找解决方案并尝试不同的方法来解决我在使用 JQuery Mobile 和我的 iPad 应用程序时遇到的这个问题之后，我来到这里。

我想做的是一个带有 Fusion Charts 的报告应用程序。我已经使用不同的方法成功地在 Web 视图 (UIWebView) 中渲染了图表，并遵循了不同的示例，但我现在想做的是使用 JQuery Mobile 框架完成相同的任务。

我**没有**使用 phonegap，我已经按照关于 JQuery Mobile + Xcode 集成的信中的步骤进行操作（我认为）。图表在我的桌面和移动浏览器（iPad、iPhone 4 和 iPod Touch 2G）上加载没有问题，但它们无法加载到我的 UIWebView 中（即使我使用的是相同的确切代码）。

**这就是我正在做的事情：**

1) 将所需的文件（JS、CSS 和 HTML）添加到项目中以在本地使用它们。添加它们后，我将带有 .js 扩展名的所有内容从“编译源”移动到“复制捆绑资源”。它看起来像这样：

![在此处输入图像描述](../Images/1e95726d73ec49a05cd984b3c64636fd.png)

![在此处输入图像描述](../Images/ef55d372e99fc40db43afbf235e43163.png)

2) 将我的 HTML 测试文件 (page_A1.html) 加载到 web 视图中：

![在此处输入图像描述](../Images/a9538dca93a39686b17c8b9a24dbfe04.png)

3) 检查 HTML 文件中是否设置了正确路径和最新版本的框架：

![在此处输入图像描述](../Images/1218b6992103bc8a90d19bc1156e5dfc.png)

4) Build and Run 只是为了得到一个空白的 web 视图。

如果我用这样的警报测试 Javascript：

![在此处输入图像描述](../Images/f26b0121148af49b4d92a23baa3f8546.png)

它将显示证明 Javascript 正在运行的警报：

![在此处输入图像描述](../Images/3a4a0ed88e6a867602e3d6ee8ce5b9b0.png)

如果我在应该显示图表的容器上放置一些文本：

![在此处输入图像描述](../Images/8f2eb726325d40bfece8a6373292cca8.png)

我将在 web 视图中获取文本：

![在此处输入图像描述](../Images/a3b8a493e3aabec2d0c9ea5bbb707801.png)

我还测试了远程框架链接而不是本地链接和旧版本的库，但没有运气。没有什么不同发生：

![在此处输入图像描述](../Images/a69f636ecc49bf52c3593e9b518b80b8.png)

对我来说似乎很明显

```
$(document).ready(function(){ 
```

没有被 xcode 注意到或调用。

**这就是我想要完成的：**

![在此处输入图像描述](../Images/8c244ac3e948f2b8a1870a5f7b1ce5a5.png)

我不知道还要测试什么。如果您有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T12:18:44.753

没关系的家伙。我终于明白了。

Web 开发时代的一些旧习惯在这里扮演了我的角色。

事实证明，您不必为 CSS 和 JS 文件指定内部目录结构，因此：

```
<link rel="stylesheet" href="css/jquery.mobile-1.1.0.min.css" />

<script src="js/jquery-1.7.2.min.js"></script>

<script src="js/jquery.mobile-1.1.0.min.js"></script> 
```

在 Xcode 中应该是这样的：

```
<link rel="stylesheet" href="jquery.mobile-1.1.0.min.css" />

<script src="jquery-1.7.2.min.js"></script>

<script src="jquery.mobile-1.1.0.min.js"></script> 
```

难以置信我花了多少时间才发现这一点。

现在它正在工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T20:37:36.287

正确的做法是将 JS 文件作为字符串加载并调用 UIWebView 的 [stringByEvaluatingJavascriptFromString:@"Javascript here..."] 方法。

```
 NSString *filePath = [[NSBundle mainBundle] pathForResource:@"content" ofType:@"js" inDirectory:@""];
NSData *fileData = [NSData dataWithContentsOfFile:filePath];
NSString *jsString = [[NSMutableString alloc] initWithData:fileData encoding:NSUTF8StringEncoding];

[webView stringByEvaluatingJavaScriptFromString:jsString]; 
```

尽管这与将它们硬编码到 html 文件中没有太大区别，但它确实将其模块化得更多。快乐编码:)

# javascript - 当前上下文 asp.net 中不存在图像 ID

> ID：10393491
> 
> 赞同：0
> 
> 时间：2012-05-01T04:16:47.760
> 
> 标签：javascript, .net

我收到此代码的以下错误。我正在使用中继器来显示图像。图像 id 是 img .in jquery 我`$("#<%=img.ClientID %>")`用来获取图像。但它给出的错误，如 img 在当前上下文中不存在。中继器 ID 为`rptRepeater`. 我怎么解决这个问题 ？`$("#<%=img.ClientID %>") doesnot exists in current context`

**.NET 代码**

```
<asp:Repeater ID="RepeaterView" runat="server"> 
    <ItemTemplate> 
        <a onmouseout="SelectEnd()" onmouseover='<%#Eval("Coords","preview(\"{0}\");")%>'>     
            <asp:Image ID="ImageZoom" runat="server" ImageUrl='<%# DataBinder.Eval(Container.DataItem, "ImageUrl") %> ' Height="150" Width="150" >    
            </asp:Image> 
        </a> 
    </ItemTemplate> 
</asp:Repeater> 
```

**JavaScript 代码**

```
<script type="text/javascript"> 
    function preview(Coords) { 
        var arrResult = Coords.split(","); 
        var nx1 = arrResult[0]; 
        var ny1 = arrResult[1]; 
        var nx2 = arrResult[2]; 
        var ny2 = arrResult[3]; 
        var ias = $("#<%=ImageZoom.ClientID %>").imgAreaSelect({ instance: true });
        ias.setSelection(nx1, ny1, nx2, ny2, true); ias.setOptions({ show: true });     
        ias.update(); 
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:48:52.820

您遇到的问题是没有一个 id，您正在向页面添加多个元素，因此该代码不可能处理所有元素。你需要让它更通用。

尝试将您的代码更改为不需要 id 的代码。

**.NET 代码**

```
<asp:Repeater ID="RepeaterView" runat="server"> 
    <ItemTemplate> 
        <a onmouseout="SelectEnd()" onmouseover='<%#Eval("Coords","preview(this, \"{0}\");")%>'>     
            <asp:Image ID="ImageZoom" runat="server" ImageUrl='<%# DataBinder.Eval(Container.DataItem, "ImageUrl") %> ' Height="150" Width="150" >    
            </asp:Image> 
        </a> 
    </ItemTemplate> 
</asp:Repeater> 
```

**JavaScript 代码**

```
<script type="text/javascript"> 
    function preview(elem, Coords) { 
        var arrResult = Coords.split(","); 
        var nx1 = arrResult[0]; 
        var ny1 = arrResult[1]; 
        var nx2 = arrResult[2]; 
        var ny2 = arrResult[3]; 
        var ias = $(elem).find("img").imgAreaSelect({ instance: true });
        ias.setSelection(nx1, ny1, nx2, ny2, true); ias.setOptions({ show: true });     
        ias.update(); 
    }
</script> 
```

# json - 如何在外部js文件中输出原始html

> ID：10393496
> 
> 赞同：0
> 
> 时间：2012-05-01T04:17:33.633
> 
> 标签：json, asp.net-mvc-3, jquery, razor

我有一个场景，我需要在外部 js 文件中包含原始 html。

外部 js 文件负责启动 jquery ajax 请求并接收来自 ajax 调用的输出并将接收到的输出放在 html 中。我的演示部分是使用 Asp.net MVC 开发的。我不确定哪个特定组件正在编码 HTML、MVC 或 JQuery 或 JSon。因为它是外部 JS，所以我无法使用像 HMTL.RAW 这样的 Razar 方法。我正在考虑使用任何类似于 HTML.Raw 的 JQuery 助手。

问候，库马尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:22:25.290

如果它必须在 JavaScript 文件中，请将其设为巨大的字符串

```
var myCode = "<div>\
<span>foo</span>\
</div>\
<div id=\"bar\">aaaa</div>"; 
```

如果文件在同一个域中，只需将其设为 txt 文件或任何类型的文件，然后使用 Ajax 请求读取即可。

# facebook - 使用 SASL X-FACEBOOK_PLATFORM 的 FB 聊天不起作用

> ID：10393497
> 
> 赞同：0
> 
> 时间：2012-05-01T04:17:41.193
> 
> 标签：facebook, xmpp, facebook-apps, sasl, x-facebook-platform

我正在为 FB 开发一个简单的聊天客户端。我已经发展到现在我拥有使用“xmpp_login”和“offline_access”范围登录到我的聊天的用户的 access_token 的状态。我能够成功连接到 chat.facebook.com 并使用 api_key 和 access_token 登录。SASL 认证没有问题。

现在，当我尝试使用 chat.sendMessage(String) 或 chat.sendMessage(Message) 发送消息时，smack 调试器显示消息已发送。但是在我的 facebook 网站上，我没有看到发送给那个人的消息。

你好kVfox0

这是 Smack 调试器 Sent 列的输出。发件人地址有什么问题吗？或使用此消息结构？我被困在这一点上，因为我不知道如何调试这个问题。

欢迎任何意见、建议或解决方案。

这是我正在使用的代码片段，

```
 ConnectionConfiguration config = new                 ConnectionConfiguration("chat.facebook.com",5222);//ProxyInfo.forHttpProxy(soc.getHostName(),8080, null, null));
    config.setSASLAuthenticationEnabled(true);
    XMPPConnection connection = new XMPPConnection(config);
    XMPPConnection.DEBUG_ENABLED = true;
    SASLAuthentication.registerSASLMechanism("X-FACEBOOK-PLATFORM", SASLXFBAuthentication.class);
    SASLAuthentication.supportSASLMechanism("X-FACEBOOK-PLATFORM", 0);
    connection.connect();
    String apiKey ="282973731790200";
    String accessToken ="My access token with xmpp_login and offline_access scope";
        connection.login(apiKey, accessToken);
    Chat newchat = connection.getChatManager().createChat("praveen.ganapathi@chat.facebook.com", new MessageListener() {

        public void processMessage(Chat chat, Message message) {
            // Print out any messages we get back to standard out.
            System.out.println("Received message: " + message);
        }
    });
    Message msg = new Message();
    msg.addBody("English", text);
    msg.addSubject("English", "Test");
    msg.setType(Type.chat);
   // connection.sendPacket(msg);
    newchat.sendMessage(msg); 
```

谢谢和问候， Karthik

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:51:01.400

我已经解决了这个问题。

消息的目标地址也应该是 JID 格式。为此，我们需要使用 smack 的 Roaster 类并获取 facebook 中的所有联系人或好友。这样做有助于我向预期的 JID 发送消息。

谢谢， 卡提克

# r - 如何在 R 函数中使用 switch 语句？

> ID：10393508
> 
> 赞同：88
> 
> 时间：2012-05-01T04:19:58.027
> 
> 标签：r, switch-statement

我想在 R 中为我的函数使用语句`switch()`来根据函数参数的值触发不同的计算。

例如，在 Matlab 中，您可以通过编写

```
switch(AA)        
case '1'   
...   
case '2'   
...   
case '3'  
...  
end 
```

我发现这个 post- [switch() 语句用法](https://stackoverflow.com/questions/7825501/switch-statement-usage)-解释了如何使用`switch`，但对我没有真正的帮助，因为我想执行更复杂的计算（矩阵运算）而不是简单的`mean`.

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-05-01T04:27:52.003

好吧，`switch`可能并不是真的要像这样工作，但你可以：

```
AA = 'foo'
switch(AA, 
foo={
  # case 'foo' here...
  print('foo')
},
bar={
  # case 'bar' here...
  print('bar')    
},
{
   print('default')
}
) 
```

...每个案例都是一个表达式 - 通常只是一个简单的事情，但在这里我使用一个花括号，这样你就可以在其中填充任何你想要的代码......

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2015-07-16T09:07:03.640

**各种切换方式**...

```
# by index
switch(1, "one", "two")
## [1] "one"

# by index with complex expressions
switch(2, {"one"}, {"two"})
## [1] "two"

# by index with complex named expression
switch(1, foo={"one"}, bar={"two"})
## [1] "one"

# by name with complex named expression
switch("bar", foo={"one"}, bar={"two"})
## [1] "two" 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2012-05-01T04:30:32.460

我希望这个例子有帮助。您可以使用花括号来确保您已将所有内容包含在 switcher changer guy 中（抱歉，不知道技术术语，但 = 符号之前的术语会改变发生的情况）。我认为 switch 是一组更受控制的`if () {} else {}`语句。

每次切换功能都相同，但我们提供的命令会发生变化。

```
do.this <- "T1"

switch(do.this,
    T1={X <- t(mtcars)
        colSums(mtcars)%*%X
    },
    T2={X <- colMeans(mtcars)
        outer(X, X)
    },
    stop("Enter something that switches me!")
)
#########################################################
do.this <- "T2"

switch(do.this,
    T1={X <- t(mtcars)
        colSums(mtcars)%*%X
    },
    T2={X <- colMeans(mtcars)
        outer(X, X)
    },
    stop("Enter something that switches me!")
)
########################################################
do.this <- "T3"

switch(do.this,
    T1={X <- t(mtcars)
        colSums(mtcars)%*%X
    },
    T2={X <- colMeans(mtcars)
        outer(X, X)
    },
    stop("Enter something that switches me!")
) 
```

这是一个函数内部：

```
FUN <- function(df, do.this){
    switch(do.this,
        T1={X <- t(df)
            P <- colSums(df)%*%X
        },
        T2={X <- colMeans(df)
            P <- outer(X, X)
        },
        stop("Enter something that switches me!")
    )
    return(P)
}

FUN(mtcars, "T1")
FUN(mtcars, "T2")
FUN(mtcars, "T3") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-08T08:28:37.920

这是对 R 中缺少的“Select cond1, stmt1, ... else stmtelse”构造的更一般的答案。它有点气，但它的工作原理类似于 C 中存在的 switch 语句

```
while (TRUE) {
  if (is.na(val)) {
    val <- "NULL"
    break
  }
  if (inherits(val, "POSIXct") || inherits(val, "POSIXt")) {
    val <- paste0("#",  format(val, "%Y-%m-%d %H:%M:%S"), "#")
    break
  }
  if (inherits(val, "Date")) {
    val <- paste0("#",  format(val, "%Y-%m-%d"), "#")
    break
  }
  if (is.numeric(val)) break
  val <- paste0("'", gsub("'", "''", val), "'")
  break
} 
```

# c# - BackgroundWorker.CancelAsync() 导致“BackgroundWorker 不支持取消”。错误

> ID：10393512
> 
> 赞同：5
> 
> 时间：2012-05-01T04:21:00.423
> 
> 标签：c#, backgroundworker

我需要确保 BackgroundWoker 在被调用之前不忙，所以我检查`IsBusy`并调用[CancelAsync](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.cancelasync.aspx)如果是：

```
if (bgWorker.IsBusy)
                bgWorker.CancelAsync(); 
```

但如果为真，则在说“BackgroundWorker 不支持取消”`IsBusy`时会发生 InvalidOperationException 异常。`CancelAsync()`

该文档使用法看起来非常简单，那么我做错了什么？**如何取消作业？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T04:24:42.037

您需要将[BackgroundWorker.WorkerSupportsCancellation 属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.workersupportscancellation.aspx)设置为 true。

# arrays - Perl：数组引用与匿名数组

> ID：10393515
> 
> 赞同：8
> 
> 时间：2012-05-01T04:21:22.040
> 
> 标签：arrays, perl

这可能是一个愚蠢的问题......下面的代码分别输出 和 的`@arrayref`内容`@arraycont`。请注意它们之间的区别以及它们的值分配方式。我知道匿名数组的作用，但是任何人都可以解释为什么会有区别吗？

非常感谢。

```
@arrayref = ();
@array = qw(1 2 3 4);
$arrayref[0] = \@array;
@array = qw(5 6 7 8);
$arrayref[1] = \@array;
print join "\t", @{$arrayref[0]}, "\n";
print join "\t", @{$arrayref[1]}, "\n";

@arraycont = ();
@array = qw(1 2 3 4);
$arraycont[0] = [@array];
@array = qw(5 6 7 8);
$arraycont[1] = [@array];
print join "\t", @{$arraycont[0]}, "\n";
print join "\t", @{$arraycont[1]}, "\n"; 
```

输出

```
5   6   7   8   
5   6   7   8   
1   2   3   4   
5   6   7   8 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T04:27:25.127

这将创建数组的*浅表*副本：

`$arraycont[0] = [@array];`

而这只是创建对它的引用：

`$arrayref[0] = \@array;`

由于您稍后修改了数组：

`@array = qw(5 6 7 8);`

`arrayref`仍然指向内存中相同的数组位置，因此当在打印语句中取消引用时，它会打印当前数组值`5 6 7 8`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T07:44:04.340

第一个块存储**@array**的地址。参考就像**“直播”**，你会得到当前的状态。因此，如果您创建对**@array 的引用，例如\@array，**当您取消引用它时，您将始终获得取消引用时**@array**指向的内容。当您取消引用**@array**时**(5 6 7 8)**

当您执行**[@array]**时，就像将**实时流**录制到磁盘中一样。因此，当您（重新）播放录制的内容时，您会得到录制时流式传输的内容。因此，当您引用**$arraycont[0]**时，您会得到**@array**在复制时所拥有的
**(1 2 3 4)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-18T20:06:38.387

`$arrayref[0]`您在和中都对单个数组进行了存储引用`$arrayref[1]`。您应该使用不同的数组。

```
my @refs;

my @array1 = qw(1 2 3 4);
push @refs, \@array1;

my @array2 = qw(5 6 7 8);
push @refs, \@array2; 
```

在实践中，`my`在循环的每一遍中执行，每次都创建一个新数组。

```
my @refs;
while ( my @row = get() ) {
   push @refs, \@row;
} 
```

在您必须克隆数组的极少数情况下，您可以使用：

```
use Storable qw( dclone );

push @refs, [ @row ];       # Shallow clone
push @refs, dclone(\@row);  # Deep clone 
```

# objective-c - AFNetworking 崩溃，下载大文件 200MB+

> ID：10393524
> 
> 赞同：3
> 
> 时间：2012-05-01T04:22:46.413
> 
> 标签：objective-c, ios, download, zip, afnetworking

我下载 250MB 以下的文件没有问题，但是当我尝试下载 250MB + zip 时，应用程序会突然崩溃，没有任何错误。有时它会通过，有时它不会。泄漏确认没有膨胀或记忆丧失。

**我现在还注意到，只有在使用 xcode 进行调试时才会发生崩溃。当我运行应用程序并在我没有调试时下载更大的文件时没有问题**

下载较大的文件时，我是否需要以不同的方式处理 AFNetworking 类？

这是我的代码

```
NSURL* url=[BFAppGlobals getServerURL:[M.Properties objectForKey:@"zip_path" ]];
NSMutableURLRequest  *request = [NSMutableURLRequest requestWithURL:url];
[request setTimeoutInterval:3600];

 AFHTTPRequestOperation *operation = [[[AFHTTPRequestOperation alloc]  initWithRequest:request] autorelease];

NSString* writePath=[BFAppGlobals getContentResourcePathForFile:strFile];

[delegate onStartDownload:M];
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:writePath append:YES];

[operation setDownloadProgressBlock:^(NSInteger bytesRead, NSInteger totalBytesRead, NSInteger totalBytesExpectedToRead) {

    int b=totalBytesRead ;
    int total=totalBytesExpectedToRead;
    float perc=(float)b/(float)total;
    M.progress=perc;
    [((NSObject*)delegate) performSelectorOnMainThread:@selector(onDataReceviedFromRequest:) withObject:M   waitUntilDone:YES];

}];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

     NSDictionary* params=[NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:writePath,writeDirectory, M, nil] forKeys:[NSArray arrayWithObjects:@"Path",@"Dir",@"Model", nil]];
    [self performSelectorInBackground:@selector(unzipDownloaded:) withObject:params];

} 
failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"fail! %@", [error localizedDescription]);
    [delegate onErrorDownload:M WithError:[error localizedDescription]];
    ActiveModel=nil;
}];

[operation start];

****************************  UPDATE ADDED CRASH LOG ***************************************

    Thread 0 Crashed:
    0   libobjc.A.dylib                 0x37d24fbc objc_msgSend + 16
    1   Foundation                      0x35502508 __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 12
    2   CoreFoundation                  0x381aa570 ___CFXNotificationPost_block_invoke_0 + 64
    3   CoreFoundation                  0x381360c8 _CFXNotificationPost + 1400
    4   Foundation                      0x354763f4 -[NSNotificationCenter postNotificationName:object:userInfo:] + 60
    5   Foundation                      0x35477c24 -[NSNotificationCenter postNotificationName:object:] + 24
    6   BFiPad                          0x0006d2fc 0x1000 + 443132
    7   CoreFoundation                  0x3813d224 -[NSObject performSelector:withObject:] + 36
    8   Foundation                      0x35517750 __NSThreadPerformPerform + 344
    9   CoreFoundation                  0x381b2afc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
    10  CoreFoundation                  0x381b22c8 __CFRunLoopDoSources0 + 208
    11  CoreFoundation                  0x381b106e __CFRunLoopRun + 646
    12  CoreFoundation                  0x381344d6 CFRunLoopRunSpecific + 294
    13  CoreFoundation                  0x3813439e CFRunLoopRunInMode + 98
    14  GraphicsServices                0x37f0bfc6 GSEventRunModal + 150
    15  UIKit                           0x31cb473c UIApplicationMain + 1084
    16  BFiPad                          0x00003f72 0x1000 + 12146
    17  BFiPad                          0x00003f30 0x1000 + 12080 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:45:22.550

似乎这仅在调试模式下发生。用完调试模式或发布更多解决此问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:57:08.290

它看起来不`operation`属于任何特定的东西，所以不能保证它会留在内存中。尝试使用一个`NSOperationQueue`（可能附加到一个`AFHTTPClient`，这会清理很多代码），或者将其设置为控制器中的保留属性，以启动上传。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T07:59:15.610

我知道这个问题很老，但问题似乎仍然相关，所以无论如何我都会发布我的解决方案。

我遇到了同样的问题，它在下载大约 250MB 后会崩溃，并发现这是由于每次下载几个字节时都会调用下载进度块，这意味着它被称为 A LOT。每秒很多次。因此，当从这里调用委托方法（可能会做一些事情）时，它可能会变得非常占用内存。

我的解决方案是跟踪下载进度，只有在变化很大时才调用委托方法（我决定超过 1%）：

```
[operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
    float progress = ((float)totalBytesRead) / totalBytesExpectedToRead;
    if ((progress - totalProgress) > 0.01) {
        totalProgress = progress;
        [delegate updateProgress:progress];
    }
}]; 
```

`float totalProgress`是一个实例变量。

此修复程序将内存使用量从崩溃时的大约 280MB 减少到我的应用程序已经使用的大约 30MB。即在下载过程中没有明显的内存增加（假设您直接下载到文件，而不是内存）。

# c# - 是否有任何可用于服务器和客户端的 sync-ml API？

> ID：10393525
> 
> 赞同：1
> 
> 时间：2012-05-01T04:22:51.253
> 
> 标签：c#, android, c, syncml

我想在.net 中制作sync-ml 服务器。是否有任何API 可供使用，以便我们可以制作任何语言的sync-ml 服务器？我不想使用 funambol 之类的软件，它限制了我们使用它的 API。是否有任何 sync-ml API 可用于客户端和服务器（客户端可以是 android 或 c 平台设备）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T01:49:51.280

[请](http://sourceforge.net/projects/syncmldotnet/)查看`SyncML Client API .NET`Syncmldotnet

# objective-c - 在索引处编辑 NSMutable 数组

> ID：10393530
> 
> 赞同：0
> 
> 时间：2012-05-01T04:24:04.290
> 
> 标签：objective-c, ios, nsmutablearray

我想读取存储在 PLIST 中的数组，修改元素，然后将其存储回 PLIST。

我的简单代码如下：

```
NSArray *mathScoreArray;
NSNumber *score1 = [NSNumber numberWithInteger:score];
NSMutableArray *scoreArray1 = [[NSArray arrayWithArray:mathScoreArray] init];
[scoreArray1 replaceObjectAtIndex:4 withObject:score1];
[dictionary setObject:scoreArray1 forKey :@"mathScoreArray"];
[dictionary writeToFile:finalPath atomically:YES]; 
```

我收到用于修改数组的“replaceObjectAtIndex”错误。我怎样才能做到这一点？？

仅供参考，我的 plist 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>mathQues</key>
    <integer>1</integer>
    <key>mathScore</key>
    <integer>0</integer>
    <key>mathScoreArray</key>
    <array>
        <integer>10</integer>
        <integer>20</integer>
        <integer>30</integer>
        <integer>40</integer>
        <integer>50</integer>
    </array>
</dict>
</plist> 
```

扩展问题，最终我想将数组向右移动一个位置并在顶部存储一个新的传入值[就像堆栈一样]。

感谢指点。用户

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T04:25:28.290

更改此行：

```
 NSMutableArray *scoreArray1 = [[NSArray arrayWithArray:mathScoreArray] init];
// you need NSMutableArray, not NSArray ^
//                           you already got an array, no need to initialize ^ 
```

到：

```
 NSMutableArray *scoreArray1 = [NSMutableArray arrayWithArray:mathScoreArray]; 
```

此外，在您的代码中，没有迹象表明您是如何阅读的`NSArray`。

# python - 远程 API 非常慢

> ID：10393531
> 
> 赞同：2
> 
> 时间：2012-05-01T04:24:11.750
> 
> 标签：python, google-app-engine

我将远程 API 用于一些实用程序任务，并且我注意到它比在 Appengine 上运行的代码慢几个数量级。一个简单的 get_by_id(list) 使用远程 API 需要几分钟，而在 Appengine 上运行几秒钟。

日志显示远程 API 分别提取需要几秒钟；而在 Appengine 上，几乎同时检索到整个对象列表。

有什么办法可以改善这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:56:33.310

不要忘记，remoteapi 在本地执行您的代码，并且只为数据存储/blobstore/等调用 appengine 服务器。操作。因此，从本质上讲，您正在运行的代码会访问网络上的数据库。它肯定更慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T09:33:57.030

好吧，我自己测试了一下，发现获取 1000 个实体需要很长时间。在这种情况下，我觉得 remote_api 客户端为每个实体发出一个请求。这是因为我们的数据存储 API 调用的默认选项已更改。您可以通过在呼叫上设置 max_entity_groups_per_rpc 配置选项来加快呼叫。这是一个例子：

```
config = db.create_config(max_entity_groups_per_rpc=50)
entities = MyModel.get_by_id(l, config=config)
# or
entities = db.get(key_list, config=config) 
```

或者，使用键查询要快得多，因此，如果您的键列表是连续的，并且您可以使用键范围构建查询，例如：

```
MyModel.all().filter('__key__ >=', db.Key.from_path('MyModel', 1)).\
  filter('__key__ <', db.Key.from_path('MyModel', 1001)) 
```

你可以解决这个问题。

# castle-windsor - 在 ASP.NET MVC 4 WebApi 中集成 Castle Windsor

> ID：10393532
> 
> 赞同：0
> 
> 时间：2012-05-01T04:24:26.547
> 
> 标签：castle-windsor, asp.net-web-api, wcf-web-api

在 WebApi 0.5.0 中，我只需定义一个新的 WebApiConfiguration，并注册 CreateInstance 方法——这似乎在 WebApi 4（ASP.net MVC 4 附带的当前版本）中消失了。

如何将 Castle Windsor（或任何其他 IoC 容器）与这个新版本的框架集成？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:44:31.750

您需要的一切都可以从[这里](http://blog.ploeh.dk/2012/03/20/RobustDIWithTheASPNETWebAPI.aspx)开始。

如果您点击帖子中的链接，您将找到所需的所有信息，包括在容器中注册组件所需的一切。

# drupal - 从视图中访问自定义主题设置

> ID：10393536
> 
> 赞同：0
> 
> 时间：2012-05-01T04:25:14.697
> 
> 标签：drupal, drupal-7, drupal-views, drupal-theming

我有一些自定义主题设置，所以在我的主题设置页面上......这一切都很好，并且符合预期。

我现在需要创建一个获取自定义主题设置的视图。我找不到有关如何执行此操作的任何信息。

我已经安装了views php模块，我知道这`theme_get_setting('setting_name')`是我用来在我的`template.php`文件中获取主题设置的。

对此的任何帮助将不胜感激。

问候 C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:05:29.017

仅对于遇到此问题的其他人来说，答案是：

`<?php print theme_get_setting('setting_name'); ?>`使用`views_php`模块工作

它不会显示在视图预览中，但会显示在实际页面加载中。

感谢@sheena_d 提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:41:23.690

您可以在视图的基本设置中使用视图主题属性。您可以通过使用相应的输出（即行样式等）编写视图模板文件来覆盖它。并自定义其中的主题。这是视图的基本功能。您必须将此文件放在主题文件夹中，这是您启用的主题。

# html - 页眉/页脚的 100% 宽度和仍然居中的内容

> ID：10393538
> 
> 赞同：0
> 
> 时间：2012-05-01T04:25:36.973
> 
> 标签：html, css

破坏我的大脑如何伸展整个页面

这就是我想要弄清楚的......

*   如何在页面宽度上拉伸页眉和页脚
*   将内容居中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:14:53.363

因此，您希望页眉和页脚横跨整个页面（即 100% 的屏幕），而内容区域设置为任意数字并位于页面中间？

```
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <title>100% Width of header / footer and still center content</title>
  <style type="text/css">
    body { margin: 0; }
    #header { width: 100%; background: red; }
    #content { width: 900px; background: green; margin: 0 auto; }
    #footer { width: 100%; background: blue; }
  </style>
  </head>
  <body>
    <div id="header">Header Area</div>
    <div id="content">Content Area</div>
    <div id="footer">Footer Area</div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:36:29.800

```
body {
    margin: 0px
    }
.header_wrapper{ width: 100%} //not necessary as it automatically happens
.header{
    //make width whatever you want where the content goes
margin-left: auto;
margin-right: auto;
    } 
```

这是一般的想法。测试一下。添加颜色等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T04:37:32.243

我希望你在看这个：-

```
 <!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
#header {
height:100px;
background:red;
}

#mid-content {
background:green;
}

#footer {
height:100px;
background:blue;
}
</style>
</head>
<body>
<div id="header"></div>
<div id="mid-content">Tag info
infonewest 4featured faq votes active unanswered
About cs  </div>
<div id="footer"></div>
</body>
</html> 
```

并且它完全具有 100% 宽度....

演示：- [http://jsbin.com/eponir/2/edit#html,live](http://jsbin.com/eponir/2/edit#html,live)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T05:08:42.110

我认为只需将文本对齐中心设置为页脚 div

# wcf - 如何控制在 WCF SOAP 请求中签名的元素？

> ID：10393541
> 
> 赞同：3
> 
> 时间：2012-05-01T04:26:03.300
> 
> 标签：wcf, ws-security

我正在为不受我控制的 Java Web 服务创建 WCF 客户端，并且遇到了问题，因为如果 Timestamp 标头元素已签名，该服务将返回 InvalidSecurity 错误。

我目前正在使用以下`SecurityBindingElement`，但这会自动签署 Timestamp 元素。我怎样才能阻止这种行为？更一般地说，我如何控制哪些元素已签名，哪些未签名？

```
var version = MessageSecurityVersion.WSSecurity10WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10;
var sec = (AsymmetricSecurityBindingElement)SecurityBindingElement.CreateMutualCertificateBindingElement(version);
sec.EndpointSupportingTokenParameters.Signed.Add(new UserNameSecurityTokenParameters());
sec.MessageSecurityVersion = version;
sec.IncludeTimestamp = true;
sec.MessageProtectionOrder = MessageProtectionOrder.EncryptBeforeSign; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:52:32.967

标题中的每个元素都可以用 [MessageHeader] 标记 - 使用它您可以设置保护级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:37:47.690

通常，您可以通过实现自定义端点行为来控制对哪些元素进行签名，并在 AddBindingParameters() 中执行以下操作：

```
ChannelProtectionRequirements requirements = bindingParameters.Find<ChannelProtectionRequirements>();
requirements.IncomingSignatureParts... 
```

但是我看不到删除此 api 中的元素的方法 - 只是添加一些。也许你可以用私人反射来破解它。

此外，我不确定这是否适用于安全性。我认为您唯一的方法是将“includeTimestamp”设置为false，在这种情况下您不会向客户端发送时间戳。如果您必须发送时间戳（无符号），则仍将其保留为 false 并通过[自定义编码器](http://msdn.microsoft.com/en-us/library/ms751486.aspx)自己创建时间戳。应该不难。如果已签名，请注意不要更改消息中的任何其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:49:48.183

我无法投票赞成答案，但克里斯的建议对我有用。我想阻止签署正文（因此期望签署的响应正文）。我转到我的界面，并将 ProtectionLevel=None 添加到我的 MessageContracts 中 MessageBody 属性的每个实例。因为不需要对任何部分进行签名，WCF 会跳过对请求正文的签名，也不希望对响应正文进行签名。它仍然签署我的标题字段。

# php - 使用 preg_replace 为事物着色

> ID：10393542
> 
> 赞同：0
> 
> 时间：2012-05-01T04:26:20.957
> 
> 标签：php, codeigniter, preg-replace

我有一个从数据库中提取数据的脚本，根据提取的信息，我想给它着色

我想这样做，如果提取的数据是

```
&cTe&bst 
```

它用

```
<font style="color:#F55">Te</font><font style="color:#5FF">st</font> 
```

但我还需要确保我可以添加越来越多的东西。

我也希望它是一个函数，所以我可以简单地做

```
$this->colorize('&cTe&bst'); 
```

我正在使用 CodeIgniter

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:53:54.217

```
function colorize($in)
{
    $Colors = array(
        "b" => "#000",
        "w" => "#FFF",
        "g" => "#AAA"
    );

    $in = "<span>" . $in;

    foreach($Colors as $Prefix => $Color)
    {
        $in = str_replace( "&" . $Prefix, "</span><span style='color: " . $Color . "'>", $in );
    }

    $in .= "</span>";
    return $in;
} 
```

简单易用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:45:27.033

不要`<font>`像那样重复使用标签，而是将 a`<span>`与样式表一起使用。

```
<span class="blue">Te</span><span class="red">st</span>

.blue {
    font-color: #3F1515;
}

.red {
    font-color: #153F3F;
} 
```

这将使它更具可读性，并使 HTML 的大小也变得更小。

对于您的正则表达式，请尝试`&.(.*?)(?=&|$)` [http://regexr.com?30qid](http://regexr.com?30qid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T04:46:32.323

无需使用`preg_replace`，只需`explode`使用字符串，`&`然后从那里开始：

```
$colors = array('c' => '#F55', 'b' => '#5FF');

$str = '&cTe&bst';

foreach (explode('&', $str) as $text)
{
    $colorCode = $text[0];
    $actualText = substr($text, 1);
    echo '<span style="color:' . $colors[$colorCode] . '>' . $actualText . '</span>';
} 
```

免责声明：未经测试...

# android - 如何从 Windows ping Linux Shell

> ID：10393544
> 
> 赞同：0
> 
> 时间：2012-05-01T04:26:48.250
> 
> 标签：android, linux

我是 Android 开发新手，我想通过 LINUX shell 运行 PING 命令。当我在 Windows 中运行 PING（例如：'ping google.com'）时，它会自动计算最大、最小和平均时间并显示它。但我不确定 Linux 是否也会发生同样的情况。我尝试使用代码 ping，我得到的只是单行响应 ()，我正在手动计算最大、最小和平均时间。所以，我想直接通过在 LINUX shell 中 ping 来检查它是否显示 max、min 和 avg time ，就像 DOS 一样。

任何信息都有帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:35:57.667

您可以使用带有 -c 选项的 ping 命令。

看起来像：

```
ping www.example.com -c <count> 
```

# objective-c - 手势识别器完成后将触摸传递给父视图控制器

> ID：10393551
> 
> 赞同：0
> 
> 时间：2012-05-01T04:27:55.247
> 
> 标签：objective-c, ios, uiscrollview, uitouch

我在 UIView 上添加了 UILongPressGesture，它是 UIScrollView 的内容，而 UIScrollView 在我的 RootViewController 中。

当 longPress 被识别时，我想调用我的 RootViewController 的 touches started 方法。意味着我希望在我的 RootViewController 中长按时得到通知。

这是我的层次结构：RootViewController - CustomScrollView - ContentsViews

ContentsViews 有 longPressGestures ，当我们得到长按手势时，我想调用 RootViewController 的触摸开始，而不用抬起我已经触摸屏幕进行长按的手指。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:43:29.687

我做了同样的事情，调用我的父视图控制器的方法。您只需引用视图控制器。

就像， **在您的手势识别器方法中。**

```
[(RootViewController*)contentsView.superview.superview touches began method]; 
```

这样你就可以打电话

或者

*   在 contentsView 中创建委托

    将您的 rootviewController 分配给它。

    修改一个touchesbegin的名字为touches begin 1

    并调用根视图控制器的方法。

# php - 存储网站设置的最佳实践？

> ID：10393554
> 
> 赞同：3
> 
> 时间：2012-05-01T04:28:39.553
> 
> 标签：php, settings

最初，我的意图是创建一个类（面向对象）来将设置存储为常量。例如，在 PHP 中：

```
class Settings{
     const test = 'foobar!';
} 
```

但后来，我认为这种方法不会让 Admin 用户修改这些设置。好像只有非必要修改的设置声明为常量，其他的声明为私有变量，然后应用程序会先在数据库的设置表中查找设置是否可用，如果没有，则使用默认值来自 Settings 类中定义的 get()、set() 函数。这是一个好方法吗？最好的方法是什么？我很感激关于这个问题的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:14:07.410

我更喜欢类似于您的方法，但使用带有 getter 和 setter 的私有静态属性 key=>value 数组。这样以后您可以将它们绑定到文件或数据库。

```
$value = Classname::getparam('configsetting');
Classname::setparam('configsetting', $newvalue); 
```

不要忘记将 get/set 参数方法设为公共静态！

这是完整的课程看起来像......

```
class Classname{
    private static  $params = null;  

    public static function getparam($key){
        if(is_null(self::$params){
             self::$params = array();
             //initialize param array here from file, db, or just hardcoded values...
        }
        return isset(self::$params[$key])?self::$params[$key]:null;
     }

    public static function setparam($key, $value){
        if(is_null(self::$params){
             self::$params = array();
             //initialize array here
        }
        self::$params[$key] = $value;
     }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T04:34:49.303

直接回答:: 你的方法很好，它的所有偏好。

根据是否要更改设置，您可能需要查看 mysql 存储或将设置存储到文件中，但如果不更改设置，则您的方法可以满足您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:58:12.397

我通常将不需要修改的设置值保留为常量，并将具有修改选项的其他设置保存到数据库中（getter/setter）。然后我将数据缓存更长的时间，这样我就不必为每个请求访问数据库。当管理员更改任何设置时，缓存将失效，新值将存储在缓存中。

还有另一种将设置数据存储在 XML 文件中的方法。谁能告诉我将设置数据存储在 XML 文件中与将其存储在数据库中相比有什么优势？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T04:30:21.243

您可能希望考虑使用[YAML](http://yaml.org/)等格式的配置文件。

# c# - 如何要求在市场下载的应用程序中打开位置？

> ID：10393558
> 
> 赞同：2
> 
> 时间：2012-05-01T04:29:50.260
> 
> 标签：c#, windows-phone-7, gps, location, privacy

我最近向市场提交了一个 Windows 手机应用程序，该应用程序使用地理定位 api 来获取 gps 坐标并对其进行处理。

我在认证中被拒绝了，因为我没有请求用户使用位置的权限。

我的第一个想法是在应用程序中显示一个消息框，如果他们点击取消，那么不要让他们使用它。但我注意到，当您下载应用程序时，许多市场应用程序都会以某种方式弹出该对话框。

他们如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T04:36:40.457

如果应用程序具有该`ID_CAP_LOCATION`功能，则市场客户端（网络和电话）将提示用户接受位置策略。注意：在您的文件中包含或删除此功能`WMAppManifest.xml`只会影响开发人员手机。当您的应用程序被引入市场时，它会扫描您的 XAP 以确定其实际功能并自动应用这些功能。

但是，为了进入市场，您必须为用户提供禁用位置服务的能力、位置隐私政策，并且用户必须**选择**使用位置服务。IE。禁用定位服务，直到他们说要使用它们。

Windows Phone的[应用程序认证要求将](http://msdn.microsoft.com/en-us/library/hh184843%28v=VS.92%29.aspx "Windows Phone 应用程序认证要求")其作为要求[2.7 到 2.7.8 进行了说明](http://msdn.microsoft.com/en-us/library/hh184841%28v=vs.92%29.aspx "申请政策")。

另外，请注意，测试人员在这方面非常彻底，如果您的应用程序没有这些功能，它将失败。此外，他们将在选择退出位置服务时测试您的应用程序 - 在应用程序级别（通过您提供的机制）和操作系统级别（设置 > 位置 > 关闭）。确保您在第二次测试这些场景时测试我并导致我的第一次提交被拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:38:33.577

转到 WMAppManifest.xml 并添加

```
<Capabilities>
....
  <Capability Name="ID_CAP_LOCATION" /> 
```

# c# - 如何获取影响其输出的表达式树的所有因素

> ID：10393560
> 
> 赞同：3
> 
> 时间：2012-05-01T04:29:59.743
> 
> 标签：c#, .net, expression-trees

给定 type 的任意表达式，`Expression<Func<int>>`我如何获得所有可能但不一定会影响结果的对象的列表。

我正在寻找这样的功能：

```
IEnumerable<object> GetFactors(Expression<Func<int>> expression)
{
    //return a list of all objects in the expression that affect the result.
} 
```

**示例 1**

```
Expression<Func<int>> expression = () => a + b; 
```

where `a`and `b`are `int`s，`GetFactors`将返回一个`IEnumerable<object>`包含`a`and `b`。

**示例 2**

```
Expression<Func<int>> expression = () => obj1 != obj2 ? a + b : c + d; 
```

`GetFactors`将返回`IEnumerable<object>`包含`obj1`, `obj2`, `a`, `b`, `c`, 和`d`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:32:45.180

您需要像这样实现自定义表达式访问者类：

```
public class FactorVisitor : ExpressionVisitor
{
    List<object> factors = new List<object>();

    private FactorVisitor(Expression<Func<int>> expression)
    {
        Visit(expression);
    }

    public static List<object> GetFactors(Expression<Func<int>> expression)
    {
        return new FactorVisitor(expression).factors;
    }

    // Add this method for listing compile-time constant values
    protected override Expression VisitConstant(ConstantExpression node)
    {
        factors.Add(node.Value);
        return node;
    }

    protected override Expression VisitMember(MemberExpression node)
    {
        if (CanBeEvaluated(node))
        {
            factors.Add(Evaluate(node));
        }
        return node;
    }

    private static bool CanBeEvaluated(MemberExpression exp)
    {
        while (exp.Expression.NodeType == ExpressionType.MemberAccess)
        {
            exp = (MemberExpression) exp.Expression;
        }

        return (exp.Expression.NodeType == ExpressionType.Constant);
    }

    private static object Evaluate(Expression exp)
    {
        if (exp.NodeType == ExpressionType.Constant)
        {
            return ((ConstantExpression) exp).Value;
        }
        else
        {
            MemberExpression mexp = (MemberExpression) exp;
            object value = Evaluate(mexp.Expression);

            FieldInfo field = mexp.Member as FieldInfo;
            if (field != null)
            {
                return field.GetValue(value);
            }
            else
            {
                PropertyInfo property = (PropertyInfo) mexp.Member;
                return property.GetValue(value, null);
            }
        }
    }
} 
```

请注意，您只会获得变量的值，即使对于像`a.b`.

# java - Birt 3.7.2 集成报告html部署

> ID：10393562
> 
> 赞同：0
> 
> 时间：2012-05-01T04:30:21.850
> 
> 标签：java, jakarta-ee, web-applications, birt

我将 BIRT 3.7.2 报告引擎与我的 Web 应用程序集成在一起。现在的问题是，它在特定位置创建了一个 HTML 页面（如果我使用的是呈现格式 html）。

我不想保存报告 html 页面，而是希望它直接在我的网络应用程序中显示该 html（保存在 temp 中并在使用后删除）。此外，它还会创建一个图像目录，并且每次生成包含嵌入图像和/或图形的报告时，都会将图像和/或图形保存在图像目录中，从而不必要地增加空间。

有人可以帮我..??

我已按照以下步骤提供： [https ://dev.c-ware.de/confluence/display/PUBLIC/Embeding+Birt+into+Application+built+with+Maven](https://dev.c-ware.de/confluence/display/PUBLIC/Embeding+Birt+into+Application+built+with+Maven)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:04:06.247

我没有深入研究 Birt 库来做这件事，也没有像链接中显示的那样使用他们的 API 创建任何类，所以这可能不是最有效的解决方案。

[这是几个月前的事了，我现在无法访问源代码，但基本上我只是将BirtRuntime](https://stackoverflow.com/a/9006686/1062992)作为 servlet 添加到我的 webapp 中，如此处所述。

这允许我加载 Birt 报告，但我还需要将它们嵌入到现有网页中。我已经在这个应用程序中有一个非常简单的代理 servlet，它只会读取 url 的 html 内容。所以我只是使用我的 BIRT 报告的 url 调用这个 servlet，然后我会将输出粘贴在网页上我想要的位置。

代理 servlet 是这样的：

```
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;

import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.io.IOUtils;

public class ProxyServlet extends HttpServlet {

    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException  {

        String urlString = request.getParameter("url");
        try {
            URL url = new URL(urlString);
            url.openConnection();
            InputStream in = url.openStream();
            ServletOutputStream out = response.getOutputStream();
            IOUtils.copy(in, out);
        }
        catch (MalformedURLException e) {     
            throw new ServletException(e);
        }
        catch (IOException e) {     
            throw new ServletException(e);
        }
    }
} 
```

# azure - Azure 表存储获取最后一条记录

> ID：10393563
> 
> 赞同：16
> 
> 时间：2012-05-01T04:30:22.563
> 
> 标签：azure, azure-table-storage

我有一个大约 500 万行的天蓝色表，每个分区大约 100k 行。RowKey 是一个可排序的时间戳。我需要能够获取插入到表中的最新记录。

由于不支持 Linq Last、Max、OrderBy 等，如何有效获取最新的表记录？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-01T05:02:16.363

没有有效的方法来做到这一点。但如果它是一个选项，请考虑翻转您的行键，以便最新条目位于顶部（反向时间顺序）。检索前*n*个条目既简单又有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-30T12:24:07.373

您可以查询小于 MaxDate 的 TimeStamp 并将结果限制为 1。尚未对其进行测试，但它应该可以工作。取决于您的时间戳的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-17T07:26:13.250

[Microsoft表设计模式的](https://docs.microsoft.com/en-us/azure/storage/tables/table-storage-design-patterns)[日志尾模式](https://docs.microsoft.com/en-us/azure/storage/tables/table-storage-design-patterns#log-tail-pattern)部分专门解决了这个问题：

> *背景和问题*
> 
> 一个常见的要求是能够检索最近创建的实体，例如员工提交的 10 个最近的费用报销。表查询支持 $top 查询操作来返回集合中的前 n 个实体：没有等效的查询操作来返回集合中的最后 n 个实体。
> 
> (...)
> 
> 以下 C# 代码示例显示了一种为从最新到最旧排序的 RowKey 创建合适的“倒置刻度”值的方法：
> 
> `string invertedTicks = string.Format("{0:D19}", DateTime.MaxValue.Ticks - DateTime.UtcNow.Ticks);`
> 
> (...)

# c# - Visual Web Developer 2010 网站中的通用配置文件

> ID：10393575
> 
> 赞同：1
> 
> 时间：2012-05-01T04:33:03.173
> 
> 标签：c#, asp.net, visual-studio-2010, asp.net-profiles

我知道 ProfileCommon 在 Web 应用程序项目 (WAP) 中不可用，但我使用的是网站类型。我把它放到我的 web.config 文件中

```
<system.web>
  <profile enabled="true">
    <properties>
      <add name="FirstName" type="System.String"/>
      <add name="LastName" type="System.String"/>
      <add name="Address" type="System.String"/>
      <add name="City" type="System.String"/>
      <add name="State" type="System.String"/>
      <add name="Zip" type="System.String"/>
      <add name="Email" type="System.String"/>
      <add name="Birthday" type="System.String"/>
      <add name="ProfilePicture" type="System.String"/>
      <add name="ProfilePictureThumb" type="System.String"/>
    </properties>
  </profile>
  <roleManager enabled="true"></roleManager>
</system.web> 
```

当我尝试添加

```
ProfileCommon profile = HttpContext.Current.Profile as ProfileCommon; 
```

声明到 .cs 文件中，我得到了

```
The type or namespace name 'ProfileCommon' could not be found (are you missing a using directiv or assembly reference) 
```

我正在使用进口

```
using System;
using System.Web;
using System.Web.Security;
using System.Web.Profile; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:12:23.267

这篇博文将为您提供帮助：[WebProfile Builder and WAP for VS2010](http://www.kps-fl.com/blog/?p=17)

`ProfileCommon`是动态类。您可以使用下面的代码行创建即时。

```
var profile = HttpContext.Current.Profile; 
```

![在此处输入图像描述](../Images/08e9f411969fe0a614efe010535f2f03.png)

如果需要设置属性值：

```
profile.SetPropertyValue("FirstName","testName"); 
```

# mysql - 上传图片到指定文件夹

> ID：10393576
> 
> 赞同：0
> 
> 时间：2012-05-01T04:33:17.500
> 
> 标签：mysql, spring-mvc

我正在使用spring mvc 3.0，jsp，mysql。我有表 tbl_employee，它的属性是 emp_id(int) address(string) image(string) 现在，我希望显示的表单可以获取特定员工的图像并将图像位置存储在数据库的图像字段中并存储图像在系统的特定文件夹中，如何，我可以这样做。谁能给我举个例子？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:37:14.850

尝试一个基于 jquery 的图像上传器，你应该很高兴。您可以使用 value-uploader 或 bluecraft

# mysql - 查询加法和乘法

> ID：10393577
> 
> 赞同：2
> 
> 时间：2012-05-01T04:33:18.597
> 
> 标签：mysql

我的表如下

```
int_id      Born         Died
 1          2001          0    
 2          2002          0    
 3          1991          0
 4          1992          0
 5          1987         1995
 6          1986         1993
 7          1985         1998 
```

由此，我需要查询只显示死者，确定他们死时的年龄并将该值乘以 3。

我一直在尝试使用 phpMyAdmin 来做到这一点，但到目前为止还没有弄清楚。给予的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T04:34:59.690

你试过吗，呃......减法和乘法？

```
SELECT 
    int_id,
    Died - Born AS age_died,
    3 * (Died - Born) AS age_died_tripled
FROM my_table
WHERE Died > 0; 
```

# java - Java int[] 向量给我的是积分而不是数据。

> ID：10393584
> 
> 赞同：0
> 
> 时间：2012-05-01T04:35:40.410
> 
> 标签：java, eclipse, vector

我正在使用矢量，当我复制数据并尝试对其进行编辑时，矢量和副本都发生了变化。

```
//The vectors contains int[] and the first 3 are loaded with int values.
int ToCheck[] = OpenSet.elementAt(Current);
ToCheck[1] = ToCheck[1] + 1; // This changes OpenSet and ToCheck[].
boolean IsInVector = false;

for(int y = 0;y < OpenSet.size(); y++){
     if(ToCheck == OpenSet.elementAt(y)) // Because it changed both values it always is true
     {
    IsInVector == true;
     }
} 
```

我希望能够复制向量中的数据并在不更改原始数据的情况下对其进行编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:40:04.583

您需要创建数组的完整副本：

```
int[] origArr = OpenSet.elementAt(Current);
int[] newArr = Arrays.copyOf(origArr, origArr.length); 
```

另一个（不相关的）点 - 请遵循 Java 的命名约定，变量名的开头是小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:41:31.230

复制数组的简单方法是使用`Arrays.copyOf`：

```
int[] tmp = openSet.elementAt(current);
int toCheck[] = Arrays.copyOf(tmp, tmp.length); 
```

在您聆听的同时，**请**学习使用公认的 Java 命名约定。方法名称和字段/参数/本地名称应以小写字母开头。

# android - 通过缓存生成的 View 优化 ListView 备份自定义实现的 BaseAdapter

> ID：10393586
> 
> 赞同：0
> 
> 时间：2012-05-01T04:35:51.607
> 
> 标签：android, listview, baseadapter

我在使用 listview 形成的选项卡上显示了巨大的视图。ListView 从扩展 BaseAdapter 的适配器获取其数据。每次来回移动选项卡时，Pager 往往会一次又一次地在 ListView 中创建视图，浪费我宝贵的 CPU。

好的，所以我尝试在 BaseAdapter 的 getView 中使用 parentView.getChild(atIndex) 但这只会破坏滚动 ListView 的视图。

问题，有什么方法可以通过缓存视图来优化性能？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:47:43.100

ListView 已经回收了视图。回收的视图将是适配器 getView 方法中的 View 参数。

您还应该考虑使用 ViewHolder 模式来避免一堆 findViewById 调用。有关更多详细信息，请参阅此链接[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/List14.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/List14.html)

**编辑：**这里有一些我今晚正在查看的用于优化 ListViews 的参考资料：

[http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

# android - 通过让我的点到目的地点来绘制路线

> ID：10393589
> 
> 赞同：0
> 
> 时间：2012-05-01T04:36:27.267
> 
> 标签：android, google-maps, routes, mylocationoverlay

```
 String uri = "http://maps.google.com/maps?saddr=" + src_lat+","+src_lon+"&daddr="+des_lat1+","+des_lon1;
   Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
   intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
   startActivity(intent); 
```

这是用于在已知源和目的地的纬度和经度的两个位置之间绘制路线的代码。但是在这里我想将我所在位置的经度和纬度替换为`src_lon`and `src_lat`，我不知道它的值，并且这个经度和纬度会随着我当前的位置而改变。有可能画出这样的路线吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:45:38.197

```
private void DrawPath(GeoPoint src, GeoPoint dest, int color,
                      MapView mMapView01) {

    // Connect to the map web service
    StringBuilder urlString = new StringBuilder();
    urlString.append("http://maps.google.com/maps?f=d&hl=en");
    urlString.append("&saddr=");//from
    urlString.append( Double.toString((double)src.getLatitudeE6()/1.0E6 ));
    urlString.append(",");
    urlString.append( Double.toString((double)src.getLongitudeE6()/1.0E6 ));
    urlString.append("&daddr=");//to
    urlString.append( Double.toString((double)dest.getLatitudeE6()/1.0E6 ));
    urlString.append(",");
    urlString.append( Double.toString((double)dest.getLongitudeE6()/1.0E6 ));
    urlString.append("&ie=UTF8&0&om=0&output=kml");
    Log.d("xxx","URL="+urlString.toString());

    //System.out.println(urlString);
    // Get the KML (XML) document. And parse it to get the coordinates(direction route).
    Document doc = null;
    HttpURLConnection urlConnection= null;
    URL url = null;
    try
    {
        url = new URL(urlString.toString());
        urlConnection=(HttpURLConnection)url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);
        urlConnection.setDoInput(true);
        urlConnection.connect();

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        doc = db.parse(urlConnection.getInputStream());

        if(doc.getElementsByTagName("GeometryCollection").getLength()>0)
        {
            //String path = doc.getElementsByTagName("GeometryCollection").item(0).getFirstChild().getFirstChild().getNodeName();
            String path = doc.getElementsByTagName(
                "GeometryCollection").item(0).getFirstChild().getFirstChild().getFirstChild().getNodeValue();
            Log.d("xxx","path="+ path);
            String [] pairs = path.split(" ");
            String[] lngLat = pairs[0].split(","); // lngLat[0]=longitude lngLat[1]=latitude lngLat[2]=height
            // Source
            GeoPoint startGP = new GeoPoint((int)(
                Double.parseDouble(lngLat[1])*1E6),
                (int)(Double.parseDouble(lngLat[0])*1E6));
            //mMapView01.getOverlays().add(overlayitem);
            GeoPoint gp1;
            GeoPoint gp2 = startGP;
            for(int i=1; i<pairs.length; i++) // The last one would crash.
            {
                lngLat = pairs[i].split(",");
                gp1 = gp2;
                // watch out! For GeoPoint, first:latitude, second:longitude
                gp2 = new GeoPoint((int)(Double.parseDouble(lngLat[1])*1E6),(int)(Double.parseDouble(lngLat[0])*1E6));
                mMapView01.getOverlays().add(new MapRouteOverlay(gp1,gp2,2,color));
                Log.d("xxx","pair:" + pairs[i]);
            }
            //mMapView01.getOverlays().add(new MapRouteOverlay(dest,dest, 3)); // Use the default color
        }
    }
    catch (MalformedURLException e)
    {
        e.printStackTrace();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
    catch (ParserConfigurationException e)
    {
        e.printStackTrace();
    }
    catch (SAXException e)
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T06:34:40.917

尝试这个：

```
Intent i = new Intent(android.content.Intent.ACTION_VIEW,
       Uri.parse("google.navigation:q=" +destLat+ ","+destLon+""));
this.startActivity(i); 
```

这是我所知道的最好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T04:53:43.857

是的，使用位置管理器获取当前位置的纬度和经度。请参阅*[位置策略](http://developer.android.com/guide/topics/location/obtaining-user-location.html)*并使用*[Google Directions API](https://developers.google.com/maps/documentation/directions/)*获取路线。

# php - 在 php 文件中使用 javaScript 字段验证

> ID：10393592
> 
> 赞同：0
> 
> 时间：2012-05-01T04:36:45.190
> 
> 标签：php, javascript

我正在处理需要使用 JavaScript 进行字段验证的 php 表单，但我不知道如何在 php 中使用它，因为我是这个表单的新手。一些我如何尝试通过以下代码来做到这一点

```
<?php

 session_start();
 // include_once('header.php');

?>

<div id="contentarea">

<div style="background-color:#3fa0c1;color:#FFF">
 <h2 style="color:#FFF"> Checkout </h2>
</div>
<br/>  
<h4> Welcome to Checkout. <br/>
Please fill in the fields below to complete your purchase! 
</h4><br/>

<form action=" " method="POST" name="Form" onsubmit="return ValidateForm();"  style="color:#000000; font-size:18px;" 

<?php switch ($_GET["checkoutType"]) {
        case "Guest":   echo 'action="guestCheckout.php"'; break;
        case "Register": echo 'action="registerCheckout.php"'; break;
    }
?>

>   
    <h3> BILLING ADDRESS </h3><br/>

    First Name*
    <input style="height:20px; margin-bottom:10px;" name="firstname" size="40" id="firstname"/> <br/>

    Last Name* 
    <input style="height:20px; margin-bottom:10px;"  name="lastname" size="40"/><br/>

    Email Address* 
    <input style="height:20px; margin-bottom:10px;"  name="email" size="40"/><br/>

    Confirm Email Address* 
    <input style="height:20px; margin-bottom:10px;"  name="email2" size="40"/><br/>

    Telephone* 
    <input style="height:20px; margin-bottom:10px;"  name="telephone" size="40"/><br/>

    Address* <br/>
    <input  style="height:20px; margin-bottom:10px;"  name="addr1" id="addr1" size="40"/><br/>
    <input  style="height:20px; margin-bottom:10px;"  name="addr2" id="addr2" size="40"/><br/>

    Country*  <br/>
    <!-- input  style="height:20px; margin-bottom:10px;"  name="country" size="40"/><br/-->
    <select name="country" id="country">
         <option value="select_country"> Select Country </option>
         <option value="US"> United States </option>
    </select>
    <br/>
    <br/>

    City*  <br/>
    <input  style="height:20px; margin-bottom:10px;"  name="city" size="40"/><br/>

    Zip Code* 
    <input  style="height:20px; margin-bottom:10px;" name="postcode" size="40"/><br/>

    State* <br/>
    <!-- input  style="height:20px; margin-bottom:10px;"  name="state" size="40"/><br/-->
    <select name="region" id="state">
         <option value="select_state"> Select Region</option>
         <option value="FL"> Florida </option>
         <option value="GA"> Georgia </option>
    </select>
    <br/><br/>

    Company
    <input  style="height:20px; margin-bottom:10px;" name="company" size="40"/><br/>

    <input name="ship_to_same_addr" type="checkbox"  checked="checked" /> Ship to the same address. <br/><br/>

<h3> SHIPPING METHOD </h3><br/>

    <b> Post Office: Priority Mail (USA) - First Class (International) </b> <br/>
    <input type="radio" name="shipping_method" id="shipping_method" checked="checked" />  Fixed <b> $6.95</b>. <br/><br/>

<h3> PAYMENT METHOD </h3><br/>

    <input type="radio" name="pay_method" id="pay_method" checked="checked" />  Credit Card (Authorize.net) <br/><br/>

    Credit Card Type*
    <!--input  style="height:20px; margin-bottom:10px;"  name="cc_type" size="40"/><br/ -->
    <select name="cc_type" id="cc_type">
     <option value="AE"> American Express </option>
     <option value="DI"> Discover </option>
     <option value="MC"> Master Card </option>
     <option value="VI"> Visa </option>
    </select>
    <br/><br/>

    Credit Card Number*
    <input  style="height:20px; margin-bottom:10px;"  name="cc_number" id="cc_number" size="40"/><br/>

    Credit Card Security Code*
    <input  style="height:20px; margin-bottom:10px;"  name="cc_cid" id="cc_cid" size="40"/><br/>

    Expiration Date*<br/>
    <!-- input  style="height:20px; margin-bottom:10px;"  name="cc_exp_month" size="20"/-->
     <select name="cc_exp_month" id="cc_exp_month">
         <option value="select_month"> Select Month </option>
         <option value="01"> 01 - January </option>
         <option value="02"> 02 - February </option>
         <option value="03"> 03 - March </option>
         <option value="04"> 04 - April </option>
         <option value="05"> 05 - May </option>
         <option value="06"> 06 - June </option>
         <option value="07"> 07 - July  </option>
         <option value="08"> 08 - August </option>
         <option value="09"> 09 - September </option>
         <option value="10"> 10 - October </option>
         <option value="11"> 11 - November </option>
         <option value="12"> 12 - December </option>
    </select>
    <br/>
    <!-- input  style="height:20px; margin-bottom:10px;"  name="cc_exp_year" size="20"/--><br/>
    <select name="cc_exp_year" id="cc_exp_year">
         <option value="select_year"> Select Year </option>
         <option value="2012"> 2012 </option>
         <option value="2013"> 2013 </option>
         <option value="2014"> 2014 </option>
         <option value="2015"> 2015 </option>
         <option value="2016"> 2016 </option>
         <option value="2017"> 2017 </option>
         <option value="2018"> 2018 </option>
         <option value="2019"> 2019 </option>
         <option value="2020"> 2020 </option>
    </select>
    <br/><br/>

    Coupon Code
     <input  style="height:20px; margin-bottom:10px;"  name="coupon_code" size="40"/><br/>

    Comments
    <textarea rows="6" cols="40" name="comments"></textarea><br/><br/>

    <input type="submit" value="Place Order Now" />

</form>

<script>
function ValidateForm()
{
    var firstname = document.Form.firstname;
    var lastname = document.Form.lastname;

    var email = document.Form.email;
    var email2 = document.Form.email2;   
    var telephone = document.Form.telephone;

    var address = document.Form.addrl;
    var address = document.Form.addr2;
     var country = document.Form.country;
     var city = document.Form.city;

     var postcode = document.Form.postcode;
     var state = document.Form.state;
     var company = document.Form.company;
     var creditcardtype = document.Form.cc_type;
     var creditcardnumber = document.Form.cc_number;
     var creditcardsecuritycode = document.Form.cc_cid;
     var expirationdate = document.Form.cc_exp_month;
     var expirationdate = document.Form.cc_exp_month;

    if (firstname.value == "")
    {
        window.alert("Please enter your last name.");
        firstname.focus();
        return false;
    }  

    if (lastname.value == "")
    {
        window.alert("Please enter your last name.");
        lastname.focus();
        return false;
    }  

    if (email.value == "")
    {
        window.alert("Please enter e-mail address.");
        email.focus();
        return false;
    }
    if (email.value.indexOf("@", 0) < 0)
    {
        window.alert("Please enter a valid e-mail address.");
        email.focus();
        return false;
    }
    if (email2.value == "")
    {
        window.alert("Please enter confirm e-mail address.");
        email2.focus();
        return false;
    }
    if (email2.value.indexOf("@", 0) < 0)
    {
        window.alert("Please enter a valid e-mail address.");
        email2.focus();
        return false;
    }
    if(email.value != email2.value)
    {
      window.alert("Please enter email & confirm email both same");
      return false;
    }

    if  (telephone.value == "")
    {
        window.alert("Please enter your telephone number.");
        telephone.focus();
        return false;
    }

    if (addr1.value == "")
    {
        window.alert("Please enter your address1.");
        add1.focus();
        return false;
    }
     if (addr2.value == "")
    {
        window.alert("Please enter your address2.");
        add2.focus();
        return false;
    }

   if (country.selectedIndex < 1)
    {
        alert("Please select country.");
        country.focus();
        return false;
    }
     if (city.value == "")
    {
        window.alert("Please enter city.");
        city.focus();
        return false;
    }
     if (postcode.value == "")
    {
        window.alert("Please enter zip code.");
        postcode.focus();
        return false;
    }
     if (state.selectedIndex < 1)
    {
        window.alert("Please enter state.");
        state.focus();
        return false;
    }

    if (cc_type.selectedIndex < 1)
    {
        window.alert("Please enter credit card type.");
        cc_type.focus();
        return false;
    }
    if (cc_number.value == "")
    {
        window.alert("Please enter credit card number.");
        cc_number.focus();
        return false;
    }
    if (cc_cid.value == "")
    {
        window.alert("Please enter credit card security code.");
        cc_cid.focus();
        return false;
    }
    if (cc_exp_month.selecedIndex < 1)
    {
        window.alert("Please enter expiry date.");
        cc_exp_montht.focus();
        return false;
    }
    if (cc_exp_year.selectedIndex < 1)
    {
        window.alert("Please enter expiry date.");
        cc_exp_year.focus();
        return false;
    }

    return true;
}

</script>

</div>
<?php 

//include_once('footer.php')

?> 
```

它似乎工作正常，但我需要做的是在每个字段验证完成后显示错误消息，而不是显示警报框......我该怎么做，任何帮助将不胜感激......提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:01:40.117

您可以使用[验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)来有效地管理表单验证。 [http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T04:53:41.383

如果你想尝试 javascript 验证你可以`add div or span with display property none`。然后`if error then in that span/div display block and show error in that div/span`。例如，请参见下面的代码。

在 HTML 中

```
 <input  style="height:20px; margin-bottom:10px;"  name="name" size="40"/><br/>
<span id="name_error" style="display:none"></span> 
```

在 JavaScript 中

```
<script>
function ValidateForm()
{
   var name = document.Form.name;

  if(name.value == ''){
    document.getElementById('name_error').innerHTML = 'Please provide name!';
    document.getElementById('name_error').style.display = 'block';        
    name.focus();
    return false;
  }else{
    document.getElementById('name_error').innerHTML = '';
    document.getElementById('name_error').style.display = 'none';        
  }
 }
</script> 
```

请试试这个，我希望它对你有用，如果该字段存在错误，则在该跨度中显示错误，否则再次显示无。

谢谢。

# jsf - JSF 页面不使用 Filter 接口重定向

> ID：10393600
> 
> 赞同：1
> 
> 时间：2012-05-01T04:37:56.050
> 
> 标签：jsf, redirect, servlet-filters

我正在开发 jsf 登录和注销较小的 Web 应用程序。我看到了一些问题。我的注销方法没有删除会话并且无法重定向到登录页面。我已经从 stackoverflow.com 询问。Matt 用户向我回答了 Filter 类。然后我根据Matt研究过滤器和页面缓存。我曾经在web.xml文件等中使用过滤器的doFilter（）方法。

这是我的代码：

```
public class LoginFilter implements Filter {

@Override
public void init(FilterConfig config) throws ServletException {

}

@Override
public void doFilter(ServletRequest req, ServletResponse res,
        FilterChain chain) throws IOException, ServletException {
    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;
    UserController userController = (UserController) request.getSession().getAttribute("user");

    if (userController == null || !userController.isLoggedIn()) {
        response.sendRedirect(request.getContextPath() + "/login.jsf");
    } else {
        chain.doFilter(request, response);
    }
}

@Override
public void destroy() {

} 
```

}

和注销（）

```
 public String logout() {

    FacesContext context = FacesContext.getCurrentInstance();
    ExternalContext ec = context.getExternalContext();
    final HttpServletRequest request = (HttpServletRequest) ec.getRequest();
    request.getSession(false).invalidate();
    return "logout";
} 
```

和 web.xml 配置：

```
<filter>
     <filter-name>loginFilter</filter-name>
     <filter-class>org.bis.logic.LoginFilter</filter-class>
</filter>
<filter-mapping>
     <filter-name>loginFilter</filter-name>
     <url-pattern>*.jsf</url-pattern>
</filter-mapping> 
```

登录后我渲染主页。

```
<body>
 <!-- 
 #{ session.invalidate(); 
    response.sendRedirect("login.jsf");
  } -->
 <h:panelGrid rendered="#{userController.isLoggedIn()}">

 Hello Mr . #{userController.user.name}

<br />
<h:form>
    <p align="right">
          <h:commandLink action="#{userController.logout()}"value="Logout" />
    </p>
</h:form>
</h:panelGrid>
</body> 
```

我的 userController managedBean 类：

```
@ManagedBean(name = "userController") 
```

@SessionScoped 公共类 UserController {

```
private User user;

public UserController() {
    user = new User();
}

public User getUser() {
    return user;
}

public void setUser(User user) {
    this.user = user;
}

public static void addErrorMessage(String msg) {
    FacesMessage facesMsg = new FacesMessage(FacesMessage.SEVERITY_ERROR,
            msg, msg);
    FacesContext.getCurrentInstance().addMessage(null, facesMsg);
}

public String authenticate() {

    if (user.getName().equals("admin") && user.getPassword().equals("")) {
        return "success";
    } else
        addErrorMessage(String
                .format("Username and Password didn't match !!!"));
    return "fail";

} 
```

页面导航xml：

```
 <navigation-rule>
    <from-view-id>/login.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>success</from-outcome>
        <to-view-id>/home.xhtml</to-view-id>
        <redirect />
    </navigation-case>
    <navigation-case>
        <from-outcome>fail</from-outcome>
        <to-view-id>/login.xhtml</to-view-id>
    </navigation-case>
</navigation-rule>
<navigation-rule>
    <from-view-id>/home.xhtml</from-view-id>
    <navigation-case>
        <from-action>#{userController.logout()}</from-action>
        <from-outcome>logout</from-outcome>
        <to-view-id>/index.xhtml</to-view-id>
        <redirect />
    </navigation-case>
</navigation-rule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:28:13.717

您的过滤器正在无限重定向循环中运行。上的请求`login.jsf`也将调用过滤器。如果用户仍然没有登录，那么它将重定向回`login.jsf`哪个将反过来再次调用过滤器，等等。

基本上有两种方法可以解决这个问题：

1.  确保`login.jsf`过滤器的 URL 模式没有覆盖它。将所有受保护的页面（除了！）收集`login.jsf`在一个单独的文件夹中，如`/app`、`/secured`、`/pages`等，并将过滤器映射到该 URL 模式上，例如`/app/*`.

2.  添加额外的检查以确定请求是否已经在请求登录页面，如果是，则不要再次重定向到它。

    ```
    String loginURL = request.getContextPath() + "/login.jsf";

    boolean loggedIn = userController != null && userController.isLoggedIn();
    boolean loginRequest = request.getRequestURI().equals(loginURL);

    if (loggedIn || loginRequest) {
        chain.doFilter(request, response);
    } else {
        response.sendRedirect(loginURL);
    } 
    ```

# java - java finalization的疑惑

> ID：10393605
> 
> 赞同：0
> 
> 时间：2012-05-01T04:38:30.950
> 
> 标签：java

我有一些关于 java finalization 的问题。例如，我有一个类 FileHelper，这个类与读取文件、写入文件等相关联。现在我的问题是，我在 FileHelper 类中有一个方法 writeFile()。现在如果我想关闭该文件，我应该覆盖 finalize() 方法并关闭文件，还是可以在 writeFile() 方法本身中关闭文件？哪种方法是正确的？我已将我的 File 变量声明为成员变量。如果重写是个坏主意，那我们为什么要重写 finalize() 方法呢？哪个场景？我读过很多文章，他们说要关闭文件、字体等系统资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T04:50:18.983

最佳做法是尽快关闭文件。如果您在 FileHelper 中有静态方法（假设您的 Helper 是一堆静态“帮助”方法）我会关闭里面的文件

```
static void writeFile(String fileName, String text) { // Exception 
 // Open file here 
 // write text
 // close it
} 
```

覆盖 finalize 的目的是释放非托管资源，例如文件，以防有人忘记这样做。如果有人以这种方式使用你的助手

```
 FileHelper fileHelper = new FileHelper(file);
 fileHelper.writeFile(text);
 // forgot to fileHelper.close(); 
```

并且您已经覆盖了 finalize 并在 GC 运行时在内部调用 close() 文件将被关闭。问题：

*   正如我之前提到的，文件应该尽快关闭（但不能更早；））
*   这是不确定的（没有人知道 GC 何时开始）
*   这应该仅用于防止调用者忘记关闭文件的情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T04:46:34.990

在几乎所有情况下，使用终结器都是一个坏主意。Java 规范声明不能保证终结器会一直运行。即使他们这样做，您也无法控制何时发生这种情况。

使用终结器作为关闭文件的*主要*机制总是一个坏主意。为什么？因为如果 GC 长时间不运行，您的应用程序很可能会耗尽文件描述符，并且文件打开尝试将开始失败。

处理打开的流的最佳方法是将它们保存在局部变量和参数中，并用于`try { ...} finally`确保它们在完成后始终关闭。或者在 Java 7 中，使用新的“try with resource”语法。

如果您需要将流放在成员变量中，您可能应该让父类实现一个`close()`关闭流的方法，并用于`try { ...} finally`确保父类的实例被关闭。

* * *

还应该注意的是，使用终结器来关闭“丢失”的流几乎没有意义。使用*需要*关闭的外部资源的流类已经有终结器来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T04:53:26.823

finalize() 方法只会在 Java 垃圾收集器即将回收对象时被调用。在 finalize 方法中释放文件句柄是一种不好的做法。

它可能会导致 java.io.IOException: Too many open files 因为您无法保证垃圾收集器何时运行。

更好的选择是在 finally 块中关闭文件读取器/写入器对象。因为它保证运行。

```
 finally {
  // Always close input and output streams. Doing this closes
  // the channels associated with them as well.
  try {
    if (fin != null)
      fin.close();
    if (fout != null)
      fout.close();
  } catch (IOException e) {
  }} 
```

fin 和 fout 是 FileInputStream 和 FileOutputStream 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T04:41:12.233

覆盖 finalize() 不是一个好习惯。我会在代码中完成它。

# c++ - 如果arrayposition是一个int ...？

> ID：10393608
> 
> 赞同：0
> 
> 时间：2012-05-01T04:38:45.500
> 
> 标签：c++, vector, int

```
 vector <string> inputarrayconverted = { ... };

    try
    {
    if (atoi(inputarrayconverted[p].c_str()) >= 0)
    {
        inputarrayconverted[p] = "n";
    }
}
catch (int e) { }` 
```

不管用。它给了我一个“调试断言失败！” 信息。我要做的就是验证如果数组位置是 int，则将其值更改为“n”

错误是“调试断言失败！

文件：向量表达式：向量下标超出范围"

但是，为什么我的 try 块没有捕捉到这个？那是我的问题。

这是堆栈跟踪。（我相信）

```
msvcp100d.dll!590599f3()
[Frames below may be incorrect and/or missing, no symbols loaded for msvcp100d.dll] 
Paradigms Assignment 2 C Plus Plus.exe!std::vector<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::allocator<std::basic_string<char,std::char_traits<char>,std::allocator<char> > > >::operator[](unsigned int _Pos=0)  Line 932 + 0x17 bytes C++
Paradigms Assignment 2 C Plus Plus.exe!wmain(int argc=1, wchar_t * * argv=0x00314af8)  Line 148 + 0x12 bytes    C++
Paradigms Assignment 2 C Plus Plus.exe!__tmainCRTStartup()  Line 552 + 0x19 bytes   C
Paradigms Assignment 2 C Plus Plus.exe!wmainCRTStartup()  Line 371  C
kernel32.dll!7647339a()     
ntdll.dll!77909ef2()    
ntdll.dll!77909ec5() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T05:04:46.050

vector 上的`operator[]()`访问函数不会在越界访问时抛出异常——这只是未定义的行为。这个想法是知道它正在处理范围内的索引值的代码不应该为库不必要地仔细检查它而付出代价。

你得到一个调试断言是因为调试库确实执行了检查，但是以你看到的断言的形式。调试版本生成可以在调试版本中捕获但不能在发布版本中捕获的异常是不合适的。

如果你想要边界检查访问，使用`vector::at()`which 执行类似的访问，但是边界被检查并且会抛出异常：

> 成员函数 at() 提供对容器元素的边界检查访问。如果 n >= a.size()，at() 会抛出 out_of_range。

因此，您需要 catch`std::out_of_range`而不是 a `int`，并且需要 a`#include <stdexcept>`来获取它的声明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T04:52:58.170

该变量`p`包含一个超出向量中元素数量范围的值。（它要么是负数，要么太大，要么数组是空的。）断言是告诉你在开发过程中出了什么问题，而异常处理运行时问题。我不太了解 Visual Studio，所以我不确定他们的标准库版本是否有一个可以设置为从断言切换到异常的标志。（也许只是构建发布呢？）

# php - 从 .pdf 到 .jpg 的图像转换不显示完整的图像

> ID：10393610
> 
> 赞同：0
> 
> 时间：2012-05-01T04:39:04.520
> 
> 标签：php, imagemagick

我在服务器上的 pdf 文件上使用 imagemagick，转换工作正常，但是当我查看已转换的 jpb 时，只显示 pdf 第一页中的一些项目。但是，它缺少背面的完整图像。

```
/usr/local/bin/convert -size 250x350 testimage.pdf[0] testimage.jpg 
```

这是我用来将 pdf 转换为 jpg 的 php 代码。

这就是它应该的样子![正确的图像](../Images/909022e4a03c02f06955c4a50385a1f9.png)

然而它看起来像这样![在此处输入图像描述](../Images/4fa48af002bdc9a88218e9ae657eb39b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T20:51:28.983

它看起来像一个层尝试：

```
/usr/local/bin/convert testimage.pdf[0] -flatten testimage.jpg 
```

为什么代码中有 -size 250x350 ？

# php - 将 jquery 翻转状态保存到 php 会话变量中？

> ID：10393611
> 
> 赞同：0
> 
> 时间：2012-05-01T04:39:12.453
> 
> 标签：php, jquery, session, slidetoggle, flip

我正在使用本教程[http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_slide_toggle](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_slide_toggle)

这是没有样式的代码。

```
<script type="text/javascript"> 
$(document).ready(function()
{

$(".flip").click(function()
    {
    var panel = "open";
    $(".panel").slideToggle("slow");
    });
});
</script> 
```

我将如何保存它的状态，所以如果我刷新页面，它将保持打开或关闭状态。我想一个 php 会话将是正确的方法，但我该如何在 javascript 中编写它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:05:48.100

在 JS 中：

```
var readWirite='write'; //or 'read'
$.ajax({
   type: "POST",
   url:  "myPhpFile.php",
   data: "panel="+panel+"&readWrite="+readWrite;
   success: function(msg){
      if(msg == '1'){
        alert('Horay panel saved!');
      } else {
        $('#panelId').html(msg); //Write saved panel back to html 
      }
   }                       
}); 
```

在 myPhpFile.php 中：

```
<?php
   if(!isset($_SESSION)) session_start();
   if(isset($_POST['readWrite']) && isset($_POST['panel'])){
      if($_POST['readWrite'] == 'write'){
          $result = '0'; 
          if($_SESSION['panel'] = $_POST['panel']) $result = '1';
          echo $result;
      } else if($_POST['readWrite'] == 'read') {
          echo $_SESSION['panel'];
      }
   }
?> 
```

# iphone - IB中设置的UITableViewCell backgroundColor，设置为白色时显示为黑色

> ID：10393616
> 
> 赞同：1
> 
> 时间：2012-05-01T04:39:41.623
> 
> 标签：iphone, interface-builder

好的，所以我不明白为什么有时会发生这种情况。当您第一次将 UITableView 拖入 .xib 时，tableView 背景看起来是白色的。然后，如果您将其更改为另一种颜色，并尝试切换回带有斜线的默认颜色，甚至是白色，TableView 将显示为黑色。看图片![在此处输入图像描述](../Images/bbc82e3fe023fffb4f716815e2b5cb4b.png)

表格视图设置为白色。视图控制器的视图设置为白色，但我在 .xib 中看到黑色。但是，当我实际运行该应用程序时，它确实正确显示为白色。只是让我很困扰，我看到这样的黑色，不知道为什么。这种情况会发生在其他人身上吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:10:23.110

是的，这种情况经常发生。它不仅与 UITableViewCell 有关，而且可能发生在所有 UIView 上。

我已经停止使用默认值，而是选择实际颜色，即使它们相同。只有在选择默认时才会给出这种结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T13:52:41.230

将背景颜色设置显式设置为白色可以解决问题。

但是，我很想知道默认设置行为变化的正确答案。

基本上将背景颜色切换回“默认”颜色后，在未知的时间环境下将其设置为黑色，背景颜色不会像第一次拖入故事板时那样切换回默认的白色。

我也找不到与默认行为相关的任何设置。可能是一个小错误？

# .net - 为具有多种资源和多种语言的大型解决方案生成附属程序集

> ID：10393620
> 
> 赞同：1
> 
> 时间：2012-05-01T04:40:13.473
> 
> 标签：.net, localization, resources, msbuild, satellite-assembly

我有一个非常大的解决方案（>100 个项目），它被翻译成 10 多种语言。在构建过程中生成所有必要的附属程序集的最佳方法是什么？

我知道我可以在他们的相关项目中包含本地化的 RESX 文件，但这会给开发人员带来很多麻烦。翻译由一个远程团队管理，他们独立地将它们检查到源代码控制中。这也会在每次添加新语言时产生大量工作，因为每个项目都必须进行修改以包含新的文化特定资源。

是否有任何构建后工具可以搜索特定于文化的 RESX 文件，将它们分组到项目中并一次构建附属程序集？

如果没有，我想我可以使用[DependentUpon](http://msdn.microsoft.com/en-us/library/bb629388.aspx)属性在主资源文件下的 Visual Studio 解决方案资源管理器中隐藏本地化资源。这不能在 Visual Studio UI 中完成，所以我想我必须构建一个工具，将这种模式批量应用于所有项目中的所有资源文件。生成的项目文件如下所示：

```
<ItemGroup>
  <Compile Include="Properties\Resources.Designer.cs">
    <AutoGen>True</AutoGen>
    <DesignTime>True</DesignTime>
    <DependentUpon>Resources.resx</DependentUpon>
  </Compile>
</ItemGroup>
<ItemGroup>
  <EmbeddedResource Include="Properties\Resources.resx">
    <Generator>ResXFileCodeGenerator</Generator>
    <LastGenOutput>Resources.Designer.cs</LastGenOutput>
  </EmbeddedResource>
  <EmbeddedResource Include="Properties\Resources.de.resx">
    <DependentUpon>Resources.resx</DependentUpon>
  </EmbeddedResource>
  <EmbeddedResource Include="Properties\Resources.fr.resx">
    <DependentUpon>Resources.resx</DependentUpon>
  </EmbeddedResource>
</ItemGroup> 
```

嵌套资源在解决方案资源管理器中有一个意外图标，但至少默认情况下它们是隐藏的。

![具有嵌套本地化资源的 Visual Studio 解决方案资源管理器](../Images/d007baf2f89965d88fe8fd969cc03745.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:20:34.060

您可以在 ItemGroup 或单个项目上使用条件将它们从构建中排除。

我建议使用 $(ConfigurationName)。

看这里：

[MSBuild 条件](http://msdn.microsoft.com/en-us/library/7szfhaft.aspx)
[ItemGroup 元素 (MSBuild)](http://msdn.microsoft.com/en-us/library/646dk05y.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:28:35.647

您可以将核心软件开发源代码控制与本地化工作隔离开来。附属程序集实际上可以直接放入您的构建中，因此不需要与您的代码一起构建。

因此，您可以为您的本地化项目设置一个单独的源代码控制系统。它将包含您的基本 .resx 文件的副本（您需要从核心源代码管理中更新）和由本地化人员管理的翻译版本。然后，您可以从那里构建附属程序集，并将它们与您的核心构建相结合，以制作您的多语言本地化构建。

# opengl - OpenGL 的 glClear() 导致 Windows 64 中的访问冲突 (0xc0000005)

> ID：10393623
> 
> 赞同：1
> 
> 时间：2012-05-01T04:40:32.747
> 
> 标签：opengl, 64-bit, go, mingw-w64, cgo

看看这个用 Go 编写的超级简单的小测试用例 OpenGL 程序：

```
package main

import (
    "runtime"
    "./glfw"
    gl "github.com/chsc/gogl/gl21"
)

func onExit (err error) {
    glfw.Terminate()
    if err != nil { panic(err) }
}

func main () {
    runtime.LockOSThread()
    err := glfw.Init()
    if err != nil { panic(err) }
    err = glfw.OpenWindow(1280, 720, 0, 0, 0, 0, 0, 0, glfw.Windowed)
    if err != nil { onExit(err) }
    err = gl.Init()
    if err != nil || gl.GetError() != 0 { onExit(err) }
    for glfw.WindowParam(glfw.Opened) == 1 {
        gl.Viewport(0, 0, 1280, 720)
        gl.ClearColor(1, 0, 0, 1)
        gl.Clear(gl.COLOR_BUFFER_BIT) // THE CRASH
        gl.Begin(gl.TRIANGLES)
        gl.Color3f(1, 0, 0)
        gl.Vertex3f(-1, -1, 0)
        gl.Color3f(0, 1, 0)
        gl.Vertex3f(0, 1, 0)
        gl.Color3f(0, 0, 1)
        gl.Vertex3f(1, -1, 0)
        gl.End()
        glfw.SwapBuffers()
        if glfw.Key(glfw.KeyEsc) == 1 {
            glfw.CloseWindow()
        }
    }
    onExit(nil)
} 
```

这在带有 Go 1.0.1 64 位的 Windows 7 64 位下构建良好。

**如果**您取出（或注释掉）**gl.Clear(gl.COLOR_BUFFER_BIT)**行，它也*可以正常工作*（OpenGL 绘制一个彩虹色的 2D 三角形，直到窗口关闭） 。

 ****但是，只要调用 gl.Clear（无论传递什么参数），它都会崩溃，Windows 会通知我“glfw-win.exe 已停止工作......”并且 Windows 事件查看器为我提供以下错误日志：

```
Faulting application name: glfw-win.exe, version: 0.0.0.0, time stamp: 0x4f9f5ec5
Faulting module name: glfw-win.exe, version: 0.0.0.0, time stamp: 0x4f9f5ec5
Exception code: 0xc0000005
Fault offset: 0x0000000000012883
Faulting process id: 0xd4c
Faulting application start time: 0x01cd274e4c69a3d3
Faulting application path: C:\mytmp\glfw-win\glfw-win.exe
Faulting module path: C:\mytmp\glfw-win\glfw-win.exe
Report Id: 8a5bacc0-9341-11e1-911a-d067e544ad7f 
```

现在，有几个值得注意的点...

1.  glfw包只是一个自定义包，它公开与**github.com/jteeuwen/glfw**完全相同的 API，但在内部使用 LoadLibrary/GetProcAddress 来使用 glfw.dll 而不是编译时 CGO/GCC/LD 链接——因为后者不能可悲的是，它可以在 64 位 Windows 中工作，不确定是 mingw64 还是 gcc 还是 cgo 是罪魁祸首。使用 LoadLibrary/GetProcAddress 调用我的 glfw.dll 的自定义 64 位版本运行良好。显然这里的问题是调用 gl 包，而不是 glfw。

2.  **gl**包确实就是[这个](https://github.com/chsc/gogl/blob/master/gl21/gl21.go)，未经修改。我尝试了一些 LDFLAGS 修改，例如 -m64 -lmingw32 -Wl，/windows/opengl32.dll 等，但没有区别，只要不调用 gl.Clear()，原始工作与修改后的工作一样好，所以我恢复到原来的。当然，稍后我将继续使用 OpenGL 4.2。

3.  使用 Process Explorer，我可以看到我的进程是 64 位的，并且所有加载的 DLL 也是 64 位图像（包括 opengl32.dll 和 glfw.dll）。

4.  “难道是gl21包无法为opengl32.dll导出的glClear()函数获取有效地址？” -- 不太可能：根据[第 2926 行](https://github.com/chsc/gogl/blob/master/gl21/gl21.go#L2926)，如果是这种情况，我对 gl.Init() 的调用将失败。

5.  GPU驱动问题？更不可能了。安装了最新的官方 nVidia Quadro 5010M 驱动程序 296.35。还尝试了“性能驱动程序”，但无论如何似乎是完全相同的驱动程序。根据 nVidia 控制面板的完整 OpenGL 4.2 支持（尽管 opengl32.dll 的日期为 2009 年——无论如何，我目前的目标是 2.1）。此外，“Geeks3D GPU Caps Viewer”和“Shader Toy Mark”中的 OpenGL 着色器运行，正如 GLFW 示例程序particles.exe 一样——它们都使用 glClear()。

6.  使用 gl42 而不是 gl21 时会发生完全相同的问题，所以这也不是原因。

请注意在此示例中所有其他 gl.SomeExportedFunc() 调用如何不会崩溃...

该怎么做，如何进行？

如果这只发生在 gl.Clear() 而没有其他函数，我可以忍受这个——无论如何，我只是用自定义内容渲染全屏四边形——但我在这里测试 Win64 相当早（得到许多 gl42 代码在 Linux64 下工作得很好，现在即将“移植”到 Win64），我担心以后进一步的调用会暴露同样的问题，所以我现在报告这个。我很快就会发现哪些其他电话会受到此影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:47:37.850

如果没有 CGO 生成的存根，就不能调用 C 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T19:34:20.377

Go、GLFW 和 Mingw-w64 的最新版本不再是问题。****

# c# - 如何解析此 XML 并将其存储在 Collection 中

> ID：10393624
> 
> 赞同：0
> 
> 时间：2012-05-01T04:40:35.317
> 
> 标签：c#, xml, xml-parsing

我必须解析它并将其显示在 asp.net 网页中

输出应如下所示 ![像这样的东西](../Images/303de4cbc8ccac5cc4ccaffa50e6b094.png)

## XML

```
 <results id="10157" objectType="ROS" systemName="Constitutional" comments="" systemStatus="" patientPartyId="158641" providerPartyId="145150" patientEncounterId="17137" updatedBy="C144964.U685" updatedDate="2012-04-28T10:13:40" urn="ROS-Constitutional-PatientRosSystemsType-10157" createdDate="" createdBy="" activeFlag="true">
  <symptoms id="10194" systemId="10157" symptomName="Fatigue" updatedBy="C144964.U685" updatedDate="2012-04-28T10:13:19" urn="ROS-Constitutional-Fatigue-PatientSymptomType-10194" createdDate="" createdBy="" activeFlag="true">
    <symptomAttributes id="31393" parentId="10194" className="ObjectAttributeTypeImpl" parentClassName="PatientSymptomType" name="Status" value="C" updatedBy="C144964.U685" updatedDate="2012-04-28T10:13:40" createdBy="" createdDate="" urn="cos-ts-CompanyType-144964-ObjectAttributeType-31393" activeFlag="true"/>
    <symptomAttributes id="31394" parentId="10194" className="ObjectAttributeTypeImpl" parentClassName="PatientSymptomType" name="Comment" value="test123" updatedBy="C144964.U685" updatedDate="2012-04-28T10:13:40" createdBy="" createdDate="" urn="cos-ts-CompanyType-144964-ObjectAttributeType-31394" activeFlag="true"/>
  </symptoms>
  <symptoms id="10195" systemId="10157" symptomName="Fever" updatedBy="C144964.U685" updatedDate="2012-04-28T10:13:19" urn="ROS-Constitutional-Fever-PatientSymptomType-10195" createdDate="" createdBy="" activeFlag="true">
    <symptomAttributes id="31395" parentId="10195" className="ObjectAttributeTypeImpl" parentClassName="PatientSymptomType" name="Status" value="C" updatedBy="C144964.U685" updatedDate="2012-04-28T10:13:40" createdBy="" createdDate="" urn="cos-ts-CompanyType-144964-ObjectAttributeType-31395" activeFlag="true"/>
    <symptomAttributes id="31396" parentId="10195" className="ObjectAttributeTypeImpl" parentClassName="PatientSymptomType" name="Comment" value="testing" updatedBy="C144964.U685" updatedDate="2012-04-28T10:13:40" createdBy="" createdDate="" urn="cos-ts-CompanyType-144964-ObjectAttributeType-31396" activeFlag="true"/>
  </symptoms>
</results>
<results>................</results>
<results>................</results>
........ so on 
```

这是我从服务器获得的 xml。我必须解析它并将其存储在一个集合中，我不知道如何将它存储在一个集合或其他东西中。因为会有多个`results`标签，每个`result`标签都有自己的值和子标签

通常我解析响应并将其存储在一个`List<Dictionary<,>>`如果 XML 是两级的。但在这里，这种方法行不通。

我必须将它存储在一个变量（列表或其他东西）中，并且只有`elements`我必须存储的一些属性。就像`results`=>(id,sytemName,comments) 在`symptoms`=>(id,symptomName) 和`symptomAttributes`=> (name,value)...

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:48:39.653

我会推荐：

1.  为每个“症状”定义一个结构（“记录”）

2.  将您的症状放在“列表”中

3.  我不确定“ROS”或“宪法”是什么意思，但我怀疑您的“症状”列表可能与“患者”有关。而且您还应该有一个用于患者记录的“结构”和一个“列表”（包含“症状”子列表）。

# arrays - 将两个排序数组合并到第三个数组可以在 O(n) 中完成吗？

> ID：10393627
> 
> 赞同：3
> 
> 时间：2012-05-01T04:41:20.267
> 
> 标签：arrays, algorithm, sorting, merge

我正在尝试将排序数组合并到第三个排序数组中，但我看不到任何方法可以做到这一点`O(n)`，只有在`O(n*n)`。我错了吗？有没有办法做到这一点`O(n)`？

**编辑 ：**

其实这个问题有点不同：

我有 2 个排序的跳过列表，我想将它们合并到一个新的排序跳过列表中，而不更改输入（即两个跳过列表）。

我在想：

*   将列表放在两个数组中

*   使用 MergeSort 合并两个数组（这需要`O(n)`运行时）

*   从排序后的数组中构建一个新的跳过列表 .... // 我不确定它的运行时间

有任何想法吗 ？

问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T04:46:13.553

您保持两个循环进行，并在将每个“边”中的值拉入第三个数组时在每个循环之间翻转。如果 arr1 的值小于当前的 arr2，则将 arr1 的值填充到 arr3 中，直到达到相等或“更大”，然后翻转过程并开始从 arr2 中提取值。然后继续来回弹跳，直到两个源数组中都没有任何东西。

结果为 O(n+m)，也就是 O(n)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-01T04:47:52.840

图片两个阵列一个在另一个之上：

list1=[1,2,6,10]

list2=[3,4,10]

如果我们从左边开始往右边走，比较项目，每次我们取最小值并将其放入第三个数组中。从我们从中取出最小项目的列表中，我们移至下一个项目。

```
i=0,j=0
list1[i] < list2[j]
take 1
i+=1
2<3
take 2
i+=1
3<6
take 3
j+=1 
```

ETC..

直到我们得到最终的合并数组 [1,2,3,..]

因为为第三个数组选择每个元素只需要一步，基本上是 O(N)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T04:52:08.310

您可以为已排序的数组使用两个索引变量，为正在排序的数组使用另一个索引变量，全部初始化为 0。现在，虽然您还没有到达任何排序数组的末尾，但比较每个中的两个指向值迭代，取更高（或更低，取决于您的排序）值并增加指向您刚刚使用的值的索引。

最后，浏览您尚未完成的数组，然后将剩余的值粘贴到合并的数组中。

这样，您只需要遍历一次值，即 O(n)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T04:47:03.083

提示：只考虑两个列表的头元素（并在处理时[虚拟地]删除它们）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T09:59:54.493

如果两个输入列表都已排序，那么合并怎么可能是 O(n*n)？自己给的算法（3个步骤）肯定是O(n)而不是O(n*n)。每一步都是O(n)，所以总体来说是O(n)。big-O 由算法的最高阶决定。在做作业之前一定要了解大 O 的概念。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-24T03:10:09.223

是的，它可以做到，实际上它是**O(n + m)**，其中 n 和 m 是第一个和第二个数组的长度，连续。

> 该算法称为一次通过合并

伪代码：

```
i, j, k = 0 // k is index for resulting array
//maximum length of the resulting array can be n+m, 
//so it is always safe to malloc for such a length if you are in C or C++

while(i< len(array1) and j < len(array2) )
     if (array1[i] == array2[j])
           result[k] = array1[i]
           ++i, ++j, ++k
     else if (array1[i] < array2[j])
           result[k] = array1[i]
           ++i, ++k
     else
           result[k] = array2[j] 
           ++j, ++k

//now one array might not be traversed all the way up
if ( i < len(array1) )
      while( i != len(array1))
            result[k] =  array1[i]
            ++i, ++k

else if ( j < len(array2) )
      while( j != len(array2) )
            result[k] = array2[j]
            ++j, ++k 
```

基本上，您同时遍历两个数组，如果长度不同，则不会一直遍历较大的数组，因此您只需将较大数组的所有元素添加到*结果中。*

# c++ - C++ WriteConsoleOutput 显示问题

> ID：10393630
> 
> 赞同：0
> 
> 时间：2012-05-01T04:42:45.033
> 
> 标签：c++, winapi

我已经开始用 C++ 制作一个简单的游戏。

在这个阶段，我将所有字符和属性（图块）存储在一个文件中，然后将其加载到 CHAR_INFO。然后使用 WriteConsoleOutputA 我基本上可以绘制地图/世界。

这一切似乎都可以正常工作，并且没有显示问题。然而，当我开始移动我的角色时，他正在破坏瓷砖。有点难以解释，所以这里有一个小视频。[http://www.youtube.com/watch?v=v5Be5qz30r8](http://www.youtube.com/watch?v=v5Be5qz30r8)。

如您所见，绿色瓷砖没有问题（前景和背景颜色相同）。但是当我靠近灰色瓷砖时，它并没有按预期工作。

main.cpp 片段...

```
int main()
{
    while (0 < 1)
    {

        if (GetAsyncKeyState(VK_UP) || GetAsyncKeyState(0x57))
            player.Move('u');
        if (GetAsyncKeyState(VK_DOWN) || GetAsyncKeyState(0x53))
            player.Move('d');
        if (GetAsyncKeyState(VK_LEFT) || GetAsyncKeyState(0x41))
            player.Move('l');
        if (GetAsyncKeyState(VK_RIGHT) || GetAsyncKeyState(0x44))
            player.Move('r');

        Sleep(100);
    }
} 
```

字符类片段

```
void Character::Move(char d)
{
    COORD oldLoc = loc;
    char walkableTiles[12] = {
        4, 179, 191, 192, 193, 194, 195, 196, 197, 217, 218, 255
    };

    //set character
        switch (d) 
    {
        case 'u' :
            loc.Y--;
            break;
        case 'd':
            loc.Y++;
            break;
        case 'l':
            loc.X--;
            break;
        case 'r':
            loc.X++;
            break;
    }

    //setup the buffer and location of tiles
    CHAR_INFO newTile[1];
    COORD buffSize = {1,1};
    COORD buffPos = {0,0};
    SMALL_RECT newBuffArea = {loc.X, loc.Y, loc.X, loc.Y};
    SMALL_RECT oldBuffArea = {oldLoc.X, oldLoc.Y, oldLoc.X, oldLoc.Y};

    //store newTile info
    ReadConsoleOutputA(outHnd, newTile, buffSize, buffPos, &newBuffArea);
    //check if newTile is valid
    bool valid = 0; // assume not valid
    for (int i=0; i < sizeof(walkableTiles); i++)
    {
        if (newTile[0].Char.AsciiChar == walkableTiles[i])
            valid = 1;
    }

    if (!valid)
    {
        loc = oldLoc;
        return;
    }

    //restore oldTile information
    WriteConsoleOutputA(outHnd, oldTile, buffSize, buffPos, &oldBuffArea);

    //newTile becomes oldTile
    oldTile[0] = newTile[0];

    //get bg of newTile and set character/attributes
    int bg = (newTile[0].Attributes & Blue << BG ) | (newTile[0].Attributes & Red << BG) | (newTile[0].Attributes & Green << BG) | (newTile[0].Attributes & BACKGROUND_INTENSITY);
    newTile[0].Char.AsciiChar = 1;
    newTile[0].Attributes = White | bg;

    //place character on newTile
    WriteConsoleOutputA(outHnd, newTile, buffSize, buffPos, &newBuffArea); 
```

为代码道歉，这是我的第一个游戏。

# entity-framework - EntityFramework 中的 DbContext 对象

> ID：10393634
> 
> 赞同：0
> 
> 时间：2012-05-01T04:43:29.907
> 
> 标签：entity-framework

在业务逻辑层中，我确实有一个包含 8 个步骤的流程。在 DAL 中，我使用的是 EntiyFrameWork 代码优先方法。我创建了一个 Container 对象，它在我必须执行 DBoperaions 的每个方法中都继承了 DBContext like(using(var context=new MyContainer))。对于性能部分，我发现创建它的对象需要时间。我可以在 Bll 中创建该容器的对象一次（在流程开始时）并将其作为参数传递给所有方法，并在完成所有 8 个步骤后在流程结束时处理该对象。任何帮助都将受到高度重视。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:31:03.400

是的，您*应该*为每个工作单元创建一个`ObjectContext`。

您可以将 OC 传递给步骤，也可以只传递所需的部分。例如，如果您只需要查询`MyEntities.Foos`某个步骤，您可以执行以下操作：

```
public class Step4 
{
    public Step4(IQueryable<Foo> foos)
    {
        // ... 
```

...然后做：

```
var step4Result = new Step4(context.Foos).Execute(); 
```

这比通过整个上下文更容易测试。

# google-chrome-extension - Chrome 扩展 - 除了 chrome.devtools.network 之外，还有其他读取响应正文的方法吗？

> ID：10393638
> 
> 赞同：37
> 
> 时间：2012-05-01T04:43:48.190
> 
> 标签：google-chrome-extension, google-chrome-devtools

我想阅读（而不是修改）与 Chrome 扩展中的某些模式匹配的所有请求的响应正文。我目前正在使用[chrome.devtools.network.onRequestFinished](http://developer.chrome.com/extensions/devtools.network.html#event-onRequestFinished)，它为您提供了一个`Request`带有`getContent()`方法的对象。这工作得很好，但当然需要打开 devtools 才能使扩展工作。理想情况下，扩展将是一个弹出窗口，但[chrome.webRequest.onCompleted](http://developer.chrome.com/extensions/webRequest.html#event-onCompleted)似乎无法访问响应正文。有一个[功能请求](http://code.google.com/p/chromium/issues/detail?id=104058)允许 webRequest API*编辑*响应正文 - 但 webRequest 甚至可以读取它们吗？如果没有，是否有任何其他方法可以读取 devtools 扩展之外的响应正文？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-26T14:32:56.830

[您链接](https://code.google.com/p/chromium/issues/detail?id=104058)到的功能请求意味着不支持阅读：

> 不幸的是，这个请求并不是微不足道的。(...) 关于阅读响应正文：从性能的角度来看，这是具有挑战性的。（...）所以总的来说，这并不容易实现......

所以，不，除了 devtools 之外，似乎没有办法让扩展访问网络响应主体。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-06-10T06:51:23.550

这是我所做的

1.  我使用`chrome.webRequest`&`requestBody`来获取帖子请求正文
2.  我使用了`decoder`将正文解析为字符串

这是一个例子

```
chrome.webRequest.onBeforeRequest.addListener(
    function(details) {
        if(details.method == "POST")
        // Use this to decode the body of your post
            var postedString = decodeURIComponent(String.fromCharCode.apply(null,
                                      new Uint8Array(details.requestBody.raw[0].bytes)));
           console.log(postedString)

    },
    {urls: ["<all_urls>"]},
    ["blocking", "requestBody"]
); 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-08-08T08:30:26.223

如果你有这种请求模式，你可以在你的 *background.html*文件中运行类似的东西：

```
 var xhr = new XMLHttpRequest();
    xhr.open("GET", "http://example.com/" + yourStringForPattern, true);
    xhr.onreadystatechange = function() {
    if (xhr.readyState == 4) {
      var body = xhr.responseText;
      // call some function to do something with the html body

    }
   }
   xhr.send(); 
```

# blackberry - 从 Blackberry 将联系信息放入电话簿

> ID：10393653
> 
> 赞同：0
> 
> 时间：2012-05-01T04:46:37.470
> 
> 标签：blackberry, contact, addressbook

在我的应用程序中，我需要将我的应用程序中的联系信息添加到 BlackBerry 的电话簿中。我怎样才能实现它？

我参考了 Java 开发指南[“创建联系人并将其分配给联系人列表”](http://docs.blackberry.com/en/developers/deliverables/11935/Create_contact_existing_list_702477_11.jsp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:28:34.367

创建一个联系人，每次您必须检查它是否支持该字段

```
ContactList contacts = null;
 try {
     contacts = (ContactList) PIM.getInstance().openPIMList( PIM.CONTACT_LIST,
             PIM.READ_WRITE );
 } catch( PIMException e ) {
     // An error occurred
     return;
 }
 Contact contact = contacts.createContact();

 String[] name = new String[ contacts.stringArraySize( Contact.NAME ) ];
 name[ Contact.NAME_GIVEN ] = "John";
 name[ Contact.NAME_FAMILY ] = "Public";

 String[] addr = new String[ contacts.stringArraySize( Contact.ADDR ) ];
 addr[ Contact.ADDR_COUNTRY ] = "USA";
 addr[ Contact.ADDR_LOCALITY ] = "Coolsville";
 addr[ Contact.ADDR_POSTALCODE ] = "91921-1234";
 addr[ Contact.ADDR_STREET ] = "123 Main Street";

 try {
     contact.addString( Contact.NAME_FORMATTED, PIMItem.ATTR_NONE,
             "Mr. John Q. Public, Esq." );
     contact.addStringArray( Contact.NAME, PIMItem.ATTR_NONE, name );
     contact.addStringArray( Contact.ADDR, Contact.ATTR_HOME, addr );
     contact.addString( Contact.TEL, Contact.ATTR_HOME, "613-123-4567" );
     contact.addToCategory( "Friends" );
     contact.addDate( Contact.BIRTHDAY, PIMItem.ATTR_NONE, new Date().getTime() );
     contact.addString( Contact.EMAIL, Contact.ATTR_HOME
             | Contact.ATTR_PREFERRED, "jqpublic@xyz.dom1.com" );

 } catch( UnsupportedFieldException e ) {
     // In this case, we choose not to save the contact at all if any of the
     // fields are not supported on this platform.
     System.out.println( "Contact not saved" );
     return;
 }

 try {
     contact.commit();
 } catch( PIMException e ) {
     // An error occured
 }
 try {
     contacts.close();
 } catch( PIMException e ) {
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:29:48.000

查看[联系文档](http://www.blackberry.com/developers/docs/4.6.0api/javax/microedition/pim/Contact.html)以获取更多信息

# c - 在 epoll 的事件结构中使用 void ptr

> ID：10393657
> 
> 赞同：2
> 
> 时间：2012-05-01T04:47:10.120
> 
> 标签：c, epoll

epoll事件结构中有一个[void指针](http://linux.die.net/man/2/epoll_wait)。我正在为此分配内存并在其他地方使用它。现在当我想把fd从epoll列表中取出时，这个指针会自己释放吗？（逻辑思维链是事件结构在内部维护，可能由内核维护。所以它会释放事件结构和分配给指针的内存）还是我必须显式地释放它？

PS我看到一段代码没有释放分配给指针的内存。我觉得应该明确地释放它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T05:04:23.843

不，指针不会自行释放。就内核而言，它只是一个不知道如何处理的不透明值。它不知道它是指向堆栈、堆、数据段还是其他东西的指针。所以它不可能知道它应该`free()`这样做。

基本规则是，除非文档明确说明，否则您有责任`free`记住您的任何记忆`malloc`。因此，当您从 epoll 列表中删除文件描述符时，您还需要指向您编辑`free`的相应指针。`malloc`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T04:59:21.847

我以前没有使用`epoll`过，但我认为你必须释放的一个非常有力的论据是，它`epoll_data`是一个联合，所以任何其他代码都无法释放指针指向的任何东西。

# html - 在 Facebook 的“喜欢”按钮周围放置阴影框，使其看起来居中

> ID：10393659
> 
> 赞同：1
> 
> 时间：2012-05-01T04:47:29.087
> 
> 标签：html, facebook-like

我的网站上有一个 Facebook 赞按钮。然而，该网站主要使用以页面为中心的内容，并且该按钮顽固地左对齐。我在按钮上设置了一个自定义宽度以使其或多或少居中，但宽度当然会发生变化，有时标称宽度包含或多或少的空白区域。这使它看起来没有居中。

我认为如果我可以将整个 450px 宽的任意高度（如果喜欢它的人的个人资料照片出现时发生变化）区域进行着色，它看起来会更好并且感觉不那么偏离中心。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:50:23.467

我只是在按钮周围放了一个表格元素：

```
<table bgcolor="DDDDDD" border="1"><tr><th>
<!--Facebook like button stuff goes here-->
</th></tr></table> 
```

我最终只是在它周围留下了一个边框，甚至没有使用 bgcolor 属性。我猜 bgcolor 已被弃用并且使用 html 表格是不好的形式，并且可能有一种更性感的 CSS 解决方案，但这完成了工作。

另一个可能更好的选择，也是我在生产站点所做的，是使用 AddThis 框和一点 css 来设置 addthis div 的宽度，然后将每一侧的边距设置为自动（因此相等，居中分）。

# javascript - 如何将变量添加到 jQuery 中的 href 选择器？

> ID：10393667
> 
> 赞同：1
> 
> 时间：2012-05-01T04:48:33.610
> 
> 标签：javascript, jquery, coffeescript

我正在尝试将选定的课程添加到 ruby​​ on rails 的帖子中。

当我插入`loc`查询选择器时，即使给出正确的 url，`a[href`它也不起作用。`loc`

```
$(document).ready ->
    jQuery ->
        loc = location.href.substring(7)
        loc = loc.substring(loc.indexOf("/"))
        $('a[href$="posts?page=6"]').addClass("selected"); 
```

我想把 loc 放到选择器中，像这样 `$('a[href$=""+loc]').addClass("selected");`

但它没有应用选定的类。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T04:52:47.463

CoffeeScript 有字符串插值，所以你可以这样做：

```
$("a[href$='#{loc}']").addClass("selected") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T05:01:42.407

这是基本的 JavaScript 字符串连接：

```
var loc = "6";
'a[href$=""+loc]'    //-> 'a[href$=""+loc]'  oops
'a[href$="'+loc+'"]' //-> 'a[href$="6"]'     yay! 
```

# magento - “处理您的订单时出错。请联系我们或稍后再试。” magento上的错误

> ID：10393670
> 
> 赞同：0
> 
> 时间：2012-05-01T04:48:55.897
> 
> 标签：magento, magento-1.6

我正在使用 magento 开发一个网站，出于某种原因，当我尝试结帐时收到此错误和电子邮件。

**错误 ：**

“处理您的订单时出错。请联系我们或稍后再试。”

**电子邮件**

```
Payment transaction failed.

Reason
Image is not a PNG

Checkout Type
onepage

Customer:
xxx

Items
Gift Certificate x 2 AUD 10
test product x 2 AUD 25
Gift Certificate x 1 AUD 10
test product x 2 AUD 25
test product x 1 AUD 25

Total:
AUD 155

Billing Address:
abhinab kayastha
ghj
gjhghj
g
jhgjhg, 7897
Togo
T: 234

Shipping Address:
abhinab kayastha
ghj
gjhghj
g
jhgjhg, 7897
Togo
T: 234

Shipping Method:
Free Shipping

Payment Method:
Check / Money order

Date & Time:
May 1, 2012 2:47:40 PM 
```

谢谢抗体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:14:16.943

这听起来像是在创建 PDF 文件（可能是订购 PDF）时出现问题。

抛出错误是因为在 PDF 创建的某个时刻 Magento 试图包含一个`.png`文件，该文件在其前三个字节中*没有*通常的签名（就像“真实”文件一样）。`PNG``.png`

见`lib/Zend/Pdf/Resource/Image/Png.php`。

检查您的`var/log/exception.log`或设置

```
Mage::setIsDeveloperMode(true);
ini_set('display_errors', 1); 
```

在您`index.php`获得异常跟踪，这应该可以帮助您确定导致错误的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T02:32:45.120

在配置 -> 销售 -> 发票和装箱单设计下上传了有效的 png 文件

并且工作正常！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T12:32:37.717

由于 memory_limit 过低而发生此错误，在根目录中增加 memory_limit 或存储 .htaccess 文件在 .htaccess 文件中添加以下行。

```
## adjust memory limit
php_value memory_limit 256M 
```

# python - 在 Ubuntu 上使用 Python 3.2 的 rsvg

> ID：10393675
> 
> 赞同：7
> 
> 时间：2012-05-01T04:50:07.253
> 
> 标签：python, svg, python-3.x, cairo, rsvg

我正在尝试在 Python 3.2 中使用 rsvg，但我不断收到导入错误。我已经安装了所有的 librsvg 包和 cairo。我在网上找不到任何关于要安装什么才能让它工作的东西。我确实听说 rsvg 模块自 2005 年以来一直没有更新，所以它只是与 Python 3.2 不兼容，还是我可以尝试安装其他东西？或者，如果 rsvg 不起作用，是否有人对通过 Python 显示 SVG 文件的简单方法有任何建议（基本上只是显示图像）？

编辑：我得到的错误是：'ImportError：没有名为 rsvg 的模块'

此错误未在 python2 中显示

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-02T16:27:44.080

我在试图弄清楚如何做到这一点时遇到了很多困难。我希望其他人找到这个答案并为自己节省很多时间！

对于 Python 3，最初用 C 编写的几个库（包括[GTK](http://www.gtk.org/)、[Clutter](http://blogs.gnome.org/clutter/)和[librsvg](https://wiki.gnome.org/action/show/Projects/LibRsvg)）的 Python 语言绑定已被[GObject 自省](https://wiki.gnome.org/action/show/Projects/GObjectIntrospection)库所取代，后者是从 C“对象”动态生成 Python 对象的 Python 代码。

为了`librsvg`在 Python 3 上使用，首先安装必要的 GObject 自省库（除了 Python 3 Cairo 库）。例如，在 Ubuntu 13.10 上：

```
sudo apt-get install gir1.2-rsvg-2.0 python3-cairo python-gi-cairo python3-gi 
```

然后用下面的代码测试一下。

```
#!/usr/bin/env python3                                                          

# `gi.repository` is a special Python package that dynamically generates objects
import gi
gi.require_version('Rsvg', '2.0')
from gi.repository import Rsvg
import cairo

INPUTFILE = 'tiger.svg'

if __name__ == '__main__':
    # create the cairo context                                                  
    surface = cairo.SVGSurface('myoutput.svg', 580, 530)
    context = cairo.Context(surface)

    # use rsvg to render the cairo context                                      
    handle = Rsvg.Handle()
    svg = handle.new_from_file(INPUTFILE)
    svg.render_cairo(context) 
```

为了在您的项目中实现这一点，

1.  更改`cairo.SVGSurface`为您要绘制的任何表面，并且
2.  将 的值修改为`INPUTFILE`您要渲染的 SVG 文件的名称。

# c++ - 运行exe时如何隐藏窗口

> ID：10393682
> 
> 赞同：-4
> 
> 时间：2012-05-01T04:50:42.130
> 
> 标签：c++, winapi, pipe

我有这个

```
static std::string exec(char* cmd) {
            FILE* pipe = _popen(cmd, "r");
            if (!pipe) return "ERROR -22";
            char buffer[128];
            std::string result = "";
            while(!feof(pipe)) {
                if(fgets(buffer, 128, pipe) != NULL)
                        result += buffer;
            }
            _pclose(pipe);
            return result; 
```

}

但我遇到的问题是我想隐藏午餐的程序我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:14:15.307

正如 Hans Passant 在评论中提到的那样，您必须使用[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)来生成子进程而不是`_popen`，因为`_popen`您无法控制窗口创建过程。

要隐藏控制台窗口，请使用参数的[`CREATE_NO_WINDOW`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863%28v=vs.85%29.aspx)进程创建标志`dwCreationFlags`。

为了捕获进程的输出，您需要为其标准输出流创建一个管道，使用[`CreatePipe`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365152%28v=vs.85%29.aspx). 将该管道句柄分配给您传入`hStdOutput`的结构的成员`STARTUPINFO`，并确保`STARTF_USESTDHANDLES`在启动信息中设置标志，`dwFlags`以便它知道该成员是有效的。然后，要读取数据，您只需[`ReadFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx)在管道句柄上使用。

Hans 还提供了一个使用子进程创建管道的好示例的链接[，](http://msdn.microsoft.com/en-us/library/ms682499.aspx)尽管该示例比您需要做的更多——它为所有三个流（stdin、stdout 和 stderr）创建管道，而您只需要捕获标准输出。

# c# - 包含不同类型的阻塞集合而不进行强制转换的字典

> ID：10393683
> 
> 赞同：2
> 
> 时间：2012-05-01T04:51:12.150
> 
> 标签：c#, collections, types, interface, blockingcollection

我`MyDict<Type, BlockingCollection<"differentTypes">`可以通过规避任何强制转换从而防止使用对象或动态类型的接口来设置字典吗？

我想使用它的原因是因为我想在运行时初始化不同类型的阻塞集合，因为传入的对象是不同的类型，然后我想将这些传入的对象添加到类型匹配的阻塞集合中。我还想稍后访问 BlockingCollection 中的对象而不必强制转换。Blocking 集合的必要类型在包装类的实例化时是已知的。传入对象的类型仅在运行时已知。传入的对象类型永远不会与类实例化时已知的类型不同。我想从匹配的 BlockingCollection 中检索的对象的类型也仅在运行时才知道。有什么方法可以设置它而无需投射？

我浏览了许多相关问题，但没有找到此处描述的完全相同的规格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:12:07.117

最终，“不同类型”意味着要么`object`，要么是一个通用的基类/接口。如果这些类型是值类型，那么它们必须被装箱和拆箱（尽管您指出这些是类对象，所以这不适用 - 只有`struct`s 被装箱/拆箱）。所以剩下一些演员表 - 演员表非常快：我不会太担心它的影响。

当然，如果“不同类型”（一些通用接口等）之间存在一些共性，那么您可能无需强制转换就可以使用该通用接口。

# django - 扩展标签的默认内容 - django

> ID：10393689
> 
> 赞同：0
> 
> 时间：2012-05-01T04:51:48.230
> 
> 标签：django, django-templates

有什么方法可以为块设置默认内容吗？

可以这样工作的东西：

```
if extended:
   show content from template extending it
else:
   show this default content 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:22:41.463

你可以用普通的[`Template Inheritance`](https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance)

在父（基础）模板中定义一个块作为默认数据的容器。

现在，当你扩展这个模板时，你可以决定用这个块做什么。如果您不覆盖该块，则会显示默认数据。否则，将显示您继承的模板中的块数据。

最后`{{ block.super }}`，您可以选择混合基础模板和继承模板的内容：

> 如果您想添加到父块的内容而不是完全覆盖它，这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:12:37.940

检查 django/template/defaulttags.py 中内置标签的实现，例如`autoescape`

```
# in autoescape()
# get content from current autoecape to pairing endautoescape
nodelist = parser.parse(('endautoescape',))

# in AutoEsacpeControlNode.render()
# render inner content
output = self.nodelist.render(context) 
```

因此，您在自定义标签中编写如下内容

```
def render(self, context):
    ...
    if extend:
        return default_content
    else:
        return self.nodelist.render(context) 
```

通常`if... else`也可以解决问题......：

```
{% if extended %}
...
{% else %}
{{ default }}
{% endif %} 
```

# java - 是否可以在 Java 中交换两个变量？

> ID：10393690
> 
> 赞同：29
> 
> 时间：2012-05-01T04:51:54.770
> 
> 标签：java

> **可能重复：**
> [是否可以用 Java 编写交换方法？](https://stackoverflow.com/questions/1363186/is-it-possible-to-write-swap-method-in-java)

给定两个值 x 和 y，我想将它们传递给另一个函数，交换它们的值并查看结果。这在Java中可能吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-01T05:08:51.157

不适用于原始类型（`int`, `long`,`char`等）。Java 按值传递内容，这意味着您的函数传递的变量是原始变量的副本，您对副本所做的任何更改都不会影响原始变量。

```
void swap(int a, int b)
{
    int temp = a;
    a = b;
    b = temp;
    // a and b are copies of the original values.
    // The changes we made here won't be visible to the caller.
} 
```

现在，对象有点不同，因为对象变量的“值”实际上是对对象的引用——复制引用使其指向完全相同的对象。

```
class IntHolder { public int value = 0; }

void swap(IntHolder a, IntHolder b)
{
    // Although a and b are copies, they are copies *of a reference*.
    // That means they point at the same object as in the caller,
    // and changes made to the object will be visible in both places.
    int temp = a.value;
    a.value = b.value;
    b.value = temp;
} 
```

限制是，您仍然不能以调用者可以看到的任何方式修改`a`or`b`本身的值（也就是说，您不能将它们指向不同的对象）。但是您可以交换它们引用的对象的内容。

顺便说一句，从 OOP 的角度来看，上述内容相当可怕。这只是一个例子。不要这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T05:09:04.683

我在这里会变得非常烦人和迂腐，因为“值”这个词在 Java 中具有非常特定的含义，人们通常并不经常理解，尤其是当变量包含对对象的引用时。

我将假设问题要求这种行为：

```
x = initialValueForX;
y = initialValueForY;
swap(x, y);
// x now holds initialValueForY;
// y now holds initialValueForX; 
```

这是不可能的，因为 Java 按值将所有参数传递给方法。您永远不能以这种方式更改存储在其中的实际`x`值`y`。

但是，如果并保持对对象的引用，您*可以*更改两个对象的属性，以使打印的值看起来像彼此的初始值：`x``y`

```
x = initialValueForX;
y = initialValueForY;
swap(x, y);
System.out.println(x);  prints what looks like initialValueForY
System.out.println(y);  prints what looks like initialValueForX 
```

如果您对价值的理解是对象的样子，而不是对象的身份，则此方法有效。通常，这是可以接受的。

（**本打算在这里举一个很好的例子，但 cHao 已经这样做了。另外，其他人指出这是一个重复的问题。**）

# java - 将图像旋转回其原始状态

> ID：10393693
> 
> 赞同：1
> 
> 时间：2012-05-01T04:52:08.923
> 
> 标签：java, image, image-processing, trigonometry, image-rotation

我有一个程序需要拍摄由 7x10 网格的 iphone（或任何一种像样的相机）拍摄的照片，边缘有厚厚的黑色边框。该图像可以向右或向左旋转接收（无需担心歪斜）。我已经有了原始状态的网格图像，但是我需要获取正在拍摄的图片并将其旋转到“完美/原始”状态。

**想法 1：性能狂/糟糕的结果**

阈值我收到的图片和我已经拥有的完美网格图像。比较每个像素0旋转，得到总分，保存。这样做将增量图像旋转 1 到 359。最低分数是我们需要将图片恢复到其原始状态的旋转。

**想法2：仍然不确定如何去做**

阈值我收到的图片和我已经拥有的完美网格图像。画一条线垂直和水平穿过图片的中心。根据垂直和水平线穿过的黑色像素数找到旋转。这将需要某种我不太理解的三角学。

有没有人有任何其他的想法让这个工作？

任何帮助我指出正确的方向将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T22:08:59.460

不要画一条水平线和一条垂直线，而是画两条水平线（比如，每条线都在图片的三分之一处）。只看这些线的左半部分，计算每条 (`a1`和`a2`) 的路径上有多少黑色像素。您还必须跟踪两条红线之间的距离，即像素数`d`。

![问题图，据我了解](../Images/22c50b0e8760465daf284b43af325eab.png)

使用上图中的这个符号，您想要的角度是：

`alpha=atan2((a2-a1),d)`

逆时针旋转`alpha`将使图片的白色部分正确对齐。

# java - 在抽象类的方法体中引用抽象类的子类的静态字段

> ID：10393699
> 
> 赞同：1
> 
> 时间：2012-05-01T04:52:49.513
> 
> 标签：java

鉴于以下，在伪代码中

```
abstract public class Bug {
    private static int BREEDTIME;

    public void breed() {
    if (this.age % this.BREEDTIME) {
        world.setAt(new this.class(newX, newY, this.world);
    }
    }
}

public class Ant extends Bug {
    private static int BREEDTIME = 3;
}

public class Doodlebug extends Bug {
    private static int BREEDTIME = 8;
} 
```

有没有办法定义品种（）方法，使其取决于调用它的任何子类的 BREEDTIME ？保证每个子类`bug`都初始化了 BREEDTIME。

此外，蚂蚁应该繁殖其他蚂蚁，因此在breed() 中调用的构造函数必须是调用breed() 的子类类型的构造函数。

我在这里吠错树了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T05:03:23.747

我会使用抽象方法来做到这一点。在您的超类中将 getBreedTime() 定义为抽象，然后在每个子类中实现它以返回适当的常量。

使用这样的静态字段，您无法真正做您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:09:56.163

不能这样做。静态字段也是继承的。只需删除 static 关键字。如果您不想加倍整数，那么您可以创建抽象方法来获取时间或创建枚举：

```
abstract class Bug {
    private int age;
    public void breed() {
        if (this.age % BREEDTIME.valueOf(this.getClass().getName()).getTime() == 0) {
        }
    }
}

class Ant extends Bug {
}

class Doodlebug extends Bug {
}

enum BREEDTIME {
    Ant(3),
    Doodlebug(8);

    private BREEDTIME(int time) {
        this.time = time;
    }

    public int getTime() {
        return time;
    }

    private int time;
} 
```

# iphone - 如何创建一个 NSManagedObject

> ID：10393710
> 
> 赞同：1
> 
> 时间：2012-05-01T04:54:13.887
> 
> 标签：iphone, ios, core-data, nsmanagedobject

我目前正在像这样阅读我的核心数据

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
                    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Manuz" inManagedObjectContext:__managedObjectContext];
                    [fetchRequest setEntity:entity];
                    NSArray *fetchedObjects = [__managedObjectContext executeFetchRequest:fetchRequest error:nil];
                    NSManagedObject *myinfo = [NSManagedObject alloc]
                    for (NSManagedObject *info in fetchedObjects) {
                        [self startTheParsingProcess:[info valueForKey:@"manu"]];
                    } 
```

我的 for 语句有一些问题，它执行了好几次，我不确定它为什么要这样做.. 想想我真的不需要它..

我希望有一个替代解决方案，我只需初始化 NSManagedObject，然后将其添加到我在声明中执行的方法调用中......

所以我猜是这样的

```
NSManagedObject *info = [[NSManagedObject alloc] init]; //this is obviously wrong.. 
[self startTheParsingProcess:[info valueForKey:@"manu"]]; 
```

任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:11:41.660

不要使用 alloc & init 创建 NSManagedObject。如果要创建实体“Manuz”的实例，可以通过将新的 Manuz 对象插入托管对象上下文来实现。

```
NSManagedObject *newManuz = [NSEntityDescription insertNewObjectForEntityForName:@"Manuz" inManagedObjectContext:context]; 
```

# asp.net - RadListBox - 无法让它工作

> ID：10393714
> 
> 赞同：0
> 
> 时间：2012-05-01T04:54:53.777
> 
> 标签：asp.net, telerik, radlistbox

这已经困扰了我一个小时。我从 Telerik Controls 开始，我可能错过了几个步骤，但下面的代码试图通过客户端脚本找出 selectedItem：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="TestRadListBox.aspx.cs" Inherits="TestRadListBox" %>

<%@ Register TagPrefix="telerik" Namespace="Telerik.Web.UI" Assembly="Telerik.Web.UI" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript" src="javascript/jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
        function clickMe() {
            var rlb = $('#<%# rlbTemp.ClientID %>');
            alert('rlb = ' + rlb + '; rlb.get_selectedItem = ' + rlb.get_selectedItem);

        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <telerik:RadScriptManager runat="server" ID="RadScriptManager1" />
        <div>
            <telerik:RadListBox runat="server" ID="rlbTemp"></telerik:RadListBox>

            <input type="button" value="Click Me" onclick="clickMe();"/>
        </div>
    </form>
</body>
</html> 
```

我遇到的问题是函数 get_selectedItem 无处可寻。基本上，我怎样才能参考它？我尝试查看是否有我错过的参考，但似乎 radscriptmanager 应该足够了，但是，当我查看它所公开的内容时，其中没有 get_selectedItem。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:02:38.720

尝试用以下代码替换您的 JSCode：

```
function clickMe() {

    var rlb = $find('<%= rlbTemp.ClientID %>');
    alert('rlb = ' + rlb + '; rlb.get_selectedItem = ' + rlb.get_selectedItem);

} 
```

# ruby-on-rails - receiver_id 不保存 - rails 消息传递

> ID：10393715
> 
> 赞同：0
> 
> 时间：2012-05-01T04:54:55.773
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在我的应用程序中实现我自己的用户消息传递功能，但我很难保留`receiver_id`.

用户型号：

```
class User < ActiveRecord::Base
    has_many :tickets
    has_many :sent_messages, :class_name => 'Message', :foreign_key => 'sender_id', :dependent => :destroy
    has_many :received_messages, :class_name => 'Message', :foreign_key => 'receiver_id', :dependent => :destroy
end 
```

消息模型：

```
class Message < ActiveRecord::Base
    belongs_to :sender, :class_name => 'User', :foreign_key => 'sender_id'
    belongs_to :receiver, :class_name => 'User', :foreign_key => 'receiver_id'
end 
```

消息控制器：

```
def new
    @user = User.find( params[:user_id] )
    @message = Message.new( 
      :receiver => @user )
end

def create
    @message = current_user.sent_messages.create( params[:message] )
    redirect_to( tickets_path, :message => 'Message has been sent.' )
end 
```

`receiver_id`在数据库中保持为空。

谢谢您的帮助！

**编辑**

此处的路由问题 -[票证有可以发送消息的用户 - rails 消息传递](https://stackoverflow.com/questions/10393768/ticket-has-users-that-can-send-messages-rails-messaging)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:05:34.047

HTTP 是无状态的，因此每个请求对它之前的请求一无所知。因此，在控制器中调用时设置属性`Message.new`并不会单独传递给`create`请求——您需要有一个包含它的隐藏表单字段。假设您正在使用`form_for`，它会是这样的：

```
<%= f.hidden_field :receiver_id %> 
```

# css - css3 nth-child 特异性

> ID：10393718
> 
> 赞同：1
> 
> 时间：2012-05-01T04:55:39.987
> 
> 标签：css, css-selectors, css-specificity

为什么这两个不相等？第一个显示绿色行，而第二个没有。唯一的区别在于 html c 此外，nth-child 选择器的特殊性是什么？

```
<!DOCTYPE html>
<html>
    <head>
        <title>Stripe Test</title>
        <style type='text/css'>
            tr:nth-child(2n+1)
            {
                background-color: red;
            }
            tr.c
            {
                background-color: green;
            }
        </style>
    </head>
    <body>
        <table class='stripe'>
            <tr class='c'>
                <td>one</td>
            </tr>
            <tr>
                <td>two</td>
            </tr>
            <tr>
                <td>three</td>
            </tr>
        </table>
    </body>
</html> 
```

-对-

```
<!DOCTYPE html>
<html>
    <head>
        <title>Stripe Test</title>
        <style type='text/css'>
            tr:nth-child(2n+1)
            {
                background-color: red;
            }
            tr .c
            {
                background-color: green;
            }
        </style>
    </head>
    <body>
        <table class='stripe'>
            <tr class='c'>
                <td>one</td>
            </tr>
            <tr>
                <td>two</td>
            </tr>
            <tr>
                <td>three</td>
            </tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:58:45.123

第二个是完全不同的选择器。`tr .c`中间有一个空格会查找类名为“c”且具有祖先元素的`<tr>`元素。第一个`tr.c`查找`<tr>`具有类名“c”的元素。

这与特定性无关，而是您对 CSS 的理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T04:59:15.413

`tr.c`（无空格）` 是 c 类的表行。

`tr .c`（带空格）是一个表格行，后跟一些其他未指定的 c 类标签。

该空间意味着父/子关系。由于您已经在 tr 标签本身上设置了**类**`c`，因此在 tr 下方没有具有类的子级。**`tr``c`**

 *** * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T05:02:29.187

考虑改用 :nth-child(odd) ，还要注意 IE 根本不喜欢它。**

# google-chrome-extension - 非常简单的用户验证

> ID：10393719
> 
> 赞同：6
> 
> 时间：2012-05-01T04:55:46.233
> 
> 标签：google-chrome-extension

我正在制作一个应用程序，我计划让它发生一些云，但我不想创建一个用户数据库并且让用户需要记住他们的用户名和密码。

由于它将通过 chrome 应用商店分发，因此基本上可以保证用户将拥有一个 google 帐户。我想做的就是：

1.  通过 google 帐户的东西获取用户的电子邮件。如果我通过了那里，那么他们的电子邮件就是我获取该用户数据所需的所有身份验证。

2.  如果我最终将应用程序放在 chrome 浏览器以外的其他东西上，我只会让用户使用他们的电子邮件请求验证链接，然后我会向他们发送该帐户的验证码，他们将验证码放入应用程序，它把它作为一个经过验证的用户，所以这也是安全和简单的。

编辑：我正在调查这个。到目前为止，我有：

OAuth 2 谷歌 API

但是我有一个问题，我不知道在 Google API 中将什么设置为我的 javascript 来源，并且在国外没有太多关于此的信息。如果有人能告诉我我需要为 chrome 扩展设置哪些 javascript 来源以访问 google api，那将是一个很大的帮助。

PS：感谢投票，这就是我喜欢使用堆栈交换的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:03:29.623

嗯，我认为这被否决的唯一原因是这个问题可能已经在网站的某个地方被问到了（但我会帮助你并给予 1up）。

所以你想要使用谷歌 OpenID。您必须向 Google 注册您的应用程序，以便他们可以为您的应用程序提供 OAuth2 令牌。我没有用谷歌做到这一点，而是用其他服务，这很容易，只需四处搜索。

在 chrome 扩展中为您的应用程序获取 OAuth2 方面 - 这可能会很痛苦，因为扩展是沙盒的，而且 Google 的示例使用 OAuth 而不是 OAuth2。

这是我在 GitHub 上托管的解决方案 - 我也在我的扩展 GitHub 存储库中使用它：

[https://github.com/jjNford/oauth2-chrome-extension](https://github.com/jjNford/oauth2-chrome-extension)

希望这在某种程度上有所帮助。不要对 StackOverflow 感到气馁，它是一个很好的资源，有许多伟大的贡献者。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:24:31.450

当我正在追踪一个相关问题时，我也不得不投票给你，所以这就是我发现的可能有帮助的内容。

根据这些指示 - [http://code.google.com/p/google-api-javascript-client/wiki/Authentication](http://code.google.com/p/google-api-javascript-client/wiki/Authentication) - “在“授权的 JavaScript 来源”框中，输入您网站的协议和域。这应该是协议（http:// 或 https://），后跟任何可选的子域，后跟您的域名，并且没有尾部斜杠。域名后面什么都没有。

这可以防止某些类型的安全攻击，请参阅：[http](http://en.wikipedia.org/wiki/Same_origin_policy) ://en.wikipedia.org/wiki/Same_origin_policy 。

我发现这里有一些相关的问题可能会有所帮助： [Problems with Google Picker API and selection Google Drive items](https://stackoverflow.com/questions/10867185/problems-with-google-picker-api-and-selecting-google-drive-items) and [google apis console 'Javascript origins'](https://stackoverflow.com/questions/7357898/google-apis-console-javascript-origins)。

现在说了这么多，我仍在尝试为我的一个作为 Google 站点托管的站点找出哪些值应该放在那里，因为没有一个明显的值对我有用。因此，我在此解释中可能遗漏了一些微妙之处。

# android - 如何恢复购买并获取产品是否为购买？

> ID：10393720
> 
> 赞同：0
> 
> 时间：2012-05-01T04:55:51.890
> 
> 标签：android, in-app-purchase, in-app-billing

我已经在我的 android 应用程序中实现了应用程序内计费。我使用它的代码如下：

创建方法：

```
startService(new Intent(this, BillingService.class));
    System.out.println(" - - - - CHECK FOR THE PURCHASE PRODUCT - - - - ");
    BillingHelper.setCompletedHandler(mTransactionHandler); 
```

处理程序是：

```
 public Handler mTransactionHandler = new Handler(){
    public void handleMessage(android.os.Message msg) {
        System.out.println("SEE FOR THE PRODUCTS PURCHASE OR NOT");

        Log.i(TAG, "Transaction complete");
        Log.i(TAG, "Transaction status: "+BillingHelper.latestPurchase.purchaseState);
        Log.i(TAG, "Item purchased is: "+BillingHelper.latestPurchase.productId);

        // For Premium Pro Purchase
        if(BillingHelper.latestPurchase.productId == "premium_pro"){
            if(BillingHelper.latestPurchase.isPurchased()){
                System.out.println("START OPENING PREMIUM_PRO_BUY CONTENT");
                myPrefs = getApplicationContext().getSharedPreferences("myPrefs",MODE_WORLD_WRITEABLE);
                prefsEditor = myPrefs.edit();                 
                prefsEditor.putBoolean("PREMIUM_PRO_BUY", true); // value to store                 
                prefsEditor.commit(); 
                PREMIUM_PRO_BUY = true;
                System.out.println("NOW.. . .  PREMIUM_PRO_BUY is as PURCHASED. :-)");
                System.out.println("FINISH TO OPENING BLOCK CONTENT");
                //  showItem();
            }
        }

        // For Feature Upgrade Purchase
        if(BillingHelper.latestPurchase.productId == "feature_upgrade"){
            if(BillingHelper.latestPurchase.isPurchased()){
                System.out.println("START OPENING FEATURE_UPGRADE_BUY CONTENT");
                myPrefs = getApplicationContext().getSharedPreferences("myPrefs",MODE_WORLD_WRITEABLE);
                prefsEditor = myPrefs.edit();                 
                prefsEditor.putBoolean("FEATURE_UPGRADE_BUY", true); // value to store                 
                prefsEditor.commit(); 
                FEATURE_UPGRADE_BUY = true;
                System.out.println("NOW.. . .  FEATURE_UPGRADE_BUY is as PURCHASED. :-)");
                System.out.println("FINISH TO OPENING BLOCK CONTENT");
                //  showItem();
            }
        }

    };
}; 
```

在 Button 点击​​我的代码是：

```
//      CODE TO GET PURCHASED
        if(BillingHelper.isBillingSupported()){

            BillingHelper.requestPurchase(getApplicationContext(), "feature_upgrade"); // MY OWN

        } else {
            Log.i(TAG,"Can't purchase on this device");
            Toast.makeText(getApplicationContext(), "Please check internet and make sure that you have latest GooglePlay App in your Device.", Toast.LENGTH_LONG).show();
        } 
```

现在当我点击恢复购买按钮时，我想看看哪个产品是购买的。那我该怎么办？？

我看过这个 SO Question: [this](https://stackoverflow.com/questions/8465738/android-in-app-billing-restore-transaction)和[this](https://stackoverflow.com/questions/8638665/inapp-purchase-restore-transactions-i-am-not-able-to-figure-the-code-out)。但是没有得到该用户购买的产品和不购买的产品。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:36:29.563

[此页面](http://developer.android.com/guide/market/billing/billing_integrate.html)解释了应用内计费的详细信息，并提供了“地下城”示例应用程序下载。请下载示例应用程序并查看该`mBillingService.restoreTransactions();`功能，很可能它完全符合您的需要。

# installation - 让无线互联网在 Arch Linux 上运行

> ID：10393727
> 
> 赞同：-4
> 
> 时间：2012-05-01T04:57:40.087
> 
> 标签：installation, wireless, archlinux

我浏览了各种维基文章试图弄清楚这一点......

如果有人可以帮助我，我将不胜感激。

我在戴尔灵越 1720 上，我的无线网卡是宽带 43111 (BCM4311)

我没有有线连接，所以我无法获得所需的驱动程序？但是维基文章使它们听起来包括在内？

我对此很陌生，所以......任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:27:39.627

我想你需要： [https ://wiki.archlinux.org/index.php/Broadcom_wireless#broadcom-wl](https://wiki.archlinux.org/index.php/Broadcom_wireless#broadcom-wl)

您将下载驱动程序，复制到 pendrive 或类似的，从 pendrive 复制到您的笔记本电脑，自己编译模块。

# java - 什么时候使用挥发性修饰符？

> ID：10393728
> 
> 赞同：3
> 
> 时间：2012-05-01T04:57:47.910
> 
> 标签：java, volatile

> **可能重复：**
> [你什么时候在 Java 中使用 volatile 关键字？](https://stackoverflow.com/questions/3488703/when-exactly-do-you-use-the-volatile-keyword-in-java)

java中何时以及为什么需要volatile修饰符？

我有兴趣看到 volatile 修改后的原语或对象引用在现实世界中的用法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T05:00:16.250

volatile 修饰符将告诉 JVM 小心并发运行的线程。本质上， volatile 用于指示变量的值将被不同的线程修改。

声明一个 volatile Java 变量意味着：

*   这个变量的值永远不会被缓存到线程本地：所有的读写都将直接进入“主内存”

*   对变量的访问就像它被包含在一个同步块中一样，在其自身上同步。

我们在第二点中说“表现得好像”，因为至少对程序员（并且可能在大多数 JVM 实现中）没有涉及实际的锁定对象。

* * *

*volatile*修饰符告诉编译器，由volatile 修改的变量可能会被程序的其他部分意外更改。其中一种情况涉及多线程程序。

在多线程程序中，有时，两个或多个线程共享同一个实例变量。出于效率考虑，每个线程都可以保留自己的此类共享变量的私有副本。

变量的真实（或主）副本在不同时间更新，例如在输入同步方法时。虽然这种方法效果很好，但有时可能效率低下。在某些情况下，真正重要的是变量的主副本始终反映其当前状态。

为确保这一点，只需将变量指定为 volatile，这会告诉编译器它必须始终使用 volatile 变量的主副本（或者，至少始终使任何私有副本与主副本保持同步，反之亦然） . 此外，对主变量的访问必须按照它们在任何私有副本上执行的精确顺序执行。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-01T05:34:10.473

如果您正在使用多线程编程，那么 volatile 关键字会更有用。当多个线程使用同一个变量时，每个线程都会为该变量拥有自己的本地缓存副本。因此，当它更新值时，它实际上是在本地缓存中更新，而不是在主变量内存中。使用相同变量的另一个线程对另一个线程更改的值一无所知。为了避免这个问题，如果你将一个变量声明为 volatile，那么它就不会被存储在本地缓存中。每当线程更新值时，它都会更新到主内存。因此，其他线程可以访问更新的值。

声明一个变量 volatile 意味着

*   没有缓存维护意味着在主内存中进行的所有更改。
*   对该变量的访问充当同步块，即使它在同步单元中。

例子 -

```
public class Snippet implements Runnable{
volatile int num =0;

public void run(){
    Thread t = Thread.currentThread();
    String name = t.getName();
    if(name.equals("Thread1")){
        num=10;
    }
    else{
        System.out.println("value of num is :"+num);
    }

}
public static void main(String args[]) throws InterruptedException{
    Runnable r = new Snippet();
    Thread t1 = new Thread(r);
    t1.setName("Thread1");
    t1.start();

    Thread.sleep(1000);

    Thread t2 = new Thread(r);
    t2.setName("Thread2");
    t2.start();
}
 } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-01T05:13:11.810

（这个答案假设 Java 5+ - 在此之前，`volatile`有较弱的保证。）

当您想要确保在对字段的写入和随后由单独线程对该字段的读取之间存在内存屏障（也就是正式的“发生前”关系）时，它很有用。同步也可以为您提供这种关系以及其他多线程保证，但它有点慢并且可能会产生同步瓶颈。

一个用例是在并发集合类（如`ConcurrentHashMap`或`LinkedBlockingQueue`）中，结合原子比较和设置（CAS）操作，您可以编写正确的线程安全代码而无需使用`synchronized`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T05:20:18.110

`volatile modifier`告诉volatile`compiler`修改的内容`variable`可能会被程序的其他部分意外更改。**其中一种情况涉及多线程程序。**
在多线程程序中，有时，两个或更多`threads`共享相同的`instance variable`. 出于效率考虑，每个人都`thread`可以保留自己的此类共享变量 ( `in cache`) 的私有副本。的真实（或主）副本 ( `in ram`)`variable`会在不同时间更新，例如在`synchronized method`输入 a 时。
虽然这种方法效果很好，但有时可能效率低下。在某些情况下，真正重要的是变量的主副本始终反映其当前状态。为了确保这一点，只需指定`variable as volatile`，它告诉`compiler`它必须始终使用 a 的主副本`volatile variable`（不会维护缓存）。此外，对主变量的访问必须按照它们在任何私有副本上执行的精确顺序执行。
**前任...**

```
public class snippet1 implements Runnable{
volatile int num =0;

public void run(){
    Thread t = Thread.currentThread();
    String name = t.getName();
    if(name.equals("Thread1")){
        num=10;
    }
    else{
        System.out.println("value of num is :"+num);
    }

}
public static void main(String args[]) throws InterruptedException{
    Runnable r = new snippet1();
    Thread t1 = new Thread(r);
    t1.setName("Thread1");
    t1.start();

    Thread.sleep(1000);

    Thread t2 = new Thread(r);
    t2.setName("Thread2");
    t2.start();
} 
```

}

在上面的示例中，如果您不使用 volatile，则第二个线程的输出可能为 0。
但是如果您将其设置为 volatile，则它可以保证该值应为 10..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T05:33:05.360

第一个问题你得到了很好的答案。第二个：

> 谁能给我它的实时场景

海事组织，你永远不应该变态。多线程应用程序有更好的工具。这么高级的语言居然有这个关键字，有点奇怪。[这](http://blogs.msdn.com/b/ericlippert/archive/2011/06/16/atomicity-volatility-and-immutability-are-different-part-three.aspx)是一本很好的读物（它是关于 C#，但 Java 在这件事上是相似的）。

# iphone - 如何检查 plist 文件中的更新值

> ID：10393731
> 
> 赞同：1
> 
> 时间：2012-05-01T04:57:55.200
> 
> 标签：iphone, xcode, plist

我已经在 NSBundle 中添加了 plist 文件，现在我更新了 plist 文件中的值，但是我找不到检查 NSBundle 中 plist 文件中的值是否更新的方法。有没有办法检查这个？

我想要的是本地数据库检查，这意味着如果我们使用本地数据库，那么我们可以检查文档目录中数据库的更新，以便我们可以验证条目是否完成，就像我想签入 plist 文件一样。

我知道如何从 plist 文件中读取，但我不想编写代码来检查条目，我希望你明白我想说什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T20:18:16.517

好吧，您可以使用**KeyValue Observer**（*只需查看苹果文档*）

**NSKeyValueObserving (KVO)**非正式协议定义了一种机制，允许对象被通知其他对象的指定属性的更改。

您可以观察任何对象属性，包括简单属性、一对一关系和一对多关系。

一对多关系的观察者被告知所做更改的类型——以及哪些对象参与了更改。

# java - 使用 tcp/ip 的 Java 客户端服务器程序

> ID：10393735
> 
> 赞同：1
> 
> 时间：2012-05-01T04:58:51.623
> 
> 标签：java, tcp, client-server

我使用 TCP/IP 流编写客户端服务器 java 程序，我的服务器连接到 oracle 数据库。当客户端请求一些信息时，服务器处理查询，即返回包含一些行的列（比如 5）。我想将整列发送回客户端，我可以发送和接收单行数据，但不能发送多行数据（因为一个表包含很多行，即行）....任何帮助都适用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:03:27.823

您可以将数据库查询结果序列化为不包含换行符的字符串。此外，您可以使用定义明确的数据格式，例如[JSON](http://json.org/)。

我不相信 Oracle 数据库会以字符串表示形式向您的服务器端应用程序返回数据。在您的服务器程序中，您实际上获得了一些数据库对象（可能是 JDBC，如果它是 Java）。你如何把这个对象变成一个字符串取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:45:32.300

您可以填充集合对象并返回该对象

# configuration - 无法在 nginx 中找出位置块

> ID：10393740
> 
> 赞同：7
> 
> 时间：2012-05-01T04:59:53.800
> 
> 标签：configuration, nginx

很难在 nginx 配置中找出位置块。这就是我所拥有的：

```
server {
    listen          80;
    server_name     _;

    access_log      /var/log/nginx/example.com.access_log;
    error_log       /var/log/nginx/example.com.error_log warn;

    root                /var/www/root;
    index               index.php index.htm index.html;
    fastcgi_index       index.php;

    location /wp/ {
        root                /var/www/wordpress;
        index               index.php index.htm index.html;
        fastcgi_index       index.php;
    }

    location ~* \.php$ {
        try_files            $uri =404;
        keepalive_timeout    0;
        fastcgi_param        SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_pass         127.0.0.1:9000;
    }
} 
```

浏览到 / 按预期工作并在 /var/www/root 中显示网站，但如果位置按我认为的那样工作，他们应该浏览到 /wp 应该将我带到 /var/www/wordpress 中的 wordpress 安装。我得到的是：

> 404 未找到
> 
> nginx/0.7.67

如果我将 /var/www/wordpress 目录重新定位到 /var/www/root/wordpress 并浏览到 /wordpress，一切都完美了。

我对位置块做错了什么？

我以前从未配置过 nginx，而且我还是一个完整的网络新手。

我也希望能够为其他应用程序提供更多位置块。这实际上只是在此处发布的一个基本示例。

将 nginx 更新到 Debian Squeeze backports 中的版本。没提升：

> 404 未找到
> 
> nginx/1.1.19

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T08:38:30.910

它不起作用的原因是......

在服务器级别，您拥有“root /var/www/root”。所以基本上，除非特别覆盖，否则每个位置块都会使用它。这是一个很好的做法。

然后，您在“wp”位置块中将其覆盖为“/var/www/wordpress”。但是，php 位置块仍然使用默认值。

现在，当您向物理上位于“/var/www/wordpress/folder_a/file_a.php”的“/wp/folder_a/file_a.php”发出请求时，请求会到达 php 位置块并给出根文件夹对该块处于活动状态的是在“/var/www/root/folder_a/file_a.php”中查找文件。结果，您会得到“404 not found”。

您可以将服务器级别的根指令更改为“/var/www/wordpress”并删除 wp 位置中的覆盖。这将解决该问题，但“/var/www/root”下的 php 脚本将不再起作用。不知道你有没有。

如果你需要在“/var/www/root”和“/var/www/wordpress”下运行php，你需要这样做：

```
server {
    ...
    root                /var/www/root;
    index              index.php index.htm index.html;
    # Keep fastcgi directives together under location
    # so removed fastcgi_index

    # Put keepalive_timeout under 'http' section if possible

    location /wp/ {
        root                /var/www/wordpress;
        # One appearance of 'index' under server block is sufficient
        location ~* \.php$ {
            try_files           $uri =404;
            fastcgi_index      index.php;
            fastcgi_param       SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass         127.0.0.1:9000;
        }
    }

    location ~* \.php$ {
        try_files           $uri =404;
        fastcgi_index      index.php;
        fastcgi_param       SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_pass         127.0.0.1:9000;
    }
} 
```

即在 wp 位置块下嵌套一个重复的 php 位置块。它将继承 wp 的根指令。

为了帮助保持简洁和简化编辑等，您可以将 fastcgi 指令放入单独的文件中，并根据需要将其包含在内。

所以在 /path/fastcgi.params 中，你有：

```
 fastcgi_index      index.php;
    fastcgi_param       SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_pass         127.0.0.1:9000; 
```

然后你的 conf 可以是：

```
server {
    ...
    root                /var/www/root;
    ...
    location /wp/ {
        root                /var/www/wordpress;
        location ~* \.php$ {
            try_files           $uri =404;
            include /path/fastcgi.params;
        }
    }

    location ~* \.php$ {
        try_files           $uri =404;
        include /path/fastcgi.params;
    }
} 
```

这样，如果您需要编辑任何 fastcgi 参数，您只需在一个地方编辑它。

PS。更新你的 nginx 并不能解决这个问题，因为它不是版本问题.. 但无论如何都要更新！

# javascript - 如何计算 Facebook 图形 api 覆盖 offset_y 到像素？

> ID：10393742
> 
> 赞同：3
> 
> 时间：2012-05-01T05:00:00.003
> 
> 标签：javascript, css, facebook, facebook-graph-api

例如，我可以从图形 api 检索 facebook 封面源和 offset_y -

[https://graph.facebook.com/Inna](https://graph.facebook.com/Inna)

我明白了——

```
"cover": {
      "cover_id": "10151356812150381",
      "source": "http://sphotos.xx.fbcdn.net/hphotos-snc7/s720x720/419277_10151356812150381_302056140380_23114100_97822830_n.jpg",
      "offset_y": 54
   } 
```

但是当我查看实际的 facebook 页面时，我看到顶部偏移量是 -135px。那是怎么从54算出来的？

我想在我的网站上显示某人的封面照片，偏移量与 facebook 相同。所以我基本上在做 -

```
<div class="ed-cover">
            <img src=""/>
    </div> 
```

CSS -

```
.ed .ed-cover
{
    height:315px;
    overflow:hidden;
    position:relative;
}

.ed .ed-cover img
{
    width:100%;
    position:absolute;    
} 
```

JS-

```
FB.api(artist, function (data) {
                        $('.ed-cover img').attr('src', data.cover.source).css("top", -1 * data.cover.offset_y);
                    }); 
```

但是这里的“top”属性的 CSS 偏移量是不正确的，因为我返回 54 并且实际偏移量是 -135px；

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T15:44:40.263

这对你真的有用吗？我已经用许多图像（风景和肖像）对其进行了测试，如果你使用 %，位置总是略有不同。这对我很有用：

```
$.fn.positionate_cover = function (offset_y) {
    var cover_w = 850;
    var cover_h = 315;
    var img_w = $(this).width ();
    var img_h = $(this).height ();
    var real_img_h = (cover_w * img_h / img_w) - cover_h;

    $(this).css ({ top: parseInt (real_img_h * offset_y / 100 * -1) + "px" });
};

$(".ed-cover img")
    .attr ("src", data.cover.source)
    .positionate_cover (data.cover.offset_y)
; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T21:57:16.513

是的，我实际上自己找到了答案。facebook发送的偏移量是百分比！

以下工作完美 -

```
 FB.api(artist, function (data) {
                            $('.ed-cover img').attr('src', data.cover.source)
.css("top", (-1 * data.cover.offset_y) + '%');
                        }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T14:13:47.490

我在网上找到了这个 jquery 插件。该插件使用正确的偏移量正确获取图片

这是链接[http://restyr.com/getting-facebook-cover-photo-with-offset-y-using-fbgetcover-jquery-plugin/](http://restyr.com/getting-facebook-cover-photo-with-offset-y-using-fbgetcover-jquery-plugin/)

它看起来像使用偏移量作为百分比

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-23T22:16:47.350

MoXplod，你确定吗？

根据我的经验，偏移量是图像不可见部分的百分比（也就是不适合窗口的部分）。

例如：偏移量 = 51 facebook 封面照片尺寸（网络）= 851X315 缩放图像尺寸 = 851X1135 顶部 = -420px。

所以顶部 = 51% * (1135-315)。

我已经尝试了许多不同尺寸的不同封面照片。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T13:05:38.893

如果只设置 Facebook API 返回的负百分比偏移量，它可能适用于 80% 的情况。然而，获得 100% 正确位置的唯一方法是使用 Claudios 解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T12:55:28.413

关于 php 的一些解决方案我正在使用 PhpThumb_Factory：

```
 private $_cropX = 850;
        private $_cropY = 315;
        private $_origignalHeight;
        private $_origignalWidth;

 $scale = $this->caclScale($cover->cover->source);
        $thumb = \PhpThumb_Factory::create($imagePath);

                            $real_img_y = ($this->_cropX * $this->_origignalHeight / $this->_origignalWidth) - $this->_cropY;

                            $real_img_x = ($this->_cropY * $this->_origignalWidth / $this->_origignalHeight) - $this->_cropX;

                            $offset = $this->_authSession->offset;

                            $offset_x=($real_img_x * $offset['x'] / 100);

                            $offset_y=($real_img_y * $offset['y'] / 100);

                            $thumb->crop($offset_x, $offset_y, $this->_cropX, $this->_cropY);

                            $thumb->save($imagePath);

    private function caclScale($url) {
            $originalFileSizeParams = @exif_read_data($url);
    //            //$originalFileSize = $originalFileSizeParams['FileSize'];
    //            Zend_Debug::dump($originalFileSizeParams);
    //            die();

            $this->_origignalHeight = $originalFileSizeParams['COMPUTED']['Height'];
            $this->_origignalWidth = $originalFileSizeParams['COMPUTED']['Width'];

            if ($this->_origignalWidth < $this->_cropX) {
                $scale = ($this->_cropX * 100) / $this->_origignalWidth;
            } else {
                $scale = 100;
            }
            return $scale;
        } 
```

# android - Android 中的操作栏

> ID：10393744
> 
> 赞同：0
> 
> 时间：2012-05-01T05:00:06.757
> 
> 标签：android, android-actionbar, android-2.2-froyo

我在我的 Android 2.2 版本上安装了 FaceBook apk。当我点击 FB 图标时，我可以看到它有许多漂亮的功能，弹出窗口、幻灯片、图形可供查看。现在，我的任务是在 Android 2.2 上创建类似于 FB 应用程序的某些屏幕。在其中一个屏幕上，在“操作栏”中，我想要一个左侧的图标（我应该点击图标转到下一个屏幕），中间的标题为“杂货店”，然后是退出图标（关闭屏幕）。非常感谢编码。作为Android世界的新手，请帮助我解决这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:06:35.607

考虑使用 ActionBarSherlock 创建一个类似于 Facebook 的 ActionBar，但与较新的 Android 4.0 用户界面指南兼容。

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

话虽如此，请考虑查看[Android 设计](http://developer.android.com/design/index.html)页面。Facebook 应用程序并不是遵循这些准则的最佳示例。通常，ActionBar 左侧的图标应该导航到以前的状态或返回主页。应用程序的标题应在左侧按钮旁边左对齐，右侧应包含操作（按钮等）以及任何溢出菜单。

# php - 关于 mysql 视图、关系和任何其他相关列到列的事情

> ID：10393748
> 
> 赞同：-1
> 
> 时间：2012-05-01T05:00:15.920
> 
> 标签：php, mysql, sql, sql-server, sql-server-2005

伙计们，你能推荐我任何有相似之处的**软件吗？**

**微软的 SQL SERVER**

我想使用 SQL SERVER 的视图部分。**为了清楚起见，**我使用**MYSQL**作为后端，所以我想知道**SQL SERVER**是否有类似的功能用于**MY SQL**

我的意思是这个：

![SQL SERVER 的 MYSQL 视图](../Images/efb6762c1e5dbf4996384ee044d3d8f9.png)

> mysql有这种功能吗？如果是，那是什么？如果没有，sql server 是否可以支持或者可以作为mysql 使用？如何？

**请不要给我链接我想通过很多链接学习。十分感谢大家... ：）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:04:06.813

那不是“SQL Server”。这只是称为 MSSMS 的图形前端 - ms sql server management studio。查看[PHPMyAdmin](http://www.phpmyadmin.net/home_page/index.php)，它是 MySQL 的众多 grpahical 前端之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:00:22.007

请参阅有关 MySQL 的 Visual Query Builder 的此问题的答案：[Visual Query Builder](https://stackoverflow.com/questions/2506610/visual-query-builder)

# jsp - 在 JSP 中创建自定义标记以获取对象

> ID：10393751
> 
> 赞同：1
> 
> 时间：2012-05-01T05:00:44.687
> 
> 标签：jsp, servlets, jsp-tags

我想创建一个自定义标签，它可以检索其`SimpleTagSupport`类发送的对象集合。例如

```
<myTag:collection var="o" id="xx" /> 
```

这里`var="o"`是保存集合的检索对象。我应该迭代它并做一些事情。然后`EL`是用来获取对象的值。让我知道任何显示如何编写`SimpleTagSupport`类的示例代码 - 该`doTag()`方法就足够了，或者我可以找到解决方案的任何链接。

**编辑**
我必须从中获取一个对象`session`并将其传递给一个 java 类以获取`resultSet`包含一个集合的 a。它可以使用脚本（`<% .. %>`）来完成。但我认为这不是一个好习惯。`EL`这就是为什么我要使用and寻求解决方案的原因`Tags`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:25:18.420

您可以按照以下链接链接到带有清晰示例的教程，这将需要 1 小时到 2 小时之间的任何时间，但您会很好地理解 EL 的概念，值得一读。

1.  表达式语言（[PDF](http://courses.coreservlets.com/Course-Materials/pdf/csajsp2/15-Expression-Language.pdf)），您可以直接进入“访问集合”部分
2.  JSP-EL（[书籍章节](http://pdf.coreservlets.com/JSP-EL.pdf)）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:13:27.583

考虑以下代码，我们将其用于一个非常大的项目，如果这是您想要的，我将为它准备解释以及循环的额外代码

```
<td height="30" nowrap  class="label" id="lblHumanTypes" dir="${local["OP_DIRECTION"]}">${descriptionsTable["EditEmHumanCases"]["ddlHumanTypes"]}</td>
                                        <td width="1%">:</td>
                                        <td height="30" style="text-align:${local["ALIGN"]}" colspan="3">
                                            <select  id="ddlHumanTypes" name="ddlHumanTypes" style="width:160px">
                                                <option value="-1">${local["SELECT"]}</option>
                                                <c:forEach var="humanTypes" items="${LK_HUMAN_TYPES}">
                                                    <c:if test="${humanTypes.key ne '1' and humanTypes.key ne '2' and humanTypes.key ne '3' and humanTypes.key ne '4' and param.humanTp eq humanTypes.key}">
                                                        <c:if test="${emHumanCasesView.humanTp eq humanTypes.key}">
                                                            <option value="${humanTypes.key}" selected>${humanTypes.value.humanTpDesc}</option>
                                                        </c:if>
                                                    </c:if>
                                                </c:forEach>
                                            </select>
                                        </td>
                                        <td  id="msgHumanTypes"></td> 
```

这里 LK_HUMAN_TYPES 在部署时从表 oracle 加载一次有一个带有 setter 和 getter 方法的 java 类以及在 jsp 中使用的私有成员

# haskell - 为什么 GHC 不针对“记录选择器中不匹配”异常给出编译时警告？

> ID：10393764
> 
> 赞同：13
> 
> 时间：2012-05-01T05:03:02.657
> 
> 标签：haskell, ghc

当我运行这个错误的代码时......

```
data Person = Adult { pName :: String}
            | Kid   { pName :: String
                    , pAge  :: Int
                    } deriving Show

getAge :: Person -> Int
getAge p = pAge p

getName :: Person -> String
getName p = pName p

main :: IO ()
main = do

  let p1 = Kid "fred" 5
      p2 = Adult "john"
      ps = [p1, p2]

  names = map getName ps
  ages = map getAge ps

  putStrLn $ "names: " ++ show names
  putStrLn $ "ages: " ++ show ages 
```

...我在 ghci 中得到了这个：

```
names: ["fred","john"]

ages: [5,* * * Exception: No match in record selector pAge 
```

我知道如何避免这个错误，但我想知道为什么用“ghc -Wall”编译没有警告我这个问题。是否有其他工具可以帮助我防止此类错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T07:50:52.927

> 是否有 [a] 工具可以帮助我防止此类错误？

不，但可能有。

如您所知，记录语法会自动生成与您定义的属性同名的 getter。因此代码

```
data Person = Adult { pName :: String}
            | Kid   { pName :: String
                    , pAge  :: Int
                    } deriving Show 
```

创建函数`pName :: Person -> String`和`pAge :: Person -> Int`。现在，*假设*Haskell 有子类型。如果是这样，则`Kid`可能是 的子类型`Person`，并且`pAge`可能具有更合适的类型`Kid -> String`。然而，Haskell 没有*子*类型，因此没有`Kid`类型。

现在，鉴于这`Person -> String`是我们可以给予的最具体的类型，为什么不在编译时`pAge`警告它是一个偏函数呢？`pAge`让我通过参考List示例来转移问题

```
data List a = Cons { head :: a, tail :: List a } | Empty 
```

在这个例子中，`head`和`tail`是部分函数：一个非空列表的两个组件，但是（由于 Haskell 缺少子类型）空列表上的无意义访问器。那么，为什么默认没有警告呢？好吧，默认情况下，您知道自己编写的代码。如果你使用 编译器不会提供警告`unsafePerformIO`，因为你是这里的程序员，你应该负责任地使用这些东西。

所以**tl;博士**：如果你想要这里的警告：

```
getAge :: Person -> Int
getAge p = pAge p 
```

那么你就不走运了，因为类型系统没有足够的信息来推断这是一个问题。

如果你想要这里的警告：

```
data Person = Adult | Kid { pAge :: Int } 
```

那么我确信实现起来很简单：只需检查给定字段是否存在于某些构造函数中，但不存在于其他构造函数中。但我不认为这个警告对每个人都有广泛的用处。有些人可能会抱怨这只是噪音。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T11:15:10.150

[如果http://community.haskell.org/~ndm/catch/](http://community.haskell.org/~ndm/catch/)没有收到这个，我会感到惊讶。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-06T01:53:07.720

从 8.4 开始，它确实与`-Wpartial-fields`.

[https://downloads.haskell.org/ghc/latest/docs/html/users_guide/using-warnings.html#ghc-flag--Wpartial-fields](https://downloads.haskell.org/ghc/latest/docs/html/users_guide/using-warnings.html#ghc-flag--Wpartial-fields)

# facebook - 识别特定页面的点赞来源

> ID：10393766
> 
> 赞同：0
> 
> 时间：2012-05-01T05:03:18.180
> 
> 标签：facebook, facebook-like

希望这是在正确的部分。:)

**背景：**我有一个网站，它有一个中央点赞按钮（一个连接到我们组织的 Facebook 页面的按钮），我们的每篇文章也有自己的点赞按钮（这个按钮实际上更像是一个“分享”按钮）。

**问题：**是否可以在其中一篇文章上看到个人喜欢的来源？对于直接到Facebook页面的点赞，我们可以直接到该页面查看点赞的用户。但对于个别文章，点赞数的生成完全不同（分享、“点赞”、在 PM 中发布的链接等），并且似乎没有集中的“这里是这个数字的来源”页面。有什么方法可以了解文章喜欢的来源？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:25:10.323

这在[Like Button 文档中有所介绍](https://developers.facebook.com/docs/reference/plugins/like/)

请参阅**了解我页面上的哪个赞按钮产生流量的最佳方法是什么？**

您向like按钮添加一个`ref`参数，this的值将在入站点击中作为`fb_ref`引用URL中的参数返回

# ruby-on-rails - 票有可以发送消息的用户-rails消息传递

> ID：10393768
> 
> 赞同：0
> 
> 时间：2012-05-01T05:03:21.840
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我不确定应该如何为私人消息构建路由。当用户单击票证时，它会显示票证详细信息以及向用户发送有关票证的消息的选项。但是，新的消息路由看起来像`users/:username/messages/new`，但它应该反映用户（发送者）正在向另一个用户（接收者）发送关于当前正在查看的票证的消息。我怎样才能使我的路由 RESTful？

模型可以在这里找到：[receiver_id not Saving - rails messages](https://stackoverflow.com/questions/10393715/receiver-id-not-saving-rails-messaging)

**编辑**

我最终将我的 routes.rb 更改为：

```
resources :users do
  resources :tickets do
    resources :messages
  end
end
resources :tickets 
```

定义多个资源有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:36:32.760

通常，发送消息的用户不需要在路径中表示，因为该用户是通过当前用户会话标识的，因此留下了收件人、票证和创建新消息的操作，必须由路径。

剩下的东西可以用嵌套集合表示，嵌套的顺序有些随意，除了消息集合应该是嵌套最深的，因为这将接收“新”动作。嵌套的选项是票证、收件人、消息或收件人、票证、消息。对我来说，第一次嵌套似乎更直观。

...所以在您的 routes.rb 文件中...

```
resources :tickets do
  resources :recipients do
    resources :messages
  end
end 
```

这会给你一个路径`/tickets/[ticket-id]/recipients/[recipient-id]/messages/new`。请注意，id 不必是记录的数字 id。您的控制器可以决定如何从参数中查找记录，并且您可以`#to_param`在模型上定义以控制路径辅助方法将使用什么。

当对匹配该模式的路径的请求被路由时，它将调用:ticket_id 和 :recipient_id的`#new`方法`MessagesController`并接收值。`#params`

# c# - 自动将数据库附加到 SQL Server Express

> ID：10393778
> 
> 赞同：0
> 
> 时间：2012-05-01T05:04:31.363
> 
> 标签：c#, .net, visual-studio-2010, sql-server-2008

我已经使用 Visual Studio 2010 创建了一个 winforms 应用程序，并为其创建了一个安装项目。我的应用程序与 SQL Server Express 配合使用，因此我已将 SQL Server 2008 Express 添加到设置的先决条件列表中。

此外，我使用以下连接字符串连接到我的数据库：

```
Data Source=.\SQLEXPRESS;AttachDBFileName=|DataDirectory|MyDBName.mdf; Integrated security=True; 
```

我的应用程序及其设置项目构建成功，但是当我安装并运行它（即使以管理员身份）时，我收到一个错误：

> 无法打开用户默认数据库。登录失败。该用户登录失败。

我的错误是什么？？

# mysql - MySQL 删除性能

> ID：10393780
> 
> 赞同：1
> 
> 时间：2012-05-01T05:04:41.363
> 
> 标签：mysql

我正在使用设置为每小时运行的 cron 选项卡删除行。为了提高性能和减少碎片，最好的方法是什么？

另外，我应该在删除完成后运行优化表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:33:46.527

答案将取决于您的数据以及一次删除的行数。

如果可能，使用单个查询删除行（而不是每行一个查询）。例如：

```
DELETE FROM my_table WHERE status="rejected" 
```

如果可能，请在 WHERE 子句中使用索引列。这将帮助它在不进行全表扫描的情况下选择需要删除的行。

如果要删除**所有**数据，请使用 TRUNCATE TABLE。

如果使用单个查询删除数据会导致性能问题，您可以尝试限制它删除的行数（通过添加 LIMIT 子句）并更频繁地运行删除过程。这将随着时间的推移分散删除。

根据文档，如果您删除了表的大部分或对具有可变长度行的表（具有 VARCHAR、VARBINARY、BLOB 或 TEXT 列的表）进行了许多更改，则应使用 OPTIMIZE TABLE。

优化表可能非常昂贵。如果可以，请尝试每天（晚上）删除数据并优化表格一次。这将限制对您的用户的任何影响。

# php - PHP - 文件上传吐出错误

> ID：10393781
> 
> 赞同：0
> 
> 时间：2012-05-01T05:04:41.830
> 
> 标签：php, file, file-upload, upload

我正在做一个简单的文件上传练习，我从我的 WebDev 类中得到——实际上我们只需要复制代码并集成它来满足我们的需求。我试图为我的项目这样做，可悲的是它会继续回显同样的错误。

```
<?php

$allowed_filetypes = array('.jpg','.gif','.bmp','.png', '.jpeg'); 
$max_filesize = 524288; 
$upload_path = 'uploads/'; 

$filename = $_FILES['userfile']['name']; 
$ext = substr($filename, strpos($filename,'.'), strlen($filename)-1); 
var_export($_FILES, $ext);

 if(!in_array($ext,$allowed_filetypes))
  die('The file you attempted to upload is not allowed.');

 if(filesize($_FILES['usrfile']['tmp_name']) > $max_filesize)
  die('The file you attempted to upload is too large.');

 if(!is_writable($upload_path))
  die('You cannot upload to the specified directory, please CHMOD it to 777.');

 if(move_uploaded_file($_FILES['usrfile']['tmp_name'],$upload_path . $filename))
     echo 'Your file upload was successful, view the file <a href="' . $upload_path .  $filename . '" title="Your File">here</a>';
  else
     echo 'There was an error during the file upload.  Please try again.';

?> 
```

它不断给我“错误的文件类型”错误，数组中包含所有定义的类型。

```
<form id='upload' action="uploadfile.php" method="POST" enctype="multipart/form-data">
    <table>
        <tr>
            <td >Choose a File to Upload</td> 
        </tr>
        <tr>
            <td >Select File</td>
            <td  ><input type="file"  name="userfile"></td>
        </tr>
        <tr>
            <td colspan=2 id="sub"><input type="submit" name="submit" value="submit" ></td>
        </tr>
    </Table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:22:40.537

您可以使用它，因为首先您必须始终回显 $_FILES 数组，然后开始调试。将这一行从

```
$allowed_filetypes = array('.jpg','.gif','.bmp','.png', '.jpeg'); 
```

至

```
$allowed_filetypes = array('jpg','gif','bmp','png', 'jpeg'); 
```

更改以下行

```
if(filesize($_FILES['usrfile']['tmp_name']) > $max_filesize) 
```

至

```
if(filesize($_FILES['usrfile']['size']) > $max_filesize) 
```

并删除该行

```
$ext = substr($filename, strpos($filename,'.'), strlen($filename)-1); 
```

并更改此行

```
if(!in_array($ext,$allowed_filetypes)) 
```

至

```
if(!in_array($_FILES['usrfile']['type'],$allowed_filetypes)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:16:51.957

$filename = $_FILES['usrfile'][' **name** '];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T05:11:33.220

`'tmp_name'`索引包含一个*临时*文件名，而不是文件真正拥有的文件名。那存储在`'name'`. 有关信息，请参阅[此页面](http://us.php.net/manual/en/features.file-upload.post-method.php)。

此外，您应该：

1.  检查`'error'`索引中的错误。
2.  用于[`pathinfo`](http://us.php.net/pathinfo)获取扩展名，
3.  在搜索数组之前将其小写，
4.  为上传的文件名添加一些随机性以避免覆盖现有文件。

# java - 蚂蚁树语法

> ID：10393786
> 
> 赞同：2
> 
> 时间：2012-05-01T05:05:18.880
> 
> 标签：java, tree, antlr, grammar, abstract-syntax-tree

我在从解析器语法转移到树语法时遇到问题，当我使用树运算符（^，！）而不是重写规则（->）时，问题就出现了

```
where_clause
    :   'where'! condition_or
    ;

condition_or
    :   condition_and ( 'or'^ condition_and )*
    ;

condition_and
    :   condition_expr ( 'and'^ condition_expr )*
    ;

condition_expr
    :   condition_comparision
//  |   condition_in
//  |   condition_like
    ;

condition_comparision
    :   column_identifier ('=' | '!=' | '>' | '<')^ sql_element
    ; 
```

对于上面的解析器语法，树语法会是什么样子？由于这不是递归的，我无法将其折叠成树语法中的单个规则。

使用重写语法强制重写解析器语法的另一种替代方法

```
condition_or
    :   condition_and -> condition_and 
     ( 'or' x=condition_and -> ^('or' condition_or $x))*
    ; 
```

有没有更简单的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:37:26.350

相应的树语法如下所示：

```
where_clause
    :   condition_or
    ;

condition_or
    :   ^('or' condition_and condition_and)
    ;

condition_and
    :   ^('and' condition_expr condition_expr)
    ;

condition_expr
    :   condition_comparision
    ;

condition_comparision
    :   ^('=' column_identifier sql_element)
    |   ^('!=' column_identifier sql_element)
    |   ^('>' column_identifier sql_element)
    |   ^('<' column_identifier sql_element)
    ; 
```

# performance - phonegap中HTML5/cs/js页面的性能测试

> ID：10393787
> 
> 赞同：0
> 
> 时间：2012-05-01T05:05:28.233
> 
> 标签：performance, html, cordova

我是一名测试人员，我们公司正计划在 HTML5/CSS/JS、jquery mobile 中构建一个应用程序，并使用 phonegap 部署在 iPhone 和 android 上。

我想知道如何在这些平台上测试应用程序的性能？具体是渲染性能、用户响应时间、动态数据绑定？

有没有可以测量上述性能的工具？我可以使用自动化吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T23:25:42.277

你可以用[温热](http://people.apache.org/~pmuellr/weinre/)。但是指标是有限的，并且仍然涉及很多手动步骤。最好的办法是编写自己的仪器和基于 JS 的报告。

# ruby-on-rails - 如何在rails 3.1中使用jquery-addresspicker jquery

> ID：10393793
> 
> 赞同：1
> 
> 时间：2012-05-01T05:06:19.147
> 
> 标签：ruby-on-rails, jquery-ui, ruby-on-rails-3.1, jquery-address

我正在尝试将 jquery-addresspicker 与 rails 3.1 一起使用，但我无法使其运行。

这是链接[https://github.com/sgruhier/jquery-addresspicker](https://github.com/sgruhier/jquery-addresspicker)并且文档没有提及太多。

谁能建议我应该如何在我的 Rails 应用程序中使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:30:55.550

你包括谷歌地图吗

```
<script src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

和 jquery-ui ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T17:49:50.697

将脚本代码放在 html 或单独的 js 文件中

```
<script>
        $(function() {
            var addresspicker = $( "#addresspicker" ).addresspicker();
            var addresspickerMap = $( "#addresspicker_map" ).addresspicker({
                regionBias: "fr",
              elements: {
                map:      "#map",
                lat:      "#lat",
                lng:      "#lng",
                locality: '#locality',
                country:  '#country'
              }
            });
            var gmarker = addresspickerMap.addresspicker( "marker");
            gmarker.setVisible(true);
            addresspickerMap.addresspicker( "updatePosition");

        });
    </script>

<div>
    <div class='input'>
      <%= f.label :address %><br />
      <%= f.text_field :address, :id => "addresspicker_map" %>
      <%= f.label :locality %><br />
      <%= f.text_field :locality, :id => "locality", :disabled => "true" %>
      <%= f.label :country %><br />
      <%= f.text_field :country, :id => "country", :disabled => "true" %>
      ...
    </div>
    <div id="map"></div>
    <div id="legend">You can drag and drop the marker to the correct location</div>
  </div> 
```

这是我制作的一个教程。我还没有尝试过，但这对你来说是一个开始。您必须从这里使用 css 对其进行样式设置：

[https://github.com/sgruhier/jquery-addresspicker/blob/master/demos/demo.css](https://github.com/sgruhier/jquery-addresspicker/blob/master/demos/demo.css)

从此处将 js 文件包含在应用程序中：

[https://github.com/sgruhier/jquery-addresspicker/tree/master/src](https://github.com/sgruhier/jquery-addresspicker/tree/master/src)

和图片：

[https://github.com/sgruhier/jquery-addresspicker/tree/master/demos/images](https://github.com/sgruhier/jquery-addresspicker/tree/master/demos/images)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:10:10.887

这已在此 repo [https://github.com/ddidier/address_picker-rails移植到 rails](https://github.com/ddidier/address_picker-rails)

# html - 如何在 HTML 按钮下方添加填充？

> ID：10393794
> 
> 赞同：1
> 
> 时间：2012-05-01T05:06:19.537
> 
> 标签：html, css

如果我的布局是

```
BUTTON
TEXT 
```

我正在尝试在 BUTTON 和 TEXT 之间创建空间。尝试类似的东西

```
.bottom-gap {
    padding-bottom: 150px
} 
```

似乎只是增加了按钮的高度

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T05:08:02.043

填充应用于元素的*内部*。要在元素底部添加*边距*，您需要使用`margin-bottom: 150px`. 我假设您的按钮是一个实际的 UI`<button>`元素。如果没有，您需要确保它显示为内联块。

# silverlight-4.0 - 无法获取 ExceptionManager 的实例

> ID：10393803
> 
> 赞同：0
> 
> 时间：2012-05-01T05:07:39.007
> 
> 标签：silverlight-4.0, exception-handling, enterprise-library, mvvm-light

我正在使用 mvvm-light 框架在 Silverlight 中使用 Enterprise Library 5.0。当我要获取 ExceptionManager 类的实例时，例如：

```
 var exceptionManager = EnterpriseLibraryContainer.Current.GetInstance<ExceptionManager>();
  exceptionManager.HandleException(E.Error, "Policy"); 
```

我收到这种类型的错误消息

```
Activation error occured while trying to get instance of type ExceptionManager, key ""

Resolution of the dependency failed, type = Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionManager", name = "(none)"
  Exception occurred while: while resolving.Exception is: InvalidOperationException - The type TraceListener cannot be constructed. You must configure the container to supply this value
 -----------------------------------------------
 At the time of the exception, the container was:

 Resolving Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionManagerImpl,ExceptionManager.__default__ (mapped from Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionManager, (none))
Resolving parameter "exceptionPolicies" of constructor Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionManagerImpl(System.Collections.Generic.IEnumerable`1[[Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyImpl, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Silverlight, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]] exceptionPolicies, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Instrumentation.IDefaultExceptionHandlingInstrumentationProvider instrumentationProvider)
Resolving Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyImpl,Policy
Resolving parameter "policyEntries" of constructor Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyImpl(System.String policyName, System.Collections.Generic.IEnumerable`1[[Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyEntry, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Silverlight, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]] policyEntries)
  Resolving Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyEntry,Policy.All Exceptions
  Resolving parameter "handlers" of constructor Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyEntry(System.Type exceptionType, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.PostHandlingAction postHandlingAction, System.Collections.Generic.IEnumerable`1[[Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.IExceptionHandler, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Silverlight, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]] handlers, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Instrumentation.IExceptionHandlingInstrumentationProvider instrumentationProvider)
    Resolving Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging.LoggingExceptionHandler,Policy.All Exceptions.Logging Exception Handler (mapped from Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.IExceptionHandler, Policy.All Exceptions.Logging Exception Handler)
    Resolving parameter "writer" of constructor Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging.LoggingExceptionHandler(System.String logCategory, System.Int32 eventId, Microsoft.Practices.EnterpriseLibrary.Logging.Diagnostics.TraceEventType severity, System.String title, System.Int32 priority, System.Type formatterType, Microsoft.Practices.EnterpriseLibrary.Logging.LogWriter writer)
      Resolving Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterImpl,LogWriter.__default__ (mapped from Microsoft.Practices.EnterpriseLibrary.Logging.LogWriter, (none))
      Resolving parameter "structureHolder" of constructor Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterImpl(Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterStructureHolder structureHolder, Microsoft.Practices.EnterpriseLibrary.Logging.Instrumentation.ILoggingInstrumentationProvider instrumentationProvider, Microsoft.Practices.EnterpriseLibrary.Logging.IAsyncTracingErrorReporter asyncTracingErrorReporter)
        Resolving Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterStructureHolder,LogWriterStructureHolder.__default__ (mapped from Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterStructureHolder, (none))
        Resolving parameter "traceSources" of constructor Microsoft.Practices.EnterpriseLibrary.Logging.LogWriterStructureHolder(System.Collections.Generic.IEnumerable`1[[Microsoft.Practices.EnterpriseLibrary.Logging.Filters.ILogFilter, Microsoft.Practices.EnterpriseLibrary.Logging.Silverlight, Version=5.0.505.1, Culture=neutral, PublicKeyToken=31bf3856ad364e35]] filters, System.Collections.Generic.IEnumerable`1[[System.String, mscorlib, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]] traceSourceNames, System.Collections.Generic.IEnumerable`1[[Microsoft.Practices.EnterpriseLibrary.Logging.LogSource, Microsoft.Practices.EnterpriseLibrary.Logging.Silverlight, Version=5.0.505.1, Culture=neutral, PublicKeyToken=31bf3856ad364e35]] traceSources, Microsoft.Practices.EnterpriseLibrary.Logging.LogSource allEventsTraceSource, Microsoft.Practices.EnterpriseLibrary.Logging.LogSource notProcessedTraceSource, Microsoft.Practices.EnterpriseLibrary.Logging.LogSource errorsTraceSource, System.String defaultCategory, System.Boolean tracingEnabled, System.Boolean logWarningsWhenNoCategoriesMatch, System.Boolean revertImpersonation)
          Resolving Microsoft.Practices.EnterpriseLibrary.Logging.LogSource,General
          Resolving parameter "traceListeners" of constructor Microsoft.Practices.EnterpriseLibrary.Logging.LogSource(System.String name, System.Collections.Generic.IEnumerable`1[[Microsoft.Practices.EnterpriseLibrary.Logging.Diagnostics.TraceListener, Microsoft.Practices.EnterpriseLibrary.Logging.Silverlight, Version=5.0.505.1, Culture=neutral, PublicKeyToken=31bf3856ad364e35]] traceListeners, Microsoft.Practices.EnterpriseLibrary.Logging.Diagnostics.SourceLevels level, System.Boolean autoFlush, Microsoft.Practices.EnterpriseLibrary.Logging.Instrumentation.ILoggingInstrumentationProvider instrumentationProvider)
            Resolving Microsoft.Practices.EnterpriseLibrary.Logging.Diagnostics.TraceListener,Flat File Trace Listener 
```

在线

```
 var exceptionManager = EnterpriseLibraryContainer.Current.GetInstance<ExceptionManager>(); 
```

我的配置文件是：

```
 <?xml version="1.0" encoding="utf-8"?>
    <ResourceDictionary           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:el="http://schemas.microsoft.com/practices/2011/entlib">
     <el:ExceptionHandlingSettings x:Key="exceptionHandling">
     <el:ExceptionHandlingSettings.ExceptionPolicies>
     <el:ExceptionPolicyData Name="LogPolicy">
     <el:ExceptionPolicyData.ExceptionTypes>
      <el:ExceptionTypeData Name="All Exceptions" TypeName="System.Exception, mscorlib, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e">
        <el:ExceptionTypeData.ExceptionHandlers>
          <el:LoggingExceptionHandlerData LogCategory="General" FormatterTypeName="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.TextExceptionFormatter, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Silverlight, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" Priority="-1" Name="Logging Exception Handler" />
        </el:ExceptionTypeData.ExceptionHandlers>
      </el:ExceptionTypeData>
    </el:ExceptionPolicyData.ExceptionTypes>
  </el:ExceptionPolicyData>
 </el:ExceptionHandlingSettings.ExceptionPolicies>
 </el:ExceptionHandlingSettings>
 <el:LoggingSettings DefaultCategory="General" x:Key="loggingConfiguration">
  <el:LoggingSettings.TraceSources>
  <el:TraceSourceData Name="General">
    <el:TraceSourceData.TraceListeners>
      <el:TraceListenerReferenceData Name="Flat File Trace Listener" />
    </el:TraceSourceData.TraceListeners>
  </el:TraceSourceData>
 </el:LoggingSettings.TraceSources>
 <el:LoggingSettings.SpecialTraceSources>
  <el:SpecialTraceSourcesData>
    <el:SpecialTraceSourcesData.AllEventsTraceSource>
      <el:TraceSourceData Name="All Events" />
    </el:SpecialTraceSourcesData.AllEventsTraceSource>
    <el:SpecialTraceSourcesData.NotProcessedTraceSource>
      <el:TraceSourceData Name="Unprocessed Category" />
    </el:SpecialTraceSourcesData.NotProcessedTraceSource>
    <el:SpecialTraceSourcesData.ErrorsTraceSource>
      <el:TraceSourceData Name="Logging Errors &amp; Warnings">
        <el:TraceSourceData.TraceListeners>
          <el:TraceListenerReferenceData Name="Flat File Trace Listener" />
        </el:TraceSourceData.TraceListeners>
      </el:TraceSourceData>
    </el:SpecialTraceSourcesData.ErrorsTraceSource>
  </el:SpecialTraceSourcesData>
  </el:LoggingSettings.SpecialTraceSources>
  </el:LoggingSettings>
  </ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:11:06.103

看起来您的配置引用了一个名为“平面文件跟踪侦听器”的跟踪侦听器，但该名称没有定义跟踪侦听器。

此外，您应该知道企业库 Silverlight 日志记录应用程序块不支持平面文件跟踪侦听器。有效的行动是：

*   记录到远程 WCF 服务。
*   记录到隔离存储。
*   记录到事件。

# php - 如何授予 PHP 运行 PDFTK 的权限？

> ID：10393804
> 
> 赞同：1
> 
> 时间：2012-05-01T05:07:45.963
> 
> 标签：php, permissions, pdftk

PDFTK 从命令行运行：

```
$ pdftk
SYNOPSIS
       pdftk <input PDF files | - | PROMPT>
        [ input_pw <input PDF owner passwords | PROMPT> ] 
```

PDFTK 从 PHP 运行：

```
HI
<br>
<?php echo shell_exec('ls'); ?>
<br>
<?php echo shell_exec('pdftk'); ?> 
```

印刷

```
HI 
css favicon.ico files images index.php js test.php 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:10:45.883

可能是路径问题，而不是权限问题（它应该只需要输入文件的读取权限和输出文件的读写权限）。做：

```
which pdftk 
```

获取路径，然后将其放入`shell_exec`.

# php - 从 while 循环创建一个 ID 数组

> ID：10393806
> 
> 赞同：0
> 
> 时间：2012-05-01T05:07:57.383
> 
> 标签：php, arrays, while-loop

我试图生成一个数组，但不知道如何去做。

我目前正在像这样获取我的数据：

```
$query = mysql_query("SELECT * FROM users WHERE userEmail LIKE 'test@test.com'");
$row = mysql_fetch_array($query);

$query1 = mysql_query("SELECT * FROM categories");
while($row1 = mysql_fetch_array($query1)){

    $query2 = mysql_query("SELECT * FROM usersettings WHERE userId = ".$row['userId']." AND usersettingCategory".$row1['categoryId']." LIKE 'y'");
    $isyes = mysql_num_rows($query2);

    if($isyes > 0){

        $cat1 = mysql_query("SELECT * FROM shops WHERE shopstateId = 1 AND (categoryId1 = ".$row1['categoryId']." OR categoryId2 = ".$row1['categoryId']." OR categoryId3 = ".$row1['categoryId'].")");
        $cat1match = mysql_num_rows($cat1);

        if($cat1match > 0){
            while($cat1shop = mysql_fetch_array($cat1)){
                $cat1msg = mysql_query("SELECT * FROM messages WHERE shopId = ".$cat1shop['shopId']." and messagestateId = 1");
                while($cat1msgrow = mysql_fetch_array($cat1msg)){

                    echo $cat1msgrow['messageContent']." - ".$cat1msgrow['messageCode'];
                    $cat1img = mysql_query("SELECT shopimagePath FROM shopimages WHERE shopimageId = ".$cat1shop['shopimageId']);
                    $imgpath = mysql_fetch_array($cat1img);
                    echo " - ".$imgpath['shopimagePath']."<br/>";
                }
            }
        }
     }
} 
```

但是，当用户在他们的偏好中选择了所有 3 个商店类别时，这可能会导致重复。我正在尝试找到一种方法来提取消息 ID 而不是整个内容并将其放入给我的数组中，例如：

1,3,5,7,1,3,5,2,4,7,8

然后我可以运行一个单独的查询来告诉我ID在数组中的所有消息，但我不确定构建这样一个数组的最有建设性的方法，我见过的while循环中的数组示例似乎并不成为我正在寻找的东西。

有没有人可以把我推向正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:27:08.030

无法帮助使用此代码。但是，如果您想从查询中获得一个没有重复结果的数组，您可以在查询中使用“select DISTINCT (id)”或更简单的解决方案：

```
$id_arr = array();
$sql = mysql_query("select id from id_table"); 
while ($id_result = mysql_fetch_array($sql) {
  $id  = $id_result['id'];
  if (!in_array($id, $id_arr)) {
    $id_arr[] = $id;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T20:16:09.957

我找到了一种更简单的方法来创建所需的结果。我想在早上 6 点经过一夜艰苦的编码后，我的大脑被炸了，我让事情变得比我需要的要复杂得多。我的问题的一个简单解决方案如下：

```
$query = mysql_query("SELECT * FROM users WHERE userEmail LIKE 'test2@test2.com'");
$row = mysql_fetch_array($query);

$categories = "(";

$query1 = mysql_query("SELECT * FROM categories");
while($row1 = mysql_fetch_array($query1)){

    $query2 = mysql_query("SELECT usersettingCategory".$row1['categoryId']." FROM usersettings WHERE userId = ".$row['userId']);
    $row2 = mysql_fetch_array($query2);

    if($row2['usersettingCategory'.$row1['categoryId']] == y){

        $categories .= $row1['categoryId'].",";
    }

}

$categories = substr_replace($categories ,")",-1);

echo $categories."<br />";

$query3 = mysql_query("SELECT * FROM shops,messages WHERE shops.shopId = messages.shopId AND messages.messagestateId = 1 AND (shops.categoryId1 IN $categories OR shops.categoryId2 IN $categories OR shops.categoryId3 IN $categories)");

while($row3 = mysql_fetch_array($query3)){

    $query4 = mysql_query("SELECT shopimagePath FROM shopimages WHERE shopimageId = ".$row3['shopimageId']);
    $row4 = mysql_fetch_array($query4);

    echo $row3['messageContent']." - ".$row3['messageCode']." - ".$row4['shopimagePath']."<br />";
} 
```

# ruby - 每个模型的 Sinatra CRUD 路线，路线问题

> ID：10393808
> 
> 赞同：1
> 
> 时间：2012-05-01T05:08:21.360
> 
> 标签：ruby, sinatra, routes

这是我的代码所在，我认为我很接近。

savetomongoid 是一个将 params 数组推送到 mongoid 的 def。

我正在使用 activesupport 来支持复数和分类方法

```
route :get, :delete, :post, :put, '/*/*?/?*?' do |model, action, id|
  case
  when request.get?
    case action
    when "new" 
      haml '#{model}/new'
    when "show" 
      instance_variable_set('@#{model}', model.classify.find(id))
      haml '#{model}/show'
    when "edit" 
      instance_variable_set('@#{model}', model.classify.find(id))
      haml '#{model}/edit'
     else
      instance_variable_set('@#{model.pluralize}', model.classify.asc(made))
      haml '#{model}/index'
    end
  when request.post? || request.put?
    savetomongoid(model, params[model]) ? (redirect '/#{model}/') : (redirect '/#{model}/new')
  when request.delete?
    model.classify.find(id).delete ? (redirect '/#{model}/') : (puts "uhh ohh")
  end
end

get '/*' do
  haml :silence
end 
```

当我尝试使用任何路径加载它时，我得到一个完全空白的屏幕，没有源，但是 localhost:####/ 将我带到我的 haml :silence ，所以一些路由正在工作。

这三个 splats 应该把它的价值放在模型、动作、id 中。我已经尝试过某事/某事/某事，但我仍然得到无源页面。

假设 splats 和问号的模式可以通过[https://github.com/sinatra/sinatra上的自述文件工作](https://github.com/sinatra/sinatra)

谁能帮我一把？我几乎可以肯定这应该有效。

另外，任何人都可以建议一种方法来检查模型是否存在以过滤掉模型中任意事物的生成残渣吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:24:52.680

您的案例陈述看起来很奇怪。

您正在测试 request_method 的结果，它将根据请求的*get?、post? 或 delete?的值返回字符串“GET”、“PUT”、“POST”或“DELETE”。*返回*true*或*false*的方法。

似乎您总是会在没有匹配项的情况下退出 case 语句。

可能应该是：

> 路线 :get, :delete, :post, :put, '/ */* ?/?*?' 做 |模型、动作、id|
> case request.request_method
> when "GET"
> ...

# joomla1.5 - Joomla Paypal IPN 总是返回 INVALID

> ID：10393810
> 
> 赞同：0
> 
> 时间：2012-05-01T05:08:36.203
> 
> 标签：joomla1.5, paypal-ipn

我无法在我的 joomla 1.5 网站上验证 paypal 付款。尽管付款成功，但我总是得到“无效”。我无法从贝宝获取 POST 值，只能获取值。这些代码或设置有什么问题。

我在 sandbox.paypal.com 中的贝宝设置

```
IPN : Turn On 
Message delivery : enabled
notification url : http://mysite.com/index.php?option=com_order&type=orders
auto return : on
return url : http://mysite.com/index.php?option=com_order&type=orders
PDT : on
Encrypted Website Payments : off
PayPal Account Optional : off 
```

在 mycomponent joomla
payment.php

```
<form method="post" action="https://www.sandbox.paypal.com/cgi-bin/webscr" name="paypal">
  <input type="hidden" value="_xclick" name="cmd">
  <input type="hidden" value="myname_1335697493_biz@gmail.com" name="business">
  <input type="hidden" value="test payment" name="item_name" id="item_name">
  <input type="hidden" value="11" name="item_number" id="item_number">
  <input type="hidden" value="0.1" name="amount" id="amount">
  <input type="hidden" value="USD" name="currency_code" id="currency_code">
  <input type="hidden" value="<?php echo JURI::base();?>index.php?option=com_order&type=orders" name="return" id="return">
  <input type="hidden" value="<?php echo JURI::base();?>index.php?option=com_order&type=orders" name="cancel_return" id="cancel_return">
  <input type="hidden" value="<?php echo JURI::base();?>index.php?option=com_order&task=orders" name="notify_url" id="notify_url">
  <input type="hidden" name="rm" value="2">
  <table class="tblpay">
  .....
  </table>
</form> 
```

在我的 controller.php 上

```
function display()
{   
    $user =& JFactory::getUser();
    $type = JRequest::getVar('type');
    switch($type) {
        ...
            case 'orders':
            $viewName    = 'orders'; 
            $viewLayout  = 'orderslayout';
            if (JRequest::getVar('tx') != null){
                $this->processpayment();
                $viewLayout  = 'paymentlayout';
            }
            break;
        ...
}

function processpayment(){
    // Response from Paypal

    // read the post from PayPal system and add 'cmd'
    $req = 'cmd=_notify-validate';
    $get = JRequest::get('get');
    foreach ($get as $key => $value) {
        $value = urlencode(stripslashes($value));
        $req .= "&$key=$value";
    }
    // assign posted variables to local variables
    $data['amount']         = JRequest::getVar('amt');
    $data['currency']       = JRequest::getVar('cc');
    $data['cm']             = JRequest::getVar('cm');
    $data['idorder']        = JRequest::getVar('item_number');
    $data['st']             = JRequest::getVar('st');
    $data['tx']             = JRequest::getVar('tx');
    $data['option']         = JRequest::getVar('option');
    $data['type']           = JRequest::getVar('type');
    $data['paymentresult']  = "";

    // post back to PayPal system to validate
    $header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

    $fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30); 
    if (!$fp) {
        // HTTP ERROR
    } else {    

        fputs ($fp, $header . $req);
        while (!feof($fp)) {
            $res = fgets ($fp, 1024);
            if (strcmp($res, "VERIFIED") == 0) {
                ...
            }else if (strcmp ($res, "INVALID") == 0) {
                ...
            }       
        }       
    fclose ($fp);
    }

    //$redirectTo = str_replace("amp;","",JRoute::_('index.php?option='.JRequest::getVar('option').'&type=orders&layout=paymentlayout')); 
    //$this->setRedirect($redirectTo, '');
} 
```

这是我从贝宝得到的结果（使用 jdump）：

```
[string] option = "com_order"
[string] type = "orders"
[string] tx = "9D9224627W344360N"
[string] st = "Completed"
[string] amt = "0.10"
[string] cc = "USD"
[string] cm = ""
[string] item_number = "41"
[string] Itemid = "" --> why i get this because i never send itemid? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:04:23.557

好的，我今天遇到了类似的问题，我认为通常这些“无效”响应通常是在提交的数据与收到的数据不完全相同的情况下。

对我来说，这是地址的问题，但对你来说，它可能是那个 Itemid。对于我的问题（我将在此处提及，因为它可能对其他人有所帮助），已要求贝宝发回用户地址。因为 paypal 允许街道地址为多行，所以它在地址的行之间添加了 \r\n。

通常最好的做法是使用这行来发送值......

```
$value = urlencode( stripslashes( $value ) ); 
```

但是如果您请求了一个地址，这将不起作用，因为它会从 \r\n 中删除斜杠，所以您只想做一个条件，以便如果键是 address_street 您只需 urlencode （或者只是以另一种方式获取地址我最终做了）

在您的情况下，您可以将上面的代码更改为

```
foreach ( $post as $key => $value ) {
        if ($key != 'Itemid')
        {
        $value = urlencode( stripslashes( $value ) );
        $req .= "&$key=$value";
        }
    } 
```

希望能为你解决它;）

# delphi - 关于如何在运行时为 THTMLViewer 创建 HTML 的示例

> ID：10393811
> 
> 赞同：0
> 
> 时间：2012-05-01T05:08:38.940
> 
> 标签：delphi

使用 Delphi XE，我已经安装了 THTMLViewer。我看到很多关于如何读取 HTM 文件 (LoardFromFile) 并将其显示在查看器中的示例。我想要做的是在我的程序运行时创建 HTM。如果我有一个 RichEdit 组件，我会有几个 SelText := 行。

当然，我可以将行添加到字符串列表，然后将字符串列表保存到文件，最后将 LoadFromFile 加载到 htmlViewer 中，但这似乎是一个不必要的额外步骤。

THtmlViewer 是否有 Memo.Lines 或其他属性，我可以在其中添加所需的 HTML 编码行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:59:03.750

如果您使用的是支持它的组件版本，那么`LoadFromString`可能是最简单的功能。

我很惊讶你没有在源代码中找到它。我似乎记得它已经有一段时间了。

如果您需要更新版本的组件源，可以在这里找到：[THTMLViewer Project](http://code.google.com/p/thtmlviewer/ "THTMLViewer 代码")

# hibernate - spring mvc 和 hiberante 中的事务

> ID：10393821
> 
> 赞同：3
> 
> 时间：2012-05-01T05:10:32.053
> 
> 标签：hibernate, spring-mvc

我正在使用 spring mvc 3.0 和休眠。我的情况是，我有库存，用户可以在其中添加和删除项目。例如，总量=50。现在，一次有两个用户想要更新库存，比如 A 删除了 2 件商品，B 删除了 4 件商品。所以，总数量 = 44。现在，当两个用户都尝试同时更新库存时，我该怎么做?? 如果不维护事务，那么它将是 50-2=48，然后是 50-4=46。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:34:11.530

使用[版本属性](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#d0e5844)来确保正确的语义。这是 Hibernate 参考指南的整个部分的主题：[“乐观并发控制”](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/transactions.html#transactions-optimistic)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-01T11:52:44.407

您可以将乐观锁定与版本控制一起使用。将属性或属性添加到持久类映射后，就会启用带有版本控制的乐观锁定。XML 中的属性映射必须紧跟在标识符属性映射之后：

```
<class name="Item" table="ITEM">
    <id .../>
    <version name="version" access="field" column="OBJ_VERSION"/>
     ...
</class> 
```

这样，当项目更新时，SQL 将是：

```
update ITEM set INITIAL_PRICE='12.99', OBJ_VERSION=2
where ITEM_ID=123 and OBJ_VERSION=1 
```

如果另一个并发工作单元更新并提交了同一行，则 OBJ_VERSION 列不再包含值 1，并且该行不会更新。Hibernate 检查 JDBC 驱动程序返回的该语句的行数——在本例中是更新的行数，为零——并抛出 StaleObjectStateException。

如果您没有版本或时间戳列，Hibernate 仍然可以执行自动版本控制，但仅限于在同一持久性上下文（即同一 Session）中检索和修改的对象。这种版本控制的替代实现在检索对象时（或最后一次刷新持久性上下文）检查当前数据库状态与持久性属性的未修改值。您可以通过在类映射上设置乐观锁定属性来启用此功能：

```
<class name="Item" table="ITEM" optimistic-lock="all">
<id .../>
...
</class> 
```

现在执行以下 SQL 以刷新 Item 实例的修改： update ITEM set ITEM_PRICE='12.99' where ITEM_ID=123 and ITEM_PRICE='9.99' and ITEM_DESCRIPTION="An Item" and ... and SELLER_ID=45

在这两种情况下，您都可以在收到 StaleObjectStateException 时重新启动第二个事务或合并更新。这种情况应该是非常少见的，否则，你需要重构以缩小事务范围以使其更小更快。

您可以参考 CHRISTIAN BAUER 和 GAVIN KING 所著的《Java Persistent with Hibernate》一书以了解更多详细信息。（推荐的）

**编辑：**瑞恩是对的。我纠正我的答案。

# java - 无法将远程接口强制转换为 EJB 容器

> ID：10393824
> 
> 赞同：2
> 
> 时间：2012-05-01T05:10:49.270
> 
> 标签：java, jakarta-ee

我有一个名为“BookEJB”的 EJB，它实现了一个远程接口“BookEJBRemote”

BookEJB 是这样声明的：

```
@Stateless    
@Remote(BookEJBRemote.class)   
public class BookEJB implements BookEJBRemote{} 
```

BookEJBRemote 是这样声明的：

```
@Remote
public interface BookEJBRemote
{} 
```

我有一个进行单元测试的文件，运行测试时出现错误。错误消息如下：

```
java.lang.ClassCastException: _BookEJBRemote_Wrapper cannot be cast to BookEJB 
```

有错误的行是：

```
BookEJB mediaEJB = (BookEJB) ctx.lookup("java:global/classes/BookEJB"); 
```

我不知道这里发生了什么...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T06:52:41.197

远程接口（以及一般的接口）的原理是，具有对实现给定接口的对象的引用的客户端不需要知道对象的具体类型。如果他知道接口，他就会调用接口中定义的方法。

在您的界面中定义方法，否则它没有任何意义。

并在该接口上调用方法：

```
BookEJBRemote book = (BookEJBRemote) ctx.lookup("java:global/classes/BookEJB");
int pages = book.getNumberOfPages(); 
```

EJB 容器用实现其接口的对象包装每个 EJB，并委托给实际的 EJB bean 实例。但在调用 EJB bean 实例上的方法之前，它确保事务已启动，调用者有权调用方法等。

在远程接口的情况下，客户端可以存在于单独的 JVM 中，甚至无法访问 BookEJB 类。它只接收一个实现远程接口的存根类的实例。当调用方法时，存根序列化参数，向服务器发送网络请求，从服务器获取响应，反序列化，并将结果返回给调用者。BookEJB 实例仅存在于服务器 JVM 中。

# objective-c - 拆分键盘，如 iPad 上的 iMessage 应用程序

> ID：10393825
> 
> 赞同：0
> 
> 时间：2012-05-01T05:11:09.183
> 
> 标签：objective-c, ios, ipad

我正在尝试使用与 iPad 上的 iMessage 应用程序相同样式的拆分键盘。如果拆分键盘，两个键盘似乎仍然相互连接。当我在 YouTube 应用程序中拆分键盘时，情况有所不同。

此外，输入字段位于右侧拆分键盘的正上方。此外，如果您上下拖动拆分键盘，输入字段也会随着拆分键盘一起移动。Apple 是否使用自己的自定义键盘？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:43:56.537

查看[UITextView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextView_Class/Reference/UITextView.html)，特别是`inputAccessoryView`.

当您将输入附件视图设置为文本视图（或[UITextField](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html)）时，它将附加到键盘上，正如您所描述的其他示例是 safari 的搜索字段。

iPad 中 iMessages 的技巧是输入附件视图与右侧对齐，这不是问题，您可以有一个大的透明 inputAccessoryView 包含右对齐和可见视图:)

# matlab - Matlab ksdensity 点范围

> ID：10393831
> 
> 赞同：1
> 
> 时间：2012-05-01T05:11:39.393
> 
> 标签：matlab, range, histogram, kernel-density

我在 MATLAB 中使用这种形式的 ksdensity 函数。

`[f,xi] = ksdensity(x)`

文档说“f 是在 xi 中的点处评估的密度值的向量......密度是在 100 个等距点处评估的，这些点覆盖了 x 中的数据范围。”

现在，我的 xi 值覆盖的范围比 x 中的数据大得多。为什么是这样？

对于我的数据，

```
>> min(x)

ans =

   -2.2588

>> min(xi)

ans =

   -6.8010
>> max(x)

ans =

    6.5326

>> max(xi)

ans =

   11.0748 
```

我知道我可以自己指定一个 xi 范围，但为什么默认情况下它在 x 的 min 和 max 之间的间距不相等？

当直方图中的 bin 仅覆盖 x 的范围，而 ksdensity 给出的测试点超出此范围时，很难比较直方图估计量和核估计量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:40:34.257

`ksdensity`使用高斯核对直方图进行平滑处理。作为说明，检查脉冲响应的输出：

```
[f,xi] = ksdensity(0);
plot(xi,f) 
```

![在此处输入图像描述](../Images/88b4f5827bbc298179e95c22db00cddd.png)

高斯的宽度为 1，这意味着您将在数据的两侧添加大约 3（这可以使它看起来好像在严格的正直方图中存在负值）。因此，如果您的数据只跨越一个小范围，您需要在`ksdensity`.

# c++ - 确定使用外力时球体和平面之间的静止接触

> ID：10393840
> 
> 赞同：9
> 
> 时间：2012-05-01T05:12:36.820
> 
> 标签：c++, algorithm, physics, game-physics

这个问题有一个大问题和一个小问题。我相信我在研究中的任何一个问题上都是对的，但不是两者兼而有之。

`TotalForce`对于我的物理循环，我做的第一件事是对刚体对象施加重力。`TotalForce`然后我使用 my和 my来检查碰撞`Velocity`。My`TotalForce`会在每个物理循环之后重置`(0, 0, 0)`，尽管我会保留我的`velocity`.

我熟悉仅使用速度时在移动球体和静态平面之间进行碰撞检查。但是，如果我还有其他的力`velocity`，比如重力呢？我将其他力投入`TotalForces`（现在我只有重力）。为了弥补这一点，当我确定球体当前没有与平面重叠时，我会

```
 Vector3 forces = (sphereTotalForces + sphereVelocity);
    Vector3 forcesDT = forces * fElapsedTime;
    float denom = Vec3Dot(&plane->GetNormal(), &forces); 
```

但是，这对于我认为应该是静止接触的方式来说可能是有问题的。我以为静息接触是由

```
denom * dist == 0.0f 
```

`dist`在哪里

```
float dist = Vec3Dot(&plane->GetNormal(), &spherePosition) - plane->d; 
```

`denom * dist > 0.0f`（作为参考，球体正在远离平面移动的明显含义）

然而，这永远不可能是真的。即使似乎有“休息接触”。这是由于我`forces`上面的计算总是至少有一个 .y 为 -9.8（我的重力）。当朝向法线为 (0, 1, 0) 的平面移动时，将产生`denom`-9.8 的 ay。

我的问题是

1）我是否按照我在前两个代码片段中提到的方式正确计算了静息接触？

如果是这样的话，

2）应该如何使用我的“其他力量”，例如重力？是我的使用`TotalForces`不正确吗？

作为参考，我的时间步长是

```
 mAcceleration = mTotalForces / mMass;
  mVelocity += mAcceleration * fElapsedTime;
  Vector3 translation = (mVelocity * fElapsedTime); 
```

**编辑**

由于似乎一些建议的更改会改变我的碰撞代码，这就是我如何检测我的碰撞状态

```
if(fabs(dist) <= sphereRadius)
{ // There already is a collision }
else
{
    Vector3 forces = (sphereTotalForces + sphereVelocity);
    float denom = Vec3Dot(&plane->GetNormal(), &forces);

    // Resting contact
    if(dist == 0) { }
    // Sphere is moving away from plane
    else if(denom * dist > 0.0f) { }
    // There will eventually be a collision
    else
    {
        float fIntersectionTime = (sphereRadius - dist) / denom;
        float r;
        if(dist > 0.0f)
            r = sphereRadius;
        else
            r = -sphereRadius;

        Vector3 collisionPosition = spherePosition + fIntersectionTime * sphereVelocity - r * planeNormal;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:51:28.367

1.  您应该使用`if(fabs(dist) < 0.0001f) { /* collided */ }`This is 来计算浮点精度。在大多数角度或接触中，您肯定不会得到精确的 0.0f。

2.  如果为负值`dist`，则实际上是将身体移回平面表面所需的实际量，以防它穿过平面表面。`sphere.position = sphere.position - plane.Normal * fabs(dist);`

3.  将其移回表面后，您可以选择使其在平面法线的相反方向上反弹；或者只是留在飞机上。

    `parallel_vec = Vec3.dot(plane.normal, -sphere.velocity);`

    `perpendicular_vec = sphere.velocity - parallel_vec;`

    `bounce_velocity = parallel - perpendicular_vec;`

4.  `totalforce = external_force + velocity`除非一切都有单位质量，否则你不能盲目地做。

**编辑**：

1.  要在 3D 空间中完全定义一个平面，您的平面结构应该存储一个平面法向量和平面上的一个点。[http://en.wikipedia.org/wiki/Plane_(geometry](http://en.wikipedia.org/wiki/Plane_(geometry) ) 。

`Vector3 planeToSphere = sphere.point - plane.point;`

`float dist = Vector3.dot(plane.normal, planeToSphere) - plane.radius;`

`if(dist < 0) { // collided. }`

如果这是您不知道的部分，我建议您先学习更多数学。

注意：抱歉，格式混乱了……我无法将其标记为代码块。

**编辑 2**：根据我对您的代码的理解，您要么错误地命名变量，要么正如我之前提到的，您需要修改您的数学和物理理论。这条线没有做任何有用的事情。

`float denom = Vec3Dot(&plane->GetNormal(), &forces);`

A 在任何时候，球体上的力可以在任何方向上，与行进方向完全无关。所以denom本质上是计算平面方向上的力的大小，但没有告诉你球是否会撞到平面上。例如，重力是向下的，但球可以具有向上的速度并撞击上方的平面。有了这个，你需要`Vec3Dot(plane.normal, velocity)`改为。

或者，Mark Phariss 和 Gerhard Powell 已经为您提供了线性运动学的物理方程，您可以使用它们直接计算未来的位置、速度和冲击时间。

eg`s = 0.5 * (u + v) * t;`给出未来时间 t 之后的位移。将该位移与距平面的距离进行比较，您将得到球体是否会撞击平面。再说一次，我建议您先阅读[http://en.wikipedia.org/wiki/Linear_motion](http://en.wikipedia.org/wiki/Linear_motion)和简单的东西，然后再阅读[http://en.wikipedia.org/wiki/Kinematics](http://en.wikipedia.org/wiki/Kinematics)。

还有另一种方法，如果您期望或假设没有其他力作用在球体上，那么您进行射线/平面碰撞测试以找到它将撞击平面的时间 t，在这种情况下，请阅读[http://en .wikipedia.org/wiki/Line-plane_intersection](http://en.wikipedia.org/wiki/Line-plane_intersection)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:53:54.627

总会有-9.8y的重力作用在球体上。在悬浮球体的情况下，这将导致向下加速（净力非零）。在球体位于平面上的情况下，这将导致平面对球体施加法向力。如果平面与静止的球体完全水平，则该法向力将恰好为+9.8y，这将完全抵消重力。对于在非水平平面上静止的球体，法向力为`9.8y * cos(angle)`（角度在 -90 到 +90 度之间）。

当运动的球体撞击平面时，事情会变得更加复杂，因为法向力将取决于速度和平面/球体的材料属性。根据您的应用程序要求，您可以忽略这一点，也可以用法向力尝试一些事情，看看它是如何工作的。

对于您的具体问题：

1.  我相信接触更具体地是当`dist == 0.0f`球体和平面接触时。我假设您的碰撞考虑到球体可能在任何物理时间步长中移过平面。
2.  现在，当球体接触时，您似乎没有从平面对球体施加任何法向力。我会通过检查接触 ( `dist == 0.0f`) 来做到这一点，如果为真，则向球体添加法向力。在一个简单的情况下，一个球体落到一个接近水平的平面上（角度在-90 到 +90 度之间），它只是`sphereTotalForces += Vector3D(0, 9.8 * cos(angle), 0)`.

**编辑：**

根据您的问题和代码的详细信息（未给出），从[这里](http://www.miguelcasillas.com/?p=65)`dist`计算从球体边缘到平面的距离的方程式可能不正确。假设您的飞机经过原点，正确的方程式是：

```
dist = Vec3Dot(&spherePosition, &plane->GetNormal()) - sphereRadius; 
```

这与您的方程式相同 if `plane->d == sphereRadius`。请注意，如果飞机不在原点，则使用：

```
D3DXVECTOR3 vecTemp(spherePosition - pointOnPlane);
dist = Vec3Dot(&vecTemp, &plane->GetNormal()) - sphereRadius; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T22:51:11.743

物理问题的答案：

```
f = mg + other_f; // m = mass, g = gravity (9.8)
a = f / m; // a = acceleration
v = u + at; // v = new speed, u = old speed, t = delta time
s = 0.5 * (u + v) *t; 
```

发生碰撞时，将两个速度都更改为 0（或 v 和 u = -(u * 0.7)，如果您希望它反弹）。

因为速度 = 0，所以球是静止的。

如果是 2D 或 3D，那么只需将表面法线方向的速度改为 0，保持平行速度不变即可。这将导致球在表面上滚动。

如果球切到表面，您必须将球移动到表面。您可以将碰撞距离设置为少量（例如 0.001）以确保它保持静止。

[http://www.physicsforidiots.com/dynamics.html#vuat](http://www.physicsforidiots.com/dynamics.html#vuat)

编辑：

NeHe 是游戏引擎设计的一个惊人来源：这是一个关于碰撞检测的页面，描述非常好：http: [//nehe.gamedev.net/tutorial/collision_detection/17005/](http://nehe.gamedev.net/tutorial/collision_detection/17005/)

编辑2：（来自NeHe）

```
double DotProduct=direction.dot(plane._Normal); // Dot Product Between Plane Normal And Ray Direction
Dsc=(plane._Normal.dot(plane._Position-position))/DotProduct; // Find Distance To Collision Point
Tc= Dsc*T / Dst
Collision point= Start + Velocity*Tc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:30:29.717

这个问题的确切解决方案涉及一些非常严肃的数学。如果您想要一个近似的解决方案，我*强烈*建议您分阶段开发它。

1) 确保您的 sim 在没有重力的情况下工作。球必须穿过空间并与有角度的无摩擦表面发生非弹性（或部分弹性）碰撞。

2）引入重力。这会将弹道轨迹从直线变为抛物线，并引入*滑动*，但不会对碰撞产生太大影响。

3）引入静摩擦和动摩擦（独立）。这些将改变滑动的动力。现在不要担心碰撞中的摩擦。

4) 给出球的角速度和转动惯量。这是一大步。确保您可以对其施加扭矩并获得真实的角加速度。请注意，旋转质量的实际行为可能是违反直觉的。

5) 尝试在重力作用下沿水平表面滑动球。如果一切都做对了，它的角速度会逐渐增加，线速度会逐渐减小，直到变成一个滚动。尝试给球一些初始旋转（“draw”、“follow”或“english”）。

6）尝试相同，但在倾斜的表面上。这是一个相对较小的步骤。

如果你走到这一步，你将拥有一个非常逼真的模拟游戏。不要试图跳过任何步骤，你只会让自己头疼。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T10:03:37.450

我建议在那之后看看 erin cato 的文章（Box2D 的作者）和 Glenn fiedler 的文章。重力是一种强大的加速度，会产生强大的力。由于浮动不精确、可变时间步长和欧拉积分，很容易很快出现错误的模拟。球体在平面表面重新定位，以防球体开始隐藏自己通过平面是强制性的，我注意到只有当球体的速度与平面法线相反时才这样做更好（这可以比较在 3D 渲染中进行面剔除：不考虑背面平面）。

此外，大多数物理引擎停止对空闲物体的模拟，并且大多数游戏在移动时从不考虑重力，只有在下落时才会考虑。他们使用“导航网格”和自定义系统，只要他们确定模拟对象坚持其“地面”即可。

我不知道那里有完美的物理模拟器，总会有集成爆炸，错过碰撞（寻找“扫描碰撞”）......这需要大量的经验微调。

另外我建议您寻找“脉冲”，这是一种避免在遇到碰撞时手动调整速度的方法。

还可以查看“每个计算机科学家都应该了解的浮点知识”

祝你好运，你进入了一个雷区，随机无法理解，数字计算机科学咬手指的领域:)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-03T17:56:22.993

为了更高的保真度（不会解决您的主要问题），我会将您的时间步长更改为

```
mAcceleration = mTotalForces / mMass;
Vector3 translation = (mVelocity * fElapsedTime) + 0.5 * mAcceleration * pow(fElapsedTime, 2);
mVelocity += mAcceleration * fElapsedTime; 
```

您提到球体是刚体；您是否还将飞机建模为刚性？如果是这样，那么在接触和完全弹性碰撞的那一刻，您将拥有无限的点力，而没有明显的动量耗散。

力和速度不能相加（不兼容的单位）；如果您只是尝试对运动学建模，则可以忽略质量并仅使用加速度和速度。

假设球体只是通过完全非弹性碰撞（没有反弹）落到水平面上，你可以这样做 [注意，我不太了解 C 语法，所以这将是 Pythonic]

```
mAcceleration = if isContacting then (0, 0, 0) else (0, -9.8, 0) 
```

如果你在碰撞中增加一些弹性（比如动量守恒的一半），它会更像

```
mAcceleration = (0, -9.8, 0) + if isContacting then (0, 4.9, 0) 
```

# php - 简单的 PHP IF 语句无法正确评估

> ID：10393842
> 
> 赞同：1
> 
> 时间：2012-05-01T05:12:51.023
> 
> 标签：php

这个 PHP IF 语句总是导致“假”，我不知道为什么。任何帮助是极大的赞赏。

其中 $i 作为 0 传入，$j 作为 4 传入（这些数字在 POST 中得到验证）

```
$i = $_POST['entry'];
$j = $_POST['j'];

function tabs() {
  if ($i < $j)
    echo 'i is less than j';
  else
    echo 'false';
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T05:30:11.063

`$i`并且`$j`不在以下[可见范围](http://php.net/manual/en/language.variables.scope.php)内`tabs()`：

> … [W]在用户定义的函数中，引入了本地函数范围。默认情况下，函数内部使用的任何变量都仅限于本地函数范围。

将它们作为参数传递或将它们设为全局（第一种是首选方式）：

**参数**

```
$i = $_POST['entry'];
$j = $_POST['j'];

function tabs($i, $j) {
  if ($i < $j)
    echo 'i is less than j';
  else
    echo 'false';
};

tabs($i, $j); 
```

**全球的**

```
$i = $_POST['entry'];
$j = $_POST['j'];

function tabs() {
  global $i, $j;
  if ($i < $j)
    echo 'i is less than j';
  else
    echo 'false';
};

tabs(); 
```

* * *

**编辑**
或者，您可以直接`$_POST`从`tabs()`函数内访问超全局数组，或`$_GLOBALS['i']`分别`$_GLOBALS['j']`访问。

# c - Linux 内核中的类型检查宏是如何工作的？

> ID：10393844
> 
> 赞同：17
> 
> 时间：2012-05-01T05:13:13.137
> 
> 标签：c, linux, linux-kernel

Linux 内核 4.16的文件`include/linux/typecheck.h`包含此代码。

```
#define typecheck(type,x) \
({      type __dummy; \
        typeof(x) __dummy2; \
        (void)(&__dummy == &__dummy2); \
        1; \
} 
```

它检查是否`x`与参数类型相同`type`。

但我无法理解这条线：

```
 (void)(&__dummy == &__dummy2); 
```

比较两个变量的第一个地址有什么帮助？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T05:30:05.793

这使用了两个 GCC 扩展——表达式语句`({ ... })`和`typeof()`.

1.  展开的第一行声明了一个命名类型的变量`type`。
2.  扩展的第二行声明了一个与变量或表达式相同类型的变量`x`。
3.  第三行比较两个指针，只有当两个虚拟变量的类型匹配时才会匹配，产生指针不匹配警告（如果用 编译则错误`-Werror`）。
4.  最后一行（包含`1`）是表达式的值——等价于 true。

因此，如果类型`x`与命名类型不同，则会收到编译警告/错误。

示例代码：

```
#include <stdio.h>

#define typecheck(type,x) \
({      type __dummy; \
        typeof(x) __dummy2; \
        (void)(&__dummy == &__dummy2); \
        1; \
})

int main(void)
{
    int x;
    if (typecheck(int, x))
        printf("int x OK\n");
    if (typecheck(double, x))
        printf("double x OK\n");
    return(0);
} 
```

编译消息：

```
$ /usr/bin/gcc -O3 -g -std=gnu99 -Wall -Wextra xx.c -o xx  
xx.c: In function ‘main’:
xx.c:15: warning: comparison of distinct pointer types lacks a cast
$ 
```

请注意，因为我没有使用`-Werror`，所以代码编译为“OK”。输出是：

```
int x OK
double x OK 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-01T05:31:38.743

将指针与不兼容的类型进行比较是违反约束的，需要编译器发出诊断。请参阅 6.5.9 等式运算符：

> 约束
> 
> 应满足下列条件之一：
> 
> *   两个操作数都有算术类型；
> *   两个操作数都是指向兼容类型的合格或不合格版本的指针；
> *   一个操作数是指向对象或不完整类型的指针，另一个是指向 void 的限定或非限定版本的指针；或者
> *   一个操作数是指针，另一个是空指针常量。

和 5.1.1.3 诊断：

> 如果预处理翻译单元或翻译单元包含违反任何语法规则或约束的行为，则符合要求的实现应产生至少一个诊断消息（以实现定义的方式标识），即使该行为也明确指定为未定义或实现-定义。在其他情况下不需要生成诊断消息。

# php - 如何在 MySql 中选择以下内容？

> ID：10393846
> 
> 赞同：0
> 
> 时间：2012-05-01T05:13:50.327
> 
> 标签：php, mysql, select

我有一个用户系统，其中用户帐户可以拥有从属帐户。

为了表达这种关系，我有以下 mysql 表：

```
TABLE ACCOUNTS
ID
name

TABLE OWNEDACCOUNTS
accountID -> ACCOUNTS(ID)
ownerID -> ACCOUNTS(ID) 
```

虽然从这些表中并不明显，但这种关系只能深入 2 个级别：

账户 -> 子账户 -> 子子账户

目前，我可以选择属于顶级帐户的所有子帐户，其中包含以下内容：

```
SELECT  a.ID
FROM    accounts AS a
JOIN    ownedAccounts AS o
ON      o.accountID = a.ID
        AND o.ownerID = ? 
```

但是，我真正想要的是选择属于单个顶级帐户的所有子帐户和所有子帐户。我该怎么做呢？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:22:22.333

```
Select ...
From accounts AS a
    Join ownedAccounts AS o
        On o.accountID = a.ID
    Join accounts AS owner1
        On owner1.ID = o.ownerID
    Left Join ownedAccounts AS o2
        On o2.accountID = owner1.ID
    Left Join accounts As owner2
        On owner2.ID = o2.ownerID
Where o.ownerID = ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:31:16.027

这应该列出您拥有的每个帐户，以及它的 subs 和 sub-subs 的计数。希望这是一个好的起点。

```
SELECT  a.ID, count(sub.accountID), count(subsub.accountID)
FROM    accounts AS a
LEFT JOIN    ownedAccounts AS sub ON      sub.ownerID = a.ID
LEFT JOIN    ownedAccounts AS subsub ON      subsub.ownerID = sub.accountID 
```

# bash - 如何在 Bash 脚本中使用 Expect

> ID：10393848
> 
> 赞同：8
> 
> 时间：2012-05-01T05:14:14.370
> 
> 标签：bash, expect

我正在尝试编写一个脚本，从 Git 存储库中提取我的软件的最新版本并更新配置文件。但是，从存储库中提取时，我必须输入密码。我希望脚本自动执行所有操作，因此我需要它自动为我填写。我发现这个网站解释了如何使用 Expect 来查找密码提示并发送密码。我无法让它工作。

这是我的脚本：

```
#!/usr/bin/expect -f
set password [lrange $argv 0 0]
set timeout -1

clear
echo "Updating Source..."
cd sourcedest
git pull -f origin master

match_max 100000
# Look for passwod prompt
expect "*?assword:*"
# Send password aka $password
send -- "$password\r"
# send blank line (\r) to make sure we get back to gui
send -- "\r"
expect eof

git checkout -f master
cp Config/database.php.bak Config/database.php
cp webroot/index.php.bak webroot/index.php
cp webroot/js/config.js.bak webroot/js/config.js 
```

我究竟做错了什么？

这是我从以下网站获得的：http: [//bash.cyberciti.biz/security/expect-ssh-login-script/](http://bash.cyberciti.biz/security/expect-ssh-login-script/)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T00:34:23.850

这几乎取自评论，并附有我自己的一些观察。但似乎没有人想对此提供真正的答案，所以这里是：

您的问题是您有一个*Expect*脚本，并且您将其*视为 Bash*脚本。Expect 不知道`cd`,`cp`和是什么`git`意思。巴什会。您需要一个调用 Expect 的 Bash 脚本。例如：

```
#!/usr/bin/env bash

password="$1"
sourcedest="path/to/sourcedest"
cd $sourcedest

echo "Updating Source..."
expect <<- DONE
  set timeout -1

  spawn git pull -f origin master
  match_max 100000

  # Look for password prompt
  expect "*?assword:*"
  # Send password aka $password
  send -- "$password\r"
  # Send blank line (\r) to make sure we get back to the GUI
  send -- "\r"
  expect eof
DONE

git checkout -f master
cp Config/database.php.bak Config/database.php
cp webroot/index.php.bak webroot/index.php
cp webroot/js/config.js.bak webroot/js/config.js 
```

但是，正如 larsks 在评论中指出的那样，使用 SSH 密钥可能会更好。然后你就可以完全摆脱这个`expect`电话了。

# facebook - Facebook应用程序开发：选择朋友

> ID：10393853
> 
> 赞同：0
> 
> 时间：2012-05-01T05:15:13.940
> 
> 标签：facebook, facebook-apps, facebook-friends

我正在开发一个 Facebook 应用程序，用于与朋友分享食谱和创建菜单：[https ://apps.facebook.com/336259823101185](https://apps.facebook.com/336259823101185)

我想创建一种方法来选择朋友并获取他们的 ID（但不发送任何通知或任何内容）。有什么我可以使用的插件吗？似乎 fb:friend-selector 做了我正在寻找的东西，但它已被弃用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:22:37.267

一种流行的方法是使用这个第三方工具：[https ://github.com/mbrevoort/jquery-facebook-multi-friend-selector](https://github.com/mbrevoort/jquery-facebook-multi-friend-selector)

API 中没有内置方法来呈现这样的对话框，如果该 jquery 示例不符合您的用例，您必须自己实现一些东西

# android - Android 音频服务泄露了服务连接

> ID：10393854
> 
> 赞同：3
> 
> 时间：2012-05-01T05:15:16.623
> 
> 标签：android, logcat, android-audiomanager

我正在开发音乐播放器上的应用程序。我正面临类似的错误。

'* *.MusicPlayerTabWidget 已泄露 ServiceConnection **

请就此发表意见。我也为此分享了我的**Logcat**。

```
05-01 10:38:03.226: W/KeyCharacterMap(4225): Using default keymap
05-01 10:38:03.429: E/ActivityThread(4225): Activity com.pvMusic.pvm.MusicPlayerTabWidget has leaked ServiceConnection com.pvMusic.pvm.MusicPlayerTabWidget$1@4051c6f0 that was originally bound here
05-01 10:38:03.429: E/ActivityThread(4225): android.app.ServiceConnectionLeaked: Activity com.pvMusic.pvm.MusicPlayerTabWidget has leaked ServiceConnection com.pvMusic.pvm.MusicPlayerTabWidget$1@4051c6f0 that was originally bound here
05-01 10:38:03.429: E/ActivityThread(4225):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:938)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:833)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.app.ContextImpl.bindService(ContextImpl.java:879)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.content.ContextWrapper.bindService(ContextWrapper.java:347)
05-01 10:38:03.429: E/ActivityThread(4225):     at com.pvMusic.pvm.MusicPlayerTabWidget.onStart(MusicPlayerTabWidget.java:175)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.app.Activity.performStart(Activity.java:3791)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1624)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.os.Looper.loop(Looper.java:130)
05-01 10:38:03.429: E/ActivityThread(4225):     at android.app.ActivityThread.main(ActivityThread.java:3687)
05-01 10:38:03.429: E/ActivityThread(4225):     at java.lang.reflect.Method.invokeNative(Native Method)
05-01 10:38:03.429: E/ActivityThread(4225):     at java.lang.reflect.Method.invoke(Method.java:507)
05-01 10:38:03.429: E/ActivityThread(4225):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-01 10:38:03.429: E/ActivityThread(4225):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-01 10:38:03.429: E/ActivityThread(4225):     at dalvik.system.NativeStart.main(Native Method)
05-01 10:39:31.859: D/dalvikvm(4225): GC_EXPLICIT freed 166K, 46% free 3022K/5575K, external 557K/1031K, paused 52ms
05-01 10:39:31.906: D/dalvikvm(4225): GC_CONCURRENT freed 0K, 46% free 3022K/5575K, external 557K/1031K, paused 4ms+3ms 
```

此外，如果您有任何音乐播放器的参考教程，请与我分享..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T08:05:11.523

添加`unbindService(mConnection);`你的`onstop()`方法。代码将开始正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T06:23:24.380

如果您正在对 Activity 中的服务进行本地绑定，则需要确保在您的 Activity 关闭时断开与该服务的连接。否则，应用程序将开始泄漏连接，就像您的错误一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T05:23:44.140

您在退出活动后尝试显示某些内容（您的线程回来了）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T06:27:24.707

如此处所示[，](https://stackoverflow.com/questions/2850573/activity-has-leaked-window-that-was-originally-added)您应该覆盖`onDestroy`并关闭活动关闭后正在运行的对话框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-24T10:03:25.183

当您的 Service 注册了 BroadcastReceiver 并且没有取消注册时，也会发生这种情况。

所以请在 onDestroy 中取消注册

```
 unregisterReceiver(mReceiver); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-30T00:20:46.650

如果您改为绑定到 getApplicationContext()，则只要您的应用程序正在运行，该绑定就会运行。如果您绑定到 getContext()，并且 Activity 的上下文被破坏，android 会注意到您没有关闭与该上下文相关的连接。

# c# - MonoTouch 到物镜 C

> ID：10393857
> 
> 赞同：1
> 
> 时间：2012-05-01T05:15:33.433
> 
> 标签：c#, objective-c, ios, xamarin.ios, reflector

在 .NET 中，如果您编译某些内容，则可以对其进行反编译并使用[Reflector](http://www.reflector.net/)等程序查看源代码。

我了解 Objective C 的基础知识，并且宁愿尝试使用 Objective C 而不是 MonoTouch。我使用 MonoTouch 的原因是因为有些事情我不知道如何用 Objective C 来做。

例如：

```
 UdpClient client = new UdpClient("192.168.0.120",5050);
 client.Send(new byte[]{0,1,2,3,4},5); 
```

我整天都在尝试用 Objective C 做这两行代码，但我做不到。无论如何，我想知道是否有可能像 Reflector 一样将 MonoTouch 变成 Objective C，以用于学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:15:02.150

我知道没有工具可以将 MonoTouch C# 转换为 Obj-C。

您可能想查看[MT Rosetta Stone](http://tirania.org/tmp/rosetta.html)，它将各种 MT C# 类和方法映射到它们的 Obj-C 对应物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:18:54.247

**反射器**（和类似工具）通过读取编译代码（即程序集）的**IL来工作。**然后他们让您将此 IL*反编译*成高级**.NET**语言，例如 C#、VB.NET、Delphi、F#...

这很有用，因为生成的代码通常看起来很接近原始源代码（减去因为它们不是 IL、元数据或调试符号的一部分而丢失的东西），并且可以成为一个很好的学习工具。

这在您的情况下不起作用，因为 Objective C 不是一种 .NET 语言（并且 AFAIK 没有人制作 .NET 版本）。**理论上**，此类工具可以显示非 .NET 语言的*语法*，但在实践中，它不会很有帮助。

为什么 ？生成的源代码不会编译回可执行代码，例如，Objective C 编译器不会找到对基类库 (.NET BCL) 的所有调用。由于 BCL 和 Apple 提供的不同框架（用于 iOS 和 OSX）是完全不同的（例如您的`UdpClient`示例代码），因此它不会真正帮助您学习 iOS 开发。

**注意：** MonoTouch 不会将 C#（或 .NET）转换为 Objective C 代码。JIT（模拟器）或 AOT（设备）编译器将直接生成本机（i386 或 armv6/7）汇编代码。

# javascript - 构造函数总是函数对象吗？

> ID：10393858
> 
> 赞同：6
> 
> 时间：2012-05-01T05:15:50.027
> 
> 标签：javascript

我正在阅读最新的 ECMA-262 参考资料，2011 年 6 月 5.1 版。

在第[8.6.2](http://es5.github.com/#x8.6.2)节的表 9 中，我们有关于 [[Construct]] 内部属性的内容：

> 创建一个对象。通过 new 运算符调用。SpecOp 的参数是传递给 new 运算符的参数。实现此内部方法的对象称为构造函数。

该标准并没有说构造函数必须是 Function 对象。那么我们可以有一个不是函数对象的构造函数对象吗？

[根据要求链接到标准](http://www.ecma-international.org/publications/standards/Ecma-262.htm)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T06:58:47.207

答案非常简单。[ES5 § 4.3.4](http://es5.github.com/#x4.3.4)说：

`Constructor` `Function object that creates and initialises objects.`

所以你有了它，根据定义，只有一个 Function 可以是一个构造函数。但是，很可能有一些宿主对象的行为类似于构造函数，它们不具有本机 Function 对象的任何其他属性（例如，IE 中的原始 XMLHttpRequest 对象在 ActiveX 中实现）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T09:05:00.727

虽然定义了术语“构造函数”（正如@RobG[指出的那样](https://stackoverflow.com/a/10394568/27862)），但没有什么可以阻止非“构造函数”对象拥有`[[Construct]]`方法。

这有点令人困惑。这意味着您可以`new`在不是 a 的对象上使用运算符（因此不是[4.3.4](http://es5.github.com/#x4.3.4)`Function`中的“构造函数” ），但确实提供了一种方法。`[[Construct]]`

请注意，没有任何标准对象符合此条件，但[宿主对象](http://es5.github.com/#x4.3.8)确实可以。像 Java 这样的浏览器插件可能会暴露一些对象，如下所示：

```
new java.lang.String(); // it works, so java.lang.String has a [[Construct]] method
java.lang.String instanceof Function // false
Object.prototype.toString.call(java.lang.String).indexOf('Function') // -1 
```

请注意，即使`typeof java.lang.String`返回不是函数。根据[11.4.3](http://es5.github.com/#x11.4.3)这是正确的（它是带有方法的宿主对象）`"function"``java.lang.String``[[Call]]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T20:38:28.603

添加到 Pumbaa80 的[答案](https://stackoverflow.com/a/10395626/480894)（这对于评论来说太长了）。

混淆增加了[13.2.2](http://es5.github.com/#x13.2.2)，根据它，当一个**函数** `construct`被执行时，它的`call`操作必须被执行（但它没有说明当`construct`一个不是函数的对象被执行时必须做什么）。现在，根据[9.11](http://es5.github.com/#x9.11)`call`实现的对象是可调用的**函数**对象。

同样根据[4.2](http://es5.github.com/#x4.2) “函数是可调用对象”。但这当然并不意味着每个可调用对象都是一个函数。

因此，如果我得到这个正确的非函数对象可以有一个`Construct`方法，也可以有一个`Call`方法。`java.lang.String`就是这样一个例子。

# delphi - Graphics.TBitmap 从 JPEG 帧成功解码导致 GetObject() 调用后为空 TDibSection

> ID：10393868
> 
> 赞同：2
> 
> 时间：2012-05-01T05:17:12.183
> 
> 标签：delphi, graphics, bitmap, jpeg

我正在使用 FastJpeg 库 (jpegdec.pas) 将 JPEG 帧解码为 Graphics.TBitmap 对象。解码工作正常，我使用 TBitmap.SaveToFile() 方法将位图打印到文件以进行视觉检查，它看起来很棒。然后我使用 TBitmap 句柄调用 GetObject() 以获取 TDibSection 对象。返回的 TDibSection 对象确实显示了顶级字段（bmWidth、bmHeight 等）的正确值，尽管 bmBit 为 NIL，我发现令人惊讶的是，因为 SaveToFile() 调用确实将图像正确地写入了磁盘。我遇到的问题是 TBitmapHeaderInfo 字段（dsBmih）全为零。此外，如果重要的话，dsBitFields、dshSection 和 dsOffset 字段也都为零。就好像它填写了主要字段，之后的所有内容都被忽略了。这里'

```
dsBm: (0, 320, 240, 1280, 1, 32, nil)
dsBmih: (0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
dsBitfields: (0, 0, 0)
dshSection: 0
dsOffset: 0 
```

下面的代码基本上显示了我在做什么。为什么我得到一个空白的 TBitmapHeaderInfo 字段？这导致我对 AVI dll 的调用出现问题，因此我需要解决此问题。

这是代码片段

```
var
    theBitmap: Graphics.TBitmap;
    aryBytes: TDynamicByteArray;
    dibs: TDibSection;
begin
    aryBytes := nil;

    // The following function loads JPEG frame #0 from a collection of JPEG frames.
    aryBytes := LoadJpegFrame(0);

    // Decode the first JPEG frame so we can pass it to the compressor
    //  selector call.
    theBitmap := JpegDecode(@aryBytes[0], Length(aryBytes));

    if GetObject(theBitmap.Handle, sizeof(dibs), @dibs) = 0 then
        raise Exception.Create('Get Object failed getting the TDibSection information for the bitmap.');

    // ... The TBitmapHeaderInfo field in dibs is empty as described in the post.
end; 
```

更新：为了回应 TLama 的评论，我更新了代码，如下所示。现在可以了。我有一些疑问：

1）代码可以精简吗？它显然比上面的原始代码复杂得多，也许我执行了太多步骤。

2) 我是否释放了所有内存并释放了我需要的所有 GDI 句柄和对象？我不想要任何内存泄漏。

这是更新的代码：

```
var
    hr: HRESULT;
    bmi: TBitmapInfo;
    pImg: PJpegDecode;
    jpegDecodeErr: TJpegDecodeError;
    hbm: HBITMAP;
    pBits: Pointer;
begin
    hr := 0; pImg := nil; hbm := 0; pBits := nil;

    try
        jpegDecodeErr := JpegDecode(@aryBytes[0], Length(aryBytes), pImg);

        if jpegDecodeErr <> JPEG_SUCCESS then
            raise Exception.Create('(TfrmMain_moviemaker_.cmdTestClick) The bitmap failed to decode with error code: ' + IntToStr(Ord(jpegDecodeErr)));

        if not Assigned(pImg) then
            raise Exception.Create('(TfrmMain_moviemaker_.cmdTestClick) The bitmap decoded from the first JPEG frame in the video file is unassigned: ' + fullVideoInFilename);

        pImg^.ToBMI(bmi);

        theBitmap := pImg.ToBitmap;

        // Now create a DIB section.
        hbm := CreateDIBSection(theBitmap.Handle, bmi, DIB_RGB_COLORS, pBits, 0, 0);

        if hbm = ERROR_INVALID_PARAMETER then
            raise Exception.Create('(TfrmMain_moviemaker_.cmdTestClick) One of the parameters passed to CreateDIBSection is invalid.');

        if hbm = 0 then
            raise Exception.Create('(TfrmMain_moviemaker_.cmdTestClick) The call to CreateDIBSection failed.');

        // Select the compressor.  This call USED to fail before TLama's
        //  suggestion.  Now it works.
        hr := aviMaker.compression(hbm, nil, true, Self.Handle);

        if hr <> S_OK then
            raise Exception.Create('(TfrmMain_moviemaker_.cmdTestClick) Error during compressor selector call: ' + FormatAviMessage(hr));
    finally
        if Assigned(pImg) then
        begin
            pImg^.Free;
            pImg := nil;
        end;

        if Assigned(theBitmap) then
            FreeAndNil(theBitmap);

        if hbm > 0 then
            DeleteObject(hbm);
    end; // try (2)
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T21:49:47.037

由于您只需要从 JPEG 文件解码的第一帧的 DIB 部分的句柄，我认为使用[`CreateDIBSection`](http://msdn.microsoft.com/en-us/library/dd183494%28VS.85%29.aspx)并复制到由函数调用分配的内存块中的 指向的内容`TJpegDecode.pRGB`应该是足够的DIB 部分的值已经。

```
procedure ProbeGetObject(ACanvas: TCanvas; AGDIObject: HGDIOBJ);
var
  Width, Height: Integer;
  DIBSection: TDIBSection;
  BitmapInfo: TBitmapInfo;
begin
  if GetObject(AGDIObject, SizeOf(DIBSection), @DIBSection) <> 0 then
  begin
    FillChar(BitmapInfo, SizeOf(BitmapInfo), 0);
    BitmapInfo.bmiHeader := DIBSection.dsBmih;
    // if you comment the following line, the image will be rendered flipped
    BitmapInfo.bmiHeader.biHeight := - BitmapInfo.bmiHeader.biHeight;
    Width := DIBSection.dsBm.bmWidth;
    Height := Abs(DIBSection.dsBm.bmHeight);
    StretchDIBits(ACanvas.Handle, 0, 0, Width, Height, 0, 0, Width, Height,
      DIBSection.dsBm.bmBits, BitmapInfo, DIB_RGB_COLORS, SRCCOPY);
  end;
end;

procedure InitializeCompressor(Buffer: Pointer; BufferLen: Integer);
var
  ScreenDC: HDC;
  DIBHandle: HBITMAP;
  DIBValues: Pointer;
  BufferSize: DWORD;
  BufferHandle: THandle;
  BufferPointer: Pointer;
  JPEGImage: PJpegDecode;
  BitmapInfo: TBitmapInfo;
begin
  if JpegDecode(Buffer, BufferLen, JPEGImage) = JPEG_SUCCESS then
  try
    JPEGImage^.ToBMI(BitmapInfo);
    BufferSize := Abs(BitmapInfo.bmiHeader.biWidth *
      BitmapInfo.bmiHeader.biHeight * 4);
    BufferHandle := CreateFileMapping(INVALID_HANDLE_VALUE, nil,
      PAGE_READWRITE, 0, BufferSize, nil);
    if BufferHandle <> 0 then
    try
      BufferPointer := MapViewOfFile(BufferHandle, FILE_MAP_WRITE, 0, 0, 0);
      if Assigned(BufferPointer) then
      begin
        CopyMemory(BufferPointer, JPEGImage^.pRGB, BufferSize);
        ScreenDC := GetDC(0);
        if ScreenDC <> 0 then
        try
          DIBHandle := CreateDIBSection(ScreenDC, BitmapInfo, DIB_RGB_COLORS,
            DIBValues, BufferHandle, 0);
          if (DIBHandle <> 0) and Assigned(DIBValues) then
          try
            ProbeGetObject(Form1.Canvas, DIBHandle);
            // here try to initialize the compressor, the DIB section should
            // contain values obtained from the JPEG decoder; in the DIBHandle
            // variable is the handle to the DIB section
          finally
            DeleteObject(DIBHandle);
          end;
        finally
          ReleaseDC(0, ScreenDC);
        end;
      end;
    finally
      CloseHandle(BufferHandle);
    end;
  finally
    JPEGImage^.Free;
  end;
end; 
```

# javascript - 原型继承和新关键字

> ID：10393869
> 
> 赞同：2
> 
> 时间：2012-05-01T05:17:21.170
> 
> 标签：javascript

在继承方法下的backbone.js中，作者这样做：

```
var ctor = function() {};
// some other code ...

var child;
// some other code ...
ctor.prototype = parent.prototype;
child.prototype = new ctor(); 
```

据我了解，以上是允许新对象继承父对象的原型链。我试图解决这个问题，但在实践中，上述内容与直接分配原型之间有区别吗？

```
child.prototype = parent.prototype 
```

我知道存在这个 [[prototype]] 对象，除非通过 new 关键字，否则无法直接访问。但是，鉴于大多数对象声明的形式为

```
var SomeObj = function() {};
SomeObj.prototype.test = function() { return "Hello World"; } 
```

上述原型分配的实际差异是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:39:02.420

请记住，原型是父类型的*实例*。使用`child.prototype = parent.prototype`会将孩子的原型设置为等于父母的原型，而不是父母的原型实例。

如果你使用 : 会出现一个**大问题**`child.prototype = parent.prototype`：如果你试图改变孩子的原型，你也改变了父母的原型，因为它们是同一个对象。

```
Child.prototype.childOnlyValue = 5;
// WARNING: Parent.prototype.childOnlyValue is now also 5,
//             because Parent.prototype === Child.prototype 
```

创建父级的新实例是绝对必要的。否则，您将拥有一个带有单个共享原型的扁平原型链，因此您将遇到我上面概述的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T23:17:00.773

这是描述上述情况的脚本

```
var x = {
    // do nothing
};

var a = function() {};

a.prototype = x;

var b = new a();
console.log("b.__proto__ is x? " + (b.__proto__ == x)); // true

var c = function() {};
c.prototype = new a();
console.log("c prototype.__proto__ is x? " + (c.prototype.__proto__ == x)); // true

var anotherFn = function() {
    // do nothing
};
c.prototype.aFn = anotherFn;

var d = new c();
console.log("d __proto__^2 is x?" + (d.__proto__.__proto__ == x)); // true
console.log("d __proto__.aFn is anotherFn? " + (d.__proto__.aFn == anotherFn)); // true 
```

# ajax - $.ajax - 发布到 https

> ID：10393870
> 
> 赞同：0
> 
> 时间：2012-05-01T05:17:42.117
> 
> 标签：ajax, jquery

我在发送 https 时遇到了一个小问题，尽管 ajax 任何人都可以查看下面的代码并让我知道天气我做错了什么。

```
$(function(){
    $('form').submit(function() {
        Username = $("input[name=Username]").val();
        AccountCode = $("input[name=AccountCode]").val();
        MerchantNumber = $("input[name=MerchantNumber]").val();
        CustomerNumber = $("input[name=CustomerNumber]").val();
        vPassword = $("input[name=Password]").val();
    md5 = $.md5(AccountCode+Username+MerchantNumber+CustomerNumber+vPassword);
    //MD5[AccountCode+Username+MerchantNumber+CustomerNumber+vPassword]
    //alert(md5);
      checkout($(this).serialize()+"&password="+md5);
      return false;
    });
});

function checkout(formstring){
    $.ajax({
      type: 'POST',
      url: "https://services.incard.com.au/processpayment.ashx",
      data: formstring,
      dataType: 'json',
      contentType: "application/x-www-form-urlencoded;charset=utf-8",
      beforeSend: function() {
        switch (e) {
        case 3:
         //alert("jajka");
        break;  
        }
      },
      success: function(data){alert(data);},
      error:function(data){alert(data);}
    });
    return false;
}

/*
 * jQuery MD5 Plugin 1.2.1
 * https://github.com/blueimp/jQuery-MD5
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 * 
 * Based on
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */

/*jslint bitwise: true */
/*global unescape, jQuery */

(function ($) {
    'use strict';

    /*
    * Add integers, wrapping at 2^32\. This uses 16-bit operations internally
    * to work around bugs in some JS interpreters.
    */
    function safe_add(x, y) {
        var lsw = (x & 0xFFFF) + (y & 0xFFFF),
            msw = (x >> 16) + (y >> 16) + (lsw >> 16);
        return (msw << 16) | (lsw & 0xFFFF);
    }

    /*
    * Bitwise rotate a 32-bit number to the left.
    */
    function bit_rol(num, cnt) {
        return (num << cnt) | (num >>> (32 - cnt));
    }

    /*
    * These functions implement the four basic operations the algorithm uses.
    */
    function md5_cmn(q, a, b, x, s, t) {
        return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);
    }
    function md5_ff(a, b, c, d, x, s, t) {
        return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);
    }
    function md5_gg(a, b, c, d, x, s, t) {
        return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);
    }
    function md5_hh(a, b, c, d, x, s, t) {
        return md5_cmn(b ^ c ^ d, a, b, x, s, t);
    }
    function md5_ii(a, b, c, d, x, s, t) {
        return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);
    }

    /*
    * Calculate the MD5 of an array of little-endian words, and a bit length.
    */
    function binl_md5(x, len) {
        /* append padding */
        x[len >> 5] |= 0x80 << ((len) % 32);
        x[(((len + 64) >>> 9) << 4) + 14] = len;

        var i, olda, oldb, oldc, oldd,
            a =  1732584193,
            b = -271733879,
            c = -1732584194,
            d =  271733878;

        for (i = 0; i < x.length; i += 16) {
            olda = a;
            oldb = b;
            oldc = c;
            oldd = d;

            a = md5_ff(a, b, c, d, x[i],       7, -680876936);
            d = md5_ff(d, a, b, c, x[i +  1], 12, -389564586);
            c = md5_ff(c, d, a, b, x[i +  2], 17,  606105819);
            b = md5_ff(b, c, d, a, x[i +  3], 22, -1044525330);
            a = md5_ff(a, b, c, d, x[i +  4],  7, -176418897);
            d = md5_ff(d, a, b, c, x[i +  5], 12,  1200080426);
            c = md5_ff(c, d, a, b, x[i +  6], 17, -1473231341);
            b = md5_ff(b, c, d, a, x[i +  7], 22, -45705983);
            a = md5_ff(a, b, c, d, x[i +  8],  7,  1770035416);
            d = md5_ff(d, a, b, c, x[i +  9], 12, -1958414417);
            c = md5_ff(c, d, a, b, x[i + 10], 17, -42063);
            b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);
            a = md5_ff(a, b, c, d, x[i + 12],  7,  1804603682);
            d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);
            c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);
            b = md5_ff(b, c, d, a, x[i + 15], 22,  1236535329);

            a = md5_gg(a, b, c, d, x[i +  1],  5, -165796510);
            d = md5_gg(d, a, b, c, x[i +  6],  9, -1069501632);
            c = md5_gg(c, d, a, b, x[i + 11], 14,  643717713);
            b = md5_gg(b, c, d, a, x[i],      20, -373897302);
            a = md5_gg(a, b, c, d, x[i +  5],  5, -701558691);
            d = md5_gg(d, a, b, c, x[i + 10],  9,  38016083);
            c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);
            b = md5_gg(b, c, d, a, x[i +  4], 20, -405537848);
            a = md5_gg(a, b, c, d, x[i +  9],  5,  568446438);
            d = md5_gg(d, a, b, c, x[i + 14],  9, -1019803690);
            c = md5_gg(c, d, a, b, x[i +  3], 14, -187363961);
            b = md5_gg(b, c, d, a, x[i +  8], 20,  1163531501);
            a = md5_gg(a, b, c, d, x[i + 13],  5, -1444681467);
            d = md5_gg(d, a, b, c, x[i +  2],  9, -51403784);
            c = md5_gg(c, d, a, b, x[i +  7], 14,  1735328473);
            b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);

            a = md5_hh(a, b, c, d, x[i +  5],  4, -378558);
            d = md5_hh(d, a, b, c, x[i +  8], 11, -2022574463);
            c = md5_hh(c, d, a, b, x[i + 11], 16,  1839030562);
            b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);
            a = md5_hh(a, b, c, d, x[i +  1],  4, -1530992060);
            d = md5_hh(d, a, b, c, x[i +  4], 11,  1272893353);
            c = md5_hh(c, d, a, b, x[i +  7], 16, -155497632);
            b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);
            a = md5_hh(a, b, c, d, x[i + 13],  4,  681279174);
            d = md5_hh(d, a, b, c, x[i],      11, -358537222);
            c = md5_hh(c, d, a, b, x[i +  3], 16, -722521979);
            b = md5_hh(b, c, d, a, x[i +  6], 23,  76029189);
            a = md5_hh(a, b, c, d, x[i +  9],  4, -640364487);
            d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);
            c = md5_hh(c, d, a, b, x[i + 15], 16,  530742520);
            b = md5_hh(b, c, d, a, x[i +  2], 23, -995338651);

            a = md5_ii(a, b, c, d, x[i],       6, -198630844);
            d = md5_ii(d, a, b, c, x[i +  7], 10,  1126891415);
            c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);
            b = md5_ii(b, c, d, a, x[i +  5], 21, -57434055);
            a = md5_ii(a, b, c, d, x[i + 12],  6,  1700485571);
            d = md5_ii(d, a, b, c, x[i +  3], 10, -1894986606);
            c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);
            b = md5_ii(b, c, d, a, x[i +  1], 21, -2054922799);
            a = md5_ii(a, b, c, d, x[i +  8],  6,  1873313359);
            d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);
            c = md5_ii(c, d, a, b, x[i +  6], 15, -1560198380);
            b = md5_ii(b, c, d, a, x[i + 13], 21,  1309151649);
            a = md5_ii(a, b, c, d, x[i +  4],  6, -145523070);
            d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);
            c = md5_ii(c, d, a, b, x[i +  2], 15,  718787259);
            b = md5_ii(b, c, d, a, x[i +  9], 21, -343485551);

            a = safe_add(a, olda);
            b = safe_add(b, oldb);
            c = safe_add(c, oldc);
            d = safe_add(d, oldd);
        }
        return [a, b, c, d];
    }

    /*
    * Convert an array of little-endian words to a string
    */
    function binl2rstr(input) {
        var i,
            output = '';
        for (i = 0; i < input.length * 32; i += 8) {
            output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);
        }
        return output;
    }

    /*
    * Convert a raw string to an array of little-endian words
    * Characters >255 have their high-byte silently ignored.
    */
    function rstr2binl(input) {
        var i,
            output = [];
        output[(input.length >> 2) - 1] = undefined;
        for (i = 0; i < output.length; i += 1) {
            output[i] = 0;
        }
        for (i = 0; i < input.length * 8; i += 8) {
            output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);
        }
        return output;
    }

    /*
    * Calculate the MD5 of a raw string
    */
    function rstr_md5(s) {
        return binl2rstr(binl_md5(rstr2binl(s), s.length * 8));
    }

    /*
    * Calculate the HMAC-MD5, of a key and some data (raw strings)
    */
    function rstr_hmac_md5(key, data) {
        var i,
            bkey = rstr2binl(key),
            ipad = [],
            opad = [],
            hash;
        ipad[15] = opad[15] = undefined;                        
        if (bkey.length > 16) {
            bkey = binl_md5(bkey, key.length * 8);
        }
        for (i = 0; i < 16; i += 1) {
            ipad[i] = bkey[i] ^ 0x36363636;
            opad[i] = bkey[i] ^ 0x5C5C5C5C;
        }
        hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);
        return binl2rstr(binl_md5(opad.concat(hash), 512 + 128));
    }

    /*
    * Convert a raw string to a hex string
    */
    function rstr2hex(input) {
        var hex_tab = '0123456789abcdef',
            output = '',
            x,
            i;
        for (i = 0; i < input.length; i += 1) {
            x = input.charCodeAt(i);
            output += hex_tab.charAt((x >>> 4) & 0x0F) +
                hex_tab.charAt(x & 0x0F);
        }
        return output;
    }

    /*
    * Encode a string as utf-8
    */
    function str2rstr_utf8(input) {
        return unescape(encodeURIComponent(input));
    }

    /*
    * Take string arguments and return either raw or hex encoded strings
    */
    function raw_md5(s) {
        return rstr_md5(str2rstr_utf8(s));
    }
    function hex_md5(s) {
        return rstr2hex(raw_md5(s));
    }
    function raw_hmac_md5(k, d) {
        return rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d));
    }
    function hex_hmac_md5(k, d) {
        return rstr2hex(raw_hmac_md5(k, d));
    }

    $.md5 = function (string, key, raw) {
        if (!key) {
            if (!raw) {
                return hex_md5(string);
            } else {
                return raw_md5(string);
            }
        }
        if (!raw) {
            return hex_hmac_md5(key, string);
        } else {
            return raw_hmac_md5(key, string);
        }
    };

}(typeof jQuery === 'function' ? jQuery : this)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:38:34.257

在你的`checkout`函数中，`e`没有定义。一旦发生这种`ReferenceError`情况，它会阻止表单回调返回`false`，从而允许表单正常提交并重定向页面。

整个代码块：

```
 beforeSend: function() {
    switch (e) {
    case 3:
     //alert("jajka");
    break;  
    }
  }, 
```

根本不做任何事情 - 只需删除它，提交表单时将执行 AJAX 调用。

但是，您现在可能会遇到一个单独的问题 - 您的评论表明包含此代码片段的页面与您尝试完成的 AJAX 请求*不在同一个子域（或协议）上。*由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，浏览器不允许 AJAX 请求到不同的域、协议或端口。您必须找到一种将资源托管在同一域和协议上的方法才能使用此代码。

（或者，您可以使用 JSONP，尽管看起来您正在这里处理付款 - 使用`GET`请求不是最好的主意！）

# mysql - 多次使用 LEFT JOIN 只带来 1 行

> ID：10393872
> 
> 赞同：4
> 
> 时间：2012-05-01T05:18:40.540
> 
> 标签：mysql, sql, join, left-join, outer-join

它是一个智能标签库图像搜索系统。用户在这样的表中添加带有适当标签的图像：

```
image (id, title, ...)
tag (id, title) /* It doesn't matter who has created the tag*/
imagetag (image_id, tag_id) /* One image may have multiple tags */ 
```

用户查看图像并且**来自 **这些图像的标签****的访问记录在`usertagview`表中。（请注意，我`INSERT ON DUPLICATE UPDATE`为此目的使用了查询。）

```
usertagview (user_id, tag_id, view_count) 
```

* * *

现在请考虑一些带有以下标签的图像：

*   `river`， `day`（这是一张在阳光明媚的日子里显示河流的图片）
*   `river`， `night`（午夜月光下的那条河）
*   `tree`,`day`
*   `tree`,`night`
*   `flower`,`day`
*   `flower`,`night`

用户搜索标签`river`并显示任何带有标签**river**的图像：在这种情况下，将显示第一张图像（由**river day**标记）和第二张图像（由**river night**标记）。用户**查看**第二张图像（由`river`和标记`night`）并查看它记录在表中`usertagview`。

然后用户尝试重新搜索标签`tree`并查看`tree night`图像。

我希望如果用户搜索`flower`，`flower night`优先于`flower day`. 我的意思是`flower night`应该来之前`flower day`。换句话说，我想要一个查询，列出`flower`根据用户以前的视图标记的图像。（首先，**接下来****`flower night`是 OTHER`flower`**）。

我的查询失败：

```
SELECT

    DISTINCT (image.id) AS image_id,
    image.title AS image_title,
    SUM(usertagview.view_count) AS SUM_of_all_tag_views_for_each_image

FROM (image)

JOIN imagetag ON imagetag.image_id = image.id

**LEFT JOIN** usertagview ON
    usertagview.tag_id = imagetag.tag_id
    AND usertagview.user_id = {$user_id_from_php}

WHERE

    imagetag.tag_id IN ( {impolde(',', $array_of_id_of_tags_that_the_user_has_entered)} )
    AND
    usertagview.tag_id IN
        (SELECT tag_id FROM imagetag WHERE userimagetag.image_id = image.id)

ORDER BY SUM_of_all_tag_views_for_each_image DESC 
```

### 问题

是**`**LEFT JOIN**`**我的查询中的 与正常的**`INNER JOIN`**. 他们都有相同的结果。即使我使用**`RIGHT JOIN`**它也没有区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T22:28:40.913

你`left join`的行为与 an 相同的原因是你在你的条款中`inner join`有额外的标准。这基本上将你变成了一个.`left join``where``outer join``inner join`

这样做的原因是因为如果`usertagview.tag_id`在`NULL`没有匹配记录的情况下，`IN`您的`WHERE`子句中的语句会消除具有该`NULL`值的行。

要更正此问题，您可以将您的`usertagview.tag_id IN ...`支票移到您的`ON`联接子句中。

但是，这只是您问题的一半。您只检查用户输入的特定标签的视图，但如果我了解您的实际要求，您希望检查视图中是否存在与任何具有与您的搜索词匹配的标签的图像相关联的标签.

例如，当用户输入 时`flower`，您希望首先找到任何带有 标记的图像，`flower`然后检查该组图像的所有其他标记的视图。

我相信以下查询可以完成此操作，并且[此 SQL Fiddle 显示了正在执行的查询](http://sqlfiddle.com/#!2/95a69/9)：

```
SELECT
  i.id AS image_id,
  i.title AS image_title,
  IFNULL(SUM(utv.view_count), 0) AS associated_view_totals
FROM
  imagetag originalTag
  JOIN imagetag associatedTags 
    ON associatedTags.image_id = originalTag.image_id
  JOIN image i 
    ON i.id = associatedTags.image_id
  LEFT JOIN usertagview utv 
    ON utv.user_id = 1
    AND utv.tag_id = associatedTags.tag_id
WHERE
  -- User searches for flower tag (Let's assume 5 == flower)...
  originalTag.tag_id IN (5)
GROUP BY
  i.id,
  i.title
ORDER BY 
  associated_view_totals DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T23:05:25.613

这是一个常见的问题。幸运的是，一个容易解决的问题。

看到这个了吗？

```
LEFT JOIN usertagview ON
    usertagview.tag_id = imagetag.tag_id -- see this?
    AND usertagview.user_id = {$user_id_from_php}  

WHERE

    imagetag.tag_id IN ( {impolde(',', $array_of_id_of_tags_that_the_user_has_entered)} )
    AND 
```

和这个？

```
 usertagview.tag_id IN -- and this?
        (SELECT tag_id FROM imagetag WHERE userimagetag.image_id = image.id) 
```

两个条件共享同一个字段，即`usertagview.tag_id`。因此，`usertagview.tag_id IN (SELECT tag_id FROM ...)`在您的 WHERE 子句中，基本上取消了 usertagview on `LEFT JOIN`ing imagetag 所具有的任何成功。

因此，要修复您的查询，请将您的`INNER JOIN`-y usertagview 恢复为`LEFT JOIN`一个，然后将 usertagview 条件改为 JOIN 条件：

```
SELECT

    DISTINCT (image.id) AS image_id,
    image.title AS image_title,
    SUM(usertagview.view_count) AS SUM_of_all_tag_views_for_each_image

FROM (image)

JOIN imagetag ON imagetag.image_id = image.id

LEFT JOIN usertagview ON
    usertagview.tag_id = imagetag.tag_id
    AND usertagview.user_id = {$user_id_from_php}

    -- moved the WHERE condition here
    AND
    usertagview.tag_id IN
        (SELECT tag_id FROM imagetag WHERE userimagetag.image_id = image.id)

WHERE

    imagetag.tag_id IN ( {impolde(',', $array_of_id_of_tags_that_the_user_has_entered)} )

ORDER BY SUM_of_all_tag_views_for_each_image DESC 
```

那会解决它。如果不是（因为我不知道你的桌子上是一对多的，还是一对一的，所以在这种情况下，我只会抛出*通常*有效的方法)，尝试将 更改`INNER JOIN imagetag`为`LEFT JOIN`。由于`imagetag`WHERE 子句中的条件将取消`LEFT JOIN`条件产生的任何行，因此将该`imagetag`条件从`WHERE`子句移至`LEFT JOIN`：

```
SELECT

    DISTINCT (image.id) AS image_id,
    image.title AS image_title,
    SUM(usertagview.view_count) AS SUM_of_all_tag_views_for_each_image

FROM (image)

LEFT JOIN imagetag ON imagetag.image_id = image.id
    -- WHERE clause condition moved here.
    -- WHERE conditionXXX basically cancels out whatever rows
    -- obtained from `LEFT JOIN ON conditionXXX`, in which conditionXXX share
    -- the same field.  IN this case, it is imagetag.
    AND    
    imagetag.tag_id IN ( {impolde(',', $array_of_id_of_tags_that_the_user_has_entered)} )

LEFT JOIN usertagview ON
    usertagview.tag_id = imagetag.tag_id
    AND usertagview.user_id = {$user_id_from_php}

 -- moved here
    AND
    usertagview.tag_id IN
        (SELECT tag_id FROM imagetag WHERE userimagetag.image_id = image.id)

ORDER BY SUM_of_all_tag_views_for_each_image DESC 
```

如果第二个建议仍然没有提供结果，那么您的查询当前正在处理**多个**一对多表关系。如果查询中有多个一对多的表关系，SQL 就无法弄清楚你的意图；在这种情况下，您需要展平结果以获得正确的输出。这是关于如何展平结果的一个很好的演练：[http ://www.anicehumble.com/2012/05/sql-count-computer-program-does-what.html](http://www.anicehumble.com/2012/05/sql-count-computer-program-does-what.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T08:34:18.133

无论您接下来/之后加入什么，您总是会得到表格图像 + INNER JOIN 图像标签的结果。如果您想要更多结果，那么您还需要 LEFT JOIN imagetag 表。

# windows-installer - msi 数据库的 Component Table 中两个不同条目的相同 componentGUID

> ID：10393874
> 
> 赞同：0
> 
> 时间：2012-05-01T05:19:08.467
> 
> 标签：windows-installer, guid, gac, cab

我正在将某些程序集打包到 msi 包中。在执行此操作时，我需要将一些程序集放入本地文件系统以及目标机器的 GAC 中。正如我们所知，DuplicateFile Table 在这种情况下无济于事。我决定将程序集两次放入具有不同标识符的 CAB 文件中。现在要填充组件表，我有不同的组件标识符，但对于类似的程序集，我没有不同的组件 GUID。我的问题是，如果我对具有不同组件标识符（在组件表中）的条目保持 GUID（因为基本上程序集是相同的）相同，它会影响程序集的安装或卸载吗？此外，如果我更改这些程序集的 ComponentGUID（通过动态生成 GUID）是否会影响对程序集的未来更新（因为特定程序集的 GUID 应该是唯一的）？注意：我们正在使用我们自己的应用程序来创建 MSI 包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:52:39.997

如果我们在安装时使用相同的 GUID 注册两个不同的组件，那么一切都会在功能上正常工作。但是在卸载过程中，组件 msi 表中稍后出现的组件不会从注册表或 GAC 中注销。所以我们会有 dll 地狱般的问题。

# android - Android 开发 - 处理 XML

> ID：10393875
> 
> 赞同：0
> 
> 时间：2012-05-01T05:19:13.337
> 
> 标签：android, xml, eclipse, layout

我一直在学习android开发，对此我还是新手。

我已经为 iOS 设计了许多应用程序。

**有没有更好的方法让我的布局像 iOS 一样简单？**

因为在 iOS 中，我只需要将它拖放到任何我想要的地方。在 android 中，我必须在哪里插入表格和编辑 XML，我觉得这很混乱，而且处理起来不灵活。

我已经阅读并观看了许多教程，但仍然觉得它有点难以处理

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:24:05.717

有一个可以在 Eclipse 中使用的 Android 布局编辑器。那是你要找的吗？

[http://developer.android.com/guide/developing/tools/adt.html#graphical-editor](http://developer.android.com/guide/developing/tools/adt.html#graphical-editor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T05:36:06.133

最简洁的答案是不。长答案是，这就是它在 Android 上的完成方式，并且比 iOS 方法灵活得多。试想以 iOS 方式制作 Android 应用程序并支持 240x320、320x480、480x800、480x854、540x960、600x1024、720x1280 等屏幕尺寸，很容易意识到这将是一项不可能完成的任务。几乎可以肯定，这就是为什么苹果选择“Retina Display”的原因，它的像素密度正好是 2 倍，屏幕尺寸完全相同（3.5 英寸）——因为做任何其他事情都意味着所有应用程序都需要专门为新屏幕设计，而不是专门为新屏幕设计。只提供带有@2x 后缀的图像。

因此，XML 不是像 iOS 那样的绝对定位和大小，而是在 Android 中使用，设计人员的任务是提出一种或多种可以支持这种不同屏幕尺寸范围的布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T05:29:43.667

您可以使用 Eclipse 布局编辑器进行具有绝对布局的拖放操作。但是使用绝对布局不是一个好习惯，因为在 iOS 中，所有设备的屏幕尺寸都是固定的，但在 android 中，有不同的屏幕尺寸设备可用，如果您设计一个考虑单一屏幕尺寸的布局，它将在另一个屏幕尺寸的设备上搞砸. 您必须按照规范创建布局，通过此链接了解更多详细信息。

[http://developer.android.com/guide/topics/ui/layout-objects.html](http://developer.android.com/guide/topics/ui/layout-objects.html)

# asp.net - 带有通配符的 ASP.NET URL 路由

> ID：10393876
> 
> 赞同：1
> 
> 时间：2012-05-01T05:19:18.743
> 
> 标签：asp.net, url, routing, wildcard

我有一个 CMS 系统，我正在使用路由来获取页面名称。我需要在第一项和最后一项（页面名称）之间有无限的值（子目录、产品名称、不同的本地化）。

例如：

/产品/计算机/ComputerType1/

和

/Productos/Ordenadores/ComputerType1/

其中 ComputerType1 是页面名称。

```
routes.Add(new Route("{*route}/{pageName}", routeHandler)); 
```

我找不到将路由的中间部分 ({*route}) 设为通配符的方法，以便可以在页面名称前面放置无限数量的子目录。目前我只能通过默认的通配符路由来解决这个问题，例如：

```
routes.Add(new Route("{*route}", routeHandler)); 
```

抓住一切。但是，即使您在上面的路由代码中将其指定为忽略，通配符似乎也允许输入 gif url：

```
routes.Ignore("{resource}.axd/{*pathInfo}");
routes.Ignore("{resource}.asmx/{*pathInfo}");
routes.Ignore("{resource}.ashx/{*pathInfo}");
routes.Ignore("{resource}.gif/{*pathInfo}");
routes.Ignore("{resource}.png/{*pathInfo}");
routes.Ignore("{resource}.jpg/{*pathInfo}");
routes.Ignore("{resource}.ico/{*pathInfo}");
routes.Ignore("{resource}.pdf/{*pathInfo}");
routes.Ignore("{resource}.css/{*pathInfo}");
routes.Ignore("{resource}.js/{*pathInfo}"); 
```

有没有更好的方法来做到这一点？这应该通过自定义路由处理程序来处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:35:56.120

是的，您应该为这些简单的创建一个路由处理程序创建一个`class`并从`RouteBase`
覆盖此`GetRouteData`方法
中的方法派生它，您可以访问当前`httpcontext`，因此您可以访问请求的，因此您可以相应`URL`
地路由。
有关自定义路线的更多信息，请访问此链接
[http://www.codeproject.com/Articles/299531/Custom-routes-for-MVC-Application](http://www.codeproject.com/Articles/299531/Custom-routes-for-MVC-Application)

# java - 如何在服务器端获取 HTTP POST 请求正文作为 Java 字符串？

> ID：10393879
> 
> 赞同：5
> 
> 时间：2012-05-01T05:19:53.783
> 
> 标签：java, http, post

HttpExchange 对象的getRequestBody 方法返回一个InputStream。正确阅读“正文”还有很多工作要做。它是一个 Java 库 + 对象 + 方法，它更进一步并将主体（在服务器端）作为现成的 Java 字符串返回？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T07:36:22.900

```
InputStreamReader isr =  new InputStreamReader(t.getRequestBody(),"utf-8");
BufferedReader br = new BufferedReader(isr);

// From now on, the right way of moving from bytes to utf-8 characters:

int b;
StringBuilder buf = new StringBuilder(512);
while ((b = br.read()) != -1) {
    buf.append((char) b);
}

br.close();
isr.close();

// The resulting string is: buf.toString()
// and the number of BYTES (not utf-8 characters) from the body is: buf.length() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-29T16:35:01.397

如果您使用的是 Spring MVC，则可以在 String 类型的方法参数上使用 @RequestBody 注释。例如。

```
@RequestMapping(value = "/something", method = RequestMethod.POST)
public void doSomething(@RequestBody String requestBodyString) {
    // does something..
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T05:32:19.677

你试过这个吗？

```
 InputStreamReader isr =  new InputStreamReader(exchange.getRequestBody(),"utf-8");
 BufferedReader br = new BufferedReader(isr);
 String value = br.readLine(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T07:55:29.650

您可以使用 Commons IO`org.apache.commons.io.IOUtils.toString(InputStream, String)`在一行中完成此操作。（虽然它可能不适用于 HTTP keep-alive）

编辑：

如果您想直接使用 JSON，有一堆 Web 服务堆栈可以为您进行解组。尝试

春天：[http ://www.cribbstechnologies.com/2011/04/08/spring-mvc-ajax-web-services-part-2-attack-of-the-json-post/](http://www.cribbstechnologies.com/2011/04/08/spring-mvc-ajax-web-services-part-2-attack-of-the-json-post/)

CXF / JAX-RS：[http ://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-JSONsupport](http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-JSONsupport)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-17T21:59:47.923

在 HttpHandler 中：

```
InputStreamReader isr = new InputStreamReader(he.getRequestBody(), "utf-8");
        BufferedReader br = new BufferedReader(isr);

        int b;
        StringBuilder buf = new StringBuilder();
        while ((b = br.read()) != -1) {
            buf.append((char) b);
        }

        br.close();
        isr.close();
System.out.println(buf.toString()); 
```

# c# - 用 Microsoft Chart 绘制实时图表？

> ID：10393881
> 
> 赞同：0
> 
> 时间：2012-05-01T05:20:07.810
> 
> 标签：c#, mschart

我已经开始使用[Microsoft Chart](http://en.wikipedia.org/wiki/Microsoft_Office_shared_tools#Graph)绘制图表。我设法画了一个简单的折线图。我现在有一个问题是在后台我的数据库正在填充实时数据，我想在我的折线图上显示它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T05:52:14.803

为了在图表中显示实时数据，您必须在每个固定时间间隔后更新它。这可以通过运行用于检索数据的新线程和用于更新图中数据的委托来轻松完成。

使用 AddDataThreadLoop() 作为 ThreadStart 创建一个新线程，并使用委托向图形添加数据，例如 AddData()：

```
addDataThreadStart = new ThreadStart(AddDataThreadLoop);
addDataRunner = new Thread(addDataThreadStart);
addDataDel += new AddDataDelegate(AddData);
addDataRunner.Start(); 
```

在函数中，将总工作划分为：

```
Private void AddDataThreadLoop() { //Retrieve data here}
Public void AddData() { //Update graph } 
```

[您可以在此处](http://super0009.blogspot.in/2012/06/introduction-is-utility-based-on-ping.html)下载演示代码。

# xcode - fetchedResultsController 和 Integer

> ID：10393884
> 
> 赞同：0
> 
> 时间：2012-05-01T05:20:25.507
> 
> 标签：xcode, xcode4, nsfetchedresultscontroller

我正在从包含两个字符串和一个整数的实体更新 TableViewController。字符串正常工作整数没有。这是我的代码；

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UsersCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[GolfersCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    Users *users = [_fetchedResultsController objectAtIndexPath:indexPath];

    cell.firstName.text = users.firstName;
    cell.lastName.text = users.lastName;
        int i = [users.gendID intValue] ;
    cell.genID.text = [NSString stringWithFormat:@"%d", i];

    [self configureCell:cell atIndexPath:indexPath];

    return cell;
} 
```

现在这确实有效，注释掉“int i = [users.gendID intValue] ;”这一行 把它留在里面并单步执行程序，这是它返回的错误；

```
2012-04-30 16:49:02.369 My App [9757:fb03] -[Users gendID]: unrecognized selector sent to instance 0x6b8a6c0
2012-04-30 16:49:02.373 My App[9757:fb03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Users gendID]: unrecognized selector sent to instance 0x6b8a6c0'
*** First throw call stack:
(0x16b0022 0x1841cd6 0x16b1cbd 0x1616ed0 0x1616cb2 0x3a6d 0xb5c54 0xb63ce 0xa1cbd 0xb06f1 0x59d21 0x16b1e42 0x2068679 0x2072579 0x1ff74f7 0x1ff93f6 0x1ff8ad0 0x168499e 0x161b640 0x15e74c6 0x15e6d84 0x15e6c9b 0x15997d8 0x159988a 0x1b626 0x28bd 0x2825)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:39:42.727

除了 Lightforce 的建议之外，您不应该在两个地方加载单元格内容。在设置名字、姓氏和 genID 后，您的代码然后调用索引路径处的配置单元。问题可能出在那个方法上。将您的设置代码放在一个地方或另一个地方，但不要在两种方法之间传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:03:11.123

对我来说，这看起来像是一个错字。在您的代码中，用户属性名称是 genID，而您的单元格的属性是 genID。“发送到实例的无法识别的选择器”意味着没有为该类定义这样的方法。验证您的用户类确实包含名为“gendID”的方法/属性。

# python - tkinter 和 time.sleep

> ID：10393886
> 
> 赞同：14
> 
> 时间：2012-05-01T05:20:59.117
> 
> 标签：python, time, tkinter, sleep, elapsedtime

我试图在等待 5 秒后删除文本框中的文本，但程序不会运行并且会在其他所有内容上休眠。还有一种方法可以让我的文本框进入睡眠状态，这样我就可以在文本冻结时运行其他代码？

```
from time import time, sleep
from Tkinter import *

def empty_textbox():
    textbox.insert(END, 'This is a test')
    sleep(5)
    textbox.delete("1.0", END)

root = Tk()

frame = Frame(root, width=300, height=100)
textbox = Text(frame)

frame.pack_propagate(0)
frame.pack()
textbox.pack()

empty_textbox()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-01T05:27:50.443

你真的应该使用 Tkinter [after 方法](http://infohost.nmt.edu/tcc/help/pubs/tkinter/universal.html)而不是`time.sleep(...)`.

[在另一个 stackoverflow question](https://stackoverflow.com/questions/2400262/code-a-timer-in-a-python-gui-in-tkinter)中有一个使用 after 方法的示例。

这是使用 after 方法的脚本的修改版本：

```
from time import time, sleep
from Tkinter import *

def empty_textbox():
    textbox.delete("1.0", END)

root = Tk()

frame = Frame(root, width=300, height=100)
textbox = Text(frame)

frame.pack_propagate(0)
frame.pack()
textbox.pack()

textbox.insert(END, 'This is a test')
textbox.after(5000, empty_textbox)

root.mainloop() 
```

# netty - 从字符串构造 Netty ChannelBuffer

> ID：10393887
> 
> 赞同：3
> 
> 时间：2012-05-01T05:21:00.263
> 
> 标签：netty

将 Netty ChannelBuffer 转换为 String 就像在 ChannelBuffer 上调用 .toString(UTF_8) 一样简单。如何从字符串创建 ChannelBuffer？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T06:38:14.550

使用 ChannelBuffers.copiedBuffer(String, Charset)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-06T08:36:29.330

在netty 4中，您可以使用`Unpooled.copiedBuffer(String, Charset)`

# php - 表单提交成功后如何在 div 中创建成功消息？

> ID：10393890
> 
> 赞同：6
> 
> 时间：2012-05-01T05:21:24.380
> 
> 标签：php, mysql, html, forms

以下表单在逻辑上每次在浏览器中启动页面时都会显示成功消息，但表单只有在成功提交后才会显示成功消息。

```
$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
$editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

$message = "Record has been updated successfully.";

if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form1")) {
$updateSQL = sprintf("UPDATE table SET name=%s, email=%s, 

                   GetSQLValueString($_POST['name'], "text"),
                   GetSQLValueString($_POST['email'], "text"),

mysql_select_db($database_test, $test);
$Result1 = mysql_query($updateSQL, $test) or die(mysql_error()); 

$updateGoTo = "test.php";
if (isset($_SERVER['QUERY_STRING'])) {
$updateGoTo .= (strpos($updateGoTo, '?')) ? "&" : "?";
$updateGoTo .= $_SERVER['QUERY_STRING'];
}
header(sprintf("Location: %s", $updateGoTo));
} 
```

表单的html部分如下：

```
<form action="<?php echo $editFormAction; ?>" method="post" name="form1" id="form1">
 <table align="center" class="test_table">
  <tr valign="baseline">
     <td align="right" nowrap="nowrap" class="table-title">Name:</td>
     <td class="table-content"><input type="text" name="name" value="<?php echo htmlentities($row_user['name'], ENT_COMPAT, 'utf-8'); ?>" size="32" /></td>
   </tr>
   <tr valign="baseline">
     <td align="right" nowrap="nowrap" class="table-title">E-mail:</td>
     <td class="table-content"><input type="text" name="email" value="<?php echo htmlentities($row_user['email'], ENT_COMPAT, 'utf-8'); ?>" size="32" /></td>
   </tr>
 </table>
 <input type="hidden" name="MM_update" value="form1" />
 <input type="hidden" name="id" value="<?php echo $row_user['id']; ?>" />
  <input class="submit" name="UpdateRecord" type="submit" id="UpdateRecord" value="Update Record" /></form> 
```

这是成功消息在页面上的 div 中显示的方式：

```
<p> <?php 
  if (!empty($message)) {
  echo "<div class=\"successmessage\">" . $message . "</div>";
  } 
  ?></p> 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T05:34:36.410

我创建了两个函数来显示消息

```
function addMessageStack($message,$type='success')
{
    $_SESSION['sess_MessageStack'][] =  array($type,$message);  
}
function showMessageStack()
{
    $str = '';
    if(count($_SESSION['sess_MessageStack']) > 0)
    {
        for($i=0;$i<count($_SESSION['sess_MessageStack']);$i++)
        {
            $str.="<div class='".$_SESSION['sess_MessageStack'][$i][0]."Message left'>".$_SESSION['sess_MessageStack'][$i][1]."</div>";
        }
        unset($_SESSION['sess_MessageStack']);
        return $str;
    }   
} 
```

在您的示例中使用如下

```
addMessageStack('Record has been updated successfully.');    
header(sprintf("Location: %s", $updateGoTo));
exit; 
```

对于显示消息，请确保有 session_start();

```
<?php echo showMessageStack(); ?> 
```

它只会在表单提交后显示您的消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:37:19.450

hRaval，非常感谢您从一开始和最后的提示就提供了宝贵的指导。

addMessageStack 的以下添加最终解决了该问题。

```
$message = "Record Has Been Updated Successfully";
addMessageStack("<div class=\"successmessage\">" . $message . "</div>"); 
```

亲切的问候，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T09:07:02.027

可以更简单地通过在执行查询并计算行数后将成功消息存储在选定的变量或数组或会话中来完成，而无需编写冗长的函数。

// 最简单的方法

```
mysql_select_db($database_test, $test); 
$Result1 = mysql_query($updateSQL, $test) or die(mysql_error());
$Row_Count = mysql_num_rows($Result1);

if ($Row_Count > 0){
$successmessage = "Edited Successfully"; 
} 
```

或者

// 如果要将所有其他成功消息（包括此消息）存储在数组中。

```
mysql_select_db($database_test, $test);
$Result1 = mysql_query($updateSQL, $test) or die(mysql_error());
$Row_Count = mysql_num_rows($Result1);

if ($Row_Count > 0){
$successmessage[] = "Edited Successfully"; 
} 
```

或者

// 如果要在成功执行后定义一个header位置。

```
mysql_select_db($database_test, $test);
$Result1 = mysql_query($updateSQL, $test) or die(mysql_error());
$Row_Count = mysql_num_rows($Result1);

if ($Row_Count > 0){
$_SESSION['successmessage'] = "Edited Successfully"; 
} 
```

然后在上述所有情况下，您可以通过检查变量是否设置为空，在您想要的文档中的任何位置调用成功消息。对于上面解释的最简单的方法，我将在下面给出一个示例。

```
if(isset($successmessage)){
echo "<div id=\"MyDesiredDiv\">" .$successmessage. "</div>";
} 
```

或者

```
if(!empty($successmessage)){
echo "<div id=\"MyDesiredDiv\">" .$successmessage. "</div>";
} 
```

> 重要提示：MySql 早就被弃用了。尝试使用 MySqli 或 PDO 并按照上述方法。

# encoding - 十六进制编辑 UTF-8 文件

> ID：10393899
> 
> 赞同：1
> 
> 时间：2012-05-01T05:22:43.740
> 
> 标签：encoding, utf-8, hex, character, cp1252

我正在尝试使用 HEX 编辑器创建一个 UTF-8/no-BOM 文件。我想要的 UTF 字符是`e2 82 ae`UTF-8 格式的 TUGRIK SIGN。

我用 N++ 创建了一个**UTF-8/no BOM 文件**，复制了 N++ 中的字符并保存了文件。瞧，在 HEX 编辑器中看起来不错，太棒了`e2 82 ae`！

所以我尝试了另一种方式，将 3 个字节保存`e2 82 ae`到带有 wxHexEdtior 的文件中。废话，N++ 出于某种原因认为该文件是**ANSI(Latin1)**编码的。

我完全不明白。会不会和windows -CP1252-编码有冲突？

另一个有趣的事情（我也完全不明白）是 wxHexEditor 显示了一些文件的反汇编。

N++ 创建文件的反汇编对 wxHexEditor 是可以的，但是 wxHexEditor 创建的文件反汇编无效。

如果有人能向我解释这种黑魔法，我会非常高兴。

![图 1](../Images/cece1b609c6542ae098035b2ce8a0e21.png)

![图 2](../Images/9faa296036cfa30dd6661abf7fd65810.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:03:18.637

该文件本身不包含编码信息，因此您的编辑器必须猜测编码或仅以某种默认编码显示它，Latin1 是一个常见的默认值。在我的 N++ (6.1.2) 版本中，它打开并正确显示为 UTF-8。

如果您的版本没有猜对，那么也许当您在 N++ 中创建文件时，您提前告诉 N++ 您将要创建一个没有 BOM 的 UTF-8 文件，这就是它当时知道正确显示它的方式.

关于汇编器...首先，这不是汇编器“链接到”或“关联”文件的情况，而是您的 hexeditor 只是试图反汇编您提供的任何文件。

汇编器不同的原因是在“好”文件中您碰巧选择了第一个字节（或没有），因此 wxHexEditor 反汇编整个文件。在“坏”版本中，您可能选择了第二个字节，而这 82 ae 不会反汇编为任何有效代码。

# oracle - 从 ADO.NET 调用存储过程时，无法将 NVarChar 类型的 OracleParameter 与输出的 ParameterDirection 一起使用

> ID：10393902
> 
> 赞同：4
> 
> 时间：2012-05-01T05:23:16.563
> 
> 标签：oracle, stored-procedures, ado.net

我正在使用 ADO.Net 调用 Oracle 数据库中的存储过程。存储过程有一个输出参数是 NVARCHAR2。这是存储过程：

```
CREATE OR replace PROCEDURE VALIDATE_Bin ( 
machine_dump_name IN NVARCHAR2, 
lpn               IN NVARCHAR2, 
result            OUT NUMBER, 
message           OUT NVARCHAR2) 
IS 
BEGIN 
    IF lpn LIKE 'A%' THEN 
      result := 1; 
      message := NULL; 
    ELSE 
      IF lpn IS NULL THEN 
        result := 0; 
        message := 'Failed Read'; 
      ELSE 
        result := 0; 
        message := 'Invalid Barcode'; 
      END IF; 
    END IF; 
END; 
```

这里是填写命令参数的c#代码：

```
command.Parameters.Add(new OracleParameter("machine_dumper_name",OracleType.NVarChar){Value = "My Dumper"});
command.Parameters.Add(new OracleParameter("lpn", OracleType.NVarChar) { Value ="XYZ1234"});
var resultParam = new OracleParameter("result", OracleType.Number) { Direction = ParameterDirection.Output};
command.Parameters.Add(resultParam);
var messageParam = new OracleParameter("message", OracleType.NVarChar) { Direction = ParameterDirection.Output};
command.Parameters.Add(messageParam);

command.ExecuteNonQuery(); 
```

如果我像这样执行它，我会得到异常：

> System.Exception：参数“消息”：没有为可变长度数据类型设置大小：字符串。

我想不用担心。Oracle 期望“消息”参数上的字符串长度。所以我在“消息”参数上添加了一个大小参数：

```
var messageParam = new OracleParameter("message", OracleType.NVarChar, 255) { Direction = ParameterDirection.Output}; 
```

然后当我运行它时，我得到了这个 System.Data.OracleClient.OracleException：

> PLS-00306：调用“VALIDATE_Bin”时参数的数量或类型错误

我到底应该怎么调用这个程序并把消息传出去？我认为这个问题是特定于字符串数据类型的。这是一个错误吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:12:33.143

After reading one of @psaraj12's comments I realized the problem parameter may not be the "message" parameter after all. After eliminating variables from the stored procedure one by one I discovered a mis-match in parameter names. In the procedure:

```
machine_dump_name IN NVARCHAR2, 
```

and in the C# code:

```
new OracleParameter("machine_dumper_name",OracleType.NVarChar) 
```

Thank you for all your ideas everyone! When I used the actual name of the parameter (machine_DUMP_name) everything worked perfectly!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:39:27.733

尝试

```
var messageParam = new OracleParameter("message", OracleDbType.NVarchar2,UInt16.MaxValue) { Direction = ParameterDirection.Output};
messageParam.Value = DbNull.Value 
```

# php - PHP $_GET[url] 不工作

> ID：10393903
> 
> 赞同：2
> 
> 时间：2012-05-01T05:23:23.567
> 
> 标签：php

嗨，我试图通过网站开发 MVC 模式，从一开始我需要获取 url 我试过这样

```
echo $url= $_GET['url'];
echo $url; 
```

如果我使用这样的网址[http://localhost/autolink/index/sdsad](http://localhost/autolink/index/sdsad) 它想显示“index/sdsad”但它没有显示任何内容，这有什么问题？可能是版本问题？因为在另一台机器上使用它正在工作..

这是我当前的 .htaccess：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T05:27:56.420

如果那个 url 在另一台机器上工作，那么你就有了某种重写规则。你可能有类似的东西：

```
RewriteEngine On
RewriteRule ^autolink/.* autolink.php/?url=$0 [QSA,PT] 
```

这将使 index/sdsad 作为查询字符串中的 url 参数传入。

你的例子对我有用，暗示你要么

1.  不要打开 mod_rewrite
2.  不要启用“允许覆盖”

最简单的检查方法（假设这不是生产服务器）是编辑 .htaccess 文件并在第一行输入类似“POOP”的内容。如果您开始收到 500 个错误，则上述 1 和 2 不适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-28T16:04:07.557

我使用 Visual Studio 2019 和 IIS 的 PHP 工具开发了 Visual Studio 2019 社区的 PHP 项目。我在测试 MVC 模式时遇到了同样的问题，但不起作用的 $_GET['url'] 开始使用 $_SERVER['REQUEST_URI']。

# ruby-on-rails - 自定义多模型嵌套表单行为

> ID：10393906
> 
> 赞同：0
> 
> 时间：2012-05-01T05:23:58.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, carrierwave

我正在按照 Rails 指南进行多模型嵌套表单。我有 2 个模型，页面和图片。页面 has_many 图片。我正在使用 fields_for 将图片文件字段放入编辑页面表单中。

每次我上传图片时，表单都会添加一个额外的文件字段以允许上传新图片。

我想要的行为是页面表单始终只有一个文件字段，它将创建一个新图片。我不需要以前的图片可编辑。

因此，问题是 1）我该怎么做？2）我什至应该使用嵌套形式吗？因为我在创建图片时没有编辑页面的其他部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:04:14.447

您可以使用：

```
#routes.rb
resources pages do
  resources pictures
end

#PicturesController.new
@picture = Picture.new

#views/pictures/new.haml
= form_for @picture 
#form code here 
```

或者您可以将表单放置在任何您想要的位置并将其发送到图片控制器：

```
#views/pages/show.haml
= form_for [@page, Picture.new] do |f|
  = f.hidden_field :page_id, :value => @page.id
  = f.file_field :file #change to your own
  = f.button :submit

#PicturesController
def create
  @picture = Picture.new(params[:picture])
  if @picture.save
    redirect_to :back, :notice => "success"
  else
    #some code
  end
end 
```

# xcode - Mac 上我的 SVN 存储库目录树的适当权限？

> ID：10393911
> 
> 赞同：0
> 
> 时间：2012-05-01T05:24:47.093
> 
> 标签：xcode, macos, svn

我从 Time Machine 备份恢复了我的 Mac，现在我无法将文件检入我的 svn 存储库。

我试过 svnadmin recover，但失败了：

```
svnadmin: Can't open file 'WriteAssist/db/write-lock': Permission denied 
```

该目录归我为引导机器而设置的“管理员”用户所有。我当前的用户是“andersprivat”。

我应该把整棵树都砍掉吗？执行 chmod 777 可能会起作用，但似乎是一个很大的安全漏洞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:54:41.787

最后 svnadmin recover 似乎对我什么也没做。

我最终不得不 chmod -R 777 允许签入所有文件，然后手动处理所有飞行中的问题。并没有让我比现在更爱 svn。当它工作时它很棒，但是当它跌跌撞撞时让它起来是ab * tch。

# jquery - 在 jQuery Mobile 中使用页面

> ID：10393916
> 
> 赞同：0
> 
> 时间：2012-05-01T05:25:23.020
> 
> 标签：jquery, jquery-mobile

我注意到 jQuery 如何处理超链接的一个有趣问题。根据文档，单击链接将触发 AJAX 调用，请求页面的内容被填充在当前页面的 DOM 中。

现在考虑一下，index.html 有一个指向 location.html 的超链接。在 location.html 中，我 `window.onload = getMyLocation ;`用来触发对 JavaScript 函数的调用。由于 jQuery mobile 只是在页面的数据角色中获取代码，因此我的 JavaScipt 代码永远不会运行，因此我需要显式刷新页面。有解决方法吗？

谢谢KJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:47:22.713

你能不能从你的超链接中触发的事件触发 JavaScript 函数，即

```
<a href="#location.html" onClick="[...]">Location</a> 
```

或者

```
<a href="#location.html" id="locbutton">Location</a>

<script type="text/javascript">
$("#locbutton").live( "click", function(){
    [...]
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:47:30.763

您可以绑定到 pagebeforeshow 事件，以获得与 onload 相同的效果。

```
$(document).on("pagebeforeshow", function(e) {
    // do stuff
}); 
```

# hadoop - 在 Map Reduce 代码中运行时的 Sqoop 权限问题

> ID：10393918
> 
> 赞同：0
> 
> 时间：2012-05-01T05:25:28.463
> 
> 标签：hadoop, hdfs, cloudera, sqoop

我正在尝试使用 map reduce 程序调用 Sqoop

```
Sqoop.runTool(arguments,_conf); 
```

执行时，我收到以下错误

```
Exception in thread "main" java.lang.RuntimeException: Could not create temporary directory: /tmp/sqoop-hdfs/compile/a609226c19d65f561dd7035c00d318f6; check for a directory permissions issue on /tmp. 
```

我已将 /tmp 及其在 HDFS 中的子目录的权限设置为 777

我可以使用命令行很好地调用相同的命令`sudo -u hdfs sqoop ...`

这是 Cloudera 的 hadoop distirbution，我以 hdfs 用户身份运行该作业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:11:54.790

这可能不是 HDFS 中的 /tmp 目录，而是本地文件系统上的 /tmp 目录 - 该目录的权限是什么（并且还可以解释为什么当你“sudo”命令时它会起作用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-01T01:40:23.780

只需清洁`/tmp/sqoop-hdfs/compile`floder就可以了

# oracle - 在 Tomcat 中设置 Oracle XA 客户端

> ID：10393923
> 
> 赞同：1
> 
> 时间：2012-05-01T05:26:25.790
> 
> 标签：oracle, tomcat, xa

如何在 tomcat 6.0 context.xml 中设置 Oracle XA 客户端？

我试过了

```
<Resource name="jdbc/notification" auth="Container" type="javax.sql.XADataSource"
     factory="org.objectweb.jotm.datasource.DataSourceFactory"
            maxActive="100" maxIdle="30" maxWait="10000" removeAbandoned="true" 
            username="NOTIFICATION" password="password" driverClassName="oracle.jdbc.xa.client.OracleXADataSource"
                        defaultAutoCommit="false" jdbcInterceptors="ConnectionState;StatementFinalized" 
            url="jdbc:oracle:thin:@localhost:1521:ORCL" poolPreparedStatements="true" /> 
```

但它是扔

```
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error opening session.  Cause: java.sql.SQLException: SQLException in StandardPoolDataSource:getConnection exception: java.sql.SQLException: SQLException in StandardPoolDataSource:getConnection no connection available java.sql.SQLException: Error trying to load driver: oracle.jdbc.xa.client.OracleXADataSource : oracle.jdbc.xa.client.OracleXADataSource cannot be cast to java.sql.Driver
### Cause: java.sql.SQLException: SQLException in StandardPoolDataSource:getConnection exception: java.sql.SQLException: SQLException in StandardPoolDataSource:getConnection no connection available java.sql.SQLException: Error trying to load driver: oracle.jdbc.xa.client.OracleXADataSource : oracle.jdbc.xa.client.OracleXADataSource cannot be cast to java.sql.Driver 
```

请举例说明如何在 tomcat 6 中设置 oracle XA 客户端。

谢谢！！

# javascript - 用户友好的可嵌入 HTML/JavaScript 高分辨率图像编辑器

> ID：10393925
> 
> 赞同：0
> 
> 时间：2012-05-01T05:26:43.427
> 
> 标签：javascript, image, html, image-processing, aviary

我一直在玩这个[来自 Aviary 的相当漂亮的在线可嵌入图像编辑器](http://www.aviary.com/)，它完全符合我的需要，即：

*   可作为 HTML/JS 嵌入我的网站
*   合理的价格
*   只有基本的、有趣的功能
*   完全是白痴的证明，所以即使是最笨拙的人也可以通过自己的方式获得可以通过的东西；或者换一种说法，我不想要/不需要像 Photoshop 这样的传统图像编辑界面 - Aviary 所做的方式非常适合我的需求

但是，在文档中，他们指出这仅适用于网络分辨率图像，而我需要允许用户编辑高分辨率图像，因为它们最终将被发送到打印机。

有谁知道可以处理高分辨率图像的可与此 Aviary 编辑器相媲美的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:31:28.753

你试过[pixlr](http://pixlr.com/)吗？据我所知，该编辑器具有高分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T00:53:48.743

在回答我自己的问题时，事实证明，如果您为软件的企业版付费，则支持全分辨率。

# iphone - 按文件名中的日期对 iPhone TableView 进行排序？

> ID：10393928
> 
> 赞同：0
> 
> 时间：2012-05-01T05:27:19.427
> 
> 标签：iphone, xcode, uitableview, nsstring, sorting

表格视图中列出的文件的文件名如下： File May 1 3:00 AM.mp3 File May 3 3:01 AM.mp3

有没有办法可以按文件名中包含的日期对其进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:39:52.950

您必须使用 NSSortDescriptor ：-

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

   NSSortDescriptor *sorter = [[NSSortDescriptor alloc] initWithKey:date ascending:YES];
   [yourArrayName sortUsingDescriptors:[NSArray arrayWithObject:sorter]];

} 
```

希望对你有帮助谢谢:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:48:11.507

[您问题的最佳教程和示例代码..](http://oleb.net/blog/2011/12/tutorial-how-to-sort-and-group-uitableview-by-date/)

希望，这会让你..

# jquery - 如果字段为空，则 Jquery 在模糊时返回原始值

> ID：10393934
> 
> 赞同：4
> 
> 时间：2012-05-01T05:29:38.037
> 
> 标签：jquery, jquery-validate

我能做到这一点吗？如果用户将该字段留空，我想获得原始值。

这是我到目前为止得到的。[Jsfiddle 演示](http://jsfiddle.net/dbsNy/)

这是我的代码

```
$(document).ready(function() {
    var field = $('input[type="text"]');
    field.focus(function() { //Empty the field on focus
        var thisValue = $(this).val();
        $(this).attr("value", "");
    });

    field.blur(function() { //Check the field if it is left empty
        if ($(this).val() == "") {
            //alert('This field can not be left empty');
            $(this).val(thisValue);
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T05:33:38.007

您本质上是在描述所有主要浏览器都原生支持的[`placeholder`属性。](http://msdn.microsoft.com/en-us/library/ie/hh772942%28v=vs.85%29.aspx)但是，旧浏览器不支持它。要获得更广泛的支持，您需要对此属性进行*填充*支持。网上有很多选项可以为您执行此操作，但如果您愿意，您可以自己执行。

本质上，您希望允许自己和他人使用标准标记：

```
<input name="fname" placeholder="First Name"> 
```

使用 jQuery，您将响应具有该属性的任何元素的`focus`and `blur`(or `focusin`and `focusout`) 事件。`placeholder`如果一个元素获得焦点，并且具有占位符值，则清除该元素。如果元素模糊且为空，则提供占位符值。

这有点冗长，但我添加了注释以帮助遵循逻辑：

```
// Written and tested with jQuery 1.8.1
(function ( $ ) {

    // Play nice with jshint.com
    "use strict";

    // Abort if browser already supports placeholder
    if ( "placeholder" in document.createElement("input") ) {
        return;
    }

    // Listen at the document level to work with late-arriving elements
    $(document)
        // Whenever blur or focus arrises from an element with a placeholder attr
        .on("blur focus", "[placeholder]", function ( event ) {
            // Determine the new value of that element
            $(this).val(function ( i, sVal ) {
                // First store a reference to it's placeholder value
                var placeholder = $(this).attr("placeholder"), newVal = sVal;
                // If the user is focusing, and the placehoder is already set
                if ( event.type === "focusin" && sVal === placeholder ) {
                    // Empty the field
                    newVal = "";
                }
                // If the user is blurring, and the value is nothing but white space
                if ( event.type === "focusout" && !sVal.replace(/\s+/g, "") ) {
                    // Set the placeholder
                    newVal = placeholder;
                }
                // Return our new value
                return newVal;
            });
        })
        // Finally, when the document has loaded and is ready
        .ready(function () {
            // Find non-autofocus placeholder elements and blur them
            // This triggers the above logic, which may provide default values
            $(":input[placeholder]:not([autofocus])").blur();
        });

}(jQuery)); 
```

这个特殊的垫片只提供基本功能。其他人可能会扩展支持以在使用占位符值时更改字体颜色，以及在您开始键入之前保持占位符值可见（这种方法只是在焦点上立即将其删除）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T05:39:04.663

这也是一个非 jQuery 答案：

```
<input type="text" name="zip_code" id="zip_code_value" value="Name" onfocus="if(this.value=='Name'){this.value=''}" onblur="if(this.value==''){this.value='Name'}"> 
```

您可以将输入标签更新为这样，然后您就不需要 jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T05:41:39.170

占位符：

```
$(document).ready(function() {
    var field = $('input[type="text"]');
    field.focus(function() {
        var placeholder = $(this).data('placeholder');
        if (this.value == placeholder) 
            this.value = "";

    });

    field.blur(function() {
        if (this.value === "") {
            this.value = $(this).data('placeholder');
        }
    });
});​ 
```

[**现场演示**](http://jsfiddle.net/dbsNy/6/)

关于`$(this).val()`：

**了解你的 DOM 属性和函数**

> 虽然 jQuery 的目标之一是抽象出 DOM，但了解 DOM 属性可能非常有用。那些在不了解 DOM 的情况下学习 jQuery 的人最常犯的错误之一是利用 jQuery 的强大功能来访问元素的属性：

```
$('img').click(function() {
    $(this).attr('src');  // Bad! 
}); 
```

> 在上面的代码中， this 指的是触发 click 事件处理程序的元素。上面的代码既慢又冗长；下面的代码功能相同，而且更短、更快、更易读。

jQuery[标签信息](https://stackoverflow.com/tags/jquery/info)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T05:38:16.213

您应该使 thisValue 成为全局变量。这样它就可以在任何地方访问。像这样的东西。

```
$(document).ready(function() {
    var field = $('input[type="text"]');
    var thisValue
    field.focus(function() {//Empty the field on focus
        thisValue = $(this).val();
        $(this).attr("value","");
    });

    field.blur(function() {//Check the field if it is left empty
        if($(this).val()=="") {
        //alert('This field can not be left empty');
        $(this).val(thisValue);
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T05:39:00.703

这是我最近一直在使用的：

HTML：

```
<input type="text" name="s" id="s" value="Search" />
<input type="text" name="email" id="email" value="you@domain.com" />
... 
```

JavaScript：

```
// Default Input Field Text
$(document).ready( function(){
    $("#s, #email, #phone, #name").live("focus", function(){
        if ( $(this).val() == $(this).attr("rel") ) $(this).val('');
    }).live("blur", function(){
        if ( $(this).val() == '' ) $(this).val( $(this).attr("rel") );
    }).each( function(){
        $(this).attr("rel", $(this).val() );
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T05:39:27.913

`thisValue`通过删除在全局范围内定义`var`

```
$(document).ready(function() {
    var field = $('input[type="text"]');
    field.focus(function() {//Empty the field on focus
         thisValue = $(this).val();
        $(this).attr("value","");
    });

    field.blur(function() {//Check the field if it is left empty
        if($(this).val()=="") {
        //alert('This field can not be left empty');
        $(this).val(thisValue);
        }
    });
}); 
```

[http://jsfiddle.net/dbsNy/3/](http://jsfiddle.net/dbsNy/3/)

# android - 接收广播意图时出错？

> ID：10393935
> 
> 赞同：2
> 
> 时间：2012-05-01T05:29:38.780
> 
> 标签：android, broadcastreceiver

下面是我`BroadcastReceiver`收到此错误的代码：

```
java.lang.RuntimeException: Error receiving broadcast Intent { act=org.mosquitto.android.powerviewer.PING flg=0x4 (has extras) 
```

我的代码：

```
public class PingSender extends BroadcastReceiver {

    public void onReceive(Context context, Intent intent) {
        context2 = context;

        try {
            System.err.println("MQTT IS NULLLLLLLLLLLLL");
            mqttClient.ping();
        } catch (MqttException e) {

            Log.e("mqtt", "ping failed - MQTT exception", e);

            try {
                mqttClient.disconnect();
            } catch (MqttPersistenceException e1) {
                Log.e("mqtt", "disconnect failed - persistence exception", e1);
            }

            // reconnect
            if (connectToBroker()) {
                String deviceID = mPrefs.getString(PREF_DEVICE_ID, null);
                ;
                deviceID = MQTT_CLIENT_ID + "/" + deviceID;
                subscribeToTopic(deviceID);
            }
        }

        // start the next keep alive period
        scheduleNextPing();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:35:50.140

查看您是否正在覆盖任何 Android 生命周期事件并根据需要正确调用基类构造函数。

# ios - 如何使用 prepareForSegue 从 UIButton 传递字符串

> ID：10393937
> 
> 赞同：2
> 
> 时间：2012-05-01T05:29:54.720
> 
> 标签：ios, uibutton, uitableview, segue

我从 UIButton 向我的下一个 UITtableviewcontroller 发送一个字符串，该字符串是 UIButton 标题（星期一 ... 星期日），NSPredicate 使用该字符串按天过滤我的表信息。

```
@property (nonatomic, weak) NSString *dayOTW; 
```

* * *

```
- (IBAction)selectDay:(UIButton *)sender {
UIButton *dayW = sender;
dayOTW = dayW.titleLabel.text;
NSLog(@"button press = %@", dayOTW);
} 
```

* * *

```
2012-05-01 06:23:21.731 passingdata[99957:fb03] button press = Monday 
```

然后继续我的下一个屏幕

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
// Make sure your segue name in storyboard is the same as this line
if ([[segue identifier] isEqualToString:@"SendWeekDay"])
{
    // Get reference to the destination view controller
    ViewController *vc = [segue destinationViewController];

    // Pass any objects to the view controller here, like...
    vc.dayOTW = dayOTW;
   }
} 
```

第一次选择按钮时，我的表格中没有显示任何信息，如果我返回并再次选择按钮，我的表格将显示当天的正确信息。

我做错了什么？

与上述相关的另一个问题。我一周每天都有 7 个 UIButtons，如何用一个 segue 从所有 UIButtons 中分离？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T05:59:35.673

segue 在您的 IBAction 方法之前被调用，因此在您第一次单击它时不会设置该变量。

如果 segue 连接到您的按钮，那么它将是`sender`prepareForSegue 中的，因此您实际上并不需要 action 方法。只需在 prepareForSegue 中获取标题：

```
UIButton *dayButton = (UIButton*)sender
vc.dayOTW = sender.titleLabel.text; 
```

要将相同的 segue 连接到所有按钮，您必须从每个按钮 ctrl-drag，但为所有 segue 提供相同的标识符。这在故事板上看起来很乱，所以另一种方法是直接从源视图控制器创建一个单一的 segue，并在 action 方法中（在这种情况下你需要它，并且将连接到你的所有按钮）调用`performSegueWithIdentifier:sender:`：

```
-(IBAction)dayButtonPressed:(UIButton*)sender
{
    [self performSegueWithIdentifier:@"SendWeekDay" sender:sender];    
} 
```

然后，这会将按钮`performSegue`作为发送方传递给方法，因此您可以使用上面列出的代码。

# java - 从 WSDL 自动生成的 WebLogic Web 服务导致错误

> ID：10393948
> 
> 赞同：2
> 
> 时间：2012-05-01T05:32:13.423
> 
> 标签：java, eclipse, web-services, wsdl, weblogic11g

我正在使用 Eclipse 从预先存在的 WSDL 自动创建 WebLogic Web 服务（不是客户端）。它接收 3 个请求参数（String、String、byte[]）并以 1 个参数（byte[]）响应。但是，自动生成的类包含产生以下错误的代码：

> 端点接口方法“public byte[] sign(java.lang.String, java.lang.String, byte[])”必须在 Web Service 中实现。

但是sign方法明显存在于代码中。

因此，我尝试创建一个非常简单的 WSDL 来测试 Web 服务的自动生成。这次 WSDL 定义了 2 个请求参数 (int, int) 和 1 个响应 (int)。

这次错误没有出现并且工作得很好。

我正在使用的工具

*   日食 - 3.7.1
*   Oracle Enterprise Pack for Eclipse 11.1.1.8.0
*   Oracle WebLogic Server 11gR1 (10.3.6)
*   Oracle JAX-WS 2.1.5 完成的类自动生成
*   Windows 7 - 32 位 1.6 JDK/JRE

重现错误的步骤：

1.  启动 Eclipse
2.  文件 → 新建 → Web 服务项目
3.  [将此 WSDL](http://pastebin.com/J9WaSmsQ)导入您的 WEB-INF/wsdl 目录。
4.  右键单击 WSDL 文件名，然后单击 WebLogic Web 服务 → 生成 Web 服务
5.  请注意生成的 dss_DSSPortImpl 类文件中的错误。

[使用此 WSDL](http://pastebin.com/fuPCFAWn)重复上述步骤，生成的类文件可以正常工作。

非常感谢任何帮助。谢谢！

* * *

（由于隐私原因，WSDL 文件上的命名空间已从我的测试中更改。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:15:26.407

目前我的笔记本电脑上没有安装 OEPE，因此无法重现您的确切步骤，但这可能有用：

如果您仔细查看问题 wsdl，您将在 SignResponse 中看到两个元素：“签名”和“状态”。因为响应消息中包含多个元素，所以 wsimport 为每个输出参数生成一个 Holder 参数作为方法签名的一部分，以提供桶来返回每个参数。当我直接针对问题 wsdl 运行 wsimport 时，我在服务接口 (Adapter.java) 中得到以下（预期的）签名：

```
public void sign(
    @WebParam(name = "userId", targetNamespace = "")
    String userId,
    @WebParam(name = "fileType", targetNamespace = "")
    String fileType,
    @WebParam(name = "fileContent", targetNamespace = "")
    byte[] fileContent,
    @WebParam(name = "signature", targetNamespace = "", mode = WebParam.Mode.OUT)
    Holder<byte[]> signature,
    @WebParam(name = "status", targetNamespace = "", mode = WebParam.Mode.OUT)
    Holder<String> status); 
```

我怀疑如果您通过 wsimport 针对第一个 wsdl 生成存根（我确实知道以这种方式生成可以很好地部署到 WLS，因为这是我的典型方法，WebLogic 是我们的部署环境），您将会成功。

# android - 在不使用字符串的情况下从用户获取 char 数组

> ID：10393951
> 
> 赞同：12
> 
> 时间：2012-05-01T05:32:31.280
> 
> 标签：android, string, security, textview

我想从 Android 上的用户那里获取密码字符串。

我不希望这个字符串在从用户键入它到它以 char 或 byte 数组到达我的代码的过程中的任何时候都存储在 Java String 中。

原因是 Sun 禁止将 Java 字符串用于敏感数据。 *“String 类型的对象是不可变的，即没有定义允许您在使用后更改（覆盖）或清零 String 的内容的方法。此功能使 String 对象不适合存储安全敏感信息，例如用户密码。您应该始终将安全敏感信息收集并存储在 char 数组中。”* [http://docs.oracle.com/javase/1.5.0/docs/guide/security/jce/JCERefGuide.html#PBEEx](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jce/JCERefGuide.html#PBEEx)

所以我不能使用EditText，因为它在内部使用字符串（即使它返回一个可以想象由char []或Char []支持的可编辑？）。

从用户那里接受 char 数组的最简单方法是什么？我猜是我在其上监听关键事件的 Canvas？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T21:55:36.730

我没有看到 EditText.java (API 17) 在内部使用字符串。它只是 2 页长的代码。当然，EditText 继承的 TextView.java 文件中有 9k 行。您仍然不会看到 TextView.java 在内部使用 String，而是使用自己的 CharWrapper for CharSequence 实现。（TextView.java 行 #8535 API 17）。这里有方法调用 getChars。正如您会注意到的那样，它是从 char[] 而不是 String`buf`复制过来的。`mChars`

```
 private char[] mChars;
    public void getChars(int start, int end, char[] buf, int off) {
        if (start < 0 || end < 0 || start > mLength || end > mLength) {
            throw new IndexOutOfBoundsException(start + ", " + end);
        }

        System.arraycopy(mChars, start + mStart, buf, off, end - start);
    } 
```

现在您所要做的就是调用 getChar 并传递要填写的 char[]。

```
 int pl = mPasswordEt.length();
            char[] password = new char[pl];
            mPasswordEt.getText().getChars(0, pl, password, 0); 
```

`char[] password`您无需使用字符串即可获得所需。完成使用后，您可以按如下方式从内存中清除它。

```
Arrays.fill(password, ' '); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:23:49.677

您的应用程序可能会遇到两种可能的情况：

1.  所有应用程序都在其环境中进行了适当的沙盒处理。在这种情况下，您不必担心您的密码，因为其他进程无法访问您的进程内存，无论那里是否有字符串或字节 [] 数组。

2.  有一个具有超级用户访问权限的流氓应用程序。在这种情况下，您也不应该担心字符串，因为有太多地方可以截获您的密码，所以字符串应该接近要担心的事情列表的底部。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T06:26:14.303

[`Editable`](http://developer.android.com/reference/android/text/Editable.html)implements [`CharSequence`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/CharSequence.html)，根据文档，它是一个“可读的`char`值序列”。

# java - Java 与 JFrame 和类交互

> ID：10393954
> 
> 赞同：0
> 
> 时间：2012-05-01T05:33:10.710
> 
> 标签：java, swing, jframe

我在同一个包中有两个类。该包称为主包。Main 包含两个类，一个 Main 类和一个 Display 类。创建显示类以显示带有文本框和按钮的 GUI。我为按钮提供了一个侦听器，当用户单击其中一个按钮时会触发该侦听器。在主类中是我正在存储的对象向量，需要在显示类的文本框中一次显示一个。

我的问题是：鼠标单击操作是否可以调用主类中的一个方法，该方法收集所需的信息并将其传递回显示类中的方法以修改这些文本框>我需要将两个类合并为一个吗？我将如何在课堂上做？

通过测试，我使主类扩展了显示类。我可以从这里启动显示类，但是当我尝试从 main 调用显示中的方法时，它什么也不做。如果我尝试从显示类调用 main 方法，它似乎也什么都不做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:38:47.513

如果您希望您的机械师修理您的汽车（通过启动它、诊断问题、打开引擎盖等），您将您的汽车交给机械师，不是吗？

在 Java 中也是如此。如果您希望 Display 对象（机械师）访问 Main 对象（汽车）中可用的信息，则需要将 Main 对象提供给 Display：

```
Main main = new Main(); // main contains data
Display display = new Display(main) // Display is constructed, and is given the main object 
```

在显示中：

```
public void someButtonClicked() {
    String someInformation = this.main.getSomeInformation();
    this.someTextField.setText(someInformation);
} 
```

# arduino - 定时多次调用analogRead()

> ID：10393955
> 
> 赞同：1
> 
> 时间：2012-05-01T05:33:21.047
> 
> 标签：arduino, atmega

我希望将捕获波形的功能添加到基于 ATmega 328 的产品中，但我一直无法找到有关 ATmega 328 在进行 A/D 转换时的响应速度的详细信息。该代码正在 Arduino 上进行原型设计，但完成后将迁移到定制板。

我的计划是有一个总周期（通常为 16 到 20 毫秒，基于本地 AC 线路频率）并在该时间间隔内对单个引脚采样 50 到 100 次。ATmega 328 能否可靠地连续执行那么多转换？每次转换的最小间隔为 16ms / 100 = 160us。

如果有人必须查看代码，我可以添加一个代码示例，但现在我更关心的是多次连续 A/D 转换之间的最短时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:23:43.540

最简单的方法是编写一个 Arduino 脚本并为自己做一些时间基准测试。

另一种方式——按规范执行——需要为每个涉及的级别提供更多输入。

最底层的是 ATmega328 芯片。ADC 部分的文档说：

> 默认情况下，逐次逼近电路需要 50 kHz 到 200 kHz 之间的输入时钟频率才能获得最大分辨率。如果需要低于 10 位的分辨率，则 ADC 的输入时钟频率可以高于 200 kHz 以获得更高的采样率。

假设 ATMega 的时钟为 16 MHz，ADC 时钟的唯一可用预分频器值为 128，即 125 kHz 用于 10 位分辨率。如果您可以使用 8 位分辨率，则可以使用预分频器值 64 (250kHz)。

下一个： 文档说：

> 正常转换需要 13 个 ADC 时钟周期。ADC 开启后的第一次转换（ADCSRA 中的 ADEN 置位）需要 25 个 ADC 时钟周期来初始化模拟电路。

因此，采用 125kHz ADC 时钟这意味着“单次转换”模式下的采样率约为 9600Hz。这是每个样本 104µs。这些是 Arduino 的默认设置。

与您要求的 160µs 相比，这似乎不错。

**但是**：到目前为止，仅考虑了转换。您必须将数据传输到某个地方。**正如您在Arduino** dist`analogRead()`中的文件中所见，Arduino函数也有一些开销。`wiring_analog.c`

这个开销可能太多了 - 你必须自己测试它。

另一方面：没有人强迫你使用 Arduino`analogRead`功能。一些可用的选择：

*   `analogRead`你可以放弃和/或的开销
*   您可以根据需要重新配置 ADC（仅 8 位，更高的 ADC 时钟）和/或
*   您可以使用“高级”模式，如连续采样（ADC 的“自由运行模式”9 或
*   您甚至可以使用中断来触发转换。

当然，所有这些选择很大程度上取决于您的知识和时间预算。:-)

# r - 将直接标签添加到 ggplot2 geom_area 图表

> ID：10393956
> 
> 赞同：7
> 
> 时间：2012-05-01T05:33:35.300
> 
> 标签：r, ggplot2

这是此处问题的延续：[使用 ggplot2 创建非重叠堆积面积图](https://stackoverflow.com/questions/10393269/create-non-overlapping-stacked-area-plot-with-ggplot2)

我有一个由以下代码创建的 ggplot2 面积图。我希望标签`names`在图表的右侧对齐。我认为`directlabels`可能可行，但愿意尝试最聪明的方法。

```
require(ggplot2)
require(plyr)
require(RColorBrewer)
require(RCurl)
require(directlabels)

link <- getURL("http://dl.dropbox.com/u/25609375/so_data/final.txt")
dat <- read.csv(textConnection(link), sep=' ', header=FALSE, 
         col.names=c('count', 'name', 'episode'))

dat <- ddply(dat, .(episode), transform, percent = count / sum(count))

# needed to make geom_area not freak out because of missing value
dat2 <- rbind(dat, data.frame(count = 0, name = 'lane',
                             episode = '02-tea-leaves', percent = 0))

g <- ggplot(arrange(dat2,name,episode), aes(x=episode,y=percent)) + 
  geom_area(aes(fill=name, group = name), position='stack') + scale_fill_brewer()

g1 <- g + geom_dl(method='last.points', aes(label=name)) 
```

![在此处输入图像描述](../Images/b58caaf499d1049ff13ea7fa3b66e7e5.png)

我是新手`directlabels`，不太确定如何让标签与图形右侧对齐，颜色与区域相同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T08:24:14.617

您可以使用简单`geom_text`的添加标签。首先，对您的数据集进行子集化以获得最终的 x 值：

```
dd=subset(dat, episode=="06-at-the-codfish-ball") 
```

然后按因子级别对数据帧进行排序：

```
dd = dd[with(dd, order(name, levels(dd$name))),] 
```

然后计算出绘图的累积百分比：

```
dd$cum = cumsum(dd$percent) 
```

然后只需使用标准`geom_text`调用：

```
g + geom_text(data=dd, aes(x=6, y=cum, label=name)) 
```

哦，您可能需要调整 x 轴标签的角度以避免过度绘图：

```
g + opts(axis.text.x=theme_text(angle=-25, hjust=0.5, size = 8)) 
```

**图形**

![在此处输入图像描述](../Images/f3342619058f34915029624301006add.png)

# orm - 推进学说代码片段

> ID：10393961
> 
> 赞同：0
> 
> 时间：2012-05-01T05:33:58.183
> 
> 标签：orm, doctrine, symfony-1.4, propel

我正在使用带有 Doctrine ORM 的 symfony 1.4。我正在编辑一些动作，我需要将 Propel 查询重写为 Doctrine。这是片段：

```
 $c = new Criteria();
  $c->add(BlogCommentPeer::BLOG_POST_ID, $request->getParameter('id'));
  $c->addAscendingOrderByColumn(BlogCommentPeer::CREATED_AT);
  $this->comments = BlogCommentPeer::doSelect($c); 
```

任何人都可以帮助转换吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:01:58.570

在你的`BlogCommentTable.php`文件中，把这个方法：

```
public functoion retrieveByPostId($post_id)
{
  $q = $this->createQuery('c')
    ->where('c.blog_post_id = ?', array($post_id))
    ->orderBy('c.created_at ASC');

  return $q->execute();
} 
```

在你的行动中：

```
$this->comments = Doctrine_Core::getTable('BlogComment')->retrieveByPostId($request->getParameter('id')); 
```

# android - 如何在外部存储中以阿拉伯语将文本转语音文件保存为 .wav/.mp3 格式？

> ID：10393968
> 
> 赞同：7
> 
> 时间：2012-05-01T05:34:55.307
> 
> 标签：android, text-to-speech

我想用阿拉伯语保存音频文件。为此，我使用如下代码。
我正在尝试，但我无法以阿拉伯语保存。它仅以英语保存。请帮助我，谢谢

```
package com.t;

import java.io.File;
import java.util.HashMap;
import android.app.Activity;
import android.os.Bundle; 
import android.os.Environment;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class TextToSpeechNewActivity extends Activity {

Button store, play;
EditText input;
String speakTextTxt;
TextToSpeech mTts;
HashMap<String, String> myHashRender = new HashMap<String, String>();
String tempDestFile ;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    store = (Button) findViewById(R.id.button1);
    play = (Button) findViewById(R.id.button2);
    input = (EditText) findViewById(R.id.editText1);
    store.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            speakTextTxt = input.getText().toString();
            Log.v("log", ""+input.getText().toString());

            myHashRender.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID,speakTextTxt);

            String exStoragePath = Environment.getExternalStorageDirectory().getAbsolutePath();
            File appTmpPath = new File(exStoragePath + "/pradip");
            appTmpPath.mkdirs();
            String tempFilename = input.getText().toString()+".wav";
            tempDestFile = appTmpPath.getAbsolutePath() + "/"+ tempFilename;
            new MySpeech(speakTextTxt);

        }
    });
}

class MySpeech implements OnInitListener{

            String tts;

    public MySpeech(String tts)
    {
        this.tts = tts;
        mTts = new TextToSpeech(TextToSpeechNewActivity.this, this);
    }

    @Override
    public void onInit(int status) 
    {
        Log.v("log", "initi");
        mTts.synthesizeToFile(speakTextTxt, myHashRender, tempDestFile);
    }
  }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T07:36:40.283

从之前的评论：

> 这听起来可能有点明显，但是您是否尝试过`Locale`使用明确地将语言设置为阿拉伯语[`setLanguage(...)`](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#setLanguage%28java.util.Locale%29)？您还`Locale`可以通过检查的返回值首先检查 是否可用[`isLanguageAvailable(...)`](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#isLanguageAvailable%28java.util.Locale%29)

和：

> 从 Wikipedia 获取它们：[ISO 3166-1](http://en.wikipedia.org/wiki/ISO_3166-1#Officially_assigned_code_elements)和[ISO 639-1](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)。请注意，[`Locale`文档](http://developer.android.com/reference/java/util/Locale.html)说：*“语言代码是 ISO 639-1 定义的两个字母小写 ISO 语言代码（例如“en”）。国家代码是**两个字母**大写 ISO 国家代码（例如“US ") 由 ISO 3166-1 定义。*

# javascript - 使用 CSS 和 JavaScript 旋转盒子

> ID：10393969
> 
> 赞同：0
> 
> 时间：2012-05-01T05:35:01.630
> 
> 标签：javascript, jquery, html, animation, css

好的，所以我有一个用 CSS 制作的盒子，我想要它做的基本上是旋转。但是，我迷失的部分是，如何使用范围/滑块控制盒子旋转的速度？

这是我的 HTML 代码：

```
<!DOCTYPE html>

<head>
<meta charset="utf-8" />
<link rel="stylesheet" href="box.css" />
<link rel="javascript" href="spin.js" />
</head>

<body>
    <div id="box">
        <p id="text">Something goes here...</p>
    </div>
    <div id="control">
        <input id="controlo" type="range" min="10" max="50" step="5" value="25" />
    </div>
</body>
</html> 
```

这是我的 CSS 代码：

```
body{
    text-align:center;
}

#box{
    display:block;
    width:150px;
    margin:150px auto;
    padding:15px;
    text-align:center;
    border:7px solid blue;
    background:red;
    -webkit-transition: -webkit-transform 1.5s linear;
}

.eg {
 -webkit-transform: rotate(360deg);   
} 
```

最后是 JavaScript 代码：

```
var cur = 0;

function doit() {
    var speed = +$("#controlo").val();
    cur = (cur + speed);
    $("#box").css("-webkit-transform", "rotate(" + cur + "deg)");
}

setInterval(doit, 100); 
```

我不能让这个盒子旋转。我不知道怎么了，但请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:52:52.873

您将 JavaScript 包括在内是错误的。

你应该像这样包括它：

```
<script type="text/javascript" src="spin.js"></script> 
```

而不是这样：

```
<link rel="javascript" href="spin.js" /> 
```

您还应该确保您之前已经包含了 jQuery。所以前置

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:43:25.907

[我通过此链接http://jsfiddle.net/86D7Z/](http://jsfiddle.net/86D7Z/)将您的代码直接粘贴到 jsfiddle.net 中，它工作得很好。我似乎找不到你的问题。

编辑：我不敢相信我错过了 Micha 发现的东西。该睡了。

# c++ - 关于 C++ 中抽象/具体图的实现

> ID：10393970
> 
> 赞同：0
> 
> 时间：2012-05-01T05:35:28.873
> 
> 标签：c++, memory, inheritance, graph, reference

我正在编写一个适用于图表的程序。我正在处理两种类型的图：“抽象图”，它包含带有边的抽象顶点，以及“平面图”，其中顶点在平面上具有坐标 x，y（实际上我正在使用复杂的词缀 z但这无关紧要）。

我选择在我的 Vertex.h 文件中编写一个（抽象的）Vertex 类和一个派生类 Planar_Vertex，如下所示——这不完全是我的代码，我让它稍微简单一些，并从法语“翻译”它；）

```
class Vertex
{
public:
    Vertex();
    int get_label();
    void set_label(int label);
    void add_neighbor(int label);
    bool is_neighbor(int label);
    // etc
protected:
    int _label;
    std::vector<int> _list_neighbors;
};

class Planar_Vertex : public Vertex
{
    complex<double> _affix;
public:
    Planar_Vertex();
    Planar_Vertex(Vertex& V, complex<double> affix);
    complex<double> get_affix();
    void set_affix(complex<double> affix);
}; 
```

这是我的主要问题。我希望我的 Planar_Vertex(Vertex& V, complex affix) 构造函数具有以下效果： 1\. 输出一个 Planar_Vertex，其标签和邻居列表与 V 相同，并且给出了其词缀。到目前为止，很容易。2\. 我希望 V 恰好是这个新对象的抽象顶点。换句话说，如果在我的 main.cpp 文件中我写了，说，

```
Vertex V1;
...
Planar_Vertex V2(V1,z) 
```

那么我希望在 V2 上使用 set_label() 也会影响 V1（例如）。我的看法是，在这个构造函数中，我想说的是：使 V 的地址（在内存中）与构造的 Planar_Vertex 的地址相同（并释放先前分配给 V 的内存）。显然不可能改变内存中变量的位置，所以我不知道该怎么做。我对 C++ 比较陌生，而且我在阅读有关放置 new、std::move、rvalues 等方面迷失了方向。有人知道如何做我想做的事吗？

**[编辑：总而言之，我希望能够在已经构建的基类对象之上构建派生类的对象。]**

好的，既然我告诉你们那么多关于我的图表的实现，我想我会告诉你们剩下的，所以你们可以给我你的意见，我希望你们不介意。显然，您不必阅读以下内容，如果您知道我的第一个问题的答案，那已经很酷了。所以正如我告诉你的，我们正在处理“抽象图”，它包含抽象顶点，以及平面图，它包含平面顶点。

这是我的 Graph.h 文件的样子：

```
class Graph
{
public:
    Graph();
    virtual ~Graph();
    virtual std::vector<Vertex*> get_list_vertices();
    void add_edge(int label1, int label2);
    virtual void add_vertex(Vertex&);
    // etc
};

class Abstract_Graph : public Graph
{
    std::vector<Vertex*> _list_vertices;
public:
    Abstract_Graph();
    ~Abstract_Graph();
    std::vector<Vertex*> get_list_vertices();
    void add_vertex(Vertex& V);
    // etc
};

class Planar_Graph : public Graph
{
    std::vector<Planar_Vertex*> _list_planar_vertices;
public:
    Planar_Graph();
    ~Planar_Graph();
    std::vector<Vertex*> get_list_vertices();
    std::vector<Planar_Vertex*> get_list_planar_vertices();
    void add_vertex(Planar_Vertex& V);
    // etc
}; 
```

我的想法是基类 Graph 永远不会被实例化，但我将能够实现“抽象图操作”作为这个基类的函数，它们将在 Abstract_Graph 和 Planar_Graph 对象上工作。这要归功于纯虚函数 get_list_vertices。这是一种合理的做事方式吗？你会怎么做？

非常感谢您提前回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:53:31.883

如果我理解你，你可以在 Planar_Vertex 类中保留对 Vertex 对象的引用（或指针）来做你想做的事。
削减演示：

```
#include <iostream>

struct Vertex {
    int value;
};

struct Planar_Vertex: public Vertex {
    Vertex& vr;
    Planar_Vertex(Vertex& v): vr(v) {}
};

int main()
{
    Vertex v;
    v.value = 1;
    std::cout << v.value << std::endl;

    Planar_Vertex p = Planar_Vertex(v);
    p.vr.value = 2;
    std::cout << v.value << std::endl;
} 
```

如果使用引用，则*必须*在构造函数初始化列表中对其进行初始化。如果您使用指针，您在初始化它的方式上会有更大的灵活性，但必须担心到处都有空指针。

在这两种情况下，您都有责任确保 Vertex 的寿命超过 Planar_Vertex。

（另一种选择是将普通顶点（不是引用或指针）作为 Planar_Vertex 的成员——您通过 Planar_Vertex 的构造函数对其进行初始化，并在需要的任何地方使用它。这可以满足生命周期的要求，但在你的代码。）

对于您的第二部分，我认为没有任何根本性的错误，但是很难仅对您发布的内容发表意见。继承是一种方法，另一种方法是使用模板。哪一个更合适取决于确切的要求（以及您对这两个概念的熟悉程度）。

# python - 使用 cssselect 获取使用 lxml 的 url

> ID：10393972
> 
> 赞同：1
> 
> 时间：2012-05-01T05:35:30.813
> 
> 标签：python, lxml

我正在处理一个 url，我想获取特定的链接。
但是有很多桌子。
如何使用 lxml 在一行或两行代码中处理它？

```
url = 'http://www.bnm.gov.my/index.php?ch=109&pg=294&mth=3&yr=2012&eId=box1' 
```

我要下载
表格 2.1 利率的 excel：银行机构

当 html 中存在大量表格以及 tds 和 trs 时，我不明白如何工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:34:27.273

好吧，首先，该链接或该表行没有唯一标识符，因此无法获取它，`cssselect`并且您将无法获取它，而无需知道 URL 或标题的哪一部分将是.

假设您要匹配 section number `2.1`。查看页面，节号总是在一行的第一个单元格中。一旦找到正确的单元格，就可以遍历它的第二个同级单元格，该单元格应该包含链接，然后从链接中获取 URL。

```
>>> import urllib2
>>> from StringIO import StringIO
>>> from lxml import etree
>>> url = "http://www.bnm.gov.my/index.php?ch=109&pg=294&mth=3&yr=2012&eId=box1"
>>> ufile = urllib2.urlopen(url)
>>> root = etree.parse(ufile, etree.HTMLParser())
>>> for e in root.getiterator('tr'):
...     fc = e[0]       # first child
...     if fc.tag == 'td' and fc.text == '2.1':
...         link = fc.getnext().getnext()[0]  # first child of 2nd sibling
...         print link.attrib["href"]
...
files/publication/msb/2012/3/xls/2.1.xls 
```

# c# - 访问列表c#的随机元素的值

> ID：10393975
> 
> 赞同：0
> 
> 时间：2012-05-01T05:35:42.660
> 
> 标签：c#, list, random

我正在尝试访问列表中随机元素的值。目前我的代码似乎返回的是元素而不是值。

```
int x = _randMoveDecider.Count;

//makes sure x is never more than the array size
if(x != 0)
  {
    x = x - 1 ;
  }

Random _r = new Random();

_move = _r.Next(_randMoveDecider[x]);

return _randMoveDecider[_move]; 
```

目前，如果 _randMoveDecider 持有值 2、5 和 9，它将返回 0、1 或 2 而不是列表中的值，我哪里出错了？

[编辑] 我想我应该说，_randMoveDecider 的长度和存储在其中的值随着程序的每次运行而变化，但它们始终是整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:42:49.053

就这个怎么样？

```
// as a field somewhere so it's initialised once only
public Random _r = new Random();

    // later in your code
var _randList = new List<int>{4,5,8,9};
var _move = _r.Next(_randList.Count);
return _randList[_move]; 
```

更好的是，这里有一些可以随机化任何列表的东西：

```
public static Random _rand = new Random();

public IEnumerable<T> Randomise<T>(IList<T> list)
{
    while(true)
    {
        // we find count every time since list can change
        // between iterations
        yield return list[_rand.Next(list.Count)];
    }
} 
```

在您的场景中使用它的一种方法：

```
// make this a field or something global
public IEnumerbale<int> randomiser = Randomise(_randList);

// then later
return randomiser.First(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T05:42:33.403

首先，您应该初始化 Random 一次。使其成为一个字段：

```
private Random _rand = new Random(); 
```

然后从适当的范围内得到一个随机数。if(x!=0) 没用 - Next() 返回 numbersform <0, n) 范围

```
return _randMoveDecider[_rand.Next(_randMoveDecider.Count)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T06:11:34.950

只需在主类中添加这个扩展类：

```
public static class Extensions
{
    public static int randomOne(this List<int> theList)
    {
        Random rand = new Random(DateTime.Now.Millisecond);
        return theList[rand.Next(0, theList.Count)];
    }
} 
```

然后调用它：

```
int value = mylist.randomOne(); 
```

编辑：这是一个测试程序，演示如何使用该方法。请注意，由于 Random 的错误使用，它会产生非常不平衡的结果，100 个中超过 50 个“随机”数字是相同的。

```
class Program
{
    static void Main(string[] args)
    {
        var myList = Enumerable.Range(0, 100).ToList();
        var myRandoms = myList.Select(v => new { key = v, value = 0 })
                 .ToDictionary(e => e.key, e => e.value);

        for (int i = 0; i < 100; i++)
        {
            var random = myList.RandomOne();
            myRandoms[random]++;
        }

        Console.WriteLine(myRandoms.Values.Max());
        Console.ReadLine();
    }
} 
```

要解决此问题，请为 Extension 类制作 Random 静态实例或在程序中更广泛地共享。这在[Random 的常见问题解答中进行](https://stackoverflow.com/questions/767999/random-number-generator-not-working-the-way-i-had-planned-c)了讨论。

```
public static class Extensions
{
    static Random rand = new Random();
    public static int randomOne(this List<int> theList)
    {
        return theList[rand.Next(0, theList.Count)];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:26:28.800

```
var random = new Random();
var item = list.ElementAt(random.Next(list.Count())); 
```

# javascript - 如何读取图像的块？

> ID：10393980
> 
> 赞同：2
> 
> 时间：2012-05-01T05:36:15.567
> 
> 标签：javascript, html, css

许多网站都使用这种技术（facebook、google 也是如此）

例如，打开 facebook.com

保存此页面（不是 *.MHTM，而是带有图像的 HTML）（意思是登录页面）

它节省：

facebook_files（目录） facebook.html（文件）

然后在文件夹中，您可以看到一个包含页面所有主要图像的 GIF 文件。

问题是：如何读取一个文件中的许多块？以及如何调用这种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:38:02.027

这些图像被称为“精灵”。看看[这篇](http://css-tricks.com/css-sprites/)关于它们的文章。

基本思想是，每当您想使用精灵中的图像时，您都有一个元素，它只显示大精灵图像的一部分。因此，您页面中的每个“图像”实际上都是`div`以该图像为背景的，只是进行了偏移，以使右侧部分显示出来。

主要优点是您的页面需要更少的请求，因此加载速度更快。

网上有一些工具可以让使用精灵更容易。我没有使用过任何一个，所以不能推荐一个，但是使用一个工具可以为你节省很多工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T05:38:33.887

这就是你所说的“精灵”，就像街机游戏中使用的精灵（一个角色的不同位置的图像）。基本上它是包含较小图像的一大块图像。

这种方法的优点是，您只需请求一个包含这 100 个 gif 的巨大图像，而不是 100 个不同的 HTTP 请求对 100 个小 gif（这会导致开销）。然后不是使用`<img>`每个图像，而是使用 CSS `background`，然后使用`background-position`“通过”容器对齐正确的图像以显示正确的图像。

# mysql - MySQL：等号冒号 =: 在更新语句中是什么意思？

> ID：10393986
> 
> 赞同：7
> 
> 时间：2012-05-01T05:37:21.877
> 
> 标签：mysql, variables

我遇到了以下 MySQL 查询：

```
update 'table' set itemId=:itemId, startDate=:startDate where id=:id 
```

但是我无法弄清楚 =: 是什么意思。我认为 =: 之后的名称是一个变量，但是如何检查里面的内容或它是如何设置的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T05:43:08.830

这可能是引用绑定变量。执行 MySQL 语句的 PHP 或其他代码将引用替换为变量。

# java - 用spring配置集群hornetq客户端

> ID：10393988
> 
> 赞同：2
> 
> 时间：2012-05-01T05:37:48.737
> 
> 标签：java, spring, hornetq

我正在尝试使用 hornetq 核心 API 和 spring 来定义 hornetq 客户端，这将是 HA。但是当我停止实时服务器并且备份服务器变为“实时”时，客户端失败并出现连接错误。知道我做错了什么吗？

我定义了集群的独立 hornetq 服务器（没有组或发现）。hornetq-configuration.xml：

```
...
<connectors>
  <connector name="netty">
     <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</factory-class>
     <param key="host"  value="${hornetq.remoting.netty.host:live-host}"/>
     <param key="port"  value="${hornetq.remoting.netty.port:5445}"/>
  </connector>

  <!-- Connector to this server.s backup. This is needed for failback to work properly in a static cluster -->
  <connector name="netty-backup">
     <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</factory-class>
     <param key="host"  value="${hornetq.remoting.netty.host:backup-host}"/>
     <param key="port" value="${hornetq.remoting.netty.port:5446}"/>
  </connector> 
```

```
<cluster-connections>
  <cluster-connection name="my-cluster">
     <address>jms</address>
     <connector-ref>netty</connector-ref>
     <retry-interval>500</retry-interval>
     <use-duplicate-detection>true</use-duplicate-detection>

     <forward-when-no-consumers>false</forward-when-no-consumers>
     <max-hops>1</max-hops>
     <static-connectors>
        <!-- Without this the connection factory won.t be able to reconnect on failback -->
        <connector-ref>netty-backup</connector-ref>
     </static-connectors>

  </cluster-connection> 
```

...

我定义了hornetq客户端：

```
@Test
public void testHA() throws InterruptedException, IOException{
    List<TransportConfiguration> transportConfigurationList = new ArrayList<TransportConfiguration>();
       Map<String, Object> transportProperties = new HashMap<String, Object>();
                    transportProperties.put("host", "live-server");
                    transportProperties.put("port", 5445);
       transportConfigurationList.add(new TransportConfiguration("org.hornetq.core.remoting.impl.netty.NettyConnectorFactory", transportProperties));
       transportProperties = new HashMap<String, Object>();
                    transportProperties.put("host", "backup-server");
                    transportProperties.put("port", 5446);
       transportConfigurationList.add(new TransportConfiguration("org.hornetq.core.remoting.impl.netty.NettyConnectorFactory", transportProperties));
       HornetQJMSConnectionFactory connectionFactory = new HornetQJMSConnectionFactory(true, transportConfigurationList.toArray(new TransportConfiguration[2]));

       JmsTemplate producer = new JmsTemplate(connectionFactory);
       producer.send(new HornetQTopic("deploy"), new MessageCreator() {
            @Override
            public Message createMessage(Session session) throws JMSException {
                TextMessage txtMessage = session.createTextMessage("my message");                   
                return txtMessage;
            }
        });

       System.out.println("Stop live server");
       System.in.read();

       producer.send(new HornetQTopic("deploy"), new MessageCreator() {
            @Override
            public Message createMessage(Session session) throws JMSException {
                TextMessage txtMessage = session.createTextMessage("my message");                   
                return txtMessage;
            }
        });

       Thread.sleep(60000);
} 
```

输出：

```
 Stop live server

Apr 30, 2012 5:08:32 PM org.hornetq.core.logging.impl.JULLogDelegate warn
WARNING: Tried 1 times to connect. Now giving up on reconnecting it. 
```

此外，现场服务器有日志错误：

*   [Thread-4 (HornetQ-server-HornetQServerImpl::serverUUID=70ca0e65-8ecf-11e1-82e8-d5eac4a07302-1433965066)] 1-May 8:27:57,976 FINE [ServerLocatorImpl] 连接器 [initialConnector=org-hornetq-core-remoting -impl-netty-NettyConnectorFactory?port=5446&host=10-45-7-150]:: 建立连接器初始连接时出现异常 HornetQException[errorCode=2 message=无法使用配置 org-hornetq-core-remoting-impl 连接到服务器-netty-NettyConnectorFactory?port=5446&host=backup-server] 在 org.hornetq.core.client.impl.ClientSessionFactoryImpl.connect(ClientSessionFactoryImpl.java:234) 在 org.hornetq.core.client.impl.ServerLocatorImpl$StaticConnector$Connector .tryConnect(ServerLocatorImpl.java:1777) 在 org.hornetq.core.client.impl.ServerLocatorImpl$StaticConnector.connect(ServerLocatorImpl.java:1614) 在 org.hornetq。core.client.impl.ServerLocatorImpl.connect(ServerLocatorImpl.java:587) 在 org.hornetq.core.client.impl.ServerLocatorImpl$3.run(ServerLocatorImpl.java:554) 在 org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1。 run(OrderedExecutorFactory.java:100) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang .Thread.run(Thread.java:662)concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:00:12.803

我找到了如何创建与 HA 一起使用的 hornetq 客户端，但它需要我使用 JNDI 并通过查找获取连接工厂。我确实喜欢这样：

```
<bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
    <property name="environment">
        <props>
            <prop key="java.naming.provider.url">jnp://jndi-host:jndi-port</prop>
            <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory</prop>
        </props>
    </property>
</bean>

<bean id="connectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="jndiTemplate" />
    <property name="jndiName" value="ConnectionFactory" />
</bean> 
```

有没有办法在没有 JNDI 的情况下创建这样的客户端？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T00:06:12.443

spring config 设置 HornetQ 故障转移到备份服务器

```
<bean id="hornetQConnectionFactory" class="org.hornetq.jms.client.HornetQJMSConnectionFactory">
        <constructor-arg index="0" name="ha" value="true" />
        <constructor-arg index="1">
            <list>
                <bean class="org.hornetq.api.core.TransportConfiguration">
                    <constructor-arg value="org.hornetq.core.remoting.impl.netty.NettyConnectorFactory" />
                    <constructor-arg>
                        <map key-type="java.lang.String" 
                             value-type="java.lang.Object">
                            <entry key="host" value="Q-server-1"></entry>
                            <entry key="port" value="5445"></entry>
                        </map>
                    </constructor-arg>
                </bean>
                <bean class="org.hornetq.api.core.TransportConfiguration">
                    <constructor-arg value="org.hornetq.core.remoting.impl.netty.NettyConnectorFactory" />
                    <constructor-arg>
                        <map key-type="java.lang.String" 
                             value-type="java.lang.Object">
                            <entry key="host" value="Q-server2"></entry>
                            <entry key="port" value="5446"></entry>
                        </map>
                    </constructor-arg>
                </bean>
            </list>
        </constructor-arg>
    </bean> 
```

Q1 为主，Q2 设置为备用。适用于 HornetQ hornetq-2.4.0.Final 独立安装，客户端 hornetq-jms-client 版本：2.4.5.Final

# mysql - mysql使用带有子查询的临时表，但不是group by和order by

> ID：10393990
> 
> 赞同：0
> 
> 时间：2012-05-01T05:37:57.847
> 
> 标签：mysql, explain

我有以下 mysql 查询，运行大约需要 3 分钟。它确实有 2 个子查询，但表的行数很少。在进行解释时，看起来“使用临时”可能是罪魁祸首。显然，数据库似乎正在为所有三个查询创建一个临时表，如下面的“使用临时”名称中所述。

让我感到困惑的是 MySQL 文档说，使用临时性通常是由 group by 和 order by 引起的，我都没有使用。子查询是否会导致隐含的 group by 或 order by？无论 group by 或 order by 是否都需要导致临时表的子查询？有关如何重组此查询以便 MySQL 可以更有效地处理它的任何建议？MySQL设置中的任何其他调整想法？

```
mysql> explain
SELECT DISTINCT COMPANY_ID, COMPANY_NAME
  FROM COMPANY
 WHERE ID IN (SELECT DISTINCT ID FROM CAMPAIGN WHERE CAMPAIGN_ID IN (SELECT
              DISTINCT CAMPAIGN_ID FROM AD
              WHERE ID=10 AND (AD_STATUS='R' OR AD_STATUS='T'))
              AND (STATUS_CODE='L' OR STATUS_CODE='A' OR STATUS_CODE='C'));

+----+--------------------+----------+------+---------------+------+---------+------+------+------------------------------+
| id | select_type        | table    | type | possible_keys | key  | key_len | ref  | rows | Extra                        |
+----+--------------------+----------+------+---------------+------+---------+------+------+------------------------------+
|  1 | PRIMARY            | COMPANY  | ALL  | NULL          | NULL |    NULL | NULL | 1207 | Using where; Using temporary |
|  2 | DEPENDENT SUBQUERY | CAMPAIGN | ALL  | NULL          | NULL |    NULL | NULL |  880 | Using where; Using temporary |
|  3 | DEPENDENT SUBQUERY | AD       | ALL  | NULL          | NULL |    NULL | NULL |  264 | Using where; Using temporary |
+----+--------------------+----------+------+---------------+------+---------+------+------+------------------------------+ 
```

谢谢！菲尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:50:11.920

我不知道您的架构的结构，但我会尝试以下操作：

```
CREATE INDEX i_company_id ON company(id);   -- should it be a Primary Key?..
CREATE INDEX i_campaign_id ON campaign(id); -- same, PK here?
CREATE INDEX i_ad_id ON ad(id);             -- the same question applies
ANALYZE TABLE company, campaign, ad; 
```

您的查询可以这样简化：

```
SELECT DISTINCT c.company_id, c.company_name
  FROM company c
  JOIN campaign cg ON c.id = cg.id
  JOIN ad ON cg.campaign_id = ad.campaign_id
 WHERE ad.id = 10
   AND ad.ad_status IN ('R', 'T')
   AND ad.status_code IN ('L', 'A', 'C'); 
```

`DISTINCT`子查询中的子句对您来说大大减慢了速度，最后一个就足够了。

# java - 关于铸造

> ID：10393993
> 
> 赞同：-1
> 
> 时间：2012-05-01T05:38:13.587
> 
> 标签：java

我对类型转换做了一个简短的研究，下面是我的代码

```
interface Foo {}
class Alpha implements Foo {}
class Beta extends Alpha {}

public class Delta extends Beta
{
    public static void main( String[] args )
 {      
        Beta x = new Beta();         
         Alpha a = x;
            // Foo f = (Alpha)x;// --> commented out
         Beta b = (Beta)(Alpha)x;   
         Foo f = (Delta)x; //  --> complie time error   

    }

} 
```

如上一条语句所示，它会引发运行时错误 java.lang.ClassCas tException，请告知，如果我使用 Alpha 投射它，那么它工作得非常好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T05:41:47.920

您不能将变量向下转换为在类层次结构中比实际对象更深的类型。这是因为需要将一些属性添加到向下转换的变量中，并且不清楚它们的值应该是什么。

然而，在所有关于强制转换的检查中，真正重要的是被引用对象的实际类型，而不是当前声明的类型。例如，即使您有`Alpha a = x;`，这仍然可以向下转换为`Beta`，因为真实实例指向 的对象`Beta`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T05:41:32.963

你不能`Beta`灰心丧气`Delta`。

您所做的类似于实例化`Animal`（Beta）对象，然后将其向下转换为`Animal`（Beta）的子类，例如`Dog`（Delta）。这是非法的。

# sql - 从重复结果中选择具有最大日期的行

> ID：10393995
> 
> 赞同：1
> 
> 时间：2012-05-01T05:38:16.473
> 
> 标签：sql, sql-server, tsql, sql-server-2000

注意：我正在使用 SQL 2000。

我想通过为此加入执行类似的操作来选择 t2.JobCompletionTime 的 MAX 日期的行，但我知道这不是正确的代码/语法，因为它不起作用......但我希望很清楚我是什么我正在尝试做。

```
LEFT OUTER JOIN (
  SELECT *
  FROM DSM_StandardProcedureActivityView
  WHERE
  ( (PackageName = 'Adobe Acrobat 10'  AND PackageVersion = '-1.0') AND
    (MAX (JobCompletionTime))
  )
) t2 ON t1.UUID = t2.UUID 
```

我现在的完整工作 SQL 代码是：

```
SELECT 
t1.Business,
t1.[Sub-Business],
t1.Pole,
t1.DomainManager,
t1.ScalabilityServer,
t1.Location,
t1.Country,
t1.Name,
t3.VolumeName,
t3.VolumeFreeInMB,
t3.VolumeSizeInMB,
FROM (
  SELECT *
  FROM DSM_StandardGroupMembersView
  WHERE 
  (  GroupName = 'Adobe Acrobat'
  )
) t1
LEFT OUTER JOIN (
  SELECT *
  FROM DSM_StandardProcedureActivityView
  WHERE
  ( (PackageName = 'Adobe Acrobat 10'  AND PackageVersion = '-1.0')
  )
) t2 ON t1.UUID = t2.UUID
LEFT OUTER JOIN (
  SELECT *
  FROM DSM_StandardHardwareDiskUsageView
  WHERE VolumeName = 'C:\'
) t3 ON t1.Name = t3.Name
ORDER BY t1.Business, t1.[Sub-Business], t1.Pole, t1.DomainManager, t1.ScalabilityServer, t1.Country, t1.Location, [Job Status], t1.Name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:32:43.470

您发布了太多不相关的 SQL，我无法涉足，所以我将修复您的摘录：

```
LEFT OUTER JOIN (
  SELECT * FROM (
    SELECT *
    FROM DSM_StandardProcedureActivityView
    WHERE PackageName = 'Adobe Acrobat 10'
    AND PackageVersion = '-1.0'
    ORDER BY JobCompletionTime DESC) x
   ) y
   GROUP BY PackageName, PackageVersion
) t2 ON t1.UUID = t2.UUID 
```

这里发生的是内部查询首先获取按最新 JobCompletionTime 排序的行，下一级查询在匹配列上使用 group by，在 mysql 中，它为您提供第*一个*匹配行（最新的，因为我们对行进行了排序）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:38:07.950

一个名为 ROW_NUMBER() 的排名函数可以在这里为您提供帮助

```
LEFT OUTER JOIN (
    SELECT 
        *, 
        rowNumber = ROW_NUMBER() OVER (ORDER BY JobCompletionTime DESC)
    FROM DSM_StandardProcedureActivityView
    WHERE PackageName = 'Adobe Acrobat 10'
    AND PackageVersion = '-1.0'
) t2 ON t1.UUID = t2.UUID AND rowNumber = 1 
```

按 JobCompletionTime 排序（降序）应将最高值作为第 1 行；因此在连接子句中添加了额外的子句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T08:06:14.497

逐步完成此操作，以使其在此处可能会出现解释错误的地方更加明显...

第 1 步：稍微美化您的查询 + 省略，`ORDER BY`因为您可以稍后再次轻松添加该查询

```
SELECT t1.Business,
       t1.[Sub-Business],
       t1.Pole,
       t1.DomainManager,
       t1.ScalabilityServer,
       t1.Location,
       t1.Country,
       t1.Name,
       t3.VolumeName,
       t3.VolumeFreeInMB,
       t3.VolumeSizeInMB

  FROM DSM_StandardGroupMembersView  t1

  LEFT OUTER JOIN DSM_StandardProcedureActivityView t2
               ON t2.PackageName = 'Adobe Acrobat 10'  
              AND t2.PackageVersion = '-1.0'
              AND t2.UUID = t1.UUID

  LEFT OUTER JOIN DSM_StandardHardwareDiskUsageView t3
               ON t3.VolumeName = 'C:'
              AND t3.Name = t1.Name

 WHERE t1.GroupName = 'Adobe Acrobat' 
```

我理解您的问题的方式是您希望将 DSM_StandardProcedureActivityView t2 中的记录限制为仅代表最新情况的记录（基于 t2.JobCompletionTime 字段）。对 ？现在要么我们先把它分组，然后加入那些匹配的（通过 UUID），或者我们反过来想，首先让列表限制为所需的 UUID，然后去掉所有那些有更新的 UUID版本。由于您使用的是 SQL2000，我建议使用后者，因为我不确定查询优化器是否能够优化前者。（随意测试=）

这看起来像这样：

```
SELECT t1.Business,
       t1.[Sub-Business],
       t1.Pole,
       t1.DomainManager,
       t1.ScalabilityServer,
       t1.Location,
       t1.Country,
       t1.Name,
       t3.VolumeName,
       t3.VolumeFreeInMB,
       t3.VolumeSizeInMB

  FROM DSM_StandardGroupMembersView  t1

  LEFT OUTER JOIN DSM_StandardProcedureActivityView t2
               ON t2.PackageName = 'Adobe Acrobat 10'  
              AND t2.PackageVersion = '-1.0'
              AND t2.UUID = t1.UUID
              -- limit to latest records only!
              AND NOT EXISTS ( SELECT *
                                 FROM DSM_StandardProcedureActivityView t2_newer
                                WHERE t2_newer.UUID = t2.UUID
                                  AND t2_newer.JobCompletionTime > t2.JobCompletionTime )

  LEFT OUTER JOIN DSM_StandardHardwareDiskUsageView t3
               ON t3.VolumeName = 'C:'
              AND t3.Name = t1.Name

 WHERE t1.GroupName = 'Adobe Acrobat' 
```

希望这可以帮助。