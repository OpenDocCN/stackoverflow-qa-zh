# StackOverflow 问答 000623000-000623999

# php - Web 开发中使用的数组示例

> ID：623004
> 
> 赞同：0
> 
> 时间：2009-03-08T03:54:38.283
> 
> 标签：php, arrays

我今天和一个人交谈，他提到他在调用参数时或出于其他原因从数据库中提取数据时使用了数组等。

基本上我的问题是：你将如何在 Web 开发中使用数组？

例如：

如果您有这样的网址（社交约会网站）

```
http://www.example.com/page.php?sid=1&agefrom=30&ageto=40&sex=female&loccation=los angeles 
```

我将如何查询浏览页面（显示用户列表时）是

```
$id = mysql_real_escape_string($_GET['id']);
$agefrom = mysql_real_escape_string($_GET['agefrom']);
$ageto = mysql_real_escape_string($_GET['ageto']);
$sex = mysql_real_escape_string($_GET['sex']);
$location = mysql_real_escape_string($_GET['location']);

mysql_query("select from table where id = '$id' and  agefrom='$agefrom' [.....the rest of the query]") 
```

这可以用数组来完成吗？如果未选择位置或未输入年龄怎么办？如果我做了查询，它可能会失败。

我希望我的问题现在更清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T04:04:41.550

数组使在变量中保存一组值或键 => 值对变得容易。它还使得迭代一组值变得容易。

```
foreach ($myarray as $key => $value)
{
  // do something with this key and value
} 
```

如果您将大量值传递给函数，并且可以将这组值视为列表或查找表，那么您将使用数组。

有关更多信息，请[参阅有关数组的 PHP 手册。](http://au.php.net/manual/en/language.types.array.php)

**编辑：**

我想我现在明白你的意思了。通过创建一个接受值作为数组的函数来对数据库调用进行排序可能会有所帮助。例如：

```
function editrecord($recordid, $values)
{
  // SQL is generated by what is in $values, and then query is run
  // remember to check keys for validity and escape values properly      
} 
```

这当然是一个极端的简单化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T04:16:14.270

数组是任何语言的一个重要特征，它们具有 O(1)（[常数时间](http://en.wikipedia.org/wiki/Constant_time)）随机访问，并且可以用作基础数据结构来制作更复杂的类型。

具体来说[PHP](http://www.php.net/manual/en/language.types.array.php)，数组经常被使用，语言本身使用它们来获取[GET](http://www.php.net/manual/en/reserved.variables.get.php)和[POST](http://www.php.net/manual/en/reserved.variables.post.php)参数。

要获取数据，您还可以在 PHP 中使用数组。

您可以使用[`mysql_fetch_assoc`](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)，这将从数据库中提取结果行作为关联数组，数组的每个索引将代表当前行的一列数据：

```
//...
$sql = "SELECT id as userid, fullname, userstatus 
        FROM   sometable
        WHERE  userstatus = 1";

$result = mysql_query($sql);
while ($row = mysql_fetch_assoc($result)) {
    // Here, the $row variable is an associative array.
    echo $row["userid"];
    echo $row["fullname"];
    echo $row["userstatus"];
} 
```

# java - Java 拖放到本机操作系统

> ID：623005
> 
> 赞同：2
> 
> 时间：2009-03-08T03:56:04.520
> 
> 标签：java, drag-and-drop, java-native-interface

我已经四处寻找了一段时间，但还没有找到任何有关如何将 ImageIcon 拖到 Windows 文件夹并获取“放置”ImageIcon 的路径的 Java 库或信息。我真的很想要一个跨 OSX/linux/Win 的平台独立解决方案，但至少想要一个 Windows 实现。以前有没有人这样做过，有没有一个项目有一个库可以做到这一点？如果不能，我能否获得关于如何开发 C++ 代码来做到这一点的方向（网站），如果可能的话，我假设必须通过 JNI 来完成。它甚至可行吗？

我在 java、python 和 perl 方面有丰富的经验，但对 C/C++ 的接触有限，这就是为什么我希望已经有一个库或一些代码可以做到这一点，如果没有的话，我更愿意弄脏我的手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T04:05:14.513

如果您使用的是 Java 6，请参阅[有关 JDK6 拖放的页面](http://java.sun.com/javase/6/docs/technotes/guides/dragndrop/index.html)。

# .net - 循环依赖与 DRY

> ID：623006
> 
> 赞同：6
> 
> 时间：2009-03-08T03:59:57.133
> 
> 标签：.net, dry, circular-dependency

我正在设计一个可重用的类库，其中包含 2 个名为 core.xml.dll 和 core.string.dll 的程序集（其中包括）。

xml 程序集引用字符串程序集，以便使用一些字符串辅助方法。

但是，现在有一个字符串方法可以从使用 xml 程序集中包含的方法中受益。

如果我从字符串程序集引用 xml 程序集，我将创建一个循环依赖项，并且将无法从源代码构建这两个程序集。（即鸡和蛋的问题）。

为了遵循“不要重复自己”的原则，我想避免在两个程序集中重复功能。如果我在实现中发现错误，我只想在一个地方修复它。

虽然我可以将程序集合并为一个，但这并不理想，因为它会降低程序集的凝聚力。

我需要重新构建和重新部署整个程序集，只是为了对特定类进行小改动。此外，最终，由于依赖关系如此之多，我最终可能会得到一个巨大的库程序集。

那么在一组可重用的库程序集的上下文中，在这里使用的最佳方法是什么？另外，.NET 框架本身是如何处理这个问题的？

（在 Reflector 中，System.Configuration.dll 似乎引用了 System.XML.DLL，反之亦然。这实际上是否正确，如果是这样，如何管理循环依赖关系？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-08T04:15:48.513

同意刀。循环依赖是一种设计气味。无情地重构它！

在业务对象紧密耦合的情况下，这可能具有挑战性。在大多数情况下，这可以通过依赖注入来解决。

伪 C++ 示例：

```
class Employee {
    Company company;
};

class Company {
    vector<Employee> employees;
}; 
```

棘手？不一定：

```
template<class CompanyT>
class Employee {
    CompanyT company;
};

class Company {
    vector<Employee<Company> > employees;
}; 
```

必须依赖更高级别的更原始类型可以抽象为与任何其他类型一起使用，只要它履行其合同即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T04:06:49.673

听起来你需要第三次组装......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-08T04:18:08.587

使其成为在 xml 程序集中定义的扩展方法（基于您的注释“接受 XML 并转换为基于字符串的格式的转换方法”）。它正在处理xml。就像 Linq 对 IEnumerable 所做的一样。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-08T04:18:24.157

如果您的 String 库确实需要您的 XML 库，这可能表明您的 String 库需要重构为较低级别的数据类型定义和“核心实用程序”（如果可能，没有外部依赖项），以及另一个更高级别的库，它可能会引入 XML、SQL、正则表达式或您认为在应用层有用的任何其他内容。

# c# - 如何打开 2+ 个 VLC 实例并以编程方式控制它们？

> ID：623010
> 
> 赞同：1
> 
> 时间：2009-03-08T04:06:36.447
> 
> 标签：c#, c++, mdi

我正在考虑编写一个应用程序（在 C++ 或 C# 中）来帮助我更快地对视频进行排序，我想知道：我怎样才能打开超过 2 个（也许更多）的 VLC 实例并通过我的 EXE 控制它们？我有哪些选择？我知道我可以`SendMessage`直接到EXE。我可以做类似模拟用户键的事情吗？

如何在我的 EXE 中打开 VLC exe？有一阵子了。最近我只做过命令行应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T07:07:24.217

瑞恩走在正确的道路上。您需要使用 Process 类来打开 vlc.exe 进程，但随后您需要向其附加命令行语句。VLC 具有丰富的命令行参数语法，可让您对视频文件或捕获设备执行很多操作。

我最近编写了一个应用程序，允许用户通过 VLC 自定义来自多个卫星天线、DVD 设备和数字电视转换器盒的多播广播。所以它可以完成，而且相当容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T04:42:00.307

你可以试试，

```
Process.Start("Path to vlc.exe"); 
```

那应该启动 VLC。但至于在 VLC 中打开文件，我不知道是否有 VLC 的互操作或 API。

你可以在这里找到更多信息

[http://wiki.videolan.org/Developers_Corner](http://wiki.videolan.org/Developers_Corner)

# windows - 没有 bash/cygwin 的 git

> ID：623018
> 
> 赞同：4
> 
> 时间：2009-03-08T04:14:53.010
> 
> 标签：windows, git, version-control, cygwin

我在 vista 笔记本电脑上，第一次尝试 git。

我安装[了 msysgit 版本](http://code.google.com/p/msysgit/)，它在桌面上安装了一个“git bash”快捷方式。当我运行它时，它似乎在一个 cygwin 类型的盒子里运行，在`C:\`哪里`/c/`

从 windows 命令行使用 git 是否`/c/`安全`C:\`？这是否与 git 期望路径的方式产生任何冲突？

那么，如果我`init`来自 bash/cygwin 控制台，那么`commit`来自 Windows 控制台呢？这会造成任何麻烦吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T04:41:49.327

**注意：**请记住，git 不会跟踪存储库的位置——只是引用。换句话说，您可以干净地移动整个 git 目录（.git + 工作树），它仍然可以正常工作。

假设您的环境变量允许您从 Windows 命令行运行 git，它应该在任何一种情况下都有效。

两者都指向相同的实际目录（尽管引用方式不同），并使用相同的可执行文件来修改存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T06:36:39.220

当你安装 MSYS Git 时，它会给你 3 个与系统路径相关的选项。您选择哪一个将决定您如何使用它。听起来您想要第三个选项，“从 Windows 命令提示符运行 Git 和包含的工具”。这会将所有与 git 相关的二进制文件放在系统路径中，允许您从普通命令提示符使用 git。请注意，正如安装程序中的警告所说，它还覆盖了一些内置的 Windows 工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T04:59:17.660

安装 msysgit 后，您应该能够右键单击一个空文件夹并看到选项“Git GUI here”和“Git BASH here”。如果您在此处单击 Git GUI，它将打开一个 GUI。玩得开心！

# web-services - 如何从 MS Access 读取/更新 Exchange 2007 日历

> ID：623021
> 
> 赞同：1
> 
> 时间：2009-03-08T04:16:03.460
> 
> 标签：web-services, ms-access, calendar, exchange-server, exchange-server-2007

我们有 Exchange 2007，并且需要非常复杂的组调度。如果被邀请的人当然没有在他们的 Outlook 日历中看到它，那么组调度是没有用的。有关这些约会何时进行以及谁应该在那里的数据存在于 Excel 或 Access 应用程序中。我购买了 Microsoft 书籍“Inside Microsoft Exchange Server 2007 Web Services”，并看到了很多 Web 服务示例，这些示例几乎假设我了解 Visual Studio。就我而言，我 15 年来没有做过太多编程，希望找到一种方法，让我可以将 Access 2007 直接连接到 Exchange 2007 数据，而不需要中间的第三个复杂部分。我还阅读了一本 Access 书，并有一本 Access 编程书，那里的示例似乎没有谈论 Exchange Web 服务？

简而言之，是否可以（以编程方式）从 MS Access 等办公应用程序中交换我们的 Outlook 约会信息？

谢谢巴特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T04:38:48.053

是的。您可以使用[CDO](http://www.microsoft.com/downloads/details.aspx?FamilyID=2714320d-c997-4de1-986f-24f081725d36&displaylang=en)从 MS Access 2007 与 Exchange 2007 对话。

这篇[MS 支持文章](http://support.microsoft.com/kb/310557)可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-09T09:37:37.623

[在这篇文章](https://stackoverflow.com/questions/547783/automatically-create-outlook-appointments/551725#551725)中，有一些示例 VBA，可能会有所帮助。也可以使用 Get External Data->Link 并选择 Exchange 将 Exchange 表直接链接到 Access。

# oracle - 如何将excel中的汉字导入oracle

> ID：623028
> 
> 赞同：0
> 
> 时间：2009-03-08T04:20:06.477
> 
> 标签：oracle

如何将excel中的汉字导入oracle，并将oracle中的汉字提取到excel中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-08T07:07:22.063

您只需确保已将 Oracle 设置为使用与 Unicode 兼容的字符编码（我推荐 UTF-8），并且您用于进行传输的任何工具都不是非 Unicode 安全的。

在不知道您使用什么进行传输的情况下，很难提供有关哪里出了问题的更具体的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-09T18:23:24.910

确保使用正确的字符集设置数据库以正确存储/容纳中文字符。如果数据库不能存储它，那么导入它是没有意义的。如果数据库可以支持亚洲字符集，则将客户端字符集设置为兼容的字符集。一旦完成，下划线 oci/odbc 层将处理一个字符集到另一个字符集的转换，只要它们兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-27T03:06:55.003

检查以下内容。

1.  数据库字符集 (zhs16gbk)
2.  将局部变量设置为 NLS_LANG=SIMPLIFIED CHINESE.CHINA_UTF8
3.  打开excel文件将文件保存为unicode文本
4.  打开文本文件 将文件保存为 ANSI 格式
5.  在 PLSQL 开发人员中，我们有一个名为 text importer 的选项。使用这个工具我们可以成功导入数据

# mysql - MySQL 索引和按子句排序

> ID：623033
> 
> 赞同：0
> 
> 时间：2009-03-08T04:30:45.937
> 
> 标签：mysql

假设我有一个这样的简单查询：

```
SELECT * FROM topics ORDER BY last_post_id DESC 
```

根据[MySQL 的 Order-By Optimization Docs](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)，`last_post_id` *应该*使用索引。但是`EXPLAIN`查询却相反：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  topic_info  ALL NULL    NULL    NULL    NULL    13  Using filesort 
```

为什么我的索引没有被使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T04:37:22.223

你真的只有13行吗？数据库可能决定简单地对它们进行排序比通过索引更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T04:41:18.593

索引优化的一个基本原则是使用具有代表性的数据进行测试。表中的几行对于索引或优化器在现实生活中的工作方式没有预测价值。

如果你真的只有几条记录，那么索引将不会提供任何有效的好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T04:55:37.140

EXPLAIN 只告诉您选择过程，在这种情况下，预计查询必须检查所有 13 行以查看它们是否满足 WHERE 子句（您没有，所以它是无用的信息！）。它只报告用于此目的的索引和键（评估 WHERE、JOIN、HAVING）。所以，无论查询是否使用索引进行排序，EXPLAIN 都不会告诉你，所以不要被它的结果所困扰。

是的，查询使用索引来快速排序。我注意到 EXPLAIN 的结果相同（也就是报告所有行，尽管按索引排序并有限制），我怀疑这是表中行数较少的结果，而是 EXPLAIN 功能的限制.

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2009-03-08T04:38:08.290

尝试按表中的顺序选择特定列。更改顺序时，MySQL 索引不保留。

# c++ - Linux 上的 C++ 开发 - 我从哪里开始？

> ID：623040
> 
> 赞同：41
> 
> 时间：2009-03-08T04:38:02.017
> 
> 标签：c++, linux, editor, makefile, linker

我决定放弃我的 Windows 安装，现在将 Debian 作为我的默认操作系统运行。我一直在 Windows 中进行编码，特别是使用 Visual Studio。我目前正在尝试习惯在 linux 下编译我的代码。

虽然我还有很多文档要阅读，而且不要指望你们让我觉得太容易了，但如果能得到一些关于从哪里开始的指示，仍然会很好。我有一些具体的问题，但随时建议/推荐有关该主题的任何其他内容。

*   关于创建 make 文件的推荐指南是什么，如何从这个 makefile 编译（我自己调用 g++，是否使用“make”？）
*   查看其他 linux 软件，它们几乎总是有一个“配置”文件。它究竟是做什么的？它只检查是否安装了所需的库还是不仅仅是检查要求？
*   如何链接库，这与我的 makefile 或 g++ 参数有何关系？在 Windows 中，我会编译库，包含一些头文件，告诉我的链接器要链接哪些额外的 lib 文件，然后复制一个 dll 文件。这个过程在linux中究竟是如何工作的？
*   对代码编辑器的建议？我目前正在使用 nano，我听说过 vim 和 emacs，但不知道它们对彼此有什么好处。还有其他的吗，为什么我会在前三个中考虑它们？注意：我不是在寻找 IDE。

非常感谢任何帮助、指南和文档的链接（最好是那些针对初学者的）！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-03-08T04:49:13.003

> 关于创建 make 文件的推荐指南是什么，如何从这个 makefile 编译（我自己调用 g++，是否使用“make”？）

您可以通过调用“make”从 makefile 构建。在您的 makefile 中，您使用 g++ 和 ld 进行编译和链接。

> 查看其他 linux 软件，它们几乎总是有一个“配置”文件。它究竟是做什么的？它只检查是否安装了所需的库还是不仅仅是检查要求？

它是一个脚本，通常用于根据用于构建的环境设置各种事物。有时它只是一个基本的 shell 脚本，有时它会调用 Autoconf 等工具来发现构建时可用的内容。“配置”脚本通常也是用户指定要构建或排除的各种可选内容的地方，例如对实验性功能的支持。

> 如何链接库，这与我的 makefile 或 g++ 参数有何关系？在 Windows 中，我会编译库，包含一些头文件，告诉我的链接器要链接哪些额外的 lib 文件，然后复制一个 dll 文件。这个过程在linux中究竟是如何工作的？

ld 是 GNU 链接器。您可以单独调用它（这是大多数 makefile 最终会执行的操作），或者您可以让 g++ 委托给它。传递给 g++ 和 ld 的选项确定在哪里查找包含的头文件、要链接的库以及如何输出结果。

> 对代码编辑器的建议？我目前正在使用 nano，我听说过 vim 和 emacs，但不知道它们对彼此有什么好处。还有其他的吗，为什么我会在前三个中考虑它们？注意：我不是在寻找 IDE。

Vim 和 Emacs 是非常灵活的编辑器，支持一大堆不同的用法。使用你觉得最好的任何东西，尽管我建议你可能需要一些最小的东西，比如语法突出显示。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-03-08T04:59:35.227

只需附上 MandyK 的答案即可。

手动创建 make 文件通常是跨 linux 发行版/unix 变体构建的一种非常不可移植的方式。有许多用于自动生成 make 文件的构建系统，在没有 make 文件的情况下构建。[GNU Autotools](http://sources.redhat.com/autobook/)、[Cmake](http://www.cmake.org/)、[Scons](http://www.scons.org/)、[jam](http://www.perforce.com/jam/jam.html)等。

还要更深入地了解配置。

*   检查可用的编译器、库、系统架构。
*   确保您的系统与相应的兼容包列表匹配。
*   让您指定命令行参数来专门化您的构建、安装路径、选项包等。
*   然后，Configure 会为您的系统生成一个适当的 Makefile。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-08T05:31:16.930

> 关于创建 make 文件的推荐指南是什么，如何从这个 makefile 编译（我自己调用 g++，是否使用“make”？）

[我通过阅读GNU Make 手册](http://www.gnu.org/software/make/manual/make.html#toc_Introduction)学会了如何编写 makefile 。

> 查看其他 linux 软件，它们几乎总是有一个“配置”文件。它究竟是做什么的？它只检查是否安装了所需的库还是不仅仅是检查要求？

配置文件通常与[autotools](http://en.wikipedia.org/wiki/GNU_build_system)相关联。正如脚本名称所暗示的那样，它允许您配置软件。从开发人员的角度来看，这主要意味着设置宏，确定变量、可用的库等等。它还测试库的可用性。最后，脚本会生成一个 GNU Makefile，然后您可以使用它来实际构建和安装软件。

GNU 构建系统只是其中之一。我不是特别喜欢 GNU 构建系统，因为它往往比其他系统慢，并且生成丑陋的 Makefile。一些比较流行的有[CMake](http://www.cmake.org/)、Jam（[Boost Jam](http://www.boost.org/doc/tools/build/index.html)可能对 C++ 感兴趣）和[waf](http://code.google.com/p/waf/)。一些构建系统只是生成 Makefiles，而另一些则提供一个全新的构建系统。对于简单的项目，手动编写 Makefile 很容易，但“依赖检查”（对于库等）也必须手动完成。

编辑：[Brian Gianforcaro](https://stackoverflow.com/questions/623040/c-development-on-linux-where-do-i-start/623077#623077)也指出了这一点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-08T04:56:05.547

> 对代码编辑器的建议？我目前正在使用 nano，我听说过 vim 和 emacs，但不知道它们对彼此有什么好处。还有其他的吗，为什么我会在前三个中考虑它们？注意：我不是在寻找 IDE。

Vi 和 Emacs 是两个典型的 Unix 编辑器；如果您打算使用文本编辑器而不是 IDE，那么其中一种或它们的衍生产品（vim、xemacs 等）是可行的方法。两者都支持语法突出显示和各种功能，默认情况下或通过扩展。这些编辑器最好的部分是它们提供的可扩展性。emacs 通过各种 lisp，vim 通过自己的脚本语言。

我个人使用 Emacs，所以我对 Vim 不能说太多，但是你应该可以在网上找到很多关于这两者的信息。Emacs 有几个很好的教程和参考资料，包括[这个](http://www2.lib.uchicago.edu/keith/tcl-course/emacs-tutorial.html)。

编辑 [2014 年 12 月]：最近似乎有一种跨平台和高度可扩展的编辑器的趋势。如果您想要的不是 IDE，而是比 vi/emacs 更图形化并且跨多个平台的原生感觉，这可能是一个不错的选择。我建议看一下[Sublime](http://www.sublimetext.com/)或[Atom](https://atom.io/)；这两者都可以在 Windows/Linux/Mac 上运行，并且有很棒的插件和主题社区。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-08T05:20:14.240

因此，为了帮助您入门，我将首先向您介绍本makefile[指南](http://www.ugrad.cs.ubc.ca/~cs219/CourseNotes/Make/intro.html)，它还涵盖了一些链接内容。
这只是我的大学计算机科学教授给我们的一点东西，我发现它非常清晰简洁，非常有帮助。

至于IDE，我通常使用[eclipse](http://www.ugrad.cs.ubc.ca/~cs219/CourseNotes/Make/intro.html) ，因为它也处理makefile。更不用说编译和标准输出在程序中触手可及。
它主要用于 Java 开发，但也有一个 C/C++ 插件！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-03-08T09:01:34.163

你的问题有点笼统，但这是我要推荐的：

*   编辑：vim和emacs很流行。与大多数工具一样，最重要的是掌握一个。我喜欢使用 vim，因为 vi（它的后代）随处可用，但这可能不是很相关，特别是如果你留在 Linux 上。任何编程编辑器都可以。

*   配置：除非你做大项目，否则不要理会它。使用和调试是一场噩梦。仅当您打算分发项目时才有意义 - 在这种情况下，请阅读自动手册：http: [//sources.redhat.com/autobook/](http://sources.redhat.com/autobook/)。正如其他人所说，还有其他选择（cmake、scons 等）。我对 scons 和 autotools 都非常熟悉，但我仍然将 make 用于小型（几个文件）项目。

关于共享库：它几乎与 Windows 一样，只是您直接链接到共享库 - Linux 中没有 .lib 与 .dll 的区别。例如。对于一个具有函数 foo 的库 foo：

```
int foo(void)
{
     return 1;
} 
```

您将按如下方式构建它：

```
gcc -fPIC -c foo.c -o foo.o
gcc -shared foo.o -o libfoo.so 
```

一个主要的（当然在现实生活中你把 API 放在一个头文件中）：

```
int foo(void);

int main(void)
{
    foo();
    return 0;
} 
```

然后，您将其链接为：

```
gcc -c main.c -o main.o
gcc main.o -o main -L. -lfoo 
```

-L。在这里是说您希望链接器在当前目录中查找（与 windows 相反，在 Linux 中默认情况下不会这样做），-lfoo 表示链接库 foo。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-08T04:59:03.137

我推荐ESR[的 The Art of Unix Programming一书。](https://rads.stackoverflow.com/amzn/click/com/0131429019)它涵盖了编辑器、编程语言等的选择。它还很好地了解了在 Unix 或 Linux 上编程背后的思维方式。

对于编辑器，您可能需要 Vim 或 Emacs。它们都是不同的，哪一个更好更多的是个人品味。我使用 Vim。它非常适合快速移动代码并进行更改。我不太喜欢 Emacs，但很多人喜欢。Emacs 具有极强的可扩展性，可用于从新闻阅读器到 ide 的所有内容。尝试两者，看看你喜欢什么。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-03-08T05:29:21.987

> *   对代码编辑器的建议？我目前正在使用 nano，我听说过 vim 和 emacs，但不知道它们对彼此有什么好处。还有其他的吗，为什么我会在前三个中考虑它们？注意：我不是在寻找 IDE。

如果您使用带有窗口管理器（KDE、Gnome 等）的 Linux，您还可以考虑为您的窗口管理器使用标准文本编辑器。与 vim/emacs/nano 相比，它的主要好处是，对于来自 Windows 环境的人来说，它似乎更熟悉——编写为在窗口管理器上运行的编辑器具有菜单栏、文件打开/保存对话框、撤消/重做，以及许多其他控制台编辑器可能无法匹配的简洁功能。（尽管如今 emacs 和 vim 相当复杂，所以谁知道 ;-P）

在 KDE（这是我使用的）上，我可以推荐 KWrite，它是一个功能完善但相当基本的文本编辑器，带有语法高亮显示；或者 Kate，它是一个更高级的文本编辑器，具有一些额外的功能：会话管理、内置终端面板、自动调用`make`，以及包括 C/C++ 符号查看器在内的多个插件。当我不想费心设置完整的 IDE 项目时，我通常将 Kate 用于我的 C++ 工作。（仅供参考，KDE 的 IDE 是 KDevelop）

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-03-08T05:02:59.383

直接调用 g++ 和使用 autotools 构建链之间的空间非常狭窄。擅长 autotools，这实际上是最接近 Linux/开源世界中可用的“项目”的东西。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-08T12:38:47.430

对于来自 Visual Studio 的人来说，所有这些命令行内容可能看起来晦涩难懂。在你变成一个 bash shell/vim/emacs 迷之前，先尝试一些基于 GUI 的工具，这样你就有了一些过渡时间......

*   QT 4.5 及其 QT Creator mini-IDE。这是最好的框架，领先竞争对手光年。
*   Eclipse (C++) - 根据我在 Windows 上的经验，我发现它令人震惊（这可能是有史以来最好的 Java 应用程序）
*   KDevelop
*   安茹塔
*   如果你使用 Delphi，Lazarus/FreePascal 是一个不错的选择。

我敢肯定，longhairs 会嗤之以鼻，并声称 vim 或 emacs 为他们提供了最好和最快的开发环境，但对于不同的人来说不同的招数。习惯于 IDE 的人将需要一些时间来切换，或者可能根本不想切换。对于他们所有的编辑能力，创建 GUI 应用程序肯定不是 80x25 工具的工作。成为命令行方面的专家需要数年时间，这更像是世界观的转变，而不是其他任何事情。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-08T06:00:02.477

作为此处正确答案的旁注。如果您想以 Windows 用户的身份开始运行，我建议您使用全新的[Qt SDK](http://www.qtsoftware.com/downloads)。会有家的感觉:-)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-15T02:11:41.583

我建议使用 SCons 代替 Make，它可以完成相同的工作，但更容易使用和处理如何制作动态库、依赖项等。这是一个简单 prog 的真实示例

```
env = Environment()
env.Append(CCFLAGS='-Wall')
env.Append(CPPPATH = ['./include/'])

env.MergeFlags('-ljpeg')
env.ParseConfig("sdl-config --cflags --libs")
env.ParseConfig("curl-config --cflags --libs")
env.ParseConfig("pkg-config cairo --cflags --libs")

env.Program('rovio-pilot', Glob('./src/*.cpp')) 
```

作为一个文本编辑器，我很高兴使用 JEdit 进行编码，但这只是个人喜好问题。

# objective-c - 如何更改 sqlite 列（iPhone）？

> ID：623044
> 
> 赞同：1
> 
> 时间：2009-03-08T04:40:17.380
> 
> 标签：objective-c, iphone, sqlite

对于 iPhone，由于 sqlite3 不支持 ALTER 列，如何更改需要保留其数据的表上的列的数据类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T04:48:10.573

SQLite 使用清单（动态）类型。列类型仅供参考，因此无需更改列数据类型。[Column Affinity](http://www.sqlite.org/datatype3.html#affinity)仅用于提供与静态类型数据库的兼容性。

从[SQLite 文档](http://www.sqlite.org/faq.html#q3)：

> SQLite 使用动态类型。它不强制执行数据类型约束。任何数据都可以插入任何列。您可以将任意长度的字符串放入整数列、布尔列中的浮点数或字符列中的日期。您在 CREATE TABLE 命令中分配给列的数据类型不会限制可以将哪些数据放入该列...
> 
> SQLite 确实使用列的声明类型作为您更喜欢该格式的值的提示。因此，例如，如果一列是 INTEGER 类型，并且您尝试将字符串插入该列，SQLite 将尝试将字符串转换为整数。如果可以，则改为插入整数。如果不是，则插入字符串

他们接着说，这不是一个错误，而是一个特性。如果这对您的应用程序来说是个问题，我猜 SQlite 可能不是您的最佳选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T13:57:08.740

Ash 是正确的，但我想补充一点，如果列的类型亲和性给您带来了问题（例如，如果看起来像数字的字符串正在被不准确地转换和存储），您唯一的选择是将所有数据复制到一个临时表，删除原始表，使用正确的定义重新创建它，然后将数据复制回来。据我所知，这*不*被视为一项功能。;^)

# javascript - 如何检测当前页面的浏览器渲染模式？

> ID：623047
> 
> 赞同：13
> 
> 时间：2009-03-08T04:41:42.867
> 
> 标签：javascript, browser, render, standards, mode

我知道现代浏览器一般有两种渲染模式：标准模式和怪癖模式。浏览器检测标题 DocType。

问题是如何在运行时检测当前页面的渲染模式。是否有任何 Firebug 工具可以做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-03-08T04:57:40.880

在 IE8 之前：

```
alert('Page was rendered in ' +
  ((document.compatMode == 'CSS1Compat') ? 'Standards' : 'Quirks') + ' Mode.'); 
```

对于 IE8：

```
var vMode = document.documentMode;
var rMode = 'IE5 Quirks Mode';
if(vMode == 8){
  rMode = 'IE8 Standards Mode';
} else if(vMode == 7){
  rMode = 'IE7 Strict Mode';
}
alert('Rendering in: ' + rMode); 
```

请注意，要获得 IE8 新的“默认标准模式”行为的好处，您需要在 IE8 标准模式下进行渲染。

此模式会影响 HTML+CSS 的呈现**以及对 JavaScript**方法的修复，例如`document.getElementById( id );`和`.setAttribute( name, value );`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T09:11:18.053

您还应该看看 jQuerys jQuery.support 。它会告诉你浏览器支持哪些标准（boxModel、opacity 等）

[http://docs.jquery.com/Utilities/jQuery.support](http://docs.jquery.com/Utilities/jQuery.support)

IE

```
jQuery.support.boxModel; //false in IE when in quirksmode, true otherwise. 
```

# ruby-on-rails - Rails 上的单选按钮

> ID：623051
> 
> 赞同：59
> 
> 时间：2009-03-08T04:42:13.520
> 
> 标签：ruby-on-rails, ruby, webforms, radio-button

类似于这个问题：[Rails 上的复选框](https://stackoverflow.com/questions/621340/checkboxes-on-rails)

在 Ruby on Rails 中制作与某个问题相关的单选按钮的正确方法是什么？目前我有：

```
<div class="form_row">
    <label for="theme">Theme:</label>
    <br><%= radio_button_tag 'theme', 'plain', true %> Plain
    <br><%= radio_button_tag 'theme', 'desert' %> Desert
    <br><%= radio_button_tag 'theme', 'green' %> Green
    <br><%= radio_button_tag 'theme', 'corporate' %> Corporate
    <br><%= radio_button_tag 'theme', 'funky' %> Funky
</div> 
```

我还希望能够自动检查以前选择的项目（如果重新加载了此表单）。我如何将参数加载到这些的默认值中？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2009-03-08T06:03:02.110

与上一篇[文章](https://stackoverflow.com/questions/621340/checkboxes-on-rails/621429#621429)一样，略有不同：

```
<div class="form_row">
    <label for="theme">Theme:</label>
    <% [ 'plain', 'desert', 'green', 'corporate', 'funky' ].each do |theme| %>
      <br><%= radio_button_tag 'theme', theme, @theme == theme %>
      <%= theme.humanize %>
    <% end %>
</div> 
```

在哪里

```
@theme = params[:theme] 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2009-07-25T06:20:00.160

与 V 相同，但每个单选按钮都有关联的标签。单击标签会检查单选按钮。

```
<div class="form_row">
  <p>Theme:</p>
  <% [ 'plain', 'desert', 'green', 'corporate', 'funky' ].each do |theme| %>
    <br><%= radio_button_tag 'theme', theme, @theme == theme %>
    <%= label_tag "theme_#{theme}", theme.humanize %>
  <% end %>
</div> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-02-06T22:06:49.280

使用 Haml，摆脱不必要的 br 标签，并将输入嵌套在标签中，以便在不匹配标签与 id 的情况下选择它们。也使用 form_for。我认为这是遵循最佳实践。

```
= form_for current_user do |form|
  .form_row
    %label Theme:
    - [ 'plain', 'desert', 'green', 'corporate', 'funky' ].each do |theme|
      %label
        = form.radio_button(:theme, theme)
        = theme.humanize 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-06-11T20:53:49.053

我建议看看[formtastic](http://github.com/justinfrench/formtastic)

它使单选按钮和复选框集合变得更加简单和简洁。您的代码如下所示：

```
 <% semantic_form_for @widget, :html => {:class => 'my_style'} do |f| %>
<%= f.input :theme, :as => :radio, :label => "Theme:", 
:collection =>  [ 'plain', 'desert', 'green', 'corporate', 'funky' ] %>
<% end %> 
```

Formtastic 在很大程度上是不引人注目的，可以与“经典”表单构建器混合和匹配。您还可以像我上面所做的那样覆盖表单的 formtastic css 类
`:html => {:class => 'my_style'}`

看看相关的 Railscasts。

更新：我最近搬到了[Simple Form](http://railscasts.com/episodes/234-simple-form)，它的语法与 formtastic 相似，但更轻量级，尤其是将样式留给您自己的 css。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-08T05:14:20.230

嗯，从文档中我看不到如何在单选按钮上设置 ID……标签的 for 属性试图链接到单选按钮上的 ID。

[radio_button_tag 的 rails 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#M001706)

也就是说，从文档中，第一个参数是“名称”......如果这是它正在创建的，*应该*将它们组合在一起。如果没有，也许它是一个错误？

嗯，想知道这些是否已修复： http: [//dev.rubyonrails.org/ticket/2879](http://dev.rubyonrails.org/ticket/2879) [http://dev.rubyonrails.org/ticket/3353](http://dev.rubyonrails.org/ticket/3353)

# version-control - 如何在 Mercurial 中编辑不正确的提交消息？

> ID：623052
> 
> 赞同：336
> 
> 时间：2009-03-08T04:42:39.137
> 
> 标签：version-control, mercurial, tortoisehg, commit-message, mercurial-commit

我目前正在使用 TortoiseHg (Mercurial) 并且不小心提交了不正确的提交消息。如何在存储库中编辑此提交消息？

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2009-03-08T05:05:34.900

**更新：** Mercurial 已添加`--amend`，现在应该是[首选选项](https://stackoverflow.com/q/8182858/84378)。

* * *

您可以回滚最后一次提交（但只有最后一次），`hg rollback`然后重新应用它。

**重要提示**：这**将永久删除最新的提交**（或拉取）。因此，如果您完成了`hg update`该提交，则该提交不再在您的工作目录中，那么它就永远消失了。*所以先复制一份。*

除此之外，您不能更改存储库的历史记录（包括提交消息），因为那里的所有内容都经过校验和。您唯一能做的就是在给定变更集之后修剪历史记录，然后相应地重新创建它。

如果您已经发布了更改（除非您可以获取所有副本），那么这些都不会起作用，并且您也不能“重写历史”，包括 GPG 签名的提交（由其他人）。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2009-07-27T13:10:21.783

好吧，我曾经这样做过：

想象一下，您有 500 次提交，而您的错误提交消息在 r.498 中。

```
hg qimport -r 498:tip
hg qpop -a
joe .hg/patches/498.diff
(change the comment, after the mercurial header)
hg qpush -a
hg qdelete -r qbase:qtip 
```

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2012-05-13T13:12:36.103

好消息：hg 2.2[刚刚添加了](https://www.mercurial-scm.org/wiki/WhatsNew/Archive#Mercurial_2.2_.282012-05-01.29)类似 git 的`--amend`选项。

在 tortoiseHg 中，您可以通过选择提交按钮右侧的黑色箭头来使用“修改当前版本”

![一种](https://i.stack.imgur.com/xkoaU.jpg)

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2011-01-01T15:30:32.250

我知道这是一篇旧帖子，您将问题标记为已回答。我最近也在寻找同样的东西，我发现这个`histedit`扩展非常有用。该过程在这里解释：

[http://knowledgestockpile.blogspot.com/2010/12/chang-commit-message-of-revision-in.html](http://knowledgestockpile.blogspot.com/2010/12/changing-commit-message-of-revision-in.html)

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2011-08-31T20:13:18.087

## 最后一次操作是有问题的提交

要在最后一次 mercurial 操作是提交时更改最后一次提交的提交消息，您可以使用

```
$ hg rollback 
```

回滚最后一次提交并使用新消息重新提交：

```
$ hg ci -m 'new message' 
```

但要小心，因为回滚命令也会回滚以下操作：

> *   进口
>     *   拉
>     *   推送（以此存储库为目标）
>     *   解绑

（见`hg help rollback`）

因此，如果您不确定最后一个 mercurial 命令是否为`hg ci`，请不要使用`hg rollback`.

## 更改任何其他提交消息

您可以使用与 Mercurial 一起分发的[mq 扩展](http://hgbook.red-bean.com/read/managing-change-with-mercurial-queues.html)来更改任何提交的提交消息。

这种方法仅在公共中没有包含您要重命名的变更集的克隆存储库时才有用，因为这样做会改变它的变更集哈希以及所有后续变更集。

这意味着您必须能够删除包含要重命名的变更集的所有现有克隆，否则它们之间的推/拉将不起作用。

要使用 mq 扩展，您必须显式启用它，例如在 UNIX 下检查您的`~/.hgrc`，其中应包含以下行：

```
[extensions]
mq= 
```

假设您要更改修订版 X - 首先`qimport`导入修订版 X 及以下。现在它们被注册为一堆应用的补丁。弹出（`qpop`）除 X 之外的完整堆栈使 X 可用于通过 进行更改`qrefresh`。提交消息更改后，您必须再次推送所有补丁 ( `qpop`) 以重新应用它们，即重新创建以下修订。不需要任何补丁堆栈，因此可以通过`qfinish`.

以下演示脚本显示了所有操作。在示例中，第三个变更集的提交消息被重命名。

```
# test.sh
cd $(dirname $0)
set -x -e -u
echo INFO: Delete old stuff
rm -rf .hg `seq 5`
echo INFO: Setup repository with 5 revisions
hg init
echo '[ui]' > .hg/hgrc
echo 'username=Joe User <juser@example.org>' >> .hg/hgrc
echo 'style = compact' >> .hg/hgrc
echo '[extensions]' >> .hg/hgrc
echo 'mq=' >> .hg/hgrc
for i in `seq 5`; do
  touch $i && hg add $i && hg ci -m "changeset message $i" $i
done
hg log 
echo INFO: Need to rename the commit message on the 3rd revision
echo INFO: Displays all patches
hg qseries
echo INFO: Import all revisions including the 3rd to the last one as patches
hg qimport -r $(hg identify -n -r 'children(2)'):tip
hg qseries
echo INFO: Pop patches
hg qpop -a
hg qseries
hg log 
hg parent
hg commit --amend -m 'CHANGED MESSAGE'
hg log 
echo INFO: Push all remaining patches
hg qpush -a
hg log 
hg qseries
echo INFO: Remove all patches
hg qfinish -a
hg qseries && hg log && hg parent 
```

将其复制到一个空目录并执行它，例如通过：

```
$ bash test.sh 2>&1 | tee log 
```

输出应包括原始变更集消息：

```
+ hg log
[..]
2   53bc13f21b04   2011-08-31 17:26 +0200   juser
  changeset message 3 
```

重命名操作更改了消息：

```
+ hg log
[..]
2   3ff8a832d057   2011-08-31 17:26 +0200   juser
  CHANGED MESSAGE 
```

（使用 Mercurial 4.5.2 测试）

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2012-08-16T19:38:34.123

在 TortoiseHg 中，右键单击要修改的版本。选择修改历史记录->导入 MQ。这会将所有修订版转换为 Mercurial 变更集中的选定修订版（包括所选修订版）到 Mercurial Queue 补丁中。选择要修改消息的补丁，它应该会自动将屏幕更改为 MQ 编辑器。编辑屏幕中间的消息，然后单击 QRefresh。最后，右键单击补丁并选择 Modify History->Finish Patch，这会将其从补丁转换回更改集。

哦，这假设 MQ 是此存储库上 TortoiseHG 的一个活动扩展。如果没有，您应该能够单击 File->Settings，单击 Extensions，然后单击 mq 复选框。它应该警告你必须在扩展激活之前关闭 TortoiseHg，所以关闭并重新打开。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2010-08-19T15:29:13.233

*编辑：*正如用户所指出的，不要使用 MQ，使用`commit --amend`. 这个答案现在主要具有历史意义。

正如其他人所提到的，MQ 扩展更适合此任务，并且您不会冒破坏工作的风险。去做这个：

1.  通过在 hgrc 中添加类似这样的内容来启用 MQ 扩展：

    ```
    [extensions]
    mq = 
    ```

2.  更新您要编辑的变更集，通常提示：

    ```
    hg up $rev 
    ```

3.  将当前变更集导入队列：

    ```
    hg qimport -r . 
    ```

4.  刷新补丁，并编辑提交信息：

    ```
    hg qrefresh -e 
    ```

5.  完成所有应用的补丁（在本例中为一个）并将它们存储为常规变更集：

    ```
    hg qfinish -a 
    ```

我对 TortoiseHg 不熟悉，但命令应该与上面的类似。我还认为值得一提的是，编辑历史是有风险的。只有当您*绝对*确定没有将变更集推送到其他任何地方或从其他任何地方拉出时，您才应该这样做。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-10-26T08:06:50.967

Rollback-and-reapply 是一个非常简单的解决方案，但它只能帮助最后一次提交。Mercurial Queues 功能更强大（请注意，您需要[启用 Mercurial Queues Extension](http://mercurial.selenic.com/wiki/MqExtension)才能使用“hg q*”命令）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-08-11T23:18:08.597

我是这样做的。首先，不要推动您的更改，否则您将不走运。抓取并安装[折叠](http://mercurial.selenic.com/wiki/CollapseExtension)扩展。提交另一个虚拟变更集。然后使用 collapse 将前两个变更集合并为一个。它将提示您输入新的提交消息，并为您提供已经拥有的消息作为起点。您已经有效地更改了原始提交消息。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-08-19T13:46:40.573

如果我要编辑的版本不是那么旧，我会使用一种技巧：

假设您的版本为 500，并且您想要编辑 497。

```
hg export -o rev497 497
hg export -o rev498 498
hg export -o rev499 499
hg export -o rev500 500 
```

编辑 rev497 文件并更改消息。（它在以“#”开头的第一行之后）

```
hg import rev497
hg import rev498
hg import rev499
hg import rev500 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-11-30T23:10:09.397

[MQ 扩展和调试命令](http://hgtip.com/tips/advanced/2010-04-23-debug-command-tricks/)还有另一种方法。这是在不丢失数据的情况下修改历史的一般方法。[让我假设与安东尼奥](https://stackoverflow.com/a/1188083/153133)相同的情况。

```
// set current tip to rev 497
hg debugsetparents 497
hg debugrebuildstate
// hg add/remove if needed
hg commit
hg strip [-n] 498 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-12-13T19:40:11.323

上面讨论中的一个小宝石——感谢@Codest 和@Kevin Pullin。在 TortoiseHg 中，提交按钮旁边有一个下拉选项。选择“修改当前版本”会返回注释和文件列表。太有用了。

# python - 对于我的应用程序，多少线程是最佳的？

> ID：623054
> 
> 赞同：3
> 
> 时间：2009-03-08T04:44:41.143
> 
> 标签：python, multithreading

我有一个简单的 Python 网络爬虫。它使用 SQLite 来存储其输出并保留一个队列。我想让爬虫多线程，这样它就可以一次爬几个页面。我想我会创建一个线程并一次运行该类的多个实例，因此它们都同时运行。但问题是，我应该一次运行多少个？我应该坚持两个吗？我可以更高吗？线程数量的合理限制是多少？请记住，每个线程都会访问一个网页，下载 html，通过它运行一些正则表达式搜索，将它找到的信息存储在 SQLite 数据库中，然后从队列中弹出下一个 url。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-08T04:57:01.363

您可能会发现您的应用程序受带宽限制，而不是 CPU 或 I/O 限制。

因此，添加任意数量的数量，直到性能开始下降。

根据您的网络设置，您可能会遇到其他限制。就像您在 ADSL 路由器后面一样，并发 NAT 会话的数量会受到限制，这可能会影响一次发出过多的 HTTP 请求。做太多，您的提供者可能会将您视为感染了病毒等。

还有一个问题是您正在抓取的服务器可以处理多少请求以及您想要对其施加多少负载。

我曾经写过一个只使用一个线程的爬虫。大约每两秒钟处理一页我想要的所有信息大约需要一天时间。我本可以做得更快，但我认为这对服务器来说不是一个负担。

所以真的没有硬性和快速的答案。假设一个 1-5 兆位的连接，我会说您可以轻松拥有多达 20-30 个线程而不会出现任何问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-08T05:54:32.473

如果您已经有一种简单的方法来提供任意长的 URL 列表，我会使用一个线程并与延迟信号量或任务协作器一起[扭曲。](http://twistedmatrix.com/)

您极不可能制作比基于扭曲的爬虫更快或更小的多线程爬虫。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-08T04:55:05.317

创建多个并发进程通常更简单。只需使用 subprocess 创建尽可能多的 Popens，因为您认为需要同时运行。

没有“最佳”数字。通常，当您只运行一个爬虫时，您的 PC 会花费大量时间等待。多少？很难说。

当您运行少量并发爬虫时，您会发现它们花费的时间与一个爬虫大致相同。您的 CPU 在各种进程之间切换，一个进程的等待时间被另一个进程占用。

您运行了一些更大的数字，您会看到整体经过的时间更长，因为现在要做的事情比您的 CPU 可以管理的要多。所以整个过程需要更长的时间。

您可以创建一个图表来显示流程如何扩展。基于此，您可以平衡进程数量和所需的经过时间。

这样想吧。

1 个爬虫在 1 分钟内完成它的工作。连续完成 100 页可能需要 100 分钟。同时 100 个爬虫可能需要一个小时。假设 25 个爬虫在 50 分钟内完成了这项工作。

在您运行各种组合并比较结果之前，您不知道什么是最佳的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-08T12:24:00.867

cletus 的答案是您想要的答案。

一些人提出了使用异步 I/O 的替代解决方案，尤其是 Twisted。如果你决定走那条路，另一种解决方案是[pycurl](http://pycurl.sourceforge.net/)，它是 libcurl 的精简包装，libcurl 是一个广泛使用的 URL 传输库。PyCurl 的主页上有一个“ [retriever-multi.py](https://github.com/pycurl/pycurl/blob/master/examples/retriever-multi.py) ”示例，说明了如何在大约 120 行代码中并行获取多个页面。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-08T04:58:47.320

你可以比这两个更高。高多少完全取决于您运行它的系统的硬件、网络操作后正在进行的处理量以及当时机器上正在运行的其他内容。

由于它是用 Python 编写的（并且被称为“简单”），我假设您并不完全关心从事物中挤出每一盎司的性能。在这种情况下，我建议只在常见的工作条件下运行一些测试，看看它是如何执行的。我猜 5-10 左右可能是合理的，但这完全是在黑暗中刺伤。

由于您使用的是双核机器，我强烈建议您查看[Python 多处理模块](http://docs.python.org/library/multiprocessing.html)（在 Python 2.6 中）。它将让您利用机器上的多个处理器，这将显着提升性能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-08T12:44:01.757

您应该记住的一件事是，某些服务器可能会将来自同一 IP 地址的过多并发请求解释为 DoS 攻击并中止连接或返回错误页面以获取本来会成功的请求。

因此，将对同一服务器的并发请求数限制为相对较低的数量（5 应该是安全的）可能是一个好主意。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-08T05:16:08.480

在这种情况下不需要线程。您的程序**受 I/O 限制**而不是 CPU 限制。在套接字上**使用 select()**可能会更好地完成网络部分。这减少了创建和维护线程的开销。我没用过[Twisted ，但听说它对](http://twistedmatrix.com)**异步网络**有很好的支持**. 这将允许您指定要下载的 URL 并为每个 URL 注册回调。当每一个被下载时，回调将被调用，并且页面可以被处理。为了允许下载多个站点，而无需等待每个站点都被处理，可以使用队列创建第二个“工作”线程。回调会将站点的内容添加到队列中。“worker”线程将进行实际处理。**

 **正如一些答案中已经说明的那样，同时下载的最佳数量取决于您的带宽。

我会使用**一两个线程**- 一个用于实际爬行，另一个（带有队列）用于处理。

# wpf - WPF：我可以绑定到另一个控件中选定对象的方法吗？

> ID：623063
> 
> 赞同：0
> 
> 时间：2009-03-08T04:54:06.440
> 
> 标签：wpf, data-binding

我有两个 WPF 列表框。一个是列表列表（实际上是 ObservableCollection 的列表），另一个是所有已知“Thingy”实例的列表。

这是我用于“thingy”类的数据模板。

```
<DataTemplate DataType="{x:Type Model:Thingy}">
    <StackPanel Orientation="Horizontal">
        <CheckBox x:Name="ThingyInListCheckBox" Click="ThingyInList_Click"></CheckBox>
        <TextBlock Text="{Binding Path=ThingyName}"></TextBlock>
     </StackPanel> 
```

这是列表框的 XAML：

```
<ListBox 
   Name="ListOfGroups"
   SelectionMode="Single">           
</ListBox>
<ListBox 
   Name="ListOfThingys"
   SelectionMode="Single">
</ListBox> 
```

我在代码中设置了列表框的数据绑定，因为我太累了，无法弄清楚如何在 XAML 中执行此操作：

```
ListOfGroups.ItemsSource = InMemoryCache.ThingyGroups;
ListOfThingys.ItemsSource = InMemoryCache.Thingys; 
```

如果“thingy”对象位于“ListOfGroups”列表框中的选定项目列表中，我想要的是复选框“ThingyInListCheckBox”。所以基本上我需要将它绑定到 "ListOfGroups".SelectedItem 的 "Contains" 方法，同时将 "ListOfThingys".SelectedItem 作为参数传递给它。

我很想在代码中完成这一切，但我试图更好地理解 XAML 数据绑定，因为我讨厌自己并且希望自己受苦。

这是否可能，或者我是否碰到了软件开发历史上所有其他数据绑定系统中不可避免的“数据绑定墙”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-08T10:24:05.540

有可能，事实上困难在于有很多方法可以做到这一点，你必须选择一种。它们都不是您当前代码的简单补充。然而，有一种方法，通过它你获得的不仅仅是解决你的问题。实际上，它更像是一种模式，称为**MVVM**（有些人可能会争论命名）。

这是对您的示例的一个小解释。假设**ThingyGroup**有一个*IsSelected*属性，该属性绑定到包含*ListBoxItem的**IsSelected*属性。同样，假设**Thingy**也有一个*Group*属性。然后您可以使用***Group.IsSelected***作为绑定复选框的路径。请注意，仍然存在一个小问题，即*IsSelected*是一个布尔值，而*IsChecked*是一个可为**空**的布尔值。

 *******搜索*MVVM*应该会给你具体的示例。

# php - PHP 构建/集成工具：您使用它们吗？

> ID：623079
> 
> 赞同：19
> 
> 时间：2009-03-08T05:00:47.627
> 
> 标签：php, build, continuous-integration, phing, xinc

在阅读了[2008 年 11 月版 php|architect 杂志](http://phparch.com/magazine/index/86)中讨论单元测试 ( [phpUnit](http://www.phpunit.de/) )、构建工具 ( [Phing](http://phing.info/trac/) ) 和持续集成 ( [Xinc](http://code.google.com/p/xinc/) ) 的“现代 PHP 工作流程”文章后，我受到启发，想要了解更多关于可用于 PHP 的工具，尤其是 Phing。

过去，我经常通过将实时站点作为 subversion 工作副本运行并简单地在生产机器上运行“svn update”来部署最新版本的代码来处理到生产服务器的部署。

你使用 PHP 代码的构建工具吗？您认为与直接从 subversion 部署相比，它们提供了哪些优势？我应该注意什么，或者我可能会遇到什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-08T08:39:29.487

我使用过 Phing 和 Ant 并且更喜欢后者。我最初选择 Phing 是因为它是用 PHP 编写的，但老实说它不像 Ant 那样成熟。最后，拥有一个拥有庞大社区的成熟构建系统更有价值。

用 Ant/Phing 完成的事情：

1.  从基本结帐 loalize 到特定语言，确保存在依赖项（其他库、目录等）
2.  如果你有它们，编译模板等
3.  将目标数据库升级到所需的版本，具体取决于签出的代码版本
4.  运行单元测试等

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T12:13:50.830

我在 Phing 中看到的一个大问题是它创建了一个不必要的间接层。PHP 是一种脚本语言，因此可以直接运行。Phing 对 XML 配置的使用不适合该语言：它确实提供了更具可读性的声明性配置，但代价是牺牲了该语言的任何灵活性。使用 Ant（该路线的灵感来源）是有意义的，因为 Java 没有那种灵活性，因为它的动态性较低并且需要编译。

不幸的是，我在 PHP 领域没有看到很多好的替代方案，并且与其他语言不同，构建工具不是必不可少的，也不是文化的一部分，因此另一个得到很好支持的选项的演变可能不会很快发生。

因此，我会坚持选择更接近 PHP在更积极地支持构建工具的文化中所能做的事情*。*我通常使用[Gradle](http://www.gradle.org/)。[根据您想使用哪种语言作弊， Rake](http://rake.rubyforge.org/)也做得很好（可能还有其他类似的选项）。如果您喜欢这种类型的东西，您还应该权衡 Webdriver 支持之类的东西。否则，使用 PHP 和/或 BASH 创建轻量级解决方案应该涵盖所有内容，同时保持透明度

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T07:28:38.347

我看着Phing，它看起来非常棒。对于我正在从事的项目，我实际上使用的是[Apache 的 Ant](http://ant.apache.org/)。我用它来做几件事：

1.  合并和压缩 Javascript 和 CSS（使用[YUI Compressor完成压缩](http://developer.yahoo.com/yui/compressor/)
2.  用生产配置文件替换标准配置文件（例如，将 config.php.production 重命名为 config.php）
3.  删除不需要的文件（例如 ant 构建文件 build.xml）

我认为 Phing 比 Ant 更值得一看，因为它是原生的 PHP，这可能很好。此外，如果您所做的不仅仅是复制/移动文件，请在移动到生产环境时注意性能问题。我遇到了一个问题，YUI 压缩器在我的本地机器上运行良好，但在相对较小的 VPS 上却超级慢。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-08T15:55:07.880

在我现在正在进行的一个项目中，我们使用[phpUnderControl](http://phpundercontrol.org/about.html)来运行测试并在出现问题时获得快速反馈。我们计划使用它来运行其他测试，例如一些用[Watir](http://wtr.rubyforge.org/)编写的测试。

# javascript - 弄清楚窗口是否在焦点上

> ID：623085
> 
> 赞同：0
> 
> 时间：2009-03-08T05:02:54.547
> 
> 标签：javascript

我有一个上传器，大约需要 30 秒来上传图像、渲染缩略图并移动到另一台服务器。

有没有办法在之后（或任何时候）检查他们是否失去了窗口的焦点，以及他们是否不在焦点上发送警报。（我会知道如何发送警报，只需要弄清楚如何检查是否有焦点）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T05:06:49.857

您将为窗口编写一个事件。例如：

```
window.onblur = function () {
// place your code here
} 
```

# iphone - 从 iPhone/CocoaTouch 库中链接库的正确方法

> ID：623089
> 
> 赞同：7
> 
> 时间：2009-03-08T05:08:47.560
> 
> 标签：iphone, static-libraries, libxml2, static-linking

我正在为 iPhone 编写一个静态库，我想知道我正在做的事情是否值得推荐，或者我是否应该采取不同的方法。

我正在编写的静态库依赖于 libxml2。libxml2 有一个动态库（dylib）和一个静态库（a）。我尝试了两种方法。

方法一 - 当我尝试通过将“-lxml2”添加到“其他链接器标志”来链接静态库时，构建失败并显示以下消息：

```
/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/libtool: file: -lxml2 is not an object file (not allowed in a library) 
```

方法二 - 我可以从我的静态库中成功链接到动态库，但我不确定这在 iPhone 上是否允许（或正确的方法）。即使我正在构建一个静态库，Apple 是否允许链接到动态库的静态库？我仍在学习静态库，但据我了解，dylib 中的代码将与我的代码组合成一个库，因此链接到 dylib 应该不是问题。

总结一下：

*   mylibrary.a -> libxml2.a [不起作用]
*   mylibrary.a -> libxml2.dylib [构建，但这是正确且可接受的吗？]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-08T09:44:16.807

SDK 中提供了 libxml2.dylib。*正确*的方法是在 Xcode 中双击目标节点/应用程序，然后在 General 下单击“Linked Libraries”下的**+** ...您应该在该列表中找到*libxml2.dylib 。*

0:42 在此[截屏](http://www.memention.com/ac3dreader/usage/quickstart.html)视频中，您可以看到 CoreGraphics 是如何添加到项目中的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T13:05:01.460

您不能将库静态链接到其他静态库。这就是为什么依赖于其他静态库的框架和库要求消费者手动将它们添加到他们的 Link Binary With Libraries 构建阶段或 Other Linker Flags 构建设置。

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2009-03-08T09:28:13.473

Apple 不允许您链接除 SDK 提供的框架和/或库以外的框架和/或库。

马可

# design-patterns - 存储库模式是否与 Asp.net 提供程序模型相同？

> ID：623090
> 
> 赞同：11
> 
> 时间：2009-03-08T05:08:48.620
> 
> 标签：design-patterns, repository-pattern, provider-model

从 Asp.net 2.0 开始，就有了提供者模型。在实现细节上，提供者是派生自 ProviderBase 的类，它是一个抽象类而不是接口，但无论如何提供者模型都在那里，因此我们可以通过编辑 web.config 来换入不同的实现。例如，如果您创建一个博客应用程序，您可能有一个 BlogProvider : ProviderBase，那么您可以有 BlogProvider 的实现，例如：SqlBlogProvider、OracleBlogProvider 甚至 MockBlogProvider 用于测试。

现在，Repository Pattern 越来越流行，我觉得它是为了满足同样的需求，虽然在实现细节上，你通常使用接口，所以 IBlogProvider，你会通过构造函数而不是属性注入不同的实现，但本质上我没有看不出这两种模式给我们带来的差异。

就个人而言，我觉得 Provider Model 在实现中对我来说更自然。那么，它们之间是否有区别，或者它们只是不同社区赋予不同名称的同一事物？

我很感激对此的任何评论，谢谢，雷。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-08T05:41:51.303

Repository 和 Provider 模式重叠，但它们没有正式描述相同的东西。我几乎会说存储库是 Provider 的一个子集。在实践中，我认为存储库模式*源于*一种特定的需求——抽象存储库——并在社区中演变成更通用的抽象模式。在这方面，它们已经成为描述相同概念的不同术语。但是，从最初的定义来看，它们的范围不同：

*   存储库模式的目的是将数据*存储库*的细节从应用程序中抽象出来。

*   Provider 模型的目的是从应用程序中抽象出*任何细节。*这可能是一个数据存储库，但它通常是某种逻辑。

例如，在我们的应用程序中，我们有一个 ContextFactoryProvider，它包含用于确定使用哪个 ContextFactory 的不同类型的逻辑。在这种情况下，没有数据存储库；纯粹是应用逻辑，需要随意改变；Provider 模型允许我们使用[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)将每种逻辑隔离到自己的类中，并轻松交换该逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T21:45:54.840

我不能同意 Rex M。提供者模式的目的是通过抽象接口为定制提供支持，而存储库模式的目的是提供对抽象数据库细节的支持。

# .net - 可以在 Ubuntu 上发布 ClickOnce 应用程序吗？

> ID：623094
> 
> 赞同：7
> 
> 时间：2009-03-08T05:13:42.133
> 
> 标签：.net, deployment, ubuntu, clickonce

我已经构建了一个应用程序，它使用 ClickOnce 在 Windows 服务器上发布。客户端访问[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)，可以下载和运行应用程序。

客户端现在正在更改其服务器以运行 Ubuntu。可以在运行 Ubuntu 的服务器上发布 ClickOnce 应用程序吗？

Ubuntu 的版本是 8.10，我使用的是 Visual Studio 2008 SP1 和 C#。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-08T05:26:48.610

当然可以 - 任何文件或 Web 服务器都可以托管 ClickOnce 应用程序。但是，您需要在 Web 服务器上配置正确的 MIME 类型

*   .application => 应用程序/x-ms-应用程序
*   .manifest => 应用程序/x-ms-manifest
*   .deploy => 应用程序/八位字节流

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-25T15:32:30.967

只需将以下内容添加到 Web 根目录中的 .htaccess 文件（Apache2 Ubuntu）

```
AddType application/x-ms-application application
AddType application/x-ms-manifest manifest
AddType application/octet-stream deploy
AddType application/vnd.ms-xpsdocument xps
AddType application/xaml+xml xaml
AddType application/x-ms-xbap xbap
AddType application/x-silverlight-app xap 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-08T05:19:41.870

我假设您正在尝试使用[Mono](http://en.wikipedia.org/wiki/Mono_%28software%29)，在这种情况下：

> 是否可以在 Linux 上支持 ClickOnce？
> 是的 - 但在这样做之前仍然需要做很多工作。
> 
> ClickOnce 是分发应用程序/更新的最佳方式吗？
> 我不确定-但受欢迎程度！=优势所以...
> 
> *来自[http://lists.ximian.com/pipermail/mono-list/2004-September/023224.html](http://lists.ximian.com/pipermail/mono-list/2004-September/023224.html)*

# java - Java 2d 游戏中的路径查找？

> ID：623095
> 
> 赞同：6
> 
> 时间：2009-03-08T05:14:11.370
> 
> 标签：java, algorithm, pseudocode, path-finding

本质上，它是我正在开发的一款 pacman 克隆游戏。我有一个 Enemy 类，并创建了这个类的 4 个实例，它们都代表游戏的 4 个幽灵。

所有的幽灵都在屏幕的随机区域开始，然后他们必须朝着吃豆人角色前进。当玩家控制 pacman 并移动它时，他们应该跟随它并尽可能靠近他。

没有迷宫/障碍（还），所以整个地图（400x400 像素）对他们来说是开放的。

对于玩家和每个 Ghost，我可以检索 X、Y、图像宽度和高度属性。另外，我已经有一个碰撞检测算法，所以不用担心，只是鬼魂找到了吃豆人的路。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-08T05:25:29.533

对于一个好的寻路算法，使用[A*](http://en.wikipedia.org/wiki/A*_search_algorithm)可能是一个好主意，然而，对于一个不需要复杂、高效或有效路径搜索的简单游戏，只需通过找出方向来让角色向目标移动目标应该足够了。

例如，让角色移动的决定，在伪代码中：

```
if (target is to the left of me):
    move(left);
else
    move(right);

if (target is above me):
    move(up);
else
    move(down); 
```

是的，角色不会做出最有效的移动，但它会在游戏循环的每次迭代中越来越接近目标。

我也猜测 80 年代初期的街机游戏可能不会使用复杂的寻路算法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-08T05:55:02.347

如果你只有一个像素网格——一个 pacman 和 ghost 可以在上面自由移动的“大场”——那么最短路径很简单——ghost 和 pacman 之间的直线。

但是“最短路径”总是意味着我们正在尝试解决图论问题。（我假设了解图、一些图论、adj. 矩阵等！）

在上述情况下，将每个像素视为图上的一个节点。每个节点通过一条边连接到它的邻居，并且每条边都具有相等的“权重”（移动到“上方”​​的节点并不比移动到“下方”的节点慢）。

所以你有这个：（“*”=节点，“-，/，\，|”=边缘）

```
*-*-*
|\|/|
*-*-*  ... (etc)
|/|\|
*-*-* 
```

如果 Pacman 在中心，它可以很容易地移动到任何其他节点。

更接近现实的可能是这样的：

```
*-*-*
| | |
*-*-*  ... (etc)
| | |
*-*-* 
```

现在，吃豆人不能对角移动。从中心到右下角需要 2 次“跳跃”而不是 1 次。

继续前进：

```
*-*-*-*
| | | |
| | | |
| | | |
*-*-*-*
| | | |
*-*-*-* 
```

现在，要从中间的节点到顶部的节点，您需要 3 跳。然而，向底部移动只需要 1 跳。

将任何游戏板设置转换为图形很容易。每个“交叉点”都是一个节点。两个交点之间的路径是一条边，该路径的长度是该边的权重。

进入一个*。通过构建图（使用邻接矩阵或节点列表），您可以使用 A* 算法找到最短路径。其他算法包括 Dijkstra 算法。还有许多其他人！但首先你需要用图表来描述你的问题，然后玩弄如何从节点 A（pacman）到节点 B（ghost）。

希望有帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-10T08:11:05.700

已经有很长一段时间了，但从记忆中吃豆人中的鬼魂在寻路方面并没有做太多事情。他们会做一个相当标准的随机迷宫遍历，直到他们“发现”你，这包括沿着走廊的轴线找到一条通向你的通畅路径，然后他们会直接向你移动，直到你从他们的视线中消失，然后他们将恢复随机模式。在更高的级别上，吃豆人会在他身后留下一段时间的隐形痕迹，鬼会“闻到”并有时会跟随。

当吃豆人通电时，算法的唯一区别是，当他们发现你时，鬼魂会逃离你而不是向你移动。

因此，为了获得真实的体验，您可能根本不需要非常复杂的寻路算法。如果你想花哨，当然可以实现A*。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-12T12:42:17.560

直接走向你的敌人是一个开始，但是当你添加一个迷宫时，你会想要添加一些更智能的寻路功能，这样你的幽灵就不会陷入弯道或死胡同。

以下教程是一个很棒的轻量级 A* 入门指南，带有可下载的示例。

[基于瓦片的地图上的路径查找](http://www.cokeandcode.com/pathfinding)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-10T14:59:28.380

在吃豆人中，所有的幽灵都有不同的追逐算法

*   眨眼->追逐。通常会采取最短的路线到达您，并倾向于遵循。
*   小指 -> 伏击。吃豆人倾向于采取更迂回的方式。致命。（pinky和blinky在选择方向时往往会做出不同的选择，经常把玩家困在角落里）
*   漆黑->怪胎。这家伙的行为很奇怪。他在棋盘上相当随意地移动，但有时在他靠近时会追逐。
*   克莱德->白痴。随机移动。威胁不大。

鬼魂的动作中有一个有趣的模式：偶尔，它们会同时停止和停止对吃豆人的追求，并返回各自的迷宫角落，进入“分散模式”。

[在pacman dossier](http://home.comcast.net/%7Ejpittman2/pacman/pacmandossier.html)中有关于算法的完整描述

问候

纪尧姆

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-08T05:17:28.553

你可以开始[看 A*（A 星）](http://en.wikipedia.org/wiki/A*_search_algorithm)

这[是一个](http://www.gameai.com/pathfinding.html)链接到其他寻路算法的页面。

[编辑] gah...大脑太慢了...忘记了这本书，它是 C 或 C++（我忘记了），但是您仍然可以获得 Java 的概念。它可能不是你最容易阅读的，但总体来说还不错。 [面向游戏开发人员的 AI，作者：David M. Bourg、Glenn Seemann](http://books.google.com/books?id=Z5UJFg1XyzgC&printsec=frontcover&dq=AI+for+game+developers)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-08T07:26:33.080

我认为 pacman 的每一步都采用最短路径算法。一个很好的实现是[Dijkstra 的算法](http://en.wikipedia.org/wiki/Dijkstra's_algorithm)。

总结一下：将迷宫可视化为具有顶点和边的图形。每条边都有一个等待（在你的情况下，所有边都具有相同的权重）。该算法通过将每个直接可达的边向下移动一步来找到从源顶点到目标顶点的最短路径。然后在下一个顶点上你做同样的事情并继续做直到你到达目标。到达的第一条路径是最短路径。可以对该算法进行许多优化以加快速度，例如考虑吃豆人在其先前位置的位置以及它移动的方向，以便您可以在算法中获得一些启发式。我建议在每个动作中找到从每个幽灵到吃豆人的最短路径，然后将幽灵朝那个方向移动。最终距离会减少，你将能够赶上吃豆人。

另一种启发式方法，可用于查找 pacman 可到达的所有直接边缘，并尝试通过重影覆盖尽可能多的这些顶点。因此，我们没有将 pacman 设置为目标顶点，而是将 pacman 可立即到达的顶点设置为目标，结果将是可用的幽灵将试图掩盖 pacman 的主要逃生路线并抓住他。

# c# - byte[] 转十六进制字符串

> ID：623104
> 
> 赞同：355
> 
> 时间：2009-03-08T05:20:00.590
> 
> 标签：c#, string, hex

如何将 a 转换`byte[]`为 a `string`？每次我尝试它，我得到

> 系统字节[]

而不是价值。

另外，如何获得十六进制而不是十进制的值？

* * *

## 回答 #1

> 赞同：656
> 
> 时间：2009-03-08T06:56:19.860

为此有一个内置方法：

```
byte[] data = { 1, 2, 4, 8, 16, 32 };

string hex = BitConverter.ToString(data); 
```

结果：01-02-04-08-10-20

如果你想要它没有破折号，只需删除它们：

```
string hex = BitConverter.ToString(data).Replace("-", string.Empty); 
```

结果：010204081020

如果您想要更紧凑的表示，可以使用 Base64：

```
string base64 = Convert.ToBase64String(data); 
```

结果：AQIECBAg

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-04-06T20:29:29.610

我想我会尝试比较这里列出的每种方法的速度。 [我基于此速度测试代码。](https://stackoverflow.com/questions/800685/which-hash-function-should-i-choose)

结果是 BitConverter+String.Replace 似乎比大多数其他简单方法更快。[但是可以使用Nathan Moinvaziri 的 ByteArrayToHexString](https://stackoverflow.com/a/5919521/356218)或 Kurt 的 ToHex等算法来提高速度。

我还发现有趣的是 string.Concat 和 string.Join 对于长字符串比 StringBuilder 实现慢得多，但对于较短的数组来说类似。可能是由于在较长的字符串上扩展了 StringBuilder，因此设置初始大小应该可以抵消这种差异。

*   从这里的答案中获取每一位代码：
*   [BitConvertRep](https://stackoverflow.com/a/623184/356218) = Guffa、BitConverter 和 String.Replace 的回答**（我建议在大多数情况下使用）**
*   [StringBuilder](https://stackoverflow.com/a/623114/356218) = Quintin Robinson 的回答，foreach char StringBuilder.Append
*   [LinqConcat](https://stackoverflow.com/a/623134/356218) = Michael Buen 的回答，Linq 内置数组的 string.Concat
*   [LinqJoin](https://stackoverflow.com/a/2345722/356218) = 由 mloskot 回答，string.Join 的 Linq 构建数组
*   [LinqAgg](https://stackoverflow.com/a/3974610/356218) = Matthew Whited 的回答，IEnumerable.Aggregate 与 StringBuilder
*   [ToHex](https://stackoverflow.com/a/3974535/356218) = Kurt 的回答，在数组中设置字符，使用字节值获取十六进制
*   [ByteArrayToHexString](https://stackoverflow.com/a/5919521/356218) = Nathan Moinvaziri 的回答，与上面的 ToHex 速度大致相同，并且可能更容易阅读**（我建议速度）**
*   [ToHexFromTable](http://blogs.msdn.com/b/blambert/archive/2009/02/22/blambert-codesnip-fast-byte-array-to-hex-string-conversion.aspx) = Nathan Moinvaziri 在回答中链接，对我来说，这与上述 2 的速度几乎相同，但需要始终存在 256 个字符串的数组

> 和：`LONG_STRING_LENGTH = 1000 * 1024;`
> 
> *   BitConvertRep 计算时间经过**27,202 毫秒**（最快的内置/简单）
> *   StringBuilder 计算 Time Elapsed 75,723 ms（StringBuilder 没有重新分配）
> *   LinqConcat 计算耗时 182,094 毫秒
> *   LinqJoin 计算耗时 181,142 毫秒
> *   LinqAgg 计算耗时 93,087 毫秒（带重新分配的 StringBuilder）
> *   ToHex 计算耗时**19,167 毫秒**（最快）
> 
> 与：`LONG_STRING_LENGTH = 100 * 1024;`，相似的结果
> 
> *   BitConvertReplace 计算 Time Elapsed 3431 ms
> *   StringBuilder 计算 Time Elapsed 8289 ms
> *   LinqConcat 计算 Time Elapsed 21512 ms
> *   LinqJoin 计算 Time Elapsed 19433 ms
> *   LinqAgg 计算经过的时间 9230 毫秒
> *   ToHex 计算耗时 1976 毫秒
> 
> 使用：（`int MANY_STRING_COUNT = 1000;` `int MANY_STRING_LENGTH = 1024;` 与第一次测试相同的字节数，但在不同的数组中）
> 
> *   BitConvertReplace 计算 Time Elapsed 25,680 ms
> *   StringBuilder 计算耗时 78,411 毫秒
> *   LinqConcat 计算耗时 101,233 毫秒
> *   LinqJoin 计算耗时 99,311 毫秒
> *   LinqAgg 计算耗时 84,660 毫秒
> *   ToHex 计算耗时 18,221 毫秒
> 
> 和：`int MANY_STRING_COUNT = 2000;` `int MANY_STRING_LENGTH = 20;`
> 
> *   BitConvertReplace 计算 Time Elapsed 1347 ms
> *   StringBuilder 计算 Time Elapsed 3234 ms
> *   LinqConcat 计算 Time Elapsed 5013 ms
> *   LinqJoin 计算 Time Elapsed 4826 ms
> *   LinqAgg 计算耗时 3589 毫秒
> *   ToHex 计算耗时 772 ms

我使用的测试代码：

```
void Main()
{
    int LONG_STRING_LENGTH = 100 * 1024;
    int MANY_STRING_COUNT = 1024;
    int MANY_STRING_LENGTH = 100;

    var source = GetRandomBytes(LONG_STRING_LENGTH);

    List<byte[]> manyString = new List<byte[]>(MANY_STRING_COUNT);
    for (int i = 0; i < MANY_STRING_COUNT; ++i)
    {
        manyString.Add(GetRandomBytes(MANY_STRING_LENGTH));
    }

    var algorithms = new Dictionary<string,Func<byte[], string>>();
    algorithms["BitConvertReplace"] = BitConv;
    algorithms["StringBuilder"] = StringBuilderTest;
    algorithms["LinqConcat"] = LinqConcat;
    algorithms["LinqJoin"] = LinqJoin;
    algorithms["LinqAgg"] = LinqAgg;
    algorithms["ToHex"] = ToHex;
    algorithms["ByteArrayToHexString"] = ByteArrayToHexString;

    Console.WriteLine(" === Long string test");
    foreach (var pair in algorithms) {
        TimeAction(pair.Key + " calculation", 500, () =>
        {
            pair.Value(source);
        });
    }

    Console.WriteLine(" === Many string test");
    foreach (var pair in algorithms) {
        TimeAction(pair.Key + " calculation", 500, () =>
        {
            foreach (var str in manyString)
            {
                pair.Value(str);
            }
        });
    }
}

// Define other methods and classes here
static void TimeAction(string description, int iterations, Action func) {
    var watch = new Stopwatch();
    watch.Start();
    for (int i = 0; i < iterations; i++) {
        func();
    }
    watch.Stop();
    Console.Write(description);
    Console.WriteLine(" Time Elapsed {0} ms", watch.ElapsedMilliseconds);
}

//static byte[] GetRandomBytes(int count) {
//  var bytes = new byte[count];
//  (new Random()).NextBytes(bytes);
//  return bytes;
//}
static Random rand = new Random();
static byte[] GetRandomBytes(int count) {
    var bytes = new byte[count];
    rand.NextBytes(bytes);
    return bytes;
}

static string BitConv(byte[] data)
{
    return BitConverter.ToString(data).Replace("-", string.Empty);
}
static string StringBuilderTest(byte[] data)
{
    StringBuilder sb = new StringBuilder(data.Length*2);
    foreach (byte b in data)
        sb.Append(b.ToString("X2"));

    return sb.ToString();
}
static string LinqConcat(byte[] data)
{
    return string.Concat(data.Select(b => b.ToString("X2")).ToArray());
}
static string LinqJoin(byte[] data)
{
    return string.Join("",
        data.Select(
            bin => bin.ToString("X2")
            ).ToArray());
}
static string LinqAgg(byte[] data)
{
    return data.Aggregate(new StringBuilder(),
                               (sb,v)=>sb.Append(v.ToString("X2"))
                              ).ToString();
}
static string ToHex(byte[] bytes)
{
    char[] c = new char[bytes.Length * 2];

    byte b;

    for(int bx = 0, cx = 0; bx < bytes.Length; ++bx, ++cx)
    {
        b = ((byte)(bytes[bx] >> 4));
        c[cx] = (char)(b > 9 ? b - 10 + 'A' : b + '0');

        b = ((byte)(bytes[bx] & 0x0F));
        c[++cx] = (char)(b > 9 ? b - 10 + 'A' : b + '0');
    }

    return new string(c);
}
public static string ByteArrayToHexString(byte[] Bytes)
{
    StringBuilder Result = new StringBuilder(Bytes.Length*2);
    string HexAlphabet = "0123456789ABCDEF";

    foreach (byte B in Bytes)
        {
        Result.Append(HexAlphabet[(int)(B >> 4)]);
        Result.Append(HexAlphabet[(int)(B & 0xF)]);
        }

    return Result.ToString();
} 
```

[还有另一个类似过程的答案](https://stackoverflow.com/a/624379/356218)，我还没有比较我们的结果。

* * *

## 回答 #3

> 赞同：77
> 
> 时间：2009-03-08T05:49:20.317

Hex，Linq-fu：

```
string.Concat(ba.Select(b => b.ToString("X2")).ToArray()) 
```

**与时俱进**

正如@RubenBartelink 所指出的，没有转换为`IEnumerable<string>`数组的代码：`ba.Select(b => b.ToString("X2"))`在 4.0 之前不起作用，相同的代码现在在 4.0 上工作。

这段代码...

```
byte[] ba = { 1, 2, 4, 8, 16, 32 };

string s = string.Concat(ba.Select(b => b.ToString("X2")));
string t = string.Concat(ba.Select(b => b.ToString("X2")).ToArray());

Console.WriteLine (s);
Console.WriteLine (t); 
```

...在 .NET 4.0 之前，输出为：

```
System.Linq.Enumerable+<CreateSelectIterator>c__Iterator10`2[System.Byte,System.String]
010204081020 
```

从 .NET 4.0 开始，string.Concat 有一个接受 IEnumerable 的重载。因此在 4.0 上，上述代码对于变量 s 和 t 将具有相同的输出

```
010204081020
010204081020 
```

在 4.0 之前，`ba.Select(b => b.ToString("X2"))`去重载`(object arg0)`，`IEnumerable<string>`去一个适当的重载的方式，即`(params string[] values)`，我们需要将 转换`IEnumerable<string>`为字符串数组。在 4.0 之前，string.Concat 有 10 个重载函数，在 4.0 上现在是 12 个

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2011-05-07T06:30:25.717

这是另一种方法：

```
public static string ByteArrayToHexString(byte[] Bytes)
{
    StringBuilder Result = new StringBuilder(Bytes.Length * 2);
    string HexAlphabet = "0123456789ABCDEF";

    foreach (byte B in Bytes)
    {
        Result.Append(HexAlphabet[(int)(B >> 4)]);
        Result.Append(HexAlphabet[(int)(B & 0xF)]);
    }

    return Result.ToString();
}

public static byte[] HexStringToByteArray(string Hex)
{
    byte[] Bytes = new byte[Hex.Length / 2];
    int[] HexValue = new int[] { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 
       0x06, 0x07, 0x08, 0x09, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
       0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F };

    for (int x = 0, i = 0; i < Hex.Length; i += 2, x += 1)
    {
        Bytes[x] = (byte)(HexValue[Char.ToUpper(Hex[i + 0]) - '0'] << 4 |
                          HexValue[Char.ToUpper(Hex[i + 1]) - '0']);
    }

    return Bytes;
} 
```

或者，您可以像这样预先构建转换表以获得更快的结果：

[http://blogs.msdn.com/b/blambert/archive/2009/02/22/blambert-codesnip-fast-byte-array-to-hex-string-conversion.aspx](http://blogs.msdn.com/b/blambert/archive/2009/02/22/blambert-codesnip-fast-byte-array-to-hex-string-conversion.aspx)

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2010-10-20T03:31:10.747

我喜欢使用扩展方法进行这样的转换，即使它们只是包装标准库方法。在十六进制转换的情况下，我使用以下手动调整（即*快速*）算法：

```
public static string ToHex(this byte[] bytes)
{
    char[] c = new char[bytes.Length * 2];

    byte b;

    for(int bx = 0, cx = 0; bx < bytes.Length; ++bx, ++cx) 
    {
        b = ((byte)(bytes[bx] >> 4));
        c[cx] = (char)(b > 9 ? b + 0x37 + 0x20 : b + 0x30);

        b = ((byte)(bytes[bx] & 0x0F));
        c[++cx]=(char)(b > 9 ? b + 0x37 + 0x20 : b + 0x30);
    }

    return new string(c);
}

public static byte[] HexToBytes(this string str)
{
    if (str.Length == 0 || str.Length % 2 != 0)
        return new byte[0];

    byte[] buffer = new byte[str.Length / 2];
    char c;
    for (int bx = 0, sx = 0; bx < buffer.Length; ++bx, ++sx)
    {
        // Convert first half of byte
        c = str[sx];
        buffer[bx] = (byte)((c > '9' ? (c > 'Z' ? (c - 'a' + 10) : (c - 'A' + 10)) : (c - '0')) << 4);

        // Convert second half of byte
        c = str[++sx];
        buffer[bx] |= (byte)(c > '9' ? (c > 'Z' ? (c - 'a' + 10) : (c - 'A' + 10)) : (c - '0'));
    }

    return buffer;
} 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2009-03-08T05:28:27.217

好吧，我不经常将字节转换为十六进制，所以我不得不说我不知道​​是否有比这更好的方法，但这是一种方法。

```
StringBuilder sb = new StringBuilder();
foreach (byte b in myByteArray)
    sb.Append(b.ToString("X2"));

string hexString = sb.ToString(); 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2013-09-02T13:50:08.890

我想我应该提供一个答案。根据我的测试，这种方法是最快的

```
public static class Helper
{
    public static string[] HexTbl = Enumerable.Range(0, 256).Select(v => v.ToString("X2")).ToArray();
    public static string ToHex(this IEnumerable<byte> array)
    {
        StringBuilder s = new StringBuilder();
        foreach (var v in array)
            s.Append(HexTbl[v]);
        return s.ToString();
    }
    public static string ToHex(this byte[] array)
    {
        StringBuilder s = new StringBuilder(array.Length*2);
        foreach (var v in array)
            s.Append(HexTbl[v]);
        return s.ToString();
    }
} 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2014-03-03T22:05:16.383

非常快速的扩展方法（带反转）：

```
public static class ExtensionMethods {
    public static string ToHex(this byte[] data) {
        return ToHex(data, "");
    }
    public static string ToHex(this byte[] data, string prefix) {
        char[] lookup = new char[] { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' };
        int i = 0, p = prefix.Length, l = data.Length;
        char[] c = new char[l * 2 + p];
        byte d;
        for(; i < p; ++i) c[i] = prefix[i];
        i = -1;
        --l;
        --p;
        while(i < l) {
            d = data[++i];
            c[++p] = lookup[d >> 4];
            c[++p] = lookup[d & 0xF];
        }
        return new string(c, 0, c.Length);
    }
    public static byte[] FromHex(this string str) {
        return FromHex(str, 0, 0, 0);
    }
    public static byte[] FromHex(this string str, int offset, int step) {
        return FromHex(str, offset, step, 0);
    }
    public static byte[] FromHex(this string str, int offset, int step, int tail) {
        byte[] b = new byte[(str.Length - offset - tail + step) / (2 + step)];
        byte c1, c2;
        int l = str.Length - tail;
        int s = step + 1;
        for(int y = 0, x = offset; x < l; ++y, x += s) {
            c1 = (byte)str[x];
            if(c1 > 0x60) c1 -= 0x57;
            else if(c1 > 0x40) c1 -= 0x37;
            else c1 -= 0x30;
            c2 = (byte)str[++x];
            if(c2 > 0x60) c2 -= 0x57;
            else if(c2 > 0x40) c2 -= 0x37;
            else c2 -= 0x30;
            b[y] = (byte)((c1 << 4) + c2);
        }
        return b;
    }
} 
```

在上述速度测试中击败所有其他人：

> === 长字符串测试
> BitConvertReplace 计算 Time Elapsed 2415 ms
> StringBuilder 计算 Time Elapsed 5668 ms
> LinqConcat 计算 Time Elapsed 11826 ms
> LinqJoin 计算 Time Elapsed 9323 ms
> LinqAgg 计算 Time Elapsed 7444 ms
> ToHexTable 计算 Time Elapsed 1028 ms
> ToHexAcidzombie 计算 Time Elapsed 1035 ms
> ToHexPatrick 计算**Time Elapsed 814 ms**
> ToHexKurt 计算 Time Elapsed 1604 ms
> ByteArrayToHexString 计算 Time Elapsed 1330 ms
> 
> === 许多字符串测试
> BitConvertReplace 计算 Time Elapsed 2238 ms
> StringBuilder 计算 Time Elapsed 5393 ms
> LinqConcat 计算 Time Elapsed 9043 ms
> LinqJoin 计算 Time Elapsed 9131 ms
> LinqAgg 计算 Time Elapsed 7324 ms
> ToHexTable 计算 Time Elapsed 968 ms
> ToHexAcidzombie 计算 Time Elapsed 969 ms
> ToHexPatrick 计算**Time Elapsed 956 ms**
> ToHexKurt 计算 Time Elapsed 1547 ms
> ByteArrayToHexString 计算 Time Elapsed 1277 ms

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-06-21T23:02:18.987

只是为了增加一个答案`System.Runtime.Remoting.Metadata.W3cXsd2001.SoapHexBinary`，我使用了一个可以将字节转换为十六进制的类：

```
string hex = new SoapHexBinary(bytes).ToString();
byte[] bytes = SoapHexBinary.Parse(hex).Value; 
```

不确定它如何与其他实现进行比较（基准测试），但 IMO 它非常简单——尤其是从十六进制转换回字节。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-10-22T16:57:23.180

和：

```
byte[] data = new byte[] { 0x01, 0x02, 0x03, 0x0D, 0x0E, 0x0F };
string hex = string.Empty;
data.ToList().ForEach(b => hex += b.ToString("x2"));
// use "X2" for uppercase hex letters
Console.WriteLine(hex); 
```

结果：`0102030d0e0f`

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-03-08T05:27:31.167

您必须知道以字节表示的字符串的编码，但您可以说`System.Text.UTF8Encoding.GetString(bytes)`or `System.Text.ASCIIEncoding.GetString(bytes)`。（我是凭记忆做的，所以 API 可能不完全正确，但非常接近。）

有关第二个问题的答案，请参阅[此问题](https://stackoverflow.com/questions/190531/hex-operations-in-c)。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2011-08-17T13:49:23.737

这是字节数组（byte[]）的扩展方法，例如，

```
var b = new byte[] { 15, 22, 255, 84, 45, 65, 7, 28, 59, 10 };
Console.WriteLine(b.ToHexString());

public static class HexByteArrayExtensionMethods
{
    private const int AllocateThreshold = 256;
    private const string UpperHexChars = "0123456789ABCDEF";
    private const string LowerhexChars = "0123456789abcdef";
    private static string[] upperHexBytes;
    private static string[] lowerHexBytes;

    public static string ToHexString(this byte[] value)
    {
        return ToHexString(value, false);
    }

    public static string ToHexString(this byte[] value, bool upperCase)
    {
        if (value == null)
        {
            throw new ArgumentNullException("value");
        }

        if (value.Length == 0)
        {
            return string.Empty;
        }

        if (upperCase)
        {
            if (upperHexBytes != null)
            {
                return ToHexStringFast(value, upperHexBytes);
            }

            if (value.Length > AllocateThreshold)
            {
                return ToHexStringFast(value, UpperHexBytes);
            }

            return ToHexStringSlow(value, UpperHexChars);
        }

        if (lowerHexBytes != null)
        {
            return ToHexStringFast(value, lowerHexBytes);
        }

        if (value.Length > AllocateThreshold)
        {
            return ToHexStringFast(value, LowerHexBytes);
        }

        return ToHexStringSlow(value, LowerhexChars);
    }

    private static string ToHexStringSlow(byte[] value, string hexChars)
    {
        var hex = new char[value.Length * 2];
        int j = 0;

        for (var i = 0; i < value.Length; i++)
        {
            var b = value[i];
            hex[j++] = hexChars[b >> 4];
            hex[j++] = hexChars[b & 15];
        }

        return new string(hex);
    }

    private static string ToHexStringFast(byte[] value, string[] hexBytes)
    {
        var hex = new char[value.Length * 2];
        int j = 0;

        for (var i = 0; i < value.Length; i++)
        {
            var s = hexBytes[value[i]];
            hex[j++] = s[0];
            hex[j++] = s[1];
        }

        return new string(hex);
    }

    private static string[] UpperHexBytes
    {
        get
        {
            return (upperHexBytes ?? (upperHexBytes = new[] {
                "00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "0A", "0B", "0C", "0D", "0E", "0F",
                "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "1A", "1B", "1C", "1D", "1E", "1F",
                "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "2A", "2B", "2C", "2D", "2E", "2F",
                "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "3A", "3B", "3C", "3D", "3E", "3F",
                "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "4A", "4B", "4C", "4D", "4E", "4F",
                "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "5A", "5B", "5C", "5D", "5E", "5F",
                "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "6A", "6B", "6C", "6D", "6E", "6F",
                "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "7A", "7B", "7C", "7D", "7E", "7F",
                "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "8A", "8B", "8C", "8D", "8E", "8F",
                "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "9A", "9B", "9C", "9D", "9E", "9F",
                "A0", "A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "AA", "AB", "AC", "AD", "AE", "AF",
                "B0", "B1", "B2", "B3", "B4", "B5", "B6", "B7", "B8", "B9", "BA", "BB", "BC", "BD", "BE", "BF",
                "C0", "C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C9", "CA", "CB", "CC", "CD", "CE", "CF",
                "D0", "D1", "D2", "D3", "D4", "D5", "D6", "D7", "D8", "D9", "DA", "DB", "DC", "DD", "DE", "DF",
                "E0", "E1", "E2", "E3", "E4", "E5", "E6", "E7", "E8", "E9", "EA", "EB", "EC", "ED", "EE", "EF",
                "F0", "F1", "F2", "F3", "F4", "F5", "F6", "F7", "F8", "F9", "FA", "FB", "FC", "FD", "FE", "FF" }));
        }
    }

    private static string[] LowerHexBytes
    {
        get
        {
            return (lowerHexBytes ?? (lowerHexBytes = new[] {
                "00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "0a", "0b", "0c", "0d", "0e", "0f",
                "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "1a", "1b", "1c", "1d", "1e", "1f",
                "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "2a", "2b", "2c", "2d", "2e", "2f",
                "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "3a", "3b", "3c", "3d", "3e", "3f",
                "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "4a", "4b", "4c", "4d", "4e", "4f",
                "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "5a", "5b", "5c", "5d", "5e", "5f",
                "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "6a", "6b", "6c", "6d", "6e", "6f",
                "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "7a", "7b", "7c", "7d", "7e", "7f",
                "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "8a", "8b", "8c", "8d", "8e", "8f",
                "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "9a", "9b", "9c", "9d", "9e", "9f",
                "a0", "a1", "a2", "a3", "a4", "a5", "a6", "a7", "a8", "a9", "aa", "ab", "ac", "ad", "ae", "af",
                "b0", "b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9", "ba", "bb", "bc", "bd", "be", "bf",
                "c0", "c1", "c2", "c3", "c4", "c5", "c6", "c7", "c8", "c9", "ca", "cb", "cc", "cd", "ce", "cf",
                "d0", "d1", "d2", "d3", "d4", "d5", "d6", "d7", "d8", "d9", "da", "db", "dc", "dd", "de", "df",
                "e0", "e1", "e2", "e3", "e4", "e5", "e6", "e7", "e8", "e9", "ea", "eb", "ec", "ed", "ee", "ef",
                "f0", "f1", "f2", "f3", "f4", "f5", "f6", "f7", "f8", "f9", "fa", "fb", "fc", "fd", "fe", "ff" }));
        }
    }
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-09-02T09:30:36.507

这里没有人提到你得到“System.Byte []”字符串而不是值的原因，所以我会。

当一个对象被隐式转换为字符串时，程序将默认使用`public String ToString()`继承自的对象方法`System.Object`：

```
public virtual string ToString()
{
    return this.GetType().ToString();
} 
```

如果你发现你经常进行这种转换，你可以简单地创建一个包装类并重写这个方法，如下所示：

```
public override string ToString()
{
    // do the processing here
    // return the nicely formatted string
} 
```

现在，每次打印此包装对象时，您都会得到您的值，而不是来自`this.GetType().ToString()`.

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2010-02-27T00:34:00.720

您将 LINQ 与字符串方法相结合：

```
string hex = string.Join("",
  bin.Select(
    bin => bin.ToString("X2")
      ).ToArray()); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-03-08T05:32:16.927

正如其他人所说，这取决于字节数组中值的编码。尽管如此，您需要非常小心这种事情，否则您可能会尝试转换未由所选编码处理的字节。

Jon Skeet 有一篇关于 .NET 中编码和 unicode的[好文章。](http://www.yoda.arachsys.com/csharp/unicode.html)推荐阅读。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-11-10T00:59:24.350

我不确定您是否需要执行此操作，但这是我能想到的将 byte[] 转换为十六进制字符串的最快方法：

```
static readonly char[] hexchar = new char[] { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' };
public static string HexStr(byte[] data, int offset, int len, bool space = false)
{
    int i = 0, k = 2;
    if (space) k++;
    var c = new char[len * k];
    while (i < len)
    {
        byte d = data[offset + i];
        c[i * k] = hexchar[d / 0x10];
        c[i * k + 1] = hexchar[d % 0x10];
        if (space && i < len - 1) c[i * k + 2] = ' ';
        i++;
    }
    return new string(c, 0, c.Length);
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-02-01T11:46:57.090

我想我做了一个更快的字节数组到字符串转换器：

```
public static class HexTable
{
    private static readonly string[] table = BitConverter.ToString(Enumerable.Range(0, 256).Select(x => (byte)x).ToArray()).Split('-');

    public static string ToHexTable(byte[] value)
    {
        StringBuilder sb = new StringBuilder(2 * value.Length);

        for (int i = 0; i < value.Length; i++)
            sb.Append(table[value[i]]);

        return sb.ToString();
    } 
```

测试设置：

```
static void Main(string[] args)
{
        const int TEST_COUNT = 10000;
        const int BUFFER_LENGTH = 100000;

        Random random = new Random();

        Stopwatch sw = new Stopwatch();
        Stopwatch sw2 = new Stopwatch();

        byte[] buffer = new byte[BUFFER_LENGTH];
        random.NextBytes(buffer);

        sw.Start();
        for (int j = 0; j < TEST_COUNT; j++)
            HexTable.ToHexTable(buffer);

        sw.Stop();

        sw2.Start();
        for (int j = 0; j < TEST_COUNT; j++)
            ToHexChar.ToHex(buffer);

        sw2.Stop();

        Console.WriteLine("Hex Table Elapsed Milliseconds: {0}", sw.ElapsedMilliseconds);
        Console.WriteLine("ToHex Elapsed Milliseconds: {0}", sw2.ElapsedMilliseconds);
    } 
```

ToHexChar.ToHEx() 方法是前面显示的 ToHex() 方法。

结果如下：

****十六进**制表= 11808 毫秒 **ToHEx** = 12168毫秒**

 **它可能看起来差别不大，但它仍然更快:)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-12-13T09:25:37.877

```
private static string GuidToRaw(Guid guid)
{
    byte[] bytes = guid.ToByteArray();

    int сharCount = bytes.Length * 2;
    char[] chars = new char[сharCount];

    int index = 0;
    for (int i = 0; i < сharCount; i += 2)
    {
        byte b = bytes[index++];
        chars[i] = GetHexValue((int)(b / 16));
        chars[i + 1] = GetHexValue((int)(b % 16));
    }
    return new string(chars, 0, chars.Length);
}

private static char GetHexValue(int i)
{
    return (char)(i < 10 ? i + 48 : i + 55);
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2010-10-20T03:46:10.113

用LINQ做到这一点的好方法......

```
var data = new byte[] { 1, 2, 4, 8, 16, 32 }; 
var hexString = data.Aggregate(new StringBuilder(), 
                               (sb,v)=>sb.Append(v.ToString("X2"))
                              ).ToString(); 
```

# c# - 文件中的 C# 数据库

> ID：623107
> 
> 赞同：6
> 
> 时间：2009-03-08T05:23:49.117
> 
> 标签：c#, database, file

如何在 C# 中创建一个 db 文件？一位朋友告诉我它在工具箱中，而不是使用 sqlite。我没有看到任何可能是它，也没有看到它叫什么。谷歌没有帮助:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-08T05:35:09.073

难道是...

[SQL Server Compact Edition](http://www.microsoft.com/Sqlserver/2005/en/us/compact.aspx) – 一种轻量级的进程内数据库引擎，设计用于在设备和桌面上运行，面向本地数据存储。Compact Edition 包括 SQL Server 2005 数据类型的子集，并与数据服务引擎共享 Transact-SQL (T-SQL) 语言的公共元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-08T05:28:20.383

c# 或 .NET Framework 中没有内置基于文件的数据库提供程序。[当然有用于使用 SQL Server（包括SQL Express](http://www.microsoft.com/express/sql/) ）的预先存在的连接器，但是如果您需要基于文件的功能齐全的 RDBMS，则需要使用[SQLite](http://www.sqlite.org/)或[Firebird](http://www.firebirdsql.org/)之类的东西（也是[VistaDB](http://www.vistadb.net/)的粉丝，而不是免费或开源，但非常可靠且非常实惠）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T05:46:09.373

在“添加新项目”菜单上：“基于服务的数据库”或“Sql Server 数据库”（如果它是 asp.net 应用程序）。我相信你的朋友的意思是“在 Visual Studio 中创建一个 sql express db 文件”。

也就是说，如果你想用对应于 ac# 模型的表填充一个空数据库，你可以创建一个 linq2sql 模型，并使用它的 CreateDatabase 为你做这件事:)

您可能想查看此[http://quickstarts.asp.net/QuickStartv20/aspnet/doc/data/vwd.aspx](http://quickstarts.asp.net/QuickStartv20/aspnet/doc/data/vwd.aspx)（可视 Web 开发人员链接，但它适用）。

有关如何将 SQL express 与基于半文件的方法检查及其限制一起使用的完整/深入解释： [http ://www.databasejournal.com/features/mssql/article.php/3704171/SQL-Server- 2005-Express-Edition---Part-8---XCopy-Deployment.htm](http://www.databasejournal.com/features/mssql/article.php/3704171/SQL-Server-2005-Express-Edition---Part-8---XCopy-Deployment.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T05:34:08.967

如果您使用 Visual Studio 或 Web Developer Express，确实有一些方法可以轻松创建 MS SQLExpress 数据库。只需转到添加新项目...，它应该是可用的文件类型之一。

请记住，您必须安装 Microsoft SQL Express Edition（免费，就像啤酒一样！）或 Microsoft SQL（非常不免费！，在所有意义上）。如果您还没有这样做，您将无法轻松地创建数据库文件。如果你已经得到它，你可以在[这里](http://www.microsoft.com/express/sql/default.aspx)得到它。

正如其他回答者所提到的，严格来说这不是 C# 功能。MS SQL 及其衍生产品是数据库应用程序，很像 Oracle、MySQL 或 PostgreSQL。只是 Microsoft Visual Studio 在默认情况下使使用 Microsoft 数据库产品变得非常容易。无论您在哪里询问，区分 C#、Visual Studio 和任何数据库程序都可能会更快地为您提供更好的答案。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-02-23T03:44:09.090

每个数据库都有`file system`一些二进制格式，很可能是自定义的，并使用 a`cache`来控制数据库生命周期的流。

如果您创建一个`database system`，您将需要某种类型的缓存，因为您只想在缓存已经释放它的情况下从文件中读取。

如果您有 1000 个客户端访问同一个数据库，您当然不想`read/write`为每个客户端请求访问该文件，因此您希望管理一个客户端队列并针对缓存运行它，以便缓存知道不释放db 在达到其生命周期的时间跨度后，而是更新时间跨度，因此，如果再次处理和排队，则不必重新加载文件，直到引用 db 对象的队列为空。

创建一个设计良好的缓存，所有 rdbms 都使用它，这样就不会创建重复的对象，如果不需要，也不会重新加载文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-23T01:06:38.720

您可以使用

FileDB - 用于存储文件的 AC# 数据库

[http://filedb.codeplex.com](http://filedb.codeplex.com)

源代码中有一个 MVC 示例，可让您上传文件并支持拖放。

然后将其保存到您指定位置的一个文件中。

像这样：

```
private string pathDB = @"C:\CMS-MVC\Parts\FileManager\filedb-19055\trunk\MvcTest\Data\MvcData.dat"; 
```

该文件会将您的所有文件存储在该“容器”中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-16T09:40:29.637

也许您可以尝试 Microsoft [LocalDB](https://docs.microsoft.com/en-us/sql/database-engine/configure-windows/sql-server-2016-express-localdb)。它是基于文件的，但使用低级别的 SQLExpress 安装来托管它。

* * *

## 回答 #8

> 赞同：-8
> 
> 时间：2009-03-08T05:29:30.177

你误会了。数据库不是用 C# 开发的。数据库是使用 Oracle、MS SQL Server、MySQL 等数据库系统构建的。

使用上述提供程序之一构建数据库后，您可以使用您选择的编程语言（在您的情况下为 C#）对数据库执行操作，以从中获取数据并将数据放入其中。

# multithreading - Windows 上的多核 Haskell

> ID：623122
> 
> 赞同：5
> 
> 时间：2009-03-08T05:34:16.140
> 
> 标签：multithreading, haskell, parallel-processing, multicore

我一直在阅读[有关](http://www.haskell.org/haskellwiki/Haskell_in_5_steps)Haskell的许多[教程。](http://cgi.cse.unsw.edu.au/~dons/blog/2007/11/29) 但是，我无法让编译后的应用程序在**windows (32 位)**上的多核 (我有英特尔四核) 上运行。

 **我尝试了很多事情：

*   [ghc -O2 --make A.hs -线程](http://www.haskell.org/haskellwiki/Haskell_in_5_steps)
*   [./real-par +RTS -N2](http://cgi.cse.unsw.edu.au/~dons/blog/2007/11/29)
*   [./real-par +RTS -N4](http://cgi.cse.unsw.edu.au/~dons/blog/2007/11/29)

但没有运气。

编译后的应用程序仅在一个内核上 100% 运行。

有任何想法吗？

代码：

```
import Control.Parallel
import Control.Monad
import Text.Printf

fib :: Int -> Int
fib 0 = 0
fib 1 = 1
fib n = l `pseq` r `pseq` l+r
    where
    l = fib (n-1)
    r = fib (n-2)

main = forM_ [0..350] $ \i ->
        printf "n=%d => %d\n" i (fib i) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-08T06:07:50.430

使用 par 而不是 pseq 似乎可以解决它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-08T06:37:29.843

如果 vili 是正确的（我无法测试，因为我没有任何 MS 盒子），它可能与[这个错误有关](http://hackage.haskell.org/trac/ghc/ticket/2868)

# xml - XLink、XPointer 和 XInclude 之间

> ID：623124
> 
> 赞同：5
> 
> 时间：2009-03-08T05:36:48.680
> 
> 标签：xml, xpath

`XLink`和`XPointer`和有什么区别`XInclude`？

这太令人困惑了。有人可以解释一下区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-04T21:29:55.603

**简短的回答：**

XLink 和 XPointer 非常相似，因为它们提供了一种引用其他元素的方法，但是主要区别（除了语法）是：

*   使用 XLink，您可以引用*其他或相同的*xml 文档
*   使用 XPointer，您只能引用*同一*xml 文档的部分内容

XInclude 是把不同的 xml 文档合二为一。重要的是要注意包含在解析之后和任何其他处理之前直接发生。经典的例子是想象一本书由几章组成，每一章都是一个单独的xml文档

**长答案：**

*   [https://www.w3.org/TR/xlink11/](https://www.w3.org/TR/xlink11/)
*   [https://www.w3.org/TR/xptr/](https://www.w3.org/TR/xptr/)
*   [http://www.w3schools.com/xml/xml_xlink.asp](http://www.w3schools.com/xml/xml_xlink.asp)
*   [https://www.w3.org/TR/xinclude/](https://www.w3.org/TR/xinclude/)

# c++ - OpenGL坐标问题

> ID：623127
> 
> 赞同：1
> 
> 时间：2009-03-08T05:42:30.973
> 
> 标签：c++, opengl, glut

我正在创建一个简单的 2D OpenGL 应用程序，但我似乎遇到了一些相机问题。当我在 (20,20) 处绘制一个矩形时，它会在 (25,20) 左右绘制。当我在 (100, 20) 处绘制它时，它被绘制在 125 左右。由于某些原因，一切都向右移动了几个%。

我在这里粘贴了一个精简版 [http://pastebin.com/m56491c4c](http://pastebin.com/m56491c4c)

我设置 GLUT 的方式有问题吗？我知道这不是我的对象在做任何奇怪的事情，因为当我禁用它们时也会发生同样的事情。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T06:31:38.033

需要在reshape函数( `resize()`)里面设置投影矩阵，这也自动解决了用户调整窗口大小的问题：

```
void resize(int w, int h)
{
  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();
  gluOrtho2D(0, w, h, 0);
} 
```

然后在你的绘图函数中，确保矩阵模式是模型视图：

```
void draw()
{
  glMatrixMode(GL_MODELVIEW);
  glLoadIdentity();
  ...
} 
```

您的代码的其他问题：

*   您可能不应该`glutPostRedisplay()`在`draw()`. 这将使您的 CPU 以 100% 运行。您可以改为`glutTimerFunc()`每隔几毫秒进行一次更新。
*   在`processMouse()`中，您在s`wsprintf()`数组上使用`char`：`wsprintf()`接受一个宽字符数组 ( `wchar_t`)，因此您应该制作`s`type的局部变量`wchar_t[]`，或者使用`sprintf()`and`MessageBoxA()`而不是`wsprintf()`and `MessageBoxW()`（`MessageBox()`在编译 Unicode 应用程序时扩展为宏，我假设你正在这样做）。您也容易受到缓冲区溢出的影响——您应该使用至少 12 个字符的缓冲区，即使实际上您永远不会被传递一个非常大的`x`值。最后，您还应该使用`snprintf()/wsnprintf()`代替`sprintf()/wsprintf()`来防止缓冲区溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T06:06:36.110

你似乎在你的 ModelView 矩阵上调用你的 glOrtho2D 。我怀疑这就是问题所在（因为我猜在这种情况下，你的 Projection 应该是身份），但你仍然应该在你的 Projection 矩阵上调用它。

您还应该在 resize 调用中打印出 w 和 h ，以确保您的窗口大小实际上是您认为的那样（我不知道 glut 是如何工作的，但 glutInitWindowSize() 可能包含边框，这会搞砸事情向上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T06:45:46.360

这取决于您正在使用的系统，但通常大多数 Windows 坐标系从左下角开始，从上到右计数。在这种情况下，您的 gluOrth02D 调用将是错误的。

你有：

```
gluOrtho2D(0, appWidth, appHeight, 0); 
```

其中窗口的顶部映射到底部，反之亦然。

大多数时候是：

```
gluOrtho2D(0, appWidth, 0, appHeight); 
```

正如我所说，这取决于您使用的系统和平台。我只能代表大多数 linux 实现。

只是要检查其他东西，以防它影响您的错误。

# git - Git 和 Trac（或类似的）

> ID：623130
> 
> 赞同：45
> 
> 时间：2009-03-08T05:45:18.033
> 
> 标签：git, version-control, github, bug-tracking

过去，我非常喜欢将[Trac](http://trac.edgewall.org/)与托管在我自己的一些服务器上的颠覆存储库一起使用。票务和在线代码浏览一体化，非常方便。

我在一些公共项目中使用了[github](http://github.com)，但我没有钱购买额外的服务，尤其是当我已经为远程 VPS 托管付费时。

有谁知道或有任何经验使用 git 版本控制设置诸如 Trac 之类的东西？具体来说，我已经可以推送到远程服务器，但我想要一些 Web 界面，允许我（以及与我一起工作的人）在线查看代码库的提交和当前状态，而无需公开项目。我知道[GitPlugin](http://trac-hacks.org/wiki/GitPlugin)但无法成功启动并运行它。还有其他建议吗？

需要集成票务（和 wiki），但不是绝对必要的。

**编辑：**

在多玩了 GitPlugin 和 Trac 之后，我已经能够启动并运行它。主要问题是我需要通过在 trac.ini 中执行类似的操作来为 trac 环境显式启用插件：

```
[components]
# for version 0.10
gitplugin.* = enabled
# for version 0.11
tracext.git.* = enabled 
```

我也可以尝试[Redmine](http://www.redmine.org/)和[CGit](http://hjemli.net/git/cgit/)，因为这看起来就像其他软件一样，可以满足我的需求。欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-03-08T15:15:13.123

你应该看看 Redmine ( [http://www.redmine.org/](http://www.redmine.org/) )。它具有您提到的所有功能以及更多功能。您可以在自己的 vps 上托管它（我愿意）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-09T01:17:36.017

我们使用 Trac 和两个 Git 插件——GitPlugin 和 GitWebPlugin。看，我们实际上有三个存储库（长篇大论），而 Trac 仍然仅限于一个存储库。因此，我编写了自己的插件，它定义了 wiki 语法（实际上是宏），用于引用存储库、分支或提交，这些链接指向 GitWebPlugin 链接。我还能够编写一些 git 钩子脚本，以便我们可以在提交消息中引用、关闭或修改 Trac 票证——它是 Trac 附带的 SVN 提交钩子的修改版本。

GitPlugin 的主要问题是由于缺少“libgit”库而运行缓慢。对于中小型项目来说这还不错，但大型项目是一种痛苦。如果你真的需要一个快速的网络界面，你真的应该看看[Cgit](http://hjemli.net/git/cgit/)。Cgit 使其成为自己的 libgit，因此它与特定版本的 Git 相关联。

**然而，事实**是，基于 Web 的 Git 视图并没有那么有用，除非您想向某人发送链接（例如在电子邮件或 IRC 中）。因为使用 Git，您在每个克隆中都拥有完整的存储库，因此您最好使用类似`gitk`甚至普通 ol' 之类的工具`git log`。查询和 grepping 功能真的很棒而且（显然）很快。我发现 Cgit 和 GitWeb 真的只对发送提交链接有用，而且这种情况很少见。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-07-06T13:26:46.963

提示：获得 Trac 票务功能的完全不同的方法是[ditz](http://ditz.rubyforge.org/)。

“Ditz 是一个简单、轻量级的分布式问题跟踪器，旨在与 git、darcs、Mercurial 和 Bazaar 等分布式版本控制系统一起使用。”

**您的票与您的代码一起存在**。不可能失去一个而拥有另一个；这是一件好事。类似 Trac 的网站是由`ditz`命令行工具生成的。

我很喜欢。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-07-13T01:27:13.960

自从提出这个问题以来，GitHub 现在已经集成了问题跟踪。有点轻巧，但对我来说这是一个奖励。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-20T23:04:16.050

我们正在使用[GitLab](http://gitlabhq.com/)，它是一个开源的 GitHub 克隆。它有

1.  在线代码浏览（同 GitHub 滑动树）。
2.  问题跟踪。
3.  维基。
4.  您还可以通过它管理项目权限。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-03-08T07:19:59.150

**[Assembla](https://www.assembla.com/)**免费提供 wiki、门票和其他东西，并允许与**[Github 集成](http://www.assembla.com/catalog/13-Assembla-Ticketing-for-Github-Package)**。如果您不想使用 Github，您可以将普通**[Git 与 Assembla](http://www.assembla.com/catalog/21-Git-with-Integrated-Tickets-Package)**一起使用（以及您在任何其他项目中获得的所有好东西）。

定价也很便宜（“每个团队成员每月 2 美元”）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2011-03-01T18:14:26.483

为了完整性： http: [//gitorious.org/](http://gitorious.org/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-03-08T05:48:41.800

[Gitweb](http://git.or.cz/gitwiki/Gitweb)可以很好，但它没有集成票务或 wiki 或类似的东西。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2011-04-05T14:47:55.370

[http://mtrack.wezfurlong.org/](http://mtrack.wezfurlong.org/) simil Trac 支持 Git

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-07-31T05:49:15.297

Github 的 Trac postreceive 挂钩现已修复：http: [//support.github.com/discussions/post-receive-issues/118-trac-service-hook](http://support.github.com/discussions/post-receive-issues/118-trac-service-hook)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-08T05:56:46.993

前几天我在搜索时发现了这个，但我还没有亲自使用它，所以我不能保证它。

[http://www.indefero.net/](http://www.indefero.net/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-03-08T06:44:46.613

gitweb 很棒且易于设置，git gui 也不错

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-06-21T17:11:04.620

顺便说一句，使用[InDefero](http://indefero.net "简单的软件锻造")，您可以使用 250MB 可用空间和无限私人/公共项目的托管方式。托管选项提供 Git 和 Subversion，但遗憾的是还没有 Mercurial：/

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-03-08T06:00:59.493

我运行 Trac + Perforce，我会继续尝试让 GitPlugin 工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-07-27T08:13:43.773

[JavaForge](http://www.javaforge.com)还提供**免费的 Git 托管，具有 Trac 的所有功能**以及更多功能。

如果您想为您的项目进行托管，您还可以下载并安装[支持 JavaForge 的软件。](http://www.intland.com/products/codebeamer/overview/)

（免责声明：软件本身是商业产品，我们是它背后的公司。）

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2012-06-01T04:43:13.040

[这对http://www.lowendbox.com/blog/running-trac-git-hosting-on-a-low-end-vps/](http://www.lowendbox.com/blog/running-trac-git-hosting-on-a-low-end-vps/)有很大帮助，应该让您指出正确的方向以使事情正常运行。

# c# - 从用户控件调用父页面中的方法

> ID：623136
> 
> 赞同：42
> 
> 时间：2009-03-08T05:52:59.653
> 
> 标签：c#, asp.net, user-controls, webusercontrol

我在`aspx`页面中注册了一个用户控件在用户控件中的按钮的单击事件中，我如何调用父页面的代码隐藏中存在的方法？

谢谢。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2009-03-08T10:07:06.547

这是 Freddy Rios 建议的使用事件的经典示例（来自 Web 应用程序项目的 C#）。这假设您想要使用现有的委托而不是自己创建委托，并且您没有通过事件参数传递任何特定于父页面的内容。

在用户控件的代码隐藏中（如果不使用代码隐藏或 C#，则根据需要进行调整）：

```
public partial class MyUserControl : System.Web.UI.UserControl
{
    public event EventHandler UserControlButtonClicked;

    private void OnUserControlButtonClick()
    {
        if (UserControlButtonClicked != null)
        {
            UserControlButtonClicked(this, EventArgs.Empty);
        }
    }

    protected void TheButton_Click(object sender, EventArgs e)
    {
        // .... do stuff then fire off the event
        OnUserControlButtonClick();
    }

    // .... other code for the user control beyond this point
} 
```

在页面本身中，您使用以下内容订阅事件：

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        // hook up event handler for exposed user control event
        MyUserControl.UserControlButtonClicked += new  
                    EventHandler(MyUserControl_UserControlButtonClicked);
    }
    private void MyUserControl_UserControlButtonClicked(object sender, EventArgs e)
    {
        // ... do something when event is fired
    }

} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-03-08T05:54:10.370

将页面转换为项目中的特定页面：

```
((MyPageName)this.Page).CustomMethod() 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-08T06:34:05.920

我建议您不要直接调用 page 方法，因为您会将控件绑定到特定页面。

而是公开一个事件，并让页面订阅它。它适用于任意数量的页面，当控件在单个页面上多次（甚至可能在列表上）时更容易使用，并且更符合 asp.control 设计。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-29T11:36:45.810

遵循良好和适当的方法，

使用事件和委托概念使委托与父页面中的方法具有相同的签名，然后在父页面加载事件中为其分配父方法，然后通过用户控件中的事件调用此委托。

代码示例和链接如下。

```
//Parent Page aspx.cs part

 public partial class getproductdetails : System.Web.UI.Page
 {
  protected void Page_Load(object sender, EventArgs e)
  {
   ucPrompt.checkIfExist += new uc_prompt.customHandler(MyParentMethod);
  }

  bool MyParentMethod(object sender)
  {
   //Do Work
  }
}

//User control parts
public partial class uc_prompt : System.Web.UI.UserControl
{
 protected void Page_Load(object sender, EventArgs e)
 {
 }

 public delegate bool customHandler(object sender);
 public event customHandler checkIfExist;
 protected void btnYes_Click(object sender, EventArgs e)
 {
  checkIfExist(sender);
 }
} 
```

***阅读更多详细信息它是如何工作的（参考）：-***

[从用户控件调用父页面的方法](http://www.dotnetbull.com/2013/03/calling-method-of-parent-page-from-user.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-08-13T09:36:24.050

[Scott Allen](https://stackoverflow.com/users/17210/odetocode2)有一篇关于从用户控件到父页面的事件冒泡的有用文章，详细阐述了[Stephen M. Redd](https://stackoverflow.com/users/10115/stephen-m-redd)提供的答案：

*   [来自 ASP.NET (C#) 中的 Web 用户控件的事件冒泡](http://www.odetocode.com/code/94.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-14T08:50:03.463

我想做这个场景：

*   调用`LoadEditCategory`方法（父方法）。
*   父方法 ( `LoadEditCategory`) 需要一个`int`参数 ( `CategoryID`)。
*   子用户控件`RightControlPanel`位于同一父页面文件夹中。

**子用户控制**

1- 添加`Action`( `_LoadEditCategory`)

`public Action<int> _LoadEditCategory = null;`

`<int>`是`int`参数 ( `CategoryID`)。

2-`Action`在按钮事件（`btnSave`按钮名称）中使用它，如下所示：

```
void btnSave_Click(object sender, EventArgs e)
{
    //123 is test integer for CategoryID
    _LoadEditCategory(123);        
} 
```

**父页面或父用户控件**

3-添加父方法

```
 private void LoadEditCategory(int CategoryID)
    {
     // CategoryID is 123 in my example
     //Do some things with CategoryID
    } 
```

4-加载子用户控件时添加此代码（`RightControlPanel`）

```
//Load child user control
RightControlPanel si = this.LoadControl(this.ControlPath + "RightControlPanel.ascx") as RightControlPanel;
if (si != null) 
 {
   ...

   //For call parent method in child user control
   si._LoadEditCategory = c => LoadEditCategory(c);

   ...
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-10T14:53:28.160

```
 //c#
 //In parent page
 public void test(string S)
 {
    Label1.Text = S;
  }

 //In user control
 protected void Button1_Click(object sender, System.EventArgs e)
 {
 //Calling "test method" of parent page  from user control  
 ((object)this.Page).test("Hello!!");
 }

 'VB.Net 
'In parent page
 Sub test(ByVal S As String)
    Label1.Text = S
 End Sub

 'In user control
  Protected Sub Button1_Click(sender As Object, e As System.EventArgs) Handles Button1.Click
  'Calling "test method" of parent page  from user control  
  DirectCast(Me.Page, Object).test("Hello!!")
  End Sub 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-07T23:45:20.243

我在这里发布了一些有用的东西：[访问控制>页面>主嵌套>主](https://stackoverflow.com/questions/1028937/how-can-i-get-the-parent-page-from-a-user-control-in-an-asp-net-website-not-web/54412216#54412216)

或者如果你想访问一个控件，你也可以这样做：

更新父页面 父页面有一个名为“UpdatePanel1”的更新面板

控制

```
UpdatePanel onParent1 = (UpdatePanel)Parent.FindControl("UpdatePanel1");
onParent1.Update(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-15T18:30:35.360

我喜欢 Stephen M. Redd 的回答，不得不将其转换为 VB。在这里分享。欢迎提出修改建议。

在用户控件的代码隐藏中：

```
Public Class MyUserControl
    Inherits System.Web.UI.UserControl

    'expose the event publicly
    Public Event UserControlButtonClicked As EventHandler 

    'a method to raise the publicly exposed event
    Private Sub OnUserControlButtonClick()

        RaiseEvent UserControlButtonClicked(Me, EventArgs.Empty)

    End Sub

    Protected Sub lbtnApplyChanges_Click(sender As Object, e As EventArgs) Handles lbtnApplyChanges.Click

        'add code to run here, then extend this code by firing off this event
        'so it will trigger the public event handler from the parent page, 
        'and the parent page can hanlde it

        OnUserControlButtonClick()

    End Sub

End Class 
```

在父页面订阅事件，因此当事件引发时，您的代码将在此处运行。

```
Public Class SalesRecord
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        'hook up event handler for exposed user control event to handle this
        AddHandler MyUserControl.UserControlButtonClicked, AddressOf MyUserControl_UserControlButtonClicked

    End Sub

    ''' <summary>
    ''' code to run when user clicks 'lbtnApplyChanges' on the user control
    ''' </summary>

    Private Sub MyUserControl_UserControlButtonClicked()

        'this code will now fire when lbtnApplyChanges_Click executes

    End Sub

End Class 
```

* * *

## 回答 #10

> 赞同：-7
> 
> 时间：2011-02-18T06:34:04.863

您可以使用 Session 。说当您单击用户控件中的按钮以及想要调用父页面方法时，然后在按钮单击的事件处理程序中将值设置为

```
Session["CallParent"]="someValue"; 
```

作为按钮将回发页面。在父页面的 Page_Load 事件上添加它

```
protected void Page_Load(object sender,EventArgs e)
{
   if(Session["CallParent"]!=null)
   {
      // here call the Parent Page method 
      Method1();
      // now make the session value null
     Session["CallParent"]=null;
    }
} 
```

它效率更高

# asterisk - 星号 TDM410

> ID：623142
> 
> 赞同：1
> 
> 时间：2009-03-08T05:59:57.140
> 
> 标签：asterisk, ivr

这本身不是一个编程问题。我正在尝试构建一个包含以下内容的系统：

1.  用户使用常规固定电话呼叫系统
2.  一些处理由星号完成
3.  呼叫被转移到外部号码（另一个固定电话/手机）

现在我想要至少 2 条用户可以同时调用的线路。我想知道以下内容：

1.  TDM410 能否实现我想要实现的目标？
2.  既然我想要呼叫转移，我需要额外的线路吗？或者我可以在同一条线上做吗？例如，对于一个用户，我需要一根进线和一根出线，还是可以在同一条线上同时进行接收和转发？

我有两本星号书，但仍不清楚要购买哪张卡。带有 4 个 FXO 的 TDM410 是正确的吗？我正在考虑 TDM410，因为它有 4 条线路，因此我可以使用两条用于传入，两条用于传出。我对吗？有人可以指点我一个链接/在线商店吗？

非常感谢您的宝贵时间。

PS-我不想使用 SIP。我想在所有通话中使用 POTS（呼入和呼出）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-10T16:12:58.710

带有 4 个 FXO 模块的 TDM400 可以满足您的需求。

当您在一条线路上接听电话时，该线路占线，您必须使用另一条线路转接呼叫（Asterisk 将桥接呼叫，但需要 2 条线路）。[您可以直接从 Digium](http://store.digium.com/productview.php?product_code=1TDM404EF)购买它们。

如果您希望能够接听来自 2 条线路的电话，您至少需要 3 条固定电话；第三条线路将是您用来转接呼叫的线路，但一次只能转接一个呼叫，而其他人将不得不等待。如果你不想要，那么你需要 4 个固定电话。

# database - 描述大型商业网站（如 Amazon.com）基础设施的好文章？

> ID：623149
> 
> 赞同：13
> 
> 时间：2009-03-08T06:10:06.943
> 
> 标签：database, web, amazon

谁能指出我如何建立像 amazon.com 这样的大型商业网站？最重要的是，我想知道数据库是如何设置的。他们是否有一组分布式数据库来平衡负载，所有这些都将更新发送到一个“主”数据库等？不必是内部涂料（尽管这更可取），只是对聪明人如何经营 amazon.com 的合理描述。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-08T06:13:11.790

这可能对你有用..

[http://highscalability.com/amazon-architecture](http://highscalability.com/amazon-architecture)

此外，本网站还包含有关其他高容量网站的架构信息。

另请观看此视频 [Amazon.com 技术平台：创新的基石。](http://www.infoq.com/presentations/vogels-amazon-platform)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T07:25:01.803

[软件工程电台](http://www.se-radio.net/)的伙计们对 amazon.com 的首席技术官Werner Vogels进行了[采访播客。](http://www.se-radio.net/podcast/2006-12/episode-40-interview-werner-vogels)

相当有趣和很多细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T07:13:04.267

再看看这两个：

1.  [Dan Pritchett 在 eBay 上谈建筑](http://www.infoq.com/interviews/dan-pritchett-ebay-architecture)
2.  [Randy Shoup 讨论 eBay 架构](http://www.infoq.com/interviews/shoup-ebay-architecture)

# sql-server - 从 SQL 中的字符串中删除 SSN（社会安全号码）

> ID：623154
> 
> 赞同：2
> 
> 时间：2009-03-08T06:22:57.927
> 
> 标签：sql-server, regex

我在 MS 2000 SQL 数据库中有一个字符串，需要使用选择语句删除 SSN。我没有使用外部应用程序的选项。另一个有趣的部分是 SSN 的位置并不总是相同的。

```
[B-Day][First Name][SSN][POB]
12121970John123-45-6789Las Vages 
```

或者

```
[B-Day][First Name][Last Name][SSN][POB]
12121970JohnDoe123-45-6789Las Vages 
```

我需要各种 SQL 的 RegEx！

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T06:29:57.817

假设您可以访问服务器本身，[这里有一篇文章](http://www.sqlteam.com/article/regular-expressions-in-t-sql)描述了如何使用 VBScript 将正则表达式函数添加到 MSSQL 2000。从那里匹配 SSN 的正则表达式非常简单 ( `[0-9]{3}-[0-9]{2}-[0-9]{4}`)。您可能需要扩展文章中提供的功能以支持替换和匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T06:52:32.787

 `````
SELECT substring(a, 1, PatIndex('%[0-9][0-9][0-9]-%', a) - 3)  
+ substring(a, PatIndex('%[0-9][0-9][0-9]-%', a) + 9, 100) FROM myTable

````  `myTable 是表，“a”是列名。

编辑：当然有一些关于社会安全号码格式的假设。另外，我添加了一个任意数字 100 来选择字符串到最后。如果您的字符串不止于此，您可以增加它。

# c# - 我有错误的哈希值？C# 密码学

> ID：623159
> 
> 赞同：2
> 
> 时间：2009-03-08T06:31:09.297
> 
> 标签：c#, hash, cryptography

我的文本文件说 The quick brown fox jumps over the lazy dog，但是当我尝试从这个文件中获取哈希时，md5 和 sha1 都与维基百科的结果不同。我有 3 个问题。1）我在代码中做错了什么？2）我怎样才能更好地拥有这段代码？（我需要初始化吗） 3）我怎么加盐？

```
 {
        const int bufSize = 1024 * 8;
        int read;
        byte[] buf = new byte[bufSize];
        string fn = @"b.txt";
        byte[] result1 = new byte[0];
        byte[] result2 = new byte[0];
        SHA1 sha = new SHA1CryptoServiceProvider();
        MD5  md5 = new MD5CryptoServiceProvider();
        sha.Initialize();
        md5.Initialize();
        FileStream fin = File.OpenRead(fn);
        while ((read = fin.Read(buf, 0, buf.Length)) != 0)
        {
            result1 = sha.ComputeHash(buf);
            result2 = md5.ComputeHash(buf);
        }
        fin.Close();
        MessageBox.Show(myFunc(result1));
        MessageBox.Show(myFunc(result2));
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-08T07:17:35.987

（编辑：现在处理散列算法。我怀疑这是不必要的，但这是一个很好的做法:)

您正在为*整个*缓冲区调用 ComputeHash，即使您应该只对已读取的缓冲区部分进行哈希处理。此外，您正在为每次调用 Read 计算一个新的哈希值。

这里有一些非常简单的代码来计算哈希：

```
using System;
using System.IO;
using System.Security.Cryptography;

class Test
{
    static void Main()
    {
        byte[] plaintext = File.ReadAllBytes("b.txt");
        using (MD5 md5 = MD5.Create())
        {
            byte[] md5Hash = md5.ComputeHash(plaintext);
            Console.WriteLine(BitConverter.ToString(md5Hash));
        }

        using (SHA1 sha1 = SHA1.Create())
        {
            byte[] sha1Hash = sha1.ComputeHash(plaintext);
            Console.WriteLine(BitConverter.ToString(sha1Hash));
        }
    }
} 
```

这会根据维基百科给出结果 - 请注意，`b.txt`它的末尾不应有换行符。

获取二进制数据的另一种方法是：

```
byte[] plaintext = Encoding.ASCII.GetBytes(
    "The quick brown fox jumps over the lazy dog"); 
```

请注意，这只是一次性计算哈希的简单方法。如果您想以流式方式执行此操作（即您读取一些数据，将其添加到哈希，读取更多数据等），那么您可以使用[`ComputeHash(Stream)`](http://msdn.microsoft.com/en-us/library/xa627k19.aspx)重载或（如果您想“推送”数据）你可以使用`TransformBlock`and `TransformFinalBlock`，像这样：

```
using System.Text;

class Test
{
    static void Main()
    {
        using (MD5 md5 = MD5.Create())
        using (SHA1 sha1 = SHA1.Create())
        using (Stream input = File.OpenRead("b.txt"))
        {
            // Artificially small to make sure there's
            // more than one read
            byte[] buffer = new byte[4];
            int bytesRead;

            while ((bytesRead = input.Read(buffer, 0, buffer.Length)) > 0)
            {
                md5.TransformBlock(buffer, 0, bytesRead, null, 0);
                sha1.TransformBlock(buffer, 0, bytesRead, null, 0);
            }
            md5.TransformFinalBlock(buffer, 0, 0);
            sha1.TransformFinalBlock(buffer, 0, 0);

            Console.WriteLine(BitConverter.ToString(md5.Hash));
            Console.WriteLine(BitConverter.ToString(sha1.Hash));
        }
    }
} 
```

请注意我们传递的方式`null`，`TransformBlock`因为我们不需要任何输出，并且我们不转换最终块中的任何数据。根据您之前的评论，我怀疑这是您要使用的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T06:33:58.183

关于不同的结果，它可能取决于您在文本中使用的字符编码，因为这些哈希算法处理字节。

至于改进你的代码，你并没有处理你的 CryptoServiceProviders。[从HashAlgorithm](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hashalgorithm.aspx)继承的所有内容都实现了[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，并且需要在完成后处理它，方法是使用[using()](http://msdn.microsoft.com/en-us/library/yh598w02(VS.80).aspx)或直接调用[Dispose()](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)。您也没有处理 FileStream，它对 IDisposable 有相同的要求。

# php - 帮助基本 .htaccess mod_rewrite

> ID：623161
> 
> 赞同：0
> 
> 时间：2009-03-08T06:31:41.167
> 
> 标签：php, apache, .htaccess

我目前正在用 php 解释子域通配符，我想用 .htaccess 处理它们，用户配置文件将在[http://username.mysite.com/](http://username.mysite.com/)（或某些人[http://www. username.mysite.com/](http://www.username.mysite.com/)）应该使用 /main.php?action=profile

最难的部分是让 /error/i+am+a+test+message 或 /files/iamatestfile.jpg 转到 &error=i+am+a+test+message 或 &files=iamatestfile.jpg

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T06:40:20.990

尝试：

```
 RewriteRule ^error/(.*) index.php?error=$1 [L]
 RewriteRule ^file/(.*) index.php?file=$1 [L] 
```

...对于最后两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T18:08:46.577

尝试这个：

```
# stop rewriting for the host names example.com and www.example.com
RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$
RewriteRule ^ - [L]

RewriteRule ^error/(.*) index.php?error=$1 [L]
RewriteRule ^file/(.*) index.php?file=$1 [L] 
```

# .net - 在 Mac 上转换为 Mono

> ID：623163
> 
> 赞同：2
> 
> 时间：2009-03-08T06:33:23.487
> 
> 标签：.net, macos, mono, pinvoke

我有一个用 .NET 2.0 编写的项目（好吧，无论如何，它并没有像 3.5 那样使用太多功能），我最近有一台 Mac，想将该项目转换为 Mono。

问题是，这个项目依赖于诸如[FreeImage](http://freeimage.sourceforge.net/)之类的库和我为这个项目编写的一些 C++ 库。我完全是在 Mac 上编程的新手；我怎样才能将这些库链接到这个项目中，以便 p/invoke 调用不会失败？如果需要，我可以再次编译所有库，那么我应该将库放入什么格式，我应该使用任何特定的工具吗？在 Visual Studio 端编码时，我只是将库作为项目放在与 .NET 代码相同的解决方案中。Mac 上是否存在类似的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T07:01:28.413

此[页面](http://www.mono-project.com/Interop_with_Native_Libraries)可能会有所帮助。解释 Interop 如何在 OS X（和其他操作系统）上工作。

# .net - 远程点网应用

> ID：623168
> 
> 赞同：1
> 
> 时间：2009-03-08T06:35:04.450
> 
> 标签：.net, azure

我听说过远程点网应用程序。据我所知，该应用程序在客户端工作，而它在服务器上。这意味着客户端无法访问代码，还需要连接到服务器才能访问应用程序。我不确定，是不是这个目的。它也与 Windows Azure 有关系吗？一些澄清和链接表示赞赏和感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T06:51:59.200

我不太确定你的问题是什么。但是，您可能想查看 .NET Remoting，[在此处阅读来自代码项目的文章](http://www.codeproject.com/KB/IP/Net_Remoting.aspx)

Windows Azure 是一个基于云的操作系统并在云上提供各种 .NET 服务，请阅读Justin Etheredge 的[Windows Azure - Breaking It Down](http://www.codethinked.com/post/2009/01/14/Windows-Azure-Breaking-It-Down.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T06:55:55.790

以下是一些形式的远程应用程序（不确定您指的是哪一种）：

*   您可以从网络共享构建/运行 .net 应用程序（有限制）
*   单击一次，允许您在网页上提供简单的安装程序链接，并具有自动更新功能
*   silverlight - 浏览器中类似 Flash 的界面（不完全是，但我发现的最简单的说法）
*   Azzure：您可以在网络上托管 .net 应用程序，但这更多的是公开/使用各种服务并将其公开在网络上（与实际远程运行它没有关系，例如网络共享案例）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T06:57:43.447

[Azure](http://en.wikipedia.org/wiki/Windows_Azure)是[云计算](http://en.wikipedia.org/wiki/Cloud_platform)，它是[智能](http://msdn.microsoft.com/en-us/library/cc540671.aspx) [瘦客户端](http://en.wikipedia.org/wiki/Smart_client)的升级版。另外我想指出，智能瘦客户端不必像通常被误解的那样在浏览器中运行。

# javascript - 如何使用 JavaScript 获取图像大小（高度和宽度）？

> ID：623172
> 
> 赞同：695
> 
> 时间：2009-03-08T06:41:13.673
> 
> 标签：javascript, jquery, image

是否有任何 JavaScript 或 jQuery API 或方法来获取页面上图像的尺寸？

* * *

## 回答 #1

> 赞同：863
> 
> 时间：2009-03-09T14:44:11.180

您可以使用 Javascript 以编程方式获取图像并检查尺寸...

```
const img = new Image();
img.onload = function() {
  alert(this.width + 'x' + this.height);
}
img.src = 'http://www.google.com/intl/en_ALL/images/logo.gif';
```

如果图像不是标记的一部分，这可能很有用。

* * *

## 回答 #2

> 赞同：459
> 
> 时间：2009-03-08T06:45:10.900

[clientWidth](https://developer.mozilla.org/en/DOM/element.clientWidth)和[clientHeight](https://developer.mozilla.org/en/DOM/element.clientheight)是 DOM 属性，显示 DOM 元素内部尺寸的当前浏览器内大小（不包括边距和边框）。因此，对于 IMG 元素，这将获得可见图像的实际尺寸。

```
var img = document.getElementById('imageid'); 
//or however you get a handle to the IMG
var width = img.clientWidth;
var height = img.clientHeight; 
```

* * *

## 回答 #3

> 赞同：419
> 
> 时间：2009-03-08T07:22:17.210

此外（除了雷克斯和伊恩的答案）还有：

```
imageElement.naturalHeight 
```

和

```
imageElement.naturalWidth 
```

这些提供图像文件本身的高度和宽度（而不仅仅是图像元素）。

* * *

## 回答 #4

> 赞同：111
> 
> 时间：2011-03-01T21:38:20.527

如果您使用 jQuery 并且您正在请求图像大小，则必须等到它们加载，否则您只会得到零。

```
$(document).ready(function() {
    $("img").load(function() {
        alert($(this).height());
        alert($(this).width());
    });
}); 
```

* * *

## 回答 #5

> 赞同：103
> 
> 时间：2013-06-13T14:36:02.160

我认为更新这些答案很有用，因为投票最多的回复之一建议使用`clientWidth`和 clientHeight，我认为它现在已经过时了。

我用 HTML5 做了一些实验，看看实际返回了哪些值。

首先，我使用了一个名为 Dash 的程序来大致了解图像 API。它指出`height`和`width`是图像的渲染高度/宽度，并且`naturalHeight`和`naturalWidth`是图像的固有高度/宽度（并且仅适用于 HTML5）。

我使用了一个美丽蝴蝶的图像，来自一个高度为 300 和宽度为 400 的文件。还有这个 Javascript：

```
var img = document.getElementById("img1");

console.log(img.height,           img.width);
console.log(img.naturalHeight,    img.naturalWidth);
console.log($("#img1").height(),  $("#img1").width()); 
```

然后我使用了这个 HTML，内联 CSS 用于高度和宽度。

```
<img style="height:120px;width:150px;" id="img1" src="img/Butterfly.jpg" /> 
```

结果：

```
/*Image Element*/ height == 300         width == 400
           naturalHeight == 300  naturalWidth == 400
/*Jquery*/      height() == 120       width() == 150

/*Actual Rendered size*/    120                  150 
```

然后，我将 HTML 更改为以下内容：

```
<img height="90" width="115" id="img1" src="img/Butterfly.jpg" /> 
```

即使用高度和宽度属性而不是内联样式

结果：

```
/*Image Element*/ height ==  90         width == 115
           naturalHeight == 300  naturalWidth == 400
/*Jquery*/      height() ==  90       width() == 115

/*Actual Rendered size*/     90                  115 
```

然后，我将 HTML 更改为以下内容：

```
<img height="90" width="115" style="height:120px;width:150px;" id="img1" src="img/Butterfly.jpg" /> 
```

即同时使用属性和CSS，看看哪个优先。

结果：

```
/*Image Element*/ height ==  90         width == 115
           naturalHeight == 300  naturalWidth == 400
/*Jquery*/      height() == 120       width() == 150

/*Actual Rendered size*/    120                  150 
```

* * *

## 回答 #6

> 赞同：66
> 
> 时间：2009-03-08T06:45:41.697

使用 JQuery 你可以这样做：

```
var imgWidth = $("#imgIDWhatever").width(); 
```

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2009-03-08T16:53:08.677

所有其他人都忘记的是，您无法在加载之前检查图像大小。当作者检查所有发布的方法时，它可能只在本地主机上工作。由于这里可以使用 jQuery，请记住在加载图像之前触发 'ready' 事件。$('#xxx').width() 和 .height() 应该在 onload 事件或之后触发。

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2009-08-04T11:50:29.137

您只能使用加载事件的回调来真正做到这一点，因为图像的大小在实际完成加载之前是未知的。类似于下面的代码...

```
var imgTesting = new Image();

function CreateDelegate(contextObject, delegateMethod)
{
    return function()
    {
        return delegateMethod.apply(contextObject, arguments);
    }
}

function imgTesting_onload()
{
    alert(this.width + " by " + this.height);
}

imgTesting.onload = CreateDelegate(imgTesting, imgTesting_onload);
imgTesting.src = 'yourimage.jpg'; 
```

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2019-05-01T09:33:46.713

让我们将在这里学到的所有内容组合成一个简单的函数 ( `imageDimensions()`)。它使用[承诺](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)。

```
// helper to get dimensions of an image
const imageDimensions = file => 
    new Promise((resolve, reject) => {
        const img = new Image()

        // the following handler will fire after the successful loading of the image
        img.onload = () => {
            const { naturalWidth: width, naturalHeight: height } = img
            resolve({ width, height })
        }

        // and this handler will fire if there was an error with the image (like if it's not really an image or a corrupted one)
        img.onerror = () => {
            reject('There was some problem with the image.')
        }

        img.src = URL.createObjectURL(file)
})

// here's how to use the helper
const getInfo = async ({ target: { files } }) => {
    const [file] = files

    try {
        const dimensions = await imageDimensions(file)
        console.info(dimensions)
    } catch(error) {
        console.error(error)
    }
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.0.0-beta.3/babel.min.js"></script>

Select an image:
<input
  type="file"
  onchange="getInfo(event)"
/>
<br />
<small>It works offline.</small>
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2019-06-27T07:42:57.087

假设，我们想得到图像尺寸`<img id="an-img" src"...">`

```
// Query after all the elements on the page have loaded.
// Or, use `onload` on a particular element to check if it is loaded.
document.addEventListener('DOMContentLoaded', function () {
  var el = document.getElementById("an-img");

  console.log({
    "naturalWidth": el.naturalWidth, // Only on HTMLImageElement
    "naturalHeight": el.naturalHeight, // Only on HTMLImageElement
    "offsetWidth": el.offsetWidth,
    "offsetHeight": el.offsetHeight
  }); 
```

**自然维度**

`el.naturalWidth`并将`el.naturalHeight`为我们提供[自然尺寸](https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-naturalwidth)，即图像文件的尺寸。

**布局尺寸**

`el.offsetWidth`并将`el.offsetHeight`获得我们在文档上呈现元素的尺寸。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2010-10-30T06:13:00.740

好的，我想我改进了源代码，以便能够在尝试找出其属性之前让图像加载，否则它将显示'0 * 0'，因为在文件加载之前会调用下一条语句浏览器。需要jquery...

```
function getImgSize(imgSrc){
    var newImg = new Image();
    newImg.src = imgSrc;
    var height = newImg.height;
    var width = newImg.width;
    p = $(newImg).ready(function(){
        return {width: newImg.width, height: newImg.height};
    });
    alert (p[0]['width']+" "+p[0]['height']);
} 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2017-03-08T13:11:23.200

[这个](https://stackoverflow.com/a/30035502/2715309)答案正是我想要的（在 jQuery 中）：

```
var imageNaturalWidth = $('image-selector').prop('naturalWidth');
var imageNaturalHeight = $('image-selector').prop('naturalHeight'); 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2016-04-08T06:43:27.417

使用[jQuery](https://jquery.com/)库-

使用`.width()`和`.height()`。

更多关于[jQuery 宽度](http://api.jquery.com/width/)和[jQuery 高度](http://api.jquery.com/height/)。

## 示例代码-

```
$(document).ready(function(){
    $("button").click(function()
    {
        alert("Width of image: " + $("#img_exmpl").width());
        alert("Height of image: " + $("#img_exmpl").height());
    });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

<img id="img_exmpl" src="http://images.all-free-download.com/images/graphicthumb/beauty_of_nature_9_210287.jpg">
<button>Display dimensions of img</button>
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2012-12-19T13:19:40.807

在使用真实图像大小之前，您应该加载源图像。如果您使用 JQuery 框架，您可以通过简单的方式获得真实的图像大小。

```
$("ImageID").load(function(){
  console.log($(this).width() + "x" + $(this).height())
}) 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2019-06-25T15:24:02.290

认为这可能对 2019 年使用 Javascript 和/或 Typescript 的一些人有所帮助。

**正如一些人所建议的，我发现以下内容是不正确的：**

```
let img = new Image();
img.onload = function() {
  console.log(this.width, this.height) // Error: undefined is not an object
};
img.src = "http://example.com/myimage.jpg"; 
```

**这是对的：**

```
let img = new Image();
img.onload = function() {
  console.log(img.width, img.height)
};
img.src = "http://example.com/myimage.jpg"; 
```

**结论：**

在函数中使用`img`, not 。`this``onload`

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2021-02-19T16:09:02.757

要获得自然高度和宽度：

```
document.querySelector("img").naturalHeight;
document.querySelector("img").naturalWidth;
```

```
<img src="img.png">
```

如果你想获得样式高度和宽度：

```
document.querySelector("img").offsetHeight;
document.querySelector("img").offsetWidth;
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2009-12-12T17:03:22.680

jQuery 答案：

```
$height = $('#image_id').height();
$width  = $('#image_id').width(); 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2014-10-14T14:37:51.563

最近我在 flex 滑块中遇到了同样的问题。由于加载延迟，第一张图片的高度设置得更小。我尝试了以下方法来解决该问题，并且有效。

```
// create image with a reference id. Id shall be used for removing it from the dom later.
var tempImg = $('<img id="testImage" />');
//If you want to get the height with respect to any specific width you set.
//I used window width here.
tempImg.css('width', window.innerWidth);  
tempImg[0].onload = function () {
    $(this).css('height', 'auto').css('display', 'none');
    var imgHeight = $(this).height();
    // Remove it if you don't want this image anymore.
    $('#testImage').remove();
}
//append to body
$('body').append(tempImg);
//Set an image url. I am using an image which I got from google.
tempImg[0].src ='http://aspo.org/wp-content/uploads/strips.jpg'; 
```

这将为您提供相对于您设置的宽度的高度，而不是原始宽度或零。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-11-05T09:29:47.733

这是 Node.js 的替代答案，这可能不是 OP 的意思，但可能会派上用场，并且似乎在问题的范围内。

这是一个使用 Node.js 的解决方案，该示例使用 Next.js 框架，但适用于任何 Node.js 框架。它使用[`probe-image-size`](https://github.com/nodeca/probe-image-size)NPM 包从服务器端解析图像属性。

**示例用例**：我使用以下代码从 Airtable 自动化脚本解析图像的大小，该脚本调用我自己的`analyzeImage`API 并返回图像的道具。

```
import {
  NextApiRequest,
  NextApiResponse,
} from 'next';
import probe from 'probe-image-size';

export const analyzeImage = async (req: NextApiRequest, res: NextApiResponse): Promise<void> => {
  try {
    const result = await probe('http://www.google.com/intl/en_ALL/images/logo.gif');

    res.json(result);
  } catch (e) {
    res.json({
      error: true,
      message: process.env.NODE_ENV === 'production' ? undefined : e.message,
    });
  }
};

export default analyzeImage; 
```

产量：

```
{
"width": 276,
"height": 110,
"type": "gif",
"mime": "image/gif",
"wUnits": "px",
"hUnits": "px",
"length": 8558,
"url": "http://www.google.com/intl/en_ALL/images/logo.gif"
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2012-04-19T15:09:43.750

Nicky De Maeyer 在背景图片后询问；我只是从 css 中获取它并替换“url()”：

```
var div = $('#my-bg-div');
var url = div.css('background-image').replace(/^url\(\'?(.*)\'?\)$/, '$1');
var img = new Image();
img.src = url;
console.log('img:', img.width + 'x' + img.height); // zero, image not yet loaded
console.log('div:', div.width() + 'x' + div.height());
img.onload = function() {
  console.log('img:', img.width + 'x' + img.height, (img.width/div.width()));
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-03-12T09:59:18.737

当页面在 js 或 jquery 中加载时，您可以应用 onload 处理程序属性，如下所示：-

```
$(document).ready(function(){
   var width = img.clientWidth;
   var height = img.clientHeight;

 }); 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2021-01-08T21:43:11.307

## 我在 jquery 中的两分钱

免责声明：这不一定回答这个问题，但会拓宽我们的能力。在 jQuery 3.3.1 中测试和工作

让我们考虑：

1.  您有图像 url/路径，并且想要获取图像的宽度和高度而不在 DOM 上呈现它，

2.  在 DOM 上渲染图像之前，您需要将 offsetParent 节点或图像 div 包装器元素设置为图像宽度和高度，以便为不同的图像尺寸创建流体包装器，即单击按钮以在 modal/lightbox 上查看图像时

我将这样做：

```
// image path
const imageUrl = '/path/to/your/image.jpg'

// Create dummy image to get real width and height
$('<img alt="" src="">').attr("src", imageUrl).on('load', function(){
    const realWidth = this.width;
    const realHeight = this.height;
    alert(`Original width: ${realWidth}, Original height: ${realHeight}`);
}) 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-11-24T16:31:22.660

也许这会帮助其他人。就我而言，我有一个`File`类型（保证是图像）并且我想要图像尺寸而不将其加载到 DOM 上。

一般策略：转换`File`为`ArrayBuffer`-> 转换`ArrayBuffer`为 base64 字符串 -> 将其用作具有`Image`类的图像源 -> 使用`naturalHeight`&`naturalWidth`获取尺寸。

```
const fr = new FileReader();
fr.readAsArrayBuffer(image); // image the the 'File' object
fr.onload = () => {
  const arrayBuffer: ArrayBuffer = fr.result as ArrayBuffer;

  // Convert to base64\. String.fromCharCode can hit stack overflow error if you pass
  // the entire arrayBuffer in, iteration gets around this
  let binary = '';
  const bytes = new Uint8Array(arrayBuffer);
  bytes.forEach(b => binary += String.fromCharCode(b));
  const base64Data = window.btoa(binary);

  // Create image object. Note, a default width/height MUST be given to constructor (per 
  // the docs) or naturalWidth/Height will always return 0.
  const imageObj = new Image(100, 100);
  imageObj.src = `data:${image.type};base64,${base64Data}`;
  imageObj.onload = () => {
    console.log(imageObj.naturalWidth, imageObj.naturalHeight);
  }
} 
```

这使您可以从 a 中获取图像尺寸和纵横比，`File`而无需渲染它。可以轻松地将`onload`函数转换为 RxJS Observables `fromEvent`，以获得更好的异步体验：

```
// fr is the file reader, this is the same as fr.onload = () => { ... }
fromEvent(fr, 'load') 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2016-03-26T02:31:45.360

简单地说，你可以像这样测试。

```
 <script>
  (function($) {
        $(document).ready(function() {
            console.log("ready....");
            var i = 0;
            var img;
            for(i=1; i<13; i++) {
                img = new Image();
                img.src = 'img/' + i + '.jpg';
                console.log("name : " + img.src);
                img.onload = function() {
                    if(this.height > this.width) {
                        console.log(this.src + " : portrait");
                    }
                    else if(this.width > this.height) {
                        console.log(this.src + " : landscape");
                    }
                    else {
                        console.log(this.src + " : square");
                    }
                }
            }
        });
    }(jQuery));
  </script> 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-03-09T07:37:18.770

您还可以使用：

```
var image=document.getElementById("imageID");
var width=image.offsetWidth;
var height=image.offsetHeight; 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2014-10-12T08:29:12.203

从父 div 中删除浏览器解释设置很重要。所以如果你想要真正的图像宽度和高度，你可以使用

```
$('.right-sidebar').find('img').each(function(){
    $(this).removeAttr("width");
    $(this).removeAttr("height");
    $(this).imageResize();
}); 
```

这是我的一个 TYPO3 项目示例，我需要图像的真实属性以正确的关系对其进行缩放。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-02-03T03:08:32.093

在获取元素的属性之前，应该先加载文档页面：

```
window.onload=function(){
    console.log(img.offsetWidth,img.offsetHeight);
} 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-09-29T15:03:17.823

```
var imgSrc, imgW, imgH;
function myFunction(image){
    var img = new Image();
    img.src = image;
    img.onload = function() {   
        return {
            src:image,
            width:this.width,
            height:this.height};
        }
    return img;
}
var x = myFunction('http://www.google.com/intl/en_ALL/images/logo.gif');
    //Waiting for the image loaded. Otherwise, system returned 0 as both width and height.
x.addEventListener('load',function(){
    imgSrc = x.src;
    imgW = x.width;
    imgH = x.height;
});
x.addEventListener('load',function(){
    console.log(imgW+'x'+imgH);//276x110
});
console.log(imgW);//undefined.
console.log(imgH);//undefined.
console.log(imgSrc);//undefined. 
```

这是我的方法，希望对你有帮助。:)

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-02-09T15:41:24.523

```
function outmeInside() {
var output = document.getElementById('preview_product_image');

 if (this.height < 600 || this.width < 600) {
     output.src = "http://localhost/danieladenew/uploads/no-photo.jpg";
     alert("The image you have selected is low resloution image.Your image width=" + this.width + ",Heigh=" + this.height + ". Please select image greater or equal to 600x600,Thanks!");
 } else {
     output.src = URL.createObjectURL(event.target.files[0]);

 }
 return;

 }

 img.src = URL.createObjectURL(event.target.files[0]);
} 
```

这项工作用于多个图像预览和上传。如果您必须一一选择每个图像。然后复制并粘贴到所有预览图像功能中并验证！

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-03-20T08:32:42.373

当我们选择正确的文件时，只需传递输入元素获得的 img 文件对象，它将给出图像的自然高度和宽度

```
function getNeturalHeightWidth(file) {
     let h, w;
     let reader = new FileReader();
      reader.onload = () => {
        let tmpImgNode = document.createElement("img");
        tmpImgNode.onload = function() {
          h = this.naturalHeight;
          w = this.naturalWidth;
        };
        tmpImgNode.src = reader.result;
      };
      reader.readAsDataURL(file);
    }
   return h, w;
} 
```

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2014-04-04T07:23:59.000

```
var img = document.getElementById("img_id");
alert( img.height + " ;; " + img .width + " ;; " + img .naturalHeight + " ;; " + img .clientHeight + " ;; " + img.offsetHeight + " ;; " + img.scrollHeight + " ;; " + img.clientWidth + " ;; " + img.offsetWidth + " ;; " + img.scrollWidth )
//But all invalid in Baidu browser  360 browser ... 
```

* * *

## 回答 #32

> 赞同：-2
> 
> 时间：2020-08-03T20:33:57.303

尝试

```
function sizes() {
  console.log(`width: ${pic.width}, height:${pic.height}`);
}
```

```
<img id="pic" src="https://picsum.photos/300/150">
<button onclick="sizes()">show size</button>
```

# c# - C# 驱动器保管箱

> ID：623182
> 
> 赞同：5
> 
> 时间：2009-03-08T06:54:43.343
> 
> 标签：c#, drive

我记得在 vb6 中有一个类似于下拉框/组合框的控件，您可以选择驱动器名称。它引发一个事件，然后您可以设置另一个控件来枚举列表框中的文件。（在 drive.event 你做 files.path = drive.path 来获得这种影响）。

C#中有这样的东西吗？下拉可用驱动器列表并在更改时引发事件的控件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-08T07:01:28.583

没有内置控件可以做到这一点，但使用标准 ComboBox 很容易完成。在表单上放置一个，将其 DropDownStyle 更改为 DropDownList 以防止编辑，并在表单的 Load 事件中添加以下行：

```
comboBox1.DataSource = Environment.GetLogicalDrives(); 
```

现在，您可以处理 SelectedValueChanged 事件以在有人更改所选驱动器时采取行动。

回答完[这个问题](https://stackoverflow.com/questions/623254/getdrivetype-in-c-or-find-out-if-my-drive-is-removable/623256)后，我找到了另一种（更好的？）方法来做到这一点。您可以使用 DriveInfo.GetDrives() 方法枚举驱动器并将结果绑定到 ComboBox。这样您就可以限制出现的驱动器。所以你可以从这个开始：

```
comboBox1.DataSource = System.IO.DriveInfo.GetDrives();
comboBox1.DisplayMember = "Name"; 
```

现在 comboBox1.SelectedValue 将是 DriveInfo 类型，因此您将获得有关所选游戏的更多信息。如果您只想显示网络驱动器，您现在可以这样做：

```
comboBox1.DataSource = System.IO.DriveInfo.GetDrives()
    .Where(d => d.DriveType == System.IO.DriveType.Network);
comboBox1.DisplayMember = "Name"; 
```

我认为 DriveInfo 方法要灵活得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T07:25:00.400

虽然马特汉密尔顿的回答非常正确，但我想知道问题本身是否正确。因为，你为什么想要这样的控制？老实说，感觉很Windows 95。请查看 Windows 用户体验交互指南：http: [//msdn.microsoft.com/en-us/library/aa511258.aspx](http://msdn.microsoft.com/en-us/library/aa511258.aspx)

特别是关于常用对话框的部分：http: [//msdn.microsoft.com/en-us/library/aa511274.aspx](http://msdn.microsoft.com/en-us/library/aa511274.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:11:53.903

我会用以下方法解决这个问题：

```
foreach (var Drives in Environment.GetLogicalDrives())
{
    DriveInfo DriveInf = new DriveInfo(Drives);
    if (DriveInf.IsReady == true)
    {
        comboBox1.Items.Add(DriveInf.Name);
    }
} 
```

在您的帮助下，`Drive.IsReady`您可以避免遇到`DeviceNotReady`问题`DeviceUnavailable`。

**奖励：** 这里还有一个简单的“ChooseFile”示例，其中包括一个`ComboBox`用于驱动器、一个`TreeView`用于文件夹和最后一个`ListBox`用于文件。

```
namespace ChosenFile
{
    public partial class Form1 : Form
    {
        // Form1 FormLoad
        //
        public Form1()
        {
            InitializeComponent();
            foreach (var Drives in Environment.GetLogicalDrives())
            {
                DriveInfo DriveInf = new DriveInfo(Drives);
                if (DriveInf.IsReady == true)
                {
                    comboBox1.Items.Add(DriveInf.Name);
                }
            }
        }

        // ComboBox1 (Drives)
        //
        private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (comboBox1.SelectedItem != null)
            {
                ListDirectory(treeView1, comboBox1.SelectedItem.ToString());
            }
        }

        // ListDirectory Function (Recursive Approach):
        // 
        private void ListDirectory(TreeView treeView, string path)
        {
            treeView.Nodes.Clear();
            var rootDirectoryInfo = new DirectoryInfo(path);
            treeView.Nodes.Add(CreateDirectoryNode(rootDirectoryInfo));
        }
        // Create Directory Node
        // 
        private static TreeNode CreateDirectoryNode(DirectoryInfo directoryInfo)
        {
            var directoryNode = new TreeNode(directoryInfo.Name);
            try
            {
                foreach (var directory in directoryInfo.GetDirectories())
                    directoryNode.Nodes.Add(CreateDirectoryNode(directory));
            }
            catch (Exception ex)
            {
                UnauthorizedAccessException Uaex = new UnauthorizedAccessException();
                if (ex == Uaex)
                {
                    MessageBox.Show(Uaex.Message);
                }
            }
            return directoryNode;
        }

        // TreeView
        // 
        private void treeView1_AfterSelect(object sender, TreeViewEventArgs e)
        {
            listBox1.Items.Clear();
            listBox1.Refresh();
            PopulateListBox(listBox1, treeView1.SelectedNode.FullPath.ToString(), "*.pdf");
        }
        // PopulateListBox Function
        // 
        private void PopulateListBox(ListBox lsb, string Folder, string FileType)
        {
            try
            {
                DirectoryInfo dinfo = new DirectoryInfo(Folder);
                FileInfo[] Files = dinfo.GetFiles(FileType);
                foreach (FileInfo file in Files)
                {
                    lsb.Items.Add(file.Name);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show("An error occurred while attempting to load the file. The error is:"
                                + System.Environment.NewLine + ex.ToString() + System.Environment.NewLine);
            }
        }

        // ListBox1
        //
        private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (listBox1.SelectedItem != null)
            {
                //do smt here!
                MessageBox.Show(listBox1.SelectedItem.ToString());
            }
        }
    }
} 
```

就像 VB6 中的旧时代一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-11T07:41:27.083

一个组合框和这个小代码就可以完成这项工作。最亲切的问候！路易斯：

```
 comboBox1.DataSource = System.IO.DriveInfo.GetDrives()
        .Where(d => d.DriveType == System.IO.DriveType.Network).ToList();
    comboBox1.DisplayMember = "Name"; 
```

# c# - 通过 NUnit 运行 C++ 代码

> ID：623185
> 
> 赞同：2
> 
> 时间：2009-03-08T06:56:28.470
> 
> 标签：c#, c++, nunit, appdomain

我尝试使用 NUnit 来测试已经连接到 C++ 代码的 C# 代码（没有 NUnit，应用程序可以完美运行）。

在我的测试中，我通过 AppDomain.CurrentDomain.ExecuteAssembly(..) 运行 main 函数，但是当 C# 代码尝试与 C++“通信”时，它会引发异常并且测试崩溃。例外是 System.Reflection.TargetInvocationException 如果有人知道为什么会发生它，那将非常有帮助......谢谢，Naama

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T13:26:29.487

在类的构造函数中，很可能在 C++ 代码中引发了异常。检查以确保您正在正确处理异常，并且您正在向构造函数提供正确的信息，因此不会引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T10:17:18.007

您的怀疑是正确的，它是在构造函数期间通过的，c# 中的构造函数正在尝试创建一个用 c++ 和 c++ 编写的对象（它已经被包装并在应用程序正常运行时完美运行）对象抛出异常。然而，该应用程序非常复杂，但如果需要澄清，我将编写一个演示应用程序来象征真实的应用程序。

# visual-studio - Robert C. Martin 书中 Paymentroll 示例的源代码

> ID：623189
> 
> 赞同：3
> 
> 时间：2009-03-08T06:58:55.453
> 
> 标签：visual-studio

在 Robert C. Martin 的《C# 中的敏捷原则、模式和实践》一书中，构建了一个小型 Paymentroll 应用程序。虽然大部分源代码都已打印到位，但有些类丢失了，有些类不完整。这本书在最火的一页上说：

> 本书包含许多源代码示例，也可从作者的网站下载。

不幸的是，这似乎是一个谎言。除非[这](http://www.objectmentor.com/omTeam/martin_r.html)不是作者的网站（这本书忘记提到作者的网站地址）或者我是盲人。

有没有人有这本书的完整源代码，最好是 Visual Studio 项目的形式，或者知道我在哪里可以找到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T07:10:21.480

Object Mentor 确实是 Bob Martin 的官方网站，并在此处托管该书的下载：[http](http://www.objectmentor.com/PPP/) ://www.objectmentor.com/PPP/和此处：[https ://github.com/unclebob/PPP](https://github.com/unclebob/PPP)

仅供参考，您可以通过 Twitter 联系 Bob（他经常使用它）：http: [//twitter.com/unclebobmartin](http://twitter.com/unclebobmartin)或通过 Object Mentor，这是 Bob 的一个非常小的小组，使用此页面上的方法：[http://objectmentor。 com/omCompany/omi_contact.html](http://objectmentor.com/omCompany/omi_contact.html)

# c# - WPF Gridview Zindex

> ID：623194
> 
> 赞同：1
> 
> 时间：2009-03-08T07:02:36.630
> 
> 标签：c#, wpf, gridview, datepicker, z-index

我有一个 datepicker 控件，用于在 gridview 控件中设置日期字段，我的 datepicker 显示一个日期和一个按钮来显示可用于选择日期的日历。这本身就很好用，但是当我将它添加到 gridview 时，日历会弹出，列和行会覆盖日历的一部分。为日历设置 ZIndex 没有帮助，因为其他行位于不同的面板上？我怎样才能解决这个问题？我尝试提高 VisualParent 的 ZIndex 但没有运气。

更新，gridview 非常标准，4 列，其中之一是日期列，该列的数据模板创建一个最初看起来像文本框和按钮的日期选择器，按钮放置在画布面板上，单击日历时被添加到画布。画布是唯一允许其子项跨越其自身边界的面板，因此按钮为 10 x 10 左右，日历为 200 x 200。当日历弹出时，它通常只会覆盖相邻的字段，但当放置在gridview 在日期选择器“之后”的 gridview 的每个单元格都覆盖了日历。我想我需要提高我的单元格的 zindex 但我找不到办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T09:49:55.527

您能否提供有关 gridview 和 datepicker 的更多信息？特别是它们是您的自定义控件，还是属于任何开源或商业库或独立的？

您还提到 DataTemplate 将 Canvas 作为面板。即使 Canvas 可以包含大型元素，它也不一定会显示其所有子元素。不过，这可能与您的问题有关，也可能无关。

PS对不起，我不得不将其发布为答案。我的名声不允许我发表评论？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T22:52:26.817

哇，这应该使用弹出窗口或扩展器来完成。

# c# - 在服务器级别使用 itextsharp 读取 pdf 被拒绝访问

> ID：623195
> 
> 赞同：1
> 
> 时间：2009-03-08T07:06:36.327
> 
> 标签：c#

上传到服务器后我面临错误......因为访问被拒绝......任何人都可以帮助我......

```
 Document myDocument = new Document(PageSize.A5, 26, 72, 180, 180);
  string strUniqueFn = "onlineinvoice.pdf";
  string imgpath = "logo.gif";    

  string strUser = Thread.CurrentPrincipal.Identity.Name.Substring(Thread.CurrentPrincipal.Identity.Name.IndexOf("\\") + 1).ToUpper();
  string strFolder = Server.MapPath(".");
  System.IO.DirectoryInfo di = new System.IO.DirectoryInfo(strFolder);
  System.IO.FileInfo[] fi = di.GetFiles(strUser + "*.*");

  for (i = 0; i <= fi.Length - 1; i++)
  {
      System.IO.File.Delete(strFolder + "\\" + strUniqueFn);
  }

  string strPath = strFolder + "\\" + strUniqueFn;

  PdfWriter pdfw = PdfWriter.GetInstance(myDocument, new FileStream(strPath, FileMode.Create));
  string iPath = strFolder + "\\" + imgpath;
  pdfw.CloseStream = false;

  myDocument.Open();

  ......................

  myDocument.Close(); 
```

我面临错误`PdfWriter pdfw = PdfWriter.GetInstance(myDocument, new FileStream(strPath, FileMode.Create));`

谁能帮我...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-08T08:34:18.783

您正在尝试在站点的根文件夹中创建一个文件。这样做时，您会收到拒绝访问异常。以下说明：`new FileStream(strPath, FileMode.Create)`将尝试在您站点的根文件夹中创建一个新文件。例外情况是由于您的网站运行所使用的帐户没有足够的权限来写入该目录。要么授予帐户对根文件夹的写入权限，要么按照 Freddy Rios 的建议创建一个子文件夹来存储您的 pdf 文件，您只需要授予此子文件夹的写入权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T07:16:38.640

看来这只是您的 GetFiles / delete 例程中的一个错误（“onlineinvoice.pdf”可能在开头没有 strUser ...）：

```
System.IO.FileInfo[] fi = di.GetFiles(strUser + "*.*");
    for (i = 0; i <= fi.Length - 1; i++)
    {

        System.IO.File.Delete(strFolder + "\\" + strUniqueFn);
    } 
```

**更新 1：**不要将文件放在站点的根级别，将它们分组在一个文件夹中，您可以在其中授予特定的写入/删除权限。

# javascript - 如何将 Javascript 事件处理程序注册到尚未添加到页面的元素

> ID：623203
> 
> 赞同：3
> 
> 时间：2009-03-08T07:11:55.500
> 
> 标签：javascript, dom-events, event-delegation

我正在尝试构建一个greasemonkey 脚本，该脚本将根据用户与...其他动态创建的数据表的交互动态创建数据表。我的问题是，每次创建表时我都必须进行两次传递：一次创建表，另一次获取表中我想要添加事件处理程序的所有对象（按 id）并添加他们的各种事件处理程序。

`onClick`例如，如果我在创建表并将其插入 HTML 之前尝试将事件添加到表 td，则会收到“组件不可用”异常。

这非常麻烦，因为我要么必须单独维护一个 id 列表以及在我第二次添加处理程序时应该对这些元素做什么，要么开发一个我知道的命名约定，基于id，我应该对元素做什么。

必须有更好的方法来做到这一点。我只是还没有弄清楚。有人有想法么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-08T09:15:32.943

首先，我很想知道为什么每个 TD 都需要不同的 ID。ID 是否包含重要信息，例如索引？在这种情况下，最好在循环中创建每个 TD。此外，显然您不能将事件处理程序附加到不存在的 DOM 元素！它不必注入到 DOM 中，但它必须以某种容量存在。

jQuery 的 live() 并不是一个神奇的谜团，它只是使用事件委托，因此它将事件附加到父元素，例如表格，然后根据点击的目标决定发生什么。这是一个基本的例子。我向“body”元素注册了一个处理程序，然后我每次都测试一下目标是什么，如果它是一个 TD 元素我 doSomething() ->

```
document.body.onclick = function(e) {

    var realTarget = e ? e.target : window.event.srcElement;

    if ( realTarget.nodeName.toLowerCase() === 'td' ) {
        doSomething();
    }

}; 
```

事件委托依赖于称为事件冒泡（或“传播”）的东西，这是现代浏览器实现事件模型的方式。每个事件在被触发时将通过 DOM 向上传播，直到无法继续。因此，如果您单击段落中的锚点，则锚点的“单击”事件将触发，然后该段落的“单击”事件将触发等等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-08T07:14:28.380

jQuery 1.3+ 有一个新的 live() 函数，可以为尚不存在的元素设置事件处理程序..[看看](http://docs.jquery.com/Events/live#typefn)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T14:37:00.313

正如 JimmyP 所指出的，使用[事件冒泡](http://www.w3.org/TR/DOM-Level-3-Events/events.html#Events-flow)可以轻松解决您的问题。您可能会考虑编写一个包装函数来解决浏览器的不一致问题 - 我自己的版本[可以在这里找到，](http://mercurial.intuxication.org/hg/js-hacks/raw-file/tip/capture.js)并且可以像这样使用：

```
capture('click', '#element-id', function(event) {
    // `this` will be the originating element
    // return `false` to prevent default action
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-08T07:15:15.213

您必须等待元素添加到页面，然后添加事件处理程序。

没有简单的方法可以说“在现在和将来将它添加到这种类型的所有元素中”。

可以让计时器定期检查页面中的新元素，在它们出现时将事件队列（或其他属性）应用于它们，所有这些都在幕后进行。这可以被抽象出来并重新使用，例如[Jquery](http://jquery.com/)可以做那种事情。

# ruby-on-rails - modrails - 流氓 ruby 进程消耗 100% cpu

> ID：623205
> 
> 赞同：20
> 
> 时间：2009-03-08T07:13:31.207
> 
> 标签：ruby-on-rails, ruby, passenger, mod-rails, phusion

我有来自 mod_rails 的 ruby​​ 实例变成“流氓”——这些进程不再列在乘客状态中，并且使用 100% cpu。

除了安装 God/monit 来杀死实例之外，任何人都可以给我一些关于如何防止这种情况的建议吗？我无法在日志中找到任何有用的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-24T21:17:33.570

If you're using Linux, you can install the "strace" utility to see what the Ruby process is doing that's consuming all the CPU. That will give you a good low-level view. It should be available in your package manager. Then you can:

```
$ sudo strace -p 22710
Process 22710 attached - interrupt to quit
...lots of stuff...
(press Ctrl+C) 
```

Then, if you want to stop the process in the middle and dump a stack trace, you can follow the guide on using GDB in Ruby at [http://eigenclass.org/hiki.rb?ruby+live+process+introspection](http://eigenclass.org/hiki.rb?ruby+live+process+introspection), specifically doing:

```
gdb --pid=(ruby process)
session-ruby
stdout_redirect
(in other terminal) tail -f /tmp/ruby_debug.(pid)
eval "caller" 
```

You can also use the ruby-debug Gem to remotely connect to debug sockets you open up, described in [http://duckpunching.com/passenger-mod_rails-for-development-now-with-debugger](http://duckpunching.com/passenger-mod_rails-for-development-now-with-debugger)

There also seems to be a project on Github concerned with debugging Passenger instances that looks interesting, but the documentation is lacking: [http://github.com/ddollar/socket-debugger/tree/master](http://github.com/ddollar/socket-debugger/tree/master)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T08:27:01.623

我有一个与 Phusion Passenger 相关的 ruby​​ 进程，它消耗了大量的 CPU，尽管它应该是空闲的。

我跑了之后问题就消失了

```
date -s "`date`" 
```

正如[这个线程](http://www.redmine.org/boards/2/topics/31731)中所建议的那样。（那是在 Debian Squeeze 上）

显然，这个问题与闰秒有关，并且可能影响许多其他应用程序，如 MySQL、Java 等。更多信息请参见[lklm 上的此线程](https://lkml.org/lkml/2012/7/1/176)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T21:14:21.190

我们在运行很长时间的 SQL 查询中看到了类似的情况。

MySQL 将终止查询，因为它们超出了长期运行限制，并且线程从未意识到查询已死。

您可能需要检查数据库日志。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-08T13:00:04.603

这是乘客反复出现的问题。我已经多次看到这个问题帮助那些​​在轨道上运行 ruby​​ 的人。我没有修复，但你可能想试试这个[http://www.modrails.com/documentation/Users%20guide%20Apache.html#debugging_frozen](http://www.modrails.com/documentation/Users%20guide%20Apache.html#debugging_frozen)

# javascript - Access parent's DOM from script in an iframe in IE Mobile

> ID：623208
> 
> 赞同：1
> 
> 时间：2009-03-08T07:14:41.877
> 
> 标签：javascript, windows-mobile, iframe, ie-mobile

I have a framed window (currently iframe but may possibly be frame) - I do not have control over this.

I would like to detect if my content is inside an iframe (or frame).

I wanted to compare the location of the current document with the one the top object holds but it appears it is the same object (top === window).
After extensive googling I got to this [IEMobile blog entry](http://blogs.msdn.com/iemobile/archive/2007/05/15/ie-mobile-standards-support.aspx) and in one of the comments there is this answer:

> iemoblog said:
> 
> No, you can't access any part of the parent's DOM from script in an iframe in IE Mobile.
> December 20, 2007 12:12 PM

I can't seem to find any documentation about this - can anyone help confirm this or even better - suggest a way to detect if the page is "framed"?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T20:07:08.430

The main problem is that if the frame is from a different domain then the container then your JavaScript is sandboxed and can't access the other frame/container.

What you can do is try to compare `window` to `window.top` and the possible outcomes are: 1\. The are the same -> you are the top window on the page 2\. They are not the same -> you are not the top window on the page, there is some container page, in the same domain as you, that holds your window as a frame or iframe. 3\. A security exception is thrown -> you are not the top window on the page, but the top window is from another domain and you can't access it.

maybe something like this:

```
try {
  if (window == window.top)
    return "I'm parent";
  else
    return "I'm a child of " + window.top.location;
} catch (e) {
  return "I'm a child of something from another domain";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-12-08T14:22:17.797

As I did not get anywhere after finding the comment left in the [IE Mobile blog](http://blogs.msdn.com/iemobile/archive/2007/05/15/ie-mobile-standards-support.aspx) (by Charles Morris - program manager on the IE Mobile team, on his own post) I am forced to add this answer and state it is:

As designed (or a bug at least)

> **prc said**:
> 
> regarding iframe support: I can create an iframe, but am unable to "look outside" the frame. "top" and "parent" both seem to refer only to the iframe itself and not the topmost ancestor or immediate ancestor as the documentation suggests that it should. Is there a way to refer to javascript variables in the enclosing document from within an iframe?
> 
> December 19, 2007 9:29 PM
> 
> **iemoblog said**:
> 
> No, you can't access any part of the parent's DOM from script in an iframe in IE Mobile.
> 
> December 20, 2007 12:12 PM

# .net - .NET 3.5 是媒体中心插件的合理先决条件吗？

> ID：623213
> 
> 赞同：2
> 
> 时间：2009-03-08T07:19:00.260
> 
> 标签：.net, .net-3.5, plugins, windows-vista, mediacenter

我们有一个开源媒体中心插件。目前它的下载大小只有区区一兆字节。

如果我将插件更改为需要 .NET 3.5，用户可能必须下载[197 megs](http://www.west-wind.com/weblog/posts/292203.aspx)才能使用我的插件。

我正处于一个大型重构过程的中间，并且渴望使用 LINQ 的一些功能方面，这将大大降低我们代码库的复杂性。

.NET 3.5 是我的应用程序的合理先决条件吗？我的整个用户群都已经安装了 .NET 3.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T07:32:06.577

对于较小的安装程序，.Net 3.5 **Sp1**有一个称为“[客户端配置文件](http://weblogs.asp.net/scottgu/archive/2008/05/12/visual-studio-2008-and-net-framework-3-5-service-pack-1-beta.aspx)”的新功能。

.NET Framework 客户端配置文件设置仅包含 .NET Framework 中通常用于客户端应用程序方案的程序集和文件。例如：它包括 Windows 窗体、WPF 和 WCF。它不包括 ASP.NET 以及主要用于服务器方案的那些库和组件。我们预计此安装包大小约为**26MB**，下载和安装速度比完整的 .NET Framework 安装包快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T07:36:02.730

我认为这对于开源项目是可以接受的。Windows 7 是 Windows 的下一个版本，将附带 .NET 3.5。并且：XP 和 Vista 用户已经为其他程序安装 3.5 的概率逐月增加。

*PS：我正在使用您的媒体中心插件。我相信我会做 3.5 的设置。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T07:37:10.370

我不知道微软为什么不努力通过其 Windows 更新或服务包将 .Net framework 3.5 安装在尽可能多的机器上。

但是如果你不想让你的Vista用户下载3.5，你可以在VS2008上定位2.0框架，2.0是内置在Vista中的。关于 LINQ，只需找到一个替代实现，试试[LinqBridge](http://code.google.com/p/linqbridge/)。其他一切（推断变量、自动 getter 设置器、集合初始化器、属性初始化器、lambda 只是编译器魔法，不依赖于 3.5

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-07T20:50:19.800

请记住，并非所有用户都需要实际 deplot .net 框架。例如，Windows 7 用户已经在他们的机器上安装了它。

# c - 'private' 是 C 关键字吗？

> ID：623219
> 
> 赞同：18
> 
> 时间：2009-03-08T07:28:09.300
> 
> 标签：c, private

是 ANSI C（或任何其他 C 语言）中的“私有”或“公共”关键字，还是仅在 C++（以及 Java、C#、...）中添加？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-03-08T07:29:47.847

`private`不是 C89 或 C99 关键字。请参阅[Wikibooks 上的 C 编程/参考表](http://en.wikibooks.org/wiki/C_Programming/Reference_Tables)*。

此外，C 与 Java 和 C# 毫无关系**（实际上，也与 C++ 无关）。然而，反之则不然——例如，C++ 是从 C 发展而来的。

** 需要更好的参考！*
*** 实际上，[C89 “借用”了C++ 的`const`and`volatile`关键字](http://www.lysator.liu.se/c/rat/c5.html#3-5-3)。同样，C99“借用”了`inline`关键字，还添加了`_Bool`and `_Complex`（分别像 C++`bool`和`complex`）^([citation-needed])。*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-08T07:31:05.517

C 关键字也不是，但有些人会执行以下操作：

```
#define public 
#define private static 
```

### 更新：

对于那些认为执行上述操作是个坏主意的人，我会同意。但它确实解释了为什么有人可能会认为`public`或者`private`是 C 关键字。

对于那些认为它不会在 C 中编译的人，试试这个：

```
#include <stdio.h>
#include <stdlib.h>

#define public
#define private static

private void sayHello(void);

public int main(void) {
    sayHello();

    return (EXIT_SUCCESS);
}

private void sayHello(void) {
   printf("Hello, world\n");
} 
```

对于那些认为它不会在 C++ 中编译的人，是的，上面的程序会。

### 更新：

实际上，由于 C++ 标准的这一部分，它是未定义的行为：

> 包含头文件的翻译单元不应包含定义在该头文件中声明或定义的名称的任何宏。这样的翻译单元也不应为在词法上与关键字相同的名称定义宏。

所以上面和下面的例子不需要在 C++ 中做任何理智的事情，这是一件好事。我的回答仍然对 C 完全有效（直到它被证明是错误的！:-)）。

对于具有私有成员的 C++ 类，您可以执行类似的操作（被视为滥用），如下所示：

**主.c**：

```
#include <cstdlib>
#define private public
#include "message.hpp"

int main() {
    Message msg;

    msg.available_method();
    msg.hidden_method();

    return (EXIT_SUCCESS);
} 
```

**消息.hpp**：

```
#ifndef MESSAGE_H
#define MESSAGE_H

#include <iostream>

class Message {
  private: 
      void hidden_method();

  public: 
      void available_method();
};

inline void Message::hidden_method() {
    std::cout << "this is a private method" << std::endl;
}

inline void Message::available_method() {
    std::cout << "this is a public method" << std::endl;
}

#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T21:01:47.763

*static*不像*private* ，因为即使在*类的**构造*函数（在 C 语言中初始化结构成员的函数）中也无法读取静态变量。

 *您只能在定义它们的代码部分（在函数、结构......）中使用静态变量。

# c# - 我怎么知道什么时候需要处理一个对象？

> ID：623224
> 
> 赞同：4
> 
> 时间：2009-03-08T07:30:09.530
> 
> 标签：c#, dispose

我怎么知道什么时候需要处理一些东西？有人刚刚提到我的代码中有几个需要处理的对象。我不知道我需要处理任何东西（这是我使用 C# 的第一周）。我怎么知道什么时候需要处理一个对象？我正在使用[http://msdn.microsoft.com/en-us/library/system.security.cryptography.hashalgorithm.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hashalgorithm.aspx)，我没有看到页面上提到 dispose 或看到我在任何其他 objs 中提到它告诉我处置（由某人在SO上）。

我知道我需要什么时候继承 IDisposable 但我怎么知道它什么时候继承它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-08T07:41:34.260

类似的问题在这里：

*   [我应该什么时候在 .NET 中处理我的对象？](https://stackoverflow.com/questions/245856/when-should-i-dispose-my-objects-in-net)
*   [我什么时候应该手动处理控件？我如何知道控件是否实现了 IDisposable？](https://stackoverflow.com/questions/615466/when-should-i-manually-dispose-of-controls-how-do-i-know-if-a-control-implements)
*   [如何在.NET 中配置一个类？](https://stackoverflow.com/questions/12368/how-to-dispose-a-class-in-net)
*   [GC 会为我调用 IDisposable.Dispose 吗？](https://stackoverflow.com/questions/45036/will-the-gc-call-idisposable-dispose-for-me)
*   [识别 IDisposable 对象](https://stackoverflow.com/questions/591000/identify-idisposable-objects)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-08T07:36:23.850

您应该处置任何实现 IDisposable 的东西。只需将其包装在 using 上：

```
 using(var some = new Something())
   {
    //use normally
   } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-09T03:03:05.980

一种简单的方法是输入 obj.disp 并查看智能感知是否具有 dispose 方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-08T07:41:39.847

该类实现了接口`IDisposable`，这意味着它有一个`Dispose`方法。

并非每个实现 IDisposable 的类都需要您调用`Dispose`，但大多数都需要。如果你看到这个类实现了`IDisposable`（或者有一个`Dispose`方法，因为它从基类继承了接口），你有两个选择：

1.  深入研究文档以找出类实现的原因`IDisposable`，以及是否真的需要调用`Dispose`。

2.  只要打电话`Dispose`。

任何一种方法都是安全的。如果该`Dispose`方法不执行任何操作，则调用将非常快。您甚至可以`Dispose`多次调用而不会受到伤害。

比仅仅调用方法更好的`Dispose`是使用`using`块：

```
using (FileStream s = File.OpenRead(path)) {
   ...
} 
```

在块的末尾括号，该`Dispose`方法被自动调用。该`using`块被实现为 a `try...finally`，因此`Dispose`即使该块中发生异常，也可以保证调用该方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-08T07:37:05.300

如果一个类实现了 IDisposable 你应该处置该类的实例。如果没有，你就没有。在这种情况下，HashAlgorithm 派生自 ICryptoTransform，而 ICryptoTransform 派生自 IDisposable。这意味着必须释放所有从 HashAlgorithm 派生的类实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-08T07:40:43.513

您应该处置任何实现 IDisposable 接口的对象。

```
public abstract class HashAlgorithm : ICryptoTransform, 
IDisposable 
```

任何具有非托管资源（例如数据库连接）的东西都应该实现 IDisposable 接口。

这有几个很好的理由：

*   您知道非托管资源（通常非常稀缺）将被清理。通常这些都会在终结器中被清除，但由于 GC 必须使用终结器清理对象，这可能需要一段时间。
*   如果你实现了标准的[dispose 模式](http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx)，你可以为 GC 节省很多工作，因为它不需要调用终结器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-08T09:33:50.433

> 我知道我需要什么时候继承 IDisposable 但我怎么知道它什么时候继承它？

假设您使用的是 Visual Studio。我通常右键单击类型，然后“转到定义”。如果我看到它或它的任何超类实现了 IDisposable，我确保我调用了 Dispose。正如其他人所提到的，这通常是通过将其包装在 using 块中来完成的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-02-15T16:51:23.390

“请最后一个离开房间的人把灯关掉好吗？”

实现 IDisposable 的对象拥有执行一些“清理”操作所需的信息和动力，这些操作应该“有时”发生，但在对象仍在使用时不会发生。如果对象完全被遗弃，那些清理操作将不会发生。该系统包括一个保管人，对象可以在创建时注册；如果一个对象被除了保管人之外的所有人遗弃，保管人可以要求该对象在保管人也放弃它之前执行其清理操作。请注意，由于各种原因，保管人在处理废弃物品方面并非 100% 有效。因此，非常希望，只要有可能，最后一个持有对对象的有用引用的实体在放弃引用之前将其处理掉。

# android - 转到设置屏幕

> ID：623225
> 
> 赞同：25
> 
> 时间：2009-03-08T07:30:37.190
> 
> 标签：android, android-settings

我想从我的应用程序中打开设置-> 声音和显示-> 电话铃声屏幕。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-03-08T10:54:27.200

根据您的需要，有几种方法可以从您的应用程序中调出“铃声”设置屏幕。

如果你想调出通常可以通过系统设置获得的实际偏好屏幕——让你的用户通过你的应用程序修改手机的通用铃声设置——你可以使用类中的`ACTION_SOUND_SETTINGS`常量 `android.provider.Settings`来创建一个新的 Intent 来启动声音设置活动。

```
startActivityForResult(new Intent(android.provider.Settings.ACTION_SOUND_SETTINGS), 0); 
```

如果您想选择在您的应用程序中使用的自定义铃声，您需要`RingtonePreference`在`preferences.xml`定义文件中添加一个，如下所示：

```
<RingtonePreference
  android:key="alerts_ringtone"
  android:title="Select ringtone" 
  android:showDefault="true"
  android:showSilent="true"
  android:ringtoneType=""
/> 
```

您将能够`SharedPreferences`使用`alerts_ringtone`作为键在应用程序的默认设置中获取所选首选项的 URI。

*后一种技术使用`PreferenceActivity`类来承载首选项。我不会在这里详细描述，因为 Android 文档有[很好](http://developer.android.com/reference/android/preference/PreferenceActivity.html)的文章和一些示例代码。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T13:48:07.370

这是该问题的替代解决方案。我也在做同样的任务，但上面的代码对我不起作用。我已将代码更改为

```
startActivityForResult(new Intent(android.provider.Settings.ACTION_SOUND_SETTINGS), 0); 
```

现在它可以工作了。

# delphi - 通过 http 代理连接 TTcpClient

> ID：623229
> 
> 赞同：1
> 
> 时间：2009-03-08T07:33:33.080
> 
> 标签：delphi, proxy, delphi-2009, tcpclient

我如何通过delphi中的http代理服务器连接到服务器？SOCKS5 代理呢？

谷歌没有任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T16:17:26.377

如果您使用的是 Indy（强烈推荐），请尝试使用*IdConnectThroughHttpProxy*单元中的`TIdConnectThroughHttpProxy`对象。它是 的后代，因此将该类的实例连接到客户端对象的属性。要改为通过 Socks 服务器连接，请在*IdSocks*中使用 , 。*`TIdIOHandler``IOHandler``TIdSocksInfo`*

 **如果您在没有像 Indy 这样的协议库的帮助下手动执行此操作，则将您的`TTcpClient`对象连接到代理服务器的地址而不是实际目的地，然后将您的命令发送到那里。代理服务器知道将请求发送到哪里，因为您向它发出了 CONNECT 命令，或者因为您在 GET 请求中指定了完整的 URL（而不仅仅是路径部分）。（[HTTP 规范](http://www.ietf.org/rfc/rfc2068.txt)演示了后者。）您将获得的响应应该从目标服务器转发，除非代理服务器本身有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T14:12:48.183

我认为你可以使用 Indy 来做到这一点。您可以[在 Indy in Depth 电子书中](http://www.atozedsoftware.com/indy/book/index.en.aspx)找到信息。

希望这可以帮助。

# c# - 关窗

> ID：623242
> 
> 赞同：0
> 
> 时间：2009-03-08T07:46:12.487
> 
> 标签：c#

如果我要关闭一个窗口，我想知道通过鼠标单击关闭图标或 alt+f4 关闭窗口的方式（即）。有什么活动可以获取此信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T07:56:58.997

我不相信有任何事件专门为您提供此信息，不。提供`FormClosingEvent`了 a`FormClosingEventArgs`和 a `CloseReason`，但原因并没有区分使用鼠标还是键盘。它只区分“用户关闭”事件和“表单所有者关闭”或“应用程序已从任务管理器关闭”之类的事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T08:31:39.927

无论您是否可以捕获特定的 WM_...-消息来区分它们，**都不要这样做**！可用性的基本原则之一是没有惊喜：不辜负用户的期望。做所有其他应用程序所做的事情，尤其是在涉及绝对基础的时候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T07:57:35.203

无论您使用哪个工具包，总有点击关闭按钮的事件、Alt+F4 的键盘事件、菜单的菜单点击事件等。您所要做的就是列举退出应用程序的可能方式，更改事件处理程序将变量设置为相应的值，并在应用程序关闭过程中检查该变量。

# iphone - SCListener 是如何工作的？

> ID：623249
> 
> 赞同：1
> 
> 时间：2009-03-08T07:56:58.437
> 
> 标签：iphone

我将如何使用 Stephen Celis 出色的 SCListener 单例？

（[http://stephencelis.com/2009/03/02/now-i-just-need-an-audience.html](http://stephencelis.com/2009/03/02/now-i-just-need-an-audience.html)）

我想从一些非常简单的东西开始......比如在文本视图中显示输入音量，或者在侦听器检测到某些东西时只显示 UIImage。

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T12:54:44.540

什么你不明白，SCListener 是一个很简单的类。

将 AudioToolbox 框架添加到您的项目中，然后将 Stephen 发布的示例代码包含到您的源文件中。

我怀疑您的问题实际上是“如何让我的应用程序响应 SCListener 的返回值？” SCListerner 不是异步的。您需要对其进行轮询以获取 peakValues。

为了您的使用，我建议您设置一个计时器或扩展 SCListener 以便在达到峰值时生成回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-15T00:03:40.370

```
blowTimer = [NSTimer timerWithTimeInterval: 1 
                target: self 
                selector: @selctor(checkBlow) 
                userInfo: nil
                repeats: YES];

[[NSRunLoop currentRunLoop] addTimer: blowTimer
                forMode: NSDefaultRunLoopMode];

[[SCListener sharedListener] listen]; 
```

这段代码基本上会启动监听器，并每秒调用一次 checkBlow 方法。

checkBlow 的代码如下所示：

```
- (void) checkBlow
{
    if ([SCListener sharedListener] != nil)
    {
        Float32 volume = [[SCListener sharedListener] peakPower];

        if (volume > BlowingTriggerThreshold)
    {
        //DO SOMETHING AWESOME HERE
    }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-20T22:41:52.933

SCListener 现在已过时。它早于现在是 SDK 一部分的 AVAudioRecorder。查看本教程以了解音频级别：

[http://www.mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/](http://www.mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/)

# c# - C#中的GetDriveType？或找出我的驱动器是否可移动？

> ID：623254
> 
> 赞同：5
> 
> 时间：2009-03-08T08:03:07.483
> 
> 标签：c#, removable-storage, getdrivetype

我正在使用 Environment.GetLogicalDrives(); 获取驱动器列表。我记得在 C++ 中，我可以使用 GetDriveType 来查找设备是否是 CD、可移动、闪存等，我想我想在我的应用程序中放置一个过滤器，以便在默认情况下仅显示 CD 和可移动设备。C# 中的 GetDriveType 等价物是什么？谷歌只向我展示了使用 c++ 调用的技巧。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2011-08-30T08:08:47.230

您可以使用[DriveInfo 类型](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.aspx)来检索驱动器列表。您需要检查[DriveType 属性](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.drivetype.aspx)（枚举）

```
var drives = DriveInfo.GetDrives();
foreach (var drive in drives)
{
    if (drive.DriveType == DriveType.Removable)
    {
        Console.WriteLine(drive.Name);
    }
} 
```

您还可以使用 LINQ-to-Objects 来查询驱动器：

```
var drives = from drive in DriveInfo.GetDrives()
             where drive.DriveType == DriveType.Removable
             select drive;

foreach(var drive in drives)
{
    Console.WriteLine(drive.Name);
} 
```

就像提到的@TheCodeKing 一样，您也可以使用 WMI 来查询驱动器信息。

例如，您可以通过以下方式查询 U 盘：

```
ManagementObjectCollection drives = new ManagementObjectSearcher(
    "SELECT Caption, DeviceID FROM Win32_DiskDrive WHERE InterfaceType='USB'"
).Get(); 
```

如果要使用 WMI，请添加对 System.Management 程序集的引用。

如果您想用此数据填充 Windows 窗体应用程序中的 ComboBox，您需要将结果绑定到 ComboBox 控件。

例如：

```
private void Form1_Load(object sender, EventArgs e)
{
    var drives = from drive in DriveInfo.GetDrives()
                 where drive.DriveType == DriveType.Removable
                 select drive;

    comboBox1.DataSource = drives.ToList();
} 
```

回顾一下：

1.  将 ComboBox 控件添加到 Windows 窗体（从工具箱将其拖放到窗体上）
2.  查询可移动驱动器。
3.  将结果绑定到 ComboBox。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-08T08:08:13.807

是的，该框架包括[DriveInfo](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.aspx)类使用的[DriveType](http://msdn.microsoft.com/en-us/library/system.io.drivetype.aspx)枚举。查看 MSDN 上的[GetDrives()](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.getdrives.aspx)方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T08:08:24.163

[DriveInfo](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.aspx)是您正在寻找的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-30T08:09:51.003

您已经为此使用了 WMI，请查看此[链接](http://msdn.microsoft.com/en-us/library/aa394592%28v=vs.85%29.aspx)以获取信息和示例。

# xml - 将 XML 命名空间添加到 ruby 中的现有文档

> ID：623255
> 
> 赞同：1
> 
> 时间：2009-03-08T08:04:28.823
> 
> 标签：xml, ruby, namespaces, rexml

我需要向现有 XML 文档添加一个元素，该文档使用原始中不存在的命名空间。我该怎么做呢？

理想情况下，我想使用 REXML 来实现可移植性，但任何常见的 XML 库都可以。一个理想的解决方案是巧妙地处理命名空间冲突。

我有一个如下所示的 xml 文档：

```
<xrds:XRDS
 xmlns:xrds="xri://$xrds"
 xmlns="xri://$xrd*($v*2.0)">
    <XRD>
        <Service>
            <Type>http://specs.openid.net/auth/2.0/signon</Type>
            <URI>http://provider.openid.example/server/2.0</URI>
        </Service>
    </XRD>
</xrds:XRDS> 
```

并添加：

```
<Service
 xmlns="xri://$xrd*($v*2.0)"
 xmlns:openid="http://openid.net/xmlns/1.0">
    <Type>http://openid.net/signon/1.0</Type>
    <URI>http://provider.openid.example/server/1.0</URI>
    <openid:Delegate>http://example.openid.example</openid:Delegate>
</Service> 
```

产生相当于：

```
<xrds:XRDS
 xmlns:xrds="xri://$xrds"
 xmlns="xri://$xrd*($v*2.0)"
 xmlns:openid="http://openid.net/xmlns/1.0">
    <XRD>
        <Service>
            <Type>http://specs.openid.net/auth/2.0/signon</Type>
            <URI>http://provider.openid.example/server/2.0</URI>
        </Service>
        <Service>
            <Type>http://openid.net/signon/1.0</Type>
            <URI>http://provider.openid.example/server/1.0</URI>
            <openid:Delegate>http://example.openid.example</openid:Delegate>
        </Service>
    </XRD>
</xrds:XRDS> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T08:32:45.120

事实证明这是一个愚蠢的问题。如果初始文档和要添加的元素在内部是一致的，那么命名空间就可以了。所以这相当于最终的文档：

```
<xrds:XRDS
 xmlns:xrds="xri://$xrds"
 xmlns="xri://$xrd*($v*2.0)">
    <XRD>
        <Service>
            <Type>http://specs.openid.net/auth/2.0/signon</Type>
            <URI>http://provider.openid.example/server/2.0</URI>
        </Service>
        <Service
         xmlns:openid="http://openid.net/xmlns/1.0" 
         xmlns="xri://$xrd*($v*2.0)">
            <Type>http://openid.net/signon/1.0</Type>
            <URI>http://provider.openid.example/server/1.0</URI>
            <openid:Delegate>http://example.openid.example</openid:Delegate>
        </Service>
    </XRD>
</xrds:XRDS> 
```

重要的是初始文档和元素都使用`xmlns`属性定义默认名称空间。

假设初始文档在 中`initial.xml`，元素在 中`element.xml`。要使用 REXML 创建这个最终文档，只需：

```
require 'rexml/document'
include REXML

document = Document.new(File.new('initial.xml'))
unless document.root.attributes['xmlns']
  raise "No default namespace in initial document" 
end
element = Document.new(File.new('element.xml'))
unless element.root.attributes['xmlns']
  raise "No default namespace in element" 
end

xrd = document.root.elements['XRD']
xrd.elements << element
document 
```

# c# - C# 中有没有办法从控件/表单中捕获所有异常？

> ID：623262
> 
> 赞同：1
> 
> 时间：2009-03-08T08:17:32.397
> 
> 标签：c#, exception-handling

**对于从位于当前线程**中的 Control 或 Form 内部抛出的异常，我希望有类似“包罗万象”的东西，但不诉诸于使用`Application.ThreadException`整个线程的。

为什么？因为我想保持异常处理模块化。

所有可能导致问题的代码都`DummyForm`在当前线程中运行的 Form() 中运行。我希望能够将它们全部包装在一些其他异常（`DummyFormException`）中，该异常将识别该 Form 作为异常的原因，以便如果该异常进入 Application.ThreadException，我可以知道清理涉及关闭`DummyForm`。

在我看来，替代方案是：

`DummyForm`#用.包裹每一个抛出的异常`DummyFormException`。我不太喜欢这个，因为它要求未来的程序员也记得包装每个抛出的异常。#`DummyForm`在它自己的线程中运行，并使用它`Application.ThreadException`来捕获它们，并识别该代码中的线程。一旦我知道它来自哪里，我就可以简单地关闭`DummyForm`并结束线程。

有没有办法在不使用多线程的情况下做到这一点？我不想这样做，这似乎只是错误处理的浪费。还是我对这一切都错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T08:21:44.070

我不确定将所有错误处理代码放在一个地方是否是个好主意。

错误处理最好在它处理的操作旁边进行。

错误处理的全部意义在于改变程序遇到错误时的程序行为。这意味着您**必须**在该位置编写特定的代码，并且您不能按照您的意愿将所有内容都放在一个地方。

但是，也许您需要的只是记录内容等的辅助方法。

* * *

未处理的异常处理程序（Application.ThreadException、AppDomain.CurrentDomain.UnhandledException）确实存在，但这不是它们的用途。

您应该使用它们来处理意外异常，即发生了您没有想到的错误，并且您希望很好地处理这种情况（例如，您可能希望记录错误，或向用户，或轻轻关闭程序）

如果您知道某处可能发生异常，*那么“某处”是编写异常处理代码的好地方。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T08:40:10.080

听听 Brann，否则你可能会上 thedailywtf.com :-)

将其留给全局错误处理程序会给您带来各种痛苦。确保您的应用程序中的任何异常都**在源头**得到处理——这就是您拥有正确信息来决定如何处理它的地方。

# linker - mingw 链接器找不到 PathAppend

> ID：623264
> 
> 赞同：4
> 
> 时间：2009-03-08T08:19:42.063
> 
> 标签：linker, mingw

当我尝试编译以下内容时：

```
#include <windows.h>
#include <shlwapi.h>

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) {
  char firstPart[MAX_PATH] = "c:\\windows";
  char secondPart[MAX_PATH] = "system32";
  PathAppend(firstPart, secondPart);

  return 0;
} 
```

使用命令：

```
c:\mingw\bin\gcc -mwindows -mno-cygwin -o test test.c 
```

它失败并出现错误：

> 对“_imp__PathAppendA@8”的未定义引用

当然，这对我来说有些愚蠢，但是有人可以告诉我我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-08T08:30:34.563

您需要添加 shlwapi 库进行链接：

```
gcc -o test test.c -lshlwapi 
```

为我工作

# c++ - C++：在进程内存中搜索

> ID：623268
> 
> 赞同：2
> 
> 时间：2009-03-08T08:27:28.410
> 
> 标签：c++, visual-c++

通过已经给出特定进程的句柄，我如何进一步使用 VC++ 在其内存中搜索特定关键字（字节、整数（2 字节）、文本（数组））？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T08:45:12.970

我认为您想扫描另一个进程的原始内存。根据定义，进程相互隔离并且应该具有完全独立的地址空间（您的地址 0x06573AF8 包含与另一个进程地址空间中的相应地址完全不同的东西）。

但是，有很多方法可以解决这个问题：在 Windows 中，经典的答案是编写一个特定的 DLL，然后将其注入到另一个进程的地址空间中。查看[CodeProject 以获得一些实践建议](http://www.codeproject.com/KB/threads/winspy.aspx)，或者更一般地说，[维基百科](http://en.wikipedia.org/wiki/DLL_injection)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T08:58:03.203

最简单的方法可能是使用 ReadProcessMemory。还可以考虑使用 WinDbg——它已经具备了这个功能。

# python - mysql + python 2.6 编程的最佳资源

> ID：623276
> 
> 赞同：0
> 
> 时间：2009-03-08T08:42:19.573
> 
> 标签：python, mysql

我需要一个很好的资源来使用 Python2.6 与 MySql（版本 5.0.45）进行交互。

我使用的是cherrypy、mako、标准库，仅此而已。

资源可以是博客、howtos、书籍（在线或离线）等等。

附加信息：

python mysql 模块 MySQLdb 与 Python DB-API 2.0 兼容。请参阅[http://sourceforge.net/projects/mysql-python](http://sourceforge.net/projects/mysql-python)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T09:30:25.043

Python 与 DB 的连接（大多数情况下）是通过 DBI（Python 数据库 API）实现的。Python DBI 有 2 个版本，它们的文档是您开始的地方： [v.1](http://www.python.org/dev/peps/pep-0248/)和[v.2](http://www.python.org/dev/peps/pep-0249/)。您必须检查 MySQL 连接器支持的版本并使用相应的规范版本。

有关 Python 和 MySQL 的更多详细信息，您可以找到有关[Using MySQL With Python](http://dev.mysql.com/usingmysql/python/)的好文章，这里是指导您完成大部分操作的文章：[使用 Python DB-API 编写 MySQL 脚本](http://www.kitebird.com/articles/pydbapi.html)

./亚历克斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-09T03:59:21.087

MySQL 和 Python 讨论： [http ://forums.mysql.com/list.php?50](http://forums.mysql.com/list.php?50)

# java - 如何部署小程序？

> ID：623282
> 
> 赞同：3
> 
> 时间：2009-03-08T08:53:04.510
> 
> 标签：java, build-process, applet

我已经构建了一个小小程序，并且拥有所有的 .java 类文件。我现在如何编译/构建它以便可以在`<applet>`标签中使用它？基于日食的方法将是最好的。

另外，我在小程序中使用了一些图像。

1) 我需要将这些图片上传到我的网站吗

2）现在我使用我的本地路径指向它们，例如`C:\java\project\images`，但它全部保存在 1 个类中，因此如果我愿意，我可以轻松更改此字符串。我应该将其更改为什么才能在网络浏览器中运行？

3) 我需要上传所有的 .class 文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T09:22:09.823

您需要上传所有内容，否则没有人可以下载它们！将所有内容打包到一个 Jar 中，然后让您的 applet 从中运行。有[很好的文档](http://java.sun.com/j2se/1.4.2/docs/guide/misc/applet.html)可以在整个网络上推出小程序。

对于您的图像，您有两种选择。将它们包含在 jar 中，或者在运行时通过 HTTP 使它们可用。无论哪种方式，您都必须更改从 C: 驱动器加载它们的代码！将它们包含在 jar 中可能是最好的 - 无论如何您都会下载它们，并且在一次交易中使用 jar 会更好。

Eclipse 可以使用 Ant 自动为您完成这一切，但我会首先手动完成以确保您了解正在发生的事情。您需要为您的小程序和一个 HTML 页面构建一个 jar 来启动它，然后将它们都上传到您的网络服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T13:31:28.087

您肯定需要将您的小程序和图像捆绑在 jar 文件中。

如果图像非常大，并且 Applet 中可能并不总是需要所有图像，则将它们作为单个文件部署在您的网络服务器上，否则将它们与 Applet 一起打包到 jar 中。

如果您将带有 Applet 的图像打包到它的 jar 中，那么您应该使用 Class.getResourceAsStream(...) 从类路径加载它们

如果它们可作为单独的图像文件使用，则从那里的 URL 加载它们。

# security - 可以欺骗“x-requested-with”http 标头吗？

> ID：623299
> 
> 赞同：9
> 
> 时间：2009-03-08T09:14:15.643
> 
> 标签：security, http

我的研究表明，只有 Host、Referer 和 User-Agent 标头可以被欺骗。（[来源](http://download2.rapid7.com/r7-0026/)）

这是一个正确的假设吗？我正在构建的站点的安全性可能要求不能伪造“x-requested-with”。这远非理想，但可能是我唯一的途径。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-08T09:18:52.810

> 我正在构建的站点的安全性可能要求不能伪造“x-requested-with”

HTTP 中的任何内容都可以被欺骗。“欺骗性”的水平很难确定。使用我想要的任何标头值来制作请求是相当简单的。

如果这是您唯一的选择，那就这样吧，但我不想使用依赖它来处理任何重要事情的网站。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-08T09:18:41.330

每个标题都可以被欺骗。任何以 x- 开头的标题都是非标准的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-26T12:05:07.797

刚刚遇到这个问题，正在寻找其他东西，这是我的答案：

要记住的一般安全原则：任何数据都可以更改。

现在从实际的角度来看会发生什么：您对堆栈（传输、网络、链接...）的操作越往下，更改数据就越困难，因为您更可能无法使用所需的工具首先并需要系统修改（例如，如果您有兴趣，可以重新编译一个 linux 内核来搞乱以太网/IP 堆栈）。

谈到 HTTP，那是应用层，做任何你想做的事都变得非常容易。您会发现大量的工具可以让您从非常基本的网络工具（nc、telnet...）到更高级的（cUrl、Fiddler...）生成任何自定义 HTTP 请求。

所以 NO 仅仅存在 x-requested-with 标头不能被视为适当的安全性。

虽然它可能对低安全级别的情况很有用，但它绝对不会阻止愿意越过它的攻击者。记住安全性的第一条原则：没有系统是不可穿透的，它必须足够安全以使破坏尝试变得毫无价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-24T16:25:08.817

它可以被使用`curl`或浏览器扩展的人欺骗。

但是，如果将其用作反 CSRF 措施（[请参阅此处](https://stackoverflow.com/a/22533680/413180)），则不能轻易被欺骗，因为攻击者不是浏览器的人。要欺骗它，您将需要答案中解释的 Flash 漏洞利用，或者在目标服务器上设置 CORS 并使用宽松的权限。

# sql-server - SQL Server 恢复和批量恢复模式混淆

> ID：623315
> 
> 赞同：2
> 
> 时间：2009-03-08T09:28:29.167
> 
> 标签：sql-server, recovery, bulk, recoverymodel

我对 SQL Server 恢复和批量恢复模式有 2 个困惑。

1.  恢复过程本身是否会生成事务日志（这里我的意思是日志是恢复过程生成的日志——如果有，而不是由正常的数据库 DML/DDL 操作生成）？为什么？

2.  在批量恢复模式下，对A或B的理解是否正确（如果都不正确，请帮助纠正我，这是我的2个不同的理解，让我感到困惑）

A. 对产品数据库进行正常的DML/DLL批量操作（不是恢复操作）会产生最小量的日志，由于日志是最小的，利用日志的恢复过程，不能恢复批量操作中间的任何点；B. 对产品数据库正常的DML/DLL批量操作仍然会产生正常的大量日志（与非批量日志恢复模式相同），但恢复过程会将事务日志中的批量操作作为一个单元进行恢复，从而产生恢复过程本身的最少日志；

问候，乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T09:53:25.067

请阅读以下两篇文章：

[http://technet.microsoft.com/en-us/magazine/2009.02.logging.aspx](http://technet.microsoft.com/en-us/magazine/2009.02.logging.aspx)

[http://www.simple-talk.com/sql/backup-and-recovery/simple-talk-sql-server-backup-crib-sheet/](http://www.simple-talk.com/sql/backup-and-recovery/simple-talk-sql-server-backup-crib-sheet/)

恢复过程不会创建日志。日志是执行时间点恢复过程所必需的（以及完整的数据库备份，可能还有差异备份）。

> 具有“批量记录”恢复的数据库的功能与“完整”数据库非常相似，只是备份中只记录批量操作的效果，而不是所涉及的事务。这些批量操作包括 BCP、某些数据转换服务 (DTS) 操作、图像和文本操作以及 SELECT INTO。通过使用“批量记录”恢复模型，批量操作被取消记录，因此速度更快。如果发生了这些批量操作之一，则不可能进行时间​​点恢复，因为如果日志备份涵盖任何批量操作，则日志备份包含日志记录和被批量操作更改的数据页，这适用于备份日志之前的所有更改。

# logging - 如何设计日志级别名称。反映使用频率？

> ID：623321
> 
> 赞同：3
> 
> 时间：2009-03-08T09:33:10.187
> 
> 标签：logging

我要建立一个伟大的系统。考虑日志级别命名让我想知道。

1.  我可以选择名称，以便管理员和开发人员知道使用哪个名称。不使用文档？

如果日志级别也能反映它们在日志中出现的**频率**，那就太好了。

例如：

*   INIT/SHUTDOWN - （出现一次）
*   FUNC_CALL - （出现频繁，例如在循环中）
*   TRACE -（函数中的几次）

现在，系统管理员永远不会在生产环境中打开 TRACE 日志记录。他可以安全地打开 INIT/SHUTDOWN。如果系统中的流量较低，则为 FUNC_CALL。

这个设计有什么问题？

你会用什么名字来反映频率？

（我知道 WARN、INFO 和 ERROR。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-10T02:04:05.663

I'd go with more self-describing names, like:

*   EVERYTHING_IS_BROKEN_IMMEDIATE_ATTENTION_REQUIRED
*   RARE_IMPORTANT_EVENT (which includes init/shutdown)
*   DETAILED_EXECUTION_TRACE
*   TONS_OF_DEBUGGING_INFORMATION

Maybe not exactly these ones but you get the idea — make sure it is absolutely impossible to be confused about what each log level means. (I also used the “trace” term in a more conservative sense — a list of function calls **is** actually a trace, so FUNC_CALL and TRACE sound as synonyms to me)

Also be sure not to make log levels that noone should disable. I personally have always found the default ERROR/WARNING/INFO levels silly because they are very misleading (is a request for a non-existing item an error?)

Also would be good if noone can (accidentally) disable EVERYTHING_IS_BROKEN_IMMEDIATE_ATTENTION_REQUIRED and RARE_IMPORTANT_EVENT levels.

Don't be afraid to use long names, IDEs will auto-complete them anyway. Better to have longer names than messed up logs.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T09:56:56.993

日志的问题是确保它们实际上*不会*显示太多，因为这是使系统完全停止的最可靠方法。
（日志文件已满，处理速度慢得多，因为要构建一些复杂的日志消息，日志条件一遍又一遍地重复，...）

然后，看起来 FUNC_CALL 和 TRACE 是预生产步骤的好名称，当您出于测试原因想查看究竟执行了什么时。

但是在生产中应该只保留与功能相关的日志（通常是关于功能特性的 WARNING 和 SEVERE 日志），即使是那些也可能是危险的（尤其是在数千个实例的循环中的 WARNING）。

所以实际上，无论您选择什么名称，您都必须在文档中包含有助于将您的应用程序投入生产的文档，您希望哪些确切的日志级别保持活动状态，以及哪些包。在正确之前需要多次尝试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-15T16:54:38.147

关于日志要记住的最重要的一点是，它们不应该被写成好像开发人员是观众一样。几乎在所有情况下，管理或操作人员都会阅读日志。在许多情况下，它们会被另一个程序读取。

因此，我始终建议通过所需响应的即时性来区分日志。Andrey 的日志级别名称可能有点开玩笑，但这个概念是正确的。日志级别应反映以下内容：

*   （最高）系统损坏 - 需要立即干预
*   可能的破损或发展中的问题 - 需要进行调查，并可能进行干预
*   状态/信息报告 - 常规心跳或摘要统计

最后一个有两个目的，一个是明显的，一个是微妙的。公开的目的是记录有关应用程序运行状况和性能的一些有用信息。其次，日志中的常规输出让操作员知道应用程序仍在正常运行。（即，如果我在过去 3 小时内看到一个没有新条目的日志文件，我可能会认为它已经死了。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-08T10:28:25.560

在现有的日志框架（如 log4j）中，严重性级别和程序中的位置是两个正交的概念。

Log4j 定义了以下级别：TRACE、DEBUG、INFO、WARN、ERROR 和 FATAL，但也可以根据完成日志的类过滤输出。

# css - 如何让浮动 DIV 填充其父 DIV 中的可用空间？

> ID：623325
> 
> 赞同：24
> 
> 时间：2009-03-08T09:38:51.263
> 
> 标签：css

如何获得正确的浮动 DIV 来填充其可用空间？

```
 .content{
            background-color: #fff;
            margin: 0px auto;
            width: 760px;
            border: 1px solid blue;
            font-size: 10pt;
        }

        .content .leftSide {
            background-color: yellow;
            float: left;
            padding: 5px;
        }

        .content .rightSide {
            background-color: orange;
            float: left;
            width: *;
            padding: 5px;
            text-align: center;
        }
```

```
<div class="content">

        <div class="leftSide"><img src="test.jpg"/></div>
        <div class="rightSide">Right side text should be centered.</div>
        <div style="clear:both"></div>

</div>

<div class="content">
        <div class="leftSide"><img src="test2.jpg"/></div>
        <div class="rightSide">And the background should fill the DIV of course.</div>
        <div style="clear:both"></div>

</div>
```

## 中间答案：

感谢 Guffa 和 Rich，将 float:left 放在右侧允许文本居中，但要让背景颜色向下延伸，我还必须制作父 DIV 的背景颜色。

但是，**我仍然无法让文本在中间垂直对齐，因为 DIV 实际上并没有一直向下**，是否也有“自动”？例如高度：*，或浮动：自动？正如 Cletus 下面提到的，这在 HTML 表格中都是微不足道的，CSS 设计者肯定包含了一些属性来“使垂直空间向下填充”。

[替代文字 http://tanguay.info/web/external/cssRightFixed.png](http://tanguay.info/web/external/cssRightFixed.png)

```
.content{
          background-color: orange;
          margin: 0px auto;
          width: 760px;
    			border: 1px solid blue;
    			font-size: 10pt;
    		}

    		.content .leftSide {
    			background-color: yellow;
    			float: left;
    			padding: 5px;
    		}

    		.content .rightSide {
    			background-color: orange;
    			padding: 5px;
    			text-align: center;
			    vertical-align: middle; 
   /* DOESN'T WORK SINCE THE DIV DOES
      NOT ACTUALLY GO ALL THE WAY DOWN */
    		}
```

```
<div class="content">
    		<div class="leftSide"><img src="test.jpg"/></div>
    		<div class="rightSide">Right side text should be centered.</div>
    		<div style="clear:both"></div>
    	</div>
    	<div class="content">
    		<div class="leftSide"><img src="test2.jpg"/></div>
    		<div class="rightSide">And the background should fill the DIV of course.</div>
    		<div style="clear:both"></div>
    	</div>
    	<div class="content">
    		<div class="leftSide"><img src="test3.jpg"/></div>
    		<div class="rightSide">And the background should fill the DIV of course.</div>
    		<div style="clear:both"></div>
    	</div>
    	<div class="content">
    		<div class="leftSide">this is a text on the left with no image</div>
    		<div class="rightSide">And the background should fill the DIV of course.</div>
    		<div style="clear:both"></div>
</div>
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-08T09:56:04.267

如果你使用浮动，你几乎需要给它们宽度。如果您指定宽度，或者您对浏览器计算的最小所需宽度感到满意，则浮动很好。一旦您需要它们扩展以填充可用空间，您就不走运了。

事实上，你使用了错误的工具。

所以你有两种可能：

1.  固定浮动的大小；或者
2.  使用一张桌子。

对于表格，这是一个需要解决的小问题（等待反表格的纯 CSS 狂热者发疯）。

**编辑：**好的，你也想做垂直居中。现在你真的有麻烦了。请参阅[您可以在不使用表格的情况下进行此 HTML 布局吗？](https://stackoverflow.com/questions/522928/can-you-do-this-html-layout-without-using-tables)对于使用纯 CSS 甚至简单的布局有多难，特别是当您想要进行垂直居中（当容器或子项不是固定高度时）或并排内容时。

同样，表使这变得微不足道`vertical-align: middle`。

如果您想了解有关使用纯 CSS 进行垂直居中的更多信息，请参阅：

*   [CSS中的垂直居中](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)：三层嵌套的div......只是为了获得垂直居中；
*   [如何：使用 CSS 垂直居中](http://hicksdesign.co.uk/journal/how-to-vertical-centering-with-css)；和
*   [使用 CSS 垂直居中](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T10:29:28.117

这应该做你想要的。如果您还浮动左侧，则无需浮动右侧。只要让右手边正常，它就会默认填满可用空间。

```
 .content{
          background-color: orange;
          margin: 0px auto;
          width: 760px;
          border: 1px solid blue;
          font-size: 10pt;
          overflow: auto;
  }

  .content .leftSide {
          background-color: yellow;
          float: left;
          padding: 5px;
  }

  .content .rightSide {
          padding: 5px;
          text-align: center;
  }
```

```
<div class="content">
    <div class="leftSide"><img src="test.jpg"/></div>
    <div class="rightSide">Right side text should be centered.</div>
</div>
<div class="content">
    <div class="leftSide"><img src="test2.jpg"/></div>
    <div class="rightSide">And the background should fill the DIV of course.</div>
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T11:15:34.060

我倾向于同意“使用表格”的拥护者，但在搞砸了一段时间之后（以一种不知道我在做什么的方式）我想出了这个变体，它解决了 Firefox 中的垂直对齐问题， Safari、Chrome 等，在 IE 中并没有让情况变得更糟。

（我的更改在缩进较少的行上）

```
<html>
<head>
    <style type="text/css">
        .content{
                background-color: orange;
                margin: 0px auto;
                width: 760px;
                border: 1px solid blue;
                font-size: 10pt;
            display:table;
        }

        .content .leftSide {
                background-color: yellow;
                float: left;
                padding: 5px;
        }

        .content .rightSide {
            border:1px solid black; /* for debugging */
            display:table-cell;
            width:100%;
                background-color: orange;
                padding: 5px;
                text-align: center;
                vertical-align: middle; /* DOESN'T WORK IN IE */
        }
      .content .text {
          width:150px;
      }
    </style>
</head>

<body>
    <div class="content">
        <div class="leftSide"><img src="test.jpg"/></div>
        <div class="rightSide">Right side text should be centered.</div>
        <div style="clear:both"></div>
    </div>
    <div class="content">
        <div class="leftSide"><img src="test2.jpg"/></div>
        <div class="rightSide">And the background should fill the DIV of course.</div>
        <div style="clear:both"></div>
    </div>
    <div class="content">
        <div class="leftSide"><img src="test3.jpg"/></div>
        <div class="rightSide">And the background should fill the DIV of course.</div>
        <div style="clear:both"></div>
    </div>
    <div class="content">
      <div class="leftSide text">this is a text on the left with no image</div>
        <div class="rightSide">And the background should fill the DIV of course.</div>
        <div style="clear:both"></div>
    </div>
</body>

</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T10:21:11.677

只需删除类`float:left;`中的`.rightSide`（和`width:*;`）。

div 的默认宽度是`auto`，这使得它使用可用的宽度。

编辑：
这是更改的代码：

```
<html>
<head>
    <style type="text/css">
        .content{
                background-color: #fff;
                margin: 0px auto;
                width: 760px;
                border: 1px solid blue;
                font-size: 10pt;
        }

        .content .leftSide {
                background-color: yellow;
                float: left;
                padding: 5px;
        }

        .content .rightSide {
                background-color: orange;
                padding: 5px;
                text-align: center;
        }
    </style>
</head>

<body>
    <div class="content">
        <div class="leftSide"><img src="test.jpg"/></div>
        <div class="rightSide">Right side text should be centered.</div>
        <div style="clear:both"></div>
    </div>
    <div class="content">
        <div class="leftSide"><img src="test2.jpg"/></div>
        <div class="rightSide">And the background should fill the DIV of course.</div>
        <div style="clear:both"></div>
    </div>
</body>

</html> 
```

# unicode - 如何将 *.txt 文件转换为 Unicode

> ID：623330
> 
> 赞同：6
> 
> 时间：2009-03-08T09:42:21.270
> 
> 标签：unicode

我有一个要求，客户端将提供编码为 ANSI 的文件，但我的系统只能成功读取 UNICODE 中的文件。那么我该如何解决这个问题呢？我知道当我将文件“另存为”为 UNICODE 编码时，文件会被拾取。很难让客户同意我们的要求。那么我可以为这个文件夹提供任何批处理程序来将此文件转换为 UNICODE 然后拿起吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-08T10:17:26.227

[`iconv`](http://en.wikipedia.org/wiki/Iconv)可以这样做：

```
Usage: iconv [OPTION...] [FILE...]
Convert encoding of given files from one encoding to another.

 Input/Output format specification:
  -f, --from-code=NAME       encoding of original text
  -t, --to-code=NAME         encoding for output

 Information:
  -l, --list                 list all known coded character sets

 Output control:
  -c                         omit invalid characters from output
  -o, --output=FILE          output file
  -s, --silent               suppress warnings
      --verbose              print progress information

  -?, --help                 Give this help list
      --usage                Give a short usage message
  -V, --version              Print program version

Mandatory or optional arguments to long options are also mandatory or optional
for any corresponding short options.

For bug reporting instructions, please see:
<http://www.gnu.org/software/libc/bugs.html>. 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-08T13:40:58.983

ANSI 和 Unicode 都不是编码。您必须知道输入文件的 ANSI 代码页和 Unicode 编码（UTF8 或 UTF16 - LE 或 BE），然后才能使用建议的工具之一（例如 iconv）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-08T09:49:50.067

[重新编码](http://www.gnu.org/software/recode/recode.html)可以完成这项工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-08T10:47:00.757

您还可以轻松地在 python 中转换编码：

```
inf = open("infile.txt")
data = inf.read().decode("latin1")
inf.close()

outf = open("outfile.txt", "w")
outf.write(data.encode("utf-8"))
outf.close() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-08T13:27:20.543

这是一个Powershell解决方案

```
$lines = gc "pathToFile"
$lines | out-file -enconding Unicode 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-20T22:18:37.453

您可以创建一个简单的 shell 脚本 ( `txt_convert.sh <infile> <outfile>`)：

```
#!/bin/sh

iconv -f `file -b --mime-encoding "$1"` -t utf8 "$1" -o "$2" 
```

或者只是使用：

```
iconv -f `file -b --mime-encoding "<infile>"` -t utf8 "<infile>" -o "<outfile>" 
```

说明：“file”命令将确定输入文件的编码，它将用作“iconv”的输入编码参数，在这种情况下，它将转换为 utf8（您可以用任何输出字符集替换 utf-8 like 和 iconv 支持（参见：iconv -l）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-06T02:43:45.887

我浏览了上面提到的一些工具，其中许多需要命令行。

**我找到了一种在Windows**中转换文件的更简单的方法。

1.  安装**Notepad2** ( [http://www.flos-freeware.ch/](http://www.flos-freeware.ch/) )。它是开源和免费的。

2.  打开文件有ANSI编码，

3.  双击底部的“ANSI”字，

4.  选择新的编码，例如“utf8”

5.  保存文件。

只需点击几下即可完成工作。

此外，您可以在完成后轻松查看内容以进行仔细检查。

Notepad2 比 Notepad 有很多好处。突出显示的代码、撤消/重做等。

:D

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-29T23:44:27.413

Ruby oneliner，fwiw：

```
ruby -e 'STDOUT.write STDIN.read.force_encoding(Encoding::WINDOWS_1252).encode!(Encoding::UTF_8)' < infile.csv > outfile.csv 
```

如果您的输入文件很糟糕，您可能需要`STDIN.binmode; STDOUT.binmode;`在 Ruby 脚本的前面加上大头针。

# c# - C# 中的 PathCanonicalize 等价物

> ID：623333
> 
> 赞同：9
> 
> 时间：2009-03-08T09:44:04.933
> 
> 标签：c#, filenames

什么是C#中的[PathCanonicalize等价物？](http://msdn.microsoft.com/en-us/library/bb773569(VS.85).aspx)

使用：我需要好好猜测两个文件路径是否引用同一个文件（没有磁盘访问）。我的典型方法是通过一些过滤器，如 MakeAbsolute 和 PathCanonicalize，然后进行不区分大小写的比较。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-08T09:49:59.537

**又快又脏：**

过去，我从路径字符串创建了一个[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)对象，然后使用了 FullName 属性。这将删除所有 ..\'s 和 .\'s。

当然你可以互操作：

```
 [DllImport("shlwapi", EntryPoint="PathCanonicalize")]
    private static extern bool PathCanonicalize(
        StringBuilder lpszDst,
        string lpszSrc
    ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-02T23:56:54.197

3个解决方案：

最佳情况下，您 100% 确定调用进程将拥有对文件系统的完全访问权限。 **CAVEAT：**生产盒的许可可能很棘手

```
 public static string PathCombineAndCanonicalize1(string path1, string path2)
    {
        string combined = Path.Combine(path1, path2);
        combined = Path.GetFullPath(combined);
        return combined;
    } 
```

但是，我们并不总是免费的。通常您需要在未经许可的情况下进行字符串算术运算。对此有本地要求。 **CAVEAT：诉诸**本地电话

```
 public static string PathCombineAndCanonicalize2(string path1, string path2)
    {
        string combined = Path.Combine(path1, path2);
        StringBuilder sb = new StringBuilder(Math.Max(260, 2 * combined.Length));
        PathCanonicalize(sb, combined);
        return sb.ToString();
    }

    [DllImport("shlwapi.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern bool PathCanonicalize([Out] StringBuilder dst, string src); 
```

第三种策略是欺骗 CLR。Path.GetFullPath() 在虚构的路径上工作得很好，所以只要确保你总是给它一个。您可以做的是用虚假的 UNC 路径替换根，调用 GetFullPath()，然后将真正的路径换回。 **注意：**这可能需要在代码审查中进行硬推销

```
 public static string PathCombineAndCanonicalize3(string path1, string path2)
    {
        string originalRoot = string.Empty;

        if (Path.IsPathRooted(path1))
        {
            originalRoot = Path.GetPathRoot(path1);
            path1 = path1.Substring(originalRoot.Length);
        }

        string fakeRoot = @"\\thiscantbe\real\";
        string combined = Path.Combine(fakeRoot, path1, path2);
        combined = Path.GetFullPath(combined);
        combined = combined.Substring(fakeRoot.Length);
        combined = Path.Combine(originalRoot, combined);
        return combined;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-01T23:01:07.997

`Path.GetFullPath()`不适用于相对路径。我一直在寻找一种也适用于相对路径的解决方案。

我尝试了很多方法，但都没有奏效。@Paul 的第三种策略不适用于 linux `\\`，并且存在相对路径的错误，因为它引入了一个文件夹，`..`结果会丢失一个。

这是适用于相对 + 绝对路径的解决方案。它适用于 Linux + Windows，并且`..`在文本开头保持预期（在休息时它们将被规范化）。该解决方案仍然依赖于`Path.GetFullPath`通过小变通方法进行修复。

这是一种扩展方法，所以像这样使用它`text.Canonicalize()`

```
/// <summary>
///     Fixes "../.." etc
/// </summary>
public static string Canonicalize(this string path)
{
    if (path.IsAbsolutePath())
        return Path.GetFullPath(path);
    var fakeRoot = Environment.CurrentDirectory; // Gives us a cross platform full path
    var combined = Path.Combine(fakeRoot, path);
    combined = Path.GetFullPath(combined);
    return combined.RelativeTo(fakeRoot);
}
private static bool IsAbsolutePath(this string path)
{
    if (path == null) throw new ArgumentNullException(nameof(path));
    return
        Path.IsPathRooted(path)
        && !Path.GetPathRoot(path).Equals(Path.DirectorySeparatorChar.ToString(), StringComparison.Ordinal)
        && !Path.GetPathRoot(path).Equals(Path.AltDirectorySeparatorChar.ToString(), StringComparison.Ordinal);
}
private static string RelativeTo(this string filespec, string folder)
{
    var pathUri = new Uri(filespec);
    // Folders must end in a slash
    if (!folder.EndsWith(Path.DirectorySeparatorChar.ToString())) folder += Path.DirectorySeparatorChar;
    var folderUri = new Uri(folder);
    return Uri.UnescapeDataString(folderUri.MakeRelativeUri(pathUri).ToString()
        .Replace('/', Path.DirectorySeparatorChar));
} 
```

# c# - 如何从自定义组件（WinForms）添加应用程序设置

> ID：623350
> 
> 赞同：1
> 
> 时间：2009-03-08T10:02:53.890
> 
> 标签：c#, winforms, application-settings, user-controls

我有一个 WinForms 用户控件，当添加到表单时，应该自动将一些元素添加到应用程序设置中。（当然，用户应该能够自定义/禁用此行为。）

这是可取的吗？这样做的“好”方法是什么？

**[编辑]**
该控件提供了文件菜单的默认实现，消费者只需在设计器中连接菜单/工具栏项，并实现一些基本事件。其中一部分是最近的文件列表，默认情况下应该记住它。

我同意消费者需要完全控制他是否希望自动添加这些设置。

到目前为止，我将文件列表公开为公共字符串属性，消费者可以将代码添加到 init 并将其存储在应用程序配置中/中。如果可能的话，我想进一步简化这一点，以便消费者只需提供设置变量，他希望将设置存储在其中（如果他想要的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-13T04:08:07.713

我认为您的控件不应该向配置文件添加任何内容，除非它被要求这样做。

尽管如此，如果用户“选择加入”这一点，那么我认为您将不得不为您的控件添加一些设计器支持。无论是通过 ToolBoxItem，还是通过在添加新控件时通知设计器，设计器都必须创建和/或更新所需的配置信息。

* * *

感谢您的澄清。您可能想查看[IPersistControlSettings 接口](http://msdn.microsoft.com/en-us/library/system.configuration.ipersistcomponentsettings.aspx)，尤其是它在 ApplicationSettingsBase 主题上的内容。该页面应引导您了解有关 .NET 2.0 中强类型设置的信息。它允许将默认设置烘焙到控件或其他库代码中，这样如果设置发生更改，更改将持续到应用程序的配置文件中，无论是每个用户还是应用程序范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-13T04:11:22.637

我认为这取决于您将从具有可用体验的控件的消费者那里获得多少价值。你卖这个控件吗？是供内部使用吗？如果这是供内部使用的，那么创建设计时体验所需的努力可能会令人望而却步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T11:47:51.017

在您的控件构造函数中，您可以检查 (LicenseManager.UsageMode == LicenseUsageMode.Designtime) 然后检查配置条目等，但我认为这是一个坏主意

如果存在，您的控件可以支持配置条目，如果不存在，则具有一些默认行为。作为开发人员，这对我来说似乎更容易接受

无论哪种方式，您都应该使用自定义配置部分

您可以提供一个自定义配置部分处理程序作为控件的一部分，因此只需将此部分连接到配置文件中（如果用户需要）

# oop - 业务对象与实体

> ID：623352
> 
> 赞同：13
> 
> 时间：2009-03-08T10:03:39.583
> 
> 标签：oop

业务对象和实体之间有区别吗？

如果我要定义 POCO 类型的类，比如 Product 类，那是业务对象还是实体？

```
public class Product {
    public int ID { get; set; }
    public string Name { get; set; }
    public double Price { get; set; }
    public string Sku { get; set; }
} 
```

请注意，此对象中*没有任何*功能。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-08T16:19:41.393

我将其称为 DTO（数据传输对象）。过去我也看到它们被称为“属性类”。我不会称它为业务对象，因为它没有行为，并且根据定义，BO 是由它们的行为定义的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-08T16:31:18.073

所有实体都是业务对象，但并非所有业务对象都是实体。

实体是业务对象，其身份不是由它们的属性定义的，而是由标识符定义的，比如产品的 ID。

不是实体的业务对象的示例可以是颜色。颜色从它的 RBG 值中获得它的身份。

当然，我指的是[域驱动设计中的实体和值对象](https://web.archive.org/web/20161024152003/http://devlicio.us:80/blogs/casey/archive/2009/02/13/ddd-entities-and-value-objects.aspx)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-08T10:11:20.623

我认为它们是相同的，尽管如果您的业务层中有一些类似控制器的类（在您的域模型上运行），它们可能不会被称为实体。我会说像 Product 这样的类既是业务对象又是实体，而 ProductController 只是一个业务对象。一个实体代表一个领域模型对象——一个用户、一本书、一辆车等，也包含它自己的数据。我认为这只是命名问题，并不重要，我倾向于互换使用这两个术语，但通常会使用我上面描述的“规则”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-08T10:39:52.647

根据我的经验，实体通常与[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)相关联。业务对象也可以是非持久性对象，例如[策略](http://en.wikipedia.org/wiki/Strategy_pattern)、策略等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-08T10:10:34.917

我认为业务对象和实体之间没有明显的区别。不同的从业者似乎使用不同的版本。

[请参阅Ayende](http://ayende.com/Blog/archive/2007/02/07/Entity-vs.-Business-Object.aspx)的这些评论。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-08T10:35:28.790

“实体”一词通常用作“事物”的一种更自命不凡的说法。例如，考虑实体关系图 - 显示事物之间关系的图。

业务对象只是业务领域中的事物（哎呀，实体）。我会说您的产品是一个商业实体 - 将它与一个字符串进行比较，这是实现域中的一个东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-28T23:01:07.513

> 业务对象和实体之间有区别吗？

维基百科将[“业务对象”](http://en.wikipedia.org/wiki/Business_object)定义为与我所说的“实体”相同。我对这个定义的困惑在于“业务”一词，因为“业务逻辑”与实体正交。“实体”（DTO、“数据实体”等）是具有字段和获取/设置类型方法的对象。它保存数据，但包含最少的（如果有的话）逻辑。

“业务逻辑”或“业务规则”对象封装了与这些实体一起工作所需的高阶逻辑。它使用实体中的字段来做出决策，并根据需要修改和保留实体。

# exception - 捕捉出口（1）；

> ID：623353
> 
> 赞同：5
> 
> 时间：2009-03-08T10:04:47.287
> 
> 标签：exception, visual-c++, dll, exit, minidump

我有一个 MFC SDI 应用程序，它在启动期间加载一个 DLL。我只能查看源代码并使用 DLL，但不能更改和重新编译它。

现在的情况是，每当 DLL 遇到错误时，它都会调用 exit()，如下所示。

```
bool Func()
{
  // .. do something here

  if (error) { exit(999); }
} 
```

在我的 MFC 应用程序中，我设置了 SetUnhandledExceptionFilter 来处理所有异常，还创建了一个 MiniDump 用于调试目的。

所以现在的问题是，每当 DLL 遇到任何错误时，它只会使用状态码 999 调用 exit()，而我的 ExceptionFilter 不会捕获它，因此不会为 PostMortem 调试创建 MiniDump。

我想知道是否：
1\. 我的全局异常处理程序是否有其他方法可以捕获这个？
2\. 我可以重写exit() 函数，以便在调用它时，我调用它“throw(”error遇到！“)”并且我的全局异常处理程序可以捕获它。
3\. 我尝试在我的 MFC 应用程序中使用 atexit()，借此我注册另一个函数以在 DLL 调用 exit() 时抛出错误。但这似乎也不起作用。

我真正想做的是，每当 DLL 遇到错误时，我都希望生成一个 MiniDump，这样我就可以进行事后调试。在这种情况下还有什么其他可能有用的吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-20T15:06:40.613

检查 DLL 的符号导入表。

您也许可以在运行时将其重新映射到您选择的函数。

怎么做（假设有出口）：

大多数 DLL 通过跳转表使用符号导入。如果你在调用者上设置一个断点，你会看到它调用了一个长跳转指令。跳转表是一个 PAGE_EXECUTE_READWRITE 页，因此您可以简单地用您自己的地址覆盖跳转表的那个槽。

跳转表的位置会有所不同，但它始终是与加载地址的恒定偏移量，因此从任何函数指针到 GetProcAddress 找到的 DLL 中的偏移量都是恒定的。

当然，所有这些都假设 DLL 永远不会改变。可能有一种方法可以在运行时找到所有这些东西，但我不知道你会怎么做。

哦，你不能从 exit() 返回。你必须跳远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-29T17:54:30.213

这是我编写的一个宏，用于在 exit() 函数中放置断点：

```
Imports System.IO

' Sets breakpoints on all exit functions.  useful for catching library code that 
' calls exit in the debugger.
Sub AddBreakpointsToExit()
    Dim bp As EnvDTE.Breakpoint
    Dim bps As EnvDTE.Breakpoints

    Dim envVar As String = "VS90COMNTOOLS"
    Dim comnTools As String = System.Environment.GetEnvironmentVariable(envVar)
    If (String.IsNullOrEmpty(comnTools)) Then
        Throw New System.Exception("Environment variable '" + envVar + "' doesn't exist.")
    End If
    Dim filePath As String = System.IO.Path.Combine(comnTools, "..\..\VC\crt\src\crt0dat.c")

    ' set exit function names and line #s:
    Dim exitFunctions(0 To 4) As String
    exitFunctions(0) = "exit"
    exitFunctions(1) = "_exit"
    exitFunctions(2) = "_cexit"
    exitFunctions(3) = "_c_exit"

    ' line numbers are based on the Visual Studio 2008 definition.
    ' TODO: check and add options if 2005 or 2010 are differen.t
    Dim exitLines(0 To 4) As Integer
    exitLines(0) = 412
    exitLines(1) = 420
    exitLines(2) = 427
    exitLines(3) = 434

    ' set breakpoints:
    For i = 0 To 3 Step 1
        bps = DTE.Debugger.Breakpoints.Add(File:=filePath, Line:=exitLines(i))
    Next i

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-05T23:32:56.673

当进程正常退出时，每个 DLL 都会收到一个[DLL_PROCESS_DETACH 通知](http://msdn.microsoft.com/en-us/library/ms682658%28VS.85%29.aspx)。编写自己的 DLL 以捕获此通知的唯一目的如何？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-20T14:34:57.270

我还没有找到解决方案，但这是您的处理程序没有帮助的一个可能原因`atexit`：dll 可能静态链接到 CRT。这意味着 exit() 的代码直接内置到 dll 中，这将为其提供自己的退出处理程序私有列表，因此从您的主机进程中注册的 atexit 处理程序将永远不会被看到。如果您能够`atexit()`从 dll 中调用（这将很难安排），它可能会起作用。

只是一个猜测-希望有所帮助。

# svn - 升级到 SVN 1.5

> ID：623366
> 
> 赞同：3
> 
> 时间：2009-03-08T10:18:05.490
> 
> 标签：svn, upgrade

据我了解，svn 1.5 为合并操作提供了更好的支持。所以我正在考虑从 svn 1.4 升级。存储库位于本地文件中（或多或少），我从命令行使用 svn。

我可以期待什么障碍以及 svn 1.5 如何在没有合并数据的情况下处理现有存储库？

**编辑：** 特别是，在我运行之后`svnadmin upgrade`，svn 将如何处理 1.4 时代最后一次合并的分支的合并？

和这`svn-populate-node-origins-index`有什么关系吗？

参考：[http ://subversion.tigris.org/svn_1.5_releasenotes.html](http://subversion.tigris.org/svn_1.5_releasenotes.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-09T09:22:14.993

升级应该很顺利，但是在填充合并信息之前，您不会获得任何神奇的合并好处 - 在您开始使用它之前不会发生。

我发现的合并信息的唯一切实好处是能够查看两个分支之间的潜在合并列表，并*知道*哪些修订已经被合并。它不会直接影响诸如生成的冲突数量之类的事情，但确实可以让您在跟踪发生的情况时保持理智。在升级之前执行的合并不会导致问题，即使它们已经完成，它们也会再次显示为潜在的合并。

也就是说，合并信息只是一个名为 svn:mergeinfo 的 svn 属性，其格式为：

```
/Project/name/trunk:1355-3985,4019,4026-4437,4478,4481 
```

这是我们项目发布分支之一的实际合并信息，它准确地告诉我们主干中的哪些修订即将发布。这意味着，在您需要它的地方以及可以解决的地方，您可以手动填充合并信息并获得所有好处——这就是我们在上面的早期修订中所做的。

查看[reshard.py](http://subversion.tigris.org/tools_contrib.html#fsfs_reshard_py)也可能是值得的，特别是如果存储库很大并且在 Windows 上。1.4 fsfs 存储库格式将所有修订版放在同一文件夹中的单独文件中，Windows 在几千个修订版后开始抓取。1.5 分片将修订分组到单独的文件夹中，每个文件夹有 1000 个。1.6 将允许我们将旧版本合并到一个大的修订文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T10:22:18.507

升级很简单。Subversion 在大多数方面都是向后兼容的。但是，您应该使用`svnadmin upgrade`.

据我了解，合并跟踪仅适用于升级后的合并。没有真正的方法来重建丢失的信息。

此外，[svn-populate-node-origins-index](http://svn.collab.net/repos/svn/trunk/tools/server-side/svn-populate-node-origins-index.c)应该在该存储库上运行，但原因在链接文件中列出（请参阅usage_summary）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T11:37:55.783

根据您的开发环境，您可能需要更新绑定。例如，Netbeans 6.2 不适用于 SVN 1.5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T11:54:09.817

有许多工具可以将存储库从 subversion/cvs 转换为完全不同的类型。尽量不要争论，我建议您查看所有其他选项并自己决定是否有任何选项可以使生活变得更轻松，例如分布式版本控制系统。[Git](http://whygitisbetterthanx.com/)是一个声称更好的。

# cocoa - 将应用程序添加到“启动项”

> ID：623371
> 
> 赞同：1
> 
> 时间：2009-03-08T10:25:53.070
> 
> 标签：cocoa, checkbox, startup

一些应用程序有一个“登录时开始”的检查按钮......

[开始登录 http://b2.s3.p.quickshareit.com/files/growlstartup49525.png](http://b2.s3.p.quickshareit.com/files/growlstartup49525.png)

你将如何实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T16:24:41.680

请参阅我对先前问题的回答[Register as Login Item in Cocoa](https://stackoverflow.com/questions/608963/register-as-login-item-with-cocoa/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T10:29:41.720

Growl 是[开源](http://growl.info/source.php)的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T11:01:13.063

根据贾斯汀威廉姆斯的说法，这会做到：http: [//carpeaqua.com/2008/03/01/adding-an-application-to-login-items-in-mac-os-x-leopard/](http://carpeaqua.com/2008/03/01/adding-an-application-to-login-items-in-mac-os-x-leopard/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-12-29T08:21:41.717

**将这部分代码复制到 .m 文件中：**

```
- (void)awakeFromNib
{

    [self setShouldStartGrowlAtLogin:1];

}

- (BOOL) shouldStartGrowlAtLogin {
    Boolean    foundIt = false;

    //get the prefpane bundle and find GHA within it.
    NSBundle *prefPaneBundle = [NSBundle bundleWithIdentifier:@"com.yourcompany.Menu_Item"];

    NSString *pathToGHA   = [prefPaneBundle bundlePath ];
    //pathToGHA = [pathToGHA stringByAppendingPathComponent: @"/Contents/MacOS/Menu\ Item"];

    NSLog(@"%@", pathToGHA);    

    if(pathToGHA) {
        //get the file url to GHA.
        CFURLRef urlToGHA = CFURLCreateWithFileSystemPath(kCFAllocatorDefault, (CFStringRef)pathToGHA, kCFURLPOSIXPathStyle, true);

        UInt32 seed = 0U;
        NSArray *currentLoginItems = [NSMakeCollectable(LSSharedFileListCopySnapshot(loginItems, &seed)) autorelease];
        for (id itemObject in currentLoginItems) {
            LSSharedFileListItemRef item = (LSSharedFileListItemRef)itemObject;

            UInt32 resolutionFlags = kLSSharedFileListNoUserInteraction | kLSSharedFileListDoNotMountVolumes;
            CFURLRef URL = NULL;
            OSStatus err = LSSharedFileListItemResolve(item, resolutionFlags, &URL, /*outRef*/ NULL);
            if (err == noErr) {
                foundIt = CFEqual(URL, urlToGHA);
                CFRelease(URL);

                if (foundIt)
                    break;
            }
        }

        CFRelease(urlToGHA);
    }
    else {
        NSLog(@"APP: your install is corrupt, you will need to reinstall\nyour prefpane bundle is:%@\n your pathToGHA is:%@", prefPaneBundle, pathToGHA);
    }

    return foundIt;
}

 - (void) setShouldStartGrowlAtLogin:(BOOL)flag {
    //get the prefpane bundle and find GHA within it.
    NSBundle *prefPaneBundle = [NSBundle bundleWithIdentifier:@"com.yourcompany.Menu_Item"];

    NSString *pathToGHA   = [prefPaneBundle bundlePath ];

    [self setStartAtLogin:pathToGHA enabled:1];
}

 - (void) setStartAtLogin:(NSString *)path enabled:(BOOL)enabled {
    OSStatus status;
    CFURLRef URLToToggle = (CFURLRef)[NSURL fileURLWithPath:path];
    LSSharedFileListItemRef existingItem = NULL;

    UInt32 seed = 0U;
    NSArray *currentLoginItems = [NSMakeCollectable(LSSharedFileListCopySnapshot(loginItems, &seed)) autorelease];
    for (id itemObject in currentLoginItems) {
        LSSharedFileListItemRef item = (LSSharedFileListItemRef)itemObject;

        UInt32 resolutionFlags = kLSSharedFileListNoUserInteraction | kLSSharedFileListDoNotMountVolumes;
        CFURLRef URL = NULL;
        OSStatus err = LSSharedFileListItemResolve(item, resolutionFlags, &URL, /*outRef*/ NULL);
        if (err == noErr) {
            Boolean foundIt = CFEqual(URL, URLToToggle);
            CFRelease(URL);

            if (foundIt) {
                existingItem = item;
                break;
            }
        }
    }

    if (enabled && (existingItem == NULL)) {
        NSString *displayName = [[NSFileManager defaultManager] displayNameAtPath:path];
        IconRef icon = NULL;
        FSRef ref;
        Boolean gotRef = CFURLGetFSRef(URLToToggle, &ref);
        if (gotRef) {
            status = GetIconRefFromFileInfo(&ref,
                                            /*fileNameLength*/ 0, /*fileName*/ NULL,
                                            kFSCatInfoNone, /*catalogInfo*/ NULL,
                                            kIconServicesNormalUsageFlag,
                                            &icon,
                                            /*outLabel*/ NULL);
            if (status != noErr)
                icon = NULL;
        }

        LSSharedFileListInsertItemURL(loginItems, kLSSharedFileListItemBeforeFirst, (CFStringRef)displayName, icon, URLToToggle, /*propertiesToSet*/ NULL, /*propertiesToClear*/ NULL);
    } else if (!enabled && (existingItem != NULL))
        LSSharedFileListItemRemove(loginItems, existingItem);
} 
```

# c++ - 在代码中捕获异常

> ID：623373
> 
> 赞同：4
> 
> 时间：2009-03-08T10:28:57.103
> 
> 标签：c++, visual-studio-2008, exception, visual-c++, visual-c++-6

我正在尝试这段代码来检查是否捕获了除以零异常：

```
int main(int argc, char* argv[])
{
    try
    {
      //Divide by zero
        int k = 0;
        int j = 8/k;
    }
    catch (...)
    {
        std::cout<<"Caught exception\n";
    }
    return 0;
} 
```

当我使用 VC6 编译时，catch 处理程序被执行并且输出是“Caught exception”。但是，当我使用 VS2008 编译它时，程序在没有执行 catch 块的情况下崩溃了。造成这种差异的原因可能是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-08T10:44:14.493

在项目 -> 属性 -> 配置属性 -> c/c++ -> 代码生成 -> 启用 c++ 异常下启用结构化异常处理。

使用尝试除外。理想情况下，使用一个检查异常代码的过滤器，如果它想捕获，则返回常量信号。我在这里跳过了它，但我建议您[在此处](http://msdn.microsoft.com/en-us/library/s58ftw19(VS.80).aspx)查看过滤器的示例。

```
#include <iostream>
#include <windows.h>

int main(int argc, char* argv[])
{
    __try
    {
        //Divide by zero
        int k = 0;
        int j = 8/k;
    }
    __except(EXCEPTION_EXECUTE_HANDLER)
    {
        if(GetExceptionCode()==EXCEPTION_INT_DIVIDE_BY_ZERO)
            std::cout << "Caught int divison exception\n";
        else
            std::cout << "Caught exception\n";

        system("pause");
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T10:38:34.040

您正在捕获由 Microsoft 的结构化异常处理 (SEH) 层生成的异常，该层是 Microsoft 特有的操作系​​统事物。正如 Mykola 建议的那样，您可能需要调整编译器选项，但请注意，此代码将无法移植到其他操作系统甚至 Windows 上运行的其他编译器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T10:57:34.087

转到您的项目属性，在 C/C++，代码生成下，您将找到“启用 C++ 异常”。将此选项更改为“是，有 SEH 例外”

请注意，您只能使用以下任一方法捕获此类异常：

*   `try {} catch(...) {}` （带省略号）
*   `__try {} __except() {}`（在 中带有适当的过滤器`__except`）
*   通过使用`SetUnhandledExceptionFilter()`

有关有效值，`__except` [请参见此处](http://msdn.microsoft.com/en-us/library/s58ftw19(VS.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T10:34:06.983

在 Visual Studio 的情况下，它可以是编译器选项。但按照标准，不会抛出异常。

# iphone - Segmentcontrol 加载颜色？

> ID：623377
> 
> 赞同：0
> 
> 时间：2009-03-08T10:30:29.690
> 
> 标签：iphone, objective-c

我的段控制栏有一些问题。我试图用这个使它成为灰色/黑色：

segmentControl3.tintColor = [UIColor colorWithRed:0.60 green:0.60 blue:0.60 alpha:1.0];

在我的 getSegment 操作下，当我单击它时效果很好。但我的问题是加载颜色是标准的蓝色，我似乎无法在任何地方改变它......我试图将它放在 viewDidLoad 下，但没有看到工作。我已经阅读了 UICatalog 示例，但其中所有内容都在代码中声明。这是唯一正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T12:25:53.953

您应该能够使用 tintColor 更改控件的颜色；尝试将其放在 viewWillAppear: 中。还要确保您的插座设置正确。我在几个应用程序中使用它。

你可以使用 [UIColor colorWithWhite: 0.6 alpha: 1.0] 来节省一点代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-11T23:46:07.473

我犯了一个错误，我通过指针类型而不是插座来引用分段控件。现在一切正常:) 感谢您的所有帮助，直到现在才理解它：D

# svn - 获取远程存储库的修订号

> ID：623378
> 
> 赞同：9
> 
> 时间：2009-03-08T10:30:33.120
> 
> 标签：svn, webdav, revision

在本地机器上，使用 . 获取 subversion 存储库的修订号没有问题`svnversion`。现在我想从我的在线存储库（带有 Apache2 的 WebDAV）中获取修订号。

我试过这个：

```
svnversion http://nick:password@www.myhost.de/svn/test` 
```

在浏览器中它照常工作（只是为了确保没有错别字等），但`svnversion`说找不到目录。所以我认为我走错了路。

如何获得修订号？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-08T10:53:06.577

[svnversion](http://svnbook.red-bean.com/en/1.1/re57.html)仅用于工作副本，但查询存储库的一种方法是使用[svn info](http://svnbook.red-bean.com/en/1.2/svn.ref.svn.c.info.html)，如下所示：

```
svn info http://nick:password@www.myhost.de/svn | grep Revision 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-17T22:38:19.150

在 Linux 上，如果您只需要修订号：

svn 信息[http://nick:password@www.myhost.de/svn/test](http://nick:password@www.myhost.de/svn/test) | grep '^修订：' | awk '{打印 $2}'

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-09-06T19:05:09.217

一个方便的 AWK 单行代码，只获取数字部分：

```
svn info http://nick:password@www.myhost.de/svn | awk '/Revision:/ { print $2 }' 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-08T10:52:17.453

```
svn info http://nick:password@www.myhost.de/svn/test 
```

应该返回有关远程存储库的信息，包括 Revision

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-04-15T14:46:22.000

在新版本的 svn (1.9) 上，您可以：

```
svn info --show-item revision svn://...
18436 
```

这应该只返回修订号。

如果您的语言环境不是英语，所有 grep 版本都会中断。

对于以前的版本，你可以试试

```
svn info --xml | grep '<entry' -3 | awk -F '=' '/revision="/ { print $2 }' | grep -o '[0-9]\+' 
```

如果您可以拥有 xml2 包，则更好的方法是：

```
svn info --xml | xml2 | grep /info/entry/@revision | grep -o '[0-9]\+' 
```

# ruby-on-rails - Rails：跟踪用户的 ID

> ID：623379
> 
> 赞同：5
> 
> 时间：2009-03-08T10:31:21.263
> 
> 标签：ruby-on-rails, session, login, session-management

在我的 Rails 应用程序中，我有一个登录页面。该人登录后，我的应用程序继续跟踪已登录人的最佳方式是什么。例如，如果用户移动到不同的页面，我的控制器/操作将失去对该用户的跟踪，除非我不断传递用户随后访问的每个页面之间的变量。有没有更好的方法来做到这一点？我应该使用`sessions`变量吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-08T11:54:53.340

是的，会话正是您正在寻找的。

```
session["user_id"] = user_id 
```

并在另一个页面上获取当前用户（如果您的模型称为用户）：

```
@current_user = User.find(session["user_id]") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-08T22:25:41.967

强烈考虑使用插件来管理它。

有好几种，比如[restful authentication](http://github.com/technoweenie/restful-authentication/tree/master)。

这给出了`current_user`功能`logged_in?`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T18:51:52.177

有一些很棒的宝石可以做到这一点

*   [设计](https://github.com/plataformatec/devise)

*   [认证逻辑](https://github.com/binarylogic/authlogic)

# python - 如何将 RTF 插入 wxpython RichTextCtrl？

> ID：623384
> 
> 赞同：1
> 
> 时间：2009-03-08T10:37:36.803
> 
> 标签：python, wxpython, rtf, richtextctrl

有没有办法直接在 RichTextCtrl 中插入 RTF 文本，例如：无需通过**BeginTextColour**？我想将 pygments 与 RichTextCtrl 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T11:42:26.350

**不**，正如作者在[wxRichTextCtrl 路线图](http://docs.wxwidgets.org/stable/wx_wxrichtextctrloverview.html#topic17)中承认的那样：

> 这是一些尚未实现的功能的列表。对他们的帮助将不胜感激。
> 
> *   RTF输入输出

# asp.net - 链接按钮无法在自定义 Web 控件中正确呈现

> ID：623393
> 
> 赞同：0
> 
> 时间：2009-03-08T10:52:08.140
> 
> 标签：asp.net

我有以下设置

自定义控件 1 - MyListControl - MyListItemControl 的嵌套集合

MyListItemControl 继承自 Panel 所以我可以这样写：

```
<cc1:MyListControl ID="MyListControl1" runat="server">
   <ListItems>
      <cc1:MyListItemControl ID="MyListItemControl1" runat="server" CustomProperty="1">
          <asp:LinkButton ID="LinkButton1" runat="server" CommandName="Edit">Edit</asp:LinkButton>
      </cc1:MyListItemControl>
    </ListItems>
</cc1:MyListControl> 
```

我没有收到错误，并且控件确实呈现，只是不正确。如果将上面的代码放在 Formview 中，则链接按钮不会获​​得 PostBack 脚本所有被渲染的是

```
<a id="LinkButton1">Edit</a> 
```

有谁知道为什么会发生这种情况并且链接按钮没有像往常一样呈现？

TIA

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-08T11:39:25.560

您是否在生成的 html 的其他地方遇到了一些 ID 名称冲突？

控件应该具有 LinkBut​​ton1 名称的错位版本，因为它位于中继器中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-15T00:49:42.183

我意识到这有点过时了，但我只是遇到了同样的问题并在我的情况下解决了它。希望这可以帮助发生在这个问题上的其他人。

对我来说，问题是我没有将 LinkBut​​ton 添加到我的服务器控件（LinkBut​​ton 的父控件）的 Controls 集合中。关于导致问题的原因，我没有深入研究细节。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-01T23:37:43.657

对我来说，看起来像是 ASP.Net 中的一个错误，它与父控件集合中的 LinkBut​​ton 顺序有关。

这个片段：

```
 protected override void OnLoad(EventArgs e)
    {
        // show some data
        _l = new Label();
        _l.Visible = false;
        _l.Text = "Current Web's Url: " + SPContext.Current.Web.Url;
        Controls.Add(_l);

        // add a button with some processing
        _lb = new LinkButton();
        _lb.Text = "Click here";
        _lb.Click += new EventHandler(_lb_Click);
        Controls.Add(_lb);
    } 
```

生成此 HTML：

```
<span id="ctl00_PlaceHolderMain_ads1"><h1>This is a custom control</h1><span>Current Web's Url: http://arielki03:9999/sites/ads</span><a href="javascript:__doPostBack('ctl00$PlaceHolderMain$ctl01','')">Click here</a></span> 
```

但是这个片段（只是颠倒了我在上面添加控件的顺序，所以 LinkBut​​ton 是第一个）：

```
 protected override void OnLoad(EventArgs e)
    {
        // add a button with some processing
        _lb = new LinkButton();
        _lb.Text = "Click here";
        _lb.Click += new EventHandler(_lb_Click);
        Controls.Add(_lb);

        // show some data
        _l = new Label();
        _l.Visible = false;
        _l.Text = "Current Web's Url: " + SPContext.Current.Web.Url;
        Controls.Add(_l);
    } 
```

不显示任何控制！

问题似乎在于 LinkBut​​ton 是父控件集合中的第一个。解决方法：在它之前添加一个空标签，它会工作:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-05T01:08:34.077

我可以报告这仍然是 ASP 4 中的一个问题。非常烦人。我今天发现了这个问题，因为一位同事向母版页添加了一个自定义控件，导致所有 LinkBut​​tons 的副作用悄悄地停止像链接或按钮一样起作用。

# .net - 如何动态显示两个 Winforms 选项卡之一？

> ID：623397
> 
> 赞同：1
> 
> 时间：2009-03-08T10:53:25.220
> 
> 标签：.net, winforms, user-interface, tabcontrol

我有一个带有 5 个选项卡的 TabControl，其中一个选项卡的内容取决于某些条件或模式 - 有时它需要显示一组控件，有时它应该显示一组完全不同的控件。

实现这一目标的最简单方法是什么？我尝试设置两个不同的选项卡，并使用 tab.Enabled / Visible 之类的东西 - 但在选项卡上找不到此类属性。

我想要切换操作模式的能力 - 从显示一个选项卡到显示另一个选项卡，然后再返回。请注意，我不想更改哪个选项卡*处于活动状态*，我想完全隐藏一个选项卡，然后显示它并隐藏另一个选项卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T12:15:30.577

这是一个简单的修复（hack）

[http://www.dotnetspider.com/resources/18344-Hiding-Showing-Tabpages-Tabcontrol.aspx](http://www.dotnetspider.com/resources/18344-Hiding-Showing-Tabpages-Tabcontrol.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-04-07T19:27:00.337

对于您想要做的事情，链接的解决方案不必要地复杂。这是一个片段，可以满足您的需求。它基于具有 3 个或更多选项卡的表单。假设在任何给定时间，您都希望显示选项卡 2 或选项卡 3，但不要同时显示两者。如果表单有更多选项卡，它们会显示在选项卡 2 或 3 之后，因此您的交替选项卡将始终显示在相同的索引位置。还假设在选项卡 1 上有一对名为“tab2button”和“tab3button”的单选按钮，用于切换显示哪个选项卡。单选按钮的 checkchanged 事件将包含以下内容 (c++)：

```
 if (this->tab2button->Checked)
             {
                 if(tabControl1->TabPages->Contains(tabPage3))
                 {
                     tabControl1->TabPages->Remove(tabPage3);
                 }
                 if(!tabControl1->TabPages->Contains(tabPage2))
                 {
                     tabControl1->TabPages->Insert(1,tabPage2);
                 }

             }
             else if (this->tab3button->Checked)
             {
                 if(tabControl1->TabPages->Contains(tabPage2))
                 {
                     tabControl1->TabPages->Remove(tabPage2);
                 }
                 if(!tabControl1->TabPages->Contains(tabPage3))
                 {
                     tabControl1->TabPages->Insert(1,tabPage3);
                 }
             } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-11T14:35:30.340

我不知道一个优雅的解决方案。对于小型应用程序来说，最简单的方法似乎是 TabPages.Add/Insert/Remove，如上所述。

在我们的大型应用程序中，我们重写了 TabControl 和 TabPage 类——称它们为 MyTabControl 和 MyTabPage——并添加了我们自己的 Visible 属性。设置 tabPage.Visible = false 会导致标签页从 tabControl.TabPages 集合中移除。使页面再次可见会导致它在原始索引处将自身插入到选项卡控件的集合中。Visible 属性使我们的其余代码更易于管理。

然而，这些子类使我们的 MyTabControl 子类更难设计。TabControl.TabPages 是一个 TabPageCollection。Visual Studio 设计人员想要创建 TabPages 并将其添加到其中。我们需要它来保存我们的 MyTabPage 子类，因此我们还创建了一个 MyTabPageCollection。

我们还有很多地方可以看到选项卡上的不同控件组，具体取决于用户的选择。我们对不同面板上的控件进行分组，并显示与相应设置设置相对应的面板。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-02-08T22:39:45.960

我不敢相信我还没有为这么简单的事情找到合适的解决方案。我知道过去我已经显示和隐藏了标签。

tabControl.SelectTab（索引）；

答对了！没有删除，没有插入，没有洗牌。

-霍尔特

# c# - 在 C# 中的类上实现索引“运算符”

> ID：623401
> 
> 赞同：2
> 
> 时间：2009-03-08T10:56:13.573
> 
> 标签：c#, .net, asp.net

如何在 C# 中的类上实现索引“运算符”？

```
class Foo {

}

Foo f = new Foo();
f["key"] = "some val";
f["other key"] = "some other val"; 
```

在 C# 中？搜索了 MSDN，但空无一物。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-08T11:02:32.733

这是一个使用字典作为存储的示例：

```
public class Foo {

    private Dictionary<string, string> _items;

    public Foo() {
        _items = new Dictionary<string, string>();
    }

    public string this[string key] {
        get {
            return _items[key];
        }
        set {
            _items[key]=value;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-08T10:57:49.110

```
 private List<string> MyList = new List<string>();
    public string this[int i]
    {
        get
        {
            return MyList[i];
        }
        set
        {
            MyList[i] = value;
        }

    } 
```

如果需要，您可以为不同类型定义多个访问器（例如，字符串而不是 int）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-08T11:03:03.777

有称为索引器或有时索引器属性。

这是关于它们的[MSDN](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx)页面。

# c# - 假人的表达树？

> ID：623413
> 
> 赞同：83
> 
> 时间：2009-03-08T11:07:45.200
> 
> 标签：c#, .net, linq, expression-trees

我是这个场景中的假人。

我试图在谷歌上阅读这些是什么，但我就是不明白。有人可以简单解释一下它们是什么以及它们为什么有用吗？

编辑：我说的是 .Net 中的 LINQ 功能。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-12-24T20:00:11.210

我读过的关于表达式树的最好解释是Charlie Calvert 的[这篇文章](http://blogs.msdn.com/b/charlie/archive/2008/01/31/expression-tree-basics.aspx "表达式树基础")。

把它们加起来;

表达式树代表**你**想做什么，而不是**你**想怎么做。

> 考虑以下非常简单的 lambda 表达式：
> `Func<int, int, int> function = (a, b) => a + b;`
> 
> 该声明由三个部分组成：
> 
> *   声明：`Func<int, int, int> function`
> *   一个等号运算符：`=`
> *   一个 lambda 表达式：`(a, b) => a + b;`
> 
> 该变量`function`指向**知道如何将两个数字相加**的原始可执行代码。

这是代表和表达式之间最重要的区别。您调用`function`(a `Func<int, int, int>`) 时并不知道它将对您传递的两个整数做什么。它需要两个并返回一个，这是您的代码可以知道的最多。

> 在上一节中，您看到了如何声明一个指向原始可执行代码的变量。**表达式树不是可执行代码**，它们是一种数据结构形式。

现在，与委托不同，您的代码**可以**知道表达式树的用途。

> LINQ 提供了一种简单的语法，用于将代码转换为称为表达式树的数据结构。第一步是添加一条 using 语句来引入`Linq.Expressions`命名空间：
> 
> `using System.Linq.Expressions;`
> 
> 现在我们可以创建一个表达式树：
> `Expression<Func<int, int, int>> expression = (a, b) => a + b;`
> 
> 前面示例中显示的相同 lambda 表达式被转换为声明为 type 的表达式树`Expression<T>`。该标识符`expression` **不是**可执行代码；它是一种称为表达式树的数据结构。

这意味着您不能像调用委托那样只调用表达式树，而是可以分析它。那么通过分析变量你的代码能理解什么`expression`？

```
// `expression.NodeType` returns NodeType.Lambda.
// `expression.Type` returns Func<int, int, int>.
// `expression.ReturnType` returns Int32.

var body = expression.Body;
// `body.NodeType` returns ExpressionType.Add.
// `body.Type` returns System.Int32.

var parameters = expression.Parameters;
// `parameters.Count` returns 2.

var firstParam = parameters[0];
// `firstParam.Name` returns "a".
// `firstParam.Type` returns System.Int32.

var secondParam = parameters[1].
// `secondParam.Name` returns "b".
// `secondParam.Type` returns System.Int32. 
```

在这里，我们看到我们可以从表达式中获得大量信息。

但是我们为什么需要它呢？

> 您已经了解了表达式树是一种表示可执行代码的数据结构。但到目前为止，我们还没有回答为什么要进行这种转换的核心问题。这是我们在本文开头提出的问题，现在是时候回答它了。
> 
> LINQ to SQL 查询不会在您的 C# 程序中执行。相反，它被翻译成 SQL，通过网络发送，并在数据库服务器上执行。换句话说，以下代码从未在您的程序中实际执行：
> `var query = from c in db.Customers where c.City == "Nantes" select new { c.City, c.CompanyName };`
> 
> 它首先被翻译成下面的 SQL 语句，然后在服务器上执行：
> `SELECT [t0].[City], [t0].[CompanyName] FROM [dbo].[Customers] AS [t0] WHERE [t0].[City] = @p0`
> 
> 在查询表达式中找到的代码必须被翻译成可以作为字符串发送到另一个进程的 SQL 查询。在这种情况下，该进程恰好是一个 SQL 服务器数据库。显然，将诸如表达式树之类的数据结构翻译成 SQL 要比将原始 IL 或可执行代码翻译成 SQL 要容易得多。为了稍微夸大问题的难度，想象一下尝试将一系列 0 和 1 转换为 SQL！
> 
> 当需要将您的查询表达式转换为 SQL 时，表示您的查询的表达式树被拆开并分析，就像我们在上一节中拆开简单的 lambda 表达式树一样。当然，解析 LINQ to SQL 表达式树的算法比我们使用的要复杂得多，但原理是一样的。一旦分析了表达式树的各个部分，LINQ 就会仔细考虑它们并决定编写返回请求数据的 SQL 语句的最佳方式。
> 
> 创建表达式树是为了完成将诸如查询表达式之类的代码转换为可以传递给其他进程并在那里执行的字符串的任务。就是这么简单。这里没有什么大谜团，也没有需要挥动的魔杖。只需获取代码，将其转换为数据，然后分析数据以找到将被转换为可以传递给另一个进程的字符串的组成部分。
> 
> 因为查询被封装在这样一个抽象数据结构中的编译器，所以编译器可以自由地以几乎任何它想要的方式解释它。它不会强制以特定顺序或特定方式执行查询。相反，它可以分析表达式树，发现你想要做什么，然后决定如何去做。至少在理论上，它可以自由考虑任何数量的因素，例如当前的网络流量、数据库的负载、可用的当前结果集等。实际上 LINQ to SQL 并没有考虑所有这些因素，但理论上它几乎可以自由地做它想做的事。此外，可以将此表达式树传递给您手动编写的一些自定义代码，这些代码可以对其进行分析并将其转换为与 LINQ to SQL 生成的非常不同的东西。

再一次，我们看到表达式树允许我们表示（表达？）**我们**想要做什么。我们使用翻译器来决定我们的表达方式**如何被使用。**

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2009-03-08T11:26:04.393

表达式树是一种将可执行​​代码转换为数据的机制。使用表达式树，您可以生成代表您的程序的数据结构。

在 C# 中，您可以使用类来处理由 lambda 表达式生成的表达式树`Expression<T>`。

* * *

在传统程序中，您编写如下代码：

```
double hypotenuse = Math.Sqrt(a*a + b*b); 
```

这段代码使编译器生成一个赋值，就是这样。在大多数情况下，这就是您所关心的。

使用常规代码，您的应用程序无法追溯并查看`hypotenuse`以确定它是通过执行`Math.Sqrt()`调用生成的；此信息根本不包括在内。

现在，考虑如下 lambda 表达式：

```
Func<int, int, double> hypotenuse = (a, b) => Math.Sqrt(a*a + b*b); 
```

这和以前有点不同。现在`hypotenuse`实际上是对*一个可执行代码块的*引用。如果你打电话

```
hypotenuse(3, 4); 
```

您将获得`5`返回的值。

我们可以使用*表达式树*来探索生成的可执行代码块。试试这个：

```
Expression<Func<int, int, int>> addTwoNumbersExpression = (x, y) => x + y;
BinaryExpression body = (BinaryExpression) addTwoNumbersExpression.Body;
Console.WriteLine(body); 
```

这会产生：

```
(x + y) 
```

表达式树可以实现更高级的技术和操作。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-03-08T11:25:40.477

表达式树是表达式的内存表示，例如算术或布尔表达式。例如，考虑算术表达式

```
a + b*2 
```

由于 * 的运算符优先级高于 +，因此表达式树的构建方式如下：

```
 [+]
  /    \
 a     [*]
      /   \
     b     2 
```

有了这棵树，就可以对 a 和 b 的任何值进行评估。此外，您可以将其转换为其他表达式树，例如导出表达式。

当您实现表达式树时，我建议创建一个基类 *Expression*。由此派生，类*BinaryExpression*将用于所有二进制表达式，例如 + 和 * 。然后您可以引入一个*VariableReferenceExpression*来引用变量（例如 a 和 b），以及另一个类*ConstantExpression*（对于示例中的 2）。

在许多情况下，表达式树是作为解析输入（直接来自用户，或来自文件）的结果构建的。为了评估表达式树，我建议使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-06-07T08:25:49.200

简短的回答：很高兴能够编写相同类型的 LINQ 查询并将其指向任何数据源。没有它，您将无法进行“语言集成”查询。

长答案：您可能知道，当您编译源代码时，您正在将其从一种语言转换为另一种语言。通常从高级语言（C#）到低级语言（IL）。

基本上有两种方法可以做到这一点：

1.  您可以使用查找和替换来翻译代码
2.  您解析代码并获得解析树。

后者是我们称为“编译器”的所有程序所做的事情。

一旦有了解析树，您就可以轻松地将其翻译成任何其他语言，这就是表达式树允许我们做的事情。由于代码是作为数据存储的，因此您可以做任何您想做的事情，但您可能只想将其翻译成其他语言。

现在，在 LINQ to SQL 中，表达式树变成了 SQL 命令，然后通过线路发送到数据库服务器。据我所知，他们在翻译代码时并没有做任何真正花哨的事情，但他们*可以*。例如，查询提供者可以根据网络条件创建不同的 SQL 代码。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-03-08T11:21:13.267

IIUC，表达式树类似于抽象语法树，但表达式通常产生单个值，而 AST 可以表示整个程序（包含类、包、函数、语句等）

无论如何，对于表达式 (2 + 3) * 5，树是：

```
 *
   / \ 
  +   5
 / \
2   3 
```

递归地（自下而上）对每个节点求值，得到根节点处的值，即表达式的值。

如果您的表达式语言允许，您当然也可以使用一元（否定）或三元（if-then-else）运算符，以及函数（n-ary，即任意数量的操作）。

评估类型和进行类型控制是在类似的树上完成的。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-08-06T12:57:22.873

**DLR**
表达式树是对 C# 的补充，以支持动态语言运行时 (DLR)。DLR 还负责为我们提供声明变量的“var”方法。( `var objA = new Tree();`)

[更多关于 DLR 的信息](http://msdn.microsoft.com/en-us/library/dd233052.aspx)。

本质上，微软希望为动态语言开放 CLR，例如 LISP、SmallTalk、Javascript 等。为此，他们需要能够动态解析和评估表达式。在 DLR 出现之前，这是不可能的。

回到我的第一句话，表达式树是对 C# 的补充，它开启了使用 DLR 的能力。在此之前，C# 是一种更加静态的语言——所有变量类型都必须声明为特定类型，并且所有代码都必须在编译时编写。

**将它与数据**
表达式树一起使用打开了动态代码的闸门。

例如，假设您正在创建一个房地产网站。在设计阶段，您知道可以应用的所有过滤器。要实现此代码，您有两个选择：您可以编写一个循环，将每个数据点与一系列 If-Then 检查进行比较；或者您可以尝试使用动态语言 (SQL) 构建查询并将其传递给可以为您执行搜索的程序（数据库）。

使用表达式树，您现在可以动态更改程序中的代码并执行搜索。具体来说，您可以通过 LINQ 执行此操作。

（查看更多：[MSDN：如何：使用表达式树构建动态查询](http://msdn.microsoft.com/en-us/library/bb882637.aspx)）。

**超越数据**
表达式树的主要用途是管理数据。但是，它们也可以用于动态生成的代码。因此，如果您想要一个动态定义的函数（ala Javascript），您可以创建一个表达式树，对其进行编译并评估结果。

我会更深入一点，但这个网站做得更好：

[表达式树作为编译器](http://www.infoq.com/articles/expression-compiler)

列出的示例包括为变量类型创建通用运算符、手动滚动 lambda 表达式、高性能浅克隆以及将读/写属性从一个对象动态复制到另一个对象。

**摘要**
表达式树是在运行时编译和评估的代码的表示。它们允许动态类型，这对于数据操作和动态编程很有用。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2009-03-08T11:18:18.607

您所指的表达式树是表达式评估树吗？

如果是，那么它是由解析器构造的树。Parser 使用 Lexer/Tokenizer 从程序中识别令牌。Parser 从标记构造二叉树。

[这里](http://en.wikipedia.org/wiki/Parse_tree)是详细解释

# .net - ClickOnce 有哪些替代品？

> ID：623418
> 
> 赞同：63
> 
> 时间：2009-03-08T11:16:03.713
> 
> 标签：.net, wix, clickonce, web-deployment

多年来，我经常使用[ClickOnce ，但我遇到了它的许多限制。](https://en.wikipedia.org/wiki/ClickOnce)Web 部署有哪些替代方案？

到目前为止，我唯一能够出现的是[ClickThrough](https://web.archive.org/web/20151226075116/http://blogs.msdn.com:80/b/robmen/archive/2005/11/08/490448.aspx)，它是[WiX](https://en.wikipedia.org/wiki/WiX)的一部分，现在处于次要地位。还有其他成功的吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-01-06T05:05:05.290

[Squirrel](https://github.com/Squirrel/Squirrel.Windows)：它就像 ClickOnce，但它有效。

Squirrel 既是一组工具又是一个库，可以完全管理安装和更新桌面 Windows 应用程序，使用 C# 或任何其他语言编写（也就是说，Squirrel 可以管理本机 C++ 应用程序）。

Squirrel 使用[NuGet](http://en.wikipedia.org/wiki/NuGet)包来创建安装和更新包，这意味着您可能已经知道创建安装程序所需的大部分内容。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-09-30T17:57:02.370

在使用了 WiX、NSIS 和 InstallAware 之后，我不得不谦虚地承认，对于我作为软件开发人员真正需要的东西来说，它们都太过分了。到目前为止，我所做的所有项目都无法使用 Visual Studio 部署项目进行部署。

有限制吗？是的。

它的学习和使用也*非常简单。*此外，您实际上*可以使用*[此处](http://www.codeproject.com/KB/install/dotnetpatching.aspx)描述的技术来做一些非常巧妙的事情，例如自动创建*补丁（.MSP 文件）*

我完全理解您无法在 Visual Studio 安装项目中完成*所有*工作，但您*能*完成的工作令人惊讶。它是免费的、简单的，而且坦率地说，对于一般用途而言，它比花费无休止地学习 WiX 令人难以置信的 XML（尽管它令人印象深刻）或 InstallAware 的冗长脚本更好的选择。

使用 VS Setup，它是拖放和构建和部署。我尝试过的所有其他解决方案都遇到了挫折......他们无法自动检测您的项目输出......或者需要特殊的过滤器以免包含来自构建的不需要的输出。

因此，我的建议是：如果您只是希望部署您的项目，那么请学习：

1.  如何构建自定义安装程序类，以及
2.  如何编写自己的必备包

这些都是相当容易掌握的技能，并且可以满足大多数开发人员的需求。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-08T11:36:13.557

您在使用 ClickOnce 时遇到了哪些限制？当我不使用 ClickOnce 时，我使用[NSIS](http://en.wikipedia.org/wiki/Nullsoft_Scriptable_Install_System)（尽管您可以使用大多数其他安装程序语言/系统）来制作可运行的自安装应用程序。

也就是说，当您运行下载时，它正在运行应用程序，并且没有任何设置问题。有一个菜单选项或允许永久安装的常用检测器。

两个难题是：

1.  设置文件
2.  本地注册表设置

对于设置文件，我使用远程 Web 服务来保存状态等。

如果您需要本地注册表设置（文件关联等），那么您需要进行正确的安装，但这可以在用户第一次使用应用程序时静默完成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-01T06:45:21.053

看看这个 [http://simpldeploy.com](http://simpldeploy.com) 它与 squirrel 类似，但像 ClickOnce 一样集成到 VS 中。它有像 ClickOnce 这样的对话框（可选）。

# language-agnostic - 什么是解释垃圾收集如何工作的简单方法？

> ID：623423
> 
> 赞同：6
> 
> 时间：2009-03-08T11:18:30.400
> 
> 标签：language-agnostic, garbage-collection

我的注意力很短，所以我无法通过[维基百科的文章](http://en.wikipedia.org/wiki/Garbage_Collection)。

我知道有几种垃圾收集技术，但一个常见的技术是“可达性”测试，其中一个对象的收集资格是基于它是否可以被一个有根对象“到达”（据我理解是已知不需要收集的对象）。当你想知道某个对象是否可达时，你会怎么做？你怎么知道去哪里看？

收集器显然必须知道所有分配的对象和根对象。它如何确定每个对象的可达性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T11:33:56.980

通过走指针/引用，我会说。原则上，您只需查看一个对象是否仍有指向它的引用（来自其他对象、当前执行代码的局部变量……）。如果没有，则无法再次获得对该对象的引用（在像 Java 这样的语言中，至少在你不能做指针欺骗的地方），所以通常可以安全地丢弃那个特定的对象。

其他使用（或仍在使用）的方案例如引用计数，其中每个对象都有一个对它的引用计数器，每次有人获得对该对象的引用时必须递增，每次有人失去对该对象的引用时递减。如果我没记错的话，Windows 中的 COM 就是这样工作的。

Java 和 .NET 使用（除其他外）分代垃圾收集，其中最初假定每个对象很快就会死去（分代假设）。然后，它采用了一些优化来保持垃圾回收周期的快速，从而不会过多地破坏程序运行。在过去，GC 在程序运行时锁定程序并不少见，有时锁定几秒钟。

除此之外，GC 通常只在内存不足时运行，即。e. 积聚了太多死物，需要回收。这就是为什么大多数托管应用程序似乎比非托管应用程序浪费更多的内存，即使在许多情况下，大部分内存都可以通过运行一次 GC 来回收。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T13:44:54.433

垃圾收集器将始终了解每个分配的对象，否则它不可能检测到无法访问的对象以进行删除。这一切都在内存分配期间得到处理。这是有道理的，因为如果垃圾收集器**不**知道每个对象，那么就有可能形成无法访问的孤立对象集，甚至垃圾收集器也无法访问。基本上，这将是内存泄漏。所以至少垃圾收集器必须知道每个分配的对象。

这就引出了垃圾收集器如何确定哪些对象符合删除条件的问题。对此有多种技术，但您会经常听到两种技术是“标记和清除”和“引用计数”（它们经常出现在教科书中），它们值得了解以了解垃圾收集的基本概念.

标记和清除涉及垃圾收集器遍历对象引用（从一组已知的不可回收对象开始）并标记它可以到达的每个对象（例如在对象上设置标志）。当它用尽所有引用时，可以在扫描阶段删除未标记的对象集。

引用计数涉及垃圾收集器为内存中的每个对象记录有多少其他对象引用它。每次从另一个对象建立对该对象的引用时，此计数器将递增，并在删除引用时递减。当计数器达到 0 时，该对象不再被任何东西引用，垃圾收集器知道它可以被安全地删除（此时它基本上变得无法访问 - 没有对象“知道”这个对象了）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-28T06:59:27.170

当我们创建对象并将该对象分配为 null 时，该对象已准备好被垃圾收集器删除......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T05:05:40.323

一种简单（但常见）的垃圾收集方法类似于在建筑物中找到所有有价值的东西并将其移至新建筑物，然后炸毁旧建筑物并用空建筑物取而代之。为了最大限度地减少所需的物体移动量，系统可能会使用一些不同大小的建筑物。所有新对象都进入一个小建筑物。当它装满时，所有有用的东西都会被复制到中型建筑中，而小型建筑则被炸毁和更换。如果中型建筑中剩下的东西少于小型建筑的价值，那么所有有用的东西都会被转移到大型建筑中，然后中型建筑将被炸毁并更换。如果看起来这栋大型建筑堆积了太多垃圾，一切有用的东西都会被复制到另一座大楼，然后大楼会被炸毁和更换。虽然这座小建筑会被炸毁并更换很多东西，但里面的大部分东西都是垃圾，不需要复制。同样，当中型建筑需要更换时，其中的大部分东西都会被废弃，因此只有一小部分需要搬到大型建筑中。复制大建筑物中的所有东西会很昂贵，但这种操作不必经常发生。所以只有一小部分需要搬到大楼里。复制大建筑物中的所有东西会很昂贵，但这种操作不必经常发生。所以只有一小部分需要搬到大楼里。复制大建筑物中的所有东西会很昂贵，但这种操作不必经常发生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-08T11:29:41.950

收集器必须知道对象引用在全局变量区域内的位置，以及每个线程的每个函数/方法/过程调用的激活帧中的位置。处理器寄存器也可以包含对象引用。某些信息必须由编译器或虚拟机提供。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-08T11:34:54.153

从根对象（即 main() 中的堆栈上的那些对象 - 等效）开始，然后跟随每个指针/引用并将每个对象标记为“可访问”。继续，直到您标记了每个对象。剩余的对象（未标记的）是垃圾。

另一种方法是引用计数，这也是垃圾收集，除了在每次指针写入时完成标记并且清理是即时的（一旦对象不可访问，它的引用计数为零，因此它被销毁）。请注意，引用计数需要一个标记和扫描阶段（如上）来解决循环问题。（即相互依附但没有人关心的物体）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-08T12:05:56.700

您可以将一个正在运行的程序（也许我应该专门针对 Java）想象为多个`Threads`. 虚拟机可以使用每个线程的根框架作为`root`. 然后它可以沿着从该根目录（加上根目录下的所有堆栈帧）引用的所有内容的可达性树向下走。

其他任何东西都达不到

# algorithm - 欧拉计划问题 233

> ID：623435
> 
> 赞同：10
> 
> 时间：2009-03-08T11:29:04.557
> 
> 标签：algorithm, math, geometry, diophantine

我决定接下来解决 Project Euler[问题 233](http://projecteuler.net/index.php?section=problems&id=233)，但我遇到了一些重大问题！我已经做了一些分析并取得了一些相当不错的进展，但我现在陷入了困境。这是我的工作：

**引理 1**：由于圆穿过 4 个角点，因此任何 n 至少有 4 个解。但是对于圆周上的每个点，通过反射发现了另外 7 个点。因此总是有 8k+4 个格点。

**引理 2**：圆的半径为 (√2)n，圆心为 (n/2, n/2)，因此其方程为 (xn/2)^2 + (yn/2)^2 = [n/√2]^ 2\. 这减少到 x^2+y^2 = n(x+y)。

**引理 3**：如果 x^2+y^2 = n(x+y) 的解写成 (x, y, z)，则另一个解是 (kx, ky, kz)。证明是：

```
(x+y)n = x^2+y^2

(kx)^2+(ky)^2 = (kx+ky)m
k(x^2+y^2) = (x+y)m
m = kn 
```

这与我对这种思路所做的一样多 - 我看不到从那里去的任何地方，但它被包括在内，因为它可能很有用。

我的下一个想法是移动圆心。将有相同数量的解决方案在任何维度上移动一个整数。所以当n/2为整数时，所以n=2k，x^2+y^2 = 2*k^2。而且事实证明，这个方程的解与方程 x^2+y^2=k^2 的解一样多（参见 Sloane [A046109](http://www.research.att.com/~njas/sequences/A046109)）。

[这也提供了一种通过A046080](http://www.research.att.com/~njas/sequences/A046080)计算任何 n 的解决方案数量的简单方法。如果 4k+1 形式的 n 中素数的幂是 f[0]...f[m]，则解的数量是 4*product(2f[i]+1 | i in [0.. .m]）。

这让我可以向后工作： 4.product(2f[i]+1 | i in [0...m]) = 420, 所以 product(2f[i]+1 | i in [0...m] ) = 105 = 3*5*7。我能够想出这个程序，我认为它可以找到所有 n 的总和，形式为 2k 且小于 10^11，它有 420 个圆格点。答案（我希望！）是 257199853438240692。

这是C程序：

```
#include "stdlib.h"
#include "stdio.h"
#include "math.h"
#include "string.h"

#define lim 1000000000L

char prime[lim];
long primes[50000000];
long len = 0;

int main(void)
{
    long i, j;
    for(i = 0; i < lim; i++)
    {
        prime[i] = 1;
    }

    for(i = 2; i < lim; i++)
    {
        if(prime[i])
        {
            for(j = 2*i; j < lim; j += i) prime[j] = 0;
            if((i-1)%4 == 0)
            {
                prime[i] = 2;
                //printf("%li\n", i);
                primes[len++] = i;
            }
        }

        if(i < 1000 || (i < 10000 && i%1000 == 0) || i%10000 == 0) printf("%li, %li\n", i, len);
    }

    printf("primes!\n");

    long a, b, c, v, total = 0, k;
    for(a = 0; a < len; a++)
    {
        v = primes[a]*primes[a]*primes[a];
        if(v > 50000000000L) break;

        for(b = 0; b < len; b++)
        {
            if(b == a) continue;

            v = primes[a]*primes[a]*primes[a]*primes[b]*primes[b];
            if(v > 50000000000L) break;

            for(c = 0; c < len; c++)
            {
                if(c == a) continue;
                if(c == b) continue;

                v = primes[a]*primes[a]*primes[a]*primes[b]*primes[b]*primes[c];
                if(v > 50000000000L) break;

                for(k = 1; k*v <= 50000000000L; k++)
                {
                    if(prime[k] == 2) continue;
                    total += k*v;
                }
            }
        }
    }

    for(a = 0; a < len; a++)
    {
        v = primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a];
        if(v > 50000000000L) break;

        for(b = 0; b < len; b++)
        {
            if(b == a) continue;

            v = primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[b]*primes[b]*primes[b];
            if(v > 50000000000L) break;

            for(k = 1; k*v <= 50000000000L; k++)
            {
                if(prime[k] == 2) continue;
                total += k*v;
            }
        }
    }

    for(a = 0; a < len; a++)
    {
        v = primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a];
        if(v > 50000000000L) break;

        for(b = 0; b < len; b++)
        {
            if(b == a) continue;

            v = primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[a]*primes[b]*primes[b];
            if(v > 50000000000L) break;

            for(k = 1; k*v <= 50000000000L; k++)
            {
                if(prime[k] == 2) continue;
                total += k*v;
            }
        }
    }

    printf("%li\n", 2*total);

    return 0;
} 
```

我们只需要将具有 420 个圆格点且形式为 2k+1 的 n 的值相加！但是，这似乎比 n=2k 更难，而且我看不到任何方法。我也有点不确定我对偶数 n 的回答是否正确，因为该方法非常复杂......有人可以确认吗？有没有一种简洁的方法而不涉及不同地对待不同的 n？

我完全没主意了！

* * *

我最感兴趣的是我如何处理 N=2k+1，因为当 N=2k 时，我可以按照 John Feminella 的建议进行操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-13T06:14:09.533

提示 1：圆的半径为 n/√2，对于整数 n，它永远不是整数，因此 A046080 永远不适用。

提示 2：不要费心滑动圆圈。把它从方格纸上拿下来，想想它，定义它的正方形，以及圆周上尚未知道的兴趣点之间的关系。

提示 3：半圆的内切角始终为 90 度。

提示 4：一个数可以写成两个平方和的多少种方式？

在整个过程中大量使用的额外提示：*对称！*

* * *

## **剧透警报！**

* * *

*在您尝试从上面的提示中解决之前，请不要进一步阅读*

如果这些提示还不够，以下是与上述提示交错的一些缺失步骤：

提示 1.5：你将不得不改变你看待问题的方式，因为你使用的方法是基于一个有缺陷的前提。

提示 2.5：考虑正方形顶角之间弧线左侧的格点。通过对称，在它的右侧有另一个这样的点，在它的正下方有第三个。关于这些点之间的距离以及它们形成的三角形，你能说什么？

提示 3.5：对于任何给定的 n，你如何确定在正方形的顶角之间的弧的左侧有多少格点？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T12:41:04.180

**提示 #1。**你的引理#2 不太正确。你确定那是半径？

**提示 #2。**答案与平方和函数 r(k, n) 密切相关。这给出了使用 k 个不同的正方形来表示 n 的方法的数量，允许使用零并区分顺序。例如，r(2, 5) 是 8，因为用 2 个正方形表示 5 有 8 种方法：

```
(-2)^2 + (-1)^2
(-2)^2 + 1^2
2^2    + (-1)^2
2^2    + 1^2
... (and the 4 additional expressions produced by reversing these 2 terms) 
```

可以看到以原点为中心的半径为 p 的圆有 r(2, p^2) 个格点。例如，半径为 5 的圆具有：

```
(-4)^2 + (-3)^2
... and 7 others like this

5^2    + 0^2
(-5)^2 + 0^2
0^2    + 5^2
0^2    + (-5)^2 
```

总共有 12 个。什么样的数字会有 420 个圆格点？现在，如果它们不以原点为中心怎么办？我会让你从这里拿走。

如果你想要一个更大的提示，我已经 rot-13'd ( [http://rot13.com](http://rot13.com) ) 一些你应该在这里查看的东西：

uggc://zngujbeyq.jbysenz.pbz/FpuvamryfGurberz.ugzy

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-18T09:38:25.357

You can refer to [http://oeis.org/A046109/b046109.txt](http://oeis.org/A046109/b046109.txt) to check up to 1000\. I installed PARI/GP and used one of the PARI scripts here: [http://oeis.org/A046109](http://oeis.org/A046109) to check numbers higher.

# c# - 有哪些网站提供有关 ASP.NET (C#) 的免费视频教程？

> ID：623438
> 
> 赞同：1
> 
> 时间：2009-03-08T11:31:01.667
> 
> 标签：c#, asp.net, video

除了[www.asp.net/learn/](http://www.asp.net/learn/)之外，还有哪些其他网站有免费的 ASP.net(c#) 视频教程以及与 asp.net 和 Visual Studio IDE 相关的所有内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-08T11:41:12.843

查看[官方网站](http://www.asp.net/LEARN/)。它有大量的视频教程。

一个快速的谷歌显示了聚合技术视频的[BestTechVideos](http://www.bestechvideos.com/category/development/aspnet)网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T12:35:51.510

[学习VisualStudio.Net](http://www.learnvisualstudio.net/) ?

你没有提到这些视频是免费的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T21:59:07.070

[Channel9](http://channel9.msdn.com/)有一些很棒的 asp.net 截屏视频。[通过使用这个搜索](http://channel9.msdn.com/Search/Default.aspx?Term=screencast%20asp.net)，我还能够在一定程度上过滤截屏视频。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:28:13.933

[monzoor the Trainer](http://www.manzoorthetrainer.com/)还包含有关使用 C# 的 ASP.Net 的大量视频。

# c# - 如何在 C# 中创建自己的事件？

> ID：623451
> 
> 赞同：131
> 
> 时间：2009-03-08T11:43:24.523
> 
> 标签：c#, .net, events

如何在 C# 中创建自己的事件？

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2009-03-08T18:58:04.790

这是使用 C# 创建和使用事件的示例

```
using System;

namespace Event_Example
{
    //First we have to define a delegate that acts as a signature for the
    //function that is ultimately called when the event is triggered.
    //You will notice that the second parameter is of MyEventArgs type.
    //This object will contain information about the triggered event.
    public delegate void MyEventHandler(object source, MyEventArgs e);

    //This is a class which describes the event to the class that recieves it.
    //An EventArgs class must always derive from System.EventArgs.
    public class MyEventArgs : EventArgs
    {
        private string EventInfo;
        public MyEventArgs(string Text)
        {
            EventInfo = Text;
        }
        public string GetInfo()
        {
            return EventInfo;
        }
    }

    //This next class is the one which contains an event and triggers it
    //once an action is performed. For example, lets trigger this event
    //once a variable is incremented over a particular value. Notice the
    //event uses the MyEventHandler delegate to create a signature
    //for the called function.
    public class MyClass
    {
        public event MyEventHandler OnMaximum;
        private int i;
        private int Maximum = 10;
        public int MyValue
        {
            get
            {
                return i;
            }
            set
            {
                if(value <= Maximum)
                {
                    i = value;
                }
                else
                {
                    //To make sure we only trigger the event if a handler is present
                    //we check the event to make sure it's not null.
                    if(OnMaximum != null)
                    {
                        OnMaximum(this, new MyEventArgs("You've entered " +
                            value.ToString() +
                            ", but the maximum is " +
                            Maximum.ToString()));
                    }
                }
            }
        }
    }

    class Program
    {
        //This is the actual method that will be assigned to the event handler
        //within the above class. This is where we perform an action once the
        //event has been triggered.
        static void MaximumReached(object source, MyEventArgs e)
        {
            Console.WriteLine(e.GetInfo());
        }

        static void Main(string[] args)
        {
            //Now lets test the event contained in the above class.
            MyClass MyObject = new MyClass();
            MyObject.OnMaximum += new MyEventHandler(MaximumReached);

            for(int x = 0; x <= 15; x++)
            {
                MyObject.MyValue = x;
            }

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2009-03-08T13:16:45.577

我在我的[事件文章](http://csharpindepth.com/Articles/Chapter2/Events.aspx)中对事件和代表进行了完整的讨论。对于最简单的事件，您可以声明一个公共事件，编译器将创建一个事件和一个字段来跟踪订阅者：

```
public event EventHandler Foo; 
```

如果您需要更复杂的订阅/取消订阅逻辑，您可以明确地这样做：

```
public event EventHandler Foo
{
    add
    {
        // Subscription logic here
    }
    remove
    {
        // Unsubscription logic here
    }
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-03-08T11:44:21.027

您可以使用以下代码声明事件：

```
public event EventHandler MyOwnEvent; 
```

如果需要，可以使用自定义委托类型而不是 EventHandler。

*[您可以在文章事件教程](http://msdn.microsoft.com/en-us/library/aa645739(VS.71).aspx)*(MSDN)中找到有关在 .NET 中使用事件的详细信息/教程。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-26T06:54:08.170

要做到这一点，我们必须知道三个组成部分

1.  负责的地方`firing the Event`
2.  负责的地方`responding to the Event`
3.  事件本身

    一种。事件

    b .EventArgs

    C。EventArgs 枚举

现在让我们创建在调用函数时触发的事件

但我解决这个问题的顺序是这样的：我在创建类之前使用它

1.  负责的地方`responding to the Event`

    ```
    NetLog.OnMessageFired += delegate(object o, MessageEventArgs args) 
    {
            // when the Event Happened I want to Update the UI
            // this is WPF Window (WPF Project)  
            this.Dispatcher.Invoke(() =>
            {
                LabelFileName.Content = args.ItemUri;
                LabelOperation.Content = args.Operation;
                LabelStatus.Content = args.Status;
            });
    }; 
    ```

NetLog是一个静态类我稍后会解释

下一步是

2.  负责的地方`firing the Event`

    ```
    //this is the sender object, MessageEventArgs Is a class I want to create it  and Operation and Status are Event enums
    NetLog.FireMessage(this, new MessageEventArgs("File1.txt", Operation.Download, Status.Started));
    downloadFile = service.DownloadFile(item.Uri);
    NetLog.FireMessage(this, new MessageEventArgs("File1.txt", Operation.Download, Status.Finished)); 
    ```

第三步

3.  事件本身

我在一个名为 NetLog 的类中扭曲了事件

```
public sealed class NetLog
{
    public delegate void MessageEventHandler(object sender, MessageEventArgs args);

    public static event MessageEventHandler OnMessageFired;
    public static void FireMessage(Object obj,MessageEventArgs eventArgs)
    {
        if (OnMessageFired != null)
        {
            OnMessageFired(obj, eventArgs);
        }
    }
}

public class MessageEventArgs : EventArgs
{
    public string ItemUri { get; private set; }
    public Operation Operation { get; private set; }
    public Status Status { get; private set; }

    public MessageEventArgs(string itemUri, Operation operation, Status status)
    {
        ItemUri = itemUri;
        Operation = operation;
        Status = status;
    }
}

public enum Operation
{
    Upload,Download
}

public enum Status
{
    Started,Finished
} 
```

这个类现在包含`the Event`，`EventArgs`并且负责触发事件`EventArgs Enums``the function`

抱歉这么长的回答

# c# - 实现我自己的事务提供程序的最佳选择

> ID：623453
> 
> 赞同：2
> 
> 时间：2009-03-08T11:44:54.143
> 
> 标签：c#, .net, database, architecture, transactions

我正在使用不支持事务的远程第 3 方存储解决方案。

我想在 .NET 中为此解决方案实现我自己的伪 ACIDity事务上下文。

以某种方式与命名空间集成是否有益或更容易`System.Transactions`（有人对此有过恐怖或成功的故事吗？它是否与我正在尝试做的事情的一般想法兼容？）或者我应该创建自己的事务类和接口？

编辑：我在 MSDN 上找到[了实现资源管理器](http://msdn.microsoft.com/en-us/library/ms229975.aspx#)以与集成`System.Transactions`，这是要走的路吗？或者我应该在这个模式上建立一个自定义模型？

编辑：阅读 Hibernate 的[文档](http://www.hibernate.org/22.html)，这正是我最终想要的模式。我应该只下载 NHibernate 并删除所有 SQL 代码，还是使用它的基类和接口并实现我的自定义 CRUD 代码，还是它非常依赖 SQL？我发现自己几乎已经重写了一些方法以符合其文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T13:26:11.360

;-) 当我看到您的编辑时，我只是添加了那个链接。

我可能会首先探索该选项。每当有一个可扩展的框架可用时，您都应该犹豫自己构建一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T22:57:02.377

你应该实现一个资源管理器，是的。获得 System.Transaction 支持可不是件小事。例如，它将允许您的开发人员在同一个工作单元中提交对您的资源和 Oracle 的更新。如果您将库构建为资源管理器，您将免费获得它。

# ruby-on-rails - Rails select helper - 默认选择值，如何？

> ID：623458
> 
> 赞同：193
> 
> 时间：2009-03-08T11:49:42.713
> 
> 标签：ruby-on-rails

这是我现在正在使用的一段代码：

```
<%= f.select :project_id, @project_select %> 
```

如何修改它以使其默认值等于`params[:pid]`加载页面时的值？

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2009-03-10T06:06:21.977

这应该这样做：

```
<%= f.select :project_id, @project_select, :selected => params[:pid] %> 
```

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2010-03-12T17:10:02.193

使用当前实例的正确属性（例如`@work.project_id`）：

```
<%= f.select :project_id, options_for_select(..., @work.project_id) %> 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2011-07-23T13:06:01.517

导轨 3.0.9

```
select options_for_select([value1, value2, value3], default) 
```

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2014-04-12T15:50:44.950

所有这些答案的问题在于，即使您尝试编辑记录，它们也会将该字段设置为默认值。

您需要将默认值设置为现有值，然后**仅**在没有值时将其设置为实际默认值。像这样：

```
f.select :field, options_for_select(value_array, f.object.field || default_value) 
```

对于不熟悉`f.object.field`您的任何人，请始终使用`f.object`然后将您的字段名称添加到该字段的末尾。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2012-01-26T10:27:24.270

试试这个：

```
 <%= f.select :project_id, @project_select, :selected => f.object.project_id %> 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2009-03-11T06:40:24.897

如果 params[:pid] 是一个字符串，如果它来自一个表单，它是，你可能需要使用

```
params[:pid].to_i 
```

在选择列表中选择正确的项目

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2009-03-09T11:34:13.770

我找到了解决方案，我发现我在 RoR 方面非常缺乏经验。

在上述管理视图的控制器中添加以下内容：

```
@work.project_id = params[:pid] unless params[:pid].nil? 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2011-09-02T13:58:13.300

```
<%= f.select :project_id, @project_select, :selected => params[:pid] %> 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-10-17T23:33:35.913

我无法让它工作，发现我不仅需要将“selected”html 属性添加到正确的`<option>`标签，*还*需要添加到`<select>`标签中。[MDN 关于 select 标签的 selected 属性的文档](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/select)说：

> **selected** - 布尔属性指示最初可以选择特定选项。

这意味着代码应如下所示：

```
f.select :project_id, options_for_select(@project_select, default_val), html: {selected: true} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-04-12T21:17:11.160

```
<%= f.select :project_id, options_from_collection_for_select(@project_select,) %> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-12-17T21:03:25.813

Mike Bethany 上面的回答在创建新记录时设置了默认值，并且用户选择的值仍然显示在编辑表单中。但是，我添加了一个模型验证，它不允许我提交表单。这对我来说是在字段上进行模型验证并显示默认值以及用户在编辑模式下选择的值的方法。

```
 <div class="field">
    <%= f.label :project_id, 'my project id', class: "control-label" %><br>
    <% if @work.new_record? %>
      <%= f.select :project_id, options_for_select([['Yes', true], ['No', false]], true), {}, required: true, class: "form-control" %><br>
    <% else %>
      <%= f.select :project_id, options_for_select([['Yes', true], ['No', false]], @work.project_id), {}, required: true, class: "form-control" %><br>
    <% end %>
  </div> 
```

模型验证

```
 validates :project_id, presence: true 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-05T16:25:44.273

或者，您可以在控制器中设置 :project_id 属性，因为 f.select 的第一个参数会提取该特定属性。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-12-30T03:03:25.283

如果尝试打印 f 对象，那么您将看到有 f.object 可以被探测以获取所选项目（适用于所有 rails 版本> 2.3）

```
logger.warn("f #{f.object.inspect}") 
```

因此，使用以下脚本来获取正确的选择选项：

```
:selected => f.object.your_field 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-06-11T13:06:02.683

已经解释过了，举个例子吧

让选择列表成为

```
select_list = { eligible: 1, ineligible: 0 } 
```

所以下面的代码导致

```
<%= f.select :to_vote, select_list %>

<select name="to_vote" id="to_vote">
  <option value="1">eligible</option>
  <option value="0">ineligible</option>
</select> 
```

因此，要默认选择一个选项，我们必须使用**selected: value**。

```
<%= f.select :to_vote, select_list, selected: select_list.can_vote? ? 1 : 0 %> 
```

如果**可以投票？**返回 true 它设置**selected: 1**然后第一个值将被选中，否则第二个。

```
select name="driver[bca_aw_eligible]" id="driver_bca_aw_eligible">
  <option value="1">eligible</option>
  <option selected="selected" value="0">ineligible</option>
</select> 
```

如果选择选项只是一个数组列表而不是 hast 然后选择的将只是要选择的值，例如如果

```
select_list = [ 'eligible', 'ineligible' ] 
```

现在选定的将只需要

```
<%= f.select :to_vote, select_list, selected: 'ineligible' %> 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2009-03-08T12:43:58.543

这应该适合你。它只是传递`{:value => params[:pid] }`给 html_options 变量。

```
<%= f.select :project_id, @project_select, {}, {:value => params[:pid] } %> 
```

# c# - 计算一个月的最后一个 DayOfWeek

> ID：623459
> 
> 赞同：6
> 
> 时间：2009-03-08T11:49:44.897
> 
> 标签：c#, datetime

给定一个 DateTime 和一个 DayOfWeek 应该返回该月最后一个 DayOfWeek 的日期。

例如，2009 年 3 月 1 日和星期日将返回 2009 年 3 月 29 日

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-08T12:12:42.457

找不到方便的单线，但这个有效：

```
static DateTime LastDayOfWeekInMonth(DateTime day, DayOfWeek dow)
{
    DateTime lastDay = new DateTime(day.Year, day.Month, 1).AddMonths(1).AddDays(-1);
    DayOfWeek lastDow = lastDay.DayOfWeek;

    int diff = dow - lastDow;

    if (diff > 0) diff -= 7;

    System.Diagnostics.Debug.Assert(diff <= 0);

    return lastDay.AddDays(diff);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-08T12:06:31.393

[http://datetimeextensions.codeplex.com/](http://datetimeextensions.codeplex.com/)有一个 Last(dayOfWeek) 扩展方法可以为你做这件事

包括测试:-)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-08T12:04:47.793

获取下个月的第一天，然后找到该月的第一个数学工作日。回到 7 天，您在当月最后一周的那个工作日：

```
DateTime date = new DateTime(2009, 3, 12);
DayOfWeek day = DayOfWeek.Sunday;

DateTime nextMonth = new DateTime(date.Year, date.Month, 1).AddMonths(1);
while (nextMonth.DayOfWeek != day) {
    nextMonth = nextMonth.AddDays(1);
}
DateTime lastInMonth = nextMonth.AddDays(-7); 
```

（您可以用一些算法替换循环，该算法根据 DayOfWeek 值的数值计算要添加的天数，但这更直接。）

编辑：
您当然也可以得到当月的最后一天，然后向后循环，直到找到正确的工作日。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-08T12:24:28.167

```
static DateTime LastDateOfWeekForMonth(DayOfWeek weekday, int month, int year)
{
    DateTime d = new DateTime(year, month, 1).AddMonths(1);
    while (!(d.DayOfWeek == weekday && d.Month == month))
    {
       d = d.AddDays(-1);
    }
    return d;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-08T12:13:25.153

试试这个：从最后一天开始倒数直到你找到你要找的那一天

```
static DateTime LastOccurenceOfDay(DateTime dt, DayOfWeek dow)
    {
        DateTime looperDate = new DateTime(dt.Year, dt.Month, 1)
                                     .AddMonths(1).AddDays(-1);
        while (looperDate.DayOfWeek!=dow)                            
            looperDate =looperDate.AddDays(-1);            
        return looperDate; 
```

编辑：恢复了 Dangph 在评论中引用的旧版本。

```
 static DateTime LastOccurenceOfDay(DateTime dt, DayOfWeek dow)
     {
         //set start of loop
         DateTime looperDate = new DateTime(dt.Year, dt.Month, 1); 
         //initialze return value
         DateTime returnDate = dt;
         //loop until the month is over
         while (looperDate.Month == dt.Month)
         {
             //if the current DayOfWeek is the date you're looking for
             if (looperDate.DayOfWeek == dow) 
                 //remember it.
                 returnDate = looperDate;
             //increase day
             looperDate=looperDate.AddDays(1);
         }
         return returnDate;
     } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-06-04T14:52:26.077

```
 public DateTime GetLastDayOfMonth(int year, int month, DayOfWeek dayOfWeek)
    {
        var daysInMonth = DateTime.DaysInMonth(year, month);
        var lastDay = new DateTime(year, month, daysInMonth);

        while (lastDay.DayOfWeek != dayOfWeek)
        {
            lastDay = lastDay.AddDays(-1);
        }

        return lastDay;
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-09-22T01:50:56.740

这里是 LastDayOfMonth() 和 LastDayOfMonth(DayOfWeek) 以及单元测试，它们的灵感来自[How to find the 3rd Friday in a month with C#? 中的“Last](https://stackoverflow.com/questions/5421972/how-to-find-the-3rd-friday-in-a-month-with-c) *Friday* ”实现。@保罗弗莱尔：

```
/**
    /// <summary>An extension method that returns the last day of the month.</summary>
    /// <param name="d">A date within the month to calculate.</param>
    /// <returns>The last day of the current month.</returns>
    **/
    public static DateTime LastDayOfMonth(this DateTime d)
    {
        DateTime nextMonth = new DateTime(d.Year, d.Month, 1).AddMonths(1);
        return nextMonth.AddDays(-1);
    }

    /**
    /// <summary>An extension method that returns the last <see cref="DayOfWeek"> of the month.</summary>
    /// <param name="d">A date within the month to calculate.</param>
    /// <returns>The last day of the current month.</returns>
    **/
    public static DateTime LastDayOfMonth(this DateTime d, DayOfWeek dayOfWeek)
    {
        DateTime lastDayOfMonth = d.LastDayOfMonth();
        int vector = (((int)lastDayOfMonth.DayOfWeek - (int)dayOfWeek + DaysInWeek) % DaysInWeek);
        return lastDayOfMonth.AddDays(-vector);
    }

 #region LastDayOfMonth Tests

    [TestCase("1/1/2011", "1/31/2011")]
    [TestCase("2/1/2009", "2/28/2009")] //Leap Year
    [TestCase("2/1/2008", "2/29/2008")] //Leap Year
    [TestCase("3/10/2011", "3/31/2011")]
    [TestCase("4/20/2011", "4/30/2011")]
    [TestCase("5/15/2011", "5/31/2011")]
    [TestCase("6/30/2011", "6/30/2011")]
    [TestCase("12/1/2011", "12/31/2011")]
    public void LastDayOfMonthReturnsCorrectDay(string startingDate, string expectedDate)
    {
        //Arrange
        DateTime testDate = DateTime.Parse(startingDate);
        DateTime expected = DateTime.Parse(expectedDate);

        //Act
        DateTime actual = testDate.LastDayOfMonth();

        //Assert
        Assert.That(actual, Is.EqualTo(expected));
    }

    [TestCase("1/1/2011", DayOfWeek.Monday, "1/31/2011")]
    [TestCase("2/1/2009", DayOfWeek.Saturday, "2/28/2009")]
    [TestCase("2/1/2009", DayOfWeek.Sunday, "2/22/2009")] 
    [TestCase("2/1/2008", DayOfWeek.Friday, "2/29/2008")] //Leap Year
    [TestCase("2/1/2008", DayOfWeek.Thursday, "2/28/2008")] //Leap Year
    [TestCase("3/10/2011", DayOfWeek.Wednesday, "3/30/2011")]
    [TestCase("4/20/2011", DayOfWeek.Friday, "4/29/2011")]
    [TestCase("4/20/2011", DayOfWeek.Saturday, "4/30/2011")]
    [TestCase("5/15/2011", DayOfWeek.Tuesday, "5/31/2011")]
    [TestCase("5/15/2011", DayOfWeek.Saturday, "5/28/2011")]
    [TestCase("9/30/2011", DayOfWeek.Sunday, "9/25/2011")]
    [TestCase("12/1/2011", DayOfWeek.Monday, "12/26/2011")]
    public void LastDayOfMonthReturnsCorrectDayOfWeek(string startingDate, DayOfWeek dayOfWeek, string expectedDate)
    {
        //Arrange
        DateTime testDate = DateTime.Parse(startingDate);
        DateTime expected = DateTime.Parse(expectedDate);

        //Act
        DateTime actual = testDate.LastDayOfMonth(dayOfWeek);

        //Assert
        Assert.That(actual, Is.EqualTo(expected));
    }       

    #endregion 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-08-01T07:02:30.367

```
static DateTime GetDayOfWeekInMonthFromWeekIndex(this DateTime date, DayOfWeek dow, int weekIndex)
{
    if (weekIndex > 4)
        return LastDayOfWeekInMonth(date, dow);

    DateTime newDate = new DateTime(date.Year, date.Month, 1);
    DayOfWeek newDow = newDate.DayOfWeek;
    int diff = dow - newDow;
    diff += ((weekIndex - 1) * 7);
    return newDate.AddDays(diff);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-01T17:33:07.523

值得一提的是：

int LastDayOfMonth = DateTime.DaysInMonth(now.year, now.month);

# linux - 如何在 linux 中安装 mod-jk？

> ID：623464
> 
> 赞同：0
> 
> 时间：2009-03-08T11:58:15.860
> 
> 标签：linux, apache, tomcat, mod-jk, suse

我需要在 apache 后面运行 tomcat - 我正在运行 suse 10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T13:21:32.213

安装 mod-jk 最简单的方法是使用 yast。或者命令：sudo /sbin/yast --install apache2-mod_jk。使用此命令，您将需要存在安装介质。

# sql-server - 如何将 SQL Server Express 与 VS C# Express 集成

> ID：623472
> 
> 赞同：0
> 
> 时间：2009-03-08T12:07:33.497
> 
> 标签：sql-server, visual-studio-2008, integration, visual-studio-express, sql-server-2008-express

我刚刚安装了包含 SQL Server Express 2008 的 VS C# Express 2008。一切正常，我可以在已安装产品列表中看到 VS C# 和 SQL Server。

当我启动 VS C# 时，它看起来不错，但在 DB Explorer/Data Connection 上下文菜单中，“创建新的 SQL Server 数据库”选项被禁用。

我已卸载所有 VS 产品并重新安装，但问题仍然存在。我还需要做其他事情吗？

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T12:30:23.740

VC# 似乎坚持使用附加的数据库文件 (*.mdf)。这将使您的数据库保持在项目本地，而不是让 SQL Server Express 与数据库混杂在一起。

**通过选择Microsoft SQL Server 数据库文件**选项，您可以使用**Add Connection...**对话框创建数据库。该数据库将驻留在您选择的文件中。它适用于任何典型的“快速”项目。

 **注意：如果您使用 SQL Management Studio Express 在 SQLEXPRESS 实例中创建数据库，您仍然可以使用适当的连接字符串以编程方式连接到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T12:15:18.940

我会下载[SQL Server Management Studio Express](http://www.microsoft.com/downloads/details.aspx?familyid=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&displaylang=en)，然后在其中创建您的数据库。

# javascript - Javascript - 对象初始化器？

> ID：623474
> 
> 赞同：22
> 
> 时间：2009-03-08T12:08:18.207
> 
> 标签：javascript, initialization

我意识到您可以像这样自动运行对象中的属性：

```
var obj = {

    init:(function(){ alert('loaded');})();

} 
```

我正在尝试将此方法用作对象的初始化程序。我遇到的问题是将 'obj' 的引用传递给 init 属性。我怀疑它会产生错误，因为 obj 尚未完全内置在浏览器中。我正在尝试执行以下操作，但没有成功。如果有办法做到这一点，我很想知道如何。

```
var obj = {
    prop:function(){ alert('This just ran.'); },
    init:(function(){ obj.prop(); })();
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-03-08T14:05:52.340

如果你想创建多个相似对象的实例，你应该使用普通的旧构造函数（记住将共享属性放在原型中！）。

如果要创建单个对象，请考虑使用匿名构造函数。您的示例将显示为：

```
var obj = new (function() {
    this.prop = function() {
        alert('This just ran.');
    }

    // init code goes here:
    this.prop();
}); 
```

这比对象文字有一个额外的好处：构造函数可以用作“私有”变量的闭包。

不要过度使用对象字面量：它们可能会使简单的事情变得简单，但复杂的事情会变得过于复杂。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-08T12:15:33.383

这是不可能的：在整个块被解释之前，obj 不存在。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-12T22:24:36.583

一个简单的替代方案：

```
var obj = {

  init: function(){ 
    alert('loaded');
  }

}.init(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-08T12:46:06.667

你为什么不使用构造器模型（实际上，我不知道它的正确名称）：

```
function Obj() {
    // Initialising code goes here:
    alert( 'Loaded!' );

    // ...

    // Private properties/methods:
    var message = 'hello',
        sayHello = function() {
            alert(message);
        };

    // Public properties/methods:
    this.prop = function() {
        sayHello();
    };

    // Encapsulation:
    this.setMessage = function(newMessage) {
        message = newMessage;
    };
} 
```

用法：

```
var instance = new Obj();
instance.setMessage('Boo');
instance.prop(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-07-04T13:30:29.843

是的，obj 似乎直到后来才在本地存在。这对我有用`setTimeout`。在 IE8、FF5、Chrome 12、Opera v11.5 上测试正常。虽然不确定 50 毫秒，但我想这已经足够了。

```
var obj = {
    prop: function() { alert('This just ran.') },
    init: ( function(){ setTimeout(function(){obj.prop()},50) } )()
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-28T15:02:03.977

以类 jQuery 风格初始化

```
(function() {

var $ = function(){
  return new $.fn.init();
};

$.fn = $.prototype = {
  init: function(){ 
    this.prop(); 
  },
  i: 0,
  prop: function(){ 
    alert('This just ran. Count: ' + (++this.i)); 
    return this;
  }
};

$.fn.init.prototype = $.fn;

$().prop().prop();

})(); 
```

[**`jsbin.com`**](https://jsbin.com/bicitom/edit?html,js,console)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-31T17:34:39.013

这是对 user1575313 提交的示例的更新。

原始代码有效，但它限制了设置后对象的使用。通过在 init 方法中返回对象引用，它允许在对象之外使用对象。

链接到 jsFiddle。[jsFiddle](http://jsfiddle.net/efa5pt6f/)

```
var obj = {

init: function()
{ 
    alert('loaded'); 

    this.consoleLog(); 

    /* we want to return this to keep object 
    usable after auto init */ 
    return this;
}, 

consoleLog: function() 
{
    console.log(1); 
}

}.init(); 

/* the obj should now be usable outside the auto init */ 
obj.consoleLog(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-08T12:14:18.833

我想你想尝试这样的事情：

```
var obj = {
    prop: function() { alert('This just ran.'); },
    init: function() { obj.prop(); }
} 
```

对象文字需要逗号分隔的成员，不带分号。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-03-08T12:14:12.187

如果将“this”传递给init函数，它会起作用吗？

类似的东西：（未经测试）

```
var obj = {
    prop:function(){ alert('This just ran.'); },
    init:(function(o){ o.prop(); })(this);
} 
```

# c++ - 逆向工程 C++ DLL

> ID：623475
> 
> 赞同：12
> 
> 时间：2009-03-08T12:11:13.893
> 
> 标签：c++, winapi, dll, reverse-engineering

我有一个最初用 VS2005 编写的小实用程序。

我需要做一个小改动，但是其中一个 dll 的源代码已经丢失了。

是否有免费或价格合理的工具可以将 dll 反向工程回 C++ 代码。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-08T12:19:40.223

[Hex-Rays 反编译器](https://www.hex-rays.com/products/decompiler/)是一个很棒的工具，但是代码会非常难以阅读，并且您将不得不花费大量时间对整个 DLL 进行逆向工程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-08T14:02:16.140

您可能还想看看***OllyDbg***，它是一个 32 位汇编器级别的分析调试器。它用于在您没有源代码的情况下分析二进制代码。它是轻量级的调试器。***OllyDbg***是一个共享软件，因此您可以免费下载和使用它..!!

[访问 OllyDbg 是这里](http://www.ollydbg.de/)的主页

**PS：**过去，破解者使用NuMega 的[SoftICE](http://en.wikipedia.org/wiki/SoftICE)调试可执行文件并获取寄存器值的快照。SoftICE 是一个高级调试器。这绝对是饼干最喜欢的工具。我不知道产品的现状。NuMega 的网站没有关于它的信息。我可能忽略了它，但我找不到它。我建议您使用旧版 (4.0x) SoftICE 并为 SoftICE 应用 WindowsXP 补丁。使用 SoftICE 是一种“体验”。

**进一步阅读：** [逆向：逆向工程的秘密*Eldad Eilam*](https://rads.stackoverflow.com/amzn/click/com/0764574817)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-08T13:03:39.057

我不知道您的确切情况，以及 DLL 为您的应用程序实现了多少功能。但我认为，在大多数情况下，基于已知功能重写丢失的 DLL 会更好。

如果您有一些文档，则尤其如此。

尝试将二进制代码逆向工程为汇编程序，然后是 C++，然后尝试对其进行修改以提供现有功能，在大多数情况下，这将是耗时的，甚至可能是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-08T12:18:26.217

如果您的小改动是编辑一些文本或跳过一些例程，您可以使用十六进制编辑器或反汇编程序，但您将无法看到原始 C++ 代码，即使您找到了可以转换 DLL 的工具回到代码中，所有变量名都将消失，这将是一团糟。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-08T14:13:13.617

根据您的情况，我将保留旧版/二进制 DLL 原样并编写一个包装 DLL，该 DLL 将更改和/或添加任何其他行为。

这个想法是将旧功能聚合到一个新的 DLL 中，该 DLL 导入旧的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-15T14:56:52.083

现在您可以免费使用 ghidra，或者购买 idapro

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-08T13:26:15.493

你必须像游戏和应用破解者那样做：使用反汇编程序并破解汇编程序代码。

# silverlight - Silverlight Toolkit，你把二进制文件放在哪里

> ID：623492
> 
> 赞同：2
> 
> 时间：2009-03-08T12:19:04.950
> 
> 标签：silverlight, silverlight-toolkit

所以你从 Codeplex 下载工具包。怎么办？您更喜欢将二进制文件放在哪里？

我对您如何处理设计二进制文件特别感兴趣，您将这些文件放在系统文件夹的什么位置？您是否将它们添加到 GAC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-05T19:16:12.023

这个问题绝对针对[Silverlight Toolkit](http://silverlight.codeplex.com/)的原始版本。2009 年 3 月、2009 年 7 月和所有未来的版本都有这种改进的体验，因此您不需要将二进制文件复制到您的项目目录中。

从今年早些时候开始，我们更新了 Silverlight 工具包，使其拥有一个基于 MSI 的 Windows 安装程序，它可以执行许多任务，包括

*   在 Silverlight SDK 下创建一组文件夹，以包含工具包
*   创建一个开始菜单组，其中包含指向文档、在线论坛、入门指南和源代码的链接
*   使用 Visual Studio 的工具箱和 Expression Blend 的控件库注册 Silverlight Toolkit 的控件
*   将二进制文件注册为扩展，以便您可以在项目中包含一个简单的引用

    ```
    <Reference Include="System.Windows.Controls.Input.Toolkit" /> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T13:09:35.143

我只是把它们放在方便的地方，然后在我的项目中添加对它们的引用，使用“添加引用”对话框中的“浏览”。我当然不会将它们放在GAC 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T13:21:23.257

下载并安装工具包。

对于您拥有的每个不同的解决方案，在您的根解决方案目录中创建文件夹“Foreign/[Name]”（在本例中为“Foreign/Silverlight Toolkit”）。在那里复制所需的 dll-s，然后从相关项目中引用它们。

如果您想修改工具包，则可以将部分源代码作为项目添加到您的解决方案中，并在使用它的其他项目中引用它。

将修改后的工具包添加到单独的解决方案中可能是一个便于重用的好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-04T07:14:46.353

[将 Silverlight 添加到 GAC](http://templatereactor.com/blog/adding-silverlight-to-the-gac.html)

结果证明解决方案非常简单。希望这可以帮助。

# asp.net - DotNetOpenID 程序化登录

> ID：623495
> 
> 赞同：0
> 
> 时间：2009-03-08T12:22:44.240
> 
> 标签：asp.net, dotnetopenauth

我将 Dotnetopenid 用于我的 openid 解决方案，使用内置用户控件时一切都很好，但是当我想以编程方式实现它时，如下面的代码，

```
openid.Response.GetExtension<DotNetOpenId.Extensions.SimpleRegistration.ClaimsResponse>(); 
```

始终为空。任何的想法？

```
 OpenIdRelyingParty openid = createRelyingParty();
    if (openid.Response != null) {
        switch (openid.Response.Status) {
            case AuthenticationStatus.Authenticated:
                // This is where you would look for any OpenID extension responses included
                // in the authentication assertion.
                // var extension = openid.Response.GetExtension<SomeExtensionResponseType>();

                // Use FormsAuthentication to tell ASP.NET that the user is now logged in,
                // with the OpenID Claimed Identifier as their username.
                State.ProfileFields = openid.Response.GetExtension<DotNetOpenId.Extensions.SimpleRegistration.ClaimsResponse>();
                FormsAuthentication.RedirectFromLoginPage(openid.Response.ClaimedIdentifier, false);
                break; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T18:13:08.330

[从安德鲁](http://blog.nerdbank.net)那里得到帮助

在重定向到提供者之前，我错过了为我的请求添加扩展名。（此步骤未在示例文件中编码）

为此，在创建请求对象后执行以下操作：

```
 Dim request As IAuthenticationRequest = openid.CreateRequest(openid_identifier.Text)
        ' This is where you would add any OpenID extensions you wanted
        ' to include in the authentication request.
        ' request.AddExtension(someExtensionRequestInstance);
        Dim myclaim As New ClaimsRequest

        With myclaim
            .BirthDate = DemandLevel.Request
            .Country = DemandLevel.Request
            .Email = DemandLevel.Request
            .FullName = DemandLevel.Request
            .Gender = DemandLevel.Request
            .Language = DemandLevel.Request
            .Nickname = DemandLevel.Request
            .PostalCode = DemandLevel.Request
            .TimeZone = DemandLevel.Request

        End With

        request.AddExtension(myclaim)

        ' Send your visitor to their Provider for authentication.
        request.RedirectToProvider() 
```

代码在 vb.net

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-09T22:16:13.353

注意在下一个版本中修复并更清晰。

# parsing - Flex/Lex 和 Yacc/Bison 有什么区别？

> ID：623503
> 
> 赞同：136
> 
> 时间：2009-03-08T12:31:52.910
> 
> 标签：parsing, bison, yacc, flex-lexer, lex

Flex & Lex 和 Yacc & Bison 有什么区别。我在互联网上疯狂搜索，但没有找到任何可靠的答案。

我可以在 Ubuntu 上安装纯 Lex 和 Yacc，还是只能安装 flex 和 bison。我很困惑。

*   Lex 或 Yacc 是否仍由某人维护？
*   他们都是免费的吗？
*   如果 Lex 不是免费的，为什么我要在我的 Ubuntu 发行版上安装它？

    ```
    lex --version
    lex 2.5.35 
    ```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-03-08T12:58:39.287

Lex 和 Flex 之间存在一些差异，但您必须滥用 Lex 才能遇到 Flex 的问题。（我有一个滥用 Lex 的程序，因此不能在 Flex 下运行。）这主要是在输入前瞻领域；在 Lex 中，您可以提供自己的输入代码并修改字符流；Flex 不会让你这样做。

Yacc 和 Bison 非常兼容，尽管 Bison 有一些额外的技巧可以做。

您可能找不到要在 Ubuntu 上安装的 Lex 和 Yacc 的（原始的、AT&T 版本的）合法副本。我不一定会说这是不可能的，但我不知道这一点。Flex 和 Bison 很容易获得，并且在大多数情况下是等效的。您还可以从 BSD 世界中找到各种替代的和近似等效的程序。

Lex 和 Yacc 由 Unix SVRx 许可证持有者维护 - IBM (AIX)、HP (HP-UX) 和 Sun (Solaris) 等公司已根据他们的命令修改了 Lex 和 Yacc 版本。MKS 还提供 MKS Lex 和 MKS Yacc；然而，Yacc 至少有一些非标准的扩展。

Flex 和 Bison 是免费的。(AT&T) Lex 和 Yacc 不是。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-03-08T12:35:33.103

Bison 是 Yacc 的 GNU 实现/扩展，Flex 是 Lex 的继承者。无论哪种情况，都可以（并且推荐）使用 bison / flex。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-04-18T00:21:50.650

在大多数（全部？）Linux 系统上，“Lex”实际上是 flex 的符号链接。基本上，它只是免费版本的不同名称。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-07-27T19:24:03.680

YACC 在 Plan 9 和 Open Solaris 的开源许可下可用。此外，还有 Berkeley YACC，它与原始 YACC 兼容，但不共享源代码。Berkeley YACC 可以在任何开源 BSD 操作系统上找到。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-15T06:52:54.267

Bison 是 GNU 项目的一部分。yacc 被用作 Berkeley Software Distribution (BSD) 上的实用程序。虽然它与 yacc 兼容，但 Lex 和 Yacc 已成为过去。Flex 和 bison 今天被广泛使用。

# python - 从 Google Map Mobile 3.0 的 MyLocation 功能检索纬度/经度

> ID：623504
> 
> 赞同：1
> 
> 时间：2009-03-08T12:34:30.623
> 
> 标签：python, google-maps, s60, pys60

我想借助一些脚本从 Google Maps Mobile 3.0 获取我当前的纬度/经度，我猜这可能是一个 Python 脚本。这可能吗？而且，更重要的是：Google Maps Mobile API 是为这种交互而设计的吗？有什么法律问题吗？

基本上我有一部没有 GPS 的 S60 手机，而且我发现 Google 维护自己的数据库，将 Cell ID 与纬度/经度联系起来，这样根据我最接近的 Cell ID，它可以估计我当前的位置。所以只有来自运营商的 Cel ID 信息不会告诉我我在地球上的位置，直到 Cell ID 和纬度/经度之间的这种链接可用（为此我正在考虑寻求 GMM 的帮助；当然，如果它提供这个...）。

其次，GMM 3.0 将我当前的纬度/经度推送到 iGoogle Latitude 小工具……所以我应该有某种方法可以通过我的自定义小工具/脚本获取相同的信息，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-23T16:38:44.890

您不必通过 Google 地图执行此操作。可从[http://www.opencellid.org](http://www.opencellid.org)获得 Cell ID 到纬度和经度的映射。

您可以获取原始数据文件，然后将部分数据采样到您需要的精度。然后，使用 pys60 elocation api，您可以获取当前的 Cell ID（您需要拥有 DevCert 才能执行此操作）。

有关更多详细信息，请查看：[http ://discussion.forum.nokia.com/forum/showthread.php?t=112964](http://discussion.forum.nokia.com/forum/showthread.php?t=112964)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T14:26:46.860

不，由于 S60 第三版的平台安全特性，您无法从 Python 脚本或其他 S60 应用程序访问它。即使 Google 地图应用程序会将信息写入磁盘，您的应用程序也无法访问其他应用程序的应用程序特定文件。

除了 GPS 或 GPS 不可用时，Google 地图还使用基于小区的定位。Google 尚未发布任何 3rd 方 API 来进行这些从信号塔到经纬度的转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-08T16:44:29.907

关于从磁盘读取任何文件：

只有当您拥有授予您该能力的[R&D（研究与开发）证书](https://rdcertification.nokia.com/rdcertification/app)`AllFiles`时，您才能访问几乎任何文件。

# ruby - 蒙版和透明度

> ID：623511
> 
> 赞同：1
> 
> 时间：2009-03-08T12:42:08.000
> 
> 标签：ruby, transparency, shoes, mask

我对鞋子相当陌生，遇到了两个问题。

首先，我想使用部分透明的 png 设置蒙版，如下所示：

```
mask do
    image "images/stencilMask.png"
end 
```

这是否可能以某种方式或只能使用矢量形状？

除此之外，我在尝试将透明颜色设置为任何类型的文本上的描边时注意到一个小错误（？），如下所示：

```
title "Hello", :stroke => rgb(1.0, 0.0, 0.0, 0.5) 
```

根本不应用透明度。我做错了什么，还是这实际上是一个错误？

欢呼并感谢所有答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-18T13:50:22.993

关于面具，在我的测试中，我发现它适用于 GIF，但不适用于 Windows 上的 PNG：

```
Shoes.app do
    banner "hello this is a very long string", :top => 200
    mask do
        image "test.gif", :top => 0
    end
end 
```

我的 test.gif 是一个 480x320 的图像，中间有一个实心椭圆。图像的其余部分是透明的。这使得文本出现在图像中实心椭圆的位置。

关于笔画/透明度问题。这是一个错误/缺失的功能。看到这个问题：[Make text transparent in Shoes.app](https://stackoverflow.com/questions/1214308/make-text-transparent-in-shoes-app)

# html - XHTML 严格验证

> ID：623513
> 
> 赞同：5
> 
> 时间：2009-03-08T12:43:46.407
> 
> 标签：html, validation, forms, xhtml

真的是2个问题。为什么这些代码不验证 XHTML 1.0 Strict。XHTML 1.0 Strict 是项目要求。

第2行导致问题

> 文档类型在这里不允许元素“输入”；缺少“p”、“h1”、“h2”、“h3”、“h4”、“h5”、“h6”、“div”、“pre”、“address”、“fieldset”、“ins”之一, "del" 开始标签。

```
<form enctype="multipart/form-data" action="upload.php" method="post">
<input type="hidden" name="max_file_size" value="1048576" />
<table><tr><td><b>Image location: </b></td><td><input type="file" name="file" size="30"/></td></tr>
<tr><td><b>Caption: </b></td><td><input type="text" name="caption" size="30"/></td></tr>
<tr><td><input name="submit" type="submit" value="Upload" /></td><td>*(png, jpeg, jpg and gif files &lt; 1mb)</td></tr></table>
</form> 
```

对于第 2 行和第 3 行

> 文档类型在这里不允许元素“输入”；缺少“p”、“h1”、“h2”、“h3”、“h4”、“h5”、“h6”、“div”、“pre”、“address”、“fieldset”、“ins”之一, "del" 开始标签。

```
<form action="#">
    <input type="text" size="30" name="query"  value="" onkeypress="return disableEnterKey(event)" />
    <input type="button" name="searchButton" value="Search" onclick="loadResults(this.form)" />
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-08T12:47:10.827

您需要将表单输入放在 <fieldset> 或其他块标记中。<input> 元素是*内联表单元素*，内联元素可能不会出现在块上下文中。尝试

```
<fieldset>
   <input ... />
<fieldset> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-08T12:45:54.967

正如消息所述，您不能将输入元素作为表单的直接子元素。它必须包含在“p”、“h1”、“h2”、“h3”、“h4”、“h5”、“h6”、“div”、“pre”、“address”、“fieldset”之一中，“ins”，“del”。

最简单的解决方法可能是将它们放在“p”、“div”或“fieldset”元素中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T12:46:18.413

XHTML 严格要求您不要将输入元素直接放在表单中 - 您可以通过将输入放置在验证器建议的任何块级元素中来修复错误。

尝试这样的事情：

```
<form action="#">
    <div>
        <input type="text" size="30" name="query"  value="" onkeypress="return disableEnterKey(event)" />
        <input type="button" name="searchButton" value="Search" onclick="loadResults(this.form)" />
    </div>
</form> 
```

# windows - Windows 上的 msysgit——如果有的话，我应该注意什么？

> ID：623518
> 
> 赞同：41
> 
> 时间：2009-03-08T12:46:06.697
> 
> 标签：windows, git, version-control, msysgit

这与[我](https://stackoverflow.com/questions/623018/git-without-bash-cygwin)最近提出的另一个问题有关。

安装 msysgit 时，安装程​​序会提供 3 个与系统路径相关的选项：

1.  永远不要改变windows环境。使用此选项，您必须使用“bash”外壳来处理 git。

2.  将 git\bin 目录添加到 PATH 环境变量中，但不要覆盖一些内置的 windows 工具。stackoverflow 的同事 Gabe Moothart[在评论中告诉我](https://stackoverflow.com/questions/623018/git-without-bash-cygwin/623169#623169)，这个选项会使一些 git 操作失败！这些操作是什么？我应该担心他们吗？

3.  与 2 相同，但会覆盖一些默认系统工具。这些工具是什么？窗户的哪些部分依赖于它们？这在实践中会受到伤害吗？

我想到了另一个与系统 PATH 无关的问题。

如果我的项目目录中有符号链接和硬链接怎么办？git知道如何处理这些吗？或者，它是否会遭受无限递归的影响，如果说，目录结构使得某个文件夹实际上是其父级之一的符号链接？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-03-15T11:02:30.333

无论您选择哪个选项，您都会得到`bash`，后一个选项只是添加在其外部使用 Git 的方法。

对于后一种选项，**msysgit**将常见 Linux 实用程序的 Windows 构建添加到**`PATH`**. 这包括**`find`**,**`kill`**和**`sort`**, 以及**`cp`**, **`ls`**,**`rm`**和大约 20-30 个其他人。

前 3 个（和类似的）的问题在于它们存在于两个操作系统中，并且在每个操作系统中的功能不同。

如果您知道您将使用哪一个，这并不是一个巨大的考验，但是任何开发的应用程序都期待一个并获得另一个肯定会失败。

* * *

为了防止冲突，在 Git 仍按预期工作的同时，您可以创建一个`PATH`仅针对会话进行调整的简单批处理脚本。（例如，`readygit.bat`）

```
@echo off
setlocal
set PATH=C:\Git\bin;%PATH%
cmd 
```

相应调整`C:\Git\bin`。但是，只需运行它并在`cmd`.

有了这个，您可以使用安装选项 3 并安全地`C:\Git\bin`从系统中删除`PATH`，消除 Windows 应用程序的任何混淆，而不会混淆 Git。

[**我目前在GnuWin**](https://sourceforge.net/projects/gnuwin32/)应用程序中使用类似的脚本，包括**`find`**.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-15T10:21:21.430

您可能想知道：

*   所有 git 命令都不在那里。在 2009 年 3 月上旬的 MSysGit1.6.2 上：archimport、cvsexportcommit、cvsimport、cvsserver、filter-branch、instaweb、send-email 和 shell。）

*   在 MSysGit1.6.2 之前，[没有](https://stackoverflow.com/questions/527037/git-svn-not-a-git-command/527383#527383)git-svn （[**现在是**](http://code.google.com/p/msysgit/wiki/MSysGitHerald8)）。
    问题是 git-svn 需要 subversion 的 perl 绑定，并且您只能将它们构建为可动态加载的模块。而且 MSysGit 有一个不支持动态加载模块的 perl 版本。

*   有关 MSysGit 的所有详细信息最好在他们的[**MSysGitHerald** Github wiki中进行解释](https://github.com/msysgit/msysgit/wiki/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-09T08:34:05.547

在 Windows 上（这在其他系统上不是问题，在我非常拙劣的观点中......），您必须非常了解 crlf 问题，并注意（除非他们在最新版本的 Git 中更改了这一点，我相信他们可能有 - 或者如果您使用的是非常旧版本的 Git），autocrlf 默认启用，与所有其他 git 安装不同。

另请注意，除非您使用最新版本的 msysgit，如果我从邮件列表中没记错的话，本周很快就会发布，您的存储库大小不能大于 2GB。

此外，Windows 非常不区分大小写，但 / 有时 / 会保留大小写 - 请记住这一点！（这并不一定会混淆 git - 但它可以并且确实会混淆 git repo 的用户）。

最后，git 在 windows 上比在 linux 上要慢得多，尽管它（在我有限的经验中）比其他选择要快。

现在，关于路径...

除非我弄错了，否则您应该能够确保主 git 二进制文件在路径中 - 然后该二进制文件应该负责引用其他 git 组件......但我没有对此进行测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-09T22:34:00.940

如果您打算从 cygwin 提示符运行 git，则 MSYS Git 安装程序建议选项 2。cygwin 环境确保 git 依赖项位于您的 PATH 中。如果您选择此选项但随后从 Windows 命令提示符调用 git，则将找不到 git 所依赖的所有 unix-y 命令行实用程序。IIRC，git 本身部分实现为 bash 脚本。我不知道哪些操作会失败，但我认为 git 不会以这种方式使用。

我没有选项 3 覆盖的系统工具列表（安装程序提到 find.exe），但这只会影响你，如果你是一个批处理脚本忍者。在命令行中，`find`现在将引用该名称的 unix 实用程序，而不是 Windows 附带的 exe。它不会以任何方式损害 Windows 本身。

只需用剪刀运行并选择选项 3 :-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-22T18:23:23.393

当您在 Windows 上使用 Windows GUI 并创建您的第一个存储库时，不要为存储库目录键入名称“.git”。（然后它会创建，然后在它下面创建另一个 .git 文件夹，当你最终想看那里时）浏览到包含你的源代码的文件夹，然后 - 只需选择那个文件夹！将为您创建存储库目录“.get”。

然后您会看到未暂存更改中的文件，并通过单击文件名旁边的小页面图标，将它们移动到暂存更改中。

并且绝对用剪刀运行并选择选项 3。没有人再从命令行窗口使用 kill、sort 或 find 了。

# python - 为什么我不能直接向任何 python 对象添加属性？

> ID：623520
> 
> 赞同：21
> 
> 时间：2009-03-08T12:46:56.507
> 
> 标签：python, attributes, object

我有这个代码：

```
>>> class G:
...   def __init__(self):
...     self.x = 20
...
>>> gg = G()
>>> gg.x
20
>>> gg.y = 2000 
```

而这段代码：

```
>>> from datetime import datetime
>>> my_obj = datetime.now()
>>> my_obj.interesting = 1
*** AttributeError: 'datetime.datetime' object has no attribute 'interesting' 
```

根据我的 Python 知识，我会说它会`datetime`覆盖`setattr`/ `getattr`，但我不确定。你能在这里阐明一下吗？

编辑：我对`datetime`. 我想知道一般的对象。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-03-08T12:54:54.257

我的猜测是，datetime 的实现使用[__slots__](http://docs.python.org/reference/datamodel.html#id3)以获得更好的性能。

使用`__slots__`时，解释器只为列出的属性保留存储空间，没有别的。这提供了更好的性能并使用更少的存储空间，但这也意味着您不能随意添加新属性。

在这里阅读更多：http: [//docs.python.org/reference/datamodel.html](http://docs.python.org/reference/datamodel.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-03-08T13:07:39.000

它是用 C 写的

[http://svn.python.org/view/python/trunk/Modules/datetimemodule.c?view=markup](http://svn.python.org/view/python/trunk/Modules/datetimemodule.c?view=markup)

它似乎没有实现 setattr。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T01:27:33.377

虽然问题已经得到解答；如果有人对解决方法感兴趣，这里有一个例子——

```
mydate = datetime.date(2013, 3, 26)
mydate.special = 'Some special date annotation'  # doesn't work
...
class CustomDate(datetime.date):
    pass
mydate = datetime.date(2013, 3, 26)
mydate = CustomDate(mydate.year, mydate.month, mydate.day)
mydate.special = 'Some special date annotation'  # works 
```

# ruby-on-rails - 是否有 Ruby on Rails 布局/css 存档？

> ID：623523
> 
> 赞同：22
> 
> 时间：2009-03-08T12:48:50.950
> 
> 标签：ruby-on-rails, ruby, layout, css

有人知道有一堆 Ruby On Rails 布局/CSS 组合的地方吗？我正在启动新的应用程序并希望给它们不同的外观，但我不是设计师，所以我很想使用别人的免费布局/css 作为初学者。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2011-11-08T02:34:58.800

查看[Twitter Bootstrap](http://twitter.github.com/bootstrap/)一个来自 Web 应用程序的 html/css/javascript 框架。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-03-08T14:35:41.130

你绝对应该看看[yaml](http://www.yaml.de/en/home.html)它是一个 CSS 框架，所有 HTML 元素都有默认设置。（记得包含 default_content.css） yaml 的好处是你不需要为了让它在所有浏览器中看起来都很好而将你的 CSS/HTML 砍死。Yaml 包含所有的 hack 和调整。使用[yaml 构建器](http://builder.yaml.de/)设置列等。

最好的祝福。阿斯比约恩·莫雷尔。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-09T07:47:03.757

Ruby on Rails 的 CSS 并没有什么特别之处，而且布局往往是特定于应用程序的，因此您不太可能在不同的应用程序之间看到重用的优势。但是，有一些工具可能对非设计师程序员有所帮助。

有些人喜欢[haml](http://haml.hamptoncatlin.com/)和[sass](http://haml.hamptoncatlin.com/docs/rdoc)作为 erb 模板的替代品。就个人而言，我更喜欢坚持使用 erb，而不是学习不同的模板标记语言。

[Blueprint CSS](http://www.blueprintcss.org/)是一个出色的基于网格的 CSS/布局入门工具包。这些天我在许多网站上都使用它。您可能还想研究[其他“CSS 框架”。](http://www.noupe.com/css/5-popular-css-frameworks-tutorials-tools-for-getting-started.html)

老实说，如果你能找到你喜欢的并适合你的应用程序布局的东西，你可以使用任何[免费的设计模板并为 Ruby on Rails 修改它。](http://www.oswd.org/)

祝你好运。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-09T07:17:18.710

也许您可以使用小部件插件。该插件可帮助您构建 Tabnav、导航菜单、进度条等...

看看这个演示文稿： [http ://www.slideshare.net/paolo.dona/rails-widgets-by-paolo-dona-at-railstoitaly?src=embed](http://www.slideshare.net/paolo.dona/rails-widgets-by-paolo-dona-at-railstoitaly?src=embed)

这是官方博客页面：http: [//blog.seesaw.it/](http://blog.seesaw.it/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2010-03-02T07:12:09.727

我在搜索这种类型的 Rails css 档案时偶然发现了这个问题。这是可以做到的，我认为应该这样做。

如果有一个专门用于样式化 Rails 站点的 CSS 布局共享站点，那就太棒了。布局可以设置表单域的样式、设置颜色方案、设置字体、样式、基线网格——所有这些东西都不是特定于应用程序的。一些布局甚至可能提供不同的常用 UI 配置（Basecamp 风格的顶部导航、侧边栏等），这些配置可以很容易地从应用程序中使用。

如果有一个 SASS 布局的地方会更好，因为它们可以提供 mixins，而不会在主 css 文件中乱扔东西，直到它被使用。如果还有 Formtastic 表单样式表也会很酷。

其他人认为应该存在这样的网站吗？您希望它如何工作？

如果您想一起创建这样的网站，请给我留言。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-10-25T20:12:04.863

这里有几个人说 Rails 模板没有什么特别的，这是正确的。人们，我猜是提问者，指的是许多（如果不是大多数）Rails 应用程序所具有的外观和感觉。这可能源于对 37 种信号设计的模仿，它们强调简单而不显得廉价，如[http://37signals.com/design所示](http://37signals.com/design)

因此，如果有人有此类设计/模板的链接，请提供链接。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-08T13:26:06.147

这并不完全符合您的要求，但[ActiveScaffold](http://activescaffold.com/)插件提供了相当多的预制外观和行为。如果您想在设计师（或您在开发的后期阶段）完成实际样式之前快速提出一些您觉得很舒服的东西展示给人们，这很有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-09T13:44:59.353

有很多免费模板网站或开源设计，但它们通常不是为应用程序设计的（有一些，但它们通常需要定制）

开始新项目时，我喜欢使用主题森林[http://themeforest.net/](http://themeforest.net/)中的模板， 通常在 10-20 美元左右，所以它不是免费的，但它是你的，无需留下版权声明。

themeforest 上的模板几乎总是包含精美的 jQuery 动画，如果您更喜欢原型，可以将其删除。

像 paolo donna 的小部件这样的助手会有所帮助，但是您确实需要一些 HTML 和 CSS 的基本知识才能获得结果，我认为困难的部分是从头开始创建，但是一旦您了解了基本的格式和文档结构，这并不难。

无论如何，您确实需要了解 html 和 css 才能使用 javascript（ajax、效果、行为..）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-03T12:30:02.953

[Streamlined](http://github.com/relevance/streamlined/tree/master) Rails 插件是另一种简化用户界面生成的方法。

该插件的屏幕截图和描述可以在[Rails Inside](http://www.railsinside.com/elsewhere/290-streamlined-beautiful-user-interfaces-out-of-the-box.html)和[“Java Kicks Ruby In The What Now”一](http://mentalized.net/journal/2009/05/19/java_kicks_ruby_in_the_what_now/)文中找到

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-20T14:35:10.163

如果您有 Rails 3 应用程序并且正在为您的应用程序寻找预制布局或主题，请查看[http://railsthemes.com](http://railsthemes.com)。有很多模板可供购买，截至昨天，还有一些免费主题。（完全披露：我是 RailsThemes 团队的一员。）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-08T16:50:22.973

CSS 很简单。只需找到您喜欢的网站并下载其 css 文件即可。找出页面上的哪些元素对应于哪些 css 类使用了 firebug 的检查功能。

您可以做的另一件事是找到您喜欢的开源 Rails 应用程序并查看那里的视图和 css。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-09T06:22:40.480

这个问题不是一个好问题。Ruby on Rails 是一个编程框架。您可以在其上创建各种不同类型的应用程序。你可以创建一个 craigslist 类型的应用程序、一个类似 ebay 的应用程序、一个像 amazon.com 这样的购物车系统，甚至是一个像 Google 这样的搜索引擎。您不能真正为 ruby​​ on rails 应用程序设计模板。

相反，您希望提出以下两个问题之一：

1) 是否有一个开源的 Ruby on Rails 应用程序可以做 blah blah blah？

或者

2) 我正计划使用 XYZ 开源 Rails 应用程序（例如错字或野兽或狂欢）......有人知道它的设计模板吗？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-03-09T10:45:57.100

当你制作一个 Rails 应用程序时，你自己编写所有的 HTML。Rails 特定的模板没有什么特别的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-05-08T08:48:46.533

我开发了一个[名为 {rails}strap 的 Rails 就绪主题](https://wrapbootstrap.com/theme/rails-strap-ruby-ready-theme-WB00952P7)。您可以使用它节省大量开发人员的时间。

# java - Android (Java) 网络编程资源

> ID：623533
> 
> 赞同：15
> 
> 时间：2009-03-08T12:55:37.750
> 
> 标签：java, android, network-programming

我想为 Android 开发一个应用程序，它可以通过 TCP 连接传输数据。

有谁知道可以找到客户端-服务器连接示例的任何好的示例或书籍？

我对 Java 和 Android 很陌生，所以我会非常感谢任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-07T22:23:47.820

很难相信这个问题已经超过 4 年没有回答了。如果有人仍然需要网络示例，Android 培训提供了对该主题的合理介绍。 [http://developer.android.com/training/basics/network-ops/index.html](http://developer.android.com/training/basics/network-ops/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-11T12:49:57.337

这里有一些链接可以帮助您入门。

[http://osamashabrez.com/simple-client-server-communication-in-android/](http://osamashabrez.com/simple-client-server-communication-in-android/) [http://www.vogella.com/articles/AndroidNetworking/article.html](http://www.vogella.com/articles/AndroidNetworking/article.html) [http://www.androidph.com/2008/10 /android-networking-user-experience-and.html](http://www.androidph.com/2008/10/android-networking-user-experience-and.html)

我还建议您查看 developer.Android 文档！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-13T07:26:14.887

这个在线教程可能会有所帮助： http: [//www.coreservlets.com/android-tutorial/](http://www.coreservlets.com/android-tutorial/)。它有 2 章关于网络编程：`Networking I: General Techniques`和`Networking II: HTTP and JSON Techniques`. 你可以看第一部分。

# windows - 调试 System.UnauthorizedAccessException 帮助

> ID：623536
> 
> 赞同：0
> 
> 时间：2009-03-08T12:58:48.523
> 
> 标签：windows, security, debugging

我正在尝试调试一个不是我自己编写的应用程序，当触发事件（添加用户）时，应用程序会抛出 System.UnauthorizedAccessException。

是否有您可以推荐的工具来告诉我应用程序正在尝试做什么？我知道这很可能是在尝试访问活动目录是否有任何东西可用于跟踪身份验证请求？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-08T13:17:50.503

最好的起点是附加一个调试器并打破第一次机会异常。使用 Visual Studio，您可以通过以下方式执行此操作

1.  文件 -> 打开项目/解决方案 -> 选择您的 .exe
2.  调试 -> 异常 -> 检查抛出的 CLR 异常
3.  按 F5
4.  做任何导致应用程序崩溃的事情。

当您遇到错误时，Visual Studio 将中断，当前异常的堆栈跟踪将准确显示失败的原因。

# c# - 使用反射调用泛型重载方法

> ID：623538
> 
> 赞同：2
> 
> 时间：2009-03-08T13:01:48.750
> 
> 标签：c#, reflection

我需要使用反射调用重载方法。我的课程如下：

```
public static Transformer
{
    //Overloaded method with generics parameter. First Transform Method
    public  static TranformerResult  Transform<T>(object [] entities,
        List<T>  dataContract) where T:class
    {
        return transformerResult;
    }

    //Overloaded method without generics parameter. Second Transform Method
    public static TranformerResult  Transform(object  entities,
        Type dataContract) 
    {
        return transformerResult;
    }
}   

public class TransformerResult
{
    public List<T> GetTypes<T>() where T:class
    {
    }
} 
```

我尝试使用以下语法调用第一个 Transform 方法：

```
GetMethod(“Transform”,(BindingFlags.Static | BindingFlags.Public),
    null, new Type[](){typeof(object[]),typeof(List<Type>}, null) 
```

但我得到了第二种变换方法。

我的意图是在 transformerResult 上调用 GetType 。TransformerResult 是一个返回第一个转换方法调用的对象。

任何人都可以帮助我编写 C# 代码来实现我的意图吗？

谢谢， 马希尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T13:15:42.960

您遇到问题的原因是您正在寻找的特定方法是通用的。该方法的一种类型是基于该方法的通用参数。这为您提供了一些注意事项 22。泛型参数与方法相关联，因此在您拥有方法本身之前，您无法正确构造该方法的类型数组。

这种特定场景的一个解决方案是只获取第一个通用方法。

```
var method = typeof(Transformer).GetMethods().Where(x => x.IsGenericMethod).First(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T13:12:26.023

除非这行得通：`typeof(List<>)`你需要对你所做的事情有点棘手，类似于我对这篇文章所做的事情：[http ://www.aaron-powell.com/posts/2010-04-08 -反射和泛型.html](http://www.aaron-powell.com/posts/2010-04-08-reflection-and-generics.html)

本质上是使用 LINQ 搜索所有方法的集合`Transform`，您无法仅返回您想要的本机方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T13:12:26.540

我认为调用中的类型数组中的第二种类型`GetMethod()`令人困惑。如果您获得`Type`包含这些方法的类的类的实例，则不包括用于创建该类实例的实际泛型参数（`Type`根据您的第二个代码示例，它看起来像 is ）。相反，它只知道它有一个通用参数。

我目前没有编译器，所以很遗憾我不能尝试这个，但我会尝试`typeof(List<T>)`为第二个参数指定等效项（你可能可以通过调用来得到这个`System.Collections.Generic.List.GetType()`，但我' m 不是正数）。

如果这不起作用，我能想到的唯一其他选择是调用`Type.GetMethods(BindingFlags.Static | BindingFlags.Public)`，然后自己搜索数组。

# visual-studio-2008 - 更改 Visual Studio 2008 新选项卡位置

> ID：623540
> 
> 赞同：5
> 
> 时间：2009-03-08T13:03:12.460
> 
> 标签：visual-studio-2008, tabs

自从 Visual Studio 2005（VS 2008 中的行为没有改变）问世以来，我最讨厌的一个问题就是打开新选项卡时的位置。这些在当前选项卡的左侧打开，这与在 Visual Studio 2003 及更高版本中打开新选项卡的位置相反。

在我看来，在当前选项卡的左侧打开新选项卡是违反直觉的……包括 Firefox 和 IE7 在内的大多数选项卡式应用程序都会在右侧打开新选项卡。我的问题是，是否有配置设置或 hack 可以使选项卡打开的行为与 Visual Studio 2003 中的一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-11-09T19:05:47.270

** 实际上不适用于 VS 2008 - 仅在此处添加此内容，因为它是 goog 上的热门歌曲**

为 VS 2010 设置右侧的选项卡

[工具 -> 选项 -> 环境 -> 文档，然后选择“在现有选项卡右侧插入文档”选项。](http://blogs.msdn.com/b/zainnab/archive/2010/04/16/the-best-of-visual-studio-2010-insert-documents-to-the-right-of-existing-tabs.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T08:52:05.107

[用于 Visual Studio 2008 的Tabs Studio](http://www.tabsstudio.com)（由我开发）插件在右侧打开选项卡，添加多行选项卡等等。

# open-source - 让大量爱好项目保持活力的最佳方式；开源？

> ID：623543
> 
> 赞同：3
> 
> 时间：2009-03-08T13:05:07.790
> 
> 标签：open-source

因为我的时间有限，我通常只能专注于我的一两个爱好项目，而其他人则坐在那里浪费时间。

我正在寻找一种可以让我更好地分配时间的解决方案。在我负责指导项目的情况下，开源是现实的，还是有更好的解决方案？

就我而言，一个项目有一个规模合理的用户社区，但目前是封闭源代码。有人要求开源它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-08T13:16:02.723

开源可能确实是一个好主意。如果您的项目对其他人有趣且有用，那么其他开发人员可能会比您想象的更快。看到其他人接手您的工作并为之做出贡献，这对您来说也可能是一种极大的乐趣和动力。

另一方面，如果你开源一个项目，它不仅仅是通过将它扔到 Sourceforge 上来完成的。为了使该项目对其他开发人员具有吸引力，它应该具有：

*   尽可能广泛使用的公共 SVN、git 或等效存储库
*   一个网站或小型 wiki（或您网站上的某些页面），其中包含所有必要的文档以下载和构建以及任何代码
*   代码的良好文档（最好是 doxygen，然后您可以将其放在网站上），*以及*
*   如果您真的想激励其他人处理您的代码，那么您可能还必须清理项目及其设计
*   在freshmeat.net（如果是Unix项目）等典型网站上的列表，您会在每个版本中更新；如果可能的话：与相关社区进行交流，例如在其他项目的邮件列表中发布您的项目。
*   即使不在特定项目上工作，对任何有关它的查询都非常敏感

我用我的两个项目做到了这一点。几个月后，它们被包含在主要发行版中。又过了一段时间，我发现一个法国人为其中一个项目写了一个完整的 gui。几个开发人员对另一个感兴趣，但最终没有人真正发送补丁。

如果你只是半途而废——把它扔到 Sourceforge 上，然后每两年上传一个新版本——我看不出它会有什么帮助。您投资的越多，您的项目对其他人的吸引力就越大，从长远来看，您在开发人员帮助中获得的收入就越多。

您的案例的答案可能是考虑哪些项目真正/最值得这些努力，然后继续进行。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-08T13:09:31.493

你的项目仍然会作为开源浪费掉。一个开源项目需要更多的工作，因为你必须：

*   使文档保持最新，以便其他开发人员能够理解它
*   如果您确实让人们提交更改，请整合他们或向他们解释为什么不能包含他们的更改。
*   保持对您的产品应该是什么的愿景，并阻止人们实施有损于该愿景的功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-08T13:30:41.067

**使用它们**- 或找一个这样做的人。

只有当有对特性和修复的需求，人们拼命地解决错误，或者认为“这将解决我的问题，如果......”没有需求时，他们才会生存下来，没有人会觉得有必要挖掘你的代码，包括你自己。

如果用户在那里，而您很难满足他们的需求，那么开源是一个可行的解决方案。

但是，向 SourceForge 提交项目并在其上贴上“GPL”标签不会*产生*需求。你至少可以提高知名度：建立一个网站，添加一些口头描述，确保谷歌索引它，将它提交到“免费软件”网站。

如果它是编程工具，请尝试将它们用于您正在进行的项目中。
如果是应用程序，请弄清楚他们解决了什么问题，然后还有谁遇到了这个问题，那么他们为什么不使用它。

或者——即使听起来很刺耳——让他们安息吧。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-08T13:28:53.630

项目之所以存在，是因为有人在照顾它们。默认情况下，开源并不是解决方案，只要看看 SourceForge 上大量死亡或孤立的产品即可。

如果您开源，您的下一步是建立一个负责产品的用户群。一旦建立了这个用户群，您就可以远离它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-08T14:36:03.140

一次只关注一个项目（最多两个）。根据项目对他人和自己的有用性来确定项目的优先级。专注于 (1) 最有用且拥有最多用户的项目（例如，如果它做了其他程序没有做的事情），或者 (2) 给您带来最大智力挑战的项目。如果项目两者兼而有之，那就更好了。

如果您让项目保持足够长的活跃时间以使其聚集大量用户群，那么第一类中的那些可能能够作为开源生活。然后其他一些开发人员可能也会对该项目感兴趣并加入它（对于 Subversion 项目，第一个开发人员从外部加入它需要几个月的时间 -[在这个视频中提到了](http://youtube.com/watch?v=ZtYJoatnHb8)大约 32 分钟）。一个只有一个开发者的项目随时可能死掉，但如果有多个积极的开发者，那么这个项目就有更好的生存机会。重要的是让一些工作发布。如果没有人可以使用该程序，那么它就不会聚集用户群。

后一类的主要是为了让你自己学习一些东西，但对别人来说可能没有那么有价值。如果您对它们失去兴趣，只需将代码埋在硬盘的一角，然后继续。即使你将它作为开源发布，也没有人会继续开发它。如果您愿意，只需将其压缩成一个包并放在您的网站上，在那里您可以展示您所做的事情，但不要指望任何人下载和使用它，更不用说继续开发它了。

[http://produceoss.com/](http://producingoss.com/)上的书籍和视频是了解如何使开源项目成功的好来源。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-08T13:18:41.517

将项目数量保持在两个或三个，并将它们开源。继续自己编写代码并花一些时间指导几个项目。开源并不意味着您现在可以拥有数十个项目并完全依赖您的同行程序员。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-21T23:49:26.927

对于您认为不值得花时间的项目，您仍然可以在发布为 OSS 之前更改其名称并让您的用户群知道。很明显，这是另一回事，您不会参与其中，但这可能只是几个程序员正在等待让您的工作继续进行的东西。

# model-view-controller - 如何在自定义 MembershipProvider 上调用 Initialize？

> ID：623545
> 
> 赞同：19
> 
> 时间：2009-03-08T13:08:08.547
> 
> 标签：model-view-controller, asp.net-membership, web-config

我已经阅读了所有相关的问题，但由于某种原因我仍然无法得到正确的解决方案，我这边有些不对劲，但不确定是什么原因造成的。

我创建了一个自定义成员资格提供程序，还将我的 web.config 更改为：

```
 <membership defaultProvider="MyMemberShipProvider">
      <providers>
        <clear />
        <add name="MyMemberShipProvider" 
                  type="MyNameSpace.MyMemberShipProvider" 
                  connectionStringName="ApplicationServices" 
                  enablePasswordRetrieval="false" 
                  enablePasswordReset="true" 
                  requiresQuestionAndAnswer="false" 
                  requiresUniqueEmail="false" 
                  passwordFormat="Hashed" 
                  maxInvalidPasswordAttempts="5" 
                  minRequiredPasswordLength="6" 
                  minRequiredNonalphanumericCharacters="0" 
                  passwordAttemptWindow="10" 
                  passwordStrengthRegularExpression="" 
                  applicationName="MyApplication" />
      </providers>
    </membership> 
```

这是我的 Initialize 方法的代码：

```
public override void Initialize(string name, NameValueCollection config)
{
    if (config == null)
    { throw new ArgumentNullException("config"); }

    if (string.IsNullOrEmpty(name))
    { name = "MyMemberShipProvider"; }

    if (string.IsNullOrEmpty(config["description"]))
    {
        config.Remove("description");
        config.Add("description", "My Membership Provider");
    }

    base.Initialize(name, config);

    _applicationName = GetConfigValue(config["applicationName"], System.Web.Hosting.HostingEnvironment.ApplicationVirtualPath);
    _maxInvalidPasswordAttempts = Convert.ToInt32(GetConfigValue(config["maxInvalidPasswordAttempts"], "5"));
    _passwordAttemptWindow = Convert.ToInt32(GetConfigValue(config["passwordAttemptWindow"], "10"));
    _minRequiredNonAlphaNumericCharacters = Convert.ToInt32(GetConfigValue(config["minRequiredAlphaNumericCharacters"], "1"));
    _minRequiredPasswordLength = Convert.ToInt32(GetConfigValue(config["minRequiredPasswordLength"], "7"));
    _passwordStregthRegularExpression = Convert.ToString(GetConfigValue(config["passwordStrengthRegularExpression"], String.Empty));
    _enablePasswordReset = Convert.ToBoolean(GetConfigValue(config["enablePasswordReset"], "true"));
    _enablePasswordRetrieval = Convert.ToBoolean(GetConfigValue(config["enablePasswordRetrieval"], "true"));
    _requiredQuestionAndAnswer = Convert.ToBoolean(GetConfigValue(config["requiresQuestionAndAnswer"], "false"));
    _requiredUniqueEmail = Convert.ToBoolean(GetConfigValue(config["requiresUniqueEmail"], "true"));

    string temp_format = config["passwordFormat"];
    if (temp_format == null)
    {
        temp_format = "Hashed";
    }

    switch (temp_format)
    {
        case "Hashed":
            _passwordFormat = MembershipPasswordFormat.Hashed;
            break;
        case "Encrypted":
            _passwordFormat = MembershipPasswordFormat.Encrypted;
            break;
        case "Clear":
            _passwordFormat = MembershipPasswordFormat.Clear;
            break;
        default:
            throw new ProviderException("Password format not supported.");
    }

    ConnectionStringSettings _connectionStringSettings = ConfigurationManager.ConnectionStrings[config["connectionStringName"]];

    if (_connectionStringSettings == null || _connectionStringSettings.ConnectionString.Length == 0)
    {
        throw new ProviderException("Connection String Cannot Be Blank.");
    }

    _connectionString = _connectionStringSettings.ConnectionString;

    //Get Encryption and Decryption Key Information From the Information.

    System.Configuration.Configuration cfg = WebConfigurationManager.OpenWebConfiguration(System.Web.Hosting.HostingEnvironment.ApplicationVirtualPath);
    _machinekey = cfg.GetSection("system.web/machineKey") as MachineKeySection;

    if (_machinekey.ValidationKey.Contains("AutoGenerate"))
    {
        if (PasswordFormat != MembershipPasswordFormat.Clear)
        {
            throw new ProviderException("Hashed or Encrypted passwords are not supported with auto-generated keys.");
        }
    }

} 
```

而且我注意到没有调用 Initialize 方法，我通读了这里的问题，人们说我不必手动调用它，如果我正确连接了我的 web.config，我不必这样做任何东西，但我确实尝试手动调用它，但是当我尝试投射 NameValueCollection 时它给了我一个 InvalidCastException。

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-10-20T20:14:27.423

For Initialize() to be called, you will need to instantiate your custom membership provider a certain way. Like so:

```
MyCustomMembershipProvider myProvider = (MyCustomMembershipProvider)Membership.Providers["NameOfMembershipProviderInConfig"]; 
```

Now when you use myProvider, Initialize() from your custom provider will be called.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T13:37:17.900

确实，只要您的提供程序配置正确（正如您的代码示例中所示），您的 Initialize 方法就应该自动调用。

您需要澄清您是如何“手动调用它”的，以及您尝试在何处转换 NameValueCollection。它发生在初始化内部吗？

也许您应该向我们展示您的 Initialize 方法（您没有忘记`override`关键字，是吗？;-)

**编辑：**好吧， Initialize 方法似乎也很好。

请记住：`Membership`是一个静态类，它以惰性方式加载和初始化配置的提供程序。因此，在调用 the或属性之前，您的提供者的构造以及对其`Initialize`方法的调用将不会发生。大多数其他静态方法（例如）都会这样做，但结论是在实际使用 Membership API 之前不会调用您的 Initialize 方法。`Membership.Provider``Membership.Providers``GetUser()`

您是否已明确地或通过使用登录控件或类似方式完成此操作？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-30T12:28:46.777

我正在努力弄清楚你做了什么......我认为你已经进行了如下操作：

*   通过从 MembershipProvider 继承创建了一个名为 MyMembershipProvider 的自定义类
*   配置的 web.config（对我来说看起来正确）
*   创建了一个 Web 控件，它触发一个事件来做某事（例如验证登录）然后......
*   在此事件中，您尝试执行类似的操作，并想知道为什么在单步执行代码时未调用 Initialize()：

    MyNameSpace.MyMemberShipProvider msp = new MyNameSpace.MyMemberShipProvider();
    bool IsAuthorised = msp.ValidateUser(txtLogin, txtPass);

解决方案： - 改用这个：

```
bool IsAuthorised = Membership.ValidateUser(txtLogin, txtPass); 
```

*   不要自己创建类的实例，而是让 .NET 使用 Membership 静态类为您完成此操作，这可确保在应用程序的整个生命周期中只存在一个 MyMemberShipProvider 实例。如果您实例化自己的类并调用 Initialize()，您的代码将不是线程安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-08T14:12:03.493

基本上流程是这样的，

Membership 类（静态类）调用并使用 SqlMembershipProvider 实现的 MembershipProvider（派生自 ProviderBase 的抽象类）（在您的情况下为 MyMemberShipProvider），因此您将数据访问代码的实现提供给 MyMemberShipProvider 中的数据源，但您没有t自己调用初始化。

Initialize() 是 ProviderBase 上的虚拟方法，当您创建 MyMemberShipProvider 时，您将覆盖它，如下所示

```
class MyMemberShipProvider : MembershipProvider
{
    private string _connectionStringName;

    public override void Initialize(string name, NameValueCollection config)
    {
       // see the config parameter passed in is of type NameValueCollection 
       // it gives you the chance to get the properties in your web.config
       // for example, one of the properties is connectionStringName

        if (config["connectionStringName"] == null)
        {
            config["connectionStringName"] = "ApplicationServices";
        }
        _connectionStringName = config["connectionStringName"];
        config.Remove("connectionStringName");          
    }
} 
```

没有看到你的代码，当你说有一个与 NameValueCollection 有关的异常时，它让我想起了上面的这个方法。

希望这会有所帮助，雷。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-21T17:29:51.187

前段时间我遇到了这个 Initialize() 方法的问题，我会在这里发布它可能对某人有帮助。

假设您在以下位置实现了自定义提供程序：

```
MyEnterprise.MyArea.MyProviders.CustomProvider 
```

您想要的是使用提供程序实现中的 GetUserNameByEmail 方法。有两种方法可以调用这个方法，通过：

```
MyEnterprise.MyArea.MyProviders.CustomProvider.GetUserNameByEmail(email) 
```

在您自己调用它时，它不会触发 Initialize 方法，另一方面，如果您的调用是：

```
Membership.GetUserNameByEmail(email) 
```

如有必要，将调用 Initialize 方法，我假设这是在基本构造函数或其他东西上（没有挖掘更多）。

希望这可以帮助。- E。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-08T14:23:28.210

自定义成员资格提供程序是自动初始化的，并不打算手动进行。

在我的实现中，有如下初始化方法：

```
public override void Initialize(string name, NameValueCollection config)
{
    if (config == null)
        throw new ArgumentNullException("config");

    // Initialize the abstract base class.
    base.Initialize(name, config);
} 
```

请记住，base.Initialize 方法位于 ProviderBase 类中，该类定义了以下异常：

例外：

*   System.ArgumentNullException：提供者的名称为空。
*   System.ArgumentException：提供者的名称长度为零。

*   System.InvalidOperationException：在提供程序已初始化后，尝试在提供程序上调用 System.Configuration.Provider.ProviderBase.Initialize(System.String,System.Collections.Specialized.NameValueCollection)。

你得到的不是最后一个例外吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T14:54:59.783

这会强制调用初始化

```
private readonly Provider _provider;

public AccountMembershipService(Provider provider)
{
   _provider = provider ?? (Provider) Membership.Provider;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-01T12:08:50.397

这是初始化提供程序的代码：

```
 System.Collections.Specialized.NameValueCollection adProviderConfig;
                adProviderConfig = membershipSection.Providers[adProviderName].Parameters;
                var _ADProvider = new ActiveDirectoryMembershipProvider();
                _ADProvider.Initialize(adProviderName, adProviderConfig); 
```

# asp.net - 您可以在两个 .net 2.0+ 应用程序之间共享会话变量吗？

> ID：623551
> 
> 赞同：3
> 
> 时间：2009-03-08T13:12:38.443
> 
> 标签：asp.net, session

有人告诉我这行得通，但是...

我想我只是没有得到这个，似乎有一个隐藏的步骤我可能会丢失，有人可以纠正这个或指出我的错误吗？谢谢。

我有一个空白的解决方案：
- 里面是两个 .net 2.0 Web 应用程序
1) webapp1
2) webapp2

我希望他们共享相同的会话数据。

我的页面设置：

应用1：

```
Session("value") = "this is the value" 
```

应用 2：

```
If Not (Session("value") Is Nothing) Then
    value = Session("value").ToString()
End If 
```

我的思考过程：

1) 转到服务，打开 asp.net 状态服务
2) 在两个项目中打开 Web 配置：设置

```
< machineKey 
validationKey="BFE2909A81903BB303D738555FEBC0C63EB39636F6FEFBF8005936CBF5FEB88CE327BDBD56AD70749F502FF9D5DECF575C13FA2D17CA8870ED21AD935635D4CC" 
decryptionKey="2A86BF77049EBA3A2FA786325592D640D5ACD17AF8FFAC04" validation="SHA1" />
< sessionState mode="StateServer" stateConnectionString="tcpip=localhost:42424" 
cookieless="false" timeout="20"/> 
```

在这两个站点中。
3）编译和测试站点
4）因为它不起作用而感到失望。我从未从第二个 web 应用程序中看到会话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-08T13:25:26.227

如果没有一些自定义代码，您将无法在不同的 ASP.NET 应用程序之间共享会话。您在 web.config 中所做的是使用进程外会话，这意味着数据将不再驻留在内存中，而是驻留在专用机器的内存中。这对于服务器场很有用，它使用 ApplicationName 来了解会话属于哪个应用程序。因此，如果您希望它们共享会话，基本上您的应用程序需要具有相同的名称。虽然有一些肮脏的[解决方法](http://www.codeproject.com/KB/session/sharedsession.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-10T04:54:26.220

为什么要在应用程序之间共享 Sessions？ASP.NET Session 的设计初衷不是为了做到这一点。

您提出的使用相同 ASP.NET 状态服务器的解决方案不起作用，因为您的用户只会获得 2 个不同的会话令牌，即使他们从同一台机器和同一浏览器同时使用您的 2 个应用程序。您需要考虑 Session 是如何工作的，以了解为什么会这样。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms178581.aspx)：

> ASP.NET 会话状态使您能够在用户浏览 Web 应用程序中的 ASP.NET 页面时为用户存储和检索值。HTTP 是一种无状态协议。这意味着 Web 服务器将页面的每个 HTTP 请求视为一个独立的请求。服务器不保留先前请求期间使用的变量值的知识。ASP.NET 会话状态将在有限时间窗口内来自同一浏览器的请求标识为会话，并提供一种在该会话期间保持变量值的方法。

ASP.NET 会话是用户当前与**一个 ASP.NET 应用程序**交互的隐喻。它存在于 ASP.NET 中，为我们提供了一个地方来存储用户在使用您的应用程序时发出的各种页面请求之间的临时状态数据。

如果您的应用程序非常密切相关，例如用户同时或几乎同时使用两者，您可以考虑将它们合并到单个 ASP.NET 应用程序中。您可以将它们部署到不同的虚拟目录中以保持某种程度的逻辑分离，但在 IIS 中只使用一个应用程序。

如果您的应用程序没有那么密切相关，也许它们应该共享相同的数据库作为交换数据的一种方式，或者使用基于 Web 服务的 API 来交换信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T13:38:51.127

如果它们在同一个应用程序池中并且会话模式设置为 inproc，它们将共享会话数据。stateserver 和 sqlstate 的工作方式是它们使用您的 Web 地址的根作为逻辑边界。

例如，如果它们都托管在相同的地址和端口（或 iis 中的“站点”）但在不同的 sibfolders 中，那么我认为它们应该共享会话。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-08T13:43:31.317

此外，两个应用程序必须在同一个域上运行，以便用户浏览器使用一个 cookie 来存储会话 ID。

# html - Html 元关键字应该包含逗号？

> ID：623554
> 
> 赞同：8
> 
> 时间：2009-03-08T13:15:48.997
> 
> 标签：html, meta-tags

在元关键字中使用逗号重要吗？

如果我没有逗号怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-08T13:19:41.997

根据[W3 标准](http://www.w3.org/TR/html4/appendix/notes.html#recs)：

> 提供关键字和描述
> 
> 一些索引引擎会寻找定义以逗号分隔的关键字/短语列表或提供简短描述的 META 元素。搜索引擎可以将这些关键字呈现为搜索的结果。**本规范未定义**搜索引擎搜索的名称属性的值。

换句话说，HTML 标准没有定义`meta`with`name="keywords"`应该是什么样子。这完全取决于您的目标。`meta`一些搜索引擎在关键字标签中使用逗号来分隔关键字。有些人完全忽略了这些`meta`标签。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-08T15:57:32.120

> 如果我没有逗号怎么办？

那么你的关键词就是整个词组。因此，使用关键字“柠檬蛋糕”，当您仅搜索“柠檬”或“蛋糕”时，它不会匹配。

实际上，元关键字充其量仅比将单词包含在您的页面中更有效，最坏的情况是完全被忽略。所以使用它没有什么意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T13:43:56.027

实际上，大多数搜索引擎都忽略了关键字元元素。所以实际上你可以删除它并保存一些字节......：P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T14:52:28.577

我同意你可以忽略标签，例如谷歌不使用它们。然而，雅虎似乎确实在使用它（至少在 2007 年底），所以如果您想了解更多信息，我发现[这篇文章](http://searchengineland.com/meta-keywords-tag-101-how-to-legally-hide-words-on-your-pages-for-search-engines-12099)很有趣。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-03-08T13:17:33.343

不，只是空间......至少这对我有用:)

# javascript - 为什么这些 javascript 正则表达式会引发语法错误？

> ID：623567
> 
> 赞同：4
> 
> 时间：2009-03-08T13:25:00.050
> 
> 标签：javascript, regex

我试图在处理之前将文本字符串验证为日期，但是我尝试过的两个正则表达式都抛出语法错误，我不明白为什么。据我所知，两者都没有错。这些是字符串：

```
 var datePattern1 = new RegExp( (0[1-9]|1[012])[-](0[1-9]|[12][0-9]|3[01])[-](19|20)\d\d ); 
```

和

```
var datePattern2 = new RegExp( [0-3][0-9]-(0|1)[0-9]-(19|20)[0-9]{2} ); 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-08T13:28:19.467

您缺少表达式周围的引号：

```
var datePattern1 = new RegExp( "(0[1-9]|1[012])[-](0[1-9]|[12][0-9]|3[01])[-](19|20)\d\d" );
var datePattern2 = new RegExp( "[0-3][0-9]-(0|1)[0-9]-(19|20)[0-9]{2}" ); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-08T13:30:27.010

或者将字符串传递给`RegExp`darin 提到的构造函数，或者使用 RegExp 语法“<code>/ ... /”：

```
var datePattern1 = /(0[1-9]|1[012])[-](0[1-9]|[12][0-9]|3[01])[-](19|20)\d\d/;
var datePattern2 = /[0-3][0-9]-(0|1)[0-9]-(19|20)[0-9]{2}/; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-08T13:31:06.150

Regexp() 构造函数需要一个字符串，因此您需要引用您的正则表达式：

```
var datePattern2 = new RegExp('[0-3][0-9]-(0|1)[0-9]-(19|20)[0-9]{2}'); 
```

使用双引号时，请注意正则表达式中的反斜杠转义。或者，您可以使用 Perl 语法：

```
var datePattern2 = /[0-3][0-9]-(0|1)[0-9]-(19|20)[0-9]{2}/; 
```

# sql - SELECT * FROM table WHERE x IN (...几百个整数...)

> ID：623577
> 
> 赞同：2
> 
> 时间：2009-03-08T13:28:06.283
> 
> 标签：sql, mysql, indexing, in-clause

表有大约 800 万行。X 有一个非唯一索引。

显示索引，它表明在表中，键名 X 上有一个非唯一索引，“seq_in_index”为 1，排序规则 A，基数 7850780，sub_part NULL，packed NULL，index_type BTREE。

不过，此查询可能需要 5 秒才能运行。整数列表来自另一个系统，我不允许将它们存储在表格中，因为它们代表社交网络上的友谊。

有比大量 IN 语句更快的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-08T13:31:56.150

您可以将您的 ID 列表转换为一个临时表（如果 MySql 支持它们，则为 table-var）并加入它。

该表只会与查询一样长，因此您实际上不会在表中*存储*任何内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-08T13:35:17.063

您可以尝试将它们存储在[临时表中](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)。该表不会永久存储在数据库中，我认为生成的连接（假设您也索引临时表）会更快，因为它能够并行处理索引而不必进行索引查找对于每个 int 子句。当然，如果 MySQL 知道它将使用索引，它可能会优化 IN 子句并执行相同的操作，因此它实际上可能不会为您带来任何好处。不过我会试一试，看看它是否更快。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-08T13:41:16.750

正如其他人所建议的，临时表是最合适的解决方案。

但请注意，根据基数和临时表/in() 条件中的行数，优化器可能仍会使用顺序扫描，因为顺序读取比大量随机搜索要快得多。索引。

在这一点上，考虑重新设计关系可能是合适的。

# architecture - 浏览目录并取消，重试

> ID：623581
> 
> 赞同：0
> 
> 时间：2009-03-08T13:29:30.210
> 
> 标签：architecture

对于从用户那里获取应用程序目录的简单任务，我已经陷入了困境。我有一个 AppFolderDialog 表单，用作对话框，上面有 OK 和 Cancel 按钮、一个只读文本框和一个 Browse 按钮​​。浏览按钮打开一个 FolderBrowserDialog。

现在，当用户单击“确定”时，我需要一个循环来检查所选目录是否包含某个文件，并给用户一个“取消”或“重试”消息框。Cancel 会将取消转发给对话框以关闭它并返回 DialogResult.Cancel。重试只会给用户另一个浏览目录的机会。

现在我还需要对话框本身上的取消按钮，这样用户就可以取消而不必选择无效目录。我知道我错了，但我同时忙于很多事情，我的注意力被打断了。对于如何在应用程序中改进此任务，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T13:55:17.623

我建议您不要将这两个对话框捆绑在一起。让第一个对话框获取正确的目录。一旦用户单击确定，第一个对话框被关闭，您检查应用程序中的结果，如果预期的文件不存在，则弹出一个错误对话框，通知他们选择的目录不正确。你可以给他们重试的选项，这只会再次弹出第一个对话框。取消任一对话框只会导致未选择目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T14:14:00.697

请注意，当您实际尝试对目录执行某些操作时，您仍然必须拥有检查目录是否存在的代码。

既然您无论如何都必须拥有该代码，因此我不会费心检查目录选择对话框。让用户选择一个目录，如果他们以某种方式选择了一个不存在的目录，或者其中没有您的应用程序数据或其他任何内容，请推迟错误消息。毕竟，用户可以在您的应用程序中选择一个非常好的目录，然后将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T14:26:10.980

这是你要找的吗？

```
 private string GetPathFromUser()
    {
        FolderBrowserDialog dialog = new FolderBrowserDialog();
        while (dialog.ShowDialog() == DialogResult.OK)
        {
            // Do your validation here
            bool pathIsGood = false;

            if (pathIsGood)
            {
                return dialog.SelectedPath;
            }
            else
            {
                DialogResult cancelRetry = MessageBox.Show("Directory is not valid becuase bla..", "", MessageBoxButtons.RetryCancel);
                if (cancelRetry == DialogResult.Cancel) break;
            }
        }
        return null;
    } 
```

# cobol - 在 z/OS 上从 DLL cobol 程序动态调用 NODLL cobol 程序

> ID：623604
> 
> 赞同：1
> 
> 时间：2009-03-08T13:49:53.360
> 
> 标签：cobol, mainframe, dll, loadmodule

在使用 Enterprise Cobol for z/OS 的大型机上，是否可以从使用 NODLL 编译的 cobol 程序动态调用 Cobol 动态链接库 (DLL) 程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T02:00:41.570

有很多方法可以做你想做的事。

如果通过动态调用，您的意思是通过数据定义变量进行调用，我认为您不能使用链接器/绑定器执行此操作，因为绑定器需要在绑定时知道目标函数。

您必须专门`dllload`加载 DLL 模块、`dllqueryfn`函数并以这种方式调用它。

要使用链接器/绑定器，我相信需要执行以下步骤（`P1`是`NODLL`COBOL 程序进行调用，`P2`是`DLL`被调用的程序）：

*   `P2`必须编译并与`DLL`选项绑定。
*   `P1`必须`NODYNAM`与 DLL 一起编译和绑定。
*   `P1`必须包含`CALL 'dll-func'`（即，仅文字调用）。
*   绑定时`P1`，`SYSLIB`必须先指向`P2`位置。

这将导致活页夹将两者合并`P1`到`P2`一个加载模块中，该加载模块并不完全是 DLL 调用，但我认为除了解决方案之外没有任何办法`dllload/dllqueryfn`。

我使用了旧式的 dll 函数，但是，如果你的水平足够高，还有更新的`dlopen/dlsym`C 辅助函数。

[该页面](http://publib.boulder.ibm.com/infocenter/ratdevz/v7r5/index.jsp?topic=/com.ibm.ent.cbl.zos.doc/topics/PGandLR/tasks/tpdll12.htm)支持我的论点，即`NODLL/DLL`程序只有在绑定到单个加载模块时才能相互调用。但是，您仍然必须使用静态调用。

[该页面](http://publib.boulder.ibm.com/infocenter/ratdevz/v7r5/index.jsp?topic=/com.ibm.ent.cbl.zos.doc/topics/PGandLR/tasks/tpdll12b.htm)提供了另一个选项，您可以将 DLL 程序放入与调用程序相同的加载模块中，并使用静态调用来访问它。似乎 DLL 程序可以调用*不在*该加载模块中的其他 DLL 程序。所以有可能在DLL程序中提供一个静态网关函数，可以动态调用加载模块中没有的DLL函数。这超出了我在大铁上做过的任何事情，所以你必须进行实验。

这两个页面都来自使用 IBM 产品的*每个人都*应该知道的 publib-boulder 站点（以及 redbooks/redpapers 站点）。

我，我更喜欢这个`dllload/dllqueryfn`解决方案，因为这是我从 AIX 和其他 UNIX 中习惯的解决方案，而且它似乎提供了最大的灵活性。

# c++ - C++ vim IDE。你需要的东西

> ID：623605
> 
> 赞同：18
> 
> 时间：2009-03-08T13:50:18.413
> 
> 标签：c++, vim, ide

我打算创建 C++ IDE **Vim**可扩展**插件**。制作一个能满足我自己需要的东西不是问题。

该插件将与工作区、项目及其依赖项一起使用。
这适用于使用**gcc**作为 c++ 编译器的类 unix 系统。

所以我的问题是您需要从 IDE 中获得的最重要的东西是什么？请考虑到这是 Vim，几乎所有，几乎，都是可能的。

*几个问题：*
您多久管理一次不同的工作区，其中包含项目以及它们之间的关系？在这个过程中最烦人的事情是什么。
是否有必要从 Makefile 重新创建“项目”？
谢谢。

*创建此插件的原因：*

使用一堆插件和自写的插件，我们可以模拟大多数事情。当我们在一个大的“不定式”项目上工作时，这是可以的。
当我们已经有一个 makefile 或 jam 文件时很好。当我们必须创建自己的东西时很糟糕，主要是通过复制和粘贴现有的。
所有与 ctags 和 cscope 相关的东西都必须了解真实项目文件的列表。我们创造了这样的。这个 <project#get_list_of_files()> 和许多类似的可能是一个很好的项目 api 函数，可以与现有和未来的插件合作。与现有的 makefile 合作可以帮助找出真正的项目文件列表和可执行文件名称。使用插件内部的插件系统，可以有不同的项目模板。

以上是我开始这份工作的一些原因。我想听听你的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-09T15:30:47.947

有多个问题。它们中的大多数已经通过独立和通用的插件解决了。

## 关于什么是*项目*的定义。

给定同一目录中的一组文件，每个文件都可以是项目的唯一文件——我总是有一个 tests/ 目录，我在其中托管宠物项目，或者我测试编译器的行为。相反，来自一组目录的文件可以是同一个非常大的项目的一部分。

最后，真正定义项目的是（叶）“makefile”——为什么要限制自己使用makefile，scons、autotools、ant、(b)jam、aap呢？顺便说一句，Sun-Makefiles 还是 GNU-Makefiles ？

此外，我认为让 vim 知道当前项目中的确切文件没有任何意义。即便如此，众所周知的[project.vim 插件](http://www.vim.org/scripts/script.php?script_id=69)已经完成了这项工作。我个人使用一个[local_vimrc 插件](https://github.com/LucHermitte/local_vimrc)（我正在维护一个，我在 SF 上看到过另外两个）。使用这个插件，我只需要将 _vimrc_local.vim 文件放到一个目录中，其中定义的内容（:mappings, :functions, variables, :commands, :settings, ...）将适用于目录——我在一个有十几个子组件的大项目上工作，每个组件都在自己的目录中，有自己的makefile（甚至没有命名为Makefile，也没有目录的名称）

## 关于C++代码理解

每次我们想要做一些复杂的事情（重构，如 rename-function、rename-variable、generate-switch-from-current-variable-which-is-an-enum，...），我们都需要 vim 了解C++。大多数现有插件都依赖于 ctags。不幸的是，ctags 对 C++ 的理解非常有限——我已经写了[一些高级的东西](https://github.com/LucHermitte/lh-cpp)，但是我经常被 ctags 提供的糟糕信息所阻止。cscope 也好不到哪里去。最终，我认为我们将不得不集成一个高级工具，如 elsa/pork/ionk/deshydrata/....

NB：这就是我现在最集中精力的地方。

## 关于 Doxygen

我不知道跳转到与当前令牌关联的 doxygen 定义有多么困难。第一个难点是要理解光标在什么地方（我猜omnicppcomplete已经在这个方向做了很多工作）。第二个困难是理解 doxygen 如何从代码中为每个符号生成页面名称。

从 doxygen 页面在正确的代码行打开 vim 应该很简单，只需使用一个greasemonkey 插件。

## 关于调试器

pyclewn[项目](http://pyclewn.wiki.sourceforge.net/)适用于那些在 linux 下运行 vim 并使用 gdb 作为调试器的项目。不幸的是，它不支持其他调试器，如 dbx。

## 对其他要求的回应：

> *   当我运行或调试我编译的程序时，我希望弹出一个对话框，询问我的命令行参数。它应该记住我用于项目的最后 20 个左右的参数。我不想为此编辑项目属性。

我的[BuildToolsWrapper 插件](https://github.com/LucHermitte/vim-build-tools-wrapper)有一个`g:BTW_run_parameters`选项（很容易被 project/local_vimrc 解决方案覆盖）。添加一个映射来询问要使用的参数非常简单。（见 :h inputdialog()）

> *   使用源代码控制系统

已经有几个插件解决了这个问题。这与 C++ 无关，并且不能由 C++ 套件解决。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-08T14:34:37.730

*   调试器
*   源代码导航工具（现在我正在使用[http://www.vim.org/scripts/script.php?script_id=1638](http://www.vim.org/scripts/script.php?script_id=1638)插件和 ctags）
*   从 ide 编译 lib/project/one 源文件
*   按项目中的文件导航
*   使用源代码控制系统
*   轻松访问文件更改历史记录
*   重命名文件/变量/方法函数
*   轻松访问 c++ 帮助
*   轻松更改项目设置（Makefile、jam 等）
*   路径/变量/方法/参数的快速自动完成
*   新范围的智能识别（如果开发人员能够设置识别规则，这将是一件好事）
*   通过代码约定标识突出显示不正确（制表符代替空格，“;”之后的空格，“（”或“）”附近的空格等）
*   按惯例重新格式化选定的块

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T14:08:39.463

我希望在 IDE 中使用的那些我不提供的东西：

*   当我运行或调试我编译的程序时，我希望弹出一个对话框，询问我的命令行参数。它应该记住我用于项目的最后 20 个左右的参数。我*不想*为此编辑项目属性。

*   可按项目配置的“工具”菜单

*   能够为*每个*可能的命令重新调整键盘映射。

*   能够以文本形式生成项目配置列表

*   用于调试器等的智能浮动（非停靠）窗口仅在我需要时弹出，停留在顶部，然后在不再需要时消失。

*   内置代码度量分析，所以我得到了项目中最复杂的函数列表，可以点击它们跳转到代码

*   内置对 Doxygen 或类似的支持，因此我可以单击 Doxygen 文档并直接进入代码。Sjould 还可以从代码反向导航到 Doxygen。

毫无疑问，现在有人会说 Eclipse 可以做这个或那个，但它对我来说太慢和臃肿。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T14:16:57.243

添加到[尼尔的答案](https://stackoverflow.com/questions/623605/c-vim-ide-things-youd-need-from-i/623630#623630)：

*   与 emacs 中的 gdb 集成。我知道[clewn](http://clewn.sourceforge.net/)，但我不喜欢我必须重新启动 vim 才能重新启动调试器。使用 clewn，vim 被集成到调试器中，但反之则不然。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-09T13:21:42.233

不确定您是否在 Windows 上开发，但如果您是，我建议您查看[Viemu](http://www.viemu.com/)。它是 Visual Studio 的一个非常好的 VIM 扩展。我真的很喜欢 Visual Studio 作为 IDE（尽管我仍然认为 VC6 很难被击败），所以 VS 的 Vim 扩展非常适合我。我希望在 Vim IDE 中工作得更好的功能是：

*   宏录制容易出错，尤其是缩进。我发现我可以在编辑代码时轻松且经常在 Vim 中记录宏（例如，从标题中获取枚举定义并生成相应的 switch 语句），但发现 Viemu 在该部门中有点不稳定。
*   VIM 代码完成在 Viemu 挂钩到 VS 代码完成内容的当前缓冲区中拾取单词。这意味着如果我刚刚创建了一个方法名称并且我想 ctrl ] 自动完成，Vim 会选择它，但 Viemu 不会。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-02-02T10:24:20.217

对我来说，这只是必需品

*   与 ctags 的良好集成，因此您可以跳转到定义
*   智能补全，也给你函数原型
*   在代码和标题之间切换的简单方法
*   带断点的交互式调试，但也许
*   也许折叠
*   重命名或提取方法等重构工具的额外加分

我想说远离定义项目 - 只需将整个文件分支视为“项目”的一部分，并让用户有一个设置文件来覆盖该默认值

我在 IDE 和 vim 用户之间看到的 99% 的速度差异是代码查找和导航。您需要能够在源代码树中查找短语（或使用 ctags 智能地查找正确的符号），显示所有命中，然后像两三个键击一样切换到该文件。

所有其他诸如存储库导航或交互式调试之类的废话都很好，但是还有其他方法可以解决这些问题。我什至会说放弃交互式调试。只需关注使 IDE 成为优秀编辑器的原因 - 拥有项目的“大图”视图，而不是单个文件。

事实上，是否有任何 vim 插件已经实现了这一点？

# firefox - 我的 Firefox 扩展中可以有一个没有阴影的 XUL 面板吗？

> ID：623609
> 
> 赞同：7
> 
> 时间：2009-03-08T13:53:18.517
> 
> 标签：firefox, firefox-addon, xul

Firefox 扩展覆盖中的 XUL 面板总是免费提供阴影。我怎样才能消除这个阴影？

*我不想要的阴影效果的示例代码：*

```
<popupset>
    <panel id="popuppanel" width="500" noautohide="true">
        <vbox>
            <label value="test"/>
            <label value=""/>
            <label value=""/>
            <label value=""/>
        </vbox>
    </panel>
</popupset> 
```

*和截图：*

[我不想要的阴影效果示例图像。http://img124.imageshack.us/img124/7766/shadowj.png](http://img124.imageshack.us/img124/7766/shadowj.png "我不想要的阴影效果示例。")

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-11-13T09:36:16.410

使用以下 CSS 语句：

-moz 窗口阴影：无；

另请参阅 Firefox 内部 CSS 样式表（mac 版）的书签面板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T21:38:04.363

我认为这是操作系统的一部分。就像在菜单上也有阴影一样。记事本。我不得不说不熟悉 Vista，但可以肯定地说它是特定于操作系统的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-19T19:58:11.027

您可以通过 css 将背景颜色设置为透明：

背景颜色：透明；

# asp.net - 动态创建的 DropDownList 在回发时丢失 ListItems

> ID：623611
> 
> 赞同：7
> 
> 时间：2009-03-08T13:56:29.553
> 
> 标签：asp.net, vb.net, drop-down-menu, viewstate

我有一个页面，其中包含一些动态创建的控件（TextBox 和 DropDownList）。当回发发生时，TextBox 会保留它们的值，但 DropDownList 会丢失它们的 ListItem。这很令人困惑，因为页面级别的 DropDownList 也保留了它的 ListItems。任何人都可以看到下面的代码有什么问题吗？

任何解决此问题的帮助将不胜感激。

```
<%@ Page Language="VB"%>

<script runat="server">
  Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs)
    If Not Page.IsPostBack Then
      ddlFixed.Items.Add(New ListItem("12", "13"))
      ddlFixed.Items.Add(New ListItem("14", "15"))
    End If
    Dim i As Integer
    For i = 0 To 3
      Dim ddl As New DropDownList
      ddl.ID = "ddlPage" & i
      ddl.EnableViewState = True
      If Not Page.IsPostBack Then
        ddl.Items.Add(New ListItem("12", "13"))
        ddl.Items.Add(New ListItem("14", "15"))
      End If
      pnlDynamic.Controls.Add(ddl)
      Dim txtBx As New TextBox
      txtBx.ID = "txtPage" & i
      If Not Page.IsPostBack Then
        txtBx.Text = "Preset"
      End If
      pnlDynamic.Controls.Add(txtBx)
    Next
  End Sub
</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
  <title></title>
</head>
<body>
  <form id="form1" runat="server" enableviewstate="true">
  <div>
    <br />
    <br />
    <a href="Default.aspx">Get-Request</a>
    <br />
    <br />
    <asp:Panel runat="server" ID="pnlDynamic" EnableViewState="true" />    
    <br />
    <br />
    <asp:DropDownList runat="server" ID="ddlFixed" />
    <asp:Button runat="server" ID="btn" Text="Postback"/>
  </div>
  </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-08T16:32:03.393

我找到了允许我在回发中保持视图状态的解决方案。就是调用ItemCollection的TrackViewState。

```
CType(ddl.Items, IStateManager).TrackViewState() 
```

感谢大家的帮助。

这是工作解决方案：

```
<%@ Page Language="VB"%>

<script runat="server">
  Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs)
    If Not Page.IsPostBack Then
      ddlFixed.Items.Add(New ListItem("12", "13"))
      ddlFixed.Items.Add(New ListItem("14", "15"))
    End If
    Dim i As Integer
    For i = 0 To 3
      Dim ddl As New DropDownList
      ddl.ID = "ddlPage" & i
      CType(ddl.Items, IStateManager).TrackViewState()
      If Not Page.IsPostBack Then
        ddl.Items.Add(New ListItem("12", "13"))
        ddl.Items.Add(New ListItem("14", "15"))
      End If
      pnlDynamic.Controls.Add(ddl)
      Dim txtBx As New TextBox
      txtBx.ID = "txtPage" & i
      If Not Page.IsPostBack Then
        txtBx.Text = "Preset"
      End If
      pnlDynamic.Controls.Add(txtBx)
    Next
  End Sub
</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
  <title></title>
</head>
<body>
  <form id="form1" runat="server" >
  <div>
    <br />
    <br />
    <a href="Default.aspx">Get-Request</a>
    <br />
    <br />
    <asp:Panel runat="server" ID="pnlDynamic" />    
    <br />
    <br />
    <asp:DropDownList runat="server" ID="ddlFixed" />
    <asp:Button runat="server" ID="btn" Text="Postback"/>
  </div>
  </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T14:15:58.227

可能您需要为那些 DropDownLists 显式激活 ViewState ...

编辑：这就是我的最后一条评论的意思......

```
 <script runat="server">
      Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs)
        If Not Page.IsPostBack Then
          ddlFixed.Items.Add(New ListItem("12", "13"))
          ddlFixed.Items.Add(New ListItem("14", "15"))

          Dim i As Integer
          For i = 0 To 3
            Dim ddl As New DropDownList
            ddl.ID = "ddlPage" & i
            ddl.EnableViewState = True
            ddl.Items.Add(New ListItem("12", "13"))
            ddl.Items.Add(New ListItem("14", "15"))

            pnlDynamic.Controls.Add(ddl)
            Dim txtBx As New TextBox
            txtBx.ID = "txtPage" & i
            txtBx.Text = "Preset"
            pnlDynamic.Controls.Add(txtBx)
          Next
        End If
      End Sub
   </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T14:21:02.647

当启用视图状态时，DDL 将保持其项目和选择。无论视图状态如何，文本框都将保持其内容，因为生成的 html 在回发时被写回服务器。

我觉得你的代码和标记中有所有这些视图状态语句很有趣。

发生了几件事之一：

1.  控件的 ViewState 被禁用
2.  控件层次结构上方的 ViewState 被禁用（页面、表单、面板）
3.  您在页面周期中动态添加控件为时已晚，无法从视图状态加载选择。加载 INIT 应该没问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-08T14:05:43.073

DropDownList 中的列表项不存储在视图状态中。您必须在每次回发时添加它们。

存储在视图状态中的是选定的索引 - 即。控件的“价值”。

**编辑：**嗯，看来我今天学到了一些东西。我纠正了:-)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-08T14:26:26.283

我一直在使用`Page_Load`，从来没有遇到过这样的麻烦。也许你可以看看。

我通常在页面第一次加载时将数据绑定到控件，然后让 Viewstate 处理回发等。请注意，他们建议您在`Page_Load`...期间绑定数据

查看[http://support.microsoft.com/kb/305141](http://support.microsoft.com/kb/305141)

> 页面事件 loadTOCNode(2, 'moreinformation'); 在 ASP.NET 页的生命周期中，经常使用从**Page对象公开的一些标准事件。**ASP.NET 页面框架在运行时为这些方法自动连接（或连接）适当的委托实例。这使您不必编写必要的“粘合代码”。以下列表显示了在运行时按触发顺序连接的委托实例：
> 
> *   **Page_Init**：在此事件期间，您可以初始化值或连接您可能拥有的任何事件处理程序。
> *   **Page_Load**：在此事件期间，您可以执行一系列操作来首次创建 ASP.NET 页面或响应帖子产生的客户端事件。在此事件之前已恢复页面和控件视图状态。使用**IsPostBack**页面属性检查这是否是第一次处理页面。如果是第一次，请执行数据绑定。此外，读取和更新控件属性。
> *   **Page_DataBind**：在页面级别调用**DataBind方法时引发****DataBind**事件。如果在单个控件上调用**DataBind**，它只会触发其下方控件的**DataBind事件。**
> *   ********Page_PreRender**：**PreRender**事件在保存视图状态和呈现控件之前触发。您可以使用此事件对控件执行任何最后一分钟的操作。******
> *   ******Page_Unload**：页面完成渲染后，**Page_Unload**事件触发。此事件是执行最终清理工作的好地方。这包括清理打开的数据库连接、丢弃对象或关闭那些打开的文件等项目。****
> 
> ****以下列表概述了不确定的事件：
> 
> *   **Page_Error**：如果在页面处理期间发生未处理的异常，则会触发**Error**事件。**Error**事件使您有机会优雅地处理错误。
> *   **Page_AbortTransaction**：如果您想指示事务是成功还是失败，**事务事件很有用。**该事件通常用于购物车场景，该事件可以指示订单成功或失败。当事务被中止时触发此事件。
> *   **Page_CommitTransaction**：当事务成功提交时触发此事件。****

 ****# windows - 我应该为我的 Windows 7 分区留出多少空间？

> ID：623612
> 
> 赞同：5
> 
> 时间：2009-03-08T13:56:57.713
> 
> 标签：windows, macos, hardware, development-environment

我正在我的 Macbook Pro 上设置一个完整的 .NET 开发环境。

我正在使用 Visual Studio 08 团队套件、SQL server 2008、MS Office 和其他工具（如 FinalBuilder、RegexBuddy、Beyond Compare）。

我的 Windows 7（目前是测试版）分区应该有多大？100GB 够用吗？

注意：我不确定这是否与编程足够相关，所以我会让社区决定这个问题是否相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T14:05:06.210

对于所有这些应用程序来说，100 GB 应该绰绰有余。我已经在虚拟机中安装了 win7，虚拟硬盘最终大小为 7GB（当然这只是操作系统）。例如，在 Vista 上尝试相同的操作会使用大约 25GB。似乎他们让它变得更轻了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T14:03:40.333

100 GB 就足够了。您将拥有操作系统、应用程序，但没有音乐、图片和视频。100GB 可能是多余的，特别是如果您可以根据需要调整它的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T14:07:06.657

你描述了我的笔记本电脑。100 GB 大约会留下。40GB 用于用户目录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-07T06:38:20.277

我在带有 2 100 Gb 硬盘的笔记本电脑上安装了 Windows 7。目前我使用的是 18 Gb，并且安装了大多数主要的东西，但没有安装 Visual Studio 或 SQL，但那些可能不会使用超过 10 Gb（我估计）。我确实安装了 Virtual XP Mode，它可能也很大。

Windows 文件夹约为 9.3 Gb 用户文件夹为 3.2 Gb（但我的桌面上有一些大文件） 程序文件为 3.0 Gb 操作系统驱动器上的其余文件主要是您没有的驱动程序文件留在驱动器本身。

所以 100 GB 甚至可能有点过头了，但确实给了你一些空间！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-08T16:12:22.457

Windows7 将比 Windows Vista 小一点。因此，如果您为 Windows Vista 创建足够大的分区，它将非常适合 Windows7。

有关Windows7 中磁盘空间的更多信息，请参阅[Engineering7 博客。](http://blogs.msdn.com/e7/archive/2008/11/19/disk-space.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-09T03:38:37.673

我会尽可能多地支持 Windows 7，因为它可能会成为您的主要操作系统。我发现我很少使用我的 OSX 分区，除了破解 WEP。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T08:11:09.707

`100 GB`勉强够用。您可以安装 Windows 7 和上述程序以及许多其他东西，但是一旦您在那里和那里有很多垃圾，而且您碰巧下载了电影，这样就会变得很麻烦。

除非您依赖其他设备来处理这些工具以外的事情，否则我建议您分配更大的空间，至少`150 GB`

# java - “访问器方法”的定义是什么？

> ID：623618
> 
> 赞同：15
> 
> 时间：2009-03-08T14:02:56.183
> 
> 标签：java, definition, accessor

我一直在争论“访问器”这个词的用法（上下文是 Java 编程）。我倾向于将访问器视为隐含的“属性访问器”——也就是说，该术语暗示它或多或少地提供对对象内部状态的直接访问。对方坚持认为，任何以任何方式接触到对象状态的方法都是访问者。

我知道你们不能为我赢得争论，但我很想知道你会如何定义这个词。:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-08T14:09:34.530

对于访问器，我倾向于想到 getter 和 setter。

通过坚持所有接触对象内部状态的方法都是访问器，似乎任何实际使用对象状态的实例方法都是访问器，这似乎并不正确。什么样的实例方法不会使用对象的状态？换句话说，*不以某种方式使用对象状态的实例方法一开始就不应该是实例方法——它应该是类方法*。

例如，该[`BigDecimal.add`](http://java.sun.com/javase/6/docs/api/java/math/BigDecimal.html#add(java.math.BigDecimal))方法是否应该被视为访问器？它是一种方法，它将读取`add`调用该方法的实例的值，然后在添加另一个值后返回结果`BigInteger`。`add`实例方法既不是 getter 也不是 setter似乎相当直接。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-08T14:07:14.427

访问器方法完全按照它在 tin 上所说的：从类型访问某些状态而没有副作用（除了延迟实例化，也许，这不是调用者通常知道的）。

```
private int _age;

public int getAge()
{
    return _age;
} 
```

修改状态的方法更有用（在我看来）被认为是 mutators。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T22:05:00.627

**访问器方法：** getRed、getGreen 和 getBlue

这些方法通常访问一个值。

**突变方法：** setRed、setGreen、setBlue

一个 mutator 将改变一个值

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-08T14:11:07.647

除了谷歌搜索和维基百科之外，[Java 语言规范](http://java.sun.com/docs/books/jls/)还将此作为访问器方法的示例：

```
private static int N;
public static int getN() { return N; } 
```

所以，是的，我会说它只是获取一个字段的值。编译器可能会内联它，将其转换为简单的读取，因此除此之外的任何东西都可能不是访问器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-08T14:06:26.427

我总是按照第一个定义。因此，通常这仅适用于 getter 和 setter。如果我们采用第二种方法，那么它的区别就小得多了，因为它几乎涵盖了所有方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-16T02:07:56.217

访问器方法用于访问对象的字段。所以 getter 和 setter 都是访问器方法。**观察者方法**是一种方法的正确术语，它对对象进行更一般的观察，而不会引起外部可观察到的副作用。主要目的是引起副作用的方法是**mutator 方法**。因此，setter 是 mutator 方法的一个*例子*。对于良好的工程实践，应避免使用公共 setter，因为它们使类无法对其数据强制执行不变量：它们违反了类通常应强制执行的抽象障碍。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-08T00:48:04.967

能够在技术对话中区分 getter 和 setter 是件好事。 `Accessor`方法是方法的伙伴`modifier`。 `Accessor`s 读取对象的状态 ( `getA()`)，而`modifier`s 写入状态 ( `setA(Object)`)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-16T01:17:44.993

提供对对象内部的访问（可以是“读访问”*或“写访问”）的方法是“访问器方法”。*

这里的作者当然以这种方式使用它：

1.  [http://www.javaworld.com/article/2073723/core-java/why-getter-and-setter-methods-are-evil.html](http://www.javaworld.com/article/2073723/core-java/why-getter-and-setter-methods-are-evil.html)

2.  [http://c2.com/cgi/wiki?AccessorsAreEvil](http://c2.com/cgi/wiki?AccessorsAreEvil)

我认为该术语可能源自 Common Lisp（不是所有内容吗？）—— setf 用于修改访问器插槽的值。

# c# - 一个完全用 C# 编写的 BitTorrent 客户端？

> ID：623635
> 
> 赞同：32
> 
> 时间：2009-03-08T14:13:17.237
> 
> 标签：c#, .net, bittorrent

是否有一个用 C# 完全编写（我的意思是完全）编写的 BitTorrent 客户端？我知道用单声道编写的 BitTorrent 客户端，我非常喜欢它。

除了 MonoTorrent 和 BitSharp 之外，是否还有其他开源 BitTorrent 客户端正在开发中？

只是想知道“C# 中的开源比特洪流客户端”会在 C# 程序员中产生多大的兴趣。

[编辑：请在http://pumpkintorrent.codeplex.com/](http://pumpkintorrent.codeplex.com/)上查看 Michael Stum 的南瓜种子

@Michael：感谢分享项目网址。

@Allan：感谢 MonoTorrent ;)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-04-05T01:25:46.373

不幸的是，我没有 50 声望来添加评论，所以我必须写另一个答案。我的问题是针对此评论的：

“但老实说，我觉得要与其他开源比特洪流客户端相提并论还有很长的路要走。”

您认为缺少哪些功能使其不如其他库/客户端？不完整的功能列表包括：

1.  100% 独立于平台
2.  IPV6 支持
3.  超级播种
4.  一个完整的比特流跟踪器
5.  双氢睾酮
6.  同行交流（utorrent 风格）
7.  加密
8.  内存缓存
9.  优先下载
10.  选择性下载（从技术上讲，这只是优先下载的一个子集）
11.  快速对等扩展
12.  本地对等发现，
13.  封禁名单（同时将IP列入白名单/黑名单）
14.  磁铁链接下载
15.  残局模式
16.  Libtorrent 扩展协议
17.  速率限制（每个种子/全局）
18.  Http 播种（webseeding）——getright 风格
19.  单个文件重定位
20.  你还想要什么 ;）

那么，这仅仅是您没有意识到 monotorrent 的全部潜力的情况，还是缺少您认为关键的功能？如果是这样，补丁总是受欢迎的。

““写在单声道上”从来都不是一件坏事。只是我在 MS .Net 上寻找一些东西”

我想你误会了。MonoTorrent/bitsharp*确实*在 MS.NET 上构建和运行；）您所要做的就是从 SVN 中检查代码，打开 MonoTorrent.sln 并按 F5。

希望有帮助。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-03-08T17:51:25.700

MonoTorrent 是出色的客户端和服务器库。有一个用 GTK# - Monsoon 编写的 GUI，目前它只在 Linux 上运行。如果您有时间可以编写 WPF GUI 或稍加修改即可将 Monsoon 移植到 Windows。

寻找艾伦麦戈文了解更多信息。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-03-08T14:18:37.613

[MonoTorrent](http://monotorrent.blogspot.com/)

或者

[比特锐](http://www.mono-project.com/Bitsharp)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-03T06:17:02.313

还可以查看[Hadouken](http://www.hdkn.net/) - 完全用 C# 编写，但作为 Windows 服务运行。它可能可以在 Mono 上运行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-02T12:51:53.853

是什么让你认为它是基本的？;) 它比许多其他开放（和封闭）源代码种子库具有更高级的功能。我认为您非常低估了 monotorrent 提供的功能。

# c# - .NET TIFF 文件：无需第三方库即可实现 RGB 到 CMYK 转换？

> ID：623636
> 
> 赞同：2
> 
> 时间：2009-03-08T14:13:53.787
> 
> 标签：c#, image, tiff

跟进我之前的问题：是否以及如何获取基于 RGB 的[TIFF](http://en.wikipedia.org/wiki/Tagged_Image_File_Format)文件并将它们转换为具有标准 .NET (3.5) 功能的 CMYK？

这有可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-09T08:55:03.263

实际上有一种使用 System.Windows.Media.Imaging 命名空间的方法，目前它似乎只能与 TIFF 一起正常工作（这对我来说很好）：

```
 Stream imageStream = new
        FileStream(@"C:\temp\mike4.jpg", FileMode.Open, FileAccess.Read, FileShare.Read);
    BitmapSource myBitmapSource = BitmapFrame.Create(imageStream);
    FormatConvertedBitmap newFormatedBitmapSource = new FormatConvertedBitmap();
    newFormatedBitmapSource.BeginInit();
    newFormatedBitmapSource.Source = myBitmapSource;
    newFormatedBitmapSource.DestinationFormat = PixelFormats.Cmyk32;
    newFormatedBitmapSource.EndInit();

    BitmapEncoder encoder = new TiffBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(newFormatedBitmapSource));

    Stream cmykStream = new FileStream(@"C:\temp\mike4_CMYK.tif",

    FileMode.Create, FileAccess.Write, FileShare.Write);
    encoder.Save(cmykStream);
    cmykStream.Close(); 
```

请参阅Calle Mellergardh 的回答“[将图像从 RGB 转换为 CMYK ”。](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/0a4fecba-6212-4e72-9e10-7874c6327e7a/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T14:24:13.980

不，我认为使用标准 GDI+ 包装器 (System.Drawing) 是不可能的。GDI+ 仅支持 RGB。GDI+ 可以读取基于 CMYK 的图像（隐式转换为 RGB），但不能写入基于 CMYK 的图像。

您可能想尝试类似[GraphicsMill](http://www.aurigma.com/Products/GraphicsMilldotNET/default.aspx)的东西，它支持 CMYK。

# c++ - 编译只有头文件的 C++ .lib？

> ID：623638
> 
> 赞同：8
> 
> 时间：2009-03-08T14:14:48.510
> 
> 标签：c++, code-organization

我正在编译一个 C++ 静态库，并且由于所有类都是模板化的，因此类定义和实现都在头文件中。结果，似乎（在 Visual Studio 2005 下）我需要创建一个包含所有其他头文件的 .cpp 文件，以便它正确编译到库中。

为什么是这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-08T14:20:04.880

编译器不编译头文件，因为这些头文件旨在包含在源文件中。在进行任何编译之前，预处理器会从任何包含的头文件中获取所有代码，并将该代码放入包含它们的源文件中，就在它们被包含的位置。如果编译器也应该编译头文件，例如，你会在很多事情上有多个定义。

**例如，这是预处理器看到的：**

```
[foo.h]
void foo(); 
```

--

```
[mysource.cpp]
#include "foo.h"

int main()
{
   foo();
} 
```

**这就是编译器看到的：**

```
[mysource.cpp]
void foo();

int main()
{
   foo();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-08T14:17:14.107

即使您将创建一个 .cpp 文件，您仍然不会收到任何东西。您需要实例化模板才能将它们放入库中。

看看这里 [http://www.parashift.com/c%2B%2B-faq-lite/templates.html#faq-35.13](http://www.parashift.com/c%2B%2B-faq-lite/templates.html#faq-35.13) 关于如何用具体类型实例化模板。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T14:45:37.720

在 C++ 中，模板只是实际类的元定义。当您编译模板类时，编译器实际上会为传入的特定类型的数据动态生成实际类的代码（模板只是要复制的“模式”）。

例如，如果您有以下代码

```
 struct MyTemplate
{
private:
    float MyValue;

public:
    float Get() { return MyValue; }
    void Set(float value) { MyValue = value; }
};

void main()
{
    MyTemplate v1;
    MyTemplate v2;
    v1.Set(5.0f);
    v2.Set(2);
    v2.Get();
} 

```

编译器实际看到的是

```
 struct CompilerGeneratedNameFor_MyTemplate_float
{
private:
    float MyValue;

public:
    float Get() { return MyValue; }
    void Set(float value) { MyValue = value; }
};

struct CompilerGeneratedNameFor_MyTemplate_int
{
private:
    int MyValue;

public:
    int Get() { return MyValue; }
    void Set(int value) { MyValue = value; }
};

void main()
{
    CompilerGeneratedNameFor_MyTemplate_float v1;
    CompilerGeneratedNameFor_MyTemplate_int v2;
    v1.Set(5.0f);
    v2.Set(2);
    v2.Get();
} 

```

正如您可能看到的，编译器实际上并不知道要生成什么代码，直到您真正声明了模板的实例。这意味着模板不能编译到库中，因为它不知道模板最终会是什么。好消息是，如果您只是分发包含模板定义的头文件，您实际上不需要编译或包含任何库。

此外，作为旁注，“#include”预编译器命令实际上只是告诉预编译器用该文件中的所有内容替换“#include”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-08T17:49:05.627

如果您的所有代码都在 .h 文件中，那么您无需编译静态库即可使用该代码。

所有代码在编译时都可供库使用，因此在链接时不需要任何东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-08T16:43:00.980

你试图创造一些不必要的东西。大多数 C 库（和所有 C++ 库）都分为两部分分发：

*   接口 ( `foo.h`)
*   实施 ( `foo.lib`)

对于 C++ 模板代码，您的所有库都必须由最终用户编译，因为这就是模板的工作方式。没有理由提供预编译库。在这种情况下，您可以将您的库分发视为：

*   接口 ( `foo.h`)
*   实施 ( `foo-inl.h`)

正如 Niel 上面所说的，仅出于您自己的测试目的而拥有实现很有用，并且可能值得将这些实现与库本身一起分发。所以你应该有一套单独的单元测试来练习你的代码；但这些测试不应该是库本身的一部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-01T15:00:09.810

如果您的库全部在头文件中实现，则无需构建任何二进制文件即可使用它。那就是说。我通常在头文件库的初始开发阶段创建一个 .cpp 文件。为什么？在实际使用模板之前，编译器不会尝试编译甚至解析模板。拥有一个 .cpp 文件并在那里有一些虚拟代码来实例化模板可以帮助我在开发过程中更早地发现语法错误。所以我可以添加一些模板代码，点击编译，修复语法错误，添加更多代码，编译......等等。如果您在添加数百行代码后都尝试寻找一些愚蠢的语法错误，您就会明白我的意思。一旦我的库准备好进行单元测试，我将删除 .cpp 文件并依靠单元测试来推动我的开发。

此外，如果您只使用 VC++ 编译代码，您需要注意的一件事是 VC++ 在实际使用之前不会尝试编译所有模板成员函数。例如：

```
template <typename T>
class MyTemplate
{
public:
    MyTemplate() {} // default constructor

    MyTemplate(int) { 
        1 = 2
        // other syntax error code here
    }
};

void f() { MyTemplate<int> myt(); } // compile fine in VC
void g() { MyTemplate<int> myt(1); } // syntax error 
```

f() 将在 VC++ 2003 中正常编译，g++ 将捕获语法错误。我认为VC8和VC9也有同样的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-08T14:21:17.340

想想标准模板库。当您在另一个项目中使用它们时，您的模板类将被编译。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-08T14:23:41.157

其他人所说的关于未编译到库中的模板是正确的。但是，仍然值得强制编译器看到它们（通过#将它们包含在 .cpp 文件中），因为这样至少会检查它们的语法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-08T17:37:52.190

如果你所有的类都是模板，你不需要生成 .lib，看看他们没有分发的 .lib 的 boost 或 stlport [1]。

模板在使用时被编译。

[1] 严格来说，他们为正则表达式、iostream 等更高级的功能分发库，但辅助库被其他模板使用，模板本身不以库的形式分发。

# iphone - UITableView 与 UITableViewController

> ID：623641
> 
> 赞同：13
> 
> 时间：2009-03-08T14:16:07.557
> 
> 标签：iphone

有人可以向我解释 UITableViewController 相对于 UITableView 的优势吗？通常，我使用控制器，但基本的表格视图似乎更加灵活。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T02:07:29.410

我总是使用 UITableView。我从不使用 UITableViewController。

使用 UITableViewController 令人困惑。每个控制器都应该做一个屏幕，除了容器控制器。

好吧，UITableViewController 是一个控制器，而且大多数时候，tableView 并不是唯一的东西。

如果您查看文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html)

与 UITableView 相比，UITableViewController 提供的新界面非常少。这些都不是必不可少的。

```
– initWithStyle: 
```

**（呃？我在 nib 中启动了我的 tableView 并且我自定义了很多）**

获取表格视图

```
 tableView  property 
```

**（原来的tableView）**

配置表格行为

```
 clearsSelectionOnViewWillAppear  property 
```

**（好的，只需在 ViewWillAppear 上放一些代码）**

刷新表视图

```
 refreshControl  property 
```

**[tableView 重新加载]** ?

所以你看，

因此，除非您希望您的代码看起来更整洁（而不是更多），否则没有理由使用 UITableViewController，据我所知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T15:03:12.093

我不认为你理解你自己的问题。

UITableViewController 是一个*控制器*。

UITableView 是一个*视图*。

一个并不*比*另一个好，它们是完全不同的对象，用于完全不同的事情。

我会花一些时间通过 Cocoa 和 iPhone SDK 学习模型-视图-控制器模式。

[模型-视图-控制器设计模式](http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/chapter_5_section_4.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T12:27:07.020

这个想法是 ViewControllers 拥有一个子视图树（和子视图控制器）并管理向/从其子视图调度事件。例如，您可能有一个包含图像的视图，并且该视图位于处理方向更改和内存警告等的视图控制器中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-17T19:23:31.500

这是我对 Cocoa 感到非常困惑的一件事：Apple 的 MVC 实现（或者至少是他们使用的术语）是有问题的。在 Cocoa 中，就 MVC 模式定义它们而言，大多数视图本身实际上以某种身份充当控制器（只要看看[UITableView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UITableView) ——它的大多数方法实际上都是控制器方法）。因此，在某种程度上已经是控制器的基础上，您拥有 Apple 的视图控制器的附加概念。您甚至根本不需要*使用*UITableViewController（即使使用数据绑定）这一事实基本上证明了视图正在充当自己的控制器。在 MVC 中，您不能在没有控制器的情况下将视图绑定到模型（这就是 MVC 中控制器的全部*意义*）。

在 Apple 的开发人员看来，“视图控制器”（例如 UITableViewController）实际上更像是一个更高级别的帮助器/管理器类，它管理更底层的 UITableView 类并启用*一些*关键的[附加功能](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html)，这些功能更多地与如何表格视图与应用程序的一般 UI 交互。

此外，Apple 似乎打算让视图控制器实际上更像是一个屏幕控制器，建议每个屏幕只使用一个视图控制器（大概意味着您不能嵌套视图控制器）。我坚持称这个概念为视图控制器是用词不当。

请不要犹豫，请任何人纠正我，我自己对 Obj-C/Cocoa 还是很陌生。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-16T09:45:20.683

`UITableView`是一个视图，`UITableViewController`是一个控制器，`UITableView`它的根视图。

因此，通过使用`UITableViewController`：

1.  你有一个根视图`UITableView`本身。`UITableView`所以它比控制器中的`UIView`父视图占用更少的内存。

2.  `UITableView`如果您需要一个控制器和一个作为它的主要显示视图，它会为您提供一个现成的模板。

3.  静态表视图仅在嵌入`UITableViewController`实例时有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T12:22:06.033

上面的链接返回“找不到页面”。出于某种原因，即使是更正的[链接](http://developer.apple.com/documentation/Cocoa/Coceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html)在超链接时也会返回“找不到页面”（也许 Apple 不允许链接到他们的开发者网站）。

要查找相关信息，请访问 Apple 的 Developer Connection ( [http://developer.apple.com/index.html](http://developer.apple.com/index.html) ) 并搜索“cocoa model-view-controller design pattern”。

在结果表中，选择“Cocoa Fundamentals Guide: Cocoa Design Patterns”。在该页面上，向下滚动左侧的目录，直到看到“模型-视图-控制器设计模式”项。选择该项目以阅读有关该特定设计模式的更多详细信息。

# math - 一个好的不确定性（区间）算术库？

> ID：623660
> 
> 赞同：6
> 
> 时间：2009-03-08T14:25:36.333
> 
> 标签：math, uncertainty, interval-arithmetic

*已编辑*

鉴于“不确定”和“不确定性”这两个词相当普遍，很难通过谷歌搜索“不确定性算术”并立即获得任何有用的信息。因此，任何人都可以建议一个好的例程库，在几乎任何编程/脚本语言中，实现对不确定值的处理，按照这个描述：

> 使用不确定性算术记录近似值，对其有测量公差。这是当我们不确定一个值，但知道它可以具有的上限和下限时，表示为±值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-08T16:32:57.947

我相信“[区间算术](http://en.wikipedia.org/wiki/Interval_arithmetic)”是您正在寻找的更常见的名称。 [boost::interval](http://www.boost.org/doc/libs/1_38_0/libs/numeric/interval/doc/interval.htm)将是我作为支持库的首选。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-09-23T13:27:14.623

如果您正在寻找[错误传播](http://en.wikipedia.org/wiki/Error_propagation)模块（这与[区间算术](http://en.wikipedia.org/wiki/Interval_arithmetic)不同，但错误传播是科学家常用的），我建议您看看我的[`uncertainties`](http://pypi.python.org/pypi/uncertainties/)Python 模块。它以透明的方式处理错误/不确定性传播，并且与许多实现相反，正确处理变量之间的相关性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-08T15:57:46.173

看看 Thomas Flanagan 的[Error Propagation](http://www.ee.ucl.ac.uk/~mflanaga/java/ErrorProp.html) Java 类。它使用的方法最适合处理不确定性而不会带来额外的麻烦。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-13T15:57:56.670

供参考，因为对你来说可能为时已晚，我建议 BIAS/Profil：[http ://www.ti3.tuhh.de/keil/profil/index_e.html](http://www.ti3.tuhh.de/keil/profil/index_e.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-08T14:36:35.730

它不是图书馆，但您的问题让我想起了“Expert F#”中描述概率工作流程的示例：

> 我们不是编写表达式来计算整数，而是编写表达式来计算整数的分布。本案例研究基于 Ramsey 和 Pfeffer 于 2002 年发表的一篇论文。

你可以阅读[谷歌书籍](http://books.google.com/books?id=NcrMkjVxahMC&pg=PA239&lpg=PA239&dq=f%23+probabilistic+workflows&source=bl&ots=pkq2JydmaF&sig=fgJW0g5Ys6cs4vd6pe6SL-SXrFA&hl=nl&ei=dNazSeTrBNyxjAeckrztBQ&sa=X&oi=book_result&resnum=1&ct=result)的摘录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-08T15:21:47.570

我可能会通过声明一个名为 UncertainValue 的类来解决这个问题，该类具有诸如（伪代码）之类的方法和属性：

```
class UncertainValue
{
  private double upperbound;
  private double lowerbound;
  private double nominalvalue;
  private double certainty;
  ...
  UncertainValue add(UncertainValue value);
  UncertainValue multiply(UncertainValue factor);
} 
```

我意识到这并不能回答您在查找预制库方面的问题，抱歉。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-11T14:22:01.630

INTLAB（INTerval LABoratory）是一个著名的区间算术库和经过验证的数值线性代数。它基于 MATLAB/Octave。你可以从这里下载这个库：

[http://www.ti3.tu-harburg.de/rump/intlab/](http://www.ti3.tu-harburg.de/rump/intlab/)

kv 库是由 C++ 和 Boost C++ 库组成的区间算术库。多精度区间算术可用。它还具有经过验证的 ODE 求解器。

[http://verifiedby.me/kv/index-e.html](http://verifiedby.me/kv/index-e.html)

对于其他区间算术库/软件，请查看以下网站：

[http://www.cs.utep.edu/interval-comp/intsoft.html](http://www.cs.utep.edu/interval-comp/intsoft.html)

# c# - 如何在 WPF 中的元素上添加半透明阴影？

> ID：623661
> 
> 赞同：9
> 
> 时间：2009-03-08T14:25:43.290
> 
> 标签：c#, .net, wpf, user-interface

我想在 WPF 窗口的内容上添加半透明颜色（以指示窗口的状态）。目前我正在使用填充窗口的用户控件，并根据需要更改背景颜色和可见性。

此方法的问题是当用户控件可见时，我无法单击用户控件后面窗口中的任何控件（按钮、复选框）。我想我需要以某种方式使 UserControl 对点击透明。这是可能的，还是有更好的方法在窗口上添加颜色？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-08T14:28:04.347

您可以设置`IsHitTestVisible`为`False`您的掩蔽元素。

```
<Grid>
   <Button>Background Button</Button>
   <Rectangle Fill="Blue" Opacity="0.25" IsHitTestVisible="False"/>
</Grid> 
```

尝试使用[Kaxaml 之](http://www.kaxaml.com)类的 XAML 。您仍然可以单击该按钮，但蓝色矩形将显示在顶部。由于不透明度设置较低，它是半透明的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T14:29:03.423

有一个 IsHitTestVisible 属性。

# asp.net - 如何使用 session 函数来调用当前的 applicationid？

> ID：623669
> 
> 赞同：0
> 
> 时间：2009-03-08T14:29:07.230
> 
> 标签：asp.net, vb.net

例如，我登录到系统广告...但是如何使用会话功能来调用当前的应用程序ID？我需要将其存储在表单和数据库的另一个表中.. 代码后面.. vb 不是 c# 非常感谢。你的导游很感激。

示例.. 1\. 在虚拟工作室中使用会话修复 (userid) 登录.. 2\. 我想召回它 (userid) .. 怎么样！！问题1 3\. 将(userid) 填充到数据库中的其他表中。那个Y！4\. 网格视图数据仅显示特定（用户 ID）.. 在会话中！！问题 2

谢谢飞溅！！

我认为该显示将单词（applicationid）替换为（userid）..我错了......因为我重新检查了aspnet_membership表！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T14:48:22.033

ASP.NET Session 不是一个函数，而是一个对象，更具体地说，是保存在内存中并指定超时的专用集合 ( [SessionStateItemCollection )。](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstateitemcollection.aspx)您可以使用字符串作为“用户名”等键在该“容器”中插入数据（其他对象），例如：

```
Session("UserName") = "billg" 
```

您可以以相同的方式检索该值：

```
Dim UserName as String = Session("UserName") 
```

您可以[在 MSDN 上找到会话状态概述](http://msdn.microsoft.com/en-us/library/ms178581.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T14:44:43.883

不确定这是您所追求的，但 SessionID 会在会话开始后更改事件，直到您实际在 Session 中存储一个值。最好提出自己的 ID 或基于 SQL 的身份并将其存储在 Session 中。

# entity-framework - 更新实体框架对象

> ID：623672
> 
> 赞同：24
> 
> 时间：2009-03-08T14:31:59.530
> 
> 标签：entity-framework, entity

我使用数据传输对象在实体框架与业务层和用户层之间传输数据。我确实有些疑问，如果我检索到一个转换为 DTO 的对象，我如何在实体框架中更新正确的对象而不仅仅是插入一个副本？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2010-11-18T07:36:52.697

以下代码将从强类型视图更新已在 MVC 中作为控制器参数创建的 EF 4 实体：

一旦实体被添加到上下文中，似乎技巧是使用 ObjectStateManager 将状态从已添加更改为已修改。

```
MyEntities db = new MyEntities();
db.Product.AddObject(product);
db.ObjectStateManager.ChangeObjectState(product, System.Data.EntityState.Modified);
return db.SaveChanges() > 0; 
```

根据@Sean Mills 的评论，如果您使用的是 EF5，请使用：

```
 ((IObjectContextAdapter) db).ObjectContext.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Added); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-06-28T04:34:03.057

一个老问题，但以防万一有人需要代码解决方案：

[http://www.mikesdotnetting.com/Article/110/ASP.NET-MVC-Entity-Framework-Modifying-One-to-Many-and-Many-to-Many-Relationships](http://www.mikesdotnetting.com/Article/110/ASP.NET-MVC-Entity-Framework-Modifying-One-to-Many-and-Many-to-Many-Relationships)

例子：

```
public void EditArticle(
        Article article, string articleTypeId, string[] categoryId) 
{ 
  var id = 0; 
  Article art = de.ArticleSet 
                  .Include("ArticleTypes")
                  .Include("Categories")
                  .Where(a => a.ArticleID == article.ArticleID)
                  .First();

  var count = art.Categories.Count;
  for (var i = 0; i < count; i++)
  {
    art.Categories.Remove(art.Categories.ElementAt(i));
    count--;
  }
  foreach (var c in categoryId)
  {
    id = int.Parse(c);
    Category category = de.CategorySet
        .Where(ct => ct.CategoryID == id).First();
    art.Categories.Add(category);
  }

  art.Headline = article.Headline;
  art.Abstract = article.Abstract;
  art.Maintext = article.Maintext;
  art.DateAmended = DateTime.Now;

  art.ArticleTypesReference.EntityKey = new EntityKey(
                                          "DotnettingEntities.ArticleTypeSet", 
                                          "ArticleTypeID", 
                                          int.Parse(articleTypeId)
                                          );

  de.SaveChanges();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-05-22T19:09:07.713

```
//I am replacing player :)
public ActionResult ProductEdit(string Id, Product product)
{
    int IdInt = DecyrptParameter(Id);
    MyEntities db = new MyEntities();

    var productToDetach = db.Products.FirstOrDefault(p=> p.Id == IdInt);
    if (product == null)
        throw new Exception("Product already deleted"); //I check if exists, maybe additional check if authorised to edit
    db.Detach(productToDetach);

    db.AttachTo("Products", product);
    db.ObjectStateManager.ChangeObjectState(product, System.Data.EntityState.Modified);

    db.SaveChanges();
    ViewData["Result"] = 1; // successful result
    return View();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-08T15:25:50.603

您需要在 DTO 中包含主键或备用键，然后在更新时将该键匹配回正确的 EF 实体。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-21T14:18:01.247

这应该适用于 EF 5：[https](https://stackoverflow.com/a/11749716/540802) ://stackoverflow.com/a/11749716/540802 ：

```
db.Entry(product).State = EntityState.Modified; 
```

# perl - 在 Perl 中检测被覆盖的方法

> ID：623680
> 
> 赞同：9
> 
> 时间：2009-03-08T14:37:56.803
> 
> 标签：perl, oop, methods, overriding

上周，我因意外覆盖子类中的方法而被咬*了两次。*虽然我不喜欢继承，但我们（ab）在我们的应用程序中使用它。我想做的是提供一些声明性语法来说明方法正在覆盖父方法。像这样的东西：

```
use Attribute::Override;

use parent 'Some::Class';

sub foo : override { ... } # fails if it doesn't override
sub bar { ... }            # fails if it does override 
```

这里有几个问题。首先，如果方法加载以某种方式延迟（例如，通过 AUTOLOAD 加载的方法或稍后安装在符号表中的方法），则不会检测到这些方法。

遍历继承树也可能会变得同样昂贵。我使用[Class::Sniff](http://search.cpan.org/dist/Class-Sniff/)执行此操作，但它并不适合运行代码。我可以遍历继承树并简单地匹配相应符号表中已定义 CODE 槽的位置，这样会更快，但如果方法缓存无效，那么如果我要缓存这些结果，就会中断。

所以我有两个问题：这是一种合理的方法吗？是否有一个钩子可以让我检查方法缓存是否已更改？（在“perldoc perlobj”中搜索“缓存”）。

当然，这不应该破坏生产代码，我正在考虑仅在 TEST_HARNESS 环境变量处于活动状态时让它失败或发出警告（并且如果生产代码要设置 TEST_HARNESS，则有一个明确的环境变量强制它处于非活动状态出于某种原因的环境变量）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-08T18:38:46.053

执行此操作的一种方法：

```
package Base;
...
sub new {
    my $class = shift;
    ...
    check_overrides( $class );
    ...
}

sub check_overrides {
    my $class = shift;
    for my $method ( @unoverridable ) {
        die "horribly" if __PACKAGE__->can( $method ) != $class->can( $method );
    }
} 
```

check_overrides 的记忆可能会有所帮助。

如果在某些情况下您需要豁免，请使用备用方法名称并让基类调用：

```
package Base;
...
my @unoverridable = 'DESTROY';
sub destroy {}
sub DESTROY {
    my $self = shift;
    # do essential stuff
    ...
    $self->destroy();
} 
```

# jtable - 在 JTable 中显示对象的 ArrayList 内容的最简单方法是什么？

> ID：623690
> 
> 赞同：4
> 
> 时间：2009-03-08T14:54:34.750
> 
> 标签：jtable

我有一个 Track 对象的 ArrayList。每个 Track 对象都有以下字段（所有字符串）：

url、标题、创作者、专辑、流派、作曲家

我想在 JTable 中显示这些轨道，每一行都是一个 Track 对象的实例，每一列包含一个 Track 对象的属性。

如何使用 JTable 显示这些数据？我使用了一个正确实现 getValueAt() 方法的 AbstractTableModel。不过，我在屏幕上看不到任何东西。

还是只使用数组更容易？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-08T15:13:37.230

为了在 a 上添加要显示的内容[`JTable`](http://java.sun.com/javase/6/docs/api/javax/swing/JTable.html)，可以使用[`TableModel`](http://java.sun.com/javase/6/docs/api/javax/swing/table/TableModel.html)来添加要显示的项目。

向 中添加一行数据的一种方法`DefaultTableModel`是使用 s 数组的[`addRow`](http://java.sun.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html#addRow(java.lang.Object[]))方法，该数组`Object`表示行中的对象。由于没有直接从 中添加内容的方法，因此可以通过访问 的内容`ArrayList`来创建 s 数组。`Object``ArrayList`

以下示例使用一个`KeyValuePair`作为数据持有者的类（类似于您的`Track`类），它将用于填充 a[`DefaultTableModel`](http://java.sun.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html)以将表格显示为 a `JTable`：

```
class KeyValuePair
{
    public String key;
    public String value;

    public KeyValuePair(String k, String v)
    {
        key = k;
        value = v;
    }
}

// ArrayList containing the data to display in the table.
ArrayList<KeyValuePair> list = new ArrayList<KeyValuePair>();
list.add(new KeyValuePair("Foo1", "Bar1"));
list.add(new KeyValuePair("Foo2", "Bar2"));
list.add(new KeyValuePair("Foo3", "Bar3"));

// Instantiate JTable and DefaultTableModel, and set it as the
// TableModel for the JTable.
JTable table = new JTable();
DefaultTableModel model = new DefaultTableModel();
table.setModel(model);
model.setColumnIdentifiers(new String[] {"Key", "Value"});

// Populate the JTable (TableModel) with data from ArrayList
for (KeyValuePair p : list)
{
    model.addRow(new String[] {p.key, p.value});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T16:15:00.110

然后，我的问题是我根本看不到问题。这是我用来制作界面的代码：

```
public Interface(){

    setSize(1024, 768);
    setBackground(new Color(0,0,0));
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    add(new MenuBar());//simple JMenuBar implementation

    table= new JTable();
    table.setPreferredScrollableViewportSize(new Dimension(500, 500));

    JScrollPane jsp = new JScrollPane(table);
    add(jsp);

    pack();
    setVisible(true);
} 
```

执行此代码后，我在另一个类中有多次执行此操作的代码：

```
((DefaultTableModel)mainInterface.table.getModel()).addRow(
new String[] {t.location,t.title,t.creator,t.album,t.genre,t.composer}); 
```

顺便说一下，t 是一个 Track 对象。

# java - Handcode GUI 或使用 gui-designer 工具

> ID：623692
> 
> 赞同：15
> 
> 时间：2009-03-08T14:56:41.343
> 
> 标签：java, c++, swing, windows-forms-designer, gui-designer

我想听听一些关于手动编写 GUI 的意见，就像在使用 Java 或 Qt 和 C++ 时通常所做的那样，而不是使用 gui-designer 工具？GUI 设计器工具的示例包括 MFC GUI-designer、Qt 设计器、Interface Builder (Apple)。

我曾经是手工编码的粉丝，但根据最近的经验，我已经改变了。我在手工编码中看到的问题是编写 GUI 相当快速和灵活，但是一旦您需要对很久以前编写的 GUI 进行更改，这可能会非常困难。在大面板中找到合适的元素可能很困难。

第二个问题是，在 GUI 创建和布局代码中添加大量逻辑太容易了。我经常不得不接管难以重用的 GUI 代码的维护，因为它的行为与其外观混合在一起，并且混合布局和行为常常使类变得非常大且难以理解。

在我看来，使用 GUI 设计器工具可以更清晰地分离外观和逻辑。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-08T15:18:13.243

在没有标准（或*事实上的*标准）GUI 标记语言（如）的情况下，我**总是对 GUI 设计进行手工编码**。这样做的原因是我发现使用 GUI 构建器设计工具会束缚您使用特定的 IDE。随着时间的推移，用于 GUI 设计和/或编写代码的最佳 IDE 将发生变化，*每个开发人员都应该可以自由选择他们觉得最舒服的 IDE*。*`Java`*

 **我现在工作的地方，我们有很多使用[Netbeans](http://www.netbeans.org/) [Matisse](http://www.netbeans.org/kb/articles/matisse.html) GUI builder 编写的遗留 GUI（违背了我当时的建议 :-)。这些现在几乎无法维护，因为所有开发人员都更喜欢[IntelliJ IDEA](http://www.jetbrains.com/idea/)或[Eclipse](http://www.eclipse.org)作为他们的 IDE。让开发人员启动 Netbeans 只是为了修改 GUI 布局是不现实的或不可行的（人们不会使 Netbeans 项目定义保持同步等）。

另一点是*编写 GUI 布局代码的总时间可能只占*给定项目总开发工作量的 5%。即使您自己编写代码需要两倍的时间，但这并不会在宏伟的计划中转化为太多的开销。为长期可维护性付出的代价很小。

只要您清楚将 GUI 布局逻辑从业务逻辑中分离出来，我相信不会因此而受到任何影响。这里没有人再使用 GUI 构建器了！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-08T15:26:28.980

我是手工完成的，在应用程序中重新使用面板要容易得多（有些面板可以出现在多个地方）。

当你在一个团队中时，使用设计师工作，艺术家应该做 GUI。

> 在大面板中找到合适的元素可能很困难。

?? 我从来没有见过。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-08T15:05:35.910

有趣的是，它对我来说正好相反。从 Winforms 的角度来看，设计师生成的代码非常嘈杂，可能有四分之一或一半的属性设置是真正需要的。与设计师合作时，制作相当大的控件也更具诱惑力。在 Winforms 设计器中更改某些控件层次结构在我看来是一场噩梦。

在我的上一个项目中，我创建了额外的 API 以声明方式在表单、dockmanagers、菜单、工具栏等中设置拆分器。这些使得它们将进一步强制分离关注点。

我还尝试更多地依赖自动布局功能，这些功能在 WPF 中确实要好得多，但也可以在 Windows 窗体中使用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-08T16:11:24.160

我强烈认为您应该使用界面构建器而不是手动编写 GUI。正如在问题中提到的那样，这是一个更清晰的分离，一旦必须编辑某些东西，它就会容易得多。

`.ui`Qt 设计器有这个特性来从文件[1)]中创建一个类，但我认为不使用这个特性是最好的方法，因为这只会创建更多根本不应该存在的代码。从 -file 创建窗口的速度问题`.ui`可以忽略不计，因为窗口只需加载一次。

这是 PyQt，但在 C++ 中也有类似的东西：

```
class SelectDateDialog(QDialog):
    def __init__(self):
        QDialog.__init__(self)
        uic.loadUi("resources/SelectDate.ui", self) 
```

本质上，这与将所有 UI 代码包含在方法中具有相同的效果`__init__()`，但 UI 几乎与代码完全分离。

^(1))`.ui`文件是描述用户界面的 XML 文件

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-08T15:07:44.517

我强烈建议您在 OS X 上使用 Interface Builder。如果您想学习，手动操作是可以的，但是通过在实际项目中使用它可以省去很多麻烦。它确实非常强大。

至于 Java 和 C++，这取决于你在做什么以及在什么平台上。对于简单的应用程序，您可以从不看到 UI 代码。但是，对于复杂的应用程序和富客户端，您通常必须手动编写一些代码。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-08T17:28:07.767

如果您正在设计一个包含大量输入表单和表格数据的业务应用程序，那么为您的 UI 编写代码比使用 UI 设计器更快且更易于维护。在这些类型的应用程序中，几乎不需要将一个元素精确地放置在屏幕上的预定义位置，而另一方面，有很多重复和设计约定可以简单地提取到单独的方法中。

以 Eclipse 或 OpenOffice 首选项对话框为例。有一堆类别和一堆不同的选项可以为每个设置。如果您必须制作这种尺寸的东西，那么手工设计每个屏幕是一项平凡的任务。更好的方法是编写代码，根据一些约定和默认值，从提供的域数据中即时生成 UI 元素。

鉴于您已经将业务逻辑排除在 UI 之外，我看不出使用设计器如何促进更好的分离，也看不出这种感知分离对任何事情都有什么帮助。

最后，如果您使用的是 Java，请务必查看[MigLayout](http://www.miglayout.com/)。它与 Swing 和 SWT 一起工作，它的语法非常简洁明了，并且它有一个非常有用的调试模式。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-08T15:03:37.600

这取决于情况，真的。我认为两者都有自己的位置，我通常使用混合方法。

总有一些事情是 GUI builder 不能做的（例如在 Interface Builder 中将颜色设置为 UIColor 常量）。另一方面，大部分 UI 工作都非常普通（例如添加静态标签）。

我更喜欢在 GUI 构建器中做平凡的事情，而在代码中做更有趣的事情。

此外，我偶尔会发现自己手动编辑由 GUI 构建器（在我的例子中为 Interface Builder 和 glade）生成的 XML。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-08T15:49:29.250

我倾向于认为正确的答案取决于目标平台的文化。在 OS X 上，Interface Builder 是工具链中不可或缺的一部分，因此很难避免。

在 Java（awt 或 swing）中，情况正好相反。对此没有工具链支持。

确实，您可以说的方式是工具产生输出的方式。Interface Builder 生成 .nib 格式的文件，这些文件特定于 Cocoa 在屏幕上放置控件的方式。它理解本质上是一种界面标记格式。Java没有类似的概念。一切都是编译的类，因此更难获得方便的结果。

GTK+ 与 glade 结合使用时，似乎在两者之间取得了合理的平衡。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-08T15:50:36.130

没有什么能阻止混合这两种方法。我经常在 GUI 设计器中制作表单的主要布局（因为它很快并且您可以看到自己在做什么），然后在其中放置一个或多个面板，然后填充代码。这在 GUI 必须适应特定情况时特别有用 - 例如，如果 GUI 必须根据所连接的硬件进行更改。

在任何情况下，最重要的确实是将 GUI 和应用程序逻辑分开。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-08T15:07:32.580

我对此的看法： 1\. 手工编码的 GUI 代码更可重用 2\. 设计师的布局问题更简单

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-08T17:24:49.430

如果您希望 UI 中包含一些非标准功能，则手动编码可能会很好。你有更多的灵活性，但你需要投入更多的时间来创建一个好的界面，因为 Java/C++ 语言并不意味着针对 UI 设计。

另外，如果您有修订控制，则可以查看更改历史记录，这是使用二进制格式或不支持 RCS 的 xml 格式的设计无法完成的。

如今，大多数用于可视化设计 UI 的可用工具都缺少一些功能。它们不够灵活，有些功能只能通过编码来获得。此外，在某些情况下，生成的代码对人类并不友好，如果您手动修改，您可能无法继续使用设计器。

但是如果设计简单的话，设计真的可以节省时间，我们可以希望未来设计师会有所改进，但我不会拘泥于广度。

我的结论是，如果您今天需要灵活性，则必须手动编写界面代码，如果您想要简单快速的东西，那么设计器是最佳选择。

也许未来设计师会更强大，或者可能会有专门用于 UI 设计的新语言更适合在 C++/Java 中使用，比如 XUL 或 XAML。

# c++ - 直接访问结构成员

> ID：623693
> 
> 赞同：2
> 
> 时间：2009-03-08T14:59:14.287
> 
> 标签：c++, memory, struct

我有一个测试结构定义如下：

```
struct test{
    int a, b, c;
    bool d, e;
    int f;
    long g, h;
}; 
```

在某处我以这种方式使用它：

```
test* t = new test;   // create the testing struct
int* ptr = (int*) t;
ptr[2] = 15;          // directly manipulate the third word
cout << t->c;         // look if it really affected the third integer 
```

这在我的 Windows 上正常工作 - 它按预期打印 15，但它安全吗？我真的可以确定变量在我想要的内存中的位置吗？特别是在这种组合结构的情况下（例如 f 在我的编译器上是第五个单词，但它是第六个变量）？

如果没有，是否有任何其他方法可以直接操作 struct 成员，而无需在代码中实际使用 struct->member 构造？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-08T15:08:52.733

看起来你在问两个问题

**将 &test 视为 3 长度的 int 数组是否安全？**

最好避免这种情况。这可能是 C++ 标准中定义的操作，但即使是这样，与您一起工作的每个人都不太可能理解您在这里所做的事情。我相信如果您阅读标准，因为可能填充结构，这不受支持，但我不确定。

**有没有更好的方法来访问没有名字的成员？**

是的。尝试使用[offsetof](http://www.cplusplus.com/reference/clibrary/cstddef/offsetof.html)宏/运算符。这将提供结构中特定成员的内存偏移量，并允许您正确定位指向该成员的点。

```
size_t offset = offsetof(mystruct,c);
int* pointerToC = (int*)((char*)&someTest + offset); 
```

另一种方法是直接获取 c 的地址

```
int* pointerToC = &(someTest->c); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-08T15:04:11.437

不，你不能确定。编译器可以自由地在结构成员之间引入填充。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-08T15:52:07.077

要添加到[JaredPar 的答案](https://stackoverflow.com/questions/623693/accessing-struct-members-directly/623709#623709)，仅在 C++ 中（不是在纯 C 中）的另一个选项是创建一个指向成员对象的指针：

```
struct test
{
  int a, b, c;
  bool d, e;
  int f;
  long g, h;
};

int main(void)
{
  test t1, t2;

  int test::*p;  // declare p as pointing to an int member of test
  p = &test::c;  // p now points to 'c', but it's not associating with an object
  t1->*p = 3;    // sets t1.c to 3
  t2->*p = 4;    // sets t2.c to 4

  p = &test::f;
  t1->*p = 5;    // sets t1.f to 5
  t2->*p = 6;    // sets t2.f to 6
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-08T15:12:03.663

您可能正在寻找`offsetof`宏。这将为您提供成员的字节偏移量。然后，您可以在该偏移处操作成员。但请注意，此宏是特定于实现的。包括`stddef.h`让它工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-08T15:09:19.537

它可能不安全并且 100% 不可读；从而使这种代码在现实生活中的生产代码中不可接受。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-08T15:34:08.213

使用 set 方法和 boost::bind 创建函子，这将改变这个变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-08T16:18:00.523

除了填充/对齐问题之外，其他答案已经提出，您的代码违反了严格的别名规则，这意味着它可能会因优化构建而中断（不确定 MSVC 是如何做到这一点的，但 GCC`-O3`会因这种行为而中断）。本质上，因为`test *t`和`int *ptr`是不同的类型，编译器可能会假设它们指向内存的不同部分，并且它可能会重新排序操作。

考虑这个小修改：

```
test* t = new test;
int* ptr = (int*) t;

t->c = 13;
ptr[2] = 15;
cout << t->c; 
```

最后的输出可能是`13`或`15`，具体取决于编译器使用的操作顺序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-10T17:03:28.463

根据标准的第 9.2.17 段，实际上将指向结构的指针转换为指向其第一个成员的指针是合法的，前提是该结构是[POD](http://www.parashift.com/c++-faq-lite/intrinsic-types.html#faq-26.7)：

> 使用 reinterpret_cast 适当转换的指向 POD 结构对象的指针指向其初始成员（或者如果该成员是位字段，则指向它所在的单元），反之亦然。[注意：因此，在 POD 结构对象中可能存在未命名的填充，但不是在其开头，这是实现适当对齐所必需的。]

但是，该标准不保证结构的布局——即使是 POD 结构——除了后面成员的地址将大于前面成员的地址，前提是之间没有访问说明符 ( `private:`,`protected:`或`public:`)他们。因此，将您的初始部分`struct test`视为 3 个整数的数组在技术上是未定义的行为。

# jsp - JSP 是否适合构建网站？

> ID：623694
> 
> 赞同：10
> 
> 时间：2009-03-08T15:00:36.013
> 
> 标签：jsp, web-applications

有人可以告诉我，[JSP](http://java.sun.com/products/jsp/)在用它构建网站时是否显示出良好的性能？

它可以和 PHP 一样快吗？

我问的原因是因为我看到这些天每个人都在使用 PHP 或 ASP.NET 构建他们的前端。

由于我是一名 Java 开发人员，我真的希望能够在 Java 中构建应用程序，作为 JSP 中的后端和前端。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-08T15:44:39.357

我认为 JSP 不会有任何性能问题。

但请记住，单独的 JSP 并不是一个完整的前端技术。

您应该将所有业务逻辑（或者更好的是：所有对业务逻辑的调用）保留在 Servlet（或 Actions，如果您使用额外的前端）中，并且真正将表示保留在 JSP 中。

许多初学者犯了在 JSP 页面中编写逻辑代码的错误，这很快就变成了无法维护的混乱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T21:30:06.703

性能方面，PHP、ASP、JSP 等之间没有太大区别。如前所述，托管您的 Java Web 应用程序可能是个问题。大多数开箱即用的托管服务提供商只是没有像 Tomcat 或 Jetty 这样的 servlet 引擎作为其标准服务产品的一部分。

拥有 PHP 和 Java (JSP) 的经验，我注意到与 PHP 相比，使用 JSP 启动和运行需要付出更多的努力。运行 Java Web 应用程序是您真正需要的东西，否则您可能会在此过程的早期放弃。PHP 很简单，只需将 PHP 脚本放在您的 web-root 文件夹中即可。但话又说回来，PHP 也有它的阴暗面（语法）。

Java 可以更强大。尤其是当您进入企业解决方案（大型、分布式和模块化企业软件系统）领域时。因此，Java 主要用于该领域而不是 PHP（尽管 Yahoo! 是使用 PHP 做很多事情的大型企业的一个很好的例子）。

无论您决定使用 Java 还是 PHP，您应该做的一件事就是使用某种框架。无需在这里重新发明轮子。对于 PHP，有[CodeIgniter](http://codeigniter.com)、[KohanaPHP](http://www.kohanaphp.com)和[CakePHP](http://cakephp.org)，在 Java 领域，您可能想看看[Struts 2](http://struts.apache.org)、[Stripes](http://www.stripesframework.org)和[Spring](http://www.springsource.org)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T15:04:07.363

从我所阅读的所有内容和我所做的一些基准测试来看，JSP 实际上可以比 PHP 快得多。看看这个网站：[http ://shootout.alioth.debian.org/](http://shootout.alioth.debian.org/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-28T19:51:47.537

每个人都在谈论 JSP 比 PHP 更难设置，这可能是真的，但你应该看看[appfuse lite](https://appfuse-light.dev.java.net/)，它将帮助你在大约 15 分钟内运行你的 spring/ibatis 设置。它有大约 80 种不同的配置，所以你可以选择你想要的容器和 ORM 等。

# django - 保存时调整图像大小

> ID：623698
> 
> 赞同：17
> 
> 时间：2009-03-08T15:03:08.473
> 
> 标签：django, django-forms, image-manipulation

在 Django 中上传图像后，如何轻松调整图像大小？我正在使用 Django 1.0.2 并且我已经安装了 PIL。

我正在考虑覆盖模型的 save() 方法来调整它的大小，但我真的不知道如何开始并覆盖它。

有人可以指出我正确的方向吗？谢谢 ：-）

@Guðmundur H：这不起作用，因为 django-stdimage 包在 Windows 上不起作用:-(

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-08T16:04:42.960

我推荐使用[django-stdimage 的 StdImageField](https://github.com/humanfromearth/django-stdimage)，它应该为你处理所有的脏活。它易于使用，您只需在字段定义中指定调整后图像的尺寸：

```
class MyModel(models.Model):
    image = StdImageField(upload_to='path/to/img',  size=(640, 480)) 
```

查看文档——它也可以做缩略图。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-08T15:12:15.877

您应该使用一种方法来处理上传的文件，如[Django 文档](http://docs.djangoproject.com/en/dev/topics/http/file-uploads/)中所示。

在这种方法中，您可以连接变量中的块（而不是直接将它们写入磁盘），从该变量创建 PIL 图像，调整图像大小并将其保存到磁盘。

在 PIL 中，您应该查看`Image.fromstring`and `Image.resize`。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2011-03-03T17:12:28.940

我使用此代码处理上传的图像，在内存中调整它们的大小（而不将它们永久保存在磁盘上），然后将拇指保存在 Django ImageField 上。希望能有所帮助。

```
 def handle_uploaded_image(i):
        import StringIO
        from PIL import Image, ImageOps
        import os
        from django.core.files import File
        # read image from InMemoryUploadedFile
        image_str = “”
        for c in i.chunks():
            image_str += c

        # create PIL Image instance
        imagefile  = StringIO.StringIO(image_str)
        image = Image.open(imagefile)

        # if not RGB, convert
        if image.mode not in (“L”, “RGB”):
            image = image.convert(“RGB”)

        #define file output dimensions (ex 60x60)
        x = 130
        y = 130

        #get orginal image ratio
        img_ratio = float(image.size[0]) / image.size[1]

        # resize but constrain proportions?
        if x==0.0:
            x = y * img_ratio
        elif y==0.0:
            y = x / img_ratio

        # output file ratio
        resize_ratio = float(x) / y
        x = int(x); y = int(y)

        # get output with and height to do the first crop
        if(img_ratio > resize_ratio):
            output_width = x * image.size[1] / y
            output_height = image.size[1]
            originX = image.size[0] / 2 - output_width / 2
            originY = 0
        else:
            output_width = image.size[0]
            output_height = y * image.size[0] / x
            originX = 0
            originY = image.size[1] / 2 - output_height / 2

        #crop
        cropBox = (originX, originY, originX + output_width, originY + output_height)
        image = image.crop(cropBox)

        # resize (doing a thumb)
        image.thumbnail([x, y], Image.ANTIALIAS)

        # re-initialize imageFile and set a hash (unique filename)
        imagefile = StringIO.StringIO()
        filename = hashlib.md5(imagefile.getvalue()).hexdigest()+’.jpg’

        #save to disk
        imagefile = open(os.path.join(‘/tmp’,filename), ‘w’)
        image.save(imagefile,’JPEG’, quality=90)
        imagefile = open(os.path.join(‘/tmp’,filename), ‘r’)
        content = File(imagefile)

        return (filename, content)

#views.py

    form = YourModelForm(request.POST, request.FILES, instance=profile)
        if form.is_valid():
            ob = form.save(commit=False)
            try:
                t = handle_uploaded_image(request.FILES[‘icon’])
                ob.image.save(t[0],t[1])
            except KeyError:
                ob.save() 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-08T16:38:07.013

我强烈推荐[sorl-thumbnail](https://github.com/sorl/sorl-thumbnail)应用程序来轻松透明地处理图像大小调整。它出现在我开始的每个 Django 项目中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-15T14:06:54.937

这是使用表格的完整解决方案。我为此使用了管理视图：

```
class MyInventoryItemForm(forms.ModelForm):

    class Meta:
        model = InventoryItem
        exclude = ['thumbnail', 'price', 'active']

    def clean_photo(self):
        import StringIO
        image_field = self.cleaned_data['photo']
        photo_new = StringIO.StringIO(image_field.read())

        try:
            from PIL import Image, ImageOps

        except ImportError:
            import Image
            import ImageOps

        image = Image.open(photo_new)

        # ImageOps compatible mode
        if image.mode not in ("L", "RGB"):
            image = image.convert("RGB")

        image.thumbnail((200, 200), Image.ANTIALIAS)

        image_file = StringIO.StringIO()
        image.save(image_file, 'png')

        image_field.file = image_file

        return image_field 
```

我的库存模型如下所示：

```
class InventoryItem(models.Model):

    class Meta:
        ordering = ['name']
        verbose_name_plural = "Items"

    def get_absolute_url(self):
        return "/products/{0}/".format(self.slug)

    def get_file_path(instance, filename):

        if InventoryItem.objects.filter(pk=instance.pk):
            cur_inventory = InventoryItem.objects.get(pk=instance.pk)
            if cur_inventory.photo:
                old_filename = str(cur_inventory.photo)
                os.remove(os.path.join(MEDIA_ROOT, old_filename))

        ext = filename.split('.')[-1]
        filename = "{0}.{1}".format(uuid.uuid4(), ext)
        return os.path.join('inventory', filename)
        #return os.path.join(filename)

    def admin_image(self):
        return '<img height="50px" src="{0}/{1}"/>'.format(MEDIA_URL, self.photo)
    admin_image.allow_tags = True

    photo = models.ImageField(_('Image'), upload_to=get_file_path, storage=fs, blank=False, null=False)
    thumbnail = models.ImageField(_('Thumbnail'), upload_to="thumbnails/", storage=fs,     blank=True, null=True) 
```

……

我结束了覆盖模型的保存功能，而不是保存照片和拇指，而不是仅仅调整照片的大小：

```
def save(self):

    # Save this photo instance first
    super(InventoryItem, self).save()

    from PIL import Image
    from cStringIO import StringIO
    from django.core.files.uploadedfile import SimpleUploadedFile

    # Set our max thumbnail size in a tuple (max width, max height)
    THUMBNAIL_SIZE = (200, 200)

    # Open original photo which we want to thumbnail using PIL's Image object
    image = Image.open(os.path.join(MEDIA_ROOT, self.photo.name))

    if image.mode not in ('L', 'RGB'):
        image = image.convert('RGB')

    image.thumbnail(THUMBNAIL_SIZE, Image.ANTIALIAS)

    # Save the thumbnail
    temp_handle = StringIO()
    image.save(temp_handle, 'png')  # image stored to stringIO

    temp_handle.seek(0)  # sets position of file to 0

     # Save to the thumbnail field
     suf = SimpleUploadedFile(os.path.split(self.photo.name)[-1],
        temp_handle.read(), content_type='image/png')  # reads in the file to save it

    self.thumbnail.save(suf.name+'.png', suf, save=False)

    #Save this photo instance again to save the thumbnail
    super(InventoryItem, self).save() 
```

两者都很好用，但取决于你想做什么:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-11T18:00:49.093

我知道这是旧的，但对于任何偶然发现它的人，有一个包，`django-thumbs`在[Django-thumbs - 与 StorageBackend 集成的 Django 的简单强大的缩略图](https://code.google.com/p/django-thumbs/)，它会自动生成您指定大小的缩略图，如果您不这样做，则不会生成。然后，您可以使用所需的尺寸调用所需的缩略图。

例如，如果您希望图像具有 64x64 和 128x128 的缩略图，您只需导入`thumbs.models.ImageWithThumbsField`，并使用它代替`ImageField`. 向字段定义添加一个参数`sizes=((64,64),(128,128))`，然后从您的模板中调用：

```
{{ ClassName.field_name.url_64x64 }} 
```

和

```
{{ ClassName.field_name.url_128x128 }} 
```

显示缩略图。瞧！所有工作都在这个包中为您完成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-28T19:19:20.010

如果您使用的是 Django Rest Framework，这可能会用到：

首先定义压缩和调整图像大小的函数

```
def compress_image(photo):
# start compressing image
image_temporary = Image.open(photo)
output_io_stream = BytesIO()
image_temporary.thumbnail((1250, 1250), Image.ANTIALIAS)

# change orientation if necessary
for orientation in ExifTags.TAGS.keys():
    if ExifTags.TAGS[orientation] == 'Orientation':
        break
exif = dict(image_temporary._getexif().items())
# noinspection PyUnboundLocalVariable
if exif.get(orientation) == 3:
    image_temporary = image_temporary.rotate(180, expand=True)
elif exif.get(orientation) == 6:
    image_temporary = image_temporary.rotate(270, expand=True)
elif exif.get(orientation) == 8:
    image_temporary = image_temporary.rotate(90, expand=True)

# saving output
image_temporary.save(output_io_stream, format='JPEG', quality=75, optimize=True, progressive=True)
output_io_stream.seek(0)
photo = InMemoryUploadedFile(output_io_stream, 'ImageField', "%s.jpg" % photo.name.split('.')[0],
                             'image/jpeg', getsizeof(output_io_stream), None)
return photo 
```

其次，现在您可以在 Serializers 中使用该功能：

```
class SomeSerializer(serializers.ModelSerializer):
def update(self, instance, validated_data):
    # сжимаем рисунок
    if 'photo' in validated_data:           
        validated_data.update({'photo': compress_image(validated_data['photo'])})

    return super(SomeSerializer, self).update(instance, validated_data)

def create(self, validated_data):
    # сжимаем рисунок
    if 'photo' in validated_data:
        validated_data.update({'photo': compress_image(validated_data['photo'])})

    return super(SomeSerializer, self).create(validated_data) 
```

# javascript - 拖动时克隆节点

> ID：623703
> 
> 赞同：21
> 
> 时间：2009-03-08T15:04:40.950
> 
> 标签：javascript, jquery, clone, draggable

我希望能够创建我要拖动的元素的副本。我使用标准的 ui 可拖放。我知道助手克隆选项。但这不会创建副本。拖动的项目恢复到原始位置。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-03-08T16:26:27.760

标记，

试试这个例子：

```
 $(document).ready(function(){
        $(".objectDrag").draggable({helper:'clone'});  

        $("#garbageCollector").droppable({
            accept: ".objectDrag",
            drop: function(event,ui){
                    console.log("Item was Dropped");
                    $(this).append($(ui.draggable).clone());
                }
        });

    }); 
```

Html 看起来像这样

```
 <div class="objectDrag" 
        style="width:10%; color:white;border:black 1px solid; background-color:#00A">Drag me</div>

    <div id="garbageCollector" style="width:100%; height:400px; background-color:#333; color:white;"> Drop items on me</div> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2011-01-13T14:39:41.293

由于我（还）无法发表评论，因此我将把它作为一个单独的答案 - 以防有人像我一样发现这个问题：

对于评论中的问题

“但我希望克隆/删除的元素位于它被删除的相同位置。你知道我该怎么做吗？”

我在不同的 SO 问题中找到了解决方案，答案是更改此行：

```
 $(this).append($(ui.draggable).clone()); 
```

到

```
 $(this).append($(ui.helper).clone()); 
```

（将 ui.draggable 更改为 ui.helper）

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-03-01T13:05:11.253

要重新拖动克隆/副本，请将`withDataAndEvents`参数设置为*true*：

```
$(this).append($(ui.draggable).clone(*true*)); 
```

# c# - 如何将事件传递给 C# 中的函数？

> ID：623716
> 
> 赞同：20
> 
> 时间：2009-03-08T15:16:14.107
> 
> 标签：c#, delegates

我希望将事件传递给辅助函数。此函数会将方法附加到事件。但是，我无法正确通过该活动。我试过通过一个`EventHandler<TEventArgs>`. 它可以编译，但未附加事件（但仍会添加；似乎制作了事件处理程序的副本）。

例如，如果我有这个：

```
public event EventHandler<EventArgs> MyEvent; 
```

和辅助功能：

```
public static void MyHelperFunction<TEventArgs>(EventHandler<TEventArgs> eventToAttachTo)
{
    eventToAttachTo += (sender, e) => { Console.WriteLine("Hello world"); };
} 
```

和来电者：

```
MyHelperFunction(MyEvent);
MyEvent(null, new EventArgs()); // Does nothing. 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-08T15:21:34.217

这不起作用的原因是 += 当应用于委托时会创建一个新委托，它是旧委托和新委托的组合。它不会修改现有的委托。

为了使它起作用，您必须通过引用传递委托。

```
public static void Helper(ref EventHandler<EventArgs> e)
{
    e+= (x,y) => {};
} 
```

这在方法之外起作用的原因是因为 LHS 仍然是实际字段。所以 += 将创建一个新的委托并分配回成员字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-12-01T12:57:57.490

刚刚想出了这个小帮手。如果它是您自己创建的事件，您可以使用这样的包装器。您可以像往常一样使用 += 运算符附加处理程序，但可以传递包装器，甚至可以从其他地方引发事件。

```
public class GenericEvent<T> where T:EventArgs
{
    public event EventHandler<T> Source = delegate { };

    public void Raise(object sender, T arg = default(T))
    {
        Source(sender, arg);
    }

    public void Raise(T arg = default(T))
    {
        Source(this, arg);
    }

    public void AddHandler(EventHandler<T> handler)
    {
        Source += handler;
    }

    public void RemoveHandler(EventHandler<T> handler)
    {
        Source -= handler;
    }

    public static GenericEvent<T> operator +(GenericEvent<T> genericEvent, EventHandler<T> handler)
    {
        genericEvent.AddHandler(handler);
        return genericEvent;
    }
} 
```

创建事件，如：

```
public GenericEvent<EventArgs> MyEvent = new GenericEvent<EventArgs>(); 
```

附加处理程序：

```
MyEvent += (s,e) => {}; 
```

提升事件：

```
MyEvent.Raise(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T15:19:53.817

只是猜测：您是否尝试过将其作为参考传递？

```
public static void MyHelperFunction<TEventArgs>(ref EventHandler<TEventArgs> eventToAttachTo)

MyHelperFunction(ref MyEvent); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-06-21T09:52:44.027

这不是很好，但你可以使用反射来做到这一点。

```
 public EventMonitor(object eventObject, string eventName)
    {
        _eventObject = eventObject;
        _waitEvent = eventObject.GetType().GetEvent(eventName);

        _handler = new EventHandler(SetEvent);
        _waitEvent.AddEventHandler(eventObject, _handler);
    } 
```

其中 eventObject 是包含事件的对象，eventName 是事件的名称。SetEvent 是您的事件处理程序。

我也有这样的处置方法：

```
 public void Dispose()
    {
        _waitEvent.RemoveEventHandler(_eventObject, _handler);
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-11-11T21:32:13.553

我有一个解决方案，我有两个接口。第一个接口具有绑定某些事件的方法，而另一个接口具有可以绑定到这些事件的事件方法。

第一个接口的绑定方法将第二个接口作为参数，这使得将事件绑定到任何实现第二个接口的类的事件方法成为可能。

这是可以理解的，还是您更喜欢一些代码？:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-10-27T17:58:16.143

正如许多人所指出的，将事件传递给方法要么是不可能的，要么并不简单。

1.  请澄清，但我怀疑您的预期用途将类似于：

    ```
    void Register()
    {
        var super = new SuperHandler();

        //not valid syntax:
        super.HandleEvent(MyEvent1);
        super.HandleEvent(MyEvent2);
        super.HandleEvent(MyEvent3);
        super.HandleEvent(MyEvent4);
    } 
    ```

    您可以简单地通过使您的预期通用事件处理程序可公开访问（或在内部，如果您愿意）来实现：

    ```
     public static class GenericHandler
     {
         public static void HandleAnyEvent(object sender, EventArgs e)
         {
             //handle
         }
     }

     public class SomeClass
     {
         void RegisterEvents()
         {
             var r = new EventRaiser();

             r.ImportantThingHappened += GenericHandler.HandleAnyEvent;
         }
     } 
    ```

    在此示例中，我的包罗万象的处理程序位于静态类中，但您也可以使用非静态类。另外，我看到在您的示例中，您已将方法设为通用（TEventArgs）。因为所有 EventHandler 派生类（例如 CancelEventHandler）都与基本 EventHandler 匹配，所以您不需要涉及泛型（也不会有帮助）。

2.  如果注册逻辑很复杂或者您必须保持 EventHandler 私有，请考虑使用**接口事件**。这可能无法满足您减少代码量的预期目标，但它将允许您创建一个可以可预测地处理特定类型的所有事件的类。

    ```
    interface IRaiseEvents
    {
        event EventHandler ConnectionCreated;
        event EventHandler ConnectionLost;
    }

    public class SuperHandler
    {
        void RegisterEvents(IRaiseEvents raiser)
        {
            raiser.ConnectionCreated += (sender, args) => Console.WriteLine("Connected.");
            raiser.ConnectionLost += (sender, args) => Console.WriteLine("Disconnected.");
        }
    } 
    ```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-06T00:45:03.667

传递类似 Action e = e => myevent += e; 并使用处理程序从方法调用？它具有使用 .NET 类的好处。

# c# - 为 codeDOM 文件设置文件版本

> ID：623717
> 
> 赞同：2
> 
> 时间：2009-03-08T15:18:06.863
> 
> 标签：c#, file, version, codedom

我正在寻找任何方法来设置使用 codeDOM 生成的 exe 文件的文件版本。我的总是以 0.0.0.0 的形式出现。以编程方式显然是首选，但在这一点上，任何事情总比没有好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-08T15:25:56.860

已编译程序集的版本由 AssemblyFileVersion 属性控制。您只需要确保在编译时将其作为 CodeDom 树的一部分包含在内。

您可以通过将属性添加到 CodeCompileUnit AssemblyCustomAttributes 成员来设置它。

```
 CodeCompileUnit unit = CreateMyUnit();
    var attribute = new CodeAttributeDeclaration(
        new CodeTypeReference(typeof(AssemblyFileVersionAttribute)));
    attribute.Arguments.Add(
        new CodeAttributeArgument(
            new CodePrimitiveExpression("1.1.1.1")));
    unit.AssemblyCustomAttributes.Add(attribute); 
```

# ios - 重新安装开发堆栈

> ID：623720
> 
> 赞同：2
> 
> 时间：2009-03-08T15:19:27.873
> 
> 标签：ios, xcode, development-environment, keychain

我需要将我的 iPhone 开发堆栈重新定位到另一台机器上。我需要做什么准备，有什么陷阱吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T15:38:29.543

您需要从 Keychain Access 导出和传输用于签名的私钥。

请参阅“计划门户”提供的“计划门户用户指南”中的第 10 页，您可以在 apple.com 上管理您的证书

# iphone - 如何使用 iPhone SDK 下载大文件并避免内存使用问题？

> ID：623735
> 
> 赞同：21
> 
> 时间：2009-03-08T15:30:15.537
> 
> 标签：iphone, memory-management, nsurlconnection

我正在使用`NSURLConnection`该类在我的 iPhone 应用程序中下载一个大文件，但它经常崩溃，因为它使用了太多内存。我正在做通常的`NSURLConnection`用法，将接收到的数据附加到一个`NSMutableData`对象。

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.fileData appendData:data];
} 
```

然后在我完成下载整个文件后，将其保存到本地临时文件，并将其作为映射文件读取，如下所示：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    // save the downloaded data into a temporary file
    NSString *tempPath = NSTemporaryDirectory();
    NSString *tempFile = [tempPath stringByAppendingPathComponent:@"temp.pdf"];
    [self.fileData writeToFile:tempFile atomically:YES];
    NSData *mappedData = [NSData dataWithContentsOfMappedFile:tempFile];

    NSURL *baseURL = [NSURL URLWithString:@"http://mydomain.com"];
    [webView loadData:mappedData MIMEType:@"application/pdf" textEncodingName:@"UTF-8" baseURL:baseURL];
} 
```

我可以在这里改进什么来避免这些内存使用问题？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2010-02-02T12:38:57.450

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse*)response {

    filename = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:save_name]; // filename is in .h file

    [[NSFileManager defaultManager] createFileAtPath:filename contents:nil attributes:nil];
        file =
[[NSFileHandle fileHandleForUpdatingAtPath:filename] retain];// file is in .h 

//if (file)     {
//
//      [file seekToEndOfFile];
//  }
 }

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSD
ata *)data {

 if (file)  { 

        [file seekToEndOfFile];

    } [file writeData:data]; 

}

- (void)connectionDidFinishLoading:(NSURLConnection*)connection { 

[file closeFile]; 

} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-03-08T16:45:05.577

如果它那么大，为什么不将它写入文件，而不是将其保存在 NSData 对象中？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-12-21T06:00:04.767

我正在使用

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    filename = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:save_name];
    NSFileHandle *file1 = [NSFileHandle fileHandleForUpdatingAtPath: filename];
    [file1 writeData: data];
    [file1 closeFile];
} 
```

# gcc - 我的 _bittestandset 版本有什么问题

> ID：623737
> 
> 赞同：0
> 
> 时间：2009-03-08T15:31:35.580
> 
> 标签：gcc, assembly, intrinsics

我是汇编语言的新手。似乎 gcc 在 intrin.h 中没有像 MSVC 那样的 _bittestandset 函数，所以我实现了一个新函数。这个在linux下工作正常，但是在winVista机器上的mingw就出错了，代码是：

```
inline unsigned char _bittestandset(unsigned long * a, unsigned long b)
{
    __asm__ ( "bts %1, %[b]"
          : "=g"(*a)
          : [b]"Ir"(b), "g"(*a) );
    return 0;
}
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T16:27:53.700

您能否进一步解释什么不起作用？也许是一个简单的用法示例。很难猜出代码有什么问题..

到目前为止看起来很俗气的一件事：您执行了位测试操作码，但忽略了结果。您测试（和设置）的位最终出现在操作码之后的进位标志中。

如果你想得到结果，你需要一条额外的指令来将进位标志放入其他输出寄存器。（SBB EAX、EAX 或类似的东西）。

否则 - 如果您不需要结果 - 用三个更简单的汇编器操作码替换 BTS 指令要便宜得多：

这些方面的东西：

```
 ; bit-index in cl
  ; Value in ebx
  ; eax used as a temporary (trashed)
  mov eax, 1
  shl eax, cl
  or  ebx, eax 
```

由于我没有 mingw 与您运行简单测试用例的汇编输出的确切版本可以给我们一些线索，知道出了什么问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-06-30T21:03:29.423

不要使用 BTS 指令。它慢得可怕。更好的方法是使用简单的 shift+or 来实现它。作为奖励，您可以在没有任何汇编的情况下使用纯可移植的 C++ 来完成它。

# c# - SocketAsyncEventArgs 和 ReadAsync

> ID：623739
> 
> 赞同：4
> 
> 时间：2009-03-08T15:34:07.853
> 
> 标签：c#, networking, sockets

当使用“SocketAsyncEventArgs”类和 ReadAsync 时，我在哪里放置读取缓冲区以及在哪里放置发送缓冲区？或者我只能一次阅读或发送而不是两者？我有点困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-08T15:43:58.953

我认为您正在寻找 的`Buffer`财产`SocketAsyncEventArgs`。[本](http://www.codeproject.com/KB/IP/socketasynceventargssampl.aspx)教程解释了如何`SocketAsyncEventArgs`正确使用该类。

该课程的[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketasynceventargs.aspx#)包含一些有用的注释并提供示例代码（它们几乎总是一个好的开始）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T11:50:26.747

您一次只能将 SocketAsyncEventArgs 用于单个操作。

要同时读取和写入异步，您需要两个 SocketAsyncEventArgs 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-20T03:17:57.887

请参阅[http://www.codeproject.com/KB/cs/socketasynceventargs.aspx](http://www.codeproject.com/KB/cs/socketasynceventargs.aspx)

# php - 在 IIS 7 上托管 Drupal 6 站点时的 .htaccess 文件？

> ID：623741
> 
> 赞同：0
> 
> 时间：2009-03-08T15:37:06.443
> 
> 标签：php, iis, drupal, .htaccess, iis-7

我想使用附带的 IIS 7 Web 服务器在我们的 Windows 2008 服务器上运行 Drupal 6。有一些博客提供了有关这样做的各种说明，但是当我尝试使用 IIS 7 创建 Drupal 站点和/或激活某些模块时，我收到有关创建文件夹和/或丢失 .htaccess 文件的错误消息。

看起来 Drupal 依赖 .htaccess 文件来配置 Drupal 实例的一些安全性。

尝试在 IIS 7 上运行 Drupal 6 时是否会破坏交易？有人真的在 IIS 7 下运行生产 Drupal 6 站点吗？

道格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-09T09:22:16.583

在部署 Drupal 方面，IIS 7 大大优于早期版本。一方面，它现在包含一个等价于`mod_rewrite`“URL 重写模块”，并且可以从其管理控制台（一如既往）和相当容易理解的 XML 文件 (web.config) 进行配置，并不比.htaccess 文件。您不再需要 ISAPI_Rewrite。

[http://www.iis.net/downloads/default.aspx?tabid=34&g=6&i=1691](http://www.iis.net/downloads/default.aspx?tabid=34&g=6&i=1691)

但是，它不会自动考虑 .htaccess 文件，这意味着访问控制仍然是您必须手动配置的东西。

关于 .htaccess 到 web.config 过程的好教程： [http ://learn.iis.net/page.aspx/557/notes-on-translating-htaccess-files-to-webconfig/](http://learn.iis.net/page.aspx/557/notes-on-translating-htaccess-files-to-webconfig/)

话虽如此，对于商业部署，您可能仍希望使用受支持的 Apache 堆栈，例如 Zend Server。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T17:09:11.007

就个人而言，我不认为 IIS 是面向公众的 Drupal 站点的合理解决方案。您也许可以让它工作，但是您将花费大量额外的时间来配置东西，因此学习配置 Apache 是值得的。

# c# - 从 C# 迁移到 VB.Net

> ID：623747
> 
> 赞同：15
> 
> 时间：2009-03-08T15:45:59.573
> 
> 标签：c#, vb.net

因此，作为这场全球金融喧嚣的直接结果，我明天将开始一份新的工作，担任 VB.net 开发人员。到目前为止，我一直在用 C# 进行开发（这里和那里的一些 java、vb6、sql、tibco 等）

所以问题是，有什么需要注意的问题，有没有人对编写好的 vb.net 代码有什么好的建议？

（欢迎任何其他关于应对工资/前景下降的建议，但不是必需的；-)）

* * *

只是一个**快速更新**，公司似乎真的很好，当前的代码库似乎质量很高。我开始适应 VB 做事的方式（但不能阻止自己到处添加分号！）。再次感谢大家的有益建议。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-08T16:33:14.840

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-08T16:14:44.557

只是一个小细节作为警告。如果在 VB.NET 中声明一个数组，括号中的数字表示上限，而不是元素的计数：

```
Dim monthNames(11) As String
Console.Write(monthNames.Count) 
```

输出为“12”。

不是

```
Dim monthNames(12) as String
Console.Write(monthNames.Count) 
```

输出为“13”。

* * *

我建议您阅读Kathleen Dollard 撰写的**这篇博文。**

[C# 程序员在编写 VB 之前应该知道什么](http://msmvps.com/blogs/kathleen/archive/2008/07/25/what-a-c-coder-should-know-before-they-write-vb-updated.aspx)

她的第一个建议是：

> 1）在你开始之前克服尊重或退出。VB.NET 是一门很棒的语言。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-08T15:54:28.040

VB.Net 是.Net 语言，它与C# 相同，但带有vb 的味道。4年前我遇到过和你一样的情况，我只是用vb.net写，我很害怕，但是当我开始写的时候我发现我很好，它和C#一样，只是在前几个你会写“;”的行 和“{}”，但几分钟后，你会觉得它很正常。

所以我的建议不要觉得你会写 VB.Net，你会写 .Net 但有新的风格。

可能您需要了解非常简单的部分： 如何编写函数 如何声明变量 如何创建事件

当然，C# 和 VB.Net 之间的差异不仅仅是语法上的差异，但您自己会很快掌握它们。

还有一些转换器可以帮助您更快地编码：

[将 VB.Net 转换为 C#，将 C# 转换为 VB.Net 工具](http://amrelgarhy.com/blog/convert-vb-net-to-c-c-to-vb-net-tools/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-08T16:26:11.863

应特别注意[My 命名空间](http://msdn.microsoft.com/en-us/vbasic/ms789188.aspx)：它在`C#`命名法中以某种方式缺失，因此从那里开始您可能会错过这个重要的工具。

> Visual Basic 中的 My 命名空间公开属性和方法，使您能够轻松利用 .NET Framework 的强大功能。My 命名空间简化了常见的编程问题，通常将一项艰巨的任务减少到一行代码。此外，My 命名空间是完全可扩展的，因此您可以自定义 My 的行为并将新服务添加到其层次结构中以适应特定的应用程序需求。
> 
> 提供对信息和常用功能的访问的三个中心 My 对象是 My.Application 对象、My.Computer 对象和 My.User 对象。您可以使用这些对象分别访问与当前应用程序、安装应用程序的计算机或应用程序的当前用户相关的信息。

[使用 My.Application、My.Computer 和 My.User 执行任务](http://msdn.microsoft.com/en-us/library/ms233845.aspx)的示例：

```
' Displays a message box that shows the full command line for the
' application.
Dim args As String = ""
For Each arg As String In My.Application.CommandLineArgs
    args &= arg & " "
Next
MsgBox(args) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-08T16:02:47.533

当我从 VB 切换到 C# 时，我发现[这个参考很方便，我希望它反过来也会有帮助。](http://www.harding.edu/fmccown/vbnet_csharp_comparison.html)因此，这可能有助于您正在经历的过渡的句法部分。肯定不是过渡中最困难的部分，但希望它可以提供帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-08T16:48:13.370

+1 for option strict.

I went from VB.Net to C# and was initially a little scared I wouldn't be able to pick it up. If you know the .Net framework you will be fine, just keep Google handy for any syntax you are unsure of.

Good luck.

# emacs - 如何让我的 Emacs *总是*在 X11 上使用 6x13

> ID：623748
> 
> 赞同：13
> 
> 时间：2009-03-08T15:46:21.397
> 
> 标签：emacs, fonts, gtk, x11

我最近宣布 .emacs 破产并重新组织了我的 init 内容。在这个过程中，我删除了我多年来积累的所有 hacky 字体选择的东西，认为在最现代的 emacs 版本中可能有更简单的方法来完成我想要的。

```
GNU Emacs 23.0.91.1 (i686-pc-linux-gnu, GTK+ Version 2.14.4)
on a GNU/Linux System (Ubuntu 8.10). 
```

让我们暂时忽略这样一个事实，即我也在 Mac OS X（GUI+终端）下运行 emacs，偶尔在 Windows 上运行 emacs，只关注 X11 案例：

（背景：从我记事起，6x13 字体就一直是 X11 的一部分。（又名 misc-fixed semi-condensed ...）。它是一种位图字体。）

*   我希望 emacs 始终使用 X11 位图字体 6x13。（这给了我上网本上相邻的两个缓冲区。）
*   我不想在我的上网本上看到 DejaVu Sans Mono 16pt 或默认出现的任何内容（它很大！）
*   我希望每个新框架和窗口都使用这种字体。
*   我希望派生面孔（如 org-mode-column）使用 6x13 字体，而不是神秘地切换回 DejaVu Sans Mono
*   我不在乎 GNOME 和 X11 认为我的屏幕的逻辑 DPI 是什么。我想要 6x13。
*   当我远程进入我的上网本（NX 机器）时，我不想看到 6x10。我想要 6x13。
*   如果有任何疑问：*我想要 6x13*。

实现这一目标的规范方法是什么？

在一些聪明人告诉我菜单之前：选项>>设置默认字体：结果对话框甚至不提供位图字体，因此无法选择 6x13。此外，它并没有解决 org-mode 的问题：table-views 仍然会出现错误的字体。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-08T17:31:07.807

我从我的`.Xresources`文件中控制这些东西。

我个人有

```
emacs.reverseVideo:     true
emacs.font:             7x13bold 
```

（我非常同意......位图字体万岁！我会带着我`xterm`的

```
XTerm*foreground:       green
XTerm*background:       black
XTerm*font:             7x13bold 
```

...任何一天都可以通过 Gnome 终端）。

如果您在`.Xresources`会话中使用，`xrdb`命令对于重新加载它们很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T17:04:40.180

您想在 .emacs 中设置默认帧参数。

*   找出您要使用的字体的名称
*   将所需的值添加到`default-frame-alist`.

最简单的方法，其实就是使用customize和customize default-frame-alist，但也可以使用elisp和write

```
(setq default-frame-alist 
   '(font . "-*-*-medium-r-normal--16-*-*-*-*-*-fontset-hiramin_w6")) 
```

这是从我的 emacs 中偷来的，您需要找到所需字体的完整字体名称（xfontsel？）。

另请参阅[EmacsWiki](http://www.emacswiki.org/emacs/SetFonts)关于设置字体和面孔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T21:33:02.813

对于使用最近的 Linux 发行版阅读本文的任何人，您必须先安装 6x13（是的，听起来很明显..）。[如果您跳过 apt-getting 随机字体，这里有针对 Ubuntu/Debian 的说明](http://ptspts.blogspot.co.uk/2010/06/how-to-enable-bitmap-fonts-on-ubuntu.html)，这些说明也应该适用于其他发行版。从那里安装“FixedSC”.tgz（它解压缩到 /usr/local/share/fonts），然后按照说明将其添加到字体缓存中，这样它就会出现在 Gnome 字体选择对话框中。

# xml - Visual Studio XSD 工具：生成集合而不是数组

> ID：623749
> 
> 赞同：7
> 
> 时间：2009-03-08T15:46:34.360
> 
> 标签：xml, visual-studio, xsd, code-generation

我使用 Visual Studio XSD 实用程序从 XSD 生成了一些 C# 类，它生成了用于存储元素集合的数组，而不是内置的通用 Collection<T>（或相关）类之一。

xsd /? 中没有提到任何命令行参数 提到任何关于生成集合而不是数组的事情，但我知道这可以通过 Visual Studio 生成的 Web 服务代理类来完成，所以我认为它一定是可能的。

有人知道如何让 XSD 实用程序生成集合类而不是数组吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-05-09T20:06:24.347

在寻找答案时发现了这篇文章。我正在使用这个工具：http: [//xsd2code.codeplex.com/](http://xsd2code.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T15:55:54.727

问题在于 XSD 与 XML 语言无关。它不能使用其他不支持的 Java 或 C# 中的任何内容。数组是最小的公分母。

Java 开发人员使用 OXM 库（如 XStream）将对象编组为 XML 并返回。它允许您在从对象到 XML 时指定自定义类型。听起来您必须在 .NET 工具箱中找到类似的东西。

这不是您问题的答案，但这就是我认为 XSD 无法完成这项工作的原因。就像 Java 开发人员接触 XStream 一样，您必须另寻他处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T19:47:06.280

您已经看到了将集合与服务引用（而不是 Web 引用）一起使用的能力。请查看 svcutil.exe 实用程序。看起来 svcutil /t:code file.xsd 可能会为您执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-08T21:33:08.957

不幸的是，目前我不知道有任何工具可以可靠地做到这一点。

有一个 XSDObjectGen（或类似的东西），但该工具似乎已经从网络空间中消失了 :-(

我看到一种方法使用 XSDTidy 在 XSD 工具的输出上应用一种将所有 int[] 替换为 List 的方法 - 似乎有效，但似乎有点笨拙。

这是[关于 XSDTidy 的 CodeProject 文章](http://www.codeproject.com/KB/cs/xsdtidy.aspx)。

我一直试图再次找到的是一位绅士的博客文章，他基本上剖析了 XSD 在 Reflector 中的内部工作原理，然后利用他在这方面获得的知识构建了自己的工具，使用了大量 .NET 核心类。如果我没记错的话，就是[这里的这篇博文（“writing your own xsd.exe”）](http://mikehadlow.blogspot.com/2007/01/writing-your-own-xsdexe.html)。Mike 并没有完全按照您的要求进行操作（创建列表而不是数组），但这可能是一个起点。

马克

# regex - 在 Linux 文件系统上查找非 UTF8 文件名

> ID：623764
> 
> 赞同：8
> 
> 时间：2009-03-08T15:57:56.203
> 
> 标签：regex, linux, find, grep

我的 LANG=en_US:UTF-8 文件系统中隐藏了许多文件，这些文件已上传，文件名中包含无法识别的字符。

我需要搜索文件系统并返回至少有一个字符不在标准范围内的所有文件名（a-zA-Z0-9 和 .-_ 等）

我一直在努力追随，但没有运气。

```
find . | egrep [^a-zA-Z0-9_\.\/\-\s] 
```

我正在使用 Fedora Code 9。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-08T16:03:30.950

[`convmv`](http://www.j3e.de/linux/convmv/man/)你可能会感兴趣。它不仅可以找到这些文件，还支持将它们重命名为正确的文件名（如果它可以猜出问题所在）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-02-01T09:48:25.187

```
find . | perl -ne 'print if /[^[:ascii:]]/' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T16:25:39.710

> 寻找 。| egrep [^a-zA-Z0-9_./-\s]

危险，壳逃逸！

bash 将解释最后一个参数，删除一级反斜杠转义。尝试在 "[^group]" 表达式周围加上双引号。

当然，这也比 UTF-8 更不允许。可以构造一个正则表达式来匹配有效的 UTF-8 字符串，但它相当难看[。](http://www.w3.org/International/questions/qa-forms-utf-8)如果你有 Python 2.x 可用，你可以利用它：

```
import os.path
def walk(dir):
    for child in os.listdir(dir):
        child= os.path.join(dir, child)
        if os.path.isdir(child):
            for descendant in walk(child):
                yield descendant
        yield child

for path in walk('.'):
    try:
        u= unicode(path, 'utf-8')
    except UnicodeError:
        # print path, or attempt to rename file 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2010-11-28T05:17:44.840

我遇到了与 OP 类似的问题，我在 Superuser 上获得了一个[解决方案](https://stackoverflow.com/questions/4360151/using-find-or-grep-to-locate-filenames-with-accented-characters-from-a-different/4362626#4362626)（另请参阅[进一步的评论](https://superuser.com/questions/218825/using-find-or-grep-to-locate-filenames-with-accented-characters-from-a-different/218831#218831)），我发现它比“convmv 解决方案”更令人满意，尽管我很高兴也发现了 comvmv。

# c# - .NET .application 安装程序文件？

> ID：623765
> 
> 赞同：3
> 
> 时间：2009-03-08T15:59:02.660
> 
> 标签：c#, .net-3.5

我最近看到网络上出现了 .application 文件，用于 .NET 安装。（应用程序清单，根据扩展详细信息）。

究竟如何在 Visual Studio 中创建这些 .application 文件，它们与标准 Windows 设置有何不同？请赐教。

我是一名 C# 开发人员，但以前从未使用过 .application 安装程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-08T16:01:22.250

> 究竟是如何在 Visual Studio 中创建这些 .application 文件的？

**执行单击一次部署时会自动创建**.application文件。****

 **对于单击一次部署，您可以

*   右键单击要发布的项目，然后选择*发布*菜单项。

    - 或者 -

*   右键单击项目，选择属性，转到*发布*选项卡进行发布。

> 它们与标准 Windows 设置有何不同？

您将通过在解决方案中创建**安装项目**来创建标准 Windows 安装程序。而且它们的不同之处在于，对于单击一次，最终用户不必在本地计算机上安装程序。您可以从 MSDN 了解更多关于它们之间的差异

*   [在 ClickOnce 和 Windows Installer 之间进行选择](http://msdn.microsoft.com/en-us/library/ms973805.aspx)

# php - PHP 是否具有检测其运行的操作系统的功能？

> ID：623776
> 
> 赞同：9
> 
> 时间：2009-03-08T16:05:10.167
> 
> 标签：php, operating-system, newline

我不知道在 PHP 数据库中用什么关键字来查找它，所以我在这里问。

我想知道的原因是因为不同的操作系统如何处理文本文档中的新行。

我在 Windows 中使用 CSV 文件，但每次我想我添加一个新行时，真正发生的是新行被粘贴到最新行的后面。

原因是，在 Windows 中，一个新行是这样的：`\r\n` 而我正在使用的 CSVHandler.class.php 文件只添加`\n`

但是，在 MAC OS X 中，这是新行，与 windows 不同。

所以我正在寻找这个，所以我可以实现一个简单的`if()`语句并解决这个问题。目前我已经硬编码了`\r\n`，但它应该更简单，不是吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-03-17T21:59:09.577

> *“顺便说一句，*nix OS 使用 \n 作为换行符。Mac 使用 \r，Windows - \r\n”*

啊！请停止延续这个神话！

Mac OS 9 像 10 年前一样使用它，但现在没有人使用 OS9。MACS 使用 UNIX 行结尾。\n。今天使用的“Mac”应该是指现代计算机，就像“Windows”是指 XP 或 vista 一样，除非另有限定。

说 Mac 使用 \r 与说“Windows 在 MS-DOS 之上运行，仅支持 FAT16 文件系统，并且不支持 64 位”一样正确。

在任何情况下，任何人都不应该将 \r 用于任何事情。除非他们针对的是老式 Mac。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-03-08T16:12:01.740

PHP 已包含常量[PHP_EOL](http://us3.php.net/manual/en/reserved.constants.php)用于解决您面临的问题，自 php 4.3.10 和 PHP 5.0.2 起可用 - 它包含适用于运行 PHP 的服务器的行尾序列。

如果您想使用适合特定客户端的不同行尾序列，那么您必须自己编写代码。确定客户端操作系统的一种方法是使用[get_browser](http://us3.php.net/manual/en/function.get-browser.php)，假设您的服务器具有最新的[browscap.ini](http://browsers.garykeith.com/downloads.asp)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2010-11-08T15:18:28.607

您可以使用预定义的常量**PHP_OS**。

我正在使用

> 如果（PHP_OS === 'WINNT'）{...}

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-18T08:33:11.470

服务器操作系统信息可以通过以下`php_uname()`函数获取：

```
echo 'I have been run on '.php_uname('s'); 
```

它还允许检索版本的完整信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-08T16:06:50.693

检查 $_SERVER 变量。

```
echo "<pre>";
print_r($_SERVER); 
```

然后，您可以使用 strstr（或任何字符串比较函数）检查您是否在 Windows 上。在这个例子中，我检查了 SERVER_SIGNATURE 但你可以使用任何你想要的键。

```
$isWindows = strstr($_SERVER[SERVER_SIGNATURE], "Win32") !== FALSE; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-08T16:23:46.813

您可能还想调用 php info 来查看 PHP 设置中的许多配置设置，代码很简单：

```
phpinfo(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-11-19T03:30:55.063

据我所知，如果 PHP 在 Windows 上运行，将会有一个名为 WINDIR 的环境变量。我认为你可以这样做：

```
$isWindows = isset($_SERVER['WINDIR']); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-07-05T21:04:11.813

有很多答案，但这是我的 2cents：

```
function windows_server()
#   Purpose:    Check if server is Windows
{
    return in_array(strtolower(PHP_OS), array("win32", "windows", "winnt"));
}

## --------------------------------------------------------

function linux_server()
#   Purpose:    Check if server is Linux
{
    return in_array(strtolower(PHP_OS), array("linux", "superior operating system"));
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-10-07T21:24:17.490

我推荐[php_uname](http://us.php.net/manual/en/function.php-uname.php)。只需阅读文档中的解释：

> php_uname — 返回有关 PHP 正在运行的操作系统的信息

我确实喜欢上面**PHP_OS**的建议，但要小心，根据文档中的这个注释：

> ***考虑使用 PHP_OS 常量，但请记住，此常量将包含构建***PHP 的操作系统。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-08T16:25:28.870

读取时最安全的做法可能是确定文件本身的行尾字符，或者可互换地接受所有行尾。如果您将 csv 文件从一台机器复制到具有不同操作系统的另一台机器，这可以保护您免受伤害。如果您在写入之前阅读，则可以使输出的行尾与您在阅读时确定的行尾匹配。

对于 CSV 文件，php 有一些库函数。尝试在 php.net 中搜索 fgetcsv 和 fputcsv。有可以在 php.ini 中设置的 auto_detect_line_endings，但我不知道它是如何工作的细节。

我总是在 linux 和 windows 上单独使用“\n”。我使用记事本在 Windows 中编辑它们，并且不会破坏结尾。对于我自己对 csv 的使用，我发现支持不同的结局太麻烦了，但如果它是用户必须与之交互的东西，那么你想要安全而不是方便。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-11-28T00:35:13.750

```
<?php
$OSList = array
(
        // Match user agent string with operating systems
        'Windows 3.11' => 'Win16',
        'Windows 95' => '(Windows 95)|(Win95)|(Windows_95)',
        'Windows 98' => '(Windows 98)|(Win98)',
        'Windows 2000' => '(Windows NT 5.0)|(Windows 2000)',
        'Windows XP' => '(Windows NT 5.1)|(Windows XP)',
        'Windows Server 2003' => '(Windows NT 5.2)',
        'Windows Vista' => '(Windows NT 6.0)',
        'Windows 7' => '(Windows NT 7.0)',
        'Windows NT 4.0' => '(Windows NT 4.0)|(WinNT4.0)|(WinNT)|(Windows NT)',
        'Windows ME' => 'Windows ME',
        'Open BSD' => 'OpenBSD',
        'Sun OS' => 'SunOS',
        'Linux' => '(Linux)|(X11)',
        'Mac OS' => '(Mac_PowerPC)|(Macintosh)',
        'QNX' => 'QNX',
        'BeOS' => 'BeOS',
        'OS/2' => 'OS/2',
        'Search Bot'=>'(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves/Teoma)|(ia_archiver)'
);

// Loop through the array of user agents and matching operating systems
foreach($OSList as $CurrOS=>$Match)
{
        // Find a match
        if (eregi($Match, $_SERVER['HTTP_USER_AGENT']))
        {
                // We found the correct match
                break;
        }
}
// You are using Windows Vista
echo "You are using ".$CurrOS;
?> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-02-01T16:24:18.223

```
$svr_os=strtolower(reset(explode(' ',php_uname('s'))));

$isLinux=$svr_os==='linux';

$isWindows=$svr_os==='windows'; 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2009-03-08T16:14:42.357

另外，试试这个功能：

```
$b = get_browser(null, true); 
```

并且在 $b['platform'] 中将是 OS。

顺便说一句，*nix OS 使用 \n 作为新行。Mac 使用 \r，Windows - \r\n

# javascript - SWFUpload ASP.Net 示例站点不起作用？

> ID：623778
> 
> 赞同：1
> 
> 时间：2009-03-08T16:06:05.500
> 
> 标签：javascript, asp.net, swfupload

[http://swfupload.org/node/7/release](http://swfupload.org/node/7/release)

.Net 2.0 示例不工作，有没有人遇到过同样的事情并且能够让它工作？

解决方案正在编译，默认页面在 FireFox 中正常打开，但是当我单击按钮时没有任何反应，并且在 IE 中该按钮根本没有出现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-02-04T17:22:17.293

SWFUploader 的一些注意事项是，虽然有一个 .Net 测试项目，但它有点失误，并且比实际需要的要多得多，如果您想上传图像但没有进度条或允许文件上传。

[确保您获得的是http://code.google.com/p/swfupload/](http://code.google.com/p/swfupload/)的源代码，而不是网站，这将解决您遇到的 Flash 版本 10 / 11 无法正常工作的任何问题。

要让任何 PHP 演示与 .Net 一起工作，只需创建一个名为 upload.aspx 的文件，将 upload.php 替换为以下代码。

```
try
    {
        // Get the data
        HttpPostedFile postedfile = Request.Files["Filedata"];

        postedfile.SaveAs(Server.MapPath(".\\") + postedfile.FileName);

    }
    catch
    {
        // If any kind of error occurs return a 500 Internal Server error
        Response.StatusCode = 500;
        Response.Write("An error occured");
        Response.End();
    }
    finally
    {

        Response.End();
    } 
```

将默认页面名称更改为 html 或 .aspx，并将内部调用更改为新的保存脚本。

它现在会将文件保存在网站的根目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-04T02:32:35.123

我遇到了这个问题，但为我解决的问题是获取最新版本的 swfupload 控件。我没有意识到你从谷歌源下载的东西也有 .net 的东西，我在他们网站的 .net 页面上使用过时的控件。

如果您访问[http://code.google.com/p/swfupload/](http://code.google.com/p/swfupload/)获取“SWFUpload [版本号] Samples.zip”，其中包含 .net 内容，我能够正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T16:28:32.030

我明白了，因为我的 Flash 版本是 10 并且 SWF 不能与 Flash player 10 一起使用，因为它不允许在 Flash player 10 中调用 swf 文件，所以我将对象自身放在页面上并制作它的解决方案作为一个按钮，让用户点击它自己的对象。

# javascript - 将 FireBug 用于带有框架的网站

> ID：623779
> 
> 赞同：3
> 
> 时间：2009-03-08T16:06:14.233
> 
> 标签：javascript, firefox, firebug

我下载了 Firebug 并试图用它来为一个使用框架的网站调试 JS。

我的理解是，当我转到 Firebug 中的“脚本”选项卡时，我会在包含的任何文件中看到 aspx 上的 JS 函数和 JS，并且我将能够设置断点。

但是，我在这个网站上看到的只是：

```
</head>
<frameset>
 <frame src="../company/HostPage.aspx name="mainFrame">
 <noframes></noframes>
</frameset>
</html> 
```

我是否正确理解 Firebug？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T16:18:55.657

Firebug 中有两个菜单条。当您选择“脚本”选项卡时，上面是一个包含当前文件名称的菜单条。如果单击它，您将在当前页面上看到所有下载文件的列表。选择加载到您要调试的框架中的文件，其内容将出现在文本框中。您将看到全部内容，而不仅仅是脚本块。

# design-patterns - 多点触控设计和交互模式，有链接吗？

> ID：623782
> 
> 赞同：2
> 
> 时间：2009-03-08T16:08:55.990
> 
> 标签：design-patterns, multi-touch, interaction

我在 Microsoft Surface 等多点触控设备上开发了一个协作业务应用程序。然而，在我看来，多点触控设备上的每个协作应用程序都是为了共享照片、绘画、玩耍或一次为一个人而设计的。

所以，我没有参考资料，我很难想象多个用户如何在同一个用户界面上工作，或者他们应该如何与我的应用程序交互。

我的问题是：你知道一些关于协作多点触控设备的设计和交互模式的博客/书籍/链接/作者吗？（对我来说，协作意味着“同时有多个用户”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-28T07:12:16.863

恐怕有太多的资源让你关注协作多点触控界面。例如，这两个小组正在做这个主题的研究：

[http://www.egr.unlv.edu/~pinelle/projects/index.html](http://www.egr.unlv.edu/~pinelle/projects/index.html)
[http://hci.usask.ca/research/digitaltables.shtml](http://hci.usask.ca/research/digitaltables.shtml)

我最喜欢的是以下关于多用户多点触控音乐界面的博客。 [http://ssandler.wordpress.com/](http://ssandler.wordpress.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T10:43:42.080

您可能需要属于这里 www.nuigroup.com 。它是帮助 UI 设计师、多点触控程序员等的最佳社区。

希望能帮助到你，

阿尼鲁德

# c++ - 如何将 ASCII 字符的十六进制值写入文本文件？

> ID：623784
> 
> 赞同：16
> 
> 时间：2009-03-08T16:11:42.803
> 
> 标签：c++, ascii, hex, ofstream

这是我目前所拥有的：

```
void WriteHexToFile( std::ofstream &stream, void *ptr, int buflen, char *prefix )
{
    unsigned char *buf = (unsigned char*)ptr;

    for( int i = 0; i < buflen; ++i ) {
        if( i % 16 == 0 ) {
            stream << prefix;
        }

        stream << buf[i] << ' ';
    }
} 
```

我试过做 stream.hex、stream.setf(std::ios::hex)，以及在 Google 上搜索了一下。我也试过：

```
stream << stream.hex << (int)buf[i] << ' '; 
```

但这似乎也不起作用。

以下是它当前产生的一些输出的示例：

```
Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í 
Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í 
Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í 
Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í 
Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í 
Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í Í 
```

我希望输出如下所示：

```
FF EE DD CC BB AA 99 88 77 66 55 44 33 22 11 00
FF EE DD CC BB AA 99 88 77 66 55 44 33 22 11 00
FF EE DD CC BB AA 99 88 77 66 55 44 33 22 11 00
FF EE DD CC BB AA 99 88 77 66 55 44 33 22 11 00
FF EE DD CC BB AA 99 88 77 66 55 44 33 22 11 00
FF EE DD CC BB AA 99 88 77 66 55 44 33 22 11 00 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-03-08T16:21:52.543

```
#include <iostream>
using namespace std;
int main() {
    char c = 123;
    cout << hex << int(c) << endl;
} 
```

**编辑：**零填充：

```
#include <iostream>
#include <iomanip>
using namespace std;
int main() {
    char c = 13;
    cout << hex << setw(2) << setfill('0') << int(c) << endl;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-08T16:20:32.517

```
char upperToHex(int byteVal)
{
    int i = (byteVal & 0xF0) >> 4;
    return nibbleToHex(i);
}

char lowerToHex(int byteVal)
{
    int i = (byteVal & 0x0F);
    return nibbleToHex(i);
}

char nibbleToHex(int nibble)
{
    const int ascii_zero = 48;
    const int ascii_a = 65;

    if((nibble >= 0) && (nibble <= 9))
    {
        return (char) (nibble + ascii_zero);
    }
    if((nibble >= 10) && (nibble <= 15))
    {
        return (char) (nibble - 10 + ascii_a);
    }
    return '?';
} 
```

更多代码[在这里](http://illegalargumentexception.blogspot.com/2008/05/c-hex-dump-application.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T16:34:12.780

尝试：

```
#include <iomanip>
....
stream << std::hex << static_cast<int>(buf[i]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-08T16:40:33.187

您也可以使用更老式的东西来做到这一点：

```
char buffer[4];//room for 2 hex digits, one extra ' ' and \0
sprintf(buffer,"%02X ",onebyte); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-08T16:20:45.247

我通常会创建一个返回数字并使用它的函数：

```
void CharToHex(char c, char *Hex)
{
   Hex[0]=HexDigit(c>>4);
   Hex[1]=HexDigit(c&0xF);
}

char HexDigit(char c)
{
   if(c<10)
     return c;
   else
     return c-10+'A';
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-06T10:02:34.523

CHAR 到 wchar_t (unicode) HEX 字符串

```
wchar_t* CharToWstring(CHAR Character)
{
wchar_t TargetString[10];
swprintf_s(TargetString, L"%02X", Character);

// then cut off the extra characters
size_t Length = wcslen(TargetString);

wchar_t *r = new wchar_t[3];
r[0] = TargetString[Length-2];
r[1] = TargetString[Length-1];
r[2] = '\0';
return r;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-03-08T16:31:32.490

您只需配置一次流：

```
stream << std::hex << std::setfill('0') << std::setw(2) 
```

# c# - 简单的正则表达式模式

> ID：623787
> 
> 赞同：0
> 
> 时间：2009-03-08T16:13:36.387
> 
> 标签：c#, regex

我正在使用 C#，我试图只允许字母和空格。我此刻的表达是：

```
string regex = "^[A-Za-z\s]{1,40}$"; 
```

我的 IDE 说 \s 是“无法识别的转义序列”

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-08T16:16:43.740

"\" 是 ac# 转义字符以及正则表达式转义字符。尝试：

```
string regex = @"^[A-Za-z\s]{1,40}$"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T16:16:40.327

您需要`@`在字符串前面放置一个以将其转换为[逐字字符串文字](http://msdn.microsoft.com/en-us/library/aa691090.aspx)：

```
string regex = @"^[A-Za-z\s]{1,40}$"; 
```

现在，`\`您的正则表达式中的 被解释为试图逃避`s`编译器不理解的以下内容。

或者，您可以用另一个反斜杠转义：

```
string regex = "^[A-Za-z\\s]{1,40}$"; 
```

但总的来说，更喜欢第一种方法而不是第二种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T16:30:32.727

另外注意，您的正则表达式不符合您的描述。你说单词之间最多有 1 个空格。为此，您需要将“\s”移出字符列表。您当前使用的模式允许“任何字母数字或空格从 1 到 40 次”，这允许多个连续空格。您将需要更多类似以下的内容：

```
string regex = @"^(?:[A-Za-z]+\s?)+$"; 
```

这意味着“任何字母数字 1 次或多次后跟可选空格，整个事情一次或多次”。当你事先不知道第一个表达式的大小时，我不知道如何将整个字符串限制为 40 个字符。也许这可以通过“向后看”的表达来实现，但我不确定。您可能需要分两步完成。

# php - 使用 .htaccess 保护 HTML 文件

> ID：623788
> 
> 赞同：1
> 
> 时间：2009-03-08T16:13:53.593
> 
> 标签：php, html, security, .htaccess

我的 PHP 应用程序使用 404 文档来生成 HTML 文件，因此对同一个 HTML 文件的多个查询只会导致生成运行一次。

我想拦截对 HTML 文件的请求，以便用户需要建立 PHP 会话才能提取文件。

在最好的情况下，SESSION ID 将用于 URL 并强制它可以用作进一步的身份验证。例如，登录会给您一个 SessionID 并让您只能访问某些 HTML 文件。

我知道通过更改我的 cookie 我可以欺骗请求，但这很好。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T17:02:21.010

```
SetEnvIf HTTP_COOKIE "PHPSESSID" let_me_in
<Directory /www/static/htmls>
  Order Deny,Allow
  Deny from all
  Allow from env=let_me_in
</Directory> 
```

当然，用户可以在他的浏览器中手动创建这样的 cookie（有一些扩展可以为 Firefox 做到这一点，您可以随时编辑浏览器的 cookie 存储）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T23:40:57.370

像这样的东西可以工作（我还没有测试过）：

```
RewriteCond %{HTTP_COOKIE} PHPSESSID=([a-zA-Z0-9]+)
RewriteCond %{REQUEST_FILENAME} %{REQUEST_FILENAME}-%1.html
RewriteRule ^ %{REQUEST_FILENAME}-%1.html 
```

它假定您附加`"-$session_id.html"`到文件名（`$session_id`是 PHP 的会话 ID）。

它应该是安全的，而且好处是文件由 Web 服务器直接提供，根本不需要调用 PHP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T16:32:33.813

您可以使用[Apache 模块 mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)将 URL请求重定向`.html`到 PHP 脚本：

```
RewriteEngine on
RewriteRule \.html$ script.php [L] 
```

然后，请求的 URI 路径和查询在`$_SERVER['REQUEST_URI']`变量中可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T16:26:24.560

将缓存文件从 Web 根目录中移出，但仍位于 PHP 可以访问它们的位置。

# windows - 在 Vista (IShellFolder) 中调试 shell 扩展时出现问题

> ID：623799
> 
> 赞同：0
> 
> 时间：2009-03-08T16:19:30.257
> 
> 标签：windows, shell-extensions

我使用 ATL (Visual Studio 2008) 创建了一个 Windows Shell 扩展。它具有以下模块，每个模块都是一个单独的 ATL 简单对象，具有自己的 .rgs 文件用于注册：-

1.  IShellFolder/IShellView -> 用于 Windows 资源管理器中的虚拟驱动器
2.  IContextMenu/IShellExtInit -> 用于弹出菜单文件和文件夹
3.  IShellIconOverlayIdentifier - 在文件和文件夹上显示覆盖图标
4.  IShellPropSheetExt/IShellExtInit -> 用于文件和文件夹属性中的自定义属性页

以上在 WinXP 中工作正常，我能够在 WinXP 中调试这个 shell 扩展。但是当我切换到 Vista 时，我只会得到 (2) 和 (4) 的方法调用。该驱动器是在 Windows 资源管理器中创建的，但是当我单击它时不会调用底层方法。虽然当我右键单击时，我被调用（2），当我为文件或文件夹选择“属性”时，我进入了（4）的代码。

Vista上的（1）和（3）是否有一些我缺少的界面。我在 MSDN 上找不到有关为 Vista 编写 Shell 扩展的完整详细文档。我已经阅读了有关 shell 扩展的 CodeProject 文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-19T05:36:58.280

问题是由于使用了 Xml SMART 指针。调用 Release() 时出现问题。

检查此链接 [Internet Explorer 在调用 MSXML2::IXMLDOMDocumentPtr -> Release() 时崩溃](https://stackoverflow.com/questions/641896/internet-explorer-crashes-when-msxml2ixmldomdocumentptr-release-is-called)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T17:02:44.927

确保您的扩展程序正确处理初始化，否则 verclsid.exe 不会让您的扩展程序被加载。verclsid.exe 首先加载 shell 扩展并对它们进行快速检查，然后向 shell 发送“ok”，表明可以安全加载扩展。

有关 verclsid.exe 的一些详细信息，请参见[此处](http://support.microsoft.com/kb/918165)。

# java - “找不到符号变量 BufferUtils”

> ID：623805
> 
> 赞同：1
> 
> 时间：2009-03-08T16:23:10.903
> 
> 标签：java, opengl, jogl

我正在尝试将图像加载到 Java 中以在 JoGL 中创建纹理。为此，我需要调用 BufferUtils：

```
dest = ByteBuffer.allocateDirect(data.length * BufferUtils.SIZEOF_INT);

```

但它告诉我它找不到它。这就是我导入的所有内容：

```
导入 javax.media.opengl.*；
导入 javax.media.opengl.glu.*；
导入 com.sun.opengl.util.*；
导入 com.sun.opengl.util.j2d.*；

导入 java.awt.*；
导入 java.awt.event.*；
导入java.awt.image.*；
导入java.io.*；
导入java.net.*；
导入java.nio.*；
导入 javax.imageio.*；
导入 javax.swing.*；

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T16:31:19.870

我认为您的意思是[BufferUtil](http://download.java.net/media/jogl/builds/nightly/javadoc_public/com/sun/opengl/util/BufferUtil.html)（没有's'）。

# regex - 为什么我会成功但为空的正则表达式匹配？

> ID：623808
> 
> 赞同：0
> 
> 时间：2009-03-08T16:24:42.490
> 
> 标签：regex

我正在用 搜索`(.*)\\1`文本上`blabl`的模式`regexec()`。我在结构中获得了成功但空洞的比赛`regmatch_t`。究竟匹配了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-08T16:32:16.777

正则表达式 .* 可以成功匹配零字符的字符串，或者相邻字符之间出现的空。

因此，您的模式匹配括号中的零个字符，然后立即匹配零个字符。

因此，如果您的正则表达式是`/f(.*)\1/`，它将匹配“f”和第一个“o”之间的字符串“foo”。

您可以尝试使用`.+`而不是`.*`，因为它匹配一个或多个而不是零或多个。（使用 .+ 你应该匹配 'foo' 中的 'oo'）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T16:37:30.197

\1 是通常用于稍后替换或尝试通过在匹配中获取匹配来进一步优化您的正则表达式时的反向引用。您应该只使用 (.*)，这将为您提供您想要的结果，并且将自动获得反向引用编号 1。我不是正则表达式专家，但这些是我基于我有限的知识的想法。

顺便说一句，当我试图查看真正发生的事情时，我总是回到 RegexBuddy。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T16:44:52.737

\1 是“重新匹配”指令。问题是，您是否想立即重新匹配（例如**BLABLA**）

```
/(.+)\1/ 
```

或更高版本（例如，**BLA** ahem **BLA**）

```
/(.+).*\1/ 
```

# c# - Session 和 Cookie 有什么区别？

> ID：623815
> 
> 赞同：39
> 
> 时间：2009-03-08T16:26:59.037
> 
> 标签：c#, asp.net, session, cookies

Session 和 Cookie 有什么区别？

分别应该在什么情况下使用？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-03-08T16:28:48.987

**会话**

[会话](http://msdn.microsoft.com/en-us/library/ms178581.aspx)按用户存储在服务器上的内存（或替代[Session-State](http://msdn.microsoft.com/en-us/library/ms178581.aspx)）中。会话使用 cookie（*会话密钥*）将用户绑定到会话。这意味着没有“敏感”数据存储在用户机器上的 cookie 中。

[会话](http://msdn.microsoft.com/en-us/library/ms178581.aspx)通常用于在您浏览网站时维护状态。但是，它们也可用于保存经常访问的对象。*仅当 Session-state 设置为 InProc 时，如果设置为另一种[Session-State 模式](http://msdn.microsoft.com/en-us/library/ms178586.aspx)，该对象也必须可序列化。*

```
Session["userName"] = "EvilBoy";

if(Session["userName"] != null)
  lblUserName.Text = Session["userName"].ToString(); 
```

**饼干**

[Cookie](http://msdn.microsoft.com/en-us/library/ms178194.aspx)存储在用户机器上的每个用户。cookie 通常只是一些信息。Cookies 通常用于简单的用户设置颜色偏好等。**任何敏感信息都不应存储在 cookie 中。**

您永远不能完全相信 cookie 没有被用户或外部来源篡改，但是如果安全是一个大问题并且您必须使用 cookie，那么您可以加密您的 cookie 或将它们设置为仅通过 SSL 传输。用户可以随时清除其 cookie 或完全不允许 cookie，因此您不能仅仅因为用户过去访问过您的网站就指望它们存在。

```
//add a username Cookie
Response.Cookies["userName"].Value = "EvilBoy";
Response.Cookies["userName"].Expires = DateTime.Now.AddDays(10);
//Can Limit a cookie to a certain Domain
Response.Cookies["userName"].Domain = "Stackoverflow.com";

//request a username cookie
if(Request.Cookies["userName"] != null)
   lblUserName.Text = Server.HtmlEncode(Request.Cookies["userName"].Value); 
```

*边注*

值得一提的是，ASP.NET 还支持无[cookie](http://msdn.microsoft.com/en-us/library/aa479314.aspx)状态管理

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-03-09T13:08:31.160

**Cookie**是变量的客户端存储。它通过浏览器物理存储在客户端计算机上。它的范围是机器范围的。同一台机器上的不同用户可以读取相同的cookie。

因为这 ：

1.  您不应在 cookie 上存储敏感数据。
2.  您不应存储属于一个用户帐户的数据。
3.  Cookie 对服务器资源没有影响。
4.  Cookie 在您指定的日期到期。

**会话**是变量的服务器端存储。默认情况下，它存储在服务器的内存中。但是您可以将其配置为存储在 SqlServer 中。它的范围是浏览器范围的。同一用户可以运行两个或多个浏览器，每个浏览器都有自己的会话。

因为这 ：

1.  您可以在会话中保存敏感数据。
2.  您不应该在会话中保存所有内容。很浪费服务器资源。
3.  用户关闭浏览器后，会话超时清除所有信息。（默认为 20 分钟）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-03-08T16:45:28.073

cookie 是服务器（拥有域）在访问服务器/域的用户的浏览器中存储的标识字符串。

当某个用户在特定时间范围内访问服务器/域时，会话可能是变量、状态、设置的单位。所有会话信息都以传统模型存储在服务器上（！）

因为许多并发用户可以同时访问服务器/域，所以服务器需要能够区分许多不同的并发会话并始终将正确的会话分配给正确的用户。（并且没有用户可以“窃取”另一个用户的会话）

这是通过 cookie 完成的。存储在浏览器中的 cookie，在这种情况下应该是随机组合，如 s73jsd74df4fdf（因此无法猜测）在从浏览器到服务器的每个请求中发送，服务器可以分配和使用正确的会话它的答案（页面浏览量）

cookie 允许服务器识别浏览器/用户。会话允许服务器记住不同页面视图之间的信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-05-27T10:12:08.047

会话不依赖于允许 cookie 的用户。相反，它们像令牌一样工作，允许在用户打开浏览器时访问和传递信息。会话的问题在于，当您关闭浏览器时，会话也会丢失。因此，如果您有一个需要登录的站点，则不能像 cookie 那样将其保存为会话，并且用户每次访问时都将被迫重新登录。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-07-05T16:22:16.530

它可能同时具有：对数据库主键进行散列并存储在查找表中：然后将散列作为 cookie 存储在客户端上。提交哈希 cookie (hahhahaha :) 后，会查找其对应的主键，其余详细信息将在服务器数据库的另一个表中与之关联。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-05-27T10:08:31.837

*   cookie 和会话之间的主要区别在于 cookie 存储在用户的浏览器中，而会话不存储。这种差异决定了每个人最适合做什么。

*   cookie 可以将信息保留在用户的浏览器中，直到被删除。如果某人有登录名和密码，则可以在他们的浏览器中将其设置为 cookie，这样他们就不必每次访问您的网站时都重新登录。您几乎可以在浏览器 cookie 中存储任何内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-09T06:35:23.213

会话是一个服务器端对象，它在页面调用之间传输或访问数据。
Cookies是一个对象，它是客户端/客户端机器，它存储浏览器和服务器的一些文本信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-26T22:27:21.170

关于会话 cookie 是什么似乎有些混淆。

首先，当我们谈论会话 cookie 时 - 它与 ASP.Net 会话无关。同样，会话 cookie 与服务器端进程或缓存无关。

会话 cookie 只不过是浏览器会话过期时过期的 cookie。要创建会话 cookie - 不要在其上设置过期日期。这样做会将 cookie 存储在内存中，并在处理浏览器时处理掉。

# python - 如何将事件添加到 Trac 事件时间线

> ID：623822
> 
> 赞同：1
> 
> 时间：2009-03-08T16:30:07.000
> 
> 标签：python, plugins, trac

我正在为 Trac 编写一个插件。每次插件从 Git post-receive 钩子接收一些数据时，我想在时间线中添加一个事件。

查看[时间线 API](http://trac.edgewall.org/browser/trunk/trac/timeline/api.py)，您似乎只能添加新的事件源。因此，您负责检索和显示数据。我宁愿将我的活动保存到现有来源。

我应该在哪里查看 Trac API 以保存事件？

ps：我的计划是像Github这样的代码依赖远程存储库和远程Web界面。

pss：时间线必须显示来自主项目 git 存储库及其克隆的提交。我不想托管与项目有关的每个存储库的副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-11T23:57:51.300

时间线 API 比您需要做的要高一个级别。[ChangesetModule](http://trac.edgewall.org/browser/trunk/trac/versioncontrol/web_ui/changeset.py)中有一个通用的 VCS 实现，它将变更集（事件）检索本身委托给 VCS-specific `Repository`。因此，您应该改为实现[版本控制 API](http://trac.edgewall.org/browser/trunk/trac/versioncontrol/api.py)。

API 是为“拉模型”设计的，其中 Trac 在构建时间线时会查询 VCS。如果您真的更喜欢“推送模型”（为什么？），您可以尝试[将 CacheRepository 实现](http://trac.edgewall.org/browser/trunk/trac/versioncontrol/cache.py)作为基础，将事件注入缓存，或者只是从头开始编写事件存储库。请注意，这违背了现有设计的原则，并且很可能是不必要的额外工作。

我建议你改用普通的拉模型，它会更容易和更干净。您可以使用[Subversion 实现](http://trac.edgewall.org/browser/trunk/trac/versioncontrol/svn_fs.py)或[Mercurial 实现](http://trac.edgewall.org/browser/sandbox/mercurial-plugin/tracvc/hg/backend.py)作为参考，并且可能使用[GitPython](http://gitorious.org/projects/git-python/)与`git`.

# c# - 在 C# 中将“set”添加到接口的属性

> ID：623824
> 
> 赞同：20
> 
> 时间：2009-03-08T16:30:38.310
> 
> 标签：c#, inheritance, interface

我希望通过为该接口中的属性提供设置访问器来“扩展”该接口。界面看起来像这样：

```
interface IUser
{
    string UserName
    {
        get;
    }
} 
```

我想要这样的东西：

```
interface IMutableUser : IUser
{
    string UserName
    {
        get;
        set;
    }
} 
```

我需要继承。我无法将主体复制`IUser`到`IMutableUser`并添加设置访问器。

这在 C# 中可能吗？如果可以，如何实现？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-08T17:33:24.167

我看不出您发布的内容不应该起作用的任何原因？刚刚做了一个快速测试，它编译正常，但给出了关于隐藏的警告。这可以通过添加新关键字来解决，如下所示：

```
public interface IMutableUser : IUser
{
    new string Username { get; set; }
} 
```

另一种方法是添加显式设置方法；例如：

```
public interface IMutableUser : IUser
{
    void SetUsername(string value);
} 
```

当然，我更喜欢使用 setter，但如果不可能，我想你会做你必须做的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-08T16:34:36.383

您可以使用抽象类：

```
interface IUser
{
    string UserName
    {
        get;
    }
}

abstract class MutableUser : IUser
{
    public virtual string UserName
    {
        get;
        set;
    }
} 
```

另一种可能性是有这个：

```
interface IUser
{
    string UserName
    {
        get;
    }
}

interface IMutableUser
{
    string UserName
    {
        get;
        set;
    }
}

class User : IUser, IMutableUser
{
    public string UserName { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-08T17:50:11.037

您可以通过显式实现接口来“覆盖”接口中的属性。Chris 的回答可能是您概述的场景所需的全部内容，但考虑一个稍微复杂一点的场景，您的类需要一个 getter/setter，但接口只定义了 getter。您可以通过执行以下操作来解决此问题：

```
public class MyUser : IUser
{

    IUser.MyProperty { get { return "something"; } }

    public MyProperty { get; set; }

} 
```

通过明确实施`IUser.MyProperty`，您可以满足合同。但是，通过提供 public `MyProperty`，您的对象的 API 将永远不会显示显式接口版本，并且将始终将 MyProperty 与 get/set 一起使用。

# c# - 自定义钩子：虚拟函数还是事件？

> ID：623836
> 
> 赞同：0
> 
> 时间：2009-03-08T16:34:13.403
> 
> 标签：c#, performance

性能和设计明智的优点和缺点

使用密封类和事件还是使用带有虚函数的抽象类？

事件只会有一个听众...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-08T17:03:13.863

您不必太担心抽象类、继承和事件订阅方面的性能。这些是旨在简化开发和维护的语言结构。它们的设计并没有完全考虑到性能。

在性能方面有更好的事情需要担心。我想到了几件事：

*   **[装箱和拆箱](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)**- 如果您正在执行大量重复或迭代的任务，请尽量避免对对象进行过多的装箱和拆箱。
*   **[引用类型](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)与[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)**- 创建为“结构”的对象按值存储。这意味着对象的整个值在内存中发送时都会被传递。这可能会更昂贵，但它的生命周期更具确定性，因此它具有通常仅存在于特定范围内的优势。创建为“类”的对象通过引用存储。当通过代码发送引用对象时，您只发送对对象的**引用**，这意味着更少的内存可以移动。缺点是因为它被分配给堆，它在内存中的生命周期不太确定。
*   **[订阅/取消订阅事件](http://msdn.microsoft.com/en-us/library/aa970850.aspx)**- 这与其说是一个性能问题，不如说是一个一般的开发错误。除非取消订阅所有事件，否则不会对对象进行 GC。如果您保持订阅打开，您的对象可能会永远保留在内存中，从而导致内存泄漏。Microsoft 有很好的关于[WeakEvent 模式](http://msdn.microsoft.com/en-us/library/aa970850.aspx)的文档来帮助解决这个问题。

您还应该阅读[Microsoft 关于 Performance 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms173196.aspx)。这是了解 .NET 中真正的性能杀手的一个很好的参考。密封和抽象类和事件处理程序通常不是性能问题。

通常，代码*结构*更值得担心。想想你是如何处理你的数据的，以及你使用的哪些模式执行起来可能很繁重。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T17:01:54.053

它们看起来并不完全像类似的替代方案......如果问题是虚拟方法是否比调用事件更快，那么答案是肯定的，但只是略微。

# data-structures - 以防损坏的方式存储层次结构

> ID：623838
> 
> 赞同：2
> 
> 时间：2009-03-08T16:34:37.240
> 
> 标签：data-structures

我今天在考虑存储分层节点集的最佳方法，例如

[![替代文字](https://i.stack.imgur.com/ys6bQ.jpg)](https://i.stack.imgur.com/ys6bQ.jpg)
[（来源：[www2002.org](http://www2002.org/CDROM/alternate/738/p738-brailsford-fig5.jpg)）]

最明显的表示方法（至少对我而言）是每个节点都有 nextSibling 和 childNode 指针，其中任何一个都可以为空。

这具有以下属性：

1.  如果您想在某处添加或删除节点，则需要进行少量更改
2.  极易受到腐败的影响。如果一个节点丢失，您可能会丢失大量其他节点，这些节点依赖于通过该节点的指针找到。

您可能使用的另一种方法是提出一个坐标系统，例如 1.1、1.2、1.2.1、1.2.2。1.2.3 将是第 3 层的第 3 个节点，前一层的第 2 个节点作为其父节点。一个节点的意外丢失不会影响解析任何其他节点的能力。但是，在某处添加节点可能会改变大量其他节点的坐标。

有哪些方法可以存储节点层次结构，这些节点层次结构需要很少的更改来添加或删除节点，并且能够抵御少数节点的损坏？（不是特定于实现的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-09T09:19:13.393

存储层次结构的典型方法是在每个节点中都有一个 ParentNode 属性/字段。对于 root，ParentNode 为空，对于所有其他节点，它都有一个值。这确实意味着树可能会丢失整个分支，但在内存中这似乎不太可能，而在数据库中，您可以使用约束来防止这种情况。

这种方法不直接支持所有兄弟的查找，如果这是一个要求，我会为深度添加另一个属性/字段，根的深度为 0，根以下的所有节点的深度为 1，依此类推。所有具有相同深度的节点都是兄弟节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T19:44:30.480

一个简单的选择是在每个节点中存储对根节点的引用——这样很容易检测到孤立节点。

另一个有趣的选择是将层次结构信息存储为后代（传递闭包）表。因此，对于 1.2.3 节点，您将具有以下关系：

1., 1.2.3\. - 根节点是 1.2.3 的上升节点。

1.2., 1.2.3\. - 1.2。节点是1.2.3的上升。

1., 1.2\. - 根节点是 1.2 的上升节点。ETC...

该表可以更好地抵抗错误，因为它包含一些冗余信息。

戈兰

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T16:50:52.817

> 我今天在考虑存储分层节点集的最佳方法

所以你正在写一个文件系统？;-)

> 表示这一点的最明显方式（至少对我而言）是每个节点都有 nextSibling 和 childNode 指针

为什么？兄弟信息存在于父节点上，因此您只需要一个返回父节点的指针。一个双向链表，可以这么说。

> 有哪些方法可以存储节点层次结构，这些节点层次结构需要很少的更改来添加或删除节点，并且能够抵御少数节点的损坏？

这里实际上涉及两个不同的问题。

*   数据是否损坏？
*   如何修复损坏的数据（又称自我修复系统）？

这两个问题的答案将确定解决方案的确切性质。

**数据损坏**

如果您的唯一目的是了解您的数据是否良好，请将子节点信息的哈希摘要与父节点一起存储。

**自愈结构**

任何自我修复结构都需要以下信息：

*   有腐败吗？（看上面）
*   腐败在哪里？
*   能治好吗？

存在不同的算法来以不同程度的有效性修复数据。根本思想是引入冗余。重建取决于您的冗余程度。因为最好的保证是由最冗余的系统提供的——你必须选择。

我相信有一些范围可以将您的问题缩小到我们可以开始讨论难题的各个部分的程度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T17:00:37.333

当您提到腐败时，您是在谈论 RAM 还是其他一些存储？也许在通过某种介质传输的过程中？

在任何情况下，当您处理数据损坏时，您都在谈论处理错误检测和纠正的整个计算机科学领域。

当你谈到丢失一个节点时，你首先要弄清楚的是“我怎么知道我丢失了一个节点？”，这就是错误检测。

至于保护数据免受损坏的问题，几乎唯一的方法就是使用冗余。冗余量取决于您希望对能够从中恢复的损坏程度施加什么限制。您不能通过巧妙的结构设计真正保护自己免受这种情况的影响，因为您很可能会遭受结构中关键“聪明”部分的损坏:)

永远明智的维基百科是一个很好的起点：[错误检测和纠正](http://en.wikipedia.org/wiki/Error_correction)

# user-interface - 标签应该使用逗号还是空格

> ID：623839
> 
> 赞同：4
> 
> 时间：2009-03-08T16:36:52.587
> 
> 标签：user-interface, tags

您对标记用户界面小部件是否需要逗号或空格作为分隔符有何看法？例如，该站点使用空格，需要多词标签才能使用连字符。我认为这是乔尔的一些设计建议；但后来我意识到 Facebook 和 Wordpress 使用逗号。

那么它应该是什么？还是没关系？让我们假设这个小部件的用户通常具有计算机知识，但不是很熟练。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T16:43:43.007

我会尝试考虑标签的域，并找出潜在标签包含空格的可能性。

例如，这个网站上的大部分内容都是单个单词或首字母缩写词，因此使用空格并不难。

另一方面，例如，在给 facebook 照片打标签时，一般的标签是“春假”、“兄弟会”、“随机联播”、[“国务卿”](http://latimesblogs.latimes.com/washington/2008/12/obama-favreau.html)等。所以处理空间解释或引用更难，因此逗号更有意义。

我不熟悉具体的规则。

但是，如果您正在考虑标签云，那么空格就没有意义了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T16:42:53.897

尽可能容错。例如，使用提供的任何东西都会起作用吗？如果解析得当，以下两个输入可能会产生相同的结果：

```
foo bar "hello world"
foo, bar, hello world 
```

两者都会产生三个明显的标签。

我意识到这会使明确地解析以下输入变得困难：

```
hello world 
```

在那种情况下，我可能会阅读两个不同的标签。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-08T17:54:08.670

逗号。它更自然。您可以更轻松地使用包含空格的单词。其他解决方案对人类来说似乎很复杂（也许不是程序员，但他们认为不同 - 记住 gui 中的“u”代表“用户”）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-08T16:43:16.517

我会选择逗号，因为用逗号分隔多个单词标签然后使用连字符或其他不太有用的替换技术更自然

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-08T16:43:54.283

我不认为这很重要。我认为对于编程站点，您的大多数标签都不会是多字的，因此可以使用空格分隔符。但我认为无论哪种方式，您都可以提出非常有说服力的论点，这实际上归结为个人选择。

# amazon-s3 - 亚马逊网络服务如何运作？

> ID：623841
> 
> 赞同：19
> 
> 时间：2009-03-08T16:37:49.353
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services, amazon-ebs

您能够收集到哪些关于亚马逊网络服务如何工作的信息？

*   他们使用什么硬件
*   什么网络服务器
*   什么操作系统
*   AWS 的存储空间
*   EC2/EBS 用什么虚拟化软件
*   他们为 EC2 分发防火墙的软件是什么
*   其数据中心的物理位置。

我非常喜欢他们的服务，并在工作中大量使用它们……只是出于好奇。如果您知道/听说过/阅读过并想告诉您，如果您在网上看到了一些东西并想提供链接，非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-08T22:28:53.503

这可能很有趣：[http ://highscalability.com/amazon-architecture](http://highscalability.com/amazon-architecture)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-22T05:28:52.923

虽然无法准确回答这个问题，但我将尝试对亚马逊公开宣布的内部运作方式有所了解。以下是常用`c`和`m`实例类型的一些详细信息，以及最近发布的裸机实例。此外，这可以作为进一步研究的起点，因为细节远远落后于 SO 的单一答案。

### 计算硬件。

如果您想深入了解，我建议您浏览所有[前几代](https://aws.amazon.com/ec2/previous-generation/)和[当前一代的实例类型](https://aws.amazon.com/ec2/instance-types/)。可以在此页面上找到底层硬件。

*   裸机实例

裸机实例于 2018 年 4 月成为 GA。其中一个细节 - I3.metal 实例由 2.3 GHz Intel Xeon 处理器提供支持，提供 36 个超线程内核（72 个逻辑处理器）、512 GiB 内存和 15.2 TB NVMe SSD - 支持的实例存储。[更多信息](https://aws.amazon.com/about-aws/whats-new/2018/05/announcing-general-availability-of-amazon-ec2-bare-metal-instances/)

*   计算优化实例 (C)

*   最新`c5`（2017 年末）一代实例使用 3.0 GHz Intel Xeon Platinum 8000 系列。[更多信息在这里](https://aws.amazon.com/blogs/aws/now-available-compute-intensive-c5-instances-for-amazon-ec2/)

*   `c4`（生成使用*针对 ec2*处理器优化的 Intel Xeon E5-2666 v3（代号 Haswell）处理器。[更多信息在这里](https://aws.amazon.com/blogs/aws/now-available-new-c4-instances/)
*   `c3`一代引入了 SSD 实例存储，并使用了 2.8 GHz Intel Xeon E5-2680v2。[更多信息在这里](https://aws.amazon.com/blogs/aws/a-generation-of-ec2-instances-for-compute-intensive-workloads/)

*   通用 ec2 实例 (M)

    1.  `m5`实例基于以 2.5 GHz 运行的定制 Intel® Xeon® Platinum 8175M 系列处理器。最有可能在下面提到的 Nitro 管理程序上运行。[更多信息](https://aws.amazon.com/blogs/aws/m5-the-next-generation-of-general-purpose-ec2-instances/)

    2.  `m4`'s 于 2015 年发布，并具有专门针对 EC2 优化的定制 Intel Xeon E5-2676 v3 Haswell 处理器。[更多信息](https://aws.amazon.com/blogs/aws/the-new-m4-instance-type-bonus-price-reduction-on-m3-c4/)

    3.  `m3`于 2012 年发布，对于一些记得的人来说，价格有所降低，使用 AWS 对通过预算镜头查看的观众更具吸引力。他们正在/正在使用 Intel Xeon E5-2670 处理器并开始使用 SSD 实例内存。

### 什么网络服务器

我已经多次看到通过 Tomcat 呈现的 WebUI（AWS 控制台）中的错误页面，所以我猜这是控制台服务器。

### EC2/EBS 用什么虚拟化软件

AWS 最近宣布（带有`c5`实例类型公告）他们将开始使用基于 KVM 的管理程序。[此处链接的演示文稿](https://insidehpc.com/2017/12/video-introducing-nitro-hypervisor-evolution-amazon-ec2-virtualization/)很好地概述了管理程序的历史（下表取自同一页）

[![在此处输入图像描述](https://i.stack.imgur.com/VtmIn.jpg)](https://i.stack.imgur.com/VtmIn.jpg)

### 数据中心的物理位置

这不会（并且出于安全原因不应）公开披露。总是有关于它的谣言/一些消息来源（查看相关的[Quora 线程](https://www.quora.com/What-are-the-precise-physical-locations-of-AWS)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-09T06:24:56.687

您可以在*aws*`linux`中使用实例或`windows`实例。但首先你应该运行一个实例，然后选择它的操作系统。对于它的存储，他们有一个调用它的实例。它是一种存储，您可以在其中保存任何类型的文件格式。他们的数据中心有很多位置。根据您居住的地方，您必须选择最近的数据中心来使用它的服务，这样您就可以减少支付账单的费用。您可以访问*console.amazon.com*并在帮助菜单中找到每个服务的大量文档。 `Amazon` *`S3`*

 **# c# - 为什么 Java 没有指定非转义字符串文字的方法？

> ID：623845
> 
> 赞同：6
> 
> 时间：2009-03-08T16:41:55.240
> 
> 标签：c#, java, language-comparisons

在 C# 中，如果您希望字符串按字面意思理解，即忽略转义字符，您可以使用：

```
string myString = @"sadasd/asdaljsdl"; 
```

但是，Java 中没有等价物。Java没有包含类似的东西有什么原因吗？

编辑：

在查看了一些答案并思考之后，我真正要问的是：
是否有任何令人信服的论点反对将此语法添加到 Java 中？一些负面的，我只是没有看到？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-08T16:45:22.813

Java 总是让我印象深刻，因为它是一种极简主义的语言——我想既然逐字字符串不是必需品（例如属性），它们就没有被包括在内。

例如，在 C# 中，有许多快速的方法来执行属性之类的操作：

```
public int Foo { get; set; } 
```

和逐字字符串：

```
String bar = @"some
string"; 
```

Java 倾向于避免尽可能多的语法糖。如果你想要一个字段的 getter 和 setter，你必须这样做：

```
private int foo;

public int getFoo() { return this.foo; }
public int setFoo(int foo) { this.foo = foo; } 
```

并且字符串必须被转义：

```
String bar = "some\nstring"; 
```

我认为这是因为在很多方面 C# 和 Java 有不同的设计目标。C# 发展迅速，许多功能不断添加，但其中大部分往往是语法糖。另一方面，Java 是关于简单性和易于理解的。最初创建 Java 的许多原因是对 C++ 语法复杂性的反应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T16:46:47.930

我觉得“为什么”的问题很有趣。C# 是一种较新的语言，并试图改进其他语言（如 Java）的缺点。“为什么”问题的简单原因是 - Java 标准没有像 C# 中那样定义 @ 运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T17:24:13.690

就像说的那样，大多数时候你想转义字符是为了正则表达式。在这种情况下使用： [Pattern.quote()](http://java.sun.com/javase/6/docs/api/java/util/regex/Pattern.html#quote(java.lang.String))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-08T16:48:13.977

我认为原因之一是正则表达式（这是这类字符串文字的主要原因）直到 Java 1.4 才成为 Java 平台的一部分（如果我没记错的话）。当语言被定义时，根本就没有那么多需要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-09T17:23:06.443

Java（不幸的是）没有这样的东西，但[Groovy 有](http://groovy.codehaus.org/JN1525-Strings)：

```
assert '''hello,
world''' == 'hello,\nworld'
//triple-quotes for multi-line strings, adds '\n' regardless of host system
assert 'hello, \
world' == 'hello, world' //backslash joins lines within string 
```

当我做一些 .NET 工作时，我真的很喜欢 C# 的这个特性。它对剪切和粘贴 SQL 查询特别有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-08T16:47:55.197

我认为这个问题就像：“为什么 java 不像 Python 那样对缩进敏感？” 提到的语法是一种糖，但它是多余的（多余的）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-08T16:49:38.233

我不确定为什么，但你可以通过转义转义字符来做到这一点。由于所有转义字符前面都有反斜杠，因此通过插入双反斜杠可以有效地取消转义字符。例如 "\now" 将产生一个换行符然后字母 "ow" 但 "\now" 将产生 "\now"

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-08T17:21:03.523

您应该会发现您的 IDE 可以为您解决问题。如果您在字符串中间并将原始文本复制粘贴到其中，它应该为您转义文本。

PERL 有多种设置字符串文字的方法，有时希望 Java 也支持这些方法。;)

# cocoa - 如何拖动 NSStatusItems

> ID：623852
> 
> 赞同：10
> 
> 时间：2009-03-08T16:43:55.563
> 
> 标签：cocoa, drag-and-drop, nsstatusbar

你们都知道 Mac OS X 中的菜单栏（或者更好的说法是 NSStatusBar）。
有些项目我可以移动，而另一些则不能。

我希望能够拖动我的应用程序的 NSStatusItem。

知道如何实现吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-08T17:58:14.123

尽管 NSStatusItems 出现在 Apple 的内部“菜单附加项”附近，但它们是不同的并且行为不同。如果 Apple 统一了可以出现在菜单栏右侧区域的项目，那就太好了，但现在该部分分为不同的“苹果内部”（右侧）和“应用程序提供的（NSStatusItem） “ 在左侧。

您可以通过将计算机置于屏幕捕获模式 (cmd-shift-4) 并按空格键切换到“捕获整个窗口”来可视化区别。当您将鼠标悬停在 Apple 的菜单图标上时，您会看到它们都位于一个窗口中。这解释了它们易于管理和拖拉的能力。将鼠标悬停在其他项目上表明每个 NSStatusItem 实际上都存在于它自己的单个窗口中（恰好由安装它的应用程序拥有）。

最好坚持使用 NSStatusItem，即使你不能拖动它们。这是 Apple 的一个缺点，大多数用户都会理解，即使它很烦人。强调长期提供更稳定的应用程序的积极权衡通常会软化推动可拖动性的客户（或经理？）的意见。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-03-08T16:52:34.047

您必须使用[`NSMenuExtra`](https://web.archive.org/web/20111013024941/http://cocoadev.com/index.pl?NSMenuExtra), not`NSStatusItem`并使菜单项成为在`SystemUIServer`进程内运行的包，而不是您自己的应用程序。您还需要类似 MenuCracker 提供的代码才能使其工作。

`NSMenuExtra`未记录且不受支持，因此被视为“黑客”。

我猜测首先有两个 API：一个菜单额外崩溃（或内存泄漏）意味着整个 SystemUIServer 进程崩溃或内存泄漏——包括其他第三方模块以及系统提供的模块。另一方面，对于状态项，这样的问题只会影响您自己的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-29T09:05:20.567

自 macOS Sierra 10.12 起[http://www.macworld.co.uk/how-to/mac-software/7-sierra-menu-bar-tips-how-use-mac-menu-bar-in-macos-sierra -3649163/](http://www.macworld.co.uk/how-to/mac-software/7-sierra-menu-bar-tips-how-use-mac-menu-bar-in-macos-sierra-3649163/)

> 第三方应用程序有时会安装为附加菜单，在菜单栏中具有控件，或者尽管最初并非如此，但可以作为匿名应用程序重新启动。从 macOS Sierra 开始，这些菜单附加功能可以像原生菜单一样重新排列。（直到 OS X El Capitan 都不是这种情况。）

# msbuild - 将 Wix 与 MSBuild 集成

> ID：623857
> 
> 赞同：24
> 
> 时间：2009-03-08T16:45:26.467
> 
> 标签：msbuild, continuous-integration, wix, windows-installer

我们正在寻求为我们正在开发的产品自动生成 MSI。目前我们有 MSBuild 将源构建到网络位置，这对于测试来说很好，但在发布软件时，我们需要将其包装在 MSI 中。

该软件是所有 .Net bar 1 COM 组件，需要在安装它的每台机器上注册。

我想知道的是如何将 Wix 与 MSBuild 集成，以便生成新的 wix 脚本以及能够处理全新和升级安装的 MSI。

非常感谢您对此的任何帮助。

谢谢，

布伦丹

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-08T17:45:10.377

当然，MS Build 中有一些任务可以完成从 WiX 构建 MSI 所需的一切。你能把它集成到构建/集成服务器上吗？

Wix 的较新版本实际上包含一个名为“wix.targets”的文件，它应该可以帮助您入门。

另请查看有关该主题的这些精美文章：

*   [使用 Wix.Targets 构建](http://blogs.msdn.com/heaths/archive/2006/03/15/552413.aspx)（希思·斯图尔特）
*   [MSBuild 的 Wix 目标](https://blogs.infosupport.com/wix-target-for-msbuild/)（Willem Meints 提供）
*   [使用 MSBuild 和 Windows Installer XML 自动发布](https://web.archive.org/web/20150205093127/https://msdn.microsoft.com/en-us/magazine/cc163456.aspx)（作者 Sayed Ibrahim Hashimi）（存档 msdn 杂志的 Web 存档链接）

它们更详细地涵盖了该主题，并且对入门非常有帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-08T16:53:36.070

您应该下载并安装[Votive](http://wix.sourceforge.net/votive.html)。这将创建一个 Visual Studio 项目文件，您可以使用该文件与 MSBuild 一起创建基于 WiX 的 MSI。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-12T22:33:22.747

WiX 手册中还有一个关于如何与 MSBuild 集成的主题，称为[Using WiX with MSBuild](http://wix.sourceforge.net/manual-wix3/msbuild.htm)。

# java - 你如何在 Java 中对 URL 进行转义？

> ID：623861
> 
> 赞同：37
> 
> 时间：2009-03-08T16:46:26.260
> 
> 标签：java, url-encoding

当我通过 URL 的 InputStream 读取 xml，然后删除除 url 之外的所有内容时，我得到“ [http://cliveg.bu.edu/people/sganguly/player/%20Rang%20De%20Basanti%20-%20Tu% 20Bin%20Bataye.mp3](http://cliveg.bu.edu/people/sganguly/player/%20Rang%20De%20Basanti%20-%20Tu%20Bin%20Bataye.mp3) ".

如您所见，有很多“%20”。

我希望 url 不转义。

有没有办法在 Java 中做到这一点，而不使用第三方库？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2009-03-08T17:52:19.317

这不是未转义的 XML，这是 URL 编码的文本。在我看来，您想在 URL 字符串上使用以下内容。

```
URLDecoder.decode(url); 
```

这将为您提供正确的文本。解码您提供的类似内容的结果是这样的。

```
http://cliveg.bu.edu/people/sganguly/player/ Rang De Basanti - Tu Bin Bataye.mp3 
```

%20 是转义的空格字符。为了获得上述内容，我使用了 URLDecoder 对象。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-11-27T14:43:16.563

# 从 Java 11 开始使用

# [`URLDecoder.decode(url, StandardCharsets.UTF_8)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/net/URLDecoder.html#decode(java.lang.String,java.nio.charset.Charset)).

对于 Java 7/8/9 使用[`URLDecoder.decode(url, "UTF-8")`](https://docs.oracle.com/javase/8/docs/api/java/net/URLDecoder.html#decode-java.lang.String-java.lang.String-).

`URLDecoder.decode(String s)`自**Java 5起已被弃用**

关于选择的编码：

> 注意：[万维网联盟建议](http://www.w3.org/TR/html40/appendix/notes.html#non-ascii-chars)规定应使用**UTF-8 。**不这样做可能会引入不兼容性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-02-09T16:45:45.133

当我有 , , 等特殊字符时，我在使用这种方法时遇到了问题`á`。`é`我`í`的（可能是疯狂的）猜测是宽字符没有被正确编码......好吧，至少我期待看到像`%uC2BF`而不是`%C2%BF`.

编辑：我的错，这篇文章解释了 URL 编码和 JavaScript 的转义序列之间的区别：[URI encoding in UNICODE for apache httpclient 4](https://stackoverflow.com/questions/2280863/uri-encoding-in-unicode-for-apache-httpclient-4)

# sql - 构造 mysql 查询的问题（每个项目最近）

> ID：623863
> 
> 赞同：0
> 
> 时间：2009-03-08T16:46:57.163
> 
> 标签：sql, mysql

我有一个网站，用户可以在其中评论照片。我有一个这种格式的评论表：

```
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| username | varchar(12) | NO   |     | NULL    |       |
| id       | varchar(32) | NO   | MUL | NULL    |       |
| whenadd  | int(20)     | NO   |     | NULL    |       |
| text     | text        | NO   |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+ 
```

以及一张这样格式的照片表：（澄清一下，ID是指照片表中的ID，这是缩写）

```
+----------+------------------+------+-----+---------+-------+
| Field    | Type             | Null | Key | Default | Extra |
+----------+------------------+------+-----+---------+-------+
| id       | varchar(32)      | NO   | PRI | NULL    |       |
| type     | varchar(5)       | NO   |     | NULL    |       |
+----------+------------------+------+-----+---------+-------+ 
```

所以基本上，我试图返回已被评论的照片，在他们被评论的日期，按每张照片的最新评论排序。我曾尝试使用 INNER JOIN 来做到这一点，但它似乎永远无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T22:42:31.787

最好将 lastCommentDate 列添加到照片表中，并在每次有人发表评论时填充它。

它将执行得更快，而不是每次都加载此类查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T16:51:56.997

> SELECT * FROM comments LEFT JOIN photos ON comments.ID=photos.ID WHERE comments.ID=PHOTOID ORDER BY whenadd DESC

将 PHOTOID 更改为您的照片 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T16:59:09.460

`select p.id, p.type, max(c.whenadd) from photos p, comments c where p.id = c.photo_id group by photo.id order by c.whenadd desc`- 这将只返回评论的照片。使用左连接返回所有照片。但是这两个表之间似乎没有外键。表格评论应该有一个列 photo_id （或类似的东西）来引用`photo`表格中的相应照片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T17:10:46.950

这个问题对我来说有点不清楚-在评论日期已评论的照片-这似乎是每张照片。随时澄清这一点。

如果您想要按最新评论排序的照片，我会这样做：

```
SELECT
  photo.id,
  MAX(c.whenadd) as last -- and maybe other fileds as well --
FROM
  photos photo LEFT JOIN comments c ON c.id=photo.id
GROUP BY
  photo.id
ORDER BY last DESC 
```

请注意，没有评论的照片存在问题 - 它们将排在最后（我认为），因为 MAX(empty set) 为 NULL。

如果您想要在某个特殊日期发表评论的照片，按他们的最后评论排序，您只需添加另一个联接：

```
SELECT
  photo.id,
  MAX(c.whenadd) as last -- and maybe other fileds as well --
FROM
  photos photo NATURAL JOIN comments c NATURAL JOIN comments c2
WHERE
  c2.whenadd = yourspecialdate
GROUP BY
  photo.id
ORDER BY last DESC 
```

# sql-server-2005 - 限制 MS SQL SERVER 的 RAM 消耗

> ID：623864
> 
> 赞同：1
> 
> 时间：2009-03-08T16:47:39.877
> 
> 标签：sql-server-2005, deployment, memory-management

我刚刚在远程主机上将一个小型 Web 应用程序投入生产。运行一段时间后，我注意到 MS SQL Server 开始消耗服务器上的大部分 RAM，使 IIS 和我的应用程序饿死。

我尝试更改“服务器最大内存”设置，但最终内存使用量开始超过此设置。使用活动监视器，我确定我没有留下打开的连接或明显的东西，所以我猜测它在缓存、物化视图等中。

我开始相信这个设置并不意味着我认为它意味着什么。我确实注意到，如果我只是重新启动服务器，内存消耗过程会重新开始，而不会对应用程序产生任何不利影响 - 页面加载不会发生意外，所有检索都会正常工作。

必须有更好的方法来控制 sql 或强制它释放一些内存回系统？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T17:07:21.500

来自 MS 知识库：

> 请注意，max server memory 选项仅限制 SQL Server 缓冲池的大小。max server memory 选项不限制 SQL Server 为分配其他组件（例如扩展存储过程、COM 对象、非共享 DLL、EXE 和 MAPI 组件）保留的剩余未保留内存区域。由于前面的分配，SQL Server 私有字节超过最大服务器内存配置是正常的。

您是否正在使用任何扩展存储过程、.NET 代码等可能导致 SQL Server 无法控制的内存泄漏？

这里有更多关于内存/地址空间使用的[讨论](http://support.microsoft.com/kb/316749/EN-US/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-09T07:53:39.217

通常，我建议将最大服务器内存设置为安装的物理内存以下几个 Gig。

如果您需要运行 IIS 和安装在服务器上的应用程序服务器，那么您需要给 SQL Server 更少的内存。

# asp.net - 在登录页面上传递/获取会话（“userid”）。在虚拟工作室-> vb

> ID：623874
> 
> 赞同：1
> 
> 时间：2009-03-08T16:50:32.490
> 
> 标签：asp.net

在登录页面上传递/获取会话（“userid”）。在虚拟工作室-> vb

用vs登录框怎么弄？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-09T02:13:53.290

在 ASP.NET 中，通常的方法是使用登录控件。您可以在 web.config 文件中设置，当用户未登录时，使用此控件重定向到页面。

您通过会话发送内容的事实表明您正在使用 ASP，或者您仍然陷入 ASP 范式，因为没有理由控制应用程序的这一部分。即使您有完全不同的登录方法，您也可以创建自定义提供程序并仍然使用底层内置位。当你不需要的时候，为什么要重新发明轮子。

但是，我不确定您所说的 VS 登录框是什么意思。

这是有关使用登录控件的 MSDN 文章的链接。也许它会有所帮助：http: [//msdn.microsoft.com/en-us/library/ms178329.aspx](http://msdn.microsoft.com/en-us/library/ms178329.aspx)

# asp.net - ASP.net 列表框控件返回 -1

> ID：623882
> 
> 赞同：0
> 
> 时间：2009-03-08T16:54:02.403
> 
> 标签：asp.net, listbox

我试图在我的 ASP.net 页面上放置一个列表框控件，当我单击它时，selectedindex 值始终为-1。为什么这样做？我将 AutoPostBack 设置为 true。为什么总是返回-1？

请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T16:55:58.827

可能有很多原因，但我猜你是在每次加载页面时加载 ListBox 的内容。

将数据绑定代码包装在这样的 if 语句中，以允许控件保留您选择的索引：

```
if (!this.IsPostBack) 
{
    // data binding code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T16:58:26.823

它确实取决于您的操作，但 -1 通常意味着在发生 PostBack 时未选择任何内容，或者控件正在数据绑定到的项目列表为空。

# sql - ORDER BY 是否仅适用于列？

> ID：623884
> 
> 赞同：2
> 
> 时间：2009-03-08T16:54:32.137
> 
> 标签：sql

为什么`SELECT * FROM TABLE ORDER BY RAND()`工作？我认为`ORDER BY`只适用于列。

`ORDER BY RAND()`那么or到底是什么意思`ORDER BY SUM()`呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-08T16:56:20.527

**您可以按几乎所有内容**、函数（*如 RAND()）*、聚合（*如 SUM()*）等排序。

例如，[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/select.html)声明为语法：

```
 [ORDER BY {col_name | expr | position} 
```

或者[Postgresql 文档](http://www.postgresql.org/docs/8.2/static/sql-select.html)更加明确：

> 可选的**ORDER BY**子句具有以下一般形式：
> 
> `ORDER BY expression [ ASC | DESC | USING operator ] [, ...]`
> 
> 表达式可以是输出列（SELECT 列表项）的名称或序号，**也可以是**由输入列值形成的任意表达式。

对于你的第二个问题：

*   `ORDER BY RAND()`或者`ORDER BY RANDOM()`按照它所说的去做：你的行被打乱了，你得到它们的顺序是随机的。因此，如果你这样做，`SELECT * FROM ... ORDER BY RAND() LIMIT 1`你会从你的表中选择一个（=一个）随机行。
*   `ORDER BY SUM(Column)``GROUP BY`仅与语句结合使用才有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T16:57:23.520

`ORDER`将适用于您可以放入结果中的任何值（但不必是结果中的值之一）。这可以是任何源表中的列，也可以是使用函数计算的列。例如，您可以使用`ORDER UPPER(name)`不区分大小写的排序。

如果您`ORDER BY RAND()`按为结果中的每一行生成的随机数排序，即以随机顺序返回行。如果您是通过订购的，`SUM()`那么您可能也有一个`GROUP BY`，因此您可以通过计算的总发票总额来订购客户。

理想情况下，您希望使用索引中的列，因为这样会快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T17:02:06.347

实际上这取决于实现。您提到的语句不兼容 SQL92，但它可能会被实现接受。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2009-03-08T16:55:57.627

好吧，简而言之：你想错了。

# java - 在哪里可以找到 Java 中基于标准 Trie 的地图实现？

> ID：623892
> 
> 赞同：79
> 
> 时间：2009-03-08T16:57:52.473
> 
> 标签：java, algorithm, optimization, trie

我有一个 Java 程序，它存储了大量从字符串到各种对象的映射。

现在，我的选择要么依赖散列（通过 HashMap），要么依赖二分搜索（通过 TreeMap）。我想知道在流行的高质量收藏库中是否有一个高效且标准的基于 trie 的地图实现？

我过去写过自己的，但如果可以的话，我宁愿使用一些标准的东西。

快速澄清：虽然我的问题很笼统，但在当前项目中，我正在处理大量由完全限定的类名或方法签名索引的数据。因此，有许多共享前缀。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-03-08T17:51:51.843

您可能想查看Limewire 为Google Guava[贡献的 Trie 实现。](https://github.com/google/guava/issues/10)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-16T16:59:37.323

核心 Java 库中没有 trie 数据结构。

这可能是因为尝试通常被设计用于存储字符串，而 Java 数据结构更通用，通常包含任何`Object`（定义相等和散列操作），尽管它们有时仅限于 `Comparable`对象（定义顺序）。“符号序列”没有通用的抽象，尽管`CharSequence`它适用于字符串，我想你可以`Iterable`对其他类型的符号做一些事情。

这里还有一点需要考虑：当尝试在 Java 中实现传统的 trie 时，您很快就会遇到 Java 支持 Unicode 的事实。要获得任何类型的空间效率，您必须将 trie 中的字符串限制为符号的某个子集，或者放弃将子节点存储在按符号索引的数组中的传统方法。这可能是为什么尝试被认为不够通用而不能包含在核心库中的另一个原因，如果您实现自己的库或使用第三方库，则需要注意一些事情。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-20T11:54:55.263

[Apache Commons Collections](http://commons.apache.org/proper/commons-collections/) v4.0 现在支持 trie 结构。

有关更多信息，请参阅[`org.apache.commons.collections4.trie`包装](http://commons.apache.org/proper/commons-collections/javadocs/api-4.4/index.html)信息。特别是，检查[`PatriciaTrie`](http://commons.apache.org/proper/commons-collections/javadocs/api-4.4/org/apache/commons/collections4/trie/PatriciaTrie.html)类：

> PATRICIA Trie（检索字母数字编码信息的实用算法）的实现。
> 
> PATRICIA Trie 是一个压缩的 Trie。PATRICIA 不是将所有数据存储在 Trie 的边缘（并且具有空的内部节点），而是将数据存储在每个节点中。这允许非常有效的遍历、插入、删除、前驱、后继、前缀、范围和选择（对象）操作。所有操作都在 O(K) 时间内执行，其中 K 是树中最大项的位数。在实践中，操作实际上需要 O(A(K)) 时间，其中 A(K) 是树中所有项目的平均位数。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-08-21T19:53:39.403

另请查看[concurrent-trees](https://github.com/npgall/concurrent-trees#Concurrency_Support)。它们支持基数和后缀树，专为高并发环境而设计。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-23T12:58:47.497

[我在这里](http://www.superliminal.com/sources/TrieMap.java.html)编写并发布了一个简单而快速的实现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-08T17:09:19.513

你需要的是`org.apache.commons.collections.FastTreeMap`，我想。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-09T12:28:19.423

下面是 Trie 的基本 HashMap 实现。有些人可能会觉得这很有用...

```
class Trie {

    HashMap<Character, HashMap> root;

    public Trie() {
        root = new HashMap<Character, HashMap>();
    }

    public void addWord(String word) {
        HashMap<Character, HashMap> node = root;
        for (int i = 0; i < word.length(); i++) {
            Character currentLetter = word.charAt(i);
            if (node.containsKey(currentLetter) == false) {
                node.put(currentLetter, new HashMap<Character, HashMap>());
            }
            node = node.get(currentLetter);
        }
    }

    public boolean containsPrefix(String word) {
        HashMap<Character, HashMap> node = root;
        for (int i = 0; i < word.length(); i++) {
            Character currentLetter = word.charAt(i);
            if (node.containsKey(currentLetter)) {
                node = node.get(currentLetter);
            } else {
                return false;
            }
        }
        return true;
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-27T12:44:07.583

Apache 的公共集合： [org.apache.commons.collections4.trie.PatriciaTrie](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/trie/PatriciaTrie.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-05T11:44:29.977

您可以尝试[Completely](https://github.com/fmmfonseca/completely/) Java 库，它具有[PatriciaTrie](http://miguelfonseca.com/completely/com/miguelfonseca/completely/text/index/PatriciaTrie.html)实现。该 API 很小且易于上手，可在[Maven 中央存储库](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.miguelfonseca.completely%22)中找到。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-08T17:44:37.430

你也可以看看[这个 TopCoder](http://software.topcoder.com/catalog/c_component.jsp?comp=6601809&ver=1)（需要注册......）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-21T08:52:42.330

如果您需要排序地图，那么尝试是值得的。如果你不这样做，那么 hashmap 会更好。带有字符串键的 Hashmap 可以通过标准 Java 实现进行改进： [Array hash map](http://www.naskitis.com/naskitis-spire05.pdf)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-04-29T19:40:01.067

如果你不担心引入 Scala 库，你可以使用我写的这种节省空间的[实现](http://goanna.cs.rmit.edu.au/~jz/fulltext/acmtois02.pdf)。

[https://github.com/nbauernfeind/scala-burst-trie](https://github.com/nbauernfeind/scala-burst-trie)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-05-26T10:42:54.697

这是我的实现，通过以下方式享受它：[GitHub - MyTrie.java](https://github.com/shaogbi/Java/blob/master/datastructure/MyTrie.java)

```
/* usage:
    MyTrie trie = new MyTrie();
    trie.insert("abcde");
    trie.insert("abc");
    trie.insert("sadas");
    trie.insert("abc");
    trie.insert("wqwqd");
    System.out.println(trie.contains("abc"));
    System.out.println(trie.contains("abcd"));
    System.out.println(trie.contains("abcdefg"));
    System.out.println(trie.contains("ab"));
    System.out.println(trie.getWordCount("abc"));
    System.out.println(trie.getAllDistinctWords());
*/

import java.util.*;

public class MyTrie {
  private class Node {
    public int[] next = new int[26];
    public int wordCount;
    public Node() {
      for(int i=0;i<26;i++) {
        next[i] = NULL;
      }
      wordCount = 0;
    }
  }

  private int curr;
  private Node[] nodes;
  private List<String> allDistinctWords;
  public final static int NULL = -1;

  public MyTrie() {
    nodes = new Node[100000];
    nodes[0] = new Node();
    curr = 1;
  }

  private int getIndex(char c) {
    return (int)(c - 'a');
  }

  private void depthSearchWord(int x, String currWord) {
    for(int i=0;i<26;i++) {
      int p = nodes[x].next[i];
      if(p != NULL) {
        String word = currWord + (char)(i + 'a');
        if(nodes[p].wordCount > 0) {
          allDistinctWords.add(word);
        }
        depthSearchWord(p, word);
      }
    }
  }

  public List<String> getAllDistinctWords() {
    allDistinctWords = new ArrayList<String>();
    depthSearchWord(0, "");
    return allDistinctWords;
  }

  public int getWordCount(String str) {
    int len = str.length();
    int p = 0;
    for(int i=0;i<len;i++) {
      int j = getIndex(str.charAt(i));
      if(nodes[p].next[j] == NULL) {
        return 0;
      }
      p = nodes[p].next[j];
    }
    return nodes[p].wordCount;
  }

  public boolean contains(String str) {
    int len = str.length();
    int p = 0;
    for(int i=0;i<len;i++) {
      int j = getIndex(str.charAt(i));
      if(nodes[p].next[j] == NULL) {
        return false;
      }
      p = nodes[p].next[j];
    }
    return nodes[p].wordCount > 0;
  }

  public void insert(String str) {
    int len = str.length();
    int p = 0;
    for(int i=0;i<len;i++) {
      int j = getIndex(str.charAt(i));
      if(nodes[p].next[j] == NULL) {
        nodes[curr] = new Node();
        nodes[p].next[j] = curr;
        curr++;
      }
      p = nodes[p].next[j];
    }
    nodes[p].wordCount++;
  }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-10-28T08:57:23.717

我刚刚尝试了自己的 Concurrent TRIE 实现，但不是基于字符，它是基于 HashCode。我们仍然可以为每个 CHAR hascode 使用这个 Map of Map。
您可以使用代码@ [https://github.com/skanagavelu/TrieHashMap/blob/master/src/TrieMapPerformanceTest.java](https://github.com/skanagavelu/TrieHashMap/blob/master/src/TrieMapPerformanceTest.java) [https://github.com/skanagavelu/TrieHashMap/blob/master/src/TrieMapValidationTest.java对此进行测试](https://github.com/skanagavelu/TrieHashMap/blob/master/src/TrieMapValidationTest.java)

```
import java.util.concurrent.atomic.AtomicReferenceArray;

public class TrieMap {
    public static int SIZEOFEDGE = 4; 
    public static int OSIZE = 5000;
}

abstract class Node {
    public Node getLink(String key, int hash, int level){
        throw new UnsupportedOperationException();
    }
    public Node createLink(int hash, int level, String key, String val) {
        throw new UnsupportedOperationException();
    }
    public Node removeLink(String key, int hash, int level){
        throw new UnsupportedOperationException();
    }
}

class Vertex extends Node {
    String key;
    volatile String val;
    volatile Vertex next;

    public Vertex(String key, String val) {
        this.key = key;
        this.val = val;
    }

    @Override
    public boolean equals(Object obj) {
        Vertex v = (Vertex) obj;
        return this.key.equals(v.key);
    }

    @Override
    public int hashCode() {
        return key.hashCode();
    }

    @Override
    public String toString() {
        return key +"@"+key.hashCode();
    }
}

class Edge extends Node {
    volatile AtomicReferenceArray<Node> array; //This is needed to ensure array elements are volatile

    public Edge(int size) {
        array = new AtomicReferenceArray<Node>(8);
    }

    @Override
    public Node getLink(String key, int hash, int level){
        int index = Base10ToBaseX.getBaseXValueOnAtLevel(Base10ToBaseX.Base.BASE8, hash, level);
        Node returnVal = array.get(index);
        for(;;) {
            if(returnVal == null) {
                return null;
            }
            else if((returnVal instanceof Vertex)) {
                Vertex node = (Vertex) returnVal;
                for(;node != null; node = node.next) {
                    if(node.key.equals(key)) {  
                        return node; 
                    }
                } 
                return null;
            } else { //instanceof Edge
                level = level + 1;
                index = Base10ToBaseX.getBaseXValueOnAtLevel(Base10ToBaseX.Base.BASE8, hash, level);
                Edge e = (Edge) returnVal;
                returnVal = e.array.get(index);
            }
        }
    }

    @Override
    public Node createLink(int hash, int level, String key, String val) { //Remove size
        for(;;) { //Repeat the work on the current node, since some other thread modified this node
            int index =  Base10ToBaseX.getBaseXValueOnAtLevel(Base10ToBaseX.Base.BASE8, hash, level);
            Node nodeAtIndex = array.get(index);
            if ( nodeAtIndex == null) {  
                Vertex newV = new Vertex(key, val);
                boolean result = array.compareAndSet(index, null, newV);
                if(result == Boolean.TRUE) {
                    return newV;
                }
                //continue; since new node is inserted by other thread, hence repeat it.
            } 
            else if(nodeAtIndex instanceof Vertex) {
                Vertex vrtexAtIndex = (Vertex) nodeAtIndex;
                int newIndex = Base10ToBaseX.getBaseXValueOnAtLevel(Base10ToBaseX.Base.BASE8, vrtexAtIndex.hashCode(), level+1);
                int newIndex1 = Base10ToBaseX.getBaseXValueOnAtLevel(Base10ToBaseX.Base.BASE8, hash, level+1);
                Edge edge = new Edge(Base10ToBaseX.Base.BASE8.getLevelZeroMask()+1);
                if(newIndex != newIndex1) {
                    Vertex newV = new Vertex(key, val);
                    edge.array.set(newIndex, vrtexAtIndex);
                    edge.array.set(newIndex1, newV);
                    boolean result = array.compareAndSet(index, vrtexAtIndex, edge); //REPLACE vertex to edge
                    if(result == Boolean.TRUE) {
                        return newV;
                    }
                   //continue; since vrtexAtIndex may be removed or changed to Edge already.
                } else if(vrtexAtIndex.key.hashCode() == hash) {//vrtex.hash == hash) {       HERE newIndex == newIndex1
                    synchronized (vrtexAtIndex) {   
                        boolean result = array.compareAndSet(index, vrtexAtIndex, vrtexAtIndex); //Double check this vertex is not removed.
                        if(result == Boolean.TRUE) {
                            Vertex prevV = vrtexAtIndex;
                            for(;vrtexAtIndex != null; vrtexAtIndex = vrtexAtIndex.next) {
                                prevV = vrtexAtIndex; // prevV is used to handle when vrtexAtIndex reached NULL
                                if(vrtexAtIndex.key.equals(key)){
                                    vrtexAtIndex.val = val;
                                    return vrtexAtIndex;
                                }
                            } 
                            Vertex newV = new Vertex(key, val);
                            prevV.next = newV; // Within SYNCHRONIZATION since prevV.next may be added with some other.
                            return newV;
                        }
                        //Continue; vrtexAtIndex got changed
                    }
                } else {   //HERE newIndex == newIndex1  BUT vrtex.hash != hash
                    edge.array.set(newIndex, vrtexAtIndex);
                    boolean result = array.compareAndSet(index, vrtexAtIndex, edge); //REPLACE vertex to edge
                    if(result == Boolean.TRUE) {
                        return edge.createLink(hash, (level + 1), key, val);
                    }
                }
            }               
            else {  //instanceof Edge
                return nodeAtIndex.createLink(hash, (level + 1), key, val);
            }
        }
    }

    @Override
    public Node removeLink(String key, int hash, int level){
        for(;;) {
            int index = Base10ToBaseX.getBaseXValueOnAtLevel(Base10ToBaseX.Base.BASE8, hash, level);
            Node returnVal = array.get(index);
            if(returnVal == null) {
                return null;
            }
            else if((returnVal instanceof Vertex)) {
                synchronized (returnVal) {
                    Vertex node = (Vertex) returnVal;
                    if(node.next == null) {
                        if(node.key.equals(key)) {
                            boolean result = array.compareAndSet(index, node, null); 
                            if(result == Boolean.TRUE) {
                                return node;
                            }
                            continue; //Vertex may be changed to Edge
                        }
                        return null;  //Nothing found; This is not the same vertex we are looking for. Here hashcode is same but key is different. 
                    } else {
                        if(node.key.equals(key)) { //Removing the first node in the link
                            boolean result = array.compareAndSet(index, node, node.next);
                            if(result == Boolean.TRUE) {
                                return node;
                            }
                            continue; //Vertex(node) may be changed to Edge, so try again.
                        }
                        Vertex prevV = node; // prevV is used to handle when vrtexAtIndex is found and to be removed from its previous
                        node = node.next;
                        for(;node != null; prevV = node, node = node.next) {
                            if(node.key.equals(key)) {
                                prevV.next = node.next; //Removing other than first node in the link
                                return node; 
                            }
                        } 
                        return null;  //Nothing found in the linked list.
                    }
                }
            } else { //instanceof Edge
                return returnVal.removeLink(key, hash, (level + 1));
            }
        }
    }

}

class Base10ToBaseX {
    public static enum Base {
        /**
         * Integer is represented in 32 bit in 32 bit machine.
         * There we can split this integer no of bits into multiples of 1,2,4,8,16 bits
         */
        BASE2(1,1,32), BASE4(3,2,16), BASE8(7,3,11)/* OCTAL*/, /*BASE10(3,2),*/ 
        BASE16(15, 4, 8){       
            public String getFormattedValue(int val){
                switch(val) {
                case 10:
                    return "A";
                case 11:
                    return "B";
                case 12:
                    return "C";
                case 13:
                    return "D";
                case 14:
                    return "E";
                case 15:
                    return "F";
                default:
                    return "" + val;
                }

            }
        }, /*BASE32(31,5,1),*/ BASE256(255, 8, 4), /*BASE512(511,9),*/ Base65536(65535, 16, 2);

        private int LEVEL_0_MASK;
        private int LEVEL_1_ROTATION;
        private int MAX_ROTATION;

        Base(int levelZeroMask, int levelOneRotation, int maxPossibleRotation) {
            this.LEVEL_0_MASK = levelZeroMask;
            this.LEVEL_1_ROTATION = levelOneRotation;
            this.MAX_ROTATION = maxPossibleRotation;
        }

        int getLevelZeroMask(){
            return LEVEL_0_MASK;
        }
        int getLevelOneRotation(){
            return LEVEL_1_ROTATION;
        }
        int getMaxRotation(){
            return MAX_ROTATION;
        }
        String getFormattedValue(int val){
            return "" + val;
        }
    }

    public static int getBaseXValueOnAtLevel(Base base, int on, int level) {
        if(level > base.getMaxRotation() || level < 1) {
            return 0; //INVALID Input
        }
        int rotation = base.getLevelOneRotation();
        int mask = base.getLevelZeroMask();

        if(level > 1) {
            rotation = (level-1) * rotation;
            mask = mask << rotation;
        } else {
            rotation = 0;
        }
        return (on & mask) >>> rotation;
    }
} 
```

# ruby - Ruby中的p方法很难搜索

> ID：623899
> 
> 赞同：12
> 
> 时间：2009-03-08T17:02:07.127
> 
> 标签：ruby, methods

我正在尝试`p`在 Ruby 中查找有关该方法的信息。它似乎会生成有关类属性的内部信息，但是当我尝试搜索它时，我会得到每个包含字母“p”的单词。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-08T17:04:24.533

你看过 api 文档页面吗？[http://www.ruby-doc.org/core/Kernel.html#method-ip](http://www.ruby-doc.org/core/Kernel.html#method-i-p)

还有[http://apidock.com/ruby/Kernel/p](http://apidock.com/ruby/Kernel/p)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-08T17:08:28.407

您可以“直接”调用的每个方法，例如：print、p、abort、puts、readline 等，都位于 Kernel 类中。

```
 (Kernel.methods - Object.methods).sort.each do |method|
   puts method
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-08T17:05:01.317

`p`您可以从内核模块的 Ruby 文档中找到有关该方法的更多信息：
[http ://www.ruby-doc.org/core/Kernel.html#method-ip](http://www.ruby-doc.org/core/Kernel.html#method-i-p)

> p(obj) → obj
> 
> p(obj1, obj2, ...) → [obj, ...]
> 
> p() → 无
> 
> 对于每个对象，直接将 obj.inspect 后跟换行符写入程序的标准输出。
> 
> ```
> S = Struct.new(:name, :state)
> s = S['dave', 'TX']
> p s 
> ```
> 
> 产生：
> 
> ```
> #<S name="dave", state="TX"> 
> ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-10T14:31:36.817

你的意思是像：

`ri Kernel#p`

# c++ - 在命名空间中定义一个类

> ID：623903
> 
> 赞同：25
> 
> 时间：2009-03-08T17:03:18.060
> 
> 标签：c++, class, syntax, namespaces, definition

有没有比这更简洁的方法来在命名空间中定义一个类：

```
namespace ns { class A {}; } 
```

我希望类似的东西`class ns::A {};`会起作用，但可惜不是。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-03-08T17:15:56.750

你已经接近了，你可以在命名空间中转发声明类，然后如果你想在外面定义它：

```
namespace ns {
    class A; // just tell the compiler to expect a class def
}

class ns::A {
    // define here
}; 
```

您不能做的是在没有成员的命名空间中定义类，然后在命名空间之外再次定义该类。这违反了单一定义规则（或类似的废话）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-08T17:24:48.663

你可以这样做，但它并不是更简洁。

```
namespace ns {
    class A;
}

class ns::A {
}; 
```

或者

```
namespace ns {
    class B;
}

using ns::B;
class B {
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T17:20:07.897

您应该阅读的部分是：

> **7.3.1.2 命名空间成员定义**
> 
> 3 在命名空间中首先声明的每个名称都是该命名空间的成员。[...]

请注意术语 -- 声明，因此 D.Shawley（和他的示例）是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T17:11:02.130

不，你不能。引用 C++ 标准，第 3.3.5 节：

> 在所有命名或未命名命名空间 (7.3)、块 (6.3)、fun (8.3.5)、函数定义 (8.4) 和类（第 9 条）之外声明的名称具有全局命名空间范围

所以声明必须在命名空间块内——定义当然可以在它之外。

# ruby-on-rails - 带有外键和链接表的 Rails 模型

> ID：623909
> 
> 赞同：1
> 
> 时间：2009-03-08T17:05:14.203
> 
> 标签：ruby-on-rails, model, foreign-keys

我正在尝试为 ruby​​ on rails 项目创建一个模型，该模型在不同单词之间建立关系。把它想象成一本字典，其中两个词之间的“链接”表明它们可以同义使用。我的数据库看起来像这样：

```
Words
----
id

Links
-----
id
word1_id
word2_id 
```

如何使用链接表在两个单词之间建立关系。我试图创建模型，但不确定如何让链接表发挥作用：

```
class Word < ActiveRecord::Base
  has_many :synonyms, :class_name => 'Word', :foreign_key => 'word1_id'
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T20:54:05.150

一般来说，如果您的关联有 1 和 2 之类的后缀，则说明它没有正确设置。试试这个 Word 模型：

```
class Word < ActiveRecord::Base
  has_many :links, :dependent => :destroy
  has_many :synonyms, :through => :links
end 
```

链接型号：

```
class Link < ActiveRecord::Base
  belongs_to :word
  belongs_to :synonym, :class_name => 'Word'

  # Creates the complementary link automatically - this means all synonymous
  # relationships are represented in @word.synonyms
  def after_save_on_create
    if find_complement.nil?
      Link.new(:word => synonym, :synonym => word).save
    end
  end

  # Deletes the complementary link automatically.
  def after_destroy
    if complement = find_complement
      complement.destroy
    end
  end

  protected

  def find_complement
    Link.find(:first, :conditions => 
      ["word_id = ? and synonym_id = ?", synonym.id, word.id])
  end
end 
```

表：

```
Words
----
id

Links
-----
id
word_id
synonym_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T17:29:19.370

嗯，这是一个棘手的问题。这是因为同义词可以来自 word1 id 或 word2 id 或两者。

无论如何，当为链接表使用模型时，您必须在使用链接表的模型上使用 :through 选项

```
class Word < ActiveRecord::Base
  has_many :links1, :class_name => 'Link', :foreign_key => 'word1_id'
  has_many :synonyms1, :through => :links1, :source => :word
  has_many :links2, :class_name => 'Link', :foreign_key => 'word2_id'
  has_many :synonyms2, :through => :links2, :source => :word
end 
```

应该这样做，但现在您必须检查两个位置以获取所有同义词。我会在 Word 类中添加一个加入这些的方法。

```
def synonyms
  return synonyms1 || synonyms2
end 
```

|| 将结果合并在一起将连接数组并消除它们之间的重复。

*此代码未经测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-09T02:42:24.207

字模型：

```
class Word < ActiveRecord::Base
  has_many :links, :dependent => :destroy
  has_many :synonyms, :through => :links

  def link_to(word)
    synonyms << word
    word.synonyms << self
  end
end 
```

设置`:dependent => :destroy`将`has_many :links`删除与该单词关联的所有链接，然后再`destroy`输入单词记录。

链接型号：

```
class Link < ActiveRecord::Base
  belongs_to :word
  belongs_to :synonym, :class_name => "Word"
end 
```

假设您使用的是最新的 Rails，则不必为`belongs_to :synonym`. 如果我没记错的话，这是在 Rails 2 中作为标准引入的。

词表：

```
name 
```

链接表：

```
word_id
synonym_id 
```

要将现有单词作为同义词链接到另一个单词：

```
word = Word.find_by_name("feline")
word.link_to(Word.find_by_name("cat")) 
```

创建一个新词作为另一个词的同义词：

```
word = Word.find_by_name("canine")
word.link_to(Word.create(:name => "dog")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-08T20:40:45.353

我会从不同的角度来看待它；由于所有单词都是同义词，因此您不应将其中任何一个词宣传为“最好的”。尝试这样的事情：

```
class Concept < ActiveRecord::Base
  has_many :words
end

class Word < ActiveRecord::Base
  belongs_to :concept

  validates_presence_of :text
  validates_uniqueness_of :text, :scope => :concept_id

  # A sophisticated association would be better than this.
  def synonyms
    concept.words - [self]
  end
end 
```

现在你可以做

```
word = Word.find_by_text("epiphany")
word.synonyms 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-04-30T10:05:32.553

尝试实施 Sarah 的解决方案时，我遇到了 2 个问题：

首先，当想要通过做分配同义词时，该解决方案不起作用

```
word.synonyms << s1 or word.synonyms = [s1,s2] 
```

间接删除同义词也无法正常工作。这是因为 Rails 在自动创建或删除 Link 记录时不会触发 after_save_on_create 和 after_destroy 回调。至少在我尝试过的 Rails 2.3.5 中没有。

这可以通过在 Word 模型中使用 :after_add 和 :after_remove 回调来解决：

```
has_many :synonyms, :through => :links,
                    :after_add => :after_add_synonym,
                    :after_remove => :after_remove_synonym 
```

回调是莎拉的方法，稍作调整：

```
def after_add_synonym synonym
  if find_synonym_complement(synonym).nil?
    Link.new(:word => synonym, :synonym => self).save
  end
end

def after_remove_synonym synonym
  if complement = find_synonym_complement(synonym)
    complement.destroy
  end
end

protected

def find_synonym_complement synonym
  Link.find(:first, :conditions => ["word_id = ? and synonym_id = ?", synonym.id, self.id])
end 
```

The second issue of Sarah's solution is that synonyms that other words already have when linked together with a new word are not added to the new word and vice versa. Here is a small modification that fixes this problem and ensures that all synonyms of a group are always linked to all other synonyms in that group:

```
def after_add_synonym synonym
  for other_synonym in self.synonyms
    synonym.synonyms << other_synonym if other_synonym != synonym and !synonym.synonyms.include?(other_synonym)
  end
  if find_synonym_complement(synonym).nil?
    Link.new(:word => synonym, :synonym => self).save
  end
end 
```

# windows - 如何使用命令行界面管理远程 Windows Server？

> ID：623922
> 
> 赞同：10
> 
> 时间：2009-03-08T17:12:21.020
> 
> 标签：windows, powershell, remote-desktop, remote-access, remote-administration

当我是 Linux 管理员时，我可以从 SSH 命令行做任何事情。现在，作为一名 Windows 管理员，我必须处理 Windows 远程桌面图形界面，我发现该界面效果不佳（缓慢）并且难以在其中自动执行任务。

a) 我可以通过 SSH 或任何带有命令行界面的加密连接连接到 Windows 服务器吗？

b) 如果是，我可以做任何管理任务吗？

例子：

1.  在 IIS 中创建一个新的虚拟文件夹
2.  设置防火墙端口
3.  重启服务
4.  更改用户策略
5.  启动桌面应用程序

我知道 Windows PowerShell 2.0 Remoting 的存在，但我不知道它是否满足上述所有条件

到目前为止，我的结论是：Windows PowerShell 可以执行大多数管理任务，但不能执行所有管理任务。而且我仍然不知道 Windows PowerShell 2.0 Remoting 是否使用加密连接。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-08T17:45:50.657

**PowerShell**正是您要找的。它主要针对**系统管理**（尽管它作为程序员的外壳也很狂热）。

PowerShell v2 远程处理基于**Windows 远程管理**。请参阅[http://msdn.microsoft.com/en-us/library/aa384426(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa384426(VS.85).aspx)。正如您所期望的，它包括用于**加密和身份验证的设施。**

PowerShell 包含可让您执行大量日常任务的 cmdlet。Microsoft 服务器应用程序（IIS、Exchange 等）已经或正在构建 PowerShell cmdlet 来管理它们。PowerShell 的 WMI 支持非常出色，为您提供了强大的机器管理能力。PowerShell 可以直接与 .NET 对话，这让您在需要时可以比内置工具更进一步。并且为 PowerShell 编写 C# 来调用也很干净。

您要求提供命令行界面，但不要认为您受限于古老而笨拙的 Windows 控制台子系统。PowerShell v2 包括一个新的 GUI 交互式外壳/脚本编辑器，具有着色和调试功能。好可爱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T18:30:22.733

你也可以试试[http://sshwindows.sourceforge.net/](http://sshwindows.sourceforge.net/)

我没有个人经验，但它看起来很有希望。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T17:15:29.920

你考虑过谷歌吗？（看起来您编辑了您的问题。您现在不再询问是否可以使用 PowerShell 完成示例任务）

[适用于 IIS 7 的 Powershell 管理单元](http://www.iis.net/downloads/default.aspx?tabid=34&g=6&i=1664)

[重启服务](http://adminscripteditor.com/syntax.asp?act=v&id=1006)

[组策略](http://technet.microsoft.com/en-us/library/dd367856.aspx)

ETC...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T17:49:42.847

很抱歉没有回答你的问题。我也有类似的情况。

我放弃了在 windows shell 上执行所有任务

相反，我确实将 shell 用于某些任务，但我也在使用 rdesktop（通过 ssh），并将最重要的 gui 管理工具的图标放在 windows 快速启动上。

我放弃了让 windows 感觉像 unix，因为它永远不会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-04T15:51:30.380

或者尝试下载并安装 eurysco 以使用基于另一种逻辑的以下功能......

1.在 IIS 中创建一个新的虚拟文件夹（从 eurysco 命令行启动 vbs 或 powershell 脚本） 2.设置防火墙端口（从 eurysco 命令行启动 netsh.exe advfirewall） 3.重新启动服务（从 eurysco 服务控制） 4.更改用户策略（从 eurysco 系统注册表或命令行启动 powershell 脚本） 5.启动桌面应用程序（从 eurysco 命令行启动 powershell 脚本）

[http://www.eurysco.com/features](http://www.eurysco.com/features)

# java - 为什么我的纹理不显示？

> ID：623923
> 
> 赞同：0
> 
> 时间：2009-03-08T17:12:26.680
> 
> 标签：java, opengl, textures, jogl

好的，我正在使用 Java 和 JoGL。我正在尝试加载并显示纹理，但纹理根本没有显示出来。我根本没有收到任何错误，所以我不知道问题可能是什么。

```
import javax.media.opengl.*;
import javax.media.opengl.glu.*;
import com.sun.opengl.util.*;
import com.sun.opengl.util.j2d.*;

import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import java.io.*;
import java.net.*;
import java.nio.*;
import javax.imageio.*;
import javax.swing.*;

public class chartest extends JFrame implements GLEventListener, KeyListener
{
    private int texture;

    public void display(GLAutoDrawable gLDrawable)
    {
      final GL gl = gLDrawable.getGL();
      gl.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT);
      gl.glLoadIdentity();

      gl.glColor3f(1.0f, 1.0f, 1.0f);
      gl.glBindTexture(GL.GL_TEXTURE_2D, texture);

      gl.glBegin(GL.GL_QUADS);              // Draw A Quad
        gl.glTexCoord2f(0.0f, 0.0f); gl.glVertex3f(-12.0f, -19.0f,  -15.0f);
        gl.glTexCoord2f(1.0f, 0.0f); gl.glVertex3f( 12.0f, -19.0f,  -15.0f);
        gl.glTexCoord2f(1.0f, 1.0f); gl.glVertex3f( 12.0f,  19.0f,  -15.0f);
        gl.glTexCoord2f(0.0f, 1.0f); gl.glVertex3f(-12.0f,  19.0f,  -15.0f);
      gl.glEnd();               // Done Drawing The Quad
      gl.glFlush();
    }

    public void displayChanged(GLAutoDrawable g, boolean b, boolean b2){}

    public void init(GLAutoDrawable gLDrawable)
    {
      final GL gl = gLDrawable.getGL();
      gl.glClearColor(1.0f, 0.0f, 0.0f, 0.0f);
      gl.glShadeModel(GL.GL_FLAT);
      gl.glEnable(GL.GL_TEXTURE_2D);

      texture = genTexture(gl);
      gl.glBindTexture(GL.GL_TEXTURE_2D, texture);
      URL url = this.getClass().getResource("test.png");

      try
      {
        BufferedImage img = ImageIO.read(url);
        makeRGBTexture(gl, new GLU(), img, GL.GL_TEXTURE_2D, false);
      }

      catch(Exception e)
      {
        e.printStackTrace();
      }

      gl.glTexParameteri(GL.GL_TEXTURE_2D,GL.GL_TEXTURE_MIN_FILTER,GL.GL_LINEAR); 
      gl.glTexParameteri(GL.GL_TEXTURE_2D,GL.GL_TEXTURE_MAG_FILTER,GL.GL_LINEAR); 
    }

    public void reshape(GLAutoDrawable gLDrawable, int x, int y, int width, int height)
    {
      final GL gl = gLDrawable.getGL();
      final GLU glu = new GLU();

      if (height <= 0) // avoid a divide by zero error!
        height = 1;
      final float h = (float)width / (float)height;
      gl.glViewport(0, 0, width, height);
      gl.glMatrixMode(GL.GL_PROJECTION);
      gl.glLoadIdentity();
      glu.gluPerspective(45.0f, h, 1.0, 20.0);
      gl.glMatrixMode(GL.GL_MODELVIEW);
      gl.glLoadIdentity();
    }

    public void keyPressed(KeyEvent e)
    {
        if (e.getKeyCode() == KeyEvent.VK_ESCAPE)
        System.exit(0);
    }
    public void keyReleased(KeyEvent e) {}
    public void keyTyped(KeyEvent e) {}

    public static void main(String[] args) {

        chartest c = new chartest();

        GLCanvas canvas = new GLCanvas(new GLCapabilities());
        canvas.addGLEventListener(c);
        c.add(canvas);
        c.setSize(640, 480);
        canvas.addKeyListener(c);
        c.addWindowListener(new WindowAdapter()
        {
          public void windowClosing(WindowEvent e)
          {
            System.exit(0);
          }
        });
        c.setVisible(true);
        canvas.requestFocus();
    }

    //-----------------------
    private void makeRGBTexture(GL gl, GLU glu, BufferedImage img, int target, boolean mipmapped)
    {
      ByteBuffer dest = null;
      switch (img.getType())
      {
        case BufferedImage.TYPE_3BYTE_BGR:
        case BufferedImage.TYPE_CUSTOM:
        {
          System.out.println("Custom");
          byte[] data = ((DataBufferByte) img.getRaster().getDataBuffer()).getData();
          dest = ByteBuffer.allocateDirect(99999);
          dest.order(ByteOrder.nativeOrder());
          dest.put(data, 0, data.length);
          break;
        }
        case BufferedImage.TYPE_INT_RGB:
        {
          int[] data = ((DataBufferInt) img.getRaster().getDataBuffer()).getData();
          dest = ByteBuffer.allocateDirect(data.length * BufferUtil.SIZEOF_INT);
          dest.order(ByteOrder.nativeOrder());
          dest.asIntBuffer().put(data, 0, data.length);
          break;
        }
        default:
          throw new RuntimeException("Unsupported image type " + img.getType());
      }

      if (mipmapped)
      {
        glu.gluBuild2DMipmaps(target, GL.GL_RGB8, img.getWidth(), img.getHeight(), GL.GL_RGB, GL.GL_UNSIGNED_BYTE, dest);
      }
      else
      {
        gl.glTexImage2D(target, 0, GL.GL_RGB, img.getWidth(), img.getHeight(), 0, GL.GL_RGB, GL.GL_UNSIGNED_BYTE, dest);
      }
    }

    private int genTexture(GL gl)
    {
      final int[] tmp = new int[1];
      gl.glGenTextures(1, tmp, 0);
      return tmp[0];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T21:56:43.923

我没有看到您检查任何 OpenGL 错误。JOGL 提供了一种简单的方法来做到这一点。只需放在`glDrawable.setGL(new DebugGL(glDrawable.getGL()));`init 方法的开头即可。

如果这没有帮助，我会检查图像数据和纹理变量是否不为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-09T01:07:39.253

我设法通过使用 com.sun.opengl.util.texture.Texture 和我在[这里](http://forums.sun.com/thread.jspa?threadID=5197213)找到的教程来加载纹理。

# open-source - 开源会给 Symbian 带来好处吗？

> ID：623924
> 
> 赞同：1
> 
> 时间：2009-03-08T17:13:12.030
> 
> 标签：open-source, symbian

对于 iPhone 和 Android，我觉得 Symbian 已经过时了。但它将是开源的。然而，API 看起来非常不同。有这么多不同类型的量词、数组和活动对象，人们对此感到毛骨悚然。维基百科文章中的厕所在这里：

[http://en.wikipedia.org/wiki/Symbian_OS#Developing_on_Symbian_OS](http://en.wikipedia.org/wiki/Symbian_OS#Developing_on_Symbian_OS)

[http://en.wikipedia.org/wiki/Active_objects](http://en.wikipedia.org/wiki/Active_objects)

我认为当它开放时，社区应该做的第一件事就是清理它。虽然它非常困难，但我觉得它是必要的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-08T17:21:19.373

symbian 开源的主要原因是为了变得有竞争力。Symbian 的主要优势是非常稳定，拥有十多年的移动体验。在诺基亚的大力支持下，加上 Qt 的移植，它绝对可以成为主要玩家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-10T12:55:57.840

维基百科并不完全具有代表性。

[Symbian OS 开发基础知识最近在http://www.quickrecipesonsymbianos.com](http://www.quickrecipesonsymbianos.com)被归结为不到 50 页

有一个完整的生态系统知道为 Symbian OS 开发的细节。C++ 习语可能很难学习，但在使用移动平台时它们是有目的的。

摆脱它们几乎没有技术上的理由。

让开发人员的事情变得更简单是另一个目标。不过，一个非常重要的。这就是为 Symbian OS 开发引入许多运行时的原因。Qt、Ruby、Java、python、OpenC、Flash、NS Basic、.Net...

定制的开放式 C++ 允许开发人员有效地添加运行时。

每个运行时都有自己的权衡来平衡性能和易用性。

开源肯定会使运行时集成和原生 c++ 开发更容易，但它也有商业意义。它引起了更多人的兴趣，并且该平台与其竞争对手相比更具优势。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T15:27:08.607

symbian os 朝着使用更通用的语言进行开发的方向发展，包括 C、ruby python 等。尝试将 symbian c++ 视为 WIN32 编程（你不是告诉我这很容易！），如果你不想使用您不必这样做，但它是母语，因此效率最高。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-15T18:25:06.127

我认为现在说 Symbian 开源对操作系统来说是好事还是坏事还为时过早。为 Symbian 基金会网站选择品牌的争论表明，Symbian 软件在未来将扮演的角色缺乏明确性。

虽然确实有一个完整的生态系统知道为 Symbian OS 开发的细节，但这本身就毫无意义。毕竟，仍然有一个活跃的“生态系统”知道如何为 IBM 大型机开发 Cobol 应用程序。

您需要考虑生态系统的规模，并意识到这个生态系统很小，因为 Symbian OS 已经存在了十多年，并且软件现在支持超过 1 亿台设备。再考虑一下围绕 Google 和 Apple 产品的生态系统的增长速度——Symbian 从来没有产生过那种程度的兴奋，也从来没有看到开发人员对这种兴趣的增长。当然，我们已经过去了十年，你可以说 Symbian 已经完成了艰苦的工作并创造了谷歌和苹果现在竞争的环境。但是仅仅因为 Symbian 是第一个，并没有使它成为最好的，也没有赋予它任何生存的权利。

确实，Symbian C++ 习语很难学。但是，建议没有理由摆脱它们是不正确的。理由是 10 年来一直认为为 Symbian OS 开发本机代码太难了。大多数（如果不是全部）这些痛苦的习语都是十多年前做出的设计决策，虽然在今天的移动设备上仍然有益，但它们已不再是必不可少的。在过去的十年里，移动硬件有了很大的发展。Symbian OS 并没有从根本上改变，至少在开发者产品方面是这样。现在考虑一下，如果硬件已经发展到现在，但是软件在 Windows 3.1 或 95 上停止了，PC 会在哪里。对于初学者来说，我们几乎可以肯定不能以这种方式进行讨论。

查看其他移动平台，请考虑 Android 和 Maemo。两者都是基于linux的系统。两者都使用更多以开发人员为中心的标准开发方法，这让 Symbian OS 看起来像是来自另一个时代。

这本身并不一定是个问题，因为正如其他人所指出的，Symbian OS 支持多种运行时环境，这使得对于碰巧运行 Symbian OS 的移动设备的开发对于普通开发人员来说更容易上手。

将运行时支持归结为自然结论，底层操作系统变得无关紧要。设备制造商根据成本、上市时间、质量等做出选择。但最终用户并不关心，并且在许多情况下不知道操作系统是什么。然后开发人员针对他们喜欢的运行时进行开发，而不是编写本机代码。

当然，我们还没有得出这个结论。我们还在漫长的道路上前行。因此，本机代码在移动设备中仍然扮演着重要的角色。因此，开发人员可以轻松地为给定平台编写代码是很重要的——假设设备制造商相信支持开发人员平台。

那么，开源对 Symbian 有好处吗？很难看出开源对 Symbian 有多么不利。但好不好，还要看社区能否把Symbian OS做成社区需要的OS。

# asp.net-mvc - 在单个页面上呈现来自多个控制器的多个视图

> ID：623927
> 
> 赞同：2
> 
> 时间：2009-03-08T17:13:48.487
> 
> 标签：asp.net-mvc

在我网站的主页上，我想展示几个视图，它们依赖于它们自己的控制器进行数据检索。我不想从 Home 控制器中的 DAL 中检索任何内容。

例如，我想显示列出前 5 条新闻的视图、数据库中随机引用的视图、用户购物车内容的另一个视图等。

谷歌搜索后，我发现`RenderAction`几乎完美的方法，但它在 RC1 中不可用，仅在 Futures 中可用，并且显然它有一些问题。

我也发现`RenderPartial`了，但这依赖于主控制器将数据传递给视图。

**补充说明：**

我不希望 Home 控制器中的数据访问逻辑的主要原因是避免重复代码和逻辑。我将在几个页面/控制器中使用前 5 个新闻视图。我不想在每一个中重复数据检索。我已经将很多逻辑和验证分离到业务层。我追求的解决方案是经典 ASP 中的 RenderAction 或 UserControls。我知道我也可以在 MVC 中使用它们，但是......有什么意义？我的意思是，如果我要问的东西太复杂或太荒谬（可重用的 UI 组件），那么 MVC 绝对不适合我，我认为它严重不如经典的 ASP.NET，因为这个要求真的很简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T17:23:40.243

您要问的是基本上不在 HomeController 中执行数据访问，这似乎是一种教条的方法。我会考虑使用 Futures 程序集中的 RenderAction （不确定它有什么问题，我在许多项目中使用它）或 MvcContrib 的[SubControllers](http://codeplex.com/mvccontrib)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T17:24:12.020

虽然我可以理解不想在多个控制器中复制功能的愿望，但我不理解不愿意让您的 Home 控制器与 DAL 交互。我认为局部视图绝对是要走的路。我不复制该功能的解决方案是将生成各种视图数据的代码推送到您的业务或数据层。然后，您可以从使用分部视图的每个必需的控制器操作中引用它。将它放在业务层可以将控制器与您的数据层隔离，如果这是您想要的，但我仍然认为控制器操作的正确工作是获取数据并将其提供给视图。

另一个可能的解决方案是通过 Ajax 回调将 Home 控制器生成的视图填充到生成所需视图组件的各种控制器操作。这样做的缺点是它不会在浏览器中没有 javascript 的情况下优雅地失败。

**编辑**

根据您的说明，我建议实现一个基本控制器，为 ActionExecuted 中的共享控件填充 ViewData（以便仅在操作成功时完成）。当您想要继承此行为时，从基本控制器派生您的其他控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T17:30:05.033

如果您*真的*不想使用`RenderAction`，那么您唯一的其他选择就是使用操作过滤器加载必要的数据片段。您的家庭控制器可能如下所示：

```
public class HomeController : Controller
{
    [RequireNews]
    [RequireQuotes]
    [RequireCart]
    public ActionResult Index()
    {
        return View();
    }
} 
```

这些动作过滤器可以在需要的地方重复使用。您也可以选择将它们放在控制器类本身上。

# c++ - 我应该使用哪种浮点图像格式？

> ID：623929
> 
> 赞同：13
> 
> 时间：2009-03-08T17:14:22.760
> 
> 标签：c++, graphics, rendering, file-format, hdrimages

过去，我将 RGB 图像（从物理模拟生成）保存为 8 位/通道 PPM 或 PNG 或 JPEG。

现在我想保留模拟输出的动态范围，这意味着保存浮点图像，然后将转换为 8 位/通道作为后处理步骤（这样我就可以调整转换为 8 位而不运行再次进行冗长的模拟）。

是否出现了“标准”浮点图像格式？

好的免费支持库/查看器/操作工具，最好在 Debian 中提供，将是一个奖励。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-08T17:32:52.513

您是否研究过 Radiance RGBE (.hdr) 和[OpenEXR](http://en.wikipedia.org/wiki/OpenEXR) (.exr)。RGBE[这里有一些源代码](http://www.graphics.cornell.edu/online/formats/rgbe/)。NVIDIA 和 ATI 都在其显卡中支持 EXR 数据。[OpenEXR 下载页面](http://www.openexr.com/downloads.html)上有源代码和二进制文件。ILM 创建了 OpenEXR，并获得了广泛的支持。OpenEXR 支持每个通道的 16 位和 32 位浮点数，这是当今大多数人使用的，除非他们编写了自己的格式。

*   Linux的[像素图像编辑器也支持 EXR 编辑。](http://www.kanzelsberger.com/pixel/?p=70)

*   [如果您要在 Linux 上使用 HDR， pfstools](http://pfstools.sourceforge.net/)也是必需的。它是一组用于读取、写入和操作 HDR 的命令行程序，并具有 Qt 和 OpenGL 查看器。

*   还有适用于 linux 的 jpeg2exr

*   下面是 OpenEXR 查看器的其他一些[debian 软件包](http://packages.debian.org/search?keywords=openexr)。

*   基于此，看起来某处还有一个[Gimp 插件。](http://grafpup.org/news/?p=103)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T17:52:07.960

看起来[FITS](http://heasarc.gsfc.nasa.gov/docs/heasarc/fits_overview.html)的现代化身可以满足您的既定需求，但我也建议您考虑使用物理学界广泛使用的优秀分析包之一中的 2D 直方图结构：[ROOT](http://root.cern.ch/)或[AIDA](http://aida.freehep.org/)是我的现代版本我很熟悉。

* * *

*注意：自从我将*FITS 用于任何事情已经十多年了，但我记得它开始了一种很好且灵活的方式来存储相当原始的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-17T06:49:25.933

[为了将来参考， TIFF](https://en.wikipedia.org/wiki/TIFF)格式也相当普遍。您可以使用免费的开源[LibTIFF](http://www.libtiff.org/)进行 I/O。

# c# - 二进制数据 Vb6 到 C#

> ID：623935
> 
> 赞同：0
> 
> 时间：2009-03-08T17:17:58.960
> 
> 标签：c#, vb6, file-io, binary, binary-data

我有问题！

我有一个我知道是使用 Vb6 创建的二进制数据，我想使用 C# 读取所有信息。

我怎样才能做到这一点？

我没有文件的数据结构！！！

感谢您的关注

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T17:48:33.287

如果你知道二进制流的结构，你可以使用[BinaryReader](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)类：

```
using (Stream inputStream = new FileStream("test.bin", FileMode.Open, FileAccess.Read, FileShare.Read))
using (BinaryReader reader = new BinaryReader())
{
    int value1 = reader.ReadInt32(); // read 32 bit integer
    float value2 = reader.ReadSingle(); // read a single-precision 32-bit number
    char[] value3 = reader.ReadChars(10); // read 10, 16-bit unicode characters
    ...
} 
```

如果您不知道要阅读的结构，则需要进行一些艰难的猜测。

# java - 有没有人发现垃圾收集调整很有用？

> ID：623939
> 
> 赞同：21
> 
> 时间：2009-03-08T17:21:17.363
> 
> 标签：java, garbage-collection, performance

我已经阅读了大量关于在 Java 中调整 GC 的文章，并且经常想知道有多少人*真正*使用了一些更高级的特性。

我总是尽可能避免调整，而是专注于编写尽可能简单的代码（Brian Goetz 的建议）——到目前为止，这对我来说似乎效果很好。

这些调优策略是否能够适应不同 VM 版本的变化，还是需要不断重新评估？

我使用的一项调整是 -server 标志。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-08T17:36:00.230

我目前工作的一部分是维护和提供一个大型 Java 应用程序，该应用程序设计为使用大量内存（目前大约 8 Gb）运行，主要是由于正在进行大量缓存数据的计算。我使用标准 GC 设置进行了初始部署，主要是因为没有简单的方法来模拟全速运行的生产环境。

在接下来的几个月中，我分阶段自定义了 GC 设置。一般来说，最大的可用旋钮似乎是调整增量 gc 的频率和幅度 - 最大的改进是用较大的周期性 gc 换取更小和更频繁的 gc。但我们肯定能够看到性能改进。

我不会发布我的具体设置，因为 a) 它们特定于我们的设置，b) 因为我手边没有它们 :)。但总的来说，我发现的是

*   在调整默认 gc 设置方面做了大量工作。 *几乎*总是默认设置比我所做的任何调整都好。
*   至少对我来说，gc 调整实际上值得的情况非常极端，以至于试图模拟它们是不合理的，所以我必须通过实验和渐进的方式进行。

[这是上](https://stackoverflow.com/questions/202502/appropriate-tomcat-5-5-start-up-parameters-to-tune-jvm-for-extremely-high-demand/202555#202555)一个很好的参考。堆栈溢出讨论。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-08T17:38:30.737

绝大多数开发人员将永远不必（或想要）调整 GC。我曾与不得不调整它的人一起工作，这里是建议：

> 在尝试调整垃圾收集器之前，请确保 100% 已使用分析器进行验证。到底是怎么回事。一旦开始调整，请确保使用分析器验证它是否具有积极影响。

您还应该重新审视您运行的每个版本的 VM 所做的更改（不同的 VM 将具有不同的调整策略）。

我曾经帮助过一个 GC 问题的人，结果证明他们没有关闭 JDBC 结果集（或类似的问题）。这导致内存永远不会被释放（他的代码出于某种原因保留在它们上面）。解决该问题使程序从 20 分钟缩短到 30 秒或几分钟。内存使用量也下降了很多。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-08T17:24:33.470

我不得不说，我自己并没有太多需要使用调音。但我与编写延迟至关重要的代码的人密切合作：他们大量使用这种调整 - 指定要使用的 GC 算法、最大暂停时间、幸存率等。

因此，我想答案是：*如果延迟对应用程序至关重要，您可能需要考虑调整 GC*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-08T17:38:58.583

我想说最常见的调整是最大内存大小。大多数其他内存选项都有合理的默认值，并且经常过度调整恕我直言。即当它真的没有太大区别时设置。我经常看到人们设置了很多选项，而其中一半是默认选项。;)

使用分析器是改善 GC 行为的最有用的方法（通过减少创建的对象数量）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-08T19:27:57.590

我有，但最近没有。我正在开发的应用程序是实时渲染由单个运动 JPEG 图像构成的视频流。当时（大约 JDK 1.2 和 1.3），该`-Xincgc`设置会将客户端垃圾收集器从更多的大爆炸清理切换到定期清理少量垃圾的模式。结果，帧延迟的分布要低得多，给人的印象是视频更流畅（而不是 1-2-3-pause，1-2-3-pause）。

我已经很长时间没有查看该代码了，但我强烈怀疑使用现代垃圾收集算法`-Xincgc`实际上会降低性能。

在当今世界，我想说标准优化怀疑应该始终适用：profile profile profile。你确定瓶颈真的是垃圾收集器......？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-08T19:44:31.963

简而言之，是的，它对于调优任何严肃的 Java 应用程序都非常有用。我们经常发现，在生产场景中，稳定的应用程序和完全不可预测的应用程序之间存在差异。这当然不是我做的第一件事，但是一旦你的应用程序可以工作并且可以对其施加真正的负载，这是当时首先要调查的事情之一。

# .net - Different mscoree.dll entry points on the desktop & on a device?

> ID：623952
> 
> 赞同：0
> 
> 时间：2009-03-08T17:27:18.360
> 
> 标签：.net, visual-studio, visual-studio-2008, compact-framework

In a **smart device project** I'm trying to Pinvoke a function that should supposedly be available in mscoree.dll. The associated definition is as follows:

```
[DllImport("mscoree.dll", EntryPoint = "#29")]
internal static extern int Object_GetHashCode(object obj); 
```

You'll find this with Reflector in the internal class EE in mscorlib.dll. Note that this function is called from Object.GetHashCode().

I have a **smart device test project** that indirectly invokes Object_GetHashCode. When I run it on the desktop everything works fine. When I run it on an emulator, then I get the following error:

System.MissingMethodException: Can't find an Entry Point '#29' in a PInvoke DLL 'mscoree.dll'.

Why does this happen? Doesn't exactly the same mscorlib.dll run on the emulator and on the desktop? It seems so because when I look at the implementation of Object.GetHashCode() that comes with mscorlib.dll distributed inside the NETCFv35.ppc.armv4.cab then I see that it also calls EE.Object_GetHashCode(). Why can mscorlib.dll call into mscoree.dll and I can't?

**EDIT**:

The mscorlib reference in the Visual Studio project points to the following file,

C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\WindowsCE\mscorlib.dll (210kB)

but by default Reflector shows the contents of the following file:

C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\mscorlib.dll (920kB)

These files have different implementations for System.Object.GetHashCode(). The former is simply **empty** while the latter looks as follows:

```
public virtual int GetHashCode()
{
    return EE.Object_GetHashCode(this);
} 
```

In fact all methods in the former file seem to be empty and the much smaller size seems to hint into the direction that the former file is just a placeholder, so that VS can reference something?

Lastly, I tried to find mscorlib.dll in the files on the emulator but failed. The Installer log file says the install location is \Windows but there's no mscorlib.dll anywhere. Where is this stuff?

In general, I have a hard time Googling for answers when it comes to the CF, not sure why?

P.S. I'm trying to find an answer to the [this](https://stackoverflow.com/questions/470044/-net-compact-framework-gethashcodeobject-equivalent) question.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T13:39:13.313

You simply cannot make some assumption that the entry points would ever be at the same ordinal. In fact it's unwise to assume they will remain the same across versions of the same DLL even on the same platform (meaning that calling to ordinal 29 on the desktop may work in theis version, but the function your after could easily move in the next build when it gets recompiled and linked). Calling by ordinal is way, way, way fragile and risky.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T18:06:11.340

In Windows CE devices Win32 functions aren't necessarily in the same dll files as their desktop equivalents. Most of the functions are located in coredll.dll. Try this one first. If it doesn't work you need to find the name of the dll in a Windows CE device. MSDN can be useful. Also try the documentation for Platform Builder.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T20:29:23.110

Can I ask a stupid question? Why are you trying to P/Invoke `Object.GetHashCode()`? If I have an object of type `Object` I can call the method directly from managed code, no P/Invoke necessary.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-16T02:39:24.350

Have you tried examining the DLL using [Dependency Walker](http://www.dependencywalker.com/)? At the very least this should allow you to replace "#29" with the name for the function.

# asp.net - 我可以在 ASP.NET 应用程序中禁止 IP 地址（或地址范围）吗？

> ID：623955
> 
> 赞同：5
> 
> 时间：2009-03-08T17:28:33.897
> 
> 标签：asp.net, security

禁止特定 IP（或地址范围）访问我的公开网站的最简单方法是什么？

是否可以仅使用 ASP.NET 来做到这一点，而无需修改任何 IIS 设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-08T17:42:06.237

在 asp.net 中使用 httpmodule 既简单又快捷，只需看看 Hanselman 的帖子： [http ://www.hanselman.com/blog/AnIPAddressBlockingHttpModuleForASPNETIn9Minutes.aspx](http://www.hanselman.com/blog/AnIPAddressBlockingHttpModuleForASPNETIn9Minutes.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T17:35:10.230

您可以检查该`Request.ServerVariables["REMOTE_ADDR"]`值，如果它们被禁止将它们重定向到雅虎或其他东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T17:40:48.143

事实上，Spencer Ruport 的建议是正确的方法。（但不确定我是否会重定向到雅虎 - 通知用户他们已被禁止的页面会更好，如果客户认为他们被无意禁止，可以选择联系网络管理员）。

我要补充一点，首先检查*HTTP_X_FORWARDED_FOR*服务器变量（表示代理转发的 IP，如果没有，则为 null）是明智的，以避免代理的 IP 地址问题（因此可能还有许多其他用户）也被禁止。

# sql - 搜索在 SQl2000/2005 中存储为二进制图像的 HTML（没有全文）

> ID：623957
> 
> 赞同：0
> 
> 时间：2009-03-08T17:29:34.067
> 
> 标签：sql, sql-server, full-text-search

我正在构建一个简单的搜索工具来搜索 'n' 篇 html 内容。我已经尝试了全文搜索选项，一切都很好，直到我们上线，我在网络主机正确排序的问题上遇到了很多麻烦。所以我可能不得不搬到不支持 SQL 全文的主机上。

所有文章都存储在 SQL 'image' 列中，我想做的只是在此列上运行 LIKE'%keyword%' 搜索，但不知道如何执行此操作，甚至不知道是否可行。

SQLserver 可以解码二进制文件并即时进行搜索吗？

还是将内容的纯文本版本存储在第二列中会更好吗？

我查看了 Lucene.net 项目，但不确定这是否适用于共享托管平台。

任何帮助将不胜感激。

干杯。克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T17:40:19.423

这取决于您的 SQL Server 版本——在 2000 年，您可能不走运。“图像”实际上只是一个二进制 blob - 没有字符串函数或任何东西可以在它上面工作。

在 SQL Server 2005 中，您可以将其（在数据库模式中或使用 CAST 即时）转换为 VARCHAR(MAX) - 一种高达 2 GB 的文本类型，它可以处理普通的字符串函数，并且可以使用 WHERE CAST(blob AS VARCHAR(MAX)) LIKE '.......' 进行搜索

它不会是闪电般迅速 - 但它可能会奏效。我更愿意将该列的数据类型更改为 VARCHAR(Max)，不过——所有只是文本，最多支持 2 GB——对于一些 HTML 文档来说应该足够了。

马克

# sql-server - sql server 2008 快递/企业版

> ID：623960
> 
> 赞同：1
> 
> 时间：2009-03-08T17:31:08.150
> 
> 标签：sql-server, login

我使用 Windows 身份验证登录并在登录表中创建一个条目/用户。

新的 testuser 具有 sql-server 身份验证，但如果尝试登录本地或远程，则只有错误 18456。

有什么技巧吗...这应该像解释的那样简单...但是应该可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-08T18:03:13.097

我相信这只是默认安装禁用了 SQL 服务器身份验证。在管理工作室中检查您的 SQL 服务器属性（在对象资源管理器中右键单击服务器，然后选择“属性”），在左侧面板中选择“安全”菜单。您在右侧选项面板的顶部有“服务器身份验证”选项，其中包含 2 个选项。确保选择了“SQL 服务器和 Windows 身份验证模式”，而不是默认的“Windows 身份验证模式”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T17:37:44.110

我不太明白你的问题 - 你能澄清一下吗？

您使用 Windows 帐户登录 - 那么该 Windows 帐户（或它所属的 Windows 组）在 SQL Server 中是否具有“登录名”？

您如何尝试使用新的“testuser”登录？你是如何尝试连接的？来自 ADO.NET 应用程序？SQL Server 管理工作室？？错误 18456 可能意味着“登录失败” - 您的“testuser”是否有 SQL 登录？并且该登录是否允许使用您尝试使用的数据库？

请给我们更多信息以继续 - 谢谢！

马克

# c# - WPF 触发器：在触发器中更改超出范围的控件样式

> ID：623964
> 
> 赞同：1
> 
> 时间：2009-03-08T17:33:47.707
> 
> 标签：c#, wpf, data-binding, .net-3.5, triggers

我无法在 XAML 中为这个问题提出解决方案：

`IsMouseOver`当左按钮为真时，我想将右按钮的宽度设置为某个值。我不知道该放在哪里：在其中一个按钮的样式或模板中，或者在网格上的样式中。甚至可能吗？

```
<Border Style="{StaticResource ContentBodyStyle}" x:Name="Border" >
    <Grid Width="Auto" Height="Auto" Style="{DynamicResource GridStyle1}">
        <Grid.ColumnDefinitions>
        <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Button Margin="0,0,0,0" Content="Button" Grid.Row="0" x:Name="BtnLeft" Style="{DynamicResource ButtonStyle1}"/>
        <Button Margin="0,0,0,0" Content="Button" Grid.Column="1" x:Name="BtnRight" Width="0"/>
    </Grid>
</Border> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T18:37:59.907

我不确定您是否可以为控件范围之外的控件设置属性，并为其分配样式。即使有可能，这样做似乎也不对。你可以在你的场景中做的是使用事件触发器和故事板，在它们对两个按钮可见的任何地方定义。这是一个如何修改 BtnLeft 的示例，尽管我更愿意将情节提要放在树的更远的位置，以便在必要时允许重用：

```
<Button Margin="0,0,0,0" Content="Button" Grid.Row="0" x:Name="BtnLeft" Style="{DynamicResource ButtonStyle1}">
    <Button.Resources>
        <Storyboard x:Key="OnMouseEnter1">
            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                Storyboard.TargetName="BtnRight"
                Storyboard.TargetProperty="Width">
                <SplineDoubleKeyFrame KeyTime="00:00:00.5" Value="75"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Key="OnMouseLeave1">
            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" 
                Storyboard.TargetName="BtnRight" 
                Storyboard.TargetProperty="Width">
                <SplineDoubleKeyFrame KeyTime="00:00:00.5" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </Button.Resources>
    <Button.Triggers>
        <EventTrigger RoutedEvent="Mouse.MouseEnter" SourceName="BtnLeft">
            <BeginStoryboard Storyboard="{StaticResource OnMouseEnter1}"/>
        </EventTrigger>
        <EventTrigger RoutedEvent="Mouse.MouseLeave" SourceName="BtnLeft">
            <BeginStoryboard Storyboard="{StaticResource OnMouseLeave1}"/>
        </EventTrigger>
    </Button.Triggers>
</Button> 
```

您可以使用 MouseEnter 和 MouseLeave 事件来代替 IsMouseOver 属性。那应该为您提供相同的功能。

编辑：在按钮范围内定义触发器时，`SourceName`可以省略该属性。`EventTrigger`

# php - 分组依据并在日期下显示条目

> ID：623968
> 
> 赞同：1
> 
> 时间：2009-03-08T17:35:05.723
> 
> 标签：php, sql, mysql, group-by

这是我的数据：

```
id date  
1 2009-01-01 10:15:23  
2 2009-01-01 13:21:29  
3 2009-01-02 01:03:13  
4 2009-01-03 12:20:19  
5 2009-01-03 13:01:06 
```

我想做的是按每个日期分组，然后在每个日期下方列出 ID 号。我是否应该获取不同的日期值，然后循环浏览它们以获取该日期的条目？这是有效的吗？

所以我的输出看起来像：

```
2009-01-01  
1  
2   
2009-01-02  
3  
2009-01-03  
4  
5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-08T23:28:01.507

```
$query = "SELECT DATE(date) as mydate, id FROM your_data_table ORDER BY mydate, id";
$result = $pdo->query($query);

$oldDate = false;
while ( list($date, $id) = $result->fetch(PDO::FETCH_NUM) ) {
    if ( $oldDate != $date ) {
        echo "$date\n$id\n";
        $oldDate = $date;
    } else {
        echo "$id\n";
    }
} 
```

您只需一次获取所有数据，而不是在多个查询中执行此操作。如果您只需要一些日期，那么您只需`WHERE`在`ORDER BY`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-08T17:43:56.963

您存储的日期有时间信息（列的类型是 DATETIME 或 TIMESTAMP），为了进行分组，您只需提取时间跨度的日期部分，您可以使用[DATE()](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_date)函数。

# javascript - 更改 Yahoo UI 中的日期格式

> ID：623973
> 
> 赞同：1
> 
> 时间：2009-03-08T17:37:56.183
> 
> 标签：javascript, yui

我正在使用 Yahoo UI 中的日历，如下所示：

> calDate = (calDate.getMonth() + 1) + '/' + calDate.getDate() + '/' + calDate.getFullYear();

这将显示一种`MMDDYYYY`格式。

我想将此格式更改为`YYYY-MM-DD`以便可以将其插入 MySQL 数据库。我将代码更改为：

> calDate = calDate.getFullYear() + '-' + (calDate.getMonth() + 1) + '-' + calDate.getDate();

它有效，但现在的问题是，当我想更改所选日期时，日历不会显示日期而是显示`NAN`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-10T22:18:18.503

通常最好将日期作为 unix 时间戳传递到后端，然后在数据库本身中进行转换。在为服务器构建 POST 数据的代码中，您将传递如下内容：

```
var t = calDate.getTime()/1000;
```

注意除以 1000。这是必需的，因为 javascript 时间戳以毫秒为单位，而 MySQL 需要秒。

在您的 SQL 语句中，您将按原样传递时间戳，并使用 FROM_UNIXTIME 函数将其转换为所需的格式：

```
插入 ... 值 ( FROM_UNIXTIME($t), ...)
```

自然会有一些代码`t`从 javascript 转换为`$t`后端脚本，然后将其传递给 SQL。

现在，如果您真的需要在前端格式化日期，您可以使用方便的`YAHOO.util.Date`实用程序。只需执行以下操作：

```
警报（YAHOO.util.Date.format（calDate，{格式：“%Y-%m-%d”}））；
```

比打电话容易得多`getFullYear, getMonth`，而且`getDate`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-10T22:29:12.627

bluesmoon 还在 YUIBlog 上写了两篇关于日期格式的优秀文章：

1.  [http://yuiblog.com/blog/2009/02/11/date-formatting-pt1-2/](http://yuiblog.com/blog/2009/02/11/date-formatting-pt1-2/)
2.  [http://yuiblog.com/blog/2009/02/25/date-formatting-pt2/](http://yuiblog.com/blog/2009/02/25/date-formatting-pt2/)

-埃里克

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T19:26:20.917

您应该在将日期插入服务器端之前更改其格式，让客户端拥有它想要的格式，然后再更改日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-10-05T23:23:59.413

```
 cal1.cfg.setProperty("DATE_FIELD_DELIMITER", "-");

            cal1.cfg.setProperty("MDY_YEAR_POSITION", 1);
            cal1.cfg.setProperty("MDY_MONTH_POSITION", 2);
            cal1.cfg.setProperty("MDY_DAY_POSITION", 3); 
```

# javascript - 在多选列表框中使用 Quicksilver 样式进行 jQuery 实时搜索

> ID：623976
> 
> 赞同：6
> 
> 时间：2009-03-08T17:39:06.943
> 
> 标签：javascript, jquery

我试图让 John Resig 的[jQuery Live Search with Quicksilver Style](http://ejohn.org/apps/livesearch/)与选择多表单控件一起使用。他的代码基于 [John Nunemaker](http://orderedlist.com/articles/live-search-with-quicksilver-style-for-jquery/)开发他的[quicksilver.js](http://orderedlist.com/demos/quicksilverjs/javascripts/quicksilver.js)代码的工作。

我遇到的问题是，在一个选择框中，只有 Firefox 支持 .hide() 选项值，我无法为 IE、Safari、Opera 和 Chrome 找到一种快速的方法。

这是一个示例，我已经内联了 John R 的代码，但是您需要获取[quicksilver.js](http://orderedlist.com/demos/quicksilverjs/javascripts/quicksilver.js)并自己在本地托管它。同样，这在 Firefox 中效果很好，但对 rows.hide() 的调用在其他浏览器上没有任何作用。

我曾尝试将标签包装在一个 div 中并隐藏它，但没有运气。

有任何想法吗？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>LiveSearch</title>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script> 
  <script type="text/javascript" src="../jquery/quicksilver.js"></script>

  <script type="text/javascript" charset="utf-8">
     $(document).ready(function() {
        $('#q').liveUpdate('#posts').focus();
     });

     jQuery.fn.liveUpdate = function(list){
       list = jQuery(list);

       if ( list.length ) {
           // Changed 'li' to 'option' below
           var rows = list.children('option'),
              cache = rows.map(function(){
              return this.innerHTML.toLowerCase();
              });

           this
               .keyup(filter).keyup()
               .parents('form').submit(function(){
                   return false;
               });
       }

       return this;

       function filter(){
           var term = jQuery.trim( jQuery(this).val().toLowerCase() ), scores = [];

           if ( !term ) {
               rows.show();
           } else {
               rows.hide();

               cache.each(function(i){
                   var score = this.score(term);
                   if (score > 0) { scores.push([score, i]); }
               });

               jQuery.each(scores.sort(function(a, b){return b[0] - a[0];}), function(){
                   jQuery(rows[ this[1] ]).show();
               });
           }
       }
     };

  </script>
</head>
<body>

<form method="get" autocomplete="off" action="">

  <div>
     <input type="text" value="" name="q" id="q"><br><br>

     <select id="posts" multiple name="choices" SIZE="10" style="width: 250px">
        <option value="1">The Well-Designed Web</option>
        <option value="2">Welcome John Nunemaker</option>
        <option value="3">Sidebar Creative: The Next Steps</option>
        <option value="4">The Web/Desktop Divide</option>
        <option value="5">2007 in Review</option>
        <option value="6">Don't Complicate the Solution</option>
        <option value="7">Blog to Business</option>
        <option value="8">Single Line CSS</option>
        <option value="9">The Great Divide</option>
        <option value="10">What's in a Name?</option>
     </select>

  </div>

</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-08T19:00:27.827

最好的方法就是在 DOM 中添加和删除选项。

像这样：

```
 <script type="text/javascript" charset="utf-8">
     $(document).ready(function() {
        $('#q').liveUpdate('#posts').focus();
     });

     jQuery.fn.liveUpdate = function(list){
       list = jQuery(list);

       if ( list.length ) {
               // Changed 'li' to 'option' below
               var rows = list.children('option'),
                  cache = rows.map(function(){
                  return this.innerHTML.toLowerCase();
                  });

               var all = rows;
               all.each(function(i){
                  $(this).attr("itext", this.innerHTML.toLowerCase());
               });

               this
                       .keyup(filter).keyup()
                       .parents('form').submit(function(){
                               return false;
                       });
       }

       return this;

       function filter(){
               var term = jQuery.trim( jQuery(this).val().toLowerCase() ), scores = [];

               if ( !term ) {
                       list.append(all);
               } else {
                       rows.remove();

                       all.each(function(i){
                               var score = $(this).attr("itext").score(term);
                               if (score > 0) { scores.push([score, i]); }
                       });

                       jQuery.each(scores.sort(function(a, b){return b[0] - a[0];}), function(){
                               list.append(all[this[1]]);
                       });

                       rows = list.children('option');
               }
       }
     };

  </script> 
```

**编辑：**

需要对数组“全部”而不是行进行评分。

# java - 部署 Java 小程序时遇到很多麻烦

> ID：623977
> 
> 赞同：0
> 
> 时间：2009-03-08T17:39:37.723
> 
> 标签：java, file, applet, relative-path

我是 Java 新手。我只是想为我的小程序构建一个 .jar 文件，以便可以从浏览器运行它。这是我的目录结构的样子：

```
C:\java\pacman\src 
```

包含所有 .java 类文件。

```
C:\java\pacman\assets 
```

包含大约 4-5 个图像和音频文件。

如果我尝试使用以下代码：

```
Image someFile=getCodeBase().toString() + "file.png"; 
```

结果`getCodeBase()`是

```
file:/C:/java/pacman/bin/ 
```

但是以下代码无法加载：

```
 img=new ImgHelper(getCodeBase().toString() + "assets/");
   ImageIO.read(new File(img.getPath("pacman.png"))); 
```

将我的“assets”文件夹移动到“bin”文件夹也没有解决这个问题。它尝试加载：

```
file:/C:/java/pacman/bin/assets/pacman.png 
```

说：

```
Can't read input file! 
```

但是，如果我将其粘贴到运行中并按 Enter 键，它提供的 url 可以正常打开：

所以为了避免让自己很头疼，我在我的 ImgHelper 类中注释掉了代码并这样做了：

```
public ImgHelper(String dir)
{
    //this.imgDir=dir;
    imgDir="C:\\java\\pacman\\assets\\";
} 
```

效果很好。但是我想把它放在一个网络服务器上，我不知道我应该如何/做什么来使所有的图像和声音都能正常工作。有任何想法吗？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-08T17:51:56.413

为什么不把它全部放在一个 JAR 文件中，然后调用 Class.getResourceAsStream 呢？

JAR 文件更好，因为它是单个 HTTP 连接，而不是每个文件一个 HTTP 连接。使用 Stream 也比使用 File 灵活得多。

当文件不在 JAR 中时，getResourceAsStream 也可以工作，它们需要与类文件相关。

编辑：

另一件事，如果小程序在服务器上，则 File 方法将不起作用，因为它将尝试从本地计算机（我想，我没有尝试过）而不是从服务器打开文件。即使它试图创建一个到服务器的文件路径也不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T18:00:55.817

我同意 tofubeer 关于 JAR 的看法，但是如果您想将图像放在服务器上，请参阅[此处](http://www.realapplets.com/tutorial/ImageExample.html)的 Applet 图像教程。代码库将是您的小程序在服务器上的任何位置，您也可以将相对于服务器上的图像放置。使用媒体跟踪器和 Applet.getImage() 方法来检索 url。从例子：

```
 my_gif = getImage(getDocumentBase(),"imageExample.gif"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T18:06:49.547

有两种可行的解决方案：

*   图像可能存在于小程序 JAR 之外。然后可以使用图像所在目录的位置来初始化小程序。一旦你有了这些信息，你就可以从服务器加载图像。[Sun Java 教程提供了一个使用applet 参数](http://java.sun.com/docs/books/tutorial/deployment/applet/html.html)来传递图像源目录的示例。
*   小程序类加载器可用于从小程序的 JAR 加载图像，使用 getResourceAsStream() 方法。

[PS：如果您参考Java 教程中的部分来为您的应用程序加载图标，](http://java.sun.com/docs/books/tutorial/uiswing/components/icon.html)将会很有帮助。[同一部分讨论了TofuBeer](https://stackoverflow.com/questions/623977/having-a-lot-of-trouble-deploying-a-java-applet/624000#624000)和[John](https://stackoverflow.com/questions/623977/having-a-lot-of-trouble-deploying-a-java-applet/624014#624014)提出的许多观点。

编辑：不推荐使用 File API，因为它最终会读取本地文件系统。这对于互联网上的大多数用户来说是不可接受的。

# java - 使用嵌套的泛化集合或自定义中间类？

> ID：623978
> 
> 赞同：6
> 
> 时间：2009-03-08T17:39:42.903
> 
> 标签：java, generics, oop

在介绍 Java 语言的泛型之前，我会编写封装 collections-of-collections-of-collections 的类。例如：

```
class Account {
   private Map tradesByRegion; //KEY=Region, VALUE=TradeCollection
}

class TradeCollection {
   private Map tradesByInstrument; //KEY=Instrument, Value=Trade
} 
```

当然，使用泛型，我可以这样做：

```
class Account {
   private Map<Region, Map<Instrument, Trade>> trades;
} 
```

我现在倾向于选择选项 #2（在*选项 #1 的通用版本上*），因为这意味着我最终不会出现仅仅为了包装集合而存在的类的激增。但是我有一种烦人的感觉，认为这是一个糟糕的设计（例如，在声明新类之前我应该​​使用多少个嵌套集合）。意见？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T17:53:58.733

2更好，因为：

*   更少的代码实现相同的效果（实际上更好，因为在 #1 中，您的某些类型信息仅存在于注释中）
*   完全清楚发生了什么。
*   您的类型错误将在编译时被捕获。

有什么好推荐的 1？诚然 Map< Integer , < Map < String, < Map< ... 泛型有点难以习惯，但在我看来，它比使用地图、地图列表和列表地图的代码更容易理解地图，以及充满地图列表的自定义对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-08T18:33:57.187

两者的结合。虽然您可以使用泛型来替换自定义类，但您仍然希望使用类来封装您的概念。如果您只是将列表映射的映射传递给所有内容，那么谁控制您可以添加的内容？谁控制您可以删除的内容？

对于保存数据，泛型是一件好事。但是您仍然希望在添加交易或添加帐户时验证方法，并且如果没有某种类包装您的集合，没有人可以控制它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-08T17:51:52.687

我为我制定了这个简单的规则：在泛型声明中*不要*超过两个 < 和两个逗号，*最好*只有一个逗号。之后我介绍了自定义类型。我认为这是可读性受到足够影响以保证额外概念的地方。

避免太深的泛型有一个很好的理由：复杂性不仅在实际声明中，而且通常在构造逻辑中同样可见。因此，如果将这些声明嵌套得太深，很多代码就会变得复杂。创建中间类会有很大帮助。诀窍通常是找到合适的中间类。

我绝对认为你应该稍微回到你的旧标准。实际上，您的第二个样本是我仍然只接受泛型的确切痛点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-08T18:07:14.397

通常还会有一些代码对集合进行操作。当这变得不平凡时，我将集合与新类中的行为打包在一起。嵌套越深就越有可能出现这种情况。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-08T18:47:37.030

我认为最好记住对象并少强调集合。物化是你的朋友。

例如，如果您正在为学校的系统建模，那么拥有 Student 和 Course 对象是很自然的。应该在哪里记录成绩？我认为它们属于学生和课程相遇的对象 - 报告卡。我不会有 GradeCollection。给它一些真实的行为。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-08T17:48:04.753

我更喜欢#2。发生了什么更清楚，并且在编译时是类型安全的（我更喜欢在编译时尽可能多地出错，而不是在运行时发生......一般来说，我喜欢在没有出错的情况下） .

编辑：

好吧，我可以看到两种方式...我想这取决于您将使用哪种方式：

```
class Account
{
   private Map<Region, TradeCollection> tradesByRegion;
}

class TradeCollection
{
   private Map<Instrument, Trade> tradesByInstrument;
} 
```

或者

```
class Account<R extends Region, I extends Instrument, T extends Trade, C extends TradeCollection<I, T>> 
{
   private Map<R, C> tradesByRegion;
}

class TradeCollection<I extends Instrument, T extends Trade>
{
   private Map<I, T> tradesByInstrument;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-08T19:41:29.677

我认为这个问题的答案是视情况而定。通常，如果还引入了与该类型相关的方法，如果这些中间类型是独立传递的，等等，则引入一个类型是有用的。

您可能会发现 Rich Hickey（Clojure 的创建者）关于创建可互操作库的一些建议很有趣：

*   [http://groups.google.com/group/clojure/browse_thread/thread/e0823e1caaff3eed](http://groups.google.com/group/clojure/browse_thread/thread/e0823e1caaff3eed)

它旨在作为对 Clojure 库编写者的具体建议，但我认为即使在 Java 中也是有趣的思考食粮。

# java - 你知道访问原生 linux api 的 Java 库吗？

> ID：623990
> 
> 赞同：2
> 
> 时间：2009-03-08T17:47:03.027
> 
> 标签：java, linux

你知道访问原生 linux api 的 Java 库吗？

我想这样的事情必须使用JNI。随它吧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T18:27:20.573

看看[JNA。](https://github.com/twall/jna)

这是 JNA 主页上的摘要。

> JNA 使 Java 程序可以轻松访问本机共享库（Windows 上的 DLL），而无需编写 Java 代码以外的任何内容——不需要 JNI 或本机代码。此功能可与 Windows 的 Platform/Invoke 和 Python 的 ctypes 相媲美。访问在运行时是动态的，无需代码生成。

有关一些示例，请参阅他们的[入门](https://github.com/twall/jna/blob/master/www/GettingStarted.md)页面。就像调用原生 printf 一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-08T17:56:59.693

[jtux](http://www.basepath.com/aup/jtux/)可能会有所帮助，具体取决于您想要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-08T17:48:59.790

您可以使用：`Runtime.exec`执行任何您想要的...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T18:24:48.613

[SWIG](http://www.swig.org/Doc1.3/Java.html)使生活比使用 javah 等的“原始”JNI 更容易。***************``*************