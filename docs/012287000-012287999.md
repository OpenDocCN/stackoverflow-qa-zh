# StackOverflow 问答 12287000-12287999

# ios - 与地图视图一起使用时 UISegmentedControl 不显示

> ID：12287001
> 
> 赞同：0
> 
> 时间：2012-09-05T17:45:51.963
> 
> 标签：ios, storyboard, mkmapview, uisegmentedcontrol, uistoryboard

任何人都知道如何让 UISegmentedControl 与 MapView 重叠并仍然正确显示？我目前正在尝试让 UISegmentedControl 出现在 MKMapView 中，以便用户切换地图类型。我在下面附上了截图。

这是我的故事板。请注意，“地图视图控制器场景”清楚地表明分段控件位于地图视图层之上。 ![](../Images/e01e648257cdb79456a4ff6437285c4c.png)

当我使用此情节提要设置运行应用程序时， UISegmentedControl 不会出现。 ![](../Images/4a54f87f8f1d7d498c12933dd81be8db.png)

现在我确实设法让它出现，前提是我确保 uisegmentedcontrol 不与 MapView 重叠。

这是同一个故事板，但这次 UISegmentedControl 和 MapView 之间没有重叠 ![](../Images/61b9e52c9e5212c639553c9dc5054267.png)

应用运行，底部清晰显示 UISegmentedControl ![](../Images/6d9d019632ef32ac649ad7a54dcb3a62.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:51:03.857

“这是我的故事板。请注意，“地图视图控制器场景”清楚地表明分段控件位于地图视图图层之上。”

我认为你真的希望它在地图视图之后 z 顺序正确。

颠倒 MapView 和 UISegmentedControl 的顺序，即将分段控件拖到 Map View Controller 场景中的 Map View 下方/之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:26:44.643

我有同样的问题，但对我来说，困难不是 Z 排序。那是我的支柱没有正确设置。我打开了顶部支柱，将其推到横向可视区域的底部下方。

# dns - Tumblr 的 DNS 自定义域

> ID：12287008
> 
> 赞同：0
> 
> 时间：2012-09-05T17:46:51.010
> 
> 标签：dns, tumblr

我正在尝试设置一个自定义域“mydomain.com.au”来访问我的 Tumblr 页面。我曾尝试更改 DNS 设置，但遇到了很多麻烦。当我转到“我的 DNS 是什么”时，我没有 A 记录或 CNAME（Tumblr 要求我有），但我已经填写了这些！

现在我有：

**主机名：** www **指向：** 66.6.44.4 **TTL：** 86400**类型：** A

**主机名：** tumbrl.mydomain.com.au。 **指向：** domains.tumblr.com **TTL：** 86400**类型：** CNAME

我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:04:32.280

[**您应该在其设置**](https://www.tumblr.com/settings/account) 中将此域指向您的 tumblr 博客*（在“应用程序”项之后选择您的博客）*

![在此处输入图像描述](../Images/1b3dc78a187ba6f9b99c7e04c2c7f604.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T12:01:31.013

你写道：

> 主机名：tumbrl.mydomain.com.au。

TUMBrL？不是 TUMBLR？

您需要设置的不仅仅是 WWW，主根域设置与 WWW 相同。

```
Points-to: 66.6.44.4 
```

# ios - 为什么我的实际 UI 布局与我在 xib 中设计的布局不同

> ID：12287012
> 
> 赞同：1
> 
> 时间：2012-09-05T17:47:20.807
> 
> 标签：ios, sdk

这是我在xib中设计的，也是我的期望。 ![在此处输入图像描述](../Images/33fe8ef35e02ee02ae6698addafd4b8f.png)

我的 ViewControlle.h 文件：

```
@interface DetailHeadViewController : UIViewController

@property (weak, nonatomic) IBOutlet UIScrollView *slideScrollView;
@property (weak, nonatomic) IBOutlet UIImageView *smallImageView;
@property (weak, nonatomic) IBOutlet UIImageView *barBGVImageView;

@end 
```

我的 ViewController.m 文件（部分源码）

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    slideScrollView.pagingEnabled = YES;
    slideScrollView.showsHorizontalScrollIndicator = NO;
    slideScrollView.showsVerticalScrollIndicator = NO;

    UIImageView * page1 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"headSection_hot1"]];
    [slideScrollView addSubview:page1];   //Update 3
} 
```

结果是这样的， ![在此处输入图像描述](../Images/3f69a8e5dcd71a480cf1cbbcab7a2e0d.png)

但实际上正确的结果是这样的，

![在此处输入图像描述](../Images/577dd97821d533cf16ee235edbc31b38.png)

任何人都可以帮助指出问题所在？提前致谢

## 更新（删除条形图）

为方便起见，我删除了 xib 中的条形图像，并注释掉了相关代码。请看下图。 ![在此处输入图像描述](../Images/4dc17805be42b7bab4fd300dc0c68f17.png)

## 更新 2

国际文凭组织 ![在此处输入图像描述](../Images/a4336a96446a668ef34094081596b8ab.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:02:02.927

在我看来，您的滚动视图框架设置不正确。它可能应该设置为 0,0,480,320。

看起来 BarImageView 上没有设置透明度。选择xib中的BarImageView，打开inspector窗口，点击第4个选项卡，将背景颜色设置为Clear Color并降低alpha。

您可能还想发布如何将图像添加到滚动视图，因为这也会产生问题。

* * *

更新1：

在 DetailHeadViewController 的 viewDidLoad 中试试这个：

```
self.scrollView.frame = self.view.bounds;
UIImageView * page1 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"headSection_hot1"]];
page1.frame = self.view.bounds;
[self.slideScrollView addSubview:page1];
self.scrollView.contentSize = self.view.bounds.size; // Note that the contentSize must be changed
                                                     // from this if you want to scroll. 
```

# apache-pig - 在列中查找第二大条目

> ID：12287014
> 
> 赞同：1
> 
> 时间：2012-09-05T17:47:23.700
> 
> 标签：apache-pig

是否有一种计算上有效的方法来查找列中的前 2 个条目而不仅仅是顶部的条目？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:55:19.070

根据列的大小，您可以做两件简单的事情：

运行 max 一次，删除 max 元素，再次运行 max ，然后您将获得第二高的值。

或者，您可以对数据进行排序或使用最大堆来存储它。排序后的数据更易于使用。

对于小型数据集，第一种方法会更有效。对于较大的集合，在找到所需值之前对其进行排序更有意义。

# vb.net - 如何获取当前的键盘语言？

> ID：12287015
> 
> 赞同：2
> 
> 时间：2012-09-05T17:47:23.837
> 
> 标签：vb.net, winforms

我想从语言栏中获取当前的键盘语言：

![](../Images/bf3239df0a71d94dc87ff51ab6069875.png)

我想实时执行此操作。如何？

编辑：表单加载：

```
Timer1.Start() 
```

```
Public Sub MyCurrentInputLanguage()
    Dim myCurrentLanguage As InputLanguage = InputLanguage.CurrentInputLanguage
    Me.Text = "Current input language is: " & _
        myCurrentLanguage.Culture.EnglishName
End Sub 
```

计时器：

```
 Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

 MyCurrentInputLanguage()

end sub 
```

当用户按下“Alt+Shift”时如何更新我的文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:20:15.067

使用[`InputLanguage.CurrentInputLanguage`](http://msdn.microsoft.com/en-us/library/system.windows.forms.inputlanguage.currentinputlanguage%28v=vs.90%29). MSDN 上的链接给出了这个例子：

```
CurrLang = InputLanguage.CurrentInputLanguage 
```

以下是有关[`InputLanguage`](http://msdn.microsoft.com/en-us/library/system.windows.forms.inputlanguage%28v=vs.90%29).

您可以使用事件在运行时检测更改（不使用计时器）[`Form.InputLanguageChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.inputlanguagechanged.aspx)。（来自引用的 MSDN 链接的示例。）

```
Private Sub Form1_InputLanguageChanged(sender as Object, e as InputLanguageChangedEventArgs) _ 
  Handles Form1.InputLanguageChanged

    Dim messageBoxVB as New System.Text.StringBuilder()
    messageBoxVB.AppendFormat("{0} = {1}", "InputLanguage", e.InputLanguage)
    messageBoxVB.AppendLine()
    messageBoxVB.AppendFormat("{0} = {1}", "Culture", e.Culture)
    messageBoxVB.AppendLine()
    messageBoxVB.AppendFormat("{0} = {1}", "CharSet", e.CharSet)
    messageBoxVB.AppendLine()
    MessageBox.Show(messageBoxVB.ToString(),"InputLanguageChanged Event")

End Sub 
```

（感谢 HansPassant 提供的信息。）

# google-maps - 谷歌地图初学者教程区

> ID：12287017
> 
> 赞同：0
> 
> 时间：2012-09-05T17:47:35.597
> 
> 标签：google-maps

我只是按照谷歌网站上关于如何使用他们的 API 的教程。我找到了这段代码，并试图让它在默认情况下适用于任何其他国家，但它不是：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=personalKey&sensor=false&language=ar&region=ES">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

从它所说的来看，这应该很简单。我试图让西班牙显示在地图上，而不是当前的选择。

链接如下：[https ://developers.google.com/maps/documentation/javascript/basics](https://developers.google.com/maps/documentation/javascript/basics)

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:53:51.427

您正在尝试通过设置区域来设置地图的位置。您仍然需要将坐标更改为西班牙的坐标。

尝试：北纬 40.6986°，西经 3.2949°

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:56:07.097

将您传递到的值更改为`google.maps.LatLng()`接近您想要显示的位置（例如`goggle.maps.LatLng(40.813797402839086, -3.62546328124995)`，根据[LatLng](http://www.latlng.org) ，对于马德里）。

# mysql - MySQL 对大数据的交叉引用查找

> ID：12287032
> 
> 赞同：0
> 
> 时间：2012-09-05T17:48:28.127
> 
> 标签：mysql, database, cross-reference

我正在设计一个表格，该表格将用于与结构交叉引用：

```
id (BigInt) | cuid (Varchar(255)) | term (Varchar(255)) 
```

在网页上，人们将输入 cuid 或术语，程序将查找相​​应的 id 以在程序内部使用。数据库中共有 2,669,793 个条目（因此 id 将跨越 0 - 2669792）。

我预计这可能会相当缓慢。我应该使用什么技术来确保尽可能快的查找？查询将类似于`SELECT id WHERE cuid = ?`or `SELECT id WHERE term = ?`。

由于我没有在 WHERE 子句中查找 id 本身，因此我看不出我将如何从索引中受益（尽管 id 本来就会被索引）。我听说过诸如将单个表分解为多个表并进行某种合并操作之类的事情。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:50:19.570

您可以将索引放在任何字段上，而不仅仅是 id。

如果您的数据相对静态，这可能是有益的。如果您要按多个字段进行查询，那么多个字段上的索引也可能有好处。

如果您的数据定期更改，那么额外的索引将产生处理成本，因此其平衡取决于您的数据使用情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:51:00.610

假设 id 是主键，您需要在`cuid`和字段上提供索引。`term`

您还需要确保分配了足够的内存以将这些索引保留在内存中以获得最佳性能。

# javascript - Javascript中的名称解析？

> ID：12287049
> 
> 赞同：3
> 
> 时间：2012-09-05T17:49:53.760
> 
> 标签：javascript, hoisting

我正在阅读这篇[文章](http://umumble.com/blogs/javascript/163/)，我有一些问题请教：

考虑到这段代码：

```
1:   var a = 1;
2:   function b () {
3:       a = 10;
4:       return;
5:       function a() {}
6:   }
7:   b();
8:   alert(a); 
```

这会提醒 1\. （我的问题是为什么？）

文章说明了它与*名称解析*有关。

名称解析（根据文章）由以下顺序确定：

```
1\. Internal mechanisms of language: for example, in all scopes are available “this” and “arguments”.
2\. Formal parameters: the functions can be named as the formal parameters, which scope is limited to the function body.
3\. Function declarations: declared in the form of function foo() {}.
4\. Variable declarations: for example, var foo;. 
```

第 3 行假设更改全局 a 的值。但是函数 a(){...} 优先于声明内部（如果我理解正确的话），这就是为什么警报 1

ps如果我删除第5行，它会提醒10。

> 一般来说，如果一个名字已经被定义，它永远不会被另一个同名的实体重新定义。即函数声明优先于同名变量的声明。但这并不意味着变量赋值不会替换函数，只是它的定义会被忽略。

我不明白那部分：

> 但这并不意味着变量赋值的值不会替换函数

所以有两个问题：

*   我是否正确理解了提醒的原因[1](http://umumble.com/blogs/javascript/163/)

*   上面的线是什么意思？（被误解的部分）

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T17:53:30.140

> 我是否正确理解了提醒的原因 1

是的

> *“但这并不意味着变量赋值不会替换函数”*
> 上面这行是什么意思？（被误解的部分）

它只是意味着虽然`a`已经定义了一个具有名称的函数，但`a = 10`仍将被执行，即在该行之后`a`不再引用函数而是指向`10`.

我假设他们想稍微放宽前面的语句，避免人们错误地认为因为函数声明首先执行，所以分配不会再发生。

* * *

函数和变量声明被提升到作用域的顶部。所以代码等价于：

```
1:   var a = 1;
2:   function b () {
3:       function a() {}
4:       a = 10;
5:       return;
6:   }
7:   b();
8:   alert(a); 
```

`function a() {...}`在本地范围内创建一个符号（变量）`a`，其值是完全相同的函数。下一行，`a = 10;`然后为该符号分配一个新值，即一个数字。

```
var a = 1;
function b () {
     function a() {} // creates a new local symbol `a`, shadowing the outer `a`
     // until here, `a` refers to the function created 
     // created by the above declaration
     a = 10; // now a new value is assigned to the local symbol/variable `a`
     // from here on, `a` is `10`, not a function
     return;
}
b();
alert(a); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T18:06:26.100

```
var a = 1;
function b () {
    var a = 10;
}
b();
alert(a); 
```

上面的例子对你有意义吗？是的？好的，那么您了解本地范围和全局范围之间的区别...

```
var a = 1;
function b () {
    a = 10;
    var a;
}
b();
alert(a); 
```

这个例子对你有意义吗？是的？然后你就会明白，在函数中声明变量的位置无关紧要，它总是在第一次进入函数时声明。

```
var a = 1;
function b () {
    a = 10;
    var a = function() { };
}
b();
alert(a); 
```

现在，这个例子有意义吗？是的？然后你就理解了动态类型。一个变量可以被赋予一个函数作为一个值，然后可以被一个整数覆盖，比如 10。

```
var a = 1;
function b () {
    a = 10;
    return;
    function a() { }
}
b();
alert(a); 
```

现在你的例子应该是有意义的，因为我们只是改变了我们声明 a 的方式，但它是一样的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T17:57:59.663

根据我对提升的理解，变量声明和函数声明都是提升的。因此，这就是正在发生的事情：

```
var a; // a is declared (hoisted)
function b () { // function declaration (hoisted)
    function a () {} // function declaration (hoisted)
    a = 10; // an assignment to the local a that was hoisted, not the outer a
    return;
}
a = 1; // initialization (not hoisted)
b(); // hoist inside b's scope causes an inner a to be modified
alert(a); // alerts 1 since the outer a was never modified 
```

# python - 无法在 Python 中导入 Skype4Py

> ID：12287050
> 
> 赞同：4
> 
> 时间：2012-09-05T17:49:54.800
> 
> 标签：python, python-3.x, skype4py

我在 Windows 上使用带有 Python 3.2.3 的 Skype4Py。尝试导入 Skype4Py 包时出错，我做了以下操作来弄清楚它是什么：

```
import sys

try:
   import Skype4Py
except:
   print (sys.exc_info()[0])
   print (sys.exc_info()[1]) 
```

输出如下：

`<class 'Import error'>`

`No module named skype`

我用 Windows 安装程序安装了 Skype4Py。我可以在`Python32\Lib\site-packages`. 我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-23T03:57:04.090

[Skype 开发页面](https://developer.skype.com/skypekit/reference/python/html/help.html)中明确指出：

> *Python 包装器与 Python 版本 2.6.5 兼容并经过测试 - 目前不支持 Python 版本 3.x。*

猜猜它运气不好，

我认为由于缺少*...*

**但**

[你可以在Github](https://github.com/awahlig/skype4py)上找到一个独立维护的 skype4py 版本，尽管它也只适用于 python 2.x 版本，它会定期更新，而且它的社区比 Skype 维护的项目要大得多，后者几乎已经死了，并且还支持最新的 2.x版本而不是仅支持 2.6.5。在这里你可以找到使用 github 维护版本的 Skype4py [Skype4py 用法的文档](https://github.com/awahlig/skype4py#id3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-12T17:26:47.623

你的问题（我刚刚发现同样的事情）是安装程序是为 Python 2 编写的 - 所以你没有真正安装它，没有完全安装。所以api不起作用！！！

```
File "C:\Users\PETER_~1\AppData\Local\Temp\pip_buil

print 'zipping the documentation'

                               ^

SyntaxError: Missing parentheses in call to 'print'

print 'zipping the documentation' 
```

没有`()`周围`print`是 Python 2 的问题。我猜你可以重写安装程序，但基本问题是 Skype API 是基于 PYTHON 2 构建的——如果你像我一样需要 Python 3，那就不走运了！

# iphone - iphone打印，指定特定打印机

> ID：12287051
> 
> 赞同：0
> 
> 时间：2012-09-05T17:50:04.653
> 
> 标签：iphone, printing

有没有办法绕过用户选择对话框来指定用于空中打印作业的打印机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:07:58.240

目前，如果没有监狱制动等，就无法做到这一点。

# c - 简单的 C 应用程序给出分段错误

> ID：12287052
> 
> 赞同：0
> 
> 时间：2012-09-05T17:50:09.247
> 
> 标签：c, segmentation-fault

C 从来都不是我的强大力量，但我决定试一试。以下是我的代码，但是在运行时，它给出了分段错误（核心转储）。

基本上我想要的是检查文件夹是否为空（mtp设备安装在其中），如果它是空的，运行mount命令，如果不是，运行另一个命令。

```
#include <sys/types.h>
#include <dirent.h>
#include <libgen.h>
#include <libnotify/notify.h>
#include <stdio.h>
#include <unistd.h>

void main ()
{
  int n = 0;
  struct dirent *d;
  const char *dir_path="~/Nexus";
  DIR *dir = opendir(dir_path);
      while ((d = readdir(dir)) != NULL) {
        if(++n > 2)
          break;
      }
      closedir(dir);
      if (n <= 2) //Directory Empty
    {
    notify_init ("Galaxy Nexus mounter");
    NotifyNotification * Mount = notify_notification_new ("Galaxy Nexus", "Mounted at ~/Nexus", "/home/tristan202/bin/test/android_on.png");
    system("jmtpfs ~/Nexus");
    notify_notification_show (Mount, NULL);
    }
      else
    {
    notify_init ("Galaxy Nexus mounter");
    NotifyNotification * uMount = notify_notification_new ("Galaxy Nexus", "Unmounted", "/home/tristan202/bin/test/android_off.png");
    system("fusermount -u ~/Nexus");
    notify_notification_show (uMount, NULL);
    }
    } 
```

欢迎任何建议。

**编辑**

```
#include <sys/types.h>
#include <dirent.h>
#include <libgen.h>
#include <libnotify/notify.h>
#include <stdio.h>
#include <unistd.h>

int main ()
{
  int n = 0;
  struct dirent *d;
  const char *dir_path="/home/tristan202/Nexus";
  DIR *dir = opendir(dir_path);
      while ((d = readdir(dir)) != NULL) {
        if(++n > 2)
          break;
      }
      closedir(dir);
      if (n <= 2) //Directory Empty
    {
    notify_init ("Galaxy Nexus mounter");
    NotifyNotification * Mount = notify_notification_new ("Galaxy Nexus", "Mounted at ~/Nexus", "/home/tristan202/bin/test/android_on.png");
    system("jmtpfs ~/Nexus");
    notify_notification_show (Mount, NULL);
    }
      else
    {
    notify_init ("Galaxy Nexus mounter");
    NotifyNotification * uMount = notify_notification_new ("Galaxy Nexus", "Unmounted", "/home/tristan202/bin/test/android_off.png");
    system("fusermount -u ~/Nexus");
    notify_notification_show (uMount, NULL);
    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:03:49.810

你有几个问题：

1.  你不检查错误。如果`opendir(2)`无法打开目录并返回`NULL`，则继续前进，并且传入`NULL`to`readdir(2)`可能会导致它出现段错误。这可能是失败的，因为...
2.  文件系统在你写的时候不理解你的意思`"~"`，比如`"~/Nexus"`. 它试图打开一个*字面上*名为`"~/Nexus"`. 该`~`字符在文件系统中没有特殊含义——它对*shell*意味着某些东西。外壳是执行[波浪扩展](http://www.gnu.org/software/bash/manual/bashref.html#Tilde-Expansion)的外壳。为了获得您想要的文件，您需要使用正确的完整绝对路径或正确的相对路径；您可以[`getenv("HOME")`](http://linux.die.net/man/3/getenv)在运行时使用它来查找自己的主目录。请注意，可以`~`在对`system(3)`函数的调用中使用，因为会`system`调用 shell。
3.  `main()`未正确声明。它必须返回`int`，不是`void`。

# javascript - 防止页面从 JavaScript 回发

> ID：12287060
> 
> 赞同：0
> 
> 时间：2012-09-05T17:50:35.117
> 
> 标签：javascript, asp.net, .net, postback

> **可能重复：**
> [防止在 C# 中回发 HtmlButton](https://stackoverflow.com/questions/6314479/prevent-postback-of-htmlbutton-in-c-sharp)

这是我的 JavaScript 函数：

```
<script type = "text/javascript">
    function CheckForEmptySearchBox(id) {
        var index = id.substring(id.length - 1);
        var boxContent = document.getElementById("contentMain__lvTSEntry__txtClientName_" + index).value;
        if (boxContent == "") {
            alert("Please enter search criteria");
            return false;
        }
    }
</script> 
```

和标记：

```
<asp:Button ID="_btnSearch" runat="server" OnClientClick = "return CheckForEmptySearchBox(this.id)" /> 
```

此代码有效，即当 texbox 为空时，消息提示用户输入搜索条件并且 javascript 阻止页面回发。但是，当用户输入文本时，没有消息提示，但页面仍然没有回发。怎么了？

# 编辑

```
if (boxContent == "") {
     alert("Please enter search criteria");
     return false;
   }
   else {
     return true;
   } 
```

该页面仍未发回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:54:07.797

如果您的意思是要返回 true，则需要从函数中返回 true....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:57:26.110

```
<script type = "text/javascript">
        function CheckForEmptySearchBox(id) {
            var index = id.substring(id.length - 1);
            var boxContent = document.getElementById("contentMain__lvTSEntry__txtClientName_" + index).value;
            if (boxContent == "") {
                alert("Please enter search criteria");
                return false;
            }
else{ return true;}
        } 
```

您要求返回 onclientclick 函数，并且当文本框具有值时不返回任何值，这就是它卡住的原因

```
 <asp:Button ID="_btnSearch" runat="server" OnClientClick = "return CheckForEmptySearchBox(this.id)" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:57:49.147

如果验证通过，您会忘记返回 true：

```
function CheckForEmptySearchBox(id) {
        var index = id.substring(id.length - 1);
        var boxContent = document.getElementById("contentMain__lvTSEntry__txtClientName_" + index).value;
        if (boxContent == "") {
            alert("Please enter search criteria");
            return false;
        }

     return true; //<--you forgot this
    } 
```

# css - Facebook Like 按钮在 Opera 中的格式错误

> ID：12287066
> 
> 赞同：0
> 
> 时间：2012-09-05T17:51:00.570
> 
> 标签：css, facebook, facebook-like, opera

我在这个网站上工作：[http](http://oq.totaleclips.com) ://oq.totaleclips.com，Opera显示 Facebook Like 按钮与功能页面上的其他社交按钮不水平对齐，例如： http: [//oq.totaleclips.com/ mpa/The_Hunger_Games_(电影_2012](http://oq.totaleclips.com/mpa/The_Hunger_Games_(Movie_2012) )

我不想对容器 div 的 css 进行彻底的更改，因为它在其他浏览器中运行良好。也许特定于浏览器的样式可以解决问题，但调用的 div`fb-like`似乎不能很好地接受 css 覆盖（如 `.fb-like{height:21px !important;}）

我怎样才能让它在 Opera 中正确排列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:01:18.323

不幸的是，因为那个特定的（也是最容易使用的）Facebook Like 按钮使用了 FB 的 iframe，所以你无法设置它的样式（否则，`.fb_iframe_widget span {vertical-align: top;}`就可以了。）

还有其他方法可以在不使用 iframe 的情况下实现点赞按钮，从可访问的 ( [Open Like](http://openlike.org/) ) 到有点涉及的 ( [Facebook SDK](https://developers.facebook.com/docs/sdks/) )。

但是，如果您坚持使用 iframe，理论上您可以使用[Opera 特定的 css 选择器](https://stackoverflow.com/a/4021618/1243160)：

```
x:-o-prefocus, .fb_like {
   margin-top: -10px;
} 
```

# ios - 在核心数据中没有获得多对多关系

> ID：12287069
> 
> 赞同：0
> 
> 时间：2012-09-05T17:51:27.787
> 
> 标签：ios, xcode, core-data

我正在尝试了解核心数据（对多）关系。在下面的代码中，我有两个实体

人员列表 <-->> 交易详情

```
NSManagedObjectContext *context = [self managedObjectContext];
NSManagedObject *personDetails = [NSEntityDescription
                                  insertNewObjectForEntityForName:@"PeopleList"
                                  inManagedObjectContext:context];

[personDetails setValue:[person fullName] forKey:@"name"];

NSManagedObject *transactionDetails = [NSEntityDescription
                                       insertNewObjectForEntityForName:@"TransactionDetails"
                                       inManagedObjectContext:context];

[transactionDetails setValue:[NSNumber numberWithFloat:oweAmount] forKey:@"amount"];

NSError *error;
if (![context save:&error]) {
    NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
} 
```

现在，此代码将一个新对象（行）插入到模型中。我感到困惑的是： 1\. 我不必编写代码来关联两个实体（PeopleList 和 TransactionDetails）中的对象值吗？2\. 如果我一次又一次地运行此代码，它只会继续在第一个实体（PeopleList）中添加相同的对象。如何写多对多关系？我从最后几个小时的阅读中得到的是我必须获取结果，搜索那个特定的对象，如果它存在，那么不要插入一个同名的新对象。但在那种情况下，它将如何关联这两个实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:39:18.483

就一对多关系而言，您的模型实体在模型编辑器中是否正确连接？您是否为实体生成了类文件？如果您可以用“是”回答这两个问题，则您可以像以前一样创建个人列表实体和详细信息实体，但您需要将详细信息添加到您的个人列表中。查看方法名称的类文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:42:25.340

它不会，因为您没有在任何一个对象上设置关系。我看不到您在哪里设置新创建的 TransactionDetail 对象的 PeopleList 属性（对不起，我不知道您是如何在模型中命名属性的，所以我只是使用类名）。因此，在创建您的 transactionDetails 对象之后，您需要执行类似 transactionDetails.PeopleList = personDetails 的操作，并且这两个关系都将在此时设置；transactionDetails.PeopleList 属性将指向您的 personDetails 对象，而 personDetails.TransactionDetails 集将包含 transactionDetails。

您用来设置名称的人对象是什么？

另一方面，您可能需要考虑将所有这些东西移到 NSManagedObject 的子类中；为每个实体编写自己的超级简单的构造函数/初始化程序等。很多人从不这样做，最终在他们的控制器代码中乱扔了很多 CoreData 样板，这对我来说是个谜，因为这就是使用 CoreData 如此好的原因。

# php - 又一篇 UTF-8、PHP 和 Ajax 帖子

> ID：12287072
> 
> 赞同：0
> 
> 时间：2012-09-05T17:51:37.653
> 
> 标签：php, utf-8

我已经尝试解决字符编码问题很多天了，但没有找到任何解决方案。

这是正在发生的事情：

我在页面中有一个表格。当我从 Adob​​e Reader 复制粘贴文本到此表单时，一切正常。当我从预览（mac os 图像查看器）复制粘贴文本时，它变成了奇怪的字符。

提交表格时，句子：salade mêlée, tomates, mozzarella, basilic melon en saison et jambon cru

通过 ajax 函数，我可以在 firebug 中看到：

```
salade%20me%CC%82le%CC%81e%2C%20tomates%2C%20mozzarella%2C%20basilic%20melon%20en%20saison%20et%20jambon%20cru 
```

现在，当我将此值输入 Zend 控制器时，为了将其保存到我的数据库中，我遇到了以下情况：

如果我 iconv 到 cp1252，文本被剪切为“salade me”，就是这样

如果我 utf8_decode 它，它会转到：salade me?le?e、tomates、mozzarella、basilic melon en saison et jambon cru

如果我不进行转换，它会起作用......但在 phpmyadmin 我看到：salade mÃªlée，tomates，mozzarella，basilic melon en saison et jambon cru

有什么想法可以帮助我吗？我要疯了！！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:56:25.987

确保 phpMyAdmin 配置为使用 UTF-8，并且数据库也使用 UTF-8，以及 PHP 和数据库之间的连接。如果他们都使用 UTF-8，那么来回传递 UTF-8 应该没有问题。

# javascript - xmlhttprequest 不会发送请求

> ID：12287081
> 
> 赞同：0
> 
> 时间：2012-09-05T17:52:20.563
> 
> 标签：javascript, xmlhttprequest, send

正如我在标题中所写，xmlhttprequest 不会发送请求。该代码非常基本，我不知道为什么它不应该工作。这里是：

```
 window.onload = function() {
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open('GET', 'http://www.google.com' , true);
    xmlhttp.send(null);
    xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4) {
       document.write(xmlhttp.responseText);
       }
    }
    if (xmlhttp.readyState!=4) {
       document.write(xmlhttp.readyState);
    }
   } 
```

它只是在文档中写入“1”。我错过了什么明显的东西吗？

# joomla - Joomla 2.5 未捕获的 ReferenceError：未定义 Joomla

> ID：12287082
> 
> 赞同：2
> 
> 时间：2012-09-05T17:52:30.220
> 
> 标签：joomla, content-management-system, joomla2.5, referenceerror

我刚刚将 joomla 应用程序从 1.7 版升级到 2.5... 在应用程序最初运行后我安装了 k2，卸载后我现在看到 Uncaught ReferenceError: Joomla is not defined in my console。

它会阻止文章编辑器加载。

```
Uncaught ReferenceError: Joomla is not defined 
```

我相信它发生在这段代码中......

```
submitbutton = function(task) {
    if (task == 'article.cancel' || document.formvalidator.isValid(document.id('item-form'))) {
        if (tinyMCE.get("jform_articletext").isHidden()) {
            tinyMCE.get("jform_articletext").show()}; 
            tinyMCE.get("jform_articletext").save();
            Joomla.submitform(task, document.getElementById('item-form'));
        } else {
            alert('Invalid form');
        }
    }
} 
```

我什至都懒得拐弯抹角……我被难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:41:14.770

检查您的插件加载顺序并确保在 k2 之前加载所需的所有 javascript 这可能会有所帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-28T10:36:09.753

我得到了完全相同的东西，结果证明是 JCE 编辑器。我将它更新到最新版本，这为我修复了这个错误

# c# - 连接的 DateTime 字符串未传递给 sql

> ID：12287085
> 
> 赞同：0
> 
> 时间：2012-09-05T17:52:31.997
> 
> 标签：c#, sql-server-2008, datetime, datetimepicker

我正在将格式化的日期时间变量传递给 SQL Server。我需要将日期与时间连接起来，因为它们来自 2 个不同的控件。该代码似乎可以正常工作，两个字符串一旦放在一起，就会被解析为 DateTime。

问题是当它上升到 SQL Server 时，时间部分会丢失，并且该列显示`yyyy-mm-dd hh:mm:ss.fff`与（例如） `2012-09-03 00:00:00.000`相反。`2012-09-03-12 1:23:45:678`

这是我的代码，为了测试，我用硬编码的变量替换了时间，并且`objInfo.SemesterEnrollStart`是一个`DateTime`变量。此外，控件`dpEnrollStart`是`DatePicker`.

```
DateTime semDate = Convert.ToDateTime(dpEnrollStart.SelectedDate);
string semTime = "12:34";
DateTime dtp = DateTime.ParseExact(semDate.ToShortDateString() + " " + semTime, "MM/dd/yyyy hh:mm", null);
objInfo.SemesterEnrollStart = dtp; 
```

非常感谢！

编辑：所以，这是我用来调用存储过程的 c#：

```
objInfo.SemesterQuarter =  ddl_SemQuarter.SelectedValue;
objInfo.SemesterYear = ddl_SemYear.SelectedValue;
objInfo.SemesterStart = Convert.ToDateTime(dpSemStart.SelectedDate);
objInfo.SemesterEnd = Convert.ToDateTime(dpSemEnd.SelectedDate);

DateTime semDate = Convert.ToDateTime(dpEnrollStart.SelectedDate);
string semTime = "12:34:00.000";
objInfo.SemesterEnrollStart = DateTime.ParseExact(semDate.ToShortDateString() + " " + semTime, "MM/dd/yyyy HH:mm:ss.fff", null);                                                        

objInfo.SemesterEnrollEnd = Convert.ToDateTime(dpEnrollEnd.SelectedDate);
objInfo.PriorityRegDate = Convert.ToDateTime(dpPriRegDate.SelectedDate);
objInfo.AgeCutoffDate = Convert.ToDateTime(dpAgeCutoffDate.SelectedDate);
lblTSMessage.Text = objInfo.SemesterEnrollStart.ToString();
objManager.AddNewSemester(objInfo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:06:31.230

问题在于您在 ParseExact 中使用的格式：

```
 MM/dd/yyyy hh:mm 
```

因此，您故意丢弃秒和毫秒部分。

相反，您需要使用以下方法解析日期：`yyyy-MM-dd HH:mm:ss.fff`但是您需要在 semTime 变量中捕获`seconds`(ss) 和(fff) ，否则该方法将失败。`milliseconds``ParseExact`

一个例子：

```
string s = "01/01/2012 11:23";
//FAILS because there's not ss and fff part 
DateTime dtp = DateTime.ParseExact(s, "MM/dd/yyyy hh:mm:ss.fff", null);

string s = "01/01/2012 11:23:12.678";
//Works because there's a ss and fff part
DateTime dtp = DateTime.ParseExact(s, "MM/dd/yyyy hh:mm:ss.fff", null); 
```

# php - 防止从 Acunetix 进行目录扫描

> ID：12287087
> 
> 赞同：2
> 
> 时间：2012-09-05T17:52:38.277
> 
> 标签：php, directory-listing

我有一个启用 PHP 的站点，但目录列表已关闭。

但是，当我使用 Acunetix:（网络漏洞扫描软件）扫描我的网站和其他知名网站时，它能够列出所有目录和文件。

我不知道这是怎么回事，但我有这样的理论：也许软件正在使用英文单词，试图通过尝试“ `include/`”、“ `css/`”、“ `/images`”等名称来查看文件夹是否存在。然后，也许它能够以这种方式列出文件。

因为，如果目录列表关闭，我不知道还有什么可做的。

所以，我设计了这个计划，如果我给我的文件夹/文件起难的名字，比如 I3Nc_lude、11css11 等，软件可能很难找到这些名字。你怎么看？

我知道，我对此可能大错特错，这个想法可能很可笑，但这就是我寻求帮助的原因。

你怎么完全！禁止目录列表？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:13:09.253

1.  确保站点根目录中的所有目录都禁用了目录列表。当您设置新服务器时，它通常默认打开。

2.  假设您的网络服务器中的目录列表不是您的问题，请记住您网站中的任何资源：CSS 文件、JS 源代码，当然还有 HREF 可以轻松或不费力地遍历（通常是几行 javascript） . 无法隐藏您引用的任何内容。这很可能是您在扫描中看到的反映。

3.  或者，如果您使用 SVN 或其他版本控制系统来部署您的站点，通常这些可用于确定代码库中每个文件的路径。

人们在第一次创建站点时最常犯的错误可能是他们将所有文件都保存在 webroot 中，而弄清楚它们在哪里变得有些微不足道。

*IMHO the best approach is have your code in a separate directory outside the webroot, and then load it as needed (this is how most MVC frameworks work). You can control entirely then what can and can not be accessed via the web. You can have 100s of classes in a directory and as long as they are not in the webroot, no one will ever be able to see them, even if directory listing were to become enabled.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:58:21.773

这听起来像是一场噩梦。专注于通过所有预防措施尽可能地保护文件。不要通过默默无闻来依赖安全性。如果有人想进入，一些随机的目录名称只会稍微减慢它们的速度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:58:52.063

跳棋并没有使用某种基于语言的蛮力攻击，即使对于最无能的黑客来说，这也太昂贵且具有侵入性。您的 Internet 文件共享服务（Apache、IIS 等）正在为任何询问的人提供该结构。

我找到了这个解决方案 - 我希望它应该适用于你。

[http://www.velvetblues.com/web-development-blog/dont-get-hacked-6-ways-to-secure-your-wordpress-blog/](http://www.velvetblues.com/web-development-blog/dont-get-hacked-6-ways-to-secure-your-wordpress-blog/)

1.  隐藏您的目录结构

隐藏目录结构也是一个好习惯。默认情况下，许多 WordPress 安装允许任何访问者窥探并查看缺少索引文件的文件夹中的所有文件。虽然这看起来并不危险，但确实如此。通过使访问者能够查看每个目录中的文件，他们可以更好地策划他们的攻击。

要解决此问题，您可以执行以下两项操作之一：

选项 1：使用索引文件

对于您要保护的每个目录，只需添加一个索引文件。一个简单的 index.html 文件就足够了。

选项 2：使用 .htaccess 文件

隐藏目录结构的首选方法是在 .htaccess 文件中使用以下代码。

选项-索引

# c# - 有没有办法验证字典的值

> ID：12287091
> 
> 赞同：3
> 
> 时间：2012-09-05T17:52:56.580
> 
> 标签：c#, validation, dictionary, .net-3.5

> **可能重复：**
> [具有唯一键和值的 C# 字典类型](https://stackoverflow.com/questions/9438060/c-sharp-dictionary-type-with-unique-keys-and-values)

我想确保字典具有唯一的键和值。有没有办法在建立我自己的课程之外添加这种验证？这是我能想到的对字典中的值进行验证的唯一方法。但是，也许我可以添加一些我似乎无法通过谷歌找到的属性。

如果有帮助，我也希望将此字典与 WPF 绑定一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:59:24.743

根据定义，字典键是唯一的。确保字典值的唯一性与检查每个数组或集合成员是否唯一的方式相同。

假设您的 TValue 类型实现.NET 3.5 引入了`HashSet<T>`哪些加快速度`Equals(TValue)`。

```
HashSet<TValue> seenValues = new HashSet<TValue>();
foreach(TKey key in myDictionary) {
    if( seenValues .Contains( myDictionary[key] ) ) throw new Exception("Dictionary contains duplicate item.");
    seenValues .Add( myDictionary[key] );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:18:44.987

您可以尝试使用这个双向字典类：

```
public class Map<T1, T2>
{
    private Dictionary<T1, T2> _forward = new Dictionary<T1, T2>();
    private Dictionary<T2, T1> _reverse = new Dictionary<T2, T1>();

    public Map()
    {
        this.Forward = new Indexer<T1, T2>(_forward);
        this.Reverse = new Indexer<T2, T1>(_reverse);
    }

    public class Indexer<T3, T4>
    {
        private Dictionary<T3, T4> _dictionary;
        public Indexer(Dictionary<T3, T4> dictionary)
        {
            _dictionary = dictionary;
        }
        public T4 this[T3 index]
        {
            get { return _dictionary[index]; }
            set { _dictionary[index] = value; }
        }
    }

    public void Add(T1 t1, T2 t2)
    {
        _forward.Add(t1, t2);
        _reverse.Add(t2, t1);
    }

    public Indexer<T1, T2> Forward { get; private set; }
    public Indexer<T2, T1> Reverse { get; private set; }
} 
```

你可以像这样使用它：

```
var map = new Map<int, string>();

map.Add(42, "Hello");

Console.WriteLine(map.Forward[42]);
// Outputs "Hello"

Console.WriteLine(map.Reverse["Hello"]);
//Outputs 42 
```

这是一个相当简单的实现。您可能需要公开一些底层字典功能，但至少这是一个开始。

# apache-flex - 面向 Flex 3 开发人员的 Flex 4 - 布局问题

> ID：12287093
> 
> 赞同：0
> 
> 时间：2012-09-05T17:53:09.477
> 
> 标签：apache-flex, layout, flex4, flex3

我读过很多文章说为了在 Flex 4 中使用旧的“Layout='Absolute'”，我只需要使用

```
<s:layout>
    <s:BasicLayout/>
</s:layout> 
```

但它只是不以同样的方式工作。在 Flex 3 上，当您将应用程序布局设置为绝对布局时，X 和 Y 属性会自动失去其实用性，因为默认情况下，布局的每个组件都会在屏幕左上角自动确定。它的工作原理与移动布局类似：您可以使用 Canvas 设置 X 和 Y（移动游戏开发人员最常用），或者让设备放置所有内容，以避免屏幕尺寸问题等。

Flex 4 上还可以吗？它有多难/复杂？感谢您的关注。

编辑 - - - -

所以这似乎有点混淆我想要的东西。回到 Flex e，我曾经这样做：

```
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="onInit()" width="100%" height="100%" 
```

我用这个标签开始我的应用程序，在那里我会有一个 100% 宽度和 100% 高度的盒子容器。所以，在这个盒子容器中，我将有 HBox 和 VBox 来对齐我的组件（现在是 VGroup 和 HGroup）。问题是，在 Flex 3 中，例如，我可以放置 1 个 VBox，并在其中放置 3 个 HBox，每个 HBox 将自动假设一个位置在另一个之下，即 X 和 Y 属性为空白。使用 Flex 4，当我在其中放置 1 个 VGroup 和 3 个 HGroup 而不设置任何 X 和 Y 属性时，它们只会在另一个之上填充一个，就像我将 X,Y = 0 设置为所有它们一样。他们不再像以前那样把一个位置放在另一个位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:35:50.327

[请参阅Spark Layouts with Flex 4](http://www.adobemarketing.com/devnet/flex/articles/spark_layouts.html)中的 Flex 3 到 Flex 4 等效布局：

> 使用 Spark 布局
> 
> 因为在 Spark 中布局和容器是分开的，所以在使用布局时需要考虑一些值得注意的变化。花点时间查看下表 MX 布局容器类及其对应的 Spark 布局和容器组合：
> 
> ```
> MX Containers Corresponding combination of Spark Layout and Container
> Canvas        Group with BasicLayout (no advanced constraints)
> HBox          Group with HorizontalLayout (or the HGroup class)
> VBox          Group with VerticalLayout (or the VGroup class)
> Tile          Group with TileLayout
> List          List with VerticalLayout
> TileList      List with TileLayout 
> ```

在您的情况下，听起来您想要动态布局而不是绝对布局，因为您说您不想为控件提供 X 和 Y 坐标。

然后你有两个选择：

*   使用 BasicLayout 并为控件指定 top、left、right、bottom 属性
*   使用 Horizo​​ntalLayout、VerticalLayout 或其他动态布局之一。

# javascript - 如何随机化这种两种不同的javascript数组

> ID：12287094
> 
> 赞同：1
> 
> 时间：2012-09-05T17:53:12.567
> 
> 标签：javascript, jquery, arrays

我有两个这样的不同数组

```
var images = [{
    "src": "images2/animal_1.jpg",
    "title": "Dog"},

{
    "src": "images2/animal_2.jpg",
    "title": "Cat"},

{
    "src": "images2/animal_3.jpg",
    "title": "Sheep"},

{
    "src": "images2/animal_4.jpg",
    "title": "Cow"}];

var name = ["Dog", "Cat", "Sheep", "Cow"];​ 
```

我需要独立地洗牌两个数组。但是一个条件图像数组标题和名称数组值永远不会具有相同的索引。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:03:41.523

### 您需要创建两个函数。

该`getRandomValue()`函数将数组作为输入，并为您提供随机索引和值。

```
function getRandomValue(myArray)
{
    var index = Math.floor(Math.random() * myArray.length);
    return [myArray[index], index];
} 
```

现在你声明你的`images`和`names`数组。

```
var images = [{
    "src": "images2/animal_1.jpg",
    "title": "Dog"},

{
    "src": "images2/animal_2.jpg",
    "title": "Cat"},

{
    "src": "images2/animal_3.jpg",
    "title": "Sheep"},

{
    "src": "images2/animal_4.jpg",
    "title": "Cow"}];

var name = ["Dog", "Cat", "Sheep", "Cow"];​ 
```

现在我们的主要功能来了。首先，通过将图像数组传递给`randomValue()`函数来获取随机图像。对名称也是如此。返回的每个值都是值和索引的数组。

现在比较索引，如果索引不同，则将两者都作为数组返回。否则，返回函数生成另一个。

```
function getImgName()
{
    var img = getRandomValue(images);
    var nam = getRandomValue(name);
    if (img[1] != nam[1])
        return getImgName();
    else
        return [img[0], nam[0]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:20:03.057

[首先，用你最喜欢的算法](https://stackoverflow.com/q/7309361/1048572)洗牌一个数组，例如[Fisher-Yates-Knuth 洗牌](https://stackoverflow.com/a/813950/1048572)。

现在，再次打乱该结果，但现在使用一种已知可以移动每个元素的算法：

```
function shuffleMove(array) {
    var i = array.length;
    while (--i) {
        // Notice the difference to the normal algorithm:
        // j will be a number different from i
        var j = Math.floor(Math.random() * i);
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
    return array;
} 
```

在您的情况下，用途将是：

```
images.shuffle();
var names = [];
for (var i=0; i<images.length; i++)
    names[i] = images[i].title;
shuffleMove(names); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:20:35.570

要随机播放数组，请使用 Knuth 的随机播放。为了满足条件，每次迭代都需要检查并在必要时重新滚动

```
for (var i = name.length-1; i > 0; i--) {  
  while(1) {
    var index = Math.floor(Math.random() * i);
    // check condition 
    if (name[index] === images[i].title)
      continue;
    // swap
    var temp = name[i];  
    name[i] = name[index];  
    name[index] = temp;  
    break;  
  }  
} 
```

# android - 与 ViewPager 一起使用时 ImageView 未检测到点击

> ID：12287095
> 
> 赞同：1
> 
> 时间：2012-09-05T17:53:20.070
> 
> 标签：android, onclick, android-viewpager, android-imageview

我有以下 XML 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/welcome_bg" >

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <ImageView
            android:id="@+id/arrowLeft"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|left"
            android:layout_marginLeft="10dp"
            android:clickable="true"
            android:contentDescription="@string/arrow_left"
            android:focusable="true"
            android:src="@drawable/arrow_left"
            android:visibility="invisible" />

        <ImageView
            android:id="@+id/arrowRight"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|right"
            android:layout_marginRight="10dp"
            android:clickable="true"
            android:contentDescription="@string/arrow_right"
            android:focusable="true"
            android:src="@drawable/arrow_right" />

        <android.support.v4.view.ViewPager
            android:id="@+id/tutorialViewPager"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
    </FrameLayout>

</RelativeLayout> 
```

我的问题是，当用户单击左箭头或右箭头时，寻呼机应该翻转，但我无法在左箭头或右箭头 ImageView 上获得点击事件。单击箭头时，我无法获取事件。我在两个箭头上都设置了 onClickListeners，但它们从未被调用过。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:04:46.207

我想到了。我不得不使用`rightArrow.bringToFront()`and `leftArrow.bringToFront()`。这将按钮带到了前面，我能够在它们上获得点击事件。

# sql - SQL-将数字（0）添加到现有条目（Varchar）中的特定位置以将所有条目加一

> ID：12287106
> 
> 赞同：2
> 
> 时间：2012-09-05T17:54:02.450
> 
> 标签：sql, sql-update, sql-like

我想通过在前两位数字后添加 0 来延长几个事件编号。前两位数字代表年份。前任。我想将 121023 更改为 1201023。所以我想将所有以 12 开头的事件编号（Varchar）更改为以 120 开头，方法是添加 0 以将所有事件编号加一。

这是我到目前为止所拥有的：

```
UPDATE EVENT 
SET EVNT_URI = '***what do I put here?***' 
WHERE EVNT_URI IN(SELECT EVNT_URI FROM EVENT WHERE EVNT_URI LIKE '12%') 
```

我这样做的原因是 12 代表年份，事件编号接近 130000。所有事件编号都是 6 位，我想通过在第一个数字后添加一个零来将它们更改为 7 位数字代表年份。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:59:55.797

```
update event
set evnt_Uri = evnt_Uri + 1080000
where evnt_Uri between 120000 and 129999 
```

尽管如果这些不是数字，而只是由数字字符组成的字符串，那么人们可能会争辩说它们根本不应该存储为 int

# ruby - 基于否定的Ruby正则表达式返回匹配

> ID：12287111
> 
> 赞同：0
> 
> 时间：2012-09-05T17:54:07.947
> 
> 标签：ruby, regex

我只想捕获`nbnbaasd<sd`出现在 any 之前的字符串部分`a`。

我希望它`nbnb`作为比赛返回。

```
 /.+(?!a)/.match("nbnbaasd<sd") # returns the whole string 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:57:04.677

只需使用[否定字符集](http://www.regular-expressions.info/charclass.html#negated)：

```
/[^a]+/.match("nbnbaasd<sd") 
```

它比前瞻方法更有效。

* * *

在此处查看实际操作：[http ://regexr.com?32288](http://regexr.com?32288)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:56:26.733

它返回整个字符串，因为事实上，“nbnbaasd<sd”后面*没有*“a”。

试试这个。

```
/.+?(?=a)/.match("nbnbaasd<sd") 
```

（您实际上不需要使用前瞻来实现这一点，但也许您已经简化了您的问题，并且在您的实际问题中，出于某种原因，您确实需要一个零宽度断言。所以这是一个尽可能接近的解决方案你尝试过的一个。）

# c - 与二维数组混淆

> ID：12287112
> 
> 赞同：2
> 
> 时间：2012-09-05T17:54:11.837
> 
> 标签：c, multidimensional-array

请考虑以下二维数组：

```
int array[2][2] = {
                    {1,2},
                    {3,4}
                  }; 
```

根据我的理解： - 'array' 表示二维数组的基地址（与数组的第一个元素的地址相同，即数组 [0] [0]）。

*   二维数组在内存中的实际排列就像一个大的一维数组。

*   现在，我知道基地址 = 数组。因此，我应该能够到达包含元素的内存块：array[0][0]。

*   如果我忘记了二维数组的事情并尝试将此数组视为简单的一维数组： array[0] = *(array+0) 给出第一个数组的基地址而不是元素 array[0 ][0]。为什么？

*   二维数组不存储任何内存地址（如指针数组）。

*   如果我知道基地址，我必须能够以线性一维数组的形式访问该内存。

请帮我澄清这个疑问。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:59:55.873

“你不应该害怕 poynter arythmethyc”...

```
int array[2][2] = { { 1, 2}, { 3, 4 } };
int *ptr = (int *)&array[0][0];
int i;
for (i = 0; i < 4; i++) {
    printf("%d\n", ptr[i]);
} 
```

为什么这行得通？C 标准规定多维数组在内存中是连续的。这意味着，您的 2D 数组的排列方式，就其元素的顺序而言，类似于

```
array[0][0]
array[0][1]
array[1][0]
array[1][1] 
```

当然，如果你把数组的地址当作一个指向int的指针（`int *`，让我们命名它`ptr`），那么各项的地址如下：

```
ptr + 0 = &array[0][0]
ptr + 1 = &array[0][1]
ptr + 2 = &array[1][0]
ptr + 3 = &array[1][1] 
```

这就是它最终起作用的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T18:04:00.627

`array[0]`是一维数组。其地址与 的地址`array`相同，与 的地址相同`array[0][0]`：

```
assert((void*)&array == (void*)&(array[0]));
assert((void*)&array == (void*)&(array[0][0])); 
```

由于`array[0]`它是一个数组，因此您不能将其分配给变量，也不能将其传递给函数（如果您尝试这样做，您将传递一个指向第一个元素的指针）。您可以通过查看`(array[0])[0]`and来观察它是一个数组`(array[0])[1]`（括号是多余的）。

```
printf("%d %d\n", (array[0])[0], (array[0])[1]); 
```

您可以观察到它的大小是 2 个`int`对象的大小。

```
printf("%z %z %z\n", sizeof(array), sizeof(array[0]), sizeof(array[0][0])); 
```

这是一个表示内存布局的图表：

```
+-------------+-------------+-------------+-------------+
|      1      |      2      |      3      |      4      |
+-------------+-------------+-------------+-------------+
 `array[0][0]' `array[0][1]' `array[1][0]' `array[1][1]'
`---------array[0]---------' `---------array[1]---------'
`-------------------------array-------------------------' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T18:05:06.117

1.  二维数组在内存中的实际排列就像一个大的一维数组。

    是的，存储区域是连续的，就像一维数组一样。但是索引方法有点不同。

    ```
    2-D[0][0] = 1-D[0] 

    2-D[0][1] = 1-D[1] 

    ... 

    2-D[i][j] = 1-D[ i * rowsize + j]

    ... 
    ```

2.  如果我忘记了二维数组的事情并尝试将此数组视为简单的一维数组： array[0] = *(array+0) 给出第一个数组的基地址而不是元素 array[0 ][0]。为什么？
    *(array+0) 表示指向数组的指针。这种格式的第一个元素索引应该是*((*array+0)+0)。

    所以最后应该是 *(*array)

3.  二维数组不存储任何内存地址（如指针数组）。当然可以 。例如 ，

    ```
    int * array[3][3] ={ null, }; 
    ```

4.  如果我知道基地址，我必须能够以线性一维数组的形式访问该内存。

    使用这个正式的 2-D[i][j] = 1-D[ i * rowsize + j]...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T18:37:48.743

数组不是指针。

在大多数情况下¹，“N-element array of”类型的*表达式*`T`将被转换（“decay”）为“pointer to `T`”类型的表达式，表达式的值将是第一个元素的地址大批。

*表达式* 的类型`array`是“2 元素数组的 2 元素数组`int`”。根据上面的规则，在大多数情况下，这将衰减为“指向`int`( `int (*)[2]`) 的 2 元素数组的指针。这意味着表达式`*array`（以及扩展，`*(array + 0)`and `array[0]`）的类型是“2 元素数组`int`”，这反过来会衰减到 type `int *`。

因此，`*(array + i)`为您提供以下第`i`' 个*2 元素数组`int`*`array`（即 int 的第一个 2 元素数组在`array[0]`( `*(array + 0)`) 处，第二个 2 元素数组`int`在`array[1]`( `*(array + 1)`) 处。

如果您想将`array`视为 的一维数组`int`，则必须按照以下方式进行一些铸造体操

```
int *p = (int *) array;
int x = p[0]; 
```

或者

```
int x = *((int *) array + 0); 
```

* * *

^(1\. 例外情况是数组表达式是一元运算符`sizeof`或一元运算符的操作数`&`，或者是用于在声明中初始化另一个数组的字符串文字。)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T18:22:44.380

我喜欢H2CO3的回答。但是您也可以将指向数组的指针视为可递增变量，如下所示：

```
int array[2][2] = { { 1, 2}, { 3, 4 } };
int *ptr = (int *)array;
int i;
for (i = 0; i < 4; i++) 
{
    printf("%d\n", *ptr);
    ptr++;  
} 
```

++ 运算符在指针上工作得很好。在这种情况下，它会将指针增加其类型的一个地址，或 int 的大小。

必须始终小心使用 c 中的数组，以下将编译得很好：

```
int array[2][2] = { { 1, 2}, { 3, 4 } };
int *ptr = (int *)array;
int i;
for (i = 0; i < 100; i++)  //Note the 100
{
    printf("%d\n", *ptr);
    ptr++;  
} 
```

这将溢出数组。如果你正在写这个，你可能会破坏程序中的其他值，包括 for 循环中的 i 和指针本身中的地址。

# javascript - iphone 和 ipad 上的 Fancybox 和覆盖

> ID：12287119
> 
> 赞同：1
> 
> 时间：2012-09-05T17:54:44.327
> 
> 标签：javascript, iphone, css, ipad, fancybox

我现在正在使用fancybox，它工作正常，但不适用于大于屏幕尺寸的ajax 内容。

在此页面上掠夺：http: [//go-mstudio.com/](http://go-mstudio.com/)在 iphone 或 ipad 中并打开链接“ajax”。覆盖将仅是屏幕尺寸，然后变为白色。

我如何修理它？

# php - 我怎样才能使这个查询防注入？(PHP)

> ID：12287120
> 
> 赞同：3
> 
> 时间：2012-09-05T17:54:51.317
> 
> 标签：php, mysql, sql, pdo, sql-injection

**要点**

我想执行一个 SQL 查询，该查询依赖于我的 GET 中可变数量的参数，而不容易受到 SQL 注入的影响。

**参数**

我的 URL 可以这样形成：

```
https://www.example.com/index.php?param1=blah1,param2=blah2,param3=a,b,c 
```

或像这样：

```
https://www.example.com/index.php?param1=blah1,param2=blah2,param3=a,b,c,d,e,f,g 
```

换句话说，param3 可以有可变数量的逗号分隔参数 a、b、c 等。

**白名单**

我检查以确保 a、b、c 等中的所有参数。在我执行查询之前已在批准的白名单中。

```
// $valid_params is an array of pre-approved parameters.
$arr = explode(',', clean($_GET['param3']));
$params = Array();
foreach($arr as $param){
  if(in_array($param, $valid_params)){
    array_push($params, $param);
  }
} 
```

**查询**

我这样设置我的数据库连接（使用 MySQL）：

```
$db_connection = new PDO("mysql:host={$DB_HOST};dbname={$DB_NAME}",$DB_USER,$DB_PASS);
$db_connection->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$db_connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

我想执行这样的查询（安全除外）：

```
$comma_separated_params = implode(',',$params);
$result = $db_connection->query("SELECT {$comma_separated_params} FROM some_table"); 
```

**目标**

有谁知道我怎样才能安全有效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:04:19.587

根据您对开销的关注，您可以`SELECT *`在 PHP 中过滤数组 - 如果参数从未发送到数据库，则没有注入空间。

然而，这并不是最优雅的解决方案。这是我的做法：

```
$comma_separated_params =
  implode(
    ",",
    array_map(
      function($a) {return "`".$a."`";},
      array_intersect(
        explode(",",$_GET['param3']),
        $valid_params
      )
    )
  )
); 
```

单行奇观（为清楚起见添加了换行符）将获取`$_GET['param3']`变量，用逗号分隔，将其与您的有效参数（而不是`foreach`循环）相交，将每个元素包装在反引号中（请参见下面的注释）并最后粘合它们和逗号一起。

看，反引号允许您使用任何字符串作为字段名称。通常是允许关键字作为名称，但也可以允许带有空格的列名，等等。在反引号中唯一有意义的字符是反斜杠和反引号 - 可以安全地假设它们不存在，因为它们必须在您的列表中`$valid_params`才能达到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:01:29.690

白名单是这里的方法。如果你只允许你已经明确定义的东西，你应该没问题。至于效率如何，这都是相对的。您使用的版本对于相对较小的列表（例如少于 100 列的列表）表现良好，所以我不会担心。

使用 PDO 的奖励积分。

您对“允许”列的定义与数据库中的实际内容可能会有所不同。一个更宽松的规范可能是获取`SHOW FIELDS`用于相关表的字段并只允许这些字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:01:45.617

如果您只允许在参数 3 中传递预定义值的特定列表，并且您正在将输入值与它们进行比较，我认为您没有任何注入暴露，因为您可以完全控制最终的值进入你的`$comma_seperated_params`变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T18:11:01.083

这需要一些工作才能完成，但使用参数绑定它看起来像这样：

```
$binding = array();
$selects = array();
foreach ( $params as $value ) {
  $binding[] = ':' . $value; 
  $selects = '?';
}

$select = implode(',', $select);

$result = $db_connection->prepare("SELECT $select FROM some_table"); 
foreach ( $binding as $key => $bind ) {
  $result->bindParam($key, $bind, PDO::PARAM_STR);
}

$result->execute(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T11:52:49.720

[PDO::prepare](http://www.php.net/manual/en/pdo.prepare.php)会帮助你。这正是专家推荐的。永远不要使用`mysql_real_escape_string (string)`. 总是去准备好的陈述。

# java - 实现本地搜索（2-opt）以解决 Java 中的 TSP

> ID：12287131
> 
> 赞同：0
> 
> 时间：2012-09-05T17:55:49.710
> 
> 标签：java, heuristics, traveling-salesman

我正在尝试实现这一点，但我找不到一篇好的论文或描述如何做到这一点，你们能指出我正确的方向吗？我确实在 C# 中有一个实现，但我不知道将代码转换为 Java。

根据评论，我添加了一些我无法转换为 Java 的 C# 代码：

```
//T with the smallest func(t)
      static T MinBy<T, TComparable>(this IEnumerable<T> xs, Func<T, TComparable> func) where TComparable : IComparable<TComparable>{
        return xs.DefaultIfEmpty().Aggregate((maxSoFar, elem) => func(elem).CompareTo(func(maxSoFar)) > 0 ? maxSoFar : elem);
      }

      //returns an ordered set of nearest neighbors
      static IEnumerable<Stop> NearestNeighbors(this IEnumerable<Stop> stops){
        var stopsLeft = stops.ToList();
        for (var stop = stopsLeft.First(); stop != null; stop = stopsLeft.MinBy(s => Stop.Distance(stop, s))){
            stopsLeft.Remove(stop);
            yield return stop;
        }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:56:58.473

我假设你不熟悉 C#。因此，我将尝试简短地解释一些事情。

1.  `IEnumerable<T>`是 C# 等价于 java 的`Iterable<T>`

2.  `Func<T, V>`是一个方法的抽象，输入是 T，返回值是 V。C# 与 Java 不同，支持闭包，但它们实际上就像 java 匿名类，没有所有的语法大惊小怪。所以基本上， MinBy 的第二个参数是一种从 T 中提取属性的方法，与比较相关。您可以使用匿名类轻松实现相同的抽象，但它不会那么简洁。

3.  第一个参数之前的奇怪`this`修饰符是说这是一个扩展方法。它仅用于语法糖目的。当一个方法像这样定义时，这意味着它可以在第一个参数的*实例*上调用（它前面有 this 修饰符）。这使您可以编写如下代码：

    `IEnumerable<String> seq = getS();
    seq.MinBy(/*bla*/);`

而不是显式指定 Utility 类，而是在以下位置定义静态方法：

```
 MyUtility.MinBy(s, /*bla*/); 
```

您可能不需要这种高级别的抽象（让我们面对现实，Java 根本不是为它构建的）所以您想要做的是定义一个方法而不是 MinBy 输入一个 Iterable leftStops 和另一个 Stop currentStop 并找到从 leftStops 到 currentStop 的最近站点。

就像是：

```
Stop findClosest(Stop currentStop, Iterable<Stop> left stops) {/*implement me*/} 
```

完成后，让我们转向 NearestNeighbors 本身。那是什么`yield return`？这是在 .Net 中实现迭代器的一种非常强大的方法。我觉得对其工作原理的完整解释超出了我们讨论的范围，因此我重写了不使用此功能的方法，以保留其功能（并删除了第一个参数的 this 限定符）：

```
 static IEnumerable<Stop> NearestNeighbors(IEnumerable<Stop> stops){

        IEnumerable<Stop> result = new List<stop>();

        var stopsLeft = stops.ToList();

        for (var stop = stopsLeft.First(); stop != null; stop = stopsLeft.MinBy(s => Stop.Distance(stop, s))){
            stopsLeft.Remove(stop);
            result.Add(stop);
        }
        return result;
      } 
```

所以我们剩下以下算法：

1.  输入停靠点列表
2.  下一站 = 第一站
3.  从停止列表中删除下一站
4.  找到离下一站最近的站点并设置 next-stop=closest
5.  如果有更多站点，请转到 3
6.  按访问顺序返回站点。

希望现在更清楚了。

# java - 系统托盘图标看起来扭曲

> ID：12287137
> 
> 赞同：18
> 
> 时间：2012-09-05T17:56:10.787
> 
> 标签：java, swing, icons, system-tray, trayicon

我正在尝试使用 Java 添加图标并将其显示到系统托盘中。但是，图标总是太小，或者在某些区域被截断。它是左数第二个，以防你无法分辨。

我在这里做错了什么？我怎样才能让这个图标完全显示？用于系统托盘的标准图标大小是多少？

编辑：我正在使用 AWT SystemTray 和 TrayIcon

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-05T18:13:07.943

从磁盘检索实际图像资源后，您可以通过动态创建“假”图像资源并获取其宽度来将其调整为所需的大小。

我发现这比使用该`[setImageAutoSize(true)](http://docs.oracle.com/javase/7/docs/api/java/awt/TrayIcon.html#setImageAutoSize%28boolean%29)`方法要好，因为该方法根本无法平滑缩放图像。

```
BufferedImage trayIconImage = ImageIO.read(getClass().getResource("/path/to/icon.png"));
int trayIconWidth = new TrayIcon(trayIconImage).getSize().width;
TrayIcon trayIcon = new TrayIcon(trayIconImage.getScaledInstance(trayIconWidth, -1, Image.SCALE_SMOOTH)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-05T18:00:36.763

要以最佳尺寸显示图标，您需要手动将其调整为正确的尺寸。此正确大小可能因操作系统和首选项而异，因此 Java 提供了一种获取任务栏图标尺寸的方法，在您的示例图像中为 16x16。

```
if (SystemTray.isSupported()) {
    SystemTray tray = SystemTray.getSystemTray();
    Dimension trayIconSize = tray.getTrayIconSize();
    // resize icon image to trayIconSize
    // create your tray icon off of the resized image
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-05T18:13:35.343

根据[`TrayIcon.setImageAutoSize(boolean)`](http://docs.oracle.com/javase/8/docs/api/java/awt/TrayIcon.html#setImageAutoSize-boolean-).

> 设置自动大小属性。自动调整大小确定托盘图像是否自动**调整大小以适合托盘上为图像分配的空间**。默认情况下，自动大小属性设置为 false。
> 
> 如果 auto-size 为 false，并且图像大小与托盘图标空间不匹配，则图像在该空间内按原样绘制 - 如果大于分配的空间，它将**被裁剪。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-12T18:24:57.220

我最终结合了其中一些答案来制作我正在使用的代码。

这会在我的系统托盘中从 100x100 开始的 png 生成一个好看的图标。

值得注意的是，在视网膜 MacBook 上，按比例缩小的图标看起来更糟。因此，我在其他地方进行了检查，以查看它是否在 Mac 上运行，如果是，请不要应用它。

```
public Image imageForTray(SystemTray theTray){

    Image trayImage = Toolkit.getDefaultToolkit().getImage("my100x100icon.png");
    Dimension trayIconSize = theTray.getTrayIconSize();
    trayImage = trayImage.getScaledInstance(trayIconSize.width, trayIconSize.height, Image.SCALE_SMOOTH);

    return trayImage;
} 
```

# plugins - TYPO3 4.7.2 通过打字稿包含 extbase 插件

> ID：12287145
> 
> 赞同：4
> 
> 时间：2012-09-05T17:56:46.450
> 
> 标签：plugins, typo3, typoscript, extbase

我写了一个扩展，通过后端插件的实现做的一切都是正确的。

但是当我尝试通过打字稿实现我的扩展时，我每次都会遇到这个错误：

> 糟糕，发生错误！
> 
> 无法确定默认控制器。请检查 ext_localconf.php 中的 Tx_Extbase_Utility_Extension::configurePlugin()。

而且我不知道为什么.. 我尝试了不同的实现（每个 tx_extbase_core_bootstrap->run 或 tx_extbase_dispatcher->dispatch 以及附加信息和没有），当前的打字稿看起来像这样：

```
plugin.tx_graphichmenu {
    settings {
        menuUid = 1
    }
}

lib.tx_graphichmenu = USER
lib.tx_graphichmenu {
    userFunc = tx_extbase_core_bootstrap->run
    extensionName = Graphichmenu
    pluginName = Graphicmenu
    controller = MenuController
    action = showAction
}

temp.mainTemplate.subparts.stickyfooter < lib.tx_graphichmenu 
```

我对所有内容进行了双重和三重检查，我没有发现任何错误......在没有“动作”和“控制器”部分的情况下尝试过，没有任何改变

我在 ext_localconf.php 中的 configurePlugin 部分如下所示：

```
Tx_Extbase_Utility_Extension::configurePlugin(
    $_EXTKEY,
    'Graphicmenu',
    array(
        'Menu' => 'show',
    ),
    // non-cacheable actions
    array(
        'Menu' => '',
    )
); 
```

“show”动作没有参数。在那里，我加载了 ts 设置，从那里获取要显示的对象的 Uid

PS：每次更改后我都清除了缓存并删除了typo3conf中的“temp_CACHED_ ...”文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T18:03:58.190

你需要修改你的引导程序，有一个通用的语法：

```
lib.foo = USER
lib.foo {
    userFunc = tx_extbase_core_bootstrap->run
    extensionName = YourExtension
    pluginName = YourPlugin
    vendorName = YourVendor
    switchableControllerActions {
        Standard {
            1 = action2
            2 = action3
        }
    }
} 
```

注意：**CamelCase**的`extensionName`值很重要！（感谢 Kai 的确认）所以如果 extkey 是：`kai_some_extension`它必须写成`KaiSomeExtension`

所以在你的情况下，它应该是这样的：

```
lib.foo = USER
lib.foo {
    userFunc = tx_extbase_core_bootstrap->run
    extensionName = GraphicHmenu
    pluginName = Graphicmenu
    switchableControllerActions {
        Menu {
            1 = show
        }
    }
} 
```

# java - 从 Eclipse 中的包中访问引用的库

> ID：12287146
> 
> 赞同：10
> 
> 时间：2012-09-05T17:56:47.723
> 
> 标签：java, eclipse, jar

如果我将类保存在默认包中，我只能访问引用的库类。如果我尝试从任何其他包访问它们，我会得到“无法解析类名”。知道为什么会发生这种情况吗？

![在此处输入图像描述](../Images/30286402835092b933799aa92cedf9e0.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-06T02:41:31.757

该软件包来自普林斯顿大学 IntroCS 课程的标准库，经过快速谷歌搜索。

如果您遵循页面 [http://introcs.cs.princeton.edu/java/stdlib/上的常见问题解答](http://introcs.cs.princeton.edu/java/stdlib/)

> 问：如果我使用命名包来构造我的代码，编译器将无法再访问 stdlib.jar 中的库。为什么不？A. stdlib.jar 中的库位于“默认”包中。在 Java 中，您不能从命名包访问默认包中的类。如果您需要将我们的库与命名包一起使用，您可以使用打包版本的 stdlib-package.jar。

下载包jar文件：http: [//introcs.cs.princeton.edu/java/stdlib/stdlib-package.jar](http://introcs.cs.princeton.edu/java/stdlib/stdlib-package.jar)

右键单击项目文件夹并添加外部 JAR。

```
import edu.princeton.cs.introcs.*; 
```

将上面的行添加到需要引用类的类中。第一行引用了正确的包名， * 通配符导入其中的所有类。

:) 希望有帮助。

//编辑 - 如果您右键单击项目文件夹并使用“组织导入”它会更快，因此您不必手动添加到每个类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T18:02:33.650

检查您是否有正确的`import`声明以及您所引用的类型是否具有`public`访问修饰符。

默认包中的类型的导入声明是不可能的。JLS 指定从未命名的包中导入类型是编译时错误。您必须通过反射访问您的类，或者最好不要使用默认包。当您想在默认包中创建类型时，Eclipse 应该向您显示警告，因为通常不鼓励这样做。

如果您使用的是 Eclipse 之类的 IDE，请尝试在要使用它的类中的类型名称后面点击`CTRL`+ 。`SPACE`Eclipse 应该给你所有匹配的机会，如果你选择你的类，它会自动为你添加导入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T18:01:07.793

您需要将包导入其他包。

一个包中的类不能直接引用另一个包，除非它被引用。

# perl - Shell脚本中字符的小写到大写

> ID：12287162
> 
> 赞同：4
> 
> 时间：2012-09-05T17:57:53.513
> 
> 标签：perl, shell, unix, sed, awk

> **可能的重复：**
> [Shell 脚本中的字符小写到大写](https://stackoverflow.com/questions/12210568/character-lowercase-to-uppercase-in-shell-scripting)

我的价值是：`james,adam,john`我正在努力做到`James,Adam,John`（每个名字的第一个字符应该是大写）。

```
echo 'james,adam,john' | sed 's/\<./\u&/g' 
```

不适用于所有系统。在一个系统中它显示正常..但在另一个系统中不正常...

```
A="james adam john"
B=( $A )
echo "${B[@]^}" 
```

它抛出了一些语法错误......所以，我正在通过一个长查询来做这个循环，这太长了。有没有捷径可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T19:56:58.457

有很多方法可以定义“名称的开头”。此方法选择单词边界后的任何字母并将其转换为大写。作为副作用，这也适用于“Sue Ellen”或“Billy-Bob”等名称。

```
echo "james,adam,john" | perl -pe 's/(\b\pL)/\U$1/g' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T18:08:47.467

使用 Perl：

```
echo "james,adam,john" | \
  perl -ne 'print  join(",", map{ ucfirst } split(/,/))' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T18:25:50.360

您可以像这样使用 awk 将输入中每个单词的首字母大写：

```
echo "james,adam,john" | awk 'BEGIN { RS=","; FS=""; ORS=","; OFS=""; }
{ $1=toupper($1); print $0; }' 
```

### 输出

```
James,Adam,John 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T07:57:45.023

*与TLP*相同的方法，但使用 GNU sed：

```
echo "james,adam,john,sue ellen,billy-bob" | sed -r 's/\b(.)/\u\1/g' 
```

输出：

```
James,Adam,John,Sue Ellen,Billy-Bob 
```

如果只有第一个字母应该大写，请改用：

```
echo "james,adam,john,sue ellen,billy-bob" | sed 's/[^,]*/\u&/g' 
```

输出：

```
James,Adam,John,Sue ellen,Billy-bob 
```

# entity-framework-5 - 具有非主外键的 EF5 导航/关联属性

> ID：12287168
> 
> 赞同：1
> 
> 时间：2012-09-05T17:58:07.273
> 
> 标签：entity-framework-5

[这是与this](https://stackoverflow.com/questions/9217448/entity-framework-foreign-keys-to-non-primary-key-fields)完全相同的问题，但适用于 EF5。

现在有可能吗？

我们有一个具有 int PK 的 Users 表，但在我们的其他具有 InsertBy/UpdateBy 等列的表中，希望使用来自 Users 表的 LANID varchar 列的值，而不是 UserID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:58:20.513

不，这仍然是不可能的。FK 必须以主表中的 PK 为目标，因为 EF 仍然不支持唯一键（使用非 PK 列的先决条件）。

# javascript - JavaScript：点击事件上的对象的值

> ID：12287172
> 
> 赞同：1
> 
> 时间：2012-09-05T17:58:39.480
> 
> 标签：javascript, jquery

我正在学习 codecademy.com 课程，该课程教我如何使用 jQuery 构建条形图。最后一组指令是向 $bar 添加一个点击事件以显示它的值。它解释了

> 匿名函数是这样的：`function(arg) { code }`. 在这种情况下， .click 处理程序将单击事件 e 作为其参数，因此您的实现应该`function(e) { alert code }`在`.click()`.

这是我应该修改的功能

```
// Exercise 5
function addBarClickEvent($bar,value) {
    // add a click event to the bar that 
    // pops up an alert with the bars value
    $bar.click(
        // your code goes here!

        }
    );
} 
```

我尝试了下面显示的两种解决方案，但都没有奏效。不幸的是，该课程没有提供解决方案。任何人都可以帮忙。

```
// Exercise 5
    function addBarClickEvent($bar,value) {
        // add a click event to the bar that 
        // pops up an alert with the bars value
        $bar.click(
            // your code goes here!
              alert($bar.value)       //my attempt
              alert(e.value)          //my second attempt
            }
        );
    } 
```

我收到此错误消息

> 确保将 .click 的参数定义为显示警报的匿名函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:00:54.830

假设您要显示的值是绑定时传递的值

```
function addBarClickEvent($bar,value) {
    // add a click event to the bar that 
    // pops up an alert with the bars value
    $bar.click(function(){
       alert(value);
    });
} 
```

如果不 -

```
$bar.click(function(){
   // get value somehow
  //$(this).data('some-value');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:11:02.687

该问题确切地告诉您该怎么做：“您的实现应该在 .click() 中包含 function(e) { alert code }”

只需写下它所说的：`$bar.click(function(e) { alert(this.value); }`

根据值的实际位置调整`this.value`- 我不知道也无法猜测；）

# sql - 从一个查询的结果中设置变量以供另一个查询使用？

> ID：12287174
> 
> 赞同：0
> 
> 时间：2012-09-05T17:58:48.320
> 
> 标签：sql, sql-server-2008

我有 2 个查询，其中一个查询包含另一个查询要使用的参数。我做了类似的事情，但没有使用多个参数。以下是查询：

```
SELECT [loadJob]
      ,[loadStep]
      ,[parameter]
      ,[value]
  FROM [Admin].[admin].[LoadParameters] where loadJob like 'someJobName%' and (parameter = 'targetDatabaseName' or parameter = 'targetDatasetName' or parameter = 'targetDatasetSchema')

SELECT 
      TABLE_CATALOG as DB,
      TABLE_SCHEMA,
      TABLE_NAME,
      COLUMN_NAME,
      ORDINAL_POSITION,
      COLUMN_DEFAULT,
      IS_NULLABLE,
      DATA_TYPE,
      CHARACTER_MAXIMUM_LENGTH,      
      NUMERIC_PRECISION,
      NUMERIC_PRECISION_RADIX,
      NUMERIC_SCALE,
      DATETIME_PRECISION,      
      CHARACTER_SET_NAME
FROM 
INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_CATALOG = 'TheDataBase' // From the [parameter] with name 'targetDatabaseName' get form the [value] column
AND TABLE_SCHEMA = 'data' // From the [parameter] with name 'targetDatasetSchema' get form the [value] column
AND TABLE_NAME = 'TableName'  // From the [parameter] with name 'targetDatasetName' get form the [value] column 
```

所以如果我的第一个查询结果是：

```
[parameter]           [value]

targetDatabaseName    SomeDataBaseName

targetDatasetSchema   data

targetDatasetName     TheTableName 
```

第二个查询中的 where 子句将使用这些参数，如下所示：

```
FROM 
INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_CATALOG = 'SomeDataBaseName'
AND TABLE_SCHEMA = 'data'
AND TABLE_NAME = 'TheTableName' 
```

我也想按表名对所有内容进行分组，以便将其导出为 CSV。我尝试了一些东西，但我可以自豪地说什么都行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:17:49.500

如果你真的不需要数据库，那么你可以使用类似的东西：

```
with FirstQuery as (
    select max(case when parameter = 'TargetDatabaseName' then value end) as DB,
           max(case when parameter = 'TargetDatasetSchema' then value end) as Schema,
           max(case when parameter = 'TargetDataSetName' then value end) as table
    from (<first query goes here>) t
)
selelect <whatever>
from Information_Schema q2 join
     FirstQuery q1
     on q1.Table_Schema = q2.Schema and
        q1.Table_Name = q2.table 
```

我看到的问题是数据库。在 SQL Server 中，Information_Schema 表仅包含有关一个数据库的信息。要一次获取多个数据库，您可能必须使用动态 SQL。

# jquery - jQuery animate() 在点击时向右移动 div，然后向左移动

> ID：12287176
> 
> 赞同：4
> 
> 时间：2012-09-05T17:58:53.673
> 
> 标签：jquery, jquery-animate

我试图让一个 div 向右滑动，然后在单击时向左滑动。我目前有这个代码，但它向右滑动，然后立即向左滑动而无需再次单击。我也尝试实现切换，但最终破坏了脚本。我感觉如此接近，但似乎无法确定它。

```
$(function(){
    $("#click").click(function(){
        $("#click").animate({left:'+=100px'}, 'fast');
    });

    $("#click").click(function() {
        $("#click").animate({left:'0'}, 'fast');
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T18:02:16.490

## *[jsBin 演示](http://jsbin.com/avuruz/5/edit)*

```
var c=0;
$("#click").click(function(){
    $(this).stop().animate({left: ++c%2*100 }, 'fast');
}); 
```

**解释这个解决方案背后的数学：**
每次点击后`var c`都会预先增加，所以基本上在 10 次点击后`c`会`== 10`使用*模数* `10%2 = 0`，如果你继续点击数学是：
11%2 `=1`
12%2 `=0`
13%2 `=1`
14%2 `=0`。 .. 以此类推，
如果您将 1 乘以 100 = 100（所需的 100 像素），并且每个偶数 (0*100) 将导致我们的 0 像素！

* * *

或像这样：

```
var dir = 0;
$("#click").click(function(){
     dir = dir===0 ? 100 : 0;
     $(this).stop().animate({left: dir }, 'fast');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:02:49.393

这是因为根据第一个事件，Div 实际上向右移动了 100 像素。但是你定义了两个点击事件是对的。因此，每次点击都会调用该事件两次。

因此，您的 div 根据第一个函数移动 100px，然后立即触发第二个函数并向后移动。

您可以通过发出警报来检查这一点。即使单击一下，您也可以看到两个警报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:03:02.247

您需要确定（通过`left`偏移值或变量）div 当前的位置，并据此将其向右移动（如果向左，则向右移动，反之亦然）。因此，基本上单击函数中的 if 子句可以处理此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T18:25:38.047

最好使用 .queue 和 .dequeue 将这两个效果排队

您可以在此处查看一些示例和规范：http: [//api.jquery.com/queue/](http://api.jquery.com/queue/)

# makefile - make install 生成文件存在错误

> ID：12287181
> 
> 赞同：3
> 
> 时间：2012-09-05T17:59:45.180
> 
> 标签：makefile

我正在尝试编译并创建此[工具](https://github.com/scribd/advancecomp/tree/master/src)的可执行文件，执行./configure 然后 make 然后 make install，但是在此过程中我收到此错误：

```
test -z "/usr/local/bin" || ./install-sh -c -d "/usr/local/bin"
mkdir: /usr/local/bin: File exists
make[1]: *** [install-binPROGRAMS] Error 1
make: *** [install-am] Error 2 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:21:01.127

您似乎有一个*名为*`/usr/local/bin`. 像这样删除它：

```
rm /usr/local/bin 
```

# r - 从 R 中的文件夹创建 tar，同时仅保留相对路径

> ID：12287185
> 
> 赞同：0
> 
> 时间：2012-09-05T17:59:54.277
> 
> 标签：r, gzip, tar

按照杰夫在这里的回复： [https ://stackoverflow.com/a/4627044/429846](https://stackoverflow.com/a/4627044/429846)

我想 tar 一个文件夹，但保留相对于文件夹位置的路径（不包括驱动器名称等）。

示例代码：

```
tarfile <- 'newfile.tgz'
tar(tarfile,file.path(getwd(), "folder_name"),compression='gzip') 
```

可能吗？（在“tar”或其他函数名中）

谢谢。

# html - 有没有一种工具可以获取 css 类并使它们内联？

> ID：12287189
> 
> 赞同：3
> 
> 时间：2012-09-05T17:59:58.897
> 
> 标签：html, css

这听起来很倒退，但我想采用现有的 CSS 类并将它们内联在元素本身中（css 样式和 html 元素在同一个文件中）。这是有原因的，对此我不再赘述。

例子：

```
<html>
<style type="text/css">
   .p1 { height: 10px; }
</style>

<body>
<p class="p1">...</p> <!-- Remove class="p1" and replace with style="height: 10px;" -->
<p class="p1">...</p>
<p class="p1">...</p>
</body>
</html> 
```

请记住，可以有*许多*CSS 类，并且许多可以属于单个元素。

**编辑：** 我这样做的原因是因为（基于我们的客户端）我们想从 HTML 模板生成 PDF 文档。我们使用的 PDF 工具不适用于*外部*CSS 类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:02:14.680

您正在寻找[Premailer](http://premailer.dialect.ca/)（[也有可用的源代码](https://github.com/alexdunae/premailer/)）-它是一个 Ruby 库，可以做到这一点（内联 CSS 用于 HTML 电子邮件-但输出不是特定于 HTML 电子邮件-它应该可以与您的 PDF 文档生成器一起使用以及）。

[`lamson.html.HtmlMail`](http://lamsonproject.org/docs/html_email_generation.html)如果您使用的是 Python，并且有多种 Node.js 库可用于执行相同的操作，也可以使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T19:05:24.250

MailChimp 在他们的实验室中有一个页面，CSS Inliner - [http://beaker.mailchimp.com/inline-css](http://beaker.mailchimp.com/inline-css)

然而，它确实离开了课堂。

# wordpress - 从博客（wordpress 或 blogger）获取所有帖子

> ID：12287190
> 
> 赞同：3
> 
> 时间：2012-09-05T18:00:00.677
> 
> 标签：wordpress, blogger, blogspot

这是假设无法直接访问 api。由于我要求所有帖子，我不确定 RSS 会有多大帮助。

我考虑了一个简单的系统，它会遍历每年和每月并下载每个 html 文件，但会为每年的月份对更改以下 URL。这适用于 wordpress 和博客博客。

```
http://www.lostincheeseland.com/2011/05 
```

但是，有没有办法使用博主提供的以下搜索功能来返回所有博客？我玩过它，但文档似乎很少。

```
http://www.lostincheeseland.com/search?updated-max=2012-08-17T09:44:00%2B02:00&max-results=6 
```

还有其他我没有考虑过的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T21:59:22.627

您正在寻找的是[站点地图](http://en.wikipedia.org/wiki/Sitemaps)。

首先，您正在编写一个机器人，因此最好检查一下博客的[robots.txt](http://www.robotstxt.org/)文件。你瞧，你经常会发现那里提到的站点地图。[这是来自Google 博客](http://googleblog.blogspot.ie/robots.txt)的示例：

```
User-agent: Mediapartners-Google
Disallow: 

User-agent: *
Disallow: /search
Allow: /

Sitemap: http://googleblog.blogspot.com/feeds/posts/default?orderby=UPDATED 
```

在这种情况下，您可以访问站点地图 URL 以获取 xml 站点地图。

对于 Wordpress，同样适用，但它不是作为标准内置的，因此并非所有博客都有它。看看[这个插件](http://wordpress.org/extend/plugins/google-sitemap-generator/)，它是在 Wordpress 中创建这些站点地图的最流行的方式。例如，我的博客使用它，您可以在[/sitemap.xml](http://jamie.ideasasylum.com/sitemap.xml) （标准位置）找到站点地图

简而言之：

*   检查 robots.txt
*   如果存在，请按照站点地图 url
*   否则，检查 /sitemap.xml

**另外：** [做一个好的网民](http://blog.mischel.com/2011/12/20/writing-a-web-crawler-politeness/)！如果您要编写一个机器人，请确保它遵守 robots.txt 文件（例如 blogspot 明确告诉您**不要**使用的地方`/search`！）

# android - 创建一个新的 Android 应用程序项目

> ID：12287196
> 
> 赞同：3
> 
> 时间：2012-09-05T18:00:19.113
> 
> 标签：android, eclipse

我是 Android 开发的新手。我尝试使用 Eclipse 创建一个新的 Android 应用程序项目，但是当我单击“完成”时，窗口仍然打开。当我关闭它时，文件夹层次结构如下：

![等级制度](../Images/3b9cee885859542a54596f9f86b89a0f.png)

我认为这是不正确的，因为不存在 AndroidManifest

此外，这些是我在错误日志中得到的错误：

![错误](../Images/db90a746b25b9c709a0badf538dbaa7a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:53:51.383

有时删除您的调试证书会起作用。这将位于您的配置文件文件夹中（在 Windows 中，**%USERPROFILE%/.android**将是正确的位置）。现在清理构建你的 android 项目。它应该工作。

# android - 展开最大宽度的 ListView 中的 ImageView

> ID：12287197
> 
> 赞同：4
> 
> 时间：2012-09-05T18:00:20.710
> 
> 标签：android, android-layout, android-imageview

为了讨论，我有一个`ListView`项目是s。`ImageView`我希望图像缩放到行的*宽度*，`ListView`并保持它的纵横比。`ListView`这是的项目布局的简化版本，

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:padding="4dp" >

        <FrameLayout
            android:id="@+id/page_layout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:visibility="visible" >

            <ImageView
                android:id="@+id/image"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:adjustViewBounds="true"
                android:scaleType="fitCenter"
                android:src="@drawable/some_image" />
        </FrameLayout>
    </FrameLayout>

</LinearLayout> 
```

的`ImageView`宽度是`match_parent`，它的所有祖先都是一样的。布局设计器显示`ImageView`的尺寸跨越整个宽度，但里面的图像没有。

图像缩放正确。问题是列表视图行的高度使得宽度无法缩放到正确的大小。如果我使用`fitXY`，它会缩放宽度，但纵横比不正确。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:35:26.280

如果不创建自定义视图，我找不到任何方法来实现这一点。简而言之，自定义视图将其自己的尺寸设置为其后面的可绘制对象的真实（未缩放）尺寸。

```
public class ResizableImageView extends ImageView {

    public static interface OnSizeChangedListener {

        void onSizeChanged(int width, int height);
    }

    private OnSizeChangedListener onSizeChangedListener = null;

    public ResizableImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int width = MeasureSpec.getSize(widthMeasureSpec);
        int height = width * getDrawable().getIntrinsicHeight() / getDrawable().getIntrinsicWidth();
        setMeasuredDimension(width, height);
        if (onSizeChangedListener != null) {
            onSizeChangedListener.onSizeChanged(width, height);
        }
    }

    public void setOnSizeChangedListener(OnSizeChangedListener listener) {
        this.onSizeChangedListener = listener;
    }
} 
```

在我的情况下，我需要获取调整后的值以调整其他视图的大小，因此是监听器接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:26:38.950

如果您想要保持纵横比，根据[Android API Guide](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)，我认为您必须将 android:scaleType="fitCenter" 更改为 android:scaleType="centerInside" 或者 android:scaleType="centerCrop" 为fitCenter 不保持图像的纵横比。

# python - 如何将 Openpyxl 生成的 xlsx 输出到浏览器？

> ID：12287199
> 
> 赞同：6
> 
> 时间：2012-09-05T18:00:21.393
> 
> 标签：python, excel, browser, cgi, openpyxl

我现在使用 stackoverflow 有一段时间了，它经常帮助我。现在我有一个问题，我自己或通过搜索无法解决。我正在尝试在浏览器中输出由 openpyxl 生成的 excel 文件，就像我使用 phpexcel 一样。该方法似乎是相同的，但我只得到损坏的文件。我的代码如下所示：

```
from openpyxl.workbook import Workbook
from openpyxl.writer.excel import ExcelWriter
from openpyxl.writer.excel import save_virtual_workbook
from openpyxl.cell import get_column_letter
from StringIO import StringIO

print 'Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
print 'Content-Disposition: attachment;filename="results.xlsx"'
print 'Cache-Control: max-age=0\n'

output = StringIO()

wb = Workbook()

ws = wb.worksheets[0]

ws.cell('A1').value = 3.14

wb.save(output)
print output.getvalue()
#print save_virtual_workbook(wb) 
```

我使用版本 1.5.8 和 python 2.7。这些方法都不起作用。当我只是从桌面而不是浏览器使用它时，它可以完美运行。我将非常感谢您的帮助。

PS请不要告诉我使用其他语言或程序会更容易。我需要用python解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-06T10:35:11.943

这对我来说是工作。我使用`python 2.7`和最新的`openpyxl`和`send_file`来自烧瓶

```
... code ...

import StringIO
from openpyxl import Workbook
wb = Workbook()
ws = wb.active # worksheet
ws.title = "Excel Using Openpyxl"
c = ws.cell(row=5, column=5)
c.value = "Hi on 5,5"
out = StringIO.StringIO()
wb.save(out)
out.seek(0)

return send_file(out, mimetype='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
            attachment_filename='xxl.xlsx', as_attachment=True) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-23T18:41:25.380

```
output = HttpResponse(mimetype='application/application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')
file_name = "Test.xlsx"
output['Content-Disposition'] = 'attachment; filename='+ file_name

wb = Workbook()

ws = wb.worksheets[0]

ws.cell('A1').value = 3.14

wb.save(output)

return output 
```

我使用这个技巧通过 openpyxl 下载我的文件。希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T16:58:02.077

将 xlsx 输出写入磁盘，然后通过 Apache 提供它运行良好，但直接将其输出会导致 Excel 中的错误和其他问题。

我添加了几个额外的步骤并对您的代码进行了一个小改动：

```
buffer=output.getvalue() 
```

在 HTTP 标头中：

```
print "Content-Length: " + str(len(buffer)) 
```

并用于`write()`代替`print()`将缓冲区推送到标准输出流中：

```
stdout.write(buffer) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T15:31:22.580

您的脚本可以按您的预期为我工作，无需更改。

我只能假设您的 cgi 脚本设置有问题。

确保您有脚本所在的目录实际上由 Web 服务器提供服务。在 apache 上，您可以通过以下方式实现：

```
 ScriptAlias /cgi-bin/ /home/WWW/localhost/cgi-bin/ 
```

通过设置脚本权限确保脚本是可执行的。`python scriptname`对于不必要的命令行操作 ( )，对于您的网络浏览器来说就是这样。并确保网络服务器的所有者可以执行脚本，因为网络服务器可能不会像你一样运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-06T14:10:46.193

因为 Excel 使用二进制格式，所以您应该使用 BytesIO 来缓冲。

`from io import BytesIO`

但是，如果您使用`save_virtual_workbook()`which 为您执行此操作，您会遇到什么错误？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-04T08:29:41.020

我有同样的问题。解决方案是将stdout切换到bin模式：

```
import msvcrt

print 'Content-Type:application/octet-stream; name="{}"'.format(os.path.basename(xls_file))
print 'Content-Disposition:attachment; filename="{}"'.format(os.path.basename(xls_file))
print "Content-Length: " + str(os.path.getsize(xls_file))
print 'Cache-Control: max-age=0\r\n'

msvcrt.setmode (1, os.O_BINARY) # stdout = 1
sys.stdout.flush()
with open(xls_file, 'rb') as fobj:
    copyfileobj(fobj, sys.stdout) 
```

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2012-09-05T23:07:47.993

如果您想构建一个看起来像电子表格的 HTML 表格，您可能需要使用 CSV。要么这样做，而不是 Excel，要么在构建 Excel 后将其转换为 CSV。

无论如何，一旦您拥有 CSV 格式的数据，那么只需使用 python 构建 HTML 页面并循环遍历 CSV 数据，同时根据需要插入您的`<table>`、`<tr>`和`<td>`标签。

# c# - 非顺序集合绑定

> ID：12287203
> 
> 赞同：8
> 
> 时间：2012-09-05T18:00:38.153
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

将 MVC 视图中动态创建的元素集合绑定到 MVC 4 中的集合的最佳方法是什么。我知道以前的版本要求元素看起来像这样：

```
<input name="Categories[0].CategoryID" type="hidden" value="123" />
<input name="Categories[0].CategoryName" type="hidden" value="Music" />
<input name="Categories[1].CategoryID" type="hidden" value="456" />
<input name="Categories[1].CategoryName" type="hidden" value="Movies" /> 
```

但是当你动态地添加和删除新元素时，事情很快就会乱序。

**MVC 4**是否添加了绑定到非顺序集合的方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-05T18:07:47.640

自 MVC2 以来支持非顺序集合索引，您只需要一个单独的隐藏字段来保存带有`name`架构的索引`CollectionName.Index`：：

例如：

```
<input type="hidden" name="Categories.Index" value="3" />
<input name="Categories[3].CategoryID" type="hidden" value="123" />
<input name="Categories[3].CategoryName" type="hidden" value="Music" />

<input type="hidden" name="Categories.Index" value="1" />
<input name="Categories[1].CategoryID" type="hidden" value="456" />
<input name="Categories[1].CategoryName" type="hidden" value="Movies" /> 
```

您可以在此处找到有关该主题的更多信息：[模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

# php - MySQL：服务器已消失

> ID：12287206
> 
> 赞同：2
> 
> 时间：2012-09-05T18:00:43.707
> 
> 标签：php, mysql, pdo, mysql-error-2006

因此，当我使用我无法解决的 PHP PDO 运行脚本时，我遇到了这个问题。我的脚本正在索引来自不同服务器上不同数据库的信息（主要是选择查询）。

当我开发脚本时，所有数据库都在同一台服务器上，一切运行良好。现在我将数据库移动到三个不同的服务器上，我得到了这个可怕的错误。

所以这就是每次我运行我的脚本时都会发生的事情：

该脚本运行良好，直到它运行这个简单查询的点（并且每次都崩溃）：

（注意，脚本在`PHP`其中，我正在使用`PHP PDO`它来访问我的数据库并使用它）

```
SELECT *
FROM a_table
WHERE a_column = a_value. 
```

然后它崩溃了，我收到了这个错误：

```
[a_date] - trunk - FATAL - Unmanaged Exception of type 'App_Exception'
File: /.../.../.../a_php_file.php
Line: a_line
Message: Error executing query.
Info:
Array
(
    [0] => HY000
    [1] => 2006
    [2] => MySQL server has gone away
)

Trace:
 #0 /.../.../.../a_php_file.php(124): App_something::a_metho('a_variable...') 
```

我已经搜索了很长时间，仍然没有找到解决方案。

我试过：

*   修改 /etc/my.cnf 中的 max_allowed_pa​​cked （在发生崩溃的 sql 上）将其从 16M 设置为 64M（即使查询返回的结果实际上并没有那么大）。

*   修改 max_connections 以允许更多，以防我忘记杀死一些已经存在的连接。

*   检查网络上的问题

*   许多其他的小事情，例如从主机到远程 sql 服务器的连接。

真正奇怪的是，如果我单独运行查询，它运行良好，如果所有数据库都在同一台服务器上，它也运行良好。

在这一点上我真的很迷茫，不知道问题可能来自哪里，这就是为什么我来寻求帮助或只是一个提示。

这是在异常时崩溃的方法：

```
public static function my_method($my_mysql_WHERE_variable)
{
    //======================================
    // cached?
    //======================================
    if(isset(self::$_table1[$my_mysql_WHERE_variable])) {
      return self::$_table1[$my_mysql_WHERE_variable];
    }

    $pdo = my_App::getConnection();

    $query = "SELECT *
              FROM
                a_table
              WHERE
                a_column = :my_mysql_WHERE_variable";
    $stmt = $pdo->prepare($query);

    if($stmt === false) { 
        **---------------IT CRASHES HERE-----------**
        throw new my_App_Exception("Error executing query.\nInfo:\n" . print_r($pdo->errorInfo(), true)); 
    }
    .
    .
    .
    return $a_value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:07:39.157

您可能遇到数据库连接问题的情况。您是否不小心在其他地方关闭了与该数据库的数据库连接？您没有为尝试运行的查询引用正确的连接吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:35:53.120

我发现这个错误的原因是因为有一个tcp连接超时。即使查询实际上很短，我仍然无法真正解释为什么它会超时，但我设法通过修改 /etc/sysctl.conf 并为 keepalives 设置更高的值来解决我的问题。当然，我知道真正的解决方案是阅读每个查询，并尝试优化它们:)

# php - PHP替换特殊字符

> ID：12287209
> 
> 赞同：1
> 
> 时间：2012-09-05T18:00:52.113
> 
> 标签：php, xml

我正在运行以下脚本，它从 XML Feed 中获取 player 的值。如果我以这种方式运行代码，它会将 é 替换为 e，

```
 $player = "Toré";
                        echo "Player Before: $player <br />";
                        $playerafter = strtr($player, $normalizeChars);
                        echo "Player After: $playerafter <br />"; 
```

但是，如果我使用 XML Feed 运行它，它不会改变

```
 $player = "$event->player";
                        echo "Player Before: $player <br />";
                        $playerafter = strtr($player, $normalizeChars);
                        echo "Player After: $playerafter <br />"; 
```

这是变量 $normalizeChars

```
 $normalizeChars = array( 
        'Á'=>'A', 'À'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Å'=>'A', 'Ä'=>'A', 'Æ'=>'AE', 'Ç'=>'C', 
        'É'=>'E', 'È'=>'E', 'Ê'=>'E', 'Ë'=>'E', 'Í'=>'I', 'Ì'=>'I', 'Î'=>'I', 'Ï'=>'I', 'Ð'=>'Eth', 
        'Ñ'=>'N', 'Ó'=>'O', 'Ò'=>'O', 'Ô'=>'O', 'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O', 
        'Ú'=>'U', 'Ù'=>'U', 'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 

        'á'=>'a', 'à'=>'a', 'â'=>'a', 'ã'=>'a', 'å'=>'a', 'ä'=>'a', 'æ'=>'ae', 'ç'=>'c', 
        'é'=>'e', 'è'=>'e', 'ê'=>'e', 'ë'=>'e', 'í'=>'i', 'ì'=>'i', 'î'=>'i', 'ï'=>'i', 'ð'=>'eth', 
        'ñ'=>'n', 'ó'=>'o', 'ò'=>'o', 'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 
        'ú'=>'u', 'ù'=>'u', 'û'=>'u', 'ü'=>'u', 'ý'=>'y', 

        'ß'=>'sz', 'þ'=>'thorn', 'ÿ'=>'y' 
    ); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-05T18:10:34.393

强制 xml 字符串。

```
$player = (string)$event->player; 
```

# php - 使用 isset 添加到数组

> ID：12287216
> 
> 赞同：1
> 
> 时间：2012-09-05T18:01:10.837
> 
> 标签：php

如果按下按钮，我希望将新项目添加到数组中

这是我的代码...

```
$engineers = array();

if(isset($_POST['add_user'])){
    $engineers[] = $_POST['engineer'];
    $array_count = count($engineers);
} 
```

它所做的只是替换数组中的唯一项目而不是添加到它，我哪里出错了？

谢谢

使用的表格是

```
$dropdown = '<select id="engineer" name="engineer" class="select_engineer" type="text" name="engineer" /><option>Select Diary</option>';
while($row = mysql_fetch_assoc($result)){
    $dropdown .= "\r\n<option value='{$row['user_name']}'>{$row['user_name']}</option>";
}
$dropdown .= "\r\n</select>"; 
```

">

（工程师列表来自 MySQL 数据库）。

没有其他任何地方可以添加到数组中，我只想要一个按钮，将工程师用户名添加到数组中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:04:54.080

如果每次按下按钮时您都在进行客户端/服务器通信，那么您将不得不使用[Session](http://php.net/manual/en/features.sessions.php)。

每当您有客户端/服务器请求时，都会在您的 Web 服务器中创建一个新线程，它不知道其他线程中发生了什么。如果客户端单击一个按钮并向服务器发送一个添加到变量中的信息，然后得到他的答案，那么 PHP 内存中的所有内容都已被删除。如果你想访问服务器，返回客户端，返回服务器等等，你将不得不以某种方式将信息存储在某个地方。使用 Session 来存储所有内容并在最后做一些事情（例如电子商务）可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:07:05.770

每次重新加载页面时，您的数组都会重置。您必须将数据存储在 cookie 或会话或数据库中，或者......简单的想法：

```
<?php
session_start();
if(!isset($_SESSION['engineers']))
$engineers = array();
else
$engineers = unserialize($_SESSION['engineers']);
if(isset($_POST['add_user'])){
    $engineers[] = $_POST['engineer'];
    $array_count = count($engineers);
}
$_SESSION['engineers'] = serialize($engineers); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:08:12.147

每次提交表单时，都会重新执行整个代码。这意味着 `$engineers`每次都设置为空数组。提交的数据被添加到这个空数组中，这意味着它将是唯一可用的数据。

用于`$_SESSION`持久性。

# objective-c - UITapGestureRecognizer 调用另一个类

> ID：12287217
> 
> 赞同：1
> 
> 时间：2012-09-05T18:01:15.977
> 
> 标签：objective-c, ios, class, uitapgesturerecognizer

我在我的应用程序中设置`UITapGestureRecognizer`调用共享类时遇到问题。

基本上我有一堆图像，如果点击它们会弹出另一个带有该图像和评论的视图。我不想使用`initWithTarget`using`self`我想从可以加载到每种类型的导航控制器中的共享类中调用该函数。

我可以`ImageClass *imageClass = [[ImageClass alloc]init]`很好地初始化和调用这些函数，`[imageClass DoThis]`但是当我将它添加到 UITapGestureRecognizer 时，应用程序崩溃了。

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:imageClass action:@selector(DoThis)]; 
```

此外，如果我包含该`DoThis`函数并且`initWithTarget:self`一切都按预期工作，但是`DoThis`如果可能的话，我不想将函数写入每个视图控制器，我希望它直接从`UITapGestureRecognizer`.

提前感谢您提供的任何见解，您可以让我了解我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:55:30.360

好吧，基本上我每次出现新图像时都会释放 imageClass 对象。我将该逻辑移至控制器并开始正常工作。

感谢您帮助 MSK！

# php - 如何将多个查询组合成一个数组？

> ID：12287220
> 
> 赞同：0
> 
> 时间：2012-09-05T18:01:19.853
> 
> 标签：php, sql-server, sql-server-2008

我设置了两张桌子。一份用于学生信息，一份用于学生/班级列表。我正在使用 MSSQL 2008 R2 的 sqlsrv 插件在 PHP 中进行编码。

```
Student ID
Class Code

Student ID
First Name
Last Name 
```

我需要从一个班级中选择所有学生，但按姓氏排序。

```
SELECT student_id FROM table1 WHERE class_code LIKE '402843'
$students = SELECT last_name, first_name FROM table2 WHERE student_id LIKE 'all results of first query' 
```

现在我可以选择所有学生并显示所有信息；但是，我不能按姓氏对它们进行排序。我确信这是可能的，但是看到第一个查询将返回一个数组，我需要第二个查询也返回一个数组。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:12:04.407

查看 SQL 中的连接，并在查询中完成所有操作，而不是在 PHP 中...

使用您的示例并出于代码目的，将表命名如下

```
ClassCodeTable  
    Student ID
    Class Code

StudentInfoTable
    Student ID
    First Name
    Last Name 
```

那么你的查询看起来像

```
SELECT SI.last_name, SI.first_name FROM StudentInfoTable SI JOIN ClassCodeTable CC on CC.student_id=SI.student_id WHERE CC.class_code LIKE '402843' ORDER BY SI.last_name ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:05:09.717

使用`IN`子查询：

```
SELECT last_name, first_name FROM table2 WHERE student_id IN (SELECT student_id FROM table1 WHERE class_code='402843') ORDER BY last_name ASC 
```

# c# - MonoTouch.Dialog：禁用整个表格的选择样式

> ID：12287228
> 
> 赞同：1
> 
> 时间：2012-09-05T18:01:43.623
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog

目前，为了告诉单元格在被选中时不要闪烁蓝色，我将单元格的 SelectionStyle 设置为无：

```
 cell.SelectionStyle = UITableViewCellSelectionStyle.None; 
```

有没有办法告诉整个 DialogView (TableView) 将此应用于表格中的所有单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:38:02.787

不，该`SelectionStyle`属性不是其中的一部分，`UIAppearance`并且它也被`Element`MonoTouch.Dialog 中的大多数设置（因此它将被覆盖）。

请注意，几个元素，例如`EntryElement`, `UIViewElement`, `BooleanElement`, `FloatElement`... 已经将 设置`SelectionStyle`为`None`。

最简单的方法是创建新的（或现有的子类）`Element`类型并设置此属性（以及其他属性）以匹配您的应用程序样式。

# java - 何时在 jaxb 中创建 objectfactory 实例

> ID：12287229
> 
> 赞同：0
> 
> 时间：2012-09-05T18:01:44.533
> 
> 标签：java, jaxb, unmarshalling

我是 Jaxb 的新手。我对**Object factory**有一个疑问。疑问是何时在 objectfactory 类**createXXXBean**方法中创建 bean 实例，调用 UnMarshall Process 时。检查下面的 objectfactory.createFruitbean()

```
 @XmlElementDecl(namespace = "http://as.com/items/types", name = "fruitbean")
    public JAXBElement<Fruittype> createFruitbean(Fruittype value) {

        return new JAXBElement<Fruittype>(_Fruitbean_QNAME, Fruittype.class, null, value);
    } 
```

请帮我。

**更新 ：-**

我对上面的代码没有任何异常。我对 ObjectFactory.createFruitBean() 有疑问。在下面的代码片段中，它将在何处/何时调用该方法，即 ObjectFactory.createFruitbean()

```
JAXBContext jContext=JAXBContext.newInstance(ObjectFactory.class);
UnMarshaller unmarshall=jContext.CreateMarshaller();
JAXBElement jElement=unmarshall.UnMarshall(XML_PATH); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:33:21.563

```
@XmlRegistry
public class ObjectFactory {

   private static final QName FRUIT_QNAME = new QName("...", "...");

   public ObjectFactory() {
   }

   public Fruittype createFruittype() {
      return new Fruittype();
   }

   @XmlElementDecl(namespace = "http://as.com/items/types", name = "fruitbean")
   public JAXBElement<Fruittype> createFruitbean(Fruittype value) {
      return new JAXBElement<Fruittype>(_Fruitbean_QNAME, Fruittype.class, null, value);
   }
} 
```

# excel - 如何使参数可选？

> ID：12287234
> 
> 赞同：-1
> 
> 时间：2012-09-05T18:02:10.503
> 
> 标签：excel, vba, openxml, ribbon

在代码模块中（命名功能区）

```
Sub Form1Show(control As IRibbonControl)  ' this is custom ribbon
    Form1.Show  ' works
End Sub 
```

在 ThisWorkbook 模块中：

```
Private Sub Workbook_Open()
    Call Form1.Show  '  error: argument not optional
End Sub 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:04:15.373

将参数声明为可选；否则，它是必需的。

```
Sub Form1Show(Optional control As IRibbonControl) 
```

# ios - 虹吸呼叫不起作用 - pjsip

> ID：12287235
> 
> 赞同：3
> 
> 时间：2012-09-05T18:02:11.663
> 
> 标签：ios, sip, voip, pjsip

所以我有一个已编译并正在运行的 Siphon 应用程序，但它不会拨打电话。我得到：

注册错误 - 默认错误消息。

完整的错误是这样的：

15:04:02.032 pjsua_call.c 使用 acc #0 向 sip:6476805821@voip5-2.acanac.com 拨打电话 15:04:02.032 pjsua_call.c .无法拨打电话，因为帐户无效：操作无效 (PJ_EINVALIDOP) [status=70013] 15:04:05.580 call.m 调用错误：无效操作 (PJ_EINVALIDOP) [status=70013]

但是当我在不同的 SIP 应用程序上使用相同的帐户时，它工作得非常好。

当 pjsip 调用 sip_dial_with_uri(_sip_acc_id, [url UTF8String], &call_id);

_sip_acc_id 是 0，因为我相信这是虹吸设置中的第 0 个帐户。url 是我要拨打的正确电话号码，但显示如下：sip:62304892@url.com 并且呼叫 ID 只是一个参考，所以我不知道它是否重要。

当我查看其他 voip 应用程序时，他们有一个注册过程。在哪里输入用户名、密码和 sip 服务器域或 ip。

对于 Siphon，这是在设置文件中完成的。但是，是否在 Siphon 的代码中完成了“注册或登录”，我不确定。这可能是问题吗？

这是尝试进行实际调用的代码：

```
/** FIXME plutôt à mettre dans l'objet qui gère les appels **/
-(void) dialup:(NSString *)phoneNumber number:(BOOL)isNumber
{
  pjsua_call_id call_id;
  pj_status_t status;
  NSString *number;

  UInt32 hasMicro, size;

  // Verify if microphone is available (perhaps we should verify in another place ?)
  size = sizeof(hasMicro);
  AudioSessionGetProperty(kAudioSessionProperty_AudioInputAvailable,
                          &size, &hasMicro);
  /*if (!hasMicro)
  {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"No Microphone Available", @"SiphonApp")
                                                    message:NSLocalizedString(@"Connect a microphone to phone", @"SiphonApp")
                                                   delegate:nil 
                                          cancelButtonTitle:NSLocalizedString(@"OK", @"SiphonApp")
                                          otherButtonTitles:nil];
    [alert show];
    [alert release];
    return;
  }*/

  if (isNumber)
    number = [self normalizePhoneNumber:phoneNumber];
  else
    number = phoneNumber;

  if ([[NSUserDefaults standardUserDefaults] boolForKey:@"removeIntlPrefix"])
  {
    number = [number stringByReplacingOccurrencesOfString:@"+"
                                               withString:@"" 
                                                     options:0 
                                                       range:NSMakeRange(0,1)];
  }
  else
  {
  NSString *prefix = [[NSUserDefaults standardUserDefaults] stringForKey:
                      @"intlPrefix"];
  if ([prefix length] > 0)
  {
    number = [number stringByReplacingOccurrencesOfString:@"+"
                                                   withString:prefix 
                                                      options:0 
                                                        range:NSMakeRange(0,1)];
  }
  }

  // Manage pause symbol
  NSArray * array = [number componentsSeparatedByString:@","];
  [callViewController setDtmfCmd:@""];
  if ([array count] > 1)
  {
    number = [array objectAtIndex:0];
    [callViewController setDtmfCmd:[array objectAtIndex:1]];
  }

  if (!isConnected && [self wakeUpNetwork] == NO)
  {
    _phoneNumber = [[NSString stringWithString: number] retain];
    if (isIpod)
    {
      UIAlertView *alertView = [[[UIAlertView alloc] initWithTitle:nil 
                                                           message:NSLocalizedString(@"You must enable Wi-Fi or SIP account to place a call.",@"SiphonApp") 
                                                          delegate:nil 
                                                 cancelButtonTitle:NSLocalizedString(@"OK",@"SiphonApp")
                                                 otherButtonTitles:nil] autorelease];
      [alertView show];
    }
    else
    {
      UIActionSheet *actionSheet = [[[UIActionSheet alloc] initWithTitle:NSLocalizedString(@"The SIP server is unreachable!",@"SiphonApp") 
                                                               delegate:self 
                                                      cancelButtonTitle:NSLocalizedString(@"Cancel",@"SiphonApp") 
                                                 destructiveButtonTitle:nil 
                                                      otherButtonTitles:NSLocalizedString(@"Cellular call",@"SiphonApp"),
                                     nil] autorelease];
      actionSheet.actionSheetStyle = UIActionSheetStyleDefault;
      [actionSheet showInView: self.window];
    }
    return;
  }

  if ([self sipConnect])
  {
    NSRange range = [number rangeOfString:@"@"];
      NSLog(@"%i", _sip_acc_id);
    if (range.location != NSNotFound)
    {
      status = sip_dial_with_uri(_sip_acc_id, [[NSString stringWithFormat:@"sip:%@", number] UTF8String], &call_id);
    }
    else
    status = sip_dial(_sip_acc_id, [number UTF8String], &call_id);
    if (status != PJ_SUCCESS)
    {
      // FIXME
      //[self displayStatus:status withTitle:nil];
      const pj_str_t *str = pjsip_get_status_text(status);
      NSString *msg = [[NSString alloc]
                       initWithBytes:str->ptr 
                       length:str->slen 
                       encoding:[NSString defaultCStringEncoding]];
      [self displayError:msg withTitle:@"registration error"];
    }
  }
} 
```

此外，如果有人有更新的 Siphon 应用程序代码的链接，并且可能效果更好，我也将不胜感激。

更多信息：

在 call.m 文件中，这基本上被称为：

```
status = pjsua_call_make_call(acc_id, &pj_uri, 0, NULL, NULL, call_id); 
```

和这里

acc_id = 0

pj_uri = char *-> "sip:6476805821@voip5-2.acanac.com" pj_ssize_t -> 33

call_id = 803203976

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T20:18:42.770

我想通了。事实证明，虹吸管应用程序没有注册该帐户。下面的代码很重要：

```
pj_status_t sip_connect(pj_pool_t *pool, pjsua_acc_id *acc_id)
{

// ID
  acc_cfg.id.ptr = (char*) pj_pool_alloc(/*app_config.*/pool, PJSIP_MAX_URL_SIZE);
  if (contactname && strlen(contactname))
    acc_cfg.id.slen = pj_ansi_snprintf(acc_cfg.id.ptr, PJSIP_MAX_URL_SIZE, 
                                       "\"%s\"<sip:%s@%s>", contactname, uname, server);
  else
    acc_cfg.id.slen = pj_ansi_snprintf(acc_cfg.id.ptr, PJSIP_MAX_URL_SIZE, 
                                       "sip:%s@%s", uname, server);
  if ((status = pjsua_verify_sip_url(acc_cfg.id.ptr)) != 0) 
  {
    PJ_LOG(1,(THIS_FILE, "Error: invalid SIP URL '%s' in local id argument", 
      acc_cfg.id));
    [app displayParameterError: @"Invalid value for username or server."];
    return status;
  }

  // Registrar
  acc_cfg.reg_uri.ptr = (char*) pj_pool_alloc(/*app_config.*/pool, 
    PJSIP_MAX_URL_SIZE);
  acc_cfg.reg_uri.slen = pj_ansi_snprintf(acc_cfg.reg_uri.ptr, 
    PJSIP_MAX_URL_SIZE, "sip:%s", server);
  if ((status = pjsua_verify_sip_url(acc_cfg.reg_uri.ptr)) != 0) 
  {
    PJ_LOG(1,(THIS_FILE,  "Error: invalid SIP URL '%s' in registrar argument",
      acc_cfg.reg_uri));
    [app displayParameterError: @"Invalid value for server parameter."];
    return status;
  }

  ...
  more code here
  ...
} 
```

这是您的帐户注册到 SIP 服务器的地方。确保从主应用程序本身调用 sip_connect 函数，如下所示：

```
/* */
- (BOOL)sipConnect
{
  pj_status_t status;

  if (![self sipStartup])
    return FALSE;

  //if ([self wakeUpNetwork] == NO)
  //  return NO;
    NSLog(@"%i", _sip_acc_id);
  //if (_sip_acc_id == PJSUA_INVALID_ID)
  //{
    self.networkActivityIndicatorVisible = YES;
    if ((status = sip_connect(_app_config.pool, &_sip_acc_id)) != PJ_SUCCESS)
    {
      self.networkActivityIndicatorVisible = NO;
      return FALSE;
    }
  //}

  return TRUE;
} 
```

在我的情况下 _sip_acc_id 不等于 PJSUA_INVALID_ID 因此 sip_connect 从未被调用。

感谢所有试图在脑海中解决它的人？:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T18:27:06.113

除非您发布**代码片段**和**错误输出**（至少），否则您不太可能获得任何有用的帮助。更多上下文，例如配置信息和网络的相关方面，将进一步提高您的机会。

（我会将此添加为对该问题的评论，但还没有所需的声誉。）

# sql-server - 如何将列值转换为列？

> ID：12287240
> 
> 赞同：10
> 
> 时间：2012-09-05T18:02:34.693
> 
> 标签：sql-server, pivot

我已经浏览了 Stackoverflow、在线图书和 google 上的很多 SQL Pivot 示例，但我仍然无法弄清楚如何执行（我称之为）简单的数据透视操作。

## [示例 1](https://stackoverflow.com/questions/4020690/how-to-make-column-to-row-without-an-aggregate-function-in-sql-server-2005-8)

样本数据：

```
Name     Class       Score
=======  ==========  ======
Nick     Chinese     80 
Nick     English     70 
Nick     Biology     85 
Nick     Maths       85
Kent     Chinese     80 
Kent     Maths       90 
Kent     English     70 
Kent     Biology     85 
```

## 所需的输出 1 - 按类透视，按名称聚合

```
Name     Chinese     English   Biology  Maths
=======  ==========  ========  =======  ======
Nick     80          70        85       85
Kent     80          70        85       90 
```

笔记：

> 在我的脑海中，我想语法是：
> 
> ```
> SELECT Score FROM Scores
> GROUP BY Name
> PIVOT BY Class 
> ```

## 期望的输出 2 - 按类别透视，总分

```
Name     Chinese     English   Biology  Maths
=======  ==========  ========  =======  ======
70                   Nick
70                   Kent
80       Nick        
80       Kent             
85                             Nick     Nick
85                             Kent
90                                      Kent 
```

笔记：

> 在我的脑海中，我想语法是：
> 
> ```
> SELECT Name FROM Scores
> GROUP BY Score
> PIVOT BY Class 
> ```

## 期望的输出 3 - 按分数透视，按名称聚合

```
Name     70          80        85       90
=======  ==========  ========  =======  =====
Nick     English     Chinese   Biology  
Nick     English     Chinese   Maths
Kent     English     Chinese   Biology  Maths 
```

笔记：

> 在我的脑海中，我想语法是：
> 
> ```
> SELECT Class FROM Scores
> GROUP BY Name
> PIVOT BY Score 
> ```

## 期望的输出 4 - 按分数透视，按类别汇总

```
Class    70          80        85       90
=======  ==========  ========  =======  =====
Chinese              Nick
Chinese              Kent
English  Nick
English  Kent
Biology                        Nick
Biology                        Kent
Maths                          Nick     Kent 
```

> 在我的脑海中，我想语法是：
> 
> ```
> SELECT Name FROM Scores
> GROUP BY Class 
> PIVOT BY Score 
> ```

## 所需输出 5 - 按名称透视，按类别聚合

```
Class    Nick  Kent
=======  ====  ====
Chinese  80    80
English  70    70
Biology  85    85
Maths    85    90 
```

> 在我的脑海中，我想语法是：
> 
> ```
> SELECT Score FROM Scores
> GROUP BY Class
> PIVOT BY Name 
> ```

## 期望的输出 6 - 按名称透视，按分数汇总

```
Score  Nick     Kent
=====  =======  =======
70     English  English
80     Chinese  Chinese
85     Biology  Biology
85     Maths    Biology
90              Maths 
```

> 在我的脑海中，我想语法是：
> 
> ```
> SELECT Class FROM Scores
> GROUP BY Score
> PIVOT BY Name 
> ```

**注意：**我不想要一个*可以*执行所有这些数据透视的查询。我正在使用示例数据和示例枢轴，因此请用作我可能想要执行的枢轴的示例。

## **另一个示例集**

另一个示例可能是解析用户登录域的日志：

```
LoginDate          Username  MachineName
=================  ========  ===========
20120901 8:49:22   iboyd     obsidian
20120901 9:10:19   nbach     president
20120901 13:07:18  nback     nichpc
20120902 8:58:38   iboyd     obsidian
20120202 9:14:44   nbach     president
20120902 18:34:43  iboyd     harpax
20120903 8:57:13   iboyd     obsidian
20120904 20:03:55  iboyd     harpax 
```

## 所需的输出 7 - 按 LoginDate 的日期部分透视，按用户名聚合：

```
Username  20120901   20120902  20120903  20120914
========  =========  ========  ========  ========
iboyd     obsidian   obsidian  obsidian  harpax
iboyd     obsidian   harpax    obsidian  harpax
nbach     president  president
nback     nichpc     president 
```

> 在我的脑海中，我想语法是：
> 
> ```
> SELECT MachineName FROM Logins
> GROUP BY Username
> PIVOT BY CONVERT(varchar(50), LoginDate, 112) --yyyymmdd format 
> ```
> 
> 也许：
> 
> ```
> SELECT MachineName FROM Logins
> GROUP BY Username
> PIVOT BY CAST(LoginDate AS DATE) 
> ```

我似乎无法理解`PIVOT`语法；为了告诉 SQL Server 哪些列值应该成为列，以及聚合发生在哪些列值上。

每个人似乎都想对列进行硬编码，或者调用一些 XML 查询。我只想做一个支点！

* * *

## 也可以看看

*   [透视 SQL 查询 - 在列中显示日期](https://stackoverflow.com/questions/4546433/pivot-sql-query-show-date-in-column)
*   [https://stackoverflow.com/questions/tagged/pivot+sql-server](https://stackoverflow.com/questions/tagged/pivot+sql-server)
*   [如何透视表？](https://stackoverflow.com/questions/4857752/how-to-pivot-a-table)
*   [SQL 小提琴示例](http://sqlfiddle.com/#!3/6f4a1/3)

* * *

## 真正的问题^(TM)

*我今天要解决的真正问题是“业务”*给我的屏幕截图模型：

![在此处输入图像描述](../Images/1b0ec46dbbafa33a99471e855e1f1d63.png)

如果 SQL Server 语法对我来说相当明显的话，这可能是一个相当明显的查询：

```
SELECT 
    JobName, ShiftName, 
    Firstname+' '+Lastname+' - '+BankCode
FROM Transactions
GROUP BY JobName, ShiftName
PIVOT BY TransactionDate 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:34:40.580

将枢轴运算符视为替换您的组。这是您的示例 #1 和 3 的示例：

```
SELECT name, [Chinese], [English], [Biology], [Maths]
FROM scores s
PIVOT (
    SUM(score) 
    FOR Class IN ([Chinese], [English], [Biology], [Maths])
) p

SELECT name, [70], [80], [85], [90]
FROM scores s
PIVOT (
    MAX(class) 
    FOR score IN ([70], [80], [85], [90])
) p 
```

# python - 通过等待用户按键来暂停循环的最简单方法是什么？

> ID：12287242
> 
> 赞同：2
> 
> 时间：2012-09-05T18:02:38.487
> 
> 标签：python

在 Python 中，暂停用户按键将重新启动循环的循环的最简单和最 Pythonic 的方法是什么？我正在考虑这样做只是作为调试帮助，这样我就可以从循环内将一些调试消息输出到标准输出，而无需一次转储大量文本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T18:05:00.903

如果您愿意将按键限制为 Enter 键，则可以使用`input`(`raw_input`在 Python 2 中)。否则，您将需要特定于平台的东西。

```
for i in range(10):
    print(i)
    input() # Loop continues after <Enter> is pressed 
```

或者，您可以使用[`pdb`](http://docs.python.org/library/pdb.html)Python 的内置调试器。

**另请参阅** [Python 从用户读取单个字符](https://stackoverflow.com/questions/510357/python-read-a-single-character-from-the-user)。

# ant - 如何在 Ant 中链接或复制？

> ID：12287246
> 
> 赞同：1
> 
> 时间：2012-09-05T18:03:06.180
> 
> 标签：ant, groovy

我想在 Ant 中做相当于：

```
mkdir -p build/test
ln */build/test build/test 
```

或者：

```
mkdir -p build/test
ln -s */build/test build/test 
```

或者：

```
mkdir -p build/test
cp */build/test build/test 
```

我试过了：

```
<groovy>
    new File('build/test').mkdirs()
    'ln */build/test/TEST-*.xml build/test'.execute()
</groovy> 
```

和：

```
<mkdir dir="build/test"/>
<copy todir="build/test">
    <fileset dir=".">
        <filename name="*/build/test/TEST-*.xml"/>
    </fileset>
</copy> 
```

似乎通配不是很简单，并且 Ant 任务保留了目录名称。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:05:15.807

根据要求示例：

```
<mkdir dir="build/test"/>

<copy todir="build/test">
    <fileset dir=".">
        <include name="*/build/test/TEST-*.xml"/>
    </fileset>
    <flattenmapper/>
</copy> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:17:28.470

```
<groovy>
    new File('build/test').mkdirs()
    new AntBuilder().fileScanner {
        fileset(dir:'.', includes:'*/build/test/TEST-*.xml')
    }.each {
        "ln ${it} build/test".execute()
    }
</groovy> 
```

# ipad - iPad UIModalPresentationFormSheet 与 UITabBarController 的 moreNavigationController 编辑模式问题

> ID：12287251
> 
> 赞同：6
> 
> 时间：2012-09-05T18:03:18.613
> 
> 标签：ipad, uitabbarcontroller

这似乎是一个错误，但我想知道是否有人能想到解决方法。

在 iPad 上，您将视图控制器呈现为 UIModalPresentationFormSheet。这个视图控制器扩展了 UITabBarController 并且有足够的控制器来自动显示“更多”标签栏按钮。一旦您点击更多按钮，它将正确显示列表，但是一旦您点击“编辑”，它就会显示比实际表单更大的编辑视图（在表单内裁剪），导致内容超出视图，包括带有“完成”按钮的工具栏。关闭的唯一方法是强制退出应用程序。

为了验证它不是特定于我的应用程序的东西，我启动了一个单视图项目，并展示了一个简单的模式视图。此模态视图控制器扩展了 UITabBarController 并具有以下 init 方法：

```
- (id)init {
    self = [super init];
    if (self) {
        self.modalPresentationStyle = UIModalPresentationFormSheet;
        NSMutableArray *controllers = [NSMutableArray array];
        for (int i = 0; i< 15; i++) {
            UIViewController *vc = [[UIViewController alloc] init];
            UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:vc];
            vc.title = [NSString stringWithFormat:@"view %i", i];
            [controllers addObject:nav];
        }
        self.viewControllers = controllers;
    }
    return self;
} 
```

我还尝试将 modalPresentationStyle 添加到 moreNavigationController 而没有任何变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T01:07:16.687

美好的一天，头晕。

你做了一个很好的挑战。这是一个解决方案，也许它有点硬核，但它确实有效。

我已经按照你写的那样做了——继承了 UITabBarController 并将其呈现为模态视图控制器。并遇到同样的问题。当点击“更多”屏幕中的“编辑”按钮时，UITabBarCustomizeView 出现并且它的框架不足。

所以我做了以下事情。我已将 MyModalTabBarVC 设为自身的委托并实现了`tabBarController:willBeginCustomizingViewControllers:`方法：

```
- (void)tabBarController:(UITabBarController *)tabBarController     
willBeginCustomizingViewControllers:(NSArray *)viewControllers
{
    UIView *modalView = self.view;
    CGRect bounds = modalView.bounds;

    UIView *customizationView   = [[modalView subviews] objectAtIndex:1];
    UIView *customizationNavBar = [[customizationView subviews] objectAtIndex:0];

    CGRect navBarFrame = [customizationNavBar frame];
    navBarFrame.size.width = bounds.size.width;
    customizationNavBar.frame = navBarFrame;
    customizationView.frame   = bounds;
} 
```

所以当这个方法被调用的时候`UITabBarCustomizeView`就已经创建好了。并且可以手动更改错误的框架。如果您`po [self.view subviews]`在开始时登录，您将获得：

```
(id) $1 = 0x06c6a940 <__NSArrayM 0x6c6a940>(
<UITransitionView: 0xd744ab0; frame = (0 0; 540 571); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0xd744b50>>,
<UITabBarCustomizeView: 0x6c5e570; frame = (0 -384; 768 1004); animations = { position=<CABasicAnimation: 0x6c569a0>; }; layer = <CALayer: 0x6c618d0>>,
<UITabBar: 0xd744110; frame = (0 571; 540 49); autoresize = W+TM; layer = <CALayer: 0xd742b80>>,
) 
```

PS。此解决方案不修复动画。从日志中可以看出，损坏的动画已经创建并收费。我希望取消它并适当地添加一个新的不会成为问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T00:47:23.097

模态视图的 viewController 一定会导致故障。

## 您可以尝试：

1.  编辑时隐藏标签栏，按下完成按钮时取消隐藏。
2.  为视图控制器创建一个自定义工具栏，这可以通过 UIView 完成，因此它始终设置在视图的顶部。
3.  调整您的各个选项卡的大小。最好的方法是使用 UIViewController 和 IBActions 创建您自己的自定义标签栏，并使用 IBOutlets 连接到 UIButtons。

* * *

*为什么 modalPresentationStyle 中有这么多标签？我个人会改用 push segue。*

尝试推送到它们自己的导航控制器下的一组新视图控制器。标签栏将有更多空间。要返回，请在工具栏中放置一个后退按钮，该按钮会弹出推送，或推送回原来的位置。

# ruby-on-rails - Rails 应用程序因超时而崩溃

> ID：12287253
> 
> 赞同：0
> 
> 时间：2012-09-05T18:03:23.120
> 
> 标签：ruby-on-rails, crash, timeout

我的 rails 应用程序中有一个方法可以进行大约 1000 次 REST 调用。不幸的是，由于超时，它很快就崩溃了：

```
Error H12 (Request timeout) -> POST MyApp.herokuapp.com/expensiveCall dyno=web.1 queue= wait= service=30000ms status=503 
```

如何避免此超时？我应该小心这些方面的任何事情吗？（打这个电话是相当昂贵的 - 所以寻找我应该避免的事情）。

谢谢！

**编辑** 另外，启动一个线程来进行这 1000 个 REST 调用而不是让请求等待完成是否是个好主意。如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:13:28.173

您将需要将其放入某种后台作业中。您可以使用[延迟作业](https://github.com/collectiveidea/delayed_job)或[resque 之](https://github.com/defunkt/resque)类的东西。延迟作业是一种工具，您可以在 Rails 中使用它来创建可以在其他时间执行或放入队列的作业。延迟作业在某些方面与活动记录具有相当相似的接口。查看链接上的自述文件以进行设置。我听说过有关 resque 的好消息，它也允许您这样做，但我没有使用它的经验。

# java - 使用扫描仪在 .txt 文件中显示特定单词

> ID：12287254
> 
> 赞同：1
> 
> 时间：2012-09-05T18:03:25.337
> 
> 标签：java

我被困住了，需要你的帮助（是的，这是作业），我想做的是让我的代码读取文本文件中的内容并按特定单词输出单词。例如，我希望它输出所有以字母“g”开头的单词。

如果我没有解释清楚，这是一个伪代码：

```
BEGIN

Get the initial letter from the user

While there are more entries in the file

Get the next personal name

Get the next surname

Get the next year info

If the surname starts with the initial letter

Output the person name, surname and year info

End while

END 
```

到目前为止，我已经设法完成了这项工作，现在我被困在正确输出名称的地方。任何帮助或教程将不胜感激。

```
import java.util.Scanner;
import java.io.File;
import java.io.FileNotFoundException;

public class PrimeMinisters
{
    public static void main(String[] args) throws FileNotFoundException
    {
        // ask the user for the first letter
        Scanner keyboard = new Scanner(System.in);
        System.out.print("What is the first letter? ");
        String input = keyboard.next().toLowerCase();
        char firstLetter = input.charAt(0);

        // open the data file
        File pmFile = new File ("OZPMS.txt");
        // create a scanner from the file
        Scanner pmInput = new Scanner (pmFile);

        // read one line of data at a time, processing each line
        while(pmInput.hasNext())
        {
            String names = pmInput.next();
            System.out.println(names);
        }

        // be polite and close the file
        pmInput.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:11:42.540

我建议使用`nextLine()`over `next()`。然后，您将使用返回布尔值的`String`'`startsWith(String stringsequence)`方法来获取以您选择的字母开头的所有值：

```
 while(pmInput.hasNextLine())
        {

            String names = pmInput.nextLine();
            System.out.println(names);
            if(names.startsWith("g")) {
              //the name begins with letter g do whatever
            }
        } 
```

您可以在此处查看更多 String 方法：http: [//docs.oracle.com/javase/7/docs/api/java/lang/String.html](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:08:10.230

由于您的要求要求查看姓氏的第一个字母，因此在阅读时对每一行进行标记会更容易（同时检查用户输入是否是姓氏的第一个字母）。假设该行按照您上面所说的顺序，姓氏将是令牌 #2（数组的索引 1）。

```
public class PrimeMinisters
    {
        public static void main(String[] args) throws FileNotFoundException
        {
            // ask the user for the first letter
            Scanner keyboard = new Scanner(System.in);
            System.out.print("What is the first letter? ");
            String input = keyboard.next().toLowerCase();
            char firstLetter = input.charAt(0);

            // open the data file
            File pmFile = new File ("OZPMS.txt");
            // create a scanner from the file
            Scanner pmInput = new Scanner (pmFile);

            // read one line of data at a time, processing each line
            while(pmInput.hasNextLine())
            {
                String names = pmInput.nextLine();

                // Break line into tokens. This is assuming that there are only
                // 3 strings per line in the following order (personal name, surname, yearinfo)
                //
                String[] info = names.split("\\s"); 

                 // Check 2nd string in line (since you are looking for the first   character in 
                 // the surname and not the personal name.
                 //
                if(info[1].startsWith(input))  
                {
                      System.out.println(info[0] + "\t" + info[1] + "\t" + info[2]);
                }
            }

            // be polite and close the file
            pmInput.close();
        }
    } 
```

# java - 在扫雷游戏中找到空单元时递归stackOverflowError

> ID：12287258
> 
> 赞同：1
> 
> 时间：2012-09-05T18:03:35.443
> 
> 标签：java, recursion, stack-overflow, minesweeper

编辑：解决了！我只是忘记在“else if”下包含一个“else”语句，它会返回一个空白

我正在使用 Java，并且正在制作扫雷游戏。

单击空单元格时，我试图打开所有相邻的空单元格。我已经在这个网站上查看了类似的问题，但看不出我哪里出错了。我得到一个stackOverflow。

任何帮助将不胜感激。

下面，'buttons' 数组是一个 2D 按钮数组，而 'cells' 数组是一个 2D 单元格对象数组（用于确定该单元格的状态）。显然每个单元格对应一个按钮。

```
public void findEmptyCells(int i, int j) // this method is called when a cell is clicked, therefore all adjacent empty cells will be opened
{
    if (i >= 0 && j >= 0 && i < 9 && j < 9) //ie the block actually exists on the grid
    {
        if (cells[i][j].getAdjMines() == 0 && cells[i][j].getIsMine() == false && cells[i][j].getIsFlagged() == false && cells[i][j].getIsOpen() == false) //if cell is empty & not a mine & not flagged
        {
            buttons[i][j].setIcon(new ImageIcon("buttonImages/but" + cells[i][j].getAdjMines() + ".png")); //here the getAdjMines value will be 0, so the empty cell icon will be placed
            cells[i][j].setIsOpen(true); //for later, if we need to identify which cells are still unclicked

            //now to check all adjacent cells
            findEmptyCells(i - 1, j); //left 
            findEmptyCells(i + 1, j); //right 
            findEmptyCells(i, j + 1); //up
            findEmptyCells(i, j - 1); //down
            findEmptyCells(i - 1, j + 1); //up-left
            findEmptyCells(i + 1, j + 1); //up-right
            findEmptyCells(i - 1, j - 1); //down-left
            findEmptyCells(i + 1, j - 1); //down-right

        }
        else if (cells[i][j].getAdjMines() > 0)
        {
            buttons[i][j].setIcon(new ImageIcon("buttonImages/but" + cells[i][j].getAdjMines() + ".png"));
            cells[i][j].setIsOpen(true); //for later, if we need to identify which cells are still unclicked
            return;
        }

    }
    else
    {
      return;  
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:09:14.980

确保您的`getIsOpen`和`setIsOpen`方法按预期工作。这些是停止递归的关键，所以我的猜测是那里有问题。

# jquery - 带有表单字段和受限日期范围的 Jquery 内联 Datepicker

> ID：12287263
> 
> 赞同：0
> 
> 时间：2012-09-05T18:03:51.043
> 
> 标签：jquery, date, datepicker, range, inline

为了让内联日期选择器在表单字段中显示选定的日期，我采用了发布在此站点上的代码。 [http://elementdesignllc.com/demos/datepicker_inline.html](http://elementdesignllc.com/demos/datepicker_inline.html)

```
 <script type="text/javascript">
    $().ready(function() {

    $("#datepicker").datepicker({
onSelect: function(dateText, inst) { 
    $("#datepicker_value").val(dateText);
}
    });

    }); 
```

尝试实施受限日期范围时，代码不断失败。

```
<script>
$(function() {
    $( "#datepicker" ).datepicker({ minDate: -20, maxDate: "+1M +10D" });
});
</script> 
```

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:46:43.777

感谢您的建议，即使有些没有帮助。今天早上我设法解决了这是其他可能陷入相同情况的代码

```
<input id="Range" type="hidden" value="2012/11/10"/ name="newdate">

<script type="text/javascript">
    $(document).ready(function(){
        $("#fromCalendar").datepicker({ altField: "#Range", altFormat: 'yy/mm/dd', minDate: +65, maxDate: "+94D", defaultDate: +64  });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:24:31.770

看看 jsfiddle 上的这个例子：

[http://jsfiddle.net/4kpWp/3/](http://jsfiddle.net/4kpWp/3/)

在您的代码中，您设置了 2 个引用相同 ID 的“日期选择器”，我将只使用 1 个 ID 为 #datepicker 的日期选择器。

# ios - ios uiimageview点击手势在动画期间不起作用

> ID：12287267
> 
> 赞同：1
> 
> 时间：2012-09-05T18:04:08.393
> 
> 标签：ios, animation, uiimageview, uitapgesturerecognizer

我有一个`UIImageView`动画并接收一个`UITapGestureRecognizer`. 问题在于动画时，点击手势区域不会随视图移动。我可以点击视图的原始位置并且点击手势被识别。任何人都知道如何在视图移动而不是在其原始位置时识别水龙头？

编辑 1：这就是我设置点击手势识别器的方式：

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(viewTapped:)];
    tapRecognizer.cancelsTouchesInView = YES;
    tapRecognizer.numberOfTapsRequired = 1;
    tapRecognizer.delegate = (id)self;
    [imageView addGestureRecognizer:tapRecognizer];
    imageView.userInteractionEnabled = YES; 
```

由于我的动画持续了几秒钟，有没有办法让手势识别器跟随我的路径？我错过了一个设置吗？

编辑 2：这是我设置动画的代码：

```
 double width = backgroundImageView.frame.size.width;
    double height = backgroundImageView.frame.size.height;

    CGMutablePathRef path = CGPathCreateMutable();
    double startX = -imageView.frame.size.width;
    double startY = height/4;
    double endX = 3*width;
    double endY = 0;
    double duration = 40;
    CGPathMoveToPoint(path, NULL, startX, startY);
    CGPathAddLineToPoint(path, NULL, endX, endY);
    CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
    animation.duration = duration;
    animation.path = path;
    animation.repeatCount = HUGE_VALF;
    [imageView.layer addAnimation:animation forKey:@"theAnimation"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:19:20.230

对于任何有兴趣的人，我解决了我的问题。只需使用`NSTimer`，检查和更新演示文稿中的`UIImageView`'s ：`frame``layer`

```
CGRect viewLocation = [[[imageView layer] presentationLayer] frame];    
imageView.frame = CGRectMake(viewLocation.origin.x, viewLocation.origin.y, viewLocation.size.width, viewLocation.size.height); 
```

之后，无论我的图像视图在哪里，都可以触摸工作:-)

# vim - 数字键盘上的映射键

> ID：12287276
> 
> 赞同：2
> 
> 时间：2012-09-05T18:04:35.600
> 
> 标签：vim

多年来，我一直在使用笔记本电脑——键盘上没有数字小键盘。最近获得了一个桌面键盘……就在今天，我发现 Vim 映射到数字 (1 ... 9, 0) 不适用于它们的数字键盘等效项。我的意思是说？

```
nmap 1 Dj 
```

在数字键盘 1 上不起作用？

这个问题有什么解决方案*（不是真正的“问题”，而是烦人）*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:12:19.750

这在 Windows 上适用于我：`nmap <C-k5> :tabnew<CR>`

键盘标识符为 k1、k2 等。还有 kPlus 等。据我所知，当 NumLock 关闭时映射失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:12:21.213

我有一些键盘和终端无法通过`k*`标识符进行映射。要在这种情况下映射它们，请使用`Ctl``v`以输入正确的转义码

因此，例如要`1`在键盘上执行映射`Dj`，请输入：

```
:map 
```

然后键入`Ctl``v`，这将打开一个带有 的转义序列`^[`。然后按`1`键盘上的。生成的代码将类似于`^[Ow`. 正常完成映射：

```
:map ^[Ow Dj 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-29T18:55:20.333

我也经常使用键盘映射。为了帮助您开始计算映射，您可以查看 vim“知道”哪些键以及当前映射的内容：

```
:h keycodes 
```

希望这会列出您的键盘键等。如果是这种情况，那么您可以轻松地（不必担心找出和使用它们的转义序列）重新映射它们使用`map <k0> :wincmd w<CR>`例如。

*多年来，我一直使用 Ctrl-v 后跟一个键来获取 XXXX 映射，直到我发现 keycodes 命令和真正有用的定义。*

希望这可能会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-20T12:37:44.310

`~/.vimrc`您可以通过以下方式在 vi（例如 in）中映射NUM 键：

```
inoremap <Esc>Oq 1
inoremap <Esc>Or 2
inoremap <Esc>Os 3
inoremap <Esc>Ot 4
inoremap <Esc>Ou 5
inoremap <Esc>Ov 6
inoremap <Esc>Ow 7
inoremap <Esc>Ox 8
inoremap <Esc>Oy 9
inoremap <Esc>Op 0
inoremap <Esc>On .
inoremap <Esc>OQ /
inoremap <Esc>OR *
inoremap <Esc>Ol +
inoremap <Esc>OS -
inoremap <Esc>OM <Enter> 
```

此设置是按原样使用 NUM 键的示例。当然，您可以更改映射。

# objective-c - 如何使用 setMessageBody 将 NSString 添加到电子邮件

> ID：12287277
> 
> 赞同：0
> 
> 时间：2012-09-05T18:04:38.580
> 
> 标签：objective-c, cocoa, ios5, nsstring, mfmailcomposeviewcontroller

我正在尝试实现自动填充的电子邮件。我在单独的测试环境中正确弹出了 emailviewcontroller，但我无法弄清楚如何将字符串添加到消息正文中。基本上我在 gui 的根控制器上有三个按钮，用于设置三个字符串的值。我想要的只是在消息正文中重现这三个字符串（如果可能，用逗号分隔）。到目前为止，这是我的代码：

```
 -(IBAction)displayComposerSheet
    {

    NSArray *recipient = [NSArray arrayWithObjects:@"testemail@office.co.uk", nil];

    if([MFMailComposeViewController canSendMail])
    {
            MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc]             init];
        mailViewController.mailComposeDelegate = self;
        [mailViewController setSubject:@"Place holder ... this is a test subject"];
        [mailViewController setMessageBody: isHTML:NO];
        [mailViewController setToRecipients:recipient];

        [self presentModalViewController:mailViewController animated:YES];
    }
    else
        NSLog(@"Device is unable to send email in its current state");

    }

    -(void)mailComposeController:(MFMailComposeViewController *)controller     didFinishWithREsult:(MFMailComposeResult)result error:(NSError *)error
{
    [self dismissModalViewControllerAnimated:YES];
}
- (IBAction)addString1:(id)sender {

    NSString *string1;
    string1 = @"teststring1";

}

- (IBAction)addString2:(id)sender {

    NSString *string2;
    string2 = @"teststring2";
}

- (IBAction)addString3:(id)sender {
    NSString *string3;
    string3 = @"teststring3";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:17:52.837

首先，您需要在 .h 文件中声明字符串，以便可以在整个 .m 文件中使用它们

```
@interface ViewController : UIViewController
{
    NSString *string1;
    NSString *string2;
    NSString *string3;
} 
```

然后在邮件作曲家中，您将使用格式化字符串按顺序显示您的字符串（由 %@ 转义）

```
 [mailViewController setMessageBody:[NSString stringWithFormat:@"%@, %@, %@",string1,string2,string3] isHTML:NO]; 
```

当然，在你的头文件中声明你的字符串之后，就不需要在本地声明它们，所以将你的 IBActions 更改为如下所示：

```
 - (IBAction)addString1:(id)sender 
    {
        string1 = @"teststring1";
    }

    - (IBAction)addString2:(id)sender 
    {
        string2 = @"teststring2";
    }

    - (IBAction)addString3:(id)sender 
    {
        string3 = @"teststring3";
    } 
```

此外，为了避免将不需要的 (null) 实例插入到您的消息正文中，我建议您在 viewDidLoad 中为这些字符串提供一个初始空白值。这样一开始将没有任何内容，但它们不会是零。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    string1 = @"";
    string2 = @"";
    string3 = @"";
} 
```

# delphi - 为 TObjectList 实现自定义二进制搜索 (德尔福 XE)

> ID：12287279
> 
> 赞同：4
> 
> 时间：2012-09-05T18:04:50.950
> 
> 标签：delphi, delphi-xe, binary-search, generic-collections

我需要在使用自定义比较器的 TObjectList 上实现二进制搜索，我相信使用 TCustomComparer。

目标：二分查找返回列表中符合特定属性参数的实例。

例如：

```
TMyClass=class
    public
     Index:integer
end;

TMyObjectList=TObjectList<TMyClass>;

begin
  ...
    aMyClass.Index:=1;
    aMyObjectList.binarysearch(aMyClass, aMyClassRef) 
  ...
end; 
```

或者简单地说：

```
 begin
   ...
     aMyObjectList.binarysearch(1, aMyClassRef) 
   ...
 end; 
```

我想循环并取回列表中也有 Index==1 的 TMyClass 实例。

在 C++ 中，重载 '==' 运算符可实现此目标。

新的 Delphi '帮助'相当稀少，分散在周围，很难找到，而且我对新的 Delphi 泛型的所有细微差别都不是很熟悉。

那么 - 我如何使用 Generics.TObjectList 在 Delphi XE 中做到这一点？

（使用德尔福 XE）。

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T18:23:39.670

帮助文件在这里确实有点有限。我通常只是阅读源代码`Generics.Defaults`和`Generics.Collections`. 无论如何，您需要提供一个`IComparer<TMyClass>`. 有很多方法可以做到这一点。例如，使用匿名函数：

```
var
  List: TObjectList<TMyClass>;
  Target: TMyClass;
  Index: Integer;
  Comparer: IComparer<TMyClass>;
  Comparison: TComparison<TMyClass>;
....    
Comparison :=
  function(const Left, Right: TMyClass): Integer
  begin
    //Result := ??;//your comparison rule goes here
  end;
Comparer := TComparer<TMyClass>.Construct(Comparison);
List.BinarySearch(Target, Index, Comparer); 
```

如果您不想使用匿名函数，则可以实现`Comparison`其他方式。例如某个对象的方法，或类函数，甚至只是一个普通的老式非 OOP 函数。它只需要具有与上述相同的签名。

与比较函数一样，返回 <0 if `Left<Right`、 >0 if`Left>Right`和 0 if `Left=Right`。

# c++ - URL 的 QRegExp 模式

> ID：12287282
> 
> 赞同：2
> 
> 时间：2012-09-05T18:04:59.360
> 
> 标签：c++, regex, qt, qregexp

我正在尝试使用以下模式从存储在变量中的某些文本中匹配 google url。

网址使用双引号

```
QRegExp regExp;
regExp.setPattern("http://www.google.com/(.*)"); 
```

我设法匹配了 url，但它意外地匹配了它后面包含的所有文本。我尝试过使用类似下面的变体，但它们似乎不起作用。

```
regExp.setPattern("http://www.google.com/(.*)\"is"); 
regExp.setPattern("http://www.google.com/^(.*)$\""); 
```

获得仅匹配 url 的正则表达式的任何帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:14:53.823

您是否有理由需要/想要使用 QRegExp？

您最有可能使用 QUrl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:15:47.377

即使我们不可能知道文本中的 url 周围是什么（引号？括号？空格？），我们可以通过尝试对不能成为 url 一部分的字符进行否定匹配来创建更好的正则表达式：

```
QRegExp regExp;
regExp.setPattern("http://www.google.com/([^()\"' ]*)"); 
```

然后你只需要在这个否定字符类中添加更多可能的字符。

# java - 服务器加载静态资源太慢

> ID：12287287
> 
> 赞同：0
> 
> 时间：2012-09-05T18:05:28.570
> 
> 标签：java, css, servlets, webserver, websphere

服务器加载静态资源太慢 - 我可以进行哪些服务器优化？

图像 + CSS 内容加载速度太慢（相对较小的文件）每个加载时间超过 1 秒。我可以在服务器端进行哪些优化以减少这些加载时间（除了提高服务器处理能力/网络速度）。

服务器是 WebSphere。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T18:24:18.857

有很多可能性（按重要性排序）：

*   为所有静态资源设置适当的 Expires- 和 Last Modified-Header。这可以显着减少对静态资源的总体请求。从而减少服务器负载。无请求是没有有效负载的最快请求。
*   从单独的无 cookie（子）域提供静态资源。
*   使用[CSS-Spites](http://de.wikipedia.org/wiki/CSS-Sprites)并将常用的图形（如徽标和图标）组合成一个大图像。
*   将所有 CSS 合并到一个或几个文件中。这也减少了整体请求数量并提高了前端性能。
*   [使用PngOut](http://advsys.net/ken/utils.htm)等工具无损优化您的图像尺寸。
*   预先 gzip 压缩您的 css（和 js）文件并直接从内存中提供它们。不要从硬盘读取它们并即时压缩。
*   如果您不想自己做所有这些事情，请使用[jawr 之](http://jawr.java.net/)类的库。其中许多事情可以为您处理，而不会对您的发展产生负面影响。
*   让 Apache 网络服务器为您提供这些静态内容。
*   使用类似的东西`mod_proxy`依赖于您的缓存标头为您提供内容。Apache 提供静态资源的速度更快，更重要的是它可以从您的 Websphere 服务器前面的另一个系统中完成。
*   使用 CDN 提供静态内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:08:57.063

确保保持活动已打开并正常运行。减少所需的整体网络开销。[请参考这个](http://wpcertification.blogspot.com/2009/09/http-channel-service-lets-you-configure.html)

此外，请确保您有足够的内存分配给运行服务器的 VM。使用 GC 统计信息来记录内存使用情况和 GC 是一个好主意...例如将这些添加到 java VM：

```
-verbose:gc -XX:+PrintGCTimeStamps -XX:+PrintGCDetails 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:09:23.290

是否可以将这些文件资源包装在 .jar 文件中，然后使用 Java Zip 和/或 Java Jar API 来读取它们？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T18:15:39.343

如果您使用 gzip 过滤器来压缩输出或静态资源，请确保排除图像，因为它们在服务器端 gzip 时呈现缓慢，然后再响应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T18:22:54.097

您可能想阅读这篇[使用 WebSphere 的 IBM HTTP Server 诊断功能](http://publib.boulder.ibm.com/httpserv/ihsdiag/WebSphere.html) 和这篇[针对不耐烦的 WebSphere 调优：如何通过 20% 的努力获得 80% 的性能改进](http://www.ibm.com/developerworks/websphere/library/techarticles/0602_lurie/0602_lurie.html)

# iphone - 苹果推送通知与 iPhone

> ID：12287289
> 
> 赞同：0
> 
> 时间：2012-09-05T18:05:48.900
> 
> 标签：iphone, notifications, push

想请教遇到和我类似问题的高手一些建议。

我正在开发一个几乎像社交网络应用程序一样的 iPhone 应用程序。这需要邀请朋友加入应用程序。该应用程序与 Facebook 集成以进行登录。我的问题是，

1) 我们可以识别正在使用我们的应用程序的 Facebook 朋友。我们需要向正在使用我们应用程序的朋友的 iPhone 发送通知（推送通知）。我们的后端部署在 AWS 中。这样我们就有了用于通知目的的 SNS 和 SQS。但它支持电子邮件和短信通知。我从网上得知有 Apple 推送通知服务。我们可以为此目的使用苹果推送通知吗？这里首选哪一个？SNS 或苹果推送通知。请指教。如果您有任何参考网站，请给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:25:05.503

要发送 APNS，您需要拥有设备令牌，因此您不能仅使用 Facebook 帐户信息发送此类通知。但是，如果您能够知道该人是 Facebook 的朋友并且他使用您的应用程序，您可以存储一些数据，例如每个用户的令牌和 Facebook 登录信息，以向他们发送 APNS。但！苹果可能会拒绝它，因为他们讨厌开发人员收集可以识别一个人的数据。

APNS 很适合这种情况，但有风险。（谁能证明我是对还是错？）

我猜电子邮件是老式的，但合法且易于实施。比如，推特发送推送和电子邮件。

此外，您可以使用 Facebook 功能（如果您要集成更多社交网络，那就不太好）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T17:59:11.870

我认为您可以将 AWS SNS 和 APNS 用于您想做的事情。您将需要要发送推送通知的应用程序/设备的 pushToken，因为它们充当特定应用程序/设备的标识符以用作端点。

您需要设置一个 SNS 主题。然后，您需要为设备（带有感兴趣的应用程序）订阅该主题。然后，您可以发布到主题（以编程方式或通过 AWS 管理控制台），该消息将传播到所有订阅主题的设备（称为端点）。

AWS 有一个指导您完成此过程的教程：我自己还没有尝试过。

[http://docs.aws.amazon.com/sns/latest/dg/mobile-push-apns.html](http://docs.aws.amazon.com/sns/latest/dg/mobile-push-apns.html)

# hotkeys - 想用 Mac 将 3 键热键到 1 键

> ID：12287290
> 
> 赞同：0
> 
> 时间：2012-09-05T18:05:50.460
> 
> 标签：hotkeys

对于 Windows，您可以使用 AutoHotKey，但我有一台 Macbook，有人对如何操作有任何建议吗？我想编写一个脚本来将击键 1、2、3 热键为 1，在 3 个键之间有 15 毫秒的延迟。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:04:07.807

Mac App Store 中有一个名为[Keyboard Maestro的应用程序。](http://www.keyboardmaestro.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:20:19.497

[IronAHK](http://www.autohotkey.com/community/viewtopic.php?t=54494) ...不确定是否有更新的版本

# android - 阻止意图启动服务

> ID：12287293
> 
> 赞同：0
> 
> 时间：2012-09-05T18:06:09.870
> 
> 标签：android, android-intent

我有一个连接到互联网并播放流的`Intent`启动：`MusicService`

```
final Intent i = new Intent(MusicService.ACTION_URL);
Uri uri = Uri.parse("http://31.3.242.244:8058");

i.setData(uri);
startService(i);

progressDialog = ProgressDialog.show(fmActivity.this, "", "connecting...");
progressDialog.setCancelable(true); 
```

建立连接后，我`Handler`关闭了对话框：

```
static Handler closeHandler = new Handler() {
    public void handleMessage(Message msg) {
        if (progressDialog !=null) {
            progressDialog.dismiss();
        }
    }
};    
fmActivity.closeHandler.handleMessage(null); //from the MusicService 
```

除非连接挂起或服务器连接缓慢，否则这一切都很好。我需要能够取消`Intent`尝试`MusicService`使用后退按钮启动的操作。检查互联网连接无济于事，因为始终存在连接......用户需要能够取消连接呼叫，因为如果与服务器的连接由于某种原因失败，它会阻止用户加载不同的流。我已经搜索了所有内容，但无法找到如何执行此操作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:23:32.993

`ProgressDialog`您可以在取消取消之前停止音乐服务`OnClickListener`。

例如：

```
 progressDialog.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener() { 
            public void onClick(DialogInterface dialog, int which) {
                stopService(i); // Stop the music service here
                dialog.dismiss();
            }
}); 
```

# php - 1 到 1..0 的关系，嵌入形式与学说和 symfony2

> ID：12287295
> 
> 赞同：1
> 
> 时间：2012-09-05T18:06:20.920
> 
> 标签：php, symfony, doctrine, doctrine-orm

一位用户可能只有 1 个项目或没有。（1-1..0 关系）

我正试图在 symfony2 中通过教义来实现这一点。

我已经完成了一对一的关系，这相当简单。但是我如何指定当我想创建一个用户时，该项目可以为空？（而不是插入新行，只保留 id_item 为空）

这就是我所拥有的：

user.orm.yml 文件

```
oneToOne:
  userItem:
    targetEntity: SOA\AXBundle\Entity\Items
    cascade: ["remove", "persist"]
    joinColumn:
      name: id_item        
      referencedColumnName: id        
      nullable: true 
```

当然，我创建了 ItemsTypeForm 类，并在我的 userstypeform 类中添加了类型：

```
 // UsersTypeForm Class
    ->add('userItem', new \SOA\AXBundle\Form\ItemsTypeForm()) 
```

Controller Action 是这样的，

```
public function addUserAction(Request $request) {

  $user = new User();

  $form = $this->createForm(new UseType(), $user);

  if ($request->getMethod() == 'POST') {

     $form->bindRequest($request);

     if ($form->isValid()) {

         $em = $this->getDoctrine()->getEntityManager();
         $em->persist($user);
         $em->flush();

         return $this->redirect($this->generateUrl('homepage'));
     }
  }

} 
```

当我添加一个新用户时，一切都很好。用户和项目一样被插入。但是当我尝试添加一个没有项目的用户（用户项目字段为空白）时，我收到以下错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'name' cannot be null 
```

它正在尝试插入具有空值的项目。

虽然我可以接受 1 对 1 的关系，但我想学习如何建立 1 对 1..0 的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:19:27.287

数据库模式没问题（您可以检查是否在用户表定义中直接查看您的数据库，我很确定您可以将 null 用于“item_id”字段）。

问题是当您填写表单并提交时，Symfony 会创建 Item 对象，其中每个字段都设置为 null（因为表单中与项目相关的每个字段都是空的）。您必须以某种方式告诉您，如果每个字段都为空，则框架不应保留 Item 对象。在我看来，实现这一目标的最佳方法是使用 DataTransformer。

你可以在这里读到它：

[http://symfony.com/doc/2.0/cookbook/form/data_transformers.html](http://symfony.com/doc/2.0/cookbook/form/data_transformers.html)

通常在transformer::reverseTransform 中检查每个字段是否为空，如果是，则返回null 而不是Item 对象。

# ruby-on-rails-3 - S3 存储桶类型

> ID：12287300
> 
> 赞同：0
> 
> 时间：2012-09-05T18:06:50.083
> 
> 标签：ruby-on-rails-3, amazon-s3

只是想知道是否有推荐的策略将不同类型的资产/文件存储在单独的 S3 存储桶中，或者只是将它们全部放在一个存储桶中？我拥有的不同类型的资产包括：静态站点图像、用户的个人资料图像、用户生成的内容（如文档、文件和视频）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:14:15.307

至于如何将文件分组到存储桶中。除非您希望针对内容的不同类型使用不同的域名或 CNAME，否则这实际上并不是那么关键，在这种情况下，您需要为每个要使用的域名使用单独的存储桶。

我倾向于按功能对它们进行分组。您可以完全控制您的应用程序中使用的静态文件可能会部署到与用户生成的内容不同的存储桶中。或者您可能希望将视频放在与图像不同的存储桶中，等等。

添加到我之前关于 S3 元数据的评论。这将成为优化从 S3/Cloudfront 提供内容的方式的关键部分。

基本上，S3 元数据由键值对组成。因此，如果文件是 .jpg，您可以将其`Content-Type`作为键值，`image/jpeg`例如。对于直接向 S3 URL 或通过 Cloudfront 发出的请求，这将自动发送与您的值相对应的适当 Content-Type 标头。Cache-Control 元标记也是如此。您还可以使用自己的自定义元标记。例如，我使用一个名为的自定义元标记`x-amz-meta-md5`来存储文件的 md5 哈希。它用于与存储在修订控制系统中的内容进行简单的桶比较，因此我们不必即时对桶中的每个文件进行校验和。我们使用它来将差异内容更新推送到存储桶（即仅推送已更改的内容）。

至于修订控制如何进行。我强烈建议使用版本化文件名。换句话说，假设您有 bigimage.jpg 并且想要进行更新，请将其命名为 bigimage1.jpg 并更改您的代码以反映这一点。为什么？因为最佳情况下，您希望在 Cache-Control 标头中设置较长的到期时间框架。不幸的是，如果您随后想要部署同名文件并且您正在使用 Cloudfront，则使边缘缓存位置无效会成为问题。而如果您有一个新文件名，Cloudfront 将开始填充边缘节点，您根本不必担心缓存无效。

类似地，对于用户制作的内容，您可能希望包含 md5 或其他一些（主要是）唯一标识符方案，以便每个视频/图像可以有自己唯一的文件名并在缓存中放置。

此处是关于在 Cloudfront 中设置流式传输的 AWs 文档的链接供您参考

[http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/CreatingStreamingDistributions.html](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/CreatingStreamingDistributions.html)

# opengl - 在框架上均匀显示深度

> ID：12287305
> 
> 赞同：0
> 
> 时间：2012-09-05T18:06:56.657
> 
> 标签：opengl, glsl, depth

我正在读取场景的深度缓冲区，但是当我旋转相机时，我注意到向屏幕边缘返回的深度更接近相机。我认为撞击的角度对深度缓冲区有影响，但是当我在帧缓冲区中绘制一个四边形时，我不希望这种情况发生（这实际上不是这种情况，但这总结了我的需要）。

我用以下方法线性化深度：

```
float linearize(float depth) {
    float zNear = 0.1;
    float zFar = 40.0;

    return (2.0 * zNear) / (zFar + zNear - depth * (zFar - zNear));
} 
```

我想出以下来纠正这个问题，但它还不太正确。45.0 是相机的垂直角度/2\. side 是距屏幕中心的空间。

```
const float angleVert = 45.0 / 180.0 * 3.17;
float sideAdjust(vec2 coord, float depth) {
    float angA = cos(angleVert);
    float side = (coord.y - 0.5);
    if (side < 0.0) side = -side;
    side *= 2.0;
    float depthAdj = angA * side;
    return depth / depthAdj;
} 
```

为了显示我的问题，用相机前平面的深度结果绘制：

```
 c
       / | \
      /  |  \
     /   |   \
closer further closer      

is what I have, what I need:

         c
    |    |   |
    |    |   |
    |    |   |
  even even even 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:59:59.150

如何做到这一点的一个想法是在眼睛空间中找到位置 P。考虑 P 一个从原点到该点的向量。将 P 投影到眼睛方向向量（在眼睛空间中始终为 (0,0,-1)）。投影矢量的长度是您所需要的。

# date - 在 Crystal Reports 中切换日期格式

> ID：12287306
> 
> 赞同：2
> 
> 时间：2012-09-05T18:06:57.157
> 
> 标签：date, parameters, crystal-reports, formula-editor

我一直试图找到一种方法来过滤掉报告中的记录，但没有成功。我在视图中有一个名为 time_period 的字段，它以“MM/YYYY”格式返回日期。我有两个名为 startMonth 和 endMonth 的参数，它们位于“MM/DD/YYYY”中。

不知何故，我需要能够确保 date_grouping 字段值介于两个参数之间。

这是我到目前为止所拥有的...

```
 {location_total_kpi_view.time_period} >= 
 Date(Month({?startMonth}) + Year({?startMonth})) and
 {location_total_kpi_view.time_period} <= 
 Date(Month({?endMonth}) + Year({?endMonth})) 
```

它排除所有记录。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:13:56.947

尝试将它们都转换为**yyyy/MM**格式，然后转换为日期，以确保比较相等，如下所示：

```
Date(ToText({location_total_kpi_view.time_period}, "yyyy/MM")) >= 
Date(ToText({?startMonth}, "yyyy/MM")) and
Date(ToText({location_total_kpi_view.time_period}, "yyyy/MM")) <=  
Date(ToText({?endMonth}, "yyyy/MM")) and 
```

# qt - 使用 QNetworkRequest 和 QNetworkAccessManager 检索页面时来自浏览器和代码的结果不匹配

> ID：12287310
> 
> 赞同：2
> 
> 时间：2012-09-05T18:07:26.153
> 
> 标签：qt, web-crawler, qnetworkaccessmanager

我正在写一个简单的网络蜘蛛。想法是使用 QNetworkAccessManager、QNetworkReply 和 QNetworkRequest 以编程方式获取页面，一切正常。

我遇到的问题是（对于某些页面）我以编程方式或通过使用浏览器“手动”访问页面得到不同/不匹配的结果。我总是得到语法正确的 HTML 页面，但在我看来它们就像某种“蜘蛛保护”的答案。我指的页面不是 POST 页面，我正在做的测试是非常简单的 url 页面，有时带有参数（例如 www.sample.com/index.php?param=something），有时甚至是普通页面.html 网址。

伪代码如下：

```
QNetworkRequest req;
req.setUrl(QUrl(myurl));
req.setRawHeader(*I did try this one with no success*);
QNetworkAccessManager man;
QNetworkReply rep = man->get(req);
//finish and error slots connection code here 
```

. . .

```
void replyFinished()
{
    QNetworkReply* rep = qobject_cast<QNetworkReply *>(sender());
    if (rep->error() == QNetworkReply::NoError)
    {
        // read data from QNetworkReply here
        QByteArray bytes = rep->readAll();
        QString stringa(bytes); 
        qDebug() << stringa;
    }
} 
```

在finish() 插槽中，我正在打印来自networkreply 的数据，有时我会从浏览器中通过手动访问url 获得的简单“查看源代码”操作中得到不匹配的结果。

有时我会得到一个自定义的“未找到”页面，有时是一些带有登录表单或其他意外内容的更奇怪的页面。也许这是某种蜘蛛保护？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:47:37.273

有 3 种主要方法可以防止网络蜘蛛：

*   Web 浏览器识别 - 使用消息头，网站可以看到浏览器和网络爬虫之间的区别。您写道您使用了原始标题 - 您确定您提供与浏览器相同的标题和值吗？
*   会话数据/cookies - 与以前的密切相关。登录表单表明网站期望获得浏览器通常会发送的一些信息。
*   将实际 html 数据打印到 Web 文档中的 Javascript 代码。您是通过在 Web 浏览器中检查网站的源代码（视图-> 源代码）来检查是否获得相同的 html 代码，还是通过诸如 Firebug 之类的工具检查 html 布局？
*   Javascript 重定向 - 浏览器正在下载使用 javascript 将您重定向到包含实际内容的网站的网站。

就前两个选项而言 - 您应该使用一些 tcp/ip 嗅探器（如[Smart sniff](http://www.nirsoft.net/utils/smsniff.html)）来检查浏览器发送的数据是否与您的程序发送的数据相同。如果相等，则意味着您可能遇到了某种 javascript-barrier。如果是这样，您可能会尝试使用一些支持 javascript 的浏览引擎，例如[QWebPage](http://doc.qt.nokia.com/4.7-snapshot/qwebpage.html)。我不知道它是否在未连接到任何[QWebView](http://doc.qt.nokia.com/4.7-snapshot/qwebview.html)时执行它的 javascript - 也许隐藏视图可能是必要的。

如果我发现自己需要将浏览器模拟为某个远程服务，我通常只需编写 Firefox-plugin（使用 javascript）；通常可以消除上述任何问题；）

# r - 图 2.5 统计学习要素

> ID：12287318
> 
> 赞同：2
> 
> 时间：2012-09-05T18:07:57.920
> 
> 标签：r, machine-learning, bayesian, knn

我在计算图 2.5 的贝叶斯决策边界时遇到了一些困难。在 ElemStatLearn 包中，它已经计算了每个点的概率并使用轮廓来绘制边界。谁能告诉我如何计算概率？非常感谢你。

在传统的贝叶斯决策问题中，混合分布通常是正态分布，但是在这个例子中，它使用了两个步骤来生成样本，所以我在计算分布时有些困难。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:01:01.833

ESL（可在线访问）的第 2.3.3 节说明了数据是如何生成的。每个类是 10 个等协方差的高斯分布的混合，10 个均值中的每一个均来自另一个二元高斯分布，如文中所述。要计算图 2.5 中模拟的确切决策边界，您需要知道为生成数据而生成的特定 20 个均值（每个类 10 个），但文本中未提供这些值。

但是，您可以生成一对新的混合模型并计算您生成的两个类别（蓝色和橙色）中的每一个的概率。由于一个类中的 10 个分布中的每一个概率均等，因此类条件概率 p(x|BLUE) 只是 BLUE 模型中 10 个分布中每个分布的概率的平均值。

# django - 获取表单并将其保存到模型中

> ID：12287321
> 
> 赞同：0
> 
> 时间：2012-09-05T18:08:36.157
> 
> 标签：django, forms, models

我让这个表格工作正常，但我不知道如何通过模型将它保存到数据库中，我知道这是一个我无法弄清楚的语义问题请帮助。我正在使用 django 错误是

```
 D = Donation(user=request.user,name=form.cleaned_data['name'],description=cd['descri‌​ption']) D.save()

views.py
    def donate(request):
        if request.method == 'POST':
            form = DonationForm(request.POST)
            if form.is_valid():
                cd = form.cleaned_data
                D = Donation(user=request.user,name=form.cleaned_data['name'],description=cd['description'])
                D.save()
                return HttpResponseRedirect('/test/')
        else:
            form =DonationForm()
        return render_to_response('addaDonation.html',{'form': form},context_instance=RequestContext(request)) 
```

` 捐赠是我的模型，我需要将表格中的信息放入捐赠模型中，以便我可以 D.save

```
class DonationForm(forms.Form):
    name = forms.CharField(max_length=50)
    description = forms.CharField(max_length=3000)
    towards = forms.CharField()
    #image = forms.ImageField()

class Donation (models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=50)
    description = models.CharField(max_length=3000)
    towards = models.ForeignKey(NonProfit)
    image = models.ImageField(upload_to='photos/%Y/%m/%d') 
```

我得到的错误是（1054，“'字段列表'中的未知列'名称'”）

```
Request information

GET
No GET data
POST
Variable    Value
csrfmiddlewaretoken u'nXGN4gdZwk2qxNpP9YIXzvNQI7lKQe5r'
towards u'this'
name    u'this'
description u'that' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:26:04.850

将您的表单类更改为以下内容；

```
from django.forms import ModelForm
class DonationForm(ModelForm):

    class Meta:
        class = Donation
        exclude = ("user", )

    def save(self, user):
        donation = super(DonationForm, self).save(commit=False)
        donation.user = user
        donation.save()
        return donation 
```

然后您应该能够将 view.py 更改为以下内容；

```
def donate(request):
    if request.method == 'POST':
        form = DonationForm(request.POST, request.FILES)
        if form.is_valid():
            form.save(request.user)
            return HttpResponseRedirect('/test/')
    else:
        form = DonationForm()
    return render_to_response('addaDonation.html',{'form': form},context_instance=RequestContext(request)) 
```

参见官方文档[从模型创建表单](https://docs.djangoproject.com/en/1.3/topics/forms/modelforms/)

# java - 为什么java既编译又解释

> ID：12287322
> 
> 赞同：11
> 
> 时间：2012-09-05T18:08:42.490
> 
> 标签：java, compiler-construction, interpreter

> **可能的重复：**
> [Java 是编译型编程语言还是解释型编程语言？](https://stackoverflow.com/questions/1326071/is-java-a-compiled-or-an-interpreted-programming-language)

为什么Java既是编译语言又是解释语言？

我们首先使用 javac(compile) 编译 java 程序，然后使用 java(interpreting) 运行程序。这样做有什么好处？

另外，JIT 角色在哪里出现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T18:11:24.403

一次编译，随处运行是原因之一。

JVM 是特定于操作系统的。因此，JVM 解释编译的 .class（字节码）文件并转换为机器特定的指令集。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T18:13:24.863

Java 编译器通常将源代码编译成中间语言，通常表示为“字节码”。它本身不是本地硬件的机器代码，但从某种意义上说，它是 Java 虚拟机的“机器”代码。

这种分离的好处是（理论上）您可以在许多不同的平台上实现 VM，但它们都将能够运行*相同*的已编译 Java 字节码。

即时编译器是假设的 VM 的一部分，它实际上在需要时将字节码位动态地转换为真实的本机机器码。这是由于观察到纯粹在 VM 中运行 Java 程序比等效的本机代码慢得多。与本机编译的代码相比，JIT 编译使 Java VM 在性能方面具有竞争力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T18:12:49.733

1.  Java被“编译”成字节码
2.  字节码在程序执行时被“解释”
3.  JIT 编译器并将字节码“预编译”为本机机器码，优化执行时间

这是一篇文章，提供了有关 Java JIT 的更多详细信息：

*   [http://en.wikipedia.org/wiki/Just-in-time_compilation](http://en.wikipedia.org/wiki/Just-in-time_compilation)

# linux - 在现代 Linux 上永久删除 root 权限

> ID：12287327
> 
> 赞同：13
> 
> 时间：2012-09-05T18:08:58.860
> 
> 标签：linux, security, root

启动后，我希望我的 Linux 程序放弃 root 权限并切换到非特权帐户。我在网上找到了各种示例，但没有符合我的要求的规范，特别是：

1.  这是一个永久的下降
2.  (e)uid 和 (e)gid 都应该切换到非 root
3.  仅 Linux 支持（内核 > 2.6.32）
4.  不需要补充组

我发现的最佳方法是：

```
uid_t new_uid = ...;
gid_t new_gid = ...;

gid_t rgid, egid, sgid;
if (setresgid(new_gid, new_gid, new_gid) < 0)
{
    perror("setresgid");
    exit(EXIT_FAILURE);
}
if (getresgid(&rgid, &egid, &sgid) < 0)
{
    perror("getresgid");
    exit(EXIT_FAILURE);
}
if (rgid != new_gid || egid != new_gid || sgid != new_gid)
{
    printf("unexpected gid");
    exit(EXIT_FAILURE);
}

if (setgroups(0, 0) != 0)
{
    perror("setgroups");
    exit(EXIT_FAILURE);
}

uid_t ruid, euid, suid;
if (setresuid(new_uid, new_uid, new_uid) < 0)
{
    perror("setresuid");
    exit(EXIT_FAILURE);
}
if (getresuid(&ruid, &euid, &suid) < 0)
{
    perror("getresuid");
    exit(EXIT_FAILURE);
}
if (ruid != new_uid || euid != new_uid || suid != new_uid)
{
    printf("unexpected uid");
    exit(EXIT_FAILURE);
} 
```

我可以将其包装在一个 exe 中，并使用以下方法证明 uid 和 gid 看起来是正确的：

```
ps -eO user,uid,ruid,suid,group,gid,rgid,sgid 
```

该程序无法绑定到特权端口或操作大多数 root 拥有的文件，所以这一切都很好。

我还发现了[captest](http://linux.die.net/man/8/captest)程序（包含在 libcap-ng-utils 中），它可以验证该进程没有任何意外的[功能 (7)](http://www.kernel.org/doc/man-pages/online/pages/man7/capabilities.7.html)。

但是，由于安全性是一个问题，我想更有信心我已经正确地放弃了所有非必要的特权。我怎么能确定？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:23:20.823

DJBernstein 在他的“setuidgid”代码中实现了执行此操作的“规范”方式，该代码最初用于他的 QMail 程序，现在包含在“daemontools”中。

GNU coreutils 中使用的实际代码基于 DJB 对程序的描述，其代码可见[https://github.com/wertarbyte/coreutils/blob/master/src/setuidgid.c](https://github.com/wertarbyte/coreutils/blob/master/src/setuidgid.c)

# eclipse - Eclipse Juno 项目方面无法识别我有 Java 1.6

> ID：12287331
> 
> 赞同：1
> 
> 时间：2012-09-05T18:09:06.230
> 
> 标签：eclipse, jsf, jsf-2

我有一个 Eclipse/Maven 网络项目。我正在尝试更新方面以支持 JSF2。但是我无法将动态 Web 模块更新到 3.0（甚至 2.5），因为 Eclipse 拒绝识别我正在使用 Java 1.6。它在方面属性中显示 Java 1.6，但每次我尝试将动态 Web 模块更改为 2.5 或 3.0 时，它都会告诉我必须使用 Java 1.6，即使已选择它。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T18:24:58.220

我不确定 Maven 是否以及如何在这里发挥作用，但忽略这一点，您也可以通过编辑`.settings/org.eclipse.wst.common.project.facet.core.xml`文件来更改项目方面。*当您在Navigator*视图（而不是*Project Explorer*）中浏览时，您可以找到该文件。要将动态 Web 项目构面版本设置为 3.0，请编辑以下条目（版本未知，由 表示`...`）

```
<installed facet="jst.web" version="..."/> 
```

到

```
<installed facet="jst.web" version="3.0"/> 
```

如果这不能解决具体问题，那么很可能某些 Maven 插件已经强制基于 a`pom.xml`左右的构面版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-29T05:02:10.520

有同样的问题，查看了我的 maven/eclipse 项目的 .project 文件。事实证明，您必须首先在您的项目方面项目首选项页面中将项目设为 Java 项目！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:53:52.560

不幸的是，截至目前，Eclipse Java EE 工具不支持更改模块方面（ear、ejb、web 等）的规范版本。您可以按照 BalusC 的描述直接编辑元数据文件并修补任何其他源兼容性问题。或者，您可以使用适当的规范版本创建一个新项目并将您的源代码复制到其中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-16T16:21:34.463

如果您像我一样发现只有您的 Dynamic Web 项目有此问题，请尝试检查您要部署到的服务器是否配置为您想要的 JRE 版本。（全局首选项 -> 服务器 -> 运行时环境；然后编辑有问题的服务器运行时环境。）

You may also need to manually edit your Eclipse settings, as suggested by BalusC and Konstantin. If you do, after restarting Eclipse re-open the Facets preference pane and click OK or Apply. This lets Eclipse sanity check your new setting.

# php - 在文档的单独位置带有嵌入 php 内容的下拉菜单存在问题

> ID：12287333
> 
> 赞同：0
> 
> 时间：2012-09-05T18:09:18.013
> 
> 标签：php

下拉菜单的问题。问题不在于菜单代码本身，即 ul..etc，而是当前嵌入的 php 聊天程序。插入此代码以嵌入没有错误出现的聊天框后，使用 ul 下拉链接的功能被禁用。嵌入的 php 与位于#zonebar div 中的菜单完全分开。

`<?php $chat->printChat(); ?>`特定 div 中的嵌入代码。

问题是当我删除此代码时，下拉菜单按钮再次起作用..

更具体地说，我的 html 文件中唯一具有适当 htaccess 的 php 代码允许我在 html 文档中使用 php 是..

*下面的代码位于我页面的所有标签上方*

```
<?php

require_once dirname(__FILE__)."/src/phpfreechat.class.php";
$params = array();
$params["serverid"]       = md5(__FILE__); // calculate a unique id for this chat
$params["title"]          = "A simple chat with user's parameters";

$params["frozen_nick"]    = true;     // do not allow to change the nickname
$params["shownotice"]     = 0;        // 0 = nothing, 1 = just nickname changes, 2 = connect/quit, 3 = nick + connect/quit
$params["max_nick_len"]   = 20;       // nickname length could not be longer than 10 caracteres
$params["max_text_len"]   = 300;      // a message cannot be longer than 50 caracteres
$params["max_channels"]   = 1;        // limit the number of joined channels tab to 3
$params["refresh_delay"]  = 2000;    // chat refresh speed is 10 secondes (10000ms)
$params["max_msg"]        = 15;       // max message in the history is 15 (message seen when reloading the chat)
$params["height"]         = "230px";  // height of chat area is 230px

$params['admins'] = array('daddo'  => '1234', 'berthill' => '1234');
$params["debug"]          = false;     // activate debug console

$chat = new phpFreeChat( $params );

?> 
```

*然后是特定div中的代码*

```
<?php $chat->printChat(); ?> 
```

*直接链接html文件，修复后*没有任何php内容编辑掉地址**

 **与嵌入的 php 代码的链接*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:21:17.017

我打算对此进行猜测，因为查看大约十几个 javascript 文件并不是我真正想做的事情。

您的下拉菜单使用 jQuery... 这很棒。

你的聊天使用原型......也很棒。

他们很可能在一起打得不好。您可以尝试这样做：

```
var $j=jQuery.noConflict();
$j(document).ready(function(){
    $j("#zone-bar li em").click(function() {
        var hidden = $j(this).parents("li").children("ul").is(":hidden");
        $j("#zone-bar>ul>li>ul").hide()
        $j("#zone-bar>ul>li>a").removeClass();
        if (hidden) {
            $j(this)
            .parents("li").children("ul").toggle()
            .parents("li").children("a").addClass("zoneCur");
        }
    });
}); 
```

它可能有效，也可能无效，但使用`$j`代替`$`可能会解决问题。*

# ruby-on-rails-3 - 在 Cucumber 功能中使用 VCR 测试 Rails 3 后台作业（API-Request）的响应

> ID：12287336
> 
> 赞同：2
> 
> 时间：2012-09-05T18:09:38.060
> 
> 标签：ruby-on-rails-3, cucumber, delayed-job, webmock, vcr

我有一个 Rails 3 后台作业 (delayed_job)，它向他们的 API 发送一条 hipchat / Campfire 消息，我想检查我的 Cucumber 功能中的响应。有没有办法获得 VCR 记录的最后一个 HTTP 响应？

该功能看起来像这样

```
 @vcr
    Scenario: Send hipchat message when task created
      Given an hipchat_sample integration exists with app: app "teamway"
      When I create an "ActionMailer::Error" task to "Teamway"
      And all jobs are worked off # invoke Delayed::Worker.new.work_off
      Then a hipchat message should be sent "ActionMailer::Error" 
```

在我的步骤定义中，我想检查响应正文：

```
 Then /^a hipchat message should be sent "(.*?)"$/ do |arg1|
      # Like this:
      # VCR::Response.body.should == arg1
    end 
```

VCR 已经记录了请求和响应，但我不知道如何获取它们。我想到了类似于捕获使用 Pickle 的步骤发送的电子邮件的方法。有谁知道如何做到这一点？

我使用 rails 3.2.8、cucumber-rails 1.3 和 vcr 2.2.4（带有 webmock）。

最好的问候托斯滕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:08:22.387

您可以使用`VCR.current_cassette`获取当前磁带，然后查询它以获取`[VCR::HTTPInteraction][1]`您正在寻找的对象，但这会有点复杂 - VCR 磁带将新记录的 HTTP 交互与其可用的交互分开存储回放和已经回放的那些......所以你需要一些复杂的条件来确保在你的测试录制和回放时一切正常。

相反，我建议您使用`after_http_request`钩子：

```
module HipmunkHelpers
  extend self
  attr_accessor :last_http_response
end

Before { HipmunkHelpers.last_http_response = nil }

VCR.configure do |c|
  c.after_http_request(lambda { |req| URI(req.uri).host == 'hipmunk.com' }) do |request, response|
    HipmunkHelpers.last_http_response = response
  end
end 
```

然后，在您的黄瓜步骤中，您可以访问`HipmunkHelpers.last_http_response`.

有关`after_http_request`钩子的更多详细信息，请查看[relish 文档](https://www.relishapp.com/myronmarston/vcr/v/2-2-4/docs/hooks/after-http-request-hook)。

# ruby-on-rails - 如何让 index.html.rb 运行

> ID：12287337
> 
> 赞同：-1
> 
> 时间：2012-09-05T18:09:50.383
> 
> 标签：ruby-on-rails

我有一个基本的 Ruby on Rails 服务器设置。

在 routes.rb 我有这个：

```
ActionController::Routing::Routes.draw do |map|

  map.connect ':controller/:action/:id'
  map.connect ':controller/:action/:id.:format'

  root :to => "home#index"
end 
```

在我的控制器/application_controller.rb 我有这个：

```
class ApplicationController < ActionController::Base
  helper :all # include all helpers, all the time
  protect_from_forgery # See ActionController::RequestForgeryProtection for details
end 
```

最后，我有 /app/views/posts/index.html.erb ，其中包含一些基本的 HTML。如何让我的页面指向该 HTML 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:25:23.623

尝试这个：

```
ActionController::Routing::Routes.draw do
  root :to => "main_controller#index"
  match 'home' => 'main_controller#index'
end 
```

其中 main_controller 是您要用作主页的控制器的名称。

这`match`将允许您键入`localhost:3000/home`，它将与您指定的控制器匹配。

您可以通过运行命令来检查您的有效路由，`rake routes`它将为您提供项目中的路由列表。

检查[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html) -5 检查和测试路线。

# c++ - 返回不同类型的派生虚函数——指针

> ID：12287338
> 
> 赞同：0
> 
> 时间：2012-09-05T18:09:59.807
> 
> 标签：c++, sockets, inheritance, virtual, covariance

在我的程序中，我决定用一个名为 Socket 的类来包装“套接字接口”（实际上只是我正在使用的部分）。我正在使用两个不同的“域”：AF_PACKET 和 AF_INET。因为这些域具有不同的地址结构，所以我决定也包装它们的地址。

我做了一个像下面这样的小班：

```
class SockAddress
{
    public:
    SockAddress();

    virtual sockaddr* getAddress();
    virtual socklen_t getAddrLen();

    private:

    sockaddr address_;
}; 
```

基于这个类，我创建了另一个类，而不是返回一个`sockaddr*`返回的 sockaddr_ll*`

```
virtual sockaddr_ll* getAddress();
...
sockaddr_ll address_; 
```

在 C 中，它们都是指针。我只知道在任何地方`sockaddr*`都需要 a ，如果我通过 a `sockaddr_ll*`（并传递相应的`socklen_t`大小值）就不会有问题。

但是在 C++ 中，尝试编译时，我得到一个`invalid covariant return type`错误。我已经[在此处](https://stackoverflow.com/questions/4826356/differing-return-type-for-virtual-functions)、[此处](https://stackoverflow.com/questions/4665117/c-virtual-function-return-type)、[此处](http://www.lwithers.me.uk/articles/covariant.html)阅读了有关此错误的信息，并且我了解它的含义。无论如何，我找不到“解决方法”这个问题的方法。

我的问题是：由于我想返回指针（并且指针将具有相同的大小），有没有办法强制编译器接受`sockaddr_ll*`as a `sockaddr*`？而且，如果有办法，我该怎么做？

（如果没有办法，解决这个问题的“正确方法”可能是什么？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:26:44.273

一般来说，如果你的公共 API 暴露了指针并鼓励类型转换，你需要重新设计。

当你在一个类中包装一些东西时，重点是*隐藏*细节，而不仅仅是为它们制作一个类似结构的持有者。

您正在设计*新的*类型，您希望它们就像是内置的一样。这意味着将所有这些讨厌的指针隐藏在类中。

例如，创建一个仅引用抽象事物的顶级类，然后如果您想支持不同的低级 API 则子类......但将这些 API 完全封装在抽象操作后面的子类中，如监听/接受/连接。

```
class Socket
{
   public:
      Socket(IPAddress address, int port);
      virtual ~Socket() = 0; // close/clean up resources
      virtual void connect() = 0;
      ...
}; 
```

然后子类化 Socket 类来封装底层 API 的细节。

另一种选择是反转事物，以便 SockAddress 具有隐藏的操作并采用抽象套接字进行处理：

```
class SockAddress
{
      void doSomethingForSocket(Socket *s) { ... }
} 
```

我通常会告诉人们首先编写使用 API 的程序，并假设你有一个摇滚明星 API 可以为你做很酷的事情：

```
Socket s("192.168.5.100", 80);
s.connect();
int i;
i << s;
...
ServerSocket server("*", 80);
Socket *client;
while((client = server.accept()) != null) {
   ...
} 
```

然后着手制作那个API。在构建 API 本身时使用相同的技术。在编写 connect() 时，可能存在的下一组“好东西”会是非常好的......然后制作它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:23:39.140

> 在 C 中，它们都是指针。我只知道在任何地方都需要 sockaddr*，如果我通过 sockaddr_ll*

我想要一个确认的参考。我很确定它违反了 C 的别名规则。

当我使用的编译器不可用时，我已经实现了这样的协变返回。

```
class SockAddress
{
public:
    SockAddress();

    sockaddr* getAddress() { return doGetAddress(); }

protected:
    virtual sockaddr* doGetAddress() { return ...; } 
};

class SockAddress_ll: public SockAddress
{
public:
    SockAddress();
    sockaddr_ll* getAddress() { return static_cast<sockaddr_ll*>(doGetAddress()); }

protected:
    sockaddr* doGetAddress() { return ...; }
}; 
```

通过 reinterpret_cast 更改 static_cast 可能会做你想要的。这样做有多明智是另一回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:24:26.223

首先，在虚函数中，您确实需要相同的返回类型。这是给定的，因为使用了虚函数，因此您可以拥有同一函数的不同版本，并根据对象类型使用正确的版本。因此，调用您的函数的人不知道将使用哪个版本的函数，因此如果它们不同，则无法知道返回类型。

因此，在任何一种情况下都返回 sockaddr。如果你发现你的调用者需要知道返回的实际类型，你可能不想使用虚函数开始，或者你想要一个非虚的“getSpecificAddress”或类似的东西。

# php - 类何时加载、何时包含文件或何时启动类？

> ID：12287339
> 
> 赞同：0
> 
> 时间：2012-09-05T18:10:00.363
> 
> 标签：php, class

如果我将一个文件包含到另一个文件中。即 foo.php 包含类“foo”，有几个方法。php 在什么时候将类加载到内存中，在包含或类启动时。

这里：`include ('foo.php');`

或在这里：`$foo = new foo();`

例如：如果我要包含 50 个文件，这些文件都包含唯一的类，但只调用其中 1 个类，那么在内存使用方面会发生什么？速度？总体 - 请解释该行动的坏处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:16:56.330

当您`include`创建一个文件时，PHP 所做的只是解析该文件，并且无论它是否包含类定义、过程行或完全注释掉的代码，都将`includes`这些行放入您拥有的当前文件中，然后再将`evaluates`它们放入。换句话说，如果这些行是可执行的，则查找语法错误 - 执行它们。如果您有 50 个全部“包含”的类文件，一旦包含过程完成，它就会变得类似于您有一个包含所有 50 个类的文件。实例化单个类或多个类的行为则变得相同。开销的唯一区别在于单独评估和包含这 50 个文件。

如果您确实有很多具有不同类的文件的用例，并且只需要根据您可能加载的文件来包含它们，请查看 PHP 中的自动加载功能：

```
<?php
function __autoload($class_name) {
    include $class_name . '.php';
}

$first = new FirstClass();
$second = new SecondClass(); 
?> 
```

[http://php.net/manual/en/language.oop5.autoload.php](http://php.net/manual/en/language.oop5.autoload.php)

# ruby - ||= 条件赋值运算符的正式扩展

> ID：12287341
> 
> 赞同：6
> 
> 时间：2012-09-05T18:10:02.943
> 
> 标签：ruby

我想强调一下，我正在寻找 Ruby 1.9.3 解释器扩展运算符的*实际*方式，而不是*根据*其行为扩展它的方式。我真正希望的是有人了解实际的解释器来源，遗憾的是我可能无法完成这项任务。我发现的唯一可以检查这个问题的资源已经过时了：“ [A short-circuit (||=) edge case](http://dablog.rubypal.com/2008/3/25/a-short-circuit-edge-case) ”。`||=`

 *我上面提到的资源似乎表明 to 的“官方”扩展在 1.9 之前的解释`x ||= y`器`x = x || y`版本中要么不准确，要么存在错误。无论如何，所指示的边缘情况似乎已被平滑。上述资源声称`x || x = y`或`x or x = y`“更准确”。然而，这些都不正确，因为它们在`x`以前未声明的全局变量时不起作用：

```
[11:04:18][****@asha:~]$ irb
1.9.3-p194 :001 > a || a = 3
    NameError: undefined local variable or method `a' for main:Object
1.9.3-p194 :002 > b or b = 3
    NameError: undefined local variable or method `b' for main:Object
1.9.3-p194 :003 > c = c || 3
    => 3 
```

因此，就这些示例而言，至少在 1.9.3 中，`x = x || y`扩展*似乎是正确的。*但是，为了重申我的原始观点，我真的很希望看到一些真正权威的来源解决这个问题，好吧，权威而不是像我（和其他人）所做的那样轶事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-21T18:36:13.810

```
x ||= y 
```

是一种简写形式

```
x || x = y 
```

如果`x`is not`nil`和`x`is not `false`，则由于运算符的短路评估，分配将有位置`||`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T18:41:13.843

**编辑：这篇文章是关于规范的，阅读评论以获得不太理想的“实施故事”**

* * *

Ruby 草案规范 (PDF)第[11.4.2.3.2 节](http://www.ipa.go.jp/osc/english/ruby/Ruby_final_draft_enu_20100825.pdf)相当明确地定义了它（即使相当难以解释）；让我们用 c ||= 3 做一个（理论上有点松散的）例子；

**a) 将变量评估为变量引用（见 11.5.4）。令 V 为结果值。**

V 设置为`c`

**b) 评估运算符表达式或无括号的方法调用。令 W 为结果值。**

W 设置为`3`。

**c) 令 OP 为 assignment-operator 的 assignment-operator-name。**

OP设置为`||`

**d) 令 X 为 V OP W 形式的运算符表达式。**

X 设置为`c || 3`。

**e) 令 I 为缩写变量赋值表达式或缩写变量赋值语句的变量。**

我设置参考`c`。

**f) 计算一个单变量赋值表达式（见 11.4.2.2.2），它的变量是 I，操作符表达式是 X。**

`c = c || 3`被评估。

**g) abbreviated-variable-assignment 的值是评估的结果值。**

赋值的结果是`3`。

换句话说，扩展`c = c || 3`是正确的（不包括 1.9 之前的错误）。*

# asp.net-mvc - 从 asp.net mvc 迁移种子方法中调用成员资格方法的“无法加载类型”错误

> ID：12287343
> 
> 赞同：1
> 
> 时间：2012-09-05T18:10:09.883
> 
> 标签：asp.net-mvc, asp.net-mvc-3, ef-code-first, membership-provider

我在 configuration.cs 中使用 Seed 方法，该方法是在 ASP.Net MVC 项目中打开 Code First Migrations 时创建的。

我所有的常用`context.ENTITYHERE.AddOrUpdate`电话都很好用。当我尝试使用[此会员提供程序](http://codefirstmembership.codeplex.com)设置一些用户时，问题就来了：

`Could not load type 'CodeFirstMembershipSharp.CodeFirstMembershipProvider' from assembly 'System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'.`

如果我禁用 'Membership.CreateUser(Username, Password, Email, null, null, IsApproved, null, out CreateStatus);' WebSecurity.cs 中的行，看起来没问题..！

有任何想法吗？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T08:50:33.610

**编辑：我现在意识到这并没有太大帮助，因为它使用了完全不同的会员提供者（尽管相似）。我仍然不确定如何最好地解决这个问题，但我留下了我的答案，因为我希望它可能会有所帮助。**

我知道这现在已经很老了，但我找到了一个安装最新提供程序的解决方案。此链接包含所需的信息：

[http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)

有趣的是，自动进行的 web.config 更改似乎比旧的包含更多信息。

我的旧供应商线路是：

```
<membership defaultProvider="CodeFirstMembershipProvider">
        <providers>
          <add name="CodeFirstMembershipProvider" type="CodeFirstMembershipProvider" connectionStringName="[YOURCONNECTIONNAME]" />
        </providers>
      </membership>
      <roleManager enabled="true" defaultProvider="CodeFirstRoleProvider">
        <providers>
          <clear />
          <add name="CodeFirstRoleProvider" type="CodeFirstRoleProvider" connectionStringName="[YOURCONNECTIONNAME]" />
        </providers>
      </roleManager>
```

新的提供程序代码如下所示：

```
<profile defaultProvider="DefaultProfileProvider">
        <providers>
          <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="[YOURCONNECTIONNAME]" applicationName="/" />
        </providers>
      </profile>
      <membership defaultProvider="DefaultMembershipProvider">
        <providers>
           <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="[YOURCONNECTIONNAME]" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
        </providers>
      </membership>
      <roleManager defaultProvider="DefaultRoleProvider">
        <providers>
           <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="[YOURCONNECTIONNAME]" applicationName="/" />
        </providers>
      </roleManager>
```

# eclipse - Eclipse 文本编辑器获取不完整的代码 AST

> ID：12287345
> 
> 赞同：1
> 
> 时间：2012-09-05T18:10:33.507
> 
> 标签：eclipse, syntax-error, abstract-syntax-tree

我想知道有没有办法获得用户输入的不完整代码片段的 AST。例如，让我们假设代码看起来像这样：

```
String str = "This is some string";
int length = str.length + 
```

我可以获得此类代码的 AST 吗？这在语法上不正确，但我仍然需要 AST。

另外，我可以将这样的代码注入文本编辑器吗？理想情况下，我会将其添加为字符串，但 AST 格式也可以。

*更新 1*：

准确地说，我是否能够以某种方式使用 ASTParser，以便在最后一行得到类似于以下 AST 的内容：

```
 =
      /       \
decl length    +
             /
        str.length 
```

*部分答案*：

JDT 的*ASTParser*可以与**setStatementsRecovery**一起使用，这将产生以下 AST：

```
 =
      /       \
decl length    str.length 
```

这并不完全是理想的解决方案，但有人可能会发现它很有用，就像我一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:35:41.983

我不明白你想要达到什么目的，但根据你的语法和使用的工具，你可能会得到一个不完整的 AST。从您的代码中，这样的 AST 可能如下所示：

```
 __ = __
        /         \
decl length       fail 
```

# jquery - 任何滑块缩略图不滑动

> ID：12287347
> 
> 赞同：1
> 
> 时间：2012-09-05T18:10:35.607
> 
> 标签：jquery, carousel, thumbnails, anythingslider

我一直在为此苦苦挣扎，在文档中找不到解决方案。AnySlider 正在根据需要创建缩略图，但它们不会移动。它们似乎已修复，仅显示 9 个缩略图。问题是当我添加超过 9 张照片时，缩略图会堆叠在下一行，而不是添加到当前并隐藏。

这是我正在使用的代码：

```
$('#slider1')
              .anythingSlider({
               navigationFormatter : function(i, panel){ // add thumbnails as navigation links
                return '<img src="images/thumbs' + ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19',][i - 1] + '.jpg">';
               },
                // Callback when the plugin finished initializing
                onInitialized: function(e, slider) {

                    var time = 1000, // allow movement if < 1000 ms (1 sec)
                        range = 50,  // swipe movement of 50 pixels triggers the slider
                        x = 0, t = 0, touch = "ontouchend" in document,
                        st = (touch) ? 'touchstart' : 'mousedown',
                        mv = (touch) ? 'touchmove' : 'mousemove',
                        en = (touch) ? 'touchend' : 'mouseup';

                    slider.$window.add( slider.$controls )
                        .bind(st, function(e){
                            // prevent image drag (Firefox)
                            e.preventDefault();
                            t = (new Date()).getTime();
                            x = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX; 
                        })
                        .bind(en, function(e){
                            t = 0; x = 0;
                        })
                        .bind(mv, function(e){
                            e.preventDefault();
                            var newx = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX,
                            r = (x === 0) ? 0 : Math.abs(newx - x),
                            // allow if movement < 1 sec
                            ct = (new Date()).getTime();
                            if (t !== 0 && ct - t < time && r > range) {
                                if (newx < x) { 
                                    if ($(this).hasClass('anythingControls')) {
                                        slider.$controls.find('.next').trigger('click');
                                    } else {
                                        slider.goForward();
                                    }
                                    return false;
                                }
                                if (newx > x) {
                                    if ($(this).hasClass('anythingControls')) {
                                        slider.$controls.find('.prev').trigger('click');
                                    } else {
                                        slider.goBack(); 
                                    }
                                }
                                t = 0; x = 0;
                                return false;
                            }
                        });
                }
               });});}); 
```

知道此配置可能有什么问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:44:25.810

看起来您缺少[`navigationSize`选项](https://github.com/CSS-Tricks/AnythingSlider/wiki/Navigation-options#wiki-navigationsize)设置。默认情况下，它是`false`并且不限制可见控件的数量。

我相信这是您要模仿[的演示。](http://jsfiddle.net/Mottie/ycUB6/51/)

# c# - 使用 pack://siteoforigin 向上导航目录

> ID：12287350
> 
> 赞同：1
> 
> 时间：2012-09-05T18:10:47.717
> 
> 标签：c#, wpf, pack-uri

嗨，我正在尝试使用`siteoforigin`. 我可以进入子文件夹，但如何向上导航？

这是我尝试过的代码

```
StreamResourceInfo info = Application.GetRemoteStream(new Uri("pack://siteoforigin:,,,/../Settings.xml", UriKind.RelativeOrAbsolute)); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:27:50.630

你不能。Pack Uri 只能访问 XBAP 所在文件夹及其以下文件夹中的文件。不幸的是，没有办法解决它。

# email - 通过 Mailchimp 发送电子邮件，但从我的数据库中选择带有查询的收件人

> ID：12287355
> 
> 赞同：2
> 
> 时间：2012-09-05T18:11:00.340
> 
> 标签：email, mailchimp

我有一个数据库作为我的网络应用程序的一部分，用于存储用户电子邮件、年龄、性别等。有没有办法通过 API 向大量用户发送批量电子邮件？以前我使用他们的 API 在 MailChimp 的系统中从我的数据库中创建新条目，然后我们会通过 MailChimp 的 Web 应用程序对用户进行细分。问题是将您的数据发送到 MailChimp 有很多问题。例如，要将用户的年龄存储在 MailChimp 中，您必须通过 API 为每个年龄创建一个单独的“组标题”。您不能只指定字段“年龄”是一个数字，然后添加您喜欢的任何内容。此外，每个用户在通过我们注册时都会选择一个城市，如果我们将另一个城市添加到我们的选择列表中，您必须在 MailChimp 上手动添加它，否则会出现错误。

所以最简单的解决方案是如果我们可以在我们这边进行分段并通过 API 发送电子邮件，除非有另一种简单的方法来做到这一点。我知道 Amazon SES 让您通过 API 发送电子邮件，但我想要 MailChimp 的其他功能，例如发送的电子邮件历史记录、分析和为用户提供和轻松取消订阅功能 - Amazon SES 不做任何这些。

我的难题有答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:24:24.950

你检查过[山魈](http://mandrill.com "山魈")吗？这是 MailChimp 的一项更新服务，其工作方式与 SES 类似，但具有您所了解和喜爱的令人难以置信的 MailChimp 营销敏感性（打开/点击跟踪、电子邮件审核日志，以及许多新内容。）

它不会直接连接到您在 MailChimp 中的数据（还），但听起来您已经在自己的数据库中获得了所有相关数据，并且可以自己进行分段和内容生成。

奖励：如果您已经是 MailChimp 的付费客户，您还将获得折扣。

# javascript - 一次保存多个 Backbone 模型

> ID：12287359
> 
> 赞同：10
> 
> 时间：2012-09-05T18:11:15.950
> 
> 标签：javascript, backbone.js

我有一个带有大量模型的 Backbone 集合。

每当在模型上设置特定属性并保存它时，就会触发大量计算并重新呈现 UI。

但是，我希望能够一次在多个模型上设置属性，并且只有在它们全部设置后才进行保存和重新渲染。当然我不想为一个操作发出多个http请求，也绝对不想重新渲染界面十次。

我希望在 Backbone.Collection 上找到一个保存方法，它可以计算出哪些模型 hasChanged()，将它们作为 json 组合在一起并发送到后端。然后可以由集合上的事件触发重新呈现。没有这样的运气。

这似乎是一个很常见的要求，所以我想知道为什么 Backbone 没有实现。这是否违背了 RESTful 架构，将多个内容保存到单个端点？如果是这样，那又如何？发出 1000 个请求来持久化 1000 个小项目是不切实际的。

那么，使用我自己的 save 方法来增加 Backbone.Collection 的唯一解决方案是迭代其所有模型并为所有已更改的模型构建 json 并将其发送到后端？还是有人有更简洁的解决方案（或者我只是错过了什么！）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:09:34.400

我最终用几种方法来增加 Backbone.Collection 来处理这个问题。

saveChangeMethod 创建一个要传递给 Backbone.sync 的虚拟模型。模型需要的所有主干同步方法是它的 url 属性和 toJSON 方法，所以我们可以轻松地敲掉它。

在内部，模型的 toJSON 方法仅返回其属性的副本（发送到服务器），因此我们可以愉快地使用仅返回模型数组的 toJSON 方法。Backbone.sync 对此进行了字符串化，它只为我们提供了属性数据。

成功时， saveChanged 会触发要处理一次的集合上的事件。已经添加了一些代码，使其针对任何批次模型中已更改的每个属性触发一次特定事件。

```
Backbone.Collection.prototype.saveChanged = function () {
    var me = this,
        changed = me.getChanged(),
        dummy = {
            url: this.url,
            toJSON: function () {
                return changed.models;
            }
        },
        options = {
            success: function (model, resp, xhr) {
                for (var i = 0; i < changed.models.length; i++) {
                    changed.models[i].chnageSilently();
                }
                for (var attr in changed.attributes) {
                    me.trigger("batchchange:" + attr);
                }
                me.trigger("batchsync", changed);
            }
        };
    return Backbone.sync("update", dummy, options);
} 
```

然后，我们只需要集合上的 getChanged() 方法。这将返回一个具有 2 个属性的对象、一个已更改模型的数组和一个标记哪些属性已更改的对象：

```
Backbone.Collection.prototype.getChanged = function () {
    var models = [],
        changedAttributes = {};
    for (var i = 0; i < this.models.length; i++) {
        if (this.models[i].hasChanged()) {
            _.extend(changedAttributes, this.models[i].changedAttributes());
            models.push(this.models[i]);
        }
    }
    return models.length ? {models: models, attributes: changedAttributes} : null;
} 
```

尽管这是对主干“更改模型”范式的预期用途的轻微滥用，但批处理的全部意义在于，当模型更改时，我们不希望发生任何事情（即触发任何事件）。

因此，我们必须将 {silent: true} 传递给模型的 set() 方法，因此使用主干的 hasChanged() 来标记等待保存的模型是有意义的。当然，如果您出于其他目的默默地更改模型，这将是有问题的 - collection.saveChanged() 也会保存这些，因此值得考虑设置一个替代标志。

无论如何，如果我们这样做，在保存时，我们需要确保主干现在认为模型没有改变（没有触发它们的更改事件），所以我们需要手动操作模型，就好像它没有改变一样被改变了。saveChanged() 方法迭代我们更改的模型并在模型上调用这个 changeSilently() 方法，这基本上只是 Backbone 的 model.change() 方法，没有触发器：

```
Backbone.Model.prototype.changeSilently = function () {
    var options = {},
    changing = this._changing;
    this._changing = true;
    for (var attr in this._silent) this._pending[attr] = true;
    this._silent = {};
    if (changing) return this;

    while (!_.isEmpty(this._pending)) {
        this._pending = {};
        for (var attr in this.changed) {
        if (this._pending[attr] || this._silent[attr]) continue;
        delete this.changed[attr];
        }
        this._previousAttributes = _.clone(this.attributes);
    }
    this._changing = false;
    return this;
} 
```

用法：

```
model1.set({key: value}, {silent: true});
model2.set({key: value}, {silent: true});
model3.set({key: value}, {silent: true});
collection.saveChanged(); 
```

关于。RESTful .. 对集合的端点执行 PUT 以更改其“某些”记录是不太正确的。从技术上讲，一个 PUT 应该替换整个集合，但在我的应用程序真正需要替换整个集合之前，我很乐意采用务实的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T19:20:58.643

你可以定义一个新的*资源*来完成这种行为，你可以调用它`MyModelBatch`。

您需要在服务器端实现一个新资源，该资源能够消化`Array`模型并执行正确的操作`CREATE`：`UPDATE`和`DESTROY`。

此外，您需要`Model`在 Backbone 客户端中实现一个*属性*，即模型数组和一个`url`不使用`id`.

关于*重新渲染*的事情，我建议您尝试为每个模型创建一个视图，以便在模型更改时会有尽可能多的*渲染*，但它们将是细节*重新渲染*而不会重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-11T10:54:54.953

这就是我想出的。

```
Backbone.Collection.extend({
    saveAll: function(models, key, val, options) {

        var attrs, xhr, wait, that = this;

        var transport = {
            url: this.url,
            models: [],
            toJSON: function () {
                return { models: this.models };
            },
            trigger: function(){
                return that.trigger.apply(that, arguments);
            }
        };

        if(models == null){
            models = this.models;
        }

        // Handle both `"key", value` and `{key: value}` -style arguments.
        if (key == null || typeof key === 'object') {
            attrs = key;
            options = val;
        } else {
            (attrs = {})[key] = val;
        }

        options = _.extend({validate: true}, options);
        wait = options.wait;

        // After a successful server-side save, the client is (optionally)
        // updated with the server-side state.
        if (options.parse === void 0) options.parse = true;

        var triggers = [];

        _.each(models, function(model){

            var attributes = model.attributes;

            // If we're not waiting and attributes exist, save acts as
            // `set(attr).save(null, opts)` with validation. Otherwise, check if
            // the model will be valid when the attributes, if any, are set.
            if (attrs && !wait) {
                if (!model.set(attrs, options)) return false;
            } else {
                if (!model._validate(attrs, options)) return false;
            }

            // Set temporary attributes if `{wait: true}`.
            if (attrs && wait) {
                model.attributes = _.extend({}, attributes, attrs);
            }

            transport.models.push(model.toJSON());

            triggers.push(function(resp){
                if(resp.errors){
                    model.trigger('error', model, resp, options);
                } else {
                    // Ensure attributes are restored during synchronous saves.
                    model.attributes = attributes;
                    var serverAttrs = options.parse ? model.parse(resp, options) : resp;
                    if (wait) serverAttrs = _.extend(attrs || {}, serverAttrs);
                    if (_.isObject(serverAttrs) && !model.set(serverAttrs, options)) {
                        return false;
                    }
                    model.trigger('sync', model, resp, options);
                }
            });

            // Restore attributes.
            if (attrs && wait) model.attributes = attributes;
        });

        var success = options.success;
        options.success = function(resp) {
            _.each(triggers, function(trigger, i){
                trigger.call(options.context, resp[i]);
            });
            if (success) success.call(options.context, models, resp, options);
        };
        return this.sync('create', transport, options);
    }
}); 
```

# javascript - Dojo AMD 加载程序执行定义具有空/缺少依赖项的回调

> ID：12287360
> 
> 赞同：0
> 
> 时间：2012-09-05T18:11:19.973
> 
> 标签：javascript, dojo, dependencies, amd

我是 Dojo 的新手（1.7）并且完全愿意接受我是个白痴（我只是希望不是）。我更愿意为 AMD 使用 require.js，但我使用的是第 3 方 (ESRI) 映射 API，它强制 Dojo 在我身上使用并使用它的 AMD，这意味着如果我尝试使用 require.js 也会出现严重错误。

我有一个`define`依赖于 Backbone 和 Underscore 的模块（我最终可能会使用 Dojo 的 MVC，但我不认为这个问题是 Backbone 特有的，所以我想弄清楚它）。奇怪的是，当模块加载时，Dojo 似乎在我的内部执行回调`define`，此时依赖项（下划线和主干）是空对象`{}`。我的回调中发生错误，`return Backbone.View.extend...`因为 Backbone 的`View`属性不存在。

我知道 Backbone 依赖于 Underscore，到目前为止，我不知道如何确保在不使用 hacky-looking 的情况下首先加载 Underscore `require({async:0},['test1.js','test2.js'...`。但是，在这种情况下，Underscore 也是一个空对象，所以在`define`加载任何依赖项之前都会执行 's 回调？？？

**编辑**在此错误发生之前，我在控制台中看到了 Underscore 和 Backbone HTTP 请求以及 200 个响应，所以我假设它们的引用没有问题。

具体的东西...

索引.html：

```
<script type="text/javascript">

    var dojoConfig = {
        tlmSiblingOfDojo: false,

        packages: [
            {name: 'app', location: '/js'},
            {name: 'lib', location: '/js/lib'}
        ],

        aliases: [
            ['Backbone', 'lib/backbone-0.9.2.min'],
            ['_', 'lib/underscore-1.3.3.min'],
            ['$', 'lib/jquery-1.8.0.min'],

            ['ready', 'dojo/domReady']
        ]
    };

</script>
<script type="text/javascript" src="http://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.1"></script>
<script type="text/javascript">

    require([ 'app/app' ], function(App) {
        App.initialize();
    });

</script> 
```

应用程序.js：

```
define(['app/views/main-view'], function(MainView) {

    return {
        initialize : function() {
            new MainView();
        }
    };

}); 
```

主视图.js：

```
define(['_', 'Backbone', 'ready!'], function(_, Backbone) {

    // *** ERROR THROWN HERE, Backbone = {}, _ = {} ***
    return Backbone.View.extend({

        el: 'main',

        initialise: function() {

            console.log('main view initialising');

            this.render();
        },

        render: function() {

            console.log('main view rendering');
        }

    });
}); 
```

谁能（请）告诉我这里发生了什么？此外，在 Backbone 之前加载下划线的任何替代建议都会非常有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:15:48.873

只需更改依赖项的顺序：

```
define(['_', 'Backbone', 'ready!'], function(_, Backbone) { /*...*/}); 
```

因为您在变量和变量中都有`ready!`插件。`_``_.js``Backbone`

**编辑：**您可以嵌套它：

```
define(["_", "require"], function(_, require) {

    require(["Backbone"], function(Backbone) {
        // your code here
    })

}) 
```

此外，如果 underscore 或 Backbone 不是 AMD 模块，本地函数变量将覆盖它们。

# javascript - 用本地js替换服务器js文件进行调试

> ID：12287365
> 
> 赞同：0
> 
> 时间：2012-09-05T18:11:40.133
> 
> 标签：javascript, debugging, fiddler

我有一个在服务器上有 js 文件的应用程序，我希望能够在本地文件中进行更改并查看 Web 应用程序如何响应。有人将我指向提琴手，但我不确定如何实现这一目标。如果有人知道我可以实现这一目标的任何方法，我将非常有帮助。我的 js 文件也没有出现在脚本中，而是出现在网络响应中。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:29:40.773

可以使用 fiddler web debugger 来拦截和修改脚本吗？我之前使用 fiddler 将调试器语句添加到 3rd 方 JavaScript。很容易。

下载 fiddler 并使用菜单选项来中断脚本响应。然后您可以编辑下方框中的脚本并继续。

我将为您获取链接和更多详细信息。

# google-maps - Google Maps API v3：空中（倾斜、倾斜、45 度）图像上的 ImageMapType 未对齐

> ID：12287367
> 
> 赞同：5
> 
> 时间：2012-09-05T18:11:44.017
> 
> 标签：google-maps, google-maps-api-3, gis, geospatial, map-projections

我有一个 ImageMapType，它显示在 Google 的基本地图之上。一切都完美无缺，除非进入 45 度视图（倾斜、空中、斜角）。

我在 v2 中读到过，有一个可能有用的 GObliqueMercator 类。但我在 v3 中找不到类似的东西。

在渲染图块之前，我还可以在服务器端重新投影我的矢量数据。我只是不确定我应该使用哪种投影来对齐。

有人有想法么？

更新：显示问题的屏幕截图。它在对角线特征上最为明显。

45度关闭：

![倾斜关闭](../Images/a67b242ba107d862c427501f01300c4b.png)

45度开：

![倾斜开](../Images/d5cc10e880c602f20e36403510401f3a.png)

# wix - 如何设置 Wix 引导程序安装的产品代码

> ID：12287372
> 
> 赞同：3
> 
> 时间：2012-09-05T18:12:21.020
> 
> 标签：wix, bootstrapper

我正在使用引导程序来检查是否存在，并在需要时安装一组 3rd 方产品安装。然后它会安装我的产品。我想包括一个完整安装的卸载快捷方式，而不仅仅是我的产品。但是，为此，我需要能够为引导程序设置产品代码，然后在我的卸载快捷方式中引用它：

```
<ShortcutId="UninstallShortcut" Name="Uninstall My Product" 
   Description="Uninstalls My Product"Target="[System64Folder]msiexec.exe" 
   Arguments="/x [MyBootStrapperProductCode]" Icon="MainApp.ico"/> 
```

我正在使用标准的 Wix 引导程序，但我在 Bundle 元素中看不到任何可以让我设置产品代码的内容。

或者，我可以阻止引导程序在添加/删除程序中留下对自身的引用吗？第 3 方组件是永久部署。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T15:46:58.190

Bundle 的工作方式与 Product 不同。它不使用 msiexec 来卸载，至少不公开。

为了为 BUNDLE 创建 UNISTALL 快捷方式，您需要一些巧妙的技巧。免责声明：仅用于开发/内部使用。

第一的; 您需要使用以下方法将 UpgradeCode 传递给您的 MSI：

[将命令行参数从 WiX 包传递给 MSI](https://stackoverflow.com/questions/17729878/passing-command-line-args-to-msi-from-wix-bundle)

之后，在您的 MSI 文件中，您可以尝试搜索与您的 UpgradeCode 相等的注册表值 BundleUpgradeCode。如果你找到了 value 所在的文件夹，你可以提取 UnistallString 并直接执行它（使用 CustomAction）。

它将是这样的：“C:\ProgramData\Package Cache{my GUID}\ExchangeBootStrapper.exe”/uninstall

我个人还没有实现它，但是找不到任何其他解决方法来解决这个问题并想出了这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-07T09:51:23.710

我迟到了，但至少记录在案。据我了解，燃烧链中的产品是独立处理的。所以卸载确实如此。这意味着您不需要整个捆绑包的代码。捆绑链中各个 Msi 文件的代码将用于卸载。至于 3d 派对的永久安装，则有相应的永久属性。这一切在 Ramirez N. WiX 3.6 指南的最后两章中都有很好的描述。

# javascript - 锚导航后如何向下滚动页面？

> ID：12287376
> 
> 赞同：1
> 
> 时间：2012-09-05T18:12:27.767
> 
> 标签：javascript, jquery, html, css, anchor

我已将顶部菜单添加为具有位置的 div：固定。它位于页面顶部，因此它涵盖了部分内容。我将布局向下移动，所以通常没关系，但是如果用户单击任何锚链接，页面将滚动到锚位于顶部的位置。但它被顶部菜单覆盖。有没有办法捕获锚事件并使用 javascript（必要时使用 jQuery）处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:34:05.057

你可以使用这样的东西：

```
$('a').click(function(){
    $('html').scrollTop($($(this).attr('href')).position().top + menu_height_offset)
}) 
```

获取锚点位置

```
$($(this).attr('href')).position().top 
```

使与固定菜单相关的偏移

```
menu_height_offset 
```

移动滚动条

```
$('html').scrollTop() 
```

[http://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

[http://api.jquery.com/position/](http://api.jquery.com/position/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:53:16.747

您需要计算元素的偏移量并滚动到`offset of element - height of the navigationbar`- 位置：

```
$("a").on("click",function(){
    // height of the navigation bar
    var height= $("#nav").outerHeight();
    // position of the referenced dom-element
    var pos = $($(this).attr("href")).position().top;
    // scroll to the element
    $("body").scrollTop(pos - height);
    // suppress default
    return false;
})​ 
```

**[在这里查看它的实际应用](http://jsfiddle.net/mF66X/)。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-21T16:37:21.387

```
 /* START --- scroll till anchor */
        (function($) {
             $.fn.goTo = function() {
                  var top_menu_height=$('#div_menu_header').height() + 5 ;
                  //alert ( 'top_menu_height is:' + top_menu_height );
                  $('html, body').animate({
                        scrollTop: (-1)*top_menu_height + $(this).offset().top + 'px'
                  }, 500);
                  return this; // for chaining...
             }
        })(jQuery);

        $(document).ready(function(){

          var url = document.URL, idx = url.indexOf("#") ;
          var hash = idx != -1 ? url.substring(idx+1) : "";

          $(window).load(function(){
             // Remove the # from the hash, as different browsers may or may not include it
             var anchor_to_scroll_to = location.hash.replace('#','');
             if ( anchor_to_scroll_to != '' ) {
                 anchor_to_scroll_to = '#' + anchor_to_scroll_to ;
                 $(anchor_to_scroll_to).goTo();
             }
            });
        });
    /* STOP --- scroll till anchror */ 
```

# java - 从某个网站收集字符串，该网站在一定时间后开始拒绝您的连接

> ID：12287377
> 
> 赞同：0
> 
> 时间：2012-09-05T18:12:29.847
> 
> 标签：java

我目前正在创建一个程序，该程序基于不断变化的变量，连接到网站并收集信息。它必须连接到网站最多 400 次。主题网站似乎在连接一定数量后显示空白屏幕，大约 10-30。有谁知道找到连接之间等待多长时间的最佳方法？

```
 public static String pullString(int id) {

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:20:25.553

我不能下班去那里，但是 google `runescape api`. 他们[这里](http://services.runescape.com/m=rswiki/en/Grand_Exchange_APIs)有一个，我敢打赌他们希望你用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:29:19.867

如果网站在您达到一定限制后给您随机阻止时间，则几乎不可能找到最佳等待时间。我认为您最好的选择是使用一个 http 代理池以循环方式访问该网站。虽然这不是很好......但从技术上讲，如果它在一定量的流量后阻止您，它应该是以编程方式访问网站的最佳方式。

这是有关如何使用代理的链接：http: [//docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)

您也可以使用更简单的 HttpClient。

试着google一下，你可以找到很多免费的代理服务器列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:30:52.787

一旦它开始阻止你，它最终会让你重新连接吗？您也许可以执行某种算法来动态确定重试的速度。

您可以考虑类似于 TCP 拥塞控制所做的事情：从连接之间的一些等待时间开始。当一个成功完成时，将等待时间减少一个常数。当您遇到错误时，将等待时间加倍（或乘以一个常数）。

不过，他们很可能正在做一些比限速连接更复杂的事情。不知道你必须绕过什么，很难知道如何绕过它。

# c# - 如何防止我的 C# 应用程序在上下文菜单中打开新窗口？

> ID：12287378
> 
> 赞同：1
> 
> 时间：2012-09-05T18:12:31.793
> 
> 标签：c#, contextmenu

我正在开发一些 C# 应用程序来帮助自己学习 C#。我一直在寻找解决方案，但似乎找不到。

当我的应用程序最小化时，它会在系统托盘中显示一个通知图标。当我右键单击它时，鼠标上会弹出一个上下文菜单。但是，对于菜单和子菜单的每一级，任务栏上都会弹出一个空白窗口，直到我退出该子菜单或上下文菜单。

我不知道为什么，我愿意。我也想知道如何防止这种情况发生。

## 编辑

此外，在 Visual C# Studio 2010 中，调试时，有没有办法准确确定我关注的代码的哪个表单/部分，以便我可以单击其中一个窗口来查看它到底是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:23:27.173

你是如何显示 ContextMenu 的？我怀疑您是直接调用 ContextMenu/ContextMenuStrip.Show(x,y) 。这将导致它显示在任务栏中。

相反，将 ContextMenu/ContextMenuStrip 分配给 NotifyIcon 的 ContextMenu/ContextMenuStrip 属性，而不是在鼠标单击处理程序中手动显示它。如果它用作 ContextMenu/ContextMenuStrip 属性的一部分，它不会显示在任务栏中。

# java - 使用 Bloomberg 在 Java 中的特定时间获取最后一笔交易

> ID：12287379
> 
> 赞同：3
> 
> 时间：2012-09-05T18:12:33.720
> 
> 标签：java, bloomberg

使用彭博开放 API。如何获取特定日期和时间的 PX_LAST 值？

我可以使用以下方法获得特定日期的最后一笔交易（实际上是收盘价）：

```
Request request = refDataService.createRequest(historicalData);
request.getElement("securities").appendValue("IBM US Equity");
request.getElement("fields").appendValue("PX_LAST");

String date = "20120801";
request.set("startDate", date);
request.set("endDate", date); 
```

现在我需要知道特定日期和时间的 PX_LAST。例如，8 月 1 日 9:45 的现行交易价格是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:59:30.010

`IntradayBarRequest`一种方法是使用以下参数创建请求：

```
request.set("security", ticker);
request.set("eventType", EventType.TRADE);
request.set("interval", 1);
request.set("gapFillInitialBar", true);
request.set("startDateTime", startDate);
request.set("endDateTime", startDate); 
```

和`startDate = "2012-08-01T09:45:00"`

请注意，在我的时区中，我在 9:45 没有得到任何东西，但我在 15:45 得到了一些东西（参见你之前的问题）。

如果使用 Joda 的 DateTime，则可以使用以下模式：

```
private static final DateTimeFormatter bbDateFormat = DateTimeFormat.forPattern("yyyy-MM-dd'T'HH:mm:ss");

DateTime start = new DateTime(2012, 8, 1, 15, 45, 0, 0);
String bbStartDate = startDate.toString(bbDateFormat);
request.set("startDateTime", bbStartDate); 
```

# git - Git Push 未显示在上下文菜单中

> ID：12287380
> 
> 赞同：0
> 
> 时间：2012-09-05T18:12:35.683
> 
> 标签：git, git-push, tortoisegit, git-commit

我是 Git 新手，对它了解不多。我对几个文件进行了更改，并希望将它们推送到远程存储库。我使用 TortoiseGit 作为 Git 客户端。我在上下文菜单中有“Git Commit”选项，但没有“Git Push”选项。

有什么问题？我错过了一些 Git 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:46:35.363

在资源管理器中，右键单击存储库文件夹，选择 TortoiseGit -> Push。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:01:26.987

我不确定这是否是我问题的答案，但我找到了另一种推送文件的方法。提交文件对话框在 TortoiseGit 中有一个“推送”按钮。我没有使用它，但我想它是在提交文件后推送文件的。

但是，当我在提交文件后右键单击文件时，我仍然无法找到“Git Push”上下文菜单项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:19:26.350

只需下拉到命令行（Windows 中的 msysgit）

```
 cd path/to/your/repo
 git push origin the-name-of-your-branch 
```

从命令行使用 git 有很多优点。

1.  您将获得命令历史记录。只需向上箭头即可查看您之前的操作。
2.  选项卡完成。键入分支名称的一部分，点击选项卡，它将为您完成。
3.  管道。将一个命令的输出作为另一个命令的输入。
4.  脚本。您可以为常见任务制作脚本。
5.  您将在线获得更多帮助。大多数 Git 用户从命令行使用 Git，所以通过这种方式你会得到比询问 TortoiseGit 细节更多的帮助。

# .net - 在 AttachDBfilename 关键字的情况下，是否必须使用 .\SQLEXPRESS 作为数据源的值？

> ID：12287384
> 
> 赞同：1
> 
> 时间：2012-09-05T18:12:48.983
> 
> 标签：.net, sql-server, ado.net, connection-string, sql-server-express

```
data source=.\SQLEXPRESS;Initial File Name=|DataDirectory|ASPNET.mdf;Integrated Security=SSPI;User Instance=true 
```

我正在使用上面的连接字符串。它工作正常。但是当将数据源“.\SQLEXPRESS”更改为“localhos”时，它会引发错误“键'attachdbfilename'的值无效”。还有我的第二个问题，关键字“User Instace”的用途是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:09:14.850

只有 SQL Server Express Edition 支持`attachdbfilename`选项。因此，您的数据源**必须**是 Express 实例。它可以命名为*任何*名称，也可以是默认实例，但它必须是 Express 版本。在您的情况下，您似乎有两个实例，一个是命名`SQLEXPRESS`的，一个是默认的，一个命名`SQLEXPRESS`的是 Express 版本，而默认的不是。同样，重要的不是实例的名称，而是您要连接的引擎版本。

您无需了解有关用户实例的任何信息。忘记他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:38:53.843

您可以使用`server`而不是在`data source`本地连接：

```
Server=(local);Initial File Name=|DataDirectory|ASPNET.mdf;Integrated Security=SSPI;User Instance=true 
```

用户实例的使用是将完全预授权的 SQL Server 实例提供给在计算机上具有有限管理权限的用户。

# c++ - 错误：表达式必须具有类类型

> ID：12287387
> 
> 赞同：0
> 
> 时间：2012-09-05T18:13:01.957
> 
> 标签：c++, visual-studio-2010, syntax-error

首先，我知道还有其他问题与这个问题基本相同，但似乎没有一个答案对我有用。我对 c++ 和一般编程很陌生，所以请尽可能简单地描述一下，谢谢。

因此，我正在尝试制作一个简单的文本游戏，并且我有几个文件，但是当我尝试使用类中的方法时，会导致错误，指出表达式必须具有类类型。

这是代码。

主文件

```
#include <iostream>
#include <string>
#include <ctime>
#include <cstdlib>
#include "Warrior.h"
using namespace std;

//main function
int main (void)
{
//title screen
cout<< " _____ _           _        _____         \n";
cout<< "|   __|_|_____ ___| |___   | __  |___ ___ \n";
cout<< "|__   | |     | . | | -_|  |    -| . | . |\n";
cout<< "|_____|_|_|_|_|  _|_|___|  |__|__|  _|_  |\n";
cout<< "              |_|                |_| |___|\n";
cout<< "\n\n       Enter any # to start \n ";  

int start;
anumber:
cin>> start;

if (start < 0 || start > 0)
{
    cout<< "\nWelcome to Sam Acker's simple rpg game!\n";
}

Warrior your_warrior(int health , int armor , int weapon);
your_warrior.warrior_name_function; //This is the line with the error

int exit;
cin>> exit;
return 0;
} 
```

战士.h

```
#include <string>
#include <iostream>
class Warrior
{
private:
int health;
int weapon;
int armor;
std::string warrior_name;

public:
int attack();
int warrior_name_function();

Warrior(int health , int weapon , int armor);
~Warrior();
}; 
```

战士.cpp

```
#include <iostream>
#include <string>
#include <ctime>
#include <cstdlib>
#include "Warrior.h"

int Warrior::warrior_name_function()
{
std::cout<< "What would you like to name you warrior?\n";
std::cin>> Warrior::warrior_name;
return 0;
}

int Warrior::attack()
{
return 0;
}

Warrior::Warrior(int health , int armor , int weapon)
{
 health == 100;
 armor == 1;
 weapon == 16;
}

Warrior::~Warrior()
{} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T18:23:46.550

main() 中的这一行

```
Warrior your_warrior(int health , int armor , int weapon); 
```

看起来您正在声明一个函数，而不是创建 class 的实例`Warrior`。你应该用你的变量的一些具体值来调用它来创建一个

```
Warrior your_warrior(10,32,2); 
```

甚至更好地创建一些变量，设置它们的值并传递给函数。然后打电话

```
your_warrior.warrior_name_function(); 
```

您的编译错误是因为它没有将 your_warrior 识别为类实例，而是将其识别为函数的声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:14:18.873

似乎您在调用 name 函数时忘记了括号：

```
your_warrior.warrior_name_function(); 
```

我还建议您简单地删除`Warrior`该类的析构函数：它没有任何需要清理的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:22:59.453

```
Warrior your_warrior(int health , int armor , int weapon); 
```

这一行声明了一个函数`named your_warrior`，它接受三个类型的参数`int`并返回一个类型的对象`Warrior`。

如果您删除三个`int`s，它将工作得更好。`<g>`

当然，在下一行中为函数调用添加括号。

# c# - Directory.GetLogicalDrives() 的多维数组

> ID：12287389
> 
> 赞同：0
> 
> 时间：2012-09-05T18:13:07.993
> 
> 标签：c#, arrays, multidimensional-array, directory

我有这个代码：

```
string[,] folders;
folders = new string[,] { Directory.GetLogicalDrives() , Directory.GetLogicalDrives() }; 
```

错误：`A nested array initializer is expected`

我该如何解决？我什么都试过了……

**注意：**我不能合并上面的两行代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:20:02.357

我认为您想要数组数组，而不是多维数组：

```
var folders = new string[][] { 
    Directory.GetLogicalDrives() , Directory.GetLogicalDrives() }; 
```

原因是 GetLogicalDrives 调用的结果大小不必匹配，并且仅在每次调用执行时才知道。

# node.js - NodeJS无法连接字符串和数字

> ID：12287391
> 
> 赞同：0
> 
> 时间：2012-09-05T18:13:08.983
> 
> 标签：node.js, express, redis, concatenation

我使用此代码获取保存在关键用户：their_email_id 中的用户 ID。

```
redis.get("user:" + email, function(err, reply) {
    if (reply != null) {
        id = reply;
        console.log(reply);
    }
}); 
```

这给了我`id`变量中的用户 ID。

现在我使用这个 ID 来查询用户的哈希：

```
redis.hgetall("user:" + id, function (err, reply) {
    console.log(reply);
}); 
```

在这里，我得到的答复为空。原因是关键不是变成这样的：

```
 user:0 
```

我得到这个：

```
 user:undefined 
```

现在我知道它成功返回了 ID，并且一切正常，除了将 ID 与“user:”字符串连接时，它失败了。

我也尝试使用 id.toString()，但 Express 显示找不到方法。为什么会发生这种情况？我需要一些图书馆吗？

我该如何解决这个问题？

谢谢

# 2d - Libdmtx lib 无法解码二维条码

> ID：12287392
> 
> 赞同：0
> 
> 时间：2012-09-05T18:13:12.587
> 
> 标签：2d, barcode, decoding

我目前正在使用 libdmtx 库从图像中解码 2D Datamatrix 条形码。当曲线形光反射接触条形码时，库无法解码 2D 条形码。到目前为止，从我的研究来看，我猜测每次反射都会触及/扭曲“L 形取景器图案”，即实心 L 形边框（方形条码的 2 个边缘，请参阅 Datamatrix Wiki）（对不起，我不允许发布图像，因为我是新用户）lib 无法识别 - 解码条形码。真的有人遇到过这样的问题吗？如果代码的查找器模式部分失败，我是否仍然可以解码条形码有什么想法吗？

我已经尝试了很多其他库，但它们在我的场景中都失败了。Libdmtx 是迄今为止最好的开源库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:37:12.943

您能否将显示此行为的示例图像发送给 Dragonfly logic dot com 的麦克风？

图像失真确实很难扫描，但容易失真和硬失真之间的差异可能很微妙，因此查看示例图像是一个很好的第一步。太糟糕了，不允许您上传，因此其他人可以从交换中受益。:(

# phpunit - PHPUnit 每次运行三次

> ID：12287397
> 
> 赞同：1
> 
> 时间：2012-09-05T18:13:32.953
> 
> 标签：phpunit, selenium-rc

这让我抓狂——每次我运行 PHPUnit，无论我的文件中有多少测试，它都会在套件中运行 3 次。如果我有 testOne 和 testTwo，它将像这样运行：

```
testOne
testTwo
testOne
testTwo
testOne
testTwo 
```

如果我只有一个测试，它将像这样运行：

```
testOne
testOne
testOne 
```

我已经浏览了我所有的主要文件、引导程序等文件（是的，有很多！）并且找不到任何可以指示它运行多个测试的东西，更不用说多次明确地尝试启动 Firefox。

使用典型的标题（这不是我经常使用的，只是作为一个例子）。

```
<?php
class Example extends PHPUnit_Extensions_SeleniumTestCase
{
protected function setUp()
  {
    $this->setBrowser("*chrome");
    $this->setBrowserUrl("http://localhost/");
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:07:30.910

这就是问题所在 - 标签下 phpunit.xml 中的代码注释不正确。Firefox 和 Chrome 的配置应该被取消，所以 PHPUnit 将其解释为运行该套件两次的命令。

出于某种原因，在我的盒子 (10.7.3) 上，无论我告诉 Selenium 使用哪种浏览器，都只会启动 Firefox。但这是另一个线程。麻烦检查的问题还不够。

# android - 单选按钮的 setChecked 不起作用

> ID：12287402
> 
> 赞同：1
> 
> 时间：2012-09-05T18:14:09.893
> 
> 标签：android

我试图 setChecked(true)

```
RadioButton rbOk = new RadioButton(this);
rbOk.setLayoutParams(ParamWCWC);
rbOk.setText("OK");
if(situacao.equals("ok")){
    rbOk.setChecked(true);
}; 
```

显示正常，但是有 3 个 RadioButton，并且只有一个被选中，并且在选中这个之后，我无法禁用它，即使我在同一个 RadioGroup 中选中了另一个并且选择重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:59:18.220

我在这篇文章中找到了解决方案：

[http://code.google.com/p/android/issues/detail?id=1772#c13](http://code.google.com/p/android/issues/detail?id=1772#c13)

我需要解决的是：

```
RadioGroup rgSituacao = new RadioGroup(this);
...
RadioButton rbOk = new RadioButton(this);
rbOk.setLayoutParams(ParamWCWC);
rbOk.setText("OK");

rgSituacao.addView(rbOk);

rbOk.setChecked(situacao.equals("ok")); 
```

将其绑定到 RadioGroup 后使用 setChecked。

# c# - MonoMac 上的本机发布错误，可能与事件有关

> ID：12287404
> 
> 赞同：2
> 
> 时间：2012-09-05T18:14:12.187
> 
> 标签：c#, macos, memory-leaks, mono, monomac

MonoMac 似乎在事件下泄漏对象，我的日志显示：

```
[NativeRelease ERROR]: type: MonoMac.Foundation.NSAsyncActionDispatcher handle: 6437120 count: 2 gchandle: 0
[NativeRelease ERROR]: type: MonoMac.Foundation.NSAsyncActionDispatcher handle: 27194624 count: 2 gchandle: 0
[NativeRelease ERROR]: type: MonoMac.Foundation.NSAsyncActionDispatcher handle: 47428288 count: 2 gchandle: 0 
```

但这并不能告诉我太多关于泄露的内容。任何人都知道我如何弄清楚哪些对象正在泄漏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T18:51:58.587

这是一条无害的消息，有关详细信息，请参阅[https://bugzilla.xamarin.com/show_bug.cgi?id=6045](https://bugzilla.xamarin.com/show_bug.cgi?id=6045)。

# c++ - 如何在 C++ 中计算和打印 3^9999？

> ID：12287406
> 
> 赞同：-4
> 
> 时间：2012-09-05T18:14:16.747
> 
> 标签：c++, numbers, exponential

有人可以解释如何让像 3^9999 这样的操作在 c++ 中工作，正如我发现的那样，如果数字太长会导致问题。我听说有办法解决它。（请不要建议任何外部库）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:53:05.517

把你的问题分成三个问题。

1）首先解决如何将很长的整数相乘。

2）`9999`变成二进制`10011100001111`。有 14 位。设置了 8 位。设置位（从末尾开始）意味着`9999 = 1 + 2 + 4 + 8 + 256 + 512 + 1024 + 8192`. 这些因素通常是有用的，因为`3^2 = 3^1 * 3^1`等等`n^(2^m) = n^(2^(m-1)) * n^(2^(m-1))`。您可以从 开始计算循环中的因子`3^1 = 3`，即进行 13 次乘法运算。

3)`3^9999 = 3^1 * 3^2 * 3^4 * 3^8 * 3^256 * 3^512 * 3^1024 * 3^8192`通过将因子乘以结果来计算。这使得 7 更多的乘法。

要计算 3^9999，您需要 20 个非常长的整数乘法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:21:29.577

由于您要求提供不依赖于库的解决方案，因此您将不得不以艰难的方式去做。

创建一个将两个数字数组相乘的函数。为此，您需要大约`log10(3)*9999`数字，或 4771。用全零和 3 初始化两个数组，然后将第一个数组乘以第二个数组 9998 次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T19:01:05.533

希望您不是在寻找优化...

```
int N = 9998;
int M = 5000;
int arr [M];

for ( int j = 0 ; j < M ; ++j )
        arr[j]=0;

arr[M-1] = 3;

for ( int i = 0 ; i < N ; ++i ) {

        for ( int j = 0 ; j < M ; ++j )
                arr[j] = arr[j]*3;

        for ( int j = M-1 ; j > 0 ; --j ) {
                arr[j-1] = arr[j-1] + arr[j]/10;
                arr[j] = arr[j]% 10;
        }
}

for ( int j = 0 ; j < M ; ++j )
        std::cout << arr[j]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T19:04:34.800

关于我如何让它变得更丑以便他的教授不会接受的任何想法？=]

```
#include <stdio.h>
#include <string.h>
int main()
{
    unsigned char ds[9999];
    unsigned char c;
    ds[0] = 3;
    bzero(ds+1, 9998);
    for(int p = 2; p <= 9999; p++)
    {
        c = 0;
        for(int d=0; d<p/2+1; d++)
        {
            ds[d] = ds[d] * 3 + c;
            c = ds[d] / 10;
            ds[d] = ds[d] % 10;
        }
    }
    int d = 9998;
    for(; d>=0; d--)
        if(ds[d] != 0)
            break;
    for(; d>=0; d--)
        printf("%d", ds[d]);
    printf("\n");
} 
```

# javascript - 网页如何读取给定目录的文件结构？

> ID：12287411
> 
> 赞同：0
> 
> 时间：2012-09-05T18:14:39.457
> 
> 标签：javascript, html, web-applications

我有一个包含多个文件的目录，该目录是服务器端 Web 应用程序的一部分。我还有一个 HTML 页面，我想在该页面上填充该目录中文件的名称。

我不需要访问这些文件的内容，而只需在每次页面加载时在页面上列出它们的名称。

这是可以通过Javascript或其他东西完成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:18:05.163

JavaScript（在客户端上运行）可以向服务器发出 HTTP 请求。它不能直接读取文件系统。

服务器可以生成您喜欢的任何数据格式的文件列表，并将其包含在 HTTP 响应中。默认情况下，大多数网络服务器会为 webroot 下没有索引文件的任何目录生成 HTML 格式的列表。不过，这不是最好的解析格式。

为此，您最好使用服务器端语言。

如果您想通过客户端 JavaScript 加载数据，您可以让该语言以 JSON 格式（或其他易于解析的格式）输出数据。

如果您不需要在页面视图中间动态加载它，那么您可以使用服务器端语言将其直接注入到您的页面模板中。

服务器端语言几乎可以是任何编程语言，包括 JavaScript，在这种情况下，您可能需要使用[文件系统模块](http://nodejs.org/api/fs.html)。

# c# - 我的 EF 查询有什么问题？

> ID：12287414
> 
> 赞同：2
> 
> 时间：2012-09-05T18:14:50.017
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

我有一个大问题。我不知道我的 LINQ 查询出了什么问题。这是完成工作的 SQL 查询：

```
SELECT     TOP (100) PERCENT MIN(DateTime) AS DateTime, ETAG
FROM         dbo.Table
GROUP BY ETAG, LEFT(DateTime, 10)
ORDER BY ETAG 
```

这个查询在执行时给了我大约 50k 的结果。我希望在 LINQ 中也一样。这是我尝试过的：

```
from d in Table
group d by new { d.ETAG, Date = d.DateTime.Value.Year + d.DateTime.Value.Month + d.DateTime.Value.Day } into g
orderby g.Key.ETAG
select g.OrderBy(e => e.DateTime).FirstOrDefault() 
```

当我执行此操作时，只需几分钟即可完成，并给我大约 9k 的结果。出了点问题，但我想不出是什么。请帮我解决这个问题...在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:20:24.040

根据您的两个查询，您的 LINQ 语句中的 group by 根本不同，因为您不是按实际日期分组，而是按年、月和日的整数和。

~~相反，试试这个：~~

 ~~```
from d in Table
group d by new { d.ETAG, Date = date.DateTime.Value.Date } into g
orderby g.Key.ETAG
select g.OrderBy(e => e.DateTime).FirstOrDefault() 
```~~  ~~**编辑**

不幸的是，由于实体框架的限制，上述查询将不起作用（即使它在 LINQ to SQL*中有效）。*事实上，使用实体框架进行 SQL 查询并没有有效的并行。使用 LINQ 表达式获得所需输出的唯一选择是`.ToList()`在分组和转换它们之前使用 a 捕获所有记录。不理想，但它会工作。

```
from d in Table.ToList()
group d by new { d.ETAG, Date = date.DateTime.Value.Date } into g
orderby g.Key.ETAG
select g.OrderBy(e => e.DateTime).FirstOrDefault() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:59:20.940

使用 .NET 4 或更高版本，Entity Framework 提供了几个专门用于日期值的实用程序函数。这可以帮助您克服第一个示例的障碍，并防止您在分组之前必须急切加载所有行。

```
from d in Table
group d by new { d.ETAG, Date = EntityFunctions.TruncateTime(d.DateTime) } into g
orderby g.Key.ETAG
select g.OrderBy(e => e.DateTime).FirstOrDefault(); 
```

**编辑：**

或者，如果您的目标是仅按字段的日期部分进行分组，您可以尝试：

```
from d in Table
let dt = d.DateTime
group d by new { d.ETAG, y = dt.Year, m = dt.Month, d = dt.Day } into g
orderby g.Key.ETAG
select g.OrderBy(e => e.DateTime).FirstOrDefault(); 
```

*参考：[http ://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/cb58ae5f-5db9-4054-92b6-a1bf63764574/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/cb58ae5f-5db9-4054-92b6-a1bf63764574/)*~~

# delphi - 如何释放 TList 的内容？

> ID：12287418
> 
> 赞同：4
> 
> 时间：2012-09-05T18:15:02.073
> 
> 标签：delphi, free, tlist, delphi-4

我在 Delphi 4 中有这段代码。我创建了 10 个类型的对象`T_Charge`（见下文），我将它们添加到`TList`名为`myList`. 该`T_Charge`类型引用了三个类型的对象`T_Platte`（见下文）。

释放所有 10 个对象的所有内存的正确方法是什么？因此，对于每个我想释放`P1`、`P2`、等的内存的对象`P3`，`F_Treated`以及其`myCharge`自身的内存。我尝试了一切，但不断出错。

```
procedure Test;
var 
  myList: TList;
  myCharge: T_Charge;
begin
  myList := TList.Create;

  for i := 0 to 9 do
  begin;
    myCharge := T_Charge.Create(...);
    myList.Add(myCharge);
  end;
  ...
end;

type
  T_Platte = class(TObject)
  private
    F_Nummer : Integer;
    F_Los    : Integer;
    F_Dicke  : Real;
    F_Lange  : Real;
    F_Breite : Real;
    F_QuenchCode : Integer;
    F_Geschwindigkeit : Real;
    F_Menge  : Integer;
    F_MengeInLos : Integer;
    F_Treated : Boolean;
  public
    constructor Create(inNummer, inLos: Integer; inDicke, inLange, inBreite, inGeschwindigkeit : Real; inQuenchCode,inMenge: Integer; inTreated: Boolean); overload;
    constructor Create(inPlatte: T_Platte); overload;
    destructor Destroy; override;

    property Nummer: Integer read F_Nummer write F_Nummer;
    property Los: Integer read F_Los write F_Los;
    property Dicke: Real read F_Dicke write F_Dicke;
    property Lange: Real read F_Lange write F_Lange;
    property Breite: Real read F_Breite write F_Breite;
    property QuenchCode : Integer read F_QuenchCode write F_QuenchCode;
    property Geschwindigkeit: Real read F_Geschwindigkeit write F_Geschwindigkeit;
    property Menge: Integer read F_Menge write F_Menge;
    property MengeInLos: Integer read F_MengeInLos write F_MengeInLos;
    property Treated: Boolean read F_Treated write F_Treated;

    function getPlattenRecord: string;
  end; // class T_Platte  

  T_Charge = class(TObject)
  private
    F_P1 : T_Platte;
    F_P2 : T_Platte;
    F_P3 : T_Platte;
    F_Treated : Boolean;
    F_Vmin : Real;
    F_Qty : Integer;
    F_RelationNext : Boolean;
  public
    constructor Create(inP1, inP2, inP3 : T_Platte; inTreated: Boolean; inVmin: Real; inQty: Integer; inRelationNext: Boolean);  overload;
    constructor Create(inCharge : T_Charge); overload;
    destructor Destroy; override;

    property P1: T_Platte read F_P1 write F_P1;
    property P2: T_Platte read F_P2 write F_P2;
    property P3: T_Platte read F_P3 write F_P3;
    property Treated : Boolean read F_Treated write F_Treated;
    property Vmin : Real read F_Vmin write F_Vmin;
    property Qty : Integer read F_Qty write F_Qty;
    property RelationNext : Boolean read F_RelationNext write F_RelationNext;

    function getChargeRecord: string;
  end; // class T_Charge

constructor T_Platte.Create(inNummer, inLos: Integer; inDicke, inLange, inBreite, inGeschwindigkeit: Real; inQuenchCode,inMenge: Integer; inTreated: Boolean);
begin
  F_Nummer := inNummer;
  F_Los := inLos;
  F_Dicke := inDicke;
  F_Lange := inLange;
  F_Breite := inBreite;
  F_Geschwindigkeit := inGeschwindigkeit;
  F_QuenchCode := inQuenchCode;
  F_Menge := inMenge;
  F_MengeInLos := 0;
  F_Treated := inTreated;
end;

constructor T_Charge.Create(inP1, inP2, inP3 : T_Platte; inTreated: Boolean; inVmin:  Real; inQty: Integer; inRelatio nNext: Boolean);
begin
  F_P1 := T_Platte.Create(inP1);
  F_P2 := T_Platte.Create(inP2);
  F_P3 := T_Platte.Create(inP3);
  F_Treated := inTreated;
  F_Vmin := inVmin;
  F_Qty := inQty;
  F_RelationNext := inRelationNext;
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T08:01:56.910

要释放列表对象，请创建您的列表并覆盖 TList.Notify()。

```
procedure THotFixList.Notify(Ptr: Pointer; Action: TListNotification);
begin
  inherited;
  if Action = lnDeleted then
    Tobject(Ptr).Free;
end; 
```

它将确保您在调用 TLIst.Delete、TList.Clear、TList.Free 时释放您的对象，而不必每次都自己迭代列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T18:32:26.953

将以下内容添加到析构函数中`T_Charge`：

```
destructor T_Charge.Destroy;
begin
  F_P1.Free;
  F_P2.Free;
  F_P3.Free;
  // Other code as needed
  inherited;
end; 
```

在释放列表之前，循环并删除每个`T_Charge`：

```
for i := 0 to myList.Count - 1 do
  TObject(myList[i]).Free;         // This will free the inner `T_Platt3` 
                                   // each `T_Charge` contains. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T12:42:55.480

特别是当列表应该包含类实例时，我认为您应该将`TObjectList`其用于该目的（[TObjectList）](http://docwiki.embarcadero.com/Libraries/en/System.Contnrs.TObjectList)。调用 的构造函数`TObjectList`，`Create(True)`告诉列表在列表被销毁或从中删除项目后释放所有包含的类实例。尽管如此，正如 Ken White 的回答中提到的，您仍然需要在 T_Charge 析构函数中释放 F_P1 等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-05T19:00:55.470

不要忘记对项目进行类型转换，因为它们包含一个没有类型的指针！

```
for i := 0 to myList.Count - 1 do
begin
  T_Charge(myList[i]).Free;  // Type cast
end; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T18:26:25.120

在销毁 myList 之前，您需要：

```
for i := 0 to myList.Count - 1 do  
begin;
  TObject(myList[i]).Free
end; 
```

在 T_Charge 的析构函数中，您需要释放 F_P1、F_P2 和 F_P3。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-04T08:23:51.277

类的小知识：TList vs TObjectList

TList 持有`Pointers`所以不知道如何释放任何`TObject`存储的

TObjectList hols `TObjects`，因此可以释放它们并自动执行

我最好的说法是：使用`TObjectList`而不是`TList`作为您的基类或类型声明。

样品：

```
Wrong: TMyListOfObjects=class(TList) ...
 Good: TMyListOfObjects=class(TObjectList) ...

Wrong: MyListOfObjects:TList;
 Good: MyListOfObjects:TObjectList; 
```

注意：`TList`在 unit上声明`classes`并`TObjectList`在 上声明`Contnrs`，这使得很多人使用`TList`并且对此一无所知（前段时间`TObjectList`我在互联网上阅读之前也是如此）。`TObjectList`

# asp.net-mvc-3 - 没有会话没有cookies？

> ID：12287419
> 
> 赞同：0
> 
> 时间：2012-09-05T18:15:03.327
> 
> 标签：asp.net-mvc-3

我在不使用会话和不使用 cookie 的情况下访问用户信息时遇到问题。如何在没有会话和没有 cookie 的情况下管理用户信息？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:20:50.653

假设您正在谈论 Web 浏览器和 HTTP：您不能。

HTTP 是一种**无状态**协议。用服务器端状态来重载它需要一些唯一标识请求者的方法。Cookie 是 Web 浏览器维护客户端状态的唯一方式。

[编辑注释]然而，我应该指出，可以想象在 URI 中嵌入有限数量的状态数据，作为 URI 的*查询*或*片段*部分的一部分。它是有限的，因为大多数（每个？）实现都对 URI 的最大长度施加了某种限制。此外，您的 Web 应用程序将需要确保状态数据从 URL 正确传播到 URL。为了安全起见，它应该被加密，以免 URI-twiddling 让您的网站被破解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:19:49.110

您可以使用 MySQL 数据库来存储用户信息。不幸的是，如果不使用会话变量，您将不得不在 url 变量中传递用户的凭据，例如 ?username=dave password=cat （请不要这样做），或者您只需要了解一些有关安全性和以正确的方式做事（首选）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T02:34:01.113

这似乎是一个不必要的要求^(下面的警告)，但我会试一试。

当用户登录时，向他们颁发一个安全令牌。将该令牌存储在数据库中。令牌应包含任意值（例如十六进制编码的 GUID），**而不是**名称或密码。数据库还存储令牌和实际用户 ID 之间的关系。令牌应该有一个到期日期。

将令牌与每个请求一起作为 URL 的一部分传递（ASP.Net 为无 cookie 会话执行此操作）。由于您不想使用会话状态，因此您必须将与用户相关的任何信息存储在其他地方，可能是数据库。每个页面上的每个 URL 都需要有令牌。

您还可以利用Web 浏览器中的[本地存储](https://developer.mozilla.org/en-US/docs/DOM/Storage)来存储非安全信息。

在 ASP.Net 中，会话在**某些**情况下是不切实际的，即使对于非常轻量级的对象也是如此。这是因为会话访问是如何序列化的；假设您有一个仪表板页面，其中充满了向需要了解会话相关信息的 WCF 端点发出请求的小部件。如果该端点使用会话状态，性能将受到影响，因为每个请求都将连续执行。

> ...如果对同一个会话发出两个并发请求（通过使用相同的 SessionID 值），第一个请求将获得对会话信息的独占访问权。第二个请求仅在第一个请求完成后执行。

[http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T02:54:02.870

每个页面上的隐藏输入都可以做到这一点，但是您将无法使用 POST 而不是 GET。这是非常不推荐的。

# c# - 命名空间引用的问题。C#'报告'

> ID：12287420
> 
> 赞同：2
> 
> 时间：2012-09-05T18:15:11.640
> 
> 标签：c#, .net, compiler-errors, namespaces

我正在对由我无法再联系的其他开发人员开发的应用程序进行一些维护。

该项目是在 Visual Studios 2008 中构建的，我现在只有 2010 年。完成“升级向导”后。我收到两个警告和大量错误，我不知道如何解决。

> 找不到引用的组件“Microsoft.ReportViewer.WinForms”。找不到引用的组件“Microsoft.ReportViewer.Common”。

如果有人能指出我正确的方向，那就太好了。我很难在护目镜上找到解决方案。

注意：这是一个独立的应用程序，而不是一个 Web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:20:33.397

引用路径已更改，在.Net版本框架中搜索程序集，并添加引用

添加引用并浏览到此目录：%programfiles%\Microsoft Visual Studio 10.0\ReportViewer\

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T04:03:13.397

我在这里遇到了同样的问题，但我通过从 Package Manager Consol 安装 MICROSOFT® REPORT VIEWER RUNTIME 解决了我的问题。

从 Visual Studio 中选择工具 -> Libraty 包控制台 -> 包管理器控制台。然后键入：PM >Install-Package Microsoft.ReportViewer。我的问题消失了

# javascript - 动态移除元素

> ID：12287422
> 
> 赞同：0
> 
> 时间：2012-09-05T18:15:21.140
> 
> 标签：javascript, html, dynamic

我正在尝试删除我动态创建的元素。这就是我创建它的方式...

```
var divTag = document.createElement("div");
divTag.id = "affiliation";
divTag.innerHTML = "Stuff Here"; 
```

我已经尝试了几种删除它的方法，但都没有成功。这是我到目前为止所拥有的。

```
var A = document.getElementById('affiliation');
A.parentNode.removeChild(A); 
```

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:19:28.063

如果你想使用**jQuery**，很容易删除：

```
$("#affiliation").remove(); 
```

对于普通的**JavaScript**，你可以使用这个：

```
var node = document.getElementById("affiliation");
if (node.parentNode) {
    node.parentNode.removeChild(node);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:21:30.263

你是附加到身体还是父母身上？

```
var divTag = document.createElement("div");
divTag.id = "affiliation";
divTag.innerHTML = "Stuff Here";
document.body.appendChild(divTag);

element = document.getElementById("affiliation");
element.parentNode.removeChild(element);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:22:17.813

这个片段对我来说很好。唯一的区别是我在正文中添加了“隶属关系”divTag

```
function insert() {
    var divTag = document.createElement("div");
    divTag.id = "affiliation";
    divTag.innerHTML = "Stuff Here";
    document.body.appendChild(divTag);
}
function remove() {
    var A = document.getElementById('affiliation');
    A.parentNode.removeChild(A);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T18:25:57.503

检查[Node.removeChild](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)

```
var A = document.getElementById("affiliation");
if (A.parentNode) {
    A.parentNode.removeChild(A);
} 
```

# iis - 无法在 32 位池上的 IIS8 中加载站点（WinSrv 2012 和 Sharepoint 2013）

> ID：12287423
> 
> 赞同：2
> 
> 时间：2012-09-05T18:15:33.153
> 
> 标签：iis, windows-server

我们有一个与 TFS 2010 交互的 WCF 服务，我们计划迁移到 TFS 2012，所以我们安装了一个服务器来测试它，服务器安装了以下内容：

```
Windows Server 2012
SQL Server 2012
SharePoint 2013
TFS 2012 
```

我为我的服务创建了一个站点并尝试运行，我收到以下消息：

```
Could not load file or assembly 'Microsoft.TeamFoundation.WorkItemTracking.Client.DataStoreLoader' or one of its dependencies. An attempt was made to load a program with an incorrect format. 
```

所以我将池更改为 32 位，但随后我收到了这样的问候：

```
The Module DLL 'C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\15\isapi\spnativerequestmodule.dll' could not be loaded due to a configuration problem. The current configuration only supports loading images built for a x86 processor architecture. 
```

并且知道我被困住了，我用谷歌搜索了那个 DLL，但没有找到任何东西，我创建了一个带有普通 HTML 页面的新站点，并且只在 64 位池上加载。

我检查了服务器上由 TFS 和 SharePoint 创建的网站，都是 64 位的。

我最好的猜测是它与 SharePoint 2013 有关，但我不确定。

关于如何使网站在 32 位池上运行的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T11:47:36.743

IIS7 支持并排运行 32 位和 64 位，因为它[现在已按 AppPool 进行配置](http://blogs.msdn.com/b/rakkimk/archive/2007/11/03/iis7-running-32-bit-and-64-bit-asp-net-versions-at-the-same-time-on-different-worker-processes.aspx)。

但是，虽然我不确定它是否是 SharePoint 2013 中受支持的配置，但有针对此错误的修复程序。

您可以使用以下命令将该 SharePoint 模块设置为仅在 64 位进程中运行：

```
appcmd.exe set config -section:system.webServer/globalModules /[name='SPNativeRequestModule'].preCondition:integratedMode,bitness64 
```

有关详细信息，请参阅[此站点](http://blogs.flexnetconsult.co.uk/colinbyrne/2012/11/11/RunningA32bitApplicationAlongsideSharePoint2013Problems.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:48:59.807

将其更改为 64 位模式应用程序池，但允许它加载 32 位 dll。

[http://help.webcontrolcenter.com/KB/a1114/how-to-enable-32-bit-application-pool-iis-7-dedicatedvps.aspx](http://help.webcontrolcenter.com/KB/a1114/how-to-enable-32-bit-application-pool-iis-7-dedicatedvps.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-05T18:27:06.550

就我而言，我最初将 32 位应用程序启用为 True，这就是所有问题开始的时候。为了解决这个问题，我在命令提示符下运行了 IISReset/noforce 并最终重新启动了机器。我只有在重新启动机器后才能重新启动它。

```
appcmd.exe set config -section:system.webServer/globalModules /[name='SPNativeRequestModule'].preCondition:integratedMode,bitness64 
```

注意：我使用的是 Windows 2008 R2 和 Sharepoint 2013。其他参考建议禁用 Rapid-Fail-Protection，但这对我来说没有意义。

# macos - 鼠标选择后如何从 tmux 输出复制到系统剪贴板？

> ID：12287432
> 
> 赞同：91
> 
> 时间：2012-09-05T18:16:03.273
> 
> 标签：macos, shell, command-line, tmux

现在要复制到系统剪贴板，我必须通过 tmux 窗口中的鼠标文本用`Shift`键进行选择。然后我必须运行这个命令：

```
tmux save-buffer - | reattach-to-user-namespace pbcopy 
```

是否有机会更轻松地保存到系统剪贴板？键绑定或更好地在 Shift 释放后自动执行此操作。

我的 tmux 配置：[https ://gist.github.com/3641580](https://gist.github.com/3641580)

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2013-11-07T18:20:35.213

如果您使用的是 iTerm2，您可以在 Tmux 会话中复制文本，按住`Option`键的同时拖动鼠标进行选择。

然后应该可以像往常一样用`Cmd`+将文本粘贴到任何地方。`V`在这里找到它：http://web.archive.org/web/20131226003700/http: [//ootput.wordpress.com/2013/08/02/copy-and-paste-in-tmux-with-mouse/](http://web.archive.org/web/20131226003700/http://ootput.wordpress.com/2013/08/02/copy-and-paste-in-tmux-with-mouse/)

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2016-08-09T11:29:20.900

如果您使用 iTerm2 3.x，您可以通过启用以下方式进行复制/粘贴工作`Applications in terminal may access clipboard`：

[![在此处输入图像描述](../Images/b527b4fc6b70abe70ab7492a55299fce.png)](https://i.imgur.com/aFWmaha.png)

只需用鼠标突出显示文本即可将其复制到 macOS 剪贴板中！无需`Option`按照接受者答案中的建议按下。

您还可以使用通常的`Cmd`+从 macOS 剪贴板粘贴到 tmux 中`V`。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2016-03-07T10:29:01.763

对于 os x，如果您使用应用程序“终端”。您可以关闭鼠标滚动并使用常用的复制/粘贴功能 (cmd+c/cmd+v)：

```
set-option -g mouse-select-pane off
set-option -g mouse-resize-pane off
set-option -g mouse-select-window off
set-window-option -g mode-mouse off 
```

或者您可以使用鼠标滚动并使用“fn 键”选择文本：

```
set-window-option -g mode-mouse on 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-09-20T19:13:19.340

这里回答了一个类似的问题：[https ://unix.stackexchange.com/questions/15715/getting-tmux-to-copy-a-buffer-to-the-clipboard](https://unix.stackexchange.com/questions/15715/getting-tmux-to-copy-a-buffer-to-the-clipboard)

在那里找到的解决方案：

```
# move x clipboard into tmux paste buffer
bind C-p run "tmux set-buffer \"$(xclip -o)\"; tmux paste-buffer"
# move tmux copy buffer into x clipboard
bind C-y run "tmux show-buffer | xclip -i" 
```

还要检查：[http ://awhan.wordpress.com/2012/04/18/tmux-copy-paste-with-mouse/](http://awhan.wordpress.com/2012/04/18/tmux-copy-paste-with-mouse/)

如果您设置了以下选项：

**鼠标选择面板**

**鼠标选择窗口**

您会注意到您根本无法选择文本。

> 解决方案是使用 shift 键。

```
hold down the shift key and then left click and drag across the target text. you must also hold down the shift key and then middle click in order to paste the text. 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2016-05-02T19:38:25.633

在使用 tmux 2.2 或更高版本的 OSX 上，将以下内容添加到您的 tmux.conf 文件中：

```
bind-key -t emacs-copy MouseDragEnd1Pane copy-pipe "pbcopy"
bind-key -t vi-copy MouseDragEnd1Pane copy-pipe "pbcopy" 
```

对于 tmux 2.4 版，由于他们好心地决定更改命令语法，您应该使用：

```
bind-key -T copy-mode MouseDragEnd1Pane send -X copy-pipe-and-cancel "pbcopy" 
```

请注意，您可能还需要使用`reattach-to-user-namespace pbcopy`代替 plain `pbcopy`。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-09-28T05:47:53.853

把它放在我的 ~/.tmux.conf 文件中对我有用：

```
bind y run-shell "reattach-to-user-namespace -l zsh -c 'tmux show-buffer | pbcopy'" 
```

我发现的所有其他潜在解决方案都是将某种空内容复制到 OSX 剪贴板。

唯一的问题是，这似乎在粘贴内容的末尾放置了一个回车符。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-11-23T00:27:04.863

按shift键然后鼠标点击！！检查此链接。 [http://awhan.wordpress.com/2012/04/18/tmux-copy-paste-with-mouse/](http://awhan.wordpress.com/2012/04/18/tmux-copy-paste-with-mouse/)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-06-28T15:25:30.333

按住鼠标左键，在窗格中选择文本并按住按钮。然后按“y”，它将选择保存在剪贴板中并退出选择/复制模式。

适用于 iTerm 3.1.beta.5、tmux 2.5 和以下配置：

```
### copy & paste -------------------------------------------------------
# Use vim keybindings in copy mode
setw -g mode-keys vi
# Setup 'v' to begin selection as in Vim
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
# Update default binding of `Enter` to also use copy-pipe
unbind -T copy-mode-vi Enter
bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy" 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-01-08T11:58:28.450

在macOS High Sierra 的应用程序中从窗口中选择带有`CMD`+`C`的文本后，我能够使用 + 解决这个问题`FN`。`mouse drag with left button down``tmux``Terminal`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-11-29T17:59:06.933

这是我用于`tmux`2.8 版、macOS Mojave 10.14.1 和 Terminal.app 的解决方案。

释放鼠标按钮后，这会在复制到系统剪贴板（以及`tmux`缓冲区）时删除选择：

```
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy" 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-10-19T20:36:30.160

# 一个强大的解决方案，适用于 mosh + tmux + vim + 嵌套会话的任意组合

在花了很多天解决这个问题之后，到目前为止，我发现的最强大的解决方案是 Suraj N. Kurapati[发布的解决方案](https://sunaku.github.io/tmux-yank-osc52.html)。该解决方案在本地使用（和不使用） tmux v3.2 和/或 vim ，以及使用（和不使用）远程使用**tmux**和/或**vim**，使用复制模式键和简单的鼠标选择。

如果结合 Mike Gulick 的（当前开放的）[拉取请求](https://github.com/mobile-shell/mosh/pull/1104)，所有这些组合也适用于**mosh**。

在 Mike 的解决方案被合并到 mosh 之前，您可以使用以下方法提取他的更改并在本地构建：

### Ubuntu：

```
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key C99B11DEB97541F0 \
&& sudo apt-add-repository https://cli.github.com/packages \
&& sudo apt update \
&& sudo apt install -y gh autoconf automake perl protobuf-compiler libprotobuf-dev libncurses-dev zlib1g-dev libutempter-dev libssl-dev pkg-config \
&& mkdir -p ~/tmp/mosh \
&& git clone https://github.com/mobile-shell/mosh ~/tmp/mosh \
&& cd ~/tmp/mosh \
&& gh pr checkout 1104 \
&& ./autogen.sh \
&& ./configure \
&& make \
&& sudo make install 
```

### 苹果系统：

我认为您需要先安装 Apple 的 Xcode/Developer 命令行工具（IIRC 现在可以通过简单的运行`gcc`和退出来完成），然后运行：

```
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)" \
&& brew install gh autoconf automake
&& mkdir -p ~/tmp/mosh \
&& git clone https://github.com/mobile-shell/mosh ~/tmp/mosh \
&& cd ~/tmp/mosh \
&& gh pr checkout 1104 \
&& ./autogen.sh \
&& ./configure \
&& make \
&& sudo make install 
```

### 通过这些更新，剪贴板的圣杯终于实现了！

但是，这是非常新的信息，因此我的这篇文章相当不稳定。所以：

如果出现以下情况，请修改我的帖子：

1.  我缺少依赖项等，或者
2.  `gh pr checkout 1104`不再需要执行Mike 的更改，因为它已合并到 mosh 中，或者
3.  不再需要从源代码构建，因为合并的更改已推送到 brew/apt/etc 包管理器。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-04-12T06:12:15.903

我今天使用 netcat 制作了一个非常简单的版本。

[https://github.com/base698/tmux-copy-paste-mac-osx](https://github.com/base698/tmux-copy-paste-mac-osx)

这是 tmux.conf：

```
bind -t vi-copy 'v' begin-selection
bind -t vi-copy 'y' copy-pipe 'nc localhost 5682'
bind p run-shell 'nc localhost 5683; nc localhost 5683 | tmux load-buffer -' \; paste-buffer 
```

在 1.8 中也可以与鼠标一起使用

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-04-06T19:16:17.543

在 macOS 终端 Tmux 上，从特定窗格复制：

1.  保持选项（光标变为十字准线）[见*下方]
2.  单击并拖动以选择文本
3.  正常复制/粘贴，使用 CMD-C/V

*您可能需要使用 CMD-R 切换“允许鼠标报告”（请参阅​​终端、视图-...）。我发现我经常将其切换为在 tmux 窗格内使用鼠标滚动或复制粘贴。

* * *

在我的`.tmux.conf`，我包括`set -g mouse on`

这是在 macOS Catalina 上，tmux 3.1c

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-12-10T14:00:46.470

monterey macosx 终端 2.21，默认设置通过 ssh 连接到一台运行 tmux 2.6 的机器，有几个窗格，tmux 配置就这么简单：

`set -g mouse on`

要复制 - 按住 `Fn`按钮并使用鼠标选择您需要的内容，然后按`⌘ Command + C`，等等，文本就在您的 mac 的缓冲区中。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-06-14T13:06:04.443

对于那些在 tmux 现在在 mac 中寻找选择如何工作的人：使用“fn”键选择、复制和粘贴。

# c# - 是否可以间接订阅事件？

> ID：12287434
> 
> 赞同：3
> 
> 时间：2012-09-05T18:16:22.667
> 
> 标签：c#, wpf, events, mvvm, subscription

目前，我已经实现了这个，我可以直接访问我想要订阅的类，但是如果我有一个我不能直接访问的类会发生什么？即X 触发的事件，Y 订阅了它。是否可以在不使用静态事件的情况下做到这一点？就像你有两个窗口，一件事发生在一个窗口上，你想在第二个窗口上触发一些事情。

例子：

```
Y (listens for event and DoSomething()) ---.
                                           |----Event
X (triggers event when something changes) -' 
```

当前代码：

```
public static class MyEvents {
    public delegate void FirstEventHandler();
}

public partial class MainWindow : Window {
    public MainWindow() {
        InitializeComponent();

        SecondaryWindow secondWindow = new SecondaryWindow();
        secondWindow.Show();

        secondWindow.secondaryWindowEvent += new MyEvents.FirstEventHandler(callEvent);
    }

    protected void callEvent() {
        MessageBox.Show("This is a MessageBox.");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T18:24:14.537

所以，我不得不在我不久之后使用的 WPF UI 中处理这个问题。出于多种原因，将 UI 的不同部分分开是很好的，但在实际应用程序中，它们通常需要相互通信，并且传递引用不是最佳选择。

我在我的应用程序中使用了[Event Aggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)类。它允许逻辑上分离的组件保持松散耦合，但仍然能够通过事件相互通信。这种方法为您省去了与静态事件相关的麻烦（静态事件必须在对象超出范围之前取消订阅，否则该对象将不符合垃圾回收条件）。

# windows-vista - 无法在命令提示符中粘贴文本

> ID：12287435
> 
> 赞同：0
> 
> 时间：2012-09-05T18:16:27.157
> 
> 标签：windows-vista, command-prompt, paste

粘贴似乎突然停止在我的 Vista 系统的命令窗口中工作。

当我右键单击命令提示符时，我没有得到选项。

在菜单列表中，我只得到框符号，而不是编辑、默认值和选项。

# java - 在 iText pdf 中显示缓冲图像

> ID：12287436
> 
> 赞同：0
> 
> 时间：2012-09-05T18:16:39.287
> 
> 标签：java, arrays, byte, itext, bufferedimage

我正在`byte[]`从 DB 中读取数据并将其转换为缓冲图像。

当我尝试显示图像时，我得到一个`NullPointerException`.

这是我坚持的代码部分：

```
 conn = access.getCon();
        sql = "select doc_size, mime_type_id, doc from endo_scope_doc where endo_scope_val_id ='"+idToProcess+"'";
        stmt = conn.prepareStatement(sql);
        ResultSet resultSet = stmt.executeQuery();
        while (resultSet.next()) {
            doc_size = resultSet.getLong(1);
            mime_type_id = resultSet.getInt(2);
            doc = resultSet.getBytes(3);
        }
    } catch (Exception ex) {
        System.out.println(this.getClass().getName()+"."+ex.getStackTrace()[0].getMethodName()+" 4: "+ ex);
        ex.printStackTrace();
        throw new Exception("Cannot execute data retrieval for photo with SQL: "+sql,ex);
    }

        BufferedImage bufferedImage = null;
          try {
        bufferedImage = ImageIO.read(new ByteArrayInputStream(doc));
    } catch (IOException e) {
        e.printStackTrace();
    }

        Image jpeg = Image.getInstance(bufferedImage, null);
        jpeg.scalePercent(40);
        jpeg.setAlignment(Image.LEFT);
        PdfPCell photoCell = new PdfPCell(jpeg); 
```

iText 使用`com.lowagie.text.Image`not `java.awt.Image`，所以我找不到转换`BufferedImage`为`Image`.

这是错误：

```
java.lang.NullPointerException
at java.awt.image.PixelGrabber.<init>(Unknown Source)
at com.lowagie.text.Image.getInstance(Unknown Source)
at com.lowagie.text.Image.getInstance(Unknown Source)
at iwa.printScopeValPDF.doServlet(printScopeValPDF.java:211)
at iwa.printScopeValPDF.doGet(printScopeValPDF.java:277)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:627)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter( 
```

# ios - Core Data + web service - 如何管理视网膜图像

> ID：12287438
> 
> 赞同：0
> 
> 时间：2012-09-05T18:16:46.800
> 
> 标签：ios, web-services, core-data, uiimage, retina-display

仅使用 Core Data，我可以读取 plist 文件并为这样的对象设置图像：

```
[itemObject setValue:[UIImage imageNamed:[item valueForKey:@"image"]] forKey:@"image"]; 
```

如果设备具有视网膜显示屏，此代码将自动选择应用程序包中文件的视网膜 (@2x) 版本。

如果我从 Web 服务获取图像，我该如何处理？我想我必须将 1x 和 2x 图像上传到网络服务。那么，我是否要为项目创建两个单独的字段，例如 image-lowRes 和 image-highRes，并在请求图像数据之前进行设备检查？我认为这是一种常见的情况，所以我希望有人可以从经验中给出一些关于解决此问题的最佳方法的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:00:19.773

您需要将设备密度传递给您的 Web 服务，并可能拥有三个版本的图像资产，1x、1.5x 和 2x。1.5x 是针对 Android 的。

使用 Android 命名约定，您可以将它们存储在 mdpi、hdpi 和 xhdpi 文件夹中，尽管这些细节完全取决于您。

# c# - 使用 GhostScript 将 pdf 转换为图像 - 如何引用 gsdll32.dll？

> ID：12287445
> 
> 赞同：4
> 
> 时间：2012-09-05T18:17:33.963
> 
> 标签：c#, asp.net, pdf, ghostscript

我正在尝试使用 GhostScript 从 pdf 创建图像。这是我的代码：

```
GhostscriptWrapper.ConvertToBMP(inputPDFFilePath, outputBMPFilePath); 
```

这是我的`GhostscriptWrapper`课：

```
public class GhostscriptWrapper
{
    public static void ConvertToBMP(string inputPath, string outputPath)
    {
        CallAPI(GetArgs(inputPath, outputPath));
    }

    private static void CallAPI(string[] args)
    {
        IntPtr ptr;
        CreateAPIInstance(out ptr, IntPtr.Zero);
        InitAPI(ptr, args.Length, args);
        Cleanup(ptr);
    }

    private static void Cleanup(IntPtr gsInstancePtr)
    {
        ExitAPI(gsInstancePtr);
        DeleteAPIInstance(gsInstancePtr);
    }        

    [DllImport("gsdll32.dll", EntryPoint="gsapi_new_instance")]
    private static extern int CreateAPIInstance(out IntPtr pinstance,
        IntPtr caller_handle);

    [DllImport("gsdll32.dll", EntryPoint="gsapi_delete_instance")]
    private static extern void DeleteAPIInstance(IntPtr instance);

    [DllImport("gsdll32.dll", EntryPoint="gsapi_exit")]
    private static extern int ExitAPI(IntPtr instance);                

    [DllImport("gsdll32.dll", EntryPoint="gsapi_init_with_args")]
    private static extern int InitAPI(IntPtr instance, int argc,
        string[] argv);

    private static string[] GetArgs(string inputPath, string outputPath)
    {
        return new string[] { "-dNOPAUSE", "-dBATCH", "-dSAFER",
            "-dTextAlphaBits=4", "-dGraphicsAlphaBits=4", "-sDEVICE=bmp16m",
             string.Format("-r{0}x{1}", 0x48, 0x48), "-dEPSCrop",
             string.Format("-sOutputFile={0}", outputPath), inputPath };
    }
} 
```

我的问题是，当我在页面上运行代码时，出现此错误：

> **无法加载 DLL 'gsdll32.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）**

我有实际的 dll 文件，我想也许我只需要添加对我的 bin 文件夹的引用，但是当我尝试这样做时，我得到了这个错误：

> **无法添加对“D:\gsdll32.dll”的引用。在组件中没有找到类型库**

所以我有点卡住了 - 我有 dll，但我不知道如何引用它。有人知道我需要做什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-16T20:36:35.710

在包管理器控制台中输入：Install-Package Ghostscript.Net

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T07:31:09.460

据我了解，您不能只“添加引用”到 DLL，除非 DLL 可能是为 C# 或 .NET 编写的，而 Ghostscript 不是，它是用 C 编写的。

您需要使用 Win32 API 调用“LoadLibrary”或任何 C#/.NET 等效项。

您的第一个错误看起来根本找不到 DLL，当您启动应用程序时，您是否在当前目录中获得了 DLL 的副本？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-20T07:41:21.217

尝试使用 dll 的完整路径，而不仅仅是名称。就像你的 dll 保持在

`D:\TestApplication\bin\gsdll32.dll`

然后，

`[DllImport("gsdll32.dll", EntryPoint="gsapi_new_instance")]`

上述声明将是

`[DllImport("D:\\TestApplication\\bin\\gsdll32.dll", EntryPoint="gsapi_new_instance")]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T17:09:49.833

查看其他一些托管的 Ghostscript 包装器：

*   [http://www.wibit.net/blog/integrating_ghostscript_c](http://www.wibit.net/blog/integrating_ghostscript_c)
*   [http://code.google.com/p/gouda/](http://code.google.com/p/gouda/)
*   [http://www.mattephraim.com/blog/2009/07/08/introducing-ghostscriptsharp/](http://www.mattephraim.com/blog/2009/07/08/introducing-ghostscriptsharp/)
*   [http://www.codeproject.com/Articles/317700/Convert-a-PDF-into-a-series-of-images-using-Csharp](http://www.codeproject.com/Articles/317700/Convert-a-PDF-into-a-series-of-images-using-Csharp)

另请查看其他 SO 文章：[C# Ghostscript Wrapper](https://stackoverflow.com/questions/1369681/c-sharp-ghostscript-wrapper)

# python - 什么决定了 PyQt 小部件的相对坐标？

> ID：12287460
> 
> 赞同：0
> 
> 时间：2012-09-05T18:18:13.653
> 
> 标签：python, pyqt, move

当我`move(x, y)`在 PyQt 中使用函数时，小部件移动到哪个确切坐标？我认为这是相对于某物的，但`x`与`y`什么有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:41:49.677

**X 和 Y 是相对于父部件的坐标空间**

这是一个可运行的小示例，它将向您展示移动如何相对于小部件的父级。父级可以是`None`，这意味着将浮动的顶级小部件。无论如何，它总是相对于父级的坐标一直到屏幕坐标。

```
from PyQt4 import QtCore, QtGui
from random import randint

from collections import deque

class Widget(QtGui.QWidget):

    def __init__(self):
        super(Widget, self).__init__()

        self.setObjectName("MainWindow")

        mainLayout = QtGui.QVBoxLayout(self)
        mainLayout.setSpacing(0)
        mainLayout.setMargin(20)

        self.widgets = deque()
        self.widgets.append(None)
        self.widgets.append(self)

        for i in xrange(3): 
            w = QtGui.QWidget()
            name = "widget%d" % i
            color = [str(randint(0,255)) for _ in xrange(3)]
            w.setObjectName(name)
            w.setStyleSheet("#%s { background: rgb(%s) }" % (name, ','.join(color)))
            mainLayout.addWidget(w)
            self.widgets.append(w)

        self.button = QtGui.QPushButton("Move", self)
        self.button.clicked.connect(self.random_move)

    def random_move(self):
        b = self.button
        parent = b.parent()
        pos = b.pos()
        name = parent and parent.objectName() or "None"
        print "\nOld Parent/Pos: ", name, (pos.x(), pos.y())

        new_parent = parent 
        while new_parent is parent:
            self.widgets.rotate(1)
            new_parent = self.widgets[0]

        self.button.setParent(new_parent)
        self.button.move(randint(0, 50), randint(0, 50))
        pos = b.pos()
        name = new_parent and new_parent.objectName() or "None"
        print "New Parent/Pos: ", name, (pos.x(), pos.y())
        self.button.show()

if __name__ == "__main__":

    app = QtGui.QApplication([])

    w = Widget()
    w.resize(800,600)
    w.show()

    app.exec_() 
```

每次您单击该按钮时，它都会重新指向不同的小部件，并使用随机移动。您将打印出以前的父级和位置与新的父级和位置。它将始终相对于该父**级的左上角**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:54:48.050

这取决于小部件是否有父级。如果是，则坐标是相对于父窗口小部件的；否则，它们是相对于桌面的。

有关更多详细信息，请参阅 的[文档`move()`](http://doc-snapshot.qt-project.org/4.8/qwidget.html#pos-prop)和[窗口几何概述](http://doc-snapshot.qt-project.org/4.8/application-windows.html#window-geometry)。

# c# - .NET Framework 客户端配置文件的 DataBinder.Eval 的替代方案？

> ID：12287462
> 
> 赞同：8
> 
> 时间：2012-09-05T18:18:16.460
> 
> 标签：c#, .net, .net-client-profile, databinder

我想拥有[DataBinder.Eval](http://msdn.microsoft.com/en-us/library/xyw1zse1)的功能（即执行运行时数据绑定）；但是，DataBinder.Eval 是在 System.Web 程序集中定义的，它在 .NET Framework 4 客户端配置文件中不可用。

我想知道 .NET Framework 4 Client Profile 程序集中是否有替代方案，或者 Mono DLL 文件是否可能具有此功能。

如果没有，我可能必须使用 Reflector 复制 DataBinder.Eval 的代码，但如果可能的话，我更喜欢使用现有的方法。

# git - 为什么我无法构建作为 git 包的一部分的 daemon.c？

> ID：12287463
> 
> 赞同：0
> 
> 时间：2012-09-05T18:18:18.270
> 
> 标签：git, gcc, build

git/daemon.c 中有一个 main() 函数，所以我尝试构建它但失败了，原因是什么

```
gcc daemon.c
In file included from daemon.c:1:
cache.h:11:10: error: #include expects "FILENAME" or <FILENAME> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T19:06:35.850

您缺少一大堆编译器标志，这些标志通常由构建基础架构的其余部分生成`autoconf`和使用。`Makefile`

看`cache.h`不到`INSTALL`.

# c - 如何打印结构的各个成员

> ID：12287466
> 
> 赞同：2
> 
> 时间：2012-09-05T18:18:29.937
> 
> 标签：c, time, struct, printf

我需要按以下格式打印当前日期：今天是星期三 - 2012 年 9 月 7 日。我知道我将不得不使用该结构

```
 struct tm* time_info; 
```

我可以使用 strftime() 轻松完成此操作，但是，我的任务是不使用 strftime() 并使用 printf 语句直接提取结构的成员。我似乎无法让它正常工作。有什么线索吗？这是我当前的代码：

```
 #include <stdio.h>
 #include <sys/types.h>
 #include <time.h>
 #include <stdlib.h>

 /* localtime example */
 #include <stdio.h>
 #include <time.h>

 int main (void)
 {
 time_t t; 
 char buffer[40]; 
 struct tm* tm_info; 

 time(&t); 
 tm_info = localtime(&t);
 strftime(buffer, 40, " Today is %A - %B %e, %Y", tm_info); 
 puts(buffer); 

  return 0;
} 
```

代替

```
 strftime(buffer, 40, " Today is %A - %B %e, %Y", tm_info); 
```

我需要

```
 printf("Today is %s, struct members info in the correct format); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T18:26:54.333

struct tm 至少有这些[成员](http://pubs.opengroup.org/onlinepubs/009696699/basedefs/time.h.html)

```
int tm_sec 秒 [0,60]。
int tm_min 分钟 [0,59]。
int tm_hour 小时 [0,23]。
int tm_mday 日期 [1,31]。
int tm_mon 一年中的月份 [0,11]。
int tm_year 自 1900 年以来的年份。
int tm_wday 星期[0,6]（星期日=0）。
int tm_yday 一年中的某一天 [0,365]。
int tm_isdst 夏令时标志。

```

所以现在你可以做例如

```
printf("Today is %d - %d %d, %d", tm_info->tm_wday, 
                                  tm_info->tm_mon,
                                  tm->tm_mday,
                                  1900 + tm_info->tm_year); 
```

这当然会将月份和星期几打印为数字，我将由您来创建一个简单的查找表来获取匹配的英文单词。使用数组，以便您可以将例如索引 0 映射到 "Sunday" ，将索引 1 映射到 "Monday" 等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T18:24:12.643

您可以使用 `-> 取消引用运算符访问结构的各个元素：

```
printf("Time is %02d:%02d:%02d\n", tm_info->tm_hour, tm_info->min, tm_info->tm_sec); 
```

`struct tm` [您可以在此处](http://pubs.opengroup.org/onlinepubs/7908799/xsh/time.h.html)找到所有必填字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:22:30.357

您需要单独传递每个成员[`struct tm`](http://www.cplusplus.com/reference/clibrary/ctime/tm/)：

```
printf("Hour: %d  Min: %d  Sec: %d\n",
    tm_info->tm_hour,
    tm_info->tm_min,
    tm_info->tm_sec
); 
```

# django-models - django-tastypie：如何从 ManyToMany 关系中只获取一个对象？

> ID：12287469
> 
> 赞同：0
> 
> 时间：2012-09-05T18:18:46.160
> 
> 标签：django-models, tastypie

这是我的菜单模型：

```
class Menu(models.Model):
    name = CharField(max_length=255)
    shop = ForeignKey(Shop)
    is_active = BooleanField(default=False) 
```

我需要的是，在 ShopResource 中， ShopResource.menu 仅返回活动的 Menu 对象。因为总是有 1 个活动的 Menu 对象。

在 ShopResource 中，我正在尝试：

```
def dehydrate(self, bundle):
    bundle.data['menu'] = bundle.obj.menu_set.get(is_active=True)
    return bundle 
```

但 ShopResource.menu 是活动菜单对象的字符串表示形式。我猜，我需要序列化一些东西。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:37:07.567

由于您没有提供资源的任何详细信息（即资源的源代码），因此很难准确地确定您需要什么以及您目前的情况。

但是我认为，为了获得您需要的东西，您可能需要将属性参数指定为可调用的，如下所示：

```
attribute=lambda bundle: Menu.objects.filter(shop=bundle.obj, active=True) 
```

这允许过滤 M2M 关系中的对象。

Tastypie 并没有说太多（请参阅[Tastypie 文档](http://django-tastypie.readthedocs.org/en/latest/fields.html#tomanyfield)），但希望这能让您入门。

# c++ - Microsoft Visual C++ 是否没有使用带有浮点数的 C/C++ 调用约定？

> ID：12287471
> 
> 赞同：0
> 
> 时间：2012-09-05T18:19:02.310
> 
> 标签：c++, floating-point, x86, calling-convention

我一直在为我的编译器项目研究浮点数，特别是如何将它们从十进制表示法转换为字节。我确实找到了所有问题的答案，但[这个 YouTube 视频](http://www.youtube.com/watch?v=9lIA0aPYar8 "YouTube")让我很担心。

这家伙很好地解释了 SSE 和指令集，我确实理解了所有内容，但他也`Microsoft's Visual C++`提到`_stdcall`在`floats`. 这对我来说太糟糕了，因为我计划在我自己的编译器中使用 C 调用约定，当然也可以调用 extern 函数。

基本问题：我是否必须担心这一点，或者这是真的吗？

主要方面是 Visual C++ 在将代码导出到 DLL 时是否也这样做，因为这可能会成为一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:08:05.037

正如 MSalters 在评论中指出的那样，没有“C/C++ 调用约定”之类的东西。C 和 C++ 的调用约定取决于平台（编译器、运行时、操作系统和硬件），并且在 C 或 C++ 标准中的任何地方都没有提及。

听起来你想使用`__stdcall`，据我所知，这与任何实际标准无关，尽管它的名字。

# c# - 使用 Spring .NET 将依赖项注入 MVC 控制器

> ID：12287472
> 
> 赞同：5
> 
> 时间：2012-09-05T18:19:06.193
> 
> 标签：c#, .net, asp.net-mvc, dependency-injection, spring.net

控制器中的对象在运行时没有被注入。

网络配置：

```
 <sectionGroup name="spring">
        <section name="context" type="Spring.Context.Support.ContextHandler, Spring.Core" />
        <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core" />
    </sectionGroup> 
```

. . .

```
<!-- Spring Context Configuration -->
<spring>
    <context>
        <resource uri="config://spring/objects"/>
    </context>
    <objects configSource="App_Config\Spring.config" />
</spring>
<!-- End Spring Context Configuration --> 
```

弹簧配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net">

    <!-- Crest is the WCF service to be exposed to the client, could not use a singleton -->

    <object id="TestController" type="Project.Controllers.TestController, Project" singleton="false">
        <property name="ObjectA" ref="ObjectImpl"/>
    </object>

    <object id="ObjectImpl" type="Project.Code.Implementations.ClassA, Project" singleton="false" />

</objects> 
```

测试控制器：

```
public class TestController: Controller
    {
        // this object will be injected by Spring.net at run time
        private ClassA ObjectA { get; set; } 
```

问题：

> 在运行时，ObjectA 不会被注入并保持为空，这会导致整个代码出现空异常。

替代方案：我可以手动初始化 Spring 对象并使用以下代码获取它的对象。

```
 var ctx = ContextRegistry.GetContext();
        var objectA = ((IObjectFactory)ctx).GetObject("ObjectImpl") as ClassA; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T19:17:06.323

事实证明，我错过了 MVC 的 Spring 实现的一个非常重要的部分。

我对这个问题的解决方案是添加一个实现 IDependencyResolver 的 DependencyResolver。

依赖解析器：

```
public class SpringDependencyResolver : IDependencyResolver
{
    private readonly IApplicationContext _context;

    public SpringDependencyResolver(IApplicationContext context)
    {
        _context = context;
    }

    public object GetService(Type serviceType)
    {
        var dictionary = _context.GetObjectsOfType(serviceType).GetEnumerator();

        dictionary.MoveNext();
        try
        {
            return dictionary.Value;
        }
        catch (InvalidOperationException)
        {
            return null;
        }
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
            return _context.GetObjectsOfType(serviceType).Cast<object>();
    }
} 
```

全球.asax.cs：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);

        DependencyResolver.SetResolver(new SpringDependencyResolver(ContextRegistry.GetContext()));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:50:52.853

您可以实现自己的`IDependencyResolver`，就像您在回答中建议的那样。但请注意，自 (iirc) 版本 1.3.1 以来，Spring.NET 内置了对 asp.net mvc [2.0](http://www.springframework.net/doc-latest/reference/html/web-mvc.html)和[3.0](http://www.springframework.net/doc-latest/reference/html/web-mvc3.html)的支持。Spring.net 2.0（[在 NuGet 上提供预发行版](https://www.nuget.org/packages/Spring.Web.Mvc4)）也内置了对 4.0 版的支持。考虑改用这些库。

您可能有兴趣将您`SpringDependencyResolver`的[产品与 Spring.net 团队提供的产品进行](https://fisheye.springsource.org/browse/spring-net/src/Spring/Spring.Web.Mvc3/SpringMvcDependencyResolver.cs?hb=true)比较。

# javascript - HTML：将表单从 http 发布到 https

> ID：12287473
> 
> 赞同：1
> 
> 时间：2012-09-05T18:19:16.473
> 
> 标签：javascript, asp.net, html

我们在[http://soAndSo.com/path/abc.aspx](http://soAndSo.com/path/abc.aspx)页面上有这段代码：

```
<form id="MainForm" name="MainForm" method="post" action="xyz.aspx"> 
```

现在我们需要将用户重定向到[https://soAndSo.com/path/xyz.aspx](https://soAndSo.com/path/xyz.aspx)。问题是我们不能使用完整的 URL，因为我们需要在所有环境中使用相同的代码。知道我们如何使用 html 和 javascript 来实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:22:21.357

在纯 HTML 中无法做到这一点。

使用客户端 JavaScript，您`document.getElementById('MainForm').action = somevalue;`可以`somevalue`根据`location.href`.

一般来说，最好使用服务器端语言来实现这一点。

但是：在 HTTP 页面上输入的数据**并不安全**。它将在通过 HTTPS 传输之前受到保护，但包含表单的 HTTP 页面在传输**给**用户的过程中可能会受到干扰（例如，提交将被发送到不同的服务器）。

您应该从当前托管文档的 HTTP URI 重定向到`<form>`HTTPS 上该文档的副本。

# linux - 为什么只有 debian 返回 127.0.0.1

> ID：12287474
> 
> 赞同：2
> 
> 时间：2012-09-05T18:19:22.293
> 
> 标签：linux, dns

我创建了一部分获取本地主机和当前 IP 地址的代码，我在 windows、linux( `opensuse`、`debian`)、​​mac 上尝试这个，每个人都返回他的 IP 地址，除了返回的 debian`127.0.0.1`并且我连接到互联网。

因为我期望以下地址

```
192.168.1.1
192.168.1.2
192.168.1.3
192.168.1.4 
```

任何帮助。

我的代码是用 java 编写的，并在不同的平台上进行了测试。

我`inetaddress`在java中使用类来编写代码

编辑 ：

sbin/ipconfig 输出

```
eth0      Link encap:Ethernet  HWaddr 00:1e:33:e0:56:af  
          inet addr:192.168.1.3  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::21e:33ff:fee0:56af/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:10549 errors:0 dropped:0 overruns:0 frame:0
          TX packets:12135 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:8705530 (8.3 MiB)  TX bytes:1857590 (1.7 MiB)
          Interrupt:20 Memory:fc600000-fc620000 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:270 errors:0 dropped:0 overruns:0 frame:0
          TX packets:270 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:22696 (22.1 KiB)  TX bytes:22696 (22.1 KiB)

vmnet1    Link encap:Ethernet  HWaddr 00:50:56:c0:00:01  
          inet addr:192.168.68.1  Bcast:192.168.68.255  Mask:255.255.255.0
          inet6 addr: fe80::250:56ff:fec0:1/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:159 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

vmnet8    Link encap:Ethernet  HWaddr 00:50:56:c0:00:08  
          inet addr:172.16.79.1  Bcast:172.16.79.255  Mask:255.255.255.0
          inet6 addr: fe80::250:56ff:fec0:8/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:45 errors:0 dropped:0 overruns:0 frame:0
          TX packets:160 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wlan0     Link encap:Ethernet  HWaddr 70:1a:04:a5:86:5a  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B) 
```

等/主机

```
127.0.0.1 localhost
127.0.1.1 debiam.domain debiam

# The following lines are desirable for IPv6 capable hosts
::1 ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters 
```

关于 src 代码它只是`inetaddress`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:24:14.320

根据具体的实现，它将取决于您在 linux 中检查的接口。lo 接口将为您提供 127.0.0.1。您可能有一个像“eth0”或“eth3”这样的接口，它使用您预期的 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:56:32.633

通过这个在 linux 中的推荐

```
ifconfig 
```

你给这个细节

```
eth0      Link encap:Ethernet  HWaddr xx:xx:xx:xx  
      inet addr:192.168.1.200  Bcast:192.168.1.255  Mask:255.255.255.0
      inet6 addr: fe80::1e6f:65ff:fed5:8a16/64 Scope:Link
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
      RX packets:3363918 errors:0 dropped:0 overruns:0 frame:0
      TX packets:1892239 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000 
      RX bytes:4890880074 (4.8 GB)  TX bytes:150386146 (150.3 MB)
      Interrupt:43 Base address:0xa000 

lo        Link encap:Local Loopback  
      inet addr:127.0.0.1  Mask:255.0.0.0
      inet6 addr: ::1/128 Scope:Host
      UP LOOPBACK RUNNING  MTU:16436  Metric:1
      RX packets:160038 errors:0 dropped:0 overruns:0 frame:0
      TX packets:160038 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:0 
      RX bytes:64218501 (64.2 MB)  TX bytes:64218501 (64.2 MB)

wlan0     Link encap:Ethernet  HWaddr xx.xx.xx.xx.xx.xx  
      UP BROADCAST MULTICAST  MTU:1500  Metric:1
      RX packets:0 errors:0 dropped:0 overruns:0 frame:0
      TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000 
      RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B) 
```

ip 127.0.0.1 在 lo(loopback , localhost) 接口中，但在另一个接口中，例如 eth0 你的 ip 是 xxx.xxx.xxx.xxx 或 ipv6 。

# java - 方法级单例实例线程安全吗？

> ID：12287478
> 
> 赞同：1
> 
> 时间：2012-09-05T18:19:36.720
> 
> 标签：java, multithreading, thread-safety, singleton

对 obj 以下线程的操作是否安全？我知道方法级别的变量和实例都在每个线程的堆栈上——但我不确定当局部变量是单例时会发生什么。foo() 在 web 服务调用中被调用。我很好奇这是否是线程安全的？

```
public void foo() {
    SomeObject obj = getSomeObject();  
    obj.doSomething();   // Would this be thread safe?
}

private SomeObject getSomeObject() {
    // returns singleton
    SpringContext.getBean("someObject");
}

class SomeObject {
    int x;
      ...

    // Not synchronized
    public void doSomething() {

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T18:22:06.363

这取决于您所说的“线程安全”是什么意思。如果`SomeObject.doSomething()`以不安全的方式改变实例，那么不，它不安全。两个不同的线程可以获得对同一个对象的引用。

基本上，除非`SomeObject`设计为同时从多个线程中使用，否则您不应该将其设为单例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T18:21:22.963

只有当`SomeObject`它本身是线程安全的时，它才是线程安全的。例如，如果您读取并可以更改调用`x`中的值，`doSomething()`那么除非它被适当地锁定，否则它将不是线程安全的。

如果不了解更多信息`SomeObject`，就无法准确判断您是否会遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:24:02.137

当您进行任何静态引用时，方法/线程局部性可能会完全丢失。由于引用是静态的，指向静态引用的本地字段不在线程堆栈上，它实际上可能被其他线程引用。

如果对象是全局分配的而不是线程局部的，则您具有相同的线程安全效果。

```
final SomeObject obj = getSomeObject();
public void foo() {
    obj.doSomething();  
}

private SomeObject getSomeObject() {
    // returns singleton
    SpringContext.getBean("someObject");
} 
```

# database - clojure.java.jdbc 中缺少必需的参数

> ID：12287480
> 
> 赞同：8
> 
> 时间：2012-09-05T18:19:40.480
> 
> 标签：database, jdbc, clojure

我一直`db-spec`在为 clojure.java.jdbc 中的 s 问题而烦恼。我想知道最近是否有一些行为发生了变化，因为直到最近才发生了与此几乎相同的事情。

我的 db-spec 如下所示：

```
(defn prod []
  "Yes, I've verified all of the loaded properties are accurate for the connection"
  { :classname (get-property "acedia.bbts")
  :subprotocol (get-property "acedia.bbts.subprotocol")
  :subname (str "@" (get-property "acedia.bbts.dev.host") ":" (get-property "acedia.bbts.dev.port") ":" (get-property "acedia.bbts.dev.sid"))
  :user (get-property "acedia.bbts.dev.user")
  :password (get-property "acedia.bbts.dev.password")}) 
```

然后在 REPL：

```
user => (prod)
{:classname "oracle.jdbc.driver.OracleDriver", :subprotocol "oracle", :subname "@hostname:1521:bbts", :user "user", :password "pass"}

user=> (with-connection bbts-dev (with-query-results rs ["select * from customer where rownum < 10"] (dorun (map #(println (:firstname %)) rs))))

user => (use 'clojure.stacktrace)
nil
user => (e)
java.lang.IllegalArgumentException: db-spec acedia.db.bbts$prod@4d24bd93 is missing a required parameter
at clojure.java.jdbc.internal$get_connection.invoke (internal.clj:147)
  clojure.java.jdbc.internal$with_connection_STAR_.invoke (internal.clj:154)
  user$eval1116.invoke (NO_SOURCE_FILE:1)
  clojure.lang.Compiler.eval (Compiler.java:6465)
  clojure.lang.Compiler.eval (Compiler.java:6431)
  clojure.core$eval.invoke (core.clj:2795)
  clojure.main$repl$read_eval_print__5967.invoke (main.clj:244)
  clojure.main$repl$fn__5972.invoke (main.clj:265)
nil 
```

我也不知道它指的是什么`NO_SOURCE_FILE`。我已经验证了 oracle 驱动程序也可以访问、加载等。db-spec 中可能缺少什么参数？

注意：我对 MS SQL Server 也有同样的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T19:03:09.917

问题在于它`prod`是一个函数，因此要么将 prod 更改为，要么`(def prod {all props here})`在需要时调用 prod 函数：`(with-connection (prod) (with-query-results`

# objective-c - 为什么没有为这些图像找到正确的 pathForResource ？

> ID：12287482
> 
> 赞同：0
> 
> 时间：2012-09-05T18:19:45.273
> 
> 标签：objective-c, ios, nsbundle

我的资源文件夹中有图像“hit_circle_0.png”到“hit_circle_19.png”，但由于某种原因，这段代码从未通过“找到”的测试令人讨厌的是我有完全相同的函数在它下面的另一种方法中工作. 这些文件在“复制捆绑资源”中

```
NSMutableArray *hitCircle = [[NSMutableArray alloc]init];
for (int i = 0; i < 20; i++) {

    NSString *name = [NSString stringWithFormat:@"hit_circle_%i", i];
    NSString *filePath= [[NSBundle mainBundle] pathForResource:name ofType:@"png"];

    if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]){
        NSLog(@"file %@ was found", filePath);
    } else{
        NSLog(@"%@ not found", filePath);
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T00:10:12.400

只是为了好玩，我进入查找器并将其中一个文件重命名为完全相同的名称并加载。然后我做了其他的 - 只是将它们重命名为相同的名称。我看了看，文件名前后没有任何奇怪的字符或空格。所以现在它们都可以很好地加载到模拟器中的数组中。我还没有弄清楚为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:37:46.663

我几乎可以肯定你正在寻找错误的子目录，你需要使用类似的东西：

```
NSString *filePath= [[NSBundle mainBundle] pathForResource:name ofType:@"png" inDirectory:@"Hit_Circles"]; 
```

或者，如果它只是在 Documents 目录中，您可以使用它来获取它，然后附加您的文件名：

```
NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 
```

# javafx-2 - 以编程方式内联控制 lineCharts 中的符号等

> ID：12287484
> 
> 赞同：4
> 
> 时间：2012-09-05T18:20:00.590
> 
> 标签：javafx-2

我有一个 JavaFX 应用程序，我希望用户能够在 lineChart 中控制符号、线条样式等。我不想创建多个样式表，而是想将此功能构建到 Java 代码中。感谢Jewelsea之前发布的优秀示例，我可以动态更改线条样式，太棒了！但我无法更改默认符号样式。

我不清楚在对 node.setStyle 的调用中可以逐字内联使用多少 .css 语句。即，我看到'-fx-*' 命令在Java 代码中工作。但是 .css 文件中的符号是用不同的语法定义的，仅仅将 css 行插入到我的 Java 代码中是行不通的。

这是我的代码中的一个示例：

```
StringBuilder styleString = new StringBuilder();    
            // do some stylin'
    switch (getLineStyle.getValue().toString())  {
        case "Line and points":
            styleString.append("-fx-stroke: blue; -fx-stroke-width: 2; ");
            styleString.append(
                    ".chart-symbol {-fx-background-color: blue; -fx-background-radius: 3px;}");
            engChart.setCreateSymbols(true);
            break;

        case "Line only":
             styleString.append("-fx-stroke: blue; -fx-stroke-width: 2; ");
             engChart.setCreateSymbols(false);
            break; 
```

在“线和点”的情况下，我可以使用此代码控制颜色和宽度，但控制符号的尝试失败了。我从这里获取了语法：

[http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#introscenegraph](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#introscenegraph)

如果有更好的参考来执行这种内联控制，我会很高兴知道它是什么。

谁能告诉我如何正确地操作符号，内联？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T19:11:45.283

您不能在样式字符串中附加样式类定义。您只能在 css 文件中定义样式类。因此，创建并[加载您自己的 css 文件](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm)并覆盖现有的符号样式或创建您自己的样式。

JavaFX 2.2的[默认样式表](http://hg.openjdk.java.net/openjfx/2.2/master/rt/raw-file/tip/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/caspian/caspian.css)包含以下定义：

```
.chart-line-symbol {
    -fx-background-color: #f9d900, white;
    -fx-background-insets: 0, 2;
    -fx-background-radius: 5px;
    -fx-padding: 5px;
}
.default-color0.chart-line-symbol { -fx-background-color: #f9d900, white; }
.default-color1.chart-line-symbol { -fx-background-color: #a9e200, white; }
.default-color2.chart-line-symbol { -fx-background-color: #22bad9, white; }
.default-color3.chart-line-symbol { -fx-background-color: #0181e2, white; }
.default-color4.chart-line-symbol { -fx-background-color: #2f357f, white; }
.default-color5.chart-line-symbol { -fx-background-color: #860061, white; }
.default-color6.chart-line-symbol { -fx-background-color: #c62b00, white; }
.default-color7.chart-line-symbol { -fx-background-color: #ff5700, white; } 
```

因此，要么提供你自己的 .chart-line-symbol 定义，要么向你的图表添加一个新的样式类，例如`chart.getStyleClass().add("custom-chart")`，然后在你的 css 文件中定义一个自定义图表符号。

```
.custom-chart .chart-line-symbol {
    -fx-background-color: #f9d900, firebrick;
    -fx-background-radius: 0px;
} 
```

还有[其他](https://gist.github.com/1422628) [方法](https://forums.oracle.com/forums/thread.jspa?threadID=2411524)可以实现图表符号的自定义样式，但最好只使用 css，除非它真的不能用于您的用例。

# javascript - 如何有效地创建多维 javascript 数组？

> ID：12287490
> 
> 赞同：0
> 
> 时间：2012-09-05T18:20:21.823
> 
> 标签：javascript, arrays, multidimensional-array

我需要存储类似这样的信息：

```
tag_array['design1']['0'][0]['x'] = 100;
tag_array['design1']['0'][0]['y'] = 100;
tag_array['design1']['0'][0]['w'] = 710;
tag_array['design1']['0'][0]['h'] = 332; 
```

如果它是 PHP，这将起作用，但它不适用于 javascript。

如何以正确的 javascript 语法创建相同的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:24:15.187

在 PHP 中，您可以这样做，因为它也会生成父元素（它实际上会引发警告）。在 JavaScript 中，它会出错，因为父元素不存在。

与其那样做，不如像这样一次完成：

```
var tag_array = {
    design1: {
        '0': [{
            x: 100,
            y: 100,
            w: 710,
            h: 332
        }]
    }
}; 
```

这应该给你你想要的结构。

**更新**：答案已更新，以反映第一个`0`可以是字符串的事实。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T18:56:23.393

如果您想以编程方式执行此操作，那么因为 JavaScript 要求您具有这种类型的结构

```
tag_array = {};
tag_array['design1'] = {};
tag_array['design1']['0'] = [];
tag_array['design1']['0'][0] = {};
tag_array['design1']['0'][0]['x'] = 100; 
```

您可以创建一个`prototype`函数来为您创建对象/数组结构

```
Object.defineProperty(Object.prototype, 'addDimensions', { value: function(){
    var prop = arguments[0];
    if(this[prop] !== undefined){
        if(typeof this[prop] !== 'object') throw 'Property "'+prop+'" is already defined.'
    }else{
        if(arguments.length > 1 && ~~arguments[1] === arguments[1] && arguments[1] >= 0) this[prop] = [];
        else this[prop] = {};
    }
    if(arguments.length > 1){
        this[arguments[0]].addDimensions.apply(
            this[arguments[0]],
            Array.prototype.slice.call(arguments,1)
        );
    }
    return this;
},
enumerable: false }); 
```

并在一个空对象上调用它`{}`

```
var myArrayLikeObject = ({}).addDimensions('design1','0',0); // {design1: [ [ {} ] ] } 
```

或数组`[]`（仅当第一个 arg 是整数时）

```
var myMultiArray = [].addDimensions(0,'hi',0); // [ {hi: [ {} ] } ] 
```

或在现有数组或对象上

```
var a = [0,1,2];
a.addDimensions(3,0); // a = [0, 1, 2, [ {} ] ] 
```

# drupal-6 - 如何将drupal视图内容加载到同一页面上的div中

> ID：12287492
> 
> 赞同：0
> 
> 时间：2012-09-05T18:20:23.057
> 
> 标签：drupal-6

我在我的网站上有一个页面，该页面在中心包含一个 div，在右侧我有一个视图，其中显示 4 个框都是在由标题、副标题、摘要和正文形成的相同内容类型下创建的，但我不想要在右侧框中显示正文。我需要当我单击任何标题时，这些框的摘要以在同一页面的 div 中显示相应单击框的正文，每次单击框时，其内容都会替换旧的 div 内容。我怎么能在drupal中做到这一点我找不到我看过但没有解决方案的真正解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:27:55.790

出于某种原因，我无法添加评论，因此请将此作为评论（顺便说一下，这不应该有代表要求），除非它回答了您的问题。

我认为除非有人单击标题，否则您正在尝试隐藏视图输出的正文？如果是这种情况，请使用 Firebug 找出正文文本作为 CSS 类的内容，然后应用“display: none;” 到那个班级。接下来，您将添加一个 jQuery 单击处理程序到更改“显示：无”的标题元素；到“显示：阻止；”

同样，这应该是要求澄清的评论，但由于我无法做到这一点，所以我回答了我以为你问的问题。

# ruby-on-rails - 连接belongs_to关系而不加载父级？

> ID：12287494
> 
> 赞同：0
> 
> 时间：2012-09-05T18:20:31.343
> 
> 标签：ruby-on-rails, activerecord, orm

我有两个模型与一个共同的父母有一个 belongs_to 关系。目前我正在做这样的事情；

```
child.parent.other_children 
```

当我这样做时，它会为父级进行 SELECT 查询，即使我什至不需要它，因为我已经有了`parent_id`in `child`。我想知道是否有比这更好的写法；

```
OtherChildren.find :parent_id => child.parent_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:03:02.940

你这样做的方式是不可能的。主要是因为从面向对象的观点加载父级并访问它的方法是您正在做的事情。

但是，稍微改变一下你的视图，你正试图`other_children`从一个`child`对象访问。为什么不在那个类上创建一个新方法呢？

```
def siblings
  OtherChildren.find :parent_id => self.parent_id
end 
```

# java - 将 Git 消息保存在 java 变量中

> ID：12287498
> 
> 赞同：2
> 
> 时间：2012-09-05T18:20:39.827
> 
> 标签：java, git

我正在使用 Java 来处理 Git 数据，我需要将每次提交的 Git 消息保存在 Java 变量中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:22:06.787

在 Java 中启动一个进程。捕获 的输出`git log`。或者试试egit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:40:36.477

使用 jgit，一个用 git 的纯 Java 实现编写的库。

迭代`Git.open(...).log().call()`

# android - display text in imageswitcher

> ID：12287506
> 
> 赞同：1
> 
> 时间：2012-09-05T18:21:25.990
> 
> 标签：android, android-layout, android-intent

My app is based on E-Commerce.I'm using gallery for images.I want to add text and button below each image in gallery that display when i click the respected image.The text is related to product that is different for each image and button is used for to move another activity.

The code is below.I'm new in android.Any help is much appreciated.

Code:

```
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class GalleryView extends Activity {
Integer[] pics = {
    R.drawable.antartica1,
    R.drawable.antartica2,
    R.drawable.antartica3,
    R.drawable.antartica4,
    R.drawable.antartica5,
    R.drawable.antartica6,
    R.drawable.antartica7,
    R.drawable.antartica8,
    R.drawable.antartica9,
    R.drawable.antartica10
   };
  ImageView imageView;

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

Gallery ga = (Gallery)findViewById(R.id.Gallery01);
ga.setAdapter(new ImageAdapter(this));

imageView = (ImageView)findViewById(R.id.ImageView01);
ga.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        Toast.makeText(getBaseContext(), 
                "You have selected picture " + (arg2+1) + " of Antartica", 
                Toast.LENGTH_SHORT).show();
        imageView.setImageResource(pics[arg2]);

    }

});

}

 public class ImageAdapter extends BaseAdapter {

private Context ctx;
int imageBackground;

public ImageAdapter(Context c) {
    ctx = c;
    TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
    imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
    ta.recycle();
}

public int getCount() {

    return pics.length;
}

public Object getItem(int arg0) {

    return arg0;
}

public long getItemId(int arg0) {

    return arg0;
}

public View getView(int arg0, View arg1, ViewGroup arg2) {
    ImageView iv = new ImageView(ctx);
    iv.setImageResource(pics[arg0]);
    iv.setScaleType(ImageView.ScaleType.FIT_XY);
    iv.setLayoutParams(new Gallery.LayoutParams(150,120));
    iv.setBackgroundResource(imageBackground);
    return iv;
}

}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:59:22.510

modify your ImageAdapter class

```
LayoutInflater mInflater; 
```

init it in ImageAdapter()

```
 mInflater=LayoutInflater.from(c); 
```

now Modify getView()

```
public View getView(int arg0, View arg1, ViewGroup arg2) {
View v=mInflater.inflate(R.layout.your_layout, null); 
```

> ImageView iv = (ImageView)v.findViewById(R.id.imave_view);

```
TextView tv=(TextView)v.findViewById(R.id.tv); 
```

> tv.setTxt(//set your text); iv.setImageResource(pics[arg0]); iv.setScaleType(ImageView.ScaleType.FIT_XY); iv.setLayoutParams(new Gallery.LayoutParams(150,120)); iv.setBackgroundResource(imageBackground); return v; }

# objective-c - 没有隐藏项的 Core Graphics 截图

> ID：12287510
> 
> 赞同：3
> 
> 时间：2012-09-05T18:21:49.890
> 
> 标签：objective-c, ios, uiview, core-animation, core-graphics

我正在使用 Core Graphics 截取我的*UIView*的屏幕截图，然后将其放在该 View 的顶部（这样我以后可以对其进行动画处理）：

```
// Get the screen shot
UIGraphicsBeginImageContextWithOptions(target.bounds.size, YES, [[UIScreen mainScreen] scale]);
[target.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIImageView * ss = [[UIImageView alloc] initWithImage:image];

// Add it to the View
[overlay addSubview:ss];
[target addSubview:overlay]; 
```

问题：我的 UIView`target`上有一些不可见的项目（我都试过了`alpha = 0`）`hidden = YES`。这些不可见的项目出现在屏幕截图中。

如何在不出现这些不可见项目的情况下截取屏幕截图？

**更新：** 我尝试使用[Technical Q&A QA1703: Screen Capture in UIKit Applications 中](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)的代码，这也存在同样的问题。

**更新#2：** 似乎应用了 CATransform3D 的视图会出现问题。在另一个具有 3D 子视图的父视图中，当截取此屏幕截图时，3D 效果将从视图中移除，并且它们看起来是平坦的 (2D)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:41:35.827

为什么不从其超级视图中删除隐藏视图。然后它不会出现在屏幕截图上。

```
[hiddenView removeFromSuperview]; 
```

编辑：

如果您不知道隐藏了哪些子视图，可以检查一下。以下代码将从视图中删除所有隐藏的子视图并将它们添加回来。

```
NSPredicate *predicate = [NSPredicate predicateWithBlock:^BOOL(UIView *subView, NSDictionary *bindings) {
    return subView.hidden;
}];

NSArray *hiddenViews = [[myView subviews] filteredArrayUsingPredicate: predicate];

for (UIView *subView in hiddenViews) {
    [subView removeFromSuperview];
}

//take your screenshot here

for (UIView *subView in hiddenViews) {
    [myView addSubview:subView];
} 
```

EDIT2：正如 Duncan C 指出的那样，**这不适用于嵌套的 subviews**。为此，您需要一个递归方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:17:32.370

看起来问题不仅在于它们被隐藏了，还在于应用了 CATransform3D。

Stack Overflow 问题[“renderInContext:”和 CATransform3D](https://stackoverflow.com/questions/9530250/renderincontext-and-catransform3d)有更多信息，但要点是：

> QCCompositionLayer、CAOpenGLLayer 和 QTMovieLayer 图层不会被渲染。此外，不会渲染使用 3D 变换的图层，也不会渲染指定 backgroundFilters、filters、compositingFilter 或掩码值的图层。

（来自[CALayer 文档](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)）。

如果您的应用没有进入应用商店，您可以使用未记录的`UIGetScreenImage`API：

```
// Define at top of implementation file
CGImageRef UIGetScreenImage(void);

...

- (void)buttonPressed:(UIButton *)button
{
  // Capture screen here...
  CGImageRef screen = UIGetScreenImage();
  UIImage* image = [UIImage imageWithCGImage:screen];
  CGImageRelease(screen);

  // Save the captured image to photo album
  UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
} 
```

（来自[约翰·穆肖](http://mobiledevelopertips.com/user-interface/screen-capture-using-uigetscreenimage.html)）

但是，使用此 API 会使您的应用无法获得批准。

我一直找不到任何其他解决方法。

# objective-c - 插入的对象不会反映在 NSFetchRequest 的查询结果中

> ID：12287513
> 
> 赞同：0
> 
> 时间：2012-09-05T18:21:58.327
> 
> 标签：objective-c, ios, core-data

我刚刚开始玩 iOS 开发和 Core Data 技术。

我想要做的是将对象插入核心数据，然后在同一上下文中运行获取请求以查找新插入的对象。

这是我用来插入对象的代码：

```
+(Reward*) rewardForAction: (Actions) action
    inManagedObjectContext: (NSManagedObjectContext *) context {

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Reward"];
    NSPredicate *actionPredicate =
        [NSPredicate predicateWithFormat:@"action = %@",
         [NSString stringWithFormat:@"%i", action]];

    NSPredicate *todayPredicate =
        [NSPredicate predicateWithFormat:@"when > %@",
         [NSDate today]];

    NSLog(@"Today's midnight :%@", [NSDate today]);
    request.predicate =
        [NSCompoundPredicate andPredicateWithSubpredicates:
         [NSArray arrayWithObjects: actionPredicate, todayPredicate, nil]];

    NSError *error = nil;
    NSArray *matches = [context executeFetchRequest: request error: &error];

    Reward *reward = nil;
    if(!matches) {
        NSLog(@"ERROR: failed to retrieve rewards");
    } else if(matches.count > 0) {
        NSLog(@"WRONG: reward already exists");
    } else {
        reward = [NSEntityDescription insertNewObjectForEntityForName:@"Reward"
                                               inManagedObjectContext:context];
        reward.action = [NSNumber numberWithInt:action];
        reward.when = [NSDate date];
        reward.pointsEarned = [Reward getPointsForAction:action];
    }

    [Stats track: context];

    [context save:nil];

    return reward;
} 
```

此代码首先检查今天是否已经为某些操作提供了奖励，如果没有，则提供奖励。

用相同的参数调用这个方法两次，像这样

[Reward rewardForAction:APPLICATION_LAUNCH inManagedObjectContext: self.db.managedObjectContext]; [Reward rewardForAction:APPLICATION_LAUNCH inManagedObjectContext: self.db.managedObjectContext];

预计只会插入一个对象。

但是，实际上它在核心数据中插入了两个对象。在调试器中，我看到第二个获取请求在已经存在对象时不返回任何对象。

看起来 NSFetchRequest 没有看到数据存储中的变化，并且对旧数据进行操作。我错过了什么吗？

**编辑：** 我还为 NSManagedObjectContextObjectsDidChangeNotification 设置了观察者，当它被调用时，我正在计算点的总和以将其反映在 UI 上。不幸的是 sum 也不包含来自插入对象的点。这是我计算总和的代码：

```
+(NSInteger) getPoints: (NSManagedObjectContext *) context {
    Stats * stats= [Stats get: context];

    NSArray *args = [NSArray arrayWithObject:
                     [NSExpression expressionForKeyPath:@"pointsEarned"]];
    NSExpression *ex = [NSExpression expressionForFunction:@"sum:"
                                                 arguments:args];

    NSExpressionDescription *ed = [[NSExpressionDescription alloc] init];
    [ed setName:@"result"];
    [ed setExpression:ex];
    [ed setExpressionResultType:NSInteger32AttributeType];

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setPropertiesToFetch:[NSArray arrayWithObject:ed]];
    [request setResultType:NSDictionaryResultType];

    /*if([stats intervalStartDate]) {
         NSPredicate *predicate =
            [NSPredicate predicateWithFormat:@"when >= %@", [stats intervalStartDate]];
             [request setPredicate:predicate];
    }*/    

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Reward"
                                              inManagedObjectContext:context];
    [request setEntity:entity];

    NSArray *results = [context executeFetchRequest:request error:nil];

    if(results && results.count > 0) {
        NSDictionary *resultsDictionary = [results objectAtIndex:0];
        NSNumber *resultValue = [resultsDictionary objectForKey:@"result"];
        return [resultValue intValue];
    } else {
        return 0;
    }    
} 
```

奇怪的是，当我在模拟器上停止应用程序并再次运行它时。我可以按预期看到所有点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T18:32:41.633

从

```
reward.action = [NSNumber numberWithInt:action]; 
```

我假设“动作”属性存储为`NSNumber`. 您应该在相应的谓词中使用相同的数据类型：

```
NSPredicate *actionPredicate = [NSPredicate predicateWithFormat:@"action = %@",
                                          [NSNumber numberWithInt:action]]; 
```

**添加：**关于“NSManagedObjectContextDidSaveNotification”与“NSManagedObjectContextObjectsDidChangeNotification”的问题：

仅获取持久存储中的当前状态的获取请求`NSDictionaryResultType`，并且不考虑上下文中的任何未决更改、插入或删除。

您可以在例如 的文档中找到此信息`setIncludesPendingChanges:`。

这解释了为什么您的 fetch 请求只看到已保存的更改。

# .net - VB.NET - 加密 SQLConnection 字符串的正确方法

> ID：12287514
> 
> 赞同：1
> 
> 时间：2012-09-05T18:21:58.763
> 
> 标签：.net, encryption, sqlconnection

我知道有很多加密 SQLConnection 字符串的方法，因此您可以在 VB.NET 程序中使用它来连接到 SQL 数据库，而无需反汇编/反编译 .exe 本身的人轻松读取您的连接字符串.

我知道这篇文章：[加密 SQL 连接字符串 c#](https://stackoverflow.com/questions/2160515/encrypt-sql-connectionstring-c-sharp)

讨论两种主要方式：配置安全部分和企业库数据访问应用程序块

现在我已经调整了配置安全部分，我在 app.config 文件中加密了我的连接字符串，我的程序可以解密该文件以获取连接字符串。我知道这只能在加密它的同一台计算机上解密，这不是问题。

我的问题是这些方法如何有效？不是有人只需要在那台计算机上创建一个程序来使用相同的做法来解密吗？

即使我使用散列和 MD5 加密或类似的东西，解密方法仍然在我的程序中，可以从反编译器/反汇编器中提取。

我真正保护我的数据的唯一方法是购买某种类型的混淆器并将其用于我的加密/解密代码并希望获得最好的结果吗？或者有人知道最好的方法吗？

* * *

我所做的是创建了一个程序，该程序需要用户名和密码才能登录，然后能够根据同一数据库中存在的信息执行 SQL 查询。我不能使用网站，它必须通过 .NET 程序来完成。该计划已分发给我在美国的许多客户。这意味着我真的需要一些安全措施。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:51:16.853

真正安全的方法是根本不直接连接到 SQL...

在互联网上创建一个与数据库对话的 API/Webservice/Similar。然后，您的客户端可以对 API 进行身份验证并发出请求。

这为您提供了许多优势：

*   客户端永远不知道连接字符串
*   您可以保证修改您数据的代码在您的控制之下且未经修改
*   您可以根据用户和角色提供更细粒度的权限
*   只要您编写好代码，反编译/逆向工程就不会泄露任何敏感信息（使用内置的身份验证机制，不要自己滚动）
*   如果您需要移动 SQL 服务器，则无需担心维护 DNS 条目/等，您只需更新 API 中的连接字符串

（刚刚注意到@Blam 在对 OP 的评论中提到了这一点）。

因此，要提供更多详细信息...

采用业务逻辑（或等效层）并通过 Web 服务公开方法。正如 Blam 建议的那样，WCF 是一个很好的起点。这使您可以强制执行业务逻辑并在代码中管理对数据库的所有更改。

查看[此处](http://msdn.microsoft.com/en-us/library/bb332338.aspx)和[此处](http://www.codeproject.com/Articles/42643/Creating-and-Consuming-Your-First-WCF-Service)以获取 WCF 入门帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T19:22:16.303

服务已得到答复，但我会尝试添加一些新价值。

WCF 服务通常托管在 IIS 中，但您将客户端保留在 VB 中。

在今天的 VB 中，您可能使用用户输入来指定查询。在 SQL 上运行查询。然后使用结果构建数据或业务对象列表。

使用 WFC，您可以调用服务上的方法。MyService 背后的一切对用户 PC 都是隐藏的。

```
List<busObs> myBusObjs = MyService.GetBusObj(string userCriteria); 
```

[开发人员对 Windows Communication Foundation 4 的介绍](http://msdn.microsoft.com/en-us/library/ee354381.aspx)

这将被称为 3 层应用程序。

另一个好处是维护。您可以在不更新 PC 的情况下更新 Web 服务层。

另一个好处是保护您的知识产权。就像我在一个应用程序上工作一样，其中我们有一些隐藏在 WCF 服务后面的专有算法。由于客户端只是一个 UI 层，因此有人可以对客户端进行逆向工程，但他们不会得到我们的任何好东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:56:19.697

另一种解决方案是通过存储过程处理您的所有数据访问 - 使用 SQL 数据库的内置安全性和权限将应用程序的用户限制在他们可以在您的应用程序中执行的数据处理并保护您的基础数据。

实际上，存储过程代表了您的应用程序的数据 API - 尽管完整的 Web 服务/API 允许您在长期内更灵活地更改服务器等。

# django - 混淆使用 Django 和 fcgi 提供静态文件

> ID：12287516
> 
> 赞同：-1
> 
> 时间：2012-09-05T18:22:01.713
> 
> 标签：django, apache, fastcgi, shared-hosting

我以为我已经弄清楚了，但是我已经阅读了一些关于此的不同内容，并且我开始变得非常困惑。

我的 settings.py 中的 URL 设置如下所示：

```
MEDIA_ROOT = HOME + '/uploads'

MEDIA_URL = PUBLIC_HTML + 'media/'

STATIC_ROOT = HOME + '/static'

STATIC_URL = PUBLIC_HTML + 'static/'

ADMIN_MEDIA_PREFIX = PUBLIC_HTML + 'static/admin/' 
```

`HOME`/home/username/在哪里，`PUBLIC_HTML`就像“http://www.mydomain.com/test/myproject/”

我的静态文件似乎没问题，但我的媒体文件没有显示出来。我的 urls.py 文件中没有设置任何内容，而且我使用的是共享主机，所以我所能做的就是将 .htaccess 文件用于 apache 指令。

显然，我想让我的媒体文件显示出来，但我的第一个问题是为什么会显示静态文件？这没有意义。我认为 apache 必须在 Django 处理这些请求之前拦截这些请求，但在 url 中没有任何类型的 django.static.serve 业务时，它们似乎显示得很好。这怎么可能？我这样做对吗（我确定我不是），如何让媒体文件显示出来？为什么静态文件不显示时它们不显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:25:24.017

STATIC_ROOT 必须在 STATIC_URL 上为 apache 服务，这显然你做得对。

以同样的方式，MEDIA_ROOT 必须由 MEDIA_URL 上的 apache 提供服务。

您可以设置一个[别名](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#alias)，例如从 MEDIA_URL 到 MEDIA_ROOT：

```
Alias /test/myproject/media/ /home/username/media/ 
```

最好避免硬编码绝对路径，但首先要确保它像这样工作。

# php - Symfony2 app.session.“flash”的使用和清理

> ID：12287520
> 
> 赞同：0
> 
> 时间：2012-09-05T18:22:12.757
> 
> 标签：php, symfony, session-variables, symfony-2.1

我在表单中使用 Symfony2 flash 消息在表单提交后构建不同的视图。到目前为止，一切都按预期进行，但现在我希望 session.flash 消息（仅以一种形式）在呈现此表单响应视图后不再存在。

```
{% if app.session.hasFlash('something') %}
   ...some code...
{% endif %} 
```

我对此进行了研究，但是除了具有删除此闪存功能的[官方参考](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Session.html#method_removeFlash)之外，我还没有找到任何信息。

**有人知道哪一个是最好的做法吗？**在某个特定位置（例如控制器或事件）删除此闪存，或者可能存在一些限制闪存消息生命周期的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:11:26.390

由于您只是在检查这一点，而不是在调用 - flash 仍将被放置在会话中。要触发会话删除 - 您必须调用`getFlash()`它。

[`getFlash()`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Session.php#L298)目前，调用和之间的区别[`removeFlash()`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Session.php#L333)实际上只是第一个方法返回值。

对于您的特定情况，我建议您使用第二个参数调用 getFlash()，如果请求的索引不存在，它会确定默认返回值。

```
{% if app.session.getFlash('something', false) %}
   ...some code...
{% endif %} 
```

# java - 使用替换第一种方法替换字符串

> ID：12287522
> 
> 赞同：0
> 
> 时间：2012-09-05T18:22:19.260
> 
> 标签：java, regex, string, split

我试图用另一个字符串替换，它没有发生。

```
String requestURI = "/webapps-ab/public/Test.jsp"
String contextName = "webapps-ab";
String newRequestURI = requestURI.replaceFirst(contextName,"webapps"); 
```

我期待`newRequestURI`成为`"/webapps/public/Test.jsp"`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:23:31.357

你的`replace`电话应该是：

```
String newRequestURI = requestURI.replaceFirst(contextName, "webapps"); 
```

使用：

```
String requestURI = "/webapps-ab/public/Test.jsp";
String contextName = "webapps-ab";
String newRequestURI = requestURI.replaceFirst(contextName, "webapps");
System.out.println("newRequestURI: " + newRequestURI); 
```

输出将是您所期望的：

```
newRequestURI: /webapps/public/Test.jsp 
```

[理想的例子](http://ideone.com/hKz09)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:24:27.580

引用变量时，不要将其括在引号中，因为这会将其转换为文字 String 对象。

```
String newRequestURI = requestURI.replaceFirst(contextName, "webapps"); 
```

# c# - 无法通过拖动边框来调整窗体大小

> ID：12287523
> 
> 赞同：17
> 
> 时间：2012-09-05T18:22:19.640
> 
> 标签：c#, winforms

**表单的 AutoSize**：*False*。 **Form 的 AutoSizeMode**： *Grow 和 Shrink*。

问题：我不能通过拖动它的边框来调整我的表单的大小，我只能通过拖动表单右下角的那个夹子来做到这一点。

表格上是否还有其他属性可以更改以解决此问题？

这也是表单上控件层次结构的屏幕截图...也许设置在表单上的较低级别控件上会导致这种情况？

![在此处输入图像描述](../Images/8ecbeea71adb7c582f7dfa7aabb1b891.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-04-08T09:42:54.413

因为这不在答案中，所以我将在这里写下。

该问题似乎是由于表单的 AutoSizeMode 处于 GrowAndShrink 上，而不是 GrowOnly （这是默认设置）引起的。重置为 GrowOnly 解决了这个问题。

（在 Win7 上使用 .net 4.5 在 MSVS2013 上确认）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-05T18:26:01.197

确保 FormBorderStyle 设置为 Sizable，并且 SizeGripStyle 属性设置为 Auto 或 Hide。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-16T09:39:39.117

如果设置了最大尺寸，我也会遇到同样的问题。请将其设置为`0`或大于现在。之后，您可以将边界移动到任何您想要的位置。如果最大尺寸对于新设置来说太小，则更改 `FormBorderStyle`或 `SizeGripStyle`无法提供帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-13T14:26:10.750

尝试了上述所有内容（以及微软的论坛）都无法调整大小。最后只是打开了另一个实例，其中包含我没有进行比较和比较的表单。这是需要的设置。以上都提到了，但不是作为一个组合。

在窗体的属性窗口中（或在代码中）。

Autosize：False = 允许调整两个尺寸的大小（True = 仅调整宽度）。

AutosizeMode: GrowOnly = 允许增长和缩小。

FormBorderStyle：相当大。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-24T02:58:54.623

我有同样的问题，我无法在手动模式下手动更改表单或控件的大小。尝试了以上所有方法，检查了项目中的先前表格，我可以调整它们的大小。

然后，关闭 VS 2010，重新打开项目，我可以调整窗体和控件的大小....

“你试过电源开关吗……;)”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-13T16:49:48.527

```
int height = 960;
int width = 1280;
this.ClientSize = new System.Drawing.Size(width, height); 
```

这样你就可以得到一个固定的表格大小......否则视觉工作室会自动改变它

# c++ - ccTouchesMoved 在 cocos2dx 中

> ID：12287526
> 
> 赞同：2
> 
> 时间：2012-09-05T18:22:28.407
> 
> 标签：c++, visual-c++, cocos2d-x

大家好，我是 COCOS2DX 框架的新手，正在尝试开发破砖游戏。我正在关注这个演示[Brick breker 游戏](http://www.raywenderlich.com/475/how-to-create-a-simple-breakout-game-with-box2d-and-cocos2d-tutorial-part-12)本教程在 cocos2d (iPhone) 中。我在 cocos2dx 中编码并正常工作。但是当我正在实施`ccTouchesMoved`方法时。我的代码可以正确编译和运行，但是当我触摸（单击）屏幕时，它会崩溃并出现错误违规行为。我的代码是

```
void HelloWorld::ccTouchesMoved(CCSet* touches, CCEvent* event)
{
    if (_mouseJoint == NULL) return;

    CCTouch *myTouch = (CCTouch*)touches->anyObject();
    CCPoint location = myTouch->locationInView();
    location = CCDirector::sharedDirector()->convertToGL(location);
    b2Vec2 locationWorld = b2Vec2(location.x/PTM_RATIO, location.y/PTM_RATIO);
    _mouseJoint->SetTarget(locationWorld);
} 
```

我该如何解决这个问题。请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:11:28.117

```
void ClassName::ccTouchesBegan(NSSet *touches, UIEvent* event )
{

      if (_mouseJoint != NULL) return;
      ...
} 
```

可能是您没有将 _mouseJoint 初始化为 NULL。

在你的类的构造函数中，初始化 _mouseJoint = NULL;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T06:57:44.153

在您提供的演示中，以下代码初始化了 mouseJoint

```
if (_paddleFixture->TestPoint(locationWorld)) {
    b2MouseJointDef md;
    md.bodyA = _groundBody;
    md.bodyB = _paddleBody;
    md.target = locationWorld;
    md.collideConnected = true;
    md.maxForce = 1000.0f * _paddleBody->GetMass();

    _mouseJoint = (b2MouseJoint *)_world->CreateJoint(&md);
    _paddleBody->SetAwake(true);
} 
```

它在 ccTouchesBegan 中

# c# - Android 4 和 Mono for Android 的 WebClient + SSL 异常

> ID：12287528
> 
> 赞同：0
> 
> 时间：2012-09-05T18:22:40.717
> 
> 标签：c#, xamarin.android, webclient, xamarin

我使用的是 MfA 4.2.5，每当我使用 System.Net.WebClient 从 SSL URL 下载字符串时，都会收到与证书有关的错误。证书似乎有效，我在 Android 4.0.3 上收到错误，但在 Android 2.3 上没有错误。

这是异常： System.Net.WebException：获取响应流时出错（写入：身份验证或解密失败。）：SendFailure ---> System.IO.IOException：身份验证或解密失败。---> Mono.Security.Protocol.Tls.TlsException：从服务器收到的证书无效。错误代码：0xffffffff800b010a

这是网址：[https ://cws.auburn.edu/map/api/2.0/Building](https://cws.auburn.edu/map/api/2.0/Building)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:34:58.320

这是 4.2.5 中的一个已知错误。在下一个版本之前建议的解决方法在此错误报告中的注释 #7 下

[https://bugzilla.xamarin.com/show_bug.cgi?id=6501](https://bugzilla.xamarin.com/show_bug.cgi?id=6501)

# c++ - 我怎样才能找到对a，b的数量 我正在尝试解决SPOJ 问题 PGCD，它询问最大公约数表中出现了多少素数。 我想到的第一个想法是首先通过筛选生成素数。 然后，对于每个素数p，看看有多少对 ( a , 问问题 问问题 2012-09-05T18:23:51.670 2350 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在尝试解决SPOJ 问题 PGCD，它询问最大公约数表中出现了多少素数。 我想到的第一个想法是首先通过筛选生成素数。 然后，对于每个素数p，看看有多少对 ( a , b )，其中a和b小于给定的界限，满足GCD(a,b)=p。 例如，有多少对小于 (20, 20) 满足 GCD(a,b)=7？ 当然，如前所述，a和b是有界的。 那么有可能逆转GCD吗？还是这个解决方案完全无效？ 当您进行任何静态引用时，方法/线程局部性可能会完全丢失。由于引用是静态的，指向静态引用的本地字段不在线程堆栈上，它实际上可能被其他线程引用。 如果对象是全局分配的而不是线程局部的，则您具有相同的线程安全效果。 final SomeObject obj = getSomeObject(); public void foo() { obj.doSomething(); } private SomeObject getSomeObject() { // returns singleton SpringContext.getBean("someObject"); } c++mathprimesgreatest-common-divisor 4 1 回答 1 This answer is useful 2 显然，GCD 函数是不可逆/不可逆的，因为例如， GCD(10,15) == 5 GCD(5, 15) == 5 因此，如果给您 5 并尝试猜测输入，这是不可能的。 我可能在这里遗漏了一些东西，因为我不明白你在说什么关于边界，但我认为这是你更好地解释问题的责任。你到底有什么信息，你想计算什么信息？示例输入和输出将非常有用。此外，校对和拼写检查。 于 2012-09-05T18:27:54.863 回答 Related 0 javascript - 使用retina.js时在子域上托管静态图像 1 java - 在 Java 中使用正则表达式进行部分精确匹配 1 ios - 如何在 iphone 中管理视图导航？ 2 php - img src 中的 php 页面 1 windows - Windows 的 Copyfile 和集群预留 1 iphone - iOS 5 中的 iPad 方向问题 1 c# - Winform C# Datagridview 绘制标题 1 node.js - Express 和中间件的问题 1 netbeans - 如何解决 JavaME 中的 ConnectionNotFoundException 4 c++ - 为什么在已删除指针上调用非虚拟成员函数是未定义的行为？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12287548
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c++, math, primes, greatest-common-divisor

我正在尝试解决[SPOJ 问题 PGCD](http://www.spoj.pl/problems/PGCD/)，它询问最大公约数表中出现了多少素数。

我想到的第一个想法是首先通过筛选生成素数。

然后，对于每个素数*p*，看看有多少对 ( *a* , *b* )，其中*a*和*b*小于给定的界限，满足`GCD(a,b)=p`。

例如，有多少对小于 (20, 20) 满足 GCD(a,b)=7？

当然，如前所述，*a*和*b*是有界的。

那么有可能逆转GCD吗？还是这个解决方案完全无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:27:54.863

显然，GCD 函数是不可逆/不可逆的，因为例如，

*   GCD(10,15) == 5
*   GCD(5, 15) == 5

因此，如果给您 5 并尝试猜测输入，这是不可能的。

我可能在这里遗漏了一些东西，因为我不明白你在说什么关于边界，但我认为这是你更好地解释问题的责任。你到底有什么信息，你想计算什么信息？示例输入和输出将非常有用。此外，校对和拼写检查。

# c# - 如何在c#中轻松地从字符串数组中删除部分字符串

> ID：12287549
> 
> 赞同：1
> 
> 时间：2012-09-05T18:23:55.000
> 
> 标签：c#

我正在使用以下代码：

```
var names = ConfigurationManager.AppSettings.AllKeys.Where(k => k.StartsWith("name")); 
```

我得到如下键：name1、name2、name16、name18。

现在我想创建另一个数组，它将删除名称并只保留 1、2、16、18。在上面的代码中是否有任何简单的方法可以做到这一点？还是分开做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T18:25:57.027

你可以直接

```
ConfigurationManager.AppSettings.AllKeys.Where(k => k.StartsWith("name")).Select(a => a.Replace("name","")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T18:53:25.573

我认为你的代码已经足够好了。使用 substring 可以提高一点性能，因为它是删除前缀的简单操作：

```
var prefix = "name"; // could be a parameter or used as const; just for example
var nums = ConfigurationManager.AppSettings.AllKeys.Where(s => s.StartsWith(prefix)).Select(s => s.Substring(prefix.Length)).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T18:26:31.117

试试这个：

```
var names = ConfigurationManager.AppSettings.AllKeys.Where(k => k.StartsWith("name")).Select(p => p.Replace("name", "")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T18:35:25.883

采用：

```
var namesWithoutPrefix = names.Select(n => n.Substring(4)); 
```

`Replace`代替`Substring`可能会替换一个名称中的多个子字符串（即使不这样做也会更慢）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T18:44:08.577

我不建议依赖数值的位置或字符串的长度或文本读取“名称”的事实。相反，您可以使用简单的正则表达式来一致地提取它：

```
Regex regex = new Regex(@"[0-9]+");
var numbers = ConfigurationManager.AppSettings
    .AllKeys.Select(p => regex.Match(p).Value).ToArray(); 
```

# c# - Checkboxlist C# - 需要通过传递参数检查里面的项目

> ID：12287555
> 
> 赞同：0
> 
> 时间：2012-09-05T18:24:06.893
> 
> 标签：c#, methods, checklistbox

我有一个 CheckBoxList 和带有标签的复选框未修复，它会改变。

我想在一个方法中传递多个字符串，该方法将读取字符串并与列表中复选框的标签名称匹配，然后检查是否匹配。

例如列表包含以下复选框。

```
Chk1
Chk3
Chk5
Chk7 
```

方法：公共无效方法（str Stringstobeentered）

```
User can pass (chk1;chk7;chk3), then 3 check boxes will get selected 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:35:12.560

你可以试试这个：

```
public void SelectList(string[] selectedText){

  foreach(string item in selectedText){
     CheckBoxList1.Items.FindByText(item).Selected = true;
     // User FindByValue in case of to find the item via value.
  }

} 
```

像这样调用函数：

```
SelectedList(new[]{ "text1", "text2" }); 
```

或者，如果您希望它像动态 n 数组一样使用参数而不是方法原型

```
public void SelectList(params string[] selectedText) 
```

和调用程序将是

```
SelectedList("text1", "text2"); 
```

希望这会有所帮助。

# javascript - FB like 按钮显示在页面上，但不在同一页面上弹出

> ID：12287556
> 
> 赞同：0
> 
> 时间：2012-09-05T18:24:08.847
> 
> 标签：javascript, facebook, facebook-like

很久以前创建了一个脚本，它运行得非常好，直到前几天我注意到这个问题。FB like 按钮显示在实际页面上并且工作正常......然后我在页面上还有一个共享按钮，显示与其他共享服务的弹出窗口......在这个弹出窗口中，我还显示了 SAME fb like 按钮。

页面和弹出位置都使用完全相同的代码：

```
<div class="fb-like" data-href="'+ encodeURL(fb_url()) +'" data-action="'+ settings.fbAction +'" data-colorscheme="'+ settings.fbcolorscheme +'" data-send="false" data-layout="button_count" data-width="97" data-show-faces="false"></div> 
```

变量和函数是正确的。这在实际页面上运行良好，并且直到最近在页面和弹出窗口上都运行良好......所以我想我的问题是是否有一些改变，你只能在页面上显示相同按钮的一个实例？这是我唯一能想到的，但想知道是否有其他人遇到过类似的事情。我很困惑，因为相同的代码直到最近才出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:56:19.933

确实可以在`data-href`同一个 HTML 文档中呈现多个具有相同值的类似按钮。请在加载 Facebook Javascript SDK 之前检查您的`<div class="fb-like"/>`元素是否是 DOM 的一部分，如下所示：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=YOUR_APP_ID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

请注意，如果您包含 YOUR_APP_ID 并已`xfbml=1`设置（根据上面示例中类似查询字符串的附录），那么在 SDK 加载完成后将呈现 Like 按钮。在此之后添加的任何点赞按钮都不会被渲染（也许如果它们是通过 Javascript、jQuery 或类似方式添加到 DOM - 例如在 AJAX 调用之后）。

如果**必须**在加载 SDK 后将第二个 Like Button 添加到 DOM，在添加到 DOM 后调用`FB.init()`将呈现任何尚未呈现的 Like Button，如下所示：

```
FB.init({
    appId:'YOUR_APP_ID', 
    xfbml:true
}); 
```

注意：这可行，但不建议这样做，因为以下警告消息将打印到您的控制台：

> FB.init 已被调用 - 这可能表明存在问题。

# actionscript-3 - AS3 - 求解输入方程

> ID：12287563
> 
> 赞同：1
> 
> 时间：2012-09-05T18:24:19.280
> 
> 标签：actionscript-3, math

我希望能够在文本字段中输入一个方程式，然后得到一个答案，就像我在代码中输入它一样。

方程可以是从 1+1 到 (4*2*(6-4))/2 等的任何值。

是否有捷径可寻？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:02:39.110

[您可以首先从谷歌结果数学解析器](http://www.flashandmath.com/intermediate/mathparser/mp1.html)中使用 as3 的数学方程解析器

# python - 使用模块内 __init__.py 中定义的方法

> ID：12287571
> 
> 赞同：16
> 
> 时间：2012-09-05T18:24:33.557
> 
> 标签：python

假设我有以下目录结构：

```
lib\
--__init__.py
--foo.py
--bar.py 
```

在 foo 和 bar 内部，有不同的方法，它们都需要相同的方法。例如：

富：

```
def method1():
    win() 
```

酒吧：

```
def method2(number):
    if number < 0:
        lose()
    else:
        win() 
```

__在里面__：

```
def win():
    print "You Win!"

def lose():
    print "You Lose...." 
```

有没有办法在模块各自的子文件中的**init** .py 中使用 win 和 lost 方法，还是我必须在文件夹中创建另一个文件并让 foo 和 bar 导入？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T18:26:33.197

使用相对导入：

```
from . import win, lose 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-05T18:38:22.327

是的，只需导入`__init__.py`模块（通过绝对或相对导入，这并不重要）。

我从不喜欢相对导入，所以我会使用`import mypackage`in这样做`mypackage.foo`，它`__init__.py`像相对导入一样导入，然后在那里使用它。虽然我一般也不喜欢放任何东西`__init__.py`，所以也许你应该考虑共享公共文件。

# java - Spring、MySQL 和 Hibernate 在一个模型中加入表

> ID：12287572
> 
> 赞同：0
> 
> 时间：2012-09-05T18:24:33.960
> 
> 标签：java, spring, hibernate, spring-webflow

Spring、MySQL 和 Hibernate 在一个模型中加入表

我正在开发一个 Spring、MySQL 和 Hibernate 项目，这是该公司第一次要求我在 Java 代码中连接表。

在传递中，我编写如下代码以从 Hibernate 获取列表数据：

```
return (List<NameID_lookupModel>) sessionFactory.getCurrentSession()
                .createCriteria(NameID_lookupModel.class)
                .addOrder( Order.asc("Name"))
                .list(); 
```

但在这个新项目中，我将阅读不止一张表，因此我需要帮助来正确设置模型。

我的桌子看起来像这样

表 a、列 1 和列 2 表 b、列 1 和列 2 表 c、列 1 和列 2

我必须在表 A 上选择表 B col1 中的 col 2，然后将表 b col2 加入表 c col 1。

我如何在java模型中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:54:20.207

我看到了两种解决您的问题的方法：

*   在数据库中使用视图并将您的类映射到视图
*   使用 SQL 休眠查询并将结果作为您要使用的模型类的实例（在您的示例中，将映射表 A）；例子：

    `SQLQuery query = sessionFactory.getCurrentSession().createSQLQuery("SQL THAT YOU WANT TO USE WITH THE JOINS AND WHERE"); query.addEntity(LookupMappedModel.class); List<LookupMappedModel> result = (List<LookupMappedModel>)query.list();`

您可以在此处找到更多示例：[Hibernate - 使用本机 SQL](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)

# biztalk - 创建更新 Oracle 数据库的编排的最有效方法是什么？

> ID：12287573
> 
> 赞同：0
> 
> 时间：2012-09-05T18:24:39.060
> 
> 标签：biztalk

我正在 Biztalk 中创建我的第一个编排，并且在想出一种有效的方法来更新数据库（具体来说，最多 3 个不同的表）时遇到了麻烦。

用户使用与包含 emplid（唯一 id）和一堆名称-值对的模式匹配的入站消息调用我们的服务（请参见此图中的源模式）。“名称”对应于表中的列（例如，如果名称是“employeename”，则它对应于 EMPLOYEE 表的 NAME 列）。该值当然是用户希望将该列更新为的新值。

![](../Images/9167f0b6eadb67386b8e32c8b6b9ad3d.png)

因此，他们可以传入仅适用于 1 个表、2 个表或全部 3 个表的更新消息，具体取决于他们要为传入的员工更新的字段。

我目前正在使用 3 个表适配器将其作为 3 个单独的更新（每个表一个，其中一个如上图所示）来处理它，但我无法处理不同的情况，即它们是否为所有 3 个表传递 updateValuePairs，而不是只有一个或仅适用于两个表（其他查询仍尝试运行并失败）。我接近这个权利吗？还是有更好的方法来完成我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:08:15.817

我会尝试不同的方式来实施更清洁的解决方案，

创建一个**存储过程**来处理要转到哪个表的逻辑

比你只需要映射和一个 LOB 适配器而不是你现在得到的 3 个

**俯视解决方案**

1.在编排中接收输入

2.将输入映射到存储过程生成的模式

3.将映射的数据发送到DB/LOB适配器到DB中

这是一个可以帮助您的链接（我假设您使用 biztalk 2010）：

[如何使用 Oracle 存储过程](http://tenalinaga.wordpress.com/2010/11/18/wcf-oracle-apater/)

# regex - 正则表达式性能：验证字母数字字符

> ID：12287574
> 
> 赞同：5
> 
> 时间：2012-09-05T18:24:43.803
> 
> 标签：regex, performance

在尝试验证字符串是否仅由字母字符组成时，我想到了两种可能的正则表达式解决方案。

第一个检查字符串中的每个字符是否都是字母数字：

```
/^[a-z]+$/ 
```

第二个尝试在字符串中的某处查找**不是**字母数字的字符：

```
/[^a-z]/ 
```

*（是的，我可以在这里使用字符类。）*

长字符串是否有显着的性能差异？（如果有的话，我猜第二个变种更快。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T18:31:50.523

仅通过查看它，我会说第二种方法更快。

然而，我做了一个非科学的快速测试，结果似乎没有定论：

**[正则表达式匹配与否定](http://jsperf.com/regex-match-vs-negation)**。

* * *

**PS**我从第一种方法中删除了组捕获。这是多余的，只会减慢它的速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T19:00:25.007

写了这个快速的 Perl 代码：

```
 @testStrings = qw(asdfasdf asdf as aa asdf as8up98;n;kjh8y  puh89uasdf ;lkjoij44lj 'aks;nasf na ;aoij08u4 43[40tj340ij3 ;salkjaf;  a;lkjaf0d8fua ;alsf;alkj   
a a;lkf;alkfa as;ldnfa;ofn08h[ijo ok;ln n ;lasdfa9j34otj3;oijt 04j3ojr3;o4j ;oijr;o3n4f;o23n a;jfo;ie;o ;oaijfoia ;aosijf;oaij ;oijf;oiwj; 
qoeij;qwj;ofqjf08jf0 ;jfqo;j;3oj4;oijt3ojtq;o4ijq;onnq;ou4f ;ojfoqn;aonfaoneo ;oef;oiaj;j a;oefij iiiii iiiiiiiii iiiiiiiiiii); 

    print "test 1: \n";
    foreach my $i (1..1000000) {
            foreach (@testStrings) {
                    if ($_ =~ /^([a-z])+$/) {
                            #print "match"
                    } else {
                            #print "not"
                    }
            }
    }

    print `date` . "\n";

    print "test 2: \n";
    foreach my $j (1..1000000) {
            foreach (@testStrings) {
                    if ($_ =~ /[^a-z]/) {
                            #print "match"
                    } else {
                            #print "not"
                    }
            }
    } 
```

然后运行它：日期；<perl_file>; 日期

它不是 100% 科学的，但它给了我们一个好主意。第一个 Regex 需要 10 或 11 秒来执行，第二个 Regex 需要 8 秒。

# scope - extjs4 MVC 范围问题

> ID：12287575
> 
> 赞同：0
> 
> 时间：2012-09-05T18:24:50.107
> 
> 标签：scope, extjs4, extjs-mvc

一旦我单击在组合上呈现的工具提示中的链接，我就会尝试调用 resetCombo 方法

但是由于范围问题，我无法访问它，不确定我缺少什么。请帮助我。

```
 Ext.define('test.BasicForm', {
            extend: 'Ext.form.Panel', 
            renderTo:Ext.getBody(),
            initComponent :function(){
                this.items=[
                {

                    fieldLabel: 'Test',
                    xtype: 'combo',
                    displayField: 'name',
                    width: 320,
                    labelWidth: 130,
                    store: [
                            [1, 'Value 1'],
                            [2, 'Value 2'],
                            [3, 'Value 3'],
                            [4, 'Value 4']
                        ],
                    listeners:{
                    afterrender: function(combo) {
                        Ext.create('Ext.tip.ToolTip', {
                            target: combo.getEl(),
                            autoHide: false,
                            name:'tool-tip',
                            scope:this,
                            html: 'Old value was '+ combo.getValue()+ '<a href="#" onclick="javascript:resetCombo();return false;"> test</a>',

                            listeners: {
                                beforeshow: function() {
                                    return combo.isDirty();
                                }
                            }
                        });
                    }
                    },
                    value:'1'

                }];
                this.callParent(arguments);
                },

             resetCombo:function(){
                 alert('called');
             }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:37:02.953

首先，这与 ExtJS4 的 MVC 特性无关，这些特性通常与控制器的控制方法相关联：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-control](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-control)

其次，您*可以*通过切换到以下完全限定的路径来重置组合来获得所需的效果：

```
onclick="javascript:test.BasicForm.resetCombo();" //etcetera 
```

最后，尽管您可以使上述方法发挥作用，但这远非最佳实践。我没有时间给出完整的答案，但基本上你想做的包括：

1.  向工具提示的底层元素添加点击事件处理程序
2.  然后在元素内部使用 Ext.dom.Element.click 的参数（参见[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-event-click](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-event-click)）确保它是一个被点击的 <A> 标签
3.  然后调用所需的函数，而不必使用 Javascript 伪 URL 和函数的完全限定路径

这是我按照上述准则对 afterrender 侦听器的工作重写，对范围进行了一些调整，特别是将对表单的引用存储在同名变量中。

```
listeners:{
  afterrender: function(combo) {
    var form = this;

    var tooltip = Ext.create('Ext.tip.ToolTip', {
        target: combo.getEl(),
        autoHide: false,
        name:'tool-tip',
        html: 'Old value was '+ combo.getValue()+ ' <a class="tooltipHref" href="#">test</a>',

        listeners: {
        beforeshow: function() {
            return combo.isDirty();
        },
        afterrender: function() {
            tooltip.el.on('click', function(event, element) {
            if (element.className == 'tooltipHref') {
                form.resetCombo();
            }
            });                               
        }
        }
    });
  },
  scope: this
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:35:50.840

`<a href="#" onclick="javascript:resetCombo();return false;"> test</a>`

这段代码试图调用一个名为的函数，该函数`resetCombo`存储在顶级对象（`window`对象）中。

# c# - 访问扩展方法的变量 (C#)

> ID：12287579
> 
> 赞同：1
> 
> 时间：2012-09-05T18:25:13.537
> 
> 标签：c#, extension-methods

是否可以在静态扩展方法中修改 this/focus 变量？

例如：

```
public static class AnimExtensions
{
    public static int anim(this float f, float to, float time)
    {
        return Animation.Start(a => f = a, f, to, time);
    }
} 
```

我想通过在“this”变量上使用 lambda 函数来使用扩展名来调用 Animation.Start 方法。扩展方法中不允许使用 this 关键字，但是是否有另一种以这种方式访问​​/使用变量的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T18:27:17.317

您当然可以修改参数 - 但它不会有任何效果，因为参数是按常规方法按值传递的。

您不能将扩展方法的第一个参数声明为`ref`or `out`，这是它产生效果所必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T19:00:33.473

我不确定你在问什么。方法的第一个参数的类型是什么`Animation.Start`？

类型`float`( `System.Single`) 是**不可变**的，因此您无法修改`f`对象。您可以分配`f`给一个新对象（例如`f = 3.14F;`或`f++;`），但正如 Jon Skeet 在他的回答中解释的那样，这是没用的（`ref`/`out`不能与 结合`this`）。

**如果您在可变**引用类型上创建扩展方法，例如`List<>`，则可以修改“this”对象，如下所示：

```
public static void AbsAll(this List<float> list)
{
  for (int i = 0; i < list.Count; ++i)
    list[i] = Math.Abs(list[i]);
} 
```

`list`当然，分配给新对象仍然没有用。

# scikit-learn - 通过 sklearn python 包定义和使用球树列表

> ID：12287581
> 
> 赞同：0
> 
> 时间：2012-09-05T18:25:31.777
> 
> 标签：scikit-learn, cluster-analysis

我已经定义了一个球树对象列表，如下所示，其中`input1`是一个形状为 (100, 320) 的 NumPy 数组。

```
bt = []
bt.append(BallTree(input1)) 
```

我将 的元素之一`input1`作为示例查询，`sample_index`假设在范围内。

```
sample_query = input1[sample_index,:]

# Find nearest neighbour and compute distance and index
distance, index = bt[0].query(sample_query,1) 
```

鉴于 ' sample_query `distance[0]`' 是`input1`.

```
# Adding another BallTree instance to the list
#input2 is a numpy array with shape (70,320)  
bt.append(BallTree(input2))
distance, index = bt[0].query(sample_query,1)
print distance[0]
# Output here is NOT zero (NOT expected!!) 
```

为什么当我将一个球树对象附加到球树列表“bt”时，“sample_query”和 bt[0] 的最近邻距离会发生变化？当我将一个对象附加到列表 bt 时，我希望对象 bt[0] 不会被修改。我的预期正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:09:26.773

在这两种情况下，您仍在对同一个球树实例进行查询，`bt[0]`因此您两次得到相同的结果，这是意料之中的。我不明白你为什么将 BallTree 实例放在 python 列表 BTW 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:48:04.003

通过这个例子，我发现我对 BallTree 的理解存在差距。

经过一番挖掘，我现在明白（借用问题中的符号） bt[0].data 实际上指向输入 numpy 数组，而不是它的副本。我正在重新使用输入 numpy 数组来创建更多的球树，因此 bt[0] 看到的数据每次都被破坏。

如果我确保为每个球树实例创建 numpy 数组（或在“C-speak”中分配），那么球树查询结果是一致的。

# c++ - 将整数分配给变体

> ID：12287583
> 
> 赞同：3
> 
> 时间：2012-09-05T18:25:42.510
> 
> 标签：c++, winapi, variant

我想设置 Flag很快将作为参数传递[`navOpenInBackgroundTab`给`BrowserNavConstants enum`](http://msdn.microsoft.com/en-us/library/aa768360%28v=vs.85%29.aspx)[`IWebBrowser2::Navigate2`Method](http://msdn.microsoft.com/en-us/library/aa752134%28v=vs.85%29.aspx)。

签名`IWebBrowser2::Navigate2`：-

```
HRESULT Navigate2(
    VARIANT *URL,
    VARIANT *Flags,
    VARIANT *TargetFrameName,
    VARIANT *PostData,
    VARIANT *Headers
); 
```

这是我有问题的地方： -

```
VARIANT SITE={0}, vFlags = {0},vTargetFrameName = {0},vPostData = {0},vHeaders = {0};
...
...
vFlags.intVal=navOpenInBackgroundTab;//<--Here,Don't know how to do it.Not Working..

m_spWebBrowser->Navigate2(&SITE, &vFlags,&vTargetFrameName, &vPostData, &vHeaders); 
```

非常感谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:28:04.083

使用[`InitVariantFromInt32`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762329%28v=vs.85%29.aspx)：-

```
HRESULT hr = InitVariantFromInt32(navOpenInBackgroundTab, &vFlags); 
```

您也可以使用（来自我的旧代码库:)）：-

```
V_VT(&vFlags) = VT_I4;
V_I4(&vFlags) = navOpenInBackgroundTab; 
```

# c# - C# 将两个 tcp 套接字连接在一起

> ID：12287586
> 
> 赞同：3
> 
> 时间：2012-09-05T18:25:52.917
> 
> 标签：c#, sockets, telnet, tcpclient

我不确定标题是否提供了所有信息。

我正在尝试查找/编写一个套接字服务器，它将接受来自客户端（telnet）的连接，然后代表已连接的客户端连接到网络内的四个 telnet 服务器之一。

连接后，我会记录有多少连接，然后如果总共有 4 个连接，则禁止任何新连接，直到四个连接之一可用。

我写了这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Threading;
using System.Net;
using System.IO;

namespace ConsoleApplication1
{
class Program
{
    static int nodeCount = 4;
    static int currentNode = 1;

    static void Main(string[] args)
    {
        ServerProgram server = new ServerProgram();
    }

    class ServerProgram
    {
        private TcpListener tcpPrimaryListener;
        private Thread listenThread;

        public ServerProgram()
        {
            this.tcpPrimaryListener = new TcpListener(IPAddress.Any, 23);
            Console.WriteLine("Telnet BBS Port Concentrator Server Started.");
            Console.WriteLine("--------------------------------------------");

            this.listenThread = new Thread(new ThreadStart(ListenForClients));
            this.listenThread.Start();
        }

        private void ListenForClients()
        {
            this.tcpPrimaryListener.Start();

            while (true)
            {
                TcpClient client = this.tcpPrimaryListener.AcceptTcpClient();
                Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
                clientThread.Start(client);
            }
        }

        private void HandleClientComm(object client)
        {
            if (currentNode <= nodeCount)
            {
                Console.WriteLine("Connection thread created.");

                StreamWriter swStream;
                StreamWriter swStream2;
                StreamReader srStream;
                StreamReader srStream2;

                TcpClient tcpClient = (TcpClient)client;
                NetworkStream tcpClientStream = tcpClient.GetStream();

                TcpClient telnet = new TcpClient("192.168.100.5" + currentNode, 23);
                NetworkStream telnetStream = telnet.GetStream();

                currentNode++;

                while (true)
                {
                    srStream = new StreamReader(tcpClient.GetStream());
                    swStream2 = new StreamWriter(tcpClient.GetStream());

                    srStream2 = new StreamReader(telnet.GetStream());
                    swStream = new StreamWriter(telnet.GetStream());

                    swStream.Write(srStream.ReadToEnd());
                    swStream2.Write(srStream2.ReadToEnd());

                }
            }
        }
    }
}
} 
```

我已经多次更改了这个例子，所以我真的不知道我有什么没有尝试过。我愿意尝试任何事情。

运行它的目的实际上是允许一个 telnet 端口通过防火墙打开，并允许连接到运行 telnet 化石驱动程序 BBS 软件的 DOS 机器的小型网络。我只想使用一个端口将 telnet 流量重定向到可用系统。

问题是我无法弄清楚如何将两个套接字实际连接在一起并在它们之间传递数据。传入的套接字和我代表服务器创建的套接字到服务器。

谢谢。

更新：

这对我有用，我仍在寻找错误，但到目前为止它正在工作。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Threading;
using System.Net;
using System.IO;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
class Program
{
    static int nodeCount = 2;
    static int currentNode = 1;

    static void Main(string[] args)
    {
        ServerProgram server = new ServerProgram();
    }

    class ServerProgram
    {
        private TcpListener tcpPrimaryListener;
        private Thread listenThread;

        public ServerProgram()
        {
            this.tcpPrimaryListener = new TcpListener(IPAddress.Any, 23);
            Console.WriteLine("Telnet BBS Port Concentrator Server Started.");
            Console.WriteLine("--------------------------------------------");

            this.listenThread = new Thread(new ThreadStart(ListenForClients));
            this.listenThread.Start();
        }

        private void ListenForClients()
        {
            this.tcpPrimaryListener.Start();

            while (true)
            {
                TcpClient client = this.tcpPrimaryListener.AcceptTcpClient();
                Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
                clientThread.Start(client);
            }
        }

        private void HandleClientComm(object client)
        {
            string noNodes = "Sorry all nodes are occupied.";

            if (currentNode <= nodeCount)
            {
                Console.WriteLine("Client connected.");

                TcpClient tcpClient = (TcpClient)client;
                NetworkStream tcpClientStream = tcpClient.GetStream();

                TcpClient telnet = new TcpClient("10.24.9.11", 23);
                //TcpClient telnet = new TcpClient("192.168.100.5" + currentNode, 23);
                NetworkStream telnetStream = telnet.GetStream();

                currentNode++;

                ByPass linkedSockets = new ByPass(tcpClientStream, telnetStream);
            }
            else
            {
                TcpClient tcpClient = (TcpClient)client;
                NetworkStream tcpClientStream = tcpClient.GetStream();

                ASCIIEncoding encoder = new ASCIIEncoding();
                tcpClientStream.Write(Encoding.ASCII.GetBytes(noNodes), 0, noNodes.Length);
            }
        }
    }

    public class ByPass
    {
        public ByPass(Stream s1, Stream s2)
        {
            var cTokenSource = new CancellationTokenSource();
            var cToken = cTokenSource.Token;
            Task.Factory.StartNew(() => Process(s1, s2, cToken, cTokenSource), cToken);
            Task.Factory.StartNew(() => Process(s2, s1, cToken, cTokenSource), cToken);
            cToken.Register(() => cancelNotification());
        }

        public void Process(Stream s1, Stream s2, CancellationToken ct, CancellationTokenSource cTokenSource)
        {
            byte[] buf = new byte[0x10000];

            while (true)
            {
                if (ct.IsCancellationRequested)
                {
                    break;
                }

                try
                {
                    int len = s1.Read(buf, 0, buf.Length);
                    s2.Write(buf, 0, len);
                }
                catch
                {
                    s1.Close(); s2.Close();
                    cTokenSource.Cancel();
                    break;
                }
            }
        }
    }

    static void cancelNotification()
    {
        Console.WriteLine("Client disconnected.");
        currentNode--;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T18:39:12.363

我认为，您可以创建一个类似于下面的类来在两个流之间传递数据

```
public class ByPass
{
    public ByPass(Stream s1, Stream s2)
    {

        Task.Factory.StartNew(() => Process(s1, s2));
        Task.Factory.StartNew(() => Process(s2, s1));
    }

    public void Process(Stream sIn, Stream sOut)
    {
        byte[] buf = new byte[0x10000];
        while (true)
        {
            int len = sIn.Read(buf, 0, buf.Length);
            sOut.Write(buf, 0, len);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-12T12:31:38.317

我做了一些小改动，它对我来说很完美

```
 public class StreamTransmitter
    {
        static TaskCompletionSource<bool> ts;

        public static async Task Start(Stream s1, Stream s2, CancellationToken token)
        {
            ts = new TaskCompletionSource<bool>();

            Process(s1, s2, token);
            Process(s2, s1, token);

            await ts.Task;
        }

        private static async Task Process(Stream sIn, Stream sOut, CancellationToken token)
        {
            byte[] buf = new byte[0x10000];
            int len = 0;
            do
            {
                len = await sIn.ReadAsync(buf, 0, buf.Length, token);
                await sOut.WriteAsync(buf, 0, len, token);
            }
            while (len > 0 && !token.IsCancellationRequested);

            ts.SetResult(true);
        }
    } 
```

# javascript - 检索要提交的字段的标记位置

> ID：12287590
> 
> 赞同：1
> 
> 时间：2012-09-05T18:25:58.730
> 
> 标签：javascript, google-maps

我有来自 Google API 文档的代码。它正是我想要的，除了我需要能够在放置标记后获得标记的纬度和经度。

在我的网站中，我启用了能够在地图上选择位置的选项，但我需要以某种方式从客户设置的标记中获取纬度和经度信息，特别是在隐藏字段中，以便我可以存储它们数据发布时`$_POST`。

我现在的代码是：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=jsdlkajslkdjaslkdja&sensor=false&language=ar&region=SAU">
    </script>
    <script type="text/javascript">
var map;
var markersArray = [];

function initialize() {
  var haightAshbury = new google.maps.LatLng(26.1631, 50.2044188);
  var mapOptions = {
    zoom: 7,
    center: haightAshbury,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };
  map =  new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  google.maps.event.addListener(map, 'click', function(event) {
    addMarker(event.latLng);
  });
}

function addMarker(location) {
  marker = new google.maps.Marker({
    position: location,
    map: map
  });
  markersArray.push(marker);
}

// Removes the overlays from the map, but keeps them in the array
function clearOverlays() {
  if (markersArray) {
    for (i in markersArray) {
      markersArray[i].setMap(null);
    }
  }
}

// Shows any overlays currently in the array
function showOverlays() {
  if (markersArray) {
    for (i in markersArray) {
      markersArray[i].setMap(map);
    }
  }
}

// Deletes all markers in the array by removing references to them
function deleteOverlays() {
  if (markersArray) {
    for (i in markersArray) {
      markersArray[i].setMap(null);
    }
    markersArray.length = 0;
  }
}
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

我主要需要 JS 方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:41:48.850

有一个标记数组变量，其中包含所有标记。

遍历数组，您将使用 `item.getPosition().lat()`and获得每个项目的 lat/lng`item.getPosition().lng()`

* * *

**`<edit>`**

限制为 1 个标记很容易。更改此行：

```
google.maps.event.addListener(map, 'click', function(event) { 
```

进入这个：

```
google.maps.event.addListenerOnce(map, 'click', function(event) { 
```

**`</edit>`**

# php - 带有str_replace的多个file_put_contents？

> ID：12287593
> 
> 赞同：0
> 
> 时间：2012-09-05T18:26:18.407
> 
> 标签：php

我正在尝试将文件中字符串的多个部分替换为`file_put_contents`. 本质上，该函数所做的是在文件中找到一个特定的短语（在`$new`and`$old`数组中并替换它。

```
$file_path = "hello.txt";
$file_string = file_get_contents($file_path);
function replace_string_in_file($replace_old, $replace_new) {
    global $file_string; global $file_path;
    if(is_array($replace_old)) {
        for($i = 0; $i < count($replace_old); $i++) {
            $replace = str_replace($replace_old[$i], $replace_new[$i], $file_string);
            file_put_contents($file_path, $replace); // overwrite
        }
    }
}
$old = array("hello8", "hello9"); // what to look for
$new = array("hello0", "hello3"); // what to replace with
replace_string_in_file($old, $new); 
```

hello.txt 是：`hello8 hello1 hello2 hello9`

不幸的是它输出：`hello8 hello1 hello2 hello3`

因此，当它应该输出 2 时，它只输出 1 更改： `hello0 hello1 hello2 hello3`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T18:30:15.097

那是一个文件，为什么每次替换后都要输出呢？您的工作流程应该是

```
a) read in file
b) do all replacements
c) write out modified file 
```

换句话说，将你的 file_put_contents() 移到你的循环之外。

同样，str_replace 将接受其“todo”和“replacewith”数组的数组。无需遍历您的输入。所以基本上你应该有

```
$old = array(...);
$new = array(...);

$text = file_get_contents(...);
$modified = str_replace($old, $new, $text);
file_put_contents($modified, ....); 
```

您的主要问题是您编写的 str_replace 从未使用更新的字符串。您经常为每次替换使用相同的 ORIGINAL 字符串，

```
$replace = str_replace($replace_old[$i], $replace_new[$i], $file_string); 
                                                            ^^^^^^^^^^^---should be $replace 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:30:20.107

您不会在每次迭代时更新 $file_string 。即，您在循环开始时设置一次，替换第一对，然后第二次调用 replace 再次使用原始 $file_string。

# sql-server - SQL：如何检查一个表中不存在于另一个表中的记录？

> ID：12287614
> 
> 赞同：1
> 
> 时间：2012-09-05T18:27:50.617
> 
> 标签：sql-server, exists

我想查找在一个表中但不在另一个表中的记录。除了记录的形成方式不同。所以我想确定我想用来比较的列。我以为我已经使用以下代码解决了问题，但它似乎不起作用（返回零记录）...

```
SELECT A.Name, A.Position, A.[Year]
  FROM TABLE A
 WHERE NOT EXISTS (

 SELECT B.Name, B.Position, B.[Year]
   FROM TABLE B
) 
```

或者我应该通过某种加入来做到这一点？谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T18:29:17.607

您缺少将`WHERE`两个表相互比较的子句：

```
SELECT A.Name, A.Position, A.[Year]
  FROM TABLE A
 WHERE NOT EXISTS (

 SELECT B.Name, B.Position, B.[Year]
   FROM TABLE B
   WHERE B.Name = A.Name AND B.Position = A.Position AND B.[Year] = A.[Year]
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T18:32:59.333

假设您想使用所有三列进行比较，您可以使用反连接。

```
SELECT A.Name, A.Position, A.[Year]
  FROM TABLE_A A
     LEFT JOIN TABLE_B B
     ON a.name = b.name
         and a.position = b.position 
         and a.[Year] = b.[Year]
WHERE
   b.name is null 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T18:40:50.917

您可以在表 b 上使用左外连接和 where 子句查找空值。

我假设第一个查询中的所有内容都来自表 A，第二个查询中的所有内容都来自表 B

```
Select A.Name, A.Position, A.[Year]
from A
Left Join B on A.Name = B.Name and A.Position = B.Position and A.[Year] = B.[Year]
where B.Name is Null 
```

# ruby - 红宝石和继承

> ID：12287618
> 
> 赞同：0
> 
> 时间：2012-09-05T18:28:07.717
> 
> 标签：ruby, class, inheritance

我试图理解继承：

```
class Car
  @@wheels = 4
  def wheel
    @@wheels
  end
end

class StretchLimo < Car
  @@wheels = 6
  def whee
    @@wheels
  end
  def turn_on_television
  end
end 
```

我像这样实例化一些对象：

```
moe = Car.new
larry = StretchLimo.new 
```

当我这样做时`moe.wheel`，我得到`6`，当我期待时`4`。

我正在关注的 Ruby 教程说它应该是`4`. `Larry.whee`显然应该返回`6`。

顺便说一句，我添加了 " `wheel`" 和 " `whee`" 函数，以便我可以看到值。谁能解释这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:49:53.267

Ruby 中的类变量既[奇怪](https://stackoverflow.com/questions/2084490/ruby-class-variables)又[令人困惑](http://www.oreillynet.com/ruby/blog/2007/01/nubygems_dont_use_class_variab_1.html)。

实现您想要的一种惯用方法是：

```
class Car
  def wheels
    4
  end
end

class StretchLimo < Car
  def wheels
    6
  end
end

Car.new.wheels #=> 4
StretchLimo.new.wheels #=> 6 
```

发生的事情是类变量在类的所有实例之间*共享。*因为`StrechLimo`是`Car`实例的子类`StrechLimo`也看到了这个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:38:56.443

`@@`是一个类变量，因此它在从给定类和所有派生类实例化的所有对象之间共享。因为 Ruby 是解释型的，所以在您实例化一个`StretchLimo`对象之前，它不应该查看任何`StretchLimo`代码，所以如果您执行以下操作：

```
moe = Car.new
moe.wheel # should give 4
larry = StretchLimo.new
moe.wheel # should give 6 
```

因为当`StretchLimo`被解释时，它会将`@@wheels`类变量更新为`6`. 另一方面，如果您声明“轮子”只有一个“ `@`” ( `@wheels`)，它将是特定于对象本身的实例变量，您将获得您喜欢的行为。

# fullcalendar - FullCalendar 似乎不支持 Google-calendar-api v3？

> ID：12287621
> 
> 赞同：0
> 
> 时间：2012-09-05T18:28:23.457
> 
> 标签：fullcalendar, google-calendar-api

FullCalendar 对 Google-calendar-api-v2 的公共/私有 xml gdata 提要有很好的支持。但是，这个 google-calendar-api 版本已经被 google 贬值了。Fullcalendar 是否支持处理来自 Google-Calendar-Api-v3 的 json 提要？如果是这样，任何人都可以分享更多细节。

如果 fullcalendar 当前不支持 gcal v3，是否有计划在不久的将来添加支持？

谢谢。

# sharepoint - SharePoint - 内容查询 Web 部件：查找列值和 XSL

> ID：12287623
> 
> 赞同：2
> 
> 时间：2012-09-05T18:28:28.403
> 
> 标签：sharepoint, xslt, cqwp

有一个带有查找字段的列表。并且有一个 CQWP Web 部件使用此列表作为源并使用添加到 Itemstyle.xsl 的自定义 XSL 样式。还有一个问题是如何将此字段呈现为链接？

字段名称是“类别”和

```
<xsl:value-of select="@Category" /> 
```

返回带有项目标题的字符串（如“某些类别”）。但我需要一个 URL 或 ID。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T14:56:28.480

尝试这样的事情：

```
<a>
    <xsl:attribute name="href">
        <xsl:value-of select="@Url" />
    </xsl:attribute>
    <xsl:value-of select="@Category" />
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-19T21:32:54.217

使用禁用输出转义，例如：

```
{less than symbol}xsl:value-of disable-output-escaping="yes" select="@Category" /{greater than symbol} 
```

# android - 仅在使用 ANT 运行测试时库项目类的 NoClassDefFoundError

> ID：12287629
> 
> 赞同：1
> 
> 时间：2012-09-05T18:29:15.217
> 
> 标签：android, unit-testing, ant, robolectric

我添加`ViewPagerIndicator`到我的项目（它是一个 Android 库项目）中，我的测试在 IntelliJ 上运行良好，但是当我从 ANT 运行它们时失败。需要明确的是，只有从这个 Android 库项目中引用类的测试失败了，其余的都通过了，没有任何问题。我猜我的 build.xml 中有些地方不对劲？还有其他人遇到这个吗？

这是堆栈跟踪：

> java.lang.NoClassDefFoundError: Lcom/viewpagerindicator/CirclePageIndicator; com.google.inject.internal.util.$ComputationException: java.lang.NoClassDefFoundError: Lcom/viewpagerindicator/CirclePageIndicator; 在 com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:553) 在 com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:419) 在 com .google.inject.internal.util.$CustomConcurrentHashMap$ComputingImpl.get(CustomConcurrentHashMap.java:2041) 在 com.google.inject.internal.FailableCache.get(FailableCache.java:50) 在 com.google.inject.internal。 com.google.inject.internal.InjectorImpl.getMembersInjector(InjectorImpl.java:950) 上的 MembersInjectorStore.get(MembersInjectorStore.java:65) com.google.inject.internal.InjectorImpl.getMembersInjector(InjectorImpl.java:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:01:51.117

我想通了。

在**build.xml**中目标`junit`下的任务中（我从 Github 上的[AndroidIntellijStarter](https://github.com/pivotal/AndroidIntelliJStarter/blob/master/build.xml)项目中获取了片段），您需要添加一个指向**classes.jar**文件的引用，该文件是为您包含在项目中的每个库项目构建的。`test`**`classpath`**

 ****可能有一种更优雅的方式来实现这一点，但这是我在短时间内想出的：

```
<target name="test" depends="compile.tests" description="test all">
        <mkdir dir="${out.dir}/out/reports/tests"/>
        <junit showoutput="true" failureproperty="junit.failure">
            <formatter type="plain" usefile="false" if="junit.console.out"/>
            <formatter type="plain"/>
            <formatter type="xml"/>
            <batchtest todir="${out.dir}/out/reports/tests">
                <fileset dir="${tested.project.test.absolute.dir}">
                    <include name="**/*Test.java"/>
                </fileset>
            </batchtest>
            <classpath>
                <!-- Project -->
                <pathelement path="${out.classes.absolute.dir}"/>
                <pathelement path="${out.test.classes.absolute.dir}"/>
                <fileset dir="${extensible.libs.classpath}" includes="**/*.jar"/>

                <!-- Library Project Here -->
                <fileset dir="path/to/classes/jar" includes="*.jar"/>

                <!-- Robolectric -->
                <fileset dir="submodules/robolectric/lib/main" includes="*.jar"/>
                <pathelement path="submodules/robolectric/bin/mainClasses"/>

                <!-- Android -->
                <path refid="android.target.classpath"/>
            </classpath>
        </junit>
        <fail if="junit.failure" message="Unit test(s) failed.  See reports!"/>
</target> 
```****

# javascript - 触发下拉菜单的 onchange 事件时使用 JavaScript 提交表单

> ID：12287632
> 
> 赞同：0
> 
> 时间：2012-09-05T18:29:20.290
> 
> 标签：javascript, forms

我有一个带有提交按钮的下拉列表，但是当用户从下拉列表中选择一个选项时，我想消除该按钮，并通过 Ajax 发送表单。

**这是代码：**

```
<select name="pin" id="pin"   class="search_box" >
    <option value="">Zip Code</option>

    <?php
    include("conn.php");
    $pin=$_REQUEST[pin];
    $city=$_REQUEST[city];
    $kk="select * from zip order by zip";
    $jj=mysql_query($kk);
    while($mm=mysql_fetch_array($jj))
    {
    ?>

        <option value="<?php echo $mm[zip]?>"<?php if($mm[zip]==$pin){echo "selected";}?>>        
        <?php
            echo $mm[zip]
        ?>    
        </option>

    <?php } ?>

</select>
<input type="button" id="findbutton" name="search_button" value="Go" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:41:35.850

好的，这是一个使用 jquery 的版本。

```
$('#pin').on('change', function(e){
  e.preventDefault();
  var form = this.form;
  var data = $(form).serialize();
  $ajax({
    data: data,
    url: form[0].action
  })
}) 
```

# datetime - 将一个日期时间筛选器基于 SSRS 报表生成器中的另一个日期时间筛选器

> ID：12287633
> 
> 赞同：0
> 
> 时间：2012-09-05T18:29:34.547
> 
> 标签：datetime, reporting-services, filter, report

如果选择结束时间过滤器早于开始时间过滤器，我希望显示错误消息（失败）报告，或者不允许用户选择在当前选择的开始时间之前的结束时间。

有任何想法吗？我不想失去结束时间过滤器的弹出日历功能。我也不想根据开始时间为结束时间设置任何类型的默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:42:50.777

我认为错误消息是您的选择。

我之前看过这个，我找不到太多关于它的东西。除非您想将有效的可用日期放入下拉列表中，否则无法真正限制用户可以选择的内容。如果您想要 datepicker（弹出日历）并且您不想根据 startdate 为结束日期设置默认值，那么只需让用户选择，检查 @EndDate < @StartDate 是否在您的查询或表达式中您选择向用户显示您的消息的项目。

希望能帮助到你

# python - Python 美味派，发布 XML

> ID：12287634
> 
> 赞同：0
> 
> 时间：2012-09-05T18:29:35.623
> 
> 标签：python, django, tastypie

你可以将xml发布到sushipypie吗？

我正在尝试发布这样的内容：

```
<?xml version="1.0" ?>
<brand>
  neat
</brand> 
```

到具有品牌属性的模型资源`http://127.0.0.1:8000/api/v1/myentry/`。我回来了：

```
AttributeError: 'str' object has no attribute 'items' 
```

xml应该是什么格式？我能找到的所有示例都是用于发布 json，而不是 xml。

谢谢您的帮助。

# 编辑

我还应该注意，在 XML 数据中，我希望能够设置限制和偏移量以及过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:37:20.540

是的你可以！

在查看[http://django-tastypie.readthedocs.org/en/latest/interacting.html#creating-a-new-resource-post的文档时](http://django-tastypie.readthedocs.org/en/latest/interacting.html#creating-a-new-resource-post)

有一个json的例子：

```
curl --dump-header - \ 
    -H "Content-Type: application/json" -X POST \
    --data '{"title": "Hello JSON", "date": "1970-01-01"}' \
    http://x.x.x.x/api/entry/ 
```

如您所见，内容类型和 json 对象随请求一起发送。如果您想发送 xml，您只需替换内容类型并发送一个 xml 对象。xml对象的格式看[http://xxxx/api/entry/?format=xml就可以看到](http://x.x.x.x/api/entry/?format=xml)

这导致：

```
curl --dump-header - \
    -H "Content-Type: application/xml" -X POST \
    --data '<object><title>Hello XML</title><date>200-01-01</date></object>' \
    http://x.x.x.x/api/entry/ 
```

# .htaccess - 使用 .htaccess 自定义默认目录显示

> ID：12287637
> 
> 赞同：0
> 
> 时间：2012-09-05T18:29:42.637
> 
> 标签：.htaccess

我想自定义目录的默认列表，包括页面的页眉和页脚。我尝试搜索此信息，但大多数信息包括如何禁用对目录的访问或提供对目录的访问。我关心的是更改字体，在标题中包含一些图像（即更改默认显示的页面布局，并放置一个注销选项）并显示目录。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:10:04.910

我认为这篇文章可能会有所帮助： http: [//perishablepress.com/better-default-directory-views-with-htaccess/](http://perishablepress.com/better-default-directory-views-with-htaccess/)

虽然，您在上面提到您还需要添加注销选项，这意味着需要进行一些后端编码。你使用什么编程语言？使用后端语言（如 PHP、.Net、Java 等）来获取文件/目录的内容会更容易，这样您就可以完全控制。.htaccess 文件很好，但是对于您正在尝试做的事情，它似乎涉及的不仅仅是严格使用 .htaccess 文件的功能。

无论哪种方式，上面的帖子都应该帮助您“更改字体，在标题中包含一些图像并更改页面布局”，只是不允许登录/注销。

# ios - iOS/Xcode：在我的搜索范围之外找不到 predicateForEventsWithStartDate 和 startDate 和 endDate 的经常性事件

> ID：12287640
> 
> 赞同：1
> 
> 时间：2012-09-05T18:30:00.580
> 
> 标签：ios, xcode, ekevent

在 iOS 中，事件由它们的 startDate 和 endDate 以及它们的重复规则存储。如果我想获取接下来 3 天的所有事件，我只会在接下来的三天内获取开始日期的事件。但是：我没有收到重复发生的事件，并且它们的 startDate 不在我的搜索范围内，我想原因是 iOS 日历在事件发生的所有日子里都在动态计算，但在搜索时不使用此信息以编程方式在 EKEventStore 中。

那么当它们的 startDate 超出范围并且应用了一些重复规则时，有没有办法在我的“搜索日期框架”中找到重复事件？

最好的问候，克里斯蒂安

```
NSDate *date_today = [self dateAtBeginningOfDayForDate:[NSDate date]];
NSDate *endDate = [self dateByAddingDays:3 toDate:date_today];

NSPredicate *searchPredicate = [eventStore predicateForEventsWithStartDate:date_today
                                          endDate:endDate calendars:nil];
NSArray *events = [eventStore eventsMatchingPredicate:searchPredicate]; 
```

# ruby-on-rails - 与 Rack 应用程序共享会话/哈希

> ID：12287641
> 
> 赞同：0
> 
> 时间：2012-09-05T18:30:06.183
> 
> 标签：ruby-on-rails, ruby, rack, rack-middleware

我对 Rack 很陌生，我正在玩它，我很想在我所有的机架应用程序中分享一些会话或哈希表，

假设我有以下 config.ru

```
require "rack"
require "./my_app.rb"
require "./auth.rb"

use Rack::Session::Pool, :domain => 'example.com', :expire_after => 60 * 60 * 24
use Auth
run MyApp.new 
```

我希望Auth检查内存中的user_id，如果是第一次请求，则从db中获取数据，下次具有相同id的请求不会触发User.find，我不介意任何类型的实现像共享哈希或任何东西，但对于这个例子，我使用了会话 []，我非常感谢它给我任何关于如何使事情工作的提示，我不是在这里寻找真正的身份验证，而不是在这么多的人之间共享一个密钥红宝石工艺。

假设我将在 nginx 下运行 10 个瘦机架实例，所以我希望与所有进程共享会话/哈希。

```
And auth.rb : 

class Auth

  def initialize(app)
    @app = app
  end

  def call(env)     
    @request = Rack::Request.new(env)
    # here I want to find a way to search for key user_id and if I find it do nothing otherwise to set the value for the key 
    session[:user_id] ||= User.find(request.params[:user_id])
    @app.call(env)
  end
end 
```

# r - for 循环创建向量 r

> ID：12287645
> 
> 赞同：1
> 
> 时间：2012-09-05T18:30:18.387
> 
> 标签：r, if-statement, for-loop

我正在尝试创建一个函数来计算 R 中的 Box-Cox 变换，您可以在公式中迭代 lambda (lambdas) 的值以最大化 L。我最终想要的是 L 的向量，这样对于 lambda 中的所有 i ，有对应的L值。

```
y <- c(256,256,231,101,256,213,241,246,207,143,287,240,262,234,146,255,184,161,252,229,283,132,218,113,194,237,181,262,104)
df <- 28
n=29
lambdas <- seq(-3,3,0.001)
L <- c(rep(NA,length(lambdas)))

for(i in lambdas) {
if(i != 0) {
yprime <- (((y^i)-1)/i)
} else 
{   yprime <- log(y)
}
st2 <- var(yprime)
L <- (((-df/2)*(log(st2))) + ((i-1)*(df/n)*(sum(log(y)))))
} 
```

我通常以 L 作为 1 的向量结束，并计算最终迭代。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:03:32.400

使用 seq_along 为`lambdas[]`和生成索引`L[]`

```
for(i in seq_along(lambdas)) {
   if(i != 0) {
     yprime <- (((y^lambdas[i])-1)/lambdas[i])
     } else { 
     yprime <- log(y)
              }
   st2 <- var(yprime)
   L[i] <- (((-df/2)*(log(st2))) + ((lambdas[i]-1)*(df/n)*(sum(log(y)))))
 }
plot(L) 
```

# ruby - 如何从 Ruby 内部检查 RVM 版本？

> ID：12287647
> 
> 赞同：1
> 
> 时间：2012-09-05T18:30:29.043
> 
> 标签：ruby, rvm, environment-variables

在采取行动之前，我需要检查 RVM 版本。这似乎是一个简单的问题，但我很难在一个普通的旧 Ruby 应用程序中找到与 RVM 相关的变量列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:30:29.043

RVM 版本信息存储在 shell 的环境变量中。您可以像这样从 Ruby 访问 rvm_version：

```
puts "RVM version is #{ENV['rvm_version']}" 
```

# actionscript-3 - AS3：如何知道 textField 是否是动态的

> ID：12287653
> 
> 赞同：1
> 
> 时间：2012-09-05T18:30:55.467
> 
> 标签：actionscript-3, flash, textfield

是否可以知道显示对象内的文本字段是否是动态的？我正在循环显示对象的所有子项，我只想找到动态文本字段（我也输入了 tf，我想避免它们）THX

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:34:04.007

使用 type 属性，它将返回一个字符串 TextFieldType 枚举值：

```
//Assuming a DisplayObjectContainer called 'doc':
for (var i:int = 0; i < doc.numChildren; i++) 
{
    var tf:TextField = doc.getChildAt(i) as TextField;
    if (tf != null) // Will be null if the child isn't a TextField
    {
        switch(tf.type)
        {
            case TextFieldType.DYNAMIC:
                trace("Dynamic");
                break;
            case TextFieldType.INPUT:
                trace("Input");
                break;
        }
    }
} 
```

文档很好很清晰：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#type](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#type)

# api - 是否可以通过 Salesforce 中的 SOAP API 检索加密的列值？

> ID：12287660
> 
> 赞同：0
> 
> 时间：2012-09-05T18:31:40.290
> 
> 标签：api, salesforce

我正在创建一个 java 应用程序。我正在使用 salesforce api（[此处为示例](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_quickstart_steps.htm)）从 Salesforce 检索敏感数据。除了来自加密列的数据外，所有数据都可以轻松检索。它总是返回为空。我确实有权查看加密数据。

是否有阻止发送加密数据的 api 限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:37:58.797

Can you confirm that your profile has enabled these permission: "View Encrypted Data" and "Modify All Data" permission?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:38:28.647

我收到了 Salesforce 的以下回复：

> 为了解决此问题，您需要克隆系统管理员配置文件并将该配置文件分配给所需的用户。之后，您需要获取具有克隆配置文件的用户的会话 ID，并在所需的代码或 API 工具中使用此会话 ID。
> 
> 注意：如果您使用系统管理员配置文件会话 ID，您将无法检索加密值。只有克隆的配置文件可以检索值。

# c++ - 如何解决似乎不太可能是内存不足问题的 bad_alloc？

> ID：12287664
> 
> 赞同：1
> 
> 时间：2012-09-05T18:31:49.773
> 
> 标签：c++, initialization, bad-alloc

我正在编写一些代码，用于在 C++ 中使用 BFS 搜索迷宫（我的主要语言是 Python，但我想稍微锻炼一下我的 C++ 大脑......），我偶然发现了这个奇怪的错误。

以下是相关的数据结构：

```
struct Maze {
  std::pair<int, int> start;
  std::pair<int, int> goal;
  std::pair<int,int> dims;
  std::set<std::pair<int, int> > passable;
};

struct SearchNode {
  std::pair<int, int> cell;
  Maze* pMaze;
  SearchNode* parent;
  std::vector<SearchNode*> children;
}; 
```

假设我已经有了一个`void parseFile(Maze* maze, char* filename)`读取迷宫文本文件的方法，存储起始和目标方块的 (row, col) 对以及对应于“可通过”的 (row, col) 对的集合在迷宫中。

还有一些其他功能：

```
bool isPassable(Maze* maze, std::pair<int,int> testCell);
std::vector<SearchNode*> getPassableChildren(SearchNode sn);
void mazeSearch(Maze* maze); 
```

以下是它们的实现：

```
// <...snip...>
inline bool isPassable(Maze* maze, std::pair<int,int> cell) {
  return maze->passable.find(cell) != maze->passable.end();
}

std::vector<SearchNode*> getPassableChildren(SearchNode sn) {
  // Store a cached copy of the children, so if we require multiple queries
  // we do not have to re-compute children.
  if(sn.children.empty()) {
    Maze* mazePointer = sn.pMaze;
    int r = sn.cell.first;
    int c = sn.cell.second;
    for(int i = 0; i <= 2; ++i) {
      for(int j = 0; j <= 2; ++j) {
        if (!(i == 1 && j == 1)) {
          std::pair<int,int> childCell(r+i-1, c+j-1);

          if(isPassable(mazePointer, childCell)) {
            // Build child SN
            SearchNode child;
            child.cell = childCell;
            child.parent = &sn;
            child.pMaze = mazePointer;
            sn.children.push_back(&child);
          }
        }
      }
    }
  }
  return sn.children;
}

void mazeSearch(Maze* maze) {
  std::set<std::pair<int,int> > visited;
  std::deque<SearchNode> workQueue;

  // Create root node.
  SearchNode root;
  root.cell = maze->start;
  root.parent = NULL;
  root.pMaze = maze;

  workQueue.push_back(root);
  visited.insert(root.cell);

  while(!workQueue.empty()) {
    SearchNode sn = workQueue.front();
    workQueue.pop_front();

    for(SearchNode* passableNeighbor : getPassableChildren(sn))  {
      // THIS IF-STATEMENT IS BROKEN
      if(passableNeighbor->cell.first == maze->goal.first &&
         passableNeighbor->cell.second == maze->goal.second) {
        printf("Found a path.\n");
        return;
      }
      // Check to make sure it is not in our visited set.
      // THIS STATEMENT IS ALSO BROKEN
      if (visited.find(passableNeighbor->cell) == visited.end()) {
        workQueue.push_back(*passableNeighbor);
        visited.insert(passableNeighbor->cell);
      }
    }
  }
  printf("No path found.\n");
}
// <...snip...> 
```

该代码在 GCC 4.6.3 下编译良好：`$g++ maze.cc -g -std=c++0x` 但是，`$./a.out smallMaze.txt`产生

```
terminate called after throwing an instance of 'std::bad_alloc'
  what():  std::bad_alloc 
```

我已经对 Valgrind 和 GDB 进行了一些健全性检查：Valgrind`Conditional jump or move depends on uninitialised value(s)`在开头的那一行中指出

`if(passableNeighbor->cell.first == maze->goal.first`

以及附近进行设置查找的线路，

`if(visited.find(passableNeighbor->cell) == visited.end())`

当我在 GDB 中检查这些 passableNeighbor 指针时，*看起来*底层的 SearchNode 对象没有正确初始化它的子单元格，并且出现了各种奇怪的值。我怀疑这与我对 C++ 如何分配对象缺乏了解有关。

所以很明显，潜在的问题是 passableNeighbor 对象以某种方式在其中包含损坏的数据。这是我如何编写 getPassableChildren() 方法的产物吗？还有其他想法吗？

我查看了 std::bad_alloc ，似乎这个异常通常与内存不足有关，但是我在 BFS 期间扩展的第一个节点上遇到了这个错误，所以我似乎极不可能达到任何内存限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:39:41.313

这部分有问题

```
 if(isPassable(mazePointer, childCell)) {
        // Build child SN
        SearchNode child;
        child.cell = childCell;
        child.parent = &sn;
        child.pMaze = mazePointer;
        sn.children.push_back(&child);
      } 
```

`children`因为它用指向局部变量的指针填充。当您离开 if 语句时，所有指针都无效。

如果你`child`在这里创建一个新的，你最好存储它的值而不是存储一个指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:40:21.107

您正在向子向量添加局部变量的地址，这是一个很大的禁忌

```
SearchNode child;
child.cell = childCell;
child.parent = &sn;
child.pMaze = mazePointer;
sn.children.push_back(&child); 
```

使用某种分配方式，或者让你的孩子成为`vector<SearchNode>`

例如：

```
SearchNode *child = new SearchNode();
child->cell = childCell;
child->parent = &sn;
child->pMaze = mazePointer;
sn.children.push_back(child); 
```

然后你需要稍后清理它，或者制作你的向量`vector<unique_ptr<SearchNode>>`并继续前进，`unique_ptr<SearchNode>(child)`并且将为你完成取消分配

# actionscript-3 - Flex/Actionscript通过分析audioBytesPerSecond判断NetStream是否有音频

> ID：12287665
> 
> 赞同：3
> 
> 时间：2012-09-05T18:31:51.960
> 
> 标签：actionscript-3, apache-flex, audio, actionscript, flex3

我需要“查看” NetStream 并确定我是否正在接收音频。根据我的调查，我可以使用来自 NetStreamInfo 的属性 audioBytesPerSecond：

> “(audioBytesPerSecond) 指定 NetStream 音频缓冲区以每秒字节数填充的速率。该值计算为最后一秒接收到的音频数据的平滑平均值。”

我还了解到 NetStream 可能包含来自网络的一些开销字节，所以这是确定 NetStream 是否正在播放音频（而不仅仅是噪音）的最小合理 audioBytesPerSecond 值？这种分析可以这样进行吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:45:24.700

是的，你可以这样做。然而，这是相当主观的。

尝试找到适合您的阈值。我们过去使用 5 千比特/秒。如果数据量低于此值，他们可能不会发送任何音频。请注意，我们正在使用该`stream.info.byteCount`属性（如果您使用 ，您可能需要稍低的值`auiodBytesPerSecond`）。

`audioBytesPerSecond`如果您对着麦克风说话并定期检查或其他可用的计数器/统计数据，这很容易观察到。

# java - java中的filewatcher监视windows文件夹并通知linux

> ID：12287668
> 
> 赞同：0
> 
> 时间：2012-09-05T18:32:00.270
> 
> 标签：java, ftp, filesystemwatcher

我有一个用例，我在 Linux 文件系统上运行的模块应该被通知远程 Windows 共享中的任何新文件。

是否有任何内置功能？我做了一些基本的谷歌搜索，发现了一些文件观察器（C# 中的文件系统观察器）之类的东西。

它对 Java 6 有用吗？对于我必须在文件出现时下载文件的 FTP 调用来说，这将是多么容易和高效。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:33:43.437

从 java 7 开始就有一个文件观察器。有关此信息，请参见[此处](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)。我不确定这是否适用于远程 Windows 共享，因此可能值得尝试一下。

如果您不能使用 java 7，那么可能值得使用[ScheduledExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)（从 java 5 开始）并每隔 x 秒手动检查远程目录

## 编辑

不确定您建议的库是否需要 java 7。写一些扫描的东西并不难，所以我在下面为你写了一个单元测试。我还没有测试它，所以它可能有几个错误，但它应该几乎在那里。它基本上每秒扫描一个目录，然后将打印到已添加或删除的 sysout 文件。它检查您指定的目录和所有子目录。

```
public void test() {
    ScheduledExecutorService ex = Executors.newSingleThreadScheduledExecutor();
        ex.scheduleAtFixedRate(new Runnable(){
    @Override
    public void run() {
        scanDirectory(new File("."));
    }}, 1, 1, TimeUnit.SECONDS);
}

private void scanDirectory(File directory) {
    Set<File> before = new HashSet<File>();
    Set<File> after = new HashSet<File>();
    addFiles(directory, after);

   for (File f :after) {
      if (!before.contains(f)) {
         System.out.format("new file added %s", f);     
      }
   }
   for (File f :before) {
        if (!after.contains(f)) {
            System.out.format("file removed %s", f);    
        }
    }

    before.clear();
    before.addAll(after);
}

private void addFiles(File file, Collection<File> allFiles) {
    File[] files = file.listFiles();
    if (files != null) {
        for (File f : files) {
            allFiles.add(f);
            addFiles(f, allFiles);
        }
    }
} 
```

# shell - sed：参数列表太长

> ID：12287669
> 
> 赞同：6
> 
> 时间：2012-09-05T18:32:09.990
> 
> 标签：shell, sed

我在 Unix 环境中创建了一个脚本。在脚本中，我使用`sed`如下所示的命令从文件中删除了一些行。我想从文件中删除一组指定的行，不一定是简单的范围，由行号指定。

```
sed -i "101d; 102d; ... 4930d;" <file_name> 
```

当我执行此操作时，它显示以下错误：

```
sed: Arg is too long 
```

你能帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T18:42:13.537

如果要删除连续范围的行，可以指定行号范围：

```
sed -i '101,4930d' file 
```

如果要删除一些不能轻易表示为范围的任意行集，可以将命令放在文件中而不是命令行中，然后使用`sed -f`.

例如，如果`foo.sed`包含：

```
2d
4d
6d
8d
10d 
```

那么这个：

```
sed -i -f foo.sed file 
```

将从中删除第 2、4、6、8 和 10 行`file`。将命令放在文件中而不是放在命令行中可以避免对命令行长度的限制。

如果要删除的行有某种模式，则可以考虑使用更复杂的工具，例如 Awk 或 Perl。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-08T19:43:09.253

我有这个完全相同的问题。

我最初将巨大的 sed 命令`sed -i "101d; 102d; ... 4930d;" <file_name>`放在一个文件中并尝试作为 bash 脚本执行。

修复 - 仅将删除命令放在文件中并将该文件作为 sed 脚本运行。我能够执行之前未能运行的 18,193 个删除命令。

`sed -i -f to_delete.sed input_file`

to_delete.sed：

`101d;102d;...4930d`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:56:25.823

这可能对您有用（GNU sed 和 awk）：

```
cat <<\! >/tmp/a
> 2
> 4
> 6
> 8
> !
seq 10 >/tmp/b
sed 's/$/d/' /tmp/a | sed -f - /tmp/b
1
3
5
7
9
10
awk 'NR==FNR{a[$0];next};FNR in a{next};1' /tmp/{a,b}
1
3
5
7
9
10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T19:29:19.600

使用 awk：

```
awk ' NR < 101 || NR > 4930 { print } ' input_file 
```

# javascript - 中的链接下拉选项每个下拉选项是否可以在选择时链接到某个地方而无需外部按钮？ <select><option value="x">x</option> <option value="y">y</option></select> 如何配置 Amazon S3 CORS 以便 Firefox 加载远程托管的网络字体？我一直在尝试将 Amazon S3 设置为 webfont 文件主机，以便在 Tumblr 上使用 webf

> ID：12287672
> 
> 赞同：38
> 
> 时间：2012-09-05T18:32:19.580
> 
> 标签：javascript, html, select, drop-down-menu

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-09-05T18:36:47.443

您可以使用 onChange 属性。就像是：

```
<select onChange="window.location.href=this.value">
    <option value="www.google.com">A</option>
    <option value="www.aol.com">B</option>
</select> 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-09-05T18:36:17.463

添加一个 onchange 事件处理程序并将页面位置设置为该值

```
<select id="foo">
    <option value="">Pick a site</option>
    <option value="http://www.google.com">x</option>
    <option value="http://www.yahoo.com">y</option>
</select>

<script>
    document.getElementById("foo").onchange = function() {
        if (this.selectedIndex!==0) {
            window.location.href = this.value;
        }        
    };
</script> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-05T18:54:03.987

...或者如果您想要/需要保持您的选项“价值”不变，只需添加一个新属性：

```
<select id="my_selection">
<option value="x" href="/link/to/somewhere">value 1</option>
<option value="y" href="/link/to/somewhere/else">value 2</option>
</select>

<script>
document.getElementById('my_selection').onchange = function() {
    window.location.href = this.children[this.selectedIndex].getAttribute('href');
}
</script> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-08-18T19:48:46.520

也许这会有所帮助：

```
<select onchange="location = this.value;">
 <option value="home.html">Home</option>
 <option value="contact.html">Contact</option>
 <option value="about.html">About</option>
</select> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-23T15:51:01.290

这是一个老问题，我知道，但对于 2019 年的窥视：

像上面一样，如果您只想更改 URL，您可以这样做：

```
<select onChange="window.location.href=this.value">
    <option value="www.google.com">A</option>
    <option value="www.aol.com">B</option>
</select> 
```

但是如果你想让它像一个标签一样，你可以这样做`"./page"`，`"#bottom"`或者`"?a=567"`使用`window.location.replace()`

```
<select onChange="window.location.redirect(this.value)">
    <option value="..">back</option>
    <option value="./list">list</option>
    <option value="#bottom">bottom</option>
</select> 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-11-05T10:16:37.583

您可以使用以下代码：

```
<select id="menu" name="links" size="1" onchange="window.location.href=this.value;">
    <option value="URL">Book</option>
    <option value="URL">Pen</option>
    <option value="URL">Read</option>
    <option value="URL">Apple</option>
</select> 
```

# firefox - 如何配置 Amazon S3 CORS 以便 Firefox 加载远程托管的网络字体？

> ID：12287675
> 
> 赞同：8
> 
> 时间：2012-09-05T18:32:24.943
> 
> 标签：firefox, amazon-s3, cors, webfonts

我一直在尝试将 Amazon S3 设置为 webfont 文件主机，以便在 Tumblr 上使用 webfonts。

Amazon 建议的 CORS 配置适用于除 Firefox 之外的所有设备，这与 Amazon 在 S3 中启用此新 CORS 功能之前的情况完全相同。

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
<CORSRule>
    <AllowedOrigin>http://fonttester.tumblr.com/</AllowedOrigin>
    <AllowedMethod>GET</AllowedMethod>
    <MaxAgeSeconds>3000</MaxAgeSeconds>
    <AllowedHeader>Authorization</AllowedHeader>
</CORSRule>
</CORSConfiguration> 
```

我应该使用不同的配置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:27:35.520

You have to add the below

```
<CORSRule>
    <AllowedOrigin>*</AllowedOrigin>
    <AllowedMethod>GET</AllowedMethod>
    <MaxAgeSeconds>3000</MaxAgeSeconds>
    <AllowedHeader>*</AllowedHeader>
</CORSRule> 
```

# python - 使用 Python 从 Excel 电子表格中读取 VBA

> ID：12287677
> 
> 赞同：2
> 
> 时间：2012-09-05T18:32:27.063
> 
> 标签：python, excel, vba

我想用（最好）Python 编写一个 VBA 差异程序。是否有 Python 库可以让我读取 Excel 电子表格中包含的 VBA？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T19:09:59.483

这是一些快速而肮脏的样板，可以帮助您入门。它使用 Excel COM 对象（仅限 Windows 的解决方案）：

```
from win32com.client import Dispatch
wbpath = 'C:\\example.xlsm'
xl = Dispatch("Excel.Application")
xl.Visible = 1
wb = xl.Workbooks.Open(wbpath)
vbcode = wb.VBProject.VBComponents(1).CodeModule
print vbcode.Lines(1, vbcode.CountOfLines) 
```

这将打印我为此示例记录的愚蠢宏：

```
Sub silly_macro()
'
' silly_macro Macro
'

'
    Range("B2").Select
End Sub 
```

请注意`Lines`并`VBComponents`使用基于 1 的索引。 `VBComponents`还支持按模块名称索引。另请注意，Excel 需要在路径中使用反斜杠。

要深入了解，请参阅 Pearson 的[Programming The VBA Editor](http://www.cpearson.com/excel/vbe.aspx)。（上面的例子是我从那里略读的拼凑而成的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:43:59.693

我创建了一个名为 VbaDiff 的应用程序。如果您提供两个 Excel 文件，它将比较每个文件中的 VBA 代码。您也可以从命令行运行它，或者如果您想将它与您自己的程序集成，请使用 API 附带的版本。

[您可以在http://www.technicana.com/vbadiff-information.html](http://www.technicana.com/vbadiff-information.html)找到更多信息

克里斯

# ruby-on-rails - 如何在 RSpec 中更好地调试？

> ID：12287679
> 
> 赞同：10
> 
> 时间：2012-09-05T18:32:35.380
> 
> 标签：ruby-on-rails, ruby, rspec

我是测试新手，并且在调试时遇到了麻烦，就像我通常在模型或控制器中一样。

我已经从工厂创建了一个用户（使用 FactoryGirl，如果这有区别的话），我很确定 create 方法由于保存时的验证而失败。但是，我很想知道如何调试在测试期间实例化的模型。

我试过了：

```
user.inspect
puts user
raise user.to_yaml 
```

（后者有效，但停止执行我的其余测试，并且不显示验证错误——它只证明我尝试实例化的模型的存在或不存在。）

除了将模型提升为错误之外，在测试期间没有调试输出，我唯一能做的就是跟踪我的测试数据库的日志并查看那里发生了什么，但充其量看起来很笨重。你会建议什么方法来完成我所追求的？

谢谢你的任何方向

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T19:13:02.940

得到了答案，再简单不过了（这个用户更好、更简洁地表达了我的问题：）

[如何在 rspec 测试中输出变量？](https://stackoverflow.com/questions/6025803/how-do-i-output-a-variable-in-a-rspec-test)

简短的回答，使用漂亮的打印：

pp用户

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T18:36:24.880

结帐普利茅斯：[https ://github.com/banister/plymouth](https://github.com/banister/plymouth)

它与 PRY 一起工作，在测试失败时为您提供一个不错的 REPL 和调试界面。我在一些项目中使用过它，发现它对于测试中的晦涩问题非常方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-10T13:50:58.280

您始终可以通过添加到您的测试来打开`pry`会话。`binding.pry`这样，您就可以访问在测试的确切点（如果需要，在其他地方）可用的任何内容。[有关在官方 Pry wiki](https://github.com/pry/pry/wiki/Setting-up-Rails-or-Heroku-to-use-Pry "official Pry wiki")`pry`中添加到 Rails 的更多信息

# iphone - 创建 sqlite 数据库的路径不同的 iPad 模拟器

> ID：12287682
> 
> 赞同：1
> 
> 时间：2012-09-05T18:32:56.480
> 
> 标签：iphone, objective-c

我创建了一个使用 sqlite 数据库的应用程序。第一次我在模拟器上对其进行了测试。它在模拟器上运行良好，它显示了文档目录的路径：

```
Library/Application support/iPhone simulator/5.1/Application/UUID/document/database.sqlite 
```

但是当我将我的应用程序放在 iPad 上时，当我尝试执行数据库操作时，我的应用程序突然退出，打印出我的数据库不存在的其他路径。我和这有什么关系？请给我一些解决方案来克服这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:36:07.417

您需要动态查找正确的目录。由于这是一个数据库，您可能希望将它放在文档目录中。这是一段代码来处理它：

```
[[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject] 
```

# cocoa - 如何击败框架注入？

> ID：12287686
> 
> 赞同：4
> 
> 时间：2012-09-05T18:33:14.770
> 
> 标签：cocoa, cocoa-touch, code-injection, ld-preload

是否有人强化他们的代码以试图检测注入？例如，如果有人试图通过 NSUrlConnection 拦截用户名/密码，他们可以使用`LD_PRELOAD/DYLD_LIBRARY_PATH`，为我的调用提供导出到 NSUrlConnection，然后将调用转发到真正的 NSUrlConnection。

阿里在下面提供了很好的信息，但我试图确定在恶劣的环境中应该采取什么措施，手机可能会被越狱。大多数应用程序不必关心，但一类应用程序需要 - 高完整性软件。

如果您正在硬化，您使用什么方法？是否有一种标准方法可以检测 Mac 和 iPhone 上的注入？你是如何打败框架注入的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:27:29.397

对于 iOS / CocoaTouch，不允许加载动态库*（系统框架除外）。要通过 AppStore 构建和分发应用程序，您只能链接静态库和系统框架，不能链接动态库。

因此，在 iOS 上，您不能将其用于代码注入，`LD_PRELOAD`当然也不能使用（因为您无法在 iOS 上访问此类环境变量）。

*除了越狱的 iPhone 可能之外，但是越狱他们的 iPhone 的人应该自己承担越狱的定义是解除 iOS 提供的所有证券以避免诸如注入之类的事情（所以你不能指望移除门上的锁以避免不得不使用你的钥匙......并且仍然希望你仍然可以防止小偷抢劫你的房子;-))*

这就是 iOS 上 Sandboxing + CodeSigning + No dylib 约束的优势。无法进行代码注入。

（在 OSX 上它仍然是可能的，特别是使用 LD_PRELOAD）

* * *

[编辑] 从 iOS8 开始，iOS 还允许动态框架。但由于这仍然是沙盒（您只能加载应用程序包内的代码签名框架，而不能加载来自应用程序包外的框架）注入仍然是不可能的*

**除非用户越狱了手机，但这意味着他/她选择摆脱所有保护和目的，从而将手机置于危险之中——我们无法破解手机安全，但仍然期望它提供所有保护提供的证券*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-09T15:33:41.300

这是一个特定于类 UNIX 操作系统的答案，如果它对您的问题没有意义，但我不太了解您的平台，我深表歉意。只需不要创建动态链接的可执行文件。

我可以想到两种方法来做到这一点。方法#2 可能最适合您。他们都很相似。

**对两者都很重要**，可执行文件**必须**`-static`在构建时使用静态编译

1.  方法 1 - 静态 exe，通过其受信任的完整路径手动加载共享库

通过完整路径手动`dlopen`获取所需的每个库，然后`dlsym`在运行时通过获取函数地址并将它们分配给函数指针以使用它们。您需要为要使用的每个外部函数执行此操作。我相信可重入不安全函数不会喜欢这样，所以对于那些使用静态变量的函数 - 你需要使用可重入安全版本，这些以“_r”结尾，即使用`strtok_r`而不是`strtok`

这将是困难或简单，具体取决于您的应用程序做什么以及您正在使用多少功能。

2.  方法 2 - 静态链接可执行文件，句号

您可以通过仅链接静态可执行文件来完全避免使用动态库来解决您的颠覆问题。`dlopen()/dlsym()`这将生成比该方法大得多的 exe 。使用`-static`编译标志而不是使用来构建，例如`gcc bah.c -o bah lssl`使用`gcc -static bah.c -o bah /usr/lib/libssl.a`您需要的库的静态编译版本而不是动态共享库。换句话说，在构建时使用`-static`和不使用`-l`

对于任何一种方法：

1.  构建后，用于`file bah`确认可执行文件是静态链接的。`ldd`或通过运行确认
2.  请注意，您需要系统中存在的所有要链接的库的静态编译版本。这些文件以`.a`而不是`.so`)结尾
3.  另请注意，升级系统库不会更新您的可执行文件。如果 OpenSSL 中有新的安全漏洞，您需要获取最新的 libssl.a 并重新编译它。如果您使用该`dlopen()/dlsym()`方法，则不会出现此问题，但如果符号在不同版本中发生更改，则会出现可移植性问题

根据您的需求，每种方法都有其优点和缺点。

采用方法 1`dlopen`和`dlsym`方法会使您的代码更加“模糊”且更小，但在大多数情况下会牺牲可移植性，因此可能不是您想要的。好处是，当安全漏洞在系统范围内得到修复时，它可能会受益。

# vba - 用于搜索文本的 VBA 代码

> ID：12287690
> 
> 赞同：0
> 
> 时间：2012-09-05T18:33:22.873
> 
> 标签：vba, excel

我想修改下面的代码

我想要 findwhat 从范围（“a1:20”）中选择文本 - 其中包含我要查找的文本列表

如果它在 B 的描述中找到文本，我希望它返回它找到的文本，例如在其描述旁边的 jo IN range c

谢谢

```
Option Explicit

Sub x()
    Dim FindWhat, rngCell As Range, i As Integer

    FindWhat = Array("Jo", "oa", "of", "koo")
    For i = 0 To 3
        For Each rngCell In Range("B2", Range("B" & Rows.Count).End(xlUp))
            If InStr(rngCell, FindWhat(i)) <> 0 Then
                rngCell.Offset(0, 1) = rngCell
                rngCell.Offset(, 1).Resize(, 2).Copy
            End If
        Next rngCell
    Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:07:33.077

试试这个：

```
Option Explicit

Sub x()
    Dim findRng As Range, _
        targetRng As Range, _
        findCell As Range, _
        found As Range
    Dim i As Integer
    Dim firstFound As String, _
        columnName As String

    columnName = "B"
    Set findRng = Range("A1:A20")
    For Each findCell In findRng
        Set targetRng = Range(columnName & "2", Range(columnName & Rows.Count).End(xlUp))
        With targetRng
            Set found = .Find(findCell.Value, LookIn:=xlValues, lookat:=xlPart)
            If Not found Is Nothing Then
                firstFound = found.Address
                Do
                    found.Offset(0, 1).Value = found.Offset(0, 1).Value & findCell.Value & ", "
                    Set found = .FindNext(found)
                Loop While Not found Is Nothing And found.Address <> firstFound
            End If
        End With
    Next findCell

End Sub 
```

请注意，除非您正在做的事情比这更复杂一点，否则您可以使用单元格公式来实现此结果。阅读关于 Index、Match 和 VLookup 函数的帮助，了解如何实现这一点。

# sql - 将数据约束写入表

> ID：12287691
> 
> 赞同：2
> 
> 时间：2012-09-05T18:33:41.970
> 
> 标签：sql, oracle, triggers

我想向表中添加一些内容（触发器？），以便确切地说，每个 ID 恰好有 1 行具有特定列的特定值。因此，如果运行了一条使情况并非如此的语句，则会引发异常并回滚插入。

让我们采用这个模式。

```
ID    Current    Value
1     Y          0
1     N          0
1     N          2
2     Y          2 
```

我想要的约束是，对于每个 ID，只有一行的电流为“Y”。

因此，这些语句将不会被执行并返回适当的错误：

```
insert into table values (1,'Y',1);
insert into table values (3,'N',2);
update table set current = 'N' where ID = 1; 
```

我有两个问题：

1.  将这种约束逻辑编码到您的表中是一个好主意，还是最好为处理数据的应用程序保存？为什么？

2.  如何做呢？oracle 提供了什么样的工具来创建这样的约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:49:46.850

最好以声明方式指定它（而不是在程序上，例如使用触发器）。特别是因为没有某种锁定算法的触发器，由于并发会话试图同时插入/更新表，所以无论如何都不会工作。

在这种情况下，最简单的解决方案是唯一的、基于函数的索引，例如：

```
CREATE UNIQUE INDEX only_one_current ON thetable
  (CASE WHEN Current = 'Y' THEN ID END); 
```

如果 Current = 'N'，则表达式为 NULL，并且不存储索引中的全 NULL 行，这意味着唯一性约束将仅适用于 Current = 'Y' 的行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T22:22:30.193

我认为您正在寻找的只是一个独特的约束。您可以使用以下语句添加它，以便只有 ID 和 Current 的唯一组合可以存在于表中。

```
ALTER TABLE table_name add CONSTRAINT constraint_name UNIQUE (ID,Current); 
```

# jquery - Animate Window 调整大小内容重新排列

> ID：12287693
> 
> 赞同：2
> 
> 时间：2012-09-05T18:33:51.350
> 
> 标签：jquery, html, css

我看到许多主题，当调整窗口大小时，它会重新排列带有轻微动画的内容，例如[http://wpexplorer.me/demo.php?theme=pronto](http://wpexplorer.me/demo.php?theme=pronto)。如果您使窗口更小或更大，它会相应地移动行和列。我有适当的 css 做同样的事情，但我无法在 js 或 css 上找到如何在重新排列时设置动画。

任何帮助高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:36:25.130

您可以使用[masonry jQuery 插件](http://masonry.desandro.com/)，它就是这样做的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:45:37.600

也总是有[同位素](http://isotope.metafizzy.co/)插件。（一点点[搜索](https://stackoverflow.com/questions/10580281/css-transition-on-float-relocation)永远不会伤害任何人！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T03:12:26.193

还有[http://www.wookmark.com/jquery-plugin](http://www.wookmark.com/jquery-plugin)为此，但正如 Ibu 所说，[砌体 jquery 插件](http://masonry.desandro.com/demos/animating-css-transitions.html)做得很好

# ios - 澄清 Apple 的 Block Docs？

> ID：12287696
> 
> 赞同：2
> 
> 时间：2012-09-05T18:33:56.290
> 
> 标签：ios, objective-c-blocks

我正在解决一些有关块/ARC 的保留周期问题，并且我正在努力解决这些细微差别。任何指导表示赞赏。

Apple 关于“块和变量”的文档 (http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html) 说明如下：

> 如果在方法的实现中使用块，对象实例变量的内存管理规则会更加微妙：
> 
> 如果通过引用访问实例变量，则保留 self；如果您按值访问实例变量，则会保留该变量。以下示例说明了两种不同的情况：

```
dispatch_async(queue, ^{
    // instanceVariable is used by reference, self is retained
    doSomethingWithObject(instanceVariable);
});

id localVariable = instanceVariable;
dispatch_async(queue, ^{
    // localVariable is used by value, localVariable is retained (not self)
    doSomethingWithObject(localVariable);
}); 
```

我觉得这个解释令人困惑。

1.  这是对“按价值”/“按参考”术语的适当使用吗？假设这些变量属于同一类型（id），它们之间的区别特征似乎是它们的范围。
2.  我看不到“通过引用”示例中如何引用 self ？如果正在使用访问器方法（例如 - 下面），我可以看到 self 被保留。

    doSomethingWithObject(self.instanceVariable);

3.  您对何时可能想要以一种或另一种方式做事有任何指导吗？

4.  如果传统智慧是利用“按值”变量，那么这似乎会导致大量额外的代码用于额外的变量声明？
5.  在嵌套块开始发挥作用的情况下，避免在彼此内部声明块似乎更易于维护，因为最终可能会出现一堆无意保留的对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T19:45:18.303

将 using`instanceVariable`视为等效于 writing的情况`self->instanceVariable`。根据定义，实例变量“附加”到`self`对象上，并且在自身对象存在时存在。

使用`instanceVariable`(or `self->instanceVariable`) 意味着您从 self 的地址开始，并要求一个实例变量（即从`self`对象原始地址的一些字节的偏移量）。

using`localVariable`本身是一个变量，它不依赖于自身，也不是相对于另一个对象的地址。

由于块在创建时捕获变量，因此当您的意思是“执行块时，我想在执行时获取实例变量的值”时，您通常更喜欢使用实例变量，因为您会询问`self`对象对于当时的实例变量的值（与您调用的方式完全相同`[self someIVarAccessorMethod]`）。但是请注意不要创建一些保留周期。

另一方面，如果使用，则在创建块时将捕获`localVariable`局部变量（而不是），因此即使在创建块后局部变量发生变化，块内也会使用旧值。`self`

```
// Imagine instanceVariable being an ivar of type NSString
// And property being a @property of type NSString too
instanceVariable = @"ivar-before";
self.property = @"prop-before";
NSString* localVariable = @"locvar-before";

// When creating the block, self will be retained both because the block uses instanceVariable and self.property
// And localVariable will be retained too as it is used directly
dispatch_block_t block = ^{
  NSLog(@"instance variable = %@", instanceVariable);
  NSLog(@"property = %@", self.property);
  NSLog(@"local variable = %@", localVariable);
};

// Modify some values after the block creation but before execution
instanceVariable = @"ivar-after";
self.property = @"prop-after";
localVariable = @"locvar-after";

// Execute the block
block(); 
```

在该示例中，输出将显示`instanceVariable`and`self.property`是通过`self`对象访问的，因此 self 被保留，但在块的代码中查询`instanceVariable`and`self.property`的值，它们将在执行时分别返回它们的值`"ivar-after"`和`"prop-after"`。另一方面，`localVariable`在创建块时被保留，并且它的值在那时被 const-copy，所以最后一个`NSLog`会显示`"locvar-before"`.

`self`当您在块的代码中使用实例变量或属性或调用 self 本身的方法时，将保留。当您直接在块的代码中使用它们时，会保留局部变量。

注意：我建议您观看讨论该主题的 WWDC'11 和 WWDC'12 视频，它们非常有启发性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T05:33:41.673

1.  ***这是对“按价值”/“按参考”术语的适当使用吗？***它至少类似于典型的使用。将值复制到局部变量就像将值复制到堆栈中一样；使用 ivar 就像将指针传递给存储在其他地方的值。

2.  ***我看不到“通过引用”示例中如何引用 self ？***当你在方法中使用实例变量时，引用`self`是隐含的。有些人实际上编写`self->foo`而不是`foo`访问 ivar 只是为了提醒自己这`foo`是一个 ivar。我不建议这样做，但重点是这`foo`和`self->foo`意思是一样的。如果您访问块内的 ivar，`self`将保留该 ivar，以确保在该块的持续时间内保留该 ivar。

3.  ***您对何时可能想要以一种或另一种方式做事有任何指导吗？***在这里考虑按引用传递/按值传递的区别是有用的。正如 AliSoftware 所解释的，在创建块时会保留局部变量，就像在调用函数时复制按值传递的参数一样。通过 self 访问 ivar 就像通过指针访问通过引用传递的参数一样，因此在您实际使用它之前不会确定它的值。

4.  ***似乎这会导致大量额外的代码用于额外的变量声明？***块已经成为该语言的一个特性已经有一段时间了，我还没有注意到这是一个问题。更常见的是，您想要相反的行为：本地声明的变量，您可以在一个块（或几个块）内修改。`__block`存储类型使这成为可能。

5.  ***似乎避免在彼此内部声明块可能更易于维护，因为最终可能会以无意中保留的对象的混合而告终？***让一个或多个块在需要时保留一个对象并没有错——只要使用它的块终止，该对象就会被释放。这与通常的 Objective-c 手动内存管理理念完美契合，每个对象只关心平衡自己的保留。避免多层嵌套块的一个更好的理由是，这种代码可能比它需要的更难理解。

# r - RCurl 中的密码 SSH 身份验证方法

> ID：12287699
> 
> 赞同：1
> 
> 时间：2012-09-05T18:34:01.687
> 
> 标签：r, rcurl

我正在使用包中的`ftpUpload`函数`RCurl`将文件上传到 sftp 文件服务器。我在进行身份验证调用时遇到了困难。

以下是我的电话：

```
ftpUpload(what = "some-file.png",
      to = "sftp://some-ftp-server.com:22/path/to/some-file.png",
      verbose = TRUE,
      userpwd = "my_userid:my_password") 
```

结果我得到：

```
* About to connect() to some-ftp-server.com port 22 (#0)
*   Trying some-ftp-server.com... * connected
* Connected to some-ftp-server.com (some ip address) port 22 (#0)
* SSH authentication methods available: publickey,password
* Using ssh public key file /home/.ssh/id_dsa.pub
* Using ssh private key file /home/.ssh/id_dsa
* SSH public key authentication failed: Unable to open public key file
* Authentication failure
* Closing connection #0
Error in function (type, msg, asError = TRUE)  : Authentication failure 
```

我不是设置 sftp 服务器的人，而且我有点 ssh 菜鸟——抱歉。我所知道的是，我可以使用 Filezilla 登录，`my_userid`并且`my_password`服务器有一个`.htaccess`和`.htpasswd`文件。

我希望有某种方法可以`ftpUpload`仅使用我的用户名和密码进行身份验证。这似乎`password`是两种可用方法之一，但我似乎无法`ftpUpload`理解我想单独使用后者。

该`.htpasswd`文件似乎包含`my_userid:my_password`，尽管密码部分已加密。我愿意在某个地方加载它以供`ftpUpload`访问，但我不确定如何指向`ftpUpload`正确的方向。

最后，我尝试使用并查看此处列出的 libcurl 选项：[http](http://www.omegahat.org/RCurl/philosophy.html) ://www.omegahat.org/RCurl/philosophy.html并在此处进行更全面的解释：http: [//curl.haxx.se/libcurl /c/curl_easy_setopt.html](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)

唉，没有运气。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-17T18:08:38.007

似乎有点晚了，但我目前正在尝试类似的东西（虽然是公钥身份验证）并让它工作！这是我所做的：

[我确实按照http://www.howtoforge.com/set-up-ssh-with-public-key-authentication-debian-etch](http://www.howtoforge.com/set-up-ssh-with-public-key-authentication-debian-etch)上的说明设置了公钥身份验证

也就是说，我在服务器上运行命令

```
ssh-keygen -t rsa -C "e@mail.com" -f "ir_rsa" 
```

生成公钥和私钥。（顺便说一句，我首先尝试在本地 Windows 机器上使用 puttygen 来创建工作密钥，但失败了。）

然后我将公钥添加到授权密钥（仍在远程服务器上）

```
mkdir ~/.ssh
chmod 700 ~/.ssh
cat id_rsa.pub >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys 
```

并在运行 R 的本地计算机上复制公钥和私钥文件。然后我可以使用从 R 上传文件

```
require(RCurl)
ftpUpload(what = "myfile.txt",
    to = "sftp://myusername@my.host.com:22/path/to/myfile",
    verbose = TRUE,
    .opts = list(
        ssh.public.keyfile = "path/to/local/pubkeyfile", 
        ssh.private.keyfile = "path/to/local/privatekeyfile"
    ) 
) 
```

# md5 - 如何反转MD5得到原始字符串？

> ID：12287704
> 
> 赞同：30
> 
> 时间：2012-09-05T18:34:10.313
> 
> 标签：md5

> **可能重复：**
> [是否可以解密 md5 哈希？](https://stackoverflow.com/questions/1240852/is-it-possible-to-decrypt-md5-hashes)

是否可以从 Java 中的 MD5 获取字符串？

首先将一个字符串转换为 MD5 校验和，是否可以将此 MD5 校验和恢复为原始文本？

我假设您使用 MessageDigest，非常感谢任何帮助，甚至是其他 java 库。

还想指出这个应用程序是否不可能：[https ://play.google.com/store/apps/details?id=com.fab.md5&hl=en](https://play.google.com/store/apps/details?id=com.fab.md5&hl=en)

我什至使用另一个应用程序将一些文本转换为 MD5 校验和，并使用此校验和来查看应用程序是否能够将其转换回文本并且确实如此。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-05T18:35:31.280

不，那是不可能的，因为

*   可以有多个字符串给出相同的[MD5](http://en.wikipedia.org/wiki/MD5)
*   它被设计成难以“逆转”

MD5 及其散列函数家族的目标是

*   从长字符串中获取简短的“摘录”
*   让人难以猜测它们来自哪里
*   使发现冲突变得困难，也就是说具有相同哈希的单词（这与第二个非常相似）

认为你可以得到任何字符串的 MD5，甚至很长。并且 MD5 只有 16 个字节长（如果你用 hexa 编写它以更容易地存储或分发它，则为 32 个字节）。如果你能扭转它们，你就会有一个神奇的压缩方案。

话虽这么说，由于世界上使用的短字符串（密码......）并不多，您可以从字典（称为“暴力攻击”）甚至谷歌搜索您的 MD5 来测试它们。如果这个词很常见并且没有加盐，那么您就有合理的机会成功...

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-05T18:37:19.410

这不可能是散列的全部意义所在。但是，您可以通过所有可能性（以每个可能的顺序使用所有可能的数字字符）并对它们进行散列并检查冲突来进行暴力破解。

有关散列和 MD5 等的更多信息，请参见：http [://en.wikipedia.org/wiki/MD5、http :](http://en.wikipedia.org/wiki/MD5) [//en.wikipedia.org/wiki/Hash_function、http](http://en.wikipedia.org/wiki/Hash_function) : [//en.wikipedia.org/wiki/ Cryptographic_hash_function](http://en.wikipedia.org/wiki/Cryptographic_hash_function)和[http://onin.com/hhh/hhhexpl.html](http://onin.com/hhh/hhhexpl.html)

我自己创建了自己的应用程序来执行此操作，它的开源您可以查看链接： http: [//sourceforge.net/projects/jpassrecovery/](http://sourceforge.net/projects/jpassrecovery/)，当然还有源代码。这是易于访问的源代码，它在评论中有一个基本的实现：

**Bruter.java**：

```
import java.util.ArrayList;

public class Bruter {

    public ArrayList<String> characters = new ArrayList<>();
    public boolean found = false;
    public int maxLength;
    public int minLength;
    public int count;
    long starttime, endtime;
    public int minutes, seconds, hours, days;
    public char[] specialCharacters = {'~', '`', '!', '@', '#', '$', '%', '^',
        '&', '*', '(', ')', '_', '-', '+', '=', '{', '}', '[', ']', '|', '\\',
        ';', ':', '\'', '"', '<', '.', ',', '>', '/', '?', ' '};
    public boolean done = false;
    public boolean paused = false;

    public boolean isFound() {
        return found;
    }

    public void setPaused(boolean paused) {
        this.paused = paused;
    }

    public boolean isPaused() {
        return paused;
    }

    public void setFound(boolean found) {
        this.found = found;
    }

    public synchronized void setEndtime(long endtime) {
        this.endtime = endtime;
    }

    public int getCounter() {
        return count;
    }

    public long getRemainder() {
        return getNumberOfPossibilities() - count;
    }

    public long getNumberOfPossibilities() {
        long possibilities = 0;
        for (int i = minLength; i <= maxLength; i++) {
            possibilities += (long) Math.pow(characters.size(), i);
        }
        return possibilities;
    }

    public void addExtendedSet() {
        for (char c = (char) 0; c <= (char) 31; c++) {
            characters.add(String.valueOf(c));
        }
    }

    public void addStandardCharacterSet() {
        for (char c = (char) 32; c <= (char) 127; c++) {
            characters.add(String.valueOf(c));
        }
    }

    public void addLowerCaseLetters() {
        for (char c = 'a'; c <= 'z'; c++) {
            characters.add(String.valueOf(c));
        }
    }

    public void addDigits() {
        for (int c = 0; c <= 9; c++) {
            characters.add(String.valueOf(c));
        }
    }

    public void addUpperCaseLetters() {
        for (char c = 'A'; c <= 'Z'; c++) {
            characters.add(String.valueOf(c));
        }
    }

    public void addSpecialCharacters() {
        for (char c : specialCharacters) {
            characters.add(String.valueOf(c));
        }
    }

    public void setMaxLength(int i) {
        maxLength = i;
    }

    public void setMinLength(int i) {
        minLength = i;
    }

    public int getPerSecond() {
        int i;
        try {
            i = (int) (getCounter() / calculateTimeDifference());
        } catch (Exception ex) {
            return 0;
        }
        return i;

    }

    public String calculateTimeElapsed() {
        long timeTaken = calculateTimeDifference();
        seconds = (int) timeTaken;
        if (seconds > 60) {
            minutes = (int) (seconds / 60);
            if (minutes * 60 > seconds) {
                minutes = minutes - 1;
            }

            if (minutes > 60) {
                hours = (int) minutes / 60;
                if (hours * 60 > minutes) {
                    hours = hours - 1;
                }
            }

            if (hours > 24) {
                days = (int) hours / 24;
                if (days * 24 > hours) {
                    days = days - 1;
                }
            }
            seconds -= (minutes * 60);
            minutes -= (hours * 60);
            hours -= (days * 24);
            days -= (hours * 24);
        }
        return "Time elapsed: " + days + "days " + hours + "h " + minutes + "min " + seconds + "s";
    }

    private long calculateTimeDifference() {
        long timeTaken = (long) ((endtime - starttime) * (1 * Math.pow(10, -9)));
        return timeTaken;
    }

    public boolean excludeChars(String s) {
        char[] arrayChars = s.toCharArray();
        for (int i = 0; i < arrayChars.length; i++) {
            characters.remove(arrayChars[i] + "");
        }
        if (characters.size() < maxLength) {
            return false;
        } else {
            return true;

        }
    }

    public int getMaxLength() {
        return maxLength;
    }

    public int getMinLength() {
        return minLength;
    }

    public void setIsDone(Boolean b) {
        done = b;
    }

    public boolean isDone() {
        return done;
    }
} 
```

**HashBruter.java**：

```
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.zip.Adler32;
import java.util.zip.CRC32;
import java.util.zip.Checksum;
import javax.swing.JOptionPane;

public class HashBruter extends Bruter {
    /*
     * public static void main(String[] args) {
     *
     * final HashBruter hb = new HashBruter();
     *
     * hb.setMaxLength(5); hb.setMinLength(1);
     *
     * hb.addSpecialCharacters(); hb.addUpperCaseLetters();
     * hb.addLowerCaseLetters(); hb.addDigits();
     *
     * hb.setType("sha-512");
     *
     * hb.setHash("282154720ABD4FA76AD7CD5F8806AA8A19AEFB6D10042B0D57A311B86087DE4DE3186A92019D6EE51035106EE088DC6007BEB7BE46994D1463999968FBE9760E");
     *
     * Thread thread = new Thread(new Runnable() {
     *
     * @Override public void run() { hb.tryBruteForce(); } });
     *
     * thread.start();
     *
     * while (!hb.isFound()) { System.out.println("Hash: " +
     * hb.getGeneratedHash()); System.out.println("Number of Possibilities: " +
     * hb.getNumberOfPossibilities()); System.out.println("Checked hashes: " +
     * hb.getCounter()); System.out.println("Estimated hashes left: " +
     * hb.getRemainder()); }
     *
     * System.out.println("Found " + hb.getType() + " hash collision: " +
     * hb.getGeneratedHash() + " password is: " + hb.getPassword());
     *
     * }
     */

    public String hash, generatedHash, password;
    public String type;

    public String getType() {
        return type;
    }

    public String getPassword() {
        return password;
    }

    public void setHash(String p) {
        hash = p;
    }

    public void setType(String digestType) {
        type = digestType;
    }

    public String getGeneratedHash() {
        return generatedHash;
    }

    public void tryBruteForce() {
        starttime = System.nanoTime();
        for (int size = minLength; size <= maxLength; size++) {
            if (found == true || done == true) {
                break;
            } else {
                while (paused) {
                    try {
                        Thread.sleep(500);
                    } catch (InterruptedException ex) {
                        ex.printStackTrace();
                    }
                }
                generateAllPossibleCombinations("", size);
            }
        }
        done = true;
    }

    private void generateAllPossibleCombinations(String baseString, int length) {
        while (paused) {
            try {
                Thread.sleep(500);
            } catch (InterruptedException ex) {
                ex.printStackTrace();
            }
        }
        if (found == false || done == false) {
            if (baseString.length() == length) {
                if(type.equalsIgnoreCase("crc32")) {
                generatedHash = generateCRC32(baseString);
                } else if(type.equalsIgnoreCase("adler32")) {
                generatedHash = generateAdler32(baseString);
                } else if(type.equalsIgnoreCase("crc16")) {
                    generatedHash=generateCRC16(baseString);
                } else if(type.equalsIgnoreCase("crc64")) {
                    generatedHash=generateCRC64(baseString.getBytes());
                }
                else {
                generatedHash = generateHash(baseString.toCharArray());
                }
                    password = baseString;
                if (hash.equals(generatedHash)) {
                    password = baseString;
                    found = true;
                    done = true;
                }
                count++;
            } else if (baseString.length() < length) {
                for (int n = 0; n < characters.size(); n++) {
                    generateAllPossibleCombinations(baseString + characters.get(n), length);
                }
            }
        }
    }

    private String generateHash(char[] passwordChar) {
        MessageDigest md = null;
        try {
            md = MessageDigest.getInstance(type);
        } catch (NoSuchAlgorithmException e1) {
            JOptionPane.showMessageDialog(null, "No such algorithm for hashes exists", "Error", JOptionPane.ERROR_MESSAGE);
        }
        String passwordString = new String(passwordChar);
        byte[] passwordByte = passwordString.getBytes();
        md.update(passwordByte, 0, passwordByte.length);
        byte[] encodedPassword = md.digest();
        String encodedPasswordInString = toHexString(encodedPassword);
        return encodedPasswordInString;
    }

    private void byte2hex(byte b, StringBuffer buf) {
        char[] hexChars = {'0', '1', '2', '3', '4', '5', '6', '7', '8',
            '9', 'A', 'B', 'C', 'D', 'E', 'F'};
        int high = ((b & 0xf0) >> 4);
        int low = (b & 0x0f);
        buf.append(hexChars[high]);
        buf.append(hexChars[low]);
    }

    private String toHexString(byte[] block) {
        StringBuffer buf = new StringBuffer();
        int len = block.length;
        for (int i = 0; i < len; i++) {
            byte2hex(block[i], buf);
        }
        return buf.toString();
    }

    private String generateCRC32(String baseString) {

                //Convert string to bytes
                byte bytes[] = baseString.getBytes();

                Checksum checksum = new CRC32();

                /*
                 * To compute the CRC32 checksum for byte array, use
                 *
                 * void update(bytes[] b, int start, int length)
                 * method of CRC32 class.
                 */

                checksum.update(bytes,0,bytes.length);

                /*
                 * Get the generated checksum using
                 * getValue method of CRC32 class.
                 */
                return String.valueOf(checksum.getValue());
    }   
    private String generateAdler32(String baseString) {

                //Convert string to bytes
                byte bytes[] = baseString.getBytes();

                Checksum checksum = new Adler32();

                /*
                 * To compute the CRC32 checksum for byte array, use
                 *
                 * void update(bytes[] b, int start, int length)
                 * method of CRC32 class.
                 */

                checksum.update(bytes,0,bytes.length);

                /*
                 * Get the generated checksum using
                 * getValue method of CRC32 class.
                 */
                return String.valueOf(checksum.getValue());
    }
/*************************************************************************
 *  Compilation:  javac CRC16.java
 *  Execution:    java CRC16 s
 *  
 *  Reads in a string s as a command-line argument, and prints out
 *  its 16-bit Cyclic Redundancy Check (CRC16). Uses a lookup table.
 *
 *  Reference:  http://www.gelato.unsw.edu.au/lxr/source/lib/crc16.c
 *
 *  % java CRC16 123456789
 *  CRC16 = bb3d
 *
 * Uses irreducible polynomial:  1 + x^2 + x^15 + x^16
 *
 *
 *************************************************************************/
    private String generateCRC16(String baseString) {
                int[] table = {
            0x0000, 0xC0C1, 0xC181, 0x0140, 0xC301, 0x03C0, 0x0280, 0xC241,
            0xC601, 0x06C0, 0x0780, 0xC741, 0x0500, 0xC5C1, 0xC481, 0x0440,
            0xCC01, 0x0CC0, 0x0D80, 0xCD41, 0x0F00, 0xCFC1, 0xCE81, 0x0E40,
            0x0A00, 0xCAC1, 0xCB81, 0x0B40, 0xC901, 0x09C0, 0x0880, 0xC841,
            0xD801, 0x18C0, 0x1980, 0xD941, 0x1B00, 0xDBC1, 0xDA81, 0x1A40,
            0x1E00, 0xDEC1, 0xDF81, 0x1F40, 0xDD01, 0x1DC0, 0x1C80, 0xDC41,
            0x1400, 0xD4C1, 0xD581, 0x1540, 0xD701, 0x17C0, 0x1680, 0xD641,
            0xD201, 0x12C0, 0x1380, 0xD341, 0x1100, 0xD1C1, 0xD081, 0x1040,
            0xF001, 0x30C0, 0x3180, 0xF141, 0x3300, 0xF3C1, 0xF281, 0x3240,
            0x3600, 0xF6C1, 0xF781, 0x3740, 0xF501, 0x35C0, 0x3480, 0xF441,
            0x3C00, 0xFCC1, 0xFD81, 0x3D40, 0xFF01, 0x3FC0, 0x3E80, 0xFE41,
            0xFA01, 0x3AC0, 0x3B80, 0xFB41, 0x3900, 0xF9C1, 0xF881, 0x3840,
            0x2800, 0xE8C1, 0xE981, 0x2940, 0xEB01, 0x2BC0, 0x2A80, 0xEA41,
            0xEE01, 0x2EC0, 0x2F80, 0xEF41, 0x2D00, 0xEDC1, 0xEC81, 0x2C40,
            0xE401, 0x24C0, 0x2580, 0xE541, 0x2700, 0xE7C1, 0xE681, 0x2640,
            0x2200, 0xE2C1, 0xE381, 0x2340, 0xE101, 0x21C0, 0x2080, 0xE041,
            0xA001, 0x60C0, 0x6180, 0xA141, 0x6300, 0xA3C1, 0xA281, 0x6240,
            0x6600, 0xA6C1, 0xA781, 0x6740, 0xA501, 0x65C0, 0x6480, 0xA441,
            0x6C00, 0xACC1, 0xAD81, 0x6D40, 0xAF01, 0x6FC0, 0x6E80, 0xAE41,
            0xAA01, 0x6AC0, 0x6B80, 0xAB41, 0x6900, 0xA9C1, 0xA881, 0x6840,
            0x7800, 0xB8C1, 0xB981, 0x7940, 0xBB01, 0x7BC0, 0x7A80, 0xBA41,
            0xBE01, 0x7EC0, 0x7F80, 0xBF41, 0x7D00, 0xBDC1, 0xBC81, 0x7C40,
            0xB401, 0x74C0, 0x7580, 0xB541, 0x7700, 0xB7C1, 0xB681, 0x7640,
            0x7200, 0xB2C1, 0xB381, 0x7340, 0xB101, 0x71C0, 0x7080, 0xB041,
            0x5000, 0x90C1, 0x9181, 0x5140, 0x9301, 0x53C0, 0x5280, 0x9241,
            0x9601, 0x56C0, 0x5780, 0x9741, 0x5500, 0x95C1, 0x9481, 0x5440,
            0x9C01, 0x5CC0, 0x5D80, 0x9D41, 0x5F00, 0x9FC1, 0x9E81, 0x5E40,
            0x5A00, 0x9AC1, 0x9B81, 0x5B40, 0x9901, 0x59C0, 0x5880, 0x9841,
            0x8801, 0x48C0, 0x4980, 0x8941, 0x4B00, 0x8BC1, 0x8A81, 0x4A40,
            0x4E00, 0x8EC1, 0x8F81, 0x4F40, 0x8D01, 0x4DC0, 0x4C80, 0x8C41,
            0x4400, 0x84C1, 0x8581, 0x4540, 0x8701, 0x47C0, 0x4680, 0x8641,
            0x8201, 0x42C0, 0x4380, 0x8341, 0x4100, 0x81C1, 0x8081, 0x4040,
        };

        byte[] bytes = baseString.getBytes();
        int crc = 0x0000;
        for (byte b : bytes) {
            crc = (crc >>> 8) ^ table[(crc ^ b) & 0xff];
        }

        return Integer.toHexString(crc);
    }
    /*******************************************************************************
 * Copyright (c) 2009, 2012 Mountainminds GmbH & Co. KG and Contributors
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *    Marc R. Hoffmann - initial API and implementation
 *    
 *******************************************************************************/

/**
 * CRC64 checksum calculator based on the polynom specified in ISO 3309\. The
 * implementation is based on the following publications:
 * 
 * <ul>
 * <li>http://en.wikipedia.org/wiki/Cyclic_redundancy_check</li>
 * <li>http://www.geocities.com/SiliconValley/Pines/8659/crc.htm</li>
 * </ul>
 */
    private static final long POLY64REV = 0xd800000000000000L;

    private static final long[] LOOKUPTABLE;

    static {
        LOOKUPTABLE = new long[0x100];
        for (int i = 0; i < 0x100; i++) {
            long v = i;
            for (int j = 0; j < 8; j++) {
                if ((v & 1) == 1) {
                    v = (v >>> 1) ^ POLY64REV;
                } else {
                    v = (v >>> 1);
                }
            }
            LOOKUPTABLE[i] = v;
        }
    }

    /**
     * Calculates the CRC64 checksum for the given data array.
     * 
     * @param data
     *            data to calculate checksum for
     * @return checksum value
     */
    public static String generateCRC64(final byte[] data) {
        long sum = 0;
        for (int i = 0; i < data.length; i++) {
            final int lookupidx = ((int) sum ^ data[i]) & 0xff;
            sum = (sum >>> 8) ^ LOOKUPTABLE[lookupidx];
        }
        return String.valueOf(sum);
    }
} 
```

你会像这样使用它：

```
 final HashBruter hb = new HashBruter();

      hb.setMaxLength(5); hb.setMinLength(1);

     hb.addSpecialCharacters(); hb.addUpperCaseLetters();
     hb.addLowerCaseLetters(); hb.addDigits();

      hb.setType("sha-512");

                   hb.setHash("282154720ABD4FA76AD7CD5F8806AA8A19AEFB6D10042B0D57A311B86087DE4DE3186A92019D6EE51035106EE088DC6007BEB7BE46994D1463999968FBE9760E");

      Thread thread = new Thread(new Runnable() {

      @Override public void run() { hb.tryBruteForce(); } });

      thread.start();

      while (!hb.isFound()) { System.out.println("Hash: " +
      hb.getGeneratedHash()); System.out.println("Number of Possibilities: " +
      hb.getNumberOfPossibilities()); System.out.println("Checked hashes: " +
     hb.getCounter()); System.out.println("Estimated hashes left: " +
     hb.getRemainder()); }

     System.out.println("Found " + hb.getType() + " hash collision: " +
     hb.getGeneratedHash() + " password is: " + hb.getPassword()); 
```

# ruby-on-rails - RoR 教程第 9 章（第 9.2.3 节）测试失败，因为参数数量错误（0 代表 1）

> ID：12287706
> 
> 赞同：0
> 
> 时间：2012-09-05T18:34:14.860
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rspec-rails

我按照教程写了一个测试场景：当用户去编辑信息页面但还没有登录时，他们会重定向到登录页面，他们登录后会重定向到编辑页面。但是当我按照教程完成所有操作时，运行测试并失败，因为`wrong number of arguments (0 for 1)`错误。

这是错误信息：

> 未登录用户在登录后尝试访问受保护页面时的 AuthenticationPages 授权应呈现所需的受保护页面
> 失败/错误：click_button“登录”
> ArgumentError：参数数量错误（0 表示 1）
> # ./app/ helpers/sessions_helper.rb:31:in create' # (eval):2:in block (5 levels) in..`redirect_back_or'
> # ./app/controllers/sessions_controller.rb:11:in`
> `click_button' # ./spec/requests/authentication_pages_spec.rb:58:in`

这是我的规范/请求/authentication_pages_spec.rb

```
describe "authorization" do

  describe "for non-signed-in users" do
    let(:user) { FactoryGirl.create(:user) }

    describe "when attempting to visit a protected page" do
      before do
        visit edit_user_path(user)
        fill_in "Email", with: user.email
        fill_in "Password", with: user.password
        click_button "Sign in"
      end

      describe "after signing in" do

        it "should render the desired protected page" do
          page.should have_selector('title', text: 'Edit user')
        end
      end
    end    
 .
 .
 . 
```

在 app/helpers/sessions_helper.rb 中，我有两种方法，`store_location`用于`redirect_back_or`存储并重定向回用户在登录前访问的 url 地址：

```
module SessionsHelper

  .
  .
  .
  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    session.delete[:return_to]
  end

  def store_location
    session[:return_to] = request.url
  end
end 
```

然后我`store_location`在 app/controllers/users_controller.rb 中使用了方法：

```
class UsersController < ApplicationController

  before_filter :signed_in_user, only: [:edit, :update]
  before_filter :correct_user, only: [:edit, :update]
  .
  .
  private

    def signed_in_user
      unless signed_in?
        store_location
        redirect_to signin_url, notice: "Please sign in."
      end
    end 
```

我`redirect_back_or`在 app/controllers/sessions_controller.rb 中使用了方法：

```
class SessionsController < ApplicationController

  def new

  end

  def create
    user = User.find_by_email(params[:email].downcase)
    if user && user.authenticate(params[:password])
      sign_in user
      redirect_back_or user
    else
      flash.now[:error] = "Invalid email/password combination"
      render 'new'
    end
  end 
```

我不知道为什么会发生这个错误，我认为该`redirect_back_or`方法已经接受了参数`user`，但它仍然是错误的。任何人都可以帮我解决这个问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:38:20.703

`session.delete[:return_to]`为此在 SessionsHelper 中更改它`session.delete(:return_to)`

# ruby-on-rails - 以编程方式定义 around_ 回调时“没有给出块”

> ID：12287708
> 
> 赞同：1
> 
> 时间：2012-09-05T18:34:45.253
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在尝试编写一个以编程方式将`around_update`/`around_destroy`回调添加到 ActiveRecord 模型的库。

因此，常规模型看起来像这样，并且可以按预期工作：

```
class User < ActiveRecord::Base
  around_update :test_update

  def test_update
    Rails.logger.debug "test_update"
    yield
    Rails.logger.debug "Finished test_update"
  end
end

u=User.last
u.name = 'something'
u.save

######### output (as expected):
# test_update
# Finished test_update 
```

我的小图书馆（显然只是骨架）看起来像这样：

```
# A module for creating around callbacks in a model
module Piddle
  module TimelineFor
    def self.included(klass)
      klass.send(:extend, ClassMethods)
    end

    module ClassMethods
      def timeline_for(event, opts={})
        method_name = :"timeline_for_#{event.to_s}"
        define_method(method_name) do |&block|
          Rails.logger.debug method_name.to_s
          yield block
          Rails.logger.debug "After yield in #{method_name.to_s}"
        end

        send(:around_update, method_name)
      end
    end
  end
end 
```

它定义了一个timeline_for 方法，该方法应该添加timeline_for_update 方法并将其作为around_update 事件的回调。我想使用的用户模型是这样的：

```
# second version of the User model using Piddle to create the callback
require 'piddle/piddle'

class User < ActiveRecord::Base
  include Piddle::TimelineFor

  timeline_for :update
end

u=User.last
u.name = 'gfgfhfhfgh'
u.save 
```

在我看到的输出中

```
timeline_for_update
LocalJumpError: no block given (yield)
from /vagrant/lib/piddle/piddle.rb:13:in `block in timeline_for' 
```

第一个输出行表示正在调用该方法，但没有传入该块。

有什么想法或替代实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:08:34.113

问题是，如果您`yield`从您的`define_method`, ruby​​ 调用，则将其解释为试图屈服于传递给的（不存在的）块，而`timeline_for`不是 rails 传递给的块`timeline_for_foo`

你已经`block`被传递给你，所以你可以称之为：

```
def timeline_for event
  method_name = "timeline_for_#{event}"
  define_method method_name do |&block|
    ActiveRecord::Base.logger.debug "before #{method_name} yield" 
    block.call
    ActiveRecord::Base.logger.debug "after #{method_name} yield" 
  end
  send :around_update, method_name.to_sym #must use a symbol here
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:45:28.833

如果你想定义这样的东西。看看积极支持关注。

我认为您需要在类上调用 around-filter 而不是在定义本身中使用 send ：

[http://apidock.com/rails/ActiveSupport/Concern](http://apidock.com/rails/ActiveSupport/Concern)

# javascript - 仅在谷歌地图初始化加载后启动脚本

> ID：12287711
> 
> 赞同：0
> 
> 时间：2012-09-05T18:35:15.620
> 
> 标签：javascript, google-maps

我正在编写 javascript 代码来用谷歌 api 地图的坐标填充字段。然而问题是谷歌地图的初始化

```
<script type="text/javascript">

  var coord,mapOptions,map;
  function initialize() {
    coord = new google.maps.LatLng(-25.363882, 131.044922);
    mapOptions = { zoom: 4, center: coord , mapTypeId: google.maps.MapTypeId.ROADMAP};
    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
 }

 function getBounds(map,currentv)
 {
   currentv[0] = map.getCenter().lat();
   currentv[1] = map.getCenter().lng();
   return currentv;
 }
 </script> 
```

在所有其他代码加载后发生（据我了解；我刚刚开始使用 js）。

```
<script>
  if (map != undefined){
    currentv = getBounds(map,currentv);
    console.log("Debug: lat "+currentv[0]);
    document.write('<input type="text" name="latitude" value="'+ currentv[0] +'" />');
  } 
</script> 
```

所以下面的某个地方是这个代码来填充该字段，但它是在 initialize(); 之前加载的。然后在它不再运行之后？

我怎么解决这个问题？

编辑：（添加了我遗漏的事件监听器）

```
google.maps.event.addListener(map, 'bounds_changed', function() { window.setTimeout(function() { 

map.panTo(marker.getPosition());
map.setZoom(4);
getBounds(map,currentv); 

}, 3000); }); 
```

# tomcat - 如何在 Tomcat 中设置自定义 ErrorReportValve？

> ID：12287719
> 
> 赞同：1
> 
> 时间：2012-09-05T18:35:45.777
> 
> 标签：tomcat, tomcat6

我想设置一个自定义`ErrorReportValve`. 我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:39:05.730

设置自定义`ErrorReportValve`：

1.  使用您的自定义阀门创建一个 JAR
2.  把它放入`$CATALINA_BASE/lib`
3.  添加`errorReportValveClass`到您的`Host`元素
4.  重启你的Tomcat

# php - 获取在 ajax 函数中进行 ajax 调用的 url

> ID：12287728
> 
> 赞同：7
> 
> 时间：2012-09-05T18:36:44.933
> 
> 标签：php, ajax, jquery

例如，我有一个`ajax`从页面`http://www.abc.com/xyz/1`到功能控制的请求`ajax`。

除了通过参数发送之外，还有什么方法可以让我知道在函数中我可以获取`http://www.abc.com/xyz/1`并意识到 ajax 请求来自这里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T18:39:51.597

如果服务器想知道来自哪个页面，或者服务器的位置，那么你可以在最后使用这个，如果 PHP：

```
die($_SERVER["HTTP_HOST"] . $_SERVER["HTTP_REFERER"]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-23T11:07:01.150

您可以使用以下 php 代码获取请求 url：

```
 $request_url=( $_SERVER["HTTP_REFERER"]); 
```

# wordpress - WordPress 全屏图库 wordpress 插件 - 如何获取下一个和上一个按钮

> ID：12287731
> 
> 赞同：0
> 
> 时间：2012-09-05T18:36:50.873
> 
> 标签：wordpress, plugins, gallery, fullscreen, next

我一直在寻找解决这个问题很长时间没有运气，希望这里有人可以帮助我。

我正在使用一个名为“WordPress 全屏图库”的 wordpress 插件，并且我正在尝试在打开图库时放置下一个和上一个导航按钮。javascript代码具有以下内容：

```
// Jump to the next background in the current slideshow
    next: function() {
        var from = step;

        if ( step ) {
            $.vegas( 'slideshow', {
                step: step
            }, true );

            $( 'body' ).trigger( 'vegasnext', [ $current.get(0), step - 1, from - 1 ] );
        }

        return $.vegas;
    },

    // Jump to the previous background in the current slideshow
    previous: function() {
        var from = step;

        if ( step ) {
            $.vegas( 'slideshow', {
                step: step - 2
            }, true );

            $( 'body' ).trigger( 'vegasprevious', [ $current.get(0), step - 1, from - 1 ] );
        }

        return $.vegas;
    }, 
```

我想知道如何添加具有这些功能的按钮，这些功能将带我进入下一张和上一张幻灯片。

我真的很感谢所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:16:18.313

我不太了解那个插件，但如果你对 wordpress 有足够的了解，你可以使用不同的 jquery 滑块。我刚刚在谷歌上找到了这个。

通常，如果您找不到如何在文档中添加某些内容，那么试图弄清楚它可能是一场噩梦。但我可能是错的。我只是不喜欢重新发明轮子，除非我绝对必须这样做。

[http://manos.malihu.gr/simple-jquery-fullscreen-image-gallery](http://manos.malihu.gr/simple-jquery-fullscreen-image-gallery)

# java - 如果它们都在同一个包中，是否可以在一个 java 文件中声明数组并在不同的 java 文件中使用它们

> ID：12287736
> 
> 赞同：1
> 
> 时间：2012-09-05T18:37:30.457
> 
> 标签：java, arrays, class, variables

那么你将如何将它与完全不同的java文件一起使用但在同一个包中

```
public static void main (int[] args)
{
int [] HotDog = {18,8,10,0};
int [] ToastedChicken = {25,8,17,0};
int [] ToastedSteak = {30,8,22,0};
int [] ToastedEggT= {20,8,6,6};
int [] ToastedSteakE={36,8,22,6};
int [] ChickenRoll = {25,8,17,0};
int [] SteakRoll = {30,8,22,0};
int [] EggTomato = {20,8,6,6};
int [] CheeseTomato = {20,8,6,6};
int [] steakEgg = {36,8,22,6};` 
```

IE在这里

```
if (contents ==  "Hot Dog")

{jLabel2.setText(HotDog[2]); } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T18:39:29.797

您需要将它们设为静态。例如：

```
final class MyConstants {
    static final int[] HotDog = {18, 8, 10, 0};
    static final int[] ToastedChicken = {25, 8, 17, 0};
    static final int[] ToastedSteak = {30, 8, 22, 0};
    static final int[] ToastedEggT = {20, 8, 6, 6};
    static final int[] ToastedSteakE ={36, 8, 22, 6};
    static final int[] ChickenRoll = {25, 8, 17, 0};
    static final int[] SteakRoll = {30, 8, 22, 0};
    static final int[] EggTomato = {20, 8, 6, 6};
    static final int[] CheeseTomato = {20, 8, 6, 6};
    static final int[] SteakEgg = {36, 8, 22, 6};

    private MyConstants() {
        // Prevents users of this class from instantiating a useless instance of
        // this class, since all members are static.
    }
} 
```

然后您可以在同一个包中的任何类中使用它们，例如：

```
if (contents.equals("Hot Dog")) {
    jLabel2.setText(MyConstants.HotDog[2]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:42:00.103

我将尝试将它们设置`Array`为`static`，因此所有尝试访问这些数组的类都会获得相同的数组...

我也可以`Singleton Principle with Composition`在这里使用......但这有点矫枉过正......

```
public class Test{
static int [] HotDog = {18,8,10,0};
static int [] ToastedChicken = {25,8,17,0};
static int [] ToastedSteak = {30,8,22,0};
static int [] ToastedEggT= {20,8,6,6};
static int [] ToastedSteakE={36,8,22,6};
static int [] ChickenRoll = {25,8,17,0};
static int [] SteakRoll = {30,8,22,0};
static int [] EggTomato = {20,8,6,6};
static int [] CheeseTomato = {20,8,6,6};
static int [] steakEgg = {36,8,22,6};

}

public class AccessIt{

Test.HotDog;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:39:36.193

您的数组当前位于方法 main 的本地。如果将它们移到 main 方法之外（与它们完全一样），那么它们将对其他类可见，因为它们具有包访问权限。您将需要对该类的引用（除非您将它们设为静态）。在下面的示例中，我调用了 X 类

```
int [] HotDog = {18,8,10,0};
int [] ToastedChicken = {25,8,17,0};
int [] ToastedSteak = {30,8,22,0};
int [] ToastedEggT= {20,8,6,6};
int [] ToastedSteakE={36,8,22,6};
int [] ChickenRoll = {25,8,17,0};
int [] SteakRoll = {30,8,22,0};
int [] EggTomato = {20,8,6,6};
int [] CheeseTomato = {20,8,6,6};
int [] steakEgg = {36,8,22,6};`

public static void main (int[] args)
{
     jLabel2.setText(new X().HotDog[2]); //will return 10
} 
```

此外，java 中的常见做法是在 camelCase 中命名变量。例如鸡卷

# magento - 未定义索引：Magento Enterprise 1.10 中的 HTTP_USER_AGENT

> ID：12287737
> 
> 赞同：1
> 
> 时间：2012-09-05T18:37:44.753
> 
> 标签：magento

任何想法为什么magento系统中的system.log充满了这个错误？

2012-09-04T06:37:25+00:00 ERR (3): 注意：未定义索引：HTTP_USER_AGENT in /var/www//app/code/core/Mage/Core/Model/Design/Package.php 上线588

我们正在使用 Magento Enterprise 1.10，当我在寻找任何提示时，似乎它可能与 system->configuration 中的设计主题异常有关...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T19:18:19.763

*这在技术上是 Magento 中的一个错误*，因为这个变量被假定为已设置，[而实际上它可能没有设置](https://stackoverflow.com/questions/6465397/is-it-possible-for-serverhttp-user-agent-to-not-be-set)。

此处报告带有反向链接：[http ://www.magentocommerce.com/bug-tracking/issue?issue=14194](http://www.magentocommerce.com/bug-tracking/issue?issue=14194)

**编辑：添加简单补丁**

```
 if (!isset($_SERVER['HTTP_USER_AGENT']) || empty($_SERVER['HTTP_USER_AGENT'])) {
        return false;
    } 
```

# php - 如何检查 symfony2 中的用户角色以获取不属于定义的 security.yml 模式的 url？

> ID：12287740
> 
> 赞同：13
> 
> 时间：2012-09-05T18:37:53.230
> 
> 标签：php, symfony

我有一个管理面板，并为它定义了一个角色`ROLE_ADMIN`。在我的 security.yml 文件中，我使用了一种模式`^/admin/*`，因此 /admin 下的所有内容都需要`ROLE_ADMIN`. 现在在我的应用程序的前端，我需要检查用户角色以及角色是否`ROLE_ADMIN`呈现一个文件，否则呈现另一个文件。此 url 不属于 security.yml 中定义的模式。

那么如何在不属于 security.yml 中定义的模式的主页上检查用户是管理员还是普通用户？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-06T06:36:23.580

使用该模式在整个应用程序上启用防火墙`^/`，允许匿名访问并使用`access_control`限制访问：

```
security:
    firewalls:
        secured_area:
            pattern: ^/
            anonymous: ~

    access_control:
        - { path: ^/admin, roles: ROLE_ADMIN } 
```

* * *

正如@itsmequinn 建议的那样，使用`isGranted()`安全上下文的方法：

```
if ($this->get('security.context')->isGranted('ROLE_BRAND')) {
    // the user has the ROLE_BRAND role, so act accordingly
} 
```

* * *

在**Symfony 2.6**中，`security.context`已被拆分为两个独立的服务。因此，您需要使用该`security.authorization_checker`服务来解决问题：

```
if ($this->get('security.authorization_checker')->isGranted('ROLE_BRAND')) {
    // the user has the ROLE_BRAND role, so act accordingly
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-08-06T21:38:17.280

# SecurityContext 将在`Symfony 3.0`

之前`Symfony 2.6`你会使用`SecurityContext`.
`SecurityContext`将被弃用，`Symfony 3.0`取而代之的是[`AuthorizationChecker`](http://symfony.com/doc/current/components/security/authorization.html#authorization-checker).

**供`Symfony 2.6+`&`Symfony 3.0`使用[`AuthorizationChecker`](http://symfony.com/doc/current/components/security/authorization.html#authorization-checker)。**

* * *

# Symfony 2.5（及以下）

```
if ($this->get('security.context')->isGranted('ROLE_ADMIN')) {
    # User is a ROLE_ADMIN
} 
```

* * *

# Symfony 2.6（及以上）

```
if ($this->get('security.authorization_checker')->isGranted('ROLE_ADMIN')) {
    # User is a ROLE_ADMIN
} 
```

* * *

类似问题：[如何检查用户是否在控制器内登录 Symfony2？](https://stackoverflow.com/questions/10271570/how-to-check-if-an-user-is-logged-in-symfony2-inside-a-controller/31866186#31866186)

在此处阅读更多文档：[`AuthorizationChecker`](http://symfony.com/doc/current/components/security/authorization.html#authorization-checker)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T18:54:25.003

您在页面的控制器中吗？如果是这样，请使用`isGranted`安全上下文的方法：[Access Controls for Controllers](http://symfony.com/doc/current/book/security.html#access-control-in-controllers)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-17T12:25:46.153

在**Symfony 4 及更高版本**中，您应该使用如下代码，而不是使用 $this->get('security.authorization_checker') 之类的服务：

```
$hasAccess = $this->isGranted('ROLE_ADMIN');
$this->denyAccessUnlessGranted('ROLE_ADMIN'); 
```

[Symfony 安全性](https://symfony.com/doc/current/security.html#hierarchical-roles)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-06T20:27:18.470

最简单的解决方案是注释。而不是这个：

```
 if ($this->get('security.authorization_checker')->isGranted('ROLE_ADMIN')) {
       # User is a ROLE_ADMIN
    } 
```

..尝试使用这个：

```
/**
 * ...
 * @Security("has_role('ROLE_ADMIN')")
 */ 
```

.. 或者 ：

```
/**
 * ...
 * @Security("is_granted('POST_ADD', post)")
 */
public function addAction(Post $post){...} 
```

您可以在此处阅读有关[安全注释的](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/security.html)更多信息。注释是 Symfony 2 中的最佳实践 看[这里](http://symfony.com/doc/current/best_practices/security.html#authorization-i-e-denying-access)享受！

# java - 使用 JSON 进行 POST 时出现奇怪的 ExecutionException

> ID：12287741
> 
> 赞同：3
> 
> 时间：2012-09-05T18:38:14.840
> 
> 标签：java, playframework

我有这个方法：

```
/**
 * POST
 */
public static void create(String body) {
    Logger.info("APPOINTMENT create - json string: %s", body);

    Appointment appointment = null;
    try {
        appointment = new Gson().fromJson(body, Appointment.class);

        //services are detached, re-take them from db
        List<Service> refreshedServices = new ArrayList<Service>();
        for (final Service ser : appointment.services) {
            Service service = Service.findById(ser.id);
            refreshedServices.add(service);
        }
        appointment.services = refreshedServices;
        appointment.save();
        appointment.refresh();
        Logger.info("services refreshed");
    } catch (Exception ex) {
        Logger
                .info(
                        "An error has occured when trying to create an APPOINTMENT %s",
                        ex);
        response.status = Http.StatusCode.INTERNAL_ERROR;
        renderJSON(new StatusMessage(
                "An internal error has occured. Please try again later."));
    }

    renderJSON(appointment);
} 
```

我正在像这样测试它：

```
public void createAppointment(final Contact contact, final List<Service> services) throws Exception {
        Appointment app = new Appointment();
        app.userUid = "cristi-uid";
        app.name = "app1";
        app.contact = contact;

        String serviceAsJson = "{\"userUid\":\"cristi-uid\",\"name\":\"app1\",\"allDay\":false,\"contact\":{\"id\":"+contact.id+"},\"services\":[{\"id\":\""+services.get(0).getId()+"\"},{\"id\":\""+services.get(1).getId()+"\"}]}";
        Response response = POST("/appointment/create", "application/json", serviceAsJson);

        Logger.info("POST was done");
        Appointment appReturned = new Gson().fromJson(response.out.toString(), Appointment.class);

        Logger.info("appointment create response: %s", response.out.toString());

        assertIsOk(response);
        assertEquals(appReturned.name, app.name);
    } 
```

好吧，问题是它抛出了这个异常：

```
java.lang.RuntimeException: java.util.concurrent.ExecutionException: play.exceptions.JavaExecutionException
at play.test.FunctionalTest.makeRequest(FunctionalTest.java:304)
at play.test.FunctionalTest.makeRequest(FunctionalTest.java:310)
at play.test.FunctionalTest.POST(FunctionalTest.java:152)
at play.test.FunctionalTest.POST(FunctionalTest.java:120)
at play.test.FunctionalTest.POST(FunctionalTest.java:116)
at AppointmentsTest.createAppointment(AppointmentsTest.java:61) 
```

我无法找出原因。

之后打印出来`Logger.info("services refreshed");`它抛出异常......

你们觉得这个测试帖子有什么问题吗？

**更新**：似乎问题来自尝试呈现`appointment`为 JSON：

```
Caused by: java.lang.StackOverflowError
at java.util.LinkedHashMap$LinkedHashIterator.(LinkedHashMap.java:345)
at java.util.LinkedHashMap$LinkedHashIterator.(LinkedHashMap.java:345)
at java.util.LinkedHashMap$ValueIterator.(LinkedHashMap.java:387)
at java.util.LinkedHashMap$ValueIterator.(LinkedHashMap.java:387)
at java.util.LinkedHashMap.newValueIterator(LinkedHashMap.java:397)
at java.util.HashMap$Values.iterator(HashMap.java:910)
at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:192)
at com.google.gson.Gson$FutureTypeAdapter.write(Gson.java:879)
at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.write(CollectionTypeAdapterFactory.java:96) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:13:17.470

这是因为：

> Play 框架与 Google 的 JSON 库 Gson 捆绑在一起，但该库的开发人员已经做出了一些设计选择，使其不能理想地生成将发送到 HTTP 客户端的 JSON。

Erik Bakker[推荐](http://www.lunatech-research.fr/archives/2011/04/20/play-framework-better-json-serialization-flexjson)使用[FlexSon](http://flexjson.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:53:17.947

我能够通过深入研究错误跟踪来识别问题。基本上我的`Appointment`对象有一些关系，并且在尝试呈现这些关系时`ManyToMany`，renderJSON 似乎给出了。`StackOverFlow`

我创建了另一个`Appointment`对象并仅将需要导出的字段复制到其中。

```
 Appointment appointmentOutput = new Appointment();
    appointmentOutput.id = appointment.id;
    appointmentOutput.name = appointment.name;

    renderJSON(appointmentOutput); 
```

# tsql - CSV 格式的存储过程结果

> ID：12287744
> 
> 赞同：0
> 
> 时间：2012-09-05T18:38:24.063
> 
> 标签：tsql

我有一个执行选择并返回结果的存储过程。我希望这些结果采用 .csv 格式。不是 csv 文件，而是 csv 格式的字符串。此外，我不是在寻找管理工作室的任何菜单点击或选择。这必须在存储过程调用中完成。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:14:21.770

这可能对你有用。列标题是可选的：

```
select 'NVarCharColumn1Header,IntColumn2Header' 
            + char(13) + char(10) 
        + (select NVarCharColumn1 
                    + ',' + cast(IntColumn2 as nvarchar) 
                            + char(13) + char(10)
            from Table1
            for xml path(''), type).value('(./text())[1]','nvarchar(max)') 
```

# php - 如何使用 mysqli::multi_query 获取错误消息？

> ID：12287748
> 
> 赞同：3
> 
> 时间：2012-09-05T18:38:47.137
> 
> 标签：php, mysqli

这是我正在尝试的：

```
if($mysqli->multi_query(file_get_contents('file_that_contains_a_bunch_of.sql'))) {
    do {
        $result = $mysqli->use_result();
        if($mysqli->errno === 0) {
            echo $mysqli->affected_rows.' row(s) affected'.PHP_EOL;
        } else {
            die($mysqli->error);
        }
    } while($mysqli->next_result());
} 
```

但它会提前中止循环并且不会打印错误消息。我如何找出错误是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T18:45:57.757

彼得删除了他的答案，但它暗示了问题所在。我必须将错误检查放在循环之外。

在一切之下，我需要写

```
if($mysqli->errno) die($mysqli->error) 
```

*如果下一个*`next_result`查询出现错误，该函数将返回 false ，因此它甚至不会进入循环体。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-10T03:32:41.520

如果您以某种方式配置 mysqli_report，它可能会中止循环，寻找这样的字符串

```
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT); 
```

在这种情况下，每次你都会尝试这样做

```
$mysqli->use_result(); 
```

如果没有结果，您将生成错误，例如，如果有“设置”、“插入”、“更新”或“删除”类型的查询。

您找到获取错误消息的方法了吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-08T07:58:01.550

使用此代码效果很好

```
while ($conn->more_results()){
     $conn->next_result();
     echo $conn->error;
} 
```*

# java - Java堆内存不足但不是真的

> ID：12287752
> 
> 赞同：1
> 
> 时间：2012-09-05T18:38:59.217
> 
> 标签：java, heap-memory, velocity, turbine

因此，在尝试通过 Turbine servlet 使用 Velocity 呈现页面时出现此错误。问题是我有大量内存，而且 servlet 本身永远不会崩溃。它只是在这个请求上失败了。它试图渲染的页面可能是 10M。

有人有什么想法/建议吗？

```
 java.lang.OutOfMemoryError: Java heap space
 java.lang.OutOfMemoryError: Java heap space at java.util.Arrays.copyOf(Arrays.java:2271) at
 java.io.ByteArrayOutputStream.grow(ByteArrayOutputStream.java:113) at
 java.io.ByteArrayOutputStream.ensureCapacity(ByteArrayOutputStream.java:93)
 at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:140)
 at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221) at
 sun.nio.cs.StreamEncoder.implWrite(StreamEncoder.java:282) at
 sun.nio.cs.StreamEncoder.write(StreamEncoder.java:125) at
 sun.nio.cs.StreamEncoder.write(StreamEncoder.java:135) at
 java.io.OutputStreamWriter.write(OutputStreamWriter.java:220) at
 java.io.Writer.write(Writer.java:157) at
 org.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:321)
 at
 org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94)
 at
 org.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:109)
 at
 org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94)
 at
 org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)
 at
 org.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:128)
 at
 org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94)
 at
 org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)
 at
 org.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:128)
 at
 org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)
 at org.apache.velocity.Template.merge(Template.java:296) at
 org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492) at
 org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461) at
 org.apache.turbine.services.velocity.TurbineVelocityService.executeRequest(TurbineVelocityService.java:455)
 at
 org.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:321)
 at
 org.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:109)
 at
 org.apache.turbine.modules.layouts.VelocityOnlyLayout.doBuild(VelocityOnlyLayout.java:155)
 at org.apache.turbine.modules.Layout.build(Layout.java:91) at
 org.apache.turbine.modules.LayoutLoader.exec(LayoutLoader.java:138) at
 org.apache.turbine.modules.pages.DefaultPage.doBuild(DefaultPage.java:191)
 at org.apache.turbine.modules.Page.build(Page.java:91) at
 org.apache.turbine.modules.PageLoader.exec(PageLoader.java:136) 
```

`JAVA_OPTS= -Xms4096M -Xmn2048M -Xmx13128M`

top 下的内存使用量永远不会超过 100M。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:59:45.850

我怀疑您`-Xmn`是通过为年轻代保留了太大的初始堆块而导致了问题。我建议在没有这个的情况下运行你的服务器，看看会发生什么。

我的理由是失败发生在 上`ByteArrayOutputStream.grow()`，它正在创建一个比现有数组大一些百分比的新数组。大数组（> 512M）直接放入tenured generation，所以如果为young generation预留了太多空间，tenured中可能没有足够的可用空间。

另一种可能性是您渲染的模板比您想象的要大得多。虽然最可能的原因是循环，但我在堆栈跟踪中没有看到。

最后，`-XX:+HeapDumpOnOutOfMemoryError`在启动时添加选项。如果您的输出数组变得太大，您将在堆转储中看到这一点（用于`jhat`检查转储）。

# ios - 在 iOS 上创建一个 ttf 文件

> ID：12287760
> 
> 赞同：2
> 
> 时间：2012-09-05T18:39:17.790
> 
> 标签：ios, opengl-es, truetype

我想在 iphone/ipad 应用程序中创建一个简单的 ttf 字体。这个概念是用户将绘制每个字母，我将创建一个集合来构建 ttf 文件。
最初，我认为我必须将应用程序中的图像导出到服务器上的字体编辑器（如 fontforge），但现在我确信可以在设备上生成 ttf 文件。

这是我认为需要发生的事情：1）使用 OpenGL 启用绘图 2）保存图像。这是矢量格式还是位图？3) 将集合组织为 ttf 文件

有人能指出我成功的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T19:13:13.310

> 1) 使用OpenGL启用绘图

这就是你的第一个误解。OpenGL 最好被认为是一种单向设备。您将绘图命令放入其中，它会在屏幕上生成漂亮的图片。但是 OpenGL 既不是几何也不是数学库。

> 2) 保存图片

对于创建 TTF，发送到 OpenGL 的原始数据比从 OpenGL 读回的任何数据都要有用得多。

特别是，您将有一个笔画列表，您可以将其转换为轮廓，然后可以将其转换为字形。

# javascript - 使用 Highcharts.js 创建饼图

> ID：12287764
> 
> 赞同：0
> 
> 时间：2012-09-05T18:39:37.030
> 
> 标签：javascript, highcharts

我正在使用 highcharts.js 创建饼图，我必须使用 highcharts.js 创建超过 5 个饼图，但我遇到了一个问题，

对于在我的页面中使用一个 javascript 的每个饼图，是否有可能通过仅编写一个 javascript 我可以提供所有饼图 div id，例如我正在使用：

```
chart: {
            renderTo: 'container1',
            //borderRadius: 10,
            plotBackgroundColor: null,
            plotBorderWidth: 2,
            borderWidth: 0,
            plotShadow: false, 
```

我可以这样使用吗：

```
chart: {
            renderTo: 'container1','container2','container3','container4'....
            //borderRadius: 10,
            plotBackgroundColor: null,
            plotBorderWidth: 2,
            borderWidth: 0,
            plotShadow: false, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:49:17.417

不，我查看了文档，看起来 HighCharts.js 只支持`renderTo`单个 HTML 元素。[http://api.highcharts.com/highcharts#chart.renderTo](http://api.highcharts.com/highcharts#chart.renderTo)

我假设您有 5 个具有不同数据集的饼图，因此无论如何将同一个图表加载到多个 DIV 元素中是没有意义的。

您可以编写一个循环来加载不同的图表。

例如：

```
function loadCharts(chartData){
    for(i=0; i<chartData.length; i++){
        var container = chartData[i]['container'];
        var myData = chartData[i]['myData'];

        var chart = new Highcharts.Chart({
            chart: {
                renderTo: container,
                height: 400,
                plotBackgroundColor: null,
                plotBorderWidth: 2,
                borderWidth: 0,
                plotShadow: false
            },
            xAxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
            },

            series: [{
                data: myData        
            }]
        });
    }
}

var highchartsdata = [{
    container: 'container1',
    myData: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    },
    {
    container: 'container2',
    myData: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    },
    {
    container: 'container3',
    myData: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    },
    {
    container: 'container4',
    myData: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    },
    {
    container: 'container5',
    myData: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }];

loadCharts(highchartsdata); 
```

这是一个我没有测试的例子，但如果你想这样做的话，应该可以帮助你走上正确的道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:15:25.200

从文档中不清楚，但看起来[Highcharts.setOptions](http://api.highcharts.com/highcharts#Highcharts.setOptions%28%29)将允许您为所有后续图表设置默认选项，然后可以在调用`new Highcharts.Chart({ ...options...})`创建图表时覆盖*。

如果您将此库与 jQuery 一起使用，看起来您可以使用以下语法

```
$('#container1, #container2, #containerN').each(function(){
  new Highcharts.Chart({ chart:{ renderTo:this } });
}) 
```

编辑：...对于所有图表中的相同系列数据，这似乎很好，因为系列是可以提供图表的选项。但是，它似乎不尊重提供系列作为默认选项。因此，如果您的系列数据是关于数据的元素，那么

```
$('#container1, #container2, #containerN').each(function(){
  var $c = $(this);
  new Highcharts.Chart({ chart:{ renderTo:this }, series:$c.data() });
}) 
```

...假设数据以适当的方式附加。`$c.data()`或者，根据其中的内容生成/定位/加载该系列对象`.each`似乎非常明智。当然，如果你真的对多个图表使用同一系列数据，那么你可以简单地：

```
var s = ... // series value
$('#container1, #container2, #containerN').each(function(){
  new Highcharts.Chart({ chart:{ renderTo:this }, series:s });
}); 
```

我根据他们[提供的](http://api.highcharts.com/highcharts#chart.renderTo)[文档](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/renderto-jquery/)进行了一些快速的代码修改，可以在[这里](http://jsfiddle.net/hTvNx/)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:48:02.520

您上面的内容不是有效的 JavaScript 语法。

查看 Highcharts API 文档，似乎没有任何方法可以指定多个元素同时呈现。它必须一次是一个元素。最好的办法是循环渲染。

# c++ - 带有宏的模板函数-在向量上累积

> ID：12287768
> 
> 赞同：3
> 
> 时间：2012-09-05T18:40:00.717
> 
> 标签：c++, templates, vector, macros, c-preprocessor

我想创建一个函数来`vector<int>`运行他的所有元素并根据我选择的特定运算符“求和”它们。

例如，`v1 = [3,6,7]`所以我可以通过这个函数来计算 - of `3+6+7`etc ..`3-6-7``3*6*7`

为此我做了-

```
#include <iostream>
#include <vector>

using namespace std;

#define     OPERATOR(X,Y,OP)  X #OP Y

template<T>
int allVectorWithOperator(vector<int> &myVector, T) {
    vector<int>::iterator it;
    vector<int>::iterator oneBeforeFinal;
    oneBeforeFinal = myVector.end();
    oneBeforeFinal -= 2;
    int sum = 0;
    for (it = myVector.begin(); it <= oneBeforeFinal; it++) {
        sum = OPERATOR(*(it),*(it+1),T);
    }
    return sum;

}

int main() {
    vector<int> myVector;
    myVector.push_back(3);
    myVector.push_back(6);
    myVector.push_back(7);
cout << "run over all the vector with * is :" << allVectorWithOperator(myVector,*)<<endl;
// here I want to get 3*6*7    

} 
```

在模板的这种情况下，我控制得不是很好，所以你可以看到这段代码不起作用，但我想你明白我的目标是什么。我怎样才能修复它以正常工作？

**编辑：**

根据我得到的 2 答案，我将代码部分更改为 -

```
#include <iostream>
#include <vector>
#include <numeric>

using namespace std;

template<typename T>
int allVectorWhitOperator(vector<int> &myVector, const T& func) {
    int sum = std::accumulate(myVector.begin(), myVector.end(), 1, func);
    return sum;

}

int main() {
    vector<int> myVector;
    myVector.push_back(3);
    myVector.push_back(4);
    myVector.push_back(6);
    cout << "accumulate the vector with * is :"
            << allVectorWhitOperator(myVector, std::multiplies<int>()) << endl;

} 
```

它工作正常！确实我`got accumulate the vector with * is :72`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T18:44:54.333

标准库已经有.~~`<algorithm>`~~`<numeric>`

您可以使用

```
int sum = std::accumulate(MyVector.begin(), MyVector.end(), 0); 
```

将所有元素相加。

如果要计算乘积（而不是使用默认值`operator+`），可以传递一个附加参数

```
int product = std::accumulate(MyVector.begin(), MyVector.end(), 1,
                              std::multiplies<int>()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T18:52:08.340

[这基本上只是`std::accumulate`](http://en.cppreference.com/w/cpp/algorithm/accumulate)。假设向量不为空，您可以将函数重写为：

```
template <typename C, typename F>
typename C::value_type fold(const C& container, const F& function) {
    typename C::iterator cur = container.begin();
    typename C::value_type init = *cur++;
    return std::accumulate(cur, container.end(), init, function);
}

...

int sum = fold(myVector, std::plus<int>());
int difference = fold(myVector, std::minus<int>());
int product = fold(myVector, std::multiplies<int>()); 
```

* * *

现在，关于您的实施：

1.  如上例所示，要在模板中声明类型参数，您需要有`typename`or`class`关键字：`template <typename T> int allVectorWithOperator( ... )`

2.  孤独`*`不会是有效的语法。但是 C++ 提供了很多“函数对象”，它们封装了这些运算符，以便您可以将它们与函数表示法一起使用。例如，

    ```
    std::multiplies<int> f; // f is a now function that multiplies 2 numbers
    int product = f(5, 7);  // p == 35; 
    ```

    所以你可以写：

    ```
    template<typename T>
    int allVectorWithOperator(vector<int> &myVector, T func) {
        ....
        for (it = myVector.begin(); it != oneBeforeFinal; ++ it) {
            sum = func(*it, *(it+1));
        }
    } 
    ```

    另外，一些小问题：（1）通常我们将迭代器与`!=`而不是比较`<=`，因为许多迭代器不支持`<=`运算符，（2）`++it`比`it++`一般更有效。

3.  宏和模板在不同的阶段进行处理。特别是，您不能将模板或函数参数传递给宏，因为在考虑模板时已经评估了所有宏。为了实现您的语法，`allVectorWithOperator`必须将整体编写为宏，例如（假设可以使用 C++11）：

    ```
    #define allVectorWithOperator(container, binaryOp) \
        ([&]() -> std::remove_reference<decltype(*(container).begin())>::type { \
            auto&& c = (container); \
            auto cur = c.begin(); \
            auto val = *cur++; \
            auto end = c.end(); \
            while (cur != end) { val binaryOp##= *cur++; } \
            return val; \
        }()) 
    ```

    是的，这完全是一团糟，所以如果可能的话，你不应该使用宏。顺便说一句，`#OP`意思是把它`OP`变成一个字符串。你真的不需要`#`.

# wordpress - 重力形式 Wordpress 插件空白

> ID：12287772
> 
> 赞同：1
> 
> 时间：2012-09-05T18:40:24.823
> 
> 标签：wordpress

我为我的 WP 网站安装了 Gravity Forms 插件，但在尝试嵌入表单时总是出现空白屏幕。我已经尝试过简码样式和 PHP 样式。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:41:07.240

尝试对表单中的任何问题禁用条件格式。

# iphone - 是否可以为客户开设 Apple Developer 帐户？

> ID：12287775
> 
> 赞同：3
> 
> 时间：2012-09-05T18:40:54.913
> 
> 标签：iphone, ipad

我的公司正在为技术不成熟的政府客户开发 iPad 应用程序，我知道他们需要自己的 Apple 开发者帐户。我们愿意为他们开设和维护开发者帐户，因为我们会更乐意掌握自己的命运，他们也会更乐意将工作委托给我们。

但在[Apple Enrollment Guidelines](https://developer.apple.com/support/ios/enrollment.html)中，它说：

> **我是一名承包商，为我自己以外的公司开发应用程序。我如何确保我的客户的名字在 App Store 中被列为“卖家”？**
> 
> 如果您的客户计划在 App Store 上分发您为他们创建的应用程序，并且他们的法人实体名称为“卖家”，他们必须注册 iOS 开发者计划。他们可以将您添加为他们的开发团队的成员，以便您可以访问创建应用程序所需的资源。虽然他们必须是提交应用程序以供审核的人，但您可以在必要时协助他们。

这听起来像是任何想成为“卖家”的公司都必须实际创建自己的帐户并至少完成一些工作，即使很明显另一方是唯一能够做任何事情的人的工作。我读对了吗？承包商真的不可能代表客户设置开发者帐户吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:46:01.553

对，那是正确的。您的客户负责创建帐户并支付开发人员费用。

~~您可以创建帐户，但是当您的合同结束时，您将收到支持请求，负责所有未来的更新，并且必须每年更新帐户。最好为您的客户创建帐户。~~ **查看编辑**

* * *

**编辑：**在这个讨论中找到了一个线程 - [http://www.buzztouch.com/forum/thread.php?tid=10608297F86BD057C74C0F9](http://www.buzztouch.com/forum/thread.php?tid=10608297F86BD057C74C0F9)。MGoBlue 在 2011 年 10 月 10 日晚上 9:04 发布的帖子是 Apple 的立场，即不这样做。不要惹苹果，让您的客户创建一个帐户并邀请您加入。

[Apple 的 Program Enrollment FAQ](https://developer.apple.com/support/ios/enrollment.html)中也有关于此的说明：

**我是一名承包商，为我自己以外的公司开发应用程序。我如何确保我的客户的名字在 App Store 中被列为“卖家”？**

> 如果您的客户计划在 App Store 上分发您为他们创建的应用程序，并且他们的法人实体名称为“卖家”，他们必须注册 iOS 开发者计划。他们可以将您添加为他们的开发团队的成员，以便您可以访问创建应用程序所需的资源。虽然他们必须是提交应用程序以供审核的人，但您可以在必要时协助他们。

# android - Android Camera Activity 产生重复的照片

> ID：12287780
> 
> 赞同：0
> 
> 时间：2012-09-05T18:41:03.967
> 
> 标签：android, photo

我使用以下代码获取存储在 SD 卡文件夹中的照片。这工作正常。但照片也存储在 SD 卡图像文件夹中，并显示在 androids 照片库中。为什么？

提前致谢！

```
public class Foto extends Activity implements SurfaceHolder.Callback,
    OnClickListener {

private static final int CAMERA_ACTIVITY = 1;
private static final int TAKE_PICTURE = 1;
File archive, root, folder;
String fec;

public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    String storageState = Environment.getExternalStorageState();
    if (storageState.equals(Environment.MEDIA_MOUNTED)) {

        String path = Environment.getExternalStorageDirectory().getName()
                + File.separatorChar + "TEST" + "/"
                + "test.jpg";
        archive = new File(path);
        try {
            if (archive.exists() == false) {
                archive.getParentFile().mkdirs();
                archive.createNewFile();
            }
            if (archive.exists() == true) {

                archive.createNewFile();
            }

        } catch (IOException e) {
            Log.e(ACTIVITY_SERVICE, "Could not create file.", e);
        }
        Log.i(ACTIVITY_SERVICE, path);

        Uri _fileUri = Uri.fromFile(archive);
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, _fileUri);
        startActivityForResult(intent, TAKE_PICTURE);

        setResult(RESULT_OK, intent);
        finish();
    } else {
        new AlertDialog.Builder(Foto.this)
                .setMessage(
                        "External Storeage (SD Card) is required.\n\nCurrent state: "
                                + storageState).setCancelable(true)
                .create().show();

        finish();
    }

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();

}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder arg0) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceDestroyed(SurfaceHolder arg0) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:36:34.147

在大多数设备上，MediaStore.ACTION_IMAGE_CAPTURE 除了它所做的任何其他事情外，还会保存到画廊，即使您不要求返回文件，只是一个 URI。我知道在 Nexus 7 上它并没有这样做，但是，这真的很糟糕，行为是如何神奇地不同并且很烦人。无论如何，还要注意，如果媒体扫描仪已经赶上，Gallery 实际上会在 SD 卡上的任何位置显示没有 .nomedia 文件的任何内容。

# iphone - 使用“位置显着变化”和用户感知时出现 GPS 图标问题

> ID：12287785
> 
> 赞同：5
> 
> 时间：2012-09-05T18:41:33.267
> 
> 标签：iphone, ios, ios6

我开发了一个使用“位置重大变化”功能的应用程序。我注意到用户下载我的应用程序后，他们很快倾向于卸载它，因为他们在 iPhone 上看到了白色的 GPS 图标，他们认为这会耗尽手机电池。

我想知道是否有任何解决方法或建议，我还想知道 Apple 在 iOS 6 或下一个版本上使用“位置重大变化”功能时是否会对 GPS 图标做任何事情。

相比之下，Android 有一个功能，您可以设置警报管理器以在特定时间间隔唤醒应用程序。这将解决问题，在 iOS（或 iOS 6 上）是否有类似的东西。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:56:08.113

这将是在 iOS 设备上使用定位服务的一个不可协商的方面。Apple 希望在用户的位置被使用时通知用户，以便他们做出明智的决定。因此，不会发生覆盖或隐藏此位置图标的情况。（不包括越狱）

在我看来，你有几个选择来帮助自己。

*   在应用商店的应用描述中通知用户，这样他们就可以预先知道电池寿命不会被猛烈抨击那么糟糕。
*   当您请求使用用户位置的权限时，设置一个很好的详细消息集。这将使他们知道原因，并确保他们接受并允许它。
*   如果您的网站或应用程序中有常见问题解答，请确保详细说明图标的含义，并向用户保证 Apple 非常重视电池寿命，您也是如此。

除此之外，您无能为力。尽可能地通知您的用户，然后从那里开始。祝你好运。

*更新*

我在iOS 6的Privacy-->Location Services-->System Services下找到了一个设置，一直在底部，有一个隐藏统计栏图标的用户设置。这为不想看到它的用户释放了一些状态栏空间。这并不意味着应用程序没有使用位置，只是图标被隐藏了。这是您的用户必须做的事情，因为覆盖这不是一个选项。至少它可以与您的用户分享。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T19:00:39.433

请注意，使用重大位置更改时的位置箭头与您在后台主动使用位置服务时的位置箭头不同。您可以做的最好的事情是确保用户了解他们的位置是如何被使用的，并教他们识别位置监控（如地理围栏和重大位置变化）和位置跟踪之间的区别。

# git - git clone --mirror 和 git clone --bare 有什么区别？

> ID：12287786
> 
> 赞同：0
> 
> 时间：2012-09-05T18:41:34.180
> 
> 标签：git, codemirror

> **可能重复：**
> [git clone --mirror 和 git clone --bare 有什么区别](https://stackoverflow.com/questions/3959924/whats-the-difference-between-git-clone-mirror-and-git-clone-bare)

man git-clone 表示：

> 暗示 --bare

那么它们之间有什么区别呢？

--bare 比 --mirror 选项更强大吗？

[git clone --mirror 和 git clone --bare 之间有什么区别](https://stackoverflow.com/questions/3959924/whats-the-difference-between-git-clone-mirror-and-git-clone-bare)说 --bare 选项不希望再次获取，那么我可以获取对该裸仓库的新提交吗？是在克隆项目时使用 --bare 选项时允许获取新提交。

# c# - 搜索字符串模式

> ID：12287790
> 
> 赞同：2
> 
> 时间：2012-09-05T18:42:12.510
> 
> 标签：c#, regex, substring, indexof

如果我有一个像**MCCORMIC 3H R Final 08-26-2011.dwg**甚至**MCCORMIC SMITH 2N L Final 08-26-2011.dwg 这样**的字符串，我想捕获第一个字符串中的**R**或第二个字符串中的**L**一个变量，这样做的最佳方法是什么？我正在考虑尝试以下语句，但它不起作用。

```
string filename = "MCCORMIC 3H R Final 08-26-2011.dwg"
string WhichArea = "";
int WhichIndex = 0;

WhichIndex = filename.IndexOf("Final");
WhichArea = filename.Substring(WhichIndex - 1,1); //Trying to get the R in front of word Final 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:43:52.850

只是按空间分割：

```
var parts = filename.Split(new [] {' '}, 
                            StringSplitOptions.RemoveEmptyEntries);

WhichArea = parts[parts.Length - 3]; 
```

看起来文件名具有非常特定的格式，因此可以正常工作。

即使有任意数量的空格，使用`StringSplitOptions.RemoveEmptyEntries`意味着空格也不会成为拆分结果集的一部分。

更新代码以处理这两个示例 -[感谢 Nikola](https://stackoverflow.com/questions/12287790/search-string-pattern/12287810#comment16483487_12287810)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T19:32:06.053

我不认为[Oded 的答案](https://stackoverflow.com/a/12287810/388664)涵盖所有情况。第一个例子在通缉的字母前面有两个词，第二个例子在它前面有三个词。

我的观点是获得这封信的最好方法是使用 RegEx，假设这个词`Final`总是在字母本身之后，用任意数量的空格分隔。

这是正则表达式代码：

```
using System.Text.RegularExpressions;

private string GetLetter(string fileName)
{
    string pattern = "\S(?=\s*?Final)";
    Match match = Regex.Match(fileName, pattern);
    return match.Value;
} 
```

这是RegEx模式的解释：

```
\S(?=\s*?Final)

\S // Anything other than whitespace
(?=\s*?Final) // Positive look-ahead
    \s*? // Whitespace, unlimited number of repetitions, as few as possible.
    Final // Exact text. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T19:28:17.117

我不得不做类似的事情，但使用 Mirostation 图纸而不是 Autocad。我在我的情况下使用了正则表达式。这就是我所做的，以防万一你想让它变得更复杂。

```
string filename = "MCCORMIC 3H R Final 08-26-2011.dwg"; 
string filename2 = "MCCORMIC SMITH 2N L Final 08-26-2011.dwg";

Console.WriteLine(TheMatch(filename));
Console.WriteLine(TheMatch(filename2));

public string TheMatch(string filename) {   
    Regex reg = new Regex(@"[A-Za-z0-9]*\s*([A-Z])\s*Final .*\.dwg");
    Match match = reg.Match(filename);
    if(match.Success) {
        return match.Groups[1].Value;
    }
    return String.Empty;
} 
```

# jquery - 如何从另一个图像打开颜色框到特定图像？

> ID：12287793
> 
> 赞同：2
> 
> 时间：2012-09-05T18:42:16.643
> 
> 标签：jquery, wordpress, colorbox

我在这里有这个页面/products-page/rings/product-1-2/

如您所见，有 1 张大图和 3 张缩略图

当您单击任何小图像时，它将替换大图像。

大图代码：

```
<a class="preview_link cboxElement" style="text-decoration:none;" href="/wp-content/uploads/2012/07/DSC_0118.jpg" rel="Teardrop Druzy Amethyst Ring">
<img id="product_image_736" class="product_image colorbox-736" width="400" src="/wp-content/uploads/2012/07/DSC_0118.jpg" title="Teardrop Druzy Amethyst Ring" alt="Teardrop Druzy Amethyst Ring">
<br>
<div style="text-align:center; color:#F39B91;">Click To Enlarge</div>
</a> 
```

当您单击大图像 jquery colorbox 打开时，但是在颜色框中它说我只有 3 个图像时有 4 个图像，我想我的问题是如何让颜色框忽略大图像，但仍然有链接到工作....这就是我要找的吗？

缩略图代码：

```
<div class="wpcart_gallery" style="text-align:center; padding-top:5px;">
<a class="thickbox cboxElement" title="DSC_0118" href="/wp-content/uploads/2012/07/DSC_0118.jpg" rel="Teardrop Druzy Amethyst Ring" rev="/wp-content/uploads/2012/07/DSC_0118.jpg">
<img class="attachment-gold-thumbnails colorbox-736" width="50" height="50" title="DSC_0118" alt="DSC_0118" src="/wp-content/uploads/2012/07/DSC_0118-50x50.jpg">
</a>
<a class="thickbox cboxElement" title="P7230376" href="/wp-content/uploads/2012/07/P7230376.jpg" rel="Teardrop Druzy Amethyst Ring" rev="/wp-content/uploads/2012/07/P7230376.jpg">
<img class="attachment-gold-thumbnails colorbox-736" width="50" height="50" title="P7230376" alt="P7230376" src="/wp-content/uploads/2012/07/P7230376-50x50.jpg">
</a>
<a class="thickbox cboxElement" title="P7230378" href="/wp-content/uploads/2012/07/P7230378.jpg" rel="Teardrop Druzy Amethyst Ring" rev="/wp-content/uploads/2012/07/P7230378.jpg">
<img class="attachment-gold-thumbnails colorbox-736" width="50" height="50" title="P7230378" alt="P7230378" src="/wp-content/uploads/2012/07/P7230378-50x50.jpg">
</a>
</div> 
```

一切都包裹在`<div class="imagecol"> </div>`

任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:46:47.567

使用 Jquery ......这将工作......

```
jQuery('document').ready(function($){
$(".wpcart_gallery a:first").removeClass("cboxElement");
jQuery(".wpcart_gallery img").click(function($){
jQuery(".wpcart_gallery a").addClass('cboxElement');
jQuery(this).closest('a').removeClass('cboxElement');
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T19:58:11.680

据我记得使用 Colorbox，它只识别`cboxElement`附加了 -class 的图像。既然您似乎已经有了一个更改大图像来源的功能，那么如何`cboxElement`从单击的缩略图中删除该类，并将其附加到其他两个图像？可能值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:43:37.440

您在 colorbox 组中获得了 4 个元素 - 3 个拇指 + 1 个主图像 - 因为您通过给所有这些类来告诉 colorbox 这样做`cboxElement`。当您需要默认设置（例如，没有外部导航的标准图像库）时，该类非常有用。

但是，您需要为您的情况设置一些不那么“默认”的东西。我建议您使用您的主图像作为彩盒的触发器，并在 JS 中设置您的彩盒图像（不带`cboxElement`. 策略是这样的：

1.  将所有 thumb 初始化`img`为一个颜色框组。
2.  单击 thumb 时，对应 thumb`img`的 id 存储在主图像链接中
3.  单击主图像时，打开颜色框组，从存储的 id 开始

这是 JS：

```
//STEP 1: initialize colorbox group
$(".attachment-gold-thumbnails").colorbox({
    rel: "myGroup"
    //other options...
}); 
```

在这里，我们设置了颜色框组。请注意，我们使用的是获取拇指图像的类，而不是您周围的链接。而且严格来说，你不需要使用类来拉它们，只要你方便就行。

```
//Each thumb updates main image 
$(".wpcart_gallery a").click(function() {
    var thumb_img_link = $(this),
        thumb_img = thumb_img_link.children().first(),
        product_image = $("#product_image_736"),
        product_image_link = product_image.parent();

    //STEP 2: update "data-thumb" attribute
    product_image_link.attr("data-thumb", "#" + thumb_img.attr("id"));

    product_image.attr({
        src: thumb_img.attr("href"),
        alt: thumb_img.attr("src"),
        title: thumb_img.attr("src")
    });

    return false;
}); 
```

这是您最可能想要自定义的部分。至少，拇指img id 需要存储在主图像链接中。

```
//Main image opens colorbox
$(".preview_link").click(function() {
    var thumb_img_id = $(this).attr("data-thumb");

    //STEP 3
    $(thumb_img_id).colorbox({open:true});

    return false;
}); 
```

使用我们存储在 中的 id `data-thumb`，我们打开该图像的颜色框组。

您还需要对 HTML 进行细微的更改：

```
<!-- Change 1: add data-thumb -->
<a class="preview_link" data-thumb="#thumb1" ...>
    ...
</a>

<div class="wpcart_gallery">
    <a class="thickbox" ... >
        <!-- 
        Change 2: Give the img an id so we can reference it
        Change 3: Instead of the "rev" attribute, colorbox will 
        read the "href" attribute in the img tag -->
        <img id="thumb1" href="http://images.picturesdepot.com/photo/s/scenery_wallpaper,_wallpaper-209423.jpg" ... >
    </a>
</div> 
```

[在这里](http://jsfiddle.net/DonamiteIsTNT/E6VyT/1/)查看 jsfiddle

# data-mining - 高维数据的最快主成分分析 PCA 算法？

> ID：12287796
> 
> 赞同：1
> 
> 时间：2012-09-05T18:42:23.990
> 
> 标签：data-mining

我想对由大约 40 000 个样本组成的数据集执行主成分分析，每个样本显示大约 10 000 个特征。

使用 Matlab princomp 函数需要很长时间......最快的算法是什么？i7 双核 / 4GB Ram 需要多长时间？

谢谢你的支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T22:20:12.580

[交叉发布： https](https://scicomp.stackexchange.com/questions/1681/what-is-the-fastest-way-to-calculate-the-largest-eigenvalue-of-a-general-matrix/7487#7487) ://scicomp.stackexchange.com/questions/1681/what-is-the-fastest-way-to-calculate-the-largest-eigenvalue-of-a-general-matrix/7487#7487

最近对此进行了一些很好的研究。新方法使用“随机算法”，只需读取少量矩阵即可在最大特征值上获得良好的准确性。这与需要多次矩阵向量乘法才能达到高精度的幂迭代形成对比。

您可以在此处阅读有关这项新研究的更多信息：

[http://math.berkeley.edu/~strain/273.F10/martinsson.tygert.rokhlin.randomized.decomposition.pdf](http://math.berkeley.edu/~strain/273.F10/martinsson.tygert.rokhlin.randomized.decomposition.pdf)

[http://arxiv.org/abs/0909.4061](http://arxiv.org/abs/0909.4061)

此代码将为您完成：

[http://cims.nyu.edu/~tygert/software.html](http://cims.nyu.edu/~tygert/software.html)

[https://bitbucket.org/rcompton/pca_hgdp/raw/be45a1d9a7077b60219f7017af0130c7f43d7b52/pca.m](https://bitbucket.org/rcompton/pca_hgdp/raw/be45a1d9a7077b60219f7017af0130c7f43d7b52/pca.m)

[http://code.google.com/p/redsvd/](http://code.google.com/p/redsvd/)

[https://cwiki.apache.org/MAHOUT/stochastic-singular-value-decomposition.html](https://cwiki.apache.org/MAHOUT/stochastic-singular-value-decomposition.html)

如果您选择的语言不在其中，您可以很容易地滚动您自己的随机 SVD；它只需要矩阵向量乘法，然后调用现成的 SVD。

# android - 停止活动并重新启动它（android）

> ID：12287797
> 
> 赞同：0
> 
> 时间：2012-09-05T18:42:26.863
> 
> 标签：android, android-activity, restart

我的应用程序上有一个登录屏幕，现在您可以按返回按钮返回登录屏幕。我不希望这种情况发生。

用户登录后，应用程序应停止登录活动，以便用户无法返回。在菜单屏幕上，我有一个注销按钮，我想在已停止登录活动后使用该按钮重新启动登录活动。

我一直在寻找和测试一个小时左右，但我找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:00:41.393

`noHistory = true`在[清单中为您的登录活动](http://developer.android.com/guide/topics/manifest/activity-element.html)设置。这可以防止活动被存储在后台堆栈中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:45:12.897

成功登录后，您可以调用`Actvity.finish()`.

要重新启动登录活动，请使用`Activity.startActivity(intent)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:47:13.793

尝试：

在您的登录活动中登录成功后，在启动下一个活动后对该活动调用 finish()。这将有效地破坏登录活动并将其从活动返回堆栈中删除（因此无法再导航到它）。就像是：

```
onLoginComplete(){
    startActivity(new Intent(this, NextActivity.class));
    finish();
} 
```

或者，在登录活动的 onResume 中检查登录状态，如果为真，则完成。这样，每当用户进入此活动时，如果他们已经登录，它将被关闭（并且他们永远不会真正看到它）。例如：

```
@Override
public void onResume(){
    super.onResume();
    if(isLoggedIn())
        finish();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T18:47:53.190

当您成功登录后离开登录屏幕时，调用`finish()`此命令将从堆栈中删除您的活动。

您的注销按钮应重新调用登录页面，如下所示：

```
Intent intent = new Intent(TheCurrentActivity.this, YourLoginScreen.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
finish(); 
```

这将加载登录屏幕并清除当前活动堆栈，确保您在注销后无法返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T19:29:45.153

如果您不希望用户能够返回登录活动，只需将其从最近的堆栈中排除，方法是在应用程序清单属性中添加您的活动声明`android:excludeFromRecents`，如下所示：

```
<activity android:name=".Login" android:excludeFromRecents="true"></activity> 
```

然后，一旦您的登录活动完成它的任务，您（很可能）将进入您的应用程序的下一个活动。一旦你调用`startActivity()`启动新的，只需调用`finish();`完成登录活动：

```
...
startActivity( intentToLaunchNextActivity );
finish(); 
```

# javascript - Highstock 系列与前一天相比

> ID：12287799
> 
> 赞同：2
> 
> 时间：2012-09-05T18:42:41.463
> 
> 标签：javascript, highcharts, highstock

我已经实现了显示在以下位置的 HighStock 图表：

[http://www.highcharts.com/stock/demo/compare](http://www.highcharts.com/stock/demo/compare)

此图表显示了与第一个或最左侧数据点相比的百分比变化。我有一些股票分析师告诉我这没什么用，他们宁愿看到与先前数据点相比的百分比变化，或者换句话说，如果我在图表上查看“今天”，我会想看看昨天的百分比变化。我查看了 highstock API，似乎找不到定义百分比变化函数的方法。有没有合适的方法让 highstock 做到这一点，或者我应该使用 highcharts 折线图来完成这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T21:21:16.937

我以前必须在高图表中做类似的事情。我想获得从一个数据点到下一个数据点的实际变化。

我所做的是查看当前点 (this.x)，并找到它在系列数组中的位置。从那里，我很容易找到前一点的索引（索引 = a - 1）并进行数学计算。希望这可以帮助 ：）

编辑：

查看了 stockcharts API 并为该产品找到了答案：

```
tooltip: {
    formatter: function() {
        var s = '<b>'+ Highcharts.dateFormat('%A, %b %e, %Y', this.x) +'</b><br>';

        $.each(this.points, function(i, point) {

            s += '<span style="font-weight: bold; font-size: 1.2em; color: ' + point.point.series.color + ';">' + point.point.series.name + '</span>:<span style="font-weight: bold; font-size: 1.2em;">' + point.y + '</span>' ;
            s += '<span style="font-size: .8em;">';

            var target = this.x;

            index = 0;
            for (var a = 0; a < point.series.points.length; a++) {
               if (point.series.points[a].x == target)
               {
                    index = a - 1;
               }
            }
            var delta = 0;
            var change = 0;
            if (index >= 0)
            {
                delta = this.y - point.series.points[index].y;
                change = (delta  / point.series.points[index].y) * 100;
            }
            s += Math.round(change,2) + '%</span>';

            s +='</span><br>';

        });

        return s;
    }
}, 
```

还有一个工作的jsfiddle：http: [//jsfiddle.net/nLjsc/2/](http://jsfiddle.net/nLjsc/2/)

# c# - 如何在我的独立 C# 程序中使用 Microsoft SQL Server 2005 中的分词器

> ID：12287801
> 
> 赞同：1
> 
> 时间：2012-09-05T18:42:43.693
> 
> 标签：c#, sql-server-2005, com-interop, stemming, wordbreaker

我正在编写一个程序，它将在 Microsoft SQL Server 2005 上查询全文搜索索引。被索引的数据是大块文本（多行）。

我只需要提取那些包含搜索词的文本行，以便与结果一起显示。

因此，我需要使用 Sql Server 分词器和词干分析器来确定 blob 中的每一行文本是否与搜索字符串匹配，因为我了解 Windows 搜索中的标准分词器和词干分析器使用不同的算法。

我想如果我将两个 dll（infosoft 和 langwrbk）从 SQL Server 安装复制到我正在运行我的程序的机器上，并在它们上运行 regsvr32，它们将安装在注册表中，我将能够使用他们。

没有这样的运气 - 运行 regsvr32 似乎根本不会向注册表添加任何内容！

我有代码可以使用 Windows 附带的分词器和词干分析器来完成这项工作，并且它可以工作，但我担心这些差异（我在这里的其他帖子中看到过抱怨）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:43:17.047

我在 COM 使用了代码，[没有注册](http://gist.github.com/1568627)这个教区的[john-jeffery](https://stackoverflow.com/users/410496/john-jeffery)提供的好意。

最初我遇到了问题，直到我意识到我使用的 DLL 是 64 位的，而我使用它的代码是 32 位的。一旦我将调用代码设为 64 位，一切正常。（我想如果我想保持 32 位，我可以从 32 位版本的 Sql Server 中获取 DLL）。

[我已经在我的博客](http://trumphurst.blogspot.co.uk/2012/09/using-word-breaker-from-microsoft-sql.html)上发布了一个测试 LinqPad 脚本，它同时使用了分词器和词干分析器，以防万一还有其他人想做同样的事情。

# templates - 如何在内容项下自动创建文件夹？

> ID：12287806
> 
> 赞同：4
> 
> 时间：2012-09-05T18:43:14.007
> 
> 标签：templates, sitecore

查看内容编辑器将基于模板创建新内容项的场景。换句话说，如果我基于汽车模板创建内容项，我想在新的汽车项下添加一个名为“选项”的文件夹。

作为内容编辑器，我可以从文件夹的插入命令中添加各种选项。

这可以做到吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T18:52:31.663

这是对 Sitecore 分支模板的教科书描述，它可以包含从单个项目到具有自己的一组标准值和插入选项的复杂子项目层次结构的任何内容。[请参阅Data Definition Cookbook](http://sdn.sitecore.net/upload/sitecore6/datadefinitioncookbook-a4.pdf)的第 3 章了解如何设置这些内容。

# mysql - mysql准备好的语句：更新查询

> ID：12287809
> 
> 赞同：7
> 
> 时间：2012-09-05T18:43:20.260
> 
> 标签：mysql, c, database-connection

我正在尝试使用 mysql C API 执行 C 程序，使用更新查询连接到 mysql，但没有收到任何编译或链接错误，但 db 表中的行没有得到更新。

当我运行此代码时，我在 emp 中更新了空值。状态字段

```
#define STRING_SIZE 256

char* eStatus,myeStatus;

int myempid,empid;

int i;
for(i = 0; i < 5 ; i++){
const char* sqlQuery = "update employee_info set estatus = ? where empID = ?";
    if (mysql_stmt_prepare(stmt, sqlQuery, strlen(sqlQuery))) {
            fprintf(stderr, " mysql_stmt_prepare(), update failed\n");
            fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
            return -1;
          }

memset(param, 0, sizeof(param)); /* zero the structures */

if (info.state == 2)

      eStatus = "present";

else
      eStatus = "absent";

empid = i;
// Init param structure
            // Select
            param[0].buffer_type = MYSQL_TYPE_STRING;
            param[0].buffer = (void *) &eStatus;
            param[0].buffer_length = STRING_SIZE;
            param[0].is_null = 0;
            param[0].length = &str_length;

            param[1].buffer_type = MYSQL_TYPE_SHORT;
            param[1].buffer = (void *) &myempID;
            param[1].buffer_length = STRING_SIZE;

            param[1].is_null = 0;
            param[1].length = 0;

        myeStatus = eStatus;
    myempid = empid;
               if (mysql_stmt_bind_param(stmt, param) != 0) {
            fprintf(stderr, " mysql_stmt_bind_param() failed\n");
            fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
            return -1;
        }
               /* Execute the statement */
        if (mysql_stmt_execute(stmt)) {
            fprintf(stderr, " mysql_stmt_execute(), failed\n");
            fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
                return -1;
        }

} // end of for loop 
```

mysql中的表模式

empid INT(11)

状态 varchar(10)

我无法弄清楚为什么状态没有在 mysql 表中更新。是数据类型不匹配，还是值未正确绑定到 sqlquery？
有什么线索吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:02:05.223

您可以在这里找到：[使用c从单板计算机写入mysql数据库](https://stackoverflow.com/questions/11826073/writing-into-mysql-database-from-a-single-board-computer-using-c)的完整示例，了解如何使用`MYSQL C API`执行查询，如果仍有问题，请发布整个代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:52:06.730

您为什么要尝试使用“where empID =？”。如果您希望它为每个员工运行，只需省略 where 子句。如果是针对特定员工，那么他的 id 应该在那里。

可能还有更多问题，但这是我发现的第一个问题。

您可以通过尝试在 mysql 命令行提示符下执行相同的查询来验证。

编辑：我也没有看到任何正在建立的数据库连接以及与之相关的任何信息。就像是

```
MYSQL *conn = mysql_init(NULL);

*conn = mysql_real_connect(*conn, DB_HOST, DB_USER, DB_PASS, DB_NAME, 0, NULL, flags);

if (*conn != NULL)
{
    printf("Connection Successfull\n");
    status = 0;
} 
```

# android - 通过外部广播接收器重新启动应用程序

> ID：12287814
> 
> 赞同：1
> 
> 时间：2012-09-05T18:44:08.290
> 
> 标签：android, broadcastreceiver

我已经实现了一个应用程序，它基本上是一个自定义应用程序商店，用于更新和启动一系列相关应用程序。它还需要自我更新，这可以工作，但在安装过程中应用程序会在没有警告的情况下被终止。在这种情况下，我想自动重新启动应用程序，以便用户可以在更新后立即继续使用它。

所以我制作了一个单独的应用程序，其中只包含一个广播接收器，它监听第一个应用程序包名称的包事件并启动一个新活动。**该接收器永远不会被调用**：

```
<application android:icon="@drawable/ic_launcher"
android:label="@string/app_name">

<receiver android:name=".AppUpdateReceiver">
  <intent-filter>
    <action android:name="android.intent.action.PACKAGE_REPLACED"/>
    <action android:name="android.intent.action.PACKAGE_ADDED"/>
    <action android:name="android.intent.action.PACKAGE_INSTALL"/>
    <data android:scheme="package" />
  </intent-filter>
</receiver> 
```

在寻找类似的实现时，我看到了直接矛盾的信息，即只有接收器的应用程序是否会执行，以及如果接收器的应用程序尚未运行，是否会调用接收器。我什至遇到过仅包含接收器的应用程序[示例代码，其清单与我自己的非常相似。](https://github.com/commonsguy/cw-advandroid/tree/master/SystemEvents/OnWiFiChange/)那么我在这个应用程序中需要什么来确保在安装另一个包时调用接收器？

如果有更好的解决方案，我很乐意听到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:02:10.817

根据 Android 的版本，您可能需要启动应用程序组件才能`BroadcastReceiver`注册。我的意思是需要有一个`Activity`必须由用户手动启动的启动器。

从 Honeycomb（我认为）开始，除非应用程序以某种方式手动启动，否则不可能让应用程序组件“活动”。这背后的原因是在最终用户不知情的情况下执行不安全代码的可能性。

我怀疑这就是你正在经历的。`Activity`要对其进行测试，请在其中包含的应用程序中添加一个简单的“Hello World” `BroadcastReceiver`。启动`Activity`然后检查是否`BroadcastReceiver`在您的其他软件包更新后调用 then。

# .htaccess - 通过虚拟子域重定向 REQUEST_URI

> ID：12287823
> 
> 赞同：1
> 
> 时间：2012-09-05T18:44:48.793
> 
> 标签：.htaccess, mod-rewrite

我已经在一个网站上工作了一段时间，但当涉及到 url 重定向时，我陷入了困境。我成功地为漂亮的个人资料页面创建了虚拟子域，但我对其余参数有疑问。

我想做的是，当有人在地址行键入“username.mysite.net/about”时，他/她应该被重定向到“profile.php?u=username&t=about”。目前，尝试访问“username.mysite.net”的人会成功重定向到“profile.php?u=username”。但是当我尝试像“username.mysite.net/about”一样传递 REQUEST_URI 时，它会给出 404 错误。

下面我复制了我的 htaccess 文件的相关部分。

```
RewriteCond %{HTTP_HOST} !^www.mysite.net
RewriteCond %{HTTP_HOST} ^([^.]+).mysite.net
RewriteRule ^$ /profile.php?u=%1%{REQUEST_URI} [L] 
```

我真的很感激一些帮助。谢谢你已经...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:18:35.360

稍作调整应该可以使这项工作：

```
RewriteCond %{HTTP_HOST} !^www.mysite.net
RewriteCond %{HTTP_HOST} ^([^.]+).mysite.net
RewriteRule ^(.*)$ /profile.php?u=%1&t=$1 [L] 
```

# python - 使用正则表达式过滤字符串中的值

> ID：12287830
> 
> 赞同：-2
> 
> 时间：2012-09-05T18:45:08.000
> 
> 标签：python, regex

我正在尝试使用正则表达式从字符串中过滤值，**例如**`<a href=""/>`从标签中过滤掉 URL 。

```
<a href="http://www.example.com"> 
```

我查看了[re](http://docs.python.org/library/re.html)库，应该匹配字符串的正则表达式应该是

```
r'<a href="(.*)">' 
```

现在将此值保存到变量中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:50:17.963

您不应该使用正则表达式解析 html，但既然您说这只是一个示例……
如果您希望总能找到匹配项：

```
try:
    foo = re.search(r'<a href="(.*)">', text).group(1)
except AttributeError:
    foo = None 
```

如果你不知道它是否匹配：

```
match = re.search(r'<a href="(.*)">', text)
if match:
    foo = match.group(1)
else:
    foo = None 
```

# database - 在 informatica 中更改目标表中的日期格式

> ID：12287831
> 
> 赞同：0
> 
> 时间：2012-09-05T18:45:10.340
> 
> 标签：database, oracle, informatica

在 informatica 中，我以 dd-mm-yyyy 和 dd/mm/yyyy 格式从平面文件接收日期，我需要使用任何表达式将所有日期转换为一种格式，即 dd-mm-yyyy 并推入目标，所以没有行得到拒绝。如何处理他们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:37:28.307

如果您将数据处理为“日期”数据类型，则在拒绝方面应该没有问题。

关于处理特定日期格式字符串，您可以查看集成服务级别的属性，在那里您可以控制日期格式（默认）。

# c# - KeyDown的问题，不起作用

> ID：12287834
> 
> 赞同：0
> 
> 时间：2012-09-05T18:45:17.040
> 
> 标签：c#, keypress, keydown, keyup

> **可能重复：**
> [在winforms中实现键盘快捷键的最佳方法？](https://stackoverflow.com/questions/400113/best-way-to-implement-keyboard-shortcuts-in-winforms)

我对 KeyDown 或 KeyPress 或 KeyUp 有疑问。我为表单 ( ) 创建了一个新的 KeyDown `private void Form1_KeyDown(object sender, KeyEventArgs e)`，我在其中插入了以下代码：

```
if (e.KeyCode == Keys.A && e.Modifiers == Keys.Control)
                MessageBox.Show("yes"); 
```

如果您按下 Ctrl + A 将显示一个带有 Yes 消息的 MessageBox。

`Windows form application`问题是这样的：如果我创建一个新项目（我不知道在这种情况下有什么问题。

也许是因为图书馆：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Web.Script.Serialization;
using System.Windows.Forms;
using System.IO;
using System.Threading;
using System.Runtime.InteropServices;
using System.Media;
using System.Diagnostics;
using Microsoft.Win32;
using System.Net.Mail;
using System.Net; 
```

或者我在 Program.cs 中添加的代码，让人们只启动一次应用程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Diagnostics;
using System.Threading;

namespace Programari
{
    static class Program
    {
        [System.Runtime.InteropServices.DllImport("user32.dll")]
        [return: System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.Bool)]
        static extern bool SetForegroundWindow(IntPtr hWnd);
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            bool createdNew = true;
            using (Mutex mutex = new Mutex(true, "MyApplicationName", out createdNew))
            {
                if (createdNew)
                {
                    Application.EnableVisualStyles();
                    Application.SetCompatibleTextRenderingDefault(false);
                    Application.Run(new Form1());
                }
                else
                {
                    Process current = Process.GetCurrentProcess();

                    if(Settings1.Default.rosaueng == 0)
                        MessageBox.Show("smartAppointment este deja deschis, ii gasesti iconita in System Icons !","EROARE DESCHIDERE APLICATIE");
                    else
                        MessageBox.Show("smartAppointment is already open, you can find him at System Icons !", "ERROR OPEN APPLICATION");

                    foreach (Process process in Process.GetProcessesByName(current.ProcessName))
                    {
                        if (process.Id != current.Id)
                        {
                            SetForegroundWindow(process.MainWindowHandle);
                            break;
                        }
                    }
                }
            }
        }
    }
} 
```

如果你知道，请告诉我。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:50:19.117

如果您的代码与上面写的完全一样，那么问题是您在处理程序中键入事件参数，`EventArgs`而不是更具体的`KeyEventArgs`. `EventArgs`没有`KeyCode`财产。同样，如果您在上面粘贴的是您所拥有的，那么您的问题很可能是您无法编译，这就是原因。

**更新**

以下是处理的正确方法签名的样子`KeyDown`：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
  // Your code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:03:00.667

我尝试了 Hans Passant 告诉我的方法，并且效果很好。

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
        {
            if (keyData == (Keys.Control | Keys.N))
            {
                //button5_Click(this, new EventArgs());
                MessageBox.Show("da");
                return true;
            }
            return base.ProcessCmdKey(ref msg, keyData);
        } 
```

但是当我按下 Ctrl+N 和代码时，我尝试运行 button5 `button5_Click(this, new EventArgs());`，但不起作用。如何调用 button5_Click 函数？

# jquery - Sinatra 应用程序用请求轰炸服务器

> ID：12287841
> 
> 赞同：0
> 
> 时间：2012-09-05T18:45:51.987
> 
> 标签：jquery, ruby, sinatra

我正在尝试按照[screencast.org](http://screencasts.org/episodes/ajax-website-with-sinatra-jquery)截屏视频的方式编写一个小型 sinatra 应用程序。我想将 jQuery 与 sinatra 一起用于 ajax。

我一开始，我的应用程序就会向服务器发出大量请求。Firebug 显示请求装载速度高达 2MB/秒。

这些是我的内容`layout.erb`。

```
<!doctype html>
<html>
<head>
<title>Is it My Birthday</title>

<script src="jquery.js"></script>
<script>
function getUpdate()
{
  setTimeout(getUpdate, 1000);
  $("body").load("/");
}
</script>
</head>

<body>
<%= yield %>

<script>
$(getUpdate);
</script>
</body>
</html> 
```

它不是每秒运行一次，而是无限运行。我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:55:37.717

`setTimeout()`在超时和调用之前需要等待的毫秒数`getUpdate()`，所以它等待一秒钟然后发送另一个`load`请求。最重要的是，您正在加载页面，然后在页面加载时，告诉它再次加载，并重复执行此操作。

尝试将您`$(getUpdate);`的标签移到 HTML 的底部`<script>`，或者在页面完成加载时触发的页面事件处理程序中。

* * *

编辑：

> 我希望它每 1 秒加载一次。

不幸的是，这不是你告诉它要做的事情：

```
$(getUpdate);
function getUpdate()
{
  $("body").load("/"); 
```

这段代码告诉浏览器在解析 JavaScript`getUpdate`时立即运行，它确实如此。`$(getUpdate);`然后它被告知要做的第一件事是`$("body").load("/");`重新加载页面，导致浏览器重新解释 JavaScript，它看到`$(getUpdate);`并立即重新加载。

你`setTimeout(getUpdate, 1000);`永远不会被处决。

更改顺序：

```
<script>
function getUpdate()
{
  setTimeout(getUpdate, 1000);
  $("body").load("/");
}
</script>

...
bunches of HTML
...

<script>
  $(getUpdate);
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T05:29:13.553

> 我希望它每 1 秒加载一次。

以下作品，无论是在 中`<head>`还是在结尾`<body>`，都无关紧要。

```
<script>
function reload() {
  $("body").load("/");
}
setTimeout(reload, 1000);
</script> 
```

[Tin Man](https://stackoverflow.com/a/12287966/231788)所做的分析是正确的，但分辨率是错误的......考虑这个函数：

```
function reload() {
  setTimeout(reload, 1000);
  $("body").load("/");
} 
```

当它运行时，`setTimeout`调用将函数设置为在一秒钟后**再次**调用，但它会立即返回，因此重新加载会立即发生。通过放置`setTimeout`函数，我们确保重新加载仅在一秒钟后发生。因为页面重新加载，代码再次执行，它工作了！

# iphone - 为 UITableViewCell 使用 CALayer

> ID：12287842
> 
> 赞同：0
> 
> 时间：2012-09-05T18:45:55.080
> 
> 标签：iphone, ios, uitableview, calayer, cell

我正在使用 CALayer 使我的 uitableviewcells 看起来更好看。我正在尝试以这种方式执行此操作：

```
CALayer *btnLayer = [cell layer];
[btnLayer setMasksToBounds:YES];
[btnLayer setCornerRadius:10.0f];

[btnLayer setBorderWidth:5.0f];
[btnLayer setBorderColor:[[UIColor blackColor] CGColor]];

CAGradientLayer *shineLayer = [CAGradientLayer layer];
shineLayer.frame = btnLayer.bounds;
shineLayer.colors = [NSArray arrayWithObjects:
                     (id)[UIColor colorWithWhite:1.0f alpha:0.4f].CGColor,
                     (id)[UIColor colorWithWhite:1.0f alpha:0.2f].CGColor,
                     (id)[UIColor colorWithWhite:0.75f alpha:0.2f].CGColor,
                     (id)[UIColor colorWithWhite:0.4f alpha:0.2f].CGColor,
                     (id)[UIColor colorWithWhite:0.3f alpha:0.4f].CGColor,
                     nil];
shineLayer.locations = [NSArray arrayWithObjects:
                        [NSNumber numberWithFloat:0.0f],
                        [NSNumber numberWithFloat:0.5f],
                        [NSNumber numberWithFloat:0.5f],
                        [NSNumber numberWithFloat:0.8f],
                        [NSNumber numberWithFloat:1.0f],
                        nil];
[btnLayer addSublayer:shineLayer]; 
```

我在 tableViewController 的 cellForRowAtIndexPath 方法中执行此操作。一切都很完美，单元格发光很好，但是当我自上而下拖动单元格几次时，顶部和底部单元格再次重绘。之后细胞变得更轻。

我使用动态单元格并从数组加载数据。给我一个建议，如何正确地做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:52:45.197

> 我在 cellForRowAtIndexPath 方法中做

但是由于它被多次调用（每次一个单元加载**或重新加载**），你正在为你的单元添加越来越多的光泽层。避免这种情况的一种方法是检查它是否是第一次使用单元格 - 在这种情况下，您必须创建它**并添加光泽**。因此，您可以将您拥有的整个代码包装到`if`检查可出队单元的同一分支中：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CellID"];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStylePlain reuseIdentifier:@"CellID"] autorelease];

    // ADD THE SHINE CODE HERE
}

// and **not** here!

return cell; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:42:56.917

您可以创建一个自定义单元子类并在 drawRect: 方法中添加效果，而不是使用通用 UITableViewCell。我在您的代码中看不到任何表明发光效果需要对单元格数据做出反应的任何内容，因此您最好在实例化单元格对象时创建效果。这应该比在 cellForRowAtIndexPath 中这样做更有效：

# html - jQuery 更改所选值不起作用（包括 JSFiddle）

> ID：12287846
> 
> 赞同：0
> 
> 时间：2012-09-05T18:46:04.347
> 
> 标签：html, mootools

[http://jsfiddle.net/vAa9G/42/](http://jsfiddle.net/vAa9G/42/)

我已经包含了这个小提琴，它有两个 Jquery 代码来更改选择值。

```
$("#selectbox").val("3");

$("select option[value='3']").attr("selected","selected"); 
```

两者都不起作用。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:55:32.293

示例 jsFiddle 使用的是 MooTools，而不是 jQuery。这是使用 jQuery 的更新版本。我刚刚更改了侧面菜单上的库选择。

[http://jsfiddle.net/vAa9G/49/](http://jsfiddle.net/vAa9G/49/)

在您的情况下，使用 MooTools 的正确语法是：

```
$('selectbox').set('value', '3'); 
```

此处还提供 jsFiddle：

[http://jsfiddle.net/vAa9G/52/](http://jsfiddle.net/vAa9G/52/)

# jquery - jQuery 按钮集图像

> ID：12287851
> 
> 赞同：0
> 
> 时间：2012-09-05T18:46:30.323
> 
> 标签：jquery, jquery-ui, radio-button

是否可以使用 jQuery buttonset() 将图像作为背景？

我尝试使用此标记，但设计搞砸了：

```
 <input type="radio" id="radio1" name="radio" />
    <label for="radio1" id="lbl1">
        <img src="images/red.png" />
    </label>
    <input type="radio" id="radio2" name="radio" checked="checked" />
    <label for="radio2">
        <img src="images/blue.png" />
    </label>
    <input type="radio" id="radio3" name="radio" />
    <label for="radio3">
        <img src="images/orange.png" />
    </label> 
```

![在此处输入图像描述](../Images/a44775c03256a80ed6bc7abd02d741ea.png)

我用谷歌搜索插件，但没有找到我需要的。

有人试过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:51:13.033

你可以检查这个小提琴：

[http://jsfiddle.net/c3KmQ/](http://jsfiddle.net/c3KmQ/)

它使用 jQueryUI 按钮集，可轻松定制：

```
$( "#radio" ).buttonset();
$($('.ui-button')[0]).addClass('bgcolor-red');
$($('.ui-button')[2]).addClass('bgcolor-black'); 
```

# javascript - 将图像对象插入 HTML

> ID：12287856
> 
> 赞同：19
> 
> 时间：2012-09-05T18:47:17.060
> 
> 标签：javascript, html, image

我只是想知道是否有更好的解决方案来做到这一点：

```
var img = new Image();
var div = document.getElementById('foo');

img.onload = function() {
  div.innerHTML += '<img src="'+img.src+'" />'; 
};

img.src = 'path/to/image.jpg'; 
```

所需方法：

```
console.log(img); // <img src="path/to/image.jpg" />
div.innerHTML += img; 
```

想法？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-05T18:49:11.800

我想你想要的是这样的：

```
var img = new Image();
var div = document.getElementById('foo');

img.onload = function() {
  div.appendChild(img);
};

img.src = 'path/to/image.jpg'; 
```

您已经有一个加载的图像对象。您应该直接将其附加到 DOM 中，而不是使用`innerHTML`.

此外，使用`+=`with`innerHTML`非常浪费，因为它会获取您已经拥有的所有对象，将它们转换为 HTML 文本，添加到该文本上，然后生成所有新的 DOM 对象 - 当它也生成新对象时丢失所有事件处理程序。将一个新的 DOM 对象添加到现有 DOM 对象的集合上会更有效。

此外，获取前面`document.getElementById()`没有 a 的 id 。`#`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T18:50:00.350

你可以这样使用：

```
var img = new Image();
var div = document.getElementById('theDiv');

img.onload = function() {
  div.appendChild(img);
};

img.src = 'path/to/image.jpg'; 
```

# android - “主键应该是唯一的 SQLite”错误

> ID：12287858
> 
> 赞同：0
> 
> 时间：2012-09-05T18:47:39.430
> 
> 标签：android, sqlite

这是我的主要`Activity`工作，我正在做我的所有工作。我在创建`SQLite`数据库时遇到错误。

```
private final String DB_NAME = "pocketCloudlets";
private final String TABLE_NAME_1 = "Members";
long count = 0;
static final String userTable="user";

static final String userName = "User";
static final String userID = "_id";
static final String age ="age";
static final String gender = "gender";
static final String password = "password";
static final String email = "email";

// Creating Table for User Record  

protected static final String table1=(" CREATE TABLE IF NOT EXISTS " 
    + userTable + " ("
    + userID + " INTEGER PRIMARY KEY NOT NULL, "
    + userName + " VARCHAR ,"
    + age + " VARCHAR ,"
    + gender + " VARCHAR )");

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // setContentView(R.layout.main);

        ArrayList<String> results = new ArrayList<String>();
        SQLiteDatabase sampleDB = null;

        try {      
            sampleDB = this.openOrCreateDatabase(DB_NAME, MODE_PRIVATE, null);
            sampleDB.execSQL(table1);

            sampleDB.execSQL("INSERT INTO " +
                userTable +
                " Values ('13','dawdaa','4','female');");

            Cursor c = sampleDB.rawQuery("SELECT _id,userName, age, gender FROM " +
                userTable + " ", null);
        } catch (Throwable t) {
            // completed by the editor of this question
            // the 'catch' part of the try-catch structure was NOT present
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:41:48.667

我想这在您第一次开始活动时有效。现在您已经插入了一行，`_id = 13`现在，每次您再次执行此操作时，您都会一遍又一遍地创建相同的 id。

由于您已指定`_id`为表的主键，因此这是不允许的 - 主键必须是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:32:45.067

尝试将 userID 列设置为 Integer Primary Key AutoIncrement。我也很确定你不能在 sqlite 中使用 VARCHAR - 你需要使用 TEXT 来代替。查看此链接以供参考：[http ://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T19:10:25.433

```
Cursor c = sampleDB.rawQuery("SELECT _id,userName, age, gender FROM " +
    userTable + " ", null); 
```

您在表中没有`userName`列，而是使用该`user`列创建了表。

改用：

```
Cursor c = sampleDB.rawQuery("SELECT _id, user, age, gender FROM " + userTable, null); 
```

# java - 使用 java XML 注释、JAXB 将多个元素绑定到以属性为键的映射

> ID：12287859
> 
> 赞同：3
> 
> 时间：2012-09-05T18:47:39.767
> 
> 标签：java, xml, map, jaxb, unmarshalling

我有一个 XML 源，我使用 JAXB 解组对象。XML 源：

```
<album>
    <name>something</name>
    <id>003030</id>
    <artist>someone</artist>
    ...
</album> 
```

Java 源代码就像（也带有所需的 getter/setter）：

```
@XmlRootElement(name="album")
class Album {
    String name;
    Long id;
    String artist;
    ...
} 
```

到现在为止还挺好。现在我在专辑列表中获得了一些不同大小的图片网址：

```
...
<image size="small">http://.../small.jpg</image>
<image size="medium">http://.../medium.jpg</image>
<image size="large">http://.../large.jpg</image>
... 
```

我想将它映射到类似这样的java Map：

```
Map<String,String> imageUrls; 
```

地图的键是大小属性，地图的值是元素值。如果可能的话，我应该如何注释这个变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T20:36:40.303

助手类 `Pair`

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Pair {

    @XmlAttribute
    private String key;

    @XmlValue
    private String value;

    public Pair() {
    }

    public Pair(String key, String value) {
        this.key = key;
        this.value = value;
    }  
//... getters, setters  
} 
```

对列表

```
@XmlAccessorType(XmlAccessType.FIELD)
public class PairList 
{
    private List<Pair> values = new ArrayList<Pair>();

    public PairList() {
    }  
//...  
} 
```

适配器

```
public class MapAdaptor extends XmlAdapter<PairList, Map<String, String>> 
{
    @Override
    public Map<String, String> unmarshal(PairList list) throws Exception 
    {
        Map<String, String> retVal = new HashMap<String, String>();
        for (Pair keyValue : list.getValues()) 
        {
            retVal.put(keyValue.getKey(), keyValue.getValue());
        }
        return retVal;
    }

    @Override
    public PairList marshal(Map<String, String> map) throws Exception 
    {
        PairList retVal = new PairList();
        for (String key : map.keySet()) 
        {
            retVal.getValues().add(new Pair(key, map.get(key)));
        }
        return retVal;
    }
} 
```

在您的实体中使用

```
@XmlJavaTypeAdapter(value = MapAdaptor.class)
private Map<String, String> imageUrls = new HashMap<String, String>(); 
```

**PS**
你可以不用类`PairList`使用`Pair[]`而不是`PairList`
适配器 来做到这一点

```
public class MapAdaptor extends XmlAdapter<Pair[], Map<String, String>> 
{
    @Override
    public Map<String, String> unmarshal(Pair[] list) throws Exception 
    {
        Map<String, String> retVal = new HashMap<String, String>();
        for (Pair keyValue : Arrays.asList(list)) 
        {
            retVal.put(keyValue.getKey(), keyValue.getValue());
        }
        return retVal;
    }

    @Override
    public Pair[] marshal(Map<String, String> map) throws Exception 
    {
        List<Pair> retVal = new ArrayList<Pair>();
        for (String key : map.keySet()) 
        {
            retVal.add(new Pair(key, map.get(key)));
        }
        return retVal.toArray(new Pair[]{});
    }
} 
```

但在这种情况下，您无法控制每一对的名称。它将是*项目*，你不能改变它

```
<item key="key2">valu2</item>
<item key="key1">valu1</item> 
```

**PS2**
如果你尝试使用`List<Pair>`而不是`PairList`，你会得到`Exception`

```
ERROR: java.util.List haven't no-arg constructor 
```

# c++ - iPhone 的 FTP 直播

> ID：12287861
> 
> 赞同：-4
> 
> 时间：2012-09-05T18:47:55.343
> 
> 标签：c++, iphone, ios, objective-c, c++11

我想准备一个 iPhone 应用程序。移动相机（假设为便携式网络摄像头）将进行实时流式传输，我需要使用 FTP 将实时视频流式传输到 iPhone（假设我们在该区域没有互联网）。

任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T19:10:54.707

这个问题很好，世界各地的程序员经常问。如何在没有互联网连接的情况下通过互联网流式传输。

公认的答案是使用燕子。燕子的空速速度在技术团体中是众所周知的。基本上，您所做的就是打包您的信息，将字节附加到燕子，然后将其发送出去。**当心**。你需要很多燕子。

当然，**带宽**取决于它是非洲燕子还是欧洲燕子，但我们不要去那里。

# android - Android 构建目标

> ID：12287862
> 
> 赞同：0
> 
> 时间：2012-09-05T18:48:01.583
> 
> 标签：android, android-emulator, android-build

我一直在编写我的第一个 android 应用程序，到目前为止，我只是针对可用的最高 android SDK - 4.1 构建。到目前为止，我只在运行 4.03 的物理设备上进行了测试，一切似乎都运行良好。

我希望我的最低 SDK 级别为 8 级（2.2），据我所知，我没有使用高于此级别的 API 中的任何内容。

但是，如果我针对 4.1 构建并在 2.2 模拟器上运行，它只会显示白屏并且没有崩溃（基于 OpenGL，因此出现问题）。相同的构建在 4.1 emu 和我的 4.03 设备上运行良好。

如果我使用完全相同的代码针对 2.2 构建，它可以在 2.2 emu 上运行。

我真的不知道是什么原因造成的，所以任何提示都会很棒。某些类是否会在较新的 API 中被替换？如果它们被完全删除，我会假设它根本不会针对新版本构建。

我应该将我的构建目标设置为等于我的最小值吗？我目前没有使用高于 2.2 的 API 中的任何内容，但我的印象是我应该针对可用的最新 SDK 进行构建。为最低版本构建是否有任何负面影响，例如它是否会影响菜单/对话框的外观？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:59:20.727

将此添加到您的`AndroidManifest.xml`

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:02:22.913

您应该针对您打算让您的应用程序支持的最低 SDK 版本进行构建（例如，如果您想支持没有最新智能手机或平板电脑的用户，则针对最新 SDK 版本进行构建不是一个好主意） .

一般来说，较新的 SDK 版本只包含额外的类和函数，但我不能 100% 确定是否有任何已删除的类。

# yui-datatable - 将 Plugin.DataTableDataSource 与 JSON 一起使用时，YUI3 数据表不呈现数据

> ID：12287865
> 
> 赞同：0
> 
> 时间：2012-09-05T18:48:10.803
> 
> 标签：yui-datatable

我一直在尝试通过 json 调用正确填充 yui3 数据表，但未成功。我很困惑，希望有人能告诉我我的方式的错误。无论我尝试了什么，我都会得到“没有数据显示”。

当我在页面加载期间运行 wireshark 时，我看到了从 ajax 调用返回的 json 数据。所以我认为我将数据源正确绑定到数据表。请注意，我感兴趣的数据记录嵌套在元数据中，看来我的 DataSourceJSONSchema 定义是正确的。

这是来自 ajax 调用的 http 响应。

```
YUI.Env.DataSource.callbacks.yui_3_6_0_1_1346868215546_114({
"recordsReturned":4,"startIndex":0,"dir":"asc","pageSize":10,
"records":[
  {"id":"48ee0540-ebd7-11e1-33e-c33ce39c9e", "email":"jim@example.com","name":"James"},
  {"id":"1447ea60-eca2-11e1-33e-f6c33ce39c9e", "email":"john@example.com","name":"John"},
  {"id":"48ff6a60-ebd7-11e1-a33e-f6c33ce39c9e", "email":"ryan@example.com","name":"Ryan"},
  {"id":"1a298060-f774-11e1-ad38-f6c33ce39c9e", "email":"vincent@example.com","name":"Vince"}]}) 
```

这是html页面。

```
<script type="text/javascript">
YUI({
lang : "en-US"
})
.use("datatable","datatype","datasource",function(Y) {
var ajaxData;
function ajaxSuccess(e) {
ajaxData = e.data;
}
}
function ajaxFailure(e) {
    Y.log("failure");
}

var myDataSource = new Y.DataSource.Get({
    source : "/actions/User.action?getAjaxUserList=&"
});

myDataSource.plug(Y.Plugin.DataSourceJSONSchema,{
    schema : {
        metaFields : {
            recordsReturned : "recordsReturned",
            startIndex : "startIndex",
            dir : "dir",
            pageSize : "pageSize"
        },
        resultsListLocator : "records",
        resultFields : [ {
        key : 'id'}, {
        key : 'email'},{
        key : 'name' }}});

    var table = new Y.DataTable({
    columns : [ {
    key : "id",
    label : "ID"
    }, {
    key : "name",
    label : "Name"}, {
    key : "email",
    label : "Email"} ],
    caption : "My first DataTable!",
    summary : "Example DataTable showing basic instantiation configuration"
                                    });
    table.plug(Y.Plugin.DataTableDataSource, {datasource : myDataSource});

    table.render('#dynamicdata');
    table.datasource.load({request : encodeURIComponent('fred=steve')});
                        });
    </script>

    <div id="dynamicdata"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:20:28.273

我注意到您在此处提供的代码有几个语法错误：例如，函数（Y）回调关闭得太快。

I think your error is due to the fact that you set in the schema of your Datasource the property "resultsListLocator" instead of "resultListLocator".

# asp.net - aspnet_regsql 为什么要创建幻表？是腐败吗？

> ID：12287867
> 
> 赞同：0
> 
> 时间：2012-09-05T18:48:25.747
> 
> 标签：asp.net, sql-server-2008, asp.net-membership

每当我运行 aspnet_regsql 以在新数据库中创建默认成员资格模式时，它都会从我以前的项目中添加一堆额外的表......与成员资格没有任何关系的表。ASP.NET 成员表工作正常，我只是不知道这些幻像表是从哪里来的。

存储过程是否已损坏？知道在哪里阅读它的内容吗？

非常感谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-05T18:52:03.607

您可以在服务器资源管理器中找到带有表的架构

使用 -C 参数调整连接

链接：http: [//msdn.microsoft.com/fr-fr/library/ms229862%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/ms229862%28v=vs.80%29.aspx)

# actionscript-3 - 在 ActionScript3 中获取属性链的现有类？

> ID：12287868
> 
> 赞同：0
> 
> 时间：2012-09-05T18:48:33.183
> 
> 标签：actionscript-3, flash, apache-flex, flex4

Flash 或 Flex 中是否存在从其属性链中的对象获取值的现有类？

例如，像这样：

```
private function labelFunction(item:Object, column:GridColumn):String {
     // where dataField equals "fields.status.name"
     var value:String = PropertyChain.getValue(field, column.dataField);
     return value;
} 
```

~~~~**更新**~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~
我在 Binding 类中也发现了这个私有方法，它可能可以在自定义类中使用：

```
/**
 *  @private
 */
private static function getFirstWord(destStr:String):String
{
    // indexPeriod and indexBracket will be equal only if they
    // both are -1.
    var indexPeriod:int = destStr.indexOf(".");
    var indexBracket:int = destStr.indexOf("[");
    if (indexPeriod == indexBracket)
        return destStr;

    // Get the characters leading up to the first period or
    // bracket.
    var minIndex:int = Math.min(indexPeriod, indexBracket);
    if (minIndex == -1)
        minIndex = Math.max(indexPeriod, indexBracket);

    return destStr.substr(0, minIndex);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:57:43.327

我认为没有现有的功能。但它很容易构建，并且不必局限于通用源，因为*任何*`Object`对象的任何成员都可以使用方括号表示法按名称检索。这个简单的版本不做任何验证：

 *```
public static function getByName(root:*, member:String):* {
    var memlist:Array = member.split('.');
    var temp:* = root;
    for(var i:uint = 0; i < memlist.length; i++)
        temp = temp[memlist[i]];
    return temp;
}

// And you can use this even on strongly-typed values, such as a MovieClip:
trace("stageWidth =", SomeUtil.getByName(mc, "stage.stageWidth")); 
```*

# ruby-on-rails - Ruby on Rails 中的多对多多态关联

> ID：12287869
> 
> 赞同：4
> 
> 时间：2012-09-05T18:48:38.930
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-3.2, database-schema

A `Video`, a`Song`和 an`Article`可以有很多`Tags`。而且每一个`Tag`也可以有很多`Video, Songs or Articles`。所以我有5个模型：`Video, Song, Article, Tag and Taggings`.

以下是这些模型：

```
class Video < ActiveRecord::Base
  has_many :tags, :through => :taggings
end

class Song < ActiveRecord::Base
  has_many :tags, :through => :taggings
end

class Article < ActiveRecord::Base
  has_many :tags, :through => :taggings
end

class Tag < ActiveRecord::Base
  has_many :articles
  has_many :videos
  has_many :songs
  belong_to :taggings, :polymorphic => true #is this correct?
end 
```

数据库定义`Taggings`

```
create_table "taggings", :force => true do |t|
  t.integer  "tag_id"
  t.string   "taggable_type"
  t.integer  "taggable_id"
  t.datetime "created_at",    :null => false
  t.datetime "updated_at",    :null => false
end 
```

`Taggings`模型：

```
class Taggings < ActiveRecord::Base
  belongs_to :tag                           #is this correct?
  belong_to :taggable, :polymorphic => true #is this correct?
end 
```

我担心的问题是，我对模型 ( `belongs_to`, `has_many`?) 有正确的定义吗？我的直觉告诉我，我错过了一些东西。我看过很多文章，我对它们感到很困惑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T19:29:10.617

您需要这些更改：

```
class Video < ActiveRecord::Base # or Song, or Article
  has_many :taggings, :as => :taggable  # add this      
  has_many :tags, :through => :taggings # ok

class Tag < ActiveRecord::Base
  # WRONG! Tag has no tagging_id
  # belong_to :taggings, :polymorphic => true

  has_many :taggings # make it this way

  # WRONG! Articles are available through taggings
  # has_many :articles

  # make it this way
  with_options :through => :taggings, :source => :taggable do |tag|
    tag.has_many :articles, :source_type => 'Article'
    # same for videos
    # and for songs
  end 
```

关于[`with_options`](http://api.rubyonrails.org/classes/Object.html#method-i-with_options).

你的课`Taggings`似乎没问题，**除了它的名字**。它必须是单数，`Tagging`：

```
class Tagging < ActiveRecord::Base # no 's'!
  belongs_to :tag                           
  belong_to :taggable, :polymorphic => true 
end 
```

# sql - ORACLE SQL ORA-22814 属性或元素值大于类型中指定的值

> ID：12287875
> 
> 赞同：2
> 
> 时间：2012-09-05T18:49:15.077
> 
> 标签：sql, oracle, function, user-defined-types

我正在调用一个返回一种表类型的函数。

我的函数接收一个 varchar 类型的变量。因为我返回了我创建的类型，所以我必须进行强制转换和多重设置......
**我的问题是，**我的多重集中的选择在函数之外执行没有问题，但是当我执行我的函数时，它给了我 ORA-22814 属性或元素值大于类型错误中指定的值。注意：我总是使用相同的变量值运行脚本

类型对象：

```
create or replace
TYPE Z_PEDIDO_SeB IS OBJECT(
Contrato varchar2(4000 BYTE),
DataObjectivo date,
DataObjectivoSpecified date,
Descricao varchar2(500 BYTE),
DireccaoRequerente varchar2(50 BYTE),
Empresa varchar2(50 BYTE),
Estado varchar2(50 BYTE),
GestorDDS varchar2(100 BYTE),
GestorEncomenda varchar2(30 BYTE),
Referencia varchar2(50 BYTE),
Link varchar2(500 BYTE),
ObsComite varchar2(4000 BYTE),
OutrosFornecedores varchar2(4000 BYTE),
OutrosSistAfectados varchar2(4000 BYTE),
PrincipalSistAfectado varchar2(4000 BYTE),
Prioridade varchar2(50 BYTE),
Rede varchar2(50 BYTE),
Requerente varchar2(100 BYTE),
TestesAceitacao varchar2(10 BYTE),
proj_id varchar2(50 BYTE)); 
```

类型表：

```
create or replace
TYPE Z_TABLE_PEDIDO_SeB IS TABLE OF Z_PEDIDO_SeB; 
```

功能：

```
create or replace
function Z_GetDadosCreateUpdate_SEB(
    proj_id in varchar2
)
return Z_TABLE_PEDIDO_SeB as
  t_dados   Z_TABLE_PEDIDO_SeB;
begin
  select 
  cast(
  multiset(
--STARTS HERE WHAT I RUN WITHOUT PROBLEM OUTSIDE THE FUNCTION
  select 
(SELECT line_text
from long_text 
where key2 = proj_id and key1 = 'contrato'
) Contrato,
NVL(SCHEDULE_FINISH,ACTUAL_FINISH) DataObjectivo,
NVL(SCHEDULE_FINISH,ACTUAL_FINISH) DataObjectivoSpecified,
pedidos.description as Descricao,
costum.direcaorequerente DireccaoRequerente,
costum.empresa Empresa,
estado.description Estado,
costum.gestordds GestorDDS,
(select recursos.description
from structure recursos,
resources,
workflow,
wf_team
where recursos.structure_code = resources.resource_code
and workflow.planning_code = projectos.structure_code
and wf_team.workflow_id = workflow.workflow_id
and wf_team.lifecycle_role_code = '868'
and wf_team.user_name = resources.LOGON_ID
and rownum = 1
) GestorEncomenda,
pedidos.structure_code ID,
(SELECT line_text
from long_text 
where key2 = proj_id and key1 = 'urlcadernoreq'
) Link,
(SELECT line_text
from long_text 
where key2 = proj_id and key1 = 'observacoescomite'
) ObsComite,
(SELECT line_text
from long_text 
where key2 = proj_id and key1 = 'outrosfornecedores'
) OutrosFornecedores,
(SELECT line_text
from long_text 
where key2 = proj_id and key1 = 'outrossistemas'
) OutrosSistAfectados,
(SELECT line_text
from long_text 
where key2 = proj_id and key1 = 'principalsistema'
) PrincipalSistAfectado,
costum.prioridade Prioridade,
(SELECT rede.description
from structure rede, planning_entity proj
where proj.code88 = rede.structure_code
and proj.planning_code = proj_id
) Rede,
costum.requerente Requerente,
(SELECT rede.description
from structure rede, planning_entity proj
where proj.code89 = rede.structure_code
and proj.planning_code = proj_id
) TestesAceitacao,
projectos. structure_code proj_id
from structure projectos,
planning_entity,
structure pedidos,
structure estado,
custom_data costum
where projectos.structure_code = planning_entity.planning_code
and planning_entity.planning_code = planning_entity.ppl_code
and pedidos.structure_code = planning_entity.code31
and estado.structure_code = planning_entity.code20
and projectos.structure_code = proj_id
and costum.planning_code = proj_id
-- HERE ENDS WHAT I RUN OUTSIDE THE FUNCTION WITHOUT A PROBLEM
    ) 
      as Z_TABLE_PEDIDO_SeB)
    into
      t_dados
    from 
      dual;

  return t_dados;

end Z_GetDadosCreateUpdate_SEB; 
```

我执行的是：

```
SELECT * FROM table (PVDEV.Z_GetDadosCreateUpdate_SEB('184765')); 
```

我得到的错误：

```
ORA-22814: valor do atributo ou elemento é superior ao especificado no tipo
ORA-06512: na "PVDEV.Z_GETDADOSCREATEUPDATE_SEB", linha 7
22814\. 00000 -  "attribute or element value is larger than specified in type"
*Cause:    Value provided for the object type attribute or collection element
       exceeded the size specified in the type declaration.
*Action:   Choose another value and retry the operation. 
```

**NOTE**: if i try 18476 instead of 184765 it runs with no problem. So? how did i put such restriction? Where?
**NOTE**: Now i'm showing the error, the real one, i'm really sorry for the mistake

I would really appreciate any answer as other's people work is waiting for my part :S. Anyway thanks in advance for any information.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T19:05:11.287

If I were you I would declared the function as the pipelined one and returned values by pipe row statement. And surely get rid of CAST/multiset. For loop statement is your choice. I'm sure it will work using my piece of advice.

# c# - 使用 C# 使用 Esri 的 ArcGis 将 UTM 转换为十进制度

> ID：12287877
> 
> 赞同：0
> 
> 时间：2012-09-05T18:49:18.633
> 
> 标签：c#, arcgis, esri

我需要将用户的 UTM 输入（WGS 1984）转换为十进制度，最好使用 ESRI 的 ArcGis。我已经获得了检索区域的代码（格式如 14N、22S 等）以及东移和北移因子。我从这里做什么？

编辑：我们期望输入为字符串，如：`14N 423113mE 4192417mN`。我可以很容易地从上面的字符串中提取数字（和一个字符）、、、`14`和。我只需要以某种方式将其转换为十进制度数。`N``423113``4192417`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:54:39.400

没有关于输入数据的具体信息。

以下是一些一般信息：

1.  最简单的方法是使用地理处理引擎重新投影整个要素类。将[C# 类用于](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#/Overview/004700003nzm000000/)数据管理工具箱中的项目工具。
2.  另一种方法是使用IGeometry 的[Project](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#//002m0000020r000000)方法，您只需要项目几个特征。

**编辑：**为您的输入数据使用解决方案 2。

一种更简单的方法是使用开源库 Proj.4 - [Proj4Net](http://proj4net.codeplex.com)的 .NET 端口。对于这样简单的任务，它比 ArcObjects 类更容易使用。

# php - 如何将两个不同 MySQL 表中的元素打印在一起

> ID：12287878
> 
> 赞同：1
> 
> 时间：2012-09-05T18:49:17.937
> 
> 标签：php, mysql

好的，所以我在 MySQL 中有这两个表。一种称为“历史”，一种称为“注释”。

“历史”表充满了可以重复的随机 YouTube 视频 ID。“注释”表包含每个视频 ID 的唯一副本以及该 ID 的描述。看起来像这样：

```
 History                            Annotated

 videoid                    videoid          description

 videoid_1                  videoid_1        descript_1
 videoid_1                  videoid_2        descript_2
 videoid_3                  videoid_3        descript_3
 videoid_2                  etc.             etc.
 videoid_3
 videoid_1
 etc. 
```

我正在尝试从历史记录表中打印出一组特定的视频 ID、重复项和所有内容。这很简单。问题是我需要在他们旁边打印他们的描述。

因此，我有一个要打印的历史视频 ID 数组，我正在尝试编写一个 MySQL 命令，该命令将在它们旁边打印相应的描述，但它无法正常工作。这是我到目前为止所拥有的：

```
$implodedIdVideo = the array of specific history video id's, imploded for MySQL

SELECT History.videoid, Annotated.description 
FROM History, Annotated 
WHERE History.videoid = Annotated.videoid 
AND History.videoid IN ($implodedIdVideo)
ORDER BY History.videoid DESC";

while($row = mysql_fetch_array($query)){
echo $row['videoid']. " : ". $row['description'];
echo "<br />";
} 
```

上面的 MySQL 命令有效，但它应该给我 10 个结果，但我得到了 50 个，我不知道为什么。我希望如果有人了解我正在尝试做的事情，他们将能够认识到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:57:25.927

那是因为您的 History 表中有重复项，因此服务器会为每个表返回一个描述。尝试在 ORDER 之前添加 GROUP BY History.videoid。

完整的查询应如下所示：

```
SELECT 
    History.videoid, Annotated.description 
FROM 
    History, Annotated 
WHERE 
    History.videoid = Annotated.videoid 
AND 
    History.videoid IN ($implodedIdVideo)
GROUP BY 
    History.videoid
ORDER BY 
    History.videoid DESC"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:53:52.397

鉴于您的`History`表格，您似乎有一些几乎重复的记录：`videoid_1`vs `Videoid_1`。注意`V`vs. `v`_

MySQL 的字符串比较默认情况下不区分大小写，因此当您在查询中进行联接时，该`History.Videoid_1`值将匹配`Annotated.videoid_1`AND `Annotaded.Videoid_1`，本质上是重复您的结果。

如果您确实打算使用这些混合大小写的标识符，则需要强制进行二进制比较，这使其区分大小写：

```
WHERE BINARY History.videoid = Annotated.videoid 
      ^^^^^^ 
```

或将您的两个表切换为区分大小写的排序规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:59:07.857

每个 videoid 都有多行，因为 History 中的每个 videoid 都有多行。但问题是，您的查询中似乎不需要历史记录中的任何信息。你可以只查询 Annotated 而不加入任何其他表，所以我不确定你为什么加入 History。它具有的唯一效果是您观察到的效果，即行是重复的。

# url - 爬取应用商店

> ID：12287881
> 
> 赞同：1
> 
> 时间：2012-09-05T18:49:29.180
> 
> 标签：url, store, rating, web-crawler

我将如何在 iTunes Preview 中为大量应用程序抓取信息？我正在尝试收集许多应用程序的评分数量，但考虑到我必须为每个应用程序使用一个随机应用程序 ID，我无法找到一种方法为每个应用程序输入正确的 URL。

# ruby - 使用 Homebrew 安装 Ruby

> ID：12287882
> 
> 赞同：44
> 
> 时间：2012-09-05T18:49:31.350
> 
> 标签：ruby, bash, terminal, homebrew

我用 Homebrew 安装了 Ruby：

```
brew install ruby 
```

在“注意事项”下，它说：

> 注意：默认情况下，gem 安装的二进制文件将放置在：
> /usr/local/Cellar/ruby/1.9.3-p194/bin
> 
> 您可能希望将其添加到您的 PATH 中。

这是什么意思，我怎样才能将它添加到我的“路径”中？假设它与一个 bash_profile 有关，但对此是新的。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-05T18:53:16.413

在`~/.bash_profile`添加以下行

```
export PATH=/usr/local/Cellar/ruby/1.9.3-p194/bin:$PATH 
```

完成后，关闭终端并重新打开它。你应该没事。

或者，您可以在每个打开的 shell 中执行以下操作，而不是关闭/重新打开：

```
source ~/.bash_profile 
```

**注意：** 我强烈建议通过[rvm](https://rvm.io/)或[rbenv](https://github.com/sstephenson/rbenv)安装 ruby​​，这样您就可以管理多个 ruby​​ 版本并使用 gemsets。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-14T00:22:11.227

**将此行添加到您的 .profile（或 .bash_profile、.bashrc、.zshrc 等）**：

```
export PATH=/usr/local/opt/ruby/bin:$PATH 
```

* * *

[这是凯尔答案](https://stackoverflow.com/a/12287926/1004889)的最新版本。截至 2014 年 5 月，`brew info ruby`打印：

默认情况下，gem 安装的可执行文件将被放置到：

```
 /usr/local/opt/ruby/bin 
```

您可能希望将其添加到您的 PATH 中。升级后可以运行

```
 gem pristine --all --only-executables 
```

...恢复已安装 gem 的 binstubs。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-01-19T15:12:27.790

安装红宝石：

```
brew install ruby 
```

我建议设置 $PATH、$GEM_PATH 和 $GEM_HOME。对于最新的 Ruby，它是：

```
export PATH=/usr/local/opt/ruby/bin:$PATH
export GEM_HOME=/usr/local/opt/ruby/lib/ruby/gems/2.6.0
export GEM_PATH=/usr/local/opt/ruby/lib/ruby/gems/2.6.0 
```

把它们放在类似`~/.bash_profile`.

然后验证：

```
type -a ruby
> ruby is /usr/local/opt/ruby/bin/ruby
> ...

ruby -v
> ruby 2.6.0p0 (2018-12-25 revision 66547) [x86_64-darwin18]

gem list
> *** LOCAL GEMS ***
> 
> did_you_mean (1.3.0)
> minitest (5.11.3)
> ... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-17T14:15:13.473

**快速解决：**

打开 /etc/paths。

```
Change the order of lines(highest priority on top).
/usr/local/bin
/usr/local/sbin
/usr/bin
/bin
/usr/sbin
/sbin 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-17T07:50:57.943

在 ruby​​ 2.6.x 中，`brew info ruby`说：

```
By default, binaries installed by gem will be placed into:
  /usr/local/lib/ruby/gems/2.6.0/bin

You may want to add this to your PATH.

ruby is keg-only, which means it was not symlinked into /usr/local,
because macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

If you need to have ruby first in your PATH run:
  echo 'export PATH="/usr/local/opt/ruby/bin:$PATH"' >> ~/.zshrc

For compilers to find ruby you may need to set:
  export LDFLAGS="-L/usr/local/opt/ruby/lib"
  export CPPFLAGS="-I/usr/local/opt/ruby/include" 
```

每当更新 ruby​​ 时，我都不想更新 XXshrc。我的 zshrc 是：

```
if [ -d "/usr/local/opt/ruby/bin" ]; then
        export PATH=/usr/local/opt/ruby/bin:$PATH
        export PATH=`gem environment gemdir`/bin:$PATH
fi 
```

# javascript - jQuery append() 不适用于某些元素

> ID：12287885
> 
> 赞同：0
> 
> 时间：2012-09-05T18:49:41.787
> 
> 标签：javascript, jquery, dom, append

我正在创建的网站是[http://www.industrialmerchants.com](http://www.industrialmerchants.com)

我的脚本的问题部分如下：

```
var collapseAll = document.createElement('img');
    collapseAll.src = collapseAllSrc;
    collapseAll.className = "collapseAll";
    collapseAll.style.cssFloat = "right";

    imUI(".menuBrowser .sideModuleHeader").append(collapseAll); 
```

（imUI 是我正在使用的 noConflict 变量。如果您想知道为什么我使用这种创建 DOM 元素的冗长方法，那是因为这是我让这段代码工作的最后一次努力。）

出于某种奇怪的原因，没有任何东西附加到选定的 div 上。div 肯定会被选中，因为 length 属性返回 1。为了让事情变得更加混乱，我还有另一个具有几乎相同 DOM 结构的“模块”。当我更改选择器以包含两个模块中的 .sideModuleHeader div 时，图像将插入第二个模块而不是第一个模块。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T19:07:37.767

它确实被添加了，但几行之后你有：

```
toggleButtons = imUI(".menuBrowser img").remove(".collapseAll")... 
```

然后立即将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:54:24.657

看起来您正在将核心 javascript 与 jquery 混合。尝试：

```
var collapseAll = $('<img />').attr('src',collapseAllSrc).addClass("collapseAll");
collapseAll.css({'float':'right'}) 
```

-edit：我在 attr 部分有一个“：”而不是“，”。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-05T18:54:02.910

尝试附加子项：

```
 imUI(".menuBrowser .sideModuleHeader").appendChild(collapseAll); 
```

# jquery - 如何在动态生成的内容上应用 jqueryUI 方法

> ID：12287886
> 
> 赞同：1
> 
> 时间：2012-09-05T18:49:50.880
> 
> 标签：jquery, jquery-ui, dynamically-generated

有没有人可以帮助我将 jqueryUI 方法应用于我的 webapp 中动态生成的内容。这里的内容是通过ajax调用动态生成的——：

```
<div class="streamOptionsContainer">
<button id="delete_post" title="Delete Post"></button>
</div> 
```

问题是当我使用 jqueryUI 方法时：-

```
$("button[id=delete_post]").button(); 
```

在动态生成的按钮上它不起作用，而上面提到的 jqueryUI 方法适用于所有静态内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:54:26.593

使用`.on()`方法。

```
$("button[id=delete_post]").on("load", function(){
    $(this).button();
}); 
```

由于您使用的是 ID，因此您可以这样做：

```
$("#delete_post").on("load", function(){
    $(this).button();
}); 
```

此外，如果您在 ajax 调用之后加载它，您可以使用其中的`success:`函数。

```
$.ajax({
    success: function(){
        $("#delete_post").button();
    }
}); 
```

如果错误，请更正我的语法。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T14:30:57.947

此问题可能是由引导程序引起的（如果您使用它）。Bootstrap`$.fn.button`使用自己的方法重写。但这是固定的。请查看 bootstrap.js 中的代码

```
var old = $.fn.button

$.fn.button = function (option) {
 return this.each(function () {
   var $this = $(this)
     , data = $this.data('button')
     , options = typeof option == 'object' && option
   if (!data) $this.data('button', (data = new Button(this, options)))
   if (option == 'toggle') data.toggle()
   else if (option) data.setState(option)
 })
}

...

$.fn.button.noConflict = function () {
  $.fn.button = old
  return this
} 
```

所以我们需要编写`$.fn.button.noConflict();`通过调用`.button()`元素来使 jQuery Ui Button 可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:54:33.447

尝试使用：

```
$('#delete_post').button(); 
```

# sockets - 通过浏览器渲染网页

> ID：12287900
> 
> 赞同：1
> 
> 时间：2012-09-05T18:50:23.200
> 
> 标签：sockets, browser, tcp

我在谷歌中输入了“通过浏览器渲染网页”，并获得了以下[链接](http://friendlybit.com/css/rendering-a-web-page-step-by-step/)。根据此描述，对与一个页面连接的每个资源的 HTTP 请求是通过单独的 TCP 套接字进行的。我一直以为只建立了一个 TCP 套接字，所有资源（图片、CSS 和 JS 文件）都是通过这个套接字发送的。如果不够清楚：您在浏览器的地址栏中键入 www.example.com。假设这个地址下的网页有N张图片和M个CSS和JS文件。浏览器打开了多少个 TCP 套接字？1+N+M？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:57:59.857

是的，HTTP 是一种无状态协议。页面所需的每个资源都由您的浏览器单独下载。即html、flash/silverlight等、图片、css、js等。为了优化加载时间，如果请求需要加载页面，建议将所有 css 和所有 js 合并到一个文件中以减少数量。

# windows - 将所有音频从 Windows 机器流式传输到 HTTP 浏览器客户端

> ID：12287902
> 
> 赞同：1
> 
> 时间：2012-09-05T18:50:29.850
> 
> 标签：windows, http, browser, audio-streaming

到目前为止，我能够使用 SoundWire (http://georgielabs.cjb.net/) 与 windows 机器 (服务器) 和 android 手机 (客户端) 做类似的事情。

现在，我想将所有播放音频从 Windows 机器流式传输到任何能够打开网页的设备（使用 flash/html5 音频标签）。我能找到的最接近的东西是 BroadWave (http://www.nch.com.au/streaming/index.html)，但我没有在我的 android 浏览器中工作。有任何想法吗？

# iphone - 在iOS模拟器中使用GPX文件不会停在最后一个坐标，一直循环

> ID：12287904
> 
> 赞同：7
> 
> 时间：2012-09-05T18:50:53.157
> 
> 标签：iphone, objective-c, ios, xcode, geolocation

我一直在阅读很多与 iOS 模拟器上的位置模拟有关的问题/答案，但没有涉及到我的具体问题。我有一个位置感知应用程序的原型，我将其配置为使用**GPX 文件**，如本答案所述：[如何解决 Xcode 4.1 (LION) GPS 错误？](https://stackoverflow.com/questions/6792061/how-to-solve-xcode-4-1-lion-gps-error/8035567#8035567)

它工作得很好，它提供了我需要的所有信息，但有一个例外。我期待一旦我们移动到 GPX 文件中定义的最后一个位置，位置更新就会停止。相反，当前位置不断更新循环。它返回到起始位置，并循环直到您停止它。

我尝试在我希望它停留的区域周围标记位置，但它忽略了它们。它可能与位置的最小变化有关，但它只是忽略它并继续循环。

创建了一个快速项目来说明问题并将其加载到**GitHub**：[https ://github.com/acolchado/LocationPrototype](https://github.com/acolchado/LocationPrototype)

**要重现，请按照下列步骤操作：**

1.  在 xcode 中加载项目，我使用 xcode 4.4.1 创建它。

2.  运行项目。

3.  在调试面板中，找到位置箭头。单击箭头并从上下文菜单中选择“SanBruno_To_Downtown_SF”。

4.  将模拟器带到前台并观察**无限循环**。

我到处寻找解决方案，但我找不到任何提到循环的地方。我将非常感谢任何人可以在这里提供的任何帮助。

谢谢，

奥古斯丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:22:51.947

我的作弊：

只需将最后一个航路点复制粘贴到您的 .gpx 文件中多次（足以让它卡在那里直到满足您的标准）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-18T17:13:16.723

您还可以在 gpx 文件中添加时间戳。拥有一个非常长的时间戳，让自己在最后一站逗留。

# c++ - 是否可以将卡方内核用于 OpenCV 中的 SVM？

> ID：12287906
> 
> 赞同：3
> 
> 时间：2012-09-05T18:51:37.640
> 
> 标签：c++, opencv, machine-learning, svm

我想为我正在编写的应用程序使用带有卡方内核的 SVM，但我如何应用它似乎并不明显。

我将内核定义为`K(x_i, x_j) = exp( -1/A * D(x_i, x_j))`，其中`A`是我可以选择的缩放参数，并且`D(x_i, x_j)`是它们之间的卡方距离。

如何才能做到这一点？它是计算机视觉文献中常用的内核，所以如果它不可能，那将是令人惊讶的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T13:26:01.813

OpenCV 3.0.0.0dev 中有一个实现。有关详细信息，请参阅链接。

[http://docs.opencv.org/master/modules/ml/doc/support_vector_machines.html](http://docs.opencv.org/master/modules/ml/doc/support_vector_machines.html)

新链接： [http ://docs.opencv.org/3.0-beta/modules/ml/doc/support_vector_machines.html](http://docs.opencv.org/3.0-beta/modules/ml/doc/support_vector_machines.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:25:19.313

我认为opencv中没有卡方或自定义内核的选项。

因此，一种选择是使用不同的 SVM 库。

[这](http://www.cs.berkeley.edu/~smaji/projects/fiksvm/)是对 LIBSVM 的修改，它支持卡方内核（不同的内核）和预计算内核。但它的目标是与 Matlab 一起使用。所以我不确定让它与 C++ 一起工作需要多少时间。

如果您想坚持使用 opencv svm，另一种选择可能是使用线性 SVM 并将您的数据[转换为近似卡方内核。](http://www.vlfeat.org/api/homkermap.html)

这个[答案](https://stackoverflow.com/questions/9752402/build-a-custom-svm-kernel-matrix-with-opencv)也可能会给你更多的提示。

# mysql - 使用 mysqldump 导入 RDS

> ID：12287907
> 
> 赞同：2
> 
> 时间：2012-09-05T18:51:40.910
> 
> 标签：mysql, amazon-web-services, amazon-rds

我可以在本地做一个大约 90kb 的 mysqldump 使用

```
/usr/local/mysql/bin/mysqldump -u root -p localDbName > /Users/Shared/localDbName-9-6-12.sql 
```

我正在尝试填充一个新设置的亚马逊 rds 数据库。当我进入

```
/usr/local/mysql/bin/mysqldump -u root -p localDbName | mysql --host=Endpoint --user=MasterUsername --password=amazondbpassword amazonDBName 
```

我明白了

```
-bash: mysql: command not found 
```

然后它提示我输入我自己的本地密码。输入我的mysqldump密码后，我得到

```
mysqldump: Got errno 32 on write 
```

对于我做错的事情，我真的很感激一些解释/帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:53:49.473

第二个错误`mysqldump: Got errno 32 on write`是由于第一个错误而出现的`-bash: mysql: command not found`。您确定 mysql 已正确安装在您的机器上，并且 bin 文件在您的`$PATH`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:23:56.603

您正在使用 mysqldump 的完整路径，但忘记在 mysql 上使用，您必须将命令更改为：

```
/usr/local/mysql/bin/mysqldump -u root -p localDbName | /usr/local/mysql/bin/mysql --host=Endpoint --user=MasterUsername --password=amazondbpassword amazonDBName 
```

祝你好运

# c# - 将图片从word保存到文件夹C#

> ID：12287908
> 
> 赞同：0
> 
> 时间：2012-09-05T18:51:40.953
> 
> 标签：c#, ms-word, image

所以我想出了如何使用这个[链接用word中的文字替换图片](https://stackoverflow.com/questions/12163835/c-sharp-word-automation-replace-picture-with-text)

但现在我需要将图片从 word 导出到文件夹。而且我猜每当我找到一个对象的图片（type s=Microsoft.Office.Interop.Word.WdInlineShapeType.wdInlineShapePicture）我应该用它做点什么......但我找不到选项：s。 saveAsPicture(@"C:\pic.jpg");

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T18:22:37.850

您的问题可能与以下内容重复：[extract image from word file](https://stackoverflow.com/questions/7937487/extract-image-from-word-file-c-sharp)

但是，根据[我之前](https://stackoverflow.com/a/12446930/700926)对您的问题的回答，即如何以编程方式将外部图像与 Word 中的内联形状进行比较（请参阅[比较 Word 文件和文件夹中的图片？](https://stackoverflow.com/questions/12352671/compare-picture-in-word-file-and-in-a-folder)） - 您可以进行一些简单的调整并使用几乎完全相同的将每个内联形状导出到文件夹而不是将形状与另一个图像进行比较的相同示例代码。

为了说明，我为您做了必要的调整，并提供了下面的源代码。同样，该应用程序是基于 .NET 4.5、Microsoft Office 对象库版本 15.0 和 Microsoft Word 对象库版本 15.0 的 C# 控制台应用程序。

和以前一样，我在源代码中包含了引用，这样您就可以看到我的解决方案基于哪些来源（并且这些来源得到了他们应得的荣誉；））

```
using System;
using System.Drawing;
using System.Threading;
using System.Windows.Forms;
using Application = Microsoft.Office.Interop.Word.Application;

namespace WordDocStats
{
    class Program
    {
        // General idea is based on: https://stackoverflow.com/a/7937590/700926
        static void Main()
        {
            // Open a doc file
            var wordApplication = new Application();
            var document = wordApplication.Documents.Open(@"C:\Users\Username\Documents\document.docx");

            // For each inline shape, export it to a file
            // By inspection you can see that the first inline shape have index 1 ( and not zero as one might expect )
            for (var i = 1; i <= wordApplication.ActiveDocument.InlineShapes.Count; i++)
            {
                // closure
                // http://confluence.jetbrains.net/display/ReSharper/Access+to+modified+closure
                var inlineShapeId = i; 

                // parameterized thread start
                // https://stackoverflow.com/a/1195915/700926
                var thread = new Thread(() => SaveInlineShapeToFile(inlineShapeId, wordApplication));

                // STA is needed in order to access the clipboard
                // https://stackoverflow.com/a/518724/700926
                thread.SetApartmentState(ApartmentState.STA);
                thread.Start();
                thread.Join();
            }

            // Close word
            wordApplication.Quit();
            Console.ReadLine();
        }

        // General idea is based on: https://stackoverflow.com/a/7937590/700926
        protected static void SaveInlineShapeToFile(int inlineShapeId, Application wordApplication)
        {
            // Get the shape, select, and copy it to the clipboard
            var inlineShape = wordApplication.ActiveDocument.InlineShapes[inlineShapeId];
            inlineShape.Select();
            wordApplication.Selection.Copy();

            // Check data is in the clipboard
            if (Clipboard.GetDataObject() != null)
            {
                var data = Clipboard.GetDataObject();

                // Check if the data conforms to a bitmap format
                if (data != null && data.GetDataPresent(DataFormats.Bitmap))
                {
                    // Fetch the image and convert it to a Bitmap
                    var image = (Image) data.GetData(DataFormats.Bitmap, true);
                    var currentBitmap = new Bitmap(image);

                    // Save the bitmap to a file
                    currentBitmap.Save(@"C:\Users\Username\Documents\" + String.Format("img_{0}.png", inlineShapeId));
                }
            }
        }
    }
} 
```

# c# - IO.File.Delete 不删除，但不出错

> ID：12287910
> 
> 赞同：0
> 
> 时间：2012-09-05T18:51:51.057
> 
> 标签：c#, asp.net

所以我有一些代码允许用户将某些 excel 电子表格导入数据库。现在，我将文件的副本保存到服务器，以便读取它：

```
fupMYfile.SaveAs(System.IO.Path.Combine(target, fupMYfile.FileName)); 
```

所以一切都很好，直到我在完成后尝试删除文件。我没有收到错误，并且我检查了代码是否被调用，但是，它不会删除文件并且不会给出错误。

```
System.IO.File.Delete(target + fupMYfile.FileName); 
```

我确实尝试确保 IIS_IUSRS 具有对该文件夹的完全访问权限，所以我知道这不是问题。

有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T18:55:44.913

您没有使用相同的文件名。您正在保存它`c:\somefolder\somefile.xls`，然后尝试将其删除`c:\somefoldersomefile.xls`。

用于`Path.Compbine`将文件夹 namd 和文件名放在一起：

```
System.IO.File.Delete(System.IO.Path.Combine(target, fupMYfile.FileName)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T08:57:02.820

`File.Delete`不给出任何异常，因此不会抛出错误，我们需要给出完整的绝对路径

```
File.Delete("C:\temp\tmpFile.txt"); 
```

并不是

```
File.Delete("tmpFile.txt"); 
```

# wpf - WPF 更新源触发器

> ID：12287913
> 
> 赞同：4
> 
> 时间：2012-09-05T18:51:58.060
> 
> 标签：wpf, data-binding

我有一个绑定到属性的 TextBox，并且我已将其`UpdateSourceTrigger`属性设置为`Explicit`以便我可以控制它何时验证。但是，一旦 UI 加载，控件就会验证。我从不从后面的代码中调用 UpdateSource 方法进行绑定。我不确定为什么会这样，但我不知道如何解决它。

`UpdateSourceTrigger="Explicit"`有什么不工作的原因吗？

请帮忙！谢谢！

编辑：最初 TextBox 是空的，在验证时会导致验证错误。我想避免这种情况。我只想在文本框失去焦点或单击验证按钮时显式验证。现在，如果我理解正确，我需要做的就是调用 TextBox_LostFocus 处理程序中 BindingExpression 的 UpdateSource 方法和按钮的 Click 事件处理程序。但是，我无法弄清楚如何避免初始验证，或者在我点击那个 TextBox 之前避免验证。我使用了一种解决方法（我不喜欢），但我更愿意找到一种更好的方法来做到这一点。

我正在使用 MVVM，是的。谢谢你的解释！这很有帮助。

进一步编辑：是的，我正在使用 IDataErrorInfo

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T20:10:37.113

这是正常的行为。

在您的 DependencyProperty 中指定的绑定表达式（即本例中的文本）将在元素初始化/加载时进行初始绑定（并从源更新目标...即 TextBox 的 Text 属性设置为中的值具有指定路径的源中的属性（请忽略暂时未指定路径的情况））。

`UpdateSourceTrigger="Explicit"`只是停止将目标中的值（即 TextBox 的 Text 属性）发送到源（例如 ViewModel/model）的自动更新....（不要将此选项与控制更新目标）。

在初始绑定期间，我想象绑定引擎看到“源”具有 IDataErrorInfo，因此它检查“项目”是否有效......如果不是......你会得到围绕你的 TextBox 的标准错误装饰器（由 ErrorTemplate 定义） ....使其与模型中数据的状态相匹配....这都是合乎逻辑的。

要在初始加载视图后阻止错误指示器过于激进地显示...您可以尝试此解决方法。

您可以更改您的 IDataErrorInfo 以便您可以控制它何时执行验证检查逻辑。

在视图加载后设置一个标志......它允许运行 IDataErrorInfo 验证代码......而不是之前。

从那时起加载后，对 UpdateSource 的调用将触发 Validator，它将捕获无效数据（因为您的 Loaded 标志将为真，并且您的验证逻辑将发挥作用）。

你可以使用这样的东西：

```
public class CustomerViewModel : IDataErrorInfo
{
    public bool DoValidation { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public string Error
    {
        get
        {
            if (DoValidation)
            {
                if (error on any properties)
                     return "error on these .....";
            }
            return null; // no errors
        }
    }

    public string this[string columnName]
    {
        get
        {
            if (!DoValidation)
            {
                return null; 
            }

            string result = null;
            if (columnName == "FirstName")
            {
                if (string.IsNullOrEmpty(FirstName))
                    result = "Please enter a First Name";
            }
            if (columnName == "LastName")
            {
                if (string.IsNullOrEmpty(LastName))
                    result = "Please enter a Last Name";
            }

            return result;
        }
    }
} 
```

发生 Loaded 事件后，在模型上设置 DoValidation 属性。

# php - MySQL联合/加入行与列

> ID：12287922
> 
> 赞同：0
> 
> 时间：2012-09-05T18:52:33.590
> 
> 标签：php, mysql

我有一个系统，其中有动态用户信息。基本上我有一个用户表，其中包含 id、名称、电子邮件和密码（所需的基础知识）。如果系统管理员想要添加一个用户字段，他们可以通过在 user_fields 表中添加一个新条目来实现，然后该字段的数据将存储在 user_fields_data 中。

用户：

```
id | name      | email         | password
=============================================
1  | bob smith | bob@gmail.com | asdfasdfasdf
... 
```

用户字段：

```
id | field
==========
1  | address_1
2  | address_2
... 
```

用户字段数据：

```
user_id | field_id | value
===============================
1       | 1        | 123 abc st
1       | 2        | suite 314 
```

基本上我的目标是执行一个查询，我可以在其中获取所有信息。

```
array(
    'name'      => 'bob',
    'email'     => 'bob@gmail.com',
    'password'  => 'asdfasdfasdf',
    'address_1' => '123 abc st',
    'address_2' => 'suite 314'
) 
```

我整天都将表格连接在一起，但是我从来没有以这种方式（行/列）加入一个表格。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T19:03:13.847

```
select 'name' as name, name as value from user where id = 1
union all
select 'email', email from user where id = 1
union all
select 'password', password from user where id = 1
union all
select uf.field, ufd.value
from user_fields_data ufd 
inner join user_fields uf on ufd.field_id = uf.id
where ufd.user_id = 1 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/f346f/11)

输出：

```
|      NAME |         VALUE |
-----------------------------
|      name |     bob smith |
|     email | bob@gmail.com |
|  password |  asdfasdfasdf |
| address_1 |    123 abc st |
| address_2 |     suite 314 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:00:20.073

如果您知道您将加入哪些自定义字段，您可以[使用元表中的多个条目执行类似此示例 Compex MySQL Left Join 的操作](https://stackoverflow.com/questions/3735176/compex-mysql-left-join-using-multiple-entries-from-meta-tables)

# google-maps-api-3 - Google Maps API V3 的光标选项文档

> ID：12287929
> 
> 赞同：1
> 
> 时间：2012-09-05T18:53:22.297
> 
> 标签：google-maps-api-3

谁能指导我详细了解 draggableCursor 对象的文档？我看到了很多简短而有趣的实现示例，例如 [How do i set a custom image for mouse cursor in a google map api v3 map](https://stackoverflow.com/questions/8652178/how-do-i-set-a-custom-image-for-the-mouse-cursor-in-a-google-map-api-v3-map) 或 [Google Maps API v3 draggableCursor 选项（例如位置）](https://stackoverflow.com/questions/10687213/google-maps-api-v3-draggablecursor-options-such-as-position) ，但我没有找到有关结构的信息对象的名称，或指向具有“自动、移动、十字准线”等选项的良好文档的链接。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:30:37.103

它与 css 光标值的格式相同：http: [//www.w3.org/TR/css3-ui/#cursor](http://www.w3.org/TR/css3-ui/#cursor)

然而，并非所有浏览器都支持所有值。

# .net - EF5.0 ForeignKey 和唯一约束

> ID：12287935
> 
> 赞同：0
> 
> 时间：2012-09-05T18:53:44.680
> 
> 标签：.net, entity-framework, ef-code-first, unique, foreign-key-relationship

我有两个具有以下结构的表

A{Impid(PK),name,code,etc.....) B(Id(PK),Impid(FK && Unique),一些列)..

基本上它是一对一的关系（表A列的扩展）。

我正在尝试在 EF 中使用。有人可以帮我设置模型配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:08:39.537

EF 不支持唯一约束，因此您必须更改数据库并将 FK 放在 B 中的 Id 上，或者您必须将其映射为一对多并仅在 B 上公开导航属性（因为在 A 上您需要 B 的集合）。

# python - Python：克莱因瓶的 3D 图

> ID：12287946
> 
> 赞同：2
> 
> 时间：2012-09-05T18:54:17.513
> 
> 标签：python, math, 3d, plot

所以我正在学习 python，我目前正在制作 3D 绘图。为了让事情变得有趣，我想制作一个[克莱因瓶](http://en.wikipedia.org/wiki/Klein_bottle)的情节，但不知何故它根本不起作用。我尝试了表面的两种参数化（一个在[Wolfram](http://mathworld.wolfram.com/KleinBottle.html)上，一个在随机网站上）都给出了一个圆环图。

所以我想知道我的代码是否错误。任何人都可以看看并告诉我我是否做得对（如果你碰巧知道克莱因瓶的参数化，那么这也是受欢迎的：P）

```
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
from matplotlib import cm
import numpy as np

def surf(u, v):
    X = (3+(1+np.sin(v)) + 2*(1 - np.cos(v)/2)*np.cos(u))*np.cos(v)
    Y = (4+2*(1 - np.cos(v)/2) * np.cos(u))*np.sin(v)
    Z = -2*(1-np.cos(v)/2)*np.sin(u)
    return X,Y,Z
ux, vx =  np.meshgrid(np.linspace(0, 2*np.pi, 20),
                      np.linspace(0, 2*np.pi, 20))
x,y,z = surf(ux, vx)

fig = plt.figure()
ax = fig.gca(projection="3d")

plot = ax.plot_surface(x,y,z, rstride=1, cstride=1, cmap=cm.jet,
                       linewidth=0, antialiased=False)

plt.show() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T19:41:09.120

您的 Python 代码具有正确的形式，但看起来参数化中可能存在一些错误。[这是由不同参数化](http://paulbourke.net/geometry/klein/)产生的克莱因瓶：

```
import mpl_toolkits.mplot3d.axes3d as axes3d
import matplotlib.pyplot as plt
import numpy as np

cos = np.cos
sin = np.sin
sqrt = np.sqrt
pi = np.pi

def surf(u, v):
    """
    http://paulbourke.net/geometry/klein/
    """
    half = (0 <= u) & (u < pi)
    r = 4*(1 - cos(u)/2)
    x = 6*cos(u)*(1 + sin(u)) + r*cos(v + pi)
    x[half] = (
        (6*cos(u)*(1 + sin(u)) + r*cos(u)*cos(v))[half])
    y = 16 * sin(u)
    y[half] = (16*sin(u) + r*sin(u)*cos(v))[half]
    z = r * sin(v)
    return x, y, z

u, v = np.linspace(0, 2*pi, 40), np.linspace(0, 2*pi, 40)
ux, vx =  np.meshgrid(u,v)
x, y, z = surf(ux, vx)

fig = plt.figure()
ax = fig.gca(projection = '3d')
plot = ax.plot_surface(x, y, z, rstride = 1, cstride = 1, cmap = plt.get_cmap('jet'),
                       linewidth = 0, antialiased = False)

plt.show() 
```

![在此处输入图像描述](../Images/37f3f18cbe4a9223b73c2355cfd997a2.png)

# android - Android - 如何设置在屏幕上居中的前景图像？

> ID：12287947
> 
> 赞同：0
> 
> 时间：2012-09-05T18:54:22.583
> 
> 标签：android, android-layout

我一直在谷歌搜索解决方案，我只找到使用`FrameLayout`或的解决方案`RelativeLayout`，并且我正在使用`LinearLayout`.

我要做的是在页面上加载某些内容之前在前景中显示“请稍候”的图像。而且我试图让该图像居中，而不是移动其他页面元素......所以我想我需要它在前台，对吗？

我怎么能这样做？现在我有这个：

```
<ImageView
    android:id="@+id/please_wait"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/please_wait"
    android:foregroundGravity="center|fill_horizontal" /> 
```

但它没有使图像居中，也没有将其置于前景中。

这是整个xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<include android:id="@+id/header"
         layout="@layout/header"
         android:layout_height="wrap_content"
         android:layout_width="fill_parent"/>    

<ImageView
        android:id="@+id/please_wait"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/please_wait"
        android:foregroundGravity="center|fill_horizontal"
         />

<TextView
    android:id="@+id/problem_loading_prompt"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Getting the business(es) you are planning. They are stored in a database that is constantly backed up so you do not lose your work."
    />          

    <ListView
    android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="17sp"> 
    </ListView>

        <Button
    android:id="@+id/add_problem_ok"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/light_best_blue" 
    android:text="Plan a New Business"
    android:layout_marginTop ="15dp"    
    />  
</LinearLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:17:00.020

我认为显示“请稍候”消息的最佳方式就是创建对话框。在这里： http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)你有很好的教程如何创建一个对话框。我认为您可以将 AlertDialog 与自定义视图或 ProgressDialog 一起使用，因为它具有美容微调器。

您从 java 代码而不是 xml 调用的对话框，因此 Dialog 不是您问题的严格答案，但我认为它接近您想要的。

如果您真的想在 xml 中做类似的事情，我认为您必须使用 FrameLayout，因为它旨在做类似的事情。或者你可以尝试使用RelativeLayout。

编辑：这是使用您的图像创建 AlertDialog 的示例代码：

```
Dialog dialog = new Dialog(context);
dialog.setContentView(R.layout.custom); 
dialog.show(); //this will show dialog 
dialog.dismiss(); //now dialog will disapear 
```

这里有一个名为 custom.xml 的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/please_wait"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/please_wait"/>

</RelativeLayout> 
```

当然你也可以使用不同的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T19:14:41.077

为什么不尝试这样的事情：

```
<RelativeLayout>

    <LinearLayout>
        <Your existing stuff />  
    </LinearLayout>

    <ImageView
        android:centerInParent="true" /> 

</RelativeLayout> 
```

通过这种方式，您可以保留到现在所做的整个布局，并且`RelativeLayout`可以很好地将您的图像放在所有内容之上。如果您不再需要`ImageView`，只需致电

```
imageView.setVisibility(View.INVISIBLE /*or View.GONE */); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T19:19:33.470

你试过这样吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:gravity="center" >                <--- like this

<ImageView
    android:id="@+id/please_wait"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:foregroundGravity="center|fill_horizontal"
    android:src="@drawable/arrow" />   

</LinearLayout> 
```

这个对我有用。

# hibernate - 休眠必要的 JAR

> ID：12287967
> 
> 赞同：1
> 
> 时间：2012-09-05T18:55:41.230
> 
> 标签：hibernate

休眠所需的必要罐子是什么？我正在使用 Eclipse Indigo 和 Tomcat7。我正在使用以下 JAR：

*   蚂蚁2.7.6
*   共同收藏 3.1
*   dom4j 1.6.1
*   休眠 3
*   java 辅助 3.4 ga
*   JTA 1.1
*   mysql-connector-java 5.1.6
*   slf4j -api 1.5.6
*   slf4j-简单 1.5.6

但我收到以下错误：

> 无法创建 sessionFactory object.java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory 2012 年 9 月 5 日上午 11:24:35 com.sun.faces.lifecycle.InvokeApplicationPhase 执行警告：#{register.action}： java.lang.ExceptionInInitializerError javax.faces.FacesException: #{register.action}: java.lang.ExceptionInInitializerError

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:57:17.873

我在您的列表中没有看到常见的日志记录。为什么不相信异常并继续添加 JAR 直到它们停止？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:58:38.183

缺少的类 'org.apache.commons.logging.LogFactory' 在 commons-logging.jar

请记住 hibernate 包中的 lib/required/ 目录包含 Hibernate 所需的所有 JAR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T08:38:59.743

这在[**Hibernate 文档**](http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html/ch01.html#hibernate-gsg-setup-releaseBundle)中有很好的解释：

> *   lib/required/ 目录包含 Hibernate 所需的所有 JAR。此目录中的所有 jar 文件也必须包含在
>     项目的类路径中。
>     
>     
> *   /lib/jpa/ 目录包含 hibernate-entitymanager jar 及其依赖项，超出了 lib/required/ 中的依赖项。这定义了
>     Hibernate 对 JPA 的支持。
>     
>     
> *   lib/envers 目录包含 hibernate-envers jar 及其依赖项，超出了 lib/required/ 中的依赖项
>     
>     
> *   lib/optional 目录包含 Hibernate 的可选特性所需的 jars。

# c# - 在 C# 中创建启用 RFID 的应用程序

> ID：12287976
> 
> 赞同：1
> 
> 时间：2012-09-05T18:56:27.200
> 
> 标签：c#

我有一个 ACR122U-A9 RFID 阅读器和一些 Mifare 1K 卡。我想用 C# 开发一个支持 RFID 的应用程序，但我不知道如何开始开发。首先，我想从标签中读取唯一 ID，它需要关联数据库中的成员。其次，我想从标签读取/写入一些数据。

我真的在这里囤货。我阅读了一些我尝试使用 SmartCard appi 的文档，但我找不到任何关于如何从标签中读取该唯一 ID 的信息。

问候，洛里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:57:59.797

您确实需要联系制造商并了解他们提供的 API 类型。

# security - 您可以多准确地定义触摸屏设备上手指的特征？

> ID：12287981
> 
> 赞同：2
> 
> 时间：2012-09-05T18:56:46.257
> 
> 标签：security

你能用当前的电话技术制造一个指纹阅读器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:09:52.040

不，如果可以的话，[这将没有任何意义](http://arstechnica.com/apple/2012/08/apple-wanted-authentecs-new-technology-asap-for-future-products/)

# magento - 使用 Magento 的 FedEx 设置不起作用

> ID：12287982
> 
> 赞同：4
> 
> 时间：2012-09-05T18:56:53.960
> 
> 标签：magento, fedex

我需要在 Magento 中设置 FedEx Shipping 方式。我有帐号、仪表编号、密钥和密码。我成功地将它们插入到相应的字段中，但是当我检查一个项目时，没有可用的 FedEx 运输选项。

我不明白。我的访问信息是错误的还是需要其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-14T15:49:09.057

最后我发现了我的错误。我的所有设置都是正确的，但没有设置产品重量。必须为 FedEx 分配产品重量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T08:59:51.397

启用联邦快递运输日志并检查您从联邦快递收到的回复。

你可能会遗漏一些参数。

有关联邦快递运输方式的设置，您可以参考[Fedex 设置](http://inchoo.net/magento/how-to-set-fedex-shipping-in-magento/)

# xml - Sharepoint XML owssvr.dll 查询=*?? 如何过滤？

> ID：12287983
> 
> 赞同：0
> 
> 时间：2012-09-05T18:57:02.833
> 
> 标签：xml, sharepoint

很简单。试图从 Sharepoint 站点取回 XML。获取空白页...

```
 http://servername/sites/DisasterRecovery/eventmgmt/DRR/_vti_bin/owssvr.dll?Cmd=Display&List={EEE19336-80D6-42A5-AAA1-F5AF12FA6275}&XMLDATA=TRUE 
```

好的，有点远

```
http://servername/sites/DisasterRecovery/eventmgmt/DRR/_vti_bin/owssvr.dll?Cmd=Display&List={EEE19336-80D6-42A5-AAA1-F5AF12FA6275}&Query=*&XMLDATA=TRUE 
```

返回整个页面的 xml 数据，这仍然需要一些时间。有没有办法传递过滤器字符串？也许使用**Query=***参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:06:07.310

您可以使用 FilterField1 和 FilterValue1 参数进行过滤。如果你需要多个过滤器，你只需要增加最后的数量。

例子：

```
http://servername/sites/DisasterRecovery/eventmgmt/DRR/_vti_bin/owssvr.dll?Cmd=Display&List={EEE19336-80D6-42A5-AAA1-F5AF12FA6275}&XMLDATA=TRUE&FilterField1=Title&FilterValue1=Test 
```

请记住，您必须使用内部字段名称。

# php - 将位置变量从 Javascript 传递给 PHP 函数

> ID：12287984
> 
> 赞同：1
> 
> 时间：2012-09-05T18:57:07.357
> 
> 标签：php, javascript, web

我正在使用 HTML5 地理定位和 Javascript 通过 Google 的 API 进行反向地理定位查找，以获取用户所在的城镇。这一切都很好，我将城市/城镇存储在一个名为`city.short_name`.

现在，我正在使用 wordpress，我正在尝试使用以下方法修改我网站的部分内容：

```
document.getElementById('contenttochange').innerHTML = <? echo do_shortcode('[<code here>]'); ?>; 
```

现在，如果内容一直都是一样的，即

`<? echo do_shortcode('[just_do_this]'); ?>`

没关系，但不幸的是，我需要将城镇添加为名为`search`. 例如

`<? echo do_shortcode('[just_do_this search="thetownofuser"]'); ?>`

因此，基本上，一旦我找到了城镇并将其作为变量，我是否有任何简单的方法可以使用该城镇作为参数来执行 PHP 短代码来替换我想要的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:06:52.303

PHP 是一个服务器端超文本预处理器（实际上是首字母缩写词“PHP”的根源）。你不能从 javascript 执行 PHP，因为 PHP 不是“活跃的”，一句话。

您将数据作为 .php 文件发送到运行 PHP 的服务器`request`，它通过 PHP 进行处理，然后输出 XHTML。所有这些`<??>`都在发送到客户端之前被渲染到它们的输出中。

客户端只处理 XHTML 和 Javascript（除其他外，但为了简单起见）

当然，您可以将变量回显到您的 javascript 中，因为它会呈现到发送给客户端的文档中。一旦到达客户端，PHP 将无法再使用。

要将变量发送到您的 PHP 脚本，您需要进行 AJAX 调用并将`location`变量作为请求的一部分发送。

Alternatively, you could create a PHP script that has it's header's content-type set to `text/javascript` that takes in the variable in `$_GET`, and include it like so:

```
<script type="text/javascript" src="setLocation.php?loc=<?= do_shortcode(/* Whatever */) ?>"> 
```

# asp.net-mvc - MVC 4 RenderSection（）不可视化定义的部分

> ID：12287985
> 
> 赞同：0
> 
> 时间：2012-09-05T18:57:08.480
> 
> 标签：asp.net-mvc, razor

我有一个基于 MVC 4 的项目。我正在尝试使用 @RenderSection("Footer", false) 函数来可视化我的页脚，但它没有显示出来。我将发布两个指向我的布局文件和视图文件的链接。

1.  版面链接： http: [//pastebin.com/78cQE5vD](http://pastebin.com/78cQE5vD)
2.  查看链接： http: [//pastebin.com/r5qewYi2](http://pastebin.com/r5qewYi2)

# gwt - 如何检查GWT中的连接是否丢失

> ID：12287988
> 
> 赞同：1
> 
> 时间：2012-09-05T18:57:31.277
> 
> 标签：gwt, gwt-rpc

如果在 RPC 调用期间与服务器的连接丢失，则会将 InvocationException 传递给 AsyncCallback#onFailure(...)。

但是，如果服务器上存在例如 NullPointerException，也会传递 InvocationException。

我如何区分这两种情况？我怎么知道这是一个连接问题，而不仅仅是服务器上的一些 RuntimeException？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T19:24:03.590

`StatusCodeException`对于任何与网络相关的错误，您都应该得到一个。如果浏览器无法连接到服务器，或者连接被中止，它将有一个状态码 0。

# django - 为什么我不应该在我的 Django 应用程序中过早地使用 Redis 进行优化？

> ID：12287989
> 
> 赞同：1
> 
> 时间：2012-09-05T18:57:32.323
> 
> 标签：django, optimization, redis

我正在开发一个 Django 应用程序，该应用程序在不同的视图中进行许多类似的查询，并且我计划使用 Redis 通过查询 Redis 而不是数据库来加快速度。

我正在阅读这个问题：[如何在 Django 中使用 redis？](https://stackoverflow.com/questions/3801379/how-can-i-use-redis-with-django/)开始，在最佳投票答案结束时，我看到了以下建议：“在需要速度之前不要开始使用 Redis 或任何其他缓存 - 不要过早优化。”，我想也许我是做错事，他说的“不要过早优化”是什么意思？过早优化会损害我的应用程序或开发过程吗？如果是这样，我应该寻找什么？我可以使用什么指标来决定何时是使用 Redis 或任何其他缓存的好时机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:08:07.653

> 他所说的“不要过早优化”是什么意思？

通过过早地优化你没有解决的问题。

> 我可以使用什么指标来决定何时是使用 Redis 或任何其他缓存的好时机？

当 UX 因加载时间而受到影响时。或者当用户体验受到任何影响时，可能是时候开始寻找了。

添加更多技术可能会使您的构建/部署过程在不需要时更加复杂。人们（包括我自己）总是在想我们的应用程序将支持多少百万访问者，以及我们将如何每天将数百万条条目写入数据库，如何有效地管理所有数据并为我们所有未来的幽灵用户保持快速查询。虽然考虑应用程序如何扩展和增长非常好，但肯定没有理由在必要之前对其进行扩展。使用 django 和带有经过深思熟虑的数据库模式的传统 RDBMS，正确的索引可能会支持您的应用程序比实际更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T19:03:21.197

过早的优化是针对开发过程的，在开发过程的早期就开始优化被认为是不好的做法；

> Donald Knuth 对优化做了以下两个陈述：
> 
> ```
> "We should forget about small efficiencies, say about 97% of the time: premature optimization is the root of all evil" 
> ```

源程序[优化](https://en.wikipedia.org/wiki/Program_optimization)参见“何时优化”部分

# django - Django Celery - 在小型应用程序的生产中使用 Django DB 代理？

> ID：12287990
> 
> 赞同：4
> 
> 时间：2012-09-05T18:57:39.420
> 
> 标签：django, django-celery

我以前见过这个问题，但还没有看到一个可靠的答案。

我在 Heroku 上有一个非常小的生产应用程序（200-500 个用户，很少访问网站）。

我有一些任务，但没有什么太疯狂的。我可以用 django_db 作为我的经纪人吗？

我只在 heroku 上运行一个具有 3 个并发进程的 celery worker（出于 heroku 内存的原因）。

> 使用多个工人（可能导致消息被多次执行）。

# asp.net - 在 IIS / ASP.NET 中配置 SSL

> ID：12287994
> 
> 赞同：1
> 
> 时间：2012-09-05T18:57:55.427
> 
> 标签：asp.net, ssl, iis-6, httpmodule

我会尽量简短。我的服务器上已经设置了证书。我只是对在我的网站中配置 ssl 的正确方法有疑问。

我需要保护根目录`login.aspx`和`admin`and`cart`目录。因此，在 IIS 中，您可以右键单击站点中的文件或目录，然后转到`Properties`->`File/Directory Security`选项卡 ->`Secure Communications`部分，然后单击`Edit`-> 检查`Require secure channel (SSL)`。这会导致通过`https`连接请求文件或目录内容，并且 asp.net 不会自动转换请求。

因此，我没有将所有链接和重定向更改为使用绝对 URL 来指定`http`or `https`，而是实现了一个[http 模块](http://www.codeproject.com/Articles/7206/Switching-Between-HTTP-and-HTTPS-Automatically-Ver)来自动在 和 之间切换`http`，`https`如此处所建议[的](https://stackoverflow.com/a/12222195/550309)。但是，我仍然收到错误：

> 该页面必须通过安全通道查看

因为它*最初*不是发送过来的`https`，而是在模块中转换的。如果我删除 IIS 中的设置，它可以正常工作；页面模块自动将连接切换到`https`. 我的问题是，在 IIS 中没有 SSL 要求设置并且只让我的 http 模块处理 http/https 切换可以吗？我觉得这样做会在这里失去一层安全感。有人对此有任何见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:17:23.377

我认为不启用该`Require secure channel`选项是可以接受的。我只在需要保护整个域（例如secure.domain.com）时才启用该选项。对于具有需要 HTTPS 的部分和我不需要的部分的站点，我使用您描述的切换器方法。当用户请求登录页面时，他们会通过 HTTPS 重定向到同一页面。所有 cookie 都设置为仅通过 SSL 传递：

```
<system.web>
        <httpCookies httpOnlyCookies="true" requireSSL="true" lockItem="true" />
</system.web> 
```

如果 cookie 不存在，则用户未登录，页面通过 HTTP 传递。

# javascript - JQuery：更改其他输入字段的值时更改值

> ID：12287996
> 
> 赞同：16
> 
> 时间：2012-09-05T18:57:58.470
> 
> 标签：javascript, jquery, html

每当更改另一个输入字段的值时，我想更改输入字段的值。

我已经尝试了一段时间，但我似乎无法让它工作

```
<input class="span4 input-big" id="dare_price" name="price" size="30" type="text" onChange="updatePrice()" />
<input class="span4 input-big" id="total_price_amount" readonly="readonly" value=""/>​

function updatePrice() {
    var price = $("#dare_price").val();
    var total = (price + 1) * 1.05;
    $("$total_price_amount").val(total);
}​ 
```

[这是小提琴。](http://jsfiddle.net/QWSQp/57/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T19:35:01.993

有几件事。

1.  首先，如果我是你，我会使用最新版本的 jQuery。我们现在是1.8。

2.  我还将使用“keyup”作为事件触发器以及“更改”。在我看来，它更有用。我也喜欢使用 jQuery 来绑定事件。见[http://api.jquery.com/on/](http://api.jquery.com/on/)

3.  您的代码中有一些错误。请注意该`$("$total_price_amount")` 部分引发了错误

4.  如果您只想显示一组小数点，请使用`.toFixed()`. 但请注意，这将返回一个字符串。

5.  来自文本框的输入值是 type `string`，因此要对它们进行数学计算，您需要将它们解析为 an`int`或 a`float`

# 这是我更新的 JSFiddle

[http://jsfiddle.net/DigitalBiscuits/QWSQp/71/](http://jsfiddle.net/DigitalBiscuits/QWSQp/71/)

# 而我使用的实际代码

```
$(document).ready(function()
{
    function updatePrice()
    {
        var price = parseFloat($("#dare_price").val());
        var total = (price + 1) * 1.05;
        var total = total.toFixed(2);
        $("#total_price_amount").val(total);
    }
    $(document).on("change, keyup", "#dare_price", updatePrice);
}); 
```

**请注意**，我`onChange="updatePrice()"`从 HTML 中删除了该部分，因为它不再需要。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T19:00:36.517

```
$("#dare_price").change(function(){
   var total = Number($this).val()) + ...;
   $('#total_price').val(total);
}); 
```

如果您以编程方式更改值，则需要通过您的方法对它们进行管道传输 -

```
function changePrice(value){
   $('#dare_price').val(value);
   $('#dare_price').trigger('change');
} 
```

更新了此事件驱动方法的[DEMO 。](http://jsfiddle.net/mrobin/QWSQp/64/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T19:00:55.347

只是看起来像一个错字

```
$("$total_price_amount").val(total); 
```

应该

```
$("#total_price_amount").val(total); 
```

使用 '#' 获取 id

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T19:01:21.477

只是为了安全起见，你应该`parseFloat()`你的价格。此外，在执行任何此操作之前，您应该确保它是一个偶数开头！否则你会得到**`NaN`**

```
function updatePrice() {
    var price = $("#dare_price").val();
    var total = (parseFloat(price) + 1) * 1.05;
    console.log(total);

    // Other big problem was the $total_price_amount typo that should of had # instead
    $("#total_price_amount").val(total);
}​ 
```

[jsFiddle 演示](http://jsfiddle.net/xjFG5/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T19:02:01.120

这是一个带有更改事件的示例。您可以使用 keydown 或 -up 之类的事件，只要适合您的目的。（live-method 用于在运行时创建的元素。）

```
 $('#first').live("change", (function(){       
            $('#idofinputfield').val('mynewvalue');         
    })) 
```

# c# - 允许数百个 TCP 客户端在一两秒内连接

> ID：12287998
> 
> 赞同：2
> 
> 时间：2012-09-05T18:58:02.770
> 
> 标签：c#, sockets, tcp

因此，使用我的软件，我在网络上发送了一个发现广播，每个接收到该广播的“客户端”都将通过 TCP 连接到我。就我所拥有的而言，它似乎可以“正常”工作，但我觉得必须有更好的方法。我看到的是我的软件的一些 TCP 连接被拒绝（我认为），因为我目前正在接受另一个套接字。因此，使用我当前的版本，我可以在大约 80% 的时间接受套接字。有时更多，但通常在 80% 左右。其余的都被我的软件拒绝了，我不知道为什么。对我来说，这是不可接受的，但我很讨厌提高这个数字。

这是我用来接受 TCP 客户端并通知我的其他类有关已连接的新套接字的类：

```
public class AsynchronousSocketListener
{
    // Thread signal.
    public ManualResetEvent allDone = new ManualResetEvent(false);
    public event EventHandler<ErtdRawDataArgs> ClientConnected;

    private string bindingIp;
    public string AddressBind 
    {
        get { return this.bindingIp; } 
        private set { this.bindingIp = value; } 
    }

    private int port;
    public int Port
    {
        get { return this.port; }
        private set { this.port = value; }
    }

    private Socket listener;

    public AsynchronousSocketListener(string bindingIp, int port) 
    {
        this.bindingIp = bindingIp;
        this.port = port;
    }

    protected void OnClientConnected(string data, IPEndPoint clientEP)
    {
        if (this.ClientConnected == null)
            return;

        Task.Factory.StartNew(() =>
        {
            //build args
            ErtdRawDataArgs args = new ErtdRawDataArgs(Encoding.Default.GetBytes(data));
            args.Source = string.Format("{0}:{1}", clientEP.Address.ToString(), clientEP.Port);
            this.ClientConnected(this, args);
        });
    }

    public void Close()
    {
        if (this.listener == null || !this.listener.Connected)
            return;

        this.listener.Shutdown(SocketShutdown.Both);
        this.listener.Close();
    }

    public void StartListening() 
    {
        Task.Factory.StartNew(() =>
        {
            // Data buffer for incoming data.
            byte[] bytes = new Byte[1024];

            // Establish the local endpoint for the socket.
            IPEndPoint localEndPoint = new IPEndPoint(IPAddress.Parse(this.bindingIp), this.port);

            // Create a TCP/IP socket.
            listener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

            // Bind the socket to the local endpoint and listen for incoming connections.
            try
            {
                listener.Bind(localEndPoint);
                int maxConnections = (int)SocketOptionName.MaxConnections;
                listener.Listen(maxConnections);

                while (true)
                {
                    // Set the event to nonsignaled state.
                    allDone.Reset();

                    // Start an asynchronous socket to listen for connections.
                    listener.BeginAccept(
                        new AsyncCallback(AcceptCallback),
                        listener);

                    // Wait until a connection is made before continuing.
                    allDone.WaitOne();
                }

            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }
        });
    }

    public void AcceptCallback(IAsyncResult ar) 
    {
        // Signal the main thread to continue.
        allDone.Set();

        // Get the socket that handles the client request.
        Socket listener = (Socket) ar.AsyncState;
        Socket handler = listener.EndAccept(ar);

        // Create the state object.
        StateObject state = new StateObject();
        state.workSocket = handler;
        handler.BeginReceive( state.buffer, 0, StateObject.BufferSize, 0,
            new AsyncCallback(ReadCallback), state);
    }

    public void ReadCallback(IAsyncResult ar) 
    {
        String content = String.Empty;

        // Retrieve the state object and the handler socket
        // from the asynchronous state object.
        StateObject state = (StateObject) ar.AsyncState;
        Socket handler = state.workSocket;

        // Read data from the client socket. 
        int bytesRead = handler.EndReceive(ar);

        if (bytesRead > 0) {
            // There  might be more data, so store the data received so far.
            state.sb.Append(Encoding.ASCII.GetString(
                state.buffer,0,bytesRead));

            // Check for end-of-file tag. If it is not there, read 
            // more data.
            content = state.sb.ToString();
            OnClientConnected(content, handler.RemoteEndPoint as IPEndPoint);

            //close socket
            handler.Shutdown(SocketShutdown.Both);
            handler.Close();
        }
    }
} 
```

有什么方法可以改进此代码，或者是否有一些完全不同的东西可以改善我同时接受 TCP 连接的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:08:01.847

~~好吧，您在接受连接和“建立”连接之间有一段时间，然后您才能接受另一个连接。使用等待句柄之类的东西可能相当慢。~~

重新阅读您的代码后，从概念上讲，您可以接受另一个连接的时间点是您调用`EndAccept`. 看来您是在调用之前设置事件，`EndAccept`这意味着`BeginAccept`可以在调用之前调用，并且可以在调用前`EndAccept`一个连接之前接受另一个连接`EndAccept`。我不知道这是否是一个问题——据我所知，这是合法的。但是，您可以简化代码以避免事件，并在当前接受期间简单地链接下一个 BeginAccept 并确保`EndAccept`在下一个之前调用`BeginAccept`

 ~~~~我所做的是从当前接受中链接下一个接受。~~ 例如：

```
listener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
listener.Bind(new IPEndPoint(IPAddress.Any, 62000));
listener.Listen(1000);
listener.BeginAccept(OnAccept, listener);

private void OnAccept(IAsyncResult ar)
{
    Socket listener = (Socket)ar.AsyncState;
    Socket socket = listener.EndAccept(ar);
    listener.BeginAccept(OnAccept, listener);
    socket.BeginReceive(new byte[10], 0, 10, 0, (arReceive) => socket.EndReceive(arReceive), null);
} 
```

当然，我在`BeginAcceptSocket`这里使用；但这个概念与`BeginAccept`...相同

This frees you from having to start a new `Task`, frees from creating wait handles which are about 50-times slower that `lock` because they are cross-process~~--which frees you from having a "huge" pause between accepts~~.~~