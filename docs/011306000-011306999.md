# StackOverflow 问答 11306000-11306999

# java - 如何在不使用ajax刷新页面的情况下将值从数据库显示到jsp

> ID：11306000
> 
> 赞同：5
> 
> 时间：2012-07-03T07:03:29.563
> 
> 标签：java, ajax, database, jsp, servlets

我是阿贾克斯的新生

**阿贾克斯**

```
function ajaxFunction() {
  if(xmlhttp) { 
   var txtname = document.getElementById("txtname");
    xmlhttp.open("POST","Namelist",true);

    xmlhttp.onreadystatechange  = handleServerResponse;
    xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xmlhttp.send("txtname=" + txtname.value); 
  }
}

function handleServerResponse() {
   if (xmlhttp.readyState == 4) {
     if(xmlhttp.status == 200) {
       document.getElementById("message").innerHTML=xmlhttp.responseText;
     }
     else {
        alert("Error during AJAX call. Please try again");
     }
   }
} 
```

**jsp**

```
<form name="fname" action="Namellist" method="post">

    Select Category :
    <select name="txtname" id="txtname">
     <option value="Hindu">Hindu</option>
     <option value="Muslim">Muslim</option>
     <option value="Christian">Christian</option>
    </select>
    <input type="button" value="Show" id="sh" onclick="ajaxFunction();">
    <div id="message">here i want to display name</div><div id="message1">here i want to display meaning</div>
    </form> 
```

**小服务程序**

```
String ct=null;  
ct=request.getParameter("txtname");
      Connection con=null;
      ResultSet rs=null;
      Statement st=null;
try{
con=Dbconnection.getConnection();
PreparedStatement ps=con.prepareStatement("select name meaning from (select * from namelist order by dbms_random.value)where rownum<=20 and category='+ct+'" );
rs=ps.executeQuery();

 out.println("name" + rs);
 **Here I have confusion,**

}
catch(Exception e)
{
    System.out.println(e);
} 
```

我如何将 servlet 值显示为 jsp。请帮我？或者请提供一些好的教程链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:57:07.000

您必须进行以下更改：- 在 Servlet 中：- 将响应内容类型设置为：-`response.setContentType("text/xml");`在 servlet 的顶部。通过设置它，我们可以发送 XML 格式的响应，并在 JSP 上检索它时，我们将根据 XML 的标记名称获取它。

在 servlet 中执行您想要的任何操作...保存 ex- 的值

```
String uname=";
     uname="hello"; //some operation
    //create one XML string
    String sendThis="<?xml version='1.0'?>"
            +"<Maintag>"
            +"<Subtag>"
            +"<unameVal>"+uname+"</unameVal>"     
            +"</Subtag>"
            +"</Maintag>"
  out.print(sendThis); 
```

现在我们将转到我们必须显示数据的 JSP 页面。

```
 function getXMLObject()  //XML OBJECT
        {
            var xmlHttp = false;
            try {
                xmlHttp = new ActiveXObject("Msxml2.XMLHTTP")  // For Old Microsoft Browsers
            }
            catch (e) {
                try {
                    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP")  // For Microsoft IE 6.0+
                }
                catch (e2) {
                    xmlHttp = false   // No Browser accepts the XMLHTTP Object then false
                }
            }
            if (!xmlHttp && typeof XMLHttpRequest != 'undefined') {
                xmlHttp = new XMLHttpRequest();        //For Mozilla, Opera Browsers
            }
            return xmlHttp;  // Mandatory Statement returning the ajax object created
        }
    var xmlhttp = new getXMLObject();   //xmlhttp holds the ajax object
        function ajaxFunction() {
            if(xmlhttp) {
                xmlhttp.open("GET","NameList",true); //NameList will be the servlet name
                xmlhttp.onreadystatechange  = handleServerResponse;

                xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xmlhttp.send(null);
            }
        }
        function handleServerResponse() {
            if (xmlhttp.readyState == 4) {
                if(xmlhttp.status == 200) {
                   getVal();
                }
                else {
                    alert("Error during AJAX call. Please try again");
                }
            }
        }
       function getVal()
        {
             var xmlResp=xmlhttp.responseText;
             try{

                if(xmlResp.search("Maintag")>0 )
                {
               var x=xmlhttp.responseXML.documentElement.getElementsByTagName("Subtag");
                    var xx=x[0].getElementsByTagName("unameVal"); 
                    var recievedUname=xx[0].firstChild.nodeValue;
                   document.getElementById("message").innerText=recievedUname;//here 
                } 
                }catch(err2){
                    alert("Error in getting data"+err2);
                }
        } 
```

到这里你就完成了。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T07:41:43.910

1.在servlet代码中

```
PrintWriter output = response.getWriter();  
String result = "value";  
writer.write(result);  
writer.close() 
```

2\. 为什么不用jquery？
您可以替换您的代码 -

```
$.post('url', function(data) {  
$('#message1').html(data);  
}); 
```

[查询帖子示例](http://viralpatel.net/blogs/ajax-post-method-example-using-javascript-jquery/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T07:45:02.227

可能摆脱困境但可能有用，而不是将所有 javascript 用于 Ajax 调用，而是使用一些 javascript 库，最好是 jQuery 来进行 Ajax 调用。

您使用的任何 javascript 库都将帮助您使代码简洁明了，还将帮助您保持跨浏览器的兼容性。

如果您打算自己编写所有 XHTTP 代码，您最终可能会花费大量时间来修复跨浏览器问题，并且您的代码将有很多 hack，而不是实际的业务逻辑。

此外，使用像 jQuery 这样的库也可以用更少的代码行来实现相同的效果。

希望有帮助。

# jquery - qtip 克隆功能和在内容中的按钮上应用事件

> ID：11306001
> 
> 赞同：0
> 
> 时间：2012-07-03T07:03:30.087
> 
> 标签：jquery, qtip

我在 QTIP 中创建了一个表单，并为所有 SVG 元素调用了 qtip 函数。因此，为了正确显示表单，我克隆了内容并且表单正确显示。现在在表单内部，我想要一个按钮来更改一些表单属性，所以我编写了一个函数来更改按钮的 onclick 方法中的表单属性。问题是按钮改变了表单的属性，但它没有改变。

我认为问题可能是因为我正在克隆内容，因此一旦克隆，属性就不会改变。我应该如何解决这个问题？

JSfiddle 链接以了解问题：- [jsfiddle 链接](http://jsfiddle.net/r9yfw/21) 您可以在此示例中看到我没有应用克隆并且所有按钮都可以工作...但是 qtip 在显示一两次后消失.....

如果我应用克隆，那么按钮将根本不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:11:25.160

内容部分类似于：

```
content: {
    text: $('#menu').clone()
}, 
```

并点击部分：

```
$(".menuitem").live('click', function(){
    alert($(this).text());
}); 
```

测试 - 它的工作原理。你也可以为 ''menuitem'' 想到 ''delagete''

# asp.net-mvc-3 - 在 ASP.Net MVC 中扩展 InputExtensions

> ID：11306005
> 
> 赞同：1
> 
> 时间：2012-07-03T07:03:44.353
> 
> 标签：asp.net-mvc-3, razor, extension-methods

我的目的是扩展方法之类的`@Html.TextBoxFor`方法的功能。我本质上想用一些额外的 HTML 包装产生的标记，其中包含一些逻辑。

现在在我的扩展方法中，我想调用`@Html.TextBoxFor`并包装它。我需要参考和使用什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:11:37.823

基本上是这样的

```
using System;
using System.Linq.Expressions;
using System.Web.Mvc;
using System.Web.Mvc.Html;

namespace Html
{
    public static class ExtendedInputExtensions
    {
        public static MvcHtmlString ExtendedTextBoxFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression)
        {
            var original = helper.TextBoxFor(expression);
            return original;
        }
    }
} 
```

# android - 标签栏android中的ProgressDialog

> ID：11306006
> 
> 赞同：0
> 
> 时间：2012-07-03T07:03:51.840
> 
> 标签：android, progressdialog, android-tabs

我正在尝试在android中制作一个标签栏应用程序，在谷歌搜索后我找到了一些教程并且我成功了。我想要 3 个选项卡，当我单击第一个选项卡时，将使用 asyntask 从服务器获取一些数据并在前端显示进度对话框，但进度对话框正在捕获整个屏幕（带有选项卡栏），因此我无法切换第二个或第三个选项卡。

```
Expected Output: Whenever i click on any tab a data will be taken from server in background, as i know data is loaded in background so for that time i want to switch 2nd tab or any other tab. 

package com.tabexample;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.Bundle;

import android.view.View;
import android.view.View.OnClickListener;

import android.view.WindowManager;
import android.widget.Button;

public class ArrowsActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.arrowspage);

        Button back = (Button) findViewById(R.id.BackButton2);

       back.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            ProgressDialog p = new ProgressDialog(getParent());
            p.setMessage("Loading");
            p.setCancelable(false);
            p.show();
            p.getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);

        }
    });

    }
}

package com.tabexample;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;

public class EditActivity extends ListActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, mListContent));   
        ListView lv = getListView();
        lv.setOnItemClickListener(new OnItemClickListener() 
        {
             public void onItemClick(AdapterView<?> parent, View view, int position, long id)
             {
                 startActivity(new Intent(EditActivity.this, OptionsActivity.class));
             }
        }); 

    }

    private static String[] mListContent={"Item 1", "Item 2", "Item 3"};
}

package com.tabexample;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;

public class OptionsActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.optionspage);

        Button back = (Button) findViewById(R.id.BackButton1);
        Button next = (Button) findViewById(R.id.NextButton1);

    }
}

package com.tabexample;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;

public class TabExmapleActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tablayout);
        TabHost tabHost = getTabHost();       

        tabHost.addTab(tabHost.newTabSpec("tab1")
              .setIndicator("OPT")
              .setContent(new Intent(this, ArrowsActivity.class)));

        tabHost.addTab(tabHost.newTabSpec("tab2")
              .setIndicator("EDIT")
              .setContent(new Intent(this, EditActivity.class)));

        tabHost.setCurrentTab(0);
    }
}

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout02" android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <TextView android:id="@+id/TextView02" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:text="Arrows Page">
    </TextView>
    <Button android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:id="@+id/BackButton2"
        android:text="Back" android:layout_below="@+id/TextView02">
    </Button>

<Button android:id="@+id/Button01" android:layout_below="@id/BackButton2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Indeterminate Dialog"></Button>
<Button android:id="@+id/Button02" android:layout_below="@id/Button01" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Select"></Button>
</RelativeLayout>

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout01" android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <TextView android:id="@+id/TextView01" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:text="Options Page">
    </TextView>
    <Button android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:id="@+id/BackButton1"
        android:text="Back" android:layout_below="@+id/TextView01">
    </Button>
    <Button android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:id="@+id/NextButton1"
        android:text="Next" android:layout_toRightOf="@+id/BackButton1"
        android:layout_below="@+id/TextView01"></Button>
</RelativeLayout>

<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" >
        </FrameLayout>

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true">
        </TabWidget>
    </RelativeLayout>

</TabHost>

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tabexample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".TabExmapleActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="ArrowsActivity"></activity>
        <activity android:name="EditActivity"></activity>
        <activity android:name="OptionsActivity"></activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:09:29.743

只需将您要添加的子 Activity 的 Progressbar 放在 TabHost 中。

首先，它将显示您设置为当前活动的 onCreate 中第一个活动的进度条，如果您单击下一个选项卡，它将显示其进度对话框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:15:57.560

如果我理解正确，您需要在进度对话框处于活动状态时访问以下活动组件。

为此，您需要制作**非模态/无模态**进度对话框。非模态对话框将允许您通过 ui 组件接受事件

请参考下面的帖子

[定时无模式对话](https://stackoverflow.com/questions/4132699/timed-modeless-dialog)

# macros - 打开 Powerpoint 演示文稿时如何自动执行宏？

> ID：11306007
> 
> 赞同：7
> 
> 时间：2012-07-03T07:03:52.637
> 
> 标签：macros, powerpoint, startup, execute

我有一个非常基本的问题，但在互联网上找不到答案。
在 Powerpoint 2010 中，我有一个宏，我希望在每次打开 Powerpoint 文档时执行该宏。如何做到这一点？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-07-10T19:22:32.133

虽然 Auto_Open 不在 PowerPoint 演示文稿中运行，但您可以伪造它。将 CustomUI 部件添加到演示文稿，然后使用 CustomUI OnLoad 回调在演示文稿打开时运行代码。CustomUI 部分只需要 CustomUI 标记。

从这里获取自定义 UI 编辑器：http: [//openxmldeveloper.org/articles/customuieditor.aspx](http://openxmldeveloper.org/articles/customuieditor.aspx)

在自定义 UI 编辑器中打开演示文稿。从 Insert 菜单插入 CustomUI 部件：

[![添加自定义 UI 部件](../Images/2a4706e5293cdd21d96120f8bd908dfe.png)](https://i.stack.imgur.com/uG9P3.jpg)

现在输入一些简单的 RibbonX 代码，如下所示：

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui" 
onLoad="MyOnloadProcedure" >
</customUI> 
```

现在编写您的打开程序：

```
Sub MyOnloadProcedure()
    MsgBox "Hello"    
End Sub 
```

如果加载项中同时具有此过程和 Auto_Open 过程，则 Auto_Open 首先运行。

完全披露：虽然我想到了使用这种方法并在 Excel 中使用过，但我一直等到我在 PPT Alchemy 网站上第一次遇到它：[当 PowerPoint 打开时运行代码](http://www.pptalchemy.co.uk/PowerPoint_Auto_Open_Code.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-02T17:15:51.110

我使用的是 PowerPoint 2016，所以我不能代表早期版本，尽管文档表明这适用于 PowerPoint 版本 2016、2013、2010、2007。此方法不需要任何加载项或应用程序挂钩来处理事件。

参考链接： [https ://support.office.com/en-us/article/command-line-switches-for-microsoft-office-products-079164cd-4ef5-4178-b235-441737deb3a6?ocmsassetID=HA010153889&CTT=1&CorrelationId=ea39d200 -aa81-4d6e-8302-afff4c65859e&ui=en-US&rs=en-US&ad=US#ID0EAABAAA=PowerPoint,_PowerPoint_Viewer](https://support.office.com/en-us/article/command-line-switches-for-microsoft-office-products-079164cd-4ef5-4178-b235-441737deb3a6?ocmsassetID=HA010153889&CTT=1&CorrelationId=ea39d200-aa81-4d6e-8302-afff4c65859e&ui=en-US&rs=en-US&ad=US#ID0EAABAAA=PowerPoint,_PowerPoint_Viewer) )

***从命令行启动 PowerPoint 并使用 /M 开关让 PowerPoint 在启动命名演示文件时运行指定的宏。***

最简单的方法是创建 PowerPoint 应用程序的快捷方式。然后转到快捷方式的属性窗口并选择快捷方式选项卡。接下来，将 /M 开关、您的演示文件名（包括路径）和要运行的宏的名称（区分大小写并且必须是演示文稿的一部分）添加到目标字段的末尾。双击快捷方式，瞧！

示例：我的演示文稿是 C:\myPPTpres.pptm，宏是 Run_Slide_Show，因此我需要将 /M "C:\myPPTpres.pptm" "Run_Slide_Show" 添加到目标字段中现有文本的末尾。

> "C:\Program Files (x86)\Microsoft Office\root\Office16\POWERPNT.EXE" /M "C:\myPPTpres.pptm" "Run_Slide_Show"

确保您正在运行启用宏的演示文稿版本（在 2016 年，它具有 .pptm 扩展名。）

**如果您尝试**使用宏自动开始幻灯片放映，请注意重要事项。在宏的开头添加一秒或多秒的延迟，以允许应用程序完成其启动顺序。如果您不这样做，幻灯片将启动，但应用程序将在完成启动时窃取焦点，将您的幻灯片推到后台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T05:55:01.253

假设宏的类型与自动事件相关，例如 Auto_open()、Auto_close()、Auto_print() 等，为了让 powerpoint 在打开 powerpoint 文件时执行宏，我们需要包含 Powerpoint 插件或其他选项将文件另存为 .ppa 或 .ppam。

有关更多详细信息和下载 AutoEvents zip 文件，请参阅链接：[http ://skp.mvps.org/autoevents.htm](http://skp.mvps.org/autoevents.htm)

# javascript - Javascript和正则表达式：删除字符串中最后一个单词后的空格

> ID：11306008
> 
> 赞同：11
> 
> 时间：2012-07-03T07:04:02.570
> 
> 标签：javascript, regex

我有一个这样的字符串：

```
var str = 'aaaaaa, bbbbbb, ccccc, ddddddd, eeeeee '; 
```

我的目标是删除字符串中的最后一个空格。我会用，

```
str.split(0,1); 
```

但是如果字符串的最后一个字符之后没有空格，这将删除字符串的最后一个字符。

我想用

```
str.replace("regex",''); 
```

我是 RegEx 的初学者，不胜感激。

非常感谢你。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-03T07:07:12.190

谷歌搜索“javascript trim”，你会发现*许多*不同的解决方案。

这是一个简单的：

```
trimmedstr = str.replace(/\s+$/, ''); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-03T07:06:30.217

当您需要删除最后的所有空格时：

```
str.replace(/\s*$/,''); 
```

当您需要在末尾删除一个空格时：

```
str.replace(/\s?$/,''); 
```

`\s`不仅表示空格，还表示类似空格的字符；例如选项卡。

如果你使用 jQuery，你也可以使用这个`trim`函数：

```
str = $.trim(str); 
```

但是`trim`不仅在字符串的末尾删除空格，还在开头也删除了空格。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-03T07:10:30.950

看来你需要一个[`trimRight`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/TrimRight)功能。它直到 Javascript 1.8.1 才可用。在此之前，您可以使用原型技术。

```
 String.prototype.trimRight=function(){return this.replace(/\s+$/,'');}
 // Now call it on any string.
 var a = "a string ";
 a = a.trimRight(); 
```

在 JavaScript 中查看更多关于[修剪字符串的信息？](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript/8522376#8522376)以及兼容性[列表](http://kangax.github.com/es5-compat-table/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-03T07:06:02.307

您可以使用此代码删除单个尾随空格：

```
.replace(/ $/, ""); 
```

要删除所有尾随空格：

```
.replace(/ +$/, ""); 
```

匹配正常模式下的`$`输入结尾（它匹配多行模式下的行尾）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T07:06:47.447

尝试正则表达式`( +)$`，因为`$`in 正则表达式匹配字符串的结尾。这将删除字符串末尾的所有空格。

有些程序有一个`strip`功能可以做同样的事情，我不相信标准的 Javascript 库有这个功能。

[正则表达式参考表](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-28T05:25:38.050

工作示例：

```
 var str  = "Hello World  ";
   var ans = str.replace(/(^[\s]+|[\s]+$)/g, '');

   alert(str.length+" "+ ans.length); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-20T23:19:28.547

## 快进到2021年，

该[**`trimEnd()`**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trimEnd)功能正是为此而生的！

它将删除字符串末尾的所有空格（包括空格、制表符、换行符）。

根据官方文档，每个主流浏览器都支持它。只有 IE 不受支持。（说实话，你不应该关心 IE，因为微软本身已经在 2021 年 8 月[放弃了对 IE的支持！）](https://en.wikipedia.org/wiki/Internet_Explorer_11)

# c# - RIA 服务中提交更改的自动增量

> ID：11306010
> 
> 赞同：0
> 
> 时间：2012-07-03T07:04:08.267
> 
> 标签：c#, silverlight, wcf-ria-services, auto-increment, submitchanges

我在 Silverlight 5 中使用带有实体框架的 RIA 服务。我有一张下`Foo`表；

Fooid
FooName
FooCode
FooRef

`Fooid`是一个自动递增的数字 - 就像保存时的魅力一样......
`FooName`在 ViewModel 中设置 - 在保存时工作正常......
`FooCode`是一个 3 字母代码，例如 GRN、SIP、XYZ ......这也在 ViewModel 中设置。 . 没问题
`FooRef`是递增整数。例如服务器上最后保存的值是 100，现在下一次保存应该是 101。

我对如何获得这个最新号码有点困惑。我研究了一下，我发现了两种方法，但我对使用这些方法感到困惑，需要帮助如何实施。

`First Method`
从 ViewModel，我可以从 RIA 服务调用一个 INVOKE，它可以为我提供最后保存的`FooRef`int。我可以将它加 1 并在 SubmitChanges 上传递值。
`Problem with First Method :`我用这种方法面临的问题是，假设他们的工作站上有 3 个用户在不同的位置。他们都开始创建一个新的`Foo`，当他们调用调用方法时，他们都将被赋予相同的值，这打破了整个概念。

`Second Method`
我以某种方式拦截服务器上的 Add 方法，可能是通过存储库，并`FooRef`在添加此实体并提交更改之前获取值。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:52:09.543

您应该允许您的数据库为您的 Foo 记录分配身份，而不是试图猜测要提供的身份。在多用户系统中几乎是不可能完成的任务。

使用 WCF RIA 服务保存实体时，您可以获得通过以下方式分配的标识：

```
riaContext.SubmitChanges ( (op) =>
  {
    if (!op.HasError)
    {
      var identityAdded = ((Entity) op.ChangeSet.FirstOrDefault()).GetIdentity();
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:23:49.710

最后，我只是继续使用 Invoke 方法，并在调用回调函数中，我最终将上下文提交给服务器。

```
context.GetAssignedFooRef((op =>
        {
          entityNewFoo.FooRef = op.Value; // assign return int to FooRef

          context.Foo.Add(entityNewFoo);
          context.SubmitChanges();
         } 
```

这就是我解决问题的方式，我不知道它是否是一个理想的解决方案，甚至接近它，但它适用于我。我面临的唯一问题是，如果有另一个用户在第一个保存之前从调用中寻找 FooRef。这是验证开始的地方，如果数据库中存在相同的 FooRef，我将请求一个新的 FooRef。

# c# - 作为函数结果的枚举值

> ID：11306014
> 
> 赞同：8
> 
> 时间：2012-07-03T07:04:42.137
> 
> 标签：c#

我有三个枚举：

```
enum ValueType : int
{
  FloatingPoint = 2,
  .../...
}
enum ConstraintType : int
{
  Range = 2,
  .../...
} 
enum Parameter : int 
{
  ExposureTime = F(ValueType.FloatingPoint, ConstraintType.Range, 23),
  .../...
} 
```

问题在于`F`如果我使用的签名：

```
private static int F(ValueType _V, ConstraintType _C, int _N) { ... } 
```

对于 的定义中的每个调用，我都会收到一个错误（无效参数）`Parameter`，但如果我改用以下内容：

```
private static int F(int _V, int _C, int _N) { ... } 
```

一切安好。

这不是阻塞问题，但我想了解为什么会这样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T07:12:07.160

C# 规范在第 14.3 节（“枚举成员”）中指出

> 在枚举成员初始化程序中，其他枚举成员的值始终被视为具有其基础类型的类型，因此在引用其他枚举成员时不需要强制转换。

据我所知，这就是为什么论点似乎具有`int`. 有趣的是，这不会导致无效参数错误：

```
ExposureTime = F((ValueType)ValueType.FloatingPoint, 
                 (CostraintType)ConstraintType.Range,
                 23), 
```

当然，它仍然会导致*另一个*错误，因为您不能像 Marc 所说的那样使用方法调用来初始化枚举成员。方法调用不是常量表达式，而

> 枚举成员的关联值是隐式或显式分配的。如果枚举成员的声明具有常量表达式初始值设定项，则该**常量表达式**的值（隐式转换为枚举的基础类型）是枚举成员的关联值。如果枚举成员的声明没有初始值设定项，则其关联值被隐式设置 [...]

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T07:10:22.973

对于具有显式值的枚举，该值必须是常量表达式。`F(...)`不是**常量**表达式。无论参数是`int`枚举还是枚举，都不能从函数调用中分配枚举值。

您的“一切都很好”实际上意味着：

> 分配给“blah.Parameter.ExposureTime”的表达式必须是常量

这里唯一的“问题”是编译器没有为特定的非法场景提供非常优雅的错误消息。

# iphone - 如何在 Core Data 中选择特定数据？

> ID：11306015
> 
> 赞同：8
> 
> 时间：2012-07-03T07:04:53.433
> 
> 标签：iphone, objective-c, ios, xcode, core-data

我有一个使用 Core Data 并在其中加载 sqlite 数据库的示例程序。我正在使用此代码显示所有值

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Name"
                                          inManagedObjectContext:context];
[fetchRequest setEntity:entity];
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];

for (Name *name in fetchedObjects) {
    NSLog(@"ID: %@", name.nameId);
    NSLog(@"First Name: %@", name.first);
    NSLog(@"Middle Name: %@", name.middle);
    NSLog(@"Last Name: %@", name.last);
} 
```

此代码工作正常，我的问题是我无法选择特定的数据/记录。示例 我想选择 ID = 1 的记录。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T07:09:58.027

在执行请求之前，您必须使用谓词（使用 NSPredicate）。

类似的东西：

```
NSPredicate *predicateID = [NSPredicate predicateWithFormat:@"nameID == %d",-1];
[fetchRequest setPredicate:predicateID]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-03T07:10:12.070

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Name"
                                          inManagedObjectContext:context];
[fetchRequest setEntity:entity];

//Add following method to your code. this will help you to get desired result.
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"yourColumnID == %@", yourID]];

NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];

for (Name *name in fetchedObjects) {
    NSLog(@"ID: %@", name.nameId);
    NSLog(@"First Name: %@", name.first);
    NSLog(@"Middle Name: %@", name.middle);
    NSLog(@"Last Name: %@", name.last);
} 
```

# javascript - 回调中无法识别全局引用的 Javascript 对象成员函数

> ID：11306017
> 
> 赞同：0
> 
> 时间：2012-07-03T07:05:05.100
> 
> 标签：javascript, cordova

我在使用以下 Javascript 代码（Eclipse 中的Phonegap）时遇到问题：

```
function FileStore(onsuccess, onfail){
    //chain of Phonegap File API handlers to get certain directories

    function onGetSupportDirectorySuccess(dir){
        //stuff
        onsuccess();
    }

    function getDirectory(dir){
        return "something" + dir; 
    }
}

var onFileStoreOpened = function(){
    if (window.file_store instanceof FileStore){
      console.log('window.file_store is a FileStore');
      console.log(window.file_store.getDirectory('something'));
    }
}

var onDeviceReady = function(){
  window.file_store = new FileStore(onFileStoreOpened, onFileStoreFailure);  
} 
```

在这里，我想做一些事情来初始化应用程序的文件服务，然后在我的回调初始化中使用它们。我在 LogCat 中收到以下错误消息：

```
07-03 06:26:54.942: D/CordovaLog(223): file:///android_asset/www/index.html: Line 40 : window.file_store is a FileStore
07-03 06:26:55.053: D/CordovaLog(223): file:///android_asset/www/cordova-1.8.1.js: Line 254 : Error in success callback: File7 = TypeError: Result of expression 'window.file_store.getDirectory' [undefined] is not a function. 
```

在移动代码并删除 getDirectory() 中的所有内容以确保它有效之后，我什至不确定我是否理解错误消息，这表明 getDirectory() 不被视为窗口的成员函数。 file_store，即使 window.file_store 被识别为 FileStore 对象。这对我来说毫无意义，所以我想这种解释是不正确的。任何启示将不胜感激。

从那以后，我尝试了以下方法：

```
window.file_store = {
    app_data_dir : null,
    Init: function(onsuccess, onfail){
        //chain of Phonegap File API handlers to get directories
        function onGetSupportDirectorySuccess(dir){
            window.file_store.app_data_dir = dir;
            console.log("opened dir " + dir.name);
            onsuccess();
        }
    },

    GetDirectory : function(){
        return window.file_store.app_data_dir; //simplified
    }
}

var onFileStoreOpened = function(){
    var docs = window.file_store.getDirectory();
    console.log('APPDATA: ' + docs.fullPath);
}

var onDeviceReady = function() {
    window.file_store.Init(onFileStoreOpened, onFileStoreFailure);  
} 
```

我得到

```
D/CordovaLog(224): file:///android_asset/www/base/device.js: Line 81 : opened dir AppData
D/CordovaLog(224): file:///android_asset/www/cordova-1.8.1.js: Line 254 : Error in success callback: File7 = TypeError: Result of expression 'docs' [null] is not an object. 
```

我在这里要做的就是确保在启动时存在某些目录（除了一个之外，我已经删除了所有目录），保存目录对象以供将来使用，然后在所有初始化完成后检索并使用它，我不想要全局命名空间中的所有内容。当然，我希望能够在必要时使用特定的实例，我很不安我不能让它这样工作，因为它表明我的理解存在问题，但我什至无法做到这一点与一个单一的、全球性的合作。这是 Javascript 问题还是 Phonegap 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:26:47.470

As it stands, your getDirectory function is a private function within FileStore. If you wanted to make it a 'member' or 'property' of FileStore, you would need to alter it a little within FileStore to make it like this:

```
 this.getDirectory = function(dir){ }; 
```

or leave it how it is and then set a property....

```
this.getDirectory = getDirectory(); 
```

this way when new FileStore is called it will have getDirectory as a property because the 'this' keyword is always returned when calling a function with 'new'

Hope this quick answer helps. There's lots of stuff on the goog about constructor functions.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:16:02.423

你理解正确。getDirectory 是一个私有函数，不能使用 file_store 实例调用。

在浏览器中试试这个。

```
function FileStore(onsuccess, onfail){
   function onGetSupportDirectorySuccess(dir){
        //stuff
        onsuccess();
   }

   this.getDirectory = function (dir){
   return "something" + dir; 
   }
}

window.file_store = new FileStore('', '');  //the empty strings are just placeholders.
if (window.file_store instanceof FileStore){
    console.log('window.file_store is a FileStore');
    console.log(window.file_store.getDirectory('something'));
} 
```

这将证明基本的 js 代码工作正常。如果在 PhoneGap 中使用时仍有问题，请发表评论。

# visual-studio-2010 - TFS - 显示变更集范围的所有代码审查

> ID：11306023
> 
> 赞同：1
> 
> 时间：2012-07-03T07:05:39.907
> 
> 标签：visual-studio-2010

如何在 TFS 中显示变更集范围的所有代码审查项？我需要在 3 天内显示所有变更集以及相应的代码审查项目。

我安装了 TFS Sidekicks，但不知道如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:07:08.863

在 Visual Studio 2012 中（不确定这是否适用于早期版本）如果您连接到 TFS，则团队菜单中有一个“新查询”选项。从中您可以添加一个“工作项类型 = 代码审查响应”子句，然后可能添加一些日期范围子句......希望这能让您更接近解决方案。条件中有很多字段可供选择，所以也许有一种方法可以根据变更集编号进行查询。

# php - 将图像上传到不同的域

> ID：11306024
> 
> 赞同：2
> 
> 时间：2012-07-03T07:05:41.403
> 
> 标签：php, upload, dns

假设我有 2 个域在同一台服务器上运行，www.domain1.com 和 www.domain2.com。
我将使用 www.domain1.com 进行数据传输。基本上这个域将形成我的网站。
我想使用 www.domain2.com 作为我的图像服务器。

假设 ftp 结构看起来像这样：（
我希望这个结构可读，因为我使用 alt[255] 来分隔它。但是，如果它不可读，有没有办法在所以？）

> 域
> |
> +-- domain1.com
> | |
> | +-- public_html
> |
> +-- domain1.com
>       |
>       +-- public_html

有没有办法让我在 php 中将图片从 www.domain1.com 上传到 www.domain2.com？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T07:21:01.753

```
<pre><code>
$dir = $_SERVER['DOCUMENT_ROOT'].'/../domain2.com/';
$d = dir($dir);
echo "Handle: " . $d->handle . "\n";
echo "Path: " . $d->path . "\n";
while (false !== ($entry = $d->read())) {
   echo $entry."\n";
}
$d->close();
</code>
</pre> 
```

你可以试试上面的代码。获得列表后，您可以通过以下方式处理上传

```
 $dest_dir = $_SERVER['DOCUMENT_ROOT'].'/../domain2.com/YOURSTOREFOLDER/'
    $filename = 'hello_world.jpg';
    move_upload_file($uploadFileName,$dest_dir.$filename);

```

# salesforce - 批准流程操作未达到 Salesforce 里程碑

> ID：11306027
> 
> 赞同：0
> 
> 时间：2012-07-03T07:05:48.493
> 
> 标签：salesforce, salesforce-service-cloud, milestone

在 Salesforce 中，当我手动更新字段以满足里程碑标准时，达到了我的里程碑。但是，当通过批准流程操作满足里程碑标准时，不会达到里程碑。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:01:53.377

当审批流程完成时，会触发“最终审批操作”部分中定义的操作。听起来您在这里定义了一个字段更新操作，并且通过更新此字段，您期望满足您的里程碑标准，对吗？

遗憾的是，源自审批流程中最终审批步骤的操作不会进一步触发其他操作。例如，如果您要在选中复选框时发出电子邮件警报，如果通过完成批准过程选中复选框，则电子邮件不会发出。

我发现解决此问题的唯一方法是让您的批准流程的操作触发一个异步方法，该方法反过来更新连接到您的里程碑的字段。通过调用@future 方法将流程与审批流程本身分开，确保遵循常规的工作流规则。

# wpf - WPF 按钮 IsPressed 和加速键触发器

> ID：11306030
> 
> 赞同：0
> 
> 时间：2012-07-03T07:06:16.283
> 
> 标签：wpf

我有一个带有 Text _R 的按钮。当用户按下 R 键时，它会激活。现在我的按钮模板通过 IsPressed 上的触发器更改外观。这适用于鼠标单击或空格键。当用户按下 R 时，有没有办法改变与 IsPressed 触发器相同的外观？我还缺少其他触发器吗？

我从 MSDN 文档中注意到了这一点。

IsPressed 是按钮的状态，指示鼠标左键或空格键在按钮上被按下。当 IsPressed 为 true 时，控件将捕获鼠标。因此，控件将引发鼠标事件，例如 MouseEnter 和 IsMouseDirectlyOverChanged。请注意，使用 AccessText 或 ENTER 不会更改 IsPressed 或捕获鼠标，但会引发 Click 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:51:14.253

您可以捕捉键盘事件

在构造函数中添加：

```
EventManager.RegisterClassHandler(typeof(Window), Keyboard.KeyDownEvent, new System.Windows.Input.KeyEventHandler(keyDown), true); 
```

并实现方法：

```
private void keyDown(object sender, System.Windows.Input.KeyEventArgs e)
{
    if ( Keyboard.IsKeyDown(Key.R))
    {
        // Your code
    }
} 
```

# java - 请解释 Java 内存模型中说明的初始化安全性

> ID：11306032
> 
> 赞同：20
> 
> 时间：2012-07-03T07:06:20.287
> 
> 标签：java, multithreading, synchronization, thread-safety, java-memory-model

1.  有人可以按照 Java 内存模型的要求解释**初始化安全吗？**
2.  **final**字段如何帮助实现*初始化安全*？
3.  **构造函数**在确保*初始化安全*方面起什么作用？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-03T08:46:34.530

初始化安全性提供了外部线程在其完全构造（初始化）状态下看到的对象。前提是对象不应过早发布，即。在它的构造函数中。一旦确保了这一点，JMM 就要求声明为`final`. 首先，`final`保证所有对象字段都可以在完全初始化的状态下被外部线程看到。这并不像听起来那么简单。

考虑一个类：

```
class A {
   List list;
   A() {  
      list = Arrays.asList(some init expressions that adds 10 elements to list);
    }

} 
```

`list`默认情况下，访问of实例的线程`A's`不能保证在该列表中看到 10 个元素。事实上，这个线程甚至可以`list`看作`null`. 但是，如果`list`声明为`final`，则根据 JMM 的要求，`list`必须始终显示为在其中使用 10 个元素进行初始化。

其次，这种初始化保证不限于`final`字段本身，而是递归地扩展到它所引用的所有对象。例如，如果`list`上面示例中的 是列表本身的列表，则外部线程保证将内部列表视为完全初始化。

请注意，我们没有使用任何地方`synchronized`来实现内存可见性（发生前关系）的这种安全性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T07:14:16.793

**1.** 初始化安全性允许**在不使用同步的情况下跨线程安全地共享正确构造的不可变对象**，无论它们是否使用数据竞争发布。

**2.** 具有最终字段的对象，初始化安全性防止使用对该对象的引用的初始加载对**构造的任何部分进行重新排序。**

# c# - 我可以停止 Visual Studio 自动更改表单设计器代码吗？

> ID：11306034
> 
> 赞同：4
> 
> 时间：2012-07-03T07:06:25.530
> 
> 标签：c#, winforms, visual-studio-2010

我正在使用 Visual Studio 并有一些 numericUpDown 控件，我已经为（最小值、最大值、值和增量）设置了值。代码设计器不断将我的简单十进制值转换为 int[]。我知道它说“不要使用代码编辑器修改此方法的内容”，但我发现在这里调整属性非常有用，我认为我在更改时只是“让事情变得整洁”：

```
 this.numericUpDown1.Increment = new decimal(new int[] {
        2,
        0,
        0,
        0}); 
```

到

```
 this.numericUpDown1.Increment = new decimal(2); 
```

但是，如果我触摸可视表单设计器上的控件，它会变回来。我想也许有一个标志会保持原样，直到我想要更新它。它更多的是为了可读性和导航，但即使它只是把它留在一行我会更开心。

我发现这个（[我如何告诉 Visual Studio 不要在设计器代码中填充字段？](https://stackoverflow.com/q/4663460/1024885)）有人试图离开它，但我不确定它是否适用于这种情况。

随意告诉我，我应该克服它，别管它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:12:34.600

您可以制作自己的 NumericUpDown 用户控件。只需从常见的 NumeriUpDown 继承并在构造函数中设置所需的属性即可。

```
public partial class MyUpDownCtrl : NumericUpDown
    {
        public MyUpDownCtrl()
        {
            InitializeComponent();
            this.Increment = new decimal(2);

        }
    } 
```

生成解决方案后，您将在工具箱中准备好新的自定义 UpDownControl，只需像常见的 numericUpDown 一样拖动它即可使用。

我希望它对您有所帮助，因为我不知道有什么方法可以让 Visual Studio 停止自动更改表单设计器代码。也许根本做不到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:20:08.767

刚刚意识到（感谢@Jonathan）我可以在该位置上方的设计器中创建一个单独的部分......这意味着我可以将所有默认值放在一个单独的部分中，只要我不想更改默认值表单设计器。这是InitializeComponent()上面的方法

```
private void IntializeOtherComponents()
    {
      this.numericUpDown1.Value = new decimal(17);     
      this.numericUpDown1.Maximum = new decimal(7777);
      this.numericUpDown1.Minimum = new decimal(5); 
    } 
```

# android - 如何在android中的Viewpager上实现缩放、平移和拖动？

> ID：11306037
> 
> 赞同：1
> 
> 时间：2012-07-03T07:06:37.213
> 
> 标签：android

我有一个查看器，里面显示视频和图像，请告诉我如何实现缩放、平移、拖动等功能。

在我的 viewpager 里面我有 videoview 和 imageview，现在我想要的是当我执行缩放时它应该缩放两个视图。请告诉我有关此的实施情况。我在论坛上看到的所有地方，我发现人们已经在像 imageview 这样的单个视图上进行缩放平移拖动，但没有直接在 viewpager 上工作，在我的情况下，我必须直接处理 viewpager，以便可以处理其中的所有视图功能像缩放，平移，拖动，不管它里面的视图数量。帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-19T00:24:50.393

对于缩放和平移，最好的库是[**TouchImageView**](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/ortiz/touch/TouchImageView.java)

,但是当我们在视图寻呼机上添加这个时会有一个问题，当我们缩放图像时滑动图像。即如果我缩放图像并拖动以查看右侧的另一个缩放部分，由于滑动视图寻呼机的属性，寻呼机将滑动到下一个图像。如果我们向右滑动也会发生。所以修复这个问题经过长时间的研发，我终于做了一些修复。为此，我们需要在**TouchImageView.java**中进行一些修改和浏览器

首先我们需要创建一个自定义的 Viewpager

**MyViewPager.java**

```
package com.example.gallery;

import android.content.Context;
 import android.support.v4.view.ViewPager;
import android.util.AttributeSet;
import android.view.MotionEvent;

public class MyViewPager extends ViewPager {

private boolean enabled = true;

public MyViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public boolean onInterceptTouchEvent(MotionEvent arg0) {
    if(enabled)
        return super.onInterceptTouchEvent(arg0);

    return false;
}

public boolean isEnabled() {
    return enabled;
}

public void setEnabled(boolean enabled) {
    this.enabled = enabled;
} 
```

}

之后我们需要更改**TouchImageView 类**修改后的类如下所示

修改部分**requestDisallowInterceptTouchEvent**添加到触摸事件和**onDoubleTap 部分**也修改了，以便用户只有在缩小到其原始或正常位置后才能滑动到下一个图像。放大时用户无法更改当前图像

```
private class TouchImageViewListener implements OnTouchListener {

    //
    // Remember last point position for dragging
    //
    private PointF last = new PointF();

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        mScaleDetector.onTouchEvent(event);
        mGestureDetector.onTouchEvent(event);
        PointF curr = new PointF(event.getX(), event.getY());

        if (state == NONE || state == DRAG || state == FLING) {
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                last.set(curr);
                if (fling != null)
                    fling.cancelFling();
                setState(DRAG);
                    //Modified Portion  

          getParent().requestDisallowInterceptTouchEvent(true);
                break;

            case MotionEvent.ACTION_MOVE:
                if (state == DRAG) {
                    float deltaX = curr.x - last.x;
                    float deltaY = curr.y - last.y;
                    float fixTransX = getFixDragTrans(deltaX, viewWidth,
                            getImageWidth());
                    float fixTransY = getFixDragTrans(deltaY, viewHeight,
                            getImageHeight());
                    matrix.postTranslate(fixTransX, fixTransY);
                    if (deltaX == 0 || normalizedScale == 1.0)
                    //Modified Portion  

           getParent().requestDisallowInterceptTouchEvent(false)
                    else
                               getParent().requestDisallowInterceptTouchEvent(true);
                    fixTrans();
                    last.set(curr.x, curr.y);
                }
                break;

            case MotionEvent.ACTION_UP:
            //Modified Portion  

               getParent().requestDisallowInterceptTouchEvent(false)

                break;
            case MotionEvent.ACTION_POINTER_UP:
                setState(NONE);
                break;
            }
        }

        setImageMatrix(matrix);
        //
        // indicate event was handled
        //
        return true;
    }
}//requestDisallowInterceptTouchEvent is Added When Touch Lister Occurs While Zoomed In

.......
private class GestureListener extends
        GestureDetector.SimpleOnGestureListener {

    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        return performClick();
    }

    @Override
    public void onLongPress(MotionEvent e) {
        performLongClick();
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        if (fling != null) {
            //
            // If a previous fling is still active, it should be cancelled
            // so that two flings
            // are not run simultaenously.
            //
            fling.cancelFling();
        }
        fling = new Fling((int) velocityX, (int) velocityY);
        compatPostOnAnimation(fling);
        return super.onFling(e1, e2, velocityX, velocityY);
    }

    @Override
    public boolean onDoubleTap(MotionEvent e) {
        boolean consumed = false;

//Modified Portion
        if (state == NONE) {
            float targetZoom = (normalizedScale == minScale) ? maxScale
                    : minScale;
            DoubleTapZoom doubleTap = new DoubleTapZoom(targetZoom,
                    e.getX(), e.getY(), false);
            compatPostOnAnimation(doubleTap);
            consumed = true;
        }
        else
        {
            float targetZoom = (normalizedScale == minScale) ? maxScale
                    : minScale;
            DoubleTapZoom doubleTap = new DoubleTapZoom(targetZoom,
                    e.getX(), e.getY(), false);
            compatPostOnAnimation(doubleTap);
        }
        return consumed;
    }
}//Allow User To Double Tap To Orginal Position So that only he can Swipe to next image 
```

从[**这里**](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/ortiz/touch/TouchImageView.java)下载**TouchImageView**并修改以上部分[](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/ortiz/touch/TouchImageView.java)

 ****FullScreenImageAdapter.java**

```
package com.example.gallery;

public class FullScreenImageAdapter extends PagerAdapter {

private Activity _activity;
private String[] mStrings;
private LayoutInflater inflater;
ImageLoader im;

// constructor
public FullScreenImageAdapter(Activity activity, String[] mStrings) {
    this._activity = activity;
    this.mStrings = mStrings;

    im = new ImageLoader(_activity);
}

@Override
public int getCount() {
    return this.mStrings.length;
}

@Override
public boolean isViewFromObject(View view, Object object) {
    return view == ((RelativeLayout) object);
}

@Override
public Object instantiateItem(ViewGroup container, int position) {
    TouchImageView imgDisplay;
    final Button btnClose;

    inflater = (LayoutInflater) _activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View viewLayout = inflater.inflate(R.layout.layout_fullscreen_image,
            container, false);
    RelativeLayout parentview = (RelativeLayout) viewLayout
            .findViewById(R.id.rel);
    imgDisplay = (TouchImageView) viewLayout.findViewById(R.id.imgDisplay);
    btnClose = (Button) viewLayout.findViewById(R.id.btnClose);

     im.DisplayImage(mStrings[position], imgDisplay);

    // close button click event
    btnClose.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            _activity.finish();
        }
    });

    ((ViewPager) container).addView(viewLayout);
    /**
     * Setting the object for animation
     * */

    return viewLayout;
}

@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    ((ViewPager) container).removeView((RelativeLayout) object);

} 
```

}

**MainActivity.java**

```
package com.example.gallery;

public class MainActivity extends Activity {

private FullScreenImageAdapter adapter;
private MyViewPager viewPager;
private String[] mStrings = {
        "http://3rdbillion.net/wp-content/uploads/2013/12/9039b649b7cd0ee7f418e55416a8ea204.jpg",
            "http://images.tentebranda.org/wp-content/uploads/animal-images_5514_1.jpg",
            "http://3rdbillion.net/wp-content/uploads/2013/12/f6aa5d04531f8ff9416ace6e273405304.jpg",
            "http://3rdbillion.net/wp-content/uploads/2013/12/fcbc6aaa7ccd1ebaea80f36bfad3c8f74.jpg"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fullscreen_view);

    viewPager = (MyViewPager) findViewById(R.id.pager);

    adapter = new FullScreenImageAdapter(MainActivitys.this, mStrings);

    viewPager.setAdapter(adapter);
    viewPager.setPageMargin(30);
    // displaying selected image first
    viewPager.setCurrentItem(position);
}
} 
```

**使用从 Web 延迟加载的图像显示**在此示例中，我使用的是[LAzyLoad 库](https://github.com/thest1/LazyList)

> 请下载并将其添加到您的项目中

最后是 Xml 文件

**layout_fullscreen_image.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/rel" >

<!-- <YourPackagename where TouchImageView.java is Placed.TouchImageView
    android:id="@+id/imgDisplay"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitCenter" />Example is given below My TouchImageView.java is placed in the com.example.gallery package
-->

  <com.example.gallery.TouchImageView
    android:id="@+id/imgDisplay"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitCenter" />

<Button
    android:id="@+id/btnClose"
    android:layout_width="wrap_content"
    android:layout_height="30dp"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="15dp"
    android:layout_marginTop="15dp"
    android:paddingTop="2dp"
    android:paddingBottom="2dp"
    android:background="@drawable/ic_launcher"
    android:textColor="#ffffff"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:text="Close" /> 
```

**activity_fullscreen_view**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="#33BBFFFF" >
<!--<YourPackagename where MyViewPager.java is Placed.MyViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />Example is given below My MyViewPager.java is placed in the com.example.gallery package-->

<com.example.gallery.MyViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

还要在清单文件中添加 Internet 权限和写入存储权限然后你就完成了

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

对于从 Sd 卡显示图像仅替换延迟加载部分并添加必要的文件以从 Sd 卡显示图像并设置 Adpator

- - - - - - - - -更新 - - -

TouchImageview 的新链接在 [这里](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/ortiz/touch/TouchImageView.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:31:22.353

经过长时间的研发后，我得出结论，您可以直接在您的 viewpager 所在的父布局上操作事件，例如 Linearlayout 等。检查此链接：

[http://myandroidnote.blogspot.in/2011/03/pinch-zoom-to-view-completely.html](http://myandroidnote.blogspot.in/2011/03/pinch-zoom-to-view-completely.html)

它不适用于平移、拖动等所有功能，但您可以通过按钮操作放大、缩小、正常等事件。我已经搜索了很多此类问题，但没有人在任何地方正确解决它。感谢这位朋友:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-15T18:20:10.493

因为这个线程中的所有答案都相当陈旧，所以我将在这里发布我的调查结果。我终于找到了[Subsampling Scale Image View](https://github.com/davemorrissey/subsampling-scale-image-view)库，它可以与 Android 支持包中的标准 ViewPager 一起使用，无需任何自定义。值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:40:17.017

对于图像，您可能想看看这个 => [android imageView: setting drag and pinch zoom parameters](https://stackoverflow.com/questions/4227451/android-imageview-setting-drag-and-pinch-zoom-parameters)

从来没有在 android 上玩过视频，所以我不会在这方面帮助你，但你应该更明确地说明你打算做什么，也许提供一些代码或解释你的应用程序是如何构建的？**

# projects - 关于项目和经验

> ID：11306041
> 
> 赞同：-3
> 
> 时间：2012-07-03T07:06:48.873
> 
> 标签：projects

> “我想从事一个 XYZ 很棒的项目，我在脑海中使用 ABC 编程语言，但我觉得我没有所需的知识，或者我没有足够的经验来执行。”

您是否认为某人应该从事一个项目（即使它是一个小型的个人项目）并尝试在此过程中获得技能和知识，或者他甚至不应该开始从事一个项目，除非他至少具有可观的水平经验和知识？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:11:35.923

没有人是天生的。无论我们学到什么，都是通过我们的经验。如果你一直在想“我做不到”，那么你永远也做不到。如果您有 stackoverflow、google 和对自己的信心，请继续。您可以从这里获得任何帮助。只有当你做一个真正的项目时，你才会学到一些东西。犯错误并从中吸取教训。

# c# - “ref int m_a”如何防止包含 m_a 的对象被 GC 回收？

> ID：11306047
> 
> 赞同：1
> 
> 时间：2012-07-03T07:07:24.280
> 
> 标签：c#, garbage-collection

```
class A
{
   public int m_a;
}

void fun(ref int a)
{
   ...
}

fun(ref new A().m_a); 
```

在乐趣中，“ref int a”如何在乐趣返回之前防止对象（新 A（））被回收？

```
<example 0>
using System;

class A
{
    public int m_a;
    ~A()
    {
        Console.WriteLine("~A()");
    }
}

class Program
{
    static void fun(ref int a)
    {
        Console.WriteLine("Begin<<<<<<<<<<<<<<");
        a++;
        GC.Collect();
        GC.WaitForPendingFinalizers();

        Console.WriteLine("End>>>>>>>>>>>>>>>>>");
    }

    static void Main(string[] args)
    {
        fun(ref new A().m_a);

        Console.WriteLine("Over");
    }
}

output:
Begin<<<<<<<<<<<<<<
~A()
End>>>>>>>>>>>>>>>>>
Over

<example 1>
using System;

class A
{
    public int m_a;
    ~A()
    {
        Console.WriteLine("~A()");
    }
}

class Program
{
    static void fun(ref int a)
    {
        Console.WriteLine("Begin<<<<<<<<<<<<<<");
        a++;
        GC.Collect();
        GC.WaitForPendingFinalizers();

        //add a code
        a++;

        Console.WriteLine("End>>>>>>>>>>>>>>>>>");
    }

    static void Main(string[] args)
    {
        fun(ref new A().m_a);

        Console.WriteLine("Over");
    }
}

output:
Begin<<<<<<<<<<<<<<
End>>>>>>>>>>>>>>>>>
Over
~A() 
```

请在 VS 中按发布模式构建。我查看ASM代码，只加了两行：

```
 a++;
0000002f  mov         eax,dword ptr [ebp-4] 
00000032  inc         dword ptr [eax] 
```

两个示例之间的其他部分相同。GC 如何确保变量 a 在机器代码中不再有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:33:05.467

这取决于如何`a`在`fun`. GC 能够确定任何给定的对象是否是根对象。在这种情况下，是一个实例中`a`字段的别名，并且该对象被认为是有根的。但是，如果 JIT 编译器确定从该点开始在该方法的其余部分中未使用，则该实例将不再是根并且有资格进行垃圾收集。`m_a``A``a``fun``A`

一些例子：

```
void fun(ref int a)
{
   // forgot to use a. our object is already eligible for GC!
   for(int i = 0; i < 10; i++)
   {
      Console.WriteLine(i);
   }
}

void fun2(ref int a)
{       
   for(int i = 0; i < 10; i++)
   {
      Console.WriteLine(a);
   }
   // GC has to wait until a is no longer in use. now our object is eligible for GC.
}

void fun3(ref int a)
{
   // can't gc yet. a is still being used.
   int b = a;
   // b has a copy of the value in a so now our object is eligible for GC.
   for(int i = 0; i < 10; i++)
   {
      Console.WriteLine(b);
   }
} 
```

更新：

我不是如何在 clr 中实现这一点的专家，但我的理解是使用 ref 会导致将指向该字段的托管指针`m_a`传递到`fun`. 当 GC 运行时，根由对静态堆对象的引用、所有线程的调用堆栈和寄存器确定。我在这里猜测，但也许指向该字段的托管指针`m_a`存储了对容器对象的引用。或者，GC 可以确定给定托管指针在哪个对象中。无论哪种方式，对象都被标记为源自该托管引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:27:24.973

You would have to create the A instance beforehand and keep a reference to it, along the lines of:

```
 A a = new A();
    fun(ref a.m_a); 
```

Otherwise, when fun returns, the new instance of A goes out of scope, and is therefore up for garbage collection.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T13:09:23.153

I'd thought this [old presentation](http://download.microsoft.com/download/e/2/1/e216b4ce-1417-41af-863d-ec15f2d31b59/DEV490.ppt) (Slide 30 onwards) to be sufficient, but it developed into a bit of back-and-forth in the comments section, so I thought I'd put an answer up.

Whenever the JIT prepares any method, it also constructs a "table", that maps which local variable slots are "live" at any particular point in the method. So, when the GC is examining each thread, it takes the Instruction Pointer for that thread, consults the table, and uses that to determine live references within the current method.

There is nothing written into the machine code for a particular method that has to notify the GC of anything - the JITs analysis covers all paths through the code, and only has to be done once for each method.

Under Debug, the JIT marks all variables as used for the entire body of the method - this keeps references alive longer than strictly necessary, but does mean that you can examine the state of variables after their last use in the method (via e.g. Locals or Autos windows, or any other way you may suddenly wish to reference a variable)

# android - 从Service android改变亮度

> ID：11306049
> 
> 赞同：2
> 
> 时间：2012-07-03T07:07:35.820
> 
> 标签：android, android-screen

我想通过服务更改 android 设备的亮度。我已经看到很多关于堆栈溢出的问题，但没有一个能解决我的问题。

我已经完成了从在 settingsManger 中设置亮度、开始新活动等的所有事情，但没有一个对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:10:44.423

尝试作为

```
 android.provider.Settings.System.putInt(getContentResolver(),
   android.provider.Settings.System.SCREEN_BRIGHTNESS,
   BRIGHTNESS_Value); 
```

并在 Manifest.xml 中添加权限

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"/>
<uses-permission android:name="android.permission.CHANGE_CONFIGURATION" />
</manifest> 
```

编辑：尝试：

```
public class ExampleService extends Service {

    @Override
    public void onCreate() {
        // The service is being created
        // set SCREEN_BRIGHTNESS
        android.provider.Settings.System.putInt(getContentResolver(),
        android.provider.Settings.System.SCREEN_BRIGHTNESS,
        BRIGHTNESS_Value);
        /// start new Activity
        Intent intent = new Intent(getBaseContext(), ExampleActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        getApplication().startActivity(intent);
    }

    @Override
    public IBinder onBind(Intent intent) {
        // A client is binding to the service with bindService()
        return mBinder;
    }
}

public class ExampleActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // The activity is being created.

    }

    @Override
    protected void onResume() {
        super.onResume();
        // The activity has become visible (it is now "resumed").
        this.finish();
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:17:40.597

即使您在敬酒后调用完成，它也有效。我尝试过这个。

实际上，即使您不调用虚拟活动，它也可以工作。只是您不会看到显示亮度发生变化（可见），即使它在设置中正确地设置了亮度值。

如果您在应用程序在后台运行时进入设置>显示>亮度，则显示亮度的变化是可见的。

虽然不知道为什么会这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:19:20.147

I wanted same as you...

I also failed to find, Finally I had to implement...

[Change brightness according to surrounding light in android](https://stackoverflow.com/questions/14101669/change-brightness-according-to-surrounding-light-in-android/14111181#14111181)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:56:10.707

找到答案：创建一个不可见的活动，不要完成（）它。在活动中进行所有更改

虚拟活动代码：

```
public class DummyActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dummy_layout);
    int progress = getIntent().getIntExtra("brightness", 0);
    WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
    layoutParams.screenBrightness = progress/255.0f;
    getWindow().setAttributes(layoutParams);

    Toast.makeText(this, "Came in Dummy Activity", Toast.LENGTH_SHORT).show();
}
@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
} 
```

}

# android - 在 Android 中使用 XML Pull Parser 执行 XML 解析

> ID：11306054
> 
> 赞同：0
> 
> 时间：2012-07-03T07:08:01.417
> 
> 标签：android, xml-parsing, xmlpullparser, android-pullparser

我正在尝试使用 XML Pull Parser 进行 XML 解析。但我只得到 nametitle & name 的数据。对于其余数据，我得到了异常。下面我发布我的代码。

**主要活动**

```
public class PullParsingActivity extends Activity 
{
private static final String urL =
        "https://dl.dropbox.com/u/85981610/user.xml";

Button parseData;

private final String TAG = "PARSED DATA";
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    parseData = (Button)findViewById(R.id.parseData);

    parseData.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {
            try 
            {
                URL url = new URL(urL);
                url.openConnection();
                PullParser pullParser = new PullParser();
                pullParser.parse(url.openStream());
            }//try 
            catch (MalformedURLException e) 
            {
                Log.e("PullParsingActivity", e.getMessage());
            }//catch 
            catch (IOException e) 
            {
                Log.e("PullParsingActivity", e.getMessage());
            }//catch
        }//onClick
    });
}//onCreate
}//PullParsingActivity 
```

**解析器类**

```
public class PullParser 
{
private static final String ns = null;//set to null as we will not use namespace
Entry e1;

/*Method to parse data*/
public List<Entry> parse(InputStream is)
{
    XmlPullParser xpp = Xml.newPullParser();
    try 
    {
        xpp.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
        xpp.setInput(is, "UTF-8");
        /*Call next() & return event START_TAG or END_TAG*/
        xpp.nextTag();
        Log.i("PullParsing nextTag", ""+xpp.nextTag());
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing1", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing2", e.getMessage());
    }//catch
    finally
    {
        try 
        {
            is.close();
        }//try 
        catch (IOException e) 
        {
            Log.e("Pull Parsing3", e.getMessage());
        }//catch
    }//finally
    return readFeed(xpp);
}//parse

/*read data from xml*/
public List<Entry> readFeed(XmlPullParser parser) 
{
    List<Entry> parsedData = new ArrayList<Entry>();

    try 
    {
        /*checks whether current event type, namespace & name match*/
        parser.require(XmlPullParser.START_TAG, ns, "menu");
        while(parser.next() != XmlPullParser.END_TAG)
        {
            if(parser.getEventType() != XmlPullParser.START_TAG)
            {
                continue;
            }//if
            String name = parser.getName();

            /*look for the required tag*/
            if(name.equalsIgnoreCase("item"))
            {
                parsedData.add(readEntry(parser));
            }//if
            else
            {
                skip(parser);
            }//else
        }//while
    }//try 
    catch (XmlPullParserException e)
    {
        Log.e("PullParsing4", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing5", e.getMessage());
    }//catch
    return parsedData;
}//readFeed

public Entry readEntry(XmlPullParser parser)
{
    String nametitle = null;
    String name = null;
    String email = null;
    String mobile = null;
    String website = null;
    String jobtitle = null;
    String company = null;
    String businessphone = null;
    String homephone = null;
    String skype = null;
    String faxno = null;
    String businessaddress = null;
    String homeaddress = null;
    String otheraddress = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "item");

        while(parser.next() != XmlPullParser.END_TAG)
        {
            if(parser.getEventType() != XmlPullParser.START_TAG)
            {
                continue;
            }//if
            String parsedName = parser.getName();
            if(parsedName.equalsIgnoreCase("nametitle"))
            {
                nametitle = readNameTitle(parser);
            }//if
            else if (parsedName.equalsIgnoreCase("name")) 
            {
                name = readName(parser);
            }//else if
            else if (name.equalsIgnoreCase("email")) 
            {
                email = readEmail(parser);
            }//else if
            else if (name.equalsIgnoreCase("mobile")) 
            {
                mobile = readMobile(parser);
            }//else if
            else if (name.equalsIgnoreCase("website")) 
            {
                website = readWebsite(parser);
            }//else if
            else if (name.equalsIgnoreCase("jobtitle")) 
            {
                jobtitle = readJobTitle(parser);
            }//else if
            else if (name.equalsIgnoreCase("company")) 
            {
                company = readCompany(parser);
            }//else if
            else if (name.equalsIgnoreCase("businessphone")) 
            {
                businessphone = readBusinessPhone(parser);
            }//else if
            else if (name.equalsIgnoreCase("homephone")) 
            {
                homephone = readHomePhone(parser);
            }//else if
            else if (name.equalsIgnoreCase("skype")) 
            {
                skype = readSkype(parser);
            }//else if
            else if (name.equalsIgnoreCase("faxno")) 
            {
                faxno = readFaxNo(parser);
            }//else if
            else if (name.equalsIgnoreCase("businessaddress")) 
            {
                businessaddress = readBusinessAddress(parser);
            }//else if
            else if (name.equalsIgnoreCase("homeaddress")) 
            {
                homeaddress = readHomeAddress(parser);
            }//else if
            else if (name.equalsIgnoreCase("otheraddress")) 
            {
                otheraddress = readOtherAddress(parser);
            }//else if
            else 
            {
                skip(parser);
            }//else
        }//while
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("Pull Parsing6", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("Pull Parsing7", e.getMessage());
    }//catch

    e1 = new Entry(nametitle, name, email, mobile, website, jobtitle, 
            company, businessphone, homephone, skype, faxno, businessaddress, 
            homeaddress, otheraddress); 
    Log.d("PARSED DATA", e1.nametitle);
    Log.d("PARSED DATA", e1.name);
    //Log.d("PARSED DATA", e1.website);
    return e1;

}//readEntry

private String readFaxNo(XmlPullParser parser) 
{
    String faxno = null;
    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "faxno");
        faxno = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "faxno");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("Pull Parsing8", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("Pull Parsing9", e.getMessage());
    }//catch
    return faxno;
}//readFaxNo

public String readNameTitle(XmlPullParser parser)
{
    String nameTitle = null;
    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "nametitle");
        nameTitle = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "nametitle");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("Pull Parsing8", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("Pull Parsing9", e.getMessage());
    }//catch
    return nameTitle;
}//readTitle

public String readName(XmlPullParser parser) 
{
    String name = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "name");
        name = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "name");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing10", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing11", e.getMessage());
    }//catch

    return name;
}//readLink

public String readEmail(XmlPullParser parser)
{
    String email = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "email");
        email = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "email");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing12", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing13", e.getMessage());
    }//catch

    return email;
}//readEmail

public String readMobile(XmlPullParser parser)
{
    String mobile = null;
    try
    {
        parser.require(XmlPullParser.START_TAG, ns, "mobile");
        mobile = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "mobile");
    }//try
    catch(XmlPullParserException e)
    {
        Log.e("PullParsing 14", e.getMessage());
    }//catch
    catch (IOException e)
    {
        Log.e("PullParsing 15", e.getMessage());
    }//catch

    return mobile;
}//readMobile

public String readWebsite(XmlPullParser parser)
{
    String website = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "website");
        website = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "website");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing16", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing17", e.getMessage());
    }//catch

    return website;
}//readWebsite

public String readJobTitle(XmlPullParser parser)
{
    String jobTitle = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "jobtitle");
        jobTitle = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "jobtitle");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing18", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing19", e.getMessage());
    }//catch

    return jobTitle;
}//readEmail

public String readCompany(XmlPullParser parser)
{
    String company = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "comapny");
        company = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "company");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing20", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing21", e.getMessage());
    }//catch

    return company;
}//readcompany

public String readBusinessPhone(XmlPullParser parser)
{
    String businessPhone = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "businessphone");
        businessPhone = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "businessphone");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing22", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing23", e.getMessage());
    }//catch

    return businessPhone;
}//readBusinessPhone

public String readHomePhone(XmlPullParser parser)
{
    String homePhone = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "homephone");
        homePhone = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "homephone");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing24", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing25", e.getMessage());
    }//catch

    return homePhone;
}//readEmail

public String readSkype(XmlPullParser parser)
{
    String skype = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "skype");
        skype = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "skype");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing26", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing27", e.getMessage());
    }//catch

    return skype;
}//readSkype

public String readBusinessAddress(XmlPullParser parser)
{
    String businessAddress = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "businessaddress");
        businessAddress = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "businessaddress");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing28", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing29", e.getMessage());
    }//catch

    return businessAddress;
}//readBusinessAddress

public String readHomeAddress(XmlPullParser parser)
{
    String homeAddress = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "homeaddress");
        homeAddress = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "homeaddress");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing30", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing31", e.getMessage());
    }//catch

    return homeAddress;
}//readBusinessAddress

public String readOtherAddress(XmlPullParser parser)
{
    String otherAddress = null;

    try 
    {
        parser.require(XmlPullParser.START_TAG, ns, "otheraddress");
        otherAddress = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "otheraddress");
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing32", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("PullParsing33", e.getMessage());
    }//catch

    return otherAddress;
}//readBusinessAddress

public void skip(XmlPullParser parser)
{
    try 
    {
        if(parser.getEventType() != XmlPullParser.START_TAG)
        {
            throw new IllegalStateException();
        }//if
        int depth = 1;
        while(depth != 0)
        {
            switch(parser.next())
            {
                case XmlPullParser.END_TAG:
                    depth--;
                    break;

                case XmlPullParser.START_TAG:
                    depth++;
                    break;
            }//switch
        }//while
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("PullParsing34", e.getMessage());
    }//catch
    catch (IOException e) 
    {
        Log.e("PullParsing35", e.getMessage());
    }//catch
}//skip

private String readText(XmlPullParser parser) 
{
    String result = "";
    try 
    {
        if(parser.next() == XmlPullParser.TEXT)
        {
            result = parser.getText();
            parser.nextTag();
        }//if
    }//try 
    catch (XmlPullParserException e) 
    {
        Log.e("Pull Parsing36", e.getMessage());
    }//catch 
    catch (IOException e) 
    {
        Log.e("Pull Parsing37", e.getMessage());
    }//catch

    return result;
}

public static class Entry
{
    String nametitle;
    String name;
    String email;
    String mobile;
    String website;
    String jobtitle;
    String company;
    String businessphone;
    String homephone;
    String skype;
    String faxno;
    String businessaddress;
    String homeaddress;
    String otheraddress;

    public Entry(String nametitle, String name, String email, String mobile, String website,
            String jobtitle, String company, String businessphone, String homephone, 
            String skype, String faxno, String businessaddress, String homeaddress, 
            String otheraddress)
    {
        this.nametitle = nametitle;
        this.name = name;
        this.email = email;
        this.mobile = mobile;
        this.website = website;
        this.jobtitle = jobtitle;
        this.company = company;
        this.businessphone = businessphone;
        this.homephone = homephone;
        this.skype = skype;
        this.faxno = faxno;
        this.businessaddress = businessaddress;
        this.homeaddress = homeaddress;
        this.otheraddress = otheraddress;
    }//Constructor
}//Entry class
}//PullParser 
```

**XML 文件**

```
<menu>
<item>
<nametitle>Mrs</nametitle>
<name>Maria Sharapova</name>
<email>maria@yahoo.com</email>
<mobile>9871234561</mobile>
<website>www.maria.com</website>
<jobtitle>software developer</jobtitle>
<company>Lata Softwares Pvt Ltd</company>
<businessphone>07442323232</businessphone>
<homephone>07441212121</homephone>
<skype>marai.sharapova</skype>
<faxno>07443434343</faxno>
<businessaddress>d-2 dadwara kota rajasthan</businessaddress>
<homeaddress>d-2 dadwara kota rajasthan</homeaddress>
<otheraddress>d-2 dadwara kota rajasthan</otheraddress>
</item>

<item>
<nametitle>Ms</nametitle>
<name>Sareena Williams</name>
<email>sareena@yahoo.com</email>
<mobile>9871212121</mobile>
<website>www.sareena.com</website>
<jobtitle>tenis player</jobtitle>
<company>Tenis organisation Pvt Ltd</company>
<businessphone>074423236565</businessphone>
<homephone>07441212178</homephone>
<skype>sareena.williams</skype>
<faxno>07443434387</faxno>
<businessaddress>d-3 dadwara kota rajasthan</businessaddress>
<homeaddress>d-3 dadwara kota rajasthan</homeaddress>
<otheraddress>d-3 dadwara kota rajasthan</otheraddress>
</item>
</menu> 
```

我在 Dropbox 中上传的这个 XML 文件，其 URL 如下：

```
https://dl.dropbox.com/u/85981610/user.xml 
```

logcat详细信息如下：

```
07-04 13:43:58.869: D/PARSED DATA(273): Mrs
07-04 13:43:58.869: D/PARSED DATA(273): Maria Sharapova
07-04 13:43:58.890: D/AndroidRuntime(273): Shutting down VM
07-04 13:43:58.890: W/dalvikvm(273): threadid=1: thread exiting with uncaught exception   (group=0x4001d800)
07-04 13:43:58.969: E/AndroidRuntime(273): FATAL EXCEPTION: main
07-04 13:43:58.969: E/AndroidRuntime(273): java.lang.NullPointerException: println  needs a message
07-04 13:43:58.969: E/AndroidRuntime(273):  at android.util.Log.println_native(Native Method)
07-04 13:43:58.969: E/AndroidRuntime(273):  at android.util.Log.d(Log.java:122)
07-04 13:43:58.969: E/AndroidRuntime(273):  at    com.android.pullparsing.PullParser.readEntry(PullParser.java:188)
07-04 13:43:58.969: E/AndroidRuntime(273):  at com.android.pullparsing.PullParser.readFeed(PullParser.java:76)
07-04 13:43:58.969: E/AndroidRuntime(273):  at com.android.pullparsing.PullParser.parse(PullParser.java:53)
07-04 13:43:58.969: E/AndroidRuntime(273):  at   com.android.pullparsing.PullParsingActivity$1.onClick(PullParsingActivity.java:37)
07-04 13:43:58.969: E/AndroidRuntime(273):  at android.view.View.performClick(View.java:2408)
07-04 13:43:58.969: E/AndroidRuntime(273):  at android.view.View$PerformClick.run(View.java:8816)
07-04 13:43:58.969: E/AndroidRuntime(273):  at android.os.Handler.handleCallback(Handler.java:587)
07-04 13:43:58.969: E/AndroidRuntime(273):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-04 13:43:58.969: E/AndroidRuntime(273):  at android.os.Looper.loop(Looper.java:123)
07-04 13:43:58.969: E/AndroidRuntime(273):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-04 13:43:58.969: E/AndroidRuntime(273):  at java.lang.reflect.Method.invokeNative(Native Method)
07-04 13:43:58.969: E/AndroidRuntime(273):  at java.lang.reflect.Method.invoke(Method.java:521)
07-04 13:43:58.969: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-04 13:43:58.969: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-04 13:43:58.969: E/AndroidRuntime(273):  at dalvik.system.NativeStart.main(Native  Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:19:43.180

我的应用程序运行良好。我使用 KXML Parser 而不是 Expat Pull 解析器。

# c# - 通过 LINQ 将 XML 数据插入数据库时 出错

> ID：11306055
> 
> 赞同：0
> 
> 时间：2012-07-03T07:08:04.627
> 
> 标签：c#, .net, xml, database, linq

我想使用 LINQ 在数据库中插入一些字段。这些字段之一包含 XML 数据 (GPX)。

当我运行以下代码时：

```
 rtlq.GpxData = new XElement(route.GpxData); 
```

我得到这个例外：

> 名称不能以`'<'`字符开头，十六进制值`0x3C`

我想说`route.GpxData`有一个类型字符串，我将此类型转换为 xml。这是我的整个代码：

```
public int Save(Route route)
{
    aspnetdbDataContext aspdb = new aspnetdbDataContext();
    RouteLinq rtlq=new RouteLinq();
    rtlq.UserId = route.UserId;
    rtlq.SourceName = route.Name;

    //I have an error here
    rtlq.GpxData = new XElement(route.GpxData);
    rtlq.CreationTime = route.Time;
    aspdb.RouteLinqs.InsertOnSubmit(rtlq);
    aspdb.SubmitChanges();

    int k1;
    System.Data.Linq.ChangeSet cs1 = aspdb.GetChangeSet();
    k1=cs1.Inserts.Count();

    TrackPointlinq trlq = new TrackPointlinq();
    foreach (var trackpoint in route.TrackPoints)
    {
        trlq.RouteFK=route.Id;
        trlq.TrackTime=trackpoint.Time;
        trlq.Latitude=(float) trackpoint.Latitude;
        trlq.Longitude=(float)trackpoint.Longitude;
        trlq.Elevation=trackpoint.Elevation;
    }

    aspdb.TrackPointlinqs.InsertOnSubmit(trlq);
    aspdb.SubmitChanges();

    int k2;
    System.Data.Linq.ChangeSet cs2 = aspdb.GetChangeSet();
    k2 = cs2.Inserts.Count();

    if ((k1 == 0) && (k2 == 0))
    {
        return 1;
    }
    else
        return 0;
} 
```

你能帮我解决这个问题吗？

**编辑** XML 文件示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<gpx xmlns="http://www.topografix.com/GPX/1/1" xmlns:gpsies="http://www.gpsies.com/GPX/1/0" creator="GPSies http://www.gpsies.com - GpsiesTrack" version="1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd http://www.gpsies.com/GPX/1/0 http://www.gpsies.com/gpsies.xsd">
  <metadata>
    <name>GpsiesTrack</name>
    <link href="http://www.gpsies.com/">
      <text>GpsiesTrack on GPSies.com</text>
    </link>
    <time>2012-06-26T18:58:39Z</time>
  </metadata>
  <trk>
    <name>GpsiesTrack on GPSies.com</name>
    <trkseg>
      <trkpt lat="50.81482934" lon="12.90653228">
        <ele>305.00000</ele>
        <time>2012-05-01T00:00:00Z</time>
      </trkpt>
      <trkpt lat="50.85364209" lon="12.92404174">
        <ele>297.00000</ele>
        <time>2012-05-01T00:15:27Z</time>
      </trkpt>
    </trkseg>
  </trk>
</gpx> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:14:25.233

`route.GpxData`大概是 XML 中的字符串。接受字符串名称的`XElement`构造函数将寻求将其转换为表示 XML 元素的对象。XML 元素 NAME 不能包含`<`字符，尽管 `<' 可以在内容中（如果正确转义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:40:10.840

尝试

rtlq.GpxData = XElement.Parse(route.GpxData);

# javascript - 事件侦听器 - 相当于 Firefox？

> ID：11306056
> 
> 赞同：10
> 
> 时间：2012-07-03T07:08:07.623
> 
> 标签：javascript, firefox, google-chrome, firebug, chromium

我注意到 Chromium 在检查器/调试器中有一个有趣的功能：事件监听器。![铬检查员](../Images/fdaa591abded3367c9a2f69a01c9d81e.png)

我还没有在 Firefox Firebug 中找到等效的功能。几年前我看到一个问题，说 Firefox 没有等效的功能，但我想知道是否有任何更新...... Firebug 是否有一个列出听众的插件？或者，Firefox 的实现是否有一些不实用的地方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-10T12:41:53.673

现在，这个功能在 firefox 检查器中是原生的，你不再需要 firebug 了 :) [http://flailingmonkey.com/view-dom-events-in-firefox-developer-tools/](http://flailingmonkey.com/view-dom-events-in-firefox-developer-tools/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T00:27:59.807

Eventbug[是](http://getfirebug.com/wiki/index.php/Firebug_Extensions#Eventbug)Firebug 的扩展。

此外，由于[Firebug 1.12 beta 1](https://blog.getfirebug.com/2013/06/28/firebug-1-12-beta-1/)，您可以`getEventListeners(element)`在命令行中输入。但是，这需要指定要从中检索事件侦听器的确切元素。

# mysql - 每个用户只使用一张表就有不同的“结构”

> ID：11306060
> 
> 赞同：0
> 
> 时间：2012-07-03T07:08:21.243
> 
> 标签：mysql

我正在尝试这样做：

每个用户都可以选择字段（如 MySQL 上的结构），这些字段可以处理它们各自的值，就像在数据库中做数据库一样。
但是我怎么能用一张桌子来做呢？
（不是在谈论用户帐户等，我应该能够使用指向他自己的“结构”的指针）

做一些类似的事情： varchar Key where register some like "Name:asd" where PHP explode : 获取各自的结构（'name ' 在这种情况下）和各自的值？('asd') 使用 BLOB？有人可以帮我开灯吗？我不知道如何做一些比我目前的解释更好的事情......

我知道我的文字很混乱，对任何糟糕的英语感到抱歉。

编辑：
另外，他们可以添加多个键/“结构”，其中接受新值
并且他们无法看到数据库或表，他们仍然是普通用户
我的服务器不支持 Postogre

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:14:02.670

在我看来，您应该创建两个表。

1.  与用户信息
2.  有 3 个字段（用户 ID、键和值）

每个用户在第一个表中有 1 条记录。每个用户在第二个表中可以有 0 条或更多条记录。这将确保您仍然可以搜索数据，并且用户可以在需要时轻松添加更多键/值对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:21:16.303

不要开始在数据库中构建数据库。在这种情况下，由于用户自己创建字段，因此我理解的字段之间没有关系？在这种情况下，看看 NoSQL 数据库是有意义的，因为它们似乎非常适合这种情况。

要检查的另一件事是： [http ://www.postgresql.org/docs/8.4/static/hstore.html](http://www.postgresql.org/docs/8.4/static/hstore.html)

不要尝试构建表，例如：记录、字段、字段类型等。这是一种不好的做法，不应该被需要。

为了更具体地回答您的愿望，我们需要更多关于用户存储的数据的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:35:29.847

虽然我认为这个问题的合理答案是 PeeHaa 给出的答案，但如果您真的希望数据适合一个表，您可以尝试在其中一个字段中保存一个序列化的 PHP 数组。查看[序列化](http://php.net/manual/en/function.serialize.php)和[反序列化](http://www.php.net/manual/en/function.unserialize.php)

> 生成值的可存储表示
> 
> 这对于在不丢失类型和结构的情况下存储或传递 PHP 值很有用。

不鼓励这种方法，因为它根本不可扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:37:22.330

希望您也使用编程语言来获取数据并呈现它们。

您可以拥有一个具有 varchar 字段的表。然后将字段结构的序列化数据及其值存储在该字段中。当您想要获取结构时，查询数据并反序列化该 varchar 字段数据。

据我所知，每种编程语言都支持序列化和反序列化。

编辑：这不是一个可扩展的选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T07:14:49.317

使用带有键值对的表。所以三列：

*   用户身份
*   键（“名称”）
*   值（“asd”）

*在user id*上添加索引，以便您可以轻松查询用户的属性。如果您想查询具有相同属性的所有用户，则可以在*key*和/或*value*上添加第二个索引。

# excel - 通过在工作表上设计的自定义按钮，使用宏 vba 将一个 xls 的所有工作表复制到另一个 xls 文件

> ID：11306061
> 
> 赞同：2
> 
> 时间：2012-07-03T07:08:22.507
> 
> 标签：excel, ms-office, xls

我有一个 xls 文件，它包含 15 张数据，我想将所有数据复制到另一个 xls 文件中。我有很多这样的文件，所以我想使用宏 vba 编码对其进行自定义。我想在第一张工作表上设计按钮，该按钮运行宏代码并将我的所有工作表复制到另一个文件。这可能吗？我不知道更多关于 ms office.Would 任何人分享我的指导方针，链接或任何相关数据。谢谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:04:27.313

这假设这两个文件都是打开的并从 dept.xls 运行，因为这似乎是您要保留的文件。

```
Sub emp_to_dept()

Dim wks As Worksheet
    Windows("Employees.xls").Activate
    For Each wks In ActiveWorkbook.Worksheets
    wks.Copy After:=Workbooks("Dept.xls").Sheets(1)
    Next
    Set wks = Nothing

End Sub 
```

# php - 平衡支付 php：致命错误：调用未定义的方法 stdClass::createCard()

> ID：11306064
> 
> 赞同：1
> 
> 时间：2012-07-03T07:08:31.337
> 
> 标签：php, fatal-error, balanced-payments

我已经安装了[balance-php](https://github.com/balanced/balanced-php)库，我正在通过[教程创建一个买家](http://balancedpayments.com/docs/php/buyer)。

我在尝试创建卡时收到以下错误：

```
Fatal error: Call to undefined method stdClass::createCard(); 
```

我使用的是 0.3 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:28:06.603

这是balanced-php 库0.3 版中的一个错误。

问题是 Balanced 库中的 bootstrap.php 文件在引用库时没有正确注册类，我们已经发布了 0.5 版来解决这个问题。

升级到库的 0.5 版将解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:02:56.700

[因此，您的网站上提供的https://github.com/balanced/balanced-php](https://github.com/balanced/balanced-php)上的文档已过时？

我很困惑，您是说您按照说明提供给我们的文档不正确且已过时吗？

您是否介意向我提供正确文档的更新链接，因为我们已经按照您的说明进行了一周的操作，正如您网站上记录的那样...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T20:20:23.263

我为balancedpayment.com 集成创建了一个类。它适用于 cakephp 。但是你可以在任何地方使用它。

```
https://github.com/mohsinkabir/balancedpayments.com-integration-using-cakephp 
```

# java - java调用mysql c3p0函数

> ID：11306068
> 
> 赞同：1
> 
> 时间：2012-07-03T07:09:09.917
> 
> 标签：java, mysql, c3p0

我有一个要查询的 java 库`mysql database`，返回`ResultSet`另一个 Java 函数。由于mysql超时问题，我曾经`c3p0 pool`实现查询。

```
cpds = new ComboPooledDataSource();
cpds.setDriverClass("com.mysql.jdbc.Driver");
cpds.setJdbcUrl(url);
cpds.setUser(user);
cpds.setPassword(passwd);
cpds.setMaxPoolSize(maxPoolSize);
cpds.setMinPoolSize(minPoolSize);
cpds.setAcquireIncrement(20);

public ResultSet fetch() {
    PreparedStatement pst = null;
    ResultSet rs = null;
    String query = null;
    Connection conn = null;

    try {

        conn = cpds.getConnection();

        query = "...";
        pst = conn.prepareStatement(query);
        rs = pst.executeQuery();

    } catch (SQLException ex)  {
        Logger lgr = Logger.getLogger(Query.class.getName());                       
        lgr.log(Level.SEVERE, ex.getMessage(), ex);
    }finally {
        try {
            if(conn != null) {
                conn.close();
            }
        } catch (SQLException ex) {
            Logger lgr = Logger.getLogger(Query.class.getName());
            lgr.log(Level.SEVERE, ex.getMessage(), ex);
        }   
    }   

    return rs;
  }       
} 
```

我收到了这个错误

```
 SEVERE: Operation not allowed after ResultSet closed java.sql.SQLException: Operation not allowed after ResultSet closed 
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1075)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:929)
    at com.mysql.jdbc.ResultSetImpl.checkClosed(ResultSetImpl.java:795)
    at com.mysql.jdbc.ResultSetImpl.next(ResultSetImpl.java:7146)
    at com.mchange.v2.c3p0.impl.NewProxyResultSet.next(NewProxyResultSet.java:622) 
```

原因很明显，但我在想什么是调用 Mysql 查询并在函数中获取结果的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:56:29.847

在 finally 子句中，连接在方法返回之前关闭。

```
}finally {
    try {
        if(conn != null) {
            conn.close();
        }
    } catch (SQLException ex) {
        Logger lgr = Logger.getLogger(Query.class.getName());
        lgr.log(Level.SEVERE, ex.getMessage(), ex);
    }   
} 
```

此 Connection 是由 c3p0 管理的 PooledConnection。close() 方法只是将连接返回到池，而不关闭它。在连接返回池之前清理语句，以防止资源泄漏和池损坏。

当 Statements 关闭时，其当前的 ResultSet 对象（如果存在）也将关闭。[在此处](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#close%28%29)检查 java 7 API 语句 close() 方法

因此，当 fetch() 返回时 ResultSet 被关闭。

**建议：**

这是 java JDBC 编程中常见的解决问题。

第一个选项，将*fetch()*更改为作为模板方法运行的代码

```
public ResultSet fetch(ResultSetIterator rsIterator ) {
    PreparedStatement pst = null;
    ResultSet rs = null;
    String query = null;
    Connection conn = null;

    try {

        conn = cpds.getConnection();

        query = "select * from tb_user";
        pst = conn.prepareStatement(query);
        rs = pst.executeQuery();

        rsIterator.iterate(rs);

    } catch (SQLException ex)  {
        Logger lgr = Logger.getLogger(Query.class.getName());                       
        lgr.log(Level.SEVERE, ex.getMessage(), ex);
    }finally {
        try {
            if(conn != null) {
                conn.close();
            }
        } catch (SQLException ex) {
            Logger lgr = Logger.getLogger(Query.class.getName());
            lgr.log(Level.SEVERE, ex.getMessage(), ex);
        }   
    }   

    return rs;
} 
```

*ResultSetIterator*有处理 ResultSet 的代码

第二种选择，使用已经实现的工具，例如[Commons DbUtils](http://commons.apache.org/dbutils/examples.html)，点击链接查看示例

其他选项，使用 ER 映射工具、JPA、休眠等...抽象连接句柄

最后，为了解决连接池的超时问题和测试，使用[DBCP](http://commons.apache.org/dbcp/)代替c3p0，一个更健壮的解决方案

```
private static DataSource setupDataSource() {
    BasicDataSource ds = new BasicDataSource();
    ds.setDriverClassName(getDriver());
    ds.setUsername(getUser());
    ds.setPassword(getPassword());
    ds.setUrl(getConnectionString());

    ds.setDefaultAutoCommit(false);
    ds.setInitialSize(4);
    ds.setMaxActive(60);
    ds.setMaxIdle(10);

    ds.setValidationQuery("/* ping */ SELECT 1");//config to validate against mysql
    ds.setValidationQueryTimeout(3);
    ds.setTestOnBorrow(true);
    ds.setTestOnReturn(true);

    return ds;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:42:56.263

谢谢大家的建议。我有一些想法和顾虑：

1）在上层函数中运行ResultSet rs.close()。但是我不确定连接资源是否被释放。释放连接资源非常重要。

2) 创建另一个Object List 来临时保存ResultSet 结构，并将其返回给上层函数。我担心的是成本，因为我需要两次创建/释放临时资源。这是大型查询的问题。

3) 创建一个伪查询函数“SELECT 1”，并在上层函数中运行特定时间（例如，在触发 mysql wait_timeout 之前，如每 20 分钟一次）。这将使用 mysql timeout 来关闭连接。这是一种浪费mysql资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:43:59.163

错误堆栈说

```
SEVERE: Operation not allowed after ResultSet closed java.sql.SQLException: 
  Operation not allowed after ResultSet closed 
```

抛出此错误是因为您尝试使用返回的 ResultSet 对象实例，
该实例实际上是在数据库连接关闭请求期间*释放的。*因此，您不能更有建设性地使用返回的 ResultSet 实例。

文档说***[`con.close()`](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#close%28%29)***“*立即释放此 Connection 对象的数据库和 JDBC 资源，而不是等待它们自动释放。* ”。这里的*JDBC 资源*是指使用正在关闭的连接对象创建的所有 Statement 对象、ResultSet 对象等。

**建议的解决方案**：
您应该定义一个`ResultDataObject`类或一些有意义的东西，并在方法中循环结果集对象时填写其实例列表`fetch()`。示例代码片段如下所示。

```
public List<ResultDataObject> fetch() {  
    List<ResultDataObject> list = null; // new ArrayList<ResultDataObject>( 24 );  
    // ...  
    rs = pst.executeQuery();  

    // now prepare the list with results filled and return  
    if ( list == null ) list = new ArrayList<ResultDataObject>( 24 );  

    // now read from result set  
    while ( rs.next() ) {  
        ResultDataObject resultData = new ResultDataObject(); // or something relevant  

        // use the following type methods to read from rs and fill result object  
        resultData.setXXX( rs.getXXX( ... ) );
        // ...

        list.add( resultData );
    } // while rs  

    // do something if required before return
    // ...

    return list;
} // fetch() 
```

# atk4 - atk V4.2.1 工作示例 sha256/salt

> ID：11306070
> 
> 赞同：0
> 
> 时间：2012-07-03T07:09:21.400
> 
> 标签：atk4

atk 的新手并且进展顺利，直到我开始使用 sha256/salt 实现 UserAuth。我可以注册，它会创建并存储加密密码，但我无法登录。它无需加密即可工作。

有没有人成功实施 sha256/salt 密码加密？

该网站上的示例在这方面似乎已经过时，并且一些与此相关的文档不再存在。我找不到任何相关的例子，所以我觉得有点困难。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:18:02.380

我现在在 4.2.1 中使用以下代码，它工作正常......

```
$auth=$this->add('Auth_Basic');
$auth->usePasswordEncryption('sha256/salt');
$auth->setModel('User','user','pwd');
$auth->check(); 
```

您必须创建一个包含用户名/密码等的模型（此处为*用户）...*

# javascript - 整数比较

> ID：11306071
> 
> 赞同：4
> 
> 时间：2012-07-03T07:09:23.863
> 
> 标签：javascript

我需要比较两个可能超出整数范围限制的整数。我如何在javascript中得到这个。最初，我将值作为字符串，执行 parseInt 并比较它们。

```
var test = document.getElementById("test").value;
var actual = document.getElementById("actual").value;
if ( parseInt(test) == parseInt(actual)){
  return false;  
} 
```

有什么选项可以使用 long 吗？另外，哪个最好使用 parseInt 或 valueOf ？

任何建议表示赞赏，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:11:26.173

你最好指定基数。前任。`parseInt('08')`不会。`0`_`8`

```
if (parseInt(test, 10) === parseInt(actual, 10)) { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T07:11:41.443

将它们保留在 String 中并进行比较（在您清理了前导和尾随空格的字符串以及您认为可以安全删除而不更改数字含义的其他字符之后）。

Javascript 中的数字可以达到 53 位精度。检查您的号码是否在范围内。

由于输入应该是整数，你可以严格，只允许输入只匹配正则表达式：

```
/\s*0*([1-9]\d*|0)\s*/ 
```

（任意前导空格、任意数量的前导 0、有意义的数字序列或单个 0、任意尾随空格）

该号码可以从第一个捕获组中提取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:26:35.660

假设整数并且您已经验证了您不想参与比较的非数字字符，您可以清理一些前导/尾随的东西，然后只比较长度，如果长度相等，然后执行普通的 ascii 比较，这将适用于任意长度的数字：

```
function mTrim(val) {
    var temp = val.replace(/^[\s0]+/, "").replace(/\s+$/, "");
    if (!temp) {
        temp = "0";
    }
    return(temp);
}

var test = mTrim(document.getElementById("test").value);
var actual = mTrim(document.getElementById("actual").value);

if (test.length > actual.length) {
    // test is greater than actual
} else if (test.length < actual.length) {
    // test is less than actual
} else {
    // do a plain ascii comparison of test and actual
    if (test == actual) {
        // values are the same
    } else if (test > ascii) {
        // test is greater than actual
    } else {
        // test is less than actual
    }
} 
```

# ruby-on-rails - Rails & Rolify：在创建时添加默认角色？

> ID：11306072
> 
> 赞同：3
> 
> 时间：2012-07-03T07:09:28.657
> 
> 标签：ruby-on-rails, authorization, roles

目前我正在使用**Rolify & CanCan**来管理我的 Rails 3 应用程序中的角色和能力。我的问题是：如何让用户在创建时默认拥有一个角色？例如，如果我有一个“用户”角色，¿我怎样才能让在我的应用中注册的所有用户都默认拥有一个**用户角色？**我的**Ability.rb**有这个代码：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.has_role? :admin
      can :manage, :all
    elsif user.has_role? :user
      can :update, User, :id => user.id
    end
  end
end 
```

我的**用户模型**有这个：

```
class User < ActiveRecord::Base
  rolify
  authenticates_with_sorcery!
  attr_accessible :username, :email, :password, :password_confirmation

  validates_confirmation_of :password
  validates_presence_of :password, :on => :create
  validates_presence_of :username
  validates_uniqueness_of :username
  validates_presence_of :email
  validates_uniqueness_of :email
end 
```

**榜样**这一个：

```
class Role < ActiveRecord::Base
  has_and_belongs_to_many :users, :join_table => :users_roles
  belongs_to :resource, :polymorphic => true
end 
```

从**UsersController**我们有：

```
def new
  @user = User.new
end

def create
  @user = User.new(params[:user])

  if @user.save
    redirect_to users_path, :notice => "Tu usuario se ha guardado"
  else
    render "new"
  end
end 
```

最后，**Rolify Migration**就是这个：

```
class RolifyCreateRoles < ActiveRecord::Migration
  def change
    create_table(:roles) do |t|
      t.string :name
      t.references :resource, :polymorphic => true

      t.timestamps
    end

    create_table(:users_roles, :id => false) do |t|
      t.references :user
      t.references :role
    end

    add_index(:roles, :name)
    add_index(:roles, [ :name, :resource_type, :resource_id ])
    add_index(:users_roles, [ :user_id, :role_id ])
  end
end 
```

**现在，我可以使用以下命令从rails 控制台**手动分配角色：

```
1 User.all
2 User.find(id)
3 User.add_role(:role) 
```

但是，如何在创建*每个用户*时自动分配默认角色？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-03T07:49:54.593

您可以在创建用户后使用[活动记录回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html#available-callbacks)来分配角色。就像是

```
class User < ActiveRecord::Base
  after_create :assign_default_role

  def assign_default_role
    add_role(:role)
  end
end 
```

请注意，还有一个`after_save`回调，但每次保存用户时都会调用它。因此，如果您编辑用户并保存它会尝试再次添加角色。这就是我改用`after_create`回调的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-09T04:14:39.223

最好在 add_role 之前检查是否分配了角色。所以我更喜欢：

```
class User < ActiveRecord::Base
  after_create :assign_default_role

  def assign_default_role
    add_role(:normal) if self.roles.blank?
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T08:01:30.783

忘了它，只需要添加：

```
@user.add_role(:user) 
```

在我的创建操作中，就在该`@user = User.new(params[:user])`行之后。

我自己想出来的......我还在学习:)

谢谢！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-05T05:06:34.620

```
after_create :default_role

private
  def default_role
    self.roles << Role.find_by_name("user")
    self.save
  end 
```

# image - 如何从 R 中的三个矩阵创建 RGB 图像？

> ID：11306075
> 
> 赞同：9
> 
> 时间：2012-07-03T07:09:47.290
> 
> 标签：image, r, graphics, rgb

我想从 R 中的三个 2D 矩阵创建一个 RGB 图像。我知道[matlab](https://stackoverflow.com/questions/5341304/how-to-display-an-image-represented-by-three-matrices-in-matlab)有一个类似的帖子，但是我无法将这个问题转化为 R 世界。

我已经尝试了不同的软件包，例如用于创建 3D 数组的 abind，尝试使用 writeJPEG 将其转换为 JPEG。但这没有用-

很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-03T07:28:54.363

尝试`?rgb`，

```
r <- matrix(runif(9, 0, 1), 3)
g <- matrix(runif(9, 0, 1), 3)
b <- matrix(runif(9, 0, 1), 3)

col <- rgb(r, g, b)
dim(col) <- dim(r)

library(grid)
grid.raster(col, interpolate=FALSE) 
```

# jquery - 如何获取动态生成的元素？

> ID：11306086
> 
> 赞同：0
> 
> 时间：2012-07-03T07:10:35.980
> 
> 标签：jquery, kendo-ui

我需要访问在 jQuery 中动态生成的元素。

我想要做的是隐藏元素生成的第一个和最后一个`kendoUI grid`元素。

```
$(".myItem").first().hide();
$(".myItem").last().hide(); 
```

所以我知道我是否有一些事件，例如`click`我可以使用的生成元素`.on()`或`.live()`. 但在这种情况下，我没有任何事件。

我该如何解决？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:14:21.323

如果你有一个已知的结构，那么你可以用一个 ID 获取最近的东西并按照自己的方式找到它。像`parent()`, `nearest()`, 和这样的方法`children()`可以让你移动到主网格容器 div ，然后你可以使用`:first`和`:last`伪元素。

在创建行后，您可以使用此处概述的数据绑定事件来挂钩它：

*   [http://www.kendoui.c​​om/documentation/ui-widgets/grid/events.aspx](http://www.kendoui.com/documentation/ui-widgets/grid/events.aspx)

例子：

```
$("#grid").kendoGrid({
     dataBound: function(e) {
         // use jquery as outlined above to find required elements
     }
 }); 
```

# c# - jQuery 中的 ConfigurationManager.AppSettings

> ID：11306091
> 
> 赞同：3
> 
> 时间：2012-07-03T07:11:13.010
> 
> 标签：c#, jquery, asp.net-mvc-3

我正在使用 mvc3 c#。配置管理器中的 appsettings 在控制器中运行良好。但我想在我的 jquery 中使用这些常量。

有没有办法在 jQuery 中使用 ConfigurationManager.AppSettings？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T07:17:02.430

希望这对你有用：

```
 var appSetting = '@(System.Configuration.ConfigurationManager.AppSettings["Test"].ToString())' 
```

`Test`您要访问的密钥在哪里

# c++ - 为递归函数实现 DP

> ID：11306098
> 
> 赞同：1
> 
> 时间：2012-07-03T07:11:48.480
> 
> 标签：c++, c, algorithm, dynamic-programming, memoization

我有以下递归函数：

```
typedef unsigned long long ull;

ull calc(ull b, ull e)
{
  if (!b) return e;
  if (!e) return b;
  return calc(b - 1, e - 1) + calc(b - 1, e) - calc(b, e - 1);
} 
```

我想用动态编程（即使用存储）来实现它。我曾尝试使用 a`map<pair<ull, ull>, ull>`但它也太慢了。我也无法使用数组来实现它`O(1)`。

我想找到一个解决方案，以便此函数快速解决大`b, e`s。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T07:20:36.793

制作一个表格 b/e 并逐个单元格地填充它。这是空间和时间复杂度为 O(MaxB*MaxE) 的 DP。

Ante 在评论中的提议可能会降低空间复杂性 - 仅存储两个需要的行或列。

```
0 1 2 3 4 5
1 0 3 . . .
2 . . . . .
3 . . . . .
4 . . . . . 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T07:25:06.010

如果自下而上的表示是您想要的，那么这会很好。

如 MBo 所示填写表格

这可以这样做：

```
for e from 0 to n:
  DP[0][e] = e
for b from 0 to n:
  DP[b][0] = b
for i from 1 to n:
   for j from 1 to n:
      DP[i][j] = DP[i-1][j-1] + DP[i-1][j] - DP[i][j-1] 
```

现在你对任何 b,e 的回答只是 DP[b][e]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T07:21:04.933

您可能想看看最近发布的关于通用自动[记忆的](http://en.wikipedia.org/wiki/Memoization)[博客](http://cpptruths.blogspot.in/2012/01/general-purpose-automatic-memoization.html)。作者讨论了各种数据结构，例如等。警告：使用大量模板代码。`std::map``std::unordered_map`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T07:21:16.853

您可以使用二维数组在 O(n^2) 中实现（假设 n 作为 b 和 e 的最大值数）。i,j 的每个当前值将取决于 i-1,j 和 i-1,j-1 和 i,j-1 处的值。确保处理 i=0、j=0 的情况。

# jsf-2 - primefaces 子表复选框未更新

> ID：11306101
> 
> 赞同：1
> 
> 时间：2012-07-03T07:11:56.370
> 
> 标签：jsf-2, datatable, primefaces

我有一个包含几列数据和一列带有复选框的数据表。检查某些复选框并随后提交整个表单时。我的 bean 中的模型已更新，我可以看到选中了哪个复选框（行）。但我不得不改变设计，现在我正在使用子表。（所以我可以对一些信息进行分组）。现在，当我提交表单时，模型没有更新。因此，当循环数据表值时，所有复选框都是错误的，而我确实在页面上检查了一些。我该如何解决这个问题？

我正在使用primefaces 3

我在 loadreports 中填写超级列表。当单击按钮时，我调用 downloadZip 并遍历超级列表以查看是否选中了复选框，然后我可以将文档添加到 zip 文件中。

这是我的豆子

```
public ArrayList<HashMap<String, Object>> getSuperList() throws MWSException {
    getLog().debug("getSuperList()");
    if (superList == null) {
        loadReports();
    }
    return superList;
}

private void loadReports() throws MWSException {
    DocumentManager dm = new DocumentManager(getWA().getMwsProxy());
    IMWSDocument[] list = dm.getDocumentHistory(getWS().getUser(), getWS().getUser().getCustomerPartnerId(),
            WebConstants.BUSINESSPARTNER, WebConstants.PUBLISHSTRATEGYENUMIDS, dateFrom, dateTo, null, null, template);

    ArrayList<Object> typeObject = new ArrayList<Object>();
    superList = new ArrayList<HashMap<String, Object>>();
    Set<Integer> setType = new HashSet<Integer>();
    HashMap<String, Object> tempType = new HashMap<String, Object>();
    String tempTypeName = "";
    Integer tempTypeId = null;

    for (IMWSDocument d : list) {

        if (type == null || d.getTypeId().equals(type)) {
            if (!setType.contains(d.getTypeId())) {

                if (setType.size() > 0) {
                    tempType = new HashMap<String, Object>();
                    tempType.put("typeName", tempTypeName);
                    tempType.put("typeId", tempTypeId);
                    tempType.put("typeObject", typeObject);
                    superList.add(tempType);
                    typeObject = new ArrayList<Object>();
                }
                setType.add((Integer) d.getTypeId());
                tempTypeName = d.getType();
                tempTypeId = d.getTypeId();

                HashMap<String, Object> temp = new HashMap<String, Object>();
                temp.put("checked", false);
                temp.put("id", d.getId());
                temp.put("name", d.getName());
                temp.put("dateCreated", d.getDateCreated());
                temp.put("fileName",
                        d.getDirPath().substring(d.getDirPath().lastIndexOf("/") + 1, d.getDirPath().length()));
                temp.put("typeId", d.getTypeId());
                temp.put("type", d.getType());
                temp.put("templateId", d.getTemplateId());
                temp.put("template", d.getTemplate());

                typeObject.add(temp);

            } else {

                HashMap<String, Object> temp = new HashMap<String, Object>();
                temp.put("checked", false);
                temp.put("id", d.getId());
                temp.put("name", d.getName());
                temp.put("dateCreated", d.getDateCreated());
                temp.put("fileName",
                        d.getDirPath().substring(d.getDirPath().lastIndexOf("/") + 1, d.getDirPath().length()));
                temp.put("typeId", d.getTypeId());
                temp.put("type", d.getType());
                temp.put("templateId", d.getTemplateId());
                temp.put("template", d.getTemplate());

                typeObject.add(temp);

            }

        }
    }
    tempType = new HashMap<String, Object>();
    tempType.put("typeName", tempTypeName);
    tempType.put("typeId", tempTypeId);
    tempType.put("typeObject", typeObject);
    superList.add(tempType);

    rowCount = superList.size();

}

public void DownloadZip(ActionEvent event) throws IOException, MWSException {

    int BUFSIZE = 4096;
    FacesContext context = FacesContext.getCurrentInstance();
    HttpServletResponse response = (HttpServletResponse) context.getExternalContext().getResponse();
    String tempPath = SiteConfig.getInstance().get("file.dir.temp");

    // RFC says 'attachment'. Unfortunately, IE has a typo so we set "attachement"
    response.setContentType("application/octet-stream");
    response.setHeader("Content-Disposition", "attachment; filename=\"reports.zip\"");

    DocumentManager dm = new DocumentManager(getWA().getMwsProxy());

    // Stream to the requester.
    byte[] buf = new byte[BUFSIZE];

    File tempdir = new File(tempPath + File.separator + getWS().getUser().getSignOn() + "_" + new Date().getTime());

    tempdir.mkdir();

    File tempFile = new File(tempdir.getPath() + File.separator + "reports_temp.zip");

    ServletOutputStream sos = response.getOutputStream();
    FileOutputStream fos = new FileOutputStream(tempFile);
    ZipOutputStream out = new ZipOutputStream(fos);
    InputStream is = new FileInputStream(tempFile);
    try {
        // Create the ZIP file
        // String outFilename = "outfile.zip";

        // Compress the files
        for (HashMap<String, Object> item : superList) {
            for (Object reportItem : ((ArrayList<Object>) item.get("typeObject"))) {
                HashMap<String, Object> report = ((HashMap<String, Object>) reportItem);
                if ((Boolean) report.get("checked")) {

//this is always false. 
.... 
```

这是jsf页面

```
<p:dataTable id="reportlisttable" var="listItem" value="#{reportList.superList}"     cellpadding="0" cellspacing="0" 
                        rowClasses="row1,row2" styleClass="data" headerClass="header" columnClasses="col" width="100%"
                        emptyMessage="#{msg.all_lists_no_records_found}" paginator="true" rows="10" rowsPerPageTemplate="5,10,20,50,100"
                        paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}  #{msg.all_lists_numberOfRowsDisplayed_label} {RowsPerPageDropdown}">               

                        <p:subTable var="report" value="#{listItem.typeObject}">  
                            <f:facet name="header">  
                  #{listItem.typeName}   
                </f:facet> 

                            <p:column id="column_select" >
                                <f:facet name="header">
                                    <h:outputText value="" />
                                </f:facet>
                                <h:selectBooleanCheckbox name="selectColumn" value="#{report.checked}" />
                            </p:column>

                    <p:column id="id" sortBy="#{report.id}">
                                <f:facet name="header">
                                    <h:outputText value="#{msg.reportlist_id}" />
                                </f:facet>
                            <h:outputText value="#{report.id}"/>
                          </p:column>

                        <p:column id="date" sortBy="#{report.dateCreated}" parser="date">
                                <f:facet name="header">
                                    <h:outputText value="#{msg.reportlist_date}" />
                                </f:facet>
                        <h:outputText value="#{report.dateCreated}">
                            <mw:convertDateTime />
                        </h:outputText>
                        </p:column>

                        <p:column id="name" sortBy="#{report.name}" >
                                <f:facet name="header">
                                    <h:outputText value="#{msg.reportlist_reportname}" />
                                </f:facet>
                        <h:outputText value="#{report.name}"/>
                        </p:column>
</p:subTable>               
                    </p:dataTable>

                    <t:div id="download">
                        <h:panelGrid columns="2" >
                            <t:graphicImage url="${path.staticRootUrl}images/arrow_compare.gif" hspace="15"/>
                            <p:commandButton value="${msg.reportlist_download}" actionListener="#{reportList.DownloadZip}" styleClass="button" ajax="false"/>
                        </h:panelGrid>
                    </t:div> 
```

# php - 30 秒超时解决方案不起作用

> ID：11306106
> 
> 赞同：2
> 
> 时间：2012-07-03T07:12:30.947
> 
> 标签：php, html, browser, timeout

我已经为我的 php 文件 30 秒超时尝试了所有可能的解决方案，但没有任何效果。我在代码中放入的新配置是否可能不会生效，并且仍然根据 Goddady 的默认 php.ini 中的配置工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:27:36.797

快速谷歌显示您无法更改 GoDaddy 共享服务器上的该设置。做不到： http: [//support.godaddy.com/groups/web-hosting/forum/topic/set-max_execution_time-and-max_input_time/](http://support.godaddy.com/groups/web-hosting/forum/topic/set-max_execution_time-and-max_input_time/)

那是两年前的事了，所以可能没有改变。虚拟化还是换个新主机？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:15:07.840

然而，托管服务提供商可能不允许覆盖某些设置或所有设置。

这就是 httpd.conf 配置指令`AllowOverride None`/`AllowOverride All`所做的。

用于`ini_get('max_execution_time')`检查尝试解决方案后的执行时间。如果它没有改变，那么很明显解决方案不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:19:22.673

您确定已将其放置在要识别的正确位置吗？如果是这样，您可以查看此链接 [http://support.godaddy.com/help/article/5647/why-isnt-my-phpini-file-taking-effect](http://support.godaddy.com/help/article/5647/why-isnt-my-phpini-file-taking-effect)

您提供的有关服务器的信息太少。如果是 linux，这里是他们所说的：

> 在 Linux 共享主机帐户上，您可以终止 Web 进程以使您的 php.ini (PHP 4) 或 php5.ini (PHP 5) 文件生效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-27T20:51:19.647

通过在托管根目录中创建一个 .user.ini 文件，我能够使其在 Godaddy 共享 Linux 帐户上运行。

我的更改通过 phpinfo() 可见

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-07T01:26:26.750

请记住，使用 Godaddy 设置您自己的自定义 php.ini 文件时，您可能会弹出时区警告消息。在这种情况下，您还必须在 php.ini 文件中定义默认时区，例如：

```
date.timezone="Europe/London" 
```

更多关于这个问题在这里：

[https://uk.godaddy.com/help/why-did-i-receive-a-timezone-error-with-my-php-website-6703](https://uk.godaddy.com/help/why-did-i-receive-a-timezone-error-with-my-php-website-6703)

# java - 将 jsonobj 转换为 jsonarray 时出现 JSONException

> ID：11306111
> 
> 赞同：0
> 
> 时间：2012-07-03T07:12:46.750
> 
> 标签：java, json, jsonexception

我在使用 JSONArray.fromObject(jsonObj) 时遇到 JSONException。我无法弄清楚这个异常背后的原因。有人可以提供某种关于为什么会发生此错误的输入吗？

```
 net.sf.json.JSONException: java.lang.reflect.InvocationTargetException
at net.sf.json.JSONObject._fromBean(JSONObject.java:987)
at net.sf.json.JSONObject.fromObject(JSONObject.java:168)
at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:265)
at net.sf.json.JSONObject._processValue(JSONObject.java:2808)
at net.sf.json.JSONObject.processValue(JSONObject.java:2874)
at net.sf.json.JSONObject.setInternal(JSONObject.java:2889)
at net.sf.json.JSONObject.setValue(JSONObject.java:1577)
at net.sf.json.JSONObject._fromMap(JSONObject.java:1340)
at net.sf.json.JSONObject.fromObject(JSONObject.java:159)
at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:265)
at net.sf.json.JSONArray._processValue(JSONArray.java:2514)
at net.sf.json.JSONArray.processValue(JSONArray.java:2539)
at net.sf.json.JSONArray.addValue(JSONArray.java:2526)
at net.sf.json.JSONArray._fromCollection(JSONArray.java:1057)
at net.sf.json.JSONArray.fromObject(JSONArray.java:123)
at net.sf.json.JSONArray.fromObject(JSONArray.java:105)
at net.sf.json.JSONArray$fromObject.call(Unknown Source) 
```

代码如下：

```
RESTClient restClient = new RESTClient(uri)
        Map<String, String> args = new HashMap<String,String>();
        args.put("responseContentType","ContentType.JSON");
        response = restClient.get(args)
        Object jsonObj = response?.getData()
        JSONArray jsonResp = JSONArray.fromObject(jsonObj) 
```

我从 REST 服务得到的响应如下：

```
[{"contract":"/api/v1/contracts/3","draw":"/api/v1/draws/5","drawName":null,"drawNumber":1,"id":5,"periodFrom":"2007-01-10","periodTo":"2007-02-10"}] 
```

# java - 从生成的 xjc 的 getter 方法中删除惰性初始化器

> ID：11306113
> 
> 赞同：1
> 
> 时间：2012-07-03T07:12:55.483
> 
> 标签：java, jaxb, xjc

我尝试使用 xjc 生成我的 POJO，并且对于我拥有的一个元素，`maxOccurs="unbounded"`这将导致在 POJO 中创建一个列表：

```
public class Customer{
    private List<String> names;
    ...
    public List<String> getNames(){
        if (names == null){
            names = new ArrayList<String>();
        }
        return this.names;
    }
} 
```

但我需要删除空检查以获得类似：

```
public class Customer{
    private List<String> names;
    ...
    public List<String> getNames(){
        return this.names;
    }
} 
```

那么也许在这种情况下我需要一个setter，但它不是默认生成的。任何想法？

# icons - IExpress - 使用自定义图标创建 exe

> ID：11306114
> 
> 赞同：3
> 
> 时间：2012-07-03T07:13:13.753
> 
> 标签：icons, exe, iexpress

在 IExpress 的帮助下，我从一个 bat 文件创建了一个 exe，并想为该 exe 设置一个自定义图标。这可能吗？

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T04:22:31.403

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:18:26.547

作为一种解决方法，您可以创建 exe 文件的快捷方式，然后为其设置自定义图标。

# iphone - 下采样音频 44100Kz 到 8000Kz

> ID：11306119
> 
> 赞同：1
> 
> 时间：2012-07-03T07:13:37.967
> 
> 标签：iphone, ios, cocoa-touch, avfoundation, audio-streaming

我有采样率为 44100Kz 的 AudioBufferList（也创建了 NSData），并希望将其降低到 8000Kz。因此，如果有人对下采样有任何想法，请告诉我。伟大的想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:46:28.060

您可以使用从您使用原始数据制作的字节数组中选择每 6 个字节来实现此目的，请尝试此[链接](https://stackoverflow.com/questions/11690395/my-ios-app-using-audio-units-with-an-8000-hertz-sample-rate-returns-a-distorted)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:09:46.237

我正在尝试做同样的事情。我已将其设置为 8000，但我得到了一个失真的声音。你可以在这个问题中看到我的代码来改变采样率：

[我的 iOS 应用使用 8000 赫兹采样率的音频单元返回失真的声音](https://stackoverflow.com/questions/11690395/my-ios-app-using-audio-units-with-an-8000-hertz-sample-rate-returns-a-distorted)

# debugging - “ntsd”的 !DumpHeap 命令从网上下载了什么？

> ID：11306120
> 
> 赞同：2
> 
> 时间：2012-07-03T07:13:42.280
> 
> 标签：debugging, windbg

我正在使用 sos 扩展跟踪 ntsd.exe 下的 .NET 4.0 应用程序。当我启动“！DumpHeap”命令时（正好在“.loadby sos clr”之后），我注意到有很长的延迟。我刚刚使用另一个工具跟踪了 ntsd.exe，发现它从“65.55.10.11”IP 地址下载了一些文件，总共 3.9MB。

你知道这些文件是什么吗？

PS：这似乎不会再发生......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:23:54.290

我不是一个 .NET 程序员，但我知道 C++ 的这种行为：WinDbg 正在从 Microsoft 的符号服务器下载符号（您提到的 IP 确实属于 MS）。这解释了延迟，因为下载需要时间，并解释了为什么它不会再次发生 - 有一个本地缓存可以重用以前下载的符号。

在 C++ 中，符号以 .pdb 文件的形式出现。IIRC，它们也用于.NET（虽然不确定）。他们让您更好地查看调试过程的内容 - 方法名称等。

# php - zend - 从控制器连接到数据库

> ID：11306122
> 
> 赞同：1
> 
> 时间：2012-07-03T07:13:49.010
> 
> 标签：php, mysql, zend-framework, database-connection

我有以下游戏设置：

一个包含所有用户的数据库，一个包含未完成本教程的用户的数据库。在第一个数据库中，我有一个标志告诉我用户“Gogu”是否完成了教程。如果他没有，我需要连接到第二个数据库并获取一些数据。经过一番研究，我发现了这一点：[使用 Zend Framework 连接到两个不同的数据库](https://stackoverflow.com/questions/1516359/connecting-to-two-different-databases-with-zend-framework)。

问题是，由于只有 5% 的用户会在教程中进行，因此保持两个连接是没有用的，所以我只需要在控制器中进行连接，获取我需要的内容并关闭连接。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:21:19.550

您不必担心 2 个连接，因为 Zend_Db “延迟加载”连接。从采埃孚手册：

> 创建 Adapter 类的实例不会立即连接到 RDBMS 服务器。Adapter 保存连接参数，并在您第一次需要执行查询时按需进行实际连接。这确保了创建 Adapter 对象既快速又便宜。即使您不确定在应用程序正在服务的当前请求期间是否需要运行任何数据库查询，您也可以创建适配器的实例。

[http://framework.zend.com/manual/en/zend.db.adapter.html#zend.db.adapter.connecting.getconnection](http://framework.zend.com/manual/en/zend.db.adapter.html#zend.db.adapter.connecting.getconnection)

请注意，您提到的已[接受答案](https://stackoverflow.com/questions/1516359/connecting-to-two-different-databases-with-zend-framework)中使用的方法从引导程序调用 $db->getConnection() 。不推荐这样做，因为它会破坏延迟加载的目的。您还可以考虑 Zend_Application_Resource_Multidb，这可能是一种更优雅的方法：

[http://framework.zend.com/manual/en/zend.application.available-resources.html#zend.application.available-resources.multidb](http://framework.zend.com/manual/en/zend.application.available-resources.html#zend.application.available-resources.multidb)

# modeling - 在 GPL 中对约束建模

> ID：11306123
> 
> 赞同：0
> 
> 时间：2012-07-03T07:13:50.177
> 
> 标签：modeling, linear-programming, mathprog

我正在尝试在 GPL 中对这个约束进行建模。

![约束](../Images/a41c90e85487beac4770a45a66ac2f67.png)

据我所知，***j:d [ij] < D ^k***部分的意思是“所有满足属性 d [ij] < D ^k的'j' ”

我对它很陌生，所以我无法正确建模它。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:35:30.533

好的，这样做是这样的：

```
s.t. c3{i in N, k in K} : z[k] + sum{j in M : d[i,j] < b[k]} y[j] >= 1; 
```

在“D”的情况下使用“b”。

# c# - 使用 HTMLNode 的 foreach 循环中的 NullReferenceException 错误

> ID：11306130
> 
> 赞同：4
> 
> 时间：2012-07-03T07:14:05.547
> 
> 标签：c#, foreach, html-agility-pack, nullreferenceexception

如果“SelectNodes”返回**NULL**，我如何在下面的 foreach 循环中捕获**NullReferenceException**错误？

 **我在 stackoverflow 上进行了搜索，发现提到了可用于捕获此错误的空合并条件（?? 条件），但是，我不知道 HTMLNode 的语法是什么，或者这是否可能。

```
foreach (HtmlNode link in imagegallery.DocumentNode.SelectNodes("//a[@href]") )
            {
                //Do Something
            } 
```

你将如何为这个循环设置 NULL EXCEPTION，或者有更好的方法吗？

这是引发异常的完整代码 -

```
 private void TEST_button1_Click(object sender, EventArgs e)
    {
        //Declarations           
        HtmlWeb htmlWeb = new HtmlWeb();
        HtmlAgilityPack.HtmlDocument imagegallery;

            imagegallery = htmlWeb.Load(@"http://adamscreation.blogspot.com/search?updated-max=2007-06-27T10:03:00-07:00&amp;max-results=20&amp;start=18&amp;by-date=false");

            foreach (HtmlNode link in imagegallery.DocumentNode.SelectNodes("//a[@imageanchor=1 or contains(@href,'1600')]/@href"))
            {
               //do something
            }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T07:19:18.253

```
if(imagegallery != null && imagegallery.DocumentNode != null){
  foreach (HtmlNode link in 
    imagegallery.DocumentNode.SelectNodes("//a[@href]") 
      ?? Enumerable.Empty<HtmlNode>()) 
  {
    //do something
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:21:18.860

您可以分两步完成，在使用之前测试集合是否为 NULL：

```
if (imagegallery != null && imagegallery.DocumentNode != null)
{
    HtmlNodeCollection linkColl = imagegallery.DocumentNode.SelectNodes("//a[@href]");

    if (linkColl != NULL)
    {
        foreach (HtmlNode link in linkColl)
        {
           //Do Something
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T12:14:31.473

我这样做了好几次，所以将 Andras 的解决方案变成了一种扩展方法：

```
using HtmlAgilityPack;

namespace MyExtensions {
    public static class HtmlNodeExtensions {
        /// <summary>
        ///     Selects a list of nodes matching the HtmlAgilityPack.HtmlNode.XPath expression.
        /// </summary>
        /// <param name="htmlNode">HtmlNode class to extend.</param>
        /// <param name="xpath">The XPath expression.</param>
        /// <returns>An <see cref="HtmlNodeCollection"/> containing a collection of nodes matching the <see cref="XPath"/> expression.</returns>
        public static HtmlNodeCollection SelectNodesSafe(this HtmlNode htmlNode, string xpath) {
            // Select nodes if they exist.
            HtmlNodeCollection nodes = htmlNode.SelectNodes(xpath);

            // I no matching nodes exist, return empty collection.
            if (nodes == null) {
                return new HtmlNodeCollection(HtmlNode.CreateNode(""));
            }

            // Otherwise, return matched nodes.
            return nodes;
        }
    }
} 
```

用法：

```
using MyExtensions;

foreach (HtmlNode link in imagegallery.DocumentNode.SelectNodesSafe("//a[@href]")) {
    //Do Something
} 
```**

# iphone - 在 iTunes Connect 中将应用类型从 iPhone 更改为 Universal

> ID：11306135
> 
> 赞同：4
> 
> 时间：2012-07-03T07:14:28.590
> 
> 标签：iphone, ios, ipad, app-store-connect, ios-universal-app

我已经向 Apple 提交了一个 iPhone 应用程序。它被拒绝了，因为它没有在 iPad 上运行。我将问题追溯到 iAds 并已修复。然而，现在我发现 iAd 没有出现在 iPad 上（这已在另一个问题上报告过）。我可以通过使应用程序通用来解决所有这些问题。我的问题是，将应用程序作为 iPhone 应用程序提交后，我无法在 iTunes Connect 中将其更改为通用应用程序。我可以删除应用程序并重新提交，但我相信我必须使用不同的名称。在对当前名称进行了大量投资之后，我非常想避免这种情况。有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:43:57.537

是的，只需在 xCode 中更改设备设置并上传到 iTunes Connect，记得还要为新设备添加屏幕截图！

# php - 将数据库从服务器下载和复制到android中的资产文件夹

> ID：11306140
> 
> 赞同：1
> 
> 时间：2012-07-03T07:14:41.127
> 
> 标签：php, android, http, sqlite, download

我想从 PHP（服务器）下载 SQLITE 数据库并将其复制到 Android（客户端）的 assets 文件夹中。我没有得到所需的输出。谁能告诉我我在哪里做错或错过了什么？谢谢你的帮助。

代码：

```
 boolean downloadDatabase(Context context) {
    try {
           Log.d("test", "downloading database");
            URL url = new URL("http://10.0.2.2/SvcEnggPlanner/" + "Services.sqlite");
            URLConnection ucon = url.openConnection();
            InputStream is = ucon.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            ByteArrayBuffer baf = new ByteArrayBuffer(50);
            int current = 0;
            while ((current = bis.read()) != -1) {
                    baf.append((byte) current);
            }

           FileOutputStream fos = null;

            fos = context.openFileOutput("Services.sqlite", Context.MODE_PRIVATE); 
            if(fos!=null){
            fos.write(baf.toByteArray());
            fos.close();
           Log.d("test", "downloaded");
            }
    } catch (IOException e) {
            Log.e("test", "downloadDatabase Error: " , e);
            return false;
    }  catch (NullPointerException e) {
            Log.e("test", "downloadDatabase Error: " , e);
            return false;
    } catch (Exception e){
            Log.e("test", "downloadDatabase Error: " , e);
            return false;
    }
    return true;
}

public void copyServerDatabase() {
    SQLiteDatabase db = getReadableDatabase();
    db.close();

        OutputStream os = null;
        InputStream is = null;
       try {
                Log.d("test", "Copying DB from server version into app");
                is = context.openFileInput("Services.sqlite");
                Log.d("test", ""+is);
                os = new FileOutputStream("/data/data/com.sever/databases/");
                Log.d("test", ""+os);
                copyFile(os, is);
       } catch (Exception e) {
           Log.d("test", "Server Database was not found - did it download correctly?");                          
       } 
finally {
                try {

                        if(os != null){
                                os.close();
                        }
                        if(is != null){
                                is.close();
                        }
                } catch (IOException e) {
                        Log.d("test", "failed to close databases");
                }
       }
       Log.d("test", "Done Copying DB from server");

}

    private void copyFile(OutputStream os, InputStream is) throws IOException {
    Log.d("test", "In CopyFile");
       byte[] buffer = new byte[1024];
       int length;
       while((length = is.read(buffer))>0){
            os.write(buffer, 0, length);
       }
       os.flush();
 }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:57:16.990

您无法在`assets`Android 应用程序的文件夹中写入文件，因为它不可写。Android apk 的文件只可读不可写。

# jquery - 添加用户触摸 ipad 的图像

> ID：11306144
> 
> 赞同：1
> 
> 时间：2012-07-03T07:15:08.053
> 
> 标签：jquery, ipad, html, touch

希望有人可以帮助我，我是否可以在 ipad 上用户触摸屏幕的位置放置和成像？我正在尝试创建一个包含 5 个左右对象（图像）的小游戏（HTML5 javascript）。当用户在某个区域触摸屏幕时，第一个图像显示触摸的位置？依此类推，遍历所有图像。有道理？

这可以只用 HTML/javascript 来完成吗？首选 jquery。我必须使用画布吗？我在想我应该能够输出数组中的所有图像或其他东西，然后当用户单击“触摸”时获取这些坐标并将图像定位在那里等。

非常感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:20:04.017

来自触摸事件的事件对象应该具有鼠标位置数据。

```
$('#ident').bind('tap', function(e) {
    $('<img/>').css({
        position: 'absolute',
        top:  e.pageX,
        left: e.pageY
    });
}); 
```

当然，假设您使用的是 jQuery.mobile。

# jquery - 这个 .end() 函数有什么问题？

> ID：11306146
> 
> 赞同：2
> 
> 时间：2012-07-03T07:15:12.763
> 
> 标签：jquery

这是我的[代码](http://jsfiddle.net/TuxEq/)：

```
<a href="javascript:void(0);" id="apri-menu">
    <span>First</span>
    <span style="display:none;">Second</span>
</a>​

$('#apri-menu').click(function () {
    $(this).find('span').first().hide().end().find('span').last().show();
    $('#menu-nascosto').show();
});​ 
```

单击我要显示的第二个跨度的链接，但似乎`.end()`有些痛苦。

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:18:02.713

什么`.end()`是“将 jQuery 对象返回到其先前的选择状态”。在您的示例中，修改匹配对象的最后一个操作是`.first()`，因此`.end()`将时间倒回到之前的时间 - after `.find('span')`。所以最终结果就像你写的一样

```
$(this).find('span').find('span').last().show(); 
```

...这显然行不通，因为`<span>`您的标记中没有嵌套的 s 。

简单地摆脱第二个`.find()`就可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:19:10.023

试试下面的方法。原因正如@Jon 所说。

```
$(this).find('span:first').hide().end().find('span:last').show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:20:12.283

**工作演示** [http://jsfiddle.net/KqdJS/](http://jsfiddle.net/KqdJS/)

你可以回到父母`.end().parent()`那里然后显示它，

也可以看看上面的回复，希望对你有帮助`:)`

**代码**

```
$('#apri-menu').click(function () {
    $(this).find('span').first().hide().end().parent().find('span').last().show();

    $('#menu-nascosto').show();
});​ 
```

# java - 读取并显示传入的消息文本android

> ID：11306150
> 
> 赞同：3
> 
> 时间：2012-07-03T07:15:33.347
> 
> 标签：java, android, sms

我是 android 开发新手。我正在开发小型 android 应用程序。在我的应用程序中，我想检索新来的短信并将此消息显示给用户。我的代码看起来像

```
// HellowordActivity.java
package com.example.helloword;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.app.Activity;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.Toast;

public class HellowordActivity extends BroadcastReceiver
{
    public void onReceive(Context context, Intent intent)
    {
    Bundle myBundle = intent.getExtras();
    SmsMessage [] messages = null;
    String strMessage = "";

    if (myBundle != null)
    {
        Object [] pdus = (Object[]) myBundle.get("pdus");
        messages = new SmsMessage[pdus.length];

        for (int i = 0; i < messages.length; i++)
        {
            messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
            strMessage += "SMS From: " + messages[i].getOriginatingAddress();
            strMessage += " : ";
            strMessage += messages[i].getMessageBody().toString();
            strMessage += "\n";
        }
         // Toast.makeText(context, strMessage, Toast.LENGTH_SHORT).show();

        Intent _intent = new Intent(context, PopupActivity.class);
        _intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        _intent.putExtra("strMessage", strMessage);
        startActivity(_intent);
       }
    }

  } 
```

我在 Android Manifest.xml 中添加了接收者和权限

```
 <uses-permission android:name="android.permission.RECEIVE_SMS"/>

      <receiver android:name=".HellowordActivity" >
                <intent-filter > 
                <action android:name="android.provider.Telephony.SMS_RECEIVED"/> 
                </intent-filter> 
        </receiver> 
<activity android:name=".PopupActivity" android:launchMode="singleTop" /> 
```

我没有在布局部分做任何事情。当新消息到来时我想要什么作为输出；通过简单的弹出窗口向用户显示消息文本。需要帮助..谢谢...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T07:56:08.787

试试这个，它对我有用，你会收到一个带有收到消息内容的祝酒词：

```
package com.example.a;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.Toast;

    public class SMSBroadcastReceiver extends BroadcastReceiver {

            private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
            private static final String TAG = "SMSBroadcastReceiver";

            @Override
            public void onReceive(Context context, Intent intent) {
                 Log.i(TAG, "Intent recieved: " + intent.getAction());

                    if (intent.getAction().equals(SMS_RECEIVED)) {
                        Bundle bundle = intent.getExtras();
                        if (bundle != null) {
                            Object[] pdus = (Object[])bundle.get("pdus");
                            final SmsMessage[] messages = new SmsMessage[pdus.length];
                            for (int i = 0; i < pdus.length; i++) {
                                messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                            }
                            if (messages.length > -1) {
                                Toast.makeText(context, "Message recieved: " + messages[0].getMessageBody(), 7000).show();
                            }
                        }
                    }
               }
        } 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.a"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.RECEIVE_SMS"/>
    <uses-permission android:name="android.permission.HARDWARE_TEST"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <receiver android:name=".SMSBroadcastReceiver" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" >
                </action>
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

使用 DDMS 通过 Telnet 向您的模拟器发送短信

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:32:23.960

如果您想在接收短信时显示一个弹出窗口，那么您需要创建一个活动`android:launchMode="singleTop"`：

在 manifast 中将 Activity 声明为：

```
<activity android:name=".PopupActivity" android:launchMode="singleTop" /> 
```

从 HellowordActivity BroadcastReceiver 启动 Activity 为：

```
Intent intent = new Intent(context, PopupActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
intent .putExtra("strMessage", strMessage);
context.startActivity(intent); 
```

在你的`PopupActivity.class`：

```
public class PopupActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // The activity is being created.
        Intent intent= getIntent();//get message here
        String strMessage = intent.getStringExtra("strMessage");
        //NOW YOU CAN SHOW THIS MESSAGE IN POPUP
    }
    @Override
    protected void onStop() {
        super.onStop();
        this.finish();
        // The activity is no longer visible (it is now "stopped")
    } 
```

您还可以查看这些 Smspopup 应用程序源代码：

[android-smspopup](http://code.google.com/p/android-smspopup/source/browse/#git/SMSPopup/src/net/everythingandroid/smspopup/ui)

[短信增强器](http://code.google.com/p/sms-enhancer/source/browse/#svn/trunk/src/com/zenkun/smsenhancer)

# html - 在 IE9 中处理 activex 的 javascript 函数

> ID：11306158
> 
> 赞同：1
> 
> 时间：2012-07-03T07:16:15.650
> 
> 标签：html

我正在创建一个 HTML 页面，其中有一个文本框，如果验证为真，则单击按钮导航到下一页，否则显示警报。此功能在 Firefox 和 Chrome 中运行良好，但在 IE9 中不起作用。发生的情况是它只是导航到下一个无论验证是什么页面。如果我允许activex查看内容，那么它会在导航之前检查验证。这是一个很大的安全威胁。如果验证为假，我该如何停止此导航。有什么建议吗？

# android - android - 多个模拟器实例

> ID：11306159
> 
> 赞同：1
> 
> 时间：2012-07-03T07:16:21.600
> 
> 标签：android, eclipse, android-emulator

每当我在 Eclipse 中运行 android 应用程序时，它会在新的模拟器中运行（因此有多个模拟器实例），我尝试在“运行配置”的“目标”中进行配置，这将解决问题，直到下次重新启动 Eclipse IDE，尽管它保存了配置。有没有永久的解决方案-谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-03T15:26:30.510

如果通过android工具的模拟器工具的命令行界面启动多个模拟器实例，则可以选择目标。您可以在[http://developer.android.com/tools/help/emulator.html#startup-options](http://developer.android.com/tools/help/emulator.html#startup-options)上看到更多信息。问候。

# android - Android 付费应用在印度的可用性？

> ID：11306160
> 
> 赞同：0
> 
> 时间：2012-07-03T07:16:32.753
> 
> 标签：android, google-play

我在 Google Play 商店中没有开发者帐户，我想说明印度 Android 开发者帐户的付费应用程序可用性或印度 Android 开发者帐户中的应用程序价格？

可以帮助我从印度获得付费应用程序以发布吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:37:48.457

您可以从印度购买付费应用，但无法在市场上上传付费应用。检查此项：[商家支持的位置](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=150324)

仅供参考，您提供的页面链接本身包含：

> 付费应用程序可用性 => 付费应用程序目前仅对以下国家的用户可用。

你不能明白它想说什么。

仍然有关更多信息，请查看以下问题/答案：

1.  [印度开发者可以在安卓市场上传付费应用吗？](https://stackoverflow.com/questions/7867826/can-indian-developer-upload-paid-apps-on-android-market)
2.  [Android Market 上的 Android 发布者帐户](https://stackoverflow.com/questions/8412281/android-publisher-account-on-android-market)

# ios - UITextField：键盘出现，只要我点击它的左侧

> ID：11306161
> 
> 赞同：0
> 
> 时间：2012-07-03T07:16:33.347
> 
> 标签：ios, uitextfield

为什么呢，然后键盘出现了，就在我点击了UITextField的右边部分？

cellForRowAtIndexPath：

```
EditableCell* cell = [[EditableCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
cell.reportViewController = self;
cell.selectionStyle = UITableViewCellSelectionStyleNone;
cell.textLabel.text = item.text;

UITextField *textfield = [[UITextField alloc] initWithFrame:CGRectZero];
textfield.text = item.var.value;
textfield.tag = 1;
textfield.font = [UIFont fontWithName:@"Helvetica" size:16];
textfield.textColor = [UIColor colorWithRed:0.22 green:0.33 blue:0.53 alpha:1];
textfield.delegate = cell;

[cell.contentView addSubview:textfield];
return cell; 
```

布局子视图：

```
UITextField* textfield = (UITextField *)[self viewWithTag:1];
textfield.frame = CGRectMake(self.textLabel.frame.origin.x+self.textLabel.frame.size.width+10, 
                             self.textLabel.frame.origin.y, 
                             tableView.frame.size.width-(self.textLabel.frame.origin.x+self.textLabel.frame.size.width)-20, 
                             self.textLabel.frame.size.height); 
```

使用“颜色混合图层”查看结构

![在此处输入图像描述](../Images/bd0437cc65b244f8a55d3eb3a7af0249.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:30:14.383

是否有其他东西（其他 UI 项）覆盖了 UITextField 的左侧？

您可以使用具有“颜色混合图层”功能的模拟器来显示您的 UITextField 上是否有任何东西

# java - 在Java中编译C时间间隔定义

> ID：11306162
> 
> 赞同：0
> 
> 时间：2012-07-03T07:16:36.310
> 
> 标签：java, jakarta-ee, runtime, runtime-error, runtime.exec

我想用运行时的 exec() 方法在 Java 中运行一个 C 程序。Java 代码如下：

```
Runtime runtime = Runtime.getRuntime();
Process process = runtime.exec(command);
process.waitFor(); 
```

在这种情况下，如何定义编译后的 C 程序的运行时间？我的意思是，如果我可以设置一个时间间隔，并且如果代码没有在该间隔内完成运行，那么返回一个超出时间限制的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:21:33.047

我认为您应该在这里更好地考虑多线程编程。一旦您开始在 JVM 之外执行程序，您就无法真正从 Java 中分辨出“停止执行该程序”......

因此，您可能应该在单独的线程中运行您在此处提供的代码并使用

`Object.wait(long milliseconds)`

等待这个线程的结果。如果您没有得到结果，请继续您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:27:42.290

Took me some time to understand what you would like to achieve, but here goes my suggestion -
A. Have your code snippet executed in another thread , let's say the Runnable implementation will look like:
public class ProcessExecutor implements Runnable {

private String command;

public ProcessExecutor(String command) { this.command = command; }

public void run() { Runtime runtime = RUntime.getRuntime(); Process process = runtime.exec(command); ProcessManager.getInstance().add(process); process.waitFor(); } }

ProcessManager is a synchronized singletone collection for tracking process execution that you will develop.
It can be a map, based on process ID, that will hold as value the process itself, and information on start time and the last check time.
You should use the [ScheduledExecutorService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html) to run a scheduled task that will periodically check that status of the executed processes. For each process it can manage the last check time, and if lastCheckTime - startTime exceeds a certain interval it should state there is an error, and maybe destroy the process using the [destroy](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#destroy%28%29) method/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:22:52.260

[您可以（在Linux](http://ss64.com/bash/ulimit.html)或 Posix 系统上）[在](http://linux.die.net/man/2/setrlimit)您`command`的`ulimit -t 120; yourprogram and arguments`.

这只会限制 CPU 时间；如果`yourprogram`在某些输入上无限休眠或阻塞，则无济于事。

[马克的回答](https://stackoverflow.com/a/11306241/841108)建议多线程方法可能更好。但我的确实限制了资源。

# python - Pandas 在时间序列上切片似乎与列表切片不一致

> ID：11306167
> 
> 赞同：1
> 
> 时间：2012-07-03T07:16:53.517
> 
> 标签：python, pandas, slice

```
times = [datetime(2011, 01, 03, 0, 10 + i, 0) for i in range(5)]
series = pd.TimeSeries(range(5), index=times)
series.ix[datetime(2011, 01, 03, 0, 10, 0):datetime(2011, 01, 03, 0, 13, 0)]

2011-01-03 00:10:00    0
2011-01-03 00:11:00    1
2011-01-03 00:12:00    2
2011-01-03 00:13:00    3 
```

但

```
x = range(5)
x[0:3]
[0, 1, 2] 
```

还，

```
times = [datetime.datetime(2000, 1, 1) + datetime.timedelta(minutes=i) for i in range(1000000 - 1)]
df = pd.TimeSeries(range(1000000 - 1), times)
len(df.ix[datetime.datetime(1900,1,1):datetime.datetime(2100,1,1)])

999999 
```

但

```
times = [datetime.datetime(2000, 1, 1) + datetime.timedelta(minutes=i) for i in range(1000000)]
df = pd.TimeSeries(range(1000000), times)
len(df.ix[datetime.datetime(1900,1,1):datetime.datetime(2100,1,1)]) 
```

回溯（最近一次通话最后）：

> ```
>  File "C:\Program Files (x86)\Wing IDE 4.1\src\debug\tserver\_sandbox.py", line 1, in <module>
>     # Used internally for debug sandbox under external interpreter
>   File "C:\dev\Python26\Lib\site-packages\pandas\core\indexing.py", line 35, in __getitem__
>     return self._getitem_axis(key, axis=0)
>   File "C:\dev\Python26\Lib\site-packages\pandas\core\indexing.py", line 234, in _getitem_axis
>     return self._get_slice_axis(key, axis=axis)
>   File "C:\dev\Python26\Lib\site-packages\pandas\core\indexing.py", line 460, in _get_slice_axis
>     i, j = labels.slice_locs(start, stop)
>   File "C:\dev\Python26\Lib\site-packages\pandas\tseries\index.py", line 949, in slice_locs
>     return Index.slice_locs(self, start, end)
>   File "C:\dev\Python26\Lib\site-packages\pandas\core\index.py", line 1057, in slice_locs
>     end_slice = self.get_loc(end) + 1
>   File "C:\dev\Python26\Lib\site-packages\pandas\tseries\index.py", line 919, in get_loc
>     return self._engine.get_loc(key)
>   File "C:\dev\Python26\Lib\site-packages\pandas\lib.pyd", line 378, in pandas.lib.DatetimeEngine.get_loc (pandas\src\tseries.c:108808)
>   File "C:\dev\Python26\Lib\site-packages\pandas\lib.pyd", line 390, in pandas.lib.DatetimeEngine.get_loc (pandas\src\tseries.c:108422)
>   File "C:\dev\Python26\Lib\site-packages\pandas\lib.pyd", line 32, in util.get_value_at (pandas\src\tseries.c:112091)
> IndexError: index out of bounds 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:23:21.620

从[文档](http://pandas.pydata.org/pandas-docs/stable/indexing.html#advanced-indexing-with-labels)中：

*使用标签进行切片在语义上略有不同，因为切片开始和停止在基于标签的情况下是**包含在内的***

# c# - 如何在 ASP.NET 中为从同一页面访问的不同数据库设置总访问者计数？

> ID：11306175
> 
> 赞同：0
> 
> 时间：2012-07-03T07:17:02.923
> 
> 标签：c#, asp.net, global-asax, hitcounter, application-variables

我有一个 Search.aspx 页面，它将显示来自用户输入的搜索条件的记录。它连接到**50 个 SQLServer 数据库中的特定数据库**。根据传递的 QueryString，即**Search.aspx?ID=1**，它将连接到**1MyDB**数据库。如果**Search.aspx?ID=2**然后连接到位于相同或不同服务器上的**2MyDB数据库。这工作正常。**

我需要根据**URL 中的查询字符串显示****访问者总数**的问题。对于从同一页面访问的这些不同数据库，即 Search.aspx

 **请建议我获取该特定 ID 的总访客数的最佳方法。

是否通过创建新表并插入计数将其存储在数据库中。或在 Global.asax 文件中设置大约 50 个应用程序变量并相应地获取计数器。

帮助赞赏...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:14:38.570

50 个变量看起来不太好。你需要做很多工作来展示它，如果你添加另一个数据库，你必须更改代码。一张桌子更好。创建一个包含 id 和 count 字段的表，每次点击页面时检查 id 是否已经在表中。如果是这样，请增加行数字段。如果不是，则添加 count = 1 的 id。**

# c - 使用 Netbeans 进行 JNI 调试（Java 和 C 代码）

> ID：11306177
> 
> 赞同：4
> 
> 时间：2012-07-03T07:17:06.520
> 
> 标签：c, debugging, netbeans, java-native-interface

我正在尝试编写一个简单的 Java 应用程序，该应用程序调用用 C 编写的本机方法。我使用的是 Netbeans IDE，并且代码运行良好，但是当我调试时，我无法在本机（C）代码中命中断点。

我正在使用带有 Mac OS X Lion 的 netbeans 7.1.2。我尝试在调试模式下启动 Java 项目，然后使用 Debug/Attach Debugger/gdb 方法，但它显示带有此消息的调试器控制台

11-break-insert -f "/Users/user/NetBeansProjects/JniFileDemoCdl/JniFileDemo.c:8" 12-break-insert -f "/Users/user/NetBeansProjects/JniFileDemoCdl/JniFileDemo.c:42" 13-break-插入 -f "/Users/user/NetBeansProjects/JniFileDemoCdl/JniFileDemo.c:80" 14-exec-continue

我不知道除了这一步之外该做什么以及如何命中本机断点。

更新：我已经找到了在 Netbeans 中同时调试 C 和 Java 代码的方法。

这样做的方法是在本地方法上使用断点启动 Java 项目。然后将C项目设置为主项目，并使用Attach Debugger将java进程附加到它上面。在 C 代码中设置断点。当您执行此操作时，Java 调试器窗口将被隐藏，但在左下方屏幕上您可以看到“会话”按钮。单击它并返回您的 Java 会话，当您跳过本机方法时，窗口会将您移动到 ​​C 代码断点但调试按钮未激活，再次会话按钮并选择 C ​​会话，您将收到调试控制。调试愉快！

# android - 在安卓设备上以任意大小运行的安卓游戏

> ID：11306180
> 
> 赞同：0
> 
> 时间：2012-07-03T07:17:35.497
> 
> 标签：android, size, device, any

我即将在 android 中创建一个可以在任何设备（平板电脑、galaxy s）上运行的游戏。如何让游戏变得灵活？尤其是屏幕的布局、位置和大小。我对图像没有问题，因为`res`可以在文件夹上处理它`hdpi`，`mdpi`并且`ldpi`. 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:26:19.010

你见过这个吗 ？[developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# c# - 我可以在 code::Blocks 中运行 C#(.cs) 文件吗

> ID：11306189
> 
> 赞同：0
> 
> 时间：2012-07-03T07:18:37.307
> 
> 标签：c#, ubuntu, codeblocks

我有一个 form2.cs 文件，并在 Ubuntu 10.04 中安装了 code::Blocks。如何使用 code::Blocks 运行此文件？是否可以通过配置code::Blocks来运行代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:26:53.967

CodeBlocks is primarily a **C++** IDE and from searching online it **doesn't** look like one of the other languages it supports is C#. People are pointing to [MonoDevelop](http://monodevelop.com/) as a similar alternative.

# wpf - 两个 Canvas 之间的 WPF DragEnter 未触发

> ID：11306194
> 
> 赞同：0
> 
> 时间：2012-07-03T07:18:56.473
> 
> 标签：wpf, canvas, drag-and-drop, dragenter

我正在尝试将一个项目从一个画布拖到另一个画布上。我希望在对象进入另一个画布时触发一个事件。似乎没有任何 Drag 事件触发。我已尝试遵循此问题的解决方案，但它对我不起作用： [拖放未按预期响应](https://stackoverflow.com/questions/10641645/drag-and-drop-not-responding-as-expected)

我的画布是这样的：

```
<Window x:Class="DragEnterTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="DragEnterMainWindow" Height="460" Width="1000">
<Grid>
    <Canvas Name="Toolbox" Background="Beige" Height="400" Width="200" Margin="12,12,800,35">
        <Rectangle Name="dragRectangle" Canvas.Left="0" Canvas.Right="0" Width="50" Height="50" Fill="Red"
                   MouseLeftButtonDown="dragRectangle_MouseLeftButtonDown"
                   MouseLeftButtonUp="dragRectangle_MouseLeftButtonUp"
                   MouseMove="dragRectangle_MouseMove"
                   />
    </Canvas>
    <Canvas Background="Azure" Height="400" Margin="218,12,0,35" Name="mainCanvas" Panel.ZIndex="-1"
            DragEnter="mainCanvas_DragEnter"
            DragLeave="mainCanvas_DragLeave"
            PreviewDragEnter="mainCanvas_PreviewDragEnter"
            PreviewDragLeave="mainCanvas_PreviewDragLeave"
            AllowDrop="True"
            DragDrop.Drop="mainCanvas_Drop"
            />
</Grid>
</Window> 
```

如果我没有 Panel.ZIndex="-1"，则将矩形拖到 mainCanvas 下方。即使我将矩形的 ZIndex 设置为某个正值也是如此。

我的代码如下，由我发现的示例修改：

```
namespace DragEnterTest
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    private bool _isRectDragInProg;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void dragRectangle_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        _isRectDragInProg = true;
        dragRectangle.CaptureMouse();
    }

    private void dragRectangle_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        _isRectDragInProg = false;
        dragRectangle.ReleaseMouseCapture();
    }

    private void dragRectangle_MouseMove(object sender, MouseEventArgs e)
    {
        if (!_isRectDragInProg) return;
        // get the position of the mouse relative to the Canvas
        var mousePos = e.GetPosition(Toolbox);

        // center the rect on the mouse
        double left = mousePos.X - (dragRectangle.ActualWidth / 2);
        double top = mousePos.Y - (dragRectangle.ActualHeight / 2);
        Canvas.SetLeft(dragRectangle, left);
        Canvas.SetTop(dragRectangle, top);
    }

    private void mainCanvas_DragEnter(object sender, DragEventArgs e)
    {
        string t = "Test";  // Never enters this event
    }

    private void mainCanvas_DragLeave(object sender, DragEventArgs e)
    {
        string t = "Test";  // Never enters this event
    }

    private void mainCanvas_PreviewDragEnter(object sender, DragEventArgs e)
    {
        string t = "Test";  // Never enters this event
    }

    private void mainCanvas_PreviewDragLeave(object sender, DragEventArgs e)
    {
        string t = "Test";  // Never enters this event
    }

    private void mainCanvas_Drop(object sender, DragEventArgs e)
    {
        string t = "Test";  // Never enters this event
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:59:21.257

您实际上并没有拖动任何东西，只是在画布中到处移动矩形。

当您的矩形离开源时，您需要调用`DragDrop.DoDragDrop`函数，并将其与源分离，以便稍后将其添加到目标。

```
 // Drag - In mousemove event when mouse has gone out of toolbox
    DragDrop.DoDragDrop(
        Toolbox, 
        new DataObject("MyWPFObject", rectangle),
        DragDropEffects.Move
    );

    // Drop - In Drop event of target
    if (e.Data.GetDataPresent("MyWPFObject"))
    { 
       var rectangle = e.Data.GetData("MyWPFObject") as Rectangle
    .... 
```

[教程 ...](http://wpftutorial.net/DragAndDrop.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:02:37.763

我相信这是因为您正在捕获鼠标，所以所有鼠标事件都由您的 dragged 处理`Rectangle`，并且它们不会传递给您的`Canvas`

我个人在使用 WPF 的内置拖放功能时遇到了各种问题，所以我最终`MouseEvents`改用了。

我使用的解决方案来自[这个答案](https://stackoverflow.com/a/2639399/302677)，并且是这样的：

1.  按下`MouseDown`左键，记录位置（`MouseLeave`删除位置）

2.  On `MouseMove`，如果左键按下，位置被记录，并且当前鼠标位置的差异超过 delta，设置一个标志，表示拖动操作正在进行中并让您的应用程序（而不是拖动的对象）捕获鼠标

3.  `MouseMove`在进行拖动操作时，使用命中测试来确定矩形应该在哪里（忽略矩形本身）并相应地调整其父级和位置。

4.  On`MouseUp`正在进行拖动操作，释放鼠标捕获并清除“正在进行拖动操作”标志

# c++ - 状态机：使用转换矩阵而不是嵌套的 switch case C++

> ID：11306195
> 
> 赞同：3
> 
> 时间：2012-07-03T07:19:07.057
> 
> 标签：c++, state-machine

我的状态机有困难。我使用了一个函数，它根据输入参数 oldState 和两个输入参数返回新状态。

在这个函数中，我有很多嵌套的 switch case。我宁愿使用 2x2 转换矩阵，但不知道如何使用它。我确实从带有状态和输入的状态图中制作了一个转换表。

但是我如何使用 2 暗淡。数组`transition_table[3][4]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T07:46:13.810

你说你目前有这样的事情：

```
StateType transition (StateType old, InputType one, InputType two) {
    //... nested switch statements
    return new_state;
} 
```

因此，您似乎需要一个 3 维数组：

```
#define MAX_STATES 12
#define MAX_INPUT_VAL 2
StateType transitionTable[MAX_STATES][MAX_INPUT_VAL][MAX_INPUT_VAL] = {
    { { StateA, StateB },
      { StateC, StateD } },
    { { StateE, StateF },
      { StateG, StateH } },
    { { StateI, StateJ },
      { StateK, StateL } },
    //...
}; 
```

然后你会像这样过渡：

```
new_state = transitionTable[StateIndex(old)][one][two]; 
```

所以，假设`StateIndex(StateC)`返回`2`，那么：

```
old = StateC;
new_state = transitionTable[StateIndex(old)][1][0];
assert(new_state == StateK); 
```

将导致`new_state`持有`StateK`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:25:57.517

给定这样的矩阵：

```
state1_input1 state1_input2 state1_input3
state2_input1 state2_input2 state2_input3
state3_input1 state3_input2 state3_input3 
```

当您处于状态 n 并接收输入 m 时，您查看第 n 行第 m 列以找出新状态。假设您有 3 个可能的状态和 4 个可能的输入，您需要做的就是：

```
state = transition_table[state][input] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:23:57.550

根据您的描述，您不需要二维数组，一维就可以了。应该这样制作：

```
void foo()
{
int States[2] = {1,2};
int currentState = 1;///initial state, let's say
int oldState;///prev. state
while(true)
{
  if(currentState == 1 && *add any other condition that you need*)
  {
      <...>do something<...>
      oldState = currentState;//saving the old state, in case you need it.
      currentState = states[currentState]; //changing the state
  }
  else if( currentState == 2 && *add any other condition that you need*)
  {
      <...>some other code<...>
  }
} 
```

所以你有一个状态数组。然后，您根据输入参数计算该数组的索引（您说您使用旧状态和其他东西）。之后，您只需通过该索引从数组中获取新状态。我的解释有点混乱，所以如果您需要澄清某些部分，请发表评论。

# java - 以 .jar 文件中的内部目录为目标——java

> ID：11306203
> 
> 赞同：2
> 
> 时间：2012-07-03T07:19:26.073
> 
> 标签：java, wsdl

我有一个运行良好的 Web 服务客户端，其中有一行定义了 WSDL 的位置：

```
@WebServiceClient(name = "CReceiveMOMessageService", 
                  targetNamespace = "http://...", 
                  wsdlLocation = "CReceiveMOMessageService.wsdl") 
```

代码段应导出为可运行的 JAR，并用于在远程位置上工作。

当我如上所述定义 WSDL 的位置时，它会在我运行 JAR 文件的目录中查找 WSDL 文件。相反，我想做的是将 WSDL 文件添加到项目文件夹中，然后导出为 JAR，并`wsdlLocation`以指向 JAR 文件中的 WSDL 的方式配置参数。

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:00:25.107

可以将 WSDL 添加到 JAR。似乎约定是将 WSDL 放在 JAR 中的`META-INF/wsdl`位置（尽管 Oracle 工具似乎更喜欢`META-INF/wsdls`（例如，请参阅[本 Oracle 教程](http://www.oracle.com/technetwork/developer-tools/eclipse/jaxwsclienttutorial-2-095181.html)的第 9 点）。

我没有使用 Oracle Enterprise Pack for Eclipse，我猜当您指定将 WSDL 打包到 JAR 中时，OEPE ClientGen 任务会正确生成客户端类，但我认为这与传递`-wsdllocation META-INF/wsdls/YourService.wsdl`参数不同运行[`wsimport.exe`](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html)：

`wsimport.exe`将输出`@WebServiceClient(... wsdlLocation = "META-INF/wsdls/YourService.wsdl")`，但通常也会在类的静态初始化程序中生成如下代码：

```
baseUrl = YourService.class.getResource(".");
url = new URL(baseUrl, "META-INF/wsdls/YourService.wsdl"); 
```

它仍将指向一个根文件夹，然后将提供的 WSDL 路径添加到该根文件夹以最终获得一个不存在的路径。

在生成类后，您必须更改类以包含以下内容：

```
url = YourService.class.getClassLoader().getResource("META-INF/wsdls/YourService.wsdl"); 
```

现在将指向 JAR。当然，在构建客户端 JAR 时，您必须在该位置打包 WSDL。

# jquery - Jquery：将两个文本字段相乘并更新为第三个文本字段

> ID：11306204
> 
> 赞同：1
> 
> 时间：2012-07-03T07:19:28.907
> 
> 标签：jquery, textfield

在这里，我有 3 个文本字段被视为 a1、a2 和 a3，现在我需要将 a1 * a2 的值相乘并将答案更新到第三个字段。我怎么能用 jquery 做到这一点？我们在 jquery 中有任何更新功能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T07:26:27.913

假设 a1、a2 和 a3 是这样的元素的 id

```
<input id="a1" type="text" value="10" />
<input id="a2" type="text" value="20" />
<input id="a3" type="text" value="" /> 
```

那么您所要做的就是将其添加到页面中

```
$(document).ready(function(){
    $('#a1').keyup(calculate);
    $('#a2').keyup(calculate);
});
function calculate(e)
{
    $('#a3').val($('#a1').val() * $('#a2').val());
} 
```

# c# - 在 HFT 中尝试并行订单处理是否有意义？

> ID：11306205
> 
> 赞同：5
> 
> 时间：2012-07-03T07:19:40.500
> 
> 标签：c#, fix-protocol, hft

好吧，我认为对于那些熟悉 hft 的人来说，这是一个更理论的问题。我收到 FAST 的订单并处理它们。我每秒收到大约 2-3 千个订单。问题是我是否应该尝试同步或异步处理它们。

每次收到下一个订单时，我都需要执行以下操作：

*   更新相应工具的订单簿
*   更新依赖于该顺序的索引和指标
*   如果需要，更新策略并安排一些行动（买/卖东西等）

为了实现同步，我需要大约 200-300 µs（每秒能够处理 3000 个订单）。我想这应该足够了。

只是为了安排异步任务我花了我想~30 µs

优点和缺点：

同步：

*   ++ 不需要同步东西！
*   ++“收到订单”和“采取行动”之间的延迟较少，因为不需要安排任务或将数据/工作传递给另一个进程（在 hft 中非常重要！）。
*   -- 但是“订单已收到”操作可能会延迟，因为我们可以在套接字缓冲区中等待上一个订单处理

异步：

*   ++ 能够使用现代服务器的强大功能（例如，我的服务器有 24 个内核）
*   ++ 在某些情况下更快，因为在处理先前的消息时不要等待。
*   ++ 可以处理更多消息，或者每条消息可以做更多“复杂”的事情
*   -- 需要同步很多东西可以减慢程序的速度

同步示例：我们收到更新的 MSFT 订单，然后更新 INTC 订单，并在不同的线程中处理它们。在这两种情况下，我们都会触发纳斯达克指数重新计算。所以纳斯达克指数的计算应该是同步的。然而，可以解决这个特殊问题以避免同步......这只是可能同步的一个例子。

所以问题是我应该同步还是异步处理订单更新。到目前为止，我对它们进行异步处理，并且每个仪器都有专用线程。因为我可以为不同的仪器（MSFT 和 INTC）处理异步更新的两个更新，但一个仪器（MSFT）的两个更新应该同步处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:26:59.300

> I receive orders from FAST and process them. I receive about 2-3 thousands orders per second

Really? You work at an exchange? Becuase seriously, I get data from 5 exchanges, but those aren ot orders ;) I suggest you get your term in line - you get 2-3 thousand EVENTS, but I really doubt you get ORDERS.

Have you ever thought of doing a multi stage processing setup? I.e. you get data in 2 thread, hand it over to another thread to find the instrument (id instead strings), hand it over to another thread to update order book, hand it over to another thread to do indicators, hand irt over to X threads to do strategies?

No need to schedule tasks al lthe time, just synced queues with one tas processing messages on each of them. Can be super fficient with a no-lock approach.

Brutally speaking: I am all for multi threaded, but all in core processing must maintain cardinality, so classical multi threading is out. Why? I need fully repeatable processing, so that unit tests get determined output.

> So far I process them asynchronous and I have dedicated thread per instrument

You do not trade a LOT, right? I mean, I track about 200.000 instruments (5 complete exchanges). Allocating 200.000 threads would be - ah - prohibitive ;)

GO staged pipeline - that means that the core loops can be small and you can distribute them to enough cores that you are a lot more scalable. THen properly optimize - for example it is quite common for updates of one instrument to come followed by another update for the SAME instrument (for example multiple executions while a large order executes). Take advantage of that.

# javascript - Knockoutjs - 如何在选择下拉列表中预选第一个选项

> ID：11306207
> 
> 赞同：0
> 
> 时间：2012-07-03T07:19:44.997
> 
> 标签：javascript, knockout.js

假设我有一个选择框，例如

```
<div data-bind='visible: someProp'>   
   <select class="selectSubWidgets" data-bind='options: subWidgets,optionsText:          "Name", optionsValue : "Name", optionsCaption: "[Select a Widget]",attr: {name: "Widgets[" + $parent.widgets.indexOf($data) + "].Name"}, value: selectedSubWidget'></select>
</div> 
```

如果此选择中的项目数仅为 1 - 目前我隐藏此下拉列表（工作）但我还想确保选择单个项目（隐藏时）（因此第一个值绑定在表单帖子中）。有没有办法表达这种绑定？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:36:50.497

那么所选元素受以下约束：

```
value: selectedSubWidget 
```

所以你应该简单地用你的默认值初始化 selectedSubwidget 。

```
this.selectedSubWidget = ko.observable("defaultValue"); 
```

# playframework - 无需 ImplicitFieldConstructor 即可访问 FieldElements

> ID：11306208
> 
> 赞同：0
> 
> 时间：2012-07-03T07:19:45.480
> 
> 标签：playframework, validation

当我们为表单验证/授权定义错误消息时，我们试图保持一致，但我们发现使用 Play 2.0 的 @Constraints 等有点困难。

我们想要的是能够访问每个错误（以及相关的 i18n 翻译），最好是通过错误对象。然而，这被证明是相当困难的，因为错误（至少来自@Constraint）被应用于 ImplicitFieldConstructor 中的 i18n 翻译，我们实际上并没有太多访问权限。

我们想知道的是，是否有一种方法可以在不通过 ImplicitFieldConstructor 的情况下访问表单中每个字段的所有 FieldElement？（绝望地尝试了@helper.FieldElements）

当然，我们可以删除整个 @Constraints 并定义我们自己的验证器和验证方法，但这似乎有点违反直觉，因为我们想使用该框架来获得它的所有价值。

编辑：另外，我们试过这个：

```
 @for((key, value) <- loginForm.errors) {
        @value.get(0)
    } 
```

但这只是给了我们消息（例如'error.required'）而不是i18n-translation。

**编辑**

我们现在使用它作为修复它的黑客，但我想找到一种更好的方法来处理这个问题。

```
 if (loginForm.hasErrors()) {
        // TODO: find a better solution to handle this problem.
        for(Map.Entry<String, List<ValidationError>> entry : loginForm.errors().entrySet() ) {
            ValidationError oldError = entry.getValue().get(0);
            // applay i18n-translation to error message.
            ValidationError error = new ValidationError(oldError.key(),  Messages.get(oldError.message()), new ArrayList());
            entry.getValue().set(0, error);
        }
        return badRequest(index.render(loginForm)); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:40:37.263

如果您有权访问您尝试添加验证的 .java 文件，那么一种选择是在您的约束中添加 message = "Text" 元素。这将更改显示的消息，而无需您编写自己的自定义验证。

```
@Required(message = "Your message here!")
public String someField; 
```

# android - 通过安卓应用登录网站

> ID：11306223
> 
> 赞同：-2
> 
> 时间：2012-07-03T07:20:38.383
> 
> 标签：android

我正在为[http://yearbook08.com/](http://yearbook08.com/)制作一个 android 应用程序我知道如何解析网页，但我不知道如何在特定字段中输入信息或移动到另一个页面。

如果您打开此链接，有两个文本字段我想从我的应用程序输入数据并想登录，如果有人有这方面的代码，那将很有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:29:42.463

如果您想在不使用页面的实际 UI 的情况下输入用户信息，则需要使用一些 http 请求（如图所示[）](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)。您还需要通过阅读页面的 http 标头进行某种逆向工程，以了解页面在不同导航场景中的响应。要做到这一点，你需要这样的[东西](https://addons.mozilla.org/de/firefox/addon/live-http-headers/?src=search)。

# gwt - 带有 Gin 和 AsyncProvider 的 ActivityMapper

> ID：11306228
> 
> 赞同：4
> 
> 时间：2012-07-03T07:21:02.477
> 
> 标签：gwt, gwt-gin

我刚刚开始了一个使用[新 GWT 原型](https://github.com/tbroyer/gwt-maven-archetypes/tree/master/guice-rf-activitie)构建的项目。

ActivityMapper 看起来像：

```
public interface Factory {
    HomeActivity homeActivity();

    GreetingActivity greetingActivity(String user);
}

private final Factory factory;

@Inject
MainActivityMapper(Factory factory) {
    this.factory = factory;
}

@Override
public Activity getActivity(Place place) {
    if (place instanceof HomePlace) {
        return factory.homeActivity();
    }
    if (place instanceof GreetingPlace) {
        GreetingPlace greetingPlace = (GreetingPlace) place;
        return factory.greetingActivity(greetingPlace.getUser());
    }
    logger.severe("Unhandled place type: " + place.getClass().getName());
    return null;
} 
```

我现在正在尝试根据[此示例](http://ars-codia.raphaelbauer.com/2011/04/gwt-gin-and-simple-split-points.html)使用 AsyncProvider 实现代码拆分，但我无法使其正常工作。

使用 ActivityAsyncProxy 时，我应该怎么做？从 getActivity(Place place) 返回 ActivityAsyncProxy？但是，我怎样才能从工厂创建 ActivityAsyncProxy 呢？

您如何建议使活动映射器与代码拆分很好地配合使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:05:13.177

AFAICT，您不能`AsyncProvider`与辅助注射一起使用（这将是 GIN 的一个很好的补充）。这意味着您无法从生成的`runAsync`呼叫中受益，您必须自己进行。

查看[http://code.google.com/p/google-web-toolkit/issues/detail?id=5129](http://code.google.com/p/google-web-toolkit/issues/detail?id=5129)以讨论此问题，并提供一些建议。

另请查看[https://groups.google.com/d/msg/google-web-toolkit-contributors/bUFYWEFskBI/ja2aJ0tBgdwJ](https://groups.google.com/d/msg/google-web-toolkit-contributors/bUFYWEFskBI/ja2aJ0tBgdwJ)了解我自己的看法（也可在[https://gist.github.com/ 3038878](https://gist.github.com/3038878)）。

# php - 调整谷歌地图V3信息窗口的大小

> ID：11306231
> 
> 赞同：1
> 
> 时间：2012-07-03T07:21:06.210
> 
> 标签：php, google-maps-api-3

我面临解决信息窗口大小的巨大问题。我想在信息窗口中显示一个图像块和一些文本信息，但是在内容信息窗口大小增加之后，我已经阅读了一些线程，但我的代码没有运气。谁能帮我整理一下。

```
// Creating an object literal containing the properties 
// we want to pass to the map  
var options = {  
  zoom: 5,  
  center: new google.maps.LatLng(44.913990, 15.205078),  
  mapTypeId: google.maps.MapTypeId.ROADMAP ,
  };
// Creating the map  
var map = new google.maps.Map(document.getElementById("map"), options);
// Creating a LatLngBounds object
var bounds = new google.maps.LatLngBounds();
// Creating an array that will contain the coordinates 
// for New York, San Francisco, and Seattle
  var content = [];
  var places = [];content.push('Some html');
  places.push(new google.maps.LatLng(44.913990, 15.205078));
// Creating a variable that will hold 
// the InfoWindow object
var infowindow;

// Looping through the places array
for (var i = 0; i < places.length; i++)
{
  // Adding the markers
  var marker = new google.maps.Marker({
    position: places[i], 
    map: map,
    icon: "/themes/garland/images/beach_icon_gmap.png"
  //  title: "Place number " + i
  });

  // Wrapping the event listener inside an anonymous function 
  // that we immediately invoke and passes the variable i to.
  (function(i, marker) {
    // Creating the event listener. It now has access to the values of
    // i and marker as they were during its creation
    google.maps.event.addListener(marker, "click", function() {

      // Check to see if we already have an InfoWindow  
      if (!infowindow) {
        infowindow = new google.maps.InfoWindow({
            maxWidth: 20,
            maxheight: 20
        });
      }

      // Setting the content of the InfoWindow
      infowindow.setContent(content[i]);

      // Tying the InfoWindow to the marker 
      infowindow.open(map, marker);

    });

  })(i, marker);

  // Extending the bounds object with each LatLng
  bounds.extend(places[i]);
}
// Adjusting the map to new bounding box
// map.fitBounds(bounds) 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:15:31.597

我在您的代码中注意到的第一件事：是传递给构造函数的[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#InfoWindowOptions)对象`maxWidth`的有效属性，但不是。尽管会限制宽度，但您将无法将其视为严格或刚性容器。An的大小始终包含它所提供的任何内容。从 API 文档：`InfoWindowOptions`[](https://developers.google.com/maps/documentation/javascript/reference#InfoWindowOptions)`InfoWindow``maxheight``InfoWindow``maxWidth``InfoWindow`

> InfoWindow 将根据内容调整大小。要为内容设置显式大小，请将内容设置为具有该大小的 HTML 元素。

也就是说，您可以`InfoWindow`通过定义 CSS 类并将样式规则应用于窗口内容来控制窗口的大小、显示、颜色等。对内容采用 CSS 方法几乎可以让您完全控制内容的大小，因为它`InfoWindow`只是作为内容的容器。如果 CSS 规则生成正确大小的内容，则您的大小`InfoWindow`将是正确的。

# c++ - 通过opengl（MFC）拖动图像

> ID：11306240
> 
> 赞同：0
> 
> 时间：2012-07-03T07:21:29.490
> 
> 标签：c++, windows, opengl, mfc

我正在使用 openGL 来拖动图像（加载的位图），并想知道是否有一些方法/函数可以转换屏幕上的图像。

到目前为止，我已经完成了这段代码来加载图像：

```
void CDisplayControlPanelView::OnDraw(CDC* /*pDC*/)
{
    CDisplayControlPanelDoc* pDoc = GetDocument();
    ASSERT_VALID(pDoc);
    if(!pDoc)
        return;

    wglMakeCurrent(m_hDC , m_hRC);
    RenderScene();
    SwapBuffers(m_hDC);
    wglMakeCurrent(m_hDC,NULL);
}

void CDisplayControlPanelView::RenderScene()
{
    AUX_RGBImageRec* pRGBImage;

    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    glClearColor(0.0, 0.0, 0.0, 0.0);

    glClear(GL_COLOR_BUFFER_BIT);
    pRGBImage = auxDIBImageLoadA("D:\\map.bmp");

    glDrawPixels(pRGBImage->sizeX, pRGBImage->sizeY, GL_RGB, GL_UNSIGNED_BYTE, pRGBImage->data);
    glFlush();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:28:15.593

Use [glTranslate](http://www.opengl.org/sdk/docs/man/xhtml/glTranslate.xml). There are many other ways but this is the most simple. Check out some tutorials if you are new to OpenGL, it could help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:23:38.903

您必须了解的第一件事是，OpenGL 不是场景图。它是一个绘图 API，非常类似于 Windows GDI。该函数`glDrawPixels`与 MemDC 中的 BitBlt 并无太大区别。

无论如何：你不应该使用 glDrawPixels。它很慢且已被弃用。在 OpenGL 中绘制图像的方法是将图像上传到纹理中并绘制带纹理的四边形。您可以随意移动的四边形。

# php - Jquery Ajax 和 PHP MVC 模型

> ID：11306247
> 
> 赞同：5
> 
> 时间：2012-07-03T07:21:52.700
> 
> 标签：php, jquery, model-view-controller

我正在使用 Jquery 和 PHP 构建一个小型应用程序。Jquery (index.html) 为用户添加表单字段并将它们发送到 PHP 脚本 (pdo.php)。PHP 脚本从数据库中获取值，并使用用户给定的值和数据库中的值进行一些计算。总和返回到表单页面。

index.html <-> pdo.php

因此我试图理解 PHP MVC 模式我的问题是

a.) 这在这种情况下是有意义的。

b.) 如果是这样，那部分将是什么。index.html --> 视图；pdo.php --> 模型；控制器 --> ?

感谢您的帮助，

托尼

## 剪下

jquery ... index.html

```
$(document).ready(function(){
    $("#buttonAjax").click(function(){
        var name = encodeURI($("#name").val());

            $.ajax({
                type: "POST",
                url: "pdo.php",
                data: "name="+name,
                success: function(data){
                    var json = $.parseJSON(data);
                    $("#output").html(json.summe);
                    talk(json.say);
                }
            });

    });

    function talk (say){
        jQuery.noticeAdd({text: say,stay: false});
    }

     }); 
```

pdo.php

```
/* DB Connection */
    $strDbLocation = 'mysql:dbname=test;host=localhost';
    $strDbUser = 'root';
    $strDbPassword = 'root';

    try{
        $objDb = new PDO($strDbLocation, $strDbUser, $strDbPassword);
    }
    catch (PDOException $e){
        echo 'Failure: ' . $e->getMessage();
    }

/* Fetch POST Data */
    $id = $_POST['name'];

/* Build query */
    $dbSelect =  $objDb->prepare("SELECT Age,Name FROM Benutzer WHERE id = :id");
    $dbSelect -> setFetchMode(PDO::FETCH_ASSOC);  
    $dbSelect -> bindParam('id', $id);
    $dbSelect -> execute();

/* Output + Calculate */    
    while($row = $dbSelect->fetch()) {  
        $total =  $row['Age'] / 100 . "<br />";
    }  

/* Return to User */
    if(!empty($total)){ 
        $ret = Array("summe" => "Summe: " . $total, "say" => "all right");
        echo json_encode($ret); }
    else{
        $ret = Array("summe" => "Nothing for you",  "say" => "nothing for you");
        echo json_encode($ret); 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:47:51.763

在标准的 MVC webapp 中，路由与控制器操作相匹配。这些控制器动作可以与模型交互[后者又与数据库交互]或执行其他一些与模型无关的计算，并呈现一个视图。很明显，这`index.html`是视图。而且我认为您将控制器和模型捆绑在`pdo.php`.

我真的在评论中推荐 PeeHaa 的链接。这个答案写的很好。

话虽如此，制作 web 应用程序有许多[架构模式。](http://en.wikipedia.org/wiki/Architectural_pattern)你的可能不是 MVC。一些不是 MVC 的突出框架是 SproutCore（基于视图的控制器）和 JSP 页面（单控制器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:43:30.117

控制器的使用是使用 php 来控制 html 中的表单元素。例如：

```
/ * Fetch POST Data */
    $id = $_POST['name']; 
```

模型的使用仅用于 db 使用（插入、选择、..）

# gwt - 使用 GWT CellTableBuilder 按需构建自定义行

> ID：11306248
> 
> 赞同：8
> 
> 时间：2012-07-03T07:21:56.930
> 
> 标签：gwt

在 GWT 2.5 中引入了 RC CellTableBuilder API，但还没有全面的文档可用。是否有任何使用 CellTableBuilder 实现按需自定义行构建的教程\示例？到目前为止，我发现的唯一示例是[http://showcase2.jlabanca-testing.appspot.com/#!CwCustomDataGrid](http://showcase2.jlabanca-testing.appspot.com/#!CwCustomDataGrid)但对我来说很困惑。

因此，我的目标是创建包含小部件的额外行，该小部件提供有关表中单击行的详细信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T11:02:01.573

我找到了适合这个问题的解决方案。这是代码示例：

```
public class CustomCellTableBuilder extends AbstractCellTableBuilder<Object>{
//here go fields, ctor etc.

//ids of elements which details we are going to show 
private Set elements;

@Override
protected void buildRowImpl(Object rowValue, int absRowIndex){
   //building main rows logic 

    if(elements.contains(absRowIndex)){
        buildExtraRow(absRowIndex, rowValue);
        elements.add(absRowIndex);
    }
}

private void buildExtraRow(int index, Object rowValue){
    TableRowBuilder row = startRow();
    TableCellBuilder td = row.startTD().colSpan(getColumns().size());
    DivBuilder div = td.startDiv();

    Widget widget = new Widget();

    //update widget state and appearance here depending on rowValue

    div.html(SafeHtmlUtils.fromTrustedString(widget.getElement().getInnerHTML()));

    div.end();
    td.endTD();
    row.endTR();
}} 
```

应该提到的是，当您处理一些导致出现额外行的事件时，您应该在附加到 TableBuilder 的 CellTable 上调用 redrawRaw(rowIndex)。在此调用之前，需要将目标行 ID 添加到元素集。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T23:31:08.540

我创建了这个类来扩展 GWT 中的行。它需要一个您想要扩展的列，并将其替换为可以具有 2 个状态的占位符。

我这样使用它：

```
PlaceHolderColumn<Notification, SafeHtml> placeholder = new PlaceHolderColumn<Notification, SafeHtml>(new SafeHtmlCell()) {
        @Override
        public SafeHtml getValue(Notification object) {
            return SafeHtmlUtils.fromSafeConstant(getSelected() ? "<i class=\"glyphicon glyphicon-chevron-down\"></i>"
                    : "<i class=\"glyphicon glyphicon-chevron-right\"></i>");
        }
    };

    notificationsTable.setTableBuilder(new ExpandableCellTableBuilder<Notification, SafeHtml>(notificationsTable, columnBody, placeholder)); 
```

我可以访问 glyphicon，所以我使用它们而不是默认占位符列，即 +/-

<这里的图片...但是由于缺乏声誉:( >

`columnBody`在上面的代码示例中只是一个标准列，它将跨越表格的宽度。占位符将显示在其`columnBody`配置为坐在的任何位置的位置。

希望对某人有所帮助:)

```
public class ExpandableCellTableBuilder<T, U> extends AbstractCellTableBuilder<T> {

private Column<T, U> expandColumn = null;
private PlaceHolderColumn<T, ?> placeholderColumn = null;

private final String evenRowStyle;
private final String oddRowStyle;
private final String selectedRowStyle;
private final String cellStyle;
private final String evenCellStyle;
private final String oddCellStyle;
private final String firstColumnStyle;
private final String lastColumnStyle;
private final String selectedCellStyle;

public static class ExpandMultiSelectionModel<T> extends AbstractSelectionModel<T> {

    Map<Object, T> selected = new HashMap<Object, T>();

    /**
     * @param keyProvider
     */
    public ExpandMultiSelectionModel(ProvidesKey<T> keyProvider) {
        super(keyProvider);
    }

    /*
     * (non-Javadoc)
     * 
     * @see com.google.gwt.view.client.SelectionModel#isSelected(java.lang.Object)
     */
    @Override
    public boolean isSelected(T object) {
        return isKeySelected(getKey(object));
    }

    protected boolean isKeySelected(Object key) {
        return selected.get(key) != null;
    }

    /*
     * (non-Javadoc)
     * 
     * @see com.google.gwt.view.client.SelectionModel#setSelected(java.lang.Object, boolean)
     */
    @Override
    public void setSelected(T object, boolean selected) {
        Object key = getKey(object);
        if (isKeySelected(key)) {
            this.selected.remove(key);
        } else {
            this.selected.put(key, object);
        }
        scheduleSelectionChangeEvent();
    }
}

public static abstract class PlaceHolderColumn<T, C> extends Column<T, C> {

    private boolean isSelected;

    /**
     * @param cell
     */
    public PlaceHolderColumn(Cell<C> cell) {
        super(cell);
    }

    protected boolean getSelected() {
        return isSelected;
    }

}

private int expandColumnIndex;

public ExpandableCellTableBuilder(AbstractCellTable<T> cellTable, Column<T, U> expandColumn) {
    this(cellTable, expandColumn, new ExpandMultiSelectionModel<T>(cellTable.getKeyProvider()), null);
}

public ExpandableCellTableBuilder(AbstractCellTable<T> cellTable, Column<T, U> exandColumn, SelectionModel<T> selectionModel) {
    this(cellTable, exandColumn, selectionModel, null);
}

public ExpandableCellTableBuilder(AbstractCellTable<T> cellTable, Column<T, U> exandColumn, PlaceHolderColumn<T, ?> placeHolder) {
    this(cellTable, exandColumn, new ExpandMultiSelectionModel<T>(cellTable.getKeyProvider()), placeHolder);
}

/**
 * @param cellTable
 * @param columnBody
 */
public ExpandableCellTableBuilder(AbstractCellTable<T> cellTable, Column<T, U> expandColumn, SelectionModel<T> selectionModel,
        PlaceHolderColumn<T, ?> placeHolder) {
    super(cellTable);

    this.expandColumn = expandColumn;

    this.cellTable.setSelectionModel(selectionModel);

    if (placeHolder == null) {
        this.placeholderColumn = new PlaceHolderColumn<T, String>(new TextCell()) {
            @Override
            public String getValue(T object) {
                return getSelected() ? "-" : "+";
            }
        };
    } else {
        this.placeholderColumn = placeHolder;
    }

    // Cache styles for faster access.
    Style style = cellTable.getResources().style();
    evenRowStyle = style.evenRow();
    oddRowStyle = style.oddRow();
    selectedRowStyle = " " + style.selectedRow();
    cellStyle = style.cell();
    evenCellStyle = " " + style.evenRowCell();
    oddCellStyle = " " + style.oddRowCell();
    firstColumnStyle = " " + style.firstColumn();
    lastColumnStyle = " " + style.lastColumn();
    selectedCellStyle = " " + style.selectedRowCell();
}

/*
 * (non-Javadoc)
 * 
 * @see com.google.gwt.user.cellview.client.AbstractCellTableBuilder#buildRowImpl(java.lang.Object, int)
 */
@Override
protected void buildRowImpl(T rowValue, int absRowIndex) {
    // Calculate the row styles.
    SelectionModel<? super T> selectionModel = cellTable.getSelectionModel();
    final boolean isSelected = (selectionModel == null || rowValue == null) ? false : selectionModel.isSelected(rowValue);
    boolean isEven = absRowIndex % 2 == 0;
    StringBuilder trClasses = new StringBuilder(isEven ? evenRowStyle : oddRowStyle);
    if (isSelected) {
        trClasses.append(selectedRowStyle);
    }

    // Add custom row styles.
    RowStyles<T> rowStyles = cellTable.getRowStyles();
    if (rowStyles != null) {
        String extraRowStyles = rowStyles.getStyleNames(rowValue, absRowIndex);
        if (extraRowStyles != null) {
            trClasses.append(" ").append(extraRowStyles);
        }
    }

    // Build the row.
    TableRowBuilder tr = startRow();
    tr.className(trClasses.toString());

    // Build the columns.
    int columnCount = cellTable.getColumnCount();
    for (int curColumn = 0; curColumn < columnCount; curColumn++) {
        Column<T, ?> column = cellTable.getColumn(curColumn);

        if (column == expandColumn) {
            expandColumnIndex = curColumn;
            column = placeholderColumn;
            placeholderColumn.isSelected = isSelected;
        }

        // Create the cell styles.
        StringBuilder tdClasses = new StringBuilder(cellStyle);
        tdClasses.append(isEven ? evenCellStyle : oddCellStyle);
        if (curColumn == 0) {
            tdClasses.append(firstColumnStyle);
        }
        if (isSelected) {
            tdClasses.append(selectedCellStyle);
        }
        // The first and last column could be the same column.
        if (curColumn == columnCount - 1) {
            tdClasses.append(lastColumnStyle);
        }

        // Add class names specific to the cell.
        Context context = new Context(absRowIndex, curColumn, cellTable.getValueKey(rowValue));
        String cellStyles = column.getCellStyleNames(context, rowValue);
        if (cellStyles != null) {
            tdClasses.append(" " + cellStyles);
        }

        // Build the cell.
        HorizontalAlignmentConstant hAlign = column.getHorizontalAlignment();
        VerticalAlignmentConstant vAlign = column.getVerticalAlignment();
        TableCellBuilder td = tr.startTD();
        td.className(tdClasses.toString());
        if (hAlign != null) {
            td.align(hAlign.getTextAlignString());
        }
        if (vAlign != null) {
            td.vAlign(vAlign.getVerticalAlignString());
        }

        // Add the inner div.
        DivBuilder div = td.startDiv();
        div.style().outlineStyle(OutlineStyle.NONE).endStyle();

        // Render the cell into the div.
        renderCell(div, context, column, rowValue);

        // End the cell.
        div.endDiv();
        td.endTD();
    }

    // End the row.
    tr.endTR();

    if (isSelected) {
        buildExpandedRow(rowValue, absRowIndex, columnCount, trClasses, isEven, isSelected);
    }
}

/**
 * @param trClasses
 * 
 */
private void buildExpandedRow(T rowValue, int absRowIndex, int columnCount, StringBuilder trClasses, boolean isEven, boolean isSelected) {
    TableRowBuilder tr = startRow();
    tr.className(trClasses.toString());

    Column<T, ?> column = expandColumn;
    // Create the cell styles.
    StringBuilder tdClasses = new StringBuilder(cellStyle);
    tdClasses.append(isEven ? evenCellStyle : oddCellStyle);
    tdClasses.append(firstColumnStyle);
    if (isSelected) {
        tdClasses.append(selectedCellStyle);
    }
    tdClasses.append(lastColumnStyle);

    // Add class names specific to the cell.
    Context context = new Context(absRowIndex, expandColumnIndex, cellTable.getValueKey(rowValue));
    String cellStyles = column.getCellStyleNames(context, rowValue);
    if (cellStyles != null) {
        tdClasses.append(" " + cellStyles);
    }

    // Build the cell.
    HorizontalAlignmentConstant hAlign = column.getHorizontalAlignment();
    VerticalAlignmentConstant vAlign = column.getVerticalAlignment();
    TableCellBuilder td = tr.startTD();
    td.colSpan(columnCount);
    td.className(tdClasses.toString());
    if (hAlign != null) {
        td.align(hAlign.getTextAlignString());
    }
    if (vAlign != null) {
        td.vAlign(vAlign.getVerticalAlignString());
    }

    // Add the inner div.
    DivBuilder div = td.startDiv();
    div.style().outlineStyle(OutlineStyle.NONE).endStyle();

    // Render the cell into the div.
    renderCell(div, context, column, rowValue);

    // End the cell.
    div.endDiv();
    td.endTD();

    // End the row.
    tr.endTR();
} 
```

# iphone - 在 iphone App 中使用 NSPredicate 时应用程序崩溃？

> ID：11306250
> 
> 赞同：0
> 
> 时间：2012-07-03T07:22:07.567
> 
> 标签：iphone, ios, core-data, nspredicate, nsfetchrequest

当我在从 Coredata 实体获取唯一用户数据时使用 NSPredicate 时，应用程序崩溃了。但是，没有错误日志。这是正在使用的代码，

```
if (managedObjectContext == nil) 
{ 
    managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
}

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Name==%@",selectedUserName];  
NSFetchRequest *fectchreq = [[NSFetchRequest alloc] init];
NSEntityDescription *entitydes = [NSEntityDescription entityForName:@"ALLData" inManagedObjectContext:managedObjectContext];
[fectchreq setEntity:entitydes];
[fectchreq setPredicate:predicate];

NSSortDescriptor *sortdes = [[NSSortDescriptor alloc] initWithKey:@"Name" ascending:YES];
NSArray *sortdesarray = [[NSArray alloc] initWithObjects:sortdes, nil];
[fectchreq setSortDescriptors:sortdesarray];
[sortdes release];
[sortdesarray release];   
NSError *error = nil; 
//NSMutableArray *storeddata = [[[managedObjectContext executeFetchRequest:fectchreq] error:&error] mutableCopy];
NSArray *storeddata = [managedObjectContext executeFetchRequest:fectchreq error:&error];
//[fectchreq release];
NSLog(@"StoreData : %@, count : %d",storeddata, [storeddata count]); 
```

有人可以帮忙解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:37:08.087

```
NSError *error; 
NSMutableArray *storeddata = [managedObjectContext executeFetchRequest:fectchreq error:error]; 
```

您需要将此代码更改为：

```
NSError *error = nil;
NSArray *storeddata = [managedObjectContext executeFetchRequest:fectchreq error:&error]; 
```

原因：错误参数应该作为指针传递，因为声明`-executeFetchRequest:(NSFetchedRequest *)request error:(NSError **)error;` 也是这个方法返回`NSArray`，而不是`NSMutableArray`- 你必须得到关于这个的编译器警告......

# treeview - 尝试刷新树查看器时释放树

> ID：11306254
> 
> 赞同：0
> 
> 时间：2012-07-03T07:22:29.123
> 
> 标签：treeview, eclipse-rcp, rcp, treeviewer

我在视图中有一个树查看器。我已经实现了树内容提供程序的侦听器。当某些数据发生变化时，会通知树。但是当我试图刷新我的 treeviewer 时，会出现一条错误消息并显示树已被处理。我的刷新动作有什么问题，为什么树会被处理掉。

这是我的代码片段。

```
getChildren()
{
     resource.addListener(this);
}

public void dataChangeListener(changeddata)
{
     tree.refresh(changedata,true); // Tree shows as disposed.
} 
```

问候， 吉里什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:17:36.620

UI 的所有更新都需要在 UI 线程中完成。您可以使用以下代码执行此操作。您还应该在调用刷新之前检查树是否已被释放。

```
 Display.getDefault().asyncExec(new Runnable() {
        @Override
        public void run() {
            if (!tree.getTree().isDisposed()) {
                tree.refresh(changedData, true);
            }
        }
    }); 
```

# lucene - 关闭 Lucene 索引的最佳实践

> ID：11306257
> 
> 赞同：0
> 
> 时间：2012-07-03T07:22:40.653
> 
> 标签：lucene, indexing

我目前在我的会话中有一个 Seam 组件。该组件持有一个自定义的“Lucene 对象”（私有属性），它在构造函数中打开一个 Lucene 索引。当我想搜索时，我在我的会话中使用“Lucene 对象”，它使用已经打开的 Lucene 索引。所以当我想搜索别的东西时，我仍然可以重用已经打开的索引。

但是现在，我没有一些关闭读者的 Java 逻辑。这不应该在诸如destroy()方法（由te JVM调用）之类的方法中完成吗？或者如果我不手动关闭阅读器可以吗？

谢谢，乔臣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:03:27.760

您永远不应该让 lucene 阅读器打开的时间超过线程的长度。不关闭这些读者会让你遇到操作系统问题。（你用完了文件锁）

# macos - NSMutableURLRequest 中的 forHTTPHeaderField 可以设置哪些属性列表

> ID：11306259
> 
> 赞同：1
> 
> 时间：2012-07-03T07:22:47.350
> 
> 标签：macos, cocoa, nsmutableurlrequest

我们可以为请求设置用户代理，如下所述，

```
 NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL:url];
   [request setValue:userAgent forHTTPHeaderField:@"User-Agent"]; 
```

我可以设置内容类型和内容长度，我只知道这些属性，我还能传递什么，我没有找到文档。我想知道 forHTTPHeaderField 的所有属性列表。如果有的话，请分享任何链接有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:09:58.020

标准标题解释[http://en.m.wikipedia.org/wiki/List_of_HTTP_header_fields](http://en.m.wikipedia.org/wiki/List_of_HTTP_header_fields)和[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

但是您当然可以设置服务器希望看到的任何值，包括用户定义的信息。

# character-encoding - 用python列出目录中的中文文件名

> ID：11306262
> 
> 赞同：0
> 
> 时间：2012-07-03T07:22:59.503
> 
> 标签：character-encoding, python-2.7

我试图列出目录中所有文件的名称和大小，但是当有中文文件时出现错误，我在 Windows 7 上使用 Python 2.7

这是我的代码

```
import os

path = '\'
listing = os.listdir(path)
for infile in listing:
    if infile.endswith(".csv"):
        print infile + ";"+ str(os.path.getsize(path + infile)) 
```

这是我得到的错误

```
Traceback (most recent call last):
  File "file_size.py", line 8, in <module>
    print infile + ";"+ str(os.path.getsize(path + infile))
  File "C:\Python27\lib\genericpath.py", line 49, in getsize
    return os.stat(filename).st_size
WindowsError: [Error 123] The filename, directory name, or volume label syntax is incorrect: '\DB?1333366331.436754.048342.csv'

C:\>python file_size.py
  File "file_size.py", line 7
    if infile.endswith(".csv"):
                              ^
IndentationError: unindent does not match any outer indentation level 
```

导致错误的文件名是DB表1333366331.436754.048342.csv

我怎样才能避免这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:09:36.013

我会尝试让你的根路径 unicode。我的猜测是 listdir 使用与初始字符串相同的编码，并且在读取非 ascii 字符时出错。

IE

```
path = u'\' 
```

来源： [http ://docs.python.org/library/os.html#os.listdir](http://docs.python.org/library/os.html#os.listdir)

“在 2.3 版更改：在 Windows NT/2k/XP 和 Unix 上，如果路径是 Unicode 对象，则结果将是 Unicode 对象列表。无法解码的文件名仍将作为字符串对象返回。”

# powershell - 如何获取网站集或网站或列表的 guid

> ID：11306266
> 
> 赞同：3
> 
> 时间：2012-07-03T07:23:25.630
> 
> 标签：powershell, sharepoint, sharepoint-2010

我们可以使用以下内容获取任何网站集对象。

```
SPSite site = new SPSite("http://mySiteCollection/mySite"); 
```

但是，将来我可以将我的网站网址更改为`"http://mySiteCollection/YourSite"`. 我认为这个问题的解决方案是使用 GUID。如何查看特定站点集合或站点的 guid？我对列表有同样的问题。

我相信我可以使用以下 powershell 命令检索 Guid。

```
PS > $mysite =  Get-SPSite <SITE_URL>
PS > $mysite.id 
```

但是不知道有没有办法使用powershell查看guid？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:32:33.400

你必须通过一些东西来检索网站。

如果您不想使用 URL，您可以按照您的建议使用 Guid，或者您可以使用根网站的标题。

使用它来查看更多选项

`get-spsite | select Url,ID, RootWeb`

更改 SPSite URL 很简单，我只使用 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-15T21:21:02.620

实际上，不使用代码有一种方法，如果您有 Google Chrome 或 Firefox -> Firebug，您可以通过转到“内容和结构”右键单击您想知道其 id 的“-”“+”图标来获取 id . 你会看到类似这样`<a href="javascript:__doPostBack('TreeView1','sArea:?SPWeb:31f18323-e7da-4b9a-8a09-293f24449589:\\SPList:35a33810-52c9-456d-adbb-8d1a819176f0?SPWeb:31f18323-e7da-4b9a-8a09-293f24449589:')" onclick="TreeView_SelectNode(TreeView1_Data, this,'TreeView1t39');" id="TreeView1t39i" tabindex="-1"><img src="/_layouts/images/itgen.png" alt="List" style="border-width:0;"></a>` 的 SpWeb: 是你的 SpWeb id 而 SPList 是你的列表 id。您还可以通过列表设置来验证列表 ID。

# java - php webservice返回数组，但无法从java客户端获取数组

> ID：11306267
> 
> 赞同：0
> 
> 时间：2012-07-03T07:23:28.440
> 
> 标签：java, php, web-services, soap

我写了一个 php web 服务。功能如下：

```
function get_device_info(){
    $conn= mysql_connect("localhost", "admin", "123456") or die("Could not connect: " . mysql_error());
    mysql_select_db('devices',$conn);
    $sql="select id,description,hostname,status_rec_date,availability from host";
    $query=mysql_query($sql);
    while($myrow = mysql_fetch_array($result)){
        $host_msg[$i]=$myrow;
        $i++;
    }
   return $host_msg;
   mysql_close($conn);

} 
```

然后我用java编写了soap客户端来调用这个web服务。

```
import java.net.MalformedURLException;  
import java.rmi.RemoteException;  
import javax.xml.rpc.ServiceException;  
import org.apache.axis.client.Call;  
import org.apache.axis.client.Service;
public class javasoapclient {
    public static void main(String[] args) throws ServiceException, MalformedURLException, RemoteException {  
        String serviceUrl = "http://192.168.1.44/webservices/serverSoap.php";  
        Service service = new Service();  
        Call call = (Call) service.createCall();  
        call.setTargetEndpointAddress(new java.net.URL(serviceUrl));  
        call.setOperationName("get_device_info");
        String reVal = call.invoke(new Object[] {}).toString();
        System.out.println(reVal);
    }
} 
```

它无法获取数组。我是 PHP 新手。任何人都可以帮忙吗？

先谢谢了！</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:54:07.437

这不是 SOAP 的工作方式。SOAP 有一个独特的结构：

```
<?xml version="1.0"?>
<soap:Envelope
xmlns:soap="http://www.w3.org/2001/12/soap-envelope"
soap:encodingStyle="http://www.w3.org/2001/12/soap-encoding">

<soap:Body xmlns:m="http://www.example.org/stock">
  <m:GetStockPrice>
    <m:StockName>IBM</m:StockName>
  </m:GetStockPrice>
</soap:Body>

</soap:Envelope> 
```

您返回的只是一个简单的数组。

为了在java中获取这个数组，你最好使用[HttpClient](http://hc.apache.org/httpclient-3.x/)

# javascript - 如何在剑道组合框中更改/设置值

> ID：11306268
> 
> 赞同：16
> 
> 时间：2012-07-03T07:23:28.850
> 
> 标签：javascript, jquery, combobox, kendo-ui

谁能让我知道我们如何动态更改剑道组合框的值。

小提琴在这里 - [http://jsfiddle.net/ashwyn/yL6w3/1/](http://jsfiddle.net/ashwyn/yL6w3/1/)

在上面的小提琴中，当我们单击时`click`，显示的值应更改为`three`（例如）

我找到了列出所有数据源方法的链接 -
[http: //www.kendoui.c​​om/documentation/framework/datasource/methods.aspx](http://www.kendoui.com/documentation/framework/datasource/methods.aspx)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-06-17T10:54:04.860

如果你知道你想要的值，你也可以这样做：

```
$("#MyComboBox").data("kendoComboBox").value(id); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-03T07:29:41.343

**工作演示** [http://jsfiddle.net/Bxsge/2/](http://jsfiddle.net/Bxsge/2/) **或** [http://jsfiddle.net/Bxsge/1/](http://jsfiddle.net/Bxsge/1/)（演示的行为当您单击链接时，选择将更改为`three`选定值。）

通过 jQuery 对象选择`// selects by index combobox.select(1); // selects item`

链接：[http ://www.kendoui.c​​om/documentation/ui-widgets/combobox/methods.aspx](http://www.kendoui.com/documentation/ui-widgets/combobox/methods.aspx)

希望这可以帮助，`:)`

**代码**

```
$(function(){
    var CB = $("select").kendoComboBox();

    $("a").click(function(){

         var $cbx = $("select").data("kendoComboBox")

         $cbx.select(2);

    });
});
​ 
```

# ssl - 为 Joomla 登录模块启用 SSL 时强制将 url 转发到 http

> ID：11306270
> 
> 赞同：0
> 
> 时间：2012-07-03T07:23:49.013
> 
> 标签：ssl, joomla

我为我的 joomla 网站启用了“加密登录表单”，但在用户登录后，它总是转发到 https:// url。有什么简单的方法可以强制转发的 url 使用 http:// ？那么 ssl 将仅用于登录或注册目的吗？谢谢

# hibernate - Hibernate Multitenancy with Discriminator 方法

> ID：11306273
> 
> 赞同：1
> 
> 时间：2012-07-03T07:23:51.780
> 
> 标签：hibernate, multi-tenant, hibernate-4.x

Hibernate[还不支持](http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch16.html#d5e4632)通过鉴别器策略方法实现多租户。我们正在考虑在我们的项目中实施这一策略。但是我们总体上对查询性能有一些疑问。查询性能是否会比分离数据库/模式方法更差，因为在这种情况下，查询是在许多租户的单一数据模式上运行的？或者在这种情况下，除了创建索引之外，还有什么方法可以提高查询性能？

我们正在考虑鉴别器方法，因为如果数据在单一模式中，最好进行备份和恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:52:18.500

它肯定会影响性能。“单一备份/恢复”论点仅在某种形式的灾难情况下才真正相关。通常，您希望还原尽可能细化（读取破坏性最小）。

至于性能，您可以（取决于您的数据库）查看在此鉴别器值上利用分区。支持分区的数据库在构建查询计划时通常会考虑分区。尽管有些要求分区值作为文字而不是参数提供，这有时会很棘手。

# iphone - 无法将图像设置为 backBarButtonItem

> ID：11306280
> 
> 赞同：1
> 
> 时间：2012-07-03T07:24:20.823
> 
> 标签：iphone, objective-c, uitableview

我有`UITableView`基础应用程序，我无法`backBarButtonItem`正确设置。后退按钮是按钮，当我选择任何项目时出现，使用方法调用第二个视图`didSelectRowAtIndexPath`。当我尝试这样设置时：

```
UIButton *back1=[UIButton buttonWithType:UIButtonTypeCustom];
    [back1 setFrame:CGRectMake(10.0, 2.0, 45.0, 40.0)];
    [back1 addTarget:nil action:NULL forControlEvents:UIControlEventTouchUpInside];
    [back1 setImage:[UIImage imageNamed:@"back_button.png"] forState:UIControlStateNormal];
    UIBarButtonItem *back = [[UIBarButtonItem alloc]initWithCustomView:back1];
    self.navigationItem.backBarButtonItem = back; 
```

只有具有默认样式的后退按钮，并且以某种方式带有我的`TableView`控制器窗口的标题。

当我这样设置时：

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] 
                               initWithImage:[UIImage imageNamed:@"back_button.png"]
                               style:UIBarButtonItemStyleBordered 
                               target:nil 
                               action:nil];

 self.navigationItem.backBarButtonItem = backButton; 
```

有一个图像，但是，它看起来像默认后退按钮中的“插入”，看起来一点也不好看。

请帮助我.. 我尝试了很多方法来解决这个问题，但是，在许多情况下，只有默认的返回按钮，标题为“产品”（我的导航栏顶部出现了标题`UITableView`）。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:28:01.370

```
 UIImage *buttonImage = [UIImage imageNamed:@"back_button.png"];
   UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
   [backButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
  [backButton setTitle:@"Back" forState:UIControlStateNormal];
  backButton.font = [UIFont boldSystemFontOfSize:12];
 backButton.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);
 [backButton addTarget:self action:@selector(showMeter) 
       forControlEvents:UIControlEventTouchUpInside];

 self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] 
       initWithCustomView:backButton]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T06:05:48.827

```
//Create resizable images
UIImage *myButton = [[UIImage imageNamed:@"yourButton"] 
        resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];

//Set the background image for *all* UIBackBarButtons
[[UIBarButtonItem appearance] setBackgroundImage:myButton forState:UIControlStateNormal 
    barMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:27:50.993

You should assign it to `self.navigationItem.leftBarButtonItem`.

```
self.navigationItem.leftBarButtonItem = backButton; 
```

# binding - Monotouch spotify 绑定

> ID：11306281
> 
> 赞同：1
> 
> 时间：2012-07-03T07:24:21.877
> 
> 标签：binding, xamarin.ios

我正在尝试将 spotify api 绑定到 monotouch。但似乎无法让它工作，我想我有点过头了；）。

我尝试了什么：

*   我从 ios libspotify.framework 中提取了 libspotify.a。
*   我将 libspotify.a 添加到我的项目中。

我按照这里提到的解释：http: [//docs.xamarin.com/ios/advanced_topics/linking_native_libraries](http://docs.xamarin.com/ios/advanced_topics/linking_native_libraries)创建绑定并将额外的 gcc_flags 添加到项目中。

现在它全部编译和链接但是当我运行它时我得到异常：system.dllnotfoundexception：__internal

我不知道我在这里做错了什么。任何帮助或指示将不胜感激。

理查德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:18:50.637

应该是`__Internal`，不是`__internal`。

# c# - 数据网格中的行号 (wpf)

> ID：11306285
> 
> 赞同：0
> 
> 时间：2012-07-03T07:24:41.577
> 
> 标签：c#, wpf

我用数据网格选择组合框中的值：

```
private void status_SelectionChanged(object sender, SelectionChangedEventArgs e)
{

} 
```

我怎么知道我选择的行号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:27:03.583

What about

```
datagrid.SelectedIndex 
```

Make sure that `SelectionMode = "Single"`

# ruby-on-rails - 未定义的方法“检测”：“Model#property”：Symbol。错误的自引用 Neo4j 模型定义？

> ID：11306286
> 
> 赞同：0
> 
> 时间：2012-07-03T07:24:44.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, jruby, neo4j

在运行单元测试时，我的一些测试出现以下错误：

```
 6) Error:
test_name_can't_be_nil(NodeTest):
NoMethodError: undefined method `detect' for :"Node#children":Symbol
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activemodel-3.1.4/lib/active_model/naming.rb:85:in `model_name'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activemodel-3.1.4/lib/active_model/errors.rb:315:in `generate_message'
    org/jruby/RubyArray.java:2339:in `collect'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activemodel-3.1.4/lib/active_model/errors.rb:314:in `generate_message'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activemodel-3.1.4/lib/active_model/errors.rb:235:in `add'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activemodel-3.1.4/lib/active_model/errors.rb:256:in `add_on_blank'
    org/jruby/RubyArray.java:1615:in `each'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activemodel-3.1.4/lib/active_model/errors.rb:254:in `add_on_blank'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activemodel-3.1.4/lib/active_model/validations/presence.rb:9:in `validate'
    org/jruby/RubyBasicObject.java:1704:in `__send__'
    org/jruby/RubyKernel.java:2101:in `send'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activesupport-3.1.4/lib/active_support/callbacks.rb:306:in `_callback_before_47'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activesupport-3.1.4/lib/active_support/callbacks.rb:410:in `_run_validate_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activesupport-3.1.4/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activemodel-3.1.4/lib/active_model/validations.rb:212:in `run_validations!'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activemodel-3.1.4/lib/active_model/validations.rb:179:in `valid?'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/neo4j-2.0.1-java/lib/neo4j/rails/validations.rb:29:in `valid?'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/neo4j-2.0.1-java/lib/neo4j/rails/callbacks.rb:26:in `valid_with_callbacks?'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/activesupport-3.1.4/lib/active_support/callbacks.rb:405:in `_run_validation_callbacks'
    /Users/dave/.rvm/gems/jruby-1.6.7.2/gems/neo4j-2.0.1-java/lib/neo4j/rails/callbacks.rb:26:in `valid_with_callbacks?'
    /Users/dave/Projects/myapp/test/test_helper.rb:11:in `assert_presence'
    /Users/dave/Projects/myapp/test/unit/node_test.rb:9:in `test_name_can't_be_nil'
    org/jruby/RubyBasicObject.java:1698:in `__send__' 
```

有问题的违规测试是：

```
class NodeTest < ActiveSupport::TestCase
    def assert_presence( model, field)
        model.send( (field.to_s + '='), nil )
        model.valid?
        assert_match /can not be blank/, model.errors[field].join,
        "Presence error for #{field} not found on #model.class"
    end
    def setup
        @node = FactoryGirl.build :node
    end

    test "name can't be nil" do
        assert_presence @node, :name
    end
    ....
end 
```

其中节点在模型中定义为：

```
class Node < Neo4j::Rails::Model
    include Neo4j::NodeMixin

    property :name, type: String, index: :exact
    property :description, type: String

    has_one(:creator).from(User, :created_nodes)

    has_n(:children).to(Node)              ## <--- Suspected difficult line
    has_n(:parents).from(Node, :children)  ## <--- Suspected difficult line
    has_n(:capable_users).from(User, :capabilities)

    # The following has the Class commented out because this somehow triggers
    # an error from the 'has_n(:children).to(Node)' line
    has_n(:challenges)  #.to(Challenge)
    ....
end 
```

基本上，服务器可以正常运行，但每次我尝试调用有效时都会崩溃？在节点上（不是其他模型）。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:25:46.277

问题是我选择的属性，即父母（也许还有孩子）。

我查看了发生错误的活动模型中的源（[此处](https://github.com/rails/rails/blob/v3.1.4/activemodel/lib/active_model/naming.rb#L85)），并看到了这一点：

```
def model_name
  @_model_name ||= begin
    namespace = self.parents.detect { |n| n.respond_to?(:_railtie) }  # <--- this line
    ActiveModel::Name.new(self, namespace)
  end
end 
```

如您所见，父母似乎在使用。我更改了名称和验证、保存等，现在可以使用了。

# c++ - 允许托管环境中的托管代码回调非托管代码

> ID：11306287
> 
> 赞同：3
> 
> 时间：2012-07-03T07:24:46.243
> 
> 标签：c++, .net, c++-cli, clr-hosting

我有托管 clr 的 C++ 代码，以便使用用 c# 编写的 Managed.dll。

这个 .net 有一个类似下面的方法，它允许代码注册事件通知：

```
public void Register(IMyListener listener); 
```

界面看起来像这样

```
public interface IMyListener
{
    void Notify(string details);
} 
```

我想在程序的 C++ 部分做一些事情，由 .net 世界中的事件触发。如果有必要，我什至不介意为了使 Managed.dll 对 C++ 更友好而创建另一个托管 dll。

我在这里有什么选择？我确信我可以实现的唯一一个是：

*   编写另一个托管 dll 来监听这些事件，将它们排队并让 C++ 代码通过轮询访问队列

这当然会从“中断”样式变为“轮询”样式，具有所有优点和缺点以及提供排队的需要。我们可以不进行轮询吗？我可以以某种方式调用托管代码并为其提供一个指向 C++ 世界的函数指针作为参数吗？

**更新** 感谢 stijn 的回答和评论，我希望我朝着正确的方向前进了一点，但我想仍然存在的主要问题是如何将 fn 指针从非托管土地传递到 clr 托管环境。

假设我有一个“int fn(int)”类型的函数指针，我想传递给托管世界，以下是相关部分：

**托管代码**(C++/CLI)

```
typedef int (__stdcall *native_fun)( int );

String^ MyListener::Register(native_fun & callback)
{
    return "MyListener::Register(native_fun callback) called callback(9): " + callback(9);
} 
```

**非托管代码**

```
typedef int (__stdcall *native_fun)( int );
extern "C" static int __stdcall NativeFun(int i)
{
    wprintf(L"Callback arrived in native fun land: %d\n", i);
    return i * 3;
}
void callCLR()
{
    // Setup CLR hosting environment
    ...
    // prepare call into CLR
    variant_t vtEmpty;
    variant_t vtRetValue;
    variant_t vtFnPtrArg((native_fun) &NativeFun);
    SAFEARRAY *psaMethodArgs = SafeArrayCreateVector(VT_VARIANT, 0, 1);
    LONG index = 0;
    SafeArrayPutElement(psaMethodArgs, &index, &vtFnPtrArg);
    ...
    hr = spType->InvokeMember_3(bstrMethodName, static_cast<BindingFlags>(
            BindingFlags_InvokeMethod | BindingFlags_Static | BindingFlags_Public),
            NULL, vtEmpty, psaMethodArgs, &vtRetValue);
    if (FAILED(hr))
            wprintf(L"Failed to invoke function: 0x%08lx\n", hr); 
```

调用将`spType->InvokeMember_3`导致`0x80131512`结果。

我将指向 NativeFun 的指针传递给托管世界的方式似乎有问题，或者我的函数是如何定义的。当使用 String^ 参数而不是 fn ptr 时，我可以成功调用 CLR 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:49:38.087

您可以在 C++/CLI 中编写一个单独的 dll 并在那里实现接口，并将逻辑转发给 C++。根据我混合托管/非托管的经验，我可以说使用中间 C++/CLI 步骤是可行的方法。无需摆弄 DllImport 和函数，而是两个世界之间的坚实桥梁。它只需要一些时间来适应语法和编组，但是一旦你掌握了它，它实际上是毫不费力的。如果您需要在托管类中保存 C++ 对象，最好的方法是使用[类似 clr_scoped_ptr](https://codereview.stackexchange.com/questions/1695/scoped-ptr-for-c-cli-ensure-managed-object-properly-frees-owned-native-object)的东西。

代码如下所示：

```
//header
#using <Managed.dll>

//forward declare some native class
class NativeCppClass;

public ref class MyListener : public IMylIstener
{
public:
  MyListener();

    //note cli classes automatically implement IDisposable,
    //which will call this destructor when disposed,
    //so used it as a normal C++ destructor and do cleanup here
  ~MyListener();

  virtual void Notify( String^ details );

private:
  clr_scoped_ptr< NativeCppClass > impl;
}

//source
#include "Header.h"
#include <NativeCppClass.h>

//here's how I marshall strings both ways
namespace
{
  inline String^ marshal( const std::string& i )
  {
    return gcnew String( i.data() );
  }

  inline std::string marshal( String^ i )
  {
    if( i == nullptr )
      return std::string();
    char* str2 = (char*) (void*) Marshal::StringToHGlobalAnsi( i );
    std::string sRet( str2 );
    Marshal::FreeHGlobal( IntPtr( str2 ) );
    return sRet;
  }
}

MyListener::MyListener() :
  impl( new NativeCppClass() )
{
}

MyListener::~MyListener()
{
}

void MyListener::Notify( String^ details )
{
  //handle event here
  impl->SomeCppFunctionTakingStdString( marshal( details ) );
} 
```

**更新** 这是一个从托管世界调用 C++ 回调的简单解决方案：

```
pubic ref class CallbackWrapper
{
public:
  typedef int (*native_fun)( int );

  CallbackWrapper( native_fun fun ) : fun( fun ) {}

  void Call() { fun(); }

  CallbackWrapper^ Create( ... ) { return gcnew CallbackWrapper( ... ); }

private:
  native_fun fun;
} 
```

如果需要，您也可以将其包装在 Action 中。另一种方法是使用`GetDelegateForFunctionPointer`，例如[在这个 SO question](https://stackoverflow.com/questions/6282264/pass-a-function-pointer-from-c-to-be-called-by-c-sharp-arguments-of-function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-07T21:39:37.690

如果有人仍然需要更好的方法，您可以简单地将**c++ 函数传递给 CLR 使用`intptr_t`变体和`long`托管**，然后使用 Marshall 和委托来调用您的本机函数，超级简单并且像魅力一样工作。

如果您需要代码片段，请告诉我。

# shell - 从Unix中的文件逐行读取

> ID：11306289
> 
> 赞同：0
> 
> 时间：2012-07-03T07:24:54.817
> 
> 标签：shell, unix

我是 Unix 的新手，我有一个包含文件名列表的文件。我正在尝试复制同一目录中的每个文件，但扩展名不同。它不工作。谁能告诉我为什么我的代码在下面 csl_nl.sts 是具有其他文件名的文件？

```
#!/bin/csh
set files = ("csl_nl.sts")
foreach file ('cat files')

  echo "Copying" $file "to" $file.cdc
  cp $file $file.cdc

end
exit 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:19:31.133

这对我有用

```
#!/bin/csh

foreach file (`cat csl_nl.sts`)
    set a=`echo $file | awk -F"." '{print $1}'`
    echo "$a"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T07:55:03.700

1.  [获取](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/)用于编写脚本的[Real](http://www.grymoire.com/Unix/CshTop10.txt) [Shell 。](http://www.grymoire.com/Unix/Csh.html#uh-0)
2.  阅读有关阅读行和文件操作[的](http://mywiki.wooledge.org/BashFAQ/001) [圣经。](http://mywiki.wooledge.org/BashFAQ/030)

一个例子

```
#!/bin/sh
while IFS= read -r file; do
    printf 'Moving %s to %s\n' "$file" "${file}.cdc"
    ${file:+'false'} || cp -- "$file" "${file}.cdc"
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:06:59.733

```
#!/bin/ksh

OLD_EXTN=old
NEW_EXTN=new

cat csl_nl.sts | while read line;
do
  if [ ! -f $line];
  then
    echo $line does not exist ;
  else
    newfn=$(dirname $line)/$(basename $line .$OLD_EXTN).$NEW_EXTN
    echo Copy from $line to $newfn
    cp $line $newfn;
  fi
done 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-03T09:17:19.470

看看这是否有帮助：

```
#!/bin/csh
  set files = ("abc")
  foreach file (`cat $files`)
    set ext = ("cdc")
    set file2 = "$file.$ext"
    echo "Copying" $file "to" $file2;
    cp $file $file2;

  end
exit 0 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T07:41:16.597

不能说我熟悉 (t)csh，但是，这是强制性的 bash 示例：

```
#!/bin/bash

for file in `cat csl_ns.tst`; do
echo $file  " -> "  $file.cdc
cp $file $file.cdc
done 
```

取决于输入文件的格式，但如果它们由空格或行分隔，那应该可以工作。

# android - 在 phonegap 中实现长时间运行的后台任务

> ID：11306290
> 
> 赞同：1
> 
> 时间：2012-07-03T07:25:05.103
> 
> 标签：android, cordova, backgroundworker

我正在尝试运行一段 javascript 来不断轮询服务器以获取更新。从最终用户的角度来看，在对应用程序性能影响最小的情况下，最好的方法是什么？

我尝试在单独的 iframe 中生成它，但结果性能非常糟糕。

**我目前正在研究android，所以如果解决方案涉及编写一个phonegap插件来轮询服务器而不是javascript，那么现在应该没问题。轮询服务器后，我需要更新本地存储中的数据。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:39:10.630

我已经在 IOS 中实现了这一点。phonegap 的问题在于您无法创建运行 javascript 的计时器任务，因为如果您的 .html 页面发生更改，该任务将被终止。

除非您只有一个 .html 并且您正在动态更改正文部分。如果是这种情况，请在 javascript 中查找 setInterval。

如果不是这种情况，那么在 javascript 上实现某些东西不是解决方案，在 IOS 中，我已经实现了一个自定义插件来运行异步 Web 服务调用。您可以做类似的事情，编写一个运行 AsyncTask doInBackground() 的插件，然后在 javascript 中回发结果。有很多关于如何在 phonegap 中创建自定义插件的教程。希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:26:33.443

如果您打算仅在应用程序正在使用时进行轮询，则`setInterval()`效果很好。我的应用程序使用的是 jQuery Mobile，默认情况下它只更新 DOM 而不是重新加载整个页面，这样我`setInterval()`就可以在启动后继续运行。

Android 已经支持[后台服务](http://developer.android.com/reference/android/app/Service.html)，您可以将其用于长时间连续运行的任务。

我与上述组合一起使用的一种解决方案：

*   当应用程序运行时，我`setInterval()`会定期检查更新。
*   在开始更新检查之前后台检查应用程序是否正在运行
*   如果应用程序没有运行，那么我使用后台服务代码来检查服务器上是否有任何更新
*   如果有更新，那么我会放置一个系统托盘通知来通知用户有更新在等待他
*   他一启动应用程序，我就调用该服务来获取更新。

这样我的主要逻辑仍然在 Javascript 端，我不需要再次在 Javascript 和本机中编写相同的逻辑。

如果更新不是很频繁，那么您应该考虑使用`PushNotification`

# parsing - 支持布尔表达式中的可选引号

> ID：11306292
> 
> 赞同：2
> 
> 时间：2012-07-03T07:25:10.453
> 
> 标签：parsing, antlr, antlrworks

## 背景

几天来，我一直在使用 ANTLRWorks (V 1.4.3) 并尝试编写一个简单的布尔解析器。下面的组合词法分析器/解析器语法适用于大多数要求，包括支持带引号的空白文本作为布尔表达式的操作数。

* * *

## 问题

我希望语法适用于空白操作数而不需要引号。

* * *

## 例子

例如，表达式-

> “左右”和中心

即使删除引号后也应该具有相同的解析树-

> 左右和中心。

我一直在学习回溯、谓词等，但似乎找不到解决方案。

* * *

## 代码

以下是我到目前为止所掌握的语法。感谢您对愚蠢错误的任何反馈:)。

词法分析器/解析器语法

```
grammar boolean_expr;

options {
    TokenLabelType=CommonToken;
    output=AST;
    ASTLabelType=CommonTree;
}

@modifier{public}
@ctorModifier{public}

@lexer::namespace{Org.CSharp.Parsers}
@parser::namespace{Org.CSharp.Parsers}

public
evaluator 
    : expr EOF 
    ;

public
expr 
    : orexpr 
    ;

public  
orexpr 
    : andexpr (OR^ andexpr)* 
    ;

public
andexpr 
    : notexpr (AND^ notexpr)* 
    ;

public
notexpr 
    : (NOT^)? atom 
    ;

public
atom 
    : word | LPAREN! expr RPAREN! 
    ;

public
word  
    :  QUOTED_TEXT | TEXT 
    ;

/*
 * Lexer Rules
 */

LPAREN 
    : '(' 
    ;

RPAREN 
    : ')' 
    ;

AND 
    : 'AND'
    ;

OR 
    : 'OR'
    ;

NOT
    : 'NOT'
    ;

WS 
    :  ( ' ' | '\t' | '\r' | '\n')  {$channel=HIDDEN;}  
    ;

QUOTED_TEXT  
    : '"' (LETTER | DIGIT | ' ' | ',' | '-')+ '"'
    ;

TEXT
    : (LETTER | DIGIT)+ 
    ;

/*
Fragment lexer rules can be used by other lexer rules, but do not return tokens by themselves
*/
fragment DIGIT  
    :   ('0'..'9') 
    ; 

fragment LOWER  
    :   ('a'..'z') 
    ; 

fragment UPPER  
    :   ('A'..'Z') 
    ; 

fragment LETTER 
    :   LOWER | UPPER 
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:49:09.517

只需让`TEXT`您的`atom`规则匹配一次或多次：`TEXT+`. 当它`TEXT`多次匹配一个标记时，您还需要为这些`TEXT`标记创建一个自定义根节点（我`WORD`在下面的语法中添加了一个虚构的标记）。

```
grammar boolean_expr;

options {
    output=AST;
}

tokens {
  WORD;
}

evaluator 
    : expr EOF 
    ;

...

word  
    : QUOTED_TEXT 
    | TEXT+       -> ^(WORD TEXT+)
    ;

... 
```

您的输入`"left right AND center"`现在将被解析如下：

![在此处输入图像描述](../Images/ff645ebbd3790202cc82fd7f91246359.png)

# oop - OO 设计 - 模式之间的切换

> ID：11306293
> 
> 赞同：1
> 
> 时间：2012-07-03T07:25:21.907
> 
> 标签：oop

我正在设计一个应用程序来监视组件的可用性。

所以首先我有一个**Scheduler**来定期运行可用性检查（例如**Jobs**）。

有几个组件（预计将来会支持更多组件）需要监控，并且每个组件都有不同的方法来确定它是否可用。

所以我想我会用一个名为**verify的****抽象布尔方法来做一个抽象的****ComponentStatusVerifier**类，并为每个组件创建一个子类来实现特定的验证策略。

 ****不过问题有点复杂。应用程序应该支持在两个不同的平台上运行（例如服务器，并且将来有可能支持更多平台），并且要监视的组件集取决于部署应用程序的平台。

可以为每个目标服务器单独构建应用程序，或者通过配置让应用程序知道它在哪里运行 - 所以问题不在于如何让应用程序知道它在哪里运行。

**我的问题是如何补充应用程序的设计以支持这些运行模式，同时不失去各个类的高内聚性。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:40:34.147

您可以让您的`ComponentStatusVerifier`that 检查*一个*组件还检查它是否*应该*在运行时根据它的运行位置进行验证。您的`verify`方法应该扩展一点来支持它：它应该接收相关*参数*：就像应用程序所在的*平台*：

```
interface ComponentStatusVerifier {
  boolean verify(VerificationParameters parameters);
}

interface VerificationParameters {
  Platform getPlatform();
}

enum Platform {
  PLATFORM1,
  PLATFORM2 // ...
} 
```

此外，根据您的描述，某些诊断信息似乎很重要，而不是简单的`boolean`结果。为此，我将创建一个消息列表，其中包含*验证者*可以报告的信息，如下所示：

```
interface ComponentStatusVerifier {
  VerificationResults verify(VerificationParameters parameters);
}

interface VerificationResults {
  boolean succeeded();
  Iterable<Message> getMessages();
}

interface Message {
  string getDescription();
  MessageType getType();
}

enum MessageType {
  INFO,
  WARNING,
  ERROR
} 
```

（请注意，我使用接口和枚举只是为了展示概念，酌情调整......）

在它不支持的平台上运行的验证器可以这样做：

```
class Platform1SomeComponentVerifier implements ComponentStatusVerifier {
  @Override
  public VerificationResults verify(VerificationParameters parameters) {
    VerificationResults results = new ...
    if (parameters.getPlatform() != Platform.PLATFORM1) {
      results.addMessage(
        new InfoMessage("Skipping verification of component, platform is not PLATFORM1"));
      return results;
    }

    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:32:20.183

好的，根据您的描述，听起来您应该有一个**ComponentStatusVerifier**。

该对象应该包含一个**ComponentConnectorClass**。

**ComponentConnectorClass应该包含一个****Verifier**类的列表，这些类将运行并检查您需要验证的所有内容。

或者你应该能够运行**ComponentConnectorClass**，然后给它一个**Verifier**类的列表来使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:41:36.460

有几种方法可以解决这个问题。

您可以配置所有应用程序以在您的监控应用程序中进行验证。这在一定程度上是灵活和可扩展的。

另一种方法（尽管更具侵入性）是让要检查的应用程序在监控应用程序中注册它们自己。这样，您的监视器唯一要做的就是调用已注册的应用程序。这也是非常灵活和可扩展的，因为您的监控应用程序可能是“愚蠢的”。

我建议使用提议的 Yochai 架构，并有多个验证器类，每个验证器类都实现另一种验证方式，尽管是 http 请求、rmi 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T08:01:04.400

您可以编写[代理类](http://en.wikipedia.org/wiki/Proxy_pattern)来进行必要的编码以检查它是否还活着。

```
 // Remote box
    class remoteObject {
        int check() {
            // I write code for this universe 
            // is multiverse true ?
        }
    }

    class remoteObjectProxy {
        remoteObject y;
        int check() {
            // do things necessary
            return y.check();
        }
    } 

```

```
 // Your box
    class localProxy {
        remoteObjectProxy z;
        int check() {
            // do things necessary
            return z.check();
        }
    } 

```****

# android - Android ListFragment 重复条目

> ID：11306295
> 
> 赞同：0
> 
> 时间：2012-07-03T07:25:26.600
> 
> 标签：android, fragment, listadapter, android-listfragment

我有这个应用程序，我在其中实现了 ActionBar Fragment 接口。在界面之下，有一个 ListFragment ，每次我切换到不同的选项卡时，列表中的条目都会重复。有人可以告诉我使用自定义适配器实现 listfragment 的正确方法吗？

以下是我的代码：FeaturedFragment.java

```
public class FeaturedFragment extends ListFragment {

static final String URL = "http://www.sundancepost.com/ivue/Featured.xml";

static final String KEY_PROJECT = "project"; // parent node
static final String KEY_BANNER = "banner";

ListView featuredList;
FeaturedListAdapter featuredAdapter;
ArrayList<HashMap<String, String>> projectsList = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) { 
    super.onCreateView(inflater, container, savedInstanceState);
        View view = inflater.inflate(R.layout.featured_list, container, false);
        featuredList = (ListView)view.findViewById(android.R.id.list);

        return view;
 }

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

        ConnectivityManager cMgr = (ConnectivityManager)getActivity().getSystemService(Context.CONNECTIVITY_SERVICE);
         if (cMgr.getActiveNetworkInfo() != null && cMgr.getActiveNetworkInfo().isConnectedOrConnecting()) {

            new MyAsyncTask().execute();

          } else {
             AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
             builder.setMessage("Please check your internet connection");
             builder.setTitle("Failed to download resources");
             builder.setCancelable(false);
             builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                           return;
                       }
                   });
                AlertDialog alert = builder.create();
                alert.show();
        }

    featuredAdapter = new FeaturedListAdapter(getActivity(), projectsList);

}

public class MyAsyncTask extends AsyncTask<Void,Void,Void>{

    private final ProgressDialog recents_dialog = new ProgressDialog(getActivity());

    @Override
    protected Void doInBackground(Void... params) {

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL);
        Document doc = parser.getDomElement(xml);

        NodeList nl = doc.getElementsByTagName(KEY_PROJECT);

        for (int i = 0; i < nl.getLength(); i++) {

            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            map.put(KEY_BANNER, parser.getValue(e, KEY_BANNER));

            projectsList.add(map);
        }
        return null;
    }

    @Override
    protected void onPreExecute()
    {
        recents_dialog.setMessage("Loading ...");
        recents_dialog.show();
        recents_dialog.setCancelable(false);
    }

    @Override
    protected void onPostExecute(Void result)
    {
        if(recents_dialog.isShowing() == true)
        {
            recents_dialog.dismiss();
        }
         // Getting adapter by passing xml data ArrayList

        featuredList.setAdapter(featuredAdapter);

    }
  }

} 
```

精选列表适配器：

```
public class FeaturedListAdapter extends BaseAdapter {

private Activity activity;
ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public FeaturedListAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data= (ArrayList<HashMap<String, String>>) d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

        View vi = convertView;

        if(vi==null){
            vi=new View(activity);
            vi = inflater.inflate(R.layout.featured_listrow, null);
        }

        ImageView banner =(ImageView)vi.findViewById(R.id.banner); // thumb image
        banner.setAdjustViewBounds(true);
        imageLoader.DisplayImage(data.get(position).get(FeaturedFragment.KEY_BANNER), banner);

        return vi;
  }
} 
```

[编辑] 以下代码根据@10s 的建议修改。但是，结果还是一样。。

```
public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder = null;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.featured_listrow, null);
            holder = new ViewHolder();
            holder.banner = (ImageView)convertView.findViewById(R.id.banner);
            holder.banner.setAdjustViewBounds(true);
            imageLoader.DisplayImage(data.get(position).get(FeaturedFragment.KEY_BANNER), holder.banner);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder)convertView.getTag();
        }
        return convertView;
}

public static class ViewHolder {
    public ImageView banner;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:31:28.793

您在自定义适配器的 getView() 中使用的代码每次调用时都会重新创建视图。每次您的活动时，适配器都会重新呈现自己，在您的情况下，片段成为焦点。

尝试为您的适配器使用支架。这是 android 的最佳实践，也是一个非常简单和有用的实践。帮助您入门的链接：[http ://android.amberfog.com/?p=296](http://android.amberfog.com/?p=296)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:24:05.970

每次切换选项卡时添加重复条目的原因是，每次切换到此选项卡时都会调用 onActivityCreated() 方法。因此，您的 AsyncTask 每次都会执行，并且在 AsyncTask 的 doInBackground() 方法中，您继续将元素添加到 projectList arraylist 而不清除它。

在启动 asyncTask 之前清除 projectList 或检查列表是否包含一些数据，并基于此调用执行 asyncTask（如果列表为空或不包含任何元素）。

# php - PHP & Mysql 搜索问题

> ID：11306297
> 
> 赞同：0
> 
> 时间：2012-07-03T07:25:56.190
> 
> 标签：php, mysql

以下是我的 search.php 代码：

```
<?php
if(isset($_POST['action']) && $_POST['action'] == "Search Question")
{
$search = mysql_real_escape_string(trim(htmlspecialchars($_POST['search'])));   
$err = array();

if(isset($search))
    {   
            if(empty($search))
                $err[] = "Please write your question name";
            elseif(is_numeric($search))
                $err[] = "Wrong values entered";
        }   
        if(!empty($err))
        {
            foreach($err as $er)
            {
                echo "<font color=red>$er<br/></font>"; 
            }
        }
        else
        {

            $search_sql = mysql_query("SELECT * FROM questions WHERE q_name LIKE '%$search%'");

            //$search_sql = mysql_query("SELECT * FROM questions WHERE MATCH(q_name, answer) AGAINST  '$search' ");             
            $numserach = mysql_num_rows($search_sql);

            if($numserach == 1)
            {
                echo "<font color='green'><strong>$numserach Question found</strong></font><br/>";
                while($result = mysql_fetch_array($search_sql))
                {
                    $subid = $result['sub_id'];
                    $id = $result['id'];
                    $qquestionsname = $result['q_name'];

                    ////////////////////////////////////////////////// SEARCH SHOW START HERE ///////////////////////
                    //include("toppagi.php");
                    $questions = $result['q_name']; 
                    echo "<a href='answerdetails.php?id=$id&subid=$subid&questionname=$qquestionsname'>$questions</a><br/>";
                    //include("bottompagi.php");
                    ////////////////////////////////////////////////// SEARCH SHOW END HERE ///////////////////////
                }
            }
            else
            {
                echo "<font color=red>No Result Found</font>";
            }

        }   
    }
    ?> 
```

在我的数据库中，我正在尝试搜索存储我所有问题名称的**“q_name”文件。**像.. 会计、书籍、O 级、测试 o 级等。

好吧，但是如果我搜索**ac** OR **te**之类的东西，那么它不会显示任何结果。我需要如果我搜索**ac**或**te**或其他东西，那么它会显示**一些结果..**

提前致谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:28:28.560

use this line to

```
 if($numserach > 0)
  {..... 
```

instead of

```
 if($numserach == 1)
  {..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:36:25.130

正如其他人已经提到的那样，您的问题是通过替换

```
if($numserach == 1) 
```

和

```
if($numserach > 0) 
```

**很重要 ：**

作为提倡更好实践的一种方式，对于 OP 的数据库处理非常糟糕的每个问题，我都会这样做。

请花点时间阅读这篇关于如何使用 PDO 的[精美教程。](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)当您的项目被黑客入侵时（如果这是专业工作），您将避免未来的尴尬，并且您将学习新事物来保护自己并为自己提供更好的机会来提高应用程序的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:40:13.510

代替

```
if($numserach == 1) 
```

和

```
if($numserach > 0) 
```

因为目前您仅在找到一个术语时才显示结果。如果找到多个，则不会显示任何结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:34:10.687

将以下指令更改为最新：

```
if($numserach == 1) --> if($numserach >0) 
```

并重新执行脚本。

# objective-c - Objective C 中与 XML Parser 相关的问题 - 需要帮助

> ID：11306300
> 
> 赞同：1
> 
> 时间：2012-07-03T07:25:58.080
> 
> 标签：objective-c, xml-parsing

我知道，我的问题可能会激怒我。但是，我没有其他方法可以知道我周围发生的事情。

实际上，我正在编写一个编写良好的 Objective C 代码。该代码使用解析器来解析来自服务器的 XML 文件。当我尝试了解解析器及其功能时，我遇到了很多困惑:(

*   Cocoa 框架中有多少个解析器？（使用适当的解析器不是我的缩进）

*   如何找到我的应用程序中使用了哪个解析器？

    在我的应用程序中，他们在 .h 文件中定义了一个变量。那是，

    `xmlParserCtxtPtr context;`

    一些函数在 .m 文件中定义。他们是，

    `static void startElementSAX(...);`

    `static void endElementSAX(...);`

    `static void charactersFoundSAX(...);`

    `static void errorEncounteredSAX(...);`

    `static xmlSAXHandler simpleSAXHandlerStruct;`

    他们进口了`<libxml/tree.h>`.

    在这里，他们使用了哪个解析器？

*   我的最后一个问题只是一个常见问题解答。学习新事物的最佳和美丽的方式是通过实践。但是，我仍然找不到一个智能示例来分别演示解析器并进行解释。（此外，我找不到任何解析存储在我的 PC 中的本地 xml 文件的示例。）

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:30:36.197

*   Cocoa 框架中有多少个解析器？
    要回答您的第一个问题，有许多不同的 xml 解析器可用。我建议阅读[此书](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)以选择适合您特定问题的书。

*   如何找到我的应用程序中使用了哪个解析器？你已经写了这个问题的答案。您正在使用 xmlParserCtxtPtr - 解析器。

要加载您使用的本地 xml 文件

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"Songbook" ofType:@"xml"];
NSURL *url = [NSURL fileURLWithPath:path]; 
```

然后你用一个 URL 初始化你的 xmlParser。希望它有帮助，即使它可能有点晚了......

# c# - 在 Linux 上使用 Samba 的 FileSystemWatcher

> ID：11306302
> 
> 赞同：7
> 
> 时间：2012-07-03T07:25:58.407
> 
> 标签：c#, linux, filesystemwatcher, samba

我`FileSystemWatcher`在我的 C# 应用程序（在 Windows 上运行）上使用 a，以便在我的应用程序中更新我当前正在浏览的文件。当我浏览本地目录时效果很好。当文件被重命名、删除或添加时，我会收到通知。但是例如，当我第一次重命名网络驱动器上的文件时，`FileSystemWatcher`会通知我重命名操作，然后，当我重命名同一文件或另一个文件时，`FileSystemWatcher`会通知我错误：

`the specified server cannot perform the requested operation`.

然后 FileSystemWatcher 不会通知我任何事情。

有时我可以在 FileSystemWatcher 不通知我之前重命名两次...

这是我的测试代码：

```
 static void Main(string[] args)
    {
        FileSystemWatcher watcher = new FileSystemWatcher();
        watcher.Path = @"N:\prive\defFolder";

        watcher.NotifyFilter = NotifyFilters.FileName | NotifyFilters.LastWrite;

        watcher.Changed += new FileSystemEventHandler(watcher_Changed);
        watcher.Created += new FileSystemEventHandler(watcher_Changed);
        watcher.Deleted += new FileSystemEventHandler(watcher_Changed);
        watcher.Renamed += new RenamedEventHandler(watcher_Renamed);
        watcher.Error += new ErrorEventHandler(watcher_Error);

        watcher.EnableRaisingEvents = true;

        Console.Read();
        watcher.Dispose();
    }

    static void watcher_Error(object sender, ErrorEventArgs e)
    {
        Console.WriteLine("error : " + e.GetException().Message);
    }

    static void watcher_Renamed(object sender, RenamedEventArgs e)
    {
        Console.WriteLine("rename success");
    }

    static void watcher_Changed(object sender, FileSystemEventArgs e)
    {
        Console.WriteLine("change success");
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T08:44:58.510

首先，远程共享的文件系统监控总是有点不可靠。您不应该依赖您的应用程序获取所有事件 - 事实上，我建议您提供备用轮询机制来检查您可能错过的更改。GUI 中的刷新按钮可能是另一种选择，具体取决于您的应用程序。

也就是说，您的特定问题似乎并不少见。我用谷歌搜索了一下，发现了这些东西：

*   [2003 服务器框上的 FileSystemWatcher 出现问题](http://social.msdn.microsoft.com/Forums/is/csharpgeneral/thread/e41716bf-38a4-41ff-bd11-28abfa7085cb)- 似乎与您遇到的问题相同，使用 samba 共享并且*“指定的服务器无法执行请求的操作”*错误消息。
*   [SO](https://stackoverflow.com/questions/3779143/c-sharp-filesystemwatcher-serious-problem)关于同一问题的问题，[其中一个答案](https://stackoverflow.com/a/3779244/8521)表明它适用于某些客户而不适用于其他客户

我的猜测是，这是 Samba 与 Windows 结合的某些版本（或配置）的问题。linux 服务器上的 Samba 日志中是否有任何内容可以指出问题的原因？

作为一种直接的解决方法，我建议您尝试以下方法：

*   添加一个轮询机制，确保即使 FSW 发生故障，您也能获得文件夹更改
*   当 FSW 中断时，尝试通过创建一个新的来“重新启动”它。您可能还想在收到错误时检查是否`EnableRaisingEvents`设置为`false`- 也许您可以将其设置为 true 以再次开始接收事件。
*   （在这里抓住稻草）尝试使用[内部缓冲区大小](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.internalbuffersize.aspx)以防出现问题（我对此表示怀疑，但值得一试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:51:00.877

```
 if (Directory.Exists(monitorPath))  
        {
            watcher.Path = monitorPath;
            watcher.IncludeSubdirectories = true;
            watcher.NotifyFilter = NotifyFilters.LastWrite | NotifyFilters.CreationTime;
            watcher.InternalBufferSize = 65536;
            watcher.Filter = "test_prod-Pg1_ICT*";
            watcher.Changed += new FileSystemEventHandler(fileChangedEvent);
            watcher.EnableRaisingEvents = true;
            LogEvent("Folder Syncronization Service is Started!");

        } 
```

我创建了一个基于 Window Service FileSystemWatcher 的类来监控 Samba 共享文件夹 onChanges，并使用 CodeProject 中的 DifferenceEngine 来检查不同之处，如果有更改，则复制到 Window 共享文件夹路径。我还添加了一个计时器，每 10 秒检查一次，以便在网络出现故障时进行处理。有一个列表数组来存储更改计数。引发文件更改事件时添加到列表中，成功时删除列表。

我在 Window 7 Pro OS 上测试了两台 HP 笔记本电脑，工作正常。

但无法在其他 Window 7 Pro 笔记本电脑和 Window XP Pro SP3 台式机上工作。（我们在同一个公司网络/VLAN 和服务包上）

失败的意思是如果我修改了 Samba 共享文件夹中的某些内容，它不会将最新内容同步到窗口共享路径。

我也添加了这些

[PermissionSetAttribute(SecurityAction.LinkDemand, Name = "FullTrust")] [PermissionSetAttribute(SecurityAction.InheritanceDemand, Name = "FullTrust")]

在编码的顶部，它似乎不起作用

# javascript - 用 raphael.js 变形线

> ID：11306303
> 
> 赞同：1
> 
> 时间：2012-07-03T07:26:01.340
> 
> 标签：javascript, raphael, vector-graphics

是否可以使用 raphael.js 或 paper.js 绘制一条带有箭头的线，该箭头随着动画变形而移动？

![在此处输入图像描述](../Images/1cd4881a532b29e95b215cde11d2e767.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:20:33.963

目前尚不完全清楚您要做什么，但您的问题的简短回答几乎肯定是肯定的。我只能代表 RaphaelJS，但很容易告诉 Raphael 从一条路径转变为另一条路径。考虑一下[这个](http://jsfiddle.net/kevindivdbyzero/4JyKh/)小提琴和[那个](http://jsfiddle.net/kevindivdbyzero/MqFkP/2/)小提琴，它们都依赖于使用 raphael 的`animate`函数来随着时间的推移修改`path`元素，通常与一个或多个变换结合使用。唯一需要注意的是，拉斐尔的内置路径变形并不总是以您可能期望或期望的方式展开。但是为了尝试像上图那样制作动画，我会做这样的事情：

```
var canvas = Raphael( 0, 0, 320, 240 );

var path1 = "M0,120 h300 l10,-10 l10,10 h100";
var path2 = "M0,120 h100 l10,-10 l10,10 h300";

var path = canvas.path( path1 ).attr( { stroke: 'black', fill: 'none', 'stroke-width': 1 } );

path.animate( { path: path2, stroke: 'red', 'stroke-width': 3 }, 3000, function()
              { path.animate( { path: path1, stroke: 'black', 'stroke-width': 1 }, 3000 ); } ); 
```

[您可以在这里](http://jsfiddle.net/kevindivdbyzero/LRmLH/)看到这一点。

# database - 绕过表的 cakephp 命名约定

> ID：11306304
> 
> 赞同：2
> 
> 时间：2012-07-03T07:26:06.710
> 
> 标签：database, cakephp, model

这是 cakephp 中的一条规则，在创建表格时，它必须是模型的复数形式。问题是，由于一些复杂的情况，我无法在此处重命名单数形式的表。这就是 cakephp 给我一个错误的原因。我试过这个：

```
class Color_Schema extends AppModel{
    var $name = 'ColorSchema';
    var $useTable = 'color_schema';
} 
```

但它不起作用。

它仍然给我这个错误......

```
Error: Table color_schemas for model ColorSchema was not found in datasource default. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T08:10:56.797

似乎自定义 Inflector 规则是这里的解决方案。请看一下 [Inflection configuration](http://book.cakephp.org/2.0/en/development/configuration.html#loading-custom-inflections)。就像是

```
Inflector::rules('plural', array('irregular' => array('color_schema' => 'color_schema'))); 
```

可能对你有用，虽然我不是 Inflector 专家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:20:43.477

我看不到您尝试访问模型的代码，但是从错误消息的外观来看，您在引用模型时忘记了下划线。你需要做这样的事情：

```
$this->Color_Schema->read(null, 1); 
```

另外，不要忘记将模型添加到`$uses`控制器顶部的数组中：

```
public $uses = array('Color_Schema'); 
```

# excel - 将时间转换为某种格式

> ID：11306305
> 
> 赞同：0
> 
> 时间：2012-07-03T07:26:12.417
> 
> 标签：excel

我不知道这是否是问这个问题的正确地方，但请在下面考虑我的问题。

在excel中使用公式，我怎样才能将`2012:06:28:15:52:32:000`格式中的日期转换成东西`6/28/2012 15:52`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:07:03.273

如果数据在 A1 中，请在 B1 中尝试此公式

```
=TEXT(LEFT(SUBSTITUTE(A1,":",""),14)+0,"0000-00-00 00\:00\:00")+0 
```

格式 B1 为所需的日期/时间格式，即 m/d/yyyy hh:mm

# c# - 需要 MVC3 Razor 帮助

> ID：11306310
> 
> 赞同：0
> 
> 时间：2012-07-03T07:26:40.263
> 
> 标签：c#, asp.net-mvc-3, razor

希望大家能回答我一个问题？

我才刚刚开始使用 ASP.NET MVC3，但在某个时候出现了问题。我一直在从书中学习这些东西，但我对一些事情有点不确定。

一个视图可以只有一个@Model 引用吗？

目前，我在 ViewResult 上有一个带有 HTTP-POST 的 VIEW 设置，它验证视图中的数据，由用户输入，然后“在发布时”，将此信息传递给将其写回数据库的方法（ ADO.NET - 访问）。现在我需要更改我的视图，以便我可以将几个文本框替换为 Dropdownlistfor 控件。填充这些控件的数据需要从数据库传入。

我是否正确地说这些数据需要在页面的 HTTP-GET Viewresult 中传递，如果是这样，我可以在同一个 View (*.cshtml) 中引用多个@Model。

我有一个接受用户响应的类，这在视图中被引用。但是我是否需要为下拉列表数据创建一个新类并引用它。这样在后台我将数据填充到 SelectListItem 中，将其传递给视图，然后填充视图中的每个下拉控件？

如果写得不好，很难解释，我很抱歉，我发现从书本上学习很难，我现在很困惑。任何帮助，将不胜感激。只是为了让我了解这一切是如何发生的。我对 C# 语法很满意，但对 MVC3 非常不确定！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:31:58.527

有两种方法可以处理这个问题。

*   使用视图模型。

在这种情况下，您有一个类，其中包含您的数据模型以及视图所需的其他内容，因此如下所示：

```
public class ViewModel
{
    public MyDomainModel Model { get; set; }
    public IEnumerable<SelectListItem> SelectListItems { get; set; }
} 
```

*   使用*ViewBag*。

在这种情况下，您将所有额外的内容添加到*ViewBag*字典中。所以在控制器中，你会有这样的东西：

```
ViewBag.SelectListItems = new SelectListItem[] { ... }; 
```

然后您可以在视图本身中引用

```
@Html.DropDownList("myselectlist", ViewBag.SelectListItems) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:36:17.507

我认为这将帮助您[复数视觉 mvc3 介绍](http://www.pluralsight-training.net/microsoft/Courses/TableOfContents/aspdotnet-mvc3-intro)。它确实帮助了我

# algorithm - 感知器的通过次数

> ID：11306311
> 
> 赞同：0
> 
> 时间：2012-07-03T07:26:44.070
> 
> 标签：algorithm, machine-learning, neural-network, perceptron

我正在尝试实现感知器算法，但我无法弄清楚以下几点。

*   迭代次数的理想值应该是多少
*   这个算法适合大量数据吗？
*   阈值会随着迭代而变化吗？
*   如果是的话，它对最终输出有什么影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:13:26.437

感知器不是一个特定的算法，它是一组算法的名称。这些算法之间有两个主要区别。

**1.整合与消防规则**

设输入向量为`x`，权重向量为`w`，阈值为`t`，输出值为`P(x)`。有多种函数可以计算 P(x)：

1.  二进制： `P(x)`= 1（如果`w`* `x`>= `t`）或 0（否则）
2.  半线性：`P(x)`= `w`* `x`（如果`w`* `x`>= `t`）或 0（否则）
3.  硬限制：`P(x)`= `t`（如果`w`* `x`>= `t`）或`w`* `x`（如果 0< `w`* `x`< `t`）或 0（否则）
4.  Sigmoid：`P(x)`= 1 / 1+e^( `w`* `x`)

和许多其他人。**所以很难说阈值对最终输出有什么影响，因为它取决于您使用的集成和触发功能。**

**2.学习规律**

Perceptron 的学习规则也是多种多样的。最简单和最常见的一种是

`w`-> `w`+ `a`* `x`* ( `D(x)`- `P(x)`)

其中`a`是学习步骤的大小，`D(x)`是 的预期输出`x`。**因此，也很难说理想的迭代值应该是多少，因为它取决于`a`您拥有的训练样本的值和数量。**

因此，阈值是否会随着迭代而变化？**这也取决于。**上面简单通用的学习规则在训练时不会修改阈值，但是还有一些其他的学习规则会修改它。

顺便说一句，您还问这种算法是否适合大量数据？**衡量分类器对某个数据集的适用性的主要指标是数据集的*线性可分性*，而不是数据集的规模。**请记住，单层感知器对于非线性可分的数据集的性能非常差。 **数据集的规模并不重要。**

# c# - NetworkStream Equivelant

> ID：11306314
> 
> 赞同：1
> 
> 时间：2012-07-03T07:26:54.053
> 
> 标签：c#, .net, sockets, windows-runtime

I have been trying to create a metro application but there is a problem: StreamSocket doesn't really do what I want to do (I think)

Here is an excerpt my code from .Net that works:

```
 try
        {
            TCP = new TcpClient(server, port);
            Stream = TCP.GetStream();
            Read = new StreamReader(Stream);
            Write = new StreamWriter(Stream);
        }
        catch (Exception e)
        {
            Console.WriteLine("Error connecting to " + server + ": " + e);
            return;
        }

        // Identify
        Write.WriteLine("LOGIN " + Username);
        Write.Flush();

        while (Connected)
        {
            try
            {
                if ((line = Read.ReadLine()) != null && Connected) 
```

I can't get StreamSocket to work... it requires you to know the length of the string that's coming in and I don't know what it will be - it varies. Is there any way to do this that will work?

This is what I have but it doesn't work:

```
 try
        {
            // Connect to the server (in our case the listener we created in previous step).
            await Socket.ConnectAsync(new HostName("example.com"), "1111");
        }
        catch (Exception exception)
        {
            // If this is an unknown status it means that the error is fatal and retry will likely fail.
            if (SocketError.GetStatus(exception.HResult) == SocketErrorStatus.Unknown)
            {
                throw;
            }
        }

        // Create a DataWriter if we did not create one yet. Otherwise use one that is already cached.
        Writer = new DataWriter(Socket.OutputStream);
        Listener = new DataReader(Socket.InputStream);

        Debug.WriteLine(Socket.Information.RemoteAddress.CanonicalName); //Check if IP is correct

        SendRaw("LOGIN " + Nickname);

        string line = "";
        Connected = true;
        while (Connected)
        {
            if (Listener.UnconsumedBufferLength != 0)
            {
                line = Listener.ReadString(Listener.UnconsumedBufferLength);
                Debug.WriteLine(line);
            }
        }
    }

    async public void SendRaw(string str)
    {
        Writer.WriteString(str);

        // Write the locally buffered data to the network.
        try
        {
            await Writer.StoreAsync();
        }
        catch (Exception exception)
        {
            // If this is an unknown status it means that the error if fatal and retry will likely fail.
            if (SocketError.GetStatus(exception.HResult) == SocketErrorStatus.Unknown)
            {
                throw;
            }
        }
    } 
```

Any help would be appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:59:28.270

首先要做的事情是：您的原始代码是等待发生的 DOS 攻击。如果可能的话，我建议更改协议以在每个字符串之前包含一个长度前缀，这样您就可以在为其分配内存之前知道它有多大。

第二件事：`DataReader`类必须先将一些字节读入其内部缓冲区，然后才能解释它们。你通过调用读入这个缓冲区`LoadAsync`。

但是，如果您想读取任意长度的字符串，则必须读取缓冲区并自己扫描换行符，如果未找到换行符，则根据需要调整缓冲区大小（或添加新缓冲区），最多一些最大尺寸。

**更新：**

设置`InputStreamOptions`为`Partial`; 您可以`LoadAsync`使用任意大的缓冲区大小（例如 1024）调用。获取数据后，调用`ReadString(UnconsumedBufferLength)`. 每次执行此操作时，您可能会得到一行、一行或多行的一部分。因此，您必须先构建 a`string`然后`Split`by `\n`，并将任何部分行保留在末尾，以便下次通过循环。

# c# - how to suppress error 1606- could not access network location in wix

> ID：11306317
> 
> 赞同：0
> 
> 时间：2012-07-03T07:26:56.313
> 
> 标签：c#, wix

I am installing some component in network location.
At the time of uninstall, if network location is unavailable because remote machine is not on. setup is giving following error
`Error 1606 could not access network location`
Is there any way to suppress this error and continue the uninstallation process?
If the files on Network location(that is unavailable at the time) are not deleted then its ok for me.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-03T16:28:12.483

要解决您的问题，您可以尝试设置`Permanent ="yes"`不会卸载该组件的组件，理论上您不应该收到该错误。

但是我个人会重新考虑实现以绕过将文件添加到网络位置（也许在您的应用程序首次运行时添加网络文件？）。

# unity3d - CharaterController 与其他盒子碰撞器的碰撞问题

> ID：11306319
> 
> 赞同：0
> 
> 时间：2012-07-03T07:26:59.873
> 
> 标签：unity3d

我有一个带有 CharacterCollider 的 Player 和带有盒子对撞机的 Coins。当我的玩家与硬币碰撞时，我会禁用硬币（`OnControllerCollideHit()`其中`hit.gameObject.active = false`hit = coin gameObject）。

但是当我与硬币碰撞时，我仍然会得到一些回力或一种混蛋。

我怎样才能消除玩家与任何投币盒对撞机碰撞时的那种混蛋或力量。？

我在谷歌和一些论坛上做了很多研究，但找不到与这个问题相关的东西。

任何代码将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:53:18.190

我用一个技巧解决了这个问题。

我在我的**玩家游戏对象**中添加了一个带有&**的空子游戏对象**，并增加了覆盖我的玩家对撞机的对撞机区域。`Box collider``Rigidbody`

 **这会让我`react before i collide with player collider`。我正在**处理硬币碰撞**和**其他**`empty GameObject collider`碰撞。

我认为这个解决方案可能会帮助这里的其他人。好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:00:31.397

如果你不使用触发器，我建议在你的 Player 对象中检查 Box collider 的触发器。然后在与硬币碰撞时调用 OnTriggerEnter 函数。**

# html - HTML Template - XML - HTML

> ID：11306321
> 
> 赞同：1
> 
> 时间：2012-07-03T07:27:12.553
> 
> 标签：html, xml

I'm working on a mailer system where I'm required to replace variables in html template with actual values in our database. Earlier, I was getting a plain HTML template where I was required to overwrite the variable's actual value from database to the template itself. However, I was not comfortable with it. I made the following suggestion that instead of whole HTML template, pass XML containing the attributes which we seek to replace with actual values from database(sort of RSS). Now I am finding a way to put the actual values found from the database to the original template. Let us take an example:

```
<html>
  <body>
    <div var="toxml">
      <li>
        PROFILEID(This will be a number)
        NAME
        AGE(etc.)
      </li>
    </div>
  </body>
</html> 
```

The XML which will be generated out of this will be

```
<PROFILEID val="Number">
  <NAME></NAME>
  <AGE></AGE>
</PROFILEID> 
```

Now I will stuff in the values from database in this xml only(XML parsing tools are available for php).

Now my question is, how can I put the stuffed values in the XML back to the HTML template from which it came?

# c - Adding a keyword to standard C grammar

> ID：11306324
> 
> 赞同：2
> 
> 时间：2012-07-03T07:27:27.273
> 
> 标签：c, gcc, clang

I am thinking of a source-to-source compiler would like to add a keyword to the standard C grammar (say *shared*). When a pointer is being marked as *shared*, it is a special one not to be dereferenced directly. Instead, a function call should be made to copy out the value safely.

If all variables were primitive types, a simple C++ program would do the translation for me. However, we have struct and union, and then we have possibilities like struct containing shared pointers, struct containing simple pointers to shared pointers, etc. It sounds a serious type checking like handling the *volatile* keyword, probably reusing or modifying an existing compiler would be a better option. But I do not know which compiler is easier to start modifying. Do you have any suggestions? By the way, I want to see the translated C code, not the intermediate code. Would it change our choice? Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:18:18.300

你知道不透明类型吗？在文件中声明一个类型`.h`：

```
typedef struct OpaqueType_s OpaqueType; 
```

并将其定义在一个`.c`文件中：

```
struct OpaqueType_s {
   int value;
}; 
```

然后您可以在定义它的文件中取消引用指向它的指针`.c`，但只将它们传递给其他文件中的其他函数（有点像`void`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T08:03:44.290

我们的带有[C 前端的](http://www.semanticdesigns.com/Products/FrontEnds/CFrontEnd.html)[DMS 软件再造工具包](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)可能是合适的。

DMS 提供通用解析/AST 构造、符号表构造、控制和数据流分析工具、用于 AST 修改的过程 API 和表面语法重写规则，以及 AST 到可编译的文本重新生成（包括注释重新生成）。前端将 DMS 专门用于特定语言（例如，C；DMS 支持许多其他语言）。前端由BNF驱动；一切都建立在此之上（使用属性语法等）。方言管理使语言前端能够专门用于特定方言（对于 C，目前包括 GCC2/3/4、MS Visual C、ANSI C、GreenHills C、C99 等）。

为了执行 OP 的任务，他将为他的 C 版本定义一种方言，修改前端提供的符号表机制以捕获他在指针上的新属性，并修改类型检查以验证新的指针类型没有被滥用按照他的定义。通过排除类型检查，他可以编写源到源转换，将 shared-ptrC 转换为 vanilla C 以获得可运行的代码。

替代方案可能是使用 Clang 或 GCC，但我的理解是两者都没有语法，因此对解析器的更改必须作为代码实现。两者都不提供任何源到源的重写。我认为 Clang 提供了源代码修补，但我不确定您是否可以在修补后对某个地方进行一系列重写。我认为 GCC 会让你在程序上修改 AST，但不能重新生成源代码。

所有这些解决方案在预处理方面都存在一些问题。我认为 Clang 和 GCC 必须扩展预处理器指令。DMS 必须扩展非结构化指令。

# javascript - 如何避免在以下 JavaScript 情况下重复自己？

> ID：11306326
> 
> 赞同：0
> 
> 时间：2012-07-03T07:27:35.380
> 
> 标签：javascript, dry

在下面的场景中，我有一个布尔值。根据结果​​，我调用完全相同的函数，唯一的区别是参数的数量。

```
var myBoolean = ...

if (myBoolean) {
    retrieveData(param1, function(err, result) {
        if (err) throw err;
        // process
    });
}
else {
    retrieveData(param1, param2, function(err, result) {
        if (err) throw err;
        // process
    });
} 
```

目前感觉就像我在不必要地重复很多代码。有没有办法巩固这一点，所以我不会重复同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:31:05.563

如果情况像这样简单，那么只需将重复的函数保存在一个变量中：

```
var myBoolean = ...
var callback = function(err, result) {
    if (err) throw err;
    // process
}
if (myBoolean) {
    retrieveData(param1, callback);
}
else {
    retrieveData(param1, param2, callback);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:30:04.837

传递一个`param2`等于`false`when`myBoolean`的对象`true`

```
retrieveData({ 
       param1: param1,
       param2: (!myBoolean)? param2 : false 
     }, function(err, result) {
        if (err) throw err;
        // process
    }); 
```

在里面`retrieveData(obj, callback)`你会检索`param1`到 and `param2`with `obj.param1`and`obj.param2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:37:15.283

重构retrieveData 以使param2 可选

```
retrieveData(param1, function(err, result), param2) {
   if (err) throw err;
   // process 
```

});

# c++ - Segfault in my stack implementation (C++) code, but cannot understand why

> ID：11306330
> 
> 赞同：0
> 
> 时间：2012-07-03T07:27:55.987
> 
> 标签：c++, stack, segmentation-fault

To set the record straight, I am fairly new to C++ and most of my experience in programming is in Java. I'm writing an array based stack implementation and I cannot seem to read any of the data saved in my stack.

Objects can be pushed and this seems to function normally. Commenting out the top() operation yields a successful output of zero, which seems to tell me that I know the item is at least being added to the array.

However, reading the item, I get a segfault error. After a quick google or two, I learned that a segfault means that there is an operation accessing data it does not have access to. This leads me to think that my top() function does not have access to the array. It is a private member of the class, but my previous knowledge of OOP tells me that a class method should have access to all private variables.

Could anyone help point me in the right direction here? (Apologies if the documentation is a bit excessive for such a primitive data structure, let me know if it should be removed).

Thanks! Code is below:

```
#include <iostream>
using namespace std;

/*
Class: arrayStack() 
A simple stack implemented with a single array. 
Handles char objects.
*/
class arrayStack {

    int length; //cap on stack length
    int count; //Keeps track of which element in the array to pop from.
    char array[]; //Hold data here

public: 

/*
arrayStack() 
Constructor used to create a stack object. No default constructor exists, the length (l) is a required argument as a parameter to create a stack.
l space is reserved in the array and count is set to -1, the int value required for an empty stack.
*/
arrayStack(int l) 
{
    char array[l];
    length = l;
    count = -1;
}

/*
push() -- return type void.
Method to add a desired char element (o) to the stack. 
*/
void push(char o) 
{   
    array[count] = o;
    count++; //Increment the counter to accurately pull element from array.
}

/*
pop() -- return type char.
Method to remove an element from the stack. Element is pulled from the stack and returned. 
*/
char pop() 
{
    //temp space to store pulled element before returning.
    char temp;
    temp = array[count];

    //Replace popped element with null to reduce memory waste. Then decrement counter for proper functioning of the stack.
    array[count] = '\0'; 
    count--;
    return temp;
}

/*
top() -- return type char.
Method which returns the top element of the function without deleting it from the stack. Useful for inspection and testing, but functionally very similar to pop().
*/
char top() 
{
    //temp space to store pulled element.
    char temp; 
    temp = array[count];
    return temp;
}

/*
isEmpty() -- return type boolean.
Method which checks the stack for elements. If there are no elements, the method returns true. If there exists one or more elements, the method will return false. 
Method is very simple-- a simple check against the count (int) variable. 
*/
bool isEmpty() 
{
    if (count == -1) {
        return true;
    } else {
        return false;
    }
}

/*
size() -- return type int.
Method which returns the number of elements in the stack. 
*/
int size() 
{
    return count++;
}

};

int main() {
arrayStack stack(10);
stack.push('c');
cout << stack.top(); //SEGFAULT OCCURS HERE. 
cout << stack.isEmpty();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:29:33.163

您的成员`array`仍未初始化：

```
arrayStack(int l) 
{
    char array[l];
    length = l;
    count = -1;
} 
```

在这里，您创建一个新的`array`（无论如何我怀疑这是否合法，因为 C++ 不支持 VLA。它可能应该是

```
arrayStack(int l) 
{
    array = new char[l];
    length = l;
    count = -1;
} 
```

您还需要实现一个析构函数来删除分配的内存。这意味着您还需要一个复制构造函数和复制赋值运算符。

# mysql - MySQL Join - Count matches on another table

> ID：11306336
> 
> 赞同：0
> 
> 时间：2012-07-03T07:28:24.133
> 
> 标签：mysql, join

I have this query:

```
SELECT a.*, b.id AS host_id, COUNT(c.event_id) AS count_joins, COUNT(d.event_id) AS joined
FROM (`events` AS a)
INNER JOIN `users` AS b ON `b`.`id` = `a`.`host_id`
LEFT JOIN `joins` AS c ON `c`.`event_id` = `a`.`id`
LEFT JOIN `joins` AS d ON `d`.`event_id` = `a`.`id` AND d.user_id = 1
WHERE `a`.`date` > '1000-10-10 10:10:10'
GROUP BY `a`.`id`
ORDER BY `a`.`date` ASC
LIMIT 20 
```

It gets all events, the author, the number of joins and check if the current user (id = 1) joined the event.

I'm having problem checking if the user joined the event, it's returning the number of joins, not 1 if the user joined or 0 if not.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:46:50.443

试试这个：

```
SELECT a.*, b.id AS host_id, 
SUM(CASE WHEN c.event_id IS NOT NULL THEN 1 ELSE 0 END) AS count_joins, 
SUM(CASE WHEN c.event_id IS NOT NULL AND c.user_id = 1 THEN 1 ELSE 0 END) AS joined
FROM (`events` AS a)
INNER JOIN `users` AS b ON `b`.`id` = `a`.`host_id`
LEFT JOIN `joins` AS c ON `c`.`event_id` = `a`.`id`
WHERE `a`.`date` > '1000-10-10 10:10:10'
GROUP BY `a`.`id`
ORDER BY `a`.`date` ASC
LIMIT 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:45:34.283

我认为问题在于您同时加入了 a、b、c 和 d。因此，每次*有人*加入每个事件时，您都会获得一条记录 (a × c)，然后您加入*的*用户编号为 1 记录 ((a × c) × d)。因此，如果表格看起来像

事件：{ e1, e2 } 加入：{ (e1, u1), (e1, u2), (e1, u3), (e2, u2), (e2, u4) }

您的查询（在聚合函数之前）返回

{ (e1, u1, u1), (e1, u2, u1), (e1, u3, u1), (e2, u2, null), (e2, u4, null) }

你可能会得到你所追求的

*   在 a × c 上进行聚合，*然后*加入“joins as d”表
*   例如，在“c”上包括一个合成字段，`c.user_id == 1 as is_user_1`然后采用`max( is_user_1 )`select 子句

# asp.net - NuGet execution policy errors when installing MvcScaffolding package

> ID：11306339
> 
> 赞同：4
> 
> 时间：2012-07-03T07:28:42.667
> 
> 标签：asp.net, asp.net-mvc, powershell, nuget, asp.net-mvc-scaffolding

I'm using Visual Web Developer Express 2010, Windows XP, and using ASP.NET MVC4 RC in a project. I have NuGet v2.0.30619.9119 installed.

I'm now trying to install the MvcScaffolding package via NuGet Package Manager Console. I get the following errors:

```
PM> Install-Package MvcScaffolding
Attempting to resolve dependency 'T4Scaffolding'.
Attempting to resolve dependency 'EntityFramework (≥ 4.1.10311.0)'.
You are downloading EntityFramework from Microsoft, the license agreement to which is available at http://go.microsoft.com/fwlink/?LinkId=224682\. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
Successfully installed 'EntityFramework 4.1.10715.0'.
Successfully installed 'T4Scaffolding 1.0.6'.
File Y:\asp\packages\T4Scaffolding.1.0.6\tools\init.ps1 cannot be loaded. The file Y:\asp\packages\T4Scaffolding.1.0.6\tools\init.ps
1 is not digitally signed. The script will not execute on the system. Please see "get-help about_signing" for more details..
At line:1 char:2
+ & <<<<  'Y:\asp\packages\T4Scaffolding.1.0.6\tools\init.ps1' $__rootPath $__toolsPath $__package $__project
    + CategoryInfo          : NotSpecified: (:) [], PSSecurityException
    + FullyQualifiedErrorId : RuntimeException

Successfully installed 'MvcScaffolding 1.0.7'.
File Y:\asp\packages\MvcScaffolding.1.0.7\tools\init.ps1 cannot be loaded. The file Y:\asp\packages\MvcScaffolding.1.0.7\tools\init.
ps1 is not digitally signed. The script will not execute on the system. Please see "get-help about_signing" for more details..
At line:1 char:2
+ & <<<<  'Y:\asp\packages\MvcScaffolding.1.0.7\tools\init.ps1' $__rootPath $__toolsPath $__package $__project
    + CategoryInfo          : NotSpecified: (:) [], PSSecurityException
    + FullyQualifiedErrorId : RuntimeException

Successfully added 'EntityFramework 4.1.10715.0' to MyProject.Web.
Successfully added 'T4Scaffolding 1.0.6' to MyProject.Web.
File Y:\asp\packages\T4Scaffolding.1.0.6\tools\install.ps1 cannot be loaded. The file Y:\asp\packages\T4Scaffolding.1.0.6\tools\inst
all.ps1 is not digitally signed. The script will not execute on the system. Please see "get-help about_signing" for more details..
At line:1 char:2
+ & <<<<  'Y:\asp\packages\T4Scaffolding.1.0.6\tools\install.ps1' $__rootPath $__toolsPath $__package $__project
    + CategoryInfo          : NotSpecified: (:) [], PSSecurityException
    + FullyQualifiedErrorId : RuntimeException

'InstallationDummyFile.txt' already exists. Skipping...
Successfully added 'MvcScaffolding 1.0.7' to MyProject.Web.
File Y:\asp\packages\MvcScaffolding.1.0.7\tools\install.ps1 cannot be loaded. The file Y:\asp\packages\MvcScaffolding.1.0.7\tools\in
stall.ps1 is not digitally signed. The script will not execute on the system. Please see "get-help about_signing" for more details..
At line:1 char:2
+ & <<<<  'Y:\asp\packages\MvcScaffolding.1.0.7\tools\install.ps1' $__rootPath $__toolsPath $__package $__project
    + CategoryInfo          : NotSpecified: (:) [], PSSecurityException
    + FullyQualifiedErrorId : RuntimeException 
```

Because the init scripts aren't being executed after the install, the MvcScaffolding package is not installed correctly and the `scaffold` command is not recognised.

I don't know what to do about these code signing issues. Here are the current security settings:

```
PM> Get-ExecutionPolicy -List
Scope           ExecutionPolicy
-----           ---------------
MachinePolicy   Undefined
UserPolicy      Undefined
Process         RemoteSigned
CurrentUser     Undefined
LocalMachine    Unrestricted 
```

Can I change the Process scope to be Unrestricted? If so, how? Running `Set-ExecutionPolicy` in the NuGet console does not work:

```
PM> Set-ExecutionPolicy Unrestricted
Execution Policy Change
The execution policy helps protect you from scripts that you do not trust. Changing the execution policy might expose you to the security risks described in the about_Execution_Policies help topic. Do you want to change the execution policy?
[Y] Yes  [N] No  [S] Suspend  [?] Help (default is "Y"):Y
Set-ExecutionPolicy : Windows PowerShell updated your execution policy successfully, but the setting is overridden by a policy defined at a more specific scope.  Due to the override, your shell will
 retain its current effective execution policy of "RemoteSigned". Type "Get-ExecutionPolicy -List" to view your execution policy settings. For more information, please see "Get-Help Set-ExecutionPol
icy."
At line:1 char:20
+ Set-ExecutionPolicy <<<<  Unrestricted
    + CategoryInfo          : PermissionDenied: (:) [Set-ExecutionPolicy], SecurityException
    + FullyQualifiedErrorId : ExecutionPolicyOverride,Microsoft.PowerShell.Commands.SetExecutionPolicyCommand 
```

I've also tried doing all of this as an Administrator and that didn't help either.

Any advice or ideas would be much appreciated.

**UPDATE**

I can set the process execution policy in NuGet like this:

```
Set-ExecutionPolicy Unrestricted -Scope Process 
```

But when I restart Visual Web Developer, the setting is forgotten and I still get an error as it keeps trying to execute the `init.psl` files

How can I change the execution policy permanently?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T00:28:51.850

好的，我现在正确安装了 MvcScaffolding。

我必须首先绕过 NuGet 中的所有安全性：

```
Set-ExecutionPolicy Bypass -Scope Process 
```

但是，当我重新启动 Visual Web Developer 时，我仍然会遇到与启动时运行的 NuGet 相同的 PowerShell 错误`init.pls`。

我发现这是因为我将我的项目存储在网络驱动器上。显然 PowerShell 默认不会从网络驱动器执行脚本。

我尝试使用 CasPol 更改安全设置，但无法正常工作。当我看到其他人也无法让 VS 使用映射驱动器时，我放弃了：

[CAS 不适用于 VS2010 映射驱动器](https://stackoverflow.com/questions/7171176/cas-not-working-for-vs2010-mapped-drive/7444666#7444666)

无论如何，我现在只有本地项目，并且 MvcScaffolding 已安装并正在运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-05T19:35:44.513

您可以为用户范围设置策略并使用更安全的策略，如下所示：

```
Set-ExecutionPolicy -ExecutionPolicy AllSigned -Scope CurrentUser 
```

要求所有脚本和配置文件都由受信任的发布者签名，包括您在本地计算机上编写的脚本。在运行来自您尚未归类为受信任或不受信任的发布者的脚本之前提示您。

例如，安装 EntityFramework 请求运行脚本的权限：

```
Executing script file 'c:\users\user\documents\visual studio 2015\Projects\zzz\packages\EntityFramework.6.1.3\tools\install.ps1'
Do you want to run software from this untrusted publisher?
File C:\users\user\documents\visual studio 2015\Projects\zzz\packages\EntityFramework.6.1.3\tools\install.ps1 is published by CN=Microsoft Corporation, OU=MOPR, O=Microsoft Corporation, L=Redmond, S=Washington, C=US and is not trusted on your system. Only run scripts from trusted publishers.
[V] Never run  [D] Do not run  [R] Run once  [A] Always run  [?] Help (default is "D"):R 
```

# c# - ORM 引入的循环大大降低了性能

> ID：11306344
> 
> 赞同：0
> 
> 时间：2012-07-03T07:29:11.100
> 
> 标签：c#, linq-to-sql

我有一个如下所示的表格。它有固定和储蓄类型的账户。我需要更新用户 1 的所有帐户的状态。该用户有 10000 个帐户。本质上，逻辑将如以下 SQL 存储过程脚本所示。该脚本只需不到 1 秒即可执行（83 毫秒）。

**但是当我使用LINQ to SQL**将其转换为 ORM 时，需要 3 分钟以上（204814 毫秒）。它至少慢了**240,000% 。**

LINQ to SQL（或其他 ORM）中是否存在有助于克服这种性能损失的模式？

什么可以迫使它一次性对数据库进行更新？

注意：我知道从 LINQ 调用存储过程。我不认为这是 ORM 而不是我的选择。

![在此处输入图像描述](../Images/faf036d18bf859a6c9b866af73feb3bf.png)

**手动存储过程脚本**

```
DECLARE @UserID INT 
DECLARE @StatusForFixed VARCHAR(50)
DECLARE @StatusForSavings VARCHAR(50)

SET @UserID = 1
SET @StatusForFixed = 'FrozenFA11'
SET @StatusForSavings = 'FrozenSB22'

UPDATE BankAccount 
SET Status = 
        CASE 
            WHEN BankAccount.AccountType='Fixed' THEN @StatusForFixed
            WHEN BankAccount.AccountType='Savings' THEN @StatusForSavings
        END
 WHERE  AccountOwnerID=@UserID 
```

**LINQ 生成的代码示例**

```
Note: This type of statements happen 10000 times

UPDATE [dbo].[BankAccount]
SET [Status] = @p3
WHERE [BankAccountID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [3585]
-- @p3: Input NChar (Size = 10; Prec = 0; Scale = 0) [FrozenSB] 
```

**应用ORM后的CODE**

```
public class BankAccountAppService
{
    public RepositoryLayer.ILijosBankRepository AccountRepository { get; set; }

    public void FreezeAllAccountsForUser(int userId)
    {
        IEnumerable<DBML_Project.BankAccount> accounts = AccountRepository.GetAllAccountsForUser(userId);
        foreach (DBML_Project.BankAccount acc in accounts)
        {

            acc.Freeze();

        }
        AccountRepository.UpdateAccount();

    }

}

public class LijosSimpleBankRepository : ILijosBankRepository
{
    public System.Data.Linq.DataContext Context
    {
        get;
        set;
    }

    public List<DBML_Project.BankAccount> GetAllAccountsForUser(int userID)
    {
        IQueryable<DBML_Project.BankAccount> queryResultEntities = Context.GetTable<DBML_Project.BankAccount>().Where(p => p.AccountOwnerID == userID);
        return queryResultEntities.ToList();
    }

    public List<T> GetAllAccountsofType<T>() where T : DBML_Project.BankAccount
    {
        var query = from p in Context.GetTable<DBML_Project.BankAccount>().OfType<T>()
                    select p;

        List<T> typeList = query.ToList();
        return typeList;

    }

    public virtual void UpdateAccount()
    {
        Context.SubmitChanges();
    }

}

namespace DBML_Project
{

public  partial class BankAccount
{
    //Define the domain behaviors
    public virtual void Freeze()
    {
        //Do nothing
    }
}

public class FixedBankAccount : BankAccount
{

    public override void Freeze()
    {
        this.Status = "FrozenFA";
    }
}

public class SavingsBankAccount : BankAccount
{

    public override void Freeze()
    {
        this.Status = "FrozenSB";
    }
}  
} 
```

**参考**

1.  [将 List 作为 XElement 传递以用作 XML 数据类型参数](https://stackoverflow.com/questions/11324317/pass-list-as-xelement-to-be-used-as-xml-datatype-parameter)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T07:38:46.593

您正在比较两种截然不同的场景：

1：在SQL server本地运行脚本，单集为主`UPDATE`

2：通过网络获取 10,000 条记录，更新每条记录，单独提交每条记录

您可以通过将 1 推迟到一批 10,000 而不是 10,000 批 1 来*稍微*改进 2（只是：直到最后才调用），但这**仍然**涉及在两个方向发送 10,000 条记录的详细信息，加上所有开销（例如，可能*仍然*选择通过 10,000 个单独的调用来实现）。`SubmitChanges()``SubmitChanges()`**`SubmitChanges()`**

 ***基本上，基于对象的工具不适用于针对记录的批量更新。如果 SP 有效，请使用 SP。也许通过数据上下文*调用SP，只是为了方便它添加方法/参数/等。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:00:10.593

您仍然可以从您的应用程序中执行您的存储过程/自定义 SQL 脚本。您甚至可以在 Linq-to-sql 模型中映射过程，这样您就不需要手动打开连接和创建命令。

我不确定 Linq-to-sql 是否总是在单独的往返数据库中执行每个修改命令，但我猜它确实（至少在大多数情况下）。EF总是这样做。NHibernate 对此类操作有更好的支持，因为它具有命令批处理功能。

您在此处显示的不是批量更新（单个命令更新大量记录）-大多数 ORM 将始终单独更新每条记录-这就是这些工具的工作方式。如果您加载记录并在循环中修改它们中的每一个，则与用于加载记录的原始查询的关系将丢失。现在，您的应用程序中有 10.000 条加载的记录必须更新。无法进行批量更新，因为您必须将 10.000 项更改从应用程序移动到数据库。

如果您想进行批量更新，您应该使用直接 SQL 或实现一些逻辑，从 Linq-to-sql 进行更新，而不是加载记录并在应用程序中更新它们。查看[这篇文章](http://www.aneyfamily.com/terryandann/post/2008/04/Batch-Updates-and-Deletes-with-LINQ-to-SQL.aspx)或简单地在 Linq-to-sql 中搜索 Bulk / Batch 更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:52:14.337

我做的另一种方法是将对象值作为 XML 数据类型传递给存储过程。但是当记录数超过 1000 条时会出现超时异常（大约 25 秒后）。是不是因为 xml 文件很大？

注意：1000 条记录大约需要 5 秒

```
 public virtual void UpdateBankAccountUsingParseXML_SP(System.Xml.Linq.XElement inputXML)
    {
        string connectionstring = "Data Source=.;Initial Catalog=LibraryReservationSystem;Integrated Security=True;Connect Timeout=600";
        var myDataContext = new DBML_Project.MyDataClassesDataContext(connectionstring);
        myDataContext.ParseXML(inputXML);

    }

    public void FreezeAllAccountsForUser(int userId)
    {
        List<DTOLayer.BankAccountDTOForStatus> bankAccountDTOList = new List<DTOLayer.BankAccountDTOForStatus>(); 

        IEnumerable<DBML_Project.BankAccount> accounts = AccountRepository.GetAllAccountsForUser(userId);
        foreach (DBML_Project.BankAccount acc in accounts)
        {
            string typeResult = Convert.ToString(acc.GetType());
            string baseValue = Convert.ToString(typeof(DBML_Project.BankAccount));

            if (String.Equals(typeResult, baseValue))
            {
                throw new Exception("Not correct derived type");
            }

            acc.Freeze();

            DTOLayer.BankAccountDTOForStatus presentAccount = new DTOLayer.BankAccountDTOForStatus();
            presentAccount.BankAccountID = acc.BankAccountID;
            presentAccount.Status = acc.Status;
            bankAccountDTOList.Add(presentAccount);

        }

        IEnumerable<System.Xml.Linq.XElement> el = bankAccountDTOList.Select(x =>
                        new System.Xml.Linq.XElement("BankAccountDTOForStatus",
                          new System.Xml.Linq.XElement("BankAccountID", x.BankAccountID),
                          new System.Xml.Linq.XElement("Status", x.Status)
                        ));

        System.Xml.Linq.XElement root = new System.Xml.Linq.XElement("root", el);

        AccountRepository.UpdateBankAccountUsingParseXML_SP(root);
        //AccountRepository.Update();

    } 
```

**存储过程**

```
ALTER PROCEDURE [dbo].[ParseXML] (@InputXML xml)
AS
BEGIN

DECLARE @MyTable TABLE (RowNumber int, BankAccountID int, StatusVal varchar(max))

INSERT INTO @MyTable(RowNumber, BankAccountID,StatusVal)

SELECT ROW_NUMBER() OVER(ORDER BY c.value('BankAccountID[1]','int') ASC) AS Row,
    c.value('BankAccountID[1]','int'),
    c.value('Status[1]','varchar(32)')
FROM
    @inputXML.nodes('//BankAccountDTOForStatus') T(c);

DECLARE @Count INT
SET @Count = 0

DECLARE @NumberOfRows INT
SELECT @NumberOfRows = COUNT(*) FROM @MyTable

WHILE @Count < @NumberOfRows
BEGIN

      SET @Count = @Count + 1

     DECLARE @BankAccID INT
     DECLARE @Status VARCHAR(MAX)

     SELECT @BankAccID = BankAccountID 
     FROM @MyTable
     WHERE RowNumber = @Count

     SELECT @Status = StatusVal 
     FROM @MyTable
     WHERE RowNumber = @Count

     UPDATE BankAccount 
     SET Status= @Status
     WHERE BankAccountID = @BankAccID

END

END

GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:34:43.337

这是因为 Linq to SQL 首先从服务器加载数据，然后单独更新每条记录，包括数据查询/传输到客户端，更新每条记录的请求。而在 SP 情况下，只调用 SP 直接在服务器上执行更新查询，它不包括数据获取和每条记录的更新。它批量更新记录***

# postgresql - 错误 (?) PostgreSQL 表的大小

> ID：11306348
> 
> 赞同：1
> 
> 时间：2012-07-03T07:29:24.297
> 
> 标签：postgresql, storage, vacuum

我有一个包含列和约束的表：

```
height smallint,
length smallint,
diameter smallint,
volume integer,
idsensorfragments integer,
CONSTRAINT sensorstats_idsensorfragments_fkey FOREIGN KEY (idsensorfragments)
  REFERENCES sensorfragments (idsensorfragments) MATCH SIMPLE
  ON UPDATE CASCADE ON DELETE CASCADE 
```

（没有主键）。目前有 28 978 112 条记录，但我认为表的大小太大了。

查询结果：

```
select pg_size_pretty(pg_total_relation_size('sensorstats')), pg_size_pretty(pg_relation_size('sensorstats')) 
```

是：

```
"1849 MB";"1226 MB" 
```

*idsensorfragments*列上只有一个索引。使用简单的数学，您可以看到一条记录需要 ~66,7 B (?!?!)。谁能解释一下这个数字是从哪里来的？

5 列 = 2 + 2 + 2 + 4 + 4 = 14 字节。我有一个索引，没有主键。每条记录额外的 50B 来自哪里？

PS 表被抽真空、分析和重新索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:53:23.777

您应该看看[数据库物理存储](http://www.postgresql.org/docs/current/interactive/storage.html)是如何组织的，尤其是在[页面布局](http://www.postgresql.org/docs/current/interactive/storage-page-layout.html)上。

PostgreSQL 为每个元组（行）和每个页面保留了一堆额外的字段。元组保存在 Pages 中，因为 Page 是数据库操作的项目，通常大小为 8192 字节。所以额外的空间使用来自：

*   页头，24 字节；
*   元组头，27 字节；
*   “隐形”元组版本；
*   预留空闲空间，根据表的[Storage Parameters](http://www.postgresql.org/docs/current/interactive/sql-createtable.html#SQL-CREATETABLE-STORAGE-PARAMETERS)；
*   `NULL`指标阵列；
*   *（可能错过了更多的东西）。*

主要版本之间的物理存储布局会发生变化，这就是您必须执行完整转储/恢复的原因。在最近的版本[`pg_upgrade`](http://www.postgresql.org/docs/current/interactive/pgupgrade.html)中对这个过程有很大帮​​助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:17:33.713

你做了一个 VACUUM FULL 还是[CLUSTER](http://www.postgresql.org/docs/current/interactive/sql-cluster.html)？如果没有，未使用的空间仍然专用于该表和索引。这些语句重写表，没有 FULL 的 VACUUM 不会进行重写。

# asp.net-mvc-3 - MVC3 中唯一性的远程验证不适用于可编辑模式

> ID：11306350
> 
> 赞同：2
> 
> 时间：2012-07-03T07:29:36.070
> 
> 标签：asp.net-mvc-3

我是 MVC3 的新手。我使用 ItemNo 字段作为唯一字段。但该字段可以编辑。如果我使用现有值在 ItemNo 中创建一个值，则远程验证工作正常。如果我在可编辑模式下执行此操作，它会重复与创建操作方法相同的操作。

这是我的验证控制器：

```
 <!-- language: lang-js -->
 [OutputCache(Location = OutputCacheLocation.None, NoStore = true)]
 public class ValidationController : Controller
 {
   ItemControlDBContext db = new ItemControlDBContext();
   public JsonResult IsItemNoAvailable(string ItemNo)
 {
   List<string> ItemNos = (from no in db.Item select no.ItemNo).ToList();
   if (ItemNos.Contains(ItemNo.ToLower()))
 {
   return Json("The ItemNo is already available. Try another.",  JsonRequestBehavior.AllowGet);
 }
   return Json(true, JsonRequestBehavior.AllowGet);
 }

 } 
```

这是我的模型类

```
[Required]
[Remote("IsItemNoAvailable", "Validation")]
[Editable(true)]
public string ItemNo { get; set; } 
```

请建议我以何种方式可以在可编辑模式下实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:48:36.620

您应该使用[RemoteAttribute.AdditionalFields](http://msdn.microsoft.com/en-us/library/system.web.mvc.remoteattribute.additionalfields%28v=vs.98%29.aspx)属性，并通过`Id`您的模型进行验证。比实际操作时，您不仅应该检查 db ，还应该检查`ItemNo`db `Id`。

```
[Required]
[Remote("IsItemNoAvailable", "Validation", AdditionalFields = "Id")]
[Editable(true)]
public string ItemNo { get; set; } 
```

和控制器方法（请注意，我还重新考虑了您的选择）

```
[OutputCache(Location = OutputCacheLocation.None, NoStore = true)]
public class ValidationController : Controller
{
    ItemControlDBContext db = new ItemControlDBContext();
    public JsonResult IsItemNoAvailable(string ItemNo, int ID=0)
    {
        bool itemNoAlreadyExists = db.Item.Any(item => item.ItemNo == itemNo && item.ID != ID);

        if (itemNoAlreadyExists)
        {
            return Json("The ItemNo is already available. Try another ItemNo.", JsonRequestBehavior.AllowGet);
        }
        return Json(true, JsonRequestBehavior.AllowGet);
    }

} 
```

# java - 使用 JDBC JobStore 的 Quartz 调度程序

> ID：11306354
> 
> 赞同：1
> 
> 时间：2012-07-03T07:29:45.690
> 
> 标签：java, struts2, quartz-scheduler, job-scheduling

我第一次存储作业并使用带有以下代码的 crontrigger 安排它们。

```
package com.generalsentiment.test.quartz;

import static org.quartz.CronScheduleBuilder.cronSchedule;
import static org.quartz.JobBuilder.newJob;
import static org.quartz.TriggerBuilder.newTrigger;

import java.util.Date;
import java.util.Properties;

import org.quartz.CronTrigger;
import org.quartz.JobDetail;
import org.quartz.Scheduler;
import org.quartz.SchedulerFactory;
import org.quartz.SchedulerMetaData;
import org.quartz.impl.StdSchedulerFactory;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class CronTriggerExample {

    public void run() throws Exception {
        Logger log = LoggerFactory.getLogger(CronTriggerExample.class);

        System.out.println("------- Initializing -------------------");

        Xml config = new Xml("src/hibernate.cfg.xml", "hibernate-configuration");

        Properties prop = new Properties();
        prop.setProperty("org.quartz.scheduler.instanceName", "ALARM_SCHEDULER");
        prop.setProperty("org.quartz.threadPool.class",   
                        "org.quartz.simpl.SimpleThreadPool");
        prop.setProperty("org.quartz.threadPool.threadCount", "4");

        prop.setProperty("org.quartz.threadPool
                        .threadsInheritContextClassLoaderOfInitializingThread", "true");

        prop.setProperty("org.quartz.jobStore.class", 
                          "org.quartz.impl.jdbcjobstore.JobStoreTX");
        prop.setProperty("org.quartz.jobStore.driverDelegateClass", 
                          "org.quartz.impl.jdbcjobstore.StdJDBCDelegate");
        prop.setProperty("org.quartz.jobStore.dataSource", "tasksDataStore");
        prop.setProperty("org.quartz.jobStore.tablePrefix", "QRTZ_");
        prop.setProperty("org.quartz.jobStore.misfireThreshold", "60000");
        prop.setProperty("org.quartz.jobStore.isClustered", "false");

        prop.setProperty("org.quartz.dataSource.tasksDataStore.driver", 
              config.child("session-factory").children("property").get(1).content());
        prop.setProperty("org.quartz.dataSource.tasksDataStore.URL", config.child("session-
             factory").children("property").get(2).content());
        prop.setProperty("org.quartz.dataSource.tasksDataStore.user", config.child("session-
             factory").children("property").get(3).content());
        prop.setProperty("org.quartz.dataSource.tasksDataStore.password", 
             config.child("session-factory").children("property").get(4).content());
        prop.setProperty("org.quartz.dataSource.tasksDataStore.maxConnections", "20");

        // First we must get a reference to a scheduler
        SchedulerFactory sf = new StdSchedulerFactory(prop);
        Scheduler sched = sf.getScheduler();

        System.out.println("------- Initialization Complete --------");

        System.out.println("------- Scheduling Jobs ----------------");

        // jobs can be scheduled before sched.start() has been called

        // job 1 will run exactly at 12:55 daily
        JobDetail job = newJob(SimpleJob.class).withIdentity("job2", "group2").build();

        CronTrigger trigger = newTrigger().withIdentity("trigger2", "group2")
                                          .withSchedule(cronSchedule("00 15 15 * * 
                                                         ?")).build();

        Date ft = sched.scheduleJob(job, trigger);
        System.out.println(sched.getSchedulerName());
        System.out.println(job.getKey() + " has been scheduled to run at: " + ft
                + " and repeat based on expression: "
                + trigger.getCronExpression());

        System.out.println("------- Starting Scheduler ----------------");

        /*
         * All of the jobs have been added to the scheduler, but none of the
         * jobs will run until the scheduler has been started. If you have
         * multiple jobs performing multiple tasks, then its recommended to
         * write it in separate classes, like SimpleJob.class writes
         * organization members to file.
         */
        sched.start();

        System.out.println("------- Started Scheduler -----------------");

        System.out.println("------- Waiting five minutes... ------------");
        try {
            // wait five minutes to show jobs
            Thread.sleep(300L * 1000L);
            // executing...
        } catch (Exception e) {
        }

        System.out.println("------- Shutting Down ---------------------");

        sched.shutdown(true);

        System.out.println("------- Shutdown Complete -----------------");

        SchedulerMetaData metaData = sched.getMetaData();

        System.out.println("Executed " + metaData.getNumberOfJobsExecuted() + " jobs.");

    }

    public static void main(String[] args) throws Exception {

        CronTriggerExample example = new CronTriggerExample();
        example.run();
    }
    } 
```

详细信息存储在 Tables - `QRTZ_CRON_TRIGGERS`, `QRTZ_JOB_DETAILS`&`QRTZ_TRIGGERS`

我的疑问是如何安排存储在数据库中的作业。如何在 jsp 页面中显示作业列表以及如何自动触发它们。我们的是一个带有 Hibernate3 ORM 的 struts2 应用程序。我正在尝试在应用程序加载时初始化石英调度程序。但我做不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:48:30.310

```
Date ft = sched.scheduleJob(job, trigger); 
```

调用此方法时，您的作业将安排在下一次触发时间。计划的作业将存储在适当的数据库表中。要在 jsp 上显示作业列表，您应该将您的作业密钥以及您的作业需要的自定义描述保存到另一个数据库表中，以便在检索期间您可以检索此自定义描述以及数据 Quartz 保存到它自己的表中. 自动触发这项工作是 Quartz 为您处理的事情。一旦将 crone 表达式设置为所需的值并且您的 Job 类实现`org.quartz.Job`了，Quartz 将`execute()` 在您所需的下一次触发时间运行该方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:25:39.740

```
JobDetail job = newJob(SimpleJob.class).withIdentity("job2", "group2").build(); 
```

这意味着您将拥有一个名为`SimpleJob`implements的类`org.quartz.Job`。在那个类`execute()`中需要实现方法。作业在您指定的时间自动触发`cron expression`。触发作业时调用该执行方法。

# c# - 在析构函数中执行新进程

> ID：11306357
> 
> 赞同：4
> 
> 时间：2012-07-03T07:29:52.413
> 
> 标签：c#, process, destructor

我有一个负责错误处理的课程。如果调用了析构函数，我想执行一个进程。但遗憾的是，这个过程不会开始。新进程调用带有一些参数的 exe，它应该发送一封电子邮件。为什么这不起作用？

```
~ErrorH()
{
    if ((int)e > 0)
        SendErrorMail();
}

private void SendErrorMail()
{
    if (File.Exists("C:\\Program Files (x86)\\MailSend\\MailSend.exe"))
    {
        ProcessStartInfo mailsend = new ProcessStartInfo();
        mailsend.FileName = "C:\\Program Files (x86)\\MailSend\\MailSend.exe";
        mailsend.Arguments = "…";
        Process.Start(mailsend);
    }
} 
```

例如，如果我`SendErrorMail`在构造函数中执行该函数，一切正常。如果我查看调试器，似乎我到达了`Process.Start(mailsend);`命令。什么地方出了错？我该如何解决这个问题？

**编辑**

好的，现在我已经使用了该`IDisposable`方法。它工作正常，但是否正确使用它？

```
class ErrorH : IDisposable
{
private bool disposed = false;
...
public void Dispose()
{
    Dispose(true);
    GC.SuppressFinalize(this);
}

protected virtual void Dispose(bool desposing)
{
    if(!this.disposed)
        if ((int)e > 0)
            SendErrorMail();
    disposed = true;
} 
```

在我使用的程序中：

```
using (Parameter p = new Parameter(args[0]))
{
...
} 
```

类`ErrorH`继承自`Parameter`.

格雷茨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:44:38.433

与其使用不能保证在当前时间调用的析构函数，不如使用 interface `System.IDisposable`。

通常，在 C#（例如 C++）中使用析构函数是一种不好的做法。由于我们无法确定垃圾收集器 (GC) 销毁对象的具体时间，因此 C# 提供`IDisposable`了一个方法`Dispose`，您可以在使用完对象时显式调用它，也可以通过`using`块隐式调用它。

# c# - 在基类型中引用派生类型是不好的形式吗？

> ID：11306359
> 
> 赞同：8
> 
> 时间：2012-07-03T07:29:58.120
> 
> 标签：c#, oop, inheritance

我有一个类别/文件树结构。类别和文件都可以有父级，因此我从具有 Parent 属性的公共基类派生它们。由于所有父节点显然总是类别（文件不能是父节点），因此将节点的 Parent 属性设置为 CategoryNode 类型似乎是有意义的。

基类引用派生类是不好的形式吗？如果是这样，为什么？如果是这样，有什么更好的方法来构建这个？

```
class Node {
    public CategoryNode Parent {get; set;}
}

class File : Node {
    ...
}

class CategoryNode : Node {
    ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T07:40:05.530

你可以做...

```
interface IParent {
    ...
}

class Node {
    public IParent Parent {get; set;}
}

class File : Node {
    ...
}

class CategoryNode : Node, IParent {
    ...
} 
```

这样，您不需要在基类中引用派生对象，此外，您可以更灵活地实际成为父对象，以防您在以后获得其他对象类型。此外，任何仅与父级相关的功能都可以在该接口中声明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T07:36:41.370

如果该属性`Parent`实际上**是所有后代的公共属性**并且始终属于 CategoryNode 类型，则不是问题。从语义上讲，它是正确的，从技术上讲，只要您留在同一个库中，我认为它也是正确的（以避免循环引用）。

当您编写这样的代码时，这可能是一个问题：

```
// BAD CODE
if(myProp is subclassA) 
{ ... 
} 
else if (myProp is syubclassB) 
{ ...
} 
```

这段代码很糟糕，因为您失去了继承的优势。

**即使在 .Net Framework 中也有这样的结构**。我想到的第一个例子是[XObject.Parent](http://msdn.microsoft.com/en-us/library/system.xml.linq.xobject.parent.aspx)属性。

XElement 继承了 XObject，并且 XObject 发布了 XElement 类型的属性。和你的片段一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:36:15.347

基类不应该知道谁派生自它。

如果你有这样的情况，你可能不想要继承。您应该只使用某种形式的耦合。

File 和 CategoryNode 在您的情况下应该包含一个 Node 成员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T07:38:32.587

其他选项将是更改类层次结构以使 CategoryNode 成为根类 (a)，或将属性类型更改为 Node (b)。

这两种可能性都不好： (a) 文件将具有 CategoryNode 不需要的所有功能。(b) 它将隐藏对象类型（始终为 CategoryNode）。这可能会导致代码中其他地方的无效转换错误。例如，如果您忘记了总有一个 CategoryNode 实例。

考虑到这一点，我相信当前的代码是可以的。

# php - jQuery Ajax 发布到 PHP 脚本会出现 404 错误

> ID：11306362
> 
> 赞同：2
> 
> 时间：2012-07-03T07:30:13.963
> 
> 标签：php, jquery, ajax, wordpress

我正在尝试编写一个在线实验，该实验使用 jQuery 和 ajax 将一些数据发布到一个 PHP 脚本，该脚本将数据保存到文本文件中，但我遇到了一些问题。当我发布的数据很小（比如 2kb）时，脚本可以正常工作，并且会正确保存发布的数据，但是当帖子中的数据变为 4kb 或更大时，我会收到 404 错误，并且 PHP 脚本无法运行all（没有数据保存到文件中），这很奇怪。以下是相关的 javascript 和 PHP 代码：

实验.js：

```
$.ajax({
    url: 'snippets/saveData.php',
    data: {"time": time, "experimentStimuli": experimentStimuli, "experimentPredictions": experimentPredictions, "experimentPredictionsEnd": experimentPredictionsEnd},
    type: 'POST'
    }); 
```

保存数据.php：

```
$_SESSION['user']['experimentStimuli'] = $_POST['experimentStimuli'];
$_SESSION['user']['experimentPredictions'] = $_POST['experimentPredictions'];
$_SESSION['user']['experimentPredictionsEnd'] = $_POST['experimentPredictionsEnd'];

foreach($_SESSION['user']['experimentStimuli'] as $key => $value) {
  foreach($value as $key2 => $value2) {
    fwrite($fh, $value2);
  }
  fwrite($fh, "\n");
}

foreach($_SESSION['user']['experimentPredictions'] as $key => $value) {
  foreach($value as $key2 => $value2) {
    fwrite($fh, $value2);
  }
  fwrite($fh, "\n");
}

foreach($_SESSION['user']['experimentPredictionsEnd'] as $key => $value) {
  foreach($value as $key2 => $value2) {
    fwrite($fh, $value2);
  }
  fwrite($fh, "\n");
} 
```

我尝试使用绝对 URL 而不是相对 URL，但没有区别（相对 URL 适用于小数据），我也尝试使用 header('HTTP/1.1 200 OK'); 在我的 PHP 脚本的顶部，但这似乎也不起作用。虽然我的网站的基础是 Wordpress，但我的实验代码与它是分开的，不需要任何 Wordpress 功能，但它显示的 404 错误页面是 Wordpress 404 页面。我有一种感觉，Wordpress 可能会以某种方式干扰（也因为它在本地运行良好），但我不确定如何修复它。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:46:18.163

请检查您的 php.ini 中的以下内容：

*   `post_max_size`
*   `memory_limit`

如果其中任何一个的限制为 4kb，则您的发布请求将失败。这里`memory_limit`优先于`post_max_size`. 一般`memory_limit`应大于`post_max_size`。

这里，当使用整数时，该值以字节为单位。要更改更大尺寸的值，您可以使用`K`(kilo)、`M`(mega) 和`G`(giga)。例子`10K`等`2M`_

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:35:32.893

wordpress 中的 Ajax 处理方式略有不同，请在此处阅读：http: [//codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins) 本文将简单解释如何在 wordpress 中使用 AJAX，既适用于管理员端，也适用于用户- 结尾 。即使它被称为“**插件**中的 ajax ”，它实际上也描述了在 wordpress 中处理 ajax 的最简单方法。

# php - 在 PHP 中使用 call_user_func 创建元素

> ID：11306365
> 
> 赞同：1
> 
> 时间：2012-07-03T07:30:24.127
> 
> 标签：php, function

我有一个 PHP 东西，它使用 call_user_func 为它所在的某个函数创建元素/对象。

示例 functions.php 文件：

```
 function head($args=null){

       echo $args;

    }

    function footer($args=null){

       echo $args;

    }

    function createHeadTexts(){

       echo 'This is header area';

    }

    function createFooterTexts(){

       echo 'This is footer area';

    }

    //function to call this elements
    function addParam($arg, $val){

       call_user_func($arg, call_user_func($val));

    } 
```

示例 index.php 文件：

```
 head()

    This is contents area...

    footer() 
```

回到我的functions.php文件，我添加了一个对函数的调用，它是

```
 addParam('head','createHeadTexts')//which is I thought has to be added on a header area.
addParam('footer','createHeadTexts')//which is I thought has to be added on a footer area too. 
```

但是当我尝试查看我的 PHP 页面时遇到了一个问题。

它看起来像这样：

```
 This is header area This is footer area 
This is contents area... 
```

我认为文本应该像这样显示：

```
 This is header area 
This is contents area...
This is footer area 
```

唯一应该放在我的 index.php 文件中的函数是 head() 和 footer()。head() 应该出现在网页内容之前，footer() 应该出现在内容之后。

如果我想为 head() 创建一个元素/对象/脚本，它应该是 addParam('head','function to create element/object/scripts');

请帮助我如何解决这个问题，或者还有其他方法可以使用 call_user_func 吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:37:46.433

我刚刚对此进行了测试，结果很好：

```
<?php

function head($args=null){
    echo $args;
}

function footer($args=null){
    echo $args;
}

function createHeadTexts(){
    echo 'This is header area';
}

function createFooterTexts(){
    echo 'This is footer area';
}

// function to call this elements
function addParam($arg, $val){
    call_user_func($arg, call_user_func($val));
}

addParam('head','createHeadTexts');
echo '<br />This is contents area...<br />';
addParam('footer','createFooterTexts');

?> 
```

和输出：

```
This is header area
This is contents area...
This is footer area 
```

也许你忘了改变一些论点？我唯一改变的是

addParam('footer','createHeadTexts') 到 addParam('footer','create **FOOTER** Texts')

# java - 将计时器与表关联

> ID：11306366
> 
> 赞同：0
> 
> 时间：2012-07-03T07:30:27.843
> 
> 标签：java, timer

我是计时器的新手，对它们了解不多。我的问题是我正在动态创建 2 个表，并且每当创建一个表时，都会为其分配一个 10 分钟的计时器。即用户必须在 10 分钟内填写该表，否则该表将被销毁。我尝试制作一个小演示，在其中打印内容代码是：

```
final Timer mytimers = new Timer(); 
Timer mytimers1 = new Timer();
 mytimers1 = new Timer();
final long delay1 = 5*1000; 
// mytimers = new Timer();
 mytimers.schedule(new TimerTask() {
Long current1 = System.currentTimeMillis();
 long check = current1;

      @Override
      public void run() {
        Long current = System.currentTimeMillis();
        System.out.println(current);
        System.out.println("\n");

       if((current1 + delay1)<current)

       {        

       System.out.println("mytimmer is about to stop");

       mytimers.cancel();

       }

      }

    }, 100, 1000);

 mytimers1.schedule(new TimerTask() {

      @Override
      public void run() {
        Long current = System.currentTimeMillis();
        System.out.println("in" + current);

      }
    }, delay1, 1000);

    } 
```

但是当我尝试在最终项目中实现这个 int 时，它不起作用，因为我必须将运行中的任何变量设为 final，因此它的值不能更改！请让我该怎么办!!谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:48:15.993

像这样做 ：

```
class YourClass{
Timer mytimers = new Timer(); 
Timer mytimers1 = new Timer();
long delay1 = 5*1000; 

mytimers.schedule(new TimerTask() {
Long current1 = System.currentTimeMillis();
long check = current1;
      @Override
      public void run() {
        Long current = System.currentTimeMillis();
        System.out.println(current);
        System.out.println("\n");
       if((current1 + delay1)<current) {
       System.out.println("mytimmer is about to stop");
       mytimers.cancel();
       }
    }
}, 100, 1000);

mytimers1.schedule(new TimerTask() {

      @Override
      public void run() {
        Long current = System.currentTimeMillis();
        System.out.println("in" + current);
      }
    }, delay1, 1000);
    } 
```

在您的情况下，您创建了**匿名“具体”类**，即 TimerTask，并且您试图访问不在其范围内的变量。

因此，如果您尝试访问的变量是**本地（方法）**变量，那么它们应该被**声明为 final**，或者相反的方式是将这些变量声明为我在上面所做的**即时（成员）变量。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:37:07.107

> ***我必须将运行中的任何变量设置为 final ，因此它的值不能更改！***

要么将这些变量转换为*成员变量*，要么将这些值封装在适当的类中，实例化该类并将对该对象的引用提供给计时器任务。

即使*引用*是最终的，计时器任务仍然可以执行诸如`myTableController.destroyTable()`.

# networking - TCP 消息“聚集”

> ID：11306368
> 
> 赞同：0
> 
> 时间：2012-07-03T07:30:38.050
> 
> 标签：networking, tcp, multiplayer

我正在编写一个多人 Flash 游戏，服务器是用 Python 编写的，它每秒更新 25 次。每次更新，如果玩家正在移动，服务器会发送包含该玩家新位置的 TCP 消息。在本地运行，一切都很好，但我最近将代码推送到更高规格的部署服务器（具有 100Mbps 管道连接）以测试它的运行方式。

我很高兴我做到了，因为我注意到这些更新消息在发送过程中会聚集在一起，并且会以 6 个的形式到达。在本地测试，消息以 1/25 秒的间隔到达，因此玩家移动非常顺畅，但现在确实不是。

如果您遇到同样的问题，您会查看、试验哪些内容以找到解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:32:37.940

您可以尝试禁用[Nagle 算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)以确保立即发送段。但是，鉴于您的要求，我想知道 UDP 是否不是更好的匹配。

# jquery - 插件创作：如何允许 $.myPlugin.defaults.key = 'value';？

> ID：11306375
> 
> 赞同：0
> 
> 时间：2012-07-03T07:31:09.393
> 
> 标签：jquery, plugins

# 原始问题：

*注意：下面的插件模式基于[官方 jQuery 文档](http://docs.jquery.com/Plugins/Authoring)。*

我被卡住了...如何将以下插件模式转换为允许`$.hooplah.defaults.whoop = 'there it was';`？

```
;(function($) {

    var config = {};

    config.defaults = {
        foo   : 'bar',
        hey   : 'ho',
        whoop : 'there it is'
    };

    $.fn.hooplah = function(method) {

        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery.hooplah.');
        }

    };

    var methods = {

        init: function(opts) {

            return this.each(function() {

                var options = $.extend({}, config.defaults, opts);

                // Stuff here...

            });

        }

    };

})(jQuery); 
```

理想情况下，我想同时做`$('.foo').hooplah({ whoop: 'there is was' })`和`$.hooplah.defaults.whoop = 'there it was';`。

任何提示/代码/链接将不胜感激。:)

非常感谢您的帮助！

* * *

# 建议的解决方案#1

## 调用语法：`$.pluginName.defaults`

基于**@AmithGeorge**回复的代码：

```
;(function($) {

    var config = {};

    config.others = {
        blah : 'nah',
        cha  : 'right!',
        last : 'one'
    }

    config.defaults = {
        foo   : 'bar',
        hey   : 'ho',
        whoop : 'there it is'
    };

    $.hooplah = {};
    $.hooplah.defaults = config.defaults;
    $.hooplah.others   = config.others;

    $.fn.hooplah = function(method) {

        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery.hooplah.');
        }

    };

    var methods = {

        init: function(opts) {

            return this.each(function() {

                var defaults = $.extend({}, config.defaults, config.others, $.hooplah.defaults, $.hooplah.others);

                // After some lines...

                var options = $.extend({}, defaults, opts);

                console.log(options);

                // Stuff here...

            });

        }

    };

})(jQuery); 
```

### HTML：

```
<ul id="nav><li>...</li></ul>

<script type="text/javascript">
    <!--

        $(document).ready(function() {

            $.hooplah.defaults.foo = 'foooooo';
            $.hooplah.defaults     = { whoop : 'what?' };
            $.hooplah.others.blah  = 'why?';
            $.hooplah.others       = { cha : 'ok' }
            $nav = $('#nav');
            $nav.hooplah({
                hey  : 'hey hey',
                last : 'first'
            });

        });

    //-->
</script> 
```

### 之前的输出：

```
blah     "nah"
cha      "right!"
foo      "bar"
hey      "ho"
last     "one"
whoop    "there it is" 
```

### 输出后：

```
blah     "why?"
cha      "ok"
foo      "foooooo"
hey      "hey hey"
last     "first"
whoop    "what?" 
```

* * *

# 建议的解决方案#2

## 调用语法：`$.fn.pluginName.defaults`

基于**@JonJaques**回复的代码：

```
;(function($) {

    var config = {};

    config.others = {
        blah : 'nah',
        cha  : 'right!',
        last : 'one'
    }

    config.defaults = {
        foo   : 'bar',
        hey   : 'ho',
        whoop : 'there it is'
    };

    var methods = {

        init: function(opts) {

            return this.each(function() {

                var options = $.extend({}, config.defaults, config.others, $.fn.hooplah.defaults, $.fn.hooplah.others, opts);

                console.log(options);

                console.log(config.others.last); // Outputs "one".

                // Stuff here...

            });

        }

    };

    $.fn.hooplah = function(method) {

        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery.hooplah.');
        }

    };

    $.fn.hooplah.defaults = config.defaults;

    $.fn.hooplah.others = config.others;

})(jQuery); 
```

### HTML：

```
<ul id="nav><li>...</li></ul>

<script type="text/javascript">
    <!--

        $(document).ready(function() {

            $nav = $('#nav');

            $.fn.hooplah.defaults.foo = 'foooooo';
            $.fn.hooplah.defaults     = { whoop : 'what?' };
            $.fn.hooplah.others.blah  = 'why?';
            $.fn.hooplah.others       = { cha : 'ok' }
            $nav.hooplah({
                hey  : 'hey hey',
                last : 'first'
            });

        });

    //-->
</script> 
```

### 之前的输出：

```
blah     "nah"
cha      "right!"
foo      "bar"
hey      "ho"
last     "one"
whoop    "there it is" 
```

### 输出后：

```
blah     "why?"
cha      "ok"
foo      "foooooo"
hey      "hey hey"
last     "first"
whoop    "what?" 
```

* * *

**惊人的。:)**

*让我知道上述代码示例是否可以改进和/或我是否忽略了某些内容。*

谢谢@AmithGeorge 和@JonJaques！你们这些人认真**摇滚！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:41:28.337

为什么你不能这样做？

```
config.defaults = {
    foo   : 'bar',
    hey   : 'ho',
    whoop : 'there it is'
};

$.hooplah.config.defaults = config.defaults; 
```

在您的 init 函数中，第一行将是

```
var defaults = $.extend({}, config.defaults, $.hooplah.config.defaults);
// after some lines
var options = $.extend({}, defaults, opts); 
```

我看到这样做的好处是，如果有人将 $.hooplah.config.defaults 替换为与您的配置没有相同键的对象，您的插件仍然可以从私有获取默认配置值多变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:08:12.213

你到底对什么感到困惑？

`config.defaults`是*您*定义默认值的地方。

`opts`（传入的 arg `init`）对应于传入插件的对象。

```
$('.foo').hooplah({
   whoop: 'there is was'
} 
```

这会覆盖您的默认选项，但不会删除“foo”或“hey”。

在里面`init`你想引用`options`var，因为这个 var 代表*你设置的默认值和**用户*指定的选项的组合。

这是否回答你的问题？

回应您的评论-您可以写

```
$.fn.hooplah = function(method) {
  this.defaults = config.defaults; 
```

然后添加 $.fn.hooplah.defaults 作为扩展函数的第三个参数

```
var options = $.extend({}, config.defaults, $.fn.hooplah.defaults, opts); 
```

`config.defaults`您对默认值的私有引用 在哪里`$.fn.hooplah.defaults`，将是一个公共的可覆盖对象，用户可以在其中设置“全局”配置，并且`opts`是按使用传递的对象。

`options`然后您只需在插件代码中的其他任何地方引用该变量。

# javascript - 如何制作临时 HTML 并将数据克隆到其中？

> ID：11306378
> 
> 赞同：1
> 
> 时间：2012-07-03T07:31:21.060
> 
> 标签：javascript, html, html-table, report

我的 HTML 中有一个表格，我只想用这个表格生成新的临时 HTML。如何使用 HTML 或 JavaScript 实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:33:39.043

```
var tempTable = document.getElementById("myTableId").cloneNode(true); 
```

其中 myTableId 是您要克隆的表的 id。然后你可以在任何你想要的地方附加你的 tempTable（使用[appendChild](https://developer.mozilla.org/en/DOM/Node.appendChild)）

# jquery - HTML5/JQuery 拖放（在拖放事件中拖动图像并在 iframe 中填充相应的网页）

> ID：11306382
> 
> 赞同：0
> 
> 时间：2012-07-03T07:31:39.293
> 
> 标签：jquery, html, drag-and-drop

我正在尝试实现拖放功能。在左侧窗格中，我将拥有可以被视为图像的图块。在右侧窗格中，我将拥有 iframe。我想从左窗格中拖动图块并将它们放到右窗格上的 iframe 中。唯一的问题是我想将每个图像/图块与网页（在同一个域中）相关联，这样在放置时，关联的网页会填充到 iframe 中。

关于 jquery 拖放如何工作以及 HTML 5 拖放如何工作的大量文档。但是我不知道如何将图像映射到可以在放置事件时填充的网页。

我能想到的一件可能的事情是存储图像及其具有相同名称的相应网页。也就是说，如果我有一个图像 xyz.jpg，我会将其对应的网页命名为 xyz.html。所以在drop事件的时候，我会从“xyz.jpg”中去掉“xyz”并将“.html”附加到它上面。所以结果是 xyz.html，我将使用 jquery 将其放入 iframe 的“src”字段中。

这是解决问题的好方法还是有更好的方法来解决这个问题，这样我就没有图像和网页同名的限制？非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:35:43.597

只需使用数据标签。例如：

```
<img src="blah.jpg" data-url="http://google.com/" /> 
```

然后（假设 jquery），您可以像这样访问它们：

```
$(image).attr('data-url'); 
```

或者

```
$(image).data('url'); 
```

jsFiddle：http: [//jsfiddle.net/jQKV4/](http://jsfiddle.net/jQKV4/)

# spotify - Spotify 不保存应用程序

> ID：11306383
> 
> 赞同：0
> 
> 时间：2012-07-03T07:31:48.947
> 
> 标签：spotify

我关注了 hello world 的 spotify

它显示当前播放歌曲和专辑的名称

但它不显示`"hello world"`消息

此外，每当我关闭 Spotify 并再次打开它时，我的应用程序就会消失，即使我点击了

> 将应用程序添加到收藏夹

“添加”按钮

为什么应用程序在关闭 Spotify 后消失了？

为什么我的 hello world 没有显示，

我刚刚将 spotify 教程中的压缩文件粘贴到我的 ~/Spotify 文件夹中

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:31:24.117

如果您查看代码，您会看到在教程期间删除了“Hello World”消息。

Spotify 不会在重新启动时将本地应用程序保存在侧边栏中 - 只有来自 App Finder 的应用程序。

# c - 如何使用 c 绘制图形？

> ID：11306384
> 
> 赞同：0
> 
> 时间：2012-07-03T07:31:51.393
> 
> 标签：c, windows, graph

我使用带有 GUI 界面的 C 编写了一个进程浏览器。我想添加一个图表来显示 CPU 状态。哪些库或函数可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:37:08.930

您可以使用[Cairo](http://www.cairographics.org/)，它是一个用 C 编写的简单 2D 图形库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:35:39.697

您可以使用`curses`称为 pdcurses 的 windows [impelementation](http://pdcurses.sourceforge.net/doc/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:39:55.623

您可以将[OpenGL](http://www.opengl.org/sdk/)用于高性能图形

# php - 如何在 Joomla k2 item.php 中包含新模块

> ID：11306387
> 
> 赞同：2
> 
> 时间：2012-07-03T07:32:04.197
> 
> 标签：php, html, joomla, joomla-k2

我想在 K2 的 item.php 中包含一个新的模块位置。可能吗？

我想在该模块中添加广告（不同类别的差异）。

此模块应在文章中左对齐，项目图像应在文章中右对齐。

请帮助我实现这一目标。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:13:49.350

要在文章中加载模块，只需给模块一个自定义位置，然后在文章编辑器中添加以下代码：

```
{loadposition xxx} 
```

xxx = 您获得模块的自定义位置。

如果您想知道如何为模块提供自定义位置，请不要担心。不要单击 Joomla 1.5 的下拉菜单或 Joomla 2.5 的按钮，而是单击输入框内并输入您自己的位置。

然后，您可以根据需要对齐模块，就像普通文本一样。

希望这可以帮助。

# css - 在 Aptana 中链接到外部样式表

> ID：11306399
> 
> 赞同：0
> 
> 时间：2012-07-03T07:33:25.370
> 
> 标签：css, aptana, stylesheet

我是 Aptana Studio 的新手，恐怕有一些我不明白的地方。当我尝试链接到与 .html 文件位于同一文件夹中的外部样式表时，它不起作用。通常，您只需在 head 部分中放置类似以下代码的内容，对吗？

```
<link rel="stylesheet" type="text/css" href="style.css" /> 
```

有人可以向我解释为什么这不起作用吗？到目前为止，我真的很喜欢 Aptana，但这让我发疯。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-03T07:44:21.803

您的代码是正确的，但我没有听说过关于 Aptana 的好消息。如果你只想用 HTML CSS 和 JavaScript 编写代码，你肯定想使用`brackets`

这是一个很棒的文本编辑器，在像 firebug 这样的浏览器中具有实时代码预览 -

[http://blog.brackets.io/2012/06/25/brackets-open-source-code-editor/](http://blog.brackets.io/2012/06/25/brackets-open-source-code-editor/)

`Download the latest sprint:` [https://github.com/adobe/brackets/downloads](https://github.com/adobe/brackets/downloads)

# jquery - IOS 5.1 负 z-index 和固定 div

> ID：11306403
> 
> 赞同：2
> 
> 时间：2012-07-03T07:33:47.950
> 
> 标签：jquery, css, ipad, ios5.1

我有一个网站，它利用页面菜单的底部（位置：其中包含图像的固定 div）在 div 上使用悬停 CSS 在图标和例如搜索框或带有社交媒体图标的框等之间进行切换。它通过在悬停时使用 z-index:100 使前景 div 变为 z-index:-1 和背景 div 来实现这一点（即在 iPad 上触摸）。图像也应用了不透明度，因此它需要 z-index:-1 将旧的前景图像弹出到 body div 中全屏背景图像的后面，否则您在悬停后通过新的前景图像看到旧的前景图像。

在 IE、FF、Safari 等和 iPad IOS 4.3 上运行良好。但是在 iPad IOS 5.1 上（刚刚升级了我的 iPad - 在 IOS 5.0 上不确定） z-index:-1 不会将 div 放在背景主体 div 图像的后面，而是放在它的前面。我尝试为所有 div、主体和背景分配一个 z-index 值，但我所做的一切都没有使 -1 将其发送到后面。我也尝试过制作所有正的 z-index 数字并使用 z-index:0 或 z-index:1 作为堆栈中的最后一个，但这也不起作用。

5.1 z-index 似乎有点不稳定，因为即使其他不使用 -1 z-index 的部分已经改变了 iPad 与其他浏览器上的堆叠顺序，所以事情正在消失在排名较低的 z-index 后面。很奇怪。

任何想法表示赞赏，

谢谢，

布拉德

更多信息：

```
CSS
#BottomMidLeft { position: fixed; bottom:0px; left:260px; width: 330px; height:120px; } 
#BottomMidPebbleLSml {z-index:60; position: fixed; left:220px; bottom:-95px; background-color:transparent; width:500px; filter:alpha(opacity=80); -moz-opacity:0.80; -khtml-opacity: 0.80; opacity: 0.80; } 
#BottomSearchIconGoogle {z-index:70; position: fixed; left:331px; bottom:3px; } 
#BottomMidPebbleLBig {z-index:-1; position: fixed; left:200px; bottom:-97px; background-color:transparent; width:500px; filter:alpha(opacity=88); -moz-opacity:0.88; -khtml-opacity: 0.88; opacity: 0.88; }
#BottomSearchGoogle {z-index:-1; position: fixed; left:287px; bottom:22px; background-color:transparent; width:260px;} 
#BottomMidLeft:hover #BottomMidPebbleLSml{ z-index:-1; } 
#BottomMidLeft:hover #BottomSearchIconGoogle{ z-index:-1; } 
#BottomMidLeft:hover #BottomMidPebbleLBig{ z-index:170; } 
#BottomMidLeft:hover #BottomSearchGoogle{ z-index:170; } 

HTML
<div id="BottomMidLeft"> 
<div id="BottomMidPebbleLSml"> <img src="/images/elements/pebble-mid_nh.png" alt="Pebble for Overlays" width="300px"/> </div> 
<div id="BottomSearchIconGoogle"> <img src="/images/elements/Book1.png" alt="Search Icon" width="55px"/> </div>
<div id="BottomMidPebbleLBig"> <img src="/images/elements/pebble-mid_nh.png" alt="Pebble for Overlays" width="400px" /> </div> 
<div id="BottomSearchGoogle"> Google Search Code Here  </div>
</div> 
<!-- this is the end div #BottomMidLeft --> 
```

# java - 来自摄像头的视频流呈现到 JavaFX 2.0 MediaView

> ID：11306408
> 
> 赞同：6
> 
> 时间：2012-07-03T07:34:06.937
> 
> 标签：java, api, camera, javafx, javafx-2

由于 JavaFX2.0 有一个媒体视图，是否有可能以某种方式将摄像头馈送实时流式传输到媒体组件中？由于没有相机 API，我不知道如何实现这一点。我们可以使用另一个 Java 库来处理相机，然后在 MediaView 中流式传输视频吗

有可能吗，如果有，那么我们该怎么做。可能是通过对相机使用任何 JavaAPI，然后将视频流式传输到 MediaView 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:48:42.093

有一个名为[Xuggle](http://www.xuggle.com/)的 Java 库，它是一种将视频流式传输到 Java 应用程序的开源解决方案。它建立在 ffmpeg 库之上。

以我的经验，它适用于 MPEG-2 和 MPEG-4 编解码器的某些实现，但不适用于其他编解码器。如果您不知道，这些编解码器有大约 800 种不同版本，其中一些最终会在前面、中间或末尾粘贴数据包，以迫使您在显示视频时使用它们的解码器. 直到（可能包括）新的 JavaFX 代码为止，几乎没有对将视频流式传输到 Java 的强大支持。

您可能想要探索做一些事情，例如在 JPanel 中嵌入 VLC 实例并将其显示给您的用户。还有一些库试图允许 Flash 和 Java 之间的一些交互，可以用来解决这个问题。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:31:00.593

似乎在 2.0 中您仍然无法为视频/音频流附加外部源。您需要创建一个文件并为此文件提供 uri 以在 MediaView 中播放视频。不能用于从相机捕获的视频。我在 JavaFX 2.0 中没有这样做，但在 1.3 中，我们过去常常只向 ImageView 提供一个图像，编写我们自己的捕获器/流媒体。可能您可以使用任何 3rd 方库来执行此操作。

# javascript - 使用 Javascript/jQuery 获取字段的值

> ID：11306418
> 
> 赞同：-2
> 
> 时间：2012-07-03T07:34:55.407
> 
> 标签：javascript, jquery, html, extjs

这是我的页面：

[http://bryntum.com/examples/gantt-latest/examples/basic/basic.html](http://bryntum.com/examples/gantt-latest/examples/basic/basic.html)

我想获取开始和结束日期的**当前**值。（我稍后将实现一个按钮，用户可以按下该按钮，然后它将获取所有日期并将它们发布到某处）。目前我只需要以某种方式获取日期值。

起初这些值是从 XML 加载的，但您可以手动更改这些值。

我尝试查看源代码，但无法获取字段 ID 等。

**那么如何使用 JS 访问这些字段呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:51:49.590

用 jquery 来做这件事是完全错误的——它是一个具有非常好的文档的 Extjs 组件。

`Gnt.panel.Gantt`有一个`getStart`方法：

> 获取调度程序视图的当前开始日期的方法

和一个`getEnd`方法：

> 获取调度程序视图的当前结束日期的方法

[http://bryntum.com/docs/#!/api/Gnt.panel.Gantt](http://bryntum.com/docs/#!/api/Gnt.panel.Gantt)

**编辑：**

尝试`getTaskStore`，然后`getById`在商店中，女巫将返回`Task`具有 StartDate 和 EndDate 字段的 a。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:57:57.153

如果您仍在寻找 JS 解决方案：

我无法使用 Jquery，服务器是否支持它？

通过使用 JS，由于单元格没有 ID，您可以通过类名访问您的字段：

```
document.getElementsByClassName("x-grid-cell-inner "); 
```

而不是遍历返回的数组。

完整代码：

```
var data = document.getElementsByClassName("x-grid-cell-inner ");
var mark = 0;
var out = "";
var patt=/\d\/\d/;
for (i in data) {
    var txt = new String(data[i].innerHTML);
    if (patt.test(txt)) {
        if (mark == 0) {
            out += "start: "+txt+" ";
            mark = 1;
        } else {
            mark = 0;
            out += "end: "+txt+" ";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:59:56.460

不幸的是，div 上没有唯一的 id，因此您无法访问它们。但它们似乎具有独特的`class=""`价值：

`class="x-grid-cell x-grid-cell-startdatecolumn-1011"`

`class="x-grid-cell x-grid-cell-enddatecolumn-1014"`

创建一个这样的javascript

`document.getElementsByClassName("x-grid-cell x-grid-cell-enddatecolumn-1014")`

访问它们，然后您可以获得它们的开始和结束日期

# ruby-on-rails-3 - 使用 Rails 发送自定义电子邮件？

> ID：11306419
> 
> 赞同：0
> 
> 时间：2012-07-03T07:34:59.310
> 
> 标签：ruby-on-rails-3, email

我有一个名为 www.mystorkparty.com 的网站，您可以在其中为您的婴儿洗澡建立一个注册表。现在我想添加一个链接，以便用户可以通过电子邮件将注册表链接发送给朋友。

我可以使用 html 并创建一个打开电子邮件程序的链接 - 但是如何自动输入特定的注册表 URL。或者我应该做一个内部电子邮件设置，然后从我的网站本身发送。

什么是最好的选择？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:00:36.300

为此，您可以使用[mail_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-mail_to)助手。帮助程序允许您指定许多参数，`mail_to`例如`:subject`和`:cc`作为可选参数来预填充链接。您还可以使用许多选项（例如 javascript 或十六进制编码）来混淆链接。

示例链接类似于指向方法的链接，但如下所示：

```
mail_to "me@domain.com", "My email", :cc => "ccaddress@domain.com", :subject => "This is an example email" 
```

这将创建一个`mailto:`链接，该链接将打开用户默认的电子邮件客户端，并填写相关值。

# java - Executor/Queue 仅处理最后一个已知任务

> ID：11306425
> 
> 赞同：3
> 
> 时间：2012-07-03T07:35:31.517
> 
> 标签：java, concurrency, queue, executorservice

我正在寻找一些将处理事件的并发代码。此处理可能需要很长时间。

当该事件正在处理时，它应该记录传入事件，然后在它可以再次自由运行时处理最后传入的事件。（可以丢弃其他事件）。这有点像 FILO 队列，但我只需要在队列中存储一个元素。

理想情况下，我想将我的新 Executor 插入到我的事件处理架构中，如下所示。

```
public class AsyncNode<I, O> extends AbstractNode<I, O>  {
    private static final Logger log = LoggerFactory.getLogger(AsyncNode.class);
    private Executor executor;

    public AsyncNode(EventHandler<I, O> handler, Executor executor) {
        super(handler);
        this.executor = executor;
    }

    @Override
    public void emit(O output) {
        if (output != null) {
            for (EventListener<O> node : children) {
                node.handle(output);
            }
        }
    }

    @Override
    public void handle(final I input) {

        executor.execute(new Runnable() {

            @Override
            public void run() {
                try{
                emit(handler.process(input));
                }catch (Exception e){
                    log.error("Exception occured whilst processing input." ,e);
                    throw e;
                }

            }
        });

    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:40:43.443

我也不会。我会对您要处理的事件有一个 AtomicReference 并添加一个任务以破坏性方式处理它。

```
final AtomicReference<Event> eventRef =

public void processEvent(Event event) {
   eventRef.set(event);
   executor.submit(new Runnable() {
       public vodi run() {
           Event e = eventRef.getAndSet(null);
           if (e == null) return;
           // process event
       }
   }
} 
```

这只会在执行器空闲时处理下一个事件，而无需自定义执行器或队列（可用于其他事情）

这也可以扩展到具有键控事件，即您想要处理键的最后一个事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-11T15:00:56.187

我认为关键是您需要将“丢弃政策”应用于您的`Executor`. 如果您只想处理最新的任务，那么您需要队列大小为 1 和丢弃最旧的“丢弃策略”。这是执行此操作的示例

```
Executor latestTaskExecutor = new ThreadPoolExecutor(1, 1, // Single threaded 
        30L, TimeUnit.SECONDS, // Keep alive, not really important here
        new ArrayBlockingQueue<>(1), // Single element queue
        new ThreadPoolExecutor.DiscardOldestPolicy()); // When new work is submitted discard oldest 
```

然后当你的任务进来时，只需将它们提交给这个执行器，如果已经有一个排队的作业，它将被新的替换

```
latestTaskExecutor.execute(() -> doUpdate())); 
```

这是一个显示此工作的示例应用程序

```
import java.util.Random;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.Executor;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicInteger;

public class LatestUpdate {

    private static final Executor latestTaskExecutor = new ThreadPoolExecutor(1, 1, // Single threaded
            30L, TimeUnit.SECONDS, // Keep alive, not really important here
            new ArrayBlockingQueue<>(1), // Single element queue
            new ThreadPoolExecutor.DiscardOldestPolicy()); // When new work is submitted discard oldest

    private static final AtomicInteger counter = new AtomicInteger(0);
    private static final Random random = new Random(); 

    public static void main(String[] args) {
        LatestUpdate latestUpdate = new LatestUpdate();
        latestUpdate.run();
    }

    private void doUpdate(int number) {
        System.out.println("Latest number updated is: " + number);
        try { // Wait a random amount of time up to 5 seconds. Processing the update takes time...
            Thread.sleep(random.nextInt(5000));
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    private void run() {
        // Updates a counter every second and schedules an update event
        Thread counterUpdater = new Thread(() -> {
            while (!Thread.currentThread().isInterrupted()) {
                try {
                    Thread.sleep(1000L); // Wait one second
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                counter.incrementAndGet();
                // Schedule this update will replace any existing update waiting 
                latestTaskExecutor.execute(() -> doUpdate(counter.get()));
                System.out.println("New number is: " + counter.get());
            }
        });
        counterUpdater.start(); // Run the thread
    }
} 
```

这也涵盖了 GUI 的情况，一旦更新停止到达，您希望 GUI 最终与收到的最后一个事件保持一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:54:18.790

```
public class LatestTaskExecutor implements Executor {
    private final AtomicReference<Runnable> lastTask =new AtomicReference<>();
    private final Executor executor;

    public LatestTaskExecutor(Executor executor) {
        super();
        this.executor = executor;
    }

    @Override
    public void execute(Runnable command) {
        lastTask.set(command);
        executor.execute(new Runnable() {
            @Override
            public void run() {
                Runnable task=lastTask.getAndSet(null);
                if(task!=null){
                    task.run();
                }
            }
        });

    }
}

@RunWith( MockitoJUnitRunner.class )
public class LatestTaskExecutorTest {

    @Mock private Executor executor;
    private LatestTaskExecutor latestExecutor;
    @Before
    public void setup(){
        latestExecutor=new LatestTaskExecutor(executor);
    }
    @Test
    public void testRunSingleTask() {
        Runnable run=mock(Runnable.class);
        latestExecutor.execute(run);
        ArgumentCaptor<Runnable> captor=ArgumentCaptor.forClass(Runnable.class);
        verify(executor).execute(captor.capture());
        captor.getValue().run();
        verify(run).run();
    }

    @Test
    public void discardsIntermediateUpdates(){
        Runnable run=mock(Runnable.class);
        Runnable run2=mock(Runnable.class);
        latestExecutor.execute(run);
        latestExecutor.execute(run2);
        ArgumentCaptor<Runnable> captor=ArgumentCaptor.forClass(Runnable.class);
        verify(executor,times(2)).execute(captor.capture());
        for (Runnable runnable:captor.getAllValues()){
            runnable.run();
        }
        verify(run2).run();
        verifyNoMoreInteractions(run);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T03:58:04.963

这个答案是来自 DD 的一个修改版本，它最大限度地减少提交多余任务。

[原子引用](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicReference.html)用于跟踪最新事件。自定义任务被提交到队列以潜在地处理事件，只有读取最新事件的任务才会真正继续执行并在清除对 null 的原子引用之前执行有用的工作。当其他任务有机会运行并发现没有可处理的事件时，它们只是什么都不做，然后默默地消失。通过跟踪队列中可用任务的数量来避免提交多余的任务。如果队列中至少有一个待处理的任务，我们可以避免提交该任务，因为该事件将在已经排队的任务出列时处理。

```
import java.util.concurrent.Executor;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.concurrent.atomic.AtomicReference;

public class EventExecutorService implements Executor {

    private final Executor executor;
    // the field which keeps track of the latest available event to process
    private final AtomicReference<Runnable> latestEventReference = new AtomicReference<>();
    private final AtomicInteger activeTaskCount = new AtomicInteger(0);

    public EventExecutorService(final Executor executor) {
        this.executor = executor;
    }

    @Override
    public void execute(final Runnable eventTask) {
        // update the latest event
        latestEventReference.set(eventTask);
        // read count _after_ updating event
        final int activeTasks = activeTaskCount.get();

        if (activeTasks == 0) {
            // there is definitely no other task to process this event, create a new task
            final Runnable customTask = new Runnable() {
                @Override
                public void run() {
                    // decrement the count for available tasks _before_ reading event
                    activeTaskCount.decrementAndGet();
                    // find the latest available event to process
                    final Runnable currentTask = latestEventReference.getAndSet(null);
                    if (currentTask != null) {
                        // if such an event exists, process it
                        currentTask.run();
                    } else {
                        // somebody stole away the latest event. Do nothing.
                    }
                }
            };
            // increment tasks count _before_ submitting task
            activeTaskCount.incrementAndGet();
            // submit the new task to the queue for processing
            executor.execute(customTask);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-07T05:32:23.773

虽然我喜欢 James Mudd 的解决方案，但它仍然会在前一个任务运行时将第二个任务排入队列，这可能是不可取的。如果您想在先前未完成的情况下始终忽略/丢弃到达的任务，您可以像这样制作一些包装器：

```
public class DiscardingSubmitter {
private final ExecutorService es = Executors.newSingleThreadExecutor();
private Future<?> future = CompletableFuture.completedFuture(null); //to avoid null check

public void submit(Runnable r){
    if (future.isDone()) {
        future = es.submit(r);
    }else {
        //Task skipped, log if you want
    }
} 
```

}

# jquery - Css 不适用于插件上的 fancybox

> ID：11306427
> 
> 赞同：4
> 
> 时间：2012-07-03T07:35:42.087
> 
> 标签：jquery, yii, fancybox

我正在使用 yii tokeninput 插件[Yii tokeninput](http://www.yiiframework.com/extension/tokeninput/)进行自动完成。如果我在页面上使用它，它的 css 正在应用，但如果我在fancybox 中使用它，则 css 不适用。

控制器代码

```
echo $this->renderPartial('profile/_user_message',array('model'=>$saveMessage),false,true);Yii::app()->end(); 
```

查看代码

```
<?php 
       $prePopulate = null;
       $processPrePopulate = false;
       if($prePopulate)
               $processPrePopulate = true;

       $this->widget('ext.tokeninput.TokenInput', array(
       'model' => $model,
       'attribute' => 'TARGET_USER_IDS',
               'url'=>$this->createUrl('user/search'),
       'options' => array(
           'allowCreation' => false,
           'preventDuplicates' => true,
          // 'resultsFormatter' => 'js:function(item){ return “&lt;li><p>” + item.name + “&lt;/p></li>” }',
           'theme' => 'facebook',
                       'prePopulate' => $prePopulate,
                       'processPrePopulate' => $processPrePopulate,
       )
   )); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:51:23.637

Toleninput 扩展自动在任何页面中包含 css 文件，但它不包含在 fancybox 中的 css 文件我不知道它背后的原因，所以我在其父页面中包含该 css 文件它解决了我的问题。

```
$assetUrl =Yii::app()->getAssetManager()->publish(Yii::getPathOfAlias('ext.tokeninput.assets'));
Yii::app()->clientScript->registerCssFile($assetUrl.'/css/token-input-facebook.css'); 
```

# php - 如何使用本地主机中的 php 文件计算远程主机中文件夹中的文件数？

> ID：11306430
> 
> 赞同：0
> 
> 时间：2012-07-03T07:35:53.533
> 
> 标签：php, file, localhost, glob

我想计算远程主机文件夹中的文件数。路径是可穿越的。我要检查的文件在本地主机中？
怎么做？
我找不到使用 glob 函数在远程主机中获取文件的示例。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:39:28.503

您不能在远程主机上执行代码。更好的解决方案是放置一个脚本来计算文件并在远程主机上回显数字，然后执行：

```
$num_files = file_get_contents('http://remoteaddr/count_files.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:40:14.763

您要么需要远程机器上的 php 文件，要么必须查看 PHP 的[ftp 功能](http://php.net/manual/en/book.ftp.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T23:34:22.727

```
function count_files($user, $host, $dir_path) {
    $command = "ssh {$user}@{$host} ls -l {$dir_path} | wc -l";
    $res = (int)system($command);
    return $res - 1;
} 
```

# javascript - 用户滚动页面时如何缓慢移动标题？

> ID：11306432
> 
> 赞同：4
> 
> 时间：2012-07-03T07:36:04.523
> 
> 标签：javascript, jquery, html, css

我想在这个示例网站上实现这个 Header 上使用的效果：

[http://anchorage-theme.pixelunion.net/](http://anchorage-theme.pixelunion.net/)

您会注意到，当您滚动页面时，标题会慢慢向上移动，直到它从视图中消失。我想达到同样的效果。我相信它需要一些 JS 和 CSS 定位，但仍然不知道如何实现这一点。这是通过视差滚动完成的吗？

如果有人能给我一个简单的例子来说明用于对元素执行此操作的代码，将不胜感激。所以我可以在我自己的网站上使用它。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:39:56.693

$(window).scroll(function () {...}) 是您在这里需要的

$(document).scrollTop() 是从顶部滚动的距离

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:49:09.477

用这个：

```
$(window).scroll(function(){ 
  if ($(this).scrollTop() > x){  // x should be from where you want this to happen from top//
    //make CSS changes here
  } 
  else{
    //back to default styles

  }
}); 
```

# asp.net-mvc-3 - 在 MVC3 RAZOR 视图引擎中使用组件 ID 进行操作链接

> ID：11306436
> 
> 赞同：0
> 
> 时间：2012-07-03T07:36:38.967
> 
> 标签：asp.net-mvc-3

我有一个视图 .cshtml 页面的代码段，例如：

```
@Html.ActionLink("Add Charts of Account", "Save") 
```

运行模式我可以看到以下 HTML 代码：

```
 <a href="/ChartsOfAccount/Save">Add Charts of Account</a> 
```

但我想遵循 html 代码：

```
 <a id="lblAddNode" href="/ChartsOfAccount/Save">Add Charts of Account</a> 
```

是否可以？如果可能，请用示例代码解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:38:03.023

[ActionLink 帮助](http://msdn.microsoft.com/en-us/library/dd492124.aspx)器的重载允许您指定`routeValues`and `htmlAttributes`：

```
@Html.ActionLink(
    "Add Charts of Account",    // linkText
    "Save",                     // actionName
    null,                       // routeValues
    new { id = "lblAddNode" }   // htmlAttributes
) 
```

# php - 任务调度程序中的 PHP cron 作业在 Windows 2008 中不起作用

> ID：11306437
> 
> 赞同：1
> 
> 时间：2012-07-03T07:36:39.857
> 
> 标签：php, windows, scheduled-tasks, cron-task

我在 Windows 2008 中的任务计划程序有问题。它在 2003 年时工作得很好，但最近我已经从 Windows 2003 迁移到 Windows 2008 服务器，现在任务计划程序不工作了。

我已将我的动作参数设置如下..

**C:\php\php.exe -q "C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs
\dev.mysite.com.au\website\application\cronjobs\cronrun.php"**

我已经检查了其他设置，一切似乎都很好。所以有人可以建议我这可能是什么原因吗？提前致谢..

# sql - 所有 RDBMS 的通用数据库脚本

> ID：11306450
> 
> 赞同：0
> 
> 时间：2012-07-03T07:37:08.090
> 
> 标签：sql, sql-scripts

我正在开发一个工具，它将运行数据库脚本以通过简单的 JDBC 连接在不同的 RDBMS 中创建表。

现在我的问题是为不同的 RDBMS 创建 JDBC 连接我必须编写不同的 SQL 脚本，Sybase 的脚本与 Oracle 或 MySQL 的脚本不同。为不同的 RDBMS 编写不同的脚本变得非常乏味。

那么有什么常见的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:36:30.983

如果你是通过sql脚本来做的话，恐怕是没有办法的。常见的方法是使用通用的编程语言（C#、java、...）并在那里编写所有内容，然后为不同的数据库创建转换算法，但您也可以尝试 NHibranate，例如在 C# 中可以处理最常见的数据库并且已经有一些方法也可以看看 PetaPoco 或 Massive。

有很多方法可以解决这个问题，但没有一个是即插即用的，你需要一些工作，但我不知道你的工作需求

# c# - 并非所有代码路径都返回值

> ID：11306454
> 
> 赞同：0
> 
> 时间：2012-07-03T07:37:10.247
> 
> 标签：c#, asp.net, linq-to-sql

我有这个`Linq To SQL`查询，它从`database`.The CustCategory 中获取客户类别。这里是查询。

```
public IList<string> GetAccountType()
        {
            using (var db = new DataClasses1DataContext())
            {
                var  acctype = db.mem_types.Select(account=>account.CustCategory).Distinct().ToList();
                if (acctype != null)
                {
                    return acctype;
                }
            }

        } 
```

目前我收到一个错误，`Not all code paths return a value.`如果我总是确定数据库中存在该值，那么我是否需要检查`null`，如果我需要检查，`null`那么我该如何处理。谁能帮我这个。欢迎任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T07:38:05.347

由于`Enumerable.ToList`永不返回`null`（请参阅[文档的](http://msdn.microsoft.com/en-us/library/bb342261.aspx)*返回值*部分），您可以安全地删除.`if`

编辑：请注意，无论您的数据库包含什么，`acctype`都*永远不会*为空：

*   如果在数据库中没有找到值，则返回值将是一个**空列表**（与 不同`null`）。
*   如果找到一条记录且其值为空，则返回值将是**一个有效列表**，其中包含一个值为空的条目。不过，列表本身*不是* `null`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T07:41:58.047

这与 LINQ to SQL 无关，该方法`GetAccountType()`必须返回`IList<string>`. 您应该`return acctype;`稍后使用返回并检查此返回列表[`Any()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any.aspx)，例如：

```
if(GetAccountType.Any()){
     //not empty
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T07:54:31.513

对于一个相当干净和可读的解决方案，这样的东西怎么样？：

（**注意，更新：**删除了对 null 的检查，因为它显然没有任何效果）。

```
public IList<string> GetAccountType()
{
        var acctype = new List<string>();
        using (var db = new DataClasses1DataContext())
        {
            acctype = db.mem_types.Select(
                         account=>account.CustCategory).Distinct().ToList();
        }

        return acctype;
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-03T07:38:04.827

如果出现以下情况会发生什么：

```
if (acctype != null) 
```

一片空白？你的方法应该是`return`什么？

你需要退货

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T10:40:11.927

您需要从函数中返回一个值：

```
 public IList<string> GetAccountType()
            {
                using (var db = new DataClasses1DataContext())
                {
                    var  acctype = db.mem_types.Select(account=>account.CustCategory).Distinct().ToList();
                    if (acctype != null)
                    {
                        return acctype;
                    }
                }
                return acctype;
            } 
```

# c# - 如何在asp.net mvc 3中绑定json动态模型？

> ID：11306458
> 
> 赞同：-1
> 
> 时间：2012-07-03T07:37:23.720
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

你好; 各种解决方案绑定数据webgrid静态模型。但我的数据是动态的。请不要说：你为什么使用DataTable？

**控制器：**

```
 [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Index(string submitButton, FormCollection fc)
        {
            ViewData["Customers"] = new SelectList(CustomerOperation.GetCustomers().Items, "Id", "Name", null);
            ViewData["Jobs"] = new SelectList(JobOperation.GetCustomersAssemblyList().Items, "scheduleId", "name", null);
            int Id = ConvertUtil.ToInt(fc["Customers"]);
            int scheduleId = ConvertUtil.ToInt(fc["Jobs"]);
            DataTable dt = JobOperation.GetJobsBySchedulerIdAndCustomerId(scheduleId, Id);
           return View(Json(dt,JsonRequestBehavior.AllowGet));
        } 
```

**看法：**

```
 <% 
     List<WebGridColumn> cols = new List<WebGridColumn>();
     WebGrid grid = null;
     if (Model != null)
     {
           grid = new WebGrid(source: Model.Data, rowsPerPage: 3);

         System.Reflection.PropertyInfo[] propertiesofColumn = new System.Reflection.PropertyInfo[] { };
         foreach (object column in Model)
         {
             propertiesofColumn = column.GetType().GetProperties();
         }

         foreach (System.Reflection.PropertyInfo propInfo in propertiesofColumn)
         {
             cols.Add(grid.Column(propInfo.Name, propInfo.Name));
         }

     }

   using (Html.BeginForm())
      { %> 
```

grid = new WebGrid(source: Model.Data **, rowsPerPage: 3);** .

错误：

RunTimeBinderException：最佳重载方法匹配 'System.Web.Helpers.WebGrid.WebGrid(System.Collections.Generic.IEnumerable, System.Collections.Generic.IEnumerable, string, int, bool, bool, string, string, string, string , string, string, string)' 有一些无效参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:23:05.760

> 请不要说：你为什么使用DataTable？

使用 DataTable 没有任何问题。DataTables 早在 .NET 时代就已经存在，完全可以理解的是，仍有大量现有代码依赖于它们。但这不是为什么那些 DataTables 应该跨越从控制器到视图的边界的原因。控制器应始终将视图模型传递给视图。所以让我们从定义这个视图模型开始，我们应该：

```
public class MyViewModel
{
    public int? SelectedCustomerId { get; set; }
    public IEnumerable<SelectListItem> Customers { get; set; }

    public int? SelectedJobId { get; set; }
    public IEnumerable<SelectListItem> Jobs { get; set; }

    public IEnumerable<string> Columns { get; set; }
    public IEnumerable<object> Values { get; set; }
} 
```

我们还将为请求定义一个视图模型，以避免您当前正在执行的丑陋解析：

```
public class RequestViewModel
{
    public string SubmitButton { get; set; }
    public int Customers { get; set; }
    public int Jobs { get; set; }
} 
```

现在，我们如何隐藏它`DataTable`？我们可以编写一个扩展方法，将其转换为动态对象：

```
public static class DataTableExtensions
{
    private sealed class Row : DynamicObject
    {
        private readonly DataRow _row;
        public Row(DataRow row) 
        { 
            _row = row; 
        }

        public override bool TryGetMember(GetMemberBinder binder, out object result)
        {
            var value = _row.Table.Columns.Contains(binder.Name);
            result = value ? _row[binder.Name] : null;
            return value;
        }
    }

    public static IEnumerable<dynamic> AsDynamicEnumerable(this DataTable table)
    {
        return table.AsEnumerable().Select(row => new Row(row));
    }
} 
```

到目前为止，一切都很好。难题的最后一个平静是在控制器动作中，我们将在其中创建我们的视图模型：

```
[HttpPost]
public ActionResult Index(RequestViewModel request)
{
    int id = request.Customers;
    int scheduleId = request.Jobs;
    DataTable dt = JobOperation.GetJobsBySchedulerIdAndCustomerId(scheduleId, id);

    // Now let's build the view model for the result:
    var model = new MyViewModel();
    model.Columns = dt.Columns.Cast<DataColumn>().Select(x => x.ColumnName);
    model.Values = dt.AsDynamicEnumerable();
    model.Customers = new SelectList(CustomerOperation.GetCustomers().Items, "Id", "Name");
    model.Jobs = new SelectList(JobOperation.GetCustomersAssemblyList().Items, "scheduleId", "name");

    return View(model);
} 
```

现在我们当然可以有一个强类型视图：

```
<%
    var grid = new WebGrid(Model.Values);
    var columns = Model.Columns.Select(x => grid.Column(x));
%>

<%= grid.GetHtml(columns: columns) %>

// and then we could have dropdowns and other stuff
<%= Html.DropDownListFor(x => x.SelectedCustomerId, Model.Customers, "-- customer --") %>
<%= Html.DropDownListFor(x => x.SelectedJobId, Model.Jobs, "-- job --") %> 
```

# iphone - 使 Klazuka/Kal 控制器日期无法选择？

> ID：11306459
> 
> 赞同：0
> 
> 时间：2012-07-03T07:37:26.303
> 
> 标签：iphone, calendar

我使用[Klazuka/Kal](https://github.com/klazuka/Kal)控制器来选择日期。是否可以在今天之前禁用日期？我也想用不同的颜色制作更早的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:56:56.680

更改所选日期的颜色

转到 --> KalTileView.h 文件

在 - (void)drawRect:(CGRect)rect 方法

```
 [[[UIImage imageNamed:@"Kal.bundle/kal_tile_today_selected.png"] stretchableImageWithLeftCapWidth:6 topCapHeight:0] drawInRect:CGRectMake(0, -1, kTileSize.width+1, kTileSize.height+1)];      // change your image name and put your mentioned image to Kal.bundle package
textColor = [UIColor whiteColor]; 
```

解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T10:17:01.283

转到***KalGridView.m***并用下面给出的代码替换**-(void)setSelectedTile:(KalTileView *)tile**。

```
- (void)setSelectedTile:(KalTileView *)tile
{
    if (selectedTile != tile && [[KalDate dateFromNSDate:[NSDate date]] compare:tile.date] != NSOrderedDescending)
    {
        selectedTile.selected = 否；
        selectedTile = [瓷砖保留];
        tile.selected = YES；
        [委托didSelectDate:tile.date];
    }
}

```

现在所有在当前日期之前的日期都将被禁用。

# javascript - 如何在 WebGL 中的立方体上使用多个纹理？

> ID：11306460
> 
> 赞同：-1
> 
> 时间：2012-07-03T07:37:29.513
> 
> 标签：javascript, opengl-es, textures, webgl

这是我的源代码。它仍然不起作用。我想在一个立方体的 6 个面上放 6 张不同的图片，这是动画的。请帮忙 ：）

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<title>WebGL</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

<script type="text/javascript" src="glMatrix-0.9.5.min.js"></script>

<script type="text/javascript" src="webgl-utils.js"></script>

<script id="shader-fs" type="x-shader/x-fragment">
precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void) {
    gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
}
</script>

<script id="shader-vs" type="x-shader/x-vertex">
attribute vec3 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

varying vec2 vTextureCoord;

void main(void) {
    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
    vTextureCoord = aTextureCoord;
}
</script>

<script type="text/javascript">

var gl;

function initGL(canvas) {
    try {
        gl = canvas.getContext("experimental-webgl");
        gl.viewportWidth = canvas.width;
        gl.viewportHeight = canvas.height;
    } catch (e) {
    }
    if (!gl) {
        alert("Could not initialise WebGL, sorry :-(");
    }
}

function getShader(gl, id) {
    var shaderScript = document.getElementById(id);
    if (!shaderScript) {
        return null;
    }

    var str = "";
    var k = shaderScript.firstChild;
    while (k) {
        if (k.nodeType == 3) {
            str += k.textContent;
        }
        k = k.nextSibling;
    }

    var shader;
    if (shaderScript.type == "x-shader/x-fragment") {
        shader = gl.createShader(gl.FRAGMENT_SHADER);
    } else if (shaderScript.type == "x-shader/x-vertex") {
        shader = gl.createShader(gl.VERTEX_SHADER);
    } else {
        return null;
    }

    gl.shaderSource(shader, str);
    gl.compileShader(shader);

    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        alert(gl.getShaderInfoLog(shader));
        return null;
    }

    return shader;
}

var shaderProgram;

function initShaders() {
    var fragmentShader = getShader(gl, "shader-fs");
    var vertexShader = getShader(gl, "shader-vs");

    shaderProgram = gl.createProgram();
    gl.attachShader(shaderProgram, vertexShader);
    gl.attachShader(shaderProgram, fragmentShader);
    gl.linkProgram(shaderProgram);

    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
        alert("Could not initialise shaders");
    }

    gl.useProgram(shaderProgram);

    shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
    gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);

    shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");
    gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);

    shaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, "uPMatrix");
    shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, "uMVMatrix");
    shaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, "uSampler");
}

var texturen = new Array();
function initTexture(sFilename,texturen)  
{
  var anz = texturen.length;
  texturen[anz] = gl.createTexture();
  texturen[anz].image = new Image();
  texturen[anz].image.onload = function()    
  {
  gl.bindTexture(gl.TEXTURE_2D, texturen[anz]);
  gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);
  gl.texImage2D
  (gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texturen[anz].image);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
  gl.bindTexture(gl.TEXTURE_2D, null);
  }
  texturen[anz].image.src = sFilename;
} 

var mvMatrix = mat4.create();
var mvMatrixStack = [];
var pMatrix = mat4.create();

function mvPushMatrix() {
    var copy = mat4.create();
    mat4.set(mvMatrix, copy);
    mvMatrixStack.push(copy);
}

function mvPopMatrix() {
    if (mvMatrixStack.length == 0) {
        throw "Invalid popMatrix!";
    }
    mvMatrix = mvMatrixStack.pop();
}

function setMatrixUniforms() {
    gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, pMatrix);
    gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mvMatrix);
}

function degToRad(degrees) {
    return degrees * Math.PI / 180;
}

function initBuffers() {
    var vertBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
    var vertices = [
        // Front face
        -1.0, -1.0,  1.0,
         1.0, -1.0,  1.0,
         1.0,  1.0,  1.0,
        -1.0,  1.0,  1.0,

        // Back face
        -1.0, -1.0, -1.0,
        -1.0,  1.0, -1.0,
         1.0,  1.0, -1.0,
         1.0, -1.0, -1.0,

        // Top face
        -1.0,  1.0, -1.0,
        -1.0,  1.0,  1.0,
         1.0,  1.0,  1.0,
         1.0,  1.0, -1.0,

       // Bottom face
        -1.0, -1.0, -1.0,
         1.0, -1.0, -1.0,
         1.0, -1.0,  1.0,
        -1.0, -1.0,  1.0,

        // Right face
         1.0, -1.0, -1.0,
         1.0,  1.0, -1.0,
         1.0,  1.0,  1.0,
         1.0, -1.0,  1.0,

        // Left face
        -1.0, -1.0, -1.0,
        -1.0, -1.0,  1.0,
        -1.0,  1.0,  1.0,
        -1.0,  1.0, -1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
    vertBuffer.itemSize = 3;
    vertBuffer.numItems = 24;

    CoordBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER,CoordBuffer);
    var textureCoords = [
      // Front face
      0.0, 0.0,
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,

      // Back face
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,
      0.0, 0.0,

      // Top face
      0.0, 1.0,
      0.0, 0.0,
      1.0, 0.0,
      1.0, 1.0,

   // Bottom face
      1.0, 1.0,
      0.0, 1.0,
      0.0, 0.0,
      1.0, 0.0,

      // Right face
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,
      0.0, 0.0,

      // Left face
      0.0, 0.0,
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
    CoordBuffer.itemSize = 2;
    CoordBuffer.numItems = 24;

var IndexBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, IndexBuffer);
    var Indices = [
        0, 1, 2,      0, 2, 3,    // Front face
        4, 5, 6,      4, 6, 7,    // Back face
        8, 9, 10,     8, 10, 11,  // Top face
        12, 13, 14,   12, 14, 15, // Bottom face
        16, 17, 18,   16, 18, 19, // Right face
        20, 21, 22,   20, 22, 23  // Left face
    ];
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(Indices), gl.STATIC_DRAW);
    IndexBuffer.itemSize = 1;
    IndexBuffer.numItems = 36;

}

var xRot = 0;
var yRot = 0;
var zRot = 0;

function drawScene() {
    gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    mat4.perspective(45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0, pMatrix);

    mat4.identity(mvMatrix);

    mat4.translate(mvMatrix, [0.0, 0.0, -5.0]);

    mat4.rotate(mvMatrix, degToRad(xRot), [1, 0, 0]);
    mat4.rotate(mvMatrix, degToRad(yRot), [0, 1, 0]);
    mat4.rotate(mvMatrix, degToRad(zRot), [0, 0, 0]);
    setMatrixUniforms();

gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, IndexBuffer);
gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,vertBuffer.itemSize, 
  gl.FLOAT, false, 0, 0);

// Draw face 0
gl.bindTexture(gl.TEXTURE_2D, texturen[0]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);

// Draw face 1
gl.bindTexture(gl.TEXTURE_2D, texturen[1]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 12);

// Draw face 2
gl.bindTexture(gl.TEXTURE_2D, texturen[2]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 24);

// Draw face 3
gl.bindTexture(gl.TEXTURE_2D, texturen[3]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 36);

// Draw face 4
gl.bindTexture(gl.TEXTURE_2D, texturen[4]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 48);

// Draw face 5
gl.bindTexture(gl.TEXTURE_2D, texturen[5]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 60);
}

var lastTime = 0;

function animate() {
    var timeNow = new Date().getTime();
    if (lastTime != 0) {
        var elapsed = timeNow - lastTime;

        xRot += (90 * elapsed) / 1000.0;
        yRot += (90 * elapsed) / 1000.0;
        zRot += (90 * elapsed) / 1000.0;
    }
    lastTime = timeNow;
}

function tick() {
    requestAnimFrame(tick);
    drawScene();
    animate();
}

function webGLStart() {
    var canvas = document.getElementById("lesson05-canvas");
    initGL(canvas);
    initShaders();
    initBuffers();
    initTexture("Logo.png",texturen);
    initTexture("le.png",texturen);
initTexture("Logo.png",texturen);
    initTexture("le.png",texturen);
initTexture("Logo.png",texturen);
    initTexture("le.png",texturen);

gl.clearColor(0.0, 0.0, 0.0, 1.0);
    gl.enable(gl.DEPTH_TEST);

    tick();
}

</script>

</head>
<body onload="webGLStart();">
<canvas id="lesson05-canvas" style="border: none;" width="500" height="500">    </canvas>    <canvas id="lesson05-canvas" style="border: none;" width="500" height="500">    </canvas>
</body></html> 
```

我希望这些只是两张不同的图片这一事实并不重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T17:02:38.063

您甚至尝试过调试吗？您在上面粘贴的代码无法运行并出现 JavaScript 错误。在 Chrome 中打开 JavaScript 控制台（扳手->工具->JavaScript 控制台）。在 Firefox 中（Firefox->Web 开发人员->Web 控制台）

错误的事情

*   使用了很多全局变量，但实际上并不是全局变量。

    在中声明`vertBuffer`and`IndexBuffer`和`CoordBuffer`作为局部变量， `initBuffers`但随后在`drawScene`.

这使它至少不会出现 JavaScript 错误。

*   没有设置纹理坐标。

    该代码创建了一个 CoordBuffer，但从未在属性中使用它。这导致了 GL 错误（Chrome 中的“属性设置不正确”）

修复此问题使其不再出现 GL 错误。那时我将背景颜色设置为绿色，我看到一个旋转的黑色立方体，这表明下一个问题是纹理。

*   未设置纹理以处理无 mips 和非 2 次幂纹理。

    如果您的纹理在每个维度中不是 2 的幂，则需要将纹理环绕设置为钳位。

    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE); gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

这是一个使用随机彩色画布而不是图像的工作版本。

```
var gl;

function initGL(canvas) {
    try {
        gl = canvas.getContext("experimental-webgl");
        gl.viewportWidth = canvas.width;
        gl.viewportHeight = canvas.height;
    } catch (e) {
    }
    if (!gl) {
        alert("Could not initialise WebGL, sorry :-(");
    }
}

function getShader(gl, id) {
    var shaderScript = document.getElementById(id);
    if (!shaderScript) {
        return null;
    }

    str = shaderScript.text;

    var shader;
    if (shaderScript.type == "x-shader/x-fragment") {
        shader = gl.createShader(gl.FRAGMENT_SHADER);
    } else if (shaderScript.type == "x-shader/x-vertex") {
        shader = gl.createShader(gl.VERTEX_SHADER);
    } else {
        return null;
    }

    gl.shaderSource(shader, str);
    gl.compileShader(shader);

    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        alert(gl.getShaderInfoLog(shader));
        return null;
    }

    return shader;
}

var shaderProgram;

function initShaders() {
    var fragmentShader = getShader(gl, "shader-fs");
    var vertexShader = getShader(gl, "shader-vs");

    shaderProgram = gl.createProgram();
    gl.attachShader(shaderProgram, vertexShader);
    gl.attachShader(shaderProgram, fragmentShader);
    gl.linkProgram(shaderProgram);

    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
        alert("Could not initialise shaders");
    }

    gl.useProgram(shaderProgram);

    // This is a bad code.
    // If the context is lsot shaderProgram will be null
    // and trying to assign a vertexPositionAttribute to null
    // will throw an exception.
    // better would be 
    // shaderProgram = {};
    // shaderProgram.program = gl.createProgram();
    // shaderProgram.vertexPositionAtrribute = ...
    shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
    gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);

    shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");
    gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);

    shaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, "uPMatrix");
    shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, "uMVMatrix");
    shaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, "uSampler");
}

var texturen = new Array();
function initTexture(sFilename,texturen)  
{
  var anz = texturen.length;
  texturen[anz] = gl.createTexture();
  // this is a bad code. on context lost gl.createTexture() will return null and
  // an exception will be thrown when you try to attach .image to null
  // Better would be
  // texturen[anz] = {};
  // texturen[anz].texture = gl.createTexture();
  // texturen[anz].image = new Image();
  texturen[anz].image = new Image();
  texturen[anz].image.onload = function() 
  {
    gl.bindTexture(gl.TEXTURE_2D, texturen[anz]);
    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);
    //gl.texImage2D  (gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texturen[anz].image);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    gl.bindTexture(gl.TEXTURE_2D, null);
  }
  //texturen[anz].image.src = sFilename;
  // Since I can't load cross domain I'll use a canvas to make textures
  function rnd() { return Math.floor(Math.random() * 256); }
  var c = document.createElement("canvas");
  c.width = 64;
  c.height = 64;
  var ctx = c.getContext("2d");
  ctx.fillStyle = "rgb(" + rnd() + "," + rnd() + "," + rnd() + ")";
  ctx.fillRect(0, 0, 64, 64);
  ctx.fillStyle = "rgb(" + rnd() + "," + rnd() + "," + rnd() + ")";
  ctx.beginPath();
  ctx.arc(32, 32, 30, 0, Math.PI * 2, false);
  ctx.fill();
  gl.bindTexture(gl.TEXTURE_2D, texturen[anz]);
  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, c);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
} 

var mvMatrix = mat4.create();
var mvMatrixStack = [];
var pMatrix = mat4.create();

function mvPushMatrix() {
    var copy = mat4.create();
    mat4.copy(copy, mvMatrix);
    mvMatrixStack.push(copy);
}

function mvPopMatrix() {
    if (mvMatrixStack.length == 0) {
        throw "Invalid popMatrix!";
    }
    mvMatrix = mvMatrixStack.pop();
}

function setMatrixUniforms() {
    gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, pMatrix);
    gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mvMatrix);
}

function degToRad(degrees) {
    return degrees * Math.PI / 180;
}

function initBuffers() {
    vertBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
    var vertices = [
        // Front face
        -1.0, -1.0,  1.0,
         1.0, -1.0,  1.0,
         1.0,  1.0,  1.0,
        -1.0,  1.0,  1.0,

        // Back face
        -1.0, -1.0, -1.0,
        -1.0,  1.0, -1.0,
         1.0,  1.0, -1.0,
         1.0, -1.0, -1.0,

        // Top face
        -1.0,  1.0, -1.0,
        -1.0,  1.0,  1.0,
         1.0,  1.0,  1.0,
         1.0,  1.0, -1.0,

       // Bottom face
        -1.0, -1.0, -1.0,
         1.0, -1.0, -1.0,
         1.0, -1.0,  1.0,
        -1.0, -1.0,  1.0,

        // Right face
         1.0, -1.0, -1.0,
         1.0,  1.0, -1.0,
         1.0,  1.0,  1.0,
         1.0, -1.0,  1.0,

        // Left face
        -1.0, -1.0, -1.0,
        -1.0, -1.0,  1.0,
        -1.0,  1.0,  1.0,
        -1.0,  1.0, -1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

    // This is bad code. See the above examples of bad code.
    // vertBuffer will be null on context lost and this code
    // will throw an exception.
    vertBuffer.itemSize = 3;
    vertBuffer.numItems = 24;

    CoordBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER,CoordBuffer);
    var textureCoords = [
      // Front face
      0.0, 0.0,
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,

      // Back face
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,
      0.0, 0.0,

      // Top face
      0.0, 1.0,
      0.0, 0.0,
      1.0, 0.0,
      1.0, 1.0,

   // Bottom face
      1.0, 1.0,
      0.0, 1.0,
      0.0, 0.0,
      1.0, 0.0,

      // Right face
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,
      0.0, 0.0,

      // Left face
      0.0, 0.0,
      1.0, 0.0,
      1.0, 1.0,
      0.0, 1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
    CoordBuffer.itemSize = 2;
    CoordBuffer.numItems = 24;

    IndexBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, IndexBuffer);
    var Indices = [
        0, 1, 2,      0, 2, 3,    // Front face
        4, 5, 6,      4, 6, 7,    // Back face
        8, 9, 10,     8, 10, 11,  // Top face
        12, 13, 14,   12, 14, 15, // Bottom face
        16, 17, 18,   16, 18, 19, // Right face
        20, 21, 22,   20, 22, 23  // Left face
    ];
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(Indices), gl.STATIC_DRAW);
    IndexBuffer.itemSize = 1;
    IndexBuffer.numItems = 36;
}

var xRot = 0;
var yRot = 0;
var zRot = 0;

function drawScene() {
    gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    mat4.perspective(pMatrix, 45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0);

    mat4.identity(mvMatrix);

    mat4.translate(mvMatrix, mvMatrix, [0.0, 0.0, -5.0]);

    mat4.rotate(mvMatrix, mvMatrix, degToRad(xRot), [1, 0, 0]);
    mat4.rotate(mvMatrix, mvMatrix, degToRad(yRot), [0, 1, 0]);
    mat4.rotate(mvMatrix, mvMatrix, degToRad(zRot), [0, 0, 0]);
    setMatrixUniforms();

    gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
    gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,vertBuffer.itemSize, 
       gl.FLOAT, false, 0, 0);
    gl.bindBuffer(gl.ARRAY_BUFFER, CoordBuffer);
    gl.vertexAttribPointer(shaderProgram.textureCoordAttribute,CoordBuffer.itemSize, 
       gl.FLOAT, false, 0, 0);
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, IndexBuffer);

// Draw face 0
gl.bindTexture(gl.TEXTURE_2D, texturen[0]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);

// Draw face 1
gl.bindTexture(gl.TEXTURE_2D, texturen[1]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 12);

// Draw face 2
gl.bindTexture(gl.TEXTURE_2D, texturen[2]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 24);

// Draw face 3
gl.bindTexture(gl.TEXTURE_2D, texturen[3]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 36);

// Draw face 4
gl.bindTexture(gl.TEXTURE_2D, texturen[4]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 48);

// Draw face 5
gl.bindTexture(gl.TEXTURE_2D, texturen[5]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 60);
}

var lastTime = 0;

function animate() {
    var timeNow = new Date().getTime();
    if (lastTime != 0) {
        var elapsed = timeNow - lastTime;

        xRot += (90 * elapsed) / 1000.0;
        yRot += (90 * elapsed) / 1000.0;
        zRot += (90 * elapsed) / 1000.0;
    }
    lastTime = timeNow;
}

function tick() {
    requestAnimationFrame(tick);
    drawScene();
    animate();
}

function webGLStart() {
    var canvas = document.getElementById("lesson05-canvas");
    initGL(canvas);
    initShaders();
    initBuffers();
    initTexture("Logo.png",texturen);
    initTexture("le.png",texturen);
    initTexture("Logo.png",texturen);
    initTexture("le.png",texturen);
    initTexture("Logo.png",texturen);
    initTexture("le.png",texturen);

    gl.clearColor(0.0, 1.0, 0.0, 1.0);
    gl.enable(gl.DEPTH_TEST);
    tick();
}

webGLStart();
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.3.2/gl-matrix-min.js"></script>

<script id="shader-fs" type="x-shader/x-fragment">
precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void) {
    gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
}
</script>

<script id="shader-vs" type="x-shader/x-vertex">
attribute vec3 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

varying vec2 vTextureCoord;

void main(void) {
    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
    vTextureCoord = aTextureCoord;
}
</script>

<canvas id="lesson05-canvas" style="border: none;" width="500" height="500">    </canvas>
```

其他问题：代码中有几个地方将属性分配给 WebGL 对象。例子

```
shaderProgram = gl.createProgram();
shaderProgram.textureCoordAttribute = 
    gl.getAttribLocation(shaderProgram, "aTextureCoord"); 
```

...

```
texturen[anz] = gl.createTexture();
texturen[anz].image = new Image();
texturen[anz].image.onload = function() 
```

...

```
vertBuffer = gl.createBuffer();
vertBuffer.itemSize = 3; 
```

如果您决定处理上下文丢失事件，则所有这些都必须重构，因为`gl.create???`函数将返回 null 并且将属性附加到 null 将导致异常。

最好做更多这样的事情

```
shaderProgram = {};
shaderProgram.program = gl.createProgram();
shaderProgram.textureCoordAttribute = 
    gl.getAttribLocation(shaderProgram, "aTextureCoord"); 
```

...

```
texturen[anz] = {};
texturen[anz].texture = gl.createTexture();
texturen[anz].image = new Image();
texturen[anz].image.onload = function() 
```

...

```
vertBuffer = {};
vertBuffer.buffer = gl.createBuffer();
vertBuffer.itemSize = 3; 
```

# jquery - 如何在 jquery 中使用 for 循环

> ID：11306461
> 
> 赞同：-1
> 
> 时间：2012-07-03T07:37:31.470
> 
> 标签：jquery, asp.net-mvc

如何在 jquery 中使用 for 循环在 MVC4 应用程序的隐藏输入字段中编辑和存储多个编辑值

这是我的jQuery

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('p').click(function () {
            var textbox = $('<input id="Text1" type="text"  name="Name" />')
            var oldText = $(this).text();
            $(this).replaceWith(textbox);
            textbox.blur(function () {
                var newValue = $(this).val();
                var listItems = $('.listItem');
                listItems.each(function () {
                    $(this).replaceWith(
                    $('<p/>', { text: newValue })
                    .after(
                       $('<input />', { type: 'hidden', name: 'Name', value: newValue })
                    )
                );
                });
                });

              textbox.val(oldText);
        });
    });  

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:31:50.800

假设您有一个模型：

```
public class User
{
    public string Name { get; set; }
    public string Address { get; set; }
} 
```

然后是控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var user = new User
        {
            Name = "test1",
            Address = "add1"
        };
        return View(user);
    }

    [HttpPost]
    public ActionResult Index(User user)
    {
        return Content(
            string.Format(
                "name: {0}, address: {1}", 
                user.Name, 
                user.Address
            )
        );
    }
} 
```

和一个观点：

```
@model User

@using (Html.BeginForm())
{
    <ul class="editor">
        <li>
            @Html.LabelFor(x => x.Name, Model.Name)
            @Html.EditorFor(x => x.Name)
        </li>
        <li>
            @Html.LabelFor(x => x.Address, Model.Address)
            @Html.EditorFor(x => x.Address)
        </li>
    </ul>

    <button type="submit">OK</button>
} 
```

现在您可以使用以下 javascript：

```
$(function () {
    $('.editor input').blur(function () {
        $(this).hide();
        $(this).closest('li').find('label').html($(this).val()).show();
    });

    $('.editor label').click(function () {
        $(this).hide();
        $(this).closest('li').find('input').show();
    });
}); 
```

最后，为了最初隐藏输入字段，您可以定义`.editor`我应用于`<ul>`元素的 CSS 规则：

```
.editor input {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:45:31.103

如果要在 jquery 中循环任何集合，请使用`each()`. 为什么`for`？

```
 $.each(collectionarray, function( index, value ) {
 // your code
 }); 
```

# gitweb - 如何在 Solaris 上安装 gitweb？

> ID：11306463
> 
> 赞同：1
> 
> 时间：2012-07-03T07:37:38.110
> 
> 标签：gitweb

朋友们，

我从 sunfreeware.com 下载了 git 及其依赖包。Git安装成功并且可以正常工作。我正在尝试通过网络进行配置。但是当我通过 sunfreeware 软件包安装时，似乎没有安装 gitweb。

或者我从 git clone [http://www.kernel.org/pub/scm/git/git.git下载了 git 源](http://www.kernel.org/pub/scm/git/git.git)

但是当我尝试编译得到错误消息时。我怀疑编译是否需要任何依赖软件。

错误：

root@shark /tmp/git #make make：阅读器中出现致命错误：Makefile，第 308 行：看到意外的行尾

Makefile 中的实际行：

```
GIT-VERSION-FILE: FORCE
    @$(SHELL_PATH) ./GIT-VERSION-GEN
-include GIT-VERSION-FILE

uname_S := $(shell sh -c 'uname -s 2>/dev/null || echo not')
uname_M := $(shell sh -c 'uname -m 2>/dev/null || echo not')
uname_O := $(shell sh -c 'uname -o 2>/dev/null || echo not')
uname_R := $(shell sh -c 'uname -r 2>/dev/null || echo not')
uname_P := $(shell sh -c 'uname -p 2>/dev/null || echo not')
uname_V := $(shell sh -c 'uname -v 2>/dev/null || echo not') 
```

请帮我安装 gitweb 或 source install

谢谢巴拉

# xslt - XSL 计数器循环转换

> ID：11306467
> 
> 赞同：1
> 
> 时间：2012-07-03T07:37:53.157
> 
> 标签：xslt

我想写一个 xsl 转换，但被困在“柜台”部分。这基本上是我想要做的：

输入文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<root>
  <Pallets>
    <Pallet>
       <Line>
         <Product>test</Product>
       </Line>
       <Line>
         <Product>test2</Product>
       </Line>
    </Pallet>
    <Pallet>
      <Line>
        <Product>test_1</Product>
      </Line>
      <Line>
        <Product>test_2</Product>
      </Line>
     </Pallet>
   </Pallets>
</root> 
```

这就是我想要的输出：

```
<?xml version="1.0" encoding="utf-8"?>
<Result>
  <Pallet>
    <ID>2</ID> ==> This is a counter that increments starting from 2
    <ID2>1</ID2> ==> Always "1"
    <Line>
      <ID>3</ID> ==> The counter from above that increments
      <ParentID>2</ParentID> ==> PalletID (ID from above the loop)
      <Name>test</Name>
    </Line>
    <Line>
      <ID>4</ID> ==> The counter from above that increments
      <ParentID>2</ParentID> ==> PalletID
      <Name>test2</Name>
    </Line>
  </Pallet>
  <Pallet>
    <ID>5</ID>  ==> The counter from above that increments
    <ID2>1</ID2> ==> Always "1"
    <Line>
      <ID>6</ID> ==> The counter from above that increments
      <ParentID>5</ParentID> ==> PalletID
      <Name>test_1</Name>
    </Line>
    <Line>
      <ID>7</ID> ==> The counter from above that increments
      <ParentID>5</ParentID> ==> PalletID
      <Name>test_2</Name>
    </Line>
  </Pallet>
</Result> 
```

谁能帮我这个？这是我目前所拥有的，但正如您将看到的，palletId 的计数器不正确。第二个 PalletID 的 ID = 5 而不是 3：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
    <Result>
      <xsl:for-each select="root/Pallets/Pallet">
        <xsl:variable name="counter" select="1" />
        <Pallet>
          <xsl:variable name="Parentcounter" select="position() + $counter" />
          <ID>
            <xsl:value-of select="$Parentcounter"/>
          </ID>
          <ID2>1</ID2>
          <xsl:for-each select="Line">
            <Line>
              <ID>
                <xsl:value-of select="$Parentcounter + position()"/>
              </ID>
              <ParentID>
                <xsl:value-of select="$Parentcounter"/>
              </ParentID>
              <Name>
                <xsl:value-of select="Product"/>
              </Name>
            </Line>
          </xsl:for-each>
        </Pallet>
      </xsl:for-each>
    </Result>
  </xsl:template>
</xsl:stylesheet> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:26:24.280

您可以通过简单地计算前面的**Pallet**和**Line**元素的数量来获取**Pallet**元素的**ID**

 ******```
<xsl:variable name="id" select="count(preceding::Pallet|preceding::Line) + 2" />
<ID><xsl:value-of select="$id" /></ID> 
```

**如果您在匹配Line**元素的模板中将此作为参数传递，则**Line元素的****ID**如下（其中 $parentID 包含父元素的 id）

 **```
<ID><xsl:value-of select="$ParentID + count(preceding-sibling::Line) + 1" /></ID> 
```

因此，以下 XSLT 应该会产生所需的输出

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="Pallets">
      <Result>
         <xsl:apply-templates select="Pallet" />
      </Result>
   </xsl:template>

   <xsl:template match="Pallet">
      <xsl:variable name="id" select="count(preceding::Pallet|preceding::Line) + 2" />
      <Pallet>
         <ID><xsl:value-of select="$id" /></ID>
         <ID2>1</ID2>
         <xsl:apply-templates select="Line">
            <xsl:with-param name="ParentID" select="$id" />
         </xsl:apply-templates>
      </Pallet>
   </xsl:template>

   <xsl:template match="Line">
      <xsl:param name="ParentID" />
      <Line>
         <ID><xsl:value-of select="$ParentID + count(preceding-sibling::Line) + 1" /></ID>
         <ParentID><xsl:value-of select="$ParentID" /></ParentID>
         <Name><xsl:value-of select="Product" /></Name>
      </Line>
   </xsl:template>
</xsl:stylesheet> 
```

然而，这对于更多数量的托盘和项目来说并不一定那么有效，因为它必须重复计算更多数量的前面元素（基本上一遍又一遍地计算相同的东西）。另一种方法是使用递归模板，每次将托盘 ID 的运行总和作为参数传递。也试试这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:template match="Pallets">
      <Result>
         <xsl:apply-templates select="Pallet[1]"/>
      </Result>
   </xsl:template>

   <xsl:template match="Pallet">
      <xsl:param name="id" select="2"/>
      <Pallet>
         <ID>
            <xsl:value-of select="$id"/>
         </ID>
         <ID2>1</ID2>
         <xsl:apply-templates select="Line[1]">
            <xsl:with-param name="parentID" select="$id"/>
         </xsl:apply-templates>
      </Pallet>
      <xsl:apply-templates select="following-sibling::Pallet[1]">
         <xsl:with-param name="id" select="$id + count(Line) + 1"/>
      </xsl:apply-templates>
   </xsl:template>

   <xsl:template match="Line">
      <xsl:param name="parentID"/>
      <xsl:param name="id" select="$parentID + 1"/>
      <Line>
         <ID>
            <xsl:value-of select="$id"/>
         </ID>
         <ParentID>
            <xsl:value-of select="$parentID"/>
         </ParentID>
         <Name>
            <xsl:value-of select="Product" />
         </Name>
      </Line>

      <xsl:apply-templates select="following-sibling::Line[1]">
         <xsl:with-param name="parentID" select="$parentID"/>
         <xsl:with-param name="id" select="$id + 1"/>
      </xsl:apply-templates>
   </xsl:template>
</xsl:stylesheet> 
```

这也会产生相同的输出

```
<Result>
   <Pallet>
      <ID>2</ID>
      <ID2>1</ID2>
      <Line>
         <ID>3</ID>
         <ParentID>2</ParentID>
         <Name>test</Name>
      </Line>
      <Line>
         <ID>4</ID>
         <ParentID>2</ParentID>
         <Name>test2</Name>
      </Line>
   </Pallet>
   <Pallet>
      <ID>5</ID>
      <ID2>1</ID2>
      <Line>
         <ID>6</ID>
         <ParentID>5</ParentID>
         <Name>test_1</Name>
      </Line>
      <Line>
         <ID>7</ID>
         <ParentID>5</ParentID>
         <Name>test_2</Name>
      </Line>
   </Pallet>
</Result> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:03:03.843

采用

```
<xsl:number level="any" count="Pallet|Line"/> 
```

因为你是从 2 开始的，所以你必须把它放在一个变量中并添加一个。********

# mysql - 即使安装正常，也找不到 MySQL UDF

> ID：11306473
> 
> 赞同：0
> 
> 时间：2012-07-03T07:38:07.040
> 
> 标签：mysql, user-defined-functions

我在 Windows 上创建了一个非常简单的 UDF，用于导出函数`set_named_event`，我可以检查 DLL 以查看导出的符号（_init + _deinit 也是），并且我这样做了（使用 MySQL Server 5.5 社区版）：

```
USE `test`;
DROP FUNCTION set_named_event;
CREATE FUNCTION set_named_event RETURNS INTEGER SONAME "udf_set_named_event.dll"; 
```

这没有给我任何错误，但是当我这样做时：

```
SELECT set_named_event('eventName'); 
```

我得到了臭名昭著的：

```
Query: SELECT set_named_event('eventName')

Error Code: 1305
FUNCTION test.set_named_event does not exist

Execution Time : 0 sec
Transfer Time  : 0 sec
Total Time     : 0.003 sec 
```

想法？？会不会是服务器的 CE 不支持 UDF？

# java - 本地文件或文件夹的属性窗口？

> ID：11306474
> 
> 赞同：2
> 
> 时间：2012-07-03T07:38:07.157
> 
> 标签：java, swing, file, properties

java中有什么方法可以在我的Java Swing程序中看到本地文件的属性窗口吗？

![在此处输入图像描述](../Images/dd4b6ee28cd7565a0749f9576806cda5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:34:10.400

没有用于打开该对话框的标准 Swing API，但您仍然可以使用[JNA](https://github.com/twall/jna/blob/master/www/GettingStarted.md)在 Java 中执行此操作，它允许您仅使用 Java 代码访问本机共享库。

[@Guillaume Polet 发布了一个指向Python implementation](https://stackoverflow.com/questions/1936682/how-do-i-display-a-files-properties-dialog-from-c)的类似问题的链接。您必须获取该代码并将其转换为 Java。或者，这是一个[C# 示例](https://stackoverflow.com/questions/1936682/how-do-i-display-a-files-properties-dialog-from-c)。

借助 JNA 教程和这些示例，您应该能够编写 Java 实现。

# jquery - postJson 不返回值

> ID：11306475
> 
> 赞同：0
> 
> 时间：2012-07-03T07:38:27.010
> 
> 标签：jquery, json

我有两个功能，第二个应该只对第一个的成功起作用。第一个函数进行 postJson 调用，因此我只想在第一个函数成功的情况下编写第二个函数？我尝试了以下代码，但变量返回未定义。

```
 var serviceCall = $.postJSON('iwantdata.htm', {wowData:wowData, value:value}, function (data) {
    }
    serviceCall.success(function(){
    createForm();
    }); 
```

我对此 serviceCall 变量未定义。postJson 调用是否有问题，或者我需要改变我的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:42:59.917

`$.postJSON()`在扩展 jQuery 之前没有任何方法。

它应该是：

```
$.post('iwantdata.htm', {wowData:wowData, value:value}, function(data) {
    //...
}, 'json'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:46:43.050

也许这样的东西更具可读性：

```
$.post('iwantdata.htm', {wowData:wowData, value:value}, function (data) {        
    createForm();
}, 'JSON'); 
```

# pdfsharp - 如何在将pdf转换为jpeg时保存pdf的质量

> ID：11306480
> 
> 赞同：-1
> 
> 时间：2012-07-03T07:38:56.347
> 
> 标签：pdfsharp

我使用此功能将 pdf 转换为 jpeg。但是质量不如原始pdf那么好。

```
var paths = new List<string>(gs.PdfToJpgFiles(filename, 1, pageCount, 200)); 
```

如何获得最大的最佳质量，同时不增加转换时间（显着）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:15:39.253

第四个参数（代码片段中的 200）指定为 PDF 页面创建的图像的分辨率。我不确定 200 是否意味着 200 dpi（甚至可能意味着 100 dpi）。

更高的 dpi 值会导致更大的文件，并且可能执行更慢 - 但我认为如果您使用合理的 dpi 值（我建议 300 dpi 或更低 - 我认为将 600 用作第四个），时间不会显着增加范围）。

另一件事是JPEG质量。如果您看到太多 JPEG 伪影，请尝试改用 PNG。

PDF 是一种矢量格式 - 即使在 6400 % 的缩放级别下，文本看起来也很清晰。任何光栅图像（JPEG 或 PNG）都不会得到这个。

# java - ScheduledThreadPoolExecutor 迟到了

> ID：11306485
> 
> 赞同：7
> 
> 时间：2012-07-03T07:39:22.540
> 
> 标签：java, scheduling

我有这个简单的代码片段：

```
/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    ScheduledThreadPoolExecutor exec = new ScheduledThreadPoolExecutor(10);

    Runnable r = new Runnable() {

        @Override
        public void run() {
            System.err.println(Calendar.getInstance().getTime());
        }
    }; 

    exec.scheduleAtFixedRate(r,0, 500, TimeUnit.MILLISECONDS);
} 
```

在一台机器上，此代码按预期运行。控制台输出：

*   2012 年 7 月 3 日星期二 10:32:34 EEST
*   2012 年 7 月 3 日星期二 10:32:34 EEST
*   2012 年 7 月 3 日星期二 10:32:35 EEST
*   2012 年 7 月 3 日星期二 10:32:35 EEST
*   2012 年 7 月 3 日星期二 10:32:36 EEST
*   2012 年 7 月 3 日星期二 10:32:36 EEST ...

但是在另一台机器上，控制台上的时间戳显示 ScheduledThreadPoolExecutor 迟到了。迟到是指几秒钟 :)

*   2012 年 7 月 3 日星期二 10:32:34 EEST
*   2012 年 7 月 3 日星期二 10:32:37 EEST
*   2012 年 7 月 3 日星期二 10:32:40 EEST
*   2012 年 7 月 3 日星期二 10:32:44 EEST
*   2012 年 7 月 3 日星期二 10:32:50 EEST
*   2012 年 7 月 3 日星期二 10:32:55 EEST ...

代码成功运行的第一台机器的详细信息：

i3 Windows 7 64 位 JRE 1.6.0.30

调度运行延迟的第二台机器的详细信息：

双核 Windows XP 32 位 JRE 1.6.0.18

我想知道为什么会有这样的差异。有什么建议么 ？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:41:37.387

实际上调度计时器并不准确，它通过cpu ticks计算时间。所以如果你的机器负载太重，可能会有一些延迟。检查第二台机器的负载！

# c++-cli - 可以为 .Net Monitor::Enter/Exit 实现 RAII（在 C++ CLI 中）

> ID：11306486
> 
> 赞同：3
> 
> 时间：2012-07-03T07:39:25.847
> 
> 标签：c++-cli, raii

被迫:(在C ++ CLI中工作我正在寻找一种方法来进行RAII锁定。我想出的是：

```
ref class RAIIMonitor
{
    RAIIMonitor();
    T^ t;
public:
    RAIIMonitor(T^ t_)
    {

        t=t_;
        System::Threading::Monitor::Enter(t_);
    }
    ~RAIIMonitor()
    {
        System::Threading::Monitor::Exit(t);
    }
    !RAIIMonitor()
    {
        assert(0); // you are using me wrong
    }
}; 
```

用法：

```
 //begining of some method in MyRefClass
 RAIIMonitor<MyRefClass> monitor(this); 
```

那么这是正确的方法吗，如果没有，有没有办法做到这一点，如果有，有没有办法做得更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T12:15:58.810

Microsoft 提供了一个类来执行此操作。`#include <msclr/lock.h>`，看看锁类。将其与堆栈语义相结合，您将获得 RAII 锁定。

对于简单的用例，只需将锁​​定对象声明为局部变量，并传入要锁定的对象。当通过堆栈语义调用析构函数时，它会释放锁。

```
void Foo::Bar()
{
    msclr::lock lock(syncObj);
    // Use the protected resource
} 
```

锁类还提供`Acquire`、`TryAcquire`和`Release`方法。有一个构造函数可用于不立即执行锁定，而是稍后锁定，您自己调用 Acquire 或 TryAcquire。

（如果您查看实现，您会发现它是您从 RAIIMonitor 类开始的完整实现。）

# c++ - 将字符串向量保存到磁盘不起作用

> ID：11306488
> 
> 赞同：0
> 
> 时间：2012-07-03T07:39:32.690
> 
> 标签：c++, string, file, file-format, stdvector

将字符串向量保存到磁盘未按预期工作。我看到该文件已创建但有 0 个字节且没有条目。注意：我在 Xcode (v4.3.3) 上的 MAC OS 上编译 C++ 代码。

向量和字符串的声明：

```
vector<string>taskVector;
string newTaskEntry; 
```

这就是我在程序运行时向数组添加新字符串的方式：

```
taskVector.push_back(newTaskEntry); 
```

当用户退出程序时，我这样做：

```
 fstream file;
        file.open("data.txt", ios::out | ios::trunc);

        for (int i = 0; i > taskVector.size(); i++) {
            file.write(taskVector[i].c_str(), taskVector[i].length());
            file.close(); 
```

知道为什么我没有看到任何条目吗？其次，当我能够将内容保存到磁盘时，你能给我一个提示如何读回数据吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T07:41:40.917

这是你的问题：

```
for (int i = 0; i > taskVector.size(); i++) 
```

非常仔细地看那条线。

编辑：至于您的更新，这里有一些提示：

1.  用于`std::getline()`逐行读取
2.  在向量上使用`push_back()`以插入向量中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T07:52:38.200

首先（就像@Nim 提到的）你做错了检查：

```
for (int i = 0; i > taskVector.size(); i++) { 
```

应该由

```
for (int i = 0; i < taskVector.size(); i++) { 
```

第二：关闭循环：

```
for (int i = 0; i > taskVector.size(); i++) {
    file.write(taskVector[i].c_str(), taskVector[i].length());
}
file.close(); 
```

关于重新读回它们：现在，你没有保存任何信息，你的字符串在哪里结束，或者它们有多长。没有它，您将不得不猜测字符串在哪里以及（以及它们有多少）。我会推荐以下之一：

要么取一个终止字节，这表明字符串何时在您的文件中结束。`'\0'`将是一个想法。但是您必须确保它不存在于您的字符串中，或​​者您无法正确地重新创建它们。回读时，在那个字符处拆分。

另一种方法是将字符串的长度信息存储在字符串前面。在存储字符串之前，您可以在前面存储 4 个字节的无符号整数。然后，在回读时，您首先回读 4 字节字符串，然后读取该数字指示的字节数。问题：你需要决定你的字符串最长可以多长（有 4 个字节的长度信息，大约是 4.8 * 10^9 字节，差不多）。如果您打算在不同的计算机上使用它，您可以检查系统的字节顺序（大端与小端）。

# android - 在 Android 中保存多个图像

> ID：11306490
> 
> 赞同：5
> 
> 时间：2012-07-03T07:39:42.973
> 
> 标签：android, save-image

我有一个基本图像视图，可以从 sd 卡加载图像。用户可以`templates(bitmap images)`通过单击按钮添加到此图像视图，并且可以根据用户需要定位添加的图像。我想将这些多个图像作为单个图像保存到 sd 卡。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:52:34.567

您可以简单地获取 ImageView 的 DrawingCache，然后将其转换为 Bitmap，然后将其保存到 SDCARD。

```
imageview.setDrawingCacheEnabled(true);
Bitmap b = imageview.getDrawingCache();
b.compress(CompressFormat.JPEG, 100, new FileOutputStream("/sdcard/image.jpg")); 
```

您可能必须在清单中设置 SDCARD 写入权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T07:54:30.647

看看这个片段：

[**如何将多张图片合并为一张图片 - Java ImageIO**](http://kalanir.blogspot.fi/2010/02/how-to-merge-multiple-images-into-one.html)

```
int rows = 2;   //we assume the no. of rows and cols are known and each chunk has equal width and height  
        int cols = 2;  
        int chunks = rows * cols;  

        int chunkWidth, chunkHeight;  
        int type;  
        //fetching image files  
        File[] imgFiles = new File[chunks];  
        for (int i = 0; i < chunks; i++) {  
            imgFiles[i] = new File("archi" + i + ".jpg");  
        }  

       //creating a bufferd image array from image files  
        BufferedImage[] buffImages = new BufferedImage[chunks];  
        for (int i = 0; i < chunks; i++) {  
            buffImages[i] = ImageIO.read(imgFiles[i]);  
        }  
        type = buffImages[0].getType();  
        chunkWidth = buffImages[0].getWidth();  
        chunkHeight = buffImages[0].getHeight();  

        //Initializing the final image  
        BufferedImage finalImg = new BufferedImage(chunkWidth*cols, chunkHeight*rows, type);  

        int num = 0;  
        for (int i = 0; i < rows; i++) {  
            for (int j = 0; j < cols; j++) {  
                finalImg.createGraphics().drawImage(buffImages[num], chunkWidth * j, chunkHeight * i, null);  
                num++;  
            }  
        }  
        System.out.println("Image concatenated.....");  
        ImageIO.write(finalImg, "jpeg", new File("finalImg.jpg")); 
```

# c++ - 定义向量类型时前向声明错误？

> ID：11306492
> 
> 赞同：2
> 
> 时间：2012-07-03T07:39:49.933
> 
> 标签：c++, forward-declaration

我正在尝试尽可能多地使用前向声明来最小化编译时间。我注意到，当我转发声明一个使用 std::vector 之类的类作为成员对象的类时（此处的示例）：

```
class myTypeA
class A
{
  A(){};
  ~A(){};
  std::vector<myTypeA > getTypeA();

} 
```

我收到以下错误：

```
microsoft visual studio 9.0\vc\include\vector(1112) : error C2036: 'myTypeA *' : unknown size
1>        c:\program files\microsoft visual studio 9.0\vc\include\vector(1102) : while compiling class template member function 'bool std::vector<_Ty>::_Buy(unsigned int)'
1>        with
1>        [
1>            _Ty=myTypeA
1>        ]
1>        d:\cpp\A.h(15) : see reference to class template instantiation 'std::vector<_Ty>' being compiled
1>        with
1>        [
1>            _Ty=myTypeA
1>        ] 
```

当我使用#include“myTypeA.h”时，这工作正常，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T07:42:29.027

这是因为编译器需要知道要存储在向量中的类型的大小。如果没有完整的类定义，它就无法知道这一点。

另一种方法是存储指向您的前向声明类型的指针 - 但是您需要管理内存分配和释放。

第三种选择是`shared_ptr`根据您的前向声明类型声明一个类型并将它们存储在您的向量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:17:58.163

正如错误所说

`error C2036: 'myTypeA *' : unknown size`

编译器不会通过前向声明知道此类型对象的大小。它只是告诉它是什么类型。您需要包含标头以引入类定义，以便编译器可以评估此​​类型对象的大小。

看到这个[问题](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T08:34:39.563

简单的答案是，只要您在类型上实例化模板，该标准就需要完整的定义。否则它是未定义的行为。强制执行此类约束的编译器（g++，当您使用适当的选项编译时）将无法编译。其他人可能会接受它。（虽然形式上未定义行为，但在实践中，它要么无法编译，要么按预期工作。）

我对 Microsoft 无法编译您发布的那段代码感到有些惊讶，因为它不需要知道任何关于`myTypeA`. 如果您正在调用该函数，该消息看起来可能会出现；如果您调用该函数，您肯定需要 的定义`myTypeA`，因为编译器必须实例化复制构造函数，这反过来意味着复制 `myTypeA`.

# gdbm - 对“gdbm_open”的未定义引用

> ID：11306496
> 
> 赞同：2
> 
> 时间：2012-07-03T07:39:57.230
> 
> 标签：gdbm

我已经安装了 gdbm，命令“man gdbm”就可以了。现在我尝试编写一个简单的 gdbm 程序。

```
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <fcntl.h>
#include <string.h>

#include <gdbm.h>

#define TEST_DB_FILE "/tmp/gdbm1_test.db"

int main()
{
    GDBM_FILE gdbm_ptr;
    gdbm_ptr = gdbm_open(TEST_DB_FILE, 0, GDBM_WRCREAT, 0666, NULL );

    if ( !gdbm_ptr )
    {
         fprintf(stderr, "Failed to open database\n");
         exit(EXIT_FAILURE);
    }
} 
```

但是在编译时，会出现“未定义的对 'gdbm_open 的引用”错误。我已经包含 gdbm.h，为什么会出现这样的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-30T22:26:08.250

您需要与 libgdbm 链接：

gcc foo.c -lgdbm

# objective-c - Objective-C 中的正则表达式用于搜索以 # 开头的字符串

> ID：11306502
> 
> 赞同：-1
> 
> 时间：2012-07-03T07:40:13.147
> 
> 标签：objective-c, regex, cocoa, foundation

我的代码在下面，但它不起作用。

```
NSString *regex = @"^#";

NSPredicate *regextest = [NSPredicate
                          predicateWithFormat:@"SELF MATCHES %@", regex];

if ([regextest evaluateWithObject:secondHalfString] == YES) {
    NSLog(@"Match!");
} else {
    NSLog(@"No match!");
} 
```

哪里不对了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:18:12.857

`matches`在谓词中适用于整个字符串，因此要获得您所追求的，请像这样编写正则表达式：

```
@"^#.*" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:47:32.680

注意

`The predicate format string syntax is different from the regular expression syntax.`

[关于*谓词*文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pCreating.html)。

对于可可上的正则表达式，请查看[此答案](https://stackoverflow.com/a/3554488/1495442)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:08:01.950

如果你正在寻找一个以某个字符串开头的字符串，你应该使用类似的东西`@"SELF BEGINSWITH #"`，它比使用正则表达式要快得多。

# html - HTML 资源在 servlet 中不受限制

> ID：11306513
> 
> 赞同：2
> 
> 时间：2012-07-03T07:40:49.800
> 
> 标签：html, jsp, servlets, resources

首先是一些细节：我在 web.xml 视图中将安全配置如下，将纯副本复制到剪贴板打印？

```
<login-config>  
    <auth-method>FORM</auth-method>  
    <form-login-config>  
        <form-login-page>/formLoginPage.html</form-login-page>  
        <form-error-page>/formErrorPage.html</form-error-page>  
    </form-login-config>  
</login-config>  
<security-constraint>  
    <web-resource-collection>  
        <web-resource-name>MyBeerApp</web-resource-name>  
        <url-pattern>/web/form.html</url-pattern>  
        <url-pattern>/SelectBeer.do</url-pattern>         
        <http-method>POST</http-method>  
        <http-method>GET</http-method>  
    </web-resource-collection>  
    <auth-constraint>  
        <role-name>member</role-name>  
    </auth-constraint>  
    <user-data-constraint>  
        <!--transport-guarantee>CONFIDENTIAL</transport-guarantee-->  
    </user-data-constraint>  
</security-constraint>  
<security-role>  
    <role-name>admin</role-name>  
</security-role>  
<security-role>  
    <role-name>member</role-name>  
</security-role>  
<security-role>  
    <role-name>guest</role-name>  
</security-role> 
```

在tomcat-user.xml 中如下：查看plaincopy 到剪贴板打印？

```
 <role rolename="member"/>  
  <role rolename="guest"/>  
  <user username="vgarg2" password="tomcat" roles="member,guest" />  
  <user username="vgarg3" password="tomcat" roles="guest" /> 
```

文件的位置如下：查看纯副本到剪贴板打印？

```
<TOMCAT_HOME>\Beer-v1\index.html  
<TOMCAT_HOME>\Beer-v1\web\form.html  
<TOMCAT_HOME>\Beer-v1\WEB-INF\web.xml  
<TOMCAT_HOME>\Beer-v1\WEB-INF\classes\... 
```

form.html 的内容：

查看plaincopy到剪贴板打印？

```
<html>  
<body>  
<h1 align="center">Beer Selection Page</h1>  
<form method="POST" action="../SelectBeer.do">  
Select Beer Characteristics  
Color : <select name="color1" size="1">  
            <option value="light1">Light</option>  
            <option value="amber1">Amber</option>  
            <option value="brown1">Brown</option>  
            <option value="dark1">Dark</option>  
        </select>  
    <br/>  
Can sizes:  
<input type="checkbox" name="sizes" value="12oz">12 oz</input>    
<input type="checkbox" name="sizes" value="24oz">24 oz</input>  
<input type="checkbox" name="sizes" value="36oz">36 oz</input>  
    <br/>  
    <center>  
        <input type="submit"/>  
    </center>  
</form>  
</body>  
<html> 
```

现在我的问题是去“http://localhost:8080/Beer-v1/web/form.html”的请求没有受到限制。当我从 /web/form.html 向“http://localhost:8080/Beer-v1/SelectBeer.do”提交请求时，它会检查身份验证并询问 ID/密码信息。

如果我禁用安全约束，应用程序可以正常工作。

这里出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:45:21.860

我认为这里的问题是响应`http://localhost:8080/Beer-v1/web/form.html`是从缓存中提供的。

如果您需要对静态页面进行身份验证，您应该发送缓存控制标头，说明缓存实体不要缓存响应。为此，您应该将以下标头与响应一起发送：

*   缓存控制：无缓存，无存储
*   Pragma : 无缓存

**注意：**如果不应用上面的标题，如果您使用 F5 刷新页面，您应该会看到身份验证将起作用。

**我建议将所有需要身份验证的页面都设置为 JSP。**

# ruby-on-rails - 使用 ActionView 辅助类编写 HTML

> ID：11306515
> 
> 赞同：0
> 
> 时间：2012-07-03T07:41:10.247
> 
> 标签：ruby-on-rails, actionview

我是 Rails 的新手，我已经看到要编写 HTML 代码，rails 为您提供了 hepler 类。所以我的印象是直接在 Rails 应用程序中编写 HTML 代码并不好。

我所做的是使用表单助手类在 html 中生成表单，如下所示：

```
<%= form_for @sub do |s| %>

<%= s.text_field :email %>
<%= s.submit 'Sign up' %> 
```

我是后端开发人员，到目前为止一切都很好，但是当我得到前端 html 时，代码是：

```
<div id="subscribe">
<form action='/subscribers' method='post'>
<input id='subscriber_email' name='subscriber[email]' type="email" placeholder="email address" required="required">
<input name='commit' type="submit" value="&#10132;">
</form>
</div> 
```

如何使用 actionview 向标签添加类和类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:48:29.197

查看有关[ActionView Formhelpers](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)的文档。

您可以通过添加 class 属性在后端轻松设置类：

```
<%= s.text_field :email, :class => "myClass" %> 
```

# asp.net - 跨多个浏览器共享会话对象

> ID：11306516
> 
> 赞同：0
> 
> 时间：2012-07-03T07:41:10.287
> 
> 标签：asp.net

是否可以跨多个浏览器共享会话对象，如用户对象？我的要求是，如果用户尝试在不同的浏览器（IE、Chrome 或 Fireforx）之间切换，应用程序应该允许导航以及共享用户对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:42:09.887

无法在浏览器之间共享会话，浏览器使用会话 cookie 来唯一标识每个客户端，并将其存储在浏览器内存中。所以不允许一个浏览器访问其他浏览器的内存，这使得不同浏览器之间无法共享会话。阅读有关[**会话 cookie**](http://www.cookiecontroller.com/session-cookie.html)的更多信息可能会更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:24:04.653

这**是**可能的。但这需要您编写自己的`SessionIDManager`课程：

[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionidmanager.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionidmanager.aspx)

如果您创建自己的`SessionIDManager`，您将决定如何确定请求是否属于特定会话。客户端 IP 至少应该是一个参数，一些特定于应用程序的密钥可以是另一个参数，等等。返回的实际会话密钥可以是所有参数散列的合适字符串表示（生成的会话 id对于每个会话**必须**是唯一的）。

完成后，您`SessionIdManager`可以将其连接到`web.config`：

```
<sessionState mode="[mode]" ...
    sessionIDManagerType="[full type name of your class here]" ... /> 
```

所以**可以**做到。

但我个人不会做这样的课程，除非有一些真正令人信服的理由去做：

*   很容易弄错并为不同的用户混淆会话。
*   如果不同的用户通过同一个代理访问您的站点怎么办？如果您的站点前面有一个负载均衡器怎么办
    （=所有请求似乎都来自同一个 IP）。等等。

而且，也许最重要的是：

*   它打破了用户对会话通常如何工作的期望......

# ndepend - NDepend - 如何运行关于具有和不具有属性的方法数量的报告

> ID：11306521
> 
> 赞同：2
> 
> 时间：2012-07-03T07:41:39.343
> 
> 标签：ndepend, cqlinq

我想对特定程序集及其子程序集中有多少方法具有和不具有特定属性进行报告。你能给我写一个示例代码吗？有哪些报告选项？我需要每晚运行这份报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:49:20.963

你可以这样写：

```
(from m in Application.Assemblies.WithNameLike("^MyAssembly").ChildMethods()
 where m.HasAttribute("NamespaceA.AttributeA") &&
       m.HasAttribute("NamespaceB.AttributeB") &&
      !m.HasAttribute("NamespaceC.AttributeC")
 select m).Count() 
```

请注意，`Count()`如果您希望列出方法而不是计算方法，可以删除对 的聚合调用。

> 我需要每晚运行这份报告。

以下是相关文档：

*   [报告 CQLinq 规则违规](http://www.ndepend.com/Doc_CI_Report.aspx#CQLRule)
*   [CQLinq 查询的报告组](http://www.ndepend.com/Doc_CI_Report.aspx#CQLQuery)

# sql-server - 从存储过程中的变量创建临时表

> ID：11306531
> 
> 赞同：0
> 
> 时间：2012-07-03T07:42:33.370
> 
> 标签：sql-server, stored-procedures, sql-server-2000

我试图弄清楚如何创建一个使用传递给存储过程的变量创建的临时表，我知道你可以在引号中使用 + 进行连接（如下面的检查表是否存在），但是我可以使用变量生成一个临时表，因为有多个代理将使用它，我必须确保该表是唯一的，以防它同时运行。

```
CREATE PROCEDURE TP_Getagentcdr @agentid VARCHAR(20), @date VARCHAR(20) ,@enddate VARCHAR(20)

AS
BEGIN
  IF OBJECT_ID('databasename.'+@agentid+'Tempcdr') IS NOT NULL  
    DROP TABLE databasename.+@agentid+Tempcdr

  CREATE TABLE databasename.@agentid+Tempcdr
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:47:04.687

您想要的称为[Dynamic SQL](http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/)。

首先，在 VARCHAR 中创建语句：

```
DECLARE @drop_statement VARCHAR(MAX) = 'DROP TABLE databasename.' + @agentid + 'Tempcdr' 
```

然后，通过以下方式执行语句`sp_executesql`：

```
sp_executesql @drop_statement 
```

创建表的方式相同：

```
DECLARE @create_statement VARCHAR(MAX) = 'CREATE TABLE databasename.' + @agentid + 'Tempcdr'

sp_executesql @create_statement 
```

# iphone - 将我的 iOS 应用分发给测试人员的最佳方式？

> ID：11306540
> 
> 赞同：5
> 
> 时间：2012-07-03T07:43:11.773
> 
> 标签：iphone, ios, iphone-developer-program, in-house-distribution

我们注册了常规的 iOS 开发者计划并有权获得 100 UDIDS。我们将它们用于测试和特殊的内部分发。很快我们就会用完 UDID，那么对我们来说最好的选择是什么？我们应该加入 iOS 开发者企业计划吗？我们可以将它用于常规应用商店分发（作为常规 iOS 开发人员计划的一部分）和内部/测试分发吗？

另外，有没有一种简单的方法可以在没有 iTunes 的情况下交付这些私有版本？也许是OTA？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:52:31.670

你试过[Testflight](https://testflightapp.com/)吗？它绝对应该能够帮助您进行 Beta 测试工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:16:51.503

在我看来，不建议购买企业帐户只是为了解决扩展 UDID 的问题。您真的需要在超过 100 台设备中进行测试吗？

[使用 iOS Developer Enterprise Program 进行 beta 测试？](https://stackoverflow.com/questions/5007954/using-ios-developer-enterprise-program-for-beta-testing)

如果您真的想参加企业计划：

您需要购买额外的企业计划。您可以使用企业程序在无限设备中进行测试，也可以使用开发人员程序将其发布到应用商店。**您不能使用企业帐户将应用程序发布到 App Store。**

[https://developer.apple.com/programs/start/ios/](https://developer.apple.com/programs/start/ios/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:50:22.917

使用 Adhoc 配置文件。有关更多详细信息，请访问此链接

[https://developer.apple.com/library/ios/#recipes/ProvisioningPortal_Recipes/CreatingaDistributionProvisioningProfile/CreatingaDistributionProvisioningProfile.html](https://developer.apple.com/library/ios/#recipes/ProvisioningPortal_Recipes/CreatingaDistributionProvisioningProfile/CreatingaDistributionProvisioningProfile.html)

# c# - 如何通过使用 c# 传递凭据在服务器上创建文件夹

> ID：11306542
> 
> 赞同：2
> 
> 时间：2012-07-03T07:43:35.970
> 
> 标签：c#, asp.net, impersonation

我正在使用 C# 开发一个 ASP.NET 应用程序，该应用程序试图通过登录从网站读取一些文件，然后将文件写入本地驱动器。

我已经通过使用 - 读取默认凭据来传递网络凭据以登录网站

```
request.Proxy.Credentials = CredentialCache.DefaultCredentials; 
```

现在我想将文件存储在需要一些凭据才能访问该位置的服务器目录中。

登录网站的代码 -

```
 string webUrl = "https://web.site.com/";

            string formParams = string.Format("user={0}&password={1}", username, password);

            WebRequest req = WebRequest.Create(webUrl);
            req.ContentType = "application/x-www-form-urlencoded";
            req.Method = "POST";
            req.Proxy.Credentials = CredentialCache.DefaultCredentials;
            byte[] bytes = Encoding.ASCII.GetBytes(formParams);
            req.ContentLength = bytes.Length;
            using (Stream os = req.GetRequestStream())
            {
                os.Write(bytes, 0, bytes.Length);
            }
            WebResponse resp = req.GetResponse();

            cookieHeader = resp.Headers["Set-cookie"]; 
```

而且位置是`\\11.11.11.11\Folder\`

如何传递访问该位置的凭据？到目前为止，我已经了解`impersonation`但没有得到任何帮助。我有可以访问该位置的凭据。但是我怎样才能通过使用 C# 代码来做到这一点呢？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:59:13.903

您可以[`LogonUser`](http://pinvoke.net/default.aspx/advapi32.LogonUser)为此使用 API。您使用该`LogonUser`函数创建一个表示`WindowsIdentity`您要模拟的令牌。`WindowsIdentity`然后，您使用令牌创建一个并调用[`Impersonate`](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx)身份。随后的所有代码都在模拟身份下运行。

确保您始终[`Undo`](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsimpersonationcontext.undo.aspx)将[`WindowsImpersonationContext`](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsimpersonationcontext.aspx).

```
[DllImport("advapi32.dll", SetLastError=true)]
public static extern bool LogonUser(string lpszUsername, string lpszDomain, 
                                    string lpszPassword, int dwLogonType, 
                                    int dwLogonProvider, out IntPtr phToken);

[DllImport("advapi32.dll", SetLastError=true)]
public extern static bool DuplicateToken(
    IntPtr ExistingTokenHandle, int SECURITY_IMPERSONATION_LEVEL,
    out IntPtr DuplicateTokenHandle);

[DllImport("kernel32.dll", SetLastError=true)]
static extern bool CloseHandle(IntPtr hHandle);

const int LOGON32_LOGON_INTERACTIVE = 2;
const int LOGON32_PROVIDER_DEFAULT = 0;
IntPtr hToken;
IntPtr hTokenDuplicate;

if (LogonUser(username, domain, password,
              LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, out hToken))
{
    if (DuplicateToken(hToken, 2, out hTokenDuplicate))
    {
        WindowsIdentity windowsIdentity = new WindowsIdentity(hTokenDuplicate);
        WindowsImpersonationContext impersonationContext =
            windowsIdentity.Impersonate();
        try
        {
            // Access files ...
            // ...
        }
        finally
        {
            impersonationContext.Undo();   
            if (hToken != IntPtr.Zero) CloseHandle(hToken);
            if (hTokenDuplicate != IntPtr.Zero) CloseHandle(hTokenDuplicate);
        }
    }
} 
```

# javascript - 无法动态将jquery添加到头部并运行jquery代码

> ID：11306544
> 
> 赞同：1
> 
> 时间：2012-07-03T07:44:03.223
> 
> 标签：javascript, jquery

我有这个代码：

```
function init(){
    if (typeof window.jQuery !== 'function') {
        var link = document.createElement('script');
        link.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js';
        document.getElementsByTagName('head')[0].appendChild(link);
    }
}

window.onload = init;

 if (typeof window.jQuery === 'function')  {
    $(document).ready(function(){
        alert(1);
    });
} 
```

我想要做的是如果 jQuery 不存在，则将 jquery 脚本链接添加到头部，然后运行代码。最好的办法是尽快检查头部是否存在jquery，然后添加指向源的链接。但我不知道如何做到这一点？

**更新：** 另一种方法是使用一个函数：

```
 function init(){
   if (typeof window.jQuery !== 'function') {
      var link = document.createElement('script');
      link.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js';
      document.getElementsByTagName('head')[0].appendChild(link);
      start_code();
   }
   else{
       start_code();
   }
}  
window.onload = init;
function start_code(){
           $(document).ready(function(){
                alert(1);
           });
     } 
```

我基本上可以在加载完所有内容后调用一个函数。但这并不好用。导致 $ is not defined 错误也被抛出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:47:46.653

```
function init(){
   if (typeof window.jQuery !== 'function') {
      var link = document.createElement('script');
      link.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js';
      document.getElementsByTagName('head')[0].appendChild(link);
   }
} 
```

或使用该`HTML5 boilerplate`方法

```
<script>window.jQuery || document.write('<script src="/js/vendor/jquery-1.7.2.min.js"><\/script>')</script> 
```

将此脚本放在页面底部（出于性能目的）。然后，如果你之前需要使用 jQuery 函数，只需看看这个资源：[停止支付你的 jQuery 税](http://samsaffron.com/archive/2012/02/17/stop-paying-your-jquery-tax)

因为`document.write`这里正在创建一个脚本*块*（它是同步的）你所要做的只是

```
<script>window.jQuery || document.write('<script src="/js/vendor/jquery-1.7.2.min.js"><\/script>')</script>
<script>
    $(document).ready(function(){
        alert(1);
    });
</script> 
```

# php - 我可以使用服务器端技术更改 SWF 中 var 的值，然后保存该 SWF 的新版本吗？

> ID：11306545
> 
> 赞同：2
> 
> 时间：2012-07-03T07:44:09.457
> 
> 标签：php, actionscript-3, flash

**概述：**

我有一个 SWF 横幅广告模板，它从我开发的平台加载 JSON，然后循环浏览在该 JSON 中指定的一些产品。每个产品都由您的标准标题、价格和图像组成。

在平台上，用户可以通过一些 UI 工具来修改 JSON 提要，例如图片上传、标题更改等。

完成此操作后，他们可以保存和预览广告。预览是嵌入在当前页面上的 SWF 文件，其中包含一些 FlashVar，这些 FlashVar 引用了他们刚刚创建的 JSON 的位置。

**请求：**

用户希望能够归档他们在本地创建的所有版本（作为驱动器上的 SWF）。

我提供了一些解决方案，例如：

*   下载一个包含 HTML 页面的包，其中 SWF 嵌入了 HTML 中定义的适当 FlashVars（这很容易）。
*   下载包含与 SWF 相同目录中的 XML 文档的捆绑包，SWF 可以加载该文档（这是 SWF 的略微修改版本）并从中获取 JSON URL。

不幸的是，他们正在推动下载单个 SWF，他们可以将其保存为封装文件。这个想法是这样可以消除大量文件，以及将组件放置在错误目录中的能力等。

**问题：**

我需要使用 PHP（如果可能）来执行以下操作：

1.  创建 SWF 模板的副本。
2.  将包含 URL 的复制 SWF 中的变量值更改为适当的存档 JSON URL。
3.  保存该版本，然后开始下载。

> 这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:02:26.890

我听说有公司使用`mxmlc`编译器来封装单体构建，从而创建自定义 SWF 服务器端。

这已被用来动态构建 SWF，否则将需要大量资源。

该方法：

1.  PHP 脚本会更改 ActionScript 文件，设置变量和`[Embed]`资源。

2.  PHP 脚本会调用`mxmlc`命令行编译器来构建 SWF，本质上与 Flash Builder 会编译纯 ActionScript 项目相同。

也许 ANT 任务可以自动构建。

参考：

*   [使用 mxmlc 和“exec”从 php 编译 swf - 加载配置文件但浏览器中没有 swf](https://stackoverflow.com/questions/6902713/compiling-swf-from-php-using-mxmlc-and-exec-loading-config-file-but-no-swf-i)

*   [http://www.senocular.com/flash/tutorials/as3withmxmlc/](http://www.senocular.com/flash/tutorials/as3withmxmlc/)

*   [http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7ffd.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7ffd.html)

# android - 接收 SMS 并将其存储到特定应用程序

> ID：11306546
> 
> 赞同：1
> 
> 时间：2012-07-03T07:44:20.207
> 
> 标签：android, sms, messaging, sendmessage

我需要一些帮助来开始我的项目。我想知道 android 是否有可能接收到我正在创建的应用程序的 SMS。好的..这里是senario：

我必须创建一个课堂投票应用程序，使用 Android 手机的老师能够从学生那里接收短信作为投票的一种形式，并将其存储在应用程序中。它必须显示有多少学生投票支持正确答案的概览。

有可能吗？并且其他操作系统平台可以将消息发送到android应用程序并且它没有显示在本机消息应用程序中并且仅在我正在开发的应用程序中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:56:49.700

是的，在 android 中可以接收任何传入的 SMS，我使用以下链接作为参考。

[http://davanum.wordpress.com/2007/12/15/android-listen-for-incoming-sms-messages/](http://davanum.wordpress.com/2007/12/15/android-listen-for-incoming-sms-messages/) 是的

# c++ - 非本地 IP 的套接字侦听器不起作用

> ID：11306549
> 
> 赞同：1
> 
> 时间：2012-07-03T07:44:23.083
> 
> 标签：c++, sockets, listen

我有一些适用于我的本地 IP 的代码，但是当我尝试侦听非本地 IP（来自同一网络）时，此代码不起作用。显然，我的“选择”子句不再起作用了。

```
 while(IsReading() && IsConnected())
    {
            FD_ZERO(&lReader);
            FD_SET(GetConnection(), &lReader);

            int lHasData = select(GetConnection()+1, &lReader, NULL, NULL, NULL);

            if (lHasData > 0)
            {
                    //Accept and read socket...
            }
    } 
```

正如我所说，这对我自己的 Ip 非常有效，但是当我尝试从我的新网络（它是 Asterisk 服务器，我想听它来接收我的操作和调用的响应）中监听其他 IP/端口时，“选择”是如果没有数据到达，则保持不变。

我的非本地 IP 代码有问题吗？

感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:03:51.957

无论是否“来自同一网络”，您都无法“收听 [to] 非本地 IP”。套接字只能绑定到本地地址。您一定忽略了一些先前的错误。否则，您的问题措辞不当。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:15:54.817

一般是不可能的。按照设计，以 IP 为目标的数据包仅路由到具有该 IP 的机器。仅仅因为您已经开始侦听该 IP 不会使路由器神奇地改变主意并开始将其他人的数据包发送到您的机器。

有时有可能，例如，当您和另一台机器通过哑集线器连接时，该集线器将每个人的传输重新翻译给每个人，并且您的接口进入[混杂模式](http://en.wikipedia.org/wiki/Promiscuous_mode)（即，它被配置为不丢弃针对非本地的数据包IP）。如果这是您要实现的目标，则需要确保两台机器都连接到[集线器](http://en.wikipedia.org/wiki/Network_hub)，而不是[交换机](http://en.wikipedia.org/wiki/Network_switch)，并查阅您的操作系统文档以了解如何将网络接口切换到混杂模式。

# ruby-on-rails - 使用 Stripe 获取质量分配错误

> ID：11306553
> 
> 赞同：0
> 
> 时间：2012-07-03T07:44:41.423
> 
> 标签：ruby-on-rails, stripe-payments

我正在尝试在我的 rails 应用程序中实施 Stripe 付款。我几乎遵循 railscasts 中的教程并对其进行自定义，但我似乎陷入了与 stripe_card_token 相关的大量分配错误中。任何想法为什么会发生这种情况？

这是我的一堆代码[http://pastie.org/4191557](http://pastie.org/4191557)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:35:42.777

在您的 Stripe_token 迁移中，字段名称为 :stripe_customer_token 并且您已编写 :stripe_card_token

通常，不能批量分配'意味着您不能像这样自动分配值：@idea.pledges.create(params[:pledge])

要么使用 attr_accessible :stripe_customer_token

或者

直接赋值

@idea.pledges.stripe_customer_token = params[:pledge][:stripe_customer_token]

# c# - 按列获取数据网格的值

> ID：11306555
> 
> 赞同：0
> 
> 时间：2012-07-03T07:44:55.070
> 
> 标签：c#, wpf, datagrid

您如何知道标题为 的列中特定行的值`id`：

```
 row_index | id
-----------+-----
    0      | 54

    1      | 34

    2      | 12 
```

`select id where row_index = 1`例如，我应该得到一个 34 的值。

这是`datagrid`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:57:45.213

不完全确定你在寻找这个，无论如何你可以通过给出列名和行索引来访问特定的单元格值

```
var value = datagrid["id",rowindex].Value.ToString(); 
```

# java - 如何使用java读取包含阿拉伯字符的csv文件

> ID：11306556
> 
> 赞同：0
> 
> 时间：2012-07-03T07:44:59.277
> 
> 标签：java, jakarta-ee

我有一个包含阿拉伯字符的 csv 文件。我需要阅读 csv 文件并转换为 PDF，其中应该写入相同的阿拉伯字符。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:20:24.730

对于解析 csv 我建议使用[OpenCSV](http://opencsv.sourceforge.net/)。

要创建 PDF，请查看[此处](http://java-source.net/open-source/pdf-libraries)，或者您可以尝试[Apache fop](http://xmlgraphics.apache.org/fop/)。

您需要确保您使用的是 UTF-8，并且您不应该对阿拉伯字符有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:48:24.750

阿拉伯语不是 UTf-8 的一部分吗？因为如果是你应该能够做到这一点：

```
public void unicodeShow(String fileName) throws UnsupportedEncodingException, FileNotFoundException, IOException{
    Reader reader = new InputStreamReader(new FileInputStream(fileName), "utf-8");
    BufferedReader br = new BufferedReader(reader);
    String a=br.readLine();
} 
```

如何制作 PDF 我不确定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:50:02.397

读取和写入文件时尝试使用 ISO/IEC 8859-6 字符集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:57:00.010

首先，您需要确定您的 CSV 文件正在使用的代码页。这很可能是 Windows 代码页[1256](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html)

使用java“ [InputStreamReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html) ”类，在构造函数中指定代码页

就像是：-

```
 InputStream inputStream = new FileInputStream("c:\\data\\input.txt");
    BufferedReader reader = new BufferedReader(new InputStreamReader(fis,"CP1256"))

    int data = reader.read();
    while(data != -1){
        char theChar = (char) data;
        data = reader.read();
    }

    reader.close(); 
```

# php - 显示数组的内容

> ID：11306558
> 
> 赞同：0
> 
> 时间：2012-07-03T07:45:12.130
> 
> 标签：php, javascript, jquery, json

```
 <script type="text/javascript" src="http://www.google.com/jsapi?key=asedAWWefefI-43WqNAiw0XkfflwpU9zqkg">
            </script>
            <script type="text/javascript">
                google.load("jquery", "1.6.1");
            </script><script src="http://code.jquery.com/jquery-latest.js"></script>
            <script type="text/javascript">
                google.setOnLoadCallback(function()
                {...
}.... 
```

我的代码无法工作我猜这是上面代码的错。

整个代码

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <script type="text/javascript" src="http://www.google.com/jsapi?key=AIzaSyDzbTUhnU2I-erwerwe3450XkfflwpU9zqkg">
        </script>
        <script type="text/javascript">
            google.load("jquery", "1.6.1");
        </script><script src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript">
            google.setOnLoadCallback(function()
            {
                $(function()
                {
                    $('#catalog').click(function(e)
                    {
                        e.preventDefault();
                        $.getJSON('books.php', function(data) {   
                            var book = "<h3>" + data.title + </h3>";                             
                            book += "<p>ISBN: " + data.isbn + "</p>";                                                
                            book += "<br/>Published Date: " + data.publishDate;
                            book += "<br/>Publisher: " + data.publisher;
                            var author = [];

                            $.each(data.authors, function(i, ov) {
                                authors.push(ov.name)
                            });

                            book += "<br/>Authors: " + authors.join(", ");
                            $('#resopnse').html(book);
                                                                                                                                            });
                    });
                });
            });                                              
        </script>
    </head>
    <body>
        <p><a id="catalog" href="">Retrieve book information</a></p>
        <div id="response"></div>
    </body>
</html> 
```

当我单击链接时，它没有显示任何内容。我已经有一个 books.php 文件，其中包含一个格式化为具有 json 输出的数组。

**更新**

```
$.getJSON('books.php', function(data)
                        {
                            var book = "<h3>" + data.title + "</h3>";
                            book += "<p>ISBN: " + data.isbn + "</p>";
                            book += "<br/>Published Date: " + data.publishDate;
                            book += "<br/>Publisher: " + data.publisher;
                            var author = [];
                            $.each(data.authors, function(i, ov) { authors.push(ov.name) });
                            book += "<br/>Authors: " + authors.join(", ");
                            $('#response').html(book);

                        }); 
```

内部无法访问此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:52:37.290

您的页面上存在 javascript 错误。你真的应该使用调试器。Chrome 开发工具非常好。如果您使用的是 chrome 或菜单 > 工具 > js 控制台，请按 [ctr][shift][j]

```
var book = "<h3>" + data.title + </h3>"; 
```

失踪 ”

# ruby-on-rails-3 - 当 rspec 测试使用 respond_with 的控制器时，如何存根 :errors 集合以使其无效

> ID：11306559
> 
> 赞同：8
> 
> 时间：2012-07-03T07:45:12.443
> 
> 标签：ruby-on-rails-3, rspec-rails

我重构了我`OrgController`的使用`respond_with`，现在控制器规范脚手架失败并显示此消息：

```
1) OrgsController POST create with invalid params re-renders the 'new' template
   Failure/Error: response.should render_template("new")
     expecting <"new"> but rendering with <""> 
```

规范如下所示：

```
it "re-renders the 'new' template" do
 Org.any_instance.stub(:save).and_return(false)
 post :create, {:org => {}}, valid_session
 response.should render_template("new")
end 
```

我读过我应该对`:errors`哈希进行存根以使其看起来有错误。最好的方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-12-02T10:42:16.877

使用在 v3 中引入的 RSpec 的新语法，存根看起来像

```
allow_any_instance_of(Org).to receive(:save).and_return(false)
allow_any_instance_of(Org).to receive_message_chain(:errors, :full_messages)
  .and_return(["Error 1", "Error 2"]) 
```

相关的控制器代码看起来像

```
if org.save
  head :ok
else
  render json: {
    message: "Validation failed",
    errors: org.errors.full_messages
  }, status: :unprocessable_entity # 422
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-11T00:37:16.333

消息：

```
expecting <"new"> but rendering with <""> 
```

表明它是重定向而不是渲染。要么你的存根不成功，要么你的控制器在控制器中。您应该能够测试存根是否适用于：`Org.first.valid?`或`Org.new(valid_attibutes).valid?`. 例如，如果`mocha`你的stubbing 会被破坏`Gemfile`，因为在这种情况下`any_instance`将是一个`mocha`对象，并且 rspec`stub`将无法处理它。如果存根有效，您可以使用日志记录或调试器调试控制器中发生的情况。

对于存根错误，您可以执行以下操作：

```
Org.any_instance.stub(:errors).and_return(ActiveModel::Errors.new(Org.new).tap {
  |e| e.add(:name,"cannot be nil")}) 
```

或者，如果控制器仅使用`errors.full_messages`，那么您可以：

```
Org.any_instance.stub_chain("errors.full_messages").and_return(["error1","error2"]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T19:59:16.073

你应该存根有效吗？方法：

```
Org.any_instance.stubs(:valid?).and_return(false) 
```

那么您的对象将不会被保存，因为它将无效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-17T01:26:20.597

FWIW，我使用的是严格的`save!`（验证失败时会引发错误）。
对于这种情况，我使用了：

```
 allow_any_instance_of(ReportFile).to receive(:save!).and_raise(
    ActiveRecord::RecordInvalid, ReportFile.new.tap do |rf|
      rf.errors.add(:data_file_size, 'must be less than 100 Megabytes')
    end
  ) 
```

# php - PHP - 检查输入名称是否以特定名称开头

> ID：11306565
> 
> 赞同：1
> 
> 时间：2012-07-03T07:45:30.697
> 
> 标签：php

我有几个用于上传文件的输入字段：

```
<input type=file name=logo />
<input type=file name=userfile />
<input type=file name=userfile1 />
.
.
.
<input type=file name=top />
<input type=file name=bottom /> 
```

每个文件都需要以不同的方式处理。如何检查是否`$_FILES`启动，例如，使用**userfile**？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T07:49:34.267

如果您有 mroe 用户文件，您可以将您的 html 标记更改为

```
<input type=file name=userfile[1] />
<input type=file name=userfile[2] /> 
```

然后在 PHP

```
foreach($_FILES['userfile'] as $i => $file) {
    processing
} 
```

否则您可以检查名称是否以预期的字符串开头（http://php.net/manual/en/function.substr.php）

```
<?
    if(substr($inputName, 0, 7) === "userfile")
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:50:47.130

此处给出的示例可能会对您有所帮助[http://php.net/manual/en/reserved.variables.files.php](http://php.net/manual/en/reserved.variables.files.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:51:12.350

```
foreach ($_FILES as $name => $file) {
    switch ($name) {
        case 'userfile' :
            ...
        case ... 
    }

    // or:

    if (substr($file, 0, 6) == 'userfile') {
        ...
    }
} 
```

***但是***`foreach..switch`，如果您可以简单地这样做，为什么

```
echo $_FILES['userfile']['name'];
// do something with $_FILES['userfile']...

echo $_FILES['userfile1']['name'];
// do something with $_FILES['userfile1']... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:51:26.977

if ($_FILES['name'] == 'userfile') { /*此处代码*/} else {/*此处代码*/} ?

我没有测试它，但我认为它应该可以工作。

# c++ - 有没有办法获取我在 C++ 中发送给对等方的 OpenSSL X509 证书名称？

> ID：11306567
> 
> 赞同：1
> 
> 时间：2012-07-03T07:45:46.873
> 
> 标签：c++, c, ssl, openssl, x509

我`remote certficate mismatch`从同行那里收到了一些错误，我无法从服务器端跟踪问题。

完成之后`int ret = SSL_accept(ssl)`，有没有办法在 SSL 握手期间从服务器（C++ 二进制文件）获取证书名称及其详细信息并打印出来？

我可以使用任何 SSL API 吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T09:03:54.873

您可以使用`SSL_get_certificate`SSL 会话结构（在 SSL_Accept 中返回）来获取拥有提供给客户端的证书的 X509 结构。稍后您可以使用某些 X509 特定功能提取证书的 CN：

```
X509_NAME_oneline(X509_get_subject_name(certificate), buf, 256); 
```

这将是一种幼稚的方法，因为一个证书可以处理不同的 CN，但是，它可能足以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:18:30.157

我通常以“愚蠢的方式”来做这件事——捕捉

```
tcpdump -n -s 1500 -w - port 443 and host www.foobar.com | strings

tcpdump -n -s 1500 -w - port 443 and host www.foobar.com | hexdump -C 
```

即只是嗅探电线。在正常（非升级等）ssl 交换期间，这是以明文形式交换的。虽然 ASN1 编码 - 很容易简单地“看到”通用名称和其他 DN 字段。

```
000305e0  06 03 55 04 0b 13 16 77  77 77 2e 71 75 6f 76 61  |..U....www.quova|
000305f0  64 69 73 67 6c 6f 62 61  6c 2e 63 6f 6d 31 20 30  |disglobal.com1 0|
00030600  1e 06 03 55 04 03 13 17  51 75 6f 56 61 64 69 73  |...U....QuoVadis|
00030610  20 47 6c 6f 62 61 6c 20  53 53 4c 20 49 43 41 30  | Global SSL ICA0|
00030620  1e 17 0d 31 31 30 38 30  35 31 30 31 38 30 36 5a  |...110805101806Z|
00030630  17 0d 31 32 30 38 30 35  31 30 31 38 30 36 5a 30  |..120805101806Z0|
00030670  1b 30 19 06 03 55 04 0a  13 12 41 42 4e 20 41 4d  |.0...U....ABN AM|
00030680  52 4f 20 42 61 6e 6b 20  4e 2e 56 2e 31 19 30 17  |RO Bank N.V.1.0.|
00030690  06 03 55 04 0b 13 10 49  6e 74 65 72 6e 65 74 20  |..U....Internet |
000306a0  42 61 6e 6b 69 6e 67 31  16 30 14 06 03 55 04 03  |Banking1.0...U..| 
```

是你看到的那种东西。执行此操作的正确方法是坐在回调上并分析证书堆栈。

# javascript - drawing path with combination of color

> ID：11306570
> 
> 赞同：1
> 
> 时间：2012-07-03T07:46:15.673
> 
> 标签：javascript, html, css, google-maps

I have totally 5 locations latitude and longitude values and i want to draw aline on google map through those 5 locations in sequence with combination of colors. Is it possible? If possible how it can be done

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:07:18.853

**[Google Maps Directions](http://code.google.com/apis/maps/documentation/directions/) API**，对你有很大帮助。

![地图](../Images/87b37c0372f3d64ec34844b815c50c00.png)

这是`Good Tutorial + Demo`您正在寻找的内容：

**[http://dreamdealer.nl/tutorials/getting_directions_with_google_maps.html](http://dreamdealer.nl/tutorials/getting_directions_with_google_maps.html)**

您必须使用代码，并且可以使用多种颜色来实现它。

希望这可以帮助。

# sql - 透视两个逗号分隔的列

> ID：11306572
> 
> 赞同：0
> 
> 时间：2012-07-03T07:46:22.867
> 
> 标签：sql, tsql, pivot

我正在努力解决这个问题，我在一个表中有两个字段，一个包含标题名称，另一个包含结果

例如，

```
ResultID  TestID   MemberID    HeaderDefinition             ResultDefinition
1         1        1           Minutes Exercised|KJ Burnt   60|900
2         2        1           Height|Weight|BMI            142|94|35
3         1        2           Minutes Exercised|KJ Burnt   70|1000
4         2        3           Height|Weight|BMI            150|60|20 
```

我想做的是传入一个 TestID 并在标题上看到它

例如。测试 1

```
MemberID     Minutes Exercised    KJ Burnt
1            60                   900
2            70                   1000 
```

例如。测试 2

```
MemberID     Height     Weight    BMI
1            142        94        35
3            150        60        20 
```

我查看了所有标准的 Pivoting 示例和动态数据，但它适用于使用相同的字段，我需要一个字段来定义标题，另一个字段来定义结果，不知道如何将它们结合到上面的示例中，任何帮助将不胜感激。

顺便说一句，我不能改变数据的结构。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:52:53.563

`PIVOT`如果您还实现了类似于此的拆分函数，则可以使用 a 来完成：

**拆分功能**：

```
CREATE FUNCTION [dbo].[Split](@String varchar(MAX), @Delimiter char(1))       
returns @temptable TABLE (items varchar(MAX))       
as       
begin      
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return 
end; 
```

然后，如果您知道要转换为列的值，则可以使用静态枢轴对值进行硬编码：

```
select *
from
(
  select h.memberid,
    h.cols,
    r.results
  from
  (
    select t1.resultid,
      t1.testid,
      t1.memberid, 
      h.items cols,
      row_number() over(partition by memberid order by memberid) rn
    from table1 t1
    cross apply dbo.split(t1.headerdefinition, '|') h
    where t1.testid = 1
  ) h
  left join
  (
    select t1.resultid,
      t1.testid,
      t1.memberid, 
      r.items results,
      row_number() over(partition by memberid order by memberid) rn
    from table1 t1
    cross apply dbo.split(t1.resultdefinition, '|') r
    where t1.testid = 1
  ) r
    on h.memberid = r.memberid
    and h.rn = r.rn
) x
pivot
(
  max(results)
  for cols in ([Minutes Exercised], [KJ Burnt])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/881b2/36)

但我猜你会想要使用动态`PIVOT`，因为每个条目都有不同数量的列。您的代码将与此类似：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @testid int = 2

select @cols = 
      STUFF((SELECT ',' + QUOTENAME(x.cols) 
             from
             (
               select h.items cols,
                row_number() over(partition by memberid order by memberid) rn
               from table1 t1
               cross apply dbo.split(t1.headerdefinition, '|') h
               where t1.testid = @testid
             ) x
             group by cols, rn
             order by rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'SELECT memberid, ' + @cols + ' from 
     (
        select h.memberid,
          h.cols,
          r.results
        from
        (
          select t1.resultid,
            t1.testid,
            t1.memberid, 
            h.items cols,
            row_number() over(partition by memberid order by memberid) rn
          from table1 t1
          cross apply dbo.split(t1.headerdefinition, ''|'') h
          where t1.testid = '+ cast(@testid as varchar(10)) +'
        ) h
        left join
        (
          select t1.resultid,
            t1.testid,
            t1.memberid, 
            r.items results,
            row_number() over(partition by memberid order by memberid) rn
          from table1 t1
          cross apply dbo.split(t1.resultdefinition, ''|'') r
          where t1.testid = '+ cast(@testid as varchar(10)) +'
        ) r
          on h.memberid = r.memberid
          and h.rn = r.rn
      ) x
      pivot
      (
        max(results)
        for cols in ('+@cols+')
      ) p'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/59944/1)

然后根据`@testid`您通过的结果将是：

```
| MEMBERID | MINUTES EXERCISED | KJ BURNT |
-------------------------------------------
|        1 |                60 |      900 |
|        2 |                70 |     1000 | 
```

或者

```
| MEMBERID | HEIGHT | WEIGHT | BMI |
------------------------------------
|        1 |    142 |     94 |  35 |
|        3 |    150 |     60 |  20 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:00:00.357

我认为 PIVOT 行不通；那是为了将列切换到行/反之亦然。在您的示例中，您在单个列中有（可变数量的）列，由竖线字符 (|) 分隔。

所以你需要先做一些准备工作。这项准备工作取决于您有多少不同的测试，以及该单列内可以有多少不同的列。如果只是上面示例中包含 2 或 3 列的两个测试，那么您可以“硬编码”一个或两个将提取数据的查询。如果它比这更多变量，您可能需要一个游标或临时表来完成更复杂的准备工作。

因此，这是一个使用硬编码的 2 个查询集的示例，您必须进行一些小的调整才能使用表数据，而不是变量：

```
declare @TestID int, @ResultDefinition varchar(100), @MemberID int
set @TestID = 1
set @MemberID = 1

if @TestID = 1 begin

    set @ResultDefinition = '60|900'

    select  @MemberID, 
        LEFT(@ResultDefinition, CHARINDEX('|',  @ResultDefinition)-1) AS [Minutes Exercised],
        SUBSTRING(@ResultDefinition, CHARINDEX('|',  @ResultDefinition)+1, LEN(@ResultDefinition)) AS [KJ Burnt]
    --from  tblResults 
    --where TestID = @TestID

end else begin

    set @ResultDefinition = '142|94|35'

    select  @MemberID, 
        LEFT(@ResultDefinition, CHARINDEX('|',  @ResultDefinition)-1) AS [Height],
        LEFT(SUBSTRING(@ResultDefinition, charindex('|', @ResultDefinition) + 1, LEN(@ResultDefinition) ), charindex('|', SUBSTRING(@ResultDefinition, charindex('|', @ResultDefinition) + 1, LEN(@ResultDefinition) ))-1) as [Weight],
        reverse(left(reverse(@ResultDefinition),  CHARINDEX('|', reverse(@ResultDefinition))-1)) as [BMI]
    --from  tblResults 
    --where TestID = @TestID

end 
```

如果比这更复杂，那么……我其实都不想去！:) 这将涉及动态构建表结构，然后用相关数据填充它，然后选择内容。

也许其他人有一个更优雅的解决方案......

# c# - 更改 GridView 中 RowCreated 中 CheckBox 的属性

> ID：11306576
> 
> 赞同：0
> 
> 时间：2012-07-03T07:46:40.247
> 
> 标签：c#, asp.net, c#-4.0, gridview

我有一个包含复选框的网格视图。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" OnRowCreated="GridView1_RowCreated"
    BackColor="#F1EFC5" CssClass="SearchEveryWhere_Table" Width="500px">
    <HeaderStyle BackColor="#5391DD" ForeColor="White" />
    <Columns>
      <asp:BoundField DataField="CityCode" ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Middle" Visible="false">
            <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" CssClass="EntryCell hideElement" />
      </asp:BoundField>
      <asp:BoundField DataField="Switch" ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Middle"  Visible="false">
      <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" CssClass="EntryCell hideElement" />
      </asp:BoundField>
      <asp:BoundField DataField="Page_Number" ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Middle"  HeaderText="Page">
           <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" CssClass="EntryCell" />
      </asp:BoundField>
      <asp:BoundField DataField="Name" ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Middle"  HeaderText="Title">
            <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" CssClass="EntryCell" />
      </asp:BoundField>
      <asp:TemplateField HeaderText="Access">
          <ItemTemplate>
               <asp:CheckBox runat="server" AutoPostBack="true" OnCheckedChanged="chkStatus_OnCheckedChanged" Checked='<%# Convert.ToBoolean(Eval("Access")) %>' ID="chkStatus" ClientIDMode="Static" />
           </ItemTemplate>
           <HeaderStyle HorizontalAlign="Center" />
           <ItemStyle HorizontalAlign="Center" />
       </asp:TemplateField>
   </Columns>
 </asp:GridView> 
```

我想将此 CheckBox 的 ID 更改为这样的值：

```
protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
{
    try
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            sp_GetPageAccess08_New_Result CurrentREcord = (sp_GetPageAccess08_New_Result)e.Row.DataItem;
            e.Row.Cells[4].FindControl("chkStatus").ID = "chkStatus_" + CurrentREcord.CityCode + "_" + CurrentREcord.Page_Number + "_" + CurrentREcord.Switch.ToString();
            if (CurrentREcord.Access == false)
            {
                e.Row.BackColor = System.Drawing.Color.FromArgb(252, 212, 243);
            }
        }
    }
    catch (Exception ex)
    {

    }
} 
```

问题是当我想`ID`进去`chkStatus`时`chkStatus_OnCheckedChanged`：

```
rotected void chkStatus_OnCheckedChanged(object sender, EventArgs e)
{
    try
    {
        CheckBox chk = sender as CheckBox;
        string ID = chk.ID; 
```

我怎样才能`ID`改变`chkStatus`？如果我无法将该字符串保存在可以进入的属性中`chkStatus_OnCheckedChanged`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:56:20.473

更正我的代码

在你的 OnRowDatabound 添​​加

```
((CheckBox)e.Row.Cells[4].FindControl("chkStatus")).Attributes.Add("MyData", string.Format("{0}_{1}_{2}", CurrentREcord.CityCode, CurrentREcord.Page_Number, CurrentREcord.Switch.ToString()); 
```

在您的复选框选中/取消选中事件中使用它来获取数据

```
string data = chkStatus.Attributes["myData"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:00:51.883

您可以使用 checkBox.Attributes.Add 方法将值存储在自定义属性中，还可以在 CheckBox 附近插入一个 HiddenField 控件，并将所需的值存储在其 Value 属性中（更好）。

# objective-c - 使用本地化字典值对 NSArray 进行排序

> ID：11306580
> 
> 赞同：1
> 
> 时间：2012-07-03T07:47:08.947
> 
> 标签：objective-c, cocoa, nsarray, nssortdescriptor

我可以使用这样的排序描述符轻松地对字典数组进行排序：

```
 NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"name"  ascending:YES]; 
```

但是我正在用本地化的字符串值填充一个表，这意味着该语言的排序不再正确。

除了用本地化值重建我的字典数组之外，还有没有办法配置排序描述符来做到这一点？

我想将不可变字典保留在本地语言中，以避免深度复制和处理可变元素。这些字典源自 JSON 表示，并且可以深入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T01:45:12.133

相反，您可以使用此方法：

```
- (id)initWithKey:(NSString *)key ascending:(BOOL)ascending comparator:(NSComparator)cmptr; 
```

在比较器块中，您可以获取两个字典的本地化键并进行比较：

```
NSComparator comparator= ^NSComparisonResult (id dict1, id dict2)
{
    NSString* str1=[dict1 objectForKey: @"name"];
    NSString* str2=[dict2 objectForKey: @"name"];
    NSString* localizedStr1= NSLocalizedString(str1,str1);
    NSString* localizedStr2= NSLocalizedString(str2, str2);
    return [localizedStr1 compare: localizedStr2];
}; 
```

# ios - Stocking UIImages 然后转换为电影

> ID：11306582
> 
> 赞同：1
> 
> 时间：2012-07-03T07:47:17.093
> 
> 标签：ios, video, uiimage, avfoundation, core-image

所以我一直在做一个视频捕捉项目，它允许用户捕捉图像和视频并应用过滤器。我正在使用 AVfoundation 框架，我成功地捕获了静止图像，并将视频帧捕获为 UIImage 对象......剩下的唯一事情就是录制视频。

这是我的代码：

```
- (void)initCapture {

    AVCaptureSession *session = [[AVCaptureSession alloc] init];
    session.sessionPreset = AVCaptureSessionPresetMedium;

    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

    NSError *error = nil;
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if (!input) {
        // Handle the error appropriately.
        NSLog(@"ERROR: trying to open camera: %@", error);
    }
    [session addInput:input];

    stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
    NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
    [stillImageOutput setOutputSettings:outputSettings];
    [session addOutput:stillImageOutput];

    captureOutput = [[AVCaptureVideoDataOutput alloc] init];
    captureOutput.alwaysDiscardsLateVideoFrames = YES; 

    dispatch_queue_t queue;
    queue = dispatch_queue_create("cameraQueue", NULL);
    [captureOutput setSampleBufferDelegate:self queue:queue];
    dispatch_release(queue);

    NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey; 

    NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA]; 

    NSDictionary* videoSettings = [NSDictionary dictionaryWithObject:value forKey:key]; 
    [captureOutput setVideoSettings:videoSettings];    

    [session addOutput:captureOutput]; 

    [session startRunning];    
}

- (void)captureOutput:(AVCaptureOutput *)captureOutput 
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
       fromConnection:(AVCaptureConnection *)connection 
{ 
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 

    CVPixelBufferLockBaseAddress(imageBuffer,0); 
    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer); 
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
    size_t width = CVPixelBufferGetWidth(imageBuffer); 
    size_t height = CVPixelBufferGetHeight(imageBuffer);  
        CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 
    CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    CGImageRef newImage = CGBitmapContextCreateImage(newContext); 

    CGContextRelease(newContext); 
    CGColorSpaceRelease(colorSpace);

    UIImage *image= [UIImage imageWithCGImage:newImage scale:1.0 orientation:UIImageOrientationRight];

    CGImageRelease(newImage);

    UIImage *ima = [filter applyFilter:image];

    /*if(isRecording == YES)
    {
        [imageArray addObject:ima];  
    }
     NSLog(@"Count= %d",imageArray.count);*/

    [self.imageView performSelectorOnMainThread:@selector(setImage:) withObject:ima waitUntilDone:YES];

    CVPixelBufferUnlockBaseAddress(imageBuffer,0);

   [pool drain];

} 
```

我尝试将 UIImages 存储在一个可变数组中，但这是一个愚蠢的想法。有什么想法吗？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:25:36.367

你在使用 CIFilter 吗？如果没有，也许您应该考虑使用它来实现基于 GPU 的快速转换。

您可能希望在生成相应图像后直接将其记录到 AVAssetWriter 中。查看 Apple 提供的 RosyWriter 示例代码，了解他们如何执行此操作。总之，他们利用 AVAssetWriter 将帧捕获到一个临时文件，然后在完成后将该文件存储到相机。

不过，一个警告是 RosyWriter 在我的第 4 代 iPod touch 上获得了 4fps。他们正在对 CPU 上的像素进行暴力更改。Core Image 执行基于 GPU 的过滤器，我能够达到 12fps，在我看来，这仍然不是应该的。

祝你好运！

# postgresql - Postgres客户端在创建新表时锁定

> ID：11306583
> 
> 赞同：15
> 
> 时间：2012-07-03T07:47:29.913
> 
> 标签：postgresql

我正在尝试在 postgres 中创建一个新表，但是当我这样做时，它只是在`CREATE TABLE`通话后挂起。

```
$ sudo usermod -s /bin/bash postgres
$ sudo su - postgres
postgres@host:~$ psql ranking_analytics
psql (8.4.8)
Type "help" for help.

ranking_analytics=# BEGIN;
BEGIN
ranking_analytics=# CREATE TABLE "about_contactmessage" (
ranking_analytics(#     "id" serial NOT NULL PRIMARY KEY,
ranking_analytics(#     "user_id" integer NOT NULL REFERENCES "auth_user" ("id") DEFERRABLE INITIALLY DEFERRED,
ranking_analytics(#     "subject" text NOT NULL,
ranking_analytics(#     "message" text NOT NULL,
ranking_analytics(#     "recorded_time" timestamp with time zone NOT NULL
ranking_analytics(# )
ranking_analytics-# ;
NOTICE:  CREATE TABLE will create implicit sequence "about_contactmessage_id_seq" for serial column "about_contactmessage.id" 
```

然后它会无限期地坐在这里直到我`CTRL-C`它。

数据库中还有其他表，但此表尚不存在：

```
ranking_analytics=# \d about_contactmessage
Did not find any relation named "about_contactmessage". 
```

我可以毫无问题地对数据库中的其他表进行插入和删除查询：

```
ranking_analytics=# insert into locations_continent (continent_name) VALUES ('testing');
INSERT 0 1
ranking_analytics=# delete from locations_continent where continent_name = 'testing';
DELETE 1 
```

机器上有足够的驱动器空间：

```
$ df -H
Filesystem             Size   Used  Avail Use% Mounted on
/dev/xvda               21G   2.3G    18G  12% /
devtmpfs               255M   132k   255M   1% /dev
none                   257M   476k   256M   1% /dev/shm
none                   257M    54k   257M   1% /var/run
none                   257M      0   257M   0% /var/lock 
```

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-03T08:03:25.377

如果重新启动 postgres 是一个选项，那么这很可能会解决问题，并且可以节省您花时间阅读此答案的其余部分:-)

检查`pg_stat_activity`视图，可能有其他一些事务阻止了架构更改。

```
select * from pg_stat_activity 
where 
wait_event_type is NULL and xact_start is not NULL order by xact_start; 
```

（pg_stat_activity 在每个主要的 pg 版本中都会有所改变，对于旧版本试试这个）：

```
select * from pg_stat_activity 
where 
not waiting and xact_start is not NULL order by xact_start; 
```

出现的第一行可能是导致问题的行。它通常是一个“空闲事务”——这很可能会持有锁，如果它是一个旧事务，它也可能会破坏性能。可能程序员忘记确保以“提交”或“回滚”结束事务，或者某些数据库会话由于网络问题而卡住。

要使用 pid 1234 终止事务，请使用`select pg_cancel_backend(1234);`，如果失败，请使用`select pg_terminate_backend(1234)`。通过 shell 访问，等效的命令是`kill -INT 1234`和`kill 1234`。（请记住，`kill -9 1234`这是一个非常糟糕的主意）。

还有一种观点`pg_locks`可以提供一些见解，尽管从中获得任何有用的信息可能并不容易。如果`granted`为真，则持有锁，如果`granted`为假，则表示查询正在等待锁。这里有更多关于如何从 pg_locks 中提取有用信息的提示：[http ://wiki.postgresql.org/wiki/Lock_Monitoring](http://wiki.postgresql.org/wiki/Lock_Monitoring)

如果其他一切都失败了，那么可能是时候采用简单的解决方案了，重新启动该数据库服务器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-05T14:27:50.340

这在此线程中进行了解释；[http://www.postgresql.org/message-id/75218696-61be-4730-89f6-dd6058fa9eda@a28g2000prb.googlegroups.com](http://www.postgresql.org/message-id/75218696-61be-4730-89f6-dd6058fa9eda@a28g2000prb.googlegroups.com)

根据汤姆·莱恩的说法，

此创建操作引用 auth_user 表，并且 PostgreSQL 应该向这两个表添加触发器。因此，如果有一个长时间运行的（可能是空闲的）打开事务在 auth_user 上持有 AccessShare 锁，则 Postgres 会被阻塞，等待该 xact 完成并释放其锁。其他一切都在 Create 后面排队。

那个 PostgreSQL Mail 线程很好读。

# jmeter - 如何解析 Jmeter 响应并发出新请求

> ID：11306584
> 
> 赞同：28
> 
> 时间：2012-07-03T07:47:30.980
> 
> 标签：jmeter

我正在使用 jMeter 来测试 Tomcat 应用程序。我需要解析 jMeter 响应并发出第二个请求。第一个响应如下所示：

```
<responseData class="java.lang.String">&lt;html&gt;&#xd;
&lt;body&gt;&#xd;
ERROR=0&#xd;
MSG=N/A&#xd;
FILELIST=1555;1340778737370;1526545487;&#xd;
VERSION=1.002&#xd;
URL=https://192.168.100.46/updserver/download?action=signature_download&amp;token=&#xd;
INTERVAL=0&#xd;
&lt;/body&gt;&#xd;
&lt;/html&gt;&#xd;
</responseData> 
```

我需要提取“FILELIST”和“URL”变量并将它们注入一个新的 URL：

```
https://192.168.100.46/updserver/download?action=signature_download&amp;token=1555;1340778737370;1526545487;&#xd; 
```

我知道有一些后处理器可以做到这一点，但不知道该怎么做。顺便说一句，第二个请求将从 Tomcat servlet 下载一些文件，有没有办法让 jMeter 只下载流但不写入物理文件？这样我就可以对我的 servlet 进行负载性能测试。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-03T10:57:56.007

好的，所以您已经知道如何从您的回复中提取 url，我在之前的回答中描述了如何：

[https://stackoverflow.com/a/11188349/169277](https://stackoverflow.com/a/11188349/169277)

但在这里，我将对此进行扩展。所以你有你的采样器，你已经得到了 $ `{url}`。现在您需要`FILELIST`并组装新的网址。

假设您已经有了请求和 url 提取器。添加一个新的`Regular expression extractor`.

`Right click on request sampler -> Post Processors -> Regular Expression Extractor`

```
Reference Name : FILELIST
Regular Expression : FILELIST=(\S+)
Template : $1$
Match No. (0 for Random): 1 
```

所以现在你有 1 个请求采样器和 2 个正则表达式提取器。您需要添加额外的后处理器才能组装新的 url。

`Right click on request sampler -> Post Processors -> BSF PostProcessor`

`beanshell`从语言下拉列表中选择，`Script language`然后在大字段中`Script:`粘贴：

```
vars.put("NEW_URL", "${__javaScript('${url}'.replace('&#xd;'\,'${FILELIST}'))}"); 
```

现在您必须`${NEW_URL}`在测试中进一步使用。

**解决问题的方法总是不止一种，这一个班轮看起来真的很丑，但它可以达到目的。**

在我的测试中，结果符合您的要求（调试采样器）：

```
url=https://192.168.100.46/updserver/download?action=signature_download&amp;token=&#xd;
FILELIST=1555;1340778737370;1526545487;&#xd;
NEW_URL=https://192.168.100.46/updserver/download?action=signature_download&amp;token=1555;1340778737370;1526545487;&#xd; 
```

**编辑 ：**

我想我不明白你如何命名你的变量。但最终结果是您在问题中描述的结果。请参阅附带工作示例的 .jmx 测试：

[http://www.filefactory.com/file/1q7nfitmh4qd/n/so_11309469_jmx](http://www.filefactory.com/file/1q7nfitmh4qd/n/so_11309469_jmx)

这是一个使用 2.6+ 版本的 jmeter 的 jmeter .jmx 文件

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T08:12:38.987

要[捕获](http://jmeter.apache.org/usermanual/regular_expressions.html)部分响应，请使用[正则表达式提取器](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)。

您可以使用 ViewResultsTree 侦听器在响应数据上测试您的正则表达式。只需在 ViewResultsTree 侦听器左侧面板底部的下拉框中选择 Regexp tester。

# jquery - 使用 fancybox 设置高度和宽度

> ID：11306587
> 
> 赞同：10
> 
> 时间：2012-07-03T07:47:33.740
> 
> 标签：jquery, fancybox

我是 j 查询的新手，这很酷，但我对如何使用以下代码为点击后生成的 iframe 添加宽度和高度一头雾水：所有建议都会很棒，提前感谢 Khadija

```
$(document).ready(function () {
    $(".fancybox").fancybox();
 })
 .height = '600px'; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-07-06T00:04:20.967

您必须将**autoSize**设置为 false

```
$(".fancybox").fancybox({'width':400,
                         'height':300,
                         'autoSize' : false}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T08:12:00.113

要为使用 iframe 初始化 fancybox 弹出窗口，限制为一定的宽度和高度，您至少需要三个参数：

**jQuery**

```
$(document).ready(function(){ 
  $(".fancybox").fancybox({
    'width'  : 600,           // set the width
    'height' : 600,           // set the height
    'type'   : 'iframe'       // tell the script to create an iframe
  });
}); 
```

[您可以在FancyBox API Page](http://fancybox.net/api)阅读所有关于可用选项的信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T07:52:28.753

尝试：

```
 $(document).ready(function () {
    $(".fancybox").fancybox({"width":400,"height":300});
 }) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-01T06:42:43.400

嘿使用下面给出的代码：

```
fancybox({
    afterLoad  : function () {
        $.extend(this, {
            aspectRatio : false,
            type    : 'html',
            width   : '90%',
            height  : '90%',
            content : '<div class="fancybox-image" style="background-image:url(' + this.href + '); background-size: cover; background-position:50% 50%;background-repeat:no-repeat;height:100%;width:100%;" /></div>'
        });
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-09T11:18:33.840

此代码设置花式动态@运行时的大小，只有您必须将高度和宽度与页面 url 一起传递给您要设置的对象

例如：demo.aspx //此语句调用您的主页中存在的精美函数

```
 window.parent.SetFancySizeDynamic(YourPageUrl,300,200)

  MainPage.aspx 
```

// 只需在您的主页面中添加此功能

```
 function SetFancySizeDynamic(fbHref, fbWidth, fbHeight) {

        $.fancybox({
            'padding': 0,
            'overlayColor': '#ccc',
            'type': 'iframe',
            'href': fbHref,
            'width': fbWidth,
            'height': fbHeight

        });
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-15T12:57:57.000

您需要将 autoSize 设置为 false，为我工作

$(".fancybox").fancybox({'width':400, 'height':300, 'autoSize' : false});

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-12T12:12:35.097

```
jQuery(function($){     
            $(document).ready(function() {
        $("#lightwindow").fancybox({
                    minWidth: 250,
                    width: 250,
                    minHeight: 500,
                    height: 500,
                    'autoScale': false,
                    'autoDimensions': false,
                    'scrolling'     : 'no',
                    'transitionIn'  : 'none',
                    'transitionOut' : 'none',
                    'type': 'iframe'                   
                });
            });
        }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-14T10:35:17.533

**使用 iframe**

```
 $(document).ready(function () {
        $(".fancybox").fancybox({
            width:600,
            height:400,
            type: 'iframe',
            href  : 'url_here'
       });
     }) 
```

**没有 iframe**

```
 $(document).ready(function () {
    $(".fancybox").fancybox({
        width:600,
        height:400,
        autoDimensions: false,
   });
 }) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-21T22:05:38.580

对我有用的唯一方法是在 iframe 上使用*preload = false ：*

```
$("[data-fancybox]").fancybox({
    iframe : {
        css : {
            height : '1000px',
        },
        preload : false
    },
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-04T07:29:26.130

**使用这个 CSS :)**

```
.fancybox-overlay .fancybox-skin {
   max-width: 900px !important;
   margin: auto;
}

.fancybox-overlay .fancybox-inner {
  max-width: 900px;
  margin: auto;
}

.fancybox-overlay .fancybox-skin {
   margin: auto;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-12T14:24:55.370

尝试修改或添加这一行：

`.fancybox-content{width:360px !important;height:400px !important;}`

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-02-21T11:36:18.347

如果您仍有问题

```
 width      = current.width,
            height     = current.height, 
```

在 jquery.fancybox.js 中修改它

# jquery - 将验证码检查添加到 jquery 表单中验证

> ID：11306588
> 
> 赞同：1
> 
> 时间：2012-07-03T07:47:36.137
> 
> 标签：jquery, jquery-validate

我正在使用 jquery 验证表单脚本，需要将其添加为验证码脚本。如果表单检查返回 true，那么我希望运行验证码脚本来控制用户输入的值。我怎样才能做到这一点？我的意思是我应该在哪里编写验证码检查脚本？谢谢。

表单验证如下：

```
$("#form1").validate({

    errorPlacement: function(error,element){                                          
            return true;
            }, 
    errorClass: "invalid"

}); 
```

验证码脚本如下：

```
$.post("post.php?"+$("#form1").serialize(), {

        }, function(response){

        if(response==1)
        {
            $("#after_submit").html('');
            $("#Send").after('<label class="success" id="after_submit">Your message has been submitted.</label>');
            change_captcha();
            clear_form();
        }
        else
        {
            $("#after_submit").html('');
            $("#Send").after('<label class="error" id="after_submit">Error ! invalid captcha code .</label>');
        }

    }); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-12T06:10:33.707

您可以在 submitHandler 中检查 recaptcha 代码。

```
$("#form1").validate({

    errorPlacement: function(error,element){                                          
            return true;
            }, 
    errorClass: "invalid",

    submitHandler: function() {
        //you can add the recaptcha code here
    }

}); 
```

如果所有验证都成功，那么控件将到达 submitHandler 并且您可以在那里检查您的 recaptcha 代码。

# java - 我如何创建一个带有变量 PeriodType 的 jodatime Period

> ID：11306591
> 
> 赞同：0
> 
> 时间：2012-07-03T07:47:43.357
> 
> 标签：java, jodatime

我有两个变量：

```
int duration;
PeriodType periodType; 
```

基于一些逻辑，我发现了 2 个 dateTimes 的差异，并且只想在 final 中存储天数、分钟数或小时数`period`。

如何创建一个周期对象，在运行时找到类型和相应的持续时间？

```
new Period(0, duration, periodType); 
```

返回一个包含所有字段 0 的句点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:53:16.643

如果***只想存储天、分钟或小时***

```
PeriodType.days();
PeriodType.minutes();
PeriodType.hours(); 
```

然后

```
final Period per = new Period().withField(periodType.getFieldType(0), duration); 
```

是你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:30:12.087

在这里，您使用的方法签名是

```
Period(long startInstant, long endInstant, PeriodType type) 
```

我想`duration`是毫秒（很长）

你必须使用这个

```
Period(long duration, PeriodType type) 
```

所以试试

```
new Period(duration, periodType); 
```

它应该工作

# regex - 正则表达式提取a的内容 标签

> ID：11306596
> 
> 赞同：4
> 
> 时间：2012-07-03T07:48:00.150
> 
> 标签：regex, vb.net, html

在这里有点大脑冻结，所以我希望得到一些指示，基本上我需要提取特定 div 标签的内容，是的，我知道正则表达式通常不被批准，但它是一个简单的网络抓取应用程序，其中没有嵌套的div。

我正在尝试匹配这个：

```
 <div class="entry">
  <span class="title">Some company</span>
  <span class="description">
  <strong>Address: </strong>Some address
    <br /><strong>Telephone: </strong> 01908 12345
  </span>
</div> 
```

简单的vb代码如下：

```
 Dim myMatches As MatchCollection
    Dim myRegex As New Regex("<div.*?class=""entry"".*?>.*</div>", RegexOptions.Singleline)
    Dim wc As New WebClient
    Dim html As String = wc.DownloadString("http://somewebaddress.com")
    RichTextBox1.Text = html
    myMatches = myRegex.Matches(html)
    MsgBox(html)
    'Search for all the words in a string
    Dim successfulMatch As Match
    For Each successfulMatch In myMatches
        MsgBox(successfulMatch.Groups(1).ToString)
    Next 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T08:01:39.733

您的正则表达式适用于您的示例。但是，应该进行一些改进：

```
<div[^<>]*class="entry"[^<>]*>(?<content>.*?)</div> 
```

`[^<>]*`表示“匹配除尖括号外的任意数量的字符”，确保我们不会意外跳出我们所在的标签。

`.*?`（注意`?`）表示“匹配任意数量的字符，但只匹配尽可能少的字符”。这样可以避免页面中从第一个标记到最后一个标记的匹配`<div class="entry">`。

但是您的正则表达式本身应该仍然匹配*一些东西*。也许你没有正确使用它？

我不了解 Visual Basic，所以这只是在黑暗中拍摄，但 RegexBuddy 建议采用以下方法：

```
Dim RegexObj As New Regex("<div[^<>]*class=""entry""[^<>]*>(?<content>.*?)</div>")
Dim MatchResult As Match = RegexObj.Match(SubjectString)
While MatchResult.Success
    ResultList.Add(MatchResult.Groups("content").Value)
    MatchResult = MatchResult.NextMatch()
End While 
```

我建议不要再采用正则表达式方法。如果你坚持，你最终会得到一个像下面这样的怪物正则表达式，它只有在`div`'s 内容的形式永远不会改变的情况下才会起作用：

```
<div[^<>]*class="entry"[^<>]*>\s*
<span[^<>]*class="title"[^<>]*>\s*
(?<title>.*?)
\s*</span>\s*
<span[^<>]*class="description"[^<>]*>\s*
<strong>\s*Address:\s*</strong>\s*
(?<address>.*?)
\s*<strong>\s*Telephone:\s*</strong>\s*
(?<phone>.*?)
\s*</span>\s*</div> 
```

或者（看看 VB.NET 中多行字符串的乐趣）：

```
Dim RegexObj As New Regex(
    "<div[^<>]*class=""entry""[^<>]*>\s*" & chr(10) & _
    "<span[^<>]*class=""title""[^<>]*>\s*" & chr(10) & _
    "(?<title>.*?)" & chr(10) & _
    "\s*</span>\s*" & chr(10) & _
    "<span[^<>]*class=""description""[^<>]*>\s*" & chr(10) & _
    "<strong>\s*Address:\s*</strong>\s*" & chr(10) & _
    "(?<address>.*?)" & chr(10) & _
    "\s*<strong>\s*Telephone:\s*</strong>\s*" & chr(10) & _
    "(?<phone>.*?)" & chr(10) & _
    "\s*</span>\s*</div>", 
    RegexOptions.Singleline Or RegexOptions.IgnorePatternWhitespace) 
```

（当然，现在您需要存储`MatchResult.Groups("title")`等的结果......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T07:50:09.883

~~尝试使用`RegexOptions.Multiline`而不是`RegexOptions.Singleline`~~

感谢@Tim 指出上述方法不起作用……我的错。

@Tim 的答案是一个很好的答案，应该是公认的答案，但是阻止您的代码工作的额外部分是没有第二组`Group(1)`可以返回。

改变...

```
MsgBox(successfulMatch.Groups(1).ToString) 
```

到...

```
MsgBox(successfulMatch.Groups(0).ToString) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:59:10.877

用这个

```
<div.*?class=""entry"".*?>(?<divBody>.*)</div> 
```

并获得名为*divBody 的组*

*但请注意，如果字符串包含其他节点div*（并且似乎无法通过正则表达式解决此问题），这将不起作用。对于您的解决方案，**xslt**可能很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-13T03:51:44.640

真是好文章。请参阅以下来自 eclipse 的附加结果 [![在此处输入图像描述](../Images/d9a817e9fa9a6abdfc5341f158346f63.png)](https://i.stack.imgur.com/nOjK0.png)

# iphone - 更改按钮的外观 - iPhone

> ID：11306597
> 
> 赞同：1
> 
> 时间：2012-07-03T07:48:19.553
> 
> 标签：iphone, objective-c, cocoa

我想用两个图像更改按钮的外观，一个是正常状态，另一个是选择时突出显示/选定状态，但我不知道如何，我试过这个：

```
 UIImage *buttonImage_Home = [UIImage imageNamed:@"upload.png"];

   UIImage *stretchableButtonImageNormal = [buttonImage_Home stretchableImageWithLeftCapWidth:12 topCapHeight:0];

   UIButton *homeButton = (UIButton *)[self.view viewWithTag:2];

   [homeButton setBackgroundImage:stretchableButtonImageNormal forState:UIControlStateNormal]; 
```

它有效，但如果按下/触摸我不知道如何添加第二张图片，请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:53:31.527

您可以根据自己的要求使用这些。

```
UIControlStateNormal 
UIControlStateHighlighted                 // used when UIControl isHighlighted is set
UIControlStateDisabled  
UIControlStateSelected 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:50:42.987

同样的方式，但对于状态`UIControlStateHighlighted`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:51:35.763

您应该为突出显示状态设置图像。例如：

```
[homeButton setBackgroundImage:pressedImage forState:UIControlStateHighlighted] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T07:51:37.790

你必须使用`UIControlStateHighlighted`

```
[homeButton setBackgroundImage:stretchableButtonImageHighlighted forState:UIControlStateHighlighted]; 
```

# memory-leaks - 使用复杂模型结构时何时调用 Backbone.Relational.store.unregister()

> ID：11306598
> 
> 赞同：4
> 
> 时间：2012-07-03T07:48:22.583
> 
> 标签：memory-leaks, backbone.js, backbone-relational

我有一个使用 Backbone Relation 构建的应用程序，它像疯了一样泄漏内存。据我了解，这是因为我从未在我的模型上调用 Backbone.Relational.store.unregister()，导致它们永远保存在商店中。

数据模型相当深，包含许多相互关联的类，我或多或少地不断获取与不断变化的过滤器匹配的模型树。然而，单个模型的所有权尚不清楚，因为它们也可能被应用程序的其他部分使用，而不是最初获取它们的部分。

我应该什么时候注销模型？在阅读了 Backbone Relational 的源代码后，我可以看到 unregister() 在“销毁”时被调用，但因为我从不删除模型，所以这是不行的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:11:36.213

您可能应该多描述一下您的设置。您一般如何管理和访问您的模型？你有应用程序范围的单例集合吗？

我们通过将取消注册绑定到集合的`remove`事件解决了这个问题。如果有效果，那么模型只有在它们是集合的一部分时才具有关系。从集合中删除模型后，将其丢弃。这可能适合您，也可能不适合您，具体取决于您的应用程序的架构。

**旁注：** 我已经放弃了 Backbone.Relational，因为根据我的经验，它非常危险。当你开始使用它时，它就像一个魅力，但很容易在你的脸上开枪。就像你看起来一样。而且由于它的设计鼓励您将其与应用程序代码的各个方面紧密结合，因此摆脱它可能非常困难。

# upshot - 子实体中的结果 js 更改跟踪

> ID：11306599
> 
> 赞同：1
> 
> 时间：2012-07-03T07:48:24.417
> 
> 标签：upshot, single-page-application

我在 .NET 中定义了以下模型：

```
 Public Class Request
  <Key()>
  Public Property RequestId As String
  Public Property Description As String
  Public Property InfoCards As List(Of InfoCard)
End Class

Public Class InfoCard
  <Key()>
  Public Property InfocardId As String
  Public Property Description As String
  Public Property RequestId As String
End Class 
```

InfoCard 上的*ReqeuestId*属性使 EF Code First 可以生成数据库。然后我使用`UpshotContext`帮助器生成 JavaScript 模型，如下所示：

```
Html.UpshotContext(bufferChanges:= true) _
  .DataSource(Of UpshotTest.UpshotTest.RequestController)(Function(x) x.GetRequests()) _
  .ClientMapping(Of UpshotTest.Models.Request)("Request") _
  .ClientMapping(Of UpshotTest.Models.InfoCard)("InfoCard") 
```

这很好地生成了所有模型，当我调用`refresh`结果数据源时，数据按预期检索。

我面临的**问题**`Request.InfoCards(0).Description`是当我尝试修改子对象（eq ）的属性时。更改该值将触发 中的更改`InfoCard`，但不会触发`Request`实体中的更改。因此，调用`Request.IsUpdated()`将返回***false***，而调用`Request.InfoCards(0).IsUpdated()`将返回***true***。

upshot 不知道如何跟踪子实体的变化吗？还是客户端的映射有问题？到目前为止，我已经尝试了几种映射：

*   手动映射所有属性：

    ```
    window.Request = function (initialData) {
        var self = this;
        self.RequestId = ko.observable(initialData.RequestId);
        self.Description = ko.observable(initialData.Description);
        self.InfoCards = ko.observableArray(ko.utils.arrayMap(initialData.InfoCards, function (data) {
           return new window.InfoCard(data);
        }));

        upshot.addEntityProperties(self, "Request:#UpshotTest.Models");
    }; 
    ```

*   使用`upshot.map`：

    ```
    window.Request = function (initialData) {
        var self = this;
        upshot.map(initialData, upshot.type(Request), self);
    }; 
    ```

*   定义我自己的*地图*函数并将其传递给结果：

    ```
    window.Request = function (initialData) {
        var self = this;
        upshot.observability.configuration.map(initialData, upshot.type(Request), map, self);
    }; 
    ```

所有方法的映射似乎都是正确的，除了父实体不知道在其子实体中所做的修改。儿童跟踪甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:27:09.187

好的，我最后找到了问题。事实证明，当存在 3 个嵌套实体的层次结构时（即*Request -> InfoCard -> InfoField* ），此行为是可重现的。修改 InfoField 的值*并未*反映在父实体中。

经过几个小时的结果调试，我发现罪魁祸首是**upshot.js**`_addTrackingRecursive`中的方法。替换调用以解决嵌套更改跟踪问题。**`obs.track(obj, this._getTracker(), this._entityType);``obs.track(obj, this._getTracker(), type);`**

# c# - C#中的堆错误

> ID：11306602
> 
> 赞同：1
> 
> 时间：2012-07-03T07:48:30.493
> 
> 标签：c#, c++, dll, heap-memory

我有一个 C# 程序来测试 C++/CLI 程序集（该程序集是本机 C++ dll 的包装器），我收到以下错误消息：

```
Unhandled exception at 0x50f8fd85 (msvcr90d.dll) in TestKeyManagerApp.exe: 0xC0000005:     Access violation writing location 0x00000000. 
```

调试模式的最后位置：dbgheap.c（Visual Studio 2008 输出）

```
if (pHead == NULL)
{
    *errno_tmp = ENOMEM; <----- ACCESS VIOLATION
    RTCCALLBACK(_RTC_FuncCheckSet_hook,(1));
} 
```

我创建了一次程序集类的对象（我的 C# 程序的私有成员），在构造函数中我加载了本机 C++ dll，现在如果我第二次使用程序集对象（第二次调用测试函数）我收到了这个错误消息！

调用堆栈的输出：

```
msvcr90d.dll!_heap_alloc_dbg_impl(unsigned int nSize=532, int nBlockUse=2, const char * szFileName=0x50ec24a8, int nLine=588, int * errno_tmp=0x00000000)  Line 431 + 0x3 bytes C++

msvcr90d.dll!_nh_malloc_dbg_impl(unsigned int nSize=532, int nhFlag=0, int nBlockUse=2, const char * szFileName=0x50ec24a8, int nLine=588, int * errno_tmp=0x00000000)  Line 239 + 0x19 bytes   C++

msvcr90d.dll!_calloc_dbg_impl(unsigned int nNum=1, unsigned int nSize=532, int nBlockUse=2, const char * szFileName=0x50ec24a8, int nLine=588, int * errno_tmp=0x00000000)  Line 593 + 0x20 bytes   C++

msvcr90d.dll!_getptd_noexit()  Line 588 + 0x1a bytes    C

msvcr90d.dll!_errno()  Line 281 + 0x5 bytes C

msvcr90d.dll!_calloc_dbg(unsigned int nNum=1, unsigned int nSize=532, int nBlockUse=2, const char * szFileName=0x50ec20a4, int nLine=373)  Line 646 + 0x11 bytes    C++

msvcr90d.dll!__CRTDLL_INIT(void * hDllHandle=0x50ec0000, unsigned long dwReason=2, void * lpreserved=0x00000000)  Line 373 + 0x18 bytes C

msvcr90d.dll!_CRTDLL_INIT(void * hDllHandle=0x50ec0000, unsigned long dwReason=2, void * lpreserved=0x00000000)  Line 214 + 0x11 bytes  C

ntdll.dll!77c68968()    
[Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll]
ntdll.dll!77c73820()    
ntdll.dll!77c735bc() 
```

我希望你能给我一些提示或提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:06:53.643

检查调用堆栈，特别是非托管堆栈。为此，您必须启用非托管代码调试。这可能是虚假的删除或危险/无效的指针访问。通过最小化本机 DLL 调用来缩小问题范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:53:49.193

错误的潜在原因：

*   指针`errno_tmp`可能指向已删除的内存，或指向数组边界之外（-ve 索引或索引 >= 长度）。

*   使用了无效`P\Invoke`的，或加载的程序集已被`free`

# asp.net - 在 Lightswitch 中创建的不需要的表

> ID：11306606
> 
> 赞同：0
> 
> 时间：2012-07-03T07:48:41.187
> 
> 标签：asp.net, visual-studio-lightswitch

我正在创建一个简单的 Lightswitch 应用程序，最近它开始在我的数据库中创建其他表和视图。

它创建以下表格：

*   aspnet_Applications
*   aspnet_Membership
*   aspnet_Profile
*   aspnet_Roles
*   aspnet_SchemaVersions
*   aspnet_Users
*   aspnet_UsersInRoles

交易是我不在我的应用程序中使用任何类型的身份验证，而是使用静态数据库登录来处理数据。可以避免创建这些表吗？他们的创作是自发开始的，没有他们一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:15:56.070

我假设您使用的是*附加数据库*？以下评论假设您是。

如果您使用的是 LS 2011，那么在某个阶段，您必须将*部署向导*指向您附加的同一数据库，而不是让它为其*内在*数据创建一个新数据库。

如果您使用的是 LS 2012 的 RC，那么我记得听说有某种错误涉及创建 asp_* 表。这应该在 LS 2012 的 RTM（最终）版本中得到修复。

# css - dir_rtl 不覆盖

> ID：11306607
> 
> 赞同：0
> 
> 时间：2012-07-03T07:48:44.533
> 
> 标签：css

我有一个英文版自定义菜单的背景图像，它可以正常工作（这应该是顶层，所以我做了位置：相对）

```
 #custommenu {
background-image: url([[pix:theme|header]])  ;
position:relative;
left:-18px;
top:-8px;
background-repeat: no-repeat;
width: 997px;
height: 57px;
padding: 0;} 
```

在 rtl.css 中我无法将图像向右移动

```
.dir-rtl#custommenu {
 float:right;
 right:-34px; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:56:46.697

嗨，我应该删除`float:right;`

像这样

```
.dir-rtl#custommenu {
 right:-34px;
} 
```

# magento - Magento getAttributeText（）在shell脚本中不起作用

> ID：11306608
> 
> 赞同：1
> 
> 时间：2012-07-03T07:49:02.630
> 
> 标签：magento

我有以下代码来遍历所有产品并回显 sku 和制造商，但 $manu 始终为空白，即使我确实正确获取了 sku。

```
private function organize() {
    $products = Mage::getModel('catalog/product')->getCollection();
    foreach ($products as $product) {
        $sku = $product->getSku();
        $manu = $product->getAttributeText('manufacturer');
        // The following also doesn't work
        //$manu = $product->getResource()->getAttribute('manufacturer')->getFrontend()->getValue($product);
        echo $sku." - ".$manu."\n";
    }
} 
```

这是作为从 Mage_Shell_Abstract 扩展的命令行脚本运行的

我的代码可能有什么问题？

大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T01:39:27.400

我更喜欢@Tim 的评论（当然是他的功劳），因为我们不需要再加载产品（当我们从我们的集合中执行 foreach 时它会自动加载）

制造商属性不会自动选择，因为它没有存储在主表 ( `catalog_product_entity`) 中。

```
$products = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSelect('manufacturer'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T08:11:07.493

在此处遍历集合时，不加载 EAV 属性。试试这个：

```
$products = Mage::getModel('catalog/product')->getCollection();
    foreach ($products->getAllIds() as $productId) {
        $product = Mage::getModel('catalog/product');
        $product->load($productId);
        $sku = $product->getSku();
        $manu = $product->getAttributeText('manufacturer');
        echo $sku." - ".$manu."\n";
    } 
```

# c# - NHibernate在没有集合的子表中映射ParentId

> ID：11306611
> 
> 赞同：0
> 
> 时间：2012-07-03T07:49:15.453
> 
> 标签：c#, nhibernate, nhibernate-mapping, one-to-many

我对 nHibernate 很陌生，我正在尝试创建我认为应该是一个相对简单的映射，使用 XML 不流利的 nHibernate，如下所示：

在我的数据库中：

用户表

```
 [Id] int IDENTITY(1,1)
, [Username] varchar(250) NOT NULL 
```

.. ETC

组织表

```
 [Id] int IDENTITY(1,1)
, [Name] varchar(500) NOT NULL
, [MainContactId] int NOT NULL
, [Sector] nvarchar(1000) NULL 
```

MainContactId 引用 User 表中的用户。

在我的对象模型中，我有一个用户类和一个组织类，我想要的只是在组织类上有一个属性，如下所示：

```
public class Organisation
{
  ...
  public User MainContact { get; set; }
  ...
} 
```

我不想在引用组织的用户类上有一个集合，因为到目前为止我读过的每一篇文章似乎都有——这肯定是可能的和简单的吗？

提前致谢，

杰米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:12:08.950

您需要[`many-to-one`](http://www.nhforge.org/doc/nh/en/index.html#mapping-declaration-manytoone)为此进行映射。

```
<class name="Organisation" table="Organisation">
    <!-- ... -->
    <many-to-one name="MainContact" column="MainContactId" />
    <!-- ... -->
</class> 
```

[Ayende](http://ayende.com/blog/)有一篇关于`many-to-one`映射的好文章：[NHibernate Mapping -`<many-to-one />`](http://ayende.com/blog/3938/nhibernate-mapping-many-to-one)。

# c# - 使用 XMLReader 将 XMLData 保存到列表

> ID：11306614
> 
> 赞同：0
> 
> 时间：2012-07-03T07:49:21.587
> 
> 标签：c#, xml, list, xmlreader

我在 C# 中遇到了 XMLReader 的问题。

我得到了这个代码：

```
private void countryXMLReader ()
        {
            XmlTextReader reader = new XmlTextReader("expenses.xml");
            List<string> twentyFour = new List<string>();
            while (reader.Read())
            {

                if (reader.Name.Equals("_24h"))
                {
                    twentyFour.Add(reader.Value);
                }

                if (reader.Name == "_14h")
                {
                    //MessageBox.Show(reader.Name);
                }

            }
        } 
```

这是我的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<expenses>
    <country>
        <name>Germany</name>
        <ID>D</ID>
        <_24h>42</_24h>
        <_14h>28</_14h>
        <_8h>14</_8h>
        <overnight>100</overnight>
    </country>
    <country>
        <name>India</name>
        <ID>IND</ID>
            <_24h>30</_24h>
            <_14h>20</_14h>
            <_8h>10</_8h>
            <overnight>120</overnight>
    </country>
</expenses> 
```

ListItems 已添加到列表中，但 reader.Value 始终为空。

我怎样才能让它工作？

非常感谢

托比

编辑：

现在我得到了以下代码：

私人无效国家XMLReader（）{列表二十四=新列表（）；

```
 XDocument doc = XDocument.Load(@"C:\Users\Bl!tz\Documents\Visual Studio 2010\Projects\MBG.SimpleWizard\Demo\bin\Debug\expenses.xml");
        twentyFour.AddRange(doc
                          .Elements("expenses")
                          .Descendants("country")
                          .Descendants("_24h")
                          .Select(i => i.Value)
                          .ToList());
    } 
```

但它并没有真正得到价值。

我的问题是什么？

编辑2：

这是我使用的代码：

```
private void countryXMLReader ()
        {
            List<string> twentyFour = new List<string>();

            XDocument doc = XDocument.Load(@"expenses.xml");
            twentyFour.AddRange(doc
                              .Elements("expenses")
                              .Descendants("country")
                              .Descendants("name")
                              .Descendants("ID")
                              .Descendants("_24h")
                              .Descendants("_14h")
                              .Descendants("_8h")
                              .Descendants("overnight")
                              .Select(i => i.Value)
                              .ToList());
        } 
```

但 List.Count 保持在 0。我这样称呼这个方法：

```
public Page1()
        {
            InitializeComponent();
            countryXMLReader();
        } 
```

我还用一个按钮对其进行了测试，但结果相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:02:51.790

试试这个使用 XmlDocument 和 XPath 表达式的代码：

```
 string s = "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><expenses>    <country>        <name>Germany</name>        <ID>D</ID>        <_24h>42</_24h>        <_14h>28</_14h>        <_8h>14</_8h>        <overnight>100</overnight>    </country>    <country>        <name>India</name>        <ID>IND</ID>            <_24h>30</_24h>            <_14h>20</_14h>            <_8h>10</_8h>            <overnight>120</overnight></country></expenses>";

        XmlDocument doc = new XmlDocument();
        doc.LoadXml(s);

        XmlNode rootNode = doc.SelectSingleNode(@"/expenses");
        var nodes24 = rootNode.SelectNodes(@"country/_24h");
        var nodes14 = rootNode.SelectNodes(@"country/_14h");

        List<string> twentyFour = new List<string>();
        twentyFour.AddRange(nodes24
                            .Cast<XmlNode>()
                            .Select(i => i.InnerText)
                            .ToArray()); 
```

您还可以尝试 System.Xml.Linq 方法，该方法是推荐的，比 XmlDocument 更新，但需要高于 3.0 的 NET 版本：

```
 List<string> names = new List<string>();
        List<string> twentyFour = new List<string>();
        List<string> fourteen = new List<string>();

        XDocument doc = XDocument.Load(@"expenses.xml");

        var elements = doc
          .Root
          .Descendants("country");

        names.AddRange(elements
                            .Descendants("name")
                            .Select(i => i.Value)
                            .ToList());

        twentyFour.AddRange(elements
                            .Descendants("_24h")
                            .Select(i => i.Value)
                            .ToList());

        fourteen.AddRange(elements
                            .Descendants("_14h")
                            .Select(i => i.Value)
                            .ToList());

        // You can process each country element individually like this
        foreach (XElement el in elements)
        {
            string name = el.Element("name").Value;
            string _24h = el.Element("_24h").Value;
            string _14h = el.Element("_14h").Value;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:13:28.797

`XmlReader`用于给出正在使用的元素内容的字符串值`ReadElementContentAsString()`。

代替

```
twentyFour.Add(reader.Value); 
```

利用

```
twentyFour.Add(reader.ReadElementContentAsString()); 
```

# maven - flex4 maven compile,TypeError: Error #1007: 在非构造函数上尝试实例化，AdvancedDataGrid

> ID：11306616
> 
> 赞同：0
> 
> 时间：2012-07-03T07:49:34.347
> 
> 标签：maven, apache-flex, flex4, advanceddatagrid

有多个模块项目，A是应用程序，B，C，D是模块。编译成功，但是当我加载模块B时，弹出错误：

```
TypeError: Error #1007: Instantiation attempted on a non-constructor.
    at mx.controls.dataGridClasses::DataGridHeader/updateDisplayList()
    at mx.core::UIComponent/validateDisplayList()
    at mx.managers::LayoutManager/validateClient()
    at mx.core::UIComponent/validateNow()
    at mx.controls.dataGridClasses::DataGridBase/updateDisplayList()
    at mx.controls::DataGrid/updateDisplayList()
    at mx.controls.listClasses::ListBase/validateDisplayList()
    at mx.managers::LayoutManager/validateDisplayList()
    at mx.managers::LayoutManager/doPhasedInstantiation()
        at mx.managers::LayoutManager/doPhasedInstantiationCallback() 
```

经过研究得到一些文件： [http://blog.flexicious.com/post/Error-Instantiation-attempted-on-a-non-constructor.aspx](http://blog.flexicious.com/post/Errror-Instantiation-attempted-on-a-non-constructor.aspx) 看来我只需要将特殊样式编译到我的应用程序中。我做到了（A引用了样式文件）编译成功，运行，依然存在错误。我想也许应用程序无法将 css 编译为 swf，所以我将一些编译 css 脚本添加到 maven pom.xml

```
<buildCssFiles>
  <path>styles/temp.css</path>
</buildCssFiles> 
```

仍然弹出错误。

有没有人遇到同样的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:22:40.907

一般解决方案，第一步：将特殊样式脚本添加到样式文件中。

```
mx|AdvancedDataGrid{
    columnDropIndicatorSkin: ClassReference("mx.skins.halo.DataGridColumnDropIndicator");
    columnResizeSkin: ClassReference("mx.skins.halo.DataGridColumnResizeSkin");
    headerColors: #FFFFFF, #E6E6E6;
    headerDragProxyStyleName: "headerDragProxyStyle";
    headerBackgroundSkin: ClassReference("mx.skins.halo.DataGridHeaderBackgroundSkin");
    headerSeparatorSkin: ClassReference("mx.skins.halo.DataGridHeaderSeparator");
    headerHorizontalSeparatorSkin: ClassReference("mx.skins.halo.AdvancedDataGridHeaderHorizontalSeparator");
    headerStyleName: "advancedDataGridStyles";
    sortArrowSkin: ClassReference("mx.skins.halo.DataGridSortArrow");
    stretchCursor: Embed(source="Assets.swf",symbol="cursorStretch");
}

mx|AdvancedDataGridSortItemRenderer{
    paddingTop: 0;
    paddingBottom: 0;
    paddingLeft: 0;
    paddingRight: 0;
    horizontalGap: 0;
    color: #0B333C;
    icon: ClassReference("mx.skins.halo.DataGridSortArrow");
}

mx|PrintAdvancedDataGrid{
    alternatingItemColors: #FFFFFF, #FFFFFF;
    borderColor: 0;
    columnResizeSkin: ClassReference("mx.skins.halo.DataGridColumnResizeSkin");
    headerColors: #FFFFFF, #FFFFFF;
    headerSeparatorSkin: ClassReference("mx.skins.halo.DataGridHeaderSeparator");
    headerStyleName: "advancedDataGridStyles";
    horizontalGridLineColor: 0;
    horizontalGridLines: true;
    sortArrowSkin: ClassReference("mx.skins.halo.DataGridSortArrow");
    stretchCursor: Embed(source="Assets.swf",symbol="cursorStretch");
    verticalGridLineColor: #000000;
}

mx|PrintOLAPDataGrid{
    alternatingItemColors: #FFFFFF, #FFFFFF;
    borderColor: 0;
    columnResizeSkin: ClassReference("mx.skins.halo.DataGridColumnResizeSkin");
    headerColors: #FFFFFF, #FFFFFF;
    headerSeparatorSkin: ClassReference("mx.skins.halo.DataGridHeaderSeparator");
    headerStyleName: "advancedDataGridStyles";
    horizontalGridLineColor: 0;
    horizontalGridLines: true;
    stretchCursor: Embed(source="Assets.swf",symbol="cursorStretch");
    verticalGridLineColor: #000000;
} 
```

第 2 步：将脚本添加到 pom.xml

```
<compilerWarnings>
    <show-unused-type-selector-warnings>false</show-unused-type-selector-warnings>
</compilerWarnings> 
```

# php - PHP: mongoDB - 迭代处理

> ID：11306618
> 
> 赞同：0
> 
> 时间：2012-07-03T07:49:44.217
> 
> 标签：php, mongodb

逐行运行的最佳实践是什么，没有排序/排序/分组。

我将阅读每一行，更新这一行，然后继续下一行等。

不读之前不能直接更新。是否有一种真正有效的方式来“逐个文档”地浏览集合？

文档数量在 150Mio 左右，我希望有一个快速的功能来处理这个任务。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:22:53.473

除非您对每个文档进行完全相同的更新，否则您必须逐行运行此操作。当然，您可以使用多个线程/进程来更新所有文档。只要确保在这种情况下没有文件被更新两次。

# java - 如何在java中将字符串转换为字符串数组

> ID：11306622
> 
> 赞同：-6
> 
> 时间：2012-07-03T07:50:09.680
> 
> 标签：java

如何使用 Split() 方法，这样我就可以避免空格。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T07:51:13.637

首先 trim() 你的 String 然后应用 split() 方法。

我认为你的字符串末尾有空格，所以首先修剪你的字符串以删除空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T09:11:10.860

首先用空白字符串替换所有空格，然后将其拆分为字符串数组。

```
 public static void main(String[] args)
  {
     String test = "This is an example";
     String[] array = test.replaceAll(" ","").split("(?!^)");
     for (String letter : array)
     {
         System.out.print(letter+ " ");
     }
  } 
```

输出如下：

> 这个例子

# sql-server - 使用 between 子句搜索逗号分隔值

> ID：11306629
> 
> 赞同：-2
> 
> 时间：2012-07-03T07:51:01.380
> 
> 标签：sql-server, csv, where-clause, between

我有一个名为 的表`dayofweek`，其中数据以以下格式存储，逗号分隔。

```
 id friday       saturday     sunday     monday   tuesday    winsday

   1  02:00,3:09   1:12,2:9     3:08,4:08  3:3,3:45  12:3,3:2   2:3,5:6,7:3,6:9
   ...
    ...
    .... 
```

现在我想在“星期五”搜索“02:30”可用的 id。简单地说，我想写一个这样的查询：

`SELECT ID FROM dayofweek WHERE day='friday' AND time in 'commaseparatedfirstvalue' and 'comma separated second value'`

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:57:00.557

恐怕您将不得不编写自己的 SQL 函数，该函数采用时间范围 '，例如 - 02:00,3:09' 并将返回范围的开头和范围的结尾，例如，让我们假设它们被称为 begin_range 和 end_range。
您的 SQL 查询将如下所示：

```
select id from dayofweek where  '02:30' >= begin_range(friday) and '02:30' <= end_range(friday); 
```

# regex - 现代正则表达式引擎可以解析什么样的形式语言？

> ID：11306641
> 
> 赞同：27
> 
> 时间：2012-07-03T07:52:24.437
> 
> 标签：regex, computer-science, formal-languages

在这里，人们有时会说“你不能用正则表达式解析 X，因为 X 不是正则语言”。然而，据我了解，现代正则表达式引擎可以匹配的不仅仅是[乔姆斯基意义上的](http://en.wikipedia.org/wiki/Chomsky_hierarchy)正则语言。我的问题：

给定一个支持的正则表达式引擎

*   反向引用
*   无限宽度的环视断言
*   递归，比如`(?R)`

它可以解析什么样的语言？它可以解析任何上下文无关的语言吗？如果不能，反例是什么？

（准确地说，“解析”的意思是“构建一个单一的正则表达式，它将接受由语法 X 生成的所有字符串并拒绝所有其他字符串”）。

补充：我特别有兴趣看到现代正则表达式引擎（Perl、Net、python 正则表达式模块）无法解析的上下文无关语言的示例。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-08T11:06:51.507

我最近写了一篇关于这个主题的相当长的文章：[正则表达式的真正力量](http://nikic.github.com/2012/06/15/The-true-power-of-regular-expressions.html)。

总结一下：

*   支持递归子模式引用的正则表达式可以匹配*所有*上下文无关语言（例如`a^n b^n`）。
*   带有环视断言和子模式引用的正则表达式至少可以匹配*一些*上下文相关的语言（例如`ww`和`a^n b^n c^n`）。
*   如果断言具有无限宽度（如您所说），则可以匹配*所有上下文相关的语法。*我不知道任何正则表达式风格，尽管它对后视没有固定宽度的限制（同时支持子模式引用）。
*   具有反向引用的正则表达式是 NP 完全的，因此任何其他 NP 问题都可以使用正则表达式来解决（在应用多项式时间变换之后）。

一些例子：

*   匹配上下文无关语言`{a^n b^n, n>0}`：

    ```
    /^(a(?1)?b)$/
    # or
    /^ (?: a (?= a* (\1?+ b) ) )+ \1 $/x 
    ```

*   匹配上下文相关语言`{a^n b^n c^n, n>0}`：

    ```
    /^
        (?=(a(?-1)?b)c)
        a+(b(?-1)?c)
    $/x
    # or
    /^ (?: a (?= a* (\1?+ b) b* (\2?+ c) ) )+ \1 \2 $/x 
    ```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-05T19:54:15.117

现代正则表达式引擎当然可以解析比常规语言集更大的语言集。这么说，四个经典的乔姆斯基集都没有被正则表达式准确识别。正则表达式清楚地识别所有常规语言。有一些经典的上下文无关语言无法被正则表达式识别，例如平衡括号语言`a^n b^n`，除非有计数的反向引用可用。但是，正则表达式可以解析`ww`上下文相关的语言。

实际上，形式语言理论中的正则表达式与正则表达式的关系不大。在最一般的情况下，匹配具有无限反向引用的正则表达式是 NP-Complete 的，因此所有足够强大的正则表达式的模式匹配算法都是指数的，至少在一般情况下是这样。然而，对于大多数输入来说，大多数时候它们都非常快。众所周知，匹配上下文无关语言最多比 快`n^3`，因此正则表达式中有一些语言不是上下文无关的（如`ww`），但并非所有上下文无关语言都可以被正则表达式解析。0 型语言通常是不可判定的，子正则表达式无法到达那里。

因此，作为一个不是很确定的结论，正则表达式可以解析广泛的语言集，包括所有常规语言，以及一些上下文无关和上下文敏感的语言，但它并不完全等于任何这些语言集。还有其他类别的语言和其他分类法，您可以在其中找到更准确的答案，但是没有任何分类法将上下文无关语言作为语言层次结构中的适当子集包含在正则表达式中，因为正则表达式无法准确识别单一语言仅在某些部分与上下文无关语言相交，两者都不是另一个的适当子集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T07:48:14.470

您可以在*[Ralph W. Fasold、Jeff Connor-Linton P.477 的《语言和语言学概论》中了解正则表达式](http://books.google.com/books?id=dlzthEZGkmsC&pg=PA477#v=onepage&q&f=false)*

**乔姆斯基层次结构**：

类型0 >= 类型1 >= 类型2 >= 类型3

计算语言学主要以类型 2 和 3 语法为特征

•*类型 3 语法*：

– 包括**正则表达式**和有限状态自动机（又名有限状态机）

——本次演讲的重点

•*类型 2 语法*：

--常用于自然语言解析器

– 用于在许多语言理论中对句法结构进行建模（通常由其他机制补充）

——我们将在下一次关于解析的演讲中发挥关键作用。

* * *

大多数具有相互关系链接的 XML（如[Microsoft DGML](http://en.wikipedia.org/wiki/DGML)（有向图标记语言））都是 Regex 无用的示例。

* * *

这三个答案可能有用：

1 -[环顾四周影响哪些语言可以通过正则表达式匹配](https://stackoverflow.com/questions/2974210/does-lookaround-affect-which-languages-can-be-matched-by-regular-expressions/2991587#2991587)

2 -[正则表达式-arent](https://cstheory.stackexchange.com/questions/448/regular-expressions-arent)

3 -[在哪里做最多的正则表达式实现落在复杂性规模上](https://cstheory.stackexchange.com/questions/1047/where-do-most-regex-implementations-fall-on-the-complexity-scale)

# c# - 对应 SQL 查询的 LINQ 查询

> ID：11306647
> 
> 赞同：1
> 
> 时间：2012-07-03T07:52:40.443
> 
> 标签：c#, linq, entity-framework, entity-framework-4, linq-to-entities

基本上我有三个表用户角色和具有多对多关系的 USerRoles 以及部门表。所以当我在 .edmx 上导入这些时，我只得到两个实体。所以我在两个实体中都有导航属性。我有三个用户和两个角色（管理员和只读）。. 下面是我的 Sql 查询![实体图](../Images/e93c3b59b5760bcc822f40981ead3fd5.png)

```
select U.UserName,r.RoleName,dp.DepName
from Users U
inner join UserRoles UR on U.UseID = UR.UserId
inner join Roles r on UR.RoleId = r.RoleID
inner join dbo.Department Dp on dp.DepId = U.DepId
group by r.RoleName,U.UserName,Dp.DepName 
```

这是我尝试过的 Linq 查询，我能够获取特定用户的 depName 但不能获取 RoleName。实际上，用户角色和 UerRoles 之间存在多对多关系。在我的上下文中，我没有 UserRoles 实体。请帮助我。

```
List<User> user = db.Users.Include("Department,Roles").ToList(); 
foreach (var U in user)
{ 
    Console.WriteLine(U.UseID + " " + U.UserName +" "+ U.Department.DepName+ " "+ U.Roles.);            
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:28:43.153

只要您有多对多关系，您就需要遍历每个用户的每个角色：

```
foreach (var u in users)
{
    foreach (var r on u.Roles)
    {
        Comsole.WriteLine("User {0} has role {1}, u.UserName, r.RoleName);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:25:53.820

您必须为每张桌子做 1 次包含。您的查询应如下所示

```
List<User> users = db.Users.Include("Department").Include("Roles").ToList(); 
```

# ruby-on-rails - 如何使用 ruby on rails 中的 paypal-express gem 解决 10007 - “permission denied” PayPal API 错误

> ID：11306648
> 
> 赞同：2
> 
> 时间：2012-07-03T07:52:42.313
> 
> 标签：ruby-on-rails, ruby, paypal

我在我的 ruby​​ on rails 项目中使用了[paypal-express gem。](https://github.com/nov/paypal-express)我希望用户能够在我的 Web 应用程序上购买数字商品。我创建了一个带有新和创建操作的控制器。该`new`操作会生成一个用户访问的 PayPal 链接。用户从 PayPal 返回到`create`我尝试完成订单的操作。

使用沙盒凭据时，开发中一切正常，使用生产凭据时，我从 PayPal 收到“10007 - 权限被拒绝”错误。

我已经三次检查了我为生产输入的用户名/密码/API 签名，它们是正确的（用户被发送到正确的 PayPal 商店）。

这是我的控制器：

```
class DigitalPaymentsController < ApplicationController
  before_filter :authenticate_user!, :only => [ :new, :create ]

  def new
    Paypal.sandbox! unless Rails.env.production?

    response = paypal_request.setup(
      payment_request,
      success_url,
      cancel_url,
      :no_shipping => true
    )

    @paypal_url = response.redirect_uri
  end

  def create
    begin
      response = paypal_request.checkout!(params[:token], params[:PayerID], payment_request)

      if response.payment_info.first.payment_status == 'Completed'
        # TODO: Handle complete payments
      else
        # TODO: Handle non complete payments
      end
    rescue Paypal::Exception::APIError => e
      # Payment has failed, failure details are in e.message, also check params
    end
  end

  private

  def paypal_request
    @request ||= Paypal::Express::Request.new(
      :username   => PAYPAL_USERNAME,
      :password   => PAYPAL_PASSWORD,
      :signature  => PAYPAL_SIGNATURE
    )
  end

  def payment_request
    @payment_request ||= Paypal::Payment::Request.new(
      :currency_code => :USD,
      :amount => 15,
      :items => [{
      :name => "Awesome Product",
      :description => 'Description of awesomeness',
      :amount => 15,
      :category => :Digital
    }]
    )
  end
end 
```

查看 paypal-express gem，它似乎调用`DoExpressCheckoutPayment`了 PayPal API 并传递了 PayerID 和令牌。PayPal API 文档没有列出解决我的错误 (10007) 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:46:51.543

PayPal API 错误的原因是我需要`GetExpressCheckoutDetails`在签出交易之前调用 PayPal 操作。我通过在此处添加来自 paypal-express gem wiki 的一行来做到这一点：[https ://github.com/nov/paypal-express/wiki/Instant-Payment](https://github.com/nov/paypal-express/wiki/Instant-Payment)

我所需要的只是`paypal_request.details(params[:token])`

# hadoop - hadoop 实现一个可写的通用列表

> ID：11306650
> 
> 赞同：4
> 
> 时间：2012-07-03T07:53:02.517
> 
> 标签：hadoop

我正在构建一个 map reduce 作业管道（一个 MR 作业的输出作为输入馈送到另一个作业）。传递的值相当复杂，因为存在不同类型的列表和带有值作为列表的哈希映射。Hadoop api 似乎没有 ListWritable。我正在尝试编写一个通用类型，但似乎我无法在我的 readFields 实现中实例化一个通用类型，除非我传入类类型本身：

```
public class ListWritable<T extends Writable> implements Writable {
    private List<T> list;
    private Class<T> clazz;

    public ListWritable(Class<T> clazz) {
       this.clazz = clazz;
       list = new ArrayList<T>();
    }

    @Override
    public void write(DataOutput out) throws IOException {
        out.writeInt(list.size());
        for (T element : list) {
            element.write(out);
        }
     }

     @Override
     public void readFields(DataInput in) throws IOException{
     int count = in.readInt();
     this.list = new ArrayList<T>();
     for (int i = 0; i < count; i++) {
        try {
            T obj = clazz.newInstance();
            obj.readFields(in);
            list.add(obj);
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
      }
    }
} 
```

但是 hadoop 要求所有可写对象都有一个无参数构造函数来读回值。有没有人尝试做同样的事情并解决了这个问题？TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:11:03.630

我有一个像这个一样的广泛的可写库，除了我总是将类型声明为自界泛型类型的抽象类，并且当我使用它时，我声明了一个所有类型都具体化的普通子类。Hadoop 是如此可怕地基于反射，以至于在实际工作中最好不要使用泛型；但是，泛型作为作业 I/O 类型的*超类型*非常有用。

例如

```
public abstract class AbstractListWritable< T extends Writable & Cloneable, U extends AbstractListWritable< T, U > >
implements Writable {
    T tCursor;
    List< T > ltBacking;
    protected AbstractListWritable( T tCursor ) {
        this.tCursor = tCursor.clone();
        this.ltBacking = new ArrayList< T >();
    }
    ...
    @Override
    public void readFields(DataInput in) throws IOException {
        int count = in.readInt();
        this.ltBacking.clear();
        for (int i = 0; i < count; i++) {
            tCursor.readFields(in);
            list.add(tCursor.clone());
        }
    }
}

public class TextListWritable extends AbstractListWritable< Text, TextListWritable > {
    public TextListWritable() {
        super( new Text() );
    }
} 
```

Thomas 的回答将允许*异构*列表，除了因为泛型类型会阻止您创建一个，并且 I/O 几乎总是 Hadoop 中的瓶颈，我不推荐这种策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:57:34.120

您必须在每条记录中写下非常冗长的类名，因此我建议您使用强类型。

但是，您的代码必须更改为：

```
@Override
public void write(DataOutput out) throws IOException {
    out.writeUTF(clazz.getName());
    out.writeInt(list.size());
    for (T element : list) {
        element.write(out);
    }
 }

 @Override
 public void readFields(DataInput in) throws IOException{
 clazz = Class.forName(in.readUTF());
 int count = in.readInt();
 this.list = new ArrayList<T>();
 for (int i = 0; i < count; i++) {
    try {
        T obj = clazz.newInstance();
        obj.readFields(in);
        list.add(obj);
    } catch (InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
  }
} 
```

然后你也可以提供一个无参数构造函数。但是它将类名作为 UTF-8 字符串作为每条记录的开销。

# java - 在自定义 Writable 类型中键入变量的最佳方法是什么？

> ID：11306651
> 
> 赞同：0
> 
> 时间：2012-07-03T07:53:14.697
> 
> 标签：java, hadoop, mapreduce

我正在定义一个自定义可写类型，目前我有这样的东西：

```
public static class MyType implements Writable {
  private int value1;
  private String value2;

  // ... override code etc 
} 
```

我应该使用整数和字符串还是应该使用 intWritable 和 Text？我看到的示例倾向于使用我采用的方法，但是使用 Writable 类型似乎可以提高效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:08:25.203

这很好，因为您正在通过覆盖读写来进行序列化。您可以编写原语，如`ints`使用`readInt()`or`writeInt()`等​​与其他原语或字符串。

`Text`例如主要用于有`LongWritables`一些可以使用的内置类型。如果您需要组合对象，则可以使用原语非常好，`Text`或者`LongWritable`只是一种可序列化的包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:09:19.427

您可以使用 int、string 等。这很好。并且当您实现 Writable 时，您将需要覆盖`readFields(DataInput in)`和 `write(DataOutput out)`方法。您将需要以相同的顺序读取写入变量。这就是序列化发生的地方。而且您无需费心制作可写类型的变量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T08:13:19.917

我倾向于编写像 Text 这样的 Writables，因为在这些类中已经对 I/O 进行了一些重要的优化。但是，最好的办法是两种方式都尝试一下，看看哪一种表现更好。

# postgresql - 例外：与 ejb3 中的 postgresql 表/序列不存在关系

> ID：11306655
> 
> 赞同：1
> 
> 时间：2012-07-03T07:53:35.467
> 
> 标签：postgresql, ejb-3.0, sequence, ejb-3.1, postgresql-9.1

使用 ejb3 和 Postgres 插入数据时出现错误。但是使用原始 SQL 就可以了。

我的桌子是：

```
 CREATE SEQUENCE vmb_mails_seq;

CREATE TABLE vmb_mails (
   ID BIGINT DEFAULT nextval('vmb_mails_seq') PRIMARY KEY,
   TITLE TEXT ,
   FROM_ADDR VARCHAR(256), 
   DATE_ARRIVED TIMESTAMP,
   BODY TEXT, 
   ENT_BY    NUMERIC(20,0),
   IS_DELETED NUMERIC(1,0),
   DELETE_DATE TIMESTAMP, 
   MOD_BY    NUMERIC(20,0),
   IS_ACTIVE NUMERIC(1,0), 
   ENT_DATE TIMESTAMP,
   MOD_DATE TIMESTAMP, 
   REACTIVE_DATE TIMESTAMP,
   INACTIVE_DATE TIMESTAMP
);
ALTER SEQUENCE vmb_mails_seq OWNED BY vmb_mails.id; 
```

`ejb3`实体是：

```
 @Entity
@Table(name="vmb_mails")
@SequenceGenerator(name="Mails_Seq_Gen",sequenceName="vmb_mails_seq",allocationSize=1)
public class Mail implements Serializable
{
    private long id;
    private String title;
    private String fromAddr;
    private Date dateArrived;
//  private Clob body;
    private String body;

    private long entBy;
    private int isDeleted;
    private Date deleteDate;
    private long modBy;
    private int isActive;   
    private Date entDate;
    private Date modDate;
    private Date reActiveDate;
    private Date inActiveDate;

    public Mail()
    {

    }
    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE,generator="Mails_Seq_Gen")
    @Column(name="ID")
    public long getId() {
        return id;
    }
    public void setId(long id) {
        this.id = id;
    }
    @Column(name="TITLE")

    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    @Column(name="FROM_ADDR")

    public String getFromAddr() {
        return fromAddr;
    }
    public void setFromAddr(String fromAddr) {
        this.fromAddr = fromAddr;
    }
    @Column(name="DATE_ARRIVED")
    @Temporal(TemporalType.TIMESTAMP)
    public Date getDateArrived() {
        return dateArrived;
    }
    public void setDateArrived(Date dateArrived) {
        this.dateArrived = dateArrived;
    }
    @Column(name="BODY")
    public String getBody()
    {
        return body;
    }
    public void setBody(String body)
    {
        this.body = body;
    }
    /*public Clob getBody() {
        return body;
    }
    public void setBody(Clob body) {
        this.body = body;
    }*/
    @Column(name="ENT_BY")

    public long getEntBy() {
        return entBy;
    }
    public void setEntBy(long entBy) {
        this.entBy = entBy;
    }
    @Column(name="IS_DELETED")

    public int getIsDeleted() {
        return isDeleted;
    }
    public void setIsDeleted(int isDeleted) {
        this.isDeleted = isDeleted;
    }
    @Column(name="DELETE_DATE")
    @Temporal(TemporalType.TIMESTAMP)
    public Date getDeleteDate() {
        return deleteDate;
    }
    public void setDeleteDate(Date deleteDate) {
        this.deleteDate = deleteDate;
    }
    @Column(name="MOD_BY")

    public long getModBy() {
        return modBy;
    }
    public void setModBy(long modBy) {
        this.modBy = modBy;
    }
    @Column(name="IS_ACTIVE")

    public int getIsActive() {
        return isActive;
    }
    public void setIsActive(int isActive) {
        this.isActive = isActive;
    }
    @Column(name="ENT_DATE")
    @Temporal(TemporalType.TIMESTAMP)

    public Date getEntDate() {
        return entDate;
    }
    public void setEntDate(Date entDate) {
        this.entDate = entDate;
    }
    @Column(name="MOD_DATE")
    @Temporal(TemporalType.TIMESTAMP)

    public Date getModDate() {
        return modDate;
    }
    public void setModDate(Date modDate) {
        this.modDate = modDate;
    }
    @Column(name="REACTIVE_DATE")
    @Temporal(TemporalType.TIMESTAMP)

    public Date getReActiveDate() {
        return reActiveDate;
    }
    public void setReActiveDate(Date reActiveDate) {
        this.reActiveDate = reActiveDate;
    }
    @Temporal(TemporalType.TIMESTAMP)
    @Column(name="INACTIVE_DATE")

    public Date getInActiveDate() {
        return inActiveDate;
    }
    public void setInActiveDate(Date inActiveDate) {
        this.inActiveDate = inActiveDate;
    }

} 
```

打电话时`entitmanager.persist(mail)`出现此错误：

> 在 java.lang.Thread.run(Thread.java:662) 引起：异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504)：org.eclipse.persistence.exceptions.DatabaseException 内部异常： org.postgresql.util.PSQLException：错误：关系“vmb_mails_seq”不存在位置：16 错误代码：0 调用：select nextval('vmb_mails_seq') 查询：ValueReadQuery(sql="select nextval('vmb_mails_seq')") at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333) 在 org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:644)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:47:19.050

您可以使用[`serial`数据类型](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-SERIAL)来简化 DDL 脚本。`bigserial`在你的情况下：

```
CREATE TABLE vmb_mails (
   id bigserial PRIMARY KEY,
   title text,
   -- more columns
); 
```

这将创建一个`vmb_mails_id_seq`自动命名的序列。
另请注意，必须单独分配序列的权限。

```
GRANT INSERT ON vmb_mails TO .. 
```

不涵盖序列。此外，您还需要：

```
GRANT USAGE ON SEQUENCE vmb_mails_id_seq TO .. 
```

但是，错误消息说：

> 关系“vmb_mails_seq”不存在

这还有其他原因。你真的检查过序列是否存在吗？在正确端口和正确模式的正确数据库中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-30T05:52:09.600

您可以尝试“创建序列如果不存在 vmb_mails_seq;”

# asp.net - 困惑，文件在哪里？

> ID：11306656
> 
> 赞同：0
> 
> 时间：2012-07-03T07:53:40.207
> 
> 标签：asp.net, .net

我必须从头开始学习现有网站的工作方式（没有文档）。所以我将文件从网络服务器下载到我的本地机器上。在 default.master 中有指向 aspx 页面的链接：

```
<div class="mainNav">
    <ul>
        <li><a href="Begin.aspx" id="mfa5"><img alt="Begin Your Order" hover="images/a-main-nav-start.gif" src="images/a-main-nav-start.gif"></a></li>
        <li><a href="Inspiration.aspx" id="mfa6"><img alt="Inspiration Center" hover="images/a-main-nav-inspiration.gif" src="images/a-main-nav-inspiration.gif"></a></li>                        
    </ul>
</div> 
```

让我感到困惑的是，我在同一目录中找不到任何这些文件（begin.apsx、inspiration.aspx），更不用说整个项目了。

但是在实时网站上，链接可以完美运行。这些文件到底在哪里？我不知道这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:27:59.657

我怀疑该网站正在使用某种 CMS，这意味着这些页面不会作为物理文件存在，而是驻留在数据库中。

或者

该网站正在使用一些 URL 重写，并且它们都可能被路由到另一个页面。

你能不问写网站的人吗？或管理网站的人？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:24:15.687

该网站可能是预编译的。因此，您将无法找到诸如 somefile.aspx.cs 或 somefile.aspx 之类的任何页面。所有代码都预编译为程序集，如果发布时带有标记保护，甚至 .aspx 文件也将被预编译。

# google-maps - 谷歌地图 V3 div 位置固定变化相对

> ID：11306657
> 
> 赞同：6
> 
> 时间：2012-07-03T07:53:40.660
> 
> 标签：google-maps, position, fixed

首先，对不起我的英语，因为不好。

我有一个谷歌地图的问题。我正在尝试在 div 中获取地图，并且我希望这个 div 的位置：固定。

我的问题是在绘制地图之后，因为改变了 div 的位置。一开始是固定的，之后绘制是相对的，并改变了 div 的位置。

这是我的代码，HTML

```
<div class="verMapa"> SEE MAP </div>        
<br><br><br>        
<div>
  <div id="mask" style="display:none; background-color:#000000; position:absolute; right:0; top:0; z-index:9000;"></div>

  <div id="capaMapa" style= "display:none; background-color:white; position:fixed; top:50%; left:50%; width:600px; height:400px; margin-top:-200px; margin-left:-300px;z-index:9900;">
  </div>
</div> 
```

代码 JavaScript

```
var map = null;

$(document).ready(function(){

    //Evento click en Mask que cierra el mapa.
    $("#mask").click(function(){    
        $('#mask').hide();
        $('#capaMapa').hide();
        $('#capaMapa').html("");
    });

    //Evento click en ver mapa
    $(".verMapa").click(function(){ 

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set height and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth, 'height':maskHeight});

        //transition effect
        $('#mask').fadeIn(1000);
        $('#mask').fadeTo("slow", 0.5);

        //transition effect
        $('#capaMapa').fadeIn(2000);

        initialize(40, -1);

    });

});

function initialize(latitud, longitud) {              

    myOptions = {
        zoom: 14,
        center: new google.maps.LatLng(latitud, longitud),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    //inicializamos el mapa.
    map = new google.maps.Map(document.getElementById("capaMapa"), myOptions);  

} 
```

单击 en“查看地图”后，如果我在 firebug 中看到代码，我可以正确看到地图，但在错误位置。div“capaMapa”中的样式已更改，现在位置：相对，此 div 绘制在错误位置。

我已经看到初始化地图后的这种变化，“map = new google.maps.Map(document.getElementById("capaMapa"), myOptions);” 因为如果我评论这一行，将 div 绘制在正确的位置。

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T14:31:24.690

包含地图的 DOM 元素（`#capaMapa`在您的示例中）将始终具有`position: relative;`. 尝试将其包含在您可以按预期设置样式的另一个元素中：

```
<div id="capaMapa"><div id="map-canvas"></div></div> 
```

你的 CSS：

```
#capaMapa {
    display:none;
    background-color:white;
    position:fixed;
    top:50%;
    left:50%;
    width:600px;
    height:400px;
    margin-top:-200px;
    margin-left:-300px;
    z-index:9900;
}

#map-canvas {
    position: relative; /* Will be set by the Maps API anyway */
    width: 100%;
    height: 100%;
} 
```

# android - 是否可以使用抛出异常在 android 活动上调用 JExcel api？

> ID：11306663
> 
> 赞同：0
> 
> 时间：2012-07-03T07:54:19.827
> 
> 标签：android, android-activity, jexcelapi

所以，我正在尝试使用 JExcel 将数组中的数据写入 Excel 工作表。这必须在机器人内部完成。因此，我设置了一个活动来编写 Excel 表。

```
public void addListenerOnButtonSync()
{
    final Context context = this;
    Button button = (Button) findViewById(R.id.buttonSync);
    button.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View arg0)
        {
            try {
                write.main(null);
            } catch (RowsExceededException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (BiffException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (WriteException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });
} 
```

因此，只要在 android 设备上按下按钮，我就会调用在 Excel 表中写入。我遇到了一个错误，我认为这可能是由于设置了多个 try/catch 异常。我们通常如何在 android 中设置 JExcel 以使其写入 Excel 工作表？

这是跟踪：

```
07-03 12:37:57.255: E/AndroidRuntime(697): FATAL EXCEPTION: main
07-03 12:37:57.255: E/AndroidRuntime(697): java.lang.VerifyError: org.initial.insurance.sync$1
07-03 12:37:57.255: E/AndroidRuntime(697):  at org.initial.insurance.sync.addListenerOnButtonSync(sync.java:40)
07-03 12:37:57.255: E/AndroidRuntime(697):  at org.initial.insurance.sync.onCreate(sync.java:33)
07-03 12:37:57.255: E/AndroidRuntime(697):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-03 12:37:57.255: E/AndroidRuntime(697):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-03 12:37:57.255: E/AndroidRuntime(697):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-03 12:37:57.255: E/AndroidRuntime(697):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-03 12:37:57.255: E/AndroidRuntime(697):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-03 12:37:57.255: E/AndroidRuntime(697):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-03 12:37:57.255: E/AndroidRuntime(697):  at android.os.Looper.loop(Looper.java:123)
07-03 12:37:57.255: E/AndroidRuntime(697):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-03 12:37:57.255: E/AndroidRuntime(697):  at java.lang.reflect.Method.invokeNative(Native Method)
07-03 12:37:57.255: E/AndroidRuntime(697):  at java.lang.reflect.Method.invoke(Method.java:521)
07-03 12:37:57.255: E/AndroidRuntime(697):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-03 12:37:57.255: E/AndroidRuntime(697):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-03 12:37:57.255: E/AndroidRuntime(697):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:22:30.410

我遇到了同样的问题，正如 Assylias 所说，答案就[在这里](https://stackoverflow.com/q/4105578/829571)（最后一篇文章）。

您必须在 Properties → Order and Export 中检查您的 API。

# arrays - Fortran 双循环

> ID：11306664
> 
> 赞同：0
> 
> 时间：2012-07-03T07:54:25.120
> 
> 标签：arrays, fortran

我有两个不同的数组，如下所示：

```
i=[98,99,100]
j=[25,69,30] 
```

我想通过双循环来旋转这个值，但在每次迭代期间使用相同的组件索引。

例如，首先是 98-25，然后是 99-69，最后是 100-30。然后每个组合都应该写在不同的文件中。

感谢您的任何建议，

最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:14:33.517

你的意思是这样的吗？

```
do ix = 1,3
    do jx = i(ix),j(ix),-1
    ... stuff
    end do
end do 
```

如果那不是你想要的，那是因为你没有更清楚地解释你想要什么。

# django - Django模板转义

> ID：11306669
> 
> 赞同：37
> 
> 时间：2012-07-03T07:54:45.917
> 
> 标签：django, django-templates, django-template-filters

Django 模板系统提供了一些选项（过滤器）来转义 html 中的内容，但作为初学者，它们让我有些困惑。假设我正在按照教程制作一个简单的博客，并且博客内容需要转义 - 我相信内容，因为我是唯一一个编辑它的人。所以问题是我应该像`{{ post.content|autoescape }}`, `{{ post.content|escape }}`, 还是`{{ post.content|safe }}`在 html 中那样做？

谢谢

编辑：我应该使用哪个过滤器将特殊字符自动转换为 html 实体？

编辑2：我刚刚意识到自动转义不是一个有效的过滤器。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-03T08:15:08.397

HTML 转义在 Django 模板中默认开启。

Autoescape 是一个标签。不是过滤器：

```
{% autoescape on %}
    {{ post.content }}
{% endautoescape %} 
```

'escape' 过滤器对字符串的 HTML 进行转义。具体来说，它进行了以下替换：

*   < 转换为`&lt;`
*   > 转换为`&gt;`
*   '（单引号）转换为`&#39;`
*   "（双引号）转换为`&quot;`
*   & 转换为`&amp;`

除了少数极端情况外，“force_escape”几乎与“escape”相同。

“安全”过滤器会将您的内容标记为安全，因此不会被转义（将按原样发送到浏览器）。

> 我应该使用哪个过滤器将特殊字符自动转换为 html 实体？

嗯，你的意思是，像转换`Ã`成`&Atilde;`? 一直坚持使用 utf-8 编码并忘记那些。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-03T08:22:27.610

首先，您应该转义您的内容，因为您永远不知道（即使您是输入数据的人）是否需要特殊字符（例如 <、>、 ）。

您使用的语法表明您对使用转义感到不舒服：

这

```
{% autoescape on %}
    {{ content }}
{% endautoescape %} 
```

和这个完全一样

```
{{ content|escape }} 
```

这

```
{{ content }} 
```

与此 <-- 编辑完全相同：如果自动转义关闭（感谢 Paulo Scardine）

```
{{ content|safe }} 
```

安全就是这样使用：

```
{% autoescape on %}
    {{ content }}  <-- escape
    {{ content|safe }}  <-- not escape
{% endautoescape %} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-03T08:14:36.333

您的问题表明您对转义是什么感到有些困惑。

转义将非安全字符（如 HTML 标记）转换为*转义*版本，以便脚本标记等恶意内容不会破坏您的网站。默认情况下，Django 在模板中从变量呈现的所有内容上执行此操作。

从您的评论看来，您是唯一一个编辑内容的人，您想要的是在*不*自动转义的情况下呈现变量。因此，为此，您需要将其标记为安全。您可以在模板中执行此操作，方法是将整个批次包装在`{% autoescape off %}...{% endautoescape %}`标签中或通过`{{ myvar|safe }}`单个变量的过滤器。或者，您可以在视图中执行此操作，方法是在将`mark_safe(myvar)`单个变量传递给模板之前调用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T08:02:44.427

为避免转义，请使用“安全”（[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#safe](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#safe)）：

> 将字符串标记为在输出之前不需要进一步的 HTML 转义。当自动转义关闭时，此过滤器无效。

要逃避使用“转义”（[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#escape](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#escape)）：

> 转义字符串的 HTML。

# sql - VB 2010 创建带数据库的安装程序

> ID：11306671
> 
> 赞同：0
> 
> 时间：2012-07-03T07:55:03.663
> 
> 标签：sql, installation, windows-installer

你们能帮我解决这个问题吗？我有一个在 VB 2010 中创建的程序，我想创建一个包含数据库的安装程序或 msi。我正在为数据库使用 SQL。谢谢，我希望很快收到你们的来信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:32:14.510

我可能会做的是在应用程序加载时，首先检查数据库是否存在。如果它确实使用 app.config 来记录它，如果没有，则以编程方式创建它。

这是一个指导您执行此操作的链接： [创建数据库](http://support.microsoft.com/kb/307283)

祝你好运

保罗。

# c# - btn 在异步回发后被点击两次

> ID：11306672
> 
> 赞同：0
> 
> 时间：2012-07-03T07:55:08.117
> 
> 标签：c#, jquery, asp.net

我正在使用更新面板进行异步回发。在异步回发按钮单击两次之后。我不知道为什么我使用 jQuery 来连接一些鼠标悬停效果在 UpdatePanel 内的元素上。事件绑定在 $(document).ready

```
 <script type="text/javascript">
        window.onload = body_load;
        function body_load()
        {
           BindEvents();
        }
        function BindEvents()
        {
            $(function ()

{$(".csstablelisttd").mousedown(function (e)
                {//mouse down code});
                    $("#contentPlaceHolderMain_btnFix").click(function (e)
                    {alert("Alert");//here alert is generate two times an then postback occurs
                       //btn click code
                    }
                }
            }
        </script>

<asp:UpdatePanel ID="updatePanelTableAppointment" runat="server">
                        <ContentTemplate>
     <table id="table" runat="server">
         //table data
        </table>

<script type="text/javascript">Sys.Application.add_init(body_load);
</script>
                    </ContentTemplate><Triggers>
                        <asp:AsyncPostBackTrigger ControlID="btnFix" EventName="Click" />
                    </Triggers>
                </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:00:55.710

你打`body_load`了两次电话

这里

```
 window.onload = body_load; 
```

和这里

```
Sys.Application.add_init(body_load); 
```

这导致它点击两次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:03:02.120

您要附加两次事件：加载页面时和回发后。如果必须更改事件处理程序，则需要重置处理程序

```
 function BindEvents()
            {
               $(function () {
                  $(".csstablelisttd").unbind('mousedown');
                  $("#contentPlaceHolderMain_btnFix").unbind('click');

                  $(".csstablelisttd").mousedown(function (e)
                      {//mouse down code});                                     
                  $("#contentPlaceHolderMain_btnFix").click(function (e)
                      {alert("Alert"); });
                }
            } 
```

# javascript - 在 iOS 5 的 UIWebView 中重置访问过的链接

> ID：11306676
> 
> 赞同：4
> 
> 时间：2012-07-03T07:55:39.080
> 
> 标签：javascript, css, ios, uiwebview

在 iOS 5 中，UIWebView 以不同的颜色呈现访问过的链接。似乎 UIWebView 维护了一个已访问链接的列表，因此它们可以以不同的方式呈现。如何清理这样的列表？也就是说，所有的链接都会以同样的方式呈现？

它似乎与缓存和cookie无关。我尝试了以下方法，但它不起作用：

```
[[NSURLCache sharedURLCache] removeAllCachedResponses];
for(NSHTTPCookie *cookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]) {
  [[NSHTTPCookieStorage sharedHTTPCookieStorage] deleteCookie:cookie];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:52:17.620

将此添加到您的样式表中：

```
a:link, a:visited, a:hover, a:active { color: blue; }​ 
```

# php - iPhone 未收到推送通知

> ID：11306678
> 
> 赞同：3
> 
> 时间：2012-07-03T07:55:43.590
> 
> 标签：php, iphone, push-notification

我是一名 php 开发人员。我正在为 iPhone 实现一个推送通知模块。为此，我使用 php 进行服务器端实现。虽然我收到“已连接到 APNS {"aps":{"alert":"HI Push","badge":1,"sound":"default"}}消息已成功传递”消息，但 iPhone 没有收到任何通知. 我的php代码是这样的：

```
<? php
  include('include/connect.php');
  $device = mysql_query("SELECT device_token,badge,alert,sound FROM push_notification WHERE device_status='1' ");
  while($res = mysql_fetch_array($device)){
     // Put your device token here (without spaces):
     $deviceToken = $res['device_token'];
     // Put your private key's passphrase here:
     $passphrase = "pushchat";
     // Put your alert message here:
     //$message = trim($_REQUEST['alert']);
     $message = "HI Push" ;
////////////////////////////////////////////////////////////////////////////////
     $ctx = stream_context_create();
     stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
     stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);
     // Open a connection to the APNS server
     $fp = stream_socket_client(
       'ssl://gateway.sandbox.push.apple.com:2195', $err,$errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);            
    if (!$fp)
      exit("Failed to connect: $err $errstr" . PHP_EOL);            echo 'Connected to APNS' . PHP_EOL;         
         $body['aps'] = array('alert' => $message,'badge' => 1,'sound' => 'default');       // Encode the payload as JSON
    $payload = json_encode($body);
    echo $payload;
    // Build the binary notification
    $msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

    // Send it to the server
    $result = fwrite($fp, $msg, strlen($msg));

    if (!$result)
       echo 'Message not delivered' . PHP_EOL;
    else
       echo 'Message successfully delivered' . PHP_EOL;

    // Close the connection to the server
       fclose($fp); 
} 
```

?>

目标c代码如下：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.

    // Register for Push Notification Type    

    deviceTokenString=[[NSString alloc]init];

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound) ];

    /*---------------Increasing Badge No-----------*/

    application.applicationIconBadgeNumber=0;

}

#pragma mark-
#pragma mark PushNotification Delegate methods
/*------ Provide a user explanation for a place to get Device Token-------*/
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    /*---------Get The Device Token here--------------*/

    deviceTokenString = [deviceToken description];
    deviceTokenString = [deviceTokenString stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];
    deviceTokenString = [deviceTokenString stringByReplacingOccurrencesOfString:@" " withString:@""];

}

    /*------ Provide a user explanation for when the registration fails-------*/
- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error 
{

    NSLog(@"Error in registration. Error: %@", error); 

}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{

    NSLog(@"Received Notification");

    NSLog(@"remote notification: %@",[userInfo description]);
    NSDictionary *apsInfo = [userInfo objectForKey:@"aps"];

    NSString *alert = [apsInfo objectForKey:@"alert"];
    NSLog(@"Received Push Alert: %@", alert);

    NSString *sound = [apsInfo objectForKey:@"sound"];
    NSLog(@"Received Push Sound: %@", sound);

    NSString *badge = [apsInfo objectForKey:@"badge"];
    NSLog(@"Received Push Badge: %@", badge);

    application.applicationIconBadgeNumber = [[apsInfo objectForKey:@"badge"] integerValue];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:22:35.683

请检查证书是否匹配。例如。如果 iphone 处于调试模式，服务器也使用开发者证书来推送通知，如果 iPhone 是在发行版中构建的，那么服务器使用生产证书来发送推送通知。请验证您的证书是否匹配。还要检查 iPhone 设置是否为您的应用启用了通知。

# java - Java - 寻找实现 Navigable 的排序 MultiMap

> ID：11306679
> 
> 赞同：2
> 
> 时间：2012-07-03T07:55:43.803
> 
> 标签：java, multimap

我正在寻找一种`com.google.common.collect.SortedSetMultimap`额外实现`java.util.NavigableMap`接口的数据结构。
映射应该为每个键存储多个值，按键对条目进行排序并提供`java.util.NavigableMap`接口。有人知道提供这种数据结构的库吗？
Apache Collections 和 Guava Collections 没有。

我知道我可以使用`java.util.TreeMap`存储一个 Collection 但一个类`com.google.common.collect.TreeMultimap`会更方便。;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:38:25.227

Guava 正在……致力于它，但保持 GWT 兼容性使它有些问题。

您可以在 Guava 问题跟踪器[issue 51](https://code.google.com/p/guava-libraries/issues/detail?id=51)上跟踪进度。

# python - Python如何从字符串中的多次出现之间获取变量

> ID：11306681
> 
> 赞同：3
> 
> 时间：2012-07-03T07:55:57.070
> 
> 标签：python, string, variables

假设我有一个如下所示的输入文件 (temp.tmpl)：

```
PTF @
ARB @ C @ @ A @ @ C @
OSN @ B @ @ A @ 
SDA @ B @
CPN 3.23
SNL 3.26 
```

在其他一些文件（candidate.txt）中：

```
A 3.323 B 4.325 C 6.32 D 723 E 8 F 9 G 1.782
H 7
I 4
J 9
K 10 
```

我想用它们分配的值替换 A、B 和 C。我的任务需要完成的方法是通过查找@@...找到变量 A、B 和 C，然后知道这显然是一个变量。然后替换它们。这是我尝试过的：

```
reader = open('candidate.txt', 'r')
out = open('output.txt', 'w')

dictionary = dict()
for line in reader.readlines():
    pairs = line.split()
    for variable, value in zip(pairs[::2],pairs[1::2]):
        dictionary[variable] = value

#Now to open the template file
template = open('temp.tmpl', 'r')
for line1 in template:
    if line1[1]:
        confirm = line1.split(' ')[0].lower()
        symbol = line1.split(' ')[1]

        if confirm == 'ptf':
            next(template)

        elif symbol in line1:

            start = line1.find(symbol)+len(symbol)
            end = line1[start:].find(symbol)
            variable = line1[start:start + end].strip()
            print variable 
```

而且我似乎无法弄清楚如何处理具有多组变量的行。
非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:11:55.760

使用重新？问题已更改，这是我修改后的解决方案：

```
import re

# Create translation dictionary
codes = re.split(r'\s',open('candidate.txt').read())
trans = dict(zip(codes[::2], codes[1::2]))

outfh = open('out.txt','w')
infh  = open('data.txt')

# First line contains the symbol, but has a trailing space!
symbol = re.sub(r'PTF (.).*',r'\1', infh.readline()[:-1])

for line in infh:
    line = re.sub('\\'+ symbol + r' ([ABC]) ' + '\\' + symbol,
               lambda m: '%s %s %s' % (symbol,trans[m.groups()[0]],symbol),
               line)
    outfh.write(line) 

outfh.close() 
```

使用`dict`两个`zip`s 是从 [key,value,key,value,...] 列表创建字典的技巧

`trans`是一个包含名称及其各自值的字典。
`r'@ ([ABC]) @'`捕获 @ 符号内的 A 或 B 或 C 向`lambda`函数传递一个*匹配对象*，我们在该对象上调用该`groups()`方法。这将返回匹配括号组的元组，在本例中为 A 或 B 或 C。我们将其用作字典的键`trans`，因此将其替换为值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:02:35.677

简单的字符串替换不适合你吗？

```
>>> 'foo @ A @ @ B @'.replace('@ A @','12345')
'foo 12345 @ B @' 
```

它将替换所有出现的`@ A @`任何你想要的。您可以多次应用它，也许每个变量一次：

```
# a dictionary of variable values,
# you'll probably read this from somewhere
values = { 'A': '123', 'B': '456' }

# iterate over variable names
for varname in values: 
    pattern = str.format('@ {} @', varname)
    value = values[varname]

    # data is your input string
    data = data.replace(pattern, value) 
```

# objective-c - 需要一个在 Objective-c 中产生位置/区域附近的 API（带有一些建议的名称）

> ID：11306683
> 
> 赞同：0
> 
> 时间：2012-07-03T07:56:06.393
> 
> 标签：objective-c, xcode4.3

类似于谷歌提供的东西： [https ://maps.google.com/maps/suggest?q=kepa&cp=13&ll=-6.186877,106.772409&spn=0.294207,0.672226](https://maps.google.com/maps/suggest?q=kepa&cp=13&ll=-6.186877,106.772409&spn=0.294207,0.672226)

如您所见，我正在寻找 -6.186877,106.772409 附近包含“kepa”的位置

Google API 有 3 个问题

1.  不知道是什么城市
2.  不知道是不是json
3.  慢点
4.  不告诉我经纬度

我不想使用那个谷歌地图 API。苹果有自己的吗？

我听说既然我们有苹果地图，那么有 API 吗？

```
{suggestion:[{query:"Kepala Ganding, Batam, Riau, Indonesia",interpretation:{term:[{start:0,end:14,feature_type:"",feature_id:"0x31d9eeb93f631de3:0xef236d0021b64b93",matched:1,target:1,term_start:0,term_end:4,type:2626},{start:16,end:21,feature_type:"",feature_id:"0x31d9bce8c054ce05:0x3039d80b220cbb0",type:37},{start:23,end:27,feature_type:"",feature_id:"0x2e27575819b13e77:0x836f02946cb5bdb1",type:545},{start:29,end:38,feature_type:"",feature_id:"0x2c4c07d7496404b7:0xe37b4de71badf485",type:33}]},operation:2,target_type:2626,confidence:0.57893509238918672,confidence_level:0},{query:"Kepanjen, Jawa Timur, Indonesia",interpretation:{term:[{start:0,end:8,feature_type:"",feature_id:"0x2e789e548f017007:0x4027a76e35316d0",matched:1,target:1,term_start:0,term_end:4,type:37},{start:10,end:20,feature_type:"",feature_id:"0x2da393f79feeb5c5:0x1030bfbca7cb850",type:545},{start:22,end:31,feature_type:"",feature_id:"0x2c4c07d7496404b7:0xe37b4de71badf485",type:33}]},operation:2,target_type:37,confidence:0.11725665758796824,confidence_level:0},{query:"Kepayang, Indonesia",interpretation:{term:[{start:0,end:8,feature_type:"",feature_id:"0x2e1ba78275a0cf75:0xa45a91dd58607b35",matched:1,target:1,term_start:0,term_end:4,type:2626},{start:10,end:19,feature_type:"",feature_id:"0x2c4c07d7496404b7:0xe37b4de71badf485",type:33}]},operation:2,target_type:2626,confidence:0.11208249413663574,confidence_level:0},{query:"Kepandean, Serang, Banten, Indonesia",interpretation:{term:[{start:0,end:9,feature_type:"",feature_id:"0x2e41f44269c03ea5:0x501e8f1fc2968b0",matched:1,target:1,term_start:0,term_end:4,type:9939},{start:11,end:17,feature_type:"",feature_id:"0x2e418b0dbb534a61:0x301e8f1fc28b8d0",type:37},{start:19,end:25,feature_type:"",feature_id:"0x2e418ad6c40db999:0xbed39aab8b1ab3e9",type:545},{start:27,end:36,feature_type:"",feature_id:"0x2c4c07d7496404b7:0xe37b4de71badf485",type:33}]},operation:2,target_type:9939,confidence:0.06721898275125876,confidence_level:0},{query:"Kepahiang, Bengkulu, Indonesia",interpretation:{term:[{start:0,end:9,feature_type:"",feature_id:"0x2e3132d5a9fe2a25:0xd5ad9f53d01c3dfc",matched:1,target:1,term_start:0,term_end:4,type:37},{start:11,end:19,feature_type:"",feature_id:"0x2e36b01e37e39279:0x511cfb65c4a3b1e1",type:545},{start:21,end:30,feature_type:"",feature_id:"0x2c4c07d7496404b7:0xe37b4de71badf485",type:33}]},operation:2,target_type:37,confidence:0.019882878369774697,confidence_level:0},{query:"KEPAHIANG Furniture, Depok, Jawa Barat, Indonesia",interpretation:{term:[{start:0,end:19,feature_type:"",feature_id:"0x2e69ec8425024879:0x27573ef3b43c6621",matched:1,target:1,term_start:0,term_end:4,type:3395},{start:21,end:26,feature_type:"",feature_id:"0x2e69ec0828bcde9f:0x301576d150524f0",type:37},{start:28,end:38,feature_type:"",feature_id:"0x2e68e6398252477f:0xbc18a454fc8e9d7e",type:545},{start:40,end:49,feature_type:"",feature_id:"0x2c4c07d7496404b7:0xe37b4de71badf485",type:33}]},operation:2,target_type:3395,confidence:0.01028739546799113,confidence_level:0},{query:"Keparakan, Yogyakarta, Indonesia",interpretation:{term:[{start:0,end:9,feature_type:"",feature_id:"0x2e7a579be2a92fd1:0x5027a76e356af40",matched:1,target:1,term_start:0,term_end:4,type:9939},{start:11,end:21,feature_type:"",feature_id:"0x2e7a5787bd5b6bc5:0x21723fd4d3684f71",type:37},{start:23,end:32,feature_type:"",feature_id:"0x2c4c07d7496404b7:0xe37b4de71badf485",type:33}]},operation:2,target_type:9939,confidence:0.010032870427200417,confidence_level:0},{query:"Kepatihan, Menganti, Jawa Timur, Indonesia",interpretation:{term:[{start:0,end:9,feature_type:"",feature_id:"0x2e7800926b5108c5:0x5027a76e358f930",matched:1,target:1,term_start:0,term_end:4,type:9938},{start:11,end:19,feature_type:"",feature_id:"0x2e7800d5cc71210b:0x4027a76e3532ba0",type:37},{start:21,end:31,feature_type:"",feature_id:"0x2da393f79feeb5c5:0x1030bfbca7cb850",type:545},{start:33,end:42,feature_type:"",feature_id:"0x2c4c07d7496404b7:0xe37b4de71badf485",type:33}]},operation:2,target_type:9938,confidence:0.0097742005878392671,confidence_level:0},{query:"Kepandean, Dukuhturi, Jawa Tengah, Indonesia",interpretation:{term:[{start:0,end:9,feature_type:"",feature_id:"0x2e6fb99a2e7a4f67:0x5027a76e3565d30",matched:1,target:1,term_start:0,term_end:4,type:9938},{start:11,end:20,feature_type:"",feature_id:"0x2e6fbbb51a3425b5:0x9102690e4c1fe200",type:37},{start:22,end:33,feature_type:"",feature_id:"0x2e65759b9cd518dd:0xc377d19d8fedbc46",type:545},{start:35,end:44,feature_type:"",feature_id:"0x2c4c07d7496404b7:0xe37b4de71badf485",type:33}]},operation:2,target_type:9938,confidence:0.0074828863815685522,confidence_level:0},{query:"Kepatihan Kulon, Surakarta, Jawa Tengah, Indonesia",interpretation:{term:[{start:0,end:15,feature_type:"",feature_id:"0x2e7a168b60000447:0x5027a76e356c7b0",matched:1,target:1,term_start:0,term_end:4,type:9939},{start:17,end:26,feature_type:"",feature_id:"0x2e7a16627ad11ab1:0xe7fe4e0454bc3095",type:37},{start:28,end:39,feature_type:"",feature_id:"0x2e65759b9cd518dd:0xc377d19d8fedbc46",type:545},{start:41,end:50,feature_type:"",feature_id:"0x2c4c07d7496404b7:0xe37b4de71badf485",type:33}]},operation:2,target_type:9939,confidence:0.0059051329667912439,confidence_level:0}],probability_sum:[0.0003222943435917154]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:43:31.117

为什么不简单地使用 google api 呢？jsonResponse 很清楚。

# java - JFreechart X 和 Y 轴缩放

> ID：11306688
> 
> 赞同：3
> 
> 时间：2012-07-03T07:56:26.020
> 
> 标签：java, scale, jfreechart

可以在 jfreechart 中设置轴刻度值吗？例如，我想要 X 轴刻度 10 和 Y 轴刻度 1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T08:13:31.817

你设置了`TickUnit`，如果你正在使用，`XYPlot`试试这个

```
XYPlot plot = chart.getXYPlot();
NumberAxis xAxis = (NumberAxis) plot.getDomainAxis();
xAxis.setTickUnit(new NumberTickUnit(10));

NumberAxis yAxis = (NumberAxis) plot.getRangeAxis();
yAxis.setTickUnit(new NumberTickUnit(1)); 
```

# iphone - 从 .txt 文件中读取 - Objective C

> ID：11306689
> 
> 赞同：0
> 
> 时间：2012-07-03T07:56:28.247
> 
> 标签：iphone, objective-c, ios, xcode, ipad

> **可能重复：**
> [使用 Objective-C 以编程方式读取文本文件](https://stackoverflow.com/questions/1492335/read-text-file-programmatically-using-objective-c)

我正在使用以下代码行::

```
- (void)sync:(NSString *)savedName{

NSLog(@"saved name is this :: %@", savedName);

NSString *savedDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *saveFilePath = [savedDir stringByAppendingPathComponent:savedName];
saveFilePath = [saveFilePath stringByAppendingPathComponent:@"edit.txt"];

NSString *saveString = [NSString stringWithContentsOfFile:saveFilePath encoding:NSUTF8StringEncoding error:nil]; 

NSLog(@"saveString is :: %@ savedName : %@ savefilepath : %@", saveString, savedName, saveFilePath);
} 
```

的内容`edit.txt`是：

```
= WWWW =
[[Category:ssss]] 
```

我要做的是从文件中读取`edit.txt`并将其内容存储在字符串中。但是，在 NSLogging 上，我得到`null`了`saveString`.

`gdb`我在::得到以下输出

```
splitView[838:f803] saveString is :: (null) savedName : xxxx savefilepath : /Users/xxxx/Library/Application Support/iPhone Simulator/5.1/Applications/D4B3A4CF-E7D0-4D25-B3D3A170A329/Documents/xxxx/edit.t‌​xt` 
```

有人可以帮我解决错误吗？我无法弄清楚。谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:04:50.383

我认为您的 TXT 文件路径是错误的。检查一下您构建的方式 `saveFilePath`，也许是：

```
NSString *savedDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *saveFilePath = [savedDir stringByAppendingPathComponent:savedName];
saveFilePath = [saveFilePath stringByAppendingPathComponent:@"edit.txt"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:07:01.987

如果你尝试：

```
NSString *savedDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *saveFilePath = [savedDir stringByAppendingPathComponent:savedName];
//Why do you do that ? saveFilePath = [savedDir stringByAppendingPathComponent:@"edit.txt"];

NSString *saveString = [NSString stringWithContentsOfFile:saveFilePath encoding:NSUTF8StringEncoding error:nil]; 

NSLog(@"saveString is :: %@ savedName : %@ savefilepath : %@", saveString, savedName, saveFilePath); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T08:07:12.380

检查您的文档是否包含 edit.txt 文件。

编辑：

```
- (void)sync:(NSString *)savedName{

    NSString *filePath = [self applicationDocumentsDirectory];
    filePath = [filePath stringByAppendingPathComponent:@"license.txt"];
    NSString *saveString = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil]; 

    NSLog(@"saveString is :: %@ savedName : %@ savefilepath : %@", saveString, savedName, filePath);
} 
```

license.txt 的路径是：/Users/nuzhat.zari/Library/Application Support/iPhone Simulator/5.0/Applications/9BFCE2B5-C976-4EF6-91DF-DA4ABCD04788/Documents。

确保您的文件路径也与此类似。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T08:54:23.950

好的，那么我用来从 .txt 文件中读取数据的内容如下

```
NSString *path;
path = [[NSBundle mainBundle] pathForResource: YOUR_TEXT_FILE_NAME ofType: @"txt"]; 
```

现在是一个读取`NSString`作为返回对象返回的文件的函数。我对这个函数的调用如下

```
NSString *data = [self readFile: path]]; 
```

现在函数

```
-(NSString *)readFile:(NSString *)fileName

{
    NSLog(@"readFile");

    NSString *appFile = fileName;    
    NSFileManager *fileManager=[NSFileManager defaultManager];
    if ([fileManager fileExistsAtPath:appFile])        
    {
        NSError *error= NULL;
        NSString *resultData = [NSString stringWithContentsOfFile: appFile encoding: NSUTF8StringEncoding error: &error]; 
        if (error == NULL)            
            return resultData;
    }
    return NULL;
} 
```

希望对你有帮助

快乐编码:)

# ruby-on-rails - 屏蔽部分 URL rails

> ID：11306695
> 
> 赞同：0
> 
> 时间：2012-07-03T07:56:54.463
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我对 Rails 相当陌生，目前正在寻找一种方法来掩盖 URL，以便它们更具可读性。

目前我有工作作为用户的嵌套资源，所以我的 URL 显示为：

`localhost:3000/users/1/jobs/8`

我希望将 URL 显示为简单的内容，例如：

`localhost:3000/jobs/8`

很高兴知道如何将其集成到我的路线中以获得更具可读性的 URL。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:29:16.717

该[`resources`](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-resources)方法有一个`shallow`选项：

> 这允许将深度嵌套的资源的 URL（例如对博客文章的评论）`/posts/a-long-permalink/comments/1234`缩短为`/comments/1234`.

例子：

```
resources :users, :shallow => true do
  resources :jobs
end 
```

这给了你：

```
 user_jobs GET    /users/:user_id/jobs(.:format)     jobs#index
             POST   /users/:user_id/jobs(.:format)     jobs#create
new_user_job GET    /users/:user_id/jobs/new(.:format) jobs#new
    edit_job GET    /jobs/:id/edit(.:format)           jobs#edit
         job GET    /jobs/:id(.:format)                jobs#show
             PUT    /jobs/:id(.:format)                jobs#update
             DELETE /jobs/:id(.:format)                jobs#destroy 
```

# email - 从 Amazon EC2 + postfix 发送时，Gmail 将电子邮件标记为垃圾邮件

> ID：11306698
> 
> 赞同：-1
> 
> 时间：2012-07-03T07:56:59.597
> 
> 标签：email, amazon-ec2, amazon, postfix-mta, spam

我已经设置了 EC2 并安装了 postfix + dovecot + squirrelmail。当我从 squirrelmail 向我的 gmail 帐户发送电子邮件时，它进入了垃圾邮件。

[我在http://www.spamhaus.org](http://www.spamhaus.org)上检查了我的 IP ，它显示“IP 已列在策略阻止列表 (PBL) 中”，链接如下：[http ://www.spamhaus.org/pbl/query/PBL1522076](http://www.spamhaus.org/pbl/query/PBL1522076)

有人告诉我我需要改用 AWS SES。我是 linux 和 amazon 的新手，我应该怎么做最好？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:00:32.047

Spamhaus PBL 中的列表意味着来自此 IP 范围的邮件不应直接发送到 Internet。相反，您应该通过智能主机发送邮件。根据 PBL 列表信息，您可以要求亚马逊提供智能主机或使用 sendgrid 之类的服务。

获得智能主机信息（服务器/用户名/密码）后，配置 postfix 以使用智能主机。你会发现很多教程如何做到这一点，sendgrid 的简短示例，编辑*/etc/postfix/main.cf*：

```
smtp_sasl_auth_enable = yes
smtp_sasl_password_maps = static:sendgridusername:sendgridpassword
smtp_sasl_security_options = noanonymous
relayhost = [smtp.sendgrid.net]:587 
```

# java - 比较对象，相同的内容，不同的 id（在 eclipse 调试器中）

> ID：11306702
> 
> 赞同：3
> 
> 时间：2012-07-03T07:57:15.933
> 
> 标签：java, compare, equals, hashcode

我的想法不多了...我正在比较两个对象，它们都有一个自定义类型的数组列表字段。

两个对象都包含数组列表中的一个元素。

当我查看 eclipse 调试器时，它看起来完全一样，直到最接近的细节，除了不同的 id （它看起来像： (id=111) 在调试器中）

有趣的是，这个不同的 ID 在一个整数类型（计数器）的字段上。这显然不应该发生，因为整数已经实现了等于和哈希码，对吧？

另一个具有不同 ID 的字段是字符串类型（过滤器）

具有这些字段的两个对象之间的 equals 方法返回 false ......我想不通为什么......所有 equals 和 hashCode 方法都在每个自定义类型中实现..

这是来自 Eclipse 调试器：

对象 1：

```
Object (id=159)
arrayList ArrayList<E>  (id=175)
   [0]  Item  (id=175)      
      counter Integer  (id=179) 
      filter    "abcd" (id=181) 
            count   4
            hash    -717152022  
            offset  2   
            value    (id=189) 
```

对象 2：

```
Object (id=259)
arrayList ArrayList<E>  (id=267)
   [0]  Item  (id=268)      
      counter  Integer  (id=268)    
      filter    "abcd" (id=269) 
            count   4
            hash    -717152022  
            offset  2   
            value    (id=270) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:20:22.473

你如何比较你的 ArrayLists？请发布一些代码。

```
public static void main(String[] args) {
    List<String> list1 = new ArrayList<String>();
    List<String> list2 = new ArrayList<String>();

    list1.add("abcd");
    list2.add("abcd");

    if (list1.equals(list2)) {
        System.out.println("hello");
    }
} 
```

打印你好。

所以你会怎么做？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:27:06.237

您可以简单地使用ArrayList 超类的[equals() 实现：AbstractList。](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractList.html#equals%28java.lang.Object%29)

**当且仅当**您覆盖了`equals()`类中的方法`Item`。

例如 ：

```
@Override
public boolean equals(Item item){
    if(this.counter.equals(item.counter) 
          && this.filter.equals(item.filter)){
         // && etc for all Item fields that make the equality
        return true;
    }
    return false;
} 
```

另请注意，您不能依靠 hashCode 来比较相等性，请参阅这篇文章：[Java hashCode() 方法是对象相等性的可靠度量吗？](https://stackoverflow.com/a/11241594/1140748)

# emacs - 在 repl 中重新加载一个 ns

> ID：11306704
> 
> 赞同：2
> 
> 时间：2012-07-03T07:57:22.680
> 
> 标签：emacs, clojure

假设我有一个包含 ns - (ns abc.a) 的代码文件。现在我开始我的 repl 并在 ns- (use-ns 'abc.a) 中。

现在，如果我更改文件中的任何代码，如何重新加载 repl 中的 ns？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T08:40:42.503

`(require :reload 'abc.a)`您可以使用或热重载代码`(require :reload-all 'abc.a)`。后者还重新加载所有必需的命名空间，`abc.a`而前者只重新加载`abc.a`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T08:39:19.400

您可以使用[`load-file`](http://clojuredocs.org/clojure_core/clojure.core/load-file)重新加载文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T08:16:15.497

在 REPL 中设置命名空间时，不会从定义命名空间的文件中加载任何代码。您需要执行文件中的所有代码（最简单的方法是复制粘贴）。

因此，如果您的文件如下所示：

```
(ns abc.a)
(def x 3) 
```

然后`user=>(ns abc.a)`在 REPL 中执行后，你会得到提示`abc.a=>`。您的名称空间已更改，但其中还没有任何内容。键入`x`以查看它未定义。只有在执行之后`abc.a=>(def x 3)`，您才能将代码加载到 REPL 中的 ns 中。

如果您随后更改`x`了文件中的定义（例如更改为`(def x 5)`），只需在 REPL 中键入新定义即可重新加载此代码。

如果您使用的是 emacs，我建议您阅读[这个问题](https://stackoverflow.com/questions/2285437/a-gentle-tutorial-to-emacs-swank-paredit-for-clojure)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T14:15:38.163

使用 emacs 和 slime 时，您可以按 ctrl-c ctrl-l**重新加载 currend 命名空间并重新加载其中包含的任何内容。**

# linq - 根据条件从列表中选择实体并进行转换

> ID：11306705
> 
> 赞同：0
> 
> 时间：2012-07-03T07:57:33.523
> 
> 标签：linq, entity-framework

我有这个实体。

```
 List<Option> lstoption1 = new List<Option>();
   Option opt = new Option();
   opt.OptionText = "Text1"; 
   lstoption1.add(opt)

   Option opt2 = new Option();
   opt2.OptionText = "Text2"; 
   lstoption1.add(opt2)

   Option opt3 = new Option();
   opt3.OptionText = "Text3"; 
   lstoption1.add(opt3) 
```

我想将 OptionText="Text2" 选择到新的 Option.so 我写了这个。

```
 Option optnew =(from i in lstoption1 where i.OptionText ="Text2" select i) as Option 
```

但它抛出一个错误。我们如何使用 linq 做到这一点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:02:53.307

就像在 if 语句中一样，您必须使用双 = 来表示相等。我对您的 LINQ 的调整未经测试，但应该接近您的需要。

```
Option optnew =((from i in lstoption1 where i.OptionText == "Text2" select i).SingleOrDefault()) as Option; 
```

您需要表明您只期望 where 子句 (SingleOrDefault()) 提供一个结果。这意味着您将有一个结果，或者没有（null） - 由于您使用“as Option”进行强制转换，因此 null 值是有效的并且不会引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:59:54.183

1.  使用`firstordefault()`以便只返回一个元素。
2.  使用`==`而不是`=`运算符

    ```
    Option optnew =(from i in lstoption1 where i.OptionText == "Text2" select i).firstordefault() 
    ```

# java - 如何在 JAVAFX 2 中使用 AreaChart 绘制实时流数据图表 - 并发、动画、图表

> ID：11306710
> 
> 赞同：15
> 
> 时间：2012-07-03T07:57:43.993
> 
> 标签：java, concurrency, charts, javafx-2

要求 - 使用实时流数据构建动画区域图。也许每 1 秒绘制 300 个数据点。

详细信息 - 所以我需要从医疗设备读取患者呼吸模式的实时流数据，并使用 JavaFX 中的 AreaChart 以波形方式显示它。我是 JavaFX 的新手，所以我构建了一个小型 POC，以了解 JavaFX 中的并发和动画是如何工作的。

这个概念有效，我对基本测试很满意，就实现功能而言。但是我对从下面的代码中获得的性能不满意。

在下面的工作代码中，我创建了一个单独的线程来模拟从医疗设备获取数据。该线程只是生成一个随机数并将其添加到 ConcurrentLinkedQueue。

JavaFX 应用程序线程通过时间轴将这些数据从队列中拉出，并将其添加到 AreaChart 系列中。

这种给了我我需要的动画，并且在运行时添加了数据。您可以复制粘贴此代码并对其进行测试。它应该可以工作。

但性能并不令人印象深刻 - CPU 使用率达到 56% - 我的笔记本电脑上有 Intel Core 2 Duo @ 2.53 GHZ 和 4GB 内存。我的显卡是带有最新驱动程序的 Mobile Intel 4 Series express。

如何改进此动画或实时数据绘图，以获得更好的性能？

注意：我愿意在动画上妥协，如果它是瓶颈的话。我对此处显示的实现持开放 态度[http://smoothiecharts.org/](http://smoothiecharts.org/)其中波形只是预先构建并且只是从右到左流式传输。

```
 import java.util.concurrent.ConcurrentLinkedQueue;
  import java.util.concurrent.ExecutorService;
  import java.util.concurrent.Executors;
  import java.util.logging.Level;
  import java.util.logging.Logger;
  import javafx.animation.Animation;
  import javafx.animation.KeyFrame;
  import javafx.animation.SequentialTransition;
  import javafx.animation.Timeline;
  import javafx.application.Application;
  import javafx.event.ActionEvent;
  import javafx.event.EventHandler;
  import javafx.scene.Group;
  import javafx.scene.Scene;
  import javafx.scene.chart.AreaChart;
  import javafx.scene.chart.NumberAxis;
  import javafx.scene.chart.XYChart.Series;
  import javafx.stage.Stage;
  import javafx.util.Duration;

  /**
   * A chart that fills in the area between a line of data points and the axes.
   * Good for comparing accumulated totals over time.
   *
   * @see javafx.scene.chart.Chart
   * @see javafx.scene.chart.Axis
   * @see javafx.scene.chart.NumberAxis
   * @related charts/line/LineChart
   * @related charts/scatter/ScatterChart
   */
  public class AreaChartSample extends Application {
      private Series series;
      private int xSeriesData=0;
      private ConcurrentLinkedQueue<Number> dataQ = new ConcurrentLinkedQueue<Number>();
      private ExecutorService executor;
      private AddToQueue addToQueue;
      private Timeline timeline2;
      private SequentialTransition animation;

      private void init(Stage primaryStage) {
          Group root = new Group();
          primaryStage.setScene(new Scene(root));

          NumberAxis xAxis = new NumberAxis();
          xAxis.setAutoRanging(true);

          NumberAxis yAxis = new NumberAxis();
          yAxis.setAutoRanging(true);

          //-- Chart
          final AreaChart<Number,Number> sc = new AreaChart<Number,Number>(xAxis,yAxis);
          sc.setId("liveAreaChart");
          sc.setTitle("Animated Area Chart");

          //-- Chart Series
          series=new AreaChart.Series<Number,Number>();
          series.setName("Area Chart Series");
          series.getData().add(new AreaChart.Data<Number, Number>(5d, 5d));
          sc.getData().add(series);

          root.getChildren().add(sc);

      }

      @Override public void start(Stage primaryStage) throws Exception {
          init(primaryStage);
          primaryStage.show();

          //-- Prepare Executor Services
          executor = Executors.newCachedThreadPool();
          addToQueue=new AddToQueue();
          executor.execute(addToQueue);

          //-- Prepare Timeline
          prepareTimeline();

      }

      public static void main(String[] args) { launch(args); }

      private class AddToQueue extends Thread {

          public void run(){

          try {
              Thread.currentThread().setName(Thread.currentThread().getId()+"-DataAdder");
              //-- Add Random numbers to Q
              dataQ.add(Math.random());
              Thread.sleep(50);

              executor.execute(addToQueue);

          } catch (InterruptedException ex) {
              Logger.getLogger(AreaChartSample.class.getName()).log(Level.SEVERE, null, ex);
          }

          }
      }

      //-- Timeline gets called in the JavaFX Main thread
      private void prepareTimeline(){
          //-- Second slower timeline
          timeline2 = new Timeline();
          //-- This timeline is indefinite.  
          timeline2.setCycleCount(Animation.INDEFINITE);

          timeline2.getKeyFrames().add(
                  new KeyFrame(Duration.millis(100), new EventHandler<ActionEvent>() {
                      @Override public void handle(ActionEvent actionEvent) {
                          addDataToSeries();

                      }
                  })
          );

          //-- Set Animation- Timeline is created now.
          animation = new SequentialTransition();
          animation.getChildren().addAll(timeline2);
          animation.play();        

      }

      private void addDataToSeries(){

          for(int i=0;i<20;i++){ //-- add 20 numbers to the plot
              if(dataQ.isEmpty()==false)   {
                  series.getData().add(new AreaChart.Data(xSeriesData++,dataQ.remove()));

                  //-- Get rid of a bunch from the chart
                  if (series.getData().size() > 1000) {
                      series.getData().remove(0,999);
                  }

              }
              else{
                  return;
              }
          }
      }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-02T19:55:19.693

正如[jewelsea](https://stackoverflow.com/users/1155209/jewelsea)在他/她的评论中所说：

> 这个问题在[Oracle JavaFX 论坛主题](https://forums.oracle.com/forums/thread.jspa?threadID=2411087)上被交叉发布（并得到了很好的回答） 。

总而言之，解决方案包括：

> *   关闭动画，因为它是为缓慢变化的数据而设计的，以便在到达时进行动画处理；
> *   根据需要将更改`Timeline`为 a`AnimationTimer`以每帧更新图表，以便与传入数据保持同步并尽可能平稳地移动；
> *   使用 Executor 时，将线程修复为 OP 不需要扩展 Thread。更改执行器服务的创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T07:17:16.647

您的数据收集可能会导致性能大幅下降。没有理由使用一个`ExecutorService`并不断地添加新`Threads`的来执行它来获得重复的数据添加。您可以选择一个线程来读取/接收数据并将其添加到队列中并通过调用`addToQueue.start()`. 为了使其正常工作，您希望循环在线程中连续运行，并在每次迭代结束时有延迟。

# android - 使用 HTTP 和 JSON 创建即时消息

> ID：11306712
> 
> 赞同：0
> 
> 时间：2012-07-03T07:57:47.100
> 
> 标签：android, json, http, instant-messaging

任何人都可以指导我或提供链接，以便我可以继续前进。我如何在应用程序中进行即时消息传递。我想将消息从一台设备和服务器发送到服务器，我应该使用 HTTP 以 JSON 格式返回另一台设备。我浏览了许多网站，但没有得到正确的想法。所以请如果你知道给我一些想法。

非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:12:31.583

有 IM 应用程序..

```
step 1 : Send the msg to server as a json object to server.
step 2 : keep running response thread for every seconds.
step 3 : Server sends the msg to requested user as a json object.
step 4 : server takes the msg from requested user and sends back as a response. which is running on other thread. 
```

# php - 通过 IPN 'cmd' 取消 Paypal 付款

> ID：11306713
> 
> 赞同：2
> 
> 时间：2012-07-03T07:57:52.933
> 
> 标签：php, paypal, paypal-ipn

Paypal 是否为“ **cmd** ”参数定义了一个值（用于通过发送**cmd=_notify-validate**以及接收到的值来验证 IPN 响应）只是为了取消付款？类似**cmd=_notify-ignore 的**东西？

我需要这个的原因是，我正在维护一个配置文件（我正在使用 PHP），我可以将**"Allow_Payments"**值设置为**"Yes"**或**"No"**。因此，不时在 Paypal 中启用和禁用付款是一种混乱的解决方案。另一个问题是我的“立即购买”按钮放置在不同的站点上，但它们都使用相同的 IPN 侦听器。这就是为什么我正在寻找可以在 IPN 侦听器中使用的解决方案。这就是为什么我认为 'cmd' 参数在这种情况下会有所帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:09:20.840

我相信你对 IPN 有错误的想法。

PayPal IPN 只是一个侦听器或处理程序。付款成功*后将*触发您的 IPN 。

我认为执行从您的 IPN 触发的取消命令是错误的，因为这将在收到付款后取消付款 - 并且对于刚刚付款的用户来说很烦人。

一个更好的选择是在 PayPal 支付页面之前使用一个包罗万象的处理页面。所有立即购买按钮都将指向与您的 IPN 托管在同一域中的此文档（创建结帐样式流程）。需要验证付款数据以防止欺诈（例如付款金额和业务电子邮件），然后检查您的“Allow_Payments”标志。如果允许付款并且我们有有效的付款数据，请继续使用 PayPal 付款。这样，您的用户将在付款之前被停止，并且没有麻烦取消或退款。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T09:32:48.537

为了让您的服务器（商店）通知 PayPal 已购买产品的数量和价格，您的服务器通常会向客户的浏览器发回 HTTP 重定向。这会导致客户的浏览器被重定向到发生付款的 PayPal。

此重定向存在漏洞。如果购物者可以控制他们的浏览器，他们可以拦截此重定向并将产品的价格设置为 0 美元。

您真正必须准确检查这是否没有发生的唯一机会是在 IPN 阶段。如果您检测到价格/数量发生了意外情况，您必须在此时取消交易（付款后）。

# android - Android 控制台中的编译器合规性级别错误

> ID：11306717
> 
> 赞同：0
> 
> 时间：2012-07-03T07:58:25.473
> 
> 标签：android, broadcastreceiver

```
[2012-07-03 13:21:02 - BroadCastRcvrReadPhoneState] Android requires compiler compliance level 5.0 or 6.0\. Found '1.4' instead.
Please use Android Tools > Fix Project Properties. 
```

我不明白。任何想法如何解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:00:45.107

右键单击您的项目，单击**AndroidTools->**并在子菜单中单击**修复项目属性**

如果这不起作用，右键单击项目，单击`Properties->java compiler->`单击`Enable project specific Settings`，然后单击，选择**编译器合规级别**。现在在下拉列表中选择最高编译器级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:00:58.483

在 Eclise 中转到：

```
Window->Prefrences->Java->Compiler->Compiler Compliance Level 
```

并将编译合规级别更改为 1.6

# objective-c - 不能在另一个类中使 nstimer 无效

> ID：11306718
> 
> 赞同：1
> 
> 时间：2012-07-03T07:58:30.673
> 
> 标签：objective-c

我不能使 NSTimer 无效，他会继续运行。

在**A 类**我有：

```
-(void)startMachine
{
    NSLog(@"START THE MACHINE " );
    doesOn=1;
      machineClock=[NSTimer scheduledTimerWithTimeInterval:0.05
                                     target:self
                                   selector:@selector(recordMachine:)
                                   userInfo:nil
                                    repeats:YES];
 ....//machineClock is on the .h file in interface
}

-(void)recordMachine:(NSTimer*)timer
{

    NSLog(@"recordMachine");
...

-(void)stopMachine
{

         NSLog(@"STOP THE MACHINE !! " );
         [machineClock invalidate];
         machineClock=nil;
...
} 
```

然后在**b 类**中，开始和停止它：

```
 classAinst=[recordMachine alloc];
    [classAinst startMachine]; //it starts here.
    ......
   [classAinst stopMachine]; //it class the method to stop it,but the timer still ticks. 
```

什么可能导致这个？我需要为计时器创建一个属性吗？a 类正在持有 b 的计时器，所以它应该停止它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:32:02.973

B类.h

```
@interface classB : ParentClass
@property(nonatomic, strong)ClassA *Aclass;
@end 
```

B类.m

```
 @implementation classB
 @synthesize Aclass;
 - (void)viewDidLoad
{
    [super viewDidLoad];
    Aclass =[[ClassA alloc]init];
    [Aclass startMachine];
    [Aclass stopMachine];
}
 @end 
```

你失去了 classA 的实例，这就是为什么你也失去了对它的控制。试试上面的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:33:47.280

从启动它的不同线程停止计时器将导致此问题。

如果您没有使用多个线程，那么您很可能正在停止错误的计时器或错误对象的计时器。如果每当启动计时器时，您可以调试它，您会打印它的地址和启动它的对象：

```
NSLog(@"starting %@ owned by %@", timer, self); 
```

停止时也一样：

```
NSLog(@"stopping %@ owned by %@", timer, self); 
```

然后确保数字匹配。（并且`ProcessName[11337:707]`NSLog 输出中的部分数字也必须匹配：第二个是线程 ID，如果它不同，则意味着您确实从其他线程停止了计时器）。

# c++ - 分配大块连续内存——做还是不做？

> ID：11306719
> 
> 赞同：10
> 
> 时间：2012-07-03T07:58:32.900
> 
> 标签：c++, memory-management

我一直坚信分配大块连续内存不是一个好习惯。很明显，如果内存碎片发挥作用，您可能会遇到麻烦，在大多数情况下不能确定排除（尤其是在设计为服务等的大型项目中）。

最近我偶然发现了[ITK](http://www.itk.org/)图像处理库，并意识到它们（实际上）总是将图像数据（甚至是 3D - 这可能是巨大的）分配为一个连续的块。有人告诉我这应该不是问题，至少对于 64 位进程而言。但是，我看不出 64 位和 32 位进程之间的系统差异，除了由于较大的虚拟地址空间可能会延迟内存问题。

言归正传：我想知道在处理大量数据时有什么好的做法：简单地将其分配为一个大块，还是更好地将其分成更小的块进行分配？

由于问题当然是特定于系统的，因此我想将其限制为本机（非托管，无 CLR）C++，尤其是在 Windows 下。但是，如果可能的话，我也会对任何更一般的评论感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T08:06:43.907

这个问题几乎看起来很荒谬......让我改写一下来说明：

> 如果你需要一大块内存并且担心碎片，你应该自己碎片吗？

通过自己分段而不是让系统内存管理器为您分段，您不会获得任何收益。系统在这方面非常擅长，你不可能做得更好。

话虽如此，如果在所有条件相同的情况下，您可以完成相同的任务，但将其分解为合理的片段，那么可能值得分析一下您是否可以获得任何东西。但总的来说，你不会在合理的意义上获得任何东西——你将无法超越操作系统。

# windows-phone-7 - 如何将 Sqlite 或任何其他数据库与 Windows 7 phonegap 集成？

> ID：11306720
> 
> 赞同：2
> 
> 时间：2012-07-03T07:58:39.307
> 
> 标签：windows-phone-7, cordova, phonegap-plugins

我是 Windows 7 phonegap 的新手。我想使用本机应用程序存储和检索数据。我不知道如何存储和显示从本机到phonegap（HTML）页面的检索数据。

1.  这是否意味着 phonegap 支持所有平台上的 web sql 数据库支持（具体为 WP7）。是否有任何插件支持 WP7 上用于 phonegap 的 sqllite？
2.  console.log js 脚本输出在 Visual Studio 2010 输出窗口中不可见。我应该为 WP7 使用替代 api 吗？
3.  如何调试 Visual Studio 2010 输出窗口？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:43:48.270

好的，我的答案迟到了，但我有一个问题的答案：

PhoneGap 支持 Sqlite，毫无疑问。但是 Windows Phone 不支持 Sqlite，因此 Phonegap 排除了 Windows 平台的“Web SQL 存储”接口（参见支持的平台在 Phonegap API 在线文档中）。

有一种不常见的方法可以达到目标。您可以使用 codeplex 中的 sqlite 实现来支持您的 Windows 手机的 sqlite： [http://sqlitewindowsphone.codeplex.com/releases](http://sqlitewindowsphone.codeplex.com/releases)

我没有用Phonegap测试过，所以我不能保证，但对我来说看起来不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:25:55.247

看看这个： [Phonegap Storage（提供对设备存储选项的访问）](http://docs.phonegap.com/en/1.9.0/cordova_storage_storage.md.html#Storage)

要在 Visual Studio 的输出窗口中查看 console.log 消息：

```
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script type="text/javascript">

document.addEventListener("deviceready",onDeviceReady,false);

// called when device ready event fires
function onDeviceReady()
{
    console.log("You should see this message in Visual Studio's output window.");
}

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T13:51:50.847

正如 Timo Rehl 所回答的，您可以使用 codeplex 中的 sqlite 实现来实现 sqlite 组件，然后在其上创建一个 PhoneGap 插件。

事实上，我已经开发了这样一个插件（用于 cordova 3），它使您能够在 Windows Phone（7 和 8）上使用 Web SQL 数据库，就好像它是本机实现的一样：[https ://github.com/Smile -SA/cordova-plugin-websqldatabase](https://github.com/Smile-SA/cordova-plugin-websqldatabase)。

使用此插件的原型可在[https://github.com/Smile-SA/cordova-plugin-websqldatabase-proto](https://github.com/Smile-SA/cordova-plugin-websqldatabase-proto)获得。

该插件使用来自 codeplex 的 sqlite 实现的分叉版本（解决一些错误）。fork 在同一个 github 存储库中可用。

# axapta - AX 的源文件存储在哪里？

> ID：11306731
> 
> 赞同：4
> 
> 时间：2012-07-03T07:59:56.813
> 
> 标签：axapta, dynamics-ax-2009

我想对“仅”Dynamics Ax 2009 的源文件（即 XPO 源文件）运行定期（每 4 小时）备份。

我想知道它们的物理存储位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T08:24:49.897

**AX7**

所有元数据都作为 XML 和方法存储在常规文件中，并存储在版本控制中。
请参阅[此概述](https://ax.help.dynamics.com/en/wiki/using-development-tools-in-ax7/)。

**斧头 2012**

AX 源（连同属性和编译[的 p 代码和 CIL](http://msdn.microsoft.com/en-us/library/gg839855.aspx)）存储在[模型存储](http://msdn.microsoft.com/en-us/library/hh335184.aspx)数据库中。在 AX 2012 RTM 中，模型存储数据库与数据数据库相同（这很愚蠢）。在 AX 2012 R2 中，模型存储数据库位于一个单独的数据库中，通常命名为`xxx_Model`.

**AX 2009 及以下**

AX 源代码（连同属性和编译的 P 代码）存储在 AOS 服务器上具有 AOD 扩展名的二进制文件中。[每一层](http://msdn.microsoft.com/en-us/library/aa851164%28v=ax.50%29.aspx)都有一个文件。

对不起，只有源文件不存在。XPO 文件只是一种导出/导入格式。

相当大的 axsys.aod 包含大部分标准代码。在 axsyp.aod 文件中可以找到服务包中更正的元素。

您的代码很可能存储在 axusr.aod 或 axcus.aod 中，具体取决于您的工作层。

文件的命名遵循[此处](http://www.artofcreation.be/2009/10/27/application-file-extensions/)解释的模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T09:49:07.817

可以通过代码创建 XPO，但正如 Jan 指出的那样，它只会与您当前的层相关。此代码将创建一个 XPO，其中包含“类”节点中的所有定义；

```
void DEV_ExportTreeNodeExample()
{
    TreeNode treeNode;        
    #define.ExportFile(@"c:\AOTclasses.xpo")
    #define.ExportMode("w")        
    new FileIoPermission(#ExportFile, #ExportMode).assert();        
    treeNode = TreeNode::findNode(@"\Classes");
    if (treeNode != null)
    {
        treeNode.treeNodeExport(#ExportFile);
    }        
    CodeAccessPermission::revertAssert();
} 
```

[这段代码来自这里](http://learnax.blogspot.co.uk/2010/06/x-code-to-export-aot-object-automatic.html)

我想您可以创建一个批处理作业来为您希望备份的任何节点运行上述代码，这需要多长时间或者是否会有任何其他并发症，我不知道。

# javascript - 使用 JavaScript 字符串操作切出精确的文本

> ID：11306732
> 
> 赞同：0
> 
> 时间：2012-07-03T07:59:57.483
> 
> 标签：javascript, jquery, string, split, phantomjs

我正在尝试从抓取的站点中删除一些文本，但不确定可以使用哪些函数或库来简化此操作：

我从 PhantomJS 运行的代码示例：

```
var latest_release = page.evaluate(function () {
                // everything inside this function is executed inside our
                // headless browser, not PhantomJS.
                var links = $('[class="interesting"]');
                var releases = {};
                for (var i=0; i<links.length; i++) {
                    releases[links[i].innerHTML] = links[i].getAttribute("href");
                }

                // its important to take note that page.evaluate needs
                // to return simple object, meaning DOM elements won't work.
                return JSON.stringify(releases);
            }); 
```

类`interesting`有我需要的东西，周围是新的行和标签等等。

这里是：

```
{"\n\t\t\t\n\t\t\t\tI_Am_Interesting\n\t\t\t\n\t\t":null,"\n\t\t\t\n\t\t\t\tI_Am_Interesting\n\t\t\t\n\t\t":null,"\n\t\t\t\n\t\t\t\tI_Am_Interesting\n\t\t\t\n\t\t":null} 
```

我试过`string.slice("\n");`了，什么也没发生，我真的想要一种有效的方法来剪掉这样的字符串，基于它与那些`\n'`'s 和`\t`'s 的关系

顺便说一句，这是我的拆分代码：

```
var x = latest_release.split('\n'); 
```

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:29:15.380

这是一个去除所有空白的简单案例。正则表达式做得很好的工作。

```
var s = "  \n\t\t\t\n\t\t\t\tI Am Interesting\n\t\t \t \n\t\t";
s = s.replace(/[\r\t\n]+/g, ''); // remove all non space whitespace
s = s.replace(/^\s+/, ''); // remove all space from the front
s = s.replace(/\s+$/, ''); // remove all space at the end :)
console.log(s); 
```

进一步阅读：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:17:53.710

```
 var interesting = {
        "\n\t\t\t\n\t\t\t\tI_Am_Interesting1\n\t\t\t\n\t\t":null,
        "\n\t\t\t\n\t\t\t\tI_Am_Interesting2\n\t\t\t\n\t\t":null,
        "\n\t\t\t\n\t\t\t\tI_Am_Interesting3\n\t\t\t\n\t\t":null
    }

    found = new Array();
    for(x in interesting) {
        found[found.length] = x.match(/\w+/g);
    }
    alert(found); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T08:04:33.947

您可以尝试使用“\\n”作为模式吗？您的 \n 可能被理解为纯字符串而不是特殊字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T08:10:15.363

```
new_string = string.replace("\n", "").replace("\t", ""); 
```

# jquery - jQuery检查元素是否具有内联定义的特定样式属性

> ID：11306736
> 
> 赞同：32
> 
> 时间：2012-07-03T08:00:28.113
> 
> 标签：jquery, css, inline-styles

我需要检查一个元素是否具有已定义的 css 属性，但我在使用 jQuery.css() 函数时遇到了一些问题。

我正在寻找的属性是宽度。

如果元素没有定义的宽度，我试试这个：

```
if(base.$element.css('width') !== 'undefined') 
```

我得到了浏览器的计算宽度。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-03T08:10:28.540

这是我整理的一个非常简单（可能需要改进）的插件，它将为您提供内联样式属性的值（`undefined`如果找不到该属性则返回）：

```
​(function ($) {
    $.fn.inlineStyle = function (prop) {
         var styles = this.attr("style"),
             value;
         styles && styles.split(";").forEach(function (e) {
             var style = e.split(":");
             if ($.trim(style[0]) === prop) {
                 value = style[1];           
             }                    
         });   
         return value;
    };
}(jQuery)); 
```

你可以这样称呼它：

```
//Returns value of "width" property or `undefined`
var width = $("#someElem").inlineStyle("width"); 
```

这是一个[工作示例](http://jsfiddle.net/eYGr5/1/)。

请注意，它只会返回匹配集中*第一个元素的值。*

由于它`undefined`在未找到该样式属性时返回，因此您可以在您的情况下使用它，如下所示：

```
if (base.$element.inlineStyle("width")) {
    // It has a `width` property!
} 
```

* * *

**更新**

这是一个短得多的版本。我意识到`prop("style")`返回一个对象，而不是字符串，并且该对象的属性对应于可用的样式属性。所以你可以这样做：

```
(function ($) {
    $.fn.inlineStyle = function (prop) {
        return this.prop("style")[$.camelCase(prop)];
    };
}(jQuery)); 
```

您可能想用`$.camelCase`自定义的驼峰式函数替换使用，因为 jQuery 似乎没有文档记录并且可能不太好依赖。我只是在这里使用它，因为它更短。

这是一个[工作示例](http://jsfiddle.net/eYGr5/2/)。请注意，在这种情况下，如果在元素上找不到样式，则返回值将是空字符串。那仍将评估为`false`，因此上述`if`语句应该仍然有效。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-04-01T16:53:54.970

为什么不只是：

```
var $el = $('element[style*="width"]'); 
```

然后您可以使用以下方法对其进行测试：

```
if ( $el.length ) {
    //...
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-07-16T09:15:56.183

例如检查“宽度”：

```
if ($(element).prop("style")["width"] !== '')
{...} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-03T08:06:47.533

用于`.attr`检查`style`属性。

```
if(base.$element.attr('style').length > 0) {
   //...
} 
```

如果你关心宽度，那么

```
if(base.$element.attr('style').indexOf('width') !== -1) {
   //...
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-03T08:11:15.283

马修，您可以检查样式属性是否未定义

```
 var attr = $(this).attr('style');
    if (typeof attr !== 'undefined' ) {
   } 
```

# git - git checkout 中的 --dry-run 选项

> ID：11306737
> 
> 赞同：14
> 
> 时间：2012-07-03T08:00:29.453
> 
> 标签：git, git-checkout

我使用`git checkout --<dir_name(or)file_name>`丢弃特定目录或文件中的所有更改。每当我这样做时，GIT 都会从存储库中检出目录（或）文件。

有没有办法告诉 GIT？，“**不要覆盖更改，告诉我会发生什么。** ”

类似于`git clean -n`(或) `git clean --dry-run`。

**更新：** 在我执行之前`git checkout --src/`，我想看看哪些文件会被覆盖。我知道我们可以使用`git status src/`. 但是，拥有它不是很好`git checkout -n --src/`吗？用户没有太多的命令更改。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T13:30:05.897

Git[`checkout`](http://git-scm.com/docs/git-checkout)命令没有`dry-run`（或类似的）选项。但是，您可以使用 Git[`ls-files`](http://git-scm.com/docs/git-ls-files)命令查看哪些工作目录文件不同于`HEAD`：

```
git ls-files -dm -- src/ 
```

这将列出所有已删除或修改的文件，这些文件通常会被`checkout`.

另一种选择是使用 Git[`diff`](http://git-scm.com/docs/git-diff)命令：

```
git diff --name-only HEAD -- src/ 
```

这列出了与 HEAD 不同的所有文件，并将在`checkout`.

如果这是经常做的事情，您可能需要创建一个[`alias`](http://git-scm.com/docs/git-config)：

```
git config --global alias.lco "diff --name-only HEAD" 
```

然后你可以使用：

```
git lco -- src/ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T11:44:59.517

你可以跑

```
$ git checkout --patch -- <files> 
```

它会询问每个差异是否要“检查”该差异。如果您对每个提示都说“不”，那么它不会受到影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-28T20:16:21.140

您需要为*任何*命令提供试运行选项，而不管假设的想法是“您不需要试运行以进行结帐，因为您可以通过其他方式获得差异列表”。

您不希望通过试运行选项来获取差异列表，而是希望通过试运行来验证“当我按下 Enter 时会发生什么？” 在你真正做到之前。它们是有区别的。如果您所做的只是阅读了手册，那么您正在测试程序的实际/准确行为时可能存在一些歧义。

我有一个奇怪的项目，其中 repo 位于“/”中。所以，有一个 '/.git' 目录和 '/.gitignore' 和 '/.gitmodules' 文件。/.gitignore 和 /.gitmodules 文件在 repo 中被跟踪，这是一个问题，因为即使开发人员用户有权编辑文件，他们仍然没有 git 删除和重新创建文件的权限，因为 don't 和 can't 对 '/' 本身具有写权限。如果 git 就地编辑文件不会有问题，但 git 会删除和替换，因为用户收到 git 无法取消链接文件的错误。在开发对我们的 repo 配置进行更改的过程中，以及开发人员在未来消除这个问题的一些指导，一路上我想知道这个命令会做什么：

`git checkout master -- /.git*`

和其他可能的变化，如

`git checkout master -- '/.git*'`

和其他人，更改 shell globbing 和/或查看 git 本身如何解释最终的 filespec 值。如果我从 shell 中转义一个“*”，git 会扩展一个“*”，还是会将其视为文字？如果它扩展它，它会包含“/.git/”目录吗？如果它扩展它，是否有一些我可以使用的正则表达式语法，这意味着“任何单个非空字符”，如“。” 在正则表达式或“？” 在外壳通配符中？等等等等

我不想知道哪些文件不同，我想测试 git 的确切行为以找到不寻常命令或命令集的最佳/最简单版本。

为此，您真的需要一个试运行选项。我已经知道哪些文件不同。在这种情况下，许多文件会有所不同，我不想要其中任何一个。我只想要 /.gitignore 和 /.gitmodules 而没有别的。

在这种情况下，我知道我可以通过简单地在命令行上明确指定它们来做到这一点。

`git checkout master -- /.gitignore /.gitmodules`

但我想看看是否有更短的通配语法可以自动获取它们，但理想情况下，不包括 /.git 目录。理想情况下，我想弄清楚我可以摆脱的最简单的形式。我知道我可以使用 shell 进行一些花哨且非常具体的扩展，但如果像 '/git*' 这样的东西有效，我宁愿使用它而不是 '/git{i,m}*'

这个特殊的任务很小，有几个简单的答案。请不要告诉我在没有“git checkout --dry-run”的情况下解决这个确切问题的方法，或者告诉我在 / 中进行回购是多么愚蠢，我也知道。我已经知道几种方法来完成我的直接工作。那不是重点。它可能很容易涉及更多文件或更复杂的 globbing 模式，因此仅明确列出文件就不会那么方便，或者，它可能是一些完全不同类型的问题。

关键是，一般来说，适用于任何地方的任何命令，包括 git checkout，总是有一个用于测试程序本身行为的空运行选项。阅读手册或 --help 并不能回答空运行回答的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T08:10:06.707

不确定，但作为一种解决方法，你当时`git stash -u`不能吗？`git apply``git checkout`

如果您不满意，您可以随时恢复到藏匿处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T14:27:09.190

如果您想避免交互性（例如“对每个提示说不”），请使用`git diff`. 如果您想准确回答您的问题，请使用`git diff -R`. 如果您只想要文件名，请使用`git diff --name-only`.

如果没有该`-R`标志，`git diff`将以补丁格式报告您的工作树和索引之间的所有差异，即您在发布时看到的格式`git show <commit>`。`-R`反转输出，向您展示删除更改后会发生什么，就好像删除本身就是一个补丁一样。考虑一个例子：

```
git init /tmp/test && cd /tmp/test
echo "old line">file
git add .
git commit -m "Initial commit"
echo "new line">file 
```

现在发行`git diff`没有任何标志。你应该得到：

```
$ git diff
diff --git a/file b/file
index 0906fba..86ba82a 100644
--- a/file
+++ b/file
@@ -1 +1 @@
-old line
+new line 
```

坦率地说，我发现输出很容易解析我从不使用`-R`标志。如果您经常发出`git diff`命令（我发现它是我最常用的命令之一），则可能不需要反向输出。同样，出于此答案的目的，请尝试：

```
$ git diff -R
git diff -R
diff --git b/file a/file
index 86ba82a..0906fba 100644
--- b/file
+++ a/file
@@ -1 +1 @@
-new line
+old line 
```

该输出准确地描述了您寻求的内容：“不要覆盖更改，只需告诉我会发生什么。”

默认情况下，该命令会将您的整个工作目录与索引进行比较。它会显示每个修改文件中的差异。假设您只想查看一个文件的效果。这很容易。只需使用您已经在使用的相同的双破折号命名法：

```
git diff -- <file> 
```

你会发现`git diff`它是 git 中最有用、可扩展的命令之一，你可以用它来做各种有用的事情。您可以使用它来比较两个提交、两个分支或两个文件。我最近的“最喜欢的疯狂 git 操作”是管道`git diff`到`git apply`. 前者产生可理解的补丁。后者应用它们。当它们结合在一起时，你重写历史的能力几乎是无限的——当然，在本地，**永远不要重写共享的历史。**考虑另一个例子，在这一点上离题但很有趣（如果你喜欢这种事情）。从我们的测试存储库，上面：

```
git add .
git commit -m "Second commit"
echo "even newer line">file
git add .
git commit -m "Third commit" 
```

你知道吗？我不太喜欢第二次提交。它的实现是错误的。它正在打破测试。我不想分享它。尽管如此，我确实想保留“第二次提交”提交消息，因为这真的很难输入。我可以用 重新设置它`git rebase -i HEAD~2`，但这涉及打开编辑器、删除提交、编辑另一个和（呃）复制/粘贴。开发人员要做什么？这个怎么样：

```
git checkout ":/Initial" ;# get back to the first commit
git diff HEAD ":/Third" | git apply ;# apply the diff between the first and third commit
git add . ;# add the result
git commit -C ":/Second" ;# with second commit's message
git checkout -B master HEAD ;# and replace old 'master' 
```

结果与`git rebase`. 我只是设法避免了交互式会话，并且不必使用编辑器。是不是矫枉过正？可能，但它确实很有趣。此外，很容易构建更复杂的用例，尤其是当您组合`git diff`、`git apply`和`git add -p`.

# android - 【自定义ScrollView不能滚动

> ID：11306740
> 
> 赞同：0
> 
> 时间：2012-07-03T08:00:37.473
> 
> 标签：android, scrollview

我有一个`CustomScrollView`扩展`ScrollView`，然后我在方法中做一些事情`OnDraw()`。不幸的是，`CustomScrollView`不能再滚动了，这是我所做的代码。

```
@Override
protected void onDraw(Canvas canvas){
    super.onDraw(canvas);
    Log.d(null,"current measured height is:"+getMeasuredHeight());
    Log.d(null,"screen height is:"+mScreenHeight);

    Rect rect=new Rect(50,0,mScreenWidth-50,mScreenHeight<<1);
    canvas.drawRect(rect,mFilledPaint);
}

@Override
public void onMeasure(int widthMeasureSpec,int heightMeasureSpec){
    super.onMeasure(widthMeasureSpec,heightMeasureSpec);
    setMeasuredDimension((int)mScreenWidth,(int)mScreenHeight<<1);
}

private void init(){
    mFilledPaint.setStyle(Paint.Style.FILL);
    mFilledPaint.setColor(Color.WHITE);

    mScreenWidth=((Activity)mContext).getWindowManager().getDefaultDisplay().getWidth();
    mScreenHeight=((Activity)mContext).getWindowManager().getDefaultDisplay().getHeight();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:02:16.340

尝试在自定义中编写这些代码`View`（只需让您的类扩展`View`）并将其添加到`ScrollView`. 覆盖`ScrollView`方法将禁用其默认行为，如滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:04:10.177

如果您只需要绘制额外的东西，请删除 onMeasure 覆盖。

# excel - 在 monotouch 中解析 Excel 文件

> ID：11306741
> 
> 赞同：2
> 
> 时间：2012-07-03T08:00:41.357
> 
> 标签：excel, xamarin.ios

有什么好的方法可以在 monotouch 中解析 Excel 文件吗？似乎大多数使用 Excel 的方法都是基于使用 Excel 对象库。似乎这甚至不是单点触控的一个选项？我读到objective-c 对Excel 文件没有任何本机支持，所以不知道这是否会改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:06:52.643

你需要要么

1.  自己写
2.  找到一个 obj-c 库，并为它编写 MT 绑定
3.  找到一个开源 .NET 库并将其移植到 MT

如果您只想显示一个文件，您可以使用现有的 iOS 文档 API 来完成。

最新的 Office 格式是基于 XML 的，因此根据文件的复杂程度，编写自己的解析器可能是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:54:21.247

我最终只编写了中间步骤，一个获取 Excel 文件、解析它并将内容作为 xml/json 提供的 Web 服务。

# primefaces - 定位 PrimeFaces 的 OverlayPanel

> ID：11306743
> 
> 赞同：6
> 
> 时间：2012-07-03T08:00:49.917
> 
> 标签：primefaces, position, overlay, panel

你能给我固定`overlayPanel`位置的键/值吗？我想在中间修复它，但我无法弄清楚。我有这个例子：

```
<p:overlayPanel id="overlayPanelSearch" for="searchButton" my="top" at="bottom"> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-17T17:17:19.363

我是这样理解的。
“我的”是覆盖面板框。
“at”是命令按钮。

```
<p:commandButton id="chartBtn" type="button" />  
<p:overlayPanel id="chartPanel" for="chartBtn" my="right top" at="right bottom">  
  ...
</p:overlayPanel> 
```

所以上面写着：“将覆盖面板的右上方与命令按钮的右下方连接起来”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T13:07:06.733

使用 overlayPanel 的以下属性：

```
for - Identifier of the target component to show the panel
my  - Position of the panel relative to the target (ex: my="left top")
at  - Position of the target relative to the panel (ex: at="left bottom") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-17T10:12:05.533

我认为文档描述如何使用它是错误的。它被描述为使用“左上角”之类的东西。

尝试使用**my="left top" at="left bottom"**效果**很好！**

希望这可以帮到你..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-22T14:32:38.380

要将其移动到中间，只需使用`middle`.

即使[文档](https://primefaces.github.io/primefaces/7_0/#/components/overlaypanel?id=positioning)只是提到`right, left, top, middle`您还可以在`middle`x 轴和 y 轴上使用。

例子：

```
<p:overlayPanel id="overlay" my="center top" at="right center"> 
```

由于此请求，此功能稍后可能已添加： [https ://forum.primefaces.org/viewtopic.php?t=45084](https://forum.primefaces.org/viewtopic.php?t=45084)

# r - 在 R Markdown 中为代码块添加换行符

> ID：11306745
> 
> 赞同：20
> 
> 时间：2012-07-03T08:00:53.710
> 
> 标签：r, markdown, knitr

我正在使用带有 R Markdown 的 knitr 包来创建 HTML 报告。使用“+”时，我在将代码放在单独的行上时遇到了一些麻烦。

例如，

```
```{r}
ggplot2(mydata, aes(x, y)) +
   geom_point()
``` 
```

将返回以下 HTML 文档

```
ggplot2(mydata, aes(x, y)) + geom_point() 
```

通常这很好，但是一旦我开始添加额外的行就会出现问题，我想将它们分开以使代码更容易理解。运行以下：

```
```{r}
ggplot2(mydata, aes(x, y)) +
   geom_point() +
   geom_line() +
   opts(panel.background = theme_rect(fill = "lightsteelblue2"),
        panel.border = theme_rect(col = "grey"),
        panel.grid.major = theme_line(col = "grey90"),
        axis.ticks = theme_blank(),
        axis.text.x  = theme_text (size = 14, vjust = 0),
        axis.text.y  = theme_text (size = 14, hjust = 1.3))
``` 
```

将导致所有代码在一行中出现，使其更难遵循：

```
ggplot2(mydata, aes(x, y)) + geom_point() + geom_line() + opts(panel.background = theme_rect(fill = "lightsteelblue2"), panel.border = theme_rect(col = "grey"), panel.grid.major = theme_line(col = "grey90"), axis.ticks = theme_blank(), axis.text.x  = theme_text (size = 14, vjust = 0), axis.text.y  = theme_text (size = 14, hjust = 1.3)) 
```

任何解决此问题的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T08:15:32.173

尝试块选项`tidy = FALSE`：

```
```{r tidy=FALSE}
ggplot2(mydata, aes(x, y)) +
  geom_point() +
  geom_line() +
  opts(panel.background = theme_rect(fill = "lightsteelblue2"),
       panel.border = theme_rect(col = "grey"),
       panel.grid.major = theme_line(col = "grey90"),
       axis.ticks = theme_blank(),
       axis.text.x  = theme_text (size = 14, vjust = 0),
       axis.text.y  = theme_text (size = 14, hjust = 1.3))
``` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-19T21:05:43.300

我发现将块的“整洁”设置更改为 false 的一种方法是**添加一个 mid-command 注释**。这似乎使整个块处理为不整洁，从而尊重您在代码中拥有（或没有）的换行符。不幸的是，这不会在特定位置（对于特定行）添加换行符。

示例：将下面的原始文本复制到 Rmd 文件中并使用 knitr 进行处理。

## 整理（即默认）

### 输入

```
```{r eval=FALSE}
# Line comments do not seem to change tidiness.
list(
    sublist=list( 
        suba=10, subb=20 ),
    a=1,
    b=2 ) # End of line comment does not seem to change tidiness.

list(
    sublist=list( 
        suba=10, subb=20 ),
    a=1,
    b=2 )

``` 
```

### 输出

```
# Line comments do not seem to change tidiness.
list(sublist = list(suba = 10, subb = 20), a = 1, b = 2) # End of line comment does not seem to change tidiness.

list(sublist = list(suba = 10, subb = 20), a = 1, b = 2) 
```

## 未整理

### 输入

```
```{r eval=FALSE}
list(
    sublist=list( 
        suba=10, subb=20 ),
    a=1, # Mid-command comment seems to "untidy" the chunk.
    b=2 )

list(
    sublist=list( 
        suba=10, subb=20 ),
    a=1,
    b=2 )

``` 
```

### 输出

```
list(
    sublist=list(
        suba=10, subb=20 ),
    a=1, # Mid-command comment seems to "untidy" the chunk.
    b=2 )

list(
    sublist=list(
        suba=10, subb=20 ),
    a=1,
    b=2 ) 
```

# alphablending - 预乘 alpha 的粒子混合问题

> ID：11306754
> 
> 赞同：1
> 
> 时间：2012-07-03T08:01:15.130
> 
> 标签：alphablending, direct3d9, particles, premultiplied-alpha

我试图从 3D 渲染场景中保存一些纹理，然后让它们重用。
最大的问题是rgb值不能匹配它的alpha值。我需要一些没有黑边的图片，所以我必须使用rgb颜色来划分它的alpha值（Photoshop等图像处理软件只能处理alpha通道未预乘的图片.)
不幸的是，颜色太浅以至于某些结果值被截断为 1。
所以我转向了一种称为预乘 alpha 的技术。（[查看更多](http://blogs.msdn.com/b/shawnhar/archive/2009/11/06/premultiplied-alpha.aspx)）。我没有使用着色器，而是使用单独的 alpha 计算。
例如：
`RenderState.SourceBlend = Blend.SourceAlpha;`
`RenderState.DestinationBlend = Blend.InverseSourceAlpha;`
现在我添加一些渲染状态。
`RenderState.SourceBlendAlpha = Blend.One;`
`RenderState.DestinationBlendAlpha = Blend.InverseSourceAlpha;`
它运作良好。但是当我尝试处理以下事情时：
`RenderState.SourceBlend = Blend.SourceAlpha;`
`RenderState.DestinationBlend = Blend.One;`
`RenderState.SourceBlendAlpha = Blend.One;`
`RenderState.DestinationBlendAlpha = Blend.One;`
结果完全错误，有人可以告诉我原因吗？
PS：现在我明白了。当我使用非预乘混合状态，即SourceAlpha和inverseSourceAlpha。rgba值肯定控制在0~1之间。但是当我切换到加法状态，即SourceAlpha和1时，rgb值可能超过一个，从而导致不正确的值。
现在我的问题是如何控制 alpha 值，以确保它保留所有细节并且不会同时溢出？

# android - 活动返回一张图片

> ID：11306763
> 
> 赞同：8
> 
> 时间：2012-07-03T08:01:45.627
> 
> 标签：android, image, android-intent, android-activity

我想在我的活动中返回一个位图，以便其他应用程序可以使用它。

返回文本很清楚。

```
Intent data = new Intent();
data.putExtra("text1", "text.");
data.putExtra("text2", "longer text.");
setResult(RESULT_OK, data); 
```

但是如何返回位图呢？

更多信息：该活动有几个意图，可供想要获取图像的每个人使用。

```
<intent-filter>
    <action android:name="android.intent.action.GET_CONTENT" />
    <category android:name="android.intent.category.OPENABLE" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
    <data android:mimeType="vnd.android.cursor.dir/image" />
</intent-filter>
<intent-filter>
    <action android:name="android.intent.action.PICK" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
    <data android:mimeType="vnd.android.cursor.dir/image" />
</intent-filter> 
```

编辑：这是一个功能的解决方案：

```
public void finish(Bitmap bitmap) {
    try {
        File folder = new File(Environment.getExternalStorageDirectory() + "/Icon Select/");
        if(!folder.exists()) {
            folder.mkdirs();
        }
        File nomediaFile = new File(folder, ".nomedia");
        if(!nomediaFile.exists()) {
            nomediaFile.createNewFile();
        }

        FileOutputStream out = new FileOutputStream(Environment.getExternalStorageDirectory() + "/Icon Select/latest.png");
        bitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
        File bitmapFile = new File(Environment.getExternalStorageDirectory() + "/Icon Select/latest.png");

        if(bitmapFile.exists()) {
            Intent localIntent = new Intent().setData(Uri.fromFile(bitmapFile));
            setResult(RESULT_OK, localIntent);                
        } else {
            setResult(RESULT_CANCELED);
        }
        super.finish();

    } catch (Exception e) {
        e.printStackTrace();
        Log.d("beewhale", "Error writing data");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T08:21:41.583

虽然我同意`Ovidiu Latcu`，但您可能会遇到内存问题。

将位图存储到 SD 卡上的临时位置可能会更好。然后从那里访问它。（将位图写入和读取到文件）。

或者，如果您确实想将字节数组作为额外的，请先将位图压缩为另一种格式，例如 Jpeg 或类似格式，这将再次减少内存问题的变化。

一个简单的 8M 像素图像，为 32MB（4 层）。这超出了大多数（如果不是全部）手机上允许的应用程序内存使用量。

直接存储到存储是内置相机应用程序如何工作以避免此问题。

这是我处理它的代码：

```
public void showCameraScreen(View view) {
    // BUILT IN CAMERA 
    Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);   
    camera.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(getTempFile(this)) );   
    this.startActivityForResult(camera, 1);

}   

private File getTempFile(Context context) {
    // it will return /sdcard/MyImage.tmp
    final File path = new File(Environment.getExternalStorageDirectory(), context.getPackageName());
    if (!path.exists()) {
        path.mkdir();
    }
    return new File(path, "MyImage.tmp");
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 1 && resultCode == RESULT_OK) {
        final File file = getTempFile(this);

        byte[] _data = new byte[(int) file.length()];
        try {
            InputStream in = new FileInputStream(file);
            in.read(_data);
            in.close();
            in = null;
            //DO WHAT YOU WANT WITH _data. The byte array of your image.
        } catch (Exception E) {

        }
    }
} 
```

注意：您还需要在调用的意图上编写代码，存储到传递的 Uri - 在这里，内置的相机 api 可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:14:09.470

您可以使用[`putExtra(key,byte[])`](http://developer.android.com/reference/android/content/Intent.html)and 传递`bytes`您的`Bitmap`然后在您的`onActivityResult`使用[`BitmapFactory.decodeByteArray()`](http://developer.android.com/reference/android/graphics/BitmapFactory.html)中创建`Bitmap`.

**编辑：**您也可以返回[`Uri`](http://developer.android.com/reference/android/net/Uri.html)您的资源/图片。

# json - 自动完成 jquery.get json 没有完成

> ID：11306766
> 
> 赞同：1
> 
> 时间：2012-07-03T08:02:00.417
> 
> 标签：json, jquery-ui, autocomplete

我在自动完成、使用 JSON 数据时遇到问题。我从回调中得到了正确的响应，但自动完成功能无法正常工作。例如，当我输入“Lon”时，我得到以下响应：

```
[{\"value\":\"Dijon, (DIJ)\",\"code\":\"DIJ\"},{\"value\":\"Longview, (GGG)\",\"code\":\"GGG\"},{\"value\":\"Long Island, (HAP)\",\"code\":\"HAP\"},{\"value\":\"Islip, (ISP)\",\"code\":\"ISP\"},{\"value\":\"Long Banga, (LBP)\",\"code\":\"LBP\"},{\"value\":\"Londrina, (LDB)\",\"code\":\"LDB\"},{\"value\":\"Londonderry, (LDY)\",\"code\":\"LDY\"},{\"value\":\"Long Beach, (LGB)\",\"code\":\"LGB\"},{\"value\":\"Long Lellang, (LGL)\",\"code\":\"LGL\"},{\"value\":\"Long Akah, (LKH)\",\"code\":\"LKH\"},{\"value\":\"Londra, (All airports - LON)\",\"code\":\"LON\"},{\"value\":\" - Londra, Gatwick Arpt (LGW)\",\"code\":\"LGW\"},{\"value\":\" - Londra, London City Arpt (LCY)\",\"code\":\"LCY\"},{\"value\":\" - Londra, Stansted Arpt (STN)\",\"code\":\"STN\"},{\"value\":\" - Londra, London Biggin Hill Arpt (BQH)\",\"code\":\"BQH\"},{\"value\":\" - Londra, Heathrow (LHR)\",\"code\":\"LHR\"}] 
```

但我的自动完成功能只是添加了 Longview 和 Long Island。棘手的是，在我继续输入“Lond”之后，自动完成功能完美，我删除了“d”，自动完成功能完美，它完成了上面的所有数据。

我哪里错了……？这是我的代码：

```
$("#destination2").keyup(function(){
    var term = $("#destination2").val();
    //var query_type = $("#form_type").val();

    jQuery.get('http://online.bileteavion.com.ro/q_travel_online_api/misc/hotels.autocomplete.php?query_type=flight&term='+term, function(data) {

                    data = eval('['+data.responseText.split('[')[1].split(']')[0]+']');
                    var source = $.map(data, function(item) {
                    return {
                        label: item.value,
                        value: item.value,
                        id: item.id,
                        iata: item.iata
                            }
                    });

                    $("#destination2").autocomplete({
                        source: source,
                        minLength: 3,
                        search: function(event, ui) {
                            $('#loading-spinner').show();
                                },
                        change: function(event, ui) {
                            //console.log(ui.item);
                            if( !ui.item ) {
                                $(this).val("");
                                $("input[name='cityId']").val("");
                                $("input[name='destinationIataCode']").val("");
                                $("input[name='destination']").val("");

                            }
                        },
                        open: function() {
                                $('#loading-spinner').hide();
                        },
                        select: function(event, ui) {
                            $("input[name='cityId']").val(ui.item.id);
                            $("input[name='destinationIataCode']").val(ui.item.iata);
                            $("input[name='destination']").val(ui.item.value);
                            $(this).blur();
                        }
                }); 

                }
    );

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:45:56.897

`jquery.autocomplete`不是每次要显示自动完成对话框时都调用的函数。

您应该`jquery.autocomplete`在初始化期间只调用一次，以便为您的输入字段配备一个允许自动完成的完整机制 - 并将处理“keyup”事件。

为了实现您的需要，您应该使用带有`source`选项的回调。

方法如下：

代替 ：

```
$("#destination2").keyup(function(){
     ...
     jquery.get(<url>, function(data){
          var source = ...

          $("#destination2").autocomplete({
             source: source
             minLength: ...
             search: ...
             open: ...
             select: ...
          })
     })
}) 
```

你应该写：

```
$("#destination2").autocomplete({
    source: function(request, response){
       //request is an obj containing infos on what is typed
       //response is a callback, which should be called if you want to display hints
       jQuery.get(url + request.term, function(data){
           var source = ...
           response(source);
       })
    }
    minLength: ...
    search: ...
    open: ...
    select: ...
}) 
```

您应该检查文档中的[远程 JSONP 数据源](http://jqueryui.com/demos/autocomplete/#remote-jsonp "远程 JSONP 数据源")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:45:28.010

我在我的网站上使用它。效果很好。

```
 $("#id").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: 'http://online.bileteavion.com.ro/q_travel_online_api/misc/hotels.autocomplete.php',
                        dataType: "json",
                        data: {
                            //values to pass to server. in your case: query_type & term
                            term: request.term,
                            query_type: 'flight'
                        },
                        success: function (data) {
                            response($.map(eval(data), function (item) {
                                return {
                                      //map values as you previously did
                                      label: item.value,
                                      value: item.value,
                                      id: item.id,
                                      iata: item.iata
                                }
                            })
                            );
                        }
                    })
                },
                minLength: 3,
                search: function(event, ui) {
                    $('#loading-spinner').show();
                },
                change: function(event, ui) {
                     //console.log(ui.item);
                     if( !ui.item ) {
                        $(this).val("");
                        $("input[name='cityId']").val("");
                        $("input[name='destinationIataCode']").val("");
                        $("input[name='destination']").val("");
                     }
                },
                open: function() {
                        $('#loading-spinner').hide();
                },
                select: function(event, ui) {
                    $("input[name='cityId']").val(ui.item.id);
                    $("input[name='destinationIataCode']").val(ui.item.iata);
                    $("input[name='destination']").val(ui.item.value);
                    $(this).blur();
                }
            }); 
```

# wpf - 将 Controls.Image 保存为具有多个 Control.Image 的 PDF

> ID：11306768
> 
> 赞同：2
> 
> 时间：2012-07-03T08:02:06.173
> 
> 标签：wpf, image, controls, save

我来这里是为了解决一个未解决的小问题。也许我没有找到正确的东西，因为我还没有找到解决方案，我希望你能提供帮助。

所以我有一个加载图像的 WPF 应用程序，在这里我没有问题。接下来我必须通过点击添加一些点，所以我有这个功能：

```
 private void ClickMouse(object sender, MouseButtonEventArgs e)
    {
        Point p = e.GetPosition(this);
        schema.PointFromScreen(p);
        var myImage3 = new Image();
        var bi3 = new BitmapImage();
        bi3.BeginInit();
        bi3.UriSource = new Uri(_clickImagePath, UriKind.Relative);
        bi3.EndInit();
        myImage3.Stretch = Stretch.Fill;
        myImage3.Source = bi3;
        myImage3.MinWidth = 30;
        myImage3.MinHeight = 30;
        myImage3.Width = 30;
        myImage3.Height = 30;
        myImage3.Name = _pointName;
        var oMargin = new Thickness(p.X, p.Y, 0, 0);
        myImage3.Margin = oMargin;
        mainCanva.Children.Add(myImage3);
        _listImg.Add(myImage3);
        PointList.Items.Add(_pointName);
    } 
```

问题不在这里，但我需要一个上下文。

现在讨论主要问题。我必须保存最终图像才能制作 PDF。我使用我在这里找到的一段示例代码（http://stackoverflow.com/questions/1824989/how-to-store-system-windows-controls-image-to-local-disk）使用转换为 jpg 文件ITextsharp。我在 PDF 上唯一的东西是第一张图片，所以我承认它可能只需要第一张图像而不是其他创建的图像，但我真的不知道如何修复它。是否存在一些功能来制作图像区域的屏幕截图？或者也许要注意主体 Control.Image 区域中的所有图像？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:04:27.623

您应该使用以下代码将 Canvas 呈现为图像：

```
var rect = new Rect(canvas.RenderSize);
var rtb = new RenderTargetBitmap((int)rect.Right, (int)rect.Bottom, 96d, 96d, System.Windows.Media.PixelFormats.Default);
rtb.Render(canvas);
//encode as PNG
varpngEncoder = new PngBitmapEncoder();
pngEncoder.Frames.Add(BitmapFrame.Create(rtb));

//save to memory stream
using(var ms = new System.IO.MemoryStream())
{
    pngEncoder.Save(ms);

    System.IO.File.WriteAllBytes("logo.png", ms.ToArray());
} 
```

（来源：[将 WPF 输出写入图像文件](https://stackoverflow.com/questions/1082055/write-wpf-output-to-image-file)）

# java - 斯坦福 CoreNLP - 文本到 XML

> ID：11306772
> 
> 赞同：1
> 
> 时间：2012-07-03T08:02:16.983
> 
> 标签：java, stanford-nlp

有人可以向我提供斯坦福 CoreNLP 的 Java 实现，以将文本文件转换为 XML 文件。我可以做同样的事情

```
java -cp stanford-corenlp-2012-05-22.jar;stanford-corenlp-2012-05-22-models.jar;xom.jar;joda-time.jar -Xmx3g edu.stanford.nlp.pipeline.StanfordCoreNLP -annotators tokenize,ssplit,pos,lemma,ner,parse,dcoref -file input.txt 
```

在命令行中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T21:12:39.743

Joop 的答案当然有效，但如果您想深入挖掘而不是将 main 方法用作您的 API，这里有一个完整的示例，显示了将 XML 中的句子分析写入文件。

```
import java.io.*;
import java.util.*;

import edu.stanford.nlp.io.*;
import edu.stanford.nlp.ling.*;
import edu.stanford.nlp.pipeline.*;
import edu.stanford.nlp.trees.*;
import edu.stanford.nlp.util.*;

public class StanfordCoreNlpDemo {

  public static void main(String[] args) throws IOException {
    PrintWriter out;
    if (args.length > 1) {
      out = new PrintWriter(args[1]);
    } else {
      out = new PrintWriter(System.out);
    }
    PrintWriter xmlOut = null;
    if (args.length > 2) {
      xmlOut = new PrintWriter(args[2]);
    }

    StanfordCoreNLP pipeline = new StanfordCoreNLP();
    Annotation annotation;
    if (args.length > 0) {
      annotation = new Annotation(IOUtils.slurpFileNoExceptions(args[0]));
    } else {
      annotation = new Annotation("Kosgi Santosh sent an email to Stanford University. He didn't get a reply.");
    }

    pipeline.annotate(annotation);
    pipeline.prettyPrint(annotation, out);
    if (xmlOut != null) {
      pipeline.xmlPrint(annotation, xmlOut);
    }
    // An Annotation is a Map and you can get and use the various analyses individually.
    // For instance, this gets the parse tree of the first sentence in the text.
    List<CoreMap> sentences = annotation.get(CoreAnnotations.SentencesAnnotation.class);
    if (sentences != null && sentences.size() > 0) {
      CoreMap sentence = sentences.get(0);
      Tree tree = sentence.get(TreeCoreAnnotations.TreeAnnotation.class);
      out.println();
      out.println("The first sentence parsed is:");
      tree.pennPrint(out);
    }
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:19:00.030

在java中你可以这样称呼它：

```
import edu.stanford.nlp.pipeline.StanfordCoreNLP; 
```

...

```
StanfordCoreNLP.main(new String[] {
    "-annotators", "tokenize,ssplit,pos,lemma,ner,parse,dcoref",
    "-file", "input.txt" }); 
```

*（如果这足够了）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T12:08:04.690

在下载[的 CoreNLP 的 zip中使用 StanfordCoreNlpDemo.java](http://nlp.stanford.edu/software/stanford-corenlp-full-2014-06-16.zip)

# wordpress - Wordpress 帖子类别：如何排除儿童？

> ID：11306776
> 
> 赞同：0
> 
> 时间：2012-07-03T08:02:35.970
> 
> 标签：wordpress, categories, children, grandchild

我有这样的类别结构......

```
- Shirts
   - Small
         - Red
         - blue
         - green
   - Medium
   - Large
- Jackets
- Hats 
```

...“衬衫”的 ID 为 1。当我这样做时...

```
<ul>
<?php 
query_posts('cat=1&showposts=10&order=ASC'); 
if (have_posts()) : while (have_posts()) : the_post(); ?>
    <li>
    <a href="<?php the_permalink() ?>"><?php the_title(); ?></a>
    </li>
<?php endwhile; else: ?>
<?php _e('Nothing Here!'); ?>
<?php endif; ?>
</ul> 
```

... 不仅显示 Shirts 的孩子，还显示孙子。为了说明，屏幕上的输出显示小、红、蓝、绿、中和大，而不仅仅是小、中和大。

我怎样才能排除孙子？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:15:54.363

您可以尝试使用 category__not_in 参数吗？例如

```
query_posts(array('cat' => 1, 'showposts' => 10, 'order' => 'ASC', 'category__not_in' => array(grandchildren_ids))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:34:25.520

为您的查询添加深度：

```
<?php query_posts('cat=1&showposts=10&order=ASC&depth=1'); ?> 
```

# c# - 了解模型视图演示 (MVP)

> ID：11306778
> 
> 赞同：3
> 
> 时间：2012-07-03T08:02:36.023
> 
> 标签：c#, asp.net, mvp

我搜索了很多MVP，但是我没有找到任何可以帮助我很好理解它的好文章。有没有人知道关于这个主题的任何好文章，以及真实世界的例子来帮助我更好地理解它？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:33:16.083

查看我对 so 帖子的回答，这可能会对您有所帮助：

[ASP.net Model View Presenter 值得花时间吗？](https://stackoverflow.com/a/824586/743)

它通过了 MVP 和 MVC 之间的差异，因为这两者经常被对比。
此外，还有一些有用的链接，展示了如何轻松地将 MVP 模型拟合到现有的 ASP.Net 网站。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T08:12:51.803

[ASP.NET 监督控制器（模型视图演示器）从原理图到单元测试到代码](http://haacked.com/archive/2006/08/09/ASP.NETSupervisingControllerModelViewPresenterFromSchematicToUnitTestsToCode.aspx)

[Asp.net的MVP设计模式最简单的例子](http://www.c-sharpcorner.com/uploadfile/vendettamit/simplest-example-of-mvp-design-patter-of-Asp-Net/)

[使用 ASP.NET 的模型视图演示器](http://www.codeproject.com/Articles/14642/Model-View-Presenter-with-ASP-NET)

[与 ASP.NET 一起使用的非常快速的 MVP 模式](http://weblogs.asp.net/scottcate/archive/2007/04/12/very-quick-mvp-pattern-to-use-with-asp-net.aspx)

**已编辑**

另一个链接： [Model View Presenter (MVP) Design Pattern with .NET - Winforms vs. ASP.NET Webforms](http://aviadezra.blogspot.in/2008/10/model-view-presenter-design-pattern.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T08:21:39.507

这是一个致力于在 asp.net 上进行 mvp 的网站：[http](http://webformsmvp.com/) : //webformsmvp.com/ 作为一种模式的 MVP 有点过时了 - MVC（它具有出色的 asp.net 框架和支持）和 MVVM（事实上的 WPF 模式） ) 已在很大程度上接管。事实上，Martin Fowler（MVP 的发明者）已经在他的网站上记录了该模式确实应该分为两种模式，被动视图和监督控制器：[http ://martinfowler.com/eaaDev/ModelViewPresenter.html](http://martinfowler.com/eaaDev/ModelViewPresenter.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T09:11:39.847

如果您想深入了解此模式，请查看**Web Client Software Factory 2010**工具。

该工具主要用于创建*复合 Web 应用程序（模块）*，但视图是使用 MVP 模式实现的。如果您要维护传统的 ASP.Net 代码，或者如果您想深入了解 ASP.Net 范例，那么检查该工具的源代码是一个很好的起点。

这个工具需要你在 Visual Studio 中安装几个扩展，然后，你可以创建一个特殊的 Web 项目来为你实现 MVP，它将上下文菜单添加到 Visual Studio 以方便任务

例子：

*   创建一个新项目

![创建项目](../Images/ef108446cafb72631695a7ac17aa8de2.png)

*   使用演示者添加视图

![使用演示者添加视图](../Images/332f9dae292be2d8a9944285a21f8a8e.png)

*   检查生成的文件

![检查生成的文件](../Images/834d773d43056d95ecc06a0ccf633791.png)

*   检查默认生成的代码：

    ```
     public partial class MyNewView : Microsoft.Practices.CompositeWeb.Web.UI.Page, IMyNewViewView
         {
            private MyNewViewPresenter _presenter;

            protected void Page_Load(object sender, EventArgs e)
            {
                if (!this.IsPostBack)
                {
                    this._presenter.OnViewInitialized();
                }
                this._presenter.OnViewLoaded();
            }

            [CreateNew]
            public MyNewViewPresenter Presenter
            {
                get
                {
                    return this._presenter;
                }
                set
                {
                    if (value == null)
                        throw new ArgumentNullException("value");

                    this._presenter = value;
                    this._presenter.View = this;
                }
            }

            // TODO: Forward events to the presenter and show state to the user.
            // For examples of this, see the View-Presenter (with Application Controller) QuickStart:
            //  

        }

        public interface IMyNewViewView
        {
        }

        public class MyNewViewPresenter : Presenter<IMyNewViewView>
        {

            // NOTE: Uncomment the following code if you want ObjectBuilder to inject the module controller
            //       The code will not work in the Shell module, as a module controller is not created by default
            //
            // private IShellController _controller;
            // public MyNewViewPresenter([CreateNew] IShellController controller)
            // {
            //      _controller = controller;
            // }

            public override void OnViewLoaded()
            {
                // TODO: Implement code that will be executed every time the view loads
            }

            public override void OnViewInitialized()
            {
                // TODO: Implement code that will be executed the first time the view loads
            }

            // TODO: Handle other view events and set state in the view
        } 
    ```

抢夺工具：

*   [http://webclientguidance.codeplex.com/wikipage?title=Web%20Client%20Software%20Factory&referringTitle=Home](http://webclientguidance.codeplex.com/wikipage?title=Web%20Client%20Software%20Factory&referringTitle=Home)

*   [http://msdn.microsoft.com/en-us/library/ff648752.aspx](http://msdn.microsoft.com/en-us/library/ff648752.aspx)

顺便说一句，如果您要开始一个新项目，使用 MVC 应该是一个更好的主意，如果您需要编辑现有应用程序，您可以以 Web 客户端软件工厂中 MVP 的实现为基础。

如果您有兴趣，我认为有一个解决方法可以将现有应用程序转换为使用 Web 客户端软件工厂

# apache - 网页开发L: PHP & Apache

> ID：11306781
> 
> 赞同：0
> 
> 时间：2012-07-03T08:02:48.483
> 
> 标签：apache, webserver, tomcat7

我试图用 PHP 写博客，我下载了 PHP 5、Notepad++ 和 Apache Tomecat 7。

问题是我不知道在哪里保存我写的 .Php 文件，所以我可以使用 Apache 服务器打开它们。

有人可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:04:53.260

您不需要用于 Java 应用程序的 Tomcat 服务器。

最好的办法是安装[WAMP](http://www.wampserver.com/en/)（在 Windows 上）或[LAMP](http://www.lamphowto.com/)（在 Linux 上），然后你就拥有了包括 MySQL 在内的所有工具来开始编码。Apache 服务器预先配置为与 PHP 一起使用。

如果你在 Windows 上编码，那么 WAMP 是一个单一的安装包。

有很多教程可以帮助您，但基本上您的 Apache 服务器的配置文件中将有一个名为“www”的 Web 根目录。那是您放置所有 php 和 html 文件等的地方。

**[编辑]**

阅读一些评论，为您的*本地开发*推荐 WAMP 或 XAMP 。您可以在笔记本电脑上舒适地运行所有这些。在向世界发布您的应用程序时，您可能希望选择支持 PHP 的托管服务，并为您处理所有服务器配置。您只需复制您的 PHP 代码文件并创建数据库。

# windows - 安装 Windows 示例端口监视器 localmon 时出错

> ID：11306787
> 
> 赞同：1
> 
> 时间：2012-07-03T08:03:09.993
> 
> 标签：windows, printing, device-driver, wdk

我正在尝试安装 WDK 中提供的 Windows 示例端口监视器（localmon）。但是我在安装它时不断收到错误：

> 安装端口监视器“DDK 示例端口监视器”时出错。请联系制造商寻求帮助。

我正在使用以下说明进行安装：-

> 打开“设备和打印机”文件夹。右键单击我的目标打印机并选择“打印机属性”。单击“端口”选项卡，然后单击“添加端口...”按钮。在打印机端口对话框中，单击“新端口类型...”按钮。在文本输入框中键入 INF 文件的路径，然后单击“确定”。

我正在使用 Windows 7 64 位版本。以下是我的 INF 文件。

```
; monitor.inf
;
; Installation inf for printer port monitor
;
; (c) Copyright 2001-2003 DDK Example for print monitor installation
;

[Version]
Signature="$Windows NT$"
Provider=%PMProducer%
ClassGUID={4D36E979-E325-11CE-BFC1-08002BE10318}
Class=Printer

[PortMonitors]
"DDK Sample Port Monitor" = sampleportmon

[sampleportmon]
CopyFiles=@ddklocalmon.dll, @ddklocalui.dll
PortMonitorDll=ddklocalmon.dll

[SourceDisksFiles]
ddklocalmon.dll=1,,
ddklocalui.dll=1,,

[SourceDisksNames]
1="Sample Port Monitor Installation Disk",,,

[Strings]
PMProducer="Sample Port Monitor Company, Inc." 
```

有人可以在这里帮助我吗？

非常感谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T03:25:56.980

我终于能够解决这个问题。这是一个权限问题。在 Windows 7 中以管理员权限访问打印机属性的方法是通过控制面板、系统和安全、管理工具，然后右键单击打印管理，然后以管理员身份运行。一旦我这样做了，我就可以安装端口监视器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-30T03:21:18.187

# 问题之旅

在端口监视器的 INF 文件中，需要将端口监视器 DLL 安装到 Windows\System32 中。

按照语言端口监视器的 WDK 示例，人们会认为 [DestinationDirs] 目录 id 可能是 66002。请注意，端口监视器示例 .inf 省略了提供 [DestinationDir] 部分。 [https://docs.microsoft.com/en-us/windows-hardware/drivers/print/installing-a-print-monitor](https://docs.microsoft.com/en-us/windows-hardware/drivers/print/installing-a-print-monitor)

打印机dirids 的文档似乎证实了这一点。 [https://docs.microsoft.com/en-us/windows-hardware/drivers/print/printer-dirids](https://docs.microsoft.com/en-us/windows-hardware/drivers/print/printer-dirids)

```
[DestinationDirs] 
DefaultDestDir = 66002 
```

> 迪里德：66002；用途：表示要复制到本地系统\System32 的附加文件的目录路径。见本表后面的段落。目录内容：打印监控文件

请注意，INFGate 工具将提供以下警告：

`.\monitor.inf(xx): warning 8503: (DW22.23.8503) Use of DirID 66002 prevents full remote/point-and-print installation.`

但是，这在实践中仍然行不通。尝试再次使用 66002 安装端口监视器会出现与我们开始时相同的错误。

```
Installing Port Monitor
---------------------------
An error occurred installing port monitor 'DDK sample port monitor'. Please contact the  manufacturer for assistance.
---------------------------
OK   
--------------------------- 
```

# 解决方案

驱动程序文档有另一个目录 ID 列表，还有另一个：

[https://docs.microsoft.com/en-us/windows-hardware/drivers/install/using-dirids](https://docs.microsoft.com/en-us/windows-hardware/drivers/install/using-dirids)

> 11 系统目录。对于 Windows 2000 和更高版本的 Windows，这相当于 %SystemRoot%\system32。

我的经验是，对系统目录使用 Dirid 值 11 似乎适用于 Windows XP 和 10 的端口监视器。

```
[DestinationDirs] 
DefaultDestDir = 11 
```

请注意，尽管 INFGate 有效，但仍会提供有关其不鼓励使用的警告。 `.\monitor.inf(56): warning 8505: (DW22.23.8505) DirID DefaultDestDir=11 is discouraged. Should be in 66000-66004 range in order to support remote install.`

# python - 使用 matplotlib 注释烛台图

> ID：11306790
> 
> 赞同：1
> 
> 时间：2012-07-03T08:03:31.540
> 
> 标签：python, matplotlib

我正在尝试使用 matplotlib“注释”烛台图，但我很难找到每根蜡烛的坐标以便进行注释。例如，我想在特定蜡烛上方或下方写一个数字..

关于如何进行的任何想法？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:42:38.740

如果您至少指出您已经尝试过哪些方法，那就更好了。如果我们以文档[http://matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html](http://matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html)中的示例为例并添加以下行：

```
import datetime
dt = datetime.datetime(2004, 3, 8)

ax.annotate('A bad day at the office', xy=(dt, 24), xytext=(dt, 25),
            arrowprops=dict(facecolor='black', shrink=0.05),
           ) 
```

就在演出之前，这是否达到了您的要求？

# c# - 使用 iTextSharp 填充 PDF 表单域

> ID：11306792
> 
> 赞同：3
> 
> 时间：2012-07-03T08:03:35.150
> 
> 标签：c#, itextsharp

我尝试用 C# 填写 PDF 表单。但不知何故，它不起作用。问题：`fields`对象（在行中：`fields.SetField("Name", "Peter");`）似乎是`null`.

这是我的代码：

```
public static void FillForm()
{
    String pdfTemplate = @"c:\Users\Hagen\Desktop\formular.pdf";
    String newFile = @"c:\Users\Hagen\Desktop\formular_fertig.pdf";
    PdfReader pdfReader = new PdfReader(pdfTemplate);
    PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileStream(newFile, FileMode.Create));
    AcroFields fields = pdfStamper.AcroFields;
    fields.SetField("Name", "Peter");
    pdfStamper.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:33:34.783

我记得当我第一次尝试填写表单域时遇到了类似的问题。初始化 pdfStamper 的行；

```
PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileStream(newFile, FileMode.Create)); 
```

尝试像这样向压模对象添加读写权限。

```
PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileStream(newFile, FileMode.Create, FileAccess.ReadWrite)); 
```

那可能是你的问题。我不记得我自己是如何解决这个问题的，但这就是我最初想到的。它很可能正在尝试写入字段值，但压模没有完成此操作所需的 FileAccess。

希望这可以帮助

# asp.net - Sitecore 媒体项目下载

> ID：11306794
> 
> 赞同：2
> 
> 时间：2012-07-03T08:03:53.520
> 
> 标签：asp.net, sitecore, sitecore6, sitecore-dms

我需要获取媒体库中每个文档的下载次数。我正在使用 Sitecore 6.4.1 和 Sitecore OMS 1.1.1。是否有 Sitecore 内置方式或 API 允许我检索此类信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:25:04.680

好吧，您无法确保下载已完成，但已注册点击，因此您可以转到媒体项目，单击分析选项卡，然后进行报告。据我记得，您现在应该能够选择点击报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:00:50.940

您需要确保下载被 OMS 捕获的第一件事。您必须将下载事件与下载的项目相关联。完成此操作后，您可以转到下载报告并查看下载次数。但是，如果您不将下载事件与该项目相关联，它将不会触发页面事件，因此将无法在 OMS 中进行跟踪。

# java - 连接被拒绝异常

> ID：11306795
> 
> 赞同：0
> 
> 时间：2012-07-03T08:04:11.480
> 
> 标签：java, android

我得到了这个例外：

```
org.apache.http.conn.HttpHostConnectException: Connection to http://www.google.es refused
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)
at sdf.main(sdf.java:17)
Caused by: java.net.ConnectException: Connection refused: connect
at java.net.TwoStacksPlainSocketImpl.socketConnect(Native Method)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
... 8 more 
```

我正在运行的代码是这个：

```
public class sdf {

static String url = "http://www.google.es";

public static void main(String[] args) {

    try {
        BufferedReader br = new BufferedReader(new InputStreamReader(
                new DefaultHttpClient().execute(new HttpGet(url))
                        .getEntity().getContent()));
        String line;
        while ((line = br.readLine()) != null) {
            System.out.println(line);
        }

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
} 
```

url 的值是什么并不重要，它不会起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:16:09.930

您是否拥有经过正确许可的清单？这是你必须做的一个例子：

```
<manifest xlmns:android...>
 ...
      <uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

没有这个，您将无法连接互联网

# c++ - goto 跨越初始化

> ID：11306799
> 
> 赞同：21
> 
> 时间：2012-07-03T08:04:32.730
> 
> 标签：c++

假设我有一些 C++ 代码：

```
if (error)
    goto exit;
... 
// size_t i = 0; //error
size_t i;
i = 0;
...
exit:
    ... 
```

我知道我们不应该使用`goto`，但为什么仍然使用

```
size_t i;
i = 0; 
```

编译而不编译`size_t i = 0;`？

为什么标准会强制执行这种行为（@SingerOfTheFall 提到）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-03T08:11:19.430

您不能跳过对象的初始化。

```
size_t i = 0; 
```

是一个初始化，而

```
size_t i;
i = 0; 
```

不是。

C++ 标准说：

> 可以转移到一个块中，但不能通过初始化绕过声明的方式。从具有自动存储持续时间的局部变量不在范围内的点跳转到它在范围内的点的程序是格式错误的，除非该变量具有 POD 类型 (3.9) 并且在没有初始化程序的情况下声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:25:34.157

该规则的原因是跳过初始化会使对象处于未定义状态。当你到达函数的末尾时，销毁那些未初始化的对象可能不起作用。

一个例外显然是

```
int   i; 
```

无论如何都会留下`int`未初始化的，所以跳过它只是坏了一半。

如果你想提前离开一个函数，一个快速`return`的选项是避免`goto`.

# c - yuv420p to rgb image conversion

> ID：11306802
> 
> 赞同：1
> 
> 时间：2012-07-03T08:04:42.600
> 
> 标签：c, image, visual-studio-2008, image-processing, opengl-es-2.0

The first part is to open the file and load it to yuv1 buffer. The next stage is reading the YUV420p data correctly i use this formula from wiki

```
 size.total = size.width * size.height;
      y = yuv[position.y * size.width + position.x];
      u = yuv[(position.y / 2) * (size.width / 2) + (position.x / 2) + size.total];
      v = yuv[(position.y / 2) * (size.width / 2) + (position.x / 2) + size.total + (size.total / 4)]; 
```

next stage is to take the values from y u v and convert to rgb using the formula below

B = 1.164(Y - 16) + 2.018(U - 128)

G = 1.164(Y - 16) - 0.813(V - 128) - 0.391(U - 128)

R = 1.164(Y - 16) + 1.596(V - 128)

After getting RGB we load them back to buffer correctly and close the file.

But i am getting this error error C2064: term does not evaluate to a function taking 302 arguments in the three formula lines.

Can someone help me out

Error code

```
 r1 = 1.164(y1 - 16) + 1.596(v1 - 128) +     0;
        g1 = 1.164(y1 - 16) - 0.813(v1 - 128) - 0.391(u1 - 128);
        b1 = 1.164(y1 - 16)+          0         + 2.018(u1 - 128); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:15:11.897

Did you just paste the mathematical formula into your C code? That won't work.

You'll need to fix the upper/lower case writing of your variables. And you'll need an explicit multiplication sign:

```
b = 1.164 * (y - 16) + 2.018 * (u - 128);
g = 1.164 * (y - 16) - 0.813 * (v - 128) - 0.391 * (u - 128);
r = 1.164 * (y - 16) + 1.596 * (v - 128); 
```

And depending on the type of the b, g and r variables, you'll need to cast or round the floating point result to an integer value.

# java - 如何在Java中获取调用者类

> ID：11306811
> 
> 赞同：76
> 
> 时间：2012-07-03T08:05:34.580
> 
> 标签：java

我想获取方法的调用者类，即

```
class foo{

  bar();

} 
```

在方法栏中，我需要获取类名`foo`，我找到了这个方法：

```
Class clazz = sun.reflect.Reflection.getCallerClass(1); 
```

然而，即使`getCallerClass`是`public`，当我尝试称它为 Eclipse 时，它​​会说：

> 访问限制：由于对所需库 C:\Program Files\Java\jre7\lib\rt.jar 的限制，无法访问 Reflection 类型的方法 getCallerClass()

还有其他选择吗？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-07-03T08:09:11.753

您可以生成堆栈跟踪并使用[StackTraceElements](http://docs.oracle.com/javase/6/docs/api/java/lang/StackTraceElement.html)中的信息。

例如，实用程序类可以返回调用类名：

```
public class KDebug {
    public static String getCallerClassName() { 
        StackTraceElement[] stElements = Thread.currentThread().getStackTrace();
        for (int i=1; i<stElements.length; i++) {
            StackTraceElement ste = stElements[i];
            if (!ste.getClassName().equals(KDebug.class.getName()) && ste.getClassName().indexOf("java.lang.Thread")!=0) {
                return ste.getClassName();
            }
        }
        return null;
     }
} 
```

如果你打电话`KDebug.getCallerClassName()`，`bar()`你会得到`"foo"`。

现在假设您想知道方法调用的类`bar`（这更有趣，也许是您真正想要的）。您可以使用此方法：

```
public static String getCallerCallerClassName() { 
    StackTraceElement[] stElements = Thread.currentThread().getStackTrace();
    String callerClassName = null;
    for (int i=1; i<stElements.length; i++) {
        StackTraceElement ste = stElements[i];
        if (!ste.getClassName().equals(KDebug.class.getName())&& ste.getClassName().indexOf("java.lang.Thread")!=0) {
            if (callerClassName==null) {
                callerClassName = ste.getClassName();
            } else if (!callerClassName.equals(ste.getClassName())) {
                return ste.getClassName();
            }
        }
    }
    return null;
 } 
```

那是为了调试吗？如果没有，可能会有更好的解决方案来解决您的问题。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-01-22T14:13:27.617

**堆栈跟踪**

这高度取决于您要查找的内容...但这应该直接在此对象中获取调用此方法的类和方法。

*   索引 0 = 线程
*   索引 1 = 这个
*   索引 2 = 直接调用者，可以是自己。
*   索引 3 ... n = 相互调用以到达索引 2 及以下的类和方法。

对于类/方法/文件名：

```
Thread.currentThread().getStackTrace()[2].getClassName();
Thread.currentThread().getStackTrace()[2].getMethodName();
Thread.currentThread().getStackTrace()[2].getFileName(); 
```

上课：

```
Class.forName(Thread.currentThread().getStackTrace()[2].getClassName()) 
```

仅供参考： Class.forName() 抛出一个不是运行时的 ClassNotFoundException。你需要尝试捕捉。

此外，如果您希望忽略类本身的调用，则必须添加一些带有逻辑的循环来检查该特定事物。

像......（我没有测试过这段代码，所以要小心）

```
StackTraceElement[] stes = Thread.currentThread().getStackTrace();
for(int i=2;i<stes.length;i++)
  if(!stes[i].getClassName().equals(this.getClass().getName()))
    return stes[i].getClassName(); 
```

* * *

**StackWalker**

[StackWalker](https://docs.oracle.com/javase/9/docs/api/java/lang/StackWalker.html) [堆栈帧](https://docs.oracle.com/javase/9/docs/api/java/lang/StackWalker.StackFrame.html)

请注意，这不是一个广泛的指南，而是一个可能性示例。

打印每个 StackFrame 的 Class（通过获取 Class 引用）

```
StackWalker.getInstance(Option.RETAIN_CLASS_REFERENCE)
    .forEach(frame -> System.out.println(frame.getDeclaringClass())); 
```

做同样的事情，但首先将流收集到一个列表中。仅用于演示目的。

```
StackWalker.getInstance(Option.RETAIN_CLASS_REFERENCE)
    .walk(stream -> stream.collect(Collectors.toList()))
    .forEach(frame -> System.out.println(frame.getDeclaringClass())); 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2014-01-27T06:25:30.090

要获取调用者/被调用的类名，请使用下面的代码，它对我来说很好。

```
String callerClassName = new Exception().getStackTrace()[1].getClassName();
String calleeClassName = new Exception().getStackTrace()[0].getClassName(); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-01-29T11:17:10.493

`SecurityManager`有一个受保护的方法[getClassContext](https://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html#getClassContext())

通过创建一个扩展 SecurityManager 的实用程序类，您可以访问它。

```
public class CallingClass extends SecurityManager {
    public static final CallingClass INSTANCE = new CallingClass();

    public Class[] getCallingClasses() {
        return getClassContext();
    }
} 
```

用于`CallingClass.INSTANCE.getCallingClasses()`检索调用类。

还有一个小型图书馆（免责声明：我的）[WhoCalled](https://github.com/nallar/WhoCalled)，它公开了这些信息。它在可用时使用 Reflection.getCallerClass，否则回退到 SecurityManager。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-07-02T02:23:14.780

我知道这是一个老问题，但我相信提问者想要的是课程，而不是课程名称。我写了一个小方法来获取实际的类。这有点作弊，可能并不总是有效，但有时当您需要实际课程时，您将不得不使用这种方法......

```
/**
     * Get the caller class.
     * @param level The level of the caller class.
     *              For example: If you are calling this class inside a method and you want to get the caller class of that method,
     *                           you would use level 2\. If you want the caller of that class, you would use level 3.
     *
     *              Usually level 2 is the one you want.
     * @return The caller class.
     * @throws ClassNotFoundException We failed to find the caller class.
     */
    public static Class getCallerClass(int level) throws ClassNotFoundException {
        StackTraceElement[] stElements = Thread.currentThread().getStackTrace();
        String rawFQN = stElements[level+1].toString().split("\\(")[0];
        return Class.forName(rawFQN.substring(0, rawFQN.lastIndexOf('.')));
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-03T08:27:49.420

这是获取调用者类的最有效方法。其他方法采用整个堆栈转储，只给你类名。

但是，这个类在`sun.*`其中确实是供内部使用的。这意味着它可能无法在其他 Java 平台甚至其他 Java 版本上运行。你必须决定这是否是一个问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-28T02:32:10.030

OP 遇到的错误消息只是 Eclipse 功能。如果您愿意将您的代码绑定到 JVM 的特定制造商（甚至版本），您可以有效地使用 method `sun.reflect.Reflection.getCallerClass()`。然后，您可以在 Eclipse 之外编译代码或将其配置为不将此诊断视为错误。

更糟糕的 Eclipse 配置是通过以下方式禁用**所有**出现的错误：

`Project Properties`///设置为选中`Java Compiler`//设置为`Errors/Warnings`或。`Enable project specific settings``Deprecated and restrited API``Forbidden reference (access rules)``Warning``Ignore`

更好的 Eclipse 配置是通过以下方式禁用特定的错误发生：

`Project Properties`///展开`Java Build Path`/选择`Libraries`///设置为或/设置为。`JRE System Library``Access rules:``Edit...``Add...``Resolution:``Discouraged``Accessible``Rule Pattern``sun/reflect/Reflection`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-03T08:13:04.420

在下面找到一个简单的示例，说明如何获取类和方法名称。

```
public static void main(String args[])
   {
      callMe();
   }

   void callMe()
   {
      try
      {
         throw new Exception("Who called me?");
      }
      catch( Exception e )
      {
         System.out.println( "I was called by " + 
                             e.getStackTrace()[1].getClassName() + 
                             "." +
                             e.getStackTrace()[1].getMethodName() + 
                             "()!" );
      }
   } 
```

e 有`getClassName()`, `getFileName()`,`getLineNumber()`和`getMethodName()`...

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-15T09:20:33.983

由于我目前有同样的问题，这就是我所做的：

1.  我更喜欢 com.sun.Reflection 而不是 stackTrace，因为堆栈跟踪只产生名称而不是类（包括类加载器）本身。

2.  该方法已被弃用，但在 Java 8 SDK 中仍然存在。

> // 方法描述符 #124 (I)Ljava/lang/Class; （已弃用） // 签名：(I)Ljava/lang/Class<*>; @java.lang.Deprecated public static native java.lang.Class getCallerClass(int arg0);

3.  不推荐使用没有 int 参数的方法

> // 方法描述符 #122 ()Ljava/lang/Class; // 签名：()Ljava/lang/Class<*>; @sun.reflect.CallerSensitive public static native java.lang.Class getCallerClass();

由于我必须独立于平台，包括安全限制，我只是创建了一个灵活的方法：

1.  检查 com.sun.Reflection 是否可用（安全异常禁用此机制）

2.  如果 1 是，则获取带有 int 或没有 int 参数的方法。

3.  如果 2 是，则调用它。

如果 3\. 从未达到，我使用堆栈跟踪返回名称。我使用了一个包含类或字符串的特殊结果对象，该对象准确地说明了它是什么以及为什么。

[总结]我使用stacktrace进行备份并绕过我使用反射的eclipse编译器警告。效果很好。保持代码干净，像魅力一样工作，并正确说明所涉及的问题。

我用了很长时间，今天我搜索了一个相关的问题，所以

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-15T13:50:05.390

我正在使用以下方法从堆栈跟踪中获取特定类的调用者：

```
package test.log;

public class CallerClassTest {

    public static void main(final String[] args) {
        final Caller caller = new Caller(new Callee());
        caller.execute();
    }

    private static class Caller {

        private final Callee c;

        public Caller(final Callee c) {
            this.c = c;
        }

        void execute() {
            c.call();
        }
    }

    static class Callee {

        void call() {
            System.out.println(getCallerClassName(this.getClass()));
        }
    }

    /**
     * Searches the current threads stacktrace for the class that called the given class. Returns {@code null} if the
     * calling class could not be found.
     * 
     * @param clazz
     *            the class that has been called
     * 
     * @return the caller that called the class or {@code null}
     */
    public static String getCallerClassName(final Class<?> clazz) {
        final StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();
        final String className = clazz.getName();
        boolean classFound = false;
        for (int i = 1; i < stackTrace.length; i++) {
            final StackTraceElement element = stackTrace[i];
            final String callerClassName = element.getClassName();
            // check if class name is the requested class
            if (callerClassName.equals(className)) classFound = true;
            else if (classFound) return callerClassName;
        }
        return null;
    }

} 
```

# android - 如何备份android日历文件？

> ID：11306814
> 
> 赞同：1
> 
> 时间：2012-07-03T08:06:08.947
> 
> 标签：android, calendar, backup

有谁知道，我需要保存哪些文件才能进行简单的备份？我提出问题的原因是，我的 Galaxy Android 智能手机在没有任何交互的情况下丢失了所有日历数据。我发现了大量的应用程序、大量的同步内容，但没有要保存的简单文件列表。我不想将我的数据远程保存在 Google 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:40:29.083

也在找这个，这是我能找到的最好的：

[http://comments.gmane.org/gmane.comp.calendars.pimlical/21657](http://comments.gmane.org/gmane.comp.calendars.pimlical/21657)

此外，最终使用此应用程序保存了一些日历。

[https://android.stackexchange.com/questions/25210/how-to-backup-the-android-calendar-file-is-there-such-a-file](https://android.stackexchange.com/questions/25210/how-to-backup-the-android-calendar-file-is-there-such-a-file)

# android - 同时下载+缓存+播放音频

> ID：11306817
> 
> 赞同：4
> 
> 时间：2012-07-03T08:06:37.700
> 
> 标签：android, caching, audio, android-mediaplayer

有没有一种漂亮的方法可以通过 HTTP 下载 MP3 文件并将其缓存，同时播放？

我试图将下载的字节写入文件并使用 MediaPlayer 播放该文件。但是当播放速度达到下载速度时，播放停止。我不认为我在思考正确的方向。写入文件并同时读取它似乎很奇怪，还是我错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-09T14:04:45.707

> > > > 但是当播放速度达到下载速度时，播放停止。

这是关键：无论您如何在客户端处理文件、字节等，您都无法播放尚未下载的内容。

大多数尝试“实时”播放的应用程序都有足够长的缓冲区来补偿下载速度的波动。如果下载速度实际上比播放速度慢（这对于音频流来说是不寻常的，但可能），您的目标可能根本无法实现 - 您可能必须在播放之前下载整首歌曲，以确保在回放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:32:17.470

我发现[了一些东西](https://web.archive.org/web/20140316005331/http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/)。几乎是我的方式，但是通过复制文件可以避免写入/读取一个文件。

# php - 自定义产品类型价格未编入索引

> ID：11306818
> 
> 赞同：2
> 
> 时间：2012-07-03T08:06:39.170
> 
> 标签：php, magento, magento-1.6

我创建了一个新的产品类型，除了价格索引之外，一切正常。我检查了 catalog_product_index_price 表，所有值都是 NULL。事实证明，这给分层导航带来了一些问题（负值）。我是否必须调用一个函数才能将我的价格编入索引？

*编辑*创建的产品类型是在捆绑产品的图像中创建的。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:21:40.067

捆绑产品的价格索引器是`Mage_Bundle_Model_Price_Index`和`Mage_Bundle_Model_Resource_Indexer_Price`，由配置节点引用`global/catalog/product/type/bundle/price_indexer`。第一个还将价格指数添加到捆绑产品的产品集合中。您是否为当前产品类型创建了索引器？

# android - 如何访问 android xml 布局文件中包含的视图内的元素？

> ID：11306830
> 
> 赞同：2
> 
> 时间：2012-07-03T08:07:34.570
> 
> 标签：android, android-layout

我创建了一个布局，并在其中包含了一个 android 布局：

```
<include
    layout="@android:layout/simple_list_item_multiple_choice" /> 
```

一旦我的整个视图被夸大了，我怎样才能访问里面的元素`simple_list_item_multiple_choice`？我想有一个 TextView 和一个 CheckBox 我应该可以使用，但它们的 id 是什么？

编辑：我需要充气不止一件事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:14:19.987

您可以这样做访问它：

```
CheckedTextView ctv = (CheckedTextView)findViewById(android.R.id.text1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:26:13.323

我通过提供声明来完成这些`@+id`任务`<include/>`。所以对于你上面的例子，我会写......

```
 <include
  android:id="@+id/listItemMultiChoiceWrapper"
  layout="@android:layout/simple_list_item_multiple_choice" /> 
```

然后，您可以通过在活动/片段级别写入来访问*text1*字段（无论您在哪里设置包含 的视图`<include/>`）

```
 final CheckedTextView ctv = (CheckedTextView) findViewById(id.listItemMultiChoiceWrapper).findViewById(id.text1); 
```

If that doesn't work then check for duplicate ids confusing the situation (Lint should pick these up too).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T08:12:40.480

这是 Android SDK 中 simple_list_item_multiple_choice 的代码：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:textAppearance="?android:attr/textAppearanceListItem"
    android:gravity="center_vertical"
    android:checkMark="?android:attr/listChoiceIndicatorMultiple"
    android:paddingLeft="8dip"
    android:paddingRight="8dip"
/> 
```

我想你可以从这里处理它。

# java - 在 JFrame 中切换 JPanel 并返回

> ID：11306832
> 
> 赞同：2
> 
> 时间：2012-07-03T08:07:42.620
> 
> 标签：java, swing, layout, jpanel, layout-manager

我正在`JPanel`使用以下方法打开按钮单击到新的：

```
JPanel newP = new ProjectPage();
contentPane.revalidate(); 
setContentPane(newP); 
```

在哪里`ProjectPage`：

```
 public class ProjectPage extends JPanel 
```

但是我如何在我的新`ProjectPage`课程中创建按钮，让我回到原来的面板？

我的主屏幕类声明如下：

```
public class MainScreen extends JFrame 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:19:10.120

使用[CardLayout ，如此](http://download.oracle.com/javase/6/docs/api/java/awt/CardLayout.html)[处](https://stackoverflow.com/questions/5665156/calling-awt-frame-methods-from-subclass/5786005#5786005)所示。

![游戏视图](../Images/3e84734e45f9ce4d8da39f4e7796ef42.png) ![高分视图](../Images/108a81166d0c089a8de60cdb6ed2908a.png)

有关详细信息，请参阅[如何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)。

作为更一般的建议，不要扩展`JPanel`or `JFrame`，而只是保留对它们的引用并根据每次使用的需要构建它们。这个问题的一部分似乎是范围 - 相关面板对调用代码不“可见”。在主类中保留对它们的引用是一个简单的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:17:30.637

如果你想回到原来的 JPanel，你必须通过添加一个字段在你的类中的某个地方保留它的引用`private JPanel oldPanel;`

创建新面板时，获取旧面板并将其保存在该字段中，例如：

```
oldPanel = getContentPane();
JPanel newP = new ProjectPage();
contentPane.revalidate(); 
setContentPane(newP); 
```

当您想返回原始面板时，您可以：

```
setContentPane(oldPanel); 
```

# r - R中的着色表或数据框行或列

> ID：11306833
> 
> 赞同：0
> 
> 时间：2012-07-03T08:07:49.733
> 
> 标签：r, colors, row, dataframe, highlight

> **可能重复：**
> [使用事件触发选项和 javascript 代码的 R gvisTable 预选](https://stackoverflow.com/questions/11321883/r-gvistable-pre-selection-using-event-trigger-option-and-javascript-code)

嗨，我有一个表/数据框/xts/矩阵对象，并且希望能够以不同的颜色突出显示特定的行和列……我想我以前见过这个，但现在找不到了。

任何帮助将不胜感激

如果可能的话，任何漂亮的 knitr 输出也会很好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:28:08.450

我重新问了这个问题，重点是 gvisTable 获得 HTML 输出，并从 Jeff Allen 那里得到了一个相当好的答案。

如果有人感兴趣，这是另一个问题的[链接...](https://stackoverflow.com/questions/11321883/r-gvistable-pre-selection-using-event-trigger-option-and-javascript-code)

# three.js - Three.js中的属性直接使用类型化数组

> ID：11306834
> 
> 赞同：0
> 
> 时间：2012-07-03T08:07:59.093
> 
> 标签：three.js

自定义属性是否可以直接在three.js中使用TypedArrays？我正在从服务器下载二进制模型格式，数据直接存储到 Float32Array 中。由于这是 gl.bufferdata 所需的格式，因此创建 THREE.Vector3 对象似乎很浪费，这些对象只能存储回 WebGLRenderer.js 内的新 Float32Array 中。

作为一个可能不相关的问题/错误，我在 Chrome 中分析了这个二进制模型加载，并注意到 60% 的时间都花在了垃圾收集器上。这严重阻碍了模型加载，因为该模型中有超过 100k 个顶点。我相信这只是从 v49 开始发生。有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:37:07.033

您可以使用[BufferGeometry](https://github.com/mrdoob/three.js/blob/master/src/extras/core/BufferGeometry.js)。遗憾的是，我们还没有很多关于如何使用该示例的示例。此时只有[CTMLoader](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/ctm/CTMLoader.js#L218)正在使用它。也许它可以为您提供很好的参考？

# xcode - 在 textview 中保存和加载文本字体。(Xcode)

> ID：11306837
> 
> 赞同：0
> 
> 时间：2012-07-03T08:08:04.117
> 
> 标签：xcode, fonts, colors, load, save

我想知道是否有人知道如何在 textview 上保存加载字体。该应用程序允许用户为文本视图选择字体，但是当他们切换视图并返回时，它就消失了。有谁知道如何保存然后加载它。非常感谢。

另外，如果有人知道如何保存文本颜色，那也很棒。

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:32:49.623

您需要做的是为所有 textViews 提供特定的标记值，并且在 view willDisappear 之前导航时，您必须将所有值存储到数组中，并在导航回 viewWillAppear 上的视图时使用标记值填充所有 textViews。

# jquery - jquery表单验证空字段

> ID：11306838
> 
> 赞同：0
> 
> 时间：2012-07-03T08:08:05.303
> 
> 标签：jquery, forms, validation

我正在尝试使用 jquery 进行表单验证。基本上，我想要的是，每当用户将必填字段留空时，旁边会显示一条消息，通知用户该字段为空。到目前为止我所做的是：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>formulier</title>

    <style type="text/css">

        form span{

            color:red;

        }

    </style>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

    <script type="text/javascript">

                $(document).on("ready", loaded);

        function loaded(){

            console.log("loaded");

            $('#naam').blur(validate);

            $('#accept').change(checkbox);

            }

            function validate()

            {

        console.log("validate");

      var lengte= $("#naamveld #postcodeveld #huisnummerveld").val();

                console.log(lengte);

                if ($(this) !== '')

                {

                    $(".foutmelding1").text("Required")

                }

                else{

                    $(".foutmelding1").text("Go on")

                }

            }

        function checkbox(){

            if($('input[type=textbox]').is(':checked')){

                console.log('checked'); 

                $('button').removeAttr("disabled");

             }

            else{

                console.log('not checked');

                $('button').attr("disabled", "disabled");

            }

        }

    </script>

</head>

<body>

    <form action="#" method="post">

        <fieldset>

            <legend>

                NAW

            </legend>

            <p>

                <label for="naamveld">Naam: *</label>

                <label for="dhr">

        <input type="radio" name="gender" value="m" id="dhr" />

                    dhr. </label>

        <label for="mevr">

                    <input type="radio" name="gender" value="f" id="mevr" />

                    mevr. </label>

                <input type="text" name="name" id="naamveld" class="verplicht" />

                <span class="foutmelding">&nbsp;</span>

            </p>

            <p>

                <label for="straatveld">Straat:</label>

                <input type="text" name="street"  id="straatveld" />

                <label for="straatveld">Huisnummer: *</label>

                <input type="text" name="huisnummer"  id="huisnummerveld" class="verplicht" />

                <span class="foutmelding">&nbsp;</span>

            </p>

            <p>

                <label for="postcodeveld">Postcode: * </label>

                <input type="text" name="zip" class="verplicht" id="postcodeveld" />

                <label for="stadveld">Stad:</label>

                <input type="text" name="city" class="verplicht" id="stadveld" />

                <span class="foutmelding">&nbsp;</span>

            </p>

        </fieldset>

        <fieldset>

            <legend>

                Contact

            </legend>

            <p>

                <label for="emailveld">Email:

                    <input type="text" name="email" id="emailveld" />

                </label>

            </p>

            <p>

                <label for="telefoonveld">Telefoon:

                    <input type="text" name="phone" id="telefoonveld" />

                </label>

            </p>

            <p>

                <button name="action" value="send" type="submit" >

                    Verstuur

                </button>

            </p>

        </fieldset>

    </form>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:26:59.777

可能是这样的（使用 AJAX）：

```
 $('#button').click(function(){
    //encodeURIComponent encode data proprely... and GET val() aka VALUE!!!
    var name = encodeURIComponent($('#name').val());
    var email = encodeURIComponent($('#email').val());
    var message = encodeURIComponent($('#message').val());

    //check is mail VALID
    var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
    //get data inside $_POST['name'] (PHP) and inside +name+ (form id)
    var data = 'name=' + name + '&email=' + email + '&message=' + message;

    //alert(data);

    //if name is empty

    if($('#name').val() == 0){

    $('.info').hide().fadeIn(1000).html('<p style="font-weight:bold;text-align:center;font-size:20px;">Please enter your name!</p>');
    }
    //if name is less than three characters
    else if(name.length < 2){
    $('.info').hide().fadeIn(1000).html('<p style="font-weight:bold;text-align:center;font-size:20px;">Name must be longer than two letters!</p>');

    }
      //if email is empty
    else if ($('#email').val() == 0){
    $('.info').hide().fadeIn(1000).html('<p style="font-weight:bold;text-align:center;font-size:20px;">Please enter Email!</p>');

    }

    //if mail adress is NOT valid
    else if(reg.test(email)==false){
    //alert('please enter valid mail!');
    $('.info').hide().fadeIn(1000).hide().fadeIn(1000).html('<p style="font-weight:bold;text-align:center;font-size:20px;">Please enter VALID Mail!</p>');
    }
    //if mail adress IS VALID 
     if(reg.test($('#email').val()) && $('#name').val()!=''){
     $('.info').hide().fadeIn(1000).html('<p class="thx" style="font-weight:bold;text-align:center;font-size:20px;">THX for your mail!</p><span class="success" style="font-weight:bold;text-align:center;font-size:20px;display:none;margin:0 auto">Mail sent successfuly!!</span>');

           $.ajax({
           type:"POST", //php method
           url:'process.php',//where to send data...
           cache:'false',//IE FIX
           data: data, //what will data contain (no SHIT Sherloc...)

           //check is data sent successfuly to process.php
           //success:function(response){
           //alert(response)
           //}

           success: function(){ //on success do something...

           $('.success').delay(2000).fadeIn(1000);

           //alert('THX for your mail!');
           }).error(function(){ //if sucess FAILS!!
           alert('An error occured!!');
           $('.thx').hide();
           });
           } //end if statment for VALID mail

           //return false prevent Redirection
           return false;
           }); 
```

# javascript - Knockout JS - 如果在 foreach 中绑定

> ID：11306841
> 
> 赞同：2
> 
> 时间：2012-07-03T08:08:17.950
> 
> 标签：javascript, knockout.js

不知道我做错了什么，但这是我的代码。

```
<ul data-bind="foreach: publications" >
   <!-- ko if: mediatype === '2' -->
   <li data-bind="text: mediatype, value: id"></li>
   <!-- /ko -->
</ul> 
```

这将返回 foreach 中的整个列表（所有媒体类型编号）

我也试过这个：

```
<ul data-bind="foreach: publications" >
  <li data-bind="if: mediatype === '2', text: mediatype, value: id"></li>
</ul> 
```

这不返回任何内容。不知道这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T08:20:53.300

对于 if: mediatype === '2' 这样的表达式，您需要使用括号，即 if: mediatype() === '2'

# django - 如何测试 403 错误？

> ID：11306842
> 
> 赞同：0
> 
> 时间：2012-07-03T08:08:22.460
> 
> 标签：django, unit-testing, http-status-code-403, http-error

我有一个测试类，用于测试不同用户对所有页面的访问。

这些访问权限是由装饰器在我的每个视图上定义的。

*视图.py：*

```
@login_required
def afficher(request):
    ...
    ...

@creation_permission_required
def ajouter(request):
    ...
    ... 
```

其中一些装饰器是由我定义的。

*装饰器.py：*

```
def creation_permission_required(function):
    @wraps(function)
    @login_required
    def decorateur(request, *k, **a):
        user = get_object_or_404(User, username__iexact=request.user.username)
        if user.is_superuser or user.get_profile().creation:
            return function(request, *k, **a)
        else:
            return HttpResponseRedirect(reverse("non_autorise"))# <--- PROBLEM
    return decorateur
    return function 
```

当我测试它们时，我使用 status_code 属性来验证用户是否可以访问该页面

*测试.py：*

```
c = Client()
c.login(username='aucun', password='aucun')
for url in self.url_aucun:
    r = c.get(reverse(url['url'], args=url['args']))
    self.assertEqual(r.status_code, 200)
for url in self.url_creation:
    r = c.get(reverse(url['url'], args=url['args']))
    self.assertEqual(r.status_code, 302)      # <--- SECOND PROBLEM 
```

当用户无权访问某个页面时，该页面应返回 403 错误（禁止访问）。如何测试 403 而不是 302 ？

编辑：我尝试使用 HttpResponseForbidden(reverse("non_autorise"))，但无法获得任何内容。因此，我尝试制作自己的 HttpResponse ，它是 HttpResponseRedirect 的精确副本，但使用另一个 status_code （403）仍然没有得到任何内容......

*装饰器.py：*

```
class HttpResponseTest(HttpResponse):
    def __init__(self, redirect_to):
        super(HttpResponseTest, self).__init__()
        self['Location'] = iri_to_uri(redirect_to)
        self.status_code = 403

def creation_permission_required(function):
    @wraps(function)
    @login_required
    def decorateur(request, *k, **a):
        user = get_object_or_404(User, username__iexact=request.user.username)
        if user.is_superuser or user.get_profile().creation:
            return function(request, *k, **a)
        else:
            return HttpResponseTest(reverse("non_autorise"))# <--- PROBLEM
    return decorateur
    return function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:41:58.567

如果你想要一个 403 响应，如果你使用的是 Django 1.4，你可以在你的装饰器中引发[PermissionDenied](https://docs.djangoproject.com/en/dev/ref/exceptions/#django.core.exceptions.PermissionDenied)异常。或者，您可以在装饰器中返回[HttpResponseForbidden](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseForbidden)。您还必须构建[一个自定义 login_required 装饰器](http://blog.y3xz.com/post/11732029434/django-login-required-decorator-with-403)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:12:00.317

```
self.assertEqual(r.status_code, 403) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T21:03:12.217

我遇到了同样的问题，并通过指示测试 get() 使用`follow=True`. 使用 BlueMagma 的示例，它看起来像这样：

```
for url in self.url_creation:
    r = c.get(reverse(url['url'], args=url['args']), follow=True)
    self.assertEqual(r.status_code, 403)      # <--- SECOND PROBLEM NO MORE!!! 
```

希望这对其他人有帮助！

# iphone - 自动调整所有视图对象的正确方法

> ID：11306846
> 
> 赞同：1
> 
> 时间：2012-07-03T08:08:34.177
> 
> 标签：iphone, objective-c, ipad, uiview, autosize

当调用状态栏出现（状态栏高度变化）时，自动调整或自动移动所有视图组件的正确方法是什么？

![在此处输入图像描述](../Images/74bbe06df58015b07bf25082f262c614.png)

我正在使用：

```
- (void) application:(UIApplication*)application 
                           didChangeStatusBarFrame:(CGRect)oldStatusBarFrame { } 
```

但这样我需要手动设置所有元素的框架。我认为这不是最好的方法。

* * *

我尝试在界面构建器面板中设置自动调整大小，但状态栏更改框架时没有任何变化。 ![在此处输入图像描述](../Images/d0afe2f44b89d5db43c391a1b29a63be.png)

在我的所有视图中是否有正确的方法来执行此操作，而无需为每个视图中的每个元素设置框架？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:41:45.220

使用`- (void) application:(UIApplication*)application didChangeStatusBarFrame:(CGRect)oldStatusBarFrame`不是执行此操作的好地方。

解决方案将取决于您所需的布局。如果它足够简单，自动调整大小的蒙版就可以正常工作。对于更复杂的布局，您可能需要子类`UIView`化并将其用作子视图的容器。然后，您可以覆盖 layoutSubviews 以根据视图的边界执行正确的布局（容器被自动调整大小）。

对于自动调整大小：例如，如果您想让所有标签相对于底部边框固定并具有固定高度：只需单击自动调整大小对话框中的底部间距并删除高度箭头。

# c# - 具有 UnitOfWork 模式的通用存储库模式

> ID：11306847
> 
> 赞同：5
> 
> 时间：2012-07-03T08:08:35.997
> 
> 标签：c#, entity-framework, entity-framework-4, repository-pattern, unit-of-work

我正在尝试实现通用存储库模式。我发现了这个网站，我认为它解释得很好。 [http://www.tugberkugurlu.com/archive/generic-repository-pattern-entity-framework-asp-net-mvc-and-unit-testing-triangle](http://www.tugberkugurlu.com/archive/generic-repository-pattern-entity-framework-asp-net-mvc-and-unit-testing-triangle)

我的目的是为开发人员节省一些时间和按键，我知道这会对我有所帮助。

所以我有两个问题：
1.这是否是一个好方法，我将来会遇到一些问题吗？
2\. 怎么和Unitofwork模式结合呢？当然不能创建抽象类的实例，所以下面的代码无效。

```
public class UnitOfWork : IDisposable
    {
        #region Private fields
        private readonly MyCompanyContext _context = new MyCompanyContext();
        private GenericRepository<MyCompanyContext, Task> _taskRepository;

        public GenericRepository<MyCompanyContext, Task> TaskRepository
        {
            get
            {
                return _taskRepository ??
                         (_taskRepository = new GenericRepository<MyCompanyContext, Task>());
            }
        }

namespace MyCompany.DAL.Repository
{
    public interface IGenericRepository<T> where T : class
    {
        IQueryable<T> GetAll();
        IQueryable<T> FindBy(Expression<Func<T, bool>> predicate);
        void Add(T entity);
        void Delete(T entity);
        void Edit(T entity);
        void Save();
    }

    public abstract class GenericRepository<C, T> :
    IGenericRepository<T>
        where T : class
        where C : DbContext, new()
    {

        private C _entities = new C();
        public C Context
        {

            get { return _entities; }
            set { _entities = value; }
        }

        public virtual IQueryable<T> GetAll()
        {

            IQueryable<T> query = _entities.Set<T>();
            return query;
        }

        public IQueryable<T> FindBy(System.Linq.Expressions.Expression<Func<T, bool>> predicate)
        {
            IQueryable<T> query = _entities.Set<T>().Where(predicate);
            return query;
        }

        public virtual void Add(T entity)
        {
            _entities.Set<T>().Add(entity);
        }

        public virtual void Delete(T entity)
        {
            _entities.Set<T>().Remove(entity);
        }

        public virtual void Edit(T entity)
        {
            _entities.Entry(entity).State = System.Data.EntityState.Modified;
        }

        public virtual void Save()
        {
            _entities.SaveChanges();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T08:45:55.190

关于存储库有几种意见，但是在我自己在生产中尝试了各种存储库实现几年之后，我同意[Ayende 的](http://ayende.com/blog)观点，即存储库，尤其是通用的，是冗余的抽象层。

我非常喜欢这门课程： [http ://www.pluralsight-training.net/microsoft/Courses/TableOfContents/linq-architecture](http://www.pluralsight-training.net/microsoft/Courses/TableOfContents/linq-architecture)

它遍历了大多数可能的解决方案并解释了好坏。

我们现在使用的是对数据上下文的非常薄的抽象，只是为了克服 Linq2Sql 的可测试性问题，这在大多数情况下在使用 EF 时是无关紧要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:46:37.093

付出很多努力，你可能会得到它的工作，但我想知道这种努力是否真的值得？我以前见过这样的实现，在尝试管理多对多关系时它们真的很困难（想想在你的场景中你将如何管理它）。您正在使用实体框架，一个 ORM 对吗？*设计*了 Entity Framework 和 nHibernate 等 ORM*从应用程序代码中抽象出数据库实现，那么在它之上添加另一个抽象来管理如此细粒度的实体的目的是什么？如果是测试问题，那么您可以使用模拟框架来模拟上下文，从而在测试期间无需实际数据库。但是，如果出于架构或安全原因，您正在寻求从应用程序代码中删除与数据库上下文的交互，我建议您在实体框架顶部使用命令模式的实现来实现实用主义。我需要在更大规模的企业（银行）应用程序上执行此操作，出于安全原因（正确或错误），我们绝对不允许在我们的应用程序代码中建立数据库连接。*

# java - 如何从Java中的字符串中提取url？

> ID：11306849
> 
> 赞同：0
> 
> 时间：2012-07-03T08:08:40.403
> 
> 标签：java, android, regex

我有一个包含短代码的字符串，如下所示：

```
some text...
[video url="http://www.example.com/path/to/my/video.ext"]
...some more text... 
```

我希望能够首先检查字符串是否包含该短代码，然后在 Java（特别是 Android）中从中提取 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:17:11.327

使用这个正则表达式来检查和获取 url：

```
\[\w+\s+url="(?<urllink>)[^"]*"\s*] 
```

并获取名为*urllink 的组*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:18:41.927

尝试：

```
 String str = "[video url=\"http://www.example.com/path/to/my/video.ext\"]";
    if (str.contains("url=\""))
    {
        int indexoff = str.indexOf("url=\"");
        int indexofff = str.indexOf("\"]");
        String strurl = str.substring(indexoff, indexofff - indexoff);
        strurl = strurl.Replace("url=\"", ""); //get url string here

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:11:07.570

```
String url = "whatever"
Boolean myBool = url.contains("ate"); 
```

[字符串包含。](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)不确定提取 url 是什么意思，但字符串类有很多有用的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T08:12:42.593

Android为此提供了几个功能。其中一些是：

*   [http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html)
*   [http://developer.android.com/reference/org/apache/http/client/utils/URLEncodedUtils.html](http://developer.android.com/reference/org/apache/http/client/utils/URLEncodedUtils.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T08:52:13.867

它以一种**强大**且可**维护**的方式将其转换为[Java URL.class](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URL.html)，然后，您可以与 Regex 混合使用

# uialertview - 如何自定义 UIAlert 视图弹出窗口

> ID：11306856
> 
> 赞同：0
> 
> 时间：2012-07-03T08:09:29.727
> 
> 标签：uialertview

我想知道如何创建和自定义 UIAlert 视图弹出窗口，就像愤怒的小鸟或割绳子等流行游戏中的弹出窗口一样。我只想说，请您评价我的游戏，并有 3 个选项可供选择。我想设计它，使文本字体和颜色发生变化，背景颜色可以变成图片或其他东西？提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:24:14.490

如果您的 UIAlert 足够短以适应没有较长文本的固有滚动条，那么这将起作用：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title Here" message:@Message here..." delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil];

((UILabel*)[[alert subviews] objectAtIndex:1]).textAlignment = UITextAlignmentLeft;
((UILabel*)[[alert subviews] objectAtIndex:1]).font = [UIFont systemFontOfSize:12];

[alert show]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T08:14:01.290

[您应该尝试使用本](http://iphonedevelopment.blogspot.com/2009/02/alert-view-with-prompt.html)教程对 UIAlertView 进行子类化。这样的 UIAlertView 可以通过 UIAlertView 的子类来实现，也可以通过创建一个单独的视图来模拟 UIAlertView 的外观。

# r - 方括号`[`函数的文档

> ID：11306858
> 
> 赞同：4
> 
> 时间：2012-07-03T08:09:30.980
> 
> 标签：r, function, documentation, square-bracket, rd

我在 R 中有一个看起来像这样的函数：

```
setMethod('[', signature(x="stack"),definition=function(x,i,j,drop){
  new('class', as(x, "SpatialPointsDataFrame")[i,]) }) 
```

我使用它从堆叠的对象中获取单个元素。对于我正在构建的包，我需要一个 .Rd 文件来记录函数。我将它存储为 [.Rd 但不知何故 R CMD 检查没有看到这一点。它返回：

```
Undocumented S4 methods:  generic '[' and siglist 'MoveStack,ANY,ANY' 
```

该`[.Rd`文件以这些行开头：

```
\name{[}    
\alias{[}
\alias{[,stack,ANY,ANY-method}    
\docType{methods}    
\title{Returns an object from a stack}    
\description{Returning a single object}    
\usage{
  \S4method{\[}{stack,ANY,ANY}(x,i,y,drop)
} 
```

知道如何让 R CMD 检查知道这个文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:47:14.233

如果您查看`sp`包的源代码，例如`SpatialPolygons-class.Rd`，方法部分：

```
\section{Methods}{
Methods defined with class "SpatialPolygons" in the signature:
  \describe{
    \item{[}{\code{signature(obj = "SpatialPolygons")}: select subset of (sets of) polygons; NAs are not permitted in the row index}
    \item{plot}{\code{signature(x = "SpatialPolygons", y = "missing")}: 
    plot polygons in SpatialPolygons object}
    \item{summary}{\code{signature(object = "SpatialPolygons")}: summarize object}
    \item{rbind}{\code{signature(object = "SpatialPolygons")}: rbind-like method}
  }
} 
```

`[`定义了方法。

文件的名称和类是

```
\name{SpatialPolygons-class}
\alias{[,SpatialPolygons-method} 
```

如果您查看帮助页面，`?SpatialPolygons`您应该会看到

```
> Methods
> 
> Methods defined with class "SpatialPolygons" in the signature:
> 
> [ signature(obj = "SpatialPolygons"): select subset of (sets of)
> polygons; NAs are not permitted in the row index
> 
```

所以我冒昧地猜测，如果你指定一个正确的（ASCII 命名的）文件名，给它一个别名，就像上面的例子一样，你应该没问题。

# java - 使用 Java 向 Arduino Uno 发送数据

> ID：11306859
> 
> 赞同：5
> 
> 时间：2012-07-03T08:09:40.103
> 
> 标签：java, arduino

我刚买了一个 Arduino Uno，我目前正在尝试制作一个闪烁的 LED。我想知道我怎么能做到这一点，我查看了 Arduino Playground 并找到了一个程序来获取输入。我需要输出到 Arduino。我不可能使用除 Java 之外的任何东西，因为我已经有另一个需要 Arduino 的程序。请留下任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:26:05.563

**编辑：** 听起来你想在 java 中执行此操作。

摘自[jayeff](https://stackoverflow.com/users/1458461/jayeff)提到的[网站](http://arduino.cc/playground/Interfacing/Java)：

> OutputStream 带有 3 种不同的写入方法，可将数据从计算机发送到 Arduino。在上面的示例中，您可以使用 **`output.write(String)`**来发送数据，如**`output.write("Hello Arduino!")`**.

如果您尝试使用 Java 写入 Arduino，那么这就是您的答案。

[http://arduino.cc/playground/Interfacing/Java](http://arduino.cc/playground/Interfacing/Java)

* * *

**编辑**：如果你想使用 Java 以外的东西，你去：

问你应接受。您可以使用任何具有串行支持的编程语言来执行此操作。

每种语言肯定还有其他方法，但这里有一些我在 5 分钟内在 Google 机器上找到的

*   **Perl** -[设备::串行端口](http://search.cpan.org/~cook/Device-SerialPort-1.002/SerialPort.pm)
*   **Python** - [pySerial](http://pyserial.sourceforge.net/)通过[Android Playground](http://arduino.cc/playground/Interfacing/Python)
*   **C++** - [LibSerial](http://libserial.sourceforge.net/)（在下面使用）

**注意：注意**[串行](http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection)问题上令人讨厌的自动重置。有关详细信息，请参阅我之前的[答案。](https://stackoverflow.com/a/10921900/1440715)

**这是我的 C++ 代码（它很丑，但它有效）**

```
#include <SerialStream.h>
#include <iostream>
#include <string>
#include <stdio.h>
#include <stdlib.h>

using namespace std;
class SerialComm {
    LibSerial::SerialStream myss;
public:

    SerialComm(int argc, char** argv) {
        myss = new LibSerial::SerialStream("/dev/ttyS0", ios_base::out);
        myss.SetBaudRate(LibSerial::SerialStreamBuf::BAUD_57600);
        myss.SetCharSize(LibSerial::SerialStreamBuf::CHAR_SIZE_8);
        myss.SetFlowControl(LibSerial::SerialStreamBuf::FLOW_CONTROL_NONE);
        myss.SetParity(LibSerial::SerialStreamBuf::PARITY_NONE);
        myss.SetNumOfStopBits(1);

        const int Dsize = 2;
        char buffer[1];
        buffer[0] = 125; //0b00000001;
        buffer[1] = '\0';
        bitset(buffer[0]);
        //myss << buffer;
        myss.write(buffer,1);
        //myss.Close();

    }
} 
```

# python - 如何使用 minidom 读取 XML 文件的特殊字符

> ID：11306860
> 
> 赞同：1
> 
> 时间：2012-07-03T08:09:40.723
> 
> 标签：python, xml, dom, minidom

从 XML 文件读取数据时，我无法获得正确的字符串。
我的 XML 文件是这样的：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<Root>
   <Name>aa é bb</Name>
</Root> 
```

我想`<Name>`正确阅读应答器。所以我尝试了命令：

```
NameValue = Item.getElementsByTagName("Name")[0].childNodes[0].data 
```

哪个返回`u'aa \xc3\xa9 bb'`。 那么我怎样才能得到或进入？ 我尝试过编码和解码功能但没有成功。`NameValue`
`u'aa é bb'``'aa é bb'``NameValue`

我想用 Python 2.7 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:52:20.423

好的，我有。
我设法做到了：

```
NameValue = unicode(Item.getElementsByTagName("Name")[0].childNodes[0].data.encode("latin-1"), "utf-8") 
```

感谢您的帮助

# android - 为什么我会收到这个错误？？标记“void”的语法错误，@预期的 android 编程

> ID：11306862
> 
> 赞同：-6
> 
> 时间：2012-07-03T08:09:46.033
> 
> 标签：android, eclipse

请帮助我使用以下代码...我正在尝试制作一个 android 应用程序，当我尝试在 onCreate 中创建函数时出现代码错误。创建函数的需要是访问按钮、标签和文本框....这是我的代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final EditText player = (EditText)findViewById(R.id.player);
    final TextView plrlbl1 = (TextView)findViewById(R.id.textView1);
    final ImageButton imageButton1 = (ImageButton)findViewById(R.id.imageButton1);
    final ImageButton imageButton2 = (ImageButton)findViewById(R.id.imageButton2);

    public void thisfunction()
    {

    }
} 
```

请帮我在 oncreate 中创建一个函数......感谢帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T08:12:20.517

```
public void thisfunction()
    {

    } 
```

你声明`thisfunction()`里面的`onCreate()`. 您应该在`onCreate`. 如果您遇到此类问题，我建议您阅读一本基本的编程书籍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T08:13:55.120

> 请帮我在 oncreate 中创建一个函数...

你不能，Java 不允许。您必须在`onCreate()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T06:07:15.057

正确的设置是这样的

```
public class MyActivity extended Activity {

private TextView myTextView;

    @Override 
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate () ; 
        setContentView(R.layout.main) ; 

        myTextView = (TextView) findViewById (R.id.textView1) ; 

        myNewMethod() ; 
    }

    private void myNewMethod () {
        myTextView.setText("Hello world") ; 
    } 
} 
```

# .net - 在非托管 C++ 中使用带有 ComVisible(false) 的 .NET dll

> ID：11306863
> 
> 赞同：0
> 
> 时间：2012-07-03T08:09:46.767
> 
> 标签：.net, visual-c++, dll, com

我正在尝试使用我没有源代码的第三方 dll。使用 /clr 编译时，我已在 VC++ 中成功使用它。但是，我想在非托管 c++ 应用程序中使用它，而无需使用 /clr 进行编译。当我查看 Visual Studio 对象 bowser 中的 dll 时，我注意到程序集的属性被列为：

```
Attributes:
System.CLSCompliantAttribute(true),
System.Runtime.InteropServices.ComVisibleAttribute(false),
System.Reflection.AssemblyDelaySignAttribute(false),
System.Reflection.AssemblyKeyNameAttribute(""),
System.Runtime.CompilerServices.SuppressIldasmAttribute,
System.Reflection.AssemblyConfigurationAttribute("Retail"),
System.Diagnostics.DebuggableAttribute(0),
System.Runtime.CompilerServices.RuntimeCompatibilityAttribute, 
```

由于 ComVisible 为假，我无法获取类型库，并且不确定如何在本机 c++ 程序中使用此 dll。有可能做到这一点吗？

# jquery - 如何在 jquery 对话框中获取表单中的复选框值？

> ID：11306868
> 
> 赞同：3
> 
> 时间：2012-07-03T08:10:14.467
> 
> 标签：jquery, forms, checkbox, dialog

我在 jquery 对话中有一个表格。提交表单后如何获取所选复选框的值？

```
$(document).ready(function(){

var $dialog = $('<div></div>')
    .html('<form id="myform" action=""><input type="checkbox"   id="completeCheck" name="completeCheck" value="" />Complete check<br /><input type="checkbox" name="view" value="Car" /> View report <br /><input type="checkbox" name="consist" value="" />Consistency check<br /><input type="checkbox" name="other" value="" />Other checks<br /><input type="checkbox" name="keyCheck" value="" />Key check<br /><input type="checkbox" name="compareCheck" value="" />Compare check<br /></form>')
    .dialog({
        autoOpen: false,
        title: 'Data check',
        buttons: {
          "Submit Form": function() {  $('form#myform').submit();},
          "Cancel": function() {$(this).dialog("close");}
        }
    });

$('#createNew').click(function() {
    $dialog.dialog('open');
    // prevent the default action, e.g., following a link
    return false;
});

$('form#myform').submit(function(){

  $dialog.dialog('close');
});        

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:16:03.973

**工作演示** [http://jsfiddle.net/9mZAJ/2/](http://jsfiddle.net/9mZAJ/2/) *或* [http://jsfiddle.net/9mZAJ/1/](http://jsfiddle.net/9mZAJ/1/)

`$('#completeCheck').is(':checked')`将在复选框休息时与循环一起完成这个技巧，`.each`请参见演示和下面的代码。

这应该有帮助

现在要遍历所有复选框，您可以使用`.each`和 with `is(":checked")`check 以多种方式执行此操作。`:)`

**代码**

```
$(document).ready(function(){

var $dialog = $('<div></div>')
    .html('<form id="myform" action=""><input type="checkbox"   id="completeCheck" name="completeCheck" value="" />Complete check<br /><input type="checkbox" name="view" value="Car" /> View report <br /><input type="checkbox" name="consist" value="" />Consistency check<br /><input type="checkbox" name="other" value="" />Other checks<br /><input type="checkbox" name="keyCheck" value="" />Key check<br /><input type="checkbox" name="compareCheck" value="" />Compare check<br /></form>')
    .dialog({
        autoOpen: false,
        title: 'Data check',
        buttons: {
          "Submit Form": function() {  $('form#myform').submit();},
          "Cancel": function() {$(this).dialog("close");}
        }
    });

$('#createNew').click(function() {
    $dialog.dialog('open');
    // prevent the default action, e.g., following a link
    return false;
});

$('form#myform').submit(function(){
    alert('completeCheck checkobox is checked or not ==> ' + $('#completeCheck').is(':checked'));

  $dialog.dialog('close');
});        

});​ 
```

**像这样循环**

```
$(this).find('input[type="checkbox"]').each(function(){
    alert($(this).is(':checked'));
}) 
```

**图片**

![在此处输入图像描述](../Images/6def6db79ec47dc7ff9d36cbcf964b87.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:14:52.200

`$(this).find(":checked")`您可以在表单提交回调中获取所有选中的复选框。然后，您可以遍历它们并获取它们的值。

这是一个示例，说明如何将选中的复选框的名称及其值存储在数组中，例如：

```
$('form#myform').submit(function(){
  // Store names of the checkboxes and their values in an array
  var values = []; 
  $(this).find(":checked").each(function () {
     values[$(this).prop("name")] = $(this).val();
  });
  $dialog.dialog('close');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T08:16:19.353

在您的提交功能中：

```
$(this).find(':checkbox').each(function(){
    if(this.checked)
        alert(this.name + ' is checked');
    else
        alert(this.name + ' is not checked');
}); 
```

见[http://jsfiddle.net/tricki/mwJqR/2/](http://jsfiddle.net/tricki/mwJqR/2/)

# facebook-graph-api - Heroku 主机是否与 .net 不兼容？

> ID：11306873
> 
> 赞同：1
> 
> 时间：2012-07-03T08:10:30.707
> 
> 标签：facebook-graph-api, azure, heroku, cloud-hosting

我有一个托管在 Azure 中的 Facebook 应用程序，用 c# 编码。但是我的 Facebook 应用程序中的配置要求托管 URL：必须托管在 Heroku 中。所以我的应用程序无法向 Facebook 发布操作，因为这个错误总是会弹出：

> 应用程序配置不允许给定 URL。

如果我无法添加我的 Azure URL，它应该如何工作：`app.cloudapp.net`如果只接受 Heroku URL，则作为托管 URL。

将我的应用程序的 URL 添加到应用程序配置中的应用程序域也没有帮助。

奇怪的是，我在没有定义托管 URL 的情况下运行良好的另一个应用程序。

我应该做些什么来解决这个问题，将所有内容迁移到 PHP？我知道可能还有另一个答案。

# ruby-on-rails - 使用 rspec 在 ruby 中测试“create”方法

> ID：11306875
> 
> 赞同：1
> 
> 时间：2012-07-03T08:10:50.257
> 
> 标签：ruby-on-rails, rspec

我在 Ruby on Rails 中编写了这个控制器代码

```
class PostsController < ApplicationController
  before_filter :authenticate_user!

  def index  
    @posts = Post.all(:order => "created_at DESC")  
    respond_to do |format|  
      format.html  
    end  
  end  

  def create  
    @post = Post.create(:message => params[:message])  
    respond_to do |format|  
      if @post.save  
        format.html { redirect_to posts_path }  
        format.js
      else  
        flash[:notice] = "Message failed to save."  
        format.html { redirect_to posts_path }  
      end  
    end  
  end  
end 
```

与此相对应，我编写了以下测试用例：-

```
require 'spec_helper'

describe PostsController do
  describe "GET 'index'" do
    it "returns http success" do
      get 'index'
      response.should be_success
    end
  end

  describe "#create" do
    it "creates a successful mesaage post" do
      @post = Post.create(message: "Message")
      @post.should be_an_instance_of Post
    end
  end
end 
```

我在这两个方面都失败了。请看一下代码并帮助我弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T08:36:26.993

我怀疑您没有登录，因为您使用的是设计？

也许您需要包含设计 testhelpers：

```
describe PostsController do
  include Devise::TestHelpers
  before(:each) do
    @user = User.create(...)
    sign_in @user
  end

  #assertions go here
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:03:38.453

正如 Tigraine 所说，当测试执行时，您可能没有登录（使用 Devise）。但是，显示故障将有助于进一步缩小问题范围。

最重要的是，第二个测试并不是真正的集成测试，我可能更喜欢下面的测试来测试相同的条件。您可以进行两种类型的测试：

```
# inside 'describe "#create"'

let(:valid_params) { {'post' => {'title' => 'Test Post'} }

it 'creates a new Post' do
  expect {
    post :create, valid_params
  }.to change(Post, :count).by(1)
end

# and / or

it 'assigns a new Post' do
  post :create, valid_params
  assigns(:post).should be_a(Post)
  assigns(:post).should be_persisted
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:46:37.340

不要忘记将此行添加到您的**spec_helper.rb**

```
require "devise/test_helpers"
include Devise::TestHelpers 
```

不过，这里是[Devise wiki - How to test Controllers](https://github.com/plataformatec/devise/wiki/How-To%3a-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)的链接，您可以在其中找到有关此方法的更多信息。我建议在没有 (:each) 的情况下编写 before 方法，我记得它有时会导致问题。

```
before do
 @user = FactoryGirl.create(:user)
 sign_in @user
end 
```

可以随时使用：

```
puts response.inspect 
```

看看你的反应是什么样子的。

# css - 打印时确保 CSS 精确大小

> ID：11306884
> 
> 赞同：1
> 
> 时间：2012-07-03T08:11:33.783
> 
> 标签：css, printing

我有以下简单页面：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        div#card
        {
            border: 1px solid black;
            width:  65mm;
            height: 65mm;
        }
        div#circle
        {
            width:  20mm;
            height: 20mm;
            -webkit-border-radius: 10em;
            border: 1px solid black;
            margin-top: 5mm;
        }
    </style>
</head>
<body>
    <div id="card"></div>
    <div id="circle"></div> 
</body>
</html> 
```

打印页面时，我希望它输出一个 65mm 的正方形，但它是 70mm，圆也比 20mm 大一点。如何确保准确的印刷尺寸？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:18:29.513

为了使我们的网页易于打印，我们需要使用单独的 css 进行打印，例如：

```
<link rel="stylesheet" type="text/css" href="print.css" media="print"> 
```

以上css仅适用于打印网页时。

请参阅以下链接了解更多详情：

[http://webdesign.about.com/cs/css/a/aa042103a.htm](http://webdesign.about.com/cs/css/a/aa042103a.htm)

[http://www.killersites.com/articles/newsletterArchive/Newsletter_Nov3_2003.htm](http://www.killersites.com/articles/newsletterArchive/Newsletter_Nov3_2003.htm)

[http://envisionic.com/webtips/user_experience/printer_friendly.php](http://envisionic.com/webtips/user_experience/printer_friendly.php)

# java - 贾斯珀报告。文本所需的行数

> ID：11306886
> 
> 赞同：0
> 
> 时间：2012-07-03T08:11:36.143
> 
> 标签：java, dynamic-reports

当我使用静态带（columnFooter）时，我需要计算在运行时适合文本所需的行数。

```
int rows = numberOfRows_Calculator((String) ContentText, (java.awt.Font) font, (Integer, in   pixels) columnWidth);

TextFieldBuilder<String> textFieldBuilderMyStaticBand = new ComponentBuilders().text(ContentText);
textFieldBuilderDisclaimer.setFixedRows(rows);

jasperReportBuilder.columnFooter(textFieldBuilderMyStaticBand); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:51:30.020

最后，这是我的解决方案，我知道这不是完美的，因为我可以找到包含大于列宽的单词的字符串的问题......

```
private int numberOfRows_Calculator(String text, String fontName, int fontSize, int fontStyle, int columnWidth) {

    FontRenderContext context = new BufferedImage(1, 1, BufferedImage.TYPE_INT_RGB).createGraphics().getFontRenderContext();
    java.awt.Font font = new Font(fontName, fontStyle, fontSize);
    double width;
    int numberOfRows = 0;

    int breakLineIndex;
    boolean continuee = true;
    String subtext = text;
    String breaklineString = System.getProperty("line.separator");
    int breaklineLength = breaklineString.length();

    do {
        breakLineIndex = subtext.indexOf(breaklineString);
        if (breakLineIndex > -1) {
            width = font.getStringBounds(subtext.substring(0, breakLineIndex), context).getWidth();
            numberOfRows = numberOfRows + (int) (width / columnWidth) + 1;
            subtext = subtext.substring(breakLineIndex + breaklineLength, subtext.length());
        } else {
            width = font.getStringBounds(subtext, context).getWidth();
            numberOfRows = numberOfRows + (int) (width / columnWidth) + 1;
            continuee = false;
        }
    } while (continuee);

    return numberOfRows;
} 
```

# jquery - ASP.NET Mvc Jquery ui 不起作用？

> ID：11306887
> 
> 赞同：0
> 
> 时间：2012-07-03T08:11:47.657
> 
> 标签：jquery, asp.net-mvc, jquery-ui, html.actionlink

客户控制器.cs

```
public ActionResult AddCustomer()
{
    return ContextDependentView(new _Customers());
}

public ActionResult EditCustomer(int sno)
{
    return ContextDependentView(entity.Customers.Where(x => x.sno == sno).FirstOrDefault());
}

private ActionResult ContextDependentView(object model)
{
    string actionName = ControllerContext.RouteData.GetRequiredString("action");
    if (Request.QueryString.AllKeys != null)
    {
        ViewBag.FormAction = "Json" + actionName;
        return PartialView(model);
    }
    else
    {
        ViewBag.FormAction = actionName;
        return View(model);
    }
} 
```

客户.cshtml

```
@Html.ActionLink("Müşteri Ekle", "AddCustomer", "Customer", routeValues: null, htmlAttributes: new { id = "AddCustomerLink", data_dialog_title = "Yeni Müşteri" })
<div class="div_grid_container" id="div_grid_container_customers">
<table id="table_grid" class="tablesorter">
    <thead>
        <tr>
            <th>
                Güncelle
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@Html.ActionLink("Düzenle", "EditCustomer", "Customer", routeValues: new { sno = item.sno }, htmlAttributes: new { id = "EditCustomerLink", data_dialog_title = "Müşteri Bilgileri Güncelle" })
                </td>
            </tr>
        }
    </tbody>
</table>
</div> 
```

jQuery

```
$(function () {
// Cache for dialogs
var dialogs = {};

var getValidationSummaryErrors = function ($form) {
    // We verify if we created it beforehand
    var errorSummary = $form.find('.validation-summary-errors, .validation-summary-valid');
    if (!errorSummary.length) {
        errorSummary = $('<div class="validation-summary-errors"><span>Lütfen hataları düzeltin ve tekrar deneyin.</span><ul></ul></div>')
            .prependTo($form);
    }

    return errorSummary;
};

var displayErrors = function (form, errors) {
    var errorSummary = getValidationSummaryErrors(form)
        .removeClass('validation-summary-valid')
        .addClass('validation-summary-errors');

    var items = $.map(errors, function (error) {
        return '<li>' + error + '</li>';
    }).join('');

    var ul = errorSummary
        .find('ul')
        .empty()
        .append(items);
};

var resetForm = function ($form) {
    // We reset the form so we make sure unobtrusive errors get cleared out.
    $form[0].reset();

    getValidationSummaryErrors($form)
        .removeClass('validation-summary-errors')
        .addClass('validation-summary-valid')
};

var formSubmitHandler = function (e) {
    var $form = $(this);

    // We check if jQuery.validator exists on the form
    if (!$form.valid || $form.valid()) {
        $.post($form.attr('action'), $form.serializeArray())
            .done(function (json) {
                json = json || {};

                // In case of success, we redirect to the provided URL or the same page.
                if (json.success) {
                    location = json.redirect || location.href;
                } else if (json.errors) {
                    displayErrors($form, json.errors);
                }
            })
            .error(function () {
                displayErrors($form, ['Bilinmeyen bir hata oluştu.']);
            });
    }

    // Prevent the normal behavior since we opened the dialog
    e.preventDefault();
};

var loadAndShowDialog = function (id, link, url) {
    var separator = url.indexOf('?') >= 0 ? '&' : '?';

    // Save an empty jQuery in our cache for now.
    dialogs[id] = $();

    // Load the dialog with the content=1 QueryString in order to get a PartialView
    $.get(url + separator + 'content=1')
        .done(function (content) {
            dialogs[id] = $('<div class="modal-popup">' + content + '</div>')
                .hide() // Hide the dialog for now so we prevent flicker
                .appendTo(document.body)
                .filter('div') // Filter for the div tag only, script tags could surface
                .dialog({ // Create the jQuery UI dialog
                    title: link.data('dialog-title'),
                    modal: true,
                    resizable: true,
                    draggable: true,
                    width: link.data('dialog-width') || 600,
                    beforeClose: function () { resetForm($(this).find('form')); }
                })
                .find('form') // Attach logic on forms
                    .submit(formSubmitHandler)
                .end();
        });
};

// List of link ids to have an ajax dialog
var links = ['#loginLink', '#registerLink', '#AddCustomerLink', '#AddCustomerMeterLink', '#EditCustomerLink'];

$.each(links, function (i, id) {
    $(id).click(function (e) {
        var link = $(this),
            url = link.attr('href');

        if (!dialogs[id]) {
            loadAndShowDialog(id, link, url);
        } else {
            dialogs[id].dialog('open');
        }

        // Prevent the normal behavior since we use a dialog
        e.preventDefault();
    });
});
}); 
```

我的问题是，当我单击第一个链接 ( `AddCustomer`) 时，它会打开一个对话框窗格。但是我单击了 foreach 语句中的其他内容，它不起作用（它作为经典 html 而不是在对话框窗格中打开）。`AddCustomer.cshtml`并且`EditCustomer.cshtml`是相同的。`EditCustomer(int sno)`当我从行动中删除 sno它可以工作。（`EditCustomer()`而不是`EditCustomer(int sno)`这项工作。）

我该如何解决。我想将参数传递给操作并使用 ui-dialog-pane。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:47:08.510

您似乎使用了 id-selector，即`$('#EditCustomerLink')`
由于每个页面的 id 应该是唯一的，因此 jQuery 在找到具有此类 id 的第一个元素后停止解析 DOM。

这就是为什么你应该使用类选择器。例如：

```
<td>@Html.ActionLink("Düzenle", "EditCustomer", "Customer", routeValues: new { sno = item.sno }, htmlAttributes: new { @class = "EditCustomerLink", data_dialog_title = "Müşteri Bilgileri Güncelle" }) 
```

`click`并将-event绑定到`$('.EditCustomerLink')`

# c# - ASP.Net 中的线程敏捷性是什么意思？

> ID：11306888
> 
> 赞同：9
> 
> 时间：2012-07-03T08:11:48.577
> 
> 标签：c#, asp.net, threadpool, httpcontext

我正在阅读一篇关于 HttpContext 和 CallContext 的文章并查看线程敏捷性。这是什么意思？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T08:18:31.793

这意味着 IIS 可以自由地使用多个线程来处理单个请求，尽管不是并行的。

基本上，IIS 尝试异步执行 I/O 操作，从而在操作期间释放调用线程。该线程返回到池中，同时可用于处理其他请求。

当异步 I/O 操作完成时，可以将控制权返回给最初处理请求的线程以外的线程（因为该线程可能在其他地方忙），因此可以尽快继续处理请求。

# php - TinyMCE 未正确将数据存储在数据库中

> ID：11306890
> 
> 赞同：2
> 
> 时间：2012-07-03T08:11:51.663
> 
> 标签：php, mysql, tinymce

我正在使用`TinyMCE`，但问题是当我`TinyMCE`在我的本地主机上将数据存储到 db 时，它可以正常工作，但是当我使用相同`TinyMCE`并存储到服务器上的 db 时，它无法正确存储。我想存储数据：-

```
The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32\. 
```

但在数据库中它存储像（服务器）： -

```
The first line of Lorem Ipsum, \"Lorem ipsum dolor sit amet..\", comes from a line in section 1.10.32. 
```

当我在服务器（Linux）上运行我的代码时，它会在“”（双代码）之前附加“\”

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:34:50.663

这是魔术行情。`phpinfo()`页面上会告诉您它们是否处于活动状态，如果处于活动状态，请在您的 php.ini 文件中将其关闭。

确保这些都设置为`Off`：

```
magic_quotes_gpc = Off
magic_quotes_runtime = Off 
magic_quotes_sybase = Off 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:15:20.300

我认为这与 TinyMCE 无关，而是与您的服务器有关。

有一个名为[Magic Quotes](http://php.net/manual/en/security.magicquotes.php)的 PHP 选项会自动在引号前添加斜杠。

[`phpinfo()`](http://www.php.net/phpinfo)会显示魔术引号是否打开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T08:18:20.707

你可以试试这个：

```
$_REQUEST['text'] = stripslashes($_REQUEST['text']); 
```

这将去掉“\”，我认为它们是 PHP 指令 magic_quotes_gpc 的原因。

# python - 通过示例确定范围的 Python 问题

> ID：11306891
> 
> 赞同：1
> 
> 时间：2012-07-03T08:11:54.950
> 
> 标签：python, wxpython

我试图弄清楚如何在 Python 中处理参数，名称范围规则也给我带来了一些困难。我正在使用 SVG+Javascript，它处理起来非常简单，我在 JS 中编写了一些基本代码只是为了举例说明，因为阅读 Python 并没有解决我的愚蠢问题。[这](http://www.atarado.com/stackOF/SO-rect-examp.svg)是链接，您可以在其中看到下面的代码。很简单。

```
<svg id="svgRoot" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect id="background" x="1%" y="2%" width="98%" height="97%" fill="khaki" onmousedown="takePos(evt)" />
<script type="text/ecmascript">
<![CDATA[
var x1, x2;
var Root=document.documentElement;

function takePos(evt){
  x1=evt.clientX;
  y1=evt.clientY;
  var w=0;
  var h=0;
  Root.setAttributeNS(null, "onmousemove", "mouseMove(evt)");
  Root.setAttributeNS(null, "onmouseup", "endPos()");
  buildRect(w, h);
}
function mouseMove(evt){
  var w=evt.clientX-x1;
  var h=evt.clientY-y1;
  var r=document.getElementById("svgRoot").lastChild;
  if ((w>0)&&(h>0)) {
    r.setAttributeNS(null, "width", w);
    r.setAttributeNS(null, "height", h);
  }
}
function endPos(){
  Root.setAttributeNS(null, "onmousemove", null);
  Root.setAttributeNS(null, "onmouseup", null);
}
function buildRect(w, h){
  var cont=document.getElementById("svgRoot");
  var r=document.createElementNS("http://www.w3.org/2000/svg", "rect");
  r.setAttributeNS(null, "id", "svgR");
  r.setAttributeNS(null, "x", x1);
  r.setAttributeNS(null, "y", y1);
  r.setAttributeNS(null, "width", w);
  r.setAttributeNS(null, "height", h);
  r.setAttributeNS(null, "rx", "10");
  r.setAttributeNS(null, "fill", "darkblue");
  r.setAttributeNS(null, "fill-opacity", "0.5");
  cont.appendChild(r);
}
]]>
</script>

</svg> 
```

最简单的鼠标绘制矩形。现在下面是我的泰坦尼克号尝试在 wx.Python 中编写类似的东西。

```
#   HOW TO DRAW RECTANGLE AS IN MY SVG-EXAMPLE ?

import wx

class MyPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent, wx.ID_ANY)
        self.SetBackgroundColour('white')
        self.Bind(wx.EVT_LEFT_DOWN, self.onDown)
        self.Bind(wx.EVT_MOTION, self.onMove)
        self.Bind(wx.EVT_LEFT_UP, self.onUp)

    def onDown(self, evt):
        pt1 = evt.GetPosition() # firstPosition tuple
        w = pt1.x   # starting with zero width and height
        h = pt1.y
        self.drawRect(pt1, w, h)    #??? args

    def onMove(self, evt):
        pt2 = evt.GetPosition() 
        w = pt2.x - pt1.x
        h = pt2.y - pt1.y
        # should to append new width and height while moving

    def onUp(self):
        #  had to finish drawing

    def drawRect(self, pt1, w, h):
        pdc = wx.PaintDC(self)
        try:
            # needed to give realistic transparency 
            dc = wx.GCDC(pdc)
        except:
            # wx.PaintDC alone will not give transparency
            dc = pdc
        r, g, b = (30, 140, 220)
        pencolour = wx.Colour(r, g, b, 180)
        brushcolour = wx.Colour(r, g, b, 120)
        dc.SetPen(wx.Pen(pencolour))
        dc.SetBrush(wx.Brush(brushcolour))
        rect = wx.Rect(pt1, w, h)
        dc.DrawRoundedRectangleRect(rect, 8)

app = wx.App(0)
caption = "wx.GCDC() is here to achieve transparency"
frame = wx.Frame(None, wx.ID_ANY, caption, size=(400, 310))
MyPanel(frame)
frame.Show(True)
app.MainLoop() 
```

请参考 Javascript 代码来解释我如何在 wx.Python 中完成这项工作。我已经尝试在互联网和书籍中阅读示例。Python 中的其他东西看起来非常简单和合乎逻辑，一点也不麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:12:32.173

由于您使用的是类 ( `MyPanel`)，因此您应该将矩形/数据存储在类成员中 (使用`self`)。

例如（untestet，但你会明白的）：

```
def __init__(self, ...)
    ...
    self.pt1 = None
    self.pt2 = None
    self.rects = []

def onDown(self, evt):
    self.pt1 = evt.GetPosition() # new start position

def onMove(self, evt):
    self.pt2 = evt.GetPosition() # end position

def onUp(self, evt):
    # if mouse is released, store the points in the list
    self.rects.append((self.pt1, self.pt2))
    self.pt1 = self.pt2 = None

def onDraw(self, evt):
    dc = wx.PaintDC(self)

    # if we are currently creating a new rect, draw it
    if self.pt1 and self.pt2:
        self.drawRect(dc, self.pt1, self.pt2)

    # draw all finished rects
    for p1, p2 in self.rects:
        self.drawRect(dc, p1, p2) 
```

# android - 如何从小部件按钮触发某些内容？

> ID：11306894
> 
> 赞同：2
> 
> 时间：2012-07-03T08:12:06.980
> 
> 标签：android, android-intent, android-widget

无论我做什么，我都无法通过单击小部件上的按钮来触发任何事情。这是我写的一些代码，谁能告诉我为什么`onReceive`单击小部件按钮时不调用？

此外，我想在按钮单击时运行一个功能......基于下面的代码，我有正确的想法吗？

```
public class WidgetProvider extends AppWidgetProvider {

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

        Intent intent = new Intent(context, WidgetProvider.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);

        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);
        views.setOnClickPendingIntent(R.id.toggleButton, pendingIntent);
        appWidgetManager.updateAppWidget(appWidgetIds[0], views);

    }

    @Override
    public void onReceive(Context context, Intent intent) {
        // why don't i get here with the button click?
        Log.e("!", intent.getAction());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:24:12.043

尝试先调用 onReceive 的超级方法。

```
 @Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);
    // why don't i get here with the button click?
    Log.e("!", intent.getAction());
} 
```

对我来说工作得很好！

# database - DBCP 连接池登录超时

> ID：11306896
> 
> 赞同：10
> 
> 时间：2012-07-03T08:12:12.460
> 
> 标签：database, oracle, apache, jdbc, connection

根据[DBCP 文档](http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html#setLoginTimeout%28int%29)，BasicDataSource 不支持 setLoginTimeout()。我的问题是如何设置 LoginTimeout 来创建 Connection 对象？我知道我可以在池上设置 maxWait，但我的理解是，这只会在池用完并且您正在等待现有连接释放时使用。它不会让我摆脱需要创建新连接的情况，但连接/登录到数据库挂起。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-21T06:56:41.520

那么总有一个选项可以向 URL 添加正确的参数。根据您使用的数据库，您可以在 JDBC url 中添加参数之一。

[这是](https://issues.apache.org/jira/browse/DBCP-218)确认 BasicDataSource 不支持 loginTimeout的链接

[在这个博客的底部](http://www.cubrid.org/blog/dev-platform/understanding-jdbc-internals-and-timeout-configuration/)有一个表格，列出了连接超时的 URL 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-22T19:00:21.837

@Sap 是对的，您可以使用 JDBC url 来添加连接属性，例如：

```
basicDataSource.setUrl("jdbc:postgresql://192.168.0.100:5432/postgres?connectTimeout=TIME_IN_SECONDS"); 
```

哪里`TIME_IN_SECONDS`可以是任何整数值。

此外，我们可以使用[BasicDataSource#setConnectionProperties](https://commons.apache.org/proper/commons-dbcp/configuration.html)。正如参数所说：

> 建立新连接时将发送到我们的 JDBC 驱动程序的连接属性。字符串的格式必须是 [propertyName=property;]* 注意 - “用户”和“密码”属性将被显式传递，因此它们不需要包含在此处。

因此，它可能类似于（并遵循前面的示例）：

```
basicDataSource.setUrl("jdbc:postgresql://192.168.0.100:5432/postgres");
basicDataSource.setConnectionProperties("connectTimeout=TIME_IN_SECONDS"); 
```

PS：

您可以在属性`;`末尾添加更多属性。

# c# - 使用来自另一个类的 EventAggregator 刷新 Window 的 ViewModel 中的属性

> ID：11306897
> 
> 赞同：2
> 
> 时间：2012-07-03T08:12:13.673
> 
> 标签：c#, .net, wpf, prism, eventaggregator

所以..我有一些核心课程。当它正在加载一些模块时，我正在尝试使用 EventAggregator.GetEvent().Publish() 向状态窗口发送一些通知。状态窗口显示：

```
private Core()
        {
            SystemManager.EventAggregator.GetEvent<StartProgressWindow>().Publish(null);
            this.InitializeCore();
        } 
```

StartProgressWindow 是启动状态窗口事件的地方，InitializeCore 方法是加载所有模块的地方。

状态通知发送：

```
Core.EventAggregator.GetEvent<ChangeProgressStatus>().Publish("Some module is loading"); 
```

和订户：

```
eventAggregator.GetEvent<ChangeProgressStatus>().Subscribe((message) =>
                {
                    this.Status = message;
                }); 
```

状态属性：

```
public string Status 
        {
            get
            {
                return status;
            }
            set
            {
                this.status = value;
                RaisePropertyChanged("Status");
            }
        } 
```

捆绑：

```
<Label Content="{Binding Status, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

而且，实际上，问题是：

属性随我发送到的所有状态而变化。但它并没有反映在 UI 上，它是 forzen。我在 ViewModel 类的构造函数中将 Status-property 的值设置为“Some string”，当然它反映得很好。我做错了什么？谢谢，帕维尔！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:39:45.380

我怀疑这是因为您的所有事件都与方法同时处理，所以在所有事件和方法完成`InitializeCore()`之前它实际上不会渲染任何东西`InitializeCore()`

然后尝试`StartProgressWindow`在较低的[DispatcherPriority](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)`Render`上启动您的事件，例如`DispatcherPriority.Background`

```
private Core()
{
    this.Dispatcher.BeginInvoke(DispatcherPriority.Background,
        new Action(delegate 
        { 
            SystemManager.EventAggregator.GetEvent<StartProgressWindow>().Publish(null);
        }));

    this.InitializeCore();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:50:57.927

您是否尝试过确保订阅 UI 线程？

```
eventAggregator.GetEvent<ChangeProgressStatus>().Subscribe((message) =>
                {
                    this.Status = message;
                }, ThreadOption.UIThread); 
```

# java - 在 Eclipse Juno 中使用 WebLogic

> ID：11306899
> 
> 赞同：0
> 
> 时间：2012-07-03T08:12:19.100
> 
> 标签：java, eclipse, oracle, weblogic, eclipse-juno

在 Oracle 为 Juno 发布 OEPE 之前，有没有办法在 Juno 中使用 WebLogic？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:51:05.183

根据这个[论坛](https://forums.oracle.com/forums/thread.jspa?threadID=2396316)，用于 Juno (4.2) 的 OEPE 正在进行最终测试。它应该在几周内可用，但不能保证。

# if-statement - 你如何检测使用 if 语句选择了 UIPickerView 行

> ID：11306901
> 
> 赞同：0
> 
> 时间：2012-07-03T08:12:21.917
> 
> 标签：if-statement, xcode4.2, uipickerview

我制作了一个按钮，以便当用户按下它并选择特定的行时，它会做一些事情。到目前为止，我有这个：

```
if (pickerView selectedRowInComponent:0) {
                    [mailComposerTwo setToRecipients:[NSArray arrayWithObjects:@"email@blah.com",nil]];
                } 
```

它自己工作。但是当我多次执行 if 语句时，它会崩溃。使其工作的方法？

感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T08:11:34.960

```
NSArray *finalList = [[NSArray alloc]init];
//put all your if statements
if (pickerView selectedRowInComponent:0)
{
     [finalList arrayByAddingObjectsFromArray:@[@"email@address.com",@"second@address.com",...];
}
if (pickerView selectedRowInComponent:1)
{
     [finalList arrayByAddingObjectsFromArray:@[@"another@address.com",@"fourth@address.com",...];
}
//end of if statements
[mailComposerTwo setToRecipients:finalList];
[self presentViewController:yourInitializedMessageController animated:YES completion:^{NSLog(@"message controller is presented");}]; 
```

这将执行单个方法调用，而不是不断地重新分配由于某种奇怪的原因导致您的异常。`presentModalViewController:animated:`自 iOS 6.0 起已弃用？如果不是 7.0 我相信。

笔记！使消息控制器成为主视图控制器的属性。这是一种很好的做法，因此如果您需要恢复它，iOS 不会自动发布它。但是，如果您使用 MFMessageComposer，iOS 将保持 Messenger 分配或在某个线程中运行，因此为它初始化视图控制器会很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:04:14.790

问题可能在于您的邮件编辑器，而不是选择器视图。当您显示作曲家时，请确保仅在尚未创建时才创建它。

另外，请确保在显示后释放它：

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

...[configure the picker]

[rootContainer presentModalViewController:picker animated:YES];

[picker release]; 
```

# jakarta-ee - 下载 Oracle Kodo 以与 WebLogic 一起使用

> ID：11306902
> 
> 赞同：0
> 
> 时间：2012-07-03T08:12:38.343
> 
> 标签：jakarta-ee, weblogic

我正在 WebLogic Workshop 10.3 上开发一个 Java EE Web 应用程序。

我正在尝试添加 JPA(1.0) 和 Oracle Kodo(4.1) 的方面。我尝试从 Oracle 站点添加 Kodo 库。（选定选项，使用 Oracle 网站上的 Oracle Kodo 库）。

我得到以下异常：

```
Failed while downloading Oracle Kodo library from Oracle site.

sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

我无法看到正在尝试连接的 URL 研讨会。

有没有免费的 KODO 库下载？我过去曾尝试下载它，并且能够成功下载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:46:15.623

我不知道它是否对您有用，但我使用 WebLogic Server 12c，它内置了对 Toplink 和 Kodo 的支持（可以[使用 console](http://docs.oracle.com/cd/E24329_01/apirefs.1211/e24401/taskhelp/domainconfig/ConfigureDefaultJPAProvider.html)更改默认的 JPA 提供程序）。因此，如果 WebLogic Server 10.3 对默认 JPA 提供程序具有相同的设置，那么您应该在中间件目录（`modules`我想是子目录）中的某处有 Kodo。`Middleware10.3.3\modules\com.bea.core.kodo_1.2.0.0_4-2-1.jar`我在jar 所在的位置安装了 WebLogic Server 10.3.3 。这是你需要的吗？

# python - Python：异常后继续循环

> ID：11306908
> 
> 赞同：12
> 
> 时间：2012-07-03T08:12:59.013
> 
> 标签：python, exception, loops

我有以下脚本（如下）。这将返回 URL 的状态代码。它遍历一个文件并尝试连接到每个主机。唯一的问题是它在遇到异常时显然会停止循环。

我已经尝试了很多事情来将它的方式放在一个循环中，但无济于事。有什么想法吗？

```
import urllib
import sys
import time

hostsFile = "webHosts.txt"

try:
    f = file(hostsFile)
    while True:
        line = f.readline().strip()
        epoch = time.time()
        epoch = str(epoch)
        if len(line) == 0:
            break
        conn = urllib.urlopen(line)
        print epoch + ": Connection successful, status code for " + line + " is " + str(conn.code) + "\n"
except IOError:
    epoch = time.time()
    epoch = str(epoch)
    print epoch + ": Connection unsuccessful, unable to connect to server, potential routing issues\n"
    sys.exit()
else:
    f.close() 
```

编辑：

我在此期间提出了这个问题，有什么问题吗？（我还在学习：p）...

```
f = file(hostsFile)
while True:
    line = f.readline().strip()
    epoch = time.time()
    epoch = str(epoch)
    if len(line) == 0:
        break
    try:
        conn = urllib.urlopen(line)
        print epoch + ": Connection successful, status code for " + line + " is " + str(conn.code) + "\n"
    except IOError:
        print epoch + "connection unsuccessful" 
```

谢谢，

米宾

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T08:21:21.500

您可以处理引发的异常。此外，在打开文件时使用上下文管理器，它可以简化代码。

```
with open(hostsFile, 'r') as f:
    for line in f:
        line = line.strip()
        if not line:
            continue

        epoch = str(time.time())

        try:
            conn = urllib.urlopen(line)
            print epoch + ": Connection successful, status code for " + line + " is " + str(conn.code) + "\n"
        except IOError:
            print epoch + ": Connection unsuccessful, unable to connect to server, potential routing issues\n" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T08:18:06.920

您需要处理由 引发的异常`urllib.urlopen(line)`，类似这样。

```
try:
    f = file(hostsFile)
    while True:
        line = f.readline().strip()
        epoch = time.time()
        epoch = str(epoch)
        if len(line) == 0:
            break
        try:
           conn = urllib.urlopen(line)
        except IOError:
           print "Exception occured"
           pass
except IOError:
    epoch = time.time()
    epoch = str(epoch)
    print epoch + ": Connection unsuccessful, unable to connect to server, potential routing issues\n"
    sys.exit()
else:
    f.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T09:00:03.797

您可以尝试像这样在 while 循环中捕获异常。

```
try:
    f = file(hostsFile)
    while True:
        line = f.readline().strip()
        epoch = time.time()
        epoch = str(epoch)
        if len(line) == 0:
            break
        try:
            conn = urllib.urlopen(line)
            print epoch + ": Connection successful, status code for " + line + " is " + str(conn.code) + "\n"
        except:
            epoch = time.time()
            epoch = str(epoch)
            print epoch + ": Connection unsuccessful, unable to connect to server, potential routing issues\n"
except IOError:
    pass
else:
    f.close() 
```

# java - 将 HornetQ(2.2.x) 与 Spring 3.1 集成

> ID：11306913
> 
> 赞同：2
> 
> 时间：2012-07-03T08:13:21.057
> 
> 标签：java, spring, jboss, jms, hornetq

几天来，我一直在网上浏览一些文档和帖子，但无法正确配置它。

我正在独立环境中工作，我正在尝试将 HornetQ 简单地集成到我的 Spring3.1 应用程序中。

我知道我还必须修改几个 Hornetq 特定的 xml。

我的谜题中似乎总是缺少一些东西。

任何完整的简单工作样本？

非常感谢，雷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:59:45.793

您是使用 HornetQ 作为嵌入式 JMS 服务器还是将其与 JBoss 一起使用？在这两种情况下，它都会有 2 个不同的答案。尼古拉斯回答与嵌入式案例有关。

我假设您使用的是集成在 Jboss 中的 HornetQ，因为您说您在独立环境中工作，所以我建议您不要在 Spring 中集成 JMS，而是使用 EE 功能，如 EJB 和 MDB。它很容易配置并且已经存在。您只需要正确配置它，为消费者创建 MDB 并为初始化 spring 配置创建 @Singleton EJB。

这是工作[示例](http://translate.google.com/translate?hl=ru&sl=auto&tl=en&u=http://grigory-panov.blogspot.com/2012/07/jboss-7.html)（[俄罗斯原创](http://grigory-panov.blogspot.com/2012/07/jboss-7.html)）
**编辑** 所以，完整版：

1.  HornetQ 配置。我在这里放了带有 inVm 连接器的简单版本，但您可以稍后将其更改为 netty。

hornetq-configuration.xml：

```
<configuration xmlns="urn:hornetq"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="urn:hornetq/schema/hornetq-configuration.xsd">

    <persistence-enabled>false</persistence-enabled>
    <create-bindings-dir>true</create-bindings-dir>
    <create-journal-dir>true</create-journal-dir>
    <!--<create-paging-dir>true</create-paging-dir>-->

    <journal-directory>/tmp/journal</journal-directory>
    <paging-directory>/tmp/paging</paging-directory>
    <bindings-directory>/tmp/binding</bindings-directory>
    <!-- disable security -->
    <security-enabled>false</security-enabled>
    <!-- Connectors -->

    <connectors>
        <connector name="in-vm">
            <factory-class>org.hornetq.core.remoting.impl.invm.InVMConnectorFactory</factory-class>
        </connector>
    </connectors>

    <acceptors>
        <acceptor name="in-vm">
            <factory-class>org.hornetq.core.remoting.impl.invm.InVMAcceptorFactory</factory-class>
        </acceptor>
    </acceptors>

    <!-- Other config -->

    <!--<security-settings>-->
        <!--&lt;!&ndash;security for example queue&ndash;&gt;-->
        <!--<security-setting match="#">-->
            <!--<permission type="createDurableQueue" roles="guest"/>-->
            <!--<permission type="deleteDurableQueue" roles="guest"/>-->
            <!--<permission type="createNonDurableQueue" roles="guest"/>-->
            <!--<permission type="deleteNonDurableQueue" roles="guest"/>-->
            <!--<permission type="consume" roles="guest"/>-->
            <!--<permission type="send" roles="guest"/>-->
        <!--</security-setting>-->
    <!--</security-settings>-->
</configuration> 
```

hornetq-jms.xml：

```
<configuration xmlns="urn:hornetq"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="urn:hornetq /schema/hornetq-jms.xsd">
    <connection-factory name="ConnectionFactory">
        <connectors>
            <connector-ref connector-name="in-vm"/>
        </connectors>
        <entries>
            <entry name="ConnectionFactory"/>
        </entries>
        <consumer-window-size>0</consumer-window-size>
        <retry-interval>1000</retry-interval>
        <retry-interval-multiplier>1.5</retry-interval-multiplier>
        <max-retry-interval>60000</max-retry-interval>
        <reconnect-attempts>1000</reconnect-attempts>
    </connection-factory>

    <!--the queue used by the example-->
    <queue name="statusQueue">
        <entry name="queue/statusQueue"/>
    </queue>
</configuration> 
```

如果您启用安全性，您还应该使用用户和角色描述创建 hornetq-users.xml。

弹簧配置：

```
<bean id="jmsServer" class="org.hornetq.jms.server.embedded.EmbeddedJMS" init-method="start" destroy-method="stop"/>

    <bean id="jmsConnectionFactory"
          class="mypackecge.JmsConnecitonFactoryLocator"
          depends-on="jmsServer"
          factory-method="lookupConnectionFactory">
        <constructor-arg name="server" ref="jmsServer"/>
    </bean>

    <bean id="jmsQueueTemplate" class="org.springframework.jms.core.JmsTemplate" depends-on="jmsServer">
        <property name="connectionFactory">
            <ref bean="jmsConnectionFactory"/>
        </property>
        <property name="destinationResolver">
            <ref bean="jmsDestResolver"/>
        </property>
    </bean>

    <bean id="jmsDestResolver" class="mypackage.EmbeddedDestinationResolver">
        <property name="server" ref="jmsServer"/>
    </bean>

    <bean id="statusQueue" class="mypackage.JmsQueueLocator"
          depends-on="jmsServer"
          factory-method="lookupQueue">
        <constructor-arg name="server" ref="jmsServer"/>
        <constructor-arg name="queueName" value="queue/statusQueue"/>
    </bean>

    <bean id="jmsContainerStatus" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
        <property name="connectionFactory" ref="jmsConnectionFactory"/>
        <property name="destination" ref="statusQueue"/>
        <property name="messageListener" ref="statusChecker" />
        <property name="concurrentConsumers" value="5"/>
    </bean> 
```

接下来，为查找 jms sessionFacroty 和队列创建类。

目标解析器，由 jmsTeplate 用于解析发送消息的位置。

```
public class EmbeddedDestinationResolver implements DestinationResolver {

    private EmbeddedJMS server;

    public EmbeddedJMS getServer() {
        return server;
    }

    public void setServer(EmbeddedJMS server) {
        this.server = server;
    }

    @Override
    public Destination resolveDestinationName(Session session, String destinationName, boolean pubSubDomain) throws JMSException {
        return (Destination)server.lookup(destinationName);
    }
} 
```

连接工厂定位器。

```
public class JmsConnecitonFactoryLocator {
    public static HornetQJMSConnectionFactory lookupConnectionFactory(EmbeddedJMS server){
        HornetQJMSConnectionFactory cf = (HornetQJMSConnectionFactory) server.lookup("ConnectionFactory");
        return cf;
    }
} 
```

队列定位器。

```
public class JmsQueueLocator {

    public static Queue lookupQueue(EmbeddedJMS server, String queueName){
        return (Queue) server.lookup(queueName);
    }
} 
```

消息处理程序。

```
@Component(value = "statusChecker")
public class StatusChecker implements MessageListener {

    private static final Logger logger = LoggerFactory.getLogger(StatusChecker.class);

    @Override
    public void onMessage(Message message) {
      // handle message, call message.acknowledge()
    } 
```

和 jmsTemplate 示例，用于在队列中发送消息：

```
@Component
public class WorkQueue {

    private JmsTemplate jmsTemplate;

    public JmsTemplate getJmsTemplate() {
        return jmsTemplate;
    }

    @Autowired
    public void setJmsTemplate(JmsTemplate jmsTemplate) {
        this.jmsTemplate = jmsTemplate;
    }

    public void addStatusRequestToQueue(final Transaction t) throws JMSException {

        jmsTemplate.send("queue/statusQueue", new MessageCreator() {
            @Override
            public Message createMessage(Session session) throws JMSException {
                TextMessage msg = session.createTextMessage();
                msg.setText(String.valueOf(t.getId()));
                return msg;
            }
        });
    } 
```

# java - 使用 GET 调用将登录表单连接到 swing 中的 url

> ID：11306917
> 
> 赞同：1
> 
> 时间：2012-07-03T08:13:32.580
> 
> 标签：java, swing, http, rest, get

我想在 Swing JAVA 中创建一个登录表单，当用户单击提交按钮时，它应该使用 GET 调用从 URL 获取用户信息。我的登录表单有两个字段：用户名：密码：和“提交”按钮

我使用了以下代码。我在 NetBeans 7.1.2 中工作。我是 Java 新手。

```
 public void actionPerformed(ActionEvent ae)throws IOException
  {
 String value1=text1.getText();
String value2=text2.getText();
URL url = new URL("http://link?      userName=value1&password=value2");
HttpURLConnection httpCon = (HttpURLConnection) url.openConnection(); 
httpCon.setDoOutput(true); httpCon.setRequestMethod("GET");
OutputStreamWriter out = new OutputStreamWriter( httpCon.getOutputStream());
System.out.println(httpCon.getResponseCode());
System.out.println(httpCon.getResponseMessage());
out.close(); 
```

}

但它不工作。谁能告诉我我错在哪里，或者可以给我更好的方法来做到这一点。

```
 * @author tapasweni
 */
class Login extends JFrame implements ActionListener
{ 
```

我正在使用它，但现在我收到错误代码 404，而如果我在浏览器中键入 URL，它会给我正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:20:47.637

这是因为您在 URL 中编码了文字“value1”和“value2”而不是它们的变量。试试这个：

```
URL url = new URL("http://wisekar.iitd.ernet.in/active/api_resources.php/method/user?userName="+value1+"&password="+value2); 
```

请注意，您应该使用 URLEncoder（使用字符集 UTF-8）对这些值进行编码。

# mysql - MySQL数据库-备份数据库时出错

> ID：11306918
> 
> 赞同：0
> 
> 时间：2012-07-03T08:13:39.537
> 
> 标签：mysql, linux, cakephp

当我尝试在 Linux 中进行数据库备份时，出现此错误，

“出现错误：1296：使用 LOCK TABLE 时从 NDBCLUSTER 收到错误 157‘未知错误代码’”

有人可以指导我如何解决这个错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:17:32.383

从 linux shell 执行以下命令以进行数据库转储（备份）

```
mysqldump -p -u[username] --no-lock-tables [database]>dumpfile.sql 
```

将 [username] 和 [database] 替换为您的相应凭据，例如：

```
mysqldump -p -uroot --no-lock-tables mydb>dumpfile.sql 
```

# wcf - 如何在 Windows 2008 R2 IIS 上轻松地从 VS2008 发布网站？

> ID：11306923
> 
> 赞同：0
> 
> 时间：2012-07-03T08:14:12.823
> 
> 标签：wcf, iis, publish

我正在使用 Visual Studio 2008 开发一个 WCF 项目，该项目需要在外部 Windows 2008 R2 服务器上定期发布。项目发布是为了测试目的而完成的，并且需要尽可能容易地完成，因为它经常发生重构和重新发布它。在远程 IIS 上发布它的最佳、最简单和最快的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:19:04.103

我为此目的使用[CruiseControl.NET](http://confluence.public.thoughtworks.org/display/CCNET/Welcome+to+CruiseControl.NET)

# jquery - jQuery 选项卡和 cookie 不起作用

> ID：11306924
> 
> 赞同：0
> 
> 时间：2012-07-03T08:14:13.810
> 
> 标签：jquery, html

所以...我的问题很简单，但对我来说太高了。我有一个 jquery 选项卡脚本，我想用 cookie 进行扩展，但不工作。
如何进行？谢谢

src:jquery-1.7.2.js
src:js/jquery.cookie.js

```
 $(".tab_content").hide();
    $("ul.tabs li:first").addClass("active").show();
    $(".tab_content:first").show();

    $("ul.tabs li").click(function() {
            $("ul.tabs li").removeClass("active");
            $(this).addClass("active");
            $(".tab_content").hide();

            var activeTab = $(this).find("a").attr("href");
            $(activeTab).fadeIn();
            return false;
    });
    $("ul.tabs li:first").css('border-left','none');
    $("ul.tabs li a:first").css('color','#232323');
    $("ul.tabs li a").click(function() {
            $(this).css('color','#232323');
            $("ul.tabs li.active a").css('color','#333');
    }); 
```

其他脚本：

```
$("ul.tabs a").click(function(e){
            e.preventDefault();
            $("#" + $.cookie(cookieName)).removeClass("selected");
            $.cookie(cookieName, $(this).attr("href"), cookieOptions);
            $("#" + $.cookie(cookieName)).addClass("selected");
            e.preventDefault();
            $(".tab_container").val( $.cookie(cookieName) );
}); 
```

和 HTML：

```
<ul class="tabs">
    <li><a href="#A"><img src="" height="41" alt="A" class="fruit" />
    <div class="fruit_name">AAA</div>
    </a></li>
    <li><a href="#B"><img src="" width="79" height="41" alt="B" class="fruit" />
    <div class="fruit_name">BBB</div>
    </a></li>
    <li><a href="#C"><img src="" width="80" height="41" alt="C" class="fruit" />
    <div class="fruit_name">CCC</div>
    </a></li>
</ul>

<div class="tab_container">
    <div id="A" class="tab_content">
         This is AAA content.
    </div>
</div>
<div class="tab_container">
    <div id="B" class="tab_content">
         This is BBB content.
    </div>
</div>
<div class="tab_container">
    <div id="C" class="tab_content">
         This is CCC content.
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:36:14.447

这可能是问题所在：

*   div 元素的 ID：“A”
*   锚元素的 HREF：“#A”

您为 jQuery 连接的选择器

```
$("#" + $.cookie(cookieName)) 
```

看起来像这样：

```
"#" + "#A" = "##A" 
```

解决方案可能是 HREF 属性，如“A”或使用 ALT 属性。虽然使用 ALT 属性应该被认为是一种 hack。:-)

```
<a href="A"> ... </a> 
```

或者

```
<a href="#" alt="A"> ... </a> 
```

就像一个边节点：jQuery 选择器在引用 HTML 元素的 ID 时使用“#”。与 CSS 非常相似。

# android - 调用 setText() 和 invalidate() 后 TextView 无法在 Canvas 上正确绘制

> ID：11306925
> 
> 赞同：1
> 
> 时间：2012-07-03T08:14:14.223
> 
> 标签：android, bitmap, android-canvas, textview, android-view

我的目的是制作一个`Bitmap`显示用户提供的文本的图像，然后可以将图像保存到缓存中。

调用 `TextView.setText()`and后`TextView.invalidate()`，`TextView`并没有像我预期的那样更新。它仍然在`Canvas`.

```
@Override
public void onClick(View v) {
    // tv is a TextView and et is an EditText.
    tv.setText(et.getText().toString());
    tv.invalidate();
    // if measure() isn't called, getMeasuredWidth() returns previous value.tv.measure(0, 0);

    int screenWidth = (int) tv.getMeasuredWidth();
    int screenHeight = (int) tv.getMeasuredHeight();

    if (screenHeight * screenWidth != 0) {
        LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                                                    screenWidth, screenHeight);
        Bitmap testB;

        testB = Bitmap.createBitmap(screenWidth, screenHeight, Bitmap.Config.ARGB_8888);
        Canvas c = new Canvas(testB);

        tv.draw(c);
        // tv draws previous String on Canvas c.

        iv = (ImageView) findViewById(R.id.image);
        iv.setLayoutParams(layoutParams);
        iv.setBackgroundColor(Color.RED);
        iv.setImageBitmap(testB);
    }
} 
```

文件说

> `public void invalidate ()`
> 
> 使整个视图无效。如果视图可见， `onDraw(android.graphics.Canvas)`将在将来的某个时间点调用。这必须从 UI 线程调用。要从非 UI 线程调用，请调用`postInvalidate()`.

这是否意味着我应该重写该`onDraw()`方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:49:14.260

我找到了解决方案...（可能是解决方案）

在调用draw()之前需要添加这一行：

```
tv.layout(0, 0, screenWidth, screenHeight); 
```

我认为宽度和高度还没有更新，因为 getWidth() 返回以前的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:47:15.607

无效意味着它只是一种刷新。一旦您尝试使用离开并带到前面，它应该可以工作。例如：

```
// Try this ...
tv.setVisibility(View.GONE);
tv.bringToFront();
tv.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:06:49.853

我认为它应该更新，你甚至不需要调用`invalidate()`. 也许您的代码中的其他地方存在问题。你的`onClick`功能对我来说似乎是正确的。

# backbone.js - Backbone.js 路由器 - 带有 splat 的路由也调用没有 splat 的路由

> ID：11306927
> 
> 赞同：0
> 
> 时间：2012-07-03T08:14:21.013
> 
> 标签：backbone.js, backbone-routing

我有一个设置了一些路由的主干.js 路由器，如下所示：

```
routes : {
  'a-route' : 'goToRoute',
  'a-route/*splat' : 'goToRoute'
}

goToRoute : function(splat){
if(!splat) {
  // do this
} else {
  // do that with splat
} 
```

当我做一个

```
router.navigate('a-route', {trigger : true}); 
```

一切正常。但是当我这样做时

```
router.navigate('a-route/more', {trigger : true}); 
```

路由器触发两次：第一次 splat 等于“未定义”，然后第二次 splat 等于“更多”。

如果我注释掉路由 'a-route' : 'goToRoute'，那么一切都可以通过 router.navigate('a-route/more') 正常工作......但我需要两条路线 - 有和没有 splat。

根据文档，我认为我的设置正确，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:37:49.597

您不需要使用 *，您必须使用 : 在您的情况下。

```
routes : {
  'a-route' : 'goToRoute',
  'a-route/:splat' : 'goToRoute'
} 
```

# wso2 - 如何在 wso2 carbon 中应用补丁文件

> ID：11306929
> 
> 赞同：12
> 
> 时间：2012-07-03T08:14:28.177
> 
> 标签：wso2, wso2carbon

有人可以完成将 .patch 文件应用到 WSO2 ESB v4.0.3 所需遵循的步骤吗？我尝试了以下方法：

1.  上传`.patch`文件到`repository/components/patches`carbon_home/lib/patches

2.  跑`wso2server.sh start -DapplyPatches`

此命令在 components/patches 目录中创建一个名为`patch000`的目录，并用插件填充它。

我要应用的补丁是[https://issues.apache.org/jira/browse/TRANSPORTS-51](https://issues.apache.org/jira/browse/TRANSPORTS-51)

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T11:31:37.713

您需要将 .patch 文件应用到代码库并从中创建 jar。然后创建一个带有补丁名称的文件夹（例如：patch001）并将jar（s）放入其中并将新创建的补丁文件夹（例如：patch001）复制到repository/components/patches。现在运行 wso2server.sh -DapplyPatches 就可以了。

当您执行 -DapplyPatches 时，它会将 repository/components/plugins 目录的原始内容备份到 repository/components/patches 目录，这就是您看到 patch000 文件夹的原因（因此可以恢复到以前的状态）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-23T17:52:30.207

从 carbon 4.2.0 开始，你不需要提供 -DapplyPatches 选项来应用补丁。当服务器启动时，它会自动检测并应用是否有新补丁。这可以从日志文件 repository/logs/patches.log 中验证

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-28T04:53:46.390

**WSO2官方补丁，**

1.  阅读自述文件。（不是必须的步骤，如果你这样做更好）

2.  如果您已经启动，请关闭服务器。

3.  将 wso2carbon-version.txt 文件复制到 /bin。（不是必须的步骤，如果这样做更好）

4.  将 patchNumber 复制到 /repository/components/patches/

5.  使用以下命令重新启动服务器：Linux/Unix：sh wso2server.sh Windows：wso2server.bat

**由您创建的补丁**

Compile( `mvn clean install`) 并从修改后的代码库中获取 jar。例如，假设您正在为 carbon-registry [extensions](https://github.com/wso2/carbon-registry/tree/master/components/registry/org.wso2.carbon.registry.extensions)创建一个补丁。首先，克隆 carbon-registry 并进行修复，然后转到[扩展](https://github.com/wso2/carbon-registry/tree/master/components/registry/org.wso2.carbon.registry.extensions)模块。使用 maven build( `mvn clean install`) jar。然后创建一个带有补丁名称的文件夹（例如：patch9999）并将 jar（s）放入其中并将新创建的补丁文件夹（例如：patch9999）复制到`repository/components/patches`. 现在只需重新启动/启动产品，补丁就会被应用。

```
./wso2server.sh restart/start 
```

但是，如果产品早于 carbon 4.2.0，您必须在启动产品时提供 -DapplyPatches 属性，如下所示。

```
./wso2server.sh -DapplyPatches 
```

如果补丁成功应用，您可以在开头看到下面的一组行。

```
[2016-08-24 20:27:25,319]  INFO {org.wso2.carbon.server.extensions.PatchInstaller} -  Patch changes detected 
[2016-08-24 20:27:27,980]  INFO {org.wso2.carbon.server.util.PatchUtils.console} -  Backed up plugins to patch0000
[2016-08-24 20:27:28,010]  INFO {org.wso2.carbon.server.util.PatchUtils.console} -  Patch verification started
[2016-08-24 20:27:28,034]  INFO {org.wso2.carbon.server.util.PatchUtils.console} -  Patch verification successfully completed. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-27T03:02:10.033

正如 Sajith 所说，我们在 wso2server.sh 文件中默认添加了 -DapplyPatches 作为 JVM 参数。

# ios - 在设备上安装后启动 IPA 文件

> ID：11306930
> 
> 赞同：9
> 
> 时间：2012-07-03T08:14:31.977
> 
> 标签：ios, xcode, ipa

我设法使用 libimobiledevice 从我的终端在（非越狱）iOS 设备上安装 IPA 格式的应用程序。不幸的是，这只需要我一半。现在我需要自动启动新安装的应用程序，作为我们夜间构建工作的一部分，以进行测试。

非常感谢所有信息。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-18T12:45:17.550

我建议`idevicedebug`从`libimobiledevice`图书馆使用。[https://github.com/libimobiledevice/libimobiledevice](https://github.com/libimobiledevice/libimobiledevice)。

命令如下：`idevicedebug run [APP_ID]`. 通常，您必须先运行`ideviceinstaller -l`以获取 APP_ID 值，然后再运行`idevicedebug`。

这对我有用，希望对你也有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T13:31:08.220

如果您不介意使用其他实用程序（取决于 libimobiledevice）：

[Crackleware iDevice App Runner (GitHub)](https://github.com/crackleware/idevice-app-runner)

# jquery - 将 jquery 效果添加到下拉菜单并在 Hover 选项卡下方对齐下拉菜单

> ID：11306941
> 
> 赞同：0
> 
> 时间：2012-07-03T08:15:27.803
> 
> 标签：jquery, html, css

如何移动下拉框以在新闻选项卡下完全对齐。？目前，新闻下的下拉菜单完全不在新闻选项卡下（向右移动）。并在下拉菜单中添加 jquery 效果

[http://jsfiddle.net/A7rvZ/7/](http://jsfiddle.net/A7rvZ/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:21:25.177

用你的小提琴试试下面的代码。用你想要的任何类型的动画修改下面的代码。参考[.animate](http://api.jquery.com/animate/)。

```
 $('#coolMenu .pink p a').mouseover(function() {
        $('#coolMenu .pink ul').animate({
            height: ['toggle'],
            opacity: 0.75
        }, 3000, function() {
            $('#coolMenu .pink ul').css('display', 'block');
        });
    });​ 
```

要在悬停时对齐 ul，请对 selector 使用一些 CSS，例如“margin-left” `#coolMenu ul`。

# asp.net - 验证控件中的“服务器标记格式不正确”错误

> ID：11306944
> 
> 赞同：0
> 
> 时间：2012-07-03T08:15:48.783
> 
> 标签：asp.net, validation-controls

当我在源代码中放置控件的唯一 ID 时出现此错误。下面是源代码。

```
<ucPopupMember:PopupMember ID="PopupMember_MemberID" 
                           runat="server"                                
                           TextBoxMaxLength="12"
                           ValidationGroup="SpkrSetupGroup"/>
<asp:RequiredFieldValidator ID="RequiredFieldValidator_MemberID" 
                            runat="server" 
                            ErrorMessage="Member ID is required"
                            Text="*"
                            CssClass="errorlabel"
                            ValidationGroup="SpkrSetupGroup"
                            Display="Dynamic"
                            ControlToValidate="ctl00$ContentPlaceHolder_MainContent$TabContainer1$TabPanel_Entry$PopupMember_MemberID$TextBox_MemberCode"/> 
```

如何更改或修复此问题？由于“$”符号，我遇到了问题。

[更新]要验证的控件（文本框）在用户控件内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:18:36.770

您需要为[ControlToValidate](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.controltovalidate.aspx)属性指定控件的“服务器”ID。两个控件需要存在于同一个容器中。

在 PopupMember 控件中添加验证器：

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator_MemberID" 
                            runat="server" 
                            ErrorMessage="Member ID is required"
                            Text="*"
                            CssClass="errorlabel"
                            ValidationGroup="SpkrSetupGroup"
                            Display="Dynamic"
                            ControlToValidate="MemberCode"/> 
```

我想会员代码总是需要的，所以你不必再做任何事情了。

但如果有时不需要 MemberCode，请在 PopupMember 控件后面的代码中添加一个属性。

```
public bool MemberRequired
{
   set {RequiredFieldValidator_MemberID.Visible = value;}
} 
```

默认情况下是必需的。如果您不需要它，默认情况下在标记中使用`Visible="false"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:19:51.473

除了@Adrian 的建议，我认为开头和结尾应该是这样的：

```
<asp:RequiredFieldValidator>

</asp:RequiredFieldValidator> 
```

# c# - 在 windows phone 7.5 上查看 doc 、 docx 、 xls 、xlsx ...文件

> ID：11306946
> 
> 赞同：1
> 
> 时间：2012-07-03T08:15:57.190
> 
> 标签：c#, windows-phone-7

windows phone 7.5 是否有任何控件或库来查看（而不是编辑）doc、docx、xls、xlsx ......以及所有其他办公文档？我知道我可以尝试通过电话将文档发送到办公室，但我想要一个应用内解决方案。

谢谢你！

# wpf - WPF，动态颜色填充矩形

> ID：11306949
> 
> 赞同：1
> 
> 时间：2012-07-03T08:16:04.283
> 
> 标签：wpf, label, fill

我尝试为我的标签创建一个 ControlTemplate，如下所示：

```
<Style TargetType="{x:Type Label}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Label}">
                <Grid x:Name="LayoutRoot" Background="White">
                    <Rectangle Height="30" HorizontalAlignment="Left" Margin="10" 
                               Stroke="transparent" 
                               VerticalAlignment="Top" Width="3" 
                               Fill="#FF259FED" />

                    <ContentPresenter HorizontalAlignment="Left" Margin="17,0,0,0"  RecognizesAccessKey="True" 
                                      SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                      VerticalAlignment="Center"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Foreground" Value="#7A7E81" />
    <Setter Property="FontWeight" Value="Bold" />
</Style> 
```

我想在创建控件时填充矩形的颜色，例如：

```
<Label Content="Prénom" VerticalAlignment="Top" CouleurRectangle="#FF259FED" /> 
```

那么，当我创建控件时，如何更改我的 controlTemplate 中的属性“填充”以动态设置矩形的颜色？

多谢。

编辑：这是解决方案，我创建了一个从 Label 继承的新类，如下所示：

```
 Public Class LblTitreChamp
    Inherits Label

    Public Shared ReadOnly CouleurProperty As DependencyProperty =
        DependencyProperty.Register("CouleurRectangle", GetType(SolidColorBrush), GetType(LblTitreChamp))
    ''' <summary>Propriété pour insérer une couleur au début du Label</summary>
    Public Property CouleurRectangle As SolidColorBrush
        Get
            Return GetValue(CouleurProperty)
        End Get
        Set(ByVal value As SolidColorBrush)
            SetValue(CouleurProperty, value)
        End Set
    End Property

End Class 
```

然后，在我的 CControlTemplate 中：

```
<Style TargetType="{x:Type local:LblTitreChamp}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:LblTitreChamp}">
                    <Grid x:Name="LayoutRoot" Background="White">
                        <Rectangle Height="30" HorizontalAlignment="Left" Margin="10" 
                                   Stroke="transparent" 
                                   VerticalAlignment="Top" Width="3" 
                                  Fill="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Label}}, Path=CouleurRectangle}"/>

                        <ContentPresenter HorizontalAlignment="Left" Margin="17,0,0,0"  RecognizesAccessKey="True" 
                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                          VerticalAlignment="Center"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Foreground" Value="#7A7E81" />
        <Setter Property="FontWeight" Value="Bold" />
    </Style> 
```

最后，创建一个新标签：

```
<my:LblTitreChamp Content="ID" VerticalAlignment="Top" CouleurRectangle="Black" /> 
```

非常感谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:25:07.807

嗨 set Fill={TemplateBinding CouleurRectangle} 。希望这会有所帮助。我希望您创建了一个自定义标签类，它继承自标签并具有 DependencyProperty CouleurRectangle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:28:59.567

由于您的标签不是 a `CustomControl`，因此您不能在其上动态创建属性，因此最好的方法是使用标签的背景属性

```
...
<Rectangle Height="30" ...
                       Fill="{TemplateBinding Background}" />
... 
```

否则创建一个`CustomControl`继承`Label`并创建一个新的依赖属性，并为它定义一个 XAML 模板样式。

# iphone - 如何从核心数据中获取唯一字段值（song_type）

> ID：11306950
> 
> 赞同：2
> 
> 时间：2012-07-03T08:16:04.623
> 
> 标签：iphone, ios, core-data, ios4

我想知道如何从核心数据中获取唯一的字段值（song_type）。

我有下面的代码

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Songs" inManagedObjectContext:myManagedObjectContext];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]init];
    [fetchRequest setPropertiesToFetch:[NSArray arrayWithObject:@"song_type"]]; 
    [fetchRequest setEntity:entity];

    NSError *aError;

    NSMutableArray *fetchedResultsArray = [[myManagedObjectContext executeFetchRequest:fetchRequest error:&aError]mutableCopy];

    if(! fetchedResultsArray ){
        NSLog(@"EEEERRROR");
    }
    else {
        NSLog(@"fetched %d", [fetchedResultsArray count]);
    }

    [fetchedResultsArray release];
    [fetchRequest release]; 
```

我收到以下错误

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“传递给 setPropertiesToFetch 的密钥路径 song_type 无效：”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T08:27:25.667

设置以下 2 个属性，您就完成了。

```
fetchRequest.returnsDistinctResults = YES;
fetchRequest.resultType = NSDictionaryResultType; 
```

希望这可以帮助。

**编辑**

```
NSFetchRequest *fetchRequest= [[NSFetchRequest alloc]init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Songs" inManagedObjectContext:myManagedObjectContext];

//Take properties dictionary
NSDictionary *entityProperties = [entity propertiesByName];
[fetchRequest setEntity:entity];
[fetchRequest setReturnsDistinctResults:YES];
[fetchRequest setPropertiesToFetch:[NSArray arrayWithObject:[entityProperties objectForKey:@"song_type"]]];
NSArray * result = [myManagedObjectContext executeFetchRequest:fetchRequest error:nil]; 
```

# java - 如何在 Spring 测试中设置环境变量或系统属性？

> ID：11306951
> 
> 赞同：112
> 
> 时间：2012-07-03T08:16:06.337
> 
> 标签：java, spring, environment-variables, spring-test

我想编写一些测试来检查已部署 WAR 的 XML Spring 配置。不幸的是，有些 bean 需要设置一些环境变量或系统属性。使用 @ContextConfiguration 的便捷测试样式时，如何在 spring bean 初始化之前设置环境变量？

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:whereever/context.xml")
public class TestWarSpringContext { ... } 
```

如果我用注释配置应用程序上下文，我看不到在 spring 上下文初始化之前我可以做某事的钩子。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-08-27T14:48:17.100

您可以在静态初始化程序中初始化 System 属性：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:whereever/context.xml")
public class TestWarSpringContext {

    static {
        System.setProperty("myproperty", "foo");
    }

} 
```

静态初始化代码将在 spring 应用程序上下文初始化之前执行。

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2016-03-03T04:45:23.107

从 Spring 4.1 开始，正确的做法是使用`@TestPropertySource`注解。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:whereever/context.xml")
@TestPropertySource(properties = {"myproperty = foo"})
public class TestWarSpringContext {
    ...    
} 
```

[请参阅Spring 文档](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/integration-testing.html)和[Javadocs](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/context/TestPropertySource.html)中的 @TestPropertySource 。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-12-23T17:21:31.140

还可以使用测试 ApplicationContextInitializer 来初始化系统属性：

```
public class TestApplicationContextInitializer implements ApplicationContextInitializer<ConfigurableApplicationContext>
{
    @Override
    public void initialize(ConfigurableApplicationContext applicationContext)
    {
        System.setProperty("myproperty", "value");
    }
} 
```

然后在测试类上配置它，除了 Spring 上下文配置文件位置：

```
@ContextConfiguration(initializers = TestApplicationContextInitializer.class, locations = "classpath:whereever/context.xml", ...)
@RunWith(SpringJUnit4ClassRunner.class)
public class SomeTest
{
...
} 
```

如果应该为所有单元测试设置某个系统属性，则可以避免代码重复。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-04-09T22:18:11.387

目前这里的所有答案都只讨论与设置更复杂的环境变量不同的系统属性，尤其是。用于测试。值得庆幸的是，可以使用下面的类，并且类文档有很好的例子

[环境变量.html](https://stefanbirkner.github.io/system-rules/apidocs/org/junit/contrib/java/lang/system/EnvironmentVariables.html)

文档中的一个简单示例，已修改为与 @SpringBootTest 一起使用

```
@SpringBootTest
public class EnvironmentVariablesTest {
   @ClassRule
   public final EnvironmentVariables environmentVariables = new EnvironmentVariables().set("name", "value");

   @Test
   public void test() {
     assertEquals("value", System.getenv("name"));
   }
 } 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-03-02T10:59:57.590

如果你希望你的变量对所有测试都有效，你可以`application.properties`在你的测试资源目录中有一个文件（默认情况下：）`src/test/resources`，它看起来像这样：

```
MYPROPERTY=foo 
```

然后它将被加载和使用，除非您有定义 via`@TestPropertySource`或类似的方法 - 加载属性的确切顺序可以在 Spring 文档第[24 章中找到。外部化配置](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-09-03T09:57:34.243

您可以将系统属性设置为 VM 参数。

如果您的项目是一个 Maven 项目，那么您可以在运行测试类时执行以下命令：

```
mvn test -Dapp.url="https://stackoverflow.com" 
```

测试类：

```
public class AppTest  {
@Test
public void testUrl() {
    System.out.println(System.getProperty("app.url"));
    }
} 
```

如果您想在 Eclipse 中运行单个测试类或方法，则：

1) 转到运行 -> 运行配置

2) 在左侧的 Junit 部分下选择您的测试类。

3）执行以下操作：

[![在此处输入图像描述](../Images/97c2c256058f65c0fa1ce7bf4c0f870d.png)](https://i.stack.imgur.com/kgihi.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-04-26T23:31:19.220

对于单元测试，当我执行“mvn clean install”时，系统变量尚未实例化，因为没有运行应用程序的服务器。所以为了设置系统属性，我需要在 pom.xml 中进行。像这样：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.21.0</version>
    <configuration>
        <systemPropertyVariables>
            <propertyName>propertyValue</propertyName>
            <MY_ENV_VAR>newValue</MY_ENV_VAR>
            <ENV_TARGET>olqa</ENV_TARGET>
            <buildDirectory>${project.build.directory}</buildDirectory>
        </systemPropertyVariables>
    </configuration>
</plugin> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-09-16T16:10:19.223

对于springboot，我认为这是最简单的方法，`@SpringBootTest`可以使用java中的注释：

```
@SpringBootTest(
    properties = { "spring.application.name=example", "ENV_VARIABLE=secret" }
)
public class ApplicationTest {

    // Write your tests here

} 
```

或者在 kotlin 中你可以这样做：

```
@SpringBootTest(
    properties = ["spring.application.name=example", "ENV_VARIABLE=secret"]
)
internal class ApplicationKTest {

    // Write your tests here

} 
```

就是这样，您的测试应该使用您在注释中定义的属性覆盖属性。假设您`application.yml`看起来像这样：

```
spring:
  application:
    name: "app"

db:
  username: "user"
  password: ${ENV_VARIABLE:default} 
```

然后在测试期间它将是：

*   spring 属性`spring.application.name`将返回值`"example"`
*   环境变量`ENV_VARIABLE`将返回`"secret"`，因此如果您`db.password`在代码中使用该值，它将返回`"secret"`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-11-19T23:05:12.840

如果您有很多测试类（启动 tomcat/server 的 IT 测试），并且测试失败，您需要使用 System.setProperty("ccm.configs.dir", configPath); 设置系统属性；由于您需要确保在 spring 开始之前设置它，因此您需要将它放在类中的静态上下文中。并确保任何可能依赖它的测试都获得此设置的系统属性，请在您的测试文件夹中定义一个简单的配置类来设置该变量。PS在我的情况下，所需的环境变量是“ccm.configs.dir”这是我在测试文件夹中添加的内容，

```
@Configuration
public class ConfigLoader {
  static {

    System.setProperty("ccm.configs.dir", "path/to/the/resource");
  }

} 
```

我所有的集成测试类都能够在它们运行时获得已经设置的变量。

# ios - 使用 ARC 时 Xcode 中的释放错误

> ID：11306952
> 
> 赞同：0
> 
> 时间：2012-07-03T08:16:06.493
> 
> 标签：ios, mkmapview, automatic-ref-counting

我设置了一张地图，带有一些 MKAnnotation。当我将它们添加到地图时，我收到以下消息：

ENTAnottation 类的实例 0xbe62850 已被释放，而键值观察者仍向其注册。观察信息被泄露，甚至可能被错误地附加到其他对象上。在 NSKVODeallocateBreak 上设置断点以在调试器中停止。这是当前的观察信息：（上下文：0x0，属性：0xbe66b30>

如果我没记错的话，这意味着一个对象在他们的观察者还活着的时候被释放了。我怎么知道观察者是什么？而且，即使我找到它们...... ARC 是否禁止明确解除分配？如果那是真的，我无法解除分配它们……所以……我该怎么办？

谢谢你。

- - - -编辑 - - -

应要求，我发布我的代码。我调用了一个 web，它返回一个 JSON，其中包含我需要设置注释的值：

```
- (void)requestFinished:(ASIHTTPRequest *)request
{
responseString = [request responseString];
id jsonObject = [responseString objectFromJSONString];
NSLog(@"From the JSON: %@", responseString);
NSMutableArray *lat = [jsonObject valueForKeyPath:@"latitud"];
NSMutableArray *lon = [jsonObject valueForKeyPath:@"longitud"];
NSMutableArray *azafatas = [jsonObject valueForKeyPath:@"azafata"];
NSMutableArray *usernames = [jsonObject valueForKeyPath:@"username"];
NSMutableArray *mapazafatas=[[NSMutableArray alloc]init];
for(int i=0;i<[lat count]; i++)
{
    ENTAnottation *azafata=[[ENTAnottation alloc]init];
    double latidouble=[[lat objectAtIndex:i]doubleValue];
    double longdouble=[[lon objectAtIndex:i]doubleValue];
    CLLocationDegrees lati=latidouble;
    CLLocationDegrees longi=longdouble;
    CLLocationCoordinate2D coords=CLLocationCoordinate2DMake(lati, longi);
    NSString *nombre=[azafatas objectAtIndex:i];
    NSString *email=[usernames objectAtIndex:i];
    azafata.coordinate=coords;
    azafata.title=nombre;
    azafata.username=email;
    [mapazafatas addObject:azafata];
    //[mapa addAnnotation:azafata];
}
for (int i=0;i<[mapazafatas count];i++)
{
    [mapa addAnnotation:[mapazafatas objectAtIndex:i]];
}
} 
```

在那之后，应用程序崩溃了，尽管它通过我的代码没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:30:18.633

解决了。显然，如果您传递了一对不可能的坐标，它会向您抛出非常清晰且不可能混淆任何人的错误消息。可怜我...

# c# - 内存不足异常 C# 列表

> ID：11306956
> 
> 赞同：0
> 
> 时间：2012-07-03T08:16:20.757
> 
> 标签：c#, list, out-of-memory

我应该如何制作一个可以容纳这个范围的列表（在代码中），因为它显示内存不足异常？

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var l1 = Enumerable.Range(999900000, 1000000000).ToList();
            l1.ForEach(f => Console.WriteLine(f));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T08:19:19.037

不要转换为`List<T>`，只需枚举：

```
var l1 = Enumerable.Range(999900000, 1000000000);
foreach(var f in l1)
    Console.WriteLine(f); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:21:18.497

不要在列表中收集您需要的所有数据，特别是如果您已经知道它的内容，而是使用*enumerator*，以这种方式减少应用程序的内存占用。

例如：

```
 IEnumerable<int> GetNextInt()
    {
        for(int i=999900000; i< 1000000000; i++)
        {
            yield return i;
        }
    } 
```

并在循环之后使用它

```
foreach(var integer in GetNextInt())
{ 
    //do something.. 
} 
```

# php - 您可以在 Google Analytics 中存储表单选择吗？

> ID：11306958
> 
> 赞同：0
> 
> 时间：2012-07-03T08:16:24.340
> 
> 标签：php, javascript, google-analytics

如果我有一个 javascript 表单可以打开或关闭许多按钮，如果我想捕获被按下的按钮，我可以在谷歌分析中这样做吗？还是我需要将它存储在我自己的数据库中？.. .如果在GA有可能，有人能指出我正确的方向吗？...亲切的问候J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:25:18.877

阅读 GA 事件跟踪：[https ://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

它可以让您将自定义事件或操作推送到 GA。例如：

```
_gaq.push(['_trackEvent', 'AJAXForms', 'Submit', 'Contact details form']); 
```

这仅记录表单已提交，但如果需要，您可以更深入地研究它以尝试记录特定值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:27:25.213

是的！

基本上，您只需将推送命令（通过 jQuery 或其他方式）绑定到您想要设置的任何事件。

```
$('.checkbox').change(function(){
  _gaq.push(['_trackEvent', 'Checkbox', 'interteraction', $(this).val()]);
}); 
```

有关更多信息，请参见此处。 [https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#Actions](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#Actions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:27:19.373

[您可以使用Analytics 文档](https://developers.google.com/analytics/devguides/collection/gajs/#Syntax)`push`中记录的函数以及[自定义变量](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)或[事件](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)将条目添加到 Analytics 数据队列。

# maven - Maven 阻止下载 jars (artifactId :tomcat-maven-plugin)

> ID：11306959
> 
> 赞同：0
> 
> 时间：2012-07-03T08:16:43.037
> 
> 标签：maven, maven-tomcat-plugin

我对 tomcat-maven-plugin 有疑问：这是代码

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>tomcat-maven-plugin</artifactId>
    <version>1.0-beta-1</version>
</plugin> 
```

所以在运行这个命令之后：`clean tomcat:run`

我得到这个结果：

```
 [INFO] Scanning for projects...
 [INFO]                                                                          
 [INFO] ------------------------------------------------------------------------
 [INFO] Building seleniumproject Maven Webapp 0.0.1-SNAPSHOT
 [INFO] ------------------------------------------------------------------------
 [INFO] 
 [INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ seleniumproject ---
 [INFO] Deleting C:\Users\Amira\junoWorkspace\seleniumproject\target
 [INFO] 
 [INFO] >>> tomcat-maven-plugin:1.0-beta-1:run (default-cli) @ seleniumproject >>>
 [INFO] 
 [INFO] --- maven-resources-plugin:2.5:resources (default-resources)  @seleniumproject ---
 [debug] execute contextualize
 [WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
 [INFO] Copying 0 resource
 [INFO] 
 [INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @  seleniumproject ---
 [INFO] No sources to compile
 [INFO] 
 [INFO] <<< tomcat-maven-plugin:1.0-beta-1:run (default-cli) @ seleniumproject <<<
 [INFO] 
 [INFO] --- tomcat-maven-plugin:1.0-beta-1:run (default-cli) @ seleniumproject ---

 Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-  api/2.0/maven-plugin-api-2.0.pom
 Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-api/2.0/maven-plugin-api-2.0.pom (601 B at 1.2 KB/sec)
 Downloading: http://repo.maven.apache.org/maven2/junit/junit/3.8.2/junit-3.8.2.pom
 .......................................
 Downloaded: http://repo.maven.apache.org/maven2/org/apache/tomcat/dbcp/6.0.16/dbcp-6.0.16.jar (194 KB at 128.6 KB/sec)

 Downloaded: http://repo.maven.apache.org/maven2/org/apache/tomcat/coyote/6.0.16/coyote-6.0.16.jar (725 KB at 367.5 KB/sec) 
```

如您所见，它会阻止下载：请问有解决方案吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:02:39.103

我不知道你从哪里得到网址：

```
http://repo.maven.apache.org/maven2/ 
```

但看起来你已经更改了 settings.xml 文件中的配置，因为 Maven Central 有[http://repo1.maven.apache.org/maven2/](http://repo1.maven.apache.org/maven2/)代替。此外，我可以推荐使用存储库管理器（Nexus、Archiva、Artifactory）。

顺便说一句：你为​​什么使用 mojo.codehaus tomcat 插件而不是 Apache [http://tomcat.apache.org/maven-plugin.html的官方](http://tomcat.apache.org/maven-plugin.html)

# iphone - Json解析错误

> ID：11306960
> 
> 赞同：0
> 
> 时间：2012-07-03T08:16:45.127
> 
> 标签：iphone

我正在开发一个应用程序，我在其中进行 Json 解析。代码如下：

```
NSString *urlstring=@"http:www.djksfd.com";
NSURL *url=[NSURL URLWithString:urlstring];
NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:url];

NSString *str=[NSString stringWithFormat:@"'{\"keywords\":{\"appList\":[\"Real Drum\",\"Tabla\",\"Adobe Flash Player 11.1\",\"Adobe Reader\",\"Aldiko\"],\"genreMap\":{\"Soundtrack\":\"38\",\"Hindi\":\"182\",\"0\":\"10\",\"Pop\":\"2\",\"Other\":\"4\"}}}'"];

 NSData *data=[str dataUsingEncoding:NSUTF8StringEncoding];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:str forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:data];

NSHTTPURLResponse* urlResponse = nil; 
NSError *error = [[NSError alloc] init];  
responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *result1 = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
NSLog(@"Response Code: %d", [urlResponse statusCode]);
// if ([urlResponse statusCode] >= 200 && [urlResponse statusCode] < 300) 
//{
NSLog(@"Response: %@", result1); 
```

响应如下：

```
 <html><head><title>Apache Tomcat/7.0.27 - Error report</title><style><!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status 500 - </h1><HR size="1" noshade="noshade"><p><b>type</b> Exception report</p><p><b>message</b> <u></u></p><p><b>description</b> <u>The server encountered an internal error () that prevented it from fulfilling this request.</u></p><p><b>exception</b> <pre>java.lang.NullPointerException
com.mthsense.web.rest.DefaultExceptionMapper.toResponse(DefaultExceptionMapper.java:29)
com.mthsense.web.rest.DefaultExceptionMapper.toResponse(DefaultExceptionMapper.java:1)
org.jboss.resteasy.core.SynchronousDispatcher.executeExceptionMapper(SynchronousDispatcher.java:330)
org.jboss.resteasy.core.SynchronousDispatcher.unwrapException(SynchronousDispatcher.java:359)
org.jboss.resteasy.core.SynchronousDispatcher.handleReaderException(SynchronousDispatcher.java:422)
org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:230)
org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:196)
org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:551)
org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:513)
org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:125)
org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208)
org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)
org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

**note** Apache Tomcat/7.0.27 日志中提供了根本原因的完整堆栈跟踪。

### Apache Tomcat/7.0.27

.

所以请告诉我如何得到正确的响应，以及如何解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:30:12.610

好吧，我要做的第一件事是让系统为我完成，而不是手动构建 JSON。如果您正在为 iOS 5+ 进行开发，请查看：

```
+[NSJSONSerialization dataWithJSONObject:options:error:] 
```

创建`NSArrays`/`NSDictionaries`以包含您的对象，然后使用上述方法进行序列化。这将从字典/数组创建您的 JSON 数据。这样您就可以消除 JSON 本身的任何问题。

即使你的最终目标操作系统是 <5.0，这至少会帮助你的调试过程。

哦，你为什么要这样做？

```
[request setValue:str forHTTPHeaderField:@"Content-Length"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:58:18.323

我认为你有无效的 json 字符串..请检查一下..在你的 json 字符串中我认为你错过了这个括号“[”..请检查一下......我认为你需要这个 json....

```
{
"keywords": {
    "appList": [
        "Real Drum",
        "Tabla",
        "Adobe Flash Player 11.1",
        "Adobe Reader",
        "Aldiko"
    ],
    "genreMap": {
        "Soundtrack": "38",
        "Hindi": "182",
        "0": "10",
        "Pop": "2",
        "Other": "4"
       }
    }
}

NSMutableDictionary *dict1 = [[NSMutableDictionary alloc] initWithCapacity:0];

NSMutableDictionary *dict2 = [[NSMutableDictionary alloc] initWithCapacity:0];
NSMutableArray *arr = [[NSMutableArray alloc] initWithObjects:@"Real Drum",@"Tabla",@"Adobe Flash Player 11.1",@"Adobe Reader",@"Aldiko",nill];

[dict2 addObject:arr forKey@"appList"];

NSMutableDictionary *dict3 = [[NSMutableDictionary alloc] initWithCapacity:0];
[dict3 addObject:@"38" forKey:@"Soundtrack"]
[dict3 addObject:@"182" forKey:@"Hindi"]
[dict3 addObject:@"10" forKey:@"0"]
[dict3 addObject:@"4" forKey:@"Other"]
[dict2 addObject:dict3 forKey:@"genreMap"];
[dict2 release];
[dict1 addObject:dict2 forKey:@"keywords"];
[dict2 release];

NSString *jsonString = [jsonWriter stringWithObject:dict1];

NSData *data=[jsonString dataUsingEncoding:NSUTF8StringEncoding];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:str forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:data];

NSHTTPURLResponse* urlResponse = nil; 
NSError *error = [[NSError alloc] init];  
responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *result1 = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
NSLog(@"Response Code: %d", [urlResponse statusCode]);
   // if ([urlResponse statusCode] >= 200 && [urlResponse statusCode] < 300) 
   //{
    NSLog(@"Response: %@", result1); 
```

尝试将其包含在字符串中...

这可能会帮助你..

# sql - 获取多次出现的客户的详细信息

> ID：11306966
> 
> 赞同：0
> 
> 时间：2012-07-03T08:17:21.340
> 
> 标签：sql, sql-server

下面的代码出现了一个奇怪的错误。`No column was specified for column 2 of 'no1'.` 据我所知，它应该可以工作。我只是想收集有关客户在收据上不止一次存在的客户的详细信息。

```
SELECT
    CM.ClientID,
    CPN.Birthdate,
    CM.ClientPassword
FROM 
    dbo.ClientMaster AS CM
    JOIN dbo.ClientPerson AS CPN ON (CM.ClientID = CPN.ClientID)
    JOIN dbo.ClientProduct AS CP ON (CPN.ClientID = CP.ClientID)
WHERE 
    CM.ClientID IN (
                    SELECT 
                        no1.ClientID 
                    FROM 
                        (
                        SELECT 
                            CM.ClientID,
                            COUNT(*)
                        FROM 
                            dbo.ClientMaster AS CM
                            JOIN dbo.ClientPerson AS CPN ON (CM.ClientID = CPN.ClientID)
                            JOIN dbo.ClientProduct AS CP ON (CPN.ClientID = CP.ClientID)
                        WHERE
                            CP.PolicyNo IN (SELECT PolicyNo FROM Receipts)
                            AND CM.ClientID IS NOT NULL
                            AND Birthdate IS NOT NULL
                            AND ClientPassword IS NOT NULL
                        GROUP BY
                            CM.ClientID
                        HAVING 
                            COUNT(*)>1
                        ) AS no1
                    ) 
```

**解决方案**

啊没有意识到你不需要`Count(*)`. `Select`多谢你们！这就是我最终的结果。

```
SELECT DISTINCT
    CM.ClientID,
    CPN.Birthdate,
    CM.ClientPassword
FROM 
    dbo.ClientMaster AS CM
    JOIN dbo.ClientPerson AS CPN ON (CM.ClientID = CPN.ClientID)
    JOIN dbo.ClientProduct AS CP ON (CPN.ClientID = CP.ClientID)
WHERE 
    CM.ClientID IN (
                        SELECT 
                            ClientID 
                        FROM 
                            Receipts
                        GROUP BY
                            ClientID
                        HAVING 
                            COUNT(*)>1
                        )
    AND CM.ClientID IS NOT NULL
    AND Birthdate IS NOT NULL
    AND ClientPassword IS NOT NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:22:50.073

您的 COUNT(*) 列需要一个名称，例如：

```
 COUNT(*) AS RecordCount 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:31:14.547

您不需要为此嵌套两次相同的查询。你可以这样做：

```
SELECT
    CM.ClientID,
    CPN.Birthdate,
    CM.ClientPassword
FROM 
    dbo.ClientMaster AS CM
    JOIN dbo.ClientPerson AS CPN ON (CM.ClientID = CPN.ClientID)
    JOIN dbo.ClientProduct AS CP ON (CPN.ClientID = CP.ClientID)
GROUP BY CM.ClientID, CPN.Birthdate, CM.ClientPassword
HAVING COUNT(CM.ClientID) > 1 
```

# php - 在 safari 和 Internet Explorer 中重新加载无限循环

> ID：11306967
> 
> 赞同：0
> 
> 时间：2012-07-03T08:17:21.620
> 
> 标签：php, javascript

我有这段代码可以帮助我重新加载页面。问题是，它适用于 Chrome 和 Firefox，但不适用于 Safari，它会不断循环。

你能帮我为什么会这样吗？

这是代码：

```
top.location.href=\'http://www.facebook.com/pages/Penelope-NS/327068327378161?sk=app_338788849530374\'; 
```

我可以这样做吗？

谢谢

我找到了这段代码：我应该在哪里插入它？

```
headers 'Content-Type' => "text/html;charset=utf-8",
  'Last-Modified' => Time.now.httpdate,
  'P3P' => 'CP="CAO PSA OUR"',
  'X-UA-Compatible' => 'IE=edge' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:23:04.773

尝试`window.top.location = "NEW_URL"`用于IE。或者，如果您的代码是从 iframe 运行的，`parent.location = "NEW_URL"`

[也许同样的问题](https://stackoverflow.com/questions/6712528/top-location-href-doesnt-work-in-ie-8)

**更新：**

要处理脚本本身所在的同一页面： `self.location.href = newURL;`

要寻址框架集中的另一个页面： `window.top.frameName.location.href = newURL;`

或（超正确）：

`window.top.frames['frameName'].location.href = newURL;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:26:55.500

`top.location.href`取决于浏览器和 top.location 弹出窗口限额。大多数浏览器应该允许这样做，但较旧的 mac 浏览器往往不允许这样做。

将 Safari 更新到最新版本，它应该可以工作。对于较旧的 safari 浏览器，它不支持`top.location`脚本执行。

# android - Shell脚本在文本文件中搜索和替换

> ID：11306970
> 
> 赞同：0
> 
> 时间：2012-07-03T08:17:33.120
> 
> 标签：android, bash, shell

我必须在 android shell 中编辑文本文件。

所以我输入了这个 shell 脚本。

但我的 Galaxy Nexus 没有 Sed，Awk 也没有。

```
shell@android:/ $ sed -e "s/old_pattern/new_pattern/g" file_name > modify_file
/system/bin/sh: sed: not found 
```

它不起作用。

我如何修改`old_pattern`为`new_pattern`文本文件。

在 Shell 脚本中可以吗？

编辑的外壳脚本

```
#!/system/bin/sh
ARGS=4
BAD=65

if [ $# -ne "$ARGS" ]
then
    echo "Usage: `basename $0` TARGET_FILE,OLD_PATTERN,NEW_PATTERN,MODIFY_FILE"
    exit $BAD
fi

old_pattern=$2
new_pattern=$3
modify_file=$4

if [ -f "$1" ]
then
    target_file=$1
else
    echo "\"$3\" Does not exist."
    exit $BAD
fi

exit 0 
```

解决方案 ：

```
shell@android:/ $ while read STRING
>do
>echo "${STRING//old_pattern/new_pattern}" >> modify_file_name
>done < target_file_name
shell@android:/ $ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:25:40.157

pure 可以`bash`，但是在大文件上会很慢。

```
while read STRING
do
    echo "${STRING//old_pattern/new_pattern}" >> modify_file
done < file_name 
```

附言。哦，我刚刚提到你的外壳不是`bash`. 好像只是`sh`。那将无法与`sh`.

# html - iPad 缩放以适应不适用于内容最少的网页

> ID：11306973
> 
> 赞同：4
> 
> 时间：2012-07-03T08:17:41.247
> 
> 标签：html, css, ipad, viewport

考虑以下基本的 html 代码块：

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>iPad test</title>
    <meta name="viewport" content="width=device-width">
    <style>
        body
        {
            margin:0;
        }
        #content
        {
            margin: 0 auto;
            width: 980px;
            border:1px solid #c4c4c4;
            background-color:#f5f5f5;
        }
    </style>
</head>
<body>
<div id="content">
    A small amount of content
</div>
</body>
</html> 
```

在 iPad 上查看时，980 像素的主要内容区域不会自动缩放以适应 iPad 屏幕。但是，如果您替换`A small amount of content`为大量内容，即...足以导致垂直滚动，则页面在 iPad 上会自动缩放。

有人知道为什么是这样吗？我一直在搜索高低，似乎无法找到一种方法来强制在页面上的内容很少时发生自动缩放。

更改视口内容`width=980`当然可以解决问题，但是我正在创建一个响应式网站，因此视口需要是`device-width`.

我正在使用媒体查询来更改智能手机上内容区域的 CSS（宽度为 100%），并且我希望将网站的标准桌面版本用于 iPad。

任何想法将不胜感激。

注意：我在带有视网膜显示屏的 iPad 上进行测试，我不确定在旧型号上会发生什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T04:04:43.157

休息后，我以不同的角度回来了 - 如果将视口宽度设置为特定值可以解决我在 iPad 上的问题，为什么不这样做。

所以我的解决方案是将视口宽度默认为 device-width 以处理智能手机设备，然后检测 iPad 并调整视口宽度：

```
<meta name="viewport" content="width=device-width">

<script type="text/javascript">
    if(navigator.userAgent.match(/iPad/i)) {
        viewport = document.querySelector("meta[name=viewport]");
        viewport.setAttribute('content', 'width=980');
    }
</script> 
```

感谢您的建议[在此处插入用户名](https://stackoverflow.com/users/1456376/insertusernamehere)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:14:23.360

试试这个：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

整个内容将适合之后。

# java - 字符串包含

> ID：11306978
> 
> 赞同：-6
> 
> 时间：2012-07-03T08:18:03.070
> 
> 标签：java, string

如何检查字符串是否包含特定字符。我有一个字符串，如 1244445g 或 1234G555 或 1234566R 或 R1234556 我想检查字符串是否有 g/G 或 R/r ，如何检查？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:26:33.877

对于这类事情，最好的方法是检查您正在使用的类的 javadoc。在这种情况下，它是字符串，因此请查看[此处](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)。然后寻找一个可以解决问题的函数，例如在本例中为[indexOf](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)。这将查找 char 的第一次出现，因此它将返回它出现的位置，或者如果未找到则返回 -1。

如果您想查找大写或小写，您可以在返回时执行此操作`toLowerCase()`，或者您可以查看正则表达式。

另外，下次考虑用谷歌搜索一下，甚至在 stackoverflow 中查看类似的问题。您将节省每个人的时间，包括您自己！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:24:14.250

查看 Java Doc 并找到字符串类提供的方法，例如

```
String.contains(CharSequence c) 
```

[JAVA DOC：类字符串 - 包含](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)

只需使用

```
String s = "abcdg/Gefgh";
boolean b = s.contains("g/G"); 
```

检查指定的字符序列是否包含在源字符串中。

**编辑：**

如果您正在寻找一个特定的字符（大写或小写），您可能只执行两次相同的操作：

```
c.contains("g");
c.contains("G"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T08:27:22.657

```
String[] strArr = {"1244445g","1234G555","1234566R","R1234556"};

for (String str in strArr) {
    if (str.contains("g") || str.contains("G") || str.contains("r") || str.contains("R")) {
        System.out.println(str + " : YES");
    } else {
        System.out.println(str + " : NO");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T08:24:40.493

[您可以使用String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)的 for it`contains()`方法，也可以使用[Regex](http://www.vogella.com/articles/JavaRegularExpressions/article.html)。

```
line.contains("g");
line.contains("G"); 
```

所以 和 类似`r`和`R`。

# antlr - 使用 ANTLR 进行浅解析

> ID：11306982
> 
> 赞同：0
> 
> 时间：2012-07-03T08:18:15.930
> 
> 标签：antlr

我正在尝试开发一种能够在封闭上下文中提取某些操作的解决方案。

例如，在预订电影票的情况下，如果用户说：

“我想明天晚上去看电影，去卡萨布兰卡，我想坐在最后一排。”

我设计了用于获取电影名称、所需座位、放映日期和时间等的语法。

然而，虽然我考虑过 ANTLR 来开发这样的解决方案，但我真的不知道它是否有这样的功能，我的意思是，如果我可以定义几个根符号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:31:40.597

ANTLR 有解决语法歧义的方法。这些方法在 ANTLR 4 中得到了改进，但是在处理模棱两可的语言（尤其是人类语言）时，您将面临一个巨大的限制，这将不可避免地使 ANTLR 不适合该任务：

ANTLR 最终通过确定多个潜在选项中*的*一个特定选项是正确的解决方案来解决歧义。由于此解决方案发生在使用 ANTLR 的解析过程的早期阶段，因此很难将语义逻辑纳入此决策过程（与仅涉及语法的逻辑相反）。

编辑：在 NLP 的上下文中，关于 ANTLR 4 特别有趣的一件事是 ANTLR 4 使用[增强的转换网络](http://en.wikipedia.org/wiki/Augmented_transition_network)作为其解析器的基础。我知道在那里的某个地方可以对其进行修改以用于自然语言处理，但迄今为止还没有弄清楚如何使它工作。参考：我开发了ANTLR 4 运行时的[优化](http://github.com/sharwell/antlr4/tree/optimized)版本，目前稍微落后于参考分支，但我会在今年夏天晚些时候赶上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:24:16.770

ANTLR 不太适合解析*人类*语言：它们太模棱两可了。试试[NLP](http://en.wikipedia.org/wiki/Natural_language_processing)。这是[自然语言处理工具包](http://en.wikipedia.org/wiki/List_of_natural_language_processing_toolkits)的列表。

# android - 重新排列上下文选项菜单顺序

> ID：11306986
> 
> 赞同：0
> 
> 时间：2012-07-03T08:18:24.197
> 
> 标签：android, android-layout, android-intent, android-widget

我有一个上下文选项菜单，我需要按特定顺序重新排列它。选项菜单的每一行应该只包含一个项目，例如 Share to Fb 和 Share to Twitter 现在显示。

是否可以将选项菜单“一些警告文本...”和“注销”放在不同的行上？

![在此处输入图像描述](../Images/1b65e0ac5e83dc98bdaf45bb4eaa2727.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:25:04.093

如果您使用的是默认选项菜单，答案似乎是“否”。Android 自行决定放置选项。

可能，您可能需要创建自定义选项菜单。请参阅[本指南](http://www.codeproject.com/Articles/173121/Android-Menus-My-Way)和已经提出的[这个问题。](https://stackoverflow.com/questions/4193348/custom-options-menu-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:34:11.013

如果您实现自定义选项菜单，那么您将制作静态文本。这是自定义选项菜单的一些参考链接，http://www.codeproject.com/Articles/173121/Android-Menus-My-Way

# c++ - 使用 STL 在列表 <> 中查找最小值

> ID：11306987
> 
> 赞同：4
> 
> 时间：2012-07-03T08:18:26.883
> 
> 标签：c++, stl

我有浮点数的列表或向量。如何使用 STL 算法在列表/向量中找到最小值？我可以通过迭代找到，但是有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T08:21:00.253

您可以使用[std::min_element](http://www.cplusplus.com/reference/algorithm/min_element/)算法。请注意，它不会比基于迭代的算法快，它仍然很`O(n)`复杂。但是编写的代码量会更少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T08:23:12.537

```
std::vector<float>::iterator iter = std::min_element(items.begin(), items.end());

std::cout << *iter << "\n"; 
```

# ios - iPhone - 什么是适合我的应用的音频播放器？

> ID：11306991
> 
> 赞同：5
> 
> 时间：2012-07-03T08:18:32.903
> 
> 标签：ios, avfoundation, avaudioplayer, volume, mpmusicplayercontroller

我正在设计一个从用户的 iPhone 音乐库播放音乐的音乐应用程序，但在确定哪个音频播放器适合它（AVAudioPlayer、AVPlayer 或 MPMusicPlayer）时遇到问题。

我的应用程序需要执行以下操作：

*   播放 iPhone 音乐库中的音乐
*   与设备/系统音量分开控制应用音乐音量
*   当应用移至后台时继续播放应用音乐
*   当歌曲更改为下一首歌曲或完成时捕捉事件

根据我的研究，似乎上面提到的三个音频播放器中的每一个都完成了我的应用程序所需的一些任务，但它们都没有完成所有这些任务。AVPlayer 似乎最接近，除了它的音量取决于设备/系统音量。

有没有人有任何建议或解决方法来实现这一点？我已经为此绞尽脑汁已经有一段时间了，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:25:36.857

**编辑**

MPMusicPlayerController 类在通过`+ applicationMusicPlayer`. 那么，最好的选择就是简单地使用 MPMusicPlayer 来查询 iPod 音乐库。一旦用户选择了一首歌曲，`MPMediaItem`就可以查询其资产 URL 并输入 AVPlayer 的`+playerWithURL`结果，让您完全控制播放参数。

--

我会推荐 MPMusicPlayerController。

1.  MPMusicPlayerController 处理在 iTunes 库中播放音频文件的低级细节。
2.  您可以使用类方法`-applicationMusicPlayer`获取 iPod 单例的本地副本；`volume`从那里，您可以通过仅为您的应用程序设置其属性来控制其音量。
3.  我假设 MPMusicPlayerController 已经内置了背景音频支持。如果没有，您可以更改应用程序的音频会话上下文以使其工作（`Playing background audio`参见[http://www.sagorin.org/2011/11/29/ios -播放音频背景音频/](http://www.sagorin.org/2011/11/29/ios-playing-audio-in-background-audio/)）
4.  您可以设置您选择的任何对象作为特定于应用程序的`MPMusicPlayerController`对象的 KVO 观察者。这样，您可以在`nowPlayingItem`属性更改时收到通知。

希望这个高级描述就足够了。如果您需要任何进一步的说明，请告诉我。

# iphone - 如何在iphone中的选定单元格上提供图像

> ID：11306993
> 
> 赞同：0
> 
> 时间：2012-07-03T08:18:39.240
> 
> 标签：iphone, objective-c

我想在单元格上设置图像。当我选择该单元格时，我只想在其上传递图像，我在 tableview 中有 3 个部分，第一部分我有 1 行。第二部分我有 3 行，第三部分我有 1 行所以如何在单元格上调用选定的图像。如果我点击了任何单元格

我尝试使用此代码，但它可以工作，但是如果此视图出现在单元格背景上，我也会用红色显示标签，然后它会隐藏标签，只有红色我可以看到该标签上出现的文本，但标签背景颜色我不能看看为什么会这样。我将此代码放在 indexpath 方法的 cellfor 行中

```
UIView *viewSelected = [[[UIView alloc] init] autorelease];
viewSelected.backgroundColor = [UIColor whiteColor];
cell.selectedBackgroundView = viewSelected; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:24:17.287

使用检查分隔部分

```
if (indexPath.section == 0){
  //执行第0节的选择
}
否则如果（indexPath.section == 1）{
  //执行第1节的选择
}
否则 if (indexPath.section == 2){
  //执行第2节的选择
  //也做特定行的选择

  if (indexPath.row == 0){
     //执行第0行第2部分的选择
   }
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:41:40.473

您可以在`didSelectRowAtIndexPath`方法中完成此操作.....

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
 UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
switch ([indexPath.section]) {
    case 0:
    {
       switch ([indexPath.row]) {
           case 0:
           {
             [cell.imageView setImage:[UIImage imageNamed:@"imageName.png"]];
            break;
           }
       break;
    }
} 
```

# c# - VS 2010“转到页面顶部”快捷方式

> ID：11306995
> 
> 赞同：3
> 
> 时间：2012-07-03T08:18:51.343
> 
> 标签：c#, visual-studio-2010

我环顾四周并用谷歌搜索，但在 VS 2010 上没有找到任何“转到页面顶部”快捷方式。
当您的课程有 2000 行长并且您想滚动到顶部时，这非常令人沮丧。
任何人 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T08:20:28.330

`Ctrl`+ `Home`，这是 Windows 应用程序中的约定（适用于任何文本编辑器：Word、记事本等）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T08:21:14.517

不知道如何使用任何鼠标快捷方式进行操作。

但是，使用**键盘**，您可以使用`Ctrl`+`Home`

顺便说一句 - 使用**鼠标**，如果你想到达文件中定义的顶部`Class`，`filename.cs`你可以转到`left top combobox`你的类文件，`select the class name`它会带你到所选类名的顶部，如下面的截图： ![在此处输入图像描述](../Images/01c716c4a524765cf567ae67cd42add1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:21:37.943

Ctrl+Home 和其他windows doc一样

# css - CSS 变量以减少 CSS 文件

> ID：11306998
> 
> 赞同：2
> 
> 时间：2012-07-03T08:19:02.727
> 
> 标签：css

我有

```
.excel { background-image:url(/image/icon/silk/excel.png) !important } 
```

我可以使用变量代替*excel*吗？这样我就不需要为所有 1200 个图标制作 CSS 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:23:01.227

不，但您可以使用 CSS 图像精灵：[http](http://css-tricks.com/css-sprites/) ://css-tricks.com/css-sprites/并定义背景位置。或者你可以得到 LESS，它依赖于 Javascript： http: [//lesscss.org/](http://lesscss.org/)。LESS 确实允许您为颜色、类名等设置变量，但并非所有浏览器都支持它，这是缺点。然而，它变得越来越受欢迎，所以值得一试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:22:30.827

不，这是不可能的。

您可以内联构建 css 样式

```
<div style = "background-image:url(<%=imageSrc%>) !important">
</div> 
```

这里我使用了 JSP Scriplet。imageSrc 是一个 Java 变量，假设它包含图像源。

您可以将脚本替换为您的语言语法。